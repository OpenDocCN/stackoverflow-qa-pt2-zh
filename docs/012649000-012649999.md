# StackOverflow 问答 12649000-12649999

# php - 从 HTML 中间的图像对象打印图像而不保存

> ID：12649001
> 
> 赞同：0
> 
> 时间：2012-09-29T00:56:21.390
> 
> 标签：php, image

我使用了想象中的扩展。我有一个`$image_obj`对象。我可以回显它，但它使它看起来像随机数量的字符，除非我输入：

```
$Obj_img->setImageFormat("png");
header("Content-Type: image/png");
echo $image_obj; 
```

有没有办法真正这样说：

```
echo "<html>
<body>
this is my image: {$image_obj}
</body>
</html>"; 
```

我知道你能做到

```
echo "this is my image <img src="raw:{$image_obj}" /> 
```

但是有没有其他方法可以不将文档保存到文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T00:58:59.897

制作一个`image.php`生成图像的脚本，并在您的 html 中指向它：

```
<img src="image.php?param1=value1&param2=value2&..."/> 
```

# css - Bootstrap：如何使列换行@ 1024px

> ID：12649003
> 
> 赞同：0
> 
> 时间：2012-09-29T00:56:39.687
> 
> 标签：css, twitter-bootstrap

如何使列在 1024px 处换***行***？因为，（@ 1024px）页面***是***响应式的，但*“弹性”*很丑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:37:03.240

在基本层面上，您可以[模仿 Bootstrap 方法](https://github.com/twitter/bootstrap/blob/master/less/responsive-767px-max.less#L59)：

```
//
// Responsive: Landscape phone to desktop/tablet
// --------------------------------------------------
@media (max-width: 767px) {
  // GRID & CONTAINERS
  // -----------------
  // Remove width from containers
  .container {
    width: auto;
  }

  // Fluid rows
  .row-fluid {
    width: 100%;
  }

  // Make all grid-sized elements block level again
  [class*="span"], .row-fluid [class*="span"] {
    float: none;
    display: block;
    width: 100%;
    margin-left: 0;
    .box-sizing(border-box);
  }
  .span12,
  .row-fluid .span12 {
    width: 100%;
    .box-sizing(border-box);
  }
} 
```

这当然是[LESS CSS](http://lesscss.org/)。这是编译后的LESS：

```
[class*="span"], .row-fluid [class*="span"] {
    -moz-box-sizing: border-box;
    display: block;
    float: none;
    margin-left: 0;
    width: 100%;
} 
```

这是一个开始复制任务的小片段：

```
@media all and (min-width: 1000px) {
    [class*="span"], .row-fluid [class*="span"] {
        width: 100%;
    }
} 
```

[http://jsfiddle.net/userdude/ZJJFJ/1/](http://jsfiddle.net/userdude/ZJJFJ/1/)

还有一个[大于 1200px 的响应式 CSS 文件](https://github.com/twitter/bootstrap/blob/master/less/responsive-1200px-min.less)，这也可能会有所帮助。如果你用 LESS 来做这件事，我相信它也会更简单，而不是纯 CSS。

# html - 为什么我的 Flash SWF 视频有时会卡在我的网站上？

> ID：12649009
> 
> 赞同：0
> 
> 时间：2012-09-29T00:57:39.123
> 
> 标签：html, video, flash

下面是我在 HTML5 网页上嵌入的代码，但有时它会卡在多台计算机的所有浏览器中。

```
 <embed src="ealco.swf" type="application/x-shockwave-flash" width="100%" height="349"></embed> 
```

您的回答将不胜感激......

# php - 如何更好地保护我的数据库连接

> ID：12649017
> 
> 赞同：0
> 
> 时间：2012-09-29T00:58:50.130
> 
> 标签：php, mysql, security

有人告诉我，这段代码是旧的连接方式，容易受到 sql 注入的影响。我怎样才能使它安全？

这是我用来检查数据库中的用户并在他们没有帐户时添加新用户的代码。我尝试了mysqli，但我认为我做的不对，所以我现在不得不回到这个，直到我知道如何使它安全。

```
<?php
// Connect to the database(host, username, password)
$con = mysql_connect('localhost','user1','pass1');
if (!$con)
{
    echo "Failed to make connection.";
    exit;
}
// Select the database. Enter the name of your database (not the same as the table name)
$db = mysql_select_db('db1');
if (!$db)
{
    echo "Failed to select db.";
    exit;
}
// $_POST['username'] and $_POST['password'] are the param names we sent in our click event in login.js
$username = $_POST['username'];
$password = $_POST['password'];
// Select eveything from the users table where username field == the username we posted and password field == the password we posted
$sql = "SELECT * FROM users WHERE username = '" . $username . "' AND password = '" . $password . "'";
$query = mysql_query($sql);
// If we find a match, create an array of data, json_encode it and echo it out
if (mysql_num_rows($query) > 0)
{
    $row = mysql_fetch_array($query);
    $response = array(
        'logged' => true,
        'name' => $row['name'],
        'email' => $row['email']
    );
    echo json_encode($response);
}
else
{
    // Else the username and/or password was invalid! Create an array, json_encode it and echo it out
    $response = array(
        'logged' => false,
        'message' => 'Invalid Username and/or Password'
    );
    echo json_encode($response);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T01:01:00.580

来自用户的任何数据都应通过 mysql_real_escape_string() 传递。有关使用该功能的更多信息，请参阅下面的 URL。这很重要。

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

以下是有关使用 PHP 进行 SQL 注入的更多信息：

[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

MySQLi 信息（除了 mysql_real_escape_string 之外的另一种技术）：

[http://php.net/manual/en/mysqli.quickstart.prepared-statements.php](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

编辑：好吧，我承认，我有点老派。MySQLi 似乎绝对是要走的路。我比较熟悉 PHP3 和 PHP4 开发。如果可以，请使用最后一个链接重新实现您的数据访问代码。

# junit - 如何在 JUnit 中强制 SQLException

> ID：12649020
> 
> 赞同：4
> 
> 时间：2012-09-29T00:59:39.690
> 
> 标签：junit, mockito, sqlexception

我在 JUnit 中编写单元测试，但未能成功覆盖捕获 SQLException 并返回空对象的特定方法的分支。这是我正在测试的课程：

```
@Component
public class UnitOfMeasureRowMapper implements RowMapper<UnitOfMeasure> {
    public UnitOfMeasure mapRow(final ResultSet resultSet, final int rowNumber) throws SQLException {
        UnitOfMeasure unitOfMeasure = new UnitOfMeasure();
        try {
            unitOfMeasure.setUnitOfMeasureId(resultSet.getInt("UNITOFMEASUREID"));
            unitOfMeasure.setOwnerUserId(resultSet.getInt("USERID"));
            unitOfMeasure.setName(resultSet.getString("NAME"));
            unitOfMeasure.setDescription(resultSet.getString("DESCRIPTION"));
        } catch (SQLException e) {
            unitOfMeasure = null;
        }
        return unitOfMeasure;
    }
} 
```

这是我为涵盖上述方法的第二个分支而编写的 JUnit 测试（使用来自测试类的适当上下文）：

```
private static UnitOfMeasure testUnitOfMeasure;
    private static UnitOfMeasureRowMapper mockRowMapper;

    public void setUp() throws Exception {
        mockRowMapper = mock(UnitOfMeasureRowMapper.class);
        mockResultSet = mock(ResultSet.class);
    }
    @Test(expected=SQLException.class)
    public void testUnitOfMeasureRowMapperFailsSQLException() throws SQLException {

        when(mockRowMapper.mapRow(mockResultSet, 1)).thenReturn(null);
        testUnitOfMeasure = mockRowMapper.mapRow(mockResultSet, 1);
    } 
```

我认为问题出在最后一行；不知何故，我需要强制一个 SQLException。问题是，我不知道如何也无法找到答案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T09:18:19.363

如果我很好地理解了这个问题，那么被测试的类是*UnitOfMeasureRowMapper*。如果这是真的，那么你不想在你的测试中模拟它，否则你正在测试一个模拟！在您的 JUnit 中测试的是*UnitOfMeasureRowMapper#mapRow*在您给它的*ResultSet*在方法执行期间引发 SQLException 时的行为。然后，您希望此方法返回 null。我会这样写：

```
private ResultSet mockResultSet;
private RowMapper<UnitOfMeasure> rowMapper = new UnitOfMeasureRowMapper();

public void setUp() throws Exception {
    mockResultSet = mock(ResultSet.class);
}
@Test
public void mapRow_SHOULD_return_null_WHEN_resultSet_throws_a_SQLException() {
    when(mockResultSet.getInt(anyString()).thenThrow(new SQLException());
    assertThat(mockRowMapper.mapRow(mockResultSet, 1), nullValue());
} 
```

正如 Samuel 在他的回答中所建议的那样，您可以设置用于抛出 SQLException 的结果集的方法之一，然后在您的 JUnit 中检查 mapRow 方法是否按预期返回 null。在这里，您不是在测试结果集的行为，因此可以模拟它以实现在某些情况下通常会遇到的行为，否则会很痛苦。模拟结果集行为让您可以专注于测试 RowMapper 行为。

您正在测试实现*RowMapper的**UnitOfMeasureRowMapper*。所以在你的 JUnit 中有一个*rowMapper*属性，我更喜欢通过它的界面来查看它。我喜欢粗暴地调用*UnitOfMeasureRowMapper*的构造函数，因为我想让我的 JUnit 尽可能简单。

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T01:06:42.510

`getInt`设置您的模拟的方法之一（也许？）`ResultSet`以引发异常。您没有指定您使用的模拟框架，所以我无法告诉您确切的语法。***

# git - 将 .git/config 的编辑添加到原始存储库

> ID：12649023
> 
> 赞同：0
> 
> 时间：2012-09-29T01:00:37.133
> 
> 标签：git, github

我编辑了我的本地存储库，这样当我推送到`master`分支时，它也会推送到`gh-pages`.

我的本地`.git/commit`包含这一行。

```
push = +refs/heads/master:refs/heads/gh-pages
push = +refs/heads/master:refs/heads/master 
```

我想要这样，如果我克隆了这个 repo`.git/commit`仍然有上面的行`.git/commit`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:58:45.307

使用 git 开箱即用，现在这是不可能的。您现在无法在拉/推/克隆上共享配置（我不得不承认这有时很有用）。

因此，在这种情况下，最好的解决方案是使用 tar/zip 而不是 git clone 共享您的存储库。这样您就可以包含该`.git`文件夹。

否则，您可以使用和共享一个 bash 脚本来根据需要自动设置 git repo。

# java - ExecutorService 适用于海量短期任务

> ID：12649024
> 
> 赞同：4
> 
> 时间：2012-09-29T01:00:38.950
> 
> 标签：java, multithreading, performance, concurrency, threadpool

是否有适合大量非常短暂的任务的 ExecutorService？我设想在切换到同步等待之前在内部尝试忙等待的东西。保持任务的顺序并不重要，但应该可以强制执行内存一致性（所有任务都*发生在*主线程重新获得控制权之前）。

下面发布的测试包含 100'000 个任务，每个任务`double`连续生成 100 秒。它接受线程池的大小作为命令行参数，并始终测试串行版本与并行版本。（如果没有给出命令行参数，则只测试串行版本。）并行版本使用固定大小的线程池，任务分配甚至不是时间测量的一部分。尽管如此，并行版本*永远不会*比串行版本快，我已经尝试了多达 80 个线程（在具有 40 个超线程内核的机器上）。为什么？

```
import java.util.ArrayList;
import java.util.Random;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class ExecutorPerfTest {
    public static final int TASKS = 100000;
    public static final int SUBTASKS = 100;

    static final ThreadLocal<Random> R = new ThreadLocal<Random>() {
        @Override
        protected synchronized Random initialValue() {
            return new Random();
        }
    };

    public class SeqTest implements Runnable {
        @Override
        public void run() {
            Random r = R.get();
            for (int i = 0; i < TASKS; i++)
                for (int j = 0; j < SUBTASKS; j++)
                    r.nextDouble();
        }
    }

    public class ExecutorTest implements Runnable {
        private final class RandomGenerating implements Callable<Double> {
            @Override
            public Double call() {
                double d = 0;
                Random r = R.get();
                for (int j = 0; j < SUBTASKS; j++)
                    d = r.nextDouble();
                return d;
            }
        }

        private final ExecutorService threadPool;
        private ArrayList<Callable<Double>> tasks = new ArrayList<Callable<Double>>(TASKS);

        public ExecutorTest(int nThreads) {
            threadPool = Executors.newFixedThreadPool(nThreads);
            for (int i = 0; i < TASKS; i++)
                tasks.add(new RandomGenerating());
        }

        public void run() {
            try {
                threadPool.invokeAll(tasks);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                threadPool.shutdown();
            }
        }
    }

    public static void main(String[] args) {
        ExecutorPerfTest executorPerfTest = new ExecutorPerfTest();
        if (args.length > 0)
            executorPerfTest.start(new String[]{});
        executorPerfTest.start(args);
    }

    private void start(String[] args) {
        final Runnable r;
        if (args.length == 0) {
            r = new SeqTest();
        }
        else {
            final int nThreads = Integer.parseInt(args[0]);
            r = new ExecutorTest(nThreads);
        }
        System.out.printf("Starting\n");
        long t = System.nanoTime();
        r.run();
        long dt = System.nanoTime() - t;
        System.out.printf("Time: %.6fms\n", 1e-6 * dt);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T18:25:56.263

调用`Executors.newFixedThreadPool(nThreads)`将创建`ThreadPoolExecutor`从 a 读取任务的 a `LinkedBlockingQueue`，即。执行器中的所有线程都将锁定在同一个队列上以检索下一个任务。

鉴于每个任务的大小非常小，并且您引用的线程/CPU 数量相对较多，您的程序很可能运行缓慢，因为将发生高度锁争用和上下文切换。

请注意，在尝试在线程放弃和阻塞之前获取锁时，已经`ReentrantLock`使用的实现在`LinkedBlockingQueue`短时间内旋转（最多大约 1us）。

如果您的用例允许，那么您可能想尝试使用 Disruptor 模式，请参阅[http://lmax-exchange.github.com/disruptor/](http://lmax-exchange.github.com/disruptor/)

# javascript - 该函数是作为方法分配还是已经执行？

> ID：12649028
> 
> 赞同：2
> 
> 时间：2012-09-29T01:01:51.503
> 
> 标签：javascript, jquery

来自 C++ 和 Java，我是 Javascript 的初学者。这个代码模式让我很困惑（在一个 jQuery 应用程序中找到）：

```
var opts = { drop : empty};

function drop(arg){
    opts.drop(arg);
    //do something
} 
```

我将如何阅读：`opts`创建对象并声明属性`drop`，但初始化为空。然后，定义函数（-object）`drop`。在第二行中， opts 对象的 drop-attribute 被称为方法。但是，在我的理解中，`opts.drop`是空的。所以它不应该是可调用的。

这里会发生什么？我是否遗漏了一些重要的代码，或者这是一种有意义的模式？

编辑：来源：[https ://github.com/weixiyen/jquery-filedrop/blob/master/jquery.filedrop.js](https://github.com/weixiyen/jquery-filedrop/blob/master/jquery.filedrop.js)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T01:05:12.733

`empty`可能是函数的名称，其实现方式如下：

```
function empty () {} 
```

如果它是`null`, `undefined`，一个字符串，一个对象，一个数组等......那么就有理由担心，因为那会很糟糕。

但我的直觉告诉我，如果你寻找它的定义，`empty === function () {}`

为了增加混淆， if`empty`被定义为一个赋值：

```
var empty = function () {}; 
```

该分配必须发生在它被引用的位置之上`opts`。

但是，如果它是一个声明：

```
function empty () {} 
```

该函数可以在任何地方声明，包括脚本的底部，因为函数声明在脚本中的任何其他内容之前编译。

***编辑***

快速检查一下，我`empty`在不同的范围内看到了一些不同的功能。有些正在从数组中删除回调（通过将数组设置为空），有些正在从父元素中删除 HTML 元素，有些正在检查元素是否有任何子元素。

当然，我正在查看此站点的缩小源代码，因此可能还有更多`empty`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T01:08:25.947

通过查看这个，我们可以得出结论，empty 不仅仅是一个变量

```
opts.drop(arg); 
```

这里 drop 实际上被传递了一个参数，所以，

**empty**是一个接受 1 个参数的函数。

所以`var opts = { drop : empty};` // 只不过

```
var opts = { drop : function(argument) {} }; 
```

# iphone - TWTweetComposeViewController 不允许编辑

> ID：12649036
> 
> 赞同：2
> 
> 时间：2012-09-29T01:03:11.577
> 
> 标签：iphone, ios

当我展示 TWTweetComposeViewController 时，我可以在窗口中滚动消息，但无法编辑文本。

这是我用来展示 TWTweetComposeViewController 的代码：

```
TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];
    [twitter addURL:article.articleURL];
    [twitter setInitialText:message];
    [viewController presentModalViewController:twitter animated:YES]; 
```

我在一个空项目中尝试了这个，它允许我很好地编辑推文。**我需要设置一个选项以允许推文可编辑吗？**

* * *

***编辑澄清：***

*   我想我已经把它缩小到我的项目中不允许任何 UITextViews 成为第一响应者
*   我在我的应用程序委托中创建了一个空的 UIViewController，并在那里展示了 twitter 控制器，但仍然无法编辑文本
*   我也尝试在那个空白控制器上添加一个 UITextView 并且发生了同样的事情
*   UITextFields 工作得很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:39:40.597

根据[Apple Docs](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html)，在用户查看推文后，您无法更改推文。

# ember.js - 在 Ember.js 中显式路由

> ID：12649040
> 
> 赞同：0
> 
> 时间：2012-09-29T01:03:46.960
> 
> 标签：ember.js

我是否能够从函数内部进行路由。例如，如果用户按下注销链接，我会在 accountController 中调用注销函数，我也希望这会导致显示主视图，因为如果用户在个人资料页面上，则需要返回到默认页面。

```
 App.accountController = Em.ArrayController,create({
     logout: ->
         #do stuff to logout the person
         ...

         App.Router ( NEED TO TRANSITION TO HOME )
 }) 
```

所以，我想从这里明确地调用我的路由器，让用户回到主视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T12:32:52.477

如果您从多个地方执行此操作，我建议在相互父路由上创建一个函数（我使用 root，因为所有内容都继承自它）并调用`send`路由器

```
App.Router = Ember.Router.extend({
   root: Ember.Route.extend({
     goToHome: Ember.Route.transitionTo("root.home")
     //// Rest of route
     home: Ember.Route.extend({
     //// 
```

在您的控制器中使用：

```
App.router.send("goToHome") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:47:46.833

然后只需将您的路由器转换到该状态即可。类似于： App.get('router').transitionTo('root');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T07:42:40.023

是的，你可以这样做。您可以通过 App.get('router') 获取路由器实例。

```
App.get('router').transitionTo('homeView') 
```

# webforms - Microsoft AJAX：无法获取未定义或空引用的属性“x”

> ID：12649044
> 
> 赞同：2
> 
> 时间：2012-09-29T01:05:03.147
> 
> 标签：webforms, sitefinity, microsoft-ajax, sitefinity-5

如何解决 Microsoft AJAX JavaScript 框架方法引发的以下错误？它是从 Web 表单应用程序（Sitefinity 5 CMS）中的自定义用户控件自动生成的 JavaScript 行

错误信息：

> 无法获取未定义或空引用的属性“FancyBlockDesigner”

这是引发错误的 JavaScript：

```
Sys.Application.add_init(function() {
    $create(SitefinityWebApp.Esd.TheLab.SampleHtmlEditor.FancyBlockDesigner, null, null, {"Editor":"propertyEditor_ctl00_ctl00_ctl00_ctl00_ctl00_Editor","propertyEditor":"propertyEditor"}, $get("propertyEditor_ctl00_ctl00_ctl00"));
}); 
```

与其讨论试图从我这里抽象出这些细节的 ascx 和 cs 文件，我想知道这个错误意味着什么。如果我理解细节，抽象可能更有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:46:30.773

ASP.NET Ajax 中的“$create”函数创建一个 JavaScript 类的实例。微软对如何使 JavaScript 面向对象有自己的看法，而且随着时间的推移，他们的方法并不完美。

无论如何，为了解释正在发生的事情，让我概述一下它是如何工作的。我们从实现[IScriptControl](http://msdn.microsoft.com/en-us/library/system.web.ui.iscriptcontrol.aspx)接口的服务器端控件开始，该接口需要两个成员：GetScriptDescriptors 和 GetScriptReferences。第二个非常简单——它允许您注册对您控制所需的所有 JavaScript 文件的引用。另一方面，GetScriptDescriptors 让您定义要使用的 JavaScript 类的所有实例，并允许您设置它们的属性 - 如果您愿意，可以初始化它们。

您粘贴的自动生成的 JavaScript 代码基本上是您在 GetScriptDescriptors 中定义的，您需要一个类型为“SitefinityWebApp.Esd.TheLab.SampleHtmlEditor.FancyBlockDesigner”的实例，您希望在其中初始化 Editor 属性。这段代码将寻找一个如下所示的 JavaScript 构造函数：

```
function SitefinityWebApp.Esd.TheLab.SampleHtmlEditor.FancyBlockDesigner(element) {

} 
```

很可能还定义了一个原型，例如：

```
SitefinityWebApp.Esd.TheLab.SampleHtmlEditor.FancyBlockDesigner.prototype = {

} 
```

现在，由于您发布的错误指出：“无法获取未定义或空引用的属性'FancyBlockDesigner'”，很可能是以下问题之一：

*   您没有包含包含我上面讨论过的类（构造函数 + 原型）的 JavaScript 文件
*   您忘记将“FancyBlockDesigner”添加到构造函数（似乎您确实有其他对象，可能是通过 MS Ajax 命名空间 - “SitefinityWebApp.Esd.TheLab”
*   您尚未注册“SampleHtmlEditor”命名空间。确保在 JS 文件的顶部有以下内容：`Type.registerNamespace("SitefinityWebApp.Esd.TheLab.SampleHtmlEditor");`

因此，长话短说，找不到名为“SitefinityWebApp.Esd.TheLab.SampleHtmlEditor.FancyBlockDesigner”的函数。

希望这会有所帮助，伊万

# angularjs - AngularJS 指令检查图像 URL 是否存在

> ID：12649046
> 
> 赞同：0
> 
> 时间：2012-09-29T01:05:33.497
> 
> 标签：angularjs

我正在尝试编写一个 AngularJS 指令来检查 URL 是否存在，如果存在，那么它将显示图像。否则它将不返回任何内容或空白标签。任何建议将不胜感激，这是我到目前为止的小提琴，似乎无法让它甚至读取传入的网址 [。http://jsfiddle.net/stevenng/dXeap/8/](http://jsfiddle.net/stevenng/dXeap/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:10:14.330

您只能对同一域中的图像执行此操作，否则会违反跨域策略。如果这仍然可以，那么应该可以通过使用 AJAX 执行 HEAD 请求并检查响应的 HTTP 状态（例如 404）。

我对您的代码进行了一些修复，以便它可以正常工作。[http://jsfiddle.net/LwpEP/1/](http://jsfiddle.net/LwpEP/1/) 看看你是如何从那个起点开始的，如果你遇到更多问题，请回到这里。

# android - 什么是'action android:name="com.android.vending.INSTALL_REFERRER"'？

> ID：12649048
> 
> 赞同：3
> 
> 时间：2012-09-29T01:06:09.503
> 
> 标签：android, referrer, receiver

我已经测试了 Appbrain SDK 和 Inmobi SDK。我找到了这个普通的接收器。我制作了定制接收器。我认为在谷歌市场下载应用程序时，谷歌市场会向我的应用程序发送“推荐人”价值。但我什么都没收到。什么问题？

```
//This is Appbrain's receiver
<receiver android:exported="true" android:name="com.appbrain.ReferrerReceiver" >
    <intent-filter>
        <action android:name="com.android.vending.INSTALL_REFERRER" />
    </intent-filter>
</receiver>

//This is Inmobi's receiver
<receiver android:name="com.inmobi.adtracker.androidsdk.IMAdTrackerInstallRefererReciever" android:exported="true"  >
   <intent-filter>
      <action android:name="com.android.vending.INSTALL_REFERRER" />
      <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
   </intent-filter>
</receiver>

//This is My Custom receiver
<receiver android:name="com.xgame.adproject2.TestReceiver" android:exported="true" >
    <intent-filter>
        <action android:name="com.android.vending.INSTALL_REFERRER" />
    </intent-filter>
</receiver>

// source
public class TestReceiver extends BroadcastReceiver{

    public static final String TAG = "TEST";

    String referrerString = "";

    @Override
    public final void onReceive(Context context, Intent intent) {

        Log.e(TAG, "11111111");

        if(intent.getAction().equals("com.android.vending.INSTALL_REFERRER")) {
           Bundle extras = intent.getExtras();
           referrerString = extras.getString("referrer");

           Log.e(TAG, "REFERRER: " + referrerString);
        }
    }
} 
```

关闭应用程序时，我在 android 网络浏览器中输入了这个 url。但下载应用程序后，我没有收到推荐人价值。

[https://play.google.com/store/apps/details?id=com.xgame.adproject2&referrer=utm_source%3Dcom.xgame.adproject2%26utm_medium%3Dgoogle%26utm_term%3Dbanner%26utm_campaign%3Dxgame](https://play.google.com/store/apps/details?id=com.xgame.adproject2&referrer=utm_source%3Dcom.xgame.adproject2%26utm_medium%3Dgoogle%26utm_term%3Dbanner%26utm_campaign%3Dxgame)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:25:47.453

需要注意的重要一点是，Android 市场/Google Play 只会将安装引荐来源网址发送到您在清单中定义的第一个接收者。所以在这种情况下，只有 AppLift 接收器会得到它。

如 JavaDoc 中所述，有一种方法可以从 AppLift 接收器“转发”事件：http: [//swisscodemonkeys.github.com/appbrain-sdk/javadoc/reference/com/appbrain/ReferrerReceiver.html](http://swisscodemonkeys.github.com/appbrain-sdk/javadoc/reference/com/appbrain/ReferrerReceiver.html)

在您的情况下，您的清单应如下所示：

```
//This is Appbrain's receiver
<receiver android:exported="true" android:name="com.appbrain.ReferrerReceiver" >
    <intent-filter>
        <action android:name="com.android.vending.INSTALL_REFERRER" />
    </intent-filter>
    <meta-data android:name="forward.inmobi" android:value="com.inmobi.adtracker.androidsdk.IMAdTrackerInstallRefererReciever" /> 
    <meta-data android:name="forward.custom" android:value="com.xgame.adproject2.TestReceiver" />
</receiver>

// Keep the execution of InMobi on connectivity change
<receiver android:name="com.inmobi.adtracker.androidsdk.IMAdTrackerInstallRefererReciever" android:exported="true" >
   <intent-filter>
      <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
   </intent-filter>
</receiver> 
```

请注意，Android 问题跟踪器上的一个可能值得关注的相关错误是：[http](http://code.google.com/p/android/issues/detail?id=24119) ://code.google.com/p/android/issues/detail?id=24119 （它是关于从有机应用程序发现中带回引荐来源网址字符串，如果他们解决了这个问题，希望他们也会在通过 Play 网站进行安装时添加引荐来源网址字符串）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T05:05:51.443

很久以前，Android 市场会向您传递一个引导您安装的市场页面的引荐来源字符串。在某些时候谷歌停止了这一点。您可以在[http://productforums.google.com/forum/#!topic/android-market/F5TO9uE3WSA上看到一个线程](http://productforums.google.com/forum/#!topic/android-market/F5TO9uE3WSA)

现在，只有在打开市场应用程序时明确将 is 传递给市场应用程序时，您才会获得引荐来源网址字符串。例如，如果应用 A 有一个安装应用 B 的按钮，您可以传递一个引荐来源字符串 market://details?id=B&referrer=A。它主要适用于想要衡量应用广告效果的广告网络

# groovy - 输入控件在 jasper 服务器中不可见，groovy 表达式可能是问题

> ID：12649050
> 
> 赞同：0
> 
> 时间：2012-09-29T01:06:42.617
> 
> 标签：groovy, jasper-reports, ireport, jasperserver

```
(
$P{cal}.clear() ||
$P{cal}.set(Calendar.YEAR, $P{year_current})||
$P{cal}.set(Calendar.WEEK_OF_YEAR, $P{week_current}) ||
$P{cal}.setFirstDayOfWeek(Calendar.MONDAY) ||
$P{cal}.setMinimalDaysInFirstWeek(4)
)
? null : $P{formatter}.format($P{cal}.getTime()) 
```

上面的代码根据“week_current”和“year_current”输入计算开始日期。问题是代码在 ireport 中计算 startDate 而不是在 jasper 服务器中计算。

当我在 jasper 服务器上运行报告时，显示模式（弹出窗口）出现空白，没有任何输入控件。

但是当我更改上面的代码以匹配您的日期计算之一时，相同的报告在 jasper 服务器上运行没有任何问题，即显示模式（弹出窗口）显示定义的输入控件。

如果您能让我知道我的日期计算表达式有什么问题，阻止输入控件出现在 jasper 服务器上，我将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-11-23T13:55:42.650

我找到了解决问题的方法，您需要将类`java.util.Calendar`作为参数传递：

[http://type-exit.org/adventures-with-open-source-bi/2010/06/date-calculation-in-ireport/](http://type-exit.org/adventures-with-open-source-bi/2010/06/date-calculation-in-ireport/)

# datetime - 在 Powershell 中创建其他时区的日期时间对象

> ID：12649055
> 
> 赞同：6
> 
> 时间：2012-09-29T01:07:01.220
> 
> 标签：datetime, powershell, timezone

基本上我正在尝试找到一种方法将特定时区的日期时间转换为其他时区，同时也考虑 DST。例如

***例如，“东京标准时间”的 2012 年 9 月 29 日上午 9:00，“中太平洋标准时间”的时间是几点？***

我在互联网上找到了一些将本地机器时间转换为其他时区的解决方案。

```
$ToTimeZoneObj = [system.timezoneinfo]::GetSystemTimeZones() | Where-Object {$_.id -eq $ToTimeZone}
$TargetZoneTime = [system.timezoneinfo]::ConvertTime($datetime, $ToTimeZoneObj) 
```

我在想如果我可以创建一个与本地机器不同的时区的日期时间对象，然后我可以使用我找到的解决方案，还是有其他方法来做我需要的？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-20T16:15:58.973

这个解决方案对我很有效：

```
$cstzone = [System.TimeZoneInfo]::FindSystemTimeZoneById("Central Standard Time")
$csttime = [System.TimeZoneInfo]::ConvertTimeFromUtc((Get-Date).ToUniversalTime(), $cstzone) 
```

然后，您可以像操作 datetime 对象一样操作 $csttime 变量：

```
Get-Date $csttime.AddHours(-1) -f "MM\dd\yyyy HH:mm:ss" 
```

参考资料： http: [//msdn.microsoft.com/en-us/library/system.timezoneinfo.converttimefromutc (v=vs.110](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttimefromutc(v=vs.110).aspx) [).aspx http://technet.microsoft.com/en-us/library/ee692801。 aspx](http://technet.microsoft.com/en-us/library/ee692801.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T01:18:03.527

使用 TimeZones 可能会变得非常棘手。感谢上帝他们在 .NET 3.5 和 4.0 中添加的更新。我参与了几个时区项目，如果不迭代注册表并构建自己的时区列表，在 2.0 中几乎是不可能的。

现在，您可以使用 TimeZoneInfo 类（您似乎很熟悉）获取 TimeZone 列表：http: [//msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)

请注意，可能无法从 Windows Update 自动更新的系统可能与完全最新的系统具有不同的时区。Microsoft 会在需要时推出时区更新。

我认为您的代码似乎还可以。老实说，我不是 PowerShell 开发人员（对我来说是 C#），但它看起来不错。

# c++ - winapi destroyWindow() 立即退出我的程序

> ID：12649056
> 
> 赞同：1
> 
> 时间：2012-09-29T01:07:27.397
> 
> 标签：c++, visual-studio-2010, winapi

好的，我可以理解该函数是否会返回错误或抛出异常，但由于某种原因，我对 DestroyWindow 的调用实际上会在此时退出程序。就像实际的 exit() 函数改变了我的程序流程一样。文档没有提到这样的事情，我无法弄清楚发生了什么，因为我没有收到错误代码。有没有人遇到过这样的事情？

与使用 winapi 相比，我对这个对象所做的更多，所以忽略它的其余部分。这里还有什么问题？

SYNC_WinSystem.h

```
#ifndef SYNC_WINSYSTEM_H
#define SYNC_WINSYSTEM_H

#include "SYNC_ISystem.h"

#include <Windows.h>
#include <array>
#include "SYNC_Winput.h"
#include "SYNC_IRenderer.h"
#include "SYNC_D3D11Renderer.h"

#define FULL_SCREEN true

// SYNC_WinSystem
class SYNC_WinSystem : public SYNC_ISystem
{   
public:
    class WindowsContext;

    SYNC_WinSystem();

    virtual long Initialize(InitializeContext *);
    virtual void Init_Loop();
    virtual void Shutdown();

    virtual long MakeDirectory(std::string);
    virtual bool CreateSkin(std::string, std::string, SYNC::ISkin *&);
    virtual ISound * CreateSound();

    LRESULT CALLBACK MessageHandler(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam);

private:
    virtual long InitializeWindows();
    virtual bool Frame();
    virtual void ShutdownWindows();

private:
    SYNC_Winput m_Input;

private:
    std::shared_ptr<SYNC_IRenderer> m_Graphics;
    HINSTANCE m_hinstance;
    HWND m_hwnd;
    int m_screenWidth;
    int m_screenHeight;
    std::string m_WindowName;
};

// SYNC_WinSystem::WindowsContext
class SYNC_WinSystem::WindowsContext : public SYNC_ISystem::InitializeContext
{
public:
    WindowsContext();
    std::string Type();

    HINSTANCE m_hinstance;
    std::string m_WindowName;

private:
    const static std::string m_Identifier;
};

#endif 
```

SYNC_WinSystem.cpp

```
#include "SYNC_WinSystem.h"

// SYNC_WinSystem definitions
SYNC_WinSystem * g_windows;

LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam);

SYNC_WinSystem::SYNC_WinSystem()
    : m_Graphics(new SYNC_D3D11Renderer)
{
    m_hinstance = nullptr;
    m_hwnd = nullptr;
    m_screenWidth = 0;
    m_screenHeight = 0;
}

long SYNC_WinSystem::Initialize(InitializeContext  * context)
{
    long result = 0;
    char errors[256];
    WindowsContext * cContext;
    if(context->Type() == "WindowsContext")
        cContext = static_cast<WindowsContext *>(context);
    else
        return false;

    m_hinstance = cContext->m_hinstance;
    m_WindowName = cContext->m_WindowName;
    g_windows = this;

    result = InitializeWindows();
    if(result)
    {
        sprintf_s(errors, "The Window could not initialize. Windows error code: %i", result);
        MessageBox(NULL, errors, "Error!", MB_OK); 
        return result;
    }

    std::array<std::string, 3> folderNames=
    {{
        "Compiled_Models",
        "Temp_Models",
        "Materials"
    }};

    for(int i = 0; i < (int) folderNames.size(); i++)
    {
        result = MakeDirectory(folderNames[i]);
        if( result && (result != ERROR_ALREADY_EXISTS))
        {
            sprintf_s(errors, "Error creating directory \" %s \" for system. Windows error code: %i", folderNames[i].c_str(), result);
            MessageBox(NULL, errors, "Error!", MB_OK);
            return result;
        }
        result = 0;
    }

    SYNC_D3D11Renderer::D3D11Context graphicsContext;
    graphicsContext.fullscreen = true;
    graphicsContext.hwnd = m_hwnd;
    graphicsContext.screenDepth = 1000.0f;
    graphicsContext.screenNear = 0.1f;
    graphicsContext.screenWidth = m_screenWidth;
    graphicsContext.screenHeight = m_screenHeight;

    if(!m_Graphics->Initialize(&graphicsContext))
        return false;

    return result;
}

void SYNC_WinSystem::Init_Loop()
{

    MSG msg;
    bool done, result;

    ZeroMemory(&msg, sizeof(MSG));
    done = false;

    while(!done)
    {
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }

        if(m_Input.IsKeyPressed(VK_ESCAPE))
        {

            done = true;
        }
        else
        {
            result = Frame();
            if(!result)
            {
                done = true;
            }
        }

    }
}

void SYNC_WinSystem::Shutdown()
{
    ShutdownWindows();
}

long SYNC_WinSystem::MakeDirectory(std::string dirName)
{
    DWORD result = 0;
    long returnValue = 0;

    dirName.insert(0, ".\\");
    result = CreateDirectory(dirName.c_str(), NULL);

    if(result == 0)
    {
        returnValue = GetLastError();
    }
    return returnValue;
}

bool SYNC_WinSystem::Frame()
{

    if(!m_Graphics->Frame())
        return false;

    return true;
}

long SYNC_WinSystem::InitializeWindows()
{
    DWORD result = 0;
    WNDCLASSEX wc;
    DEVMODE dmScreenSettings;
    int posX, posY;

    wc.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;
    wc.lpfnWndProc = &WndProc;
    wc.cbClsExtra = 0;
    wc.cbWndExtra = 0;
    wc.hInstance = m_hinstance;
    wc.hIcon = LoadIcon(NULL, IDI_WINLOGO);
    wc.hIconSm = wc.hIcon;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH) GetStockObject(BLACK_BRUSH);
    wc.lpszMenuName = NULL;
    wc.lpszClassName = m_WindowName.c_str();
    wc.cbSize = sizeof(WNDCLASSEX);

    if(RegisterClassEx(&wc) == 0)
    {
        result = GetLastError();
        return result;
    } 

    m_screenWidth = GetSystemMetrics(SM_CXSCREEN);
    m_screenHeight = GetSystemMetrics(SM_CYSCREEN);

    if(FULL_SCREEN)
    {
        memset(&dmScreenSettings, 0, sizeof(dmScreenSettings));
        dmScreenSettings.dmSize = sizeof(dmScreenSettings);
        dmScreenSettings.dmPelsWidth = (unsigned long) m_screenWidth;
        dmScreenSettings.dmPelsHeight = (unsigned long) m_screenHeight;
        dmScreenSettings.dmBitsPerPel = 32;
        dmScreenSettings.dmFields = DM_BITSPERPEL | DM_PELSWIDTH | DM_PELSHEIGHT;

        ChangeDisplaySettings(&dmScreenSettings, CDS_FULLSCREEN);
        posX = posY = 0;

        m_hwnd = CreateWindowEx(WS_EX_APPWINDOW, 
                             m_WindowName.c_str(), 
                             m_WindowName.c_str(),
                             WS_CLIPSIBLINGS | WS_CLIPCHILDREN | WS_POPUP,
                             posX, posY, m_screenWidth, m_screenHeight,
                             NULL, NULL, m_hinstance, NULL);

    }
    else
    {
        m_screenWidth = 800;
        m_screenHeight = 600;

        posX = ((GetSystemMetrics(SM_CXSCREEN)/2) - (m_screenWidth/2));
        posY = ((GetSystemMetrics(SM_CYSCREEN)/2) - (m_screenHeight/2));

        m_hwnd = CreateWindowEx(WS_EX_APPWINDOW, 
                             m_WindowName.c_str(), 
                             m_WindowName.c_str(),
                             WS_OVERLAPPEDWINDOW | WS_CLIPSIBLINGS | WS_CLIPCHILDREN | WS_POPUP,
                             posX, posY, m_screenWidth, m_screenHeight,
                             NULL, NULL, m_hinstance, NULL);
    }

    if(!m_hwnd)
    {
        result = GetLastError();
        return result;
    }

    ShowWindow(m_hwnd, SW_SHOW);
    SetForegroundWindow(m_hwnd);
    SetFocus(m_hwnd);

    return result;
}

void SYNC_WinSystem::ShutdownWindows()
{
    ShowCursor(true);

    if(FULL_SCREEN)
    {
        ChangeDisplaySettings(NULL, 0);
    }

    if(DestroyWindow(m_hwnd) == 0)
    {
        char meh[256];
        sprintf(meh, "error: %i" , GetLastError());
        MessageBox(NULL, meh, "error!", MB_OK);
    }

    m_hwnd = NULL;

    UnregisterClass(m_WindowName.c_str(), m_hinstance);
    m_hinstance = NULL;

    g_windows = NULL;

    return;
}

LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
{
    switch(msg)
    {
        case WM_DESTROY:
        {

            PostQuitMessage(0);
            return 0;
        }
        case WM_CLOSE:
        {
            PostQuitMessage(0);
            return 0;
        }
        default:
        {
            return g_windows->MessageHandler(hwnd, msg, wparam, lparam);
        }
    }
}

LRESULT CALLBACK SYNC_WinSystem::MessageHandler(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
{

    switch(msg)
    {
        case WM_KEYDOWN:
        {
            m_Input.KeyDown((unsigned int) wparam);
            return 0;
        }
        case WM_KEYUP:
        {
            m_Input.KeyDown((unsigned int) wparam);
            return 0;
        }
        default:
        {
            return DefWindowProc(hwnd, msg, wparam, lparam);
        }
    }

}

ISound * SYNC_WinSystem::CreateSound()
{
    return nullptr;
}

bool SYNC_WinSystem::CreateSkin(std::string filename, std::string shaderName, SYNC::ISkin *& skin)
{
    if(!m_Graphics->CreateSkin(filename, shaderName, skin))
        return false;

    return true;
}

// SYNC_WinSystem::WindowsContext definitions
const std::string SYNC_WinSystem::WindowsContext::m_Identifier = "WindowsContext";

SYNC_WinSystem::WindowsContext::WindowsContext()
{

}

std::string SYNC_WinSystem::WindowsContext::Type()
{
    return m_Identifier;
} 
```

快速解释我如何做到这一点。窗口句柄和实例在对象中具有私有成员，在 Initialize() 和 InitializeWindows() 函数期间，会创建窗口类和窗口本身。windows 过程在下面定义为全局函数，因为您不能将成员函数用作 windows 过程。我通过在顶部创建一个全局指针（gasp）并将其分配给系统的 this 指针来避开这个问题，这允许该过程调用成员函数过程。仍然只允许一个系统实例，但这就是我所需要的:。任何人，在关机期间，都会调用 ShutdownWindows()，然后调用 DestroyWindow。正是在此调用期间，我的程序才结束，没有错误，也没有异常。MSVC++ express 告诉我它返回错误代码 3，但就 Windows 错误代码而言，那是 s 只是一个 ERROR_PATH_NOT_FIND 在这种情况下没有意义。有人有线索吗？

主文件

```
#include <memory>
#include <Windows.h>

#include "Syncopate.h"
#include "SYNC_WinSystem.h"
using namespace std;

#include "SYNC_Winput.h"

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,PSTR lpCmdLine, INT nCmdShow)
{
    //create a new instance of the engine
    std::shared_ptr<SYNC_WinSystem> system( new SYNC_WinSystem);

    // create an init context for this specific derivative of SYNC_ISystem
    SYNC_WinSystem::WindowsContext context;
    context.m_hinstance = hInstance;
    context.m_WindowName = "Syncopate";

    // Initialize the system object. if something goes wrong, return ERROR
    if(system->Initialize(&context))
        return 1;

    SYNC::ISkin * model;

    if(!system->CreateSkin("data.txt", "ColorShader", model))
        return 1;

    system->Init_Loop();

    system->Shutdown();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T01:21:02.347

似乎正在发生的事情是您处理`WM_DESTROY`消息并显式调用`PostQuitMessage`. 我怀疑某处`WM_QUIT`消息正在被处理并导致某种退出。我会看看我是否能找到任何进一步的信息，但这是我目前的理解。

## 经验法则：

当您收到`WM_CLOSE`消息时，请致电`DestroyWindow`。当您收到`WM_DESTROY`消息时，请致电`PostQuitMessage`。因为您正在使用`PeekMessage`，所以您将获得消息的消息结构`WM_QUIT`。当您找到此消息时，您应该结束循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:06:49.630

您的消息循环中没有任何内容会注意到 a`WM_QUIT`并中止。消息循环的“标准”做法是调用`GetMessage()`直到它失败，这表明`WM_QUIT`，但你调用`PeekMessage()`的是根本没有处理的`WM_QUIT`。您的消息循环仅在 done 为真时退出，这只会在按下转义或您的`Frame()`呼叫失败时发生。

正如您所发现的，解决方案是重新设计循环以正确处理`WM_QUIT`消息，并且在循环结束后不调用 DestroyWindow。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T01:14:46.640

IIRC 退出代码 3 是您通过调用`abort`.

反正，

```
 case WM_CLOSE:
    {
        PostQuitMessage(0);
        return 0;
    } 
```

非常不好（它会终止您的消息循环），并且很可能是您的问题的原因。

只需删除它。

* * *

更新：由于上述建议没有改善，我怀疑您正在调用`DestroyWindow`一个已经被破坏的窗口。

作为一项规则，您应该只调用`DestroyWindow`响应`WM_CLOSE`。对于一般窗口，这是默认处理。所提供的代码（正如我正在写的那样）中没有任何迹象表明您的“关闭”代码是如何被调用的，但是由于相同的处理，`WM_CLOSE`我`WM_DESTROY`怀疑它是在消息循环之后放置的调用。

在这种情况下，您确实很可能正在调用`DestroyWindow`一个已经被破坏的窗口。

# jquery - 使用 Jquery 选项卡通过 ajax 传递变量

> ID：12649062
> 
> 赞同：2
> 
> 时间：2012-09-29T01:08:33.923
> 
> 标签：jquery, jquery-ui, jquery-tabs

我遇到了一个问题，我已经坚持了好几天了，我似乎无法弄清楚。我正在尝试使用 Jquery Tabs 通过 AJAX 传递变量。

这是我的使用场景：用户使用 JQuery 选项卡加载页面，默认只是一些文本。在页面上，我有一个包含用户 ID 的会话变量。当他们单击第二个选项卡时，它将该用户 ID 变量传递给脚本。我不能让它通过！

```
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui-1.8.23.custom.min.js"></script>
<link rel="stylesheet" href="js/css/smoothness/jquery-ui-1.8.23.custom.css" />
<script>
var postData = {};
$("#tabs").tabs({
select: function(event, ui) {
    postData = {
        userid: parseInt($(ui.tab).data('userid'));
    };
},
ajaxOptions: {
    type: 'POST',
    data: postData,
    error: function(xhr, status, index, anchor) {
        $(anchor.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible. " + "If this wouldn't be a demo.");
    }
}
});
</script>

<div id="tabs">
<ul>
    <li><a href="#tabs-1">Intro</a></li>
    <li><a href="Custom/div_charts_test2.html" data-userid="1234">Department</a></li>
</ul>
<div id="tabs-1">
    <p>Text information goes here</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T02:08:47.300

我在 IE 和 Firefox 中都尝试了测试代码，它似乎工作得很好。

测试.html

```
 <html>
    <head>
            <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
            <title>jQuery UI Example Page</title>
            <link type="text/css" href="css/smoothness/jquery-ui-1.8.23.custom.css" rel="stylesheet" />
            <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
            <script type="text/javascript" src="js/jquery-ui-1.8.23.custom.min.js"></script>
    <script>
                var postData;
                var datavalue;
                $(function(){
                    $('#tabs').tabs(
                        {
                            select: function(event, ui) {
                                datavalue = parseInt($(ui.tab).data('userid')); 
                                postData = {
                                     userid:datavalue
                                };
                            },
                            ajaxOptions: {
                                type: 'POST',
                                data: postData,
                                dataType: 'html',
                                complete: function(xhr, status, index, anchor) {
                                    //alert(postData.userid);
                                },
                                error: function(xhr, status, index, anchor) {
                                    $(anchor.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible. " + "If this wouldn't be a demo.");
                                }
                            }
                        }
                    );
                });
    </script>
    </head>
    <body>
        <div id="tabs">
            <ul>
                <li><a href="#tabs-1">Intro</a></li>
                <li><a href="Department.html" data-userid="1234">Department</a></li>
            </ul>
            <div id="tabs-1">
                <p>Text information goes here</p>
            </div>
        </div>
    </body>
    </html> 
```

部门.html：

```
 This is my department page. 
```

我在前两行进行了更改（变量声明：修改了 postData 并添加了一个新变量来保存用户 ID 值）。修改了分配给“选择”的功能。这似乎有效，因为我能够通过 ajaxOptions 的“错误”功能中的警报来验证用户 ID。

希望这可以帮助。如果没有，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:59:46.623

更改您的选择功能以设置 ajaxOptions。

```
select:function(event, ui) {
    $("#tabs").tabs("option", "ajaxOptions",{
        type: 'POST',
        data: {userId:$(ui.tab).data('userid')},
        error: function(xhr, status, index, anchor) {
            $(anchor.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible. " + "If this wouldn't be a demo.");
        }
    })
}, 
```

当您最初定义 ajaxOptions 时，它会将此值用于任何后续请求。但由于某种原因，它没有得到当前值。我什至尝试仅更改 select 上的 userId 并无法修改它。他们可能正在克隆价值，我不确定。无论如何，如果您在请求之前设置 ajaxOptions，它将发送您想要的内容。

对不起，半生不熟的答案，但我不能放手。+1关于这个问题。我不得不做一些研究来弄清楚为什么它不起作用。

注意：您可能已经知道这一点，但您必须在服务器上运行才能进行 POST。POST 到本地文件系统会产生错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-29T19:46:54.820

```
$( "#tabs" ).tabs({
        beforeLoad: function (event, ui) {

            ui.jqXHR.fail(function() {
                ui.panel.html(
                "Couldn't load this tab. We'll try to fix this as soon as possible."
                    );
            });

            var tabID = ui.tab[0].id;

            if (tabID == "tab1") {
                ui.ajaxSettings.url = 'ControllerName/Action/' + $('#drpDwnVal').val();
            }

            if (tabID == "tab2") {
                ui.ajaxSettings.url = 'ControllerName2/Action2/' + $('#drpDwnVal').val();
            }

        }
    }); 
```

# php - Facebook 点赞数自动刷新

> ID：12649063
> 
> 赞同：1
> 
> 时间：2012-09-29T01:08:59.587
> 
> 标签：php, facebook, json, api

我是使用 Facebook API 的新手，我有一个我认为应该很简单的问题。

我正在为将显示网页的商店设置电视屏幕。在页面上，我将显示商店 Facebook 页面的当前“点赞数”。我知道如何设置它以显示喜欢，但是有没有一种简单的方法可以在新人喜欢页面而不刷新整个页面时自动刷新数字。我想我正在寻找它是动态生成的。我不知道该怎么做。我愿意做研究，我只需要指出正确的方向。

到目前为止，这是页面正文中的代码：

```
<?php
function fan_count($fan_ID) {
$info = json_decode(file_get_contents('http://graph.facebook.com/' . $fan_ID));
echo $info->likes;
}

function fan_name($fan_ID) {
$info = json_decode(file_get_contents('http://graph.facebook.com/' . $fan_ID));
echo $info->name;
}
?>

<div style="width:100px; height:100px; border:1px solid black;">
    Facebook Logo
</div>
<div class="fb_stats" id="fb_name">
    <?php fan_name(PAGE_ID)?>
</div>
<div class="fb_stats" id="fb_likes">
    <?php fan_count(PAGE_ID)?>
</div> 
```

感谢您的任何帮助，您可以提供！

## 编辑

好的，这是我根据以下答案更新的代码。我无法让主页上的 PHP 工作（一旦我正确设置了这个位，我会担心重新加载）。为了简单起见，我只是想抓住点赞数，然后我会从那里开始构建。这是我的代码（我以“可口可乐”为例；虚荣 URL 与 Facebook 图表兼容）：

```
<?php
class fanpage {
public $fan_ID;
public $info;

function __construct($fan_ID) {
    $this->fan_ID = $fan_ID;
    $this->info = json_decode(file_get_contents('http://graph.facebook.com/' . $fan_ID));
  }

function fan_count() {
   echo $info->likes;
  }
}

$fp = new fanpage(cocacola);
?>

<div style="width:100px; height:100px; border:1px solid black;">
    Facebook Logo
</div>
<div class="fb_stats" id="fb_likes">
    <?php $fp->fan_count()?>
    <span style="font-size:20px; position:absolute; top:400px;">Total Likes</span>
</div> 
```

它可能与 $info 在一个函数中定义并试图在另一个函数中调用有关吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T04:38:18.203

**刚刚更新了下面的一些代码！**

* * *

**`fanpage.php`**

```
class fanpage {
  public $fan_ID;
  public $info;

  function __construct($fan_ID = null) {
    $this->fan_ID = $fan_ID;
    $this->info = json_decode(file_get_contents('http://graph.facebook.com/' . $fan_ID));
  }

  function fan_count() {
    return $info->likes;
  }

  function fan_name() {
    return $info->name;
  }
} 
```

**`page.php`**

```
<?php
include('fanpage.php');
$fp = new fanpage(PAGE_ID);
?>

<div style="width:100px; height:100px; border:1px solid black;">
    Facebook Logo
</div>
<div class="fb_stats" id="fb_name">
    <?php echo $fp->fan_name()?>
</div>
<div class="fb_stats" id="fb_likes">
    <?php echo $fp->fan_count()?>
</div>

<script type="text/javascript>
var delay = 10000; //10000 = 10 seconds
var fbint = window.setInterval(checkFacebook, delay);

function checkFacebook(){
  $.getJSON('checkFacebook.php?callback=?', {fan_ID: '$fan_ID'}, function(rs){
    if (rs.name) $('#fb_name').text(rs.name);
    if (rs.likes) $('#fb_likes').text(rs.likes);
  });
}
</script> 
```

**`checkFacebook.php`**

```
include('fanpage.php');

$fan_ID = (int) $_GET['fan_ID'];
$fp = new fanpage($fan_ID);

$data = (object) array('likes' => $fb->likes, 'name' => $fb->name); //sloppy object
$callback = $_GET['callback']; //sanitize this

print $callback . '(' . json_encode($data) . ')';
exit; 
```

* * *

**下面老东西**

* * *

你熟悉很多 JavaScript 或 jQuery 吗？这是一个简短的 jQuery 示例，应该可以正常工作。

假设上面的片段来自`page.php`. 包括 jQuery 并在其下方添加：

```
<script type="text/javascript>
var delay = 10000; //10000 = 10 seconds
var fbint = window.setInterval(checkFacebook, delay);

function checkFacebook(){
  $.getJSON('checkFacebook.php?callback=?', function(rs){
    if (rs.name) $('#fb_name').text(rs.name);
    if (rs.likes) $('#fb_likes').text(rs.likes);
  });
}
</script> 
```

`checkFacebook.php`这每 10 秒检查一次。如果它得到一个`name`or`likes`属性，它将自动更新它们。现在我们需要实际构建`checkFacebook.php`页面！

```
//do all your normal config stuff here
$info = json_decode(file_get_contents('http://graph.facebook.com/' . $fan_ID));

$data = (object) array('likes' => $info->likes, 'name' => $info->name); //sloppy object
$callback = $_GET['callback']; //sanitize this

print $callback . '(' . json_encode($data) . ')';
exit; 
```

还有一件事！您在顶部的功能工作正常，但您通过发送完全相同的请求两次浪费了大量时间。您可以从同一个地方提取两条信息，那么为什么不这样做呢？

```
<?php
class fanpage {
  public $fan_ID;
  public $info;

  function __construct($fan_ID = null) {
    $this->fan_ID = $fan_ID;
    $this->info = json_decode(file_get_contents('http://graph.facebook.com/' . $fan_ID));
  }

  function fan_count() {
    return $info->likes;
  }

  function fan_name() {
    return $info->name;
  }
}

$fp = new fanpage(PAGE_ID);
?>

<div style="width:100px; height:100px; border:1px solid black;">
    Facebook Logo
</div>
<div class="fb_stats" id="fb_name">
    <?php echo $fp->fan_name()?>
</div>
<div class="fb_stats" id="fb_likes">
    <?php echo $fp->fan_count()?>
</div> 
```

这样，您的服务器就不必两次调用 Facebook 来请求相同的信息 :)

# matlab - 从字符串而不是文件中读取？

> ID：12649069
> 
> 赞同：0
> 
> 时间：2012-09-29T01:10:05.067
> 
> 标签：matlab, image-processing

是否可以从 MATLAB 中的字符串而不是文件中读取编码的图像内容？

像这样的东西：

```
data_string = '����JFIF``���C......'    
imread(data_string); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:42:17.320

作为解决方法，将字符串写入文件：

```
 fid = fopen('temp.jpg','wt');
 fprintf(fid, data_string);
 fclose(fid); 
```

然后阅读：

```
 im = imread('temp.jpg'); 
```

# executable - 在记事本中编辑 .exe

> ID：12649072
> 
> 赞同：0
> 
> 时间：2012-09-29T01:11:36.873
> 
> 标签：executable, notepad

当我在记事本中查看 .exe 文件时，例如 C:\WINDOWS\system32\attrib.exe 我在查看属性时看到 Attribute Utility 行，File description 的值是 Attribute Utility，但是当我在记事本中编辑它时它会变成它进入 .COM 文件属性菜单而不是 .exe。我在 edit.exe 中试过这个，但它只是没有显示文件描述。我的目标是编辑文件描述，这样它就可以说明任何事情，即使是一个字符的改变也可以（这是一个学习测试）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:54:53.117

你不能！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！ ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！

# drupal - 如何将背景音乐添加到 Drupal 7

> ID：12649073
> 
> 赞同：-3
> 
> 时间：2012-09-29T01:11:36.193
> 
> 标签：drupal, background, drupal-7, background-music

我有一个 Drupal 7 网站。我想添加带有静音/取消静音选项的背景音乐。这是一个公司网站，所以我不想放这么大的东西或播放列表等...只是想添加柔和的背景音乐，它会自动播放，当点击另一个页面时它不应该停止或重新启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:45:24.397

有关通过 ajax 或带有播放器的弹出窗口执行此操作的一些建议，请参阅[drupal.stackexchange 上的此问题。](https://drupal.stackexchange.com/questions/15488/how-can-i-add-background-music-to-an-existing-drupal-7-website)网站上的背景音乐被广泛认为是非常糟糕的设计，但如果你必须这样做，它看起来是可能的。

# php - 用户登录和管理集成到单页站点

> ID：12649077
> 
> 赞同：0
> 
> 时间：2012-09-29T01:12:15.190
> 
> 标签：php, jquery, html, database, user-registration

所以我终于完成了我的网站的设计和构建，它是一个单页（Front.php），它显示所有菜单选项，包括用户可以注册的地方，然后信息被存储到数据库中。我现在需要了解和实施的是用户帐户的想法。我不明白我应该如何进行登录和帐户管理。我知道他们可以登录，我可以在数据库中搜索他们的用户名，如果匹配，他们就可以登录。但是 Front.php 应该在哪里处理呢？或者我应该有另一个名为 Login.php 的文件，但是如果登录成功，它是否会重定向回 Front.php？

我真的有点迷失了基本的文件结构。有人可以解释我应该怎么做吗？

我的页面是 95% jquery/html，php 只做插入数据库功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:01:25.730

你需要使用 php。通常，我创建一个functions.php 文件来存储我的所有函数，然后将它包含在每个页面的开头。在我的函数文件中，我总是放一个函数来检查登录是否存在。这是逐字记录：

```
function checkLogin($data) {
    global $con;
    extract($data);
    $sql = "SELECT * FROM users WHERE username='$username' AND password='$password'";
    $result = mysql_query($sql, $con) or exit('Eror selecting users database: '.mysql_error());
    $num_rows = mysql_num_rows($result);
    if ($num_rows==0) {
        return false;
    }
    else {
        return true;
    }
} 
```

`$con`是我存储的一个全局变量，它创建 MySQL 连接。看起来像：

```
$con = mysql_connect($host, $user, $pass); 
```

这样我只需要定义一次。然后在 front.php 上将表单提交给自身（front.php）并执行以下操作：

```
if (isset($_POST['submit']) && isset($_POST['loginForm'])) {
    if (!checkLogin($_POST)) {
        $valid = false;
    }
    else {
        Header('Location: dashboard.php');
    }
} 
```

我将此代码放在一个名为 session.php 的文件中，并将其包含在每个页面的开头。所以在这种情况下，你的 front.php 文件的顶部看起来像：

```
<?php
  include('session.php');include('functions.php'); 
```

我将它们分开的原因是因为您不需要检查函数所在的每个页面上的登录。在这个例子中，我将登录表单操作设置为`loginForm`，如果成功，我会将它们重定向到dashboard.php . 您可能应该在 else 语句中添加一些内容，将他们的会话存储为 cookie，这样他们就不必在每次关闭选项卡或退出浏览器时都重新登录。

# angularjs - 在给定父范围的情况下获取 Angularjs 中的所有子范围

> ID：12649080
> 
> 赞同：24
> 
> 时间：2012-09-29T01:12:20.673
> 
> 标签：angularjs, angularjs-scope, parent-child, enumeration

我想知道如何获取给定父范围的所有子范围的列表。我可以从范围的属性中找到 $$childHead、$$childTail、$$nextSibling 和 $$prevSibling。

我现在使用的方法是从父级获取 childHead，然后使用 nextSibling 获取下一个子级，直到 nextSibling 为空。

有更好的方法吗？鉴于我想对所有孩子调用一个方法 [getModel]，还有更好的方法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-18T14:35:03.697

所有 Angular 范围都附加到 DOM 元素，您可以从使用当前元素检查子元素开始，直到您想要访问的任何子元素。到达那里后，使用以下函数获取范围。

```
angular.element('#5th_element').scope(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-22T20:05:47.427

> 子指令使用隔离作用域，并且在这种情况下具有自己的值，这些值对父级不可见。我想从父范围访问这些值。

处理“需要访问子作用域的父作用域”问题的“角度方式”是将模型向上移动到父作用域，并让子作用域引用父属性/数据（而不是子作用域有自己的本地属性/副本）。例如，如果每次迭代都包含一个输入表单元素（即每次迭代需要双向数据绑定），这就是我们处理 ng-repeat 的方式：[ng-model、ng-repeat 和输入的困难](https://stackoverflow.com/questions/13714884/difficulty-with-ng-model-ng-repeat-and-inputs)

使用指令，首先在父作用域中定义一个对象数组，然后让每个独立的子作用域使用“=”表示法（即双向数据绑定表示法）访问该父作用域数组（或单个对象）。因为一个对象是被共享的，独立的作用域将引用父对象（它们不会得到一个本地副本）。现在，您对子范围属性所做的任何更改实际上都在更改父范围属性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-24T23:16:00.580

在 AngularJS 1.3.2 中，`countChildScopes`向 ngMock 模块添加了一个方法：

```
/**
* @ngdoc 方法
* @name $rootScope.Scope#$countChildScopes
* @module ngMock
* @描述
* 计算当前作用域的所有直接和间接子作用域。
*
* 当前范围不包括在内。该计数包括所有隔离子范围。
*
* @returns {number} 子作用域的总数。
*/
函数 countChildScopes(范围)
  {
  // jshint 有效this: true
  变量计数 = 0; // 排除当前范围
  var root = 范围 || angular.element(document).injector().get('$rootScope');
  var pendingChildHeads = [root.$$childHead];
  变量当前范围；

  while (pendingChildHeads.length)
    {
    currentScope = pendingChildHeads.shift();

    而（当前范围）
      {
      计数 += 1;
      pendingChildHeads.push(currentScope.$$childHead);
      currentScope = currentScope.$$nextSibling;
      }
    }

  返回计数；
  }

```

使用对象作为返回值来获取 ID：

```
函数枚举ChildScopes（范围）
  {
  // jshint 有效this: true
  变量枚举 = {}; // 排除当前范围
  var root = 范围 || angular.element(document).injector().get('$rootScope');
  var pendingChildHeads = [root.$$childHead];
  变量当前范围；

  while (pendingChildHeads.length)
    {
    currentScope = pendingChildHeads.shift();

    而（当前范围）
      {
      枚举[“范围”+pendingChildHeads.length] = currentScope.$id;
      pendingChildHeads.push(currentScope.$$childHead);
      currentScope = currentScope.$$nextSibling;
      }
    }

  返回枚举；
  }

```

**参考**

*   [AngularJS 更新日志：1.3.2](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#132-cardiovasculatory-magnification-2014-11-07)

*   [ngMock: $rootScope.Scope.$countChildScopes](https://docs.angularjs.org/api/ngMock/type/$rootScope.Scope)

# ios - 如何减少覆盖在 GL 视图上的 UIKit 元素的渲染开销？

> ID：12649081
> 
> 赞同：0
> 
> 时间：2012-09-29T01:12:53.153
> 
> 标签：ios, opengl-es, uikit

我正在开发一个使用 GLKit 完成渲染的游戏。为了节省一些创建 UI 布局的工作，我使用 Interface Builder 和 UIKit 视图来管理某些界面元素的显示/隐藏和交互。

最近我进行了一些结构更改，导致在 GL 视图顶部包含我的按钮覆盖的两个全屏视图，这损害了某些较慢设备（例如 iPhone 4 和第 4 代 iPod Touch）上的渲染帧速率。我这样做是为了更容易使用现有的 IB/UIKit 架构一次显示/隐藏完整的控制布局。

老的：

```
|-Root (GLKView)
|  |-Buttons 
```

新的：

```
|-Root  (GLKView)
|  |-Layout 1
|  |  |-Buttons 1
|  |-Layout 2
|  |  |-Buttons 2
(Etc...) 
```

叠加层（布局 1、2、...、n）是完全透明的，包含一些子视图（按钮 1、2、...、n），屏幕边缘带有图像和文本。当视图是根视图的直接后代时，覆盖这几个按钮和事物的开销并没有那么糟糕，但是中间有一个额外的透明视图似乎增加了我的性能，因为我的帧率下降了很多。

我有哪些减少开销的选择？叠加层中没有动画或任何事情发生，所以我认为他们不应该重绘超过他们需要的内容，它可能只是额外的 alpha 混合全屏叠加层正在削弱我的表现。

我每帧都在我的所有 UIView 上设置`hidden`属性，而不检查它们是否已更改，这会导致视图被标记为需要重绘吗？

将所有这些按钮转换为 OpenGL 绘图是可能的，因为我没有使用 iOS 的原生控件，如 UIButtons 和 UISwitches（只是带有图像和标签的 UIViews），但如果可以的话，我想避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T01:23:23.980

成本来自 OpenGL 视图，而不是来自按钮；当它改变时，顶部的所有内容都需要重新组合。

那么就实际解决方案而言，放弃布局视图并改用`IBCollection`s 怎么样？您肯定希望仅在实际更改时将隐藏标志推送更改以避免数组迭代，但您将获得与以前相同的总体合成成本。

所以你会声明如下：

```
@property(retain) IBOutletCollection(UIView) NSArray *viewsInLayout1; 
```

然后，您可以在界面设计器中将其连接到任意数量的视图。随后在代码中，您将拥有`viewsInLayout1`可以迭代（或`makeObjectsPerformSelector:`在可能的情况下使用）的数组，以区分一组与另一组，而无需在整个地方对分组进行硬编码。

# r - R：映射稀疏矩阵中所有条目的方法

> ID：12649082
> 
> 赞同：2
> 
> 时间：2012-09-29T01:13:19.697
> 
> 标签：r, vectorization, sparse-matrix

我有一个从 R 的 Matrix 包创建的稀疏矩阵。我想遍历矩阵中的每个条目并执行操作，将结果保存在另一个稀疏矩阵中，该矩阵与原始矩阵具有相同的索引。

例如，假设我有稀疏矩阵 A：

```
1 . 1
2 . .
. . 4 
```

ColSums 看起来像：

```
3 . 5 
```

RowSums 看起来像：

```
2
2
4 
```

我想遍历 A 并执行此操作

```
(1,1) > 3*2
(2,1) > 2*3
(1,3) > 2*5
(3,3) > 4*5 
```

创建 B：

```
6 . 10
6 . .
. . 20 
```

我将如何以矢量化的方式执行此操作？

我认为函数 foo 看起来像：

```
B=fooMap(A,fun) 
```

有趣的是：

```
fun(row,col) = RowSums(row) * ColSums(col) 
```

什么是 fooMap？

编辑：

我选择了弗洛德尔的解决方案。它使用 summary 将稀疏矩阵转换为 i,j,x 数据帧，然后使用 with & friends 对该帧执行操作，然后将结果转换回稀疏矩阵。使用这种技术，with/within 运算符是 fooMap；只需首先将稀疏矩阵转换为 i,j,x 数据帧，以便可以使用 with/within。

这是解决此特定问题的单线。

```
B = with(summary(A), sparseMatrix(i=i, j=j, x = rowSums(A)[i] * colSums(A)[j])) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T10:54:17.110

每当我对稀疏矩阵进行元素操作时，我都会在矩阵本身及其`summary`表示之间来回切换：

```
summ.B <- summary(A)
summ.B <- within(summ.B, x <- rowSums(A)[i]*colSums(A)[j])
B <- sparseMatrix(i = summ.B$i, j = summ.B$j, x = summ.B$x)
B
# 3 x 3 sparse Matrix of class "dgCMatrix"
#            
# [1,] 6 . 10
# [2,] 6 .  .
# [3,] . . 20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T02:53:45.710

这是一种在每一步都使用稀疏矩阵的方法。

```
## Load library and create example sparse matrix
library(Matrix)
m <- sparseMatrix(i = c(1,2,1,3), j = c(1,1,3,3), x = c(1,2,1,4))

## Multiply each cell by its respective row and column sums.
Diagonal(x = rowSums(m)) %*% (1*(m!=0)) %*% Diagonal(x = colSums(m))
# 3 x 3 sparse Matrix of class "dgCMatrix"
#            
# [1,] 6 . 10
# [2,] 6 .  .
# [3,] . . 20 
```

（`1*`in`(1*(m!=0))`被用来强制将生成的类“lgCMatrix”的逻辑矩阵`m!=0`返回到一个数字矩阵类“dgCMatrix”。一个更长的（但可能更清晰）的替代方案将用于`as(m!=0, "dgCMatrix")`代替它。）

# perl - 为什么只有其中一个告诉我“尝试修改只读值”？

> ID：12649083
> 
> 赞同：11
> 
> 时间：2012-09-29T01:13:52.460
> 
> 标签：perl

此代码运行并产生输出`abc`：

```
for(10..12){$_=sprintf"%x",$_;print} 
```

`Modification of a read-only value attempted at ...`但是此代码因错误而死：

```
for(10,11,12){$_=sprintf"%x",$_;print} 
```

为什么这些结构的处理方式不同？

（此代码也有效：）

```
for(10..10,11..11,12..12){$_=sprintf"%x",$_;print} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-29T01:19:09.920

可能是因为当你`foreach`超过一个范围时会出现“计数循环”优化。`for (1, 2, 3, 4)`实际上构造了列表 (1, 2, 3, 4)，其中包含那些特定的只读值，但`for (1..4)`没有；它只是从范围的开始迭代到结束，依次给出`$_`每个连续的值，我猜没有人认为当你尝试分配给它时匹配行为是值得的`$_`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:27:27.793

您的最后一个片段正在做不应该做的事情。最好使用以下代码进行演示：

```
for (1..2) {
   for (1..3, 5..7) {
      print $_++;
   }
   print "\n";
} 
```

输出：

```
123567
234678 
```

[RT#3105](https://rt.perl.org/rt3/Ticket/Display.html?id=3105)

* * *

就我而言，有三种 for 循环：

*   “C 风格” ( `for (my $i=1; $i<4; ++$i)`)
*   迭代 ( `for my $i (1,2,3)`)
*   计数 ( `for my $i (1..3)`)

# windows - Windows DC 和 GLRC 对应什么？

> ID：12649084
> 
> 赞同：0
> 
> 时间：2012-09-29T01:14:21.273
> 
> 标签：windows, winapi, opengl, gdi, wgl

DC 在 Windows 中对应于什么？我知道我可以从 HWND 或 HMONITOR 获得 HDC。这是否意味着窗口的 DC 是其监视器 DC 的别名或代理？Windows 允许你说一个窗口类应该有它自己的 DC，所以看起来它们不是同一个 DC，尽管 Windows API 似乎也支持在 DC 之间建立父子关系。我会发现显示器的 DC 是父 DC 之一吗？

如果一个窗口跨越多个监视器会发生什么？Windows API 似乎只支持从窗口获取单个 HDC 并从 HDC 获取单个 HGLRC。我读过 OpenGL 不支持跨多个监视器的全屏窗口，因此您必须有多个窗口才能完成此操作。

SLI/Crossfire 系统会是单个 GLRC 吗？

在我看来，GLRC 与图形系统最相似。GLRC 代表一个单一的图形系统。DC 代表输出。GLRC 可以绘制到与连接到图形系统的输出相关联的任何 DC 以及这些 DC 的任何子 DC。您还可以拥有多个显示器和多个图形卡，每个都配对在一起，因此每个 GLRC 与每个 DC 配对。

正确还是确认？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T01:39:25.930

Windows 中的设备上下文是可以（理论上）绘制到的表面，并且很可能对显示器可见。Windows 具有设备上下文，桌面窗口和监视器也是如此。单个窗口可以共享设备上下文；这可能发生在代表简单控件等的子窗口中。

设备上下文没有您所说的父/子关系。整个[`CS_PARENTDC`事情](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162775%28v=vs.85%29.aspx)是关于窗口设备上下文的剪切矩形。

一个窗口有一个单一的设备上下文，句号（如果窗口不使用它会稍微复杂一点`CS_OWNDC`，但是在处理 OpenGL 时你应该总是使用它），无论窗口在哪里。术语“设备上下文”不应与“监视器”或任何实际硬件相混淆。它只是一个您可以绘制的表面。

对于 OpenGL，设备上下文与渲染上下文的关联相对松散。只要 RC 是使用与新 DC 相同的像素格式创建的，就可以将任何设备上下文与 RC 一起使用。所以你可以在 DC1 上设置一个像素格式，用它制作一个 RC，然后在 DC2 上设置相同的像素格式，你可以将 wglMakeCurrent 与 DC1 或 DC2 以及那个 RC 一起使用。

多显示器如何与 OpenGL 配合使用完全取决于 GPU 设置。允许 OpenGL 在 Windows 上工作的 ICD 机制只允许安装一个*驱动*程序。因此，如果您的系统中有两张卡，每张卡都插入单独的监视器，带有两个不同的驱动程序，OpenGL 将只能识别其中一个。尝试绘制到部分位于其他 GPU 屏幕上的 DC 将产生不可预知的结果。

现在，如果您有一张卡为多台显示器供电，OpenGL 不在乎。问题在于独立、可见图形处理器的数量。

话虽如此，SLI/Crossfire 的全部意义在于*假装*两个 GPU 实际上只是一个。因此，您有*一个*驱动程序，操作系统只真正看到*一个*GPU，并且这些卡中只有*一个*输出到监视器。因此，OpenGL 的工作方式与一张卡为多台显示器供电的情况完全一样。

# networking - Libpcap 不捕获整个数据包

> ID：12649086
> 
> 赞同：0
> 
> 时间：2012-09-29T01:14:39.187
> 
> 标签：networking, network-programming, network-protocols, libpcap

我正在尝试使用`libpcap`. 这是我的代码：

```
int main (int argc, char **argv) {
    char *dev = "eth0";
    char errbuf[PCAP_BUFFER_SIZE];
    pcap_t *handle;

    char filter[] = "tcp and src port 80";
    struct bpf_program fp;
    bpf_u_int32 mask, net;

    handle = pcap_open_live(dev, SNAP_LEN, 1, 1000, errbuf);
    pcap_compile(handle, &fp, filter,0,net);
    pcap_setfilter(handle, &fp);
    pcap_loop(handle, -1, got_packet, NULL);

    pcap_freecode(&fp);
    pcap_close(handle);

    return 0;
} 
```

和

```
void got_packet(u_char *args, const struct pcap_pkthdr *header, const u_char *packet) {
    static int count = 1;
    static int http_count = 1;
    const struct sniff_ethernet *ethernet;
    const struct sniff_ip *ip;
    const struct sniff_tcp *tcp;

    int size_ip;
    int size_tcp;
    int size_payload;

    count++;

    ethernet = (struct sniff_ethernet*) (packet);
    ip = (struct sniff_ip*) (packet + SIZE_ETHERNET);
    size_ip = IP_HL(ip)*4;
    if (size_ip  < 20){
        printf("Invalid IP header %d", size_ip);
        return;
    }

    if (ip->ip_p != IPPROTO_TCP){
        printf("Not TCP\n");
        return;
    }

    tcp = (struct sniff_tcp*) (packet +SIZE_ETHERNET+size_ip);
    size_tcp = TH_OFF(tcp) * 4;
    if (size_tcp < 20) {
        printf("Invalid TCP header");
        return;
    }

    if ((tcp->th_flags & TH_ACK) != 0) {
        const char *payload = (const char *) (packet + SIZE_ETHERNET + size_ip + size_tcp);
        size_payload = ntohs(ip->ip_len)- (size_ip + size_tcp);
        std::cout << payload << "\n";       
        if (count == 4)
            exit(0);
    } 
```

参数是：

```
#define SNAP_LEN    65535
#define SIZE_ETHERNET   14
#define ETHER_ADDR_LEN  6
#define PCAP_BUFFER_SIZE 65535 
```

现在，整个第四个数据包都没有打印出来。我使用转储了数据包`tcpdump`，它得到了整个数据包，但我的代码没有。这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:39:35.920

原来这是打印的问题。我使用了该功能`print_payload`，现在可以正常工作。

# architecture - 除了中断驱动架构，还有其他模型吗？

> ID：12649089
> 
> 赞同：3
> 
> 时间：2012-09-29T01:15:28.067
> 
> 标签：architecture, operating-system, interrupt

我正在阅读有关操作系统如何使用中断与硬件通信的信息，只是想知道，除了中断驱动之外，是否还有其他架构？在 Robert Love 的 Linux 内核一书中，他说 Linux 处理的大部分架构都是中断驱动的，那么其他的呢？有人可以举个例子吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T01:27:36.397

对您的问题的简短回答是，只有一个其他模型，那就是轮询。在轮询模型中，系统反复询问硬件是否发生了任何事情。这种模型的缺点是 CPU 总是忙于询问，并且只有在询问时才能知道活动。如果它开始做其他事情，它可能会错过一个动作（因为它在动作时没有要求活动）。

更长的答案：

如果您考虑一下，实际上可能只有两种可能的系统：轮询（拉）和事件驱动（推）。在前者中，您询问硬件是否发生了任何事情，而在后者中，硬件会告诉您。换句话说：前者的代理是CPU/OS，后者是硬件。由于有两方，每一方都可以做两件事中的一件，这意味着我们只能有两种类型的系统（推/中断和拉/轮询），再加上一个混合系统（中断驱动和基于轮询的不同的时间或不同的环境）。

可以想象实现这三个系统中的任何一个的多种方法，并且可以将它们视为不同的模型，即使在幕后，它们实际上是在实现其中一个可能的系统。不过，我想这并不是您真正想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T02:47:37.373

在低级别，轮询是主要的替代方案。然而，在架构上，主要方法是单片的，中断直接驱动设备驱动程序和微内核，其中设备驱动程序可能是在硬件事件发生时由内核通知的独立进程。中断仍然会发生，但它们由一个非常小的内核管理。我怀疑这是您的报价所指的差异。轮询不再很常见。Minix 是最著名的基于微内核的操作系统之一，因为它用于教学。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T01:21:27.373

我猜，它是一些硬实时系统，系统不使用异步中断，而是在明确定义的时间（可能是周期性的）检查（轮询）I/O 设备的状态。如果设备未准备好或处于意外状态，系统会报告故障。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T18:45:51.680

我将轮询架构等同于确定性进程导向，将中断驱动等同于随机进程导向。就其自身的优点而言，两者都不是更好的，而且两者都是普遍需要的。这取决于外部任务和接口。通常，系统必须允许许多进程的交互，并且计划架构以在进程的上下文中划分随机性是有益的，而不是在遇到必须定期服务且没有随机性的随机服务约束的同时满足要求。糟糕的设计会随机违反某些面向时序约束的服务，从而无法解决软件级别的功能困境。使用离散事件仿真建模以额外的复杂性对随机过程进行建模，

# android - 如何检查对视图的引用是否在android的另一个视图中？

> ID：12649090
> 
> 赞同：1
> 
> 时间：2012-09-29T01:15:51.240
> 
> 标签：android

不要求视图具有唯一 ID。您可以膨胀一个视图，然后将该视图添加到另一个视图中。例如。

```
 myFooterReference = inflate (my_footer)
  myListView.addFooterView(myFooterReference) 
```

那么打电话总是有效的吗？

```
 myListView.removeFooterView(myFooterReference) 
```

我们现在没有先检查的选项

```
 myListView.findViewById(R.id.my_footer_id) // because no such footer exists 
```

那么这群人是怎么回事？尝试通过引用删除视图是否总是有效的，即使它不存在。有没有其他人在这样做时遇到过错误？

关于为什么android sdk没有方法的任何理论：

```
 myListView.hasView(listViewReference); 
```

或者至少

```
 myListView.hasFooterView(listViewReference) ? 
```

它有项目计数，但为什么不提供一种方法来判断给定的页脚是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:53:34.143

您可以获取视图的父级：

```
view.getParent(); 
```

并检查它是否有父级，它是否是您的列表视图的父级？

但是，如果您不喜欢这些检查，通常最好的解决方案是实现您自己的布局管理器，根据需要执行您想要的布局，并且还可以跟踪其中包含的有趣视图。
请参阅此页面：[检查一个 View 是否包含另一个 View](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/B_2UHIUPcMo)。

# google-maps - 上传到地点的地点未出现在查询中

> ID：12649091
> 
> 赞同：1
> 
> 时间：2012-09-29T01:16:24.403
> 
> 标签：google-maps, google-places-api, google-places

我正在使用 Google Places API 在 Google 网站上存储积分。简而言之，我开发了一组简单的 Java 类，它们将使用 JSON 和我的**Google API 密钥**来发布它。我使用 id、reference 和 status det 接收成功消息。让我明确一点，我不是企业客户，我不会向 Google 支付任何费用来维持积分。

接下来，我制作了一个使用 Google Maps 和 Places Javascript API 构建的简单 HTML 页面（不是 JSP），其中我启用了 Places AutoComplete 工具的文本框。我正在使用 URL 中的**Google API 密钥**来调用地图。HTML 页面工作正常。但是当我搜索我在第一步中输入的地方时，我无法检索它们。

我知道这些要点在提供给其他人之前要经过一个审核过程。但是谷歌文档说它可以用于上传它的应用程序。

a) Google 如何确定哪个应用程序贡献了分数？我猜它应该是在发出 Add Place 请求时使用的加密应用程序密钥。但是，这方面没有明确的指导。

b) 其次，如何找回我在第一步中提交的积分？

问候

戈文达拉扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:45:00.043

只有少数受信任的应用程序提交的[地方报告请求会被审核以集成到 Google 地方信息中。](https://developers.google.com/places/documentation/actions#PlaceReportRequests)

如果您想添加一个可以在您的应用程序之外访问的新地点，您可以按照 Google 地图帮助说明[添加一个新地点](http://support.google.com/maps/bin/answer.py?hl=en&answer=144367&topic=1687361&ctx=topic)。

如果您是企业主，您可以使用[Google Places for Business](http://www.google.com/placesforbusiness)在 Google 地图上添加和验证您的企业。

向 Google 地图添加地点的另一种方法是按照Google 地图制作工具帮助中的[说明通过](http://support.google.com/mapmaker/bin/answer.py?hl=en&answer=1096044&ctx=cb&src=cb&cbid=1wf9zf83h3bs7&cbrank=2)[Google 地图制作工具](http://www.google.com/mapmaker)提交修改。

您添加的地点将在经过审核并被接受后出现在 Google 地图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:34:40.347

谢谢回答。

我按照以下步骤获取 API

[a) 在https://code.google.com/apis/console](https://code.google.com/apis/console)登录 API 控制台 b) 单击左侧菜单中的服务链接。c) 激活了 Google **Maps API v3 服务**、Places API、Google Coordinate、Static Map API（**全部在同一时间**），但忽略了 Google **Maps API v2**服务 d) 单击左侧菜单中的 API 访问链接。在简单 API 访问部分使用 API 访问页面中的 API 密钥！

[删除敏感信息后我的 Google API 控制台](https://i.stack.imgur.com/dgfkC.png)

我的理解是启用 Google Places 和 Google Maps API v3 后生成的 API 密钥对两者都是通用的。我在 Map JavaScript 以及用于 HTTP 数据发布的 Java 类中使用了这个 API。

![在此处输入图像描述](../Images/9fc4869b74d2eaec1739492a6231148d.png)

当我使用浏览器应用程序的 API 密钥发布数据时，它发布了数据并且我的状态为 OK。按照您的逻辑，Google Places 是如何接受浏览器应用程序的密钥的？

# c++ - C++ 意外标识符

> ID：12649095
> 
> 赞同：0
> 
> 时间：2012-09-29T01:17:18.017
> 
> 标签：c++, compiler-errors, identifier

```
#include "cs163hw1.h"

extras::extras(int num_cats){
head = new category_node;
head->next = NULL;
head->category = num_cats;
category_node * temp;
for(int i = 1; i < (num_cats); ++i){
    temp = new category_node;
    temp->next = head;
    head = temp;
    head->category = (num_cats-i);
}
}

extras::~extras(){
category_node * temp;
while(head->next){
    temp = head;
    head = head->next;
    delete temp;
}
delete head;
}

extras::int print_cats(){
category_node * current;
while(current){
    cout << current->category << endl;
    current = current->next;
}
return 1;
} 
```

我在 print_cats 之前的 int 处收到一个未识别的标识符错误。自从我使用 c++ 以来已经有一段时间了，但我想我记得缺少“;” 错误，但对于我的生活，我还没有找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T01:20:46.043

不确定，但应该是“ `int extras::print_cats()`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T01:20:43.713

int extras::print_cats() 如果这是一个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T01:18:55.653

这将起作用`int extras::print_cats()`。只是一个小的语法错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T01:19:05.483

你可能不是这个意思`extras::int`，而是`int`。唯一有意义的方法是，如果您在命名空间或类中有一个名为 int 的 typedef（这将是一个坏主意）。

# makefile - Makefile 不会将 .o 复制到 obj/ 和目标到 bin/ 文件夹

> ID：12649096
> 
> 赞同：0
> 
> 时间：2012-09-29T01:17:49.480
> 
> 标签：makefile, executable, x86-64, nasm, object-files

我正在尝试编写一个 Makefile，它将其目标和对象分别复制到 bin/ 和 obj/ 目录。

然而，当我尝试运行它时，我收到以下错误：

```
nasm -f elf64 -g -F stabs main.asm -l spacelander.lst
ld -o spacelander obj/main.o
ld: cannot find obj/main.o: No such file or directory
make: *** [spacelander] Error 1
Why is this happening? 
```

**更新**

当我发布错误时，我注意到这是由于空白间距错误造成的。在处理完这些之后，我仍然得到我之前提到的旧错误替换的新错误。

这是什么？？

**更新 2**

在 Makefile 源下方发布`-d`标志输出。

* * *

**资源**

```
ASM  := nasm
ARGS := -f
FMT  := elf64
OPT  := -g -F stabs

SRC    := main.asm

OBJDIR := obj 
TARGETDIR := bin

OBJ    := $(addprefix $(OBJDIR)/,$(patsubst %.asm, %.o, $(wildcard *.asm)))
TARGET := spacelander

.PHONY: all clean

all: $(OBJDIR) $(TARGET)

$(OBJDIR): 
    mkdir $(OBJDIR)

$(OBJDIR)/%.o: $(SRC)
    $(ASM) $(ARGS) $(FMT) $(OPT) $(SRC) -l $(TARGET).lst

$(TARGET): $(OBJ)
    ld -o $(TARGET) $(OBJ)

clean:
    @rm -f $(TARGET) $(wildcard *.o)
    @rm -rf $(OBJDIR) 
```

**`make -d`输出 - 注意：输出的正文字符太多，因此被粘贴**

[http://pastebin.com/3bctGJxs](http://pastebin.com/3bctGJxs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:25:07.903

[Jonathan Leffler](https://stackoverflow.com/users/15168/jonathan-leffler)在评论中所说的是正确的。您的`$(OBJDIR)/%.o: $(SRC)`规则将您的源代码编译成一个目标文件，但您没有告诉`nasm`在哪里保存该目标文件。这准确解释了为什么您会收到有关链接`obj/main.o`器未找到的链接错误 - 因为`nasm`不知道它应该将其保存在`obj/main.o`. 尝试添加`-o <output>`，例如：

```
$(OBJDIR)/%.o: $(SRC)
    $(ASM) $(ARGS) $(FMT) -o $@ $(OPT) $(SRC) -l $(TARGET).lst 
```

这个答案被标记为*community wiki*。任何感谢都应该[归功于 Jonathan Leffler](https://stackoverflow.com/users/15168/jonathan-leffler)。

# html - CSS边框角向后圆

> ID：12649097
> 
> 赞同：0
> 
> 时间：2012-09-29T01:17:54.123
> 
> 标签：html, border, rounded-corners, css

> **可能重复：**
> [CSS3 倒圆角](https://stackoverflow.com/questions/2936262/css3-inverted-rounded-corner)

有没有办法让 CSS 边框在相反的方向转角？我不是在谈论倒置。

假设您有两个垂直堆叠的 div，关于两个相交的顶部 div 的底部边框，我希望角向底部 div 的方向弯曲，但属于顶部 div。

编辑：基本上，看起来像这样：![对面圆角](../Images/8004f1b39cea094ccaceb345e2322b49.png)

Pumbaa80 是对的，它是[CSS3 Inverted Rounded Corner](https://stackoverflow.com/questions/2936262/css3-inverted-rounded-corner)的副本。我不完全理解它是如何工作的，但我能够重新创建它，现在我只是调整它的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:33:27.237

这将创建您已说明的行：

[http://jsfiddle.net/hF8w5/](http://jsfiddle.net/hF8w5/)

可以包含在绝对定位的 div 中并定位在您想要的位置。

# java - 我得到一个空指针异常，我找不到原因

> ID：12649099
> 
> 赞同：1
> 
> 时间：2012-09-29T01:18:24.733
> 
> 标签：java, arrays, tree, nullpointerexception

该程序应该以树的形式制作一个非确定性自动机，其中包含键和下一个自动机的信息。自动机是在文本上查找模式（比这更复杂，但这应该足以解决我的问题，因为我还没有进入下一部分）。

我不明白如何，但是当我为自动机构建一个简单的模式时（“AA”是我的模式），我得到“sgte”（next）在数组长度（保存为 N [ kN]) 不是 0。我找不到原因:(

这是代码：

```
public class AFND {

    private boolean estado; // true o false dependiendo de si es final o inicial respectivamente.
    private AFND sgte[];  //arreglo con todos los posibles estados siguientes
    private int N;  //cantidad de posibles estados siguientes
    private char key[]; //key[i] es el caracter con el que se accede a sgte[i] { '-' = e  }
    private int q; //denominador de estado
    private String alfa = "aaabcdefghijklmnopqrstuvwxyzABCDEFGHIJLKMNOPQRSTUVWXYZZZ"; //para ahorrarnos errores revisamos indexOf desde la posicion 2 donde sea necesario

    public AFND() {
        estado = true;
        sgte = null;
        N = 0;
        key = null;
        q = 0;
    }

    public AFND(int q) {
        estado = true;
        sgte = null;
        N = 0;
        key = null;
        this.q = q;
    }

    public AFND(String s) {
        if (check(s) == false) {
            U.println("Patrón Invalido.");
            System.exit(0);
        }
        AFND k = Construccion(s, 0);
        estado = k.estado;
        int i = 0;
        sgte = new AFND[k.N];
        key = new char[k.N];
        while (i < k.N) {
            sgte[i] = k.sgte[i];
            key[i] = k.key[i];
            i++;
        }
        N = k.N;
        q = k.q;
    }

    public AFND Construccion(String s, int l) {
        if (s.length() == 0) {
            return new AFND();
        }
        AFND k = new AFND(l);
        k.estado = false;
        k.q = l;
        if (s.charAt(0) == '[') {
            AFND sgte[] = new AFND[5];
            char key[] = new char[5];
            String h = s.substring(1, s.indexOf(']'));
            int i = 0;
            int j = 0;
            int x;
            String L[] = new String[5];
            while (i < 5) {
                L[i] = "";
                while (j < h.length()) {
                    x = alfa.substring(2).indexOf(h.charAt(j));
                    L[i] += alfa.charAt(x + i - 2);
                    j++;
                }
                j = 0;
                L[i] += s.substring(s.indexOf(']') + 1);
                sgte[i] = Construccion(L[i].substring(1), l);
                l++;
                key[i] = L[i].charAt(0);
                i++;
            }
            k.N = 5;
        } else {
            AFND sgte[] = new AFND[1];
            char key[] = new char[1];
            key[0] = s.charAt(0);
            if (s.length() > 1) {
                sgte[0] = Construccion(s.substring(1), l);
            } else {
                sgte[0] = new AFND(l);
            }
            k.N = 1;
            l++;
        }
        int o = 0;
        k.sgte = new AFND[k.N];
        k.key = new char[k.N];
        while (o < k.N) {
            k.sgte[o] = sgte[o];
            k.key[o] = key[o];
            o++;
        }
        return k;
    }

    public boolean estado() {
        return estado;
    }

    public AFND[] sgte() {
        return sgte;
    }

    public int ancho() {
        return N;
    }

    public char[] key() {
        return key;
    }

    public int num() {
        return q;
    }

    public boolean check(String s) {
        int i = 0;
        int j = 0;
        while (i < s.length()) {
            if (j == 0) {
                if (s.charAt(i) == '[') {
                    j = 1;
                } else if (s.charAt(i) == ']') {
                    return false;
                } else if (!Character.isLetter(s.charAt(i))) {
                    return false;
                }
            } else {
                if (s.charAt(i) == ']') {
                    j = 0;
                } else if (s.charAt(i) == '[') {
                    return false;
                } else if (!Character.isLetter(s.charAt(i))) {
                    return false;
                }
            }
            i++;
        }
        return true;
    }
} 
```

这是正在运行的程序：

```
import java.io.IOException;

public class Tarea2 {

static public void main(String[] args) throws IOException{
    String m=U.readLine("Ingresar Patrón: ");
    AFND patron=new AFND(m);
    U.println("AFND Patron Desplazado: ");
    U.println("");
    U.println("<!--Deus ex Machina-->");
    U.println("<structure>");
    U.println("<type>");
    U.println("fa");
    U.println("</type>");
    U.println("<automaton>");
    imprimirEstados(patron);
    imprimirTransiciones(patron);
    U.println("</automaton>");
    U.println("</structure>");
}

static public void imprimirEstados(AFND m){
    U.println("<state id="+m.num()+" name=q"+m.num()+">");
    U.println("<x>");
    U.println("0.0");
    U.println("</x>");
    U.println("<y>");
    U.println("0.0");
    U.println("</y>");
    U.println("</state>");
    int i=0;
    if(m.ancho()!=0){
        AFND[] s=m.sgte();
        while(i<m.ancho()){
            imprimirEstados(s[i]);
            i++;
            }
        }
    }

static public void imprimirTransiciones(AFND m){
    if(m.ancho()!=0){
        int i=0;
        while(i<m.ancho()){
            U.println("<transition>");
            U.println("<from>");
            U.println(m.num());
            U.println("</from>");
            U.println("<to>");
            U.println(m.sgte()[i].num());
            U.println("</to>");
            U.println("<read>");
            U.println(m.key()[i]);
            U.println("</read>");
            imprimirTransiciones(m.sgte()[i]);
            i++;
        }
    }
}

} 
```

请帮忙 ：（

这是一个例外：

```
Exception in thread "main" java.lang.NullPointerException
at tarea2cs.AFND.Construccion(AFND.java:104)
at tarea2cs.AFND.Construccion(AFND.java:95)
at tarea2cs.AFND.<init>(AFND.java:48)
at tarea2cs.Tarea2.main(Tarea2.java:9) 
```

104是这部分：

```
 while(o<k.N){ 
        k.sgte[o]=sgte[o];    <=
        k.key[o]=key[o];
        o++;
    } 
```

我可以只添加“if(sgte!=null)”，但这并不能解决它不应该变成空的问题:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T01:30:05.780

我认为这是一个阴影问题。你有一个实例变量`sgte`，但在几个地方你声明了同名的局部变量；例如

```
 AFND sgte[] = new AFND[5]; 
```

这看起来像一个错误......我猜它应该是：

```
 sgte = new AFND[5]; 
```

（你至少在另一个地方犯了同样的错误。）

* * *

我还应该评论说，编写的代码存在严重的可维护性问题。您在没有任何解释性注释的情况下普遍使用一个字母的变量名称和缩写（如`sgte`和`AFND`），这将使其他人很难弄清楚这个应用程序是关于什么的，更不用说它应该如何工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T01:29:38.203

您已经创建了一个数组，但还没有创建对象。

```
 sgte = new AFND[k.N];
 for(int i=0;i<k.N;i++){
   sgte[i]=new AFND();
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T01:32:15.493

您只创建了 sgte 数组，但从未对其进行初始化。

```
private AFND sgte[];  //arreglo con todos los posibles estados siguientes

   public AFND(int q) {
    estado = true;
    sgte = null;
    N = 0;
    key = null;
    this.q = q;
} 
```

并且您正在尝试在此处获取 0 索引处的元素

```
 while (o < k.N) {
        k.sgte[o] = sgte[o];   //NPE
        k.key[o] = key[o];
        o++;
    } 
```

并且您还创建了一个同名的局部变量（无论如何这都不是问题）。但是，要区分使用**this.sgte**作为实例变量。

# c# - 隐式将参数转换为委托的扩展方法？

> ID：12649103
> 
> 赞同：1
> 
> 时间：2012-09-29T01:19:30.750
> 
> 标签：c#, events, extension-methods

我正在试验一个对象可以用来触发自己的事件的扩展方法。

我已经让它几乎按照我想要的方式工作，但我想知道我是否可以将它改进到可以将传递的参数转换为 EventArgs 的构造函数参数而无需求助于 Activator 的程度。

我会提前说我怀疑这是可能的，但我会试一试，因为有时我真的很惊讶其他人的编码技巧......

```
void Main()
{
    var c = new C();
    c.E += (s, e) => Console.WriteLine (e.Message);
    c.Go();
}

public class C
{
    public event EventHandler<Args> E;
    public void Go()
    {
        Console.WriteLine ("Calling event E...");

        // This version doesn't know the type of EventArgs so it has to use Activator
        this.Fire(E, "hello");

        // This version doesn't know ahead of time if there are any subscribers so it has to use a delegate
        this.Fire(E, () => new Args("world"));

        // Is there some way to get the best of both where it knows the type but can delay the 
        // creation of the event args?
        //this.Fire<Args>("hello");
    }
}

public class Args : EventArgs
{
    public Args(string s)
    {
        Message = s;
    }
    public string Message { get; set; }
}

public static class Ext
{
    public static void Fire<T>(this object source, EventHandler<T> eventHander, Func<T> eventArgs) where T : EventArgs
    {
        if (eventHander != null)
            eventHander(source, eventArgs());
    }

    public static void Fire<T>(this object source, EventHandler<T> eventHander, params object[] args) where T : EventArgs
    {
        if (eventHander != null)
            eventHander(source, (T)Activator.CreateInstance(typeof(T), args));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:06:25.757

我以前做过类似的事情，但我选择使用新的 EventArgs/EventHandler 包装器。它使用隐式转换和泛型来自动处理与事件参数的转换。

```
public delegate void DataEventHandler<TSender, TEventArgs>(TSender sender, DataEventArgs<TEventArgs> eventArgs);
public delegate void DataEventHandler<TEventArgs>(DataEventArgs<TEventArgs> eventArgs);

public class DataEventArgs<TEventArgs>
{
    public TEventArgs Args { get; private set; }

    public DataEventArgs(TEventArgs args)
    {
        this.Args = args;
    }

    public static implicit operator TEventArgs(DataEventArgs<TEventArgs> args)
    {
        return args.Args;
    }

    public static implicit operator DataEventArgs<TEventArgs>(TEventArgs args)
    {
        return new DataEventArgs<TEventArgs>(args);
    }
} 
```

我在有/没有发件人的情况下进行了重载，这可能不是一个好主意，但您至少可以玩弄它。

然后扩展方法而不是放置在`object`有点糟糕的类型上，因为*所有*对象（我认为）都在智能感知中显示/可用，即使它并不真正适用，我将它与 DataEventHandlers 本身绑定：

```
public static class MyExtensions
{
    public static void Fire<TSender, TEventArgs>(this DataEventHandler<TSender, TEventArgs> eventHandler, TSender sender, TEventArgs args)
    {
        if (eventHandler!= null)
            eventHandler(sender, args);
    }

    public static void Fire<TEventArgs>(this DataEventHandler<TEventArgs> eventHandler, TEventArgs args)
    {
        if (eventHandler != null)
            eventHandler(args);
    }
} 
```

（请注意，我将它放在与 the 相同的命名空间中，`DataEventHandler`因此假设您将事件与它们的命名空间一起用作 using 语句，它们也可以自动使用/导入）

扩展方法已经知道参数类型，但它还没有作为 args 对象传入。相反，它作为原始类型传递，然后只有在最终调用中，*如果*事件有注册`eventHandler(sender, args)`者，它才会隐式转换为事件 args 。

 *您的`C`课程可能如下所示：

```
public class C
{
    public event DataEventHandler<string> E;
    public event DataEventHandler<C, string> EWithSender;

    public void Go()
    {
        Console.WriteLine ("Calling event E...");

        E.Fire("hello");
        EWithSender.Fire(this, "hello");
    }
} 
```

请注意，其中的事件声明`C`没有使用`DataEventHandler<DataEventArgs<string>>`;明确标记自己。这是由委托参数隐式处理的。

您的调用代码可能如下所示：

```
C c = new C();
c.E += (args) => PrintOut(args);
c.EWithSender += (sender, args) => Console.WriteLine("Sender Type: " + sender.GetType().Name + " -> Args: " + args.Args);
c.Go();

private void PrintOut(string text)
{
    Console.WriteLine(text);
} 
```

同样，事件参数*可以*（但您不必）在传递给方法时隐式转换回它们的包装数据类型。

现在，这有一些缺点。主要是，在我看来，它有点违反标准 .NET EventHandler 关于类型的实践，难以制作自己的事件参数等。特别是因为我最终没有创建自己的 EventArgs 子类，而是只是传递一些数据对象（基本值类型，或者我自己的自定义类或数据模型）。它对我*很有帮助*，但在实践中我发现它越来越没用。我不提倡这种风格/实现，但也许它会给你一些想法。*

# actionscript-3 - AS3，Flash - 禁用所有按钮？除了一个？

> ID：12649105
> 
> 赞同：2
> 
> 时间：2012-09-29T01:19:46.780
> 
> 标签：actionscript-3, flash

是否有可能以某种方式制作一个禁用所有按钮的功能？就像在整个 Flash 文件上制作灰色 alpha 覆盖？

但不应仅覆盖一个影片剪辑，且不应禁用一个按钮。

这可以通过一些简单的方法来完成，还是我必须编写代码来禁用所有单个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:24:17.240

1.  创建一个会拦截点击的叠加影片剪辑。
2.  addChild(overlay) 覆盖。
3.  addChild(button) 你想要覆盖的按钮。

addChild 将任何对象移动到您要添加到的影片剪辑的最顶层。因此，将灰色叠加层传递给 addChild last 会将其绘制在屏幕上的所有对象上。然后使用您想要的按钮作为参数调用它，使其显示在灰色覆盖层上，因为它是您传递 addChild() 的最后一个对象。

# php - 如何使用php会话启动功能？

> ID：12649109
> 
> 赞同：0
> 
> 时间：2012-09-29T01:20:15.450
> 
> 标签：php, session

大家好，我有一个问题。我在我的头文件中声明了 session_start()。在另一个文件 m 中，通过以下方式访问用户信息。首先在我的登录文件中 m 为会话变量分配一个值，该值是用户日志信息。喜欢`$_SESSION['userlogin']=$name;`和在我的其他文件中 m 以下列方式访问用户登录`$user = $_SESSION['userlogin'] ;`并存储到数据库中。但是当我要存储信息时，我得到了以下错误。“未定义的索引用户登录”。我努力寻找解决方案，但没有找到任何人。请帮助我，以便我当时完成任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:22:55.980

你只需要声明 session_start(); 我认为每页一次。如果我要使用它，我通常只会 start_session() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T17:06:45.563

您需要确保`session_start();`在处理会话的代码上方的两个文件中都有

# mysql - 使用 mysql 在一个查询中选择多个表中的子项总数

> ID：12649119
> 
> 赞同：3
> 
> 时间：2012-09-29T01:21:50.427
> 
> 标签：mysql, sql, count, multiple-tables

我整个下午都在试图处理一个查询（或两个或三个）以获得三个表的所有子项的计数。看看我的设计：

用户表

```
id_user | name
1 | foo
2 | bar 
```

韩元表

```
id_won | user
1 | 1
2 | 1
3 | 2 
```

绘制表格

```
id_draw | user
1 | 1
2 | 2
3 | 2 
```

丢表

```
id_lose | user
1 | 1
2 | 1
3 | 1 
```

我试图得到这样的东西：

```
name | wons | draws | loses
foo | 2 | 1 | 3
bar | 1 | 2 | 0 
```

这是我的尝试：

```
select 
    u.name, w.total_w, d.total_d, l.total_l
from 
    user u
    LEFT JOIN 
    (select count(user) as total_w, user from wons group by user) as w
    ON w.user = u.id_user
    LEFT JOIN 
    (select count(user) as total_d, user from draws group by user) as d 
    ON d.user = w.user
    LEFT JOIN 
    (select count(user) as total_l, user from loses group by user) as l 
    ON d.user= .user

group by u.id_user; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T01:28:22.823

您可以在子查询中计算它们的总值并将它们加入到 table 中`users`。我添加`COALESCE`了显示`zero`而不是在其他表上不存在`null`的情况下。`user`

```
SELECT  a.id_user,
        COALESCE(b.totalWon,0) Wons,
        COALESCE(d.totalLoses,0) Loses,
        COALESCE(c.totalDraws,0) Draws
FROM    users a
        LEFT JOIN 
        (
            SELECT `user`, COUNT(id_won) totalWon
            FROM wons
            GROUP BY `user`
        ) b ON a.id_user = b.`user`
        LEFT JOIN
        (
            SELECT `user`, COUNT(id_draw) totalDraws
            FROM draws
            GROUP BY `user`
        ) c ON a.id_user = c.`user`
        LEFT JOIN
        (
            SELECT `user`, COUNT(id_lose) totalLoses
            FROM loses
            GROUP BY `user`
        ) d ON a.id_user = d.`user` 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/99204/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T01:31:01.420

```
select u.name, w.uw as wins, l.ul as loses, d.ud as draws from user
    left join (select user, COUNT(id_won) uw from wons group by user) w on w.user = u.user_id
    left join (select user, COUNT(id_lose) ul from loses group by user) l on l.user = u.user_id
    left join (select user, COUNT(id_draw) ud from draws group by user) d on d.user = u.user_id 
```

这只是任务所需的工作量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T01:45:13.790

最干净的 SQL 是：

```
SELECT 
    u.name,
    w.wins,
    d.draws,
    l.loses
FROM
    user u
LEFT JOIN 
    (SELECT user,COUNT(*) wins FROM wons GROUP BY user) w ON w.user = u.id_user
LEFT JOIN 
    (SELECT user,COUNT(*) draws FROM draws GROUP BY user) d ON d.user = u.id_user
LEFT JOIN 
    (SELECT user,COUNT(*) loses FROM loses GROUP BY user) l ON l.user = u.id_user 
```

见[http://sqlfiddle.com/#!2/91b61/10](http://sqlfiddle.com/#!2/91b61/10)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T01:40:03.507

我会建议一种替代方法，这可能对您的项目来说是一种过度杀伤，但如果您要大量生成所需的结果，请牢记性能。

创建一个汇总表（类似于您想要的输出）。您可以在那里清空为每个用户创建的 shell 记录。

在赢、平和输表中添加触发器，简单地更新汇总表中的数据。

这是一种方法。下一种方法是，如果您想要的结果不是关键任务（即不必是最新的东西），那么考虑添加一个计划的事件（每 10 或 20 分钟运行一次，运行上面提供的查询（我已经给 +1 票）并使用它来更新汇总表。

祝你好运！

# c# - GetHashCode 不保证它返回的值/数字的唯一性

> ID：12649120
> 
> 赞同：0
> 
> 时间：2012-09-29T01:22:10.427
> 
> 标签：c#, .net

我正在开发一个简单的 2D 环境，绘制的每个对象，例如线条、矩形和...通过调用 GetHashCode() 获取唯一的 id

[现在，我在MSDN 页面](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)上注意到它不能保证其结果是唯一的：

*GetHashCode 方法的默认实现不保证不同对象的唯一返回值。此外，.NET Framework 不保证 GetHashCode 方法的默认实现，它返回的值在不同版本的 .NET Framework 之间是相同的。因此，此方法的默认实现不得用作散列目的的唯一对象标识符。*

`GetHashCode()`现在，问题是除了方法之外还存在哪些其他选项？

谢谢，阿米特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T01:36:54.823

也许最好完全摆脱哈希码？`GetHashCode`非常适合快速轻松地修复，但如果您需要对象的真实 ID，那么您应该创建真实 ID。像 32/64 位自动递增整数之类的东西可能就足够了。

虽然哈希码的冲突率与哈希的长度相关，但仍不能保证在发生冲突之前达到可能的最大唯一哈希数。如果您自己管理 ID，则可以提前计划有足够的可用 ID。

另外-您对框架版本之间不同的 GetHashCode() 的评论。我只能想象，如果您将散列保存到某种保存文件中，然后尝试重新加载它们，却发现它们与正在运行的程序的散列不匹配，因为它们已被保存，我只能想象这对您的情况很重要通过不同版本的框架。如果是这种情况，我会建议您更多地在对象上创建和管理 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T01:37:13.947

您需要生成自己的唯一 ID

如果您的对象具有自然键，则有时可以从对象属性中派生唯一 ID。
如果对象没有自然键，则必须生成唯一 ID，您通常会将唯一 ID 传递给构造函数中的对象。

GetHashCode 是较差的唯一 ID，因为它不能保证是唯一的。
在内部，.NET 不使用 GetHashCode 来实现唯一性。
.NET 在内部使用 GetHashCode 来加速相等比较和 HashBuckets。

如果要生成自己的唯一 ID，则应覆盖 GetHashCode 和 Equals。
这样，.NET 可以使用您的唯一标识符进行相等比较。

.NET GetHashCode() 不需要也不保证是唯一的。
.NET GetHashCode() 不仅限于 Int32。
.NET GetHashCode() 是 Int32。

如果 GetHashCode 不相等，则两个对象不相等。
如果 GetHashCode 相等，则两个对象可能相等也可能不相等。Equals 是决胜局。
对于速度，首先比较 GetHashCode。GetHashCode 也用于 hashbuckets，以提高 HashSet 和 Dictionary 等集合的速度。

如果哈希是唯一的，那么它被认为是完美的哈希。

经典例子

```
class Point: object 
{
   protected int x, y;

   public Point(int xValue, int yValue)
   {
        x = xValue;
        y = yValue;
   }
   public override bool Equals(Object obj) 
   {
      // Check for null values and compare run-time types.
      if (obj == null || GetType() != obj.GetType()) 
         return false;

      Point p = (Point)obj;
      return (x == p.x) && (y == p.y);
   }
   public override int GetHashCode() 
   {
      return x ^ y;
   }
} 
```

由于 Point 具有 Int32 X Int32 可能值，因此显然它不能用单个 Int32 唯一标识。GetHashCode 仍然是有价值的并且是必需的。只有 1/Int32 的机会需要更昂贵的 Equals，并且 GetHashCode 用于哈希桶。

考虑简单点

```
class Point: object 
{
   protected byte x, y;

   public Point(byte xValue, byte yValue)
   {
        x = xValue;
        y = yValue;
   }
   public override bool Equals(Object obj) 
   {
      // Check for null values and compare run-time types.
      if (obj == null || GetType() != obj.GetType()) 
         return false;

      Point p = (Point)obj;
      return (x == p.x) && (y == p.y);
   }
   public override int GetHashCode() 
   {
      return (x * 256) + y;
   }
} 
```

在这个简单点中，GetHashCode 将唯一标识对象。您不能覆盖其中之一。必须不覆盖或覆盖两者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T01:39:56.890

这取决于您使用唯一 ID 的目的。听起来您正在使用来识别对象实例，这可能意味着哈希码不是您想要的。

如果两个对象彼此是 .Equals()，则它们应该具有相同的哈希码，但正如您所发现的，相反的情况并非如此（具有相同的哈希码并不意味着它们是 .Equals()）。

您需要唯一 ID 做什么？如果您不使用哈希码将对象放入查找中，则最好为它们分配一个唯一的 ID，如 Guid ( `var uniqueId = Guid.NewGuid()`)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T01:26:46.493

没有哈希函数可以保证返回值的唯一性。

这取决于碰撞的概率有多小。

GetHashCode() 返回一个 32 位整数，这可能不足以假设唯一性。考虑其他算法，如 SHA-1、SHA-2，其哈希长度较长，碰撞概率远低于 32 位整数。

# r - R 中的 2 个图 - 正常，内核函数

> ID：12649134
> 
> 赞同：0
> 
> 时间：2012-09-29T01:25:19.207
> 
> 标签：r, graph, plot, statistics

我试图在一个图中拟合 2 条曲线。一个图包含直方图，同一个图包含正态曲线，最后是核函数。但是，我不能在绘图上显示一个以上的图表，这就是我正在做的事情：

```
hist(index$lognr, breaks = 100, prob=T)
mean_DJ = mean(index$lognr, na.rm=T);
sd_DJ = sd(index$lognr, na.rm=T);
//For the normal curve
curve(dnorm(x, mean_DJ, sd_DJ), add=T, col = "grey", lwd = 2)
//For kernel density
lines(density(index$lognr, na.rm=T), col = "blue", lwd = 2)

 //30 sample data pointsstructure(list(Date = structure(c(1398L, 1381L, 1376L, 1372L, 
    > structure(head(index_A, 30))
        Date  Close        LogNR
1  9/24/2012 690.79 -0.013373028
2  9/21/2012 700.09  0.001987433
3  9/20/2012 698.70 -0.004854378
4  9/19/2012 702.10  0.000270653
5  9/18/2012 701.91  0.003039191
6  9/17/2012 699.78  0.012221048
7  9/14/2012 691.28  0.012079375
8  9/13/2012 682.98  0.019501346
9  9/12/2012 669.79  0.013830855
10 9/11/2012 660.59 -0.003249381
11 9/10/2012 662.74 -0.026356891
12  9/7/2012 680.44  0.006147243
13  9/6/2012 676.27  0.008971468
14  9/5/2012 670.23 -0.007047308
15  9/4/2012 674.97  0.014520368
16 8/31/2012 665.24  0.002061531
17 8/30/2012 663.87 -0.014357104
18 8/29/2012 673.47 -0.001972899
19 8/28/2012 674.80 -0.001303241
20 8/27/2012 675.68  0.018612831
21 8/24/2012 663.22  0.000889995
22 8/23/2012 662.63 -0.009372956
23 8/22/2012 668.87  0.019337473
24 8/21/2012 656.06 -0.013760331
25 8/20/2012 665.15  0.025952144
26 8/17/2012 648.11  0.018327423
27 8/16/2012 636.34  0.008696599
28 8/15/2012 630.83 -0.001362355
29 8/14/2012 631.69  0.002678948
30 8/13/2012 630.00  0.013262158 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:14:51.490

我认为您的问题在于没有密切注意拼写：

```
hist(index$LogNR, breaks = 100, prob=T)
mean_DJ = mean(index$LogNR, na.rm=T);
sd_DJ = sd(index$LogNR, na.rm=T);
#For the normal curve
curve(dnorm(x, mean_DJ, sd_DJ), add=T, col = "grey", lwd = 2)
#For kernel density
lines(density(index$LogNR, na.rm=T), col = "blue", lwd = 2) 
```

![在此处输入图像描述](../Images/2f1875c12e86a8ba62831c5802fc9a73.png)

```
index <- read.table(text="      Date  Close        LogNR
1  9/24/2012 690.79 -0.013373028
2  9/21/2012 700.09  0.001987433
3  9/20/2012 698.70 -0.004854378
4  9/19/2012 702.10  0.000270653
5  9/18/2012 701.91  0.003039191
6  9/17/2012 699.78  0.012221048
7  9/14/2012 691.28  0.012079375
8  9/13/2012 682.98  0.019501346
9  9/12/2012 669.79  0.013830855
10 9/11/2012 660.59 -0.003249381
11 9/10/2012 662.74 -0.026356891
12  9/7/2012 680.44  0.006147243
13  9/6/2012 676.27  0.008971468
14  9/5/2012 670.23 -0.007047308
15  9/4/2012 674.97  0.014520368
16 8/31/2012 665.24  0.002061531
17 8/30/2012 663.87 -0.014357104
18 8/29/2012 673.47 -0.001972899
19 8/28/2012 674.80 -0.001303241
20 8/27/2012 675.68  0.018612831
21 8/24/2012 663.22  0.000889995
22 8/23/2012 662.63 -0.009372956
23 8/22/2012 668.87  0.019337473
24 8/21/2012 656.06 -0.013760331
25 8/20/2012 665.15  0.025952144
26 8/17/2012 648.11  0.018327423
27 8/16/2012 636.34  0.008696599
28 8/15/2012 630.83 -0.001362355
29 8/14/2012 631.69  0.002678948
30 8/13/2012 630.00  0.013262158
", header=TRUE) 
```

# awk - 我可以在 AWK 的区间表达式内的表达式中使用 NR 吗？

> ID：12649138
> 
> 赞同：0
> 
> 时间：2012-09-29T01:25:56.293
> 
> 标签：awk

好的，我希望这不是一个愚蠢的问题，但是如果有帮助的话，我确实已经很沮丧地寻找答案了，...我正在处理以下`awk`表达式：

```
awk '{str="";a=0;while (a++<15) str=str "0,";{ sub(/^.{6}/,"&" "1,",str) }; print str}' sample.txt 
```

*Sample.txt*可以是任何文本文件，此时无关紧要，因为它只是驱动重复（希望这是达到目的的一种手段）。输出看起来像这样（当然取决于 Sample.txt 文件中有多少行）：

```
0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0, 
```

然而，我真正想做的是这样的：

```
awk '{str="";a=0;while (a++<15) str=str "0,";{ sub(/^.{2*NR-1}/,"&" "1,",str) }; print str}' sample.txt 
```

应该生成这样的输出：

```
1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0, 
```

这可能吗？我已经尝试了一切来`Awk`接听，`2*NR-1`但似乎没有任何效果，......我做错了什么？

特里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T01:50:11.463

您尝试的方法看起来相当麻烦。你有没有考虑过`awk`这样使用？

```
awk '{ for (i=1; i<=15; i++) printf (NR == i) ? "1," : "0,"; printf "\n" }' file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T09:25:14.273

您还可以结合使用 coreutils、sed 和 bash：

```
s=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
seq 16 | while read; do sed 's/0/1/'$REPLY <<< $s; done 
```

# android - 阻止 iframe 在 android/phonegap 上全屏显示

> ID：12649141
> 
> 赞同：1
> 
> 时间：2012-09-29T01:26:17.917
> 
> 标签：android, cordova, iframe, fullscreen

我正在手机间隙下编写一个移动 android 应用程序，并且在使用 iframe 时遇到问题：

我有一个标准页面，其中包含一个动态加载内容的 iframe（目前并不重要）。我面临的问题是，在某些模拟器（奇怪的是较新的模拟器）上，iframe 加载并立即接管整个页面，这意味着我的页眉/页脚消失了。

我在某些仿真器设备上完全按照预期工作，并且在其他设备上表现得如前所述。有什么想法可以阻止这种情况发生吗？我发现了这个片段：

```
super.appView.setWebViewClient(new CordovaWebViewClient(this, super.appView) {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                return false;
            }
        }); 
```

但我不确定它应该去哪里。任何想法/指针将不胜感激。

在此先感谢，伊恩

# iphone - 将子视图发送到后面

> ID：12649144
> 
> 赞同：17
> 
> 时间：2012-09-29T01:26:47.973
> 
> 标签：iphone, uiview, subview

我知道一个功能可以将视图带到前面。

```
 [self.view bringSubviewToFront:myView]; 
```

我想知道是否有一个函数可以将子视图发送到后面。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-29T04:32:42.080

尝试，

**目标 C：**

```
[self.view sendSubviewToBack: yourView]; 
```

**迅速：**

```
self.view.sendSubview(toBack: yourView) 
```

# ios - 获取 Photos.app 中的图像数量？

> ID：12649154
> 
> 赞同：1
> 
> 时间：2012-09-29T01:28:48.940
> 
> 标签：ios, numbers, photos, alassetslibrary

我知道可以使用 ALAssetsLibrary 获取 Photos.app 中的图像，但是如何获取 Photos.app 中的照片总数？

几乎我正在尝试检查照片的数量，因为我正在使用以下问题的代码获取 Photos.app 中的最后一张图片：[Get last image from Photos.app?](https://stackoverflow.com/questions/8867496/get-last-image-from-photos-app)

因此，如果设备上有 0 张图像，它将不会执行上面链接中的代码。

无论如何我怎么能得到这个？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T01:41:13.870

使用 iOS 8 中引入的新`Photos`框架，您可以使用`estimatedAssetCount`：

```
NSUInteger __block estimatedCount = 0;

PHFetchResult <PHAssetCollection *> *collections = [PHAssetCollection fetchAssetCollectionsWithType:PHAssetCollectionTypeAlbum subtype:PHAssetCollectionSubtypeAny options:nil];
[collections enumerateObjectsUsingBlock:^(PHAssetCollection * _Nonnull collection, NSUInteger idx, BOOL * _Nonnull stop) {
    estimatedCount += collection.estimatedAssetCount;
}]; 
```

这不包括智能专辑（并且，根据我的经验，它们没有有效的“估计计数”），因此您也可以获取资产以获得实际计数：

```
NSUInteger __block count = 0;

// Get smart albums (e.g. "Camera Roll", "Recently Deleted", "Panoramas", "Screenshots", etc.

PHFetchResult <PHAssetCollection *> *collections = [PHAssetCollection fetchAssetCollectionsWithType:PHAssetCollectionTypeSmartAlbum subtype:PHAssetCollectionSubtypeAlbumRegular options:nil];
[collections enumerateObjectsUsingBlock:^(PHAssetCollection * _Nonnull collection, NSUInteger idx, BOOL * _Nonnull stop) {
    PHFetchResult <PHAsset *> *assets = [PHAsset fetchAssetsInAssetCollection:collection options:nil];
    count += assets.count;
}];

// Get the standard albums (e.g. those from iTunes, created by apps, etc.), too

collections = [PHAssetCollection fetchAssetCollectionsWithType:PHAssetCollectionTypeAlbum subtype:PHAssetCollectionSubtypeAny options:nil];
[collections enumerateObjectsUsingBlock:^(PHAssetCollection * _Nonnull collection, NSUInteger idx, BOOL * _Nonnull stop) {
    PHFetchResult <PHAsset *> *assets = [PHAsset fetchAssetsInAssetCollection:collection options:nil];
    count += assets.count;
}]; 
```

而且，顺便说一句，如果您还没有请求图书馆的授权，您应该这样做，例如：

```
[PHPhotoLibrary requestAuthorization:^(PHAuthorizationStatus status) {
    if (status == PHAuthorizationStatusAuthorized) {
        // insert your image counting logic here
    }
}]; 
```

* * *

使用旧`AssetsLibrary`框架，您可以`enumerateGroupsWithTypes`：

```
NSUInteger __block count = 0;

[library enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    if (!group) {
        // asynchronous counting is done; examine `count` here
    } else {
        count += group.numberOfAssets;
    }
} failureBlock:^(NSError *err) {
    NSLog(@"err=%@", err);
}];

// but don't use `count` here, as the above runs asynchronously 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T01:41:26.473

使用`enumerateAssetsUsingBlock`. 每次结果不为零时，将其添加到数组中（我将其称为`self.arrayOfAssets`）。然后，当你得到一个 nil 结果（枚举的终点）时，得到`self.arrayOfAssets.count`.

**编辑**：好的，这是另一个问题的代码，有几个更改。采用`enumerateAssetsUsingBlock: instead of enumerateAssetsAtIndexes:`

给自己一个可变数组并将每个图像放在那里。

然后，当资产为 nil 表示枚举已完成时，对数组进行计数。

```
 ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init]; 

    self.allPhotos = [[NSMutableArray alloc] init];

    // Enumerate just the photos and videos group by using ALAssetsGroupSavedPhotos.
    [library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos                                                                   usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

    // Within the group enumeration block, filter to enumerate just photos.
    [group setAssetsFilter:[ALAssetsFilter allPhotos]];

    [group enumerateAssetsUsingBlock:^(ALAsset *alAsset, NSUInteger index, BOOL *innerStop) {

    // The end of the enumeration is signaled by asset == nil.
    if (alAsset) {
         ALAssetRepresentation *representation = [alAsset defaultRepresentation];
         UIImage *latestPhoto = [UIImage imageWithCGImage:[representation fullScreenImage]];
        [self.allPhotos addObject:latestPhoto];
    if (!asset){
            NSLog:(@"photos count:%d", self.allPhotos.count);
            }
         }
    }];
 }
 failureBlock: ^(NSError *error) {
    // Typically you should handle an error more gracefully than this.
    NSLog(@"No groups");
  }]; 
```

# jquery - Javascript：$.post 不是 $.ajax 排队脚本

> ID：12649155
> 
> 赞同：0
> 
> 时间：2012-09-29T01:29:08.610
> 
> 标签：jquery, ajax, post

我正在使用[ajaxQ](http://code.google.com/p/jquery-ajaxq/)排队脚本来处理我正在发出的帖子请求，但是 $.ajax 函数有点混乱，我不需要它提供的任何额外选项超过 $.post。有人知道 $.post 请求的排队系统吗？

我想转这个：

```
 $.ajaxq('queue', { 

        type: 'POST', 
        url: baseURL + '/ChangeItem/Check', 
        dataType: 'text',
        data: { 
            'newItem': item, 
            'purchaseItem': false
        },
        error: function(jqXHR, textStatus) {
            alert("Error: " + textStatus); 
        },
        success: function(data) {
            if(thisObject.isNotTaken(data)) thisObject.claimItem(item);  
                else thisObject.proccessResults(list, index+1);
        }
    }); 
```

变成这样简短而干净的东西：

```
$.post(baseURL + '/ChangeItem/Check, { 'newItem': item, 'purchaseItem': false }, 
     function(data) { /* Success function here */ }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T01:52:24.083

您可以创建自己的`$.postq()`/`$.getq()`方法，作为`$.ajaxq()`. 就像`$.post()`：[https](https://github.com/jquery/jquery/blob/master/src/ajax.js#L223)`$.ajax()` : //github.com/jquery/jquery/blob/master/src/ajax.js#L223

```
jQuery.each(["getq", "postq"], function(i, method) {
    jQuery[method] = function(url, data, callback, type) {
        // shift arguments if data argument was omitted
        if (jQuery.isFunction(data)) {
            type = type || callback;
            callback = data;
            data = undefined;
        }

        return jQuery.ajaxq({
            type: method,
            url: url,
            data: data,
            success: callback,
            dataType: type
        });
    };
}); 
```

# debugging - XNA Release 变得无响应

> ID：12649159
> 
> 赞同：1
> 
> 时间：2012-09-29T01:29:47.320
> 
> 标签：debugging, xna, publish

当我运行游戏的发行版、发布版或调试版时，如果窗口不活动，它会变得无响应。只有在使用 F5 调试模式时才能正常运行。我尝试过的任何东西都没有任何效果。有没有人曾经经历过这种情况或知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:59:01.507

我现在在我的游戏中看到了这一点。不知道如何解决问题。将调试器附加到“无响应”的进程实际上会使其再次开始响应。严重的海森堡。:(

看起来这正是发生在我们身上的事情：[XNA 应用程序没有响应](https://stackoverflow.com/questions/6160187/xna-app-not-responding)

> 原来我在 Update() 方法中检查 Mediaplayer.State，由于我的分析器，我发现了这个问题。MediaPlayer.State 是一个昂贵的检索枚举，一旦我删除了该块，它就不再挂起。

我只是做了一个静态处理程序来维护我自己的状态副本。

```
 static Audio()
    {
        MediaPlayer.MediaStateChanged += new EventHandler<EventArgs>((sender, e) => { mediaPlayerState = MediaPlayer.State; });
    } 
```

# c - UDP socket编程中如何判断是哪个客户端发送了消息

> ID：12649160
> 
> 赞同：1
> 
> 时间：2012-09-29T01:30:02.280
> 
> 标签：c, sockets, udp

我正在使用 C 创建一个双向聊天程序这是服务器的代码

```
#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<errno.h>
#include<string.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<arpa/inet.h>
#include<netdb.h>
#include<signal.h>
// the port users will be connecting to
#define RCVPORT "4950"
#define MAXBUFLEN 100

// get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa){
    if (sa->sa_family == AF_INET) {
        return &(((struct sockaddr_in*)sa)->sin_addr);
    }
    return &(((struct sockaddr_in6*)sa)->sin6_addr);
}

int main(void){
int sockfd;
struct addrinfo hints,*servinfo,*p1;
int rv;
int numbytes;
int yes = 1;
struct sockaddr_storage client1_addr,client2_addr;
char buf[MAXBUFLEN];
char buf2[MAXBUFLEN];
char auth[6],auth2[6];
socklen_t client1_addrlen,client2_addrlen;
char s[INET6_ADDRSTRLEN];
pid_t pid1,pid2;    
char exiter[20];
memset(&hints, 0, sizeof hints);

hints.ai_family = AF_UNSPEC; // set to AF_INET to force IPv4
hints.ai_socktype = SOCK_DGRAM;
hints.ai_flags = AI_PASSIVE; // use my IP

if ((rv = getaddrinfo(NULL, RCVPORT, &hints, &servinfo)) != 0) {
    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
    return 1;
}
// loop through all the results and bind to the first we can
for(p1 = servinfo; p1 != NULL; p1 = p1->ai_next) {
    if ((sockfd = socket(p1->ai_family, p1->ai_socktype,p1->ai_protocol)) == -1) {
        perror("listener: socket");
        continue;
    }
    if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &yes,sizeof(int)) == -1) {
        perror("setsockopt");
        exit(1);
    }
    if (bind(sockfd, p1->ai_addr, p1->ai_addrlen) == -1) {
        close(sockfd);
        perror("listener: bind");
        continue;
    }
    break;
}
if (p1 == NULL) {
    fprintf(stderr, "listener: failed to bind socket\n");
    return 2;
}
freeaddrinfo(servinfo);

client1_addrlen = sizeof(client1_addr);
client2_addrlen = sizeof(client2_addr); 
//WAIT for CLIENT 1 
printf("listener: waiting for clients...\n");
if ((numbytes = recvfrom(sockfd,auth, MAXBUFLEN-1 , 0,(struct sockaddr *)&client1_addr, &client1_addrlen)) == -1) {
    perror("recvfrom");
    exit(1);
}
if(strcmp(auth,"AUTH")!=0){
    printf("CLIENT AUTHENTICATION FAILED");     
    exit(0);    
}
printf("GOT CLIENT 1!!\n");
//WAIT for CLIENT 2 
if ((numbytes = recvfrom(sockfd,auth2, MAXBUFLEN-1 , 0,(struct sockaddr *)&client2_addr, &client2_addrlen)) == -1) {
        perror("recvfrom");
        exit(1);
}
if(strcmp(auth2,"AUTH")!=0){
    printf("CLIENT AUTHENTICATION FAILED");     
    exit(0);    
}
if ((numbytes=sendto(sockfd,"ok",3,0,(struct sockaddr *)&client1_addr, client1_addrlen)) == -1) {
    perror("talker: sendto");
    exit(1);
}
if ((numbytes=sendto(sockfd,"ok",3,0,(struct sockaddr *)&client2_addr, client2_addrlen)) == -1) {
    perror("talker: sendto");
    exit(1);
}
printf("GOT CLIENT 2!!!\n");
printf("Server Ready!!!\n");
//for CLIENT 1
if(fork()==0){
    while(1){
        if ((numbytes = recvfrom(sockfd, buf, MAXBUFLEN-1 , 0,NULL,NULL)) == -1) {
            perror("recvfrom");
            exit(1);
        }

        if(numbytes!=0){
            printf("listener: packet contains %s \n", buf);
            if ((numbytes=sendto(sockfd, buf, strlen(buf)+1,0,(struct sockaddr *)&client2_addr, client2_addrlen)) == -1) {
                perror("talker: sendto");
                exit(1);
            }
        }
        else{
            printf("CLIENT 1 has disconnected\n");
            break;          
        }

    }
    exit(0);

}
//for CLIENT 2
if(fork()==0){
    while(1){
        if ((numbytes = recvfrom(sockfd, buf2, MAXBUFLEN-1 , 0,NULL,NULL)) == -1) {
            perror("recvfrom");
            exit(1);
        }

        printf("listener: packet contains %s \n", buf2);

        if(numbytes!=0){            
            if ((numbytes=sendto(sockfd, buf2, strlen(buf2)+1,0,(struct sockaddr *)&client1_addr, client1_addrlen)) == -1) {
                perror("talker: sendto");
                exit(1);
            }
        }
        else{
            printf("CLIENT 2 has disconnected\n");
            break;      
        }       
    }
    exit(0);

}
wait(NULL);
//fgets(exiter,sizeof(exiter),stdin);
close(sockfd);

return 0;} 
```

然后这是客户端的代码

```
#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<errno.h>
#include<string.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<arpa/inet.h>
#include<netdb.h>
#include<signal.h>
#define SERVERPORT "4950"
#define MAXBUFLEN 100
// the port users will be connecting to
int main(int argc, char *argv[]){
    int sockfd;
    char ok[3];
    struct addrinfo hints, *servinfo, *p;
    struct sockaddr_storage server_addr;
    socklen_t server_addrlen = sizeof(server_addr);
    int rv;
    int numbytes;
    char sendbuffer[256];
    char rcvbuffer[256];
    pid_t pid;

    if (argc != 2) {
        fprintf(stderr,"usage: talker hostname\n");
        exit(1);
    }
    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_DGRAM;

    if ((rv = getaddrinfo(argv[1], SERVERPORT, &hints, &servinfo)) != 0) {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        return 1;
    }

    // loop through all the results and make a socket
    for(p = servinfo; p != NULL; p = p->ai_next) {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,p->ai_protocol)) == -1) {
            perror("talker: socket");
            continue;
        }
        break;
    }

    if (p == NULL) {
        fprintf(stderr, "talker: failed to bind socket\n");
        return 2;
    }
    //SEND an authentication to server
    if ((numbytes = sendto(sockfd,"AUTH",5,0,p->ai_addr, p->ai_addrlen)) == -1) {
        perror("talker: sendto");
        exit(1);
    }
    if(numbytes == 0){
        printf("CLIENT FAILED TO AUTHENTICATE TO SERVER\n");
        exit(0);    

    }
    // WAIT for go signal from server
    printf("Waiting for Server Response\n");    
    if ((numbytes = recvfrom(sockfd,ok, MAXBUFLEN-1 , 0,(struct sockaddr *)&server_addr, &server_addrlen)) == -1) {
            perror("recvfrom");
            exit(1);
    }
    if(strcmp(ok,"ok")!=0){
        printf("NO SERVER RESPONSE\n");     
        exit(0);    
    }
    pid = fork();   
    if(pid>0){                      

        do {    
            printf("Enter message to send >>> ");   
            fgets(sendbuffer,sizeof(sendbuffer),stdin);
            printf("\n");
            if ((numbytes = sendto(sockfd, sendbuffer, strlen(sendbuffer)+1,0,p->ai_addr, p->ai_addrlen)) == -1) {
                perror("talker: sendto");
                exit(1);
            }

        } while(strcmp(".exit\n",sendbuffer) != 0);

    }
    else if(pid==0){
        while(1){
            if ((numbytes = recvfrom(sockfd,rcvbuffer,MAXBUFLEN-1 ,0,NULL,NULL)) == -1) {
                perror("recvfrom");
                exit(1);
            }
            printf("\nMessage Received >>>%s",rcvbuffer);
        }
    }

    freeaddrinfo(servinfo);
    close(sockfd);
    kill(pid,SIGUSR1);
    return 0;
} 
```

我想知道如何确定客户端 1 是否发送了消息，以便我可以将其转发给客户端 2，反之亦然。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:26:18.160

第 5 个和第 6 个参数`recvfrom`填写发送数据包的套接字地址。因此，在您收到一个数据包后，将该地址与您的客户端的地址进行比较。这将告诉您哪个客户端发送了该消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T01:43:46.643

您可以创建可以存储活动连接的链表，一旦您收到来自任何客户端的消息，您就可以中继到所有活动客户端...

# javascript - 四舍五入到最接近的倍数

> ID：12649162
> 
> 赞同：0
> 
> 时间：2012-09-29T01:30:31.293
> 
> 标签：javascript, game-engine

我有一个平铺系统，其中每个平铺都是 32x32 像素。我正在尝试创建一个函数，其中基于 xy 坐标参数返回平铺类型，但我很难弄清楚如何正确地将 xy 坐标转换为我拥有的 32x32 网格系统。

```
function getTileAtCoordinates(x, y) {
    if (x < 32) x = 32;
    if (y < 32) y = 32;
    xTile = x;
    xTile = xTile - (x % 32);
    xTile = x / 32;

    yTile = y;
    yTile = yTile - (x % 32);
    yTile = y / 32;

    return getMapTile(xTile, yTile);

} 
```

getMapTile 函数显然从二维数组（x 和 y）中获取瓦片类型。出于某种原因，该函数偶尔会尝试使用十进制值，如果我的数学是正确的，这不应该发生 - 因为十进制值永远不会传递给函数。

编辑：我基本上想要完成的是，如果坐标为 (32, 32)，则转换为 (1, 1)，而 (65, 33) 将转​​换为 (3, 2)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:48:41.840

```
function getTileAtCoordinates(x, y) {
  return getMapTile(Math.ceil(x/32), Math.ceil(y/32))
} 
```

这是假设您的图块 x 和 y 从 1 开始，而不是从 0。只有坐标 0 返回图块 0。

可适应0-31、32-63等工作

```
function getTileAtCoordinates(x, y) {
  return getMapTile(Math.floor((x+1)/32), Math.floor((y+1)/32))
} 
```

这将返回坐标 0-31 的瓷砖 0，32-63 的瓷砖 1，等等。

或者，如果您的坐标从 1 开始（1-32、33-64、65-96 等），但您的图块从 0 开始

```
function getTileAtCoordinates(x, y) {
  return getMapTile(Math.floor((x-1)/32), Math.floor((y-1)/32))
} 
```

# jquery - 查询。在不处理通过 JQuery 添加的类之后

> ID：12649163
> 
> 赞同：1
> 
> 时间：2012-09-29T01:30:44.143
> 
> 标签：jquery

这个问题与我昨天发布的一个问题有关。链接 -http://stackoverflow.com/questions/12636348/how-to-add-a-different-class-to-the-same-class-in-jquery 。现在的问题和问题是我希望在 div 之后添加一个 div 并添加类。问题是我使用的脚本仅将 div 添加到现有/默认类名，而不是通过 JQuery 添加的类。脚本如下。

```
 $(document).ready(function(){$('.example').each(function(i){$(this).addClass("ex" + i);});

 $('.ex0').after(function(){return'<div class="afterdiv"><a class="afterdiva1" href="#" title="Text."></a><a class="afterdiva2" href="#" title="Text."></a></div>'}); 
```

默认输出为：

```
 <div class="example"></div> 
```

最终的 html 输出应为：

```
 <div class="example ex0"></div>
      <div class="afterdiv">
      <a class="afterdiva1"></a>
      <a class="afterdiva2"></a>
      </div> 
```

更新-我很抱歉没有澄清每个 div 必须是唯一的/每个类。真诚的道歉（我是新手在这里或其他任何地方寻求帮助）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T01:47:56.957

您应该将所有这些调用放入`.ready()`函数中。现在，第二行在 DOM 就绪回调之前执行（因为`.ready()`是异步函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T01:46:37.973

为什么不在 .each() 函数中执行代码？像这样：

```
$(document).ready(
function(){
$('.example').each(
function(i){
$(this).addClass("ex" + i).after('<div class="afterdiv"><a class="afterdiva1" href="#" title="Text."></a><a class="afterdiva2" href="#" title="Text."></a></div>');
});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T01:48:01.230

[检查小提琴](http://jsfiddle.net/sushanth009/tL39C/)

问题是 .insert 未包含在 DOM 就绪事件中

把它放在里面，应该可以正常工作..

它在这里工作..给你的类名一些背景颜色仔细检查。

# perl - 如何使用 perl 从 C++ 或 C 或 Java 中提取注释和函数名

> ID：12649168
> 
> 赞同：1
> 
> 时间：2012-09-29T01:31:21.043
> 
> 标签：perl

我正在处理一项任务，而且我对 Perl 真的很陌生。真的不是很懂。你们能指导我提取这三种文件（C、C++ 和 Java）的注释和函数名吗？

我已经尝试过这个：

```
use strict;
use warnings;
use File::Basename;
use File::Find;
use File::Slurp;
use Regexp::Common qw /comment/;
    my $fileName = "a.java";
    my $wordsIn = "";
    my $wordsIdentifier="";
    my $numRemoved = 0;

    #$wordsOut = `xscc.awk extract=comment prune=copyright $fileName`;
    $wordsIn = read_file($fileName) ;
    # Find all matches of comments, and put them into @arr
    my @arr = $wordsIn =~  m/$RE{comment}{Java}/g;
    my $wordsOut = join(" ", @arr);
    print "Comments:\n";
    print $wordsOut;
    $wordsIn =~ s/$RE{comment}{Java}//g;
    print "Identifiers:\n";
    print $wordsIn; 
```

它完美地获得了评论（即使我不知道如何！），但是为了检索标识符和方法名称，我应该为 $RE{comment}{Java} 做什么

问候 Ehsan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:25:52.333

Regexp::Common 没有为它提供正则表达式，所以你必须自己做。由于可能格式的数量，这非常复杂。例如，在 C 中，您需要搜索：

```
<type> <identifier - save this> (<comma-separated list of types and identifiers>)
{ 
```

但是你不一定知道所有可能的类型（包含文件中的 typedefs），并且在可选的空格和注释之间，更不用说旧式的函数定义，可能很难捕捉到每一种情况。

事实证明，为 C 语言编写词法分析器实际上非常困难，而且当您不知道诸如 typedef 之类的东西可能包含很多包含文件并且您不实现整个预处理器时，这更加困难。不适用于您的情况的常见示例是`(A)*B`，如果不检查 typedef 的所有包含，您无法判断它是标量取消引用的乘法还是类型转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T02:44:52.933

有两种基本方法：使用预先存在的解析器或使用编译器为您提供所需的信息。

对于 C，有[C::Scan](https://metacpan.org/module/C%3a%3aScan)从 C（以及许多 C++）中获取函数声明（以及更多）。或者您可以让[gcc](http://www.gccxml.org/HTML/Index.html)为您提供所需的信息。

至于Java，那就更难了。一种可能性是弄清楚[Inline::Java](https://metacpan.org/module/Inline%3a%3aJava)是如何做到的。或者，您可以尝试使用[Eclipse 中的解析器](http://www.ibm.com/developerworks/opensource/library/os-ast/)。

挖掘现有“足够好”正则表达式的可能性来自[TextMate](http://macromates.com/)或其他执行语法突出显示的编辑器。我提到 TextMate 是因为我发现它的语言解析是最容易理解的。您可能可以挖掘他们的 Java 包以获取必要的正则表达式。

如果这只是一个正则表达式练习，那么教训是这种事情对于正则表达式来说太复杂了。对于语言，您需要该语法的语法和解析器。

# c - C Pipe：父级在子级结束之前从子级读取

> ID：12649170
> 
> 赞同：5
> 
> 时间：2012-09-29T01:31:59.277
> 
> 标签：c, fork, pipe

下面的代码显示了子进程如何写入**管道****端**以及父进程如何从另一端**读取。**在我对代码进行试验后，我注意到只有在子进程**终止**后，父进程才能**读取**数据。

**有没有办法强制父进程在子进程调用write()**后立即进入前台并读取数据？有没有办法在不终止孩子的情况下读取数据？

```
#include <stdio.h> /* For printf */
#include <string.h> /* For strlen */
#include <stdlib.h> /* For exit */

#define READ 0 /* Read end of pipe */
#define WRITE 1 /* Write end of pipe */
char *phrase = "This is a test phrase.";
main(){
    int pid, fd[2], bytes;
    char message[100];

    if (pipe(fd) == -1) { /* Create a pipe */
        perror("pipe"); 
        exit(1); 
    }
    if ((pid = fork()) == -1) { /* Fork a child */
        perror("fork"); 
        exit(1); 
    }
    if (pid == 0) { /* Child, writer */
        close(fd[READ]); /* Close unused end */
        write(fd[WRITE], phrase, strlen(phrase)+1);
        close(fd[WRITE]); /* Close used end */
    } 
    else { /* Parent, reader */
        close(fd[WRITE]); /* Close unused end */
        bytes = read(fd[READ], message, sizeof(message));
        printf("Read %d bytes: %s\n", bytes, message);
        close(fd[READ]);  /* Close used end */
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T01:39:05.453

你不正确。尝试`sleep(120)`在关闭“子”部分中管道的写入端之前添加调用并运行您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:20:22.100

第一个可以使用一些同步技术来完成。*意味着孩子应该等到父母读取数据或在您的代码中父母终止。我在用于此同步的代码中添加了第二个管道。*

写入后的孩子只是等待从该管道读取并在读取中被阻塞。

只有当父级终止时，函数 read 才会返回（此处为 0），因为现在读取子级将获得文件结束通知，这是由于父级退出后管道在父级中的写入端关闭。（写端会在父级终止后自动关闭，我没有明确添加）

你的第二个要求

```
I also want the parent to read the data immediately after the child whites to
the pipe. 
```

为什么你认为这没有发生？应该总是有一些分钟的时间滞后。

```
#include <stdio.h> /* For printf */
#include <string.h> /* For strlen */
#include <stdlib.h> /* For exit */

#define READ 0 /* Read end of pipe */
#define WRITE 1 /* Write end of pipe */
char *phrase = "This is a test phrase.";
main(){
  int pid, fd[2], bytes;
  char message[100];
  int fd1[2];
  char buffer[1];
  int ret;

  if (pipe(fd) == -1) { /* Create a pipe */
    perror("pipe");
    exit(1);
  }
  if (pipe(fd1) == -1) { /* Create a pipe */
    perror("pipe");
    exit(1);
  }
  if ((pid = fork()) == -1) { /* Fork a child */
    perror("fork");
    exit(1);
  }
  if (pid == 0) { /* Child, writer */
    close(fd[READ]); /* Close unused end */
    close(fd1[WRITE]);/*Close write  end of the 2nd pipe*/
    write(fd[WRITE], phrase, strlen(phrase)+1);
    close(fd[WRITE]); /* Close used end */
    /*For synchronisation let the child try to
    read from the 2nd pipe. 
    The function read, will return 0 only when the
    parent terminates and in this we are
    not interested if at all anything read or not.
    The read statement below, will return only if the
    parent has terminated, thus ensures that the
    child terminates only after the parent*/
    ret = read(fd1[READ],buffer, 1);
  }

else { /* Parent, reader */
    close(fd[WRITE]); /* Close unused end */
    close(fd1[READ]); /*Close read end of the 2nd pipe*/
    bytes = read(fd[READ], message, sizeof(message));
    printf("Read %d bytes: %s\n", bytes, message);
    close(fd[READ]);  /* Close used end */

   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T06:36:10.933

您应该初始化 fd[0]=0 和 fd[1]=0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-22T14:54:00.823

以下代码演示，在孩子写入管道后，父母可以读取管道。不需要子进程关闭管道或终止。

```
#include <stdio.h> /* For printf */
#include <string.h> /* For strlen */
#include <stdlib.h> /* For exit */

#define READ 0 /* Read end of pipe */
#define WRITE 1 /* Write end of pipe */
char *phrase = "This is a test phrase.";
main(){
    int pid, fd[2], bytes;
    char message[100];

    if (pipe(fd) == -1) { /* Create a pipe */
        perror("pipe"); 
        exit(1); 
    }
    if ((pid = fork()) == -1) { /* Fork a child */
        perror("fork"); 
        exit(1); 
    }
    if (pid == 0) { /* Child, writer */
        close(fd[READ]); /* Close unused end */
        write(fd[WRITE], phrase, strlen(phrase)+1);
        sleep(10);
        close(fd[WRITE]); /* Close used end */
        sleep(20);
    } 
    else { /* Parent, reader */
        printf( "child ipd = %d\n\r", pid);
        close(fd[WRITE]); /* Close unused end */
        bytes = read(fd[READ], message, sizeof(message));
        printf("Read %d bytes: %s\n", bytes, message);
        close(fd[READ]);  /* Close used end */
        sleep(10);
    }
} 
```

# xcode - 我使用模拟器它没有崩溃，但是当应用商店测试我的应用时它崩溃了。（iOS 6）

> ID：12649173
> 
> 赞同：0
> 
> 时间：2012-09-29T01:33:30.320
> 
> 标签：xcode, ios6

他们说：“当用户在运行 iOS 6.0 的 iPhone 4 和 iPad（第三代）上选择主菜单上的最后一个按钮时，应用程序就会崩溃。”

当然我测试过，但一切正常。下面的代码有错吗？

```
NSDictionary *soundSetting;
soundSetting = [NSDictionary dictionaryWithObjectsAndKeys:
                [NSNumber numberWithFloat: 44100.0],AVSampleRateKey,
                [NSNumber numberWithInt: kAudioFormatMPEG4AAC],AVFormatIDKey,
                [NSNumber numberWithInt: 2],AVNumberOfChannelsKey,
                [NSNumber numberWithInt: AVAudioQualityHigh],
                AVEncoderAudioQualityKey,nil];

NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES)objectAtIndex: 0];
//Spades
soundFileURLSpades = [NSURL fileURLWithPath:[docDir
                                                    stringByAppendingString:     @"soundSpades.caf"]];
self.audioRecorderSpades = [[AVAudioRecorder alloc]
                      initWithURL: soundFileURLSpades
                      settings: soundSetting
                      error: nil]; 
```

# mysql - 是否可以优化我的 SQL 请求？如果是的话怎么办？

> ID：12649176
> 
> 赞同：1
> 
> 时间：2012-09-29T01:34:04.467
> 
> 标签：mysql

我的 Nexuiz Statistics Web 项目中的 MySQL 请求有问题。我不想实时生成统计表，请求会浪费时间（有 310000 个条目，请求需要 3 到 7 秒）这是我要优化的 SQL 请求等。

```
SELECT n.name, d.times_kill, d.times_dead, d.kd, d.times_cap, d.points
FROM
( SELECT f.player player, f.times_kill, f.times_dead, f.kd, g.times_cap, ((f.points * (7 / 3)) + POW(g.times_cap, 1.5)) points
FROM
    ( SELECT k.player player, k.times_kill, d.times_dead, (k.times_kill / d.times_dead) kd, ((k.times_kill / d.times_dead) * k.times_kill) points
    FROM
        ( SELECT player, count( * ) times_kill
        FROM `nexstat`.`dc_events`
          WHERE event = 'KILL' AND server = '2'
          GROUP BY player
          ORDER BY times_kill DESC
        ) k
        JOIN
        ( SELECT player, count( * ) times_dead
        FROM `nexstat`.`dc_events`
          WHERE event = 'DEAD' AND server = '2'
          GROUP BY player
          ORDER BY times_dead DESC
        ) d
        ON d.player = k.player
        ORDER BY points DESC
    ) f
    JOIN
    ( SELECT player, count( * ) times_cap
    FROM `nexstat`.`dc_events`
        WHERE event = 'CAP' AND server = '2'
        GROUP BY player ORDER BY times_cap DESC
    ) g
    ON f.player = g.player
) d
JOIN
( SELECT * FROM `nexstat`.`dc_players` WHERE main = 1
) n
ON d.player = n.id
GROUP BY id
ORDER BY points DESC 
```

数据库模型在这里：

```
CREATE TABLE IF NOT EXISTS `dc_events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `player` int(11) NOT NULL,
  `event` enum('CAP','KILL','DEAD','DROP','PICKUP','CHANGE','JOIN','LEAVE') NOT NULL,
  `param0` int(11) DEFAULT NULL,
  `server` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `event` (`event`),
  KEY `server` (`server`),
  KEY `player` (`player`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 ROW_FORMAT=FIXED AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `dc_players` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `main` tinyint(1) NOT NULL DEFAULT '1',
  `name` varchar(512) NOT NULL,
  `website` varchar(512) NOT NULL,
  `email` varchar(512) NOT NULL,
  `clan` varchar(512) NOT NULL,
  `country` varchar(2) NOT NULL,
  UNIQUE KEY `name` (`name`),
  KEY `website` (`website`),
  KEY `email` (`email`),
  KEY `id` (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

如果有人帮助我会很酷；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T02:10:18.840

简化查询可能会有所帮助。由于我不完全理解它的逻辑，我可能会离开某个地方。但是，我认为下面的内容基本上与您的大查询一样，但没有所有派生表。额外的`ORDER BY`子句会花费你很多，因为它们会迫使 MySQL 反复检查数据，而不是最后只做一次。它们也不能帮助您回答问题，因为数据只是按最外层查询中的点重新排序。

```
SELECT dc_player.name AS player_name,
       times_kill,
       times_dead,
       times_cap,
       times_kill / times_dead AS kd,
       ((((times_kill / times_dead) * times_kill) * (7 / 3)) + POW(times_cap, 1.5)) AS points
FROM (
    SELECT player,
           SUM(IF(event='KILL',1,0)) AS times_kill,
           SUM(IF(event='DEAD',1,0)) AS times_dead,
           SUM(IF(event='CAP',1,0)) AS times_cap
    FROM dc_events
    GROUP BY player
) AS events
JOIN dc_player
  ON dc_player.id = events.player
ORDER BY points; 
```

你为什么在 2012 年使用 MyISAM？InnoDB 现在是默认的，它支持更多的索引选项和引用完整性（你会想要的，因为你在这里有一个外键关系）。您至少希望在 dc_events.player 上有一个索引（默认情况下，InnoDB 外键是一个索引）。

# java - Java如何快速比较两个集合在Java中是否完全相同？

> ID：12649178
> 
> 赞同：1
> 
> 时间：2012-09-29T01:34:15.687
> 
> 标签：java, collections, arraylist, hashset

Java如何快速比较两个集合在java中是否完全相同？

例如：

如果此集合为 Set，则比较它们是否包含相同的对象并且它们的大小是否相同。

代码如下所示

```
public boolean isSameSets(Set<T> set1, Set<T> set2){

    if (set1.size() != set2.size()) {
        return false;
    }

    return set1.containAll(set2) && set2.containAll(set1);
} 
```

但是如果集合是列表，因为列表是排序集合，我们可以迭代比较每个元素，我认为这种方式不是最好的，请谁能告诉我如何快速比较它们？

==================================================== ======

谢谢大家，其实Collection equals方法可以做到，包括Set和List。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T01:37:37.273

Collection`equals(Object)`方法应该为您执行此操作。[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#equals%28java.lang.Object%29)准确解释了“等于”对于 Collection 的含义，并且针对扩展 Collection 的接口进一步细化了语义。

不同的集合类将有自己的此方法的实现，针对它们各自的语义模型和表示进行调整。例如，`equals`a 上的方法`List`会考虑元素顺序，但`equals`a 上的方法`Set`通常不会。

有人问：

> 我们不能使用 containsAll(Collection)。

一般来说，没有。例如，具有相同元素的两个列表不一定相等。您还必须考虑列表顺序。（此外，使用`containsAll`来比较列表是a`O(N^2)`的有效`equals`实现`List`应该是`O(N)`......在最坏的情况下。）

这同样适用于使用`retainsAll`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T01:38:41.853

该[`HashSet.equals`](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractSet.html#equals%28java.lang.Object%29)方法已经进行了比较，以确保每组中有完全相同的元素。[`ArrayList.equals`](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractList.html#equals%28java.lang.Object%29)除了它还检查排序之外，它的作用相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T01:36:51.350

您可以使用[Collection.retainAll()](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#retainAll(java.util.Collection))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-16T09:32:16.220

还可以考虑使用 Google Guava 库：

```
elementsEqual(Iterable, Iterable) 
```

如果可迭代对象具有相同顺序的相同元素，则返回 true。即使集合是没有预定义顺序的HashSet，但元素个数相同且元素相等，在迭代过程中你会发现两个集合的顺序是相同的，提供了正确的`hashCode`和`equals`方法。

# c++ - 无限大小的整数？

> ID：12649181
> 
> 赞同：6
> 
> 时间：2012-09-29T01:34:35.970
> 
> 标签：c++, integer, biginteger, memory-limit

在 Python 中，我可以编写一个程序来计算无限大小的整数。就在前几天，我做了百万分之一的斐波那契数，它太大了，无法放入控制台。如果可以在 Python 中做到这一点，据我所知，它是用 C 编写的，那么如何在 C++ 中做同样的事情呢？它必须是可能的，否则我看不出它是如何在 Python 中完成的。我也相信在 Java/C# 中有类似的东西叫做 Biginteger，但我找不到任何说明它如何在 C++ 中实现的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T01:40:20.260

在 C/C++ 中一切皆有可能。您可以编写自己的名为 bigInteger 的类并使用数组来表示数字，但最好的方法是使用已经编写的库来处理大数字，因为这些库经过了很好的优化，其中很大一部分是用 asm 编写的额外的速度。这里有一些例子：

*   [GMP（它还提供了一个 C++ 接口）](http://gmplib.org/manual/C_002b_002b-Interface-General.html)

*   [http://www.imach.uran.ru/cbignum/](http://www.imach.uran.ru/cbignum/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T01:38:23.693

[Wikipedia](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic#Libraries)列出了许多您可以使用的库。那些被称为 C 库的也可以在 C++ 中使用。C++ 没有内置的 bigint 类型。

正如该参考资料所示，在询问之前，谷歌通常是一个好主意，检查维基百科而不是最不重要的，检查常见问题解答。

但是，在这种情况下，莫名其妙地，[FAQ](http://www.parashift.com)似乎没有提供答案。

# cocoa - 什么会阻止 NSTableView 可排序？

> ID：12649185
> 
> 赞同：1
> 
> 时间：2012-09-29T01:36:14.243
> 
> 标签：cocoa, nstableview, nsmutabledictionary, nsarraycontroller

我继承了一个包含 NSTableView 的可可项目，单击列标题不会对视图进行排序，但我希望列是可排序的。我正在使用可可绑定。

我试图使列可排序的事情：

*   确保在列属性上选中“创建排序描述符”。
*   验证是否在 ArrayController 属性中添加了正确的键（数组正在排列 NSMutableDictionaries。也许这会导致问题？）
*   验证列的排序键是否正确（“名称”）和选择器是否正确（“比较：”）

当我单击标题时，还有什么可能导致列无法排序？

# php - Jquery $.post 方法不起作用

> ID：12649188
> 
> 赞同：-4
> 
> 时间：2012-09-29T01:36:52.073
> 
> 标签：php, javascript, jquery

背景：我使用 Apache 和 XAMPP 来设置 localhost。我对编程比较陌生，对 PHP 也很陌生。我正在尝试调用与我的 Javascript 文件位于同一目录中的 PHP 文件，但我使用的代码似乎不起作用。这是一个示例：

Javascript：

```
function SendPhps(){
var point = 2;'
$.post('json.php',point);}
$(document).ready(function(){
SendPhps();
}); 
```

PHP：

```
<?php
if(!empty($_POST)){
file_put_contents('example.txt','Itworks');
}
?> 
```

编辑：好的，我已经将我的脚本修改为更简单，但打开我的页面仍然不会触发任何警报框：

PHP：

```
<?php
    if (empty($_POST))
        echo "empty";
    else
        echo "not empty";
?> 
```

Javascript：

```
$(document).ready(function() {
    var point = {'param':2};
    $.post(
        'json.php', 
        point, 
        function(data){
            alert(data);
        }
    );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T01:59:39.637

您的 var 点需要具有比这更有意义的结构。“2”对帖子意味着什么？真的没什么。给它一个名字。IE

```
 var point = {'html':2}; 
```

并且由于您只是在学习，因此不要尝试一次执行多项操作，例如写入文件。把事情简单化。只需让您的 PHP 回显您的结果。

这是 jsfiddle 使用他们的 'echo/html' URL 的示例 - 它只是回显您为 'html' 参数设置的任何值。

[http://jsfiddle.net/k5ygv/](http://jsfiddle.net/k5ygv/)

# java - 无法使用 runOnUiThread 调用 setContentView？

> ID：12649191
> 
> 赞同：0
> 
> 时间：2012-09-29T01:37:04.543
> 
> 标签：java, android

我不能在线程内执行此操作有什么原因吗？我仍然收到“无法在未调用 Looper.prepare() 的线程内创建处理程序”。

```
_currentActivity.runOnUiThread(new Runnable()
{
    public void run()
    {
        _currentActivity.setContentView(_nextScreen);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:04:07.717

您不能`UI`在非`UI`线程上更新作品。

如果您希望更新`UI`到用户，您必须需要实现`Handler`或任一`UI`线程。

# css - 如何更改所选文本的实际颜色？

> ID：12649193
> 
> 赞同：0
> 
> 时间：2012-09-29T01:37:20.577
> 
> 标签：css, selection

当您选择此文本时，您将看到一个蓝色的选择字段。但这不是我的问题的重点。选择此文本后，如果您使用的是 PC，实际文本的颜色将变为白色。在 Mac 上，它保持以前的颜色。这就是我想要改变的颜色。

有没有跨浏览器的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T01:49:09.063

您可以使用`::selection`伪选择器：

```
::selection {
    background: rgb(60, 60, 60);
    color: rgb(245, 245, 245);
}
​
::-moz-selection {
    background: rgb(60, 60, 60);
    color: rgb(245, 245, 245);
}​ 
```

由于[解析规则](https://developer.mozilla.org/en-US/docs/CSS/%3a%3aselection)，您需要复制您的 CSS 并重新添加前缀：

> Gecko 是唯一需要前缀的引擎。*由于 CSS 解析规则需要在遇到无效伪元素时删除整个规则，因此必须编写两个单独的规则*：`::-moz-selection, ::selection {...}`. 该规则将在非 Gecko 浏览器上被删除，因为`::-moz-selection`它们对它们无效。

**演示：http: [//jsfiddle.net/Blender/Hs7bQ/](http://jsfiddle.net/Blender/Hs7bQ/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T02:45:34.637

我已经更新了小提琴，因为你不能把两个选择器放在一个。-moz-selection 必须是它自己的。 [更新了 jsFiddle](http://jsfiddle.net/Hs7bQ/3/)

[Mozilla 开发人员 ::selection](https://developer.mozilla.org/en-US/docs/CSS/%3a%3aselection)

# css - HTML表格的Firefox CSS问题

> ID：12649195
> 
> 赞同：0
> 
> 时间：2012-09-29T01:37:31.303
> 
> 标签：css, firefox, layout

我是编码新手，并且遇到了我的第一个障碍。我一直在寻找两天的答案，到目前为止，我所看到的并不是唯一一个，但是我尝试使用或添加一些我见过人们使用的技术，此时我被难住了。

我的问题只出现在 Firefox 中，并且在 IE 和 Chrome 中显示得非常好。我创建了一个比较图表，我的表格似乎被向上推，所有单元格都没有对齐。我尝试将宽度更改为 100%，我正在使用 CSS 重置，因此从一开始就将填充和边距设置为零，并且我还尝试了边框间距。请帮助我在下面附上了我的代码，我有一个屏幕截图，但由于我是新手，所以无法附上。

我在 Windows 7 操作系统上使用 Firefox 15.0 版

我的 HTML 的一部分，我可以添加更多需要的内容

```
<div id="tblCenter">
            <table class="contItems">
            <tr>
            <td class="yes"><div class="row1"></div></td>

            <td class="yes"><div class="row2"></div></td>
            <td class="yes"><div class="row1"></div></td>
            </tr>
            <tr>
            <td class="yes"><div class="row1"></div></td>
            <td class="yes"><div class="row2"></div></td>
            <td class="yes"><div class="row1"></div></td>
            </tr>
            <tr>
            <td class="yes"><div class="row1"></div></td>
            <td class="yes"><div class="row2"></div></td>
            <td class="yes"><div class="row1"></div></td>
            </tr>
            <tr>
            <td class="yes"><div class="row1"></div></td>
            <td class="yes"><div class="row2"></div></td>
            <td class="yes"><div class="row1"></div></td>
            </tr>
            <tr> 
```

我页面的表格和设计部分的 CSS

` @charset "utf-8"; /* CSS 文档 */

```
 #seoBox{
                width: 950px;
                margin: auto;
                padding: 0px;
            `enter code here`}
            #seoContent{
                margin: 25px 10px 25px 5px;
            }
            #seoContent h1 p tr td{
                font-family:Arial, Helvetica, sans-serif;
                color:#000000;
            }
            #seoContent p{
                padding: 0 0 10px 0;
            }
            #seoContent #bulletPoint{
                width: 500px;
                padding: 20px 20px 0 20px;
            }
            #seoContent #bulletPoint ul{
                display: block;
                list-style-type:none; 
            }

            #bulletPoint li{
                background: url(../styleImages/Star.png) top left no-repeat ;
                padding: 0 0 7px 25px;
            }
            #packages{
                width: 935px
            }
            #sideBar{
                width: 190px;
                float: left;
                margin-top: 92px;
                font-weight:bold;
            }
            #sideBar td{
                height: 25px;
                padding: 8px 0 0 0;
                background: url(../styleImages/tbl_line_lght.png) bottom left no-repeat;
            }
            #mainTbl{
                width: 664px;
                text-align: center;
            }
            #mainTbl .contItems{
                border-collapse:collapse;
                margin-top: 0px;
                font-weight: bold;
                font-size: 16px;
            }
            .contItems td{
                width: 220px;
                height: 25px;
                padding-top: 8px;
            }
            .row1{
                width: 167;
                height: 3px;
                background:url(../styleImages/tbl_line_lght.png) no-repeat;
                position: relative;
                bottom: -12px;
                left: 20px;
                }
            .textR1{
                width: 167;
                height: 3px;
                background:url(../styleImages/tbl_line_lght.png) no-repeat;
                position: relative;
                bottom: -20px;
                left: 20px;
            }
            .row2{
                width: 167;
                height: 3px;
                background: url(../styleImages/tbl_linedrk.png) no-repeat;
                position: relative;
                bottom: -12px;
                left: 20px;

            }
            .textR2{
                width: 167;
                height: 3px;
                background:url(../styleImages/tbl_linedrk.png) no-repeat;
                position: relative;
                bottom: -20px;
                left: 20px;
            }
            .contItems .yes{
                text-align: center;
                background: url(../styleImages/green_yes.png) center center no-repeat;
            }
            .contItems .no{
                text-align: center;
                background: url(../styleImages/red_no.png) center center no-repeat;
            }
            #packbg{
                width: 730px;
                height: 1100px;
                background: url(../styleImages/tblbg.png) top left repeat-x;
                float:left;
                margin-bottom: 50px;
            }
            #tblTop, #tblCenter, #tblRibbon, #tblBottom{
                margin-left: 25px;
            }
            #tblTitle{
                width: 535px;
                height: 50px;
                margin-left: 80px;
                background: url(../styleImages/Tbl_title.png) bottom left no-repeat;
            }
            #tblTop{
                width: 665px;
                height: 40px;
                background: url(../styleImages/tbl_top.png) no-repeat top left;

            }
            #tblCenter{
                width: 665px;
                height: 910px;
                background: url(../styleImages/tbl_center.png) repeat-y top left;
            }
            #buyButton {
                margin-left: 35px;
                width:650px;
                height: 42px;
            }
            .buyNow{
                width: 121px;
                height: 42px;
                background: url(../styleImages/Buy_Now.jpg) top center no-repeat;
                border: 0px;
                margin: 0 45px;
            }
            #tblRibbon{
                width: 650px;
                height: 65px;
                background: url(../styleImages/Ribbon.png) no-repeat;
                position: relative;
                top: -140px;
                left: 8px;
            }
            #tblBottom{
                width: 665px;
                height: 33px;
                background: url(../styleImages/tbl_bottom.png) no-repeat top left;
            }
            /* end Table CSS */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:31:05.003

根据规范，表格内部元素（行、单元格）的相对定位具有未定义的行为。因此，如果您这样做，则需要自担风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T02:37:22.580

这是一个[jsFiddle](http://jsfiddle.net/dhdDt/)，我相信您的问题是使用`position:relative`. 我把那些（和img背景）拿出来了。我不确定你真正想要什么设计，因为`td,div`和 id/class 似乎有点矫枉过正。

更新

您没有使用 imgs 在 td 上设置宽度/高度。您还需要在 td 和内部 div 之间设置一些间距。如果背景 img 是 50x50，那么您的内部 div 需要 50px 的填充，加上或减去样式偏好。

您的示例也没有内容 = 0x0 的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T16:58:02.320

谢谢大家的帮助我解决了这个问题，这是由于firefox没有在表格单元格空间中添加填充引起的。我读到一些firefox在填充方面存在一些问题的地方，所以我解决这个问题的方法是在整个表格周围添加一个红色边框。这帮助我看到了宽度和高度，我接下来表示 firefox 忽略了填充设置，因此我将 8px 的填充添加到表格的高度并删除了所有填充。正如 KnowHowSolutions 建议的那样，我检查了相对位置，并意识到一旦我调整了高度，底部的位置就错了。在所有浏览器中进行一些调整和测试后，一切都很好。非常感谢您花时间提供帮助。

# sql - Joomla 表单字段类型 sql="....WHERE 条件"？

> ID：12649198
> 
> 赞同：3
> 
> 时间：2012-09-29T01:37:58.720
> 
> 标签：sql, forms, joomla, components, field

在 Joomla 2.5 中，如何在 SQL 查询中使用条件“WHERE”执行表单字段类型“SQL”？

例子：

```
<field name="catid" type="sql" query="SELECT id, title FROM #__table WHERE {condition}" /> 
```

joomla 文档中没有关于此的任何内容。我找到了这个链接，但它没有提到在 SQL 查询（[http://docs.joomla.org/SQL_form_field_type](http://docs.joomla.org/SQL_form_field_type)）中使用 WHERE 条件的任何内容。

有人可以告诉我这在Joomla中是否可行吗？

我有一张带有产品的桌子和一张带有与品牌相关的商店的桌子。如果我编辑一家商店，我想显示一个包含该商店品牌所有产品的组合框。那可能吗？SELECT * FROM #__products WHERE brand = {与我选择进行编辑的商店关联的品牌 ID} 这可能吗？

我可以使用自定义表单字段来做到这一点=）

[http://docs.joomla.org/Creating_a_custom_form_field_type](http://docs.joomla.org/Creating_a_custom_form_field_type)

谢谢RHR的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-19T03:34:06.700

这是我的解决方案：

您可以通过执行以下操作完全替换查询：

1）定义你的查询：

```
$query = 'SELECT * from table_name WHERE table_id = '.$your_value; 
```

2）更新您的表单字段属性：

```
$this->form->setFieldAttribute('field_name', 'query', $query); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:30:18.387

是的，有可能

我使用的代码

```
<fields name="request">
 <fieldset name="request" >
<field name="id" type="sql" query="SELECT id , title FROM #__table name where published=1" multiple="single" key_field="id" value_field="title" class="inputbox" label="fieldlabel" description="fielddesc" required="true" />
</fieldset> 
</fields> 
```

您可以通过另一种方式作为[自定义字段执行此操作](http://docs.joomla.org/Creating_a_custom_form_field_type)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T20:33:59.637

只是有同样的问题。经过一番挖掘，我发现它实际上是可能的。

**1\. 步骤 - 你需要一个自定义表单域：（我将其命名为 vssql.php）**

`JFormHelper::loadFieldClass('sql');`

 ````
class JFormFieldVSSQL extends JFormFieldSQL
{
    /**
     * The form field type.
     */
    public $type = 'VSSQL';

    /**
     * Overrides parent's method
     */
    protected function getOptions()
    {
        // Get the ID
        $query_id = $this->form->getField((string) $this->element['query_id']);

        // Override query
        $this->element['query'] = str_replace('{query_id}', (string) $query_id->value, (string) $this->element['query']);

        return parent::getOptions();
    }
} 
````  `**2\. 步骤 - 你需要知道热才能使用它：**

在您的 JForm xml 中添加：

```
  <字段
    名称=“字段名称”
    类型="vssql"
    query_id="user_id"
    query="SELECT id AS value, CONCAT(street,' ',city) AS 地址 FROM #__addresses WHERE user_id = {query_id}"
    label="用户地址列表"
    必需="必需" />

```

在您的 SQL 查询中，占位符**{query_id}**将替换为**query_id**中指定的参数的实际值，在本例中为 *user_id*。这将从分配给给定用户的某个表中返回地址列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-29T11:18:49.603

@WooDzu 解决方案的一些更新：

```
class JFormFieldICategory extends JFormFieldSQL
{

    public $type = 'ICategory';

    /**
     * Overrides parent's method
     */
    protected function getOptions()
    {
        // Get the ID
        $cat_id = $this->form->getField((string) $this->element['cat_id']);

        // Override query
        $this->query = str_replace('{cat_id}', (string) $cat_id->value, (string) $this->element['query']);
        echo $this->query.' test '; //exit();

        return parent::getOptions();
    } 
```

}

类型应该是公共的，并且查询应该分配给 $this->query。效果很好！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-24T20:52:32.870

这适用于 Joomla 2.5+ 和 3.x+ 中的我（我用它从 #__extensions 表中选择用户插件）作为 WHERE 条件：

```
<field name="plugin" type="sql" query="SELECT extension_id as value, name as title FROM #__extensions WHERE type = 'plugin' AND folder = 'user'" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-21T10:30:44.823

我有同样的问题。您不能根据变量创建 where 条件，只能基于常量：(

但是您可以使用 form->setField 函数更改表单字段并重新加载视图中的字段。多亏了这一点，您可以在字段 sql 中创建任何条件。

```
$NewFieldDefinition=new SimpleXMLElement('<field name="catid" type="sql" query="SELECT id, title FROM #__table WHERE title='.$condition.'" />');
$this->form->setField($NewFieldDefinition, null, true); 
````

# macos - 如果文件更改，如何在 Mac OS X 上实现“刷新”所有查看应用程序？

> ID：12649201
> 
> 赞同：1
> 
> 时间：2012-09-29T01:38:44.047
> 
> 标签：macos, cocoa

很神奇的是，在TextMate上，我可以在本地html文件中更改一行（Mountain Lion上的网络共享，使用url之类的url `http://macmini.local/~mike/page.html`），然后在TextMate里面按`Cmd``r`右键，Chrome、Firefox和Safari上的网页都会自动刷新内容。我想知道它是如何完成的，它是否取决于应用程序是否正在观察该文件（或者它可以选择不观察）。听说iOS有KVO，功能类似于Mac OS X上的绑定，但不知道上面的行为是不是OS X绑定完成的？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T05:03:55.943

KVO 和绑定适用于对象，而不是文件。

有几种方法可以通知其他应用程序文件已更改：

*   [`FNNotify`](http://developer.apple.com/library/mac/documentation/Carbon/Reference/File_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/FNNotify)是旧文件管理器中已弃用的功能。它需要一个`FSRef`. 还有`FNNotifyByPath`; 你可以猜到这需要什么。
*   [`-[NSWorkspace noteFileSystemChanged:]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWorkspace/noteFileSystemChanged%3a)采用路径并同样通知可能正在查看文件的任何内容。
*   [文件协调](http://developer.apple.com/library/mac/documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileCoordinators/FileCoordinators.html#//apple_ref/doc/uid/TP40010672-CH11-SW1)是一个独立的系统。它*可能*与上述更原始的方法集成，但我不确定也不会指望它。文件协调员处理通知；文件演示者（包括基于文档的应用程序中的文档）处理观看。

*某些*`kevent`应用程序会在您不执行上述任何操作的情况下注意到更改，因为它们具有使用、、、`dispatch_source`FSEvents 或其他方式查看文件的较旧的手写代码，但大多数应用程序不采取此类额外措施。

如果您的应用程序是基于文档的，则您无需执行任何操作。文件机器为您处理一切。您只需像往常一样实现读取和写入方法。

对于非基于文档的应用程序，我将首先实现文件协调，并且仅`noteFileSystemChanged:`在见证 FC 没有通知我关心的应用程序后才使用。

# assembly - 当我将它从堆栈中弹出时，组装推送的寄存器 RAX 不一样？

> ID：12649211
> 
> 赞同：0
> 
> 时间：2012-09-29T01:40:08.770
> 
> 标签：assembly, stack, 64-bit, nasm, cpu-registers

我目前正在 64 位机器上编写程序集 NASM 以打印给定输入的阶乘，然后返回输入。该程序可以正确打印出阶乘值，但返回值未返回输入。是的，代码很糟糕，我不希望你简单地重写整个事情。（这是我的作业。）我只想有人解释为什么我的返回寄存器（rax）没有保留它从一开始就拥有的值。

```
extern read_input
extern print_int
call read_input

push rax   ;save n
mov rcx, 1 ;counter
push rcx   ;save counter
push rdi   ;save print int

jmp test

print:
pop rdi
imul rdi, rcx ;multiply by current counter
push rdi      ;save our multiplication factor
call print_int

pop rdi
pop rcx 
pop rax    ;restore trashed variables
add rcx, 1 ;increment counter by 1
push rax   ;push stuff back on stack
push rcx
push rdi

jmp test

test:
cmp rcx, rax
jle print

pop rax 
pop rcx 
pop rdi ;clear stack
ret 
```

输出：

```
Please enter an input value:
read_input> Returning 4 (0x4)
Printing integer 1 (0x1)
Printing integer 2 (0x2)
Printing integer 6 (0x6)
Printing integer 24 (0x18)
Program complete.  Return 24 (0x18) 
```

我希望它返回我的输入，在本例中为 4。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:05:20.927

推送和弹出的顺序是错误的。

推动：

```
push rax   ;save n
mov rcx, 1 ;counter
push rcx   ;save counter
push rdi   ;save print int
...
push rax   ;push stuff back on stack
push rcx
push rdi 
```

流行音乐：

```
pop rdi
pop rcx 
pop rax    ;restore trashed variables
...
pop rax 
pop rcx 
pop rdi ;clear stack
ret 
```

最后`rax`和`rdi`被交换，哎呀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T02:11:40.743

问题是，堆栈中的位置没有名称或标识符。您必须以相同的顺序推送和弹出。当您说`pop rax`时，处理器不会说“由 发出的最后一个条目在哪里`push rax`？”，而是说“要推送的最新内容在哪里？”。所以你的堆栈看起来像这样（假设 rax 1, rbx 2, rcx 3）：

```
0x0001 #push rax
0x0002 #push rbx
0x0003 #push rcx
  |
  \----- This is the value retrieved by pop rax 
```

只需遵循以下规则：始终以与弹出它们相同的顺序推送它们，除非您明确尝试切换值（最好使用 来完成`xchg`）。

注意：按错误的顺序做事可以用来设置`rflags`寄存器之类的东西的值：

```
push 0x0000000000000000 ;New value for rflags
popf ;Pop it into rflags 
```

# azure-table-storage - 我们如何验证 Azure 表存储列的唯一性？

> ID：12649212
> 
> 赞同：2
> 
> 时间：2012-09-29T01:40:08.717
> 
> 标签：azure-table-storage, unique-constraint

Azure 表存储强制执行的唯一主键/唯一性验证是分区键 + 行键。如果我希望任何其他列是唯一的，我需要在应用层检查这个条件。

```
if(service.GetEmailAddress(emailAddress) == null) {
   // email address is not yet registered by a user
   // persist user data to the database
}
else
{
   // display an error message
} 
```

我很好奇的是，如果有 X 个并发用户试图将相同的列值保存到同一个表中会发生什么。确保在没有 UNIQUE 约束的特定列下方没有输入重复值的安全方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T01:57:13.483

据我所知，Azure 表存储并非为此目的而设计。正如他们所说，Azure 表存储的目标是：

> 存储数据以实现高效检索和持久性

因此，鉴于我认为这可能不是您正在寻找的解决方案，我认为您应该评估移动数据 Azure SQL 的可能性。因为在 Azure 表存储（或任何其他 NoSQL 实现）中，COLUMN 的概念没有太大价值，因为您可以在同一个表中保存不同类型的实体。

进一步阅读[链接1](http://msdn.microsoft.com/en-us/magazine/ff796231.aspx)，[链接2](https://stackoverflow.com/questions/8322525/sql-vs-nosql-for-an-inventory-management-system)。

# python - ffmpeg 和错误处理

> ID：12649220
> 
> 赞同：0
> 
> 时间：2012-09-29T01:41:49.873
> 
> 标签：python, exception-handling, ffmpeg

我正在使用 ffmpeg 使用此命令调整图像大小： `ffmpeg -i 0%d.jpg -qmax 1 -vf scale=-1:480 out-0%d.jpg`，有时他会返回错误：

断言 s->nb_components == 3 在 /home/kyle/software/ffmpeg/source/ffmp eg-git/libavcodec/mjpegdec.c:354 失败

我看到 ffmpeg.exe 框已停止工作......我需要点击取消以继续我的 python 脚本循环。

1) jpg 的原始大小有问题吗？

2）如果没有解决方案，我怎么能忽略运行时错误消息，让我的 python 脚本继续它原来的位置。

谢谢 ：）

# javascript - 如何使用 jquery validate 来防止通过菜单链接导航（如果表单无效）

> ID：12649221
> 
> 赞同：0
> 
> 时间：2012-09-29T01:41:58.223
> 
> 标签：javascript, jquery, forms, jquery-validate

我有一个表格：

```
<form id="myform" method="post" action="www.wherever.com/page2">

<div class="question">
 <label for="q1">What is your name?</label>
 <input id="q1" name="q1" size="10" maxlength="10"/>
</div>

<input type="submit" value="Continue" />

</form> 
```

由 jquery validate 插件验证：

```
(function($,W,D)
{
    var VALIDATE = {};

    VALIDATE.UTIL =
    {
        setupFormValidation: function()
        {
            $("#myform").validate({
                rules: {
                    q1: {required: true},                           
                    },

                messages: {
                    q1:     {
                        required: "Answer the question",
                            },  

                },
                submitHandler: function(form) {
                    form.submit();
                }
            });

        }
    }

    $(D).ready(function($) {
            jQuery.validator.setDefaults({
                errorPlacement: function(error, element) {
                    if (element.hasClass("errorleft")) {
                       error.insertBefore(element);
                    }else{error.insertAfter(element);}
                }
            });

        VALIDATE.UTIL.setupFormValidation();
    });

})(jQuery, window, document); 
```

我还有一个侧边栏菜单，允许用户在表单中跳转（它是一个多页表单，每个页面在此菜单中都有一个链接

```
<div id="leftmenu" class="leftmenu">
<ul id="sidebarmenu1">
<li><a href="?page=introduction">Page 1</a></li>
<li><a href="?page=introduction-2">Page 2</a></li>
<li><a href="?page=survey-2">I: Page 3</a></li>
</ul>
</div> 
```

如果用户通过页面底部的提交/继续按钮退出页面，则表单验证得很好，但我希望表单在他们尝试通过单击这些菜单链接离开页面时也进行验证。

到目前为止我已经尝试过：我添加了这个脚本，以便菜单中的点击算作表单提交：

```
$('#leftmenu').click(function() {  
    $('#myform').submit();
}); 
```

当这些点击发生时，我可以看到验证错误有效，但浏览器仍然离开页面 - 与通过继续按钮提交表单时不同。

我该如何调整它以便 jquery 验证器阻止这些链接工作？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:13:52.360

这是由于锚标签的默认操作而发生的。

表单被提交，但由于默认行为，它被重定向到不同的页面..

不要将点击事件添加到`#leftmenu`，而是将其添加到锚点，并确保停止默认操作。

```
$('#leftmenu a').on('click',function(e) {

    // Prevents the default action of
    // redirecting to the page specified.
    e.preventDefault();
    // Submit the form which will validate
    $('#myform').submit();
}); 
```

# html - HTML 列表无意级联

> ID：12649235
> 
> 赞同：1
> 
> 时间：2012-09-29T01:44:39.390
> 
> 标签：html, css, internet-explorer, cross-browser

我有一个带有悬停效果的菜单，它使用无序列表、css 和图像创建。在 IE9、FF v15 和 Chome v22 中查看时菜单正确显示。但是，在 IE9 的兼容模式下，或将文档模式设置为 IE8 标准或更低标准时，菜单无法正确显示。它具有一些级联效果，其中每个列表元素看起来都比最后​​一个略低。

正确的外观是： ![在此处输入图像描述](../Images/48b8260ed9a88e22b75db73c8458ae40.png)

在兼容模式或文档模式 IE8 或以下的外观是： ![在此处输入图像描述](../Images/47f7016eaf62f982d226b87ba285b282.png)

HTML 是：

```
<div class="Menu2">
          <ul>
            <li><a href="index.php" class="MenuHome">Home</a></li>
            <li><a href="coolRooms.php" class="MenuCoolRooms">CoolRooms</a></li>
            <li><a href="onlineBooking.php" class="MenuOnlineBookings">OnlineBookings</a></li>
            <li><a href="termsAndConditions.php" class="MenuTermsAndConditions">Terms&Conditions</a></li>
            <li><a href="madigansMilk.php" class="MenuMadigansMilk">Madigan'sMilk</a></li>
          </ul>
      </div> 
```

CSS是：

```
.Menu2 {
    z-index:100px;
}
.Menu2 ul {
    width:850px;
    padding:0;
    margin:0;
    /*margin-left:98px;*/
    list-style-type:none;
}
.Menu2 li a {
    display: block;
    float: left;
    height:65px;
    background-image: url(../images/Menu.png);
    text-indent:-9999px;
}
.MenuHome {
    width:99px;
    background-position:0 0;
}
.MenuCoolRooms {
    width:149px;
    background-position:-99px 0;
}
.MenuOnlineBookings {
    width:195px;
    background-position:-249px 0;
}
.MenuTermsAndConditions {
    width:221px;
    background-position:-444px 0;
}
.MenuMadigansMilk {
    width:186px;
    background-position:-665px 0;
}
.MenuHome:hover {
    background-position:0 -65px;
}
.MenuCoolRooms:hover {
    background-position:-99px -65px;
}
.MenuOnlineBookings:hover {
    background-position:-249px -65px;
}
.MenuTermsAndConditions:hover {
    background-position:-444px -65px;
}
.MenuMadigansMilk:hover {
    background-position:-665px -65px;
} 
```

原始菜单图像是： ![在此处输入图像描述](../Images/21f0f98ff0a5c400af2cb532b0a44c57.png)

为了这个问题，可以忽略菜单的左右边缘（存在于蓝色背景之上）。

任何想法如何纠正列表元素的流动，使它们在其他 IE 版本/模式中保持水平对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:06:32.470

看看 [http://net.tutsplus.com/tutorials/html-css-techniques/9-most-common-ie-bugs-and-how-to-fix-them/](http://net.tutsplus.com/tutorials/html-css-techniques/9-most-common-ie-bugs-and-how-to-fix-them/) 2\. 楼梯效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T01:50:11.403

您可以尝试使用[modernizer](http://modernizr.com/) js插件来修复旧浏览器的css和html

# python - 在python中混合两个列表的最佳方法

> ID：12649239
> 
> 赞同：8
> 
> 时间：2012-09-29T01:45:30.237
> 
> 标签：python, list

让我们有 2 个列表

```
l1 = [1, 2, 3]
l2 = [a, b, c, d, e, f, g...] 
```

结果：

```
list = [1, a, 2, b, 3, c, d, e, f, g...] 
```

不能使用`zip()`，因为它会将结果缩短到最小`list`。我还需要`list`输出而不是`iterable`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T01:46:57.220

```
>>> l1 = [1,2,3]
>>> l2 = ['a','b','c','d','e','f','g']
>>> [i for i in itertools.chain(*itertools.izip_longest(l1,l2)) if i is not None]
[1, 'a', 2, 'b', 3, 'c', 'd', 'e', 'f', 'g'] 
```

要允许`None`值包含在列表中，您可以使用以下修改：

```
>>> from itertools import chain, izip_longest
>>> l1 = [1, None, 2, 3]
>>> l2 = ['a','b','c','d','e','f','g']
>>> sentinel = object()
>>> [i
     for i in chain(*izip_longest(l1, l2, fillvalue=sentinel))
     if i is not sentinel]
[1, 'a', None, 'b', 2, 'c', 3, 'd', 'e', 'f', 'g'] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T01:50:27.497

另一种可能...

```
[y for x in izip_longest(l1, l2) for y in x if y is not None] 
```

（当然，在从 itertools 导入 izip_longest 之后）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T02:21:24.387

[最简单的方法是使用文档中给出](http://docs.python.org/py3k/library/itertools.html#itertools-recipes)[的`itertools`](http://docs.python.org/py3k/library/itertools.html#itertools-recipes)循环规则：

```
def roundrobin(*iterables):
    "roundrobin('ABC', 'D', 'EF') --> A D E B F C"
    # Recipe credited to George Sakkis
    pending = len(iterables)
    nexts = cycle(iter(it).__next__ for it in iterables)
    while pending:
        try:
            for next in nexts:
                yield next()
        except StopIteration:
            pending -= 1
            nexts = cycle(islice(nexts, pending)) 
```

可以这样使用：

```
>>> l1 = [1,2,3]
>>> l2 = ["a", "b", "c", "d", "e", "f", "g"]
>>> list(roundrobin(l1, l2))
[1, 'a', 2, 'b', 3, 'c', 'd', 'e', 'f', 'g'] 
```

请注意，2.x 需要稍有不同[的 2.x 文档](http://docs.python.org/library/itertools.html#recipes)`roundrobin`中提供的版本。

这也避免了该`zip_longest()`方法存在的问题，即列表可以包含`None`而不被剥离。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T01:57:14.010

```
minLen = len(l1) if len(l1) < len(l2) else len(l2)
for i in range(0, minLen):
  list[2*i] = l1[i]
  list[2*i+1] = l2[i]
list[i*2+2:] = l1[i+1:] if len(l1) > len(l2) else l2[i+1:] 
```

这不是一条捷径，但它消除了不必要的依赖。

更新：这是@jsvk 建议的另一种方式

```
mixed = []
for i in range( len(min(l1, l2)) ):
  mixed.append(l1[i])
  mixed.append(l2[i])
list += max(l1, l2)[i+1:] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T01:56:54.920

如果您需要单个列表中的输出，而不是元组列表，请试试这个。

```
Out=[]
[(Out.extend(i) for i in (itertools.izip_longest(l1,l2))]
Out=filter(None, Out) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T02:12:33.973

我并没有声称这是最好的方法，但我只是想指出可以使用 zip：

```
b = zip(l1, l2)
a = []
[a.extend(i) for i in b]
a.extend(max([l1, l2], key=len)[len(b):])

>>> a
[1, 'a', 2, 'b', 3, 'c', 'd', 'e', 'f', 'g'] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T02:59:18.893

```
>>> a = [1, 2, 3]
>>> b = list("abcdefg")
>>> [x for e in zip(a, b) for x in e] + b[len(a):]
[1, 'a', 2, 'b', 3, 'c', 'd', 'e', 'f', 'g'] 
```

# java - 类有两个类型参数，都有字符串和数字的上限：Java

> ID：12649240
> 
> 赞同：2
> 
> 时间：2012-09-29T01:45:58.667
> 
> 标签：java, generics, extends

> 为名为 MyType 的泛型类编写标头。该类应该有两个类型参数。第一个类型参数的上限应该是 Number 类。第二个类型参数的上限应该是 String 类。

看起来像这样正确吗？

```
public class MyType<T extends Number> {} 
```

我将如何将第二个类型参数作为上限？我可以做extends Number extends String吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T01:50:06.607

你这样声明

```
 public class TestThis <T extends Number, X extends String> {} 
```

你**x extends String**有效，记住 String 是一个最终类，你不能扩展它。Eclipse 给了我这个警告：

**类型参数 X 不应受最终类型 String 的限制。最终类型无法进一步扩展**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T01:48:29.563

你误读了这个问题：它要求你给类两个类型参数，每个类型参数都有一个边界，而不是一个类型参数有两个边界。

例如这个类有两个类型参数`T`和`U`：

```
public class MyType<T, U> { } 
```

我会留给~~你~~其他答案来增加界限。

* * *

**编辑：**请注意，如果您确实需要单个类型参数的多个上限，请使用`&`它们来分隔它们：

```
<T extends B1 & B2 & B3> 
```

但是由于Java没有多重继承，额外的上限只能是接口。在这里，`B1`可以是类或接口，`B2`而`B3`必须是接口（参考：[Java 教程](http://docs.oracle.com/javase/tutorial/java/generics/bounded.html)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T01:55:10.443

> 我将如何将第二个类型参数作为上限？我可以做extends Number extends String吗？

`,`您可以添加第二个参数，用like分隔：

```
public class MyType<T extends Number, S extends String> {
} 
```

**虽然它看起来很奇怪，因为 String 是一个最终类，但您仍然可以将其扩展为上限。**

声明看起来像：

```
MyType<Long,String> myType = new MyType<Long, String>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T01:56:32.427

如果`A`上*界*为`B`，则表示`A extends B`。因此，您的声明应如下所示：

```
public class MyType<T extends Number, U extends String> {
    ...
} 
```

你被要求*有两个类型参数*（不仅仅是你目前拥有的一个），因此是`T`上面`U`的。**但我应该注意：** [`String`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html) is`final`因此没有类型`U`可以是`String`（尽管`U`仍然可以是`String`）的扩展。

# php - PHP - 为什么仍然解析双精度内的单引号变量

> ID：12649245
> 
> 赞同：0
> 
> 时间：2012-09-29T01:47:04.213
> 
> 标签：php, string, quotes

通常，当 PHP 中的变量用单引号括起来时，它们被视为字符串，即

```
echo '$variable'; 
```

实际上会将单词 $variable 回显到屏幕上。

那么为什么会解析这个字符串：

```
echo "'$variable'"; 
```

该代码实际上确实回显了变量的值。这是为什么？它仍然在单引号内，为什么它仍然被解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T01:49:17.080

字符串用双引号括起来——单引号是字符串*内容*的一部分，而不是字符串分隔符的一部分。因此，单引号没有任何语义意义。

您的问题表明您可能对字符串有基本的误解。还行吧！字符串是非常复杂的实体，如果您学习 C 等较低级别的语言，只会变得更加复杂。我建议您花一些时间阅读一般的字符串以及 PHP 中的字符串。老实说，一些快速的谷歌搜索会比这个任务的精选列表更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T01:49:14.850

因为它也是双引号。最外层的引号表示它是什么类型的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T01:49:41.403

它只是一个包含两个单引号字符的双引号字符串。一旦它们在双引号中，它们对解析器就没有意义了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T01:51:28.720

因为单引号在双引号内。双引号内的任何内容都会被评估。因此，您的 echo 语句在双引号内传递了一个字符串。

该字符串被评估然后输出。它包含单引号和一个变量。

试试这个：

```
<?php
    $var = 10;
    echo '"$var"';
?> 
```

# css - 为什么我的引导代码不起作用？

> ID：12649246
> 
> 赞同：5
> 
> 时间：2012-09-29T01:47:25.750
> 
> 标签：css, twitter-bootstrap, stylesheet

今晚我决定尝试一下 Bootstrap（只做了大约两周的 CSS/HTML），但我遇到了一个问题。无论出于何种原因，我的 HTML 文档似乎都没有链接到 Bootstrap 样式表。我使用了他们的下拉代码片段之一，但最终结果没有风格化。有人可以看看我做错了什么吗？下面是我的 HTML 代码。

```
<!DOCTYPE html>

<html lang = "en">

<head>
<title>Test</title>
<link href="css/bootstrap.css" rel="stylesheet" type="text/css" />
<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />

</head>
<body>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="js/bootstrap.min.js"></script>

<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a tabindex="-1" href="#">Action</a></li>
<li><a tabindex="-1" href="#">Another action</a></li>
<li><a tabindex="-1" href="#">Something else here</a></li>
<li class="divider"></li>
<li><a tabindex="-1" href="#">Separated link</a></li>
</ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T01:53:51.357

所有文件都在正确的文件夹中吗？您使用的是相对 url:s，如果您刚开始编码，可能会感到困惑。你的文件夹结构如何？index.html 和 css 文件夹在同一个目录吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T01:59:19.173

您需要查看如何添加引导文件的文件结构：

[http://twitter.github.com/bootstrap/getting-started.html#file-structure](http://twitter.github.com/bootstrap/getting-started.html#file-structure)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:48:32.880

尝试添加“样式=”显示：块；位置：静态；边距底部：5px；*宽度：180px"

```
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display: block; position: static; margin-bottom: 5px; *width: 180px;">
            <li><a tabindex="-1" href="#">Action</a></li>
            <li><a tabindex="-1" href="#">Another action</a></li>
            <li><a tabindex="-1" href="#">Something else here</a></li>
            <li class="divider"></li>
            <li><a tabindex="-1" href="#">Separated link</a></li>
          </ul> 
```

# c# - HttpClient.GetAsync 在具有锁定屏幕访问权限以及 TimeTrigger 或 MaintenanceTrigger 的后台任务中失败

> ID：12649247
> 
> 赞同：2
> 
> 时间：2012-09-29T01:47:27.967
> 
> 标签：c#, windows-8, microsoft-metro

在我的 Windows 8 Metro 应用程序的后台任务中运行时，Client.GetAsync 对我来说似乎失败了。

我尝试同时使用 TimeTrigger 和 MaintenanceTrigger。看来也不例外。调试它时，它只会在该行退出（如果我一直按 step over），即使还有更多的执行方式以及围绕它的 try-catch。

这让我相信 Windows 正在取消我的任务。所以我听了取消的事件没有运气。

我已将 Internet 访问声明为一项功能，并且该任务已正确注册。此外，我的应用程序具有完全锁屏访问权限。

我究竟做错了什么？

这是我目前用来注册后台任务的代码。

```
if (await ObtainLockScreenAccess())
{
    const string name = "Task";

    var updaterTasks = BackgroundTaskRegistration.AllTasks.Where(t => t.Value.Name == name);
    if (!updaterTasks.Any())
    {

        var builder = new BackgroundTaskBuilder();
        builder.Name = name;
        builder.TaskEntryPoint = "Stackstabilizer.BackgroundTasks.UpdateBackgroundTask";

        var trigger = new MaintenanceTrigger(15, false);
        var condition = new SystemCondition(SystemConditionType.InternetAvailable);

        builder.AddCondition(condition);
        builder.SetTrigger(trigger);

        var task = builder.Register();

        Debug.WriteLine("Task has been registered");

    }
} 
```

**编辑**这是后台任务签名：

```
namespace Stackstabilizer.BackgroundTasks
{
    // You must use a sealed class, and make sure the output is a WINMD. 
    public sealed class UpdateBackgroundTask : IBackgroundTask
    {
        public async void Run(IBackgroundTaskInstance taskInstance)
        {

            var deferral = taskInstance.GetDeferral();

            try { ... } finally { deferral.Complete(); }

        }
     }

} 
```

这里有一些关于我的声明的细节。

![在此处输入图像描述](../Images/70d229e1cf0930570e0e420a2583467f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:44:37.377

我之前遇到过类似的问题，我解决它的方法是在异步任务中再次延迟。我认为这个想法是，每当您有异步任务时，您都需要延迟。（我不确定这是否是最佳做法，但嘿，它有效）

代码：

```
 public void Run(IBackgroundTaskInstance taskInstance)
    {
        updateAllTiles(taskInstance);
    }

    public async void updateAllTiles(IBackgroundTaskInstance taskInstance)
    {
        // Need to use a deferral to run async tasks in the background task
        BackgroundTaskDeferral deferral = taskInstance.GetDeferral();

        dosomething(taskInstance);

        deferral.Complete();
    }

    private async void dosomething(IBackgroundTaskInstance taskInstance)
    {
        BackgroundTaskDeferral deferral = taskInstance.GetDeferral();

        HttpClient client = new HttpClient();
        HttpResponseMessage resp = await client.GetAsync(new Uri(url));

        updateTile(resp);

        deferral.Complete();
    } 
```

# cakephp - Nginx + CakePHP 缓存问题

> ID：12649248
> 
> 赞同：0
> 
> 时间：2012-09-29T01:47:38.080
> 
> 标签：cakephp, nginx

我们正在将 CakePHP 应用程序部署到 nginx(1.2.4)。

视图文件存在问题，它不会刷新最新的视图文件。似乎视图总是被缓存，我必须清除浏览器缓存才能加载更新的内容。

我试图在 CakePHP 中禁用，但问题仍然存在。

以前有人遇到过这个问题吗？

**编辑**

最后，我们认为这是导致我在 site_ 可用文件夹下的 conf 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:52:13.537

检查您是否将调试级别设置为不同于 0 的级别。除 0 以外的调试级别会自动设置缓存几秒钟，因此您应该能够看到视图的最新更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T07:21:22.593

[http://book.cakephp.org/2.0/en/controllers.html#Controller::disableCache](http://book.cakephp.org/2.0/en/controllers.html#Controller::disableCache)
[http://book.cakephp.org/2.0/en/controllers/request-response.html#interacting-with-browser-缓存](http://book.cakephp.org/2.0/en/controllers/request-response.html#interacting-with-browser-caching)

# vim - 在 Vim 的 TagBar 插件中，自动设置 cursorline

> ID：12649249
> 
> 赞同：1
> 
> 时间：2012-09-29T01:47:45.600
> 
> 标签：vim, tagbar

问题非常简单，当我运行 TagbarToggle 时，我希望该窗口中的 cursorline 选项为 True（如果它在“主”窗口中）。

就像是：

```
if &cursorline
    call set_cursorline_in_tagbar()
endif 
```

当然我可以每次都手动设置，但这不是 Vim 的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:31:16.160

[看起来](https://github.com/majutsushi/tagbar/blob/master/autoload/tagbar.vim#L1702)TagBar 设置了自己的`FileType`: `tagbar`，这可以用于`autocmd`：

```
autocmd FileType tagbar setlocal cursorline 
```

另一种选择是为适合您需要的 TagBar 自己的语法组设置自定义突出显示，[如文档中所示。](https://github.com/majutsushi/tagbar/blob/master/doc/tagbar.txt#L504)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:47:06.470

我设法修复了它，出于某种原因，TagBar 在 initWindow() 函数中设置了 nocursorline，我只是用 cul 替换了它。现在一切正常。

> ***但他为什么要设置 nocursorline 呢？***

# ruby-on-rails - Rails 路由：路径错误

> ID：12649254
> 
> 赞同：1
> 
> 时间：2012-09-29T01:48:31.237
> 
> 标签：ruby-on-rails

我是 Rails 新手，现在正在学习路由，这就是我的`routes.rb`：

```
match '/text' => 'text#index'
match '/text/:id' => 'text#show' 
```

这是我的`app/views/text/index.html.erb`：

```
<h1>Texts</h1>
<% @texts.each do |t| %>
    <div><%= link_to t.title, text_path(t) %></div>
<% end %> 
```

问题是当我点击链接时，它会将我重定向到“/text.1”而不是“/text/1”。谁能弄清楚为什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:38:56.203

听起来文本是您应用程序中的一种资源 - 您应该使用[资源路由](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)。

对于这种确切的情况，如果由于某种原因您不想使用资源路由，您应该查看您的输出`rake routes`并查看分配给您的`text#show`路由的名称并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:41:04.683

```
try this 

   <h1>Texts</h1>
    <% @texts.each do |t| %>
       <div><%= link_to t.title, t %></div>
     <% end %> 
```

或这个

```
 <h1>Texts</h1>
    <% @texts.each do |t| %>
       <div><%= link_to t.title, text_path(:id => t.id) %></div>
     <% end %> 
```

# document - 如何找到示例文档？

> ID：12649261
> 
> 赞同：0
> 
> 时间：2012-09-29T01:49:44.787
> 
> 标签：document, wso2, appserver

我在 WSO2 中遇到了一些麻烦。

1.  是否有任何将不同服务器组合在一起的示例，以解释 WSO2 的机制？例如，ASS 和 DSS，或 ASS 和 mushup 服务器，我找到了一个示例，但没有文档，就像我的第二个问题一样。

2.  在 AS 5.0.0 中，我在 README 文件中找到了一些没有注释的示例。但是得到这个“请下载文档分发并参考乍得示例文档以获取有关如何运行乍得示例的详细说明。”

我怎样才能在网站上得到详细的解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:56:42.173

1.  官方文档中没有示例，但有时它们可​​以在 Wso2 OxygenTalk 或查看 Wso2 Developers 中获得，例如：

    [http://charithaka.blogspot.co.uk/search/label/Data%20services](http://charithaka.blogspot.co.uk/search/label/Data%20services)

    [http://kasunweranga.blogspot.co.uk/2012/09/wso2-business-activity-monitor-200.html](http://kasunweranga.blogspot.co.uk/2012/09/wso2-business-activity-monitor-200.html)

    [http://chamaras.blogspot.co.uk/2008/09/enter-post-title-here.html](http://chamaras.blogspot.co.uk/2008/09/enter-post-title-here.html)

2.  您可以在官方网站上找到任何 WSo2 产品的官方文档，例如 AS 在这里：[http ://docs.wso2.org/wiki/display/AS500/WSO2+Application+Server+Documentation](http://docs.wso2.org/wiki/display/AS500/WSO2+Application+Server+Documentation)

看看图片有一个想法： ![在此处输入图像描述](../Images/ce3981f8bf123a48f1f24885a943ead0.png)

# maven - Maven 3 对 Groovy pom 的支持

> ID：12649262
> 
> 赞同：1
> 
> 时间：2012-09-29T01:49:53.023
> 
> 标签：maven, maven-3

我正在研究使用 Maven 3 对 Groovy pom 的支持来帮助我团队中的构建过程。

从我最初的阅读中，我只能找到 2 年前的文章将它作为一个特性提及，尽管它不是核心 Maven 的一部分。指向 Polyglot Maven 的链接似乎重定向到 Sonatype 主页。

我已经阅读了[这个](https://stackoverflow.com/questions/11170057/what-happened-to-maven-polyglot)相关问题的答案，我不完全理解它的含义。

这是否意味着 Maven 3 是否支持 Groovy pom 的生成？有人可以用简单的术语解释这意味着什么，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:24:26.387

Maven 项目的创始人兼 Sonatype 的首席技术官 Jason van Zyl 似乎正在研究它，这是一个私人测试版。它不是 Maven 3 已发布版本的一部分。

查看来自 Jason 的[这封电子邮件](http://www.mail-archive.com/users@maven.apache.org/msg126205.html)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-29T16:19:10.420

构建过程有什么问题？您是否需要 groovy poms 才能将其加入您的团队？pom.xml 文件通常不会手工编写。您应该为此目的使用 IDE。Maven 3 不支持 Groovy pom。

# javascript - 书签拖放触发的事件

> ID：12649263
> 
> 赞同：0
> 
> 时间：2012-09-29T01:50:00.700
> 
> 标签：javascript, jquery

我需要捕获通过将书签拖放到窗口上触发的事件，最好是在所有浏览器中。我真正需要的是书签的目标网址。`onbeforeunload`确实被触发了，但该事件没有关于目标 URL 的信息，我也无法阻止页面加载它。 `mouseup`也不起作用。

API 似乎可行，`FileReader`但我不确定它是否合适。理想情况下，这至少也适用于 IE9（不支持`FileReader`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-05T21:55:02.930

我有一个解决这个问题的第一部分的方法，但我自己希望得到第二部分的帮助，所以如果这对你的问题有帮助，那将不胜感激。

注意：这大部分都是基于我的个人经验，所以在我们深入之前，我会记录一下兼容性。

*   该[`drop`事件](https://developer.mozilla.org/en-US/docs/Web/API/Document/drop_event)在 Microsoft Edge 12+ 上受支持，并且有一个字段 ，[`dataTransfer`](https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/dataTransfer)其中包含有关被拖放的元素的信息。这个字段被添加到 IE 中`null`，因为这个原因我不会谈论我为它找到的解决方案。从您发帖的时间来看，您似乎使用的是最新的 Microsoft 浏览器，这意味着我在下面讨论的功能将得到支持。

您要查看的第一个事件是`drop`. 从逻辑上讲，这个事件是当您将元素放到页面上时触发的事件，无论是文件、另一个元素还是在我们的例子中为书签。

第二个事件，相当令人困惑的是[`dragover`](https://developer.mozilla.org/en-US/docs/Web/API/Document/dragover_event)。出于某种未知原因，自行抑制`drop`事件的默认行为似乎并不能完全否定转到新网页的效果，而是将我（使用 Chrome 94）重定向到新选项卡中的 about:blank#blocked，这可能干扰用户体验。

事件的`files`属性通常包含`dataTransfer`有关`drop`正在传输的数据的信息，并且正如我所试验的那样，我从中得到了这些数据：

```
{
  items: DataTransferItemList {0: DataTransferItem {'kind': 'string', 'type': 'text/plain'}, 1: DataTransferItem {'kind': 'string', 'type': 'text/uri-list'}, length: 2},
  types: ['text/plain', 'text/uri-list'],
  files: FileList {length: 0}
} 
```

我对`files`不包含任何数据的事实感到相当沮丧，而且它目前让我陷入了无法继续前进的地步。我会看看我是否记得在/如果它得到修复时发回这里，但在那之前，还有一件事我想指出。

在 Windows 计算机上，Internet 快捷方式实际上是带有`.url`扩展名的小文件。因此，如果用户简单地从他们的主页拖入一个快捷方式，就有可能获得一个站点的名称和它的地址。我获取数据的代码如下。

```
element.addEventListener('drag', function(event)) {
  event.preventDefault();
  // in case you haven't put this in already; having multiple has
  // the same effect as one
  let shortcutFile = event.dataTransfer.files[0];
  // This assumes the user is only dragging a single file, but it can be
  // expanded to others by simply detecting the extension of the file.
  let fileName = shortcutFile.name;
  let fileLines = fileContent.split('\n');
  // the last line of the file has a pattern that looks like this:
  //   URL=<url to site>
  // this is what i'm going to be using to get the address.
  // 
  // the better solution to the first index below would be to use
  // Array.prototype.at(-1), however doing so would require a polyfill
  // on all versions of Opera, IE, and Safari, not to mention that even somewhat
  // recent browsers don't have this method implemented.

  let siteUrl = fileLines[fileLines.length - 1].match(/(?<=URL=)/)[0];

  // going to use one of my favorite JS features here: object destructuring!
  // it's not supported in some older browsers, or in IE at all, but it's a VERY
  // cool feature nonetheless, so I use it when i really shouldn't a lot of the time
  // 
  // i know stuff is supposed to be cross-compatible but what's the point
  // in browsers getting new APIs/interfaces like this if you don't use
  // them?
  return {fileName, siteUrl};

  // oh yeah explanation of how it works
  // it's basically the same thing as saying {fileName: fileName, siteUrl: siteUrl}
  // looks very nice right?
} 
```

希望这些信息和解决方法有所帮助，并且我们俩都遇到的确切问题得到解决！

# wcf - 连接到 WCF，单个客户端的问题

> ID：12649269
> 
> 赞同：1
> 
> 时间：2012-09-29T01:50:29.413
> 
> 标签：wcf

因此，从我的开发机器连接到生产 WCF 服务时出现以下错误。这不是服务器端问题，因为没有其他用户有这个问题，当我使用我的凭据登录另一台机器时，它可以工作。通常我只会使用另一台机器，但由于截止日期，没有时间重建我的开发箱。如果这就是它所需要的，我会的，但如果有人看到了这一点并且可以建议如何解决它，那将是更可取的。我不记得更改任何可能导致此问题的设置，但是在尝试纠正此问题时，我更改了以下值：

本地安全策略 > 本地策略 > 安全选项 > 网络安全：LAN 管理器身份验证级别

我已经尝试了所有同时包含 LM 和 NTLM 的值。

非常感谢您的帮助。

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Negotiate'. The authentication header received from the server was 'Negotiate,NTLM'. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized. ---> System.ComponentModel.Win32Exception: The logon attempt failed
at System.Net.NTAuthentication.GetOutgoingBlob(Byte[] incomingBlob, Boolean throwOnError, SecurityStatus& statusCode)
at System.Net.NTAuthentication.GetOutgoingBlob(String incomingBlob)
at System.Net.NegotiateClient.DoAuthenticate(String challenge, WebRequest webRequest, ICredentials credentials, Boolean preAuthenticate)
at System.Net.NegotiateClient.Authenticate(String challenge, WebRequest webRequest, ICredentials credentials)
at System.Net.AuthenticationManager.Authenticate(String challenge, WebRequest request, ICredentials credentials)
at System.Net.AuthenticationState.AttemptAuthenticate(HttpWebRequest httpWebRequest, ICredentials authInfo)
at System.Net.HttpWebRequest.CheckResubmitForAuth()
at System.Net.HttpWebRequest.CheckResubmit(Exception& e, Boolean& disableUpload)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.GetResponse()
at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
--- End of inner exception stack trace ---

Server stack trace: 
at System.ServiceModel.Channels.HttpChannelUtilities.ValidateAuthentication(HttpWebRequest request, HttpWebResponse response, WebException responseException, HttpChannelFactory`1 factory)
at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory`1 factory, WebException responseException, ChannelBinding channelBinding)
at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
at PCLIndexStats.ThirdPartyService.IThirdPartyService.get_delayed_quote_from_third_party(get_delayed_quote_from_third_partyRequest request)
at PCLIndexStats.ThirdPartyService.ThirdPartyServiceClient.get_delayed_quote_from_third_party(String symbol)
at PCLIndexStats.frmMain.btnGetData_Click(Object sender, EventArgs e)
at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
at System.Windows.Forms.Control.WndProc(Message& m)
at System.Windows.Forms.ButtonBase.WndProc(Message& m)
at System.Windows.Forms.Button.WndProc(Message& m)
at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/mscorlib.dll
----------------------------------------
PCLIndexStats
Assembly Version: 1.3.4.0
Win32 Version: 1.3.4.0
CodeBase: file:///C:/Users/fbalas/AppData/Local/Apps/2.0/QR3QEJQP.VZN/OQKYBMYB.5W3/pcli..tion_0000000000000000_0001.0000_8df6cb5089eda551/PCLIndexStats.exe
----------------------------------------
Microsoft.VisualBasic
Assembly Version: 10.0.0.0
Win32 Version: 11.0.50709.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/Microsoft.VisualBasic/v4.0_10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll
----------------------------------------
System
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Core
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
----------------------------------------
System.Windows.Forms
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Configuration
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Runtime.Remoting
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Runtime.Remoting/v4.0_4.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll
----------------------------------------
IndexDAL.1.0.0.0
Assembly Version: 1.0.0.0
Win32 Version: 1.0.0.0
CodeBase: file:///C:/Users/fbalas/AppData/Local/Apps/2.0/QR3QEJQP.VZN/OQKYBMYB.5W3/pcli..tion_0000000000000000_0001.0000_8df6cb5089eda551/IndexDAL.1.0.0.0.DLL
----------------------------------------
System.Data.Linq
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Data.Linq/v4.0_4.0.0.0__b77a5c561934e089/System.Data.Linq.dll
----------------------------------------
System.Data
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_64/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll
----------------------------------------
System.Runtime.Serialization
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Runtime.Serialization/v4.0_4.0.0.0__b77a5c561934e089/System.Runtime.Serialization.dll
----------------------------------------
System.Transactions
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_64/System.Transactions/v4.0_4.0.0.0__b77a5c561934e089/System.Transactions.dll
----------------------------------------
System.EnterpriseServices
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_64/System.EnterpriseServices/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll
----------------------------------------
Anonymously Hosted DynamicMethods Assembly
Assembly Version: 0.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_64/mscorlib/v4.0_4.0.0.0__b77a5c561934e089/mscorlib.dll
----------------------------------------
System.Xml.Linq
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml.Linq/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.Linq.dll
----------------------------------------
System.ServiceModel
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.ServiceModel/v4.0_4.0.0.0__b77a5c561934e089/System.ServiceModel.dll
----------------------------------------
System.ServiceModel.Internals
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.ServiceModel.Internals/v4.0_4.0.0.0__31bf3856ad364e35/System.ServiceModel.Internals.dll
----------------------------------------
SMDiagnostics
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/SMDiagnostics/v4.0_4.0.0.0__b77a5c561934e089/SMDiagnostics.dll
----------------------------------------
System.ServiceModel.Web
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.ServiceModel.Web/v4.0_4.0.0.0__31bf3856ad364e35/System.ServiceModel.Web.dll
----------------------------------------
System.IdentityModel
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.IdentityModel/v4.0_4.0.0.0__b77a5c561934e089/System.IdentityModel.dll
----------------------------------------
Microsoft.VisualStudio.Diagnostics.ServiceModelSink
Assembly Version: 4.0.0.0
Win32 Version: 11.0.50727.1
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/Microsoft.VisualStudio.Diagnostics.ServiceModelSink/v4.0_4.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Diagnostics.ServiceModelSink.dll
----------------------------------------
System.Web
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_64/System.Web/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Web.dll
----------------------------------------
System.Net.Http
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Net.Http/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Net.Http.dll
----------------------------------------
System.Security
Assembly Version: 4.0.0.0
Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Security/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Security.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
<system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

# backbone.js - 使用主干集合进行大量写入

> ID：12649270
> 
> 赞同：0
> 
> 时间：2012-09-29T01:50:29.843
> 
> 标签：backbone.js

使用backbone.js，假设我有一个收藏——专辑

```
var albums_collection = new Backbone.Collection([
    {artist:"dell the funky homosapien"},
    {artist:"raffe"},
    {artist:"wilson philips"},
    {artist:"eddie murply"},
    {artist:"jordotech"}
  ]); 
```

以及对应的视图

```
 AlbumView = Backbone.View.extend({
   render: function(){  
     $(this.el).html(this.model.get('artist') + "<br />");
     return this;
   }
 }); 
```

比方说，我有 10k 张专辑，而不仅仅是这 4 张专辑，我想将它们全部渲染。大多数主干教程会说您应该遍历集合并逐个附加到dom。

```
 album_colleciton.each(addOne);
 addOne:function(model){  
   var view = new AlbumView({model:model});
   $("#albums_container").append(view.render().el):
 } 
```

但是，我注意到像这样一个一个地写入 DOM 实际上可能会降低性能......有没有办法将这些中的每一个保存到一个数组中并同时进行大规模更新？我试过了：

```
 var arr = [];

 _.each(this.collection.models, function(model){
   var view = new AlbumView({model:model});
   arr.push(view.render().el);
 });

 $("#albumbs_view").html(arr.join('')); 
```

但是上面的结果是一系列“HTMLdivElement”被渲染。知道在这种情况下如何只做一个而不是 1000 个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T02:59:07.837

确保您的视图没有指定“el”。允许由主干创建。那么你的渲染函数可以整天填充视图的 el 而不会操纵 DOM。最后，完成后，将其附加到 DOM。

```
 CollectionView = Backbone.View.extend({

  render: function(){
    var that = this;

    this.collection.each(function(m){
      var v = new SomeView({model: m});
      v.render();
      that.$el.append(v.$el);
    });

  }
});

cv = new CollectionView({collection: someCollection});
cv.render();

$("#whatever").html(cv.$el); 
```

顺便说一句，我的[Backbone.Marionette](https://github.com/marionettejs/backbone.marionette)框架将使您更容易做到这一点：

```
 SomeView = Marionette.ItemView.extend({
  // ...
});

AllTheViews = Marionette.CollectionView.extend({
  itemView: SomeView
});

atv = new AllTheViews({collection: someCollection});
atv.render();

$("#whatever").html(atv.$el); 
```

还有一些[区域](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.region.md)可以更轻松地将视图填充到 DOM 中……如果您对 Marionette 感兴趣，那么可以从 Addy Osmani 的[Backbone Fundamentals](http://addyosmani.github.com/backbone-fundamentals)书和[有关 Marionette 的章节开始](http://addyosmani.github.com/backbone-fundamentals/#marionette)。

# iphone - 在 UICollectionView/UICollectionViewLayout 旋转或边界更改上禁用交叉淡入淡出的最佳方法是什么？

> ID：12649271
> 
> 赞同：14
> 
> 时间：2012-09-29T01:50:39.367
> 
> 标签：iphone, ios, cocoa-touch, uikit, uicollectionview

我有一个子类，`UICollectionViewLayout`它把细胞放在一个圆圈里。布局返回`YES`调用`shouldInvalidateLayoutForBoundsChange:`。旋转时，初始位置的单元格淡出，最终位置的单元格淡入。

通过将以下代码添加到我的布局中，我可以禁用淡入淡出，并且项目圈似乎只是随着方向的变化而旋转：

```
- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath {
    return nil;
}

- (UICollectionViewLayoutAttributes *)finalLayoutAttributesForDisappearingItemAtIndexPath:(NSIndexPath *)itemIndexPath {
    return [self layoutAttributesForItemAtIndexPath:itemIndexPath];
} 
```

为什么这些方法会在边界更改时被调用，因为文档似乎没有建议它们这样做？文档似乎表明它们被称为与从集合视图中插入和删除项目有关。

有没有更好的方法来禁用旋转期间的交叉淡入淡出？

笔记：

*   `initialLayoutAttributesForAppearingItemAtIndexPath:`文档指出，默认情况下该方法返回但`nil`调用`super`返回的非零值。
*   `UICollectionView`我在方法 上设置了符号断点`deleteItemsAtIndexPaths:`，`moveItemAtIndexPath:toIndexPath:`并且 `insertItemsAtIndexPaths:`在旋转过程中没有一个被击中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T07:55:07.617

该`UICollectionViewLayout.h`文件指出

```
// This set of methods is called when the collection view undergoes an
     animated transition such as a batch update block or an animated 
     bounds change.
// For each element on screen before the invalidation, 
     finalLayoutAttributesForDisappearingXXX will be called and an 
     animation setup from what is on screen to those final attributes.
// For each element on screen after the invalidation, 
     initialLayoutAttributesForAppearingXXX will be called an an 
     animation setup from those initial attributes to what ends up on 
     screen. 
```

这清楚地表明它们被称为边界变化。而不是删除/插入，“旧状态”和“新状态”似乎更准确。

# java - 在安卓游戏中获取移动球的坐标

> ID：12649273
> 
> 赞同：1
> 
> 时间：2012-09-29T01:51:29.497
> 
> 标签：java, android

我正在为Android设计一个移动球游戏。我正在使用线程来让球在屏幕周围移动。当我执行 OnTouchEvent 时，无论我在哪里点击，我都能获得屏幕的 X 和 Y 坐标。我的问题是如何获取同一 OnTouchEvent 实例的球的 X 和 Y 坐标值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T03:57:34.683

根据我对您问题的理解，球的坐标由您的一根线决定。这意味着，您应该已经拥有随时存储 x 和 y 坐标的变量。

您需要做的就是访问那些在 OnTouchEvent 上存储 x 和 y 坐标的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T03:01:03.453

简单的方法是在每一刻（例如在两个字段中）存储它的坐标并在用户点击时使用它们。或者您可以创建一个类，例如 Ball，它的字段存储当前实例球的坐标以及坐标的 getter 和 setter .

# android - 保存整数和文本视图的状态 onpause()

> ID：12649275
> 
> 赞同：0
> 
> 时间：2012-09-29T01:51:34.303
> 
> 标签：android, android-layout, android-widget

所以我已经看到了一些关于这个主题的问题，但没有真正详细说明如何做到这一点以及如何理解它。

我正在创建的应用程序是一个类，它是一个 rpg 类型的游戏

所以我有以下文本视图和整数（被放入文本视图）

文本视图：

textViewStrName

textViewStrRace

textViewStrAlliance

textViewStrClass

* * *

与其他 textView 相关的整数：

textViewGoldValue

textViewXPValue

textViewXPLimit

文本视图级别

文本视图HP

文本视图MP

* * *

所以我知道我必须对 SharedPreferences 做一些事情，但我不知道如何利用它......或者有没有办法将它保存到数据库中？

对不起，我对android还是很陌生，我问了很多问题....

**编辑**

```
protected void onPause() {
// TODO Auto-generated method stub
super.onPause();
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
    SharedPreferences.Editor prefsEditor = myPrefs.edit();
    prefsEditor.putInt("myvalue", gold);

    prefsEditor.commit();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    SharedPreferences myPrefs1 = this.getSharedPreferences("myPrefs",  MODE_WORLD_READABLE);
    String textViewGoldValue = myPrefs.getInt("myvalue", -1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T02:17:42.460

您可以通过这种方式使用 sharedpreferences

```
 SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
    SharedPreferences.Editor prefsEditor = myPrefs.edit();
    prefsEditor.putInt("myvalue", textViewGoldValue);

    prefsEditor.commit(); 
```

你可以使用

```
 SharedPreferences myPrefs1 = this.getSharedPreferences("myPrefs",  
MODE_WORLD_READABLE);
    int prefName1 = myPrefs1.getInt("myvalue", -1); 
```

其余的类似。

如果您需要对数据库有所了解，可以点击[此处的链接](http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html)

# wordpress - 如何从 WordPress 的 VMWare fusion 访问 MAMP 的 localhost:8888？

> ID：12649278
> 
> 赞同：1
> 
> 时间：2012-09-29T01:52:27.327
> 
> 标签：wordpress, vmware, mamp, vmware-fusion

我在运行 Windows 7 的 MacBook Air 上运行了 VMWAre Fusion。我想使用这个本地开发环境在 Internet Explorer 中测试我的站点。目前在我的 Mac 上使用 MAMP，我可以通过以下 URL 访问我的 WordPress 站点：localhost:8888/example。我如何才能通过 VMWare Fusion 中的 Internet Explorer 访问这个本地站点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:29:38.297

在系统偏好设置 -> 共享中打开 Internet 共享，然后导航到给定的 IP 地址。您可能需要将您的 Wordpress 站点 URL 更改为该 IP 地址，以使一切正常工作。

# objective-c - 使应用程序在全屏应用程序上弹出

> ID：12649279
> 
> 赞同：2
> 
> 时间：2012-09-29T01:52:42.237
> 
> 标签：objective-c, macos, cocoa, osx-mountain-lion

我试图弄清楚如何在所有其他窗口之上弹出一个应用程序。这可能是一个糟糕的解释，所以基本上我希望应用程序在按下快捷键时表现得像 quicksilver 或 alfred。

我在 NSWindow 中找不到任何我想要的东西......我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T02:07:54.287

更具体地说，类似：

```
[newWindow setLevel:NSFloatingWindowLevel];
[newWindow setCollectionBehavior:NSWindowCollectionBehaviorCanJoinAllSpaces]; 
```

...将工作; 第二行可能是您想要的附加行为，允许窗口显示在每个空间中，而不仅仅是孤立于一个空间。

另请注意，就窗口级别而言，以上任何内容`NSFloatingWindowLevel`都可以使用；为了清楚起见，最好使用命名常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T01:54:10.263

您可以设置`NSWindow`using的级别[`setLevel:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/setLevel%3a)。[此处](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/constant_group/Window_Levels)列出了可能的常量，但您可以设置任何所需的整数。

# android - Android - 多个LinearLayouts定位？

> ID：12649283
> 
> 赞同：0
> 
> 时间：2012-09-29T01:53:08.313
> 
> 标签：android, dynamic, android-linearlayout, margin

我正在尝试在主 LinearLayout 中创建多个线性布局。但我在保证金方面遇到了一些麻烦。这是我的代码和输出： -

```
public class CustomActivity extends Activity {

private LinearLayout mainLayout; 
Float value;
int dpi;
private String[] data = new String[] {"Hello World", "Hello World", "Hello World", "Hello World", ""};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_custom);
    mainLayout = (LinearLayout)findViewById(R.id.mainLayout);
    mainLayout.setOrientation(LinearLayout.VERTICAL);
    value = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 10, getResources().getDisplayMetrics());
    dpi = Math.round(value);
    addLayouts();
}

private void addLayouts() {
    int marginBottom = 0;
    int count = 0;
    for (int i = 0; i < data.length; i++) {
        OutLinedLL linearLayout = new OutLinedLL(this);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(dpi*22,dpi*35);
        if(i==0)
        {   
            linearLayout.setBackgroundColor(Color.RED);
            params.setMargins(dpi*7, dpi, dpi*4, marginBottom);
            linearLayout.setLayoutParams(params);
            mainLayout.addView(linearLayout);
        }
        else 
        {
            count += dpi*2;
            Log.e("Count", count+"");
            marginBottom -= (dpi*28)+count;
            Log.e("Margin Bottom", marginBottom+"");
            linearLayout.setBackgroundColor(Color.GREEN);
            params.setMargins(dpi*7, dpi, dpi*4, marginBottom);
            linearLayout.setLayoutParams(params);
            mainLayout.addView(linearLayout);
        }
        marginBottom = 0;
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_custom, menu);
    return true;
}

} 
```

堆栈跟踪： -

```
09-29 11:49:23.844: E/Count(16149): 40
09-29 11:49:23.844: E/Margin Bottom(16149): -600
09-29 11:49:23.852: E/Count(16149): 80
09-29 11:49:23.852: E/Margin Bottom(16149): -640
09-29 11:49:23.852: E/Count(16149): 120
09-29 11:49:23.852: E/Margin Bottom(16149): -680
09-29 11:49:23.852: E/Count(16149): 160
09-29 11:49:23.852: E/Margin Bottom(16149): -720 
```

输出 ：-![在此处输入图像描述](../Images/ca01cc4eedfde66c454e553e5641e75b.png)

正如您所见，所有布局的边距底部都不相同。我无法找出它发生的原因。我目前正在尝试学习自定义视图，因此我们将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:00:14.237

我不是 100% 确定我是否了解您希望您的最终布局是什么样的。

但是，听起来像线性布局的相对布局可以实现您的目的所需的外观和功能，同时“更轻”。

如果我误解了你的目标，我很抱歉，但在这种情况下，它可能会有所帮助，你可以在问题中更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:01:11.743

我认为这是你的问题：

```
marginBottom -= (dpi*28)+count; 
```

您正在更改每个循环的边距量。只需将其设置为静态值，所有视图都应具有相同的边距。

# mysql - MySQL Nest 连接

> ID：12649284
> 
> 赞同：3
> 
> 时间：2012-09-29T01:53:09.963
> 
> 标签：mysql, sql, join

我有一个包含用户信息（fname、lname...等）的用户表和一个发票表。在 invoices 表中，我有一个名为 created_id 的字段，它链接到创建发票的 user.id。我还有一个名为 staff_id 的字段，它链接到批准发票的员工 user.id。

如何在单个查询中同时查询 created_id 和 staff_id 的名字和姓氏？以下是我尝试过的一些事情......

```
SELECT  
    invoices.*,
    users.fname as created_fname,
    users.lname as created_lname
FROM
    invoices
INNER JOIN users
    ON users.id = invoices.created_id; 
```

这可行，但它只会让我知道创建发票的人的姓名。我怎样才能将工作人员的名字也添加到其中......

```
SELECT 
    invoices.*, 
    users.fname as created_fname, 
    users.lname as created_lname,
    users2.fname as staff_fname,
    users2.lname as staff_lname
FROM invoices, users
LEFT JOIN
    invoices,
    users AS users2
ON
    users.id = invoices.created_id,
    users.id = users2.id 
```

这不起作用，但更接近。任何指导或示例都会非常有帮助。此外，如果您对学习如何进行更高级的 MySQL 查询的好书有任何建议，那也会很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T01:56:54.190

您需要在 table 上加入`users`table 两次`Invoice`。

```
SELECT  a.*,
        b.fname created_firstName,
        b.lname created_LastName,
        c.fname staff_firstName,
        c.lname staff_LastName      
FROM    Invoice a
        INNER JOIN users b
            ON a.created_id = b.id
        INNER JOIN users c
            ON a.staff_id = c.id 
```

最好的事情是你可以将他们的名字连接成一个使用`CONCAT`

```
SELECT  a.*,
        CONCAT(b.fname, ' ', b.lname) created_fullName,
        CONCAT(c.fname, ' ', c.lname) staff_fullName        
FROM    Invoice a
        INNER JOIN users b
            ON a.created_id = b.id
        INNER JOIN users c
            ON a.staff_id = c.id 
```

# javascript - 在每个实例化时声明对象原型的开销？

> ID：12649285
> 
> 赞同：-1
> 
> 时间：2012-09-29T01:53:33.863
> 
> 标签：javascript, prototype, private-members

因此，关于在原型方法中访问私有成员的话题已经有了很多讨论。我想到以下应该起作用：

```
function Test(){
    var private = "Private";
    this.instance = function(){
        return private;
    };

    Test.prototype.getPrivate = function(){
        return private;
    };
}
var test1 = new Test();
var test2 = new Test();
console.log(test1.instance === test2.instance);  // false
console.log(test1.getPrivate === test2.getPrivate);  // true 
```

[事实证明](http://jsfiddle.net/8DBTq/)，它确实有效。但是，我担心这样做可能会有一个缺点。

所以我的问题是：有缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T02:09:50.060

这不像您可能期望的那样工作，因为`test1`'s是`getPrivate()`私有`test2`的。

```
function Test(value){  
    var private = value;  
    this.instance = function(){ return private; };

    Test.prototype.getPrivate = function(){  
        return private;  
    };  
}  
var test1 = new Test("test1");  
var test2 = new Test("test2");
console.log(test1.getPrivate()); // test2
console.log(test2.getPrivate()); // test2 
```

所以它是否效率低下真的没关系，因为它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:10:49.493

我相信您在函数本身内部定义原型函数时确实犯了一个错误。这样每次生成实例时，所有实例可用的原型方法都会被覆盖......我猜这就是你看到的奇怪事情。

```
function Test(param){
    var private = param;

    this._getPrivate = function(){
        return private;
    };    
}
Test.prototype.getPrivate = function(){
    return this.instance();
};     
var test1 = new Test("One");
var test2 = new Test(2);
console.log(test1.getPrivate());
console.log(test2.getPrivate()); 
```

这个按预期工作。

但是，我不明白你需要原型函数来做什么......如果你只是将闭包定义为一个成员函数，就像你做的那样（将它添加到这个而不是让它成为本地），你会得到相同的语法与使用原型一样。嗯，不太明白你的意图 - 你可能只是在玩原型吗？*gg*

但是，如果您对访问属性感兴趣，请查看这段代码（EcmaScript 5 defineProperty），我从 - methinks - 令人惊叹的原型工具（没有 Prototypes 缺点）中取出 Sugar ...（他们实际上使用它来在 PropertyChange 上启用事件！无论如何，这太酷了，在旧版浏览器中不起作用 <-> ES 5！）

```
Object.defineProperty(myObj, MyProp, {
    'enumerable'  : true,
    'configurable': true,
    'get': function() {
      return value;
    },
    'set': function(to) {
      value = calculateSomething(to);
    }
 }); 
```

# html - 网站在 IE 中重定向到 404 但在其他浏览器上有效

> ID：12649286
> 
> 赞同：6
> 
> 时间：2012-09-29T01:53:38.720
> 
> 标签：html, internet-explorer, css

www.mycomputercure.com 在除 IE 之外的所有浏览器中都能正常工作。在 IE 中，它会在短暂加载索引页面后重定向到 404 页面。提前欣赏任何解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T02:08:49.990

只是一个猜测，基于检查页面的网络流量。

![在此处输入图像描述](../Images/2a6c31729f7344ced1cffe76e38bbb58.png)

Internet Explorer 执行 HTML 行为（HTC 文件）。没有其他浏览器可以做到这一点。您的页面有几个 HTC 的 404 错误。这些通常出现在其他请求被中止之前，并且 404 页面显示在 IE 中。

我不知道 IE 使用什么逻辑来检索 HTC 文件，但也许故意（或通过错误）遗漏一个会导致浏览器认为整个页面“未找到”。

[微软网站上的这个帖子](http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/getting-404-error-on-ie9-when-loading-website/89dccfa6-46a6-4a97-bc4b-972f33a38abf?msgId=b1576c26-270a-4c00-a398-961cad5d2bcb)听起来很相关，并暗示了其他可能性。

至少，从修复页面引起的任何 404 开始。

# css - 使用 line-height 垂直居中内联内容

> ID：12649287
> 
> 赞同：3
> 
> 时间：2012-09-29T01:53:46.797
> 
> 标签：css, alignment

除了两个图像链接之外，我正在尝试将一些文本垂直居中。我之前已经这样做了几十次，但由于某种原因，它现在无法正常工作。

这是代码：http: [//jsfiddle.net/KRWNw/](http://jsfiddle.net/KRWNw/)

```
<style type="text/css">
#social-icons {
    height:32px;
    line-height:32px;
}​
</style>

<div id="social-icons">
    Connect:
    <a href="#">
        <img src="http://mydomain.com/rodi/images/facebook.png" width="32" height="32" />
    </a>
    <a href="#">
        <img src="http://mydomain.com/rodi/images/youtube.png" width="32" height="32" />
    </a>
 </div>​ 
```

如果我将图像取出，文本会完美对齐，但其中的图像不会对齐。

我究竟做错了什么？？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T02:09:03.820

缺少的一件事是`vertical-align: middle;`，它只会让你半途而废。另一个问题是您的内联图像。如果您`float`将图像向左或向右，它将正确对齐。

[http://jsfiddle.net/tU4x7/](http://jsfiddle.net/tU4x7/)

在此示例中，图像位于内容的左侧，但如果将文本包装在跨度中，您也可以浮动文本。不过，还有其他解决方案可以实现相同的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T02:11:55.347

```
img{
 vertical-align:middle;
} 
```

使用这个 CSS。

[演示](http://jsfiddle.net/mangalauwu/KRWNw/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T02:17:27.603

```
img{vertical-align:middle;} 
```

但我不会那样使用它，因为图标不是页面或内容的真实部分。考虑使用 img 作为背景图像。有一个很棒的[CSS](http://zocial.smcllns.com/)框架

# android - 如何将 Java.util.calendar 设置为未来的特定时间段

> ID：12649288
> 
> 赞同：7
> 
> 时间：2012-09-29T01:53:46.313
> 
> 标签：android, calendar

我正在使用 Java 的日历在特定日期和时间设置闹钟。*当用户选择特定*的日期和时间时，我知道如何进行这项工作。例如，如果用户想在 2013 年 7 月 17 日上午 10:45 设置闹钟，我使用以下代码：

```
//Get the calendar instance.
Calendar calendar = Calendar.getInstance();       

//Set the time for the notification to occur.
calendar.set(Calendar.YEAR, 2013);
calendar.set(Calendar.MONTH, 6);
calendar.set(Calendar.DAY_OF_MONTH, 17);                 
calendar.set(Calendar.HOUR_OF_DAY, 10);
calendar.set(Calendar.MINUTE, 45);
calendar.set(Calendar.SECOND, 0); 
```

**当我想在特定日期和时间**设置警报时，上述所有代码都非常有效。我的问题是，我如何设置一个日历实例，用户用户希望闹钟在当前日期和时间后 20 分钟响起？因此，如果当前时间是下午 6:50，我需要闹钟在晚上 7:10 响起。如何以编程方式设置它？

我尝试通过 Java.util.calendar 的内置方法获取当前日期和时间，并尝试将 20 分钟添加到`Calendar.MINUTE`变量中。但是，如果当前时间距离午夜不到 20 分钟（日期会改变），或者距离另一个小时不到 20 分钟（小时会改变），我认为这不会奏效。我怎样才能解决这个问题？感谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T02:11:24.390

您想查看 calendar.add ，如果溢出，它将增加下一个字段。

[http://developer.android.com/reference/java/util/Calendar.html](http://developer.android.com/reference/java/util/Calendar.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-16T10:54:25.033

你也可以试试这个

```
 Calendar c = Calendar.getInstance();
 c.setTime(new Date()); // 
 c.add(Calendar.YEAR, 5); // Add 5 years to current year
 c.add(Calendar.DATE, 5); // Add 5 days to current date
 c.add(Calendar.MONTH, 5); // Add 5 months to current month
 System.out.println(c.getTime()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:18:56.717

您可以尝试此链接中指定的 calendar.set 方法。 [如何在 android 中为特定时间设置日历](https://stackoverflow.com/questions/5770219/how-to-set-the-calendar-in-android-for-particular-hour) 这对我有用，当我想在指定时间运行服务时。

# lisp - Sharpsign 等号阅读器宏的示例？

> ID：12649290
> 
> 赞同：2
> 
> 时间：2012-09-29T01:53:51.980
> 
> 标签：lisp, common-lisp

我见过这个用过一次，但不明白它的作用。参考说它是

> `#n=object`读作任何以 object 作为其打印表示的对象。但是，该对象由 n 标记，n 是必需的无符号十进制整数，以便通过语法 #n# 进行可能的引用。标签的范围是被最外层的 read 调用读取的表达式；在这个表达式中，同一个标签可能不会出现两次。

对我来说，这只是 56 个随机选择的英语单词……你能举个例子说明什么时候可以使用它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T02:07:08.150

**在 Common Lisp 中，它被阅读器和打印机使用。**

这样，您可以在某个 s 表达式中标记一个对象，并在 s 表达式中的不同位置引用它。

标签`#someinteger=`后跟一个 s 表达式。整数必须是唯一的。您不能在单个 s 表达式中使用该标签两次。

对标签的引用是`#someinteger#`。整数标识要引用的 s 表达式。必须先引入标签，然后才能引用它。引用可以在 s 表达式中多次使用。

例如，这用于读取和打印具有共享数据对象的循环列表或数据结构。

**这是一个简单的例子**：

```
? '(#1=(1 . 2) (#1#)) 
```

读作

```
((1 . 2) ((1 . 2))) 
```

还要注意这一点：

```
? (eq (first *) (first (second *)))
T 
```

这是一个相同的缺点单元。

**让我们尝试一个循环列表**。

确保打印机处理循环列表并且不会永远打印它们......

```
? (setf *print-circle* t)
T 
```

现在我们正在构建一个列表：

```
? (setf l1 (list 1 2 3))
(1 2 3) 
```

我们将最后一个 cdr 设置为第一个缺点：

```
? (setf (cdr (last l1)) l1)
#1=(1 2 3 . #1#) 
```

正如您在上面看到的，打印的列表有一个标签，最后一个 cdr 是对该标签的引用。

我们也可以使用相同的符号直接输入一个循环列表。读者理解它：

```
? '#1=(1 2 3 . #1#)
#1=(1 2 3 . #1#) 
```

由于我们已经告诉打印机处理此类结构，我们可以尝试第一个示例中的表达式：

```
? '(#1=(1 . 2) (#1#))
(#1=(1 . 2) (#1#)) 
```

现在打印机检测到有两个对同一个 cons 对象的引用。

# c# - 读取文本文件时，日期格式在 C# 中发生更改

> ID：12649296
> 
> 赞同：-1
> 
> 时间：2012-09-29T01:56:45.007
> 
> 标签：c#, wpf

我正在阅读具有以下数据格式的 csv 文件

```
14-Sep-12   ALUMINI 31-Dec-12   117.65  119.25  117.65  118.9   116.75  36
14-Sep-12   ALUMINI 30-Nov-12   116.95  118.65  116.8   118.4   116.5   252
14-Sep-12   ALUMINI 31-Oct-12   116.45  118.15  116.05  117.85  116.05  2802 
```

我正在使用以下代码读取此数据

```
List<string> sc = new List<string>();
filepath = "abc.csv" ;

FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.ReadWrite);
StreamReader sr = new StreamReader(fs);

if (fs != null)
{
  while ((oneLine = sr.ReadLine()) != null)
  {
     sc.Add(oneLine);
  }

  sr.Close();

  // Now writing above data in  some file , fo and fout are already declared 
  fo = new FileStream("tempd.txt", FileMode.Append, FileAccess.Write);
  fout = new StreamWriter(fo);

  foreach (string str in sc)
  {
    // i am using ' ' as one of my splitter character
    char[] splitter = { ' ', ',', '\t' };
    string[] sa1 = str.Split(splitter);

    string wline = sa1[0] + "," + sa1[1] + "," + sa1[5] + "," + sa1[6] + "," + sa1[7] ;
    fout.WriteLine(wline);
  }
  fout.Close();
} 
```

我最大的问题是第一列数据是 2012 年 9 月 14 日已更改为 2012 年 9 月 14 日（ - 缺失）。这在我的其余应用程序中造成了问题。

有什么方法可以在读写文件时转换日期格式，我想将此日期 2012 年 9 月 14 日存储为 2012 年 9 月 14 日。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:28:49.520

我认为这就是您正在寻找的答案。

```
DateTime d = Convert.ToDateTime(sa1[0]);

string wline = d.ToString("yyyy-MM-dd") + "," + sa1[1] + "," + sa1[5] + "," + sa1[6] + "," + sa1[7]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T02:46:56.517

你的问题没有多大意义，所以我在这里做一些假设。首先，您说它是一个 CSV 文件。CSV 代表逗号分隔值，但是当您显示示例时 - 我根本看不到逗号。我是否认为您已在 Microsoft Excel 中打开 CSV 并从那里复制到您的帖子中？

如果是这样，那么我会要求您在记事本（或其他文本编辑器）中打开原始 CSV 文件。您可能会看到您的原始数据实际上没有破折号。

基本上，当您在 CSV 文件中提供 2012 年 9 月 14 日的日期时，Excel 会识别这是一个日期，但随后会使用自己的默认日期格式对其进行格式化，这使得它在 Excel 中看起来像 14-Sep-12。

另一件事-您正在将整个文件读入字符串列表，然后将整个列表输出回重新格式化的新文件。与其将所有这些都加载到内存中，不如一次只操作一行？打开输入和输出文件，从输入中读取一行，对其进行操作，然后将其写入输出。然后循环到下一行并在完成后关闭这两个文件。您会发现这使用更少的内存并且通常运行得更快。

如果你想重新格式化日期，这很容易。只需将字符串解析为日期即可。然后使用 .ToString() 中的字符串格式化程序控制日期的输出。我相信 Geetanga 的回答很好地说明了这一点，但 Date.Parse() 通常比 Convert.ToDateTime() 更受欢迎。

# mpi - MPI的一个非常奇怪的行为

> ID：12649302
> 
> 赞同：2
> 
> 时间：2012-09-29T01:57:06.390
> 
> 标签：mpi

我在使用 MPI 时遇到了一个非常奇怪的错误。无法删除成功创建的通讯器。删除尝试会在所有节点上导致 FATAL ERROR，但通信器组中包含的节点除外。最小的工作示例如下。您如何看待这种奇怪行为的原因？

```
#include <stdio.h>
#include <mpi.h>

int main(int argc, char* argv[])
{
    MPI_Group group_world;              // group of MPI_COMM_WORLD
    MPI_Group group_new;                // new group
    MPI_Comm  comm_new;                 // new communicator 
    int group_new_ranks[3]={10,20,30};  // new communicator's ranks 

    MPI_Init(&argc, &argv);

    MPI_Comm_group(MPI_COMM_WORLD, &group_world);                 // get group_world - MPI_SUCCESS for all nodes
    MPI_Group_incl(group_world, 3, group_new_ranks, &group_new);  // get new group - MPI_SUCCESS for all nodes
    MPI_Comm_create(MPI_COMM_WORLD, group_new, &comm_new);        // create new communicator - MPI_SUCCESS for all nodes

    MPI_Comm_free(&comm_new);   // FATAL ERROR for all nodes except 10, 20, 30
    MPI_Group_free(&group_new);
    MPI_Group_free(&group_world);

    MPI_Finalize();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T03:10:48.480

[`MPI_Comm_create()`](http://www.netlib.org/utk/papers/mpi-book/node137.html#SECTION00642000000000000000)返回`MPI_COMM_NULL`到不在组内的所有进程。您正在传递`MPI_COMM_NULL`给[`MPI_Comm_free()`](http://www.netlib.org/utk/papers/mpi-book/node138.html#SECTION00643000000000000000)，这是不允许的。

# javascript - 表单重定向以保存 cookie

> ID：12649314
> 
> 赞同：0
> 
> 时间：2012-09-29T02:02:22.997
> 
> 标签：javascript, jquery, forms, cookies

嘿伙计们，我有这个代码；

```
<Script language="JavaScript">
function goto(form) { var index=form.select.selectedIndex
if (form.select.options[index].value != "0") {
location=form.select.options[index].value;}}
</SCRIPT>
<FORM NAME="form1">
<SELECT NAME="select" ONCHANGE="goto(this.form)" SIZE="1">
<OPTION VALUE="">-------Choose a Selection-------
<OPTION VALUE="/">Home
<OPTION VALUE="page.htm">Area 1
<OPTION VALUE="page.htm">Area2
<OPTION VALUE="page.htm">Area 3 
<OPTION VALUE="page.htm">Area 4
<OPTION VALUE="page.htm">Area 5</SELECT>
</FORM> 
```

我想要做的是在用户单击其中一个时生成一个 cookie，然后当他们返回我的网站时，如果 cookie 存在，它将重定向到该页面。基本上这将是一个感兴趣的区域。虽然我想要它，所以如果他们想搜索其他地区，他们可以去其他地区。

我不知道我需要什么，有人可以帮助我理解 cookie ui 以及我将如何将其实现到此代码中吗？

如果您需要任何其他信息，请询问我愿意回答并提供更多信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:09:21.460

你可以调用这个函数

```
 <SELECT NAME="select" ONCHANGE="doThis(someParameters)" SIZE="1"> 
```

然后包括这些javascript函数

```
function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

function doThis(someVal){
if (someVal==1){
setCookie("myCookie",someVal, someTime);
window.location.href = "page1.htm"; // if u wish to redirect then itself
}
//similarly for others 
if (someVal==2){

}
} 
```

# memory - 程序使用多少堆栈？

> ID：12649316
> 
> 赞同：1
> 
> 时间：2012-09-29T02:02:52.967
> 
> 标签：memory, callstack

实际上，我并不期待具体问题的答案。我真的想知道是否有任何研究可以深入了解整个频谱的使用模式。

更准确地说：是否有任何关于调用堆栈程序通常在不同平台、工作负载、编译器等中使用多少的已发布调查？

**编辑：**回应一些评论认为这个问题毫无意义......

我自己的观察暗示堆栈利用率遵循类似于指数分布的东西，平均值约为数十字节。我希望能对不同维度上的平均值的稳定性给出某种指示。即，如果我测量了各种程序的堆栈消耗，无论我如何对结果进行分组，它们是否会显示出相似的 pdf，或者说，Linux 程序平均而言比 Windows 程序具有更大/更小的堆栈，或静态类型语言与动态类型语言，等等？

相比之下，总 RAM 使用量受手头问题的具体情况影响，特别是该程序有效执行其职责所需的工作集。我的假设是堆栈利用率的分布在广泛的环境中会相对稳定，我只是想知道这个或类似的假设是否被证实或证伪。

（注意：我不会假装我的观察是准确的、全面的或以任何方式科学的。这就是我在这里提出问题的原因。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:11:58.030

我可以用某种方式解释你的问题。在 Java 中，默认的原生堆栈大小为 128k，最小值为 1000 字节。默认的 java 堆栈大小为 400k，最小值为 1000 字节。当然，您可以分别使用 -ss 和 -oss 参数来扩展大小。
更准确地说：我不了解您对跨平台堆栈的已发布调查的需求。

# c# - Linq 加入群组

> ID：12649321
> 
> 赞同：3
> 
> 时间：2012-09-29T02:06:06.847
> 
> 标签：c#, linq, entity-framework

好的，我正在尝试将以下 SQL 查询复制到 Linq 表达式中：

```
SELECT
    I.EmployeeNumber,
    E.TITLE,
    E.FNAM, 
    E.LNAM
FROM
    Incidents I INNER JOIN Employees E ON I.IncidentEmployee = E.EmployeeNumber
GROUP BY
    I.EmployeeNumber,
    E.TITLE,
    E.FNAM, 
    E.LNAM 
```

很简单（或者至少我认为）：

```
var query = (from e in contextDB.Employees
              join i in contextDB.Incidents on i.IncidentEmployee = e.EmployeeNumber
              group e by new { i.IncidentEmployee, e.TITLE, e.FNAM, e.LNAM } into allIncEmps
              select new
                          {
                              IncEmpNum = allIncEmps.Key.IncidentEmployee
                              TITLE = allIncEmps.Key.TITLE,
                              USERFNAM = allIncEmps.Key.FNAM,
                              USERLNAM = allIncEmps.Key.LNAM
                          }); 
```

但是我没有得到我期望的结果，所以我启动了 SQL Profiler 以查看通过管道发送到 SQL Server 的内容，这就是我所看到的：

```
SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM ( SELECT DISTINCT 
        [Extent2].[IncidentEmployee] AS [IncidentEmployee], 
        [Extent1].[TITLE] AS [TITLE], 
        [Extent1].[FNAM] AS [FNAM], 
        [Extent1].[LNAM] AS [LNAM]
        FROM  [dbo].[Employees] AS [Extent1]
        INNER JOIN [dbo].[INCIDENTS] AS [Extent2] ON ([Extent1].[EmployeeNumber] = [Extent2].[IncidentEmployee]) OR (([Extent1].[EmployeeNumber] IS NULL) AND ([Extent2].[IncidentEmployee] IS NULL))
    )  AS [Distinct1]
)  AS [GroupBy1] 
```

从发送到 SQL Server 的 SQL 字符串中可以看出，我期望返回的字段都没有包含在 Select 子句中。我究竟做错了什么？

**更新**

这是漫长的一天，我再次重新运行代码，现在这是正在发送到管道中的 SQL：

```
SELECT 
[Distinct1].[IncidentEmployee] AS [IncidentEmployee], 
[Distinct1].[TITLE] AS [TITLE], 
[Distinct1].[FNAM] AS [FNAM], 
[Distinct1].[LNAM] AS [LNAM]
FROM ( SELECT DISTINCT 
    [Extent1].[OFFNUM] AS [OFFNUM], 
    [Extent1].[TITLE] AS [TITLE], 
    [Extent1].[FNAM] AS [FNAM], 
    [Extent1].[LNAM] AS [LNAM]
    FROM  [dbo].[Employees] AS [Extent1]
    INNER JOIN [dbo].[INCIDENTS] AS [Extent2] ON ([Extent1].[EmployeeNumber] = [Extent2].[IncidentEmployee]) OR (([Extent1].[EmployeeNumber] IS NULL) AND ([Extent2].[IncidentEmployee] IS NULL))
)  AS [Distinct1] 
```

但是当我尝试遍历记录集时仍然没有看到结果

```
foreach (var emps in query)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:48:53.650

不知道为什么查询不返回它应该返回的内容，但我想到，因为您只查询组键而不是任何分组结果，所以除了 a 之外什么都没有`Distinct()`：

```
var query =
(from e in contextDB.Employees
 join i in contextDB.Incidents on i.IncidentEmployee equals e.EmployeeNumber
 select new
 {
     IncEmpNum = i.IncidentEmployee
     TITLE = e.TITLE,
     USERFNAM = e.FNAM,
     USERLNAM = e.LNAM
 }).Distinct(); 
```

但是 EF 足够聪明，也能看到这一点，并且也创建了一个 DISTINCT 查询。

您没有指定您期望的结果以及实际结果以何种方式不同，但我真的看不出分组如何产生与 a 不同的结果`Distinct`。

But how did your code compile? As xeondev noticed: there should be an `equals` in stead of an `=` in a join statement. My compiler (:D) does not swallow it otherwise. The generated SQL join is strange too: it also matches records where both joined values are NULL. This makes me suspect that at least one of your keys (`i.IncidentEmployee` or `e.EmployeeNumber`) is nullable and you should either use `i.IncidentEmployee.Value` or `e.EmployeeNumber.Value` or both.

# ruby-on-rails - 当已经有一个没有嵌套数据的计数器时使用与计数器缓存的关联

> ID：12649330
> 
> 赞同：0
> 
> 时间：2012-09-29T02:08:14.617
> 
> 标签：ruby-on-rails, activerecord

我将一个数据库模式及其内容从一个旧站点导入到一个 Rails 项目中。

我有 DVD 和选票。投票只是 DVD 模型中的一个整数字段，例如`Dvd.votes:integer=10`.

由于我还可以在 Rails 中轻松地将新投票与用户相关联，因此我创建了一个`Vote`属于`Dvd`和模型的新模型`User`。

我的情况是，现在调用时`Dvd.first.votes`我得到一个空数组 []，因为 Vote 模型上还没有数据，但`votes_count`仍然有导入的计数。

（在添加模型并添加到投票模型后，我还将`Dvd.votes`字段重命名为。）`Dvd.votes_count``Vote``belongs_to :dvd, :counter_cache => true`

我不确定这个问题的理想解决方案是什么。我应该通过简单的查询来投票`Dvd.votes_count`还是有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:16:38.510

抱歉，这可能不是您问题的答案，但我建议不要创建自己的解决方案，而是使用 已优化的 gem： [https ://github.com/bouchard/thumbs_up。](https://github.com/bouchard/thumbs_up)在您的情况下，它可能会节省很多时间。所以你需要安装 gem 然后将现有的投票导入它。

# android - Parcelable 优于 JSON 的优势

> ID：12649341
> 
> 赞同：5
> 
> 时间：2012-09-29T02:09:22.230
> 
> 标签：android, serialization, jackson, parcelable, org.json

我目前正在使用 JSON (org.json) 来序列化我的一个数据类。当我在 Bundle 或 Intent 中传递它时，我只需在发送方调用 .toString() ，然后在接收方重新创建类。从我目前所读的所有内容来看，由于性能问题，我不应该实现 Java 的 Serializable。我正在重写应用程序的某些部分，我正在考虑让我的数据类实现 Parcelable 并以这种方式传输它们。如果我这样做会有什么好处？如果我改用 Jackson JSON 库会更好吗？大多数 JSON 工作是基于 API 的；服务器仅使用 JSON 响应。我还在应用程序端存储了一些用于缓存的 JSON。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T04:33:33.057

我认为 JSON 是迄今为止典型 POJO 最方便的机制。并且性能似乎不太可能比 Parcelable 差很多。Parcelable 实现可以更紧凑；但如果这有问题，您甚至可以压缩缓存的 JSON 有效负载。所以我可能会先尝试 JSON，看看它是如何工作的。

# jquery - 如何获取从此 ajax 调用返回的数据以用作 vars？

> ID：12649343
> 
> 赞同：0
> 
> 时间：2012-09-29T02:09:54.467
> 
> 标签：jquery

Ajax 调用的新手。需要一些指导来开始我的学习，但想用一个真实的例子来做。

此链接：[http ://api.tumblr.com/v2/blog/david.tumblr.com/info?api_key=API_KEY](http://api.tumblr.com/v2/blog/david.tumblr.com/info?api_key=API_KEY)

将此返回到我的浏览器，这是我将使用的数据的一个很好的示例：

```
{
    "meta": {
        "status": 200,
        "msg": "OK"
    },
    "response": {
        "blog": {
            "title": "David\u2019s Log",
            "posts": 3981,
            "name": "david",
            "url": "http:\/\/www.davidslog.com\/",
            "updated": 1348785660,
            "description": "\u201cMr. Karp is tall and skinny, with unflinching blue eyes and a mop of brown hair. He speaks incredibly fast and in complete paragraphs.\u201d \u2013&nbsp;NY&nbsp;Observer",
            "ask": false
        }
    }
} 
```

我想我可以以此为起点，但绝对可以接受其他方式：

```
var tumblrURL = "david.tumblr.com";

jQuery.ajax({
    url: "http://api.tumblr.com/v2/blog/" + tumblrURL + "/info",
    data: {api_key: "MY_PRIVATE_API_KEY"},
    dataType: "jsonp",
});​ 
```

但是我不知道正确的方法来解析并返回不同的位并将它们用作变量或用于调用中的测试。

例如，如何获取“状态”或“名称”？

当状态为 200 时，我想用名称（“david”）创建一个 var 并将其用于其他选项。

或者，如果状态是 404，那么我想做其他事情（比如返回错误）。

Please, no flames. I'm trying to learn and if I get a few examples or pointers I will be able to move on to more interesting stuff. I'm OK with other aspects of jQuery so those issues should be fine.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:43:16.523

The `jQuery.Ajax` function [takes an optional function parameter `success`](http://api.jquery.com/jQuery.ajax/):

> success(data, textStatus, jqXHR)
> 
> A function to be called if the request succeeds. The function gets passed three arguments: The data returned from the server, formatted according to the dataType parameter; a string describing the status; and the jqXHR (in jQuery 1.4.x, XMLHttpRequest) object. As of jQuery 1.5, the success setting can accept an array of functions. Each function will be called in turn. This is an Ajax Event.

You could set this to your own function, which would automatically execute once the request succeeds - providing you with the entire JSON blob you receive as a normal Javascript object. In your case, you could get the status of the request at `data.meta.status` - or the name at `data.response.blog.name`.

Note that jQuery also allows for error handlers on Ajax requests, called automatically in a similar way: `error(jqXHR, textStatus, errorThrown)`.

* * *

Example code:

```
jQuery.ajax({
    url: "http://api.tumblr.com/v2/blog/" + tumblrURL + "/info",
    data: {api_key: "MY_PRIVATE_API_KEY"},
    dataType: "jsonp",
    success: function(data, textStatus, jqXHR) {
        // Do whatever you'd like in here with your data
        console.log("Got a response from " + data.response.blog.name);
    },
    error: function(jqXHR, textStatus, errorThrown) {
        // Do whatever you'd like in here with your ERROR data
        alert("Got an error: " + textStatus);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T03:02:46.183

Generally after a ajax call happens , if the request is a success i.e, if you get the response you access it in the success callback function...

```
jQuery.ajax({
    url: "http://api.tumblr.com/v2/blog/" + tumblrURL + "/info?api_key=MY_PRIVATE_API_KEY",  // The url you want to pass
    dataType: "jsonp",  // The type of format expecting
    data: "{}",  // Your data to be sent
    success: function(result) {   // If ajax is a success
       alert('Ajax request Success !!');
   },
    error: error(jqXHR, textStatus, errorThrown) {  //If error in ajax
        alert('Error occured  : ' + errorThrown);
    }
}); 
```

This is just the basic setup of ajax request.. You have many more options whih you can look up in [jQuery Documentation](http://api.jquery.com/jQuery.ajax/) .

The jsonp data you get in the callback look's like the one in the example..

Here result is a object .. You generally use **.** notation or [] notation to access the result.

To get the data **inside meta** you use `result.meta.status` To get the data **inside name** you use `result.response.blog.name`

You can always use console.log( result.meta.status) to log the value onto the console.

# ibm-mq - 与来自 WMQ 的 ACTCHL、MAXCHL、MAXCHANNELS 和 MAXACTIVECHANNELS 混淆

> ID：12649346
> 
> 赞同：1
> 
> 时间：2012-09-29T02:10:38.793
> 
> 标签：ibm-mq, mq

我对 之间的关系有点困惑`ACTCHL, MAXCHL, MAXCHANNELS and MAXACTIVECHANNELS`。属性`ACTCHL`与`MAXACTIVECHANNELS`, 和相同`MAXCHL`吗`MAXCHANNELS`？另外，它们的默认值是多少？我可以看到**100**或**200**，不确定哪个是正确的。

谢谢

我只是找到`ACTCL`并`MAXCHL`适用于 z/OS，但`MAXCHANNELS`适用`MAXACTIVECHANNELS`于开放系统。天气晴朗。但是，请帮助回答默认值问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:29:22.090

奇怪的是，最好的参考是 WMQ Explorer 手册，而不是 WMQ 手册。[*队列管理器属性*](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.explorer.doc/e_properties_qmanager.htm)主题中的表格列出了设置、它们的默认值以及在某些情况下它们之间的关系。当您到达那里时，请使用您的浏览器搜索特定属性（即 MAXACTIVECHANNELS），因为这些故事是根据 WMQ Explorer 中的选项卡而不是严格的字母顺序组织的。

# c# - 如何在 C# 中传递通配符

> ID：12649349
> 
> 赞同：5
> 
> 时间：2012-09-29T02:11:17.943
> 
> 标签：c#, generics

我有以下内容：

```
public class Foo<T> : Goo
    where T: SomeClass<?>, new() 
```

我知道 ？不是 C# 中的真正通配符，但是，您将如何在 C# 中正确编写它，以便 SomeClass 可以将任何类作为参数？我尝试使用对象，但随后出现错误“...没有来自...的隐式引用转换”

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T02:13:19.457

您必须指定第二个类型参数（即`Y`在我的示例中），注意它`Y`可以是任何东西，因为没有限制，甚至与`T`.

```
public class Foo<T, Y> : Goo
    where T: SomeClass<Y>, new() 
```

如果您只需要`SomeClass<Y>`在泛型类中使用，另一种选择是仅指定第二个类，您不需要 new() 限制，因为编译器事先知道`SomeClass<T>`具有默认构造函数：

```
public class Foo<Y> : Goo{
  public SomeClass<Y> Value;

  public void Setup() { Value = new SomeClass<Y>(); }
} 
```

# linux - “opt”是什么意思（如在“opt”目录中）？是缩写吗？

> ID：12649355
> 
> 赞同：324
> 
> 时间：2012-09-29T02:11:49.150
> 
> 标签：linux, unix, directory, terminology

“opt”是什么意思（如在“opt”目录中）？我通常在 Unix 系统中看到这个目录，里面有开发工具。

是缩写吗？

* * *

## 回答 #1

> 赞同：367
> 
> 时间：2012-09-29T02:22:47.253

在过去，“/opt”被 AT&T、Sun、DEC 等 UNIX 供应商和 3rd-party 供应商用来保存“Option”包；即您可能已经支付额外费用的包裹。我不记得在 Berkeley BSD UNIX 上看到过“/opt”。他们使用“/usr/local”来存放您自己安装的东西。

但当然，不同目录的真正“含义”总是有些模糊。这可以说是一件好事，因为如果这些目录具有精确（并且严格执行）的含义，您最终会得到不同目录名称的扩散。

[文件系统层次标准](https://refspecs.linuxfoundation.org/FHS_3.0/fhs/index.html)对“/opt/*”这样说：

> " */opt 保留用于安装附加应用程序软件包。* "

相比之下，它说的是“/usr/local/*”：

> " */usr/local 层次结构供系统管理员在本地安装软件时使用。* "

如今，“/usr/local/*”通常用于安装本地*构建*的软件，可能在调整配置选项等之后。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-29T02:14:52.150

它通常描述为`optional add-on software packages`[source](http://www.pathname.com/fhs/pub/fhs-2.3.html#OPTADDONAPPLICATIONSOFTWAREPACKAGES)或任何不属于基本系统的内容。只有一些发行版使用它，其他发行版只使用`/usr/local`.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-09-29T02:13:58.467

`OPT`离子

它包含您安装的系统运行不需要的可选软件和软件包。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-09-29T02:19:19.540

附加软件包。

有关详细信息，请参阅[http://www.pathname.com/fhs/2.2/fhs-3.12.html](http://www.pathname.com/fhs/2.2/fhs-3.12.html)。

也在[Wikipedia](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)上进行了描述。

它的使用至少可以追溯到 1980 年代后期，当时它是 System V UNIX 的标准部分。如今，它也出现在 Linux、Solaris（即 SysV）、OSX Cygwin 等中。其他 BSD Unix（FreeBSD、NetBSD 等）倾向于遵循其他规则，因此您通常不会看到带有 /opt 的 BSD 系统除非它们由在其他环境中更舒适的人管理。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-29T02:15:38.350

它是 'optional' 的缩写，用于某些发行版中的可选软件。

# forms - 如果用户未输入任何值，如何自动将默认值插入文本区域？

> ID：12649356
> 
> 赞同：0
> 
> 时间：2012-09-29T02:11:48.833
> 
> 标签：forms, webforms, textarea

我有一个包含几个 textarea 的表单，如果用户选择不在 textarea 字段中包含任何数据，我需要找到一种方法来自动插入单词“null”作为 textarea 值。我将非常感谢任何愿意帮助我解决这个问题的人。谢谢！

这是代码的副本：

```
<?php
$title = "Add a New Page";
$url = "add";
$metadescription = "Create and publish a new page";
include('/templates/head.php');
echo ('<title>'.$title.'</title>
<meta name="description" content="'.$metadescription.'" />');
include('/templates/meta.php');
echo ('<div id="content">');
include('/page-creator.php'); 
?>
<h2>Add a New Page</h2>
<form method="post" action="#">
<input type="hidden" name="url" value="null">
<input type="hidden" name="commentform" value="yes">
<h3>Author and Page Information (Required):</h3>
<p><strong>Author Name</strong>: <input style="width:250px;" type="text" name="authorname" value="null"></p>
<hr>
<p><strong>Author URL</strong>: <input style="width:250px;" type="text" name="authorurl" value="null"></p>
<hr>
<p><strong>Page Title</strong>: <input style="width:250px;" type="text" name="title" value="null"></p>
<hr>
<p><strong>Page Date</strong>: <input style="width:250px;" type="text" name="pagedate" value="<?php echo date('D, M d Y, g:ia T'); ?>"></p>
<hr>
<p><strong>Brief Description</strong>: One or two sentences.<br/><br/>
<textarea style="width:95%; height:50px;" name="metadescription">null</textarea></p>
<hr>
<h3>Top Section (Required):</h3>
<p><strong>TOP SECTION CONTENT</strong>: In plain text format (NO HTML) describe the details.<br/><br/>
<textarea style="width:95%; height:100px;" name="topsectioncontent"></textarea></p>
<hr>
<p><strong>TOP SECTION IMAGE</strong>: <input style="width:250px;" type="text" name="topsectionimage"></p>
<hr>
<p><strong>TOP SECTION CODE</strong>: Enter css, html, php or other scripting code.<br/><br/>
<textarea style="width:95%; height:100px;" name="topsectioncode">null</textarea></p>
<hr>
<h3>Middle Section (Optional):</h3>
<p><strong>MIDDLE SECTION CONTENT</strong>: In plain text format (NO HTML) describe the details.<br/><br/>
<textarea style="width:95%; height:100px;" name="middlesectioncontent">null</textarea></p>
<hr>
<p><strong>MIDDLE SECTION IMAGE</strong>: <input style="width:250px;" type="text" name="middlesectionimage" value="null"></p>
<hr>
<p><strong>MIDDLE SECTION CODE</strong>: Enter css, html, php or other scripting code.<br/><br/>
<textarea style="width:95%; height:100px;" name="middlesectioncode">null</textarea></p>
<hr>
<h3>Bottom Section (Optional):</h3>
<p><strong>BOTTOM SECTION CONTENT</strong>: In plain text format (NO HTML) describe the details.<br/><br/>
<textarea style="width:95%; height:100px;" name="bottomsectioncontent">null</textarea></p>
<hr>
<p><strong>BOTTOM SECTION IMAGE</strong>: <input style="width:250px;" type="text" name="bottomsectionimage" value="null"></p>
<hr>
<p><strong>BOTTOM SECTION CODE</strong>: Enter css, html, php or other scripting code.<br/><br/>
<textarea style="width:95%; height:100px;" name="bottomsectioncode">null</textarea></p>
<hr>
<h3>Credits and Footnotes (Optional):</h3>
<p><strong>Ref #1 Name:</strong>: <input style="width:250px;" type="text" name="ref01name" value="null"></p>
<p><strong>Ref #1 URL:</strong>: <input style="width:250px;" type="text" name="ref01url" value="null"></p>
<hr>
<p><strong>Ref #2 Name:</strong>: <input style="width:250px;" type="text" name="ref02name" value="null"></p>
<p><strong>Ref #2 URL:</strong>: <input style="width:250px;" type="text" name="ref02url" value="null"></p>
<hr>
<p><strong>Ref #3 Name:</strong>: <input style="width:250px;" type="text" name="ref03name" value="null"></p>
<p><strong>Ref #3 URL:</strong>: <input style="width:250px;" type="text" name="ref03url" value="null"></p>
<hr>
<input type="submit" value="Publish">
</form>
<?php
include('/templates/footer.php'); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:08:29.670

因此，如果您使用的是 jQuery，那么当他们单击提交按钮时，您会执行类似的操作，返回 true 以便在此函数运行后继续提交。

```
 $(function() {
    $('#submitButton').click(function() {
        $('textarea').each(function(element) {
            if ($(this).text() === '') {
                $(this).text('null');
            }
        });
            return true;
    });
}); 
```

​我有一个 JSFiddle，你可以尝试看看它的作用。

[JSFiddle](http://jsfiddle.net/DarkLord/KDeUH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T02:43:25.320

在以下情况下使用速记：

```
var myValue = myText.value ? myText.value : 'null'; 
```

这本质上是：

```
var myValue = function() {
    if (myText.value) {
        return myText.value;
    } else {
        return 'null';
    }
} 
```

话虽如此，我认为您不应该在客户端上包含此逻辑。如果您可以控制这种情况，那么无论您发送这些值如何处理这种情况，这可能是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T02:18:51.777

我假设您不希望 UI 中出现“null”一词。我还假设您正在处理某种服务器端脚本中的返回值。

在这种情况下，我会简单地测试存储在 textareas 中的值的长度，如果长度为零（并记住使用 TRIM 和字符串清理例程检查输入的空格等）我会简单地做（伪代码） ：

```
if (mytextarea1.text.length == 0)mytextarea1.text='null'
if (mytextarea2.text.length == 0)mytextarea2.text='null' 
```

等等

# java - 更好的方法来做到这一点 Servlet/bean 将表名从 servlet 传递到 java 中的 bean 类

> ID：12649373
> 
> 赞同：-2
> 
> 时间：2012-09-29T02:17:08.070
> 
> 标签：java, jsp, servlets, javabeans

我有一堆接近 100 的产品，每个产品在 DB 中都有自己的表，为此我已经为每个产品实现了搜索功能，现在我正在考虑重用代码，因为除了少数参数和表名其余逻辑都保留相同的，

字符串测试 = request.getParameter("test");

测试是包含产品信息的下拉列表，

我的想法是

```
if ( test.equals(ProductA)) {
          List<searchbean> list = dao.fetchDBRecords(tableA,other parameters of form);
        } 
```

列表中的参数传递给 sql 查询。

现在我的问题是，对多个产品使用一个类是否有意义，或者对每个产品使用单独的类更有意义。

我问这个有两个原因，在一段时间内，我的代码库似乎增加了很多（300 多个类），我需要一种方法来控制它的进一步增长。这通常是如何处理的？如果我为多个产品选择单一课程，我会遇到任何需要注意的并发问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T02:19:31.673

我不喜欢“每个产品的类”或“每个产品的表”模型。您不必在每次添加或删除产品时都修改代码。您将不得不稍微抽象地考虑这个问题，但只要您不走得太远并造成无法辨认的混乱，这将是值得的。

你总是需要担心并发问题，但我认为这对于任何一种设计都是正确的。

您有 300 多个课程，并且要添加更多课程？你担心*并发*吗？并发性当然很重要，但您必须首先驯服您的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T07:08:09.460

1.  确保不会通过从请求中获取参数并注入查询来创建 SQL 注入问题。
2.  您应该对所有产品使用相同的类。如果某些产品具有附加功能，请使用属性映射（首选），或使用继承从主产品类派生子产品。
3.  对所有产品使用一个类不会有任何并发​​问题。您只会遇到来自多个线程的类实例（不是类，而是类的实例）的并发问题。
4.  按照您的操作方式，您将有超过 300 次比较（if (parameter.equals(product1){...}）。更通用的方法是预填充哈希映射并使用参数作为键查找值：

    Map<String, String> tableNameMap=new HashMap<String, String>(); tableNameMap.put("param1","table1");
    tableNameMap.put("param2","table2");

    String paramValue=request.getParameter("test");
    String tableName=tableNameMap.get(paramValue);

# android - 应用程序需要所有插入、删除联系人的通知

> ID：12649377
> 
> 赞同：2
> 
> 时间：2012-09-29T02:17:43.553
> 
> 标签：android, android-contacts, contentobserver

（下面添加了工作代码摘录）

我的应用需要收到所有联系人的插入和删除（可能还有更新，但不太重要）的通知。这意味着当应用程序启动时，它需要一个更改列表。在运行时应立即通知它（甚至可以在运行时对应用程序外部的联系人进行更改吗？）。

我应该使用 ContentObserver 吗？我需要服务吗？有没有办法在应用程序启动时获取自应用程序上次运行以来发生的更改列表？

谢谢。

* * *

ContentObserver 确实有效。但是，对于联系人来说，它的作用比我希望的要少得多。您只会收到某事已更改的通知（实际上，您可能会收到多个通知）。你不会知道发生了什么变化。我猜总比没有通知好。

当您收到通知时，您必须运行查询以查明您感兴趣的任何联系人是否已更改。如果您需要检查所有这些，我认为您最好使用 SyncAdapter。

这是我最终使用的代码。首先是一个 ContentObserver 子类；这会接收来自您注册的任何提供商的通知（请参阅下一个代码块）：

```
 class MainContentObserver extends ContentObserver
  {
    public MainContentObserver (Handler handler)
    {
      super (handler);
    }

    @Override
    public void onChange (boolean selfChange)
    { 
      Message msg = handler.obtainMessage();
      msg.what = CONTACTS_CHANGED; // const int declared elsewhere
      msg.obj = null;
      handler.sendMessage (msg);
    }
  } 
```

这是第二块 - 这是来自您的活动的 onCreate（或者它可能在 onResume 中）。有两个重要部分。一，我实现并实例化一个处理程序。这将接收来自观察者的“消息”，观察者在单独的线程中运行，并将它们转发给我的活动。第二部分是观察者的创建，它通过注册调用发生。

```
 @Override
  public void onCreate (Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);

    // receive notices from our background threads.
    handler = new Handler()
    {
      @Override
      public void handleMessage (Message msg)
      {
        if (msg.what == CONTACTS_CHANGED)  // const int declared elsewhere
          System.out.println ("handler: contacts changed");
        else
          throw new IllegalArgumentException ("unrecognized handler message source: " + msg.what);
      }
    };

    // register content observer for contact changes
    contactsObserver = new MainContentObserver (handler);
    getContentResolver().registerContentObserver (ContactsContract.AUTHORITY_URI, true, 
                                                  contactsObserver);

    ... other initialization ...
  } 
```

最后，还有一段代码——你需要注销观察者，否则（我已经读过）你会有内存泄漏。（如果您在 onResume 中注册，请务必在 onPause 中取消注册。）

```
 @Override
  public void onDestroy ()
  {
    super.onDestroy();
    getContentResolver().unregisterContentObserver (contactsObserver);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:41:34.537

我知道你想做的事情没有广播。ContentObserver 是您必须使用的。另请检查： [本机联系人更改通知](https://stackoverflow.com/questions/6595090/native-contact-change-notification)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:38:55.167

我认为 ContentObserver 是更好的选择，您可以参考以下[ContentOberver](https://stackoverflow.com/questions/1401280/how-to-listen-for-changes-in-contact-database)

处理联系人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T04:04:23.013

我认为您将不得不查看广播接收器的问题..

# c# - 如何检查泛型方法的类型 T 是否为 IEnumerable<> 并循环它？

> ID：12649378
> 
> 赞同：7
> 
> 时间：2012-09-29T02:17:48.753
> 
> 标签：c#, generics

我想做这样的事情

```
void DoSomething<T>(T param)
{
    if param is IEnumerable<?>
    {
        loop param and do stuff
    }
} 
```

我不知道在问号的地方该怎么做。这有可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T02:23:09.947

您正在寻找的是：

```
if (T is IEnumerable) { .. } 
```

但是如果您希望 T 始终是 IEnumerable ，您可以这样做：

```
void DoSomething<T>(T param) where T : IEnumerable
{
    foreach (var t in param) { ... }
} 
```

或检查 IEnumerable 中值的类型：

```
public void DoSomething<T,U>(T val) where T : IEnumerable<U>
{
    foreach (U a in val)
    {
    }
} 
```

无需担心自己检查，编译器会为您完成，这是拥有静态类型系统和编译器的好处之一 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T02:25:25.953

有几种方法：

```
void DoSomething<T>(T param)
{
    if (param is IEnumerable)
    {
        foreach (var item in (IEnumerable)param)
        {
            // Do something
        }
    }
}

void DoSomething<T>(T param)
{
    if (param is IEnumerable<string>)
    {
        foreach (var item in (IEnumerable<string>)param)
        {
            // Do something
        }
    }
}

void DoSomething<T,TItem>(T param)
{
    if (param is IEnumerable<TItem>)
    {
        foreach (var item in (IEnumerable<TItem>)param)
        {
            // Do something
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T02:37:20.507

您必须检查该类实现的每个接口的开放泛型类型，如下所示：

```
bool implements = typeof(T).GetInterfaces().Where(t => t.IsGenericType && 
    t.GetGenericTypeDefinition() == typeof(IEnumerable<>)).Any(); 
```

这将允许您在`IEnumerable<T>`不知道类型是什么的情况下确定类型是否实现`T`。请记住，该类型可以实现`IEnumerable<T>`多次。

如果您只是想要作为类型参数的类型序列`IEnumerable<T>`，您可以将上述查询更改为；

```
IEnumerable<Type> types = typeof(T).GetInterfaces().
    Where(t => t.IsGenericType && 
        t.GetGenericTypeDefinition() == typeof(IEnumerable<>)).
    Select(t => t.GetGenericArguments()[0]); 
```

# ios - iOS：ipad 2 和 3 上的 aiff quiet

> ID：12649380
> 
> 赞同：2
> 
> 时间：2012-09-29T02:18:11.493
> 
> 标签：ios, avaudioplayer, aiff

三个按钮触发三个 AVAudioPlayers，相同的代码，相同的声音文件，除了一些音高变化。

所有三种声音都这样加载：

```
NSString *pathDigitClick = [[NSBundle mainBundle] pathForResource:@"tickLoVol" ofType:@"aiff"];
_playerDigit=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:pathDigitClick] error:NULL];
[_playerDigit prepareToPlay]; 
```

并这样玩：

```
 [_playerDigit play]; 
```

这三个在 iPad1 上的音量应该是一样的，但其中一个在 iPad 2 和 3 上听起来要安静得多。

我通过使用另一个 aiff 解决了它，但我仍然想知道问题仅发生在较新的 iPad 上是如何发生的。

# javascript - Node.js 应用程序、Express 和 Cloud Foundry

> ID：12649390
> 
> 赞同：3
> 
> 时间：2012-09-29T02:20:00.253
> 
> 标签：javascript, node.js, cloud-foundry, express

我正在使用开箱即用的 expressjs 应用程序，并且我正在使用节点 0.8.2。在本地工作得很好，但是当我推送到 Cloud Foundry 时出现以下错误，我不知道从哪里开始调试。我假设这是由配置问题或依赖问题引起的，但我不知道该怎么做。

**Express 500 TypeError: Object # has no method 'randomBytes'** 在 Object.uid（/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/utils.js:122:17）在 MemoryStore.generate vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/session.js:203:27）在生成（/var/vcap/data/dea/apps/ dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/session.js:281:13) 在 Object.session [作为句柄] (/var/vcap/data/dea/apps/dwgapp1- 0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/session.js:290:7) 在下一个 (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app_modules/node_modules/ express/node_modules/connect/lib/proto.js:190:15) 在对象。cookieParser [作为句柄] (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/cookieParser.js:60:5) 在下一个 (/var /vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/proto.js:190:15) 在 Object.methodOverride [作为句柄] (/var/vcap/data /dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js:37:5) 在下一个 (/var/vcap/data/dea/apps/dwgapp1-0 -690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/proto.js:190:15) 在多部分 (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/ /connect/lib/middleware/multipart.js:62:61)61)61)5) 在下一个 (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/proto.js:190:15) 在 Object.methodOverride [作为句柄] (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js:37:5) 在下一个 (/var/vcap/data/ dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/proto.js:190:15) 在多部分 (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f3880b44b144d/ app/node_modules/express/node_modules/connect/lib/middleware/multipart.js:62:61)5) 在下一个 (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/proto.js:190:15) 在 Object.methodOverride [作为句柄] (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js:37:5) 在下一个 (/var/vcap/data/ dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/proto.js:190:15) 在多部分 (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f3880b44b144d/ app/node_modules/express/node_modules/connect/lib/middleware/multipart.js:62:61)methodOverride [作为句柄] (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js:37:5) 在下一个 (/var /vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/proto.js:190:15）在多部分（/var/vcap/data/dea/apps/dwgapp1 -0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/multipart.js:62:61)methodOverride [作为句柄] (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js:37:5) 在下一个 (/var /vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/proto.js:190:15）在多部分（/var/vcap/data/dea/apps/dwgapp1 -0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/multipart.js:62:61)15) 在多部分 (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/multipart.js:62:61)15) 在多部分 (/var/vcap/data/dea/apps/dwgapp1-0-690016dc6c7142f385b44b144d3d380e/app/node_modules/express/node_modules/connect/lib/middleware/multipart.js:62:61)

```
 var express = require('express')
       , routes = require('./routes')
       , user = require('./routes/user')
       , http = require('http')
       , path = require('path');

    var app = express();

    app.configure(function(){
       app.set('port', process.env.VCAP_APP_PORT || 3000);
       app.set('views', __dirname + '/views');
       app.set('view engine', 'ejs');
       app.use(express.favicon());
       app.use(express.logger('dev'));
       app.use(express.bodyParser());
       app.use(express.methodOverride());
       app.use(express.cookieParser('your secret here'));
       app.use(express.session());
       app.use(app.router);
       app.use(require('stylus').middleware(__dirname + '/public'));
       app.use(express.static(path.join(__dirname, 'public')));
    });

    app.configure('development', function(){
       app.use(express.errorHandler());
    });

    app.get('/', routes.index);
    app.get('/users', user.list);

    http.createServer(app).listen(app.get('port'), function(){
       console.log("Express server listening on port " + app.get('port'));
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:25:29.627

似乎这个问题是由 connect 引起的，它是 express 的一个依赖项。我最初使用在节点 0.8.8 上运行的 express 创建了我的应用程序，而 CF 使用的是 0.8.2。即使我在本地似乎没有什么不同，但当我部署到 Cloud Foundry 时，我收到了这个错误。

我创建了一个全新的应用程序，从一开始就运行 Node 0.8.2。这似乎解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T13:47:20.447

您可以使用`vmc logs app-name`, 显示错误消息。

我和你遇到了同样的问题。

原因是默认的 nodejs 版本对于我的应用来说太旧了，

只是`vmc delete app`首先，

用最新的nodejs创建一个新的，`vmc push app-name --runtime node08`

# ruby-on-rails - pg_dump 错误：权限被拒绝

> ID：12649401
> 
> 赞同：1
> 
> 时间：2012-09-29T02:22:18.667
> 
> 标签：ruby-on-rails, postgresql, pg-dump

我需要使用 pg_dump 命令将我的开发数据库转储到一个文件中，然后将其上传到我的 heroku 托管的 rails 应用程序。

我无法使用 rails 命令

```
 "heroku db:push" 
```

Heroku 支持要求我使用 pg_dump 工具在客户端和服务器之间发送传输数据库。

我刚刚运行了这个命令：

```
 pg_dump -U XXXXX -w app0521_development 
```

它将我的数据库的全部内容输出到控制台

但是这个命令由于某种原因失败了：

```
 pg_dump -U postgres -w app0521_development > test.dump 
```

带有此错误消息 -bash: test.dump: Permission denied

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:29:57.870

我认为您要么需要创建一个特殊文件夹并授予 postgres 用户/组对其的读+写权限，要么您应该能够将其发送到 /tmp/test.dump；

```
pg_dump -U postgres -w app0521_development > /tmp/test.dump 
```

大多数时候（至少在 Ubuntu 上），/tmp 文件夹对每个人都有“读+写+执行”。只是一个警告......如果它有敏感数据，它就会出现在每个可以进入那个盒子的人身上。所以，把它清理干净！另外值得注意的是，/tmp 文件夹设置了“t”标志。“t”表示只有在此目录中创建文件的用户（和 root）才能删除该文件。

如果您想创建自己的文件夹，只需谷歌“chgrp” - 然后您当然需要为该组提供“读写”权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:17:06.763

> 带有此错误消息 -bash: test.dump: Permission denied

尝试在 test.dump 之前放一个 > 看看会发生什么。我假设这是您想要的备份文件？这听起来像文件系统权限问题。

# http - 了解 HTTP 标头 X-Frame-Options

> ID：12649403
> 
> 赞同：0
> 
> 时间：2012-09-29T02:22:33.690
> 
> 标签：http, header

关于 X-Frame-Options ( [https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header) )，我很难解析文档的内容和我的内容我看到了。我的理解是，当页面返回 SAMEORIGIN 时，如果具有 IFRAME 的页面来自同一个域，浏览器只会加载框架的内容。

我有三台机器。当我登录到 SERVER-A 时，我导航到托管在 SERVER-A 上的页面。它包含一个从 SERVER-B 加载页面的 IFrame，但它位于不同的域中。这一切都有效...但是当我转到 SERVER-C 并浏览到同一页面（由 SERVER-A 提供）时，它不会加载。查看 IE 调试工具，对该 IFramed 页面的请求显示为中止状态。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:20:28.083

这正如您对服务器 C 所期望的那样工作 - 您已声明 iFrame 不应加载到 X-Frame-Options 中来自不同域的页面中，但事实并非如此。此安全策略不适用于从 localhost 加载的页面，这听起来就像您在服务器 A 上时发生的情况一样，类似于[这种情况](https://stackoverflow.com/questions/10366646/content-of-dynamically-created-iframe-is-empty)。

您还没有说您已将 X-Frame-Options 应用于哪些页面：重要的是它位于 iFrame 中的页面上（即在您的设置中的服务器 B 上）。我不认为将标头应用于服务器 A 会有所作为。

# php - 将php变量添加到javascript页面

> ID：12649404
> 
> 赞同：0
> 
> 时间：2012-09-29T02:22:34.270
> 
> 标签：php, javascript, flot

我正在使用 jquery 浮点映射，我想添加一个 php 变量来生成值，我想我以前做过类似的事情，但无法让它工作。我有两个页面，第一个是统计页面，它将图表作为一个类调用并显示来自 flot.js 页面的信息。

下面是一段代码，它显示了变量是如何组合在一起的。

```
var d1 = [];
for (var i = 1; i <= 14; i += 1)
d1.push([i, parseInt(Math.random() * 45000)]); 
```

我想要做的是向页面添加一个变量，如下所示，

```
 var d1 = [];
for (var i = 1; i <= 14; i += 1)
d1.push([i, parseInt(Math.random() * <?php echo $test ?>)]); 
```

如果这一切都有意义，则在调用 flot.js 页面之前在统计页面中设置测试变量的值。

目前，该图在其原始状态下运行良好，但一旦我将 php var 添加到页面，它什么也不显示，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:29:03.677

如果你想在一个js页面中使用php，你需要告诉服务器把.js文件当作.php文件处理。

例如，您可以在如下`.htaccess`文件中执行此操作：

```
AddType application/x-httpd-php .js
AddHandler x-httpd-php5 .js

<FilesMatch "\.js$">
SetHandler application/x-httpd-php
</FilesMatch> 
```

无论如何，这就是我在某些网站上用于 html 文件的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T02:32:25.687

我不会在服务器上这样做。如果所有的js都通过php brr....

仅用于此特定情况

```
<script src="url/file.js.php"></script> 
```

但是，这会减慢页面加载速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T02:58:32.783

解决了，我只是将javascript页面的内容复制到图表页面并且变量工作。

谢谢

大家

# servlets - 检查标签是否为空

> ID：12649413
> 
> 赞同：0
> 
> 时间：2012-09-29T02:24:37.470
> 
> 标签：servlets

> **可能重复：**
> [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet)

我有一个带有输入标签的jsp，其名称属性为“文件”，通过它我将照片上传到数据库。在更新信息时，有时我不想上传新照片。在那种情况下，我必须在我的 servlet 中检查 null。我试过这个

```
 [...] 
```

## 小服务程序：

```
if(request.getParameter("file")!=null)

   String imagePath=request.getParameter("file"); 
```

[...]

但这不起作用。有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T03:27:08.973

`null`仅当根本未提交字段时，检查才有效。但是，提交空字段与不提交字段不同。未填写但已提交的字段以空字符串结尾。因此，如果该值不只是一个空字符串，您需要执行额外的检查。

换句话说：

```
String fieldname = request.getParameter("fieldname");

if (fieldname != null && !fieldname.isEmpty()) {
    // It's submitted *and* filled out.
} 
```

* * *

**与具体问题无关**，这种抓取上传文件的方法存在严重问题。这种方法只有在网络服务器和网络浏览器碰巧在*同一*台机器上运行时才有效。花时间*仔细*浏览这两个链接：

*   [如何从 Firefox 3 中的 HTML 输入表单中获取文件路径](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3/3374408#3374408)
*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

当以*正确*的方式抓取上传的文件时，它不会以 a 的形式出现`String`，因此不需要进行空字符串检查。

# asp.net - 找出在 GridView 的 SelectedIndexChanged 事件处理程序中单击了哪个按钮

> ID：12649414
> 
> 赞同：0
> 
> 时间：2012-09-29T02:24:45.767
> 
> 标签：asp.net, vb.net, gridview, event-handling, selectedindexchanged

我们有一个 GridView，其中包含 2 个“选择”按钮，用于显示在 GridView 中的每一行。

我们想知道是否有一种方法可以通过使用 SelectedIndexChanged 处理程序来找出两个按钮中的哪一个被单击。

此编码显示了我们拥有的按钮：

```
<asp:UpdatePanel 
    ID="UpdatePanelParentsSummary" 
    runat="server" 
    UpdateMode="Conditional">

    <ContentTemplate> 
        <p>Parent Search:
            <asp:TextBox 
                ID="TextBoxSearch" 
                runat="server" 
                Width="207px" 
                Text="ALL"> </asp:TextBox>

            <asp:Button 
                ID="ButtonSearch" 
                runat="server" 
                Text="Search" />

            <asp:Button 
                ID="ButtonSearchAll" 
                runat="server" 
                Text="Show ALL Parents" />

            <br />
        </p>

        <asp:GridView
            ID="GridViewParentsSummary" 
            runat="server" 
            AllowPaging="True" 
            AllowSorting="True" 
            AutoGenerateColumns="False" 
            DataKeyNames="ID"
            >

            <Columns>
                <asp:BoundField 
                    DataField="ID" 
                    HeaderText="ID" 
                    SortExpression="ID" InsertVisible="False" ReadOnly="True" Visible="False" />

                <asp:BoundField 
                    DataField="FatherName" 
                    HeaderText="FatherName" 
                    SortExpression="FatherName" />

                <asp:BoundField DataField="MotherName" HeaderText="MotherName" 
                    SortExpression="MotherName" />

                <asp:ButtonField 
                    ButtonType="Button" 
                    CommandName="Select" 
                    Text="Select Details" />

                <asp:ButtonField 
                    ButtonType="Button" 
                    CommandName="Select" 
                    Text="New Person To Release Child" />
            </Columns>
        </asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

这是 SelectedIndexChanged 处理程序中的代码：

```
Protected Sub GridViewParentsSummary_SelectedIndexChanged(sender As Object, e As EventArgs) Handles GridViewParentsSummary.SelectedIndexChanged

    IntParentsID = GridViewParentsSummary.DataKeys(GridViewParentsSummary.SelectedIndex).Value

    Response.Redirect("AuthorizationForChildReleaseDetails.aspx")
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:44:50.280

啊，这个问题有一个简单的解决方案。您的发件人是单击的按钮。试试类似的东西：

```
ButtonField buttonClicked = sender as ButtonField;
if (buttonClicked != null) {
    String commandName = buttonClicked.CommandName;

    if (commandName.equals("Command1") {
       ... do something awesome ...
    } else if (commandName.equals("Command2")) {
       ... do something less awesome ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T15:57:35.780

我认为您无法区分 GridView 事件级别的源，因为它是 GridView 在该点引发的事件，它掩盖了较低级别的事件。但是，您可以实现一个行级处理程序来识别哪个按钮用于引发事件并将其设置在某个位置以供在 gridview 事件中使用。

```
protected void GridView_RowCommand(object sender, CommandEventArgs e)
{
   e.CommandArgument ....contains the argument name 
   ....

} 
```

# ruby - Ruby FFI 如何定义默认参数

> ID：12649422
> 
> 赞同：0
> 
> 时间：2012-09-29T02:26:02.620
> 
> 标签：ruby, ffi

我正在尝试将[ruby​​ 的原生扩展](http://rubygems.org/gems/rinku)移植到 FFI。暴露的 ruby​​ 接口是

```
auto_link(text, mode=:all, link_attr=nil, skip_tags=nil, flags=0) { |link_text| ... } 
```

并且该块是可选的。

原始c实现中有两个函数：

```
int rinku_autolink(
  struct buf *ob,
  const uint8_t *text,
  size_t size,
  autolink_mode mode,
  unsigned int flags,
  const char *link_attr,
  const char **skip_tags,
  void (*link_text_cb)(struct buf *ob, const struct buf *link, void *payload),
  void *payload) 
```

哪个做实际的工作和

```
static VALUE rb_rinku_autolink(int argc, VALUE *argv, VALUE self) 
```

它处理默认参数和块回调的东西。

我的问题是，如果我想在 FFI 中公开相同的 ruby​​ 接口，应该注册上述哪个函数`attach_function`，还是应该为 FFI 定义另一个 c 函数？以及选择如何定义默认参数值的函数`attach_function`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T02:39:48.443

答案是否定**的**。我认为您误解了 FFI 的观点，或者我误解了您的帖子。如果您将本机扩展移植到 FFI，这应该意味着您将摆脱代码库中的所有 C 代码并将其转换为 Ruby。您应该将旧 C 方法的功能转换`rinku_autolink()`为`rb_rinku_autolink()`Ruby，可能是单个 Ruby 方法。然后，如果该 Ruby 方法需要调用一些 C 函数，您将使用 FFI 的`attach_function`方法来访问这些函数。

如果那不是您正在做的事情，您能否解释一下您的实际目标是什么以及为什么？

# android - 删除页脚视图时适配器类转换异常？

> ID：12649423
> 
> 赞同：8
> 
> 时间：2012-09-29T02:26:30.317
> 
> 标签：android

我有一个我从没想过会看到的例外。从 ListView (sic) 中删除页脚视图时适配器的类转换异常。

```
 java.lang.ClassCastException: com.test.MyAdapter
 at android.widget.ListView.removeFooterView(ListView.java:381) 
```

这怎么可能发生？删除页脚与类转换异常有什么关系？？？？

该列表是一个多列表适配器，也许这就是为什么但仍然是删除页脚（原文如此）的类转换异常。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T02:44:01.107

`ListView`在调用`setAdapter()`方法之前添加您的页脚视图。

**添加：**

```
public void addFooterView (View v) 
```

自：API 级别 1 添加一个固定视图以显示在列表底部。如果 addFooterView 被多次调用，视图将按照它们添加的顺序出现。如果需要，使用此调用添加的视图可以成为焦点。

**注意：在调用 setAdapter 之前调用它。这样 ListView 就可以将提供的光标与一个也将考虑页眉和页脚视图的光标包装起来。**

参数 v 要添加的视图。

[资源](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View%29)

**您也可以查看这个[有趣的帖子](https://stackoverflow.com/questions/4393775/android-classcastexception-when-adding-a-header-view-to-expandablelistview)。**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-28T17:42:02.077

这是上面答案的一些代码，它适用于我的情况：

在设置它的适配器之前，我必须为我的 listView 设置一个 footerView（它是一个带有分页的 listView 中的 loadingView），然后将其删除。首先，我从 OnCreate 方法中的布局文件初始化了 loadingView：

```
LayoutInflater layoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
loadingView = layoutInflater.inflate(R.layout.loading_view, null); 
```

然后我以相同的方法使用了这个解决方法：

```
this.setIsLoading(true);
listView.setAdapter(adapter);
this.setIsLoading(false); 
```

在哪里

```
private void setIsLoading(boolean isLoading)
{
    this.isLoading = isLoading;

    if (isLoading) {
        listView.addFooterView(loadingView);
    }
    else {
        listView.removeFooterView(loadingView);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-26T06:48:40.343

问题不是来自`removeFooterView()`，而是来自`addFooterView()`。如果您阅读文档，它会声明将包装器添加到您的适配器中：

**如果 ListView 的适配器没有扩展 HeaderViewListAdapter，它将使用 WrapperListAdapter 的支持实例进行包装。**

因此，您必须使用 getter 来检索包装好的适配器并将其转换为您的适配器。像这样：

```
((MyAdapter) ((HeaderViewListAdapter) listView.getAdapter()).getWrappedAdapter()) 
```

希望这将帮助您解决您的问题。

此致，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-21T01:30:54.387

添加到其他答案中，如果您要动态添加/删除页脚（例如，如果它们到达列表的底部，然后您要添加页脚视图），最简单的方法是覆盖`setAdapter`并`ListView`添加一个新的 View 对象作为那里的页脚，这将确保适配器被包裹在`HeaderViewListAdapter`：

```
@Override
public void setAdapter(ListAdapter adapter) {
    addFooterView(new View(getContext()));
    super.setAdapter(adapter);
} 
```

# ios - 如何调试应用程序：openURL:sourceApplication:annotation？

> ID：12649424
> 
> 赞同：0
> 
> 时间：2012-09-29T02:26:38.040
> 
> 标签：ios

Apple 关于移动 Safari 中新的 iOS 智能横幅功能的文档讨论了如何实现`application:openURL:sourceApplication:annotation`以允许从横幅打开您的应用程序，从而将用户直接带到应用程序的特定区域：

[使用智能应用横幅推广应用](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html#//apple_ref/doc/uid/TP40002051-CH6-SW1)

我的问题是，如何测试/调试此功能？即，您如何触发`application:openURL:sourceApplication:annotation`传入您选择的测试 URL 的调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T02:39:09.507

如果您使用的是自定义 url 方案，例如 walmart://whatever/whatever，您可以将其输入到 safari 中，它会命中`application:openURL:sourceApplication:annotation`

# java - beginner java, showing special characters that correlate to an integer

> ID：12649425
> 
> 赞同：3
> 
> 时间：2012-09-29T02:26:40.930
> 
> 标签：java, geometry, character

Doing some homework in my CSC 2310 class and I can't figure out this one problem... it reads:

> Write a program that will draw a right triangle of 100 lines in the following shape: The first line, print 100 '*', the second line, 99 '*’... the last line, only one '*'. Name the program as PrintTriangle.java.

My code is pretty much blank because I need to figure out how to make the code see that when `i = 100` to print out one hundred asterisks, when `i = 99` print ninety-nine, etc. etc. But this is all i have so far:

```
public class PrintTriangle {
    public static void main(String[] args) {
        // Print a right triangle made up of *
        // starting at 100 and ending with 1
        int i = 100;
        while (i > 0) {
        // code here that reads i's value and prints out an equal value of *
            i--;
        }
    }
} 
```

The rest of the assignment was way more difficult than this one which confuses me that I can't figure this out. Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:31:06.810

You clearly need 100 lines as you know. So you need an outer loop that undertakes 100 iterations (as you have). In the body of this loop, you must print `i` `*` characters on a single line, so you just need:

```
for (int j = 0 ; j < i ; j++) System.out.print("*");
System.out.println();  // newline at the end 
```

Hence you will have:

```
int i = 100;
while (i > 0) {
    for (int j = 0; j < i; j++)
        System.out.print("*");
    System.out.println();
    i--;
} 
```

Or equivalently,

```
for (int i = 100 ; i > 0 ; i--) {
    for (int j = 0; j < i; j++)
        System.out.print("*");
    System.out.println();
} 
```

* * *

**EDIT** Using only `while` loops:

```
int i = 100;  // this is our outer loop control variable
while (i > 0) {
    int j = 0;  // this is our inner loop control variable
    while (j < i) {
        System.out.print("*");
        j++;
    }
    System.out.println();
    i--;
} 
```

* * *

So to break it down:

*   We have an outer loop that loops from `i = 100` downwards to `i = 1`.

*   Inside this outer `while` loop, we have another loop that loops from `0` to `i - 1`. So, on the first iteration, this would be from 0-99 (100 total iterations), then from 0-98 (99 total iterations), then from 0-97 (98 total iterations) etc.

*   Inside this inner loop, we print a `*` character. But we do this `i` times (because it's a loop), so the first time we have 100 `*`s, then 99, then 98 etc. (as you can see from the point above).

*   Hence, the triangle pattern emerges.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T02:35:54.967

You need two loops, one to determine how many characters to print on each line, and an inner nested loop to determine how many times to print a single character.

The hint is that the inner loop doesn't always count to a fixed number, rather it counts from 1 to (100 - something).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T02:45:48.177

Try this:

```
public class PrintTriangle {
    public static void main(String[] args) {

       for(int i = 100; i >= 1; i--){

           System.out.print("\n");

           for(int j = 0; j < i; j++){
               System.out.print("*");
           }

       }

   }
} 
```

Explanation: The nested for loop has a variable named j. j is the amount of times * has been printed. After printing it checks if it is equal to i. i is a variable in the big for loop. i keeps track of how many times a line has been printed. \n means newline.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T03:27:38.040

You could come at it side ways...

```
StringBuilder sb = new StringBuilder(100);
int index = 0;
while (index < 100) {
    sb.append("*");
    index++;
}

index = 0;
while (index < 100) {
    System.out.println(sb);
    sb.deleteCharAt(0);
    index++;
} 
```

But I think I prefer the loop with loop approach personally ;)

You could improve the effiency of the first loop by increasing the number of stars you add per loop and reducing the number loops accordingly...

ie, add 2 starts, need 50 loops, add 4, need 25, add 5 need 20, add 10, need 10...

For example

```
while (index < 10) {
    sb.append("**********");
    index++;
} 
```

# iphone - editingStyleForRowAtIndexPath -- 在 iOS 5 中触发，在 iOS 6 中不触发

> ID：12649429
> 
> 赞同：0
> 
> 时间：2012-09-29T02:27:27.647
> 
> 标签：iphone, ios, ios6, uitableview

我有简单的主视图控制器和细节视图控制器，它们与两个 segue 相连，一个用于“显示细节”，一个用于“添加新”。

*   “显示细节”使用 setEditing:NO 连接到细节视图控制器。
*   使用 setEditing:YES 点按“+”（添加图标）到详细视图控制器

iOS 5.1：“+”按我的预期工作，详细信息页面处于编辑模式，editingStyleForRowAtIndexPath 触发以显示插入和删除指示符。

iOS 6.0：“+”会转换到详细信息页面，但从不会触发 editingStyleForRowAtIndexPath。setEditing:YES 中的其他代码被执行。didSelectRowAtIndexPath 确实触发（代表=自我）。

一旦进入详细信息页面，编辑模式在这两种情况下都会按预期工作。

有任何想法吗？

```
// Master.m
if([[segue identifier] isEqualToString:@"NewRecipe"]) {

    DetailViewController *detailViewController = [segue destinationViewController];
    // stuff
    detailViewController.recipe = r;     
    detailViewController.delegate = self;
    detailViewController.editing = YES;
}

// Detail.m
-(void)setEditing:(BOOL)flag animated:(BOOL)animated {

   if (flag) {

   [self.tableView setEditing:flag animated:YES];
   [self.tableView beginUpdates];
   // the row does get added
   [self.tableView insertRowsAtIndexPaths:@[pathToAdd] withRowAnimation:UITableViewRowAnimationAutomatic];  
    // datasource gets updated here
    [self.tableView endUpdates];
    .... 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:28:50.507

我想到了。我不知道为什么这是修复，我希望这不会用更糟糕的代码替换糟糕的代码。

```
 Master.m
// iOS 5 -- this is OK
detailViewController.editing = YES; 
```

对于 iOS 6，我需要 detailViewController 来调用委托方法以确定是否设置编辑：YES。

```
Master.m
-(BOOL)isNewRecipe {
    return (_isNewRecipe == 1);
}

Detail.m
if ([self.delegate isNewRecipe]) {
    [self setEditing:YES];        
} 
```

# java - MyContentProvider.onCreate() 没有被调用？

> ID：12649430
> 
> 赞同：4
> 
> 时间：2012-09-29T02:27:50.927
> 
> 标签：java, android, database, android-contentprovider, sqliteopenhelper

我的扩展 ContentProvider 的 userDatabase 的 onCreate 没有被正确调用

这是我的一些 userBatabase 代码：

```
public class userDatabase extends ContentProvider {

    private MainDatabaseHelper mOpenHelper;

    public userDatabase(){}

    public static final class MainDatabaseHelper extends SQLiteOpenHelper{...}

    @Override
    public boolean onCreate() {
        mOpenHelper = new MainDatabaseHelper(getContext());     
        return true;
    }

    @Override
    public Uri insert(Uri uri, ContentValues values) {
        long id = mOpenHelper.getWritableDatabase().insert("Users", null, values);
        return Uri.withAppendedPath(CONTENT_URI, "" + id);
    }

    ...
} 
```

在我的主要活动中，我调用：

```
userDatabase cpDatabase = new userDatabase(); 
```

但是当我尝试打电话时`cpDatabase.insert(userDatabase.CONTENT_URI, values);`

`mOpenHelper.getWritableDatabase().insert("Users", null, values);`调用时，所有内容都在 insert 内崩溃。

我发现这`mOpenHelper.getWritableDatabase()`是问题所在，因为它甚至无法自行运行，然后我发现这是因为 mOpenHelper 为空。

我在构造函数中实例化 mOpenHelper，所以我认为它没有运行。一些日志消息证实了这一点，当我调用`userDatabase cpDatabase = new userDatabase();`我的日志消息时，显示 userDatabase() 构造函数运行正常，但 onCreate 从未运行，因此 mOpenHelper 从未实例化。

（注意：通过这些日志消息，我注意到我的 userDatabase 的构造函数和 onCreate 在我的应用程序启动时被调用。我不知道为什么或在哪里。我不明白为什么在我尝试创建实例之前运行它。和即使它运行了，mOpenHelper 仍然没有初始化，当我创建一个实例时，构造函数运行但 onCreate 没有。）

可能会发生什么，我怎样才能让我的 onCreate 运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T03:19:43.853

由于您使用的是内容提供商，因此根据[文档](http://developer.android.com/reference/android/content/ContentProvider.html#onCreate%28%29)

> 在应用程序启动时，为应用程序主线程上的所有注册内容提供程序调用此方法

而且您尝试使用内容提供者的方式似乎是错误的，您不需要手动实例化内容提供者，一旦您通过[ContentResolver](http://developer.android.com/reference/android/content/ContentResolver.html)通过传递 URI 发出请求，系统就会检查给定 URI 的权限并将请求传递给在授权中注册的内容提供者。

例如

```
getContentResolver().delete(uri, null, null); 
```

uri 在哪里，要查询的完整 URI。

[本](http://www.vogella.com/articles/AndroidSQLite/article.html#todo)教程将引导您朝着正确的方向前进

# javascript - 如何使用纯 JavaScript 获取元素

> ID：12649434
> 
> 赞同：-2
> 
> 时间：2012-09-29T02:28:56.493
> 
> 标签：javascript

我想得到 li 元素。怎么办？tks？我是新手

```
 html = "<ul id=\"leftMenu\"><li id=\"a.aspx\"></li></ul>";
//alert(html.children[0]); 
```

$(html).find("li:eq(0)") //我不想用 jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:36:07.030

```
var div = document.createElement('div');
var html = "<ul id=\"leftMenu\"><li id=\"a.aspx\"></li></ul>";
div.innerHTML = html;
alert(div.children[0].children[0]); 
```

# unix - 如何在仅创建符号文件链接时复制递归目录结构？

> ID：12649438
> 
> 赞同：0
> 
> 时间：2012-09-29T02:29:28.123
> 
> 标签：unix, directory, copy, symlink

复制整个递归目录结构的最佳方法是什么，其中所有文件都被复制为符号链接？

换句话说，副本应该反映原始目录的整个目录（子）结构，但每个文件应该只是一个符号链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:59:16.430

我猜...首先您要创建目录...

```
cd "$source"
find . -type d -exec mkdir -p "$target/{}" \; 
```

接下来，制作您的符号链接...

```
cd "$source"
find . -type f -print | (
    cd "$target"
    while read one; do
        deep=$(echo "${one:2}" | sed 's:[^/][^/]*:..:g')
        ln -s "${deep:3}/${one:2}" "$(basename "$one")"
    done
) 
```

请注意，如果您的文件名中有换行符或其他奇怪的字符，这将失败。我想不出一个快速的方法来解决这个问题（我的意思是在 a 中执行此`find -exec`操作），因为您需要为每个目录级别以不同的方式计算 $deep 。

此外，这是未经测试的，我不打算测试它。如果它能给你灵感，那就太好了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T03:13:56.540

这不是建立符号链接的解决方案，但它会建立硬链接。

```
cp -rl $src $dst 
```

缺点：

*   更难查看文件是否在树中被替换
*   两棵树应该在同一个文件系统上

# php - 查询吐出带有附加值的变量。为什么？

> ID：12649441
> 
> 赞同：-1
> 
> 时间：2012-09-29T02:30:21.530
> 
> 标签：php, html, mysql, database

```
$currentFile = $_SERVER["SCRIPT_NAME"];
$img = array_pop(explode("/", $currentFile));
$fileName = basename($img, ".php").PHP_EOL;
echo $fileName; 
```

**回显结果：** placementName

```
$query = "SELECT * FROM image_Name WHERE name = '" . mysql_real_escape_string($fileName) . "' LIMIT 1;";
echo $query; 
```

**回显结果：** SELECT * FROM image_name WHERE name = 'placementName\r\n' LIMIT 1;

我正在尝试获取一个动态页面，以根据打开的 currentFile.php 更改其表中的值。因此顶部的脚本。脚本通过删除位置和分机来找到文件名，并留下实际的基本名称。然后查询在我的数据库表中查找该基本名称，将该数据保存到一个数组中，我希望能够调用它以将其放入 html 表中。

现在的问题是，由于某种原因，我的查询在placementName "\r\n" 上附加了额外的值

为什么是这样 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:33:42.880

.PHP_EOL 将这些字符附加到字符串的末尾。由于 mysql_real_escape，您会在第二个输出中看到它们。

# java - Guava Iterables.filter()，你如何测试空返回？

> ID：12649445
> 
> 赞同：0
> 
> 时间：2012-09-29T02:31:28.917
> 
> 标签：java, guava

我喜欢使用 Guava 的 Iterables 过滤器。但是一个常见的代码片段如下所示：

```
 List foo = Lists.newArrayList(Iterables.filter(someCollection, somePredicate));  
  if (foo.isEmpty) {  
    // do empty  
  } else {  
    int count = foo.size();  // do non-empty  
  } 
```

这很浪费，因为我真的不需要构建“foo”列表，我只需要知道它是否为空并计算元素的数量。

我想知道以下方面的最佳实践：
1）如何在`isEmpty()`不浪费时间将列表构建到内存中的情况下进行测试
2）有没有办法在不遍历所有条目的情况下获得大小？
3）如果没有#2的非迭代解决方案，只迭代并做count ++会更好吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T02:51:28.040

`FluentIterable.from(foo).filter(predicate).isEmpty()`不会进行任何迭代。

但是，如果您需要大小，那么您真的想使用`FluentIterable.from(foo).filter(predicate).size()`，它不会存储元素，而只会计算与谓词匹配的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T02:57:24.853

路易斯的回答是正确的。由于您碰巧正在使用 a `Collection`，因此也可以使用[`Collections2.filter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Collections2.html#filter%28java.util.Collection,%20com.google.common.base.Predicate%29)：

```
Collection<Foo> filteredFoos = Collections2.filter(foos, fooPredicate);
if (filteredFoos.isEmpty()) {
    ...
} 
```

从文档中：

> `unfiltered`返回满足谓词的元素。返回的集合是`unfiltered`; 一个变化会影响另一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T14:06:25.837

没有迭代就无法获得过滤的大小，`Iterable`因为您不知道哪些元素将匹配。为什么不直接使用`Iterables.size`？如果没有元素与您的谓词匹配，`isEmpty`则无论如何都必须遍历整个集合。

# java - (var) 无法解析为类型

> ID：12649447
> 
> 赞同：1
> 
> 时间：2012-09-29T02:32:14.660
> 
> 标签：java, variables, char

我一直在使用 eclipse，每当我尝试更改存储在字符数组中的值时，它都会引发错误。代码：

```
 import java.util.Scanner;

public class test {
    public static void main(String args[]) {
        char monstername[] = {'e', 'v', 'i', 'l'};
        String monster = new String(monstername);
        System.out.println("Hello!");
        System.out.println("You are attacked by a " + monster);
        monstername[] = {'t', 'v', 'i', 'l'};
        System.out.println("You are attacked by a " + monster);
    }
} 
```

我尝试更新库，但没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T02:50:14.420

```
monstername[] = {'t', 'v', 'i', 'l'}; 
```

不会工作有两个原因。

1.  它不是有效的语法，因此编译器不知道如何处理它。
2.  您需要创建变量的新实例

.

```
monstername = new char[] {'t', 'v', 'i', 'l'}; 
```

因为`monster`已经被声明为 char 数组 ( `char[]`)，所以第二条语句中不需要使用 []

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T02:35:13.967

这条线

```
monstername[] = {'t', 'v', 'i', 'l'}; 
```

是一个有效的（部分）声明，但它不是一个有效的赋值。它应该是

```
monstername = new char[]{'t', 'v', 'i', 'l'};
monster = new String(monstername); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T02:35:21.973

`[]`不属于，并将数组创建为表达式，您使用`new <type>[]`：

```
monstername = new char[] {'t', 'v', 'i', 'l'}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T02:34:43.427

你不能那样更新它，因为它`monstername[]`是一个指针。

尝试：`monstername = new char[] {'s', 'm', 't', 'g'};`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T02:36:02.477

换行

```
monstername[] = {'t', 'v', 'i', 'l'};
System.out.println("You are attacked by a " + monster); 
```

到

```
monstername = new char[]{'t', 'v', 'i', 'l'};
System.out.println("You are attacked by a " + new String(monstername)); 
```

# ios - TabBarItem 上的徽章

> ID：12649450
> 
> 赞同：0
> 
> 时间：2012-09-29T02:33:08.257
> 
> 标签：ios, uitabbarcontroller, badge

我将**UITabBarController**用于 iOS 应用程序。它有 3 个标签。例如 tab1（当前选项卡）、tab2 和 tab3。单击 tab1 上的按钮时，我想在 tab3 图标上放**一个红色小徽章。**有什么办法可以添加吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:43:14.523

UITabBarItems 有一个 badgeValue 属性。当您的委托方法被触发时，您可以设置它。

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item; 
```

您可以从 tabBarController 获取 TabBarItem #3

```
[tabBarController.tabBar.items objectAtIndex:2]; 
```

# java - 设计决策以提供调用其他特定 ejb 组件的单个 ejb 组件

> ID：12649451
> 
> 赞同：0
> 
> 时间：2012-09-29T02:33:20.237
> 
> 标签：java

我们有多个商务格式转换器 ejb 组件，如果提交给它们的数据是 xml ，它们执行以下任务，然后从 xml 转换为相应的格式，否则假设它是商务格式并将其转换为 xml。现在我们需要有一个转换器组件，它可以根据传递给它的 xml 格式选择正确的转换器组件。

我将如何决定选择哪个组件，因为理解格式的能力在于特定组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:56:04.560

您可以使用[责任链模式](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)来实现这一点。将所有可能的 EJB 注入单个 Converter EJB 并让后者建立链。每个具体转换器都实现了一个接口，该接口提供了一些方法，例如`boolean canHandle(XML xml)`. 一旦返回true，让它处理xml并返回。

# python - Linux和python：将多个wave文件组合成一个wave文件

> ID：12649465
> 
> 赞同：0
> 
> 时间：2012-09-29T02:36:39.130
> 
> 标签：python, linux, wave

我正在寻找一种可以使用 python 将多个波形文件组合成一个波形文件并在 linux 上运行的方法。除了默认的 shell 命令行和默认的 python 模块之外，我不想使用任何附加组件。例如，如果我有 a.wav 和 b.wav。我想创建一个 c.wav，它的内容从 a.wav 然后 b.wav 开始。我找到了 wave 模块，我可以打开一个 wave 文件并写入一个新文件。因为我在这个音频世界里真的很新。我仍然不知道该怎么做。下面是我的代码

```
import struct, wave

waveFileA = wave.open('./a.wav', 'r')
waveFileB = wave.open('./b.wav', 'r')
waveFileC = wave.open('./c.wav', 'w')

lengthA = waveFileA.getnframes()
for i in range(0,lengthA):
    waveFileC.writeframes(waveFileA.readframes(1))

lengthB = waveFileB.getnframes()
for i in range(0,lengthB):
    waveFileC.writeframes(waveFileB.readframes(1))

waveFileA.close()
waveFileB.close()
waveFileC.close() 
```

当我运行这段代码时，我得到了这个错误：

```
wave.Error: # channels not specified 
```

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T03:11:03.423

您需要设置通道数、采样宽度和帧速率：

```
waveFileC.setnchannels(waveFileA.getnchannels())
waveFileC.setsampwidth(waveFileA.getsampwidth())
waveFileC.setframerate(waveFileA.getframerate()) 
```

如果您想处理具有不同设置的 a.wav 和 b.wav，您需要使用[pysox](http://packages.python.org/pysox/)之类的工具将它们转换为相同的设置，或者对于 nchannels 和 sampwidth，您可以自己解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T02:41:47.317

看起来您需要调用`n=waveFileA.getnchannels()`以找出第一个输入文件使用了多少个通道，对于 waveFileB 也是如此，然后您需要使用`waveFileC.setnchannels(n)`它来告诉它要在传出文件中放入多少个通道。我不知道它将如何处理具有不同数量通道的输入文件...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:10:07.333

这是我正在寻找的答案

[如何使用 python 连接两个 wav 文件？](https://stackoverflow.com/questions/2890703/how-to-join-two-wav-file-using-python) （寻找 Tom 10 的主题）

它在另一个线程中。有人已经解决了这个问题。

# asp.net - 在 ASP.NET 4.5 网站中从客户端调用服务器时出现 SignalR 错误 500

> ID：12649472
> 
> 赞同：0
> 
> 时间：2012-09-29T02:37:43.763
> 
> 标签：asp.net, signalr, signalr.client

我将**SignalR**与**ASP.NET 4.5**网络表单一起使用。我无法让客户端与服务器对话，反之亦然。我想要实现的只是能够测试客户端如何触发服务器功能以及服务器如何触发客户端功能。这是我使用的代码：

**客户端代码 (HitCounter.aspx)**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/javascript" src="Scripts/jquery-1.8.2.js"></script>
<script src="Scripts/jquery.signalR-0.5.3.min.js"></script>
<script type="text/javascript" src="SignalR/Hubs"></script>

<style>
    #currentHitCount {
        font-family: Arial;
        font-size:40pt;
        margin-left:auto;
        margin-right:auto;
        display:block;
        text-align:center;
    }

</style>
</head>
<body>
<div id="currentHitCount"></div>
<script type="text/javascript">

    $(function () {
       var hub = $.connection.hitCounter;

       $.extend(hub, {
           showHitCount: function (hitCount){
               if(hitCount > 1){
                   $('#currentHitCount')
                   .html("This site has had " + hitCount + " hits.");
               }
               else{
                   $('#currentHitCount')
                   .html("This site has had " + hitCount + " hit.");
               }
           },
           addMessage: function (str) {
               $('#currentHitCount')
               .html("Getting Message: " + str);
           }
       });

       $.connection.hub.start(function () {
           hub.addMessage("test");
           hub.addHit();

       });

       $.connection.hub.stateChanged(function (change) {
           if ($.signalR.connectionState["connected"] === change.newState) {                  
           }
       });

       $.connection.hub.error(function () {
       });

   });

   </script>
  <div style="background-color:red; width:290px; height:200px; color:white; position:absolute; top:100px; left:30px;" id="thebutton">test</div>

</body>
</html> 
```

**服务器端代码 (App_Code/HitCounterHub.cs)**

```
using SignalR.Hubs;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using System.Web;

[HubName("hitCounter")]
public class HitCounterHub : Hub, IDisconnect
{
    static int _hitCount;

public void addHit(string pageId)
{
    _hitCount += 1;
    Clients.showHitCount(_hitCount);

}

public Task ClientCallingServer()
{
    _hitCount += 1;
    return Clients["foo"].showHitCount(_hitCount);
}

public Task Join()
{
    return Groups.Add(Context.ConnectionId, "foo");
}

public Task Send(string message)
{
    _hitCount += 1;
    return Clients["foo"].addMessage(message);       
}

public Task Disconnect()
{
    return Clients["foo"].leave(Context.ConnectionId);
}
} 
```

我在 IIS7.5 上本地运行代码，但在 Visual Studio 2012 中运行代码时也出现错误。

错误：

> localhost/signalr/signalr/send?transport=serverSentEvents&connectionId=400f1302-6c8e-418e-a14c-da95f836a29d 500（内部服务器错误）

使用 Chrome 调试器，错误页面显示： **“addHit”方法无法解析。**

同样，我要做的是做一个简单的测试来检查如何从客户端调用服务器和从服务器调用客户端。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:39:19.143

您无法解析 addHit 方法的原因是因为您在服务器上的函数名称与在客户端上的函数名称相同。

AKA 要调用您正在执行的服务器 hub.addHit("laksjdf")。但是打电话给客户端是一样的： hub.addHit("laksjdfldksj"); 因此有歧义。更改客户端或服务器端函数的名称，使它们在命名意义上是唯一的。

此问题将在 SignalR 的下一版本中修复。

# javascript - SetSelectedRange Spread.NET javascript 问题

> ID：12649473
> 
> 赞同：1
> 
> 时间：2012-09-29T02:37:47.527
> 
> 标签：javascript, spreadsheet, farpoint-spread

我正在尝试向Spread.NET 控件添加功能，它允许按住shift 单击以选择ASP 中的一系列单元格。我正在创建事件 onActiveCellChanged 以在执行时调用 selectRange 函数

```
 var shiftPressed = false;
   var newSelect = true;

   window.pageLoad = function init() {
       var ss = document.getElementById('<%=FpSpread1.ClientID %>');

       if (ss.addEventListener != null) {
           ss.addEventListener("ActiveCellChanged", selectRange(), false);
       } else if (ss.attachEvent != null) {
           ss.attachEvent("ActiveCellChanged", selectRange());
       }
       else {
           FpSpread1.onActiveCellChanged = selectRange;
       }
   } 
```

这是 selectRange 函数。

```
 function selectRange() {
            var ss = document.getElementById('<%=FpSpread1.ClientID %>');
            var swap;

            if (shiftPressed == true) {
                var initRow = document.getElementById('RowCoord').value;
                var initCol = document.getElementById('ColCoord').value;
                var SecRow = getRow();
                var SecCol = getCol();
                newSelect = false;

                var rCount = Math.abs(SecRow - initRow) + 1;
                var cCount = Math.abs(SecCol - initCol) + 1;

                if (initRow > SecRow)
                    initRow = SecRow;

                if (initCol > SecCol)
                    initCol = SecCol;

                //alert(initRow + ' ' + initCol);
                alert(initRow + ' ' + initCol + ' ' + rCount + ' ' + cCount);
                ss.SetSelectedRange(initRow, initCol, rCount, cCount);

            }
            else {
                document.getElementById('RowCoord').value = 0;
                document.getElementById('ColCoord').value = 0;
                newSelect = true;
            }
        } 
```

这就是我如何确定是否正在进行轮班。

```
 function aKeyDown(event) {

            if (event.keyCode == 16) {

                shiftPressed = true;
                var col = getCol();
                var row = getRow();

                if (newSelect) {
                    document.getElementById('RowCoord').value = row;
                    document.getElementById('ColCoord').value = col;
                }
            }
        }

        function aKeyUp(event) {

            if (event.keyCode == 16) {
                shiftPressed = false;
            }
        }

        function getRow() {
            var ss = document.getElementById('<%=FpSpread1.ClientID %>');
            ret = ss.ActiveRow;

            if (ret == undefined)
                ret = ss.GetActiveRow;

            return ret;
        }

        function getCol() {
            var ss = document.getElementById('<%=FpSpread1.ClientID %>');
            ret = ss.ActiveCol;

            if (ret == undefined)
                ret = ss.GetActiveCol;

            return ret;
        } 
```

如果我的`SetSelectedRange`初始单元格是 a,1，则在选择范围内的功能将起作用。但是，如果它是任何其他单元格，它将选择整个行和列。

这是我的`<div>`标签：

```
<FarPoint:FpSpread onkeydown="aKeyDown(event)" onkeyup="aKeyUp(event)" ID="FpSpread1"... 
```

在图 1 中，我的初始单元格是 (a,3)，我按住 shift 并单击 (b,4)

在图 2 中，它有效。只要我从单元格 (a,1) 开始

![图 1](../Images/b304131de9e57430d3fb72c40928ea9f.png) ![图 2](../Images/8a23f40e9559dea027c74ab830a9b992.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:06:22.327

我需要解析行和列值。

```
function getRow() {
        var ss = document.getElementById(spd);
        ret = ss.ActiveRow;

        if (ret == undefined)
            ret = ss.GetActiveRow();

        return parseInt(ret);
    }

    function getCol() {
        var ss = document.getElementById(spd);
        ret = ss.ActiveCol;

        if (ret == undefined)
            ret = ss.GetActiveCol();

        return parseInt(ret);
    } 
```

# java - 如何从其他类访问一个类的属性？

> ID：12649475
> 
> 赞同：1
> 
> 时间：2012-09-29T02:38:24.450
> 
> 标签：java, jsp

我设计了一个需要访问用户个人资料的网站，所以我有一个用户类来保存用户的个人资料信息，例如姓名、用户名等，以避免每次都从数据库中检索它们。

从其他类访问此信息的最佳方式是什么？我的想法是使它们全部静态以使用类的名称访问属性还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T03:21:23.103

对于一个网站，我的想法是

*   一旦您从数据库中检索保留用户个人资料信息的用户类的数据，保存到**session**。
*   您可以随时从其他类中检索用户的数据。
*   如果要将用户数据更新到数据库，还需要在会话对象中更新用户。

通过使用会话，您可以避免每次进出数据库。

jsp中session的使用可以参考[http://www.java2s.com/Code/Java/JSP/UseSessionJsp.htm](http://www.java2s.com/Code/Java/JSP/UseSessionJsp.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T03:19:28.750

理想的解决方案是将用户数据存储在 a 中`database`，并让您的其他类通过`data access object` [(DAO)](http://www.roseindia.net/tutorial/java/jdbc/dataaccessobjectdesignpattern.html)检索所述数据。对此的任何替代方案很可能会使您现有的架构混乱并造成安全漏洞。

将用户数据存储在用户 bean 中，将 bean 保存在用户的[session](http://netbeans.org/kb/docs/javaee/ecommerce/manage-sessions.html)中，然后将 bean 上传到数据库以供将来访问。

# c++ - 理解 C++ 中的浮点变量和运算符（也可能是书本错误）

> ID：12649478
> 
> 赞同：2
> 
> 时间：2012-09-29T02:39:15.957
> 
> 标签：c++, floating-point, g++, cmath, pearson

我正在学习一个开始的 C++ 类，而我的书（Starting Out with C++ Early Objects 7th edition）有一个非常糟糕的例子来说明如何检查浮点变量的值。

有问题的书籍示例（文件名 pr4-04.cpp）：

```
// This program demonstrates how to safely test a floating-point number
// to see if it is, for all practical purposes, equal to some value.
#include <iostream>
#include <cmath>
using namespace std;

int main()
{
    double result = .666667 * 6.0; 

    // 2/3 of 6 should be 4 and, if you print result, 4 is displayed.
    cout << "result = " << result << endl;

    // However, internally result is NOT precisely equal to 4.
    // So test to see if it is "close" to 4.
    if (abs(result - 4.0 < .0001))
        cout << "result DOES equal 4!" << endl;
    else
        cout << "result DOES NOT equal 4!" << endl;

return 0;
} 
```

我在 Ubuntu 中使用 g++ 来编译我的代码，如下所示：

```
g++ pr4-04.cpp -o pr4-04 && ./pr4-04 
```

我得到这个错误：

```
error: call of overloaded ‘abs(bool)’ is ambiguous 
```

我可以通过将 abs() 更改为 fabs() 来解决这个问题，但这仍然非常令人困惑！为什么这本书给了我们无法编译的东西，或者这只是我？为什么“结果”的 cout 给出 4 而不是 4.000002？为什么这个值在 if{} 语句中使用时似乎会发生变化？

我知道我们不能只使用 == 来检查等价，但是为什么我需要使用绝对值呢？无论我是否使用它，我都会得到相同的答案。那么有什么意义呢？

更不用说，这似乎是检查浮点等价的一种非常糟糕的方法。有一个更好的方法吗？[这个话题似乎非常重要](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

我在stackoverflow上找到[了这个主题，但是他们的解决方案：](https://stackoverflow.com/questions/6873615/c-floating-point-gotcha)

```
fabs(f1 - f2) < precision-requirement
fabs(f1 - f2) < max(fabs(f1), fabs(f2)) * percentage-precision-requirement 
```

就我的 4 章 C++ 经验而言，这对我来说没有多大意义。我将不胜感激一些帮助。我们的书给了我多达 6 句话来解释这一切。

编辑：根据一些人的建议，我试图找到一个勘误页面，但是在搜索教科书、互联网和我的课程网站 30 分钟后，我只能找到这个需要登录的[可下载 zip 文件-_-](http://www.pearsonhighered.com/educator/product/Starting-Out-with-C-From-Control-Structures-through-Objects-7E/9780132576253.page)

我也完美地复制了代码。那不是**我**的错字，我直接从带有代码的 CD 上复制了它。书中也是这样打的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T02:42:35.943

```
if (abs(result - 4.0 < .0001)) 
```

括号是错误的，你可能的意思是：`if (abs(result-4.0) < .0001)`.

至于为什么它没有编译，标准在 §26.8p8 中确定

> 除了 中的数学函数的 double 版本之外，C++ 还添加了这些函数的 float 和 long double 重载版本，具有相同的语义。

该表达式`(result-4.0 < .0001)`产生 a `bool`，并且没有`abs`接受`bool`参数的重载，但是有多个版本`abs`的参数可以从 隐式转换`bool`。编译器没有找到比其他转换序列更好的转换序列，因此会出现歧义错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T02:42:54.727

问题显然是线

```
if (abs(result - 4.0 < .0001)) 
```

应该写成

```
if (abs(result - 4.0) < .0001) 
```

我认为这是一个简单的错字。向本书作者报告错误！

顺便说一句，原始代码在我的系统上编译没有任何问题，给出了预期的结果！也就是说，即使作者测试了代码，他也可能没有注意到它有问题！

还回答了为什么`abs()`需要这个问题：一些十进制数被四舍五入为一个略小于预期结果的浮点值，而另一些则被四舍五入为稍大的数字。值在哪个方向是圆形的（如果有的话：一些十进制数可以使用二进制浮点数精确表示）有点难以预测。因此，`result`可能比期望值和差值略大或略小，因此分别为正或负。

# uibutton - MPMoviePlayerController 停止按钮不起作用

> ID：12649479
> 
> 赞同：-1
> 
> 时间：2012-09-29T02:39:17.290
> 
> 标签：uibutton, streaming, mpmovieplayercontroller, mpmovieplayer

我正在尝试使用相同的按钮来播放和停止我的广播流，我的按钮播放正常，然后当我按下它停止时，它只停止几秒钟然后再次开始播放。

这是我使用的代码。

```
- (IBAction)playStream:(id)sender {
self.buttonPressed.selected = !self.buttonPressed.selected;

NSString *urlAddress = @"http://67.159.28.74:8730";
NSURL *url = [NSURL URLWithString:urlAddress];

MPMoviePlayerController *player = [[MPMoviePlayerController alloc]initWithContentURL:url];

player.movieSourceType = MPMovieSourceTypeStreaming;

player.view.hidden = YES;

self.myPlayer = player;

[self.view addSubview:self.myPlayer.view];

if (player.playbackState == MPMoviePlaybackStateStopped){
    [self.myPlayer play];}
else if (player.playbackState == MPMoviePlaybackStatePlaying){
   [self.myPlayer stop];} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T03:45:20.613

Every time you press the button, a new instance of the movie player is created. Thus the check `if (player.playbackState == MPMoviePlaybackStateStopped)` will always return YES, and thus start the movie.

# java - Java for 循环最佳实践

> ID：12649480
> 
> 赞同：8
> 
> 时间：2012-09-29T02:39:23.607
> 
> 标签：java, arrays, coding-style, for-loop

当您需要索引时，循环遍历数组的最佳方法是什么？

**选项1：**

```
int len = array.length;
for (int i = 0; i < len; ++i) {
    array[i] = foo(i);
} 
```

**选项 2：**

```
for (int i = 0; i < array.length; i++) {
    array[i] = foo(i);
} 
```

或者，没关系？或者有更好的方法吗？只是指出差异：在一种情况下，数组的长度被评估为循环中测试的一部分，尽管编译器通常应该优化它。

* * *

其次，这里有`++i`什么不同`i++`吗？如果它是 C++，我肯定更喜欢`++i`，但不确定 Java。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T02:43:44.907

`i++`vs`++i`在这种特殊情况下无关紧要。虽然 C 大师会告诉您将 array.length 存储在变量中，但现代优化编译器在这种情况下不需要这样做，只要长度在循环中没有改变。如果您真的很担心，您可以对两者进行基准测试，但`.length`实际上并不需要每次遍历整个数组就可以了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T02:45:28.067

通常这两种方法是等价的。你应该注意，在

```
for (int i = 0 ; i < foo() ; i++) {
    ...
} 
```

在`foo()`每次迭代之前调用一次（而不是在第一次迭代之前只调用一次），因此您可能希望通过执行类似的操作来考虑更复杂的情况

```
int n = foo();
for (int i = 0 ; i < n ; i++) {
    ...
} 
```

这类似于您的*Option 1*。所以我会说*选项 1*肯定是两者中更安全的一个，但大多数时候它不应该对你使用的产生重大影响。

* * *

至于你的第二个问题：`++i`首先增加你的变量然后检索它的值，`i++`首先检索值然后增加。只需尝试以下两段代码：

```
int i = 0;
System.out.println(++i);
------------------------
int i = 0;
System.out.println(i++); 
```

第一个打印`1`，但第二个打印`0`。当然，何时`++i`和`i++`独自一人并没有什么区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T03:12:29.787

for for循环中是否使用“array.length”：一般编译器会做一些优化，结果相当于在for循环中使用了变量

对于 "i++" 和 "++i" 在 C++ 中，++i 是首选且更高效，但在 Java 中，它们在这种情况下是等价的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T23:50:24.180

除了 arshaji 响应之外，我还想知道`size()`在循环中使用与提前存储相比是否有性能优势。我相信结果表明编译器确实优化了一些东西并且访问列表的长度与访问变量相同（我担心它必须通过一个函数的事实会减慢速度）。

以下是这两种不同循环方法所需的时间：

```
for(long i = 0 ; i < mylist.size(); i++){}
VS
for(long i = 0 ; i < 10_000_000; i++){} 
```

这是一千万个元素列表的结果：

```
fixed length:
,162,157,151,157,156,159,157,149,150,170,158,153,152,158,151,151,156,156,151,153
getSize:
,164,156,159,154,151,160,162,152,154,152,151,149,168,156,152,150,157,150,156,157

import java.util.ArrayList;
import java.util.List;

public class Main {

    final static int LENGTH_SAMPLE = 20;
    final static long LENGTH = 10_000_000;

    public static void main(String[] args) {

        List<Long> mylist = new ArrayList<>();
        for(long i = 0 ; i < LENGTH; i++){
            mylist.add(i);
        }
        System.out.println("fixed length:");
        for(int i = 0 ; i < LENGTH_SAMPLE; i++){
            System.out.printf("," + fixedSize(mylist));
        }
        System.out.println("");
        System.out.println("getSize:");
        for(int i = 0 ; i < LENGTH_SAMPLE; i++){
            System.out.printf("," + fctSize(mylist));
        }
    }

    private static long fixedSize(List list){
        long start = System.currentTimeMillis();

        for(long i = 0 ; i < LENGTH; i++){
            System.currentTimeMillis();
        }
        return System.currentTimeMillis() - start;
    }

    private static long fctSize(List list){
        long start = System.currentTimeMillis();

        for(long i = 0 ; i < list.size(); i++){
            System.currentTimeMillis();
        }
        return System.currentTimeMillis() - start;
    }
} 
```

# ruby-on-rails - 如何拆分长线？

> ID：12649485
> 
> 赞同：0
> 
> 时间：2012-09-29T02:40:35.917
> 
> 标签：ruby-on-rails, string, erb

我正在做一些 erb 练习和测试，但我似乎找不到如何在我的编辑器中拆分一条太长的愚蠢行。我已经尝试过使用 \n 和 \ 但是一旦我在终端中运行它就不起作用。

这是代码：

```
erb_string = "

 <h1><%= me[:name] + '\\'s ' + 'Blog'%></h1>

 <ul>
    <% animals.each do |animal| %>
    <li><%= animal.upcase.reverse %></li>
<% end %>
 </ul>

 <p><%= 'My name is ' + me[:name] + ', my eyes are ' + me[:eyes] + '.' %></p>

 <p><%= 'Let\\'s do some numbers! '  + numbers.last.to_s + '! is ' + numbers.inject(:*).to_s %></p> # I want to split this line in my editor because it is too long.
" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T02:47:06.873

```
rb_string = <<EOL

Lot's of cool
ruby an html and javascript stuff
That includes all the happy new lines that you want
so that you can read it.

EOL 
```

EOL 和任意字符串。并且结束 EOL 必须在一行的开头并且全部单独。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T02:43:57.347

```
 <p><%= 'Let\'s do some numbers! '  + \
   numbers.last.to_s + '! is ' + \
   numbers.inject(:*).to_s %></p> 
```

这应该有效。如果它不起作用，可能是因为您使用了两个反斜杠来转义单引号，而第一个反斜杠转义了第二个反斜杠，因此单引号没有转义。

顺便说一句，当您有一个包含单引号的字符串时，您最好将其封装在双引号中，这样您就不必转义单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T02:44:51.760

为了能够将 \n 用于新行，您的字符串必须用双引号引起来。因此，您需要使用“Hello \nWorld”而不是“Hello \nWorld”

# iphone - CLGeocoder 中的 Unicode 字符

> ID：12649487
> 
> 赞同：2
> 
> 时间：2012-09-29T02:41:04.770
> 
> 标签：iphone, objective-c, ios, xcode, unicode

我有一个搜索栏，您可以在其中搜索城市/国家/地区。我测试了它并搜索了东京。我的结果显示在搜索显示控制器的表格视图中。以下是我在表格视图单元格中搜索“东京”时得到的示例：

![这是一个 <code>UITableViewCell</code>](../Images/caff4f42d980f9ad07c7abfda60d4116.png)

我有一个字符串，它结合了单元格的标题和副标题。然后我对该字符串进行反向地理编码，但是我收到一个错误，因为它无法识别“东京”，因为字母“”是一个 unicode 字符。

那么有没有办法将这个字符串/'o'转换为常规'o'或没有unicode字符？或者有没有办法让`CLGeocoder`能够对这些类型的字符进行地理编码

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:42:44.563

恕我直言，您需要删除字符串中的所有变音符号。

请参阅文档以供`CFMutableString`参考：

```
Boolean CFStringTransform (
   CFMutableStringRef string,
   CFRange *range,
   CFStringRef transform,
   Boolean reverse
); 
```

将`transform`参数设置为`kCFStringTransformStripDiacritics`：

```
NSMutableString *StripDiacritics(NSString *string)
{
    CFMutableStringRef stringRef = (__bridge_retained CFMutableStringRef)[string mutableCopy];
    CFRange range = CFRangeMake(0, CFStringGetLength(stringRef));
    CFStringTransform(stringRef, &range, kCFStringTransformStripDiacritics, false);
    NSMutableString *result = (__bridge_transfer NSMutableString*)stringRef;
    return result;
} 
```

# ruby-on-rails - Heroku Memcache 问题 - Dalli::NetworkError: localhost:11211 is down

> ID：12649506
> 
> 赞同：2
> 
> 时间：2012-09-29T02:44:02.573
> 
> 标签：ruby-on-rails, heroku, memcached, thin, dalli

我最近将 Rails 升级到 3.2.2，现在我似乎遇到了与 Memcache 相关的问题……有人可以帮忙吗？

我的生产配置：

```
config.serve_static_assets = true
config.static_cache_control = "public, max-age=2592000"
config.assets.digest = true
config.action_controller.perform_caching = true
config.cache_store = :dalli_store
config.action_dispatch.rack_cache = {
 :metastore    => Dalli::Client.new,
 :entitystore  => 'file:tmp/cache/rack/body',
 :allow_reload => false
} 
```

Dalli 宝石在捆绑包中

```
gem 'dalli' 
```

我已经通过 herokus GUI 添加了 memcache 插件。

因此，我的 Procfile 是（也安装了“瘦”gem）：

```
web: bundle exec rails server -p $PORT thin -e $RACK_ENV 
```

但即使我尝试在控制台中进行简单的缓存维护，我也会遇到这些错误：

```
Loading production environment (Rails 3.2.2)
irb(main):001:0> dc = Dalli::Client.new('localhost:11211')
=> #<Dalli::Client:0x00000007501980 @servers="localhost:11211", @options={}, @ring=nil>
irb(main):002:0> dc.flush_all
localhost:11211 failed (count: 0)
Dalli::NetworkError: localhost:11211 is down:  
    from /app/vendor/bundle/ruby/1.9.1/gems/dalli-2.2.1/lib/dalli/server.rb:47:in `request'
    from /app/vendor/bundle/ruby/1.9.1/gems/dalli-2.2.1/lib/dalli/options.rb:18:in `block in request'
    from /usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
    from /app/vendor/bundle/ruby/1.9.1/gems/dalli-2.2.1/lib/dalli/options.rb:17:in `request'
    from /app/vendor/bundle/ruby/1.9.1/gems/dalli-2.2.1/lib/dalli/client.rb:158:in `block in flush'
    from /app/vendor/bundle/ruby/1.9.1/gems/dalli-2.2.1/lib/dalli/client.rb:158:in `map'
    from /app/vendor/bundle/ruby/1.9.1/gems/dalli-2.2.1/lib/dalli/client.rb:158:in `flush'
    from (irb):2
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/commands/console.rb:47:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/commands/console.rb:8:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

当然，资产服务也失败了：

```
2012-09-29T02:26:29+00:00 app[web.3]: cache error: No server available
2012-09-29T02:26:29+00:00 app[web.3]: /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'
2012-09-29T02:26:29+00:00 app[web.3]: /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
2012-09-29T02:26:29+00:00 app[web.3]: /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb:13:in `run'
2012-09-29T02:26:29+00:00 app[web.3]: /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:265:in `start'
2012-09-29T02:26:29+00:00 app[web.3]: /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/commands/server.rb:70:in `start' 
```

这是我的配置有问题吗？这是 Heroku 的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:54:21.377

删除它，因为它默认设置为这些东西......

```
config.action_dispatch.rack_cache = {
 :metastore    => Dalli::Client.new,
 :entitystore  => 'file:tmp/cache/rack/body',
 :allow_reload => false
} 
```

...一旦您确保您的 dalli 版本具有最新版本的此[提交](https://github.com/mperham/dalli/commit/0625e361aafdd2efb397fab6b22a2a95a707be38)。

# asp.net-mvc-3 - 在 ASP.NET MVC 4 中将 URL 中的 ID 参数别名为字符串

> ID：12649515
> 
> 赞同：2
> 
> 时间：2012-09-29T02:45:43.007
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我想要做的是重写 URL 以使它们对 SEO 更友好，但我仍然想将参数作为 int ID 传递。

例如，指向新闻文章的 URL 可能如下所示：“www.domain.com/category-id/article-id”或“domain.com/5/3”

我想要做的是在任何地方重写 URL，以便将类别的标题和文章的标题写入 URL，使其变为 fx“domain.com/politics/some-title”，但我仍然想通过文章的 ID 作为控制器操作的参数。这对于类别不太重要，但这是我想对文章 ID 做的事情，因为它是唯一的，但标题可能不是。

我检查了属性路由并查看了一些路由指南和问题，但没有找到任何可以让我实现此功能的东西。我刚刚开始使用 ASP.NET MVC，所以我无法研究任何太高级的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:21:49.097

快速而肮脏的解决方案：

1) domain.com/categoryName/articleID/articleName/ 2) domain.com/date/categoryName/articleName（日期应该有助于使 articleName 独一无二） 3) domain.com/categoryName/articleName?id=xxx

没什么特别的，但这些方法会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T13:18:44.437

我建议使文章标题独一无二，并且您必须从控制器操作中获取基于标题的文章。

我看到您正在尝试根据类别对文章进行分组。当我最初创建我的[博客](http://www.prideparrot.com)时，我也有同样的想法，但很快意识到这不是一种灵活的方法，原因有几个。

1.  假设您写了一篇带有名称的文章`some-title`并将其放在一个类别下`politics`，因此 URL 将是`domain.com/politics/some-title`，但稍后您想将文章移至另一个类别，例如“国际政治”，因此您的 url 现在必须更改到`domain.com/international-politics/some-title`并且您破坏了旧网址，并且为该链接添加书签的人现在将收到404。更好的方法是根据发布日期组织网址，这不会改变类似的东西`http://domain.com/archive/yyyy/mm/dd/unique_title`

2.  有时您想用多个类别标记一篇文章，此时与基于类别的方法相比，基于标签的方法将成为更好的选择。

# jenkins - Jenkins（持续构建）能否查明导致构建失败的提交？

> ID：12649518
> 
> 赞同：7
> 
> 时间：2012-09-29T02:46:50.263
> 
> 标签：jenkins

Jenkins 说构建成功或失败，但它能否确定导致构建失败的确切提交（和作者！）？

[这个问题](https://issues.jenkins-ci.org/browse/JENKINS-12972)似乎表明没有。

**编辑**：来自我与佩斯的交流：

> 我看到的是“包括罪魁祸首”，这是自上次构建以来的每个人。我不想要那个。我想要罪魁祸首，詹金斯在做二进制搜索。如果 Jenkins 进行两次构建 10 次提交，我不想要 10 个可能的罪魁祸首，我希望它找到**一个**.

我还没有听说如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T02:57:01.890

该页面在谈论“查找错误”插件，而不是正常的构建周期。根据设置的方式，Jenkins 可以识别导致失败的确切提交和作者。如果 Jenkins 安装了适当的源代码控制插件并配置为了解构建所绑定的存储库，那么对于每个构建，它将列出自上次构建以来的更改。

此外，Jenkins 在其许多报告插件中都有能力责怪有问题的提交者。例如，它可以向做出错误提交的开发人员发送有关构建失败[的电子邮件通知。](http://jenkins.361315.n4.nabble.com/E-mail-notifications-to-individuals-who-broke-the-build-td364556.html)

然而，许多设置让 Jenkins 很难知道。例如，如果 Jenkins 被配置为每日构建，那么可能有很多提交可能会导致问题。Jenkins 也可能未配置为了解源代码控制存储库，或者没有源代码控制存储库。所有这些问题都可能导致 Jenkins 无法识别构建破坏者。

特别是对于发送错误提交者的电子邮件，您可以使用[email-ext](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)插件，该插件具有向自上次成功构建以来提交的每个人发送电子邮件的选项。

对于这个主题的幽默看法，请查看[这个方法](http://www.papercut.com/blog/chris/2011/08/19/who-broke-the-build/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T23:15:40.347

我认为您所要求的在某些情况下是不可能的。确定谁是罪魁祸首需要深入了解只有人类才能决定的冲突解决方案。即便如此，有时必须让经理参与才能进行仲裁。例如，假设您获得 3 个提交（A、B、C），它们取决于预先存在的定义。但是，另一个提交 (D) 会修改该函数的行为。你还原哪个？也许商业计划是保持 A、B、C 原样并将 D 恢复到原始状态。相反，修改 A、B、C 以适应 D 的变化也是可能的。

在机器可以处理仲裁的情况下，单元测试和静态分析器负责确定罪魁祸首（尽管仍然不完美）。静态分析器有时会内置向违规者发送电子邮件的功能。可以编写单元测试来通知负责失败测试的团队或团队成员。两者都可以以相同的方式工作，以确定谁是失败的特定行上的最后一个提交者。不过，如果链接有问题，那么也许某些成员应该与特定的 makefile 相关联。

# android - Android蓝牙pbap获取请求失败

> ID：12649525
> 
> 赞同：1
> 
> 时间：2012-09-29T02:48:26.050
> 
> 标签：android, bluetooth, obex

每个人。

我尝试在 Android 平台上实现一个 pbap 客户端。

我的客户可以从大多数安卓手机中获取电话簿。

但是当我连接到 HTC G11 时，它无法正常工作。

我的主要代码如下：

```
mSocket = mDevice.createInsecureRfcommSocketToServiceRecord(ParcelUuid.fromString(PBAP_UUID).getUuid());  //it's OK here

mSocket.connect();  //it's OK here

mClientSession = new ClientSession(transport);  //it's OK here

HeaderSet request_conn = new HeaderSet();
request_conn.setHeader(HeaderSet.TARGET, PBAP_TARGET);
HeaderSet return_header = mClientSession.connect(request_conn); //it's OK here 
```

当调用 mClientSession.connect(request_conn) 时，远程设备给出响应码 OBEX_HTTP_OK。

这意味着远程设备接受了我的 pbap 连接请求。

但是之后问题就出来了。

```
HeaderSet request_get = new HeaderSet();
request_get.setHeader(HeaderSet.NAME, name);
request_get.setHeader(HeaderSet.TYPE, type);
mGetOperation = (ClientOperation)mClientSession.get(request_get);
mInputStream = mGetOperation.openInputStream();  // problem come out here 
```

我向远程设备发送了一个获取请求，但远程给出了一个响应代码 211，这意味着 OBEX_SERVICE_UNAVAILABLE。所以我无法从 htc G11 获取电话簿。

我尝试诺基亚 N9，它与 HTC G11 相同。诺基亚 N9 也给出了响应代码 211。

但是诺基亚 N9 和 HTC G11 可以互相传输电话簿，两者都可以从安卓手机上获取电话簿。

Android 在 framework/base/obex 中实现 pbap 会话层 API

我猜 HTC G11 不使用标准的 android 会话层 API。

但它有什么用？诺基亚 N9 怎么样？

谁能给我一个答案或一些正确的代码？请帮我。

我深受这个问题的困扰。谢谢！

我的邮箱：yulf88@gmail.com

# mysql - MySQL REGEX 表示换行符

> ID：12649526
> 
> 赞同：1
> 
> 时间：2012-09-29T02:48:30.197
> 
> 标签：mysql, regex

我在一个字段中有这样的数据：

```
This is where a sentence ends.
This is a new sentence. 
```

说我想得到第一句话。

```
SELECT * FROM `mytable` WHERE `file` REGEXP
'This is where a sentence ends.\n' 
```

这不返回任何行。我也试过`\\n, \r, \\r`

你如何表达换行符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:50:55.560

你按照`\n`你列出的那样做。确保在句号之后没有任何多余的空格，因为这可能会破坏匹配。另外，请注意，`.`您的正则表达式中的 被解释为`any character`- 所以您需要像`\.`获得文字句点一样转义它。

# php - 半进阶 PHP 数组

> ID：12649528
> 
> 赞同：1
> 
> 时间：2012-09-29T02:48:44.673
> 
> 标签：php, arrays

所以我是 Arrays 的新手，但我认为这应该很容易，我只是无法理解它。

我有一个数组，其中可以包含不同数量的键，具体取决于用户给出的输入量。

```
$array = MY_Class( array(
   'type' => 'representatives', 
   'show_this_many' => '10'
)); 
```

很容易，对吧？

但根据用户输入，我还有 1-4 个键。他们在第一页填写表格，然后提交到第二页（包含上面的数组）。

我需要根据用户在上一页填写的字段数来获取**City**、**State**、**First**、**last 。**我不能有空白的所以

```
$array = MY_Class( array(
   'type' => 'representatives', 
   'show_this_many' => '10',
   'city' => '',
   'state' => '',
   'first' => $_GET['first']
)); 
```

不会真的工作。我需要一种方法来确定已提交哪些字段（最好是通过`GET`）并以这种方式构建数组。所以最终可以

```
 $array = MY_Class( array(
   'type' => 'representatives', 
   'show_this_many' => '10',
   'state' => $_GET['state'],
   'first' => $_GET['first']
)); 
```

因为**state**和**first**有值，而**city**和**last**没有。

首先想到的是

```
$array = MY_Class( array(
   'type' => 'representatives', 
   'show_this_many' => '10',
   $constants => $variables
));

//where
$constants = array( //_GET stuff values );
$variables = array( //_GET stuff with values );

// magic method to make it like
//  CONSTANTS[0] => VARIABLES[0];
//  CONSTANTS[1] => VARIABLES[1];
// so everything is lined up 
```

但我不知道该怎么做：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:52:09.243

您将需要使用可能的密钥白名单，`$_GET`这样您的阵列就不会被虚假（或可能是恶意）密钥污染，然后您可以简单地将它们附加到您的阵列上，并在`$_GET`.

```
// Your array is already initialized with some values:
$array = array(
  'type' => 'representatives', 
  'show_this_many' => '10' 
);

// Allowed GET keys
$allowed = array('city','state','first');

// Loop over get and add the keys (if allowed)
foreach ($_GET as $key => $value) {
  // If the key is allowed and the value isn't blank...
  if (in_array($allowed, $key) && !empty($value)) {
    $array[$key] = $value;
  }
}

// See all the newly added keys...
var_dump($array); 
```

另一种选择是将所有键添加到数组中，然后调用[`array_filter()`](http://us3.php.net/manual/en/function.array-filter.php)以删除空白。

```
$array = array(
  'type' => 'representatives', 
  'show_this_many' => '10',
  'city' => '', 
  'state' => '',
  'first' => ''
);
// Add values from $_GET, then filter it
$array = array_filter($array, function($val) {
  return $val !== '' && !is_null($val);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T03:18:30.007

试试下面的代码

```
$array = array(
  'type' => 'representatives', 
  'show_this_many' => '10'
);

$fields = array ('city', 'state', 'first');

foreach ($fields as $field) {
  if (!empty($_GET[$field])) {
    $array[$field]  = $_GET[$field]
  }
} 
```

# android - 将 java.net.URI 转换为 android.net.Uri

> ID：12649530
> 
> 赞同：23
> 
> 时间：2012-09-29T02:48:49.853
> 
> 标签：android, uri

我可以在这里找到如何将 android.net.Uri 转换为 Java.net.URI[但](https://stackoverflow.com/questions/559902/android-how-can-i-convert-android-net-uri-object-to-java-net-uri-object)反之亦然。

所以花了一些时间后，我想通了。这是解决方案（如果有其他解决方案，请同时发布）

先将javaURI转成string，然后使用android.net.Uri的parse函数

```
android.net.URI androidUri = android.net.Uri.parse(javaURI.toString()); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-03-11T13:26:23.957

[http://developer.android.com/reference/android/net/Uri.html#parse(java.lang.String)](http://developer.android.com/reference/android/net/Uri.html#parse(java.lang.String))

```
public static Uri parse (String uriString) 
```

> 创建一个解析给定编码 URI 字符串的 Uri。
> 
> 参数
> uriString：符合 RFC 2396 的编码 URI
> 
> 返回
> 此给定 uri 字符串的 Uri
> 
> 如果 uriString 为空，则抛出NullPointerException

* * *

因此，这里有一个例子：

```
android.net.Uri.parse(new java.net.URI("").toString()); 
```

*不用说，在其中使用真实* `java.net.URI` *的...* **;)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-27T19:48:00.903

对于遇到此问题的任何人，我都使用以下代码取得了成功：

```
URI oldUri;
Uri newUri  = new Uri.Builder().scheme(oldUri.getScheme())
                    .encodedAuthority(oldUri.getRawAuthority())
                    .encodedPath(oldUri.getRawPath())
                    .query(oldUri.getRawQuery())
                    .fragment(oldUri.getRawFragment())
                    .build(); 
```

基本上，获取每个 URI 组件并将其传递给构建器（因为似乎没有办法传递整个 URI 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-15T11:21:27.567

```
uri = Uri.parse(mFile.toString()); 
```

# python - Python：正则表达式删除字母前面的零？

> ID：12649531
> 
> 赞同：2
> 
> 时间：2012-09-29T02:49:39.027
> 
> 标签：python, regex

想出以下房间号的正则表达式语句有点麻烦：

```
C001B --> C1B //remove "leading" zeros after first set of letters
C100B --> C100B
CB001B --> CB1B //remove "leading" zeros after first set of letters
001B --> 1B //remove leading zeros 
```

本质上，删除所有前面没有数字的零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:54:25.950

好吧，要匹配这样的零，您可以使用否定的lookbehind，例如`(?<![^a-zA-Z])`，以确保匹配的区域前面没有任何东西，而是一个字母。通过在匹配之前插入它，它将确保紧随其后的任何内容都与包含的模式不匹配，here`[^a-zA-Z]`也适用于行首的匹配。

```
re.sub("(?<![^a-zA-Z])0+","",number) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T03:09:45.280

找出所有的模式，如`'ABC000'`, `'000'`，并消除`'0'`s。

```
return re.sub( "([^0-9]+|^)0+", r'\1', raw ) 
```

# ruby-on-rails - 用于 nil:NilClass 的 Rails 未定义方法“名称”

> ID：12649533
> 
> 赞同：1
> 
> 时间：2012-09-29T02:50:40.163
> 
> 标签：ruby-on-rails, class

在遍历我的 Items 数组时，我试图打印该项目以及数组中的前一个项目，但这样做有一些困难。我要打印的每个图像都与项目名称相同。我得到错误的代码如下：

```
<% @items.each do |item| %>
<img src="/assets/<%= item.name %>.jpeg" >
//This is where I get my error//
<img src="/assets/<%= @items[item.id - 1].name %>.jpeg" >
<% end %> 
```

它打印出错误：nil:NilClass 的未定义方法“名称”。但是，如果我将发生错误的行更改为“<%= @items[item.id].class %>”，则表明该类是 Item 而不是 nil。此外，如果我将数字硬编码，例如“.jpeg”>“rails 正确输出图片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T03:02:25.870

据我所知：

`@item`未定义，您可能的意思是`@items`，在这种情况下，您所做的也很可能对您没有帮助，因为您当前项目上的 id 与集合中的索引无关。

如果您输入的不是复制/粘贴而是确实`@items`有，那么您仍然遇到的问题`item.id - 1`不是您的意思。你可能的意思是：

```
<% @items.each_with_index do |item, i| %>
<% i = i - 1 %>
<img src="/assets/<%= item.name %>.jpeg" >
//This is where I get my error//
<% unless i < 0 %>
<img src="/assets/<%= @items[i].name %>.jpeg" >
<% end %>
<% end %> 
```

如果你仍然得到它，那么这意味着你的收藏中有 nils 并且你需要：

```
<% @items.compact.each_with_index do |item, i| %>
<% i = i - 1 %>
<img src="/assets/<%= item.name %>.jpeg" >
//This is where I get my error//
<% unless i < 0 %>
<img src="/assets/<%= @items[i].name %>.jpeg" >
<% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T02:55:42.087

您已经在遍历`@items`数组，变量中的每个项目`item`。但是，不能保证`.id`每个项目的属性都对应于它在`@items`数组中的确切位置。如果`item`您的数据库中的每个都有不同`.id`的 ，则无法保证您的`@items`数组中甚至有那么多项目。

例如，在这个数组中：

```
@items = {{id: 5}, {id: 10}} 
```

每个项目都有索引`0`和数组`1`。`@items`但是，尝试通过 do 来查找“上一个”项目将导致 Ruby在数组`@items[item.id - 1]`中的索引处寻找一个项目——该项目不存在。`4``@items`

* * *

`each_with_index`不过会帮助您解决这个问题 - 您可以使用它来获取数组中每个项目的实际索引，而不是依赖于`.id`属性。像这样的东西：

```
<% @items.each_with_index do |item, index| %>
    <img src="/assets/<%= item.name %>.jpeg" >
    <img src="/assets/<%= @items[index - 1].name %>.jpeg" >
<% end %> 
```

# django - Twitter-Bootstrap 模态和 django 形式

> ID：12649539
> 
> 赞同：1
> 
> 时间：2012-09-29T02:51:39.053
> 
> 标签：django, jquery, twitter-bootstrap, django-forms, django-views

我想`last_item`在 django 表单提交后在 Twitter-Bootstrap 模态中显示，但是我不知道如何处理模态。我尝试了[文档](http://twitter.github.com/bootstrap/javascript.html#modals)中建议的表单按钮，但它不处理表单数据。我需要做什么？

```
<button data-toggle="modal" data-target="#myModal2">Submit</button> 
```

### 视图.py

```
def main(request):
    if request.method == 'POST':
        form = MyModelForm(request.POST)
        if form.is_valid():
            name = form.cleaned_data['name']
            request.session['name'] = name
            mm = MyModel.objects.create(name=name)
            mm.save()
            return HttpResponseRedirect('/') # Redirect after POST
    else:
        form = MyModelForm()
    args = {}
    args['last_item'] = MyModel.objects.all().order_by('pk').reverse()[0]
    args['form'] = form
    return render(request, 'form.html', args) 
```

### 表单.html

```
{% extends "base.html" %}
{% block content %}

<form method="POST" id="" action="">
  {% csrf_token %}
  {{ form.as_p }}
  <button>Submit</button>
</form>

<div class="modal" id="myModal2" tabindex="-1" role="dialog"
     aria-labelledby="myModal2Label" aria-hidden="true" style="display: none">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModal2Label">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>Last item: {{ last_item }}</p>
  </div>
</div>
{% endblock %}

{% block scripts %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:03:06.183

It [seems](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-modal.js#L222) like bootstrap calls `event.preventDefault()` on click, which prevents the form from being submited.

You should [bind your own event](http://api.jquery.com/submit/) on this button and [close the modal programaticaly](http://twitter.github.com/bootstrap/javascript.html#modals).

It could look like:

```
$('form').submit(function() {
    $('#myModal2').modal('hide');
}) 
```

I did not test this code but it should be a good start.

# javascript - jQuery取消绑定和重新绑定悬停功能

> ID：12649545
> 
> 赞同：0
> 
> 时间：2012-09-29T02:52:56.473
> 
> 标签：javascript, jquery

> **可能重复：**
> [JQuery Unbind 然后绑定](https://stackoverflow.com/questions/11784257/jquery-unbind-and-then-bind)

我有一个在悬停时执行动画的函数（mouseenter、mouseleave）。单击按钮后，我正在尝试取消绑定该功能（因为我不希望用户与之交互）。这可行，但我遇到的问题是再次重新绑定悬停功能，以便当用户再次单击按钮时，动画和悬停效果重新使用。

不确定这是否是实现这一点的正确方法，但希望我能在这个问题上得到一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T03:02:15.637

不断地解除绑定和重新绑定通常不是最好的方法。它需要比实际需要更多的工作。

一种选择是在您悬停时在元素上设置一个类，并让您的其他代码在调用时检查该类的存在。

```
$('.myelem')
    .on("mouseenter", function() {
        $(this).addClass("hovering");
    })
    .on("mouseleave", function() {
        $(this).removeClass("hovering");
    })
    .on("click", function() {
        if ($(this).hasClass("hovering") === false) {
            // run the code
        }
    }); 
```

类似的方法是添加类，但使用事件委托方法来控制行为，以便将选择器定义为在没有`"hovering"`类的元素上工作。

```
$('.myelem')
    .on("mouseenter", function() {
        $(this).addClass("hovering");
    })
    .on("mouseleave", function() {
        $(this).removeClass("hovering");
    });

$("#container").on("click", ".myelem:not(.hovering)", function() {
    // run the code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T03:27:44.730

这是多个阻塞上下文的演示，使用`class`名称来防止元素对 做出反应`mouseenter mouseleave`：

```
<div class="highlight">
    Hover Me
    <button type="button">Stop Hoverable</button>
</div>
<div class="highlight">
    Hover Me
    <button type="button">Stop Hoverable</button>
</div>
<div class="highlight">
    Hover Me
    <button type="button">Stop Hoverable</button>
</div>

$('.highlight')
    .on('mouseenter mouseleave', function(){
        if (!$(this).is('canceled')) {
            $(this).toggleClass('hovered');
        }
    })
    .on('click', 'button', function(){
        $(this).parent().toggleClass('canceled');
    });​ 
```

[http://jsfiddle.net/rRaPB/](http://jsfiddle.net/rRaPB/)

这是使它工作的行：

```
if (!$(this).is('canceled')) { 
```

# ios - iOS - 仅将 UIView 的一部分保存为 PNG

> ID：12649548
> 
> 赞同：0
> 
> 时间：2012-09-29T02:53:27.147
> 
> 标签：ios, uiview, png

我正在使用以下代码将 a 的内容转换为`UIView`图像`PNG`：

```
UIGraphicsBeginImageContext(myView.bounds.size);
[myView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

这工作正常。如果`UIView`500 像素高，并且我想生成*两个*图像（一个上半部分和一个下半部分），我该怎么做呢？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:08:03.463

有几种方法可以做到这一点。一种方法是将其绘制成一张大图，然后制作两个子图：

```
static UIImage *halfOfImage(UIImage *fullImage, CGFloat yOffset) {
    // Pass yOffset == 0 for the top half.
    // Pass yOffset == 0.5 for the bottom half.

    CGImageRef cgImage = fullImage.CGImage;
    size_t width = CGImageGetWidth(cgImage);
    size_t height = CGImageGetHeight(cgImage);
    CGRect rect = CGRectMake(0, height * yOffset, width, height * 0.5f);

    CGImageRef cgSubImage = CGImageCreateWithImageInRect(cgImage, rect);
    UIImage *subImage = [UIImage imageWithCGImage:cgSubImage scale:fullImage.scale
        orientation:fullImage.imageOrientation];
    CGImageRelease(cgSubImage);
    return subImage;
}

...
    UIGraphicsBeginImageContext(myView.bounds.size);
    [myView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    UIImage *topHalfImage = halfOfImage(viewImage, 0);
    UIImage *bottomHalfImage = halfOfImage(viewImage, 0.5f); 
```

# css - 滞后（或生涩）的 CSS3 动画 - 如何平滑？

> ID：12649551
> 
> 赞同：1
> 
> 时间：2012-09-29T02:54:01.643
> 
> 标签：css, css-animations

我的网站上有 CSS3 动画作为介绍。在一台计算机上（使用不错的 GPU 速度很快）是流畅的，并且是我正在寻找的。在另一台计算机上（慢得多），它非常生涩，有时您会完全错过动画。

我试图预加载整个页面，然后添加使用 JS 触发动画的类以尝试改进动画。它似乎对一些人有所帮助，但并没有解决问题。

有没有办法平滑 CSS3 动画以在所有类型的计算机之间保持一致性？

代替在这里发布所有代码，我[创建了一个 fiddle](http://jsfiddle.net/Lynda333/df8gw/4/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T03:12:21.283

“流畅度”取决于浏览器的渲染能力，而浏览器的渲染能力又取决于客户端机器的能力。您可以做的最好的事情是确保您的网页没有不合理的重图像，或难以渲染的字体等，从浏览器的角度来看需要更多的计算。

你的小提琴对我来说很好用。

# c++ - 视觉工作室：calloc重新定义

> ID：12649559
> 
> 赞同：0
> 
> 时间：2012-09-29T02:56:39.567
> 
> 标签：c++, visual-studio-2010

我正在尝试编译一些代码，我必须编译 meschach 库和其他一些包含 malloc、calloc 等代码的库。

我遇到了我的 Visual Studio 2010 Express 编译器抱怨的问题

```
c:\program files (x86)\microsoft visual studio 10.0\vc\include\stdlib.h(598): error C2375: 'calloc' : redefinition; different linkage
1>          c:\work\malloc\malloc.h(98) : see declaration of 'calloc' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T03:00:15.733

我想知道`c:\work\malloc\malloc.h`您是否基本上是在写一个项目`calloc`？如果是这种情况，那么您需要不包含`stdlib.h`或调用您的`calloc`不同版本。

# background - 调整行大小时 ListFragment 中行的备用背景不起作用

> ID：12649564
> 
> 赞同：0
> 
> 时间：2012-09-29T02:57:28.530
> 
> 标签：background, resize, android-arrayadapter, android-listfragment, alternate

我正在使用自定义 ListFragment 来显示一个列表，其中偶数行有背景，奇数行没有。为此，我使用重写的 getView(int, View, ViewGroup) 方法创建了 ArrayAdapter 的子类，并在那里为偶数行设置了背景资源。

它起作用了，但是我需要将视图的尺寸调整为在有和没有背景的行中相等，所以我调整了 LayoutParams 如下：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);
    if ((position & 1) == 0) {
        view.setBackgroundResource(R.drawable.marcador_wink_normal);
    }
    ViewGroup.LayoutParams params = view.getLayoutParams();
    params.height = rowHeight;
    view.setLayoutParams(params);
    return view;
} 
```

我试过这个，它似乎工作，直到我向下滚动然后向上滚动，这导致背景被应用到每一行。

我的问题是：我做错了什么？

我正在使用片段的 v4 支持库，这是我的自定义 ListFragment 的 onCreate(Bundle) 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    int layout = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
            android.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_1;

    setListAdapter(new WinkAdapter(getActivity(), layout, TEST_LIST));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:20:44.587

用于组成列表的视图一旦在屏幕上不可见就会被重用。

在您的原始代码中，一旦在给定视图上将背景设置为 R.drawable.marcador_wink_normal，它就永远是 R.drawable.marcador_wink_normal。当您添加 else 时，您使其在这些重用视图上正确设置了背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:38:16.893

好的，我解决了它只是添加了一个*else*语句：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);
    if ((position & 1) == 0) {
        view.setBackgroundResource(R.drawable.marcador_wink_normal);
    }
    else {
        view.setBackgroundColor(0);
    }
    ViewGroup.LayoutParams params = view.getLayoutParams();
    params.height = 100;
    view.setLayoutParams(params);
    return view;
} 
```

但我仍然不明白为什么会出现问题。

# java - 什么是 在java中是什么意思？

> ID：12649572
> 
> 赞同：8
> 
> 时间：2012-09-29T02:59:50.050
> 
> 标签：java, syntax

我已经看到了声明、接口和类`TYPE<CLASS>`

这是什么意思？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-29T03:06:46.350

没有证据，我相信你在谈论[Java 的泛型](http://docs.oracle.com/javase/tutorial/extra/generics/intro.html)支持......

> 泛型允许您对类型进行抽象

在 Java 5 之前，很难提供能够支持多种不同类型的对象的类，而不必针对每种特定情况进行编码，因此人们通常会通过`Object`。

这导致在运行时做出许多困难的选择，您必须进行运行时检查以查看是否可以将给定的 Object 转换为可用的类型......例如

```
List myIntList = new LinkedList(); // 1
myIntList.add(new Integer(0)); // 2
Integer x = (Integer) myIntList.iterator().next(); // 3 
```

现在，这是相当明显的，但是如果您只通过了 a `List`，则必须检查列表中的每个元素的正确性...

但现在，我们可以做到这一点...

```
List<Integer> myIntList = new LinkedList<Integer>(); // 1'
myIntList.add(new Integer(0)); // 2'
Integer x = myIntList.iterator().next(); // 3' 
```

这是一个基本上说“这个列表只包含整数类型的对象”的合同。

使用泛型，您可以构建能够处理多种不同数据类型或数据类型族的单个类（即约束参数，使其必须从特定的父类型扩展）。

```
Iterator<? extends Number> itNum; 
```

基本上说，这将包含继承自`Number`, include `Integer`, `Long`, `Double`, `Float`...的对象

通常在方法和类减速中，您会看到类似于...

```
public class MyGenericClass<T> {...} 
```

或者

```
public class MyGenericClass<T extends MyBaseObject> {...} 
```

这使您可以`T`像引用具体的对象类型一样引用它，例如...

```
public class MyGenericClass<T extends MyBaseObject> {
    private T value;
    public MyGenericClass(T value) {
        this.value = value;
    }
} 
```

这允许编译器（和 JVM）本质上`T`用音乐会类型“替换”标记（好吧，它比那个复杂一点，但这就是魔法）......

这允许执行诸如...

```
... new MyGenericClass<MySuperObject>(new MySuperObject());
... new MyGenericClass<MySuperSuperObject>(new MySuperSuperObject()); 
```

并且知道它只会接受我指定的对象类型......

阅读第一段中的链接，我相信它可以做更多的正义，然后我可以;）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-29T03:05:36.480

```
public class Grid<E> { 
```

这就是在 Java 中定义泛型类的方式。`Grid`是类并且`E`是一个正式的类型参数。

如果你真的有兴趣了解它，你会在这里找到一个非常好的参考 - [Java Generics FAQs - FAQs](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T03:05:15.400

那是泛型类型[在这里检查它](http://docs.oracle.com/javase/tutorial/java/generics/)。简单的例子是

```
List<String>

Map<Integer, String> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T03:06:36.290

如果不看看你到底看到了什么，就不清楚你在问什么。但是您很可能会看到 Java 中的泛型。[点击此处了解详情](http://docs.oracle.com/javase/tutorial/java/generics/)

这个想法基本上是为了在 Java 中增强类型安全性。因此，类似`List<Integer> intList`手段的声明中`intList`包含整数。如果您尝试输入一个字符串，例如，它会引发编译错误。

# dart - 你如何在 Dart 中构建一个单例？

> ID：12649573
> 
> 赞同：373
> 
> 时间：2012-09-29T02:59:51.820
> 
> 标签：dart, singleton

单例模式确保只创建一个类的一个实例。我如何在 Dart 中构建它？

* * *

## 回答 #1

> 赞同：549
> 
> 时间：2012-09-29T02:59:51.820

感谢 Dart 的[工厂构造函数](https://www.dartlang.org/guides/language/language-tour#factory-constructors)，很容易构建单例：

```
class Singleton {
  static final Singleton _singleton = Singleton._internal();

  factory Singleton() {
    return _singleton;
  }

  Singleton._internal();
} 
```

你可以像这样构造它

```
main() {
  var s1 = Singleton();
  var s2 = Singleton();
  print(identical(s1, s2));  // true
  print(s1 == s2);           // true
} 
```

* * *

## 回答 #2

> 赞同：417
> 
> 时间：2019-03-26T00:25:07.260

下面是在 Dart 中创建单例的几种不同方法的比较。

## 1.工厂构造函数

```
class SingletonOne {

  SingletonOne._privateConstructor();

  static final SingletonOne _instance = SingletonOne._privateConstructor();

  factory SingletonOne() {
    return _instance;
  }

} 
```

## 2\. 带getter的静态字段

```
class SingletonTwo {

  SingletonTwo._privateConstructor();

  static final SingletonTwo _instance = SingletonTwo._privateConstructor();

  static SingletonTwo get instance => _instance;

} 
```

## 3.静态场

```
class SingletonThree {

  SingletonThree._privateConstructor();

  static final SingletonThree instance = SingletonThree._privateConstructor();

} 
```

## 如何实例化

上面的单例实例化如下：

```
SingletonOne one = SingletonOne();
SingletonTwo two = SingletonTwo.instance;
SingletonThree three = SingletonThree.instance; 
```

*笔记：*

我最初问这个[问题](https://stackoverflow.com/q/54057958/3681880)，但发现上述所有方法都是有效的，选择很大程度上取决于个人喜好。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-12-12T23:00:49.867

我觉得它不是很直观的阅读`new Singleton()`。您必须阅读文档才能知道这`new`实际上并没有像通常那样创建新实例。

这是另一种做单例的方法（基本上是安德鲁上面所说的）。

lib/thing.dart

```
library thing;

final Thing thing = new Thing._private();

class Thing {
   Thing._private() { print('#2'); }
   foo() {
     print('#3');
   }
} 
```

主要.dart

```
import 'package:thing/thing.dart';

main() {
  print('#1');
  thing.foo();
} 
```

请注意，由于 Dart 的延迟初始化，直到第一次调用 getter 时才会创建单例。

如果您愿意，您还可以在单​​例类上将单例实现为静态 getter。即`Thing.singleton`，而不是顶级吸气剂。

另请阅读 Bob Nystrom 在[他的游戏编程模式书中对单例](http://gameprogrammingpatterns.com/singleton.html)的看法。

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2019-11-25T06:22:15.063

这是一个简单的答案：

首先，我们需要一个类类型的`private`and`static`属性。

其次，构造函数应该是`private`，因为我们要防止从类外部初始化对象。

最后，我们检查实例的可空性，如果它为空，我们将实例化并返回它，否则我们将返回已经实例化的实例。

***延迟加载的实现***

```
class Singleton {
  static Singleton? _instance;

  Singleton._();

  static Singleton get instance => _instance ??= Singleton._();

  void someMethod(){
    ...
  }

  ...
} 
```

***使用急切加载实现***

```
class Singleton {
  static Singleton _instance = Singleton._();

  Singleton._();

  static Singleton get instance => _instance;

  void someMethod(){
    ...
  }

  ...
} 
```

***用法***

```
Singleton.instance.someMethod(); 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2012-09-29T03:41:48.970

像这样在库中使用全局变量怎么样？

`single.dart`：

```
library singleton;

var Singleton = new Impl();

class Impl {
  int i;
} 
```

`main.dart`：

```
import 'single.dart';

void main() {
  var a = Singleton;
  var b = Singleton;
  a.i = 2;
  print(b.i);
} 
```

还是对此不屑一顾？

在不存在全局概念的 Java 中，单例模式是必需的，但似乎您不需要在 Dart 中走很长的路。

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2014-09-25T17:35:08.743

这是另一种可能的方式：

```
void main() {
  var s1 = Singleton.instance;
  s1.somedata = 123;
  var s2 = Singleton.instance;
  print(s2.somedata); // 123
  print(identical(s1, s2));  // true
  print(s1 == s2); // true
  //var s3 = new Singleton(); //produces a warning re missing default constructor and breaks on execution
}

class Singleton {
  static final Singleton _singleton = new Singleton._internal();
  Singleton._internal();
  static Singleton get instance => _singleton;
  var somedata;
} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-12-20T13:00:30.387

const 构造函数和工厂的 Dart 单例

```
class Singleton {
  factory Singleton() =>
    Singleton._internal_();
  Singleton._internal_();
}

void main() {
  print(new Singleton() == new Singleton());
  print(identical(new Singleton() , new Singleton()));
} 
```

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2021-02-26T20:33:54.457

在这个例子中，我做了一些在想要使用 Singleton 时也需要做的事情。例如：

*   **将值传递给单例的构造函数**
*   **在构造函数本身内部初始化一个值**
*   **为单例变量设置一个值**
*   **能够访问和访问这些值**。

像这样：

```
class MySingleton {

  static final MySingleton _singleton = MySingleton._internal();

  String _valueToBeSet;
  String _valueAlreadyInSingleton;
  String _passedValueInContructor;

  get getValueToBeSet => _valueToBeSet;

  get getValueAlreadyInSingleton => _valueAlreadyInSingleton;

  get getPassedValueInConstructor => _passedValueInContructor;

  void setValue(newValue) {
    _valueToBeSet = newValue;
  }

  factory MySingleton(String passedString) {
    _singleton._valueAlreadyInSingleton = "foo";
    _singleton._passedValueInContructor = passedString;

    return _singleton;
  }

  MySingleton._internal();
} 
```

MySingleton 的用法：

```
void main() {

MySingleton mySingleton =  MySingleton("passedString");
mySingleton.setValue("setValue");
print(mySingleton.getPassedValueInConstructor);
print(mySingleton.getValueToBeSet);
print(mySingleton.getValueAlreadyInSingleton);

} 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2019-06-22T20:10:37.333

**实例化后无法更改对象的单例**

```
class User {
  final int age;
  final String name;

  User({
    this.name,
    this.age
    });

  static User _instance;

  static User getInstance({name, age}) {
     if(_instance == null) {
       _instance = User(name: name, age: age);
       return _instance;
     }
    return _instance;
  }
}

  print(User.getInstance(name: "baidu", age: 24).age); //24

  print(User.getInstance(name: "baidu 2").name); // is not changed //baidu

  print(User.getInstance()); // {name: "baidu": age 24} 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2021-05-22T19:53:57.540

自版本以来，使用关键字`Dart 2.13`非常容易。关键字允许我们懒惰地实例化对象。`late``Late`

例如，您可以看到它：

```
class LazySingletonExample {
  LazySingletonExample._() {
    print('instance created.');
  }

  static late final LazySingletonExample instance = LazySingletonExample._();

} 
```

> 注意：请记住，它只会在您调用惰性`instance`字段时实例化一次。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2019-10-24T09:33:57.447

在阅读了所有替代方案后，我想到了这个，这让我想起了一个“经典单身人士”：

```
class AccountService {
  static final _instance = AccountService._internal();

  AccountService._internal();

  static AccountService getInstance() {
    return _instance;
  }
} 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2020-07-28T07:29:23.633

这就是我在项目中实现单例的方式

灵感来自 Flutter Firebase =>`FirebaseFirestore.instance.collection('collectionName')`

```
class FooAPI {
  foo() {
    // some async func to api
  }
}

class SingletonService {
  FooAPI _fooAPI;

  static final SingletonService _instance = SingletonService._internal();

  static SingletonService instance = SingletonService();

  factory SingletonService() {
    return _instance;
  }

  SingletonService._internal() {
    // TODO: add init logic if needed
    // FOR EXAMPLE API parameters
  }

  void foo() async {
    await _fooAPI.foo();
  }
}

void main(){
  SingletonService.instance.foo();
} 
```

## 我的项目中的示例

```
class FirebaseLessonRepository implements LessonRepository {
  FirebaseLessonRepository._internal();

  static final _instance = FirebaseLessonRepository._internal();

  static final instance = FirebaseLessonRepository();

  factory FirebaseLessonRepository() => _instance;

  var lessonsCollection = fb.firestore().collection('lessons');

  // ... other code for crud etc ...
}

// then in my widgets
FirebaseLessonRepository.instance.someMethod(someParams); 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2019-01-13T08:18:45.697

修改了@Seth Ladd 对于谁更喜欢 Swift 单例风格的回答，例如`.shared`：

```
class Auth {
  // singleton
  static final Auth _singleton = Auth._internal();
  factory Auth() => _singleton;
  Auth._internal();
  static Auth get shared => _singleton;

  // variables
  String username;
  String password;
} 
```

样本：

```
Auth.shared.username = 'abc'; 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2018-06-25T20:45:20.870

这是一个结合其他解决方案的简洁示例。可以通过以下方式访问单例：

*   使用`singleton`指向实例的全局变量。
*   常见的`Singleton.instance`模式。
*   使用默认构造函数，这是一个返回实例的工厂。

**注意：**您应该只实现三个选项之一，以便使用单例的代码是一致的。

```
Singleton get singleton => Singleton.instance;
ComplexSingleton get complexSingleton => ComplexSingleton._instance;

class Singleton {
  static final Singleton instance = Singleton._private();
  Singleton._private();
  factory Singleton() => instance;
}

class ComplexSingleton {
  static ComplexSingleton _instance;
  static ComplexSingleton get instance => _instance;
  static void init(arg) => _instance ??= ComplexSingleton._init(arg);

  final property;
  ComplexSingleton._init(this.property);
  factory ComplexSingleton() => _instance;
} 
```

如果您需要进行复杂的初始化，您只需在稍后在程序中使用实例之前执行此操作。

**例子**

```
void main() {
  print(identical(singleton, Singleton.instance));        // true
  print(identical(singleton, Singleton()));               // true
  print(complexSingleton == null);                        // true
  ComplexSingleton.init(0); 
  print(complexSingleton == null);                        // false
  print(identical(complexSingleton, ComplexSingleton())); // true
} 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2021-02-28T21:35:52.663

如果您碰巧使用 Flutter 和`provider`package 进行状态管理，那么创建和使用单例非常简单。

1.  创建实例

> ```
>  void main() {
>       runApp(
>         MultiProvider(
>           providers: [
>             ChangeNotifierProvider(create: (context) => SomeModel()),
>             Provider(create: (context) => SomeClassToBeUsedAsSingleton()),
>           ],
>           child: MyApp(),
>         ),
>       );
>     } 
> ```

2.  获取实例

> ```
> Widget build(BuildContext context) { 
>   var instance = Provider.of<SomeClassToBeUsedAsSingleton>(context); 
>   ... 
> ```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-12-13T16:33:25.140

由于我不太喜欢`new`在单例上使用关键字或其他构造函数（例如调用），因此我更喜欢使用静态 getter `inst`，例如：

```
// the singleton class
class Dao {
    // singleton boilerplate
        Dao._internal() {}
        static final Dao _singleton = new Dao._internal();
        static get inst => _singleton;

    // business logic
        void greet() => print("Hello from singleton");
} 
```

示例用法：

```
Dao.inst.greet();       // call a method

// Dao x = new Dao();   // compiler error: Method not found: 'Dao'

// verify that there only exists one and only one instance
assert(identical(Dao.inst, Dao.inst)); 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2018-10-13T08:31:58.680

这应该有效。

```
class GlobalStore {
    static GlobalStore _instance;
    static GlobalStore get instance {
       if(_instance == null)
           _instance = new GlobalStore()._();
       return _instance;
    }

    _(){

    }
    factory GlobalStore()=> instance;

} 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2021-07-28T14:40:37.207

** Dart Sound Null Safety 中的 Sigleton 范式**

> 此代码片段展示了如何在 dart 中实现单例 这通常用于我们每次都必须使用类的相同对象的情况，例如。在数据库事务中。

```
class MySingleton {
  static MySingleton? _instance;
  MySingleton._internal();
  factory MySingleton() {
    if (_instance == null) {
      _instance = MySingleton._internal();
    }
     return _instance!;
  }
} 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2019-05-09T21:56:41.647

你好，这样的事情怎么样？非常简单的实现，Injector 本身是单例的，并且还在其中添加了类。当然可以很容易地扩展。如果您正在寻找更复杂的东西，请检查这个包：[https ://pub.dartlang.org/packages/flutter_simple_dependency_injection](https://pub.dartlang.org/packages/flutter_simple_dependency_injection)

```
void main() {  
  Injector injector = Injector();
  injector.add(() => Person('Filip'));
  injector.add(() => City('New York'));

  Person person =  injector.get<Person>(); 
  City city =  injector.get<City>();

  print(person.name);
  print(city.name);
}

class Person {
  String name;

  Person(this.name);
}

class City {
  String name;

  City(this.name);
}

typedef T CreateInstanceFn<T>();

class Injector {
  static final Injector _singleton =  Injector._internal();
  final _factories = Map<String, dynamic>();

  factory Injector() {
    return _singleton;
  }

  Injector._internal();

  String _generateKey<T>(T type) {
    return '${type.toString()}_instance';
  }

  void add<T>(CreateInstanceFn<T> createInstance) {
    final typeKey = _generateKey(T);
    _factories[typeKey] = createInstance();
  }

  T get<T>() {
    final typeKey = _generateKey(T);
    T instance = _factories[typeKey];
    if (instance == null) {
      print('Cannot find instance for type $typeKey');
    }

    return instance;
  }
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-01-23T03:35:23.080

我在 dart 和之前的 Swift 上使用过这个简单的模式。我喜欢它简洁且只有一种使用方式。

```
class Singleton {
  static Singleton shared = Singleton._init();
  Singleton._init() {
    // init work here
  }

  void doSomething() {
  }
}

Singleton.shared.doSomething(); 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-02-02T19:38:28.020

这也是一种创建 Singleton 类的方法

```
class Singleton{
  Singleton._();
  static final Singleton db = Singleton._();
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-09-29T10:29:28.927

`Singleton`使用 null 安全运算符和工厂构造函数可以更好地创建对象。

```
class Singleton {
  static Singleton? _instance;

  Singleton._internal();

  factory Singleton() => _instance ??= Singleton._internal();

  void someMethod() {
    print("someMethod Called");
  }
} 
```

**用法：**

```
void main() {
  Singleton object = Singleton();
  object.someMethod(); /// Output: someMethod Called
} 
```

**注意：** `??`是一个 Null 感知运算符，如果左侧值为 null，则返回右侧值，这意味着在我们的示例`_instance ?? Singleton._internal();`中，`Singleton._internal()`将在第一次调用对象时返回，其余`_instance`将返回。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2021-07-13T13:45:13.090

You can just use the Constant constructors.

```
class Singleton {
  const Singleton(); //Constant constructor

  void hello() { print('Hello world'); }
} 
```

Example:

```
Singleton s = const Singleton();
s.hello(); //Hello world 
```

According with documentation:

> Constant constructors
> 
> If your class produces objects that never change, you can make these objects compile-time constants. To do this, define a const constructor and make sure that all instance variables are final.

# java - Jsoup 1.7.1 错误？

> ID：12649577
> 
> 赞同：2
> 
> 时间：2012-09-29T03:00:11.693
> 
> 标签：java, jsoup

执行以下代码：

`Jsoup.connect(baseURL + dataJSSrc).execute();`

抛出异常：

```
org.jsoup.UnsupportedMimeTypeException: Unhandled content type. Must be text/*, application/xml, or application/xhtml+xml. Mimetype=application/x-javascript, URL=http://www.abc.com/playdata/206/8910.js?44613.77 
```

但是当我使用

`URLConnection conn = new URL(baseURL + dataJSSrc).openConnection();`

没关系！

在下面的代码中

```
System.out.println(conn.getContentType()); // out put 'application/x-javascript' 
```

Jsoup只能用于下载HTML或XML吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T01:35:16.077

虽然我不同意 BalusC 的回答，但您可以使用 Jsoup 下载您喜欢的任何内容。默认情况下，如果 Jsoup 检索具有无法解析为 HTML 的 mime 类型的内容，Jsoup 将抛出异常，以避免解析例如图像。`connection.ignoreContentType(true)`但是，如果您只想获取字节或字符串，则可以禁用该测试：

```
String script = Jsoup.connect(jsUrl).ignoreContentType(true).execute().body(); 
```

或者

```
byte[] bytes = Jsoup.connect(imageUrl).ignoreContentType(true).execute().bodyAsBytes(); 
```

您将使用成熟的 HTTP 客户端获得更多控制权，但这种方法在紧要关头很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T11:36:46.517

Jsoup 被设计为 HTML/XML 解析器，而不是纯 HTTP 客户端。如果您需要下载一些非 HTML/XML 文件，请使用普通的 HTTP 客户端，而不是 HTML/XML 解析器。

使用正确的工具完成工作。

# ruby-on-rails - 如何让其他 Gem 助手进入我的 Engine Gem 测试？

> ID：12649582
> 
> 赞同：1
> 
> 时间：2012-09-29T03:01:05.777
> 
> 标签：ruby-on-rails, rspec, gem, helper, rails-engines

我正在尝试为我正在编写的引擎 gem 编写测试。我正在使用 Rspec，测试似乎运行良好。但是，每当视图使用来自另一个 gem 的助手时，例如“will_paginate”或“ransack”，我都会收到“未定义的方法”错误。

我尝试在我的 gem 的 Gemfile（除了 engine.gemspec 文件）以及虚拟应用程序的 Gemfile 中包含其他 gem，但我得到了同样的错误。我还尝试在 spec/spec_helper.rb 文件中包含 gem。

所以我已经尝试了这里提到的大部分内容：

[设置 RSpec 来测试 gem（不是 Rails）](https://stackoverflow.com/questions/4398262/setup-rspec-to-test-a-gem-not-rails)

通常，对于常规 Rails 应用程序的 Rspec 测试，这些帮助程序似乎只是包含一些方法，因为我在运行常规 Rails 应用程序的测试时没有这个问题。

我还需要在视图中命名我的 url 助手，例如：engine.resources_path

我不确定这是否是我搞砸了某些配置的症状。

当安装到另一个应用程序并在浏览器上查看时，引擎中的所有内容都运行良好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:02:34.540

事实证明，更好的方法是从 gem 中提取方法，因为 gem 无论如何都应该测试自己的方法。如果我有什么误解，请告诉我。谢谢！

# sql-server - SAN 上的数据共享卷（多个 MDF）和另一个日志共享卷（多个 LDF）

> ID：12649589
> 
> 赞同：2
> 
> 时间：2012-09-29T03:02:30.990
> 
> 标签：sql-server, database, sql-server-2008, san

我有 3 个 SQL Server 2008 实例，每个实例位于不同的机器上，每个实例上都有多个数据库。我的 SAN 上有 2 个单独的 LUN，用于 MDF 和 LDF 文件。NDX 和 TempDB 文件在每台机器的本地驱动器上运行。3 个实例可以为数据文件共享同一个卷，为日志文件共享另一个卷吗？

我在 SAN 上没有精简配置，所以我不想限制创建多个卷的磁盘空间，因为有人建议我应该为每个实例创建一个卷（驱动器号），如果不是为每个数据库创建一个卷（驱动器号）。我知道我至少应该拆分我的日志和数据文件。没有实例会共享实际的数据库文件，只是驱动器上的空间。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T14:52:10.767

答案当然是：“视情况而定”。但是，我可以尝试给您一些提示，说明它取决于什么。

SQL Server 实例“假定”它对其资源具有独占访问权。因此，默认情况下它会填满所有可用的 RAM，它将使用所有 CPU，并且会尝试使 I/O 通道饱和以获得最佳性能。这就是为什么一般建议不要让您的实例同时访问相同的磁盘。

另一件事是 SQL Server“知道”顺序 I/O 访问比随机 I/O 提供更高的吞吐量，因此有很多机制在起作用（如日志文件组织、预读、惰性写入器等）尽可能避免随机 I/O。

现在，如果三个 SQL Server 实例同时在单个卷上执行顺序 I/O 请求，那么从卷的角度来看，您将再次收到随机 I/O 请求，这会损害您的性能。

话虽如此，只有当您的 I/O 子系统是一个重大瓶颈时，它才是一个问题。如果您的日志文件卷足够快，以至于来自实例的混合顺序写入不会产生问题，那么请继续。如果您在实例上有足够的 RAM，大多数时候可以从缓冲区缓存中满足数据读取，那么您的 I/O 子系统不需要太多的读取性能。

在每种情况下，您应该避免在日志或数据文件上执行多个增长步骤。如果一个文件系统上的多个文件正在增长，您将获得碎片，并且碎片可以将顺序读取或写入请求甚至从单个源再次转换为随机 I/O。

如果您使用 SSD 作为磁盘，整个情况会再次发生变化。这些具有完全不同的要求和行为，但是由于您没有提及 SSD，我将假设您使用“常规”基于磁盘的阵列或 RAID 配置。

简短摘要：如果情况合适，您可能会侥幸成功，但是如果不从 SAN 和 SQL 的角度了解更多关于您的系统的信息，就很难进行评估。

# php - 警告：mysql_result() [function.mysql-result]：无法跳转到第 11 行 profile.php 中 MySQL 结果索引 5 的第 0 行

> ID：12649594
> 
> 赞同：1
> 
> 时间：2012-09-29T03:03:23.997
> 
> 标签：php, mysql

当我尝试访问`profile.php?u=destiny`

```
//$result = mysql_query('SELECT name FROM 
$imageresult = mysql_query("SELECT name FROM imagetable WHERE id = '$id'") or die(mysql_error());
$u = mysql_result($imageresult, 0 ,"name") or die(mysql_error());
//error_reporting(E_ALL);
if (isset($id) && (!isset($u))) {
} 
```

> 警告：mysql_result() [function.mysql-result]：无法跳转到第 11 行 profile.php 中 MySQL 结果索引 5 的第 0 行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T04:18:07.620

`$imageresult`此警告意味着var中没有行。检查一下，这应该工作：

```
$imageresult = mysql_query("SELECT name FROM imagetable WHERE id = '$id'") or die(mysql_error());
if (mysql_num_rows($imageresult) > 0) {
  $u = mysql_result($imageresult, 0 ,"name") or die(mysql_error());
  if (isset($id) && (!isset($u))) {
  }
} 
```

# sql-server - SQL Server 2012 查询不会另存为视图

> ID：12649596
> 
> 赞同：0
> 
> 时间：2012-09-29T03:03:51.160
> 
> 标签：sql-server, sql-view

我在 SQL Server 2012 中有以下完整的查询：

```
SELECT
    iif(((DATEPART(dw, MeasurementTime) + @@DATEFIRST) % 7) < 2,'Weekend','Weekday') AS PartOfWeek,
    Seasons.Label AS Season,
    CONVERT(TIME,MeasurementTime) AS TimeOfDay,
    FeederLoads.FeederNo AS FeederNo,
    Avg(FeederLoads.kVA) AS Mean,
    StDev(FeederLoads.kVA) AS StdDev
FROM
    FeederLoads INNER JOIN
    Seasons
    ON  Month(FeederLoads.MeasurementTime) = Seasons.Month1 OR 
        Month(FeederLoads.MeasurementTime) = Seasons.Month2 OR 
        Month(FeederLoads.MeasurementTime) = Seasons.Month3
GROUP BY
    ((DATEPART(dw, MeasurementTime) + @@DATEFIRST) % 7),
    Seasons.Label,
    CONVERT(TIME,MeasurementTime),
    FeederLoads.FeederNo; 
```

但是，当我将查询复制并粘贴到视图定义窗口的 SQL 窗格中时，视图无法保存。

我得到的错误信息是：

> 函数参数列表中的错误：“<”无法识别。无法解析查询文本。

任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T03:57:59.110

您似乎在查询设计器中运行该代码。不幸的是，并非所有设计者都是平等的——所以只需获取代码并在 SQL Server Management Studio 查询窗口中运行它。

[http://sqlfiddle.com/#!6/59d86/1/0](http://sqlfiddle.com/#!6/59d86/1/0)

这与必须在 SQL 视图中创建的一些非常复杂的 MS Access 查询没有什么不同。

# actionscript-3 - AS3 从 var 中删除扩展名

> ID：12649597
> 
> 赞同：0
> 
> 时间：2012-09-29T03:04:31.750
> 
> 标签：actionscript-3, flash

我相信这是一个简单的问题。如何删除 var 名称中的“.mp3”扩展名？

```
import flash.filesystem.File;
var desktop:File = File.applicationDirectory.resolvePath("Music");
var files:Array = desktop.getDirectoryListing();
for (var i:uint = 0; i < files.length; i++)
{

 var myVar = files[i].name;// gets file name. 
}

trace(myVar); // comes out "mySong.mp3" 
```

我应该使用拆分还是删除最后 3 个字符？最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T03:19:44.400

是的，我认为拆分效果最好。这样，无论您拉取什么类型的文件，您都可以使用相同的方法。

`var myVar = files[i].name.split('.')[0];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T03:17:21.837

有几种方法可以做到这一点。检查文档以获取更多信息

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String)

您可以将 split 与 indexOf 一起使用

```
//substr(startIndex:Number = 0, len:Number = 0x7fffffff):String
//use indexOf to get the index of the first .
//return from 0 to that index
var myVar:String = files[i].name.split(0, files[i].name.indexOf(".")); 
```

# php - 如何将两个 sql 查询合二为一？

> ID：12649599
> 
> 赞同：2
> 
> 时间：2012-09-29T03:05:06.997
> 
> 标签：php, mysql

> **可能重复：**
> [“INSERT IGNORE”与“INSERT ... ON DUPLICATE KEY UPDATE”](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)

你好人民

```
$sql1="SELECT * FROM `table` WHERE `user` = '$user'";
$res1=mysql_query($sql1);
if(!$res1||mysql_num_rows($res1)<1){
$sql2="INSERT INTO `table` (`user`) VALUES ('$user')";
$res2=mysql_query($sql2);
if(!$res2){echo 'Yes';}else{echo 'No';}
}
else{echo 'user already exists!';} 
```

可以将两个查询合二为一吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T03:11:24.297

使用此查询。

```
INSERT INTO USER SELECT * FROM TABLE WHERE user='$user' 
```

表和用户表中的列数`table`必须相同，它们的类型也必须相同。

你也可以使用

```
INSERT into user
SELECT * from table 
WHERE user='$user'
AND 
   NOT EXISTS (SELECT * FROM USER 
              WHERE USER = '$user') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T03:16:17.433

如果您将列设置`user`为**UNIQUE**，则​​每个用户最多有*一个*条目。`ALTER TABLE`制作`UNIQUE`专栏：

```
ALTER TABLE `table`
    ADD UNIQUE INDEX `user` (`user`); 
```

然后，像这样的单个查询会很好：

```
$res = mysql_query("INSERT IGNORE INTO `table`(`user`) VALUES( '".mysql_real_escape_string($user) . "')";
echo ( mysql_affected_rows() == 0 ) ? "No" : "Yes"; 
```

[mysql_affected_rows()](http://php.net/manual/en/function.mysql-affected-rows.php)。

# c++ - Qt - 开源/商业的静态构建

> ID：12649601
> 
> 赞同：0
> 
> 时间：2012-09-29T03:05:18.333
> 
> 标签：c++, qt

简单的问题，我想知道在 Qt 中为开源程序构建静态应用程序是否合法？我听说这违反了 Qt 规则。

另外，如果我想为商业做一个静态构建，它需要一个我必须购买的许可证文件。那么没有任何其他方法可以在没有任何问题或任何情况下进行静态构建吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T03:56:11.610

来自[qt-project.org](http://qt-project.org/)：

> Qt 可以在开源（LGPL v2.1）或商业条款下使用。

[您可以在 opensource.org](http://opensource.org/licenses/lgpl-2.1.php)找到 LGPL v2.1 ，或[在 Wikipedia](http://en.wikipedia.org/wiki/GNU_Lesser_General_Public_License)（以及许多其他地方）阅读有关它的信息。

除了与您签订合同的律师之外，没有人会给您实际的法律建议（如果有人这样做，您不应该接受）。

我认为可以公平地说大多数开发人员会同意：

*   LGPL 不允许静态链接，除非在 LGPL、GPL 或兼容的自由软件项目中。
*   如果您对其进行静态链接，这也可能使您的软件成为 LGPL。
*   这是 FSF 编写它的意图，大概也是大多数将它用作许可证的人的意图。
*   即使将 LGPL 代码静态链接到商业代码中并不违法，但也可能是不道德的。
*   即使您不关心合法性或道德，也可能导致严重的公关问题。

所以，我个人不会这样做。但这只是我，不是法律建议。

至于商业许可证，是的，你已经为此付出了代价。访问[商业 Qt 站点](http://qt.digia.com/en/)以了解更多信息。

# entity-framework - EF 5 Model First - 表名是复数形式

> ID：12649603
> 
> 赞同：0
> 
> 时间：2012-09-29T03:05:55.597
> 
> 标签：entity-framework

我正在使用使用 Visual Studio 2012 express 的 Entity Framewrok 5.0 Model First 方法。生成的数据库表是复数的。我该如何避免这种情况？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T03:15:14.597

在 Visual Studio 2012 Professional 中，您可以执行以下操作（我假设相同的设置适用于 express）：

工具菜单 -> 选项 -> 数据库工具 -> O/R 设计器 - 禁用名称的复数化

![在此处输入图像描述](../Images/a5f6209fd5c6303345ab0a5923912c09.png)

# scala - scala：如何在 specs2 中实现这个匹配器

> ID：12649609
> 
> 赞同：5
> 
> 时间：2012-09-29T03:07:24.010
> 
> 标签：scala, testing, specs2

我有以下方法：

```
def save(entity: A): Either[List[Error],A] + {.... 
```

我想使用 specs2 进行测试

当未指定必填字段时，我想测试是否存在特定错误，如下所示：

```
val noNickname = User(
  nickname = "",
  name = "new name",
)

noNickname.save must beLeft.like {
  case errors => {
    atLeastOnceWhen(errors) {
      case error => {
        error.errorCode must equalTo(Error.REQUIRED)
        error.field must equalTo("nickname")
      }
    }
  }
} 
```

它工作正常，但我想定义我自己的匹配器以使其不那么冗长，如下所示：

```
noNickname.save must haveError.like {
    case error => {
      error.errorCode must equalTo(Error.REQUIRED)
      error.field must equalTo("nickname")
    }
  }
} 
```

我查看了文档（http://etorreborre.github.com/specs2/guide/org.specs2.guide.Matchers.html#Matchers），但我不知道如何定义像 haveError 这样的自定义匹配器。喜欢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T10:17:13.973

在这里，您的代码进行了一些更改以使其编译：

```
case class Error(errorCode: String, field: String)
def save[A](entity: A): Either[List[Error],A] = Left(List(Error("REQUIRED", "nickname")))
case class User(nickname: String, name: String)

val noNickname = User(nickname = "", name = "new name")

"save noNickName" >> {
  save(noNickname) must haveError.like {
    case error => {
      error.errorCode must equalTo("REQUIRED")
      error.field must equalTo("nickname")
    }
  }
}

def haveError[T] = new ErrorMatcher[T]

class ErrorMatcher[T] extends Matcher[Either[List[T], _]] {
  def apply[S <: Either[List[T], _]](value: Expectable[S]) = 
    result(value.value.left.toOption.isDefined, 
      value.description + " is Left",
      value.description + " is not Left",
      value)

  def like[U](f: PartialFunction[T, MatchResult[U]]) = 
    this and partialMatcher(f)

  private def partialMatcher[U](f: PartialFunction[T, MatchResult[U]]) = 
    new Matcher[Either[List[T], _]] {

    def apply[S <: Either[List[T], _]](value: Expectable[S]) = {
      // get should always work here because it comes after the "and"
      val errors = value.value.left.toOption.get
      val res = atLeastOnceWhen[T, U](errors)(f)
      result(res.isSuccess,
        value.description+" is Left[T] and "+res.message,
        value.description+" is Left[T] but "+res.message,
        value)
    }
  }
} 
```

请注意，匹配器是在`Either[List[T], _]`任何地方定义的。

我还想知道如果您没有找到预期的错误消息返回的失败消息，当部分函数失败时它们可能不是很明确。

因此，您可能希望使用包含匹配器。像这样：

```
"save noNickName" >> {
  save(noNickname) must haveError.containing(Error("REQUIRED", "nickname"))
}

// I'm reusing the beLeft matcher here
def haveError[T]: Matcher[Either[List[T], _]] = beLeft

// and using an implicit conversion to extend it
implicit def toErrorListMatcher[T](m: Matcher[Either[List[T], _]]): ErrorListMatcher[T] =    
  new ErrorListMatcher[T](m)

class ErrorListMatcher[T](m: Matcher[Either[List[T], _]]) {
  def containing(t: T) =
    // the 'contain' matcher is adapted to take in an 
    // Either[List[T], _] and work on its left part
    m and contain(t) ^^ ((e: Either[List[T], _]) => e.left.toOption.get)
} 
```

*[更新]*

第一个解决方案（使用`atLeastOnceWhen`和部分函数）可以与第二个解决方案（使用隐式）和`beLike`匹配器组合，以获得现有 specs2 代码的最大可重用性：

```
def haveError[T]: Matcher[Either[List[T], _] = beLeft

implicit def toErrorListMatcher[T](m: Matcher[Either[List[T], _]]): ErrorListMatcher[T] = 
  new ErrorListMatcher[T](m)

class ErrorListMatcher[T](m: Matcher[Either[List[T], _]]) {
  // beLike checks one element
  // beLike.atLeastOnce transforms that matcher on a 
  // matcher on a sequence of elements
  def like[S](f: PartialFunction[T, MatchResult[S]]) = {
    m and beLike(f).atLeastOnce ^^ ((e: Either[List[T], _]) => e.left.toOption.get)
} 
```

# php - 网页图片点击调用另一个网页加载和从图片下拉

> ID：12649610
> 
> 赞同：-2
> 
> 时间：2012-09-29T03:07:24.650
> 
> 标签：php, javascript, html, css

我有一个网页，我试图弄清楚如何单击图像，然后从该图像单击网页将加载到它的位置，但也会向下扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:48:43.670

也许有办法做到这一点，我可能只使用一个包含 img 标签并将其隐藏的 div，或者使用 background-img 并将其更改为空。

IE

```
<html>
<head>
  <title>
    a page
  </title>
<script type="text/javascript">
var container,img;

function setup(){
  img = document.getElementById('img1');
  container = document.getElementById('container');
  container.onclick = function(){
    img.style.display = 'none';
    container.innerHTML = "HERE IS SOME OTHER CODE I 'INJECTED'\n\n <IMG src='http://26.media.tumblr.com/tumblr_lk0hdcDvTa1qjoblyo1_500.jpg'>\n HAHA ANOTHER PUG!" +
    "Bacon ipsum dolor sit amet salami spare ribs jerky tenderloin pastrami sirloin andouille ham hock. Corned beef tenderloin hamburger, pig sausage chicken andouille." +
    "Ham hock tenderloin tri-tip brisket flank strip steak hamburger bacon pork belly shank. Rump ball tip tail, filet mignon pancetta strip steak hamburger short ribs shankle" +
    "bresaola pork belly venison pork loin jowl. Ham hock kielbasa frankfurter, pancetta tenderloin shankle tail leberkas venison. Spare ribs brisket pastrami chicken bacon." +
    "Tongue tenderloin ball tip capicola. T-bone bacon venison, fatback leberkas ball tip andouille sausage pastrami tail pork chop pig. Ground round chuck t-bone," +
    " tenderloin pork belly shoulder sirloin ball tip pork chop frankfurter ham. Meatloaf ribeye jowl boudin. Shoulder tri-tip andouille filet mignon capicola." +
    " Pancetta rump pork chop venison sausage. Tenderloin t-bone boudin, swine pastrami ribeye fatback brisket sausage venison spare ribs short loin leberkas strip steak." +
    "Fatback pork chop jerky short ribs andouille bacon. Meatloaf frankfurter turducken, chuck capicola hamburger jowl sausage drumstick flank tenderloin venison shoulder" +
    " short loin ball tip. Bacon prosciutto sirloin t-bone boudin meatloaf. Pork chop swine tail shoulder short ribs pork belly shankle pork loin filet mignon short" +
    " loin sausage pastrami.";
  }
}
</script>
<style type="text/css">
#container{
  width: 400px;
  background-color: rgb(126,38,36);
}
</style>
</head>
<body onload="setup()">
<div id="container">
<img id="img1" src="http://27.media.tumblr.com/tumblr_lhq4onW6Vg1qbcihro1_500.jpg" />
</div>
</body>
​&lt;/html> 
```

您还可以使用 onclick 事件仅调整 div 的高度或宽度。

```
continater.style.height = 800px;
continater.style.width = 600px; 
```

感谢：baconipsum.com 和哈巴狗

# ios - 从 NSMutableArray 检索后 NSURL 不起作用

> ID：12649615
> 
> 赞同：0
> 
> 时间：2012-09-29T03:09:22.940
> 
> 标签：ios, xcode, nsmutablearray, nsurl, audio-recording

将录音文件地址存储在数组中并在以后使用时遇到问题。这就是我获取 URL 地址、将其转换为字符串并将其添加到数组中的方式。这似乎有效。

测试视图控制器.h

```
@interface record_audio_testViewController : UIViewController <AVAudioRecorderDelegate> {       
NSURL *audioFile;
AVAudioRecorder *recorder;
...
}
@property (nonatomic, retain) NSURL *audioFile; 
```

* * *

测试视图控制器.m

```
#import "record_audio_testViewController.h"
@implementation record_audio_testViewController
@synthesize audioFile

- (void)viewDidLoad {
NSMutableArray *urlArray = [[NSMutableArray alloc] init];
    audioFile = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent: [NSString stringWithFormat: @"%.0f.%@", [NSDate timeIntervalSinceReferenceDate] * 1000.0, @"caf"]]];
    //  convert NSURL to NSString
    NSString *fileLoc = [audioFile absoluteString];
    [urlArray addObject: fileLoc ];
    [[NSUserDefaults standardUserDefaults] setObject:urlArray forKey:@"urlArray"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    [urlArray release];
    //  Create an AVAudioSession object.
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error: &error];
    //Activate the session
    [audioSession setActive:YES error: &error];
} 
```

* * *

```
- (void)buttonClicked:(UIButton*)button {
    NSMutableArray *urlArray;
    urlArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"urlArray"];
    audioFile = [NSURL URLWithString: [urlArray objectAtIndex:btnN] ];
    //  at this point, the URL looks exactly as created
} 
```

* * *

```
- (IBAction)  rec_button_pressed {
    NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
    [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];        
    recorder = [[ AVAudioRecorder alloc] initWithURL: audioFile settings: recordSetting error:&error ]; //  this is where it CRASHES

    [recorder setDelegate:self];
    [recorder prepareToRecord];
    [recorder record];
} 
```

当我使用 NSLog 查看和比较这些地址时，它们看起来都一样。但是程序抛出异常：

```
 Thread 1: EXC_BAD_ACCESS (code=2 address=0x9) 
```

有谁知道如何度过这种情况？此外，是否有更简单和/或更安全的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:02:38.933

您显示的代码可能完全无关紧要，因为它不在此处引发异常。该异常可能是由于内存管理错误，并且可能与 NSURL 无关。你只是在猜测——你不应该这样。

您的代码中没有内存管理，并且由于您没有使用 ARC，这表明您没有意识到您的内存管理职责。我的书向你解释了它们，并解释了为什么你应该使用 ARC，如果可以的话：

[http://www.aeth.com/iOSBook/ch12.html](http://www.apeth.com/iOSBook/ch12.html)

另外，使用静态分析器；它会发现一些内存管理不善的危险迹象。

# android - 如何实现Android BroadcastReceiver

> ID：12649616
> 
> 赞同：2
> 
> 时间：2012-09-29T03:09:25.543
> 
> 标签：android, broadcastreceiver, android-activity, android-service

我创建了一个示例应用程序。在我的应用程序中，我有 4 个`Activity`和 1 个`BroadCastReciever`在后台运行。在这里我写了服务，目的是当用户解锁屏幕时，我运行我的应用程序。一切正常，除了这个：

当我运行我的应用程序时，我正在进行第三个活动。用户不再与屏幕交互，因此设备会自动锁定屏幕。现在我解锁屏幕意味着，应用程序从第一个活动开始运行。我需要从用户上次交互的活动中运行应用程序（例如，如果用户与第三个活动交互，我需要在屏幕解锁时显示第三个活动）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:21:46.453

没问题，使用 SharedPreferences 并存储一个 currentActivityName。当你通过 onCreate 或 onStart() 进入一个新的 Activity 时更新这个。即使应用程序关闭，该值也会保留。一旦您检测到您的入口点，您只需在应用返回后 startActivity(activityName) 即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:01:18.520

当您从一个活动移动到另一个活动并在 android 清单文件中添加 WAKE_LOCK 权限时，不要完成活动

# jquery - jQuery datetimepicker 分隔符 - setDate 总是设置今天的日期

> ID：12649619
> 
> 赞同：0
> 
> 时间：2012-09-29T03:09:46.340
> 
> 标签：jquery, jquery-ui, datetimepicker, jquery-ui-datepicker, separator

看看[这个 jQuery datetimepicker 示例](http://trentrichardson.com/examples/timepicker/#utility_examples)（转到示例选项卡，“实用程序”示例）。

如果您尝试在浏览器的控制台中运行以下命令：

```
$('#utility_example_1').datetimepicker('setDate', new Date(0)); 
```

您会看到日期设置为**今天**（时间设置正确）：

![在此处输入图像描述](../Images/db8c5dcc4ff337c5d97c82a11c3f7982.png)

实际上，如果将其设置为随机日期，则日期始终设置为今天。

我尝试对页面上的其他示例执行相同的操作，并且一切正常。我认为这`separator: ' @ '`是造成问题的原因。

那是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T03:28:25.287

看起来这个问题最近在[dev 分支](https://github.com/trentrichardson/jQuery-Timepicker-Addon/commit/b0b8458e5763b85d83958c5dffb4bf9e1148dfe2)中得到了解决。

我可以确认分支`jquery-ui-timepicker-addon.js`中的最新版本一切正常。`dev`

# c++ - 将二进制文件拆分为块c ++

> ID：12649620
> 
> 赞同：2
> 
> 时间：2012-09-29T03:10:01.333
> 
> 标签：c++, parsing, file-io

为了通过套接字发送，我一直在努力反对首先将文件分成块。我可以轻松地读取/写入文件，而无需将其拆分为块。下面的代码运行，工作，有点。它将写入一个文本文件并具有一个垃圾字符。如果这只是用于txt，没问题。Jpegs 不能处理上述垃圾。

已经做了几天，所以我已经完成了我的研究，是时候寻求一些帮助了。我确实想严格遵守二进制阅读器，因为这需要处理任何文件。

我已经看到了很多漂亮的例子。（没有一个对我有用 jpgs） 主要是一些类似于 while(file) 的东西......我订阅了，如果你知道大小，使用 for 循环，而不是 while 循环阵营。

感谢您的帮助！！

```
vector<char*> readFile(const char* fn){
    vector<char*> v;
    ifstream::pos_type size;
    char * memblock;
    ifstream file;
    file.open(fn,ios::in|ios::binary|ios::ate);
    if (file.is_open()) {
        size = fileS(fn);
        file.seekg (0, ios::beg);
        int bs = size/3; // arbitrary. Actual program will use the socket send size
        int ws = 0;
        int i = 0;
        for(i = 0; i < size; i+=bs){
            if(i+bs > size)
                ws = size%bs;
            else
                ws = bs;
            memblock = new char [ws];
            file.read (memblock, ws);
            v.push_back(memblock);
        }
    }
    else{
        exit(-4);
    }
    return v;
}

int main(int argc, char **argv) {
    vector<char*> v = readFile("foo.txt");
    ofstream myFile ("bar.txt", ios::out | ios::binary);
    for(vector<char*>::iterator it = v.begin(); it!=v.end(); ++it ){
        myFile.write(*it,strlen(*it));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T03:49:56.903

问题是您正在使用 strlen 来计算要写入的数组的大小。一个 0 是二进制的一部分，你不会写正确的大小。相反，使用一对 char*,int 其中 int 指定要写入的大小，您将是金色的。像：

```
#include <iostream>
#include <vector>
#include <fstream>
#include <stdlib.h>
#include <string.h>
using namespace std;

ifstream::pos_type fileS(const char* fn)
{
    ifstream file;
        file.open(fn,ios::in|ios::binary);
    file.seekg(0, ios::end);
    ifstream::pos_type ret= file.tellg();
    file.seekg(0,ios::beg);
    ret=ret-file.tellg();
    file.close();
    return ret;
}

vector< pair<char*,int> > readFile(const char* fn){
    vector< pair<char*,int> > v;
    ifstream::pos_type size;
    char * memblock;
    ifstream file;
    file.open(fn,ios::in|ios::binary|ios::ate);
    if (file.is_open()) {
    size = fileS(fn);
    file.seekg (0, ios::beg);
    int bs = size/3; // arbitrary. Actual program will use the socket send size
    int ws = 0;
    int i = 0;
    cout<<"size:"<<size<<" bs:"<<bs<<endl;
    for(i = 0; i < size; i+=bs){
        if(i+bs > size)
            ws = size%bs;
        else
            ws = bs;
        cout<<"read:"<<ws<<endl;
        memblock = new char [ws];
        file.read (memblock, ws);
        v.push_back(make_pair(memblock,ws));
    }
    }
    else{
    exit(-4);
    }
    return v;
}

int main(int argc, char **argv) {
    vector< pair<char*,int> > v = readFile("a.png");
    ofstream myFile ("out.png", ios::out | ios::binary);
    for(vector< pair<char*,int> >::iterator it = v.begin(); it!=v.end(); ++it ){
    pair<char*,int> p=*it;
    myFile.write(p.first,p.second);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T03:36:20.150

```
 myFile.write(*it,strlen(*it)); 
```

在二进制数据上使用字符串长度。我怀疑那是你的罪魁祸首。如果不是，那肯定是[代码气味](http://en.wikipedia.org/wiki/Code_smell)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T03:37:03.290

你不应该这样做：

```
 myFile.write(*it,strlen(*it)); 
```

关于二进制数据。`strlen`计数字节，直到它遇到一个包含 0 的字节（`NUL`正如我们喜欢说的，但它是一个诚实的 0）。如果你读了足够多的二进制数据，你会碰到一个 NUL，你会得到一个简短的计数。但实际上情况可能更糟，因为您没有将 NUL 存储在任何地方以供 strlen 查找。您只是指望在您获取的数据块末尾之外有一个可以将文件读入。

所以不要那样做。记住每个块中的字节数（您可以使用向量>，但还有更多类似 C++ 的可能性）并使用它来写入数据。

# magento - 数据库中的 Magento 优惠券实体

> ID：12649625
> 
> 赞同：3
> 
> 时间：2012-09-29T03:11:04.493
> 
> 标签：magento, magento-1.7, coupon

我正在尝试开发一个涉及使用优惠券的 Magento 插件。显然，环顾四周后，我发现了一个提到使用“销售规则”表来获取优惠券的来源。但是，当我查看我的数据库时，我找不到它。但是，我确实找到了 3 个提到“优惠券”的表，分别称为“coupon_aggregated”、“coupon_aggregated_order”和“coupon_aggregated_updated”。

我只是想知道这 3 个表之间有什么区别，以便我可以开始使用它们？我正在使用最新版本的 Magento。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T03:36:31.147

您要查找的表确实已命名

```
salesrule 
```

还有一个名为 的表`salesrule_coupon`，其中包含链接回主`salesrule`定义的特定优惠券代码。

如果您的数据库缺少此表，则说明您的系统出现了问题。去

```
Promotions -> Shopping Cart Price Rules 
```

并创建一个具有不同标题的新优惠券代码。然后转储您的数据库内容并搜索您的不同标题的文本。这将使您知道您的系统将销售规则存储在哪个表中。

您上面提到的表格是仅用于报告的汇总数据表。

# delphi - 在 Delphi 中使用 OPOS

> ID：12649626
> 
> 赞同：-1
> 
> 时间：2012-09-29T03:11:08.320
> 
> 标签：delphi, opos

当我使用 OPOS 使用 TOPOSPOSPrinter.open 时，出现“不支持接口”错误消息

我尝试使用打印机 IBM4610，但是当我使用驱动程序 OPUS 时会出现此问题。

代码编译。

代码

```
function TCustomizedTenderPlugin.HandleEvent: WordBool;
var

  ret:Integer;

  mic : Pointer;

  {pruebas con opos}
  PosPrinter: TOPOSPOSPrinter;

begin
  {CREDENCIALES DE LA IMPRESORA . MODIFICAR DEPENDIENDO DEL TIPO}
   CargarIni(puerto);    

      try
         {Conexion con impresora}
         PosPrinter:= TOPOSPOSPrinter.Create(nil);
         PosPrinter.Open('4610_IBM',ret); // AQUI DA ERROR
         ShowMessage(VarToStr(ret));
         PosPrinter.Close(ret);
         ShowMessage(VarToStr(ret));
      Except
        // mensaje de error del 

        // me da Interface not supported
      end;

end; 
```

请我需要帮助。

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:44:45.640

你确定你安装的是32位驱动？

如果你这样做了，从 Ide 重新导入 Com 接口。

您安装的驱动程序与您的 tlb.pas 生成的包装器不匹配。

# c# - 未实现接口成员错误

> ID：12649632
> 
> 赞同：3
> 
> 时间：2012-09-29T03:12:04.837
> 
> 标签：c#, api, interface, implementation

这是我的代码，VS2012 C# Express 抱怨接口 PISDK._DEventPipeEvents 中的两个成员没有实现，这里快速粘贴：

```
 namespace PISDK
{
    [Guid("9E679FD2-DE8C-11D3-853F-00C04F45D1DA")]
    [InterfaceType(2)]
    [TypeLibType(4096)]
    public interface _DEventPipeEvents
    {
        [DispId(2)]
        void OnNewValue();
        [DispId(1)]
        void OnOverflow(object vtEvent, OverflowCauseConstants Cause);
    }
} 
```

这是我的代码：

```
class PointListEventPipeEventReceiver : PISDK._DEventPipeEvents
{
    private PISDK.EventPipe eventPipe;

    public PointListEventPipeEventReceiver(PISDK.EventPipe eventPipe)
    {
        this.eventPipe = eventPipe;
    }

    public void PISDK._DEventPipeEvents.OnNewValue()
    {
        Console.WriteLine("New value event");
        handleNewValue(eventPipe);
    }

    public void PISDK._DEventPipeEvents.OnOverFlow(object vtEvent, PISDK.OverflowCauseConstants Cause)
    {
        throw new NotImplementedException();
    }

    private void handleNewValue(PISDK.EventPipe eventPipe)
    {
        Console.WriteLine("Handling new value");
        Array eventObjs = eventPipe.TakeAll();
        Console.WriteLine("eventObjs.Length==" + eventObjs.Length);
        foreach (PISDK.PIEventObject piEventObj in eventObjs)
        {
            Console.WriteLine(piEventObj.EventData as PISDK.PointValue);
        }
    }
} 
```

我在这里不知所措，任何帮助都很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T03:16:31.663

您的实现在接口中使用`OnOverFlow`大写`F`字母而不是小写字母。应该调用该方法`OnOverflow`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T05:55:17.757

除了在“溢出”中出现错误之外，看起来您正在尝试将`public`访问修饰符应用于显式接口成员实现。您可以将成员隐式实现为公共成员，也可以显式实现，但不能同时实现。

隐式实现：

```
public void OnOverflow(object vtEvent, PISDK.OverflowCauseConstants Cause) 
{ 
    throw new NotImplementedException(); 
} 
```

显式实现：

```
void PISDK._DEventPipeEvents.OnOverflow(object vtEvent, PISDK.OverflowCauseConstants Cause) 
{ 
    throw new NotImplementedException(); 
} 
```

# ftp - 排序 IMDB FTP 数据标题类型

> ID：12649636
> 
> 赞同：1
> 
> 时间：2012-09-29T03:13:04.347
> 
> 标签：ftp, text-extraction, imdb

我正在尝试使用他们为使用 IMDB ftp 数据工作的电影构建一个连接演员的图表。

但是我只想使用电影（标题类型： - 故事片）作为连接。我从 IMDB 下载了 ftp 数据。但是我无法从文件中提取标题类型。我想知道是否有任何机构尝试根据标题类型对 IMDB 提供的 ftp 数据进行排序，以及它们是如何区分的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T23:43:38.487

标题**本身**会告诉你你正在处理什么样的节目。

*   如果它以“ **(TV)** ”结尾，则它是一部*电视电影*（单集，为电视制作）。
*   如果它以“ **(V)** ”结尾，则它是*视频电影*（直接到视频）。
*   如果它**被引号包围**并以“ **（mini）** ”结尾，则它是一部*迷你电视连续剧*。（注意：我认为纯文本数据文件中不再存在此类别）。
*   如果只**用引号括起来**，那就是*电视剧*。
*   如果标题**用引号括起来并以****花括号**括起来的另一个标题结尾，则它*是电视（迷你或非迷你）系列的一集*（括号内是剧集的标题 - 如果已知 - 或 #seasonNR.episodeNR 或播出日期）。
*   别的，都是**电影**。

一个特例是标有**{{SUSPENDED}}**的电视剧集，这意味着该集从未制作过，但它是计划好的，也许将来会完成。

请注意，这些规则仅适用于您可以从 FTP 服务器下载的纯文本数据文件。多年来，在网站上遵循不同的规则。

[作为IMDbPY](http://imdbpy.sf.net/)的主要作者，我对该主题进行了大量研究（顺便说一下：看看，因为将这些信息导入 SQL 数据库可能对您有用）。

# python - 尝试特定罐装 ACL 时出错

> ID：12649637
> 
> 赞同：0
> 
> 时间：2012-09-29T03:13:37.360
> 
> 标签：python, django, amazon-s3, boto

我正在尝试使用 boto api 将照片上传到 Amazon S3。如果我没有指定 Canned ACL，我可以在那里成功上传照片。

但是，如果我指定 ACL 如下。我收到以下错误。

```
mp = self._bucket.initiate_multipart_upload(name)
pool = Pool(processes=self.NUM_PARALLEL_PROCESSES)
pool.apply_async(mp.upload_part_from_file(fp=buffer, part_num=counter, headers=headers, policy='public-read')) 
```

错误如下。

```
<Error><Code>InvalidArgument</Code><Message>The specified header is not valid in this context</Message><ArgumentValue>public-read</ArgumentValue><ArgumentName>x-amz-acl</ArgumentName><RequestId>xxx</RequestId><HostId>xxx</HostId></Error> 
```

我尝试了很长时间，但仍然无法得到任何提示。有谁知道为什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:43:07.680

该`upload_part_from_file`方法不应具有策略参数。这是boto中的一个错误。要将策略分配给多部分文件，请`policy`在调用中指定标准策略作为参数`initiate_multipart_upload`，然后上传部分并完成上传。上传各个部分时不要尝试通过策略。我们应该在 github 上创建一个 issue 让 boto 删除策略参数。这很混乱，而且不起作用。

# extjs - ExtJS 图像未正确显示

> ID：12649640
> 
> 赞同：0
> 
> 时间：2012-09-29T03:15:06.527
> 
> 标签：extjs, extjs4, extjs4.1

有没有办法找出与示例相关的图像列表？当我双击一些示例时，图像变得完美，但是在我的项目中实现它时，我遇到了很多图像问题。例如，在网格单元格编辑示例演示中，当我在我的项目中实现它时，不会显示升序排序、降序排序和列图像。我尝试在 Chrome 和 FIrefox 中运行它，但也没有收到任何丢失的图像错误/异常/警告。

请让我知道这件事。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:27:29.920

如果您只需要几个图像，您可以右键单击工作示例中的图像，然后单击“检查元素”。对于网格单元格编辑演示，图像是“/resources/themes/images/default/grid/sort_asc.gif”、“/resources/themes/images/default/grid/sort_desc.gif”和“/resources/主题/图像/默认/网格/grid3-hd-btn.gif'。它们在 ext-all.css 文件中被引用，因此如果您的版本中缺少图像并且您没有看到任何控制台错误，则您的 css 文件版本可能不会引用这些背景图像。

# r - 计算 R 中的时间差

> ID：12649641
> 
> 赞同：26
> 
> 时间：2012-09-29T03:15:13.800
> 
> 标签：r, datetime

我有超过 300 万条记录的数据，其中 start.time 和 end.time 作为两个变量。前 10 个 obs 如下：

```
 start.date start.time   end.date end.time
1  2012-07-13   15:01:32 2012-07-13 15:02:42
2  2012-07-05   18:26:31 2012-07-05 18:27:19
3  2012-07-14   20:23:21 2012-07-14 20:24:11
4  2012-07-29   16:09:54 2012-07-29 16:10:48
5  2012-07-21   14:58:32 2012-07-21 15:00:17
6  2012-07-04   15:36:31 2012-07-04 15:37:11
7  2012-07-22   18:28:31 2012-07-22 18:28:50
8  2012-07-09   21:08:42 2012-07-09 21:09:02
9  2012-07-05   09:44:52 2012-07-05 09:45:05
10 2012-07-02   18:50:47 2012-07-02 18:51:38 
```

我需要计算 start.time 和 end.time 之间的差异。

我使用了以下代码：

```
mbehave11$diff.time <- difftime(mbehave11$end.time, mbehave11$start.time, units="secs") 
```

但我收到此错误：

```
Error in as.POSIXlt.character(x, tz, ...) : 
  character string is not in a standard unambiguous format
In addition: Warning messages:
1: In is.na.POSIXlt(strptime(xx, f <- "%Y-%m-%d %H:%M:%OS", tz = tz)) :
  Reached total allocation of 1535Mb: see help(memory.size) 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-29T03:37:54.553

您*必须先将*字符串转换为日期对象，然后才能进行日期/时间运算。尝试这个：

a) 读取您的数据：

```
R> dat <- read.table(textConnection("start.date start.time end.date end.time
2012-07-13   15:01:32 2012-07-13 15:02:42
2012-07-05   18:26:31 2012-07-05 18:27:19 
2012-07-14   20:23:21 2012-07-14 20:24:11"), header=TRUE) 
```

b) 处理一项观察：

```
 R>  strptime( paste(dat[,1], dat[,2]), "%Y-%m-%d %H:%M:%S")
 [1] "2012-07-13 15:01:32" "2012-07-05 18:26:31" "2012-07-14 20:23:21" 
```

c) 在集合上工作，转换为数字：

```
 R> as.numeric(difftime(strptime(paste(dat[,1],dat[,2]),"%Y-%m-%d %H:%M:%S"),
                        strptime(paste(dat[,3],dat[,4]),"%Y-%m-%d %H:%M:%S"))) 
 [1] -70 -48 -50
 R> 
```

*七年后由下面的其他人*编辑。**

 *d) 只是为了解释`-70 -48 -50`上面的结果，请逐行查看示例：

```
[2012-07-13 15:01:32] - [2012-07-13 15:02:42] = -70 seconds,  
[2012-07-05 18:26:31] - [2012-07-05 18:27:19] = -48 seconds,  
[2012-07-14 20:23:21] - [2012-07-14 20:24:11] = -50 seconds 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-10T08:37:36.340

我认为您可以使用 lubridate 包
，它有一个名为 ymd_hms 的方法，
您可以使用它从字符串中获取时间：对于大型数据集，它要快得多

```
library(lubridate)
dat <- read.table(textConnection("start.date start.time end.date end.time
2012-07-13   15:01:32 2012-07-13 15:02:42
2012-07-05   18:26:31 2012-07-05 18:27:19 
2012-07-14   20:23:21 2012-07-14 20:24:11"), header=TRUE)
starttime = ymd_hms(paste(dat[,1], dat[,2]))
endtime = ymd_hms(paste(dat[,3], dat[,4]))
interval = difftime(endtime,starttime,units = "secs") 
```

或者你可以只做一行，但大数据集需要更长的时间：

```
difftime(paste(dat[,3], dat[,4]),paste(dat[,1], dat[,2]),units = "secs") 
```*

# php - PHP比较二维数组

> ID：12649648
> 
> 赞同：6
> 
> 时间：2012-09-29T03:17:07.960
> 
> 标签：php, multidimensional-array

我一直在用这个来绞尽脑汁。

我有两个数组：

数组 1 从 CSV 文件中提取。

```
大批
(
    [0] => 数组
        (
            [uid] => cgajate
            [日期] => 20120918
        )

    [1] => 数组
        (
            [uid] => badrock5
            [日期] => 20120920
        )

    [2] => 数组
        (
            [uid] => ricoetc
            [日期] => 20120921
        )

    [3] => 数组
        (
            [uid] => ricoetc1
            [日期] => 20120923
        )

    [4] => 数组
        (
            [uid] => darbyfired
            [日期] => 20120922
        )

    [5] => 数组
        (
            [uid] => sagers.andrew
            [日期] => 20120922
        )

    [6] => 数组
        (
            [uid] => frankfurt9
            [日期] => 20120923
        )

    [7] => 数组
        (
            [uid] => 沙滩男孩
            [日期] => 20120923
        )

    [8] => 数组
        (
            [uid] => 惹火
            [日期] => 20120923
        )

    [9] => 数组
        (
            [uid] => kingsxrules
            [日期] => 20120923
        )

    [10] => 数组
        (
            [uid] => 理查德.bitto
            [日期] => 20120924
        )

    [11] => 数组
        (
            [uid] => christopher.boss
            [日期] => 20120925
        )

    [12] => 数组
        (
            [uid] => eric.robinson2
            [日期] => 20120926
        )

)

```

数组 2 从 SQL 数据库中提取。

```
大批
(
    [0] => 数组
        (
            [uid] => cgajate
            [日期] => 20120919
        )

    [1] => 数组
        (
            [uid] => ricoetc
            [日期] => 20120921
        )

    [2] => 数组
        (
            [uid] => ricoetc1
            [日期] => 20120922
        )

    [3] => 数组
        (
            [uid] => frankfurt9
            [日期] => 20120923
        )

    [4] => 数组
        (
            [uid] => 沙滩男孩
            [日期] => 20120923
        )

    [5] => 数组
        (
            [uid] => 惹火
            [日期] => 20120923
        )

    [6] => 数组
        (
            [uid] => kingsxrules
            [日期] => 20120923
        )

    [7] => 数组
        (
            [uid] => eric.robinson2
            [日期] => 20120926
        )

)

```

我基本上要做的是检查是否有任何 UID 匹配。如果有匹配项，它将检查哪个日期比另一个日期更新（所以本质上是哪个日期大于）。然后它将它们添加到一个数组中，其中 UID 与两个数组中的数据都不匹配。

对不起，如果很难理解。有点难以解释。

任何和所有的帮助表示赞赏，在此先感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T03:21:52.090

由于 PHP 数组本身就是哈希映射，因此您可以遍历一个数组并将每个日期插入到一个新数组中，并以 UID 为键：

```
$out = array();
foreach ($first_array as $x) {
    $out[$x['uid']] = $x['date'];
} 
```

然后，您可以遍历第二个数组，检查是否有任何 UID 已作为`$out`数组中的键存在。如果 UID 已经存在，那么您可以比较日期并获取您喜欢的任何数据。例如，类似：

```
foreach ($second_array as $y) {
    if (array_key_exists($y['uid'], $out)) {
        if ($out[$y['uid']] < $y['date']) {
            $out[$y['uid']] = $y['date'];
        }
    } else {
        $out[$y['uid']] = $date;
    }
} 
```

然后，将数据展平：

```
$_out = array();
foreach ($out as $uid => $date) {
    $_out[] = array("uid" => $uid, "date" => $date);
}
$out = $_out; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:31:26.523

这有点乱，但它有效。

```
<?php

$arr1 = array(
    array("uid" => "cgajate", "date" => 20120918),
    array("uid" => "badrock5", "date" => 20120920),
    array("uid" => "ricoetc", "date" => 20120921),
    array("uid" => "ricoetc1", "date" => 20120923),
    array("uid" => "darbyfired", "date" => 20120922),
    array("uid" => "sagers.andrew", "date" => 20120922),
    array("uid" => "frankfurt9", "date" => 20120923),
    array("uid" => "beachboys", "date" => 20120923),
    array("uid" => "panterafan", "date" => 20120923),
    array("uid" => "kingsxrules", "date" => 20120923),
    array("uid" => "richard.bitto", "date" => 20120924),
    array("uid" => "christopher.boss", "date" => 20120925),
    array("uid" => "eric.robinson2", "date" => 20120926));

$arr2 = Array(
    array("uid" => "cgajate", "date" => 20120919),
    array("uid" => "ricoetc", "date" => 20120921),
    array("uid" => "ricoetc1", "date" => 20120922),
    array("uid" => "frankfurt9", "date" => 20120923),
    array("uid" => "beachboys", "date" => 20120923),
    array("uid" => "panterafan", "date" => 20120923),
    array("uid" => "kingsxrules", "date" => 20120923),
    array("uid" => "eric.robinson2", "date" => 20120926));

function flatten ($arr) {
    $new_arr = array ();
    foreach ($arr as $sub_arr) {
        $new_arr[$sub_arr["uid"]] = $sub_arr["date"];
    } 
    return $new_arr;
}

$flat_arr1 = flatten ($arr1);
$flat_arr2 = flatten ($arr2);
$arr3 = array ();

foreach ($flat_arr1 as $key=>$value) {
    if (isset ($flat_arr2[$key])) {
        $value = $flat_arr1[$key] > $flat_arr2[$key] ? $flat_arr1[$key] : $flat_arr2[$key];
    }
    $arr3[$key] = $value;
}

foreach ($flat_arr2 as $key=>$value) {
    if (isset ($flat_arr1[$key])) {
        $value = $flat_arr1[$key] > $flat_arr2[$key] ? $flat_arr1[$key] : $flat_arr2[$key];
    }
    $arr3[$key] = $value;
}

?> 

<pre><?php print_r($flat_arr1); ?></pre>

<pre><?php print_r($flat_arr2); ?></pre>

<pre><?php print_r($arr3); ?></pre> 
```

# haskell - GHC 阶段限制（模板 Haskell）

> ID：12649650
> 
> 赞同：4
> 
> 时间：2012-09-29T03:18:24.973
> 
> 标签：haskell, ghc, template-haskell

我无法弄清楚为什么我在以下代码中得到“GHC 阶段限制”：

```
import Language.Haskell.TH

rules :: [ExpQ]
rules = [ [| \a -> a |], [| \_ -> 1 |] ]

findTransforms :: Int -> [ExpQ] -> Bool
findTransforms _ [] = False
findTransforms e (r:rs) = if ($r e) == 1 then True else findTransforms e rs 
```

（如果代码没有提供任何有用的东西，请不要担心——为了清楚起见，它被提取的最小示例被混淆了）。

我不会从拼接代码中调用任何函数。为什么是阶段限制？

EDIT1：编辑以提供更简单的代码示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:36:07.957

这失败的原因与您无法编写的原因相同

```
 eval :: ExpQ -> Int
 eval expr = $expr 
```

因为它需要在运行时编译。

一种解决方案是通过返回嵌套表达式的表达式而不是所述表达式的值来实现`findTransforms`编译时。`if`

```
findTransforms :: Int -> [ExpQ] -> ExpQ
findTransforms _ []     = [| False |]
findTransforms e (r:rs) = [| if $r e == 1 then True else $(findTransforms e rs) |] 
```

当然，这意味着你必须在你想使用它的时候拼接它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:41:56.173

我不是模板 Haskell 方面的专家，但在我看来`r`( `$r`) 的拼接必须在编译时发生，因此`r`必须在编译时知道，但`r`它是`findTransforms`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T08:04:44.077

阶段限制意味着您不能在定义模板的同一模块中使用模板 haskell。如果你把它放在一个模块中并从另一个模块调用它，你应该没问题。

Dave4420 是正确的，这是关于编译的；您的模板 haskell 必须在使用之前进行编译，因此必须在导入的模块中定义。（这意味着 ghc 在编译模块时不需要额外的传递。）

# image-processing - 手写识别训练集图像的最合适尺寸是多少

> ID：12649652
> 
> 赞同：1
> 
> 时间：2012-09-29T03:18:33.607
> 
> 标签：image-processing, neural-network, image-recognition, training-data

我正在使用神经网络（前馈反向传播方法）开发离线手写识别应用程序。我对孤立字符的训练集图像的标准化大小感到困惑。目前我正在考虑 32*32 像素。可以请帮我解决这个问题，是否有任何具体的考虑。谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:36:29.497

最受欢迎的数据集之一是[MNIST 手写数字](http://yann.lecun.com/exdb/mnist/index.html)集，其中包含手写数字。这是[Matlab](http://www.cs.nyu.edu/~roweis/data.html)的一个版本，[Sci-kit](http://scikit-learn.org/stable/index.html)有一个[python 机器学习演示](http://scikit-learn.org/stable/auto_examples/plot_digits_classification.html)。

您会发现大量使用它作为基准的科学论文。

# xcode - 核心数据：我应该在“价值转换器名称”中输入什么

> ID：12649653
> 
> 赞同：7
> 
> 时间：2012-09-29T03:18:56.943
> 
> 标签：xcode, core-data

我想将 UIImage 存储在核心数据中并使用默认值转换器。苹果文档说：

> 如果您在 Xcode 中使用模型编辑器，请在属性的 Type 弹出窗口中选择 Transformable，然后在 Value Transformer Name 文本字段中输入名称。

准确输入什么名称？

![在此处输入图像描述](../Images/21972c7a1cf425432256d007dee7874d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T04:07:10.643

我将向您推荐以前的答案。看评论来！ [https://stackoverflow.com/a/3909082](https://stackoverflow.com/a/3909082)

如您所见，如果您的目标是 iOS 5+，您应该能够将其标记为可转换并且很好。否则，您将不得不实现 NSValueTransformer 的子类，并传入该类的名称。

# visual-studio-2010 - C# Assembly.LoadFrom 抛出 BadImageFormatException

> ID：12649654
> 
> 赞同：0
> 
> 时间：2012-09-29T03:19:15.527
> 
> 标签：visual-studio-2010, c#-4.0, visual-c++, clr, badimageformatexception

在其中一个项目中，我正在使用该`Assembly.LoadFrom`函数将 .net DLL 中的代码动态加载到完全受信任的程序集中。到目前为止，这一直是 100% 没有问题的。

我现在有一个用 /clr:pure 编译的 Visual C++ DLL，需要使用上面的`Assembly.LoadFrom`. 当我这样做时，我得到了 BadImageFormatException，这真的很奇怪。

在 Visual C++ 项目中有 3 种类型的 CLR 编译选项：

/clr

/clr：纯

/clr:安全

根据给我的说明，它需要在 /clr:pure 下编译。我的问题是使用 /clr:pure 抛出异常。如果我将其更改为 /clr 它也会引发异常。如果我将其更改为 /clr:safe 它会加载而不会引发异常（这是我的测试结束的地方）。

所以我想这真的是一个两部分的问题：

1) 为什么 /clr:safe 可以工作，而其他两个不行？

2) 如何让它与 /clr 一起工作？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:17:04.073

经过研究，这种方法不能加载混合程序集。它们只能是纯 MSIL。

# django - 如何将 Django 模型字段的默认值设置为函数调用/可调用（例如，相对于模型对象创建时间的日期）

> ID：12649659
> 
> 赞同：123
> 
> 时间：2012-09-29T03:20:08.150
> 
> 标签：django, django-models, parameters, lambda, default

**编辑：**

如何将 Django 字段的默认值设置为每次创建新模型对象时都会评估的函数？

我想做类似以下的事情，除了在这段代码中，代码被评估一次并将默认设置为每个创建的模型对象的相同日期，而不是在每次创建模型对象时评估代码：

```
from datetime import datetime, timedelta
class MyModel(models.Model):
  # default to 1 day from now
  my_date = models.DateTimeField(default=datetime.now() + timedelta(days=1)) 
```

**原来的：**

我想为函数参数创建一个默认值，以便它是动态的，并且在每次调用函数时都被调用和设置。我怎样才能做到这一点？例如，

```
from datetime import datetime
def mydate(date=datetime.now()):
  print date

mydate() 
mydate() # prints the same thing as the previous call; but I want it to be a newer value 
```

具体来说，我想在 Django 中进行，例如，

```
from datetime import datetime, timedelta
class MyModel(models.Model):
  # default to 1 day from now
  my_date = models.DateTimeField(default=datetime.now() + timedelta(days=1)) 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-09-29T17:46:34.823

这个问题被误导了。在 Django 中创建模型字段时，您没有定义函数，因此函数默认值无关紧要：

```
from datetime import datetime, timedelta
class MyModel(models.Model):
  # default to 1 day from now
  my_date = models.DateTimeField(default=datetime.now() + timedelta(days=1)) 
```

最后一行没有定义函数；它正在调用一个函数来在类中创建一个字段。

在这种情况下`datetime.now() + timedelta(days=1)`将被评估一次，并存储为默认值。

**预Django 1.7**

Django [让您将可调用对象作为默认值传递][1]，它每次都会调用它，就像您想要的那样：

```
from datetime import datetime, timedelta
class MyModel(models.Model):
  # default to 1 day from now
  my_date = models.DateTimeField(default=lambda: datetime.now() + timedelta(days=1)) 
```

**姜戈 1.7+**

请注意，从 Django 1.7 开始，不建议使用 lambda 作为默认值（参见 @stvnw 评论）。正确的方法是在字段**之前**声明一个函数，并将其用作名为 arg 的 default_value 中的可调用对象：

```
from datetime import datetime, timedelta

# default to 1 day from now
def get_default_my_date():
  return datetime.now() + timedelta(days=1)

class MyModel(models.Model):
  my_date = models.DateTimeField(default=get_default_my_date) 
```

以下@simanas 答案中的更多信息 [1]：[https ://docs.djangoproject.com/en/dev/ref/models/fields/#default](https://docs.djangoproject.com/en/dev/ref/models/fields/#default)

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2013-03-08T08:19:15.310

这样做`default=datetime.now()+timedelta(days=1)`是绝对错误的！

当您启动 django 实例时，它会被评估。如果您在 apache 下，它可能会起作用，因为在某些配置中，apache 会在每个请求上撤销您的 django 应用程序，但是您仍然可以在某天查看您的代码并试图找出为什么计算结果不符合您的预期.

这样做的正确方法是将可调用对象传递给默认参数。它可以是 datetime.today 函数或您的自定义函数。然后，每次您请求新的默认值时都会对其进行评估。

```
def get_deadline():
    return datetime.today() + timedelta(days=20)

class Bill(models.Model):
    name = models.CharField(max_length=50)
    customer = models.ForeignKey(User, related_name='bills')
    date = models.DateField(default=datetime.today)
    deadline = models.DateField(default=get_deadline) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-29T07:06:18.040

以下两个 DateTimeField 构造函数之间有一个重要区别：

```
my_date = models.DateTimeField(auto_now=True)
my_date = models.DateTimeField(auto_now_add=True) 
```

如果`auto_now_add=True`在构造函数中使用，则 my_date 引用的日期时间是“不可变的”（仅在将行插入表时设置一次）。

但是，使用`auto_now=True`时，每次保存对象时都会更新日期时间值。

这对我来说绝对是一个问题。作为参考，文档在这里：

[https://docs.djangoproject.com/en/dev/ref/models/fields/#datetimefield](https://docs.djangoproject.com/en/dev/ref/models/fields/#datetimefield)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-29T05:16:25.720

有时您可能需要在创建新用户模型后访问模型数据。

以下是我使用用户名的前 4 个字符为每个新用户配置文件生成令牌的方法：

```
from django.dispatch import receiver
class Profile(models.Model):
    auth_token = models.CharField(max_length=13, default=None, null=True, blank=True)

@receiver(post_save, sender=User) # this is called after a User model is saved.
def create_user_profile(sender, instance, created, **kwargs):
    if created: # only run the following if the profile is new
        new_profile = Profile.objects.create(user=instance)
        new_profile.create_auth_token()
        new_profile.save()

def create_auth_token(self):
    import random, string
    auth = self.user.username[:4] # get first 4 characters in user name
    self.auth_token =  auth + ''.join(random.SystemRandom().choice(string.ascii_uppercase + string.digits + string.ascii_lowercase) for _ in range(random.randint(3, 5))) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-29T03:23:19.340

你不能直接这样做；评估函数定义时评估默认值。但是有两种方法可以解决它。

首先，您可以每次都创建（然后调用）一个新函数。

或者，更简单地说，只是使用一个特殊的值来标记默认值。例如：

```
from datetime import datetime
def mydate(date=None):
  if date is None:
    date = datetime.now()
  print date 
```

如果`None`是一个完全合理的参数值，并且没有其他合理的值可以代替它，您可以创建一个绝对超出函数域的新值：

```
from datetime import datetime
class _MyDateDummyDefault(object):
  pass
def mydate(date=_MyDateDummyDefault):
  if date is _MyDateDummyDefault:
    date = datetime.now()
  print date
del _MyDateDummyDefault 
```

在极少数情况下，您正在编写的元代码确实需要能够完全接受任何东西，甚至，比如说，`mydate.func_defaults[0]`. 在这种情况下，您必须执行以下操作：

```
def mydate(*args, **kw):
  if 'date' in kw:
    date = kw['date']
  elif len(args):
    date = args[0]
  else:
    date = datetime.now()
  print date 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-29T04:43:47.523

将函数作为参数传入，而不是传入函数调用的结果。

也就是说，而不是这样：

```
def myfunc(date=datetime.now()):
    print date 
```

试试这个：

```
def myfunc(date=datetime.now):
    print date() 
```

# bash - 如何比较 bash 中的两个输出并找到 CPU 时间？

> ID：12649660
> 
> 赞同：1
> 
> 时间：2012-09-29T03:20:28.750
> 
> 标签：bash

我想计算几个CRC并比较它们以查看它们是否相似。换句话说，x != y st CRC(x) == CRC(y)。到目前为止我写的代码是：

```
#!/bin/bash
clear;

echo "The script starts now" 
$SECONDS = 0;

while(true) 
  do    
    ./pycrc.py --model crc-32 --check-string $RANDOM
    ./pycrc.py --model crc-32 --check-string $RANDOM     
done

echo "The script is finish" 
echo "That took approximately $SECONDS seconds" 
```

您如何设法保存输出`./pycrc.py`并比较变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T03:26:01.303

使用[命令替换](http://www.gnu.org/software/bash/manual/bashref.html#Command-Substitution)来捕获输出和[条件表达式](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions)以进行比较。像这样：

```
value1="$(./pycrc.py --model crc-32 --check-string $RANDOM)"
value2="$(./pycrc.py --model crc-32 --check-string $RANDOM)"

if [[ $value1 == $value2 ]]; then
  echo "Values match!"
fi 
```

# c# - 图片 URL 的 contentType 为“text/html”

> ID：12649661
> 
> 赞同：2
> 
> 时间：2012-09-29T03:21:08.977
> 
> 标签：c#, httpwebrequest, httpwebresponse

我想实现一种将图像从网站下载到笔记本电脑的方法。

```
public static void DownloadRemoteImageFile(string uri, string fileName)
{
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
if ((response.StatusCode == HttpStatusCode.OK ||
            response.StatusCode == HttpStatusCode.Moved ||
            response.StatusCode == HttpStatusCode.Redirect) &&
            response.ContentType.StartsWith("image", StringComparison.OrdinalIgnoreCase))
        {
             //if the remote file was found, download it
            using (Stream inputStream = response.GetResponseStream())
            using (Stream outputStream = File.OpenWrite(fileName))
            {
                byte[] buffer = new byte[4096];
                int bytesRead;
                do
                {
                    bytesRead = inputStream.Read(buffer, 0, buffer.Length);
                    outputStream.Write(buffer, 0, bytesRead);
                } while (bytesRead != 0);
            }
        }
} 
```

但or`ContentType`不是“image/jpg”或“image/png”。它们总是“文本/html”。我认为这就是为什么我将它们保存到本地后，它们的内容不正确，我无法查看它们。`request``response`

任何人都可以在这里找到解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T03:36:46.733

您可以使用此代码 - 基于`JpegBitmapDecoder class`

```
JpegBitmapDecoder decoder = new JpegBitmapDecoder(YourImageStreamSource, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);
//here you can adjust your YourImageStreamSource with outputStream value

BitmapSource bitmapSource = decoder.Frames[0];

Image myImage = new Image();
myImage.Source = bitmapSource;
myImage.Save("YourImage.jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

链接：http: [//msdn.microsoft.com/en-us/library/aa970689.aspx](http://msdn.microsoft.com/en-us/library/aa970689.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T14:35:00.507

您希望从中获取图像的站点可能需要*cookie*。有时当我们使用浏览器访问该站点时，我们可能没有注意到它，但浏览器实际上可能会访问该站点一毫秒，然后快速重新加载，同时获取 cookie。但是在再次加载站点之前，我们的浏览器会传递给它 cookie，站点*会接受它并返回图像。*

详细地说，这意味着您的方法将只执行浏览器实际执行的一半。2 个 GET 请求方法的一半。第一个是获取 cookie，第二个是实际获取图像本身。

来自（可能有点相关）的​​信息：[C# 动态生成一个站点将接受的 cookie？](https://stackoverflow.com/questions/24588785/c-sharp-generate-a-cookie-dynamically-that-site-will-accept)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T03:38:52.323

尝试将内容类型设置为特定的图像类型

```
Response.ContentType = "image/jpeg"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T05:41:43.413

您的代码没问题，但您尝试做的事情通常被网站所有者认为是不受欢迎的行为。大多数网站都希望您在网站上看到图像，但不要随意下载它们。您可以搜索与您的问题相反的内容，以了解您所反对的技术和保护措施。

我强烈建议您阅读使用协议或您尝试抓取的网站上的任何类似文档，然后再继续。

# hibernate - 为什么 mvn 命令不下载 hibernate-distribution.jar 文件？

> ID：12649664
> 
> 赞同：0
> 
> 时间：2012-09-29T03:21:35.937
> 
> 标签：hibernate, maven-2, jar, m2eclipse

我正在尝试在 pom.xml 文件的依赖项中添加 hibernate-distribution.jar 版本 3.5.4-Final。当我发出这个命令时`mvn eclipse:eclipse -Dwtpversion=2.0`，我得到以下输出。当我签入我的`.m2/repository`文件夹时，我没有看到 hibernate-distribution.jar 正在下载。我可以知道如何使用 mvn 命令下载 jar 文件吗？

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Web3 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> maven-eclipse-plugin:2.9:eclipse (default-cli) @ Web3 >>>
[INFO]
[INFO] <<< maven-eclipse-plugin:2.9:eclipse (default-cli) @ Web3 <<<
[INFO]
[INFO] --- maven-eclipse-plugin:2.9:eclipse (default-cli) @ Web3 ---
[INFO] Adding support for WTP version 2.0.
[INFO] Using Eclipse Workspace: C:\Documents and Settings\kok.hoe.loh\workspace
[WARNING] Workspace defines a VM that does not contain a valid jre/lib/rt.jar: C
:\Program Files\Java\jre6
[INFO] no substring wtp server match.
[INFO] Using as WTP server : JBoss v4.2
[INFO] Adding default classpath container: org.eclipse.jdt.launching.JRE_CONTAIN
ER
[INFO] Unable to read jar manifest from C:\Documents and Settings\kok.hoe.loh\.m
2\repository\org\hibernate\hibernate-distribution\3.5.4-Final\hibernate-distribu
tion-3.5.4-Final.pom
[INFO] File C:\Documents and Settings\kok.hoe.loh\workspace\Web3\.project alread
y exists.
       Additional settings will be preserved, run mvn eclipse:clean if you want
old settings to be removed.
[INFO] Wrote Eclipse project for "Web3" to C:\Documents and Settings\kok.hoe.loh
\workspace\Web3.
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 18.418s
[INFO] Finished at: Sat Sep 29 11:11:01 SGT 2012
[INFO] Final Memory: 6M/15M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-14T05:55:39.863

尝试删除以下目录：

```
 C:\Documents and Settings\kok.hoe.loh\.m2\repository\org\hibernate\ 
```

然后再次运行以下命令：

```
mvn eclipse:eclipse -Dwtpversion=2.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:05:08.533

这将下载您新添加到 POM 的文件

```
mvn eclipse:eclipse -DdownloadSources=true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T11:32:38.657

当我尝试通过*依赖*项导入而不是在 pom.xml 文件中使用*dependencyManagement标记时，我遇到了同样的问题*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-05T17:05:50.993

确保用标签包装你的部分。

# map - 我在将元素添加到地图的引用向量时遇到问题

> ID：12649665
> 
> 赞同：2
> 
> 时间：2012-09-29T03:21:40.130
> 
> 标签：map, vector, reference, segmentation-fault, fault

编辑：忘了说我的编程语言是 C++，我的 IDE 是 Qt Creator。

我不明白为什么我在向地图的引用矢量添加元素时遇到问题（即有时它有效，有时它失败）。

例如：

```
class C_html4_tags {
     public:
       C_html4_tags();
       //.......

       typedef std::vector<S_html_attr_value> TYPE_attr_values;

    //.....
};

//...
C_html4_tags::C_html4_tags() {

//........
map<S_browser, TYPE_attr_values> attr_supported_attr_values_map;
S_browser dummy_browser; //a fake browser key for referencing a fully Html 4.01-compliant supported attr values list
dummy_browser.name = "Dummy";

//.....
TYPE_attr_values& attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];

//......
**attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];**

//...
**attr_supported_attr_values.clear();
  attr_supported_attr_values_map.clear();**

//......
**attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];**

//...
**attr_supported_attr_values.clear();
attr_supported_attr_values_map.clear();**

} 
```

我用一堆不同的属性多次使用粗体线，它们之间几乎没有区别，直到达到这个属性（a_tabindex_attr）之前没有问题，其中IDE在正常运行时不会报告任何错误（除了“程序意外完成。” 但是，在调试它时，它现在报告：

> **收到信号**
> 
> 下级停止了，因为它收到了来自操作系统的信号。
> 
> 信号名称：SIGSEGV 信号含义：分段错误

回溯指向我上面提到的属性，在执行此操作的代码行上：

```
attr_supported_attr_values.clear(); 
```

现在，在向代码中添加了一些调试 cout 行之后，我了解到，出于某种原因，即使在执行以下操作之后也会发生以下情况：

```
attr_supported_attr_values.push_back(attr_value); 
```

向量对象，它是返回的映射值：

```
attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser]; 
```

当我将 S_html_attr_value 对象 push_back 到引用的向量时，实际上并没有改变。现在，我不知道为什么会这样，因为我在这个之前的一堆其他属性的代码中做了几乎完全相同的事情，没有任何问题，但现在出于某种原因，在这个上，它没有添加attr_supported_attr_values 的对象（这是对返回的“dummy_browser”映射值的引用）。我知道这是一个事实，因为我输出了映射的内部映射值对象的大小（使用映射的迭代器），在调用 push_back() 后它为 0。然而，更奇怪的是，在调用 push_back() 之后，我还输出了 attr_supported_attr_values.size()，而且是 1！现在怎么可能，因为它们都应该是同一个对象？

笔记：

我正在谈论的完整代码如下（或者至少是属性代码，减去调试语句......）：

```
//a_tabindex_attr:
attr_desc = "Specifies the position of an <a> element in the\n"
            "tabbing order for the current document.\n"
            "The tabbing order defines the order in which\n"
            "elements will receive focus when navigated by\n"
            "the user via the keyboard. The tabbing order\n"
            "may include elements nested within other elements.\n"
            "Elements that may receive focus based on tabindex\n"
            "adhere to the following rules:\n\n"
            "1\. Those elements that support this attribute and\n"
            "assign a positive value to it are navigated first.\n"
            "Navigation proceeds from the element with the\n"
            "lowest tabindex value to the element with the\n"
            "highest value. Values need not be sequential\n"
            "nor must they begin with any particular value.\n"
            "Elements that have identical tabindex values\n"
            "should be navigated in the order they appear\n"
            "in the character stream.\n"
            "2\. Those elements that do not support this\n"
            "attribute or support it and assign it a value\n"
            "of \"0\" are navigated next. These elements are\n"
            "navigated in the order they appear in the\n"
            "character stream.\n"
            "3\. Elements that are disabled do not participate\n"
            "in the tabbing order.";
attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];

attr_value_desc = "A number you specify for the tab index/order.\n"
                  "It must be a value between 0 and 32767.";
attr_value_content = "<i>number</i>";
attr_value = C_html4_attributes_obj.getAttrValue(attr_value_desc, attr_value_content,
                                                 attr_value_supported_browsers,
                                                 attr_value_required, attr_value_deprecated,
                                                 attr_value_notes, attr_value_tips);
attr_value.is_relative = true;
attr_supported_attr_values.push_back(attr_value);

try {
   N_init_class_members::initAttr(C_html4_attributes::attr_tabindex, a_tabindex_attr, attr_desc,
                                  attr_supported_browsers, attr_supported_attr_values_map, attr_required,
                                  attr_deprecated, attr_notes, attr_tips);
}

catch (const char* exc) {
     string exc_str = "Error! Call to N_init_class_members::initAttr() from\n"
                      "constructor of C_html4_tags class. That function\n"
                      "reported the following exception:\n\n";
     exc_str += exc;
     throw (exc_str.c_str()); //re-throw exception
}
a_tabindex_attr.is_standard_attr = true;
a_tabindex_attr.is_optional_attr = true;

//cleanup from attribute operations so we can begin working on the next attribute:
C_html4_attributes_obj.clear(); //wipes the slate clean for all the supported attributes' properties except content
attr_desc.clear();
attr_supported_attr_values.clear();
attr_supported_attr_values_map.clear();
attr_value_desc.clear();
attr_value_content.clear(); 
```

# ruby-on-rails-3 - Rails vs Backbone：谁应该负责模板和视图？

> ID：12649666
> 
> 赞同：2
> 
> 时间：2012-09-29T03:21:40.983
> 
> 标签：ruby-on-rails-3, templates, backbone.js, ruby-on-rails-3.2

作为练习，我打算用 Backbone.js 替换 Rails 应用程序的所有前端。该计划的一部分包括重新设计所有内容，直至 CSS。

我正在努力解决的问题是委派模板和视图的责任。

完全在 Backbone 中实现新的前端有什么好处，因此只使用 Rails 作为 API？

在处理应用程序的 HTML 元素时，如何在 Rails 和 Backbone 之间取得适当的平衡？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T01:45:40.467

因为似乎没有人会对此发表答案，所以我将提供我的两分钱作为一个观点（我已经在其他地方写过关于如何让 rails 和backbone.js 一起工作的问题：[rails和骨干一起工作](https://stackoverflow.com/questions/11918586/rails-and-backbone-working-together#11922573)）。

在这种情况下，大多数人倾向于完全放弃 rails 视图并将所有内容迁移到backbone.js。

这就是我在[我现在正在做的一个项目中](https://github.com/netalab/cojiro)所做的。

这是事件的自然过程，特别是一旦您开始习惯使用backbone.js 和结构化javascript 可以做的所有复杂有趣的事情，就很难回头实现标准的无状态HTML 页面。

正如我在上面链接的其他答案中提到的那样；然而，完全放弃 HTML 视图和无状态层是有代价的。就我而言，我打算`GET`仅在应用程序达到一定功能级别后，才为未启用 js 的浏览器添加纯 HTML 页面。除非用户启用了 javascript（或者除非他们想通过 JSON API），否则我们不会支持`POST`或请求。`PUT`

这就是我达成的平衡：用于访问数据的无状态 HTML（无 JS），但需要 JS 来发布/更改数据。您的选择将根据您的用例和目标用户而有所不同。

我要提到的另一件事是，如果您已经在项目中使用 rails HTML 视图已有一段时间了，您可能对切换到backbone.js 所需的初始开销毫无准备。这不仅仅是将 HAML 替换为 ERB：您正在从无状态前端迁移到有状态前端，这可能是一个巨大的变化（取决于应用程序的复杂性）。我自己对这种变化的深度有点措手不及，并且在进行切换后让我们的应用程序回到正轨之前必须做*很多事情。*而且我们很早就进行了转换，已经具备了最少的功能。

无论如何只是一些想法，希望他们有所帮助。

# c++ - C++ 读取然后编辑文本文件

> ID：12649669
> 
> 赞同：0
> 
> 时间：2012-09-29T03:21:54.523
> 
> 标签：c++, io, edit

我想知道如何通过搜索包含 foobar 的行然后只删除这些行来读取和编辑文本文件。如果有人可以将我指向正确的 fstream 功能，则不需要完整的程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T03:32:53.977

```
#include <iostream>
#include <algorithm>
#include <string>

class line {
    std::string data;
public:
    friend std::istream &operator>>(std::istream &is, line &l) {
        std::getline(is, l.data);
        return is;
    }
    operator std::string() const { return data; }    
};

int main() {      
    std::remove_copy_if(std::istream_iterator<line>(std::cin),
                        std::istream_iterator<line>(),
                        std::ostream_iterator<std::string>(std::cout, "\n"),
                        [](std::string const &s) { 
                            return s.find("foobar") != std::string::npos;
                        });
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T03:30:57.610

做这样的事情：

```
string sLine = "";
infile.open("temp.txt");

while (getline(infile, sLine))
{
  if (strstr(sLine, "foobar") != NULL)
    cout<<sLine;
  else
    //you don't want this line... it contains foobar
}

infile.close();
cout << "Read file completed!!" << endl; 
```

在这里，我将输出打印到控制台，而不是返回文件，因为这应该为您指明正确的方向。

如果您需要有关如何将行打印到以下文件的提示：

将所有不包含 foobar 的行保存到字符串中。读取整个文件后，将其关闭，然后以写入权限打开它并将字符串写入其中。这也将覆盖旧内容。

# jquery - 使用 jquery 以 django 形式获取日期时间值

> ID：12649671
> 
> 赞同：1
> 
> 时间：2012-09-29T03:22:55.703
> 
> 标签：jquery, django, datetime

在我的 django 表单中，我有一个日期时间输入字段，它对应于 models.py 中的 django.db.models.DateTimeField

```
my_date = django.db.models.DateTimeField 
```

目前，表单显示一个输入字段，我需要在其中输入一个值，例如

```
2012-09-30 08:50:46 
```

我需要提供一个 javasrcipt 弹出窗口来让用户选择一个日期时间值。我可以为此使用哪个 jquery 组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T03:34:45.300

如果您想添加日期和时间选择器，我建议您使用

[jQuery datepicker](http://jqueryui.com/demos/datepicker/)。如果你想添加时间也比使用[Add time to jquery-datepicker](http://trentrichardson.com/examples/timepicker/)

另请参阅 [timepickr 插件](http://haineault.com/media/jquery/ui-timepickr/page/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T03:30:29.113

这可能对你有用： http: [//trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

在网络表单中，将此类输入拆分为两个输入，一个用于日期，一个用于时间，这并不少见。因此请记住，如果您进行这样的拆分，将会有更多可用选项。

# apache - 单一案例 - 在 htacess 中使用 modrewrite 动态到静态页面

> ID：12649672
> 
> 赞同：1
> 
> 时间：2012-09-29T03:22:58.500
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个动态页面：

```
http://blog.mysite.com/?p=25 
```

并使用 htaccess 和 modrewrite，我想将其更改为：

```
http://www.mysite.com/stuff/newhome.html 
```

我知道这不会那么难，但是这个让我很难过，任何和所有的帮助都将不胜感激。

# 编辑

我试过了：

```
RewriteRule ^p=25 mysite.com/stuff/newhome.html [QSA,R=301,L] 
```

随着变化，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:52:18.710

```
RewriteCond %{QUERY_STRING} ^p=25$
RewriteRule ^$ http://www.mysite.com/stuff/newhome.html [R=301] 
```

# perl - perl sudo 使用 Net::Openssh 不起作用

> ID：12649673
> 
> 赞同：0
> 
> 时间：2012-09-29T03:23:15.323
> 
> 标签：perl, sudo

我正在使用 salvas 的 Net::Openssh 模块，但无法弄清楚如何使用 sudo。我尝试了以下方法，但它不起作用......

结果中没有打印任何内容。`ls`像,这样的单字命令`pwd`也不会产生任何东西。

目标系统上的 sudo 版本：

```
$ /usr/local/bin/sudo -V
CU Sudo version 1.5.7p2

$ /usr/local/bin/sudo -h
CU Sudo version 1.5.7p2
usage: /usr/local/bin/sudo -V | -h | -l | -v | -k | -H | [-b] [-p prompt] [-u username/#uid] -s | <command> 
```

由于 CU sudo 一次不允许超过 1 个选项，因此我在提供命令之前提供 -k 。

请注意，这个 sudo 版本没有 -S 开关来使用标准输入传递密码。所以它需要来自终端的密码。你能帮忙吗？谢谢。

```
$ssh->system("$sudo_path -k");
my @output = $ssh->capture({tty => 1,
              stdin_data => "$PASS"},
              $sudo_path,
              "-p",'', "$cmd");
print "  result=@output \n"; 
```

或者

```
$ssh->system("$sudo_path -k");
my @output = $ssh->capture({stdin_data => "$PASS"},
              $sudo_path,
              "-p",'', "$cmd");
print "  result=@output \n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T03:37:17.977

如果您在问题中解释了更多您要完成的工作，那将会更有帮助，但我假设您正在尝试使用 perl 中的 Net::OpenSSH 模块通过 ssh 运行需要 sudo 的命令。

如果是这种情况，您应该考虑尝试使用“heredoc”来编写一系列命令的脚本。

这是[Quote-Like 运算符的 PerlDoc](http://perldoc.perl.org/perlop.html#Quote-Like-Operators) - 寻找`<<EOF`我经常[在这里使用的文档](https://en.wikipedia.org/wiki/Here_document)来讨论这样的事情的区域。

如果由于某种原因在 Net::OpenSSH 命令中使用heredoc 不起作用 - Net::OpenSSH 也可以与 Expect 一起使用，如此[处](http://search.cpan.org/~salva/Net-OpenSSH-0.57/lib/Net/OpenSSH.pm#Expect)所述。

如果由于某种原因对您不起作用，您始终可以创建一个 shell 脚本，通过远程系统上的 heredoc 使用 sudo 运行命令，然后通过您的 Net::OpenSSH 连接执行该脚本。

# away3d - away3D 4.x 导出为 awd 格式不包括序列信息

> ID：12649680
> 
> 赞同：1
> 
> 时间：2012-09-29T03:26:40.480
> 
> 标签：away3d

我在3dmax2012中创建了一个角色模型，并在模型中添加了很多动画。我尝试将该模型导出为.awd格式，并命名为“hero.awd”，然后我使用prebab3D软件打开hero.awd，查看它的进程日志，我发现它不包含“sequences.txt”信息，所以我无法控制模型的动画。

# javascript - 元素放置不正确导致的等待状态？NSFW

> ID：12649681
> 
> 赞同：0
> 
> 时间：2012-09-29T03:27:04.753
> 
> 标签：javascript, html, dom

* * *

**NSFW**：请注意该网站出售大麻种子，因此链接是 NSFW。

* * *

我有一些网站在相同或非常相似的系统上运行，除了一个之外，它们都运行得非常快，我无法弄清楚为什么，我相信这主要是由于我的经验不足，但我已经查看了 Firebug 的 Net 选项卡我不确定我是否完全理解它。

我可以看到其中一个快速网站的产品页面大小和内容为 80.33kb，这需要 1.28 秒的等待和 598 毫秒的加载才能显示，而慢速网站的大小为 22.87kb，内容为 158kb 和有 4.75 秒的延迟，其中 4.55 秒正在等待。

我真的很想知道如何减少等待时间以及为什么大小和内容数字如此不同。[您可以在此页面上](http://www.seed-city.com/barneys-farm-seeds/liberty-haze)看到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:22:01.767

在整个页面中，你有一个名副其实的 JavaScript 垃圾。

目标是在不使用 JS 的情况下尽可能多地进行物理加载，然后在最底层完成所有 JS 加载。

你也有很多不同的 JS 脚本。喜欢……真的很多。

您可能会考虑弄清楚它们需要以什么顺序出现，然后按该顺序将它们粘贴到一个文件中（或六个文件或其他文件，但 Google 建议该页面上有几十个 JS 文件)，然后将其加载到页面底部。

这可能意味着您需要了解更多关于延迟加载页面上的内容的知识，这可能意味着您需要了解如何更多地分离关注点（我没有比您的标志进一步了解每个人都有一个 onclick 处理程序，这无疑做了一些巨大的事情——最好将一个侦听器添加到包含所有标志的容器中，然后识别它是哪个并从那里运行）。

但是当一个 JS 文件下载时，浏览器会暂停并编译它。这通常是几分之一秒。但是如果你有几十个文件，一个接一个，加载文件的暂停，访问文件内容的暂停，文件中的JS编译暂停，然后运行JS，之前继续展示网站的下一部分......

所以所有这些小停顿都在加起来。

这就是为什么你应该只提供你***需要***的 JS ，你应该在页面底部提供它，然后再加载一些不错的东西。编译一个包含数百行代码的文件，甚至比编译只有几十行代码的 10 个文件花费的时间更少。

最后，它归结为用户看到***发生***了什么，而不是下载的基准速度有多快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T05:20:23.807

查看使用开发人员工具中的 Chrome 网络选项卡加载的页面，我在以下链接中收到以下时间：

[http://www.seed-city.com/barneys-farm-seeds/liberty-haze](http://www.seed-city.com/barneys-farm-seeds/liberty-haze)

```
102 requests | 131.24KB | 8.41s (onload: 8.50s, DOMContentLoaded: 6.61s)
102 requests | 131.47KB | 8.47s (onload: 8.56s, DOMContentLoaded: 6.82s)
102 requests | 131.45KB | 8.71s (onload: 8.79s, DOMContentLoaded: 7.06s) 
```

现在，做一个（[有点简单的](http://pastebin.com/H9ajG99H)）改变：

```
103 requests | 110.16KB | 3.77s (onload: 3.86s, DOMContentLoaded: 2.03s)
103 requests | 110.17KB | 3.85s (onload: 3.94s, DOMContentLoaded: 2.21s)
103 requests | 110.16KB | 4.20s (onload: 3.50s, DOMContentLoaded: 2.28s) 
```

这是从当前页面的网络选项卡输出的[典型 HAR 日志：](http://code.google.com/p/harviewer/)

[http://pastebin.com/pM5Dd1Fw](http://pastebin.com/pM5Dd1Fw)

重要的部分是要意识到浏览器正在等待将近 5 秒钟甚至做任何事情（仅截断以显示相关行）：

```
{
  "startedDateTime": "2012-09-29T04:58:07.861Z",
  "time": 4831,
  "request": {
    "method": "GET",
    "url": "http://www.seed-city.com/barneys-farm-seeds/liberty-haze",
    "httpVersion": "HTTP/1.1",
    ...
  },
  "cache": {},
  "timings": {
    "blocked": 0,
    "dns": 16,
    "connect": 129,
    "send": 0,
    "wait": 4677,        // <<< Right here
    "receive": 8,
    "ssl": -1
  }
} 
```

以及`slow.html`页面的时间：

```
{
  "startedDateTime": "2012-09-29T05:04:51.624Z",
  "time": 92,
  "request": {
    "method": "GET",
    "url": "http://example.com/t/slow.html",
    "httpVersion": "HTTP/1.1",
    ...
  },
  "timings": {
    "blocked": 0,
    "dns": 7,
    "connect": 38,
    "send": 0,
    "wait": 44,           // <<< Right here
    "receive": 1,
    "ssl": -1
  },
  "pageref": "page_3"
} 
```

那是`4677ms`vs `44ms`。这是该更新页面的典型 HAR 日志：

[http://pastebin.com/Jgm1YyU3](http://pastebin.com/Jgm1YyU3)

那么我做了什么来实现那些（非常真实和切实的）改进？我将 Javascript 移到`body`标签的底部：

[http://pastebin.com/H9ajG99H](http://pastebin.com/H9ajG99H)

这带来了两倍的改进。首先，您允许浏览器在开始与阻塞进程（`script`调用）交互之前继续并加载您的内容。因此，您的客户会“注意到”一个更快的网站，仅仅是因为页面似乎加载得更快（实际上您只是允许它在运行时加载）。其次，您要等到`body`标签基本上完全加载后，才开始使用它的内容。

看起来您没有在标头中使用缓存指令来告诉浏览器不要长时间检查文件的更新。所以你的 Twitter 和 Facebook 图标，看起来浏览器认为它需要重新检查服务器，所以理论上应该是不必要的，除非经常这样。但是“等待”的时间：

```
twitter_aqu_64.png 1.32s
ajax-loader.gif    1.31s
ssl-icon.jpg       1.31s 
```

现在，我不是缓存控制方面的专家。这是一个有点黑暗的艺术。但是这些时间让我觉得那里可能会发生一些事情。

试试这个答案以获取有关缓存控制的更多信息：

[HTML 缓存控件](https://stackoverflow.com/a/3099549/451969)

# macos - Cython 编译/链接在 Mac OS X 10.8 上失败

> ID：12649689
> 
> 赞同：4
> 
> 时间：2012-09-29T03:29:25.730
> 
> 标签：macos, osx-mountain-lion, cython

我是 python 的新手，并尝试通过在 [http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/](http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/)中创建的一个简单示例 来玩 Cython cython 文件名为 c1 .pyx

然后运行`cython c1.pyx`，就好了。然后运行`gcc -c -fPIC -I/usr/include/python2.7/ c1.c`，也很好。但是然后运行`gcc -shared c1.o -o c1.so`，它没有通过。

任何人都可以对此有所了解吗？

这是错误消息：

```
Undefined symbols for architecture x86_64:
  "_PyCFunction_NewEx", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyCode_New", referenced from:
      ___Pyx_AddTraceback in cc5xSgOI.o
      _initc1 in cc5xSgOI.o
  "_PyDict_GetItem", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyDict_New", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyDict_Next", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyDict_Size", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyErr_Clear", referenced from:
      ___Pyx_GetName in cc5xSgOI.o
  "_PyErr_Format", referenced from:
      ___Pyx_RaiseArgtupleInvalid.constprop.5 in cc5xSgOI.o
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyErr_Occurred", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
      _initc1 in cc5xSgOI.o
  "_PyErr_SetObject", referenced from:
      ___Pyx_GetName in cc5xSgOI.o
  "_PyErr_SetString", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyErr_WarnEx", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyExc_ImportError", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyExc_NameError", referenced from:
      ___Pyx_GetName in cc5xSgOI.o
  "_PyExc_TypeError", referenced from:
      ___Pyx_RaiseArgtupleInvalid.constprop.5 in cc5xSgOI.o
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyFloat_AsDouble", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyFloat_FromDouble", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyFloat_Type", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyFrame_New", referenced from:
      ___Pyx_AddTraceback in cc5xSgOI.o
  "_PyImport_AddModule", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyInt_FromLong", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyList_New", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyMem_Malloc", referenced from:
      ___Pyx_AddTraceback in cc5xSgOI.o
  "_PyMem_Realloc", referenced from:
      ___Pyx_AddTraceback in cc5xSgOI.o
  "_PyModule_GetDict", referenced from:
      ___Pyx_AddTraceback in cc5xSgOI.o
      _initc1 in cc5xSgOI.o
  "_PyNumber_Add", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyNumber_Multiply", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyOS_snprintf", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyObject_Call", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyObject_CallFunctionObjArgs", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyObject_GetAttr", referenced from:
      ___Pyx_GetName in cc5xSgOI.o
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyObject_GetAttrString", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyObject_SetAttr", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyObject_SetAttrString", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyString_AsString", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyString_FromFormat", referenced from:
      ___Pyx_AddTraceback in cc5xSgOI.o
  "_PyString_FromString", referenced from:
      ___Pyx_AddTraceback in cc5xSgOI.o
  "_PyString_FromStringAndSize", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyString_InternFromString", referenced from:
      _initc1 in cc5xSgOI.o
  "_PyString_Type", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "_PyTraceBack_Here", referenced from:
      ___Pyx_AddTraceback in cc5xSgOI.o
  "_PyTuple_New", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
      _initc1 in cc5xSgOI.o
  "_PyUnicodeUCS2_DecodeUTF8", referenced from:
      _initc1 in cc5xSgOI.o
  "_Py_GetVersion", referenced from:
      _initc1 in cc5xSgOI.o
  "_Py_InitModule4_64", referenced from:
      _initc1 in cc5xSgOI.o
  "__PyString_Eq", referenced from:
      ___pyx_pw_2c1_1great_circle in cc5xSgOI.o
  "__PyThreadState_Current", referenced from:
      ___Pyx_AddTraceback in cc5xSgOI.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T04:09:46.270

`-lpython2.7`您必须在链接器命令行中包含（或您正在使用的任何 Python 版本）。

不过，使用 Cython 的最简单方法是使用 distutils 设置脚本，因为它会为您执行所有详细的编译器命令。

另请参阅：[用于构建](http://docs.cython.org/src/quickstart/build.html)的[Cython 文档，用于编译](http://docs.cython.org/src/reference/compilation.html)的 Cython 文档。

# ruby - 如何使用 libgit2 的 Ruby 绑定提交

> ID：12649697
> 
> 赞同：1
> 
> 时间：2012-09-29T03:33:02.557
> 
> 标签：ruby, git, libgit2

有谁知道如何使用 libgit2 的 ruby​​ 绑定（“坚固的”gem）创建提交？我已经尝试了所有我能找到的例子，在 libgit2 使用指南和坚固的 gem github 页面上，创建或编辑提交的例子都没有工作。

到目前为止，这有助于弄清楚如何提交，除了它用于 libgit2 本身而不是 ruby​​ 绑定。[http://librelist.com/browser//libgit2/2011/2/19/initing-a-repository-adding-files-to-the-index-and-committing/#d94ce8df18ff0202ce904180286a4a85](http://librelist.com/browser//libgit2/2011/2/19/initing-a-repository-adding-files-to-the-index-and-committing/#d94ce8df18ff0202ce904180286a4a85)

当我尝试按照 Rugged Github 页面上的步骤进行提交时，我得到了这个；

```
pry(main)> Rugged::Commit.create( repo, :author=>author, :message=>"Hello world\n\n", :committer=>author, :parents=>parents, :tree=>tree )
TypeError: wrong argument type nil (expected String) 
```

当我尝试遵循 libgit2 使用指南时，它基本上说要获取提交，然后使用`commit.message=`类似的命令对其进行编辑，但后来我得到 noMethodErrors，因为没有 'message=' 方法。

libgit2 使用指南：[http](http://libgit2.github.com/api.html)
://libgit2.github.com/api.html 加固文档 0：[http](http://rubydoc.info/gems/rugged/0.16.0/frames)
://rubydoc.info/gems/rugged/0.16.0/frames 加固 Github 页面：[https ://github.com/ libgit2/坚固的](https://github.com/libgit2/rugged)

编辑：我如何重现这个；[http://pastebin.com/wnta8FWm](http://pastebin.com/wnta8FWm)
Edit_n+1：我还尝试使用树的 sha 而不是 Rugged::Tree 对象，通过尝试

```
x=Rugged::Commit.create( repo, :author=>author, :message=>"Hello world\n\n", :committer=>author, :parents=>parents, :tree=>tree.oid ) 
```

但这只会产生与以前完全相同的错误输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:27:07.637

TL;DR --- 这就是为我解决的问题：`gem install --prerelease rugged`

经过一番挖掘和大量实验，我想我已经找到了问题所在。

当我这样做时`gem install rugged`，它给了我版本 0.16.0 。这是我遇到问题的版本，当我尝试 gem 附带的测试时，许多测试都失败了，许多失败的测试似乎与提交和编写提交有关。

Rugged gem 的 Rubygems 页面显示有一个可用的 0.17.0.b6 版本，这让我感到困惑，因为我从未遇到过`gem`. 该版本必须是预发布版本，因为在`gem install --prerelease rugged`安装了 0.17.0.b6 版本之后（以及）。

现在有了 0.17.0.b6，我可以毫无问题地遵循文档。

One extra note, the documentation that I've read doesn't mention it but the source code in `ext/rugged_commit.c` has comments that mention an `:update_ref=>''` option when creating a commit which you can use to update the ref to point to the new commit. Without this option, the commit will be created and written to the ODB, but no references will be updated and so the commit won't be accessible from any of your branches.

# php - 获取验证码图像错误

> ID：12649699
> 
> 赞同：-1
> 
> 时间：2012-09-29T03:33:09.577
> 
> 标签：php, captcha

```
Fatal error: Call to undefined function imagettfbbox() 
```

但它完美地加载到本地服务器中。

这是我的网址。

[http://mc-serverreviews.com/test/contact.php](http://mc-serverreviews.com/test/contact.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:38:07.310

您的服务器可能没有安装[GD](http://php.net/manual/en/book.image.php)库。

# sql-server - 如何根据日期插入

> ID：12649701
> 
> 赞同：1
> 
> 时间：2012-09-29T03:33:18.350
> 
> 标签：sql-server, insert, sql-update

我有一个表 table1 (account, last_contact_date, insert_date)，account 和 last_contact_date 是主键。insert_date 通过调用 getdate() 设置为添加记录的时间。我还有一个临时表 #temp(account, last_contact_date) 用于更新 table1。

以下是样本数据：

```
table1
account    last_contact_date    insert_date
1          2012-09-01           2012-09-28
2          2012-09-01           2012-09-28
3          2012-09-01           2012-09-28

#temp 
account    last_contact_date
1          2012-09-27
2          2012-09-27  
3          2012-08-01 
```

结果表取决于插入日期。如果日期是 2012-09-28，结果将是

```
table1
account    last_contact_date    insert_date
1          2012-09-27           2012-09-28
2          2012-09-27           2012-09-28
3          2012-09-01           2012-09-28 
```

如果日期是 2012-09-29，结果将是

```
table1
account    last_contact_date    insert_date
1          2012-09-01           2012-09-28
2          2012-09-01           2012-09-28
3          2012-09-01           2012-09-28
1          2012-09-27           2012-09-29
2          2012-09-27           2012-09-29 
```

基本上规则是（1）如果插入日期是同一天，我将选择最新的 last_contact_date，否则，（2）如果 last_contact_date 晚于当前的 last_contact_date，我将插入一个新的。

如何为此插入编写查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:21:16.320

这不是真正的插入。它是基于特定逻辑的更新或插入。

所以，我推荐的是这个。

将所有记录转储到一个新的临时表中。您将按原样将表 1 中的记录转储到临时表中。您将按原样将 #temp 帐户中的记录转储到新的临时表中，但将 insert_date 列设置为当前日期。

因此，您的新临时表将如下所示：

```
#holding tank 
account    last_contact_date    insert_date
1          2012-09-01           2012-09-28
2          2012-09-01           2012-09-28
3          2012-09-01           2012-09-28
1          2012-09-27           2012-09-29
2          2012-09-27           2012-09-29
3          2012-08-01           2012-09-29 
```

现在，从 table1 中删除所有记录。

接下来，将新记录插入表一。我们将使用 a`GROUP`来整理您的记录。这是示例代码，在这种情况下，它会在某些条件下破坏您的主键，但您明白我的意思。按摩分组逻辑以满足您的需求：

```
Insert into Table1
select
   account,
   max(last_contact_date),
   insert_date
from
  #HoldingTank
group by
  account, insert_date 
```

在我看来，这是唯一可以接受的方法。

我也很肯定，我在实践中永远不会遇到这种情况，因为它是一个破碎的设计。需要对此数据库模式进行一些思考。将每个实体和事件存储在自己的表中。根据我对您的情况的有限了解，我正在考虑 Accounts，Account_Contact_Attempts。

# css - 有没有办法从样式中应用 CSS 类？

> ID：12649703
> 
> 赞同：3
> 
> 时间：2012-09-29T03:34:06.910
> 
> 标签：css

我试图在我的 CSS 样式表中更加模块化，并且想知道是否有一些功能，如包含或应用，允许作者动态应用一组样式。

由于我很难说出这个问题，也许举个例子会更有意义。

例如，假设我有以下 CSS：

```
.red {color:#e00b0b}
#footer a {font-size:0.8em}
h2 {font-size:1.4em; font-weight:bold;} 
```

在我的页面中，假设我希望**页脚链接**和**h2**元素都使用特殊的红色（可能还有其他位置我也想使用它）。理想情况下，我想做以下事情：

```
.red {color:#e00b0b}
#footer a {font-size:0.8em; apply-class:".red";}
h2 {font-size:1.4em; font-weight:bold; apply-class:".red";} 
```

对我来说，这在某种程度上感觉是“模块化”的，因为我可以对`.red`类进行修改而不必太担心它的使用位置，而其他位置可以使用该类中的样式而不必担心，具体来说，它们是什么.

我了解我有以下选择，并说明了为什么，在我相当缺乏经验的情况下，它们不够完美：

1.  将该属性添加`color`到我想成为该颜色的每个元素。*不理想，因为如果我更改颜色，我必须更新每个规则以匹配新颜色。*
2.  将`red`类添加到我想变成红色的每个元素。 *不理想，因为这意味着我的 HTML 是指示演示文稿。*
3.  创建一个附加规则，选择我想要变为红色的每个元素并将`color`属性应用于该元素。 *不理想，因为很难找到为特定元素设置样式的所有规则，这使得维护更具挑战性*

也许我只是个混蛋，以下选项是唯一的选择，我应该坚持下去。但是，我想知道**“理想”（嗯，我的理想）方法是否存在，如果存在，正确的语法是**什么？

如果它不存在，上面的选项 3 似乎是我最好的选择。但是，我想得到确认。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T03:47:47.943

首先你不能做`apply-class:".red";`

要执行此类操作，我建议您使用此方法

```
.red {color:#e00b0b;}
h2 {font-size:1.4em; font-weight:bold;}
.mymargin{margin:5px;}

<h2 class="red mymargin">This is h2</h2> 
```

并在 div 中使用

```
<div id="div1" class="red mymargin"></div> 
```

在这种情况下，如果您将在`.red`课堂上进行更改。它将在任何地方更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T04:16:29.287

简短的回答：在纯 CSS 中无法做到这一点。

更长的答案：Sass 通过[@extend 指令](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend)解决了这个问题。

```
.error {
  border: 1px #f00;
  background-color: #fdd;
}
.seriousError {
  @extend .error;
  border-width: 3px;
} 
```

这使您可以在开发中保持 CSS 模块化，尽管在使用它之前确实需要一个预编译步骤。虽然它工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T04:12:36.350

我同意 DarthCaesar 和 jhonraymos 的观点。要使用 JavaScript 更新一个类，你只需要一个简单的：

```
function toggleColorClass(e){
    var redClass = document.getElementsByClassName('red');
    redClass.removeAttribute('class', 'red');
    /*Set the class to some other color class*/
    redClass.setAttribute('class', 'blue');
} 
```

当然，要完成这项工作，您需要在文档中的某个地方包含上述函数……如果这是您正在使用的所有 JS，您可以将其粘贴在头部，甚至内联使用。您可能还想编写它以使切换在两个方向上进行，即打开和关闭红色。此外，jhonray 的片段可能是您想要标记 CSS 的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T03:49:12.367

您可以在 javascript 中使用 DOM 来动态编辑 HTML 标签的 id 和/或 class 属性。

# xcode - 无法打开文件“info.plist”，因为没有这样的文件

> ID：12649704
> 
> 赞同：0
> 
> 时间：2012-09-29T03:34:11.777
> 
> 标签：xcode, info.plist

我试图将应用程序部署到 iphone 设备进行测试。当我按下运行按钮时，下面附上了一个错误 accured.pic。

“文件'Simple-Info.plist'无法打开，因为没有这样的文件”。但是该文件在项目中！

我提到了图中红色标记的文件的路径。为什么路径中有2个简单（项目名称）？

有人可以帮忙吗？！

[![在此处输入图像描述](../Images/028c3230e2a82bb597e1d553171e8f0f.png)](https://i.stack.imgur.com/duxBO.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:45:03.853

Xcode 不是文件夹中存在哪些文件的直接表示。它显示了与项目关联的文件。转到项目的实际文件夹，您可能会发现该文件丢失。如果你还没有清空你的垃圾，它可能就在那里。它也可能被意外移动，在这种情况下您可以搜索它。

# php - MySQL：使用 BEGIN&COMMIT 在同一查询中插入多个表

> ID：12649706
> 
> 赞同：3
> 
> 时间：2012-09-29T03:34:47.827
> 
> 标签：php, mysql

我想使用 BEGIN 和 COMMIT 在同一个查询中插入多个表。似乎错误发生在开始。

这是我的 SQL 命令

```
 BEGIN
    INSERT INTO Product (pName, pBrand, pCategory, pSize, pQuantity, pPrice, pDetail)
        VALUES('$name', '$brand', '$category', '$size', '$quantity', '$price', '$detail')
    INSERT INTO Image (iName, iExt, iSize, pID)
        VALUES('$img_name', '$img_ext', '$img_size', LAST_INSERT_ID());
    COMMIT; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T03:35:38.250

您忘记在关键字后添加分号`;`（*或终止符）*`BEGIN`

[**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/251bd/1)

# visual-studio - Change themes, etc. on Visual Studio 2012 *Express* Desktop

> ID：12649715
> 
> 赞同：5
> 
> 时间：2012-09-29T03:37:15.110
> 
> 标签：visual-studio, visual-c++

Has anyone managed to fix the themes on the Express version of Visual Studio 2012 for Windows Desktop? I have tried the solutions that work on the paid version, as described in another [Stackoverflow question](https://stackoverflow.com/questions/9594433/how-can-i-switch-themes-in-visual-studio-2012). I managed to [change colors](http://alinconstantin.blogspot.com/2012/09/using-color-themes-with-visual-studio.html), but the Menus remain as MENU's, and the small, colorless icons still crouch in the task bar.

EDIT: Please note that what hope to see as an answer is, "Yes, I did it for the Express version, and here's how." Failing that, I could accept, "Sorry, you lose, and here's why."

EDIT 2: Microsoft says the "Blue" theme is the same as VS 2010\. Perhaps I did not make it clear that we already have a partial answer. The "[change colors](http://alinconstantin.blogspot.com/2012/09/using-color-themes-with-visual-studio.html)" link shows how to perform that task without the plugin that only works with the paid version.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T08:57:36.573

Yea! I found another piece of the puzzle. To get rid of the UPPERCASE MENU's in the Express version, the magic entry is key is HKEY_CURRENT_USER\Software\Microsoft\WDExpress\11.0\General. Add a DWORD named SuppressUppercaseConversion and give it a value 1\. Yep, exactly like what Derek said, except for the WDExpress part. So that makes the menu headings easily readable again.

As noted in the question, Express users can get the colors back by following the [instructions](http://alinconstantin.blogspot.com/2012/09/using-color-themes-with-visual-studio.html) that Alin Constantin blogged.

Only the little gray icons remain to be repaired. Those are not too bad.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T03:43:09.197

At least for the paid version, there's a registry key to address the uppercase menus

1.  Launch regedit and navigate to HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\General
2.  Create a DWORD value named SuppressUppercaseConversion with value 1.

# mysql - MySQL REGEX 使用长度未知的 SUBSTRING？

> ID：12649716
> 
> 赞同：5
> 
> 时间：2012-09-29T03:37:24.817
> 
> 标签：mysql, regex

假设我有这些数据：

```
First line of text etc etc
Second line of text here 
```

*我想返回第一行，我知道它是如何开始的，但不知道它是如何结束的，只是它以换行符结束。*这是我到目前为止所拥有的：

```
SELECT
SUBSTRING(`file`, LOCATE('First line', `file`), LOCATE('First line', `file`)+10)
FROM `test` 
```

这有效，但`+10`并不总是+10。我必须知道在哪里停止的唯一标记是新行，但我认为不可能在 SUBSTRING 中使用正则表达式。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:20:44.483

尝试这个：

```
SELECT SUBSTRING(`file`, 1, LOCATE("\n", `file`) - 1) FROM `test`; 
```

子字符串从一开始，而不是零。从 LOCATE 的结果中减去 1 会排除行返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T03:42:17.773

尝试这个：

```
SELECT 
      SUBSTRING( `file`, LOCATE('First line', `file`),
          LOCATE("\n",`file`) 
 FROM `test` 
```

# php - Slim PHP 分离功能

> ID：12649725
> 
> 赞同：2
> 
> 时间：2012-09-29T03:39:42.217
> 
> 标签：php, slim

我在理解 Slim PHP 时遇到问题，顺便说一下，我是这个框架的新手。第一行代码有效。

```
$app->post('/book',  function() use ($app){

   $app->response();

  /****  Some code here  ***/
}); 
```

但我想把功能分开，所以我试着让它像这样

```
$app->post('/book', 'addBook');

function addBook() {

  $app->response();

  /*** Some code here  ***/
} 
```

但上面的代码不起作用。我缺少什么伙计们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T03:43:28.820

您在之后缺少一个分号

```
 $app->response();
                  ^ 
```

您也无法`$app`在该函数中引用。该表示法仅适用于[匿名函数](http://www.php.net/manual/en/functions.anonymous.php)。你可以这样做：

```
$app->get('/book/', function () use ($app) { addBook($app); } );

function addBook($app) {

  var_dump($app->response());

  /*** Some code here  ***/
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T05:19:06.350

您可以尝试 getInstance()：

```
$app->post('/book', 'addBook');

function addBook() {

    $app = Slim::getInstance();

    $app->response();

} 
```

# javascript - 在 Bing 地图中禁用路线更改和隐藏航点

> ID：12649726
> 
> 赞同：4
> 
> 时间：2012-09-29T03:40:13.747
> 
> 标签：javascript, html, bing-api, bing-maps

再会，

我正在使用 Bing Maps（纯 html 和 javascript）来跟踪沿预定义路线移动的车辆。我已经使用 DirectionsManager 创建了路线，但是用户可以拖动路线来更改它。

我想禁用此功能，以便用户无法更改路线以及隐藏路线上的所有航点。

任何帮助、指导或资源都将不胜感激。提前致谢。

问候，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T03:30:00.490

为了那些可能偶然发现我的问题的人的利益：

**禁用路线拖动**：将方向管理器请求选项 routeDraggable 设置为 false

```
directionsManager.setRequestOptions({
                    routeMode: Microsoft.Maps.Directions.RouteMode.driving,
                    routeDraggable: false 
```

**隐藏航点和通过点：**将方向管理器渲染选项 waypointPushpinOptions 和 viapointPushpinOptions 可见性设置为 false

```
directionsManager.setRenderOptions({
                itineraryContainer: document.getElementById('directionsItinerary'),
                waypointPushpinOptions:{visible:false},
                viapointPushpinOptions:{visible:false},
            }); 
```

# ruby-on-rails-3 - 管理员权限的复选框布尔值

> ID：12649730
> 
> 赞同：2
> 
> 时间：2012-09-29T03:42:10.380
> 
> 标签：ruby-on-rails-3, attributes, models

在我的应用程序中有一个具有管理员角色的用户模型。我希望管理员能够创建新的管理员，所以在用户/编辑页面上，我希望创建一个管理员可见的复选框，当检查将用户转换为管理员时。我正在使用的代码在这里。除了复选框位之外，一切都有效，这就是我要问的原因。我是 Rails 的新手，我只是不知道如何抓取管理复选框信息并使用它来更改管理属性（出于安全原因，它是 attr_protected）。

我的编辑表格

```
<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
    <%= render 'shared/error_messages' %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirmation" %>
      <%= f.password_field :password_confirmation %>

      <% if signed_in? %>
        <% if current_user.admin? %>
          <h3> Click to Switch On/Off Admin  
          <%= check_box_tag(:admin) %></h3>
        <% end %>
      <% end %>

      <%= f.submit @string, class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div> 
```

我的 user.rb 文件的相关行

```
before_save :toggle_admin

private

    def toggle_admin
      if self.admin == true
        self.toggle!(:admin)
      end
    end 
```

我究竟做错了什么？我提交时它不会切换任何东西。

谢谢！

萨沙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:44:31.997

实际上问题是因为您错误地添加了**:admin 复选框**。你必须这样做：

```
<%= f.check_box :admin %> 
```

它将产生具有正确名称的输入：

```
<input type="checkbox" id="user_admin" name="user[admin]" value="0" /> 
```

因此，您将获得正确的参数散列，该散列在表单提交后发送。

有关更多详细信息，请查看 Rails 文档：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-check_box](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-check_box)

**更新#1**

如果您出于安全原因想使用切换，只需更改`before_save`为`after_save`，因为切换的工作方式如下：

```
User.last.toggle!(:admin) 
```

SQL 输出：

```
1.9.3p194 :007 > User.last.toggle!(:admin)
  User Load (0.6ms)  SELECT `users`.* FROM `users` ORDER BY `users`.`id` DESC LIMIT 1
  SQL (83.8ms)  UPDATE `users` SET `admin` = 1 WHERE `users`.`id` = 13
 => true 

1.9.3p194 :008 > User.last.toggle!(:admin)
  User Load (0.6ms)  SELECT `users`.* FROM `users` ORDER BY `users`.`id` DESC LIMIT 1
  SQL (76.7ms)  UPDATE `users` SET `admin` = 0 WHERE `users`.`id` = 13 
```

**更新#2**

原则上，您可以使用复选框的虚拟属性来实现它。

```
after_save :toggle_admin
attr_accessor :adminify
attr_accessible :adminify

private

    def toggle_admin
      if self.adminify == "1"
        self.toggle!(:admin)
      end
    end 
```

查看有关 Rails 中虚拟属性的教程：[http ://railscasts.com/episodes/167-more-on-virtual-attributes](http://railscasts.com/episodes/167-more-on-virtual-attributes)

# delphi - Delphi 是否支持 GIS 专用数据库？

> ID：12649732
> 
> 赞同：3
> 
> 时间：2012-09-29T03:42:18.473
> 
> 标签：delphi, gis, postgis, spatialite

例如[PostGIS](http://postgis.refractions.net/)和[SpatiaLite](http://www.gaia-gis.it/gaia-sins/)？

我正在使用不提供支持的 AnyDac。在 Delphi 中使用这种支持 GIS 的数据库时，是否有任何其他组件可以让我的生活更轻松？

* * *

[更新] 如果不是您想要的，请在[我的另一个问题](https://stackoverflow.com/questions/12657702/what-features-should-an-interface-component-to-gis-databases-have)中发布要求。谢谢你。

# html - 输入+跨度周围的流体边界。FF/Chrome 中的 CSS 渲染差异

> ID：12649734
> 
> 赞同：0
> 
> 时间：2012-09-29T03:42:56.507
> 
> 标签：html, css

我在 html/css 中处理了一个风格化的输入，以实现我在 Firefox 中想要的外观，但元素（输入和跨度）似乎在 Chrome 中呈现不同。我还没有在 IE 上测试。

该代码可在[http://jsfiddle.net/WEZvu/](http://jsfiddle.net/WEZvu/)获得。任何输入将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:49:01.907

这可以接受吗？[http://jsfiddle.net/WEZvu/1/](http://jsfiddle.net/WEZvu/1/)

由于您的边框和背景颜色应用于整个“元素”，因此将它们放在容器上似乎是一个更好的主意。

我现在正在使用Linux，没有IE来测试，但我认为看起来应该没问题...

# c - 为指向结构的指针释放内存

> ID：12649736
> 
> 赞同：0
> 
> 时间：2012-09-29T03:43:12.177
> 
> 标签：c, pointers, struct, free

我有以下无法更改的代码

```
typedef struct 
{
    char* firstName;
    char* lastName;
    int id;
    float mark;
}* pStudentRecord; 
```

现在我按以下方式分配内存：

```
g_ppRecords = (pStudentRecord*) malloc (sizeof(pStudentRecord*) *(g_numRecords));       /*allocate required memory for the array of pointers to instances of pStudentRecord*/

/*populate the data structure with records from the text file*/
while (count<g_numRecords)
{   
    fscanf(g_pf,"%s %s %i %f\n",&fn,&ln,&i,&m);

    /*allocate memory for each student record. the pointer to each of these will be stored in the array g_ppRecords*/
    g_ppRecords[count]=(pStudentRecord)malloc(sizeof(char*)*2+sizeof(int)+sizeof(float));

    /*allocate memory for the firstName and lastName on the heap for each record. use only as much space as is required*/
    g_ppRecords[count]->firstName=(char*)malloc(strlen(fn));
    g_ppRecords[count]->lastName=(char*)malloc(strlen(ln));

    /*assign values stored in local variables to the ones on heap for each record*/
    strcpy(g_ppRecords[count]->firstName,fn);
    strcpy(g_ppRecords[count]->lastName,ln);
    g_ppRecords[count]->id=i;
    g_ppRecords[count]->mark=m;

    ++count; /*onto next record*/
} 
```

但是我无法释放它。这就是我正在做的事情：

```
while (count<g_numRecords)
{
        /*copy variables in the struct instance into local variables*/
    strcpy(fn,g_ppRecords[count]->firstName);
    strcpy(ln,g_ppRecords[count]->lastName);
    id=g_ppRecords[count]->id;
    mark=g_ppRecords[count]->mark;

    free(g_ppRecords[count]->firstName);
    g_ppRecords[count]->firstName=NULL;
    free(g_ppRecords[count]->lastName);
    g_ppRecords[count]->lastName=NULL;
    free(g_ppRecords[count]);

    ++count;

    #ifdef DEBUG
        printf("\n%s %s %d %.2f",fn,ln,id,mark);
    #endif

    /*detect any errors while writing to file*/
    if(fprintf(g_pf,"%s %s %d %.2f\n",fn,ln,id,mark) ==-1)
        perror("");
    else{
        #ifdef DEBUG
            printf("success");
        #endif
    }

    #ifdef DEBUG
        printf("return val=%d",now);
    #endif
}

    free(g_ppRecords);  /*free memory after writing to file is complete*/
    g_ppRecords=NULL;   /*make pointer point to NULL*/
    fclose(g_pf);       /*close file stream*/
} 
```

我知道这可能与分配内存有关：

```
g_ppRecords[count]=(pStudentRecord)malloc(sizeof(char*)*2+sizeof(int)+sizeof(float)); 
```

但我无法将其分配为

```
g_ppRecords[count]=(pStudentRecord)malloc(sizeof(pStudentRecord)); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:41:25.087

您的代码应如下所示：

```
typedef struct 
{
    char* firstName;
    char* lastName;
    int id;
    float mark;
} StudentRecord;

/* Allocate memory for each student record. */
g_ppRecords[count] = (StudentRecord*)malloc(sizeof(StudentRecord));

/* Allocate memory for the firstName and lastName on the heap. */
g_ppRecords[count]->firstName = (char*)malloc(strlen(fn)+1);
g_ppRecords[count]->lastName = (char*)malloc(strlen(ln)+1); 
```

您没有为字符串中的训练零分配空间，这会破坏内存。最好在`sizeof(struct)`为记录本身分配空间时使用。此结构可能在字段之间或整个记录之后有一些填充，这些填充可能不包含在您的大小计算中。

如果你不能改变你的标题，你应该写：

```
pStudentRecord DummyPtrVar;
g_ppRecords = (pStudentRecord*)malloc(sizeof(*DummyPtrVar)*g_numRecords); 
```

`pStudentRecord*`在 sizeof 下写入是不正确的。这将创建双指针而不是访问记录本身。C/C++ 不允许简单访问指向的类型。但是如果你定义了一个变量，你可以做一个伪解引用。这并不整洁，但我相信 99% 的编译器都可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:43:40.857

我认为您的代码的主要问题是 g_ppRecords 的分配，

```
"g_ppRecords = (pStudentRecord*) malloc (sizeof(pStudentRecord*) *(g_numRecords));" 
```

应该改为

```
"g_ppRecords = (pStudentRecord*) malloc (sizeof(pStudentRecord) *(g_numRecords));" 
```

当然，正如@Kirill 所说，char 数组应该留下更多的字节来包含'\ n'。

# python - 构建 HTML Diff/Patch 算法

> ID：12649740
> 
> 赞同：18
> 
> 时间：2012-09-29T03:44:24.527
> 
> 标签：python, html, algorithm, html-parsing, diff

我将要完成的任务的描述：

*   输入 2（N 不是必需的）HTML 文档。
*   标准化 HTML 格式
*   区分这两个文档——外部样式并不重要，但文档内联的任何内容都将包括在内。
*   在 HTML 块元素级别确定 delta。

扩展最后一点：

想象一下同一站点的两个页面，它们都与可能是已复制/粘贴的共同祖先共享一个侧边栏。每个页面的侧边栏都有一些小的变化。diff 将显示这些更改，然后我可以“走”DOM 以找到它们共享的第一个公共块元素，或者只是默认为`<body>`. 在这种情况下，我想走过去发现，哦，他们有一个共同点`<div id="sidebar">`。

我对 DaisyDiff 很熟悉，而且应用程序也很相似——在 CMS 世界中。

我也开始使用 google diff-patch 库。

我想提出这种非特定的问题，希望能征求任何人认为可能有帮助的建议或指导。目前，如果您用枪指着我说“编写代码”，我会用 Python 重写 DaisyDiff 并添加这个块级逻辑。但我想也许有更好的方法和答案[任何人都有渲染 HTML 的差异算法？](https://stackoverflow.com/questions/31722/anyone-have-a-diff-algorithm-for-rendered-html)让我感到温暖和模糊。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T17:24:22.047

如果您打算从头开始，一个有用的搜索词将是“tree diff”。

[这里](http://useless-factor.blogspot.com/2008/01/matching-diffing-and-merging-xml.html)有一篇非常棒的博客文章，虽然我只是通过谷歌搜索“daisydiff python”找到了它，所以我敢打赌你已经看过了。除了所有有趣的理论内容之外，他还提到了[Logilab 的`xmldiff`](http://www.logilab.org/859)存在，这是一种用 Python 编写的开源 XML 不同。这可能是一个不错的起点——可能不如尝试包装或重新实现 DaisyDiff 正确，但可能更容易快速启动和运行。

pypi上还有[html-tree-diff](http://pypi.python.org/pypi/html-tree-diff/0.1.2)，我通过这个 Quora 链接找到了它：[http ://www.quora.com/Is-there-any-good-Python-implementation-of-a-tree-diff-algorithm](http://www.quora.com/Is-there-any-good-Python-implementation-of-a-tree-diff-algorithm)

在 cstheory.stackexchange 上有一些关于树的[有效差异算法和 Levenshtein 距离的树差异](https://cstheory.stackexchange.com/questions/10205/efficient-diff-algorithm-for-trees-and-levenshtein-distance)的理论资料。

顺便说一句，为了澄清一下，您*是*在谈论区分两个 DOM 树，但不一定将 diff/merge 渲染回任何特定的 HTML，对吗？**（编辑：对。）**这里很多措辞相似的问题实际上是在问“我如何将删除的行涂成红色并将添加的行涂成绿色”或“我怎样才能使匹配的段落在视觉上对齐”，跳过理论“我如何首先区分两个 DOM 树”的困难部分和“我如何在此之前将可能格式错误的 HTML 解析成 DOM 树”的实际困难部分。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:52:53.993

我知道这个问题与 python 有关，但您可以查看 3DM - XML 3-way Merging and Differencing Tool（java 中的默认实现），但这里是描述使用的算法的实际论文[http://www.cs.hut。 fi/~ctl/3dm/thesis.pdf](http://www.cs.hut.fi/~ctl/3dm/thesis.pdf)，这里是该[站点](http://tdm.berlios.de/3dm/doc/index.html)的链接。

这样做的缺点是您必须清理文档并能够将其解析为 XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T13:15:29.977

您可以先使用[beautifulsoup](http://www.crummy.com/software/BeautifulSoup/)来解析这两个文档。

然后你有一个选择：

*   用于`prettify`将两个文档呈现为或多或少标准化的 HTML 和`diff`那些。
*   比较[分析树](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Navigating%20the%20Parse%20Tree)。

后者允许您例如丢弃仅影响演示而不影响内容的元素。前者可能更容易。

# javascript - 我是否需要通过 Internet 运行网站才能使用 Google API 访问 Google 分析数据

> ID：12649742
> 
> 赞同：0
> 
> 时间：2012-09-29T03:45:01.153
> 
> 标签：javascript, google-analytics, google-api

我是谷歌分析 API 的新手。我想使用它的 API 访问我的谷歌分析数据。我有一个本地网站，它通过 LAN 部署在 IIS 上。使用这个设置我可以使用它的 API 访问谷歌分析数据，或者我需要一个在互联网上运行的网站。如果是的，请建议如何使用 javascript 来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:06:24.173

每当有人访问您的 HTML 页面（不需要在网络上）时，谷歌分析就会向谷歌服务器发送信息。但是，您需要访问互联网才能将数据发送到 Google 服务器。如果您在 Google Analytics 上注册了一个帐户，您可以跟踪任何“网站”，只需将以下代码添加到您希望跟踪的任何页面（在`</head>`标签之前，如 Google 所说）：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'TrackingID']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

`TrackingID`必须替换为您的 Google Analytics（分析）帐户的跟踪 ID 。

# segmentation-fault - 尝试将值分配给 __u32 类型时出现分段错误

> ID：12649744
> 
> 赞同：-1
> 
> 时间：2012-09-29T03:45:37.487
> 
> 标签：segmentation-fault

我的代码如下

```
 struct packetheader
    {
       __u16 fcf;
       __u8 seq;
       __u8 dest[16];
       __u8 src[16];
      #if defined dis   
       __u32 dispatch;
      #endif
    }
    struct packetheader* uncompressed()
    {
       struct packetheader *pkhdr;
       pkhdr->dispatch=0x00000000;//segmentation fault
       return pkhdr;
     } 
```

尝试将值分配给 __u32 类型的调度时出现分段错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T03:51:52.690

问题是 pkhdr 未初始化。pkhdr 是一个指针，因此默认情况下它不指向任何内容。您需要静态分配对象并将其地址分配给 pkhdr，或者动态分配对象并将其分配给 pkhdr。

例子：

```
struct packetheader *pkhdr = malloc(sizeof(struct packetheader)); 
```

# ios - ios5，ABPersonViewController - 更新人员记录时通知？

> ID：12649746
> 
> 赞同：0
> 
> 时间：2012-09-29T03:45:55.667
> 
> 标签：ios, ios5, abpersonviewcontroller

我有一个 UITableViewCell 显示通讯簿中的人名。选择该单元格后，将使用 ABPersonViewController 显示此人的信息（编辑处于打开状态）。

我想要做的是，如果编辑了这个人的名字或姓氏，然后在主 UITableView 中更新该信息。

是否有任何通知或委托可用于传达该信息已更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:11:30.500

我在这方面找不到任何东西，所以我只是`reloaded my table`.

如果有人可以通过委托或其他方式提出任何更好的解决方案，那就太好了。

# javascript - JSLint 错误“前导小数点可能与点混淆”

> ID：12649748
> 
> 赞同：16
> 
> 时间：2012-09-29T03:46:54.717
> 
> 标签：javascript, jslint

我正在使用 jslint.com 来验证一些函数并遇到错误：

> “前导小数点可能与点混淆”

触发错误的行如下：

```
if ( myvar = .95 ){ 
```

我该如何纠正？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-29T03:50:39.410

很简单，在点前加一个零。我猜 JSLint 抱怨是因为点也用于对象属性，所以它可能会混淆。另外，您缺少等号，但在 JS 中建议使用三等号：

```
if (myvar === 0.95) { ... } 
```

现在 JSLint 不会再抱怨了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-29T03:50:34.200

这不是真正的 Javascript 错误。Javascript 在没有前导 0 的情况下可以正常工作。但是，为了防止 JSLint 显示该错误，只需添加前导 0：

```
if ( myvar = 0.95 ){ 
```

它更清楚，但实际上不是必需的。

* * *

你确定你没有尝试使用两个等号，如`==`? `=`运算符用于赋值，而运算`==`符用于比较。

# c++ - 为什么discard的参数是unsigned long long类型？

> ID：12649752
> 
> 赞同：0
> 
> 时间：2012-09-29T03:48:03.823
> 
> 标签：c++, visual-c++, c++11

我自己正在实现一个随机数引擎（不，我没有发明一个）并且想知道如果参数为负数应该怎么做。所以我检查了 mersenne_twister_engine 的代码，发现了这个：

```
void discard(unsigned long long _Nskip)
{   // discard _Nskip elements
    for (; 0 < _Nskip; --_Nskip)
        (*this)();
} 
```

无符号类型在这些地方不危险吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T03:51:24.940

只有当条件是 时才危险`x <= 0`。 `x > 0`（或`0 < x`）是安全的。

基本上你必须避免的是从 0 中减去（更具体地说，你需要它这样`x - y >= 0`）。for 语句将最后一次执行，如果循环检查是否等于 0，那将是一个问题（0 - 1 通常 = 最大值）。只要 1 是结束条件，减去 1 即可 ( `1 - 1 >= 0`)。

编辑：再次阅读您的问题后，我不确定我是否解决了实际问题（我认为您可能在 5 分钟的窗口内进行了编辑？或者我只是没有阅读它。））

无论如何，David Rodriguez 提到了它未签名的原因：丢弃负数的元素没有意义。（另外，如果你确实设法将一个负值传递给那个[以它的形式]，那将是一个巨大的正数的位模式，并且会发生糟糕的、糟糕的事情。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:39:22.817

有些人喜欢使用`unsigned`只存储正数的变量。其他一些人不想`unsigned`用来表示那个意思。

这是一个经常被讨论的话题。我在后一个阵营：我不会`unsigned`在这样的参数中使用。例如，当我为 -like 类编写`size()`函数时，我使用，即使大小永远不会小于 0。`list``int`

如果您愿意，使用断言或测试并抛出来拒绝负值`int`似乎是合适的。阵营中的人`unsigned`会说，当你传递一个负值时，编译器应该在调用端发出警告。你可以继续争论，我相信你会在互联网上找到很多。

# tridion - 从文件夹和子文件夹中读取所有组件

> ID：12649753
> 
> 赞同：1
> 
> 时间：2012-09-29T03:48:52.600
> 
> 标签：tridion, tridion2009

我正在使用 .NET Templating C# 2.0 开发 Tridon 2009

我需要从文件夹及其子文件夹中读取所有组件。

如果在我的代码中我写：

```
OrganizationalItem imageFolder = 
    (OrganizationalItem)m_Engine.GetObject(comp.OrganizationalItem.Id); 
```

我能够从指示器组件所在的位置读取子文件夹中的所有组件，但我无法读取指示器所在文件夹中的其他组件。

但如果我写

```
OrganizationalItem imageFolder = (OrganizationalItem)m_Engine.GetObject(
                                comp.OrganizationalItem.OrganizationalItem.Id); 
```

然后我只能读取存在指标组件的文件夹。

下面是我的代码。

```
XmlDocument doc = xBase.createNewXmlDocRoot("ImageLibrary");
XmlElement root = doc.DocumentElement;

Filter filter = new Filter();
Component comp = this.GetComponent();

filter.Conditions["ItemType"] = ItemType.Folder;
filter.Conditions["Recursive"] = "true";

OrganizationalItem imageFolder = 
       (OrganizationalItem)m_Engine.GetObject(comp.OrganizationalItem.Id);            
XmlElement itemList = imageFolder.GetListItems(filter);

foreach (XmlElement itemImg in itemList)
{
    filter.Conditions["ItemType"] = ItemType.Component;
    filter.Conditions["BasedOnSchema"] = comp.Schema.Id;

    OrganizationalItem imgFolder = 
       (OrganizationalItem)m_Engine.GetObject(itemImg.GetAttribute("ID")
       .ToString());
    XmlElement imageLibs = imgFolder.GetListItems(filter);

    doc = this.createImageNodes(imageLibs, doc, filter, comp);
    foreach (XmlElement imglib in imageLibsList)
    {
        XmlElement imageroot = doc.CreateElement("Image");
        XmlElement uploadeddateNode = doc.CreateElement("DateUploaded");
        Component imgComp =    
                (Component)m_Engine.GetObject(imglib.GetAttribute("ID"));
    }
} 
```

请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T10:58:40.837

我在您的代码段上看到了很多关于“从文件夹和子文件夹中读取所有组件”这个问题的多余代码

但是在你做的时候回答这个问题本身：

```
OrganizationalItem imageFolder = (OrganizationalItem)m_Engine.GetObject(comp.OrganizationalItem.Id); 
```

您无法读取该文件夹中存在的组件，因为您之前仅在以下行将过滤器设置为文件夹：

```
filter.Conditions["ItemType"] = ItemType.Folder; 
```

**解决方案：**

如果要检索“指标组件”文件夹及以下的所有组件，则需要在第一次搜索时设置过滤器，如下所示：

```
filter.Conditions["Recursive"] = "true";
filter.Conditions["ItemType"] = ItemType.Component;
filter.Conditions["BasedOnSchema"] = comp.Schema.Id; 
```

并执行搜索：

```
OrganizationalItem imageFolder = (OrganizationalItem)m_Engine.GetObject(comp.OrganizationalItem.Id);            
XmlElement itemList = imageFolder.GetListItems(filter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:55:39.987

很基本的东西。尽量避免使用`Filter`类，因为它在 2009 年被弃用，并尽可能多地使用 GetListItems，因为获取列表总是更快。

```
public class GetComponentsInSameFolder : ITemplate
{
    public void Transform(Engine engine, Package package)
    {
        TemplatingLogger log = TemplatingLogger.GetLogger(GetType());
        if (package.GetByName(Package.ComponentName) == null)
        {
            log.Info("This template should only be used with Component Templates. Could not find component in package, exiting");
            return;
        }
        var c = (Component)engine.GetObject(package.GetByName(Package.ComponentName));
        var container = (Folder)c.OrganizationalItem;
        var filter = new OrganizationalItemItemsFilter(engine.GetSession()) { ItemTypes = new[] { ItemType.Component } };

        // Always faster to use GetListItems if we only need limited elements
        foreach (XmlNode node in container.GetListItems(filter))
        {
            string componentId = node.Attributes["ID"].Value;
            string componentTitle = node.Attributes["Title"].Value;
        }

        // If we need more info, use GetItems instead
        foreach (Component component in container.GetItems(filter))
        {
            // If your filter is messed up, GetItems will return objects that may
            // not be a Component, in which case the code will blow up with an
            // InvalidCastException. Be careful with filter.ItemTypes[]
            Schema componentSchema = component.Schema;
            SchemaPurpose purpose = componentSchema.Purpose;
            XmlElement content = component.Content;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T04:55:50.580

我认为您想收集子文件夹并为每个子文件夹递归调用您的函数，这似乎是您想要实现的目标。

这个函数是否称为 createImageNodes()，你在哪里设置 imageLibsList？

看起来您在第一个循环中将每个项目视为一个文件夹，那么组件呢？

# javascript - 灯箱——>引擎盖下有什么？

> ID：12649759
> 
> 赞同：2
> 
> 时间：2012-09-29T03:50:19.270
> 
> 标签：javascript, html, css

我以前从未使用过灯箱，但最近开始考虑在我的网站上使用类似的功能。我发现了大量的 jquery 库和各种附加组件，但我非常喜欢编写自己的代码。当我开始深入研究时，我惊讶地发现它似乎只是一个隐藏的 html 元素，当触发 Javascript 事件侦听器时会显示该元素。我是对的吗？有没有更多的东西？

只是想知道它是如何工作的。预先感谢您的考虑。

**更新**

很好的答案！我同意了 Ana 的回应，因为有关设计的其他考虑不言而喻。就机制而言，它确实看起来确实是一个非常低调的设备。感谢所有阅读，评论和回复的人......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:44:12.413

不，真的没有更多的东西。但是，除非您不想将 JavaScript 用于您的灯箱，否则我并没有真正看到从一开始就有 HTML 元素的意义，从您的标签来看，我认为这里不是这种情况，我我不喜欢在*实际*项目中使用，尽管我认为它可以做到真的很酷。

如果您仍然使用 JavaScript 来显示灯箱（这意味着如果 JavaScript 被禁用，即使它存在，您的灯箱也不会显示，从一开始就加载......所以如果可以的话为什么要加载它'不显示它？），那么最好仅在您第一次希望打开灯箱时才创建灯箱元素（以及其中的所有内容，然后将其附加到页面）。

我的意思是您将点击处理程序附加到链接（实际上，我会将其附加到容器，然后检查单击了什么，如果它是链接，请查看它是什么链接并走得更远）并检查是否你有一个灯箱元素。如果你不这样做，那么你就在现场创建它。如果您已经这样做了，那么您只需将其显示为单击该特定链接所需的任何内容。

图片库的[**基本灯箱示例**](http://codepen.io/thebabydino/pen/Gomwg)。

画廊的**HTML**结构将是：

```
<section class='gallery' id='gallery'>
  <a href='images/large_0.jpg' class='thumb'>
    <img class='thumb-img' src='images/small_0.jpg'>
  </a>
  <!-- as many more as you wish -->
</section> 
```

的**CSS**：

```
/* gallery with thumbnails */
.gallery { text-align: center; }
.gallery .thumb, .gallery .thumb-img {
  display: inline-block;
  width: 10em;
  height: 5.6em;
}
/* lightbox */
.lightbox {
  z-index: 999; /* some ridiculously large value to make sure it's on top */
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
  background: rgba(0,0,0,.5);
  cursor: pointer;
  text-align: center;
}
.lightbox:before { /* strictly for vertical centering of large image */
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  content: '';
}
/* add/ remove this class to toggle display */
.hidden { display: none; }
.large { /* the large image */
  max-width: 100%;
  max-height: 100%;
  vertical-align: middle;
} 
```

的**JavaScript**：

```
var g = document.getElementById('gallery');

String.prototype.endsIn = function(suffixes) { /*just to check the extension*/
  for(i in suffixes) {
    if(this.indexOf(suffixes[i], this.length - suffixes[i].length) !== -1)
      return true;
  }
  return false;
};

g.addEventListener('click', function(e){
  var target = e.target, lnk, ext = ['.jpg', '.png'], lightbox, large;
  if(!target.classList.contains('thumb-img')) return;
  else {
    lnk = target.parentNode.href;
    if(!lnk.endsIn(ext)) return;
    else {
      lightbox = document.getElementById('lightbox');
      if(lightbox == null) {
        lightbox = document.createElement('div');
        lightbox.setAttribute('id', 'lightbox');
        lightbox.classList.add('lightbox');
        lightbox.innerHTML = "<img src='"+ lnk +"' id='large' class='large'>";
        document.body.appendChild(lightbox);
        lightbox.addEventListener('click', function(ev) {
          var target = ev.target, next, links = g.querySelectorAll('.thumb'), 
              len = links.length, large = document.getElementById('large');
          if(target.id == 'lightbox') lightbox.classList.add('hidden');
          else if(target.id == 'large') {
            for(var i = 0; i < len; i++) {
              if(links[i].href == large.src) {
                next = links[(i++)%len].href;
                while(!next.endsIn(ext)) next = links[(i++)%len].href;
                large.src = links[i%len].href;
                break;
              }
            }
          }
        }, false);
      }
      else {
        lightbox.classList.remove('hidden');
        large = document.getElementById('large');
        large.src = lnk;
      }
      e.preventDefault();
    }
  }
}, false); 
```

# php - PHP 身份验证库

> ID：12649769
> 
> 赞同：1
> 
> 时间：2012-09-29T03:51:58.947
> 
> 标签：php, mysql, database, pdo, user-registration

我正在尝试实现我网站的用户登录部分。我认为仅使用库而不是编写 1000 行代码来重新发明轮子会容易得多。所以我只是想得到stackoverflow的意见，什么是最好的php用户登录认证库。我一直在环顾四周（usercake，kohana），但其中很多看起来像是某人的高中项目，而不是完全支持和开发的库。此外，他们似乎正在使用已弃用的 mysql 注入，我想使用 PDO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:23:05.353

试试`PEAR`[`OpenID`](http://pear.php.net/package/OpenID)包。

也检查其他`PEAR`[`Authentication`](http://pear.php.net/packages.php?catpid=1)包。

# ios - iOS无法识别的选择器发送到实例以从模态视图回调

> ID：12649770
> 
> 赞同：0
> 
> 时间：2012-09-29T03:52:27.083
> 
> 标签：ios, modalviewcontroller, unrecognized-selector, performselector

我打电话给：

```
emailDetailView.navigationItem.leftBarButtonItem =
    [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel
                                                  target:self 
                                                  action:@selector(cancel)];

emailDetailView.navigationItem.rightBarButtonItem =
    [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone
                                                  target:self
                                                  action:@selector(emailAddressSelected:emailAddressReturned:)];

UINavigationController *emailDetailNavCon = [[UINavigationController alloc] initWithRootViewController:emailDetailView];

[self presentModalViewController:emailDetailNavCon animated:YES] ; 
```

这是我选择的方法引用：

```
-(void) emailAddressSelected:(NSString *)emailAddressSelectedString {
    NSLog(@"emailAddressSelected is %@", emailAddressSelectedString);
    emailAddressReturned = emailAddressSelectedString;
    [self performSelector:@selector(showMailComposeController)];
}

-(void)cancel {
    [self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:1] 
                                          animated:YES];
} 
```

从子视图上的按钮（取消或完成）回调都没有达到我的预期。

我试图弄清楚如何单击子模式视图取消按钮关闭模式视图并显示父视图。

我还试图弄清楚如何在子模式视图中单击“完成”按钮来执行该`emailAddressSelected:(NSString *)emailAddressSelectedString`方法。

现在对该`emailAddressSelected:(NSString *)emailAddressSelectedString`方法的调用正在生成“无法识别的选择器发送到实例”错误。

我已经尝试了以前问题的许多变体，但仍然得到错误或没有得到我期望的按钮操作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T03:59:30.653

不确定您的取消选择器有什么问题，但您的完成选择器不正确。应该

```
@selector(emailAddressSelected:) 
```

但它不会将 NSString 传递给您那里的方法。它将传递发送者，在您的情况下是 UIBarButtonItem。

所以应该是

```
 -(void) emailAddressSelected:(UIBarButtonItem * )sender 
```

# objective-c - 调用数组方法

> ID：12649771
> 
> 赞同：-3
> 
> 时间：2012-09-29T03:52:40.720
> 
> 标签：objective-c, xcode

我有这个方法，我正在尝试调用该方法，`[self getUsers ObjectAtIndex:0]`但编译器根本不会编译该行并说它是未知的。如何调用数组方法来显示其中的所有字符串？

```
- (NSArray*)getUsers 
```

{

```
NSArray *getUsers = [[NSArray alloc] init];
NSString *databasepath;

NSString *docsDir;
NSArray *dirPaths;
//NSString *databasePath;

//get the document directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];

//build the path to the database file
databasepath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent:
                                                  @"users.db"]];

const char *dbPath = [databasepath UTF8String];
sqlite3_stmt *statement;
sqlite3 *userdb;

if (sqlite3_open(dbPath, &userdb) == SQLITE_OK)
{
    NSString *querySQL = [NSString stringWithFormat:@"SELECT * FROM USERS WHERE username = \"%@\"", txtUsername.text];
    const char *sql_stmt = [querySQL UTF8String];
    if (sqlite3_prepare_v2(userdb, sql_stmt, -1, &statement, NULL) == SQLITE_OK)
    {
        while (sqlite3_step(statement) == SQLITE_ROW)
        {
            char *field = (char*) sqlite3_column_text(statement, 1);
            NSString *usernameField = [[NSString alloc]initWithUTF8String:field];
            //NSLog(@"%@", usernameField);
            getUsers = [NSArray arrayWithObject:usernameField];

        }

    }
    sqlite3_finalize(statement);
}

sqlite3_close(userdb);

return getUsers; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:53:51.330

使用`[[self getUsers] objectAtIndex:0]`.

如果你使用最新的 Xcode/clang 版本，你也可以使用`[self getUsers][0]`，因为数组现在支持索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:11:52.857

假设你有一个方法 -(id)someMethod，然后像这样调用它：

```
id myValue = [self someMethod]; 
```

在 someMethod 内部，有一个 return 语句 - return 右侧的内容将在调用方法或函数中分配给 myValue。

只需像这样调用：

```
NSArray *arrAllUsers = [self getUsers]; //As getUsers is method which returns nsarray. 
```

# c# - C#图片框的加载时间

> ID：12649774
> 
> 赞同：2
> 
> 时间：2012-09-29T03:54:30.950
> 
> 标签：c#, winforms

游戏画面背景包含大量图片框，启动、最小化、移动后需要2-3秒才能完全显示背景。这段代码对我的目的有害吗？还有另一种方法可以做到这一点吗？谢谢你。这是代码：

```
public class gameArea
{
    private Panel gameArea;
    private MemoryStream ms;

    public gameArea(Panel gameArea)
    {
        this.gameArea = gameArea;
    }

    public void setBackground()
    {
        byte[] b_grass = File.ReadAllBytes(ImageFile.grassBG);
        byte[] b_tree = File.ReadAllBytes(ImageFile.tree);
        byte[] b_sea = File.ReadAllBytes(ImageFile.sea);

        // [650/50=13, 550/50=11]
        int[,] tile_id = { 
                         { 1, 2, 0, 0, 0, 1, 1, 0, 1, 2, 1, 2, 0 },
                         { 2, 1, 0, 1, 0, 1, 1, 2, 2, 2, 1, 2, 0 },
                         { 1, 2, 0, 0, 0, 2, 1, 2, 1, 2, 1, 2, 1 },
                         { 1, 2, 0, 0, 1, 0, 1, 0, 1, 2, 0, 0, 0 },
                         { 1, 0, 2, 0, 0, 1, 1, 2, 1, 2, 1, 2, 0 },
                         { 2, 2, 0, 1, 0, 1, 2, 1, 0, 2, 0, 1, 1 },
                         { 1, 1, 2, 0, 0, 0, 1, 2, 1, 1, 2, 0, 0 },
                         { 0, 2, 0, 2, 1, 2, 1, 0, 1, 2, 1, 2, 2 },
                         { 1, 2, 0, 0, 0, 1, 0, 2, 0, 0, 1, 2, 0 },
                         { 0, 2, 0, 1, 0, 1, 1, 2, 1, 2, 0, 0, 2 },
                         { 1, 1, 1, 0, 0, 0, 1, 2, 1, 2, 1, 2, 0 }
                         };
        // tree id = 1
        // sea id = 2

        this.ms = new MemoryStream(b_grass);
        this.gameArea.BackgroundImage = Image.FromStream(ms);
        this.gameArea.BackColor = System.Drawing.Color.Transparent;

        for (int yIndex = 0, y = 0; y < this.gameArea.Height; y += 50, yIndex++)
        {
            for (int xIndex = 0, x = 0; x < this.gameArea.Width; x += 50, xIndex++)
            {
                switch (tile_id[yIndex, xIndex])
                {
                    case 1:
                        {
                            setTile(b_tree, x, y);
                            break;
                        }
                    case 2:
                        {
                            setTile(b_sea, x, y);
                            break;
                        }
                    default:
                        {
                            break;
                        }
                }
            }
        }
    }

    private void setTile(byte[] b_img, int x, int y)
    {
        this.ms = new MemoryStream(b_img);
        PictureBox pic = new PictureBox();
        pic.Image = Image.FromStream(ms);
        pic.Size = new Size(50, 50);
        pic.Location = new Point(x, y);
        this.gameArea.Controls.Add(pic);
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:03:02.707

对于这样的项目，恐怕你能做的不多。Visual C# 并不是真正为游戏设计的，但有几种方法可以加快速度。

1.）如果您的游戏不需要更改背景，请先加载它并仅重置您需要的图片（可能在标记值中使用布尔值来确定是否应该重绘。）

2.) 使用[线程](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx)。如果您启动 5 个线程，您的渲染可能会加快 3 倍左右。

3.) 在您的构造函数中将您的三个图像转换为 Image 对象，这样您就不需要为每个图块转换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:05:52.390

为什么不创建一个大位图并将您的小图像复制到其中，而不是许多图片框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T07:36:44.263

我发现（重新）绘制许多图片框的最快方法是将它们全部设置在面板上并为面板设置 visible = false 。完成后，面板的图片框设置为 true。当在我的应用程序中使用大约 400 个用于围棋游戏的图片框调整窗口大小时，重绘期间这大约是 50 次。

我在它下面有一个 pabel，它变得可见，就像一个快速闪光灯设置为相同的一般颜色，所以你看不到从图片框的一般颜色到白色背景的闪烁。

# cocoa - Cocoa：接收已运行应用程序的停靠图标点击

> ID：12649775
> 
> 赞同：2
> 
> 时间：2012-09-29T03:54:46.443
> 
> 标签：cocoa, nswindowcontroller

我正在编写一个应用程序启动时显示主窗口的应用程序。当窗口关闭时，我希望应用程序继续运行（使用菜单栏菜单），如果用户再次单击停靠图标，我希望再次显示主窗口。

我已经完成了大约 90% 的路程：在使用 Cmd-W 关闭主窗口后，我的应用程序继续正常运行，并且由于未选中“关闭时释放”，因此窗口可能是 [makeKeyAndOrderFront:]-ed 来显示它再次单击停靠图标时。

这个难题中唯一缺少的部分是拦截实际的停靠图标点击。

关于这个主题的其他线程建议在窗口控制器中实现 applicationShouldHandleReopen:hasVisibleWindows: 或 applicationShouldOpenUntitledFile: 。我都做过，没有一个被叫到。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T07:03:43.453

> 关于这个主题的其他线程建议在窗口控制器中实现 applicationShouldHandleReopen:hasVisibleWindows: 或 applicationShouldOpenUntitledFile: 。

仅当窗口控制器是应用程序的委托时才如此。这是应用程序向其发送这些消息的对象。

不过，我不会让窗口控制器成为应用程序的代表。我通常使它们成为两个独立的对象。将一个对象专门设置为应用程序的委托，当该对象接收到相关委托消息时，向您的窗口控制器发送一条消息，告诉它做它需要做的任何事情。

实际上，我通常在单窗口应用程序中所做的就是让应用程序的委托创建并拥有窗口控制器。您可以通过丢弃 WC 来响应窗口关闭，并通过检查您是否有 WC 并创建一个（从而重新打开窗口）如果没有来响应重新打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:00:32.197

`[NSApp setDelegate:self];`中使用`awakeFromNib`。

# windows - 命名管道 Matlab

> ID：12649778
> 
> 赞同：1
> 
> 时间：2012-09-29T03:56:26.230
> 
> 标签：windows, matlab, named-pipes

我无法找到在 matlab 中创建名为管道的窗口的示例。

关于如何编程或在哪里看的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T00:41:11.213

使用 .NET 的[System.IO.Pipes](http://msdn.microsoft.com/en-us/library/system.io.pipes.aspx)可能是开箱即用的最简单方法，比编写 MEX 文件来调用 Win32 API 更容易。Matlab 允许您直接从 M 代码调用 .NET，并且对对象进行管理，因此资源清理会更容易。.NET 3.5 和更新版本支持命名管道。

生成的 M 代码看起来像这样。（抱歉；我目前没有 Matlab，所以无法测试。）

```
NET.addAssembly('System.Core'); %# might be superfluous
pipeStream = System.IO.Pipes.NamedPipeServerStream('testpipe', System.IO.Pipes.PipeDirection.Out); 
```

如今，我认为 .NET 是访问 Matlab 不直接公开的本机 Windows 功能的最简单方法。因此，对于这样的事情，首先要尝试的是寻找在 C# 中执行此操作的示例。如果可以使用 .NET 标准库功能在 C# 中完成，您通常可以将其直接转换为 M 代码。例如，我通过谷歌搜索“创建命名管道 .net”并获取[此示例](http://www.switchonthecode.com/tutorials/dotnet-35-adds-named-pipes-support)找到了这个。Loren 在[这里](http://blogs.mathworks.com/loren/2010/12/07/using-microsoft-net-to-expand-matlab-capabilities/)讨论了这种技术。

# big-o - Big-Oh 分析运行时间？

> ID：12649781
> 
> 赞同：-6
> 
> 时间：2012-09-29T03:57:30.563
> 
> 标签：big-o

对于以下每个程序片段，给出运行时间的 Big-Oh 分析。我有两个问题，我不是 100% 确定是否正确，有人可以帮助我吗

片段 1：

```
for( int  i  =  0;  i  <  n;  i++ )
      for(  int  j  =  0;  j  <  n  *  n;  j++ )
            for(  int  k  =  0;  k  <  j;  k++ )
                 sum++; 
```

答案：O(n^5) 不确定 n*n??

片段 2：

```
for(  int  i  =  1;  i  <=  n;  i++ ) 
        for(  int  j  =  1;  j  <=  i  *  i;  j++ )
                             if (j % i == 0)
                   for(  int k  =  0;  k  <  j;  k++)
                  sum++; 
```

答案：O(n^4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:27:28.080

分解每个循环的问题空间。从最外层循环开始。真正的循环是什么？

对于第一个问题，我们有以下模式。

*   外循环将运行*n*次。
*   外部内部循环将运行*n ²*次，并且不受内部循环当前值的约束。
*   最内层循环最多运行*j*次，这导致它受外部内层循环的当前值约束。
*   您的所有步骤都是线性块，这意味着您将以线性方式从 0 到结束条件。

这是总和的实际样子。

![线性求和，不跳过或跨过任何东西。](../Images/bea3293e42569f55dc72565e6ab909f2.png)

那么，这会转化为什么呢？你必须展开总和。不过，它不会是 O(n ⁵ )。

对于第二个问题，我们有以下模式。

*   外部循环最多运行 n 次（包括*n*次）。
*   外部内部循环最多运行 i 次（包括*i^次*）。
*   最里面的循环最多运行*j*次，条件是`j % i == 0`. 这意味着不是*每次都*执行最里面的循环。

我会把这个问题留给你解决。您确实必须采取展开总和并将它们减少为代数对应物的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T04:34:20.297

对于片段 1：

```
 lets say m = n^2
 Sigma(i=0...n)  m Sigma(j=0.....m) j
 => n * (m(m+1)/2)
 => n ^ 5 
```

答案：O(n^5)

对于片段 2：

```
last loop runs for i-1 times ...
Sigma(i=0...n)  Sigma(j=0.....i-1) Sigma(k=0.....j) k
approximately its Sigma(i=0...n) i^2 
~=> n^3 
```

答案：O(n^3)

# asp.net-mvc-3 - C#，MVC3，如何将非泛型 DBSet 与运行时定义的类型一起使用？

> ID：12649783
> 
> 赞同：2
> 
> 时间：2012-09-29T03:57:34.673
> 
> 标签：asp.net-mvc-3, entity-framework-4, ef-code-first, dbset

我是 MVC 和 EF 的新手。我的应用程序是一个简单的代码优先，有几个 POCO 类和一个 DBContext，如下所示：

```
 public class ExpDefContext : DbContext
   {
      public DbSet<Experiment> Experiments { get; set; }
      public DbSet<Research> Researches { get; set; }
      ... 
```

问题：我需要在我的数据模型中添加一个实体集，它的类型是在运行时根据用户输入构建的，这意味着我不知道它的数据结构。

我读到非泛型 Dbset 类就是为此而制作的，所以我添加到上下文中：

```
 public DbSet Log { get; set; } 
```

...并为接受运行时类型并设置新 Dbset 的上下文创建了一个构造函数：

```
 public ExpDefContext(Type LogRecType)
        {
            Log = Set(LogRecType);
        } 
```

（顺便说一下，该类型是使用 Reflection.Emit 构建的）。

在控制器中，我创建类型（名为 LogRec）并将其传递给新的 DBContext 实例。然后我创建一个 LogRec 实例并尝试将其添加到数据库中：

```
 Type LogRec;
    LogRec = LogTypeBuilder.Build(dbExpDef, _experimentID);
    var dbLog = new ExpDefContext(LogRec);
    var testRec = LogRec.GetConstructor(Type.EmptyTypes).Invoke(Type.EmptyTypes);
    dbLog.Log.Add(testRec);
    dbLog.SaveChanges(); 
```

我从 dbLog.Log.Add(testRec) 得到一个异常：

**实体类型 LogRec 不是当前上下文模型的一部分**

我究竟做错了什么？有没有更好的方法来做到这一点（最好不要深入实体框架）？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T14:34:17.397

我怀疑 EF 仅反映`DbSet<T>`派生中的通用属性，并在内存中创建模型时`DbContext`忽略任何非通用属性。`DbSet`

但是，另一种方法可能是使用 Fluent API`OnModelCreating`将您的动态类型作为实体添加到模型中。

首先，只有在第一次加载 AppDomain 时在内存中构建模型时，才能向模型添加类型。（每个 AppDomain 只构建一个模型。）如果除了重载的构造函数之外，您还有一个上下文的默认构造函数，并且使用此默认构造函数创建并使用了上下文实例，那么您的模型将仅使用静态类型构建，并且只要 AppDomain 存在，您就不能再将动态类型用作实体。这将导致您遇到的异常。

要考虑的另一点是数据库模式的创建。如果您的类型在编译时未知，则数据库架构在编译时是未知的。如果模型在下一次运行应用程序时由于新类型而发生更改，您将需要以某种方式更新数据库模式，方法是从头开始重新创建数据库，或者定义一个只删除`LogRec`表并创建新表的自定义数据库初始化程序根据`LogRec`类型的新布局。或者，代码优先迁移可能会有所帮助。

关于 Fluent API 的可能解决方案：

删除`DbSet`并将`Type`成员添加到上下文并覆盖`OnModelCreating`：

```
public class ExpDefContext : DbContext
{
    private readonly Type _logRecType;

    public ExpDefContext(Type LogRecType)
    {
        _logRecType = LogRecType;
    }

    public DbSet<Experiment> Experiments { get; set; }
    public DbSet<Research> Researches { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        var entityMethod = typeof(DbModelBuilder).GetMethod("Entity");
        entityMethod.MakeGenericMethod(_logRecType)
            .Invoke(modelBuilder, new object[] { });
    }        
} 
```

`DbModelBuilder`没有非泛型`Entity`方法，因此需要动态调用泛型`Entity<T>`方法。

上面的代码`OnModelCreating`是...的动态对应物

```
modelBuilder.Entity<LogRec>(); 
```

...这将与静态`LogRec`类型一起使用，并且只会使类型成为 EF 已知的实体。`DbSet<LogRec>`这与在上下文类中添加属性完全相同。

您应该能够通过使用...访问动态实体的实体集

```
context.Set(LogRecType) 
```

...这将返回一个非通用的`DbSet`.

我不知道这是否可行并且没有对其进行测试，但[这个想法来自 EF 团队成员 Rowan Miller，](http://romiller.com/2012/03/26/dynamically-building-a-model-with-code-first/)所以我有一些希望。

# php - bind_param number 参数不等于变量

> ID：12649784
> 
> 赞同：1
> 
> 时间：2012-09-29T03:57:36.150
> 
> 标签：php, mysql

我在 mysql 和 php 中出现错误我的代码：

```
$stmt->prepare("INSERT `tablename` (col1,col2,col3) VALUES (?,?,?)");
$stmt->bind_param('sss',$_POST['data'],$sub,$yaxis);
$stmt->execute(); 
```

我的错误：

```
Warning: mysqli_stmt::bind_param() [mysqli-stmt.bind-param]: Number of variables doesn't match number of parameters in prepared statement. 
```

但是我在 bind_param 中传递了 3s 和 3 个参数。为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T03:58:57.997

使用参数的索引，因为您没有按名称指定它。

```
$data = $_POST['data'];
$stmt->prepare("INSERT `tablename` (col1,col2,col3) VALUES (?,?,?)");
$stmt->bind_param(1,$data);
$stmt->bind_param(2,$sub);
$stmt->bind_param(3,$yaxis);
$stmt->execute(); 
```

但是如果你想要它的名称，那么你必须指定它的参数名称而不是使用问号

```
$data = $_POST['data'];
$stmt->prepare("INSERT `tablename` (col1,col2,col3) VALUES (:sss,:par1,:par2)");
$stmt->bind_param(":sss",$data);
$stmt->bind_param(":par1",$sub);
$stmt->bind_param(":par2",$yaxis);
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:10:56.300

你确定你有你的价值`$_POST['data']`，而不是直接将表单值传递给 bind_param 你可以检查它是否为空。另外我注意到你的插入查询是错误的

```
if(!empty($_POST['data'])){
$mydata=$_POST['data'];
}else{
$mydata='No values';
}

$stmt->prepare("INSERT into `tablename` (col1,col2,col3) VALUES (?,?,?)");//Query wrong
$stmt->bind_param('sss',$mydata,$sub,$yaxis);
$stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T04:28:33.913

好吧，$_POST 要么分配了多个变量，要么没有。

这将打印整个 $_POST 数组的内容：

```
print_r($_POST); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T03:19:47.187

好的，我知道这让我听起来很愚蠢，但错误是由脚本中更远的未定义变量引起的，我现在已经修复了。我认为它不会影响脚本的这一部分，但确实如此。发布的所有答案都很棒，但由于我的错，他们没有回答这个问题。

# c - 使用数组的 C 语言基本类数据库程序

> ID：12649789
> 
> 赞同：0
> 
> 时间：2012-09-29T03:58:43.407
> 
> 标签：c, arrays

我刚刚了解了数组。我试图创建一个使用数组的数据库程序。这是一个非常基本的程序。

```
#include<stdio.h>
#define N 1 //number of entries needed
int main()
{
    int i, k = 1, l = 1, w, x = 0, y = 0;
    int rollnum[N], hsc[N], cet[N], a[N], b[N];
    char name[100], city[100], c;
    for(i = 0; i < N; i++)
    {
        printf("%d.\n", (i+1));
        printf("Enter first name : ");
        do
        {
            c = getchar();
            if(c != '\n')
            {
            name[k] = c;
            k++;
            }
        }
        while(c != '\n');
        a[i] = k;
        k++;
        printf("\n");
        printf("Enter roll number : ");
        scanf("%d", &rollnum[i]);
        printf("\n");
        getchar();
        printf("Enter city : ");
        do
        {
            c = getchar();
            if(c != '\n')
            {
            city[l] = c;
            l++;
            }
        }
        while(c != '\n');
        b[i] = l;
        l++;
        printf("\n");
        printf("Enter HSC percentage : ");
        scanf("%d", &hsc[i]);
        printf("\n");
        printf("Enter CET marks : ");
        scanf("%d", &cet[i]);
        printf("\n");
        getchar();
    }

printf("\n\n\n");
k = 1;
l = 1;
for(i = 0; i < N; i++)
{
    printf("Entry %d\n", (i+1));
    printf("Student Name : ");
    x = (a[i] - x);
    for(w = 0; w < x; w++ && k++)
        putchar(name[k]);
    putchar('\n');
    printf("Roll number : %d", rollnum[i]);
    printf("\n");
    printf("City : ");
    y = (b[i] - y);
    for(w = 0; w < y; w++ && l++)
        putchar(city[l]);
    putchar('\n');
    printf("Marks : \n");
    printf("\t");
    printf("HSC : %d ", hsc[i]);
    printf("\t");
    printf("CET : %d / 200", cet[i]);
    printf("\n\n\n");
}
return 0;
} 
```

该程序没有按我想要的方式运行！当我输入一个名字时，第一个字母被打印了两次，城市也是如此！如果我通过修改我的 'N' 来输入 2 个条目，我会得到 name 和 address(of second entry) 的第一个字母作为垃圾值。我认为我的逻辑没有任何错误，因为我尝试在笔记本中手动进行操作，但没有发现任何错误。

谁能帮我找出错误？我知道这个程序可能根本不是很好和有效的，但我只是在尝试我学到的东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:06:08.150

您在初始化某些变量时犯了一些错误。此外，您不必一次读取一个字符的字符串。您可以使用`scanf("%s", someString)`读取整个字符串。

这是一个看起来更干净的工作代码：

```
#include<stdio.h>
#define N 2 
int main()
{
    int rollnum[N], hsc[N], cet[N], i;
    char name[100][100], city[100][100];
    for(i = 0; i < N; i++)
    {
        printf("%d.\nEnter first name : ", (i+1));
        scanf("%s", name[i]);
        printf("\nEnter roll number : ");
        scanf("%d", &rollnum[i]);
        printf("\nEnter city : ");
        scanf("%s", city[i]);
        printf("\nEnter HSC percentage : ");
        scanf("%d", &hsc[i]);
        printf("\nEnter CET marks : ");
        scanf("%d", &cet[i]);
        printf("\n");
    }

printf("\n\n\n");

for(i = 0; i < N; i++)
{
    printf("Entry %d\nStudent Name : %s\nRoll number : %d\nCity : %s\nMarks : \n\tHSC : %d \tCET : %d / 200\n\n\n", (i+1), name[i], rollnum[i], city[i], hsc[i], cet[i]);
}

return 0;
} 
```

它也适用于多个条目。

为了使您的程序正常工作，您必须替换它：

```
x = (a[i] - x);
    for(w = 0; w < x; w++ && k++)
        putchar(name[k]);
    putchar('\n');
    printf("Roll number : %d", rollnum[i]);
    printf("\n");
    printf("City : ");
    y = (b[i] - y);
    for(w = 0; w < y; w++ && l++)
        putchar(city[l]); 
```

有了这个：

```
if (i == 0)
  x = a[i]-1;
else
  x = a[i] - a[i-1];
for(w = 0; w < x; w++)
    putchar(name[k++]);
putchar('\n');
printf("Roll number : %d", rollnum[i]);
printf("\n");
printf("City : ");
if (i == 0)
  y = b[i]-1;
else
  y = b[i] - b[i-1];
for(w = 0; w < y; w++)
    putchar(city[l++]); 
```

问题是您没有正确计算单词的长度，还有另一个我仍然无法解释但我将其删除的错误。

# ruby-on-rails - 为不同的操作系统定义不同的 Gems，使其反映在 Gemfile.lock 中并可以与 --deployment 选项捆绑

> ID：12649790
> 
> 赞同：0
> 
> 时间：2012-09-29T03:58:50.723
> 
> 标签：ruby-on-rails, bundler, gemfile

我希望能够在我的 Gemfile 中定义在我的开发机器（Windows 7）上应该安装某个 gem（pg）版本（0.14.0-x86-mingw32），但在我的生产服务器（Debian）上应该安装它普通版。

我尝试在 Gemfile 中定义组，但这似乎没有反映在 Gemfile.lock 中，当我`bundle install`在我的开发机器 (Windows) 上运行时，它在 Gemfile.lock 中列出了 gem 的 windows 版本。然后，当我尝试使用 Capistrano 进行部署时，它使用`--deployment`参数 (and `--without groups-i-want-to-exclude`) 运行 bundle，它使用 Gemfile.lock 并且根本不安装 pg gem，因为列出的版本适用于 Windows。

我不想在我的生产服务器上手动编辑 Gemfile.lock，因为这通常是个坏主意，而且每次我从我的 repo 重新部署时，它都会变回特定于 windows 的版本。我也不想关闭 --deployment 选项（我当前的解决方案），因为这不是 bundler 在这种情况下的用途。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:52:14.767

如果您不想在生产服务器上更改 Gemfile.lock，那么您可以在本地机器上更改它。尝试希望这项工作，在安装包后在 Gemfile.lock 中手动更改，然后部署 -

```
PLATFORMS
  ruby
  x86-mingw32 
```

# ios - 在 iOS 6 中旋转以触发 Segue

> ID：12649791
> 
> 赞同：0
> 
> 时间：2012-09-29T03:58:54.693
> 
> 标签：ios, xcode, ios6

我有故事板，它有一个标签栏控制器。当设备旋转时，我想移动到不同的屏幕，即不横向显示相同的布局，而是显示完全不同的东西。

在 iOS 5 中，我使用 UITabBarControllerDelegate 中的以下代码实现了这一点

```
- (BOOL)shouldAutorotateToInterfaceOrientation:      (UIInterfaceOrientation)interfaceOrientation
{
    if(interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {    
        [self performSegueWithIdentifier: @"toGraph" sender: self];
    }

    return (interfaceOrientation == UIInterfaceOrientationPortrait);

} 
```

在 iOS 6 中不再调用此方法。我可以看到的所有方法都在*视图*旋转时处理，但在*设备*旋转时不处理。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:42:25.297

所以真的我不应该一直在寻找*视图*旋转，而是*设备*旋转。在发现 UIDevice 类之后，我能够使用 AlternateViews 示例代码（只需在文档管理器中搜索 AlternateViews）来获得我需要的一切。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.delegate = self;

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:)
                                                 name:UIDeviceOrientationDidChangeNotification object:nil];

}

- (void)orientationChanged:(NSNotification *)notification
{
    // We must add a delay here, otherwise we'll swap in the new view
    // too quickly and we'll get an animation glitch
    [self performSelector:@selector(showGraphs) withObject:nil afterDelay:0];
}

- (void)showGraphs
{
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    if (UIDeviceOrientationIsLandscape(deviceOrientation) && !isShowingLandscapeView)
    {
        [self performSegueWithIdentifier: @"toGraph" sender: self];
        isShowingLandscapeView = YES;
    }

    else if (deviceOrientation == UIDeviceOrientationPortrait && isShowingLandscapeView)
    {
        [self dismissModalViewControllerAnimated:YES];
        isShowingLandscapeView = NO;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:03:29.613

iOS 6 中的自动旋转发生了变化。以下是 Apple 开发论坛上有关此问题的主题：[https ://devforums.apple.com/thread/166544?tstart=30](https://devforums.apple.com/thread/166544?tstart=30)

这里还有一些线程： [http ://www.buzztouch.com/forum/thread.php?tid=41ED2FC151397D4AD4A5A60¤tPage=1](http://www.buzztouch.com/forum/thread.php?tid=41ED2FC151397D4AD4A5A60&currentPage=1)

[https://www.buzztouch.com/forum/thread.php?fid=B35F4D4F5EF6B293A717EB5&tid=B35F4D4F5EF6B293A717EB5](https://www.buzztouch.com/forum/thread.php?fid=B35F4D4F5EF6B293A717EB5&tid=B35F4D4F5EF6B293A717EB5)

这些与您的问题最相关的帖子似乎如下：

> 得到它的工作......对于选项卡式应用程序，替换了 appDelegate 中的这一行：[self.window addSubview:[self.rootApp.rootTabBarController view]];
> 
> 用这个：[self.window.rootViewController = self.rootApp.rootTabBarController view];
> 
> 并获得非选项卡式应用程序，替换这一行： [self.window addSubview:[self.rootApp.rootNavController view]];
> 
> 用这个：[self.window.rootViewController = self.rootApp.rootNavController view];

# android - android传递数据新活动

> ID：12649795
> 
> 赞同：0
> 
> 时间：2012-09-29T03:59:51.687
> 
> 标签：android, android-intent, android-activity

我是初学者，我需要解决这个问题。

```
09-29 11:53:50.539: E/AndroidRuntime(658): FATAL EXCEPTION: main
09-29 11:53:50.539: E/AndroidRuntime(658): java.lang.ClassCastException: android.widget.LinearLayout cannot be cast to android.widget.TextView
09-29 11:53:50.539: E/AndroidRuntime(658):  at com.example.listactivity.MainActivity$MyCustomAdapter$1.onClick(MainActivity.java:91)
09-29 11:53:50.539: E/AndroidRuntime(658):  at android.view.View.performClick(View.java:3511)
09-29 11:53:50.539: E/AndroidRuntime(658):  at android.view.View$PerformClick.run(View.java:14105)
09-29 11:53:50.539: E/AndroidRuntime(658):  at android.os.Handler.handleCallback(Handler.java:605)
09-29 11:53:50.539: E/AndroidRuntime(658):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-29 11:53:50.539: E/AndroidRuntime(658):  at android.os.Looper.loop(Looper.java:137)
09-29 11:53:50.539: E/AndroidRuntime(658):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-29 11:53:50.539: E/AndroidRuntime(658):  at java.lang.reflect.Method.invokeNative(Native Method)
09-29 11:53:50.539: E/AndroidRuntime(658):  at java.lang.reflect.Method.invoke(Method.java:511)
09-29 11:53:50.539: E/AndroidRuntime(658):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-29 11:53:50.539: E/AndroidRuntime(658):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-29 11:53:50.539: E/AndroidRuntime(658):  at dalvik.system.NativeStart.main(Native Method) 
```

我的 mainactivity.java

```
public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = getLayoutInflater();

            View row = inflater.inflate(R.layout.row, parent, false);

            TextView textview = (TextView) row.findViewById(R.id.tvTop);
            ImageView imageview = (ImageView) row
                    .findViewById(R.id.list_image);

            textview.setText(data_topText[position]);
            imageview.setImageResource(data_image[position]);

            row.setOnClickListener(new OnClickListener() {

                public void onClick(View convertView) {

                    String product = ((TextView) convertView).getText().toString();

                    Intent i = new Intent(getApplicationContext(),
                            SecondScreenActivity.class);
                    i.putExtra("name", product);

                    startActivity(i);

                }
            });

            return (row); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:07:16.703

```
String product = ((TextView) convertView).getText().toString(); 
```

在这里，`convertView`不是一个`TextView`. 这是一个`LinearLayout`。

你可能想要这个：

```
String product = ((TextView) convertView.findViewbyId(R.id.tvTop)).getText().toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:06:25.450

你要这个

```
public void onClick(View row) {
           TextView textview = (TextView) row.findViewById(R.id.tvTop);

            String product = textView.getText().toString();

            Intent i = new Intent(getApplicationContext(),
                    SecondScreenActivity.class);
            i.putExtra("name", product);

            startActivity(i);

        } 
```

您正在尝试将您的布局转换为 TextView。接收点击的是 LinearLayout。

# jquery - 使用 jQuery 切换 div 的问题

> ID：12649798
> 
> 赞同：1
> 
> 时间：2012-09-29T04:00:26.910
> 
> 标签：jquery, toggle

我有一个 div，如果单击它会在页面下方切换另一个 div。

这是应该进行切换的 div 的 HTML：

```
<div id="ch_display_linkedin_icon" class="asw-switch-link">
<a class="link-true active" rel="true" href="#"></a>
<a class="link-false" rel="false" href="#"></a>
</div> 
```

您会注意到`link-true`该类具有另一个属性 `active`. 如果单击 div，则这是由 jQuery 的另一种艺术添加的。

目前`a`类`active`是活动的div。

我想要做的是`#LinkedIn`根据`#ch_display_linkedin_icon`

基本上我想说，如果

```
<a class="link-true active" rel="true" href="#"></a> 
```

有`active`然后显示`#LinkedIn`div 的类，否则如果

```
<a class="link-false active" rel="false" href="#"></a> 
```

然后`active`隐藏`#LinkedIn`div。

我需要做的是使用 jQuery 能够获取 div 的值并仅在它具有活动类时才`ch_display_linkedin_icon`显示div。`#LinkedIn`

已经开始

```
$('#ch_display_linkedin_icon').live("click", function() {
}); 
```

但我不确定如何获取 a 的子元素。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:13:27.880

我会做这样的事情：

```
$(document).on('click', '#ch_display_linkedin_icon', function() {
    $('#LinkedIn').toggle($('a.link-true.active', this).length > 0);
}); 
```

理想情况下，替换`document`为包含`#ch_display_linkedin_icon`.

如果`#ch_display_linkedin_icon`不是由 JavaScript 动态生成，您可以稍微简化一下代码*：*

```
$('#ch_display_linkedin_icon').click(function() {
    $('#LinkedIn').toggle($('a.link-true.active', this).length > 0);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:07:11.337

用这个

```
 $(document).ready( function() {
        $('#LinkedIn').hide();
        /* This is the code to toggle the checkbox */
        $('.asw-switch-link a').live('click',function(){
            var $tag = $(this).parent();
            $('a',$tag).toggleClass('active');
            var rel = $('a.active',$tag).attr('rel');
            $tag.next('.plugin-switch-value').val(rel);
           if ($('#display_linkedin_icon').val() != 'true') {
            $('#LinkedIn').show();
           }else{
               $('#LinkedIn').hide();
           }

            return false;
        });

        $('#ch_display_linkedin_icon').click(function() {
            $('#LinkedIn').toggle($('a.link-true.active', this).length > 0);
        });
   }); 
```

看[小提琴](http://jsfiddle.net/lokeshparihar/26XgJ/)

# json - 获取侧边栏中的所有 wordpress 小部件并输出每个小部件的信息

> ID：12649799
> 
> 赞同：1
> 
> 时间：2012-09-29T04:00:35.263
> 
> 标签：json, wordpress, widget

我在侧边栏中有 x 个 wordpress 小部件。如何在侧边栏中循环浏览每个小部件的信息？

# r - R中稀疏矩阵的向量化元素除法

> ID：12649803
> 
> 赞同：5
> 
> 时间：2012-09-29T04:01:36.403
> 
> 标签：r, vectorization, sparse-matrix

R 中的 A/B 对矩阵执行逐元素除法。

但是，如果我从 Matrix 包生成一个稀疏矩阵，并尝试划分 A/B，我会收到此错误：

```
> class(N)
[1] "dgCMatrix"
attr(,"package")
[1] "Matrix"
> N/N
Error in asMethod(object) : 
  Cholmod error 'problem too large' at file ../Core/cholmod_dense.c, line 105
> 
```

有趣的。当稀疏矩阵的总大小很小时，我会得到这种行为：

```
> m <- sparseMatrix(i=c(1,2,1,3), j=c(1,1,3,3), x=c(1,2,1,4))
> m/m
3 x 3 Matrix of class "dgeMatrix"
     [,1] [,2] [,3]
[1,]    1  NaN    1
[2,]    1  NaN  NaN
[3,]  NaN  NaN    1
> 
```

但是当它的大小适中（~ 20000 个元素）时，我得到了 Cholmod 错误。

是否有解决方法或更合适的方法来对 R 中的稀疏矩阵进行元素除法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T04:44:15.750

逐元素除法的问题在于，如果你的矩阵都是稀疏的，那么你的结果中就会有很多`Inf`和`NaN`，而这些使得它变得密集。这就是为什么您会收到内存不足错误的原因。

如果您想在结果中用零替换`Inf`和`NaN`，那么解决方案相对简单，您只需获取`summary()`两个矩阵的 并直接使用索引和值。

您需要将`A`和`B`索引向量限制为它们的交集并对其执行除法。要获得索引对的交集，可以使用`merge()`.

这是一个快速而肮脏的实现：

```
# Some example data
A <- sparseMatrix(i=c(1,1,2,3), j=c(1,3,1,3), x=c(1,1,2,3))
B <- sparseMatrix(i=c(3,2,1), j=c(3,2,1), x=c(3,2,1))

sdiv <- function(X, Y, names=dimnames(X)) {
  sX <- summary(X)
  sY <- summary(Y)
  sRes <- merge(sX, sY, by=c("i", "j"))
  sparseMatrix(i=sRes[,1], j=sRes[,2], x=sRes[,3]/sRes[,4],
               dimnames=names)
}

sdiv(A, B)
# 3 x 3 sparse Matrix of class "dgCMatrix"
#           
# [1,] 1 . .
# [2,] . . .
# [3,] . . 1 
```

感谢 florel 关于使用`summary`and的建议`merge`。

# c# - 什么是 lambda 表达式的生命范围？

> ID：12649804
> 
> 赞同：2
> 
> 时间：2012-09-29T04:01:55.630
> 
> 标签：c#, lambda

lambda 表达式的生命周期是多少？

这是我的问题：我有一个`button1.Click`由 lambda 表达式订阅的事件。我不知道我是否需要取消订阅（这并不容易，因为它是匿名的）？或者我不必这样做，因为它与它所连接的控件（button1）的生命周期相同？

```
button1.Click += (s, e) => { /*Do something; */}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T04:54:35.480

由于 lambda 表达式与按钮相关联，只要按钮没有从内存中销毁，它就会存在。对于您的问题

> 我不知道我是否需要取消订阅（这并不容易，因为它是匿名的）？

Lambda 表达式可以保存到 EventHandler 委托中，这使您可以选择访问 lambda 和取消订阅事件。这里是代码。

```
 EventHandler myEvent= (s, e) => { /*Do something; */};  
    //Subscribe
    button1.Click += myEvent;
    //Unsubscribe
    button1.Click -= myEvent; 
```

可能是关于这个主题的最好解释[我应该退订事件吗？](https://stackoverflow.com/questions/4172809/should-i-unsubscribe-from-events)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T05:06:38.160

由于所有正常的 CLR 对象导致委托的生命周期将由任何引用它的对象定义。在您的情况下，仅`button1`通过`Click`. 因此，它将与`button1`. 除非有特殊原因（即想将处理程序更改为另一个），否则您不需要做任何特别的事情来“释放”它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T05:23:42.323

通过使用局部变量捕获它，您可以轻松地保留对事件处理程序引用的引用。

```
 EventHandler click = (s, e) => { /* Do something; */ }; 
```

然后你可以像这样附加它：

```
 this.button1.Click += click; 
```

清理可能有点棘手，因为它通常需要您创建一个类级别的变量来保存对处理程序的引用。这会导致代码分散在您的班级中。

但是，有一个相当简单的方法来处理它。进行类级别的`cleanup`操作来捕获所有清理操作，如下所示：

```
 private Action cleanup = () => { }; 
```

现在，您附加事件处理程序的代码可以很好地位于单个方法中，如下所示：

```
 EventHandler click = (s, e) => { /* Do something; */ };
        this.button1.Click += click;
        cleanup += () => this.button1.Click -= click; 
```

完成表单后，您可以像这样快速进行清理：

```
 cleanup(); 
```

很酷的是，您可以将各种清理代码添加到此操作变量。

# c# - 如何在 C# 程序中添加 excel 文件时避免出现 hresult 0x800a03ec 异常

> ID：12649806
> 
> 赞同：0
> 
> 时间：2012-09-29T04:02:52.083
> 
> 标签：c#

我正在尝试将现有的 excel 文件添加到 C# 中的工作簿中，我从 hresult 0x800a03ec 中得到异常。我的代码就像

Globals.ThisWorkbook.Application.Sheets.Add("C:\Users\..\Sheet11");

如何避免错误并添加现有的 Excel 工作表？请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:16:49.963

如果您的代码`.Add("C:\Users\..\Sheet11");`比您对错误转义的字符串有问题。你的文件名应该是

*   要么`@"C:\Users\My\Sheet11.xls"`（请注意`@`，开始时 meas 使用 varbatim 字符串）
*   或`"C:\\Users\\My\Sheet11.xls"`（注意`\\`- 转义“\”符号）。

# javascript - 我可以在浏览器中存储对象吗 Windows 本地存储

> ID：12649812
> 
> 赞同：0
> 
> 时间：2012-09-29T04:04:22.373
> 
> 标签：javascript, jquery, html

在我的代码中，我做了很多以下事情：

```
var store = window.localStorage;

var accountID = store.getItem('AccountID'),
        pageID = store.getItem('PageID'),
        referenceID = store.getItem('ReferenceID'),
        topicID = store.getItem('TopicID'); 
```

有没有办法可以更有效地做到这一点。例如，我可以在 Javascript 中创建一个对象并立即存储/获取整个对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T04:07:50.690

好吧，如果你尝试一下，你会发现你做不到。您存储的任何内容都将被设置为其`toString`值。

取决于您存储的数据的一种可能性是将其字符串化为 JSON 数据，然后在需要时对其进行解析。

```
var data = {foo:"bar"};

window.localStorage.setItem("test", JSON.stringify(data));

var fetched = window.localStorage.getItem("test");

var parsed = JSON.parse(fetched);

alert(parsed.foo); // "bar" 
```

当然，这会将您限制为与 JSON 兼容的数据类型。

# microsoft-metro - 是否可以构建一个独立的 Metro 应用程序（没有 Windows 商店）？

> ID：12649814
> 
> 赞同：3
> 
> 时间：2012-09-29T04:04:36.697
> 
> 标签：microsoft-metro, visual-studio-2012, windows-store-apps

我看到 Metro 应用程序被重新命名为“Windows 8 应用程序”或“Windows 商店应用程序”。

这种风格的全屏应用程序是否有独立于通过其商店发布的工作流程的术语？能不能搭建一个可以直接安装的windows 8 app？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T05:03:11.607

在系统上获取“Windows 8 应用商店”应用程序有 3 种方式（即部署 APPX 包）

*   从商店
*   通过使用 Visual Studio 或 Powershell Commandlet 获取开发人员许可证来解锁机器
*   使用“企业”SKU 时可用的侧载许可证。

没有其他方法可以部署应用程序包。

也就是说，**传统**的 Windows 应用程序仍然可以部署在 x64 和 x86 机器上。ARM 设备 (Windows RT) 不能运行除 Windows 8 应用商店应用程序之外的任何东西。

# iphone - 解雇视图控制器：不工作

> ID：12649834
> 
> 赞同：7
> 
> 时间：2012-09-29T04:10:18.057
> 
> 标签：iphone, objective-c, ios, xcode, viewcontroller

我有一个名为 vc0 的视图控制器，其显示如下：

```
[self presentViewController: vc1 animated: YES completion: nil]; 
```

在 vc1 中，我有一个按钮来展示另一个视图控制器：

```
[self presentViewController: vc2 animated: YES completion: nil]; 
```

然后在 vc2 中，我有一个关闭视图控制器的按钮：

```
[self dismissViewControllerAnimated:YES completion: ^{
// over here I call one method in vc1
} 
```

正如预期的那样，它返回到 vc1.. 但是 vc1 中有一个按钮可以通过像这样关闭视图控制器来返回到 vc0：

```
 [self dismissViewControllerAnimated:YES completion:nil]; 
```

但由于某种原因它不起作用，视图控制器不会被解散回 vc0。当我第一次展示 vc1 时，我可以按下按钮来关闭视图控制器并且它可以工作。但是当我按下按钮打开 vc2，当我关闭 vc2 回到 vc1，然后我按下按钮关闭视图控制器时，它就不起作用了。

抱歉，如果问题有点不清楚，我想说的话有点难以表达。

还有一件事：

我尝试`dismissViewControllerAnimated:`在 vc1 中替换以手动呈现 vc0，但随后我在控制台中收到一条日志，说我正在尝试呈现 vc0 但 vc1 的视图不在窗口层次结构中。这是什么意思？

感谢帮助！

更新：

**在这种情况下 VC0 是`MenuMileIndexViewController`- VC1 是`FlightViewController`- VC2 是`BookmarksTableViewController`**

这是涉及的代码：

> MenuMileIndexViewController：

```
- (IBAction)goToOriginPage {

FlightRecorder *origin = [[FlightRecorder alloc] init];
[self presentViewController:origin animated:YES completion:nil];

} 
```

> 飞行记录仪：

```
 - (void)searchBarBookmarkButtonClicked:(UISearchBar *)searchBar {

        [self bringUpBookmarkkTable];
}

- (void) bringUpBookmarkkTable {

    BookmarkTableViewController *bookmarkTVC = [[BookmarkTableViewController alloc] init];

    [bookmarkTVC setModalTransitionStyle: UIModalTransitionStyleFlipHorizontal];

    [self presentViewController:bookmarkTVC animated:YES completion:nil];
}

- (IBAction)cancel {

[self dismissViewControllerAnimated:YES completion:nil];

}

- (void)endBookmarkProcessWithBookmarkCollection: (NSDictionary *)dict {

    presetBookmarkContext = [dict mutableCopy];

    bookmarkMode = YES;

    NSString *compiledText = nil;

    NSNumber *number1 = [NSNumber numberWithInt: 1];

    if ([dict objectForKey: @"bookmarkTag"] == number1) {

        compiledText = [NSString stringWithFormat: @"%@ to %@", [dict objectForKey: @"origin"], [dict objectForKey: @"destination"]];
    }
    else {

        compiledText = [NSString stringWithFormat: @"%@ to %@", [dict objectForKey: @"destination"], [dict objectForKey: @"origin"]];
    }

    compiledText = [compiledText stringByReplacingOccurrencesOfString:@"Origin: " withString:@""];

    compiledText = [compiledText stringByReplacingOccurrencesOfString:@"Destination: " withString:@""];

    flightContext = [NSDictionary dictionaryWithObjectsAndKeys: [dict objectForKey: @"miles"], @"miles", compiledText, @"location", [[NSUserDefaults standardUserDefaults] objectForKey: @"tempD"], @"date", nil];

    NSString *string = [NSString stringWithFormat: @"\nMiles: %.2f\nFlight: %@\nDate: %@", [[dict objectForKey: @"miles"] floatValue], compiledText, [[NSUserDefaults standardUserDefaults] objectForKey:@"tempD"]];

    UIAlertView *bvkBookmarkAlertView = [[UIAlertView alloc] initWithTitle:@"Confirmation" message:string delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Add", nil];

    [bvkBookmarkAlertView show];
}

 - (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 1) {

        [self cancel]; // Even though cancel is an IBAction, IBAction is the same thing as void so it is callable
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 1) {

        [TheMileIndexViewController addDesiredMilesToIndex: [[flightContext objectForKey: @"miles"] doubleValue]];

        [TravelLogViewController addFlight: flightContext];

        if (!bookmarkMode) {

            if ([checkbox isSelected]) {

                [BookmarkHandler uploadBookmark: bookmarkFlightContext];
            }    
        }
    }

    if (buttonIndex == 0) {

        if ([alertView.title isEqualToString: @"Confirmation"]) {

            bookmarkMode = NO;
        }
    }

} 
```

> 书签表视图控制器：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    [tableView deselectRowAtIndexPath:indexPath animated: YES];

    NSDictionary *dict = [[BookmarkHandler bookmarkCollection] objectAtIndex: indexPath.row];

    fl = [[FlightRecorder alloc] init];

    [self dismissViewControllerAnimated:YES completion:^{

        [fl endBookmarkProcessWithBookmarkCollection: dict];
    }];
} 
```

现在，我在模拟器中创建了应用程序的屏幕录像，显示了问题所在。我可以通过电子邮件将其发送给您以供参考。所以我可以通过电子邮件将其发送给您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T06:35:13.093

我建议始终从实际呈现它的 VC 中解散 VC - 使用委托。这实际上也是 Apple 推荐的方式——正如我在之前对我关于这个问题的问题的回答中指出的那样。

因此，如果您有 VC0 呈现 VC1，那么在 VC0 中也有关闭 VC1 代码，使用委托方案。

我了解到这是处理呈现和解散的最节省的方法——即使有时它可以在 VC1 本身内解散 VC1。

我问了一个非常相关的问题，您可能也有兴趣检查一下。它显示**[代码...](https://stackoverflow.com/questions/11596200/opening-and-closing-other-uiviewcontrollers-any-other-approaches-than-to-use-p)**

ps我还读到有些人只解雇VC1 - 这反过来也会解雇VC2。但是，如果我之前的建议有效，我不会这样做。有时我在执行过程中得到信息（没有崩溃），VC 不再存在或与之相关的任何东西 - 所以我认为这不是最好的解决方案。但是如果我之前的建议不起作用，你可以试试第二个。

虽然不能保证这会持续到新 iOS 的更新，但由于这个问题一直困扰着我，现在有几个 iOS 更新:-)，所以我决定走标准推荐路线。

编辑：这是我修改后的代码-它可以正常工作-但是尚不清楚在用户响应警报之后您打算发生什么以及警报应该在VC1还是VC0上。无论如何使用委托和回调我没有看到任何问题。如果我错过了您的观点，请解释...

FlightViewControllerProtocol.h

```
@protocol FlightViewControllerProtocol <NSObject>
-(void) dismissVCAndEndBookmark;
@end 
```

FlightViewController.m

```
#import "FlightViewController.h"
#import "FlightViewControllerProtocol.h"
#import "BookmarksTableViewController.h"
@interface FlightViewController ()

@end

@implementation FlightViewController
@synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)searchBarBookmarkButtonClicked:(UISearchBar *)searchBar {

    [self bringUpBookmarkkTable];
}

- (IBAction) bringUpBookmarkkTable {

    BookmarksTableViewController *bookmarkTVC = [[BookmarksTableViewController alloc] init];
    bookmarkTVC.delegate = self;
    [bookmarkTVC setModalTransitionStyle: UIModalTransitionStyleFlipHorizontal];

    [self presentViewController:bookmarkTVC animated:YES completion:nil];
}

- (IBAction)cancel {

    [self dismissViewControllerAnimated:YES completion:nil];

}

- (void)endBookmarkProcessWithBookmarkCollection: (NSDictionary *)dict {

//    presetBookmarkContext = [dict mutableCopy];

//    bookmarkMode = YES;

    NSString *compiledText = nil;

    NSNumber *number1 = [NSNumber numberWithInt: 1];

    if ([dict objectForKey: @"bookmarkTag"] == number1) {

        compiledText = @"Text1";
    }
    else {
        compiledText = @"Text2";
    }

//    flightContext = [NSDictionary dictionaryWithObjectsAndKeys: [dict objectForKey: @"miles"], @"miles", compiledText, @"location", [[NSUserDefaults standardUserDefaults] objectForKey: @"tempD"], @"date", nil];

    NSString *string = compiledText;

    UIAlertView *bvkBookmarkAlertView = [[UIAlertView alloc] initWithTitle:@"Confirmation" message:string delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Add", nil];

    [bvkBookmarkAlertView show];
}

- (void) dismissVCAndEndBookmark {
    [self dismissViewControllerAnimated:YES completion:nil];
     [self endBookmarkProcessWithBookmarkCollection: nil];
}

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 1) {

        [self cancel]; // Even though cancel is an IBAction, IBAction is the same thing as void so it is callable
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 1) {

        NSLog(@"alertView1");
           }

    if (buttonIndex == 0) {
        NSLog(@"alertView2");

    }

}

@end 
```

书签TableViewController.h

```
 @interface BookmarksTableViewController : UIViewController
{
    id delegate;
}

@property (nonatomic,strong)   id delegate;

@end 
```

书签TableViewController.m

```
- (IBAction)goBack {
    [self.delegate dismissVCAndEndBookmark];
} 
```

如果我正确理解您的意图，特别是 BookmarksTableViewController.m 中的回调似乎是您实现中的主要问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T18:20:37.790

```
[self.navigationController popViewControllerAnimated:YES]; 
```

也为我做了伎俩。就我而言，我有一个（iPhone）viewController 使用 push segue 被推送到堆栈中。由于启动 segue 的 viewController 有一个导航栏，我不得不向父控制器的 navigationController 发送 popViewControllerAnimated 消息，而不是调用它自己的 dismissViewControllerAnimated:completion 消息。

射线

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T07:41:14.293

第一视角：

首先在第一个视图中嵌入导航控制器。并使用此代码导航到另一个视图

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil]; 
FirstView *rvc = [storyboard instantiateViewControllerWithIdentifier:@"apps"];
[self.navigationController pushViewController:rvc animated:YES]; 
```

第二种观点：

在关闭视图的方法中添加此行

```
- (IBAction)back{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

# regex - GREP 和 RegEx - 找到模式并再次寻找它

> ID：12649847
> 
> 赞同：5
> 
> 时间：2012-09-29T04:13:35.627
> 
> 标签：regex, grep

这是我想要做的：

在文档中搜索包含 RegEx 的模式，然后检查该确切模式是否在一行内出现两次。

```
Content of file.xml:
(some code) "testen"  (more code)  >testete<
(some code) "bleiben" (more code)  >bleiben<
(some code) "stehen"  (more code)  >stand<
(some code) "hängen"  (more code)  >hängten<
... 
```

现在我想检查`.*en`并检查（确切）相同的单词是否在该行中出现两次。所以结果应该是：

```
bleiben 
```

因为 Testen != testete, stehen != stand, hängen != hängten

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T04:24:54.733

`grep`您可以使用以下模式在第一行处理此搜索`.*en.*en`：：

```
grep .*en.*en your_file 
```

这将仅输出`en`在其中出现两次的行。

如果您*需要*在两个 back-to-back 中处理它`grep`，您仍然可以在管道版本中使用相同的命令：

```
grep .*en your_file | grep .*en.*en 
```

此外，如果您想增加同一行中的实例数，您可以利用`grep`'`-P`选项并使用 Perl 正则表达式：

```
grep -P "(.*en){2}" your_file 
```

有了这个，您可以将它更改为`{2}`您希望它出现在一行中的任意多个实例，它应该可以工作。

**编辑**（查找具有*完全相同单词的*行两次）

如果没有可以定义单词边界的扩展模式，这很困难 - 而且您的示例输出并没有太大帮助。举一个直截了当的例子，我们可以假设“单词”是任何以 .`a-z`结尾的字母字符串`en`。您可以根据需要自定义此边界：

```
grep -P "([a-z]+en).*\1" your_file 
```

这将打印任何以在该行其他地方找到的单词结尾`en`的行 (the `\1`)。

需要提一下的一个警告，它与上面提到的词边界问题有关。在“bleiben”和“bleiben”的上下文中，它们是平等的。但是，在 "ben" 和 "bleiben" 的上下文中，此模式也会*匹配*，因为它会将 "bleiben" 的结尾 "ben" 视为匹配模式（因此使用 "ben" = "ben"）。如果这是不可接受的，您将不得不建立一个更严格的字边界（即 - 不允许特殊字符？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:58:11.673

这是使用`GNU awk`. 我假设两次你的意思是两次或更多次。像这样运行：

```
awk -f script.awk file.xml 
```

内容`script.awk`：

```
/.*en/ { 
    gsub(/["<>]/, " ")
    for (i=1; i<=NF; i++) {
        if ($i ~ /.*en/) {
            array[$i]++
        } 
    }
}
{
    for (j in array) {
        if (array[j]>=2) {
            print j
        }
    }
    delete array
} 
```

或者，这是单线：

```
awk '/.*en/ { gsub(/["<>]/, " "); for (i=1; i<=NF; i++) if ($i ~ /.*en/) array[$i]++ } { for (j in array) if (array[j]>=2) print j; delete array }' file.xml 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T05:07:19.643

使用 sed：

```
sed -rn 's/.*\b(\w+en)\b.*\b\1\b.*/\1/gp' input_file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T04:35:16.457

您可以使用 grep 的`-o`选项*仅返回该行的匹配部分*。

这是一个链接，表明 awk 可能是完成这项工作的更好工具：

*   [http://compgroups.net/comp.lang.awk/match-0-or-twice-the-same-word/197049](http://compgroups.net/comp.lang.awk/match-0-or-twice-the-same-word/197049)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T10:31:08.953

使用 sed

```
sed -n  's/[^"]\+"\([^"]\+\)"[^>]\+>\1</\1/p' FileName.txt 
```

**输出 ：**

```
bleiben 
```

# javascript - 干净地从 Python 调用 Webkit Javascript 函数

> ID：12649849
> 
> 赞同：0
> 
> 时间：2012-09-29T04:14:24.737
> 
> 标签：javascript, python, qt, webkit, pyqt

对于我目前正在开发的应用程序，我决定使用 HTML5 作为界面，让我拥有一个现代界面，当您更改操作系统时，其外观不会发生变化。我自然选择了 webkit 引擎进行渲染，特别是 PyQT 绑定。我的问题是，每次我想从 python 调用 javascript 函数时，我都必须使用凌乱的 evaluateJavaScript 函数。

我可以使用的任何替代方法允许更直接地调用 javascript 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:38:03.497

PyQt 没有任何使事情变得更容易的包装器。

如果你愿意，你可以自己写——不完美，但更好一点。例如，像这样的东西（只是一个骨架，不是实际代码）：

```
class JSObject(object):
    def __init__(self, name):
        self.name = name
    def __getattr__(self, attr):
        class Proxy(object):
            def __init__(self, objname, funcname):
                self.name = '%s.%s' % (objname, funcname)
            def __call__(self, *args):
                argstr = ', '.join(json.dumps(arg) for arg in args)
                retstr = evaluateJavaScript('%s(%s)' % (self.name, argstr)
                # realistically you may want to do more to parse the return
                # value—e.g., look up/create JSONObjects as needed?
                return json.loads(retstr)
        return Proxy(self, attr)

thingIWantToCall = JSObject('thingIWantToCall')
print thingIWantToCall.methodIWantToCallOnIt('foo', [1, 2, 3]) 
```

正如您所看到的，它仍然有点笨拙——您必须手动创建对象代理，并且除了调用对象上的方法之外，没有办法调用自由函数或声明变量或其他任何东西。其中一些可以实施，但你能走多远是有限度的。（当然，您总是可以回退到显式字符串。）

# linux - 如何为基于文本的内容执行汇编 IO？

> ID：12649851
> 
> 赞同：1
> 
> 时间：2012-09-29T04:14:37.733
> 
> 标签：linux, nasm, stdio, text-based

我正在寻找了解如何在 x86 汇编中编写基于文本的游戏的基本输入/输出，只是为了学习指令集和内部结构。

我不想在我的汇编代码中使用`stdlib.h`or `stdio.h`，除非它涉及一些复杂的东西，比如`printf`，然后我会从汇编中调用它。

如果可能的话，我想学习如何模拟枚举和结构。AFAIK 编写函数并向它们发送参数只是将特定寄存器推入和移出堆栈和/或`esp`使用 4 的倍数进行操作的情况。

我将如何使用 intel 语法在 x86 中执行此操作？

**更新**

抱歉，我忘了指定目标 - 我使用的是 Linux。

* * *

**示例代码 - 为简洁起见省略了函数原型实现**

```
#include <stdio.h>
#include <stdlib.h>

typedef enum __weapon_type__ {

    weapon_type_sword = 1, 
    weapon_type_spear = 2, 
    weapon_type_knife = 3

} weapon_type;

typedef struct __weapon__ {

    unsigned int damage;
    char*        name;
    weapon_type  type;  

} weapon;

weapon* weapon_create( int damage, char* name, weapon_type type );

void putline( const char* msg );

int main( int argc, char** argv )
{
    unsigned int weapon_selection, weapon_damage;
    weapon_type weptype;
    weapon* player_weapon = NULL;
    char* weapon_name = NULL;

    putline( "Choose your weapon type:\t" );
    putline( "(1) Sword" );
    putline( "(2) Spear" );
    putline( "(3) Knife" );

    while ( weapon_selection > 3 || weapon_selection < 1 )
    {
        scanf( "%u", &weapon_selection );

        switch( weapon_selection )
        {
            case 1:
                weptype = weapon_type_sword;
                break;
            case 2: 
                weptype = weapon_type_spear;
                break;
            case 3:
                weptype = weapon_type_knife;
                break;
            default:
                putline( "ERROR! Please select options 1 - 3\t" );
                break;
        }
    }

    /*do the same thing for weapon_damage and weapon_name, etc.
      Then ask for player name, type of character, blah blah blah.
    */

    player_weapon = weapon_create( weapon_damage, weapon_name, weptype );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:23:22.333

在 Linux 应用程序上，所有 I/O 都是通过[系统调用](http://en.wikipedia.org/wiki/Syscall)完成的（从应用程序的角度来看，这是基本操作，通常通过模式切换机器指令实现，如`SYSENTER`, `SYSCALL`, `INT`...）。我建议阅读[linux 程序集 howto](http://tldp.org/HOWTO/Assembly-HOWTO/)。

另请参阅[这个](https://stackoverflow.com/a/12563270/841108)和[那个](https://stackoverflow.com/a/11609768/841108)答案。

查看编译器的输出，使用`gcc -Wall -fverbose-asm -O -S your-c.c`. 您将了解到`printf`对任何 C 函数的调用（在 32 位 x86 上）将参数压入堆栈（在 x86-64 上，一些参数在寄存器中传递）。有一些[调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)，例如那些在[x86-64 ABI](http://www.x86-64.org/documentation/abi.pdf)中定义的（对于 x86-64） （对于其他体系结构存在类似的文档）。AC`enum`只是定义一些常量的一种方式。AC`struct`只是一个聚合体，即一个内存区域，里面有数据等。

# javascript - 禁用/启用页面上的所有链接

> ID：12649854
> 
> 赞同：0
> 
> 时间：2012-09-29T04:15:42.070
> 
> 标签：javascript, jquery, popup, gallery, disable-link

我正在开发一个销售画廊，用户单击图像，弹出框在页面前面淡出。该框包括产品详细信息、订单信息和一个风格化的退出按钮，用于关闭框并返回画廊。用户还可以通过在框外单击返回到图库。但是，当该框打开时，我希望禁用窗口后面的所有链接（导航菜单等），但退出按钮除外。一旦用户关闭框，它们应该再次启用。我试过玩弄类似的东西

```
$('a:not(a.popout)').removeAttr('href'); 
```

和

`$('a').attr('href', '');`

无济于事。他们唯一能做的就是永久关闭页面上的每个链接，当然，一旦我完全删除了 href 属性，就无法再次重新启用它们。还有其他人尝试过这样做吗？也许我正在做他很难的方式。没有想法了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:20:56.430

当您打开弹出窗口时，`shutdown`向所有锚点添加一个类：

```
$('a:not(a.popout)').addClass('shutdown'); 
```

然后只是防止此类元素的默认行为：

```
$(document).on('click', 'a.shutdown', function(e){

    e.preventDefault();

}); 
```

关闭弹出窗口时，删除类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:20:28.820

将处理程序绑定`$.click()`到您的链接，并且`prevent default`：

```
$('a').not('.popout').click( function(event) {
  ...
  event.preventDefault();
}); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T04:22:22.263

用这个

```
$('a:not(a.popout)').click(function(e){
e.preventDefault();

//or 

return false;

}) 
```

# python - 如果字典尚不存在，则将条目添加到字典

> ID：12649855
> 
> 赞同：2
> 
> 时间：2012-09-29T04:15:59.937
> 
> 标签：python, dictionary, append

我正在尝试编写一些代码来计算 2 的幂，但将它们存储在以 10 的幂作为键的字典中，例如，2^9 将存储为

```
{0:2, 1:1, 2:5} 
```

你有 5*10^2 + 1*10^1 + 2*10^0。

所以目前，我有类似的东西

```
def foo():
    result={0:2}
    for i in range(2,10):
        for p in result.keys():
            result[p]*=2
        for p in result.keys():
            if result[p] / 10 != 0:
                result.setdefault(p+1,result[p]/10)
                result[p] = result[p] % 10 
```

问题是

```
result.setdefault(p+1,result[p]/10) 
```

它会覆盖`result[p+1]`. 我知道可以只检查字典，然后在需要时“初始化”新密钥，但是有没有更优雅的方法可以即时完成？我可以将结果初始化为足够长，但由于我不一定知道“足够长”有多长，所以在我看来，动态扩展它更有意义。

基本上我想要一些类似的东西

```
for p in result.keys():
    if result[p] / 10 != 0:
        if result[p+1] exists:
            result[p+1]+=result[p]/10
        else:
            create result[p+1] and set its value to result[p]/10 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:22:24.940

所以，你每次通过主循环所做的是：将每个数字加倍，然后将额外的十位带到下一个数字。问题是，对于最高数字，下一个数字不存在。

所以这是一个解决方案——尽管它不适用于除 2 之外的任何幂，原因我将在下面讨论。

```
def foo():
    result={0:2}
    for i in range(2,10):
        for p in result.keys():
            result[p]*=2
        for p in result.keys()[:]:
            if result[p] / 10 != 0:
                result[p+1] = result.get(p+1, 0) + result[p] / 10
                result[p] = result[p] % 10 
```

您的原始代码有两个关键更改。

首先，我们必须添加`[:]`到 second 的末尾`result.keys()`，以便在循环之前迭代字典的一组键的副本，而不是它的当前键。原因是如果最后一位数字大于 5，我们将在字典中添加一个新键，并且在迭代它时不允许这样做。（为什么？有几个原因，但最简单的一个是字典是任意顺序的，每次添加一个键，整个顺序都会改变。这在以后也很重要。）

其次，您最初的问题是：您如何避免必须检查`if p+1 in result`以决定是存储`r_p`还是添加`r_p`到现有值？

当您处理计数时，您使用`collection.Counter`，它类似于 a `dict`，只是它只存储整数，并且任何缺少的键的值都为 0。否则，您通常使用`collection.defaultdict`，它类似于 a `dict`，除了您可以指定一个默认值所有丢失的钥匙都有。使用 a`Counter`或`defaultdict`，您只需要`result[p+1] += result[p]/10`.

但我使用了另一种选择： 上的`get`方法`dict`，它允许您指定默认值。我稍后会解释为什么，但请记住，一般来说，当你发现自己伸手去拿 时`get`，你可能想要一个`defaultdict`or`Counter`代替。

所以，现在它可以运行并工作，对于 2 的幂。但它不适用于其他幂，原因有两个：

首先，我们以随机顺序进行进位。对于 2 的幂，您最多可以携带 1，并且 1 不会影响下一个数字是否携带。（8 不会携带，8+1 也不会，现在有办法得到 9。）但对于任何其他力量，这不是真的。

在简单的测试中，你可能不会注意到这一点，因为它恰好发生在（至少在 CPython 2.7 和 3.2 中）当你从一个空开始`dict`并添加少量小键（实际上，具有小散列值的键，但ints 以排序顺序散列到自己），并且不删除任何内容，`dict`通常会按顺序迭代（和打印）。但总的来说，顺序是不可预测的，你不能依赖它。

该问题的解决方案是使用`collections.OrderedDict`，它按照添加顺序对键进行迭代。这就是为什么我不想使用`defaultdict`or `Counter`: 因为如果你必须切换到`OrderedDict`，你唯一的选择是`get`.

其次，一旦您的指数超过 10，您可能需要进位 100。这意味着您必须进位 10，这将导致下一个数字即使是 0 也会进位。这意味着我们不能只复制密钥进步。例如，假设我们正在计算 75 的幂。从 开始`{0:5, 1:7}`。将每个数字乘以 75 即可`{0:375, 1:525}`。现在携带 37: `{0:5, 1:562}`。现在携带 56: `{0:5, 1:2, 2:56}`。因为我们只是迭代原始密钥的副本——也就是说——`[0, 1]`我们没有机会携带 5。

我会把它留给你来解决这个问题。

但是，您可能要考虑的一件事是创建一个新字典，而不是修改旧字典。然后你就可以解决所有这些问题。（作为一般规则，使用纯函数而不是改变状态会解决很多问题，但当然是以额外复制为代价的。）

```
def double(d):
    result = Counter()
    for p in d:
        result[p] += d[p] % 10
        result[p+1] += d[p] / 10
    return result

digits={0:2}
for i in range(2,10):
    for p in digits:
        digits[p]*=2
    digits = double(digits) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:22:47.630

您可以使用以下`in`语法检查密钥是否存在：

```
for p in result.keys()[:]:
    r_p = result[p] / 10

    if r_p != 0:
        if p + 1 in result:
            result[p + 1] += r_p
        else:
            result[p + 1] = r_p 
```

或者，您可以使用`Counter`，它会自动执行此操作：

```
from collections import Counter

result = Counter()

for p in result.keys()[:]:
    r_p = result[p] / 10

    if r_p != 0:
        result[p + 1] += r_p 
```

另外，你的情况有点奇怪。`result[p] / 10 == 0`仅`result[p] < 10`在 Python 2 或`result[p] == 0`Python 3 上。

# android - 项目没有 default.properties 文件

> ID：12649856
> 
> 赞同：0
> 
> 时间：2012-09-29T04:16:07.060
> 
> 标签：android, properties, android-emulator, project

当我选择要导入的项目（文件->新建->Android项目->从现有源）导入时出现错误

**[2012-09-24 22:18:41 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] 无法读取 E:\android-sdk\AndroidManifest.xml: java.io.FileNotFoundException: E: \android-sdk\AndroidManifest.xml（系统找不到指定的文件）**

导入项目后也出现错误

**[2012-09-24 22:21:02 - SplashScreen] 项目没有 default.properties 文件！编辑项目属性以设置一个。**

导入语句也出现错误。

导入***java.io、java.nio、java.util、org.apache.http.HttpResponce、org.apache.http.Version、org.apache.http.client、org.apache.http.conn、org.apache.http .impl、org.apache.http.params、android***等

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:21:09.250

右键单击项目-->属性-->Android-->选择任何项目构建目标，例如 2.3.3 或 4.0.3，而不是应用，清理您的项目，然后构建项目.. 我希望它可以生成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:22:47.523

您是否缺少 manifest.xml 文件，或者您可以自己找到它并将其复制到项目中？您可以自己创建一个新的。此外，您似乎正在 android-sdk 文件夹中创建一个项目。如果 android sdk 真的位于那里，这不是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T04:40:29.767

如果上述答案均无效，请尝试按照手动方式添加`default.properties`.

*   转到您的项目文件夹。
*   右键单击并创建一个新的文本文件
*   添加以下代码

    ```
    # This file is automatically generated by Android Tools.
    # Do not modify this file -- YOUR CHANGES WILL BE ERASED!
    #
    # This file must be checked in Version Control Systems.
    #
    # To customize properties used by the Ant build system use,
    # "build.properties", and override values to adapt the script to your
    # project structure.

    # Project target.
    target=android-4 
    ```

*   `target=android-4`根据您的android版本更改

*   保存并退出。
*   将文件文本文件重命名为`default.properties`
*   转到您的 Eclipse 并刷新项目

然而，这应该是最后的选择。从任何其他项目复制`default.properfies`并粘贴到当前项目中的另一种方法，它也可以工作。

# python - 如何使用 py 文件运行 scrapy

> ID：12649862
> 
> 赞同：9
> 
> 时间：2012-09-29T04:17:56.713
> 
> 标签：python, scrapy

嗨，我正在研究scrapy，我创建了一个scrapy文件夹`scrapy startproject example` 并编写了spider来从url中抓取所有数据，并且我使用命令运行了spider `scrapy crawl spider_name`，它工作正常并且能够获取数据。

但是我有一个要求，我需要使用创建的单个蜘蛛文件来运行scrapy，我的意思是单个 py 文件，例如

```
python -u /path/to/spider_file_inside_scrapy_folder_created.py 
```

`scrapy crawl`使用spider.py文件创建scrapy项目文件夹后，是否可以在没有命令的情况下运行蜘蛛

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T06:28:51.740

是的！如果你想以编程方式而不是通过 Popen 调用命令，你可以按如下方式运行它：

```
>>> from scrapy.cmdline import execute
>>> execute(['scrapy','crawl','dmoz']) 
```

如果您有任何问题，请告诉我。我使用了scrapy docs在Github上引用的版本进行测试：

[https://github.com/scrapy/dirbot](https://github.com/scrapy/dirbot)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T02:35:51.857

试试[runspider](http://doc.scrapy.org/en/latest/topics/commands.html#runspider)命令：

```
scrapy runspider /path/to/spider_file_inside_scrapy_folder_created.py 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-14T02:28:05.850

我认为答案（如果我理解你的问题）现在是[使用 API](https://doc.scrapy.org/en/latest/topics/practices.html#run-scrapy-from-a-script)：

```
import scrapy
from scrapy.crawler import CrawlerProcess

class MySpider(scrapy.Spider):
    # Your spider definition
    ...

process = CrawlerProcess({
    'USER_AGENT': 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)'
})

process.crawl(MySpider)
process.start() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-16T06:38:00.370

你的蜘蛛类文件：

```
class YouNameSpider(scrapy.Spider):
    name = 'youname'
    allowed_domains = ['https://www.YouName.com'] 
```

在 YouName 中创建 main.py：

```
from scrapy.cmdline import execute
import os, sys
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
execute(['scrapy', 'crawl', 'youname']) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-16T07:51:42.073

是的，您可以，首先通过命令提示符到达 xyz.py 文件所在的目的地。然后你可以编写命令：

```
scrapy runspider xyz.py 
```

如果你想保存输出，你可以写：

```
scrapy runspider xyz.py -o output.csv 
```

或者您也可以将输出保存在 json 中

# java - 我的数组在哪里超出范围？

> ID：12649863
> 
> 赞同：0
> 
> 时间：2012-09-29T04:17:58.053
> 
> 标签：java, arrays, logic, indexoutofboundsexception

我正在尝试为此编写一个算法：有 100 个学生和 100 个储物柜。第一个学生从第一个储物柜开始，然后打开每个储物柜。下一个学生，第二个学生，从第二个储物柜开始，如果储物柜打开，每隔一个储物柜就会关闭一次，反之亦然。第三个学生从第三个储物柜开始，每隔三个储物柜重复这个过程。我写了一些我认为应该可以工作的东西，但是我的数组超出了范围，我不知道如何：

```
public static void main(String[] args) 
{
    int startingStudents = 1;
    int lockersToCheck = 1;
    int lockersPosition = 1;
    boolean[] lockers = new boolean[101];

    //Cycles through 100 students
    for(int students = startingStudents; startingStudents <= 100; students++)
    {
        //What each student does
        while(lockersToCheck <= 100)
        {
                            //If its closed, open
            if(lockers[lockersToCheck] == false)
            {
                lockers[lockersToCheck] = true;
            }
                            //If its open, close
            else
            {
                lockers[lockersToCheck] = false;
            }

                            //Which locker they should be at
            lockersToCheck += lockersPosition;
        }

        //Zero out to start at the right locker
        lockersToCheck = 0;
                    //Where the next student starts
        lockersPosition += students;
                    //Make sure the next student starts there
        lockersToCheck = lockersPosition;

    }

    for(int n = 1; n <= 100; n++)
    {
        System.out.print(lockers[n] + " " + n);
    }

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:20:19.340

for（int学生=startingStudents；**startingStudents** <= 100；学生++）

应该

for(int students = startingStudents;**学生**<= 100; 学生++)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:29:57.003

这是你的循环终止

```
for(int students = startingStudents; startingStudents <= 100; students++) 
```

应该

```
for(int students = 1; students <= 100; students++) 
```

因此，我猜你得到的不是 ArrayIndexOutOfBoundsException，而是 Heap-Space-Exception。

# c - 夹板如何进行污点分析

> ID：12649864
> 
> 赞同：2
> 
> 时间：2012-09-29T04:17:58.860
> 
> 标签：c, analysis, static-code-analysis, splint, taint

如何使用 Splint 进行污点分析？

我已经在我的 Ubuntu 12.04 上安装了 Splint。创建了一个小测试用例，如下所示：

```
#include<stdio.h>
#include<string.h>
int main(int argc, char *argv[]) {
    char a[10];
    strncpy(a,argv[1],10);
    printf(a);
    return 0;
} 
```

还创建了具有以下内容的 splint.xh 文件：

```
int printf  (/*@untainted@*/ char *fmt, ...);
char *fgets (char *s, int n, FILE *stream) /*@ensures tainted s@*/ ;
char *strcat (/*@returned@*/ char *s1,  char *s2) /*@ensures s1:taintedness = s1:taintedness | s2:taintedness @*/ ;
void strncpy (/*@returned@*/ char *s1,  char *s2, size_t num)    /*@ensures s1:taintedness = s1:taintedness | s2:taintedness @*/ ; 
```

还创建了具有以下内容的 splint.mts 文件：

```
 attribute taintedness
       context reference char *
       oneof untainted, tainted
       annotations
         tainted reference ==> tainted
         untainted reference ==> untainted
                       transfers
         tainted as untainted ==> error "Possibly tainted storage used where untainted required."
       merge
          tainted + untainted ==> tainted
       defaults
          reference ==> tainted
          literal ==> untainted
          null ==> untainted
    end 
```

然后最后用命令运行夹板工具：

```
 splint -mts splint prg001.c 
```

其中 prg001.c 是样本输入，“splint”是指 splint.mts 和 splint.xh 文件。所有文件都在当前目录中。

我收到的输出是：

夹板 3.1.2 --- 2012 年 8 月 21 日

prg001.c: (在函数 main) prg001.c:6:1: printf 的格式字符串参数不是编译时常量：格式参数在编译时是未知的。这可能会导致安全漏洞，因为无法对参数进行类型检查。（使用 -formatconst 禁止警告） prg001.c:3:14: 未使用参数 argc 函数体中未使用函数参数。如果类型兼容性或未来计划需要参数，请在参数声明中使用 / *@unused@ /。*（使用 -paramuse 禁止警告）

完成检查 --- 2 个代码警告

输出中没有任何污点分析的提示。有人可以帮助我了解如何使用 Splint 完成污点分析。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:29:19.970

问题出在 splint.xh 文件上。

我将 printf 更改为 printfxxx 并且效果很好。

这意味着标准定义正在覆盖我的 .xh 文件。这解决了我的问题，现在夹板输出污染变量和污染流。

# javascript - 旋转动画停止时如何确定元素的角度？

> ID：12649867
> 
> 赞同：1
> 
> 时间：2012-09-29T04:18:23.660
> 
> 标签：javascript, html, animation, svg

我有一些在线 SVG，我正在为它制作旋转动画，通过鼠标点击 div 来控制。

当鼠标被按下（mousedown）时，动画开始并旋转 180 度。当鼠标被释放（mouseup）动画将终止。

问题是我不知道动画在什么角度终止。这会产生一个问题，因为 javascript 假定动画成功地将 SVG 旋转了 180 度，因此将从错误的点开始下一个动画序列。

这个问题的一个例子可以在[JSFiddle](http://jsfiddle.net/LWe88/1/)找到。我怀疑该解决方案与 DOM 有关，但我在试图挖掘所有可用信息时迷失了方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T07:33:59.970

您可以像这样使用 SVG DOM 读取动画值...

```
$('#control1').mouseup(function() {
    // get the animation element
    var anim = document.getElementById("rotatePolysvg3");

    // stop the animation (in case it is running)
    anim.endElement();

    var g = document.getElementById("polysvg2");

    if (g.transform.animVal.numberOfItems > 0) {
      alert(g.transform.animVal.getItem(0).angle);
    }

}); 
```

# css - 高分辨率显示的 CSS @media 查询不起作用

> ID：12649868
> 
> 赞同：3
> 
> 时间：2012-09-29T04:18:39.380
> 
> 标签：css, media, media-queries, retina-display

我设置了一些 CSS 来检测客户端是使用 Retina 还是其他 HiDPI 显示器，并基于此`background-image`为各种s 显示不同的显示器。`div`这是我的语法：

```
<!-- LoDPI and MedDPI displays -->
#div {
    opacity:0.4;
    position:absolute;
    top:0px;
    z-index:2;
    width:1600px;
    height:900px;
    animation-name:ring;
    animation-delay:0s;
    animation-duration:1500ms;
    animation-timing-function:cubic-bezier(0.225, 1.650, 0.000, 0.805);
    animation-fill-mode:forwards;
    background-image:url(/valid/path/to/regular/file);
}

<!-- For Retina and HiDPI displays -->
@media only screen and (min-device-pixel-ratio: 1.4) {
#div {
    background-image:url(/valid/link/to/HiDPI/file);
    background-position:center;
    background-size:contain;
    }
} 
```

问题是，当我在我的 Retina MBP 上尝试这个时，它的像素比设置为 1.5（“像 1920x1200 一样），显示正常分辨率的图像而不是高分辨率的图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T04:42:01.920

你没有关闭所有的花括号。无论如何，为了获得更好的支持矩阵，请将您的媒体查询替换为

```
@media only screen and (-moz-min-device-pixel-ratio: 1.5),
       only screen and (-o-min-device-pixel-ratio: 3/2),
       only screen and (-webkit-min-device-pixel-ratio: 1.5),
       only screen and (min-device-pixel-ratio: 1.5) {
         /*your rules*/
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:08:57.897

我遇到了同样的问题：无前缀 js 似乎不支持（前缀）min-device-pixel-ratio！？min-device-pixel-ratio 不符合 W3C。

当我将它与供应商前缀一起使用时，一切正常？！

这对我来说很好（删除评论）

```
@media (-webkit-min-device-pixel-ratio: 2), /*  Firefox16, Chrome, Safari, iOS, Android */
       (min--moz-device-pixel-ratio: 2),    /*  Older Firefox browsers (prior to Firefox16) */
       (-o-min-device-pixel-ratio: 2/1),    /*  Opera */
       (min-device-pixel-ratio: 2),         /*  not defined yet, http://www.w3.org/TR/css3-mediaqueries/ */
       (min-resolution: 2dppx),             /*  not yet, probably in future, see http://www.w3.org/TR/css3-mediaqueries/ */
       (min-resolution: 192dpi)             /*  works for non css3 browser */
       {
            /* your styles go here */
       } 
```

*   Opera 值应为 1/1、3/2、2/1 等价于 1、1.5 和 2。
*   dpi 值应为 96、144、192，相当于 1、1.5 和 2。

使用 -webkit-text-size-adjust:none 时；从纵向模式切换到横向模式时，iPhone 上的字体大小不会爆炸；-)

# html - 如果 doctype 中未提及，默认网页 DTD 是什么？

> ID：12649870
> 
> 赞同：0
> 
> 时间：2012-09-29T04:18:59.503
> 
> 标签：html, doctype

由于网页第一行（通常）中的 Doctype 设置，网页渲染似乎存在相当大的差异。

所以我想知道如果没有提到默认的 DTD 是什么

例如，如果简单地这样说：

```
<!DOCTYPE html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:21:15.323

[这就是 HTML5 文档类型声明](http://dev.w3.org/html5/spec/syntax.html#the-doctype)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:59:12.957

> 由于网页第一行（通常）中的 Doctype 设置，网页渲染似乎存在相当大的差异。

浏览器使用 Doctypes 作为魔术字符串在[Quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)和标准模式（以及几乎标准模式）之间切换。您需要一个真正的 SGML/XML 解析器来处理 DTD。

> 所以我想知道如果没有提到默认的 DTD 是什么

如果有公共标识符但没有系统标识符，则解析器应在本地目录中查找 DTD。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^ — Formal Public Identifier 
```

然而，您所拥有的是 HTML 5 Doctype，它被设计成*只是*魔术模式切换字符串。HTML 5 明确不是基于 SGML。因此，根本没有与之关联的 DTD。

# php - 使用查找表更新/编辑 mysql 数据

> ID：12649873
> 
> 赞同：0
> 
> 时间：2012-09-29T04:20:23.623
> 
> 标签：php, mysql

我有 4 张桌子：

```
Departments:

dept_id         dept_name

1       dept 1
2       dept 2
3       dept 3
4       dept 4

-------------

Hours:

hours_id    proj_hours
1       18
2       36

-------------

Project:

proj_id     proj_name
1       project1
2       project2

-------------

Summary:

Summary_id  proj_id     hours_id    dept_id
1       1       1       1
2       2       1       2
3       1       2       3
4       1       1       4

-----------------------------------------------------

SELECT *
FROM summary S
JOIN projects P ON S.proj_id = P.proj_id
JOIN departments D ON D.dept_id = S.dept_id
JOIN hours H ON H.hours_id = S.hours_id 
```

* * *

我有一个 index.php 表，它整齐地显示上面的连接数据，但编辑功能损坏.....我不知道如何通过手动编辑功能从查找表中更新实际值。

`<td align="center"><a href="edit2.php?id=<?php echo $rows['summary_id']; ?>">Edit</a></td>`

用于将 summary_id 发送到编辑页面，它肯定会发送，但不是值。我有空白字段。从那里，我想让我的字段准备好编辑，但同样，空白字段......我遇到了“id”而不是“值”的问题，并且格式化正确。

建议？

编辑.php代码：

```
<?php
        // Connect to server and select database.
        mysql_connect("$host", "$username", "$password")or die("cannot connect");
        mysql_select_db("$db_name")or die("cannot select DB");

        if(isset($_GET['summary_id']))  
        {
            $id = $_GET['summary_id'];
            $res = mysql_query("SELECT * FROM summary WHERE proj_id='$proj_id'");
            $rows = mysql_fetch_array($res);
        }
        if (isset($_POST['nproj_id']))  

        {
            $summary_id     = $_POST['summary_id'];     
            $nproj_id       = $_POST['nproj_id'];
            $nclarity_id    = $_POST['clarity_id'];
            $nhours_id      = $_POST['nhours_id'];
            $ndept_id       = $_POST['ndept_id'];
            $sql            = "UPDATE summary SET clarity_id='$nclarity_id' WHERE proj_id='$proj_id'" 
            or die ("couldn't update".mysql_error());

            $res            = mysql_query($sql) or die ("couldn't update".mysql_error());
                            echo "<meta http-equiv='refresh' content='0;url=index2.php'>";
        }

?>

<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<form name="form1" method="post" action="edit2.php">
<td>
<table width="100%" border="0" cellspacing="1" cellpadding="0">
<tr>
<td>&nbsp;</td>
<td colspan="3"><strong>Update data in mysql</strong> </td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>

</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center"><strong>Clarity ID</strong></td>
<td align="center"><strong>Hours</strong></td>
<td align="center"><strong>Department</strong></td>

</tr>
<tr>
<td>&nbsp;</td>
<td align="center">
<input name="nclarity_id" type="text" id="nclarity_id" value="<?php echo $rows['clarity_id']; ?>">
</td>
<td align="center">
<input name="nproj_hours" type="text" id="nproj_hours" value="<?php echo $rows['proj_hours']; ?>" size="15">
</td>
<td>
<input name="ndept_name" type="text" id="ndept_name" value="<?php echo $rows['dept_name']; ?>" size="15">
</td>
</tr>
<tr>
<td>&nbsp;</td>

<td>
<input name="summary_id" type="hidden" id="summary_id" value="<?php echo $rows['summary_id']; ?>">
</td>
<td align="center">
<input type="submit" name="Submit" value="Update">
</td>
<td>&nbsp;</td>
</tr>
</table>
</td>
</form>
</tr>
</table>

<?php
// close connection
mysql_close();
?> 
```

这是我的 index.php .... 您所做的更正仍然无效。:(

```
<?php   
 // Connect to server and select database.
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");

        if($_POST['submitted'])
        {
            $proj_id            = $_POST['proj_id'];
            $summary_id         = $_POST['summary_id'];
            $clarity_id         = $_POST['clarity_id'];
            $hours_id           = $_POST['hours_id'];
            $proj_hours         = $_POST['proj_hours'];
            $dept_name          = $_POST['dept_name'];
            $dept_id            = $_POST['dept_id'];

            $sqlinsert      = "INSERT INTO summary (summary_id,proj_id,hours_id,dept_id) VALUES (NULL,
            '$proj_id','$hours_id','$dept_id'";

            if (!mysql_query($sqlinsert)) {
            die('error inserting new record'.mysql_error());
        } // end of the nested if statement

        }
            $result = mysql_query("SELECT *
                        FROM summary S
                        JOIN projects P ON S.proj_id = P.proj_id
                        JOIN departments D ON D.dept_id = S.dept_id
                        JOIN hours H ON H.hours_id = S.hours_id
                        LIMIT 0 , 30");

    ?>

    <form action="index.php" method="post">
    Clarity #: <input type="text" name="clarity_id"><br />
    Estimated Hours: <input type="text" name="proj_hours"><br /> 
    Department: <input type="text" name="dept_name"><br />

    <input type="hidden" name="submitted" value="true"/>
    <input type="submit" value="enter">
    </form>

    <table width="400" border="0" cellspacing="1" cellpadding="0">
    <tr>
    <td>
    <table width="400" border="1" cellspacing="0" cellpadding="3">
    <tr>
    <td colspan="4"><strong>List data from mysql </strong> </td>
    </tr>

    <tr>
    <td align="center"><strong>Clarity#</strong></td>
    <td align="center"><strong>Estimated Hours</strong></td>
    <td align="center"><strong>Department</strong></td>
    </tr>

    <?php
    while($rows=mysql_fetch_array($result)){
    ?>

    <tr>
    <td><?php echo $rows['clarity_id']; ?></td>
    <td><?php echo $rows['proj_hours']; ?></td>
    <td><?php echo $rows['dept_name']; ?></td>
    <td align="center"><a href="edit2.php?id=<?php echo $rows['summary_id']; ?>">Edit</a></td>
    </tr>

    <?php
    }
    ?>

    </table>
    </td>
    </tr>
    </table>

    <?php
    mysql_close();
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:34:12.780

做了一些更正..试试这个

```
 <?php
    // Connect to server and select database.
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");

    if(isset($_GET['summary_id']))  
    {
        $id = $_GET['summary_id'];
        $res = mysql_query("SELECT * FROM summary WHERE `summary_id`='$id'");//Correction is made here
        if($res){
        $rows = mysql_fetch_array($res);
        }
        else{
         echo "Fetch Error: ".mysql_error();
        }
    }
    if (isset($_POST['btnSubmit']))  //correction is here

    {
        $summary_id     = $_POST['summary_id'];     
        $nproj_id       = $_POST['nproj_id'];
        $nclarity_id    = $_POST['clarity_id'];
        $nhours_id      = $_POST['nhours_id'];
        $ndept_id       = $_POST['ndept_id'];
        $sql            = "UPDATE summary SET clarity_id='$nclarity_id' WHERE proj_id='$proj_id' AND `summary_id`='{$summary_id}'"; //correction is here

        if(mysql_query($sql)){echo "Update successful";}else{echo "couldn't update".mysql_error();}
                        echo "<meta http-equiv='refresh' content='0;url=index2.php'>";
    }

    ?>

   <table width="400" border="0" cellspacing="1" cellpadding="0">
   <tr>
   <form name="form1" method="post" action="edit2.php">
   <td>
   <table width="100%" border="0" cellspacing="1" cellpadding="0">
   <tr>
   <td>&nbsp;</td>
   <td colspan="3"><strong>Update data in mysql</strong> </td>
   </tr>
   <tr>
   <td align="center">&nbsp;</td>
   <td align="center">&nbsp;</td>
   <td align="center">&nbsp;</td>

   </tr>
   <tr>
   <td align="center">&nbsp;</td>
   <td align="center"><strong>Clarity ID</strong></td>
   <td align="center"><strong>Hours</strong></td>
   <td align="center"><strong>Department</strong></td>

   </tr>
   <tr>
   <td>&nbsp;</td>
   <td align="center">
   <input name="nclarity_id" type="text" id="nclarity_id" value="<?php echo $rows['clarity_id']; ?>">
   </td>
   <td align="center">
   <input name="nproj_hours" type="text" id="nproj_hours" value="<?php echo $rows['proj_hours']; ?>" size="15">
   </td>
   <td>
   <input name="ndept_name" type="text" id="ndept_name" value="<?php echo $rows['dept_name']; ?>" size="15">
   </td>
   </tr>
   <tr>
   <td>&nbsp;</td>

   <td>
   <input name="summary_id" type="hidden" id="summary_id" value="<?php echo $rows['summary_id']; ?>">
   </td>
   <td align="center">
   <input type="submit" name="btnSubmit" value="Update"> <!--correction is here-->
   </td>
   <td>&nbsp;</td>
   </tr>
   </table>
   </td>
   </form>
   </tr>
   </table>

   <?php
   // close connection
   mysql_close();
   ?> 
```

# image - 在两个目录中搜索具有不同文件名的相似图像

> ID：12649876
> 
> 赞同：1
> 
> 时间：2012-09-29T04:20:56.120
> 
> 标签：image, graphics, imagemagick

我有 2 个目录，其中包含大量图像，例如：*color/*和*gray/*。在*颜色/*图像中命名为：image1.png image2.png 等。

我知道*gray/*包含相同的图像，但是是灰度图像，并且文件名和文件顺序不同（例如：file_01.png，但这与 image1.png 不同）。

是否可以比较两个目录中的图像并将*color/*文件复制到带有*gray/文件名的**results* / 目录？

 ***例子：**

```
directory        | directory           | directory
   "color/"      |     "gray/"         |      "results/" 
(color images)   | (grayscale images)  | (color images with gray-scale names)   
-----------------+---------------------+----------------------------------------
color/image1.png | gray/file324.png    | results/file324.png  (in color: ==>
                                       | this and image1.png are the same image) 
```

我希望这不是很混乱，但我不知道如何更好地解释它。

我已经尝试过使用 imagemagick，似乎 -compare 选项可以解决这个问题，但我无法制作一个 bash 脚本或其他做得很好的东西。

另一种说法：我希望使用正确匹配的名称将所有内容`color/*.jpg`复制到文件夹中。`results/*.jpg``gray/*.jpg`

**编辑（一些注释）：** 1\. 这三个图像的大小和内容相同。唯一的区别是两个是彩色的，一个是灰度的。当然还有文件的名称。2\. 我上传了一个带有当前名称的示例图像的 zip 文件（文件夹*“img1”*是*颜色*文件夹，文件夹*“img2”*是*灰度*文件夹）和预期结果（*“img3”*是*结果*文件夹），这里：[http://www.mediafire.com/?9ug944v6h7t3ya8](http://www.mediafire.com/?9ug944v6h7t3ya8)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T23:11:13.003

如果我正确理解了要求，我们需要：

*   *查找文件夹gray/*中名为 XYZ的每个*灰度*图像...
**   *...文件夹color/*中名为 ABC的匹配*彩色*图像和...**   ...以新名称 XYZ将 ABC 复制到文件夹*results/***

 **所以我建议的基本算法是这样的：

1.  *将文件夹color/*中的所有图像转换为灰度并将结果存储在文件夹*gray-reference/*中。保留原始名称：

    ```
    mkdir gray-reference
    convert  color/img123.jpg  -colorspace gray  gray-reference/img123.jpg 
    ```

2.  对于*reference/*中的每个灰度图像，与文件夹*gray/*中的每个灰度图像进行比较。如果找到匹配项，请将同名图像从*color/*复制到*results/*。创建差异的视觉表示的一种可能的比较命令是：

    ```
    compare  gray-reference/img123.jpg  gray/imgABC.jpg  -compose src delta.jpg 
    ```

真正的技巧是两个灰度图像的比较（如第 2 步）。ImageMagick 有一个方便的命令来逐像素比较两个（相似）图像并将结果写入“增量”图像：

```
compare  reference.png  test.png  -compose src  delta.png 
```

**如果比较是针对彩色图像**，则在增量图像中...

*   ...每个相等的像素都显示为白色，而...
*   ...每个不同的像素都以高亮颜色显示（默认为红色）。

**另请参阅我的回答[“ImageMagick: 'Diff' an Image”](https://stackoverflow.com/a/11362152/359307)以获取此技术的图解示例。**

如果我们直接**将灰度图像与彩色图像**逐个像素进行比较，我们当然会发现几乎每个像素都是不同的（导致全红色的“delta”图片）。因此，我在上面的步骤 1 中建议首先将彩色图像转换为灰度图像。

如果我们**比较两个灰度图像**，得到的增量图像也是灰度的。因此默认的高亮颜色不能是红色。我们最好将其设置为“黑色”以便更好地看到它。

现在，如果我们当前的颜色灰度转换会导致与现有灰度图像具有的灰度“不同”类型的灰度（由于不同的颜色配置文件，我们当前生成的灰度可能比现有灰度图像略亮或更暗已应用），我们的增量图片**仍然**可能是全“红色”，或者更确切地说是全高亮颜色。但是，我用您的示例图像对此进行了测试，结果很好：

```
 convert  color/image1.jpg  -colorspace gray  image1-gray.jpg  
 compare                  \
    gray/file324.jpg      \
    image1-gray.jpg       \
   -highlight-color black \
   -compose src           \
    delta.jpg 
```

*delta.jpg*由 98% 的白色像素组成。我不确定您的数千张灰度图像中的所有其他图像在从彩色原件中派生时是否使用相同的设置。因此，我们在运行命令时添加了一个小的*模糊*因子`compare`，这确实允许在比较 2 个像素时出现一些颜色偏差：

```
compare  -fuzz 3%  reference.png  test.png  -compose src  delta.png 
```

由于该算法要执行数千次（可能是数百万次，考虑到您所说的图像数量），因此我们应该考虑一些性能因素，并且应该对`compare`命令的持续时间进行计时。这尤其令人担忧，因为您的示例图像相当大（3072x2048 像素 - 6 兆像素），并且比较可能需要一段时间。

我在 MacBook Pro 上的计时结果如下：

```
time (convert  color/image1.jpg  -colorspace gray  image1-gray.jpg ;
      compare                   \
         gray/file324.jpg       \
         image1-gray.jpg        \
        -highlight-color black  \
        -fuzz 3%                \
        -compose src            \
         delta100-fuzz.jpg)

  real  0m6.085s
  user  0m2.616s
  sys   0m0.598s 
```

6 秒：1 次将大型彩色图像转换为灰度，加上 1 次比较两个大型灰度图像。

你谈到了“成千上万的图像”。假设有 3000 张图像，基于这个时间，所有图像的处理将需要`(3000*3000)/2`比较（450 万）和`(3000*3000*6)/2`秒（2700 万秒）。完成所有比较总共需要 312 天。太长了，如果你问我。

我们可以做些什么来提高性能？

好吧，我的第一个想法是减小图像的大小。如果我们比较较小的图像而不是 3072x2048 大小的图像，则比较应该更快地返回结果。（但是，我们还将花费*额外*的时间来首次缩小测试图像 - 但希望比我们稍后在比较较小图像时节省的时间要少得多：

```
time (convert color/image1.jpg  -colorspace gray  -scale 6.25%  image1-gray.jpg  ;
      convert gray/file324.jpg                    -scale 6.25%  file324-gray.jpg ;
      compare                  \
         file324-gray.jpg      \
         image1-gray.jpg       \
        -highlight-color black \
        -fuzz 3%               \
        -compose src           \
         delta6.25-fuzz.jpg)

   real  0m0.670s
   user  0m0.584s
   sys   0m0.074s 
```

那好多了！我们缩短了近 90% 的处理时间，如果您使用 MacBook Pro，这让您有希望在 35 天内完成工作。

改进是合乎逻辑的：通过将图像尺寸减小到原始图像的 6.25%，生成的图像只有 192x128 像素——从 600 万像素减少到 24500 像素，比例为 256:1。

（**注意：**`-thumbnail`和`-resize`参数的工作速度会比实际快一点`-scale`。但是，这种速度的提高是对质量损失的权衡。质量损失可能会使比较不那么可靠......）

我们可以告诉 ImageMagick 打印出一些统计数据，而不是从比较图像中创建视觉上可检查的 delta 图像。要获得不同像素的数量，我们可以使用`AE`度量。其结果的命令是这样的：

```
time (convert color/image1.jpg -colorspace gray -scale 6.25% image1-gray.jpg  ;
     convert gray/file324.jpg                   -scale 6.25% file324-gray.jpg ;
     compare -metric AE  file324-gray.jpg image1-gray.jpg -fuzz 3% null: 2>&1 )
0 

  real  0m0.640s
  user  0m0.574s
  sys   0m0.073s 
```

这意味着我们有`0`不同的像素——我们可以直接在 shell 脚本中使用这个结果！

## Shell 脚本的构建块

因此，这里是用于进行自动比较的 shell 脚本的构建块：

1.  **将 'color/' 目录中的彩色图像转换为灰度图像，将它们缩小到 6.25% 并将结果保存在 'reference-color/' 目录中：**

    ```
    # Estimated time required to convert 1000 images of size 3072x2048:
    #   500 seconds
    mkdir reference-color
    for i in color/*.jpg; do
        convert  "${i}"  -colorspace gray  -scale 6.25%  reference-color/$(basename "${i}")
    done 
    ```

2.  **从 'gray/' 目录缩小图像并将结果保存在 'reference-gray/' 目录中：**

    ```
    # Estimated time required to convert 1000 images of size 3072x2048:
    #    250 seconds
    mkdir reference-gray
    for i in gray/*.jpg; do
        convert  "${i}"  -scale 6.25%  reference-gray/$(basename "${i}")
    done 
    ```

3.  **将目录“reference-gray/”中的每个图像与目录“reference-color”中的图像进行比较，直到找到匹配项：**

    ```
    # Estimated time required to compare 1 image with 1000 images:
    #    300 seconds
    # If we have 1000 images, we need to conduct a total of 1000*1000/2
    # comparisons to find all matches;
    #    that is, we need about 2 days to accomplish all.
    # If we have 3000 images, we need a total of 3000*3000/2 comparisons
    # to find all matches;
    #    this requires about 20 days.
    #
    for i in reference-gray/*.jpg ; do

        for i in reference-color/*.jpg ; do

            # compare the two grayscale reference images
            if [ "x0" == "x$(compare  -metric AE  "${i}"  "${j}" -fuzz 3%  null: 2>&1)" ]; then

                # if we found a match, then create the copy under the required name
                cp color/$(basename "${j}"  results/$(basename "${i}") ;

                # if we found a match, then remove the respective reference image (we do not want to compare again with this one)
                rm -rf "${i}"

                # if we found a match, break from within this loop and start the next one
                break ;

            fi

        done

    done 
    ```

**警告：**不要盲目依赖这些构建块。它们未经测试。我没有可用于测试的多个合适图像的目录，并且我不想自己创建一个只是为了这个练习。谨慎行事！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T10:18:14.977

如果诸如[pHash 之类的](http://www.phash.org/)*感知散列技术*对您的具体数据产生了一些好的结果，您应该尝试一下。

感知散列将为您提供可靠的相似性度量，因为底层算法足够强大，可以考虑对比度调整或不同压缩/格式等变化/转换 - 这与 MD5 等标准加密散列函数不同。

此外，您可以通过在您自己的图像上使用其方便的基于 Web 的[演示界面来验证 pHash 是否有效。](http://www.phash.org/demo/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:37:55.133

在对 -fuzz 选项进行一些调整和摆弄之后，Kurt 的解决方案非常有效！:) 最终运行良好的 -fuzz 的最终值为 50%！我尝试了 3、10、19、20、24、25、30 和 40%，但没有成功。可能是因为之前生成的灰度图像是用不同的方法生成的，所以灰度是不同的。此外，所有图像的大小都不同，其中一些相对较小，因此按百分比缩放方法会产生不好的结果。我使用`-resize 200x`了 ，所以所有参考图像的大小或多或少都相同，最后这是我使用的 bash 脚本：

```
 # this bash assumes the existence of two dirs: color/ and gray/ 
    # each one with images to compare

    echo Starting...
    echo Checking directories...
    if [ ! -d color ]; then
        echo Error: the directory color does not exist!
        exit 1;
    fi
    if [ ! -d gray ]; then
        echo Error: the directory gray does not exist!
        exit 1;
    fi

    echo Directories exist. Proceeding...

    mkdir reference-color
    echo creating reference-color...
    for i in color/*.png; do
        convert  "${i}"  -colorspace gray  -resize 200x  reference-color/$(basename "${i}")
    done
    echo reference-color created...

    mkdir reference-gray
    echo creating reference-gray...
    for i in gray/*.png; do
        convert  "${i}"  -resize 200x  reference-gray/$(basename "${i}")
    done
    echo reference-gray created...

    mkdir results
    echo created results directory...

    echo ...ready.

    echo "-------------------------"
    echo "|  starting comparison  |"
    echo "-------------------------"

    for i in reference-gray/*.png; do
        echo comparing image $i 

        for j in reference-color/*.png; do

            # compare the two grayscale reference images

            if [ "x0" == "x$(compare  -metric AE "${i}"  "${j}" -fuzz 50% null: 2>&1)" ]; then

                # if we found a match, then create the copy under the required name
                echo Founded a similar one. Copying and renaming it...
                cp color/$(basename "${j}")  results/$(basename "${i}")

                # if we found a match, then remove the respective reference image (we do not want to compare again with this one)
                echo Deleting references...
                rm -rf "${i}"
                rm -rf "${j}"
                echo "--------------------------------------------------------------"

                # if we found a match, break from within this loop and start the next one
                break ;

            fi

        done

    done
    echo Cleaning...
    rm -rf reference-color
    rm -rf reference-gray
    echo Finished! 
```

时间度量是（对于 180 个图像，在 cygwin 中使用 imagemagick，所以在本机 linux imagemagick 中可能更好，我还不知道）：

```
real    5m29.308s
user    2m25.481s
sys     3m1.573s 
```

如果有人感兴趣，我上传了一个包含脚本和一组测试图像的文件。[http://www.mediafire.com/?1ez0gs6bw3rqbe4](http://www.mediafire.com/?1ez0gs6bw3rqbe4)（以7z格式压缩）

再次感谢！***

# c++ - GL_INVALID_OPERATION 随机 opengl es 2.0 函数

> ID：12649881
> 
> 赞同：0
> 
> 时间：2012-09-29T04:21:31.533
> 
> 标签：c++, opengl-es, opengl-es-2.0

我正在我的游戏中间执行以下 C++ 代码（除此之外一切都运行良好），并且在渲染时我没有运行它：

```
MetaBalls::MetaBalls() : largeTexture(NULL), metaballsShader(NULL), smallTexture(NULL), smallFBO(0), largeFBO(0) {

// 1\. Compile shader that will render small texture onto larger texture using blur threshold
CRender::Instance()->CreateShader("Shaders/metaballs.fs", "Shaders/metaballs.vs", &metaballsShader);
metaballsShader->_locations["projview"] = glGetUniformLocation(metaballsShader->_program, "projview");

// 4\. Load the sprite that will be rendered as particles on the small texture
// TODO: batch render this
m_metaballSprite.InitSprite("Embellishments/particle.png", OFFSCREEN);

// 2\. Create new texture and 2 frame buffers
// First frame buffer to render small texture, second frame buffer to scale small texture up into big one
glGenTextures(1, &smallTexture);
glBindTexture(GL_TEXTURE_2D, smallTexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8_OES, SMALL_TEX_W, SMALL_TEX_H, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);

// 3\. Create second larger texture to contain final water textured (rendered in game as sprite)
glGenTextures(1, &largeTexture);
glBindTexture(GL_TEXTURE_2D, largeTexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8_OES, LARGE_TEX_W, LARGE_TEX_H, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);

// 5\. Attach small texture to frame buffer
glGenFramebuffers(1, &smallFBO);
glBindFramebuffer(GL_FRAMEBUFFER, smallFBO);
glBindTexture(GL_TEXTURE_2D, smallTexture);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, smallTexture, 0);
if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {
    s3eDebugErrorShow(S3E_MESSAGE_CONTINUE_STOP, "Metaballs small framebuffer incomplete");
}

// 6\. Attach large texture to other frame buffer
glGenFramebuffers(1, &largeFBO);
glBindFramebuffer(GL_FRAMEBUFFER, largeFBO);
glBindTexture(GL_TEXTURE_2D, largeTexture);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, largeTexture, 0);
if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {
    s3eDebugErrorShow(S3E_MESSAGE_CONTINUE_STOP, "Metaballs small framebuffer incomplete");
}

// 7\. Build geometry for small frame buffer
float w = PTM_DOWNSCALE(SMALL_TEX_W);
float h = PTM_DOWNSCALE(SMALL_TEX_H);
CRender::Instance()->BuildQuad(
    tVertex( b2Vec3(0,0,0), b2Vec2(0,1) ),
    tVertex( b2Vec3(w,0,0), b2Vec2(1,1) ),
    tVertex( b2Vec3(w,h,0), b2Vec2(1,0) ),
    tVertex( b2Vec3(0,h,0), b2Vec2(0,0) ),
    smallBuffer);

// 8\. Build geometry for large frame buffer
w = PTM_DOWNSCALE(SMALL_TEX_W);
h = PTM_DOWNSCALE(SMALL_TEX_H);
CRender::Instance()->BuildQuad(
    tVertex( b2Vec3(0,0,0), b2Vec2(0,1) ),
    tVertex( b2Vec3(w,0,0), b2Vec2(1,1) ),
    tVertex( b2Vec3(w,h,0), b2Vec2(1,0) ),
    tVertex( b2Vec3(0,h,0), b2Vec2(0,0) ),
    largeBuffer);

// return to default state
glBindFramebuffer(GL_FRAMEBUFFER, 0);
} 
```

我的问题是我收到了从 OpenGL ES 2.0 报告的这个错误：

```
GL Error GL_INVALID_OPERATION on entry to function glGenFramebuffers(1, 0xd8450e8) 
```

如果我在函数开始附近切换上述 opengl 调用的顺序，我可以在 glGenTextures 行、glBindFramebuffer 或什至在第一个 CreateShader 函数内执行的 glCreateProgram() 上出现 GL_INVALID_OPERATION。尽管使用当前调用顺序，着色器正在加载和编译正常。

我得到的错误破坏了 opengl.org 上这些调用的记录结果，例如，如果您传递 glGenFrameBuffers 未返回的非零值，glGenFramebuffers 应该只返回 GL_INVALID_OPERATION。但是，我检查了从 glGenFrameBuffers 返回的整数......它们是 2 和 3。这些没有错，因为我已经有了第三个帧缓冲区 elseware。我还尝试同时生成纹理和帧缓冲区，但它们会产生相同的 GLuint 并且会发生相同的错误。

知道这个错误是如何引起的吗？过去我在这个类中运行过类似的代码没有问题。

# box-api - Box api v2 反馈：“文件夹”响应应该至少包含一些关于文件的信息

> ID：12649882
> 
> 赞同：0
> 
> 时间：2012-09-29T04:21:41.873
> 
> 标签：box-api

这是基于 Box.net 在开发人员页面上要求 v2 反馈的评论的反馈。

api 当前为每个文件夹“条目”返回的内容类似于：

```
"entries" : 
[
    {
        "sequence_id": "0",
        "type": "file",
        "id": "2631999573",
        "name":"IMG_1312.JPG"
    },
    {
        "type":"folder",
        "id":"2305623799",
        "sequence_id":"1",
        "name":"a child folder"
    }
] 
```

这意味着要检索子条目的基本元数据（大小、修改日期等），我必须为每个项目发出 REST 请求。这显然是非常低效的。

问题是：在 v2 发布之前有没有可能改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T06:03:16.757

您是否看到我们刚刚在周五发布的关于我们正在为 V2 端点推出的 ?fields 支持的新博文？这应该准确地解决您的要求，因为您可以要求返回更多字段。

[http://developers.blog.box.com/2012/09/28/exciting-new-v2-updates/](http://developers.blog.box.com/2012/09/28/exciting-new-v2-updates/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T18:19:10.833

当您进行 API 调用以检索文件夹的项目时，即

```
GET /folders/{folder id}/items 
```

您可以使用逗号分隔的列表指定一个可选`fields`参数，该列表包含您希望在结果项目集合中返回的属性。属性可以是为完整[文件](http://developers.box.com/docs/#files-file-object-2)和[文件夹](http://developers.box.com/docs/#folders-folder-object)对象列出的任何属性。

例如，如果我打这个电话

```
GET /folders/{id}/items?fields=name,modified_at,description 
```

我会收到这个回复

```
{
"total_count":2,
"entries":[
    {
        "type":"file",
        "id":"2305649799",
        "name":"a file",
        "modified_at":"2012-06-04T21:32:21-07:00",
        "description":"hey look it's a file"
    },
    {
        "type":"folder",
        "id":"2305649799",
        "name":"a folder",
        "modified_at":"2012-06-04T21:32:21-07:00",
        "description":"hey look it's a folder"
    }
] 
```

}

始终返回 type 和 id 以便能够正确识别项目。

# mysql - Grails GORM MySQL 生成 TEXT 或 LONGTEXT 列

> ID：12649884
> 
> 赞同：11
> 
> 时间：2012-09-29T04:21:48.680
> 
> 标签：mysql, grails, grails-orm, grails-2.0

我正在使用`Grails 2.1.1`和`MySQL 5.5.27 Community Server`。

我需要一个域类字段生成一个 TEXT 或 LONGTEXT 列。

我认为这很简单，我看过很多例子：

[Grails 域类、String 字段 TEXT 和 LONGTEXT](https://stackoverflow.com/questions/433621/grails-domain-class-string-field-text-and-longtext)

[grail如何生成TEXT而不是LONGTEXT数据类型或列](http://grails.1312388.n4.nabble.com/How-can-grail-generate-TEXT-not-LONGTEXT-data-type-or-column-td4632061.html)

然而，我整晚都陷入了死胡同。我遵循了所有这些示例，但似乎没有一个有效（尽管其他人报告说它有效）。

这是我创建的示例域类：

```
class Coltest {

    static constraints = {
        description1 sqlType: 'longtext'
        description2 sqlType: 'text'
        description3 type: 'text'
        description4 column: "longDescription", type: "text", nullable:true
    }

    String description1
    String description2
    String description3
    String description4
} 
```

这是我在 MySQL 命令界面中得到的内容：

```
mysql> describe coltest;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| version      | bigint(20)   | NO   |     | NULL    |                |
| description1 | varchar(255) | NO   |     | NULL    |                |
| description2 | varchar(255) | NO   |     | NULL    |                |
| description3 | varchar(255) | NO   |     | NULL    |                |
| description4 | varchar(255) | YES  |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+
6 rows in set (0.01 sec) 
```

无论我尝试什么，我似乎总是得到一个 varchar(255) 类型的列。

如果我遗漏了一些愚蠢的东西，我深表歉意，但我整晚都盯着这个，并认为我已经尝试了其他人报告的所有工作。

任何见解将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-29T04:35:09.210

我认为问题在于“sqlType”属于映射，而不是约束。

尝试：

```
static constraints = {
  description2 size: 1..5000
} 
```

或者

```
static mapping = {
  description2 sqlType:"text"
} 
```

# c++ - 如何使用 IHTMLDocument3::attachEvent

> ID：12649887
> 
> 赞同：0
> 
> 时间：2012-09-29T04:22:12.150
> 
> 标签：c++, internet-explorer, bho

我找不到在 C++ 中使用 IHTMLDocument3::attachEvent 的任何示例。[MSDN](http://msdn.microsoft.com/en-us/library/aa752535%28v=vs.85%29.aspx)中描述的功能也与 Visual Studio 描述的不同：

```
 MSDN: attachEvent(BSTR event, IDispatch *pDisp)
  VS: attachEvent(BSTR event, IDispatch *pDisp, VARIANT_BOOL *pfResult) 
```

有人有 C++ 的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:10:47.190

描述是准确的：在 C++ 中，您实际上已经将值`pfResult`作为`[out]`参数返回，并且方法返回`HRESULT`以指示成功或失败（失败在脚本端被转换为异常）。

`pDisp`需要实现`IDispatch`能够处理零 ( )`IDispatch::Invoke`的 dispid 。`DISPID_VALUE`

# spring - Hibernate + Spring + JSF：Criteria.List() 返回空

> ID：12649889
> 
> 赞同：0
> 
> 时间：2012-09-29T04:22:24.820
> 
> 标签：spring, hibernate, jakarta-ee

当 MBean 调用下面的 getAll 方法时，该方法返回空。

```
@Repository("bookRepository")
@Transactional(propagation = Propagation.MANDATORY, readOnly = true)
public class BookRepositoryImpl implements BookRepository {

@Autowired
private SessionFactory sessionFactory;

@SuppressWarnings("unchecked")
public List<Book> getAll() {

    return getSession().createCriteria(Book.class).list();
}

private Session getSession() {
    return sessionFactory.getCurrentSession();
} 
```

}

书类：

```
@Entity
@Table(name = "book")
public class Book implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 2581522135048868175L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    @Column(name = "title", unique = true, nullable = false)
    private String title;
    @Column(name = "author", nullable = false)
    private String author;
    @Column(name = "isbn_code", unique = true, nullable = false, length = 10)
    private String isbnCode;
    @Column(name = "year")
    private Integer year;
    @Column(name = "price")
    private Double price;

    // Constructors

// Getters and Setters 
```

}

应用上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"                                               xmlns:util="http://www.springframework.org/schema/util"
xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd">

<context:annotation-config /> <!-- bean definitions go here -->
<context:component-scan base-package="br.com.myproject.faces">
    <context:include-filter type="annotation"
        expression="org.springframework.stereotype.Controller" />
</context:component-scan>

<context:component-scan base-package="br.com.myproject.service.impl">
    <context:include-filter type="annotation"
        expression="org.springframework.stereotype.Service" />
</context:component-scan>

<context:component-scan base-package="br.com.myproject.domain.model">
    <context:include-filter type="annotation"
        expression="org.springframework.stereotype.Repository" />
</context:component-scan>

<!-- HIBERNATE configuration INIT -->

<context:property-placeholder location="classpath:hibernate.properties" />

<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan">
        <list>
            <value>org.camelcode.model</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <!-- <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop> -->
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
        </props>
    </property>
</bean>

<!-- HIBERNATE configuration END --> 
```

Ps：我在 book 表中插入记录，注入的所有实例都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:55:12.860

你的 hibernate-config.xml 中有这个条目吗

```
<property name="packagesToScan">
            <list>
                <value>Here you need to mention package name where your book class resides</value>
            </list>
        </property> 
```

或需要提及如下映射类

```
<mapping class="package.Book"/> 
```

您是否缺少这些条目？

# bash - 为什么我的终端不能正确输出 unicode 字符？

> ID：12649896
> 
> 赞同：53
> 
> 时间：2012-09-29T04:23:44.457
> 
> 标签：bash, shell, command-line, console, terminal

例如，我的终端是这样做的：

```
$ echo -e "\xE2\x98\xA0"
��� 
```

我希望它这样做：

```
$ echo -e "\xE2\x98\xA0"
☠ 
```

为什么？如何让我的终端输出正确的 unicode 符号？

我在 Arch Linux 上使用 Gnome 3 的终端。

显示的输出`locale`：

```
LANG=C
LC_CTYPE="C"
LC_NUMERIC="C"
LC_TIME="C"
LC_COLLATE="C"
LC_MONETARY="C"
LC_MESSAGES="C"
LC_PAPER="C"
LC_NAME="C"
LC_ADDRESS="C"
LC_TELEPHONE="C"
LC_MEASUREMENT="C"
LC_IDENTIFICATION="C"
LC_ALL= 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-29T06:26:22.933

我想到了。我必须确保我设置`LANGUAGE="en_US.UTF-8"`了 in`/etc/rc.conf`和`LANG="en_US.UTF-8"`in `/etc/locale.conf`，然后注销并重新登录，它可以工作。我的终端现在可以正确显示 unicode。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-10-04T00:34:48.273

我使用以下命令更新了我的语言环境：

```
sudo update-locale LANG=en_US.UTF-8 LANGUAGE=en.UTF-8 
```

然后重新启动：

```
sudo reboot 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-11T10:57:31.057

如果您无法更改`/etc/*`文件，您可以手动设置`gnome-terminal`菜单`Terminal`| `Set Character Encoding`至`Unicode(Utf-8)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-15T16:32:33.327

切换到新PC后，我试图解决此问题。我正在使用`Windows Terminal`with `Ubuntu`intilled in `WSL2`on `Win 10`。

我尝试了此处提供的建议并重新启动；没变。

**解决方案**

对我来说，解决方法是安装[修补的书呆子字体](https://github.com/ryanoasis/nerd-fonts/tree/master/patched-fonts)，并将该字体设置为 Windows 终端设置中每个配置文件的默认字体。

[![在此处输入图像描述](../Images/c5730cf1fa2a1302700bd184c8576e2c.png)](https://i.stack.imgur.com/BF6x8.png)

# c# - 如何从动态 RadioButtonList 数组中获取 SelectedValue？

> ID：12649897
> 
> 赞同：0
> 
> 时间：2012-09-29T04:24:42.013
> 
> 标签：c#, asp.net

谁能帮我从我的动态中获取选定的值，我的事件`RadioButtonList`中总是得到一个空值。`choices[x].SelectedValue``Button_Click`

有谁知道如何解决这个问题？谢谢你。这是我的代码背后：

```
public static string[] questions;
public static string[] ans;
Random rand = new Random();
string[] option = new string[3];
static int items;
public static Label[] ques;
public static RadioButtonList[] choices;

protected void Page_Load(object sender, EventArgs e)
{

    if (!IsPostBack)
    {               

        GetRandomQuestionClass.Get_No_Of_Items(Convert.ToInt32(Session["user"]));
        items = GetRandomQuestionClass.NO_OF_ITEMS;                                                                                                      GetRandomQuestionClass.LOAD_QUESTION_ID(Session["QuizLessonCategory"].ToString());
        ques = new Label[items];
        questions = new string[items];
        ans = new string[items];
        choices = new RadioButtonList[items];
        for (int x = 0; x < items; x++)
        {
            //int i = 0;
            ques[x] = new Label();
            ques[x].ID = "ques" + x.ToString();
            questions[x] = GetRandomQuestionClass.LOAD_QUESTIONS(x);
            ques[x].Text = Convert.ToString(x + 1) + ".) " + GetRandomQuestionClass.LOAD_QUESTIONS(x);
            choices[x] = new RadioButtonList();
            choices[x].ID = "choices" + x.ToString();

            GetRandomQuestionClass.GET_OPTIONS(x);

            ans[x] = GetRandomQuestionClass.LOAD_ANSWER(x);
            holder.Controls.Add(ques[x]);
            choices[x].Items.Add(new ListItem (GetRandomQuestionClass.LOAD_ANSWER(x)));
            choices[x].Items.Add(new ListItem (GetRandomQuestionClass.OPT1));
            choices[x].Items.Add(new ListItem (GetRandomQuestionClass.OPT2));
            choices[x].Items.Add(new ListItem (GetRandomQuestionClass.OPT3));

            holder.Controls.Add(choices[x]);
        }
    }

}

protected void ButtonSubmit_Click(object sender, EventArgs e)
{
    int score=0;
    for (int x = 0; x < items; x++)
    {
        RadioButtonList rb; 
        //rb=(RadioButtonList)FindControl("choices0");
        rb = (RadioButtonList)Page.FindControl("choices0");
        score = ComputeGradeClass.Score_Counter(ques[x].Text.ToString(),     choices[x].SelectedValue);
    }
    ComputeGradeClass.Grade(score);
} 
```

这是我的班级：

```
using System;
using System.Collections.Generic;
using System.Linq;

using System.Text;

using System.Data;

using System.Data.SqlClient;

using System.Configuration;

namespace CAIClassLibrary
{

    public class GetRandomQuestionClass
    {
        //ConfigurationManager.ConnectionStrings["myCon"].ConnectionString);//
        public static SqlConnection con = 
            new SqlConnection(@"Data Source=.\SQLEXPRESS;             
             AttachDbFilename=|DataDirectory|\MultimedaiCAIDB.mdf;Integrated     
             Security=True;User Instance=True");

        public static SqlCommand cmd = new SqlCommand();
        public static DataSet ds = new DataSet();
        public static SqlDataAdapter da = new SqlDataAdapter();
        public static SqlDataReader dr;

        public static string question,answer,opt1,opt2,opt3,opt4,opt5;
        public static int noofitems;
        public static int[] questionno;
        public static string section;

        public static string[] opt;

        public static int[] questionsID;

        public static int NO_OF_ITEMS
        {
            get { return noofitems; }
            set { noofitems = value; }
        }

        public static void Get_No_Of_Items(int studid)
        {   

            cmd = new SqlCommand("Select [Section Code] from StudentAccountTBL where [Student ID]=@ID", con);
            //cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@ID", SqlDbType.NVarChar).Value = studid;
            con.Open();
            dr = cmd.ExecuteReader();
            dr.Read();
            section = dr[0].ToString();
            con.Close();

            cmd = new SqlCommand("Select [No of Items] from QuizScheduleTBL where Section=@Section",con);
            //cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@Section",SqlDbType.NVarChar).Value = section;
            con.Open();
            dr = cmd.ExecuteReader();
            dr.Read();
            noofitems = Convert.ToInt16(dr[0]);
            con.Close();
        }

        public static void LOAD_QUESTION_ID(string category)
        {
            questionsID = new int[noofitems];
            int x = 0;
            cmd = new SqlCommand("Select TOP " + noofitems + " [Question ID] from QuestionTBL where [Lesson Category]=@Category Order By NEWID()", con);
            cmd.Parameters.Add("@Category",SqlDbType.NVarChar).Value = category;
            con.Open();
            dr = cmd.ExecuteReader();
            dr.Read();
            while (dr.Read())
            {
                questionsID[x] = Convert.ToInt16(dr[0]);
                x++;
            }
            con.Close();
        }

        public static string LOAD_QUESTIONS(int ques_id)
        {

            cmd = new SqlCommand("Select Question from QuestionTBL where [Question ID] = @QuestionID",con);
            cmd.Parameters.Add("@QuestionID",SqlDbType.Int).Value = questionsID[ques_id];
            con.Open();
            dr = cmd.ExecuteReader();
            dr.Read();
            question = dr[0].ToString();
            con.Close();

            return question;    
        }

        public static string LOAD_ANSWER(int ques_id)
        {
            cmd = new SqlCommand("Select Answer from QuestionTBL where [Question ID] = @QuestionID",con);
            cmd.Parameters.Add("@QuestionID", SqlDbType.Int).Value = questionsID[ques_id];
            con.Open();
            dr = cmd.ExecuteReader();
            dr.Read();
            answer = dr[0].ToString();
            con.Close();
            return answer;
        }

        public static void GET_OPTIONS(int ques_id)
        {
            cmd = new SqlCommand("Select Option1,Option2,Option3,Option4,Option5 from QuestionTBL where [Question ID] = @ID", con);
            cmd.Parameters.Add("ID",SqlDbType.Int).Value = ques_id;
            con.Open();
            dr = cmd.ExecuteReader();
            dr.Read();
            opt1 = dr[0].ToString();
            opt2 = dr[1].ToString();
            opt3 = dr[2].ToString();
            opt4 = dr[3].ToString();
            opt5 = dr[4].ToString();
            con.Close();
        }

        public static string OPT1
        {
            get { return opt1; }
            set { opt1 = value; }
        }

        public static string OPT2
        {
            get { return opt2; }
            set { opt2 = value; }
        }

        public static string OPT3
        {
            get { return opt3; }
            set { opt3 = value; }
        }
        public static string OPT4
        {
            get { return opt4; }
            set { opt4 = value; }
        }
        public static string OPT5
        {
            get { return opt5; }
            set { opt5 = value; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:33:09.000

因为您正在动态创建 RadioButtonList 控件，所以您需要确保**在每个 Postback 上构建您的项目。**

否则服务器将无法理解有关控件的任何内容。您可以在屏幕上看到它们，但无法访问它们。

因此，将创建 RadioButtonList 控件的代码移到外部关闭 **if (!IsPostBack)**块，然后尝试...

**编辑** 而不是这个

```
score = ComputeGradeClass.Score_Counter(ques[x].Text.ToString(),     choices[x].SelectedValue); 
```

尝试

```
score = ComputeGradeClass.Score_Counter(ques[x].Text.ToString(), rb.SelectedValue); 
```

# java - 打印二叉树路径时数组初始化冗余零

> ID：12649900
> 
> 赞同：1
> 
> 时间：2012-09-29T04:25:47.653
> 
> 标签：java, arrays, data-structures, tree, binary-tree

我试图从二叉树中打印所有路径。我能够打印树中的所有路径。但问题是它没有在输出中打印一些冗余零。数组是否用零初始化？如果是，那么如何克服这种情况下的问题？我正在学习，这就是为什么我在这里发布这个问题以了解更多信息并克服错误。

```
public class PrintAllPath {

static void printAllPaths(Tree tree) {
    int[] paths = new int[1000];
    printPathsRecur(tree, paths, 0);
}

static void printPathsRecur(Tree tree, int paths[], int pathlen) {
    if (tree == null)
        return;
    paths[pathlen++] = tree.val;
    pathlen++;

    if (tree.left == null && tree.right == null) {
        printArray(paths, pathlen);
    } else {
        printPathsRecur(tree.left, paths, pathlen);
        printPathsRecur(tree.right, paths, pathlen);
    }
}

static void printArray(int paths[], int pathlen) {
    for (int i = 0; i < pathlen; i++) {
        System.out.println("Node : " + paths[i]);
    }
}

static Tree insert(Tree tree, int element) {
    Tree tree2 = new Tree(element, null, null);
    if (tree == null)
        tree = tree2;
    else if (element < tree.val)
        tree.left = insert(tree.left, element);
    else
        tree.right = insert(tree.right, element);
    return tree;
}

static void print(Tree tree) {
    if (tree == null)
        return;
    System.out.println(tree.val);
    print(tree.left);
    print(tree.right);
}

public static void main(String[] args) {
    Tree tree = new Tree(new Integer(5), null, null);
    tree = insert(tree, 10);
    tree = insert(tree, 100);
    tree = insert(tree, 11);
    tree = insert(tree, 110);
    tree = insert(tree, 50);
    System.out.println("The tree is as follows : ");
    print(tree);
    printAllPaths(tree);
}
} 
```

输出：

```
The tree is as follows : 
5
10
100
11
50
110
5 0 10 0 100 0 11 0 50 0 5 0 10 0 100 0 110 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:31:46.207

是的，在 Java 中，`new int[X]`创建一个零初始化数组。

从[JLS §4.12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)：

> 每个类变量、实例变量或数组组件在创建时都会使用默认值进行初始化（第 15.9 节、第 15.10 节）……对于 int 类型，默认值为零，即 0。

无论如何，你得到零的原因是因为你每次插入一个元素时都会增加`pathlen` *两次*，所以你插入一个元素然后跳过下一个元素（让它保持在 0）：

```
paths[pathlen++] = tree.val;
pathlen++; 
```

你只需要增加一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:37:40.097

您正在增加 pathlen 两次。删除第二个 pathlen++。是的，Java 会将所有原语初始化为默认值，包括数组中的原语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T04:39:52.350

你犯的错误在`printPathsRecur(Tree tree, int paths[], int pathlen)`

```
paths[pathlen++] = tree.val;
pathlen++; 
```

**你将 pathlen 增加 2**。只有`pathlen++;`从您的代码中删除才能正常工作。

```
static void printPathsRecur(Tree tree, int paths[], int pathlen) {
    if (tree == null)
        return;
    paths[pathlen++] = tree.val;
    //pathlen++;

    if (tree.left == null && tree.right == null) {
        printArray(paths, pathlen);
    } else {
        printPathsRecur(tree.left, paths, pathlen);
        printPathsRecur(tree.right, paths, pathlen);
    }
} 
```

# c++ - IDirect3DDevice9 的子类？

> ID：12649901
> 
> 赞同：0
> 
> 时间：2012-09-29T04:26:08.297
> 
> 标签：c++, inheritance, directx-9

是否可以创建和使用的子类`IDirect3DDevice9`？我的代码这样做会非常方便，但我看到设备指针作为 out 参数给出`IDirect3D9::CreateDevice()`，我不能只告诉它创建我的子类的实例。

我希望能够做到这一点，以便其他使用 an 的代码`IDirect3DDevice9`在我希望它使用具有扩展功能的设备的子类时不必更改。具体来说，子类需要`IDirect3DDevice9::Draw()`在实际绘制完成之前读取设备的渲染状态设置并更新着色器变量以匹配任何变体被调用。同样，我不想改变使用 d3d 设备的其他代码，因为我希望它能够使用常规设备或我的增强设备。

是否可以使用基类的实例创建子类的实例？如果是这样，是否会导致诸如 Direct3D 未设置为使用子类实例，或内存中有多个设备实例因此必须共享 gfx 卡资源等问题？或者我应该在不使用子类的情况下考虑另一种解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:25:18.253

我最终按照 ErikEsTT 上面的建议进行操作，并创建了一个包含 IDirect3DDevice9 指针并提供额外功能的单独类。这不是我想要的解决方案，因为它不是一个无缝接口——客户端代码仍然必须显式调用一个单独的方法。但它有效。

# safari-extension - Safari 无法从 beforeNavigate 事件中获取 url 属性

> ID：12649902
> 
> 赞同：1
> 
> 时间：2012-09-29T04:26:22.840
> 
> 标签：safari-extension

下面是我的 safari 扩展的 global.htm。我检查了全局页面，无论我点击哪里，控制台总是说'url：null'。我的 Safari 是 Mountain Lion 10.8.2 上的 6.0.1。

```
<script type="text/javascript">
var performCommand = function(event) {
    console.log(event);
    console.log("url:" + event.url);
};
console.log('in extension');
safari.application.addEventListener("beforeNavigate", performCommand, true);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:21:02.840

这是一个权限问题。在 Extension Builder 中，在 Extension Website Access 下，您必须将扩展的访问级别设置为 Some 或 All。如果是 Some，您还必须输入至少一种 URL 模式，该模式涵盖您要包含的网站。

# css - 使用可变宽度 div 时的 CSS 文本省略号

> ID：12649904
> 
> 赞同：43
> 
> 时间：2012-09-29T04:27:04.627
> 
> 标签：css, html, css-float, ellipsis

我想知道当父 div 和相邻 div 没有足够的空间时，是否有任何方法可以让浮动 div 中的文本获得省略号。例如：

```
<style>
.parent-div {
    width: 100%;
    border: 1px;
    padding: 4px;
}
.text-div {
    float: right;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;    
}
.icon-div {
    float: left;
}
</style>
<div class="parent-div">
  <div class="text-div">This is text I'd like to truncate when space doesn't permit</div>
  <div class="icon-div">X</div>
</div> 
```

到目前为止，如果我打开浏览器窗口，父 div 将崩溃，然后 text-div 中的空白将消失，但是当没有更多空间时，省略号永远不会出现。

我唯一能想到的就是在窗口调整大小并在 text-div 上动态设置新的固定宽度时触发一个事件，但这只是感觉不雅，特别是考虑到填充和其他相邻工件我必须减去才能得到适当的宽度。

对这个有什么想法吗？

这是一个 jsFiddle 演示：http: [//jsfiddle.net/Blender/kXMz7/](http://jsfiddle.net/Blender/kXMz7/)

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-29T21:37:49.373

您可以使用 CSS3 的灵活框布局来非常直观地做到这一点：

```
.parent-div {
    display: flex;
}

.text-div {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;    

    min-width: 0;
}

.icon-div {
    flex: 1;
}​ 
```

**演示：http: [//jsfiddle.net/Blender/kXMz7/1/](http://jsfiddle.net/Blender/kXMz7/1/)**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-20T00:51:04.363

我的公司还不支持 CSS3，但我能够用另一种解决方案解决这个问题。通过`float`仅将属性应用于图标 div 并将其放在 HTML 中的第一位，另一个 div 将保持垂直对齐，同时在没有足够空间时也会截断。

示例：（右侧图标）[http://jsfiddle.net/qftWN/](http://jsfiddle.net/qftWN/)，（左侧图标）[http://jsfiddle.net/Nr2NN/](http://jsfiddle.net/Nr2NN/)

# jquery - 避免在css中重叠DIV，jquery在conition上拖动

> ID：12649906
> 
> 赞同：1
> 
> 时间：2012-09-29T04:27:27.770
> 
> 标签：jquery, css, html

嗨，我想避免 div 重叠。这是我的 css、脚本和 html

```
///css
#body {
    background-image: url('images/marginup.jpg');
    height: 734px;
    width: 640px;
}

#body2 {
    background-image: url('images/margindown.jpg');
    height: 100px;
    width: 640px;
}
#drag1 {
    width: 636px;
    height: 107px;
    background-image: url('images/caliperupleft.png');
    background-repeat: no-repeat;
}
#drag2 {
    width: 636px;
    height: 107px;
    background-image: url('images/caliperdownleft.png');
    background-repeat: no-repeat;
}
#drag4 {
    margin-left: 430px;
    margin-top: 102px
}
#drag5 {
    margin-left: 432px;
    margin-top: -50px
}

//// my script

$(document).ready(function() {
        $("#drag3").hide();
        $(".draggable").draggable({
            containment : "parent"

        });

        $(document).mousemove(function(e){
      $('#status').html(e.pageX +', '+ e.pageY);
   }); 

    });

/// my html body

                       .<div id="drag1" class="draggable" >
                <img id="drag4" src="images\caliperupright.png"></img>
            </div>

            <div id="drag2" class="draggable">

                <img id="drag5" src="images\caliperdownright.png"></img>
            </div> 
```

* * *

我想拖动正文中两个 div 的内容。但是当它们相遇时，应该停止拖动（不是在 mouseup 上而是在拖动时）。我尝试为 ondrag 编写一个函数以在发生重叠时停止拖动但是它没有用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:00:13.503

这个网站可能会给你一些答案。

[http://www.switchonthecode.com/tutorials/javascript-draggable-elements](http://www.switchonthecode.com/tutorials/javascript-draggable-elements)

可拖动对象具有参数控制。

祝你好运！

# python - 使用 subprocess.Popen 从 python 调用 pandoc

> ID：12649908
> 
> 赞同：6
> 
> 时间：2012-09-29T04:28:30.193
> 
> 标签：python, subprocess, pandoc

我在使用 python 从 python 调用 pandoc 时遇到问题`subprocess.Popen`。这一切都在控制台中工作。这是代码。

```
# Test markdown file
here is just a simple markdown file. 
```

现在我的python代码使用它`filename`是我的markdown文件的完整路径：

```
import subprocess
fileout = os.path.splitext(filename)[0] + ".pdf"
args = ['pandoc', filename, '-o', fileout]
subprocess.Popen(args) 
```

我还尝试了各种方法来捕获错误，但没有奏效。然而，在控制台中，一切都运行良好：

```
pandoc '[filename]' -o '[fileout]' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:29:43.847

这不能回答您的问题（您可能特别希望/需要使用 subprocess.Popen 调用 pandoc），但是 Pandoc 有一个名为[Pyandoc](https://github.com/kennethreitz/pyandoc)的 Python 包装器：请参阅我的答案[here](https://stackoverflow.com/questions/4980904/is-there-any-way-to-convert-wikitext-to-markdown-in-python/13707263#13707263)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T04:41:45.260

这应该可以正常工作，但您可能希望等待它完成使用[`subprocess.check_call`](http://docs.python.org/library/subprocess.html#subprocess.check_call)而不是[`subprocess.Popen`](http://docs.python.org/library/subprocess.html#subprocess.Popen)直接使用：

```
subprocess.check_call(args) 
```

这也确保它*成功*完成。如果状态码不为 0，则会抛出异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-25T07:00:11.233

我真的不喜欢使用`PIPE`，它更复杂，并且 Python 文档上的 Python 文档`subprocess`建议在没有必要的情况下不要使用它（请参阅[第 17.1.1 节](http://docs.python.org/2/library/subprocess.html)）。

这对我有用（取自[Markx](https://github.com/yoavram/markx/blob/master/server.py)）。

Filename 是 Markdown 文件的名称，不带`.md`, 和所需输出中的扩展名 ( `.pdf`, `.docx`)：

```
def pandoc(filename, extension):
    # TODO manage pandoc errors, for example exit status 43 when citations include Snigowski et al. 2000
    options = ['pandoc', filename + '.md', '-o', filename + extension]
    options += ['--ascii', '-s', '--toc'] # some extra options
    options += ['--variable=geometry:' + 'a4paper'] # to override the default letter size
    print(options)  # for debugging
    return subprocess.check_call(options) 
```

如果出现问题，则会引发异常。如果您想获取状态代码而不是异常，我认为您应该替换`check_call`为`call`，但请参阅[文档](http://docs.python.org/2/library/subprocess.html)。

如果您想使用引文，请参阅我在[Markx](https://github.com/yoavram/markx/blob/master/server.py)项目中的原始实现以及该`bibliography`选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T05:39:16.723

如果要捕获 Popen 调用产生的 stdout 和 stderr，则需要将 PIPE 与communicate() 结合使用。

```
from subprocess import Popen, PIPE

fileout = os.path.splitext(filename)[0] + ".pdf"
args = ['pandoc', filename, '-o', fileout]
stdout, stderr = Popen(args, stdout=PIPE, stderr=PIPE).communicate() 
```

# asp.net-mvc - 确保您的 Repository 和 UnitOfWork 类共享相同的休眠会话对象的正确方法是什么？

> ID：12649911
> 
> 赞同：4
> 
> 时间：2012-09-29T04:29:49.280
> 
> 标签：asp.net-mvc, nhibernate, session, ninject

我在编辑和删除对象时遇到问题，我认为这是因为我没有在我的存储库类和我的 unitofwork 类之间共享相同的会话对象。我正在尝试找到一些有关将其连接起来的最佳方法的文档，因此我共享相同的会话对象。

我在 mvc 网站中使用 ninject 作为我的 IOC 容器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T12:44:49.140

我通常将会话设置为存储库的依赖项，因此 Ninject 可以解决依赖项（ISession = NHibernate.ISession）：

```
public UserRepository(ISession session)
{
    ...
} 
```

这就是我设置绑定的方式：

```
kernel.Bind<ISession>().ToMethod(x => GetRequestSession()).InRequestScope(); 
```

因此，当需要会话时，Ninject 将调用 GetRequestSession() 来检索会话。函数实现如下：

```
private static ISession GetRequestSession()
        {
            IDictionary httpContextItems = HttpContext.Current.Items;

            ISession session;
            if (!httpContextItems.Contains(MvcApplication.SESSION_KEY))
            {
                // Create an NHibernate session for this request
                session = MvcApplication.SessionFactory.OpenSession();
                httpContextItems.Add(MvcApplication.SESSION_KEY, session);
            }
            else
            {
                // Re-use the NHibernate session for this request
                session = (ISession)httpContextItems[MvcApplication.SESSION_KEY];
            }
            return session;
        } 
```

NHibernate 会话存储在 HttpContext 项中。这是一个键值集合，可用于在处理一个请求期间存储和共享数据。

每个请求只创建一次会话，并在请求期间重复使用。

MvcApplication.SESSION_KEY 只是我在 Global.asax 中定义的一个常量字符串，以便能够从 HttpContext 存储和检索会话。会话工厂也位于 global.asax 中，并在启动时创建。

您的工作单元类也可以将 ISession 设置为依赖项，因此 Ninject 也会解决此依赖项，因此使用相同的会话。另一方面，您可能不需要工作单元类，因为 NHibernate 的 ISession 实现本身已经是一个工作单元类。

我不确定这是否是最佳做法，但它对我来说非常有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T12:21:16.280

Nhibernate 有一个内置机制来共享会话，即上下文。根据应用程序，您可以使用适当的上下文。更多细节，

[http://nhibernate.info/doc/nhibernate-reference/architecture.html#architecture-current-session](http://nhibernate.info/doc/nhibernate-reference/architecture.html#architecture-current-session)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T04:24:17.280

如果 Robin 的回答对您不起作用，则您*可能*对 Ninject 进行了错误配置。

今天早上我在更新时遇到了一个非常相似的问题。在我的情况下，我正在从会话中读取对象，该会话绑定到与我正在写入的会话不同范围内的对象。

这是我的简单 SessionProvider：

```
public class SessionProvider : Provider<ISession>
{
    protected override ISession CreateInstance(IContext context)
    {
        var factory = context.Kernel.Get<ISessionFactory>();
        var session = factory.OpenSession();
        return session;
    }
} 
```

和国际奥委会代码：

```
 kernel.Bind<ISessionFactory>().ToProvider<SessionFactoryProvider>();
        kernel.Bind<ISession>().ToProvider<SessionProvider>().InRequestScope(); 
```

确保您的工作单元和存储库都使用相同的 ISession 实例化的最简单方法是确保它们也在请求范围内创建。但是，这应该是默认值。

根据您安装 NInject 的方式以及您使用的版本，您可能必须安装 HTTP 模块以确保请求范围正常工作：

1.  如果您安装了 NuGet 包，它将添加`DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));`
2.  如果您有旧版本的 Ninject，您还可以使用将模块添加到 web.config`<add name="OnePerRequestModule" type="Ninject.Core.Behavior.OnePerRequestModule, Ninject.Core"/>`
3.  如果您使用的是较新的 Ninject，它位于`<add name="OnePerRequestHttpModule" type="Ninject.Web.Common.OnePerRequestHttpModule, Ninject.Web.Common"/>`

# c - 不带逗号的数组初始化

> ID：12649916
> 
> 赞同：3
> 
> 时间：2012-09-29T04:30:03.713
> 
> 标签：c, string, pointers, cstring

在下面的代码中，我的输出类似于（最后一个给出分段错误）

```
 U   
 s    
 HelloThisisatest    
 Segmentation fault (core dumped) 
```

但我不明白为什么。代码是

```
int main()
{
   char *a[]={"Hello" "This" "is" "a" "test"};
   printf("%c\n",a[1][0]);
   printf("%c\n",a[0][8]);
   printf("%s\n",a[0]);
   printf("%s\n",a[3]);
   return 0;
} 
```

另一个问题是我们可以在不使用逗号的情况下初始化一个二维数组吗？我得到的另一种情况是，当我用`\n`s替换 s 时，`\t`输出会发生变化

"U s HelloThisisatest (null)"

为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T04:31:22.930

这是因为在 C 中，两个相邻的字符串被连接成一个。所以“Hello”“World”实际上是一个字符串“HelloWorld”。

*   在您的情况下，指针数组实际上包含一个字符串“HelloThisisatest”。在第一个 printf 中，您正在访问位置 1，这是未定义的行为。

*   下一个 printf 访问字符串的第 8 个字符，即`s`.

*   第三个 printf 打印存储在 location 中的整个字符串`0`，即“HelloThisisatest”

*   最后一个 printf 尝试访问数组位置 3，这是未定义的行为，因为它未初始化。

**编辑**

请参阅 C11/C99 标准第 5.1.1.2 节第 6 段，其中说明：

> 相邻的字符串文字标记被连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:33:02.900

你有一个指向 char 的指针数组。但是，只有一个这样的指针，所以代码如下：

```
a[1][0] 
```

超出数组。此特定数组的第一个索引必须始终为 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T07:53:28.503

你可能想要这样做：

```
char a[][20] = {"Hello", "This", "is", "a", "test"}; 
```

请注意，第二个维度应该有一个大小 ( `20`)

现在您可以打印所有单词：

```
printf("%s\n",a[0]);
printf("%s\n",a[1]);
printf("%s\n",a[2]);
printf("%s\n",a[3]);
printf("%s\n",a[4]); 
```

# java - 不属于公共 API 的类

> ID：12649918
> 
> 赞同：0
> 
> 时间：2012-09-29T04:31:00.827
> 
> 标签：java, api

如何保护在另一个包中使用的类（来自不继承的类）从外部实例化？这在Java中甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:39:07.693

使构造函数受保护

```
public class ProtectClass {

    protected ProtectClass() {
        // TODO Auto-generated constructor stub
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:34:51.057

好吧，抽象类不能被实例化，但这可能不是你要找的……我从来没有听说过这是可能的。

# objective-c - Interface Builder 中 NSView 的转换

> ID：12649924
> 
> 赞同：0
> 
> 时间：2012-09-29T04:32:00.093
> 
> 标签：objective-c, interface-builder, transitions

在 Interface Builder 中有**View Effects Inspector**。对于 NSView，可以在其中找到带有选项的**转换**设置。
使用此设置的正确方法是什么？在 IB 中拥有这个并不意味着要实现很多编码，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:59:09.793

好吧，这似乎很容易。必须使用子视图的**animator**属性来执行转换。例如，如果“mySubview”的父视图将转换子视图选项设置为某种转换样式，

`[[mySubview animator] removeFromSuperview];`

将使用指定的转换将自己从超级视图中移除。

# patch - 给猪添加补丁

> ID：12649925
> 
> 赞同：1
> 
> 时间：2012-09-29T04:32:08.913
> 
> 标签：patch, apache-pig

我想将此[补丁](https://issues.apache.org/jira/browse/PIG-2417)添加到我的 Pig 版本中。我怎么做？

# lisp - 子集总和 - lisp

> ID：12649926
> 
> 赞同：-2
> 
> 时间：2012-09-29T04:32:11.700
> 
> 标签：lisp, common-lisp

我正在尝试用 lisp 编写子集和问题。示例：`(subsetsum '(1 2 3) 5)`= `(2 3)`，`(subsetsum '(1 5 3) 2)`= `nil`。

我只能使用函数

```
(atom x) 
(null x)
(eq x y)
(equal x y)
(numberp x)
(append x y)
(car x)
(cdr x)
(cons x y) 
(if x y z)
(cond ... ) 
(let ((x y) (u v)) z)
(let* ((x y) (u v)) z)
(defun ...)
(quote x) and its short form 'x
(list x1 x2 ...)
(print ...)
(sort L fun) 
```

我能得到任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:25:56.153

此问题的简化推理如下：

1.  你有一个清单`L`和一个号码`S`
2.  列表的第一个元素是解决方案的一部分，或者不是
3.  如果第一个是解决方案的一部分，那么您需要使用它和更简单问题的解决方案`(rest L) (- S (first L))`
4.  如果它不是解决方案的一部分，那么您需要解决更简单的问题`(rest L) S`
5.  在某些情况下，您可以避免进行搜索...例如，如果列表为空`S`且不为零，或者如果所有元素都大于零，甚至将所有元素相加，您无法达到`S`...

# c++ - 由于未定义对“deflateEnd”的引用，无法使用 GCC 构建 C 应用程序

> ID：12649937
> 
> 赞同：1
> 
> 时间：2012-09-29T04:34:02.460
> 
> 标签：c++, c, gcc, makefile, zlib

这是错误片段

```
/home/jamesblack/Development/v2server/svr_tick.c:1309: undefined reference to `deflateEnd' 
```

当我运行我的 makefile 时会发生这种情况，看起来它运行了这个命令。

```
gcc -O -g -lm -lz -lcrypt -o server .obj/server.o .obj/svr_disk.o .obj/svr_tick.o .obj/svr_act.o .obj/driver.o .obj/svr_god.o .obj/svr_do.o .obj/svr_glob.o .obj/build.o .obj/use_driver.o .obj/look_driver.o .obj/svr_effect.o .obj/driver_etc.o .obj/driver_generic.o .obj/populate.o .obj/helper.o .obj/skill.o .obj/skill_driver.o .obj/talk.o .obj/area.o .obj/path.o .obj/stunrun.o .obj/cityattack.o .obj/npc_malte.o .obj/lab9.o .obj/rdtsc.o .obj/ccp_driver.o 
```

然后它喷出很多类似的错误，我用谷歌搜索的所有内容都提到安装zlib并将其与-lz链接，这显然在make命令中，我也很确定我安装正确。apt-get 在 ubuntu 11 64bit 中安装 zlib1g-dev

有什么想法吗

编辑：

我的 zlib.h 位于 /usr/local/zlib/include/zlib.h 包括这个

```
ZEXTERN int ZEXPORT deflateEnd OF((z_streamp strm));
/*
 All dynamically allocated data structures for this stream are freed.
This function discards any unprocessed input and does not flush any pending
output.

 deflateEnd returns Z_OK if success, Z_STREAM_ERROR if the
stream state was inconsistent, Z_DATA_ERROR if the stream was freed
prematurely (some input or output was discarded).  In the error case, msg
may be set but then points to a static string (which must not be
deallocated).
*/ 
```

这是我需要的吗？也 echo $LD_LIBRARY_PATH 不返回任何内容。我真的正确配置了 Zlib 吗？

编辑2：

```
gcc -I/usr/local/zlib/include -O -g -lm -lz -lcrypt -o server .obj/server.o .obj/svr_disk.o .obj/svr_tick.o .obj/svr_act.o .obj/driver.o .obj/svr_god.o .obj/svr_do.o .obj/svr_glob.o .obj/build.o .obj/use_driver.o .obj/look_driver.o .obj/svr_effect.o .obj/driver_etc.o .obj/driver_generic.o .obj/populate.o .obj/helper.o .obj/skill.o .obj/skill_driver.o .obj/talk.o .obj/area.o .obj/path.o .obj/stunrun.o .obj/cityattack.o .obj/npc_malte.o .obj/lab9.o .obj/rdtsc.o .obj/ccp_driver.o 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T05:48:58.487

将库放在目标文件之后，因此修改makefile或重写链接命令，而不是像这样（如问题所示）：

```
gcc -O -g -lm -lz -lcrypt -o server .obj/server.o .obj/svr_disk.o .obj/svr_tick.o \
    .obj/svr_act.o .obj/driver.o .obj/svr_god.o .obj/svr_do.o .obj/svr_glob.o \
    .obj/build.o .obj/use_driver.o .obj/look_driver.o .obj/svr_effect.o \
    .obj/driver_etc.o .obj/driver_generic.o .obj/populate.o .obj/helper.o \
    .obj/skill.o .obj/skill_driver.o .obj/talk.o .obj/area.o .obj/path.o \
    .obj/stunrun.o .obj/cityattack.o .obj/npc_malte.o .obj/lab9.o \
    .obj/rdtsc.o .obj/ccp_driver.o 
```

它应该是这样的：

```
gcc -O -g -o server .obj/server.o .obj/svr_disk.o .obj/svr_tick.o .obj/svr_act.o \
    .obj/driver.o .obj/svr_god.o .obj/svr_do.o .obj/svr_glob.o .obj/build.o \
    .obj/use_driver.o .obj/look_driver.o .obj/svr_effect.o .obj/driver_etc.o \
    .obj/driver_generic.o .obj/populate.o .obj/helper.o .obj/skill.o \
    .obj/skill_driver.o .obj/talk.o .obj/area.o .obj/path.o .obj/stunrun.o \
    .obj/cityattack.o .obj/npc_malte.o .obj/lab9.o .obj/rdtsc.o .obj/ccp_driver.o \
    -lm -lz -lcrypt 
```

The linker only pulls in symbols from shared libraries if at least one of the symbols satisfies an outstanding undefined reference; when the libraries come first, they don't usually have a `main()` and that's what the linker is looking for to start with. (This is a change of behaviour; a few years ago, the linker tended to pull in every shared library, regardless of whether it satisfied any undefined symbols.)

# android - 使用复选框在自定义 ListView 中获取多个项目

> ID：12649940
> 
> 赞同：0
> 
> 时间：2012-09-29T04:34:39.313
> 
> 标签：android, android-layout, android-listview

我有一个自定义 listView，它为每一行加载一个 TextView、一个 ImageView 和一个复选框。

管理我使用的单个项目

```
list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                long x = MyClass.this.adapter.getItemId(position);
                            ......

            }
        }); 
```

这允许我获取单个单击行的 id x，我可以使用它来检索与单行关联的数据。

现在：

如何获得所有点击行的各种位置索引？

我的 ListAdapter 是

```
public class MyAdapter extends BaseAdapter{
    private Activity activity;
    private String[] dataCar;
    private String[] dataImm;

    private static LayoutInflater inflater=null;
    public TitleLoader titleLoader;
    public ImageLoader imageLoader; 
    public TextLoader textLoader;

    public MyAdapter(Activity a, String[] dCar, String[] dImm) {
        activity = a;
        dataCar=dCar;
        dataImm=dImm;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        titleLoader=new TitleLoader(activity.getApplicationContext());
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return dataImm.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.elemento_lista_car, null);

        TextView car=(TextView)vi.findViewById(R.id.car);
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        CheckBox cb=(CheckBox)vi.findViewById(R.id.checkBox);
        titleLoader.DisplayTitle(dataCar[position], car);
        imageLoader.DisplayImage(dataImm[position], image);

        return vi;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T00:38:08.817

正如 Luksprog 建议的那样，我使用了一组布尔值来解决问题。当我单击各个条目时，各个位置都设置为 true。使用此数组中真实元素的索引允许我访问列表中所有选中的行

```
list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                long x = MezzoStampa.this.adapterListaTestate.getItemId(position);
                CheckBox cb=(CheckBox)view.findViewById(R.id.checkBox);
                cb.setChecked(true);
                if(cb.isChecked())
                    checked[(int)x]=true;

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T07:49:23.040

我认为你应该使用`onListItemClick` 我给你一个例子

```
public void onListItemClick(ListView parent,View v,int position,long id){
    try{
        TextView t4=(TextView)v.findViewById(R.id.Name);
        TextView t5=(TextView)v.findViewById(R.id.Desc);

        if(t4!=null){
            EEActionListBean mSelected; // bean ur set get class
            int idx=position;//
            mSelected=m_adapter.getItem(idx); // this will give you position clicked

            String getvalueoflist=mSelected.getID();

                Intent intent=new Intent(this,EEActionListDetail.class);
                intent.putExtra("sID",ActionID);
                startActivity(intent);
        }
    }
    catch(Exception e){
        //MsgBox(this,e.toString());
    }
} 
```

# javascript - 为什么结果是 NaN？

> ID：12649941
> 
> 赞同：0
> 
> 时间：2012-09-29T04:34:48.180
> 
> 标签：javascript

```
var a = 10;
sayHi();
function sayHi()
{
var a = a + 10;
alert(a);
return a;
}
alert(a);
alert(sayHi()+10); 
```

为什么上面的结果不是 20 和 30？我觉得第一个是20，然后是30。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T04:37:01.847

```
function sayHi()
{
   var a = a + 10;
   alert(a);
   return a;
} 
```

和

```
function sayHi()
{
    var a;
    // a in this function will be the loacal variable a, which is undefined at first
    // a is undefined, undefined + 10 is NaN
    a = a + 10;
    alert(a);
    return a;
} 
```

查看这篇文章：[***JavaScript 作用域和提升***](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

如果要使用全局 var `a`，则不应`var a`在函数内部使用。

但更好的解决方案是使用参数。

```
function sayHi(a)
{
   a = a + 10;
   alert(a);
   return a;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:37:04.710

如果`a`在函数中与上面声明的相同，则不应使用`var`，因为这意味着重新声明一个新`a`变量。还要`sayHi`在使用前声明。这可能会按您的预期工作：

```
var a = 10;

function sayHi()
{
a = a + 10; // No "var" keyword
alert(a);
return a;
}

sayHi();
alert(a);
alert(sayHi()+10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T05:56:18.873

`NaN`无论您的函数是全局函数`a = 10`还是`a = 999`根本不存在，您的函数（就像现在一样）都应该始终返回。这是因为您`a`在函数内部创建了一个完全不同的函数，其中没有任何价值。

两种可能的选择：

**1）使用全局变量**

```
function updateValue(){
    a += 10;
    //don't need a return
}

var a = 10;
updateValue();
//'a' is now 20 
```

**2）返回值**

```
function getNewValue(num){
    num += 10;
    return num;
}

var a = 10;
a = getNewValue(a);
//'a' is now 20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T04:39:22.770

```
var a = 10;
sayHi();
function sayHi()
{
a = Number(a) + 10;
return (Number(a));
}
alert(a);
alert(sayHi()+10); 
```

# php - php SELECT 查询适用于值但不适用于变量

> ID：12649946
> 
> 赞同：1
> 
> 时间：2012-09-29T04:36:14.887
> 
> 标签：php, mysql

我正在尝试从名为 say, 的表中选择一列`1234`。

```
 $query="select Number from `$table`";
      $contacts=mysql_query($query);

      while($row=mysql_fetch_array($contacts))
         echo $row['Number']; 
```

如果我使用“从”中选择号码`1234`，它可以工作。$table 的值是使用 $_REQUEST["key0"] 获​​得的。我把页面称为`"localhost/page_id=22?key0=1234"`什么问题？我在 mysql_fetch_array 语句中收到以下错误：`Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\wamp\www\wp-content\plugins\exec-php\includes\runtime.php(42)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:40:14.113

您调用的 url 格式应如下所示：

```
localhost/?page_id=22&key0=1234 
```

另外，`1234`是一个奇怪的表名:))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:49:01.410

这肯定会奏效。

```
 "SELECT * 
    FROM  `yourdatabase_name`.`$table` " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T04:55:43.350

我认为你必须使用这样的东西

**localhost/?page_id=22&key0=1234** 但在你的问题中你提到你正在使用 localhost/page_id=22?key0=1234 所以就像我在这里提到的那样尝试！

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T04:38:06.723

像这样写`"select Number from ".$table;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T04:42:39.903

`$contacts`是从您的查询中返回的内容，如果您有某种类型的错误，它将返回 false。所以：

1.  捕捉错误（在 try-catch 上阅读）
2.  您可能没有名为 1234 的表。在 FROM 子句中，您必须使用数据库中的现有元素/表（或由此生成的临时表）
3.  祝 SQL 注入好运。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T04:43:22.160

```
$conn=mysql_connect("localhost","root","");
mysql_select_db("as you wish",$conn);  
$query="select Number from `$table`";
      $contacts=mysql_query($query,$conn);

      while($row=mysql_fetch_array($contacts))
         echo $row['Number']; 
```

尝试这个

# java - 进度对话框中的嵌套警报对话框

> ID：12649948
> 
> 赞同：1
> 
> 时间：2012-09-29T04:36:57.907
> 
> 标签：java, android, android-layout, android-alertdialog

我是 android 的新手，我正在开发一个通过 PHP 将数据从 android 传递到 MySQL 的应用程序。现在我正在尝试验证登录 ID 和密码。如果未设置任何一个字段或登录 ID 和密码错误我想显示一个警告对话框，通知用户登录 ID 或密码不正确。为此，我编写了以下代码。

```
public class HomeActivity extends Activity 
{

    JSONParser jsonParser = new JSONParser();
    private ProgressDialog pDialog;
    private static String url_check_voter = "http://10.0.2.2/evoting/check_voter.php";
    private EditText getUserId;
    private EditText getPassword;
    private Button btnLogin;//private Button btnRegister;
    private TextView lblResult;
    private Button btnRegister;
    AlertDialog.Builder alertDialogBuilder;

    String TAG_SUCCESS="success" ;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.home_activity);
        getUserId = (EditText)findViewById(R.id.getLoginIdTxt);
        getPassword = (EditText)findViewById(R.id.getPasswordTxt);

        btnLogin = (Button) findViewById(R.id.btnLogin);
        btnRegister = (Button) findViewById(R.id.btnRegister);

         btnRegister.setOnClickListener(new View.OnClickListener()
         {
             public void onClick(View view) 
             {

             Intent i = new Intent(getApplicationContext(), RegisterActivity.class);
             startActivity(i);
             }

         });

 // Set Click Listener
         btnLogin.setOnClickListener(new View.OnClickListener() 
         {

             public void onClick(View view) 
             {
                new CheckVoter().execute();
               // Check Login
                 /* String userid = getUserId.getText().toString();
                  String password = getPassword.getText().toString();

                  if(userid.equals(""))
                  {
                     if(password.equals(""))
                          onClick(view);
                     else
                     {
                       lblResult.setText("Wrong password");
                     }

                   } else {
                      lblResult.setText("Username does not exist. Please register.");
                   }*/

               } 

           });

      }

     /* public void onClick(View v)
      {

        if (v.getId() == R.id.btnLogin) 
        {
            Intent intent = new Intent(this, CreateVoterSuccess.class);
            startActivity(intent);
        } 
        else
        {
            Intent intent = new Intent(this, HomeActivity.class);
            startActivity(intent);
        }

}*/

class CheckVoter extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(HomeActivity.this);
        pDialog.setMessage("Verifying Voter. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();

    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) 
    {
        String loginId = getUserId.getText().toString();
        String pwd = getPassword.getText().toString();

        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("loginId", loginId));
        params.add(new BasicNameValuePair("pwd", pwd));
       // params.add(new BasicNameValuePair("description", description));

        // getting JSON Object
        // Note that create product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_check_voter,
                "POST", params);
        Log.d("Create Response", json.toString());
        // Building Parameters
        //List<NameValuePair> params = new ArrayList<NameValuePair>();

        // Building Parameters

        // getting JSON string from URL
        //JSONObject json = jsonParser.makeHttpRequest(url_check_voter, "GET", params);
       // Log.d("All Products: ", json.toString());

        try {
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1) 
            {
                Intent i = new Intent(getApplicationContext(), LoginActivity.class);
                startActivity(i);   

            }else if(success == 2)
            {
                //Intent i = new Intent(getApplicationContext(), LoginFail.class);
              //  startActivity(i);

                alertDialogBuilder = new AlertDialog.Builder(
                        HomeActivity.this);
                    // set title
                    alertDialogBuilder.setTitle("Incorrect user name or password");

                    // set dialog message
                    alertDialogBuilder
                        .setMessage("click ohk to enter username or password")
                        .setCancelable(false)
                        .setPositiveButton("OK",new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,int id) {
                                // if this button is clicked, close
                                // current activity
                                HomeActivity.this.finish();
                            }
                          });

                    AlertDialog alert = alertDialogBuilder.create();

            }
            else
            {
                //Intent i = new Intent(getApplicationContext(), CreateVoterFail.class);
              //  startActivity(i);

                alertDialogBuilder = new AlertDialog.Builder(
                        HomeActivity.this);
                    // set title
                    alertDialogBuilder.setTitle("Incorrect user name or password");

                    // set dialog message
                    alertDialogBuilder
                        .setMessage("click ohk to enter username or password")
                        .setCancelable(false)
                        .setPositiveButton("OK",new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,int id) {
                                // if this button is clicked, close
                                // current activity
                                HomeActivity.this.finish();
                            }
                          });
                    AlertDialog alert = alertDialogBuilder.create();

            }
            }catch (JSONException e) {
                e.printStackTrace();
            }
        return null;
     }
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }

}
} 
```

并在此处插入警报框...

```
else 
            {
                //Intent i = new Intent(getApplicationContext(), LoginFail.class);
              //  startActivity(i);

                alertDialogBuilder = new AlertDialog.Builder(
                        HomeActivity.this);
                    // set title
                    alertDialogBuilder.setTitle("Incorrect user name or password");

                    // set dialog message
                    alertDialogBuilder
                        .setMessage("click ohk to enter username or password")
                        .setCancelable(false)
                        .setPositiveButton("OK",new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,int id) {
                                // if this button is clicked, close
                                // current activity
                                HomeActivity.this.finish();
                            }
                          });

                    AlertDialog alert = alertDialogBuilder.create();

            } 
```

我得到运行时错误日志 cat 如下

```
09-29 09:54:56.853: D/Create Response(279): {"message":"Product successfully created.","success":0}
09-29 09:54:56.853: W/dalvikvm(279): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
09-29 09:54:56.983: D/dalvikvm(279): GC_FOR_MALLOC freed 2836 objects / 170040 bytes in 118ms
09-29 09:54:56.983: E/AndroidRuntime(279): FATAL EXCEPTION: AsyncTask #1
09-29 09:54:56.983: E/AndroidRuntime(279): java.lang.RuntimeException: An error occured while executing doInBackground()
09-29 09:54:56.983: E/AndroidRuntime(279):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
09-29 09:54:56.983: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-29 09:54:56.983: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-29 09:54:56.983: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-29 09:54:56.983: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-29 09:54:56.983: E/AndroidRuntime(279):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
09-29 09:54:56.983: E/AndroidRuntime(279):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
09-29 09:54:56.983: E/AndroidRuntime(279):  at java.lang.Thread.run(Thread.java:1096)
09-29 09:54:56.983: E/AndroidRuntime(279): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
09-29 09:54:56.983: E/AndroidRuntime(279):  at android.os.Handler.<init>(Handler.java:121)
09-29 09:54:56.983: E/AndroidRuntime(279):  at android.app.Dialog.<init>(Dialog.java:101)
09-29 09:54:56.983: E/AndroidRuntime(279):  at android.app.AlertDialog.<init>(AlertDialog.java:63)
09-29 09:54:56.983: E/AndroidRuntime(279):  at android.app.AlertDialog.<init>(AlertDialog.java:59)
09-29 09:54:56.983: E/AndroidRuntime(279):  at android.app.AlertDialog$Builder.create(AlertDialog.java:786)
09-29 09:54:56.983: E/AndroidRuntime(279):  at android.app.AlertDialog$Builder.show(AlertDialog.java:801)
09-29 09:54:56.983: E/AndroidRuntime(279):  at com.example.evoting.HomeActivity$CheckVoter.doInBackground(HomeActivity.java:220)
09-29 09:54:56.983: E/AndroidRuntime(279):  at com.example.evoting.HomeActivity$CheckVoter.doInBackground(HomeActivity.java:1)
09-29 09:54:56.983: E/AndroidRuntime(279):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
09-29 09:54:56.983: E/AndroidRuntime(279):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-29 09:54:56.983: E/AndroidRuntime(279):  ... 4 more
09-29 09:54:57.793: E/WindowManager(279): Activity com.example.evoting.HomeActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f00418 that was originally added here
09-29 09:54:57.793: E/WindowManager(279): android.view.WindowLeaked: Activity com.example.evoting.HomeActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f00418 that was originally added here
09-29 09:54:57.793: E/WindowManager(279):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
09-29 09:54:57.793: E/WindowManager(279):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
09-29 09:54:57.793: E/WindowManager(279):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-29 09:54:57.793: E/WindowManager(279):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
09-29 09:54:57.793: E/WindowManager(279):   at android.app.Dialog.show(Dialog.java:241)
09-29 09:54:57.793: E/WindowManager(279):   at com.example.evoting.HomeActivity$CheckVoter.onPreExecute(HomeActivity.java:134)
09-29 09:54:57.793: E/WindowManager(279):   at android.os.AsyncTask.execute(AsyncTask.java:391)
09-29 09:54:57.793: E/WindowManager(279):   at com.example.evoting.HomeActivity$2.onClick(HomeActivity.java:74)
09-29 09:54:57.793: E/WindowManager(279):   at android.view.View.performClick(View.java:2408)
09-29 09:54:57.793: E/WindowManager(279):   at android.view.View$PerformClick.run(View.java:8816)
09-29 09:54:57.793: E/WindowManager(279):   at android.os.Handler.handleCallback(Handler.java:587)
09-29 09:54:57.793: E/WindowManager(279):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-29 09:54:57.793: E/WindowManager(279):   at android.os.Looper.loop(Looper.java:123)
09-29 09:54:57.793: E/WindowManager(279):   at android.app.ActivityThread.main(ActivityThread.java:4627)
09-29 09:54:57.793: E/WindowManager(279):   at java.lang.reflect.Method.invokeNative(Native Method)
09-29 09:54:57.793: E/WindowManager(279):   at java.lang.reflect.Method.invoke(Method.java:521)
09-29 09:54:57.793: E/WindowManager(279):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-29 09:54:57.793: E/WindowManager(279):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-29 09:54:57.793: E/WindowManager(279):   at dalvik.system.NativeStart.main(Native Method)
09-29 09:54:59.273: I/Process(279): Sending signal. PID: 279 SIG: 9
09-29 09:56:18.005: D/Create Response(313): {"message":"Product successfully created.","success":0}
09-29 09:56:18.013: W/dalvikvm(313): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
09-29 09:56:18.153: D/dalvikvm(313): GC_FOR_MALLOC freed 2867 objects / 171224 bytes in 123ms
09-29 09:56:18.153: E/AndroidRuntime(313): FATAL EXCEPTION: AsyncTask #1
09-29 09:56:18.153: E/AndroidRuntime(313): java.lang.RuntimeException: An error occured while executing doInBackground()
09-29 09:56:18.153: E/AndroidRuntime(313):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
09-29 09:56:18.153: E/AndroidRuntime(313):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-29 09:56:18.153: E/AndroidRuntime(313):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-29 09:56:18.153: E/AndroidRuntime(313):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-29 09:56:18.153: E/AndroidRuntime(313):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-29 09:56:18.153: E/AndroidRuntime(313):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
09-29 09:56:18.153: E/AndroidRuntime(313):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
09-29 09:56:18.153: E/AndroidRuntime(313):  at java.lang.Thread.run(Thread.java:1096)
09-29 09:56:18.153: E/AndroidRuntime(313): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
09-29 09:56:18.153: E/AndroidRuntime(313):  at android.os.Handler.<init>(Handler.java:121)
09-29 09:56:18.153: E/AndroidRuntime(313):  at android.app.Dialog.<init>(Dialog.java:101)
09-29 09:56:18.153: E/AndroidRuntime(313):  at android.app.AlertDialog.<init>(AlertDialog.java:63)
09-29 09:56:18.153: E/AndroidRuntime(313):  at android.app.AlertDialog.<init>(AlertDialog.java:59)
09-29 09:56:18.153: E/AndroidRuntime(313):  at android.app.AlertDialog$Builder.create(AlertDialog.java:786)
09-29 09:56:18.153: E/AndroidRuntime(313):  at com.example.evoting.HomeActivity$CheckVoter.doInBackground(HomeActivity.java:220)
09-29 09:56:18.153: E/AndroidRuntime(313):  at com.example.evoting.HomeActivity$CheckVoter.doInBackground(HomeActivity.java:1)
09-29 09:56:18.153: E/AndroidRuntime(313):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
09-29 09:56:18.153: E/AndroidRuntime(313):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-29 09:56:18.153: E/AndroidRuntime(313):  ... 4 more
09-29 09:56:18.994: E/WindowManager(313): Activity com.example.evoting.HomeActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f00510 that was originally added here
09-29 09:56:18.994: E/WindowManager(313): android.view.WindowLeaked: Activity com.example.evoting.HomeActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f00510 that was originally added here
09-29 09:56:18.994: E/WindowManager(313):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
09-29 09:56:18.994: E/WindowManager(313):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
09-29 09:56:18.994: E/WindowManager(313):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-29 09:56:18.994: E/WindowManager(313):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
09-29 09:56:18.994: E/WindowManager(313):   at android.app.Dialog.show(Dialog.java:241)
09-29 09:56:18.994: E/WindowManager(313):   at com.example.evoting.HomeActivity$CheckVoter.onPreExecute(HomeActivity.java:134)
09-29 09:56:18.994: E/WindowManager(313):   at android.os.AsyncTask.execute(AsyncTask.java:391)
09-29 09:56:18.994: E/WindowManager(313):   at com.example.evoting.HomeActivity$2.onClick(HomeActivity.java:74)
09-29 09:56:18.994: E/WindowManager(313):   at android.view.View.performClick(View.java:2408)
09-29 09:56:18.994: E/WindowManager(313):   at android.view.View$PerformClick.run(View.java:8816)
09-29 09:56:18.994: E/WindowManager(313):   at android.os.Handler.handleCallback(Handler.java:587)
09-29 09:56:18.994: E/WindowManager(313):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-29 09:56:18.994: E/WindowManager(313):   at android.os.Looper.loop(Looper.java:123)
09-29 09:56:18.994: E/WindowManager(313):   at android.app.ActivityThread.main(ActivityThread.java:4627)
09-29 09:56:18.994: E/WindowManager(313):   at java.lang.reflect.Method.invokeNative(Native Method)
09-29 09:56:18.994: E/WindowManager(313):   at java.lang.reflect.Method.invoke(Method.java:521)
09-29 09:56:18.994: E/WindowManager(313):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-29 09:56:18.994: E/WindowManager(313):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-29 09:56:18.994: E/WindowManager(313):   at dalvik.system.NativeStart.main(Native Method)
09-29 09:56:48.843: I/Process(313): Sending signal. PID: 313 SIG: 9
09-29 10:09:07.483: D/Create Response(338): {"message":"Product successfully created.","success":0}
09-29 10:09:07.483: W/dalvikvm(338): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
09-29 10:09:07.523: D/dalvikvm(338): GC_FOR_MALLOC freed 2883 objects / 171944 bytes in 41ms
09-29 10:09:07.533: E/AndroidRuntime(338): FATAL EXCEPTION: AsyncTask #1
09-29 10:09:07.533: E/AndroidRuntime(338): java.lang.RuntimeException: An error occured while executing doInBackground()
09-29 10:09:07.533: E/AndroidRuntime(338):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
09-29 10:09:07.533: E/AndroidRuntime(338):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-29 10:09:07.533: E/AndroidRuntime(338):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-29 10:09:07.533: E/AndroidRuntime(338):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-29 10:09:07.533: E/AndroidRuntime(338):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-29 10:09:07.533: E/AndroidRuntime(338):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
09-29 10:09:07.533: E/AndroidRuntime(338):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
09-29 10:09:07.533: E/AndroidRuntime(338):  at java.lang.Thread.run(Thread.java:1096)
09-29 10:09:07.533: E/AndroidRuntime(338): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
09-29 10:09:07.533: E/AndroidRuntime(338):  at android.os.Handler.<init>(Handler.java:121)
09-29 10:09:07.533: E/AndroidRuntime(338):  at android.app.Dialog.<init>(Dialog.java:101)
09-29 10:09:07.533: E/AndroidRuntime(338):  at android.app.AlertDialog.<init>(AlertDialog.java:63)
09-29 10:09:07.533: E/AndroidRuntime(338):  at android.app.AlertDialog.<init>(AlertDialog.java:59)
09-29 10:09:07.533: E/AndroidRuntime(338):  at android.app.AlertDialog$Builder.create(AlertDialog.java:786)
09-29 10:09:07.533: E/AndroidRuntime(338):  at com.example.evoting.HomeActivity$CheckVoter.doInBackground(HomeActivity.java:220)
09-29 10:09:07.533: E/AndroidRuntime(338):  at com.example.evoting.HomeActivity$CheckVoter.doInBackground(HomeActivity.java:1)
09-29 10:09:07.533: E/AndroidRuntime(338):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
09-29 10:09:07.533: E/AndroidRuntime(338):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-29 10:09:07.533: E/AndroidRuntime(338):  ... 4 more
09-29 10:09:08.153: E/WindowManager(338): Activity com.example.evoting.HomeActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f003e0 that was originally added here
09-29 10:09:08.153: E/WindowManager(338): android.view.WindowLeaked: Activity com.example.evoting.HomeActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f003e0 that was originally added here
09-29 10:09:08.153: E/WindowManager(338):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
09-29 10:09:08.153: E/WindowManager(338):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
09-29 10:09:08.153: E/WindowManager(338):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-29 10:09:08.153: E/WindowManager(338):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
09-29 10:09:08.153: E/WindowManager(338):   at android.app.Dialog.show(Dialog.java:241)
09-29 10:09:08.153: E/WindowManager(338):   at com.example.evoting.HomeActivity$CheckVoter.onPreExecute(HomeActivity.java:134)
09-29 10:09:08.153: E/WindowManager(338):   at android.os.AsyncTask.execute(AsyncTask.java:391)
09-29 10:09:08.153: E/WindowManager(338):   at com.example.evoting.HomeActivity$2.onClick(HomeActivity.java:74)
09-29 10:09:08.153: E/WindowManager(338):   at android.view.View.performClick(View.java:2408)
09-29 10:09:08.153: E/WindowManager(338):   at android.view.View$PerformClick.run(View.java:8816)
09-29 10:09:08.153: E/WindowManager(338):   at android.os.Handler.handleCallback(Handler.java:587)
09-29 10:09:08.153: E/WindowManager(338):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-29 10:09:08.153: E/WindowManager(338):   at android.os.Looper.loop(Looper.java:123)
09-29 10:09:08.153: E/WindowManager(338):   at android.app.ActivityThread.main(ActivityThread.java:4627)
09-29 10:09:08.153: E/WindowManager(338):   at java.lang.reflect.Method.invokeNative(Native Method)
09-29 10:09:08.153: E/WindowManager(338):   at java.lang.reflect.Method.invoke(Method.java:521)
09-29 10:09:08.153: E/WindowManager(338):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-29 10:09:08.153: E/WindowManager(338):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-29 10:09:08.153: E/WindowManager(338):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:51:41.127

`doInBackground`在后台线程上工作，因此您将无法`UI`在此方法中更新 。

如果您希望更新`UI`给用户，您需要`onPostExecute`在您的实现中`ASyncTask`显示一个`Dialog`（或类似的东西）以在发生错误时通知用户。

您可以在任何线程中使用此块来更新`UI`内容。

```
Runnable run_in_ui = new Runnable() {
    @Override
    public void run() {
        // do your UI stuffs here
    }
};
runOnUiThread(run_in_ui); 
```

# c++ - 破坏对象数组

> ID：12649956
> 
> 赞同：3
> 
> 时间：2012-09-29T04:38:27.297
> 
> 标签：c++, arrays

所以说我有

```
foo* fooObject1 = new foo[10];
// here would go code for initializing fooObject1[0] to fooObject1[9] with a foo object for each.
foo* fooObject2 = new foo[30];

for(int = 0; i < 10; i++)
fooObject2[i] = fooObject1[i];

if(fooObject1 != NULL)
delete[] fooObject1; //this "destroys" the array, BUT ALSO calls the destructors of all the foo objects inside fooObject1, causing fooObject2 elements to be anything but what it was before.

fooObject1 = fooObject2; 
```

`foo`我使用其各自的方法创建的特定对象在哪里。

然而，我的问题是我想破坏 fooObject1 指向的数组，而不是数组的元素，有没有办法在 C++ 中完成？我知道解决这个问题的另一种方法是重载 = (equals) 运算符，但是在我需要它的程序中，编写这将包括为许多其他类重载许多其他 = 运算符，这使得它成为一个乏味而漫长的过程. 我希望以某种方式可以将对象保留在 fooObject2 中，但摆脱 fooObject1 指向的数组。那么这可以做到吗？如何？如果不是，那么有没有网站可以重定向我阅读它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:44:07.147

指向 fooObject1 的数组*包含*对象。您实际上是在要求木匠破坏书柜，但将书架留在书架上。（如果你能做到的话，这是一个很好的技巧。）

在您的 for 循环中，然后将对象从 fooObject1 复制到 fooObject2。所以 fooObject2 里面有不同的对象。

如果您希望对象独立于它们的容器，您应该使用指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T04:47:35.247

这些*是*独立的。您的 fooObject2 数组已像 fooObject1 一样被分配，并且在此过程中为每个数组触发了赋值运算符。您实际上在 fooObject2 中拥有来自 fooObject1 的每个对象的副本。

你不能放弃 fooObject1。您需要删除 [] 它，否则您会泄漏内存。正如所写的，fooObject2 是独立的**，除非您在 fooObject 类中有内部指针并且执行了浅拷贝，因为您没有遵循[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。**

在您清理 fooObject1 并删除其先前的内存分配之后，此设置的最后一行将 fooObject1（指针）指向与 fooObject2 相同的对象，仅供参考，但在进行该引用后不要同时删除它们；只删除一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T04:48:20.903

在 C++ 中，数组不是对象。您拥有的是两个指针，因为您调用`new[]`了 ，它们恰好指向 n 个连续分配对象的开头。您不能删除数组，也不能删除对象。数组“是”对象所在的连续内存。

但是，您可以清除指针，但这样做意味着您不再知道对象的位置。这就是所谓的内存泄漏。该内存是为这些对象分配的，您不能再释放它，因为您不知道它在哪里。

您确实将 10 个对象的值从 复制`fooObject1`到`fooObject2`。删除`fooObject1`不会更改对象，`fooObject2`因为它们是不同的对象 -`fooObject2`指向具有不同对象集的不同内存位置中的不同数组。您`fooObject1`通过将这些对象的值分配给`fooObject2`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T10:21:14.000

您可能想要使用**现代 C++**技术和容器，例如`std::vector`（而不是*原始异常、不安全、容易泄漏* `new[]`和`delete[]`原始指针）。

如果您想要指向对象的***指针*****数组***`foo`，并且希望这些`foo`对象在这些数组之间共享，您可以考虑使用`vector<shared_ptr<foo>>`.*

 *`shared_ptr`是一个智能指针模板类，它使用*引用计数，并且只有在对象的**最后一个*引用被释放时才销毁指向的对象。

您可以使用`make_shared`分配器来实例化 的新实例`foo`，并使用 将它们放入（动态）数组中`vector::push_back()`。

例如

```
#include <vector> // std::vector
#include <memory> // std::shared_ptr, std::make_shared

using namespace std;

// Smart pointer to foo
typedef shared_ptr<foo> foo_ptr;

// Dynamic arrays of smart pointers
typedef vector<foo_ptr> foo_array;

// Define an array of smart pointers to foo
foo_array v1;

// Populate the array
v1.push_back( make_shared<foo>( /* some constructor init params */ ) );
v1.push_back( make_shared<foo>( /* ... */ ) );

// Create another array of smart pointers to foo's
// and reference the foo's created in v1
foo_array v2 = v1;

// Empty the array of smart pointers 'v1'.
// However, the 'foo' objects previously created are still "alive",
// because of the references stored in 'v2'.
v1.clear(); 
```

请注意，使用*现代*C++ 技术：没有*明确* `delete`的; 由于 STL 容器、智能指针和 C++ 析构函数的强大功能，资源可以*自动管理；*代码无泄漏且异常安全，更易于阅读和维护。*

# algorithm - 两个n位数字相加的运行时间分析

> ID：12649958
> 
> 赞同：0
> 
> 时间：2012-09-29T04:38:40.680
> 
> 标签：algorithm, time-complexity

我想看看两个数字相加的时间复杂度是多少。这里写成加法是 n 平方。[算法笔记](http://compgeom.cs.uiuc.edu/~jeffe/teaching/algorithms/notes/05-dynprog.pdf)

页码 4 第二段。

现在，如果我取 99 + 99 作为我将执行两个加法操作和两个进位操作 + 将前一个进位添加到新结果并结合所有内容。

我不确定我怎么能说这是 n 平方。

这让我认为我应该用二进制表示数字，这将使 01100011 成为 8 位，这将导致 8 个加法加上 4 个进位加法。这看起来像 n 平方，但我不确定。

有没有不同的方式来看待这个？它是怎样的？您可以在每个数字上运行一个循环并添加位置位置，即 10*sum+100*sum 等，但我可以在一个 for 循环中很好地做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T04:53:25.527

你提到的那句话说：

> 添加也不是免费的。**添加两个 n 位数字需要 O(n) 时间，**因此迭代算法的运行时间为 O(n ² )。

我将您第一次阅读文本时可能错过的相关单词加粗。

所指的“迭代算法”是用于前几页中讨论的其他内容的算法，而不是用于添加两个 n 位数的算法。

# jquery-mobile - 链接到不同 html 页面中的虚拟页面：JQuery Mobile

> ID：12649964
> 
> 赞同：1
> 
> 时间：2012-09-29T04:40:07.357
> 
> 标签：jquery-mobile

我的移动应用程序 index.html 和 individual.html 中有 2 个 html 页面。Index.html 页面包含许多虚拟页面。我在 individual.html 页面中有一个按钮。我想将它链接到 index.html 中的虚拟页面。

是否可以？

它究竟是如何做到的？

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:14:49.570

您可以在 中创建链接按钮，`individual.html`如下所示：链接如下：

```
<a data-role="button" rel="external" href="index.html#your_virtual_page">BUTTON</a> 
```

这是一个可能是您的文件的工作示例，`index.html`并且`individual.html`：

**-** `index.html`：

```
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    </head>

    <body>
        <div id="home" data-role="page">
            <div data-role="content">
                HOME   
            </div>
        </div>

        <!-- THE VIRTUAL PAGE THAT WE WANT TO ACCESS FROM individual.html -->
        <div id="p2" data-role="page">
            <div data-role="content">
                PAGE 2!!!
            </div>
        </div>  
    </body>
</html> 
```

**-** `individual.html`：

```
<html>
    <head>      
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>          
    </head>

    <body>
        <div id="home" data-role="page">
            <div data-role="content">
                <!-- YOUR LINK TO YOUR VIRTUAL PAGE IN index.html -->
                <a data-role="button" rel="external" href="./index.html#p2">TO PAGE 2</a>
            </div>
        </div>

        <div id="p1" data-role="page">
            <div data-role="content">
                P1
            </div>
        </div>      
    </body>
</html> 
```

希望这有助于交配。

# c# - 调用 Game.Exit() 后 XNA 游戏未退出

> ID：12649967
> 
> 赞同：2
> 
> 时间：2012-09-29T04:40:28.443
> 
> 标签：c#, xna

我有这个代码：

```
public UnnamedGame()
{
    Exit();
    graphics = new GraphicsDeviceManager(this);
    Content.RootDirectory = "Content";
} 
```

UnnamedGame 是 Game 的派生类（每个 XNA 游戏的基类）。当我调用 Exit(); 什么都没有发生，我在图形之后的行中设置了一个断点，它到达了该行，这不应该发生。

我还做了一些测试，创建了一个新的 XNA 游戏，当我尝试退出它时它运行良好，没有添加任何可能会改变功能的额外代码。

这是主程序的代码：

```
namespace UnnamedGame
{
#if WINDOWS || XBOX
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        static void Main(string[] args)
        {
            using (UnnamedGame game = new UnnamedGame())
            {
                game.Run();
            }
        }
    }
#endif
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:44:27.787

游戏还没有运行。您将在构造函数中结束游戏（在您的语句中关闭），但直到您在语句中`using`调用游戏才会开始。`game.Run()``using`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:56:28.863

是我的错，发现了问题。

我必须在关闭游戏窗口之前创建它，这就是它不起作用的原因。

# dynamic-programming - 尾递归和动态规划是一样的吗？

> ID：12649970
> 
> 赞同：8
> 
> 时间：2012-09-29T04:40:43.957
> 
> 标签：dynamic-programming, tail-recursion

我正在使用尾递归对斐波那契数进行编程，它背后的想法似乎与动态编程相同。那么它们是一样的吗？或者更确切地说，它们之间有一些相似之处？如果不是，它们何时变得不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T00:29:57.680

这些术语本身虽然相关，但无论如何都不等同：

*   动态编程是一种解决问题的方法，可以使用或不使用尾递归来实现。更一般地说，它需要“记忆”。

*   尾递归是实现动态规划算法的常用方法，因为它专门将记忆逻辑应用于特定领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T05:12:26.030

我明白你为什么要问这个问题。动态规划背后的想法是将问题分解为更小的问题，这与许多递归（尾或非尾）函数背后的想法完全相同。

这实际上是一种苹果与橘子的比较，有很多很好的答案，但有一件事让你意识到为什么很难比较这两个想法：在某些语言中，包括 Java，从技术上讲，你不能使用尾递归. 您可能知道，尾递归函数不会存储其调用的结果堆栈并在以后使用它们。然而，在 Java 中，为每个方法调用维护一个堆栈跟踪。这会使用堆栈空间，如果运行次数过多，可能会出现堆栈溢出。因此，任何看起来可能是尾递归的 Java 方法实际上都不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T04:46:03.193

动态编程通常是一种更有效的方法来完成与尾递归相同的任务。主要区别在于动态编程存储已经计算的结果，因此如果出现相同的操作，而不是再次运行代码，只需查找该值。这会占用更多空间/内存，但会产生更快的算法。

在斐波那契的情况下，动态编程解决方案是不断添加数组中的最后两个元素以获得下一个元素。尾递归解决方案将从头开始计算斐波那契的每个值。

# javascript - 从大数组中选择图片URL，插入页面随机DIV，循环

> ID：12649972
> 
> 赞同：1
> 
> 时间：2012-09-29T04:41:02.177
> 
> 标签：javascript, jquery

有点奇怪的要求。我有大约 300 个图像 URL 和 27 个`div`。每个`div`都有一个`id="img1"`，其中`1`是一个介于 1 和（你猜对了）27 之间的数字，以及一个`class="imageblock"`（用于一般样式）。

在这些`div`s 中的每一个中，我想插入一个`<img src="http://foo.bar/img.jpg" width="640">`，其中 URL 是从大约 300 个随机列表中选择的，并随机插入其中一个`div`s 中。27 中的每一个都`div`应该从 300 个选项中选择自己的图像。

此外，这些图像应该循环。每隔 5 秒，我希望将页面上的一个随机图像 URL 替换为另一个随机图像 URL。

这是我试图在一点帮助下拼凑起来的（可怕的）代码，但我对 javascript 毫无用处，无法完成这项工作：

```
<script type="text/javascript">     
    $('document').ready(function() {        
                    var divs = $('div');

                        $("div").each(function() {
                          $(this).html("<img src='http://foo.bar/img1.jpg'alt='"+$(this).attr("id")+"'/>");         
                        });  

                        var imageChanger = setInterval(function() {switchImage()}, 500);

                        function switchImage() {
                         var new_image_url = [ 'http://foo.bar/anotherimg.jpg', 'http://bar.foo/image.jpg', 'http://foo.bar/imgremote.jpg'];

                            var random_div = Math.floor(Math.random() * $('div').length);
                            var random_img = Math.floor(Math.random() * $(new_image_url.length);

                          $("div:nth-child("+random_div+")").html('<img src="('+random_img+')" width="640">)');            

                        }
    });
    </script> 
```

请注意，远程图像不遵循任何常见模式，从而使我的`random_img`变量无法正常工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T04:46:09.550

要从数组中选择一个随机元素，您可以使用以下命令：

```
var random_div = divs[Math.floor(Math.random() * divs.length)];
var random_img = new_image_url[Math.floor(Math.random() * new_image_url.length)]; 
```

这是您的代码的一个更有效的版本：

```
function random_int(max) {
    return Math.floor(Math.random() * max);
}

$(document).ready(function() {
    var images = ['http://foo.bar/anotherimg.jpg', 'http://bar.foo/image.jpg', 'http://foo.bar/imgremote.jpg'];
    var $divs = $('div');

    $divs.each(function() {
        $('<img />', {
            src: 'http://foo.bar/img1.jpg',
            alt: this.id
        }).appendTo(this);
    });

    function switchImage() {
        var $div = $divs.eq(random_int($divs.length));
        var image = images[random_int(images.length)];

        $div.find('img').attr('src', image);
    }

    var imageChanger = setInterval(switchImage, 500);
}); 
```

# java - Java - 插入符号对话框（类似于 Word）

> ID：12649981
> 
> 赞同：3
> 
> 时间：2012-09-29T04:42:19.240
> 
> 标签：java, unicode, dialog, insert, ms-word

我试图制作一个“插入符号”对话框。我想获取 Unicode 字符列表并将它们添加到 JList 并可能归类为“希腊语等”。我遇到了这种非常粗糙的方法：

```
for (int i=0; i<=Integer.MAX_VALUE; i++) {
        if (Character.isDefined(i)) {
            list.add(new String(Character.toChars(i)));
        }
    } 
```

但它需要 FOREVER 来初始化和加载。我需要一种更有效的方式来显示角色。也最好只显示显示某些内容的字符，因为某些字符显示为空白并留下大而难看的空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:59:32.363

[`Font#canDisplay()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html#canDisplay%28char%29)速度很快，虽然不是完全可靠。即使定义了代码点，它也可能没有特定字体的字形。[这里](https://sites.google.com/site/drjohnbmatthews/buttons)有一个例子。

# coronasdk - 将中间类库与超类一起使用

> ID：12649984
> 
> 赞同：0
> 
> 时间：2012-09-29T04:43:06.477
> 
> 标签：coronasdk, displayobject

我尝试做这样的事情：

需要“中产阶级”

```
Button = class('Button',DisplayObject) 
```

所以为了创建一些我想成为显示对象的按钮......

```
myButton = Button() 
```

但它不起作用。似乎 DisplayObject 不被识别为一个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:53:15.597

DisplayObject 不是一个类...

它甚至不是一个合适的 Lua 对象，DisplayObject 是一种用户类型，可能有很多含义，做你想做的事是非常糟糕的主意......

如果您想从 DisplayObject（如按钮）创建 Lua“类”，真正正确的方式是：

```
Mybutton = display.newImage(group, name)
function Mybutton:myCustomFunctionHere()
    --dostuff
end 
```

或者如果你真的想要一个按钮构造函数......

```
local function buttonConstructor(groupArg, nameArg, customArg)
    local returnValue = display.newImage(groupArg, nameArg);
    returnValue.someVar = customArg;
    returnValue.anotherVar = customArg;
    return returnValue;
end 
```

中间类不是为你想做的事情而设计的...... DisplayObject 根本不是一个类......（即使它看起来像一个类，因为它具有属性和方法）

不要用沉重的 OOP 思想编写 Lua，你可以在 Lua 中做 OOP？是的，你可以，但这会使简单的事情复杂化，它是为马车设计一个轻合金钢轮，或者在飞机上安装一个 3 级火箭发动机，这是过度设计，不会提高任何东西的性能（运行时、编码时间，编码维护......）甚至可能使情况变得更糟。

学习如何使用 Lua！非常灵活和有趣，具有非常广泛的架构选项！

# php - 如何使用 PHP 在 HTML 表格中显示 MySQL 内容

> ID：12649985
> 
> 赞同：1
> 
> 时间：2012-09-29T04:43:12.903
> 
> 标签：php, mysql, html-table

我有一个 MySQL 数据库，已将大量域列表导入其中 - 它们都在一个表中，并且它是唯一的列 - 非常简单；）

我想在我的网站上显示类似于此处的域：http: [//www.statmyweb.com/archive/43001/](http://www.statmyweb.com/archive/43001/)

我希望每页列出 1000 个域，并且在每个页面的底部应该有一个链接，例如“上一页”和“下一页”。

看起来非常简单，我只是不熟悉编码，而且我的努力都没有奏效。如果有人可以在有时间的时候发布它的代码，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:48:41.237

在 mysql 中选择查询添加限制 1000 然后一次只打印 1000 条记录并制作上一页和下一页链接并将其增加 1000

```
<?php 
$previous=$_REQUSEST['limit'];
if($previous>0)
{
echo "<a href='index.php?limit=1000-".$previous."'>Previous</a>";
}

echo "<a href='index.php?limit=1000+."$previous."'>Next</a>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:51:50.573

```
$i= 0;
$j= 1;

$return_html = '<table>';
$total_count = count($database_results);
foreach ($database_results as $row){
   if($i == 0){
       $return_html .= '<tr>';
   }
   $return_html .= '<td>' . $row . '</td>;

   if($i == 3 || $j == $total_count){
       $return_html . '</tr>';
   }

if($j == $total_count){
   $return_html .] '</table>';
}

   i++;
   j++;
} 
```

这就是如何构建表。其他答案解释了其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T05:00:57.633

试试这个

```
<?php
 $start=0;
 $limit=10;//your limit of elements in 1 page
 $query='your query';
 //execute query and take total row count into $totalRows
 if(isset($_GET['start']))
 {
 $start=$_GET['start'];
 }
 $query.=" LIMIT ".$start.",".$limit;
 // execute query and count into $currentRows
 ?>

 <html>
  <body>
   <table>
   <?php
   for($i=0;$i<$currentRows; $i++){
   ?>
   <tr><td colspan='2'><?php echo value here?></td></tr>
   <?php
   }
   ?>
   <?php
if($start>0)
{
$prev   =   $start-$limit;
}
else
{
$prev   =   $start;
}
if(($start+$limit)<$totalRows)
{
$next   =   $start+$limit;
}
else
{
$next   =   $start;
}
?>
   <tr><td><a href='yourpage.php?start=<?php echo $prev; ?>'>Previous</a></td><td><a href='yourpage.php?start=<?php echo $next; ?>'>Next</a></td></tr>
   </table>
  <body>
 </html> 
```

# drupal - drupal 6 主题的响应式网页设计

> ID：12649997
> 
> 赞同：0
> 
> 时间：2012-09-29T04:44:38.660
> 
> 标签：drupal, responsive-design

我在 drupal 中有一个大型网站，我正在使用 zen TSI 主题。它目前没有使用 CSS3 的响应式网页设计。我想使用 CSS3 为我的所有页面构建这个响应式网页设计我该怎么做。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:55:13.420

如果要构建响应式设计，则需要使用 HTML5 来设计网页，并正确使用 CSS，同时牢记 Fluid 上下文。你可以参考[这个](http://johnflower.org/blog/responsive-web-design-drupal)。