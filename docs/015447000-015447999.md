# StackOverflow 问答 15447000-15447999

# java - 不使用 Cipher 在 Java 中实现 RSA

> ID：15447001
> 
> 赞同：0
> 
> 时间：2013-03-16T08:01:54.120
> 
> 标签：java, rsa

我正在尝试在字符串文本上实现 RSA 加密/解密算法。但是，我在网上找到的所有内容要么使用 Cipher，要么他们正在对整数执行算法。谁能给我一个简单的指南来实现这个，例如，一个句子？我不想使用 Cipher 或任何其他库，因为我想知道它是如何工作的。

编辑：感谢大家的帮助。我终于让它工作了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:18:42.307

你最好的办法就是熟悉算法本身。[维基百科](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)对此有很好的解释。然后你需要实现模块化操作。当您完成上述操作时，只需将您想要加密的消息视为一个数字（实际上相当大的数字）并按照 wiki 中描述的操作进行操作。一个句子（或任何其他字符序列）可以被视为一个数字，就像它的字节序列一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:40:27.590

RSA 都取决于大素数以及它们如何难以分解。为了进一步了解该主题，我将为您提供两个资源，它们将更深入地解释该算法。我建议写下你想在 java 中创建哪些变量/方法以保持井井有条。

**以下是资源：**

解释算法前提的 YouTube 剪辑： [RSA Cipher Explained](http://www.youtube.com/watch?v=tXXnHXslVhw)

更多互动幻灯片说明： [RSA算法幻灯片](http://www.docstoc.com/docs/46782637/RSA-Tutorials)

# iphone - fmodf 获取模数的问题

> ID：15447006
> 
> 赞同：0
> 
> 时间：2013-03-16T08:02:27.163
> 
> 标签：iphone, ios, math, floating-point, fmodf

我需要找到浮点数的模数。

为此，我正在使用

```
NSLog(@"value >> %f",fmodf(2.0f, 0.1f)); 
```

这个的输出应该是 0.0f

但我得到的输出值>> 0.1

如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T11:19:01.260

编译器将源文本转换`0.1f`为最接近的可表示值。最接近 0.1 的 IEEE-754 32 位浮点值（iOS 使用）是 0.100000001490116119384765625。

您`fmodf`使用参数 2 和 0.100000001490116119384765625 进行评估。从 2 中减去后一个值的 19 倍后，余数为 0.099999971687793731689453125，即返回值。当它被四舍五入到几位显示时，结果是“0.1”。

# grails - Grails 2.0.1 控制器操作方法已停止工作

> ID：15447022
> 
> 赞同：0
> 
> 时间：2013-03-16T08:04:42.140
> 
> 标签：grails

我的项目一直使用 grails 2.0.1，我的控制器将它们的操作定义为方法而不是闭包。以前这些操作一直有效（即浏览器可以首先通过控制器中的操作方法呈现正确的 gsp 页面）。

最近我们注意到定制操作不再起作用，浏览器报告“404 资源未找到”。我们仍在使用 grails 2.0.1，这可以通过运行的每个 grails 命令中的“加载 grails 2.0.1”注释来确认。尽管有一些控制器/域/服务更改，但这些更改都不会影响操作方法的使用。据我所知，我们没有降级 grails/groovy 的版本。

如果我将操作更改为定义为闭包，那么它可以正常工作。但我对此并不满意，因为我的解决方案是方法是首选方式，而且它曾经有效。

我已经尝试过解决 grails 怪异的常用方法：适当的清理和重建，但没有任何乐趣。此外，这在 eclipse 和 unix envs 中都是一个问题（项目作为由 grails 命令运行的战争交付），因此它必须是项目文件中的某些内容，但我无法发现任何已更改的内容。

有什么建议我的项目可能发生了什么以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:10:52.750

我终于将我的问题追踪到我用来监控长时间运行的方法调用的一个方面。我已将切入点更改为包含“within(com.mydomain.domain..*)”，这是我的 Controller 类所在的位置。这似乎阻止了我的定制链接工作，不知道为什么。我不是故意的，我只是想让我的切入点包含所有域类方法，但我很乐意牺牲它以使控制器方法操作再次起作用。

我已经通过修改我的切入点解决了这个问题。

# php - 在 Enterprise Architect 中为 PHP 生成 getter 和 setter

> ID：15447025
> 
> 赞同：3
> 
> 时间：2013-03-16T08:04:58.447
> 
> 标签：php, uml, getter-setter, enterprise-architect, generated-code

我正在使用 Enterprise Architect 制作 UML 类图并生成 PHP5 代码。如何为某个类生成 getter 和 setter 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:49:07.107

将`<<Property>>`Stereotype 添加到要为其创建 Getter 和 Setter 的属性。

如需进一步参考，请参阅

*   [http://www.sparxsystems.com/uml_tool_guide/modeling/attributes.htm](http://www.sparxsystems.com/uml_tool_guide/modeling/attributes.htm)和
*   [http://www.sparxsystems.com/uml_tool_guide/modeling/createprop.htm](http://www.sparxsystems.com/uml_tool_guide/modeling/createprop.htm)

# scala - 连续轮询 HTTP 服务器并分派给参与者的惯用方式

> ID：15447030
> 
> 赞同：1
> 
> 时间：2013-03-16T08:05:33.517
> 
> 标签：scala, akka, spray

我需要编写一个不断轮询 Web 服务器以获取命令的客户端。来自服务器的响应表明命令可用（在这种情况下响应包含命令）或没有命令可用的指令，您应该对传入命令发出新请求。

我试图弄清楚如何使用 spray-client 和 Akka 来完成它，我可以想办法做到这一点，但它们看起来都不是完成它的惯用方式。所以问题是：

> 让几个线程轮询同一个 Web 服务器以获取传入命令并将命令交给参与者的最明智的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:50:50.497

此示例使用[spray-client](http://spray.io/documentation/spray-client/#message-pipeline)、[scala futures](http://doc.akka.io/docs/akka/2.1.0/scala/futures.html)和[Akka scheduler](http://doc.akka.io/docs/akka/2.1.0/scala/scheduler.html)。

实现取决于所需的行为（同时并行执行许多请求，以不同的时间间隔执行，向一个参与者发送响应以一次处理一个响应，向多个参与者发送响应以并行处理......等等）。

这个特定的例子展示了如何同时并行执行多个请求，然后在每个结果完成时对其进行处理，而无需等待同时触发的任何其他请求完成。

下面的代码将每 5 秒对 0.0.0.0:9000/helloWorld 和 0.0.0.0:9000/goodbyeWorld 并行执行两个 HTTP 请求。

在 Scala 2.10、Spray 1.1-M7 和 Akka 2.1.2 中测试：

处理周期性作业执行的实际调度代码：

```
// Schedule a periodic task to occur every 5 seconds, starting as soon 
// as this schedule is registered
system.scheduler.schedule(initialDelay = 0 seconds, interval = 5 seconds) {

  val paths = Seq("helloWorld", "goodbyeWorld")

  // perform an HTTP request to 0.0.0.0:9000/helloWorld and 
  // 0.0.0.0:9000/goodbyeWorld
  // in parallel (possibly, depending on available cpu and cores)
  val retrievedData = Future.traverse(paths) { path =>
    val response = fetch(path)
    printResponse(response)
    response
  }
} 
```

辅助方法/样板设置：

```
// Helper method to fetch the body of an HTTP endpoint as a string
def fetch(path: String): Future[String] = {
  pipeline(HttpRequest(method = GET, uri = s"/$path"))

}

// Helper method for printing a future'd string asynchronously
def printResponse(response: Future[String]) {
  // Alternatively, do response.onComplete {...}
  for (res <- response) {
    println(res)
  }
}

// Spray client boilerplate
val ioBridge = IOExtension(system).ioBridge()
val httpClient = system.actorOf(Props(new HttpClient(ioBridge)))

// Register a "gateway" to a particular host for HTTP requests 
// (0.0.0.0:9000 in this case)
val conduit = system.actorOf(
  props = Props(new HttpConduit(httpClient, "0.0.0.0", 9000)),
  name = "http-conduit"
)

// Create a simple pipeline to deserialize the request body into a string
val pipeline: HttpRequest => Future[String] = {
  sendReceive(conduit) ~> unmarshal[String]
} 
```

一些注意事项：

*   `Future.traverse`用于并行运行期货（忽略顺序）。在future 列表上使用for comprehension 将一次执行一个future，等待每个future 完成。

    ```
    // Executes `oneThing`, executes `andThenAnother` when `oneThing` is complete,
    // then executes `finally` when `andThenAnother` completes.
    for {
      oneThing <- future1
      andThenAnother <- future2
      finally <- future3
    } yield (...) 
    ```

*   `system`将需要替换为您实际的 Akka 演员系统。

*   `system.scheduler.schedule`在这种情况下，每 5 秒执行一次任意代码块——还有一个重载版本用于调度要发送到 actorRef 的消息。

    ```
    system.scheduler.schedule(
      initialDelay = 0 seconds,
      frequency    = 30 minutes,
      receiver     = rssPoller, // an actorRef
      message      = "doit" // the message to send to the actorRef
    ) 
    ```

*   对于您的特定情况， printResponse 可以替换为 actor send: `anActorRef ! response`。

*   代码示例没有考虑故障——处理故障的好地方是在 printResponse（或等效）方法中，通过使用 Future onComplete 回调：`response.onComplete {...}`
*   也许很明显，但是 spray-client 可以替换为另一个 http 客户端，只需替换`fetch`方法和随附的 spray 代码即可。

**更新：**完整的运行代码示例在[这里](https://github.com/daniel-trinh/webcrawler/blob/840a4bc50430b02ccc777c2637b53c89dc24d54a/app/biz/HttpPoller.scala)：

git clone repo，签出指定的提交 sha，`$ sbt run`导航到`0.0.0.0:9000`，并在控制台中观察执行的代码`sbt run`——它应该打印`Hello World!\n'Goodbye World!`OR `Goodbye World!\nHelloWorld!`（由于并行 Future.traverse 执行，顺序可能是随机的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:58:28.950

您可以使用[HTML5 服务器发送事件](http://www.html5rocks.com/en/tutorials/eventsource/basics/)。它在许多 Scala 框架中实现。例如在[xitrum](http://ngocdaothanh.github.com/xitrum/guide/async.html?highlight=respondeventsource#event-source)代码看起来像：

```
class SSE extends Controller {
  def sse = GET("/sse") {
    addConnectionClosedListener {
      // The connection has been closed
      // Unsubscribe from events, release resources etc.
    }

    future {
        respondEventSource("command1")
        //...
        respondEventSource("command2")
        //...
    }
 } 
```

SSE 非常简单，不仅可以在浏览器中使用，而且可以在任何软件中使用。Akka 集成在 xitrum 中，我们在类似的系统中使用它。但它使用 netty 作为异步服务器，它也适合在 10-15 个线程中处理数千个请求。

因此，通过这种方式，您的客户端将保持与服务器的连接，并在连接中断时重新连接。

# python - h5py 何时可用于存储数据？

> ID：15447039
> 
> 赞同：0
> 
> 时间：2013-03-16T08:06:34.907
> 
> 标签：python, h5py

我正在使用 h5py 使用 python 存储数据

```
import h5py
def store(eigenvalues,eigenvectors,name='01_'):

        datafile = h5py.File(name+'data.h5', 'w')

        datafile['eigenvalues'] = eigenvalues
        datafile['eigenvectors'] = (eigenvectors)
        datafile.close()
        print "Successfully saved eigenvalues and eigenvectors" 
```

存储这些大数字真的很有用但是当试图只存储两列数据时，我发现保存普通数据文件更节省空间。是否存在临界数据大小，超过该大小的 h5py 格式存储会更有效？使用这种格式还有其他不明显的优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:37:50.027

使用 HDF5 有很多优点。正如@EnricoGiampieri 所说，它通常用于存储大量数据，而不仅仅是单个数组。同时存储所有相关元数据也很有用。来自[HDF5 网站](http://www.hdfgroup.org/HDF5/whatishdf5.html)

> HDF5 技术套件包括：
> 
> *   一种通用的数据模型，可以表示非常复杂的数据对象和各种元数据。
> *   一种完全可移植的文件格式，对集合中数据对象的数量或大小没有限制。
> *   一个在一系列计算平台上运行的软件库，从笔记本电脑到大规模并行系统，并使用 C、C++、Fortran 90 和 Java 接口实现高级 API。
> *   一组丰富的集成性能特性，可优化访问时间和存储空间。
> *   用于管理、操作、查看和分析集合中数据的工具和应用程序。

它是一种自描述的分层数据格式——这意味着文件中的数据集很容易被发现。它可以扩展到非常大的文件大小和大规模并行 I/O。

至于压缩，这是单个数据集的属性，需要在创建该数据集时指定。有几种不同的压缩算法可供选择 - GZIP、SZIP 和 LZF 都受支持。有关[h5py wiki](https://code.google.com/p/h5py/wiki/HowTo#Using_GZIP_compression)的更多信息。

要将压缩应用于您的文件，请尝试以下操作：

```
import h5py
def store(eigenvalues,eigenvectors,name='01_'):

    datafile = h5py.File(name+'data.h5', 'w')

    eigenvalues_dset = datafile.create_dataset('eigenvalues', eigenvalues.shape, eigenvalues.dtype, compression='gzip', compression_opts=4)
    eigenvectors_dset = datafile.create_dataset('eigenvectors', eigenvalues.shape, eigenvectors.dtype, compression='gzip', compression_opts=4)

    datafile['eigenvalues'][:] = eigenvalues
    datafile['eigenvectors'][:] = (eigenvectors)
    datafile.close()
    print "Successfully saved eigenvalues and eigenvectors" 
```

在这里，我假设`eigenvalues`and`eigenvectors`都是 numpy 数组。如果不是，您应该转换它们（只需使用`numpy.array(eigenvalues)`）。另请注意，为了分配数据集，我使用了`[:]`- 这是因为`datafile['eigenvalues']`它是 HDF5 对象，而是该对象`datafile['eigenvalues'][:]`中的实际数据。HDF5 对象不仅包含数据，还包含属性和元数据。

# javascript - jQuery 和 Node.js 有什么区别？

> ID：15447041
> 
> 赞同：28
> 
> 时间：2013-03-16T08:07:00.117
> 
> 标签：javascript, jquery, node.js

我已经尝试了几个使用 Node.js 的示例，但我仍然对 jQuery 和 Node.js 感到困惑。

目前我所知道的是 Node.js 和 jQuery 扮演着两个不同的角色。一个促进服务器端 JavaScript，另一个为客户端 JavaScript 提供抽象库。

我在 Stack Overflow 上也看到了一些与 Node.js 和 jQuery 相关的其他链接，但我没有得到我想要的。

*   *[Node.js：客户端模板与服务器端模板](https://stackoverflow.com/questions/8876168/node-js-client-side-templating-v-s-server-side-templating)*

*   *[我可以从 JavaScript 的“零”知识开始使用 jQuery（或 Node.js）吗？](https://stackoverflow.com/questions/7863571/can-i-start-with-jquery-or-node-js-with-nil-knowledge-of-javascript)*

Node.js 有什么功能差异或有什么特别之处，这会让我想到要使用它？如果我选择使用 Node.js，我将获得什么好处？我知道 Node.js 适用于事件驱动编程，而不是面向对象的编程语言，但是我可以用 Node.js 做的其他事情是我不能用 jQuery 或其他框架做的吗？

我有几个问题，例如：

1.  Node.js 可以做哪些 jQuery 做不到的事情？

2.  Node.js 是否能够使用 Web 服务？如果是，那么是否可以对 jQuery 做同样的事情？如果不是，那是什么原因呢？

3.  Node.js 的特点是什么？它与 jQuery 有何不同？

4.  在哪种情况下我应该使用 Node.js 或 jQuery？

5.  Node.js 和 jQuery 有哪些特殊功能？使用两者的好处？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-16T08:11:51.207

主要区别在于[Node.js](http://en.wikipedia.org/wiki/Nodejs)是服务器端，而[jQuery](http://en.wikipedia.org/wiki/JQuery)是客户端。

> 1.  Node.js 可以做哪些 jQuery 做不到的事情？

Node.js 使服务器端代码可以用 jQuery 无法实现的 JavaScript 功能编写。

> 2.  Node.js 是否能够使用 Web 服务？如果是，那么是否可以对 jQuery 做同样的事情？如果不是，那是什么原因呢？

两者都能够使用 Web 服务。不同之处在于 jQuery 将在客户端执行，而 Node.js 将在服务器端执行。

> 3.  Node.js 的特点是什么？它与 jQuery 有何不同？

主要区别在于它启用了 JavaScript 中的服务器脚本。

> 4.  在哪种情况下我应该使用 Node.js 或 jQuery？

服务器端脚本，例如替代 PHP、ASP.NET

> 5.  还请提及 Node.js 和 jQuery 的一些特殊功能吗？

使用两者的好处？

Node.js 在 JavaScript 中启用服务器端脚本。jQuery 简化了客户端脚本。

# xml - 在 Windows Phone 中使用 RSS 源

> ID：15447043
> 
> 赞同：1
> 
> 时间：2013-03-16T08:07:21.183
> 
> 标签：xml, windows-phone-7, data-binding, rss

大家好，我正在开发应用程序以在 Windows Phone 中显示一些 Rss 提要数据

例如，我有一些 Rss 提要

[链接](http://www.sakshieducation.com/(S(3mpuan55nrnw3445zhezkerv))/RSS.aspx)

从这个 Rss Feeds 我喜欢在我的 windows Phone 应用程序中显示数据

问题是当我通过此链接时，我正在获取一些 Xml 数据。我不知道如何在 Windows 手机应用程序中使用 Xml 数据。

请给我一些建议....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-12T14:58:57.290

查看[SyndicationFeed](https://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed(v=vs.110).aspx)类，代码示例如下

```
HttpClient client = new HttpClient();
String str = await client.GetStringAsync(new Uri("http://yourwebsite.com/test.xml"));
SyndicationFeed feed = new SyndicationFeed();
feed.Load(str);

foreach (SyndicationItem item in feed.Items)
{
  // Extract the information from the SyndicationItem object ....

} 
```

# java - 气氛 p2p 聊天

> ID：15447046
> 
> 赞同：0
> 
> 时间：2013-03-16T08:07:47.743
> 
> 标签：java, atmosphere

我想知道是否可以使用适用于 p2p 的 Atmosphere Framework 创建基于 Web 的聊天。在 Atmosphere 示例中，有聊天示例向当前订阅的所有听众广播消息。我想将消息传递给它所针对的特定用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:01:50.400

它非常简单。假设您只想在用户 B 发送消息时通知用户 A。您只需将代表用户 A 的气氛资源添加到用户 B 的广播者。您需要做的就是为每个用户设置一个[广播](http://atmosphere.java.net/nonav/apidocs/org/atmosphere/cpr/Broadcaster.html)者.然后使用[BroadcasterFactory](http://atmosphere.java.net/nonav/apidocs/org/atmosphere/cpr/BroadcasterFactory.html)来获取特定的广播者。例如。

```
Broadcaster broadcasterUserA = BroadcasterFactory.getDefault().get("A");
Broadcaster broadcasterUserB = BroadcasterFactory.getDefault().get("B"); 
```

然后将 A 的[AtmosphereResource](http://atmosphere.github.com/atmosphere/apidocs/org/atmosphere/cpr/AtmosphereResource.html)添加到 B 的广播器。

```
broadcasterUserB.addAtmospherResource(//here put A's atmosphere resource//); 
```

或者你可以让 A 的广播员像

```
BroadcasterFactory.getDefault().lookup("A",true).broadcast("message from B"); 
```

希望这可以帮助。

# map - 在 Clojure 中，是否有一种惯用的方式在宏定义中解构地图？

> ID：15447047
> 
> 赞同：3
> 
> 时间：2013-03-16T08:07:52.943
> 
> 标签：map, macros, clojure, noir, destructuring

我一直在一个 web 项目中使用 noir，我想限制对用户的访问，这取决于他们对 defpage 宏定义的所有可能路由的访问级别（和子级别）。所以最初我有

```
(defpage [:post "/mysite"] {:as input}
  (if-not (has-reqd-user-level? :levelX :sublevelY "/grantedRoute")
    (noir.response/redirect "/insufficientRights")
    ...)) 
```

然后我认为这将摆脱样板代码：

```
(defmacro defpage-with-user-level [level sublevel granted-route route data expr]
  `(defpage ~route ~data
     (if-not (has-reqd-user-level? ~level ~sublevel ~granted-route)
       (noir.response/redirect "/insufficientRights")
       ~expr))) 
```

最后，我们使用它如下：

```
(defpage-with-user-level :levelX :sublevelY "/grantedRoute"
  [:post "/mysite"] {:as input}
  (html
    [:body [:h1 (str "Hello " (:name input) "!")]])) 
```

但是正如 Rich Hickey 的这篇文章所提到的，[https:](https://groups.google.com/forum/#!msg/clojure/4II-HKr_Pu0/2IcKit99cagJ) //groups.google.com/forum/#!msg/clojure/4II-HKr_Pu0/2IcKit99cagJ ，由于位置绑定，感觉有点尴尬，这不是惯用的当已经存在地图时。

但是，我一直在寻找一些关于在宏中使用解构绑定的示例或讨论，遗憾的是，我没有发现它们的任何明确用途，因为它一直在传递未计算的表达式。

因此，我想到了以下解决方案：

```
(defmacro defpage-with-user-level [dts expr]
  `(defpage (:route ~dts) (:data ~dts)
     (if-not (has-reqd-user-level? (:level ~dts) (:sublevel ~dts) (:granted-route ~dts))
       (noir.response/redirect "/insufficientRights")
       ~expr))) 
```

但是现在，还不清楚如何将映射本地的数据映射从 :get 和 :post 传递到上面的示例中的本地。

我做对了，让我的第一次尝试不受干扰，还是我真的需要使用第二种方法？我希望不是。还有其他选择吗？请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T08:29:32.883

你的第一个解决方案很好。Rich 所说的是使用普通的旧地图来传递数据，而不是为每种类型的数据创建新的类型/类。例如：您可以使用简单的地图来表示用户信息，而不是创建一个类来表示用户数据。

就您的第二次尝试而言，您可以在宏中使用地图解构：

```
(defmacro defpage-with-user-level [{:keys [route data level sublevel granted-route]} expr]
  `(defpage ~route ~data
     (if-not (has-reqd-user-level? ~level ~sublevel ~granted-route)
       (noir.response/redirect "/insufficientRights")
       ~expr)))

(defpage-with-user-level {:level :levelX 
                          :sublevel :sublevelY 
                          :granted-route "/grantedRoute"
                          :route [:post "/mysite"] 
                          :data {:as input}}
  (html
    [:body [:h1 (str "Hello " (:name input) "!")]])) 
```

# spring - 使用自定义用户详细信息服务自动登录的问题

> ID：15447048
> 
> 赞同：1
> 
> 时间：2013-03-16T08:08:03.440
> 
> 标签：spring, hibernate, spring-mvc, spring-security, spring-social

我在实施 Spring Security 时遇到了一些问题。我正在使用自定义用户详细信息服务，当我尝试注册一个新帐户时，它似乎没有按应有的方式登录用户。这是我尝试使用 SignInUtils 类登录用户的代码

SignInUtils.java

```
package com.youthministry.controller;

import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.context.SecurityContextHolder;

public class SignInUtils {
    /**
     * Programmatically signs in the user with the given the user ID.
     */
    public static void signin(String userId) {
        SecurityContextHolder.getContext().setAuthentication(new UsernamePasswordAuthenticationToken(userId, null, null));  
    }

} 
```

登录控制器.java

```
package com.youthministry.controller;

import javax.validation.Valid;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.social.connect.Connection;
import org.springframework.social.connect.web.ProviderSignInUtils;
import org.springframework.stereotype.Component;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.context.request.WebRequest;
import com.youthministry.controller.SignInUtils;
import com.youthministry.controller.SignupForm;
import com.youthministry.domain.Role;
import com.youthministry.domain.User;
import com.youthministry.domain.UserProfile;

import com.youthministry.service.UserService;

@Controller
public class LoginController {

    @Autowired
    private UserService UserService;

    @RequestMapping(value={"/", "/signin"})
    public String signin() {
        return "signin";
    }

    @RequestMapping(value="/signup", method=RequestMethod.GET)
    public SignupForm signupForm(WebRequest request) {
        Connection<?> connection = ProviderSignInUtils.getConnection(request);
        if (connection != null) {
            return SignupForm.fromProviderUser(connection.fetchUserProfile());
        } else {
            return new SignupForm();
        }
    }

    @RequestMapping(value="/signup", method=RequestMethod.POST)
    public String signup(@Valid SignupForm form, BindingResult formBinding, WebRequest request) {
        if (formBinding.hasErrors()) {
            return null;
        }
        User user = createUser(form, formBinding);
        if (user != null) {
            SignInUtils.signin(user.getUsername());
            ProviderSignInUtils.handlePostSignUp(user.getUsername(), request);
            return "redirect:/home";
        }
        return null;
    }

    // Internal helpers
    private User createUser(SignupForm form, BindingResult formBinding) {
        User user = new User();
        user.setUsername(form.getUsername());
        user.setPassword(form.getPassword());

        UserProfile userProfile = new UserProfile();
        userProfile.setFirstName(form.getFirstName());
        userProfile.setLastName(form.getLastName());

        user.setUserProfile(userProfile);

        Role role = new Role();
        role.setName("ROLE_USER");

        user.getRoles().add(role);

        UserService.addUser(user);

        return user;
    }
} 
```

弹簧安全.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <http pattern="/resources/css/**" security="none"/>
    <http pattern="/resources/images/**" security="none"/>
    <http pattern="/resources/scripts/**" security="none"/>

    <http use-expressions="true" access-denied-page="/accessDenied.jsp" >
        <form-login login-page="/signin" default-target-url="/home" login-processing-url="/signin/authenticate" authentication-failure-url="/signin?error=bad_credentials"/>        
        <logout logout-success-url="/signin" />
        <intercept-url pattern="/admin/**" access="hasRole('ROLE_ADMIN')" />
        <intercept-url pattern="/group/**" access="hasRole('ROLE_USER')" />
        <intercept-url pattern="/group" access="hasRole('ROLE_USER')" />
        <intercept-url pattern="/home" access="hasRole('ROLE_USER')" />
        <intercept-url pattern="/**" access="permitAll" />
        <intercept-url pattern="/auth/**" access="permitAll" />
        <intercept-url pattern="/disconnect/facebook" access="permitAll" />
        <remember-me user-service-ref="userDetailsService" />

    <!--<session-management invalid-session-url="/invalidsession.jsp">
            <concurrency-control max-sessions="1"
                error-if-maximum-exceeded="true" />
        </session-management>-->

        <!--  Spring Social Security authentication filter -->
        <custom-filter ref="socialAuthenticationFilter" before="PRE_AUTH_FILTER" />
    </http>

    <beans:bean id="customEncoder" class="com.youthministry.security.CustomPasswordEncoder" />
    <beans:bean id="customUserService"
        class="com.youthministry.security.CustomUserDetailService" >
    </beans:bean>

    <authentication-manager alias="authenticationManager" >
        <authentication-provider user-service-ref="customUserService">
            <password-encoder ref="customEncoder" />
        </authentication-provider>
        <!-- Spring Social Security authentication provider -->
        <authentication-provider ref="socialAuthenticationProvider" />
    </authentication-manager>

    <jdbc-user-service id="userDetailsService" 
                    data-source-ref="dataSource" 
                    users-by-username-query="select username, password, true from User where username = ?"
                    authorities-by-username-query="select u.username username, r.name authority from user_roles u_roles, user u, roles r where u.username = ?"/>

    <beans:bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors"
        factory-method="noOpText" />

    <beans:bean id="passwordEncoder" class="org.springframework.security.crypto.password.NoOpPasswordEncoder"
        factory-method="getInstance" />

</beans:beans> 
```

如果可能需要任何其他文件来帮助让我知道。否则这里是 github repo 的链接。

[http://github.com/dmcquillan314/YouthMinistryHibernate.git](http://github.com/dmcquillan314/YouthMinistryHibernate.git)

在此先感谢您提供的任何帮助，我对 spring 仍然很陌生，并试图找出有关初始 spring-security 配置的一些问题。也欢迎对 github 项目提出任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:31:22.127

我认为问题在于`SignInUtils.signin()`您将身份验证令牌放入不包含任何内容的安全上下文中`GrantedAuthority`（的第三个参数`new UsernamePasswordAuthenticationToken()`为空），然后将请求重定向到`/home`配置为需要`ROLE_USER`权限的 URL ( )。

# ruby - Ruby 中的简单屏幕抓取器，Selenium Webdriver 引发错误

> ID：15447050
> 
> 赞同：0
> 
> 时间：2013-03-16T08:08:17.547
> 
> 标签：ruby, selenium, selenium-webdriver

我在实现一个简单的屏幕抓取器时遇到问题。基本脚本如下：

```
require 'selenium-webdriver' 

width = 1024 
height = 728 

@websites = Array.new

file = open('websites.txt')

file.each_line { |line| @websites.push line }

@websites.each do |website|
    d = Selenium::WebDriver.for :firefox
    puts "Now going to:"+ " #{website}"
    d.navigate.to website 
    d.execute_script %Q{ 
    window.resizeTo(#{width}, #{height}); 
    } 
    d.save_screenshot("#{website.gsub('http://', '')}"+".png") 
    d.quit 
    sleep 10
end 
```

selenium 抛出的异常：

```
ruby keepwatch.rb
Now going to: http://www.example.com/
/Users/Big_Bird/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `initialize': No such file or directory - www.example.com/ (Errno::ENOENT)
.png
    from /Users/Big_Bird/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `open'
    from /Users/Big_Bird/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `save_screenshot'
    from keepwatch.rb:29:in `block in <main>'
    from keepwatch.rb:22:in `each'
    from keepwatch.rb:22:in `<main>' 
```

在这件事上我能得到任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:25:13.340

尝试添加文件路径并从末尾删除 / (www.example.com/)。如果这不起作用，请尝试删除除文件名和扩展名之间的点之外的所有点。

例如 - d.save_screenshot("./screenshot.png")

# php - netbeans 7.3 上的 HTML5 无法与 chrome Netbeans Connector 集成

> ID：15447051
> 
> 赞同：2
> 
> 时间：2013-03-16T08:08:37.040
> 
> 标签：php, html, google-chrome, netbeans

我刚刚创建了一个空的 HTML5 项目，无法通过新的 Chrome netbeans 连接器功能运行它。我已将 netbeans 连接器扩展添加到我的 chrome 浏览器，但我不断收到此警告“无法通过外部浏览器访问 Url。检查浏览器配置。” 我有最新的 netbeans 版本 7.3 和 jdk 7u17。Chrome 浏览器版本 25.0.1364.172 m。

有人有一些建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T21:08:40.703

我在使用 OpenSUSE 12.3 x86_64 时遇到了同样的错误。

我的解决方案是：转到`Netbeans Menu > Tools > Options`. 在`General`选项卡中按`Edit`，然后编辑 Chrome 浏览器的命令以：

```
/opt/google/chrome/google-chrome 
```

希望对你有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T04:25:31.233

我对 Netbeans 7.3.1 和 Chromium 29.0 也有同样的问题；在“工具>选项>常规”部分中编辑“Chrome”浏览器可执行文件以指向“铬”执行位置起初似乎没有什么不同。

* * *

打开***项目属性***，您可以进一步编辑打开/执行文件的应用程序。默认**浏览器**是“Chrome 与 NetBeans 集成”。到目前为止，将*项目属性中的“***浏览器**”字段 更改为指向已编辑的**Chrome**执行程序会在 Chromium 浏览器中运行该文件。但是，我不确定它与 NetBeans 本身的集成程度（如果有的话）。

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:11:27.480

尝试在嵌入式浏览器中运行它。它有效吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:53:12.607

在这种情况下，最好在[http://netbeans.org/community/issues.html](http://netbeans.org/community/issues.html)提交错误报告。警告出现在哪里/何时？如果您提交错误，请附上 IDE 日志和错误截图。谢谢。***

# java - Spring 3.2 Web MVC @ModelAttribute 没有标签

> ID：15447053
> 
> 赞同：1
> 
> 时间：2013-03-16T08:08:49.463
> 
> 标签：java, json, spring-mvc, modelattribute

我试图让 Spring 3.2 MVC 返回没有默认标签的 JSON 响应。

例如，

```
@Controller
@RequestMapping("/dt")
public class DTAgentsController {

@ModelAttribute
@RequestMapping(method = RequestMethod.GET, produces = "application/json;UTF-8")
    public DTResponse agents() {
        DTResponse resp = new DTResponse();
        resp.setsEcho(1);
        resp.setiTotalDisplayRecords(10);
        resp.setiTotalRecords(50);
        return resp;
    }
} 
```

返回

```
{"DTResponse":{"sEcho":1,"iTotalRecords":50,"iTotalDisplayRecords":10}} 
```

我只希望 JSON 输出是

```
{"sEcho":1,"iTotalRecords":50,"iTotalDisplayRecords":10} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:24:50.997

问题不在于`@ModelAttribute`，它只是意味着您想要存储或从模型中获取什么数据。您似乎使用 jQuery 数据表，因此您应该添加**`@ResponseBody`**到方法`agents()`中。

```
@RequestMapping(method = RequestMethod.GET)
@ResponseBody
    public DTResponse agents() {
        DTResponse resp = new DTResponse();
        resp.setsEcho(1);
        resp.setiTotalDisplayRecords(10);
        resp.setiTotalRecords(50);
        return resp;
    }
} 
```

# excel - 将 Excel 绘图导出为 SVG 或 PNG

> ID：15447055
> 
> 赞同：9
> 
> 时间：2013-03-16T08:09:01.517
> 
> 标签：excel, svg

在 Excel 中创建绘图后，有没有办法将绘图导出到 SVG，同时保留显式字符和矢量笔划。（我不想捕获屏幕并导出）。

更新：我不想以某些复杂且可能有损的格式导出，例如 PDF 或 Word。图形笔画在 PDF 中，我只是想把它们拿出来。此外，我不想转储为 CSV 并使用其他工具重新绘制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:13:55.693

如果您“打印为 PDF”，您应该能够将其转换为 SVG 格式。网上有几个转换器，不过我会使用 Adob​​e Illustrator。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T09:58:22.693

我认为你给自己设定了一项非常艰巨的任务。

如果您将绘图区域复制到剪贴板并查看可用的格式`Application.ClipboardFormats`，则提供的唯一矢量格式是 PICT。也许这可能是一个调查的途径......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-29T13:05:00.933

将其作为绘图复制到 powerpoint 中。在PowerPoint中另存为电动势。在例如 inkscape 中打开 emf，然后另存为 svg。向量被保留。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-10T18:15:17.000

## 2020 更新

**这现在很容易手动实现**

只需右键单击图表并选择“另存为图形”，您可以在其中选择另存为 .svg。

**VBA 解决方案**

不幸的是，对象模型还不支持这个相对较新的特性。`Chart.Export fileName:="MyChart", FilterName:="SVG"`截至目前将导致一个空文件。因此，使用 VBA 导出仍然非常困难，只能通过自动化“手动”方法来实现。我创建了一个正是这样做的解决方案，并试图使其易于在其他代码中实现。有关完整解决方案，请查看[此答案](https://stackoverflow.com/a/65212838/12287457)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-21T19:06:28.737

保存为 PDF 并使用完全免费的 InkScape 进行操作，并与 Illustrator 共享类似的功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-21T17:54:36.500

解决方案很简单，只需将绘图复制并粘贴到 Inkscape 即可。它保持原始大小，所有形状都被矢量化。

# php - Joomla 出于什么安全原因添加表前缀？

> ID：15447059
> 
> 赞同：1
> 
> 时间：2013-03-16T08:10:15.220
> 
> 标签：php, mysql, prefix

表前缀在安全性方面有什么作用？

当我在本地主机上安装 Joomla 时，它总是“出于安全原因”生成唯一的表前缀。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:13:44.957

随机前缀使 SQL 注入攻击很难猜测有效的表名。

这些攻击通过将 SQL 代码插入用户输入字段来进行。这些有时会诱使后端服务器执行其他 SQL 命令。如果攻击者不知道表名，那么他们就无法编写有效的 SQL 以这种方式注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:14:36.340

攻击者可以依赖应用程序之间的一致性，如果您的表名具有唯一前缀，则几乎就像使用另一种类型的密码一样，因为攻击者无法看到您为表命名的内容。

否则，如果他们知道您的表名并且他们找到了通过已知漏洞注入 SQL 的方法，他们可以使用查询中的表名来操作和/或转储您的所有数据。

# nagios - nagios 检查结果路径不是有效目录

> ID：15447062
> 
> 赞同：0
> 
> 时间：2013-03-16T08:10:50.260
> 
> 标签：nagios

当我在命令下运行时出现错误

```
nagios3 -v /etc/nagios3/nagios.cfg 
Error in configuration file '/etc/nagios3/nagios.cfg' - Line 469 (Check result path is not a valid directory) Error processing main config file 
```

所以我看了`ls -l /var/lib/nagios3/`

`drwxr-x--- 3 nagios nagios 1024 Mar 14 21:13 spool`

在这种情况下，为什么我会出错？可能我认为我的`/var/lib/nagios3/spool/checkresult/check2JcDx5`文件包含错误的行。当我在命令下运行时，我得到了这个输出。

```
#cat check2JcDx5 
file_time=1363378360
host_name=localhost
service_description=HTTP
check_type=0
check_options=0
scheduled_check=1
reschedule_check=1
latency=0.122000
start_time=1363378360.122234 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T14:40:44.900

禁用 SELinux：

```
# getenforce

# setenforce 0 
```

编辑 /etc/selinux/config. 设置`SELINUX=disabled`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-15T22:06:11.793

您也许可以安装 nagios-selinux 软件包以添加策略以在 selinux 环境中运行 nagios。比禁用现有安全性更好。

# ios - 更改 NSDate 工作日和月份的语言

> ID：15447068
> 
> 赞同：2
> 
> 时间：2013-03-16T08:11:16.190
> 
> 标签：ios, objective-c, nsdate, nsdateformatter, nstimezone

我想显示这样的日期：工作日 7 个月。我这样做了，我有正确的语法。

```
NSDateFormatter* df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"EEEE dd MMMM"];
[df setTimeZone:[NSTimeZone localTimeZone]]; 
```

记录的结果是：3 月 16 日星期六。我只想拥有法国约会，而不是英国约会。我尝试设置本地时区，但它没有任何改变。你知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T11:33:12.970

使用标识符初始化语言环境。您可以从中获取所有可用的标识符

```
[NSLocale availableLocaleIdentifiers]; 
```

我相信@"fr_BI" 是法语标识符之一

```
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"fr_BI"];
[dateFormatter setLocale:locale]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T08:13:56.677

`NSLocale`您使用适当的对象设置日期格式化程序的区域设置。

另外，请注意像这样的硬编码日期格式。您的用户可能不喜欢以这种格式查看日期，因此您应该首先运行格式字符串`+[NSDateFormatter dateFormatFromTemplate:options:locale:]`。WWDC 2012 会议“国际化技巧与窍门”提供了大量关于此的有用信息。

# c# - 使用 WCF 进行架构优先服务开发的项目结构

> ID：15447072
> 
> 赞同：1
> 
> 时间：2013-03-16T08:12:09.887
> 
> 标签：c#, .net

我有 WSDL 和 XSD 作为起点。（WSDL 是使用 WCSF Blue 工具从 XSD 生成的）。使用工具从 WSDL 生成服务代码。项目名称为“Autogenerated_Service_Project”。在这个项目中，它将有 [ServiceContract] 和 [DataContract] 类。它有一个名为“EmployeeDataContract”的数据合约。在 GetEmployee() 服务操作中，这个数据契约被返回给客户端。

我有一个名为“Business_Project”的业务层项目。它有一个返回“Employee”实体对象的方法。

目前，我指的是“Autogenerated_Service_Project”中的“Business_Project”。

```
Business_Project.MyClass b = new Business_Project.MyClass();
EmployeeDataContract d = b.GetAssociate();
return EmployeeDataContract; 
```

当 WSD1 发生变化时，挑战就来了。更改 WSDL 后，将重新创建“Autogenerated_Service_Project”，上述代码将丢失。

克服此代码丢失的解决方案是什么？

注意：“Autogenerated_Service_Project”是最顶层的项目。理想情况下，它不能被任何其他项目引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:35:09.283

您可以更改调用业务层的方式（可能您的解决方案需要额外的层）
但是以简单的方式，您可以生成一次代理，当 WSDL 发生更改时手动处理更改，或者仅将该工具用于新服务。
如果 WSDL 上的服务是细粒度的，则该解决方案可能适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:09:16.933

这可以通过在不同的文件中使用[部分类来解决。](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)问题中给出的代码可以移动到这个新的部分类文件中。即使重新创建自动生成的文件，该文件也会保留。

# php - 如果未登录 PHP，则显示登录表单

> ID：15447073
> 
> 赞同：0
> 
> 时间：2013-03-16T08:12:20.850
> 
> 标签：php, mysql, login

我在 index.php 上有一个登录表单。

我想要的是在这个页面上，如果您已经登录，则不应出现 html 表单。如果您已登录，您应该在 index.php 上可以看到您的用户名并带有注销按钮。

如果你没有登录，这个表格应该会出现：

```
<form action="<?php $PHP_SELF; ?>" method="post" >
            <h1>Login Form</h1>
            <div>
                <input type="text" placeholder="Username)" required="" id="username" />
            </div>
            <div>
                <input type="password" placeholder="Password" required="" id="password" />
            </div>
            <div>
                <input type="submit" value="Log in" />
                <a href="#">Lost your password?</a>
                <a href="#">Register</a>
            </div>
        </form> 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:20:45.147

用于`Session`此并存储`Username`在会话中

```
<?php
    session_start();
    if(!isset($_SESSION['username']))
    {
?>

<form action="<?php $PHP_SELF; ?>" method="post" >
    <h1>Login Form</h1>
    <div>
        <input type="text" placeholder="Username" required="" id="username" />
    </div>
    <div>
        <input type="password" placeholder="Password" required="" id="password" />
    </div>
    <div>
        <input type="submit" value="Log in" />
        <a href="#">Lost your password?</a>
        <a href="#">Register</a>
    </div>
</form>

<?php 
    }
    else
    {
        Welcome, echo $_SESSION['username'];
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:20:58.427

简单的解决方案。将用户名保留在会话中，并在页面顶部检查会话是否已设置。如果是，那么他们已登录，您可以执行任何操作。如果没有，请显示您的登录表单...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:21:24.377

在登录页面中使用会话并在每个页面的开头检查登录页面中的会话，在顶部执行此操作

```
session_start(); 
```

并从数据库中选择字段后将它们存储在会话中

```
$_SESSION['username']; 
```

然后，在每个页面检查会话上，例如

```
if(!array_key_exists('username',$_SESSION)){
header("location:index.php");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T08:18:02.233

您可以在登录时将一些值存储在会话变量中。

然后在页面上方您可以检查它。

如果可用，则表示用户已经登录，您无需显示登录表单。

如果没有，则显示登录表单。

# android - 暂停 AsyncTask 执行，提示用户输入并根据用户输入继续执行

> ID：15447074
> 
> 赞同：0
> 
> 时间：2013-03-16T08:12:23.610
> 
> 标签：android

我有以下`AsyncTask`

```
public class LoadFromCloudTask extends AsyncTask<Void, String, Boolean> {

    public LoadFromCloudTask(LoadFromCloudTaskFragment loadFromCloudTaskFragment) {
        this.loadFromCloudTaskFragment = loadFromCloudTaskFragment;
    }

    @Override
    protected Boolean doInBackground(Void... params) {
        ...
        ...
        ...
        // How possible I can halt my execution, prompt for user input, and continue execution based on user input.
        // In Swing, I can ...
        //
        /*
           // Hold the execution, and prompt for user input
           final int result = JOptionPane.showConfirmDialog(LoadFromCloudJDialog.this, message, MessagesBundle.getString("question_title_overwrite_your_data_by_cloud_data_at"), JOptionPane.YES_NO_OPTION);
           // Continue execution based on user input.
         */
    }
} 
```

我想知道，是否可以停止 AsyncTask 执行，提示用户输入并根据用户输入继续执行？

在 Swing 中，我可以通过简单地使用`JOptionPane.showConfirmDialog`. 安卓呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:21:54.490

由于`doInBackground`在不同的线程中执行，您必须在 UI 线程中显示一些[对话框](http://developer.android.com/guide/topics/ui/dialogs.html)时暂停该线程，一旦对话框关闭，您可以恢复`AsyncTask`并读取结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:23:53.790

检查[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)的文档，您可以取消并重新启动异步任务，因为`The task can be executed only once`

你可能想要这样[的理想方式来取消执行异步任务吗](https://stackoverflow.com/questions/2735102/ideal-way-to-cancel-an-executing-asynctask)

**doInBackground 不在 UI 线程中执行，因此您可以执行显示对话框的 UI 操作**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T08:54:08.883

您可以通过使用从内部向**UIThread**发送消息并使用 java 的**等待/通知**机制来等待用户输入他的输入来实现这一点。`publishProgress``doInBackground(Params...)`

 **伪代码看起来像这样：

```
 public Object mLock = new Object();
 protected void doInBackground(Params... params){
  /// do your requests.
  publishProgress(Progress ...progress);
  mLock.wait();

 }
 protected void onProgressUpdate(Progress ....progress) {
    // request user input here
 } 
```

并从您的 UIThread 调用`mLock.notify()`以要求代码继续。

此外，您可以通过将逻辑拆分到多个 AsynchTasks 来执行更灵活的行为，因为 AsynchTasks 由共享（静态）ThreadPoolExecutor 和

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T10:32:59.803

```
You can create pause and resume method inside asyntask as below, and call it according to your convenience.

        public class LoadFromCloudTask extends AsyncTask<Void, String, Boolean> {

            public LoadFromCloudTask(LoadFromCloudTaskFragment loadFromCloudTaskFragment) {
                this.loadFromCloudTaskFragment = loadFromCloudTaskFragment;
            }

    //call this when you want to halt the task        
                    public void pause() {
                           if (this.getStatus().equals(Status.RUNNING)) {
                                   try {
                                           this.wait();
                                   } catch (InterruptedException e) {
                                           e.printStackTrace();
                                   }
                           }
                   }

    // call this when you need to resume the task
                   public void resume() {
                           if (this.getStatus().equals(Status.PENDING)) {
                                   this.notify();
                           }
                   }

            @Override
            protected Boolean doInBackground(Void... params) {
                ...
                ...
                ...
                // How possible I can halt my execution, prompt for user input, and continue execution based on user input.
                // In Swing, I can ...
                //
                /*
                   // Hold the execution, and prompt for user input
                   final int result = JOptionPane.showConfirmDialog(LoadFromCloudJDialog.this, message, MessagesBundle.getString("question_title_overwrite_your_data_by_cloud_data_at"), JOptionPane.YES_NO_OPTION);
                   // Continue execution based on user input.
                 */
            }
        } 
```**

# javascript - HTML/CSS - 如何在输入字段末尾显示透明文本片段

> ID：15447077
> 
> 赞同：1
> 
> 时间：2013-03-16T08:12:30.147
> 
> 标签：javascript, html, css, input, field

在这张来自谷歌计算器输入的图片中，您可以看到右侧的括号未放置，但已标记，我想知道如何在 HTML 的输入字段的末尾放置一个灰色透明的字符串？

![在此处输入图像描述](../Images/5c02455cf486175b9790bcf5914250f4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:27:01.127

您可以通过使用`div`而不是`input`框来实现它。

并给出`div`像文本框一样的外观。

## HTML

```
<div id='container'>
    <div id='start'>(((((((((((</div>
    <div id='end'>)))))))))))</div>
</div> 
```

## CSS

```
#container {
    -moz-appearance: textfield;
    -webkit-appearance: textfield;
    background-color: white;
    background-color: -moz-field;
    border: 1px solid darkgray;
    box-shadow: 1px 1px 1px 0 lightgray inset;
    font: -moz-field;
    font: -webkit-small-control;
    display: inline-block;
}
#start {
    display: inline-block;
    color: rgba(0, 0, 0, 1);
}
#end {
    display: inline-block;
    color: rgba(0, 0, 0, 0.4);
} 
```

输出[小提琴](http://jsfiddle.net/AKysJ/)。

* * *

使 div 可编辑；您可以使用`contenteditable`布尔值。以下是 HTML 的外观：

```
<div id='container' contenteditable>
    <div id='start'>(((((((((((</div>
    <div id='end' contenteditable="false">)))))))))))</div>
</div> 
```

还有一个[小提琴](http://jsfiddle.net/AKysJ/1/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T08:29:55.533

为此，您必须使用 contenteditable 属性和一点点 Javascript：

```
<div style="text-align: right; font: 20px Arial; outline: none; border: 1px solid #BBB; padding: 5px;" contenteditable="true">
</div>
<script>
    document.getElementsByTagName('div')[0].onkeypress = function(e){
        if (e.which == 40){
            this.innerHTML = '(<span style="color: #CCC">)</span>';
        }
        return false;
    }
</script> 
```

我希望我能帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T08:31:58.290

这是您需要的工作示例..

**html**

```
<div class="input">
    <p class="text"></p>
    <p class="extra"></p>
</div> 
```

**javascript**

```
$(function(){
    $("div.input").click(function(){
        $(document).keypress(function(e){
        var char = String.fromCharCode(e.which);
            $("div.input .text").append(char);
            if(e.keyCode==40)   {
              $("div.input .extra").append("<span class='gray'>)</span>");
            }
             if(e.keyCode==41)   {
              $("div.input .extra").text("");
            }
    });
  });
}); 
```

**css**

```
.input{

width:500px;
height:30px;
border:1px solid black;

}

.gray{
 color:#CCCCCC;
}
p{
display:inline;} 
```

[jsfiddle 演示](http://jsfiddle.net/NIkhar/BrMXA/)

# c# - C#中的DataTable行填充

> ID：15447078
> 
> 赞同：0
> 
> 时间：2013-03-16T08:12:31.900
> 
> 标签：c#, asp.net, datatable, datarow, arrays

我正在尝试使用 row[] 在 DataTable CartDT 中添加行，这是一个字符串数组。

```
DataTable CartDT = new DataTable();
    public void DataTableColumn()
    {
        CartDT.Columns.Add("Product_Name", typeof(string));
        CartDT.Columns.Add("Product_ID", typeof(string));
        CartDT.Columns.Add("ItemQTY", typeof(string));
        CartDT.Columns.Add("Price", typeof(string));
        CartDT.Columns.Add("TotalPrice", typeof(string));

    }
    protected void AddToCart(object sender, GridViewCommandEventArgs e)
    {
        string[] arg = e.CommandArgument.ToString().Split(';');
        int index = Convert.ToInt32(arg[3]);
        TextBox itemQuantity = (TextBox)GridView1.Rows[index].Cells[6].FindControl("txtQty");
        string[] row = new string[5];
        row[0] = arg[0];  //Product_Name
        row[1] = arg[1]; //Product_ID
        row[2] = itemQuantity.Text; //OrderQTY
        row[3] = arg[2]; //Price
 row[4]=(Double.Parse(arg[2]) * Convert.ToInt32(itemQuantity.Text)).ToString();// calculate total price 
        CartDT.Rows.Add(row);//Creating row in Datatable using row[] string array

        GridView2.DataSource = CartDT;
        GridView2.DataBind();
    } 
```

现在，当我执行它时，它给出的错误是“输入数组比此表中的列数长”数组 row[] 中正好有 5 个元素，而且 DataTable CartDT 也有 5 列。现在我无法准确找到我错的地方。请帮助我找到错误。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:19:39.627

而是这样做

```
DataRow dr = CartDT.NewRow(); 
```

然后

```
dr[0] = arg[0]; 
```

等等。到底

```
 CartDT.Rows.Add(dr);
 CartDT.AcceptChanges(); 
```

这样，Row 的实例将具有 CartDT 模式。

```
DataTable CartDT = new DataTable();

public void CreateDataTableColumns()
{
    CartDT.Columns.Add("Product_Name", typeof(string));
    CartDT.Columns.Add("Product_ID", typeof(string));
    CartDT.Columns.Add("ItemQTY", typeof(string));
    CartDT.Columns.Add("Price", typeof(string));
    CartDT.Columns.Add("TotalPrice", typeof(string));
}

protected void AddToCart(object sender, GridViewCommandEventArgs e)
{
    if (CartDT.Columns.Count = 0)
    {
        CreateDataTableColumns();
    }

    string[] arg = e.CommandArgument.ToString().Split(';');

    int index = Convert.ToInt32(arg[3]);            
    TextBox itemQuantity = 
           (TextBox)GridView1.Rows[index].Cells[6].FindControl("txtQty");

    DataRow dr = CartDT.NewRow();
    dr[0] = arg[0];  //Product_Name
    dr[1] = arg[1]; //Product_ID
    dr[2] = itemQuantity.Text; //OrderQTY
    dr[3] = arg[2]; //Price
    dr[4] = (Double.Parse(arg[2]) * Convert.ToInt32(itemQuantity.Text)).ToString(); // calculate total price

    CartDT.Rows.Add(dr);
    CartDT.AcceptChanges();

    GridView2.DataSource = CartDT;
    GridView2.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:24:31.330

调试，然后继续

```
CartDT.Rows.Add(row); 
```

并查看 CartDT 中有多少列；我认为你没有`DataTableColumn()`在正确的时间打电话。

您与行插入有关的代码工作得很好

```
 DataTable CartDT = new DataTable();

        CartDT.Columns.Add("Product_Name", typeof(string));
        CartDT.Columns.Add("Product_ID", typeof(string));
        CartDT.Columns.Add("ItemQTY", typeof(string));
        CartDT.Columns.Add("Price", typeof(string));
        CartDT.Columns.Add("TotalPrice", typeof(string));

        string[] row = new string[5];

        row[0] = "1";  //Product_Name
        row[1] = "2"; //Product_ID
        row[2] = "3"; //OrderQTY
        row[3] = "4"; //Price
        row[4] = "5";// calculate total price 
        CartDT.Rows.Add(row);//Creating row in Datatable using row[] string array

        for (int i = 0; i < 5; i++)
        {
            Console.WriteLine(CartDT.Rows[0][i]);
        }

        Console.Read(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:20:42.553

试试下面的代码：

```
 protected void AddToCart(object sender, GridViewCommandEventArgs e)
    {
        string[] arg = e.CommandArgument.ToString().Split(';');
        int index = Convert.ToInt32(arg[3]);
        TextBox itemQuantity = (TextBox)GridView1.Rows[index].Cells[6].FindControl("txtQty");
        DataRow row = CartDT.NewRow();
        row["Product_Name"] = arg[0];  //Product_Name
        row["Product_ID"] = arg[1]; //Product_ID
        row["OrderQTY"] = itemQuantity.Text; //OrderQTY
        row["Price"] = arg[2]; //Price
        row["TotalPrice"]=(Double.Parse(arg[2]) * Convert.ToInt32(itemQuantity.Text)).ToString();
        CartDt.Rows.Add(row);
        CartDT.AcceptChanges();    
        GridView2.DataSource = CartDT;
        GridView2.DataBind();
     } 
```

# c++ - 带有类指针的 C++ 映射在编译时出错

> ID：15447081
> 
> 赞同：1
> 
> 时间：2013-03-16T08:13:04.017
> 
> 标签：c++

我有一个带有字符串和类指针的地图。我来自JAVA，所以请指导我。

```
class Client {

public:
    static map<string, Client*> CLIENTS;
    Client(string dir);
    static Client* get_client(string name);
    virtual ~Client();
}; 
```

我的 get_client 方法是

```
Client* Client::get_client(string name) {
       map<string, Client*>::iterator it = CLIENTS.find(name);
} 
```

给我下面的错误

```
Undefined symbols for architecture x86_64:
  "Client::CLIENTS", referenced from:
      Client::get_client(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in client.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:15:16.013

您需要定义`CLIENTS`您只声明的。所以外面`class Client{`，在你的`clients.cpp`文件中添加

```
 std::map<std::string, Client*> Client::CLIENTS; 
```

顺便说一句，我觉得这个名字`CLIENTS`很混乱。也许应该是`client_dict`

不要忘记使用调试信息和所有警告进行编译，例如`g++ -Wall -g`在 Linux 上使用。改进你的代码，直到没有给出警告（你`get_client`会得到一些警告）。并学习如何使用调试器（例如`gdb`在 Linux 上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:18:29.160

添加

```
map<string, Client*> Client::CLIENTS; 
```

`cpp`归档。并且不要`std::`在 STL 类之前省略前缀。特别是在标题中

# asp.net-mvc-3 - 下拉列表mvc3中的选定项目

> ID：15447083
> 
> 赞同：0
> 
> 时间：2013-03-16T08:13:22.627
> 
> 标签：asp.net-mvc-3, dropdownlistfor

Mvc3 dropdownlistFor 让我发疯！！！我有两个使用相同代码（不同的 tevt 和值）的选择，但其中一个不起作用。这是我的控制器代码：

```
 [Authorize(Roles = "admins")]
        public ActionResult Edit(int id = -1)
        {
            Advertise Advertise = db.Advertises.Find(id);
            if (null == Advertise)
                return View("ProductNotFound");

            var selectListItems = new List<SelectListItem>();
            selectListItems.Add(new SelectListItem { Text = "A", Value = "A", Selected = ("A" == Advertise.Class) });
            selectListItems.Add(new SelectListItem { Text = "B", Value = "B", Selected = ("B" == Advertise.Class) });
            selectListItems.Add(new SelectListItem { Text = "C", Value = "C", Selected = ("C" == Advertise.Class) });
            selectListItems.Add(new SelectListItem { Text = "D", Value = "D", Selected = ("D" == Advertise.Class) });
            ViewBag.Class = new SelectList(selectListItems, "Value", "Text",Advertise.Class);

            var selectListItems2 = new List<SelectListItem>();
            selectListItems2.Add(new SelectListItem { Text = "Image", Value = "Image", Selected = ("Image" == Advertise.FileType) });
            selectListItems2.Add(new SelectListItem { Text = "Flash", Value = "Flash", Selected = ("Flash" == Advertise.FileType) });

            ViewBag.Type = new SelectList(selectListItems2, "Value", "Text",Advertise.FileType);

            return View(Advertise);
        } 
```

这是我的视图代码：

```
<tr>
        <td class="label">
            @Html.LabelFor(model => model.Class) :
        </td>
        <td class="editor-field">
                @Html.DropDownListFor(model => model.Class, (SelectList)ViewBag.Class)
            @Html.ValidationMessageFor(model => model.Class)
        </td>
    </tr>
    <tr>
        <td class="label">
            @Html.LabelFor(model => model.FileType) :
        </td>
        <td class="editor-field">
                @Html.DropDownListFor(model => model.FileType, (SelectList)ViewBag.Type)
            @Html.ValidationMessageFor(model => model.FileType)
        </td>
    </tr> 
```

第二个选择完美地工作，第一个（类）没有在页面加载时选择所选项目。

并为记录，存储在数据库中的值是C。请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:04:04.457

什么……！！！！

我发现选择不工作的原因是：我的变量（ViewBag.Class）的名称与模型中的字段相同！！！我将 ViewBag.Class 更改为 ViewBag.glass （只是为了更改名称）并且它起作用了！！！不管怎么说，还是要谢谢你。我希望它可以帮助有这个问题的人！！！

# css - 改进这个 CSS3 并达到相同的效果 - flexbox 垂直对齐文本

> ID：15447087
> 
> 赞同：0
> 
> 时间：2013-03-16T08:13:46.843
> 
> 标签：css, vertical-alignment, flexbox

我正在尝试使用一些新的 css3 技术创建一个垂直导航菜单，但到目前为止，我只能使用`display:table`. 我不喜欢使用`display:table/table-row/table-cell`主要是因为它们将“单元格”限制为表格形式（例如，您不能将“行”或“单元格”与边距隔开），而且我也不喜欢`divs`仅用于制作的额外内容列表垂直。我最初走向这个方向的原因是`vertical-align: middle`用于文本。当我尝试使用弹性框方法时，它总是将两行文本放在同一行，我不知道如何拆分它们。

你能帮我实现同样的外观，但更灵活，最好不要额外的 div 吗？

方法的工作示例`display: table`（但似乎并不完全居中）：http: [//jsfiddle.net/jKRDQ/](http://jsfiddle.net/jKRDQ/)

最近我使用弹性盒方法：http: [//jsfiddle.net/4wSN5/](http://jsfiddle.net/4wSN5/)

最接近没有 CSS3：http: [//jsfiddle.net/6gRcp/](http://jsfiddle.net/6gRcp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:33:14.290

您的 table 方法具有无效标记：只有`li`元素可以是`ul`或`ol`元素的子级。如果你需要额外的东西，`div`它必须*在*`li`.

您的 Flexbox 方法缺少`box-orientation`/ `flex-direction`。默认情况下，它设置为`horizontal`/ `row`，这使得它们都出现在一行中。您的 CSS`li`应该如下所示：

[http://jsfiddle.net/4wSN5/1/](http://jsfiddle.net/4wSN5/1/)

```
#slide-out-menu li {
  width: 75px;
  height: 75px;
  border: 1px solid black;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -webkit-flex-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
} 
```

或者，您可以保持`horizontal`/`row`方向并使用包装，但这仅适用于支持标准规范的浏览器（不包括启用了实验性 Flexbox 支持的 Firefox）。

您可能需要删除 Firefox 的前缀，因为它们的实现非常糟糕。我只包含它们是因为我的 Sass mixin 会发出它们。

如果您要使用 Flexbox，请*不要*单独使用 2009 规范中的属性。虽然 Opera 和 Chrome（都在 -webkit- 前缀下）同时支持旧规范和新规范（Opera 在新规范上没有前缀），但旧规范最终将被删除。

# vim - vim/gvim 关闭和隐藏的区别

> ID：15447096
> 
> 赞同：5
> 
> 时间：2013-03-16T08:14:28.560
> 
> 标签：vim

我是VIM的新手，我想知道`:close`window命令和`:hide`window命令之间的区别。我已经阅读了文档，但他们似乎都做同样的事情......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T08:23:07.067

## `:clo[se][!]`

**可以**：

*   当屏幕上只有一个窗口时失败。

*   `:set hidden`.

*   使用 [!] 退出当前会话而不保存它（即`:clo[se]!`）。

**不能**

*   执行一个侧面命令。

* * *

# `:hid[e]`

**不能**

*   当屏幕上只有一个窗口时失败。

*   `:set hidden`（无关）。

*   使用 [!] 退出当前会话而不保存它。

**能：**

*   执行一个侧面命令（即`:hid[e] {cmd}`）。

此侧命令`{cmd}`使用`:set hidden`. 执行后，恢复`{cmd}`之前的值。`:set hidden`例如，如果当前缓冲区有任何更改，`:hide edit example`将编辑并隐藏它。`example`

* * *

(Referenced from `:help close` and `:help hide` from `$vim`)

# sharepoint-2010 - 如何将选择字段保存到 Webpart 中的 Sharepoint 列表？

> ID：15447099
> 
> 赞同：1
> 
> 时间：2013-03-16T08:14:43.623
> 
> 标签：sharepoint-2010, checkboxlist, multiple-choice, choicefield

我有一个 SharepointList

列表名称：`RegionList` 字段：（`regId number` `Regname Choice`**复选框：允许多选）**

Choice 字段项显示在 CheckBoxList 项中。我将这些项目保存为带有逗号分隔值的字符串。

```
protected string GetSelectedRegions()
        {
            List<String> regList = new List<string>();
            // Loop through each item.
            foreach (ListItem item in chkRegion.Items)
            {
                if (item.Selected)
                {
                    // If the item is selected, add the value to the list.
                    regList.Add(item.Value);
                }
                else
                {
                    // Item is not selected, do something else.
                }
            }

            String regs = String.Join(",", regList.ToArray());
            return regs;
        } 
```

从上面的代码中，`regs`参数具有选定项目的数量并保存到列表中。现在，问题是当我打开列表并以`Edit`模式打开记录时`CHOICE Field Doesn't Show any Selected ITEM. But, when i send only single value then it Show the Selected Item that was saved.`

任何的想法？ **请让我知道如何将 CheckBoxList 项目存储到 CHOICE 字段并检索它。**提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:03:51.703

对于设置多复选框，您应该像这样使用[SPFieldMultiChoiceValue](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldmultichoicevalue.aspx)：

```
protected SPFieldMultiChoiceValue GetSelectedRegions()
     {
        SPFieldMultiChoiceValue multiValue = new SPFieldMultiChoiceValue();

         List<String> regList = new List<string>();
        // Loop through each item.
        foreach (ListItem item in chkRegion.Items)
        {
            if (item.Selected)
            {
                // If the item is selected, add the value to the list.
                multiValue.Add(item.Value);
            }
            else
            {
                // Item is not selected, do something else.
            }
        }

        //String regs = String.Join(",", regList.ToArray());
        return multiValue;
    } 
```

比设置你`SPFieldMultiChoiceValue`的 SPListItem

```
 item["multivalued choice field name"]= GetSelectedRegions(); 
```

# html - 为什么我的网站图标不显示？

> ID：15447102
> 
> 赞同：45
> 
> 时间：2013-03-16T08:15:17.070
> 
> 标签：html, favicon

以下用于在我的 html 代码中设置 favicon：

```
<link rel="icon" type="img/ico" href="img/favicon.ico"> 
```

但是，图标不显示。为什么？

笔记：

我已确认该文件位于正确路径的磁盘上。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-16T08:33:52.907

1.  它真的是一个`.ico`，还是只是命名为“.ico”？
2.  你测试的是什么浏览器？

拥有 favicon 最简单的方法是在根文件夹中放置一个名为“favicon.ico”的图标。这在任何地方都有效，根本不需要代码。

如果必须将它放在子目录中，请使用：

```
<link rel="shortcut icon" href="/img/favicon.ico" /> 
```

请注意`/`之前的`img`内容，以确保它锚定到根文件夹。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-16T08:19:14.773

尝试这个：

```
<link href="img/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-02-21T11:59:39.670

网站图标仅在从为服务内容正确设置 mime 类型的网络服务器提供时才有效。从本地文件加载可能不适用于 chromium。从配置不正确的 Web 服务器加载将无法正常工作。

[必须手动配置](http://redmine.lighttpd.net/projects/1/wiki/mimetype_assigndetails)诸如 lighthttpd 之类的 Web 服务器以正确设置 mime 类型。

由于 mimetype 分配可能不适用于所有环境，我建议您改用内联[base64 编码](https://stackoverflow.com/a/5679084/2126889)的ico 文件。这也将加载更快，因为它减少了发送到服务器的 http 请求的数量。

在基于 POSIX 的系统上，您可以使用命令对文件进行 base64 编码`base64`。

要创建 base64 编码的 ico 行，请使用以下命令：

```
$ base64 favicon.ico --wrap 0 
```

并将输出插入该行：

```
<link href="data:image/x-icon;base64,HERE" rel="icon" type="image/x-icon" /> 
```

像这样替换单词`HERE`：

```
<link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA////AERpOgA5cCcA7vDtAF6jSABllFcAuuCvAK2trQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFjMzMzMzNxARYzMzMzVBEEERYzMzNhERZxRGMzZxQEA2FER3cRSAgTNxgEEREIQBMzFIARERFEEzNhERARFAATMzYREBEAhBMzMzEYEBFEEzMzNhEQQRQDMzMzcRgEAAMzMzNhERgIEzMzMyERgEQDMzMzMRAEgEMzMzMxERAEEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rel="icon" type="image/x-icon" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-16T08:30:25.433

尝试将[`profile`](http://www.w3.org/2005/10/howto-favicon)属性添加到您的`head`标签并`"image/x-icon"`用于该`type`属性：

```
<head profile="http://www.w3.org/2005/10/profile">
<link rel="icon" type="image/x-icon" href="img/favicon.ico"> 
```

如果上面的代码不起作用，请尝试使用`href`属性的完整图标路径：

```
<head profile="http://www.w3.org/2005/10/profile">
<link rel="icon" type="image/x-icon" href="http://example.com/img/favicon.ico"> 
```

# c - 关于全局内存访问方法

> ID：15447105
> 
> 赞同：1
> 
> 时间：2013-03-16T08:15:44.247
> 
> 标签：c, cuda, gpu, nvidia

一般来说，对于 GPU，哪种访问模式更快（从连续的全局内存块中读取数据）？

(1) 具有单个或非常少线程数的for循环从全局内存块中读取数据；

(2) 让很多线程，可能来自不同的块，同时从全局内存中读取数据。

例如

```
if (threadIdx.x==0)
{
  for (int i=0; i<1000; ++i)

     buffer[i]=data[i];//data is stored in global memory
}

OR:

buffer[threadIdx.x]=data[threadIdx.x];//there are 1000 threads in this thread block 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:41:33.560

简而言之，第二个通常应该更快。理由如下：

有两种并行：线程级并行（**TLP**）和指令级并行（**ILP**）。您的第一个代码（循环）针对 ILP，第二个利用 TLP。

当 TLP 被利用时，许多内存请求同时发出，没有任何控制流依赖性。在这种情况下，硬件可以利用线程之间的局部性来减少总内存事务（在可能的情况下）。此外，硬件可以通过 L2-cache bank 并行、内存控制器并行、DRAM bank 并行和许多其他级别的并行来同时处理并发请求。

然而，在 ILP 的情况下，现有的控制依赖限制了并发发出的内存请求的数量。即使在循环展开的情况下也是如此（计分板大小和指令窗口大小等硬件资源限制了未完成的指令总数）。因此，许多内存请求实际上是不必要的序列化。此外，没有利用内存访问合并中的硬件能力。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-16T08:44:42.527

解决方案一更快。因为1000个线程实际上是1000个任务共享一个任务地址空间。操作系统的进程调度必须消耗大量CPU资源。所以CPU总是被中断。

如果你在一个任务中做这件事，CPU 总是处理一个任务。而且多核CPU可以处理得更好，但是1000线程太大了。

# stimulsoft - 刺激报告：businessObjects 不会通过显示报告来加载

> ID：15447108
> 
> 赞同：1
> 
> 时间：2013-03-16T08:16:56.770
> 
> 标签：stimulsoft

我保存报告模板：

```
report.Save("C:\\kk.mrt"); 
```

然后我加载保存的报告并将其分配`BusinessObjects`为`Dictionaries`

```
StiReport rptLoad = new StiReport();
rptLoad.RegBusinessObject("Company", repository.GetAll<Company>());
rptLoad.Load("C:\\kk.mrt"); 
```

`rptLoad.BusinessObjectsStore`包含已注册的`BusinessObjects`刚刚注册 ( `Watched`at `RunTime`) 但是：

```
rptLoad.Show(); 
```

*   如果保存的报告中包含`Bindings`（如：）：那么`Components.Add(new StiText{Text="{Company.Name}"}`

    得到我： `error CS0103: The name 'Company' does not exist in the current context`

*   否则，如果我没有`Bindings`保存的报告：那么

    `rptLoad.Show();`将显示报告，但没有注册`Dictionaries`（当我在显示报告后进入设计模式时，我`BusinessObjects`在字典中没有看到）。

*   如果我`rptLoad.Design();`之前打电话`rptLoad.Show();`：那么

报告显示并且`Bindings`正常，我可以`BusinessObjects`在显示的报告中看到（在设计和预览模式下）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:31:40.143

找到原因：

```
 rptLoad.Dictionary.Synchronize(); 
```

应该打电话后`rptLoad.RegBusinessObject("Company", repository.GetAll<Company>());`

# ios - UIToolbar中的iOS UISearchbar，在iPad中显示搜索结果而不是弹出窗口

> ID：15447110
> 
> 赞同：1
> 
> 时间：2013-03-16T08:17:10.683
> 
> 标签：ios, uisearchbar, uitoolbar, popover

我正在使用嵌入在 UIToolbar 中的 iPad UISearchbar，搜索结果将显示在 UIPopover

但使用 iPhone，它显示在同一个表格视图中

我想在同一个表格视图中显示搜索结果，我该怎么做？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T10:11:24.857

我也有这个问题。我要解决的问题不是通过 UIBarButtomItem 在 UIToolBar 中添加 UISearchBar，而是在视图（普通 UIView）中添加了 UISearchBar，并通过 UIBarButtomItem 在工具栏中添加了该视图。见下图。

![在此处输入图像描述](../Images/e24f1532d47c9a187a235c9b745f50df.png)

我不知道为什么，但这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:32:38.893

重新加载带有排序项的 TableView。就是这样。

# php - 当用户使用 PHP 选中复选框时链接到另一个页面

> ID：15447113
> 
> 赞同：1
> 
> 时间：2013-03-16T08:17:18.940
> 
> 标签：php, html

我一直在创建一个登录系统，登录/注册是通过一个表单来处理的。用户在尚未注册时选中复选框，因此我需要使用 PHP 更改重定向，因为这是我熟悉的。我没有看到任何对此有帮助的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-22T09:09:37.403

用户在注册时选中复选框

我希望这段代码适用于您的项目：........

```
 <input type="checkbox" name="checkbox" value="Overdue.php?i=0" 
name="checket" onClick="if (this.checked) { window.location = this.value; }"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:19:57.037

做这个 ：

```
<input type="checkbox" name="check" id="check" value="1" onclick="window.location='redirect_pagename.php';"> 
```

只需将`onclick`事件添加到您`checkbox`的`navigate`用户到另一个页面。

# php - php mysql更新查询

> ID：15447119
> 
> 赞同：0
> 
> 时间：2013-03-16T08:18:08.910
> 
> 标签：php, mysql, forms, sql-update

我有这段代码，当我回显提交或更改的值时，它允许用户使用 php 和 mysql 从表单编辑他们的个人资料，它显示正确和编辑值，但数据库中没有任何变化，谁能帮我解决这个问题

这是我正在更新查询的部分

如果您需要任何附加文件，请告诉我，谢谢

# 搜索.php

```
//submit whatthe user types into the database

     $fname = $_POST['fname'];
     $lname = $_POST['lname'];
     $country = $_POST['country'];
     $spec = $_POST['specialization'];

    ///errroor in updating the dataabse 

     $edit_query = mysql_query("UPDATE user SET first_name= '$fname', last_name= '$lname', address= '$country', specialization_name= '$spec' WHERE user_name = '$username'") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:20:42.713

`$username`没有定义。结果，对没有数据库行执行查询。

请使用[准备好的语句](http://php.net/manual/de/pdo.prepared-statements.php)而不是[sql injectionable](http://en.wikipedia.org/wiki/SQL_injection) `mysql_query()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:20:32.993

您需要初始化 userName 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:23:22.227

尝试这个.....

```
$edit_query = mysql_query("UPDATE `user` SET first_name= '".$fname."', last_name= '".$lname."', address= '".$country."', specialization_name= '".$spec."' WHERE user_name = '".$username."'") or die(mysql_error());

//Make sure that your $username hold some valid value. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T08:36:13.400

`$username`是必需的，您的查询是`vulnerable by sql injection`. 所以使用`mysql_real_escape_string()`函数

```
$fname = mysql_real_escape_string($_POST['fname']);
$lname = mysql_real_escape_string($_POST['lname']);
$country = mysql_real_escape_string($_POST['country']);
$spec = mysql_real_escape_string($_POST['specialization']);

$edit_query = mysql_query("UPDATE user SET first_name= '$fname', last_name= '$lname', address= '$country', specialization_name= '$spec' WHERE user_name = '$username'") or die(mysql_error()); 
```

# android - 在运行时使用文件为 Android 应用设置不同的主题

> ID：15447120
> 
> 赞同：0
> 
> 时间：2013-03-16T08:18:23.430
> 
> 标签：android, themes

我想为我的应用程序添加两个不同的主题（浅色和深色）。用户从菜单中选择它。

这就是我所做的：

```
package com.example;

import java.io.*;

public class setTheme {

    void write(int n) throws IOException
    {

        File myFile = new File("/mnt/sdcard/theme.txt");

        if(!myFile.exists()){
            myFile.createNewFile();
        }
        if(myFile.exists()){
            myFile.delete();
            myFile.createNewFile();
        }
            FileWriter Fr = new FileWriter(myFile);
            BufferedWriter Br =new BufferedWriter(Fr);
            PrintWriter P =new PrintWriter(Br);
            P.println(n);
            P.close();

    }
    static int read() throws IOException
    {

            int mnum=0;
            File myFile = new File("/mnt/sdcard/theme.txt");
            if (!myFile.exists()) {
                return 1;
            }
            FileReader fr = new FileReader(myFile);
            BufferedReader br = new BufferedReader(fr);
            @SuppressWarnings("unused")
            String txt = "";
            while ((txt = br.readLine()) != null) 
            {
                mnum=Integer.parseInt(br.readLine());
            }
            br.close();
            return mnum;

    }

} 
```

这是主要活动：

```
package com.example;

import java.io.IOException;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

                try {
                    if (setTheme.read()==1) {
                        getApplication().setTheme(R.style.LightTheme);
                        super.onCreate(savedInstanceState);
                        setContentView(R.layout.activity_main);}
                    else if(setTheme.read()==2) {
                        getApplication().setTheme(R.style.DarkTheme);
                        super.onCreate(savedInstanceState);
                        setContentView(R.layout.activity_main);}            
                }

                catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.menu_help:
                Intent intent = new Intent(this, HelpActivity.class);
                startActivity(intent);
                return true;
            case R.id.menu_more:
                Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                myWebLink.setData(Uri.parse("https://play.google.com/store/apps/developer?id=******"));
                startActivity(myWebLink);
                return true;
            case R.id.menu_lightTheme:
                setTheme(1);
                Toast.makeText(getApplicationContext(), "Restart app for changes to take place", Toast.LENGTH_SHORT).show();
                return true;
            case R.id.menu_darkTheme:
                setTheme(1);
                Toast.makeText(getApplicationContext(), "Restart app for changes to take place", Toast.LENGTH_SHORT).show();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

样式.xml：

```
<style name="LightTheme" parent="@android:style/Theme.Holo.Light.DarkActionBar">
</style>

<style name="DarkTheme" parent="@android:style/Theme.Holo"> <style> 
```

但是，在运行应用程序时，它始终保持白色主题，即使在选择菜单后也是如此。我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:24:30.887

您可以使用偏好活动来做到这一点，以允许用户选择主题。
在您的 preference xml 中创建一个 ListPreference

```
<ListPreference 
    android:key="THEME_PREF"
    android:title="Theme"
    android:entries="@array/themesArray"  
    android:entryValues="@array/themesArrayValues"
    android:summary="Enter summary here"
/> 
```

在 setContentView() 或 onResume() 之前将它放在 onCreate() 的活动中

```
SharedPreferences mysettings2 = PreferenceManager.getDefaultSharedPreferences(this);
String st1 = mysettings2.getString("THEME_PREF", "Light");
if(st1.equals("Light"))
  {setTheme(R.style....); }
if(st1.equals("Dark"))
  {setTheme(R.style....); } 
```

注意：您可能需要重新启动应用程序才能使更改生效。

这是数组的一个示例：

```
<string-array name="themesArray">
    <item>Light</item>
    <item>Dark</item>
</string-array>    

<string-array name="themesArrayValues">
    <item>"Light"</item>
    <item>"Dark"</item>
</string-array> 
```

# ruby-on-rails - Carrierwave 无法删除图像

> ID：15447127
> 
> 赞同：4
> 
> 时间：2013-03-16T08:18:55.143
> 
> 标签：ruby-on-rails, ruby, file-upload, carrierwave

我现在正在使用 Carrierwave 上传图像。一切都很好，除了一个，-当我添加删除上传图像的复选框时，我收到错误：“无法批量分配受保护的属性：remove_image”。

形式：

```
...
<%= f.check_box :remove_image %>
<%= f.label :remove_image, "remove image" %>
... 
```

模型：

```
class Manufacturer < ActiveRecord::Base

  attr_accessible :name, :alias, :short_description, :long_description, :image, :publish,
  :position, :meta_keywords, :meta_description, :meta_title

  mount_uploader :image, ManufacturerUploader

  validates_presence_of :name, :alias
  validates_uniqueness_of :name, :alias
  validates_format_of :alias, :with => /^[a-z\d\-]*$/, :message => "a-z, 0-9 \' - \' ONLY"

  default_scope order('position ASC')

  before_destroy :remember_image
  after_destroy :remove_img

  protected
  def remember_image
    @image_name = self[:image]
  end

  def remove_img
    File.delete("#{Rails.root}/public/images/manufacturer/#{@image_name}")
    File.delete("#{Rails.root}/public/images/manufacturer/thumb_#{@image_name}")
  end

end 
```

上传者：

```
class ManufacturerUploader < CarrierWave::Uploader::Base

 include CarrierWave::MiniMagick
 include Sprockets::Helpers::RailsHelper
 include Sprockets::Helpers::IsolatedHelper

 storage :file

 before :store, :remember_cache_id
 after :store, :delete_tmp_dir

 def remember_cache_id(new_file)
   @cache_id_was = cache_id
 end

 def delete_tmp_dir(new_file)
   if @cache_id_was.present? && @cache_id_was =~ /\A[\d]{8}\-[\d]{4}\-[\d]+\-[\d]{4}\z/
      FileUtils.rm_rf(File.join(root, cache_dir, @cache_id_was))
   end
 end

def store_dir
  "images/#{model.class.to_s.underscore}"
end

def default_url
  "" + [version_name, "default.jpg"].compact.join('_')
end

process :resize_to_fit => [300, 300]

version :thumb do
   process :resize_to_fit => [150, 150]
end

def extension_white_list
   %w(jpg jpeg gif png)
end

def filename
  "#{secure_token(10)}.#{file.extension}" if original_filename.present?
end

protected
def secure_token(length=16)
  var = :"@#{mounted_as}_secure_token"
  model.instance_variable_get(var) or model.instance_variable_set(var, SecureRandom.hex(length/2))
end

end 
```

我认为 Carrierwave 必须利用 :remove_image，但不要这样做。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-16T08:41:47.197

只需添加`remove_image`到您的`attr_accessible`列表中

# height - KineticJS：有什么方法可以获取 Sprite 的高度吗？

> ID：15447129
> 
> 赞同：0
> 
> 时间：2013-03-16T08:19:16.317
> 
> 标签：height, width, sprite, kineticjs, dimensions

所以 KineticJS 支持精灵，我在当前项目中使用精灵。有什么方法可以获得精灵对象的高度吗？

因为您可以像这样在 KineticJS 中获取每个对象的高度：

对象.getHeight();

这也适用于获取宽度。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:09:37.860

getHeight() 为 Spline 返回 0。

您可以定义 getHeight 和 getWidth 函数：

```
Kinetic.Spline.prototype.getWidth = function(){
  var points = this.getPoints();
  var minX = points[0].x;
  var maxX = points[0].x;
  for(var i = 1; i < points.length;i++){
    if(points[i].x < minX){
        minX = points[i].x;
    }
    if(points[i].x > maxX){
        maxX = points[i].x;
    }
  }
  return maxX - minX;
}

Kinetic.Spline.prototype.getHeight = function(){
  var points = this.getPoints();
  var minY = points[0].y;
  var maxY = points[0].y;
  for(var i = 1; i < points.length;i++){
    if(points[i].y < minY){
        minY = points[i].y;
    }
    if(points[i].y > maxY){
        maxY = points[i].y;
    }
  }
  return maxY - minY;
} 
```

但这是实际高度/宽度的近似值。示例：http: [//jsfiddle.net/lavrton/EM35c/](http://jsfiddle.net/lavrton/EM35c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T10:22:52.923

Lavtron 的答案是指**Spline**，而不是**Sprite** （对于完全不同的事物而言，相似的词！）。好消息，对于**Sprite** ，您*可以*使用：

**spriteObj.getHeight()**和**spriteObj.getWidth()**用于精灵，就像您对其他所有内容一样。

*但是*，我发现您必须确保在初始化 sprite 对象时首先在声明中明确指定**height**和**width属性。**否则，这些方法在以后调用时返回“未定义”。它不会自动测量高度并使用 getHeight() 返回，您必须确保在 Sprite 对象中将其指定为一个值（例如 32），以便 getHeight() 返回该值。

# python - 为什么我的 contextmanager-function 不像我在 python 中的 contextmanager 类那样工作？

> ID：15447130
> 
> 赞同：9
> 
> 时间：2013-03-16T08:19:15.930
> 
> 标签：python, python-2.7, contextmanager

在我的代码中，我需要能够正确打开和关闭设备，因此需要使用上下文管理器。虽然上下文管理器通常被定义为具有`__enter__`和`__exit__`方法的类，但似乎也有可能装饰一个函数以与上下文管理器一起使用（参见[最近的一篇文章](https://stackoverflow.com/questions/15427361/how-to-use-the-context-manager-to-avoid-the-use-of-del-in-python/15427892?noredirect=1#15427892)和[另一个很好的例子](http://preshing.com/20110920/the-python-with-statement-by-example)）。

在以下（工作）代码片段中，我实现了两种可能性；只需要将注释行与另一行交换：

```
import time
import contextlib

def device():
    return 42

@contextlib.contextmanager
def wrap():
    print("open")
    yield device
    print("close")
    return

class Wrap(object):
    def __enter__(self):
        print("open")
        return device
    def __exit__(self, type, value, traceback):
        print("close")

#with wrap() as mydevice:
with Wrap() as mydevice:
    while True:
        time.sleep(1)
        print mydevice() 
```

我尝试的是运行代码并使用`CTRL-C`. 当我`Wrap`在上下文管理器中使用该类时，该`__exit__`方法按预期调用（在终端中打印文本“关闭”），但是当我使用该`wrap`函数尝试相同的操作时，文本“关闭”不会打印到终端。

我的问题：代码片段是否有问题，我是否遗漏了什么，或者为什么`print("close")`没有使用装饰函数调用该行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-16T08:30:53.977

文档中的示例`contextmanager`有点误导。之后的函数部分`yield`并不真正对应于`__exit__`上下文管理器协议的。文档中的关键点是：

> 如果块中发生未处理的异常，它会在生成器中在产生产生的点重新引发。因此，您可以使用`try...except...finally`语句来捕获错误（如果有），或确保进行一些清理。

因此，如果您想在 contextmanager 装饰的函数中处理异常，您需要编写自己的`try`包装`yield`并自己处理异常，在 a 中执行清理代码`finally`（或者只是阻止异常并在`except`之后执行清理`try/except`）。例如：

```
@contextlib.contextmanager
def cm():
    print "before"
    exc = None
    try:
        yield
    except Exception, exc:
        print "Exception was caught"
    print "after"
    if exc is not None:
        raise exc

>>> with cm():
...     print "Hi!"
before
Hi!
after

>>> with cm():
...     print "Hi!"
...     1/0
before
Hi!
Exception was caught
after 
```

[此页面](http://pymotw.com/2/contextlib/index.html#from-generator-to-context-manager)还显示了一个有启发性的示例。

# php - Mysqli更新抛出调用成员函数bind_param（）错误

> ID：15447133
> 
> 赞同：6
> 
> 时间：2013-03-16T08:19:41.583
> 
> 标签：php, mysqli

我有一个 70/80 字段表单，我需要将其插入到表中，因此我首先根据表单中的输入名称在我的数据库中创建了一个表，而不是手动创建一个巨大的插入语句，这里是我使用的代码创建/更改表

```
function createTable($array, $memberMysqli)
{
   foreach ($array as $key => $value)
   {
            //echo "<p>Key: ".$key." => Value: ".$value . "</p>";
            $query = "ALTER TABLE questionnaire ADD ".$key."  text";

            if($stmt = $memberMysqli->prepare($query))
            {
                $success = $stmt->execute();
            }
   }
         echo "<h1>Array count: ". count($array) ."</h1>" ;
} 
```

这很好用，并且完全按照我想要的方式改变了表格。现在要插入表单值来执行此操作，我执行一个基本的字段插入存储行的 id，然后循环所有更新该行的 post 变量。这是我的代码：

```
$stmt = $memberMysqli->prepare("INSERT INTO questionnaire(userid) VALUES (?)");

$stmt->bind_param('s', $_POST['userid']);
$stmt->execute();
$rowid = $stmt->insert_id;
$stmt->close();

$memberMysqli->autocommit(FALSE);

function updateColumn($memberMysqli, $query, $uid, $value) 
{
    if ($value) 
    {
        $stmt = $memberMysqli->prepare($query);
        //Throws bind param error here
        $stmt->bind_param("ss", $value, $uid);
        $stmt->execute();
    }
}

function loopInputs($array, $memberMysqli, $rowid)
{
     foreach ($array as $key => $formvalue)
     {
        var_dump($key);
        updateColumn($memberMysqli, "UPDATE questionnaire SET $key = ? WHERE id = ?", $rowid, $formvalue);
     }
}

loopInputs($_POST, $memberMysqli, $rowid);

$memberMysqli->commit();
$memberMysqli->close(); 
```

这会引发绑定参数错误，我不知道为什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T08:28:19.973

哦，让我们尝试一个规范的答案。

`Call to a member function`（或`expects parameter 1 to be mysqli_result, boolean given`程序风格）本身不是错误，而只是其他问题的*症状。*
这个非常错误的消息意味着没有在应该的地方创建对象。

所以 - 创建`$stmt`对象时出现问题。
很可能是查询有问题。因此，我们需要跟踪该错误。

除非明确询问，否则 Mysqli 不会告诉你发生了什么。因此，您必须始终检查与服务器交互的每个 mysqli 函数的结果，以及结果是否为 FALSE - 检查`$mysqli->error`。

将 mysqli 错误消息转换为 PHP 错误也很重要，让它根据站点范围的错误报告设置进行。

如果您在整个应用程序代码中使用 mysqli_query() 而不将其封装到某个帮助程序类中，`trigger_error()`这是引发 PHP 错误的好方法，因为它还会告诉您发生错误的文件和行号

所以，你所有的`prepare()`, execute() 和`query()`调用都必须这样写：

```
$stmt = $mysqli->prepare($query) or trigger_error($mysqli->error."[$query]"); 
```

或程序风格

```
$res = mysqli_query($mysqli,$query) or trigger_error(mysqli_error($mysqli)."[$query]"); 
```

在您的所有脚本中
，从那时起您将被告知原因，为什么没有创建对象。（如果您对这种`or`语法感到好奇，[我已经在这里解释过了](https://stackoverflow.com/a/15320411/285587)）请注意，该查询也包含在错误消息中，让您可以直观地检查它并在另一个环境中进行测试。

**但是**，如果您将查询封装到某个类中，则触发器错误中的文件和行将毫无用处，因为它们将指向调用本身，而不是导致某些问题的应用程序代码。所以，在运行封装的mysqli命令时，必须使用另一种方式：

```
$result = $mysqli->query($sql);
if (!$result) {
    throw new Exception($mysqli->error." [$query]");
} 
```

as Exception 将为您提供**堆栈跟踪**，它将引导您找到调用错误查询的位置。

请注意，您必须能够看到一般的 PHP 错误。在实时站点上，您必须查看错误日志，因此，设置必须是

```
error_reporting(E_ALL);
ini_set('display_errors',0);
ini_set('log_errors',1); 
```

在本地开发服务器上，可以在屏幕上出错：

```
error_reporting(E_ALL);
ini_set('display_errors',1); 
```

当然，您永远不应该在语句前使用错误抑制运算符 (@)。

# vbscript - 如何以编程方式启用 Office Communicator 演示模式

> ID：15447134
> 
> 赞同：1
> 
> 时间：2013-03-16T08:19:46.100
> 
> 标签：vbscript, lync, office-communicator

我知道至少 PowerPoint 演示模式将启用 OC / Lync 演示模式，其中实际消息在屏幕上不可见。

[http://www.ultimate-communications.com/2012/05/privacy-tips-use-presentation-mode-when-you-dont-want-someone-to-see-the-content-of-an-im-在-toast-lync/](http://www.ultimate-communications.com/2012/05/privacy-tips-use-presentation-mode-when-you-dont-want-someone-to-see-the-content-of-an-im-in-the-toast-lync/)

有没有办法从网页脚本（例如 VBS）启用或禁用设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:46:58.060

有关该功能的更多详细信息：

[http://windows.microsoft.com/en-us/windows7/adjust-settings-before-giving-a-presentation](http://windows.microsoft.com/en-us/windows7/adjust-settings-before-giving-a-presentation)

**SHQueryUserNotificationState**应该是可以用来**查询**值但如何更改它的方法..？

# c# - 使用 directshow 通过网络流式传输压缩的 avi

> ID：15447139
> 
> 赞同：0
> 
> 时间：2013-03-16T08:20:35.567
> 
> 标签：c#, streaming, directshow.net, ffdshow

我对 Windows 编程很陌生，我正在尝试设置一个 directshow 图表来通过网络流式传输网络摄像头，这样我就可以监控 ipad 上的输出。

我使用 DirectShowLib 和 FFDShow 在 csharp 中设置了一个图形，它压缩来自捕获设备的原始输出并将其写入 avi 文件。

现在我正在尝试研究如何通过网络广播流。

我可以找到的使用 directshow 进行网络流式传输的唯一示例代码与 WM 库有关，该库似乎只输出 Asf 格式的流。

如何使用 directshow 以 Asf 以外的格式广播流？我可以将 ASF Writer 配置为输出 avi/mpeg 格式的流，还是需要编写自己的 directshow 过滤器？

有没有使用 directshow 在网络上流式传输 avi 的示例？

感谢阅读，乔希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:38:12.447

好吧，我最终使用 VLC 创建了 MJPEG 流。我确实尝试过使用 VLS 的 HLS 插件，但我发现 iOS 一次只能播放一个视频，这不好，因为我想显示多个网络摄像头。MJPEG 解决了这个问题。

# php - 如何在单选按钮单击事件上隐藏/显示输入框

> ID：15447144
> 
> 赞同：0
> 
> 时间：2013-03-16T08:20:47.437
> 
> 标签：php, javascript, jquery, html

我想在单选按钮单击事件上隐藏和显示输入字段，我的 HTML 是

```
<input type="radio" id="abc" name="abc1" checked = "checked" value="Experienced" />
<label> Experienced </label>  
<input type="radio" id="xyz" name="xyz1" checked = "checked"  value="Fresher" />
<label>Fresher</label>  
<input type="text"  name="cardno" id="tyx" /><br />
<p > Number</p> 
```

我想要的是当`value="Fresher"`单击单选按钮时，输入框`name="cardno"`应该被隐藏。

我试图通过使用 jQuery 来解决这个问题，但它不起作用。

```
$(document).ready(function () {
    $("input[name$='abc1']").click(function () {
        var value = $(this).val();
        if (value == 'Experianced') {
            $("#tyx").show();
        } else if (value == 'Fresher') {
            $("#tyx").hide();
        }
    }); 
```

任何机构都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:31:09.887

您的单选按钮的名称应该与检查单击事件或制作单选按钮的数组名称相同

像下面的代码

```
<input type="radio" id="abc" name="abc1" checked = "checked" value="Experienced" />
<label> Experienced </label>  
<input type="radio" id="xyz" name="abc1" checked = "checked"  value="Fresher" />
<label>Fresher</label>  
<input type="text"  name="cardno" id="tyx" /><br />
<p > Number</p> 
```

然后创建类似的功能

```
$(document).ready(function () {
$("input[name$='abc1']").click(function () {
    var value = $(this).val();
    if (value == 'Experianced') {
        $("#tyx").show();
    } else if (value == 'Fresher') {
        $("#tyx").hide();
    }
}); 
```

如果我能帮助你更多，请回复..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:27:39.647

除了**Experienced**中的错字，尝试为每个单选按钮设置一个点击事件：

```
 $(document).ready(function() {
   $('input[name="abc1"][value="Experienced"]').click(function() {
     $("#tyx").show();
   });
   $('input[name="xyz1"][value="Fresher"]').click(function() {
     $("#tyx").hide();
   });
 }); 
```

**笔记：**

您可以简化选择器以使用 id：

```
$('#abc') 
```

和

```
$('#xyz') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:31:34.620

修复：

```
$(document).ready(function () {
  $("input[type='radio']").click(function () {
    var value = $(this).val();
    if (value == 'Experianced') {
        $("#tyx").show();
    } else if (value == 'Fresher') {
        $("#tyx").hide();
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T08:33:04.123

html:

```
<input type="radio" id="abc" name="jobtype" checked = "checked" value="Experienced" />
<label> Experienced </label>  
<input type="radio" id="xyz" name="jobtype" checked = "checked"  value="Fresher" />
<label>Fresher</label>  
<input type="text"  name="cardno" id="tyx" /><br />
<p > Number</p> 
```

同一组的单选按钮应具有相同的`name`

JS：

```
$(document).ready(function () {
   $("input[name='jobtype']").click(function () {
      var value = this.value;
      if (value == 'Experienced') {
        $("#tyx").show();
      } 
     else{
        $("#tyx").hide();
      }
   });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T08:22:32.323

将拼写更改为`Experienced`

你用过

```
if (value == 'Experianced') 
```

# javascript - 下拉隐藏在 mootools silder 后面

> ID：15447146
> 
> 赞同：0
> 
> 时间：2013-03-16T08:20:51.113
> 
> 标签：javascript, html, css, asp.net-mvc, mootools

`mootools`如下图所示，我在滑块中有一个自定义下拉框。此滑块包含三个 div，它们会自动垂直旋转。滑块和自定义下拉菜单的 javascript 和 css 描述如下。我的问题是，当我将下拉菜单放入隐藏在滑块 div 后面的滑块 div 中时，如下图所示。根据要求，我不能改变下拉位置，也不能增加滑块高度，那么如何在滑块上显示下拉列表项。任何建议将不胜感激。

![在此处输入图像描述](../Images/5fc449a7a7f1cf7b57d6f20b36b5f3c8.png)

现在您可以看到上图每单位成本下拉列表隐藏在滑块容器后面。

滑块`mootools`

[http://code.google.com/p/locjoomla/source/browse/trunk/mootool/lofslidernews/js/lofslidernews.mt11.js](http://code.google.com/p/locjoomla/source/browse/trunk/mootool/lofslidernews/js/lofslidernews.mt11.js)

[http://mootools.net/download/get/mootools-1.2.4.js](http://mootools.net/download/get/mootools-1.2.4.js)

[http://cnetjavascript.googlecode.com/files/mootools.svn.js](http://cnetjavascript.googlecode.com/files/mootools.svn.js)

```
<script type="text/javascript">
var _lofmain = $('lofslidecontent45');
var _lofscmain = _lofmain.getElement('.lof-main-wapper');
var _lofnavigator = _lofmain.getElement('.lof-navigator-outer .lof-navigator');
var object = new LofFlashContent(_lofscmain,
                                  _lofnavigator,
                                  _lofmain.getElement('.lof-navigator-outer'),
                                   { fxObject: { transition: Fx.Transitions.Quad.easeInOut, duration: 800 },
                                       interval: 3000,
                                       direction: 'vrdown'
                                   });
object.start(true, _lofmain.getElement('.preload'));

var isCustom = "@(ViewBag.IsCustom)";
if (isCustom == "True") {
    object.callMyEvent(2, true); // call my custom event 
    object.setNavActive(2);
} 
```

滑块 CSS

```
/* CSS Document */
.lof-slidecontent
{
    margin-left: 0px;
    position: relative;
    overflow: hidden;
    width: 1200px;
    height: 486px;
}
.lof-slidecontent .preload
{
    height: 100%;
    width: 100%;
    background: #FFF;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 10;
    color: #FFF;
    text-align: center;
}
.lof-slidecontent .preload div
{
    height: 100%;
    width: 100%; /*background: transparent url(../Images/MyImages/Icons/load-indicator.gif) no-repeat scroll 50% 50%;*/
}
/* main flash */
.lof-main-wapper
{
    margin-right: auto;
    overflow: hidden; /*background: transparent url(../Images/MyImages/Icons/load-indicator.gif) no-repeat scroll 50% 50%;*/
    padding: 0px;
    height: 488px;
    width: 1014px;
    position: relative;
    overflow: hidden;
}

.lof-main-wapper .lof-main-item
{
    padding: 0px;
    margin: 0px;
    height: 488px;
    width: 100%;
    position: absolute;
}
.lof-main-wapper .lof-main-item img
{
    padding: 0px;
    width: 100%;
}

.lof-main-item-desc
{
    z-index: 100px;
    position: absolute;
    top: 150px;
    left: 50px;
    width: 400px;
    background: url(../images/transparent_bg.png); /* filter:0.7(opacity:60) */
}
.lof-main-item-desc p
{
    color: #FFF;
    margin: 0 8px;
    padding: 8px 0;
}
.lof-main-item-desc h3 a
{
    color: #FFF;
    margin: 0;
    font-size: 140%;
    padding: 20px 8px 2px;
    font-family: "Trebuchet MS" ,Trebuchet,Arial,Verdana,sans-serif;
}

/* item navigator */
ul.lof-navigator
{
    top: 0px;
    padding: 0px;
    margin: 0px;
    position: absolute;
    width: 100%;
    overflow: hidden;
}
ul.lof-navigator li
{
    cursor: hand;
    cursor: pointer;
    list-style: none;
    width: 100%;
    padding: 0px;
    margin: 0px;
}
.lof-navigator-outer
{
    position: absolute;
    right: 0;
    top: 0px;
    z-index: 100;
    height: 488px;
    width: 204px;
    padding: 0px;
    margin: 0px;
    float: left;
}
.lof-navigator li.active
{
    background: url(../../Images/MyImages/Icons/arrow-bg2.png) no-repeat;
    background-color: #d21c1c;
    color: #FFF;
}
.lof-navigator li:hover
{
}

.lof-navigator li div
{
    text-align: center;
    height: 162px;
    position: relative;
    margin-left: 0px;
    padding-left: 0px;
    background-color: #FFFFFF;
}

.lof-navigator li.active div
{
}

.lof-next
{
    position: absolute;
    top: 0;
    height: 30px;
    background: #F9F9F9;
    display: block;
    width: 100%;
}
.lof-previous
{
    position: absolute;
    bottom: 0;
    height: 30px;
    background: #F9F9F9;
    display: block;
    width: 100%;
}
.lof-navigator-MycontentHeader
{
    font-family: Caecilia LT Std;
    font-size: 26px;
    color: #d21c1c;
}
li.active .lof-navigator-MycontentHeader
{
    color: #FFF;
}
.lof-navigator-MycontentFooter
{
    font-family: TradeGothic, Arial;
    font-style: oblique;
    font-size: 13px;
    color: Black;
}

li.active .lof-navigator-MycontentFooter
{
    color: #FFF;
} 
```

落下

[http://www.mindstick.com/Articles/f649279c-dc3a-42cb-ab10-e24ae9a1bb90/?Stylish%20Dropdown%20in%20HTML](http://www.mindstick.com/Articles/f649279c-dc3a-42cb-ab10-e24ae9a1bb90/?Stylish%20Dropdown%20in%20HTML)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:43:14.937

如果某些内容无法在 HTML 中显示，通常是由于在其父级之一上设置了溢出：隐藏的 css 属性。

看来这就是您的问题所在 - 尝试删除包含下拉元素的父元素的溢出隐藏。

如果您需要溢出：隐藏，那么还有其他方法可以创建该效果，因此如果您使用[http://jsfiddle.net/](http://jsfiddle.net/)或其他方式发布完整代码，它真的很有帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:08:19.700

您可以将滑块放在 iframe 中吗？可能有更复杂的补救措施，但这总是有效的。

# iphone - tableViewCell 中的 UITapgestureRecognizer

> ID：15447149
> 
> 赞同：0
> 
> 时间：2013-03-16T08:21:02.160
> 
> 标签：iphone, ios, uitableview, uitapgesturerecognizer

我有一个显示电话号码的`UILabel`in 。`UITableViewCell`当我单击它时，我应该能够拨打该特定号码。因此，为了使其可点击，我添加了一个`UITapGestureRecognizer`。但我不知道如何引用点击了哪个水龙头，我的意思是点击了哪个数字。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    lblphone = [[UILabel alloc] initWithFrame:CGSizeMake(20,30,50,100)];
    lblphone.tag = 116;
    lblphone.backgroundColor = [UIColor clearColor];
    lblphone.text=[NSString stringwithFormat:@"%@",phone];
    [lblphone setFont:[UIFont fontWithName:@"Helvetica" size:12]];
    [lblphone setLineBreakMode:UILineBreakModeWordWrap];
    [lblphone setUserInteractionEnabled:YES];

    UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelButton:)];
    [tapGestureRecognizer setNumberOfTapsRequired:1];
    [lblphone addGestureRecognizer:tapGestureRecognizer];
    [tapGestureRecognizer release];
    [cell addSubview:lblphone];
}

-(IBAction)labelButton:(UITapGestureRecognizer*)tapGestureRecognizer
{
    NSIndexPath *indexPath;
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    UILabel *phoneno = (UILabel*)[cell viewWithTag:116];
    NSString *phoneNumber = [@"telprompt://" stringByAppendingString:phoneno.text];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]];
} 
```

但是每次我都能看到最后一个单元格的电话号码`NSString *phoneNumber`；

如何参考点击了哪个标签`UITapGestureRecognizer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:35:22.243

使用`lblphone.tag = indexPath.row + 1;`而不是 `lblphone.tag = 116;`在`cellForRowAtIndexPath`

您也可以在不使用标签的情况下实现这一点。

**请参阅下面的示例**

```
-(void)labelButton:(UITapGestureRecognizer*)tapGestureRecognizer
{
   UILabel *phoneno = (UILabel *) tapGestureRecognizer.view;
} 
```

# ajax - 空 ajax 响应的数据表错误

> ID：15447155
> 
> 赞同：5
> 
> 时间：2013-03-16T08:21:59.803
> 
> 标签：ajax, datatable

我在我的项目中使用 Datatable 1.9.2。我通过 AJAX 在其中显示申请人列表。还有一个过滤器表单，用于过滤数据。一切正常，但问题是如果我过滤记录并且数据库没有返回数据，那么数据表会在 POPUP 中生成错误。有人可以指导我如何使用数据表处理空 ajax 响应，如何处理空数据集。

下面是我正在使用的代码

```
 $('#applicants_list').dataTable( {
"bProcessing": true,
"bServerSide": true,
"sPaginationType": "bootstrap",                 
"sDom": '<"H"Cfr>t<"F"ip>',
"oColVis": {
     "activate": "mouseover",
     "aiExclude": [ 10 ],
     "sAlign": "left"
},
"bFilter": false,
"sAjaxSource": script.php,
"aoColumns": [                               
       {"bSortable": true }, // attachments
       {"bSortable": true }, //Subject Line
       {"bSortable": true }, // Date Sent
       {"bSortable": true }, // File Name
       {"bSortable": false },
       {"bSortable": false },
       {"bSortable": true },
       {"bSortable": true },
       {"bSortable": true },
       {"bSortable": false }
],
"aaSorting": [[0, 'desc']]
} ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T13:30:15.080

当过滤器返回记录为空时，只需从服务器/ajax 响应返回以下数据，它将显示空记录消息。

```
echo '{
    "sEcho": 1,
    "iTotalRecords": "0",
    "iTotalDisplayRecords": "0",
    "aaData": []
}'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-11T02:16:24.307

```
echo json_encode(array('aaData'=>'')); 
```

为我工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-23T19:15:43.290

对于那些正在寻找 ASP.NET 解决方案的人，这里有一个使用 JSON.NET 的示例：

```
JObject jObj = new JObject(
    new JProperty("draw", 0),
    new JProperty("recordsTotal", 0),
    new JProperty("recordsFiltered", 0),
    new JProperty("data", new JArray())
);

return Content(jObj.ToString(Formatting.None), "application/json"); 
```

此处其他答案中的参数适用于旧版本的 DataTables，但我认为它仍然可能与它们向后兼容，至少 aaData 是从我在代码中看到的内容处理的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-02T15:13:07.030

尝试使用每个列对象的 defaultContent 属性...

PD：不需要双引号

```
columns: [                               
       {bSortable: true, defaultContent: '' }, // attachments
       {bSortable: true, defaultContent: '' }, //Subject Line
       {bSortable: true, defaultContent: '' }, // Date Sent
       {bSortable: true, defaultContent: '' }, // File Name
       {bSortable: false, defaultContent: '' },
       {bSortable: false, defaultContent: '' },
       {bSortable: true, defaultContent: '' },
       {bSortable: true, defaultContent: '' },
       {bSortable: true, defaultContent: '' },
       {bSortable: false, defaultContent: '' }
], 
```

# sql - 使排列无法插入 db2

> ID：15447157
> 
> 赞同：0
> 
> 时间：2013-03-16T08:22:10.130
> 
> 标签：sql, database, insert, db2

我很想在我遇到的一个小问题上得到一些帮助。
假设我有一个名为 table0 的表，它有两列 c 和 d。
假设我做了一个插入，例如'插入 table0 值（'paco'，sono'）

如何制作这张表，以便我无法“插入 table0 值”（“sono”、“paco”）？
换句话说，假设该表已经在列 c 和 d 上定义了一个唯一键，那么您如何进一步约束该表以不允许排列？

我已经尝试过'alter table table0 add constraint new unique(d,c)'但这不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:56:35.327

尝试这个

```
CREATE TRIGGER table0 
NO CASCADE BEFORE INSERT ON table0 
REFERENCING NEW AS Newrow
FOR EACH ROW MODE DB2SQL
WHEN (Newrow.C IN (SELECT D FROM table0) OR Newrow.D IN (SELECT C FROM table0)) 
SIGNAL SQLSTATE '70001' ('Duplicate Exists'); 
```

# java - java中使用线程的定时器

> ID：15447159
> 
> 赞同：1
> 
> 时间：2013-03-16T08:22:18.153
> 
> 标签：java, multithreading

我正在用核心 Java 开发一个考试软件，我正在为学生进行各种测试。我被困在一段代码中，其中设置了倒计时计时器。我的问题是当我显示分钟时它工作正常但是当我尝试以 mm:ss 格式显示分钟时它不起作用。

代码是：

```
// for below int ti=20,si=60;
// test is for 20 minutes
public void run() {
    while (true) {
        try {
            Thread.currentThread().sleep(60000);

            for (int i = 0; i <= 60; i++) {
                etime.setText("Remaining Time:-" + ti + ":" + si);
                System.out.println("Remaining Time:-" + ti + ":" + si);
                Thread.currentThread().sleep(1000);
                si--;
            }
            ti--;
            if (ti == 0) {
                close();
            }
        } catch (InterruptedException ex) {
            Logger.getLogger(Exam.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:24:17.750

一旦`si`倒计时到 0，您需要将其重置为 59。

此外，该`i`变量是完全没有必要的，并且您的循环中存在一个错误。

# android - 如何访问一个选项卡的一个类？

> ID：15447161
> 
> 赞同：0
> 
> 时间：2013-03-16T08:22:55.160
> 
> 标签：android, class, tabactivity

我使用 TabActivity，并且我有一个菜单（在标题栏上）。我希望当我点击一个菜单按钮时，我在我的一个选项卡中实例化这个类。

所以，我的标签：

```
public class Tab1 extends ListActivity {
...
   class Chargement extends AsyncTask<String, String, String> {
      @Override
      protected String doInBackground(String... args) {
         //traitement
      }
   }
} 
```

在我的 TabActivity 中，我尝试过这样做：

```
Tab1 t = new Tab1();
a.new Chargement().execute(); 
```

但它不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:30:39.847

```
Tab1 t = new Tab1(); // wrong 
```

**不要实例化活动，它们不能被实例化。**，不要为Activity创建对象。Android 会解决这个问题。如果您创建这种类型，您的生命周期方法将不会执行。

编辑：

要获取当前选项卡，请使用此

tabhost=getTabHost(); // 获取标签主机

```
tabhost.setOnTabChangedListener(new OnTabChangeListener() {
    @Override
    public void onTabChanged(String arg0) {         

        Log.i("***Selected Tab", "Im currently in tab with index::" + mytabs.getCurrentTab());
    }       
}); 
```

# ruby-on-rails - 使用复合模型名称时向迁移添加列？

> ID：15447164
> 
> 赞同：1
> 
> 时间：2013-03-16T08:23:22.967
> 
> 标签：ruby-on-rails, ruby

我有一个名为 MyArticle 的模型。当我尝试使用命令时

```
rails generate migration AddtestToMyArticle test:string 
```

迁移文件只包含空的 up/down 方法。之前在单个单词模型名称上完成了此操作，它工作得很好，并且向上/向下迁移方法具有适当的代码。

我试过“AddtestToMy_Article”，但也没有用。我需要做什么才能使用我的复合模型名称和生成迁移命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:33:07.313

如果您使用下划线而不是 CamelCase，它似乎有效

```
rails g migration add_test_to_my_article test:string 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T15:02:48.510

你需要使用

```
rails generate migration AddColumnToMyArticle test:string 
```

使用“AddColumn”时，您将在迁移中拥有适当的代码。

我只是回顾了一下，虽然我的回答是正确的，但最好有一个更具描述性的迁移名称。下面注意到大写的用户是对的，如果您没有将每个新单词都大写，Rails 将不会了解您正在尝试做什么。因此，在您的问题中，您有`AddtestTo...`但应该是`AddTestTo...`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T08:32:53.963

rails 生成迁移 AddNewFieldToMyArticle new_field:string

# qt - 如何使用 QWidget.addAction() 添加动作？

> ID：15447169
> 
> 赞同：2
> 
> 时间：2013-03-16T08:24:01.597
> 
> 标签：qt

在 Qt 中，我想使用`QWidget.addAction()`. 我可以很容易地做到这一点`QToolBar.addAction()`，但是当我使用时`QWidget.addAction()`，它不起作用。

我该如何使用`QWidget.addAction()`？

这是我的功能：

```
void Reb::addActionToBar(QString *tabName, QAction *action)
{
    //if tab exist, just add the action, else:

    tab_widget->addTab(new QWidget(), *tabName);
    for(int i = 0 ; i <= tab_widget->count() ; i++) {
        if(tab_widget->tabText(i) == tabName) {
            action.setParent(tab_widget->widget(i));
            tab_widget->widget(i)->addAction(action);
        }
    }
} 
```

如您所知，tab_widget 是一个 QTabWidget ...我没有错误，但我在选项卡中看不到我的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:56:30.207

[QWidget::addAction()](https://qt-project.org/doc/qt-5.0/qtwidgets/qwidget.html#addAction)不会将操作添加到 UI - 显示小部件操作的唯一位置是在小部件的上下文菜单中，给定正确的上下文菜单策略。

QTabWidget 无法在其 UI 中显示操作。动作通常显示在工具栏或菜单栏中，因此您需要在此处添加动作。

作为旁注，不需要通过指针传递 QStrings，只需通过 const 引用传递 QString：

```
 void Reb::addActionToBar(const QString &tabName, QAction *action) 
```

此外，您的代码有一个错误，请使用`i < tab_widget->count()`而不是`i <= tab_widget->count()`修复它。

# facebook-graph-api - 无法更改付款回调 URL

> ID：15447171
> 
> 赞同：0
> 
> 时间：2013-03-16T08:24:16.293
> 
> 标签：facebook-graph-api, payment-gateway, payment

Facebook 支付流程正在开发服务器上工作。

当我们将回调更改为生产服务器时，它不起作用：Facebook 服务器永远不会发送请求，或者我们永远不会收到它。

*   相同的 SSL 证书
*   我们在两台不同的机器上试过
*   Facebook URL 测试页有效
*   如果我们使用别名 URL 将回调更改为开发服务器，它就可以工作！

[https://dev01.tld.com/cgi/ps](https://dev01.tld.com/cgi/ps)或[https://dev02.tld.com/cgi/ps](https://dev02.tld.com/cgi/ps)都指向同一个 IP 正在工作 [https://ps01.tld.com/cgi/ps](https://ps01.tld.com/cgi/ps)指向dev01 以外的另一个 IP 从未工作过

facebook是否缓存IP地址？如何更改或刷新 facebook 缓存？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:15:41.437

我发现，这是一个 SSL 问题，不是相同的 SSL 配置，Facebook 开始请求并中止。没有登录apache。将您的 SSL 配置与 openssl s_client -connect ps.tld.com:443 进行比较

# c++ - 如何在第二个数组中创建指向字符的指针

> ID：15447176
> 
> 赞同：1
> 
> 时间：2013-03-16T08:24:46.477
> 
> 标签：c++, pointers, char, cin

我有一个字符数组。`n`是数组的长度

```
 char tab[n];
    cin.get(tab, n);
    cout<<tab<<"\0"<<endl; 
```

然后我创建第二个数组

```
char* t = new char[n];
for(int i = 0; tab[i] != '\0'; i++){
    t[i] = tab[i]; 
```

}

我想有指向相应元素的指针。我的意思是`t[2]`包含的地址`tab[2]`。然后我想对数组进行排序，`t`使其`tab`保持原样并且只`t`随机播放，但是当我在数组`t`中进行更改时

t[2] = 'a';

我松了`t[3]t[4]....`

编辑：

```
do{
    for(int i = 0; i < n -1; i++){
        if(t[i] > t[i+1]){
            char* x = &t[i];
            t[i] = t[i+1];
            t[i+1] = *x
        }
        n--;
    }
}while(n>1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:26:15.587

> 我想有指向相应元素的指针。我的意思是 t [2](http://www.cplusplus.com/doc/tutorial/pointers/)包含 tab [2](http://www.cplusplus.com/doc/tutorial/pointers/)的地址。

所以试试这个：

```
char** t = new (char*)[n];
for(int i = 0; tab[i] != '\0'; i++){
    t[i] = tab+i; // or `&(tab[i])` 
```

`t`要根据值对数组进行排序`tab`，请使用`*t[i]`访问存储在数组位置`i`中的字符值`t`。

有关 C 指针的优秀教程，请参见[此处](http://alumni.cs.ucr.edu/~pdiloren/C++_Pointers/index.htm)和[此处](http://www.cplusplus.com/doc/tutorial/pointers/)。

# python - 如何从 django 的数据库中仅检索一次属性

> ID：15447177
> 
> 赞同：2
> 
> 时间：2013-03-16T08:24:47.753
> 
> 标签：python, django, django-queryset, memoization

我的数据库中有一些我这样描述的关系：

```
@property
def translations(self):
    """
    :return: QuerySet
    """
    if not hasattr(self, '_translations'):
        self._translations = ClientTranslation.objects.filter(base=self)
    return self._translations 
```

`hasattr()`and背后的想法`self._translation`是让数据库只命中一次，而第二次返回存储的属性。

但是，在阅读完文档后，我不确定代码是否正在这样做——因为查询只会在真正需要值时才访问数据库——这在我的代码之后。

正确的方法应该是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:13:05.503

是的，当有人第一次需要该值时，DB 就会被击中。但正如您所指出的，您保存的是查询，而不是结果。包装查询`list(...)`以保存结果。

顺便说一句，您可以使用`cached_property`装饰器使其更优雅。不过，它不是内置的。可以在[这里](http://wiki.python.org/moin/PythonDecoratorLibrary#Cached_Properties)找到。你最终得到：

```
@cached_property
def translations(self):
    return list(ClientTranslation.objects.filter(base=self)) 
```

# android - ImageView 显示上一个图像视图的数据

> ID：15447180
> 
> 赞同：2
> 
> 时间：2013-03-16T08:25:07.550
> 
> 标签：android, imageview, imagebutton

我有以下看法： ![在此处输入图像描述](../Images/a2a33b0e70c6db4b8c2985c44a2ec17c.png)

如果我单击任何 ImageButton 以全屏模式显示相应的图像。例如，如果我单击 Black ，它会显示一个图像视图，例如：![在此处输入图像描述](../Images/783b7f83d4a5c36d6576f8a8917a251a.png)

我还为一些像这样的图像按钮将背景设置为全屏颜色：如果我点击粉红色，它会显示纯粉红色：

![在此处输入图像描述](../Images/45865ced03b4c8765a9eaf74b3d5da5e.png)

到目前为止一切正常，如果我先单击黑色按钮，然后单击粉红色，黑色上的图像将继续使用粉红色背景的布局，如下所示：

![在此处输入图像描述](../Images/2f0e79afb3a5ed041988c7086b576ffc.png)

这是我的问题，我只想要粉红色，而不是前景中的图像；

这是我的 XML 文件：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="#657383" >

<ImageView android:id="@+id/imv"
        android:contentDescription="@string/app_name"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="gone"
        />

<Button android:id="@+id/home"
    android:contentDescription="@string/hello_world"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="10dp"
    android:text="@string/Back_Button"
    android:textSize="25sp"
    />

    <RelativeLayout android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <ImageButton android:id="@+id/image1"
        android:contentDescription="@string/hello_world"
        android:layout_width="130dp"
        android:layout_height="95dp"
        android:background="#000000"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"/>

    <ImageButton android:id="@+id/image2"
        android:contentDescription="@string/hello_world"
        android:layout_width="130dp"
        android:layout_height="95dp"
        android:layout_toRightOf="@+id/image1"
        android:background="#ff0000"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"/>

    <ImageButton android:id="@+id/image3"
        android:contentDescription="@string/hello_world"
        android:layout_width="130dp"
        android:layout_height="95dp"
        android:layout_below="@+id/image1"
        android:background="#00ff00"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"
        />

    <ImageButton android:id="@+id/image4"
        android:contentDescription="@string/hello_world"
        android:layout_width="130dp"
        android:layout_height="95dp"
        android:background="#0000ff"
        android:layout_below="@+id/image2"
        android:layout_toRightOf="@+id/image3"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"
        />

    <ImageButton android:id="@+id/image5"
        android:contentDescription="@string/hello_world"
        android:layout_width="130dp"
        android:layout_height="95dp"
        android:background="#FFFF00"
        android:layout_below="@+id/image3"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"
        />

    <ImageButton android:id="@+id/image6"
        android:contentDescription="@string/hello_world"
        android:layout_width="130dp"
        android:layout_height="95dp"
        android:layout_below="@+id/image4"
        android:layout_toRightOf="@+id/image5"
        android:background="#FFA500"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"/>

    <ImageButton android:id="@+id/image7"
        android:contentDescription="@string/hello_world"
        android:layout_width="130dp"
        android:layout_height="95dp"
        android:layout_below="@+id/image5"
        android:background="#FFFFFF"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"/>

    <ImageButton android:id="@+id/image8"
        android:contentDescription="@string/hello_world"
        android:layout_width="130dp"
        android:layout_height="95dp"
        android:layout_below="@+id/image6"
        android:background="#F52887"
        android:layout_toRightOf="@+id/image7"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"/>

</RelativeLayout> 
```

我的 .Java 数据是：

```
 private OnClickListener myListener = new OnClickListener() {

    @SuppressLint("NewApi")
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        try {

            handler.postDelayed(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    iv.setVisibility(View.GONE);
                }
            }, 2500);

            if (v.getId() == R.id.image1) {
                iv.setBackground(null);
                iv.setVisibility(View.VISIBLE);
                iv.setImageResource(R.drawable.ic_launcher);

            } else if(v.getId() == R.id.image2){
                iv.setBackground(null);

                iv.setVisibility(View.VISIBLE);
                iv.setImageResource(R.drawable.kids_paint_hands);
            }else if(v.getId() == R.id.image3){

                iv.setBackground(null);

                iv.setVisibility(View.VISIBLE);
                iv.setImageResource(R.drawable.play_logo);
            }else if(v.getId() == R.id.image4){

                iv.setBackground(null);
                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundColor(Color.BLUE);
            }else if(v.getId() == R.id.image5){

                iv.setBackground(null);

                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundColor(Color.CYAN);
            }else if(v.getId() == R.id.image6){

                iv.setBackground(null);

                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundColor(Color.MAGENTA);
            }else if(v.getId() == R.id.image7){

                iv.setBackground(null);

                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundColor(Color.WHITE);
            }else if(v.getId() == R.id.image8){

                iv.setBackground(null);

                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundColor(Color.DKGRAY);
                iv.clearFocus();
            }

        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        } 
```

任何帮助或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:39:17.410

您的图像出现背景更改，因为当您将背景颜色更改为粉红色或任何其他纯色时，您没有重置**ImageResource属性，因为您之前的图像也会出现新背景。**

要解决这个问题，您可以将图像显示为背景而不是使用 ImageResource，或者您应该删除您之前设置的 imageResource（例如：iv.setImageResource（任何透明框架））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:43:35.650

试试这个

第一的

```
ImageResource is different from the background Resource.

ImageResource is the foreground image, background resource is the background one. 
```

你需要这样做

```
image.setImageResource(android.R.color.transparent); 
```

显示透明图像而不是原始图像

# design-patterns - 这个 DirSearch 方法应该是公共的、私有的还是静态的？

> ID：15447182
> 
> 赞同：0
> 
> 时间：2013-03-16T08:25:18.700
> 
> 标签：design-patterns, methods, static, access-modifiers

此方法仅使用 'void' 运行良好，但添加 'public'、private' 或 'static' 是否是个好主意？如果是这样，我应该添加什么，为什么？如果您想知道，此代码会遍历目录树并获取该目录树中的所有文件名。

```
void DirSearch(string sourcePath)
{
    try
    {
        foreach (string f in Directory.GetFiles(sourcePath))
        {
            string fileName = System.IO.Path.GetFileName(f);

            if (!listBox1.Items.Contains(fileName))
            {
                listBox1.Items.Add(fileName);
            }
        }                
        foreach (string d in Directory.GetDirectories(sourcePath))
        {                    
            DirSearch(d);
        }        
    }
    catch (Exception ex)
    {
        listBox1.Items.Add(ex.Message);
    }
} 
```

# javascript - 如何动态设置javascript对象的属性

> ID：15447183
> 
> 赞同：0
> 
> 时间：2013-03-16T08:25:44.590
> 
> 标签：javascript

我正在寻找动态设置对象的属性。看下面的例子。

```
function testFunc(type, scope){
    this.scope = scope;
    this.scope.setAttribute(type, true);
    this.doSome = function(){return //Something;}
} 
```

但我意识到该`setAttribute`方法仅适用于 DOM 元素。有没有办法可以动态地将属性设置为 js 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:28:55.850

```
function testFunc(type, scope){
    this.scope = scope;
    this.scope[type]= true;
    this.doSome = function(){return //Something;}
} 
```

应该做的伎俩。

# javascript - Meteor Accounts - 登录表单更改 HTML 删除下拉 JS

> ID：15447184
> 
> 赞同：6
> 
> 时间：2013-03-16T08:25:45.253
> 
> 标签：javascript, meteor

如何修改 Meteor 的 Accounts-ui 以更改呈现的类和 html 标签，而无需重新编写所有 accounts-ui 逻辑？例如，我想删除“[下拉](https://github.com/meteor/meteor/blob/master/packages/accounts-ui-unstyled/login_buttons_dropdown.js)”行为并直接在我的页面中显示表单。我阅读[了这个答案](https://stackoverflow.com/questions/15025621/how-to-style-meteor-js-loginbuttons/15034053)，但没有详细说明 - 它只是删除了默认的 CSS。我想深入一点。。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-07T18:55:52.943

我想出了另一个答案，但我想我会把它放在这里，因为它似乎是一种更快的方式来获得你想要的东西。

```
Template.login.rendered = function()
{
    Accounts._loginButtonsSession.set('dropdownVisible', true);
}; 
```

（Template.login 应该是*Template.yourTemplateWithLoginButtons*）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T14:01:22.967

**造型**

消除`accounts-ui`

```
meteor remove accounts-ui 
```

添加`accounts-ui-unstyled`&`less`

```
meteor add accounts-ui-unstyled
meteor add less 
```

最后，将以下文件添加到您的项目目录中并根据您的喜好对其进行编辑

[https://github.com/meteor/meteor/blob/master/packages/accounts-ui/login_buttons.less](https://github.com/meteor/meteor/blob/master/packages/accounts-ui/login_buttons.less)

**更多定制**

您无需从头开始即可编辑accounts-ui 包和编辑html & js：

删除`accounts-ui-unstyled`包并将下面目录中的内容（package.js 和 accounts_ui_tests.js 除外）添加到项目的`client`目录中，添加`accounts-urls`并编辑它以根据您的规范对其进行微调。

[https://github.com/meteor/meteor/tree/master/packages/accounts-ui-unstyled](https://github.com/meteor/meteor/tree/master/packages/accounts-ui-unstyled)

**直到流星给了我们一种指定加载顺序的方法**

重命名以下文件，以便它们以正确的顺序加载

```
1accounts_ui.js
2login_buttons.html
3login_buttons_single.html
4login_buttons_dropdown.html
5login_buttons_dialogs.html
6login_buttons_session.js
7login_buttons.js
8login_buttons_single.js
9login_buttons_dropdown.js
login_buttons_dialogs.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:24:53.593

如果您只想删除下拉行为，那么只需添加`accounts-ui-unstyled`包并隐藏您不希望可见的组件就足够了：例如：

```
.login-link-text { display: none; } 
```

在您的 CSS 中隐藏*登录*链接。

以下是您查看样式的相关 id 和类：

```
#forgot-password-link
#login-buttons
#login-buttons-password
#login-dropdown-list
#login-email
#login-email-label
#login-email-label-and-input
#login-password
#login-password-label
#login-password-label-and-input
#login-sign-in-link
#signup-link
.accounts-dialog
.additional-link
.additional-link-container
.login-button
.login-button-form-submit
.login-buttons-dropdown-align-left
.login-close-text-clear
.login-close-textClose
.login-form
.login-form-sign-in
.login-link-and-dropdown-list
.login-link-text
.login-password-form 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-17T23:11:36.933

创建您自己的`html`模板，如下所示。根据您的口味设计。

`meteor add accounts-password accounts-ui`

```
 <template name="login">
                     <form class="login-form">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3>Login</h3>
                            </div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email"  class="form-control" id="email" placeholder="Email address">
                                </div>
                                <div class="form-group">
                                    <label>Password</label>
                                    <input type="password" class="form-control" id="password" placeholder="password">
                                </div>
                            </div>
                            <div class="panel-footer">
                                <button type="submit" class="btn btn-danger btn-lg">Login</button>
                            </div>
                        </div>
                    </form>
                </template> 
```

您现在可以`Meteor.loginWithPassword`像这样调用模板事件：

```
Template.login.events({
    'submit .login-form': function(e) {
        e.preventDefault();
        var email = e.target.email.value;
        var password = e.target.password.value;
      Meteor.loginWithPassword(email, password,function(error){
            if(error) {
                //do something if error occurred or 
            }else{
               FlowRouter.go('/');
            }
        });
     }
 }); 
```

您也可以创建另一个表格进行注册。

打电话`Accounts.createUser(object, callback);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-17T23:17:48.480

这个答案有点晚了，但可能会有所帮助。

创建您自己的`html`模板，如下所示。根据您的口味设计。

`meteor add accounts-password accounts-ui`

```
 <template name="login">
                     <form class="login-form">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3>Login</h3>
                            </div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email"  class="form-control" id="email" placeholder="Email address">
                                </div>
                                <div class="form-group">
                                    <label>Password</label>
                                    <input type="password" class="form-control" id="password" placeholder="password">
                                </div>
                            </div>
                            <div class="panel-footer">
                                <button type="submit" class="btn btn-danger btn-lg">Login</button>
                            </div>
                        </div>
                    </form>
                </template> 
```

您现在可以`Meteor.loginWithPassword`像这样调用模板事件：

```
Template.login.events({
    'submit .login-form': function(e) {
        e.preventDefault();
        var email = e.target.email.value;
        var password = e.target.password.value;
      Meteor.loginWithPassword(email, password,function(error){
            if(error) {
                //do something if error occurred or 
            }else{
               FlowRouter.go('/');
            }
        });
     }
 }); 
```

您也可以创建另一个表格进行注册。

打电话`Accounts.createUser(object, callback);`

# qt - Qt Location API 仍然可用？

> ID：15447185
> 
> 赞同：3
> 
> 时间：2013-03-16T08:25:46.703
> 
> 标签：qt, qt-mobility

在[诺基亚](http://www.developer.nokia.com/Community/Wiki/Qt_Location_API)网站的 Qt Location API 页面中，[SDK 下载的链接](http://www.developer.nokia.com/info/sw.nokia.com/id/da8df288-e615-443d-be5c-00c8a72435f8/Qt_SDK.html)需要使用我在他们网站上的现有帐户登录，但一直说“正在唱歌...”并且永远不会返回。有人有想法吗？有`Nokia`/`Degia`关闭项目？

* * *

**更新**）我打算将桌面应用程序用于机器人技术中的大型开源框架。我将从`Ubuntu`但应该支持多个桌面操作系统开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:01:51.307

Qt Location 将成为 Qt 5.0 的一个完整的附加模块，但它被删减和重新设计。从 Qt 5.5 开始，[Qt Location 被列为技术预览](http://doc.qt.io/qt-5/qtmodules.html)版，这表明它将很快成为标准模块。

以下是关于它被削减的原因以及如何返工[的一些引述：](https://web.archive.org/web/20140809213922/http://qt-project.org/forums/viewthread/23659/)

> 不幸的是，一些模块要么失去了维护者，要么质量达不到标准，因此它们被排除在 Qt 5.0.0 版本之外。Qt Location 没有成功，它的代码库仍然需要大量清理。
> 
> 不过，计划是在这些模块准备就绪时包含它们。

-

> Qt Location 中的许多组件都已转换为值类型。以前的组件，如 Coordinate、GeoCircle、GeoRectangle 等是 QObjects。现在它们是提供更好 API 的值类型。

顺便说一句，诺基亚不再参与 Qt 的开发。我不建议从诺基亚下载旧的 SDK。[您可以从http://qt.io/download](http://qt.io/download)获取最新版本

# android - Android：顶部菜单栏+滚动视图？

> ID：15447187
> 
> 赞同：0
> 
> 时间：2013-03-16T08:26:06.443
> 
> 标签：android, layout

我是 Android 新手（以前用 Visual Studio 开发...），到目前为止我对布局有疑问：

我想要做的是顶部有一个栏的布局（只是为了放置一些按钮或额外信息）和一个填充屏幕其余部分的滚动视图。到目前为止，这是我的做法：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Home" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@android:color/white" >

    <!-- I can put any button or text I want in here -->

</LinearLayout>

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="50dp"

    android:background="@drawable/wallpaper" >

</ScrollView> 
```

这正如我预期的那样工作，但我的问题是我是否以正确的方式进行操作，或者我应该以更好的方式（最有效）进行操作。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:27:12.777

不推荐绝对定位。例如，如果您需要将高度从 50dp 增加到 100dp，则必须在几个不同的地方更改此值。

我知道至少有两种方法可以改善您的布局。

1）使用RelativeLayout（`android:layout_below="@id/linearLayout1"`或其对应的layout_above）的功能

```
<RelativeLayout ...>
    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@android:color/white">
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/linearLayout1"
        android:fillViewport="true"
        android:background="@drawable/wallpaper" >
    </ScrollView>
</RelativeLayout> 
```

2）替换为 LinearLayout （并使用`android:layout_weight="1.0"`）

```
<LinearLayout ...>
    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@android:color/white">
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1.0"
        android:fillViewport="true"
        android:background="@drawable/wallpaper" >
    </ScrollView>
</LinearLayout> 
```

这条线`android:layout_height="0dip"`可能看起来很奇怪。实际上你可以使用`match_parent`，但是 Eclipse IDE 会突出显示这一行，`0dip`如果你指定了建议使用`android:layout_weight`。

我还添加`android:fillViewport="true"`到您的滚动视图中。它表示如果需要，滚动视图内的内容将扩展到全高，您可以[在此处阅读有关此属性的信息](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)

# android - 在画布上绘制的视图上设置 onClickListener

> ID：15447188
> 
> 赞同：2
> 
> 时间：2013-03-16T08:26:10.797
> 
> 标签：android, canvas, android-imageview, onclicklistener

所以基本上我在画布上绘制了一些图像视图，但是当我尝试设置 onclick 侦听器并尝试处理事件时，它不起作用。

```
public class DrawView extends View implements OnClickListener{
    Paint paint = new Paint();
    RectF rf = new RectF(30, 30, 80, 80);
    BallView ball = new BallView(getContext());
    Bitmap bmp = BitmapFactory.decodeResource(getContext().getResources(), R.drawable.ic_launcher);

    public DrawView(Context context) {
        super(context);
    }

    @Override
    public void onDraw(Canvas canvas) {
        ball.setOnClickListener(this);
        ball.draw(canvas);
        canvas.drawBitmap(bmp, 110, 10, paint);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Toast.makeText(getContext(), "Mock", Toast.LENGTH_SHORT).show();

    }

} 
```

BallView.java

```
public class BallView extends ImageView {
Paint b = new Paint();
public BallView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public void onDraw(Canvas c){
    b.setColor(Color.BLUE);
    c.drawCircle(50, 50, 40, b);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:58:01.663

基本上答案是：您的视图没有接收到触摸事件，因为它不在视图层次结构中，所以也不会调用单击回调。实际上，视图应该在视图层次结构中（换句话说，添加到某些上层视图，最后添加到窗口）才能参与用户交互。
所以，如果你想实现覆盖你的视图的东西，那么它应该是 ViewGroup 或者根本不应该与视图相关并且是一些抽象容器。
例如，使用下面的点击方式没有任何问题（但您需要第二个视图或修改 BallView 以绘制 bmp）： DrawView：

```
public class DrawView extends FrameLayout implements View.OnClickListener {
    BallView ball = new BallView(getContext());

    public DrawView(Context context) {
        this(context, null, 0);
    }

    public DrawView(final Context context, final AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public DrawView(final Context context, final AttributeSet attrs, final int defStyle) {
        super(context, attrs, defStyle);
        addView(ball);
        ball.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        Toast.makeText(getContext(), "Mock", Toast.LENGTH_SHORT).show();
    }
} 
```

`BallView`类保持不变。
布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
    <com.ruinalst.performance.tests.views.DrawView
            android:id="@+id/oscillator"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_centerInParent="true" />
</RelativeLayout> 
```

# html - HTML/CSS3 - I added a shape into my nav bar, and it messed up the alignment or my wrapper

> ID：15447193
> 
> 赞同：0
> 
> 时间：2013-03-16T08:26:56.493
> 
> 标签：html, css

So I have started to mess around with responsive html. But anyways, that's not really the issue. The issue is after i added this parallelogram shape, it messed up the contents of my wrapper. I tried using z-index to make it so the nav bar appears over the wrapper, but then It didn't work when I set my wrapper to relative, it worked when i set it to absolute/fixed and z-index -1\. I'm just trying to get my wrapper to be aligned in the center while having the parallelogram shape in the nav bar. Because right now, my 2 column layout is being messed up because of the shape.(I suck at explaining, but if you look at my site on jsfiddle, I think you can get the idea) Thanks!

[http://jsfiddle.net/RgKaQ/](http://jsfiddle.net/RgKaQ/)

heres something I've tried

```
nav {
    height: 40px;
    width: 100%;
    background: #33FF00;
    font-size: 11pt;
    font-family: 'PT Sans', Arial, sans-serif;
    font-weight: bold;
    position: relative;
    border-bottom: 2px solid #339900;
    z-index : 1;

}
.wrapper {
    width: 800px;
    margin: 0 auto;
       /* position: relative; doesn't work*/
        position: fixed; /*works but it makes it not aligned in the center*/
    z-index: -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:33:39.063

Try to use the position this absolute if you want to chage the css for nav bar make hte changes in nav bar css not in wrapper ..

```
.wrapper {
width: 800px;
margin: 0 auto;
   /* position: relative; doesn't work*/
   /* position: fixed; works but it makes it not aligned in the center*/
     position:absolute;
z-index: -1; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:54:13.090

The id #swank (which is taller than the nav) is causing the problems. Use position:absolute; for the nav and add margin to .wrapper. Like this. [http://jsfiddle.net/RgKaQ/4/](http://jsfiddle.net/RgKaQ/4/)

```
nav {
position:absolute;
top: 0;
}
.wrapper {
margin: 40px auto 0 auto;
overflow:auto;
} 
```

# c# - 将 Ajax 数组发送到控制器

> ID：15447199
> 
> 赞同：1
> 
> 时间：2013-03-16T08:27:41.500
> 
> 标签：c#, .net, jquery, asp.net-mvc-2

![在此处输入图像描述](../Images/32cc71da074327d16b00b5234d2b80b1.png)

![在此处输入图像描述](../Images/8f30351a16aa5ab26048165bb3bb982f.png)

上面我展示了我的动态 UI 以及我根据日期为相关字段动态设置 ID 的方式。

所以我需要将这些数据作为数组 ajax 帖子发送到 MVC 控制器，然后在控制器中选择这些东西。这应该在我单击“**保存**”按钮时发生

我的 post 方法如下（没有上面的数组细节）：

```
 $("#clocked-details").find("#btnSave").die('click').live('click', function () {

       var yearValue = $("#year").val();
       var monthValue = $("#month").val();

       $.ajax({
          url: "/Employees/UpdateEmployeeClockedHoursByProvider",
          type: 'POST',
          cache: false,
          data: { employeeId: employeeId, year: yearValue, month: monthValue },
          success: function (result) {

          },
          error: function (xhr, ajaxOptions, thrownError) {
                 alert(xhr.status);
                 alert(thrownError);
               }
           });
          return false;
       }); 
```

我的控制器如下（没有jquery数组maupulation）：

```
[HttpPost]
public void UpdateEmployeeClockedHoursByProvider(Guid employeeId, int year, int month)
        {

        } 
```

**更新**

UI 是使用下面提到的代码生成的：

```
<% foreach (var ec in Model)
       {%>
    <tr>
        <td>
            <%: ec.ClockedDate.ToString("yyyy-MM-dd") %>
        </td>
        <td>
            <input type="number" id="<%: ec.ClockedDate.ToString("yyyy-MM-dd") %>-hours" name="<%: ec.ClockedDate.ToString("yyyy-MM-dd") %>-hours"
                class="total-hours" placeholder="Hours" value="<%: ec.TotalHours %>" />
        </td>
        <td>
            <input type="number" id="<%: ec.ClockedDate.ToString("yyyy-MM-dd") %>-minutes" name="<%: ec.ClockedDate.ToString("yyyy-MM-dd") %>-minutes"
                class="total-minutes" placeholder="Minutes" value="<%: ec.TotalMinutes %>" />
        </td>
    </tr>
    <% }%> 
```

**我的问题：**

1.  如何使用 ajax 每行数据发送以上动态 2 个字段？

2.  如何在控制器内操作该数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:32:23.960

您可以首先在服务器上定义一个视图模型，该模型将代表您要检索的数据：

```
public class MyViewModel
{
    public Guid EmployeeId { get; set; }
    public int Year { get; set; }
    public int Month { get; set; }

    public ItemViewModel[] Items { get; set; }
}

public class ItemViewModel
{
    public int TotalHours { get; set; }
    public int TotalMinutes { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
[HttpPost]
public ActionResult UpdateEmployeeClockedHoursByProvider(MyViewModel model)
{
    ...
} 
```

下一步是稍微修正一下您的视图，因为现在您似乎在硬编码输入字段，而不是使用 html 帮助程序并为输入字段定义错误的 id 和名称（在 HTML 中，`id`and`name`属性不能以数字开头）。

因此，这是生成表格的方法：

```
<% using (Html.BeginForm("UpdateEmployeeClockedHoursByProvider", null, FormMethod.Post, new { id = "myForm" })) { %>
    <table>
        <thead>
            <tr>
                <th>Clocked Date</th>
                <th>Total Hours</th>
                <th>Total Minutes</th>
            <tr>
        </thead>
        <tbody>
            <% for (var i = 0; i < Model.Count; i++) { %>
            <tr>
                <td>
                    <%= Html.DisplayFor(x => x[i].ClockedDate) %>
                </td>
                <td>
                    <%= Html.TextBoxFor(
                        x => x[i].TotalHours, 
                        new { 
                            type = "number", 
                            placeholder = "Hours", 
                            @class = "total-hours" 
                        }
                    ) %>
                </td>
                <td>
                    <%= Html.TextBoxFor(
                        x => x[i].TotalMinutes, 
                        new { 
                            type = "number", 
                            placeholder = "Minutes", 
                            @class = "total-minutes" 
                        }
                    ) %>
                </td>                    
            </tr>
        <% } %>
        </tbody>
    </table>

    <button type="submit">Save</button>
<% } %> 
```

最后，您可以拥有一些 javascript 文件，该文件将订阅`.submit`表单的处理程序并将值发送到服务器：

```
$(document).on('#myForm', 'submit', function () {
    var items = [];
    $('table tbody tr').each(function() {
        items.push({
            totalHours: $(this).find('td input.total-hours').val(),
            totalMinutes: $(this).find('td input.total-minutes').val()
        });
    });

    var data = {
        employeeId: employeeId, // <!-- It's not very clear from your code where is this supposed to come from
        year: $('#year').val(),
        month: $('#month').val(),
        items: items
    };

    $.ajax({
        url: this.action,
        type: this.method,
        contentType: 'application/json',
        data: JSON.stringify(data),
        success: function (result) {
            // TODO: here you could handle the response from the server
            alert('Your request has been successfully processed.');
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
        }
    });

    return false;
}); 
```

在此示例中，请注意我如何使用该[`.on()`](http://api.jquery.com/on/)方法，而不是`.live()`已弃用且不应再使用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:00:05.450

这个答案适用于您的第一问题。

您可以使用 发送所有表单数据`form.serialize()`。例如

```
$.ajax({
    ...
    data: $('#yourformId').serialize(),
    ...
}); 
```

# django - 如何将我的所有数据从模型获取到 JSON？我需要导出和导入我的数据

> ID：15447201
> 
> 赞同：1
> 
> 时间：2013-03-16T08:27:56.027
> 
> 标签：django

如何将我的所有数据从模型获取到 JSON？我需要导出和导入我的数据

有什么命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:32:41.543

正如 Rohan 所建议的，您需要[dumpdata](https://docs.djangoproject.com/en/1.5/ref/django-admin/#dumpdata-appname-appname-appname-model)命令。

我通常一次做一个应用程序，输出到文件，并在输出中添加缩进以使其更具可读性 -

```
$ python manage.py dumpdata --indent 2 myapp > /path/to/myapp/fixtures/my_data.json 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:55:03.213

您可以使用[`dumpdata`](https://docs.djangoproject.com/en/dev/ref/django-admin/#dumpdata-appname-appname-appname-model)命令转储表中的数据。默认情况下，它以 JSON 格式提供。

您可以在命令行中执行，在屏幕上打印数据。

```
$ python manage.py dumpdata 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:51:30.297

首先在您的应用程序中创建fixtures 文件夹。

转储应用程序的所有模型数据：

```
 python manage.py dumpdata --format=json --indent=4 [app_name] > [app_name]/fixtures/initial_data.json 
```

# java - 通过常量特定数据在枚举常量中查找

> ID：15447203
> 
> 赞同：1
> 
> 时间：2013-03-16T08:28:00.723
> 
> 标签：java, enums

我需要通过 int在*枚举*中查找。枚举如下：

```
 public enum ErrorCode{

    MissingReturn(1,"Some long String here"),
    InvalidArgument(2,"Another long String here");

    private final int shortCode ;

    private final String detailMessage;

    ErrorCode(shortCode ,detailMessage){
      this.shortCode = shortCode ;
      this.detailMessage= detailMessage;
    } 

    public String getDetailedMessage(){
      return this.detailMessage;
    }    

     public int getShortCode(){
      return this.shortCode ;
    }      

  } 
```

现在需要有一个查找方法，它需要一个`int` *代码*，并且应该返回`String`与存储在`Enum`.Passing 中的代码有关的消息。传递*“1”*应该返回字符串*“Some long String here”*。实现此功能的最佳方法是什么？

```
public static String lookUpMessageFromCode(int code){

} 
```

PS：这个类 `EnumMap`对这种用例有用吗？如果是，请告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:35:10.440

根据`int`您与. `enum`_ `ErrorCode`_ 在您的情况下，数组更合适，因为您有值并且很小。我还将签名更改为 return 。`Map<Integer,ErrorCode>``enum``1``2``ErrorCode`

```
private static final ErrorCode[] allErrorCodes = new ErrorCode[] {
    null, MissingReturn, InvalidArgument
};

public static ErrorCode lookUpByCode(int code) {
    // Add range checking to see if the code is valid
    return allErrorCodes[code];
} 
```

需要消息的调用者会这样获取它：

```
String message = ErrorCode.lookUpByCode(myErrorCode).getDetailedMessage(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:45:11.733

我会简单地遍历您的 Enum 值并检查代码。该解决方案使您可以利用现有`Enum`的而不创建另一个要管理的对象。

```
public enum ErrorCode {

    MissingReturn(1, "Some long String here"), 
    InvalidArgument(2, "Another long String here");

    private final int shortCode;

    private final String detailMessage;

    ErrorCode(int shortCode, String detailMessage) {
        this.shortCode = shortCode;
        this.detailMessage = detailMessage;
    }

    public String getDetailedMessage() {
        return this.detailMessage;
    }

    public int getShortCode() {
        return this.shortCode;
    }

    public static String lookUpMessageFromCode(int code) {
        String message = null;
        for (ErrorCode errorCode : ErrorCode.values()) {
            if (errorCode.getShortCode() == code) {
                message = errorCode.getDetailedMessage();
                break;
            }
        }
        return message;
    }

    public static void main(String[] args) {
        System.out.println(ErrorCode.lookUpMessageFromCode(1));
        System.out.println(ErrorCode.lookUpMessageFromCode(2));
    }

} 
```

**需要注意的一件事**

构造`Enum`函数缺少有关其参数的类型信息。

```
ErrorCode(int shortCode, String detailMessage) {
    this.shortCode = shortCode;
    this.detailMessage = detailMessage;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:23:31.983

这是另一种选择：

```
 public static String lookUpMessageFromCode(int code){
     for(ErrorCode ec:ErrorCode.values()){
         if(ec.shortCode==code)
             return ec.detailMessage;
     }
     return null;
 } 
```

# actionscript-3 - 使用 flex 将参数传递给 CGI 脚本

> ID：15447206
> 
> 赞同：0
> 
> 时间：2013-03-16T08:28:34.363
> 
> 标签：actionscript-3, flex3, cgi

我正在尝试将三个参数（arg1、arg2 和 arg3）传递给 CGI 脚本，但以下代码不起作用。

有人可以告诉我如何使用 flex 将参数传递给 CGI 脚本吗？

```
public function loadURL():void {
    //frameBuffer.reloadFrame(frameBuffer.currentFrame); 
    var variables:URLVariables = new URLVariables("name=Franklin");
    var request:URLRequest = new URLRequest();
    request.url = "http://firefly.cs.missouri.edu/cgi-bin/main2.cgi?arg1=image.TIF&arg2=BranchPoints.txt&arg3=Medial.txt";
    request.method = URLRequestMethod.POST;
    request.data = variables;
    var loader:URLLoader = new URLLoader();
    loader.dataFormat = URLLoaderDataFormat.VARIABLES;
    loader.addEventListener(Event.COMPLETE, completeHandler);
    try
    {
        loader.load(request);
    }
    catch (error:Error)
    {
        trace("Unable to load URL");
    }

    function completeHandler(event:Event):void
    {
        trace(event.target.data.welcomeMessage);
    }
    //Alert.show("Hi");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:44:40.417

像这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application 
xmlns:mx="http://www.adobe.com/2006/mxml" 
layout="absolute" minWidth="955" minHeight="600" creationComplete="init(event)">

<mx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        public function loadURL():void 
        {
            var variables:URLVariables = new URLVariables();

            variables.name = "Franklin";
            variables.arg1 = "image.TIF";
            variables.arg2 = "BranchPoints.txt";
            variables.arg3 = "Medial.txt";

            var request:URLRequest = new URLRequest("http://firefly.cs.missouri.edu/cgi-bin/main2.cgi");
            request.method = "POST";
            request.data = variables;

            var loader:URLLoader = new URLLoader();
            loader.dataFormat = URLLoaderDataFormat.TEXT;
            loader.addEventListener(Event.COMPLETE, completeHandler);
            loader.addEventListener(IOErrorEvent.IO_ERROR, onError);

            loader.load(request);
        }

        private function completeHandler(event:Event):void
        {
            trace(event.target.data.welcomeMessage);
        }

        private function onError(event:IOErrorEvent):void
        {
            trace("Fault!");
        }

        protected function init(event:FlexEvent):void
        {
            loadURL();
        }

    ]]>
</mx:Script>

</mx:Application> 
```

该脚本给了我以下代码：

```
<html><head><title>My First Script</title></head>
<body>
<p>Hello world!</p>
</body></html>image.TIFBranchPoints.txtMedial.txtimage.TIF BranchPoints.txt Medial.txt 
```

# python - 递归斐波那契函数是如何推导出来的？

> ID：15447210
> 
> 赞同：2
> 
> 时间：2013-03-16T08:28:59.290
> 
> 标签：python, fibonacci

在 python 中，返回第 n 个斐波那契数的斐波那契数列的递归函数可以写成：

```
def fib(n):
    if n == 1:
        return 0
    if n == 2:
        return 1
    return fib(n-2) + fib(n-1) 
```

我理解这个函数是如何工作的，但是如果有人以前从未见过这个函数，那么如何推导出它呢？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T08:34:58.960

它只是对斐波那契数列的数学定义的粗略翻译。

斐波那契数列定义为：

> F [0] = 0
> 
> F [1] = 1
> 
> F [n] = F [n-1] + F [n-2]

可以看到，Python 代码基本上是直接翻译这个的（`n`off by 1 除外）。

# django - 管理面板的 Django 项目问题

> ID：15447211
> 
> 赞同：0
> 
> 时间：2013-03-16T08:29:12.863
> 
> 标签：django, django-models

我将所有模型存储在一个名为 models 的文件夹中，它对我来说工作正常。但是 admin.py 有一些问题，我应该将这个文件存储在哪里？在模型文件夹或应用程序文件夹中？当我尝试将模型插入管理面板时出现错误。

错误：

```
TypeError at /admin/

'module' object is not iterable

Request Method:     GET
Request URL:    http://localhost:9004/admin/
Django Version:     1.4.5
Exception Type:     TypeError
Exception Value:    

'module' object is not iterable

Exception Location:     /usr/local/lib/python2.7/dist-packages/django/contrib/admin/sites.py in register, line 74
Python Executable:  /usr/bin/python2.7
Python Version:     2.7.3
Python Path:    

['/home/***/**/**/Testcase_Project',
'/home/***/**/**/Testcase_Project',
'/usr/lib/python2.7',
'/usr/lib/python2.7/plat-linux2',
'/usr/lib/python2.7/lib-tk',
'/usr/lib/python2.7/lib-old',
'/usr/lib/python2.7/lib-dynload',
'/usr/local/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages/PIL',
'/usr/lib/python2.7/dist-packages/gst-0.10',
'/usr/lib/python2.7/dist-packages/gtk-2.0',
'/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
'/usr/lib/python2.7/dist-packages/ubuntuone-client',
'/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
'/usr/lib/python2.7/dist-packages/ubuntuone-couch',
'/usr/lib/python2.7/dist-packages/ubuntuone-installer',
'/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol']

Server time:    Sat, 16 Mar 2013 11:31:39 +0200
Traceback Switch to copy-and-paste view

/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py in get_response

                                request.path_info)

    ...
▶ Local vars
/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py in resolve

                for pattern in self.url_patterns:

    ...
▶ Local vars
/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py in url_patterns

            patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)

    ...
▶ Local vars
/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py in urlconf_module

                self._urlconf_module = import_module(self.urlconf_name)

    ...
▶ Local vars
/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py in import_module

        __import__(name)

    ...
▶ Local vars
/home/***/***/***/Testcase_Project/Testcase_Project/urls.py in <module>

    admin.autodiscover()

    ...
▶ Local vars
/usr/local/lib/python2.7/dist-packages/django/contrib/admin/__init__.py in autodiscover

                import_module('%s.admin' % app)

    ...
▶ Local vars
/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py in import_module

        __import__(name)

    ...
▶ Local vars
/home/***/***/***/Testcase_Project/Testcase_Project/admin.py in <module>

    admin.site.register(test_cases)

    ...
▶ Local vars
/usr/local/lib/python2.7/dist-packages/django/contrib/admin/sites.py in register

            for model in model_or_iterable:

    ...
▶ Local vars 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:10:59.530

将对象分成模块到包等中是非常好的。您只需要记住，Django默认只在包的根目录中查找`admin.py`and文件。`models.py`这里的解决方案是显式导入所需的文件，这样做的好地方是`__init__`首先编译的文件。

[所以例如（Django 1.4 设置，这里](https://stackoverflow.com/questions/11216829/django-directory-structure/11222631#11222631)有更多关于 Django 结构的信息）：

```
/project_root
    /project
        __init__.py
        settings.py
        urls.py
    /app
        __init__.py
        admin.py
        models.py
    manage.py 
```

可以转换为：

```
/project_root
    /project
        __init__.py
        settings.py
        urls.py
    /app
        __init__.py  # <- import statements
        /admin
            admin_foo.py
            admin_bar.py
        /models
            model_foo.py
            model_bar.py
    manage.py 
```

然后在您`__init__.py`的应用程序文件夹中添加：

```
from .models.model_foo import Foo
from .models.model_bar import Bar
from .admin.admin_foo import FooAdmin
from .admin.admin_bar import BarAdmin 
```

而且由于已安装的应用程序是如何定义事物的，您不应该忘记将 app_label 属性添加到模型 Meta 类中：

```
class Foo(models.Model):
    # fields...
    class Meta:
        app_label = 'app'

class Bar(models.Model):
    # fields...
    class Meta:
        app_label = 'app' 
```

# c# - 在 ASP.NET WebForms C# 中使用 WCF

> ID：15447212
> 
> 赞同：1
> 
> 时间：2013-03-16T08:29:18.320
> 
> 标签：c#, asp.net, wcf

WCF 的用途是什么，或者在 ASP.NET 网站中使用 WCF 有什么优势？

先感谢您！

在对你们发表负面意见之前，你们能简单地向我解释一下吗？：） 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:33:07.337

1.  WCF 可以像 COM+ 一样维护事务
2.  它可以保持状态
3.  可以控制并发
4.  它可以托管在 IIS、WAS、自托管、Windows 服务上
5.  它具有 AJAX 集成和 JSON（Javascript 对象表示法）支持

看看[这个](http://www.codeproject.com/Questions/456672/What-is-the-advantage-using-WCF-over-Webservice-in)

[以下](http://keithelder.net/blog/images/keithelder_net/blog/WindowsLiveWriter/WCFvsASMXWebServices_ABC2/image_thumb_2.png)是 WCF 的快速浏览：-

![在此处输入图像描述](../Images/c57deae5fe79fb9ab88fa141225c81ea.png)

==================================================== =======================

一个优点是您可以轻松地将协议和序列化从二进制远程切换到 Web 协议。在 IIS 中或外部托管也很容易。

# git - 文件重命名后如何合并两个不同的文件

> ID：15447213
> 
> 赞同：2
> 
> 时间：2013-03-16T08:29:20.613
> 
> 标签：git

`foo`我在分支的 git 存储库中创建了一个文件`master`。

然后，我创建一个新分支`dev`，使用`git checkout -b dev`.

在分支`dev`上，我将其重命名为`bar`using `git mv foo bar`。

在那之后，我改变了一些东西`foo`并提交它。

但是，当我 checkout branch `dev`and时`git merge master`，**git**不会自动为我合并它并要求我自己合并它。

那么，是after I execute`foo`的祖先吗？有没有办法让**git**自动合并？`bar``git mv`

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:15:23.363

如“ [git merge with changed files](https://stackoverflow.com/questions/2701790/git-merge-with-renamed-files) ”中所述，您应该尝试调整重命名阈值：

> 从 git 1.7.4 开始，您可以将合并的重命名阈值指定为

```
git merge -X rename-threshold=25 
```

> 为了控制 25% 的相似度已经足以考虑两个文件重命名候选。
> 这取决于具体情况以及`-X ignore-space-change`可能使重命名检测更可靠。

仍然来自[Tilman Vogel](https://stackoverflow.com/users/119725/tilman-vogel)，当合并未检测到重命名时，该脚本[`git-merge-associate`](https://gist.github.com/tvogel/894374)可以帮助恢复两个文件之间的关联（一个是另一个的重命名版本）。**

# javascript - 将jquery函数转换为javascript

> ID：15447214
> 
> 赞同：0
> 
> 时间：2013-03-16T08:29:28.310
> 
> 标签：javascript

我必须使用 javascript 来完成下面提到的工作，这些工作在 jquery 中完成并且工作完美。使用 javascript 的原因是知道如何使用 javascript 来完成它。我用谷歌搜索但没有找到任何线索来完成它

[http://jsfiddle.net/2vP24/](http://jsfiddle.net/2vP24/)

```
$('.first').find('.sub1').next().css('background','#ff0000') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:35:33.323

如果那是您正在寻找的，您将找不到针对该代码行的解决方案。如果你深入研究[DOM](https://developer.mozilla.org/en-US/docs/DOM)，你最终会弄清楚你需要什么，但这里有一种方法，假设`.sub1`每个`.first`.

```
var els = document.querySelectorAll('.first');

[].forEach.call(els, function(el) {
  var next = el.querySelector('.sub1').nextSibling;
  next.style.backgroundColor = '#ff0000';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:35:48.993

如果您不关心支持旧浏览器，这应该做同样的事情：

```
[].forEach.call(document.querySelectorAll('.first .sub1 + *'), function(elem) {
    elem.style.backgroundColor = '#ff0000';
}); 
```

# c# - 在回调中返回

> ID：15447218
> 
> 赞同：1
> 
> 时间：2013-03-16T08:30:04.310
> 
> 标签：c#, .net, delegates, callback

```
public static string GetFoo() {

        string source = GameInfoUtil.GetSource(repairRequest, () => {
            return "0"; // this line gives error
        });
        .
        .
        MORE WORK, BUT WANT TO SKIP IT
    }

public static string GetSource(WebRequest request, Action failureCallback) {
        // DOING WORK HERE WITH REQUEST
        if(WORK IS SUCCESSFULL) RETURN CORRECT STRING ELSE CALL ->
        failureCallback();
        return "";
    } 
```

我想做这样的事情，但它给了我错误：

```
Error   2   Cannot convert lambda expression to delegate type 'System.Action' because some of the return types in the block are not implicitly convertible to the delegate return type.
Error   1   Since 'System.Action' returns void, a return keyword must not be followed by an object expression   C:\Users\Jaanus\Documents\Visual Studio 2012\Projects\Bot\Bot\Utils\GameInfoUtil.cs 58  5   Bot 
```

我想要做的是，当发生某些事情时`GameInfoUtil.GetSource`，它会调出我的委托，并且该`GetFoo`方法将返回而不是继续工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T08:31:43.570

`Action`委托应返回 void 。您不能返回字符串。您可以将其更改为`Func<string>`：

```
string source = GameInfoUtil.GetSource(repairRequest, () => {
        return "0";
    });

public static string GetSource(WebRequest request, Func<string> failureCallback)
{
    if( <some condition> )
        return failureCallback(); // return the return value of callback
    return "";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:36:18.767

`Action`委托返回无效。您正在尝试返回字符串“0”。

如果您更改`Action`为`Func<string>`并返回该值。

```
public static string GetSource(WebRequest request, Func<string> failureCallback) {
    // DOING WORK HERE WITH REQUEST
    if(!(WORK IS SUCCESSFULL))
    {
        return failureCallback();
    }
    return "";
} 
```

您的代码将起作用。

lambda 中的代码不能从外部函数返回。在内部，lambda 被转换为常规方法（具有不可描述的名称）。

```
public static string GetFoo() {
    string source = GameInfoUtil.GetSource(repairRequest, () => {
        return "0"; // this line gives error
    });
} 
```

相当于

```
public static string GetFoo() {
    string source = GameInfoUtil.GetSource(repairRequest, XXXYYYZZZ);
}

public static string XXXYYYZZZ()
{
    return "0";
} 
```

现在你可以很容易地理解为什么`return "0"`不能从 GetFoo 返回。

# java - 在端口上写入时如何解决 IO 异常

> ID：15447219
> 
> 赞同：1
> 
> 时间：2013-03-16T08:30:06.890
> 
> 标签：java, serial-port, rxtx

我想将字节数组写入`OutputStream`串行端口，但出现错误“java.IO.Exception”。

以下是我尝试编写的数组：

```
byte[] b = new byte[255] {127, -112, 17, 126, -100, 76, 98, 68, -48, -94, 51,
                          -36, -32, -40, -79, -114, -69, 67, 51, 69, 33, 83, 0,
                          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...} 
```

以下方法打开并写入端口：

```
public boolean OpenSSPComPort(SSP_COMMAND cmd){
    try
    {
        CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(cmd.ComPort);
        if ( portIdentifier.isCurrentlyOwned() )
        {
            System.out.println("Error: Port is currently in use");
        }
        else
        {
            comPort = (SerialPort) portIdentifier.open("Open Port",2000);
            if ( comPort instanceof SerialPort )
            {
                SerialPort serialPort = (SerialPort) comPort;
                serialPort.setSerialPortParams(9600,SerialPort.DATABITS_8,SerialPort.STOPBITS_2,SerialPort.PARITY_NONE);
                in = serialPort.getInputStream();
                out = serialPort.getOutputStream();
                serialPort.addEventListener(this);
                serialPort.notifyOnDataAvailable(true);

                in = comPort.getInputStream();
                out = comPort.getOutputStream();

                comPort.addEventListener(this);
                comPort.notifyOnDataAvailable(true);
            }
            else
            {
                System.out.println("Error: Only serial ports are handled by this example.");
            }

            System.out.println("Roshan:Port open successfull");
        }
    }
    catch (Exception ex)
    {
         lastException = ex;
         return false;
    }

    return true;
}

public boolean WritePort()
{
    try
    {
        byte[] byteArray = new byte[ssp.txData.length];
        for(int i = 0; i<ssp.txData.length; i++)
            byteArray[i] = (byte) ssp.txData[i];
        System.out.println("array to write"+Arrays.toString(byteArray));
        out.write(byteArray, 0, byteArray.length);  //here gets the IOException
    }
    catch (Exception ex)
    {
        ex.printStackTrace();
        return false;
    }
    return true;
} 
```

这是完整的堆栈跟踪：

```
java.io.IOException
    at gnu.io.RXTXPort$SerialOutputStream.write(RXTXPort.java:1159)
    at dllUtilities.SSPComms.WritePort(SSPComms.java:685)
    at dllUtilities.SSPComms.SSPSendCommand(SSPComms.java:161)
    at hopper.CHopper.SendCommand(CHopper.java:120)
    at hopper.CHopper.SetProtocolVersion(CHopper.java:783)
    at gui.Form1.ConnectToValidator(Form1.java:376)
    at gui.Form1.MainLoop(Form1.java:235) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:03:34.550

可能是你写得太快了。您是否尝试将波特率设置得更高，或者写得更慢。它仍然一次调试一个字节吗？

# c++ - 在 Xcode 中提升线程错误访问

> ID：15447225
> 
> 赞同：0
> 
> 时间：2013-03-16T08:31:02.470
> 
> 标签：c++, xcode, boost-asio, boost-thread

更新：如果我使用 libc++ 进行编译，则会出现错误，但是当我将编译器更改为 libstdc++（GNU C++ 标准库）时，程序将运行而不会显示任何错误。

我正在尝试来自 boost 网站的一些示例代码，但不知何故，在运行此代码时我遇到了错误的访问错误。代码运行良好，直到它调用它看起来的析构函数。

`-lmysqlclient` `-lm` `-lz` `-lboost_date_time` `-lboost_system` `-lboost_filesystem`是链接的。

有谁知道我做错了什么？

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/thread/thread.hpp>
#include <boost/bind.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

class printer
{
public:
    printer(boost::asio::io_service& io)
    : strand_(io),
    timer1_(io, boost::posix_time::seconds(1)),
    timer2_(io, boost::posix_time::seconds(1)),
    count_(0)
    {
        timer1_.async_wait(strand_.wrap(boost::bind(&printer::print1, this)));
        timer2_.async_wait(strand_.wrap(boost::bind(&printer::print2, this)));
    }

    ~printer()
    {
        std::cout << "Final count is " << count_ << "\n";
    }

    void print1()
    {
        if (count_ < 10)
        {
            std::cout << "Timer 1: " << count_ << "\n";
            ++count_;

            timer1_.expires_at(timer1_.expires_at() + boost::posix_time::seconds(1));
            timer1_.async_wait(strand_.wrap(boost::bind(&printer::print1, this)));
        }
    }

    void print2()
    {
        if (count_ < 10)
        {
            std::cout << "Timer 2: " << count_ << "\n";
            ++count_;

            timer2_.expires_at(timer2_.expires_at() + boost::posix_time::seconds(1));
            timer2_.async_wait(strand_.wrap(boost::bind(&printer::print2, this)));
        }
    }

private:
    boost::asio::strand strand_;
    boost::asio::deadline_timer timer1_;
    boost::asio::deadline_timer timer2_;
    int count_;
};

int main()
{
    boost::asio::io_service io;
    printer p(io);
    boost::thread t(boost::bind(&boost::asio::io_service::run, &io));
    io.run();
    t.join();

    return 0;
} 
```

![堆栈跟踪](../Images/4c9d3be8003b2bb8d9a3e78284728609.png)

[原始图像](https://i.stack.imgur.com/9zOzl.png)

我不确定这是否是堆栈跟踪...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:29:25.537

我使用 gcc 4.2.1 在我的 Mac 上构建并运行您的代码没有问题

```
samm$ g++ --version
i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
samm$ ./a.out
Timer 1: 0
Timer 2: 1
Timer 1: 2
Timer 2: 3
Timer 1: 4
Timer 2: 5
Timer 1: 6
Timer 2: 7
Timer 1: 8
Timer 2: 9
Final count is 10
samm$ 
```

我使用相同的工具链来构建我的 boost 库

```
samm$ grep BOOST_LIB_VERSION /opt/local/include/boost/version.hpp 
//  BOOST_LIB_VERSION must be defined to be the same as BOOST_VERSION
#define BOOST_LIB_VERSION "1_53"
samm$ 
```

我建议使用相同的工具链来构建 boost 和您的应用程序。

# javascript - 什么是测试骨干扩展构造函数继承的好方法？

> ID：15447234
> 
> 赞同：0
> 
> 时间：2013-03-16T08:32:11.700
> 
> 标签：javascript, backbone.js

如何测试构造函数是否扩展了另一个构造函数 Backbone.js 样式，其中继承是通过 Backbone 的`extend`方法设置的？不要说`instanceof`:)。我不是在谈论对象。我说的是构造函数。

例如：采用如下代码生成的构造函数：

```
var MyRouter = Backbone.Router.extend(); 
```

现在，在代码的另一个地方，你如何测试它的原型链中的某个地方`var my_router = new MyRouter`是否具有 的属性`Backbone.Router.prototype`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:32:11.700

这是我的解决方案：

```
var inherits = function(child, parent) {
  if (!_.isFunction(child) || !_.isFunction(parent)) 
    throw new Error('`child` and `parent` must be functions.'); 

  return _.reduce(Object.getPrototypeOf(child.prototype), function(memo,  child_prototype__proto__) {    
    return _.contains(parent.prototype, child_prototype__proto__) && memo;
  }, true);
} 
```

所以，你可以这样做：

```
var MyRouter = Backbone.Router.extend();
inherits(MyRouter, Backbone.Router) // true
inherits(MyRouter, Backbone.Model) // false 
```

这适用于单层 Backbone 风格的继承，其中 Backbone 的`extend`功能如上使用。

之所以有效，是因为 Backbone`extend`在设置原型链时会执行以下操作，`child`最后你得到的构造函数在哪里`parent`，你正在扩展的构造函数在哪里：

```
var Surrogate = function(){ this.constructor = child; };
Surrogate.prototype = parent.prototype;
child.prototype = new Surrogate; 
```

因此，生成的构造函数`extend`在其属性上具有其父级的所有原型属性`.prototype.__proto__`。[如果这是新的或令人困惑的，您可以在John Resig 的博客](http://ejohn.org/blog/objectgetprototypeof/)上阅读更多相关信息。本质上，`"test".__proto__ === String.prototype`.

# java - Hibernate 类到表的映射关系

> ID：15447236
> 
> 赞同：0
> 
> 时间：2013-03-16T08:32:14.120
> 
> 标签：java, hibernate, sqlalchemy

我以前使用过 SQLAlchemy，根据我的经验，我可以在 SQLAlchemy 中进行从类到表的声明性映射以及类之间的关系。

这是声明的示例：

```
class Item(Base):
     __tablename__ = 'item'

     id = Column(Integer, Sequence('item_seq'), primary_key=True)
     barcode = Column(String, unique=True)
     shortdesc = Column(String)
     desc   = Column(String)
     reg_date = Column(DateTime)
     registrar = Column(String)
     category = Column(String, ForeignKey('category.code'))
     supplier = Column(String, ForeignKey('supplier.code'))
     stock_on_hand = Column(Integer)
     cost = Column(Float)
     price = Column(Float)
     unit = Column(String, ForeignKey('unit.code'))

     receiving = relationship('Receiving', backref='item')
     adjustment = relationship('Adjustment', backref='item')
     sales = relationship('Sales', backref='sales')

     def __repr__(self):
        return "<Item('%s','%s','%s', '%s')>" % (self.barcode, self.shortdesc, self.stock_on_hand, self.unit)

class Supplier(Base):

     __tablename__ = 'supplier'

     code = Column(String, primary_key=True)
     name = Column(String)
     reg_date = Column(DateTime)
     registrar = Column(String)
     address_line_1 = Column(String)
     address_line_2 = Column(String)
     address_line_3 = Column(String)
     postcode = Column(String)
     city = Column(String)
     state = Column(String)
     country = Column(String)
     phone = Column(String)
     fax = Column(String)
     representative = Column(String)

     item = relationship('Item',backref='supplier')

    def __repr__(self):
    return "<Supplier('%s','%s','%s')>" % (self.code, self.name, self.representative) 
```

`Supplier`与表具有一对多关系的地方`Item`，以及可以从这些类声明中创建关系。

我可以对 Hibernate 做同样的事情吗？如何？我在谷歌上下搜索，但我只发现在 Hibernate 中从表到类的逆向工程。

如果可以这样做，我们如何处理 Hibernate 中的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:30:12.600

不是 100% 确定我正确理解了您的问题，但这里是：

最简单的是，它看起来像这样：

```
public class Supplier {
    @Identity
    @GeneratedValue
    private Long id; 
    //stuff
    @OneToMany(mappedBy="supplier")
    private List<Item> items;
    //more stuff
}

public class Item {
    @Identity
    @GeneratedValue
    private Long id; 
    //item stuff
    @ManyToOne
    private Supplier supplier;
    //more item stuff
} 
```

which states that a supplier has a number of items, and an item has a supplier. The mappedBy property states that in the database, the `Item`-table will have a column `supplier_id`, which a foreign key to the `Supplier`-table

# php - putbucket 和 putobject 不工作。点击上传按钮后出现黑屏

> ID：15447237
> 
> 赞同：0
> 
> 时间：2013-03-16T08:32:15.990
> 
> 标签：php, amazon-s3

我正在按照教程在执行此代码之前在亚马逊 s3 上上传图像文件。但是当我使用 localhost 加载页面时，我看到一个空白屏幕。不知道为什么。我试图删除 php 代码中的行。我猜想在实例化 S3 构造函数时出了点问题，但不确定。我还尝试在我的本地主机（不是亚马逊）上使用 php 上传文件，我也发现了这种情况。那么问题出在哪里？请帮我。我被困住了。

```
 <?php
$bucketname="myname";
if(!class_exists('S3')) require_once('S3.php');

if(!defined('awsAccessKey')) define('awsAccessKey','key');
if(!defined('awsSecretKey')) define('awsSecretKey','secretkey');

$s3= new S3(awsAccessKey, awsSecretKey);

if(isset($_POST['Submit']))
{
    $fileName= $_FILES['theFile']['name'];
    $fileTempName= $_FILES['theFile']['tmp_name'];

    $s3->putBucket($bucketname, S3::ACL_PUBLIC_READ);

    //if($s3->putObjectFile($fileTempName,$bucketname,$fileName, S3::ACL_PUBLIC_READ)
    //{
    //  echo "We successfully uploaded your file.";
    //}
    //else
    //{
    //  echo "something went wrong";
    //}

    try
    {
        $s3->putObjectFile($fileTempName,$bucketname,$fileName, S3::ACL_PUBLIC_READ);

    }
    catch(Exception $e)
    {
            echo $e->getMessage();

    }
}

?>

<form action="" method="post" enctype="multipart/form-data">
    <input name="theFile" type="file" />
    <input name="Submit" type="submit" value="Upload"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:41:55.247

坑看起来你在混合 HTML 和 php

```
 $s3->putBucket($bucketname, S3::ACL_PUBLIC_READ);<br><br> 
```

这条线也看起来不对

```
if($s3->putObjectFile($fileTempName,$bucketname,$fileName, Se::ACL_PUBLIC_READ) 
```

应该是

```
 if($s3->putObjectFile($fileTempName,$bucketname,$fileName, S3::ACL_PUBLIC_READ) 
```

您需要仔细检查您的 php 语法。也许在代码中加入一些 echo 语句来输出一些调试信息。您还可以在代码周围放置一个 try catch

```
try
{
   $s3->putObjectFile(params);
}
catch(Exception $e)
{
    echo $e->getMessage();
 } 
```

# java - 为什么这个循环只运行一次

> ID：15447239
> 
> 赞同：0
> 
> 时间：2013-03-16T08:32:35.320
> 
> 标签：java

下面的 for 循环 ( `for (int curr = 0; curr<working.size(); curr++){`) 循环应该运行 n 次，其中 n 是称为 working 的 ArrayList 的大小。但是，即使在验证 ArrayList 中有多个元素之后，循环也只运行一次。为什么是这样？

```
 String sql = "SELECT time FROM `tutors`.`appointments`"
            + "WHERE tutorID = ? AND date = ?";

          try{
    for (int curr = 0; curr<working.size(); curr++){       
        System.out.println("working size: " + working.size());
        System.out.println("running for the time: " + curr);

        PreparedStatement ps = conn.prepareStatement(sql);
        ps.setInt(1, working.get(curr).getTutorID());
        ps.setDate(2, toReturn);

        ResultSet rs = ps.executeQuery();

        while(rs.next()){
            Time t = rs.getTime("time");
            System.out.println("RS HAS : " + t);
            long beforeLong = t.getTime()-900000;
            long afterLong = t.getTime()+900000;

            Time beforeTime = new Time(beforeLong);
            Time afterTime = new Time(afterLong);

            if (!time.before(beforeTime) && !time.after(afterTime)){
                System.out.println("removed" + working.get(curr).getName());
                working.remove(curr);
            }
        } 
    }
        } catch(SQLException e) {e.printStackTrace();} 
```

PS - 无论我将 try/catch 放在 for 循环内部还是外部，我都有同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:36:59.330

您在迭代时删除元素。

假设您的列表大小为 2 ：在第一次迭代中，您删除了一个元素，然后循环停止，因为这`curr`是`1`列表的大小。

如果删除元素，请使用迭代器迭代列表：

```
Iterator it = working.iterator();
while (it.hasNext()) {
    ...
    it.remove();
} 
```

`ArrayList`迭代器对于此操作是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:36:23.890

循环以working.size（）为条件，循环内调用的任何方法都会改变这个吗？我看到你在那里有 working.remove() ，这可能会改变循环终止条件。

尝试在循环结束和开始时打印 working.size() 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:38:16.057

您有可能最终在`for`循环的第一次迭代中删除列表中的所有元素。让我们看看如何（考虑第一次迭代，`curr = 0`）。

`rs`此语句执行后可能有多条记录：

```
ResultSet rs = ps.executeQuery(); 
```

因此，以下`while`可能最终会运行多次：

```
while(rs.next()) 
```

现在，只要对于任何这些记录，此条件评估为 true：

```
!time.before(beforeTime) && !time.after(afterTime) 
```

索引`0`(as `curr = 0`) 处的元素从 中删除`working`：

```
working.remove(curr); 
```

但是随着这个删除，其他元素在列表中向左移动，这意味着另一个元素来自 index `0`，它本质上成为`while`循环的另一个迭代中删除的候选者。

[`ArrayList.remove`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#remove%28int%29)：

> 移除此列表中指定位置的元素。将任何后续元素向左移动（从它们的索引中减去 1）。

# android - 谷歌地图 v2 安卓

> ID：15447242
> 
> 赞同：0
> 
> 时间：2013-03-16T08:32:46.510
> 
> 标签：android, google-maps

我正在尝试在 android 应用程序上设置谷歌地图。我看到了很多关于这个错误的问题，但没有人真正回答我的问题

我的错误文件

```
03-15 22:32:56.235: D/AndroidRuntime(6713): Shutting down VM
03-15 22:32:56.235: W/dalvikvm(6713): threadid=1: thread exiting with uncaught exception (group=0x415b22a0)
03-15 22:32:56.235: E/AndroidRuntime(6713): FATAL EXCEPTION: main
03-15 22:32:56.235: E/AndroidRuntime(6713): java.lang.RuntimeException: Unable to start activity ComponentInfo{ant.project.myway/ant.project.myway.MainActivity}: android.view.InflateException:   Binary XML file line #7: Error inflating class fragment
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.os.Looper.loop(Looper.java:137)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.app.ActivityThread.main(ActivityThread.java:4895)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at java.lang.reflect.Method.invokeNative(Native Method)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at java.lang.reflect.Method.invoke(Method.java:511)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at dalvik.system.NativeStart.main(Native Method)
03-15 22:32:56.235: E/AndroidRuntime(6713): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.app.Activity.setContentView(Activity.java:1912)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at ant.project.myway.MainActivity.onCreate(MainActivity.java:11)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.app.Activity.performCreate(Activity.java:5163)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
03-15 22:32:56.235: E/AndroidRuntime(6713):     ... 11 more
03-15 22:32:56.235: E/AndroidRuntime(6713): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
03-15 22:32:56.235: E/AndroidRuntime(6713):     ... 21 more
03-15 22:32:56.235: E/AndroidRuntime(6713): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.SupportMapFragment
03-15 22:32:56.235: E/AndroidRuntime(6713):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-15 22:32:56.235: E/AndroidRuntime(6713):     at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
03-15 22:32:56.235: E/AndroidRuntime(6713):     ... 24 more
03-15 22:36:00.345: I/Process(6713): Sending signal. PID: 6713 SIG: 9 
```

所以这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ant.project.myway"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="ant.project.myway.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- The following two permissions are not required to use
     Google Maps Android API v2, but are recommended. -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="ant.project.myway.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="@string/api_key"/>
    </application>

</manifest> 
```

我的活动

```
package ant.project.myway;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

和布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" />

</RelativeLayout> 
```

看了很多帖子解决这个问题

我不确定我的 api 密钥是否正确，我在 ubuntu 上。我去~/.android，我跑

```
keytool -list -alias androiddebugkey -keystore debug.keystore -storepass android -keypass android 
```

我得到了我的密钥，我在谷歌控制台 api 密钥上设置了 my_key;ant.project.myway

我认为这是正确的方法

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:45:48.273

从 logcat 输出来看，您遇到的问题与您的密钥无关：

> 原因：android.support.v4.app.Fragment$InstantiationException：无法实例化片段 com.google.android.gms.maps.SupportMapFragment：确保类名存在，是公共的，并且有一个公共的空构造函数

基本上意味着在您的布局被实例化的那一刻，`SupportMapFragment`没有找到类。是什么让我认为您引用`google-play-services`库的方式有问题。

您可以查看我的[博客文章](https://blog-emildesign.rhcloud.com/?p=435)，了解如何在您的应用程序中添加 Google 地图以查找更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:28:48.113

如果您在“ant.project.myway”包 naem 的帮助下生成了密钥，那么您应该在权限标签中只使用这个包名称。

请试试这个...

```
<permission
        android:name="ant.project.myway.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" /> 
```

也使用 android:name 而不是类属性

```
 <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" /> 
```

还要在您的清单中添加此权限

```
<uses-permission android:name="ant.project.myway.permission.MAPS_RECEIVE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T13:17:13.100

将此添加到您的活动中：

```
GoogleMap map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

# android - 多点触控拖放android

> ID：15447252
> 
> 赞同：3
> 
> 时间：2013-03-16T08:33:54.593
> 
> 标签：android, drag-and-drop, multi-touch

我想在我的 android 应用程序中进行多点触控拖放。
我的要求是当用户使用两根手指时，只需拖动即可。单图不拖。
我怎样才能做到这一点？
我的代码看起来像这样

```
 if (pointerCount == 2) {

            switch (motionEvent.getAction() & MotionEvent.ACTION_MASK) {

            case MotionEvent.ACTION_DOWN:
             //what should i write here?
                 break;
            case MotionEvent.ACTION_MOVE:
             //what should i write here? 
```

我应该为每个事件案例写什么。
任何有用的链接？

# objective-c - 为什么我不能使用父类中的直接实例变量

> ID：15447255
> 
> 赞同：2
> 
> 时间：2013-03-16T08:34:28.637
> 
> 标签：objective-c, class

```
@interface rectangle: NSObject
@property int width, height;
{
     -(int) area;
     -(int) perimeter;
     -(void) setWidth: (int) w andHeight: (int) h;
}
@end

@implementation rectangle
@synthesize width, height;
...
...
@end 
```

我做了一个矩形的正方形子类

```
@interface square: rectangle
-(void) setSide: (int) s;
-(int) side;
@end

@implementation square
-(void) setSide: (int) s
{
    [self setWidth: s andHeight: s];
}
-(int) side
{
    return self.width;
}

@end 
```

我的主要问题是：为什么我不能这样做

```
return width; 
```

当我想得到我的方形物体的侧面时。我想

```
@property int width, height; 
```

只是一个简化的

```
@interface rectangle: NSObject
{
    int width;
    int height;
}
//getter/setter methods
...
@end 
```

而在书中，如果在@interface 中声明了一个实例变量，它就会被它的子类继承。但是，显然，

```
return width; 
```

似乎不起作用。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:39:34.180

问题是属性的合成是实现的一部分，而不是接口。子类只能依赖接口。

例如，`@synthesize` *可以*指定不同的实例变量名（例如`@synthesize width = _my_funky_width;`），而子类将无法知道实际的实例变量是什么。

# aem - CQ5 - 当工作流完成时，在前端显示 CQ.Notification

> ID：15447256
> 
> 赞同：2
> 
> 时间：2013-03-16T08:34:41.190
> 
> 标签：aem

我实现了工作流，但很高兴知道客户端库是否提供了允许挂接的钩子。当触发并完成工作流时，应该显示 CQ.Notification。还是我需要自己实现一个投票库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:02:17.143

据我所知，除了看这里之外，没有内置的 CQ 区域可以查看何时完成：

```
http://yoursite.com:port/libs/cq/workflow/content/console.html 
```

到达那里后，您可以转到“实例”选项卡并查看发生了什么。

在我处理的一个应用程序中，我们最终编写了自己的方法，该方法根据我们的一个工作流程向我们发送通知（我们的工作流程与之相关 - 从工作流程模型区域，您可以将您的流程设置为您自己的 servlet '已经投入CQ）。这是我们的 servlet 中的主要代码，它捕获处于活动状态的进程，然后根据它找到的内容调用我们的方法向我们发送电子邮件：

```
import com.day.cq.workflow.WorkflowException;
import com.day.cq.workflow.WorkflowSession;
import com.day.cq.workflow.exec.WorkItem;
import com.day.cq.workflow.exec.WorkflowData;
import com.day.cq.workflow.exec.WorkflowProcess;
import com.day.cq.workflow.metadata.MetaDataMap;
import org.apache.felix.scr.annotations.Component;
import org.apache.felix.scr.annotations.Properties;
import org.apache.felix.scr.annotations.Property;
import org.apache.felix.scr.annotations.Service;
import org.osgi.framework.Constants;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import javax.jcr.Node;
import javax.jcr.RepositoryException;
import java.util.Arrays;

public class YourServletName implements WorkflowProcess {
    @Override
    public void execute(WorkItem workItem, WorkflowSession workflowSession, MetaDataMap args) throws WorkflowException {
        session = workflowSession.getSession();
        final WorkflowData data = workItem.getWorkflowData();
        String type = data.getPayloadType();

        String[] argStrings = args.get("PROCESS_ARGS", ARG_UPDATED).split(",");
        String reason = argStrings[0];
        String baseUrl = argStrings[1];

        try {
            if (type.equals(TYPE_JCR_PATH) && data.getPayload() != null) {
                String resourcePath = data.getPayload().toString();
                logger.info("Send Notification that {} has been {}.", resourcePath, reason.toLowerCase());

                if (resourcePath != null && !resourcePath.isEmpty()) {
                    ResourceInfo resourceInfo = new ResourceInfo(resourcePath, baseUrl);
                    sendEmail(resourceInfo, reason);
                }
            }
        } catch (EmailException ex) {
            logger.warn("Failed to send Email");
            throw new WorkflowException(ex);
        } catch (MailingException ex) {
            logger.warn("Failed to send Email");
            throw new WorkflowException(ex);
        }
    }
} 
```

[您可以在扩展工作流功能](http://dev.day.com/docs/en/cq/current/workflows/wf-extending.html)的文档中找到更多信息。

查看该页面上的第一个代码块，这将使您最好地了解如何实现自定义工作流处理程序。

**编辑**

如果你想在前端看到它，你可以做一个 AJAX 调用来获取当前正在运行的工作流的 JSON 列表——你可以点击这个 url：

```
http://localhost:4502/etc/workflow/instances.RUNNING.json 
```

然后你可以遍历它们，看看你的是否在那里。但这不是很好，因为它们都只是按 ID 列出的。相反，我建议使用查询构建器，或者再次执行 AJAX GET。这是一个例子：

```
1_group.0_path=/etc/workflow/instances
2_group.0_type=cq:Workflow
0_group.property.2_value=COMPLETED
0_group.property=status
0_group.property.and=true
3_group.property=modelId
3_group.property.2_value=/etc/workflow/models/your-model-name/jcr:content/model
3_group.property.and=true 
```

然后 URL 看起来像这样：

```
http://yoursiteurl:port/libs/cq/search/content/querydebug.html?_charset_=UTF-8&query=http%3A%2F%2Fyoursiteurl%3Aport%3F%0D%0A1_group.0_path%3D%2Fetc%2Fworkflow%2Finstances%0D%0A2_group.0_type%3Dcq%3AWorkflow%0D%0A0_group.property.2_value%3DRUNNING%0D%0A0_group.property%3Dstatus%0D%0A0_group.property.and%3Dtrue%0D%0A3_group.property%3DmodelId%0D%0A3_group.property.2_value%3D%2Fetc%2Fworkflow%2Fmodels%2Fyour-model-name%2Fjcr%3Acontent%2Fmodel%0D%0A3_group.property.and%3Dtrue 
```

这很丑陋，但它可以为您提供所需的结果，然后您可以解析它们以获取所需的更多信息。

# javascript - 如何使用 Greasemonkey 绕过 javascript 函数？

> ID：15447263
> 
> 赞同：1
> 
> 时间：2013-03-16T08:35:30.237
> 
> 标签：javascript, jquery, greasemonkey

我想学习如何在 Greasemonkey 中编写脚本来修改页面中的变量或绕过延迟函数。

这是页面中间的脚本：

```
<script language="Javascript">
    x300=100;

    function countdown() {
        x300--;
        if (x300 == 0) {
            document.getElementById('countdown').innerHTML =
                '<strong>Proceed to URL - <a href="http://XXXX.com/11123324">click here</a>!</strong>';
        }
        if (x300 > 0) {
            document.getElementById('countdown').innerHTML =
                'You will be redirected in ' + x300 + ' seconds.';
            setTimeout('countdown()',100000);
        }
    }

    countdown();
</script> 
```

当然，我想做一个将我重定向到的脚本`http://XXXX.com/11123324`，我仍然是菜鸟，所以我制作的最好的脚本是：

```
// ==UserScript==
// @name        aaa
// @include     bbbb
// @grant       none
// ==/UserScript==

x300=1;
countdown() 
```

但它没有用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:08:05.147

# 更新：

基于[原始问题（现已删除）](https://stackoverflow.com/q/14876047/331508)和明显的目标页面，变量`x300`和函数`countdown()` *是*全局的。但是变量名`x300`实际上是从一页到另一页的。这意味着它不是编写脚本的好选择。

函数名称`countdown()`似乎是不变的。*因此，您可以使用正则表达式从函数源*中提取所需的链接：

```
// ==UserScript==
// @name        aaa
// @include     bbbb
// @grant       none
// ==/UserScript==

var addrFound       = false;
var cntDwnFuncSrc   = window.countdown;  // Use unsafeWindow if grant is not none.
if (cntDwnFuncSrc) {
    cntDwnFuncSrc           = countdown.toString ();
    var payloadAddrMatch    = cntDwnFuncSrc.match (/href="([^"]+?)"/);
    if (payloadAddrMatch  &&  payloadAddrMatch.length > 1) {
        location.assign (payloadAddrMatch[1]);
        addrFound           = true;
    }
}

if ( ! addrFound) {
    alert ("Payload address not found.  Site probably changed");
} 
```

* * *

* * *

* * *

给定您的示例页面，**您的用户脚本应该可以工作。** 它没有，意味着**您忽略或更改了问题中的关键细节！**

1.  **您在错误控制台 ( `Ctrl``Shift``J`) 中遇到什么错误？**

2.  当您在 Firefox 或 Firebug 控制台中运行以下代码时会发生什么？

    ```
    console.log (x300);
    console.log (countdown); 
    ```

3.  目标页面的 URL 是什么，以便我们可以看到实际情况？

# php - PHP验证类和请求回调问题

> ID：15447267
> 
> 赞同：2
> 
> 时间：2013-03-16T08:36:00.267
> 
> 标签：php, ajax, class, validation

目前我使用注册表单并希望在其中查找一个 php 验证类实现以进行验证检查，我在[这里](https://stackoverflow.com/questions/737385/easiest-form-validation-library-for-php)找到了SchizoDuckie 提供的一个类，我的表单将使用 ajax 请求来调用文件`reg_process.php`，我的问题是我该怎么做使用此类来验证必填字段？如果发现无效输入，则向浏览器发送错误消息？

这是 reg_process.php：

```
<?php
include('FormValidator.php');

$email = mysql_real_escape_string(strtolower(trim($_POST['email'])));
$password = mysql_real_escape_string(trim($_POST['password']));
$rpassword = mysql_real_escape_string(trim($_POST['rpassword']));
$fname = mysql_real_escape_string($_POST['fname']);
$contact = mysql_real_escape_string($_POST['contact']);

$validations = array(
    'name' => 'anything',
    'email' => 'email',
    'alias' => 'anything',
    'pwd'=>'anything',
    'gsm' => 'phone',
    'birthdate' => 'date');
$required = array('name', 'email', 'alias', 'pwd');
$sanatize = array('alias');

$validator = new FormValidator($validations, $required, $sanatize);

if($validator->validate($_POST))
{
    $_POST = $validator->sanatize($_POST);
    // now do your saving, $_POST has been sanatized.
    die($validator->getScript()."<script type='text/javascript'>alert('saved changes');    </script>");
}
else
{
    die($validator->getScript());
}
?> 
```

阿贾克斯调用：

```
$('#btn_reg').click(function(){
    var parameters = $('#reg_form').serialize();

    $.ajax({
        url: 'reg_process.php',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(data){
            //how to get error if found invalid
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:16:32.133

一个干净的方法是使用 HTTP 响应代码。

在服务器端成功时，使用 200 HTTP 响应代码进行响应。您的 jQuery ajax*成功*回调将捕获这些响应，您可以对数据做任何您想做的事情。

如果验证失败，如果出现问题，则以 500 错误响应，并使用*错误*回调捕获它。

使用正确的响应代码进行响应将有助于区分好坏。

此外，直接传回 javascript 可能不是一个好主意，因为您必须这样`eval()`做。

# html - 如何保持背景图像到位并将所有超链接缩进屏幕右侧 5 厘米？

> ID：15447268
> 
> 赞同：1
> 
> 时间：2013-03-16T08:36:03.797
> 
> 标签：html, css

大家好，我在我的页面中有一个背景图像，并且想将我的所有超链接移动到屏幕右侧 5 厘米，这样它就不会覆盖背景图像。你们能告诉我如何完成这项任务吗？目前我的页面中只有几个超链接，但后来我想添加更多内容，并希望将所有这些内容缩进屏幕右侧 5 厘米。

```
<body id="ct600_bodytag" style="background:url(./images/bg.jpg) no-repeat fixed top center #fff;"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:12:00.800

如果您想在正文中提供所有内容，只需将其添加到标签中

```
body{
margin-left:5cm;
} 
```

[http://jsfiddle.net/gH2eP/](http://jsfiddle.net/gH2eP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:10:11.953

你为什么不在你的标签中使用这样的东西`<head>`？

```
<style>
 body *
 {
   margin-left: 5cm;
 }
</style> 
```

甚至更简单

```
<style>
  body
  {
    padding-left: 5cm;
  }
</style> 
```

# flyway - 使用 Flyway 迁移前预览 SQL 语句

> ID：15447276
> 
> 赞同：9
> 
> 时间：2013-03-16T08:36:32.890
> 
> 标签：flyway

我是 Flyway 的新手，我正在使用 Flyway 2.1 代码库在使用 Flyway 的先前架构版本上迁移和执行 SQL 语句。一旦我执行我较新的 SQL 语句，元数据表中的版本条目就会增加。

但是在我迁移新版本的架构之前（即在我迁移/在数据库架构上执行较新的 SQL 语句之前），我想在另一个 preview.sql 文件中捕获所有新 SQL，以便 DBA 可以看到在进行迁移之前的 SQL。

我计划通过在 Flyway.java 文件中添加一个 flyway.preview() 方法来做到这一点。您能否让我知道需要更改哪些其他文件才能完成此操作？

此外，我只想在新版本 > 数据库中当前模式版本的情况下执行此操作。我检查了 2.1 代码，但 SchemaVersion 类在 2.1 中已被弃用，我不确定如何从数据库中获取当前版本。

感谢您的帮助或任何可以纠正我的方法的建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:43:00.310

还没有必要的抽象来支持这一点，但我计划在接下来的几周内添加它们以支持 2.2 中的批量更新。一旦完成，它应该更容易实现。

至于查询数据库的状态，你有 Flyway.info() 来帮助你。

# java - KeyListener 没有响应

> ID：15447282
> 
> 赞同：1
> 
> 时间：2013-03-16T08:37:12.453
> 
> 标签：java, swing, awt, keylistener

我正在尝试制作一个简单的 Java 程序，但我无法从中获得任何输入。任何人都可以提出解决方案吗？

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

class KeyIns extends JFrame implements KeyListener {

 public void KeyIns(){
     addKeyListener(this); //==> this is why .... 
 }

@Override
public void keyPressed(KeyEvent e) {
    // TODO Auto-generated method stub
    System.out.println("1");
}

@Override
public void keyReleased(KeyEvent e) {
    // TODO Auto-generated method stub
    System.out.println("2");
}

@Override
public void keyTyped(KeyEvent e) {
    // TODO Auto-generated method stub
    System.out.println("2");
}

}

public class Hello {
public static void main(String[] args){

    KeyIns inkey = new KeyIns(); 
    inkey.setSize(368, 300);
    inkey.setLocation(250, 250);
    inkey.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T08:45:46.773

`KeyListener`仅当它注册到的组件既可聚焦又具有焦点时才会响应。

另一个问题是`JFrame`它上面包含一堆其他组件，包括根窗格和内容窗格。将 a 注册`KeyListener`到框架可能永远不会实现任何目标

更好的解决方案是使用[Key bindings API](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

根据您要实现的目标，很多事情都很重要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:44:56.807

问题是您从不调用该方法

```
 public void KeyIns(){
     addKeyListener(this); //==> this is why .... 
 } 
```

像这样调用方法 KeyIns() 或删除单词 void （使其成为构造函数）

```
 public KeyIns(){
     addKeyListener(this); //==> this is why .... 
 } 
```

# php - 在 ajax 中包含 php 文件时，Javascript 不起作用

> ID：15447285
> 
> 赞同：5
> 
> 时间：2013-03-16T08:37:37.193
> 
> 标签：php, javascript, ajax

我有一个下拉选择列表和一个按钮，我在其中插入了一个 onclick 事件，因此每当有人单击该按钮时，它都会调用一个基本上包含 ajax 的函数，并且在执行时它将包含一个 php 文件。在我的 php 文件中，它从选定的下拉列表中获取值，之后它将显示一个警报选项，但它不显示任何警报。

以下是我的代码： -

```
<html>
<head>
<script>
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","user.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users1" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br>
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

用户.php

```
<?php
$q=$_GET["q"];
if($q ==1)
{
    echo '<script type="text/javascript">
    alert("Hello")
    </script>';
}
else {
    echo "No";
}
?> 
```

任何帮助将不胜感激，并提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:35:23.047

因此，正如 Chris 已经指出的那样，如果您使用您描述的 AJAX 调用来返回一些文本，您可以将其放入您的页面中并进行 DOM 更新，例如：

```
document.getElementById("txtHint").innerHTML=xmlhttp.responseText; 
```

这样可行。但是，如果您的 responseText 包含 javascript，它只会被发布到文档中。您的页面已经完成加载，因此*不会*执行。

但是，您显然希望 AJAX 调用产生两种行为。除了将用户数据主体发布到 txtHint div 之外，您还希望弹出警报。为此，您可以将警报代码放在 onreadystatechange 函数中，在发布到 txtHint div 的点之后。

从您的问题中不清楚您想要控制警报的逻辑。如果您希望警报对某些选择说“Hello”，而对其他选择说“No”，那么您可以测试您的选择输入：

```
if (str=="1") alert("Hello");
else          alert("No"); 
```

相反，如果您的警报内容应该取决于您的 AJAX 调用返回的内容，那么您将拥有一些基于 xmlhttp.responseText 的其他逻辑。也许您甚至会将警报正文写入 user.php 发回的响应中。然后你可以从 responseText 中解析出来，在你的警报中使用它，把它去掉，然后用剩下的来设置 txtHint 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:44:57.967

尝试

```
if(xmlhttp.responseText == "yes"){
 alert("Hello");
  }
else{
 alert("No");
 } 
```

交换 === 与 ==

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:56:20.450

不幸的是，您不能像已经告知的那样简单地使用 innerHTML 来附加脚本。您最好的选择是使用一些 DOM 处理程序，例如 jQuery，它可以非常轻松地处理 DOM API。做你需要的更好的方法是编写一些Javascript：

```
var jsTag = document.createElement('script');
var jsCode = "alert('this came from PHP or whatever you have on server side');";
jsCode = document.createTextNode(jsCode);
jsTag.appendChild(jsCode);
document.body.appendChild(jsTag); 
```

或者，使用 jQuery，它会是这样的：

```
$('body').append("<script>alert('this came from PHP or whatever you have on server side');</script>"); 
```

~干杯~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:08:11.533

问题是使用 innerHTML=... 添加脚本确实会将脚本添加到 DOM，但不会自动评估（执行）脚本。改变这个：

```
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    } 
```

对此：

```
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        var myScripts = document.getElementById("txtHint").getElementsByTagName("script");
        if(myScripts.length > 0) 
        {
            for(i=0; i < myScripts.length;i++)
            {
                eval(myScripts[i].innerHTML);
            }
        }
    } 
```

这样，所有异步添加的脚本都将得到评估。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:10:58.980

```
<html>
<head>
<script>
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="<b>Person info will be listed here.</b>";
  return;
}

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;

     //////////// YOU CAN ADD THIS!///////////////////
    if (str=="1"){alert('hello');}
     ////////////////////////////////////////////////

    }
  }
xmlhttp.open("GET","user.php?q="+str,true);
xmlhttp.send();

}
</script>
</head>
<body>

<form>
<select name="users1" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br>
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T09:44:54.363

使用`showUser(this.options[this.selectedIndex].value)`代替`showUser(this.value)`

编辑：

所以`$q=$_GET["q"];`改为`$q=intval($_GET["q"]);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-16T08:48:11.100

我认为您动态添加到页面的“脚本”标签不会被解析和执行。但是您可以从您的 user.php 中返回一个 json 对象，包括您的答案（是/否）。然后你不能决定在你的`onreadystatechanged`回调中显示什么。或者只是返回“是”/“否”并执行以下操作：

```
<?php
$q=$_GET["q"];
if($q ==1)
{
    echo "Yes";
}
else {
    echo "No";
}
?> 
```

并在您的主页中：

```
if(xmlhttp.responseText === "yes"){
 alert("Hello");
}
else{
 alert("No");
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-27T18:02:41.047

尝试让 Fiddler 运行以查看服务器之间的流量/输出。这将深入了解 user.php 的输出是什么？这可以帮助调试。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-16T09:04:58.153

尝试将您从 AJAX 调用收到的 HTML 插入正文。

```
document.getElementsByTagName('body')[0].appendChild(xmlhttp.responseText); 
```

显然，如果这可行，您将需要确保有要附加的数据，否则您可能会收到错误消息。

我经常在我通过 AJAX 检索的 PHP 片段文件中使用脚本，并且我发现它们在我将它们附加到某些东西之前永远不会工作。我从来没有尝试过*只*返回一个`script`标签的 PHP 文件，但理论上它应该是一样的。

**编辑：** 当我意识到您没有使用 jQuery 时，将代码示例更改为 Javascript。实际上，我已经很久没有在没有 jQuery 的情况下这样做了，所以我不完全确定它会起作用，但还是试试吧。我想也许使用`appendChild()`并且`innerHTML`会给出不同的结果。

**再次编辑：** 再一次，我没有测试过这个，因为我目前还不能，但也许把它包装起来`xmlhttp.responseText`可能`document.createDocumentFragment()`会起作用：

```
var frag = document.createDocumentFragment();
frag.innerHTML = xmlhttp.responseText;
document.getElementsByTagName('body')[0].appendChild(frag); 
```

# c# - 如何在 RavenDB Lucene 查询中包含日期条件

> ID：15447290
> 
> 赞同：2
> 
> 时间：2013-03-16T08:38:00.523
> 
> 标签：c#, linq, lucene, ravendb

我在 RavenHQ 有以下索引

```
from doc in docs 
let Tag = doc["@metadata"]["Raven-Entity-Name"]
where  Tag != null && Tag=="Email"
select new { Tag, LastModified = (DateTime)doc["@metadata"]["LastModified"], DateAdded=doc.DateAdded }; 
```

我也确实将 DateAdded 索引设置为已分析。我想编写一个 Lucene 查询，它在 where 子句中包含***小于日期的条件。***

我试过跟随，但没有奏效。

```
Where("DateAdded: [NULL TO 2012-12-31").ToList() 
```

在 C# 中在 where 子句中提供日期的确切方法是什么。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T16:01:42.907

最好的方法是使用 Raven 的 API 而不是自己构建查询：

```
var date = new DateTime(2012, 12, 31, 0, 0, 0, DateTimeKind.Utc);
session.Advanced.LuceneQuery<object>().WhereLessThan("LastModified", date); 
```

如果*一定要*自己做，是这样的：

```
session.Advanced.LuceneQuery<object>()
                .Where("LastModified: {NULL TO 2012-12-31T00:00:00.0000000Z}") 
```

Raven 使用与[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)日期时间格式配对的[Lucene 范围查询语法](http://lucene.apache.org/core/3_6_2/queryparsersyntax.html#Range%20Searches)到小数点后 7 位，正如从 with 获得的[往返格式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Roundtrip)提供的那样。`dateTime.ToString("o")`

请注意，您说“小于”，所以我使用了*专有*括号`{ TO }`。如果您想要“小于或等于”，那么您将使用*包含*方括号`[ TO ]`。

`]`如果您包含了结束字符，您在问题中提供的查询将会起作用。但是，它不会是您要查找的内容，因为任何`LastModified`带有时间分量的条目都会在您指定的值之后下降。

另请注意，`LastModified`元数据存储为 UTC。

# c# - 如何在 MVC 中托管多个 IoC 驱动的 WCF 服务？

> ID：15447293
> 
> 赞同：6
> 
> 时间：2013-03-16T08:38:27.453
> 
> 标签：c#, wcf, asp.net-mvc-4, structuremap

我想在**MVC 应用程序**中托管大约 6 个**WCF 服务**，将请求路由到和**`/services/foo``WcfFooService``/services/bar``WcfBarService`**

 **我可以在服务中使用 StructureMap 完成**IoC**，并使用 Jimmy Bogard 在[此处](http://lostechies.com/jimmybogard/2008/07/30/integrating-structuremap-with-wcf/)发布的示例注入我的构造函数依赖项：

Jimmy 的文章很棒，但我正在尝试扩展它以使用**托管在同一个 MVC 应用程序中的多个服务**。本质上，底部的部分是让我头疼的部分：

```
public class StructureMapServiceHostFactory : ServiceHostFactory
{
    public StructureMapServiceHostFactory()
    {
        ObjectFactory.Initialize(x => x.AddRegistry<FooRegistry>());
        //var iTriedThisToo = ObjectFactory.Container;
        //container.Configure(x => x.[etc]);
    }

    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {
        return new StructureMapServiceHost(serviceType, baseAddresses);
    }
} 
```

使用**单个WCF 服务 -***通过*上面显示的 StructureMapServiceHostFactory将 MVC 请求路由到特定 url效果很好 - 但是 - 如果（例如）我`StructureMapServiceHostFactory2`为`/services/bar`调用创建一个，以允许在 MVC 应用程序旋转时使用不同的注册表起来，它似乎依次调用每个工厂，因为它通过 RouteConfig.cs 运行并添加路由，所以最终我没有得到第一个 ServiceHostFactory 应该提供的配置实例。

`Initialize();`如果我打电话或试图抢夺`Container`财产并打电话给它，也没有什么区别`Configure`。

我是否对此一无所知？需要注册表隔离的主要原因是由于不同的 NHibernate 配置，但我*可以*为 NHibernate 配置SessionFactory 和 Session 的命名实例，然后使用单个注册表来解决这个问题。在我看来，我希望 WCF 服务和 MVC 托管能够单独使用它们自己的 IoC 容器，这就是我走这条路的原因。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T15:28:37.050

好的，所以看来唯一能够回答这个问题的人就是我，通过重新思考和“重新设计”解决方案，使问题一开始就不存在。

我现在有一种有效的方式来托管这些服务并使用 StructureMap 维护 IoC，而无需任何冲突的问题。

如果您发现自己处于 SOA 接管的类似位置（SOATO？） - 退后一步是一个好的开始；）**

# sql - INSERT INTO specific ROW - 插入特定行的特定列？

> ID：15447297
> 
> 赞同：1
> 
> 时间：2013-03-16T08:38:52.840
> 
> 标签：sql, sql-server, sql-server-2008, sql-update

我正在使用 SQL Server 2008。我有一个表，其中每行的前三列保持固定，而其他列发生变化。R = 行，C = 列。

```
 C1   C2   C3   C4   C5....
R1:a    b    x    h    l 
R2:p    d    b    r    v 
R3:y    h    d    b    m
..... 
```

C1、C2 和 C3 列中的数据永远不会改变。但有时需要更改 C4、C5 中的数据。

仅更新特定行的列 C4、C5 等的 SQL 查询是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T08:41:24.717

既然您已经提到`c1`,`c2`和`c3`是不可更改的，那么就将其作为搜索特定记录的基础，

```
UPDATE  tableName
SET     c4 = 'newVal',
        c5 = 'newvla2'
WHERE   c1 = 'val1' AND
        c2 = 'val2' AND
        c3 = 'val3' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:45:16.453

这就是一般格式的外观 -

```
Update <<Table Name>> 
set <<ColumnName1>> = <<ColumnValue1>> , 
<<ColumnName2>> = <<ColumnValue2>> Where 
<<Primary Key Column>> = <<Primary Key Value>> 
```

此处表名 = 您的表名

```
Column Name = Your Specific Column Name
Column Value = Your Specific Column Value
Primary Key Column = Your table primary key
Primary Key Value = Value of your table primary key 
```

希望这对您有所帮助。

# javascript - 使用复选框将值发送到控制器

> ID：15447300
> 
> 赞同：0
> 
> 时间：2013-03-16T08:39:19.070
> 
> 标签：javascript, asp.net-mvc

像这样在剃刀视图页面上呈现图像

```
<img id="9" class="thumb" src="/Content/uploads/Jellyfish.jpg">
<img id="10" class="thumb" src="/Content/uploads/Lighthouse.jpg">
<img id="11" class="thumb" src="/Content/uploads/Chrysanthemum.jpg"> 
```

如何在每个图像的侧面放置复选框以将这些图像 ID 发送到控制器以进行进一步操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:00:54.740

您可以编写如下代码：

*html*

```
<div>
<img id="9" class="thumb" src="/Content/uploads/Jellyfish.jpg">
<input type='checkbox' class='sendImage' /></div>
<div>
<img id="10" class="thumb" src="/Content/uploads/Lighthouse.jpg">
<input type='checkbox' class='sendImage' /></div>
<div>
<img id="11" class="thumb" src="/Content/uploads/Chrysanthemum.jpg">
<input type='checkbox' class='sendImage' /></div> 
```

*JS*

```
$(".sendImage").bind("change", function(e){
    var checkbox = $(e.target);
    if(checkbox.is(":checked")){
      var imageId = checkbox.siblings('img').attr("id");
        alert("checked image id :  " + imageId);
        //send image id to your controller for further processing
    }
}); 
```

这是[**工作小提琴**](http://jsfiddle.net/ezWff/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:57:11.033

您可以在服务器上执行此操作：

```
public ActionResult SaveImageId(string imageId)
{
    //Process your image id somewhere

    //If successful 
    return Json(new { success = true }, JsonRequestBehaviours.AllowGet);
} 
```

在客户端：

```
$(".sendImage").change(function(){
    var imageId = $(this).is(":checked") 
        ? $(this).siblings('img').attr("id") 
        : null;
    if(imageId) sendRequest(imageId);
});

//Send the image id to your controller endpoint
function sendRequest(imageId) {
    $.get('@Url.Action('SaveImageId')' + '?imageId=' + imageId, function(){
       //show a loading gif maybe
    });
}

//Your html
<div>
    <img id="9" class="thumb" src="/Content/uploads/Jellyfish.jpg">
    <input type='checkbox' class='sendImage' />
</div>
<div>
    <img id="10" class="thumb" src="/Content/uploads/Lighthouse.jpg">
    <input type='checkbox' class='sendImage' />
</div>
<div>
    <img id="11" class="thumb" src="/Content/uploads/Chrysanthemum.jpg">
    <input type='checkbox' class='sendImage' />
</div> 
```

# android - onItemClickListener()，如何传递点击项的数据？

> ID：15447301
> 
> 赞同：4
> 
> 时间：2013-03-16T08:39:32.053
> 
> 标签：android, list, onitemclicklistener

我正在使用带有列表的 onItemClickListener()。我想将单击的项目的名称和任意数字传递给列表的下一个实例。如何才能做到这一点？编辑：这是课程：

```
 public class ListViewA extends Activity{

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ListView lv= (ListView)findViewById(R.id.listview);

        // create the grid item mapping
        String[] from = new String[] {"col_1"};
        int[] to = new int[] {R.id.item2};

        // prepare the list of all records
        List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
        for(int i = 0; i < 10; i++){
            HashMap<String, String> map = new HashMap<String, String>();
            map.put("col_1", "col_1_item_" + i);
            fillMaps.add(map);
            lv.setOnItemClickListener(onListClick);
        }

        // fill in the grid_item layout
        SimpleAdapter adapter = new SimpleAdapter(this, fillMaps, R.layout.grid_item, from, to);
        lv.setAdapter(adapter);
    }
    private AdapterView.OnItemClickListener onListClick=new AdapterView.OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent,View view, int position, long id)
    {
        Intent i=new Intent(ListViewA.this,ListViewA.class);
        startActivity(i);
    }

};
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T08:43:48.443

以下示例向您展示如何为特定位置传递数据 onItemClick。

```
ListView lv = getListView();

            // listening to single list item on click
            lv.setOnItemClickListener(new OnItemClickListener() {
              public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {

                  // selected item
                HERE YOU GOT POSITION FOR PERTICULAR ITEM

                  // Launching new Activity on selecting single List Item
                  Intent i = new Intent(getApplicationContext(), SingleListItem.class);
                  // sending data to new activity
                  i.putExtra("position", fillMaps.get(position));
                  startActivity(i);

              }
            }); 
```

是的，您需要声明`fillMaps`为全局。

```
public class ListViewA extends Activity{

    List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);...... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T08:53:20.970

```
Intent i=new Intent(ListViewA.this,ListViewA.class);
i.putExtra("Key", fillMaps.get(position));

startActivity(i); 
```

您可以在 onItemClickListner 中使用上述代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:49:55.580

在这种方法中，第三个参数是位置。所以你必须使用这个，例如。您传递给 listView 的 Arraylist 包含 listView 上显示的数据。所以使用这种代码

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
        // TODO Auto-generated method stub
    String data=    mArrlist.get(position);
    } 
```

如果您使用的是 String 类型的 arralist，否则如果您使用的是 getter setter 类的 arraylist，则使用

```
 mArralist.get(potion).getName(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T08:59:56.917

你应该得到项目@paticular 位置

```
HashMap<String, String> item = adapterview.getAdapter().getItem(position); 
```

根据要求检查您的状况，并从中获取数据`item`并进一步处理。

```
Intent i=new Intent(ListViewA.this,ListViewA.class);
i.putExtra("item", item);
startActivity(i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T09:09:23.597

要添加任意数字，您可以使用 java 的 Random 类，如下所示
Random mRandom = new Random(); int 随机 = mRandom.nextInt(mMoveToList.size());

int 类型的随机变量每次返回随机值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-07T10:24:17.113

你可以`getItem(int position)`使用`SimpleAdapter`

1.  将您的 SimpleAdapter 变量`adapter`作为全局变量
2.  在您的 ClickListener 调用中`adapter.getItem(position)`

# ubuntu - ubuntu 12.04.2 lts 中的乘客 nginx 模块服务名称注册

> ID：15447310
> 
> 赞同：2
> 
> 时间：2013-03-16T08:40:48.193
> 
> 标签：ubuntu, nginx, ubuntu-12.04, passenger

我需要在 ubuntu 中将乘客 nginx 模块注册为服务，并且它需要在系统重新启动或关闭的情况下自动启动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T08:19:35.573

最后我找到了解决方案：

```
wget -O init-deb.sh http://library.linode.com/assets/1139-init-deb.sh
mv init-deb.sh /etc/init.d/nginx
chmod +x /etc/init.d/nginx
/usr/sbin/update-rc.d -f nginx defaults

 sudo service nginx start    or sudo /etc/init.d/nginx start
 sudo service nginx restart  or sudo /etc/init.d/nginx restart
 sudo service nginx reload   or sudo /etc/init.d/nginx reload
 sudo service nginx stop     or sudo /etc/init.d/nginx stop 
```

欲了解更多信息，请访问：

[http://library.linode.com/web-servers/nginx/installation/ubuntu-12.04-precise-pangolin#sph_id7](http://library.linode.com/web-servers/nginx/installation/ubuntu-12.04-precise-pangolin#sph_id7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:53:43.177

Phusion Passenger for Nginx 手册中有一个部分：[http ://www.modrails.com/documentation/Users%20guide%20Nginx.html#nginx_init_script](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#nginx_init_script)

# php - 80行数据，第一次选择1-20行，第二次选择21-30行

> ID：15447317
> 
> 赞同：0
> 
> 时间：2013-03-16T08:41:46.103
> 
> 标签：php, mysql, select

我有一个包含带有时间戳的行的表。

通常，如果我想根据时间获取最新的 20 行。我用：

```
$sql = "SELECT * 
    FROM comment 
    ORDER BY time DESC 
    LIMIT 20"; 
```

但是现在，我想在最新的 20 行和`LIMIT`10 行之后获得最新的评论。这意味着第 21-30 行。（当然，一切都根据时间戳）

我怎样才能使用 MySQL 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:44:30.733

MySQL 有一个内置的偏移量，可以与 LIMIT 一起使用：

```
$sql = "SELECT * FROM comment ORDER BY time DESC LIMIT 10, 20"; 
```

另外，请参阅此 SO 帖子：[MySQL LIMIT/OFFSET：获取除第一个 X 之外的所有记录](https://stackoverflow.com/questions/5619167/mysql-limit-offset-get-all-records-except-the-first-x)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:02:20.790

```
$sql = "SELECT * FROM comment ORDER BY time DESC LIMIT 20, 10"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T09:46:58.203

希望它会从 21 到 30 条记录中选择

```
sql = "SELECT * FROM comment ORDER BY ID DESC LIMIT 20, 10"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T08:44:40.270

尝试混合限制

```
$sql = "select * from (SELECT * FROM comment ORDER BY time DESC LIMIT 30) as A order by time ASC limit 10"; 
```

其他人发布的 mysql 内置偏移方法看起来更好。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-16T08:44:54.970

有两种选择：

*   获取 30 行并使用 PHP 将结果集拆分为 20 组和 10 组。
*   发送两个查询，一个针对 20 行，一个针对 10 行。

# java - 如何使用 ListView 调用 Activity

> ID：15447320
> 
> 赞同：0
> 
> 时间：2013-03-16T08:41:51.050
> 
> 标签：java, android

我正在使用 Sherlock 片段制作动作栏。我在操作栏中有 ListView，但我的 listview 可以调用活动..请帮助我谢谢.. :)

在这段代码中有一个使用数组列表的列表视图。我想 mylist 可以调用相同的活动。

所以它可以喜欢操作栏中的菜单。当我们点击列表视图时..他可以打电话给活动谢谢..请帮助我！

请更正我的代码..如何使用列表视图中的每个选项调用活动..谢谢..

AppleFragment.java

```
package iqbal.apps.visitkuningan;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.AdapterView.OnItemClickListener;

import com.actionbarsherlock.app.SherlockListFragment;

public class AppleFragment extends SherlockListFragment{

    /** An array of items to display*/
    String apple_versions[] = new String[]{
            "Mountain Lion",
            "Lion",
            "Snow Leopard",
            "Leopard",
            "Tiger",
            "Panther"
    };

    /** An array of images to display*/
    int apple_images[] = new int[]{
            R.drawable.mountainlion,
            R.drawable.lion,
            R.drawable.snowleopard,
            R.drawable.leopard,
            R.drawable.tiger,
            R.drawable.panther
    };

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

        // Each row in the list stores country name, currency and flag
        List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();

        for(int i=0;i<5;i++){
                HashMap<String, String> hm = new HashMap<String,String>();
            hm.put("txt", apple_versions[i]);
            hm.put("img", Integer.toString(apple_images[i]  ) );
            aList.add(hm);
        }

        // Keys used in Hashmap
        String[] from = { "img","txt" };

        // Ids of views in listview_layout
        int[] to = { R.id.img,R.id.txt};

        // Instantiating an adapter to store each items
        // R.layout.listview_layout defines the layout of each item
        SimpleAdapter adapter = new SimpleAdapter(getActivity().getBaseContext(), aList, R.layout.listview_layout, from, to);

     // Getting a reference to listview of main.xml layout file
        ListView listview = AppleFragment.this.getListView();

        listview.setAdapter(adapter);

        // Setting the adapter to the listView
        listview.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, 
                                  View view, int position,long id) {
              // ?? please add code in here to call activity from each option in listview.. T_T or correct my code

              }

            });
        return super.onCreateView(inflater, container, savedInstanceState);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:50:26.510

编辑 setOnItemClickListener 并插入一个条件，根据单击的项目检查项目的位置以及开始和活动。

应该看起来像这样

```
listview.setOnItemClickListener(new OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> arg0,View arg1, int position, long arg3) {
      Intent n = null; 
      switch (position){
         case 0: 
           n = new Intent(getActivity(), Class0.class);
           break;
         case 1: 
           n = new Intent(getActivity(), Class1.class);
           break;
      }
      if(null!=n)
          startActivity(n);
  }
}); 
```

# android - 删除触摸时我想将 Seekbar 设置为零

> ID：15447327
> 
> 赞同：4
> 
> 时间：2013-03-16T08:42:39.840
> 
> 标签：android

我在游戏中使用搜索栏，我希望在用户离开时默认将其设置为零位置

```
 verticalSeekBar=(VerticalSeekBar)findViewById(R.id.vertical_Seekbar);

    vsProgress=(TextView)findViewById(R.id.vertical_sb_progresstext);
   tv1=(TextView)findViewById(R.id.text1);

    verticalSeekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
            setProgress(0);
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            vsProgress.setText(progress+"");
            if(progress==10)
            {
                check();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T18:17:29.617

利用

```
 VerticalSeekBar.setProgress(0); 
```

代替

```
 seekBar.setProgress(0); 
```

# php - Yii 功能测试错误

> ID：15447329
> 
> 赞同：2
> 
> 时间：2013-03-16T08:42:51.493
> 
> 标签：php, unit-testing, yii

所以，我正在学习“Agile web-dev with Yii”一书，该书中的功能测试示例会产生以下错误：

> > 警告：require_once(Symfony/Component/Yaml/autoloader.php)：无法打开流：第 69 行的 D:\web\server\php\pear\PHPUnit\Autoload.php 中没有这样的文件或目录
> > 
> > 调用堆栈：0.0004 326184 1\. {main}() D:\web\server\php\phpunit:0 0.0011 367616 2\. require('D:\web\server\php\pear\PHPUnit\Autoload.php') D :\web\server\php\phpunit:43
> > 
> > 致命错误：require_once()：在 D:\web\server\php\pear 中打开所需的 'Symfony/Component/Yaml/autoloader.php' (include_path='.;D:\web\server\php\pear') 失败\PHPUnit\Autoload.php 第 69 行
> > 
> > 调用堆栈：0.0004 326184 1\. {main}() D:\web\server\php\phpunit:0 0.0011 367616 2\. require('D:\web\server\php\pear\PHPUnit\Autoload.php') D :\web\server\php\phpunit:43

我花了很多时间来修复这个错误，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:01:06.187

我在升级我的 phpunit 时遇到了同样的问题。

这解决了问题：

*梨频道发现 pear.symfony.com*

*梨安装 pear.symfony.com/Yaml*

然后运行：

*梨安装 --alldeps pear.phpunit.de/PHPUnit*

希望这能解决您的问题。

# html - 获取 HTML 元素的 ID 到 Controller

> ID：15447331
> 
> 赞同：1
> 
> 时间：2013-03-16T08:43:26.983
> 
> 标签：html, ruby-on-rails

我在视图中有一个按钮，我想要它在控制器中的 ID，我该怎么做？

请考虑下面的代码：查看：

```
 <%= form_tag :controller => :t_activities, :action => :index , :method => "get" do %>
      <input name="activitybtn" type="submit" class="btn btn-primary" id="m<% scenario.id %>" value="Take Activity"/>
      <% end %> 
```

控制器：

> 定义索引
> 
> @abc = 参数[:id]
> 
> 结尾

我知道我做错了，对Rails一无所知。

还有一件事，指定的方法是“get”，但需要在路由中标识“post”，我怎样才能以最终访问 get“t_activities/index”的方式更改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:13:32.670

您的表单中需要另一个具有`name`“id”属性的字段。像这样，假设我的值是正确的：

```
<input type="hidden" name="id" value="m<%= scenario.id %>" /> 
```

该值将显示`params[:id]`在控制器中。

至于您的第二个问题，如果您只想更改表单方法以匹配路由，只需在上面的示例中更改`method => "get"`为`method => "post"`。如果您更愿意更改路线以匹配表单，这取决于您已经设置的内容。如果是这种情况，请将您的路线文件的相关部分粘贴到您的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:13:23.953

> 在表单隐藏字段标签中传递 id。

* * *

```
 <%= form_tag {:controller => :t_activities, :action => :index }, :method => "get" do %>

    <%= hidden_field_tag "id_name", @scenario.id %>

          <input name="activitybtn" type="submit" class="btn btn-primary"  value="Take Activity"/>
          <% end %> 
```

* * *

> 在控制器中以 params[:id_name] 的形式访问控制器中的该 ID。

# javascript - JavaScript 的 XPath：如何获取元素的属性值？

> ID：15447334
> 
> 赞同：6
> 
> 时间：2013-03-16T08:43:49.940
> 
> 标签：javascript, xpath

我想获取具有特定 id 的特定元素的属性值。例如，我想获取*next*`href`的`a`标签`id`：

 *```
<a href="?page=3" id="next">Next</a> 
```

我知道我可以像这样得到它：

```
console.log(document.evaluate('//a[@id="next"]', document, null, XPathResult.ANY_TYPE, null).iterateNext().href); 
```

但问题是，在我的情况下，属性的名称可能不同，我需要一种通过 xpath 查询指定它的方法。像这样的东西：

```
'//a[@id="next"]/@href' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-03T01:08:33.077

试试这样的事情：

```
document.evaluate('//a[@id="next"]/@href', document, null, XPathResult.ANY_TYPE, null).iterateNext().value; 
```

根据您在 xpath 中指定的元素类型（元素节点、文本节点、属性），`iterateNext()`返回不同类型的对象。在这种情况下，指定 @href 属性，它会返回一个 javascript Attr 对象，其属性`value`包含该属性的值。继续你的例子：

```
<a href="?page=3" id="next">Next</a> 
```

您可以尝试下一个示例：

```
//Returns true
console.log(document.evaluate('//a[@id="next"]/@href', document, 
  null, XPathResult.ANY_TYPE, null).iterateNext() instanceof Attr);

//Returns "?page=3"
console.log(document.evaluate('//a[@id="next"]/@href', document, 
  null, XPathResult.ANY_TYPE, null).iterateNext().value);

//Returns true
console.log(document.evaluate('//a[@id="next"]', document,
  null, XPathResult.ANY_TYPE, null).iterateNext() instanceof Node);

//Returns false
console.log(document.evaluate('//a[@id="next"]', document,
  null, XPathResult.ANY_TYPE, null).iterateNext() instanceof Attr);

//Returns true
console.log(document.evaluate('//a[@id="next"]', document,
  null, XPathResult.ANY_TYPE, null).iterateNext().nodeType === Node.ELEMENT_NODE);

//Returns "Next"
console.log(document.evaluate('//a[@id="next"]', document,
  null, XPathResult.ANY_TYPE, null).iterateNext().textContent);

//Returns true
console.log(document.evaluate('//a[@id="next"]/text()', document,
  null, XPathResult.ANY_TYPE, null).iterateNext() instanceof Node);

//Returns true
console.log(document.evaluate('//a[@id="next"]/text()', 
  document, null, XPathResult.ANY_TYPE, null).iterateNext().nodeType === Node.TEXT_NODE);

//Returns "Next"
console.log(document.evaluate('//a[@id="next"]/text()', document, 
  null, XPathResult.ANY_TYPE, null).iterateNext().nodeValue);
```

```
<!DOCTYPE html>
<html>
<body>
<a href="?page=3" id="next">Next</a>
</body>
</html>
```

一些可以帮助您的链接：

*   [DOM 元素的属性引用](https://developer.mozilla.org/en-US/docs/Web/API/Attr "DOM 元素属性")

*   [节点类型](https://developer.mozilla.org/en/docs/Web/API/Node/nodeType/ "节点类型")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-02T10:30:15.750

您可以使用[Element.attributes 属性](https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes)

`document.evaluate('//a[@id="next"]', document, null, XPathResult.ANY_TYPE, null).iterateNext().attributes['href'].value`

或[getAttribute() 方法](https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute)

`document.evaluate('//a[@id="next"]', document, null, XPathResult.ANY_TYPE, null).iterateNext().getAttribute('href')`*

# build - maven 在每次运行“安装”目标上下载文件称为

> ID：15447342
> 
> 赞同：0
> 
> 时间：2013-03-16T08:44:42.453
> 
> 标签：build, maven-3

我在我的项目中使用 appfuse-spring 2.2.snapshot 工件。我正在使用 maven 是 3 。

当我每次运行 maven target 'install' 时，下载相同的 jar 和依赖文件。

我怎样才能避免一次又一次地下载相同的文件。

例如下载： http: [//oss.sonatype.org/content/repositories/appfuse-snapshots/org/appfuse/appfuse-web/2.2.2-SNAPSHOT/maven-metadata.xml](http://oss.sonatype.org/content/repositories/appfuse-snapshots/org/appfuse/appfuse-web/2.2.2-SNAPSHOT/maven-metadata.xml)

我不想再次下载 jar 文件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:49:40.200

为什么它会一次又一次地下载？如果它总是在下载，则可能有问题，因为一旦库在您的本地存储库中，除非依赖项发生更改，否则它不需要下载任何内容。

如果要禁用下载，请在命令中使用`-o`(offline) 选项：`mvn`

```
mvn install -o 
```

更多：[Maven 命令行选项](http://www.sonatype.com/books/mvnref-book/reference/running-sect-options.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:56:35.663

问题是您下载了快照。Maven 检查每个构建的快照依赖项（如果需要下载它）。请避免依赖快照。请在发布存储库中找到您的部门： [https ://oss.sonatype.org/content/repositories/appfuse-releases/](https://oss.sonatype.org/content/repositories/appfuse-releases/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T10:46:50.407

老问题，但可能的解决方案是检查 repo 的“updatePolicy”，它可能设置为“always”。

# ruby - Rails 应用程序之间的数据交换

> ID：15447344
> 
> 赞同：2
> 
> 时间：2013-03-16T08:44:46.930
> 
> 标签：ruby, ruby-on-rails-3

出于学习的目的，我开发了两个 Rails 应用程序 - 一个类似于书店，用户可以去那里购买书籍，另一个类似于送货公司，提供这些书籍。

这个想法是用户在书店订购书籍，并将交付表单数据从该商店发送到交付应用程序。我希望你明白了。例如，这两个应用程序都在生产服务器上（如 heroku）。

有什么建议吗？我在网上找不到任何好的信息。

我的第一个想法是从书店渲染 .json，但是，我怎样才能将这些信息发送到我的交付站点？或者，也许你对我有更好的建议？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:28:06.077

有几种方法可以做到这一点。

### 1\. 网络服务

[这是](http://railscasts.com/episodes/409-active-model-serializers)一个精彩的 railscast，它将帮助您使用 ActiveModel 序列化程序构建基于休息的 JSON API。

这些（[版本控制](http://railscasts.com/episodes/350-rest-api-versioning)/[保护](http://railscasts.com/episodes/352-securing-an-api?view=asciicast)）railscast 将帮助您对 API 进行版本控制和保护。

### 2.消息代理，如[rabbitmq](http://www.rabbitmq.com/)。

[bunny](https://github.com/ruby-amqp/bunny) gem使与 Rabbitmq 交互变得容易。考虑使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:00:12.627

尝试使用[ActiveResource](http://api.rubyonrails.org/classes/ActiveResource/Base.html) ，它可以让您轻松地在多个 Rails 应用程序之间进行通信。

# php - 以相同的形式使用 GET 和 POST

> ID：15447346
> 
> 赞同：0
> 
> 时间：2013-03-16T08:44:55.417
> 
> 标签：php, html

问候。我想通过 GET 方法和一些 POST 方法以表单形式发送我的一些值。我该怎么做 ？这是一个例子。我想制作这种页面，但我想要两个表单都有一个提交按钮。是否可以在某些字段上使用 GET 方法并在某些字段上使用 POST 方法？

```
<html>

<form name="f2" action="a.php" method="POST">
       Name: <input type="text" name ="uname"/><br>
       Password: <input type="password" name ="pass"/><br>
       <input type="submit" >
</form>

<br><br>

<form name="f1" action="a.php" method="GET">
         Fav Movie: <input type="text" name="favmovie"><br>
         Movie rating:<input type="text" name="rating"><br>
         <input type="submit" value="My FAv movie">
</form> 

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:49:21.363

您不能通过 GET 发送某些输入字段的值，而不能通过 PHP 和 HTML 的 POST 发送其他输入字段的值。

如果您添加 JavaScript，您可以将一些输入字段的值添加到表单的操作属性的查询字符串中。但这似乎太麻烦了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T08:50:32.050

HttpRequests 不允许多种请求类型，但是您可以这样做

```
<form method="post" action="answer.php?foo=bar"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:49:06.090

对于相同的提交按钮 -

只有当您使用条件编程开始您的表单标签时才有可能。

即从网络服务器渲染后，它将只显示一个特定提交按钮的表单标签。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T08:50:28.000

第一个问题是，你为什么要这么做？
我认为简单的答案是否定的，表单只能通过一种方法提交，通过 get 或 post

# nsdate - ios中的NSDATE与时区

> ID：15447348
> 
> 赞同：1
> 
> 时间：2013-03-16T08:45:00.113
> 
> 标签：nsdate, nsdateformatter

我有一个字符串 2013-03-17 08:41:16 +0000 我想把它转换成这样的东西 2013 年 2 月 24 日星期日 00:00:00 GMT+0530（印度标准时间） 我成功地做到了 2 月 24 日2013 00:00:00 GMT 0530 印度标准时间。但我希望加号和括号在那里。任何帮助将不胜感激谢谢。我试过以下

```
NSDateFormatter *dateFormatter=[NSDateFormatter new];
        [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss z"];
        NSDate *date=[dateFormatter dateFromString:txtStartDate.text];

        [dateFormatter setDateFormat:@"EEE MMM dd yyyy HH:mm:ss +zzz (zzzz)"];
        NSLog(@"%@",[dateFormatter stringFromDate:date]);

        startDate = [NSString stringWithFormat:@"%@",[dateFormatter stringFromDate:date]]; 
```

# c# - 嵌套gridview问题asp.net

> ID：15447350
> 
> 赞同：0
> 
> 时间：2013-03-16T08:45:05.683
> 
> 标签：c#, asp.net, linq, gridview, datatable

```
 Package_Name      HolidayId Holiday_ID Holiday_Description     Holiday_Date
Package1712200466   8,29,5  1   New Years Day        2013-01-01 00:00:00.000
Package1712200466   8,29,5  3   Holi                 2013-04-27 00:00:00.000
Package1712200466   8,29,5  4   Memorial Day          2013-05-27 00:00:00.000
Package1712200466   8,29,5  5   US Independence Day 2013-07-04 00:00:00.000
Package1712200466   8,29,5  29  Independence Day    2013-08-15 00:00:00.000
Package1366323919   5,4,3   1   New Years Day         2013-01-01 00:00:00.000
Package1366323919   5,4,3   3   Holi                   2013-04-27 00:00:00.000
Package1366323919   5,4,3   4   Memorial Day            2013-05-27 00:00:00.000
Package1366323919   5,4,3   5   US Independence Day 2013-07-04 00:00:00.000
Package1366323919   5,4,3   29  Independence Day    2013-08-15 00:00:00.000 
```

我正在构建一个嵌套的 Gridview 格式

```
 Package1712200466   

  Holiday_ID   Holiday_Description     Holiday_Date
       1        New Years Day          2013-01-01 00:00:00.000
       5      US Independence Day   2013-07-04 00:00:00.000
       29     Independence Day  2013-08-15 00:00:00.000

    Package1366323919

    Holiday_ID   Holiday_Description     Holiday_Date
    1   New Years Day               2013-01-01 00:00:00.000
    3   Holi                        2013-04-27 00:00:00.000
    4   Memorial Day - Last Monday  2013-05-27 00:00:00.000
    5   US Independence Day     2013-07-04 00:00:00.000
    29  Independence Day        2013-08-15 00:00:00.000 
```

整体数据：

```
SELECT Pac.Package_Name, Pac.HolidayId,Hol.Holiday_ID,Hol.Holiday_Description,Hol.Holiday_Date from tblPackage Pac, tblHoliday Hol  WHERE Hol.Holiday_ID IN ('5','29','1','4','3') 
```

我通过以下查询获得了两个包名称：

```
 string sSql = "SELECT Pac.Package_Name, Pac.HolidayId,Hol.Holiday_ID,Hol.Holiday_Description,Hol.Holiday_Date from tblPackage Pac, tblHoliday Hol  WHERE Hol.Holiday_ID IN (" + data + ")";
        dsPackage = bsl.ExecuteReaderQry(sSql);

        dsPac = dsPackage.Tables[0];

        var distinctValues = dsPac.AsEnumerable()
                    .Select(row => new
                    {
                        Package_Name = row.Field<string>("Package_Name"),

                    })
                    .Distinct();

Package1712200466
Package1366323919 
```

如上所述，我如何获得 Gridview 的格式

我正在尝试`RowDataBound`在外部网格中使用以下查询

```
 GridView gvHolidayPackages = (GridView)e.Row.FindControl("gvHolidayPackages");
            if (gvHolidayPackages != null)
            {
                Label lblPackageName = (Label)e.Row.FindControl("lblPackageName");

                var results = from myRow in dsPac.AsEnumerable()
                              where myRow.Field<string>("Package_Name").Equals(lblPackageName.Text)
                              select myRow;

                gvHolidayPackages.DataSource = results;
                gvHolidayPackages.DataBind();

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:43:24.647

查看[这篇](http://progtalk.com/viewarticle.aspx?articleid=54)文章 (asp.net 2.0)，它展示了如何绑定嵌套的 gridview，它可以帮助您入门。

如果您可以使用 ListView ，请通过[这个](http://mattberseth.com/blog/2008/01/building_a_grouping_grid_with.html)。

# ios - iOS - UIImageView 动画收到内存警告

> ID：15447352
> 
> 赞同：1
> 
> 时间：2013-03-16T08:45:11.413
> 
> 标签：ios, animation, memory, uiimageview, memory-leaks

我正在尝试运行两个 UImageView，它们具有多个动画数组，它们根据用户所做的选择加载和制作动画。例如，这是一种方法：

```
-(void)initiateAnimations {

nullAnimation = [NSArray arrayWithObjects:

          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"null0002" ofType:@"png"]],
          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"null0003" ofType:@"png"]],
          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"null0004" ofType:@"png"]],
          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"null0005" ofType:@"png"]],
          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"null0006" ofType:@"png"]],
          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"null0007" ofType:@"png"]],
          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"null0008" ofType:@"png"]],
          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"null0009" ofType:@"png"]],
          [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"null0010" ofType:@"png"]], nil];
} 
```

这是一个`IBAction`调用动画方法：

```
-(IBAction)nullani {
player.animationImages = nullAnimation;
player.animationDuration = 0.50;
player.animationRepeatCount = 1;
[player startAnimating];
} 
```

一开始一切都很好，但请记住，我有大约 5-6 个其他动画数组，大致具有相同大小的图像。它们不是很大，从 12-80k .png 文件不等。当我尝试几次后制作动画时，我在输出中收到此错误：

`2013-03-16 01:34:44.438 [3316:907] Received memory warning.`

收到此消息后，加载的任何新动画都会使应用程序崩溃。我通过 Instruments 运行它并且找不到任何泄漏，并且输出在崩溃时没有给我任何信息。

这里有内存问题吗？我怎样才能摆脱这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:28:15.357

一些想法：

1) 永远不要将超过 1 个动画加载到数组中。停止一个动画并准备开始另一个动画后，删除第一个动画并将观看者看到的图像替换为应该显示的单个图像。如果您可以确定显示的确切图像（并且对此表示怀疑），那么您可以用单个图像替换阵列并且图像不会闪烁。

2）如果你不能做1），那么尝试直接使用Core Animation（你需要做更多的工作），然后自己做动画。这使您可以更好地控制内存使用（您可以在文件系统上缓存图像位图）。

3) 使用 Mac 和 AVFoundation 或 QTKit，从图像制作动画，然后创建您开始和停止的“电影”，而不是图像序列。在这种情况下，您将用电影对象替换捆绑包中的静态图像。

# javascript - 是/否按钮而不是确认（）对话框中的确定/取消？

> ID：15447358
> 
> 赞同：3
> 
> 时间：2013-03-16T08:46:47.663
> 
> 标签：webkit, javascript, air, webkit

在 Adob​​e AIR (HTML/JS) 应用程序中，是否可以显示`Yes`/`No`按钮，而不是`OK`/`Cancel`在`confirm()`对话框中？

任何与[webkit](/questions/tagged/webkit "显示标记为“webkit”的问题")一起工作的东西都应该工作。

这是一个[相关的问题](https://stackoverflow.com/q/823790/1563422)，但所有答案都使用 jQuery，我不想为此添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:52:45.257

我不相信。在 JS 中，`confirm()`被指定为仅使用`OK`和`Cancel`按钮。

如果你想要更复杂的东西，你将不得不制作你自己的对话框，或者使用提供你想要的功能的第三方对话框（是的，很遗憾，包括 jQuery）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:52:33.843

无法自定义`confirm()`对话框。

[Javascript Customize Confirm with "Yes" or "No"](https://stackoverflow.com/questions/6937761/javascript-customize-confirm-with-yes-or-no)有一些建议，但它归结为使用 jQuery 或实现您自己的 jQuery 对话框版本。

# xtext - 带有选定谓词的 xext 语法

> ID：15447369
> 
> 赞同：0
> 
> 时间：2013-03-16T08:48:28.153
> 
> 标签：xtext, xtend, xbase

我正在尝试理解我发现的 xtext 语法（如下）。我有两个问题：

*   XFeatureCall 已返回 XExpression 类型，但这被 {XFeatureCall} 否决了，所以我也可以设置“返回 XFeatureCall”？或者真的有必要这样做吗？
*   第 8 行和第 14 行以“=>”开头。是这些“选择的谓词”还是到目前为止我没有注意到的其他东西？我在 xtext 文档中找不到所选谓词的这种变体。因此，我希望对其应用进行澄清。

xtext 语法：

```
StaticEquals:':=';
XFeatureCall returns XExpression:
    // Same as Xbase...
    {XFeatureCall}
    (declaringType=[JvmDeclaredType|StaticQualifier])?
    ('<' typeArguments+=JvmArgumentTypeReference (',' typeArguments+=JvmArgumentTypeReference)* '>')? 
    (feature=[JvmIdentifiableElement|IdOrSuper]|'class') 
    (=>explicitOperationCall?='(' 
        (
            featureCallArguments+=XShortClosure
          | featureCallArguments+=XExpression (',' featureCallArguments+=XExpression)*
        )? 
    ')')?
    =>featureCallArguments+=XClosure?
    // ... Except with this additional optional clause that allows static members to be set with := operator
    ({XAssignment.assignable = current} StaticEquals value = XAssignment)?; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:16:53.647

**第一个问题**：实际上在这种情况下，您的规则返回 XFeatureCall 但 XFeatureCall 将 XExpression 作为其超类型。例如，如果您有：

```
SomeRule: (parts+=XFeatureCall)* (parts+=XOtherFeatureCall)* 
```

让 XOtherFeatureCall 也扩展 XExpression，parts 是 XExpression 的列表。

**第二个问题**：它是优先级运算符，意味着现在应该解析后面的内容，即使有其他解析方案。看这个经典的例子：

```
if a
  if b
    do;
  else
    doelse; 
```

else 可以解析为内部 if 或外部 if。当然，我们希望它在内部 if 中。设置规则，例如：

```
=>'else' else=ElseExpression 
```

强制语法在找到 else 后立即对其进行解析，而不是返回到也可能消耗 else 的外部规则。所以它解决了一个歧义。

# java - 需要帮助理解这个旋转矩阵数学代码

> ID：15447371
> 
> 赞同：4
> 
> 时间：2013-03-16T08:48:50.443
> 
> 标签：java, opengl, graphics, matrix, transformation

```
private Mat4 calcLookAtMatrix(Vec3 cameraPt, Vec3 lookPt, Vec3 upPt) {
    Vec3 lookDir = Glm.normalize(Vec3.sub(lookPt, cameraPt));
    Vec3 upDir = Glm.normalize(upPt);

    Vec3 rightDir = Glm.normalize(Glm.cross(lookDir, upDir));
    Vec3 perpUpDir = Glm.cross(rightDir, lookDir);

    Mat4 rotMat = new Mat4(1.0f);
    rotMat.setColumn(0, new Vec4(rightDir, 0.0f));
    rotMat.setColumn(1, new Vec4(perpUpDir, 0.0f));
    rotMat.setColumn(2, new Vec4(Vec3.negate(lookDir), 0.0f));

    rotMat = Glm.transpose(rotMat);

    Mat4 transMat = new Mat4(1.0f);
    transMat.setColumn(3, new Vec4(Vec3.negate(cameraPt), 1.0f));

    return rotMat.mul(transMat);
} 
```

此代码生成一个世界到相机矩阵，该矩阵将与 openGL 一起用于渲染。

除了旋转矩阵是如何形成的，我什么都懂。基本上，它放入归一化向量并转置矩阵，然后以某种方式得出一个旋转矩阵。解释那个数学。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T09:38:18.977

变换矩阵将顶点从一个空间变换到另一个空间。假设初始空间是空间 A，最终空间是空间 B。

空间 A 和空间 B 都由[一系列基向量](http://en.wikipedia.org/wiki/Basis_%28linear_algebra%29)定义。所以空间 A 有一些基向量和一个原点。但是，如果您想以数字方式讨论基向量，则必须相对于其他一些空间来讨论它们。否则，这些数字没有意义，因为空格定义了向量中的数字的*含义*。

从空间 A 到空间 B 的变换矩阵是空间 A*相对于空间 B 表示*的基向量。变换的第一列是空间 A 的 X 轴相对于空间 B 的方向。第二列是 A 的 Y 轴，第三列是 A 的 Z 轴。

代码所做的是生成相机空间的基本向量，相对于给定的世界空间（由给定的三个向量定义）。因此，它构建了一个矩阵，该矩阵在相机空间中获取顶点并将它们吐出到世界空间中。

然而，它想要生成的矩阵是从世界空间到相机空间的变换。所以它在之前*反转*了矩阵；A-to-B 矩阵的逆矩阵是 B-to-A 矩阵。有趣的事实：纯旋转矩阵的逆矩阵与它的转置相同，也更容易计算。

# python - 如何更有效地编写此解决方案？

> ID：15447382
> 
> 赞同：1
> 
> 时间：2013-03-16T08:50:49.757
> 
> 标签：python, performance, python-2.7

```
import random

a = [int(1000*random.random()) for i in xrange(10)]
b = [int(1000*random.random()) for i in xrange(10)]
c = [int(1000*random.random()) for i in xrange(10)]
d = dict()
for i in xrange(len(a)):
    for j in xrange(len(b)):
        for k in xrange(len(c)):
            if (i+j+k == 10):
                d[(i,j,k)] = a[i]+b[j]+c[k]

print max(d.values()) 
```

该代码在其中找到最佳的三元组元素，`a,b,c`使其最大化`a[i]+b[j]+b[k]`并`i+j+k=10`保持

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T08:54:28.750

首先，您可以更改循环的边界并摆脱最内层的循环：

```
import random
a = [int(1000*random.random()) for i in xrange(10)]
b = [int(1000*random.random()) for i in xrange(10)]
c = [int(1000*random.random()) for i in xrange(10)]
d = dict()
for i in xrange(10):
    for j in xrange(10 - i):
        k = 10 - i - j
        if k < len(c):
            d[(i,j,k)] = a[i]+b[j]+c[k]

print max(d.values()) 
```

这将运行时间提高了约 4.5 倍：

```
In [2]: %timeit original()
10000 loops, best of 3: 166 us per loop

In [3]: %timeit new()
10000 loops, best of 3: 36.1 us per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T09:22:10.947

由于您实际上并未使用's 键，因此您可以更快地`dict`构建和迭代 a 。`list`但是，由于您实际上并没有对这些值做任何事情，除了调用之外`max`，您可以在进行过程中跟踪最大值，而不是构建和迭代*任何东西*。

修改NPE的解决方案：

```
import random
a = [int(1000*random.random()) for i in xrange(10)]
b = [int(1000*random.random()) for i in xrange(10)]
c = [int(1000*random.random()) for i in xrange(10)]
maxval = 0
for i in xrange(10):
    for j in xrange(10 - i):
        k = 10 - i - j
        if k < len(c):
            val = a[i]+b[j]+c[k]
            if val > maxval:
                maxval = val
print maxval 
```

这使得它比他在 CPython 中的版本快得多，但在 PyPy 中却有*很大的不同。*

```
 OP    HYRY   NPE    AB
CPython 2.7.2    161\.  98.8   46.9   38.0
PyPy 1.9.0       11.8  7.28   7.39   2.46 
```

不用说，首先使用 PyPy 而不是 CPython 比任何人建议的任何微优化都要大得多。

* * *

对于一个真正的问题，你有 1000000 个值而不是 10 个，这是解决它的糟糕方法。

一方面，您可以通过将值保存为值数组`int32`而不是 Python来减少内存使用量（以及因此分页时间、缓存命中等） `list`。完成此操作后，您不妨将其放入 1000000x3 中`numpy.array`。然后你只需要构建一个i+j+k==1000000的掩码数组，应用掩码，并找到其中的最大值。这会将你所有的循环都移到 C 中，我猜它会快 10-30 倍。远不止你从 Python 的微优化中得到的。

但是你可能想去另一个方向。您是否需要列表存在？如果您有一系列数据正在生成/读取/任何延迟，有没有办法在不将整个数据读入内存的情况下做到这一点？看起来您只需要完整的两个列表 - 如果您可以控制第三个到达的顺序，则只需一个。事实上，如果你可以控制第三个的顺序，你只需要生成/读取它的前 10%。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T08:56:15.083

将您的代码包装在一个函数中将提高变量查找速度，并且您不需要第三个循环：

```
import random
def f(random=random.random):
    a = [int(1000*random()) for i in xrange(10)]
    b = [int(1000*random()) for i in xrange(10)]
    c = [int(1000*random()) for i in xrange(10)]
    d = {}
    for i in xrange(len(a)):
        for j in xrange(len(b)-i):
            k = 10 - i - j
            if 0 <= k < 10:
                d[i,j,k] = a[i]+b[j]+c[k]
    return max(d.values())
f() 
```

如果你只想要最大值，你不需要字典。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T09:14:09.477

我认为缓存`random.random`查找可以显着提高性能。

```
import random

def f():
    rand = random.random
    a = [int(1000*rand()) for _ in xrange(10)]
    b = [int(1000*rand()) for _ in xrange(10)]
    c = [int(1000*rand()) for _ in xrange(10)]
    d = dict()
    for i in xrange(10):
        for j in xrange(10 - i):
            k = 10 - i - j
            if 0 <= k < 10:
                d[(i,j,k)] = a[i]+b[j]+c[k]

    print max(d.values())

f() 
```

# c - 尽管安装了 unixODBC，但缺少 sql.h 头文件

> ID：15447386
> 
> 赞同：22
> 
> 时间：2013-03-16T08:52:43.663
> 
> 标签：c, ubuntu, odbc, header-files, unixodbc

我使用的是最新的 Ubuntu 12.04 系统。我安装了 unixodbc（来自 ubuntu repos 的 v2.2.14）、MySQL 及其相关驱动程序。还连接到有效的 DSN。通过发布验证`isql DBName UName passwd`。

我正在尝试编译一个使用 ODBC 与数据库交互的 C 应用程序。我搜索的几乎所有地方似乎都表明我应该在某处安装“sql.h”。A`find / -iname sql.h -print`表明我没有。

所以我的问题是：它在哪里？安装是否出现问题（虽然没有报告错误）？你推荐什么步骤？重新安装？从源代码编译（最新版本？）？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-16T08:57:36.653

您需要安装该`unixodbc-dev`软件包以获取开发头文件。

```
sudo apt-get install unixodbc-dev 
```

这些`-dev`包包含编译和构建程序所需的头文件，这些程序使用这些头文件调用库。库文件本身将是常规包的一部分，即`unixodbc`在您的情况下。

如果你想知道哪个包提供了某个文件，你可以使用`apt-file`：

```
sudo apt-file update
sudo apt-file find sql.h 
```

# java - 如何摆脱 PlaceHistoryMapper

> ID：15447391
> 
> 赞同：3
> 
> 时间：2013-03-16T08:53:09.047
> 
> 标签：java, gwt, gwt-places

有没有办法不定义所有`Places`的`PlaceHistoryMapper`？目前我正在使用`Generator`以自动生成所有地点的列表，但我不确定这是正确的方法。

```
public class AppPlaceHistoryMapper extends AbstractPlaceHistoryMapper<Object> {

    @Override
    protected PrefixAndToken getPrefixAndToken(Place place) {
        if (place instanceof AbstractPlace) {
            return new PrefixAndToken(((AbstractPlace) place).getName(), ((AbstractPlace) place).getTokenizer()
                    .getToken((AbstractPlace) place));
        }
        throw new RuntimeException("Invalid place: " + place);
    }

    /**
     * This method will be overrided by the gwt-generated class, so any changes made in it will not be executed
     * 
     * @see PlaceMapperGenerator
     */
    @Override
    protected PlaceTokenizer<?> getTokenizer(String prefix) {
        AbstractPlace[] places = {/* List of places generated by PlaceMapperGenerator */};
        for (AbstractPlace p : places) {
            if (p.getName().equals(prefix)) {
                return p.getTokenizer();
            }
        }
        throw new RuntimeException("Unable to find place for provided prefix: " + prefix);
    }
} 
```

发电机：

```
public class PlaceMapperGenerator extends Generator {

    // @formatter:off
    private static final String GENERATED_METHOD_TEMPLATE =
            "protected com.google.gwt.place.shared.PlaceTokenizer<?> getTokenizer(String prefix) {" +
                "AbstractPlace[] places = { %s };" +
                "for (AbstractPlace p : places) {" +
                    "if (p.getName().equals(prefix)) {" +
                        "return p.getTokenizer();" +
                    "}" +
                "}" +
                "throw new RuntimeException(\"Unable to find place for provided prefix: \" + prefix);" +
            "}"
    ; // @formatter:on

    @Override
    public String generate(TreeLogger logger, GeneratorContext context, String typeName) {
        JClassType type;
        try {
            type = context.getTypeOracle().getType(typeName);
        } catch (NotFoundException e) {
            throw new RuntimeException(e);
        }
        String implTypeName = type.getSimpleSourceName() + "Impl";
        String implPackageName = type.getPackage().getName();
        ClassSourceFileComposerFactory composerFactory = new ClassSourceFileComposerFactory(implPackageName,
                implTypeName);
        composerFactory.setSuperclass(AppPlaceHistoryMapper.class.getName());
        @SuppressWarnings("resource")
        PrintWriter printWriter = context.tryCreate(logger, implPackageName, implTypeName);
        if (printWriter != null) {
            SourceWriter sourceWriter = composerFactory.createSourceWriter(context, printWriter);
            sourceWriter.print(GENERATED_METHOD_TEMPLATE, getPlaces(context));
            sourceWriter.commit(logger);
            printWriter.close();
        }
        return composerFactory.getCreatedClassName();
    }

    private static String getPlaces(GeneratorContext context) {
        JPackage[] packages = context.getTypeOracle().getPackages();
        List<String> places = new ArrayList<String>();
        for (JPackage p : packages) {
            if (p.getName().startsWith(AbstractPlace.class.getPackage().getName())) {
                JClassType[] types = p.getTypes();
                for (JClassType type : types) {
                    if (type.getSuperclass() != null
                            && type.getSuperclass().getQualifiedSourceName().equals(AbstractPlace.class.getName())) {
                        places.add("new " + type.getQualifiedSourceName() + "()");
                    }
                }
            }
        }
        return places.toString().replaceAll("^\\[|\\]$", "");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:12:45.490

恐怕要弄清楚应用程序中的 Places 和 Tokenizers 是什么，而不用维护它们的列表，唯一的方法就是使用像你正在做的生成器。

无论如何，我不会维护生成器，而是使用`@WithTokenizers`注释并让 GWT 生成您`PlaceHistoryMapper`查看 GWT MVP[开发指南](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces#PlaceHistoryMapper)

```
@WithTokenizers({HelloPlace.Tokenizer.class, GoodbyePlace.Tokenizer.class})
public interface AppPlaceHistoryMapper extends PlaceHistoryMapper {} 
```

我在我的应用程序中所做的是使用脚本来生成活动、视图、地点并基于模板更新 gin 模块和映射器。

# c# - EF - 将现有实体添加到关联时，ObjectStateManager 中已存在具有相同键的对象

> ID：15447393
> 
> 赞同：0
> 
> 时间：2013-03-16T08:53:13.760
> 
> 标签：c#, asp.net, entity-framework, webforms

所以我早些时候发布了一个问题，但没有收到太多反馈。可能是我解释错了。当您的知识有限时，很难提出正确的问题。

总而言之，我有三个 EF 实体：书籍、页面和内容 - 这本书有很多页面，而一个页面只有一个内容。

**我已经有内容条目**，我不需要创建它们，只需在我的 Page 实体中引用它们。所以我想做的是：

```
//Add a new Book
var myBook = new Book();
//Add a new page
var myPage = new Page();

//I'm selecting this one from an asp.net dropdown box
var myContent = contentService.get(id); 

//Connect the page and content
myPage.Content = myContent;

//Add a page to the book
myBook.Pages.Add(myPage) 
```

当我添加第一页时，一切都很好，但是当我尝试在我的书中添加第二页时，我得到了一个例外。如果我注释掉我将 myContent 分配给导航属性 (myPage.Content = myContent) 的行，错误就消失了。

最大的问题是......当页面引用已经存在的数据库条目时，如何添加具有 2 个或更多页面（数据库中的 2 个新条目）的新书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:23:56.847

交换两行：

```
myBook.Pages.Add(myPage);
myPage.Content = myContent; 
```

原因是`myBook.Pages.Add(myPage)`将整个对象图的状态更改`myPage`为`Added`. 因此，如果您先添加页面然后分配内容，则内容仍然存在`Unchanged`。

# spring - Spring AOP：JoinPoint 和 PointCut 有什么区别？

> ID：15447397
> 
> 赞同：97
> 
> 时间：2013-03-16T08:53:47.433
> 
> 标签：spring, aop, aspectj, spring-aop, pointcut

我正在学习面向方面的编程概念和 Spring AOP。我无法理解切入点和连接点之间的区别——它们对我来说似乎都是一样的。切入点是您应用建议的地方，而连接点也是我们可以应用建议的地方。那么有什么区别呢？

切入点的示例可以是：

```
@Pointcut("execution(* * getName()") 
```

什么可以是连接点的示例？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2014-09-11T05:42:14.960

**连接点：**连接点是应用程序的**程序执行中可以插入方面的***候选*点。这个点可以是正在调用的方法、抛出的异常，甚至是正在修改的字段。这些点可以将方面的代码插入到应用程序的正常流程中以添加新行为。

 ****建议：**这是一个对象，其中包括对系统范围内关注点的 API 调用，表示要在点指定的连接点处执行的操作。

**切入点：**切入点定义应在哪些连接点应用相关的建议。建议可以应用于 AOP 框架支持的任何连接点。当然，您不想在所有可能的连接点上应用所有方面。切入点允许您指定希望应用建议的位置。通常，您使用显式的类和方法名称或通过定义匹配的类和方法名称模式的正则表达式来指定这些切入点。一些 AOP 框架允许您创建动态切入点，以确定是否基于运行时决策应用建议，例如方法参数的值。

下图可以帮助你理解Advice、PointCut、Joinpoints。 ![在此处输入图像描述](../Images/1213bf94c565564473baa73a175f6e4c.png)

[来源](https://sites.google.com/site/javatouch/introductiontoaop)

**使用餐厅类比进行解释：** [来源@Victor](http://www.coderanch.com/t/485525/Spring/Difference-Joint-Point-Point-Cut)

当您去餐厅时，您会查看菜单并看到几个可供选择的选项。您可以订购菜单上的任何一项或多项。但在您真正订购之前，它们只是“用餐机会”。一旦你下订单，服务员就会把它送到你的桌子上，这就是一顿饭。

*连接点是菜单上的选项，切入点是您选择的项目。*

Joinpoint 是代码中的一个机会，您可以应用一个方面……只是一个机会。一旦你抓住这个机会并选择一个或多个连接点并将一个方面应用于它们，你就有了一个切入点。

来源[维基](https://en.wikipedia.org/wiki/Join_point)：

> Joinpoint是**程序控制**流中的一个点，控制流可以通过**两条不同的路径**到达（IMO：这就是为什么调用joint）。
> 
> **Advice**描述了修改其他函数的一类函数
> 
> **切入点**是连接点的匹配**P**模式，即连接点的集合。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-18T09:29:31.327

要了解连接点和切入点之间的区别，请将切入点视为指定编织规则，将连接点视为满足这些规则的情况。

在下面的例子中，

```
 @Pointcut("execution(* * getName()") 
```

切入点定义规则说，建议应该应用于任何包中任何类中存在的 getName() 方法，并且连接点将是类中存在的所有 getName() 方法的列表，以便可以将建议应用于这些方法。

（在 Spring 的情况下，规则将仅应用于托管 bean，建议只能应用于公共方法）。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-09-02T20:15:20.227

对 AOP 概念新手的外行解释。这并不详尽，但应该有助于掌握这些概念。如果您已经熟悉基本术语，现在可以停止阅读。

假设您有一个普通的 Employee 类，并且您希望每次调用这些方法时都做一些事情。

```
class Employee{
    public String getName(int id){....}
    private int getID(String name){...}
} 
```

这些方法称为**JoinPoints**。我们需要一种方法来识别这些方法，以便框架可以在它已加载的所有 classes.methods 中找到这些方法。所以我们将编写一个正则表达式来匹配这些方法的签名。正如您将在下面看到的那样，虽然还有更多内容，但这个正则表达式松散地定义了**Pointcut**。例如

```
* * mypackage.Employee.get*(*) 
```

第一个 * 用于修饰符 public/private/protected/default。第二个 * 用于方法的返回类型。

但是，您还需要再说明两件事：

1.  **什么时候**应该采取行动 - 例如在方法执行之前/之后或发生异常
2.  **匹配**时应该做什么（可能只是打印一条消息）

这两者的组合称为**Advice**。

可以想象，您必须编写一个函数才能执行 #2。所以这就是基础知识的样子。

注意：为清楚起见，使用单词*REGEX*而不是`* * mypackage.Employee.get*(*)`. 实际上，完整的表达式进入定义。

```
@Before("execution(REGEX)")
public void doBeforeLogging() {....}   <-- executed before the matching-method is called

@After("execution(REGEX)")
public void doAfterLogging() {....}  <-- executed after the matching-method is called 
```

一旦你开始大量使用这些，你最终可能会指定许多 @After/@Before/@Around 建议。*重复*的正则表达式最终会使事情变得混乱和难以维护。所以我们所做的，只是给表达式命名，然后在 Aspect 类的其他任何地方使用它。

```
@Pointcut("execution(REGEX)") <-- Note the introduction of Pointcut keyword
public void allGetterLogging(){} <-- This is usually empty

@Before("allGetterLogging")
public void doBeforeLogging() {....}

@After("allGetterLogging")
public void doAfterLogging() {....} 
```

顺便说一句，您还希望将整个逻辑包装在一个名为**Aspect**的类中，并且您将编写一个类：

```
@Aspect
public class MyAwesomeAspect{....} 
```

要使所有这些工作正常工作，您必须告诉 Spring 解析类以读取、理解和对 @AOP 关键字采取行动。一种方法是在 spring config xml 文件中指定以下内容：

`<aop:aspectj-autoproxy>`

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2013-10-29T10:09:14.987

**JoinPoints：**这些基本上是实际业务逻辑中您希望插入一些杂项功能的地方，这些功能是必要的，但不是实际业务逻辑的一部分。JoinPints 的一些示例是：方法调用、方法正常返回、方法抛出异常、实例化对象、引用对象等...

**切入点：**切入点类似于用于识别连接点的正则表达式。使用“切入点表达语言”来表达切点。切入点是需要应用横切关注点的执行流程点。Joinpoint 和 Pointcut 是有区别的；连接点更通用，表示我们“可能选择”引入横切关注点的任何控制流，而切入点识别“我们想要”引入横切关注点的连接点。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-03-17T18:16:38.307

将 AOP 语言（如 AspectJ）与数据查询语言（如 SQL）进行比较，

*   您可以将**连接点**（即代码中可以编织方面代码的所有位置）视为具有许多行的数据库表。
*   **切入点**就像一个 SELECT 语句，可以选择用户定义的行/连接点子集。
*   您编入这些选定位置的实际代码称为**建议**。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-10-25T07:49:07.867

# 定义

根据文档：

> **连接点：**程序执行过程中的一个点，例如方法的执行或异常的处理。

您可以将**关节点**视为程序执行中的事件。如果您使用的是 Spring AOP，这甚至仅限于方法的调用。AspectJ 提供了更大的灵活性。

但是你永远不会处理所有事件，因为当你去餐馆时，你不会吃掉菜单上的所有食物（我不认识你，你可能会！但是，我当然不知道）。因此，您可以选择要处理的事件以及如何处理它们。这里是**切入点**。根据文档，

> **切入点**：匹配***连接点***的谓词。

然后你联想到**Pointcut**做什么，还有**Advice**。根据文档，

> **Advice**与***切入点***表达式相关联，并在与切入点匹配的任何连接点处运行。

# 代码

```
package com.amanu.example;

import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;

/**
 * @author Amanuel Nega on 10/25/16.
 */
class ExampleBussinessClass {

    public Object doYourBusiness() {
        return new Object();
    }

}

@Aspect
class SomeAspect {

    @Pointcut("execution(* com.amanu.example.ExampleBussinessClass.doYourBusiness())")
    public void somePointCut() {
    }//Empty body suffices

    @After("somePointCut()")
    public void afterSomePointCut() {
        //Do what you want to do after the joint point is executed
    }

    @Before("execution(* *(*))")
    public void beforeSomePointCut() {
        //Do what you want to do before the joint point is executed
    }

} 
```

# 代码说明

*   `ExampleBusinessClass`当被代理时，是我们的目标！
*   `doYourBusiness()`是一个可能的**关节点**
*   `SomeAspect`是我们涉及多个问题的方面，例如`ExampleBusinessClass`
*   `somePointCut()`是与我们的**关节点匹配的****切点的定义**
***   `afterSomePointCut()`是在匹配**关节点的****切点**之后执行的**建议**`somePointCut` **`doYourBusiness()`*******   `beforeSomePointCut()`也是一个匹配所有方法执行的**建议。**`public`不同`afterSomePointCut`的是，这个使用内联切点声明******

 ****不信可以看[文档。](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-defn)我希望这有帮助

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-03-17T14:18:52.267

两者都与面向方面编程的“位置”有关。

连接点是您可以使用 AOP 执行代码的单独位置。例如“当一个方法抛出异常时”。

切入点是连接点的集合。例如“当 Foo 类中的方法抛出异常时”。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-01-22T19:32:39.347

**JoinPoint**：Joinpoint 是程序执行中执行流程发生变化的点，例如异常捕获、调用其他方法。

**PointCut**：PointCut 基本上是那些可以放置建议（或调用方面）的连接点。

所以基本上**PointCuts 是 JoinPoints 的子集**。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-04-16T09:35:38.460

Spring 中的 AOP 有 {Advisor, Advice, Pointcut, Joinpoint}

如您所知，aop 的主要目的是将横切关注点逻辑（Aspect）与应用程序代码解耦，在 Spring 中实现这一点，我们使用（Advice/Advisor）

切入点用于过滤我们要准确应用此建议的位置，例如“所有方法都以插入开头”，因此将排除其他方法，这就是我们在切入点接口 {ClassFilter 和 MethodMatcher} 中的原因

因此，Advice 是横切逻辑实现，Advisor 是建议加上 PointCut，如果您只使用建议，spring 会将其映射到 Advisor 并使切入点为 TRUE，这意味着不阻塞任何东西。这就是为什么当您只使用建议时，它会应用于目标类的所有方法，因为您没有过滤它们。

但是Joinpoint是程序中的一个位置，当你访问Class对象时，你可以把它想象成反射，然后你可以得到Method对象，然后你可以调用这个类中的任何方法，这就是编译器的工作方式，如果你这样想这个你可以想象Joinpoint。

Joinpoint 可以带有字段、构造函数或方法，但在 Spring 中，我们只有带有方法的 joinpoint，这就是为什么在 Spring 中我们有 (Before、After、Throws、Around) 类型的 Joinpoint，它们都指的是类中的位置。

正如我所提到的，您可以有没有切入点（无过滤器）的建议，然后它将应用于所有方法，或者您可以拥有 [advice + pointcut] 的顾问，它将应用于特定的方法，但没有建议就无法获得像切入点一样的连接点，您必须指定它，这就是为什么 spring 中的建议类型与连接点的类型完全相同，因此当您选择建议时，您会隐式选择哪个连接点。

总而言之，advice 是你的方面到目标类的实现逻辑，这个advice 应该有一个连接点，比如在调用之前、调用之后、抛出之后或调用周围，然后你可以使用切入点过滤你想要应用它的确切位置过滤方法或无切入点（无过滤器），以便将其应用于类的所有方法。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-01-24T09:21:31.900

切入点在 Aspect - 类实现上定义。切入点基本上是指建议中的切入点表达式。

例如，

```
@Before("execution(* app.purchase2.service.impl.*(..))")
public void includeAddOns(RolesAllowed roles) {
..
} 
```

上面的意思是，在调用任何方法（在包“app.purchase2.service.impl”中的类中）之前调用“includeAddOns”方法（由于@Before 建议）

整个注解称为切入点 `@Before("execution(* app.purchase2.service.impl.*(..))")`

联合点是实际的方法调用，它将包“app.purchase2.service.impl”中的方法连接到方面类“includeAddOns()”中的方法。

您可以使用类访问连接点的`org.aspectj.lang.JoinPoint`属性。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-08-18T22:50:38.893

我同意 mgroves 的观点。切点可以被认为是多个关节点的集合。关节点指定可以实施建议的特定位置，其中切入点反映了所有关节点的列表。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-12-29T10:53:42.977

**JoinPoint：**它指定应用程序中将执行 Advice 的点（方法）。

**Pointcut：**它是JoinPoints 的组合，它指定了JoinPoint Advice 的执行位置。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-03T20:32:02.800

**PointCut**`()`是一个注解，您可以在通知应用的范围内声明范围。

相反，**JoinPoint**是一个接口，它是用于所有五个建议的参数。特别是对于**@Around**通知，应用了**ProceedingJoinPoint**（JoinPoint 的子接口），并提供了`.proceed()`方法。所以你可以控制是否让程序继续进行。您还可以更改它的参数。

* * *

## 回答 #14

> 赞同：-5
> 
> 时间：2014-12-05T07:31:25.880

连接点是我们实际放置建议的地方

但切点是连接点的集合。这意味着我们有多少种方式来配置横切逻辑被称为切入点******

# javascript - 如何从 JS 文件中读取（MVC 3，Razor）模型值？

> ID：15447398
> 
> 赞同：0
> 
> 时间：2013-03-16T08:53:48.467
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, razor

我必须在 JS 文件中准备好模型值来编写验证。这可能吗？

这似乎不适用于 JS 文件

```
var name = <%: Model.Name %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T09:26:12.727

It will not work in js file, but you can write it in script tag like this:

```
<script type="text/javascript">
    var name = '<%: Model.Name %>';
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T12:27:18.793

它可能对您有帮助

```
<script type="text/javascript">
var name = @Model.Name ;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T13:53:13.063

您可以将模型放在隐藏字段中，然后在 Js 文件中读取

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T19:34:28.817

你可能有一个标签，它的 id 是你的模型的名称：

```
<tag id='@Model.Name' class="test"></tag> 
```

在 JS 文件中，您可以获取模型的名称，如下所示：

```
var name=$("tag.test").attr("id"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-14T15:59:45.437

我最近写了一篇关于这个主题的博客：[使用部分 Razor 视图生成外部 JavaScript 文件](http://blog.mariusschulz.com/2013/07/07/generating-external-javascript-files-using-partial-razor-views)。

我的解决方案是使用自定义属性 ( `ExternalJavaScriptFileAttribute`)，它按原样呈现部分 Razor 视图，然后在不带周围`<script>`标签的情况下返回它。这使它成为一个有效的外部 JavaScript 文件。

此外，您可能想了解[6 种将 .NET 服务器端数据传递给 JavaScript 的方法](http://blog.mariusschulz.com/2014/02/05/passing-net-server-side-data-to-javascript)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T19:23:04.780

我必须指出，在您的标题中您提到了 Razor，但在问题中您使用的是老式的 aspx 语法。那么您使用的是 Razor 还是网络表单？

在任何情况下，您都应该将您的模型放在单引号中`'@Model.YourField'`或`'<% Model.YourField %>'`与此非常相似。

通过这种方式或其他方式，这是成功回答的问题，可以准确回答您的问题：

[从外部 Javascript 文件访问 ASP.NET MVC 模型数据](https://stackoverflow.com/questions/1735665/accessing-asp-net-mvc-model-data-from-external-javascript-file)

以防万一，这是另一个示例，供您`Model`使用您在问题中描述的旧学校风格来读取值：

[如何在 View 的 javascript 部分访问 ASP MVC 中的 Model.Something 值](https://stackoverflow.com/questions/1618504/how-to-access-model-something-value-in-asp-mvc-at-views-javascript-section)

希望这会有所帮助，如果没有，请告诉我。

# c# - 如何设置 ASP.NET 控件的值

> ID：15447400
> 
> 赞同：1
> 
> 时间：2013-03-16T08:53:56.717
> 
> 标签：c#, asp.net

**一点背景**

我已经建立了自己的本地化机制，基本上是这样的：

*   我有一个 XML 文件，它存储每种语言的所有字符串
*   `Application`应用程序启动时，我正在解析和存储对象中 XML 的值

现在设置**无**asp 控件我正在使用这行代码：

```
<div><%= Application["New-Permission-Role"].ToString() %></div> 
```

但我不能在 ASP.NET 控件上使用这种语法。

例如，我正在尝试本地化`HeaderText`a 的属性`GridView`

```
 <asp:TemplateField HeaderText='<%= Application["Actions"].ToString() %>'> 
```

我知道它与 ASP.NET 相关而不是渲染它

**注意：**我知道我可以在文件中的服务器端填充它`.cs`，但我想知道是否有办法在 aspx 文件上完成它？

* * *

**我已经尝试了以下方法：**

更改`<% = %>`为`<%# %>`增加数据绑定，我得到一个编译错误 `Databinding expressions are only supported on objects that have a DataBinding event. System.Web.UI.WebControls.TemplateField does not have a DataBinding event`。

**解决方案** 我遵循了@roman_m 的建议，并使用[这里](https://stackoverflow.com/questions/11394060/set-templatefield-headertext-dynamic-for-localization) 提到的这篇[文章创建了一个自定义表达式](http://www.4guysfromrolla.com/articles/022509-1.aspx#postadlink)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:03:46.483

尝试替换`=`为`#`触发数据绑定：

```
<asp:TemplateField HeaderText='<%# Application["Actions"].ToString() %>'> 
```

# php - 单个 HTML 表单上的双重操作

> ID：15447401
> 
> 赞同：0
> 
> 时间：2013-03-16T08:53:57.863
> 
> 标签：php, forms, form-submit

我了解我无法对单个表单执行双重操作。我正在使用表单进行登录，并且需要在另一个文件中输入其中一个表单`header.php`。我怎么可能在 PHP 或 JavaScript 中这样做？

如果你们需要参考，这是我的代码：

```
<form id="loginForm" name="loginForm" method="POST" action="<?php echo $loginFormAction; ?>">
    <input type="radio" name="RadioGroup1" value="patient" id="RadioGroup1_0" />
    <input type="radio" name="RadioGroup1" value="clinic" id="RadioGroup1_1" />
    ....
    <input name="login" type="submit" class="loginButton" id="login" value="Log In" />
</form> 
```

该`$loginformaction`变量是登录操作。所以我需要在表单中添加另一个动作，这将帮助我将 radiogroup 输入到另一个文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:59:05.063

如果您知道该操作最初将要执行的页面，则在该操作页面中，只需使用 php[`include_once`](http://php.net/manual/en/function.include-once.php)来包含`header.php`. 然后你仍然可以访问`$_POST`数组`header.php`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:58:40.280

`action`在表单的 -attribute 中给出的脚本中包含 header.php ：

```
include 'header.php'; 
```

# css - CSS 全边框顶部？

> ID：15447407
> 
> 赞同：1
> 
> 时间：2013-03-16T08:55:02.933
> 
> 标签：css, border

我的颜色与其和边框`div`不同。`border-top``left``right`

例子：

```
div{
    width: 100px; height: 100px;
    border-top: blue 20px solid;
    border-left: red 20px solid;
    border-right: red 20px solid;
} 
```

但是边框的角变成了三角形，如下左图所示：

![CSS边框问题](../Images/0a859a2cac27b3f6294682a67b3cdb59.png)

我希望`border-top`像上面的右图一样跨越整个宽度。

有什么技巧可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:01:59.450

这会给你想要的结果：

HTML

```
<div id="a"><div id="b"></div></div> 
```

CSS

```
div#a {
    border-top: blue 20px solid;
    width: 140px;
}
div#b {
    height: 100px;
    border-left: red 20px solid;
    border-right: red 20px solid;
} 
```

# android - 按主键盘后没有隐藏

> ID：15447409
> 
> 赞同：3
> 
> 时间：2013-03-16T08:55:26.160
> 
> 标签：android, android-keypad

我使用以下代码显示键盘

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,
        InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

我使用以下代码隐藏键盘`getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);`

隐藏键盘，以及

也为此尝试过

```
InputMethodManager imm =(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

但是按home键后。应用程序关闭，但屏幕上的键盘保持不变。

请指导我。我究竟做错了什么？

我已经把我的隐藏代码。我把 hide 放进去`onDestroy()`，`onBackPressed()`也`onOptionsItemSelected(MenuItem item)` 对不起我的代码格式。

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mylayout);

    textTv=(EditText)findViewById(R.id.textview1);
    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,
    InputMethodManager.HIDE_IMPLICIT_ONLY);

    if(getIntent().getExtras()!=null)
    {
        Bundle extra=getIntent().getExtras();
        if(extra!=null)
        {
            // code
        }
    }
}

public void onBackPressed() {
    // TODO Auto-generated method stub
    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(noteTv.getWindowToken(), 0);
    }

public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub

    getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

    switch (item.getItemId()) {
    case R.id.menu1:
    //code
    break;
    case R.id.menu2:
    //code
    break; 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T10:09:25.693

尝试

```
@Override
protected void onPause() {
    final InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(noteTv.getWindowToken(), 0);
    super.onPause();
} 
```

# c# - WPF 后台线程

> ID：15447410
> 
> 赞同：-1
> 
> 时间：2013-03-16T08:55:30.607
> 
> 标签：c#, wpf, multithreading

我有 WPF 项目，它基本上只是一个图表。我要实现的是在后台线程中更新我的图表点，但随后我正在创建一个它崩溃的新线程。

```
public void UpdateChart()
{
 ... 
}

Thread newThread = new Thread(UpdateChart());
newThread.Start(); 
```

例外：

> *必须在与 DependencyObject 相同的线程上创建 DependencySource。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:39:23.250

您正面临众所周知的跨线程访问问题。一个线程的对象不能访问另一个线程的对象，因为对象指针在跨线程上下文中无效。您可以有多种解决方案。

*   您可以创建一个可以调用的委托方法。谷歌这个，它会产生很多结果

*   另一种选择是使用线程状态事件，例如完成/进度等。后台工作组件允许进度报告。您可以使用它来更新图表。

*   另一种方法是使用 this.invoke(delegate,params[]) 系统。它将允许您在不同的线程中调用该方法，而不会使您的应用程序崩溃。

通过简单的谷歌搜索，您将获得很多关于 c# 中跨线程 gui 更新的资料。如果您需要更多信息，请告诉我。

# matlab - 在 matlab 中销毁变量时，如何销毁 mex 文件中的内存？

> ID：15447411
> 
> 赞同：2
> 
> 时间：2013-03-16T08:55:51.353
> 
> 标签：matlab, mex

我正在处理 mex 文件中的一些内存并将句柄传回 matlab。有没有办法处理用户清除或删除存储在 matlab 变量中的特定句柄的事件，所以我知道它也可以在 mex 文件中删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T21:15:03.910

听起来您正试图将 MEX 层内管理的分配的生命周期与使用它们的 M 代码级结构的生命周期联系起来。您可能希望将这些原始`uint64`句柄值包装在支持清理回调的 Matlab 数据结构中。

`handle`您可以将它们包装在您定义的 Matlab子类中，并给它一个`delete`调用您`ocl_mex`进行适当清理的方法。`Delete`是一个析构函数，当从 Matlab 工作区中清除对象的最后一个副本时，将自动调用。（一旦你使用了对象，你可以提供与各种 ocl_mex 调用形式相对应的更简洁的方法，更好的显示，也许`*`是使用运算符重载的乘法语法等等。）参见[http://www.mathworks.com /help/matlab/matlab_oop/handle-class-destructors.html](http://www.mathworks.com/help/matlab/matlab_oop/handle-class-destructors.html)了解详情。如果您随后将 mex 函数设置为类中的私有函数，这可以很好地工作。可以轻松地围绕您的 mex 访问添加调试日志记录和健全性检查等。

代码可能看起来有点像这样。

```
class ocl < handle
    properties (SetAccess = private)
        ocl_handle  # the raw uint64 handle the MEX layer works with
    end
    methods
        function out = ocl(mex_handle) # maybe make this private
           out.ocl_handle = mex_handle;
        end
        function delete(obj)
            if ~isempty(obj.ocl_handle)
               ocl_mex(obj.ocl_handle, 'cleanup');
            end
        end
        function out = mat_mult(A, B)
           handle_c = ocl_mex('mat_mult', A.ocl_handle, B.ocl_handle);
           out = ocl(handle_c); # And now the new handle has a cleanup hook, too...
        end
    end
    methods (Static = true)
        function out = allocate(some_args)
            new_handle = ocl_mex([], 'allocate', some_args);
            out = ocl(new_handle);
        end
    end
end 
```

如果你想避免使用类，你也可以将它们粘贴在一个普通的结构中，并使用它`onCleanup`来创建一个回调，当最后一个副本被清除时，它会自动被调用。

问题是您必须确保对句柄的所有访问都通过对象或结构，并且没有任何东西将其弹出并“泄漏”原始句柄值。更容易用对象强制执行。

# javascript - 如何匹配不在引号内的网址

> ID：15447414
> 
> 赞同：0
> 
> 时间：2013-03-16T08:55:59.867
> 
> 标签：javascript, regex, url

这类似于[不在引号中](https://stackoverflow.com/questions/11620250/regex-match-keywords-that-are-not-in-quotes)但在 javascript 中的正则表达式匹配关键字，我有这样的正则表达式：

```
/(https?:((?!&[^;]+;)[^\s:"'<)])+)/ 
```

并且需要用标签替换所有网址，但不是当它们在引号内时，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:25:52.607

您可以使用与参考主题中建议的相同的解决方案。

JavaScript 中的代码片段：

```
var text = 'Hello this text is an <tagToReplace> example. bla bla bla "this text is inside <tagNotToReplace> a string" "random string" more text bla bla bla "foo"';

var patt1=/<[^>]*>(?=[^"]*(?:"[^"]*"[^"]*)*$)/g;
text.match(patt1);
// output: ["<tagToReplace>"]

text.replace(patt1, '<newTag>');
// output: "Hello this text is an <newTag> example. bla bla bla "this text is inside <tagNotToReplace> a string" "random string" more text bla bla bla "foo"" 
```

模式的解释与提议的[FJ](https://stackoverflow.com/a/11620387/1554314)相同：

> ```
> text            # match the literal characters 'text'
> (?=             # start lookahead
>    [^"]*          # match any number of non-quote characters
>    (?:            # start non-capturing group, repeated zero or more times
>       "[^"]*"       # one quoted portion of text
>       [^"]*         # any number of non-quote characters
>    )*             # end non-capturing group
>    $              # match end of the string
> )              # end lookahead 
> ```

# javascript - 通过模板过滤 JSON 对象

> ID：15447421
> 
> 赞同：0
> 
> 时间：2013-03-16T08:56:58.143
> 
> 标签：javascript, json, node.js, backbone.js

我需要根据动态模板过滤 JSON 对象的属性和值（出于安全原因）。这就像通过仅在运行时才知道的掩码查看 JSON 对象。

假设我有这个 JSON 对象：

```
{ "id": "1",
  "foo": [ "1", "2", "3" ],
  "bar": [ "a", "b", "c"],
  "fuzz": [ "y", "x" ]
} 
```

这个模板：

```
{ "id": "",
  "fuzz": [ "y", "z"],
  "foo": ""
} 
```

现在我想得到以下结果（将模板应用到对象上）：

```
{ "id": "1",
  "fuzz": [ "y" ],
  "foo": [ "1", "2", "3" ]
} 
```

过滤的最佳解决方案是什么

1.  只有属性（保持值不变）？
2.  属性和值（如上面的示例）？

笔记：

*   模板和对象之间的属性和值的顺序可能不同
*   我的环境是 NodeJS + BackboneJS
*   A 有很多对象要过滤，所以性能很重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:09:58.003

根据 WiredPrairie 的建议，我将 _.pick() 和 _.intersection() 重写为以下方法：

```
// Loosely based on Underscore.js _.pick() method
function project(obj, tmp) {
    var copy = {};
    var keys = _.keys(tmp);
    _.each(keys, function(key) {
        if (key in obj) {
            var vals = tmp[key];
            if (Array.isArray(vals)) {
                var copy_vals = [];
                // Next lines could be replaced by:
                // cvals = _.intersection(vals, obj[key]);
                _.each(vals, function(val) {
                    if ($.inArray(val, obj[key])!=-1) {
                        copy_vals.push(val);
                    };
                });
                copy[key] = copy_vals;
            } else {
                copy[key] = obj[key];
            };
        };
    });
    return copy;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T09:25:05.877

我不确定，但你可以尝试阅读这个[jQuery.extend](http://api.jquery.com/jQuery.extend/)

# python - Windows 上没有名为 pylab 的模块

> ID：15447422
> 
> 赞同：3
> 
> 时间：2013-03-16T08:57:11.337
> 
> 标签：python, matplotlib

我昨天遇到了这个问题。我看到以下问题：
[No module named pylab](https://stackoverflow.com/questions/13828795/)
[python error: no module named pylab](https://stackoverflow.com/questions/10965336/)

上述两个问题都提供了针对 Linux 而不是 Windows 机器的说明。

 **我听说过用于在 python 中绘图的 pylab 包**的问题。**
我打开外壳并尝试了这个，然后......**

 **```
>>> import pylab

Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import pylab
ImportError: No module named pylab 
```

然后我安装了 matplotlib 和 scipy，但找不到 numpy 的 .exe 文件。

**那么，有人可以**
帮我安装 pylab for python 2.7。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-01-22T08:21:55.697

你只需要安装，matolotlib lib，它就可以正常工作了。我有同样的错误，但解决了。

***点安装 matplotlib***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T08:57:11.337

只有一步。转到以下链接并下载`.msi`文件，然后运行它。这是一个简单的安装，它安装了一个新的 EPD IDLE，它启用了 numpy、scipy 和 pylab。

[环保署包装](http://www.enthought.com/products/epd_free.php)

在此站点上，您可以下载该`.msi`文件。除非您想更新软件包，否则不需要注册。这个 IDLE 是 Python 2.7 的某个版本。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-07-03T06:52:23.063

如果您只想安装 matplotlib 包下的 pylab，以及 windows 中的 numpy 和 scipy，那么您可以通过命令从 pip 卸载当前的（不起作用）

```
 pip uninstall package_name 
```

[然后从这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)获取最新的 numpy、scipy 和 matplotlib 二进制安装程序，选择您的 python 和 windows 32 或 64 位版本。然后将其安装为普通软件安装程序。确保它在安装过程中找到您的 python 版本。就是这个 ！！

安装后，输入python shell

```
import matplotlib.pylab as plt
plt.plot([1,2,3])
plt.show() 
```

这可以确保 matplotlib 正确安装在您的机器上！！**

# graph - 如何使用 Gephi Toolkit 开发交互式图形？

> ID：15447426
> 
> 赞同：1
> 
> 时间：2013-03-16T08:57:43.707
> 
> 标签：graph, preview, interactive, gephi

我正在尝试使用[Gephi Toolkit](http://wiki.gephi.org/index.php/Toolkit_portal)创建图形 Applet 并将其集成到我们的 JavaEE 网站中。但问题是 Gephi Toolkit（预览 API）几乎不支持交互功能。

根据Gephi 论坛上的[这个主题](http://forum.gephi.org/viewtopic.php?f=27&t=2473&p=8179&hilit=preview+interactive#p8179)，应该实现一个鼠标侦听器来处理鼠标事件，例如单击节点。但是，我没弄明白...有人可以帮我吗？

代码：我创建一个类来显示一个随机图（这没问题），然后我添加一个实现**PreviewMouseListener**的新类，并在单击节点时打印一条消息。

```
 /*
    Copyright 2008-2010 Gephi
    Authors : Mathieu Bastian <mathieu.bastian@gephi.org>
    Website : http://www.gephi.org

    This file is part of Gephi.

    Gephi is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    Gephi is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with Gephi.  If not, see <http://www.gnu.org/licenses/>.
     */

    import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.event.MouseEvent;
    import java.awt.event.MouseListener;
    import java.io.File;

    import javax.swing.JFrame;

    import org.gephi.graph.api.GraphController;
    import org.gephi.graph.api.GraphModel;
    import org.gephi.graph.api.NodeIterator;
    import org.gephi.io.generator.plugin.RandomGraph;
    import org.gephi.io.importer.api.Container;
    import org.gephi.io.importer.api.ContainerFactory;
    import org.gephi.io.importer.api.ImportController;
    import org.gephi.io.processor.plugin.DefaultProcessor;
    import org.gephi.layout.plugin.random.Random;
    import org.gephi.layout.plugin.random.RandomLayout;
    import org.gephi.preview.api.PreviewController;
    import org.gephi.preview.api.PreviewModel;
    import org.gephi.preview.api.PreviewProperty;
    import org.gephi.preview.api.ProcessingTarget;
    import org.gephi.preview.api.RenderTarget;
    import org.gephi.preview.types.DependantOriginalColor;
    import org.gephi.project.api.ProjectController;
    import org.gephi.project.api.Workspace;
    import org.openide.util.Lookup;

    import processing.core.PApplet;

    /**
     *
     * @author Mathieu Bastian
     */
    public class PreviewJFrame {

        public void script() {
            //Init a project - and therefore a workspace
            ProjectController pc = Lookup.getDefault().lookup(ProjectController.class);
            pc.newProject();
            Workspace workspace = pc.getCurrentWorkspace();

            //Generate a random graph
            Container container = Lookup.getDefault().lookup(ContainerFactory.class).newContainer();
            RandomGraph randomGraph = new RandomGraph();
            randomGraph.setNumberOfNodes(50);
            randomGraph.setWiringProbability(0.005);
            randomGraph.generate(container.getLoader());

            //Append imported data to GraphAPI
            ImportController importController = Lookup.getDefault().lookup(ImportController.class);
            importController.process(container, new DefaultProcessor(), workspace);
            GraphModel graphModel = Lookup.getDefault().lookup(GraphController.class).getModel();

            //Preview configuration
            PreviewController previewController = Lookup.getDefault().lookup(PreviewController.class);
            PreviewModel previewModel = previewController.getModel();
            previewModel.getProperties().putValue(PreviewProperty.SHOW_NODE_LABELS, Boolean.TRUE);
            previewModel.getProperties().putValue(PreviewProperty.NODE_LABEL_COLOR, new DependantOriginalColor(Color.WHITE));
            previewModel.getProperties().putValue(PreviewProperty.EDGE_CURVED, Boolean.TRUE);
            previewModel.getProperties().putValue(PreviewProperty.EDGE_OPACITY, 50);
            previewModel.getProperties().putValue(PreviewProperty.EDGE_RADIUS, 10f);
            previewModel.getProperties().putValue(PreviewProperty.BACKGROUND_COLOR, Color.BLACK);
            previewController.refreshPreview();

            //New Processing target, get the PApplet
            ProcessingTarget target = (ProcessingTarget) previewController.
                    getRenderTarget(RenderTarget.PROCESSING_TARGET);
            PApplet applet = target.getApplet();
            applet.init();

            //Refresh the preview and reset the zoom
            previewController.render(target);
              RandomLayout layout = new RandomLayout(new Random(),1500);
              layout.setGraphModel(graphModel);
              layout.initAlgo();
              layout.goAlgo();
              layout.endAlgo();
              //Add the applet to a JFrame and display--------------------------------------
              JFrame frame = new JFrame("Test Preview");
              frame.setLayout(new BorderLayout());

              frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
              frame.add(applet, BorderLayout.CENTER);

              frame.pack();
              frame.setVisible(true);
              target.refresh();
              target.resetZoom();
        }

        public static void main(String[] args) {
            PreviewJFrame previewJFrame = new PreviewJFrame();
            previewJFrame.script();
        }
    } 
```

鼠标监听器：

```
 import org.gephi.preview.api.PreviewMouseEvent;
    import org.gephi.preview.api.PreviewProperties;
    import org.gephi.preview.spi.MouseResponsiveRenderer;
    import org.gephi.preview.spi.PreviewMouseListener;
    import org.gephi.project.api.Workspace;
    import org.openide.util.lookup.ServiceProvider;

    @ServiceProvider(service = PreviewMouseListener.class)
    public class AtosPreviewMouseListener implements PreviewMouseListener{
        @Override
        public void mouseClicked(PreviewMouseEvent event,
                PreviewProperties properties, Workspace workspace) {
            System.out.println("I'm clicked!!");
        }
        @Override
        public void mousePressed(PreviewMouseEvent event,
                PreviewProperties properties, Workspace workspace) {}
        @Override
        public void mouseDragged(PreviewMouseEvent event,
                PreviewProperties properties, Workspace workspace) {}
        @Override
        public void mouseReleased(PreviewMouseEvent event,
                PreviewProperties properties, Workspace workspace) {}
    } 
```

非常感谢！

PS：我试着回复了那个话题，但是我的账号还没激活，还以为我注册好几天了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-22T21:32:04.980

我用 gephi 玩了几天，我很确定没有办法点击确切的节点。看起来他们的 API 在构建时并没有考虑到交互性。但是我发现这对于 2D 图形来说效果相对较好。

主类：

```
import java.awt.BorderLayout;
import java.awt.Color;
import javax.swing.JFrame;
import org.gephi.graph.api.*;
import org.gephi.io.processor.plugin.DefaultProcessor;
import org.gephi.preview.api.PreviewController;
import org.gephi.preview.api.PreviewModel;
import org.gephi.preview.api.PreviewProperty;
import org.gephi.preview.api.ProcessingTarget;
import org.gephi.preview.api.RenderTarget;
import org.gephi.preview.types.DependantOriginalColor;
import org.gephi.project.api.ProjectController;
import org.gephi.project.api.Workspace;
import org.openide.util.Lookup;
import processing.core.PApplet;

/**
 * This demo shows basic features from GraphAPI, how to create and query a graph
 * programmatically.
 * 
 * @author Mathieu Bastian
 */
public class TestGraph {

public void script() {
    //Init a project - and therefore a workspace
    ProjectController pc = Lookup.getDefault().lookup(ProjectController.class);
    pc.newProject();
    Workspace workspace = pc.getCurrentWorkspace();

    //Get a graph model - it exists because we have a workspace
    GraphModel graphModel = Lookup.getDefault().lookup(GraphController.class).getModel();

    //Create three nodes
    Node n0 = graphModel.factory().newNode("n0");
    n0.getNodeData().setLabel("Node 0");
    Node n1 = graphModel.factory().newNode("n1");
    n1.getNodeData().setLabel("Node 1");
    Node n2 = graphModel.factory().newNode("n2");
    n2.getNodeData().setLabel("Node 2");

    //Create three edges
    Edge e1 = graphModel.factory().newEdge(n1, n2, 1f, true);
    Edge e2 = graphModel.factory().newEdge(n0, n2, 2f, true);
    Edge e3 = graphModel.factory().newEdge(n2, n0, 2f, true);   //This is e2's mutual edge

    //Append as a Directed Graph
    DirectedGraph directedGraph = graphModel.getDirectedGraph();
    directedGraph.addNode(n0);
    directedGraph.addNode(n1);
    directedGraph.addNode(n2);
    directedGraph.addEdge(e1);
    directedGraph.addEdge(e2);
    directedGraph.addEdge(e3);

    //Count nodes and edges
    System.out.println("Nodes: "+directedGraph.getNodeCount()+" Edges: "+directedGraph.getEdgeCount());

    //Get a UndirectedGraph now and count edges
    UndirectedGraph undirectedGraph = graphModel.getUndirectedGraph();
    GraphView view = undirectedGraph.getView();

    System.out.println("Edges: "+undirectedGraph.getEdgeCount());   //The mutual edge is automatically merged

    //Iterate over nodes
    for(Node n : directedGraph.getNodes()) {
        Node[] neighbors = directedGraph.getNeighbors(n).toArray();
        System.out.println(n.getNodeData().getLabel()+" has "+neighbors.length+" neighbors");
    }

    //Iterate over edges
    for(Edge e : directedGraph.getEdges()) {
        System.out.println(e.getSource().getNodeData().getId()+" -> "+e.getTarget().getNodeData().getId());
    }

    //Find node by id
    Node node2 = directedGraph.getNode("n2");

    //Get degree
    System.out.println("Node2 degree: "+directedGraph.getDegree(node2));

    //Preview configuration
    PreviewController previewController = Lookup.getDefault().lookup(PreviewController.class);
    PreviewModel previewModel = previewController.getModel();

    previewModel.getProperties().putValue(PreviewProperty.SHOW_NODE_LABELS, Boolean.FALSE);
    previewModel.getProperties().putValue(PreviewProperty.NODE_LABEL_COLOR, new DependantOriginalColor(Color.WHITE));
    previewModel.getProperties().putValue(PreviewProperty.EDGE_CURVED, Boolean.FALSE);
    previewModel.getProperties().putValue(PreviewProperty.EDGE_OPACITY, 50);
    previewModel.getProperties().putValue(PreviewProperty.EDGE_RADIUS, 10f);
    previewModel.getProperties().putValue(PreviewProperty.BACKGROUND_COLOR, Color.BLACK);
    previewController.refreshPreview();

    //New Processing target, get the PApplet
    ProcessingTarget target = (ProcessingTarget) previewController.getRenderTarget(RenderTarget.PROCESSING_TARGET);
    PApplet applet = target.getApplet();
    applet.init();
    //Refresh the preview and reset the zoom
    previewController.render(target);
    target.refresh();
    target.resetZoom();

    //Add the applet to a JFrame and display
    JFrame frame = new JFrame("Test Preview");
    frame.setLayout(new BorderLayout());

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(applet, BorderLayout.CENTER);

    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    TestGraph previewJFrame = new TestGraph();
    previewJFrame.script();
}
} 
```

鼠标监听器替代品：

```
import org.gephi.graph.api.Graph;
import org.gephi.graph.api.GraphModel;
import org.gephi.graph.api.Node;
import org.gephi.graph.api.NodeData;
import org.gephi.graph.api.NodeIterable;
import org.gephi.graph.api.NodeIterator;
import org.gephi.preview.api.PreviewModel;
import org.gephi.preview.api.PreviewMouseEvent;
import org.gephi.preview.api.PreviewProperties;
import org.gephi.preview.spi.PreviewMouseListener;
import org.gephi.project.api.Workspace;
import org.openide.util.Lookup;
import org.openide.util.lookup.ServiceProvider;

/**
 *
 * @author ksexton
 */
@ServiceProvider(service = PreviewMouseListener.class)
public class MyMouseListener implements PreviewMouseListener {

public void mouseClicked(PreviewMouseEvent event, PreviewProperties properties, Workspace workspace) {
    System.out.println("(" + event.x + "," + event.y + ")");
    Lookup lookup = workspace.getLookup();
    GraphModel lookup1 = lookup.lookup(GraphModel.class);
    Graph graph = lookup1.getGraph();
    NodeIterable nodes = graph.getNodes();
    NodeIterator iterator = nodes.iterator();
    Node selectedNode = null;
    while (iterator.hasNext()) {
        Node next = iterator.next();
        NodeData nodeData = next.getNodeData();
        float x = nodeData.x();
        float y = -nodeData.y(); // event y is always wrong.
        float z = nodeData.z();
        float size = nodeData.getSize();
        final int minX = Math.round(x - size);
        final int maxX = Math.round(x + size);
        final int minY = Math.round(y - size);
        final int maxY = Math.round(y + size);
        System.out.println("(" + minX + "," + minY+")" + ", (" + maxX + "," + maxY+")");
        if (minX <= event.x && event.x <= maxX
                && minY <= event.y && event.y <= maxY) {
            selectedNode = next;
        }
    }
    if (selectedNode != null) {
        System.out.println("Found a Node!: (" + selectedNode.getNodeData().x()
                + "," + selectedNode.getNodeData().y() + ")");
    }
}

public void mousePressed(PreviewMouseEvent event, PreviewProperties properties, Workspace workspace) {
}

public void mouseDragged(PreviewMouseEvent event, PreviewProperties properties, Workspace workspace) {
}

public void mouseReleased(PreviewMouseEvent event, PreviewProperties properties, Workspace workspace) {
}
} 
```

渲染器：

```
import org.gephi.preview.plugin.renderers.NodeRenderer;
import org.gephi.preview.spi.MouseResponsiveRenderer;
import org.gephi.preview.spi.PreviewMouseListener;
import org.gephi.preview.spi.Renderer;
import org.openide.util.lookup.ServiceProvider;

/**
 *
 * @author ksexton
 */
@ServiceProvider(service = Renderer.class)
public class NodeRenderer2 extends NodeRenderer implements MouseResponsiveRenderer {

public boolean needsPreviewMouseListener(PreviewMouseListener previewMouseListener) {
    return true;
}

} 
```

如果有人有更好，更不容易出错的方式，我想知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T06:46:53.423

事实上，您需要一个渲染器才能使用 PreviewMouseListener。我认为这个话题会对你有很大帮助。顶部来自Gephi论坛。不要忘记为您的渲染器实现 MouseReseponsiveRenderer。在 render 方法中绘制你的画。

# php - Magento：如何从 tabs.phtml 中输出 current_category id

> ID：15447427
> 
> 赞同：0
> 
> 时间：2013-03-16T08:57:47.170
> 
> 标签：php, magento, e-commerce

我已经能够在大多数其他模板页面上输出类别和产品数据，但我仍然无法在 tabs.phtml 中这样做。我尝试了以下方法，其中包括许多其他方法 - 均未成功：

```
$currentCategory = Mage::registry('current_category');
$currentCategoryId = $currentCategory['id']; 
```

和

```
$currentCategoryId= Mage::getModel('catalog/category')->load($this->getCategoryId()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:50:24.393

```
$currentCategory = Mage::registry('current_category');
$currentCategoryId = $currentCategory->getId(); 
```

或者你可以像下面这样

`$currentCategoryId = $currentCategory->getData('id');`

如果注册表有类别会话，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:14:44.187

```
$currentCategory = Mage::registry('current_category');

var_dump($currentCategory->debug());
exit; 
```

这将打印 currentcategory 对象。从这里您可以确定所有变量将由`getdata('variablename')`.

`$currentCategoryId = $currentCategory->getData('id');`

肯定会工作。

我建议`->debug()`使用函数，因为该函数提供了更多详细信息，可用于在使用 Magento 时进行调试和总结。

# php - 使用while循环显示所有图像。但它不起作用

> ID：15447428
> 
> 赞同：-1
> 
> 时间：2013-03-16T08:58:04.143
> 
> 标签：php, mysql

使用 DB 中的循环显示所有图像。这是我的代码。图像以咬合格式保存到数据库。无法使用循环检索和显示所有图像。例如 img1、img2、img3 等...有人知道我可能做错了什么吗？

```
$username = "root";
$password = "123";
$host = "localhost";
$database = "test";
@mysql_connect($host, $username, $password) or die("Can not connect to database:      ".mysql_error());
@mysql_select_db($database) or die("Can not select the database: ".mysql_error());
$query = mysql_query("SELECT * FROM tbl_images");
while($row = mysql_fetch_array($query))
{
header('Content-type: image/jpg');
$content = $row['image'];
echo $content;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:15:14.023

您可以通过执行以下操作以 HTML 格式输出图像

```
while($row = mysql_fetch_array($query))
{
   echo '<img src="data:image/jpg;base64,'.base64_encode($row['image']).'" /><br />';
} 
```

由于您将以二进制格式从数据库中获取图像，因此您可以简单地将它们[编码为 Base64](http://php.net/manual/en/function.base64-encode.php)并将它们发送到浏览器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:32:26.530

用这个简单的方法，

```
while($row = mysql_fetch_array($query))
{
$content = $row['image'];
echo "<img src='path/.$content'>";
} 
```

# php - jQuery 移动导航到完整的网站中断

> ID：15447430
> 
> 赞同：1
> 
> 时间：2013-03-16T08:58:13.740
> 
> 标签：php, jquery, mobile, jquery-mobile

我正在使用 jQuery mobile 向用户显示我的数据库的修改内容，在那个移动版本中，我有一个指向完整网站的链接，但是每当我点击它时，AJAX 加载器图像都会一直加载，我手机版被屏蔽了。我使用 PHP`header("url: ....");`重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:28:01.220

使用属性 data-ajax="false" 解决了问题`<a href="..." data-ajax="false">Back to full version</a>`

# php - 找不到源文件。请检查您的路径

> ID：15447435
> 
> 赞同：3
> 
> 时间：2013-03-16T08:58:44.563
> 
> 标签：php, codeigniter, ftp

我尝试使用 codeigniter ftp 类上传文件。

```
$this->load->library('ftp');

    $config['hostname'] = 'www.domain.com';

    $config['username'] = 'xxxxxxxxx';

    $config['password'] = 'xxxxxxxx';

    $config['port']     = 21;

    $config['passive']  = FALSE;

    $config['debug']    = TRUE;

    $this->ftp->connect($config);

    $this->ftp->upload('C:\Users\SYSTEM2\Desktop\checking\ash.jpg\' ,  base_url().'uploads/myfolder/ash.jpg/');

    $this->ftp->close(); 
```

但显示此错误

“找不到源文件。请检查您的路径。” 任何人请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:45:16.470

试试`$this->ftp->upload('C:/Users/SYSTEM2/Desktop/checking/ash.jpg' , '/www/uploads/myfolder/');`它对我有用祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:36:38.637

取而代之的是

```
$this->ftp->upload('C:\Users\SYSTEM2\Desktop\checking\ash.jpg\' ,  base_url().'uploads/myfolder/ash.jpg/'); 
```

利用

```
 $this->ftp->upload('C:\Users\SYSTEM2\Desktop\checking\ash.jpg','/www/uploads/myfolder/ash.jpg'); 
```

但是您应该知道 ftp 服务器中的根路径，有时它是“/www/yourdomen/”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T01:39:47.203

Codeigniter ftp 类首先检查文件是否存在然后执行上传你看看 codeigniter 文件夹**system\libraries\FTP.php**行 238中的代码

```
if ( ! file_exists($locpath))
{
 $this->_error('ftp_no_source_file');
 return FALSE;
} 
```

根据[php.net](http://us2.php.net/file_exists)站点，如果您将 file_exists 与 Web 服务器外部的本地文件一起使用，则本地文件路径的格式应为 //computername/share/filename。

这意味着您必须将文件放在具有公共权限的共享文件夹中。

如果您设置正确并确保权限允许网络用户访问该文件，那么它可能会起作用。

我建议使用表单而不是手动编写文件路径，然后您可以编写如下代码：

```
$file=$_FILES["userfile"]["name"];
$this->ftp->upload($file ,  './upload','ascii', 0775); 
```

# android - Android，如何选择性地包含基于 API 级别的内容

> ID：15447436
> 
> 赞同：0
> 
> 时间：2013-03-16T08:58:56.673
> 
> 标签：android, api

我有一个可以打开各种子活动的应用程序。每当移动设备处于 API 级别 11+ 时，我想显示一个按钮来打开一个打开日历的活动。

但是，例如在设计活动 XML 时，出现错误：

> 查看需要 API 级别 11（当前最低为 8）：activity_calendar.xml

有什么方法可以标记 xml/code 文件，它们应该只对 API 级别 11 可用/编译...然后编写基于 API 级别的代码，包括显示/打开需要 API 级别 11 的日历活动的选项？

这是一个普遍的问题，尽管在我的情况下，它是由想要使用 CalendarView 引起的。（我知道我目前正在考虑一些 Apache 2.0 版许可证日历替代方案。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:40:27.217

对于代码：

```
if (Build.VERSION.SDK_INT > Build.VERSION_CODES.GINGERBREAD) { 
    // do stuff for newer than Gingerbread
} 
```

对于 XML

```
/res/layout-v8 
```

根据需要更改版本。

# java - 服务层：如果查询参数为空，返回什么？

> ID：15447437
> 
> 赞同：0
> 
> 时间：2013-03-16T08:59:00.507
> 
> 标签：java, nullpointerexception, illegalargumentexception, method-parameters

假设我们有一个服务方法`getById(Long id)`，它根据它的 id 返回一个实体。如果 id 为空，正确的操作是什么？

抛出 IllegalArgumentException？

抛出 NullPointerException？（番石榴 Preconditions.checkNotNull 这样做）

返回空？

既然永远不可能有 id == null 的实体，那么返回 null 似乎不是那么糟糕？我的意思是如果 id 不存在，该方法无论如何都会返回 null 。

先决条件是很好的单行代码，但在这种情况下抛出 NullPointerException 似乎很极端。

这里的“最佳实践”是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:09:28.743

将 null 传递给此类方法表示存在错误。没有人会想要找到具有空 ID 的实体，因为这样的东西不可能存在。所以这可能意味着在 UI 层中存在绑定问题，或者调用者忘记在其表单中添加隐藏的 ID 字段，或者其他什么。

返回 null 会隐藏错误，或者使其更加模糊。抛出异常及早发现错误，并带有明确的错误消息，允许及早修复它，并使应用程序更加健壮。

为 null 的不可为 null 参数的约定是抛出 NullPointerException。这就是我要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:08:31.240

没有记录`id`，因此如果给定一个没有记录`null`的“有效”，该方法应该做任何事情。`id`这就是最小意外原则。消费者将针对未找到的情况进行编码，因此应将其覆盖。

有一件事，`id`一个还没有被持久化的新记录是什么？这可能会导致你偏离你的行为，如果它碰巧是`null`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:02:32.423

总是最好使用`NullPointerException`，因为在实体集合中没有找到 ID 中的值。

# c - （编辑）保持线程活着而不改变主

> ID：15447438
> 
> 赞同：0
> 
> 时间：2013-03-16T08:59:03.233
> 
> 标签：c, pthreads

我希望能够启动一个 pthread 并且即使 main() 完成它也会保持活动状态。

我无权访问 main()。

正常的行为是，如果一个线程启动并且没有从 main() 中“join_thread”，它将在 main 完成运行时终止。

在java中，默认是被调用的线程将保持活动状态。只有当所有线程都完成时，该进程才会终止。不需要显式调用 java“join_thread”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:05:49.170

你可以`main()`用 a[`pthread_exit(..)`](http://man7.org/linux/man-pages/man3/pthread_exit.3.html)而不是a 来结束你的`return 0`。此函数调用不返回。这样，您的主线程将退出，但您的进程不会完成。

当所有线程完成或被`exit(..)`调用时，该过程将结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:06:48.697

您可以尝试玩`atexit`功能。

```
static pthread_t thread_ids[128];
static size_t    thread_count;
static pthread_mutex_t thread_mutex = PTHREAD_MUTEX_INITIALIZER;

static void join_all_threads()
{
    size_t i;
    for (i = 0; i < thread_count; i++)
    {
        pthread_join(&thread_ids[i], NULL);
    }
    thread_count = 0;
} 
```

代码中的某处：

```
...
atexit(join_all_threads);
... 
```

在线程代码中：

```
void *my_thread_fn(void *arg)
{
    pthread_mutex_lock(&thread_mutex);
    thread_ids[thread_count++] = pthread_self();
    pthread_mutex_unlock(&thread_mutex);

    ...
} 
```

编辑：添加 on_exit

如果你碰巧有`on_exit`功能，那么它会变得更简单：

```
void my_thrad_join(int code, void *arg)
{
    pthread_join((pthread_t)arg);
}

void *my_thread_fn(void *arg)
{
    on_exit(my_thread_join, (void*)pthread_self());
} 
```

# java - 找不到 Big O 符号库

> ID：15447442
> 
> 赞同：0
> 
> 时间：2013-03-16T08:59:25.957
> 
> 标签：java, big-o

有没有计算大 O 符号的库，特别是对于 Java 语言？

我听说由于停止问题而无法实施。但是这个意见之后是如何“手动”计算它的解释。

有没有自动计算的库？

# c# - 资源争用 - 不总是使用锁？

> ID：15447443
> 
> 赞同：1
> 
> 时间：2013-03-16T08:59:30.083
> 
> 标签：c#, .net, multithreading

*我看了杰弗里·里希特的[**视频**](http://www.youtube.com/watch?v=KzDShvKbEMs#t=29m10s)（点击查看确切的线路），他说*：

> 在 Event-wait-handles 或 Semaphore 等上使用 Monitor.Enter 和 Monitor.Lock 总是更好，因为它们（monitor.X）**使用内核对象**，但只有在存在争用时**才会使用它们。****如果**没有争用，他们就不会使用这些对象。

我可能在这里遗漏了一些东西，但是当我这样做时：

```
lock(myObj)
{
 ...
} 
```

我**认为**可能有不止一个线程想要进入临界区。
那么，根据上面的信息，如果没有争用，锁就不会被使用？（如果另一个线程即将进入 1 ms 后怎么办？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:43:47.257

是的，Monitor 类在 CLR 中得到了很好的优化。如果没有其他线程已经拥有监视器，这是*非常便宜的。*您甚至不需要为额外的存储付费，锁定状态存储在 Object 中的一个字段中，每个对象都已经可用，它是对象头的一部分。

Monitor.Enter() 方法通过首先检查锁是否已由同一线程拥有来避免输入操作系统代码。这使它可重入，如果是这种情况，它只会增加锁计数。接下来，它尝试使用相当于 Interlocked.CompareExchange() 的等价物来获取锁，这是任何处理器上非常便宜的原语。它的 x86 版本值得注意的是实际上根本没有使用总线锁，您可以在[这个答案](https://stackoverflow.com/a/3855824/17034)中看到它的代码。

如果这不起作用，那么操作系统需要参与进来，因为现在重要的是它可以进行线程上下文切换以在释放锁时唤醒线程。Windows 非常倾向于选择一个正在等待操作系统同步对象的线程，以确保它尽快重新开始运行。底层对象是一个简单的事件，一个非常便宜的 OS 对象。它还照顾*公平*，等待线程被放入队列并以先进先出的顺序释放。[我在这个答案](https://stackoverflow.com/a/14923685/17034)中记录了底层 CLR 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T10:58:10.093

该`lock`语句只是使用`Monitor.Enter`和`Monitor.Exit`作为其实现的语法糖。

`Monitor`函数本身是使用[条件变量](http://en.wikipedia.org/wiki/Condition_variables)实现的。它们的实现意味着它们不需要分配内核对象，除非确实存在对锁的争用。当这种情况发生时，他们必须继续分配一个内核对象。

即使存在锁争用，它们也不会立即分配内核对象。相反，他们“旋转”（只是在一个紧密的循环中坐了一会儿），希望锁变得自由。只有当它没有变得空闲时，它才会继续分配/使用内核对象。

请注意，一些新的同步类，例如[ManualResetEventSlim](http://msdn.microsoft.com/en-us/library/system.threading.manualreseteventslim.aspx)也采用这种方法。（通常，任何末尾带有“Slim”的同步类都会这样做。）

另[请参阅此线程](https://stackoverflow.com/questions/5111779/lock-monitor-internal-implementation-in-net)。

直接回答您的问题`lock`：是的，如果没有争用，或者争用只持续很短的时间，则不会为了使用内核对象而转换到内核模式。只有当争用持续超过很短的时间时，才会转换到内核模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T11:37:20.417

> 那么，根据上面的信息，如果没有争用，锁就不会被使用？（如果另一个线程即将进入 1 ms 后怎么办？）

正确的。然后是争用，另一个线程将不得不进入内核。此外，拥有锁的线程在解锁时也必须进入内核。

操作看起来像这样：

锁：

1.  尝试以原子方式将用户空间锁变量从解锁设置为锁定。如果我们这样做，停下来，我们就完成了。

2.  增加用户空间争用计数。

3.  将内核空间锁设置为锁定。

4.  尝试以原子方式将用户空间锁变量从解锁设置为锁定。如果我们这样做，减少用户空间争用计数并停止，我们就完成了。

5.  块在内核上的内核锁。

6.  转到第 3 步。

开锁：

1.  以原子方式将用户空间锁定变量从锁定设置为解锁。

2.  如果用户空间争用计数为零，停止，我们就完成了。

3.  将内核锁设置为解锁。

请注意，如果没有争用，锁定操作仅涉及步骤 1，而解锁操作仅涉及步骤 1 和 2，所有这些都发生在用户空间中。

# java - Tomcat 中的 ResourceLink 元素不起作用

> ID：15447449
> 
> 赞同：1
> 
> 时间：2013-03-16T09:00:06.740
> 
> 标签：java, jakarta-ee, tomcat7, jndi

我正在使用 apache-tomcat-7.0.35。我在 server.xml 中定义了一个环境变量，如下所示

```
<GlobalNamingResources>

        <Environment name="sam" 
                 value="D:\AppServers\apache-tomcat-7.0.35\conf\sample.xml"
                 type="java.lang.String" override="true"/>

  </GlobalNamingResources> 
```

我在 context.xml 的上下文元素中使用 ResourceLink 元素

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/Practice_1" docBase="/Practice_1"
    crossContext="true" reloadable="true" debug="1">
<ResourceLink name="sam" global="sam" type="java.lang.String"/>

</Context> 
```

当我尝试在代码中使用这个值时

```
 Context initCtx = new InitialContext();
        String configPath = (String)initCtx.lookup("sam"); 
```

它的投掷`javax.naming.NameNotFoundException.javax.naming.NameNotFoundException: Name [sam] is not bound in this Context. Unable to find [sam].`

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-23T07:57:34.310

tomcat jndi 具有默认名称空间“java:comp/env”。

将您的代码修改为

```
Context initCtx = new InitialContext();
String configPath = (String)initCtx.lookup("java:comp/env/sam"); 
```

或者

```
Context initCtx = new InitialContext();
Context rootCtx = (Context) initCtx.lookup("java:comp/env");
String configPath = (String)rootCtx.lookup("sam"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:51:31.787

如果我没记错的话，你不需要修改 server.xml 。

修改后的 context.xml

```
<Resource auth="Container"            java.naming.factory.initial="org.jnp.interfaces.NamingContextFactory" 
factory="de.example.CXIResourceLocator"
name="bean/CXIResourceLocator"
type="de.example.Bean"/> 
```

web.xml

```
<resource-env-ref>
    <description>
        Connection pooling.
    </description>
    <resource-env-ref-name>bean/CXIResourceLocator</resource-env-ref-name>
    <resource-env-ref-type>
        de.example.Bean
    </resource-env-ref-type>
</resource-env-ref>

bean/CXIResourceLocator should match in both context and web xmls. 
```

由于我不知道您这样做的目的，因此我无法为您提供更多帮助。:-(

点击此链接了解更多详情。阿帕奇给出了很好的例子。

希望这有帮助。 [http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html)

# c# - Unitests 和 VS2012 Update 2 CTP 4 的问题

> ID：15447453
> 
> 赞同：3
> 
> 时间：2013-03-16T09:00:48.443
> 
> 标签：c#, unit-testing, visual-studio-2012

由于昨天安装了新的 CTP4，我无法再次运行单元测试。当我启动它们时，VS 编译它们，然后它们保持在“待定”状态，没有任何反应。当我尝试调试它们时也会发生同样的情况。这是一个已知问题还是有人帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:16:49.877

安装 VS update 2 ctp 4 后，我遇到了类似的问题，但仅使用 resharper 测试运行器。使用 VS 测试运行程序有效。

我在推特上抱怨，JetBrains 的某个人把我发到了这里：

[http://youtrack.jetbrains.com/issueMobile/RSRP-339987](http://youtrack.jetbrains.com/issueMobile/RSRP-339987)

因此，这是一个已知问题并正在进行修复。

不知道这是否也是您的问题，因为您没有指定您正在使用 resharper，但我只是想分享它。我还没有足够的代表发表评论:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:44:41.877

我有同样的问题。一种解决方法是使用开发人员命令提示符（将其输入到开始菜单中）并将`cd`您的测试项目输出并运行

```
mstest /testcontainer:YourTest.dll 
```

它将打印所有测试，然后在最后打印一些统计信息。您可以从测试项目的输出文件夹将结果加载到测试结果窗口中的 VS2012 中。

# android - Sqlite 将多行选择为单行

> ID：15447463
> 
> 赞同：2
> 
> 时间：2013-03-16T09:02:32.367
> 
> 标签：android, sqlite

我需要一个查询来选择一堆条目，然后用这些条目将一堆行选择成一行。下面显示了一个典型的条目，以及一个典型的结果需要看起来像什么。

```
table1
id
-------
3     

table2
id      value       table1
--------------------------
5       value1      3
6       value2      3

table3
id      value       table1
-------------------------
9       value3      3
10      value4      3

table4
id      table1
---------------
14      3
15      3

table5
id      value       table4
-------------------------------
19      value5      14
20      value6      14
21      value7      15

result
result1 result2     result3     result4
------------------------------------------------------
3       value1      value3      value5, value6; value7 
```

只需要表 1 和表 2 的第一个结果。表 2 通常可以为 null，value3 需要进入 result2。目前，我使用如下语句选择每个条目，该语句仅返回 result1，然后对于每个条目，我对每个结果进行单独查询

```
SELECT DISTINCT id FROM (
    -complicated select in here
) AS temp; 
```

然后对于每个 id 分别执行：

```
SELECT value FROM table2 WHERE table1 = id LIMIT 1;

SELECT value FROM table3 WHERE table1 = id LIMIT 1;

SELECT value, table4.id FROM table4, table5 WHERE table4.id = table5.table4 AND table1 = id; 
```

并使用代码将其格式化为结果表之类的东西。

问题是只有第一个查询是在后台线程上完成的，而其余的都是在 UI 线程上完成的。我想在一个查询中完成所有操作，但是在将 table4 放入单行并且只选择 table2 和 table3 的第一个结果时遇到了麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:27:34.943

For conditional relationships like this you will have a much easier time running multiple selections, or creating a temporary table, filling it with keys in stages and then doing a final selection against the temporary table.

Looking at result4, in effect you are attempting to denormalise and then renormalise the data in the table using outer joins with conditional logic, it is probably possible to do, but would run against the grain of 'wise' database development and you are likely to end up with a query that is all but impossible to debug if you run into problems.

I know that sqlite is meant to be a simple implementation of the SQL standard for using in lightweight environments, so I'm not sure how complex your SQL can be before it gets into trouble.

It's not entirely clear to me what you are trying to achieve, but a workaround might be using several UNION statements like this:

```
SELECT DISTINCT source, id FROM (
    SELECT table2.table1 AS table1, 'table2' AS source, value AS id FROM table2 
    UNION
    SELECT table3.table1, 'table3', value FROM table3 
    UNION
    SELECT table4.table1, 'table5', value FROM table5, table4 
    WHERE table4.id = table5.table4)
WHERE table1 = 3; 
```

Then you would get result like this:

```
source    | id
-----------------------
table2    | value1
table3    | value3
table4    | value5
table4    | value6
table4    | value7 
```

Your other option is to create a view with all the unions (and all three columns, not just the two selected above) and then you can just select the value for table1 to get the same result.

# python - 输入可识别的用户输入框

> ID：15447471
> 
> 赞同：0
> 
> 时间：2013-03-16T09:03:34.387
> 
> 标签：python, curses, python-curses

我正在尝试创建一个输入框，如下所示。出于这个原因，我写了下面的代码，但是每当我`enter`按键时，它不应该带任何单词，例如，每当您在用户名输入框上按回车键时，它都会切换到密码输入框。但是，我还没有找到如何使输入框对输入键敏感。我能怎么做 ？

```
import curses
import curses.textpad

stdscr = curses.initscr()
curses.noecho()
curses.cbreak()
stdscr.keypad(1)

stdscr.clear()
stdscr.refresh()
win = curses.newwin(5, 20, 5, 10)
tb = curses.textpad.Textbox(win)
text = tb.edit()

visualization :

   |-----------------------------|
   |                             |
   |       |------|              | // input box for taking username
   |       |------|              |
   |                             |
   |-----------------------------| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T14:25:27.817

也许使用 getstr() 而不是 textpad？这样你就可以对你得到的输入做一个简单的延续。

使用 subwin（使用 curses.panel？）并要求输入用户名。当程序获得输入时，它直接要求输入密码。

# c# - 使用 selenium 和 c# 选择选项项

> ID：15447478
> 
> 赞同：0
> 
> 时间：2013-03-16T09:04:52.697
> 
> 标签：c#, selenium

我今天刚开始使用 selenium 编写一些 UI 测试。它似乎很容易使用并取得了一些良好的进展。

我有一个使用最新测试版的 kendoui 的页面。他们有一个我正在尝试测试的多选控件。

控件的输出 html 看起来像

```
<div class="k-widget k-multiselect k-header" style="">
  <div class="k-multiselect-wrap floatWrap">
    <ul role="listbox" unselectable="on" class="k-reset" id="StoreIds_taglist"></ul>
    <input class="k-input k-readonly" style="width: 119px;" accesskey="" role="listbox" aria-expanded="false" tabindex="0" aria-owns="StoreIds_taglist StoreIds_listbox" aria-disabled="false" aria-busy="false"><span class="k-loading" style="display: none;"></span></div>
    <select data-val="true" data-val-required="Please select at least 1 store" id="StoreIds" multiple="multiple" name="StoreIds" data-role="multiselect" style="display: none;" aria-disabled="false">
      <option value="d0f36ef4-28be-4d16-a2e8-37030004174a">stoe jo blogs</option>
      <option value="0f0afaec-797a-4b70-8599-ffb4176d7933">Store 3</option>
      <option value="11774315-a0e0-4686-8c70-b882a8f75ab4">store 5</option>
      <option value="28f32bc1-17de-4c73-8bed-b0abd7f5bd81">store 6</option>
      <option value="daf9927c-26a2-4395-ba6d-800d5af85ca7">store4</option>
      <option value="86bd876f-3312-4d1f-96ce-640e0dbf46df">z</option>
      <option value="7da8dfe0-f395-4dc3-9aed-1ce44ac280c0">zxzxc</option>
  </select>
  <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; text-transform: none; line-height: 18.328125px; position: absolute; visibility: hidden;">Select stores...    
  </span>
</div> 
```

我正在尝试编写一个硒测试来从选择列表中选择一个索引。

到目前为止我有

```
 IWebElement sTag = driver.FindElement(By.Id("StoreIds"));
   SelectElement selectTag = new SelectElement(sTag);
   var availableOptions = selectTag.Options; 
```

availbleOptions 有 7 个项目，但文本始终为空。基本上我正在尝试从列表中选择一个项目。

我尝试没有运气

```
 foreach (IWebElement item in availableOptions)
        {
            item.Click();
            Console.WriteLine(item.Text);
        } 
```

我收到一个错误

> 无法单击选项元素。（意外的 JavaScript 错误）

我需要做什么才能选择项目？

好的，一个完整的测试示例

```
 [Test]
    public void TestMultiSelect()
    {
        driver.Navigate().GoToUrl("C:/temp/HTMLPage1.html");
        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(5));
        wait.Until((d) => { return d.Title.StartsWith("Test"); });

        var stores = driver.FindElement(By.Id("required"));
        IWebElement sTag = driver.FindElement(By.Id("required"));

        SelectElement selectTag = new SelectElement(sTag);
        var availableOptions = selectTag.Options;

        foreach (IWebElement item in availableOptions)
        {
            item.Click();
            Console.WriteLine(item.Text);
        }

    } 
```

网页

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>Test</title>
 <link href="https://da7xgjtj801h2.cloudfront.net/2013.1.226/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
<link href="https://da7xgjtj801h2.cloudfront.net/2013.1.226/styles/kendo.default.min.css" rel="stylesheet" type="text/css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
     <script src="https://da7xgjtj801h2.cloudfront.net/2013.1.226/js/kendo.web.min.js"></script>
<script src="https://da7xgjtj801h2.cloudfront.net/2013.1.226/js/kendo.aspnetmvc.min.js"></script>
    </head>
    <body>
    <div id="example" class="k-content" role="application">
    <div class="demo-section">
    <h2>Invite Attendees</h2>
    <label for="required">Required</label>
    <select id="required" multiple="multiple" data-placeholder="Select attendees...">
        <option>Steven White</option>
        <option>Nancy King</option>
        <option>Anne King</option>
        <option>Nancy Davolio</option>
        <option>Robert Davolio</option>
        <option>Michael Leverling</option>
        <option>Andrew Callahan</option>
        <option>Michael Suyama</option>
        <option>Anne King</option>
        <option>Laura Peacock</option>
        <option>Robert Fuller</option>
        <option>Janet White</option>
        <option>Nancy Leverling</option>
        <option>Robert Buchanan</option>
        <option>Margaret Buchanan</option>
        <option>Andrew Fuller</option>
        <option>Anne Davolio</option>
        <option>Andrew Suyama</option>
        <option>Nige Buchanan</option>
        <option>Laura Fuller</option>
    </select>

</div>
<style scoped>
    .demo-section {
        width: 350px;
        height: 200px;
        padding: 30px;
    }
    .demo-section h2 {
        font-weight: normal;
    }
    .demo-section label {
        display: inline-block;
        margin: 15px 0 5px 0;
    }
    .demo-section select {
        width: 350px;
    }
    #get {
        float: right;
        margin: 25px auto 0;
    }
</style>
<script>
    $(document).ready(function () {
        // create MultiSelect from select HTML element
        $("#required").kendoMultiSelect();
              });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T15:06:48.103

您应该使用 A IJavaScriptExecutor 来解决这个问题

```
//js.ExecuteScript(String.Format("$('#{0}').data('kendoMultiSelect').value({1});", "tagname", Value)) 
```

# multithreading - 如何等待本身在线程中运行其他任务的并行化 bash 命令？（氧气和点）

> ID：15447483
> 
> 赞同：-1
> 
> 时间：2013-03-16T09:05:22.940
> 
> 标签：multithreading, bash, parallel-processing, doxygen, dot

我在 Mac OS X 上并使用以下 bash 脚本在大约 10 个源代码库上运行 doxygen。

问题是，doxygen 自己在单独的线程上运行最耗时的任务“点”（创建类图）。这会导致等待命令不等待点线程完成。它立即有效地将我返回到命令提示符（仅使用 doxygen 创建文档很快），而 dot 仍在后台生成类图大约一分钟。

```
#!/bin/bash

DOXY="/Applications/Doxygen.app/Contents/Resources/doxygen"

#run doxygen on all configs
for config in doxygen*.config
do
    $DOXY $config &
done
wait 
```

我曾尝试强制 dot 在单个线程上运行（DOT_NUM_THREADS=1），但这没有帮助。我尝试将等待命令放在循环中，但是只有 doxygen 需要尽可能长的时间，而不需要并行化，并且仍然没有等待 dot 完成。

我需要等待 dot 命令生成所有类图，否则我将在下一步打包/上传不完整的文档。

**如何并行化 doxygen 并让它等待所有线程点命令完成？**

或者，有没有办法让我在 bash 脚本中确定所有点命令是否已结束（我不知道 doxygen 实际产生了哪些进程/线程，也不知道如何等待它们）？

**更新：** 我尝试使用 xargs 正确等待所有点线程完成，但速度并不快：

```
find . -name "doxygen*.config" | xargs -n 1 -P 8 doxygen 
```

这里的问题是我不能将'n'（数字）设置为高于 1，因为 doxygen 不会创建所有文档集，因为它忽略了附加参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:26:15.660

看看这里[https://stackoverflow.com/a/8247993/784672](https://stackoverflow.com/a/8247993/784672)，我在这里描述了一种使用标签文件和 GNU 并行实用程序并行运行 doxygen 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:51:58.720

我认为另一种解决方案（未测试，因为我没有`doxygen`安装）是`doxygen`在后台的子shell中作为前台任务运行。这与您找到的解决方案几乎相同，但无需创建第二个脚本：

```
for config in doxygen*.config; do
    ( $DOXY $config ) &
done
wait 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:35:30.007

我找到了解决方案。但首先，我愚蠢地相信我可以加速 doxygen。我已经提到 doxygen 是线程中最耗时的任务（点）。因此：呃！:)

无论如何，对我有用的是使用 doxygen 命令创建另一个 bash 脚本：

```
#!/bin/bash
DOXY="/Applications/Doxygen.app/Contents/Resources/doxygen"
echo Making $1 …
$DOXY $1 
```

然后原始的 bash 脚本可以并行化任务，并正确等待 dot 完成：

```
#!/bin/bash

#run doxygen on all configs
for config in doxygen*.config
do
    ./make-doc.sh $config &
done
wait 
```

# android - 带有片段的动态 UI 中的错误（适用于平板电脑）

> ID：15447493
> 
> 赞同：0
> 
> 时间：2013-03-16T09:06:51.557
> 
> 标签：android, android-listview, android-fragments

我基本上使用开发人员培训课程（[培训](http://developer.android.com/training/basics/fragments/index.html)）的源代码。我尝试将 RSS 提要读入带有动态 UI 的 Android 中，并带有像 src 这样的片段。并在 MainActivity 中使用新线程来分阶段 .XML。这是我使用的代码。（[代码](https://stackoverflow.com/questions/15437010/dom4j-doesnt-work-on-android?answertab=active#tab-top)）

我更改数据类型：

```
 public class RSSData {

//  public static String[] Headlines = new String[20];
    public static List<String> Headlines = new ArrayList<String>();

//  public static String[] Articles = new String[20];
    public static List<String> Articles = new ArrayList<String>();
} 
```

有时效果很好。但是在触摸 headers_fragment 的列表项时经常**崩溃**。所以我无法阅读其中的详细文章。

这是logcat：

```
03-16 17:19:43.102: E/InputEventReceiver(12106): Exception dispatching input event.
03-16 17:19:43.102: E/MessageQueue-JNI(12106): Exception in MessageQueue callback: handleReceiveCallback
03-16 17:19:43.132: E/MessageQueue-JNI(12106): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(16908298, class android.widget.ListView) with Adapter(class android.widget.ArrayAdapter)]
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.widget.ListView.layoutChildren(ListView.java:1544)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.widget.AbsListView.onTouchEvent(AbsListView.java:3953)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.View.dispatchTouchEvent(View.java:7350)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2412)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2147)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2139)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1476)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.app.Activity.dispatchTouchEvent(Activity.java:2487)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2087)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.View.dispatchPointerEvent(View.java:7535)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3415)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3347)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4456)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4434)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4538)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.os.MessageQueue.nativePollOnce(Native Method)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.os.MessageQueue.next(MessageQueue.java:125)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.os.Looper.loop(Looper.java:124)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at android.app.ActivityThread.main(ActivityThread.java:4921)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at java.lang.reflect.Method.invokeNative(Native Method)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at java.lang.reflect.Method.invoke(Method.java:511)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
03-16 17:19:43.132: E/MessageQueue-JNI(12106):  at dalvik.system.NativeStart.main(Native Method)
03-16 17:19:43.147: D/AndroidRuntime(12106): Shutting down VM
03-16 17:19:43.147: W/dalvikvm(12106): threadid=1: thread exiting with uncaught exception (group=0x41b212a0)
03-16 17:19:43.177: E/AndroidRuntime(12106): FATAL EXCEPTION: main
03-16 17:19:43.177: E/AndroidRuntime(12106): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(16908298, class android.widget.ListView) with Adapter(class android.widget.ArrayAdapter)]
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.widget.ListView.layoutChildren(ListView.java:1544)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.widget.AbsListView.onTouchEvent(AbsListView.java:3953)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.View.dispatchTouchEvent(View.java:7350)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2412)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2147)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2161)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2139)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1476)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.app.Activity.dispatchTouchEvent(Activity.java:2487)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2087)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.View.dispatchPointerEvent(View.java:7535)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3415)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3347)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4456)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4434)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4538)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.os.MessageQueue.nativePollOnce(Native Method)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.os.MessageQueue.next(MessageQueue.java:125)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.os.Looper.loop(Looper.java:124)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at android.app.ActivityThread.main(ActivityThread.java:4921)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at java.lang.reflect.Method.invokeNative(Native Method)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at java.lang.reflect.Method.invoke(Method.java:511)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
03-16 17:19:43.177: E/AndroidRuntime(12106):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:04:23.047

例外情况是当您不在主 UI 线程中时尝试更新列表。

从 Android 3.0 开始，您需要从主线程外部执行网络操作，因此我假设您在后台线程中解析 RSS 提要，然后尝试从同一线程更新 ListView。

在后台线程中，一旦你解析了 RSS 提要，你应该像这样更新列表：

```
ArticleListAdapter adapter = new ArticleListAdapter(activityContext, articles);
articleListFrag.setListAdapter(adapter);
adapter.notifyDataSetChanged(); 
```

`articles`您已解析的新列表或文章在哪里，并且`activityContext`是 ListView 所属的活动（这应该在启动时初始化`AsyncTask`。

[Android RSS 应用教程+代码](http://blog.nerdability.com/2013/03/tech-building-rss-reader-android-app.html)

我最近写了一篇关于为 android 创建 RSS 解析器的教程——如果你想查看的话，我已经把所有的源代码放在了 GitHub 上。关于后台线程解析RSS和更新列表视图主要可以参考[这个类](https://github.com/nerdability/AndroidRssReader/blob/master/src/com/nerdability/android/rss/RssService.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:33:17.967

可能您正在从 Main(UI) 之外的另一个线程更新您的 UI 元素。它会在某个时候但不是一直有效。请参阅此链接[您可以从另一个线程访问 UI 元素吗？（不设置）](https://stackoverflow.com/questions/10450750/can-you-access-ui-elements-from-another-thread-get-not-set)。

# java - 多输出问题 JRadioButton，默认选择，否则，ActionListener

> ID：15447500
> 
> 赞同：1
> 
> 时间：2013-03-16T09:08:33.163
> 
> 标签：java, swing, actionlistener, jradiobutton

我是一个新的堆栈用户并且是 Java 的新手，所以如果这无论如何不清楚或使用了错误的术语，请提前道歉。

如果没有对 JRadioButton 进行选择，我希望分配一个基值。

*   我可以将 JRadioButton 设置为 true，它将自动选择但不会出现在侦听器中，因为没有事件？

*   我可以设置一个 else 语句，但是由于它等待侦听器事件而没有再次发生？

以下代码似乎适用于我首先将值设置为双精度值。

我的问题是，虽然我得到了分配给变量 $leadtime 的正确值，但系统输出返回它的值 4 次，有人可以解释一下这个事件吗？

或者，如果有更好的方法来做到这一点，我会非常乐意学习，或者我在两个要点尝试中忽略了一些东西？

谢谢，周末战士84

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JRadioButton;

public class CRADIOHAND implements ActionListener{

JRadioButton $test1;    
JRadioButton $test2;
JRadioButton $test3;
JRadioButton $test4;
double $leadtime = 22;

CRADIOHAND(JRadioButton $buttonJR1,JRadioButton $buttonJR2,JRadioButton $buttonJR3,JRadioButton $buttonJR4){

    $test1 = $buttonJR1;    
    $test2 = $buttonJR2;
    $test3 = $buttonJR3;
    $test4 = $buttonJR4;
    System.out.println($leadtime);
}   
    public void actionPerformed(ActionEvent re1) {          

        if($test1.isSelected()){
        $leadtime= 22;

        }else if($test2.isSelected()){
        $leadtime= 47;

        }else if($test3.isSelected()){
        $leadtime= 113;

        }else if($test4.isSelected()){
        $leadtime= 130;
        }
        System.out.println($leadtime);
}
} 
```

缩短布局。

```
import java.awt.FlowLayout;
import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JRadioButton;

public class CLAYOUT extends JFrame {

    private FlowLayout $lay;

    public CLAYOUT(){

        super("Sample Program");
        $lay = new FlowLayout();  
        setLayout($lay);

        JRadioButton $buttonJR1 = new JRadioButton("22 Days");
        add($buttonJR1);        
        JRadioButton $buttonJR2 = new JRadioButton("47 Days");  
        add($buttonJR2);        
        JRadioButton $buttonJR3 = new JRadioButton("113 Days"); 
        add($buttonJR3);            
        JRadioButton $buttonJR4 = new JRadioButton("130 Days"); 
        add($buttonJR4);        

        ButtonGroup radiogroup = new ButtonGroup();
        radiogroup.add($buttonJR1);
        radiogroup.add($buttonJR2);
        radiogroup.add($buttonJR3);
        radiogroup.add($buttonJR4);

        $buttonJR1.addActionListener(new CRADIOHAND($buttonJR1, $buttonJR2, $buttonJR3, $buttonJR4));
        $buttonJR2.addActionListener(new CRADIOHAND($buttonJR1, $buttonJR2, $buttonJR3, $buttonJR4));
        $buttonJR3.addActionListener(new CRADIOHAND($buttonJR1, $buttonJR2, $buttonJR3, $buttonJR4));
        $buttonJR4.addActionListener(new CRADIOHAND($buttonJR1, $buttonJR2, $buttonJR3, $buttonJR4));
    }   
} 
```

缩短的主要

```
import javax.swing.JFrame;

public class CREORDER{

public static void main  (String[] args){

    CLAYOUT $clay = new CLAYOUT();
    $clay.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    $clay.setSize(1200,500);
    $clay.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:23:46.710

单击 RadioButton 确实只打印了一次结果。但是 22.0 最初的四次打印是因为您在构造函数中编写了这一行`CRADIOHAND`。

```
System.out.println($leadtime); 
```

因此，在每次调用`CRADIOHAND`in的构造函数`CLAYLAYOUT`时：

```
 $buttonJR1.addActionListener(new CRADIOHAND($buttonJR1, $buttonJR2, $buttonJR3, $buttonJR4));
        $buttonJR2.addActionListener(new CRADIOHAND($buttonJR1, $buttonJR2, $buttonJR3, $buttonJR4));
        $buttonJR3.addActionListener(new CRADIOHAND($buttonJR1, $buttonJR2, $buttonJR3, $buttonJR4));
        $buttonJR4.addActionListener(new CRADIOHAND($buttonJR1, $buttonJR2, $buttonJR3, $buttonJR4)); 
```

的`SOP`内部构造函数`CRADIOHAND`连续调用 4 次。所以**解决方案**是您`System.out.println($leadtime);`在`CRADIOHAND`构造函数中注释或删除。

注意：作为旁注。我想建议您在编写代码时坚持使用 java 命名约定。例如：类名总是以大写字母开头。变量名总是以小写字母开头。并且常量（即最终变量）的所有字母都大写。还有很多其他的。看看oracle的[官方网站](http://www.oracle.com/technetwork/java/codeconv-138413.html)。

# ios - json不解析

> ID：15447504
> 
> 赞同：-1
> 
> 时间：2013-03-16T09:08:51.550
> 
> 标签：ios, json, ios6

我有以下由 NSURLconnection 和 NSJSONSerialization 解析的 json 代码：

```
{
  "JSonArray" : [
    {
      "JsonLog" : {
        "msg" : "test",
        "sno" : "1",
        "user" : "test1"
      }
    },
    {
      "JsonLog" : {
        "msg" : "test",
        "sno" : "2",
        "user" : "test2"
      }
    },
    {
      "JsonLog" : {
        "msg" : "test",
        "sno" : "3",
        "user" : "test3"
      }
    }
  ]
} 
```

我用过的代码：

```
NSError *requestError = NULL;

NSDictionary *allData=[NSJSONSerialization JSONObjectWithData:webdata options:0 error:&requestError];

if (requestError){
    //An error occurred.
    NSLog(@"error is : %@",requestError);
}

if (! allData) {
    NSLog(@"Got an error: %@", requestError);
} else {
    NSLog(@" data is : %@",allData) ;
}

NSArray *arrayOfEntry=[allData objectForKey:@"JSonArray"];

for (NSDictionary *diction in arrayOfEntry) {

    NSDictionary *title=[diction objectForKey:@"JsonLog"] ;

    NSString *label=[title objectForKey:@"sno"];

    [array addObject:label];

} 
```

**NSLog(@" data is : %@",allData)**的响应 是：

```
{
    JSonArray =     (
                {
            JsonLog =             {
                msg = "test";
                "sno" = 1;
                user = test1;
            };
        },
                {
            JsonLog =             {
               msg = "test";
                "sno" = 2;
                user = test2;
            };
        },
                {
            JsonLog =             {
                msg = "test";
                "sno" = 3;
                user = test3;
            };
        }
    );
} 
```

我哪里出错了，我该如何正确设置？有什么我想念的吗？

任何建议都会对您有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:17:14.930

我没有看到有关代码或行为的任何问题，因为 JSON 已正确解析。

更新：我尝试编译并运行您的代码，`NSLog()`在生成结果`array`变量后，它显示

```
(
    1,
    2,
    3
) 
```

所以错误肯定在其他地方。

# ios - 如何获取uitableview部分的indexpath？

> ID：15447512
> 
> 赞同：0
> 
> 时间：2013-03-16T09:09:34.437
> 
> 标签：ios, objective-c, uitableview

我有一个包含多个部分的表格视图。但我点击一个 tableviewCells 行我应该得到那个行部分

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:11:44.047

当用户单击单元格时，会触发[“ `tableView:didSelectRowAtIndexPath:`”的委托方法。](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3adidSelectRowAtIndexPath%3a)

要获取所选单元格的行，您可以获取传入的 indexPath 参数。假设您将该参数命名为“ `indexPath`”，那么获取该行将像“ `indexPath.row`”一样简单。您也可以通过“ `indexPath.section`”获取该部分。

# asp.net - 使用数据库实现 jqgrid 与 asp.net 网页

> ID：15447513
> 
> 赞同：0
> 
> 时间：2013-03-16T09:09:35.027
> 
> 标签：asp.net, jqgrid, webforms

我想将 jqGrid 集成到 asp.net 网页中。我得到了 JSON 格式的数据。但是在渲染没有数据的页面网格时。

我的书面代码如下。

**JqG​​ridExample.aspx**

```
 jQuery("#jsonmap").jqGrid({

     url: 'GetData.aspx',
     datatype: 'json',
     colNames: ['ID', 'Name', 'Active', 'Gender'],
     colModel: [
       { name: 'id', index: 'id', width: 35, editable: false, editoptions: { readonly: true, size: 10} },
       { name: 'name', index: 'name', width: 150, align: "left", editable: true, size: 100 },
       { name: 'isClosed', index: 'isClosed', width: 100, align: 'left', editable: true, edittype: "checkbox", editoptions: { value: "true:false", formatter: "checkbox"} },
       { name: 'gender', index: 'gender', width: 100, formatter: 'select', editable: true, edittype: "select", editoptions: { value: "0:select;1:male;2:female"} }
     ],
     rowNum: 10,
     rowList: [2, 5, 10, 15],
     pager: '#pjmap',
     sortname: 'id',
     sortorder: "desc",
     viewrecords: true,
     jsonReader: { repeatitems: false, cell: "", id: "0" },
     width: 600,
     caption: 'First jqGrid',
     height: '100%', viewrecords: true, fixed: true, gridview: true, loadonce: true
   });

<table id="jsonmap">
</table>
<div id="pjmap">
</div> 
```

我从中得到的数据`getdata.aspx`是

```
{"total":1,"page":1,"records":5,"rows":[{"Name":"John","Id":1,"Gender":1,"IsClosed":false},{"Name":"Abel","Id":2,"Gender":1,"IsClosed":false},{"Name":"Aaron","Id":3,"Gender":1,"IsClosed":true},{"Name":"Tsion","Id":4,"Gender":2,"IsClosed":true},{"Name":"Mussie","Id":5,"Gender":2,"IsClosed":true}]} 
```

在 jqGridExample.aspx 数据上的渲染网格未显示。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:31:18.610

您应该使用与 JSON 数据中的名称完全对应的`name`属性。`colModel`因此，您应该更改`name: 'id'`为`name: 'Id'`, `name: 'name'`to `name: 'Name'`, `name: 'isClosed'`to`name: 'IsClosed'`和`name: 'gender'`to `name: 'Gender'`。您可以从所有属性中删除所有`index`属性`colModel`或对所有属性进行相同的更改`index`。

此外，您应该`key: true`在`Id`.`colModel`

# c# - C# 从 Firefox 获取 URL 但不使用 DDE

> ID：15447518
> 
> 赞同：2
> 
> 时间：2013-03-16T09:10:25.703
> 
> 标签：c#, api, url, firefox, dde

为了在 Firefox 中检测 URL，我使用 DDE

```
 DdeClient dde = new DdeClient("Firefox", "WWW_GetWindowInfo");
 dde.Connect();
 string url1 = dde.Request("URL", int.MaxValue);
 dde.Disconnect();
 temp = url1.Replace("\"", "").Replace("\0", "");
 dde = null; 
```

此代码完美运行！但连接（dde.Connect（）;）太慢了7/8秒！还有其他方法可以从 Firefox 获取 url 吗？（例如使用 API 窗口，如“SendMessage”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-05T10:39:10.640

```
 Process[] process = Process.GetProcessesByName("firefox");

            foreach (Process firefox in process)
            {
                // the chrome process must have a window
                if (firefox.MainWindowHandle == IntPtr.Zero)
                {
                    return null;
                }

                AutomationElement element = AutomationElement.FromHandle(firefox.MainWindowHandle);
                if (element == null)
                    return null;

                //search for first custom element
                AutomationElement custom1 = element.FindFirst(TreeScope.Descendants,
                 new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.Custom));

                //search all custom element children
                AutomationElementCollection custom2 = custom1.FindAll(TreeScope.Children, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.Custom));

                //for each custom child
                foreach (AutomationElement item in custom2)
                {
                    //search for first custom element
                    AutomationElement custom3 = item.FindFirst(TreeScope.Descendants, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.Custom));
                    //search for first document element
                    AutomationElement doc3 = custom3.FindFirst(TreeScope.Descendants, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.Document));

                    if (!doc3.Current.IsOffscreen)
                    {
                        url = ((ValuePattern)doc3.GetCurrentPattern(ValuePattern.Pattern)).Current.Value as string;
                        return url;
                    }                      
                }
            }             
            return url;
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-27T23:54:44.870

这对我很有效：

```
 AutomationElement element = AutomationElement.FromHandle(intPtr);  // intPtr is the MainWindowHandle for FireFox browser
                element = element.FindFirst(TreeScope.Subtree,
                      new AndCondition(
                          new PropertyCondition(AutomationElement.NameProperty, "Search or enter address"),
                          new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.Edit)));
                string url = ((ValuePattern)element.GetCurrentPattern(ValuePattern.Pattern)).Current.Value as string; 
```

# javascript - eval() 可以优化吗？

> ID：15447519
> 
> 赞同：3
> 
> 时间：2013-03-16T09:10:27.853
> 
> 标签：javascript

> eval() 改变局部变量的能力对 JavaScript 优化器来说非常有问题。

我读了这本书 javascript Definitive Guide。

**eval() 可以优化？？我不明白。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T09:12:43.037

这不是*`eval`*优化，而是希望优化的 JavaScript 引擎无法这样做`eval`，因为它接受一个字符串，并且它们无法对其可能执行的代码进行静态分析。

考虑这个函数：

```
function foo(str) {
    var a = getAReallyBigArray();
    doSomethingWith(a);
    document.getElementById("foo").addEventListener('click', function() {
        alert(str);
    }, false);
} 
```

根据规范，事件处理函数具有对`a`变量的引用（通过执行上下文的词法环境对象），因此只要该事件处理程序存在，数组就会一直保存在内存中。但是 JavaScript 引擎可以分析事件处理程序并确定它*肯定*没有引用`a`，从而优化变量绑定对象的内容并让数组得到垃圾收集。

但是在那里扔一个`eval`：

```
function foo(str) {
    var a = getAReallyBigArray();
    doSomethingWith(a);
    document.getElementById("foo").addEventListener('click', function() {
        eval(str);
    }, false);
} 
```

现在，JavaScript 引擎不可能优化词法环境对象的内容，因此它必须将大数组保留在内存中，以防`str`其中有代码访问它。

这只是一个具体的例子。最基本的一点是，这`eval`给 JavaScript 引擎的优化器带来了很大的麻烦，有效地使引擎关闭了它的优化器来处理`eval`出现的代码。

# ruby-on-rails - Rails 为浏览器和移动应用程序设计身份验证

> ID：15447526
> 
> 赞同：1
> 
> 时间：2013-03-16T09:11:48.123
> 
> 标签：ruby-on-rails, authentication, devise

我有一个可以从浏览器和移动设备访问的 rails 应用程序。我正在使用 Devise 进行身份验证，并且我正在对移动设备使用令牌身份验证。

我从移动应用程序登录时获得了身份验证令牌，并在每次从移动设备拨打电话时都使用它。

在浏览器上，我使用基于会话的 cookie。因此，碰巧两个人可以从浏览器和移动应用程序使用相同的用户名/密码同时登录，这会导致数据损坏。

我该如何解决这个问题？如果我也可以在浏览器的每次调用中发送相同的 auth_token，那么这个问题将得到解决，因为最后登录的 auth_token 将优先于另一个。

关于如何从浏览器为所有调用（get/post/put/delete）发送此身份验证令牌的任何线索？

我没有使用 jQuery 或来自浏览器的任何 Ajax 调用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:16:13.373

您必须将设计配置为对每个请求使用无状态令牌。

```
config.skip_session_storage = [:token_auth] 
```

如果您还没有，请查看[令牌可验证](http://rdoc.info/github/plataformatec/devise/master/Devise/Models/TokenAuthenticatable)文档。那里定义了一些方法来确保令牌有效，如果无效则重新生成。我不确定在浏览器中使用它是否明智，但如果用户登录浏览器，您肯定可以使移动应用程序的令牌过期，这将迫使他们在移动应用程序上重新进行身份验证。

# java - 在 gui Java 中为 if 语句的输出显示添加延迟

> ID：15447532
> 
> 赞同：1
> 
> 时间：2013-03-16T09:12:43.567
> 
> 标签：java, swing, jlabel, visible

我做了这个简单的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Nice extends JFrame implements ActionListener{
  JLabel n1 = new JLabel("1");
  JLabel n2 = new JLabel("2");
  JLabel n3 = new JLabel("3");
  JLabel n4 = new JLabel("4");
  JLabel n5 = new JLabel("5");
  JButton show = new JButton("Show The Numbers");

{
    n1.setVisible(false);
    n2.setVisible(false);
    n3.setVisible(false);
    n4.setVisible(false);
    n5.setVisible(false);
}

public Nice(){
super("Timer");
setVisible(true);
setSize(200, 200);
setLayout(new GridLayout(3,3));
add(n1);
add(n2);         
add(n3);
add(n4);
add(n5);
add(show);
show.addActionListener(this);
   }

public void actionPerformed(ActionEvent a){
  Object clicked = a.getSource();
  if (show == clicked)
  {
n1.setVisible(true);
n2.setVisible(true);
n3.setVisible(true);
n4.setVisible(true);
n5.setVisible(true);
}
}
} 
```

和一堂阅读它的课

```
public class NiceOpener{
  public static void main(String[] args){
    Nice frame = new Nice();
    frame.setVisible(true);
  }
} 
```

但是，我想做的是在单击显示按钮后，而不是一次设置所有可见的数字，它会计数 2 秒，然后再显示另一个数字。就像当我单击 Show Me 时，它​​会显示 1，然后 2 秒后显示 2，然后 3 秒后显示 3，依此类推。延迟标签可见设置的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:20:51.013

```
 public void actionPerformed(ActionEvent a) {
    Object clicked = a.getSource();
    if (show == clicked) {
        new ShowTask().start();
    }
}

class ShowTask extends Thread {
    @Override
    public void run() {
        int i = 2;
        n1.setVisible(true);
        try {
            Thread.sleep((i++) * 1000);
            n2.setVisible(true);
            Thread.sleep((i++) * 1000);
            n3.setVisible(true);
            Thread.sleep((i++) * 1000);
            n4.setVisible(true);
            Thread.sleep((i++) * 1000);
            n5.setVisible(true);
        } catch (InterruptedException e) {
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:26:13.563

您可以使用`javax.swing.Timer`.
**更新**

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class Nice extends JFrame implements ActionListener{
  JLabel n1 = new JLabel("1");
  JLabel n2 = new JLabel("2");
  JLabel n3 = new JLabel("3");
  JLabel n4 = new JLabel("4");
  JLabel n5 = new JLabel("5");
  JButton show = new JButton("Show The Numbers");
  int counter = 1 ;
  boolean started = false;
  javax.swing.Timer timer ;
{
    n1.setVisible(false);
    n2.setVisible(false);
    n3.setVisible(false);
    n4.setVisible(false);
    n5.setVisible(false);
}

public Nice(){
super("Timer");
timer = new javax.swing.Timer(2000,new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent evt)
        {
            hideAllLabels();
            if (counter == 1)
            {
                n1.setVisible(true);
                counter++;
            }
            else if (counter == 2)
            {
                n4.setVisible(true);
                counter++;
            }
            else if (counter == 3)
            {
                n2.setVisible(true);
                counter++;
            }
            else if (counter == 4)
            {
                n5.setVisible(true);
                counter++;
            }
            else if (counter == 5)
            {
                n3.setVisible(true);
                counter++;
                timer.stop();
            }
        }
    });
timer.setInitialDelay(0);
timer.setDelay(2000);
timer.setRepeats(true);
setVisible(true);setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setSize(200, 200);
setLayout(new GridLayout(3,3));
add(n1);
add(n2);         
add(n3);
add(n4);
add(n5);
add(show);
show.addActionListener(this);
}
private void hideAllLabels()
{
    n1.setVisible(false);
    n2.setVisible(false);
    n3.setVisible(false);
    n4.setVisible(false);
    n5.setVisible(false);
}
public void actionPerformed(ActionEvent a){
  Object clicked = a.getSource();
  if (show == clicked)
  {    
      if (!timer.isRunning())
      {
          if (!started)
          {
            timer.start();
            started = true;
          }
          else
          {
              counter = 1;
              timer.restart();
          }

      }
  }
}
}
public class NiceOpener{
  public static void main(String[] args){
    Nice frame = new Nice();
    frame.setVisible(true);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T10:56:17.400

有多种方法可以实现您想要的。

有很多问题你必须克服。第一个是，您绝不能在事件调度线程的上下文中执行任何耗时或阻塞的操作。这样做会阻止 Swing 处理重绘请求。

第二个是，您绝不能从除 EDT 之外的任何线程创建或修改任何 UI 组件。

最简单的方法是使用`javax.swing.Timer`. 另一种方法是使用`SwingWorker`.

以下示例提供了一种可以定义伪随机顺序的方法。

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestLabelDelay extends JFrame implements ActionListener {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                TestLabelDelay frame = new TestLabelDelay();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    private List<JLabel> labels;

    public TestLabelDelay() {
        super("Timer");
        setLayout(new GridLayout(3, 3));

        labels = new ArrayList<>(25);
        for (int index = 0; index < 5; index++) {
            labels.add(createLabel(index));
        }

        add(labels.get(0));
        add(labels.get(1));
        add(labels.get(2));
        add(labels.get(3));
        add(labels.get(4));

        JButton show = new JButton("Show");
        add(show);
        show.addActionListener(this);
    }

    protected JLabel createLabel(int index) {
        JLabel label = new JLabel(String.valueOf(index));
        label.setVisible(false);
        return label;
    }

    public void actionPerformed(ActionEvent a) {
        List<Integer> order = new ArrayList<>(5);
        order.add(2);
        order.add(4);
        order.add(0);
        order.add(3);
        order.add(1);

        new ShowWorker(labels, order).execute();
    }

    public class ShowWorker extends SwingWorker<Void, Integer> {

        private List<JLabel> labels;
        private List<Integer> order;

        private ShowWorker(List<JLabel> labels, List<Integer> order) {
            this.labels = labels;
            this.order = order;
        }

        @Override
        protected void process(List<Integer> chunks) {
            for (Integer index : chunks) {
                JLabel label = labels.get(order.get(index));
                label.setVisible(true);
                label.repaint();
            }
        }

        @Override
        protected Void doInBackground() throws Exception {
            for (int index = 0; index < labels.size(); index++) {
                Thread.sleep(500);
                publish(index);
            }
            return null;
        }

    }

} 
```

# pascal - 从文件 FreePascal 中读取

> ID：15447535
> 
> 赞同：1
> 
> 时间：2013-03-16T09:12:46.283
> 
> 标签：pascal, freepascal

所以我有包含以下内容的文本文件：

```
Harry Potter and the Deathly Hallows###J. K. Rowling###2007 
```

我必须以以下形式将其输出到 FreePascal 程序

```
J.K.Rowling "Harry Potter and the Deathly Hallows" 2007 year 
```

我知道如何从文件中读取，但我不知道如何使它像 previos 形式

有人能帮我吗？我将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:54:07.453

如果`TStringList`在 freepascal 中与在 Delphi 中相同，那么这可以解决问题：

```
function SortedString( const aString : String) : String;
var
  sList : TStringList;
begin
  Result := '';
  sList := TStringList.Create;
  try
    sList.LineBreak := '###';
    sList.Text := aString;
    if (sList.Count = 3) then
    begin
      Result := sList[1] + ' "' + sList[0] + '" ' + sList[2] + ' year';
    end;
  finally
    sList.Free;
  end;
end; 
```

* * *

更新，正如@TLama 评论的那样，freepascal`TStringList`没有`LineBreak`属性。

试试这个（`ReplaceStr`在 StrUtils 中使用）：

```
function SortedString(const aString : String) : String;
var
  sList : TStringList;
begin
  Result := '';
  sList := TStringList.Create;
  try 
    sList.Text := ReplaceStr(aString,'###',#13#10);
    if (sList.Count = 3) then
    begin
      Result := sList[1] + ' "' + sList[0] + '" ' + sList[2] + ' year';
    end;
  finally
    sList.Free;
  end;
end; 
```

# user-interface - 在 lua 中，我看到 print 函数使用 ..var.. 并且我想知道这些句点是什么意思？

> ID：15447536
> 
> 赞同：-9
> 
> 时间：2013-03-16T09:12:48.827
> 
> 标签：user-interface, scripting, lua, iup

这是一个示例： print("PARAM"..param_index.." = "..param.value)

那些奇怪的时期到底是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T09:18:37.367

[String concatenation](http://www.lua.org/pil/3.4.html).

What else would you expect??

# cdi - 手动实例化 bean 时的 CDI 注入

> ID：15447538
> 
> 赞同：2
> 
> 时间：2013-03-16T09:13:14.993
> 
> 标签：cdi, jboss-weld, inject

我知道这种问题会经常出现，但我想知道是否有办法手动实例化一个 bean（使用 new Xxxx()）并完成我的注入。也许使用 BeanManager 但我不知道如何。

如果不可能，我想知道为什么没有这样做。从概念上讲，我没有找到使这不可能的充分理由。

谢谢你的解释。

PS：我正在使用 JBoss 7.1.1 和 Weld CDI 容器。

JM。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:59:20.153

因为 CDI 背后的一个基本概念是范围及其相关上下文的概念。这就是*上下文*和依赖注入中的上下文。基本上，具有范围的 bean 具有明确定义的生命周期，但是当您自己实例化 bean 时，不再说明它的生命周期是什么。阅读第[2.4](http://docs.jboss.org/cdi/spec/1.0/html_single/#d0e1066)节CDI 规范的范围。

为了让您更深入地了解 - CDI 不仅处理`@Inject`您的依赖项，还管理它们的生命周期。这超越了简单的实例化和依赖注入，`@PreDestroy`不仅适用于 bean 实例本身，而且适用于所有依赖实例的终止（调用）。当你自己实例化一个 bean 时，不知道什么时候做最后一部分。

# sql - 数据库设计用户表拆分或单个

> ID：15447539
> 
> 赞同：4
> 
> 时间：2013-03-16T09:13:17.307
> 
> 标签：sql, database-design

我只是想看看其他人对这个问题的看法。我有一个项目，其中包含每个用户的大量独特信息。现在，鉴于没有冗余并且有大量用户 - 将数据拆分成更小的表会使其更快吗？

我确实尝试了一个包含 1000 个查询的测试，其中一个有 87 列，另一个只有登录信息单独存储。在一个我得到 1372 毫秒，另一个 879 毫秒；乍一看似乎更快，但可能有人比我有更多的经验并且可以就此发表他们的观点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T13:18:03.390

在您的测试中，如果您使用“SELECT *”从大表和小表中查询以返回所有列，那么是的，当然较大的表需要更长的时间，因为它必须返回更多数据。但是，在生产应用程序中，应用程序中的查询应该是有针对性的，只返回您需要的列。

如果每个表都具有相同的索引和要过滤的数据，并且每个表都返回相同的选定列，则结果集可能会在大致相同的时间返回。但是，我应该补充一点，在考虑性能测试时，时间可能会产生很大的误导。数据库服务器有很多因素不断变化，与您正在运行的查询无关，但绝对会影响它们的运行时间。尝试查看逻辑读数，而不是时间作为衡量标准。

至于您的设计问题，无论哪种方式在技术上都是可行的。但是，您可能需要考虑需要多长时间访问特定数据才能帮助开发团队的其他成员。如果您有 20% 的列在 80% 的时间内被查询，您可能需要考虑将这些列放在自己的表中。这应该有助于避免新开发人员在您的团队中花费大量时间，因为他们必须筛选大量通常不重要的数据列来确定他们想要查询的内容。

此外，从物理设计的角度来看，如果成本是一个问题，您可以将需要频繁访问的 20% 表放在性能较高的磁盘驱动器上，而将 80% 的数据放在性能较低的磁盘驱动器上。

# android - 从 android/linux 中的特定 PID 获取所有日志？

> ID：15447543
> 
> 赞同：1
> 
> 时间：2013-03-16T09:13:41.783
> 
> 标签：android, c, linux, logging

看到目前在 android 中有一个名为 logcat 的实用程序，它显示所有用户空间程序在标准输出或终端上的日志。

但在这里我不希望列表中的所有消息。但我只想查看特定应用程序的日志。

因此，如果我需要制作这样的实用程序，那么我该怎么做呢？

看看我是否想要来自 pid 132 和 324 的所有日志，然后我将在终端上按以下方式运行

```
logcat_special 132 324 
```

现在它将显示来自该 pid 的所有消息。

如果这个事情很难用 pid 实现，那么我们可以使用应用程序名称作为

```
logcat_special vlc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:23:42.963

Log cat 已经有一个基于包的过滤器。看看这里：[Logcat options](http://developer.android.com/tools/debugging/debugging-log.html) 也根据[这个](https://stackoverflow.com/a/8543401/951448)答案你可以从它的pid中找到应用程序包。

因此，将其与 logcat 结合起来，您就可以实现您所追求的功能。

此选项应该有效：

```
logcat <your package name>:<log level> 
```

例如`logcat android.test:V`

# facebook - fb：当用户在网络应用上注册时，如何在用户个人资料上发帖？

> ID：15447544
> 
> 赞同：-1
> 
> 时间：2013-03-16T09:13:47.557
> 
> 标签：facebook, facebook-graph-api

我正在我的应用程序中集成 facebook 登录，一切正常。我现在想要两件事。

1.  我希望每当有新用户出现并单击“使用 facebook 登录”时，在所有过程之后，应该在该用户墙上发布一个帖子，该用户已开始使用我的应用程序链接到应用程序..就像我们看到的那些游戏，比如“<用户>开始使用德州扑克”

2.  获取用户头像...

这是它的链接[http://oauth.netne.net/index.php](http://oauth.netne.net/index.php)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:48:20.170

## 在用户的墙上发帖：

使用 Javascript：

```
 function doPost() {
    var params = {};
    params['message'] = "<USER> started using <YOUR APP NAME>";
    params['name'] = '<YOUR APP NAME>';
    params['description'] = '<DESCRIPTION ABOUT YOUR APP>';
    params['link'] = "<LINK TO YOUR WEBSITE>";
    //ON CLICKING THE POST WHERE YOU WANT USER  TO BE REDIRECTED e.g. www.yoursite.com
    params['picture'] = '<PATH OF PICTURE THAT YOU WANT TO BE DISPLAYED ON THE POST>';
    FB.api('/me/feed', 'post', params, function(response) {
        if(!response || response.error) {
            console.log('ERROR OCCURED '+response.error);
        }
        else {
            console.log('POSTED SUCCESSFULLY');
        }
    }} 
```

使用 PHP：

```
$ret_obj = $facebook->api('/me/feed', 'POST',
       array( 'link' => '<LINK TO YOUR WEBSITE>',
              'message' => '<USER> started using <YOUR APP NAME>',
              'description' => "<DESCRIPTION ABOUT YOUR APP>")); //Returns the POST ID. 
```

* * *

## 获取用户图像：

`$fbImageUrl = https://graph.facebook.com/**<FBUSER_ID>**/picture?type=<VALUE>`（或者）

`$fbImageUrl = https://graph.facebook.com/**<FBUSER_NAME>**/picture?type=<VALUE>`

哪里可以是“小”或“正常”或“大”或“方形”。

//保存图片：

```
$localFilePath = 'pathToImagesFolder/<SOME_NAME>.jpg'; //Use relative path.
$fbImage = file_get_contents($fbImageUrl); //Fetches the image and stores it in variable.
file_put_contents($file1, $img1); //Will save the image in the path specified. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:33:15.670

是的，你必须处理这种情况。如果用户没有授予访问权限试试这个：

```
 try {
        $ret_obj = $facebook->api('/me/feed', 'POST',
        array( 'link' => '<LINK TO YOUR WEBSITE>',
               'message' => '<USER> started using <YOUR APP NAME>',
               'description' => "<DESCRIPTION ABOUT YOUR APP>"));

      } catch(FacebookApiException $e) {
        $login_url = $facebook->getLoginUrl(array('scope' => 'publish_stream'));
        header("Location: $login_url"); 
      } 
```

但是，如果他们被连续重定向，这会惹恼用户。所以最好跳过这一步，而不是强迫用户接受它。请记住，您应该在注册时提供所需的所有范围。

# python - 解析 JSON 中的推文时的超出范围索引

> ID：15447545
> 
> 赞同：0
> 
> 时间：2013-03-16T09:14:04.747
> 
> 标签：python, json, parsing, twitter

我制作了一个简单的应用程序，它使用 Twitter 搜索 API 并根据主题名称查找推文并将文本存储在文本文件中。我每页收到 100 条推文，但有时我收到“OutOfRange”索引错误，执行就停在那里。

```
topic = raw_input('Enter the topic name: ')

f = open('out.txt', 'w')

for y in range(1, 15):
    j = urllib2.urlopen('http://search.twitter.com/search.json?q='+topic+'&rpp=100&page='+str(y))
    print('Done with page #'+str(y))
    j_obj = json.load(j)
    for x in range(1, 100):
        current = j_obj['results'][x]['text']
        f.write(str(''.join(c for c in current if ord(c) < 128))+'\n')
f.close() 
```

知道如何解决这个问题并完成程序执行吗？

我收到错误：

```
current = j_obj['results'][x]['text']
IndexError: list index out of range 
```

# java - classNotFoundException GWTBridge

> ID：15447547
> 
> 赞同：4
> 
> 时间：2013-03-16T09:14:22.963
> 
> 标签：java, gwt, classnotfoundexception

我正在开发一个 gwt webapp

并且在处理它时，我在尝试从删除 servlet 中的 URL 获取 XML 文件时遇到了这个异常。

我不太了解gwt的工作原理，也许有人可以帮助我

这是从 url 获取数据的代码

```
public static String readURL(String path) throws IOException{
    String data = "";

    URL url = new URL(path);
    URLConnection conn = url.openConnection();
    BufferedReader br = new BufferedReader(new InputStreamReader(
            conn.getInputStream()));

    String line;

    while ((line = br.readLine()) != null) {
        data += line;
    }
    br.close();

    System.out.println(data.length());

    return data;
} 
```

这是我得到的错误

```
 SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
    com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract void com.cpsc310.sc2.client.RouteService.storeParsedData()' threw an unexpected exception: java.lang.NoClassDefFoundError: com/google/gwt/core/client/GWTBridge
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.NoClassDefFoundError: com/google/gwt/core/client/GWTBridge
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)
    at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
    at com.google.gwt.xml.client.impl.XMLParserImpl.<clinit>(XMLParserImpl.java:29)
    at com.google.gwt.xml.client.XMLParser.<clinit>(XMLParser.java:28)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)
    at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
    at com.cpsc310.sc2.server.parser.BikeRouteParser.parseRoutesbyDOM(BikeRouteParser.java:39)
    at com.cpsc310.sc2.server.RouteServiceImpl.storeParsedData(RouteServiceImpl.java:93)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
    ... 38 more
Caused by: java.lang.ClassNotFoundException: com.google.gwt.core.client.GWTBridge
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:49:07.960

作为一般规则，您不能使用`client`GWT 客户端上下文（即服务器端）之外的包中的类
（这是我们试图在全局范围内应用的规则`gwt-user.jar`，有一些例外，但它们大多是实施细则）

如果要在服务器上解析 XML，请使用`javax.xml`，而不是`com.google.gwt.xml.client`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T07:43:39.427

在您的项目中添加以下内容（确保包正确）：

```
package com.google.gwt.core.client;
import com.google.gwt.core.shared.*;
/**
* Date: 1/17/13
* Time: 12:37 PM
* This class is used for fixing class not found com.google.gwt.core.client.GWTBridge;
*
* This is only needed for GXT 2 to work. Once we remove GXT2, this can be removed also.
*/
public abstract class GWTBridge extends com.google.gwt.core.shared.GWTBridge {
} 
```

原文： [http ://alexluca.com/2013/01/17/gwt-25-and-extgwt-224-classnotfoundexception-comgooglegwtcoreclientgwtbridge/](http://alexluca.com/2013/01/17/gwt-25-and-extgwt-224-classnotfoundexception-comgooglegwtcoreclientgwtbridge/)

# kinect - 用 D3D 绘制骨架数据：坐标空间转换

> ID：15447549
> 
> 赞同：1
> 
> 时间：2013-03-16T09:14:40.723
> 
> 标签：kinect, direct3d11

在使用 kinect（在 C++ 中）时，我正在学习 D3D 和坐标空间。虽然我可以使用 Direct2D 轻松绘制骨架位置，但我很好奇如何使用 Direct3D 11 绘制这些位置以及我需要哪些坐标空间转换。

一个简单的例子：我想根据左手的运动来平移一个立方体。跟踪左手关节，我可以得到骨架位置。但是，我如何将这些位置转换为立方体的世界空间可以理解的东西？

我尝试了一个解决方案：

1.  使用 SkeletonToDepth 转换将骨架位置转换为深度 - 给我屏幕空间的结果。
2.  使用 将屏幕空间点映射回对象空间`XMVector3UnProject(...)`，即本质上是一种光线拾取解决方案。

虽然这很好，但有没有更有效的方法不涉及映射回对象空间，并且可以让我直接在屏幕空间或至少在投影空间中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:20:43.040

我找到了适合我的答案。

来自骨架/面部跟踪器的 kinect 原始数据为您提供 kinect 相机空间中的数据，我将其定义为一个视图矩阵，定义为 (0,1,0)，查看 (0,0,-1)，原点 (0,0,0)。在 y = 45.8f 的 fov 投影矩阵，视口的纵横比，以及与应用程序匹配的远近（在我的情况下为 1.0f 到 2000.0f，因为我以毫米为单位工作），kinect 返回的任何 3D 点在相机空间中。因此，要进入世界空间，乘以视图矩阵的逆矩阵（在我的例子中，通过乘以 -1 来翻转变换点中的 x 轴坐标）。屏幕上的对象应跟随 kinect 的运动。

# servicebus - 在 Rebus 中是否不可能进行相同的流程订阅

> ID：15447551
> 
> 赞同：1
> 
> 时间：2013-03-16T09:15:00.383
> 
> 标签：servicebus, rebus

我正在尝试将 Rebus 用作同一进程/AppDomain 中的内部总线。

我修改了[Pub/Sub 示例](https://github.com/mookid8000/Rebus/tree/master/samples/Rebus.Samples/PubSub.Publisher)并添加了 SameProcessHandler：

```
class SameProcessHandler : IHandleMessages<string>
{
    public void Handle(string message)
    {
        Console.WriteLine("Same Process: {0}", message);
    }
} 
```

巴士启动后新增订阅：

```
Configure.With(adapter)
  .Logging(l => l.ColoredConsole(minLevel: LogLevel.Warn))
  .Transport(t => t.UseMsmqAndGetInputQueueNameFromAppConfig())
  .Subscriptions(s => s.StoreInXmlFile(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "rebus_subscriptions.xml")))
  .CreateBus()
  .Start();

adapter.Bus.Subscribe<string>(); 
```

最后添加了目标队列（不确定是否需要）：

```
<rebus inputQueue="pubsubsample.publisher.input" 
  errorQueue="pubsubsample.publisher.error" 
  workers="1" maxRetries="5">
  <endpoints>
    <!-- brute force ownership - all core .NET types are owned by our publisher :) -->
    <add messages="mscorlib" endpoint="pubsubsample.publisher.input"/>
  </endpoints>
</rebus> 
```

但是我收到错误“Rebus 当前未配置端点映射机制”，我应该在订阅时指定目的地或更改配置。我宁愿使用配置，但如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:41:27.653

似乎您需要指定 Rebus 可以在您的 app.config 中查找端点映射，即消息所有权：

```
.MessageOwnership(o => o.FromRebusConfigurationSection()) 
```

实际上，我认为错误消息解释了这一点，如果我没记错的话，它甚至提供了可以解决这种情况的必要 C# 和 XML ;)

# callback - gstreamer 中的 set_format 回调

> ID：15447555
> 
> 赞同：0
> 
> 时间：2013-03-16T09:15:33.663
> 
> 标签：callback, function-pointers, gstreamer

谁能向我解释一下`set_format()`gstreamer中的回调？

如果任何焊盘属性发生变化，是否会调用此函数？这个回调会在每帧处理之后发生吗？什么时候调用？这是否依赖于`reset()`gstreamer 的回调？这个`reset()`回调什么时候发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:57:29.207

set_format 是 gstreamer 回调函数。每当插件的 pad 属性被修改时，gstreamer 都会调用它。假设如果您以 gstreamer 编码器插件为例，每当编码器的 pad 属性（宽度、高度或帧速率）发生更改时，将调用 set_format 回调以通知编码器有关更改。这样编码器就会相应地修改其状态。

# php - 使用 PHP 从 MYSQL 获取 0 或 1 值

> ID：15447556
> 
> 赞同：0
> 
> 时间：2013-03-16T09:15:42.987
> 
> 标签：php, mysql

我正在尝试使用此代码来检查用户是否已通过验证，如果没有则将其重定向。我对结果有疑问，因为无论我是否经过验证，它都会不断重定向我。这是代码：

```
<?php
    if(loggedin()){ 
    $check_active_sql = mysql_query("SELECT * FROM members WHERE username = '$username'") or die(mysql_error());
    while ($check_active_res = mysql_fetch_array($check_active_sql)) {
        $active = $check_active_res['active'];
            if($active == "0"){
                header("Location: login.php?verify=true");
            }
            else
            {
            }
        }
    };
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:23:12.093

我假设一旦用户登录，您将数据库中的一个字段设置为 1 为什么不使用会话而不是使用这种方式？

只要您登录用户输入以下代码

```
session_start();
$_SESSION['logged_in'] = 1; 
```

现在，要检查用户是否登录，只需添加此功能

```
function check_login() {
if($_SESSION['logged_in'] == 1){
return true;
} else {
return false;
} 
```

然后，如果您想重定向他，只需执行以下操作

```
if(!check_login()) {
header('location: http://website.com');
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T09:21:05.523

尝试使用 empty() 作为：

```
 if(empty($active) && $active!=1){
         header("Location: login.php?verify=true");
     }else{

     } 
```

代替

```
 if($active == "0"){} 
```

**empty** — 确定变量是否为空

换句话说，如果变量是一个空字符串，它会返回真，假，array()，NULL，“0？，0，和一个未设置的变量。

# ios - 不能将 .ttf 字体包含到项目中

> ID：15447558
> 
> 赞同：7
> 
> 时间：2013-03-16T09:15:55.393
> 
> 标签：ios, objective-c, fonts, xcode4.5

我正在尝试将字体“Hipchick”包含到我的项目中，但它不起作用。我已经测试了一些方法并最终得到了这个：[iOS 提示：自定义字体](http://refactr.com/blog/2012/09/ios-tips-custom-fonts/)尝试解决这个问题，但它仍然不起作用。

这是一些屏幕和代码：

![在此处输入图像描述](../Images/35f1fa6dd197d8f0f20fd6fbf9a17540.png)

字体添加到项目中：“hitch__.ttf”

![在此处输入图像描述](../Images/3e2055721a917187c326e82493dfcc8c.png)

它被添加到 .plist。

![在此处输入图像描述](../Images/f2836728b064512c29a5da25b5a38b20.png)

它在捆绑包中。

![在此处输入图像描述](../Images/7bc4fc09164232f1d28a40bf88c26cc5.png)

这是有关字体的信息。

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

NSLog(@"hipch___: %@",[UIFont fontNamesForFamilyName:@"Hipchick"]);

testLbl.font = [UIFont fontWithName:@"Hipchick" size:30];
testLbl.text = @"Frank Zappa";
} 
```

我试过“Hipchick”、“hipchick”和“hitch__”，但它仍然显示错误的字体。

我真的很感激任何可能的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-16T09:22:55.250

这是如何在应用程序中添加自定义字体的步骤。

1 - 在您的应用程序中添加`.TTF`字体
2 - 修改`application-info.plist file`.
3 - 将**“应用程序提供的字体”**键添加到新行
4 - 并将每个`.TTF`文件（字体）添加到每一行。

![在此处输入图像描述](../Images/e0fc7df24fb9a12f33c27d831f1c66aa.png)

欲了解更多信息，请阅读[本](http://www.developers-life.com/how-to-include-ttf-fonts-to-ios-app.html)网站和[本](http://www.waterworld.com.hk/en/node/157)网站。

> 了解更多信息 ：

但是在将字体添加到您的应用程序后，您需要应用/写入您的字体的真实名称，因此请检查[如何从 otf 或 ttf 文件中获取字体名称？](https://stackoverflow.com/questions/16788330/how-do-i-get-the-font-name-from-an-otf-or-ttf-file)

# c# - 如何以编程方式将选定的单元格数据移动到 DataGrid 中的数组

> ID：15447559
> 
> 赞同：2
> 
> 时间：2013-03-16T09:16:07.693
> 
> 标签：c#, datagrid

这是一个将所有数据从数据网格移动到数组的代码。但我只想将选定的数据移动到这个数组中。选择可以通过鼠标完成。

```
public List<double[]> ExtractGridData(DataGridView grid)
    {
        int numCols = grid.Columns.Count;
        List<double[]> list = new List<double[]>();
        foreach (DataGridViewRow row in grid.Rows)
        {
            if (row.IsNewRow) // skip the new row
                continue;
            double[] cellsData = new double[numCols];
            foreach (DataGridViewCell cell in row.Cells)
                if (cell.Value != null)
                    cellsData[cell.ColumnIndex] = Convert.ToDouble(cell.Value);
            list.Add(cellsData);
        }

        return list;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:20:39.700

Use [`grid.SelectedRows`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectedrows.aspx) instead of `grid.Rows`.

You can also use [`grid.SelectedCell`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectedcells.aspx) if the [`SelectionMode`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectionmode.aspx) is set to `CellSelect` and you need individual cell values:

```
List<double> cellsData = new List<double>();
foreach (DataGridViewCell cell in grid.SelectedCells)
{
    if( cell.Value != null)
        cellsData.Add(Convert.ToDouble(cell.Value));
} 
```

# c++ - 如何使用 OpenGL 创建“无限”世界

> ID：15447560
> 
> 赞同：0
> 
> 时间：2013-03-16T09:16:21.037
> 
> 标签：c++, winapi, opengl

我需要使用 OpenGL 创建 GameOfLife，但我遇到了一个问题。此模拟中的整个世界是 100x100 单元格，但必须连接左右边缘以及顶部/底部。问题是我如何使用相机显示它，因为当右边缘在窗口中间时，我只看世界的右部分，但我也应该看左部分。

任务的规范是：OpenGL 1.1 with C++, WinApi and glOrtho

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:52:03.597

使用着色器将您的世界之外的坐标转换到内部。由于您使用的是正交投影，因此在片段着色器中使用模计算应该很容易完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:26:40.280

好吧，由于世界只有 100x100，而且我认为杀手级图形不是优先考虑的（彩色方块？），所以渲染场景两次应该不会太难，对吗？例如，在相机只看右边缘的情况下，只绘制场景最右侧的方块，然后在屏幕边缘的右侧立即绘制该屏幕最左侧的方块。然后，当相机超出网格边界时，将相机的 x 值减去（或者，如果您向左，则添加）100。这将是无缝的，您将获得您想要的效果——除非我错过了什么，在这种情况下告诉我。

另一种选择是将生命游戏渲染为纹理，并将该纹理（设置为沿两个轴重复）渲染到屏幕。这可能是一个更容易和更快的选择。只需将 rgb 数据写入缓冲区（字节数组，长度为 3*3*100*100）并将该字节数组映射到纹理。您可能会找到大量关于如何做到这一点的教程——包括关于它的 nehe.gamedev.com 遗留教程（顺便说一句，Nehe 是一个很棒的资源）。

如果您选择纹理方法，则也不需要任何相机数学。只需更改映射在四边形上的纹理坐标，它就会自动换行。

# jquery - 无法在 jQuery.append() 中设置标签样式？

> ID：15447561
> 
> 赞同：0
> 
> 时间：2013-03-16T09:16:24.223
> 
> 标签：jquery, css

我有一个文本框和一个按钮。当我单击按钮时，文本框内容将附加到 jQuery 中的`<body>`using`append()`方法。此外，在附加时，我正在尝试为我要附加的标签设置一个`style`（即）。`border-style`以下代码不符合我的预期：

```
<style>
.myStyle{
    border-style:solid;
}
</style>

<script>
$(document).ready(function()
    $("#btn2").click(function(){
        var text=document.getElementById('txt1').value
        $("body").append("<br><label class="myStyle">"+text+"</label>");
    });
});
</script>
<input id="txt1" type="text">
<button id="btn2">Append list items</button> 
```

在零件中添加`<div>`标签`append`也无济于事。以下是，但第一个标签框没有得到边距：

```
<script>
$(document).ready(function()
    $("#btn2").click(function(){
        var text=document.getElementById('txt1').value
        $("label").css("border-style","solid");
        $("body").append("<br><label>"+text+"</label>");
    });
});
</script>
<input id="txt1" type="text">
<button id="btn2">Append list items</button> 
```

-ing`append()`和样式元素有什么关系？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:18:31.267

```
$("body").append("<br><label class="myStyle">"+text+"</label>");
//---------------^-----------------^
// These are the same type of quotes

$("body").append('<br><label class="myStyle">'+text+'</label>');
//---------------^---------------------------^------^--------^
// Swap these four out with single quotes 
```

您应该已经注意到，在语法高亮显示中，myStyle 变为黑色，显示字符串中断。
如果您当前的编辑器没有向您显示此类错误，我还推荐一个更好的编辑器。就个人而言，我使用 WebStorm/PHPStorm。

此外，如果您要使用 jQuery，请使用 jQuery。

```
var text = $('#txt1').val(); 
```

# ios - 有没有办法在应用程序内跟踪从 iTunes 下载的 mp3？

> ID：15447567
> 
> 赞同：0
> 
> 时间：2013-03-16T09:16:55.087
> 
> 标签：ios, objective-c

是否有任何可用的 IOS 库或框架可以帮助我从 iTunes 商店下载 MP3，并且我可以跟踪下载。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:36:02.863

不。在 iOS 上，我们创建了无法访问手机上 iTunes 库的沙盒应用程序。没有 api 并且没有越狱就无法做你想做的事情。

# layout - PyQt 设计：由另一个小部件包裹的浮动小部件

> ID：15447571
> 
> 赞同：1
> 
> 时间：2013-03-16T09:18:05.117
> 
> 标签：layout, widget, pyqt

这是我在这里的第一个问题，我希望尽可能清楚。

我有一个带有两个内部元素的 Widget：WidgetA 应该在右上角，而 WidgetB 应该环绕第一个元素（所以它里面的文本应该在 WidgetA 下面）。

这就是我想要实现的目标：

```
________________________
|  _________     _____ |
|  |   B    |    | A | |
|  |  some  |    |___| |
|  |  text  |--------- |
|  | should go here  | |  
|  |_________________| |
|______________________| 
```

*   我已经搜索了一整天，但找不到任何与我的案例匹配的东西。
*   我试图建立一个[FlowLayout](http://qt.gitorious.org/pyside/pyside-examples/blobs/07c17233c1d3cb0f7a4b6e0bbfcc641ef4b4f5a4/examples/layouts/flowlayout.py)但仍然不是我想要的。
*   我尝试将它设计为将 HTML 和 CSS 放在 QLabel 中，但我发现在 PyQt 中不支持浮动（诺基亚你真丢脸！！）
*   我已经开始构建自定义 QGraphicsView + QGraphicsItem，但这对我来说有点困难，我希望也许有一个更简单的解决方案。

你们建议我使用什么布局？我应该编写自己的自定义布局吗？

在我的特殊情况下，WidgetA 是 QLabel（带有 QPixmap），而 WidgetB 是 QFormLayout（我现在认为这不是 Widget，但我认为这种方式可能对其他人更有帮助）。

我已经构建了一个代码示例，但这更像是一个设计问题，也许代码并不重要。

```
from PyQt4 import QtGui, QtCore

class MyWidget(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWidget, self).__init__(parent)

        self.layout = QtGui.QVBoxLayout()

        self.hLayout = QtGui.QHBoxLayout()

        self.smallLabel = QtGui.QLabel("small small")

        self.longLabel = QtGui.QLabel('''
            very very very very very very very 
            very very very very very very very 
            very very very very very very very
            long label''')
        self.longLabel.setWordWrap(True)

        self.hLayout.addWidget(self.longLabel)
        self.hLayout.addWidget(self.smallLabel)

        self.layout.addLayout(self.hLayout)

        self.setLayout(self.layout)

# I run this in Maya, so I don't care about  __main__ and apps      
w = MyWidget()
w.show() 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:17:35.313

你试过[QWebView](http://qt-project.org/doc/qt-4.8/qwebview.html)吗？这是一个基于 Webkit 的浏览器小部件，您也可以使用它来显示静态 HTML。这应该支持大多数 CSS 和 HTML。

# ios - AVURLAsset Not Loading (.mov file)

> ID：15447579
> 
> 赞同：5
> 
> 时间：2013-03-16T09:19:32.173
> 
> 标签：ios, avasset

I am attempting to load a file called output.mov (created on the iPhone) as an `AVURLAsset` using the following code:

```
NSURL *outputURL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@%@", NSTemporaryDirectory(), @"output.mov"]];

AVURLAsset *videoAsset = [AVURLAsset URLAssetWithURL:outputURL options:nil]; 
```

The file is located in the `tmp` directory of the app. No errors appear, but it seems that the asset is not loaded as no metadata is available (i.e. calling `NSLog(@"%@", [videoAsset commonMetadata])` returns nothing) so I can't do anything with the asset.

I have used the following code to ensure that the resource is reachable via the URL, and it definitely seems to be:

```
if ([outputURL checkResourceIsReachableAndReturnError:&err] == NO)
        NSLog(@"Not reachable!"); 
```

so I am unsure why the asset is not loading. I have also tried loading the asset using `[AVAsset assetWithURL:]` but that also doesn't work.

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-06T18:09:07.033

这可能是因为您的文件的编码。例如，如果该文件是使用`Sorenson 3 (SVQ3)`编解码器编码的，则您需要在将媒体文件传递给`AVURLAsset`. 你可以使用`QTMovieModernizer`类来做到这一点。

# java - Java Minimax Alpha-Beta 剪枝递归返回

> ID：15447580
> 
> 赞同：18
> 
> 时间：2013-03-16T09:20:04.787
> 
> 标签：java, recursion, artificial-intelligence, minimax, alpha-beta-pruning

我正在尝试用 alpha-beta 修剪为 Java 中的跳棋游戏实现 minimax。我的极小极大算法完美运行。我的代码使用 alpha-beta 代码运行。不幸的是，当我与标准 minimax 算法玩 1000 场比赛时，alpha-beta 算法总是落后 50 场左右。

由于 alpha-beta 修剪不应该降低移动的质量，只是实现它们所需的时间，所以一定是有问题的。但是，我已经拿出纸笔，画出了假设的叶节点值，并使用我的算法来预测它是否会计算出正确的最佳移动，并且似乎没有任何逻辑错误。我使用了这个视频中的树：[Alpha-Beta Pruning](http://www.youtube.com/watch?feature=player_detailpage&v=xBXHtz4Gbdo)来跟踪我的算法。它在逻辑上应该做出所有相同的选择，因此是一个有效的实现。

我还将打印语句放入代码中（它们已被删除以减少混乱），并且值正在正确返回它出现并且确实发生了修剪。尽管我尽了最大的努力，我还是无法找到逻辑错误的所在。这是我实现这一点的第三次不同尝试，他们都遇到了同样的问题。

我这里不能贴出完整的代码，太长了，所以我已经包含了与错误相关的方法。我不确定，但我怀疑问题可能出在非递归 move() 方法中，尽管我无法在其中找到逻辑错误，所以我只是在它中翻来覆去，可能会做一些事情没有押韵或理由，更糟而不是更好。

**是否有从 for 循环中的递归调用中恢复多个整数值的技巧？**它适用于我的 minimax 和 negamax 实现，但 alpha-beta 修剪似乎会产生一些奇怪的结果。

```
@Override
public GameState move(GameState state) 
{
    int alpha = -INFINITY;
    int beta = INFINITY;
    int bestScore = -Integer.MAX_VALUE;
    GameTreeNode gameTreeRoot = new GameTreeNode(state);
    GameState bestMove = null;
    for(GameTreeNode child: gameTreeRoot.getChildren())
    {
        if(bestMove == null)
        {
            bestMove = child.getState();
        }
        alpha = Math.max(alpha, miniMax(child, plyDepth - 1, alpha, beta));
        if(alpha > bestScore)
        {
            bestMove = child.getState();
            bestScore = alpha;
        }
    }
    return bestMove;
}

private int miniMax(GameTreeNode currentNode, int depth, int alpha, int beta) 
{
    if(depth <= 0 || terminalNode(currentNode.getState())) 
    {
        return getHeuristic(currentNode.getState());
    }
    if(currentNode.getState().getCurrentPlayer().equals(selfColor))
    {
        for(GameTreeNode child: currentNode.getChildren())
        {
            alpha = Math.max(alpha, miniMax(child, depth - 1, alpha, beta));

            if(alpha >= beta)
            {
                return beta;
            }
        }
        return alpha;
    }
    else
    {
        for(GameTreeNode child: currentNode.getChildren())
        {
            beta = Math.min(beta, miniMax(child, depth - 1, alpha, beta));

            if(alpha >= beta)
            {
                return alpha;
            }
        }
        return beta;
    }
}
//Checks to see if the node is terminal
private boolean terminalNode(GameState state)
{
if(state.getStatus().equals(win) || state.getStatus().equals(lose) || state.getStatus().equals(draw))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T13:27:38.433

我注意到你说你发现了问题，但 minimax alpha beta 修剪不应该是

```
if it is MAX's turn to move
  for child in children
     result = alphaBetaMinimax(child, alpha, beta)
     if result > alpha
        alpha = result
        if node is root
           bestMove = operator of child
     if alpha >= beta
        return alpha
  return alpha

if it is MIN's turn to move
  for child in children
     result = alphaBetaMinimax(child, alpha, beta)
     if result < beta
        beta = result
        if node is root
           bestMove = operator of child
     if beta <= alpha
        return beta
  return beta 
```

你写了：

```
 if alpha >= beta
    return beta
return alpha 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T00:34:47.180

2013年3月16日，sage88问：

> **是否有从 for 循环中的递归调用中恢复多个整数值的技巧？**它适用于我的 minimax 和 negamax 实现，但 alpha-beta 修剪似乎会产生一些奇怪的结果。

在 alpha beta pruning 中，唯一感兴趣的输出值是节点的分数：min 节点中 beta 的最终值被认为是其父 max 节点的 alpha 值；同样，最大节点中 alpha 的最终值被考虑为其父最小节点的 beta 值。所以：

**您的问题的答案是算法本身，因为它是最相关的技巧。**

也就是说，您的实现中有两个错误：1）正如 Adrian Blackburn 最初指出的那样，它错误地从 min 节点返回 alpha，反之亦然，从而扭曲了其准确性；2）它通过在当前节点的值中过早地考虑父 alpha 或 beta 来放弃修剪机会。此版本修复了返回值并最大化修剪：

```
private int miniMax(GameTreeNode currentNode, int depth, int alpha, int beta) {
    if (depth <= 0 || terminalNode(currentNode.getState())) {
        return getHeuristic(currentNode.getState());
    }
    if (currentNode.getState().getCurrentPlayer().equals(selfColor)) {
        int currentAlpha = -INFINITY;
        for (GameTreeNode child : currentNode.getChildren()) {
            currentAlpha = Math.max(currentAlpha, miniMax(child, depth - 1, alpha, beta));
            alpha = Math.max(alpha, currentAlpha);
            if (alpha >= beta) {
                return alpha;
            }
        }
        return currentAlpha;
    }
    int currentBeta = INFINITY;
    for (GameTreeNode child : currentNode.getChildren()) {
        currentBeta = Math.min(currentBeta, miniMax(child, depth - 1, alpha, beta));
        beta = Math.min(beta, currentBeta);
        if (beta <= alpha) {
            return beta;
        }
    }
    return currentBeta;
} 
```

感谢您提供一个有趣而有趣的问题:)

为了更有趣，这里澄清了您的`move()`方法，删除了对 的冗余调用`Math.max()`：

```
@Override
public GameState move(GameState state) {
    GameState bestMove = null;
    int bestScore = -INFINITY;
    GameTreeNode gameTreeRoot = new GameTreeNode(state);
    for (GameTreeNode child : gameTreeRoot.getChildren()) {
        int alpha = miniMax(child, plyDepth - 1, bestScore, INFINITY);
        if (alpha > bestScore || bestMove == null) {
            bestMove = child.getState();
            bestScore = alpha;
        }
    }
    return bestMove;
} 
```

最后（更有趣），只是一个建议，更改方法名称以阐明 的意图 `terminalNode()`，尽管我会将其移入`GameState`以便可以在没有参数的情况下调用它：

```
private boolean isTerminal(GameState state) {
    //return Is.any(state.getStatus(), win, lose, draw);
    return state.getStatus().equals(win)
        || state.getStatus().equals(lose)
        || state.getStatus().equals(draw);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-27T12:58:05.940

只回答你的问题

> 是否有从 for 循环中的递归调用中恢复多个整数值的技巧？

是的，在 Java 中，您需要将一个对象传递给递归函数调用，然后修改该对象的内容。函数返回后，您将能够访问修改后的值。

例如。

```
class ToBeReturned {
    int returnValue1;
    int returnValue2;
    int returnValue3;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-16T02:19:53.573

你已经解决了你的问题，但是你遇到的问题很常见。因此，每当您为 AI 代理构建算法的一部分时，您都必须对其进行适当的测试。因此，一旦您的极小极大算法正确，您就可以生成许多随机树并检查结果是否相同。例如在 python 中，你可以这样做：

```
class Node():
    def __init__(self, data, children):
        self.data = data
        self.children = children

def generateTree(depth, branching):
    total = branching**depth
    values = [randint(-100, 100) for _ in xrange(total)]
    level = [Node(values[i], []) for i in xrange(total)]

    for _ in xrange(depth):
        total /= branching
        level = [Node(None, level[i * branching: (i+1) * branching]) for i in xrange(total)]

    return level[0], values 
```

现在您可以生成具有许多随机树的树并比较结果。

```
tree, values = generateTree(depth, branching)
print negamax(tree, depth, 1) == alpha_beta_negamax(tree, depth, float('-inf'), float('inf'), 1) 
```

* * *

不要忘记 minimax 和 alpha-beta 只返回最佳值，而您对真实游戏感兴趣的是走法。可以直接修改它们以使其可以返回移动，但这取决于开发人员来决定如何返回移动。这是因为可能有许多动作会导致最佳解决方案（您可以返回第一个、最后一个或最常见的一个是找到所有动作并返回随机一个）。

在您的情况下，问题在于返回值的随机性，因此在测试期间，好的方法是修复随机性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-08T12:50:43.743

要获得下注修剪结果，您应该实施某种移动排序。在国际象棋中，它通常是捕获或检查。这些动作最容易改变评估，因此对剪枝有很大的影响。在跳棋中，它可能会在第 8 级上使用对手的石头或提升自己的石头（抱歉不知道使用的术语）。

# mysql - Java EE 6 Openshift MySQL 中的 Unicode 显示不正确

> ID：15447594
> 
> 赞同：1
> 
> 时间：2013-03-16T09:21:39.027
> 
> 标签：mysql, jsp, unicode, openshift

我有一个需要使用 Unicode 的 Java EE 6 应用程序。我尽我所能（包括这篇文章中的指导：[https](https://openshift.redhat.com/community/forums/openshift/jboss-mysql-html-forms-encoding-problem) ://openshift.redhat.com/community/forums/openshift/jboss-mysql-html-forms-encoding-problem ）但没有一个有效。问题是我需要将“useUnicode=true&characterEncoding=UTF-8”附加到 JDBC MySQL 连接字符串。解决方案的细节在这里：[JSP encoding while inserting non-English text in MySQL database](https://stackoverflow.com/questions/8311463/jsp-encoding-while-inserting-non-english-text-in-mysql-database)

不幸的是，我无法在 Openshift 中附加连接字符串，因为无法修改standalone.xml。如果重新启动齿轮，standalone.xml 文件也将被重置。如果我使用 JNDI 查找，它将不起作用。唯一的方法是附加 JDBC 连接字符串。

有什么解决办法吗？请帮忙！

注意：我在 OpenShift 上使用的应用服务器是 JBoss 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:07:27.223

你如何修改standalone.xml，因为它应该在你的本地git repo的 .openshift/config/ 目录中。修改后，执行 git commit/push 即可。Standalone.xml 预先配置了您的 mysql 连接 (MysqlDS)，因此您应该能够添加它，然后您就可以参加比赛了。

随意张贴到我们的论坛： [https ://openshift.redhat.com/community/forums/openshift](https://openshift.redhat.com/community/forums/openshift)

# c++ - 有没有可以可视化C++代码结构的程序？

> ID：15447599
> 
> 赞同：4
> 
> 时间：2013-03-16T09:22:41.030
> 
> 标签：c++, structure, code-visualization

我有包含一百多个源文件的源代码，很难理解它的作用，函数如何相互使用，执行流程是什么......

是否有任何程序可以以易于理解的方式可视化 C++ 代码的结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:24:01.060

最著名的工具之一是[doxygen](http://www.doxygen.nl/)，它可以在某些模式下生成漂亮的 UML 图。

# ios - 如何在 xcode 中没有 xib 的情况下将字符串值从一个视图控制器传递到另一个视图控制器？

> ID：15447608
> 
> 赞同：1
> 
> 时间：2013-03-16T09:24:35.243
> 
> 标签：ios, objective-c, xcode, string, uiviewcontroller

如何将一个字符串变量从我的 firstviewcontroller 类传递给 secondviewcontroller 类？这里 secondviewcontroller 类只有“.m”和“.h”文件；当前在 secondviewcontroller ".h" 文件中

```
@property(nonatomic,retain) NSString *value2; 
```

在`secondviewcontroller.m`我正在使用的文件中

```
NSString *str=value2;
NSLog(@"%@",str);

// it prints a null 
```

在我的`firstviewcontroller.m`文件中分配喜欢

```
secondviewcontroller *second=[[secondviewcontroller alloc]init];
second.value2=value1; 
```

value1 在 firstviewcontroller 中声明为字符串..请告诉我一个解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T09:51:56.517

尝试分配您的 value1 之类的。

**第一视图控制器.m**

```
NSString *value1 = [[NSString alloc] initWithString:@"my value1"]; 
```

然后分配`vc.value2 = value1;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:35:10.983

**一般逻辑是：**

> **注意：***value1*和*value2* 的数据类型**必须**相同。

首先放入`secondVC.h`文件

```
NSString *value2; 
```

给它`@property`和`@synthesize`适当的。

在你的 `firstVC.m`

```
NSString *value1 = @"this is string"; // in your case check it is, proper or not (i mean  nil/not nill)?? 
```

并在创建对象`secondVC`

```
secondVC *vc = [[secondVC alloc] init];
vc.value2 = value1;
[self presentModalViewController:vc animated:YES]; 
```

并写入`secondVC.m`文件

```
NSLog(@"%@",value2); 
```

并检查放入**控制台**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:27:35.913

这里出现的最可能的原因是您没有在第二个视图控制器的 .m 文件中合成该属性。除非您合成该属性，否则它不会启动并且为零。请发布整个代码。

您需要为该属性声明一个变量并合成该属性，以便将值分配给该变量。

如果不是这样，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T09:34:45.580

合成你的财产并将其与自我一起使用。价值2。

希望这能解决您的问题。

祝一切顺利 ！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T10:54:59.227

好的，这是我的第一个视图控制器，它有 xib 文件

。H

```
#import "SecondViewController.h"
@interface ViewController : UIViewController

@property(strong, nonatomic) SecondViewController * svc;

@end 
```

第二个没有xib。

。H

```
#import <UIKit/UIKit.h>
@class ViewController;

    @interface SecondViewController : UIViewController

    @property (strong, nonatomic) ViewController * vc;

    @property (strong, nonatomic) NSMutableString * passValue;

    @end 
```

在实施中

第一个 .m 是 viewDidLoad

```
- (void)viewDidLoad
{
     NSLog(@"viewDidLoad");

    [super viewDidLoad];

    svc=[[SecondViewController alloc] init];

    svc.vc=self;

    NSString * str= svc.passValue;

    NSLog(@"%@",str);

    svc.passValue =[@"StringFromFirstView" mutableCopy];

    [svc viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.
} 
```

在第二个.m

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        passValue = @"mySValue";
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    [super viewDidLoad];

    NSLog(@"passValue %@",passValue);

    // Do any additional setup after loading the view.
} 
```

当我运行代码时

```
 2013-03-16 13:11:40.178 ali[787:c07] viewDidLoad
2013-03-16 13:11:40.179 ali[787:c07] mySValue
2013-03-16 13:11:40.180 ali[787:c07] passValue StringFromFirstView 
```

# c++ - Simple template not compiling - C++

> ID：15447611
> 
> 赞同：1
> 
> 时间：2013-03-16T09:25:12.447
> 
> 标签：c++, templates, compiler-errors

I have the following, rather simple, template:

```
template< typename T >
struct compare {
  bool operator()( T a, T b ) { return a < b; }
};

template< typename T, typename Comp = compare< T > >
T min( T a, T b ) {                                  // line 22
  Comp comp;
  if( comp( a, b ) ) return a;
  return b;
}

template< typename T, typename Comp = compare< T > >
T max( T a, T b ) {                                  // line 29
  Comp comp;
  if( !comp( a, b ) ) return a;
  return b;
} 
```

When I compile the previous code I get the following errors:

```
utility.h:22: error: default template arguments may not be used in function templates
utility.h:29: error: default template arguments may not be used in function templates 
```

I have written before many templates like this, much more complicated, but it's the first time I get this error. What am I doing wrong? Thanks in advance.

# c# - Recordset to Dataset conversion

> ID：15447614
> 
> 赞同：1
> 
> 时间：2013-03-16T09:25:31.260
> 
> 标签：c#, vb6, dataset, recordset

I am converting `VB6` code to `C#` so far the conversion goes fine but I was just confused with `Recordset` conversion to `Dataset` so far I converted and assigned the recordset data using dataset as follows

```
String strData = ds.Tables[0].Rows[0]["Col"].ToString(); 
//this is in VB6 code rs!Col 
```

Is this conversion correct, if so I am having some recordset as follows

```
double d = rs(somestring).Value // before this a select query executed 
```

How can I convert this using `dataset`

```
double d= double.Parse(ds.Tables[0].Rows[0]["someString"].ToString()); 
```

Also `rs.Fields(col)`

Is it correct or any other?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:30:42.663

你可以尝试这样的事情： -

```
ADODB.Connection oConn = new ADODB.Connection();
oConn.Open("Connection String", "", "", 0);
string strQuery = "";//Your select query or the query through which you are fetching data from database";
ADODB.Recordset rs = new ADODB.Recordset();
System.Data.OleDb.OleDbDataAdapter adapter = new System.Data.OleDb.OleDbDataAdapter();
DataTable dt = new DataTable();
rs.Open(strQuery, " Connection String,                ADODB.CursorTypeEnum.adOpenForwardOnly, ADODB.LockTypeEnum.adLockReadOnly, 1);
adapter.Fill(dt, rs);
return dt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:34:14.573

ado.net 中最接近记录集的对象是阅读器。阅读器打开一个只进只读游标并允许您阅读记录。记录集和数据集之间有一个基本的区别。

数据集是查询数据的内存完整副本。在数据集中获取数据后，它不需要连接，而记录集需要连接。如果您不想在结果中前后移动，您应该尝试阅读器。您将能够使用类似的语法从阅读器中获取数据。

# ruby-on-rails-3 - default_url_option lost for Devise?

> ID：15447620
> 
> 赞同：1
> 
> 时间：2013-03-16T09:26:15.340
> 
> 标签：ruby-on-rails-3, devise

I have set default_url_option for I18n in the ApplicationController, which works well for all controllers except for Devise. I lost the :locale option after redirect using authenticate_user! method from Devise.

How to enable this for devise?

Thank you

# r - 如何在 R 中绘制更平滑的曲线

> ID：15447622
> 
> 赞同：8
> 
> 时间：2013-03-16T09:26:30.423
> 
> 标签：r, plot

使用`R`，我绘制了一个阴影图。如果你看到曲线，它们并不平滑。如何使它们光滑？即使是 excel 也能绘制出更平滑的曲线。设备特性：windows 7，屏幕分辨率=1366 x 768（最大）

这是情节。

![阴谋](../Images/eaa47c41aa0d86347dbd9956815a0193.png)

以下代码用于绘制绘图。

```
plot(NA,xlim=c(0,1),ylim=c(0,1),xlab="delta",ylab="K", xaxs="i",yaxs="i") # Empty plot
a1 <- curve((x+x^7-x^2-x^4)/(1+x-x^3-x^4), from=0, n=450000, add = TRUE) # First curve 
```

完整代码可[在此处获得](https://stackoverflow.com/questions/15431924/general-issues-regarding-a-plot)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T11:17:16.220

目前，您的绘图看起来参差不齐，不是因为曲线本身，而是因为您的屏幕显示方式。

@Hemmo 建议通过使用矢量图形格式而不是光栅格式来解决此解决方案。这是最好的解决方案，但如果您迫切需要使用光栅格式，则可以使用抗锯齿。

抗锯齿意味着绘图在线条周围绘制了一些灰色绒毛，因此它们看起来就像人眼弯曲的一样。如果放大抗锯齿图像，您会很容易看到这一点。目前：

```
png("no-alias.png")
# Your code
dev.off() 
```

![在此处输入图像描述](../Images/feb33fdcabb24e5eb986020491374340.png)

cairographics 提供抗锯齿功能。因此，将其用作以下选项`png`：

```
png("alias.png", type="cairo")
# Your code again
dev.off() 
```

![在此处输入图像描述](../Images/d901e95a5241c1cd2e1abd054b039c9a.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T10:24:53.647

我相当肯定，如果您将图形绘制为 pdf 格式，曲线是完全平滑的。这是 Rgui 的内部显示器，它显示曲线不平滑，在上面使用复制粘贴可能会导致问题。最好直接绘制到文件中，如下所示：

```
# Open device:
pdf("D:/test.pdf") #change for appropriate file path
plot(NA,xlim=c(0,1),ylim=c(0,1),xlab="delta",ylab="K", xaxs="i",yaxs="i")
a1 <- curve((x+x^7-x^2-x^4)/(1+x-x^3-x^4), from=0, n=450000, add = TRUE)
dev.off() #close device 
```

现在看一下pdf，它看起来完全没问题。如果您想要例如 jpg 图像、使用函数`jpeg`等，请参阅`?jpeg`有关如何保存为 tiff、jpeg、png 或 bmp 以及图像大小、分辨率等参数的更多详细信息。

（注意，这里使用的术语设备等可能并不完全正确，我对这个术语并不完全熟悉，如果合适的话，更聪明的人可以编辑）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T10:40:03.360

我不确定您的问题是否存在（在您显示的图中不清楚），但您可以通过对您的点进行三次（或 Hermite）样条插值来改善。这里有一些使用`spline`和的选项`splinefun`。

![在此处输入图像描述](../Images/ce414fc05b8e18e816aef315be6fd62a.png)

```
layout(matrix(c(1,2,3),nrow=3,byrow=TRUE))
plot(NA,xlim=c(0,1),ylim=c(0,0.2),xlab="delta",ylab="K", xaxs="i",yaxs="i",
     main='orginal plot with 45000 points') # Empty plot
a1 <- curve((x+x^7-x^2-x^4)/(1+x-x^3-x^4), from=0, n=45000, add = TRUE)
x <- seq(0,1,length.out=1000)
y <- (x+x^7-x^2-x^4)/(1+x-x^3-x^4)
f <- splinefun(x, y)
plot(NA,xlim=c(0,1),ylim=c(0,0.2),xlab="delta",ylab="K", xaxs="i",yaxs="i",
     main='splinefun plot with 1000 points') 
curve(f(x),0, 1, col = "green", lwd = 1.5,add=TRUE)
plot(NA,xlim=c(0,1),ylim=c(0,0.2),xlab="delta",ylab="K", xaxs="i",yaxs="i",
     main='spline plot with 1000 points') 
lines(spline(x,y), col = 2) 
```

# java - insert and select data from java with oracle 10g

> ID：15447629
> 
> 赞同：-2
> 
> 时间：2013-03-16T09:27:20.580
> 
> 标签：java, sql, oracle10g

please how fix this error thanks a lot error: package oracle.jdbc.driver does not exist.

tell me how the package install on my PC

for my following code :

```
 import java.sql.*;
     import java.sql.Statement;

    public class ConnectOracle {

    public static void main(String[] args) {

    try {
        DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
        System.out.println("Connecting to the database...");
        Connection connection = DriverManager.getConnection(
                "jdbc:oracle:thin:@localhost:1521:orcl", "system", "123");
        Statement statement = connection.createStatement();
        ResultSet resultset = statement.executeQuery("select 'Connected'                                               from dual");
        resultset.next();
        String s = resultset.getString(1);
        System.out.println(s);
        statement.close();
        connection.close();
    } catch (Exception e) {
        System.out.println("The exception raised is:" + e);
    }
      }

          } 
```

please give me some code to insert and delete (how execute ?!).Thanks .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T09:44:21.540

你的代码是：

```
DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver()); 
```

重写上面的代码如下，它应该可以工作

```
Class.forName("oracle.jdbc.driver.OracleDriver"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:33:20.010

要运行非查询，您需要使用执行

```
statement.execute("UPDATE ...")
statement.execute("INSERT ...")
statement.execute("DELETE ...") 
```

您可以在此处查看该方法的签名：[java.sql.Statement.execute](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#execute%28java.lang.String%29)

# iphone - -[UIBarButtonItem setBackgroundImage:forState:style:barMetrics:]: 无法识别的选择器发送到实例

> ID：15447631
> 
> 赞同：1
> 
> 时间：2013-03-16T09:27:23.593
> 
> 标签：iphone, ios5, ios6, uibarbuttonitem

我开发了一个应用程序，其**部署目标**和**ios sdk 为 6.0**。后来我的客户要求应用程序应该在 ios 5.0+ 设备中运行。所以我已将部署目标更改为 5.0 并禁用了 IB 的自动布局属性，如堆栈中所述，但[现在](https://stackoverflow.com/a/14772122/2086830)我收到如下所示的错误：

> **> -[UIBarButtonItem setBackgroundImage:forState:style:barMetrics:]: 无法识别的选择器发送到实例 0x2971f0**

我没有发现我的 UIBarButtonItem 有什么问题，

```
 addButton = [[UIBarButtonItem alloc]
        initWithBarButtonSystemItem:UIBarButtonSystemItemAdd
        target:self
        action:@selector(addProject)]; 
```

现在我正在努力寻找解决方案，等待您的宝贵帮助..提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:47:49.617

`setBackgroundImage:forState:barMetrics:`在 iOS 5.0+ 中可用，但`setBackgroundImage:forState:style:barMetrics:`仅在 iOS 6.0+ 中可用

# python - Python: Convert UTC time-tuple to UTC timestamp

> ID：15447632
> 
> 赞同：17
> 
> 时间：2013-03-16T09:27:25.047
> 
> 标签：python, datetime

My problem: I need to convert a UTC time-tuple into a UTC timestamp. But I have some confusions.

First a bit info:

*   `time.mktime(tuple)`: this function always returns the timestamp in **local** time.

    > This is the inverse function of localtime(). Its argument is the struct_time or full 9-tuple which expresses the time in **local time, not UTC.**

*   `calendar.timegm(tuple)`: this returns the **UTC timestamp** from the supplied time tuple

    > takes a time tuple such as returned by the gmtime() function in the time module, and returns the corresponding Unix timestamp value. In fact, **time.gmtime() and timegm() are each others’ inverse**

Now let's do a test:

```
>>> from datetime import datetime
>>> import time
>>> import calendar as cal

>>> utc_now = datetime.utcnow()
>>> now = datetime.now()
>>> utc_now
datetime.datetime(2013, 3, 16, 9, 17, 22, 489225)
>>> now
datetime.datetime(2013, 3, 16, 5, 17, 29, 736903)

>>> time.mktime(datetime.timetuple(utc_now)), time.mktime(datetime.timetuple(now))
(1363439842.0, 1363425449.0)
>>> cal.timegm(datetime.timetuple(utc_now)), cal.timegm(datetime.timetuple(now))
(1363425442, 1363411049) 
```

Why are there four different values? And which one is right when I want to convert a UTC time-tuple into a UTC timestamp?

***UPDATTE***

* * *

I think I have found answers to my confusions, so let me explain.

First, we need to know something important:

> There are two kinds of date and time objects: “naive” and “aware”.
> 
> An aware object has sufficient knowledge of applicable algorithmic and political time adjustments, such as time zone and daylight saving time information, to locate itself relative to other aware objects. An aware object is used to represent a specific moment in time that is not open to interpretation [1].
> 
> A naive object does not contain enough information to unambiguously locate itself relative to other date/time objects. ***Whether a naive object represents Coordinated Universal Time (UTC), local time, or time in some other timezone is purely up to the program, just like it is up to the program whether a particular number represents metres, miles, or mass.*** Naive objects are easy to understand and to work with, at the cost of ignoring some aspects of reality.

What we get from `datetime.utcnow()` or `datetime.now()` are "naive" objects. This means that the `datetime` object that is returned does not, in anyway, say anything about your local time or UTC time -- it just represents "some time". It just encapsulates date & time information (year, month, day, hour,minutes, seconds, etc.). It is YOUR responsibility to associate it with the notion of local or UTC.

So, remember that a naive datetime object just represents "some time". The `datetime.now()` function returns a "some time" that is equal to your current time, and the `datetime.utcnow()` function returns "some time" that is the current time in Greenwich England (which is what UTC is).

The "some time" is just a value for date & time. And note that on different locations on earth, the "some time" occurs on different times. For example, if a "some time" value is January 1, 10:30, than it will be the current time in Greenwich England some 5 hours BEFORE it becomes the current time in New York.

Hence we can see that there is two things: a generic "some time" value, and the notion that that "some time" becomes current time at different locations at different "times". (no pun here, read on)

Now, let's first define what is "epoch". We know that "some time" is just a generic value of time. Then, the epoch is a "some time" that occurred in Greenwich England where the values of the parameters are: `January 1 1970, 00:00:00`.

A "timestamp" is no. of seconds that have elapsed since the epoch. This means that the timestamp was `0` when the time was `Jan 1, 1970, 00:00:00` in Greenwich England. But the timestamp was approx. (5 * 60 * 60) when time was `Jan 1, 1970, 00:00:00` in New York.

```
>>> tt = datetime.timetuple(datetime(1970, 1, 1, 0, 0, 0))
>>> cal.timegm(tt)
0 
```

Thus, we can see that the same "some time" value of `Jan 1, 1970, 00:00:00` has different timestamps when we change locations. Hence when you talk about timestamp, you need to also say "what location" is the timestamp related to, and how much eastward or westward that location is related to Greenwich England. That location is expressed as a "timezone".

Now, every system (computer) has a timezone configured, and all timestamps related to that timezone effectively become the "local". The UTC is the global reference.

So, let's say you have an `X` value for "some time" which converts to:

*   `Y` timestamp in your local time
*   `Z` timestamp in UTC

then this means that `Y` no. of seconds will have to elapse for "some time" to become the current time in your location and `Z` no of seconds will have to pass in order for current time in Greenwich England to become "some time".

Now, finally, let's come back to our functions `mktime` and `timegm`. These take a time-tuple, which is just another representation for "some time". Remember that we're passing them a naive time which does not have any notion of local or UTC.

Let's say `X` is a time-tuple representing a naive "some time". Then

*   `mktime(X)` will return the no. of seconds that will have to elapse in order for your local current time to become that "some time", and
*   `timegm(X)` will return the no of seconds that will have to be spent to make the current time of Greenwich England equal to that "some time".

* * *

In the example above, `now` and `utc_now` represent naive "some time", and when we feed these "some time" values into `mktime` and `timegm`, they simply return the no. of seconds that have to pass for the corresponding locations (your location and Greenwich England) to have their current time be that "some time".

* * *

Finally, back to my problem: I need to convert a UTC time-tuple into a UTC timestamp.

Firstly, there is no concept of "UTC time-tuple" -- it's just "some time". If I need to convert it to UTC, I simply use `timegm`:

```
cal.timegm(datetime.timetuple(utc_now)) 
```

which will give me the timestamp for the current UTC time (i.e., the current "some time" in Greenwich England).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T09:32:27.657

实际上只有*三个*不同的值。这两个值：

```
1363425449.0 (time.mktime(datetime.timetuple(now))
1363425442   (cal.timegm(datetime.timetuple(utc_now))) 
```

仅相差 7 秒，这是您在转储变量时最初看到的：

```
>>> utc_now
datetime.datetime(2013, 3, 16, 9, 17, 22, 489225)
>>> now
datetime.datetime(2013, 3, 16, 5, 17, 29, 736903) 
```

（注意输出的秒部分中的 22 与 29。）

其他两个值完全是错误的，因为您应用了错误类型的参数 - 您`time.mktime`使用 UTC 值而不是本地值调用，并且`cal.timegm` 使用本地值而不是 UTC 值调用。文档清楚地说明了预期 - 因此请确保您只使用适当的值。您基本上会看到您的本地时间偏移量（从外观上看是 4 小时）在不应该应用的情况下应用（根据错误的位置在不同的方向上）。

当您诊断这样的事情时，使用[epochconverter.com](http://epochconverter.com)会很有帮助，它会为您提供当前的 Unix 时间戳，以便您可以将其与输出进行比较。

# c - Embedded ext2 access library

> ID：15447635
> 
> 赞同：2
> 
> 时间：2013-03-16T09:27:35.570
> 
> 标签：c, embedded, ext2

Is there any os-independent read-write capable Ext2 FS access C library for embedded applications?

I'm looking for something that is similar to what [FatFS](http://elm-chan.org/fsw/ff/00index_e.html) is for FAT16/32.

I tried to port the corresponding Linux kernel filesystem module, but it is far from being easily portable.

# .htaccess - 子域中的 htaccess 跳过重定向规则

> ID：15447637
> 
> 赞同：0
> 
> 时间：2013-03-16T09:27:38.540
> 
> 标签：.htaccess, mod-rewrite, apache2

当使用特定的子域链接格式时，我试图让我的子域的访问者只直接进入。我知道这也会阻止 SE，但我不希望子域被索引。

允许的链接应如下所示：

> subdomain.maindomain.com/aaa/bbb/ccc

并应改写为：

> subdomain.maindomain.com/index.php?a=aaa&b=bbb&c=ccc

凡是不属于这种形式并且来自空的或外部的引荐来源网址的东西都应该转到主域并且没有变量：

maindomain.com/

我尝试了各种配置，子域文件夹中的最后一个 .htaccess 文件如下所示：

```
RewriteEngine on
RewriteRule ^/?(\w{3})/(\w{3})/(\w{3})$ index.php?a=$1&b=$2&c=$3 [S=1,L]

RewriteCond %{HTTP_REFERER} !^http://(www\.)?maindomain\.com [NC]
RewriteRule ^(.*)$ http://domain\.com/ [L] 
```

但它仍然没有做我想要的，它还将允许表单的子域请求重定向到主域，它还将变量作为请求添加到主域，转到此页面

> maindomain.com/?a=aaa&b=bbb&c=cee

你能帮我解决上面定义的情况吗？

第二个问题，关于性能：我显然可以使用 PHP 进行此验证/重定向，您认为什么会更有效？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:45:00.213

如果我正确理解了您的逻辑，请尝试以下操作：

```
RewriteEngine on
RewriteBase /

# Don't do any more rewrites if on index.php
# Note that you can add the HTTP_HOST condition here if you only want it to be active for the subdomain
RewriteRule ^index\.php$ - [L]

# If on subdomain then check that the referer is from main domain and attempt to match a regex
# If we find a match then ignore the next rule that rewrites subdomain to domain.com
# Basically this is like an awkward if-else statement..
# ================    

RewriteCond %{HTTP_HOST} ^subdomain\.domain\.com$
RewriteCond %{HTTP_REFERER} ^http://(www\.)?domain\.com [NC]
# Rewrites /aaa/bbb/ccc to /index.php?a=aaa&b=bbb&c=ccc
RewriteRule ^(\w{3})/(\w{3})/(\w{3})$ index.php?a=$1&b=$2&c=$3 [S=1,L]

# Redirect all requests from subdomain to domain.com by default
# ================   

RewriteCond %{HTTP_HOST} ^subdomain\.domain\.com$
# Add the trailing question mark to delete all query parameters
RewriteRule .* http://domain.com/? [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:10:48.570

你很接近。您只需要几个额外的部件

*   该标志`S=1`不会有害，但也不是必需的。
*   将引用条件移动到第一条规则并反转它。您可能还希望允许任何子域。
*   添加一个额外的否定条件以排除`index.php`被重定向到主域。
*   您没有在第二条规则的替换中使用原始请求，因此您不需要捕获它。
*   附加一个问号`?`以防止将参数转发到主域。
*   添加一个`R`标志，如果您希望客户端被重定向而不仅仅是请求被重写。

所有部分在一起

```
RewriteEngine on

RewriteCond %{HTTP_REFERER} ^http://(.+\.)?maindomain\.com [NC]
RewriteRule ^(\w{3})/(\w{3})/(\w{3})$ index.php?a=$1&b=$2&c=$3 [L]

RewriteCond %{REQUEST_URI} !$index\.php$
RewriteRule ^ http://domain\.com/? [R,L] 
```

关于性能，如果您仅使用 .htaccess 重写或重定向，则该工作甚至在遇到一些 PHP 脚本之前就完成了。所以，我认为最好用.htaccess 来做这件事。

# android - Tab inside single sherlockFragment

> ID：15447638
> 
> 赞同：0
> 
> 时间：2013-03-16T09:27:59.430
> 
> 标签：android, actionbarsherlock, android-tabhost

Isn't possible to have tabs to single SherlockFragment?

In my app., i used ActionBarSherlock with sliding menu.,and for each slidingMenu contents i have created 4 fragments., in that for a single sherlockFragment class i need to use tabs.

how it is possible.,Any ideas !!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:33:20.997

查看 SherlockFragment 示例，您将找到如何在片段中使用选项卡的示例
[http://actionbarsherlock.com/samples.html](http://actionbarsherlock.com/samples.html)
[https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples/fragments](https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples/fragments)

# git - 错误：无法从任何存储库（git 和 Jenkins）获取

> ID：15447643
> 
> 赞同：3
> 
> 时间：2013-03-16T09:28:19.580
> 
> 标签：git, jenkins

在使用 Git-plugin (1.3.0) 的 Jenkins (1.504) 上，从 git repo 中提取时经常会出现此错误

```
 hudson.plugins.git.GitException: Command "C:\Program Files (x86)\Git\bin\git.exe fetch -t origin +refs/heads/*:refs/remotes/origin/*" returned status code 128:
    stdout: 
    stderr: error: error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure while accessing https://user:password@git.internal.com/scm/projet/project.git/info/refs?service=git-upload-pack
    fatal: HTTP request failed

        at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:772)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:772)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommand(CliGitAPIImpl.java:738)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.fetch(CliGitAPIImpl.java:159)
    at hudson.plugins.git.GitSCM.fetchFrom(GitSCM.java:797)
    at hudson.plugins.git.GitSCM.access$000(GitSCM.java:57)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:976)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:941)
    at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2348)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at hudson.remoting.Engine$1$1.run(Engine.java:58)
    at java.lang.Thread.run(Unknown Source)
ERROR: Could not fetch from any repository 
```

另一种变体：

```
stderr: error: The requested URL returned error: 400 while accessing https://user:password@git.internal.com/scm/projet/project.git/info/refs
fatal: HTTP request failed

    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:772)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommand(CliGitAPIImpl.java:738)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.fetch(CliGitAPIImpl.java:159)
    at hudson.plugins.git.GitSCM.fetchFrom(GitSCM.java:797)
    at hudson.plugins.git.GitSCM.access$000(GitSCM.java:57)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:976)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:941)
    at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2348)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
ERROR: Could not fetch from any repository 
```

通常它只是重新启动工作的问题，然后它就可以正常工作了。但是，与其手动重新启动作业，不如找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:11:34.757

单击作业配置页面上的“高级项目选项”。您将看到一个选项“重试计数”。勾选该框并输入结帐失败时要重试的次数。

正如评论者所建议的那样，您还应该首先调查为什么结帐有时会失败。即使您配置了大量的重试，如果底层问题没有得到解决，所有重试仍然可能会失败。

# c# - 按属性值分组对象

> ID：15447648
> 
> 赞同：0
> 
> 时间：2013-03-16T09:30:20.563
> 
> 标签：c#, asp.net, razor, grouping

我很难弄清楚这一点。我有一个具有两个属性的对象列表：`Alias`和`Value`

我需要显示这些对象的列表，其中`Alias`属性按`Value`字符串值分组。像这样：

```
MyAlias1, MyAlias2, MyAlias3
     - Value string which is the same for above three aliases

MyAlias4, MyAlias5
     - Value string which is the same for above three aliases 
```

到目前为止，我所拥有的是：

```
var groups = lst.GroupBy(x => new { x.Alias, x.Value });
foreach(var group in groups)
{
    @group.Value
} 
```

但我不确定从那里做什么，才能真正将它们显示为分组项目。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:42:16.840

我认为您需要按值分组，然后对于每个组，您可以打印出您需要的内容：

```
@{ var groups = lst.GroupBy(x => x.Value); }

@foreach (var group in groups)
{
    var aliasString = String.Join(",", group.Select(x => x.Alias));
    <p>@aliasString</p>
    <p>- @group.Key</p>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:39:20.363

这里是分组

```
var groups = lst.GroupBy(x => x.Value); 
```

这里正在显示

```
@foreach(var group in groups)
{
    <h3>@group.Key</h3>
    <ul>
    @foreach(var alias in group)
    {
        <li>@alias.Alias</li>
    }
    </ul>
} 
```

顺便说一句，最好在控制器中创建 ViewModel，然后在视图中执行 Linq：

```
public class FooViewModel
{
    public string Value { get; set; }
    public string Aliases { get; set; } // if you need concatenated string 
} 
```

在控制器中：

```
var model = from x in lst
            group x by x.Value into g
            select new FooViewModel {
               Value = g.Key,
               Aliases = String.Join(", ", g.Select(i => i.Alias))
            }; 
```

# maven - 为 JAR maven 项目选择哪个工件？

> ID：15447654
> 
> 赞同：1
> 
> 时间：2013-03-16T09:30:58.770
> 
> 标签：maven, maven-3, maven-plugin, maven-assembly-plugin, maven-archetype

我正在开发一个包含太多项目的应用程序 1.EJB Maven 项目：它是一个 JAR 文件，包含我的模型（jpa 实体）和我的服务（会话 Bean） 2.WEB Maven 项目：包含所有视图的项目

我计划将 EJB 项目转移到 Web 项目（依赖项） 我的问题是；在创建 Web 项目时，我选择了 WEB APP artifact jar 项目是否有特定的 Artifact？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:32:35.350

对于 EJB 项目，请使用简单的 jar 项目。查看 EAR 原型：`org.jboss.spec.archetypes:jboss-javaee6-ear-webapp`

有关此问题的更多信息[Maven2：企业项目的最佳实践（EAR 文件）](https://stackoverflow.com/questions/1134894/maven2-best-practice-for-enterprise-project-ear-file)

# java - 读取java文本文件的最快方法

> ID：15447655
> 
> 赞同：0
> 
> 时间：2013-03-16T09:31:06.040
> 
> 标签：java, file, hashtable

我只是继承了一些代码，而且我对 java 不太擅长。我想知道这个人实施的当前方法是否是读取和计算 java 文本文件的最快方法。我试图将它们读入内存并进行快速字符串计算。我想这不可能。

假设我有一些文本文件：

```
1: AAAATTTTCTC
2: AATTTCTCCTC
3\. .... 
```

现在假设我有 10,000 个，但想将它们存储在内存中以获取一些快速的哈希映射（或类似的东西）......

在 Java 中……而且只有 Java……最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T09:49:34.157

从编码的角度来看，最快的方法是：

```
List<String> lines = Files.readAllLines(Paths.get("/path/to/your/file"), charset); 
```

然后，您可以遍历这些线路并使用它们做您需要的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:41:13.450

使用 Scanner 读取 txt 文件

```
try{
    Scanner in = new Scanner(new File("file.txt"));
    ArrayList<String> list=  new ArrayList<String>();
    while(in.hasNext()){

    list.add(in.nextLine());

    }
}catch(IOException ex){
 throw new RuntimeException(ex);
} 
```

你需要`java.util`屁股进口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:36:11.290

读取文本文件的示例代码：

```
public class RegexTester {
public static void main(String[] args) throws Exception {
    FileReader fileReader = new FileReader("c:/file-path/file-name");

    BufferedReader bufferedReader = new BufferedReader(fileReader);

    String text = null;

    while ((text = bufferedReader.readLine()) != null) {
        // Text from file
        System.out.println(text);
    }

} 
```

# c - 在 Linux 中打开文件时应该何时使用 O_CLOEXEC？

> ID：15447657
> 
> 赞同：22
> 
> 时间：2013-03-16T09:31:18.223
> 
> 标签：c, linux, file-io, exec

我的进程分叉了几次，每次孩子都会执行 - 意味着我希望它运行其他程序。

`open()`在主进程中，我使用系统调用打开一个文件描述符。

给它一个标志是否正确，`O_CLOEXEC`这样我运行的新程序`exec()`就没有 fd 资源？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-16T09:33:34.997

是的，除非您需要执行的程序才能访问该文件描述符。您也可以在调用 exec 之前在子进程中手动关闭文件描述符，但这更容易出错。

# git - Jenkins Git 插件和 Refspecs

> ID：15447661
> 
> 赞同：24
> 
> 时间：2013-03-16T09:32:25.690
> 
> 标签：git, jenkins

**Refspec**和**Branch 说明符（默认为空白）**有什么区别：在下面的 Jenkins 作业配置中：

![在此处输入图像描述](../Images/dc2b860941d0a03b2e64a9f0edeaf507.png)

我试图在作业配置中设置 Refspec 选项：

```
+refs/heads/master:refs/remotes/origin/master 
```

在我的构建从站的克隆仓库中，.git/config 文件如下所示：

```
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
[remote "origin"]
        url = https://user:pass@git.internal.com/scm/PROJECT/project.git
        fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
        remote = origin
        merge = refs/heads/master 
```

似乎**fetch**的值不正确（从 jenkins 作业配置中读取）。此外，它对磁盘空间消耗没有影响。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-16T12:01:57.733

**Refspec**定义了**获取**操作的选项（参见[此处](https://git-scm.com/book/en/v2/Git-Internals-The-Refspec)和[此处](https://stackoverflow.com/questions/9359891/jenkins-configuration)），而**分支说明符**定义了哪个分支包含要由 Jenkins**构建的代码。**换句话说：**Refspec**只定义了如何检索代码，而**分支说明符**将编译代码的哪一部分。

[编辑：] 修复了指向 refspec 的断开链接

# jakarta-ee - 超时后的 JavaEE 6 AsyncContext 行为

> ID：15447666
> 
> 赞同：9
> 
> 时间：2013-03-16T09:32:56.907
> 
> 标签：jakarta-ee, asynchronous

AsyncContext 超时后的确切行为是什么？它是否仍在运行并且是否使用 getResponse() 返回响应？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T05:59:39.993

**Java Servlet 3.0**维护版本（第 34 页）内容如下：

> 调用此方法 - `ServletRequest.startAsync(ServletRequest req, ServletResponse res)`- 确保在应用程序退出服务方法时不会提交响应。当在返回的 AsyncContext 上调用 AsyncContext.complete 或 AsyncContext 超时并且没有关联的侦听器来处理超时时，将提交它。在请求及其相关响应从容器返回之前，异步超时计时器不会启动。AsyncContext 可用于写入来自异步线程的响应。它也可以用来通知响应没有关闭和提交。

从[javax.servlet.AsyncContext 接口的 javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html)：

> 如果异步操作超时，容器必须运行以下步骤：
> 
> 1.  在它们的 onTimeout 方法中调用所有向启动异步操作的 ServletRequest 注册的 AsyncListener 实例。
> 2.  如果没有任何侦听器调用 complete() 或任何 dispatch() 方法，则执行错误分派，状态码等于 HttpServletResponse.SC_INTERNAL_SERVER_ERROR。
> 3.  如果没有找到匹配的错误页面，或者错误页面没有调用 complete() 或任何 dispatch() 方法，请调用 complete()。”

上面的最后一行是最重要的 - 将调用`AsyncContext.complete()`. [javadoc 说](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html#complete%28%29)：

> 完成对用于初始化此 AsyncContext 的请求启动的异步操作，关闭用于初始化此 AsyncContext 的响应。

With `AsyncContext` closed, calls to most of its methods will throw `IllegalStateException`.

# windows - 编译空 CUDA 项目时出错

> ID：15447668
> 
> 赞同：0
> 
> 时间：2013-03-16T09:33:01.853
> 
> 标签：windows, cuda, nvidia

编译**空**的Cuda 5.0 项目时出错：

1*) 错误 2 错误 LNK1120: 1 未解决的外部

2*) 错误 1 ​​错误 LNK2019：函数 __tmainCRTStartup 中引用的未解析的外部符号 main

当我在 PropertyPages>Linker>Input as 中编辑其他依赖项时：cuda.lib;cudart.lib;kernel32.lib;user32.lib;gdi32.lib;winspool.lib;comdlg32.lib;‌​advapi32.lib;shell32.lib ;ole32.lib;oleaut32.lib;uuid.lib;odbc32.lib;odbccp32.lib;‌​%(AdditionalDependencies)

我该如何解决？请注意：我的系统中没有 GPU，但有人告诉我这没关系，我仍然可以在 CUDA 中编写一些代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:00:47.110

请添加空`main`功能并确保您使用*控制台*应用程序而不是使用窗口应用程序工作（请查看[此](https://stackoverflow.com/questions/15440476/opengl-and-vs2010-unresolved-external/15440674#comment21849343_15440674)）

# javascript - JavaScript，RegEx - 如何获取实际找到的字符串

> ID：15447676
> 
> 赞同：0
> 
> 时间：2013-03-16T09:33:54.160
> 
> 标签：javascript, regex, math

为什么这不起作用？

```
var str = "nd2(31)jnd";
str = str.replace(/[0-9](/,/[0-9]*(/); 
```

我想用前面的括号替换每个数字： "2(" 和 "2*("

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:45:49.180

你的正则表达式是错误的，这就是你想要的：

```
str.replace(/([0-9]+)\(/g, "$1*("); 
```

`$1`引用 parens 中的第一个匹配项`()`，您必须转义`\(`才能匹配它。

**更新：**添加`g`全局匹配

`2(3(4+5)) => 2*(3*(4+5))`

**更新：**使其也可以在括号的另一端工作，结合：

```
str.replace(/(\d+)\(/g, "$1*(").replace(/\)(\d+)/g, ")*$1"); 
```

# php - 只显示第一张图片

> ID：15447677
> 
> 赞同：0
> 
> 时间：2013-03-16T09:34:11.350
> 
> 标签：php, image

我写了一个简单的代码来显示图像。图像存储在一个文件夹中，其名称在 mysql 中。但问题是只有第一张图像显示的次数与数据库中的总图像次数一样多。这是我用于显示图像的简单代码：

```
$query = "Select * from admin_images";
$result = mysql_query($query) or die(mysql_error());
$rows = mysql_fetch_array($result) or die(mysql_error());
$i=mysql_num_rows($result);
while($i>=1)
{
    $img = $rows['my_image_name'];
    echo '<img src="../admin_images/$img">';
    $i--;
} 
```

图像名称保存在 my_image_name 字段的 admin_images 表中，实际图像存储在 admin_images 文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:37:25.643

您必须一个接一个地获取行：

```
$query = "Select * from admin_images";
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result) or die(mysql_error()))
{
    $img = $row['my_image_name'];
    echo '<img src="../admin_images/$img">';
    $i--;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:10:15.873

尝试通过循环获取图像 url。
为了更好地理解程序流程，请查看以下代码。

```
//Query to select the image url from database.  

$query = "Select * from admin_images"; // Try to use proper column name instead of * 
$result = mysql_query($query) or die(mysql_error()); // mysql_* functions are depreciated. So try to avoid using this function. 
$i=mysql_num_rows($result);

if($i >=1)
{
 while($rows=mysql_fetch_array($result))
 {
    $img = $rows['my_image_name'];
    echo '<img src="../admin_images/$img">';

 }// The above loop will terminate when the condition becomes false. And hence, till now you will have printed all your images.
} else {
echo'No image record found!';
} 
```

# backbone.js - 为什么 Backbone.js 会为视图创建一个新元素？

> ID：15447679
> 
> 赞同：2
> 
> 时间：2013-03-16T09:34:25.453
> 
> 标签：backbone.js, template-engine

在 Backbone.js 中使用视图时，我通常有以下部分：

*   视图应附加到的目标元素，例如`ul`元素。
*   表示列表项的模板。
*   视图上的一个`el`元素，在本例中是一个`li`元素。

如果我渲染视图 Backbone.js 创建`li`元素，然后我通常将此渲染的东西附加到目标元素，例如使用 jQuery。

到现在为止还挺好。

我不明白为什么 Backbone.js 以`li`编程方式创建。为什么它不只是获取模板的内容并将其用于渲染？

对我来说，这似乎令人困惑，因为：

*   在周围的 HTML 页面中，我有一个`ul`标签。
*   *在代表列表项的模板中*，我没有**标签**`li`。

Insted`li`由 Backbone.js 以编程方式创建并填充模板。

为什么是这样？

恕我直言，如果模板已经包含`li`. 我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:10:30.700

我的理解是 Backbone 需要一个元素来附加模板并进行操作。如果 Backbone 立即附加到页面上的 DOM 元素，则每次更新元素（添加项目）时，该过程都会慢得多。有许多在线教程解释了在将输出附加到 DOM 之前如何更好地生成输出。例如，如果我有一个 <ul> 标记并且我想附加 200 个 <li> 元素，那么如果我只是附加每个 <li> 而不是在内存中构建 html 并在之后附加它，你会注意到一个显着的延迟。

# android - 如何增加数据库价值？

> ID：15447682
> 
> 赞同：1
> 
> 时间：2013-03-16T09:34:41.557
> 
> 标签：android

我必须在 Sqlite 中总共插入一列。更多的价值是插入我想要所有的增值？

例如列名总插入值 23.0,45.0,56.0 我想插入所有添加的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:37:24.677

您可以对 SQL 语句中的值求和：

```
insert into tableName (total, ....) values (23.0 + 45.0 + 56.0, ...) 
```

就如此容易。

# java - 嵌套 if 条件

> ID：15447684
> 
> 赞同：-1
> 
> 时间：2013-03-16T09:35:08.327
> 
> 标签：java, nested-if

我在我们的核心 java 应用程序中面临嵌套 if 条件的巨大问题 代码摘要如下......我们可以有近 20 个嵌套 if 条件你能告诉我如何优化这段代码吗？

有什么更好的方法可以避免 java.i 中的这种嵌套 if 条件可以有 20 个嵌套 if 条件，从 Java 应用程序的设计角度来看，这可能是一个巨大的问题。

请帮助解决 java Java 版本 1.6

```
String condition = getCondition();
if (condition.equals(add)) { // add operation
    add();
    if (condition.equals(sub)) {// sub operation
        sub();
        if (condition.equals(div)) { //div operation
            div();
            if (condition.equals(cos)) { // cos operation
                cos();
            }
        }
    }
} 
```

编辑：我可以有更多的数学运算，比如 20 多个，然后切换工作。20 个运算非常多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:39:28.180

您应该像这样使用 if else-if 条件：

```
String condition = getCondition();      
if(condition.equals(add))
    add();   
else if(condition.equals(sub)) 
    sub();   
else if(condition.equals(div))   
    div();   
else if(condition.equals(cos))   
    cos(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:36:40.120

改为使用`switch`语句。当你有很多决定时使用它。

请注意，只有当您想要使用`String`in`switch`语句时，JDK 7 才会发生这种情况。在旧版本`enum`中可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T09:44:31.053

状态模式：

```
public enum Operation {
ADD {
    int execute(int a, int b) {
        return a + b;
    }
},
SUB {
    int execute(int a, int b) {
        return a - b;
    }
},
MUL {
    @Override
    int execute(int a, int b) {
        return a * b;
    }
},
DIV {
    @Override
    int execute(int a, int b) {
        return a / b;
    }
};

abstract int execute(int a, int b);

public static void main(String[] args) {
    Operation oper = getOperation();
    oper.execute(3, 4);
}

private static Operation getOperation() {
    return Operation.MUL;
} 
```

}

像这样：

```
public static void main(String[] args) {
    String operation = user set it
    Operation oper = getOperation(operation);
    oper.execute(3, 4);
}

private static Operation getOperation(String operation) {
    return Operation.valueOf(operation.toUpperCase());
} 
```

请注意，如果 operation 为 null，则 Operation.valueOf 可能会抛出 NullPointerException；如果 operation 不是 Operation 枚举之一，则可能会抛出 IllegalArgumentException

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T09:50:08.660

如果 if 语句不需要嵌套，那么您可以使用命令模式。

首先，设置匹配器和命令之间的映射。这些命令遵循通用调用接口，例如 Runnable、Callable 或在我的示例命令中。该示例展示了如何动态创建包装器并使用静态或非静态类。如果事先不知道实际命令，这种模式是实用的，因为以后可以添加和删除命令。

```
public class CommandExample {

    private interface Command {
        public void execute();
    }

    private Map<String, Command> commands = new HashMap<>();

    private void setUp() {
        commands.put("add", new Command() {
            public void execute() {
                add();
            }
        });
        commands.put("sub", new Sub());
        commands.put("arg", new Argument("the argument"));
    }

    private void add() {
        System.out.println("Add called");
    }

    private static class Sub implements Command {
        @Override
        public void execute() {
            System.out.println("Sub called");
        }
    }

    private class Argument implements Command {

        private final String arg;

        public Argument(String arg) {
            this.arg = arg;
        }

        @Override
        public void execute() {
            System.out.println("Argument called with arg " + arg
                    + " and access to outer class " + CommandExample.this);
        }
    }

    private void execute(String... names) {
        for (String name : names) {
            Command command = commands.get(name);
            if (command != null) {
                command.execute();
            } else {
                System.err.println("Command '" + name
                        + "' is not known. Only know " + commands.keySet());
            }
        }
    }

    public static void main(String[] args) {
        CommandExample commandExample = new CommandExample();
        commandExample.setUp();
        commandExample.execute("add", "sub", "arg", "unknown");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T09:55:44.493

在这里，您有如何使用枚举的示例。首先创建你的枚举

```
enum MathOperations{
    ADD, SUB, DIV, COS;
} 
```

然后你可以像这样使用它

```
MathOperations m = MathOperations.valueOf(getCondition().toUpperCase);
switch(m) {
    case ADD: add(); break;
    case SUB: sub(); break;
    //and so on...
} 
```

当然，它只有在`getCondition()`返回元素时才有效`MathOperations`。否则你会得到`IllegalArgumentException`.

* * *

您也可以尝试使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-16T10:10:56.080

您可以将`add`, `sub`, `div`, `cos`... 放入有序列表/数组中。然后使用`for`循环来迭代列表。使用`break`运算符和[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)调用适当的方法。

```
final String[] OPERATION_LIST = { "add", "sub", "div", "cos" };
String condition = getCondition();
for (String op : OPERATION_LIST) {
    if (condition.equals(op))
        getClass().getMethod(op).invoke(this);
    else
        break;
} 
```

上面的`for`循环等于您的嵌套`if`语句。缺点是必须有其他数学方法`public`。如果没有，您需要类似[Accessing Private Methods 之](http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html#methods)类的东西。

注意：如果您正在制作计算器（是吗？），也许[反向波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-16T09:39:15.403

根据您的代码，它应该始终满足`condition.equals(add)`执行下一行。根据网络行中的条件，它永远不会满足下一个条件。它何时进入下一行代码？

检查字符串条件的数量

您可以使用`switch`.

```
 String condition = getCondition();    
  switch(condition ) {
        case add:
            add();
            break;
        case sub:
            sub();
            break;
        // etc...
    } 
```

旁注：打开可用的字符串`Java7`。

# git - 使用 bash 变量在 Git 中定义 core.pager

> ID：15447686
> 
> 赞同：1
> 
> 时间：2013-03-16T09:35:19.567
> 
> 标签：git, bash

我想设置 core.pager 以管理换行文本的长行。为了做到这一点，我使用这个命令：

```
$ GIT_PAGER="fold -sw $COLUMNS" git log 
```

我试图设置 core.pager，但 Bash 过早地评估 $COLUMNS：

```
$ git config core.pager "fold -sw $COLUMNS"
$ grep pager .git/config
    pager = fold -sw 80 
```

如果我试图逃避 $COLUMNS，我会得到：

```
$ git config core.pager "fold -sw \$COLUMNS"
$ grep pager .git/config
    pager = fold -sw $COLUMNS
$ LC_ALL=en_US git log
fold: option requires an argument -- 'w'
Try 'fold --help' for more information. 
```

如果我尝试使用，`sh -c`我会得到：

```
$ git config core.pager 'sh -c fold -sw $COLUMNS'
$ grep pager .git/config
    pager = sh -c fold -sw $COLUMNS 
```

..但它没有正确评估 $COLUMNS （它是静态的）。

我怎样才能获得与我在 core.pager 中设置的第一个命令相同的行为？

编辑：正如尼克巴斯汀所说`git config core.pager "fold -sw \$COLUMNS"`，应该可以工作，但可能我对子进程有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T10:57:57.017

像这样解决了设置 core.pager ：

```
$ git config core.pager "fold -sw \$(tput cols)" 
```

感谢 Nick Bastin（显示了真正的问题）和这个主题：[LINES and COLUMNS environment variables lost in a script](https://stackoverflow.com/questions/1780483/lines-and-columns-environmental-variables-lost-in-a-script)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T09:45:09.433

所以，这不是一个特别的答案，但我已经测试了转义`$COLUMNS`（就像你在你的问题中所做的那样），只要`COLUMNS`实际导出到我的 shell 中它就可以正常工作（否则它会像你上面所说的那样失败）。您确定这`COLUMNS`是在您的 shell 中定义的，并且 git 没有别名为导致您丢失环境（或别名为`--no-pager`）的东西吗？

编辑：尝试不同的环境变量。事实证明，有很多东西想要编写`COLUMNS`变量，其中之一可能会搞砸你（我注意到`fold`在我运行它之后会重写变量，所以它无论如何只能工作一次）。尝试更改`$COLUMNS`并`$FOO`查看是否有所作为。

而且，实际上，它本身会将我系统上`grep`的变量重写为终端的宽度，因此通过使用来检查您可能会破坏它的值：`$COLUMNS``grep`

```
$ export COLUMNS=10
$ echo $COLUMNS
10
$ grep foo
^C
$ echo $COLUMNS
150 
```

# mysql - Mysql日期函数，用于获取两个日期中的较晚日期

> ID：15447688
> 
> 赞同：1
> 
> 时间：2013-03-16T09:35:30.340
> 
> 标签：mysql, sql, select

我想通过增加其他日期列来设置 DATE 类型的列，但也要使其不小于其他日期（常量）。

对于第一部分，我使用：

```
UPDATE `customers` set `expiry_date` = DATE_ADD(date,INTERVAL 3 YEAR) 
```

现在我正在寻找一些像 MAX(d1, d2) 这样的函数，它需要两个以后的日期。

我看到这样的构造：

```
case when d1 > d2 then d1 else d2 end 
```

也许它有效，但它需要输入 d1/d2 两次。没有像 MAX(d1,d2) 这样的函数会评估每个参数一次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:38:00.893

我不知道这是否是您正在寻找的，但 MySQL 具有`GREATEST`函数 whish 返回列表中的最高值，例如。

```
SELECT GREATEST(1, 5, 2, 7, 10, 3) 
```

将产生`10`。

*   [最伟大的（）](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_greatest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:42:40.837

你试过这个`GREATEST()`功能吗？

如果它不能直接使用日期，请先将日期转换为数字，然后重新转换结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:48:01.207

您可以使用[DATEDIFF()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)

```
UPDATE `customers` 
set `expiry_date` = ( case  when DATEDIFF(d1,d2)<=0 
                            then d1
                            when DATEDIFF(d1,d2)>0 
                            then d2
                      end case
                    ) 
```

# javascript - 服务器和移动设备上的简单 svg 图表

> ID：15447690
> 
> 赞同：0
> 
> 时间：2013-03-16T09:36:07.827
> 
> 标签：javascript, node.js, d3.js, dc.js

我想运行一个简单的图表，例如在 PC 和移动设备上运行条形图。它们应该看起来相同，并且应该基于 svg。我做了一些研究，发现可能是 d3.js 和 node.js 是要走的路。假设我可以在服务器端运行 node.js。如何在服务器端和客户端使用相同的 javascript 代码？图表需要是交互式的，比如说当我有 2 个简单的图表在一起时，所以我在一个图表上单击的值会传递给另一个图表。我是 javascript 和 node.js 的新手。

如果客户端是具有高级浏览器（如 chrome）的 pc，我希望图形在客户端中呈现图形，就好像客户端是移动客户端 android/iphone 一样，服务器应该承担繁重的工作。

任何指向其他图表库选项的指针，也欢迎教程。提前致谢。

（注意：如果库是开源的并且许可证不受限制并允许商业用途，那就太好了。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:18:32.263

`d3.js`是用于数据可视化的最佳 JavaScript 库之一。查看`d3.js` [研讨会](http://bost.ocks.org/mike/d3/workshop/)和[wiki 教程](https://github.com/mbostock/d3/wiki/Tutorials)，了解如何使用 d3.js

`node.js`是基于 JavaScript 的 Web 服务器框架。您在 StackOverflow 本身上有一些关于 node.js 的很好的常见问题解答：

1.  [如何开始使用 Node.js](https://stackoverflow.com/questions/2353818/how-do-i-get-started-with-node-js)
2.  [node.js 初学者教程？](https://stackoverflow.com/questions/4600792/node-js-beginner-tutorials)

**提前使用**

因为 node 和 d3 都在 JavaScript 中。您可以使用`d3.js`and `dc.js`from 节点本身。这允许您在服务器上进行繁重的计算/渲染，并将图形发送到客户端。仅当您熟悉 和 时才应尝试`node.js`这些`d3.js`。

1.  [d3.js](https://npmjs.org/package/d3)的节点包
2.  [dc.js](https://npmjs.org/package/dc)的节点包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:39:54.310

我是用于 javascript 图表的 highcharts 的忠实粉丝。非常易于使用且功能强大。

# ruby-on-rails - 以有效的方式将数组的数组转换为字符串数组

> ID：15447696
> 
> 赞同：0
> 
> 时间：2013-03-16T09:37:01.803
> 
> 标签：ruby-on-rails, arrays

我有一个数组

```
arr=[["Sumit", "where"], ["where", "are"], ["are", "you"]] 
```

我想转换

```
arr=["Sumit where", "where are", "are you"] 
```

我怎样才能有效地做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:44:19.963

```
arr=[["Sumit", "where"], ["where", "are"], ["are", "you"]]  
v = arr.map { |x| x.join(" ") }  
p v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:38:45.950

尝试：

```
arr=[["Sumit", "where"], ["where", "are"], ["are", "you"]]
arr = arr.map {|i| i.join(' ') } 
```

# php - 搜索页面上的分页返回错误

> ID：15447700
> 
> 赞同：0
> 
> 时间：2013-03-16T09:37:20.943
> 
> 标签：php, mysql, search, pagination

我正在做一个应该有一个带有 PHP/MYSQL 的搜索页面的项目。搜索页面有 NEXT、LAST、PREVIOUS 和 FIRST 的导航链接，这些链接不起作用。当我单击 NEXT 或 LAST 以在下一页上获得结果时，它会给我一个错误“未找到搜索词”。这是我的代码：

```
<form name="search" method="post" action="search_ind.php">
    <h4>
        <font color="#FFFFFF">Seach for:
            <input type="text" name="term" />
            in
            <select name="field">
                <option value="firstname">First Name</option>
                <option value="lastname">Last Name</option>
                <option value="phone">Phone Number</option>
                <option value="street">Street</option>
                <option value="district">District</option>
                <option value="region">Region</option>
            </select>
            <input type="submit" name="search2" value="Search" />
        </font></h4>
</form>
<h1 align="center"><span class="style6"><font color="#FFFFFF">Search Results</font></span>
    <p class="style1 style3"></h1>
<div align="center" class="style4">
    <p class="style5">
        <?php
        $host = "localhost";
        $username = "root";
        $password = "";
        $database = "oab";

        $term = $_POST['term'];

        //If they did not enter a search term we give them an error
        if ($term == "") {
            echo "<p>You forgot to enter a search term!!! Please enter a search term and try again...";
            exit;
        }
// check for a search parameter
        if (!isset($term)) {
            echo "<p>We dont seem to have a search parameter!</p>";
            exit;
        }

        mysql_connect($host, $username, $password);
        @mysql_select_db($database) or die("Unable to select database");

        if (isset($_GET['pageno'])) {
            $pageno = $_GET['pageno'];
        } else {
            $pageno = 1;
        } // if
        $query = "SELECT count(*) FROM individual WHERE FName like '%$term%' OR LName like '%$term%' OR Phone1 like '%$term%' OR Phone2 like '%$term%' OR Street like '%$term%' OR District like '%$term%' OR Region like '%$term%'";
        $result = mysql_query($query);
        $query_data = mysql_fetch_row($result);
        $numrows = $query_data[0];

        $rows_per_page = 10;
        $lastpage = ceil($numrows / $rows_per_page);

        $pageno = (int) $pageno;
        if ($pageno > $lastpage) {
            $pageno = $lastpage;
        } // if
        if ($pageno < 1) {
            $pageno = 1;
        } // if

        $limit = 'LIMIT ' . ($pageno - 1) * $rows_per_page . ',' . $rows_per_page;
        $query = "select * from individual WHERE FName like '%$term%' OR LName like '%$term%' OR Phone1 like '%$term%' OR Phone2 like '%$term%' OR Street like '%$term%' OR District like '%$term%' OR Region like '%$term%' ORDER BY LName $limit";
        $result = mysql_query($query);
        $num = mysql_numrows($result);

        if ($pageno == 1) {
            echo " FIRST PREV ";
        } else {
            echo " <a href='{$_SERVER['PHP_SELF']}?pageno=1'>FIRST</a> ";
            $prevpage = $pageno - 1;
            echo " <a href='{$_SERVER['PHP_SELF']}?pageno=$prevpage'>PREV</a> ";
        } // if

        echo " ( Page $pageno of $lastpage ) ";

        if ($pageno == $lastpage) {
            echo " NEXT LAST ";
        } else {
            $nextpage = $pageno + 1;
            echo " <a href='{$_SERVER['PHP_SELF']}?pageno=$nextpage'>NEXT</a> ";
            echo " <a href='{$_SERVER['PHP_SELF']}?pageno=$lastpage'>LAST</a> ";
        } // if
        // If we have no results, offer a google search as an alternative

        if ($num == 0) {
            echo "<h4>Results</h4>";
            echo "<p>Sorry, your search for: &quot;" . $term . "&quot; returned zero results</p>";

// google
            echo "<p><a href=\"http://www.google.com/search?q="
            . $term . "\" target=\"_blank\" title=\"Look up
  " . $term . " on Google\">Click here</a> to try the
  search on google</p>";
        }

        mysql_close();
        ?>

    </p>
</div>
<table border="1" cellspacing="2" cellpadding="2">
    <tr>
        <th><font face="Arial, Helvetica, sans-serif" color="#FFFFFF">FULL NAME</font></th>
        <th><font face="Arial, Helvetica, sans-serif" color="#FFFFFF">PHONE 1</font></th>
        <th><font face="Arial, Helvetica, sans-serif" color="#FFFFFF">PHONE 2</font></th>
        <th><font face="Arial, Helvetica, sans-serif" color="#FFFFFF">PHYSICAL ADDRESS</font></th>
        <th><font face="Arial, Helvetica, sans-serif" color="#FFFFFF">POSTAL ADDRESS</font></th>
        <th><font face="Arial, Helvetica, sans-serif" color="#FFFFFF">E-MAIL</font></th>
    </tr>

    <?php
        $i = 0;
        while ($i < $num) {

            $f1 = mysql_result($result, $i, "Ind_Id");
            $f12 = mysql_result($result, $i, "FName");
            $f13 = mysql_result($result, $i, "MName");
            $f2 = mysql_result($result, $i, "LName");
            $f3 = mysql_result($result, $i, "Phone1");
            $f4 = mysql_result($result, $i, "Phone2");
            $f5 = mysql_result($result, $i, "Physical_Address");
            $f6 = mysql_result($result, $i, "Postal_Address");
            $f7 = mysql_result($result, $i, "Email");
            $f8 = mysql_result($result, $i, "Street");
            $f9 = mysql_result($result, $i, "District");
            $f10 = mysql_result($result, $i, "Region");
            $f11 = mysql_result($result, $i, "Country");
    ?>

            <tr>        
                <td><font face="Arial, Helvetica, sans-serif"><?php echo $f2; ?></font>
                    <font face="Arial, Helvetica, sans-serif"><?php echo $f12; ?></font>
                    <font face="Arial, Helvetica, sans-serif"><?php echo $f13; ?></font></td>
                <td><font face="Arial, Helvetica, sans-serif"><?php echo $f3; ?></font></td>
                <td><font face="Arial, Helvetica, sans-serif"><?php echo $f4; ?></font></td>
                <td><font face="Arial, Helvetica, sans-serif"><?php echo $f5; ?></font></td>
                <td><font face="Arial, Helvetica, sans-serif"><?php echo $f6; ?></font></td>
                <td><font face="Arial, Helvetica, sans-serif"><?php echo $f7; ?></font></td>
            </tr>        

    <?php
            $i++;
        }
    ?>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:43:53.660

这可能是因为每次用户单击下一个/上一个时，您的搜索都需要发布到您的服务器。

更改`$term = $_POST['term'];`为`$term = $_GET['term'];`, 然后每当您输出指向下一个/上一个等的链接时，请确保您也将该术语添加到查询字符串中

```
printf("<a href='%s?pageno=%d&term=%s'>PREV</a>", $_SERVER['PHP_SELF'], $prevpage, $term); 
```

这样，每次用户单击下一个/上一个时，术语都会发送到服务器。

您可能应该考虑使用像[PDO](http://php.net/manual/en/book.pdo.php)这样的库来进行数据库查询，因为您确实面临注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:42:31.487

您不能像在表单、链接中那样发布内容。您需要在每个链接的末尾使用 &term=$term，并将 $term 更改为 $term=$_REQUEST['term'];

# xml - 通过属性值将 2 个或更多 xmls 与 xslt 合并？

> ID：15447703
> 
> 赞同：0
> 
> 时间：2013-03-16T09:37:33.423
> 
> 标签：xml, xslt, filter, merge

我有以下xml：

```
<PCstore>
    <StoreList>
        <Store id="001">
            <ItemList>
                <Items laptop="DELL" price="300"/>
                <Items laptop="gateway" price="450"/>
                <Items screen="LG" price="200"/>
            </ItemList>
        </Store>
    </StoreList>
</PCstore> 
```

我必须合并：

```
<PCstore>
    <StoreList>
        <Store id="002">
            <ItemList>
                <Items laptop="gateway" price="650"/>
                <Items screen="LG" price="200/>
                <Items speakers="sony" price="50"/>
            </ItemList>
        </Store>
    </StoreList>
</PCstore> 
```

以及过滤属性的期望输出（laptop="gateway"）：

```
<PCstore>
    <StoreList>
        <Store id="001">
            <ItemList>
                <Items laptop="gateway" price="450"/>
            </ItemList>
        </Store>
        <Store id="002">
            <ItemList>
                <Items laptop="gateway" price="650"/>
            </ItemList>
        </Store>
    </StoreList>
</PCstore> 
```

等等更多的xml3.xml，xml4.xml等......

我没有尝试过的代码，我对 XSLT 有点陌生，我希望有人可以帮助我。

**更新**：

我试过这段代码，但它不工作......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Items">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
      <xsl:apply-templates
        select="document('xml2.xml')
              /PCstore/StoreList/Store/ItemList[@id = current()/../@id]
                     /Items[@laptop = current()/@value]/*" />
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:10:03.453

如果只能使用 XSLT1.0，一种方法是将 xml 文件列表作为参数传递给 XSLT。例如：

```
<xsl:param name="filelist">
   <files>
      <file>xml2.xml</file>
      <!-- We can place here xml3.xml and so on -->
   </files>
</xsl:param> 
```

（因此，在这种情况下，我假设您将 XSLT 应用于第一个 xml1.xml，并且您只将任何其他文件作为参数传递）。

但是，在 XSLT1.0 中，您将需要使用扩展函数来将此参数作为节点集进行处理。这样做`<xsl:for-each select="$filelist/files/file">`将导致错误“*对变量或参数'文件'的引用必须评估为节点列表。* ”。因此，您将需要使用扩展函数将其转换为[node-set](http://www.xml.com/pub/a/2003/07/16/nodeset.html)。在我的示例中，我将使用 Microsoft 的示例，但根据您的平台，您可能会使用 exslt.org/common

在这种情况下，这是完整的 XSLT

```
<xsl:stylesheet version="1.0" 
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
     xmlns:msxml="urn:schemas-microsoft-com:xslt" 
     extension-element-prefixes="msxml">

   <xsl:output omit-xml-declaration="yes" indent="yes"/>
   <xsl:strip-space elements="*"/>

   <xsl:param name="filelist">
      <files>
         <file>xml2.xml</file>
      </files>
   </xsl:param>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="StoreList">
      <xsl:copy>
         <xsl:apply-templates select="@* | node()"/>
         <xsl:for-each select="msxml:node-set($filelist)/files/file">
            <xsl:apply-templates select="document(text())/PCstore/StoreList/Store"/>
         </xsl:for-each>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="Items[not(@laptop='gateway')]"/>
</xsl:stylesheet> 
```

当应用于您的 XSLT 时，它会输出以下内容

```
<PCstore>
   <StoreList>
      <Store id="001">
         <ItemList>
            <Items laptop="gateway" price="450"/>
         </ItemList>
      </Store>
      <Store id="002">
         <ItemList>
            <Items laptop="gateway" price="650"/>
         </ItemList>
      </Store>
   </StoreList>
</PCstore> 
```

请注意，文件必须存在才能正常工作。如果传入一个不存在的文件名，就会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T02:19:09.963

如果您可以使用 XSLT 2.0，您可以使用`collection()`...

**xml1.xml**

```
<PCstore>
    <StoreList>
        <Store id="001">
            <ItemList>
                <Items laptop="DELL" price="300"/>
                <Items laptop="gateway" price="450"/>
                <Items screen="LG" price="200"/>
            </ItemList>
        </Store>
    </StoreList>
</PCstore> 
```

**xml2.xml**

```
<PCstore>
    <StoreList>
        <Store id="002">
            <ItemList>
                <Items laptop="gateway" price="650"/>
                <Items screen="LG" price="200"/>
                <Items speakers="sony" price="50"/>
            </ItemList>
        </Store>
    </StoreList>
</PCstore> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="type" select="'laptop'"/>
    <xsl:param name="brand" select="'gateway'"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/">
        <PCstore>
            <StoreList>
                <xsl:apply-templates select="collection('file:///C:/store_test?select=*.xml')/PCstore/StoreList/Store"/>
            </StoreList>
        </PCstore>
    </xsl:template>

    <xsl:template match="Items[not(@*[name()=$type]=$brand)]"/>

</xsl:stylesheet> 
```

**输出**

```
<PCstore>
   <StoreList>
      <Store id="001">
            <ItemList>

                <Items laptop="gateway" price="450"/>

            </ItemList>
        </Store>
      <Store id="002">
            <ItemList>
                <Items laptop="gateway" price="650"/>

            </ItemList>
        </Store>
   </StoreList>
</PCstore> 
```

# r - 如何实现半自动峰值拾取

> ID：15447705
> 
> 赞同：2
> 
> 时间：2013-03-16T09:37:46.760
> 
> 标签：r, physics, spectrum

我正在研究光致发光温度系列。因此，我有几个在不同温度下拍摄的强度与能量 (eV) 光谱。

我的问题是到目前为止我发现的信号处理/峰值查找软件包（Peaks、hyperSpec、msProcess、Timp 和其他面向质谱/化学计量学的软件包）并不真正适合我的需求：

*   峰找不到“肩膀”（峰位置太近，产生混合峰（见 3.75 eV））
*   hyperSpec 和 msProcess 对于我的使用来说过于自动化：光致发光峰的位置取决于温度，因此峰识别在温度系列中不可重复。

我认为我应该实现的是：检测峰和肩（自动或`locate()`用于原始估计），要求手动识别发现的峰，并输出每个峰的标签、位置、强度和[FWHM](http://en.wikipedia.org/wiki/Full_width_at_half_maximum)。这将使我能够准确地跟踪温度序列中给定峰（由其标签标识）的位置、强度和 FWHM。

这是温度序列图的示例：

![示例温度系列](../Images/69720ce36522cb14827ec0dc43b7e180.png)

所以我的问题是：

1.  你知道已经实现了类似功能的包吗？
2.  你认为我建议的方法是明智/可行的吗？

非常感谢 ！

蒂博·鲁勒

PS：我希望我足够清楚，请不要犹豫，要求我澄清。PS2：我希望这个问题不是太笼统，如果需要我可以提供一个典型的光谱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:04:04.887

*免责声明：我个人从来没有做过任何严重的峰值拟合。*

话虽如此，我在这里看到了两种方式，最终可能并没有那么不同：

*   功能数据分析，就像@baptiste 说的那样。
*   拟合预设数量的已知形状的峰值（例如高斯或洛伦兹或 Voigt）
    然后使用这些拟合参数作为新的特征集进行进一步分析。
    FWHM 将在拟合参数中编码。

哪种方法更适合您可能取决于您计划的进一步分析。

还有一些零碎的：

*   当您正在寻找肩峰时，一阶导数不允许您检测所有峰。您可能会从二阶导数的最小值获得足够有用的峰值拟合起点。但是，对于仅在某个较大峰上显示为肩峰的峰，这些位置将非常偏离（在较大峰的低强度侧太远）。
    package signal 实现了 Savitzky-Golay 滤波器，可以帮助实现这种方法。
*   反卷积可能是检测峰位置的更好选择。
*   您应该意识到，这些方法往往会迅速“消耗”您的信噪比，如果您的基线低于峰值，则解决方案可能会大打折扣。我不知道 fda 在这方面是否更好，但我怀疑这是您试图解决的问题所固有的。
    你会想要检查你得到的解决方案的稳定性。SNR 和可能的基线。

*（不，hyperSpec 不提供类似的东西。但是，如果您最终获得了普遍适用的功能，欢迎您通过 hyperSpec 分发它，它仍然可以是您自己的包。如果结果是这样要做大量的编程工作，可以考虑用这个申请一个google Summer of code项目——今年的申请期即将开始）。*

# python - 使用python将字符串转换为时间

> ID：15447706
> 
> 赞同：2
> 
> 时间：2013-03-16T09:37:50.367
> 
> 标签：python, datetime, strftime, strptime

我已经阅读了一些stackoverflow帖子，但仍然无法弄清楚......

我想抓取过去 48 小时内发布的 craigslist 帖子。craigslist 的发布时间格式如下：

2013-03-15，下午 7:43 MDT

我努力了

```
string = "2013-03-15, 7:43PM MDT"

time.strptime(string, "%Y-%m-%d, %I:%M%p %Z") 
```

但显然格式与字符串不匹配。这个时间字符串的格式应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:30:34.680

问题是MDT。Python 的 %Z 不支持这一点（至少在我看来是这样）。可能有更好的解决方案，但这个应该可以工作：

```
import time
import datetime

#use the UTC which Python understands
a="2013-03-15, 7:43PM MDT".replace("MDT","UTC")
fs="%Y-%m-%d, %I:%M%p %Z"
c=time.strptime(a, fs)

#converting from UTC to MDT (time difference)
dt = datetime.datetime.fromtimestamp(time.mktime(c)) - datetime.timedelta(hours=6)
print dt 
```

# php - MAGENTO - 访问皮肤目录时出现 404 错误

> ID：15447707
> 
> 赞同：1
> 
> 时间：2013-03-16T09:37:51.240
> 
> 标签：php, flash, magento, module, skin

我在magento中开发了一个模块。我将一包 flash 和 php 文件放在 skin 目录（例如`myhost/skin/frontend/base/default/lib/xxx/xxx.swf`和`myhost/skin/frontend/base/default/lib/xxx/xxx.php`）中。我在我的本地主机（XAMPP）上创建了它，但没有发现错误。因此，我为它创建了一个 magentoconnect 模块。

当我通过 magentoconnect 在服务器上安装它时，安装成功且没有错误。但是，当我访问皮肤目录 ( `myhost/skin/frontend/base/default/lib/xxx/xxx.php`) 上的 php 文件时出现 404 错误。

有什么解决方法可以解决吗？或者我应该把我的 flash 和 php 包文件放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:01:03.413

作为安全问题的一个重要注意事项是`.php`文件`skin/`夹中的任何文件都不会被执行。

```
# Always send 404 on missing files in these folders
RewriteCond %{REQUEST_URI} !^/(media|skin|js)/ 
```

这是您可以在`.htaccess`Magento 文件中找到的规则。

因此，要执行的 PHP 文件不应驻留在该`skin/`文件夹中。

# mysql - where 子句中的条件条件

> ID：15447712
> 
> 赞同：0
> 
> 时间：2013-03-16T09:38:29.383
> 
> 标签：mysql, sql

我有一个像这样的查询

```
 select * from table1 where id >20 and marks1 <40 and marks2 <30; 
```

但是我需要根据另一个条件删除最后一个条件，例如

否则`marks3 >40 then use marks2 <30`删除此条件。

是否可以。

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:42:00.673

这很简单。您只需要使用“或”子句添加您的条件。

```
select * from table1 where id >20 and marks1 < 40 and (marks3 <= 40 or (marks3 > 40 and marks2 <30)); 
```

如果**Marks3 <= 40**，则外括号内的表达式被评估为**True**。其他条件是什么并不重要。
如果**marks3 > 40**，则**marks2**必须**< 30**才能使内括号内的表达式被评估为**True**，这使得完整的外括号被评估为**True**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:46:33.133

试试这个。

```
select * 
from   table1 
where  id > 20 and 
       marks1 < 40 and 
       (
           (marks3 >40 and marks2 <30) or 
           mark3 <= 40
       ) 
```

# javascript - 加载 HTML 页面并能够转到上一个页面

> ID：15447716
> 
> 赞同：0
> 
> 时间：2013-03-16T09:39:15.687
> 
> 标签：javascript, html

我有两个 HTML 页面，P1 和 P2。我将首先将 Page P1 加载到我的 iframe 中。然后我再次将第二个 HTML 页面 P2 加载到同一个 iframe 中，使用来自 P1 的链接或外部 iframe。

现在，当我使用 javascript 按钮操作关闭 P2 时，应在关闭 P2 后显示上一个 P1。请告诉我这是否可能，如果可以，如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:35:34.230

你可以使用

```
<button onclick="history.back()">Button text</button> 
```

P2 内。

# android - handler.removeCallbacks(runnable) 是否等同于 thred 的退出

> ID：15447719
> 
> 赞同：2
> 
> 时间：2013-03-16T09:39:23.907
> 
> 标签：android, multithreading

说我写：

```
Runnable runnable = new Runnable(){
    @Override
    public void run() {
        Log.e(TAG, "runnable entered");
        // working
        Log.e(TAG, "runnable completed");
    }
};

Thread t = new Thread(runnable);
t.start(); 
```

之后`t.start();`我们会得到 log 消息**runnable 输入**。在工作线程时，我总是希望我的可运行对象完成并且完成后我的应用程序将不再在该线程上工作。即我应该总是完成这个**可运行的**日志；

现在假设我使用 Handler 而不是 Thread 类。

```
Handler handler = new Handler();
handler.post(runnable); 
```

我可以确定`handler.removeCallbacks(runnable)`就像 runnable 已经完成并且我的应用程序将不再在这个 runnable 上运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T05:09:04.287

`handler.removeCallbacks(runnable)``Runnables`从消息队列中删除待处理。但不会停止当前正在运行的 Runnable。例如，假设您有一个 Runnable A

```
class A implements Runnable {

    public void run() {
        handler.removeCallbacks(a);
        Log.i("tag", "are start");
                    // Do work
        Log.i("tag", "end");
    }
}

A a = new A(); 
```

你打电话给

`handler.post(a);`

因此，当第一个可运行的执行时，它将调用该`removeCallbacks`方法。但是在 logcat 中你会看到输出是

> 开始
> 
> 结尾

而如果你不在方法中使用`removeCallbacks`，`run`那么输出将是

> 开始
> 
> 结尾
> 
> 开始
> 
> 结尾

# javascript - jQuery获取html内容INSIDE div

> ID：15447723
> 
> 赞同：1
> 
> 时间：2013-03-16T09:39:31.690
> 
> 标签：javascript, jquery, selector

我正在使用 jQuery load() 从 url div 加载内容。目前我的代码如下所示：

```
$('#content-slider').load(pageurl + '?rel=tab  #content-slider'); 
```

这基本上转到'pageurl'并获取`#content-slider`并将其加载到`#content-slider`当前页面上。

问题是我最终在具有相同 id 的 div 中得到了一个 div：

```
<div id="content-slider">
    <div id="content-slider">
    </div>
</div> 
```

如何获取 div 内的 html 内容而不是 div 标签。

**更新：** *如果问题不清楚，但对于那些一直评论我不应该有重复 ID 的人表示歉意......我知道！问题是如何克服这一点。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T09:41:05.793

您可以告诉`load`获取内容滑块的*子*节点而不是滑块本身：

```
$('#content-slider').load(pageurl + '?rel=tab  #content-slider > *'); 
```

[实例](http://jsbin.com/egavuv/1)| [来源](http://jsbin.com/egavuv/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:50:04.693

除了 TJ 的回答，您也可以使用`.parent`

```
 $("#content-slider").parent().load(pageurl + '?rel=tab  #content-slider'); 
```

[更新示例](http://jsbin.com/egavuv/3/)| [来源](http://jsbin.com/egavuv/3/edit)

# javascript - 如何加快 UglifyJS 2 的缩小过程？

> ID：15447727
> 
> 赞同：8
> 
> 时间：2013-03-16T09:39:44.650
> 
> 标签：javascript, node.js, minify, uglifyjs

我正在使用[UglifyJS 2](https://github.com/mishoo/UglifyJS2)连接和缩小一堆 JavaScript 文件（不要太多，大约 5 到 10 个）。此过程使用 UglifyJS 2 的默认设置在 Node.js 中运行。

这些文件基本上是 Require.js、jQuery、Backbone.js、Backbone.js Marionette、Moment.js 和一些额外的（较小的）帮助文件，都在未压缩（即开发）版本中。

问题是这个过程几乎需要 10 秒。

如果我通过移交完全禁用缩小

```
{ compress: false } 
```

作为一种选择，它要快得多，但仍然需要大约 2 秒。

问题 #1：UglifyJS 2即使是几个文件也需要*这么长时间是正常的吗？*还是我很可能做错了什么？

问题 #2：如何在不禁用 UglifyJS 2 的所有有用选项的情况下加快这个过程？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-11-20T21:16:10.177

如果您将 compress used 选项设置为 false，它应该会加快速度。就这样，我从 11 秒到 5.5 秒。

```
 { 
       compress: {
           unused: false
       }
   } 
```

关闭后相差不到2k。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-16T09:59:10.527

压缩器需要几秒钟来压缩多个大文件的情况并不少见。在您的情况下（多个大型库），8-12 秒是可以的。

但是，我建议不要自己压缩这些库。他们中的大多数人背后都有一个真正知道自己在做什么的开发人员团队，我建议从源代码下载缩小版本，并且做起来很简单

```
copy *.min.js allLibraries.js 
```

或者

```
cp *.min.js allLibraries.js 
```

**注意：**确保以正确的顺序连接，这通常意味着`The main libraries -> The plugins -> Your code`.

至于加速，除了禁用强压缩等酷炫功能外，您无能为力。

# mysql - `SELECT field AS` 在 2 个表之间使用 UNION 会导致错误#1064

> ID：15447729
> 
> 赞同：1
> 
> 时间：2013-03-16T09:39:55.290
> 
> 标签：mysql, sql, select

考虑以下查询：

```
SELECT x.* FROM
(
    (
        SELECT (id,
            insertuserid AS transaction_user_id,
            (user_price * (-1)) AS amount,
            "INVOICE" AS transaction_type,
            insertdatetime
            )
        FROM invoice
        WHERE transaction_user_id = 4
    )
    UNION
    (
        SELECT (id,
            user_id AS transaction_user_id,
            amount,
            "PAYMENT" AS transaction_type,
            insertdatetime)
        FROM payment
        WHERE user_id = 4
    )
)
AS x
ORDER BY x.insertdatetime 
```

`AS`它看到的第一个查询错误。

即使我更改`insertuserid AS transaction_user_id`为Union`insertuserid`的第一个，它也会在下一行的第二个错误：!!!`SELECT``AS``(user_price * (-1)) AS amount`

错误信息：

```
Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use near
'AS transaction_user_id, (user_price * (-1)) AS amount, "' at line 5

SELECT x.* FROM ( ( SELECT (id, insertuserid AS transaction_user_id,
(user_price * (-1)) AS amount, "INVOICE" AS transaction_type, insertdatetime )
FROM invoice WHERE transaction_user_id = 4 ) UNION
( SELECT (id, user_id AS transaction_user_id, amount,
"PAYMENT" AS transaction_type, insertdatetime) FROM payment
WHERE user_id = 4 ) ) AS x
ORDER BY x.insertdatetime 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T09:43:57.480

`SELECT`只需删除子句上的括号，

```
SELECT  x.* 
FROM
    (
        SELECT  id,
                insertuserid AS transaction_user_id,
                user_price * (-1) AS amount,
                'INVOICE' AS transaction_type,
                insertdatetime
        FROM    invoice
        WHERE   transaction_user_id = 4
        UNION
        SELECT  id,
                user_id AS transaction_user_id,
                amount,
                'PAYMENT' AS transaction_type,
                insertdatetime
        FROM    payment
        WHERE   user_id = 4
    ) AS x
ORDER BY x.insertdatetime 
```

# ubuntu - 带有密码的ubuntu重启和关机命令

> ID：15447730
> 
> 赞同：-4
> 
> 时间：2013-03-16T09:40:07.757
> 
> 标签：ubuntu, ssh, sudo, shutdown, reboot

我正在用 Java 编写一个程序来关闭 Ubuntu 服务器。

```
 echo password | sudo -S shutdown -h now
 sudo -p 'password' shutdown -h now 
```

任何一个命令都不起作用。

我需要 sudo 命令来关闭并通过传递密码重新启动我的服务器。因为我是从程序中执行此操作的，所以它不应该提示输入密码。密码也应该与命令一起发送。任何建议都会有所帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:59:05.173

sudo 的 -p 选项指定提示符，而不是密码。看一下 -A 选项。sudo 手册页的摘录-：

```
 -A          Normally, if sudo requires a password, it will read it from the current 
             terminal.  If the -A (askpass) option is specified, a
             helper program is executed to read the user's password and output the 
             password to the standard output.  If the SUDO_ASKPASS environment variable 
             is set, it specifies the path to the helper program.  Otherwise, the value
             specified by the askpass  option in sudoers(5) is used. 
```

帮助程序必须输出正确的密码。所以要指定帮助程序-：

```
 export SUDO_ASKPASS="/path/to/helper" 
```

# scala - 如何让scaladoc显示默认参数值？

> ID：15447734
> 
> 赞同：1
> 
> 时间：2013-03-16T09:40:59.347
> 
> 标签：scala, default-value, scala-2.10, default-parameters, scaladoc

我有很多方法，比如

```
def foo(..., ..., runFinalizer: Boolean = true)
         (implicit finalizer: Finalizer): Result = ... 
```

但是当我运行 scaladoc（使用 sbt）时，它没有记录`runFinalizer`具有默认值的文件。这是相当有问题的，因为用户将参数设置为`false`很少，并且生成的文档没有显示它可以省略。

到目前为止，我有两种解决方案，没有一种完全令人满意：

1.  `runFinalizer`记录可以在其`@param`块内省略的事实。它会有所帮助，但会导致在文档中的许多地方重复这样的句子，并且用户可能会忽略它。
2.  创建该方法的两个变体，一个有`runFinalizers`（没有默认值），一个没有。但这会不必要地使方法数量增加一倍，并使代码和文档变得混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:07:43.140

这很可能是一个错误，仅在某些情况下发生：[SI-4922 Omitted default argument values](https://issues.scala-lang.org/browse/SI-4922)。我升级到 Scala 2.10.1。它工作正常。

# html - 如何分散 div 中的 div - 水平？

> ID：15447737
> 
> 赞同：0
> 
> 时间：2013-03-16T09:41:21.853
> 
> 标签：html, css, margin

[这是这个问题](https://stackoverflow.com/questions/114543/how-to-center-a-div-in-a-div-horizontally)的延续。我们可以从中心分散 div 框吗？但请继续放大框。

两个要求：

1.  小分辨率（fi iPad）它保持集中；
2.  它需要大分辨率（从左侧算起 20%）。

不幸的是`left: -300px;`不起作用。这是一个[例子](http://jsfiddle.net/ESVFL/)。

**代码：**

```
<!DOCTYPE html>
<html>
<head>
<style>
#bg-rect-important {
    background-color: #656565;
    width: 100%;
    position: absolute;
    left:0; right:0;
    min-width: 980px;   /* max for iPad */  
    height: 263px;
}

#base-rect-lime {
    background-color: lime;
    height:400px;
    width:940px;
    position: relative; 
    margin: 0 auto;
}
</style>
</head>

<body>
<div class="bg-rect" id="bg-rect-important">
    <div id="base-rect-lime"></div>
</div>
</body>
</html> 
```

# javascript - 手动连接 JavaScript 的安全方法？

> ID：15447739
> 
> 赞同：0
> 
> 时间：2013-03-16T09:41:42.153
> 
> 标签：javascript, concatenation

我需要手动连接几个 JavaScript 代码块。有什么我应该考虑做的吗？

例如，将每个块包装在立即执行的函数中并在该函数前加上`;`?

我还应该注意什么以避免连接版本出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:49:05.360

请记住，其中一个块中的语法错误将阻止整个代码运行。

将每个块包装在函数中可能会破坏预期在全局范围内运行的糟糕编写的代码。

要处理语法错误，最好的办法是使用代码编译器（例如 YUI Compressor 或 Google Closure Compiler）来处理每个代码块，预先通知任何语法错误，并在您使用时减少其长度（以字节为单位）在它。

任何此类工具输出的代码都是高度标准化的，并且可能所有分号都在正确的位置。然后，您可以连接压缩版本。

然后，您将需要处理由一个代码块生成的运行时错误（异常）并停止所有后续块的执行。为了解决这个问题，只需将每个代码块包装在 a 中`try {...} catch (err) {}`，以便在出现错误时继续执行到下一个块。

您可以在代码编译阶段之前或之后执行此操作。

# javascript - 如何使用javascript将文本框的值存储在本地存储中

> ID：15447744
> 
> 赞同：0
> 
> 时间：2013-03-16T09:42:32.653
> 
> 标签：javascript, html

我想保存文本框中的用户名，以便以后使用 javascript 在另一个网页上检索它

```
<html>
<body>
<form method="post" action="index1.html">
username:<input type="text" name="uname" id="uname">
password:<input type="password" name="pass" id="pass">
login:<input type="submit" name="login" >
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:50:35.563

```
localStorage.setItem('username','myusername'); 
```

现在获取存储的密钥

```
localStorage.getItem('username') //myusername 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:45:50.267

使用 html5 是可能的。我们可以将一些值存储在 HTML5 中的 localstorage 中

[看这里](http://www.w3schools.com/html/html5_webstorage.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:46:04.873

如果您不使用 html5，您可以将其存储在 cookie 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T09:46:37.000

对于 JavaScript，页面重新加载之间的上下文通常会丢失，您可能需要考虑使用 JQuery 来提供一个看起来像是在多个页面上运行的应用程序，但实际上只是一个带有转换的页面。

您的另一个选择是将值存储在 cookie 或本地存储网络数据库中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T10:00:51.427

对的，这是可能的。你有一个按钮。只需调用该方法将值存储在按钮**`click`**事件中。

```
 $(function () {

    $("#submit").click(function () {
        var name = $("#name").val();
        alert(name);
        localStorage.setItem('username',name);
    });
}); 
```

摆弄的例子[**`here`**](http://jsfiddle.net/gopinaghr/hr3xQ/1/)。

本地存储 API 和自己尝试的游乐场，[**`HTML5`**](http://playground.html5rocks.com/#localstorage).

***当您将元素检查***为一对**Key**和**Value**时，您将能够看到输出。在资源选项卡下，如果您使用**`firebug`**.

# 编辑

我还更新了示例小提琴。

# c# - 如何从 Windows Phone 上传选定的照片

> ID：15447745
> 
> 赞同：0
> 
> 时间：2013-03-16T09:42:35.637
> 
> 标签：c#, windows-phone-7, file-upload

我正在尝试用 C# 为 Windows Phone 开发一个应用程序，它基本上将用户选择的图片上传到服务器（例如本地主机）。这个应用程序旨在像 PHP 文件上传脚本一样工作，用户选择一个文件，然后将其上传到服务器上所需的目录。

我已经编写了在图片选择器任务的帮助下选择图片的代码。但是，现在我完全糊涂了。我只是不知道如何处理选定的图片。

这是要求用户选择图片的页面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Tasks;
using System.IO;
using System.Windows.Media.Imaging;

namespace QR_Reader
{
    public partial class SamplePage : PhoneApplicationPage
    {
        public SamplePage()
        {
            InitializeComponent();
        }

        PhotoChooserTask selectphoto = null;

        private void SampleBtn_Click(object sender, RoutedEventArgs e)
        {
            selectphoto = new PhotoChooserTask();
            selectphoto.Completed += new EventHandler<PhotoResult>(selectphoto_Completed);
            selectphoto.Show();
        }

        void selectphoto_Completed(object sender, PhotoResult e)
        {
            if (e.TaskResult == TaskResult.OK)
            {

                BinaryReader reader = new BinaryReader(e.ChosenPhoto);
                image1.Source = new BitmapImage(new Uri(e.OriginalFileName));
                txtBX.Text = e.OriginalFileName;
            }
        }

    }
} 
```

请帮我。

这里，txtBX 是一个文本框，用于显示所选图片的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:48:03.817

您打算上传图片的服务是什么，这是个问题。**[这](http://dotnet.dzone.com/articles/building-imgur-client-windows-3)**是有关如何将其上传到 Imgur 的详尽指南。

通用上传可以是这样的：

```
string uploadUrl = "http://uploadserver/upload.php";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uploadUrl);
request.Method = "POST";
request.ContentType = "image/jpeg"; 
request.BeginGetRequestStream((result) =>
{
    using (Stream stream = request.EndGetRequestStream(result))
    {
        stream.Write(bytes, 0, bytes.Length); // your binary data
    }

    request.BeginGetResponse((rResult) => 
    {
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(rResult);

        using (Stream responseStream = response.GetResponseStream())
        {
              // Do something here.
        }
    }
}, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T00:59:43.710

这是我的做法：

```
static private async Task<JToken> 
           ImageUploadApiCallAsync(string strApiName, List<KeyValuePair<string, string>> parameterList, Stream imageStream, string strFileName)
        {
            JToken token = null;

            if (!CheckConnection())
            {
                token = @"{
                                'success':false,
                                'message':'No connection',
                                'errorcode':1
                                }";
                return token;
            }

            try
            {
                //Get your api URL
                string strRequestUri = getApiUrlWithApiName(strApiName);

                var httpClient = new HttpClient(new HttpClientHandler());

                using (var content = new MultipartFormDataContent())
                {
                    //I did a stream compression here since I don't want the original size image to upload to my server to reduce space and internet flow.
                    Stream uploadStream = SystemUtil.CompressImageStream(imageStream);

                    content.Add(new StreamContent(uploadStream), "file", strFileName);

                    //Add my api parameters into content
                    foreach (var keyValuePair in parameterList)
                    {
                        content.Add(new StringContent(keyValuePair.Value), keyValuePair.Key);
                    }
                    //Do PostAsync
                    HttpResponseMessage response = await httpClient.PostAsync(strRequestUri, content);
                    HttpResponseMessage message = response.EnsureSuccessStatusCode();
                    //Get result from server
                    var responseString = await response.Content.ReadAsStringAsync();

                    token = JObject.Parse(responseString);
                }
            }
            catch (Exception e)
            {
                token = @"{
                                'success':false,'message':'" + e.Message + "','errorcode':2}";
            }
            return token;
        } 
```

# php - 如何修复警告：无法修改标头信息

> ID：15447761
> 
> 赞同：-2
> 
> 时间：2013-03-16T09:44:11.480
> 
> 标签：php, sql

我有这个代码可以从 mysql 导出到 wordpress 中的 Excel 我用链接调用这个文件

```
 <?php include("header.php"); 

    $table = 'driver_detail';
    $file = 'export';

    $result = mysql_query("SHOW COLUMNS FROM ".$table."");
    $i = 0;
    if (mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_assoc($result)) {
    $csv_output .= $row['Field']."; ";
    $i++;
    }
    }
    $csv_output .= "\n";
    $values = mysql_query("SELECT * FROM ".$table."");
    while ($rowr = mysql_fetch_row($values)) {
    for ($j=0;$j<$i;$j++) {
    $csv_output .= $rowr[$j]."; ";
    }
    $csv_output .= "\n";
    }

    $filename = $file."_".date("Y-m-d_H-i",time());
    header("Content-type: application/vnd.ms-excel");
    header("Content-disposition: csv" . date("Y-m-d") . ".csv");
    header( "Content-disposition: filename=".$filename.".csv");
    print $csv_output;
    exit;
    ?> 
```

但我有这个错误..如何解决这个问题

```
 Warning: Cannot modify header information - headers already sent by (output started at /home5/revoluv0/public_html/proj/autobodyparts/get-details/header.php:3) in /home5/revoluv0/public_html/proj/autobodyparts/get-details/export-driver.php on line 24 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:00:58.573

在标题之前打印了一些东西，甚至一个空格也会导致这个问题。

# x11 - 需要在 x11 中拍摄正在运行的应用程序的快照

> ID：15447762
> 
> 赞同：0
> 
> 时间：2013-03-16T09:44:15.570
> 
> 标签：x11

我们需要通过单击 X11 中的按钮来拍摄正在运行的应用程序的快照。我们使用 XCopyArea 函数并将当前图像复制到 Pixmap 中。我们需要一种方法来与硬盘中的图像文件相同。请帮助我们。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:17:07.477

您可以使用以下命令将 Pixmap 写入文件：

```
int XWriteBitmapFile(Display *display, char *filename, Pixmap bitmap,
              unsigned int width, unsigned int height, int x_hot, int y_hot); 
```

# javascript - 从没有服务器的java脚本调用perl

> ID：15447767
> 
> 赞同：0
> 
> 时间：2013-03-16T09:44:31.010
> 
> 标签：javascript, html, perl, button

我对 java 脚本有点陌生，想知道在没有服务器（Tomcat、XAMP 等）干预的情况下从 HTML 网页单击按钮时是否有任何方法可以调用 perl 脚本。一件重要的事情是现有的perl代码不能修改。如果有任何 perl 模块可以解决问题，请告诉我。我的工作平台是 Linux。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:01:05.820

在一般情况下，不，这是不可能的。

如果代码要在客户端运行，那么客户端需要从服务器下载，然后执行。它还需要一个允许在浏览器中执行 Perl 代码的浏览器插件，因为这不是标准的浏览器功能；虽然我相信这样的插件确实存在，但它们并没有被广泛使用。

如果代码要在服务器上运行，那么服务器显然已经参与其中。

我认为可以在不涉及服务器的情况下从 HTML 页面运行 Perl 代码的唯一方法是提前在客户端上安装 Perl 代码、调用页面和 Perl 浏览器插件。这将是一个足够深奥的安排，除非您需要在没有网络连接的机器上执行此操作，否则我认为追求它没有多大意义 - 即使那样，它可能会更容易和更直接：

1.  使用本机桌面 GUI 来控制 Perl，而完全不涉及 HTML 或浏览器，或者

2.  在客户端安装一个迷你 HTTP 服务器来与 Perl 代码交互，而不是让浏览器直接运行 Perl

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:48:40.590

如果 Perl 脚本应该在客户端上运行：这是无法做到的。

如果 Perl 脚本应该在服务器上运行：将按钮包装到一个表单中，该表单将 Perl 脚本的 URL 作为`action`-attribute。

# java - Get 方法返回 XML 和 JSON

> ID：15447768
> 
> 赞同：0
> 
> 时间：2013-03-16T09:44:33.537
> 
> 标签：java, xml, json, rest, get

如果我这样做：

```
@GET
    @Path("/users")
    @Produces("application/json")
    public String users()
    {
        String users = null;
        ArrayList<User> userList = new ArrayList<User>();

        try {
                userList = new UserManager().getUsers();
                Gson gson = new Gson();
        users = gson.toJson(userList);

    } catch (Exception e) {
                e.printStackTrace();
        }
        return users;
    } 
```

我的 GET 方法只是返回 JSON 中的信息。但我也希望它返回 XML 吗？类似的东西`@Produces({"application/xml", "application/json"})`。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:52:30.040

我不确定您在这里使用的是什么框架，但这并不特别重要 - 您不能在同一个请求中返回两种格式（以合理的方式）。对于`Content-Type`给定的响应，标头仅存在一次，因此它不能同时是`application/json`and `application/xml`。

这里的常见习惯用法是允许一个`GET`参数，该参数指定客户端希望返回数据的格式 - ala`http://example.com/path/to/rest/data?type=JSON`或`http://example.com/path/to/rest/data?type=XML`.

# android - 在文本视图中显示德语字符

> ID：15447770
> 
> 赞同：0
> 
> 时间：2013-03-16T09:44:46.543
> 
> 标签：android, android-layout, textview

我有一个字符串，其中包含一些**德语字符**和我在**Textview**中的设置，但有些字符没有显示，而是一个框而不是它们。这是代码：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_german);
        TextView abc = (TextView) findViewById(R.id.abc);
        String chararc = getString(R.string.german);

        try {
            final String s = new String(chararc.getBytes(), "UTF-8");
            abc.setText(s);
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_german, menu);
        return true;
    }
} 
```

这是字符串：

```
 <string name="german">Ë ø  ë Ḧ ḧ Ï ï Ḯ ḯ M̈    m̈ N̈   n̈ Ö    ö Ȫ ȫ Ṏ ṏ P̈    p̈ S̈   s̈ T̈   ẗÜ  ü Ǖ ǖ Ǘ ǘ Ǚ ǚ Ǜ ǜ Ṳ ṳ Ṻ ṻ V̈    v̈ Ẅ    ẅ Ẍ ẍ Ÿ ÿ
</string> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:03:48.250

如果您使用 Android SDK 工具创建项目（请参阅创建 Android 项目），这些工具`res/`会在项目的顶层创建一个目录。此`res/`目录中有各种资源类型的子目录。还有一些默认文件，例如`res/values/strings.xml`，保存您的字符串值。

一旦你决定了你将支持的语言，创建资源子目录和字符串资源文件。例如：

```
MyProject/
   res/
   values/
       strings.xml
   values-es/
       strings.xml
   values-fr/
       strings.xml
   values-de/
       strings.xml 
```

[参考](http://developer.android.com/training/basics/supporting-devices/languages.html),[参考2](http://developer.vodafone.com/how-support-multiple-languages-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:59:49.260

您应该尝试使用[Html.fromHtml](http://developer.android.com/reference/android/text/Html.html)

```
...
abc.setText(Html.fromHtml(s));
... 
```

# angularjs - 如何在 angularjs 路由中获取 http 配置？

> ID：15447771
> 
> 赞同：0
> 
> 时间：2013-03-16T09:44:51.260
> 
> 标签：angularjs, angularjs-routing

我想在我的路由中获取在 http 请求中发送的配置（例如，url）。这是我的路线：

```
 angular.module('myApp', ['myApp.directives', 'myApp.services', 'myApp.filters']).config(
        function($routeProvider, $locationProvider, $httpProvider) {
            $locationProvider.html5Mode(false);
            $locationProvider.hashPrefix('!');

            $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

            $routeProvider.
            when('/', {
                templateUrl: 'elements/home/home.html',
                controller: homeCtrl
            });
    });

    angular.module('myApp').run(function($rootScope, $location, $http) {
        pendingRequests = {};

        $rootScope.$watch(function() {
            return $location.url();
        },
        function(newRoute) {
            console.log(newRoute);
            var requestUrl = ?
            pendingRequests[newRoute] = 0;
        });
    }); 
```

现在在运行模块中，我希望为 $location.url() 发送请求 url

有人知道吗？

# php - 什么相当于在教义中编写任务的存储库？

> ID：15447774
> 
> 赞同：3
> 
> 时间：2013-03-16T09:45:02.787
> 
> 标签：php, symfony, orm, doctrine-orm, repository

**正如[Doctrine 的 API](http://www.doctrine-project.org/api/orm/2.1/class-Doctrine.ORM.EntityRepository.html)所说：**

> EntityRepository 用作实体的存储库，具有**用于检索实体**的通用方法和业务特定方法。
> 
> 此类是为继承而设计的，用户可以对此类进行子类化，以使用特定于业务的方法编写自己的存储库来定位实体。

**但是，将我的业务逻辑用于保存实体的正确位置在哪里？**

1.  将正确的构造函数放入我的实体本身？
2.  把它也放入存储库？
3.  插入新实体与可以输入数据的“表单”非常相关，所以它应该或多或少在控制器中？
4.  为控制器创建一个助手类，以便由助手类完成工作而不是炸毁我的控制器？
5.  写这个问题的时候还有什么我没有想到的吗？

我更喜欢远离炸毁控制器的解决方案。目前我制作了一个由不同控制器调用的辅助类，因为我不确定将它放在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T10:19:23.137

我的解决方案是使用一层管理器，如`UserManager`，`ArticleManager`等。这一层是[服务层模式](http://martinfowler.com/eaaCatalog/serviceLayer.html)的实现。

管理器层隐藏了与持久化和获取模型对象相关的所有内容——也就是说，使用该层的对象不关心模型的存储方式和位置，它可以随时更改而无需重写整个应用程序。

因此，例如，控制器对 Doctrine 一无所知。我今天可能使用 Doctrine ORM 进行持久化，但明天可能是 Doctrine ODM 或只是普通文件。无论我稍后切换到什么，都只需要更改管理器层——而不是整个应用程序。

以下是一些典型的方法`UserManager`：

*   `find($id)`
*   `findBySomething($something)`
*   `save(User $user)`
*   `delete(User $user)`

此外，管理者层控制着系统的领域逻辑，这些逻辑不能单独在模型对象级别上进行控制。例如`UserManager`，当被要求保存 a 时`User`，会检查 是否`$user`有一个非空的`$plainPassword`并将其编码并设置为`$password`。将此逻辑保留在`User`模型类中没有意义，因为模型不应依赖于服务，并且此任务需要密码编码器服务。

是否使用管理器层后面的存储库是您的选择。您可以将存储库仅用于检索方法。但我选择不使用它们，因为它们增加了一些额外的复杂性，对我没有任何好处。由于所有持久性内容都隐藏在管理器层后面，因此我可以稍后按照我想要的方式对其进行重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:09:29.813

除了与每个 sf2 开发人员应该关心的最佳实践相关的规则外，没有保存实体的特定规则。

1.  将正确的构造函数放入我的实体本身？*`(You've to keep your entities simple and do not let them know about the persistence layer)`*

2.  把它也放入存储库？*`(Mainly used for retrieving Entities)`*

3.  插入新实体与可以输入数据的“表单”非常相关，所以它应该或多或少在控制器中？*`Inserting entities in not related to "form". It's ok to put it in your controller, but if you have many lines of code that create and persist your entities, You should then put a shortcut method which contains this logic. (You can also add a base controller for common methods).`*

4.  为控制器创建一个助手类，以便由助手类完成工作而不是炸毁我的控制器？[依赖注入容器](http://symfony.com/doc/master/book/service_container.html)*`(Take a look at the`* *`, it allows you to create a service for this purpose).`*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:54:06.343

在这里，DIC 开始行动。您的实体本身应该是愚蠢的，不知道它在后台是数据库..控制器应该保持轻量级..为此，您可以使用依赖注入创建“服务”。

[http://symfony.com/doc/master/book/service_container.html](http://symfony.com/doc/master/book/service_container.html)

认为您正在使用您的助手类进行类似的操作，可能会给他们一些调整以使用 symfony 方式进行操作。

-克里斯

# r - 比较 R 中面板数据的分位数回归程序（即 lqmm() 和 rqpd()）

> ID：15447776
> 
> 赞同：4
> 
> 时间：2013-03-16T09:45:16.480
> 
> 标签：r, panel, quantile

对于具有固定效应的给定面板数据分位数回归问题（参见下面的示例），是否可以使`lqmm()`输出完全（或至少密切）匹配来自的输出`rqpd()`？

请参阅下面的示例和随后的结论/评论。我的结论正确吗？

```
library(lqmm)
library(rqpd)

set.seed(10)
     m <- 3
     n <- 10
     s <- as.factor(rep(1:n,rep(m,n)))
     x <- exp(rnorm(n*m))
     u <- x*rnorm(m*n) + (1-x)*rf(m*n,3,3)
     a <- rep(rnorm(n),rep(m,n))
     y <- rep(1:n,rep(m,n)) + u 
 #    fit <- rqpd(y ~ x | s, panel(lambda = 5))

data1<-data.frame(y,x,s)
fit.lqmm<- lqmm(fixed=y~x ,  random=~1, group=s, iota=.5,nK=2000, type="normal", rule=1, covariance="pdIdent", data=data1)
coef(fit.lqmm)
ss1<-raneff.lqmm(fit.lqmm)

sig2<-cov.lqmm(fit.lqmm)
sig2

fit.rqpd <- rqpd(y ~ x | s, panel(lambda = 1/2*1/sig2,taus=.5, method="pfe", tauw=1))
coef(fit.rqpd)

# comparing estimated fixed effects
ss2<-coef(fit.rqpd)[3:length(coef(fit.rqpd))]
plot(as.matrix(ss1),as.numeric(ss2)) 
```

# 结论/评论

1.  我们期望对于 lambda 的特定选择，`rqpd()`应该紧密匹配`lqmm()`。我想应该是什么时候`lambda=1/(2 cov.lqmm)`。正确的？
    *   我说的是紧密匹配而不是精确匹配，因为`rqpd`它基于固定 lambda 的 L1 正则化，而我认为 (??)`lqmm`是基于 L2 正则化但针对由 Geraci 和 Bottai (2007) 中的程序产生的特定 lambda。
2.  一开始，至少当nK 小时，即nK=7 时，这不会发生。但是随着 nK 增加到 100 或 1000，这两个过程“似乎”接近
3.  因此，似乎适当使用`lqmm`至少取决于对 nK 的良好（也许足够大）选择。
4.  我正在探索使用 ，`lqmm()`因为这里系统地选择了惩罚参数，而`rqpd()`需要提供它。但是，由于我无法匹配特定`lqmm()`的`rqpd`lambda 选择，我不确定我是否理解`lqmm`正在做什么。

# javascript - 比较字符串时 IE 中的数字预期错误

> ID：15447777
> 
> 赞同：1
> 
> 时间：2013-03-16T09:45:21.363
> 
> 标签：javascript, html, internet-explorer, internet-explorer-8

我在其中一个 javascript 插件中有一个排序功能，代码看起来像这样：

```
groups = groups.sort(function (a, b) {
    a = a.content.toString().toLowerCase().replace(/\s+/g, '');
    b = b.content.toString().toLowerCase().replace(/\s+/g, '');
if(a > b){ //stops and gives error here
return 1;
}
if(a < b){
return -1;
}
return 0;
}); 
```

`a.content`实际上是一个字符串本身（但只是为了 IE，我`.toString()`在代码中也添加了。
在所有其他浏览器上，上面的代码在所有浏览器上运行良好，但在 IE 8 上，上面的代码显示 JavaScript 错误并停止在上面代码中显示的行。控制台在此行显示一条消息“预期数字”。

（有时`a.content`这种形式也可能有一些 html ->
`"<span>Sample String</span>"`。
不确定这是否会导致 IE8 中的错误，但问题仅出现在此浏览器中）
如何摆脱此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T03:28:05.600

```
a = a.content.toString().toLowerCase() 
```

改用这个

```
var a1 =    a = a.content.toString().toLowerCase() 
```

由于 ie < 9 存在问题，toLowerCase 随机返回未知数据类型...如果您不重新分配排序中的变量，它将运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:57:25.403

我记得当 IE 添加一些空格时，IE 中出现了一些问题......尝试修剪。

或者...您是否尝试使用 .localeCompare 比较字符串？

```
alert('a'.localeCompare('b'));
alert('a'.localeCompare('a'));
alert('b'.localeCompare('a')); 
```

# ruby-on-rails - 是否可以在 heroku 中返回应用程序的备份列表？

> ID：15447780
> 
> 赞同：2
> 
> 时间：2013-03-16T09:46:01.243
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, postgresql, heroku

我发现 Heroku::Client::Pgbackups 已经被弃用了，所以我想知道是否可以在 Ruby 中运行一个命令来仅使用 heroku-api gem 来执行“heroku pgbackups”。

我正在尝试为我的 heroku 应用程序创建一个维护站点。只需列出所有应用程序，只需单击一个按钮，我就可以查看备份列表，还可以从列表中恢复/下载备份。

除了列出备份之外，大多数 CLI 进程已经在 gem 中可用。除了执行 system() 命令之外，还有什么方法可以做到吗？因为我可能会在没有安装 heroku 工具带的服务器上托管我的应用程序。这样，我的应用程序只能使用 heroku-api gem 通过 api 连接。

我知道这要求太多，但如果你能给我提供一些工作，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-10T02:50:13.690

是的你可以。

[https://devcenter.heroku.com/articles/pgbackups#list-backups](https://devcenter.heroku.com/articles/pgbackups#list-backups)

```
$ heroku pgbackups
ID   | Backup Time         | Size  | Database
-----+---------------------+-------+------------------------
a226 | 2012/02/22 20:02.19 | 5.3KB | DATABASE_URL
a227 | 2012/02/23 20:02.19 | 5.3KB | DATABASE_URL
b251 | 2012/02/24 16:08.02 | 5.3KB | HEROKU_POSTGRESQL_BLACK
b252 | 2012/02/24 16:08.53 | 5.3KB | HEROKU_POSTGRESQL_PINK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T10:19:42.270

事实证明，可以这样做来获取备份：

```
api = Heroku::API.new(:api_key => your_api_key)  
pgbackups_url = api.get_config_vars('app_name').body['PGBACKUPS_URL']
client = Heroku::Client::Pgbackups.new pgbackups_url
client.get_backups 
```

然后它返回备份列表。好棒！有关更多 pgbackups 功能，请在此处查看：[https ://github.com/heroku/heroku/blob/master/lib/heroku/client/pgbackups.rb](https://github.com/heroku/heroku/blob/master/lib/heroku/client/pgbackups.rb)

# c++ - Win32 更改列表视图项索引

> ID：15447784
> 
> 赞同：1
> 
> 时间：2013-03-16T09:46:37.327
> 
> 标签：c++, winapi

我在 Windows 上的 MSVC 2012 下使用 C++。我使用的是带对话框的纯 Win32，没有 MFC。

我有给定项目的 LVITEM 结构。我想更改给定 ListView 上项目的索引，以便我可以重新排序项目的位置。该`.iItem`属性本质上是我要更改的内容，但是，我不知道如何使更改反映在列表视图中。

如果可能的话，我希望 ListView 自动将项目移动到我移动项目的下方，而不是覆盖新位置中的现有项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:18:54.630

列表视图项的索引只会作为操作项集合的副作用而改变。您可以通过在它之前插入一个新项目 LVM_INSERTITEM 来增加它。您可以通过删除它之前的一个项目 LVM_DELETEITEM 来减少它。您可以通过先删除项目来移动项目，然后将其重新插入到另一个位置。或者通过交换 LVITEM 属性。

必须处理子项使这有点尴尬，但这就是编写本机 win32 代码的麻烦。这就是为什么有这么多类库可以使这更容易的原因。受到推崇的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-05T22:06:38.143

有一种方法可以移动列表视图的项目而不删除/重新创建它们：排序

如果你想在其他参考项目之前移动一个项目，这个代码必须做到这一点：

```
struct info {
   int item_to_move_before_reference;
   int item_reference;
};

int CALLBACK CompareFunc(LPARAM item1, LPARAM item2, info* i) {

   if(item1 == i->item_to_move_before_reference) {
      item1 = i->item_reference;
   } else if(item1 >= i->item_reference) {
      item1++;
   }

   if(item2 == i->item_to_move_before_reference) {
      item2 = i->item_reference;
   } else if(item2 >= i->item_reference) {
      item2++;
   }

   return item1 - item2;
}

bool sort_items(HWND listview, int item_to_move_before_reference, int item_reference) {
   if(item_to_move_before_reference < item_reference) return false;
   info i;
   i.item_to_move_before_reference = item_to_move_before_reference;
   i.item_reference = item_reference;
   ListView_SortItemsEx(listview, CompareFunc, &i);
   return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-16T19:28:10.373

这是一个片段:)

```
bool isUp = ...;
HWND hListWnd = ...;
int pos = ListView_GetNextItem(hListWnd, -1, LVNI_SELECTED);
if (pos == -1 || pos == 0 && isUp || pos == ListView_GetItemCount(hListWnd) - 1 && !isUp)
    return true;

pos = isUp ? pos - 1 : pos;

HWND hHeader = ListView_GetHeader(hListWnd);
for (int i = 0; i < Header_GetItemCount(hHeader); i++) {
    TCHAR buf[255]{0};
    ListView_GetItemText(hListWnd, pos, i, buf, 255);
    LVITEM lvi = {0};
    lvi.mask = LVIF_TEXT;
    lvi.iItem = pos + 2;
    lvi.iSubItem = i;
    lvi.pszText = buf;
    lvi.cchTextMax = 255;
    if (i == 0)
        ListView_InsertItem(hListWnd, &lvi);
    else
        ListView_SetItem(hListWnd, &lvi);
}

ListView_DeleteItem(hListWnd, pos);

if (!isUp)
    ListView_SetItemState (hListWnd, pos + 1, LVIS_FOCUSED | LVIS_SELECTED, 0x000F); 
```

# android - 将背景 DPI 更改为 240 时出现“位图太大”

> ID：15447787
> 
> 赞同：0
> 
> 时间：2013-03-16T09:46:57.047
> 
> 标签：android, dpi

我的背景在我的智能手机上的应用程序中总是看起来很糟糕，所以我四处搜索并找到了[这篇](http://developer.android.com/guide/practices/screens_support.html)文章，所以我创建了 3 个背景副本 (120,160,240) DPI，但现在我收到了这个错误：

> 03-16 11:41:13.984: W/OpenGLRenderer(19236): 位图太大而无法上传到纹理中 (1676x2666, max=2048x2048)

现在我想知道如何按照这些说明进行操作（提供 240 DPI 背景图像），并使其尺寸合理，以免出现此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:32:21.317

使用 largeHeap，仅从 3.0 开始支持。如果您的手机比 Honey Comb 更早，则无法使用此功能。.

# architecture - 如何构建使用多个独立视图的 Knockout.js 应用程序？

> ID：15447789
> 
> 赞同：2
> 
> 时间：2013-03-16T09:47:06.717
> 
> 标签：architecture, knockout.js, template-engine

*如果您有一个*视图，我很清楚如何使用 Knockout.js 。

如果我有多个相互独立的视图，如何构建应用程序？我可以想象我应该每个视图都有一个视图模型（当然，因为这是*视图*模型的含义），但是如何将 HTML 文件拆分为组件？

例如，我希望在其自己的文件中分别包含用于定义视图的 HTML 片段，并且`index.html`只有占位符用于添加这些视图的位置。

我无法想象 Knockout.js 不支持这一点，但到目前为止我发现的所有示例都只是一个视图（就像[TodoMVC](http://todomvc.com/)的示例一样）。

如何将一个大的 HTML 文件分成多个文件，每个视图一个，然后使用 Knockout.js 将它们组合起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:54:17.573

哦，这很容易。[`applyBindings`](http://knockoutjs.com/documentation/observables.html)Knockout JS 中的方法接受一个可选的 DOM 元素作为第二个参数。因此，在您的情况下，您可以执行以下操作：

```
ko.applyBindings(myViewModel, 
    document.getElementById('myModuleWrapperDiv'));
ko.applyBindings(otherViewModel, 
    document.getElementById('otherModuleWrapperDiv')); 
```

唯一的问题是您将无法在单个 DOM 子树中混合和匹配来自两个视图模型的绑定。例如，此标记将起作用：

```
<div id="myModuleWrapperDiv">
    ...
</div>
<div id="otherModuleWrapperDiv">
    ...
</div> 
```

但是，这不会：

```
<div id="myModuleWrapperDiv">
    ...
    <div id="otherModuleWrapperDiv">
        ...
    </div>
</div> 
```

* * *

以下是我使用 Knockout 制作小部件的方法。请注意，在 95% 的情况下，只需加载模板并对其应用绑定即可。但是，如果您需要一个*打包*的小部件（即作为一个单独的组件发布的东西），最好的方法是将其包装在自定义绑定中。Angular JS 通过它的指令推广了类似的方法。

1.  为您的小部件设计标记作为文档片段。你可以做任何你想做的事：简单的 HTML，一个占位符`div`，所有的渲染和交互都在 JavaScript 中完成——一切都会做。

2.  为您的模板设计一个视图模型。想想你的小部件可能需要的数据来渲染、操作和构建你的模型。

3.  为您的小部件创建自定义绑定。最简单的事情是将它放在占位符`div`元素上。

    一种。您的`init`方法应该加载模板并将内部小部件视图模型的绑定应用到它。应用绑定后，您可以将生成的文档片段附加到占位符`div`。

    湾。您的更新方法应该根据通过自定义绑定属性参数提供的值来更改内部视图模型的状态。

# java - 在java中将数组对象作为方法参数传递

> ID：15447791
> 
> 赞同：0
> 
> 时间：2013-03-16T09:47:17.213
> 
> 标签：java, arrays, arguments

我正在尝试读取图像文件的数量，并且想将它们相互比较。我创建了一个大小为 5 的数组对象并为其分配了 5 个图像。我试图通过将数组对象传递给方法来比较每个图像。但它向我显示了一个错误。谁能帮我？

```
File[] f= new File[5];

 f[1]= new File("p1.png");

 f[2]= new File("p2.png");

 f[3]= new File("p3.png");

 f[4]= new File("p4.png");

 f[5]=new file("p5.png");

 for(int i=1;i<5;i++)

{

 compare(f[i],f[i++]);

}

public void compare(File fi[1],File fi[2])
{

    BufferedImage image = ImageIO.read(fi[1]);
 int width = image.getWidth(null);

  int height = image.getHeight(null);

int[][] clr=  new int[width][height]; 

  BufferedImage images = ImageIO.read(fi[2]);

 int widthe = images.getWidth(null);

   int heighte = images.getHeight(null);

int[][] clre=  new int[widthe][heighte]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:51:20.777

几个问题：

1.  这条线

    ```
    public void compare(File fi[1],File fi[2]) 
    ```

    是语法错误。它应该是

    ```
    public void compare(File f1, File f2) 
    ```

    （显然，参数的名称取决于您）。

2.  调用它时，使用

    ```
    compare(f[i], f[i + 1]); 
    ```

    而不是`i++`.

3.  此行尝试写入不存在的数组槽：

    ```
     f[5]=new file("p5.png"); 
    ```

    ...因为您的数组被定义为`new File[5]`，这意味着它有插槽`0`通过`4`。您需要将插槽中的所有行设置值更改为使用`0`through`4`而不是`1`through `5`。

4.  你的循环边界是错误的。它们应该是`0`and`< f.length - 1`而不是`1`and`< 5`在这里：

    ```
    for(int i = 0; i < f.length - 1; i++) 
    ```

    `< f.length - 1`做而不是做有两个原因`< 5`。首先，因为你`i + 1`在循环体中使用，你想提前停止一个槽。其次，如果你改变了之后的长度`f`，你必须记得更新循环`5`，`for`这是一个等待发生的维护问题。（请注意，循环是 to`i < f.length - 1`因为您`i + 1`在循环主体中使用。通常循环是`0`through `< length`，但在这种情况下不是。）

那时我停止阅读代码，所以不能保证没有其他基本问题。我建议阅读一些基本的 Java 教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:55:10.883

你的意思是互相比较？

```
for (int i = 0; i < f.length; i++)
    {
        for(int j=i+1;j<f.length;j++){
         compare(f[i], f[j]);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:50:51.263

数组从 0 开始索引，而不是 1。而不是这样：

```
File[] f= new File[5];
 f[1]= new File("p1.png");
 f[2]= new File("p2.png");
 f[3]= new File("p3.png");
 f[4]= new File("p4.png");
 f[5]=new file("p5.png"); 
```

用这个：

```
File[] f= new File[5];
 f[0]= new File("p1.png");
 f[1]= new File("p2.png");
 f[2]= new File("p3.png");
 f[3]= new File("p4.png");
 f[4]=new file("p5.png"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T09:50:52.937

将您的方法签名更改为

```
public void compare(File fi1,File f2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T09:51:04.143

您的代码存在一些问题。

首先，你的 for 循环应该使用退出条件`i < f.length-1`

其次，您的比较方法不需要数组引用：

```
public void compare(File f1, File f2) {
    ....
} 
```

第三，索引从 0 开始，而不是 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T09:51:12.357

更改此行

`public void compare(File fi[1],File fi[2]){`

至

`public void compare(File fi,File fi2) {`

或者

`public void compare(File[] fi,File[] fi2) {`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-16T09:52:37.423

**大小为 5 的数组从 0-4 开始，但您访问的索引为 5**

```
File[] f= new File[5];

 f[1]= new File("p1.png");

 f[2]= new File("p2.png");

 f[3]= new File("p3.png");

 f[4]= new File("p4.png");

 f[5]=new file("p5.png");  // This is wrong 
```

值应为 0-4

并且

```
 for(int i=1;i<5;i++)
{
 compare(f[i],f[i++]); 
```

**如果 i==4 那么 i++ 会变成，所以你会得到 ArrayIndexOutOfBoundsException**

```
 } 
```

我不会提及其余的错误，因为其余的答案已经发布了

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-16T10:01:01.703

```
 File[] f= new File[6];

     f[1]= new File("p1.png");

     f[2]= new File("p2.png");

     f[3]= new File("p3.png");

     f[4]= new File("p4.png");

     f[5]=new file("p5.png");

     for(int i=1;i<5;i++)  
    {   
     compare(f[i],f[i+1]);
    }

    public void compare(File f1,File f2)
    {
     BufferedImage image = ImageIO.read(f1);
     BufferedImage image = ImageIO.read(f2);
 // compare as you like

} 
```

# c# - Windows 窗体按给定值动态生成文本框

> ID：15447794
> 
> 赞同：0
> 
> 时间：2013-03-16T09:47:45.937
> 
> 标签：c#, windows, winforms, matrix, textbox

我想要做的是，例如，如果我传递了 5，`matrSize`那么它必须生成 25 个名为 MatrixNode[11]、.. MatrixNode[12]... 的文本框（就像数学中的矩阵）这样

![在此处输入图像描述](../Images/640e5257e6f886ce8cd27f20416a9551.png)

文本框只会获取矩阵元素，但默认情况下，随机值将在文本框创建后立即填充。

```
 public partial class Form2 : Form
    {
        public Form2(int matrSize)
        {
            InitializeComponent();
            int counter=0;
            TextBox[] MatrixNodes = new TextBox[matrSize*matrSize];
            for (int i = 0; i < matrSize; i++)
            {
                for (int j = 0; j < matrSize; j++)
                {
                    var tb = new TextBox();
                    Random r = new Random();
                    int num = r.Next(1, 1000);
                    MatrixNodes[counter] = tb;
                    tb.Name = "Node_" + MatrixNodes[counter];
                    tb.Text = num.ToString();
                    tb.Location = new Point(172, 32 + (i * 28));
                    tb.Visible = true;
                    this.Controls.Add(tb);
                    counter++;
                }
            }
            Debug.Write(counter);
        } 
```

现在的问题是：

1.  我的函数对所有生成的字段填充相同的数字（不知道原因），实际上它必须是随机的
2.  外观必须与数学中的矩阵完全相同，我的意思是，例如，如果我们传递值 5，则必须有 5 行和 5 列文本框。但我垂直只得到​​ 5 个文本框。

提前谢谢。请帮助弄清楚功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:52:51.070

1.  您正在为`Random`每次迭代创建一个新实例，并且这些实例在时间上非常接近，这就是值相同的原因。在外部循环*之前*创建一个实例，然后在内部调用。`for``Next()`

2.  您的所有`Point`实例都具有相同的水平位置 172，因此您的所有列都重叠。您需要使用`j`变量调整 X，例如`Point(172 + (j * 28), 32 + (i * 28))`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:02:41.663

对于问题 2：

您将文本框位置设置为：

```
tb.Location = new Point(172, 32 + (i * 28) 
```

并且永远不会更改 X 坐标 (172)，因此您只会得到一列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-27T07:36:31.210

```
private void button1_Click(object sender, EventArgs e)
{
    int matrSize = 4;
    int counter = 0;
    TextBox[] MatrixNodes = new TextBox[matrSize * matrSize];

    for (int i = 0; i < matrSize; i++)
    {
        for (int j = 0; j < matrSize; j++)
        {
            var tb = new TextBox();
            Random r = new Random();
            int num = r.Next(1, 1000);
            MatrixNodes[counter] = tb;
            tb.Name = "Node_" + MatrixNodes[counter];
            tb.Text = num.ToString();
            tb.Location = new Point(172 + (j * 150), 32 + (i * 50));
            tb.Visible = true;
            this.Controls.Add(tb);
            counter++;
        }

        counter = 0;
    }
} 
```

# android - 安卓。奇怪的活动行为。应用程序中的活动依赖项

> ID：15447797
> 
> 赞同：1
> 
> 时间：2013-03-16T09:48:09.180
> 
> 标签：android, android-activity

我正在经历一种奇怪的行为。在我的应用程序中，我有运行服务“S”的活动“A”。“S”的主要职责是`AlarmManager`为特定时间设置一个新的。还有接收器“R”来接收`AlarmManager`触发事件。Receiver 向“S”发送一个广播消息，在某些情况下，它将使用 启动一个新的活动“B” `Intent.FLAG_ACTIVITY_NEW_TASK`。

问题是，如果“A”打开或被移到后台（通过使用`moveTaskToBack()`）一切正常。但是，如果活动“A”被破坏，“B”将永远不会出现在屏幕上。为什么会发生这种情况，可能的解决方案是什么？我认为使用`moveTaskBack()`不是最好的方法。

“B”如何依赖于“A”的存在？

# android - Android/iOS：应用内 SQL 调用或 Web 后端？

> ID：15447799
> 
> 赞同：0
> 
> 时间：2013-03-16T09:48:26.343
> 
> 标签：android, ios, sql, web-services

我们是 iOS/Android 应用程序启动阶段的几个初学者，我们正在研究如何设置数据库/应用程序连接。从应用程序使用直接连接到数据库的优点/缺点是什么？使用 php/json 使用 Web 后端的优缺点是什么？我们已经进行了一些研究，发现了像 parse 和 stackmob 这样的后端服务，但是如果基于 Web 的服务是必须的，我们很确定我们想要构建自己的服务。

在此先感谢克里斯托弗和克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:28:11.897

这不是关于利弊，而是关于你需要什么。您是否需要访问服务器，例如用户身份验证、用户之间共享数据、访问经常变化的数据？如果是，请使用服务器后端，否则使应用程序脱机工作。

# c# - 如何确保使用 Entity Framework 5 插入幂等数据库？

> ID：15447800
> 
> 赞同：6
> 
> 时间：2013-03-16T09:48:33.533
> 
> 标签：c#, entity-framework-5, azure-sql-database

我想确保我的数据库（SQL Server）更新是幂等的，功能类似于下面的博客文章，但使用实体框架（v5，**数据库优先**）：

[http://blogs.msdn.com/b/adonet/archive/2013/03/11/sql-database-connectivity-and-the-idempotency-issue.aspx](http://blogs.msdn.com/b/adonet/archive/2013/03/11/sql-database-connectivity-and-the-idempotency-issue.aspx)

但是，如果我在我的插入过程中添加一个 @Operation 参数，我会得到

> *“错误 2037：映射函数绑定指定了一个函数……但未映射以下函数参数：操作”*

（@Operation 将是由应用程序生成的 GUID，如果应用程序没有从 proc 获得成功响应，则允许应用程序使用相同的 GUID 重试。proc 会将 GUID 写入日志表，并且只执行如果 GUID 不存在则插入 - 从而确保幂等事务。）

有没有优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T11:45:10.383

Entity Framework 6.1 版将解决这个问题。（感谢 EF 团队 - 出色的工作。）

[https://entityframework.codeplex.com/wikipage?title=Handling%20of%20Transaction%20Commit%20Failures%20](https://entityframework.codeplex.com/wikipage?title=Handling%20of%20Transaction%20Commit%20Failures%20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T06:50:02.917

如果我正确理解了您的查询 - 如何在保存 GUID 的列上应用唯一约束，然后如果您在执行 proc 后没有收到成功响应，请重试插入。

在插入过程中，可能使用 try/catch 甚至查询没有 Try/Catch 的 GUID 值，如果它在那里处理异常，或者只是通过 RETURN 语句以成功消息干净地退出过程。

我认为您不需要在 EF 方面做任何特别的事情。

最后一件事，可能将 CRUD 插入/更新语句包装在事务中，以确保实际上像提供的示例中那样编写了一个值。

# javascript - 通过 JavaScript 编辑 HTML 内容的最佳实践

> ID：15447801
> 
> 赞同：0
> 
> 时间：2013-03-16T09:48:35.487
> 
> 标签：javascript, jquery, html

现在让我们忽略没有 JavaScript 的用户，也忽略可访问性。我想知道通过 JavaScript 将内容注入 HTML 文档的最佳实践是什么。

到目前为止，我想出了以下解决方案：

*   创建 HTML 的骨架并通过 jQuery 填充它（使用`$(tag).text()`）（但是，如果我错了，请纠正我，这会阻止我为内容制作动画）
*   通过 JS 以 HTML 格式插入所有内容，这让我可以做类似的事情`$("<tag>stuff</p>").fadeIn()`和其他事情

请注意，衰落仅用作示例，我想知道是否有一般的最佳实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:55:44.533

通常我会说两者的结合。您可能希望在 HTML 和动态元素中创建静态容器，作为 jQuery 元素进入内部，您可以修改这些元素并在以后添加。理想情况下，您会使用某种模板解决方案。最基本的例子：

```
function template(data, html) {
  return data.map(function(obj) {
    return html.replace(
      /#\{(\w+)\}/g,
      function(_, match) { return obj[match]; }
    );
  }).join('');
}

var people = [
  { name: 'John', age: 25, status: 'Single' },
  { name: 'Bill', age: 23, status: 'Married' },
  { name: 'Lukas', age: 47, status: 'Married' },
];

var html = template(people,
  '<div>\
    <h1>Name: #{name}</h1>\
    <h2>Age: #{age}, Status: #{status}</h2>\
  </div>'
);

$('#container').append(html); 
```

# javascript - 从后面的代码调用 javascript 会出错

> ID：15447803
> 
> 赞同：0
> 
> 时间：2013-03-16T09:48:46.333
> 
> 标签：javascript, asp.net, html5-canvas

我正在使用 Page.ClientScript.RegisterStartupScript 从后面的代码调用 JavaScript 函数。它适用于 javascript 中的简单函数。但是如果 javascript 中的函数有对象，它现在可以正常工作。例如

```
Page.ClientScript.RegisterStartupScript(Me.GetType(), "window-script", "surface.plot();", True) 
```

在javascript中我有类似的功能

```
Surface.prototype.plot = function(x, y, z)
 {
   \\code here
 } 
```

现在表面是javascript中的一个对象。所以我认为来自 asp.net 代码的调用不起作用。当我检查对象已变为 NULL。因此，该 javascript 中的所有内容都出错了。那么如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:01:24.083

尝试这个

```
ClientScript.RegisterStartupScript(Page.GetType(), "key", "window.onload=function(){parent.location.reload(true);}", true); 
```

# android - Android中的Fragment-Fragment通信

> ID：15447804
> 
> 赞同：6
> 
> 时间：2013-03-16T09:48:52.050
> 
> 标签：android, android-fragments, fragment

我是 Android 编程的初学者，所以我需要你真诚的帮助。请任何人帮助我。

我正在尝试使用片段构建滑动 UI

所以我真正的疑问是......我有一个`Fragment`（比如`Fragment`A）它有一个`TextView`和`Button`在它和另一个`Fragment`（比如`Fragment`B）。它里面有一个`TextView`。当我在 FRAGMENT A 中按下 时，我需要在B's中显示`Fragment A`'s`TextView`的内容。我尝试了很多方法，不幸的是我没有得到正确的输出。我相信你们都知道。请帮我。`Fragment``TextView``Button`

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-16T11:12:36.537

应该考虑监听器，所以片段仍然不相互依赖，可以在一个或两个窗格模式下使用。活动应该处理两个片段的侦听器。

这是一个包含两个片段的活动示例：

```
package com.example;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;

import com.example.fragment.FragmentA;
import com.example.fragment.FragmentA.TextChangeListener;
import com.example.fragment.FragmentB;

public class ActivityAB extends FragmentActivity {

    FragmentA fragmentA;
    FragmentB fragmentB;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ab);

        FragmentManager manager = getSupportFragmentManager();
        fragmentA = (FragmentA) manager.findFragmentById(R.id.fragmentA);
        fragmentB = (FragmentB) manager.findFragmentById(R.id.fragmentB);

        fragmentA.setTextChangeListener(new TextChangeListener() {

            @Override
            public void onTextChange(CharSequence newText) {
                fragmentB.updateTextValue(newText);
            }
        });
    }

} 
```

这是片段 A，它具有文本更改事件的自定义侦听器。

```
package com.example.fragment;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;

import com.example.R;

public class FragmentA extends Fragment {

    TextChangeListener listener;

    public interface TextChangeListener {
        public void onTextChange(CharSequence newText);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_a, container, false);

        Button btn = (Button) view.findViewById(R.id.button1);
        final TextView textView = (TextView) view.findViewById(R.id.textView1);

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (null != listener) {
                    listener.onTextChange(textView.getText());
                }

            }
        });
        return view;
    }

    public void setTextChangeListener(TextChangeListener listener) {
        this.listener = listener;
    }
} 
```

这是具有更新文本字段的公共方法的片段 B：

```
package com.example.fragment;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import com.example.R;

public class FragmentB extends Fragment {

    TextView textView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_b, container, false);
        textView = (TextView) view.findViewById(R.id.textView1);
        return view;
    }

    public void updateTextValue(CharSequence newText) {
        textView.setText(newText);
    }
} 
```

ActivityAB xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/fragmentA"
        android:name="com.example.fragment.FragmentA"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <fragment
        android:id="@+id/fragmentB"
        android:name="com.example.fragment.FragmentB"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />

</LinearLayout> 
```

片段一个 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="This is text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show" />

</LinearLayout> 
```

片段 B xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="(here will be text)"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T20:48:58.820

听起来您的设置可能类似于 - MainActivity w/ FragmentA [添加] 和 FragmentB [添加]。对于这种情况，我将通过 MainActivity 委托两个片段之间的消息/操作。允许 MainActivity 处理消息/动作还有助于在片段之间更复杂的情况下可能需要的“特殊”编排。例如：

```
public interface FragmentCommunicator
{
    public void sendMessage ( String broadcastMessage );
    public void takeAction ( String name, int action, Fragment frag );
}

public class MainActivity extends Activity implements FragmentCommunicator
{
    Fragment fragA;
    Fragment fragB;
    ...
    @Override
    public void sendMessage ( String msg )
    {
        if ( msg.Contains("Send To fragA") )
            fragA.receiveMsg(msg);
        ...
    }
    @Override
    public void takeAction ( String name, int action, Fragment frag )
    {
    if ( action == CLOSE )
            removeFragment( name, frag );
        ...
    }
}

public class FragmentA extends Fragment
{
    ...
@Override
public void onClick(View v)
{   
     FragmentCommunicator inter = (FragmentCommunicator) getActivity();
     inter.sendMessage("the txt/information/etc you want to send to fragB");    
}
}

public class FragmentB extends Fragment
{
    ...
    public void receiveMsg ( String msg )
    {
        textView.setText(msg);
    }
} 
```

我忘记发布 FragmentA 的发送部分。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:25:32.577

两个片段之间的通信应该始终通过它们的片段活动来保持片段之间的松散耦合，因此，如果您想将一些数据从一个片段 A 发送到另一个片段 B，您可以创建侦听器并在您的片段活动中实现它从片段A内部，您可以使用该侦听器触发事件​​并将数据发送到片段活动，因此现在片段活动也将具有片段B的对象，因此片段活动可以直接调用片段B的方法并将数据发送到片段B ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-08T11:47:18.837

developer.android.com

> 要允许 Fragment 与其 Activity 进行通信，您可以在 Fragment 类中定义一个接口并在 Activity 中实现它。Fragment 在其 onAttach() 生命周期方法期间捕获接口实现，然后可以调用接口方法以与 Activity 通信。

**示例**：- [http://wiki.workassis.com/android-fragment-communication/](http://wiki.workassis.com/android-fragment-communication/)

参考：- [https://developer.android.com/training/basics/fragments/communicating.html](https://developer.android.com/training/basics/fragments/communicating.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-23T22:32:01.327

我喜欢这个活动成为片段到片段通信之间的中间人。但我喜欢的另一件事是使用[事件总线](https://github.com/greenrobot/EventBus)架构，它也提供解耦。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-08-11T14:25:27.983

它实际上非常简单，只需按照以下步骤操作：

1.  所以你创建了两个片段A和B，现在创建它们的大脑，即Java类文件。让我们称它们为 JClass A（用于 Fragment A）和 JClass B（用于 Fragment B）

2.Frag A 中有按钮，所以转到 JClass A，并在其中获取用户键入的字符串文本和按钮按下事件，如下所示： // 只需覆盖 onCreate 方法。

```
@Nullable
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.<name of your fragment A.xml file>,container,false);

    userInput = (EditText)view.findViewById(R.id.<Id that you gave to EditText field in which user enters text>);

    Button myButton = (Button)view.findViewById(R.id.<id of your Button>);
    myButton.setOnClickListener(
            new Button.OnClickListener(){
                public void onClick(View v){
                    JClassB.setText(userInput.getText().toString());/*Replace JClassB with the java class of Fragment B*/

                }
            }
    );

    return view;
} 
```

3.  最后在您的 JClass B（片段 B 的 java 文件）中：

    公共类 BottomSectionFrag 扩展片段 {

    ```
    private static TextView userText;
    @Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragmentB, container, false);
        userText = (TextView)view.findViewById(R.id.userText);
        return view;
    }
    public static void setText(String text){
        userText .setText(text);

    } 
    ```

    }

瞧！！

PS 这是我第一次在 stackOverFlow 上发帖：D

和平出局。

# django - 如何在 Heroku/Django 上存储静态但用户生成的文件

> ID：15447805
> 
> 赞同：1
> 
> 时间：2013-03-16T09:49:01.647
> 
> 标签：django, image, heroku, django-staticfiles, static-files

在 Django/Heroku 上处理用户生成的静态文件的最佳方法是什么？静态文件的 Django 系统似乎过于复杂（你为什么需要`collectstatic`？），`collectstatic`而且似乎只适用于运行应用程序之前已知的文件，即它不处理任何用户生成的静态文件。

处理用户生成的静态文件的最佳/规范方法是什么？具体来说，我正在寻找一些图像的缩略图，我需要将它们存储在某个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:02:08.823

Django 采用模块化设计方法。每个应用程序都可以拥有自己的静态文件。例如 Django 管理界面有一堆 css 和图像等，您安装的其他 3rd 方应用程序也可能有静态资产。的目的`collectstatic`是将所有这些资产收集到生产中的一个中央目录中，其中 Django 本身不会像在开发中那样提供静态资产，而是来自 Apache 或 Nginx 之类的东西。

在这里阅读它：[https ://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

通过用户生成的静态内容，我猜你的意思是文件上传。这些与静态资产不同，处理方式也不同。在这里，您也设置了`MEDIA_ROOT`媒体上传的位置。我不能代表 Heroku，但我认为常见的做法是将媒体上传到 AWS S3 存储桶。Checkout Django-Storages，它有各种文件存储后端供您插入。[https://pypi.python.org/pypi/django-storages](https://pypi.python.org/pypi/django-storages)

# android - Worklight：收到的推送通知未删除

> ID：15447806
> 
> 赞同：1
> 
> 时间：2013-03-16T09:49:03.070
> 
> 标签：android, ios, push-notification, ibm-mobilefirst

我正在开发一个 iOS 和 Android 项目，并使用 Worklight 统一推送通知。

现在收到推送，但我有以下行为：

*   在 Android 中，每次我登录时，都会收到一个旧的推送通知。
*   在 iOS 中，打开推送后，它不会从 iOS 通知栏中删除。徽章也还在。

我怀疑这与事件源中的**onPoll**选项有关，但是当我将以下内容添加到我的 eventSource 声明时：

```
 poll : { 
     interval : 3, 
     onPoll : gotNotificationFromBackEnd,
 }, 
```

我在部署时收到此错误：

```
Failed to deploy adapter from the database (archive:  '/var/folders/8p/qylwgy6j2wq4bktw4r5hxqvr0000gp/T/myAdapter5583128211713256219.adapter'). 
```

任何帮助，解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:59:40.333

1.  为了控制显示在主屏幕中应用程序图标顶部的徽章编号，您可以使用[WL.Badge.setNumber API](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_ios_badge.html)。

2.  为了使适配器正确部署，请将函数名称放在引号中。

3.  至于通知中心里的通知条目，尽管读了它，但没有消失，我认为这是一个缺陷，并打开了一个缺陷报告。谢谢。

**编辑：** 从 Worklight 5.0.6.1 开始，上述 (3) 的缺陷已修复。

* * *

注意＃1：我只能在iOS中重现上面的（3）；在 Android 中它可以正常工作。

注意 #2：示例应用程序在 application-descriptor.xml 中缺少 iPhone 环境的 securityTest；为了让登录屏幕在 iOS 中的应用程序启动时也出现（就像在 Android 中所做的那样），请按照我的建议进行更正。

# c - C 项目 scanf()

> ID：15447810
> 
> 赞同：1
> 
> 时间：2013-03-16T09:49:21.113
> 
> 标签：c, scanf

这是我的代码，我的陈述是当 while 循环开始运行时显示选项并在第一次迭代时扫描选择，但在第二次迭代中不会再次分配选择，并且会记住以前的选择。问题是什么 ？（我使用的是VS2012）

```
while (!done){
    int choice;

    printf("\n------- STUDENT INFORMATION SYSTEM MAIN MENU --------\n");
    printf("1-Load students from the database\n");
    printf("2-Print existing students on the screen\n");
    printf("3-Add a new student\n");
    printf("4-Delete an existing student\n");
    printf("5-Find an existing student\n");
    printf("6-Quit\n");
    printf("====> Choice? ");
    scanf("%d", &choice);

    switch(choice){
      case 1:
        LoadStudentsFromDatabase();
        printf("Students loaded from database successfully\n");
        break;

      case 2:
        PrintExistingStudentsOnTheScreen();
        break;

      case 3:
        printf("\nFirstName: "); scanf("%s", s.firstName);

    printf("LastName: "); scanf("%s", s.lastName);
        printf("ID: "); scanf("%d", &s.id);
        printf("Gpa: "); scanf("%f", &s.gpa);
        printf("Department: "); scanf("%d", &s.department);

        AddStudent(&s);
        printf("1 student added\n");
        break;

      case 4:
        printf("\nID? "); scanf("%d", &id);
        if (DeleteStudent(id)){
          printf("Student deleted successfully\n");
        } else {
          printf("Failed to delete the student. Does not exist?\n");
        } /* end-else */
        break;

      case 5:
        printf("\nID? "); scanf("%d", &id);
        ps = FindStudent(id);
        if (ps == NULL){
          printf("Student not found\n");
        } else {
          char *depts[] = {"CS", "EE", "IE", "CE", "ME"};
          printf("+--------------------+--------------------+------+------+------+\n");
          printf("|    FirstName       |     LastName       |  ID  |  GPA | Dept |\n");
          printf("+--------------------+--------------------+------+------+------+\n");
          printf("|%20s|%20s|%6d|%6.2f|%6s|\n", ps->firstName, ps->lastName, ps->id, ps->gpa, depts[ps->department]);
          printf("+--------------------+--------------------+------+------+------+\n");
        } //end-else
        break;

      case 6:
        done = 1;
        break;

      default:
        printf("!!!!!!!!!! Invalid choice. Try again :-))\n");
        break;
    } /* end-switch */
  } /* end-while */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:56:19.670

可能发生的情况是，当您第二次调用 scanf 时会出现错误。可能是因为非数字输入正在等待在标准输入上读取。也许您上次在代码正文中没有完全阅读所有输入？由于您的转换格式，scanf 尝试读取一个数字并且仅读取一个数字，`%d`因此如果下一个要读取的内容不是数字，它将失败，它会返回一个错误并且保持`choice`不变。您不检查此错误，因此假设选择包含一个新输入的值，而实际上它只包含它在调用 scanf 之前包含的任何内容。scanf 也可能由于更多错误等原因而失败，但我怀疑情况并非如此。

我的建议是：

a) 检查scanf的返回值。在你的情况下它应该返回 1 。如果没有出现错误。您可以退出或再次显示菜单。

b) 看看 fpurge/fflush。我不确定使用 VC++ 可以为您提供什么，但 Google 会为您找到等价物。这些函数可用于在调用 scanf 之前丢弃待处理的输入。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:56:26.040

实际上，您的代码的行为符合预期。

可以使用以下输入重现该行为

```
FirstName: f
LastName: l
ID: 1
Gpa: 2
Department: d 
```

`Department`期望 an`int`作为输入，当您输入其他内容时， `d`在这种情况下，[scanf](http://linux.die.net/man/3/scanf)`int`在您循环时一直在寻找 an ，因此该行`scanf("%d", &choice);`也无法读取 an`int`并且`choice`没有重新分配新值，因此该`switch`语句始终看到最后一个的有效值`choice`。循环在下一次读取尝试时暂停。

要解决您的问题，您需要验证输入并仅在您期望的输入有效时才进入下一步。[您可以通过检查scanf](http://linux.die.net/man/3/scanf)的返回值来做到这一点，它是根据转换模式成功解析的项目数，在您的情况下，您只想读取`one`项目。

这是验证整数输入的基本方法

```
int read_integer(char* what)
{
    int i = 0;
    printf("%s: ", what);
    int r = scanf("%d", &i);
    while(r == 0) {
        while('\n' != getchar())
            // consume the rest of input until a LF comes (enter pressed)
            ;
        printf("Bad input for %s, try again (r=%d)\n", what, r);
        printf("%s: ", what);
        r = scanf("%d", &i);
    }
    return i;
} 
```

在这里你怎么读`Department`

```
int department = read_integer("Department"); 
```

你也可以为`float`->写一个类似的函数`float read_float(char*){...}`

# iphone - UIImageView 中的 UIImage 大小

> ID：15447814
> 
> 赞同：3
> 
> 时间：2013-03-16T09:49:49.833
> 
> 标签：iphone, ios, objective-c, uiimage

我有一些`UIImage`并显示在`UIImageView`.

我需要使用`UIViewContentModeScaleAspectFit`内容模式。

这是简单的代码：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:self.view.bounds];
imageView.image = self.image;
imageView.contentMode = UIViewContentModeScaleAspectFit;
[self.view addSubview:imageView];
[imageView release]; 
```

如何知道屏幕上显示的图像的大小？是否有任何解决方案、属性或我应该手动计算？

**编辑：**

我知道物业`image.size`。

`self.image.size`->>> 原始图像尺寸

`imageView.image.size`->>> imageView 的大小，但不是显示的图像。

`imageView's size`我根据它询问显示的大小`contentmode`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T10:03:29.827

这是一个类别，您可以使用它来根据图像视图`UIImageView`上的集合自省显示图像的边界：`UIViewContentMode`

```
@implementation UIImageView (JRAdditions)

- (CGRect)displayedImageBounds {
    UIImage *image = [self image];
    if(self.contentMode != UIViewContentModeScaleAspectFit || !image)
        return CGRectInfinite;

    CGFloat boundsWidth  = [self bounds].size.width,
            boundsHeight = [self bounds].size.height;

    CGSize  imageSize  = [image size];
    CGFloat imageRatio = imageSize.width / imageSize.height;
    CGFloat viewRatio  = boundsWidth / boundsHeight;

    if(imageRatio < viewRatio) {
        CGFloat scale = boundsHeight / imageSize.height;
        CGFloat width = scale * imageSize.width;
        CGFloat topLeftX = (boundsWidth - width) * 0.5;
        return CGRectMake(topLeftX, 0, width, boundsHeight);
    }

    CGFloat scale = boundsWidth / imageSize.width;
    CGFloat height = scale * imageSize.height;
    CGFloat topLeftY = (boundsHeight - height) * 0.5;

    return CGRectMake(0, topLeftY, boundsWidth, height);
}

@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-05T15:36:40.870

迅速，与@jacob-relkin 相同

```
extension UIImageView {

    func displayedImageBounds() -> CGRect {

        let boundsWidth = bounds.size.width
        let boundsHeight = bounds.size.height
        let imageSize = image!.size
        let imageRatio = imageSize.width / imageSize.height
        let viewRatio = boundsWidth / boundsHeight
        if ( viewRatio > imageRatio ) {
            let scale = boundsHeight / imageSize.height
            let width = scale * imageSize.width
            let topLeftX = (boundsWidth - width) * 0.5
            return CGRectMake(topLeftX, 0, width, boundsHeight)
        }
        let scale = boundsWidth / imageSize.width
        let height = scale * imageSize.height
        let topLeftY = (boundsHeight - height) * 0.5
        return CGRectMake(0,topLeftY, boundsWidth,height)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:52:55.863

这是不可能的。您可以通过以下方法获得原始图像大小

```
UIImage *image = imageView.image;
CGSize size = image.size; 
```

**尺寸**

图像的尺寸，考虑到方向。（只读）

```
@property(nonatomic, readonly) CGSize size 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T10:28:11.503

您也可以使用以下方法获取它：

```
-(CGSize)imageSizeAfterAspectFit:(UIImageView*)imgview{

float newwidth;
float newheight;

UIImage *image=imgview.image;

if (image.size.height>=image.size.width){
    newheight=imgview.frame.size.height;
    newwidth=(image.size.width/image.size.height)*newheight;

    if(newwidth>imgview.frame.size.width){
        float diff=imgview.frame.size.width-newwidth;
        newheight=newheight+diff/newheight*newheight;
        newwidth=imgview.frame.size.width;
    }

}
else{
    newwidth=imgview.frame.size.width;
    newheight=(image.size.height/image.size.width)*newwidth;

    if(newheight>imgview.frame.size.height){
        float diff=imgview.frame.size.height-newheight;
        newwidth=newwidth+diff/newwidth*newwidth;
        newheight=imgview.frame.size.height;
    }
}

NSLog(@"image after aspect fit: width=%f height=%f",newwidth,newheight);

return CGSizeMake(newwidth, newheight);

} 
```

# javascript - 使用 JavaScript 验证表单

> ID：15447815
> 
> 赞同：1
> 
> 时间：2013-03-16T09:49:58.893
> 
> 标签：javascript, forms, validation

我需要使用 Javascript 验证表单

这是我的表格：

```
<form name="login" action="#" method="POST" onSubmit="return validasi()">
<div class=log>My Id</div><div class=log><input type="text" name="username"></div>
<div class=log>Password</div><div class=log><input type="password"  name="sandi"></div>
<div class=log><input id="tombol" type="submit" value="Login" ></div>
</form> 
```

...和 ​​JS 验证：

```
<script language="javascript">
function validasi(form){
  if (form.username.value == ""){
    alert("Anda belum mengisikan Username.");
    form.username.focus();
    return (false);
    }

  if (form.sandi.value == ""){
    alert("Anda belum mengisikan Password.");
    form.sandi.focus();
    return (false);
    }
  return (true);
    }
</script> 
```

但是，JS 不工作。请帮我解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:55:28.573

您应该将表单作为函数的参数发送。你提交的代码应该是“return validasi(this)” 你的 HTML 代码应该是这样的。

```
<form name="login" action="#" method="POST" onSubmit="return validasi(this)">
<div class=log>My Id</div><div class=log><input type="text" name="username"></div>
<div class=log>Password</div><div class=log><input type="password"  name="sandi"></div>
<div class=log><input id="tombol" type="submit" value="Login" ></div>
</form> 
```

[http://jsfiddle.net/xensoft/x8Vdw/](http://jsfiddle.net/xensoft/x8Vdw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T09:55:08.073

`onSubmit="return validasi()"`不向 传递任何参数`validasi()`，但`validasi()`需要一个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T10:29:36.593

```
<form name="login" action="#" method="POST" onSubmit="return validasi();">
<div class=log>My Id</div><div class=log><input type="text" name="username"></div>
<div class=log>Password</div><div class=log><input type="password"  name="sandi"></div>
<div class=log><input id="tombol" type="submit" value="Login" ></div>
</form>

    <script language="javascript">
    function validasi(form){

    var x = document.forms["login"]["username"].value;
    var y = document.forms["login"]["sandi"].value;

      if (x == null || x == ""){
        alert("Anda belum mengisikan Username.");
        return false;
        }

      if (y == null || y == ""){
        alert("Anda belum mengisikan Password.");
        return false;
        }
        }
    </script> 
```

# c# - 带有 MasterDetails 和 ToggleButton 的 TreeView

> ID：15447819
> 
> 赞同：0
> 
> 时间：2013-03-16T09:50:18.727
> 
> 标签：c#, wpf, xaml, treeview, hierarchicaldatatemplate

我想在选定的项目上创建一个带有 MasterDetails 的 TreeView。

问题是，即使父项展开，我的 SelectedItem 中也没有显示子项。不知何故， HierarchicalDataTemplate 似乎迷路了。

也许我对`<TreeView.ItemTemplate>`. 我应该从 ItemsPanelTemplate 还是类似的东西开始？暂时没有头绪。

这是我的 XAML：

```
<Window x:Class="TreeViewMasterDetails.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TreeViewMasterDetails" 
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <SolidColorBrush x:Key="GlyphBrush" Color="#444" />
            <BooleanToVisibilityConverter x:Key="booltoVisibilityConverter" />

            <PathGeometry x:Key="TreeArrow">
                <PathGeometry.Figures>
                    <PathFigureCollection>
                        <PathFigure IsFilled="True"
                            StartPoint="0 0"
                            IsClosed="True">
                            <PathFigure.Segments>
                                <PathSegmentCollection>
                                    <LineSegment Point="0 6"/>
                                    <LineSegment Point="6 0"/>
                                </PathSegmentCollection>
                            </PathFigure.Segments>
                        </PathFigure>
                    </PathFigureCollection>
                </PathGeometry.Figures>
            </PathGeometry>

            <Style x:Key="ExpandCollapseToggleStyle"
           TargetType="{x:Type ToggleButton}">
                <Setter Property="Focusable"
                Value="False"/>
                <Setter Property="Width"
                Value="16"/>
                <Setter Property="Height"
                Value="16"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                            <Border Width="16"
                            Height="16"
                            Background="Transparent"
                            Padding="5,5,5,5">
                                <Path x:Name="ExpandPath"
                              Fill="Transparent"
                              Stroke="#FF989898"
                              Data="{StaticResource TreeArrow}">
                                    <Path.RenderTransform>
                                        <RotateTransform Angle="135"
                                                 CenterX="3"
                                                 CenterY="3"/>
                                    </Path.RenderTransform>
                                </Path>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver"
                                 Value="True">
                                    <Setter TargetName="ExpandPath"
                                    Property="Stroke"
                                    Value="#FF1BBBFA"/>
                                    <Setter TargetName="ExpandPath"
                                    Property="Fill"
                                    Value="Transparent"/>
                                </Trigger>

                                <Trigger Property="IsChecked"
                                 Value="True">
                                    <Setter TargetName="ExpandPath"
                                    Property="RenderTransform">
                                        <Setter.Value>
                                            <RotateTransform Angle="180"
                                                     CenterX="3"
                                                     CenterY="3"/>
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="ExpandPath"
                                    Property="Fill"
                                    Value="#FF595959"/>
                                    <Setter TargetName="ExpandPath"
                                    Property="Stroke"
                                    Value="#FF262626"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <ControlTemplate TargetType="{x:Type TreeViewItem}" x:Key="selectedItemTemplate">
                <Grid Height="Auto" Background="SkyBlue">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="20"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <ToggleButton x:Name="Expander"
                                      Style="{StaticResource ExpandCollapseToggleStyle}"
                                      IsChecked="{Binding Path=IsExpanded,RelativeSource={RelativeSource TemplatedParent}}"
                                      ClickMode="Press"
                                      Visibility="{Binding Path=HasItems,RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource booltoVisibilityConverter}}"/>

                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Id}"></TextBlock>
                    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Name}"></TextBlock>
                    <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Description}"></TextBlock>
                </Grid>
            </ControlTemplate>
        </Grid.Resources>

        <TreeView Height="Auto" 
                  HorizontalAlignment="Stretch" 
                  Margin="10" 
                  VerticalAlignment="Stretch" 
                  Width="Auto"
                  ItemsSource="{Binding Items}">
            <TreeView.ItemContainerStyle>
                <Style TargetType="TreeViewItem">
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Template" Value="{StaticResource selectedItemTemplate}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TreeView.ItemContainerStyle>
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate DataType="x:Type local:NodeViewModel" ItemsSource="{Binding Children}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="20*" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100*" />
                            <ColumnDefinition Width="100*" />
                            <ColumnDefinition Width="100*" />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="{Binding Id}"></TextBlock>
                        <TextBlock Grid.Column="1" Text="----"></TextBlock>
                        <TextBlock Grid.Column="2" Text="{Binding Name}"></TextBlock>
                    </Grid>

                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
    </Grid>
</Window> 
```

请原谅 XAML 的大规模块，但现在我不知道原因在哪里。

我的视图模型：

```
public class NodeViewModel : ViewModelBase
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public bool IsExpanded { get; set; }
    public bool HasChildren  // perhaps this can be replaced by HasItems in TemplatedParent?
    {
        get
        {
            if (Children != null)
            {
                Children.Any();
            }

            return false;
        }
    }

    public ObservableCollection<NodeViewModel> Children { get; set; }
} 
```

如何使用 HierarchicalDataTemplate 显示孩子？为什么会丢失？

**更新** 在我的 TreeViewItem 样式中添加了一个设置器，以便在选择时将 IsExpanded 设置为 true，并且 ToggleButton 似乎正确显示了这一点。

有什么好的教程或任何我可以找到如何处理分层数据模板的东西吗？

任何关于我如何继续的想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:41:46.080

您尝试使用切换按钮来模拟树视图项。我敢肯定会有办法做到这一点，但这很复杂。如果您可以忍受模板之外的扩展器按钮，请尝试以下解决方案。更改树视图项的视觉样式现在已内置到 HierarchicalDataTemplate 中。

![在此处输入图像描述](../Images/6e5f3decb04f47b941401dbb0887c89e.png)

您将 TreeView 绑定到`Items`您尚未披露的 ViewModel 的属性，而 HierarchicalDataTemplate 使用该属性`Children`，我不得不更改它，因为我也使用 NodeViewModel 作为“根”ViewModel。

我认为同样可以使用 DataTemplateSelector 来实现。

xml:

```
<UserControl.DataContext>
    <local:NodeViewModel  />
</UserControl.DataContext>
<Grid>
    <Grid.Resources>
        <DataTemplate x:Key="notSelectedItemTemplate" DataType="{x:Type local:NodeViewModel}" >
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="20*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100*" />
                    <ColumnDefinition Width="100*" />
                    <ColumnDefinition Width="100*" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding Id}"></TextBlock>
                <TextBlock Grid.Column="1" Text="----"></TextBlock>
                <TextBlock Grid.Column="2" Text="{Binding Name}"></TextBlock>
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="selectedItemTemplate" DataType="{x:Type local:NodeViewModel}">
            <Grid Height="Auto" Background="SkyBlue" TextElement.Foreground="Black">
                <Grid.RowDefinitions>
                    <!--<RowDefinition Height="Auto"></RowDefinition>-->
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="Auto"></RowDefinition>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="20"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <!--<TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Id}"></TextBlock>-->
                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Name}"></TextBlock>
                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Description}"></TextBlock>
            </Grid>
        </DataTemplate>
    </Grid.Resources>

    <TreeView Height="Auto" HorizontalAlignment="Stretch" Margin="10" VerticalAlignment="Stretch" Width="Auto" ItemsSource="{Binding Children}">
        <TreeView.Resources>
            <!-- remove normal selected item background -->
            <SolidColorBrush Color="Transparent" x:Key="{x:Static SystemColors.HighlightBrushKey}"/>
        </TreeView.Resources>
        <TreeView.ItemContainerStyle>
            <Style TargetType="{x:Type TreeViewItem}">
                <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
            </Style>
        </TreeView.ItemContainerStyle>
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate DataType="{x:Type local:NodeViewModel}" ItemsSource="{Binding Children}">
                <ContentPresenter x:Name="item" ContentTemplate="{StaticResource notSelectedItemTemplate}" />
                <HierarchicalDataTemplate.Triggers>
                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                        <Setter TargetName="item" Property="ContentTemplate" Value="{StaticResource selectedItemTemplate}" />
                    </DataTrigger>
                </HierarchicalDataTemplate.Triggers>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView>
</Grid> 
```

NodeViewModel（添加 IsSelected 属性）：

```
public class NodeViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private ObservableCollection<NodeViewModel> _children;
    public ObservableCollection<NodeViewModel> Children { get { return _children; } set { _children = value; OnPropertyChanged("Children"); } }

    private string _id;
    public string Id { get { return _id; } set { _id = value; OnPropertyChanged("ID"); } }
    private string _name;
    public string Name { get { return _name; } set { _name = value; OnPropertyChanged("ID"); } }
    private string _description;
    public string Description { get { return _description; } set { _description = value; OnPropertyChanged("Description"); } }
    private bool _isExpanded;
    public bool IsExpanded { get { return _isExpanded; } set { _isExpanded = value; OnPropertyChanged("IsExpanded"); } }
    private bool _isSelected;
    public bool IsSelected { get { return _isSelected; } set { _isSelected = value; OnPropertyChanged("IsSelected"); } }
    public bool HasChildren  // perhaps this can be replaced by HasItems in TemplatedParent?
    {
        get
        {
            if (Children != null)
            {
                Children.Any();
            }

            return false;
        }
    }

    private static bool _setData = true; // hack for example data

    public NodeViewModel()
    {
        if (_setData)
        {
            _setData = false;
            SetExampleData();
        }
    }

    public void SetExampleData()
    {
        Children = new ObservableCollection<NodeViewModel>()
        {
            new NodeViewModel() { Name = "1", Description = "One"    },
            new NodeViewModel() { Name = "2", Description = "Two"    },
            new NodeViewModel() { Name = "3", Description = "Three"  },
            new NodeViewModel() { Name = "4", Description = "Four"   },
            new NodeViewModel() { Name = "5", Description = "Five"   },
            new NodeViewModel() { Name = "6", Description = "Six"    },
            new NodeViewModel() { Name = "7", Description = "Seven"  },
            new NodeViewModel() { Name = "8", Description = "Eight"  }
        };

        Children[0].Children = new ObservableCollection<NodeViewModel>() 
        {  
            new NodeViewModel() { Name = "1.1", Description="One.One" },
            new NodeViewModel() { Name = "1.2", Description="One.Two" },
            new NodeViewModel() { Name = "1.3", Description="One.Three" }
        };

        Children[0].Children[0].Children = new ObservableCollection<NodeViewModel>() 
        {  
            new NodeViewModel() { Name = "1.1.1", Description="One.One.One" },
            new NodeViewModel() { Name = "1.1.2", Description="One.One.Two" },
        };

        Children[1].Children = new ObservableCollection<NodeViewModel>() 
        {  
            new NodeViewModel() { Name = "2.1", Description="Two.One" },
            new NodeViewModel() { Name = "2.2", Description="Two.Two" },
        };
    }
} 
```

# ios - 计算上传到 Facebook 或 Twitter 的图像数据量

> ID：15447826
> 
> 赞同：0
> 
> 时间：2013-03-16T09:50:50.993
> 
> 标签：ios, facebook, ios5, twitter, ios6

我必须将图像发布到 facebook 和 twitter。要求是提供一个渐进式 HUD，说明已上传了多少数据。facebook sdk 或 twrequest 中是否有任何委托方法来了解上传到相应服务器的数据量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:44:54.300

这不是问题的直接解决方案，但我直接从相应的服务 SDK 中提供了一些参考，这些参考至少会指向*某个地方，*

**Facebook，**

请参阅[Facebook SDK 3.2 for iOS Reference](http://developers.facebook.com/ios/)在那里你可以找到[FBRequestConnection](http://developers.facebook.com/docs/reference/ios/3.2/class/FBRequestConnection)，它的委托方法之一，`+ (FBRequestConnection*)startForUploadPhoto:(UIImage *)photo completionHandler:(FBRequestHandler)handler`查看`FBRequestHandler`它会返回一些可能对你有用的东西。

**推特，**

请参阅[在 iOS 上与 Twitter 集成](https://dev.twitter.com/docs/ios)

您需要查看[SLRequest 类](http://developer.apple.com/library/ios/#documentation/Social/Reference/SLRequest_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012234)，twitter api 使用它连接到服务，读取`SLRequestHandler`它的委托之一`- (void)performRequestWithHandler:(SLRequestHandler)handler` ，它给出`typedef void(^SLRequestHandler)(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error);`

如果您成功实现了这一目标，您可以进一步查看[此问题](https://stackoverflow.com/q/2267950/1603234)以计算下载百分比。

# ios - 阻止将手势传递给 SuperView

> ID：15447836
> 
> 赞同：4
> 
> 时间：2013-03-16T09:51:32.437
> 
> 标签：ios, cocoa-touch, uiview, uipangesturerecognizer

一个 ScrollView 有一些 SubViews....
ScrollView 包含其预定义的手势（Pan）和我的自定义手势（Pan）以及同时识别它......
SubViews 还包含自定义 Pan Gesture......
一切正常很好，除了子视图上的平移手势...
当我在子视图上平移时，它的超级视图也会触摸并处理我不想要的东西...
当子视图上进行平移时，超级视图不应该识别它们.. .
我如何阻止将我的 SubView 手势传递给它的 SuperView？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T10:10:55.740

要阻止superview响应手势，当触摸点下有subview时，可以这样做：

实现如下 UIGestureDelegate 方法

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch; 
```

作为

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    return  (touch.view == superView);
} 
```

并将此委托设置为分配给 superView 的手势识别器。

我希望这应该做需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:04:39.213

基本上，当您单击 subview 时，无法识别 superview 手势，因为您的 superview 与 subview 重叠。

在 .h 中添加委托并将其提供给 tapGestures 并给出这样的条件

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if([gestureRecognizer.view isKindOfClass:[superView class]])
        return NO;
    else
        return YES;
} 
```

# android - 无法从 Android Emulator 访问 Internet

> ID：15447839
> 
> 赞同：0
> 
> 时间：2013-03-16T09:51:43.593
> 
> 标签：android, android-emulator, proxy

我无法从安卓模拟器访问互联网。我试过

```
Menu --> Settings -->Wireless and Networks -->Mobile Networks -->Access Point Names -->TelKila Internet 
```

然后 `entered Proxy, Port, Username and Password also server address.`

在我的安卓模拟器中。但我仍然无法访问互联网

我不断收到此错误：

```
Error code 407: Proxy authentication required. The ISA Server requires authentication to fulfill the request. Access to the web proxy filter is denied. (12209) ... 
```

有没有办法从代码为 android 设置代理？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:15:52.830

这将是一个两步解决方案，我希望它对您有用。恐怕，我想不出更简单的了。:-(

但这*应该*让你开始。

**第1步：**

下载 APK： http: [//forum.xda-developers.com/showthread.php](http://forum.xda-developers.com/showthread.php?t=1359389) ?t=1359389 。[直接链接到 APK](http://forum.xda-developers.com/attachment.php?attachmentid=1491353&d=1353246617)

**第 2 步：** *来源：[https ://stackoverflow.com/a/3480235/450534](https://stackoverflow.com/a/3480235/450534)*

```
1\. Execute the emulator.
2\. Start the console (Windows XP), Run -> type **cmd**, and move to the **platform-tools** folder of **SDK** directory. 
3\. Paste the *APK* file in the 'platform-tools' folder.
4\. Rename the APK to `proxy.apk` or something simple that you will find easy to type in a Command Prompt. The name itself does not matter. The **.apk** extension does.
4\. Then type the following command.
> adb install [apk file name]

 Example:
> adb install Jorgesys.apk 
```

现在，您将在模拟器上安装*第 1 步中链接的应用程序。*在应用程序中配置设置，您应该可以在模拟器上运行 Internet。

让我知道事情的后续。

注意：该应用程序也可以在 Google Play 上使用，并且有一些屏幕截图可以帮助您入门：[https ://play.google.com/store/apps/details?id=org.proxydroid](https://play.google.com/store/apps/details?id=org.proxydroid)

*披露：我与这个应用程序无关。我在为 OP 寻找一些解决方案时发现了它。而已。*

# php - 如何检查一行中重复的列名并删除具有相同类名的第二行

> ID：15447840
> 
> 赞同：0
> 
> 时间：2013-03-16T09:51:48.080
> 
> 标签：php, mysql

我正在开发一个学校注册系统，学生可以在其中添加和删除课程以进行更多的 php 练习

例如，一个学生在他/她的日程表中添加了 2 个会计 101 课程，这是不应该发生的。

我如何检查我的行，如果会计 101 在课程表中出现两次，并自动删除第二个条目是重复的

例如我目前的日程安排：我的表

```
ticket   class_name      days    start_hours  end_hours  units   room_number   instructor_name
1094     Accounting 101  SAT     9:00 am 12:15 pm    5   CS266   HARMON , KAREN
2077     Accounting 101  M,W     5:00 pm 8:00 pm     5   SF103   SMITH,  BOB 
```

我想自动删除第二个重复的，因为票 1094 是会计 101 我编写了添加和删除类的代码，但我想防止添加重复的 class_name 或者应该删除它

我该如何为此编写查询。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:12:03.243

根据我们上面的对话，您可以添加一个约束，以便学生也可以为每个学期插入*唯一的表。* `class_name`

```
ALTER TABLE register_classes 
ADD CONSTRAINT reg_unique UNIQUE (class_name, student_id, semester) 
```

执行此操作后，您将不再允许对`class_name`特定的学生使用相同的`semester`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:02:41.460

通过表单插入记录时，首先检查类名是否存在

```
$SQL = "SELECT * from student WHERE class_name = '".$_POST['class_name']."'"; 
```

使用此查询，检查是否存在任何记录。如果是这样，则删除前一个并添加或简单地退出该条件。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:18:20.033

假设较晚的票号意味着它是后来添加的；以下查询应返回所有需要删除的重复项。

```
SELECT *
FROM schedule s
WHERE s.ticket =  
    (SELECT MAX(s2.ticket) 
    FROM schedule s2
    WHERE s.class_name = s2.class_name
    GROUP BY s2.class_name, s2.student, s2.semester
    HAVING COUNT(1) > 1); 
```

不过，正如@JW 指出的那样，在插入这些重复项之前捕获它们可能会更好。

# c++ - Vector 中的 C++ 常量迭代器

> ID：15447853
> 
> 赞同：1
> 
> 时间：2013-03-16T09:52:57.597
> 
> 标签：c++, overloading

我是 C++ 的新手。所以，请多多包涵。我正在研究该`std::vector`课程的实施。我发现了以下两种不同的`begin()`方法实现。我知道第一个返回一个 RW 迭代器，第二个返回一个只读迭代器。我认为仅仅返回类型的差异对于函数重载是不够的。那么这是如何工作的呢？

```
iterator
begin()
{ return iterator(this->_M_impl._M_start); }

const_iterator
begin() const
{ return const_iterator(this->_M_impl._M_start); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:55:14.860

一个是`const`，另一个不是。`const`将为`const std::vector`对象调用该版本，而为非常量`std::vector`对象调用另一个版本。另请注意，这也适用于`const`非常量引用和指针。

`const`有关方法和重载的更多信息：

*   [C ++方法声明中最后一个“const”的含义？](https://stackoverflow.com/questions/751681/meaning-of-const-last-in-a-c-method-declaration)
*   [“常量重载”是怎么回事？](http://www.parashift.com/c++-faq-lite/const-overloading.html)

也相关：

*   [C++ 中“const”的用途有多少？](https://stackoverflow.com/questions/455518/how-many-and-which-are-the-uses-of-const-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:55:07.560

隐含的“this”参数在第二种方法中是 const。这足以在重载中区分它们。

# c++ - 如何镜像 CGPoint

> ID：15447857
> 
> 赞同：2
> 
> 时间：2013-03-16T09:53:32.000
> 
> 标签：c++, cocos2d-x

我不想将触摸点围绕屏幕中心旋转 180 度（镜像它）。我试过`ccpRotateByAngle(screenCenter, touchPoint, 180)`了，但它给了我错误的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T10:10:40.383

三角函数救援：

```
// get your center in some way, here I'm using fixed coordinates 'cuz I'm lazy
CGPoint screenCenter = ccp(240, 160);

// this creates the vector between center and touch location
CGPoint touchPointToCenter = ccpSub(screenCenter, touchPoint);

// just add the vector to screen center and you mirrored it around center
CCPoint mirror = ccpAdd(screenCenter, touchPointToCenter); 
```

例如，假设您的接触点是 200、200：

```
touchPointToCenter: {240, 160} - {200, 200} = {40, -40}
mirror: {240, 160} + {40, -40} = {280, 120} 
```

镜像点为 280、120。

注意：我使用的函数来自 cocos2d-iphone。我假设它们也存在于 cocos2d-x 中。它们的名称可能不同，我不确定。您也可以像我在示例中所做的那样“手动”运行计算。

# c# - GroupJoin 和包括

> ID：15447858
> 
> 赞同：2
> 
> 时间：2013-03-16T09:53:37.217
> 
> 标签：c#, linq, linq-to-sql, include, grouping

在 GroupJoin 之后，我想包含 Book.Authors，因为 Book.Authors 字段将为空。但我不能。我应该怎么做才能解决这个问题？

```
Queryable<NewRead> recent = Repository.NewReads.Where(x => x.UserId == usersId);

var newFavs = IsAuthorized ? Repository.NewFavs.Where(x => x.UserId == UserId) : Repository.NewFavs.Where(x => false);

var recentFavorite = recent.GroupJoin(newFavs,
                             x => x.BookId,
                             y => y.BookId,
                             (x, y) => new {Recent = x, Favorite = y, x.Book}); 
```

我试过了：

```
var recent = Repository.NewReads.Include("Book.Authors")
                   .Where(x => x.UserId == usersId); 
```

和

```
var newFavs = IsAuthorized ? Repository.NewFavs.Include("Book.Authors").Where(x => x.UserId == UserId) : Repository.NewFavs.Where(x => false); 
```

以及所有这一切。它在 GroupJoin 之前有效，但在 Authors 字段丢失之后。如果我添加：

```
var recentFavorite = recent.GroupJoin(newFavs,
                             x => x.BookId,
                             y => y.BookId,
                             (x, y) => new {Recent = x, Favorite = y, x.Book, x.Book.Authors}); 
```

一切正常，但这不是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:10:51.533

```
var recent = Repository.NewReads.Include("Book").Where(n => n.UserId == usersId).FirstOrDefault().Book.Select(b=>b.Authors); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:26:48.803

你可以做

```
var recent = Repository.NewReads.Include(x => x.Book.Authors)
                       .Where(x => x.UserId == usersId); 
```

# html - 移动图标-像素

> ID：15447859
> 
> 赞同：0
> 
> 时间：2013-03-16T09:53:52.973
> 
> 标签：html, css, icons, social, pixels

我已经研究了一段时间，但找不到任何解决方案。

这是我的代码

```
<p><iframe allowtransparency="true" scrolling="no" frameborder="no" src="https://w.soundcloud.com/icon/?url=http%3A%2F%2Fsoundcloud.com%2F&color=orange_white&size=32" style="width: 32px; height: 32px;"></iframe> <a href="LINK"target="_blank"><img src="http://2014.software-quality-days.com/uploads/RTEmagicC_facebook_02.png.png "/> </a></p> 
```

如果您将此代码复制并粘贴到本网站的 HTML 区域：http: [//jsfiddle.net/T3Nnu/3/](http://jsfiddle.net/T3Nnu/3/)

如果您查看 Facebook 图标，它的设置比 SoundCloud（橙色）图标高几个像素。有什么方法可以使它与 SoundCloud (Orange) 图标均匀/平行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:05:34.423

用以下改变它：

```
<p>
    <iframe 
        allowtransparency="true" scrolling="no" frameborder="no" 
        src="https://w.soundcloud.com/icon/?url=http%3A%2F%2Fsoundcloud.com%2F&color=orange_white&size=32" 
        style="width: 32px; height: 32px;">
    </iframe>
    <a href="LINK"target="_blank">
        <img height="32px" width="32px" src="http://2014.software-quality-days.com/uploads/RTEmagicC_facebook_02.png.png "/>
    </a>
</p> 
```

因为 iframe 的高度和宽度是 32px，而图像的宽度和高度是 34px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:07:33.517

你可以试试这个， [http://jsfiddle.net/T3Nnu/4/](http://jsfiddle.net/T3Nnu/4/)

```
<a href="http://soundcloud.com/" target="_blank">
<img src="https://w.soundcloud.com/icon/assets/images/orange_white_32-94fc761.png" style="width: 32px; height: 32px;"/>
</a>
<a href="http://fb.com" target="_blank"><img style="margin-top:10px" src="http://2014.software-quality-days.com/uploads/RTEmagicC_facebook_02.png.png "/>
</a> 
```

# c# - 打开浏览器，自动完成表单组件并提交

> ID：15447864
> 
> 赞同：12
> 
> 时间：2013-03-16T09:54:18.230
> 
> 标签：c#, .net, wpf, winforms, browser

我们目前正在研究一种创建 WPF/winforms 应用程序的方法，我们可以在内部设置它：-

1.  自动打开 Web 浏览器的新实例到预定义的 URL
2.  使用预定义数据自动填写必填字段
3.  自动提交表单并等待下一页加载
4.  使用预定义数据自动填写必填字段（第 2 页）
5.  自动提交表单并等待下一页加载（等）

经过大量调查，我们唯一设法找到的是通过以下方式打开网络浏览器：-

```
object o = null;

SHDocVw.InternetExplorer ie = new SHDocVw.InternetExplorer();
IWebBrowserApp wb = (IWebBrowserApp)ie;
wb.Visible = true;
wb.Navigate(url, ref o, ref o, ref o, ref o); 
```

任何关于如何完成该过程的建议/阅读建议将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-16T10:01:47.020

我写了一个在 html 页面中填充元素的示例。你必须这样做：

**Winform**

```
public Form1()
        {
            InitializeComponent();
            //navigate to you destination 
            webBrowser1.Navigate("https://www.certiport.com/portal/SSL/Login.aspx");
        }
        bool is_sec_page = false;
        private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (!is_sec_page)
            {
                //get page element with id
                webBrowser1.Document.GetElementById("c_Username").InnerText = "username";
                webBrowser1.Document.GetElementById("c_Password").InnerText = "pass";
                //login in to account(fire a login button promagatelly)
                webBrowser1.Document.GetElementById("c_LoginBtn_c_CommandBtn").InvokeMember("click");
                is_sec_page = true;
            }
            //secound page(if correctly aotanticate
            else
            {
                //intract with sec page elements with theire ids and so on
            }

        } 
```

**WPF**

```
public MainWindow()
        {
            InitializeComponent();
     webBrowser1.Navigate(new Uri("https://www.certiport.com/portal/SSL/Login.aspx"));
            }
            bool is_sec_page = false;
            mshtml.HTMLDocument htmldoc;
            private void webBrowser1_LoadCompleted(object sender, NavigationEventArgs e)
            {
                htmldoc = webBrowser1.Document as mshtml.HTMLDocument;
                if (!is_sec_page)
                {
                    //get page element with id
                    htmldoc.getElementById("c_Username").innerText = "username";
                    //or
                    //htmldoc.getElementById("c_Username")..SetAttribute("value", "username");
                    htmldoc.getElementById("c_Password").innerText = "pass";
                    //login in to account(fire a login button promagatelly)
                    htmldoc.getElementById("c_LoginBtn_c_CommandBtn").InvokeMember("click");
                    is_sec_page = true;
                }
                //secound page(if correctly aotanticate
                else
                {
                    //intract with sec page elements with theire ids and so on
                }
            } 
```

只需导航到特定的 URL 并填写页面元素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-17T19:17:22.197

如果我理解正确，您想在网络浏览器中打开一些 URL，然后像普通用户一样与网站交互。对于这样的任务，我可以建议看看[Selenium](http://seleniumhq.org)。虽然它通常用作回归测试自动化工具，但没有人可以阻止您将其用作浏览器自动化工具。

Selenium 有详细的[文档](http://docs.seleniumhq.org/docs/)和庞大的[社区](https://groups.google.com/forum/?fromgroups#!forum/selenium-users)。很可能您会想要使用可通过[nuget获得的](http://www.nuget.org/List/Packages/Selenium.WebDriver)[Selenium WebDriver](http://docs.seleniumhq.org/docs/03_webdriver.jsp#selenium-webdriver)。

下面是一个典型的 Selenium“脚本”的小例子（取自文档）：

```
// Create a new instance of the Firefox driver.

// Notice that the remainder of the code relies on the interface, 
// not the implementation.

// Further note that other drivers (InternetExplorerDriver,
// ChromeDriver, etc.) will require further configuration 
// before this example will work. See the wiki pages for the
// individual drivers at http://code.google.com/p/selenium/wiki
// for further information.
IWebDriver driver = new FirefoxDriver();

//Notice navigation is slightly different than the Java version
//This is because 'get' is a keyword in C#
driver.Navigate().GoToUrl("http://www.google.com/");

// Find the text input element by its name
IWebElement query = driver.FindElement(By.Name("q"));

// Enter something to search for
query.SendKeys("Cheese");

// Now submit the form. WebDriver will find the form for us from the element
query.Submit();

// Google's search is rendered dynamically with JavaScript.
// Wait for the page to load, timeout after 10 seconds
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
wait.Until((d) => { return d.Title.ToLower().StartsWith("cheese"); });

// Should see: "Cheese - Google Search"
System.Console.WriteLine("Page title is: " + driver.Title);

//Close the browser
driver.Quit(); 
```

就我个人而言，我可以建议根据用户操作（注册、登录、填写表单、在网格中选择内容、过滤网格等）来思考和组织脚本。这将为脚本提供良好的形状和可读性，而不是杂乱的硬编码代码块。这种情况下的脚本可能类似于：

```
// Fill username and password
// Click on button "login"
// Wait until page got loaded
LoginAs("johndoe@domain.com", "johndoepasswd"); 

// Follow link in navigation menu
GotoPage(Pages.Reports); 

// Fill inputs to reflect year-to-date filter
// Click on filter button
// Wait until page refreshes
ReportsView.FilterBy(ReportsView.Filters.YTD(2012)); 

// Output value of Total row from grid
Console.WriteLine(ReportsView.Grid.Total); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-18T01:30:34.363

```
if (webBrowser1.Document != null)
{
  HtmlElementCollection elems = webBrowser1.Document.GetElementsByTagName("input");
  foreach (HtmlElement elem in elems)
  {
    String nameStr = elem.GetAttribute("name");

    if (nameStr == "email")
    {
      webBrowser1.Document.GetElementById(nameStr).SetAttribute("value", "test_email@mail.com");
    }
  }
} 
```

# php - 在另一台服务器上用 php 文件编写的访问函数

> ID：15447865
> 
> 赞同：-1
> 
> 时间：2013-03-16T09:54:29.090
> 
> 标签：php

我想访问在另一台服务器上的某个 php 文件中编写的某些函数。我通过使用包含文件`file_get_contents`。我设置`allow_url_include`和`allow_url_fopen`为真。它打开文件。但我仍然无法访问包含文件中定义的函数。

我得到的错误是：

致命错误：调用未定义的函数contact()

任何人都可以指导我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:00:21.803

可以使用包含功能

```
include 'http://www.example.com/file.php?foo=1&bar=2'; 
```

[http://www.php.net/include](http://www.php.net/include)

# c - 跟随 Fork 的逻辑

> ID：15447868
> 
> 赞同：0
> 
> 时间：2013-03-16T09:55:02.130
> 
> 标签：c, fork

我是 C 新手，我发现了这段代码：

```
#include <sys/types.h>
#include <sys/wait.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#define DISPLAY \
"mypid[%3.3d] - ppid[%3.3d] - f1[%3.3d] - f2[%3.3d] -  f3[%3.3d]\n"
main(void) {
   int f1, f2, f3, mypid, ppid;
   f1 = (int) fork();
   sleep(1);
   f2 = (int) fork();
   sleep(2);
   f3 = (int) fork();
   sleep(3);
   mypid=(int) getpid();
   ppid=(int) getppid();
   printf(DISPLAY, mypid, ppid, f1, f2, f3);
   waitpid(-1,NULL,0);
   waitpid(-1,NULL,0);
   waitpid(-1,NULL,0);
   exit (0);
} 
```

任何人都可以帮助我，这段代码背后的实际逻辑是什么？我试图运行它几次，但我仍然不知道。

此代码的结果：

> mypid[9341] - ppid[9339] - f1[000] - f2[9342] - f3[9344]
> 
> mypid[9346] - ppid[9342] - f1[000] - f2[000] - f3[000]
> 
> mypid[9339] - ppid[9220] - f1[9341] - f2[9343] - f3[9345]
> 
> mypid[9342] - ppid[9341] - f1[000] - f2[000] - f3[9346]
> 
> mypid[9344] - ppid[9341] - f1[000] - f2[9342] - f3[000]
> 
> mypid[9343] - ppid[9339] - f1[9341] - f2[000] - f3[9347]
> 
> mypid[9347] - ppid[9343] - f1[9341] - f2[000] - f3[000]
> 
> mypid[9345] - ppid[9339] - f1[9341] - f2[9343] - f3[000]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:24:24.653

`(int)`演员表是无用的，因为`pid_t`兼容`int`; 存储 pid 的主要优点`int`是您可以在不强制转换的情况下打印它们。

您的代码显示了一个非常糟糕的用法，`fork();`永远不要像这样使用它！

正确的用法是：

```
f1 = fork();
if (f1 < 0) { perror ("fork"); exit (1); }

if (f1 == 0) {  
    /* here code of child 1 */
    exit (0);
}

f2 = fork();
if (f2 < 0) { perror ("fork"); exit (1); }

if (f2 == 0) {  
    /* here code of child 2 */
    exit (0);
}

/* same for child 3 */

/* Now wait for each child */
wait (NULL);
wait (NULL);
wait (NULL); 
```

回答您的问题：`fork`1 创建 1 个进程，然后`fork`2 创建 2 个进程（由父级和子级调用），`fork`3 创建 4，因此您有 8 个进程。

打印顺序取决于调度程序；运行它几次，顺序会改变（但不是因为`sleep`s; 抑制它们以查看更多更改，并查看`ppid == 1`父级何时已终止）。

`wait`放置错误，因为孩子们不必这样做（在这里他们会失败）。`waitpid(-1,NULL,0)`相当于`wait(NULL)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:59:48.740

这里的程序

*   分叉三次并将各自的结果存储在 f1、f2 和 f3 中。
*   然后获取当前 pid 和父母的 pid。
*   全部打印出来。

而且，关于叉子：

*   如果 fork() 返回负值，则子进程的创建不成功。
*   如果 fork() 向新创建的子进程返回零。
*   如果 fork() 向父进程返回一个正值，即子进程的进程 ID。

* * *

**编辑**

输出看起来像上面，因为你的格式说明符是

```
"mypid[%3.3d] - ppid[%3.3d] - f1[%3.3d] - f2[%3.3d] -  f3[%3.3d]\n" 
```

解释为：

```
mypid[<first argument>] - ppid[<second argument>] ... 
```

导致

```
mypid[9341] - ppid[9339] ... 
```

# c# - 在 List<> 中查找值

> ID：15447875
> 
> 赞同：1
> 
> 时间：2013-03-16T09:55:28.083
> 
> 标签：c#, bindingsource

当我想在其中找到值`List<>`但我没有得到整数值时，我遇到了问题。这是我想在 List 中找到值的代码。

```
private void txtnapsaserach_TextChanged(object sender, EventArgs e)
{
    try
    {
       //decimal find = decimal.Parse(txtnapsaserach.Text);

       if (decimal.Parse(txtnapsaserach.Text) > 0)
       {
       List<NapsaTable> _napsatabs = this.napsaTableBindingSource.List as List<NapsaTable>;
       this.napsaTableBindingSource.DataSource = 
        _napsatabs.Where(p =>p.NapsaRate.Equals(txtnapsaserach.Text)).ToList();

       }
    }
    catch (Exception Ex)
    {
    }
} 
```

对我来说有什么解决方案。因为当我尝试查找字符串值时，这对我有用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:13:00.897

您在此处将`string`对象（txtnapsasearch 的文本）与`float`对象（NapsaRate 属性的值）进行比较：

```
Where(p =>p.NapsaRate.Equals(txtnapsaserach.Text)) 
```

当然返回 false （因为对象有不同的类型）。将文本解析为浮动并使用浮动过滤掉 napsatabs 列表：

```
private void txtnapsaserach_TextChanged(object sender, EventArgs e)
{
     float value;
     if (!float.TryParse(txtnapsaserach.Text, out value))
         return; // return if text cannot be parsed as float number

     if (value > 0)
     {
        var napsatabs = napsaTableBindingSource.List as List<NapsaTable>;
        napsaTableBindingSource.DataSource = 
            napsatabs.Where(p =>p.NapsaRate == value).ToList();
     }
} 
```

顺便说一句，使用 Equals 时要小心。以下是为浮点数（和其他类型）实现 Equals 的方式

```
public override bool Equals(object obj)
{
    if (!(obj is float))
    {
        return false; // your case if obj is string
    }
    float f = (float) obj;
    return ((f == this) || (IsNaN(f) && IsNaN(this)));
} 
```

如您所见，您可以在此处传递任何对象。但是只有当传递的对象也浮动时才会进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:08:30.610

首先，你不应该抓到`Exception`！Catch `ArgumentNullException`，`OverflowException`并`FormatException`改为使用`float .TryParse`：

```
private void txtnapsaserach_TextChanged(object sender, EventArgs e)
{
    float value = 0;
    if(float.TryParse(txtnapsaserach.Text, out value) && value > 0)
    {
        // your logic here
    {
} 
```

您应该使用`float`，因为您要与之比较价值的属性`float`也是。

你的逻辑应该更像这样：

```
List<NapsaTable> _napsatabs = this.napsaTableBindingSource.List as List<NapsaTable>;
this.napsaTableBindingSource.DataSource = _napsatabs.Where(p => p.NapsaRate == value).ToList(); 
```

# knockout.js - 无法在 knockout.js mvvm 中访问 viewmodel 中的可观察数组来操作项目

> ID：15447880
> 
> 赞同：0
> 
> 时间：2013-03-16T09:56:02.350
> 
> 标签：knockout.js, viewmodel, single-page-application, ko.observablearray, knockout-mvvm

我正在使用 Knockout.js、require.js 等开发 MVVM Web 应用程序。问题是我无法访问视图模型中属性（可观察数组类型）中的项目。

样本合同模型：

```
define('model.contract', ['ko'],
    function (ko) {
        var Contract = function () {
            var self = this;
            self.id = ko.observable();
            self.subject = ko.observable().extend({ required: true });

            self.shoppingItems = ko.observableArray();

           };
           return Contract;
    }); 
```

示例视图模型：

```
define('vm.contract', ['ko'],
    function (ko) {
        var contract = ko.observable(), // Is initialised as viewmodel activates

            deleteCmd = function () {

                var selectedId = getSelectedId(),
                    deletedId = contract.shoppingItems.remove(function (item) { return item.id === selectedId; });

                alert('Item ' + deletedId[0].id + ' was deleted!');
            };

        return {
            contract: contract,
            deleteCmd: deleteCmd
        };
    }); 
```

示例视图：

```
<div data-bind="template: {name: shoppingItemTemplate, foreach: contract().shoppingItems}"></div>
<button data-bind="click: deleteCmd">Delete Selected</button> 
```

我需要在 viewmodel 中访问的是`contract.shoppingItems`，我得到的只是未定义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:23:04.363

为什么你定义你的`contract`as`observableArray`而不是 just `observable`？

也不要忘记你应该调用`contract()`来获取`contract`observable 的值：

```
// ...
deletedId = contract().shoppingItems.remove(function (item) { return item.id === selectedId; });
// ... 
```

更新：刚刚注意到你不正确地定义了`model.contract`. 将您的`return Contract`外部`Contract`定义块:)

```
define('model.contract', ['ko'],
    function (ko) {
        var Contract = function () {
            var self = this;
            self.id = ko.observable();
            self.subject = ko.observable().extend({ required: true });

            self.shoppingItems = ko.observableArray();
         };

        return Contract;
    }
); 
```

# matlab - 我无法编译 matlab 生成的代码，它给了我一个链接器错误我必须遵循的正确步骤是什么？

> ID：15447882
> 
> 赞同：2
> 
> 时间：2013-03-16T09:56:27.937
> 
> 标签：matlab, visual-c++, matlab-deployment, mixed-programming

我试图学习 matlab 到 C 的工作流程，我使用 matlab 编码器从这个 .m 文件生成 C/C++ 代码

```
 function c = simpleProduct(a,b) %#codegen
  c=a*b; 
```

在生成代码后，我的可视化 win32 c++ 项目看起来像这样。

```
#include <iostream>
#include "simpleProduct.h"  //matlab generated header file.
using namespace std;
void main(){
    cout<<simpleProduct(34,55);   //matlab generated funcion
} 
```

我什至将项目属性中的“附加库”和“附加依赖项”配置到我生成的静态库中，但同样的问题一次又一次地发生。

从这段代码中我生成了一个静态库。在matlab上操作成功。但是当我包含生成的头文件并在visual studio中链接静态库并编译它时，它给了我这个错误。

```
Error   1   error LNK2019: unresolved external symbol "float __cdecl simpleProduct(float,float)" (?simpleProduct@@YAMMM@Z) referenced in function _main C:\Users\serakpc\Documents\Visual Studio 2010\Projects\chiraq\chiraq\source.obj chiraq 
```

开发环境---- Matlab 2012b, Visual Studio 2012, Visual Studio 2010,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T14:02:29.633

原因是您的 Visual Studio 项目找不到`simpleProduct.dll`。

解决方案：当您将 MATLAB 分发到 Visual Studio 中时，它会生成（至少）四个文件，即

1.  `simpleProduct.h`

2.  `simpleProduct.lib`

3.  `simpleProduct.dll`

4.  `simpleProduct.ctf`

您需要将这 4 个文件复制到您的 Visual Studio 解决方案目录并添加`simpleProduct.lib` 到 [ `Properties > Linker > Input`]。

# svn - 提交失败：已锁定

> ID：15447883
> 
> 赞同：30
> 
> 时间：2013-03-16T09:56:35.133
> 
> 标签：svn, tortoisesvn, visualsvn-server

我只是尝试使用 TortoiseSVN 向 VisualSVN 添加和提交大约 25,000 个文件。

提交对话框被锁定（我猜是意料之中的），但在线程被阻塞一段时间后，我杀死了 Tortoise，希望一次提交更小的文件块。

现在我得到这个错误：

> 错误：提交失败（详情如下）：
> 
> 工作副本“C:\INTERNAL\Icons\Oxygen 4.10.1”已锁定。
> 
> 'C:\INTERNAL\Icons\Oxygen 4.10.1\scalable\places\PaxHeaders.14455' 已被锁定

我已经杀死`TortoiseProc.exe`并重新启动了几次 VisualSVN，但我仍然收到错误消息。

我还右键单击该文件夹并选择*Release lock*，但我得到：

> 没有什么可以解锁的。此工作副本中没有文件被锁定。

当我运行时`svn st`，我得到所有等待添加的文件的巨大输出。

即使我尝试提交一些不相关的事情（几个目录），我也会得到同样的错误。

我能够成功地提交到同一服务器上的单独存储库。

如何释放锁定并提交这些文件？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-16T10:04:54.253

尝试进行 SVN 清理。我遇到了同样的问题，然后锁就被清除了。

具体来自[Tortoise SVN 清理文档](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-cleanup.html)：

> 如果 Subversion 命令无法成功完成，可能是由于服务器问题，您的工作副本可能会处于不一致的状态。在这种情况下，您需要在文件夹上使用 TortoiseSVN → Cleanup。在工作副本的顶层执行此操作是个好主意。
> 
> 在清理对话框中，还有其他有用的选项可以让工作副本进入清理状态。
> 
> 清理工作副本状态 如上所述，此选项尝试使不一致的工作副本进入可工作和可用状态。这不会影响您拥有的任何数据，而只会影响工作副本数据库的内部状态。这是您从旧版 TortoiseSVN 客户端或其他 SVN 客户端知道的实际清理命令。

这是推荐的 SVN 清理选项的屏幕截图：

![SVN 清理截图](../Images/45c18d8881f77f7b283995e64edbe251.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-06-24T11:31:57.830

只是乔丹回答的一个小补充，我遇到了同样的问题，但是由于锁定，对有问题的文件夹的清理失败了。要修复它，我必须对父目录进行 SVN 清理，然后在有问题的目录上进行清理。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-15T13:28:58.677

如果你在 Eclipse 上使用 svn 尝试清理，但我猜它会失败所以安装 Tortoise 然后清理并**检查断锁**

[![在此处输入图像描述](../Images/6a8dfebac18ebdd750efe0d494bdb044.png)](https://i.stack.imgur.com/VdwfF.jpg)

# artificial-intelligence - 神经网络功能

> ID：15447887
> 
> 赞同：1
> 
> 时间：2013-03-16T09:57:03.500
> 
> 标签：artificial-intelligence, neural-network

我正在使用 NeurophStudio，我正在尝试训练网络来学习该功能：

f(x) = 0 如果 x < 0.3 | 如果 x > 0.3，则为 0.7

知道我是否可以使用神经元网络来做到这一点，如果可以的话怎么做？我尝试使用感知器和多层感知器，但还没有运气。

谢谢，安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:12:14.860

以[重质阶跃函数](http://en.wikipedia.org/wiki/Heaviside_step_function)作为激活函数。[您可以在此处](http://www.learnartificialneuralnetworks.com/)找到更多信息。

![在此处输入图像描述](../Images/b6a15ce95f77f9f589048bce26dc1230.png)

# javascript - 使用 Ajax 提交后在同一页面中显示 HTML 表单值

> ID：15447889
> 
> 赞同：13
> 
> 时间：2013-03-16T09:57:04.740
> 
> 标签：javascript, html, ajax

我有一个 HTML 表单，我需要在用户单击提交按钮后在表单下方显示表单字段值。如何使用 HTML 和 JavaScript Ajax 做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-07-16T12:33:00.687

这是一种方法。

```
<!DOCTYPE html>
<html>
  <head lang="en">
  <meta charset="UTF-8">
  <script language="JavaScript">
    function showInput() {
        document.getElementById('display').innerHTML = 
                    document.getElementById("user_input").value;
    }
  </script>

  </head>
<body>

  <form>
    <label><b>Enter a Message</b></label>
    <input type="text" name="message" id="user_input">
  </form>

  <input type="submit" onclick="showInput();"><br/>
  <label>Your input: </label>
  <p><span id='display'></span></p>
</body>
</html> 
```

这就是运行时的样子。干杯。

![在此处输入图像描述](../Images/47688b503f3f55cb047414b9e4cf6e0a.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-09T19:04:00.940

另一种方法（如果您使用表单），请注意输入类型是按钮

```
<input type="button" onclick="showMessage()" value="submit" /> 
```

完整代码为：

```
<!DOCTYPE html>
<html>
<head>
    <title>HTML JavaScript output on same page</title>
    <script type="text/JavaScript">
        function showMessage(){
            var message = document.getElementById("message").value;
            display_message.innerHTML= message;
        }
    </script>
</head>
<body>
<form>
Enter message: <input type="text" id = "message">
<input type="button" onclick="showMessage()" value="submit" />
</form>
<p> Message is: <span id = "display_message"></span> </p>
</body>
</html> 
```

但是即使没有表格你也可以做到：

```
<!DOCTYPE html>
<html>
<head>
    <title>HTML JavaScript output on same page</title>
    <script type="text/JavaScript">
        function showMessage(){
            var message = document.getElementById("message").value;
            display_message.innerHTML= message;
        }
    </script>
</head>
<body>
Enter message: <input type="text" id = "message">
<input type="submit" onclick="showMessage()" value="submit" />
<p> Message is: <span id = "display_message"></span> </p>
</body>
</html> 
```

在这里您可以使用提交或按钮：

```
<input type="submit" onclick="showMessage()" value="submit" /> 
```

无需设置

```
return false; 
```

这两个示例都不是来自 JavaScript 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T10:28:02.470

这行得通。

```
<html>
<head>
<script type = "text/javascript">
function write_below(form)
{
var input = document.forms.write.input_to_write.value;
document.getElementById('write_here').innerHTML="Your input was:"+input;
return false;
}
</script>
</head>

<!--Insert more code here-->
<body>
<form name='write' onsubmit='return write_below(this);'>
<input type = "text" name='input_to_write'>
<input type = "button" value = "submit" />
</form>
<div id='write_here'></div></body>
</html> 
```

从函数返回 false 永远不会将其发布到其他页面，但会编辑 html 内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-09T10:03:16.633

```
var tasks = [];
var descs = [];

// Get the modal
var modal = document.getElementById('myModal');

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
var rowCount = 1;

function addTasks() {
  var temp = 'style .fa fa-trash';
  tasks.push(document.getElementById("taskname").value);
  descs.push(document.getElementById("taskdesc").value);
  var table = document.getElementById("tasksTable");
  var row = table.insertRow(rowCount);
  var cell1 = row.insertCell(0);
  var cell2 = row.insertCell(1);
  var cell3 = row.insertCell(2);
  var cell4 = row.insertCell(3);
  cell1.innerHTML = tasks[rowCount - 1];
  cell2.innerHTML = descs[rowCount - 1];
  cell3.innerHTML = getDate();
  cell4.innerHTML = '<td class="fa fa-trash"></td>';
  rowCount++;
  modal.style.display = "none";
}

function getDate() {
  var today = new Date();
  var dd = today.getDate();
  var mm = today.getMonth() + 1; //January is 0!

  var yyyy = today.getFullYear();

  if (dd < 10) {
    dd = '0' + dd;
  }
  if (mm < 10) {
    mm = '0' + mm;
  }
  var today = dd + '-' + mm + '-' + yyyy.toString().slice(2);
  return today;
}
```

```
<html>

<body>
  <!-- Trigger/Open The Modal -->
  <div style="background-color:#0F0F8C ;height:45px">
    <h2 style="color: white">LOGO</h2>
  </div>
  <div>
    <button id="myBtn">&emsp;+ Add Task &emsp;</button>
  </div>
  <div>
    <table id="tasksTable">
      <thead>
        <tr style="background-color:rgba(201, 196, 196, 0.86)">
          <th style="width: 150px;">Name</th>
          <th style="width: 250px;">Desc</th>
          <th style="width: 120px">Date</th>
          <th style="width: 120px class=fa fa-trash"></th>
        </tr>

      </thead>
      <tbody></tbody>
    </table>
  </div>
  <!-- The Modal -->
  <div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">

      <div class="modal-header">

        <span class="close">&times;</span>
        <h3> Add Task</h3>
      </div>

      <div class="modal-body">
        <table style="padding: 28px 50px">
          <tr>
            <td style="width:150px">Name:</td>
            <td><input type="text" name="name" id="taskname" style="width: -webkit-fill-available"></td>
          </tr>
          <tr>
            <td>
              Desc:
            </td>
            <td>
              <textarea name="desc" id="taskdesc" cols="60" rows="10"></textarea>
            </td>
          </tr>
        </table>
      </div>

      <div class="modal-footer">
        <button type="submit" value="submit" style="float: right;" onclick="addTasks()">SUBMIT</button>
        <br>
        <br>
        <br>
      </div>

    </div>
  </div>

</body>

</html>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T10:03:47.843

```
<script type = "text/javascript">
function get_values(input_id)
{
var input = document.getElementById(input_id).value;
document.write(input);
}
</script>

<!--Insert more code here-->

<input type = "text" id = "textfield">
<input type = "button" onclick = "get('textfield')" value = "submit"> 
```

下次您在这里提出问题时，请提供更多详细信息以及您尝试过的内容。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-16T10:02:32.323

试试这个：

```
onsubmit="return f(this.'yourfieldname'.value);" 
```

我希望这能帮到您。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-29T07:05:57.487

使用 JS 和 html 代码单击提交按钮后，在同一页面中显示 html 表单值。再次打开它后，它应该在该页面中给出该评论。

# asp.net-mvc-4 - i18n asp.net mvc4 属性？

> ID：15447891
> 
> 赞同：0
> 
> 时间：2013-03-16T09:57:20.093
> 
> 标签：asp.net-mvc-4, internationalization

我正在做一个网站项目，我需要将该项目国际化。现在，我使用资源文件。

我已经将所有东西都国际化了，但是我想知道的一件事是：

假设我的数据库中已经有一系列类，每个类都有一个名为 Description 的字符串属性。有没有办法根据语言环境浏览器显示描述？我的意思是，我使用英文浏览器并以英文显示描述，但我将其更改为法文并以法文显示这些描述？（我想为每个描述分配一个“数字”值，然后在资源文件中有 1：人力资源，2：IT，3：医疗保健，等等。还有一个法语文件，它们各自的值，但我认为这是一种混乱）

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:13:09.357

好吧，鉴于描述文本是常量，您不能将相应文本的翻译键写入数据库，然后从翻译文件中获取匹配（本地化）值吗？如果您无法更改数据库，也许只需使用数据库中的现有值作为翻译文件中的键并映射到相应的翻译。您可能必须摆脱空格等，但这应该没什么大不了的。

在您的数据库中：

```
Human Resources
Health Care
... 
```

翻译文件示例：

英语：

```
Human_Resources | Human Resources
Health_Care     | Health Care
... 
```

法语：

```
Human_Resources | Service du personnel
... 
```

检索翻译后的值（伪）：

```
var translationKey = descriptionValueFromDB.Replace(' ', '_');
var translatedDescription = ResourceManager.GetString(translationKey); 
```

你怎么看？

干杯，亚历克斯

更新：使用标准技术在视图中显示翻译后的字符串很简单。我假设您正在使用模型对象将数据提供给您的视图。然后，您可以例如将现成的翻译写入您的模型并在视图中使用它：

```
 public class FooModel
    {
      public string Description {get; set;}
      public string TranslatedDescription
      {
        get { return Description.ToTranslationKey().Translate(); }
      }
    }

    public static class TranslationExtensions
    {
      public static string ToTranslationKey(this string term)
      {
        if (string.IsNullOrEmpty(term))
          return term;

        return term.Replace(' ', '_');
      }

      public static string Translate(this string term)
      {
        if (string.IsNullOrEmpty(term))
          return term;

        return ResourceManager.GetString(term);
      }
    }

<div id="fooDescription">@Model.TranslatedDescription</div> 
```

当然，如果您更喜欢，您也可以将翻译部分移到视图中：

```
<div id="fooDescription">@Model.Description.ToTranslationKey().Translate()</div> 
```

麦凯？

# python - 用于 RESTful 应用程序的 Python 微框架？

> ID：15447896
> 
> 赞同：4
> 
> 时间：2013-03-16T09:58:20.690
> 
> 标签：python, json, rest, web-frameworks, stateless

以前我一直在使用[web2py](http://www.web2py.com)，它非常好，但对我的目的来说有点重。

基本上我正在寻找一个 Python 微框架：

*   自动无参数函数 -> 控制器（端点）转换（或简单`@app.route()`样式语法）
*   能够将这些端点公开（发送/接收）为 JSON；并通过 HTTP 动词限制他们的访问（例如：仅 GET）；在 [控制器] 功能级别
*   自动错误/异常捕获（带回溯）
*   可部署到 heroku 和 OpenShift

思考[wheezy.web](https://bitbucket.org/akorn/wheezy.web)、[Flask](http://flask.pocoo.org)、[瓶子](http://bottlepy.org)或[金字塔](http://www.pylonsproject.org)……</p>

从 MVC 的角度来看，我只需要模型（db+schema）和控制器（管理 HTTP 动词 + 端点 + 与模型的连接）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:06:41.647

看看[python 框架](http://wiki.python.org/moin/WebFrameworks)。尝试使用 Grok 或 TurboGears。

# git - 具体的 git-log 输出风格

> ID：15447899
> 
> 赞同：0
> 
> 时间：2013-03-16T09:59:02.837
> 
> 标签：git, logging, formatting, gource

如何使用`git log --pretty=format""`这种格式输出 git log

```
timestamp|username|type|file    
1275543595|andrew|A|src/main.cpp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T11:21:31.933

我是否正确假设您正在尝试获取这种格式以便您可以让 gource 解析它？

如果是这样，请查看：[https ://github.com/whitewhidow/live-git-for-gource/blob/master/git-live.sh](https://github.com/whitewhidow/live-git-for-gource/blob/master/git-live.sh)

至尊已经这样做了，也只需检查代码，这样你就可以弄清楚如何获得正确的格式，以防你需要它来做其他事情..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:52:16.173

粗鲁，但完成工作

```
git log --name-status --format='%ct|%an' hulu.sh |
  sed 'N;N;s/\n/|/;s///;s/\t/|/' 
```

*   将 2 行追加到模式空间
*   将第一个换行符替换为`|`
*   删除第二个换行符
*   将标签替换为`|`

```
1363415345|Steven Penny|M|hulu.sh
1363403048|Steven Penny|M|hulu.sh
1363278409|Steven Penny|M|hulu.sh
1363201389|Steven Penny|M|hulu.sh
1363158212|Steven Penny|M|hulu.sh 
```

[git log 排除重命名](https://stackoverflow.com/q/15130597/git-log-exclude-renames)

# spotify - Spotify 预览应用列表视图 getItem

> ID：15447904
> 
> 赞同：1
> 
> 时间：2013-03-16T09:59:28.597
> 
> 标签：spotify

我正在使用 Spotify 应用程序 API 的 v1.0 预览版。当尝试通过提供 List.forPlaylist(list, opt_options) 的 opt_options 参数来创建自定义列表时，我收到有关未找到 DOM 元素的错误。这几乎可以肯定是由于我的幼稚实现。

我的问题是，有没有人举例说明如何将此 opt_options 与自定义 getItem 函数一起使用？文档不清楚我要返回或填充什么。

我的实现（其中播放列表是加载列表）：

```
listView.forPlaylist(playlist, { getItem : function (item, index) {
            console.log(item);
            console.log(index);
            return $("<span>hello, world</span>");
        }
    } 
```

每次都会出现这个错误：

```
DOMException code: 8 message: "NOT_FOUND_ERR: DOM Exception 8" name:
"NOT_FOUND_ERR" stack: "Error: An attempt was made to reference a Node
in a context where it does not exist.?    at f.createItems
($views/scripts/list/view.js:16:147)?    at e.b
($views/scripts/list.js:16:102)?    at e.Observable.dispatchEvent
($api/scripts/models.js:4:322)?    at Promise.f.snapshot
($views/scripts/list/model.js:9:244)?    at Promise.done
($api/scripts/models.js:6:157)?    at f.snapshot
($views/scripts/list/model.js:7:241)?    at e.more
($views/scripts/list.js:4:138)?    at f.moreWithLimit
($views/scripts/list/model.js:17:127)?    at f.checkResizeEdge
($views/scripts/list/view.js:13:457)?    at f.init.b
($views/scripts/list/view.js:3:3)" 
```

欢迎任何想法。一个例子，更是如此;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:28:19.943

您应该返回一个 DOM 元素，而不是 jQuery 对象。为此，您需要返回

```
$("<span>hello, world</span>")[0]; 
```

而不是返回

```
$("<span>hello, world</span>"); 
```

你有更多关于[jQuery object 和 DOM element](https://stackoverflow.com/questions/6974582/jquery-object-and-dom-element)的区别的信息。

在这里，您有一个完整的示例，说明如何在 Spotify 应用程序中注入[列表视图：](https://developer.spotify.com/technologies/apps/docs/preview/views/views-list-list.html)

```
require([
  '$api/models',
  '$views/list#List'
], function (models, List) {
  'use strict';

  var playlist = models.Playlist.fromURI('spotify:user:nowplaylist:playlist:6QHyDeqaPNZ0nyLFJbSKTL');
  var listView = List.forPlaylist(playlist, {
    getItem : function (item, index) {
        console.log(item);
        console.log(index);
        return $("<span>hello, world</span>")[0];
    }
  });

  document.body.appendChild(listView.node);
  listView.init();
}); 
```

# mysql - 无法使用 Innodb 在表中定义非唯一索引

> ID：15447911
> 
> 赞同：0
> 
> 时间：2013-03-16T10:00:38.703
> 
> 标签：mysql, database, indexing

我有一个有 4 列的表 - id（自动递增）、锦标赛 ID、用户 ID、现金。

用户 ID 和锦标赛 ID 可能有重复的条目，但锦标赛 ID 和用户 ID 的组合始终是唯一的。

所以根据我的要求，我需要有 2 组索引。

1.  用户身份
2.  锦标赛ID，现金

但我无法使用非唯一条目创建索引，因为它不断给我以下错误：

```
 "Failed to create index : SQL create unique index `test_index` on `table_name` 
  (`tournament_id`) failed : Duplicate entry" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:06:39.527

您要查找的内容称为复合主键。

```
PRIMARY KEY(user_id, tournament_id) 
```

它将确保组合是否`user_id`并且`tournament_id`将是唯一的。

您的表定义应该类似于。

```
CREATE TABLE user_tournament
{
    user_id INT,
    tournament_id INT,
    cash DECIMAL(5,2), -- should cash be in this table?

    PRIMARY KEY(user_id, tournament_id),
    FOREIGN KEY(user_id) REFERENCES user(id),
    FOREIGN KEY(tournament_id) REFERENCES tournament(id)
} ENGINE=InnoDB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:39:37.640

```
CREATE TABLE user_tournament
(
    id int(11) auto_increment
    user_id INT,
    tournament_id INT,
    cash DECIMAL(5,2),
    PRIMARY KEY (id),
    KEY(user_id, tournament_id)
); 
```

如果您想拥有唯一键，请创建创建表

```
CREATE TABLE user_tournament
(
    id int(11) auto_increment
    user_id INT,
    tournament_id INT,
    cash DECIMAL(5,2),
    PRIMARY KEY (id),
    UNIQUE KEY(user_id, tournament_id)
); 
```

如果要向现有表添加索引，请使用 ALTER IGNORE TABLE 而不是 ALTER TABLE

# php - PHP if/while 和/或 img 调整大小错误

> ID：15447913
> 
> 赞同：0
> 
> 时间：2013-03-16T10:00:48.647
> 
> 标签：php, html, while-loop, if-statement

编码器。我对 php 很陌生，所以我的代码很可能是错误的。我从 txt 文件加载纯文本并使用它从网站加载图片。（感谢这个论坛帮助我）。现在我在调整这些照片的大小时遇到​​了问题。首先，我不认为我在最后 2 个中得到了正确的 if 语句。而且我真的不知道如何使用“while”，如果我什至必须使用它。

你能看一下代码，看看你是否发现任何错误？谢谢你。

在第一个（如果）部分中，我将 txt 文件中的文本转换为图像。现在我想调整所有这些图像的大小。在第二个（如果）我试图调用所有这些图像来调整大小。在第三个（如果）中，我试图调用所有这些调整大小的图像，以便我可以在最后一点代码中回显它们。

```
<?php

$file = 'serverlist.txt';
$servers = '';
if ($handle = fopen($file, 'r')) {
    while (!feof($handle)) {
        $content = trim(fgets($handle));
        $names = explode(' ', $content);
        foreach ($names as $name) {
            $servers .= '<img src="http://minecraft.net/skin/' . $name . '.png" alt="">';
        }
    }
    fclose($handle);
} else {

}
if $file == 'serverlist.txt' {
    $fullimages = explode($servers);
    foreach ($fullimages as $_fullimages) {
        $face = imagecreatetruecolor($width, $height);
        $imgwidth = 200;
        $imgheight = 200;
        imagecopyresized($face, $_fullimages, 0, 0, 8, 8, $width, $height, 8, 8);
        imagecopyresized($face, $_fullimages, 0, 0, 40, 8, $width, $height, 8, 8);
    }
} else {

}
if $file = 'serverlist.txt' {
    $displayimages = explode($_fullimages);
    foreach ($displayimages as $_displayimages) {

    }
} else {

}
echo $_displayimages;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:09:36.750

`if`您在应该使用的每个语句中都分配了值，`==`而不是单个`=`

```
<?php

    $file = 'serverlist.txt';
    $servers = '';
    if ($handle == fopen($file, 'r')) {
        while (!feof($handle)) {
            $content = trim(fgets($handle));
            $names = explode(' ', $content);
            foreach ($names as $name) {
                $servers .= '<img src="http://minecraft.net/skin/' . $name . '.png" alt="">';
            }
        }
        fclose($handle);
    } else {

    }
    if ($file == 'serverlist.txt') {
        $fullimages = explode($servers);
        foreach ($fullimages as $_fullimages) {
            $face = imagecreatetruecolor($width, $height);
            $imgwidth = 200;
            $imgheight = 200;
            imagecopyresized($face, $_fullimages, 0, 0, 8, 8, $width, $height, 8, 8);
            imagecopyresized($face, $_fullimages, 0, 0, 40, 8, $width, $height, 8, 8);
        }
    } else {

    }
    if ($file == 'serverlist.txt') {
        $displayimages = explode($_fullimages);
        foreach ($displayimages as $_displayimages) {

        }
    } else {

    }
    echo $_displayimages;
    ?> 
```

# matlab - matlab中的函数调用

> ID：15447917
> 
> 赞同：-2
> 
> 时间：2013-03-16T10:01:02.333
> 
> 标签：matlab

我想将我的文件名从 abc.m 文件传递​​给 xyz.m 文件......没有任何回报。请告诉我要在两个文件中写入的语法。我尝试过这样的事情：在 abc.m 文件中：

```
xyz(filename); 
```

在 xyz.m 文件中：

```
xyz(filename); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:20:42.090

MATLAB 函数定义如下：

```
function y = MyAddFunction(x, n)
   y = x + n;
end 
```

并像往常一样被调用：

```
foo = MyAddFunction(10, 5); 
```

如果您想要多个输出值，您可以这样定义输出：

```
function [y1 y2] = MyOtherFunction(x)
   y1 = x + 3;
   y2 = y1 + 5;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:39:06.660

如果我理解正确，您要问的是，如何在 xyz.m 中编写函数以使其没有返回值，并将对您从 abc.m 中的函数传递的文件名进行操作.

如果这是正确的，那么答案很简单，您定义函数 xyz 根本没有返回变量，如下所示：

```
function xyz(filename)
    %code goes here
end 
```

然后，在 abc.m 中，只需将其称为`xyz(filename)`. 只要两个 m 文件都在适当的位置以便 matlab 可以看到它们，它就可以工作。

文件名应该是一个字符串。我不相信您可以从 fopen 传递文件 ID，如果这是您想要做的，尽管可以从任何函数访问打开的文件（我还没有真正测试过）。

# php - PHP，日期函数的使用

> ID：15447918
> 
> 赞同：0
> 
> 时间：2013-03-16T10:01:04.210
> 
> 标签：php, mysql, database, web-services

我对 PHP 中的日期函数有疑问。我不知道如何正确使用它。我从未学过 PHP，也找不到任何方法。我只需要知道日期功能如何正常工作。当我尝试将日期添加到数据库中时，查询不起作用。我在我的项目中使用了 mySql 和 php，尽管有破解的风险，但我没有发布任何东西。我只是一个做项目的学生，我们学校没有任何 IT 老师。您的帮助将不胜感激。

```
$date = date("Y-m-d");

if($type == 'borrow')

    $query="UPDATE books set Availablity = ".$zero." where ID=".$id."";
    mysql_query($query) or die (" borrow operation failed due to query 1");
    $query1="INSERT into borrowed (BookID, BookName, BorrowedID, BorrowedName,
    DateBorrowed, Extended, Returned) values('".$id."','".$bkName."','".$userid."'
    ,'".$userName."',".$date."','".$zero."','".$zero.")";
    mysql_query($query1) or die (" borrow operation failed to due query 2");
    echo "borrow begun"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:09:42.750

如果您需要 mysql 数据库中的当前日期，请尝试使用当前时间戳作为列类型，而不是使用 php 函数。在这里我找到了一些关于如何做的链接

[http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:06:09.067

我已经进行了更正。用这个，

```
$query1="INSERT into borrowed (BookID, BookName, BorrowedID, BorrowedName,
    DateBorrowed, Extended, Returned) values('".$id."','".$bkName."','".$userid."','".$userName."','".$date."','".$zero."','".$zero.")"; 
```

确保 DateBorrowed 的类型为 Date 或 DateTime。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:34:34.903

首先，您确保您已在 MySQL***借用***表中进行了修改。
修改：将**DateBorrowed**类型更改为**TIMESTAMP**。之后，您按照以下代码作为参考。

```
if($type == 'borrow')
{
    $query="UPDATE books set Availablity = ".$zero." where ID=".$id."";
    mysql_query($query) or die (" borrow operation failed due to query 1");
    $query1="INSERT into borrowed (BookID, BookName, BorrowedID, BorrowedName,
    DateBorrowed, Extended, Returned) values('".$id."','".$bkName."','".$userid."'
    ,'".$userName."',now()','".$zero."','".$zero.")";
    mysql_query($query1) or die (" borrow operation failed to due query 2");
    echo "borrow begun";
} 
```

在此之后，您不必担心日期功能。顺便说一句，日期函数格式是正确的。因此，错误仅存在于您的查询中。只有当您没有正确配置数据库表时才会发生这种类型的错误。所以，我建议你重新检查你的表结构。

# php - 正则表达式：匹配两个相邻的字符串

> ID：15447926
> 
> 赞同：0
> 
> 时间：2013-03-16T10:01:56.117
> 
> 标签：php, regex, preg-match

我有一些代码，例如：

```
if('hello' == 2 && 'world' !== -1){
  return true;
} 
```

我在匹配`if`语句中的条件时遇到了一些问题。我想到的第一个正则表达式是`/'.*'/`，但这匹配：

1.  '你好'
2.  ' == 2 && '
3.  '世界'

这不是我所希望的。我只想匹配单引号和里面的文字。

1.  '你好'
2.  '世界'

任何机构有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:05:32.473

两个匹配的组 int this 应该会选择您引用的值：

```
^.*(\'.*?\').*(\'.*?\').*$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:16:14.047

对于您的具体情况

```
\'[a-z]*?\' 
```

对于整个代码，如果引号中有大写字符，则可以使用

```
\'[a-zA-Z]*?\' 
```

但是，如果引号中也有特殊字符，那么您可以使用@Chris Cooper 建议的内容。根据您的需要，有多种可能的答案。

笔记： '？' after * 使得 * 不贪婪，所以它不会尝试搜索直到最后一个报价。

您使用哪种正则表达式方法来获得答案也很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:22:53.853

**试试这个**

```
preg_match_all('/\'[^\'\r\n]*\'/m', $subject, $result, PREG_PATTERN_ORDER);
for ($i = 0; $i < count($result[0]); $i++) {
    # Matched text = $result[0][$i];
} 
```

**解释**

```
"
'           # Match the character “'” literally
[^'\\r\\n]    # Match a single character NOT present in the list below
               # The character “'”
               # A carriage return character
               # A line feed character
   *           # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
'           # Match the character “'” literally
" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:38:46.233

这就是我想出的！

```
preg_match_all("#'[^'\n\r]*'#", $subject, $matches); 
```

1.  匹配`'`。
2.  匹配任何不是`'`、换行或回车的字符。
3.  匹配`'`。

没有所有的转义，我认为它更具可读性——无论如何，它是一个正则表达式。

# java - 使用 Gson 到对象的 Json

> ID：15447927
> 
> 赞同：1
> 
> 时间：2013-03-16T10:02:00.980
> 
> 标签：java, json, enums, gson

我有一个具有以下属性的类**DocumentBO -**

```
public class DocumentBO implements IStorageBO {
   private String aId;
   private String studyId;
   private Map<AlgorithmsEnum, JobIOStatus> status;
   private String text;
   private Collection<Sentence> sentences;

   public String getaId() {
      return aId;
   }
   public void setaId(String aId) {
      this.aId = aId;
   }
   public String getStudyId() {
      return studyId;
   }
   public void setStudyId(String studyId) {
      this.studyId = studyId;
   }
   public Map<AlgorithmsEnum, JobIOStatus> getStatus() {
      return status;
   }
   public void setStatus(Map<AlgorithmsEnum, JobIOStatus> status) {
      this.status = status;
   }
   public String getText() {
      return text;
   }
   public void setText(String text) {
      this.text = text;
   }
   public Collection<Sentence> getSentences() {
      return sentences;
   }
   public void setSentences(Collection<Sentence> sentences) {
      this.sentences = sentences;
   } 
} 
```

**AlgorithmsEnum**如下-

```
public enum AlgorithmsEnum {
   SENTIMENT("sentiment"),
   INTENTION("intention"),
   TOPIC("topic"),
   NER("ner"),
   UIMA("uima");

   private final String value;

   private AlgorithmsEnum(String value) {
      this.value = value;
   }

   public String value() {
      return value;
   }

   @Override
   public String toString() {
      return value;
   }

   public static AlgorithmsEnum fromValue(String value) {
      if (value != null) {
         for (AlgorithmsEnum aEnum : AlgorithmsEnum.values()) {
            if (aEnum.value().equals(value)) {
               return aEnum;
            }
         }
      }
      return null;
   }
} 
```

JobIOStatus**也**类似。我可以使用 GSON 使用以下 TypeToken 成功创建一个 JSON 字符串

```
Type type = new TypeToken<Collection<DocumentBO>>() {}.getType(); 
```

但是，当我尝试使用 Gson 返回的 JSON 字符串重新创建 Collection 对象时，hashmap`TypeToken`的键`status`始终返回为**NULL**，而值已成功创建。你认为可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:54:17.673

问题是你`toString()`在你的`enum`.

如果您查看正在生成的 JSON，您的键`Map<AlgorithmsEnum, JobIOStatus>`是您正在创建的小写名称。那是行不通的。`enum`当您尝试反序列化 JSON 时，Gson 不知道如何从这些中重新创建。

如果您删除您的`toString()`方法，它将正常工作。

或者，您可以`.enableComplexMapKeySerialization()`在序列化时使用该方法，该方法`GsonBuilder`将忽略您的`toString()`方法并使用所需的值的默认表示生成 JSON `enum`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:47:46.360

当键是从对象派生而不是“本机”数据类型时，Gson 序列化 Map 存在“众所周知的”问题。请使用这个

```
GsonBuilder builder = new GsonBuilder();    
Gson gson = builder.enableComplexMapKeySerialization().create(); 
Collection<DocumentBO> obj = gson.fromJson(str, type); 
```

# ms-access - 如何检查 MS Access Fullversion 或 Viewer

> ID：15447934
> 
> 赞同：1
> 
> 时间：2013-03-16T10:02:44.600
> 
> 标签：ms-access, ms-access-2007, vba

我想检查我的数据库应用程序是在完整版 MS Access 中运行，还是仅在查看器/受限 MS Access 中运行。

问题在于，在受限版本中，用户可以关闭最后一个表单，然后在不重新启动整个应用程序的情况下无法重新打开任何表单。

```
Private Sub Form_Unload(Cancel As Integer)
    If LimitedVersion Then
        Cancel = True
    End If
End Sub 
```

所以问题是如何确定 LimitedVersion ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T10:35:33.220

您可以使用：

```
SysCmd(acSysCmdRuntime) 
```

对于运行时版本，它将返回 True。

但是，我绝不允许在应用程序中关闭最后一个菜单。如果他们需要访问设计，拥有完整版的人可以以不同的方式打开应用程序。

要模拟运行时环境，可以使用 /runtime 开关：

对于 MS Access 2010，它看起来像这样，请注意换行符用于显示目的。

```
"C:\Program Files\Microsoft Office\Office14\MSACCESS.EXE"
"z:\docs\demo.accdb" /runtime 
```

# jquery - 如何在点击事件上存储价值

> ID：15447935
> 
> 赞同：0
> 
> 时间：2013-03-16T10:02:45.577
> 
> 标签：jquery, html

```
var btnlist="";
$("#divPopup").on("click", "li", function () {
    var $this = $(this);
    // get currect id an replace with right
    var newId = $this.attr('Id').replace("Left", "Right")
    // check if the image is not for True
    if ($('#' + newId).find('img').attr('class') != 'checkImage') {
        $this.toggleClass("selected");
        if ($this.attr('class') == "selected") {
            btnlist.
            $('#' + newId).show(); // <== i want to store Newid each time when.show() method ex
        }
        else {
            var newId = $this.attr('Id').replace("Left", "Right")
            $('#' + newId).hide();
        }
    }
}); 
```

我想存储 btnlist。`$('#' + newId).show();`<== 我想在每次执行.show() 方法时存储**Newid**，我该如何存储它。？

例如，有 10 li 元素都被隐藏了！，现在让我们看看我点击 5 li 元素，然后将它们显示出来！

如何创建可见项目列表？像这样的 var visiable = ([li1, li2, li3,li4,li5]); 我需要增加哪行代码才能实现这样的目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:05:18.533

`sessionStorage`或者`localStorage`是键/值对，您所要做的就是：

```
sessionStorage.newId = newId; 
```

您可能需要检查浏览器是否支持它：

```
if(typeofsessionStorage)!=="undefined")
{
  // storage supported
} 
```

**更新**

`sessionStorage`并且`localStorage`不支持数组，但您可以将数据存储为 json 字符串：

```
sessionStorage.newIds = JSON.stringify([1, 2, 3]);
var ids = JSON.parse(sessionStorage.newIds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:10:17.467

您可以使用[Amplifyjs 商店插件](http://amplifyjs.com/api/store/)。

*从文档：*

> amplify.store 是各种持久客户端存储系统的包装器。amplify.store 支持 IE 5+、Firefox 2+、Safari 4+、Chrome、Opera 10.5+、iPhone 2+、Android 2+，并提供一致的 API 来处理跨浏览器的存储。

样品用法：

```
amplify.store(key, value)       // => store the value on the given key

var value = amplify.store(key); // => extract the value on the given key 
```

**编辑**

要在 HTML5 会话存储中存储值，您应该查看此链接：

[http://www.nczonline.net/blog/2009/07/21/introduction-to-sessionstorage/](http://www.nczonline.net/blog/2009/07/21/introduction-to-sessionstorage/)

**编辑-2**

我创建了一个小提琴，您可以在其中看到用于访问所有 li 项目以及如何保存单击项目的代码。

[**工作小提琴**](http://jsfiddle.net/DqnqY/2/)

# android - 获取手机的IMEI

> ID：15447937
> 
> 赞同：1
> 
> 时间：2013-03-16T10:02:55.137
> 
> 标签：android, xamarin.android, imei

我正在尝试检索手机的 IMEI 号码。我正在使用下面的代码：

```
public static string GetDeviceId(Context context)
{
    TelephonyManager telephonyMgr = context.GetSystemService(Context.TelephonyService) as TelephonyManager;
    string deviceId = telephonyMgr.DeviceId == null ? "UNAVAILABLE" : telephonyMgr.DeviceId;
    return deviceId;
} 
```

代码有问题吗？我还应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:04:45.623

您需要在*清单文件中添加以下权限*

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

# delphi - 数据库搜索框

> ID：15447938
> 
> 赞同：0
> 
> 时间：2013-03-16T10:02:56.760
> 
> 标签：delphi, function

你好，我是 delphi 7 的新手，我已经编写了一个管理我的 mdb 数据库的应用程序。我只想放置一个搜索框，如果我输入一个关键字，它将在数据库的特定行上返回带有关键字的结果。

示例：在名为 first name 的行上，我想使用 john 关键字搜索数据库，然后当我按 Enter 或搜索按钮时，应用程序将返回结果，其中包含名字中包含 john 的所有数据

```
type
    Tcollector = class(TForm)
    Image1: TImage;
    ADOConnection1: TADOConnection;
    ADOTable1: TADOTable;
    DataSource1: TDataSource;
    DBGrid1: TDBGrid;
    DBNavigator1: TDBNavigator;
    procedure DataSource1DataChange(Sender: TObject; Field: TField);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  collector: Tcollector;

implementation

{$R *.dfm}

procedure Tcollector.DataSource1DataChange(Sender: TObject; Field: TField);
begin

end; 
```

编辑：

我已经这样做了：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, Grids, DBGrids, DB, ADODB, StdCtrls;

type
    TForm1 = class(TForm)
    ComboBox1: TComboBox;
    ADOConnection1: TADOConnection;
    ADOQuery1: TADOQuery;
    DataSource1: TDataSource;
    DBGrid1: TDBGrid;
    Button1: TButton;
    Button2: TButton;
    ADOQuery2: TADOQuery;
    ADOQuery3: TADOQuery;
    ADOQuery4: TADOQuery;
    ADOQuery5: TADOQuery;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

uses Unit2;

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
ADOConnection1.GetTableNames(ComboBox1.Items);
end;

procedure TForm1.Button1Click(Sender: TObject);
var  tblname : string;
begin

if ComboBox1.ItemIndex < 0 then Exit;
tblname := ComboBox1.Items[ComboBox1.ItemIndex];

with ADOQuery1 do begin
Close;
  SQL.Text := 'SELECT * FROM ' + tblname;
  Open;
end;

with ADOQuery2 do begin
  Close;
  SQL.Text := 'SELECT * FROM ' + tblname;
  Open;
end;

with ADOQuery3 do begin
  Close;
  SQL.Text := 'SELECT * FROM ' + tblname;
  Open;
end;

with ADOQuery4 do begin
  Close;
  SQL.Text := 'SELECT * FROM ' + tblname;
  Open;
end;

with ADOQuery5 do begin
  Close;
  SQL.Text := 'SELECT * FROM ' + tblname;
  Open;
end;

    end;
procedure TForm1.Button2Click(Sender: TObject);
begin
form2.show;
end;

end. 
```

到目前为止，我可以提取所有表格数据。我想要我的程序做的是显示我在 tedit 上输入的数据

顺便说一句，我的第一篇文章很抱歉，我仍然不熟悉论坛的快捷方式和发帖规则。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:00:01.887

[TDataSet.Filter](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.Filter) 或 [TDataSet.OnFilterRecord](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.OnFilterRecord) 或直接使用 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:22:29.610

得到它只是一些小问题，但也许我能弄清楚

```
begin
ADOTable1.First;
if ADOTable1.Locate('Last',edit1.Text ,[]) then begin
Label1.Caption := ADOTable1.FieldByName('Last').AsString;
Label2.Caption := ADOTable1.FieldByName('First').AsString;
Label3.Caption := ADOTable1.FieldByName('address').AsString;
Next;
end else begin
Label1.Caption := '';
Label2.Caption := '';
Label3.Caption := ''; 
```

# php - 仅读取文本文件“tail”的最后 10 行（Jquery/Ajax/javascript 或其他）

> ID：15447939
> 
> 赞同：0
> 
> 时间：2013-03-16T10:03:02.383
> 
> 标签：php, javascript, jquery, html, ajax

我已经在这里寻找解决方案很长时间了，到目前为止我还没有找到任何解决方案

我需要的是一种读取文本文件最后 10 行左右的方法，它每秒不断更新

我在 php 中找到了一些可能的代码，但是我将无法每秒更新文件。

如何使用某种 javascript 仅获取文本文件的最后 10 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:09:58.267

尝试使用 array_slice，它将返回数组的一部分。在这种情况下，您希望它返回数组的最后 15 行，

```
$filearr = file("filename");
$lastlines = array_slice($filearr,-10); 
```

您可以更改 -10（-10，-15 任何您想要的值）。

希望它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:34:43.067

在这里没有找到正确的答案，所以我开始了一个新问题，我更具体地说明了我想要什么

[只读取大文本文件的最后 50 行](https://stackoverflow.com/questions/15465886/reading-only-the-last-50-lines-of-a-large-text-file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:34:36.177

嗯......也许是这样，对于大文件：

```
$fileName = '[path_to_file]';
$file = new \SplFileObject($fileName);
$file->seek($file->getSize());

$lines = $file->key() - 1;

$file->setFlags(\SplFileObject::READ_CSV);

$counter = 0;
$records = 100;
$seek = $lines - $records;

$file->seek($seek);

$return = array();
while ($counter++ < $records) {
    try {
        $line = $file->fgets();
        $return[] = $line;
    } catch (\Exception $e) {
    }
} 
```

# php - 将 php 文件上传到服务器时，它会删除空格，因此 php 无法正常工作

> ID：15447946
> 
> 赞同：-1
> 
> 时间：2013-03-16T10:03:58.333
> 
> 标签：php, ftp

我实际上正在开发一个新的 wordpress 主题，并在几个网站上使用它，每个网站都在同一台服务器上，但在不同的 cPanel 帐户中。当我在我的 PC 上下载所有文件然后将它们上传回服务器时，就会出现问题。让我们试着更清楚一点，当我将 php 文件下载到我的电脑时，它看起来像这样：

```
<?php 
  // This is my file
  $foo = 4;
//Another comment
$foofighter = 5;
?> 
```

但是当我将它上传到我的服务器时，代码会变成这样：

```
<?php // This is my file$foo = 4;//Another comment$foofighter = 5;;?> 
```

那，显然行不通！

这是我的服务器配置：CENTOS 5.9 i686 标准 – 服务器间 WHM 11.36.0 (build 14)

我在编写新代码时使用 Filezilla 上传文件，使用 Notepad++ 修改和上传文件。

如果我压缩模板并让 WordPress 上传并安装它，我没有问题，所以我认为上传单个文件时会出现问题。

一个快速的解决方法可能是编写如下代码：

```
<?php 
  /* This is my file */
  $foo = 4;
/* Another comment */
$foofighter = 5;
?> 
```

所以“缩小”不会破坏我的代码，但它真的很难做到，因为我有几十个文件。

你有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:08:04.507

[正如@Dcoder](https://stackoverflow.com/users/1233508/dcoder)建议的那样，解决方案非常简单， 将您的 FTP 客户端设置更改为*二进制模式*，您就完成了。

# haskell - 创建引用时在 Haskell 中键入错误

> ID：15447950
> 
> 赞同：2
> 
> 时间：2013-03-16T10:04:13.820
> 
> 标签：haskell

我正在做我的家庭作业，但我遇到了一些事情。

```
> data Channel a = Chan { cap   :: Int 
>                       , queue :: [a]  }

> data FiniteChan a = IORef (Channel a)

> newFiniteChan :: Int -> IO (FiniteChan a)
> newFiniteChan capacity = do x <- newIORef (Chan {cap = capacity, queue = []})
>                             return x 
```

基本上，我想创建一个对`Channel a`何时调用 newFiniteChan 的引用，并且我想`FiniteChan a`指的是该引用（我不能更改 newFiniteChan 的签名）。当我编译这个时，我得到以下错误：

```
final.lhs:235:38:
    Couldn't match expected type `FiniteChan a'
                with actual type `IORef (Channel a0)'
    In the first argument of `return', namely `x'
    In a stmt of a 'do' block: return x
    In the expression:
      do { x <- newIORef (Chan {cap = capacity, queue = []});
           return x } 
```

我花了很多时间来解决问题，但我找不到。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:30:34.393

您必须将构造函数添加到*FiniteChan*数据类型，或将其转换为*类型*别名指令，这样可以编译：

```
import Data.IORef

data Channel a = Chan { cap   :: Int
                      , queue :: [a]  }

data FiniteChan a = FiniteChan (IORef (Channel a))

newFiniteChan :: Int -> IO (FiniteChan a)
newFiniteChan capacity = do
        x <- newIORef (Chan {cap = capacity, queue = []})
        return $ FiniteChan  x 
```

# html - Twitter Bootstrap破坏了div的内容，里面有几个元素

> ID：15447951
> 
> 赞同：1
> 
> 时间：2013-03-16T10:04:18.613
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我正在使用引导程序开发响应式网站。

我有两个容器，它们的内容在调整窗口大小时不想换行。

我目前有这个演示的[小提琴。](http://jsfiddle.net/lharby/23j8F/1/)

我认为在每个新闻项目的父容器上使用 clearfix 会起作用。但是文本在调整大小时会脱离图像。

[你可以在这张图片](https://dl.dropbox.com/u/66584/bs-site.png)中看到这个

有什么线索吗？

这是基本的 css （虽然这一切都在小提琴中）：

```
 /* News items */
.news-item {
    padding:10px 0 10px 10px;
}

 .news-item p {
padding:0;
margin:0;   
}

.news-item img,
.news-item-text {
float:left;
}

.news-item-text {
padding:0 0 0 5px;  
}

.news-heading {
font-size:18px;
 }

 .news-tags {
font-family:ffs-italic;
font-size:12px; 
 } 
```

这是html的顶部：

```
 <div class="row"><!-- breaking and buzzing -->
            <div class="span4"><!-- breaking news -->
                <h2>Breaking</h2>
                <div id="breakingNews" class="rounded clearfix">
                    <div class="news-item clearfix">
                        <a href="">
                            <img src="img/news/sm/sq01.jpg" width="54" height="54" />
                        </a>
                        <div class="news-item-text">
                            <p class="news-heading"><a href="">Omni Scents to launch...</a></p>
                            <p class="news-subheading">At vero eos fragrance line inspired</p>
                            <p class="news-tags"><a href="" class="pink">BEAUTY</a>, <a href="" class="pink">PRODUCTS</a></p>
                        </div>
                    </div>
                    <div class="news-item clearfix">
                        <a href="">
                            <img src="img/news/sm/sq02.jpg" width="54" height="54" />
                        </a>
                        <div class="news-item-text">
                            <p class="news-heading"><a href="">IFF finishes year strong...</a></p>
                            <p class="news-subheading">Lorem ipsum in dolor contratis</p>
                            <p class="news-tags"><a href="" class="orange">INDUSTRY</a></p>
                        </div>
                    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:11:49.083

在这些情况下，您需要浮动 div 并指定 div 的宽度，如下所示：

```
.news-item {
  padding: 10px 0 10px 10px;
  float: left;
  width: 220px;
} 
```

您还需要确定每个`<p>`div 内的宽度，如下所示：

```
.news-item-text {
  padding: 0 0 0 5px;
  width: 160px;
} 
```

对于响应式布局，您需要使用标签`@media`再次设置每个宽度，例如：

```
@media (max-width: 767px) {
  .news-item {
      padding: 10px 0 10px 10px;
      float: left;
      width: 160px;
    }

  .news-item-text {
      padding: 0 0 0 5px;
      width: 100px;
    }
} 
```

我希望它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:35:31.660

```
 .news-item a
     {
      display: block;
      float: left
     }
 .news-item-text
    {
    float: right;
    width: 75%; /* adjust this to fit */
    } 
```

# java - 如果我们在类中有一个私有构造函数会发生什么？

> ID：15447957
> 
> 赞同：-1
> 
> 时间：2013-03-16T10:04:49.140
> 
> 标签：java, jsp, struts2

如果我们在类中有一个私有构造函数会发生什么？（在 Java 中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:25:30.323

这意味着（没有反射）构造函数将无法在您的类之外访问，因此其他类将无法调用它。只有您班级的成员才能创建其对象。

```
class A{
    private A(){} //private constructor

    private static A a = new A(); //you can create A object as a field

    void test(){
        new A(); // you can create A object inside methods of your class
    }

    class Inner{ // inner classes are also members of outer class so you can use 
                 // A constructor here
        A a = new A(); //OK
        void test(){
            new A(); //OK
        }
    }
}

class B{
    A a = new A();//error: we don't have access to A constructor
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T10:08:17.190

您只能在当前类中使用该构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:06:33.970

您将只能从类中的其他构造函数或类中的静态方法调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T10:10:05.010

这通常是限制从此类创建对象的一种方式。这意味着您不能从类中创建对象。

# wpf - Wpf 工具包中的 TimePicker

> ID：15447963
> 
> 赞同：3
> 
> 时间：2013-03-16T10:05:25.130
> 
> 标签：wpf, xaml, wpftoolkit, timepicker

我想要 WPF 中的时间选择器控件。我在这里找到了一个实现。（[http://wpftoolkit.codeplex.com/wikipage?title=TimePicker&referringTitle=Home](http://wpftoolkit.codeplex.com/wikipage?title=TimePicker&referringTitle=Home)）。我已经安装了它。但无法理解如何使用它。我不知道我需要在 XAML 文件中写什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T10:21:14.030

[此处](http://wpftoolkit.codeplex.com/documentation)的链接本身提供了说明。按照这些步骤，你很高兴 -

1.  [首先从这里](http://wpftoolkit.codeplex.com/releases/view/96972)安装二进制文件。

2.  提取 dll`Xceed.Wpf.Toolkit`并在您的项目中添加对此 dll 的引用。

3.  在`XAML`添加命名空间 -`xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"`

`TimePickerControl`4.然后在你的xaml中添加实例-

```
<Grid>
   <xctk:TimePicker Height="30" Width="100" Value="{Binding CurrentDateTime}"/>
</Grid> 
```

在您的视图模型中 -

```
private DateTime currentDateTime = DateTime.Now;
public DateTime CurrentDateTime
{
   get
   {
      return currentDateTime ;
   }
   set
   {
      currentDateTime = value;
   }
} 
```

# c# - 什么是单例类？它是否在 c# 中使用，如果是，那么在哪里以及为什么？

> ID：15447966
> 
> 赞同：1
> 
> 时间：2013-03-16T10:05:38.807
> 
> 标签：c#, asp.net, .net, oop

单例类的概念让我抓狂。什么是单例类，为什么要使用它？是否有必要使用单例类？我实际上对单例类了解不多，只是“它是一个对象只初始化一次的类”。static 和 readOnly... blaw blaw ... 单例类的概念到底是什么？每当我研究单例类时，我都会到处看到这段代码。

```
public class Singleton
{
    private static Singleton instance;

    private Singleton() { }

    public static Singleton Instance
    {
        get
        {
            if (instance == null)
                instance = new Singleton();
            return instance;
        }
    }

    //instance methods
} 
```

请帮助我理解 OOP 中的单例类或单例概念。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:10:26.293

单例模式的思想是只存在一个实例。

一个使用示例是您拥有使用远程服务的许可，但在任何时候只能进行有限数量的查询。单例的客户端可以自由地发出请求，而不必担心过度调用服务器的许可影响，并且单例管理将操作放入队列并确保满足许可条款。而且因为只能有一个单例，所以您一定不会违反许可条款。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:17:38.867

单例模式是一种将类的实例化限制为一个对象的设计模式。当需要一个对象来协调整个系统的动作时，这很有用。

示例：如果你的类有一个 int 索引。查看 obj3 中 index 的值

```
 NonSingleton obj1 = new NonSingleton();//obj1.index = 0
        NonSingleton obj2 = new NonSingleton();//obj2.index = 0
        obj2.index = 11;
        NonSingleton obj3 = new NonSingleton();//obj3.index = 0

        Singleton obj1 = Singleton.Instance;//obj1.index = 0
        Singleton obj2 = Singleton.Instance;//obj2.index = 0
        obj2.index = 11;
        Singleton obj3 = Singleton.Instance;//obj3.index = 11 
```

此外，单例允许访问单个创建的实例——该实例（或者更确切地说，对该实例的引用）可以作为参数传递给其他方法，并被视为普通对象。

静态类只允许静态方法。

# mapreduce - 如何编写 CouchDb 视图？

> ID：15447968
> 
> 赞同：3
> 
> 时间：2013-03-16T10:06:08.200
> 
> 标签：mapreduce, couchdb

我的 couchDB 数据库中有此类文档的列表。

```
{
   "_id": "9",
   "_rev": "1-f5a9a0b76c6ae1fe5e20f1a1f9e6f8ba",
   "Project": "Vaibhava",
   "Type": "activity",
   "Name": "Civil_Clearence",
   "PercentComplete": "",
   "DateAndTime": "",
   "SourcePMSId": "1049",
   "ProgressUpdatedToPMSFlag": "NO",
   "UserId": "Kundan",
   "ParentId": "5"
} 
```

如何编写一个视图函数，以便当我将 a`doc._id`作为密钥传递时，我必须获取它的所有兄弟姐妹`doc._id`（ParentId 与我发送的密钥相同的文档）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:41:37.920

正如另一个答案中所说，不可能通过单个请求来做到这一点。

但是，您可以改为执行以下操作：

1.  定义索引的地图（没有减少）视图`ParentID`：

    ```
    function(o) {
      if (o.ParentID) {
        emit(o.ParentID);
      }
    } 
    ```

2.  向您的对象发送第一个请求以了解其父对象的 ID：

    ```
    GET /myDatabase/myObject 
    ```

3.  然后向您的视图发送请求

    ```
    GET /myDatabase/_design/myApp/_view/myView/?key="itsParent"&include_docs=true 
    ```

有几个请求在这里应该不会造成太大的伤害，因为它们的数量 (2) 是恒定的。此外，您可以将它们隐藏在 NodeJS 处理的单个请求后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:10:46.587

不幸的是，您需要将两个 map-reduce 函数链接在一起才能实现此结果，而 CouchDB 中没有该功能。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/4011434/can-i-query-a-view-in-couchdb-using-mapreduce)。

# c++ - 如何初始化动态成员变量？

> ID：15447970
> 
> 赞同：0
> 
> 时间：2013-03-16T10:06:09.987
> 
> 标签：c++, dynamic, struct

我想将结构的动态数组作为成员变量存储在另一个结构中。这是使用我在 main 中给出的示例的构造函数的正确方法吗？

**编辑** 我纠正了我在代码中的一些明显错误（当时是早上 6 点）。我还向 B 添加了另一个成员，以查看 push_back 是否仍然正确。我知道使用动态内存的向量会更轻松，但我需要这样做，因为这些结构最终要与推力::device_vector 一起使用。

```
struct A
{
    float mem1;
    int mem2;
};
struct B
{
    A * Aarr1;
    A * Aarr2;
    B(A * a1, A * a2): Aarr1(a1), Aarr2(a2){}
};
int main()
{
    A * test = new A[5];
    A * test2 = new A[10];
    vector<B> btest;
    btest.push_back(B(test, test2));
    for(int i=0; i<5; i++)
        printf("mem1: %f, mem2: %i \n", btest[0].Aarr[i].mem1, btest[0].Aarr[i].mem2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:09:01.120

单独来看，构造函数很好。但是，代码还有许多其他问题。

就目前而言，您的代码正在泄漏内存，因为该数组从未被释放。

您可能需要考虑从使用 C 数组转移到`std::vector`或`std::array`.

`printf()`（误拼为`print()`）中还有一个错误：两者之一`mem1`应该是`mem2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T10:11:45.703

的构造函数`B`是可以的，但是你调用的方式`push_back()`不是：

```
btest.push_back(B(A)); 
```

你应该做这个：

```
btest.push_back(B(test)); 
```

`B`此外，不需要显式构造对象，因为您的构造函数未标记为`explicit`：

```
btest.push_back(test); 
```

还要考虑使用自动内存管理而不是原始指针（`std::vector<>`而不是数组，智能指针而不是指针）。这样，您将避免由于忘记这一点而导致内存泄漏：

```
delete test; 
```

撇开泄漏不谈，最糟糕的是你的代码也有未定义的行为，因为它使用了未初始化变量的值（循环`A`内的成员变量）。`for`

最后，你不应该`:`在类定义中使用 after 类名。这就是您可以在 C++11 中重写代码的方式：

```
#include <vector>
#include <cstdio>

struct A // Do not use ":" here, that's for introducing inheritance,
         // which you are not using in your example.
{
    float mem1 = 0.0; // In C++11, you can specify default initialization
    int mem2 = 0;     // for your member variables this way. In C++03 you
                      // would have to define a default constructor which
                      // initializes your member variables to the desired
                      // value.
};

struct B
{
    std::vector<A> Aarr;
//  ^^^^^^^^^^^^^^
//  Prefer using standard containers over dynamically allocated arrays, as
//  it saves your from taking care of memory management and avoids leaks.

    explicit B(size_t s): Aarr(s) { }
//  ^^^^^^^^
//  It is usually a good idea to mark constructors which take on argument
//  and are not copy constructors as explicit, to avoid awkward implicit
//  conversions.
};
int main()
{
    std::vector<B> btest;
    btest.push_back(B(5));
//                  ^^^^
//                  We need to explicitly construct an object of type B,
//                  because we have marked B's constructor as explicit.

    for(int i=0; i<5; i++)
    {
        std::printf(
             "mem1: %f, mem2: %i \n", 
            btest[0].Aarr[i].mem1, 
            btest[0].Aarr[i].mem2
            //                  ^
            //                  You had "mem1" here.
            );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:13:33.273

您的代码中几乎没有小错误和拼写错误。它应该如下所示：

```
struct A  // <-- no ':' after name type
{
    float mem1;
    int mem2;
};

struct B  // <-- no ':' after name type
{
    A * Aarr;
    B(A * a): Aarr(a){}
};

int main()
{
    A * test = new A[5];
    vector<B> btest;
    btest.push_back(B(test)); // <-- test, A is name of type
    for(int i=0; i<5; i++)
        printf("mem1: %f, mem2: %i \n", // <-- printf, not print
                btest[0].Aarr[i].mem1, btest[0].Aarr[i].mem1);
} 
```

还可以考虑使用`std::vector`or`std::array`代替 C 样式的数组。

# android - 从 ViewPager 的其他片段获取edittext数据

> ID：15447971
> 
> 赞同：1
> 
> 时间：2013-03-16T10:06:11.013
> 
> 标签：android, android-fragments

我正在使用`ViewPager`and创建滑动窗口效果`FragmentPagerAdapter`。我有三个片段，一次只能看到一个。所有的片段都有一些`EditText`观点。我想在单击菜单按钮时访问所有`Fragment`s （如果已创建）的编辑文本框值。`Fragment`

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T03:52:30.713

只需向 Fragment 子类添加一个返回 EditText 值的公共方法（不要忘记考虑 EditText 未初始化的时间）。

# c# - ListBox 数据源在第一次单击时未更新

> ID：15447973
> 
> 赞同：0
> 
> 时间：2013-03-16T10:06:16.583
> 
> 标签：c#, winforms, ms-access, listbox, datasource

我创建了一个将数据从 ms access 数据库加载到我的列表框的 winform 程序。当我单击要在列表框上的数据库和数据源上更新的项目并单击更新按钮时，第一次单击该项目不会更新，但第二次会更新（在同一项目上），所以每次我都需要修改我的数据我需要选择我的项目并单击更新按钮两次。这太疯狂了，哈哈。

```
private void buttonUpdate_Click(object sender, EventArgs e)
    {
        //update the database
        OleDbDataAdapter cmd = new OleDbDataAdapter();
        cmd.UpdateCommand = new OleDbCommand("UPDATE Item SET ITEM = @ITEM, ITEM_DESC = @ITEM_DESC WHERE ID = @ID",GetConnection());
        cmd.UpdateCommand.Parameters.AddWithValue("@ITEM", textBoxITEM.Text);
        cmd.UpdateCommand.Parameters.AddWithValue("@ITEM_DESC", textBoxITEMDESC.Text);
        cmd.UpdateCommand.Parameters.AddWithValue("@ID", Convert.ToInt32(textBoxID.Text));
        cmd.UpdateCommand.ExecuteNonQuery();

        // update the datasource
        _productlist.Clear();
        listBox1.DataSource = null;
        listBox1.Items.Clear();
        Fill();
        listBox1.Update();
    } 
```

发生的基本情况：

1.  通过数据绑定到文本框将数据加载到列表框
2.  单击我的列表框上的项目并从文本框中修改数据
3.  单击更新按钮以更新数据库和数据源
4.  数据源第一次没有更新，但数据库确实更新了
5.  重复 2 号
6.  重复 3 号
7.  数据源已更新

我想要的是：

1.  通过数据绑定到文本框将数据加载到列表框
2.  单击我的列表框上的项目并从文本框中修改数据
3.  单击更新按钮以更新数据库和数据源
4.  数据源和数据库已更新

如何在我的应用程序中修复此错误？如果我需要更清楚，请告诉我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:27:17.437

我只是改变这个

```
// update the datasource
_productlist.Clear();
listBox1.DataSource = null;
listBox1.Items.Clear();
Fill();
listBox1.Update(); 
```

到这个..

```
// update the datasource
_productlist.Clear();
listBox1.DataSource = null;
System.Threading.Thread.Sleep(500);
Fill(); 
```

# android - Android-自定义imageButton返回视图没有额外的字段

> ID：15447975
> 
> 赞同：0
> 
> 时间：2013-03-16T10:06:37.607
> 
> 标签：android, imagebutton

在我的 android 应用程序中，我构建了一个带有额外字段的自定义 imageButton：

```
public class MyImageButton extends ImageButton {

private String _absolutePath;

public MyImageButton(Context context, String absolutePath) { 
    super(context);
    this.setOnClickListener(clicker);
    this.set_absolutePath(absolutePath);
} 
```

...}

（我添加了所有需要的构造函数，它编译得很好）。

此 imageButton 的 XML 是：

```
 <my.package.MyImageButton
        android:id="@+id/imageButton3"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:onClick="imageButtonPressed" /> 
```

问题是当点击ImageButton时，方法：

```
public void imageButtonPressed(View view) {

    Toast.makeText(this, ((MyImageButton)view).get_absolutePath(), 1).show();

} 
```

**MyImageButton 中的 _absolutePath 字段为空。** 我认为问题出在转换（转换）和原始视图调用的本机方法中，我不知道如何解决它。

提前致谢！

# c++ - WinPCAP C++ 发送数据包

> ID：15447980
> 
> 赞同：2
> 
> 时间：2013-03-16T10:06:50.560
> 
> 标签：c++, c, tcp, winpcap

所以，我想通过使用 pcap_sendpacket 通过 TCP 发送数据包

```
TCP_Packet.Set_Ethernet_Source_MAC(1, 1, 1, 1, 1, 1);
TCP_Packet.Set_Ethernet_Destination_MAC(2, 2, 2, 2, 2, 2);
TCP_Packet.Set_Ethernet_Type(0x0800);
TCP_Packet.Set_IPv4_Version(4);
TCP_Packet.Set_IPv4_IHL(5);
TCP_Packet.Set_IPv4_ToS(0);
TCP_Packet.Set_IPv4_Total_Length(sizeof(IPv4_Address_s) + sizeof(TCP_s));
TCP_Packet.Set_IPv4_Identification(2);
TCP_Packet.Set_IPv4_Flag(0);
TCP_Packet.Set_IPv4_Offset(0);
TCP_Packet.Set_IPv4_Live_Time(0x80);
TCP_Packet.Set_IPv4_Protocol(0x06);
TCP_Packet.Set_IPv4_Checksum(0);
TCP_Packet.Set_IPv4_Destination_Address(192, 168, 1, 2);
TCP_Packet.Set_IPv4_Source_Address(192, 168, 1, 2);

TCP_Packet.Set_TCP_Destination_Port(45578); //In method is htons
TCP_Packet.Set_TCP_Source_Port(45578); //In method is htons
TCP_Packet.Set_TCP_Sequence_Number(0);
TCP_Packet.Set_TCP_Acknowledgment_Number(0);
TCP_Packet.Set_TCP_Flag_SYN(1);
TCP_Packet.Set_TCP_Offset(5);
TCP_Packet.Set_TCP_Window_Size(64240);
TCP_Packet.Set_TCP_Checksum(0);
TCP_Packet.Set_TCP_Urgent_Pointer(0);
if (FAILURE == TCP_Packet.Send_Packet(Capture_Instance)) //Here is all good
{
    cerr << "Can't send packet: " << pcap_geterr(Capture_Instance) << endl;
    return FAILURE;
}
else
    cout << "Sended" << endl; 
```

问题：它似乎不起作用。服务器也没有检测到端口 45578 和wireshark 上的任何数据包，但它应该可以工作。

# javascript - 点击后如何隐藏子菜单

> ID：15447981
> 
> 赞同：0
> 
> 时间：2013-03-16T10:06:54.527
> 
> 标签：javascript, jquery, css

我正在为移动网站创建一个下拉菜单

[http://gthost.dyndns.org/kudu/en/](http://gthost.dyndns.org/kudu/en/)

当我点击**我的帐户**并点击**我们是谁时**，子菜单仍然显示，，

我想在点击链接后隐藏它。

这是 JavaScript 代码

```
var $j = jQuery.noConflict();
$j(document).ready(function () {
   $j(".account").click(function () {
      var X = $j(this).attr('id');

      if (X == 1) {
         $j(".submenu").hide();
         $j(this).attr('id', '0');
      } else {

         $j(".submenu").show();
         $j(this).attr('id', '1');
      }

   });

   //Mouseup textarea false
   $j(".submenu").mouseup(function () {
      return false
   });
   $j(".account").mouseup(function () {
      return false
   });

   //Textarea without editing.
   $j(document).mouseup(function () {
      $j(".submenu").hide();
      $j(".account").attr('id', '');
   });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:41:08.063

这里有两件事让我觉得很奇怪。

*   为什么您的 ID 是整数 - 有效名称以`[a-z_]`etc开头。
*   为什么要换身份证？ID 是唯一的标识符，只要元素存在就应该持续存在。如果您希望在元素本身中存储有关元素状态的信息，那么也许可以查看[数据属性](http://ejohn.org/blog/html-5-data-attributes/)。

如果没有看到您的 HTML 结构，每个人都会猜测，而不是您尝试对 ID 进行的任何操作，看起来您可以在逻辑上使用`jQuery.toggle`：

```
$j(".account").click(function(){
     $j(".submenu").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:12:56.950

我会尝试使用：

```
$('.submenu').css({display:"none"}); 
```

而不是 .hide();

# linux - 使用 linux 从网站下载批处理文件

> ID：15447982
> 
> 赞同：0
> 
> 时间：2013-03-16T10:06:56.810
> 
> 标签：linux, batch-file, download

我想从网站下载一些文件（大约 1000-2000 个 zip 文件）。我可以坐下来一个接一个地添加每个文件。请给我一个程序或脚本或任何方法，以便我可以自动下载。

我正在谈论的网站的下载链接为

> sitename.com/sometetx/date/12345/folder/12345_zip.zip

日期可以照顾。主要关注的是文件夹前后的数字12345，它们同时更改。例如

> sitename.com/sometetx/date/23456/folder/23456_zip.zip sitename.com/sometetx/date/54321/folder/54321_zip.zip

我尝试使用卷曲

> sitename.com/sometetx/date/[12345-54321]/folder/[12345-54321]_zip.zip

但它使下载的大部分组合保持原样，即保持左 12345 并扫描 12345 到 54321，增量左 12345 +1 然后从 [12345-54321] 重复扫描。

还尝试了 bash wget 这里我在两个地方有一个变量，当使用循环时，程序会忽略带有“_”的右侧 12345。请帮助我，我不太了解 linux 或编程，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:10:29.733

为了让你的循环变量`_`不会被shell忽略，请将其放在引号中，如下所示：

```
$ for ((i=10000; i < 99999; i++)); do \ 
    wget sitename.com/sometetx/date/$i/folder/"$i"_zip.zip; done 
```

# android - 如何在android中刷新列表视图？

> ID：15447983
> 
> 赞同：0
> 
> 时间：2013-03-16T10:07:06.007
> 
> 标签：android, listview

我使用`ListView`了添加和删除选项，但是当我单击删除按钮时，数据库值被删除但`ListView`没有刷新。我放了

```
adapter.notifyDataSetChanged(); 
```

但列表不会刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:20:54.443

试试这个，`adapter.notifyDataSetChanged()`在里面打电话`runOnUiThread`。

```
YourActivity.this.runOnUiThread(new Runnable() {
 @Override
 public void run() {
 adapter.notifyDataSetChanged();
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:08:44.050

UI 在主线程之外更新。把所有的逻辑放在一个里面，`asynctask`然后在执行后，调用`adapter.notifyDataSetChanged();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:12:37.327

您必须调用`.invalidate();`ListView 来告诉框架该视图已过时并且应该重绘！

# java - 如何在java中解析json？

> ID：15447984
> 
> 赞同：-4
> 
> 时间：2013-03-16T10:07:14.123
> 
> 标签：java, json

我是java的新手。谁能帮助我如何解析以下 json 。我想从下面的代码中获取数据 ID：

```
{"room": {"id": "3","temp": "29"}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:09:49.283

我用[GSON](http://code.google.com/p/google-gson/)效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:10:18.097

看看[Java 中的 JSON](http://json.org/java/)。它可以帮助您将 JSON 字符串转换为 java 对象，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:14:39.543

我用过 GSON [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)我相信它是最好的，

首先，您创建一个类来保存您的 JSON 结构

```
Class Room {
    int id;
    int temp;
} 
```

然后你把你的字符串解析成这样的json

```
Gson gson = new Gson();
Room room = gson.fromJson(jsonString, Room.class); 
```

# extjs - 当我将应用程序上传到服务器时，关联在 extjs4 中不起作用？

> ID：15447987
> 
> 赞同：1
> 
> 时间：2013-03-16T10:08:05.953
> 
> 标签：extjs, extjs4, associations, extjs4.1, extjs-mvc

我正在使用 extjs4 MVC。我一直在处理关联问题。当我在我的系统本地端使用时，关联工作正常。但是当我将它上传到服务器端时，关联的数据没有显示。我正在尝试很多但没有得到答案这个冲突是如何发生的。我的应用程序在客户端正常工作。它也显示关联数据。但是当我将数据上传到服务器端时，它不会显示关联数据。

这是我的应用程序在本地工作的某些部分：-

![在当地工作](../Images/be73121913af396a50de510adfbff0b3.png)

但是当我将我的一侧上传到服务器端时，这些选项意味着不显示相关数据 ![在此处输入图像描述](../Images/1e09af5449a023b045daaf0a441db952.png)

这是我的一些代码：-

1) 模型类：--

```
 Ext.define('B.model.kp.PollModel',{
    extend: 'Ext.data.Model',
    idproperty:'',//fields property first position pk.
    fields: ['pollId','pollQuestion','isActive','pollTypeId','createDate','userId','publishDate','isPublished','approvalUserId','percentagevotes','optionId'],
    hasMany:{
        model:'B.model.kp.PolloptionModel',
        foreignKey:'pollId',
        name:'options',
    },
    proxy:
    {
        type:'ajax',
        api:
        {
            read:'index.php/KnowledgePortal/Poll/GetPublicPoll',
            create:'index.php/KnowledgePortal/Pollvote/setPollVote',
        },//End of api 
        reader:
        {
            type:'json',
            root: 'polls',
            //successProperty: ,
        },//End of reader
        writer:
        {
            type:'json',
            root: 'records',
            //successProperty: ,
        },
    }//End of proxy
}); 
```

2）商店类：--

```
Ext.define('B.store.kp.PollStore',{
    extend: 'Ext.data.Store',
    model: 'B.model.kp.PollModel',
    autoLoad: true,
});//End of store 
```

3）查看类：--

```
Ext.define('B.view.kp.poll.PollView',{
    extend:'Ext.view.View',
    id:'pollViewId',
    alias:'widget.PollView',
    store:'kp.PollStore',
    config:
    {
        tpl:'<tpl for=".">'+
        '<div id="main">'+
        '</br>'+
        '<b>Question :-</b> {pollQuestion}</br>'+
        '<tpl for="options">'+     
            '<p>{#}.<input type="radio" name="{parent.pollId}" value="{optionId}">&nbsp{option}</p>'+
        '</tpl></p>'+
        '</div>'+
        '</tpl>',
        itemSelector:'div.main',    
    },
});// End of login class 
```

4）这是我的主要视图类

```
Ext.define('B.view.kp.poll.Poll',{
    extend:'Ext.form.Panel',
    requires:[
              'B.view.kp.poll.PollView'
              ],
              id:'pollId',
              alias:'widget.Poll',
              title:'Poll',
              //height:180,
              items:[
                     {
                         xtype:'PollView',
                     },
                     ],//end of items square
                     buttons:[
                              {
                                  disabled:true,
                                  name:'vote',
                                  formBind:true,
                                  text:'vote',
                                  action:'voteAction'
                              },
                              {
                                  text:'result',
                                  action:'resultAction',      
                              }
                              ]
}); 
```

5) 这里是 json 文件——

```
{   
    'polls': [
        {
            "pollId": 1,
            "pollQuestion": 'Who will win the match',
            "options": [
                {

                    "optionId":1,
                    "option":'India',
                    "pollId":1
                },
                {

                    "optionId": 2,
                    "option": 'Pakistan',
                    "pollId":1
                },
                {

                    "optionId": 3,
                    "option": 'Srilanka',
                    "pollId":1
                },
                {
                    "optionId": 4,
                    "option": 'Australia',
                    "pollId":1
                },
            ],
        }
    ]
} 
```

6) PollOption 模型类：--

```
Ext.define('B.model.kp.PolloptionModel',{
    extend: 'Ext.data.Model',
    //idproperty:'',//fields property first position pk.
    fields: ['optionId','option','pollId','percentagevotes'],
    associations:[
    {type:'HasMany',    model:'Pollvotemodel',  foreignKey:'optionId'},
    {type:'BelongsTo',  model:'PollModel',  foreignKey:'pollId'},
    ]
}); 
```

请有人给我一些建议来解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:23:53.227

您确定您的服务器端数据馈送与您的本地数据馈送*完全相同。*

相关问题是否输入实时数据库？

# netbeans - 如何在 netbeans 中使用 git reset？

> ID：15447988
> 
> 赞同：3
> 
> 时间：2013-03-16T10:08:10.000
> 
> 标签：netbeans, git-reset

我想撤消我在 NetBeans 中的最后一次提交。

我发现命令是“$ git reset --soft HEAD~”，但我怎样才能在 NetBeans7 IDE 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T19:08:35.740

*   使用主菜单：Team -> Git -> Reset... (NB 7.3.x) 或
*   使用主菜单：Team -> Git-> Revert/Recover-> Reset...（或使用上下文菜单）（NB 7.4）

# sql - 我如何从两个表中显示如下所示的数据

> ID：15447989
> 
> 赞同：-3
> 
> 时间：2013-03-16T10:08:14.677
> 
> 标签：sql, database, oracle10g

我想显示两个表中的数据，员工和部门。它必须显示部门详细信息，然后显示与该部门相关的所有员工。这就是我想要显示的方式：

```
 DEPTNO DNAME            LOC           
---------- -------------- ------------- 
        10 ACCOUNTING     NEW YORK      
     EMPNO ENAME
---------- ----------
      7782 CLARK
      7839 KING
      7934 MILLER

        20 RESEARCH       DALLAS        
     EMPNO ENAME
---------- ----------
      7369 SMITH
      7566 JONES
      7788 SCOTT
      7876 ADAMS
      7902 FORD

        30 SALES          CHICAGO       
     EMPNO ENAME
---------- ----------
      7499 ALLEN
      7521 WARD
      7654 MARTIN
      7698 BLAKE
      7844 TURNER
      7900 JAMES 
```

附录

```
SQL> select * from emp;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM     DEPTNO
---------- ---------- --------- ---------- --------- ---------- ---------- ----------
      7369 SMITH      CLERK           7902 17-DEC-80        800                    20
      7499 ALLEN      SALESMAN        7698 20-FEB-81       1600        300         30
      7521 WARD       SALESMAN        7698 22-FEB-81       1250        500         30
      7566 JONES      MANAGER         7839 02-APR-81       2975                    20
      7654 MARTIN     SALESMAN        7698 28-SEP-81       1250       1400         30
      7698 BLAKE      MANAGER         7839 01-MAY-81       2850                    30
      7782 CLARK      MANAGER         7839 09-JUN-81       2450                    10
      7788 SCOTT      ANALYST         7566 19-APR-87       3000                    20
      7839 KING       PRESIDENT            17-NOV-81       5000                    10
      7844 TURNER     SALESMAN        7698 08-SEP-81       1500          0         30
      7876 ADAMS      CLERK           7788 23-MAY-87       1100                    20

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM     DEPTNO
---------- ---------- --------- ---------- --------- ---------- ---------- ----------
      7900 JAMES      CLERK           7698 03-DEC-81        950                    30
      7902 FORD       ANALYST         7566 03-DEC-81       3000                    20
      7934 MILLER     CLERK           7782 23-JAN-82       1300                    10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:14:40.793

SQL 旨在检索基于集合的原始数据，而不是以那种格式呈现。您能做的最好的事情就是以正确的顺序获取数据 -

```
SELECT
  DEPTNO,
  DEPT.LOC,
  EMPNO,
  ENAME
FROM EMP INNER JOIN DEPT
  ON EMP.DEPTNO=DEPT.KEY-FIELD
ORDER BY 1,3 
```

..然后使用一些报告工具将其分成几个部分。

（我希望那是虚拟的测试数据，而不是真实的工资信息：）