# StackOverflow 问答 13473000-13473999

# java - 注释资源以生成 JSON，但在响应标头中返回“text/plain”

> ID：13473000
> 
> 赞同：6
> 
> 时间：2012-11-20T12:14:11.707
> 
> 标签：java, json, spring, jersey, cors

我目前正在实现一个 Web API

*   春天
*   球衣
*   com.thetransactioncompany.cors [http://software.dzhuvinov.com/cors-filter.html](http://software.dzhuvinov.com/cors-filter.html)

输出（如果有）将是 JSON，因此我的所有类都使用预期的媒体类型进行了注释。

```
@Produces(MediaType.APPLICATION_JSON)
public class CustomerResource {
    ...
} 
```

这样我的课程就会自动转换为*json*。

但...

由于微软，他们的 IE 只支持 CORS，如果请求/响应类型是*text/plain* [http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-变通办法.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

```
4\. Only text/plain is supported for the request's Content-Type header 
```

所以我需要强制我的应用程序在标题中使用*text/plain进行响应，但仍将我的类投影到**json*输出。我知道我添加的 CORS 类正在设置该标头，但不知何故，我的注释再次覆盖了它，即使我自己添加了另一个过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:44:08.953

嗯，你指向的链接说它只适用于**请求**。因此，您只能接受纯文本，但可以自由生成您想要的任何内容。

**编辑**尝试使用类似的代码注册一个自定义响应过滤器（也许你已经这样做了？）：

```
@Provider
public class HeaderRewriteFilter implements ContainerResponseFilter {
   @Override
   public ContainerResponse filter(ContainerRequest request, ContainerResponse response)  {
     response.setResponse(Response
                .fromResponse(response.getResponse()).header(HttpHeaders.CONTENT_TYPE, "text/plain").build());
             return response;
  }
} 
```

但是，请检查结果以确保响应已包含此标头是否正常。否则，您可以尝试修改当前响应，但我不确定您是否可以，因为它可能是一个不可变对象。顺便说一句，它对我来说看起来不那么干净:)

```
List<Object> contentTypes = response.getHttpHeaders().get(HttpHeaders.CONTENT_TYPE);
contentTypes.clear();
contentTypes.add("text/plain"); 
```

此外，对于 json<>java 数据，您可以查看 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)，它与 Jersey 很好地集成。只需将 jar 放在类路径中并运行！

**编辑 2**好的，那么您必须以另一种方式执行此操作，使用生成“text/plain”并为该类型定义一个 json bodywriter。缺点是您将只能生成 json。使用 Genson，您可以这样做：

```
@Provider
@Produces({ MediaType.TEXT_PLAIN })
public class PlainTextJsonConverter extends GensonJsonConverter {
    public GensonJsonConverter() {
       super();
    }

    public GensonJsonConverter(@javax.ws.rs.core.Context Providers providers) {
       super(providers);
    }
} 
```

# php - 将带双引号的变量传递给javascript

> ID：13473002
> 
> 赞同：0
> 
> 时间：2012-11-20T12:14:18.947
> 
> 标签：php, javascript, string, codeigniter

在我的控制器中，我有一个来自数据库的字符串。我用

```
$user_id = $this->input->post('user_id');

$this->load->model('database','', TRUE);

$projects = $this->database->get_projects($user_id);

    foreach($projects as $project)
    {

        echo '  <div onclick="someFunction(\''.$project['description'].'\')"></div>';
    } 
```

将值传递给 Javascript。一切正常，除非字符串中有双引号。萤火虫投掷

> 未终止的字符串文字

我试过了：

```
onclick = "someFunction(\''.addslashes($project['description']).'\')" 
```

或者

```
$description = str_replace('"', '&quot;', $project['description']);
onclick = "someFunction(\''.$description.'\')"; 
```

但它没有用。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:24:11.727

尝试：

```
onclick = someFunction(<?php echo '"'.$myVariable.'"'; ?>); 
```

你不能引用参数的括号......这是全局的，不仅适用于JS。

要将 PHP 与 js 或 html 混合，只需在需要的地方使用 echo 即可。如果你想要更简洁的代码，或者谷歌搜索 MVC 模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:47:48.140

我认为您可以做的最好的事情是创建一个包含此代码的视图：

```
<div onclick="someFunction('<?php echo $project['description'] ?>')"></div> 
```

并在您的控制器中调用它。最终，您可以使用 php 函数[addlashes()](http://php.net/manual/en/function.addslashes.php)来引用字符串/字符。

如果您需要将此 html 存储在控制器中的变量中，您可以简单地使用第三个参数调用视图；它在[这里](http://codeigniter.com/user_guide/general/views.html#footer)解释。

更新：尝试使用[htmlentities](http://php.net/manual/it/function.htmlentities.php)而不是添加斜杠

# c# - 字符串类行为

> ID：13473010
> 
> 赞同：1
> 
> 时间：2012-11-20T12:14:48.983
> 
> 标签：c#, .net, oop

```
 public void main()
   {    
    string test = "testing";
    ChangeVal(test);
    Console.WriteLine(test);
   }
private void ChangeVal(string test)
{
    test = "in child";
} 
```

如果 String 是一个类。我将字符串作为参数传递给函数。在函数中更改该字符串的值。但在 main 函数中，它显示了以前的值。它将打印测试值。

当我创建具有 2 个成员变量整数和字符串的 Foo 类时。当我将类的对象作为参数传递并更改函数中成员变量的值时。它将在主函数中给出更新的值

```
public class Foo
{
    public string test = "testing";
    public int i = 5;

}

public void main()
{
        Foo obj=new Foo();
        Console.WriteLine(obj.test);
        ChangeVal(obj);
        Console.WriteLine(obj.test);
}

private void ChangeVal(Foo obj)
{
    obj.test = "in child";
    obj.i = 5;
} 
```

如果字符串是类。它将更新变量的值。May string 是 Unicode 字符的序列，这就是它在第一种情况下不更新值的原因。任何机构都可以详细解释这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:17:23.747

> 在函数中更改该字符串的值

字符串是不可变的。您不能更改字符串的值。您可以将另一个字符串分配给同一个引用，但您需要使用[`ref`](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx).

```
public void main()
{    
  string test = "testing";
  ChangeVal(ref test);
  Console.WriteLine(test);
}

private void ChangeVal(ref string test)
{
    test = "in child";
} 
```

但是，您`Foo`的类是可变的，因此您可以为其成员分配不同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T12:18:26.963

尝试通过引用传递参数以在主线程中更新 var：

```
private void SeString(ref string chain)
        {
            chain="new string";

        } 
```

然后调用：

```
string variable="hello";
SeString(ref  variable); 
```

字符串输出是“新字符串”

# php - 如何在时间戳字段中设置日期和时间格式

> ID：13473014
> 
> 赞同：0
> 
> 时间：2012-11-20T12:14:53.247
> 
> 标签：php, mysql, date, timestamp

> **可能重复：**
> [如何格式化从数据库接收到的日期和时间](https://stackoverflow.com/questions/3632747/how-do-i-format-the-date-and-time-that-is-received-from-database)

[代码的输出](https://i.stack.imgur.com/jUo7A.jpg)

我想只在“In Comming Date”列中显示日期，并且只在“In Comming Time”中显示时间我的代码是任何人都可以帮助我，我是新手

```
$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password)
or die("Opps some thing went wrong");
mysql_select_db($mysql_database, $bd) or die("Opps some thing went wrong");
$sql="SELECT * FROM `hr_inout_time` WHERE user_id='$login_id'";
$result = mysql_query($sql) or die(mysql_error());
echo "<table align='center' border='1' cellspacing='5'  width='50%' height='50%'>
<th>In Comming Date</th> 
<th>In Comming Time</th> 
";
while($row=mysql_fetch_array($result)) {

    $in_time=$row["user_in_time"];
    $time_date =$row["time_date"];
    echo "<tr>
            <td align='center'>$time_date</td> 
             <td align='center'>$in_time</td> 
         </tr>";
    }
echo('</table>');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:18:24.067

简短的回答 - 替换：

```
<td align='center'>$time_date</td> 
<td align='center'>$in_time</td> 
```

和

```
<td align='center'>".explode(" ",$time_date)[0]."</td> 
<td align='center'>".explode(" ",$in_time)[1]."</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:24:00.960

您可以使用 SQL 完成这一切，因此您不需要在 PHP 脚本中进行转换。由于您的日期看起来存储为 DATETIME 值，因此您可以使用 DATE() 和 TIME() 函数仅返回值的那些部分

```
$sql = "SELECT hr_inout_time.*, 
  DATE(hr_inout_time.time_date) as time_date, 
  TIME(hr_inout_time.user_in_time) as user_in_time 
FROM `hr_inout_time` 
WHERE user_id='$login_id'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:17:54.813

改变

```
$in_time=$row["user_in_time"];
$time_date =$row["time_date"]; 
```

至

```
$in_time = date('H:i', strtotime($row["user_in_time"]));
$time_date = date('d F Y', strtotime($row["time_date"])); 
```

更改`H:i`为`d F Y`您喜欢的日期/时间格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:33:54.463

```
$in_time = $row["user_in_time"];

$time_date = $row["time_date"]; 
```

至：

```
$in_time = date('H:i:s', strtotime($row["user_in_time"]));

$time_date = date('Y-m-d', strtotime($row["time_date"])); 
```

# jquery - 如何处理 Jquery $.getJSON 回调中的 HTTP 303？

> ID：13473018
> 
> 赞同：0
> 
> 时间：2012-11-20T12:15:11.170
> 
> 标签：jquery, ajax, redirect, getjson, logout

如果我的 webapp 收到来自由于不活动而拥有过期 cookie 的用户的 JSON 调用，我的 webapp 的框架将返回 303 尝试将浏览器重定向到登录页面。

我想在我的回调函数中捕获它，但在遇到重定向时它似乎没有执行。如何处理 JQuery ajax 调用中的重定向？如果用户在注销后尝试进行 JSON 调用，我只是想刷新页面，因为默认情况下这会将用户重定向到登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:39:36.960

@esailija 的解决方案有效，因此他们不必删除它：

```
function myfunc(){
    $.getJSON('serverJSONCall',function(data){
        if(data.success){
            // do something interesting
    }).error( function() {
        location.reload();
    });
} 
```

# thrift - Thrift Server - Scribe Stream Read

> ID：13473019
> 
> 赞同：0
> 
> 时间：2012-11-20T12:15:11.830
> 
> 标签：thrift, scribe

我想构建一个节俭的服务器，它将自己伪装成一个 Scribe 服务器，并根据日志中存在的信息从不同的盒子中读取所有内容，发送警报或执行某些操作。

有没有适合我要求的可用项目？如果我必须从头开始编写它，我将如何读取服务器中的日志行？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T06:50:24.823

从头开始写，效果很好。只需更改 Python thrift 代码以侦听 scribe 的转发器并相应地处理它。由于两者都使用相同的协议，因此并不麻烦。

# r - 重塑数据框

> ID：13473030
> 
> 赞同：0
> 
> 时间：2012-11-20T12:15:43.370
> 
> 标签：r, dataframe, reshape

我正在尝试使用 melt amb cast 来转换此数据框

```
 knowngene                                           Meth
 uc003fia.3 cg00000108;0.864484486796394;0.928944704280193
 uc003cha.4 cg00000108;0.864484486796394;0.928944704280193
 uc003fhz.4 cg00000109;0.881060551674426;0.910939682196076
 uc003fhz.4 cg00000132;0.881060551674426;0.910939682196076
 uc003fia.3 cg00000109;0.881060551674426;0.910939682196076
 uc003fia.3 cg00000236;0.799251070221749;0.898656886868738 
```

在这样的事情

```
 knowngene                                           Meth
 uc003fia.3 cg00000108;0.864484486796394;0.928944704280193;cg00000109;0.881060551674426;0.910939682196076;cg00000236;0.799251070221749;0.898656886868738
 uc003cha.4 cg00000108;0.864484486796394;0.928944704280193
 uc003fhz.4 cg00000109;0.881060551674426;0.910939682196076;cg00000132;0.881060551674426;0.910939682196076 
```

但出于某种特殊原因，我无法重塑数据框，也许先更改为列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:26:23.333

拆分和应用将使您接近：

```
lapply(split(x$Meth, x$knowngene), paste, collapse="; ")

$uc003cha.4
[1] "cg00000108;0.864484486796394;0.928944704280193"

$uc003fhz.4
[1] "cg00000109;0.881060551674426;0.910939682196076; cg00000132;0.881060551674426;0.910939682196076"

$uc003fia.3
[1] "cg00000108;0.864484486796394;0.928944704280193; cg00000109;0.881060551674426;0.910939682196076; cg00000236;0.799251070221749;0.898656886868738" 
```

结果是一个命名列表，其中所有文本都以您想要的方式连接起来。`names()`您可以使用and将其转换为数据框`unname()`：

```
data.frame(knowngene=names(x), Meth=unlist(unname(x)))

   knowngene
1 uc003cha.4
2 uc003fhz.4
3 uc003fia.3
                                                                                                                                            Meth
1                                                                                                 cg00000108;0.864484486796394;0.928944704280193
2                                                 cg00000109;0.881060551674426;0.910939682196076; cg00000132;0.881060551674426;0.910939682196076
3 cg00000108;0.864484486796394;0.928944704280193; cg00000109;0.881060551674426;0.910939682196076; cg00000236;0.799251070221749;0.898656886868738 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:53:28.943

尝试

```
cast(knowngene ~ ., data = your.data.frame, value = "Meth", 
    function = paste, sep = ";") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:06:57.667

听起来你只需要`aggregate()`：

首先，您的数据：

```
myDF <- read.table(header = TRUE, text = "knowngene   Meth
uc003fia.3 cg00000108;0.864484486796394;0.928944704280193
uc003cha.4 cg00000108;0.864484486796394;0.928944704280193
uc003fhz.4 cg00000109;0.881060551674426;0.910939682196076
uc003fhz.4 cg00000132;0.881060551674426;0.910939682196076
uc003fia.3 cg00000109;0.881060551674426;0.910939682196076
uc003fia.3 cg00000236;0.799251070221749;0.898656886868738") 
```

二、聚合：

```
aggregate(Meth ~ knowngene, myDF, paste, collapse=";")
#    knowngene                                                                                                                                         Meth
# 1 uc003cha.4                                                                                               cg00000108;0.864484486796394;0.928944704280193
# 2 uc003fhz.4                                                cg00000109;0.881060551674426;0.910939682196076;cg00000132;0.881060551674426;0.910939682196076
# 3 uc003fia.3 cg00000108;0.864484486796394;0.928944704280193;cg00000109;0.881060551674426;0.910939682196076;cg00000236;0.799251070221749;0.898656886868738 
```

# ruby-on-rails-3 - 如何防止在 before_save 回调中保存模型更改

> ID：13473038
> 
> 赞同：0
> 
> 时间：2012-11-20T12:16:15.753
> 
> 标签：ruby-on-rails-3, before-save

所以我必须 1) 不保存更改，而是 2) 使用这些更改保存审核。第二部分是通过`send_for_audit`方法实现的，但是如果我在其中返回 false ，则不会创建新的 Audit 实例，并且不会保存对 Article 实例的更改（有简化代码）。

```
class Article < ActiveRecord::Base    
  before_save :send_for_audit, if: :changed?
  has_many :audits, as: :auditable

  private

  def send_for_audit
    audits.destroy_all
    Audit.create!(auditable: self, data: changes)
  end    
end

class Audit < ActiveRecord::Base
  attr_accessible :auditable, :auditable_id, :auiditable_type, :data
  store :data
  belongs_to :auditable, polymorphic: true

  def accept
    object_class = self.auditable_type.constantize
    object = object_class.find_by_id(auditable_id)
    data.each do |attr, values|
      object.update_column(attr.to_sym, values.last)
    end
    self.destroy
  end
end 
```

我试图添加一个额外的 before_save 回调，认为它们被触发的顺序会起作用：

```
before_save :send_for_audit, if: :changed?
before_save :revert_changes

def send_for_audit
  audits.destroy_all
  Audit.create!(auditable: self, data: changes)
  @need_to_revert = true
end

def revert_changes
 if @need_to_revert
   @need_to_revert = nil
   false
 end
end 
```

但无论如何我没有审计实例..有什么想法可以达到预期的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:12:11.333

我已经想通了，我只是不使用 before_save，但是

```
 def audited_save!(current_user)
    if current_user.superadmin
      save!
    else
      audits.destroy_all
      Audit.create!(auditable: self, data: changes)
    end
  end 
```

然后我在更新控制器操作中使用该方法

# objective-c - 在mac app中将数据导出为csv格式文件

> ID：13473040
> 
> 赞同：1
> 
> 时间：2012-11-20T12:16:33.117
> 
> 标签：objective-c, macos, csv, nssavepanel

我是 Mac 应用程序开发的新手。

我在 nstableview 中有一组数据，我需要以编程方式将这些数据保存为 .cs 格式。

```
-(IBAction)exportInvoice:(id)sender
{
    AppDelegate *appDelegate = [NSApp delegate];
     NSString *tempStr = [NSString stringWithFormat:@"%@", [OrderModel getInitialOrderBITToDisplay:[appDelegate getDBPath]]];
    NSArray* commaSeparatedObjects = [tempStr componentsSeparatedByString:@","];
    //NSString *commaSeparatedObjects = [tempStr componentsJoinedByString:@","];
    NSLog(@"%@",commaSeparatedObjects);

    NSSavePanel *pdfSavingDialog = [NSSavePanel savePanel];

    [pdfSavingDialog setRequiredFileType:@"csv"];

    if ( [pdfSavingDialog runModalForDirectory:nil file:nil] == NSOKButton ) {
       // NSData *dataForPDF = [self exportPdfData];
        NSData *dataForPDF = [NSKeyedArchiver archivedDataWithRootObject:commaSeparatedObjects];
        NSLog(@"%@",dataForPDF);
        [dataForPDF writeToFile:[pdfSavingDialog filename] atomically:NO];

    }
} 
```

谁能帮我解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:05:20.093

您应该查看 CHCSVParser：[https](https://github.com/davedelong/CHCSVParser) ://github.com/davedelong/CHCSVParser 希望对您有所帮助。

# java - ANTLR 匹配日期范围

> ID：13473046
> 
> 赞同：1
> 
> 时间：2012-11-20T12:16:53.570
> 
> 标签：java, antlr

好吧，这可能很简单，但无论我涂抹多少咖啡，我的大脑都不会激活。

我需要将以下模式与 ANTLR 匹配：

```
5 YEARS
5 YEARS 2 MONTHS
5 YEARS 2 MONTHS 3 DAYS
2 MONTHS 3 DAYS
5 YEARS 3 DAYS
etc 
```

所以，我从以下规则开始：

```
atom returns [Object value]
  // start w/ a duration. Returned value will be a Joda Period object
  : (INTEGER ('YEAR'|'YEARS'))? (INTEGER ('MONTH'|'MONTHS'))? (INTEGER ('DAY'|'DAYS')?
  ; 
```

显然那是行不通的。我知道这很简单，但我现在有一个主要的大脑 404。

（一旦我得到正确的规则，我会将定义移至 Lexer 定义）

**更新：** 由于之前提供的输入，以下规则集有效。再次感谢。

```
datePeriod returns [Object value]
  : year month? week? day? EOF
  {
    $value = new Period($year.num, $month.num, $week.num, $day.num,0,0,0,0);
  }
  | month week? day? EOF
  {
    $value = new Period(0, $month.num, $week.num, $day.num,0,0,0,0);
  }
  | week day? EOF
  {
    $value = new Period(0,0, $week.num, $day.num,0,0,0,0);
  }
  | day EOF
  {
    $value = new Period(0, 0, 0, $day.num,0,0,0,0);
  }
  ;

year returns [int num]
  : INTEGER YEAR
  {
    $num = $INTEGER.int;
  }
  ;

month returns [int num]
  : INTEGER MONTH
  {
    $num = $INTEGER.int;
  }
  ;

week returns [int num]
  : INTEGER WEEK
    {
      $num = $INTEGER.int;
    }
  ;

day returns [int num]
  : INTEGER DAY
  {
    $num = $INTEGER.int;
  }
  ;

YEAR: ('YEAR'|'YEARS');
MONTH: ('MONTH'|'MONTHS');
WEEK: ('WEEK'|'WEEKS');
DAY: ('DAY'|'DAYS'); 
```

不幸的是，我是 ANTLR IDEA 现在正在抛出警告，例如：

```
Decision can match input such as "INTEGER MONTH" using multiple alternatives: 1, 2 
```

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:20:06.413

下面是一个简单的语法，可以解析您描述的日期。请注意，换行符是重要的/不被跳过，因为“4 YEARS\n4 MONTHS”应该明确地解析为两个日期。

```
grammar dates;

options {  
  language = Java; 
  output = AST;
}                     

parse
    : '\n'* date ('\n'+ date)* '\n'* EOF
    ;

date 
  // start w/ a duration. Returned value will be a Joda Period object
  : year month? day? 
    {System.out.println(String.format("\%dy \%dm \%dd", $year.num, $month.num, $day.num));} 
  | month day?
    {System.out.println(String.format("0y \%dm \%dd", $month.num, $day.num));}
  | day
    {System.out.println(String.format("0y 0m \%dd", $day.num));}
  ;

year returns [int num]
    : INTEGER YEAR
        {$num = $INTEGER.int;}
    ;
month returns [int num]
    : INTEGER MONTH
        {$num = $INTEGER.int;}
    ;
day returns [int num]
    : INTEGER DAY
        {$num = $INTEGER.int;}
    ;
DAY : 'DAY' | 'DAYS'
    ;    
MONTH
    : 'MONTH' | 'MONTHS'
    ;    
YEAR: 'YEAR' | 'YEARS'
    ;    
INTEGER
    : '0' 
    | ('1'..'9')('0'..'9')*
    ;
WS
    : ('\t' | ' ' | '\r') {skip();}
    ; 
```

测试输入：

```
5 YEARS
5 YEARS 2 MONTHS
5 YEARS 2 MONTHS 3 DAYS
2 MONTHS 3 DAYS
5 YEARS 3 DAYS
7 DAYS
1 MONTH 
```

测试输出：

```
5y 0m 0d
5y 2m 0d
5y 2m 3d
0y 2m 3d
5y 0m 3d
0y 0m 7d
0y 1m 0d 
```

# android - 选择 1 个值时，它会自动在 Android 的 Listview 中选择其他值

> ID：13473051
> 
> 赞同：2
> 
> 时间：2012-11-20T12:17:20.060
> 
> 标签：android

我有一个显示音乐名称的列表视图，当我选择其中的 1 个音乐进度条时，它会在其下方显示。问题是当我单击第一个时，它也会自动选择 4，依此类推，即对于 2，它选择 5 3-8..我认为，当适配器拥有大量值时，它不会一次全部加载，它会在屏幕向下滚动时分批加载，所以当我在第 1 批中选择第一项时，它也会选择前一批的第一项。这是代码：

```
 public View getView(final int position, View convertView, ViewGroup parent) {

        View v = convertView;

        if (convertView == null) {
            // here we inflate the layout
            LayoutInflater li = getLayoutInflater();
            v = li.inflate(R.layout.music_videos_sublayout, null);

        } else {
            v = convertView;
        }

        if (mediaflag == 1) {
            ImageView media_image = (ImageView) v
                    .findViewById(R.id.media_type);
            media_image.setBackgroundResource(R.drawable.video);
        } else {
            ImageView media_image = (ImageView) v
                    .findViewById(R.id.media_type);
            media_image.setBackgroundResource(R.drawable.music);
        }

        ImageView club_image = (ImageView) v.findViewById(R.id.clubimage_music_videos_sublayout);

        TextView club_name = (TextView) v.findViewById(R.id.clubname_music_videos_sublayout);           
        club_name.setText(mediaArraylist.get(position).getClubName());

        TextView mediaName = (TextView) v.findViewById(R.id.songname_music_videos_sublayout);
        mediaName.setText(mediaArraylist.get(position).getMedianame());

        AQuery aQuery = new AQuery(MusicVideosActivity.this);

        String thumbnail = mediaArraylist.get(position).getClubimage();
        Bitmap preset = aQuery.getCachedImage(thumbnail);

        club_image.setImageBitmap(preset);

        v.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View myView) {

                System.out.println("Clicked within View"+position);
                ProgressBar musicBar1 = (ProgressBar)v.findViewById(R.id.progressBar1);
                musicBar1.setVisibility(View.VISIBLE);
            }
        });     

        return v;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:23:23.053

使用 bin 并将布尔变量设置为 getview 中的 isAvail 将这一行...

```
musicbar1.setVisibility(listitem.isAvail() ? View.VISIBLE : View.GONE); 
```

# sql - 这个 SQL 语句瓶颈在哪里？

> ID：13473060
> 
> 赞同：0
> 
> 时间：2012-11-20T12:17:58.570
> 
> 标签：sql, optimization, sybase, sql-execution-plan

我正在尝试编写一个 SQL (Sybase) 查询来从数据库中获取电影院信息。当我运行下面的查询时，查询只会继续运行。最终，大约 5 分钟后，我放弃了它。没有错误/非法的 SQL，只是**速度很慢**！

```
SELECT
    TM.type_prefix +
        right('00000000' + convert(varchar, TM.showing_id), 8) +
        right('0000' + convert(varchar, TM.theatre_id), 4) as data_id
FROM
    theatre_times..theatre_mappings TM,
    theatres..region_codes RC,
    title_summaries..movie_summary MS
WHERE
    TM.scheme_id = 512 AND
    RC.region_code_id = MS.region_code_id 
```

不要担心查询中使用的表名或逻辑，我只是​​想知道是否有任何**明显**的事情表明我做错了或效率低下。以下是所有三个表的计数：

*   `theatre_mappings`= 2,094,163
*   `region_codes`= 11,140,​​348
*   `movie_summary`= 6,437,782

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:19:45.370

您正在创建 TM 条目到 (RC/MS) 条目的笛卡尔积。你想成为？

我认为 Sybase 支持 ANSI 92 SQL 语法，所以你的 SQL 相当于

```
FROM
    theatre_times..theatre_mappings TM,

    theatres..region_codes RC
          inner join title_summaries..movie_summary MS
          on RC.region_code_id = MS.region_code_id
WHERE
    TM.scheme_id = 512 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:20:20.753

它产生一个笛卡尔，因为你没有将`theatre_mappings`表加入其他两个..没有看到你的模式，我不能肯定地说，但我怀疑你需要类似的东西：

```
SELECT
    TM.type_prefix +
        right('00000000' + convert(varchar, TM.showing_id), 8) +
        right('0000' + convert(varchar, TM.theatre_id), 4) as data_id
FROM
    theatre_times..theatre_mappings TM,
    theatres..region_codes RC,
    title_summaries..movie_summary MS
WHERE
    TM.scheme_id = 512 AND
    TM.region_code_id = RC.region_code_id  -- Extra join
    RC.region_code_id = MS.region_code_id 
```

# java - URL 格式错误的异常

> ID：13473064
> 
> 赞同：0
> 
> 时间：2012-11-20T12:18:20.617
> 
> 标签：java, url, malformedurlexception

我需要从 Java 发出 URL 请求。

问题如下：

在Java中，在创建URL时我不能跳过协议（http://或https://）......并且在浏览器中，如果我将IP作为地址（没有http：/），我只能访问资源/ 或 https://)。

有任何想法吗 ？

谢谢

# jsf - 为什么我的 httpsession 过期了？

> ID：13473066
> 
> 赞同：0
> 
> 时间：2012-11-20T12:18:24.677
> 
> 标签：jsf, primefaces, glassfish, httpsession

我对 JSF 很陌生，遇到了一个有趣的问题。我有一个 Web 应用程序，指定了会话超时，即使我执行操作，会话也会过期。据我所知，每个新请求都会重新启动超时计数器，但这并没有发生。另外，在开发过程中我注意到，在超时（重定向到登录页面）之后，如果我重新加载页面，会话仍然有效。相同的会话 ID，计数器仍在运行...我不知道出了什么问题，我正在使用 Glassfish 和 PrimeFaces。

我搜索了很多，甚至试图捕捉 ViewExpiredException，但没有运气。重定向是使用

```
<meta http-equiv="refresh" content="#{session.maxInactiveInterval};url=login.jsf?reason=expired> 
```

方法。也许我在 web.xml 中遗漏了一些明显的东西，我没有想法。

请给我一些建议，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:53:40.660

您使用的方法不是实现会话超时的最佳选择，原因是元标记会在特定时间间隔刷新页面，在您的情况下，它会在刷新时重定向到另一个 url，

即，如果值为 ，`session.maxInactiveInterval`则`5`页面将在 5 秒内刷新并重定向到`login.jsf?reason=expired`，无论您执行何种操作。只有页面刷新才会重置计数器。

[在此处](http://webdesign.about.com/od/metataglibraries/a/aa080300a.htm)了解有关元标记的更多信息

如果你想实现空闲监视器，我建议你看看`<p:idleMonitor>`Primefaces[展示 - IdleMonitor](https://www.primefaces.org/showcase/ui/misc/idleMonitor.xhtml)

# java - 如何等待所有线程完成

> ID：13473070
> 
> 赞同：0
> 
> 时间：2012-11-20T12:18:28.650
> 
> 标签：java, multithreading

我创建了一些工作流程，如何等待我创建的所有线程。此示例适用于 99% 的情况，但有时方法 waitForAllDone 完成得比所有线程都完成得早。我知道它是因为在 waitForAllDone 之后我正在关闭使用创建线程的流，因此会发生异常

```
Caused by: java.io.IOException: Stream closed 
```

我的线程开始于：

```
 @Override
  public void run() {
    try {
      process();
    } finally {
      Factory.close(this);
    }
  } 
```

关闭：

```
 protected static void close(final Client client) {
    clientCount--;
  } 
```

当我创建线程时，我称之为：

```
 public RobWSClient getClient() {
    clientCount++;
    return new Client();
  } 
```

和工厂内的 clientCount 变量：

```
 private static volatile int clientCount = 0; 
```

等待：

```
 public void waitForAllDone() {
    try {
      while (clientCount > 0) {
        Thread.sleep(10);
      }

    } catch (InterruptedException e) {
      LOG.error("Error", e);
    }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:21:19.863

您需要保护`clientCount`via的修改和读取`synchronized`。主要问题是它不是原子操作，因此两个线程可以执行`clientCount--`/并最终得到错误的结果。`clientCount++``clientCount--``clientCount++`

`volatile`仅当该字段上的所有操作都是原子操作时，才可以像上面那样简单地使用。由于它们不是，您需要使用一些锁定机制。正如安东所说，`AtomicInteger`这里是一个很好的选择。请注意，它应该是`final`或`volatile`确保它不是线程本地的。

话虽如此，Java 1.5 之后的一般规则是使用 a`ExecutorService`而不是`Threads`. 将它与 Guava 的`Futures`类结合使用可以使等待所有人完成变得如此简单：

```
Future<List<?>> future = Futures.successfulAsList(myFutureList);
future.get();
// all processes are complete 
```

[Futures.successfulAsList](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/util/concurrent/Futures.html#successfulAsList%28java.lang.Iterable%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T12:22:12.013

我不确定你的代码的其余部分没有问题，但你不能像这样增加 volatile 变量 - `clientCount++`; `AtomicInteger`改为使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:52:22.397

等待线程终止的最好方法是使用高级并发工具之一。在这种情况下，最简单的方法是使用 ExecutorService。

您将以这种方式向执行者“提供”一项新任务：

```
...
ExecutorService executor = Executors.newFixedThreadPool(POOL_SIZE);
...

Client client = getClient(); //assuming Client implements runnable
executor.submit(client);
...

public void waitForAllDone() {
    executor.awaitTermination(30, TimeUnit.SECOND) ; wait termination of all threads for 30 secs
... 
} 
```

这样，您就不会在繁忙的等待或睡眠/唤醒周期中浪费宝贵的 CPU 周期。有关详细信息，请参阅[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29)文档。

# android - 根据 UTC 格式转换日期和时间字符串

> ID：13473073
> 
> 赞同：18
> 
> 时间：2012-11-20T12:18:39.673
> 
> 标签：android, date, time, utc

我有一个`2012-11-21 13:11:25`从本地数据库获取的日期字符串。我必须根据`UTC`设置对其进行转换并将其显示在特定屏幕上。因此，如果`GMT+05:30`它应该显示`2012-11-21 18:41:25`在屏幕上。我该如何进行这种转换。我检查了一些问题，但没有解决。

我能够获得一个 Date 对象，该对象`Wed Nov 21 13:11:25 GMT+05:30 2012` 在此之后返回类似的内容，我需要获取时间`18:41:25`和日期`11-21-2012`

提前致谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-20T12:21:07.490

您的`df`和`inputFmt`必须使用相同的格式。

但我认为你应该这样做：

```
 Date myDate = new Date();

    Calendar calendar = Calendar.getInstance();
    calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
    calendar.setTime(myDate);
    Date time = calendar.getTime();
    SimpleDateFormat outputFmt = new SimpleDateFormat("MMM dd, yyy h:mm a zz");
    String dateAsString = outputFmt.format(time);
    System.out.println(dateAsString); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-06-13T12:06:18.480

从当前时间获取 UTC：

```
public String getCurrentUTC(){
        Date time = Calendar.getInstance().getTime();
        SimpleDateFormat outputFmt = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        outputFmt.setTimeZone(TimeZone.getTimeZone("UTC"));
        return outputFmt.format(time);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-24T11:50:16.593

以所需格式获取格式化日期字符串的最佳方法是

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.US);
dateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
String formatted = dateFormat.format(date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-29T09:54:26.917

```
 //This is my input date 

    String dtStart = "2019-04-24 01:22 PM";
    SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd hh:mm a");
    Date date = null;
    try {
        date = format.parse(dtStart);
        getDateInUTC(date)

    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

//此方法用于将日期转换为某种UTC格式

```
public static String getDateInUTC(Date date) {
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
            String dateAsString = sdf.format(date);
            System.out.println("UTC" + dateAsString);
            return dateAsString;

        } 
```

# sql - rank 函数总是带回连续的排名

> ID：13473080
> 
> 赞同：1
> 
> 时间：2012-11-20T12:18:58.947
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个简单的表，其中包含 id。

```
1
5
22 
```

当我执行以下操作时

```
select *, rank() over (order by id) as rank from my table 
```

排名回来为

```
1
2
3 
```

我不明白为什么排名是连续的？我期待类似的东西

```
1
4
17 
```

我本来期望`dense_rank`函数的连续行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:30:24.930

所有 ID 都是不同的，这就是这种行为的原因。当您订购的值相等时，排名函数就会发挥作用。

```
create table TableName(id int);
insert into TableName values(1);
insert into TableName values(5);
insert into TableName values(5);
insert into TableName values(22);
insert into TableName values(22);
insert into TableName values(22);

select *, 
rank() over (order by id) as rank,
dense_rank() over (order by id) as dense_rank,
row_number() over (order by id) as row_num
from TableName

ID  RANK    DENSE_RANK  ROW_NUM
1   1         1         1
5   2         2         2
5   2         2         3
22  4         3         4
22  4         3         5
22  4         3         6 
```

[`Demo`](http://sqlfiddle.com/#!3/f0abe/1/0)

[排名函数 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:25:34.437

id是连续的吗？如果没有平局，那么 RANK 和 DENSE_RANK 将返回相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:28:47.330

试试这个：

```
;WITH CTE
AS
(
  SELECT *, 
    RANK() OVER(ORDER BY id) as rank
  FROM tablename
 )
SELECT 
  c1.Id,
  (c1.id - ISNULL(c2.ID, 0)) rank
FROM CTE c1
LEFT JOIN cte c2 ON c1.rank - c2.rank = 1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/2b7e4/9)

# zlib - Solaris sparc 64 位上的 zlib 链接问题

> ID：13473081
> 
> 赞同：0
> 
> 时间：2012-11-20T12:18:59.977
> 
> 标签：zlib, solaris-10

当尝试在**Solaris-10 sparc机器上构建****zlib-1.2.5**（或最新的 1.2.7）时，我得到：

 **相关环境 变量：

```
export CFLAGS="-m64 -O4"
export CXXFLAGS="-m64 -O4"
export CC="cc"
export CXX="CC" 
```

建筑输出：

```
Checking for shared library support...
Building shared library libz.so.1.2.7 with cc.
Checking for off64_t... Yes.
....
Checking for stdarg.h... Yes.
Checking whether to use vs[n]printf() or s[n]printf()... using vs[n]printf().
Checking for vsnprintf() in stdio.h... Yes.
Checking for return value of vsnprintf()... Yes.
Looking for a four-byte integer type... Found.
cc -m64 -O4 -D_LARGEFILE64_SOURCE=1 -I. -c -o example.o test/example.c
cc -m64 -O4 -D_LARGEFILE64_SOURCE=1   -c -o adler32.o adler32.c
.... stripped a few lines
cc -m64 -O4 -D_LARGEFILE64_SOURCE=1   -c -o gzwrite.o gzwrite.c
ar rc libz.a adler32.o crc32.o deflate.o infback.o inffast.o inflate.o inftrees.o trees.o zutil.o compress.o uncompr.o gzclose.o gzlib.o gzread.o gzwrite.o
cc -m64 -O4 -D_LARGEFILE64_SOURCE=1 -o example example.o -L. libz.a
.... stripped a few lines
cc -G -h libz.so.1 -m64 -O4 -D_LARGEFILE64_SOURCE=1 -o libz.so.1.2.7 adler32.lo crc32.lo deflate.lo infback.lo inffast.lo inflate.lo inftrees.lo trees.lo zutil.lo compress.lo uncompr.lo gzclose.lo gzlib.lo gzread.lo gzwrite.lo  -lc
ld: fatal: relocation error: R_SPARC_H44: file crc32.lo: symbol <unknown>: relocations based on the ABS44 coding model can not be used in building a shared object
make: *** [libz.so.1.2.7] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:05:24.587

我现在找到了答案：使用选项 -xcode=pic32**

# vb.net - 获取特定字体的字体样式

> ID：13473084
> 
> 赞同：0
> 
> 时间：2012-11-20T12:19:03.917
> 
> 标签：vb.net, fonts, visual-studio-2005

我有两个组合框combobox1和combobox2我在combobox1中获取所有系统字体我需要在combobox2中获取选择字体的字体样式

```
 Dim fc As New Drawing.Text.InstalledFontCollection
    Dim ff As FontFamily() = fc.Families()
    For Each family As FontFamily In ff
        Me.ComboBox1.Items.Add(family.Name)
    Next 
```

当我为例如选择字体名称时。Monotype Corsiva 字体只有斜体和斜体粗体字体样式

简而言之，我需要获取与我在 combobox1 中选择的字体相关的字体样式，因为不同字体的字体样式不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:12:40.270

这些字体名称是从添加的字体样式合成的，这些样式在以后的排版中可用，尤其是在 OpenType 中添加的样式。它们不完美地映射回旧的 GDI 样式。您看到的技巧是将家族名称从 Monotype 修改为“Monotype Corsiva”，这强烈暗示只有斜体（“草书”）样式可用。相同类型的映射技巧用于各种添加的粗体样式和音高，例如“Semibold”和“Condense”等名称。

由于您只有 FontStyle 枚举可用于在代码中选择字体，因此使用 FontFamily.IsStyleAvailable() 方法检查映射的样式应该可以正常工作。您将希望向用户提供字体外观的预览，就像 FontDialog 类所做的那样，因此对最终结果几乎没有混淆。一般都支持 FontDialog。

# mysql - 迁移到控制台或日志的详细输出

> ID：13473085
> 
> 赞同：1
> 
> 时间：2012-11-20T12:19:07.120
> 
> 标签：mysql, database, oracle, flyway

我环顾四周，但似乎无法找到答案。

我们的 DBA 希望看到 flyway 调用的 sql 迁移的输出。

以 mysql 为例：

```
mysql> CREATE TABLE test (col INT); 
```

输出给出：

```
Query OK, 0 rows affected (0.00 sec) 
```

在甲骨文中：

```
select 'Starting CREATE TEST TRIGGER' from DUAL;

/* Insert your code here */
CREATE OR REPLACE TRIGGER TR_TEST_TRIGGER
...
...

select 'Finished CREATE TEST TRIGGER' from DUAL; 
```

输出将类似于：

```
'STARTINGCREATETESTTRIGGER
---------------------------
Starting CREATE TEST TRIGGER

....
....
Trigger created.

'FINISHEDCREATETESTTRIGGER
---------------------------
Finished CREATE TEST TRIGGER 
```

有没有人能够解决这个问题，或者有人能指出我正确的方向吗？

感谢您可能有的任何想法。

# oracle - 如何以普通用户身份在 Oracle 中运行 dbms_crypto 函数？

> ID：13473087
> 
> 赞同：7
> 
> 时间：2012-11-20T12:19:12.003
> 
> 标签：oracle, cryptography, database

`dbms_crypto.hash()`我在 Oracle 中使用函数时遇到问题。

我使用 sqlplus 作为“sys/passwd as sysdba”连接到数据库服务器，然后我安装了`dbms_crypto`包：

```
@/home/oracle/app/oracle/product/11.2.0/dbhome_1/rdbms/admin/dbmsobtk.sql
@/home/oracle/app/oracle/product/11.2.0/dbhome_1/rdbms/admin/prvtobtk.plb
Grant execute on dbms_crypto to public;
Grant execute on dbms_sqlhash to public;
Grant execute on dbms_obfuscation_toolkit to public;
Grant execute on dbms_obfuscation_toolkit_ffi to public;
Grant execute on dbms_crypto_ffi to public; 
```

一切看起来都不错，所以我测试了`hash()`功能：

```
SQL> select dbms_crypto.hash(utl_raw.cast_to_raw('zorg'), 3) from dual;

DBMS_CRYPTO.HASH(UTL_RAW.CAST_TO_RAW('ZORG'),3)
--------------------------------------------------------------------------------
60C440F9954CA4744204CDA9CC93567059C1EC82 
```

我以普通用户的身份断开连接并连接到该数据库，但随后出现错误：

```
SQL> select dbms_crypto.hash(utl_raw.cast_to_raw('zorg'), 3) from dual;
select dbms_crypto.hash(utl_raw.cast_to_raw('zorg'), 3) from dual
             *
ERROR at line 1:
ORA-06521: PL/SQL: Error mapping function
ORA-06512: at "MN.DBMS_CRYPTO_FFI", line 131
ORA-06512: at "MN.DBMS_CRYPTO", line 72 
```

为什么我不能以普通用户的身份使用此功能？如何允许其他用户使用它？

我与：

```
Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T12:46:48.407

问题解决了。我将包创建为错误的用户。正确的方式：

1.  使用连接：

    ```
    sqlplus / as sysdba 
    ```

2.  安装包：

    ```
    @/home/oracle/app/oracle/product/11.2.0/dbhome_1/rdbms/admin/dbmsobtk.sql
    @/home/oracle/app/oracle/product/11.2.0/dbhome_1/rdbms/admin/prvtobtk.plb 
    ```

3.  以普通用户身份连接并使用`dbms_crypto`包中的功能。

# mysql - sql：结合 2 个查询给出 1 个结果集

> ID：13473095
> 
> 赞同：0
> 
> 时间：2012-11-20T12:19:44.967
> 
> 标签：mysql, sql, database, oracle

在我必须执行 2 个查询的情况下，我想用一行查询来替换它。例子：

```
select col1, col2 from tableA where col3 = 'a'; 
```

这将返回（考虑）2行：

```
col1    col2

abc     abc.bcd
xyz     xyz.pqr 
```

现在，在第二个表中，我们对查询 1 中的每一行进行了不同的查询：

```
 select col1 from tableB where col2 = 'abc';
   (AND)
   select col1 from tableB where col2 = 'xyz'; 
```

这将给出一个结果集，如：

```
 TableB
 col1    
 1111    
 2222 
```

如果问题不清楚，请提及我将尝试用更好的例子进行详细说明。

（虽然数据库供应商不是问题，但我对 oracle 或 mysql 很满意。谢谢）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:26:15.487

你基本上只需要两个表之间的连接，如下所示：

```
SELECT b.col1, a.col1
FROM tablea a 
INNER JOIN tableb b ON a.col1 = b.col2
WHERE a.col3 = 'a' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:22:33.450

您可以进行如下查询：

```
select col1 from tableB where col2 = 'abc' or col2 = 'xyz'; 
```

如果您有大量字符串要检查，那么您可以使用：

```
select col1 from tableB where col2 in ('abc','xyz','mno'); 
```

更新：您可以使用嵌套查询，例如：

```
select col1 from tableB where col2 in (select col1 from tableA where col3='a'); 
```

但是请确保该`col1`嵌套查询内部的数据类型与`col2`后`where`匹配的数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:23:59.977

尝试这个：

```
select col1 
from tableB
where col2 in (select col1 
               from tableA 
               where col3='a') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:25:12.260

您可以将单个查询用作，

```
select col1, col2 from tableB where col2 = 'abc' or col2='xyz' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T12:27:32.547

我并不完全清楚，但我认为您正在寻找通常的 Join 表达式？

SELECT B.Col1, A.Col1 FROM TableA A 内部连接 ​​TableB B 在 A.Col1 = B.Col2

请参考 Join 表达式。此示例适用于 SQL Server 和更新版本的 Oracle。

# angularjs - Angularjs从对象中选择多个选项

> ID：13473096
> 
> 赞同：12
> 
> 时间：2012-11-20T12:19:46.713
> 
> 标签：angularjs

尝试在angularjs中选择关于对象值的多个选项

这是一个代码：

```
myapp.controller('myctrl', [
        '$scope',
        function ($scope) {
            $scope.query = {
                Statuses: {
                    Draft: true,
                    Live: true,
                    Pending: true,
                    Archived: false,
                    Deleted: false
                }
            };

        }
    ]);​ 
```

和 html

```
<div ng-controller="myctrl">
<select multiple>
    <option value="Draft" ng:model="query.Statuses['Draft']">Draft</option>
    <option value="Pending" ng:model="query.Statuses.Pending">Pending</option>
    <option value="Live" ng:model="query.Statuses.Live">Live</option>
    <option value="Archived" ng:model="query.Statuses.Archived">Archived</option>
    <option value="Deleted" ng:model="query.Statuses.Deleted">Deleted</option>
</select>

    {{query | json}}
</div> 
```

jsfiddle 上的（非）工作示例​</p>

[http://jsfiddle.net/andrejkaurin/h9fgK/](http://jsfiddle.net/andrejkaurin/h9fgK/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T19:48:36.263

使用状态模型（$scope.statuses）和 ng-options 来迭代它们：

```
function MyCtrl($scope) {
    $scope.statuses = [ 'Draft', 'Pending', 'Live', 'Archived', 'Deleted' ];
    $scope.selectedStatuses = [ 'Pending', 'Live' ];
}​ 
```

.

```
<select ng-model="selectedStatuses" multiple ng-options="status for status in statuses">
</select> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-20T15:10:12.570

您正在尝试使用多选，例如复选框列表，这有点奇怪。多选输出一个数组。您不能将 ng-model 放在这样的选项标签上，它会继续选择本身。因此，由于 select 将输出一个值数组，因此您需要遍历这些值并更新范围内的节点。

[这是一个演示代码的plunk](http://plnkr.co/edit/sc3D6r)

这是代码：

JS

```
function inArray(x, arr) {
  for(var i = 0; i < arr.length; i++) {
    if(x === arr[i]) return true;
  }
  return false;
}

app.controller('MainCtrl', function($scope) {
   $scope.query = {
                Statuses: {
                    Draft: true,
                    Live: true,
                    Pending: true,
                    Archived: false,
                    Deleted: false
                }
            };
  $scope.selectionsChanged = function(){
    for(var key in $scope.query.Statuses) {
      $scope.query.Statuses[key] = inArray(key, $scope.selectedValues);
    }
  };
}); 
```

HTML

```
<select multiple ng-model="selectedValues" ng-change="selectionsChanged()">
    <option value="Draft" ng-selected="query.Statuses.Draft">Draft</option>
    <option value="Pending" ng-selected="query.Statuses.Pending">Pending</option>
    <option value="Live" ng-selected="query.Statuses.Live">Live</option>
    <option value="Archived" ng-selected="query.Statuses.Archived">Archived</option>
    <option value="Deleted" ng-selected="query.Statuses.Deleted">Deleted</option>
</select>
<br/>
    {{query | json}} 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-11T18:07:42.730

需要指出的是，IMO 多选元素是 UI 交互的邪恶。在不记得按住修饰键的情况下触摸任何东西，有些用户不知道，你会失去整个选择。特别糟糕的是，如果有足够多的选项使它们并非全部可见，那么您甚至无法判断何时删除现有选择。多个复选框是表示相同可能选项和当前选择的更好方法。可以使容器的价值可滚动，这实际上类似于具有比大小更多选项的多选。（不是我知道的答案......）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-20T16:36:17.130

这是 blesh 解决方案的替代方案

```
app.controller('MainCtrl', function($scope) {

  $scope.query = {
      Statuses: ["Pending","Live"]
  };
}); 
```

并选择

```
<select multiple ng:model="query.Statuses" >
      <option value="Draft">Draft</option>
      <option value="Pending">Pending</option>
      <option value="Live">Live</option>
      <option value="Archived">Archived</option>
      <option value="Deleted">Deleted</option>
  </select>
  {{query | json}} 
```

工作样本在这里：

[http://plnkr.co/edit/bCLnOo](http://plnkr.co/edit/bCLnOo)

# ruby-on-rails - RVM 环境变量

> ID：13473100
> 
> 赞同：2
> 
> 时间：2012-11-20T12:19:55.660
> 
> 标签：ruby-on-rails, rvm

对于我的 Ruby on Rails 项目，我必须在命令行中做很多事情，比如运行 rake 任务或运行测试规范。在我的应用程序中，我需要提供一个环境变量来执行此操作，例如`ENCRYPTION_PASSWORD=bla rake db:test:prepare`

将环境变量添加到 RVM 的好方法是什么，这样我就不必在命令行中每次都使用该变量？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:28:23.483

在您的应用程序文件夹中，您可以放置​​一个 .rvmrc 文件，其中包含项目所需的设置。当您切换到此目录时，将读取此文件。例如，我有一个包含以下内容的 .rvmrc：

```
rvm use ruby-1.9.2-p320
couchdb -b 
```

当我进入应用程序文件夹时，rvm 正在触发一个解析文件内容的钩子：

```
cd project/
Using /Users/andwen/.rvm/gems/ruby-1.9.2-p320
Running /Users/andwen/.rvm/hooks/after_use
Apache CouchDB is running as process 39539, time to relax.
Running /Users/andwen/.rvm/hooks/after_cd 
```

# php - 如何通过路由获取模块/控制器/动作？

> ID：13473104
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:20:10.867
> 
> 标签：php, yii

路线：

```
"login" => "module/users/login", 
```

如何通过路由（`login`）获取模块/控制器/动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:42:03.993

可以在 config/main.php 中路由登录模块

```
...
'urlManager'=>array(
   'urlFormat'=>'path',
   'rules'=>array(
        '<action>/*'=>'modules/user/<action>',
   ),
)
... 
```

它将网址从

```
$url = Yii::app()->createUrl('modules/user/login'); 
```

至

```
/login 
```

# magento-1.5 - Magento 多版本模块错误类 Mage_Catalog_Model_Resource_Product_Option 未找到

> ID：13473108
> 
> 赞同：1
> 
> 时间：2012-11-20T12:20:23.423
> 
> 标签：magento-1.5, magento-1.7

我正在尝试为 magento 创建模块。它使用我自己的课程

```
class Myfirm_Extname_Model_Mysql4_Product_Option extends Mage_Catalog_Model_Resource_Product_Option 
```

在 magento 1.7 中一切正常，在 1.5 -`error: Error class Mage_Catalog_Model_Resource_Product_Option not found.`

如何创建将继承自`Mage_Catalog_Model_Resource_Product_Option`或`Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Option`取决于 magento 版本的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:56:00.843

我解决了这个问题。

```
protected function _getResource() {
       if (version_compare(Mage::getVersion(), '1.6.0', '<')) {
            $this->_resourceName = $this->_resourceName.'_oldversion';
        }
        if (empty($this->_resourceName)) {
            Mage::throwException(Mage::helper('core')->__('Resource is not set.'));
        }

        return Mage::getResourceSingleton($this->_resourceName);
    } 
```

然后为旧版本的magento和新的创建2个资源模型类

# html - php/html：强制换行符出现在 textarea 中

> ID：13473112
> 
> 赞同：0
> 
> 时间：2012-11-20T12:20:58.237
> 
> 标签：html, textarea, line-breaks

这应该不难，但我似乎无法找到有关它的信息。当您从服务器回显文本区域时，如何让换行符出现在文本区域内？换句话说`<some code>`，下面一行是什么？

```
<text area>first line <some code> second line <some code> third line</text area> 
```

我知道怎么写出来`<some code>`。我只需要知道它应该是什么。我已经尝试过`\n, \r\n, '\n', "\n", \N`变体，但无法显示换行符。

注意：这不是在 HTML 中显示，所以`<br>`不是我想要的。如果您自己在可以键入回车符的地方键入它，这并不是要显示它，即：

```
<textarea>first line
second line  </textarea> 
```

当您从服务器输出时，您不能使用键盘。这就是上面要完成的代码。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T23:54:54.287

这是一个非常老的问题，但我在将内容 ajax 到文本区域时遇到了同样的问题。

感谢[这个答案](https://stackoverflow.com/questions/7981786/line-breaks-in-textarea-element)，我将html代码用于新行，这对我有用`&#10;`。所以基本上：

`<textarea> Here's my returned text &#10; And it gets two lines </textarea>`

其中（至少对我而言）是

> 这是我返回的文本
> 
> 它有两条线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:27:31.283

尝试这个

<'p'>第一行</'/p'>

<'p'>二线<'/p'>

从 p 和 /p 中删除逗号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:33:01.290

在 html 中显示 \n 你应该使用 nl2br() php 函数。
否则你应该使用“\n”（而不是“/n”）在你的文本中换行；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:35:37.957

您应该尝试 \r\n 而不是 /r/n。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T13:14:10.660

从 PHP 中回显时，您需要使用 "\r\n" （带双引号）。

# nosql - 在无模式数据库中迁移数据格式的好方法是什么？

> ID：13473123
> 
> 赞同：2
> 
> 时间：2012-11-20T12:21:20.613
> 
> 标签：nosql, data-migration, couchbase, document-oriented-db, schemaless

如果您使用无模式数据库（特别是面向文档的数据库，如 CouchDB、Couchbase、MongoDB）并且想要更改特定对象的数据表示格式，您可能会使用旧格式保留现有记录并以新格式创建新记录。它被宣布为无模式数据库的主要优势之一（我认为是因为您可以避免停机）。另一方面，处理多种格式的同种数据既不方便又低效。那么在无模式数据库中将数据从一种格式迁移到另一种格式的好方法/策略是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T17:46:07.980

像所有事情一样，有很多不同的方法来处理这个问题。在无模式开发中，您通常知道您正在存储的数据。并不是缺少架构，所有数据都有隐式架构，所以我们真正要说的是数据库没有强制执行架构。如果我有一个存储在 json 中的具有 10 个实例变量的用户对象，那么那里就有一个模式！

**案例 1**：值可能有不同的可能性，单个值、数组或嵌套结构

**情况 2**：值需要从一种格式更改为另一种格式，例如。从单个值到值数组

**案例 3**：json 键的存在或不存在，这很简单

*对于案例 1*：如果您期望 json 值的多样性，则需要将特定值的多样性写入您的应用程序代码逻辑，如果是字符串，请执行此操作，如果是数组，请执行此操作。

*对于案例 2*：一种方法可以将其作为“按需”或“按需”处理，以便您将转换逻辑烘焙到您的类方法中，以便将数据从一种格式转换为另一种格式。这意味着您在检索数据时将数据从一种格式转换为另一种格式。您还可以标记它以表明您已对其进行了转换。由于它是按需的，因此您的文档存储中可能有未“转换”的数据，但如果它确实被请求，它将被转换。

*案例 2 的替代方法*：通过工作进程迭代和转换数据。因此，与其等待它被请求，您实际上创建了一个作业来更改您希望更改的数据，将转换逻辑烘焙到工作人员本身（可以在您的应用程序代码中使用相同的类定义）。在 Couchbase 中，您可以创建视图（二级索引）或使用弹性搜索来遍历特定类型的文档。如果您创建一个工作流系统，您可以与许多工作人员并行执行很多此操作。

**>>>>当我进行转换时，我通常以***非破坏性的*方式 将一个 json k/v 转换为另一个 json k/v，这样如果我在处理过程中出错，我不会更改原始数据。如果我觉得有必要的话，我可以在稍后阶段删除旧的 json k/v“按需”。对于此类操作，这是一种更安全的方法。

**附加**

*案例 1 & 2：数据转换*

原始 JSON 文档

```
user::101        
{ 
  "uid": 1234,
  "type": user,
  "my_comment": "the quick brown fox jumped over the lazy dog"
  "version": 1.00
} 
```

现在假设我想以非破坏性方式更改它，我可以轻松地添加一个具有转换后数据的新 json 键：

```
user::101        
{ 
  "uid": 1234,
  "type": user,
  "my_new_comment": ["the quick brown fox jumped over the lazy dog", "comment2"]
  "my_comment": "the quick brown fox jumped over the lazy dog",
  "version": 1.01

} 
```

注意它是非破坏性的，旧的 json 键仍然存在，或者我可以这样做，将*旧数据*保存为新键，并将预期的 json 键更改为新格式（数组）而不是字符串：

```
user::101        
{ 
  "uid": 1234,
  "type": user,
  "my_comment": ["the quick brown fox jumped over the lazy dog", "comment2"],
  "my_comment_v1.00": "the quick brown fox jumped over the lazy dog",
  "version": 1.01
} 
```

显然，您可以使用多种不同的方案，具体取决于您的喜好。

# visual-studio - Visual Studio 中的代码分析合规性应该有多严格？

> ID：13473125
> 
> 赞同：2
> 
> 时间：2012-11-20T12:21:39.383
> 
> 标签：visual-studio, warnings, code-analysis, fxcop, standards-compliance

在为我正在从事的一个小项目使用代码分析之后，我想知道在解析代码以符合分析要求时我应该有多严格。

我知道我可以为此禁止警告，但对我来说，在某种程度上禁止警告是一种逃避（不是双关语......“FXCop”）。

**示例警告：**

> 不要在意外位置引发异常“CustomObject.Equals(object)”会创建“ArgumentException”类型的异常。在这种类型的方法中不应引发异常。如果可能引发此异常实例，请更改此方法的逻辑，使其不再引发异常。

**扔这个的原因...**

CustomObject.Equals(object) 可能会尝试将 CustomObject 与 FooBarObject 进行比较......它们甚至不是同一类型，所以在这种情况下，我应该抛出异常，还是只返回 false？

* * *

一般来说，我是否真的应该（因为想要一个更好的词）使我的代码绝对合规，或者我会遇到需要警告抑制的情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:46:39.853

FxCop 警告只是警告，它们不会标记无效代码。这就是编译器的工作。FxCop 使用的规则是从多年编写 .NET 代码的经验中收集的。它们代表“最佳实践”，并且通常会提醒您意想不到的后果以及 .NET 编程中更晦涩的部分，例如 CAS。

始终参考文档以了解规则存在的原因。对于 CA1065，您将看到：

> Equals 方法应该返回 true 或 false 而不是抛出异常。例如，如果 Equals 传递了两个不匹配的类型，它应该只返回 false 而不是抛出 ArgumentException。

完全符合您的使用情况，您可以轻松采纳建议。不幸的是，创建规则的确切原因有点短。这真的没有超出“不要扔在意想不到的地方”的指导。这里的意外后果是，另一个使用您的类的程序员不会意识到如果他不希望代码失败，则需要尝试/捕获。随意将 Debug.Assert() 放入您的 Equals 方法中。在很多情况下，您会希望忽略这些建议，例如 CA2000 特别容易出现错误警告。必要时应用 [SuppressMessage] 属性，不必再次查看它。

# graphite - Graphite 在导入一堆数据时会跳过并截掉指标名称

> ID：13473126
> 
> 赞同：0
> 
> 时间：2012-11-20T12:21:43.933
> 
> 标签：graphite

当它跳过并切断一些指标和指标名称时，有没有人遇到过这种奇怪的石墨行为？

例如，当我使用命令导入大约 20Mb 的文件时

```
cat ./metrics.log | nc graphite-host 2003 
```

包含这样的数据

```
...
pkd.zont_10_4_8_107.histogram.ibgm_fx_import.failure.lifetime.min 0.0000 1353400609
pkd.zont_10_4_8_107.histogram.ibgm_fx_import.failure.lifetime.max 0.0000 1353400609
pkd.zont_10_4_8_107.histogram.ibgm_fx_import.failure.lifetime.arithmetic_mean 0.0000 1353400609
pkd.zont_10_4_8_107.histogram.ibgm_fx_import.failure.lifetime.geometric_mean 0.0000 1353400609
pkd.zont_10_4_8_107.histogram.ibgm_fx_import.failure.lifetime.harmonic_mean 0.0000 1353400609
pkd.zont_10_4_8_107.histogram.ibgm_fx_import.failure.lifetime.median 0.0000 1353400609
... 
```

一些指标名称变得无效，甚至没有导入文件中的所有指标。

![无效的指标名称](../Images/379522112785f5c5bc6556b64d3de52f.png)

如您所见，指标`zont_10_4_8_107`显示为`nt_10_4_8_107`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:23:30.167

谢谢大家。问题已经解决了。带有指标的文件已损坏。

# java - 编译包含其他类型对象的 java 类时收到错误消息

> ID：13473128
> 
> 赞同：-3
> 
> 时间：2012-11-20T12:21:51.920
> 
> 标签：java

我是 Java 编程语言的新手。我做了一个包名包。其中包含两个java类A.java和B.java。我正在使用 jdk1.5 和 tomcat。我想创建一个 A 类型的对象并将其放在 B.java 中。以下是我尝试执行此操作但收到两条错误消息的方法。

**包装包；**

**爪哇**

```
public class A {

        private String str;

    public A(){} //constructor method
    public void setName(String str){
        this.str = str;
    }
    public String getName(){
        return str;
    }
} 
```

**B.java**

```
public class B {

        private String temp;

    public B(){} //constructor method

    public String getTemp(){
        A a = new A();      //creating an object of A type
        temp = a.getName();  //assigning the value of getName method to temp variable
        return temp;        // returning temp variable  
    }
} 
```

jdk1.5、tomcat和包包在下面目录

**D:\java>**

以下是我编译 A.java 和 B.java 的步骤

**编译A.java**

```
D:\>cd java
D:\Java>cd pack
D:\Java\pack>set path=D:\java\jdk1.5\bin  (**setting up path of jdk1.5**)
D:\Java\pack>javac A.java (**Compiling A.java. Compiled it successfully**) 
```

**编译B.java**

```
D:\Java\pack>javac A.java (**Compiling B.java. Unable to compile**)

**(Error Message is below)**

D:\Java\pack>javac B.java
B.java:9: cannot find symbol
symbol  : class A
location: class pack.B
                A a = new A();      //creating an object of A type
                ^
B.java:9: cannot find symbol
symbol  : class A
location: class pack.B
                A a = new A();      //creating an object of A type
                          ^
2 errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:39:22.903

不要从目录编译你的类，而是`D:\Java\pack`转到包的基目录，`D:\Java`然后从那里编译和运行：

```
D:\Java> javac pack\A.java
D:\Java> javac pack\B.java 
```

确保您**没有**设置`CLASSPATH`环境变量，或者使用以下`-cp`选项指定类路径：

```
D:\Java> javac -cp . pack\A.java
D:\Java> javac -cp . pack\B.java 
```

（注意：`-cp .`表示您`.`在类路径中包含当前目录，由 指示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:35:36.010

确保 A 类和 B 类中都有 package 语句

爪哇

```
package pack;
public class A{
....
} 
```

B.java

```
package pack;
public class B{
...
} 
```

# ios - 书皮翻转动画ios

> ID：13473131
> 
> 赞同：1
> 
> 时间：2012-11-20T12:22:01.453
> 
> 标签：ios, animation, catransform3d

我正在尝试了解如何在 ios 中打开和关闭书皮动画。谷歌搜索结果如下：

```
coverimage.layer.anchorPoint=CGPointMake(0, .5);
coverimage.center = CGPointMake(coverimage.center.x - coverimage.bounds.size.width/2.0f, coverimage.center.y);
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1];
[UIView setAnimationDelay:0.1];
coverimage.transform = CGAffineTransformMakeTranslation(0,0);
CATransform3D _3Dt = CATransform3DIdentity;
_3Dt = CATransform3DMakeRotation(3.141f/2.0f,0.0f,-1.0f,0.0f);
_3Dt.m34 = 0.001f;
_3Dt.m14 = -0.0015f;
coverimage.layer.transform =_3Dt;
[UIView commitAnimations]; 
```

它工作得很好，但我发现很难理解它是如何完成 CATransform3DMakeRotation 的。如果您遇到任何方向或资源，请告诉我。我的主要动机是找到一种方法来扭转行动（合上书的封面）。我曾尝试更改代码，但没有奏效。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:37:44.787

下载示例并按照库中所需输出的简单执行 - [**翻转动画**](https://github.com/Dillion/iOS-Flip-Transform)

*以上库支持3种交互模式：*

1.  **触发**：就像点击翻转一样
2.  **Auto**：就像在循环数据的旋转翻转中一样
3.  **受控**：如平移手势，根据触摸移动翻转层

# android - Android：带有持续可见滚动条的指纹

> ID：13473134
> 
> 赞同：2
> 
> 时间：2012-11-20T12:22:10.110
> 
> 标签：android, drawing, scrollbar, scrollview, android-canvas

**问题陈述：**我希望画布在水平和垂直方向上具有相同的大小。大小应固定并基于垂直方向（类似 A4 的画布）。因此，我需要能够在水平方向上滚动画布。但是用于在 ScrollView 中滚动的触摸事件与用于在画布中绘制的触摸事件之间存在冲突。

**我需要什么：**我想大多数人都可以解决这个问题：[在水平滚动视图中进行手指绘画，](https://stackoverflow.com/questions/6090163/fingerpaint-within-a-horizontalscrollview)然后简单地添加一个允许用户滚动的按钮。对我来说，这有点违反直觉。我想要的是在画布的一侧始终可见一个厚滚动条，就像在这个应用程序中一样：

![在此处输入图像描述](../Images/acea2394906c45096ec68c70f763d2d7.png)

接下来，这也应该是用户可以滚动的唯一方式。

**我尝试过的：**由于滚动视图消耗了所有的触摸事件，我尝试覆盖滚动视图的 onTouch 方法。但这会导致*整个*滚动视图无法被触摸——*包括滚动条*。

**问题：**难道不能用 ScrollView 来实现吗？我是否必须创建自己的滚动条小部件并将其与包含画布的视图水平对齐（LinearLayout）？或者有什么方法可以让 ScrollView 只消耗背景上的触摸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:39:38.997

在`onTouch`覆盖中，您可以检查坐标并确定触摸是在滚动拇指上还是在视图的其余部分上。

# c# - 具有自定义类的 Windows 8 应用程序漫游存储

> ID：13473136
> 
> 赞同：1
> 
> 时间：2012-11-20T12:22:10.437
> 
> 标签：c#, windows-8, microsoft-metro

我正在使用 c# 在 windows 8 中学习编程。在此过程中，我已经完成了许多教程（例如[http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx)），并且我正在尝试创建一个显示数据存储的简单应用程序。我能够找到的所有示例仅在漫游存储中存储简单的字符串。有没有办法在那里存储更复杂的数据？

示例：具有姓名和年龄的基本类 Person 的列表。我试图这样做：

保存数据：

roamingSettings.Values["peopleList"] = 人；

加载数据：

people = (List)roamingSettings.Values["peopleList"];

WinRT 信息：尝试序列化要写入应用程序数据存储的值时出错。保存数据时出现错误“不支持此类型的数据”

所以，也许你能保存的只是字符串值——但我也没有在任何地方看到指定的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:18:28.410

是的，您可以将值作为集合保存到 raoming 数据中。您的问题的解决方案是 `ApplicationDataCompositeValue class`

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdatacompositevalue.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdatacompositevalue.aspx)

正如您所提到的，您正在使用 C# 进行开发，以下是我想象的问题的代码，您有一个 Person 类，有两个成员

```
class person
{
int PersonID;
string PersonName
} 
```

现在，要读取和写入此类的值，这里是代码

首先在 Window 类的构造函数中，在 InitializeComponent(); 下，创建一个漫游设置对象

```
Windows.Storage.ApplicationDataContainer roamingSettings = Windows.Storage.ApplicationData.Current.RoamingSettings; 
```

要写入合成，请使用以下代码

```
void write (Person Peopleobj)
{
Windows.Storage.ApplicationDataCompositeValue composite = new Windows.Storage.ApplicationDataCompositeValue();
composite["PersonID"] = Peopleobj.PersonID;
composite["PersonName"] = Peopleobj.PersonName;
roamingSettings.Values["classperson"] = composite;
} 
```

要读取 Person 对象，请使用以下代码

```
void DisplayOutput()
    {
        ApplicationDataCompositeValue composite = (ApplicationDataCompositeValue)roamingSettings.Values["classperson"];

        if (composite == null)
        {
            // "Composite Setting: <empty>";
        }
        else
        {
        Peopleobj.PersonID = composite["PersonID"] ;
        Peopleobj.PersonName = composite["PersonName"];

        }

         } 
```

# php - XML 解析属性 PHP $string = value ;

> ID：13473138
> 
> 赞同：2
> 
> 时间：2012-11-20T12:22:21.797
> 
> 标签：php, parsing

我有xml。这是电影放映时间，我尝试解析。

```
<shows>
    <show id="160575" film_id="7043" cinema_id="89" hall_id="241">
        <begin>2012-11-15</begin>
        <end>2012-11-18</end>
        <times>
            <time time="10:30:00">
                <prices>20, 30</prices>
                <note><![CDATA[]]></note>
            </time>
        </times>
    </show>
</shows> 
```

我解析我的 XML 和回显内容：字符串“film_id_m”必须是标签中的 7043。

```
$xmlstr = file_get_contents('test.xml');
$x = new SimpleXMLElement($xmlstr); 
$id_f = 89;
$cinema_id = "//show[@cinema_id=".$id_f."]";

$cinema=$x->xpath($cinema_id);

///////////string///////////////////
$begin_m = $cinema[0]->begin;
$end_m = $cinema[0]->end;
$film_id_m = ????????; 

/////////echo//////////////////////
echo "<b>BEGIN: </b>".$begin_m."<br>"; 
echo "<b>END: </b>".$end_m."<br>"; 
echo "<b>FILM ID: </b>".$film_id_m."<br>"; 
```

PS：对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:28:06.910

作为`film_id`当前处理元素的属性，您可以使用以下任一方法检索其值...

```
$film_id_m = $cinema[0]->attributes()->film_id; 
```

... 要不就...

```
$film_id_m = $cinema[0]['film_id']; 
```

# macos - git: 'pull' 不是 git 命令。见'git --help'

> ID：13473145
> 
> 赞同：4
> 
> 时间：2012-11-20T12:22:41.163
> 
> 标签：macos, git

> **可能重复：**
> [“git pull”坏了](https://stackoverflow.com/questions/1465398/git-pull-broken)

`git version 1.7.5.4`在我的 MAC 上使用

当试图`pull`从远程，我得到

`git: 'pull' is not a git command. See 'git --help'.`错误。

这曾经奏效。我的系统发生了一些变化，不确定是什么。

请问这个怎么解决？这里可能有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T12:26:08.310

你能确认 git-core 在正确的位置吗？

```
iMac:~ david$ git --exec-path
/usr/local/git/libexec/git-core
iMac:~ david$ ls /usr/local/git/libexec/
git-core
iMac:~ david$ 
```

# php - PDO：如何在 Linux 上访问 Microsoft Access 文件？

> ID：13473149
> 
> 赞同：7
> 
> 时间：2012-11-20T12:22:55.500
> 
> 标签：php, linux, pdo, odbc, ms-access-2007

我已设法使用 PDO 在 Windows 上读取 Microsoft Access 文件 (.accdb) 的数据，但在 Linux (CentOS) 上工作时遇到问题。我可以看到模块已安装：

```
[root@rapid host]# php -m | grep PDO
PDO
PDO_ODBC
[root@rapid host]# php -m | grep odbc
odbc 
```

代码：

```
<?php
    try{
        $dbhAccess = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};Dbq=/root/access/data.accdb;Uid=Admin");
    }
    catch(PDOException $e){
        echo $e->getMessage();
        exit();
    } 
```

执行 (CLI) PHP 文件时出现错误：

```
[root@rapid host]# php access.php
SQLSTATE[IM002] SQLDriverConnect: 0 [unixODBC][Driver Manager]Data source name not found, and no default driver specified 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:54:45.747

您应该安装 MDB 驱动程序。

我现在没有办法尝试，但我认为[MDB 工具](http://mdbtools.sourceforge.net)（特别是[ODBC 驱动程序](http://mdbtools.sourceforge.net/install/x90.htm)）可以做你感兴趣的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:00:26.333

您不能使用**{Microsoft Access Driver (*.mdb, *.accdb)}**作为数据源的一部分，因为 Microsoft 没有为 Linux 制作 MS Access ODBC 驱动程序。据我所知，MS Access 有 2 个 ODBC 驱动程序。[MDB 工具](http://mdbtools.sourceforge.net/)和[Easysoft ODBC-Access 驱动](http://www.easysoft.com/products/data_access/odbc-access-driver/index.html)程序。

如果您安装任一驱动程序，您可以使用您在 odbc.ini 文件中设置的 DSN，或者您更喜欢 DSN-Less 连接。这是一个连接到 MS Access 数据库的 Easysoft DSN-Less 示例

PDO("odbc:Driver={Driver=Easysoft ODBC-ACCESS};Dbq=/root/access/data.accdb");

有关使用 PDO-ODBC 连接和取回数据的更多信息，请参阅[Easysoft PHP 指南](http://www.easysoft.com/developer/languages/php/sql_server_unix_tutorial.html)。有一个关于 PDO-ODBC 的部分大约在中途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T14:49:40.077

我从未使用过 Microsoft Access 数据库，但我经常从 Linux (Ubuntu) 服务器连接到 DB2（在 IBM AS/400 上）和 MS SQL 服务器。您的错误似乎表明您没有安装 MS Access 驱动程序 - 我唯一知道的是：[http ://www.easysoft.com/products/data_access/odbc-access-driver/index.html](http://www.easysoft.com/products/data_access/odbc-access-driver/index.html)

您的错误消息还显示“未找到数据源名称”——为了让我连接到 DB2 或 MSSQL，我必须向 /etc/odbc.ini 和 /etc/odbcinst.ini 添加一些信息。

/etc/odbcinst.ini - 这是您描述在哪里可以找到 ODBC 驱动程序的地方。下面是我用于 DB2 和 MSSQL 的示例：

```
[iseries]
Description     = iSeries Access for Linux ODBC Driver
Driver          = /usr/lib/libcwbodbc.so
Setup           = /usr/lib/libcwbodbcs.so
NOTE1           = If using unixODBC 2.2.11 or later and you want the 32 and 64-bit ODBC drivers to share DSN's,
NOTE2           = the following Driver64/Setup64 keywords will provide that support.
Driver64        = /usr/lib/lib64/libcwbodbc.so
Setup64         = /usr/lib/lib64/libcwbodbcs.so
Threading       = 2
DontDLClose     = 1
UsageCount      = 1

# Define where to find the driver for the Free TDS connections.
[freetds]
Description     = MS SQL database access with Free TDS
Driver          = /usr/lib/i386-linux-gnu/odbc/libtdsodbc.so
Setup           = /usr/lib/i386-linux-gnu/odbc/libtdsS.so
UsageCount      = 1

[ODBC]
Trace           = no
TraceFile       = /tmp/odbc.log 
```

在最后一部分（[ODBC]）中，我目前有 Trace = no - 如果您将其更改为 Trace = yes，您将在 /tmp/odbc.log 文件中获得一些有用的调试信息。

/etc/odbc.ini - 这是您定义数据源的地方。下面是我用于 DB2 和 MSSQL 的示例：

```
[primary]
Description             = primary
Driver                  = iseries
System                  = XXX.XXX.XXX.XXX
UserID                  = XXXXXXXXXX
Password                = XXXXXXXXXX
Naming                  = 0
DefaultLibraries        = QGPL
Database                = MYLIB
ConnectionType          = 0
CommitMode              = 2
ExtendedDynamic         = 0
DefaultPkgLibrary       = QGPL
DefaultPackage          = A/DEFAULT(IBM),2,0,1,0,512
AllowDataCompression    = 1
LibraryView             = 0
AllowUnsupportedChar    = 0
ForceTranslation        = 0
Trace                   = 0

# Define a connection to the MSSQL server.
# The Description can be whatever we want it to be.
# The Driver value must match what we have defined in /etc/odbcinst.ini
# The Database name must be the name of the database this connection will connect to.
# The ServerName is the name we defined in /etc/freetds/freetds.conf
# The TDS_Version should match what we defined in /etc/freetds/freetds.conf
[mssql]
Description             = MSSQL Server
Driver                  = freetds
Database                = MyDatabase
ServerName              = mssql
TDS_Version             = 8.0 
```

我在 StackOverflow 上看到了很多关于在 Linux 机器上使用 MSFT Access 数据库的问题——而且似乎从来没有一个圆满的结局。如果有任何方法可以将数据移植到不同的、受更好支持的数据库系统（如 MySQL），我想你会省去一些麻烦。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T14:19:13.423

```
import pandas_access as mdb

db_filename = 'my_db.mdb'

# Listing the tables
for tbl in mdb.list_tables(db_filename):
    print(tbl)

# Read a small table
df = mdb.read_table(db_filename, "MyTable") 
```

在 Ubuntu 上，您可能需要运行：

```
sudo apt install mdbtools 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-01-17T01:53:54.807

对于WINDOWS，这是解决方案。

在投入大量时间后，我有了解决方案。

必须安装 32 位版本的“AccessDatabaseEngine”。

下载 32 位访问引擎：[https ://www.microsoft.com/es-es/download/confirmation.aspx?id=13255](https://www.microsoft.com/es-es/download/confirmation.aspx?id=13255)

并使用命令行运行它：AccessDatabaseEngine.exe /passive

在那之后，它应该工作。

# actionscript-3 - Youtube AS3 API 跨域

> ID：13473152
> 
> 赞同：0
> 
> 时间：2012-11-20T12:23:14.490
> 
> 标签：actionscript-3, cross-domain, youtube-api

我正在尝试使用 Youtube AS3 API 将一些 Youtube 视频显示到我的 flash 电影中，但是当我将其上传到我自己的服务器时，浏览器向我显示以下消息：

> **错误 #2044**：SecurityErrorEvent: text=Error #2121: **Sandbox Security Violation** : http:// *** /magicbook.swf?user=25&id=2283: [http://www.youtube.com/apiplayer?version=3](http://www.youtube.com/apiplayer?version=3) can't进入。

我已经添加了我的`Security.allowDomain`策略，以允许两台服务器之间的访问。我究竟做错了什么？

这是我的代码：

```
class YoutubePlayer extends Sprite {

    private var player:Object;
    private var loader:Loader;
    private var _videoID:String;

    public function YoutubePlayer(videoID:String) {

        Security.allowInsecureDomain("*");
        Security.allowDomain("*");          

        //loader = addChild(new Loader()) as Loader;
        loader = new Loader();
        loader.contentLoaderInfo.addEventListener(Event.INIT, onLoaderInit, false, 0, true);
        loader.load(new URLRequest("http://www.youtube.com/apiplayer?version=3"));
        _videoID = videoID;
    }

    private function onLoaderInit(event:Event):void {
        player = loader.content;
        player.addEventListener("onReady", onPlayerReady);
    }
    private function onPlayerReady(event:Event):void {
        player.setSize(320, 180);
        player.cueVideoByUrl("http://www.youtube.com/v/"+_videoID,0);
        player.addEventListener("onError",seeError);
        this.addChild(loader);
    }

    private function seeError(event:Event):void{
        trace("error");
    }

    public function playYoutube():void{
        player.playVideo();
    }

    public function stopYoutube():void{
        player.stopVideo();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:40:47.370

我假设顶部有一个“import flash.system.Security”。

我自己非常相似的代码工作正常，唯一的主要区别是：

*   我将加载程序添加到 INIT 事件处理程序中的阶段（不是在加载之前）
*   出于某种原因，我有 Security.allowDomain("*") 和 Security.allowDomain("www.youtube.com") - 我不确定为什么（这可能是一个错误，但现在无法测试）

希望这些差异有所帮助.. 我并不是真正的 flash/actionscript 专家。

# c# - 不了解ninject和注入

> ID：13473153
> 
> 赞同：4
> 
> 时间：2012-11-20T12:23:16.653
> 
> 标签：c#, .net, dependency-injection, ninject

我有一个类，其中包含我的操作（任何逻辑）：

```
public class socActions 
{
    public void Choose(int elem) 
    {
        switch(elem) ... CalcA(elem) || CalcB(elem) ...
    }
    public void CalcA() 
    {

    }
    public void CalcB() 
    {

    }
    public void CalcC() 
    {

    }
} 
```

因此，在我的程序中，当我获得 elem 值时，我会像这样使用它：

```
(new socActions()).Choose(elem_val); 
```

好的，但是在 socActions 类方法中，我想与我的存储库建立连接或进行任何其他依赖注入。

1.  如果我将 IRepositoryMy repositoryMy 添加到构造函数，那么我无法像上面那样创建类，bcz 现在需要带有参数 IRepositoryMy 的构造函数。
2.  如果我尝试在现场进行注入，它不起作用（属性 = null）。
3.  如果我尝试在方法（CalcA，CalcB）中进行注入，它也不起作用。

我真的应该如何完成这项任务（注入类，例如存储库）？不想将我的应用程序中的所有内容都标记为静态 :(

WinForms, C#, Ninject 3

**编辑：**

```
public class socActions
{
    [Inject]
    public IGridProcessor _GridProcessor { private get; set; } 
```

所以，在方法中它的null：

```
public void UpdateInfo(...)
{                
    ...
    this._GridProcessor.Refresh();
} 
```

在其他类中，我将 IGridProcessor 注入到构造函数中的类中，一切都很好。在 Program.cs 中：

```
 static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        var kernel = new StandardKernel(new TwttModule());
        var form = kernel.Get<Main>();

        Application.Run(form);
    }

    public class TwttModule : NinjectModule
    {
        public override void Load()
        {
            Bind<IGridProcessor>().To<GridProcessor>();
        }
    }

   public static class AnyClass 
   {
        public static void Act() 
        {
            ....
            (new socActions()).Choose(elem_val);
        }
   } 
```

我应该如何将 IGridProcessor 注入到 socActions？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:26:19.223

使用构造函数注入时，您不会直接构造类，而是向 ninject 请求实例。根据您配置 ninject 的方式，您将获得一个新实例或单例实例等。

从他们的文档中：

```
Samurai warrior = kernel.Get<Samurai>(); 
```

# c++ - Borland C++ 这个 bool 函数会返回什么？

> ID：13473154
> 
> 赞同：2
> 
> 时间：2012-11-20T12:23:14.320
> 
> 标签：c++, borland-c++

```
bool SomeFunction()
{

} 
```

我无法在我的机器上运行 Borland C++，但我需要从 C++ 转换为 VB，因此需要有关此功能的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T12:31:08.830

该函数声称它返回 a`bool`但它什么也不返回。这应该会导致编译器警告。如果你~~用它来分配~~调用函数的东西，结果将是未定义的行为：

```
bool b = SomeFunction(); // UB, SomeFunction is failing to return.
SomeFunction(); // still undefined behaviour 
```

只`main()`允许不显式返回，在这种情况下它隐式返回`0`。

看这里：

§6.6.3/2：

> 从函数的末尾流出相当于没有值的返回；这会导致值返回函数中的未定义行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:23:04.400

我在 Borland XE2 上编译了以下代码：

```
bool SomeFunction()
{
}

int main()
{
    bool x = SomeFunction();
    // ...
} 
```

`SomeFunction()`翻译成以下 x86 汇编代码：

```
push ebp
mov ebp,esp
pop ebp
ret 
```

作业`main()`翻译成：

```
call SomeFunction()
mov [ebp-$31],al 
```

`[ebp-$31]`的位置在哪里`x`。这意味着，寄存器的内容`al`将以`bool x`. 如果`al`为 0，`x`则为假，否则`x`为真。在我的系统上，这总是正确的，但这取决于上下文。此外，您可能会得到不同的调试和发布结果。

当然，结论是 x 是未定义的。给定的代码有点像写

```
bool x;
if (x)
{
    // ...
} 
```

我倾向于认为 的定义`SomeFunction()`不仅应该触发编译器警告，还应该触发错误。Visual C++ 这样做，我不知道其他编译器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T12:44:34.277

它应该 `return true;` 或`return false;`

```
bool SomeFunction()
{

    return true;

    // or

    return false;

} 
```

如果您的编译器没有内置 bool ，那么您可以这样做：

```
typedef int bool;
#define true 1
#define false 0

int main(void)
{

    bool answer;
    answer = true;

    while(true)
    {

    }

   return 0;
} 
```

# java - FindBugs EI_EXPOSE_REP 错误是否只涉及日期？

> ID：13473155
> 
> 赞同：6
> 
> 时间：2012-11-20T12:23:21.487
> 
> 标签：java, getter-setter, findbugs, accessor

Findbugs 在我的代码中报告了很多 EI_EXPOSE_REP 和 EI_EXPOSE_REP2 错误，每次我这样编写 getter 和 setter 时：

```
 public Date getDate() {
    return date;
  }
  public void setDate(final Date date) {
    this.date = date;
  } 
```

我理解报告的含义，我不应该将我的对象的内部引用暴露给外界，以免它们被恶意/错误代码修改。解决方法是：

```
 public Date getDate() {
    return date == null ? null : date.clone();
  }
  public void setDate(Date date) {
    this.date = date == null ? null : date.clone();
  } 
```

我的问题不在这里。我很惊讶这份报告涉及 ALWAYS Date。为什么不是所有其他可变对象？我认为这个报告也适用于所有可变对象，不是吗？

我是否应该将此“良好实践”扩展到所有处理可变对象的访问器？

给我你的建议，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:27:29.623

我当然希望这份报告涉及所有可变对象，但我怀疑 FindBugs 知道某些常见的违规者。

我通常会小心通过吸气剂暴露内部状态，例如

```
public ArrayList<Trade> getTrades() {
   return trades;
} 
```

方法

1.  客户可能会接触到您的交易清单的变化
2.  客户可能会更改您善意传递的清单

因此，有两种方法。

1.  传递该对象的*不可*变变体（即无法更改的对象）。在上述场景中，您将获取该列表的只读副本并将其传递出去（您可能会争辩说您可以只获取一个简单的读写副本并传递它，因为它不会影响原始对象，但这是违反直觉的)
2.  不要将对象（交易列表）传递出去，而是让拥有对象为您对该集合执行操作。这也许是 OO 的本质——*告诉对象为您做事，而不是向它们询问信息并自己做*。

类似的参数与 setter 和构造函数参数有关。

请注意，您会发现自己在曝光时会复制大量对象以保护自己，并且可能会做很多额外的工作。这是一种明智地使用的技术，值得了解您的客户对象是谁，以及您是否可以控制和/或信任它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T12:31:39.583

Date 对象具有 setMonth 和其他设置器来操作值，因为大多数其他可变对象没有设置器来更改其值（例如 Integer 没有任何设置器）。

```
 Case 1 :

    Date date =  obj.getDate();        
    date.setHours(10);

    Case 2 :

    Integer i = obj.getI();
    i = 10; 
```

Finbug 仅将案例 1 视为安全威胁。

# android - 从 Fragment 将项目添加到操作栏的选项菜单并更改方向后崩溃

> ID：13473165
> 
> 赞同：7
> 
> 时间：2012-11-20T12:23:57.640
> 
> 标签：android, android-layout, android-fragments, actionbarsherlock, viewpagerindicator

我正在使用[ActionBarSherlock](http://actionbarsherlock.com/)和[ViewPagerIndicator](http://viewpagerindicator.com/)将片段显示为选项卡。其中一个片段将项目添加到 ActionBar：

```
private String[] mapNames;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
    // init an String array `mapNames` which is used when populating submenu
    // ...
}
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {

    inflater.inflate(R.menu.fragment_maps, menu);

    SubMenu mapNamesMenu = menu.findItem(R.id.map_names).getSubMenu();
    mapNamesMenu.clear();
    for (int i=0; i<mapNames.length; i++) {
        mapNamesMenu.add(1, i, Menu.NONE, mapNames[i]);
    }

    super.onCreateOptionsMenu(menu, inflater);
} 
```

在`res/menu/fragment_maps.xml`我有

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/map_names"
        android:title="Maps"
        android:icon="@drawable/maps_32"
        android:showAsAction="always|withText">
        <menu>
            <item android:id="@+id/placeholder_maps" />
        </menu>
    </item>
</menu> 
```

在我旋转手机之前一切正常。方向更改后，此菜单将无法访问（单击图标时没有任何反应）。然后，如果我再次旋转手机，我会收到此错误：

```
FATAL EXCEPTION: main
android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?
at android.view.ViewRoot.setView(ViewRoot.java:532)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
at android.view.Window$LocalWindowManager.addView(Window.java:424)
at android.widget.PopupWindow.invokePopup(PopupWindow.java:912)
at android.widget.PopupWindow.showAsDropDown(PopupWindow.java:824)
at com.actionbarsherlock.internal.widget.IcsListPopupWindow.show(IcsListPopupWindow.java:226)
at com.actionbarsherlock.internal.view.menu.MenuPopupHelper.tryShow(MenuPopupHelper.java:129)
at com.actionbarsherlock.internal.view.menu.MenuPopupHelper.show(MenuPopupHelper.java:102)
at com.actionbarsherlock.internal.view.menu.ActionMenuPresenter.onSubMenuSelected(ActionMenuPresenter.java:273)
at com.actionbarsherlock.internal.view.menu.MenuBuilder.dispatchSubMenuSelected(MenuBuilder.java:263)
at com.actionbarsherlock.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:892)
at com.actionbarsherlock.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:510)
at com.actionbarsherlock.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:145)
at android.view.View.performClick(View.java:2494)
at android.view.View$PerformClick.run(View.java:9122)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3806)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

任何想法如何解决它？我使用的是安卓 2.3.6

编辑：查看[测试存储库](https://github.com/Kuitsi/SO_13473165)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T07:32:19.003

我认为，**这是一个上下文问题**。这就是为什么`BadTokenException`正在发生。

这个异常的背后有很多可能性：

1）可能是您`this`在实际需要的某个地方`YourActivity.this`或父活动的上下文中使用“”作为上下文引用。

**或者**

2）据`log-cat`我猜测，您正在尝试显示一个`Pop-up`窗口。

**问题可能是，您过早地显示弹出窗口**（即在`Activity`生命周期完成之前）。所以等到活动生命周期完成。

要推迟显示弹出窗口，您可以参考此[链接](https://stackoverflow.com/questions/4187673/problems-creating-a-popup-window-in-android-activity/4713487#4713487)。

简而言之，这个问题是由于以下用例造成的：

> 活动的引用被传递给某个组件（例如，像 ，`Toast`等），活动被破坏，但该组件仍然存在或试图使用被破坏活动的上下文。`alert dialog``pop-up`

因此，请确保没有任何类似的情况。

希望这会给您一些有关解决问题的提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:57:26.643

**这是您的 MainActivity：**

```
public class BaseSampleActivity extends SherlockFragmentActivity {

        TestFragmentAdapter mAdapter;
        ViewPager mPager;
        PageIndicator mIndicator;

        protected ListFragment mFrag;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);

            setContentView(R.layout.themed_titles);

//This adapter can load as many fragment as you want with different content, see later                  
                    mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

                    mPager = (ViewPager)findViewById(R.id.pager);
                    mPager.setAdapter(mAdapter);
                    mPager.setCurrentItem(1);
                    mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
                    mIndicator.setViewPager(mPager);

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            super.onCreateOptionsMenu(menu);
   //This show how to set up a Searhbar         
             SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
            searchView.setQueryHint("Procure pelo nome");
            searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {

                @Override
                public boolean onQueryTextSubmit(String query) {

                    // TODO Auto-generated method stub
    //              Intent search = new Intent(getApplicationContext(), SearchableActivity.class);
    //              search.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    //              search.putExtra("query", query);
    //              startActivity(search);

                    return true;
                }

                @Override
                public boolean onQueryTextChange(String newText) {
                    // TODO Auto-generated method stub
                    return false;
                }
            });

            menu.add("Search")
                .setIcon(R.drawable.ic_search_inverse)
                .setActionView(searchView)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
   //This is how to set up a SubMenu         
            SubMenu subMenu1 = menu.addSubMenu("Action Item");
            subMenu1.add(0, 1, 0, "Sample");
            subMenu1.add(0, 2, 0, "Menu");
            subMenu1.add(0, 3, 0, "Sair");

            MenuItem subMenu1Item = subMenu1.getItem();
            subMenu1Item.setIcon(R.drawable.ic_title_share_default);
            subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
  //This is a switch case to do when the SubMenu is clicked.              
                case 1:
                    Toast.makeText(BaseSampleActivity.this, "Now "+item.getItemId(), Toast.LENGTH_SHORT).show();
                    return true;
                case 2:
                    Toast.makeText(BaseSampleActivity.this, "Now = "+item.getItemId(), Toast.LENGTH_SHORT).show();
                    return true;
                case 3:
                    Toast.makeText(BaseSampleActivity.this, "Now = "+item.getItemId(), Toast.LENGTH_SHORT).show();

                    return true;

            }
            return super.onOptionsItemSelected(item);
        }

    } 
```

**这是你的 FragmentPagerAdapter：**

```
 class TestFragmentAdapter extends FragmentPagerAdapter implements IconPagerAdapter {
//Here you set up the title of each fragment, its in portuguese.
        protected static final String[] CONTENT = new String[] { "CATEGORIAS", "PRINCIPAL", "AS MELHORES", };
        protected static final int[] ICONS = new int[] {
                R.drawable.perm_group_calendar,
                R.drawable.perm_group_camera,
                R.drawable.perm_group_device_alarms,
        };

        private int mCount = CONTENT.length;

        public TestFragmentAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {Fragment f = null;
        switch(position){
        case 0:
        {
//Here you can set up a lot of diferent fragment content, here I just created a simple //arraylistfragment
        f = new ArrayListFragment();
        // set arguments here, if required
        Bundle args = new Bundle();
        args.putInt(ArrayListFragment.ARG_position, position);
        f.setArguments(args);
        break;
        }
        case 1:
        {
            f = new ArrayListFragment();
            // set arguments here, if required
            Bundle args = new Bundle();
            f.setArguments(args);
            break;
        }
        case 2:
        {   
            f = new ArrayListFragment();
            // set arguments here, if required
            Bundle args = new Bundle();
            f.setArguments(args);
            break;
        }   
        default:
          throw new IllegalArgumentException("not this many fragments: " + position);
        }

        return f;
        }

        @Override
        public int getCount() {
            return mCount;
        }

        @Override
        public CharSequence getPageTitle(int position) {
          return TestFragmentAdapter.CONTENT[position % CONTENT.length];
        }

        @Override
        public int getIconResId(int index) {
          return ICONS[index % ICONS.length];
        }

        public void setCount(int count) {
            if (count > 0 && count <= 10) {
                mCount = count;
                notifyDataSetChanged();
            }
        }
    } 
```

我刚刚做了一个简单的示例，您可以轻松理解如何实现 ActionBarSherlock 和 ViewPagerIndicator。

我想把这个上传到github，但是需要一段时间才能理解怎么做，也许你以后可以教我。

然后我把这个上传到 4shared。[http://www.4shared.com/rar/zOWrvmyu/ViewpagerandSherlock.html](http://www.4shared.com/rar/zOWrvmyu/ViewpagerandSherlock.html)

如果您有任何问题，请稍后再问我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:33:14.983

这对我有用，但我不知道是否有一些副作用。

将此添加到 Fragment 的 onCreate

```
setRetainInstance(true); 
```

这到 AndroidManifest.xml 到包含 Fragment 的 Activity

```
android:configChanges="orientation" 
```

# c# - 如何查看自己是否在 try/catch 块中？

> ID：13473168
> 
> 赞同：2
> 
> 时间：2012-11-20T12:24:08.683
> 
> 标签：c#, debugging, try-catch

使用 Visual Studio 调试 C# 程序时，如何查看正在单步执行的代码是否在 try/catch 块中？

也就是说，如果代码抛出异常，该异常是否会被程序的另一部分捕获？

问题是有一个应用程序在野外使用时容易崩溃，但是我们无法在调试器下复制这里的问题，并且我们*认为*所有异常都被捕获，但显然我们错了！

而且它是一个大型程序，有很多类、事件处理程序和计时器，所以事情的执行顺序并不总是那么简单。

那么，除了不断地通过调用堆栈来查看是否找到了，如何判断程序的哪些部分存在潜在的未捕获异常`try`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:26:03.330

您可能需要[**AppDomain.UnhandledException**](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception%28v=vs.71%29.aspx)

# facebook - 检查登录用户是否匹配

> ID：13473170
> 
> 赞同：2
> 
> 时间：2012-11-20T12:24:11.547
> 
> 标签：facebook, codeigniter, facebook-graph-api

我需要弄清楚如何检查登录 facebook 的用户是否与已经登录我的网络应用程序的用户相同。

我正在为我的网络应用程序使用代码点火器，并将用户 fb id 存储在一个名为 fb_user_id 的会话中。

如何将其与 facebook 上的登录用户匹配，以防止用户注销并登录 facebook 上的另一个帐户，然后在会话过期之前再次使用我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:09:31.400

该[`User`](http://developers.facebook.com/docs/reference/fql/user/)表有一个 `online_presence`您可以使用的字段。你需要获得`user_online_presence`许可。

FQL 查询：

```
SELECT online_presence FROM user WHERE uid=me() 
```

将返回

```
"online_presence": "offline" 
```

如果您是应用程序的当前用户已从 Facebook 注销。

也可以看看：

[如何检查用户是否使用他的 access_token 和图形 api 登录到 facebook](https://stackoverflow.com/questions/5499852/how-to-check-if-a-user-is-logged-into-facebook-using-his-access-token-and-graph?rq=1)

# javascript - dojo dgrid树，子行位置错误

> ID：13473172
> 
> 赞同：2
> 
> 时间：2012-11-20T12:24:26.150
> 
> 标签：javascript, dojo, tree, position, dgrid

我有一个 dgrid，使用树列插件。每次用户单击树时，我都会调用服务器，捕获 subrows(json) 并绑定它。但是当它发生时，这些子行显示在错误的位置，如下图所示。最奇怪的是当我改变分页后，回到第一页后，子行停留在正确的位置。

（请告诉我是否可以理解我的英语，然后我可以尝试改进文本）

![具有错误位置子行的 dgrid](../Images/b57a55bb57c23073b4028373ec037d54.png)

我的 dgrid 代码：

```
 var CustomGrid = declare([OnDemandGrid, Keyboard, Selection, Pagination]);

    var grid = new CustomGrid({
        columns: [
            selector({label: "#", disabled: function(object){ return object.type == 'DOCx'; }}, "radio"),
            {label:'Id', field:'id', sortable: false},
            tree({label: "Title", field:"title", sortable: true, indentWidth:20, allowDuplicates:true}),
            //{label:'Title', field:'title', sortable: false},
            {label:'Count', field:'count', sortable: false}
        ],
        store: this.memoryStore,
        collapseOnRefresh:true,
        pagingLinks: false,
        pagingTextBox: true,
        firstLastArrows: true,
        pageSizeOptions: [10, 15, 25],
        selectionMode: "single", // for Selection; only select a single row at a time
        cellNavigation: false // for Keyboard; allow only row-level keyboard navigation
    }, "grid"); 
```

我的记忆库：

```
loadMemoryStore: function(items){

            this.memoryStore = Observable(new Memory({
                data: items,
                getChildren: function(parent, options){
                    return this.query({parent: parent.id}, options);
                },
                mayHaveChildren: function(parent){
                    return (parent.count != 0) && (parent.type != 'DOC');
                }

            }));

        }, 
```

这一刻我正在绑定子行：

```
 success: function(data){

            for(var i=0; i<data.report.length; i++){
                this.memoryStore.put({id:data.report[i].id, title:data.report[i].created, type:'DOC', parent:this.designId});
            }

        }, 
```

我在想，也许我绑定子行的每一刻，我都可以像在网格上刷新一样，也许可行。我认为分页做同样的事情。

谢谢。

编辑：

我忘记了问题。好吧，我该如何纠正这个错误？如果 dgrid 中的刷新有效。我该怎么做？我在想的其他事情，也许我的 getChildren 是错误的，但我无法识别它。

再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:52:50.940

我的解决方案是从 PARENT hierarquia 更改为 CHILDREN hierarquia。现在工作正常。

我的 dgrid 代码：

```
this.mapReportItems(reportDAO.get()); 
            //this.mapReportItems(x); 
            this.loadMemoryStore(this.reportItems); 

            var CustomGrid = declare([OnDemandGrid, Keyboard, Selection, Pagination]); 

            var grid = new CustomGrid({ 
                columns: [ 
                    selector({label: "#", disabled: function(object){ return object.type == 'DOCx'; }}, "radio"), 
                    {label:'Id', field:'id', sortable: false}, 
                    tree({label: "Title", field:"title", sortable: false, indentWidth:20, shouldExpand:function() { return 0; }}), 
                    //{label:'Title', field:'title', sortable: false}, 
                    {label:'Count', field:'count', sortable: true} 
                ], 
                query: {parent: parent.children }, 
                store: this.memoryStore, 
                deselectOnRefresh: false, 
                //columnReordering:true, 
                collapseOnRefresh:false, 
                pagingLinks: false, 
                pagingTextBox: true, 
                firstLastArrows: true, 
                pageSizeOptions: [10, 15, 25], 
                selectionMode: "single", // for Selection; only select a single row at a time 
                cellNavigation: false // for Keyboard; allow only row-level keyboard navigation 
            }, "grid"); 
```

我的记忆库：

this.memoryStore = Observable(new Memory({ data: items, getChildren: function(parent){

```
 return parent.children; 
        }, 

        mayHaveChildren: function(parent){ 
            //return (parent.count != 0) && (parent.type != 'DOC'); 
            return (parent.children && parent.children.length) || (parent.count != 0 && parent.type != 'DOC'); 
        } 

    })); 
```

这一刻我正在绑定子行：

```
success: function(data){ 

                    var node = this.memoryStore.get(this.designId); 

                    for(var i=0; i<data.report.length; i++){ 
                        node.children.push({id:data.report[i].id, title:data.report[i].created, type:'DOC'}); 
                    } 

                    this.memoryStore.put(node); 
                    this.data = data; 
                }, 
```

额外的信息。在我的情况下，我需要以这种方式映射我的 Json 数据：

```
 this.reportItems = dojo.map(jsondata.reportDesign, function(report) {
                return {
                    //'@uri': report[1],
                    id : report.id,
                    title : report.title,
                    count : report.count,
                    children: [],//report.children,
                    type : report.type
                    //parent : report.parent
                };
            }); 
```

这个链接对我很有用： [https ://github.com/SitePen/dgrid/issues/346](https://github.com/SitePen/dgrid/issues/346)

# python - 如何在python中获取用户的本地时区而不是服务器时区（UTC）？

> ID：13473175
> 
> 赞同：9
> 
> 时间：2012-11-20T12:24:33.623
> 
> 标签：python, datetime, openerp

在 OpenERP 中，当我尝试打印当前日期和时间时，它总是打印“UTC”时间。但我想在用户时区获得时间。每个用户都有不同的时区。`For example 'CST6CDT'`，“美国/太平洋”或“亚洲/加尔各答”。所以我需要在用户时区获取时间，以便我可以在报告中显示正确的日期时间。我尝试使用 datatime 模块中的 localize() 和 replace() 函数更改时区。但我没有得到正确的输出。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T12:34:14.003

知道了。

```
from datetime import datetime
from pytz import timezone

fmt = "%Y-%m-%d %H:%M:%S"

# Current time in UTC
now_utc = datetime.now(timezone('UTC'))
print now_utc.strftime(fmt)

# Convert to US/Pacific time zone
now_pacific = now_utc.astimezone(timezone('US/Pacific'))
print now_pacific.strftime(fmt)

# Convert to Europe/Berlin time zone
now_berlin = now_pacific.astimezone(timezone('Europe/Berlin'))
print now_berlin.strftime(fmt) 
```

礼貌： http: [//www.saltycrane.com/blog/2009/05/converting-time-zones-datetime-objects-python/](http://www.saltycrane.com/blog/2009/05/converting-time-zones-datetime-objects-python/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T13:53:48.357

从 OpenERP 6.1 开始，发生在服务器端（和模块中）的所有 Python 操作的时区都强制为 UTC。这是在不同地方解释的设计决策^([1])。用户时区中日期时间值的呈现意味着仅在客户端完成。

在服务器端使用用户的时区而不是 UTC 的情况很少，但确实在报告中打印日期时间值就是其中之一，因为客户端将没有机会转换结果报告。

这就是为什么报告引擎为此提供了一种实用方法：在`formatLang()`报告上下文中提供的方法（至少基于 RML 的方法）将根据用户的时区格式化日期，如果您使用日期时间值调用它并使用`date_time=True`（它使用`tz`在 RPC 调用中传递的上下文变量并基于用户的时区偏好）您可以找到如何在官方插件中使用它的示例，例如在[交付模块 (l.171)](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/8080/delivery/report/shipping.rml#L171)中。

如果您想知道它实际上是如何进行转换的，请查看[实现。](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/4574/openerp/report/report_sxw.py#L308)`formatLang()`

[1]：请参阅 OpenERP [6.1 发行说明](https://docs.google.com/a/openerp.com/document/d/1OfJzGUsw6fV9Z0uThx1aANC1coN7yuIaBNjFKBdaaCA/edit#heading=h.cc1vqtq9lmj6)、this [other question](https://stackoverflow.com/questions/9919706/openerp-strange-date-time-issue)，以及关于[bug 918257](http://pad.lv/918257)或[bug 925361](http://pad.lv/925361)的评论 #4 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T05:42:39.927

来自：[http ://help.openerp.com/question/30906/how-to-get-users-timezone-for-python/](http://help.openerp.com/question/30906/how-to-get-users-timezone-for-python/)

```
DATETIME_FORMAT = "%Y-%m-%d %H:%M:%S"

import pytz
from openerp import SUPERUSER_ID

# get user's timezone
user_pool = self.pool.get('res.users')
user = user_pool.browse(cr, SUPERUSER_ID, uid)
tz = pytz.timezone(user.context_tz) or pytz.utc

# get localized dates
localized_datetime = pytz.utc.localize(datetime.datetime.strptime(utc_datetime,DATETIME_FORMAT)).astimezone(tz) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-30T07:57:27.680

DateInUTC = <~ 要转换的时间变量

要转换为用户的时区：

```
LocalizedDate = fields.datetime.context_timestamp(cr, uid, DateInUTC, context=context) 
```

要删除偏移量：

```
LocalizedDate = LocalizedDate.replace(tzinfo=None) 
```

# macos - NStableView 可可

> ID：13473177
> 
> 赞同：0
> 
> 时间：2012-11-20T12:24:48.047
> 
> 标签：macos, cocoa, nstableview, nstableviewcell

我`NStableView`用 tableView 控制器填充了我的，它工作正常。我只想知道为什么每当用户将鼠标悬停在表格视图中的特定单元格上时，每次我获取数据（在表格单元格中呈现）时，它就会开始在控制台中显示数据。

我发现`- (NSCell *)tableView:(NSTableView *)tableView dataCellForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row`每次都会调用这个，并且我使用仪器进行堆栈跟踪，这种方法占用了大量内存。

有什么办法可以阻止这种方法每次都绘制数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:51:58.053

将委托 -viewWillMoveToWindow 添加到包含表的视图子类。这里我使用了`BOOL`名为`reloadTable`. [NSTrackingArea](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/EventOverview/MouseTrackingEvents/MouseTrackingEvents.html)是您问题的答案

```
- (void) viewWillMoveToWindow:(NSWindow *)newWindow
{
    // Setup a new tracking area when the view is added to the window.
    NSTrackingArea* trackingArea = [[NSTrackingArea alloc] initWithRect:[yourTable frame]
                options: (NSTrackingMouseEnteredAndExited |  
                NSTrackingActiveAlways|NSTrackingEnabledDuringMouseDrag) owner:self userInfo:nil];
    [self addTrackingArea:trackingArea];

}

- (void) mouseEntered:(NSEvent*)theEvent {
    reloadTable=YES;
    NSLog(@"enter %@",theEvent);

}

- (void) mouseExited:(NSEvent*)theEvent {

     reloadTable=YES;

} 
```

然后在你的`NSTableViewDataSource`方法中使用它

# javascript - 用于访问选择元素/下拉列表的选定值的简单 JavaScript

> ID：13473180
> 
> 赞同：2
> 
> 时间：2012-11-20T12:25:07.620
> 
> 标签：javascript, jquery, select, drop-down-menu, listbox

我知道如何在下拉列表中获取所选项目的值/文本：

```
document.getElementById('selNames').options[document.getElementById('selNames').selectedIndex].value 
```

和

```
document.getElementById('selNames').options[document.getElementById('selNames').selectedIndex].text 
```

这是一个非常大的代码。所以我创建了一个名为 "$$" 的函数，它可以轻松解决这个问题：

```
function $$(id) { return document.getElementById(id) } 
```

并使用它如下分别检索值和文本：

```
$$('selNames').options[$$('selNames').selectedIndex].value
$$('selNames').options[$$('selNames').selectedIndex].text 
```

但我进一步想将此代码最小化如下：

```
$$('selNames').val
$$('selNames').text 
```

我也知道 jQuery，但我不想使用它，因为有时我不需要 jQuery 提供的那么多功能，并且使用较小的文件大小来更快地加载页面资源。

那么，如何制作可以随心所欲的“$$”对象呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:28:43.070

```
function $$(id) { 
    var el = document.getElementById(id);
    return {
        element: el,
        get val() {
            return el.options[el.selectedIndex].value;
        },
        get text() {
        return el.options[el.selectedIndex].text;
        }
    };
} 
```

如果你不反对一些原型摆弄，你可以使用这个：

```
HTMLSelectElement.prototype.__defineGetter__("val", function() { return this.options[this.selectedIndex].value; });
HTMLSelectElement.prototype.__defineGetter__("text", function() { return this.options[this.selectedIndex].text; }); 
```

这是一个演示：http: [//jsfiddle.net/Ynb8j/](http://jsfiddle.net/Ynb8j/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:33:12.607

谢谢阿萨德。从您的脚本中，我扩展以涵盖更多功能。这是在[jsfiddle.net](http://jsfiddle.net/JD2J8/)及以下：

```
<script>
function $$(id, optValue) { 
    var el = document.getElementById(id);
    return {
        element: el,
        get text() {
            return el.options[el.selectedIndex].text;
        },
        get value() {
            if(el.type == 'select-one' || el.type == 'select-multiple')
                return el.options[el.selectedIndex].value;
            else
                return el.value;
        },
        get html() {
            return el.innerHTML
        },
        set html(newValue) {
            el.innerHTML = newValue;
        },
        set text(newText) {
            if(optValue == undefined)
                optValue = el.options[el.selectedIndex].value;
            for(i=0; i<el.length; i++)
                if(el.options[i].value == optValue)
                    el.options[i].text = newText;
        },
        set value(newValue) {
            if(el.type == 'select-one' || el.type == 'select-multiple')
            {   if(optValue == undefined)
                    el.options[el.selectedIndex].value = newValue;
                else
                    for(i=0; i<el.length; i++)
                        if(el.options[i].value == optValue)
                            el.options[i].value = newValue;
            }
            else
                el.value = newValue;
        }
    };
}

function f1() { $$('sel1').text = $$('txt1').value }
function f2() { $$('txt2').value = $$('sel1').text }
function f3() { $$('sel2',($$('txt3').value == '' ? undefined : $$('txt3').value)).value = $$('txt4').value }
function f4() { $$('span1').html = $$('txt5').value }
function f5() { $$('txt6').value = $$('span1').html }
</script>

text: <input id='txt1' /> <input type='button' value='set text' onclick='f1()' /> 
<select id="sel1">
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
    <option value="4">Four</option>
    <option value="5">Five</option>
</select>
<input type='button' value='get text' onclick='f2()' /> <input id='txt2' />
<hr />

current value: <input id='txt3' />, new value: <input id='txt4' /> <input type='button' value='set value' onclick='f3()' /> 
<select id="sel2">
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
    <option value="4">Four</option>
    <option value="5">Five</option>
</select>
<hr />

text: <input id='txt5' /> <input type='button' value='set html' onclick='f4()' /> <span id='span1'>span</span>
<input type='button' value='get html' onclick='f5()' /> <input id='txt6' />
<hr /> 
```

我稍后会尝试原型方法。我只是担心它与旧浏览器的兼容性。

# excel - Excel：如何停止将数字转换为文本字符串并保存为 .csv？

> ID：13473188
> 
> 赞同：0
> 
> 时间：2012-11-20T12:25:37.387
> 
> 标签：excel, export-to-csv

我正在将一些数据保存为 Excel 中的 .csv 文件。然而，数字数据被保存为文本字符串，即数字在结果文件中被“引用”。我该如何防止这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:29:41.410

您的 Excel 列是如何定义的？如果它们被定义为文本，那么这就是你得到的。如果您希望它们为数字，则将列定义/格式化为数字。

# c# - 如何在旅途中生成 IObservable 索引增量？

> ID：13473190
> 
> 赞同：1
> 
> 时间：2012-11-20T12:25:46.380
> 
> 标签：c#, linq, system.reactive, set-difference

我有两个数据源。
其中一个是缓存列表，另一个是通过`IObservable<T>`.

我想使用 Rx 找出需要对缓存列表 A 执行哪些操作，以使其顺序和内容与新数据相同。

我正在寻找一个函数，它接受一个`IEnumerable<T> a`and`IObservable<T> b`并返回一个 observable 来**推动操作（插入和删除），`a`这将使它与`b`不等待`b`完成相同。**

> 注意：我知道我不能修改列表或 observable。我不想。
> 
> 我只想知道，一旦知道*这些操作，哪些操作，以什么顺序*将其顺序和顺序与 A 相同的假设列表变成其顺序和顺序与 B 相同的列表。

`a`和都是`b`唯一的和排序的，`T`实现`IComparable<T>`和`IEquatable<T>`。

```
public static IObservable<Tuple<int, bool>> IndexDelta<T>(
    IEnumerable<T> a,
    IObservable<T> b
) where T : IEquatable<T>, IComparable<T> {
    // ???
} 
```

我将`int`在我的示例中使用 s。

## 什么？！

考虑这两个序列：

```
A: [150, 100, 70, 30, 20]
B: [300, 200, 100, 70, 60, 50, 20] 
```

目标是找到一系列将 A 转换为 B 的删除/插入操作。认为**A 是缓存数据源，B 是新数据，我想知道如何将这些更新转换为网格而不重新加载它。**

行在两个源中排序。

我希望输出形式为

```
[(0, true), (1, true), (0, false), (3, false), (4, true), (5, true)] 
```

稍后我将通过布尔标志对这些操作进行分组：

```
deleted:  [0, 3]
inserted: [0, 1, 4, 5] 
```

这将翻译成人类语言

> 1.  删除 A [0]和 A [3]：
>     
>     
>     
>     > 一个 = [**~~150~~**, 100, 70,**~~30~~**, 20] = [100, 70, 20]
>     
>     
> 2.  将B [0]、 B [1]、 B [4]、 B [5]插入 A：
>     
>     
>     
>     > A = [ **300** , **200** , 100, 70, **60** , **50** , 20]
>     
>     
> 3.  现在 A 与 B 相同。

## 要求

我要注意几件重要的事情：

1.  A 是保证不会更改的列表。B 是一个冷的 observable，它需要一些时间才能完成，但很快就会产生第一个项目。因此，**只要有足够的数据可用，就需要推送结果 observable。**

2.  保证项目在两个来源中都是**唯一**的。`IEquatable<T>`

3.  项目是不可变的，并且**保证**`IComparable<T>`在两个源中使用降序排序。

4.  最好**针对添加到 B 左侧的新项目进行优化**。这是最常见的情况。然而，考虑到它们的时间戳是适当的（不会破坏排序），项目可能会被删除或插入到任何其他位置。想想 iPhone 相机胶卷。

5.  (*) 如果可能的话，我对纯功能解决方案感兴趣。

## 伪代码草图

我草拟了一个伪代码算法，它以命令式的方式实现了这一点。

我编造了`Current`,和语义`MoveNext`，但这个想法应该是有道理的。`await``yield push`

```
IObservable<Tuple<int, bool>> IndexDelta(a, b)
{
    var indexA = 0;
    var indexB = 0;

    while (true) {
        var headA = a.Current;
        var headB = b.Current; 

        if (headA == null && headB == null) {
            return yield break; // both sequences are over
        }

        var reportDeletion = () => {
            yield push Tuple.Create(indexA, false);
            await a.MoveNext(); // this one is fast
        }

        var reportInsertion = () => {
            yield push Tuple.Create(indexB, true);
            await b.MoveNext(); // can take a long time
        }

        if (headA == null) { // No source item at this position
            reportInsertion();
            continue;
        }

        if (headB == null) { // No fetched item at this position
            reportDeletion();
            continue;
        }

        switch (headB.CompareTo(headA)) {
            case 0:
                yield continue;
                break;
            case 1: // Fetched item is newer than source item
                reportInsertion();
                break; 
            case -1: // Source item is newer than fetched item
                reportDeletion();
                break; 
        }

        indexA++;
        indexB++;
    }
} 
```

我相信你可以用`Subject<T>`. 但是我不想继续这个解决方案，因为我想知道是否可以纯粹通过组合 Rx 函数来解决它，例如`Aggregate`,`Zip`或`CombineLatest`.

你觉得呢？你有没有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:38:31.143

似乎工作......：

```
void Main()
{
    var a = new int?[] {150, 100, 70, 30, 20 };
    var b = new int?[] {300, 200, 100, 70, 60, 50, 20 };
    var result = IndexDelta(a, b);
    result.Dump();
}

// Define other methods and classes here
IObservable<Tuple<int, bool>> IndexDelta(IEnumerable<int?> a, IEnumerable<int?> b)
{
    var observable = Observable.Create<Tuple<int, bool>>(o => {
        var indexA = 0;
        var indexB = 0;
        var aEnumerator = a.GetEnumerator();
        var bEnumerator = b.GetEnumerator();
        var aHasNext = aEnumerator.MoveNext();
        var bHasNext = bEnumerator.MoveNext();

        while(true) {
            if (aHasNext == false && bHasNext == false) {
                "Completed".Dump();
                o.OnCompleted(); // both sequences are over
                break;
            }

            var headA = aEnumerator.Current;
            var headB = bEnumerator.Current; 

            headA.Dump("A");
            headB.Dump("B");

            Action reportDeletion = () => {
                o.OnNext(Tuple.Create(indexA, false));
                aHasNext = aEnumerator.MoveNext(); // this one is fast
            };
            Action reportInsertion = () => {
                o.OnNext(Tuple.Create(indexB, true));
                bHasNext = bEnumerator.MoveNext(); // can take a long time
            };

            if (headA == null) { // No source item at this position
                reportInsertion();
                continue;
            }

            if (headB == null) { // No fetched item at this position
                reportDeletion();
                continue;
            }   

            switch (headB.Value.CompareTo(headA.Value)) {
                case 0:     
                    aHasNext = aEnumerator.MoveNext();
                    bHasNext = bEnumerator.MoveNext();
                    indexA++;
                    indexB++;
                    break;
                case 1: // Fetched item is newer than source item
                    reportInsertion();
                    indexB++;
                    break; 
                case -1: // Source item is newer than fetched item
                    reportDeletion();
                    indexA++;
                    break; 
            }           
        }
        return Disposable.Empty;
    });     
    return observable;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T22:31:37.523

此代码基于[Richard 的回答](https://stackoverflow.com/a/13474465/458193)，但适用于任何`T`.
我没能摆脱`ToEnumerable`虽然的诅咒——任何帮助都值得赞赏。

```
IObservable<Tuple<int, T, bool>> IndexDelta<T>(
    IObservable<T> first, IObservable<T> second
)
    where T : IComparable, IEquatable<T>
{
    return Observable.Create<Tuple<int, T, bool>> (o => {
        var a = first.ToEnumerable ().GetEnumerator ();
        var b = second.ToEnumerable ().GetEnumerator ();

        var indexA = -1;
        var indexB = -1;

        var hasNextA = true;
        var hasNextB = true;

        var headA = default(T);
        var headB = default(T);

        Action<bool> advanceA = (bool reportDeletion) => {
            if (reportDeletion) {
                o.OnNext (Tuple.Create (indexA, headA, false));
            }

            if (hasNextA = a.MoveNext ()) {
                indexA++;
                headA = a.Current;
            }
        };

        Action<bool> advanceB = (bool reportInsertion) => {
            if (reportInsertion) {
                o.OnNext (Tuple.Create (indexB, headB, true));
            }

            if (hasNextB = b.MoveNext ()) {
                indexB++;
                headB = b.Current;
            }
        };

        advanceA (false);
        advanceB (false);

        while (true) {
            if (!hasNextA && !hasNextB) {
                o.OnCompleted ();
                break;
            }

            if (!hasNextA) {
                advanceB (true);
                continue;
            } 

            if (!hasNextB) {
                advanceA (true);
                continue;
            } 

            switch (headA.CompareTo (headB)) {
            case 0:
                advanceA (false);
                advanceB (false);
                break;
            case 1:
                advanceA (true);
                break; 
            case -1:
                advanceB (true);
                break; 
            }          
        }

        return Disposable.Create (() => {
            a.Dispose ();
            b.Dispose ();
        });
    });     
} 
```

# javascript - 'y 未定义' Javascript AJAX

> ID：13473191
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:26:00.183
> 
> 标签：javascript, jquery, ajax

抱歉，我对 JS 很陌生，我正在尝试编写一些代码来动态计算页面上的单词，这段代码在“whenkeydown”函数中：

```
var text = $(this).val();

var word=text.split(" ")

    //word counter
function countWords(word, text) {
    var y = word.value; 
    var words = 0;
    a = y.replace(/\s/g, ' ');
    a = a.split(' ');
    for ( z = 0; z < a.length; z++) {
        if (a[z].length > 0)
            words++;
    }
    wordCount = words;
} 
```

但是我在调​​试器中收到一条错误消息，说“TypeError：y is undefined”？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:33:24.247

`word`是一个数组，它没有属性`value`。此外，您的函数似乎接受整个字符串作为参数，而不是单词数组。这是一个更清晰的版本：

```
function countWords(text) {
    var words = text.replace(/\s/g, ' ').split(' ');
    var wordCount = 0;
    for (var z = 0; z < words.length; z++) {
        if (words[z].length > 0)
            wordCount++;
    }

    return wordCount;
}

var text = $(this).val();
var wordCount = countWords(text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:36:02.197

```
function countWords(wordsArray) {
  var words = 0;
  try{ 
    for(k in wordsArray){
      var sa = (wordsArray[k]  ? word.value.replace(/\s/g, ' ') : '').split(' ');
      for (i in sa) if(sa[i].trim()) words++;
    }
  catch(ex){}
  return words;
} 
```

或者：

```
$(this).val().match(/\S+/g).length; 
```

# c# - 错误后如何停止服务？

> ID：13473196
> 
> 赞同：2
> 
> 时间：2012-11-20T12:26:07.400
> 
> 标签：c#, windows-services

我需要优雅地处理代码中的错误并停止服务。

```
protected override void OnStart(string[] args)
{

    oMyObject = new MyObject(args);
    if (oMyObject.RunStartup())
    {

        oThread = new Thread(new ThreadStart(oMyObject.MainLoop));
        oThread.Start();

    }

    base.OnStart(args);

} 
```

oMyObject.RunStartup() 将错误写入事件日志，如果错误则返回 false。

但是，该服务并未停止，并且事件日志显示“服务已成功启动”。

如何在没有显示“服务已成功启动”的事件日志的情况下退出并停止 OnStart() 中的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:55:26.810

您是否尝试过实现`OnStop()`方法而不是尝试检测`OnStart()`方法中的停止？

然后，您应该能够创建一个`ServiceController`实例并检查`Status`服务的属性。

**编辑：**抱歉，这是@Lloyd 答案的扩展（不能发表评论）。

* * *

**更新：**

实际上考虑它只是向`Try` `Catch`您添加一个块就`OnStart()`足以捕获异常（请参阅 OP 上的@Oded 评论）并允许您关闭服务并以您认为合适的方式记录到事件日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:28:25.317

如果我记得你可以打电话`Stop()`，例如：

```
protected override void OnStart(string[] args)
{

    oMyObject = new MyObject(args);

    if (!oMyObject.RunStartup()) {
        Stop();
        return;
    }

    oThread = new Thread(new ThreadStart(oMyObject.MainLoop));
    oThread.Start();

    base.OnStart(args);

} 
```

浏览此处获取更多信息：

[http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.stop.aspx](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.stop.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:30:28.353

做奥德说的。抛出异常并且不捕获它是目前处理此问题的最佳方法。

# java - Java WatchService 和文件系统轮询

> ID：13473199
> 
> 赞同：1
> 
> 时间：2012-11-20T12:26:20.727
> 
> 标签：java, performance, file, filesystems

[WatchService](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)上的 Java 跟踪指出

> 此 API 不是为索引硬盘驱动器而设计的。大多数文件系统实现都对文件更改通知提供本机支持。Watch Service API 在可用的情况下利用此支持。但是，当文件系统不支持这种机制时，Watch Service 会轮询文件系统，等待事件。

我的问题 ：

如果监视的目录*不是*根目录（某些子目录），并且文件系统不支持 I/O 事件通知，因此`WatchService`执行是轮询文件系统，那么这种轮询会减慢整个系统还是只是监听应用程序？

或者，换句话说，考虑到需要服务执行轮询以检测更改的文件系统，是否存在一些阈值（目录深度、文件数量等），使用此技术成为系统性能方面的问题（启动显着影响操作系统性能）？

**注意**：我知道监控高度变化的目录会影响应用程序响应事件的*繁忙*度，并且需要更多的 CPU，而不管文件系统轮询是否。我对监控系统数据文件夹（例如，用户的文档目录）更感兴趣。

# c++ - 如果多个线程使用同一个对象，性能会受到影响吗？

> ID：13473200
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:26:21.023
> 
> 标签：c++, multithreading, performance, object, boost-thread

本例中的对象是带有一些搜索方法的字典。仅读取操作。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-06T00:13:34.783

快速回答：没有。

恰恰相反，它会加速你的程序，特别是如果你有一个需要将大量数据加载到内存中的对象。

只要确保在线程运行时没有任何东西可以写入对象。

# selenium - Selenium/Python:TypeError:undound 方法 get()

> ID：13473202
> 
> 赞同：9
> 
> 时间：2012-11-20T12:26:26.270
> 
> 标签：selenium, python-2.7, selenium-webdriver

我是 Selenium 的 Python 新手。我试图测试我的第一个 python/selenium 代码并得到一个错误。

```
from selenium import webdriver
from selenium.common.exceptions import TimeoutException
from selenium.webdriver.support.ui import WebDriverWait # available since 2.4.0
import time

# Create a new instance of the Firefox driver
driver = webdriver.Firefox

# go to the google home page
driver.get("http://www.google.com") 
```

在这里，我遇到了错误：

```
**TypeError:unbound method get() must be called with Webdriver instance as first argument (got str instance instead)** 
```

有人知道如何解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T12:29:15.870

您需要`()`在`webdriver.Firefox`实际调用类的构造函数并创建一个实例之后。

# php - Zend 框架中的嵌套控制器

> ID：13473210
> 
> 赞同：2
> 
> 时间：2012-11-20T12:27:08.780
> 
> 标签：php, zend-framework, zend-framework-mvc

我正在构建一个 Zend Framework 应用程序并创建了一些与数据库表相对应的控制器，并保存了对这些表执行 CRUD 操作的方法。

我刚刚开始研究`Companies`包含添加、编辑和删除公司的方法的​​控制器。为此，我们可以使用传统的`controller/action`URL 模式：

```
http://example.com/companies/add
http://example.com/companies/edit/some-company 
```

问题是对于每个`Company`我们还需要管理它的`Contacts`and `Machines`：

```
http://example.com/companies/some-company/machines/add
http://example.com/companies/another-company/contacts/edit/some-contact 
```

我只是想不通如何在 Zend Framework 中管理它。我应该通过路由“嵌套”控制器，还是应该使用模块？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:01:41.513

您可以轻松编写自定义路由来处理此问题。例如，这个：

```
http://example.com/companies/some-company/machines/add 
```

将成为您的 .ini 文件：

```
routes.machine.route = "companies/:companyname/machines/:action"
routes.machine.defaults.controller = machines
routes.machine.defaults.action = index 
```

这会将 url 指向`machines`控制器并设置`companyname`为 GET-var。

您可以轻松更改它以适合您喜欢的任何形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:35:40.933

使用**zend**框架默认路由器，您的 url 不起作用。此链接必须有效：

```
 http://example.com/companies/add
 http://example.com/companies/edit/id/some-company
 http://example.com/companies/addmachines/id/some-company//
 http://example.com/companies/contacts/mod/edit/companyid/another-company/ 
```

格式：

```
http://yoursite.com/Module(if available)/Controller/Action/param1/val1/param2/val2/?param3=val3 
```

# iphone - 如何让倒计时计时器以天数显示倒计时？

> ID：13473212
> 
> 赞同：0
> 
> 时间：2012-11-20T12:27:13.770
> 
> 标签：iphone, ios, xcode, cocoa-touch

试图创建一个倒数计时器到某个日期，但我希望它以天而不是月、天显示事物**（比如，2 个月 2 天）**我宁愿让它显示实际天数，比如**“62 天”**我应该怎么做更改代码？谢谢。

这是我用于倒计时的代码。

```
#import "CountdownViewController.h"

@interface CountdownViewController ()

@end

@implementation CountdownViewController;

-(void)updateLabel;
{
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    char units = NSDayCalendarUnit;
    NSDateComponents *components = [calendar components:units fromDate:[NSDate date] toDate:destinationDate options:0];
    [dateLabel setText:[NSString stringWithFormat:@"%dDays", [components day]]];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    destinationDate = [NSDate dateWithTimeIntervalSince1970:1356393600];
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabel) userInfo:nil repeats:YES];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

问题是它只是向我展示了日子部分。我玩了代码以到达上面的代码，但它曾经是这样的

```
-(void)updateLabel;
{
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    char units = NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
    NSDateComponents *components = [calendar components:units fromDate:[NSDate date] toDate:destinationDate options:0];
    [dateLabel setText:[NSString stringWithFormat:@"%d %d %d %d %d", [components month], [components day], [components hour], [components minute], [components second]]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:17:17.673

只需将以下两个方法复制到您的类中，然后在 viewDidLoad 方法中调用启动计时器。您需要在 getCountdownDate 方法中更改所需的日期：

```
timer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(getCountdownDate) userInfo:nil repeats: YES]; 
```

方法是：

```
#pragma mark --
#pragma mark CountDownTimmer takes one date input

-(void)getCountdownDate
{
    NSString *date = @"2013-09-09 20:30:00";
    NSDate *toDate = [self formatADateFromString:date];
    NSLog(@"Date: %@", toDate);

    NSString *remainingCountDown = [self countDownTimerToSpecificDate:toDate];
    NSLog(@"%@", remainingCountDown);
}

-(NSString *)countDownTimerToSpecificDate:(NSDate*)toDateParameter
{
    NSDate *toDate = toDateParameter;
    NSDate *currentDate = [NSDate date];
    NSLog(@"To Date: %@, Current Date: %@", toDate, currentDate);

    int units;
    int months, days, hour, minit, second_t;

    NSDateComponents *components;
    NSCalendar *calender = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    units = NSDayCalendarUnit;
    components = [calender components:units fromDate:currentDate toDate:toDate options:0];
    days = [components day];
    days = days%30;

    units = NSMonthCalendarUnit;
    components = [calender components:units fromDate:currentDate toDate:toDate options:0];
    months = [components day];
    months = months%12;

    //int totalSec = [components second];
    //int month = [components month];
    units = NSHourCalendarUnit;
    components = [calender components:units fromDate:currentDate toDate:toDate options:0];
    hour = [components hour];
    hour = hour%24;

    units = NSMinuteCalendarUnit;
    components = [calender components:units fromDate:currentDate toDate:toDate options:0];
    minit = [components minute];
    minit = minit%60;

    units = NSSecondCalendarUnit;
    components = [calender components:units fromDate:currentDate toDate:toDate options:0];
    second_t = [components second];
    second_t = second_t%60;

    NSString *returnString = [NSString stringWithFormat:@"%d Months, %d Days, %d Hours, %d Minitues, %d Seconds",months, days, hour, minit, second_t];

    //NSLog(@"%@", returnString);
    return returnString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:45:53.057

尝试这种方法从两个日期获取天数..

```
- (int)daysBetweenDates:(NSDate *)dt1:(NSDate *)dt2 {
 int numDays;
 NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
 NSUInteger unitFlags = NSDayCalendarUnit;
 NSDateComponents *components = [gregorian components:unitFlags fromDate:dt1 toDate:dt2 options:0];
 numDays = [components day];
 [gregorian release];
 return numDays;
} 
```

像下面这样使用它..

```
-(void)updateLabel;
{
    int tempdays = [self daysBetweenDates:destinationDate :[NSDate date]];
    [dateLabel setText:[NSString stringWithFormat:@"%dDays", tempdays]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:36:42.093

之前，为您的标签提供价值，在本例中为 dateLabel；您应该连接包含年、月、日或其他任何内容的字符串...

# svn - 是否可以将颠覆中的错误移动转换为真正的 svn mv？

> ID：13473224
> 
> 赞同：2
> 
> 时间：2012-11-20T12:27:43.057
> 
> 标签：svn, add, move

我们有一个 subversion 存储库，并且刚刚发现 subversion 存储库中的文件使用文件系统操作从一个文件夹移动到另一个文件夹，从而导致删除和添加到 subversion。正如预期的那样，文件的历史记录没有被转移到新位置。是否有可能将这个错误完成的移动转换为一个真正的 svn mv 并复制历史记录？问题是提交已经有一段时间了，并且在这个提交之上已经有几个提交。因此，简单的反向合并和适当的移动是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T22:32:51.203

**可以**假设您可以直接访问存储库，可以转储并重新加载它，所以假设。

## 简而言之，步骤是：

1.  [转储存储库。](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.dump.html).
2.  修改转储（见下文）。
3.  [创建一个新的存储库](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.create.html)。
4.  [将修改后的转储加载](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.load.html)到新的存储库中（将转储加载到现有存储库中不会替换内容，而是实际附加。
5.  验证更改。
6.  用新的存储库替换旧的存储库。您需要转储存储库、修改转储、删除、重新创建和加载存储库。

## 所需的转储文件修改

您在转储文件中的错误移动操作将如下所示：

```
Revision-number: 2
Prop-content-length: 111
Content-length: 111

K 7
svn:log
V 13
Wrong rename.
K 10
svn:author
V 3
tom
K 8
svn:date
V 27
2012-11-22T22:11:49.101403Z
PROPS-END

Node-path: renamed file.txt
Node-kind: file
Node-action: add
Prop-content-length: 10
Text-content-length: 8
Text-content-md5: 226648ec2921fddba76a340ac976f760
Text-content-sha1: 18cc7289b71fd17898ca179dcb3a05f3d2a07e8b
Content-length: 18

PROPS-END
Content!

Node-path: file.txt
Node-action: delete 
```

为了进一步阅读[转储文件规范](https://svn.apache.org/repos/asf/subversion/trunk/notes/dump-load-format.txt)，值得一试，但是对于您的问题，只有一小部分条目是相关的：有两个节点，一个带有`Node-action: add`，另一个带有`Node-action: delete`。您需要做的就是修改转储，使其看起来像：

```
Revision-number: 2
Prop-content-length: 111
Content-length: 111

K 7
svn:log
V 13
Right rename.
K 10
svn:author
V 3
tom
K 8
svn:date
V 27
2012-11-22T22:13:51.674043Z
PROPS-END

Node-path: renamed file.txt
Node-kind: file
Node-action: add
Node-copyfrom-rev: 1
Node-copyfrom-path: file.txt
Text-copy-source-md5: 226648ec2921fddba76a340ac976f760
Text-copy-source-sha1: 18cc7289b71fd17898ca179dcb3a05f3d2a07e8b

Node-path: file.txt
Node-action: delete 
```

因此，您需要*更换*

```
 Prop-content-length: <a>
    Text-content-length: <b>
    Text-content-md5: <md5>
    Text-content-sha1: <sha1>
    Content-length: <e> 
```

和

```
 Node-copyfrom-rev: <correct revision>
    Node-copyfrom-path: <correct path>
    Text-copy-source-md5: <md5>
    Text-copy-source-sha1: <sha1> 
```

并*删除*文件的实际内容。

`delete`动作保持不变。

# android - 在 Android 应用中缓冲 youtube 视频

> ID：13473227
> 
> 赞同：1
> 
> 时间：2012-11-20T12:27:59.080
> 
> 标签：android, youtube

关注 stackoverflow 讨论[Android YouTube app Play Video Intent](https://stackoverflow.com/questions/574195/android-youtube-app-play-video-intent?answertab=active#tab-top)

我试过这段代码，但没有用

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=cxLG2wtE7TM"))); 
```

我在控制台中收到此错误，但在 logcat 中没有输出：

```
[2012-11-20 17:49:21 - Youtube] Installation failed due to invalid URI!
[2012-11-20 17:49:21 - Youtube] Please check logcat output for more details.
[2012-11-20 17:49:22 - Youtube] Launch canceled! 
```

Logcat没有任何错误记录......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:37:30.750

这可能会帮助您：

[关联](https://stackoverflow.com/a/7334252/1627599)

您发布的代码有轻微的暗示性变化

# word - 我有两个字整数

> ID：13473231
> 
> 赞同：1
> 
> 时间：2012-11-20T12:28:10.807
> 
> 标签：word, 32-bit

我正在组装一个家庭作业问题，每个单词都是 16 位的。所以我有一个两个字的 32 位整数。高位在 R1（寄存器 1）中，低位在 R0（寄存器 0）中。所以这个数字就是“R1R0”。我应该把它当作一个连续的数字，所以想象这个数字只是两者的结合。所以我想将 R1R0 作为一个正数，所以如果它是负数，我想取 R1R0 的 NOT 并加 1，因为它是一个 2 的补数，这样做会将它变成一个正数。我的问题是，如果你取 R1R0 的 NOT 并且 R0 之前是正数，然后从 NOT 变成负数，我该怎么办？我应该从 R1 结转并从 R1 中减去 1 吗？

# java - 如何检查分离的实体是否已更改？

> ID：13473232
> 
> 赞同：1
> 
> 时间：2012-11-20T12:28:09.720
> 
> 标签：java, jakarta-ee, jsf-2, entity

我有 JSF 项目。我有 JPA 实体来保存数据。在前端，用户可以编辑分离的实体并通过单击保存按钮将日期发送到后端。

但是用户可能忘记保存数据并单击项目中的另一个页面。在这种情况下，应用程序应该警告用户用户丢失了未保存的数据。

是否可以检查分离的实体是否已更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:34:08.303

由于您希望页面控制这一点，因此您应该使用 javascript 来控制它，这是控制浏览器何时想要卸载页面的唯一框架。

定义`body.onunload`处理程序，并将来自 JSF bean 的数据放入两次；一次在版本字段中，其他在隐藏字段中。在 onunload 中，比较 hidden 和 edition 字段。如果您使用 ajax，请在`save`按钮中`oncomplete`（或使用`render`属性，使用新值更新隐藏字段）。

# c++ - c ++检查字符串是否包含字符以及如何将二进制字符串转换为整数

> ID：13473238
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:28:24.280
> 
> 标签：c++, string, binary, base-conversion

我有一个像“01001111111”这样的二进制字符串。我想知道该字符串是否包含“0”。怎么做 ？如果我想将它转换成整数，如何得到呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:31:07.563

由于这似乎是一项家庭作业，因此提供完整的解决方案并不是一个好主意。

但是，我会给你这个提示：

*   [`std::bitset`](http://en.cppreference.com/w/cpp/utility/bitset)
*   [`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)以及`<algorithm>`标题中的相关功能。

**如果您学会巧妙地使用它们，**这两者一起应该可以解决您的问题。

# wordpress - 将 wordpress 从 2.8 更新到 3.4 时出错

> ID：13473250
> 
> 赞同：0
> 
> 时间：2012-11-20T12:29:06.380
> 
> 标签：wordpress, upgrade

我需要将旧的 WP 版本从 2.8 更新到 3.4。自动更新时，我首先收到维护通知，然后出现错误。手动更新时，我也会遇到同样的错误。

致命错误：require() [function.require]：在 /wp-settings.php 中打开所需的 '/wp-includes/classes.php' (include_path='.:/usr/local/zend/share/pear') 失败在第 68 行 [http://3ddom.ru/](http://3ddom.ru/)

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:40:21.220

好像`/wp-includes/classes.php`不见了。你如何进行手动更新？您应该删除`/wp-admin/`,`/wp-includes/`以及根目录中的所有文件，**除了** `wp-config.php`您在那里拥有的任何自定义文件。如果您不确定应该删除什么，只需创建一个新目录（例如`/~temp`）并放置除`/wp-content/`and之外的所有内容`/wp-config.php`。

然后上传最新`/wp-admin/`的`/wp-includes/`和根文件，然后重试。

# php - Symfony2 控制台 HelperSet

> ID：13473252
> 
> 赞同：0
> 
> 时间：2012-11-20T12:29:17.070
> 
> 标签：php, symfony, console, doctrine-orm

我正在使用 Symfony2 组件制作应用程序，但我被 symfony 控制台卡住了。问题是我初始化控制台

```
$objectRepository = ObjectRepository::getInstance();

$console = $objectRepository->get('console');
if ( ! $console instanceof \Symfony\Component\Console\Application) {
    echo 'Failed to initialize console.' . PHP_EOL;
}

$helperSet = $console->getHelperSet();
$helperSet->set(new EntityManagerHelper($objectRepository->get('entity_manager')), 'em');

$console->run(); 
```

而且我有学说创建命令别名，它是

```
namespace My\Console\Command;

use Doctrine\ORM\Tools\Console\Command\SchemaTool\CreateCommand as BaseCommand;

class CreateCommand extends BaseCommand
{
    protected function configure()
    {
        parent::configure();

        $this->setName('doctrine:schema:update');
    }

} 
```

Doctrine\ORM\Tools\Console\Command\SchemaTool\CreateCommand 正在使用 em 助手，问题出在[Symfony\Component\Console\Application doRun() 方法中](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Application.php#L192)

```
$command = $this->find($name);
$this->runningCommand = $command;
$statusCode = $command->run($input, $output); 
```

应用程序在 HelperSet 中保留了 3 个助手，它们是（对话框、格式、实体管理器和 em（em 是 entityManager 的别名））。找到命令后，命令不继承应用程序助手集，只有默认对话框和格式助手。

我有扩展 symfony 默认 Application 类并重写 doRun() 方法的解决方案，但这不是最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:59:53.150

看起来应用程序和命令可以有不同的帮助集，所以我解决了问题

```
namespace My\Console\Command;

use Doctrine\ORM\Tools\Console\Command\SchemaTool\CreateCommand as BaseCommand;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;

class CreateCommand extends BaseCommand
{

    protected function configure()
    {
        parent::configure();

        $this->setName('doctrine:schema:create');
    }

    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $this->setHelperSet($this->getApplication()->getHelperSet());

        parent::execute($input, $output);
    }

} 
```

# jquery - Jsonp /Ajax 返回 - 语法错误：标签无效

> ID：13473259
> 
> 赞同：2
> 
> 时间：2012-11-20T12:29:41.870
> 
> 标签：jquery, jsonp

我的代码如下所示..不确定是什么问题..

```
<script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

<script type="text/javascript">
jQuery.getJSON("http://dev9.edisbest.com/json.php?symbol=IBM&callback=?", 
function(data) {
    alert("Symbol: " + data.symbol + ", Price: " + data.price);
});
</script> 
```

我的 JSON.PHP 页面代码如下

```
<?
header("Content-Type: application/json");
print json_encode(array("symbol" => "IBM", "price" => 91.42));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:41:08.910

看起来从`dev9.edisbest.com`服务器返回的 JSON 字符串无效。

现在返回：

```
{symbol: 'IBM', price: 91.42} 
```

这是无效的。考虑在您的 PHP 后端包含以下行：

```
<?php
$json = json_encode(array(
    "symbol" => "IBM",
    "price" => 91.42
));

header("Content-Type: application/json");
print $_GET['callback'] . "(" . $json . ")";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:37:13.373

试试这个： alert("Symbol: " + data['symbol'] + ", Price: " + data['price']);

# vba - 无法在 Excel VBA 中对行进行分组

> ID：13473262
> 
> 赞同：0
> 
> 时间：2012-11-20T12:29:58.967
> 
> 标签：vba, excel, excel-2007

我在 Excel-VBA 中有一点小事。我有 114000 行数据，每行都有一个唯一的标志。我想使用 Excel>Data>Group 函数对它们进行分组。我录制了一个宏，并在此基础上编写了以下代码：

```
Sub Macro2()

Dim i As Double

With ActiveSheet.Outline
    .AutomaticStyles = False
    .SummaryRow = xlAbove
    .SummaryColumn = xlLeft
End With

For i = 1 To 141163

If Range("B" & i).Value = 9 Then
Rows("i:i").Select
Selection.Rows.Group

End If

Next i

End Sub 
```

我收到运行时错误 1005 `Rows("i:i").Select`。建议？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:02:36.870

用引号括起来采用文字值“i”而不是变量定义。尝试以下操作：

```
Rows(i & ":" & i).Select 
```

# tsql - 仅在组中排名前 10

> ID：13473265
> 
> 赞同：1
> 
> 时间：2012-11-20T12:30:09.820
> 
> 标签：tsql, group-by

我有以下最终选择语句：

```
SELECT   ReportingDate
         ,PortfolioID
         ,IssueNme
         ,ROW_NUMBER() OVER (PARTITION BY PortfolioID ORDER BY SUM(Percentage) DESC) AS [Rank]
         ,CAST(SUM(Percentage) AS DECIMAL(22,1)) AS [Weight]
FROM     @Worktable as WT
WHERE    WT.IssueType1 IN ('020')
GROUP BY WT.ReportingDate, WT.PortfolioID, WT.IssueNme
ORDER BY [Weight] DESC 
```

但是，我只想查看每个组合 ID 的前 10 名。我将如何做到这一点，以确保我获得分组的每个 PortfolioID 的前 10 名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:41:03.350

您可以使用`CTE`. 我会`RANK`改用，但是每组你可能会得到超过 10 个。

```
WITH CTE AS
(
  SELECT 
      RANK() OVER (PARTITION BY PortfolioID ORDER BY SUM(Percentage) DESC) AS [RANK]
  ,   ReportingDate
  ,   PortfolioID
  ,   IssueNme
  ,   CAST(SUM(Percentage) AS DECIMAL(22,1))  AS [Weight]
  FROM @Worktable as WT
  WHERE WT.IssueType1 IN ('020')
  GROUP BY WT.ReportingDate, WT.PortfolioID, WT.IssueNme
)
SELECT 
  ReportingDate
, PortfolioID
, IssueNme
, [Weight]
FROM CTE
WHERE [RANK] <= 10
ORDER BY [Weight] DESC 
```

[**排名功能**](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

# join - Crystal Reports - 条形图 - 连接表中的项目计数与主表中的字段，主表中其他字段的更改

> ID：13473266
> 
> 赞同：0
> 
> 时间：2012-11-20T12:30:09.530
> 
> 标签：join, crystal-reports, charts, count, average

因此，场景是：

*   列表表包含 ID、视图、特色（0 或 1）。
*   应用程序表包含应用程序
*   在listings.id=application.listing_id 上列出left-outer-joins 应用程序

到目前为止，一切都相当简单。

我正在尝试制作一个条形图，其中包含标准（listings.featured=0）和特色（listings.featured=1）项目之间的比较。我希望每个视图的应用程序（即该类别中所有列表的应用程序计数/listings.views 的总和）为标准和相同的特色，两个项目在图表中显示，每个项目都有一个条形。该图表位于报告页脚中，因此应该可以访问完整的数据集。

*   因此，我有 Chart Expert 数据 -> On the change of set to features。这行得通。
*   问题是平均值完全不正常。

我试过了：

*   各种加权平均值
*   公式如
    *   计数（{cr_applications.id}）/{cr_listings.views}
    *   计数（{cr_applications.id}）/总和（{cr_listings.views}）

如果有帮助，将获得正确输出的 SQL 查询是：

```
SELECT 
    l.featured, 
    count(l.id) job_count,
    sum(l.views) total_views,
    avg(l.views) avg_views, 
    count(a.id) app_count, 
    count(a.id)/count(l.id) apps_per_job,
    count(a.id)/sum(l.views) apps_per_view
FROM
    listings l
LEFT JOIN 
     applications a ON l.id = a.listing_id
GROUP BY l.featured 
```

我很困惑，因为 Crystal 报告在这里的数学完全错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:36:58.440

我在listing.featured字段上使用了一个分组，然后是一个简单的公式字段：

```
distinctcount({applicant.applicant_id}, {listing.featured})
/
distinctcount({listing.listing_id}, {listing.featured}) 
```

![在此处输入图像描述](../Images/2c0dc3d57b7113debf735e4f6a85b5c2.png)

我已在此处上传报告供您检查（带有数据）：http: [//snk.to/f-czjaxeam](http://snk.to/f-czjaxeam)

# xml - XSLT 生成另一个 XSLT 脚本

> ID：13473268
> 
> 赞同：10
> 
> 时间：2012-11-20T12:30:21.523
> 
> 标签：xml, xslt

在这个线程中，我参考了我的最后一个线程：[Convert XML to CSV using XSLT-dynamic columns](https://stackoverflow.com/questions/13287865/convert-xml-to-csv-using-xslt-dynamic-columns)。

引用线程中的*XSLT脚本运行良好，但对于大型**XML*文档，性能不佳。现在我想编写一个输出另一个 XSLT 脚本的 XSLT 脚本，该脚本将输出最终的*CSV*文件。

**问题：**

如何编写第一个 XSLT 脚本？输出应如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/*">
    <xsl:text>Name;</xsl:text>
    <xsl:text>Brother;</xsl:text>
    <xsl:text>Sister</xsl:text>
    <-- this part is dynamic -->
    <xsl:apply-templates select="Person" />
</xsl:template>

<xsl:template match="Person">
    <xsl:value-of select="Name" />
    <xsl:value-of select="Brother" />
    <xsl:value-of select="Sister" />
    <-- this part is dynamic too -->
    <xsl:text>&#10;</xsl:text>
</xsl:template>
</xsl:stylesheet> 
```

输入 XML 文件与引用线程中的相同：

```
<Person>
    <Name>John</Name>
    <FamilyMembers>
        <FamilyMember>
            <Name>Lisa</Name>
            <Type>Sister</Type>
        </FamilyMember>
        <FamilyMember>
            <Name>Tom</Name>
            <Type>Brother</Type>
        </FamilyMember>
    </FamilyMembers>
</Person>
<Person>
    <Name>Daniel</Name>
    <FamilyMembers>
        <FamilyMember>
            <Name>Peter</Name>
            <Type>Father</Type>
        </FamilyMember>
    </FamilyMembers>
</Person> 
```

对于每个不同类型的元素，在生成的 XSLT 脚本中应该有如下一行：

```
<xsl:text>Type;</xsl:text> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-20T12:36:00.800

要编写一个输出另一个 XSLT 的 XSLT，您需要使用 生成输出元素`<xsl:element>`，例如

```
<xsl:element name="xsl:text"> 
```

或者`<xsl:namespace-alias>`如果您想使用文字结果元素，请使用。[XSLT 规范](http://www.w3.org/TR/xslt#literal-result-element)有一个例子：

```
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fo="http://www.w3.org/1999/XSL/Format"
  xmlns:axsl="http://www.w3.org/1999/XSL/TransformAlias">

<xsl:namespace-alias stylesheet-prefix="axsl" result-prefix="xsl"/>

<xsl:template match="/">
  <axsl:stylesheet>
    <xsl:apply-templates/>
  </axsl:stylesheet>
</xsl:template> 
```

样式表中的任何`<axsl:...>`元素都将成为`<xsl:...>`输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:13:06.367

而不是两个外部阶段的解决方案（意味着一个样式表，它编写一个可以执行的样式表），我认为蒂姆的解决方案版本会更好地为您服务，该版本在规模上表现得更好。请使用您的“大型 XML 文档”作为输入来衡量此解决方案的性能。

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" />

<xsl:key name="kTypes" match="Type" use="." />  
<xsl:variable name="distinct-types"
  select="/*/Person/FamilyMembers/FamilyMember/Type[
  generate-id()=generate-id(key('kTypes',.)[1])]" />

<xsl:template match="/">
  <xsl:value-of select="'Name;'" />
  <xsl:for-each select="$distinct-types">
    <xsl:value-of select="." />
    <xsl:if test="position() &lt; last()">
      <xsl:value-of select="';'" />
    </xsl:if>  
  </xsl:for-each>
  <xsl:value-of select="'&#x0A;'" />
  <xsl:apply-templates select="*/Person" />
</xsl:template>

<xsl:template match="Person">
  <xsl:value-of select="concat(Name,';')" />
  <xsl:variable name="family" select="FamilyMembers/FamilyMember" />
  <xsl:for-each select="$distinct-types">
    <xsl:variable name="type" select="string(.)" />
    <xsl:value-of select="$family/self::*[Type=$type]/Name" />
    <xsl:if test="position() &lt; last()">
      <xsl:value-of select="';'" />
    </xsl:if>  
  </xsl:for-each>
  <xsl:value-of select="'&#x0A;'" />
</xsl:template>

</xsl:stylesheet> 
```

**...将转换此输入（或大规模有效地转换其他输入）...**

```
<t>
<Person>
    <Name>John</Name>
    <FamilyMembers>
        <FamilyMember>
            <Name>Lisa</Name>
            <Type>Sister</Type>
        </FamilyMember>
        <FamilyMember>
            <Name>Tom</Name>
            <Type>Brother</Type>
        </FamilyMember>
    </FamilyMembers>
</Person>
<Person>
    <Name>Daniel</Name>
    <FamilyMembers>
        <FamilyMember>
            <Name>Peter</Name>
            <Type>Father</Type>
        </FamilyMember>
    </FamilyMembers>
</Person>
</t> 
```

**...并产生文本...**

```
Name;Sister;Brother;Father
John;Lisa;Tom;
Daniel;;;Peter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:43:32.203

在此处查看为另一个 XSLT 转换生成样式表的 XSLT 转换的实际示例：

[http://dnovatchev.wordpress.com/2006/10/21/a-stylesheet-to-write-xslt-code/](http://dnovatchev.wordpress.com/2006/10/21/a-stylesheet-to-write-xslt-code/)

# c - 列表，C中指针和语义的命名别名

> ID：13473278
> 
> 赞同：1
> 
> 时间：2012-11-20T12:31:14.963
> 
> 标签：c, semantics

作为 C 编程语言项目的一部分，我一直在处理列表。仅供参考，条目和列表的结构是非常基本的数据结构，因此定义为

```
typedef struct entry entry_t;
typedef struct list list_t;

struct entry
{
    void * data;
    entry_t * next;
};

struct list
{
    size_t size;
    entry_t * head;
    entry_t * tail;
}; 
```

`head`并`tail`分别指向第一个和最后一个条目。只是没有像标题这样的开销条目，而是列表中的所有数据条目，因此如果列表中只有一个条目，`head`并且`tail`应该指向相同的条目。此外，还有这样一个片段可以删除列表中的所有条目

```
list_t list;
entry_t * current, * next;
for(
    current=list->head,
    next=current->next,
    free(current);
    current!=list->tail;
    current=next,
    next=current->next,
    free(current)
); 
```

问题是内存地址`current`和`list->tail`指向的值之间的比较是在`current`释放指针后评估的。假设`current`并且`list->tail`现在指向同一个内存块然后`current`被释放，评估的结果是什么，更重要的是，根据您的经验，结果（无论是什么）在所有不同的编译器中都是确定性的吗？就我而言，该程序在 MSVC 中编译并正确运行，这表明内存地址`current`和`list->tail`指向的值在`current`释放后相等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:54:18.513

在这一点上并不重要，但如果你正在清除列表，那么请原谅显而易见的，但谁在乎尾巴（或大小）是什么。无论如何，它们即将失效。为什么不简单：

```
// assuming list is a valid
list_t* list;

while (list->head)
{
    entry_t *tmp = list->head;
    list->head = list->head->next;
    free(tmp);
}
list->head = list->tail = NULL;
list->size = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:02:59.477

从技术上讲，你违反了规则。由 6.2.4 (2)

> 对象的生命周期是程序执行期间保证为其保留存储的部分。一个对象存在，有一个不变的地址，并在其整个生命周期中保留其最后存储的值。如果对象在其生命周期之外被引用，则行为未定义。当指针指向（或刚刚过去）的对象到达其生命周期的末尾时，指针的值变得不确定。

在 C2011 标准的 n1570 草案中（在 C99 标准的同一个地方几乎相同），在`free`ing之后`current`它的值变得不确定（如果`current`碰巧指向与`list->tail`之前相同的对象`free`，那么 的值也`list->tail`变得不确定）。因此在比较中使用它会调用未定义的行为。

在跟踪指针有效性并检查每次比较等的假设实现中，它可能会崩溃或做其他有趣的事情。

~~但是，在实践中，我不希望任何实现能够做到这一点，所以它几乎肯定会产生预期的结果。~~

正如[WhozCraig](https://stackoverflow.com/users/1322972/whozcraig) [指出的那样](https://stackoverflow.com/questions/13473278/list-naming-alias-of-pointers-and-semantics-in-c/13473776#comment18432674_13473776)，实际上有一个平台进行跟踪。但是，这会将所有无效指针视为`NULL`，因此，如果我理解正确的话，即使有问题的代码也会产生预期的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:59:06.053

> 评估的结果是什么

C 标准说结果是未定义的。

> 更重要的是，根据您的经验，结果（无论是什么）在所有不同的编译器中都是确定性的

内存一旦被进程分配，通常在进程终止之前不会返回给操作系统。我所知道的所有编译器都将评估`current!=list->tail`为 false 而不会引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:03:26.937

这是`for loop`实现

```
entry_t *current,*prev,*next;  

  for(
        current = list->head;

        current != NULL;

        prev=current,
        current = current->next,
        free(prev),
        prev=NULL
    ); 
```

# c# - 使用c#从datagrid更新sqlite

> ID：13473281
> 
> 赞同：1
> 
> 时间：2012-11-20T12:31:22.530
> 
> 标签：c#, winforms, datagrid, datagridview

我能够打开数据网格连接，现在在打开后的数据网格中我想通过文本框更新特定值。但是我应该如何使用网格进行更新。

下面是代码

```
 private void button3_Click(object sender, EventArgs e)
    {
        SQLiteConnection connection4 = new SQLiteConnection(@"Data Source = C:\foo.sqlite;Version =3");
        connection4.Open();
        string sql2 = "Update Table set language1= '" + textBoxUpdate1.Text + "' where language1 = '" + textBox_Search.Text + "'";
        SQLiteDataAdapter connect4 = new SQLiteDataAdapter(sql2, connection4);
        DataSet ds4 = new DataSet();
        connect4.Fill(ds4);
        dataGridView.DataSource = ds4.Tables[0];
    } 
```

![数据网格视图](../Images/b6364f73fd38af77e0ba407915bc655b.png)

从图像中我想说我想更新语言 2，所以我将在第二个文本框中输入我将在更新语句中设置的位置，但“位置”我想选择用户在数据网格中突出显示的位置，下面是数据网格选择所在的更新表，在那个地方我想要选择数据网格

喜欢

```
 string sql2 = "Update Table set language1= '" + textBoxUpdate1.Text + "' where language1 = '" + DATAGrid Selection + "'"; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:58:08.040

`DataGridView`您可以检查的公开属性以提取所选内容。[您可以在此MSDN 链接](http://msdn.microsoft.com/en-us/library/x8x9zk5a.aspx)中找到更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:35:37.657

运行以下代码以编辑网格中的特定内容。只需在网格上编辑并按更新按钮。形成以下代码，您可以通过对其进行编辑来编辑特定行，然后按更新按钮

```
 private void button3_Click(object sender, EventArgs e)
    {
        DataTable dt = dataGridView.DataSource as DataTable;
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            if (dt.Rows[i].RowState == DataRowState.Modified)
            {
                MessageBox.Show(dt.Rows[i][3].ToString());
            }
        } 
```

# jquery - jquery validate - 将规则作为数组传递？

> ID：13473284
> 
> 赞同：0
> 
> 时间：2012-11-20T12:31:28.370
> 
> 标签：jquery

我使用 jquery.validate 但我将我的规则作为数组传递，这可能吗？它似乎不起作用，谁能指出我正确的方向？

谢谢！

```
rules:{
            for (var i=0;i<myRules.length;i++)
            { 
                myRules[i]:{
                    required = true;
                }
            }
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:35:41.880

您不能在对象文字中包含语句。

```
var rules = {};
for(var i = 0; i < myRules.length; i++) {
    rules[myRules[i]] = {
        required: true
    };
} 
```

然后`rules: rules`在传递给验证器的对象中使用。

# php - 在 IE 中从另一个域获取 cookie

> ID：13473287
> 
> 赞同：0
> 
> 时间：2012-11-20T12:31:46.720
> 
> 标签：php, javascript, internet-explorer, cookies

我有以下内容：

用户单击`mydomain.com/redirect.php`通过函数获取 cookie（对于 mydomain.com）的链接，`setcookie`然后转到另一个页面（`header('Location: ...');`） - 比如说`lp.html`

然后，在那个页面上有一个脚本： `gs('mydomain.com/getcookie.php', 'client=52', function() {});`这个函数如下：

```
gs = function(path, args, fn) {
        var p = document.head || document.getElementsByTagName("head")[0]
        var s = document.createElement("script");
        p.appendChild(s);
        if (fn) {
            if (s.addEventListener) {
                s.addEventListener('load', fn, false);
            } else if (s.attachEvent) {
                s.attachEvent("onload", function() {
                    fn(window.event)
                });
            } else {
                s["onload"] = fn;
            }
            s.onreadystatechange = function() {
                fn()
            }
        }
        s.src = path + "?" + args;
} 
```

该`getcookie.php`脚本从`$_COOKIE`（因为它在我的域中）获取一个值并返回一个小 js，如下所示：`myParam = 'cookieValue';`供以后在 js 中使用。

所以，这很好用……除了 Internet Explorer。只有当我手动允许它接受所有 cookie 时，它​​才能在那里工作。

**答案**：（感谢决斗）

添加

```
header('P3P: CP="CAO PSA OUR"');
header('P3P: CP="HONK"'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:36:16.697

IE 有一些难以诊断的 cookie 安全问题，请尝试将其添加到页面顶部

```
<?php header('P3P: CP="CAO PSA OUR"'); ?> 
```

查找 Internet Explorer P3P，以了解有关此的更多信息

关于“什么”的一个很好的回应是：[https ://stackoverflow.com/a/5258105/1613391](https://stackoverflow.com/a/5258105/1613391)

# c++ - 如何从头文件中访问类的私有成员？

> ID：13473289
> 
> 赞同：2
> 
> 时间：2012-11-20T12:31:48.370
> 
> 标签：c++, function, inheritance, vector

很抱歉这个问题措辞如此尴尬，因为我不知道该怎么问。在任何情况下，我都有一个名为“aItem”的类的实现文件和头文件，其中包含 aItem 对象的向量。

在名为“bag”的第二个文件中，我希望能够列出上述向量的所有元素。我最初将“包”分为头文件和实现文件，但编译器对“未声明的引用”表示不满意，直到我合并这两个文件。无论如何，该部分正在工作。

我希望 bag.h（更具体地说是 addItem 函数）能够访问已创建项目的 m_itemName 变量。

aItem.cpp：

```
//aItem .cpp implementation file
#include "aItem.h"
#include <iostream>
#include <string>
#include <vector>
using namespace std;

//setting this up default
aItem::aItem()
{
    m_itemName = "Default Name";
    m_itemType = "Default Type";
    m_damage     = 9001;
}

void aItem::setName(string name)
{
    m_itemName = name;
}

void aItem::setType(string type)
{
    m_itemType = type;
}

void aItem::setDamage(int damage)
{
    m_damage = damage;
}

string aItem::getName()
{
    return m_itemName;
}

string aItem::getType()
{
    return m_itemType;
}

int aItem::getDamage()
{
    return m_damage;
} 
```

aItem.h：

```
#ifndef AITEM_H_INCLUDED
#define AITEM_H_INCLUDED

#include <iostream>
#include <string>
#include <vector>
using namespace std;

class aItem
{
public:
    //constructor
    aItem();

    //Methods
    void ItemCreate(string itemName, string itemType, int damage);
    void setName(string name);
    void setType(string type);
    void setDamage(int damage);
    string getName();
    string getType();
    int getDamage();

private:

    string  m_itemName;
    string  m_itemType;
    int m_damage;

};

#endif // AITEM_H_INCLUDED 
```

袋子.h：

```
#ifndef BAG_H_INCLUDED
#define BAG_H_INCLUDED

#include "aItem.h"
#include <iostream>
#include <string>
#include <vector>
using namespace std;
class aItem;

class bag : public aItem
{
public:
    //constructor
    bag();

    //methods
    //void delItem(aItem aitem);

void addItem(aItem var)
    {
        m_items.push_back(var);
    }

void bagList()
    {
        for( vector<aItem>::size_type index = 0; index < m_items.size(); index++ )
            {
                //Makes a numerical list.
                cout << "Item " << index + 1 << ": " <<  m_items[index].m_itemName << endl;
                index+= 1;
            }
    }
private:
     vector<aItem> m_items;
};

#endif // BAG_H_INCLUDED 
```

...最后，main.cpp：

```
// WHYGODWHY.cpp : Defines the entry point for the console application.
//

#include "aItem.h"
#include "bag.h"
#include <iostream>
using namespace std;

int main()
{
    aItem woodSword;
    woodSword.setName("Wooden Sword");
    woodSword.setDamage(3);
    woodSword.setType("WPN");

    bag inventory;
    inventory.addItem(woodSword);
    inventory.bagList();

    cout << "Name: " << woodSword.getName() << endl;
    cout << "Type: " << woodSword.getType() << endl;
    cout << "Damage: " << woodSword.getDamage() << endl;
    //cout << "Inv: " <<
    int pause = 0;
    cout << "Pause!";
    cin >> pause;

    return 0;
} 
```

编辑：这是错误消息：C:\Users\dmarr\Documents\CSharper\Dallas\CPlusPlus\WHYGODWHYCB\aItem.h||在成员函数 'void bag::bagList()':| C:\Users\dmarr\Documents\CSharper\Dallas\CPlusPlus\WHYGODWHYCB\aItem.h|28|错误：'std::string aItem::m_itemName' 是私有的| C:\Users\dmarr\Documents\CSharper\Dallas\CPlusPlus\WHYGODWHYCB\bag.h|32|错误：在此上下文中| ||=== 构建完成：2 个错误，0 个警告 ===|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:37:58.550

既然您已经拥有名称的公共访问器，为什么不使用它们呢？

```
cout << "Item " << index + 1 << ": " <<  m_items[index].getName() << endl; 
```

考虑将访问器更改为`const`并返回`const`引用：

```
const std::string& getName() const; 
```

除此之外还有其他问题。特别是，C++ 中的容器不保存多态对象，因此 a`std::vector<aItem>`只能保存`aItem`（但不能保存`bag`对象）。在完全不同的层面上，重新考虑您的命名约定，将类型（这是不同对象的类别）名称作为*Item 的一个实体*`aItem`几乎没有意义。这也和名字不符...*`bag`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:39:01.900

使用您班级的公共界面。所以而不是使用

```
cout << "Item " << index + 1 << ": " <<  m_items[index].m_itemName << endl; 
```

做

```
cout << "Item " << index + 1 << ": " <<  m_items[index].getName() << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:41:56.193

我建议调用`getName()`方法而不是直接访问类的成员。另外，为什么在这种情况下`bag`继承自？`aItem`如果我正确理解您要执行的操作，则 a`bag`不是 a`aItem`因此它不应继承`aItem`并应使用访问方法而不是直接成员访问。作为替代方案，您可以按照 WhozCraig 的建议将 bag 声明为 aItem 的朋友。*

# solr - 使用 Solr 处理变音符号和重音符号

> ID：13473292
> 
> 赞同：3
> 
> 时间：2012-11-20T12:32:10.840
> 
> 标签：solr, indexing, ascii, diacritics

我们使用 Solr 3.6 来索引文档集合 (DBLP)。一些文件的元数据是德文的。为了处理元音变音和重音，我们使用 ASCIIFoldingFilterFactory（参见 schema.xml）。

搜索`title:Unterstutzung`多个结果时返回，但搜索时`title:Unterstützung`没有结果，即使有文档在其标题字段中有*Unterstützung 。*

在管理 Web 界面中使用分析器显示查询词和文档词已按预期编入索引和处理。但是，当查询中有变音符号时，为什么我们没有得到任何结果？

schema.xml 中标题字段的定义：

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
                    <analyzer type="index">
                            <charFilter class="solr.HTMLStripCharFilterFactory"/>
                            <tokenizer class="solr.StandardTokenizerFactory"/>
                            <filter class="solr.ASCIIFoldingFilterFactory"/>
                            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="1" splitOnCaseChange="1" preserveOriginal="1"/>
                            <filter class="solr.LowerCaseFilterFactory"/>
                            <filter class="solr.EnglishPorterFilterFactory"/>
                            <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
                    </analyzer>
                    <analyzer type="query">
                            <tokenizer class="solr.StandardTokenizerFactory"/>
                            <filter class="solr.ASCIIFoldingFilterFactory"/>
                            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1" preserveOriginal="1"/>
                            <filter class="solr.LowerCaseFilterFactory"/>
                            <filter class="solr.EnglishPorterFilterFactory"/>
                            <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
                    </analyzer>
            </fieldType> 
```

完整的 schema.xml： http: [//pastebin.com/rQDw30nA](http://pastebin.com/rQDw30nA)

文档和查询中 Unterstützung 的分析器输出： [http :](http://pastebin.com/6cxSnGwP) *//pastebin.com/6cxSnGwP*（在查询中，处理过的术语*unterstutzung*突出显示）

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:01:54.780

这是 Tomcat 的一个简单编码问题。必须将以下属性添加到 server.xml：

```
<Server ...>
 <Service ...>
   <Connector ... URIEncoding="UTF-8"/>
     ...
   </Connector>
 </Service>
</Server> 
```

[http://wiki.apache.org/solr/SolrTomcat#URI_Charset_Config](http://wiki.apache.org/solr/SolrTomcat#URI_Charset_Config)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T04:01:16.190

一年前我在 Solr 1.4 上遇到过类似的问题，我不太确定它是否也适合你，但是使用映射过滤器可以帮助你解决这个问题，除了 ascii 折叠之外，我的架构中还有相关部分

```
 <analyzer type="index">
    <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
</analyzer>
<analyzer type="query">
     <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
     <tokenizer class="solr.WhitespaceTokenizerFactory"/>
     <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true" tokenizerFactory="solr.WhitespaceTokenizerFactory"/>
     <filter class="solr.ASCIIFoldingFilterFactory"/>
         <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
         <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
         <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
 </analyzer> 
```

映射文件只是一个具有映射的文本文件，`'unicode' => 'Mapped char'`您可以根据谷歌上的语言找到大量示例...

我希望它有帮助*

# javascript - javascript 在 Internet Explorer 上不起作用

> ID：13473293
> 
> 赞同：2
> 
> 时间：2012-11-20T12:32:12.273
> 
> 标签：javascript, html

我有这个 javascript 代码：

```
<script type="text/javascript">
    $(document).ready(function()
    {
        $('table#delTable td a.delete').click(function()
        {
            if (confirm("Are you sure you want to delete this row?"))
            {
                var id = $(this).parent().parent().attr('id');
                var data = 'id=' + id ;
                var parent = $(this).parent().parent();

                $.ajax(
                {
                       type: "POST",
                       url: "delete_row.php",
                       data: data,
                       cache: false,

                       success: function()
                       {
                            parent.fadeOut('slow', function() {$(this).remove();});
                       }
                 });                
            }
        });

        $('table#delTable tr:odd').css('background',' #FFFFFF');
    });

</script> 
```

这就是触发它的原因

```
<a href="#" class="delete" style="color:#FF0000;"> 
```

我用它从mysql中删除数据库行。它在 Firefox、Safari 上运行良好，但在 Internet Explorer 上没有任何反应。我在 ie7 和 ie9 上试过，没有结果。你能给我一个关于我的问题的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:36:33.763

尝试`dataType:'html',`在您的 ajax 请求中添加。

# django - django-webtest 在页面上测试 URL

> ID：13473298
> 
> 赞同：0
> 
> 时间：2012-11-20T12:32:55.810
> 
> 标签：django, python-2.7, webtest

如何使用 django-webtest 获取页面上所有链接的列表？

就我而言，我想根据用户的权限测试用户在页面上是否具有适当的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:19:17.463

好的，我想我发现了如何获取页面上所有 url 的列表：

```
assert False, response.click(verbose=True) 
```

这将打印 webtest 在页面上找到的所有 url 元素，如果它被接受或跳过，则带有反馈。

# wcf - WCF 服务托管在 IIS、SQLDependency 中

> ID：13473299
> 
> 赞同：1
> 
> 时间：2012-11-20T12:32:58.170
> 
> 标签：wcf, sqldependency

我在互联网上搜索了每隔几分钟从 IIS 中托管的 WCF 服务轮询一次数据库，我能得到的最佳答案是使用 SQL 依赖关系。我找到了很多关于如何使用 SQL Dependency 的文章，但我的问题是：

如果服务长时间没有活动，在需要轮询的表中插入了一条新记录，服务是否会被告警。如果没有活动，IIS 让服务休眠。SQLDependency 是否唤醒服务？

# typo3-flow - 如何链接 FLOW3 和 TYPO3 4.5？

> ID：13473302
> 
> 赞同：0
> 
> 时间：2012-11-20T12:33:00.477
> 
> 标签：typo3-flow

[我使用http://local.flow3.in/](http://local.flow3.in/)中的终端命令在[http://local.typo3.in/](http://local.typo3.in/)和 FLOW3中安装了 TYPO3（空白包，版本 4.5.16）。

然后我使用 FLOW3 创建了一个新包。我可以从我的 TYPO3 网站访问这个包吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:08:03.230

不，你不能。

NEOS 之前的 TYPO3 与 FLOW3 的包不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:48:00.100

关于 TYPO3 Flow 的性能，请使用 PHP 5.4，与 5.3 相比增益巨大，即使在开发模式下也是如此。

# magento - 如何在 Magento 1.7 中删除自定义选项 +$10.00

> ID：13473305
> 
> 赞同：9
> 
> 时间：2012-11-20T12:33:05.567
> 
> 标签：magento

您好，我正在使用 magento 1.7。我有可配置产品和简单产品都有自定义选项...我想删除选项旁边的 +$10.00 示例：自定义选项：大 +$5.00 我希望它显示为大...我仍然希望价格在产品的查看页面上更新。我尝试编辑 js/varien/product.js 注释掉 str+ 但没有用

```
//str+= ' ' + this.formatPrice(excl, true) + ' (' + this.formatPrice(price, true) + ' ' + this.taxConfig.inclTaxTitle + ')';
            } else {
                //str+= ' ' + this.formatPrice(price, true);
            }
        }
        return str;
    },
formatPrice: function(price, showSign){
    var str = '';
    price = parseFloat(price);
    if(showSign){
        if(price<0){
            //str+= '-';
            price = -price;
        }
        else{
            //str+= '+';
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-21T18:51:20.610

由于它与 CE 1.8 中的可配置产品有关，因此我一直在研究这个问题几个小时。我的解决方案实际上在 /js/varien/configurable.js 的第 236-258 行。注释掉如下四行，如图：

```
formatPrice: function(price, showSign){
    var str = '';
    price = parseFloat(price);
    if(showSign){
        if(price<0){
            //str+= '-';
            price = -price;
        }
        else{
            //str+= '+';
        }
    }

    var roundedPrice = (Math.round(price*100)/100).toString();

    if (this.prices && this.prices[roundedPrice]) {
        //str+= this.prices[roundedPrice];
    }
    else {
        //str+= this.priceTemplate.evaluate({price:price.toFixed(2)});
    }
    return str;
}, 
```

注释掉上面显示的行的最终效果是下拉列表中给定选项的价格调整消失了。我一直在现场寻找是否有任何意想不到的后果，但还没有看到任何东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-23T18:48:22.447

使用上面用户“RS”的评论，我能够为我的网站解决这个问题。这是我网站上的屏幕截图，显示修复工作[http://tinypic.com/r/5pexz4/5](http://tinypic.com/r/5pexz4/5)

查找文件

/app/code/core/Mage/Catalog/Block/Product/View/Options/Type/Select.php

转到第 70 - 74 行

```
$select->addOption(
                $_value->getOptionTypeId(),
                $_value->getTitle() . ' ' . $priceStr . '',
                array('price' => $this->helper('core')->currencyByStore($_value->getPrice(true), $store, false))
            ); 
```

从第 72 行删除此代码

```
. ' ' . $priceStr . '' 
```

或注释掉代码

```
$_value->getTitle() /*. ' ' . $priceStr . ''*/, 
```

请务必在语句末尾留下“，”。我的代码现在看起来像这样并且工作正常。

```
$select->addOption(
                $_value->getOptionTypeId(),
                $_value->getTitle() /*. ' ' . $priceStr . ''*/,
                array('price' => $this->helper('core')->currencyByStore($_value->getPrice(true), $store, false))
            ); 
```

我希望这对您和其他正在寻找相同解决方案的人有所帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-20T13:24:58.893

您需要查看[`Mage_Catalog_Block_Product_View_Options_Abstract::_formatPrice()`[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Block/Product/View/Options/Abstract.php#L112)。

无法使用框架重写此方法。由于使用此方法的显示逻辑可能涉及许多领域，因此我将研究基于 CSS 的解决方案。虽然这可能看起来很老套，但它可能比尝试扩展每个子类来处理您的逻辑更干净。以下内容适用于默认主题：

```
#product-options-wrapper span.price-notice,
#product-options-wrapper span.price { display:none } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-19T03:18:56.890

将此 JavaScript 添加到`template/catalog/product/view.phtml`

```
<script>    
// Override formatting in "js/varien/configurable.js"
Product.Config.prototype.formatPrice = Product.Config.prototype.formatPrice.wrap(
      function(parentMethod, price, showSign){ return ''; }
);
</script> 
```

或者，您可以使用上述代码创建一个新的 JS 文件，并通过 local.xml 将其包含在产品详细信息和产品评论页面的块中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T13:14:04.730

从@RS 看：/app/code/core/Mage/Catalog/Block/Product/View/Options/Type/Select.php [L 65-75]

```
 foreach ($_option->getValues() as $_value) {
            $priceStr = $this->_formatPrice(array(
                'is_percent' => ($_value->getPriceType() == 'percent') ? true : false,
                'pricing_value' => $_value->getPrice(true)
            ), false);
            $select->addOption(
                $_value->getOptionTypeId(),
                $_value->getTitle() . ' ' . $priceStr . '',
                array('price' => $this->helper('core')->currencyByStore($_value->getPrice(true), $store, false))
            );
        } 
```

我无法对此进行测试，但是如果您在获取标题后删除所有内容，它应该做您想做的事情， **您不会想在核心文件中进行这样的编辑** *测试它很好。*

```
 foreach ($_option->getValues() as $_value) {
            $priceStr = $this->_formatPrice(array(
                'is_percent' => ($_value->getPriceType() == 'percent') ? true : false,
                'pricing_value' => $_value->getPrice(true)
            ), false);
            $select->addOption(
                $_value->getOptionTypeId(),
                $_value->getTitle()
            );
        } 
```

我会研究将其扩展`Mage_Catalog_Block_Product_View_Options_Type_Select`或复制出核心文件的最佳实践。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-18T17:09:32.250

STEP 1 app/code/core/Mage/Catalog/Block/Product/View/Type/Configurable.php

更改此行

```
'template'  => str_replace('%s', '#{price}' $store->getCurrentCurrency()->getOutputFormat()), 
```

至

```
'template'          => Mage::helper('catalog')->__(''), 
```

STEP 2 js/varien/product.js 改变这个函数

```
formatPrice: function(price, showSign){ 
    var str = ''; 
    price = parseFloat(price); 
    if(showSign){ 
    if(price<0){ 
    str+= '-'; 
    price = -price; 
    } 
    else{ 
    str+= '+'; 
    } 
} 
```

至

格式价格：函数（价格，显示符号）{

```
var str = ''; 
price = parseFloat(price); 
if(showSign){ 
if(price < 0){ 
str+= ''; 
price = -price; 
} 
else{ 
str+= ''; 
} 
```

} STEP 3 js/varien/configurable.js.js 改变这个函数

```
formatPrice: function(price, showSign){ 
    var str = ''; 
    price = parseFloat(price); 
    if(showSign){ 
    if(price<0){ 
    str+= '-'; 
    price = -price; 
    } 
    else{ 
    str+= '+'; 
    } 
} 
```

至

格式价格：函数（价格，显示符号）{

```
var str = ''; 
price = parseFloat(price); 
if(showSign){ 
if(price < 0){ 
str+= ''; 
price = -price; 
} 
else{ 
str+= ''; 
} 
```

} 这对我来说很有效。我通过链接[http://ram-magento.blogspot.in/2011/10/remove-or-price-value-in-drop-down-in.html得到了答案](http://ram-magento.blogspot.in/2011/10/remove-or-price-value-in-drop-down-in.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-20T13:34:43.023

它对我有用 setp 01：转到 app/design/frontend/your_package/your_theme/template/catalog/product/view/type/options/

setp 02：打开可配置的.phtml 文件

setp 03 : 过去在页面顶部的以下 javascript

```
<script type="text/javascript">
jQuery(document).ready(function(e) {
    checkoptions();

    jQuery("select.super-attribute-select").change(function(){
        checkoptions();
    });
});

function checkoptions(){
    jQuery("select.super-attribute-select option").each(function(){
        var optiontext = jQuery(this).text();
        var addsignpos = optiontext.indexOf('+');
        var subtractsignpos = optiontext.indexOf('-');
        if(addsignpos>0){
            var result = optiontext.substring(0,addsignpos-1);
            jQuery(this).html(result);
        }

        if(subtractsignpos>0){
            var result = optiontext.substring(0,subtractsignpos-1);
            jQuery(this).html(result);
        }
    });
} 
```

原始来源：[http ://www.cybernetikz.com/remove-price-configurable-products-dropdown-options-magento/](http://www.cybernetikz.com/remove-price-configurable-products-dropdown-options-magento/)

# codeigniter - Datamapper include_related 不扩展结果集列

> ID：13473306
> 
> 赞同：0
> 
> 时间：2012-11-20T12:33:08.303
> 
> 标签：codeigniter, codeigniter-datamapper

我正在使用 Datamapper 并希望在结果集中加入相关表的所有列（1:1 关系）。因此，我的代码如下：

```
$p = new Project();
$arrAll = $p->where("id <", 100)->where_related('outboundform', 'reference_type', 'project')->include_related('outboundform')->get()->all_to_array();
print_r($arrAll); 
```

查询有效，但结果中没有显示表“outboundform”的列，它们被完全忽略！我刚刚检查并生成的 SQL 读取：

```
SELECT `project` . * , `outboundform`.`id` AS outboundform_id, `outboundform`.`reference_type` AS outboundform_reference_type, `outboundform`.`reference_id` AS outboundform_reference_id, `outboundform`.`created` AS outboundform_created, `outboundform`.`updated` AS outboundform_updated, `outboundform`.`v1` AS outboundform_v1, `outboundform`.`v2` AS outboundform_v2, `outboundform`.`v3` AS outboundform_v3, `outboundform`.`v4` AS outboundform_v4, `outboundform`.`v5` AS outboundform_v5 FROM (`project`) LEFT OUTER JOIN `outboundform` outboundform ON `project`.`id` = `outboundform`.`reference_id` WHERE `project`.`id` <100 AND `outboundform`.`reference_type` = 'project' LIMIT 0 , 30 
```

这没关系，并且在执行时给了我正确的结果。这里有什么 Datamappers 问题？为什么它不返回全部列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:20:37.790

相关`outboundform`行的属性应该可以在以关系名称为前缀的结果对象中访问。所以`id`变成`outboundform_id`，`reference_type`变成`outboundform_reference_type`等等。

问题是`all_to_array()`不会将这些转移到结果的数组版本中。如果要包含它们，则必须明确列出它们：

```
$arrAll = $p->/* snip */->all_to_array(array('id', 'name', 'outboundform_id', 'outboundform_reference_type')); // Project fields and outboundform fields too 
```

如果您有任何模型的实例，您可以通过该`$instance->fields`模型的属性（从数据库表）获取字段列表，并使用这些为`all_to_array`包含的关系创建前缀名称来创建调用列表。

或者，如果您只需要`[]`访问字段的方式，您可以实现`ArrayAccess`这样的接口：

```
class DataMapper2 extends DataMapper implements ArrayAccess
{ 
    public function offsetSet($offset, $value)
    {
        if (is_null($offset)) {
            throw new ErrorException('model instances doesn\'t support pushing new fields');
        } else {
            $this->{$offset} = $value;
        }
    }
    public function offsetExists($offset)
    {
        return isset($this->{$offset});
    }
    public function offsetUnset($offset)
    {
        unset($this->{$offset});
    }
    public function offsetGet($offset)
    {
        return isset($this->{$offset}) ? $this->{$offset} : null;
    }
} 
```

# extjs - 获取将数据加载到网格面板所需的时间

> ID：13473320
> 
> 赞同：2
> 
> 时间：2012-11-20T12:34:30.460
> 
> 标签：extjs, extjs4, profiling, extjs4.1

我正在使用 ExtJS 4.1。我想捕获将数据加载到网格面板所需的时间。为此，我在`beforerender`事件和`afterrender`网格`afterrender`事件上添加了侦听器，但在数据加载并显示到网格中之前触发了事件。

所以我无法捕获加载数据所需的实际时间。我在 SO 上看到[了类似的问题，](https://stackoverflow.com/questions/11222295/process-after-grid-was-loaded-completely-using-extjs) 但对我没有帮助。如该问题所述，`load`存储事件无济于事，因为`load`存储事件在数据呈现到网格单元之前触发。

那么任何人都可以告诉如何捕获将数据加载到网格中所需的确切时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:23:24.157

好吧，您感兴趣的所有事件都会被视图而不是网格触发。我认为以下事件对您来说很有趣：

*   *在内容开始渲染***[之前触发 beforerefresh](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.AbstractView-event-beforerefresh)**
**   *内容渲染完成时触发***[刷新](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.AbstractView-event-refresh)***

 **```
viewConfig: {
    listeners: {
        beforerefresh: function() {
            alert('before');
        },
        refresh: function() {
            alert('on(after)')
        }
    }
} 
```**

# ios - 如何在 iOS 的完成处理程序块之外保留图形对象以供进一步使用

> ID：13473323
> 
> 赞同：0
> 
> 时间：2012-11-20T12:34:35.537
> 
> 标签：ios, facebook, facebook-graph-api, objective-c-blocks

我使用以下代码向图形 api 发送请求并将其显示在标签中

```
 [FBRequestConnection startWithGraphPath:@"40123148903?fields=picture" completionHandler:^(FBRequestConnection *connection, id<FBGraphObject> result, NSError *error)
     {
         if(!error)
         {
              self.tryLabal.text = [[[result objectForKey:@"picture"] objectForKey:@"data"]objectForKey:@"url"];

         }
     }
     ]; 
```

问题是它只允许我使用块内的图形对象。我想保留返回的结果。

我尝试声明一个 id 属性并将其分配给结果 id

```
self.tryGraphObject = result; 
```

感谢这里的一位成员，我得到了更多信息：在 ios facebook sdk 3.0 中，我们使用 facebook 委托处理了图形 api 调用的结果，该委托在回复返回时被调用。现在在 3.1 中，他们更改了逻辑，以便每个请求都带有一个名为“完成处理程序”的块，可以让您处理结果。问题是我无法保存结果以供进一步使用，因为由于某种原因它不允许我

**编辑：**原来我错了，问题是不同的。我打破了代码，结果发现我认为它没有设置属性，但确实如此。就在视图加载之后。基本上它在等待来自 Facebook 的回复时一直运行代码，这意味着视图在返回值之前加载，因此它显示基于空属性的视图。我能做些什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-20T15:08:13.233

在您的块上方，您可以声明一个像这样制作的图形类

```
__block FBGraphObject *graphObject = self.tryGraphObject; 
```

然后在块中，将它设置为graphObject，它应该指向你的self.tryGraphObject，当你在块中设置它时，它应该希望设置它。我还没有完全测试过这个。

另一种可能性是做

```
self.trypGraphObject = [result copy]; 
```

我唯一能想到的另一件事是结果对象是一个id，所以在设置之前尝试对其进行类型转换

```
self.tryGraphObject = (FBGraphObject *)[result copy]; 
```

或者

```
FBGraphObject *graph = (FBGraphObject *)result;
self.tryGraphObject = graph; 
```

这就是我现在能想到的。我希望这能为您指明正确的方向。

# math - 归一化具有未知界限的值

> ID：13473324
> 
> 赞同：2
> 
> 时间：2012-11-20T12:34:46.430
> 
> 标签：math, normalization

假设我有一个来自硬件传感器的整数值，但我不知道它的界限，将这个值标准化为有界范围（如 [0-1]）的最佳方法是什么？

从实验中，我知道上限和下限可能是什么，但我没有严格的值。我也知道价值成倍增长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:51:19.597

`MIN_INT`您有对应于和的上限和下限`MAX_INT`。映射`MAX_INT`到 1 和`MIN_INT`0；将每个输入`x`除以`MAX_INT + |MIN_INT|`. 这会将值映射到所需的范围，但不一定是最佳的（即，您可能有未使用的子范围）。如果您可以近似上限和下限，则取它们并添加一些可确保安全的值（即，输入不能偏离具有此安全值的范围）并用这些计算的边界替换映射中的`MAX_INT`and `MIN_INT`。

# jquery - “未捕获的 ReferenceError：未定义 jquery” - 但它是

> ID：13473325
> 
> 赞同：1
> 
> 时间：2012-11-20T12:35:01.830
> 
> 标签：jquery

我已经准备了一些类似的问题，并验证了 jquery 是包含的第一个脚本......

```
// this test confirms that jquery is defined
if (typeof jQuery == 'undefined') {
    alert('jquery not defined');    
}
// (this is being alerted)
else { alert( 'jquery is defined'); }

// this is what I want to achieve (to begin with)
jquery("#free-signup").css( 'display', 'none' ); 
```

并且 jquery 似乎确实被定义了......我做错了什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:36:14.577

JavaScript 区分大小写。您应该使用正确的对象名称：

```
// v
  jQuery("#free-signup").css( 'display', 'none' ); 
```

或快捷方式：

```
$("#free-signup").css( 'display', 'none' ); 
```

# playframework - @Catch 在 Play 框架 2.0.x 中不可用

> ID：13473326
> 
> 赞同：3
> 
> 时间：2012-11-20T12:35:06.193
> 
> 标签：playframework, playframework-2.0

在 Play 框架 1.2.x 中，可以使用 @Catch 注释对方法进行注释，使其充当控制器中的异常处理程序。但是，在 2.x 中，这似乎消失了，是否可以在这里使用等效的注释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T12:43:58.367

`@Before`, `@After`, `@Catch`,`@Finally`在 Play framework 1.x 中已被替换为`@with`2.x 上的另一个概念。请参阅文档页面上的[操作组合部分。](http://www.playframework.org/documentation/2.0.2/JavaActionsComposition)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T12:14:49.983

您也可以使用`onError()`全局对象的方法。这基本上捕获了应用程序抛出的所有异常。

请参阅此处：[提供应用程序错误页面](http://www.playframework.org/documentation/2.0.4/JavaGlobal "提供应用程序错误页面")

# symfony - 如何覆盖 FOS 用户捆绑表单标签

> ID：13473329
> 
> 赞同：12
> 
> 时间：2012-11-20T12:35:08.647
> 
> 标签：symfony, symfony-forms, fosuserbundle

我很难覆盖 Symfony2 的 FOS 用户包使用的标签。

我已经覆盖了 Form 类，但是像“setOption”这样的元素没有选项，只有 getter。

我可以删除一个元素，然后用正确的标签再次添加它，但这似乎有点过头了。有没有什么好的方法可以覆盖表单元素上的选项，或者只是翻译键？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-20T12:58:52.200

您不需要覆盖 Form 类。

在您的目录中复制/粘贴`vendor/friendsofsymfony/user-bundle/FOS/UserBundle/Resources/translations/FOSUserBundle.xx.yml`文件`app/Resources/translations`（具有相同的目录结构和相同的文件名）并重新定义翻译以方便您。

编辑：正如@mario-johnathan 所说，覆盖翻译不是包继承的一部分。有关官方文档，请参阅[http://symfony.com/doc/current/cookbook/bundles/override.html#translations](http://symfony.com/doc/current/cookbook/bundles/override.html#translations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-10T10:20:24.587

如前所述，您可以将翻译文件放入：
`app/Resources/translations`

但是，如果您在父包 ( `src/MyAppBundle/Resources/translations`) 或任何其他包中覆盖它，请确保在内核中被覆盖 **的包之后加载您的包：**

```
public function registerBundles()
{
    $bundles = [
        ...
        new FOS\UserBundle\FOSUserBundle(),
        new MyAppBundle\MyAppBundle(),
        ...
    ];
...
} 
```

# json - 从 WebApi 获取“未找到任何操作”

> ID：13473334
> 
> 赞同：5
> 
> 时间：2012-11-20T12:35:35.513
> 
> 标签：json, asp.net-web-api

我是一名 WCF 开发人员，不熟悉 MVC。尝试将我的 WCF API 作为 ApiControllers 集成到 MVC 应用程序中（是否值得努力仍然是个大问题）。

我有一个来自 jQuery 插件的请求：

```
 POST http://localhost:18698/Api/Public/DoAction HTTP/1.1 
 ....
 Content-Type: application/json; charset=UTF-8 Accept:
 application/json, text/javascript, */*; q=0.01

 {"myParam":"test"} 
```

我的控制器如下所示：

```
public class PublicController : ApiController
{
    [HttpPost]
    public string DoAction(string myParam)
    {
        return "Test";
    }
} 
```

而且，路由部分如下所示：

```
 config.Routes.MapHttpRoute(
        name: "PublicApi",
        routeTemplate: "api/{controller}/{action}"
    ); 
```

我收到此错误：

```
{
    "Message": "No HTTP resource was found that matches the request URI 'http://localhost:18698/Api/Public/DoAction'.",
    "MessageDetail": "No action was found on the controller 'Public' that matches the request."
} 
```

不接受任何 JSON 参数的方法工作正常，但接受 JSON 参数的方法不起作用。我必须能够将复杂的 JSON 传递给方法。在 WCF 中，从 JSON 到对象的转换由 WCF 为我处理。

你知道我为什么会收到这个错误吗？我能否像在 WCF 中那样在 MVC 中无缝地传递/接收复杂的 JSON？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T13:10:35.527

如果您检查您发送的 JSON，`{"myParam":"test"}`那么您将看到 Darin 指出的内容，即您需要一个模型来包含您的属性，例如在以下工具中运行 {"myParam":"test"}： http: [//json2csharp.com/](http://json2csharp.com/)和你得到：

```
public class RootObject
{
    public string myParam { get; set; }
} 
```

默认情况下，WebApi 会将您之前使用简单类型字符串的方法签名视为 UrlParameter（与 相同`public string DoAction([FromUri]string myFoo)`）。您可以证明这是留下您的代码，因为这个 url 应该可以工作：

```
http://localhost:50381/Api/Public/DoAction?myParam=something 
```

使用 JSON.NET 的主体序列化程序将无法自行解析简单的 .NET 类型，因此您需要创建一个简单的模型来托管它。然后这将使用 from body binder`public string DoAction([FromBody]RootObject myFoo)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T12:56:45.003

一如既往地从定义视图模型开始：

```
public class MyModel
{
    public string MyParam { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
public class PublicController : ApiController
{
    [HttpPost]
    public string DoAction(MyModel model)
    {
        return "Test_" + model.MyParam;
    }
} 
```

最后调用控制器动作：

```
<script type="text/javascript">
    $.ajax({
        url: '@Url.HttpRouteUrl("PublicApi", new { controller = "public", action = "doaction" })',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ "myParam": "test" }),
        sucecss: function (result) {
            console.log(result);
        }
    });
</script> 
```

备注：您在路由中包含操作名称违反了 RESTful 约定。在 RESTful 路由中，您使用的是资源，而不是操作。因此，您的控制器代表您正在操作的资源，而 HTTP 动词代表您正在调用的操作。因此，您将使用 Get、Post、Patch 和 Delete 等动作名称，并根据客户端使用的 HTTP 动词，路由引擎将自动分派到相应的动作。

# jquery - 为什么这个 jquery 不触发第一个 droppable 事件？

> ID：13473335
> 
> 赞同：0
> 
> 时间：2012-11-20T12:35:37.073
> 
> 标签：jquery, jquery-ui, draggable, droppable

```
$(".profile_icon").liveDraggable({ 
        start: function(event, ui){
            $("#team_deletezone").show();
            $(this).addClass('valid');
        },
        stop: function(event, ui){
            $("#team_deletezone").fadeOut();
        },
        containment: 'document',
       helper: 'clone',
       opacity: 0.70,
       zIndex:10000,
       appendTo: "body"
}); 
```

所以项目拖动，然后什么都不做。在第二次下降时它会正确触发吗？

当物品被丢弃时，它应该给一个 JS`alert();`

查看[JSfiddle](http://jsfiddle.net/4xeUE/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:27:31.740

只需[更改](http://jsfiddle.net/Y2CXt/)为`liveDroppable`即可：`droppable`

```
 $("#team_deletezone").droppable({
        tolerance: 'pointer',
        drop: function( event, ui ) {
           alert("This Worked!");
        }
    }); 
```

# javascript - 高级道场查询

> ID：13473339
> 
> 赞同：0
> 
> 时间：2012-11-20T12:35:40.820
> 
> 标签：javascript, dojo

```
store = Observable(new Memory({data: data}));

chart.addSeries("Load Cell 0", new StoreSeries(store, { query: { load_cell_id:0 }}, "kn")); 
```

我将如何使用 Store Series 进行更高级的查询？

对于上述情况，我需要所有 'load_cell_id = 0' 和 'date_time < 12345' 或其他时间戳。

目前我只能让 load_cell_id:0 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:56:52.147

与`dojo/store/Memory`您可以将函数用作查询（[source](http://dojotoolkit.org/features/1.6/object-store)）一样：

```
store.query(function(product){
    return product.price < 10;
}).forEach(function(shoe){
    // called for each match
}); 
```

请参阅我对[是否可以像在数据网格中一样过滤数据网格中的数据？](https://stackoverflow.com/questions/12010731/is-it-possible-to-filter-data-in-a-dgrid-like-you-can-in-a-datagrid-if-so-how)对于更[复杂的例子](http://jsfiddle.net/phusick/7gnFd/)。或者，如果您需要糟糕的查询，我在[如何查询多列上的 dgrid](https://stackoverflow.com/questions/12207364/how-to-query-a-dgrid-on-multiple-columns)的答案中提到了[资源查询语言（](https://github.com/kriszyp/rql)[此处](http://jsfiddle.net/phusick/VjJBT/)的示例代码）。

# git - 解决增量后，带有 NTLM 代理的 git clone 挂起

> ID：13473341
> 
> 赞同：13
> 
> 时间：2012-11-20T12:35:45.163
> 
> 标签：git, https, clone, ntlm

我在这里看到了很多关于 git 和代理主题的问题，但没有一个能解决我的问题。我正在从 Bitbucket 克隆一个 git 存储库。在我的家庭网络上一切正常，但在我们使用代理和 NTLM 身份验证的地方挂起。查看 git clone 命令的输出：

```
$ git clone https://my_user@bitbucket.org/my_user/my_project.git --verbose
Cloning into 'my_project'...
Password for 'https://my_user@bitbucket.org':
POST git-upload-pack (174 bytes)
remote: Counting objects: 548, done.
remote: Compressing objects: 100% (367/367), done.
remote: Total 548 (delta 216), reused 0 (delta 0)
Receiving objects: 100% (548/548), 5.28 MiB | 533 KiB/s, done.
Resolving deltas: 100% (216/216), done. 
```

git clone 命令总是挂在“Resolving deltas”上。

我的设置：

*   带有 msysgit 1.8.0 的 Windows 7 64 位
*   代理配置：

    ```
    $git config --global http.proxy http://MY_DOMAIN\\\my_user:my_password@http-proxy:8080 
    ```

* * *

问题似乎与 git 对象大小有关，因为当我的存储库中只有很少的文件时，git clone 一开始就可以工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-13T12:08:46.260

我在 Git 1.7.11 中遇到了同样的问题。我从 GitHub 克隆的所有尝试都导致进程挂起，没有文件。`verify-pack`我在类似的问题中尝试了这个技巧和许多其他建议，但没有任何效果。

我想也许这已经在最新版本的 Git 中得到了改进或修复，所以我升级到了 1.8.3。宾果游戏，现在可以了，我可以克隆了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T10:26:39.090

抱歉，我的英语很不好。希望你能理解。

我在这里遇到了同样的问题。我找不到并解决问题，但我终于能够结帐。当 git clone 挂在“Resolving deltas”上时，终止 git 进程。所以，你有文件夹`my_project`和文件`.git\objects\pack\pack-<sha1>.pack`。现在，我们需要找到修订号。在下面键入此命令：

```
git verify-pack -v .git\objects\pack\pack-<sha1>.pack | grep "commit" | more 
```

输出是这样的：

```
98c9f779992fc9a52372e0a1a76647e5d9ca5e01 commit 340 227 12
b6435d98f7b62ce69c59ce582beddf547f26d8a2 commit 305 208 239
a2a39a0c707b2919c87b194dca9a0dea307ce069 commit 239 159 447
...
4803e013b30dc9d31e4a8dba7e1a2d65e6f61422 commit 243 167 6768
-- More  -- 
```

`98c9f779992fc9a52372e0a1a76647e5d9ca5e01`顶部是 HEAD 修订版，因此您可以结帐到这一点：

```
git checkout -b master 98c9f779992fc9a52372e0a1a76647e5d9ca5e01 
```

完毕。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T09:49:16.227

我有同样的问题，虽然我无法确定原因，但我认为比使用 verify-pack 并检查最后一次提交（如 cakyus 所解释的）稍微好一些。

将最后一次提交作为主分支检查的问题是您不能保证该提交特别属于该分支，所以我所做的是：

*   中断挂在解决增量问题上的 git 进程`Ctrl+C`
*   获取分支信息`git fetch`
*   签出主分支（或任何其他分支）`git checkout master`

这使得 git 设置我的分支 master 以跟踪远程分支 master 并正确解压缩文件，同时还保留分支信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T22:35:22.320

不是答案，只是提供症状以缩小此问题的原因。我有完全相同的问题。它只是坐在那里“解决增量”。

v1.7.10 Win2008 R2 企业代理已为 HTTP 和 HTTPS 配置。

我会让一位同事登录到服务器（.gitconfig 是他的漫游配置文件的一部分）并查看它是配置还是安装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-21T00:08:05.093

对我有用的解决方案来自此博客[http://stas-blogspot.blogspot.ca/2012/12/git-hangs-after-resolving-deltas.html](http://stas-blogspot.blogspot.ca/2012/12/git-hangs-after-resolving-deltas.html)的评论：

> 由于包文件已正确下载，您需要做的就是使用 Ctrl+C 中断进程，执行 git fetch 从远程存储库获取分支信息，并使用 git checkout 再次签出主（或任何其他）分支掌握。

所以解决方案就是杀死挂起的进程，然后：

```
git fetch
git checkout 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-27T21:05:28.667

两件事（2019 年 4 月，七年后）：

1.  不要直接声明 NTML 代理 URL。将`HTTP_PROXY`环境`HTTPS_PROXY`变量设置为 HTTP 代理（不是 NTLM 代理），例如[`genotrance/px`](https://github.com/genotrance/px).
    通过运行 px （重定向到您的 NTLM 代理），您可以引用一个经典的 HTTP 代理（通常是[http://localhost:3128](http://localhost:3128)，不需要您的登录名/密码！），这样会更好。

2.  如果“解决增量”仍然需要时间，请确保使用 Git 2.22（2019 年第二季度）

关于第二点：“ `index-pack`”步骤中添加了进度指示器，这通常使用户在“ ”期间等待完成`git clone`。

请参阅[SZEDER Gábor ( ) 的](https://github.com/szeder)[提交 79e3aa6](https://github.com/git/git/commit/79e3aa66244af40bd3c8999e00308f96748367d0)（2019 年 3 月 31 日[）](https://github.com/szeder)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 da924b5](https://github.com/git/git/commit/da924b58ed3e2727e6ae2efc471db466a6178e2f))^(中，2019 年 4 月 25 日）)[`szeder`](https://github.com/szeder)
^([`gitster`](https://github.com/gitster))

> ## `index-pack`：在检查对象时显示进度
> 
> 当 ' `git index-pack`' 由 ' `git clone`' 运行时，它的`check_objects()`功能通常不会花很长时间来引起关注，但我只是遇到了大约一分钟左右的情况：我无意中给我的小笔记本电脑施加了一些内存压力，而克隆`linux.git`，然后在“ `Resolving deltas`”和“ `Checking connectivity`”进度条之间有相当长的沉默。
> 
> 在循环期间显示进度条，`check_objects()`让用户知道某些事情仍在进行。

# c# - 根据属性值合并 XML 节点（c#）

> ID：13473342
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:35:51.473
> 
> 标签：c#, asp.net, xml

我需要根据属性（id）的值合并 XMLnodes 元素并使用 C# 将结果生成到列表中

这是原始的 XML 文件：

```
 <profiles>
    <profile id="1" >
          <name>John</name>
          <age>23</age>
          <sex>male</sex>
    </profile >

    <profile id="2" >
          <name>Mark</name>
          <age>60</age>
    </profile >
    <profile id="2" >
          <sex>male</sex>
    </profile >
 </profiles> 
```

我需要按原样处理它：

```
 <profiles>
    <profile id="1" >
          <name>John</name>
          <age>23</age>
          <sex>male</sex>
    </profile >

    <profile id="2" >
          <name>Mark</name>
          <age>60</age>        
          <sex>male</sex>
    </profile >
 </profiles> 
```

这是我的试验，但它没有返回任何东西

```
var employee = from emp in fileDoc.Descendants("profile")
               group emp by (string) emp.Attribute("id")
               into emps 
               select new Data
               {
                    ID =emps.Last().Attribute("id") != null ? emps.Last().Attribute("id").Value: "",
                    ProfileName =emps.Elements("name") != null? emps.Elements("name").Last().Value: "",
                    Sex=emps.Elements("sex") != null? emps.Elements("sex").Last().Value: ""
               }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:45:51.340

```
var xDoc = XDocument.Parse(xml); //or XDocument.Load(fileName)

var newXDoc = new XElement("profiles",
                                xDoc.Descendants("profile")
                                .GroupBy(p => p.Attribute("id").Value)
                                .Select(p => new XElement("profile", 
                                                    new XAttribute(p.First().Attribute("id")), 
                                                    p.Elements())));

string newxml = newXDoc.ToString(); 
```

# iphone - 如何在 iOS 模拟器中在线测试 Web 应用程序？

> ID：13473343
> 
> 赞同：0
> 
> 时间：2012-11-20T12:35:54.617
> 
> 标签：iphone, ios, ipad, emulation

我只想在 iPhone 上测试[一个reveal.js 演示文稿](http://blueseed.com/presentations/startups.html)，因为我怀疑它会使 Safari 崩溃。不幸的是，我无法方便地使用物理 iPhone 或 iPad。

从我在这里看到的 SO[开始，没有任何真正的 iOS 模拟器](https://stackoverflow.com/questions/1522463/is-it-possible-to-run-iphone-apps-on-a-virtual-machine/1522504#1522504)，更不用说连接到 Web 前端的模拟器了，但我希望该领域有更新的开发，类似于[Android 的 Manymo](http://gigaom.com/mobile/meet-manymo-a-web-based-android-emulator/) .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:35:35.770

有模拟器可以让你接近吗？大概。但是在 Mac 上运行的 iOS 模拟器是您的最佳选择。嗯，第二好。最好的实际上是在 iPhone 上运行。如果您谈论的是像浏览器崩溃这样严重的事情，那么基于 Web 的模拟器很可能不会产生相同的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:41:46.250

Apple 发布了一个带有 iOS 6 的远程 Web 检查器，您可以在 iOS 模拟器中使用它，就像使用 firebug 或其他软件一样。

查看本教程以获取更多信息： [how-to web inspector](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/)

# salesforce - 账户和联系人的区别

> ID：13473344
> 
> 赞同：1
> 
> 时间：2012-11-20T12:35:56.577
> 
> 标签：salesforce

我对销售人员的对象有疑问。实际上，有帐户的联系人和没有帐户的联系人有什么区别？我们在什么情况下使用它？请解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:44:02.010

联系人 联系人，即与客户关联的个人。

帐户 个人帐户，是与您的业务相关的组织（例如客户、竞争对手和合作伙伴）。

可以在没有帐户的情况下创建联系人；但是，此联系人将是私人联系人，对所有用户隐藏，除了具有修改所有数据或修改所有 [on Contacts] 的用户。在创建联系人时删除对“需要”帐户的限制的方法是从“联系人”页面布局中删除“必需”属性，从而使我能够在没有帐户的情况下创建联系人。还有一个称为企业对消费者或 B2C 的功能，它提供个人帐户，这是帐户和联系人记录的融合。此个人帐户将提供通过查找关系引用供应商对象的能力，但同样的规则适用，它不能是加强安全性或在删除供应商记录时处理清理的主从关系。

# java - 二进制 XML 文件第 3 行：膨胀类 Listview 时出错？

> ID：13473352
> 
> 赞同：-2
> 
> 时间：2012-11-20T12:36:25.947
> 
> 标签：java, android, xml, android-listview

每次遇到这个问题，我都无法解决，有人可以帮帮我吗？

日志猫：

```
 11-20 12:48:19.842: E/AndroidRuntime(344): FATAL EXCEPTION: main
11-20 12:48:19.842: E/AndroidRuntime(344): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.refreshmedia.nieuwsregio/com.media.news.NewsActivity}: 
                                           java.lang.RuntimeException: Unable to start activity ComponentInfo{com.media.news/com.media.news.Home}:
                                           android.view.InflateException: Binary XML file line #3: Error inflating class Listview
11-20 12:48:19.842: E/AndroidRuntime(344):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-20 12:48:19.842: E/AndroidRuntime(344):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-20 12:48:19.842: E/AndroidRuntime(344):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-20 12:48:19.842: E/AndroidRuntime(344):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-20 12:48:19.842: E/AndroidRuntime(344):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-20 12:48:19.842: E/AndroidRuntime(344):  at android.os.Looper.loop(Looper.java:123)
11-20 12:48:19.842: E/AndroidRuntime(344):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-20 12:48:19.842: E/AndroidRuntime(344):  at java.lang.reflect.Method.invokeNative(Native Method)
11-20 12:48:19.842: E/AndroidRuntime(344):  at java.lang.reflect.Method.invoke(Method.java:507)
11-20 12:48:19.842: E/AndroidRuntime(344):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-20 12:48:19.842: E/AndroidRuntime(344):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-20 12:48:19.842: E/AndroidRuntime(344):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 XML 文件：

```
<Listview xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/android:list"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="fill_parent">

<TextView android:id="@+id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
  />

</Listview> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:38:01.920

检查你的大写/小写 - 它应该是`ListView`，而不是`Listview`（注意大写`V`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:53:22.793

您不能将 ListView 用作主布局，使用一个主布局并在主布局中添加 Listview 和 textview，并且您不能在 listview 中添加 textview 使用下面的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView
        android:id="@+id/android:list"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="fill_parent" 
        android:layout_above="@+id/android:empty" />

    <TextView android:id="@+id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:46:53.180

您需要在 xml 中添加根视图或布局！

尝试这个

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

<ListView 
android:id="@+id/android:list"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="fill_parent"/>

<TextView android:id="@+id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
  />
</LinearLayout> 
```

# asp.net - 如何删除一个xml文件

> ID：13473359
> 
> 赞同：0
> 
> 时间：2012-11-20T12:37:05.220
> 
> 标签：asp.net, vb.net, file, delete-file, xmlwriter

我正在尝试删除我的 XML 文件，但它不起作用。我没有收到错误，所以我不知道问题是什么。这是我的代码。

```
 Dim filePath As String = "\\server02\file$\rss\alert-special-reports2.xml" 
      If Not New System.IO.FileInfo(filePath).Exists Then 
        System.IO.File.Delete(filePath) 
      End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:40:42.593

用于此的 C# 代码将是这样的（对于 VB 类似）：

```
 string filePath = "\\server02\file$\rss\alert-special-reports2.xml";
  File.Delete(filePath); 
```

这里要注意的是，这里**不需要任何 IF EXISTS**东西。如果文件存在，它会自动删除文件，如果不存在，它**不会抛出任何异常**。

# facebook-graph-api - Facebook 应用页面“144534545691657/feed”仅返回空数据

> ID：13473360
> 
> 赞同：1
> 
> 时间：2012-11-20T12:37:07.213
> 
> 标签：facebook-graph-api, facebook-c#-sdk

我在 Facebook 上做了一个简单的测试页面，看起来不错。我已经提供了 read_stream 和 manage_pages 的扩展权限。我正在使用 Facebook SDK 6.0.10 并在代码中通过提供名称、类别等基本页面信息正确连接到页面。但是在代码中；

我从 facebook 正确生成了身份验证代码。

```
 var fb1 = new FacebookClient("xxxxxxxxxxxxxxxxxxx");

  //Page info is comming correclty.
  dynamic PageInfo = fb1.Get("144534545691657"); 
```

//这里没有提要/状态/帖子，只返回空数据。
//如果我从 Facebook 上的 Graph APi Explorer 访问它，也会存在相同的行为。

```
 dynamic feed = fb1.Get("144534545691657/feed"); 
```

[图片供您参考，显示 Graph Explorer 视图](http://i.stack.imgur.com/CfGQT.png)

我的主页上已经发布的帖子很少。我如何获得提要详细信息？

# wordpress - WooCommerce 注销按钮未显示（WordPress 插件）

> ID：13473361
> 
> 赞同：0
> 
> 时间：2012-11-20T12:37:08.190
> 
> 标签：wordpress, woocommerce

我已经安装了 WooCommerce，一切都很顺利，直到我开始注册、登录和注销用户。我整个早上都在谷歌上搜索，据我所知，注册过程是在用户结帐时进行的（如果有任何方法可以提供专用的注册选项，如果有人能解释如何去，我将不胜感激关于这个）但是我的主要问题是目前没有用户退出的选项。

我已经检查了设置中的选项以“将注销链接附加到包含'我的帐户'的菜单”，但该菜单下没有显示任何内容。我已登录，因为我的所有详细信息都显示在“我的帐户”页面下，所以这不是问题。我在我的本地主机上工作，但我无法想象这会是问题的原因，我还建立了第二个站点，以确保我的安装方式没有问题，而且它也不会不工作。是否有任何原因导致该选项没有出现，有什么办法可以强制它出现吗？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T04:00:21.763

在 WordPress 管理区域的“外观”选项卡下，单击“菜单”并创建您的菜单。这将激活注销链接。

# google-app-engine - 在数据存储 gae 中插入正确之前检查？

> ID：13473364
> 
> 赞同：1
> 
> 时间：2012-11-20T12:37:10.650
> 
> 标签：google-app-engine, google-cloud-datastore

首先对不起我的英语我使用谷歌翻译。

我是使用 Google App Engine 的新手，并且我放置了一个用户，但首先我需要检查一个用户是否已经存在，并且我在电子邮件中注明“是唯一键”并让我知道我是否以正确的方式进行操作。

伪代码是这样的：

新用户类

```
if not exist mail
    put user to database
    return true
else
    return false 
```

Servlet 插入用户：

```
if not NewUser.put
    redirect login.jsp
else
    redirect user.jsp 
```

这是代码：

新用户类：

```
public static boolean insert(String name, String mail, String password) {
    DatastoreService datastore = DatastoreServiceFactory
            .getDatastoreService();

    Key k = KeyFactory.createKey(User.class.getSimpleName(), mail);

    if (!userExist(k)) {
        Entity user = new Entity(k);
        user.setProperty("name", name);
        user.setProperty("password", Encrypt.MD5(password));
        datastore.put(user);
        return true;
    } else {
        return false;
    }

}

private static boolean userExist(Key key) {
    DatastoreService datastore = DatastoreServiceFactory
            .getDatastoreService();

    Query q = new Query(key).setKeysOnly();

    List<Entity> ent = datastore.prepare(q).asList(
            FetchOptions.Builder.withDefaults());

    return (ent.isEmpty() || ent == null) ? false : true;
} 
```

和 Servlet：

```
public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    resp.setContentType("text/plain");

    resp.sendRedirect(NewUser.insert(req.getParameter("name"),
            req.getParameter("mail"), req.getParameter("password")) ? "jsps/user.jsp"
            : "jsps/login.jsp");

} 
```

我可以让它在没有查询的情况下检查电子邮件吗？

此代码有效，但我正在寻找有关如何使其更好的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:42:51.847

要检查实体是否存在，您可以简单地使用[`get(key)`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#get%28com.google.appengine.api.datastore.Key%29)：

```
private static boolean userExist(Key key) {
    DatastoreService datastore = DatastoreServiceFactory
        .getDatastoreService();

    try {
        datastore.get(key);
    } catch (EntityNotFoundException e){
        return false;
    }
    return true;
} 
```

# android - 安卓视频查看

> ID：13473365
> 
> 赞同：0
> 
> 时间：2012-11-20T12:37:11.523
> 
> 标签：android, android-video-player

我想在 android 中使用视频视图实现视频播放器。从功能的角度来看，一切都在工作。但是全屏模式和方向改变存在问题。我希望以这样的方式观看视频，在横向模式下，应该播放全屏视频，在纵向模式下，它应该定位在中心，宽度为 Fill_parent，高度为 Wrap_content。那么有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:43:22.673

当然，您可以为两个不同的方向创建两个差异布局。然后，您可以在方向更改时动态分配特定布局。像这样：

```
 public void onCreate(Bundle savedInstanceState)
        {

            //opening particular layout
            super.onCreate(savedInstanceState);
            //checking whether orientation is portrait or landscape
            if (getResources().getConfiguration().orientation == 1)
            {

    setContentView(R.layout.main_portrait);
                }

else if(getResources().getConfiguration().orientation == 2)
        {
setContentView(R.layout.main_land);
            } 
```

然后您可以根据您的要求设计不同的布局。

# mysql - 来自多个表链接的 SQL 最佳实践

> ID：13473370
> 
> 赞同：1
> 
> 时间：2012-11-20T12:37:19.593
> 
> 标签：mysql, database-design

我不知道如何最好地表达这个标题，甚至解释问题，但这里......

我正在设计一个带有多个可以链接在一起的表的 SQL 数据库。IE

```
TABLE a ID1 CAN BE JOINED TO TABLE b ID1
TABLE b ID2 CAN BE JOINED TO TABLE c ID1
TABLE d ID1 CAN BE JOINED TO TABLE a ID5 
```

等等

基本上任何表中的任何行都可以链接到任何表中的任何其他行（包括它自己）

我打算用以下列创建一个“连接”表......

```
Table 1 Name VARCHAR()
Table 1 ID   INT()
Table 2 Name VARCHAR()
Table 2 ID   INT() 
```

充当多对多连接表，但具有表的列以及连接每一侧的 ID。我觉得这不是最佳实践。有什么想法吗？我不敢相信我需要为每个连接排列创建一个单独的表！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:45:28.740

这个问题很常见，将归一化模型与非归一化模型对立起来。

要实现元模型（一个存储所有关系的表）最常见的问题如下：

*   在 0..n 关系的情况下请求较慢（至少）
*   没有对关系约束的本地管理（在级联上......）
*   需要一个额外的应用层来解析关系

然后，如果您不介意，您的解决方案就可以了。

干杯，S。

# process - 作为批处理文件启动时更改进程名称

> ID：13473372
> 
> 赞同：8
> 
> 时间：2012-11-20T12:37:30.173
> 
> 标签：process, batch-file, monitoring, nagios

我正在开发一个名为“Nagios”的监控系统，它监控 UNIX 和 WINDOWS 服务器的服务。问题是批处理文件启动的WINDOWS服务在任务管理器中被命名为“cmd.exe”，因此系统在监控时无法区分这些服务。

如何在启动任务管理器时更改进程名称，以便每个进程都有一个唯一的名称而不是“cmd.exe”？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-26T08:46:58.143

您可以将批处理文件作为 Windows 服务运行以创建进程名称。您可以设置开始和停止时发生的事情。您可以使用其 PID 终止该服务。

将批处理文件创建为 Windows 服务的[C# 教程。](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:58:04.397

您不能更改进程的名称。如果您需要区分进程，那么我建议您使用它们的进程 ID 而不是它们的名称。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-12T11:25:06.827

DOS 有一个很棒的命令叫做**title** - 看起来很合适

```
@echo off
title MyBatchTitle
... 
```

# c# - 抽象类中的静态函数

> ID：13473374
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:37:37.327
> 
> 标签：c#, class, inheritance

我有一个抽象的 C# 类，它通过许多类继承，我想在泛型类中添加一个静态函数。

```
public abstract class A<T>: where T
{
    protected A()
    {
        // setup class A
    }

    public List<T> GetResult()
    {
        return new List<String>();
    }
}

public class B : A<String>
{
    public string FooBar()
    {
        // do something
    }
} 
```

现在，我想在抽象类 A 中添加一个静态类

```
pulic static List<T> GetResults()
{
    var foo = new A();
    return foo.GetResult();
} 
```

现在，我想通过继承的类调用新的静态函数

```
B.GetResults(); 
```

抽象类可以实现这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:44:10.960

您的问题不清楚，因为您提供的代码在很多方面都无效。但是，您*可以*在抽象泛型基类中创建静态方法，并且*可以*“通过”派生类型的名称来调用它……但这样做并不是特别有用。

所以这段代码有效：

```
using System;

public abstract class A<T> where T : new()
{
    public static T CreateInstance()
    {
        return new T();
    }
}

public class B : A<int>
{
}

class Test
{
    static void Main()
    {
        Console.WriteLine(B.CreateInstance());
    }
} 
```

...但调用`B.CreateInstance()`完全*等同*于：

```
A<int>.CreateInstance(); 
```

...确实，这就是它的编译目标。

一般来说，我*强烈建议*不要通过派生类访问静态成员。如此相似，`ASCIIEncoding.ASCII`我建议不要写作，而是写作`Encoding.ASCII`- 你在使用什么更清楚。

现在这是否真的解决了你的问题是另一回事 - 目前还不清楚，因为你没有真正解释你想要实现的目标，只是你*试图*实现它的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:46:57.640

你可以试试这个：

```
public abstract class A<T, TSelf> // TSelf name just to clarify here
    where TSelf : A<T, TSelf>, new()
{
    public abstract List<T> GetResult();

    public static List<T> GetResults()
    {
        var foo = new TSelf();
        return foo.GetResult();
    }
}

public class B : A<String, B>
{
    public override List<String> GetResult()
    {
        // Do something....
    }
} 
```

现在您可以致电：

```
List<String> results = B.GetResults(); 
```

# android - 如何更改在android中选择的列表项的背景

> ID：13473375
> 
> 赞同：1
> 
> 时间：2012-11-20T12:37:37.550
> 
> 标签：android, android-listview

> **可能重复：**
> [如何更改选定的列表项背景，android](https://stackoverflow.com/questions/11981366/how-to-change-selected-list-item-background-android)

在设置屏幕的 android 平板电脑中，列表中的列表项的背景会发生变化，直到用户做出下一个选择，这是使该功能正常工作的标准方式。直到现在我对选定的项目使用布尔值，并且我正在刷新列表以反映每次单击后的更改，我不这样做，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:19:12.993

```
You can use the following process . It works fine.

   Write a Global bean that get the postion of the selected item from the list.

     public class Global {      
        public static int mListPosition = 0; 

        public static int getListPosition() {
                return mListPosition;
            }    
        public static void setListPosition(int mListPosition) {
                Global.mListPosition = mListPosition;
            }   

        }

from List onClickListener set the position into the global bean

mList.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Global.setListPosition(arg2);
mAdapter.notifyDataSetChanged();
}
        });

in the adapter 

    @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) mCtx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.details_retailer_list_row, null);

                mHolder = new ViewHolder();
                v.setTag(mHolder);

                mHolder.mDetailsRetailerLayout = (LinearLayout) v.findViewById(R.id.details_cart_retailer_row_layout);
                mHolder.mDetailsRetailer = (TextView) v.findViewById(R.id.detailsRetailerRow);

            }
            else {
                mHolder =  (ViewHolder) v.getTag();
            }           

            final CartDetailsRetailerBean mDetailsRetailerBean = mItems.get(position);
            if (position == Global.getListPosition()) {
                mHolder.mDetailsRetailerLayout
                        .setBackgroundResource(R.drawable.row_white);
            } else {
                mHolder.mDetailsRetailerLayout
                        .setBackgroundResource(R.drawable.row_red);
            }

            if(mDetailsRetailerBean != null){

                Log.i("Global Position", ""+Global.getListPosition());

                mHolder.mDetailsRetailer.setText(mDetailsRetailerBean.getRetailerName());

            }

            return v;
        }

        class ViewHolder {
            public LinearLayout mDetailsRetailerLayout;
            public TextView mDetailsRetailer;

        }

Please apply it . I think it will work fine. 
```

# iphone - 如何更改文本字段中文本的 alpha

> ID：13473377
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:37:44.557
> 
> 标签：iphone, alpha, placeholder

我已将默认文本设置为 UItextfield。现在我想更改默认文本的 alpha 值。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:48:46.223

终于得到了答案：

```
[self.objTextFieldSearch setValue:[UIColor colorWithRed:255.0f/255.0f green:140.0f/255.0f blue:0.0f/255.0f alpha:0.5] forKeyPath:@"_placeholderLabel.textColor"]; 
```

提供所需的结果。

# uiscrollview - ScrollView 的内容大小不起作用

> ID：13473379
> 
> 赞同：1
> 
> 时间：2012-11-20T12:37:56.957
> 
> 标签：uiscrollview, ios6, iphone-5

我放了一个滚动视图，上面有标签和按钮。我已将内容大小设置为更大，`[scrollview setContentSize:CGSizeMake(320,700)]`但滚动视图仍然没有滚动到我在内容大小中提到的高度。当我使用 iPhone 4 视网膜英寸模拟器运行它时，它变得更糟，即它根本不滚动。我尝试在 xib 中找到自动布局属性，但它不存在。

最初我认为这是 iPhone 4 视网膜问题，但后来我发现设置内容大小甚至不会影响 iPhone 3.5 英寸视网膜模拟器的滚动。我已经搜索了它的每一点，但没有用。

请提供任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:07:31.467

在文件检查器中取消选中自动布局选项。这将解决问题

# r - 在 R 中解释密度图

> ID：13473383
> 
> 赞同：2
> 
> 时间：2012-11-20T12:38:01.100
> 
> 标签：r, ggplot2, kernel-density

我有一个以天为单位的年龄列表，我希望在密度图上以年为单位显示它们。

我做了这两种方法 - 将 x 轴上的标签更改为年，并将数据除以 365。这些方法给了我不同的密度估计：

```
df <- data.frame(id = 1:80000, age = rnorm(80000, 46, 5) * 365) 
```

第一个图是使用以下方法生成的：

```
breaks <- seq(from = min(df$age), to = max(df$age), by = 10*365)
ggplot(data = df, aes(x = age)) + 
    geom_density(aes(y = ..density..)) + 
    scale_x_continuous(breaks= breaks, labels = floor(breaks/365)) 
```

![在此处输入图像描述](../Images/0292c8301d4a44de34a45e3226882b26.png) y 轴上显示的密度范围为 0 到 0.0002

但是，当我这样做时（将年龄除以 365 得到年份 - 而不仅仅是像上面那样更改 x 标签）：

```
ggplot(data = df, aes(x = age/365)) + 
    geom_density(aes(y = ..density..)) 
```

该图看起来相同，但密度范围从 0 到 0.08 我很难理解发生了什么 - 为什么两个图之间的密度不同？

![在此处输入图像描述](../Images/581f1c89d815708057b75d65c0bc2ad7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:53:51.910

两个图中的密度不同，因为在一种情况下，水平单位的数量是 365 倍，因此考虑到概率密度函数（这些曲线下的区域），垂直单位需要是另一个图的 1/365必须总和为一。

这更容易根据箱而不是密度曲线来考虑。如果你用一个 bin 代替 365 个 bin，那么在一个 bin 中着陆的概率远高于在单个 bin 中着陆的平均概率。

对于您提供的具体示例数据，我们可以通过查看两个函数的峰值来了解垂直单位之间的转换：

```
> max(density(df$age)$y) # max of density in days, more horizontal units
[1] 0.0002178977
> df$ageinyears <- df$age/365 # create an age-in-years variable
> max(density(df$ageinyears)$y) # max density in years, fewer horizontals
[1] 0.07953267
> max(density(df$age)$y)*365 
[1] 0.07953267 
```

这是绘图中的一个问题（可能是您问题的主要主旨）的实际原因是估计 ggplot 密度的函数是从父 aes() 继承 x 参数。所以它对您正在使用的自定义 x 轴一无所知。您可以明确告诉 geom_density 不要使用继承的 x 值，而不仅仅是更改第一个图中的 x 轴：

```
ggplot(data = df, aes(x = age)) + 
    geom_density(aes(x = age/365, y = ..density..)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T19:16:00.987

最好的建议是忽略 y 轴上的刻度标签，它们对解释密度图毫无帮助，而且正如您所见，它们更容易混淆而不是帮助。

我的偏好是密度图、直方图和任何类似图的默认行为不标记 y 轴刻度线，因为它们通常没有任何意义，只会分散对图表重要部分的注意力，并经常导致混乱。即使将它们缩放到有意义的值，它们也对绘图的主要目的没有帮助，并且仍然会引起混乱（我更改了直方图中的 bin 数量，现在我的 y-tick 标签非常不同，恐慌！恐慌！）。不幸的是，在绘制它们时有很大的惯性，以至于我一个人不太可能改变这种情况。

# google-apps-script - 将数据从 GUI 保存回 Google 电子表格

> ID：13473385
> 
> 赞同：0
> 
> 时间：2012-11-20T12:38:17.450
> 
> 标签：google-apps-script

尝试将 GUI 中活动 UI 构建中的数据保存回电子表格。但无法弄清楚如何从 UI 中的文本框中检索字符串值。这就是我想要做的：

```
function saveChanges() {  
  var Text;
  var Location;
  var app = UiApp.getActiveApplication();

  Text = app.getElementById('CompanyLegalNameTextBox').getText();
  Location = "C3";
  SpreadsheetApp.getActiveSheet().getRange('Location').setValue('Text');  
} 
```

出现错误：TypeError：在对象 Generic 中找不到函数 getText。

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:54:24.137

`getElementById`您关心的具体细节是返回`GenericWidget`不支持任何获取操作的事实。

另一个令人困惑的方面是 Id 和 Name。回调函数中的参数是使用 name 传入的，并`getElementById`使用 Id（顾名思义）。为简单起见，我通常将我的小部件的名称和 ID 同时设置为同一事物。然后，您可以通过将小部件添加到回调中来传递对小部件的引用`addCallbackElement`

```
 ///snippet
   var textBox = app.createTextBox()
                   .setId('CompanyLegalNameTextBox')
                   .setName('CompanyLegalNameTextBox');

  app.add(textBox);
  var handler = app.createServerHandler('saveChanges');
  handler.addCallbackElement(textBox);
  button.addClickHandler(handler); //button defined elsewhere 
```

你的回调代码看起来像这样 - 注意“e”参数

```
 function saveChanges(e) {  
    var textValue = e.parameter.CompanyLegalNameTextBox;
    ///snippet 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:09:23.337

这在[UI App 文档](https://developers.google.com/apps-script/uiapp?hl=fr-FR)中有详细的解释，请在询问之前阅读。

# android - Viewflow 无法将 TextView 数据设置为其他布局

> ID：13473387
> 
> 赞同：0
> 
> 时间：2012-11-20T12:38:26.597
> 
> 标签：android, android-viewpager

我在[https://github.com/pakerfeldt/android-viewflow使用 android-viewflow](https://github.com/pakerfeldt/android-viewflow)

我在[https://github.com/pakerfeldt/android-viewflow/blob/master/viewflow-example/src/org/taptwo/android/widget/viewflow/example/DiffViewFlowExample.java使用 DiffViewFlowExample](https://github.com/pakerfeldt/android-viewflow/blob/master/viewflow-example/src/org/taptwo/android/widget/viewflow/example/DiffViewFlowExample.java)

我无法将数据设置到第二个及以上视图。明明使用

```
tvProfileName = (TextView) findViewById(R.id.tvProfileName); 
```

给出一个空错误，而

```
LayoutInflater factory = finalIndividual.this.getLayoutInflater();
View secondLayout = factory.inflate(R.layout.finalindividual_second, null);
tvProfileName = (TextView) secondLayout.findViewById(R.id.tvProfileName); 
```

使用时似乎没有设置任何数据`setText();`。

该文档仅提供了第一个视图的示例，而不是第二个视图。因此，我陷入了困境。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:04:53.213

如果您想更改“不同视图->”下的文本 View2，那么您需要在“DiffAdapter.java”中对此处定义的名称数组进行更改...

# php - elfinder上传问题

> ID：13473389
> 
> 赞同：0
> 
> 时间：2012-11-20T12:38:29.320
> 
> 标签：php, upload, ckeditor

我在互联网上搜索过，但没有找到任何解决方案。我想在全球范围内使用 elfinder。我的意思是，elfinder 托管在我的网络服务器的某个地方，我想在任何地方访问这个插件。

我发送带有变量的路径和 url 配置。目前一切都很好。问题是; 当我上传文件时，会出现错误；`unable to connect backend`.

我正在使用 elfinder 2.0。这是connector.php 配置。

`$path = $_GET['path'];`

`$url = $_GET['dizin'];`

`$opts = array(`

`// 'debug' => true,`

```
`'roots' => array(,`
    array(
        'driver'=> 'LocalFileSystem',
        'path'=> $path, 
        'URL'=> $url,
        'accessControl' => 'access'
    )
) 
```

`);`

`path`并`dizin`使用 GET 方法发送。

我发送之`path`类的：`home/user/username/www`

# javascript - Leaflet & Clodmade：锚链接到存储的纬度/经度位置

> ID：13473394
> 
> 赞同：0
> 
> 时间：2012-11-20T12:38:42.403
> 
> 标签：javascript, maps, leaflet, cloudmade

我使用 cloudmade 和 Leaflet 插件创建了一个地图。我设置了我的标记，我的目标是创建我自己的带有 3 个位置链接的控制面板。当您单击一个链接（例如伦敦）时，它将平移到存储的伦敦经纬度，其他两个相同。我加载地图的代码但容器消失了，我在控制台中收到以下错误消息：“Mycontrol.appendhild(link);- Mycontrol 未定义。定义时这仍然不起作用。

1）我在正确的路线上吗？2）任何帮助在示例或教程上工作都会很棒

谢谢。

这是代码片段

[代码]

```
[Cloudmade API Key and URL]

[Leaflet ICON Properties]
[Leaflet MARKERS]

[Leaflet toggle styles]

//CONTROL

var MyControl = L.Control.extend({
    options: {
        position: 'topright'
    },

    onAdd: function (map, position) {
        // create the control container
        var container = L.DomUtil.create('div', 'my-custom-control');

        // ... initialize other DOM elements, add listeners, etc.
        function createMapLink(location, zoom, name) {
            var link = document.createElement('a');
            link.href = '';
            link.innerHTML = "Go to " + name;
            link.onclick = function() {
                map.setCenter(location, zoom);
                return false;
            }
            Mycontrol.appendChild(link);
        }

        createMapLink(new L.LatLng(lat,lon), 11, 'Location1');
        createMapLink(new L.LatLng(lat,lon), 11, 'Location2');
        createMapLink(new L.LatLng(lat,lon), 11, 'Location3');

        return container;
    }
});

map.addControl(new MyControl());

L.control.layers(baseMaps, overlayMaps, MyControl).addTo(map); 
```

[/代码]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:18:34.413

您正在尝试扩展 Control 类，但将结果分配给 var。一个新类不是 var，而是一个函数，所以一开始就去掉 var 关键字。

查看传单缩放控件的[来源](https://github.com/Leaflet/Leaflet/blob/master/src/control/Control.Zoom.js)，了解如何进行操作。

# javascript - Jquery UI resizable - 调整放置在 iframe 上的 div 的大小

> ID：13473396
> 
> 赞同：7
> 
> 时间：2012-11-20T12:38:54.783
> 
> 标签：javascript, jquery, css, jquery-ui

如果您查看这个 jsbin： http: [//jsbin.com/efosed/5/edit](http://jsbin.com/efosed/5/edit)并按下“使用 JS 运行”，将会有一个可以使用 jquery ui 调整大小的 div。一切都按预期工作。div 放置在“全屏”iframe 上。在链接的示例中，此 iframe 具有：`display: none`.

如果我将其修改为`display: block`，然后重新运行脚本，reziable 插件会出现一些奇怪的行为。你可以在这里试试：http: [//jsbin.com/efosed/6/edit](http://jsbin.com/efosed/6/edit)。它不会正确处理鼠标事件。可能是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-20T12:49:23.113

您必须实现自己的逻辑来修复 iframe。一种解决方案是在 iframe 上添加一个 div：

[演示](http://jsbin.com/apaxij/98/edit)

```
$(function() {
  $('#resizable').resizable({
      start: function(event, ui) {
        $('<div class="ui-resizable-iframeFix" style="background: #fff;"></div>')
            .css({
                width:'100%', height: '100%',
                position: "absolute", opacity: "0.001", zIndex: 1000
           })
            .appendTo("body");
      },
    stop: function(event, ui) {
        $('.ui-resizable-iframeFix').remove()
      }
  });
}); 
```

对于支持 CSS 属性的[现代浏览器](http://caniuse.com/pointer-events)`pointer-events`，有更好的解决方案，参见代码和 jsbin：

[演示](http://jsbin.com/apaxij/100/edit)

```
$(function() {
  $('#resizable').resizable({
      start: function(event, ui) {
        $('iframe').css('pointer-events','none');
         },
    stop: function(event, ui) {
        $('iframe').css('pointer-events','auto');
      }
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-03T12:06:34.827

你可以做的更简单：

Javascript

```
$(function() {
  $('#resizable').resizable({
      start: function(event, ui) {
        $(this).addClass('freeze')
      },
    stop: function(event, ui) {
        $(this).removeClass('freeze')
      }
  });
}); 
```

CSS

```
#resizable.freeze iframe { pointer-events: none; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T19:11:21.000

仅 CSS 方法

.ui-resizable-resizing iframe { 指针事件：无；}

`ui-resizable-resizing`每当您调整某些东西的大小时，都会添加该类。

# c++ - 如何使用 mySQL 进行本地文件存储？

> ID：13473397
> 
> 赞同：0
> 
> 时间：2012-11-20T12:38:54.210
> 
> 标签：c++, mysql, file, local

我真的很喜欢 mySQL 的工作方式，我希望在我的程序中使用 mySQL 作为一种简单而有效的方式来存储用户的数据，但这意味着将它存储在计算机中。我的选择是在用户的计算机上运行 mySQL 服务器，就像它在 Web 服务器上运行一样，但是还有其他方法。有没有办法在不使用网络连接的情况下做到这一点？在这种情况下，是否有任何其他类型的系统（如 mysql）可以工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:42:11.727

您还可以尝试查看 SQLite，它是单个文件中的数据库。可能比 MySql 更容易使用。

[SQLite](http://www.sqlite.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:47:15.943

SQL 是一种特殊用途的编程语言。MySQL 是一种关系型数据库管理系统。

您也可以在许多桌面数据库管理系统中使用 SQL。您可以查看[关系数据库管理系统列表，](http://en.wikipedia.org/wiki/List_of_relational_database_management_systems)其中有多少个系统。

我建议使用[SQLite](http://sqlite.org/)，因为它的简单性、可移植性以及所需的空间/环境很小。最棒的是它属于公共领域，所以完全免费。

# javascript - 在javascript中存储宽度高度和位置值不使用jquery

> ID：13473398
> 
> 赞同：0
> 
> 时间：2012-11-20T12:38:57.027
> 
> 标签：javascript

如何将 DIV 框的高度、宽度和位置值存储在 javascript（不使用 JQuery！）中的变量中？

进一步来说：

我正在为 1600 宽度的屏幕分辨率设计我的页面。因此，我正在编写一个脚本，其中所有 div 标签的大小将与客户端正在访问页面的当前屏幕大小与最初设计的页面宽度之比成比例。

换句话说，我想动态地获取所有 div 标签的所有高度宽度和位置值，然后将它们乘以这个比率，以便所有这些都将按比例重新调整大小和重新定位。

但到目前为止，我似乎无法正确存储这些值。

这是我到目前为止所写的：

```
<script type=text/javascript>
availW = window.screen.availWidth;
availH = window.screen.availHeight;

perNum = availW/1600;

allDivs = document.getElementsByTagName("div");

allDivsLength = allDivs.length;

for (var i=0; i<allDivsLength; i++) {
    allDivsTop = [];
    allDivsBottom = [];
    allDivsLeft = [];
    allDivsRight = [];
    allDivsWidth = [];
    allDivsHeight = [];
    changeAllDivs(i);
}

function changeAllDivs(k) {
    var i=k;
    allDivsTop[i] = allDivs[i].currentStyle.getProperyValue("top");
    allDivsBottom[i] = allDivs[i].clientBottom;
    allDivsLeft[i] = allDivs[i].clientLeft;
    allDivsRight[i] = allDivs[i].clientRight;
    allDivsWidth[i] = allDivs[i].clientWidth;
    allDivsHeight[i] = allDivs[i].clientHeight;
    allDivs[i].style.width = perNum*allDivsWidth[i]+"px";
    allDivs[i].style.height = perNum*allDivsHeight[i]+"px";
    allDivs[i].style.top = perNum*allDivsTop[i]+"px";
    allDivs[i].style.bottom = perNum*allDivsBottom[i]+"px";
    allDivs[i].style.left = perNum*allDivsLeft[i]+"px";
    allDivs[i].style.right = perNum*allDivsRight[i]+"px"; 
}
<script/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:50:53.560

为什么不使用 CSS 百分比值？因为长宽比？

您可以考虑拥有一个具有固定纵横比的容器，并根据客户端窗口的大小调整一个容器的大小。容器内的任何东西都可以使用正常的 CSS 百分比值放置......以后应该会为您省去一些麻烦。

现在我稍微修改了你的代码，看看它是否更好用

```
availW = window.screen.availWidth;
availH = window.screen.availHeight;

perNum = availW/1600;

allDivs = document.getElementsByTagName("div");

scaleProperties = ['clientTop', 'clientBottom'] //and so on

for (var i=0; var l = allDivs.length; i < l; i++) {
    var currDiv = allDivs[i];

    for(var p in scaleProperties)
         currDiv[p] = (currDiv[p] * perNum) + "px";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:41:58.720

在大多数浏览器中 `Width`使用它来获取您的身体`Height`

```
var availW ;
var availH ;
if(typeof(window.innerWidth == 'number')){
    availW = window.innerWidth;
    availH = window.innerHeight;
}
else if(document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)){
    availW = document.documentElement.clientWidth;
    availH = document.documentElement.clientHeight;
}
else if(document.body && (document.body.clientWidth || document.body.clientHeight)){
    availW = document.body.clientWidth;
    availH = document.body.clientHeight;
} 
```

# magento - 在 Zend Studio XDebug 中调试 Magento Adminhtml

> ID：13473400
> 
> 赞同：1
> 
> 时间：2012-11-20T12:39:11.037
> 
> 标签：magento, ide, xdebug

我目前正在使用 Zend Studio 进行 Magento 开发。我可以使用 xdebug 调试前端。但是管理员的 xdebug 不起作用。断点和变量没有显示给管理员。

任何人都可以阐明如何调试 Magento 管理员吗？

# javascript - jQuery Cookie 函数

> ID：13473405
> 
> 赞同：2
> 
> 时间：2012-11-20T12:39:33.680
> 
> 标签：javascript, jquery, cookies, jquery-cookie

我对此还是很陌生，所以请多多包涵。我有一个在点击事件上添加类的函数，这很好用。但我也希望将单击的功能保存为 cookie，以便当该用户下次访问该站点时，这些类仍然存在/重新应用。我为此使用 jquery.cookie。我的代码如下。

```
$(".bblue").click(function bblue() {
    $("dl").addClass("bbluebg");
    $("dd .button").addClass("buttonb");
    $('.button img').attr('src',function(i,e){return e.replace("White","DBlue");});
    $.cookie("color", function bblue(){} , { expires: null, path: '/' });
}); 
```

当我调用时`$.cookie('color');`返回`function bblue(){}`，但在页面下次加载时它不会运行该函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:48:43.563

我假设您想要存储偏好并基于此采取行动。尝试这样的事情：

```
// Event-independent color change function
var bblue = function() {
    $("dl").addClass("bbluebg");
    $("dd .button").addClass("buttonb");
    $('.button img').attr('src', $('.button img').replace("White","DBlue"));
}

// Click action
$(".bblue").click(function () {
    // Change the color
    bblue();
    // Store the preference
    $.cookie("color", "blue" , { expires: null, path: '/' });
});

// On page load
$(document).load(function() {
    // If they chose blue before, change the color
    if ($.cookie("color") == "blue") bblue();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:44:33.887

该函数没有再次运行，因为页面重新加载时用户没有单击任何内容。您的函数仅在有人单击该`.bblue`元素时运行。

您需要获取 cookie 的值并在文档准备好的地方设置适当的类。课程不会坚持，您必须重新申请。你想用...

```
$(function() {
    var color = $.cookie("color");

    // Set classes according to color here
}); 
```

加载页面后，它将执行并设置所有类。

# r - 箱线图因素的问题

> ID：13473409
> 
> 赞同：1
> 
> 时间：2012-11-19T23:58:34.507
> 
> 标签：r, ggplot2, boxplot

我在尝试按因素制作并排箱线图时遇到问题。我已经阅读了几个示例，但由于某种原因，我的绘图无法正确显示。我认为它试图为每个值绘制一个箱线图，即使我将它指定为一个因素。

我正在使用以下代码：

```
samp.norm = rnorm(1000,0,1)
samp.exp  = rexp(1000,1)
samp.unif = runif(1000)
samp = c(samp.norm,samp.exp,samp.unif)
dist = c( rep("norm",1000), rep("exp",1000), rep("unif",1000) )
DATA = as.data.frame(cbind(samp,dist))
DATA$dist= as.factor(DATA$dist)
p = ggplot(DATA, aes(x=factor(DATA$dist), y = DATA$samp)) + geom_boxplot()
p 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T01:39:50.497

问题是您使用`cbind()`强制生成的对象，以便 DATA$samp 是一个因素而不是数字。从 cbind 产生的列需要具有相同的类，这意味着它们在这种情况下用于“字符”中最低的常见恶魔类。这正是发明数据帧来解决的问题。

尝试

```
DATA=data.frame(samp,dist) 
```

而不是你所拥有的更复杂的线路，这一切都应该工作。

顺便说一句，你也应该有更简单的

```
p=ggplot(DATA, aes(x=dist, y = samp)) + geom_boxplot() 
```

而不是你的倒数第二行。一旦你指定了 ggplot() 你正在使用 DATA，你不需要告诉它在哪里可以找到 dist 和 samp 即不需要 DATA$dist，只需要 dist。此外，由于 dist 已经是一个因素，您不需要指定 factor(dist)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:25:55.453

+1 给@PeterEllis。请注意，您还可以获得比他的建议更简单的方法：

```
boxplot(samp~dist) 
```

![在此处输入图像描述](../Images/cc8194a6e8d55130e02148f6d9561409.png)

# android - 快捷方式 消失在果冻豆上

> ID：13473414
> 
> 赞同：1
> 
> 时间：2012-11-20T12:40:02.040
> 
> 标签：android, android-manifest, android-launcher

我采用了一个旧版应用程序进行完全重写，因此，开始的活动已被重命名。为了应对用户从他们的主屏幕放置了我的应用程序的快捷方式，我添加了一个`activity-alias`从旧名称指向新名称的指针。

之前：

```
<activity
    android:name=".SplashScreenActivity"
    android:theme="@style/Theme.Styled.NoAnimation" /> 
```

现在：

```
<activity
    android:name=".activities.StartActivity_"
    android:theme="@style/Theme.Styled.NoAnimation">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity-alias
    android:name=".SplashScreenActivity"
    android:exported="true"
    android:targetActivity=".activities.StartActivity_"/> 
```

这适用于我在 2.1 和 4.0 之间测试的各种设备。但是，在 Jelly Bean（4.1 和 4.2）上，我看到默认启动器现在正在删除启动图标。

更糟糕的是，在某些测试中，升级*并没有显示任何应用程序，只是在**第二次*安装时从应用程序列表中显示它。似乎没有韵律或理由；有时应用程序会丢失。

我玩过交换`IntentFilter`：

```
<activity
    android:name=".activities.StartActivity_"
    android:theme="@style/Theme.Styled.NoAnimation" />
<activity-alias
    android:name=".SplashScreenActivity"
    android:exported="true"
    android:targetActivity=".activities.StartActivity_" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity-alias> 
```

亚行似乎不太喜欢这样：

> 未找到启动器活动！
> 启动只会同步设备上的应用程序包！

为了完整起见：在`IntentFilter`两个活动名称中添加 会保留主屏幕快捷方式，但会在应用程序列表中显示两个应用程序。

如何迁移并让所有用户满意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T00:26:03.033

在 Android 4.2.2 上，将启动器意图过滤器移动到另一个活动或别名会导致所有快捷方式、小部件和系统应用程序列表图标消失。此错误发生在设备和模拟器上。此问题在 Android 4.1.2 中不会发生。我在这里提交了这个错误：

更改启动器活动后，应用启动器快捷方式和小部件消失 [https://code.google.com/p/android/issues/detail?id=54720](https://code.google.com/p/android/issues/detail?id=54720)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T00:48:37.460

它似乎是带有股票启动器的 4.2 模拟器特有的错误。

该应用程序是荷兰市场上非常受欢迎的应用程序。随着更多设备迁移到 Jelly Bean，我将密切关注可能相关的任何问题。

当然，如果有人在野外遇到这种情况，我很想听听。

# html - 使用 get 方法发送值时出现 html iframe 问题

> ID：13473417
> 
> 赞同：0
> 
> 时间：2012-11-20T12:40:12.433
> 
> 标签：html, iframe, tags, get, frame

我的 html 代码中有一个 iframe 标签。当我这样写代码时：

```
<!DOCTYPE html>
<html>
<body>

<iframe src="http://www.w3schools.com">
  <p>Your browser does not support iframes.</p>
</iframe>

</body>
</html> 
```

iframe 的创建非常好，并生成了我想要的网站视图。

但是，如果我这样说：

```
<!DOCTYPE html>

    <html>
    <body>

        <iframe src="http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_iframe">
          <p>Your browser does not support iframes.</p>
        </iframe>

        </body>
        </html> 
```

我得到一个没有内容的白框。我已经在几个站点上对其进行了测试，发现如果您删除`?filename=tryhtml_iframe` 参数，问题就会消失。

问题是：

如何将 iframe 与站点通过 GET 方法获取的参数一起使用？或者是否有不同的标签可以在 HTML 中使用而不会出现问题？

# php - 创建多个数组中的一个数组

> ID：13473418
> 
> 赞同：0
> 
> 时间：2012-11-20T12:40:14.943
> 
> 标签：php, arrays

共有三个数组的形式：

```
Array (
    [0] => NAME
    [1] => NAME
    [n] => n
)
Array (
    [0] => DATE
    [1] => DATE
    [n] => n
)
Array (
    [0] => TEXT
    [1] => TEXT
    [n] => n
) 
```

尽可能将这三个阵列组合成下一个物种之一？

```
Array(
    Array (
        [0] => NAME
        [1] => DATE
        [2] => TEXT
    )
    Array (
        [0] => NAME
        [1] => DATE
        [2] => TEXT
    )
        Array (
        [0] => NAME
        [1] => DATE
        [2] => TEXT
    )
    and etc.
) 
```

使用库[PHP Simple HTML DOM Parser Manual](http://simplehtmldom.sourceforge.net/manual.htm) *构建数组*

```
// Search for the name
$array_nameNews = array();
foreach($html->find('div.narrow_column div h2 a') as $element) {    
    $nameNews = $element->innertext;
    $array_nameNews[] = $nameNews;
}

// Search the date
$array_dateNews = array();
foreach($html->find('div.narrow_column div div.postdate') as $element) {
    $dateNews = $element->innertext;
    $array_dateNews[] = $dateNews;
}

// Search text
$array_textNews = array();
foreach($html->find('div.narrow_column div div.postdate span') as $element) {
    $textNews = $element->innertext;
    $array_textNews[] = $textNews;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:53:27.487

您可以`array_merge()`按照其他人的建议使用您的最终结果数组来执行此操作，但您应该这样做：

```
$articles = array();
foreach($html->find('div.narrow_column div') as $art_elem) {
    $article = array(
        'name' => $art_elem->find('h2 a', 0)->plaintext,
        'date' => $art_elem->find('div.postdate', 0)->plaintext,
        'text' => $art_elem->find('div.postdate span')->innertext,
    );
    $articles[] = $article;
} 
```

两个原因：

1.  你实际上想要完成的事情要清楚得多。
2.  它不那么脆。假设一个特定的“div.narrow_column div”元素缺少这些字段之一？在这种情况下，您的三个数组可能大小不同，或者数组中的项目可能与具有相同索引的其他项目不对应。如果您迭代容器元素一次并在`$art_elem`上下文中获取您需要的项目，即使某些项目丢失，您也可以优雅地降级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:44:23.717

你会看到这样的东西

```
<?php
$formatted = array();
foreach ($array_nameNews as $key => $news) {
  $one_piece = new array();
  $one_piece['NAME'] = $news;
  $one_piece['DATE'] = $array_dateNews[$key];
  $one_piece['TEXT'] = $array_textNews[$key];
  $formatted[] = $one_piece
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:54:31.493

假设数组总是有相同数量的元素

```
$t = count($array_nameNews);
$sorted = array();
for ($i=0; $i<$t, $i++) {
    $sorted[] = array(
        $array_nameNews[$i],
        $array_dateNews[$i],
        $array_textNews[$i],
    );
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T12:41:36.053

你可以这样做[`array_merge`](http://php.net/manual/en/function.array-merge.php)——合并一个或多个数组

试试看

```
 $result = array_merge($array1, $array2); 
```

[**键盘**](http://codepad.org/PaIdUXJT)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T12:51:17.190

首先是不同的`Array`东西`PHP Simple HTML DOM Parser Manual`。如果是数组，你应该试试这个

```
$first = array('1','2','3');
$second = array('11','22','33');
$third = array('111','222','333');

 for($i=0;$i<count($first);$i++)
 {
  $result[] = array($first[$i],$second[$i],$third[$i]); 
 }
echo "<pre>";print_r($result);echo "</pre>";exit; 
```

对不起，如果你不喜欢我的措辞。

# c - tic-tac-toe 使用 opencv 但我可以在识别游戏板时停止

> ID：13473419
> 
> 赞同：1
> 
> 时间：2012-11-20T12:40:17.007
> 
> 标签：c, opencv, tic-tac-toe

现在我控制机器人运行井字游戏
，但我不知道如何使用 opencv 库来识别游戏板和内部方块
我想知道如何使用算法来获取游戏板的角落和 9X9 游戏方块

这就是我得到的角落

二进制图像：

![](../Images/62c54689bfd820a42554523638c796f5.png)

cvFindContours：

![](../Images/129bc005c28adb99ca4034304959a033.png)

```
#include <stdio.h>
#include <fcntl.h>
#include <cv.h>
#include <cxcore.h>
#include <highgui.h>

int main(void){ 
IplImage *img=NULL;
IplImage *gray=NULL;
CvMemStorage* contour_storage;
CvSeq* contours=NULL;
CvPoint2D32f *corners;

img = cvLoadImage("tictactoe.bmp",CV_LOAD_IMAGE_COLOR);
gray = cvCreateImage( cvGetSize(img), IPL_DEPTH_8U, 1 );

cvSmooth( img, img, CV_GAUSSIAN, 3, 0, 0, 0);
cvCvtColor(img, gray, CV_RGB2GRAY);
cvAdaptiveThreshold(gray, gray, 128,CV_ADAPTIVE_THRESH_MEAN_C, CV_THRESH_BINARY_INV, 3, 5);
cvNamedWindow( "Threshold", CV_WINDOW_AUTOSIZE);
cvShowImage("Threshold", gray);

contour_storage = cvCreateMemStorage(0);
corners = (CvPoint2D32f *)malloc(sizeof(CvPoint2D32f)*9);
cvFindContours(gray, contour_storage, &contours, sizeof (CvContour), CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, cvPoint(0,0));
cvDrawContours(img, contours, CV_RGB(255,0,0), CV_RGB(0,255,0), 2, 4, 8, cvPoint(0,0));

cvNamedWindow("Calibration", CV_WINDOW_AUTOSIZE);
cvShowImage( "Calibration", img);

cvWaitKey(0);

return 0;
} 
```

我想知道如何处理图像处理来执行游戏

此程序仅限于使用 C 代码和 OpenCv 1.x 使用 arm 运行嵌入式板

请让我知道如何使用 opencv 开发这个游戏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:33:20.170

到目前为止我只使用了 c++ 接口，所以我不知道你必须调用的函数的确切名称。不过，这里有一个粗略算法的描述，我会用它来实现你想要的，所以你有一些关键字可以查找：

*   由于相机图像明显失真，可以通过弯曲的板线识别，您应该从校准相机开始。如果您始终使用相同的相机，或者至少使用相同焦距的相同型号，您只需执行一次。可以在[此处](http://dasl.mem.drexel.edu/~noahKuntz/openCVTut10.html)找到有关此的快速教程。[这](http://docs.opencv.org/doc/tutorials/calib3d/camera_calibration/camera_calibration.html#cameracalibrationopencv)是一个更详细的教程，有更多的数学，不幸的是他使用了 c++ 函数。

*   下一步将是检测电路板的单元格。我认为这可以通过使用[霍夫线变换](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html?highlight=hough%20line)（也是c ++）然后计算线交叉点来更容易地实现，因此您可以定义您的单元格。

*   如果您希望您的软件自动轮到它，您可以使用运动检测器来确定当前是否没有运动，然后采取行动。背景减法是一种简单的方法。我没有找到合适的解释，只是做谷歌搜索。

*   之后，您必须找到圆圈和十字。圆圈是更容易的部分，因为还有一个[Hough Circle Transform](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html?highlight=hough%20circles)。十字架更棘手。我会通过考虑细胞的对角线来估计交叉线的长度，然后再次使用霍夫线检测器。

[我在这里提到的所有内容都在这](https://rads.stackoverflow.com/amzn/click/com/0596516134)本书中得到了详细的解释（但不是太理论上），我发现这对学习 OpenCV 非常有帮助。他们甚至使用 C 接口。

# java - Oracle 脚本从 Java 代码运行，无需安装 Oracle 客户端

> ID：13473427
> 
> 赞同：1
> 
> 时间：2012-11-20T12:40:59.840
> 
> 标签：java, oracle

我编写了在 Oracle 数据库上工作的应用程序，我必须有可能从数据库上的 java 代码运行 sql 脚本。现在我在 sqlplus.exe 应用程序的帮助下完成了这项工作，但是这个解决方案迫使我安装了 Oracle 客户端，所以我想知道是否有任何方法可以从 java 代码运行 sql 脚本但没有 sqlplus.exe。我找到了描述基于 ant 任务的解决方案的文章，但据我所知，这将迫使我将 ant buid 基础设施附加到应用程序。对我来说最好的解决方案是让特殊的 jar 使用该 jar 中的一些魔术类并使用该类完成它:) 可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:44:43.393

[从这里学习在java中是可能的](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:49:34.267

Oracle 基本上使用三种语言：

*   SQL（SELECT、INSERT、CREATE TABLE 等命令）
*   PL/SQL（包括变量声明、循环、异常的过程语言）
*   SQLplus 命令（SET DEF、VARIABLE、@、斜杠 (/) 用于执行 PL/SQL 块等）

使用 Java 客户端 (ojdbc.jar)，您可以一次执行单个 SQL 语句和 PL/SQL 块。但它不支持 SQLplus。

如果您的脚本很简单，那么您可以编写一个解析器，将脚本拆分为单个 SQL 语句和 PL/SQL 块并一个一个地执行它们。但是如果你使用 SQLplus 命令，那就不可能了。

# python - 将字典转换为列表

> ID：13473433
> 
> 赞同：10
> 
> 时间：2012-11-20T12:41:21.730
> 
> 标签：python, list, dictionary

例子：

```
something = {
    "1": {
        "2": {
            "3": {
                "4": {},
                "5": {},
                "7": {},
                },
            "8": {
                "9": {},
                "10": {}
            },
            "11": {
                "12": {
                    "13": {
                        "14": {
                            "15": {
                                "16": {
                                    "17": {
                                        "18": {}
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

我正在尝试将此字典转换为这样的项目列表：

```
['1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18'] 
```

我应该使用什么方法？

我已经尝试过 something.items()，但我得到的是：

```
[('1', {'2': {'11': {'12': {'13': {'14': {'15': {'16': {'17': {'18': {}}}}}}}}, '8': {'9': {}, '10': {}}, '3': {'5': {}, '4': {}, '7': {}}}})] 
```

这是我第一次在这里发帖，所以如果我做错了什么，请告诉我。

谢谢你，很抱歉这个奇怪的帖子。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-20T12:45:40.910

您需要使用一个函数来展平您的结构：

```
def flatten(d):
    for key, value in d.iteritems():
        yield key
        for sub in flatten(value):
            yield sub 
```

（如果您使用的是 Python 3 ，`.iteritems()`则应将其替换为）。`.items()`

在 python 3.3 和更高版本上，您还可以使用新[`yield from`语法](http://docs.python.org/3/whatsnew/3.3.html#pep-380)：

```
def flatten(d):
    for key, value in d.items():
        yield key
        yield from flatten(value) 
```

这将递归地产生所有密钥。要将其转换为列表，请使用：

```
list(flatten(elements)) 
```

由于 Python 字典是无序的，因此返回的键的顺序不会被排序。如果您希望您的键具有特定的顺序，则必须明确对结果进行排序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T12:45:19.143

```
something = {'1': {'2': {'11': {'12': {'13': {'14': {'15': {'16': {'17': {'18': {}}}}}}}}, '3': {'4': {}, '5': {}, '7': {}}, '8': {'10': {}, '9': {}}}}}
a = []

def flatten(d,a):
    for k,v in d.items():
        a.append(k)
        flatten(v, a)
flatten(something, a)

# a == ['1', '2', '11', '12', '13', '14', '15', '16', '17', '18', '8', '9', '10', '3', '5', '4', '7']" 
```

# php - 需要在 PHP 中创建带有缩略图的 PDF 库

> ID：13473434
> 
> 赞同：-2
> 
> 时间：2012-11-20T12:41:22.077
> 
> 标签：php, pdf, hyperlink, filenames, image-gallery

我有 110 个 PDF。这些被命名为 001.pdf、002.pdf [...] 110.pdf。我在 JPG 中创建了所有缩略图，称为 001.jpg 等。

我在 PHP 中创建了一个表（如下）。

所有的 JPG 都在 ./files/alon/

所有的PDF都在./files/alon/pdf/

所以

```
<img src=".' . $images . $file . '" /> 
```

很好，一切正常，但是

```
<td align="center"><a href="' . $images . $big . $file . '"> 
```

不起作用，因为 $file 正在 /pdf/ 文件夹中寻找 001.jpg。

我需要类似的东西

```
<td align="center"><a href="' . $images . $big . $filename . '.pdf"> 
```

我会链接使用相同的 $filename 在每个图像“N° $filename”下创建一个标题

这是我的代码

```
 $images = "./files/alon/"; 
    $big    = "pdf/";
    $cols   = 2;     

    if ($handle = opendir($images)) {   
      while (false !== ($file = readdir($handle))) { 
        if ($file != "." && $file != ".." && $file != rtrim($big,"/")) { 
          $files[] = $file; 
          rsort($files);
        } 
      } 
      closedir($handle); 
    } 

    $colCtr = 0; 
    echo '<table width="100%" cellspacing="3"><tr>'; 

    foreach($files as $file) 
    { 
      if($colCtr %$cols == 0) 
      echo '</tr><tr><td colspan="2"><hr /></td></tr><tr>'; 
      echo '<td align="center"><a href="' . $images . $big . $file . '"><img src=".' . $images . $file . '" /></a></td>'; 
      $colCtr++; 
    }   
    echo '</table>' . "\r\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:47:40.937

为什么不在 foreach($files as $file) 中替换文件 .jpg -->> .pdf 的扩展名，在屏幕上回显内容？

```
foreach($files as $file) 
{ 
 $arrPDF = explode(".",$file);
 $pdfFile=$arrPDF[0]. ".pdf";
if($colCtr %$cols == 0) 
echo '</tr><tr><td colspan="2"><hr /></td></tr><tr>'; 
echo '<td align="center"><a href="' . $images . $big . $pdfFile . '"><img src=".' . $images . $file . '" /></a></td>'; 
      $colCtr++; 
} 
```

# mysql - 如何重启mysql服务器？

> ID：13473440
> 
> 赞同：13
> 
> 时间：2012-11-20T12:41:43.753
> 
> 标签：mysql, amazon-ec2, amazon-web-services, mysql-python, bitnami

每次我重新启动 MySQL 服务器

```
bitnami@xxx:/$ sudo opt/bitnami/ctlscript.sh start server 
```

```
WWarning: World-writable config file '/opt/bitnami/mysql/my.cnf' is ignored
Warning: World-writable config file '/opt/bitnami/mysql/my.cnf' is ignored
121120 12:30:18 mysqld_safe Logging to '/opt/bitnami/mysql/data/mysqld.log'.
121120 12:30:18 mysqld_safe Starting mysqld daemon with databases from /opt/bitnami/mysql/data
121120 12:30:20 mysqld_safe mysqld from pid file /opt/bitnami/mysql/data/ip-10-136-14-170.pid ended
/opt/bitnami/mysql/scripts/ctl.sh : mysql  could not be started 
```

服务器响应以下错误：

> （2002，“无法通过套接字'/tmp/mysql.sock'（2）连接到本地MySQL服务器”）

请告诉我我必须做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-20T12:55:34.237

如果 mysql 作为服务安装（大多数情况下），您可以执行`service mysqld restart`或`/etc/init.d/mysqld restart`.

您也可以使用`start`,`stop`或`reload`代替`restart`.

# css - 我怎样才能打破网格？这有一个常见的做法吗？

> ID：13473443
> 
> 赞同：1
> 
> 时间：2012-11-20T12:41:54.977
> 
> 标签：css, twitter-bootstrap, grid-layout

我正在使用引导程序的网格，我想要一个 div 来“打破”网格并拉伸到屏幕的边界（'width:100%'）。

我的代码看起来像这样：

```
<div class="container">
 <div class="row">
  <div class="span12">
   div that is the width of the grid
  </div>
  <div class="unknown">
   div that breaks the grid and has full width
  </div>
 </div>
</div> 
```

我怎样才能做到这一点？打开许多不同的容器是常见的做法，还是我可以使用嵌套在容器中的 div 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:51:24.970

使用多个容器而不是使用自定义样式覆盖布局。Bootstrap 本身有使用多个容器的示例，例如： [carousel](http://twitter.github.com/bootstrap/examples/carousel.html)

# c# - 打印在 wpf 中不起作用

> ID：13473445
> 
> 赞同：0
> 
> 时间：2012-11-20T12:41:58.407
> 
> 标签：c#, wpf, printing, printdialog

我正在开发 wpf 应用程序。我在 xaml 页面中只有一个按钮。单击它，我编写了以下代码

```
private void button1_Click(object sender, RoutedEventArgs e)
        {

            PrintDialog printDialog = new PrintDialog();
            if (printDialog.ShowDialog() == true)
            {
                //PrintUsingDocumentCondensed("Hi", "Hello");
                printDialog.PrintVisual(button1, "Print123");
                //printDialog.PrintDocument("a",
            }
        } 
```

我已将打印机连接到我的系统。当我单击应用程序中的打印按钮时，打印机开始打印。打印机打印一些文本，例如`BeginDefaults`和`EndDefaults`、`BeginResource`和`EndResource`。与许多其他文本类似。它还会打印一些文本，例如“此作业需要的内存比这台打印机可用的内存更多”、“对于输出格式，请选择优化便携性”、“减少文档中的字体数量”。等我认为我的打印机出了问题。或者我的代码或应用程序有什么问题吗？我应该如何使用上述代码在打印页面上打印实际按钮？您能为我提供上述链接的任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:49:47.150

我不确定为什么直接在`PrintVisual`方法中放置对象不起作用，但我觉得这不是你最终会这样做的方式，所以我建议走不同的路线。我不会传入控件，而是生成一个位图，然后将位图传递给`PrintVisual`方法。这个问题处理如何做到这一点：

[从文件加载图像并使用 WPF 打印它......如何？](https://stackoverflow.com/questions/265062/load-image-from-file-and-print-it-using-wpf-how)

然后这里有一个问题，展示了如何从控件创建位图。

[从控制视图中获取位图图像](https://stackoverflow.com/questions/2522380/get-a-bitmap-image-from-a-control-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:20:30.110

我检查了在记事本上打印文本。它给出了同样的错误。然后我分析打印机没有正确添加。这是我的错误。现在正确添加了打印机。现在一切正常

# ios - 主线程上的 IOS semaphore_wait_trap 导致 UI 挂起

> ID：13473448
> 
> 赞同：28
> 
> 时间：2012-11-20T12:42:11.137
> 
> 标签：ios, semaphore, freeze

我在异步（串行）工作队列中有一个长时间运行的函数。我知道有时这个函数会挂在特定的 openCV 调用中。由于某种原因，这种挂起也会导致主线程挂起。暂停并进入调试模式时，我看到有人调用

```
semaphore_wait_trap() 
```

在主线程（队列）上

我可以在调试模式下挂起挂起的线程（我的工作队列），然后这个陷阱消失，GUI 再次在电话上响应。

取消暂停工作线程后，GUI 会响应 1-2 秒（我怀疑直到再次激活该线程），然后 UI 再次变得无响应。

该线程不`dispatch_sync()`调用主线程/队列

IOS是否有可能因为工作人员长时间运行而暂停主线程（“陷阱”它）？

我可以强制它删除块吗？

我正在添加调试模式堆栈的一些打印屏幕。

在暂停挂起队列之前：

![主队列栈](../Images/0937cbbdfc9c9b66a1923aff3e243b3c.png)

和挂线：

![挂队](../Images/501e9aa6b79a269ee94ecfb8c9fd4963.png)

并在暂停和挂起坏队列后：

![暂停后](../Images/702cb461d44248b7fe11c1392273024f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:32:20.777

IOS是否有可能因为工作人员长时间运行而暂停主线程（“陷阱”它）？- 不。我认为，您的问题与绘制或更改某些 UI 元素有关。并非所有函数都可以从后台线程调用（例如，UI 元素的更改必须在主线程中完成。）。在您的串行队列中，如果任何方法需要更改 UI 元素，您必须在主线程上调用它，例如

```
dispatch_async(dispatch_get_main_queue(), ^{
                //do some main thread job here
            });
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T17:38:32.760

也许您只是忘记在调度函数调用中保留一个变量（对我而言，我在 dispatch_once_t 声明之前省略了一个静态关键字，并且调度无法使用内联函数处理）。堆栈跟踪就像你的一样。那是我的错。

```
+ (instancetype)sharedInstance
{
    (static was omitted) dispatch_once_t once;
    static id sharedInstance;
    dispatch_once(&once, ^{
        sharedInstance = [[self alloc] init];
    });
    return sharedInstance;
} 
```

# android - 我们如何使用 adb.exe 在 android 中获取 BootAnimation.zip 位置？

> ID：13473450
> 
> 赞同：5
> 
> 时间：2012-11-20T12:42:10.117
> 
> 标签：android, boot-animation

在不同的安卓手机中，“bootanimation.zip”的位置是不一样的。在这种情况下，我们希望使用 adb.exe 找到“bootanimation.zip”的真实位置。有可能帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T18:39:49.560

尝试`system/media`或`system/customize/resource`或`data/local`。如果您在其中一个`bootanimation.zip`文件中找到文件，那可能就是它在您手机上的位置。

# eclipse - 运行 tycho 测试后的 OSGi 控制台

> ID：13473452
> 
> 赞同：4
> 
> 时间：2012-11-20T12:42:18.993
> 
> 标签：eclipse, osgi, tycho

我想知道有没有办法告诉 Eclipse 中的 osgi 控制台在使用 tycho-surefire-plugin 运行测试后不要退出？

我已经尝试过`<argLine>-Dosgi.noShutdown=true</argLine>`and `<appArgLine>-console -noExit</appArgLine>`，但我没有得到我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:36:10.917

通过在远程调试模式下启动 tycho 测试，我终于成功进入了 OSGi 控制台。然而，与上述解决方案相比，我不得不使用以下配置：

```
<argLine>-ea -Dosgi.clean=true -Ddebug=true -Dosgi.console.enable.builtin=true</argLine>  
<appArgLine>-console 1234 -noExit</appArgLine> 
```

# php - Silex 自定义类结构和加载

> ID：13473454
> 
> 赞同：0
> 
> 时间：2012-11-20T12:42:22.253
> 
> 标签：php, doctrine, autoload, composer-php, silex

我正在使用 Silex（微框架）构建一个应用程序。

随着我的应用程序的规模越来越大，并且在多条路线中使用相同代码的需求增加，我想进一步组织所有内容..

我的想法是创建一些自定义类，然后与我的应用程序共享它们：

```
$app['test'] = $app->share(function () {
    require_once('../vendor/acme/src/test.php');
    $testClass = new Test();
    return new $testClass;
}); 
```

这实际上有效，但我需要以下帮助：

1.  使用作曲家自动加载类（它应该在 Silex 中完成的方式）。
2.  能够在我的班级中使用现有的 Doctrine DBAL 连接和方法。

我希望有人能给我一些提示，因为我发现 Silex 文档不是很有用，而且我是 Silex 和 Composer 的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:15:48.423

检查[有关自动加载的作曲家文档](http://getcomposer.org/doc/04-schema.md#autoload)，当您添加配置时，您应该运行`composer dump-autoload`以重新生成作曲家自动加载器。那么你的 require_once 应该不再需要了。

这很可能会起作用（假设 Test 类在 src/Test.php 中）：

```
{
    "autoload": {
        "psr-0": {
            "": "src/"
        }
    }
} 
```

这将使 src/ 中的任何符合 PSR-0 的类都可以自动加载。

关于您的第二点（在您的课程中使用 DBAL），您应该将您的课程配置为访问该服务的 silex`db`服务。[在http://silex.sensiolabs.org/doc/services.html](http://silex.sensiolabs.org/doc/services.html)阅读服务

# ios - iOS 音源

> ID：13473456
> 
> 赞同：0
> 
> 时间：2012-11-20T12:42:30.997
> 
> 标签：ios, audiounit, tone-generator

我正在开发一个音乐应用程序，我想生成音调。当然，我确实下载了 [http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html](http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html) ，这似乎是一个好的开始。

但我也阅读了苹果文档和很多关于音频单元的东西，我发现有一种音频单元叫做：“kAudioUnitType_Generator”。

这个的描述是：

> “发生器单元提供音频输出，但没有音频输入。这种音频单元类型适用于音调发生器。与乐器单元不同，发生器单元没有控制输入。”。[https://developer.apple.com/documentation/audiotoolbox/kaudiounittype_generator](https://developer.apple.com/documentation/audiotoolbox/kaudiounittype_generator)

这似乎正是我所需要的。所以我的问题是：

1.  我正在搜索几天关于 iOS 中的音调生成，为什么似乎没有人知道 Apple 的音调生成器，并且总是提到 cocoawithlove 中的“音调生成器”？为什么这个不使用音频单元的“kAudioUnitType_Generator 类型”？

2.  您有任何线索、网站或 github 项目可以帮助我使用 Apple 的 kAudioUnitType_Generator 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:40:17.737

从（过时的）[iOS 音频单元托管指南](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/UsingSpecificAudioUnits/UsingSpecificAudioUnits.html#//apple_ref/doc/uid/TP40009492-CH17-SW1)、[这篇](http://touchproducer.com/?p=1951)关于 iOS 5[的帖子和这篇](http://cocoaconf.com/raleigh-2012/session/core-audio)关于 iOS 6 的帖子来看，`kAudioUnitType_Generator`音频单元在 iOS 中不可用。不幸的是，iOS 的音频单元一直非常有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:30:34.990

具有 kAudioUnitType_Generator 类型的音频单元不会生成音调（如正弦波等）。它们可以作为其他音频单元的声源。这种类型的音频单元可以“播放”文件、从网络接收声音（仅在 OS X 上）和播放音频片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-31T02:28:39.793

现在你会使用 AVAudioEngine 和[https://developer.apple.com/documentation/avfoundation/avaudiounitgenerator](https://developer.apple.com/documentation/avfoundation/avaudiounitgenerator)

# deployment - 使用本地用户文件的 ClickOnce 部署

> ID：13473458
> 
> 赞同：1
> 
> 时间：2012-11-20T12:42:32.707
> 
> 标签：deployment, clickonce, configuration-files

我想部署一个 ClickOnce 应用程序，但希望有一个可配置的用户文件来存储不会在我每次发布新版本时被覆盖的设置和首选项。是否指定特定文件应部署在任何尚未安装但不覆盖任何先前版本的安装中？

我能想到的唯一解决方法是将数据存储在数据库中，但它是如此以用户为中心，以至于重新发明配置文件似乎需要很多开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:17:14.757

一种方法是使用[应用程序设置](http://msdn.microsoft.com/en-us/library/k4s6c3a0%28v=vs.100%29.aspx)，我们将其用于使用 ClickOnce 部署的 WPF 应用程序。对于用户指定的下载文件夹、默认设置等，我们有多个设置。对于每个这样的设置，*范围*都设置为用户。当用户更改设置时，新值会通过调用保持不变，例如：

```
YourProject.Properties.Settings.Default.UserSetting1 = "New Value";
YourProject.Properties.Settings.Default.Save(); // persists the new value for the current user 
```

即使通过 ClickOnce 多次更新应用程序，这些设置也会为每个用户保留。请注意，这些设置是在每台机器上保留的，因此如果用户转到新机器并下载应用程序，他们的设置将不会被传输。

希望这可以帮助，

# java - Java MappedByteBuffer.get() 出奇的慢

> ID：13473461
> 
> 赞同：6
> 
> 时间：2012-11-20T12:42:34.927
> 
> 标签：java, android, performance, file, mapping

我试图了解我从 MappedByteBuffer 类的 get() 方法获得的性能是否正常。我的代码如下：

```
private byte[] testBuffer = new byte[4194304];
private File sdcardDir, filepath;
private FileInputStream inputStream; 
private FileChannel fileChannel;
private MappedByteBuffer mappedByteBuffer;

// Obtain the root folder of the external storage
sdcardDir = Environment.getExternalStorageDirectory();

// Create the reference to the file to be read
filepath = new File(sdcardDir, "largetest.avi");
inputStream = new FileInputStream(filepath);
fileChannel = inputStream.getChannel();

mappedByteBuffer = fileChannel.map(FileChannel.MapMode.READ_ONLY, 0, (4194304));

Log.d("GFXUnpack", "Starting to read");
mappedByteBuffer.position(0);
mappedByteBuffer.get(testBuffer, 0, (4194304));
Log.d("GFXUnpack", "Ended to read");
mappedByteBuffer.rewind(); 
```

由于我是初学者，并且我需要从 SD 卡读取数据的最快方法，因此我查找了文档，发现文件映射在许多情况下被认为是从文件中读取数据的最快方法。但是如果我运行上面的代码，虽然缓冲区被正确填充，但性能很慢（或者可能不是？你决定！！）我可以在**近 5 秒内**读取那些 4194304 字节，即**每秒不到 1MB**。我正在使用 Eclipse 直接连接到我的 Optimus Dual 智能手机；即使我将读取操作置于循环中，读取也需要相同的时间（如果执行多次读取，可能不会发生开销初始化......不是这种情况）。

如果我减小或增大文件，此文件大小与时间的关系不会改变：几乎 9 秒内将读取 8 兆，2 秒内将读取 2 兆，依此类推。我读过，即使是慢速 SD 卡也可以以每秒至少 5 MB 的速度读取......请注意，4194304 是 2 值的幂，因为我已经读过这会提高性能。请告诉我您的意见：现代智能手机的实际性能是每秒 1MB，还是我的代码有问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:07:06.223

在 Hotspot JVM 中，MappedByteBuffer.get() 使用内部调用而不是本机调用毫无价值。当复制大数据块时，它一次复制多个字节，例如使用 MMX 指令复制 8 个字节或更长。

AFAIK，Android 不这样做，这使得这个电话更加昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:02:39.090

我看不出你的代码有什么问题。它可能只是设备和/或文件系统实现的速度。正如[Tom Hawtin](https://stackoverflow.com/a/537516/139985)所说，“[m] 内存映射 I/O 不会使您的磁盘运行得更快”。

# objective-c - 如何将项目从 didSelectRowAtIndexPath: 保存到 NSUserDefaults

> ID：13473464
> 
> 赞同：0
> 
> 时间：2012-11-20T12:42:49.123
> 
> 标签：objective-c, ios, nsuserdefaults, didselectrowatindexpath

我正在尝试将选定表格视图行的单元格标题保存到 NSUserDefaults。**我在didSelectRowAtIndexPath:**方法中有以下代码。目前这保存了整个 listOfItems（一个 NSMutableArray）。我希望能够保存和检索用户在表格行中选择的 listOfItems 数组对象。

谢谢你的帮助

这是在 viewDidLoad 中初始化的 NSMutableArray：

```
listOfItems = [[NSMutableArray alloc] init];

[listOfItems addObject:@"Brazil"];
[listOfItems addObject:@"Italy"];
[listOfItems addObject:@"Spain"];
[listOfItems addObject:@"United Kingdom"];
[listOfItems addObject:@"United States"]; 
```

didSelectRowAtIndexPath: 方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSMutableData *data = [NSMutableData data];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    // Customize archiver here
    [archiver encodeObject:listOfItems forKey:@"keyForYourArrayOfNSIndexPathObjects"];
    [archiver finishEncoding];
    [[NSUserDefaults standardUserDefaults] setObject:data forKey:@"keyForYourArrayOfNSIndexPathObjects"];

    NSKeyedUnarchiver *unarchiver;
    unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:
                  [[NSUserDefaults standardUserDefaults] objectForKey:@"keyForYourArrayOfNSIndexPathObjects"]];
    // Customize unarchiver here
    listOfItems2 = [unarchiver decodeObjectForKey:@"keyForYourArrayOfNSIndexPathObjects"];
    [unarchiver finishDecoding];

    NSLog(@"from the list of items: %@", listOfItems2[2]);
} 
```

NSLog 输出是：“来自项目列表：西班牙”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:47:28.467

在你的`didSelectRowAtIndexPath`你应该做以下

```
int index = indexPath.row;
id obj = [listOfItems objectAtIndex:index]; 
```

然后以您需要的方式将其保存到用户默认值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:47:20.420

如果要保存所选国家/地区的名称，只需将其写为：

```
NSString *save = [listOfItems objectAtIndex:indexPath.row];
[[NSUserDefaults standardUserDefaults] setObject:save forKey:@"selectedCountry"]; 
```

像这样检索它：

```
NSString *saved = (NSString *) [[NSUserDefaults standardUserDefaults] objectforKey:@"selectedCountry"]; 
```

# android - 带 Alpha 通道的位图着色器。（Alpha正在画黑色..？）

> ID：13473471
> 
> 赞同：1
> 
> 时间：2012-11-20T12:43:12.177
> 
> 标签：android, colors, bitmap, drawing, alpha

我得到了我的位图，将其用作着色器平铺模式。

除了要绘制的形状轮廓外，PNG 主要是 alpha。

除了它绘制轮廓，而是被黑色包围，而不是透明（alpha）。

```
 pnt.reset();

    if(backgroundColor == 1)
    {   
            pnt.setColor(myColor);
            pnt.setStyle(Paint.Style.FILL);

    }

     m_canvas.drawPath(path, pnt);

//fillBMP = getBitmapFromAsset(m_context, "brush.png"); 
    fillBMP = BitmapFactory.decodeFile(mySDPath + "brush.png");
fillBMPshader = new BitmapShader(fillBMP, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);  

pnt.setShader(fillBMPshader);  

m_canvas.drawPath(path, pnt); 
```

下面是左边画笔的例子。但结果它绘制在右边。

![在此处输入图像描述](../Images/943e4b22ac6fa0ba417ca25c97010c8c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:00:37.733

你应该设置`XferMode`你的`Paint`对象。更具体地说，您必须使用[PorterDuffXferMode MULTIPLY](http://developer.android.com/reference/android/graphics/PorterDuffXfermode.html)。

这是一个类似的问题：[Android 颜色叠加 - PorterDuff 模式](https://stackoverflow.com/questions/8139555/android-color-overlay-porterduff-modes)

# asp.net - 使用存储过程来（+1 或 -1）表中的值

> ID：13473472
> 
> 赞同：1
> 
> 时间：2012-11-20T12:43:12.973
> 
> 标签：asp.net, sql-server

我有一个按钮事件，在达到一定数量的用户后必须自行禁用。

我们正在将当前访问的用户计数存储在数据库中，并且我正在尝试创建一个存储过程，当调用该存储过程时，它将自动增加该表上的用户计数。
*我将创建一个单独的过程来减去。*

在我看来，我需要获取当前值，添加一个，然后将其保存在表中，将我带到以下代码：

```
CREATE PROCEDURE procDrRefBooksAddUser 
    -- Add the parameters for the stored procedure here
    @fileId int = NULL,
    @count int = 0,
    @newCount int OUTPUT
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;
    SELECT UserCount FROM tblDrRefBooks WHERE DrRefBookFileID = @fileId
    SET @count = UserCount

    SET @newCount = @count + 1

    -- Insert statements for procedure here
    UPDATE tblDrRefBooks SET tblDrRefBooks.UserCount = @newCount WHERE DrRefBookFileID = @fileId
END 
```

不幸的是，我无法正确处理，出现以下错误：

```
Msg 207, Level 16, State 1, Procedure procDrRefBooksAddUser, Line 17
Invalid column name 'UserCount' 
```

有人可以告诉我哪里出错了。

**编辑：**答案更新（最后）

我的 SQL 是：

```
ALTER PROCEDURE [dbo].[procDrRefBooksAddUser] 
    -- Add the parameters for the stored procedure here
    @fileId int = NULL,
    @newCount int OUTPUT
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    -- SET NOCOUNT ON;

    UPDATE tblDrRefBooks
    SET @newCount = UserCount = UserCount + 1
    WHERE DrRefBookFileID = @fileId
    SELECT @newCount AS iden

END 
```

后面的代码是：

```
 using (SqlConnection db = DataConn.SqlConnection())
                {
                    db.Open();
                    SqlTransaction transaction = db.BeginTransaction();

                    try
                    {
                        lbltest.Text = "Starting...";
                       using (SqlCommand acommand =
                            new SqlCommand(
                                "EXEC procDrRefBooksAddUser @fileID, @count",
                                db, transaction) { CommandType = CommandType.Text })
                        {
                            acommand.Parameters.Add(new SqlParameter("@fileID", SqlDbType.Int)).Value = Int32.Parse(location.Value);
                            acommand.Parameters.Add(new SqlParameter("@count", SqlDbType.Int) { Direction = ParameterDirection.Output });

                            using (SqlDataReader rdr = acommand.ExecuteReader())
                            {
                                btnLoad.Text = "Here: " + rdr["iden"];
                            }
                        }

                        transaction.Commit();
                    }
                    catch (Exception ea)
                    {
                        transaction.Rollback();
                        lbltest.Text = ("Insertion Error: " + ea.Message);
                    }
                } 
```

但我得到这个错误：`Insertion Error: Invalid attempt to read when no data is present.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:44:22.240

```
SET @count = UserCount 
```

是不正确的。您不能`SELECT`像这样访问先前语句中的列。

您可以在一个原子语句中完成所有操作。这会增加列并将输出参数设置为 UserCount 的新值。

```
UPDATE tblDrRefBooks
SET    @newCount = UserCount = UserCount + 1
WHERE  DrRefBookFileID = @fileId 
```

这避免了竞争条件在单独的操作中读取和写入值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:46:41.997

对于参考案例，它应该是这样的

```
SELECT @Count = UserCount FROM tblDrRefBooks WHERE DrRefBookFileID = @fileId
@newCount = @Count + 1 
```

但是你可以避免这种情况，而是这样做

```
UPDATE tblDrRefBooks SET UserCount = UserCount + 1
WHERE 
   DrRefBookFileID = @fileId AND
   UserCount < @MaxUserCount 
```

## 更新

注意我添加了`AND UserCount < @MaxUserCount`. 随着页面快速刷新[竞争条件]，您的存储过程可能无法捕获所有计数。您可能有一个旧的 @Count 值。

*   确保计数仅在未达到 MAX 时增加
*   只需使用另一个 PROC 随时获取计数。不要在与更新计数相同的 PROC 中执行此操作，因为您可以获得 OLD 计数值
*   一旦达到 MAX，就可以在你的表上有一个标志，在 PROC 中设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:49:08.080

在您的程序中使用以下代码：

从 tblDrRefBooks 中选择 @count=UserCount，其中 DrRefBookFileID = @fileId

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T07:30:02.343

无需使用临时变量和使用选择查询。试试这个..

```
UPDATE tblDrRefBooks 
SET tblDrRefBooks.UserCount = UserCount +1 
WHERE DrRefBookFileID = @fileId 
```

# windows-8 - 我们可以从桌面应用程序和 Windows Phone 8 应用程序访问 Windows 8 WinRT API 吗？如果是这样，它们是否在不同的命名空间中？

> ID：13473473
> 
> 赞同：2
> 
> 时间：2012-11-20T12:43:17.727
> 
> 标签：windows-8, microsoft-metro

随着时间的推移，我在我的博客上收到了许多关于该领域的评论。有人问了很多问题，例如“你能在桌面应用程序中使用 WinRT 吗？”、“你能在 .NET 应用程序中使用 WinRT 吗？”、“你能在 .NET 应用程序中使用 WinRT 吗？” ETC？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:43:17.727

是的，您可以参考[http://kishore1021.wordpress.com/2012/08/14/can-you-use-windows-8-winrt-api-from-net-desktop-applications/获取更多信息](http://kishore1021.wordpress.com/2012/08/14/can-you-use-windows-8-winrt-api-from-net-desktop-applications/)

在构建此类应用程序时，最好的方法是开发可移植类库并访问可从桌面、商店和电话应用程序使用的 API。通过这种设计，您不必为每个设备重写业务逻辑代码。有关 PCL 的详细信息，请参阅[http://channel9.msdn.com/Shows/This+Week+On+Channel+9/TWC9-August-10-2012](http://channel9.msdn.com/Shows/This+Week+On+Channel+9/TWC9-August-10-2012)

可在 Metro 风格应用程序中使用的 Win32 和 COM API 子集在 Metro 风格应用程序的 Windows 软件开发工具包 (SDK) 的头文件中指示。在头文件中查找以下语句：

```
#pragma region Application Family

#pragma region Desktop Family 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:55:57.020

更多这样的：

*   来自[代码项目](http://www.codeproject.com/Articles/457335/How-to-call-WinRT-APIs-from-NET-desktop-apps)
*   来自[英特尔开发者专区](http://software.intel.com/en-us/articles/using-winrt-apis-from-desktop-applications)

# c# - 有没有更简洁的方式来表达这个 foreach 循环？

> ID：13473475
> 
> 赞同：1
> 
> 时间：2012-11-20T12:43:21.817
> 
> 标签：c#, linq

我有 2 个需要合并的列表。清单 1 只有日期，清单 2 也可能有时间元素：

```
var List1 = new[] { 
  new ListType{ val = new DateTime(2012, 1, 1)}, 
  new ListType{ val = new DateTime(2012, 1, 2)} 
};

List2 = new[] { new ListType{ val = new DateTime(2012, 1, 1, 5, 0, 0)} };

FinalList = new[] { 
  new ListType{ val = new DateTime(2012, 1, 1, 5, 0, 0)}, 
  new ListType{ val = new DateTime(2012, 1, 2)} 
}; 
```

我要解决的方法是：

```
foreach (var l in List1) {
  var match = List2.FirstOrDefault(q => q.val.Date == l.val);
  if (match == null) continue;
  l.val = match.val;
} 
```

有没有比遍历 List1、使用 FirstOrDefault 然后重新分配 val 更好的方法？它有效，所以如果 Linq 有更优雅的方式（即我遗漏了一些明显的东西），这只是一种好奇心。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:52:45.383

您可以使用[`Enumerable.Union`](http://msdn.microsoft.com/en-us/library/bb358407.aspx)自定义`IEqualityComparer<ListType>`：

```
class ListType
{
    public DateTime val { get; set; }

    public class DateComparer : IEqualityComparer<ListType>
    {
        public bool Equals(ListType x, ListType y)
        {
            if (ReferenceEquals(x, y))
                return true;
            else if (x == null || y == null)
                return false;
            return x.val.Date == y.val.Date;
        }

        public int GetHashCode(ListType obj)
        {
            return obj.val.Date.GetHashCode();
        }
    }
} 
```

进而 ...

```
var finalList = List2.Union(List1, new ListType.DateComparer()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:53:13.337

我不会摆脱循环，但为了提高效率，我会建立一个字典，将日期映射到第一个匹配时间：

```
var dateToTime = List2
    .GroupBy(d => d.Date)
    .ToDictionary(g => g.Key, g => g.First());
foreach (var l in List1)
{
    DateTime match;
    if (dateToTime.TryGetValue(l.val, out match))
        l.val = match.val;
} 
```

LINQ 用于查询项目而不是更新项目 - 如果您需要更新项目，请使用非 LINQ 的东西，如`foreach`循环。也就是说，如果您想从第一个列表中的项目生成一个*新*列表，则以下代码等效于您的代码：

```
var newList = List1.Select(l => new ListType { val = 
    dateToTime.ContainsKey(l.val) ? dateToTime[l.val] : l.val }).ToList(); 
```

# java - 如何将从控制器读取的属性文件的值注入到 bean 中？

> ID：13473480
> 
> 赞同：0
> 
> 时间：2012-11-20T12:43:40.833
> 
> 标签：java, spring, properties, dependency-injection

我想使用控制器从 .properties 文件中读取属性，并将其值显示在 jsp 文件中，该文件是使用依赖注入的视图，方法是将检索到的属性存储在 pojo 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:48:56.840

为此使用[PropertyPlaceholderConfigurer 。](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)属性将由 spring 加载，因此您的控制器无需执行此操作。您可以将属性直接注入到您的视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:11:16.430

AppContext 可以有这个：

```
<context:property-placeholder location="classpath:my.properties" ignore-unresolvable="true"/> 
```

控制器可以有这个

```
@Value("${language}")
private String language;

@Value("${allLanguages}")
private String allLanguages; 
```

属性文件包含此文件或类似文件的位置

```
language = java 
alllanguages = java and \
               c++
somethingelse = whatever 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:00:51.307

尝试这个

```
@Component
class MyComponent {

  @Property(key = "proo.xmlurl")
  public void setUrlString(String urlStr) {
        try {
            this.url = new URL(urlStr);
        } catch(MalformedURLException e) {
            throw new IllegalArgumentException(urlStr + " is not a valid http         url", e);
        }
    }
} 
```

在你的属性文件中放这个

```
proo.xmlurl=${proo.xmlurl} 
```

# c# - 让flowlayoutpanel在c#中随页面滚动

> ID：13473485
> 
> 赞同：1
> 
> 时间：2012-11-20T12:44:08.473
> 
> 标签：c#, visual-studio-2010, scroll

`flowLayOutpanels`我的表格上有 2 个。在两者之一中添加了太多控件，用户必须向下滚动才能查看所有控件。

我希望我的第二个`flowlayOutPanel`总是可见的。所以这个面板必须随着页面向下滚动。是否有功能可以做到这一点或轻松做到这一点？我应该朝哪个方向寻求解决这个问题？

# python - 从 Python 的 subprocess.call 调用时，SVN 导出不起作用

> ID：13473487
> 
> 赞同：0
> 
> 时间：2012-11-20T12:44:20.877
> 
> 标签：python, svn

我有以下函数从 Subversion 存储库中获取文件：

```
def getFileSVN(remoteFile, localFile):
    remoteFile = SVN_URL + '/' + remoteFile
    command = '{0} export {1} {2}'.format(SVN, remoteFile, localFile)
    ret = subprocess.call(command.split())
    if ret == 0:
        return True
    else:
        return False 
```

该函数通过以下方式调用：

```
ret = getFileSVN(branches/branch/somefile, /tmp/tmpdir/somefile) 
```

但它总是失败：

```
svn: Can't open '/tmp/tmpdir/tempfile.tmp': No such file or directory 
```

我找不到我的错误在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:08:12.637

tmpdir 存在吗？我自己不使用 SVN，但可能是它在尝试创建文件之前没有创建文件夹。

# python - 如何制作 Web 服务器来进行定时多项选择测试？

> ID：13473489
> 
> 赞同：1
> 
> 时间：2012-11-20T12:44:21.610
> 
> 标签：python, web-applications, haskell, clojure, lisp

我想制作一个网络应用程序，询问人们多项选择问题，以及他们需要多长时间才能回答。

我希望那些想要的人能够创建帐户并存储数据，以了解他们的表现如何以及他们的绩效如何提高。

尽管我是一名优秀的程序员并且了解 http 的工作原理，但我之前从未编写过任何类型的网络应用程序。

我假设（没有证据）使用“框架”比从头开始破解一些东西更好，我很感激人们认为哪个框架最合适的建议。

我希望它会很受欢迎，但宁愿让一些东西发挥作用，也不愿在开始时花时间担心扩展。这是理智的吗？

我希望能够在我自己的机器上开发和测试它，然后将它部署到虚拟服务器或其他一些托管解决方案。

我更喜欢使用 Clojure、Lisp 或 Haskell 之类的语言，但如果使用 Python 或 Ruby 的优势超过了我更喜欢使用更数学化的语言这一事实​​，那么我两者都喜欢那些也是。

我可能会在 perl 上划清界限，但如果 perl 甚至 Java 或 C 之类的东西具有令人信服的优势，那么我也对它们非常满意。他们似乎不适合这种事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:08:59.483

> 我更喜欢使用像 Clojure 或 Lisp 或 Haskell 这样的语言

如果您对 Haskell 感到满意，您的选择是[Yesod](http://www.yesodweb.com/)（我喜欢它）。

如果不是，您的优先事项是什么？

*   学习、享受和生产力 -> 那么你的选择是 Haskell + Yesod。

*   快速提高生产力 -> Python、Ruby、...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T12:54:04.053

我可以推荐从[Flask](http://flask.pocoo.org/)开始。这很容易。

```
from flask import Flask
app = Flask(__name__)

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

使用模板（`jinja`,`mako`等），您可以轻松创建动态网页： http: [//flask.pocoo.org/docs/templating/](http://flask.pocoo.org/docs/templating/)

对于您的时间计算问题，一个简单的解决方案可能是将服务器时间放在问题的表格中，并在获取响应时计算增量。

**编辑：哦，还有一件事，你可以在**[Heroku](https://devcenter.heroku.com/articles/python)上相对容易地部署一个 Flask 应用程序，这是一个免费的云应用程序平台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T15:20:36.447

当服务器端创建表单时，用请求的时间戳编码一个隐藏字段，这样当用户发布他的表单时，你可以看到时间差。

如何实现这取决于您、您可以使用哪台服务器以及其他几个因素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T20:14:20.300

就 Haskell 网络框架而言，我也推荐[Happstack](http://www.happstack.com)，但 Yesod 本身就是优秀的软件，可能具有更强大的支持基础。在任何一种情况下，都不要谈论 Haskell；我使用 Happstack 编写了自己的博客引擎（目前正在运行[The Ambulatory](http://blog.iansturdy.com) Sesquipedalian ），并且没有理由相信 Haskell 不适合这些任务。本地测试然后部署到 VPS 对双方来说都是很自然的——它们可以在任何你可以安装 Haskell 平台的东西上运行。

就时间而言：无论您如何实施，请注意用户不能伪造时间。由于您似乎致力于用户帐户，我建议让用户检查测试，在他们开始测试的时间的个人资料中留下一个带时间戳的条目，并在他们提交答案时进行检查。使用客户端状态的解决方案也是可能的，但请记住防止客户端操作数据（编辑 cookie 或手动构建更改隐藏字段的 POST）——您可能需要以某种方式加密时间（它仍然可以更改，但不是用户选择的值）。

# php - 使用 PHP 动态更改 HTML 锚文本？

> ID：13473492
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:44:24.060
> 
> 标签：php, html

我在我的网站上使用地理定位 PHP 脚本来根据访问者的地理位置向他们展示不同的内容。

我想用 PHP 动态更改我的 HTML 链接，让我们说来自英国的用户获得 www.domain.com/UK 而来自美国的用户将获得 www.domain.com/US 等等......

我尝试了以下方法：

```
<?php
...

if(Location == 'UK') { $VARIABLE = "UK"; }

elseif (Location == 'US') { $VARIABLE = "US"; }

echo "<a href=\"www.domain.com/$VARIABLE\">$VARIABLE</a>\n";

?> 
```

但它没有用。

如何在 HTML 代码块中插入 PHP 变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:48:45.080

确保 Location 填写了默认国家代码。或者更好的是，确保 $VARIABLE 填充了默认的 UK，例如。

```
$VARIABLE = "UK"; //default value

if(Location == 'UK') { $VARIABLE = "UK"; }

elseif (Location == 'US') { $VARIABLE = "US"; } 
```

此外，您也可以这样做：

```
echo '<a href="www.domain.com/' . Location . '">' . Location . '</a>\n'; 
```

但如果它是空的，那么你仍然会得到一个空锚。

仅当 Location 实际上具有国家/地区代码信息时才有效。你确定 Location 不应该是 $Location 什么的吗？`die('Locations is: ' . Location);`通过在代码中的某处进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:52:11.727

有一种叫做[**GeoIP**](http://php.net/manual/en/book.geoip.php)的东西。通过手册。获取用户的位置。

```
$VARIABLE = geoip_country_code_by_name($_SERVER["REMOTE_ADDR"]);
if($VARIABLE == 'UK') { $VARIABLE = "UK"; }
elseif ($VARIABLE == 'US') { $VARIABLE = "US"; }
else { $VARIABLE = "UK"; } 
```

如果可能，设置会话或 cookie。

# sql - 用 PostgreSQL 中另一个表的列更新一个表的列

> ID：13473499
> 
> 赞同：32
> 
> 时间：2012-11-20T12:45:06.320
> 
> 标签：sql, postgresql, sql-update

我想将`val1`表的一列中的所有值复制到另一表`table1`的一列。我在 PostgreSQL 中尝试了这个命令：`val2``table2`

```
update table2
set val2 = (select val1 from table1) 
```

但我得到了这个错误：

> ```
> ERROR:  more than one row returned by a subquery used as an expression 
> ```

有替代方法吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-20T12:55:11.240

您的[`UPDATE`](https://www.postgresql.org/docs/current/sql-update.html)查询应如下所示：

```
UPDATE table2 t2
SET    val2 = t1.val1
FROM   table1 t1
WHERE  t2.table2_id = t1.table2_id
AND    t2.val2 IS DISTINCT FROM t1.val1;  -- optional, see below 
```

按照您的方式，两个表的各个行之间没有链接。`table1`每一行都会从`table2`. 这没有意义（以昂贵的方式）并且还触发了语法错误，因为这个地方的子查询表达式只允许返回单个值。

我通过加入两个表来解决这个问题`table2_id`。将其替换为实际链接两者的任何内容。

我重写了`UPDATE`加入`table1`（使用`FROM`子句）而不是运行相关的子查询，因为这通常快一个数量级。
它还可以防止`table2.val2`在`table1`. 相反，使用这种形式的查询*不会*对此类行产生任何影响。

您可以将表表达式添加到`FROM`列表中，就像在普通`SELECT`（表，子查询，集合返回函数，...）中一样。[手册：](https://www.postgresql.org/docs/current/sql-update.html#AEN85200)

> ***`from_list`***
> 
> 表表达式列表，允许其他表中的列出现在`WHERE`条件和更新表达式中。这类似于可以在语句的[`FROM`子句](https://www.postgresql.org/docs/current/sql-select.html#SQL-FROM) 中指定的表列表`SELECT`。请注意，目标表不得出现在 中***`from_list`***，除非您打算进行自联接（在这种情况下，它必须在 中出现别名***`from_list`***）。

最后一个`WHERE`子句阻止不会改变任何东西的更新——这实际上总是一个好主意（几乎全部成本但没有收益，外来例外适用）。如果新旧值都保证为`NOT NULL`，则简化为：

```
AND   t2.val2 <> t1.val1 
```

*   [我如何（或我可以）在多列上选择 DISTINCT？](https://stackoverflow.com/questions/54418/how-do-i-or-can-i-select-distinct-on-multiple-columns/12632129#12632129)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T07:20:20.253

从 table2 table2 更新 table1 set table1_column= table2.column where table1_id= table2.id

1.  不要为 table1 使用别名。
2.  表是表1，表2

# ruby-on-rails - 如何在backbone.js的集合中提供宁静的（嵌套的）url？（Rails App）

> ID：13473501
> 
> 赞同：1
> 
> 时间：2012-11-20T12:45:16.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js

在我的 Rails 应用程序中，我嵌套了如下路线：-

```
resources :users do
  resources :posts do
  end
end 
```

假设我需要获取单个用户帖子的所有评论。我应该使用 fetch 功能来收集帖子。

```
class DemoApp.Collections.Posts extends Backbone.Collection
// here my url should consist of user_id  and action where the posts
// are being fetched.
url: "/users/user_id/posts" 
```

为了获取评论，我应该在对象上调用 fetch 函数。

```
 posts = DemoApp.Collections.Posts 
 posts.fetch() 
```

我在传递 user_id 时遇到问题。

Gem 使用了骨干轨 (0.9.2.1)

红宝石版本 1.9.3

轨道版本 3.2.1

# java - 在 Jersey+Jackson 中序列化响应

> ID：13473504
> 
> 赞同：0
> 
> 时间：2012-11-20T12:45:22.450
> 
> 标签：java, rest, jersey, jackson

我试图了解是否可以将 java Map 序列化为来自 Jersey 的 Json 响应。

这是我的服务：

```
@Singleton
@Path("/")
public class ApiServiceResource {
    @Inject
    ISeedingUpdateService seedingUpdateService;

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("/map")
    public List<String> getMap() {
        return newArrayList(seedingUpdateService.toString());
    }
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("/pojo")
    public TemplateMessage getTemplateMessage(@PathParam("param") String param) {
        return new TemplateMessage(param, seedingUpdateService.toString());
    }

    @XmlRootElement
    public static class TemplateMessage {
        public Map<String,String > param;
        public TemplateMessage() {
        }
        public TemplateMessage(String param1, String param2) {
            this.param = newHashMap();
            this.param.put(param1,param2);
        }
    }
} 
```

getMap 方法失败，因为它无法序列化 Map -->

```
SEVERE: The registered message body writers compatible with the MIME media type are:
application/json ->
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$App
*/* -> 
```

第二种方法工作得很好，POJO 是用里面的 Map 序列化的。

有什么我想念的吗？

顺便说一下，应用程序是在 Guice 中配置的，所以这里是 guice 配置：

```
@Override
protected void configureServlets() {
    bind(ApiServiceResource.class);
    /* bind jackson converters for JAXB/JSON serialization */
    bind(MessageBodyReader.class).to(JacksonJsonProvider.class);
    bind(MessageBodyWriter.class).to(JacksonJsonProvider.class);
    Map<String,String> parameters = newHashMap();
    parameters.put("com.sun.jersey.config.property.packages", "com.delver.update.api");
    serve("/rest/*").with(GuiceContainer.class, parameters);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:08:09.243

您可以尝试我们在我们的应用程序中执行的操作，而不是绑定`MessageBodyWriter`（因为您已经拥有多个），我们通过以下方式在 Guice 中绑定 Jackson 编写器和异常映射器：

```
bind(forName("com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider")).in(Scopes.SINGLETON);
bind(forName("com.fasterxml.jackson.jaxrs.json.JsonParseExceptionMapper")).in(Scopes.SINGLETON);
bind(forName("com.fasterxml.jackson.jaxrs.json.JsonMappingExceptionMapper")).in(Scopes.SINGLETON); 
```

# c - how to make gluLookAt and glPerspective to work like glortho?

> ID：13473506
> 
> 赞同：0
> 
> 时间：2012-11-20T12:45:26.087
> 
> 标签：c, opengl

I don't know how to setup distance

where I should stand to look at my 2d stuff(which at center there is a ball pos:1024/2,768/2)

I use gluLookAt and glPerspective to give my 2d rotated object more 3d feel

anyway here is the code I use with glOrtho:

```
 glMatrixMode ( GL_PROJECTION );
    glLoadIdentity(); 
    glOrthof ( 0, 1024, 768, 0, 0, 1000.0f );
    glMatrixMode ( GL_MODELVIEW );
    glLoadIdentity(); 
```

and this is when I try to setup with glPerspective and gluLookAt:

```
 glMatrixMode ( GL_PROJECTION );
    glLoadIdentity();
    gluPerspective(90,1024/768,0,300);
    gluLookAt(1024 * 0.5,768 * 0.5f,-????,   1024 * 0.5,768 * 0.5,0,   0,-1,0);
    glMatrixMode ( GL_MODELVIEW );
    glLoadIdentity(); 
```

Basically I just want those codes that works the same,I am not sure how to setup the fovy value of gluPerspective,and the ??? from gluLookAt,how to project the full size with width 1024,and height 768?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:08:21.320

Well glOrtho is supposed to yield a parallel projection, so essentially using gluPerspective is going exactly the other way. If you're hoping to find a special case of gluPerspective that acts like glOrtho, the problem is that the matrices they generate are different in some ways you can't reach - note the bottom right corner, in particular, in what they generate:

glOrtho

```
 |     2                               |
   |----------      0          0      t  |
   |right-left                         x |
   |                                     |
   |                 2                   |
   |    0       ----------     0      t  |
   |            top-bottom             y |
   |                                     |
   |                                     |
   |    0           0          -2        |
   |                        --------  t  |
   |                        far-near   z |
   |                                     |
   |    0           0          0      1  |

gluPerspective

   |    f                                   |
   |  ------  0      0            0         |
   |  aspect                                |
   |                                        |
   |    0     f      0            0         |
   |                                        |
   |             zFar+zNear  2*zFar*zNear   |
   |    0     0  ----------  ------------   |
   |             zNear-zFar   zNear-zFar    |
   |                                        |
   |    0     0      -1           0         | 
```

So it's going to be hard to set the 2/(top-bottom) and the bottom row correctly, for starters.

If this line is the core of your issue:

```
gluLookAt(1024 * 0.5,768 * 0.5f,-????,   1024 * 0.5,768 * 0.5,0,   0,-1,0); 
```

...then just set thee -???? to a positive value indicating the distance to your eye from the center of the scene (OpenGL's positive Z points *towards* the viewer).

# c# - 使用实体框架从集合中删除项目

> ID：13473511
> 
> 赞同：9
> 
> 时间：2012-11-20T12:45:34.593
> 
> 标签：c#, entity-framework, ef-code-first, domain-driven-design

我正在使用 DDD。我有一个类 Product，它是一个聚合根。

```
public class Product : IAggregateRoot
{
    public virtual ICollection<Comment> Comments { get; set; }

    public void AddComment(Comment comment)
    {
        Comments.Add(comment);
    }

    public void DeleteComment(Comment comment)
    {
        Comments.Remove(comment);
    }
} 
```

保存模型的层根本不知道 EF。问题是当我打电话时`DeleteComment(comment)`，EF 抛出异常

来自“Product_Comments”关联集中的关系处于“已删除”状态。给定多重约束，相应的“Product_Comments_Target”也必须处于“已删除”状态。

即使从集合中删除元素，EF 也不会删除它。我应该怎么做才能在不破坏 DDD 的情况下解决这个问题？（我也在考虑为评论建立一个存储库，但不正确）

**代码示例：**

因为我正在尝试使用 DDD，所以`Product`它是一个聚合根，它有一个存储库`IProductRepository`。没有产品，评论就不能存在，因此是`Product`聚合的孩子，`Product`负责创建和删除评论。`Comment`没有存储库。

```
public class ProductService
{
    public void AddComment(Guid productId, string comment)
    {
        Product product = _productsRepository.First(p => p.Id == productId);
        product.AddComment(new Comment(comment));
    }

    public void RemoveComment(Guid productId, Guid commentId)
    {
        Product product = _productsRepository.First(p => p.Id == productId);
        Comment comment = product.Comments.First(p => p.Id == commentId);
        product.DeleteComment(comment);

        // Here i get the error. I am deleting the comment from Product Comments Collection,
        // but the comment does not have the 'Deleted' state for Entity Framework to delete it

        // However, i can't change the state of the Comment object to 'Deleted' because
        // the Domain Layer does not have any references to Entity Framework (and it shouldn't)

        _uow.Commit(); // UnitOfWork commit method

    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-09T04:19:37.127

我看到很多人报告这个问题。它实际上很容易修复，但让我认为没有足够的文档说明 EF 在这种情况下的行为方式。

技巧：在设置父母和孩子之间的关系时，您必须在孩子身上创建一个“复合”键。这样，当您告诉父级删除 1 个或所有子级时，相关记录实际上会从数据库中删除。

使用 Fluent API 配置复合键：

```
modelBuilder.Entity<Child>.HasKey(t => new { t.ParentId, t.ChildId }); 
```

然后，删除相关的孩子：

```
var parent = _context.Parents.SingleOrDefault(p => p.ParentId == parentId);

var childToRemove = parent.Children.First(); // Change the logic 
parent.Children.Remove(childToRemove);

// or, you can delete all children 
// parent.Children.Clear();

_context.SaveChanges(); 
```

完毕！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-21T09:07:41.390

这是一对相关的解决方案：

[从 EF 集合中删除时删除依赖实体](http://www.phdesign.com.au/programming/delete-dependent-entities-when-removed-from-ef-collection/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-30T14:35:40.083

我已经看到了 3 种方法来解决 EF 中的这一缺陷：

1.  配置复合键（根据 Mosh 的回答）
2.  引发域事件并指示 EF 在其处理程序中执行子删除（根据[此](https://stackoverflow.com/a/8360864/1628429)答案）
3.  覆盖并`DbContext`在`SaveChanges()`那里处理删除（根据欣快的回答）

我最喜欢选项 3，因为它不需要修改您的数据库结构 (1) 或域模型 (2)，而是将解决方法放在首先存在缺陷的组件 (EF) 中。

因此，这是取自 Euphoric 的回答/博客文章的更新解决方案：

```
public class MyDbContext : DbContext
{
    //... typical DbContext stuff

    public DbSet<Product> ProductSet { get; set; }
    public DbSet<Comment> CommentSet { get; set; }

    //... typical DbContext stuff

    public override int SaveChanges()
    {
        MonitorForAnyOrphanedCommentsAndDeleteThemIfRequired();
        return base.SaveChanges();
    }

    public override Task<int> SaveChangesAsync()
    {
        MonitorForAnyOrphanedCommentsAndDeleteThemIfRequired();
        return base.SaveChangesAsync();
    }

    public override Task<int> SaveChangesAsync(CancellationToken cancellationToken)
    {
        MonitorForAnyOrphanedCommentsAndDeleteThemIfRequired();
        return base.SaveChangesAsync(cancellationToken);
    }

    private void MonitorForAnyOrphanedCommentsAndDeleteThemIfRequired()
    {
        var orphans = ChangeTracker.Entries().Where(e =>
            e.Entity is Comment
            && (e.State == EntityState.Modified || e.State == EntityState.Added)
            && (e.Entity as Comment).ParentProduct == null);

        foreach (var item in orphans)
            CommentSet.Remove(item.Entity as Comment);
    }
} 
```

注意：这假设它`ParentProduct`是导航属性`Comment`返回到它所拥有的`Product`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T07:20:18.360

使用您的方法从产品中删除评论只会删除产品和评论之间的关联。这样评论仍然存在。

您需要做的是告诉 ObjectContext 使用该方法也删除了 Comment `DeleteObject()`。

我这样做的方式是使用我的存储库的更新方法（知道实体框架）来检查已删除的关联并删除过时的实体。您可以通过使用 ObjectContext 的 ObjectStateManager 来做到这一点。

```
public void UpdateProduct(Product product) {
  var modifiedStateEntries = Context.ObjectStateManager.GetObjectStateEntries(EntityState.Modified);
    foreach (var entry in modifiedStateEntries) {
      var comment = entry.Entity as Comment;
      if (comment != null && comment.Product == null) {
        Context.DeleteObject(comment);
      }
    }
 } 
```

样本：

```
public void RemoveComment(Guid productId, Guid commentId) {
  Product product = _productsRepository.First(p => p.Id == productId);
  Comment comment = product.Comments.First(p => p.Id == commentId);
  product.DeleteComment(comment);

  _productsRepository.Update(product);

  _uow.Commit();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T10:01:09.190

我通过为我的模型创建父属性并检查 SaveChanges 函数中的属性解决了同样的问题。我写了一篇关于这个的博客：[http ://wimpool.nl/blog/DotNet/extending-entity-framework-4-with-parentvalidator](http://wimpool.nl/blog/DotNet/extending-entity-framework-4-with-parentvalidator)

# android - Android 网页视图刷卡阿拉伯语版

> ID：13473512
> 
> 赞同：1
> 
> 时间：2012-11-20T12:45:36.523
> 
> 标签：android, webview, swipe

我正在开发E pub阅读器，它适用于英文版的滑动（从右到左为下一页），（从左到右为上一页），

但是，对于阿拉伯语版本，我们必须将滑动从（从左到右用于下一页）更改为（从右到左用于上一页）如何做到这一点？

我正在使用带有 JavaScript、Css 的 android web 视图

# javascript - IE 10 功能嗅探

> ID：13473514
> 
> 赞同：0
> 
> 时间：2012-11-20T12:45:38.753
> 
> 标签：javascript, cross-browser, internet-explorer-10

我正在寻找一种在 javascript 中进行嗅探以查看浏览器是否为 ie10 的快速方法，有人知道要查找什么吗？

什么不起作用的代码：

var w = $(this).width() - 2;
var top = $(this).next();
var mid = $(top).next();
var bot = $(mid).next();

它只是使整个 ie 崩溃并迫使我重新启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:48:02.497

[Internet Explorer 10 用户代理](http://msdn.microsoft.com/en-us/library/ie/hh869301%28v=vs.85%29.aspx)

[js中的浏览器检测](http://www.quirksmode.org/js/detect.html)

# text - DirectX 11：文本输出，使用您自己的字体纹理

> ID：13473519
> 
> 赞同：0
> 
> 时间：2012-11-20T12:45:58.503
> 
> 标签：text, directx, sprite, textures, directx-11

我正在学习 DirectX，使用“Sherrod A., Jones W. -Beginning DirectX 11 Game Programming - 2011”一书现在我正在探索关于绘制文本的第 4 章。

请帮助我们修复我用来在屏幕上绘制字符串的功能。我已经加载了字体纹理，并在函数中创建了一些带有字母的精灵并为它们定义了纹理坐标。这编译正确，但不绘制任何东西。怎么了？

```
bool DirectXSpriteGame :: DrawString(char* StringToDraw, float StartX, float StartY)
{
//VAR
    HRESULT D3DResult;                                                                              //The result of D3D functions

    int i;                                                                                          //Counters
    const int IndexA = static_cast<char>('A');                                                      //ASCII index of letter A
    const int IndexZ = static_cast<char>('Z');                                                      //ASCII index of letter Z
    int StringLenth = strlen(StringToDraw);                                                         //Lenth of drawing string
    float ScreenCharWidth = static_cast<float>(LETTER_WIDTH) / static_cast<float>(SCREEN_WIDTH);    //Width of the single char on the screen(in %)
    float ScreenCharHeight = static_cast<float>(LETTER_HEIGHT) / static_cast<float>(SCREEN_HEIGHT); //Height of the single char on the screen(in %)
    float TexelCharWidth = 1.0f / static_cast<float>(LETTERS_NUM);                                  //Width of the char texel(in the texture %)
    float ThisStartX;                                                                               //The start x of the current letter, drawingh
    float ThisStartY;                                                                               //The start y of the current letter, drawingh
    float ThisEndX;                                                                                 //The end x of the current letter, drawing
    float ThisEndY;                                                                                 //The end y of the current letter, drawing
    int LetterNum;                                                                                  //Letter number in the loaded font
    int ThisLetter;                                                                                 //The current letter

    D3D11_MAPPED_SUBRESOURCE MapResource;                                                           //Map resource
    VertexPos* ThisSprite;                                                                          //Vertecies of the current sprite, drawing
//VAR

//Clamping string, if too long
if(StringLenth > LETTERS_NUM)
{
    StringLenth = LETTERS_NUM;
}

//Mapping resource
D3DResult = _DeviceContext -> Map(_vertexBuffer, 0, D3D11_MAP_WRITE_DISCARD, 0, &MapResource);
if(FAILED(D3DResult))
{
    throw("Failed to map resource");
}
ThisSprite = (VertexPos*)MapResource.pData;

for(i = 0; i < StringLenth; i++)
{
    //Creating geometry for the letter sprite
    ThisStartX = StartX + ScreenCharWidth * static_cast<float>(i);
    ThisStartY = StartY;
    ThisEndX = ThisStartX + ScreenCharWidth;
    ThisEndY = StartY + ScreenCharHeight;

    ThisSprite[0].Position = XMFLOAT3(ThisEndX, ThisEndY, 1.0f);
    ThisSprite[1].Position = XMFLOAT3(ThisEndX, ThisStartY, 1.0f);
    ThisSprite[2].Position = XMFLOAT3(ThisStartX, ThisStartY, 1.0f);

    ThisSprite[3].Position = XMFLOAT3(ThisStartX, ThisStartY, 1.0f);
    ThisSprite[4].Position = XMFLOAT3(ThisStartX, ThisEndY, 1.0f);
    ThisSprite[5].Position = XMFLOAT3(ThisEndX, ThisEndY, 1.0f);

    ThisLetter = static_cast<char>(StringToDraw[i]);

    //Defining the letter place(number) in the font
    if(ThisLetter < IndexA || ThisLetter > IndexZ)
    {
        //Invalid character, the last character in the font, loaded
        LetterNum = IndexZ - IndexA + 1;
    }
    else
    {
        LetterNum = ThisLetter - IndexA;
    }

    //Unwraping texture on the geometry
    ThisStartX = TexelCharWidth * static_cast<float>(LetterNum);
    ThisStartY = 0.0f;
    ThisEndY = 1.0f;
    ThisEndX = ThisStartX + TexelCharWidth;

    ThisSprite[0].TextureCoords = XMFLOAT2(ThisEndX, ThisEndY);
    ThisSprite[1].TextureCoords = XMFLOAT2(ThisEndX, ThisStartY);
    ThisSprite[2].TextureCoords = XMFLOAT2(ThisStartX, ThisStartY);

    ThisSprite[3].TextureCoords = XMFLOAT2(ThisStartX, ThisStartY); 
    ThisSprite[4].TextureCoords = XMFLOAT2(ThisStartX, ThisEndY);   
    ThisSprite[5].TextureCoords = XMFLOAT2(ThisEndX, ThisEndY);

    ThisSprite += VERTEX_IN_RECT_NUM;
}

for(i = 0; i < StringLenth; i++, ThisSprite -= VERTEX_IN_RECT_NUM);

_DeviceContext -> Unmap(_vertexBuffer, 0);
_DeviceContext -> Draw(VERTEX_IN_RECT_NUM * StringLenth, 0);

return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:05:59.937

虽然构造顶点数组的那段代码乍一看似乎是正确的，但似乎您正在尝试使用尚未设置的着色器来绘制顶点！不看整个代码很难准确回答你，但我猜你需要做这样的事情：

1）通过首先从各自的缓冲区编译它们来创建顶点和像素着色器

2) 创建`Input Layout`描述，描述输入汇编器阶段将读取的输入缓冲区。它必须与您的`VertexPos`结构和着色器结构相匹配。

3) 设置着色器参数。

4）只有现在你可以设置着色器渲染参数：设置`InputLayout`，以及将用于渲染三角形的顶点和像素着色器，如下所示：

```
_DeviceContext -> Unmap(_vertexBuffer, 0);

_DeviceContext->IASetInputLayout(myInputLayout);
_DeviceContext->VSSetShader(myVertexShader, NULL, 0); // Set Vertex shader
_DeviceContext->PSSetShader(myPixelShader, NULL, 0); // Set Pixel shader

_DeviceContext -> Draw(VERTEX_IN_RECT_NUM * StringLenth, 0); 
```

此链接应该可以帮助您实现您想要做的事情：[http ://www.rastertek.com/dx11tut12.html](http://www.rastertek.com/dx11tut12.html)

此外，出于性能原因，我建议您设置`IndexBuffer`并使用该方法`DrawIndexed`来渲染三角形：它将允许图形适配器将顶点存储在顶点缓存中，允许从缓存中获取最近使用的顶点而不是读取它从顶点缓冲区。可以在 MSDN 上找到有关此问题的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb147325 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb147325(v=vs.85).aspx)

希望这可以帮助！

PS：另外，不要忘记在使用资源后通过调用释放资源`Release()`。

# regex - 1 到 100 之间的正则表达式数

> ID：13473523
> 
> 赞同：56
> 
> 时间：2012-11-20T12:46:19.743
> 
> 标签：regex, string

我搜索了很多，找不到这个 RegExp 的解决方案（我不得不说我在 Reg. Expressions 方面不是很有经验）。

```
Regex = ^[1-9]?[0-9]{1}$|^100$ 
```

我想测试一个**1 到 100 之间的数字，不包括 0**

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-11-20T12:51:12.880

尝试：

```
^[1-9][0-9]?$|^100$ 
```

[**工作小提琴**](http://regex101.com/r/gT8wK5)

编辑：如果你想匹配 00001, 00000099 试试

```
^0*(?:[1-9][0-9]?|100)$ 
```

**[小提琴](http://regex101.com/r/mN1iT5)**

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-01-17T10:44:39.670

对于从 1 到 100 且前面没有 0 的整数，请尝试：

```
^[1-9]$|^[1-9][0-9]$|^(100)$ 
```

对于从 0 到 100 且前面没有 0 的整数，请尝试：

```
^[0-9]$|^[1-9][0-9]$|^(100)$ 
```

问候

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-08-14T10:24:20.970

试试看，这样会更有效.. 1\. 对于 00 - 99.99 范围内的数字（包括小数）

```
^([0-9]{1,2}){1}(\.[0-9]{1,2})?$ 
```

工作小提琴链接

[https://regex101.com/r/d1Kdw5/1/](https://regex101.com/r/d1Kdw5/1/)

2.对于1-100（含）范围内不带0的数字。

```
(?:\b|-)([1-9]{1,2}[0]?|100)\b 
```

工作小提琴链接

[http://regex101.com/r/mN1iT5/6](http://regex101.com/r/mN1iT5/6)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-22T08:00:02.117

**这是非常简单**的正则表达式，可以理解（已验证，前面没有 0）

介于 0 到 100 之间（[**在此处尝试**](https://regex101.com/r/2i9qz8/3)）：

```
^(0|[1-9][0-9]?|100)$ 
```

介于 1 到 100 之间（[**在此处尝试**](https://regex101.com/r/2i9qz8/4)）：

```
^([1-9][0-9]?|100)$ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-20T12:57:27.507

如果一个人假设他真的需要正则表达式——这在许多情况下是完全合理的——问题是需要指定特定的正则表达式种类。例如：

```
egrep '^(100|[1-9]|[1-9][0-9])$'
grep -E '^(100|[1-9]|[1-9][0-9])$' 
```

如果 (...|...) 替代语法可用，则工作正常。在其他情况下，它们会像 \(...\|...\) 一样被反斜杠

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-20T12:58:24.937

有很多选择如何为此编写正则表达式模式

*   `^(?:(?!0)\d{1,2}|100)$`
*   `^(?:[1-9]\d?|100)$`
*   `^(?!0)(?=100$|..$|.$)\d+$`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-24T09:41:08.143

我用这个角度 6

试试这个。

```
^([0-9]\.[0-9]{1}|[0-9]\.[0-9]{2}|\.[0-9]{2}|[1-9][0-9]\.[0-9]{1}|[1-9][0-9]\.[0-9]{2}|[0-9][0-9]|[1-9][0-9]\.[0-9]{2})$|^([0-9]|[0-9][0-9]|[0-99])$|^100$ 
```

它验证 0.00 - 100。有两位小数。

希望这会有所帮助

```
<input matInput [(ngModel)]="commission" type="number" max="100" min="0" name="rateInput" pattern="^(\.[0-9]{2}|[0-9]\.[0-9]{2}|[0-9][0-9]|[1-9][0-9]\.[0-9]{2})$|^([0-9]|[0-9][0-9]|[0-99])$|^100$" required #rateInput2="ngModel"><span>%</span><br> 
```

数字应介于 0 到 100 之间

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-30T18:31:40.760

带小数点的 0 到 100 的正则表达式。

```
^100(\.[0]{1,2})?|([0-9]|[1-9][0-9])(\.[0-9]{1,2})?$ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-08T08:06:00.677

只是为了提供最短的解决方案，这是我的：

`^([1-9]\d?|100)$`

[工作小提琴](https://regex101.com/r/QsCLxZ/4/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-19T06:34:09.807

1 - 1000 前导 0

```
/^0*(?:[1-9][0-9][0-9]?|[1-9]|1000)$/; 
```

它不应该接受`0`, `00`, `000`, `0000`.

它应该接受`1`, `01`, `001`,`0001`

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-11-20T12:48:40.950

这似乎是使用`if`语句的更好解决方案：

```
num = 55
if num <= 100 and num >= 1:
    print("OK")
else:
    print("NOPE") 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-02-02T17:34:08.380

在 0 到 100 之间

```
/^(\d{1,2}|100)$/ 
```

或介于 1 到 100 之间

```
/^([1-9]{1,2}|100)$/ 
```

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2014-08-18T09:09:24.210

这是非常简单的逻辑，所以不需要regx。

而是使用三元运算符

```
var num = 89;
var isValid = (num <=  100 && num > 0 ) ? true : false; 
```

它会为你变魔术！！

# perl - POP3 是否区分已读和未读邮件

> ID：13473534
> 
> 赞同：4
> 
> 时间：2012-11-20T12:47:02.390
> 
> 标签：perl, pop3, email-client

我正在使用 Perl 并使用`Net::POP3`...

我的代码能够获取所有邮件，但是我在文档中找不到任何可以区分已读和未读邮件的方法。

IMAP 会这样做，所以我想知道这是否同样适用于 POP3？

PS::`ping()`中的方法`Net::POP3`未列为`Net::POP3`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T12:57:31.350

使用 POP3 无法区分*read*或*unread*。它只能获取和删除消息。如果客户端获取新消息，则客户端（它自己记住）尚未获取的所有消息都被客户端视为不是新消息。服务器不关心消息的状态。它只是为您提供它拥有的所有消息。

来自[维基百科](http://en.wikipedia.org/wiki/Post_Office_Protocol)：

> POP 支持访问远程邮箱的简单下载和删除要求（在 POP RFC 中称为 maildrop）。 [3] 尽管大多数 POP 客户端可以选择在下载后将邮件留在服务器上，但使用 POP 的电子邮件客户端通常会连接、检索所有邮件、将它们作为新邮件存储在用户的 PC 上、从服务器中删除它们，然后断开连接。其他协议，特别是 IMAP，（互联网消息访问协议）提供对典型邮箱操作的更完整和更复杂的远程访问。

# java - JUnit 和文件写访问

> ID：13473536
> 
> 赞同：1
> 
> 时间：2012-11-20T12:47:10.823
> 
> 标签：java, file, junit, ioexception

所以我有一种将字符串写入文件的方法：

```
 public static void saveStringToFile(String path, String string) {

    File file = new File(path);
    if (!file.exists()) {
        try {
            file.createNewFile();
        } catch (IOException e) {
            e.printStackTrace();

        }
    }

    FileWriter out = null;
    try {
        out = new FileWriter(path);
        out.write(string);
        if (out != null) {
            out.close();
        }
    } catch (FileNotFoundException e) {

        e.printStackTrace();

    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

我的测试类具有以下 setUp 方法，该方法在每次测试之前运行（在每个测试之前删除测试文件）：

```
public static final String TEST_FILE = "somefile.xml"; 
```

//...

```
@Before
public void setUp() throws IOException {
    if (MyCustomClass.fileExists(TEST_FILE)) {
        new File(TEST_FILE).delete();
    }
} 
```

我的每个测试都尝试使用该方法向文件写入内容`saveStringToFile()`。它成功了几次，但我终于得到了一个随机点`java.io.IOException: Access is denied`。不知道为什么会发生这种情况 - 有时它发生在 test1 中，有时在 test3 中......

当我使用 Java7 FileIO 时，它工作正常，但我需要迁移回 Java6 ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:55:13.147

您是在测试您是否*能够**创建*、写入和删除文件，还是在测试写入文件的内容？

 *如果是后者，那么也许您应该模拟/覆盖该`saveStringToFile( ... )`方法，而是专注于验证您正在单元测试的代码是否确实产生了正确的输出。

如果是前者，那么我非常同意@Omaha 的建议，即您的测试运行程序可能会并行运行多个测试。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:50:55.083

异常处理存在一些问题。调用`out.close()`应该在 finally 块内的单独 try-catch 块中。如果写入文件时抛出异常，则文件永远不会关闭。

我建议您查看诸如 Apache Commons IO 之类的东西，它有许多有用的 IO 方法，例如`FileUtils.writeStringToFile()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:29:37.973

所以，可能 JUnit 并没有并行运行它，因为我认为它默认情况下不会这样做。

问题出在我的`readfile`方法中：

```
private String readFile(String path) throws FileNotFoundException {
    return (new Scanner(new File(path))).useDelimiter("\\Z").next();
} 
```

为了正常工作，我必须修复

```
private String readFile(String path) throws FileNotFoundException {
    Scanner scanner = (new Scanner(new File(path)));
    String s = scanner.useDelimiter("\\Z").next();
    scanner.close();
    return s;
} 
```

`close()`方法是`Scanner`关键...*

# list - 这份清单的答案是什么？

> ID：13473537
> 
> 赞同：-5
> 
> 时间：2012-11-20T12:47:11.713
> 
> 标签：list, f#

```
3::[4;5;2;7];;
List.length [4;5;2;7];;
[4;5;2;7]::3;; 
```

这给出了错误 This expression was expected to have type int list list but here has type int

我知道它可以通过这样做来解决：`[4;5;2;7];; List.append it [3];;`但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:18:43.993

这是一个非常糟糕的问题。但是，代码中的最后一行将失败

> 此表达式应为 int list list 类型，但此处为 int 类型

.. 因为 :: 将一个元素连接到一个列表。它只能从前面做，因为列表是一个单链表。如果您想在列表末尾添加一个元素，您可能使用了错误的数据结构。如果你真的想在列表末尾添加一个元素，你可以这样做

```
[4;5;2;7] @ [3];; 
```

请注意，这将非常低效。

# php - PHP 仅显示第一个子菜单，如果变量 isset，则每个菜单不显示一个

> ID：13473539
> 
> 赞同：0
> 
> 时间：2012-11-20T12:47:16.283
> 
> 标签：php, loops

好的，我希望这是有道理的。所以我正在建设一个店铺，贯穿店铺的一个不变元素是店铺侧导航。这是一个水平菜单，将主要类别显示为标题。

当您登陆主商店页面时，它会提示您选择一个类别。在此页面上仅显示主要类别标题，如下所示：

类别 1 类别 2 类别 3 类别 4 类别 5

但是，当您选择一个类别时，它将重定向到该类别页面，并且侧面导航菜单会略有变化。并显示该类别的子菜单，并且仅显示该类别，例如，如果您单击 Cat1，它将如下所示：

类别 1 子类别 1 子类别 2 子类别 3 类别 2 类别 3 类别 4 类别 5

对基本示例感到抱歉。我的问题是我似乎不能只为一个类别制作子菜单循环，要么不显示它们，要么为所有类别循环相同的子菜单。

这是旁边的导航代码：

```
<div id="shopcontentl">
   <div id="shopnavigation">
    <?php
    $navGet = mssql_query("SELECT * FROM Categories");
    while ($navHead = mssql_fetch_array($navGet)) { 
    ?>
      <a href="category.php?id=<?php echo $navHead['CatID']; ?>"><?php echo $navHead['CatName']; ?></a>
    <?php
    if (isset($_GET['id']) && ($_GET['id'] > 0)) {
    ?>
    <div class="subnav">
    <?php
    $subnavGet = mssql_query("SELECT SubCatName FROM SubCategories WHERE CatID = ".$_GET['id']."");
    while ($subnavHead = mssql_fetch_array($subnavGet)) {
    ?>
      <a href="category.php"><?php echo $subnavHead['SubCatName']; ?></a>
    <?php
    }
    ?>
    </div>
    <?php
    }
    }
    ?>
    </div>
 </div> 
```

我很确定我使用错误的循环，但我对 PHP 相当陌生，谁能理解我在说什么并指出我正确的方向？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:52:09.953

您需要为特定 id 添加条件，如下所示。

```
if (isset($_GET['id']) && ($_GET['id'] > 0) && ($_GET['id']==$navHead['CatID'])) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:53:11.890

只是一个变化

```
<?php
$subnavGet = mssql_query("SELECT SubCatName FROM SubCategories WHERE CatID = ".$navHead['CatID']."");
while ($subnavHead = mssql_fetch_array($subnavGet)) {
?> 
```

它必须用于子类别，因为每当获取一个类别而不是进入内部循环时，它都需要特定主类别的主 ID。所以我们可以将该 id 提供给内部循环查询。

# android - 在 Android 中同时启动两个（或更多）函数

> ID：13473547
> 
> 赞同：6
> 
> 时间：2012-11-20T12:47:57.297
> 
> 标签：android, timer, chronometer

我正在为 Android 2.2 设计计时器/倒数计时器应用程序，并希望按下一个按钮即可同时启动计时器*和*计时器。因此，理想情况下，我希望计时器和计时器上的秒数（时间）*同时*更改。（即使计时器正在向上计数，计时器也会倒计时）。由于我使用的是 Android 提供的计时器和计时器功能，因此当用户按下“开始”按钮时，我编写了以下代码

```
private boolean mStartPressedOnce = false;
long mTimeWhenStopped = 0;
Chronometer mChronometer;   
MyCounter mCounter;
...
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.StartButton:
        // Perform some initialization for the chronometer depending
        // on the button press
        if (mStartPressedOnce == false) {
            mChronometer.setBase(SystemClock.elapsedRealtime());
        } else {
            mChronometer.setBase(SystemClock.elapsedRealtime() + mTimeWhenStopped);
        }

        // Perform the initialization for the timer
        mCounter = new MyCount(45000, 1000);

        // Fire up the chronometer  
        mChronometer.start();

        // Fire up the timer
        mCounter.start();
        break;

        case R.id.ResetButton:
            // Reset the chronometer  
            mChronometer.setBase(SystemClock.elapsedRealtime());
            mTimeWhenStopped = 0;
            break;

        case case R.id.StopButton:
            mStartPressedOnce = true;
            // Stop the chronometer 
            mTimeWhenStopped = mChronometer.getBase() - SystemClock.elapsedRealtime();
            mChronometer.stop();
            break;
    }

... 

public class MyCounter extends CountDownTimer {

    @Override
    public MyCount(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish() {        
        // Nothing to do here
    }

    @Override
    public void onTick(long millisUntilFinished) {
        long seconds = (long) (millisUntilFinished / 1000);
        long minutes = (long) ((millisUntilFinished / 1000) / 60);
        long hours = (long) (((millisUntilFinished / 1000) / 60) / 60);

        // Do some formatting to make seconds, minutes and hours look pretty    

        // Update the timer TextView            
       (TextView) findViewById(R.id.CountDownTimerTextView))
           .setText(hours + ":" + minutes + ":" + seconds);
    }
} 
```

虽然看起来计时器和计时器上的秒数*最初*是同步的，但在很短的时间之后，它们似乎会消失，并且两者的第二次更新发生在不同的时间。

想知道我能做些什么来解决这个问题。我确实遇到过 - 并阅读了这个帖子

[同时运行多个 AsyncTask —— 不可能吗？](https://stackoverflow.com/questions/4068984/running-multiple-asynctasks-at-the-same-time-not-possible)

我意识到可能需要进行设计更改，但我不确定需要做什么。

**编辑：**包括计时器和计时器的类型以及使用 Chronometer 计算时间的方法 - 根据 jolivier 和 njzk2 的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:51:27.990

您可以使用 System.currentTimeMillis() 检索当前时间，将其存储到变量中并将其转发给两者`mChronometer`和`mCounter`，以便它们使用相同的时间参考，尽管它们的任务在不同的时间开始。

编辑：对于给定的类型，[关于 Chronometer 的 android 文档](http://developer.android.com/reference/android/widget/Chronometer.html)会告诉你，你可以使用[elapsedRealTime](http://developer.android.com/reference/android/os/SystemClock.html#elapsedRealtime%28%29)来实现我所说的。 [CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)没有这个，它的`start`方法是最终的，所以你可能想要使用另一个实现，更好地了解你的用例可能会对我们有所帮助。

基本上，希望两个线程在同一毫秒执行一个动作绝不是一个好主意，其中一个将用作时钟，另一个必须是从属并监听时钟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T05:50:41.223

因此，在考虑了一段时间并放弃了`jolivier`如此慷慨地与我们分享的建议之后，我意识到存在一个名为的方法，该方法`onChronometerTick`在每次有计时器滴答声时（在这种情况下是每秒）都会被调用。所以，我想每次调用该方法时从计数器中减去 1000 毫秒，并相应地更新计时器显示。我完全摆脱了 Android 计时器 ( `CountDownTimer`)。我认为这将是同时更新两个显示器的好方法。它也是一个简单的定时器实现。

我很高兴地报告它似乎运作良好。计时器和计时器显示确实同时更新。所以，原来的问题看起来已经回答了。不幸的是，我在计时器前面遇到了一个错误的错误，我用一个丑陋的黑客修复了这个错误。我正在发布到目前为止的内容。欢迎任何有关如何修复黑客或改进代码的建议。请注意，我已对代码进行了注释，以尝试使其易于理解所做的工作。

**错误编辑：**我注意到的另一件事是，大约 10 分钟左右后，计时器和计时器关闭了一秒钟。更准确地说，计时器比计时器落后一秒。尚不确定为什么会发生这种情况。

```
private boolean mStartPressedOnce = false;
long mTimeWhenStopped = 0;
Chronometer mChronometer;   
long millisUntilFinished = 0;
boolean firstPassOver = false;
int counter = 0;
...
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.StartButton:
        // Perform some initialization for the chronometer depending
        // on the button press
        if (mStartPressedOnce == false) {
            mChronometer.setBase(SystemClock.elapsedRealtime());
        } else {
            mChronometer.setBase(SystemClock.elapsedRealtime() + mTimeWhenStopped);
        }

        // Fire up the chronometer  
        mChronometer.start();
        break;

        case R.id.ResetButton:
            // Reset the chronometer  
            mChronometer.setBase(SystemClock.elapsedRealtime());
            mTimeWhenStopped = 0;
            break;

        case case R.id.StopButton:
            mStartPressedOnce = true;
            // Stop the chronometer 
            mTimeWhenStopped = mChronometer.getBase() - SystemClock.elapsedRealtime();
            mChronometer.stop();
            break;
    }

... 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.stop_watch);

    mChronometer = (Chronometer) findViewById(R.id.StopWatchTextView);

    // Initialize the number of milliseconds before the timer expires (
    // set the timer) - in this case to 46 seconds
    millisUntilFinished = 46000;

    // Display how many seconds remain before the timer expires
    ((TextView) findViewById(R.id.CountDownTimerTextView)).setText(hours
            + ":" + minutes + ":" + millisUntilFinished / 1000);

    // In line with the suggestion provided by  jolivier - make the timer
    // the slave and  update its display every time the chronometer 
    // ticks        
    mChronometer
            .setOnChronometerTickListener(new Chronometer.OnChronometerTickListener() {

                @Override
                public void onChronometerTick(Chronometer chronometer) {

                    // Update the display for the chronometer
                    CharSequence text = chronometer.getText();                  
                    chronometer.setText(text);

                    // Update the display for the timer                 
                    // !!! BUG !!!
                    // Looks like onChronometerTick is called at the 0th second
                    // and this causes an off by two error if a count down timer
                    // is being implemented. Fixed it with this hack. There's gotta
                    // be a more elegant solution, though.
                    if(counter >= 2) {
                        millisUntilFinished1 = millisUntilFinished1 - 1000;
                        counter = 2;
                    }
                    counter++;

                    if (millisUntilFinished >= 0) {

                        long seconds = (long) (millisUntilFinished / 1000);
                        long minutes = (long) ((millisUntilFinished / 1000) / 60);
                        long hours = (long) (((millisUntilFinished / 1000) / 60) / 60);

                        // Do some formatting to make seconds, minutes and hours look pretty    

                        // Update the timer TextView     
                        ((TextView) findViewById(R.id.CountDownTimerTextView))
                                .setText(hours + ":" + minutes + ":"
                                        + seconds);
                        }
                    }

    });
    // Other code
    ...
} 
```

# c++ - 使用索引的 QSqlQuery

> ID：13473550
> 
> 赞同：0
> 
> 时间：2012-11-20T12:48:23.927
> 
> 标签：c++, sql, qt

我有自己的数据存储机制来存储数据。但我想为最终用户实现标准的数据操作和查询接口，所以我认为 QT sql 适合我的情况。但我仍然无法理解如何将我的索引用于 sql 查询。例如，我有一个包含 A(int)、B(int)、C(int)、D(int) 列的表，并且 A 列被索引。假设我执行查询
`select * from Foo where A = 10;`

如何让我的索引参与搜索结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:06:43.560

您已经编写了自己的存储系统并希望使用类似 SQL 的语法来操作它？我不认为 Qt SQL 是适合这项工作的工具。它提供与各种 SQL 服务器的连接，并不用于解析 SQL 语句。Qt 期望“通过”查询，然后以某种方式解析结果集并将其转换为 Qt 友好的表示。

因此，如果您只想拥有 Qt 友好的表示，我看不出有理由使用 SQL 进行间接处理。

但是关于您的问题：在 SQL 中，索引通常不在查询中声明，而是在创建表模式期间声明。但是 SQL Server 有可能“提示”索引，这就是你要找的吗？

`SELECT column_list FROM table_name WITH (INDEX (index_name) [, ...]);`

# c# - 如何使用 Prism 初始化 WPF 浏览器应用程序？

> ID：13473551
> 
> 赞同：1
> 
> 时间：2012-11-20T12:48:28.997
> 
> 标签：c#, .net, wpf, prism, mef

我开始使用带有 MEF 的 Prism 框架开发 WPF 浏览器应用程序，但是由于缺乏 prism 经验，因此很难开始。我见过的所有示例、教程或快速入门都是这样的：

```
Application.Current.MainWindow = (Window)this.Shell;
Application.Current.MainWindow.Show(); 
```

但这仅涉及 WPF 窗口应用程序，对吗？我的意思是，浏览器应用程序使用 Page 而不是 Window。所以我想知道是否可以通过其他方式进行强制转换或初始化我的 Shell。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:22:31.170

Silverlight shell 以类似的方式创建：

Application.Current.RootVisual = (UIElement)this.Shell;

更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ff921096%28v=PandP.40%29.aspx](http://msdn.microsoft.com/en-us/library/ff921096%28v=PandP.40%29.aspx)

# python - python反向列表递归，仅使用

> ID：13473554
> 
> 赞同：2
> 
> 时间：2012-11-20T12:48:39.367
> 
> 标签：python, list, function, recursion

我在仅使用以下函数使用递归来反转列表时遇到问题：

```
def head(xs):
    return xs[0]

def tail(xs):
    return xs[1:]

def empty(xs):
    return len(xs) == 0 
```

我可以做这个：

```
def p(xs1, xs2):
    if not empty(tail(xs1)):
        p(tail(xs1), xs2)
    xs2.append(head(xs1))

def p05(xs):
    s = []
    p(xs, s)
    return s 
```

有没有办法在不使用 append() 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:58:56.323

```
def head(xs):
    return xs[0]

def tail(xs):
    return xs[1:]

def empty(xs):
    return len(xs) == 0

def reverse(xs):
    if empty(xs): return []
    return reverse(tail(xs))+[head(xs)]

xs = range(4)
print(reverse(xs)) 
```

产量

```
[3, 2, 1, 0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T12:51:17.323

您可以避免更改列表，而是返回一个新列表：

```
def p(xs1, xs2):
    if not empty(tail(xs1)):
        xs2 = p(tail(xs1), xs2)
    return xs2 + [head(xs1)]

def p05(xs):
    return p(xs, []) 
```

您可能也应该更改`head()`为返回一个列表：

```
def head(xs):
    return xs[:1]

def tail(xs):
    return xs[1:] 
```

并且不需要“空”；在 python 上下文中`[]`考虑。`False`然后`p()`变成：

```
def p(xs1, xs2):
    if tail(xs1):
        xs2 = p(tail(xs1), xs2)
    return xs2 + head(xs1) 
```

示范：

```
>>> p(range(5), [])
[4, 3, 2, 1, 0] 
```

# javascript - 删除表Javascript中的行

> ID：13473558
> 
> 赞同：1
> 
> 时间：2012-11-20T12:48:47.370
> 
> 标签：javascript, jquery, html-table

我正在使用功能打印表格：

```
 function findL(val){
var i;
//alert(splitted + " " + JSDate);
for(i=0;i<jsData.length; i++)
    {
        if(jsData[i].get_date() == val)
            {

                $('<tr>').append($('<td>').html(jsData[i].get_startT))
                .append($('<td>').html(jsData[i].get_endT))
                .append($('<td>').html(jsData[i].get_prow))
                .append($('<td>').html(jsData[i].get_przedm))
                .append($('<td>').html(jsData[i].get_sala))
                .appendTo('#pzTbody');

            }
        }} 
```

作为参数函数从日期选择器获取日期，当我选择另一个日期时，它会添加到先前查看的行中。我的问题是我在下次搜索之前尝试了很多方法来清理/删除旧行。

我试过`deleteRow()`，`.parentNode`循环等。有人知道如何删除附加的行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:15:04.583

从我假设的代码`pzTbody`是你的表的ID。要清理表格主体并删除所有行，请执行以下操作：

```
$("#pzTbody").empty(); 
```

如果您只想删除最后一行，请使用以下命令：

```
$("#pzTbody tr:last-child").remove(); 
```

# c - 嵌入式系统的轻量级Web认证

> ID：13473561
> 
> 赞同：5
> 
> 时间：2012-11-20T12:48:57.557
> 
> 标签：c, security, http, authentication, embedded

我正在做一个稍微深奥的项目，我们需要在一个小型/慢速嵌入式微型（无操作系统）中实现一些基本身份验证。该设备通过其串行端口提供几个网页，然后通过我们无法控制的一些硬件通过 IP 网络喷射。

服务器代码，例如它（想想饥饿饮食中的[nweb](http://www.ibm.com/developerworks/systems/library/es-nweb/index.html)），接受 HTTP GET/POST 请求并吐出页面并相应地更改其设置。

我们需要某种方式来验证用户登录/会话，以便我们不允许人们查看数据或更改他们不应该更改的设置。

该设备不打算直接暴露在互联网上或 100% 无法受到严重黑客攻击（网络安全/分离是客户的问题*），安全要求更多的是防止低级别人员接触闪烁灯；）

由于缺乏空间/处理能力（假设我们有大约 2k 的代码空间并且没有多少 MHz），我们无法实现 SSL 之类的东西，但最好至少比沼泽标准[HTTP 访问控制](https://en.wikipedia.org/wiki/Basic_access_authentication)好一个.

我们可以处理 GET、POST 和设置/读取 cookie 数据。我们的微机确实拥有一个不错的加密标准硬件随机数生成器，如果它有任何帮助的话。

*   = 真的，客户应该将设备挂在自己的网络上，与其他任何东西物理断开连接或至少防火墙至死。但是，嘿，如果它适用于波音......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:55:44.540

如果您只想防止访问：任何时候有 GET 请求，查找密码的 cookie。如果未设置 cookie，则发回一个 HTML 登录表单，该表单将密码发送到服务器。如果服务器使用正确的密码获取 POST 数据，则发回“登录正常”页面，该页面将 COOKIE 设置为密码。然后任何登录的人（显然使用正确的密码）都会在所有未来的 GET 请求中设置 cookie。任何从未登录过的人都会看到登录页面。您可以通过设置两个 cookie 值来“隐藏”它：一个随机数，以及随机数和密码的 XOR。这样，客户端将无法弄清楚 cookie 中的值是什么。如果您进一步使用客户端 IP 对其进行异或运算，客户端将无法将 cookie 复制到其他计算机。

如果您想进行简单的加密，您可以在 javascript 中使用 XMLHTTPREQUESTS。让服务器使用简单的 puesdo 随机数生成器（或简单的 XOR 混淆等）加密数据，并让客户端在 javascript 中反向执行相同的操作。您可以让服务器加密除 index.html 之外的每个页面，并且在 index.html 中您可以拥有它，以便它在 javascript 中 XMLHTTPREQUESTS 其他页面并解密它们，然后使用 innerHTML 或其他方式将内容放入 div 中。

# c# - 在 directx 9 表面上播放 AVI 电影

> ID：13473566
> 
> 赞同：0
> 
> 时间：2012-11-20T12:49:03.477
> 
> 标签：c#, video, directshow, directx-9, directshow.net

我有一个 directx9 窗口，我想在纹理上播放 avi 视频。我听说我可以使用 directshow 来做到这一点？

如果这真的可能，我在哪里可以找到教程或示例代码来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:52:50.890

[MSDN 上的 DirectShow 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375468%28v=vs.85%29.aspx)：

> Texture3D9 Sample Playback 在 Microsoft DirectX 9.0 纹理表面上绘制视频。

不过，您需要查找较旧的 Windows SDK 或 DirectX SDK 才能找到此示例。我认为它已经从最新的 Windows SDK 中删除了。

`\Samples\Multimedia\DirectShow\Players\Texture3D9`

# .net - 函数上的属性，用于识别它可能使用 .net 抛出的异常

> ID：13473573
> 
> 赞同：1
> 
> 时间：2012-11-20T12:49:50.617
> 
> 标签：.net, attributes, resharper

有没有办法用属性来装饰一个函数，以告诉使用该函数的消费者/开发人员它可能抛出什么样的异常。

我希望某种属性具有异常类型的数组，当 R# 将该函数包装在 try/catch 中以自动生成 try/catch 语句中的各种异常的列表时，可以使用该属性。

# android - 使用 LruCache 中的图像滚动快速 viewPager

> ID：13473574
> 
> 赞同：2
> 
> 时间：2012-11-20T12:50:03.147
> 
> 标签：android, android-asynctask, android-viewpager, image-resizing, android-lru-cache

我有一个 viewPager 有 4 个需要调整大小的图像。我实现了不同的选项，但没有选项运行。我写了不同的选项：

1.  在 getView 中：

    ```
    image.setImageBitmap(bitmap); 
    ```

    位图获得：

    ```
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(bitmapOriginal, null, options);
    int sampleSize = 1;
    while ((options.outHeight > 600 * sampleSize) &&(options.outWidth > 400 * sampleSize)) {  
        sampleSize *= 2;
    }
    options.inJustDecodeBounds = false;
    options.inMutable = false;
    options.inSampleSize = sampleSize;
    Bitmap bm=BitmapFactory.decodeStream(bimapOriginal, null, options); 
    ```

但它非常缓慢。

1.  我将最后一个代码放在 AsyncTask() 中，但无法快速滚动。

2.  我覆盖

    ```
    onPageScrollStateChange(int state) 
    ```

    我只在状态为时显示图像，`SCROLL_STATE_IDLE`但效果与其他情况相同。

3.  我使用 LruCache，我将图像保存在 Asynctask 中的 LruCache 中。
    在我把 instanceItem

    ```
    for(int i=position *4;i<(position +1)*4 +4;i++) {
    //NameImage is an Array with the name of image. Every time that calling instantiateItem save 4 images in LruCache
    new BitmapWorkerTask(nameImage[i).executorOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, null); 
    ```

但问题与上一个案例相同，我无法快速滚动，应用程序也很慢。
我有质量和尺寸都很大的图像。如何在 viewPager 中快速滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:46:24.973

问题是，即使您的工作正在 AsyncTask 中完成，但 ViewPager 正在等待您返回图像（在 getView()、instanciateItem()、newView() 等中，无论您使用什么）。您需要做的是创建几个 ImageViews 实例并几乎立即返回其中一个（这会加快速度）。让 AsyncTask 进行加载，当它返回（到由位置标识的正确实例）时，图像被设置为现在已经在 ViewPager 中的实例。

创建一个图像视图数组用作缓冲区，并使用列表项的位置属性识别它们。

```
ImageView[] bufferView=new ImageView[4]; //global

//use Async task something like this

@Override       
   protected void onPostExecute(Bitmap result) {
   virtualPosition = position % 4;    //Real position % (number of ImageViews)   
   bufferView[virtualPosition].setImageBitmap(result);          
   } 
```

`bufferView[virtualPosition]`将此作为该项目的 ImageView返回

**编辑：**不要忘记将它添加到父 ViewGroup

```
container.addView(pageview[position]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:03:22.747

我写了一个 Android Image Manager，它可以透明地处理缓存（内存和磁盘）。代码在 Github 上。

它使用处理程序而不是 AsyncTasks。我一直将它用于包含网格和列表的图像繁重的应用程序，滚动和加载性能显着提高。看看：[https ://github.com/felipecsl/Android-ImageManager](https://github.com/felipecsl/Android-ImageManager)

# lua - 如何使用lua在数组中查找顺序项？

> ID：13473576
> 
> 赞同：0
> 
> 时间：2012-11-20T12:50:16.777
> 
> 标签：lua

我需要一段 lua 语言的代码，它可以在数组中找到组中的项目数超过特定数字的顺序项目。示例：如果我有数组（数字顺序不正确，随机分布）->（2,5,9,10,11,21,23,15,14,12,22,13,24 ) ; 有两个连续组 (9,10,11,12,13,14,15) 和 (21,22,23,24 )。如果特定数字说（4）或更多，我希望找到第一组，或者如果数字是（3）或更少，我可以得到两组。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:46:38.863

合乎逻辑的方法似乎是重新排序表格并查找序列中的间隙。

```
function table.copy(t)
    local t2 = {}
    for k,v in pairs(t) do
        t2[k] = v
    end
    return t2
end

function groups(org, cnt)
    --  Returns a table containing tables containing the groups found
    local res = {}
    local group = {}
    tbl = table.copy(org) -- Prevent reordering of Original Table
    table.sort(tbl)
    local last = nil
    for _,val in ipairs(tbl) do
        if last and last + 1 ~= val then
            if #group >= cnt then
                table.insert(res,group)
            end
            group = {}
        end
        table.insert(group,val)
        last = val
    end
    if #group >= cnt then
        table.insert(res,group)
    end
    return res
end
local org = { 2,5,9,10,11,21,23,15,14,12,22,13,24 }
local result = groups(org,3)
print('Number of Groups',#result) 
```

# php - yii 中的 ajax 调用控制器（javascript）

> ID：13473577
> 
> 赞同：4
> 
> 时间：2012-11-20T12:50:18.383
> 
> 标签：php, javascript, jquery, ajax, yii

由于某种原因，这不起作用，我找不到使它起作用的方法！

在我的名为“ExplicacaoController”的控制器上，我有这个：

```
public function accessRules()
...
'actions'=>array('index','view', 'test', 'ajaxrequest'),
...
public function actionAjaxRequest()
    {
      $val1 = $_POST['val1'];
      $val2 = $_POST['val2'];
      echo "something";

      Yii::app()->end();
    } 
```

在我看来，我有：

```
<script type="text/javascript">
...
$.ajax({
      type: "POST",
      url:    "<? echo Yii::app()->createUrl('explicacaoController/ajaxRequest'); ?>",
      data:  {val1:1,val2:2},
      success: function(msg){
           alert("Sucess")
          },
      error: function(xhr){
      alert("failure"+xhr.readyState+this.url)

      }
    });
... 
```

发生的事情是我总是得到这个错误：

```
failure4<? echo Yii::app()->createUrl('explicacaoController/ajaxRequest'); ?> 
```

我真的需要一些帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T13:25:16.270

试着放

```
<? echo Yii::app()->createUrl('Explicacao/ajaxRequest'); ?> 
```

代替

```
<? echo Yii::app()->createUrl('explicacaoController/ajaxRequest'); ?> 
```

事情是在创建 url 你需要把控制器 ID 而不是控制器全名。

如果它不起作用，您可以尝试两者，`Explicacao/ajaxRequest`或者`explicacao/ajaxRequest`因为您的溃败可能区分大小写，具体取决于您的 conf

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-06-12T12:39:28.487

试试这个

```
url: $(location).attr('pathname') + '?r=anyControllerId/actionId', 
```

这将获取当前 URL 的路径名

# jquery - Tag-It Jquery - 但无法让水印工作

> ID：13473579
> 
> 赞同：1
> 
> 时间：2012-11-20T12:50:23.133
> 
> 标签：jquery, watermark, tag-it

我正在使用 Tag-it 生成

我遇到的问题是在输入字段上分配水印。在 Visual Studio 中，我看到以下内容：-

```
<ul id="mytags" class="tagclasspost">
    <!-- Existing list items will be pre-added to the tags -->

            </ul> 
```

在萤火虫我看到这个： -

```
<div id="tagsimpletip" class="divpostsendtag">
<div>
<ul id="mytags" class="tagclasspost tagit ui-widget ui-widget-content ui-corner-all">
<li class="tagit-new">
<input class="ui-widget-content ui-autocomplete-input" type="text" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true">
</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T11:33:34.247

在输入上调用 tagit 时，您可以使用可选的占位符文本参数。

例子 ：

```
$(tags_selector).tagit({
        placeholderText: '**your placeholder**',
        afterTagAdded: function(event,tag){
           // Some processing
        },
        afterTagRemoved: function(event,tag){
           // Some processing
        }
    }); 
```

请参阅此链接： [占位符文本属性](https://github.com/aehlke/tag-it/commit/a877af548684829a4adc1d449c88e755f4a0a2de)

# java - 在未安装 java 的情况下从笔式驱动器自动运行 java 应用程序

> ID：13473581
> 
> 赞同：0
> 
> 时间：2012-11-20T12:50:29.380
> 
> 标签：java, batch-file

我开发了一个 java 应用程序并将其转换为一个 exe 文件。当我插入拇指驱动器或笔式驱动器时，应用程序可以在安装了 java 的系统中启动，但是当我在未安装 java 的系统上运行它时，它会要求安装。
我的问题：是否有任何技术或第三方工具无需在系统上安装 java 即可启动 java 应用程序？

它就像插入 pendrive 并启动 java 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:54:24.370

对 SO 的快速搜索给出了将 Java 应用程序打包成 EXE 并且不需要安装 JRE 的解决方案。

[在未安装 JRE 的情况下在 Windows 中将 java 程序作为 exe 运行](https://stackoverflow.com/questions/1332548/running-a-java-program-as-an-exe-in-windows-without-jre-installed)

# ruby - 如何设置环境类型？

> ID：13473583
> 
> 赞同：0
> 
> 时间：2012-11-20T12:50:40.670
> 
> 标签：ruby, sinatra, rack

`sinatra/config_file`我有一个用于解析 YAML 配置文件的 Sinatra 应用程序。该文件具有各种环境的条目，例如开发、测试、生产。

```
class MyApp < Sinatra::Base
  register Sinatra::ConfigFile
  config_file 'config.yml'
  @@client = Mysql2::EM::Client.new(
      :host => settings.host,
      :username => settings.username,
      :password => settings.password,
      :database => settings.database
  ) 
```

目前，当我运行应用程序时，会从开发部分检索设置。我发现让它使用不同的唯一方法是设置

```
ENV['RACK_ENV'] = 'production' 
```

在我的`myapp.rb`档案中。

我不喜欢编辑源代码，如何正确设置环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:03:00.940

根据[Sinatra 文档](http://www.sinatrarb.com/intro#Environments)，您可以通过在命令行中使用参数在不同的环境中运行您的应用程序，如下所示：

`ruby my_app.rb -e [ENVIRONMENT]`.

# sql-server - SQL Server 地理中的错误？

> ID：13473591
> 
> 赞同：0
> 
> 时间：2012-11-20T12:51:01.750
> 
> 标签：sql-server, sql-server-2008, sqlgeography, geographic-distance

有人可以确认这是一个错误还是我做错了什么？

我有这个存储过程（SQL Server 2008）

```
ALTER PROCEDURE [dbo].[Distance]
@origin varchar(50),@destination varchar(50),@unit varchar(5)
as
   declare @or geography, @dest  geography
   SET @or = (select Location from [dbo].Promotion where Name=@origin )
   SET @dest = (select Location from [dbo].Promotion where Name=@destination )
IF @unit='miles'
 SELECT @or.STDistance(@dest)/1609.344
ELSE
 --Else show the distance in km
 SELECT @or.STDistance(@dest)/1000 
```

位置是数据库中的地理数据类型

我在数据库中有这个地址

```
 Latitude     Longitude
1   -34.612654   -58.463586 
2   -34.592802   -58.454317 
3   -34.597889   -58.617949 
```

然后运行这个：

```
execute dbo.Distance 'Number 1','Number 2','km'
returns 2653.49845233371 kms

execute dbo.Distance 'Number 1','Number 3','km'
returns 17.2155414117145 kms 
```

如果你在第一种情况下去谷歌地图，这些坐标之间大约有 4 公里，第二次比较似乎没问题。

为什么第一个这么错？它是 SQL Server 中的错误吗？

提前致谢。吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:34:52.503

好的，我找到了问题所在，是的，当然这是我的错 :)

我已经像这样在表中插入了记录

```
INSERT INTO [dbo].[TestLocation]([Name],[Location],[Latitude],[Longitude]) VALUES('Location1', geography::STGeomFromText('POINT(-34.612654 -58.463586)', 4326),-34.612654,-58.463586); 
```

然后我意识到，起初，纬度和经度是倒置的，所以我改变了顺序，但只是为了最后两个字段，忘记改变“geography::STGeomFromText”中的顺序。运行后

```
SELECT
  Ubicacion.Lat,
  Ubicacion.Long
FROM
  Promotion 
```

我意识到错误是什么。嗬！

请注意这一点

```
SELECT
  Ubicacion.Lat,
  Ubicacion.Long
FROM
  Promotion 
```

请注意这一点，因为地理数据类型保存为二进制，因此人类不可读，因此，除非您运行上述查询，否则您不会意识到问题的根源。

谢谢！吉列尔莫。

# tomcat - URLRewriteFilter 规则附加到 url 2 次

> ID：13473594
> 
> 赞同：0
> 
> 时间：2012-11-20T12:51:10.543
> 
> 标签：tomcat, tuckey-urlrewrite-filter

我面临一些奇怪的问题。执行一条规则（最后一条规则）是在转发之前将 url 放入时间，这给了我 404 错误。

web.xml 内容

```
 <filter>
  <filter-name>UrlRewriteFilter</filter-name>
  <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
  <init-param>
    <param-name>logLevel</param-name>
    <param-value>DEBUG</param-value>
  </init-param>
</filter>
<filter-mapping>
  <filter-name>UrlRewriteFilter</filter-name>
  <url-pattern>/*</url-pattern>
  <dispatcher>REQUEST</dispatcher>
  <!-- FORWARD dispatcher will keep on parsing requests through rule until
     atleast one rule is applied . It sometime may lead into infinite loop
     --> 
  <!--    <dispatcher>FORWARD</dispatcher>  -->
</filter-mapping> 
```

我的规则

```
<rule>
    <name>DepreatedUrls</name>
    <from>(/my/url2|/my/url3)</from>
    <set type="status">410</set>
    <to last="true">%{context-path}/error/410.html</to>
</rule>

<rule>
    <name>AllRemainingRequests</name>
    <note>
        This rule will block all other requests and return http error
        404 ( not supported ) and custom error message .
    </note>
    <from>(.*)</from>
    <set type="status">404</set>
    <to last="true">/error/410.html</to>
</rule> 
```

所有其他规则都执行得很好。每条规则都是最后一条规则 (last="true")。但是当执行最后一条规则时，它会将请求转发到 /error/410.html/error/410.html

为了简单起见，我删除了大部分规则定义。以下是调试日志

```
Nov 20, 2012 12:31:10 PM org.apache.catalina.core.ApplicationContext log
INFO: org.tuckey.web.filters.urlrewrite.RuleBase DEBUG: AllRemainingRequests (rule 8) run called with /some-content
Nov 20, 2012 12:31:10 PM org.apache.catalina.core.ApplicationContext log
INFO: org.tuckey.web.filters.urlrewrite.RuleBase DEBUG: matched "from"
Nov 20, 2012 12:31:10 PM org.apache.catalina.core.ApplicationContext log
INFO: org.tuckey.web.filters.urlrewrite.SetAttribute DEBUG: set Set status null 404 called
Nov 20, 2012 12:31:10 PM org.apache.catalina.core.ApplicationContext log
INFO: org.tuckey.web.filters.urlrewrite.SetAttribute DEBUG: setting status
Nov 20, 2012 12:31:10 PM org.apache.catalina.core.ApplicationContext log
INFO: org.tuckey.web.filters.urlrewrite.RuleExecutionOutput DEBUG: needs to be forwarded to /error/410.html/error/410.html
Nov 20, 2012 12:31:10 PM org.apache.catalina.core.ApplicationContext log
INFO: org.tuckey.web.filters.urlrewrite.UrlRewriter DEBUG: rule is last 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:57:09.553

经过一番尝试和尝试，我找到了解决方案。AllRemainingRequests 的“来自”组件令人不安。当我对 AllRemainingRequests 进行以下定义时，它可以正常工作。

```
<rule>
    <name>AllRemainingRequests</name>
    <from>(/.*)</from> 
    <set type="status">404</set>
    <to last="true">/error/410.html</to>
</rule> 
```

唯一的变化是“/”

# mysql - 由于 slave_I/O_running 无法复制：否

> ID：13473596
> 
> 赞同：0
> 
> 时间：2012-11-20T12:51:15.080
> 
> 标签：mysql

```
I have a master mysql server 5.5 version and a slave 5.1 version. I am getting the 
following error.
mysql> show slave status\G;
*************************** 1\. row ***************************
           Slave_IO_State: Connecting to master
              Master_Host: XXX.XX.X.XXX
              Master_User: repl_user
              Master_Port: 3306
            Connect_Retry: 60
          Master_Log_File: mysql-bin.000012
      Read_Master_Log_Pos: 107
           Relay_Log_File: ABC-029-relay-bin.000001
            Relay_Log_Pos: 4
    Relay_Master_Log_File: mysql-bin.000012
         Slave_IO_Running: No
        Slave_SQL_Running: Yes
          Replicate_Do_DB: replication_test
      Replicate_Ignore_DB:
       Replicate_Do_Table:
   Replicate_Ignore_Table:
  Replicate_Wild_Do_Table:
 Replicate_Wild_Ignore_Table:
               Last_Errno: 0
               Last_Error:
             Skip_Counter: 0
      Exec_Master_Log_Pos: 107
          Relay_Log_Space: 106
          Until_Condition: None
           Until_Log_File:
            Until_Log_Pos: 0
       Master_SSL_Allowed: No
       Master_SSL_CA_File:
       Master_SSL_CA_Path:
          Master_SSL_Cert:
        Master_SSL_Cipher:
           Master_SSL_Key:
    Seconds_Behind_Master: NULL
   Master_SSL_Verify_Server_Cert: No
            Last_IO_Errno: 1045
            Last_IO_Error: error connecting to master 
  'repl_user@XXX.XX.X.XXX:3306' -     retry-time: 60  retries: 86400
           Last_SQL_Errno: 0
             Last_SQL_Error:
  1 row in set (0.00 sec)
  Please suggest what to do? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:59:02.153

错误“1045”表示登录/凭据问题。检查您的登录名/密码是否正确或检查您的防火墙是否没有阻止连接。

# xml - 使用 xlst 设置 excel 单元格样式

> ID：13473603
> 
> 赞同：0
> 
> 时间：2012-11-20T12:51:30.003
> 
> 标签：xml, excel, xslt

我有一个xml

```
<?xml version="1.0"?>
    <ArrayOfSubscriber xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <Subscriber>
        <FirstName xsi:nil="true" xmlns="somenamespace" />
        <LastName xsi:nil="true" xmlns="somenamespace" />
        ...
      </Subscriber>
...
</ArrayOfSubscriber> 
```

我需要创建一个 excel 文件，其中每列都有自己的样式。我希望通过下一次转换得到我期望的结果

```
<Worksheet>
  <Table>
    <xsl:apply-templates select="//Subscriber" />
  </Table>
</Worksheet>

<xsl:template match="Subscriber">
  <Row ss:Height="15">
    <Cell ss:StyleID="s21">
      <Data ss:Type="String">
        <xsl:value-of select="FirstName" />
      </Data>
    </Cell>
    <Cell ss:StyleID="s22">
      <Data ss:Type="String">
        <xsl:value-of select="LastName " />
      </Data>
    </Cell>
    ...
   </Row>
</xsl:template> 
```

但是由于命名空间而出现问题`xmlns="somenamespace"`。因此我无法获取数据。我发现了一些主题，其中描述了删除它们的可能性，但就我 xslt 的新手而言，我没有成功地将正确的模板应用于我的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:09:11.490

使用与此类似的构造尝试我之前链接到的帖子中的替代方法：

```
<xsl:value-of select="*[local-name()='FirstName' = and namespace-uri()='somenamespace']" /> 
```

之前建议给命名空间定义一个父元素：

```
<parent xmlns:sn="somenamespace">
...
<xsl:template match="Subscriber">
  <Row ss:Height="15">
    <Cell ss:StyleID="s21">
      <Data ss:Type="String">
        <xsl:value-of select="sn:FirstName" />
      </Data>
    </Cell>
    <Cell ss:StyleID="s22">
      <Data ss:Type="String">
        <xsl:value-of select="sn:LastName " />
      </Data>
    </Cell>
    ...
   </Row>
</xsl:template>
...
</parent> 
```

# ruby-on-rails - 在离线系统中安装“yum install httpd-devel”

> ID：13473610
> 
> 赞同：1
> 
> 时间：2012-11-20T12:51:57.367
> 
> 标签：ruby-on-rails, offline, apache, redhat, yum

我正在尝试在我的系统（RedHat/Fedora）中安装“Yum install httpd-devel”，但系统没有互联网连接。我可以从互联网上下载文件并复制到系统中，但我无法在系统上使用互联网。我正在尝试安装 rails，我需要“httpd-devel”、“apr-devel”和“apr-util-devel”。例如，当我需要使用“gem install rails”时，我下载了 rails.gem 并使用此文件进行安装，我的新问题有类似的解决方案吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:58:44.383

您可以只下载该软件包，然后使用[rpm](http://www.rpm.org/max-rpm/rpm.8.html)安装它。

```
$ rpm -i [package-file] 
```

请记住，任何软件包都可能需要一些额外的依赖项，您需要全部下载并手动安装它们。对于具有许多依赖项的包来说，它可能会变得很无聊。

要查找软件包[rpmfind 是您的朋友](http://rpmfind.net/linux/rpm2html/search.php?query=httpd-devel)：为您的操作系统（Fedora、Red Hat 或其他）找到合适的软件包，下载并检查依赖项。例如，[Fedora 18 x86_64 的软件包](http://rpmfind.net//linux/RPM/fedora/updates/testing/18/x86_64/httpd-devel-2.4.3-12.fc18.x86_64.html)：您将需要 apr-devel 和其他一些软件包。`rpm`如果您缺少依赖项，会通知您。如果没有安装您自己的 yum 存储库，您将不得不手动下载所有依赖项。

# sql-server-2008 - SQL Server 数据透视表作为动态 SQL

> ID：13473615
> 
> 赞同：1
> 
> 时间：2012-11-20T12:52:13.537
> 
> 标签：sql-server-2008

我将下面的代码放在存储过程（SQL Server 2008）中。代码已放置在一个字符串中，以允许其中一个参数具有多个值。我遇到的问题是，当我在 SQL Server Management Studio 中测试 SQL 时，它说我的字符串不是有效的标识符，并指向我在周围放置双 ** 的行。

我看不出我做错了什么，我想知道我是否遗漏了什么或询问这种查询是否可以动态执行。如果后者是不可能的，那么如何将许多参数传递给这种查询？

谢谢

```
DECLARE @SQL AS VARCHAR(MAX)

SELECT @SQL = 'select Production_Site, [Target],[Action],[Fail]'
SELECT @SQL = @SQL + ' from'
SELECT @SQL = @SQL + ' ('
SELECT @SQL = @SQL + ' select Production_Site, value, Period, YEAR, week'
SELECT @SQL = @SQL + ' from t_Pqe_Grocery'
SELECT @SQL = @SQL + ' unpivot ('
SELECT @SQL = @SQL + ' value'
SELECT @SQL = @SQL + ' for col in (Grocery_Packaging_And_Coding, Grocery_Measurable,'
SELECT @SQL = @SQL + ' Grocery_Appearance, Grocery_Aroma,'
**SELECT @SQL = @SQL + ' Grocery_Flavour, Grocery_Texture)) unp'**
SELECT @SQL = @SQL + ' ) src '
SELECT @SQL = @SQL + ' pivot '
SELECT @SQL = @SQL + ' ('
SELECT @SQL = @SQL + ' count(value)'
SELECT @SQL = @SQL + ' for value in ([Target], [Action], [Fail])'
SELECT @SQL = @SQL + ' ) piv'
SELECT @SQL = @SQL + ' where Production_Site IN (' + @Site + ') AND YEAR = ' + 
                     CONVERT(varchar(50), CONVERT(BIGINT, @Year)) + ' AND Period = ' + 
                     CONVERT(varchar(50), CONVERT(BIGINT, @Period)) + ' and Week = ' +   
                     CONVERT(varchar(50), CONVERT(BIGINT, @Week)) 
EXECUTE @SQL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:40:38.577

更改`EXECUTE @SQL`为`EXECUTE (@SQL)`。我相信这是语法问题。

尝试将其粘贴到 SSMS 中并运行它，它运行时没有引号问题：

```
DECLARE @Site VARCHAR(1000) = '''Avonmouth'',''Lifton'''
DECLARE @Year VARCHAR(50) = '12'
DECLARE @Period VARCHAR(50) = '10'
DECLARE @Week VARCHAR(50) ='41'

DECLARE @SQL AS VARCHAR(MAX)

SELECT @SQL = 'select Production_Site, [Target],[Action],[Fail]'
SELECT @SQL = @SQL + ' from'
SELECT @SQL = @SQL + ' ('
SELECT @SQL = @SQL + ' select Production_Site, value, Period, YEAR, week'
SELECT @SQL = @SQL + ' from t_Pqe_Grocery'
SELECT @SQL = @SQL + ' unpivot ('
SELECT @SQL = @SQL + ' value'
SELECT @SQL = @SQL + ' for col in (Grocery_Packaging_And_Coding, Grocery_Measurable,'
SELECT @SQL = @SQL + ' Grocery_Appearance, Grocery_Aroma,'
SELECT @SQL = @SQL + ' Grocery_Flavour, Grocery_Texture)) unp'
SELECT @SQL = @SQL + ' ) src '
SELECT @SQL = @SQL + ' pivot '
SELECT @SQL = @SQL + ' ('
SELECT @SQL = @SQL + ' count(value)'
SELECT @SQL = @SQL + ' for value in ([Target], [Action], [Fail])'
SELECT @SQL = @SQL + ' ) piv'
SELECT @SQL = @SQL + ' where Production_Site IN (' + @Site + ') AND YEAR = ' + 
                     CONVERT(varchar(50), CONVERT(BIGINT, @Year)) + ' AND Period = ' + 
                     CONVERT(varchar(50), CONVERT(BIGINT, @Period)) + ' and Week = ' +   
                     CONVERT(varchar(50), CONVERT(BIGINT, @Week)) 
PRINT @SQL
EXECUTE (@SQL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:02:40.543

我猜你的`@site`参数周围没有足够的单引号，而不是传入的。添加以下内容：

```
Production_Site IN (''' + @Site + ''') 
```

如果`@site`是一个字符串值，那么你需要在它周围加上单引号。您当前的查询缺少它们。

所以你的最终查询是：

```
DECLARE @SQL AS VARCHAR(MAX)

SELECT @SQL = 'select Production_Site, [Target],[Action],[Fail]'
SELECT @SQL = @SQL + ' from'
SELECT @SQL = @SQL + ' ('
SELECT @SQL = @SQL + ' select Production_Site, value, Period, YEAR, week'
SELECT @SQL = @SQL + ' from t_Pqe_Grocery'
SELECT @SQL = @SQL + ' unpivot ('
SELECT @SQL = @SQL + ' value'
SELECT @SQL = @SQL + ' for col in (Grocery_Packaging_And_Coding, Grocery_Measurable,'
SELECT @SQL = @SQL + ' Grocery_Appearance, Grocery_Aroma,'
SELECT @SQL = @SQL + ' Grocery_Flavour, Grocery_Texture)) unp'
SELECT @SQL = @SQL + ' ) src '
SELECT @SQL = @SQL + ' pivot '
SELECT @SQL = @SQL + ' ('
SELECT @SQL = @SQL + ' count(value)'
SELECT @SQL = @SQL + ' for value in ([Target], [Action], [Fail])'
SELECT @SQL = @SQL + ' ) piv'
SELECT @SQL = @SQL + ' where Production_Site IN (''' + @Site + ''') AND YEAR = ' + 
                     CONVERT(varchar(50), CONVERT(BIGINT, @Year)) + ' AND Period = ' + 
                     CONVERT(varchar(50), CONVERT(BIGINT, @Period)) + ' and Week = ' +   
                     CONVERT(varchar(50), CONVERT(BIGINT, @Week)) 

EXECUTE (@SQL) 
```

# facebook - 有没有办法代表用户发帖，让它看起来像一个实际的帖子？

> ID：13473616
> 
> 赞同：0
> 
> 时间：2012-11-20T12:52:13.837
> 
> 标签：facebook

我们需要发布一条来自用户的消息，看起来像是一个实际的状态更新，而不是通过应用程序制作的任何东西，没有额外的图像或超链接。我们还想在帖子中“标记”一个页面。

有没有办法让用户自己发帖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:00:17.723

通过应用程序发布内容并使其看起来像用户发布的内容是不可能的，用户应该始终能够阻止应用程序（以及应用程序的发布）。另请记住，“消息”字段始终必须由用户生成，因此您不得使用自动生成的内容进行发布。毕竟，通过应用程序发布只会留下非常小的足迹，它只会写“通过 xxxxx”（应用程序名称）。无论如何，发布内容的唯一严肃方式是通过 JavaScript SDK 提要对话框：

> [https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

关于在帖子中标记页面，我不确定。几个月前这是不可能的。

> [https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

搜索“此帖子中标记的人的 Facebook ID 的逗号分隔列表” - 我想您仍然只能标记用户，但您可以尝试使用页面 ID。

# facebook-c#-sdk - Facebook c# sdk - 我可以使用 API 之前添加的 Post_id 在我的墙上分享帖子吗？

> ID：13473617
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:52:17.847
> 
> 标签：facebook-c#-sdk

我使用 Facebook c# sdk 将图像发布到我的页面结果返回 Post_id

> var result = (IDictionary)app.Post("/PageId /photos", parameters);

我可以使用我墙上的 post_ID 分享这篇文章吗？

> app.post(result.Post_id +"/feed");

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:19:58.903

你需要分享图片使用

> app.Post("me/feed", new Dictionary { { "link", link } });

脸书照片链接：

> 字符串链接 = "http://www.facebook.com/photo.php?fbid=" + result.id;

# javascript - javascript文件上传平均剩余时间问题

> ID：13473620
> 
> 赞同：3
> 
> 时间：2012-11-20T12:52:23.293
> 
> 标签：javascript, jquery, file, upload, average

我一直在使用 uploadify 处理文件上传脚本，该脚本计算上传的剩余时间。Uploadify 提供了一个名为 onUploadProgress 的回调，它为我提供了有关当前上传的一些信息。

我有这个工作在一定程度上，但问题在于野生动物园。剩余时间脚本不准确，它会在大文件上剩余 10 到 20 分钟之间跳跃 - 这是可以接受的。在 Safari 上，偏差是巨大的，它会在剩余 0 到 300 分钟之间移动，即使是小的上传也是如此。

我的想法是通过将每个进度（总计）的 timeLeft 值相加来平均剩余时间，并将值增加 1（numberofpolls），因此可以通过 total/numberofpolls 计算平均值。

下面的代码包含 CalcTime 的函数和 onUploadProgress 的回调。

```
var total = 0;
var numberofpolls = 0;
var avg = 0;    

function CalcTime(newTime)
{

    total += parseFloat(newTime);

    numberofpolls++;

    avg = (total / numberofpolls);

    return avg;
}

...

'onUploadProgress' : function(file, bytesUploaded, bytesTotal, totalBytesUploaded, totalBytesTotal) {

     // remaining amount of bytes in upload            
     var remaining = totalBytesTotal - totalBytesUploaded;

     // approx amount of time left.         
     var timeLeft = (((remaining - (Date.now() - timeStarted) * this.queueData.averageSpeed) / this.queueData.averageSpeed) /60)/1000;

     var tmp_time = CalcTime(timeLeft );

     if (tmp_time<=1)
        var suffix = "Less than a minute remaining";
      else
        var suffix = ~~(tmp_time)+ ' minute(s) remaining';
} 
```

问题不在于 timeLeft 的计算 - 因为这在以前有效，问题是通过 CalcTime 平均 timeLeft 的值。如果有更好的方法来阻止 safari 这样做，或者有更好的计算方法，我们将不胜感激。

提前致谢。

# sql - 计算列表中每个元素的并发数

> ID：13473621
> 
> 赞同：1
> 
> 时间：2012-11-20T12:52:27.997
> 
> 标签：sql, oracle, count

我有一个条目列表，我需要知道它们是否在表格的列中。这很容易，但我不知道如何标记此列表的条目何时未出现在 DB 列中。如果可能知道每个元素的 Db 列中的结果计数。当列表的元素未出现在 DB 列中时，输出必须为 0。

当我说一个列表时，它是：

```
select xxxxxx from TABLE WHERE field in (a, b, c, d, ... , z); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:40:01.820

为了做到这一点，您首先需要一种方法来了解要计算的值列表是什么。您必须以某种方式自己生成它并将它们存储在某些描述的子查询中，或者使用此信息创建表或视图。

然后，您可以加入您的主表并计算出数字。

以下表为例：

```
create table tmp_test ( numbers number, letters varchar2(1)); 
```

，其中的数据填充如下：

```
 insert into tmp_test
 select mod(level, 500), chr(mod(level,13) + 97) 
   from dual
connect by level <= 1000 
```

如果我们假设您所追求的值是 95 到 105 之间的数字，您的查询将是：

```
select all_vals, count(b.numbers)
  from ( select level + 94 as all_vals
           from dual
        connect by level <= 11
                ) a
  left outer join tmp_test b
    on a.all_vals = b.numbers
 group by a.all_vals
 order by all_vals
       ;

  ALL_VALS COUNT(B.NUMBERS)
---------- ----------------
        95               10
        96               10
        97               10
        98               10
        99               10
       100                0
       101                0
       102                0
       103                0
       104                0
       105                0

11 rows selected. 
```

但是，如果您想要计算 , 和 if 中列中的值的数量，则`letters`如下所示：`a``l``m``p`

```
select all_vals, count(b.letters)
  from ( select 'a' as all_vals from dual
          union all
         select 'l' from dual
          union all
         select 'm' from dual
          union all
         select 'p' from dual
                ) a
  left outer join tmp_test b
    on a.all_vals = b.letters
 group by a.all_vals
 order by all_vals
       ;

A COUNT(B.LETTERS)
- ----------------
a               76
l               77
m               77
p                0 
```

如前所述，子查询可以很容易地替换为视图或表格。

LEFT OUTER JOIN 在这里有所不同。您已生成要计算的值列表，然后检查它们是否存在于您感兴趣的列中。

### 这是一个带有这些示例的有效[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/85270/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:43:34.153

使用（全局）临时表或嵌套表对象。

*   临时表（[SQLFiddle 演示](http://sqlfiddle.com/#!4/0621e/4)）

    ```
    CREATE GLOBAL TEMPORARY TABLE tmp (field NUMBER);

    INSERT INTO tmp (...);

    SELECT tmp.field, COUNT(t.field)
      FROM table t
     RIGHT JOIN tmp ON t.field = tmp.field
     GROUP BY tmp.field; 
    ```

*   表对象（[演示](http://sqlfiddle.com/#!4/da9e1/1)）

    ```
    CREATE OR REPLACE TYPE tab AS TABLE OF NUMBER;
    /

    SELECT tmp.column_value field, COUNT(t.field)
      FROM table t
     RIGHT JOIN TABLE(tab(a,b,c,d,e)) tmp ON t.field = tmp.column_value
     GROUP BY tmp.column_value; 
    ```

# android - 仅接收 json Android 4.0 时出错

> ID：13473623
> 
> 赞同：0
> 
> 时间：2012-11-20T12:52:42.070
> 
> 标签：android, json, web-services

我从我的 Android 设备连接到 Webservice，然后发送参数并获取 json。当我用 android API < 4.0 ex 2.3.3 测试时没问题当我用另一台设备测试时，它的 api 是 4.0.3, 4.0.4 然后我无法接收 json。

这是我的代码

```
json = getJson("http://search.twitter.com/search.json?result_type=recent&rpp=3&q=iphone");

private String getJson(String uri) {

    String json = null;
    try {
        URL url = new URL(uri);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("GET");
        conn.setRequestProperty("Accept", "application/json");
        Log.d(TAG,"1");
        // conn.setConnectTimeout(10 * 1000); //6s
        if (conn.getResponseCode() == 200) {
            // get successfull
            // read Json
            Log.d(TAG,"2");
            BufferedInputStream in = new BufferedInputStream(conn.getInputStream());
            int len = 0;
            byte[] buf = new byte[1024];
            StringBuffer stringBuffer = new StringBuffer();
            while ((len = in.read(buf)) != -1) {
                String s = new String(buf, 0, len);
                stringBuffer.append(s);
            }
            Log.d(TAG,"3");

            json = stringBuffer.toString();
            Log.d(TAG,json);
        }
    } catch (Exception e) {
        Log.e(TAG, "error get json :" + e.toString());
        json = null;
    }
    return json;
} 
```

错误。

```
11-20 19:42:22.555: E/TEST(29097): error get json :android.os.NetworkOnMainThreadException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:54:32.093

它适用于您的**2.3.3**，因为[NetworkOnMainThreadException自](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)**api 11**以来一直在 android 中 您需要将使用`HTTP`连接的部分移动到另一个线程，或者更好地使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ..

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
     for (int i = 0; i < count; i++) {
         totalSize += Downloader.downloadFile(urls[i]);
         publishProgress((int) ((i / (float) count) * 100));
         // Escape early if cancel() is called
         if (isCancelled()) break;
     }
     return totalSize;
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:23:52.000

从 Asynctask<> 调用 web 服务。问题会解决的。

# c# - 在多行随机数中找到一个数字模式

> ID：13473626
> 
> 赞同：-6
> 
> 时间：2012-11-20T12:52:45.590
> 
> 标签：c#, algorithm

我有很多这样的行（假设有 20 行这样的行）`1, 3, 4, 6, 8, 9, 13, 16, 18, 19`：. 从 1 到 20 的 10 个唯一随机生成的数字。

我想找到一组来自同一行并在大多数行中找到的 4 个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:26:36.953

这个问题本身很有趣恕我直言

作为起点，我将创建可能出现的四元组 (?) 的所有可能组合，并将它们存储为 (List Of) INTEGER（因为这将允许您使用按位比较）。组合数应该是(20*19*18*17)/4！=> 4845。然后您也将输入的“行”转换为整数。之后，您可以通过检查简单地计算单个“模式”的出现次数`NumberFromLine & NumberFromList == NumberFromList`

将模式存储为整数意味着：如果数字为“1”，则将整数的第 0 位设置为 1。如果数字为 7，则将整数值的第 6 位设置为 1，依此类推。

我认为这应该有资格作为“算法”，所以你只需要编码它;）

# java - Java 中的 Checkstyle 和错误检测器

> ID：13473637
> 
> 赞同：0
> 
> 时间：2012-11-20T12:53:22.633
> 
> 标签：java, eclipse, code-analysis, findbugs, checkstyle

我需要对我的一些类执行一些验证，例如：

1.  每个类字段必须是最终的或每个程序有一个写入（单例）；

2.  如果该字段不是最终的，那么它必须是私有的；

3.  每个数组都必须是私有的。

我已经看到 findbugs 和 checkstyle 可以进行这种检查，但默认情况下我没有看到它们，我发现它的唯一选择是为 checkstyle（用于约定检查）和 findbugs（用于错误检测）。有没有更好的选择？

我正在使用带有 FindBugs 和 CheckStyle 插件的 Eclipse Indigo 的 Windows 7 x64。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:07:16.207

配置 Eclipse 警告（一些好的警告设置为非活动！）：

*   检查未使用的参数
*   建议将方法设为静态
*   关于私人，您应该使用其他工具（可能是 PMD 或 CheckStyle）
*   ...

Eclipse 保存操作：

*   尽可能添加 final
*   可以通过自动格式化代码来强制执行一些编码风格

使用 FindBugs 和 FindBugs contrib 查找更多错误。如果要执行样式/格式检查，请使用 PMD 和 CheckStyle。

我还建议使用错误而不是警告，这迫使我处理一些必须修复的邪恶警告。FindBugs 也是如此，如果您使用 Maven 插件，您可以在出现错误时使构建失败（因此请仔细选择您的规则）。我在 Eclipse 中运行其他可选规则作为补充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:11:07.777

Checkstyle 可以开箱即用地处理所有这些检查。

在[文档](http://checkstyle.sourceforge.net/availablechecks.html)中，您可以找到所有可能的检查以及如何配置它们。

此外，如果这还不够，您还有机会为 checkstyle 或 finbugs 创建自己的检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:01:11.623

我们使用了一些 Eclipse 内置功能来处理警告和错误（用于基础），并使用 findbugs 来处理更复杂的问题。

但是，如果我们想要检查一些非常具体的东西（就像所有以 Singleton 结尾的类仅在特定包中调用），我们编写了一些文本扫描器脚本（在 perl 中）来执行此操作。

我不会推荐这么多，但如果你必须...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T03:28:20.153

如果 checktyle 中的现有检查不能完全按照您想要的方式解决您的问题，您可以使用[PMD](http://pmd.sourceforge.net/)，其中可以使用 XPath 表达式轻松实现自定义规则。参考。:[如何编写 PMD 规则](http://pmd.sourceforge.net/pmd-5.0.1/howtowritearule.html)

# ember.js - 将记录加载到 ember-data 会创建一个几乎为空的记录

> ID：13473639
> 
> 赞同：1
> 
> 时间：2012-11-20T12:53:26.520
> 
> 标签：ember.js, ember-data

因此，在编写 Ember.js 应用程序时，我无法让最基本的 ember-data 记录工作。使用 Ember.js 和 ember-data 的最新 git 构建，我在 firebug 中运行了这段代码：（使用我从 github 上的 ember-data 指南中学到的知识）

```
App.store = DS.Store.create({
    revision: 8,
    adapter: DS.RESTAdapter.create({bulkCommit: false, namespace: "api"})
});

App.Test = DS.Model.extend({
    test: DS.attr('string')
});

App.store.load(App.Test, 1, {test: "abc"});

App.store.findById(App.Test, 1); 
```

**编辑：mspisars 的回答让我意识到 findById() 不是要使用的函数**（尽管它确实具有相同的结果）。这是内部 ember 数据使用的功能。

最后一行返回一个 App.Test 对象，其测试属性设置为“未定义”。我使用 createRecord 创建记录得到了相同的结果（诚然我不记得有什么区别）。

据我所知，这不是[这个](https://stackoverflow.com/questions/10721637/ember-data-only-populating-the-id-property)问题的重复，尽管症状几乎相同。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:17:22.590

findById 是您创建的方法吗？我在 ember-data master 的任何地方都看不到它！尝试 App.Test.find("1") 或 App.store.find(App.Test, "1")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:32:11.270

我以错误的方式访问存储的数据。加载数据后，我试图获取这样的数据：

```
t = App.store.find(App.Test, 1);

console.log(t.test); // wrong 
```

那返回*undefined*。

我应该这样做：

```
console.log(t.get('test'));
"abc" 
```

# uiscrollview - 如何使我的 CATextLayer 对象像 UITextView 一样可滚动？

> ID：13473646
> 
> 赞同：0
> 
> 时间：2012-11-20T12:53:56.990
> 
> 标签：uiscrollview, calayer, quartz-core, catextlayer

我已经使用 CATextLayer 一起显示粗体和普通文本。现在有时我从 Web 服务响应中获取长文本，所以我无法显示完整的文本。任何人都可以帮我制作 CATextLayer 对象的方法像 textview 一样可滚动。请向我建议任何有关此的解决方案。我也参考了[Here](https://stackoverflow.com/questions/8577694/catextlayer-not-scrolling)但它对我不起作用。我正在使用这段代码：

/* 按需创建文本层 */

```
if (!_textLayer) {
    _textLayer = [[CATextLayer alloc] init];
    //_textLayer.font = [UIFont boldSystemFontOfSize:13].fontName; // not needed since `string` property will be an NSAttributedString
    _textLayer.backgroundColor = [UIColor clearColor].CGColor;
    _textLayer.wrapped = YES;
    //CALayer *layer = self.navigationController.toolbar.layer; //self is a view controller contained by a navigation controller
    _textLayer.frame = CGRectMake(5,325, 310, 90);
    _textLayer.contentsScale = [[UIScreen mainScreen] scale]; // looks nice in retina displays too :)
    _textLayer.alignmentMode = kCAAlignmentJustified;
    _textLayer.masksToBounds = YES;
    [self.view.layer addSublayer:_textLayer];
} 
```

在底部，我还尝试将我的 _textLayer 添加到 UITextView 的层，而不是 self.view.layer。

请建议我如何实现此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:09:13.907

您可以将 CATextLayer 添加到 UIScrollView 并免费滚动。根据需要设置滚动视图的框架，并将 contentSize 设置为 CATextLayer 框架并将其添加到滚动层，如下所示（实际上不是工作代码）：

```
UIScrollView* scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,100,100)];
CATextLayer* layer = [CATextLayer layer];
//layer init code goes here
scroll.contentSize = CGSizeMake(1000,1000);//or your actual text layer size
[scroll.layer addSublayer:layer]; 
```

你就完成了！不要忘记将滚动添加为您的视图子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:32:17.013

使用 NSString 的方法`sizeWithFont:constrainedToSize:`获取给定字体的文本的边界矩形，然后使用此大小设置图层的框架：

```
NSString* myString = ....;
CGSize size =     [myString sizeWithFont:[UIFont systemFontOfSize:12] constrainedToSize:CGSizeMake(100, 100)];
_textlayer.frame = CGRectMake(0,0,size.width,size.height); 
```

只是不要忘记使用适当的字体/约束大小。

# php - 使用PHP解析错误语法错误意外文件结尾

> ID：13473654
> 
> 赞同：0
> 
> 时间：2012-11-20T12:54:30.187
> 
> 标签：php

这是什么意思？

我的页面一直运行良好，但我将 XAMPP 更新为更新版本 1.8.1。之后，我只收到此错误消息：

> 解析错误：语法错误，第 106 行 C:\xampp\index.php 中的文件意外结束

```
<?php
    if (isset($_POST['submit']))
    {
        include('Mysql.php');

        // Include database connection settings
        $username=$_POST['username'];
        $password=$_POST['password'];
        $username = stripslashes($username);
        $password = stripslashes($password);
        $username = mysql_real_escape_string($username);
        $password = mysql_real_escape_string($password);

        // Retrieve username and password from database according to user's input

        $subm = mysql_query("SELECT * FROM usercreation WHERE (UserId = '" .$username. "') and (Password = '" .$password. "')");

        // Check username and password match
        if (mysql_num_rows($subm) == 1)
        {
            session_start();

            // Set username session variable
            $_SESSION['username']=$username;
            //$ss=$_SESSION['username'];

            // Check, if user is already login, then jump to secured page
            if (isset($_SESSION['username']))
            {
                header('Location:master.php');
            }
        }
        else
        {
?>

<script type="text/javascript">
    alert("The username or password you entered is incorrect.");
    document.location='index.php';
</script>

<?
        }
    }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <title>Mani</title>
    </head>

    <body>
        <center>
            <div style="width:980px;" class="mod-container">
                <div style="width:980px; height:50px;">
                </div>

                <div style="width:980px; height:130px; float:none;">
                   <div style="width:250px; height:130px; float:left; background-image:url(img/logo_mani.png);">
                   </div>
                </div>

                <div style="width:980px; height:350px; float:none;">
                    <div style="width:270px; height:350px; margin-left:10px; float:left;">
                    </div>

                    <div style="width:400px; height:350px; background-image:url(img/loginbg.png); margin-left:10px;float:left;">
                        <!--   Form start here-->
                        <form method="POST" action="<?php $_PHP_SELF ?>">
                            <div style="width:369px; height:275px; margin-left:17px; margin-top:59px; float:left;">
                                <div style="width:321px; height:48px; background-image:url(img/uid.png); margin-left:27px; margin-top:30px; float:left;" class="log">
                                    <input type="text" placeholder="Username" onBlur="this.value=!this.value?'Username':this.value;" onFocus="this.select()" onClick="this.value='';" name="username" value="Username">
                                </div>
                                <div style="width:321px; height:48px; background-image:url(img/pw.png); margin-left:27px; margin-top:29px; float:left;" class="log">
                                    <input type="password" placeholder="Password" onBlur="this.value=!this.value?'Password':this.value;" onFocus="this.select()" onClick="this.value='';" name="password" value="Password">
                                </div>
                                <div style="width:321px; height:29px;  margin-left:27px; margin-top:15px; float:left;" class="logforgot">
                                    <!--   <a href="#" style="">Forgot Password ?</a>-->
                                </div>
                                <div style="width:321px; height:48px;  margin-left:27px; margin-top:19px; float:left;">
                                    <input class="logbutton" type="submit" value="Login" name="submit">
                                </div>
                            </div>
                        <!--   Form end here-->
                        </form>
                    </div>

                    <div style="width:270px; height:350px; margin-left:10px;float:left;">
                    </div>
                </div>
            </div>

            <div id="footer-wrap">
                <div style="width: 980px; height:20px; float:none;">
                    <div style="width: 580px; height:20px; float:left;"class="footercontainer"><p>© 2012 Amara Raja Batteries Limited.</p></div>
                    <div style="width: 210px; height:20px; float:right;"class="footercontainer"><p>All Rights Reserved | Privacy Policy</p></div>
                </div>
            </div>
        </center>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T12:58:43.823

看来您有不同的 PHP 配置。

在 php.ini 文件中启用[短标签。](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)

或将所有`<?`s 转换为`<?php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:01:08.730

确保所有 PHP 代码都在`<?php`标签内：

```
// Line 37
<?php
    }
}
?> 
```

# ruby-on-rails - capistrano deploy_via 复制不排除文件

> ID：13473658
> 
> 赞同：2
> 
> 时间：2012-11-20T12:55:07.153
> 
> 标签：ruby-on-rails, deployment, capistrano

我使用虚拟 SCM 和复制策略来部署我的 Rails 3 应用程序。为了让它更快，我想从副本中排除一些文件（例如日志）。我在我的设置以下选项`config/deploy.rb`：

```
set :scm, :none 
set :deploy_via, :copy
set :copy_exclude, "**/*.log" 
```

但是，它似乎在部署期间复制了日志。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T08:30:10.567

[https://github.com/capistrano/capistrano/blob/v2.15.4/lib/capistrano/recipes/deploy/scm/none.rb](https://github.com/capistrano/capistrano/blob/v2.15.4/lib/capistrano/recipes/deploy/scm/none.rb) As can be seen from the source, the `copy_exclude` setting is not respected when using `:scm none`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-09T11:20:46.503

参考：[http ://weblog.jamisbuck.org/2008/5/2/capistrano-2-3-0.html](http://weblog.jamisbuck.org/2008/5/2/capistrano-2-3-0.html)

对于 Capistrano 2，您应该使用 copy_exclude：

```
set :repository, "."
set :scm, :none
set :deploy_via, :copy
set :copy_exclude, ['tmp', 'log'] 
```

对于 Capistrano 3，（使用 gem：capistrano-scm-copy），请参见：（[https://github.com/wercker/capistrano-scm-copy/issues/6](https://github.com/wercker/capistrano-scm-copy/issues/6)）

```
set :exclude_dir, "deploy" 
```

# jquery - 如何使用 jQuery/AJAX 访问 views.py 中的变量？

> ID：13473663
> 
> 赞同：1
> 
> 时间：2012-11-20T12:55:19.230
> 
> 标签：jquery, python, ajax, django, views

# 编辑

当我编写 print request.POST['video'] 时，即使存在 'video' 的值，控制台中也不会打印任何内容。我是否在 javascript 中错误地获取了错误的值？我试图让“video34”（隐藏字段中的值）显示出来。

# 原来的

我正在尝试在 Django 中使用 jQuery/AJAX 发布数据，但遇到了麻烦。如何访问 views.py 中的“视频”变量？当我在 views.py 中编写“打印视频”时，我在控制台中收到错误消息 POST /edit_favorites/HTTP/1.1" 500 10113。

# 视图.py

```
from django.shortcuts import render_to_response
from django.http import HttpResponse
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def edit_favorites(request):
    if request.is_ajax():
        message = "Yes, AJAX!"
    else:
        message = "Not Ajax"
    return HttpResponse(message) 
```

# 网址配置：

```
url(r'^edit_favorites/', 'edit_favorites'), 
```

# html:

```
<form method='post' id ='test'>
     <input type="hidden" value="video34" />
    <input type='submit' value='Test button'/>

    <div id = 'message'>Initial text</div>

</form> 
```

# javascript:

```
<script type="text/javascript">
   $(document).ready(function() {
       $("#test").submit(function(event){
       event.preventDefault();
            $.ajax({
                 type:"POST",
                 url:"/edit_favorites/",
                 data: {
                        'video': $('#test').val() // from form
                        },
                 success: function(){
                     $('#message').html("<h2>Contact Form Submitted!</h2>") 
                    }
            });
            return false;
       });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:04:16.997

它在 中`request.POST['video']`，就像在普通 POST 中一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:08:59.037

在您在控制台中收到的消息中`POST /edit_favorites/ HTTP/1.1" 500 10113`，“500”是关键。这意味着您的服务器代码很可能有错误。在这种情况下，您试图“打印”一个不存在的变量。事实上，我很惊讶你没有看到`NameError`某个地方的回溯。

我不是 Django 用户，所以也许其他人可以提出更好的建议，但根据[Django 文档](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST)，所有帖子参数都在`request.POST`其中是一个类似 dict 的对象。

我建议检查：

```
if request.method == 'POST':
    if 'video' in request.POST:
        video = request.POST['video']
        # Do stuff, etc...
    else:
        # Raise an error 
```

那是在服务器端。在您的 HTML 中，您还需要为所有表单输入字段命名。例如`<input name="video" type="hidden" value="video32" />`之类的。您可能希望阅读有关 HTML 表单发布的更多信息。

# c++ - 当所有信息都在头文件中时对函数的未定义引用

> ID：13473665
> 
> 赞同：1
> 
> 时间：2012-11-20T12:55:29.623
> 
> 标签：c++, class, undefined-reference

当我尝试编译以下代码时，出现此错误：

```
obj\Debug\main.o||In function `main':|
C:\Users\dmarr\Documents\CSharper\Dallas\CPlusPlus\WHYGODWHYCB\main.cpp|16|undefined reference to `bag::bag()'|
||=== Build finished: 1 errors, 0 warnings ===| 
```

起初，我将 bag.h 和 bag.cpp 作为两个单独的文件——这里的许多与“未定义引用”相关的答案都建议将 .cpp 文件的内容移动到 .h 文件中——所以我这样做了。但是，我在编译时仍然遇到上述错误。

aItem.cpp：

```
//aItem .cpp implementation file
#include "aItem.h"
#include <iostream>
#include <string>
#include <vector>
using namespace std;

//setting this up default
aItem::aItem()
{
    m_itemName = "Default Name";
    m_itemType = "Default Type";
    m_damage     = 9001;
}

void aItem::setName(string name)
{
    m_itemName = name;
}

void aItem::setType(string type)
{
    m_itemType = type;
}

void aItem::setDamage(int damage)
{
    m_damage = damage;
}

string aItem::getName()
{
    return m_itemName;
}

string aItem::getType()
{
    return m_itemType;
}

int aItem::getDamage()
{
    return m_damage;
} 
```

aItem.h：

```
#ifndef AITEM_H_INCLUDED
#define AITEM_H_INCLUDED

#include <iostream>
#include <string>
#include <vector>
using namespace std;

class aItem
{
public:
    //constructor
    aItem();

    //Methods
    void ItemCreate(string itemName, string itemType, int damage);
    void setName(string name);
    void setType(string type);
    void setDamage(int damage);
    string getName();
    string getType();
    int getDamage();

private:

    string  m_itemName;
    string  m_itemType;
    int m_damage;

};

#endif // AITEM_H_INCLUDED 
```

袋子.h：

```
#ifndef BAG_H_INCLUDED
#define BAG_H_INCLUDED

#include "aItem.h"
#include <iostream>
#include <string>
#include <vector>
using namespace std;
class aItem;

class bag : public aItem
{
public:
    //constructor
    bag();

    //methods
    //void delItem(aItem aitem);

void addItem(aItem var)
    {
        m_items.push_back(var);
    }

void bagList()
    {
        for( vector<aItem>::size_type index = 0; index < m_items.size(); index++ )
            {
                //Makes a numerical list.
                cout << "Item " << index + 1 << ": " <<  m_items[index].m_itemName << endl;
                index+= 1;
            }
    }
private:
     vector<aItem> m_items;
};

#endif // BAG_H_INCLUDED 
```

...最后，main.cpp：

```
// WHYGODWHY.cpp : Defines the entry point for the console application.
//

#include "aItem.h"
#include "bag.h"
#include <iostream>
using namespace std;

int main()
{
    aItem woodSword;
    woodSword.setName("Wooden Sword");
    woodSword.setDamage(3);
    woodSword.setType("WPN");

    bag inventory;
    inventory.addItem(woodSword);
    inventory.bagList();

    cout << "Name: " << woodSword.getName() << endl;
    cout << "Type: " << woodSword.getType() << endl;
    cout << "Damage: " << woodSword.getDamage() << endl;
    //cout << "Inv: " <<
    int pause = 0;
    cout << "Pause!";
    cin >> pause;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:58:45.860

```
//constructor
bag(); 
```

您缺少构造函数的定义。如果您不声明它，编译器只会自动生成它。一旦你这样做了，你就有*责任*提供一个实现。

注意：如果你这样做了，你当然也可以回到分离`.h`状态`.cpp`。

# php - 在mysql中显示开始日期和结束日期之间的日期

> ID：13473667
> 
> 赞同：2
> 
> 时间：2012-11-20T12:55:41.287
> 
> 标签：php, mysql

好的，这让我很困惑，甚至不确定它是否可能。我有一个带有开始和结束日期的数据库。例如开始日期 2002 和结束日期 2012，但是我想要做的是列出这两个点之间的所有日期，例如 2003、2004、2005 等。

但是这些日期不在数据库中，所以我想做的是自动创建它们。这可能吗？我的另一个想法是创建第二个数据库，其中包含一个连接和所有日期的列表。

就在关于什么是解决这个问题的最佳方法的一些建议之后。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:21:43.647

你的 sql 看起来像这样

```
 $query = "SELECT starttime st ,endtime et FROM your_table WHERE id = your_user_id_variable ";
  $row = mysql_fetch_array($result) or die(mysql_error()); 
```

然后使用这个 php 代码

```
 for($i=1 , $i<$row['et'],$i++){
      echo $row['st']+$i.", " ;
            } 
```

然后它将回显 2003,2004,.....,2011

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T13:03:52.080

这样的事情应该用 PHP 来完成。

使用 PHP 提供的众多日期函数中的几个。您可以创建一个时间戳，`mktime()`然后使用`strtotime()`例如循环。

```
$start = mktime(0, 0, 0, 1, 1, 2002);
$end = mktime(0, 0, 0, 1, 1, 2012);

$currentDate = $start;
while($currentDate < $end) {
    echo date("Y", $currentDate) . "<br />";

    $currentDate = strtotime("+1 year", $currentDate);
} 
```

没有测试过，但应该可以。

[strtotime()](http://www.php.net/manual/en/function.strtotime.php)

[mktime()](http://www.php.net/manual/en/function.mktime.php)

[PHP中所有日期函数的列表](http://www.php.net/manual/en/ref.datetime.php)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-20T12:57:47.620

你必须在函数之间使用

```
SELECT * FROM Persons
WHERE LastName
BETWEEN (2003 AND 2004); 
```

# php - 如何在php中将一个巨大的进程分成多个步骤？

> ID：13473670
> 
> 赞同：0
> 
> 时间：2012-11-20T12:55:52.730
> 
> 标签：php, database, execution-time, multi-step

我需要处理一个 xml 文件并将一些数据相应地插入到我的数据库中。由于 XML 文件包含接近 10000 行并且可能有几千行要插入到数据库中，我担心我的脚本会超过`max execution time`.

我见过一些脚本来防止这种情况，它们将整个过程分成更小的步骤，脚本每隔几秒钟刷新一次页面，它会继续它正在做的任何事情。

我只是想知道它是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:32:32.623

这是使用缓冲区的另一种解决方案：

```
set_time_limit(0);
header('Content-type: text/html; charset=utf-8');

echo 'Starting... <br />';
for ($i = 0; $i < 10; $i++) {   
    echo $i . '<br />';

    ob_flush(); 
    flush(); 

    sleep(1);
}
echo 'Finished. <br />'; 
```

`set_time_limit(0)`为了以防万一，我放了（将超时设置为“无限”）。这`header('Content-type: text/html; charset=utf-8')`是必要的。这适用于 Firefox 和 Chrome，但不适用于 IE。如果我让它在 IE 上运行，我会更新。

更新 1：您还可以通过命令行 (CLI) 调用脚本：

*   视窗（cmd.exe）：`php.exe -f \path\to\file.php`
*   Unix（终端）：`php -f /path/to/file.php`

在这些情况下，缓冲区将不是必需的（它们会因为没有浏览器而引发错误）。在这两种情况下，您都可以通过 PHP 启动该过程`exec`，但您需要将日志写入某个文件，因为它不会输出到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:12:22.713

我成功地用一个连续的索引变量重新调用了 php 页面。

步骤是：

```
1\. start the script with no querystring. it will insert 1000 rows for this time. 
   (insert_bulk.php)
2\. recall the script with data start index 1001.
   (insert_bulk.php?start=1001)
3\. when the data finishes, stop recalling the script. 
```

这将防止溢出最大执行时间，并告诉您它当前正在处理哪个部分。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-20T13:07:31.077

您有时可以在脚本中尝试 sleep() 。似乎它不算作执行时间（[仅适用于 linux 服务器](http://www.php.net/manual/en/function.set-time-limit.php#75557)）

# php - 完成后使用 jQuery 提交表单到 iframe 反馈？

> ID：13473671
> 
> 赞同：2
> 
> 时间：2012-11-20T12:55:54.220
> 
> 标签：php, jquery, ajax, iframe

对于照片上传，我将表单提交到 iframe。

## 表格

```
<form method="post" enctype="multipart/form-data" action="upload_images.php" target="iframe_pp_upload" id="dd_form">
   <input type="file" id="dd_upload" name="file">
</form> 
```

## 内嵌框架

```
<iframe name="iframe_pp_upload" src="not-yet-submitted.php"></iframe> 
```

## jQuery

```
$('#dd_upload').change(function() {
  $('#dd_form').submit();
}); 
```

`upload_images.php`上传图片。但是，上传完成后获得反馈的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:24:52.413

在 upload_images.php 中执行此输出：

```
file header......
    <script>
         window.parent.uploadReady(); 
    </script>

..... 
```

并且在主窗口中，必须有一个js函数uploadReady()，在那里你可以为所欲为。

```
function uploadReady() {
      alert("im in the parent window");
 } 
```

我希望这有帮助

# c - 避免内联 c 中的无效初始化程序

> ID：13473673
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:55:58.167
> 
> 标签：c, varnish

我有一个函数原型，它为我提供了我想要的结果：

```
#include <stdio.h>
#include <string.h>

int main ()
{
  char * pch;
  char str[] = " 81.243.230.174, 10.1.0.102";
  pch = (char*) memchr (str, ',', strlen(str));
  char * tch;
  memcpy (tch, str, pch-str);
  if (pch!=NULL){
    printf ("',' found at position %ld.\n", pch-str);
    printf ("XFF: %s\n", tch);
  } else {
    printf ("',' not found.\n");
  }
  return 0;
} 
```

返回以下内容：$>',' 位于位置 15。$>XFF: 81.243.230.174

我想将libvcl的VRT_GetHdr的输出处理为上面的str，如下：

```
char * pch;
char str[] = VRT_GetHdr(sp, HDR_REQ, "\023X-FF:");
pch = (char*) memchr (str, ',', strlen(str));
char * xff;
memcpy (xff, str, pch-str);

    if (get_country_code)
            VRT_SetHdr(sp, HDR_REQ, "\017X-Country-Code:", (*get_country_code)(xff), vrt_magic_string_end); 
```

VRT_GetHdr 返回一个 char 指针，编译器抱怨“初始化程序无效”。

如果我将 char str[] 的分配更改为 char *str ，清漆会在运行时消失（可能带有段错误）。如何在不使用上述指向数组混乱的指针的情况下从我的内联 C 中获得预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:59:12.947

一旦你克服了编译器错误，你就会得到一个段错误。`xff`在复制到它之前，您需要分配内存。

```
char * pch;
char* str = VRT_GetHdr(sp, HDR_REQ, "\023X-FF:");
pch = (char*) memchr (str, ',', strlen(str));
char* xff = malloc(pch-str);
memcpy (xff, str, pch-str);
/* use xff as required */
free(xff); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:57:26.387

你不能。

初始化表达式必须是文字以提供编译时大小，而您的函数调用不是。

您也许可以使用 C99 的自动数组来解决这个问题，但只使用动态分配的数组（使用`malloc()`，或者`strdup()`如果你有它）可能更容易和更清晰。

甚至是“足够大”的静态限制，如果您有理由相信返回值的长度存在一些限制。

您的代码读起来有点像 的重新实现`strtok()`，也许您可​​以直接使用它？

# vb.net - 隐藏excel列中的单元格内容

> ID：13473682
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:56:46.167
> 
> 标签：vb.net, excel

我有一个 excel 表，我在 J 列中获取电子邮件地址。代码使用打开的 xml 包生成 excel 表，并根据行索引和单元格引用，将值导入表中。此字段必须用作 excel 上存在的按钮单击事件的动态输入，因此不需要显示该字段。我需要隐藏电子邮件地址，而不是让整个列不可见。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:58:24.700

不确定这是否会有所帮助，但可能值得一试。

[http://www.ehow.com/how_2212385_hide-cell-contents-excel.html](http://www.ehow.com/how_2212385_hide-cell-contents-excel.html)

# delphi - delphi下载图片不刷新页面

> ID：13473687
> 
> 赞同：0
> 
> 时间：2012-11-20T12:56:51.433
> 
> 标签：delphi, runtime, captcha

有一个包含基本验证码图像的网页，我解决了验证码从网站下载图像并使用 Tesaract。我正在使用此功能在 Timage 对象中显示图像而无需下载；

```
FUNCTION DownloadImage(CONST URL : STRING ; ImageType : TGraphicClass = NIL) : TBitMap;
  VAR
    HTTP        : TIdHttp;
    S           : TStream;
    IMG         : TGraphic;
    STR         : AnsiString;
    LHandler: TIdSSLIOHandlerSocketOpenSSL;

  BEGIN
    HTTP:=TIdHttp.Create(NIL);
    LHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
    TRY
      HTTP.IOHandler:=LHandler;
      S:=TMemoryStream.Create;
      TRY
        HTTP.Get(URL,S);
        IF NOT Assigned(ImageType) THEN BEGIN
          S.Position:=0;
          SetLength(STR,5);
          S.Read(STR[1],LENGTH(STR));
          IF COPY(STR,1,2)='BM' THEN
            ImageType:=TBitMap
          ELSE IF COPY(STR,1,3)='GIF' THEN
            ImageType:=TGIFImage
          ELSE IF COPY(STR,2,3)='PNG' THEN
            ImageType:=TPngImage
          ELSE IF (ORD(STR[1])=$FF) AND (ORD(STR[2])=$D8) THEN
            ImageType:=TJPEGImage
        END;
        IF NOT Assigned(ImageType) THEN RAISE EInvalidImage.Create('Unrecognized file format!');
        IMG:=ImageType.Create;
        TRY
          S.Position:=0;
          IMG.LoadFromStream(S);
          Result:=TBitMap.Create;
          TRY
            Result.Assign(IMG)
          EXCEPT
            Result.Free;
            RAISE
          END
        FINALLY
          IMG.Free
        END
      FINALLY
        S.Free
      END
    FINALLY
      HTTP.Free
    END
  END; 
```

或下载图片

```
function DownLoadInternetFile(Source, Dest : String): Boolean;
begin
  try
    Result := URLDownloadToFile(nil,PChar(Source),PChar(Dest),0,nil) = 0
  except
    Result := False;
  end;
end; 
```

问题是这两个功能都连接到网站以获取图像，因此，当我在表单上使用 webbrowser 导航页面时，下载的验证码图片和浏览页面的验证码图片不同，我想做的是得到文档完成后直接来自 Embeddedwb 或 webbrowser 对象的图片，我也尝试在运行时获取 webbrowser 的屏幕截图，但我失败了，网页是：“https://esgm.sgk.gov.tr/Esgm/”，谢谢提前。抱歉英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:12:35.460

如果那是您表单上的 TWebBrowser，您也许可以修改该文档。您可以将画布添加到文档，将图像绘制到画布上，然后使用 canvas.toDataURL 获取图像的 base64 编码表示。

在这个问题中做了类似的事情，只在 Javascript 中。 [在 JavaScript 中获取图像数据？](https://stackoverflow.com/questions/934012/get-image-data-in-javascript)

这应该会在 Delphi 中产生类似的结果。

```
function GetBase64Image(WebBrowser: TWebBrowser; ImageId: string): string;
var
  Document, Image, Canvas, Context: OleVariant;
begin
  Document := WebBrowser.Document;
  Image := Document.getElementById(ImageId);
  Canvas := Document.createElement('canvas');
  Canvas.Width := Image.Width;
  Canvas.Height := Image.Height;

  Context := Canvas.getContext('2d');
  Context.drawImage(Image, 0, 0);

  Result := Canvas.toDataURL('image/png');
  // Have to fix this. No time, sorry.
  //return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
end; 
```

# c++ - 无法在 Qt 的 TreeView 中显示 mp3 文件

> ID：13473689
> 
> 赞同：-1
> 
> 时间：2012-11-20T12:57:05.363
> 
> 标签：c++, qt, qt4, qfilesystemmodel

好吧，我似乎遇到了需要遍历目录并仅搜索 .mp3 和 .mpeg 文件的情况。搜索后，我想在我的树视图中显示它们。

基本上我的应用程序中有 2 个树视图，一个显示系统目录，另一个应该只显示 .mp3 和 .mpeg 文件。

这是代码

```
// Gets called when application starts
void DetailView::onCamStartup()
{
m_SystemModel = new QFileSystemModel(this);
m_SystemListViewModel = new QFileSystemModel(this);
m_SystemModel->setRootPath(QDir::currentPath());
ui->DriveView->setModel(m_SystemModel);
ui->DriveListView->setModel(m_SystemListViewModel);

// regard less how many columns you can do this using for:
for(int nCount = 1; nCount < m_SystemModel->columnCount(); nCount++)
   ui->DriveView->hideColumn(nCount);
}

// Displays Files in Detail View on Clicking Drive
void DetailView::on_DriveView_clicked(const QModelIndex &index)
{
QString sPath = m_SystemModel->fileInfo(index).absoluteFilePath();
ui->DriveListView->setRootIndex(m_SystemListViewModel->setRootPath(sPath));

m_SystemModel->setRootPath(QDir::currentPath());
m_SystemModel->setFilter(QDir::NoDotAndDotDot | QDir::AllDirs );
m_SystemListViewModel->setFilter( QDir::Files | QDir::NoDotAndDotDot );

QStringList m_list;
QDirIterator dirIt(sPath,QDirIterator::Subdirectories);

while (dirIt.hasNext())
{
    dirIt.next();
    if (QFileInfo(dirIt.filePath()).isFile())
    {
        if (QFileInfo(dirIt.filePath()).suffix() == "mp3" || QFileInfo(dirIt.filePath()).suffix() == "mpeg")
        {
            qDebug()<<dirIt.filePath();
            m_list<<dirIt.filePath();
            m_list.append(dirIt.filePath());
        }
    }

    m_SystemListViewModel->setNameFilters(m_list);
    m_SystemListViewModel->setNameFilterDisables(false);
}
} 
```

`DriveView`显示驱动器的树视图在哪里，而树`DriveListView`视图应该只显示 mp3 和 mpeg 文件。当我调试代码时，`qDebug()<<dirIt.filePath();`在选项卡中为我提供所有 .mp3 和 .mpeg 文件的路径，`Application Output`但不会在 DriveListView(treeview) 中显示它们。到目前为止，它仅显示驱动器中的文件，但驱动器内的子文件夹也有未显示的 mp3 文件。

这是供参考的图片： ![在此处输入图像描述](../Images/093e53778bac254f1e1f984d1baf645f.png)

请注意 SONGS 中有许多文件夹，其中存在 mp3 文件但不显示。

我在哪里犯错？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:41:31.710

可以尝试不使用`QFileSystemModel`你的`m_SystemListViewModel`，而是创建你自己的继承模型`QAbstractItemModel`，并`QStyledItemDelegate`在它上面使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:00:28.467

对我来说，调用似乎 `m_SystemListViewModel->setFilter( QDir::Files | QDir::NoDotAndDotDot );`会明确告诉 Qt 只显示文件。

[根据文档](http://doc.qt.digia.com/qt/qdir.html#Filter-enum)，您应该简单地通过`QDir::AllDirs`以前的过滤器。

> QDir::AllDirs - 列出所有目录；即不要将过滤器应用于目录名称。

# iphone - 在 flickr 上上传图像在 ios 中出现一些错误

> ID：13473690
> 
> 赞同：0
> 
> 时间：2012-11-20T12:57:16.880
> 
> 标签：iphone, ios

嘿，我想在 flickr 上分享图像和视频，我正在使用以下代码：- Flickr 委托方法，它是提供令牌和密钥。所以请给我一些有用的链接和教程，用于在 flickr 上上传图像或视频。

```
- (void)flickrAPIRequest:(OFFlickrAPIRequest *)inRequest didObtainOAuthRequestToken:(NSString *)inRequestToken secret:(NSString *)inSecret
    {
        // these two lines are important
        dele.flickrContext.OAuthToken = inRequestToken;
        dele.flickrContext.OAuthTokenSecret = inSecret;

        [self Callmethodforupload];

    } 
```

现在上传视频的方法是使用以下代码：-

```
 -(void)Callmethodforupload
    {

        NSString *secret=dele.flickrContext.OAuthTokenSecret;  //where secret is 7e5cfde9b0023627
        NSString *api_key=@"e1b54412cd5c081bfe2d8d53a1479f12";
        NSString *auth_token=dele.flickrContext.OAuthToken;     // where 72157632058292478-e2f72228fa0c9c67

        UIImage *image=[UIImage imageNamed:@"draft_lens19095926module160793919photo_1343911685a-a-z-a-.jpg"];

        NSData *imageData = UIImageJPEGRepresentation(image, 1.0);

        NSString *uploadSig = [NSString stringWithFormat:@"%@api_key%@auth_token%@", secret, api_key, auth_token];

        //uploadSig=[self md5:uploadSig];

        NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
        NSString *url = [NSString stringWithFormat:@"http://api.flickr.com/services/upload/"];
        [request setURL:[NSURL URLWithString:url]];
        [request setHTTPMethod:@"POST"];

        NSString *boundary = [NSString stringWithString:@"---------------------------7d44e178b0434"];

        [request addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField: @"Content-Type"];

        NSMutableData *body = [NSMutableData data];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        [body appendData:[@"Content-Disposition: form-data; name=\"api_key\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"%@\r\n", api_key] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        [body appendData:[@"Content-Disposition: form-data; name=\"auth_token\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];    
        [body appendData:[[NSString stringWithFormat:@"%@\r\n", auth_token] dataUsingEncoding:NSUTF8StringEncoding]];

        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Disposition: form-data; name=\"api_sig\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"%@\r\n", uploadSig] dataUsingEncoding:NSUTF8StringEncoding]];

        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"photo\"; filename=\"photo.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

        [body appendData:imageData];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [request setHTTPBody:body];

        NSHTTPURLResponse* urlResponse1 = nil; 
        NSError *error1 = [[NSError alloc] init];  
        NSData *responseData1 = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse1 error:&error1];  
        NSString *responseDatastring = [[NSString alloc] initWithData:responseData1 encoding:NSUTF8StringEncoding];

        NSLog(@"Response string %@ \n", responseDatastring);

    }

now i'm get response :-
 <?xml version="1.0" encoding="utf-8" ?>
<rsp stat="fail">
    <err code="98" msg="Invalid auth token" />
</rsp>

so please help me where i wrong 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:07:22.037

如果您正在寻找一个非常简单易用的上传解决方案，您可以使用[ShareKit](https://github.com/ShareKit/ShareKit)。只需将 ShareKit SDK 添加到您的应用程序，然后将项目共享到 flickr，如下所示：

```
#import "SHKFlickr.h" //include the service's header at the top of your class

...

// Create the item to share
SHKItem *item = [SHKItem image:image title:@"Look at this picture!"];

// Share the item
[SHKFlickr shareItem:item]; 
```

[在这里](http://getsharekit.com/docs/)查看完整的文档。

# php - 使用 php 从 zip 文件中读取 XML 文件

> ID：13473691
> 
> 赞同：0
> 
> 时间：2012-11-20T12:57:20.840
> 
> 标签：php, zip

我有一个 zip 文件，其中有一个名为 Objects 的文件夹。在 Objects 文件夹中，我有一个 Xml 文件。我需要使用 PHP 从该 xml 文件中获取数据。

我尝试了以下代码

```
$file = 'file.zip';
$path = pathinfo(realpath($file), PATHINFO_DIRNAME);
$zip = new ZipArchive;
$res = $zip->open($file);
if ($res === TRUE) {
  $zip->extractTo($path);
  $zip->close();
  echo "WOOT! $file extracted to $path";
} else {
  echo "Doh! I couldn't open $file";
} 
```

但它返回一个名为 Objects 的空文件夹。文件夹内的 xml 丢失。

谁能告诉我我错过了什么？

# scala - Scala 和依赖类型的类型检查

> ID：13473692
> 
> 赞同：0
> 
> 时间：2012-11-20T12:57:23.047
> 
> 标签：scala, testing, typechecking

给定 java 类“抽象凭证”并派生“EmailPassword”/“OAuth”类。

和接口 CredentialsStorage，具有适当的实现 EmailPasswordStorage 和 OAuthStorage

我需要用三元组创建某种数组：存储、有效凭据、无效凭据）

所以我从这个开始：

```
type T <: Credentials

type S <: CredentialsStorage[T]

private var testData: Array[(S, T, T)] = Array(
  (emailStorage, validEmailPasswd, new EmailPasswordCredentials("1", "2")),
  (oAuthStorage, validAuthToken, new OAuthCredentials("invalid auth token", OAuthService.FACEBOOK))
) 
```

但是这不会编译

```
error: type mismatch;
found   : storage.EmailPasswordStorage[credentials.EmailPassword]
required: CredentialsStorageTest.this.S
(emailStorage, validEmailPasswd, new EmailPasswordCredentials("1", "2")), 
```

我该如何解决这个问题，这里依赖/存在类型的正确定义是什么？

**UPD**我用元组类型本身的定义解决了这个问题：

```
type T[A] = (CredentialsStorage[A],A,A)

val testData : Array[T[_ <: Credentials]] = ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:11:19.377

`type T <: Credentials`定义一个抽象类型。您尚未定义`T`此实例中的内容。尝试包括`type T = credentials.EmailPassword`和`type S = storage.EmailPasswordStorage[T]`。

# c - scanf getchar 函数被跳过

> ID：13473693
> 
> 赞同：2
> 
> 时间：2012-11-20T12:57:23.060
> 
> 标签：c

一个非常简单的问题。为什么 scanf 在第一个 while 循环中被跳过。我已经通过使用 getchar() 进行了尝试，结果是相同的。getchar 被跳过。

如果你们不明白我在说什么，你可以尝试编译它，你们就会明白我在问什么。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct rec{
    int num;
    char pref[16];
    float point;
    struct rec* next;
}rec;

void dataInput(float*,char*);
rec* insertNode(rec*);

int main(){

    int i=1;
    rec* entr,*pt = NULL;
    entr = (rec*) malloc(sizeof(rec));
    entr->num = i;
    dataInput(&entr->point,entr->pref);
    entr->next = NULL;
    char key;
    i++;

    while(1){

        printf("Continue ? If YES press 'y',or NO press 'n'\n");
        key = getchar();
        if(key == 'n')break;
        else if(key == 'y'){
            if(!pt){
                pt = insertNode(entr);
            }else{
                pt = insertNode(pt);
            }
            dataInput(&pt->point,pt->pref);
            pt->num = i;
            i++;
            continue;
        }else{
            printf("Wrong key! Please Press again! \n");
        }

    }

    pt = entr;
    while(pt){

        printf("num : %d, pref :  %s, point: %.1f\n",
                pt->num,
                pt->pref,
                pt->point);
        pt = pt->next;
    }

    getchar();
    getchar();
    return 0;
}

void dataInput(float* point,char* pref){

    printf("Input Point\t : ");
    scanf("%f",point);

    printf("Input Pref\t : ");
    scanf("%s",pref);
}

rec* insertNode(rec* current){
    rec* newnode = (rec*)malloc(sizeof(rec));
    current->next = newnode;
    newnode->next = NULL;
    return newnode;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T12:59:36.083

这是因为将在输入缓冲区中`scanf`留下一个（结束线）符号。此符号将在此循环的第一次迭代中`'\n'`被消耗。`getchar``while(1)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T13:02:25.117

`getchar()`在输入缓冲区中留下一个换行符，由后续的 scanf() 读取。

您可以通过在 scanf 中使用前导空格来解决此问题：

```
scanf(" %c ...", &c,..); 
```

它告诉 scanf 忽略所有空白字符。或者`getchar()`在第一个 getchar() 之后使用另一个来使用换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-18T04:50:51.287

只需`getchar()`在 the 之后使用另一个`scanf()`来消耗换行符。

# macos - 在 dmg 中隐藏 .volumeicon.icns

> ID：13473697
> 
> 赞同：0
> 
> 时间：2012-11-20T12:57:41.600
> 
> 标签：macos, cocoa, dmg

我想在 DMG 文件中隐藏 .volumeicon.icns。可能吗？

我在终端应用程序上试试这个

1.  默认写入 com.apple.finder AppleShowAllFiles TRUE
2.  killall 查找器

但它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:02:30.533

如果它以隐藏开头`.`，则设置为显示隐藏文件的是您的 Finder，其中

`defaults write com.apple.finder AppleShowAllFiles FALSE`

您将隐藏所有隐藏文件，但在另一台机器上

`defaults write com.apple.finder AppleShowAllFiles TRUE`

它仍然会被看到。

* * *

没有办法真正隐藏它，我所做的就是将我所有的隐藏文件移到 dmg 内当前可见区域之外。

这样

*   如果 Finder 设置为不显示隐藏文件，您将看不到它
*   如果 Finder 设置为显示隐藏文件，您将看到一个滚动条（在 10.7+ 上是透明的）

据我所知，没有更好的方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:43:55.593

`SetFile -a V .volumeicon.icns`

用于`xcrun SetFile`运行 Xcode 安装提供的最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:34:31.847

不应该是：

```
defaults write com.apple.finder AppleShowAllFiles FALSE
killall Finder 
```

# java - 寄存器分配中的预着色节点-每种颜色最多一种？

> ID：13473703
> 
> 赞同：2
> 
> 时间：2012-11-20T12:57:50.743
> 
> 标签：java, assembly, compiler-construction, x86, register-allocation

我正在研究有关编译器中寄存器分配的主题。一种广泛使用的寄存器分配算法是通过简化的迭代图着色。在Andrew W. Appel所著的*[Modern Compiler Implementation in Java一书中，关于寄存器分配的第 11 章指出：](https://rads.stackoverflow.com/amzn/click/com/052182060X)*

> 干扰图中的每个节点代表一个临时值。
> 
> [...]
> 
> 一些临时对象是*预着色*的——它们代表机器寄存器。例如，当跨模块边界与标准调用约定接口时，前端会生成这些。对于用于某些特定目的的每个实际寄存器，例如帧指针、标准参数 1 寄存器、标准参数 2 寄存器等，`Codegen`或`Frame`模块应使用永久绑定的特定临时寄存器到那个寄存器。**对于任何给定的颜色（即，对于任何给定的机器寄存器），应该只有一个该颜色的预着色节点。**

我不完全理解上面引用中的指示行。我可以想象有多个临时对象将使用相同的寄存器预着色的情况。例如，x86`mul`指令将结果存储在`EDX:EAX`寄存器对中，但函数也在`EAX`寄存器中返回值。所以我有不同的临时工有相同的颜色。我认为那些不同的用途`EAX`必须是不同的节点，还是我错了？

*有人可以解释突出显示的句子，或者举一些例子吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:30:11.493

在本书中，想法是，您将拥有一个临时 EAX，您可以将其`mul`用于返回值和用于返回值。当某个值需要在给定寄存器中时，您会生成从包含该值的临时值到表示该寄存器的临时值的移动；类似地，一旦一个值到达特定寄存器（例如，一个函数返回），您将生成从寄存器的临时到将从此保存该值的临时的移动。参见书中的图 11.7。

# android - pom.xml 文件中的错误

> ID：13473707
> 
> 赞同：1
> 
> 时间：2012-11-20T12:58:03.550
> 
> 标签：android, eclipse, maven, eclipse-plugin, maven-3

我将 Maven 3.0.4 与 Eclipse Indigo 一起用于 Android 项目。但我无法编译我的代码，因为 pom.xml 文件中有错误。

错误是：

```
Project build error: Unresolveable build extension: Plugin com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.0.2 or one of its dependencies could not be resolved: Failed to collect dependencies for com.jayway.maven.plugins.android.generation2:android-maven-plugin:jar:3.0.2 ()

Project build error: Unknown packaging: apk 
```

我已经从 Eclipse MarketPlace 下载了 Android 配置器插件。

找不到出路。对此的任何帮助将不胜感激。

# windows - MSYS shell 保持脚本文件打开，防止修改

> ID：13473713
> 
> 赞同：3
> 
> 时间：2012-11-20T12:58:30.750
> 
> 标签：windows, shell, sh, file-descriptor, msys

通常在运行 shell 脚本时，shell 会在整个执行过程中保持脚本文件处于打开状态。在 Unix 系统上，这不是问题。

但是，Windows 会阻止对以这种方式打开的文件进行修改。这意味着如果脚本在 MSYS 中运行，我需要先终止 shell，然后才能修改脚本。这很烦人，因为`git pull`或`svn up`将失败。

我正在寻找该问题的解决方案，例如通过我可以放入`#!/bin/sh`行中的特定选项，或者某种可能导致脚本将自身复制到安全位置并执行复制的外壳单线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-30T18:43:28.380

您可以让脚本重新执行自身。像这样拆分它：

```
#!/bin/sh
if test -z "$MYSCRIPT_REEXEC"; then
    : stuff you do before git pull
    exec env MYSCRIPT_REEXEC=1 sh -c "git pull; . '$0'"
fi
: stuff you do after git pull 
```

这是一个简单的案例，`$0`可能不包含撇号，并且前半部分设置的参数和任何变量都无法访问。很难给出一个更好的通用示例——也许，如果我能看到原始脚本？

如果这*仍然*不起作用，试试这个：

```
#!/bin/sh
if test -z "$MYSCRIPT_REEXEC"; then
    : stuff you do before git pull
    env MYSCRIPT_REEXEC=1 sh -c "sleep 1; git pull; . '$0'" &
    exit 0
fi
: stuff you do after git pull 
```

但是，在这种情况下，返回码*也*都是错误的，等待脚本的任何东西也是如此。

# php - PHP PDF 在 IE 中导致 Microsoft Visual C++ 运行时错误

> ID：13473715
> 
> 赞同：0
> 
> 时间：2012-11-20T12:58:41.223
> 
> 标签：php, visual-c++, pdf, runtime-error

我有一个网站，它构建了一些 pdf，并通过将它们保存到服务器然后将浏览器重定向到文件来将它们提供给浏览器。

当您尝试在 Internet Explorer 中访问这些 pdf 文件时，浏览器会崩溃并显示：

Microsoft Visual C++ 运行时库

程序：iexplorer.exe

此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

pdf 是使用 fpdf 构建的，我在下面包含了函数的 serve 部分

```
//set encryption
    $pdf->setEncryption('',$pdfPassword,array('print'));

    #create the pdf and stream it to the page
    $pdfcode = $pdf->ezOutput(1);
    //$pdfcode = str_replace("\n","\n",htmlspecialchars($pdfcode));
    $filename = $info['Certificate_Number'].time().".pdf";
    $finalPdf = $_SERVER['DOCUMENT_ROOT']."/downloads/certificates/".$filename;
    $pdfFile = fopen($finalPdf, 'w');
    fwrite($pdfFile, $pdfcode);
    header('location: /downloads/certificates/'.$filename); 
```

# sql - 使文本字段成为子报表的链接

> ID：13473722
> 
> 赞同：1
> 
> 时间：2012-11-20T12:58:58.867
> 
> 标签：sql, sql-server, crystal-reports

根据我数据库中的 SQL 存储过程，我根据用户选择构建了一个具有多个向下钻取选项的 Crystal Report。

我有一个子报告，它取决于用户单击的变量。

但是，我想知道是否可以使用文本对象，而不是从查询中读取的值，我试图摆弄“格式化文本”并使其成为超链接，我认为我在正确的轨道上但不确定在哪里从这里出发；

IE 数据上下文等...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:19:04.933

右键单击主设计窗口中的子报表并选择**更改子报表链接...** 将子报表链接设置为链接到公式字段。这将允许您使用任何计算值作为子报告链接。

![更改子报表链接](../Images/5fc21c5f81fcd2061cda15c698d3cc4a.png) ![设置子报表链接](../Images/5c9c91a8a9c91c3c974ebac6f26d8b1a.png)

# jquery - 如何使用ajax日历检查日期不大于今天？

> ID：13473728
> 
> 赞同：0
> 
> 时间：2012-11-20T12:59:16.973
> 
> 标签：jquery, asp.net, ajax, date, compare

我在文本框上应用了 ajax 日历并对其选择应用了以下检查

```
 function checkDate(sender, args) {
        if (sender._selectedDate > new Date()) {
            alert("You cannot select a day future than today!");
            sender._selectedDate = new Date();
            // set the date back to the current date
            sender._textbox.set_Value(sender._selectedDate.format(sender._format))
        }
    } 
```

我的html代码是：

```
 <asp:TextBox ID="txtDOB" Width="140px" MaxLength="50" runat="server"></asp:TextBox>
                            <ajaxctrl:calendarextender onclientdateselectionchanged="checkDate" id="cale_txtDOB"
                                runat="server" targetcontrolid="txtDOB" format="MM/dd/yyyy" cssclass="cal_Theme1">
                            </ajaxctrl:calendarextender> 
```

它工作正常，但如果我手动输入日期，那么这不起作用，我怎样才能让两种方式都为我工作。

意味着如果用户手动输入它，那么它也会检查日期，当用户从日历中选择它时，它也会验证日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:13:39.687

这是您修改后的 javascript 函数：

```
 function checkDate(sender, args) {
        //alert(sender._selectedDate > new Date());
        if (sender._selectedDate > new Date()) {
            alert("You cannot select a day future than today!");
            sender._selectedDate = new Date();
            // set the date back to the current date
            sender._textbox.set_Value(sender._selectedDate.format(sender._format))
            return false;
        }
    } 
```

这是一个新的 javascript 函数，只需将其添加到您的函数下方：

```
 function checkDate1(txt) {
        if (new Date(txt.value) > new Date()) {
            alert("You cannot select a day future than today!");
            return false;
        }
    } 
```

现在转到页面的 Page_Load 事件，并添加以下代码行：

```
 this.txt.Attributes.Add("onblur", "checkDate1(this);"); 
```

您可以更改这些函数名称，因为我刚刚为您写了这个有点匆忙。也没有太多时间来测试它。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:30:56.663

您是否尝试过[jQuery Change](http://api.jquery.com/change/)方法？

```
$('#textBoxName').change( function() {
  if ($(this).val() > new Date()) {
     alert("You cannot select a day future than today!");
       var today=new Date();
       $('#textBoxName').val(today);
  }
}); 
```

# ios5 - 使用 api 在 IOS5 中获取 Twitter 直接消息

> ID：13473733
> 
> 赞同：1
> 
> 时间：2012-11-20T12:59:23.930
> 
> 标签：ios5, twitter, twitter-oauth

任何人如何使用 api 在 IOS 5 中获取 Twitter 直接消息。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T09:50:09.057

使用他们的 id 作为参数向您的关注者发送直接消息：

```
ACAccountStore *account = [[ACAccountStore alloc] init];
ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

// Request access from the user to access their Twitter account
[account requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
    // Did user allow us access?
    if (granted == YES)
    {
        // Populate array with all available Twitter accounts
        NSArray *arrayOfAccounts = [account accountsWithAccountType:accountType];

        // Sanity check
        if ([arrayOfAccounts count] > 0) 
        {
            // Keep it simple, use the first account available
            ACAccount *acct = [arrayOfAccounts objectAtIndex:0];

            // Build a twitter request
            NSURL *url = [NSURL URLWithString:@"https://api.twitter.com/1/direct_messages/new.json"];

            NSMutableDictionary *params;

            for (int i =0 ; i <[friends_SelectedIDArray count]; i++) {

                params = [[NSMutableDictionary alloc] init];
                //[params setObject:@"@meenukatal" forKey:@"screen_name"];
                [params setObject:[friends_SelectedIDArray objectAtIndex:i] forKey:@"user_id"];
                //need to change sendimg message every time do not send same message //

                [params setObject:text_Field.text  forKey:@"text"];

                TWRequest *postRequest = [[TWRequest alloc]
                                          initWithURL:   url
                                          parameters:    params
                                          requestMethod: TWRequestMethodPOST
                                          ];

                // Post the request
                [postRequest setAccount:acct];

                // Block handler to manage the response
                [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                    NSLog(@"Twitter response, HTTP response: %i", [urlResponse statusCode]);
                    NSLog(@"Response Data\n%@", responseData);

                    if ([urlResponse statusCode] == 200) {

                        UIAlertView *alertmessage = [[UIAlertView alloc]initWithTitle:@"Message" message:@"You have successfully posted the message! " delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
                        [alertmessage show];

                    }

                    else {

                        UIAlertView *alertmessage = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"There might be some problem please try later! " delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
                        [alertmessage show];

                    }

                    if (!error)
                        NSLog(@"%@", [error description]);
                }];
            }
        }
    }
}]; 
```

# r - 安装 gdata 失败（在 64 位 Linux 上）

> ID：13473741
> 
> 赞同：3
> 
> 时间：2012-11-20T13:00:00.497
> 
> 标签：r

我正在研究一个使用 gplots 库的 R 脚本。因此在脚本的某个时刻

```
library(gplots) 
```

叫做。使用 32 位 linux 机器（Linux 和 3.2.0-33-generic-pae 52-Ubuntu SMP i686 GNU/Linux，Ubuntu 12.04）非常有效。
但是，我尝试在 64 位机器（Linux sim 2.6.38-15-server 66-Ubuntu SMP x86_64 GNU/Linux;Ubuntu 11.04）上运行脚本，现在它抛出错误：

```
Error in library(gplots) : there is no package called 'gplots'
Calls: generateHeatmap -> library
Execution halted 
```

因此，当我尝试安装 gplots 时，它会引发另一个错误：

```
> install.packages('gplots', type="source", dependencies=T)
ERROR: dependency ‘gdata’ is not available for package ‘gplots’
* removing ‘/home/schaller/R/x86_64-pc-linux-gnu-library/2.12/gplots’
... 
```

因此，我正在尝试安装 gdata：

```
>install.packages('gdata', type="source", dependencies=F)
Installing package(s) into ‘/home/schaller/R/x86_64-pc-linux-gnu-library/2.12’
(as ‘lib’ is unspecified)
Warning message:
In getDependencies(pkgs, dependencies, available, lib) :
  package ‘gdata’ is not available 
```

我在网上搜索了可能的解决方案。我找不到任何东西。但是，我读到 gdata 在 64 位模式下的当前 R 版本上被破坏。有人发布了一个修补过的 repo [1]，但我不能使用这个 repo 来安装 gdata。所以这意味着现在不可能在 64 位机器上使用这个包？

[1] - [https://stat.ethz.ch/pipermail/r-help/2010-April/236966.html](https://stat.ethz.ch/pipermail/r-help/2010-April/236966.html)

更多信息：R 版本 2.12.1

* * *

解答： 将 r-base 更新到当前版本解决了这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T16:16:07.940

你应该能够做到

```
$ sudo apt-get install r-cran-gplots 
```

`gdata`之后，两者`gplots`都从 Ubuntu 存储库安装。

当然，您也可以使用您喜欢的任何包管理前端。

# python - 在python中集中配置

> ID：13473743
> 
> 赞同：0
> 
> 时间：2012-11-20T13:00:14.743
> 
> 标签：python

目前我的配置选项（常量/变量）有点零散，我在 config.py 中有大部分，但有些在顶部的 myfile.py 中。

```
/utilities/myfile.py
/config.py 
```

您可能会在我的 myfile.py 中找到的一个示例是：

```
TEMP_DIR = '/tmp' 
```

如果我想将此定义从 myfile.py 移动到我的 config.py 中，但仍然在 myfile.py 中使用它，我该怎么做？

我是 python 新手，但我认为它与 myfile.py 顶部的内容类似

```
from config 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:05:16.630

在`myfile.py`你可以放

```
import config 
```

`TEMP_DIR`并访问

```
config.TEMP_DIR 
```

前提是包含的目录`config.py`在您的[PYTHONPATH](http://docs.python.org/2/using/cmdline.html#environment-variables)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:06:42.150

**变体 1**

```
from config import * 
```

这会污染 myfile.py 中的整个命名空间

**变体 2**

```
from config import foo, bar, baz 
```

必须提到 myfile.py 中使用过的值。

**变体 3**

```
import config
...
x = config.foo 
```

每个值都需要参考配置。

您的选择，但我更喜欢变体 3。要在 myfile.py 中*查看*config.py，您必须编辑*PYTHONPATH*或使用相对导入：

```
from ... import config 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:22:58.537

另一种方法是使用`execfile`. 这将使使用不同的配置文件变得更容易（例如在命令行上指定要使用的配置文件）。

例子：

```
# myconfig.py
TEMP_DIR = "/tmp/"

# myotherconfig.py
TEMP_DIR = "/tmp/foo"

# program.py (the main program)
import sys
config = {}
execfile(sys.argv[1], config)
print config["TEMP_DIR"] 
```

调用程序：

```
$ python program.py myconfig.py
/tmp/
$ python program.py myotherconfig.py
/tmp/foo 
```

相关：[Python 配置文件：有什么文件格式推荐吗？INI格式还合适吗？看起来很老派](https://stackoverflow.com/questions/8225954/python-configuration-file-any-file-format-recommendation-ini-format-still-appr/8226090#8226090)

# android - 多点触控不适用于 Android

> ID：13473753
> 
> 赞同：-2
> 
> 时间：2012-11-20T13:01:00.493
> 
> 标签：android, event-handling, touch

我的触摸监听器有问题，实际上无法正常工作。

```
 @Override
public boolean onTouchEvent(MotionEvent event) {

    touchControll.processTouchEvent(event); //should do everything!
    invalidate();
    return true; 
} 
```

Methode processTouchevent 只是将事件监视放在它所在的位置并处理它。因此，如果触摸在手柄内部，它会处理手柄“动作”。但是，如果我现在想处理一个 hitButton 事件，它不会做出反应。

例子

```
 public void processHitButtonTouch(MotionEvent event){
    int touchPosX = (int) event.getX();
    int touchPosY = (int) event.getY();
    if(event.getAction() == MotionEvent.ACTION_DOWN)
        if(touchPosX > Config.BLOCKSIZE*37 && touchPosY > Config.BLOCKSIZE*3 && touchPosY < Config.BLOCKSIZE*7){
            this.hitButton.buttonStatus = Pressed.PRESSED;
        }
    } 
```

在每个 MotionEvent.ACTION_UP 我重置整个东西是这样的：

```
 if(event.getAction() == MotionEvent.ACTION_UP){
        joyPad.status = Status.IDLE;
        charac.setStatus(Status.IDLE);
        this.hitButton.buttonStatus = Pressed.UNPRESSED;
    } 
```

如果它实际上使用 Loggincat 处理了超过 1 个事件并且它确实处理了（2 次触摸 2 次 downevent 记录！），我并列。但它根本不像我在这里做的那样工作。我做错了什么？！

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:22:37.603

在 Android 中，触摸事件仅被一个视图捕获，因此如果您的 hitButton 在您将手指放在 Joypad 上时没有反应，这是正常的。

要使用多点触控，您必须实现一个全局视图，其中包含所有按钮（手柄、点击按钮 ...）。所以这个视图捕获事件并将它传递给手柄的 touchEventListener 或 hitButton 的监听器。

编辑：这里有 2 个操纵杆的例子

[http://code.google.com/p/mobile-anarchy-widgets/source/browse/trunk/Widgets/src/com/MobileAnarchy/Android/Widgets/Joystick/DualJoystickView.java?r=30](http://code.google.com/p/mobile-anarchy-widgets/source/browse/trunk/Widgets/src/com/MobileAnarchy/Android/Widgets/Joystick/DualJoystickView.java?r=30)

Edit2：一个很好的教程

[http://android-developers.blogspot.fr/2010/06/making-sense-of-multitouch.html](http://android-developers.blogspot.fr/2010/06/making-sense-of-multitouch.html)

# http - HTTP | 语言标签与语言范围

> ID：13473755
> 
> 赞同：1
> 
> 时间：2012-11-20T13:01:10.763
> 
> 标签：http

通过阅读[HTTP 规范](https://www.rfc-editor.org/rfc/rfc2616#section-14.4)，我遇到了术语“语言标签”和“语言范围”。该标准将这两个实体之间的区别定义如下：

> 如果语言范围完全等于标记，或者如果它完全等于标记的前缀，则语言范围匹配语言标记，这样前缀后面的第一个标记字符是“-”。

但是，该文档没有通过任何示例来扩充此声明。那么，语言范围与以下 HTTP 标头字段中的语言标签有何不同：

```
Accept-Language: en, en-gb, en-us 
```

如果他们在这里没有区别，你能举出他们做的任何例子吗？

**更新**

* * *

我将用以下方式改写上述引用：

> 如果一种语言的标签或标签的前缀完全等于在 Accept-Language 字段中指定的语言范围，则认为该语言是可接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:15:22.483

语言标签是特定语言的标识符。以特定语言编写的网页可能会使用该语言的标签进行标记，例如`en-US`美国英语（与其他英语方言相反，如英国英语或澳大利亚英语）。`en`通常也是英语的有效语言标签。

语言*范围*是您的浏览器表示它更愿意从网络服务器接收的内容。它是一个范围，因为它可能与资源的语言不完全匹配：如果您的浏览器说它喜欢语言范围`en`，这意味着`en`, `en-US`,`en-UK`都是*可以*接受的——范围`en`与确切的标签匹配`en`，以及所有以`en-`.

如您所见，`en`既是语言标签*，又*是语言范围。两者的区别在于它们的用法：标签标识内容的特定语言并从 Web 服务器发送到客户端，而范围标识语言偏好并从客户端发送到 Web 服务器。

*请求标头中的所有*值`Accept-Language`都是语言范围。`Content-Language` *响应*标头中使用语言标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:12:37.373

`en`是一个范围，它与标签匹配，`en-gb`因为它完全等于`en-gb`（那个前缀是`en`）的前缀，并且前缀 ( ) 后面的第一个字符`en`是`-`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:16:48.637

RFC 确实提供了一个示例。如果您查看 Accept-Language 请求标头的规范：

> Accept-Language 请求标头字段类似于 Accept，但限制了作为对请求的响应首选的自然语言集。语言标签在[第 3.10 节](https://www.rfc-editor.org/rfc/rfc2616#section-3.10)中定义。

> ```
>  Accept-Language = "Accept-Language" ":" 
> ```

```
 1#( language-range [ ";" "q" "=" qvalue ] ) 
```

> ```
>  language-range  = ( ( 1*8ALPHA *( "-" 1*8ALPHA ) ) | "*" ) 
> ```

> [...]

> ```
>  Accept-Language: da, en-gb;q=0.8, en;q=0.7 
> ```

> [...] “我更喜欢丹麦语，但会接受英式英语和其他类型的英语。”

第 3.10 节提到：

> 语言标签的名称空间由 IANA 管理。

所以所有的**语言标签都**[在这里](http://www.iana.org/assignments/language-subtag-registry)注册。输入 RFC 2616：

> **语言范围**（*如在 Accept-Language 标头中使用的*）匹配**语言标签**，如果它完全等于标签，或者如果它完全等于标签的前缀，这样前缀后面的第一个标签字符是“-”。

所以，`en`在`Accept-Language: en`比赛`en-gb`和`en-US`. 如果客户端希望单个范围有多个匹配项，则应指定子标签并为`;q=`每个子标签分配一个质量值 ( ) 以获得最佳结果。

如果没有，服务器将决定返回哪个可用的表示。

# asp.net - 浏览器将 cookie 保存在错误的文本框中

> ID：13473759
> 
> 赞同：0
> 
> 时间：2012-11-20T13:01:41.073
> 
> 标签：asp.net, html, browser, passwords

如何强制浏览器保存登录 cookie？我想要的是当用户登录时，浏览器问他：“你想让 IE 记住...的密码吗？是/否”（不是要记住并自动登录的 cookie，我已经实现了）

另一个问题是，在我的注册页面中，浏览器总是保存确认电子邮件的字段（文本框）——'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:05:01.377

> 如何强制浏览器保存登录 cookie？

你不能。你可以提供一个cookie。浏览器可能会或可能不会被配置为接受它。

> 我想要的是当用户登录时，浏览器问他：“你想让 IE 记住...的密码吗？是/否”

那不是饼干。那是表单自动完成。为您的元素使用明显的英文名称，`<input>`以便浏览器更有可能将它们识别为凭据字段（`name="username"`例如`name="password"`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:03:32.407

这完全取决于浏览器本身，而不是您的代码。

浏览器能够保存您的登录详细信息并识别您何时返回该站点并预先填写详细信息。

与其他输入类似，它们会被浏览器自动识别并填写。

检查您的浏览器设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:03:54.873

对于您的第一个问题，如果您有输入 type="password" 字段，它应该会自动工作。

# performance - 用于检查内存泄漏的 Perfmon 计数器

> ID：13473761
> 
> 赞同：21
> 
> 时间：2012-11-20T13:01:57.263
> 
> 标签：performance, memory-leaks, performancecounter, perfmon, memory-leak-detector

我想检查我的服务中的内存泄漏问题。我尝试了以下一组性能计数器。

1.  .NET CLR 内存\# 所有堆中的字节数
2.  .NET CLR 内存\第 2 代堆大小
3.  .NET CLR 内存\# GC 句柄
4.  .NET CLR 内存\# 的固定对象
5.  .NET CLR 内存\# 总提交字节数
6.  .NET CLR 内存\# 总保留字节数
7.  .NET CLR 内存\大对象堆大小

我从[这里提到了上面的集合](http://dotnetdebug.net/2005/06/30/perfmon-your-debugging-buddy/)

还参考了以下集合：

1.  内存/可用字节
2.  内存/提交的字节
3.  处理/私有字节
4.  进程/页面文件字节
5.  进程/句柄计数

我从[这里提到了上面的集合](http://vmin.wordpress.com/2012/05/20/memory-leaks-finding-a-memory-leak-in-microsoft-windows/)

是否有任何参数/标准或任何其他最佳方法来识别内存泄漏的性能计数器？
有人可以建议我设置一组计数器来检查内存泄漏吗？或以上设置涵盖内存泄漏？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-04T14:07:56.053

要使用性能监视器检测内存泄漏，请监视以下计数器：

1.  Memory/Available Bytes 计数器可让您查看可用内存的总字节数。该值通常会波动，但如果您的应用程序存在内存泄漏，它会随着时间的推移而减小。
2.  如果发生内存泄漏，Memory/Committed Bytes 计数器将稳步上升，因为随着可用内存字节数的减少，已提交字节数会增加。
3.  Process/Private Bytes 计数器显示专门为特定进程保留的字节数。如果发生内存泄漏，此值将趋于稳定上升。
4.  Process/Page File Bytes 计数器显示页面文件的大小。Windows 使用虚拟内存（页面文件）来补充机器的物理内存。当机器的物理内存开始填满时，内存页面被移动到页面文件中。即使在具有大量内存的机器上使用页面文件也是正常的。但是，如果页面文件的大小稳步增加，那就是发生内存泄漏的好兆头。
5.  我还想提一下 Process/Handle Count 计数器。应用程序使用句柄来识别它们必须访问的资源。如果发生内存泄漏，应用程序通常会创建额外的句柄来识别内存资源。因此，句柄计数的增加可能表明内存泄漏。但是，并非所有内存泄漏都会导致句柄计数增加。

*[来源](http://bshwjt.blogspot.co.uk/2010/08/how-to-find-memory-leak-using.html)*

以我的经验，这是准确的。

我还建议您参阅 Microsoft 员工 Tess 撰写的 Microsoft Advanced Debugging 博客。谁建议以下柜台。我发现以上内容足以表明存在内存泄漏，但我相信 Tess 的说明可以更深入地了解该问题。

[调试演示 - 内存回顾](https://docs.microsoft.com/en-gb/archive/blogs/tess/net-debugging-demos-lab-3-memory-review)

*   .NET CLR 内存/# 所有堆中的字节数
*   .NET CLR 内存/大对象堆大小
*   .NET CLR 内存/第 2 代堆大小
*   .NET CLR 内存/第 1 代堆大小
*   .NET CLR 内存/第 0 代堆大小
*   处理/私有字节
*   进程/虚拟字节

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-26T01:27:44.123

有更好的工具可用于简化内存泄漏测试，例如[RedGate ANTS Memory Profiler](https://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)和[JetBrains dotMemory Profiler](https://www.jetbrains.com/dotmemory/)。

但是，如果您想使用性能计数器， [本文](http://www.codeproject.com/Articles/42721/Best-Practices-No-Detecting-NET-application-memo)将介绍如何使用性能计数器来测试内存泄漏。

请记住，垃圾收集不会在某些实例处理后立即释放内存。它已被优化为仅在内存压力时触发和释放内存。因此，如果您想测试内存泄漏，您应该在获取计数器读数之前手动执行垃圾收集。

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

[![在此处输入图像描述](../Images/3d47d2a6af356cd8477d09e93237b1ed.png)](https://i.stack.imgur.com/OvLUj.jpg)

# performance - bootsrap js减慢IE中的网页

> ID：13473765
> 
> 赞同：2
> 
> 时间：2012-11-20T13:02:12.320
> 
> 标签：performance, internet-explorer, twitter-bootstrap, slowdown

我使用 twitter bootstrap 在我的网站上开发了一个页面。其中我已经包含了下面提到的引导 js。

```
bootstrap-transition.js
bootstrap-alert.js
bootstrap-modal.js
bootstrap-dropdown.js
bootstrap-scrollspy.js
bootstrap-tab.js
bootstrap-tooltip.js
bootstrap-popover.js
bootstrap-button.js
bootstrap-collapse.js
bootstrap-carousel.js
bootstrap-typeahead.js 
```

此页面在 FF 和 chrome 中运行良好。当我在 IE 中打开该页面并选中任何复选框时，选中/取消选中该复选框需要一些时间。同样的事情发生在 dtropwown 的情况下，展开/折叠下拉菜单需要一些时间。

所以我一一删除了所有引导 js，它开始提高性能。并且当所有引导 js 被删除时，它开始像其他浏览器一样正常工作。

那么有什么办法可以解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T06:36:40.317

我`jquery-1.8.1.min.js`在我的应用程序中使用。

我通过替换解决了我的`jquery-1.8.1.min.js`问题`jquery-1.8.3.min.js`

现在它在包括 IE 在内的所有浏览器中都能正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T16:39:47.650

我怀疑 JS 的数量是什么让你慢下来。例如，单击[官方 Bootstrap 文档页面上的](http://twitter.github.com/bootstrap/javascript.html#buttons)按钮时，您是否获得了同样糟糕的性能？我不是。

相反，我怀疑您要么与其他 JS 库发生冲突，要么您的标记格式错误，导致其中一个 Bootstrap 插件将异常数量的回调附加到页面。

测试后者的一种方法是修改`jQuery.on`它以在调用时打印到控制台。**在jQuery**加载之后，但在 Bootstrap 库之前运行以下命令可以解决问题：

```
var old = jQuery.fn.on;
jQuery.fn.on = function (types) {
  console.log(types);
  return old.apply(this, arguments);
}; 
```

在 Bootstrap 文档中注册了 50 个侦听器，主要是点击。

否则，在 JS 的数量上，您应该使用 Bootstrap 的聚合和缩小版本，就像[BootstrapCDN](http://www.bootstrapcdn.com/)提供的 ( [bootstrap.min.js](//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js) )，而不是所有这些单独的文件。使用那些正在开发中的；在性能测试/生产中使用缩小。

# svn - 在服务器上托管基于 Web 的 SVN 解决方案

> ID：13473766
> 
> 赞同：3
> 
> 时间：2012-11-20T13:02:21.083
> 
> 标签：svn, hosting

我需要设置一个基于 Web 的 SVN 服务器。

像任何其他 Subversion 一样，我想在我的实时服务器上制作它，仅供私人使用。

您能否建议任何基于 Web 的 SVN，以便我可以安装和测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:48:43.947

如果你在 Windows 上，最快最好的路径是[VisualSVN Server](http://www.visualsvn.com/server/)

# php - 如何将表单数据发送到另一台服务器并捕获输出并将其显示为消息

> ID：13473768
> 
> 赞同：1
> 
> 时间：2012-11-20T13:02:29.103
> 
> 标签：php

我想将表单数据提交到另一个 url（另一个服务器上的网站）捕获成功或失败消息（服务器输出）并在表单网页上回复。

我想在不让用户知道数据实际上已发布到另一个网站的情况下实现这一点。

```
 echo "
      <html>
       <body>
       <form action ='http://www.example.com/processor.php' method ='POST' >
        <input type ='hidden' value ='official' name = 'name'/>
          <input type ='hidden' value ='official2' name = 'email'/>
          <input type ='hidden' value ='official3' name = 'contactTime'/>
          <label for 'other info'> Enter details here </label> <br/>
      <textarea rows='4' cols='50' name ='other info' maxlength='200'></textarea>

       <input type ='hidden' value ='official4' name = 'legalId'/> 
     </br>
      <input type = 'submit' name = 'submit' value ='Send'/>
  </form>
  </body>
 </html>
"; 
// I want to send the data to http://example.com/processor.php
  ?> 
```

我已成功将此数据发送到[http://example.com/processor.php](http://example.com/processor.php) ，页面上显示成功整数“2”。我不希望我的网站访问者看到此页面。我想从另一台服务器捕获这个成功整数，并将其作为消息显示给我自己的网站上的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:10:07.943

不要直接将表单提交到[http://example.com/processor.php](http://example.com/processor.php)。将表单提交到您自己的文件中，该文件应执行以下操作：

1.  收集您提交的帖子数据
2.  将您使用[CURL](http://php.net/manual/en/book.curl.php)收集的数据发布到[http://example.com/processor.php](http://example.com/processor.php)
3.  CURL 应该返回远程服务器生成的响应页面给你
4.  从返回的页面中提取结果
5.  随心所欲地使用它们（显示它们，将它们存储在数据库中等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:10:29.083

我认为一个好主意是查看 cURL，您可以将数据接受到 PHP 表单中，然后使用 cURL 使用 $_POST 数据调用远程站点，读取信息。

这里有一个很好的教程：http: [//davidwalsh.name/curl-post](http://davidwalsh.name/curl-post)

# javascript - 在打字稿中拆分多个文件时，我无法让模块内部的模块工作

> ID：13473772
> 
> 赞同：1
> 
> 时间：2012-11-20T13:02:37.497
> 
> 标签：javascript, typescript

相关问题：

[我之前的问题 1](https://stackoverflow.com/questions/13468451/is-there-any-advantage-to-using-classes-with-static-functions-versus-modules/13468894#13468894)

[我之前的问题2](https://stackoverflow.com/questions/13468166/can-i-declare-a-static-private-function-in-typescript/13468255#13468255)

我最近将我的代码从具有静态方法的类更改为使用模块和导出函数的代码。这是我以前的一个例子：

```
Inner 1.ts
/// <reference path="../typescript/reference.ts" />
module Outer {
    class Inner1 {
        static mvcOnFailure(message: string) {
            var a = 1;
        }
    }
}
Inner 2.ts
/// <reference path="../typescript/reference.ts" />
module Outer {
    class Inner2{
        static mvcOnFailure(message: string) {
            var b = 1;
        }
    }
} 
```

这编译为 .js 没有问题。我有一个名为 Admin 的外部模块，然后在内部有另一个名为 Dialog 的模块和另一个名为 Grid 的模块。但是，当我尝试使用私有静态函数时，我注意到虽然在智能感知中函数旁边出现了一个锁，但该函数并不是真正私有的并且可以访问。为了解决这个问题，有人建议我应该尝试使用模块而不是类，所以我编码如下：

```
Inner 1.ts
/// <reference path="../typescript/reference.ts" />
module Outer {
    export module Inner1 {
        export function mvcOnFailure(message: string) {
            var a = 1;
        }
    }
}

Inner 2.ts
/// <reference path="../typescript/reference.ts" />
module Outer {
    export module Inner2{
        export function mvcOnFailure(message: string) {
            var b = 1;
        }
    }
}

reference.ts
/// <reference path="../Outer/Inner2.ts" />
/// <reference path="../Outer/Inner1.ts" /> 
```

编译后我遇到了一个大问题，因为现在每个 .js 都具有外部模块中所有内容的所有功能，如下所示：

```
Inner 1.js

var Outer;
(function (Outer) {
    (function (Inner1) {
        function mvcOnFailure(message) {
            var a = 1;
        }
        Inner1.mvcOnFailure = mvcOnFailure;
    })(Outer.Inner1 || (Outer.Inner1 = {}));
    var Inner1 = Outer.Inner1;
})(Outer || (Outer = {}));

var Outer;
(function (Outer) {
    (function (Inner2) {
        function mvcOnFailure(message) {
            var b = 1;
        }
        Inner2.mvcOnFailure = mvcOnFailure;
    })(Outer.Inner2 || (Outer.Inner2 = {}));
    var Inner2 = Outer.Inner2;
})(Outer || (Outer = {})); 
```

是时候放弃这个想法了，就好像我在多个 .ts 文件中有同一个模块的部分功能，然后它添加了 .js 中的所有内容。

更新：

不确定这一点。现在看来问题可能与我安装了网络必需品有关。我禁用了它，现在我没有遇到来自一个文件的函数出现在其他文件的 java 脚本中的问题。这是否与 web Essentials 在保存时进行编译的方式有关。我读了一些地方，应该一次为所有文件编译打字稿，而不是一次只编译一个文件。那是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T08:24:36.927

作为对此的跟进，TypeScript 0.9 alpha 预览版（不稳定，但正在开发中）包含对模块的更改，这些更改应该使跨多个文件定义模块变得更加容易。

从[0.9 重大更改 wiki 页面](https://typescript.codeplex.com/wikipage?title=Known%20breaking%20changes%20between%200.8%20and%200.9)：

> 'module' 关键字不再创建类型 描述：在 0.9.0 中，命名空间、类型和值的角色之间的区别更加清晰。模块现在只对命名空间和值有贡献，不再贡献类型。原因：模块角色的这种简化允许模块现在更容易地扩展类和函数。

这可能对您的问题有所帮助，但您必须尝试一下，看看是否有效。

# c# - 如何下载memoryStream文件

> ID：13473777
> 
> 赞同：1
> 
> 时间：2012-11-20T13:02:57.883
> 
> 标签：c#, asp.net

我是 asp.net 的初学者，我使用[PdfRpt](http://pdfreport.codeplex.com/SourceControl/BrowseLatest)创建 pdf 文件。我在课堂上写这段代码

```
namespace PdfReportSamples.CustomPriceNumber
{
    public class CustomPriceNumberPdfReport
    {
        public IPdfReportData CreatePdfReport()
        {
            using (var memoryStream = new MemoryStream())
            {
                var ii= new PdfReport().DocumentPreferences(doc =>
                {
                    doc.RunDirection(PdfRunDirection.LeftToRight);
                    doc.Orientation(PageOrientation.Portrait);
                    doc.PageSize(PdfPageSize.A4);
                    doc.DocumentMetadata(new DocumentMetadata { Author = "Vahid", Application = "PdfRpt", Keywords = "Test", Subject = "Test Rpt", Title = "Test" });
                })
           .DefaultFonts(fonts =>
           {
               fonts.Path(Environment.GetEnvironmentVariable("SystemRoot") + "\\fonts\\arial.ttf",
                                 Environment.GetEnvironmentVariable("SystemRoot") + "\\fonts\\verdana.ttf");
           })
           .PagesFooter(footer =>
           {
               footer.DefaultFooter(DateTime.Now.ToString("MM/dd/yyyy"));
           })
           .PagesHeader(header =>
           {
               header.DefaultHeader(defaultHeader =>
               {
                   defaultHeader.RunDirection(PdfRunDirection.LeftToRight);

               });
           })
           .MainTableTemplate(template =>
           {
               template.BasicTemplate(BasicTemplate.SilverTemplate);
           })
           .MainTablePreferences(table =>
           {
               table.ColumnsWidthsType(TableColumnWidthType.Relative);
           })
           .MainTableDataSource(dataSource =>
           {
               var listOfRows = new List<Transaction>();
               for (int i = 0; i < 200; i++)
               {
                   listOfRows.Add(new Transaction
                   {
                       Product = "Item " + i,
                       Description = "Desc. " + i,
                       SalePrice = 1000 * i
                   });
               }
               dataSource.StronglyTypedList(listOfRows);
           })

           .MainTableColumns(columns =>
           {
               columns.AddColumn(column =>
               {
                   column.PropertyName("rowNo");
                   column.IsRowNumber(true);
                   column.CellsHorizontalAlignment(HorizontalAlignment.Center);
                   column.IsVisible(true);
                   column.Order(0);
                   column.Width(1);
                   column.HeaderCell("#");
               });

               columns.AddColumn(column =>
               {
                   column.PropertyName<Transaction>(x => x.Product);
                   column.CellsHorizontalAlignment(HorizontalAlignment.Center);
                   column.IsVisible(true);
                   column.Order(1);
                   column.Width(2);
                   column.HeaderCell("Product");
               });

               columns.AddColumn(column =>
               {
                   column.PropertyName<Transaction>(x => x.Description);
                   column.CellsHorizontalAlignment(HorizontalAlignment.Center);
                   column.IsVisible(true);
                   column.Order(2);
                   column.Width(3);
                   column.HeaderCell("Description");
               });

               columns.AddColumn(column =>
               {
                   column.PropertyName<Transaction>(x => x.SalePrice);
                   column.CellsHorizontalAlignment(HorizontalAlignment.Center);
                   column.IsVisible(true);
                   column.Order(3);
                   column.Width(3);
                   column.HeaderCell("Sale Price");
                   column.ColumnItemsTemplate(template =>
                   {
                       template.CustomTemplate(new CustomPriceCell());
                   });
                   column.AggregateFunction(aggregateFunction =>
                   {
                       aggregateFunction.NumericAggregateFunction(AggregateFunction.Sum);
                       aggregateFunction.DisplayFormatFormula(obj => obj == null ? string.Empty : string.Format("{0:n0}", obj));
                   });
               });

           })
           .MainTableEvents(events =>
           {
               events.DataSourceIsEmpty(message: "There is no data available to display.");
           })
           .Export(export =>
           {
               export.ToExcel();
           })
           .Generate(data => data.AsPdfStream(memoryStream));

       }

        }
    }
} 
```

我希望当用户单击按钮时发送此文件（到 memoryStream ）以供下载。但我不知道如何编写这段代码。请帮我。谢谢专家

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T13:10:49.180

```
byte[] bytes = memoryStream.GetBuffer();
Response.Buffer = true;
Response.Clear();
Response.ContentType = "application/pdf";
Response.AddHeader("content-disposition", "attachment; filename=report.pdf");
Response.BinaryWrite(bytes);
Response.Flush(); 
```

# android - 加快对 SQLite 数据库的查询

> ID：13473780
> 
> 赞同：1
> 
> 时间：2012-11-20T13:03:15.247
> 
> 标签：android, sqlite

我已经对我的 SQLite 数据库上的 IO 进行了一些测量。从这个数据库加载一些对象大约需要 6 秒。我有一个扩展 Asynctask 的类，这个类的工作是加载我数据库中的最后 10 个条目。这个类是这样构造的：

```
import View.CustomAdapter;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.widget.ListView;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.util.Log;
import android.view.*;

public class LoadCases extends AsyncTask<String, Integer, ArrayList<Case>> {

    ProgressBar progressBar;
    ArrayList<Case> lastTenCases; 
    CustomAdapter cAdapter; 
    Context context;
    ListView lastCases;
    DatabaseHandler db;
    TextView loading;
    int options;

    public LoadCases(ProgressBar progressBar, Context context, ListView lastCases, TextView loading, ArrayList<Case> lastTenCases) {
        this.progressBar = progressBar;
        this.context = context;
        this.lastCases = lastCases;
        this.loading = loading;
        this.lastTenCases = lastTenCases;
        db = new DatabaseHandler(context);
    }

    public void onPreExecute() {
        progressBar.incrementProgressBy(1);
    }

    @Override
    protected ArrayList<Case> doInBackground(String... params) {
        long start = System.nanoTime();
        lastTenCases = db.getAllCases(10);
        long end = System.nanoTime();
        Log.d("TIME TO LOAD CASES FROM BASE: ", Long.toString((end-start)/1000000000)); 
        return lastTenCases;
    }

    public void onPostExecute(ArrayList<Case> result) {
        progressBar.setVisibility(View.GONE);
        loading.setVisibility(View.GONE);
        cAdapter = new CustomAdapter(context, lastTenCases);    
        cAdapter.notifyDataSetChanged();
        lastCases.setAdapter(cAdapter); 
```

} }

如您所见，测量是在我调用该方法之前完成的`getAllCases(10)`

```
long start = System.nanoTime();
lastTenCases = db.getAllCases(10);
long end = System.nanoTime();
Log.d("TIME TO LOAD CASES FROM BASE: ", Long.toString((end-start)/1000000000)); 
```

正如我之前提到的，这将给我大约 6 秒的时间从数据库中加载 10 个案例。

现在，转到`getAllCases`方法

```
public ArrayList<Case> getAllCases(int take) {

    ArrayList<Case> caseList = new ArrayList<Case>();
    String selectQuery = "SELECT  *, (strftime('%s', DATE) * 1000) AS DATENOW FROM " + TABLE_CASES + " ORDER BY " + DATE + " DESC LIMIT " + Integer.toString(take) + " ;";

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Case c = new Case();

            long millis = cursor.getLong(cursor.getColumnIndexOrThrow("DATENOW"));
            Date addedOn = new Date(millis);
            c.setCaseNumber(cursor.getString(0));
            c.setDate(addedOn.toLocaleString());
            c.setStatus(cursor.getString(cursor.getColumnIndex(STATUS)));
            caseList.add(c);
        } while (cursor.moveToNext());
    }
    cursor.close();
    db.close();
    return caseList;
} 
```

此方法将构造`Case`对象，并将其添加到`ArrayList`. 这个 ArrayList 将被返回。是的，我想你理解代码。但是6秒，真的吗？我究竟做错了什么？如何加快此操作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:20:54.007

这取决于您的数据库结构（例如，如果 TABLE_CASES 只是另一个复杂查询）和 中的字段数`TABLE_CASES`，但至少以下几点可能会得到改进：

*   `strftime('%s', DATE) * 1000)`- 你真的每次需要CASE的时候都需要计算吗？存储该值而不是计算肯定会加快查询速度；
*   不确定是否需要 ArrayList，可能[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)可以使用；
*   基于[这个提示](https://developer.android.com/training/articles/perf-tips.html#ObjectCreation)，调用`new Date(millis)`可能应该移出循环；
*   对 and 的调用`getColumnIndexOrThrow`也`getColumnIndex`应该移出循环；
*   `toLocaleString`在 API 级别 1 中已弃用，请使用[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)

最后，我建议遵循[这个 traceview 指南，](http://developer.android.com/tools/debugging/debugging-tracing.html)并确定延迟是实际发生在 SQLite 中还是在它之后的循环中。

# c# - 如何加密 DataContractSerializer 保存到文件的数据？

> ID：13473781
> 
> 赞同：1
> 
> 时间：2012-11-20T13:03:18.187
> 
> 标签：c#, encryption, windows-8, datacontractserializer

我正在使用 C# 创建一个 Windows 8 商店应用程序。
该应用程序使用一些网络服务来获取其数据。`DataContractSerializer`该应用程序使用 a和 a将一些接收到的数据保存在一个文件中`Dictionary`。这样做是为了缓存一些不会发生太大变化的数据。

数据作为人类可读的 xml 写入用户本地存储中的文件。

有没有一种简单的方法来保存**加密**的数据？我不在乎使用什么加密算法，它不应该是可读的 xml 了。

提前致谢！

这是我用于将字典保存到文件的代码：

```
private static async Task InternalSaveAsync()
{
    StorageFile sessionFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(Filename, CreationCollisionOption.ReplaceExisting);
    using (IRandomAccessStream sessionRandomAccess = await sessionFile.OpenAsync(FileAccessMode.ReadWrite))
    {
        using (IOutputStream sessionOutputStream = sessionRandomAccess.GetOutputStreamAt(0))
        {
            DataContractSerializer sessionSerializer = new DataContractSerializer(typeof(Dictionary<string, object>), KnownTypes);
            sessionSerializer.WriteObject(sessionOutputStream.AsStreamForWrite(), _data);
            await sessionOutputStream.FlushAsync();
        }
    }
} 
```

# c++ - C++ 释放宽字符的内存

> ID：13473783
> 
> 赞同：1
> 
> 时间：2012-11-20T13:03:28.587
> 
> 标签：c++, visual-studio-2005, oop

我根本无法删除我的 wchar_t 指针变量。它在构造函数中通过以下方式初始化：

```
dir = new wchar_t; 
```

我不应该可以通过以下方式删除它：

```
delete dir; 
```

此问题的原因似乎是调试断言失败。
表达式 _CrtIsValidHeapPointer(pUserData)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-22T12:33:19.523

听起来堆已经损坏了。例如，如果您分配一个`wchar_t`，但将多个字符写入该指针，则可能会发生这种情况。然后，将来与堆的交互（例如删除）可能会导致错误，因为代码中的断言被破坏了。

# objective-c - 我们可以访问默认相机的重拍图像吗

> ID：13473786
> 
> 赞同：0
> 
> 时间：2012-11-20T13:03:43.233
> 
> 标签：objective-c, ios

我是 iOS 新手。我想知道是否可以访问 的重拍图像按钮 `UIImagePickerController`。如果是这样，您如何调用该按钮上的函数？

我的问题是我正在使用`UIImagePickerController`从相机拍摄图像并将图像保存在文档目录中。我已经使用 a`UIImageView`和`UIAlertView`在另一个视图上完成了我的任务，但问题是我想在按下相机中的重新拍摄图像按钮之前保存图像。我必须做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:18:49.373

You can't do what you want using `UIImagePickerController`. Instead, use `AVFoundation` framework for capturing still images in the way you want. Please, check this Apple's sample project [http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html).

# z3 - 带 SMTlib2 输入的 z3

> ID：13473787
> 
> 赞同：3
> 
> 时间：2012-11-20T13:03:52.433
> 
> 标签：z3

我刚刚将 z3 从 4.1 升级到 4.3.1，似乎 smtlib2 输入发生了变化：现在，pop 语句不会删除函数/常量声明。

这是与 z3 4.1（和其他 SMT 求解器...）一起正常工作的 SMTlib2 输入，但在 z3 4.3.1 中返回错误：（错误“第 19 行第 25 列：无效声明，常量 'bs_2'（其中给定签名）已经声明“）

```
(set-option :produce-models true)
(set-option :produce-unsat-cores true)
(set-option :interactive-mode true)
(set-option :print-success false)
(push 1)
(declare-fun bs_1 () Bool)
(push 1)
(declare-fun bs_2 () Bool)
(assert (and  bs_1 (not bs_2)))
(check-sat)
(pop 1)
(push 1)
(declare-fun bs_2 () Bool)
(assert (and  bs_1 (not bs_2)))
(check-sat)
(pop 1)
(pop 1)
(exit) 
```

删除最后一个 bs_2 声明适用于 z3 4.3.1，但不适用于 z3 4.1。我使用推送/弹出错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:11:03.213

在 Z3 4.3.1 中，我们尝试放宽了 SMT-LIB 2.0 的一些限制，让 Z3 使用起来更方便。例如，我们现在可以写`(+ x 2)`而不是`(+ x 2.0)`when `x`is `Real`。声明是全局的，而不是像 Z3 4.1 中的范围。其动机是允许用户更简洁地编码问题。我们可以使用以下选项来启用范围声明，如 Z3 4.1

```
(set-option :global-decls false) 
```

话虽如此，我知道这种变化对于习惯于其他 SMT 求解器或阅读描述 SMT-LIB 标准的手册的用户来说是非常令人困惑和违反直觉的。因此，我们将默认更改回`(set-option :global-decls false)`.

# javascript - 相对于底部定位 div

> ID：13473790
> 
> 赞同：0
> 
> 时间：2012-11-20T13:03:53.390
> 
> 标签：javascript, jquery, html, css

我想使用它的底部属性定位一个弹出窗口，以便将它放置在当前鼠标悬停的元素上方。让我们说：

```
$('#pop-up').css({
bottom : currentlyMouseOverElement.offset().top + "px",
}); 
```

问题是 显示但不完全在当前鼠标悬停的元素上方，而是远远高于它。

有什么我想念的吗？有人可以帮我解决这个问题吗？

提前致谢。贺拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:06:23.523

尝试以下代码以获取基于高度的位置

```
 $('#pop-up').css({

  bottom : (currentlyMouseOverElement.offset().top - currentlyMouseOverElement.height())+  "px",
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:13:17.127

您可以为弹出元素提供 position:absolute 和 position:relative to its parent。

```
$('#pop-up').css({
position: absolute,
bottom : currentlyMouseOverElement.offset().top + "px",
}); 
```

# javascript - 在性能方面，缩小/编译的 JavaScript 与未压缩的 JavaScript

> ID：13473796
> 
> 赞同：10
> 
> 时间：2012-11-20T13:04:02.830
> 
> 标签：javascript, performance, compilation

我对 JavaScript“编译”的理解是它压缩和缩小你的代码以最终节省字节。

压缩或缩小是否会使 JavaScript 运行得更快？

请考虑以下示例：

```
var abcdefghijklmnopqrstuvwxyz = 1;
// vs.
var a=1; 
```

```
var b = function() {
    // Here is a comment
    // And another
                                                                                                                        // White space
    return true;
};

// vs.

var b=function(){return true} 
```

我通过 jsPerf 运行了这些示例[，几乎没有区别](http://jsperf.com/compilation-performance)。

除了节省字节之外，JavaScript 的编译还能让它更快或更慢吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-20T13:07:27.017

是的，从[Google Closure Compiler](https://developers.google.com/closure/compiler/)之类的应用所应用的转换的意义上说，编译可以使您的脚本运行得更快。考虑这个非常简单的例子：

```
var x = ["hello", "james"].join(" "); 
```

编译为：

```
var x="hello james"; 
```

代码更少，运行速度更快。显然，这是一个愚蠢的例子。我希望您自己编写编译版本。但是，它确实证明了 Closure 能够提供性能改进以及文件大小的改进。

来自 Closure 文档（强调添加）：

> Closure Compiler 是一个使 JavaScript 下载和**运行更快**的工具。它是一个真正的 JavaScript 编译器。它不是从源语言编译成机器代码，而是从 JavaScript 编译成更好的 JavaScript。

**编辑**

有关 Closure 编译器实际上*增加*JavaScript 文件大小以尝试提供性能改进的示例，请参阅我对[这个问题](https://stackoverflow.com/questions/10210421/why-does-closure-compiler-insist-on-adding-more-bytes/)的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:08:32.520

缩小与未缩小在执行速度方面不应该有任何区别。唯一的区别可能是缩小版本的解析速度更快，但即使您有一个非常大的文件（您不会发现与您运行的测试有任何差异，只是很小）。

编辑：如果你只是在做基本的“缩小”，我所做的第一句话是有效的。如果您使用像 James 展示的 Closure 编译器，那么如果 Closure 工具可以优化您的代码，可能会有一些差异......

# iphone - 在 iPhone 中每次单击按钮时更改视图的背景颜色

> ID：13473801
> 
> 赞同：3
> 
> 时间：2012-11-20T13:04:17.787
> 
> 标签：iphone, objective-c, uicolor

```
-(IBAction) changeColOnClick:(id)sender
{
    NSArray *colors = [NSArray arrayWithObjects:@"[UIColor brownColor]",@"[UIColor blackColor]",@"[UI greenColor]",@"[UIColor redColor]", nil];

    self.view.backgroundColor = [colors objectAtIndex:i];
    // ERROR::changebackground[1089:207] -[NSCFString CGColor]: unrecognized selector sent to instance 0x357c

    //label.text = [colors objectAtIndex:i]; //i is defined in the implementation
    i++;

    if(i==[colors count]-1)
    {
        i=0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:13:25.393

您的代码正在崩溃，因为您将字符串保存到数组中。尝试将实际颜色保存到数组中，如下所示：

```
NSArray *colors = [NSArray arrayWithObjects:[UIColor brownColor], [UIColor blackColor], [UIColor greenColor], [UIColor redColor], nil];

self.view.backgroundColor = [colors objectAtIndex:i]; 
```

如果这仍然不起作用，您可能需要执行以下操作：

```
self.view.backgroundColor = ((UIColor *)[colors objectAtIndex:i]).CGColor; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:14:30.243

`@"[UIColor brownColor]"`in `array`are 类型`NSString`not `UIColor`。

所以`array`应该是这样的：

```
 NSArray *colors = [NSArray arrayWithObjects:[UIColor brownColor],[UIColor blackColor],[UI greenColor],[UIColor redColor], nil]; 
```

添加这样的单个实例`MutableArray`：

```
 [colors addObject:[UIColor blackColor]]; 
```

很快：

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T13:15:12.987

像这样修改你的代码。它会工作

```
-(IBAction) changeColOnClick:(id)sender
{
    NSArray *colors = [NSArray arrayWithObjects:[UIColor brownColor],[UIColor blackColor],[UI greenColor],[UIColor redColor], nil];

    self.view.backgroundColor = [colors objectAtIndex:i];
    //label.text = [colors objectAtIndex:i]; //i is defined in the implementation
    i++;

    if(i==[colors count]-1)
    {
        i=0;
    }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T13:12:42.853

您将颜色添加到字符串对象之类的数组中。那是不对的。你应该这样做：

```
[colors addObject:[UIColor blackColor]];
[colors addObject:[UIColor redColor]]; 
```

等等

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T13:21:32.290

嘿，伙计，我只是测试您的代码，而您只是这样设置方法：-

```
int i;
-(IBAction) changeColOnClick:(id)sender
{

    NSArray *colors = [NSArray arrayWithObjects:@"redColor",@"blackColor",@"greenColor",@"redColor", nil];

    NSString *str =[colors objectAtIndex:i];
    i++;
   //DARK_BACKGROUNDNavigation=str;

    SEL blackSel = NSSelectorFromString(str);
    UIColor* tColor = nil;
    if ([UIColor respondsToSelector: blackSel])
        tColor  = [UIColor performSelector:blackSel];
    [self.view setBackgroundColor:tColor];

    if(i==[colors count]-1){i=0;}
} 
```

它的工作快乐编码:)

**下载它的演示**

[http://www.sendspace.com/file/9e68jx](http://www.sendspace.com/file/9e68jx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-20T13:23:27.353

您已将数组中的对象作为字符串，因此它给出了数组。你必须采取 UIColor 类型的对象..  

```
 UIColor *color1 = [UIColor brownColor];
    UIColor *color2 = [UIColor blackColor];
    UIColor *color3 = [UIColor greenColor];
    UIColor *color4 = [UIColor redColor];
    NSArray *colors = [NSArray arrayWithObjects:color1,color2,color3,color4, nil];
    self.view.backgroundColor = [colors objectAtIndex:i]; 
```

# sql-server - ROLLUP 仅汇总 SQL Server 2008 中的不同值

> ID：13473807
> 
> 赞同：1
> 
> 时间：2012-11-20T13:04:59.493
> 
> 标签：sql-server, sql-server-2008, rollup

```
SELECT     
   ISNULL(Customer.Name, ' GRAND') AS CustomerName, 
   ISNULL(Item.ItemName, 'TOTAL') AS ItemName, 
   SUM(Item_Order.PriceAtDate) AS Price
FROM         
   Item_Order 
INNER JOIN
   Item ON Item_Order.ItemID = Item.ItemID 
INNER JOIN
   TheOrder ON Item_Order.OrderID = TheOrder.OrderID 
INNER JOIN
   Customer ON TheOrder.CustomerID = Customer.CustomerID
GROUP BY 
   Customer.Name, Item.ItemName, Item_Order.PriceAtDate WITH ROLLUP
ORDER BY 
   Customer.Name 
```

结果：

```
CustomerName ItemName            Price
------------ ------------------- -------
GRAND        TOTAL               1380.46
Adrian       Hammer                21.88
Adrian       Hammer                21.88
Adrian       Soldering Iron        30.54
Adrian       Soldering Iron        30.54
Adrian       TOTAL                 52.42
Baker        Valve                 21.88
Baker        Valve                 21.88
Baker        TOTAL                 21.88 
```

如您所见，使用汇总给出的 TOTAL 加起来为 30.54 和 21.88，即为 52.42，但这两个项目都订购了两次。所以我需要实际的总数，而不仅仅是不同的值。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:18:45.983

我相信在你正在做总和的价格列（Item_Order.PriceAtDate）上进行分组会导致问题：

```
Customer.Name, Item.ItemName, Item_Order.PriceAtDate WITH ROLLUP 
```

尝试改用子查询

```
SELECT
    ISNULL(CustomerName, ' GRAND') AS CustomerName, 
    ISNULL(ItemName, 'TOTAL') AS ItemName, 
    Sum(Price) AS Price
FROM
(
SELECT     
   Customer.Name AS CustomerName,
   Item.ItemName AS ItemName,   
   Item_Order.PriceAtDate AS Price
FROM         
   Item_Order 
INNER JOIN
   Item ON Item_Order.ItemID = Item.ItemID 
INNER JOIN
   TheOrder ON Item_Order.OrderID = TheOrder.OrderID 
INNER JOIN
   Customer ON TheOrder.CustomerID = Customer.CustomerID
) as Test
GROUP BY 
   CustomerName, ItemName WITH ROLLUP
ORDER BY 
   CustomerName 
```

# asp.net - ScriptManager 必须出现在任何需要它的控件之前

> ID：13473808
> 
> 赞同：27
> 
> 时间：2012-11-20T13:04:59.363
> 
> 标签：asp.net, webforms

我创建了一个新的 ASP.NET Web 应用程序，调试后出现服务器错误

> ID 为“WaitingPopup1”的控件需要页面上的 ScriptManager。ScriptManager 必须出现在任何需要它的控件之前。

我是 ASP.NET 的新手，所以我应该在哪里安装我的 ScriptManager，在 web.config 中？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-20T13:08:51.830

这`ScriptManager`是一个需要添加到您创建的页面的控件。

看看这个[示例 AJAX 应用程序](http://msdn.microsoft.com/en-us/library/bb398890(v=vs.100).aspx)。

```
<body>
    <form runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
        ...
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-20T13:09:33.110

如果您在页面上使用 microsoft ajax，则需要[将脚本管理器控件](http://msdn.microsoft.com/en-us/library/bb398863%28v=vs.100%29.aspx)添加到您的母版页或需要它的页面。它管理 ASP.NET Ajax 脚本库和脚本文件、部分页面呈现以及 Web 和应用程序服务的客户端代理类生成

```
<asp:ScriptManager ID="ScriptManger1" runat="Server">
</asp:ScriptManager> 
```

完整的[用法](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager%28v=vs.100%29.aspx)

```
<asp:ScriptManager
    AllowCustomErrorsRedirect="True|False"
    AsyncPostBackErrorMessage="string"
    AsyncPostBackTimeout="integer"
    AuthenticationService-Path="uri"
    EnablePageMethods="True|False"
    EnablePartialRendering="True|False"
    EnableScriptGlobalization="True|False"
    EnableScriptLocalization="True|False"
    EnableTheming="True|False"
    EnableViewState="True|False"
    ID="string"
    LoadScriptsBeforeUI="True|False"
    OnAsyncPostBackError="AsyncPostBackError event handler"
    OnDataBinding="DataBinding event handler"
    OnDisposed="Disposed event handler"
    OnInit="Init event handler"
    OnLoad="Load event handler"
    OnPreRender="PreRender event handler"
    OnResolveScriptReference="ResolveScriptReference event handler"
    OnUnload="Unload event handler"
    ProfileService-LoadProperties="string"
    ProfileService-Path="uri"
    RoleService-LoadRoles="True|False"
    RoleService-Path="uri"
    runat="server"
    ScriptMode="Auto|Inherit|Debug|Release"
    ScriptPath="string"
    SkinID="string"
    SupportsPartialRendering="True|False"
    Visible="True|False">
        <AuthenticationService
            Path="uri" />
        <ProfileService
            LoadProperties="string"
            Path="uri" />
        <RoleService
            LoadRoles="True|False"
            Path="uri" />
        <Scripts>
            <asp:ScriptReference
                Assembly="string"
                IgnoreScriptPath="True|False"
                Name="string"
                NotifyScriptLoaded="True|False"
                Path="string"
                ResourceUICultures="string"
                ScriptMode="Auto|Debug|Inherit|Release" />
        </Scripts>
        <Services>
            <asp:ServiceReference
                InlineScript="True|False"
                Path="string" />
        </Services>
</asp:ScriptManager> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-20T13:17:40.617

您可以在页面标签下方添加脚本管理器标签`<Form>`。这是放置脚本管理器标签的方法。

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager> 
```

如果您使用母版页，建议您在母版页中使用脚本管理器，这样您就不必在每个包含 AJAX 控件的页面上一次又一次地编写它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-20T13:08:54.670

只需像这样放在`ScriptManager`标签内`form`：

```
<form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager> 
```

如果有，`Master Page`则将其放入母版页本身。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-08T02:03:58.280

在很多情况下，脚本管理器可能会出现这样的问题。你试试这个首先在适当的占位符或任何出现在使用 Ajax 控件的内容之前的占位符中添加脚本管理器。

1.  我们需要在使用任何 AJAX 控件时添加 ScriptManager，而不仅仅是更新面板。 `<asp:ScriptManager ID="ScriptManger1" runat="Server" />`

2.  如果您使用的是最新的 Ajax 控制工具包（我不确定版本 4.0 还是 4.5），您需要使用特定的 ToolkitScriptManager 而不是默认 Ajax 扩展中的 ScriptManager。

3.  您可以在页面上仅使用一个 ScriptManager 或 ToolKitScriptManager，如果您已将其添加到母版页，则无需在网页上再次添加它。

4.  这里提到的问题可能是因为 ContentPlaceHolder 请检查您的母版页上有多少内容占位符。举个例子，如果您在母版页上有 2 个内容占位符“Head”和“ContentPlaceHolder1”，而 ContentPlaceHolder1 是您的内容页面。请检查下面的代码，我在这里添加了我在第二个占位符上的 ScriptManager，就在更新面板的下方。

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder id="MainContent" runat="server">
        <asp:ScriptManager ID="ScriptManger1" runat="Server" />
          <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
    </ContentTemplate>
</asp:UpdatePanel>
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

当我们在网页上默认选择母版页时，我们大多数人在设计 Web 表单时都会犯错误，其中占位符的数量与母版页相同。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Master Pages/Home.master" AutoEventWireup="true" CodeFile="frmCompanyLogin.aspx.cs" Inherits="Authentication_frmCompanyLogin" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">
</asp:Content> 
```

我们不需要删除它是指导结构的任何 PlaceHolder，但您必须在添加 ScriptManager（在母版页上）的相同 PlaceHolder 中添加 Web 表单内容，或在适当的占位符或任何出现在内容之前的占位符中添加脚本管理器其中使用了 Ajax Control。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-20T13:09:10.003

这[`ScriptManager`](http://msdn.microsoft.com/en-us/library/bb398863%28v=vs.100%29.aspx)是您在页面中注册使用的 Web 控件

```
<asp:ScriptManager ID="ScriptManger1" runat="Server" /> 
```

在表单标签内

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-20T13:10:08.160

它只是想要您的 ASPX 页面上的 ASP 控件。我通常将我的放在标签下方，或者放在主人正文的第一个内容区域内（如果您使用母版页）

```
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="scriptManager" runat="server"></asp:ScriptManager>
        <div>
            [Content]
        </div>
    </form>
</body> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-20T13:08:47.490

在 ASP.NET 页面上，在表单标记内。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-20T13:09:44.997

脚本管理器在使用前必须放在页面上。这将直接在页面本身上，或者，如果您正在使用它们，则在母版页上。

标记将是；

```
 <asp:ScriptManager ID="ScriptManager1" runat="server" LoadScriptsBeforeUI="true"
            EnablePartialRendering="true" /> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-15T14:08:45.597

*   带有`head`标签`runat="server"`
*   在`form`标签内`runat="server"`
*   在`ContentPanels`包含需要它的控件之前 - 典型的控件具有`UpdatePanels`：

<%=页面标题%>

```
</form>
 </body> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-10-06T03:52:07.460

```
<asp:ScriptManager ID="scriptManager1" runat="server">
        </asp:ScriptManager> 
```

在标签后添加上面的代码。它对我有用。

# javascript - 如何使用 JavaScript 在 Internet Explorer 9 中定位 div？

> ID：13473809
> 
> 赞同：0
> 
> 时间：2012-11-20T13:04:58.597
> 
> 标签：javascript, css, internet-explorer-9

此 Javascript 似乎在 IE9 中不起作用，但在 Chrome 中运行良好。

```
function setDivPosition(nm,l,t)
{   
  document.getElementById(nm).style.left = l;
  document.getElementById(nm).style.top = t;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:06:43.850

尝试以下操作并检查：

```
document.getElementById(nm).style.left = l+"px";
document.getElementById(nm).style.top = t+"px"; 
```

我假设 l 和 t 是数值。

# ios - AFNetworking 和 JSON

> ID：13473811
> 
> 赞同：16
> 
> 时间：2012-11-20T13:05:08.270
> 
> 标签：ios, json, afnetworking

我正在关注来自 web 服务 api 的 json 响应。我想从 json 中提取产品数据。我也想使用 AFNetworking 来实现它。

```
 {"products": [
    {
      "product_id": "1170",
      "name": "zzzz®",
      "sort_order": 0,
      "brand": "zzzas",
      "product_category_id": "1090",
      "location_ids": [
        "1078"
      ],
      "icon_url": "http://zzzzz.com/media/2502/zzzz.png",
      "icon_date": "Wed, 07 Nov 2012 14:03:47 GMT",
      "thumbnail_url": "http://zzzz.com/media/2591/zzdfs.png",
      "thumbnail_date": "Wed, 07 Nov 2012 14:04:02 GMT"
    },
    {
      "product_id": "1126",
      "name": "ddddd®",
      "sort_order": 1,
      "brand": "dddsas",
      "product_category_id": "1110",
      "location_ids": [
        "1095"
      ],
      "icon_url": "http://zzzzz.com/media/2507/ddddd.png",
      "icon_date": "Wed, 07 Nov 2012 14:03:48 GMT",
      "thumbnail_url": "http://zzzzz.com/media/2596/sssds.png",
      "thumbnail_date": "Wed, 07 Nov 2012 14:04:05 GMT"
    }
]} 
```

任何人都可以建议一种方法来做到这一点，`.`我将如何完成这些事情。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-20T13:34:47.843

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"link"]];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request 
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSDictionary *jsonDict = (NSDictionary *) JSON;
        NSArray *products = [jsonDict objectForKey:@"products"];
        [products enumerateObjectsUsingBlock:^(id obj,NSUInteger idx, BOOL *stop){
            NSString *productIconUrl = [obj objectForKey:@"icon_url"];
        }];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response,
        NSError *error, id JSON) {
            NSLog(@"Request Failure Because %@",[error userInfo]); 
    }
];

[operation start]; 
```

尝试这个。

更新 1：你可以试试这个[https://github.com/SSamanta/SSRestClient](https://github.com/SSamanta/SSRestClient)

更新 2：[https](https://github.com/SSamanta/SSHTTPClient) ://github.com/SSamanta/SSHTTPClient （使用 Swift）

**可用吊舱：** `pod 'SSHTTPClient', '~>1.2.2'`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-06T20:50:54.300

如果您使用的是 AFNetworking 3.0，`AFJSONRequestOperation`则不再存在，您必须使用`AFHTTPSessionManager`：

```
AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];
[manager GET:@"http://example.com/resources.json" parameters:nil progress:nil success:^(NSURLSessionTask *task, id responseObject) {
    NSLog(@"JSON: %@", responseObject);
} failure:^(NSURLSessionTask *operation, NSError *error) {
    NSLog(@"Error: %@", error);
}]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T13:31:35.613

要使用 AFNetworking 解析 JSON，只需创建一个子类并在初始化期间添加以下内容。

```
[self registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

然后调用 like 方法`GET:parameters:completion:`将调用完成块，并以 an`NSDictionary`作为`response`参数（假设 JSON 有效）。

要下载图像，假设您要显示它们，请查看[UIImageView+AFNetworking](http://afnetworking.github.com/AFNetworking/Categories/UIImageView+AFNetworking.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-20T13:20:44.010

如果您刚刚开始，我建议您使用[RestKit](https://github.com/RestKit/RestKit/tree/development)来完成此任务（它使用 AFNetworking）。[请参阅此处](https://github.com/RestKit/RestKit/tree/development/Examples/RKTwitter)的示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T13:39:07.377

请查看 AFNetworking 的示例 [https://github.com/AFNetworking/AFNetworking/tree/master/Example](https://github.com/AFNetworking/AFNetworking/tree/master/Example)

对于图片下载，EGOCache & EGOImageLoading 可能是不错的选择 [https://github.com/enormego/EGOImageLoading](https://github.com/enormego/EGOImageLoading)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-13T06:50:02.853

使用[JSONModel](https://github.com/icanzilb/JSONModel)将 json 解析为对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-28T13:52:58.040

首先，为了运行 AFNetworking，您首先需要安装“CocoaPods”。这是什么？CocoaPods 是一个 Objective-C 的依赖管理器，它使得安装第三方库作为 AFNetworking 更加快速和安全。它以 Ruby Gem 的形式提供，您可以通过以下方式安装：

打开终端并执行以下命令：

```
sudo gem install cocoapods -V 
```

要有耐心。此命令可能需要一些时间才能完成，因此“-V”选项将为您提供详细的数据。

接下来我们执行：

```
pod setup 
```

这设置了我们的 CocoaPods 安装。

现在我们必须创建一个 PodFile，它将作为 CocoaPods 的配置文件。

回到终端，我们编写以下命令：

```
touch Podfile
open -e Podfile 
```

第一个命令将使用 Unix 触摸编辑器创建一个名为“Podfile”的文件。第二行将打开这个新创建的文件进行编辑。现在，您应该会看到一个空的 TextEdit 窗口打开。现在我们将以下内容粘贴到该文件中：

```
platform :ios, '7.0'
pod "AFNetworking", "~> 2.0" 
```

现在是时候设置我们的 Cocoa 工作环境了。重要提示：请确保使用终端中的“cd”命令在 XCODE 项目的当前目录中更改您的终端目录。例子：

```
cd /user/xcode/myproject 
```

确定您位于正确的目录后，请执行以下终端命令：

```
pod setup 
```

然后我们通过编写将依赖项安装到我们的项目中：

```
pod install 
```

现在，这是一个重要的注意事项：由于您正在尝试安装以前不在当前 Xcode 项目中的项目，因此您必须为当前 Xcode 项目创建一个工作区（如果您还没有这样做的话。）创建一个工作区为您的 Xcode 项目执行以下操作：

```
File > Save Workspace 
```

完成后，导航到 Xcode 工作区文件的目录并执行以下命令：

```
open YourProjectName.xcworkspace 
```

现在您可以在任何文件的开头使用“import”来访问 AFNetworking 的内置 API 功能。

# html - CSS/HTML：如何在不使用表格的情况下实现类似表格的结构？

> ID：13473812
> 
> 赞同：1
> 
> 时间：2012-11-20T13:05:06.583
> 
> 标签：html, css

我在 stackoverflow 上发现了一些类似的问题，但似乎没有一个为我的案例提供真正明确的解决方案。

我希望通过屏幕截图可以显示使用表格的痛苦：

![在此处输入图像描述](../Images/0c9f98f54da217f551614a391450e677.png)

底部的两行被定义为一个表`tr`并且`td`在一个表内。结构完美，标签和文本字段的对齐完美。但是，如果我只想围绕两行设置一个`well`类（例如`<div class='well'> ... </div>`），那么表格方法将失败。仅仅因为您不允许`div`在表格内有任何东西，这只是例外`tr`and `td`。

所以我从表中取出前两行并将其作为纯 div。您可以在灰色井中看到上面的前两行结果。

```
<div class='well'>
  <div>
    <div class='block_inline'> ... </div>
    <div class='block_inline'> ... </div>
  </div> 
  <div>
    <div class='block_inline'> ... </div>
    <div class='block_inline'> ... </div>
  </div>
</div> 
```

类本身`well`现在围绕两行漂亮地呈现，但是现在对齐是一团糟。如何使它们仍然居中并使文本字段彼此垂直对齐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:13:34.440

要使用 div 获得这种效果，只需使用带有 table、table-row 和 table-cell 的 display 属性：

HTML：

```
<div class='well'>
  <div class="row">
    <div class='block_inline'> Title </div>
    <div class='block_inline'> ... </div>
  </div> 
  <div class="row">
    <div class='block_inline'> Due Date Time </div>
    <div class='block_inline'> ... </div>
  </div>
</div>​ 
```

CSS：

```
div
{
    border: 1px solid #333;
}

.well
{
    display: table;
    width: 70%;
}

.row
{
    display: table-row;
}

.block_inline
{
    display: table-cell;
    width: 50%;
} 
```

这模仿了表格的行为，但使标记保持美观和语义。这对于解决“剩余空间列”问题也很有用:)

[http://jsfiddle.net/Kyle_Sevenoaks/e7VeU/](http://jsfiddle.net/Kyle_Sevenoaks/e7VeU/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:20:07.940

我喜欢使用 UL 进行表单布局：http: [//jsfiddle.net/BKgB9/](http://jsfiddle.net/BKgB9/)

```
<form>
 <div>
    <ul>
        <li><label>Type:</label><input type="text" /></li>
        <li><label>Reminder:</label><input type="text" /></li>
    </ul>
 </div>
</form>

div {
 background:#dcdcdc;
 border:1px solid #999;
 padding:20px;
 display:inline-block;
}

div ul li {
 margin-bottom:10px;
}

div ul li label {
 float:left;
 width:85px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T13:08:57.760

好吧，首先语义是一团糟..这就是我的做法：

```
<form>
    <div class="row">
        <label for="input_1">Title</label>
        <input type="text" name="input_1" id="input_1">
    </div>
    <div class="row">
        <label for="input_2">Due date time*</label>
        <input type="text" name="input_2" id="input_2">
    </div>

</form> 
```

风格：

```
div.row {
    clear: both;
}

label {
    display: inline-block;
    width: 300px;
}

input {
    display: inline-block;
} 
```

必要时进行调整。

的使用`div class="row"`可以被字段集和定义列表代替。看看[http://www.gethifi.com/blog/html-forms-the-right-ways](http://www.gethifi.com/blog/html-forms-the-right-ways)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:17:30.070

你也可以试试这个方法

```
<div class="first">
<div class="line1">
   <label>One</label>
   <select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>
    </div>
    <div class="line2">
    <label>two</label>
   <select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>
</div>
<div> 
```

演示；[小提琴](http://jsfiddle.net/xPR36/)

# c++ - C ++ 11 - 移动语义在构造上很慢

> ID：13473815
> 
> 赞同：3
> 
> 时间：2012-11-20T13:05:18.103
> 
> 标签：c++, struct, c++11, move-semantics

这段代码

```
#include <iostream>
#include <vector>

struct obj
{
  std::string name;
  int age;
  float money;

  obj():name("NO_NAME"),age(0),money(0.0f){}
  obj(const std::string& _name, const int& _age, const float& _money):name(_name),age(_age),money(_money){}

  obj(obj&& tmp): name(tmp.name), age(tmp.age), money(tmp.money) {}
  obj& operator=(obj&&) {return *this;}

};

int main(int argc, char* argv[])
{
  std::vector<obj> v;
  for( int i = 0; i < 5000000; ++i )
  {
    v.emplace_back(obj("Jon", 45, 500.6f));
  }
  return(0);
} 
```

比同等速度慢大约 2 倍`v.push_back(obj("Jon", 45, 500.6f));`，我不明白为什么。

我已经用 bot`g++ 4.7.2`和`clang++ 3.3`.

我哪里错了？

* * *

现在我已经更正了我的移动构造函数，我将添加更多

[这是一个 push_back 版本](http://ideone.com/78McfY)

[这是 emplace_back 版本](http://ideone.com/XA10so)

我正在使用`time`Linux 下的实用程序测试这 2 并使用

```
g++-4.7 -std=c++11 -s -O3 -DNDEBUG 
```

或者

```
clang++ -std=c++11 -s -O3 -DNDEBUG 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:30:22.630

*什么都不做*比较好。您试图使其更快（比什么更快？在编写移动构造函数*之前您实际上进行了分析吗？），但是您破坏了它。*

编译器免费生成复制和移动构造函数和赋值运算符，而且她做得对。通过决定自己编写，你是在告诉编译器你知道得更好，所以她只是让开，让你自己~~改进~~破解它。

你破坏的第一件事是你让你的移动构造函数实际上是*copy*。有名字的东西是左值，即使是右值引用，左值也不能隐式移动。所以初始化器需要实际调用`std::move`.

您破坏的第二件事是您没有使移动构造函数声明它不会通过添加`noexcept`来抛出。生成的编译器有这个。通过不声明不抛出异常，`std::vector`在重新分配底层存储时， 的实现可能不会使用移动：如果不保证移动不会抛出，它就无法提供强大的异常保证。

做这一切会让它表现更好吗？也许。也许不吧。您的实现可能正在对 进行小字符串优化`std::string`，这意味着没有动态分配：整个字符串`"Jon"`很小，将直接存储在`std::string`对象中。这使得移动具有与复制相同的成本。

您可以通过动态分配整个`obj`结构并使用`unique_ptr`. 这将使移动比副本便宜，即使存在小字符串优化也是如此。但是，您正在为分配成本和额外的间接成本付出代价。这是否可取，只有您可以判断。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T13:16:57.507

您应该将数据从参数移动到移动构造函数：

```
obj(obj&& tmp)
: 
name(std::move(tmp.name)), age(std::move(tmp.age)), money(std::move(tmp.money)) {} 
```

虽然如果你正确使用这应该是无关紧要`emplace_back`的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T13:09:28.023

代替

```
v.emplace_back(obj("Jon", 45, 500.6f)); 
```

尝试

```
v.emplace_back("Jon", 45, 500.6f); 
```

`push_back`具有启用移动的重载。`emplace_back`用于就地构建。

编辑：R. Martinho Fernandes 所说的。:)

```
obj(obj&& tmp): name(std::move(tmp.name)), age(std::move(tmp.age)), money(std::move(tmp.money)) {} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T13:15:55.967

这可能是你想要的：

```
struct obj
{
  std::string name;
  int age;
  float money;

  obj()
      : name("NO_NAME")
      , age(0)
      , money(0.0f)
  {
  }

  obj(std::string _name, int _age, float _money)
      : name(std::move(_name))
      , age(std::move(_age))
      , money(std::move(_money))
  {
  }
};

int main(int argc, char* argv[])
{
  std::vector<obj> v;
  for( int i = 0; i < 5000000; ++i )
  {
    v.emplace_back("Jon", 45, 500.6f);
  }
  return(0);
} 
```

请注意，我将您的`obj(std::string _name, int _age, float _money)`构造函数更改为移动`_name`，而不是对其进行不必要的复制。

你也叫`emplace_back`错了，应该是`emplace_back("Jon", 45, 500.6f)`。

所有其他的东西都是由编译器自动优化生成的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-20T13:41:57.900

运行时间主要取决于从字符串文字构造 std::string ，因此 move 构造和 emplace 构造之间的区别是微不足道的。

这在我的机器上需要 400 毫秒：

```
#include <iostream>
#include <vector>

using namespace std;

struct obj
{
    string name;
    int age;
    float money;
};

int main(int argc, char* argv[])
{
    vector<obj> v;
    for( int i = 0; i < 5000000; ++i )
    {
        v.emplace_back(obj{"Jon", 45, 500.6f});
    }
    return v.size();
} 
```

这在我的机器上需要 80 毫秒：

```
#include <iostream>
#include <vector>

using namespace std;

struct obj
{
    int age;
    float money;
};

int main(int argc, char* argv[])
{
    vector<obj> v;
    for( int i = 0; i < 5000000; ++i )
    {
        v.emplace_back(obj{45, 500.6f});
    }
    return v.size();
} 
```

请注意，普通结构将为其生成一个合理的默认移动构造函数。

这已经在我的机器上花费了 220 毫秒：

```
#include <iostream>
#include <vector>

using namespace std;

int main(int argc, char* argv[])
{
    int t = 0;
    for( int i = 0; i < 5000000; ++i )
    {
        string s("Jon");
        t += s.size();
    }
    return t;
} 
```

# php - Htaccess - 如何获取“子文件夹”值。请看例子

> ID：13473816
> 
> 赞同：1
> 
> 时间：2012-11-20T13:05:18.147
> 
> 标签：php, .htaccess, codeigniter

如果网站 url 是`www.domain.com/subfolder/sitecontent`，那么我如何更新`.htaccess`下面的文件，以便所有请求都转到`/subfolder/index.php`而不是`/index.php`. 我知道我可以手动添加`/subfolder/`，但我需要它是动态的。可能吗？

基本上我打算在同一台服务器上的 2-3 个不同的 URL 上使用相同的 htaccess 和相同的文件集。例如一个是`www.domain2.com/sitecontent`（这里没有子文件夹）。所有这些 URL 都指向同一个站点。任何帮助将不胜感激。

这就是我当前`.htaccess`文件的样子。它位于`/subfolder/.htaccess`domain1 或`/`第二个域示例。

```
<IfModule mod_rewrite.c>
    #http://codeigniter.com/wiki/mod_rewrite
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder 
    #This snippet prevents user access to the application folder 
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file, 
    #such as an image or css document, if this isn't true it sends the 
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.

    ErrorDocument 404 /index.php
</IfModule> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:09:57.077

不知道是否抓住了你需要的东西，但我认为你只需要附加文件夹名称，你可以试试这个：

```
<IfModule mod_rewrite.c>
    #http://codeigniter.com/wiki/mod_rewrite
    RewriteEngine On
    RewriteBase /subfolder

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /subfolder/index.php?/$1 [L]

    #When your application folder isn't in the system folder 
    #This snippet prevents user access to the application folder 
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /subfolder/index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file, 
    #such as an image or css document, if this isn't true it sends the 
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /subfolder/index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.

    ErrorDocument 404 /index.php
</IfModule> 
```

# iphone - 是否有在 iOS 上使用自定义实时 EQ 播放音乐的框架？

> ID：13473818
> 
> 赞同：1
> 
> 时间：2012-11-20T13:05:22.793
> 
> 标签：iphone, ios, ipad, core-audio, audiounit

我假设我需要音频单元来执行此操作。AFAIK 在 iOS 上有一个 EQ 音频单元。是否有可以播放音乐文件并实时对其应用 EQ 的框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:41:51.250

不知道有没有框架。但是您可以构建一个简单的音频单元 AUGraph。你需要三个单位：

*   kAudioUnitSubType_RemoteIO -- 用于输出
*   kAudioUnitSubType_NBandEQ -- EQ
*   kAudioUnitSubType_AudioFilePlayer -- 播放文件

像这样连接它们：

```
player -> EQ -> RemoteIO 
```

请注意，kAudioUnitSubType_AudioFilePlayer 只能播放原生 Float32、去交错格式的文件。如果要播放压缩文件或其他格式的文件，则需要对其进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:03:34.483

是的，这绝对是可以做到的，而且没有那么难。您可以使用音频单元，但不这样做要容易得多。您可以使用一个名为[novocaine的出色框架，它为您提供了一个基于块的回调，您可以在其中直接实现您的 DSP 算法。](https://github.com/alexbw/novocaine)

如果您想完全控制音频堆栈，您仍应使用 AudioUnits 进行处理。以我的经验，这很少有必要，而且 novocaine 通常更无痛（因此得名）。

# iphone - iphone中的开机事件

> ID：13473827
> 
> 赞同：2
> 
> 时间：2012-11-20T13:05:46.373
> 
> 标签：iphone, ios

我想知道我们是否可以关闭或打开 iphone 中的事件。在 Android、BREW 等其他平台上，我们会收到一条通知我们的应用程序，说手机已打开。在iphone中可以吗？

谢谢吉滕德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:13:19.837

简短的回答：没有。

您的应用未在开机时运行，因此无需通知任何内容。（这里的一个特例是注册为 VoIP 客户端的应用程序。但您仍然无法判断手机是否刚刚启动，或者您的应用程序是否因其他原因被终止然后重新启动。）

当 iOS 关闭时，它会向任何后台运行的任务发送 KILL 信号。你不能拦截它们，所以这对你没有帮助。（即使您可以再次说明，它也没有*说明*您的应用程序被杀死的原因。）

# oracle - 如何在 Windows Server 上配置 Oracle 数据访问组件

> ID：13473828
> 
> 赞同：1
> 
> 时间：2012-11-20T13:05:51.467
> 
> 标签：oracle, iis-7.5

我有一个通过 ODAC 连接到 Oracle 数据库的 .Net 应用程序。我在客户端上使用 ODAC 11.2 Release 4 (11.2.0.3.0) 和 Oracle Developer Tools for Visual Studio 在本地开发了这个。它工作正常。

我现在尝试将它部署到 Windows 2008 Server。我将 ODAC 11.2 Release 4 (11.2.0.3.0) XCopy 安装到 c:\oracle 并将路径设置为“C:\oracle;C:\oracle\bin;”

但是，在应用程序尝试连接到 Oracle 时，我得到了

> 找不到请求的 .Net Framework 数据提供程序。它可能没有安装。在 System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) 在 System.Web.UI.WebControls.SqlDataSource.GetDbProviderFactorySecure() 在 System.Web.UI.WebControls.SqlDataSource.CreateConnection(String connectionString) 在 System.Web.UI .WebControls.SqlDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) 在 System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) 在 System.Web.UI.WebControls.DataBoundControl.PerformSelect() 在 System.Web.UI.WebControls。 BaseDataBoundControl.EnsureDataBound() 在 System.Web.UI.WebControls.GridView.OnPreRender(EventArgs e) 在 System.Web.UI.Control.PreRenderRecursiveInternal() 在 System.Web.UI.Control.PreRenderRecursiveInternal() 在 System.Web。用户界面。

我不知所措。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:11:36.770

原来在 IIS 的应用程序池下将“启用 32 位应用程序”设置为 true 使其工作。尽管将应用程序编译为 x86 而不是 Any CPU，但还是会出现这种情况。

# maven - Maven，SNAPSHOT神器有奇怪的后缀

> ID：13473829
> 
> 赞同：0
> 
> 时间：2012-11-20T13:05:53.073
> 
> 标签：maven, maven-2, dependencies

我在 repo 中找到了正在使用的下一个工件。
工件包含在

```
/com  
+/company  
++/web-services    
+++/wsdls  
++++/1.0.0-SNAPSHOT  
+++++/wsdls-1.0.0-20121119.140914-5-wsdl.zip 
```

我尝试使用 的工件名称中的奇怪**-wsdl**

```
<groupId>com.company.web-services</groupId>
<artifactId>wsdls</artifactId>
<version>1.0.0-SNAPSHOT</version>
<type>zip</type> 
```

但是这个搜索工件**wsdls-1.0.0-20121119.140914-5.zip**在 repo 但不是 **wsdls-1.0.0-20121119.140914-5-wsdl.zip**。
我怎样才能得到这个神器？

PS。`maven-metadata.xml`

```
<metadata>
 <groupId>com.company.web-services</groupId>
   <artifactId>wsdls</artifactId>
   <version>1.0.0-SNAPSHOT</version>
    <versioning>
     <snapshot>
      <timestamp>20121119.140914</timestamp>
      <buildNumber>5</buildNumber>
     </snapshot>
     <lastUpdated>20121119140914</lastUpdated>
   </versioning>
</metadata> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:09:14.043

这是**分类器**，五个工件坐标之一：

*   组 ID
*   工件 ID
*   版本
*   分类器
*   类型

默认为`null`（空）。如果存在，则在构造文件名时会在其前面添加一个破折号。

常用的分类器有：

*   来源
*   测试
*   文档

当然，还有任何自定义分类器。

在您的情况下，您应该像这样编写您的依赖项：

```
<groupId>com.company.web-services</groupId>
<artifactId>wsdls</artifactId>
<version>1.0.0-SNAPSHOT</version>
<classifier>wsdl</classifier>
<type>zip</type> 
```

# java - SilkTest 基础状态在连续测试运行后无法识别

> ID：13473832
> 
> 赞同：1
> 
> 时间：2012-11-20T13:06:13.523
> 
> 标签：java, eclipse, silktest

在我的测试环境中，我们有执行某些操作的类，其中一些使用 SilkTest 的东西。测试过程由我们解析、转换为 ActionImpl 类和执行操作的 XML 文件定义。比如下面会登录我们的app，切换用户，然后重启服务器：

```
<Script refBean="validateState" retry="false">
    <DataGroups>
        <Step action="log" mod="5.10.13 - Step 1" />
        <Step action="switchUsers" target="mlane" />
        <Step action="restartServer" />
    </DataGroups>
</Script> 
```

在`restartServer`操作的情况下，代码最终会调用以下方法，该方法使用正在运行`eclipse.exe`的测试创建一个 BaseState。

```
private PassFail restartServerInEclipse() {
    Desktop desktop = new Desktop();
    BaseState eclipseBaseState = new BaseState("*eclipse.exe", "/Shell[@caption='Java EE*']", TechDomain.SWT, TechDomain.XBROWSER, TechDomain.WIN32);
    desktop.executeBaseState(eclipseBaseState);
    // Do some stuff, like finding CTabItem objects, clicking them, etc.
    return passFail;
} 
```

假设我正在运行当天的第一个测试。我刚开始工作，并决定进行测试。如果代码执行`restartServer`操作并调用`restartServerInEclipse()`，它将识别当前正在运行的`eclipse.exe`，并成功地对我告诉它的任何 Silk 对象执行任何 Silk 方法。

但是，在没有退出 Eclipse 或 Open Agent 的情况下，在测试完成后，如果我再次运行相同的测试，例如全新的对象、全新的测试线程，测试会运行并停止，然后我单击 Eclipse 中的绿色运行按钮再次，当它到达`BaseState eclipseBaseState = new BaseState(...)`代码时，我收到以下错误：

```
com.borland.silktest.jtf.common.LaunchApplicationFailedException: Failed to start application '*eclipse.exe' in working directory 'null'. The system cannot find the file specified.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.borland.silktest.jtf.agent.ExceptionTranslatorUtil.createException(ExceptionTranslatorUtil.java:60)
    at com.borland.silktest.jtf.agent.ExceptionTranslatorUtil.translate(ExceptionTranslatorUtil.java:37)
    at com.borland.silktest.jtf.agent.JtfModule.executeBaseState_aroundBody39$advice(JtfModule.java:121)
    at com.borland.silktest.jtf.agent.JtfModule.executeBaseState(JtfModule.java:1)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
    at org.springframework.remoting.support.RemoteInvocationTraceInterceptor.invoke(RemoteInvocationTraceInterceptor.java:77)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at $Proxy24.executeBaseState(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.remoting.support.RemoteInvocation.invoke(RemoteInvocation.java:205)
    at org.springframework.remoting.support.DefaultRemoteInvocationExecutor.invoke(DefaultRemoteInvocationExecutor.java:38)
    at org.springframework.remoting.support.RemoteInvocationBasedExporter.invoke(RemoteInvocationBasedExporter.java:78)
    at org.springframework.remoting.rmi.RmiBasedExporter.invoke(RmiBasedExporter.java:72)
    at org.springframework.remoting.rmi.RmiInvocationWrapper.invoke(RmiInvocationWrapper.java:72)
    at sun.reflect.GeneratedMethodAccessor12.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)
    at sun.rmi.transport.Transport$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
    at org.springframework.remoting.support.RemoteInvocationUtils.fillInClientStackTraceIfPossible(RemoteInvocationUtils.java:47)
    at org.springframework.remoting.rmi.RmiClientInterceptor.doInvoke(RmiClientInterceptor.java:351)
    at org.springframework.remoting.rmi.RmiClientInterceptor.invoke(RmiClientInterceptor.java:258)
    at com.borland.silktest.startservice.RmiConnectionUtil$1.invoke(RmiConnectionUtil.java:134)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at $Proxy0.executeBaseState(Unknown Source)
    at com.borland.silktest.jtf.Agent.executeBaseState(Agent.java:452)
    at com.borland.silktest.jtf.BaseState.execute(BaseState.java:298)
    at com.borland.silktest.jtf.Desktop.executeBaseState(Desktop.java:69)
    at scripts.misc.validation.action.RestartServerActionImpl.restartServerInEclipse(RestartServerActionImpl.java:62)
    at scripts.misc.validation.action.RestartServerActionImpl.evaluate(RestartServerActionImpl.java:25)
    at scripts.misc.validation.ValidateState.evaluateStep(ValidateState.java:108)
    at scripts.misc.validation.ValidateState.script(ValidateState.java:131)
    at scripts.base.BaseScript.runWithRetries(BaseScript.java:204)
    at scripts.base.BaseScript.runIt(BaseScript.java:312)
    at suite.MainThread.script(MainThread.java:667)
    at suite.MainThread.run(MainThread.java:281) 
```

两秒前完全正常工作的基本状态现在不正确。好像一旦初始设置了基本状态，Eclipse 的某些内容就会发生变化，因此它无法重新识别它。

解决这个问题的唯一方法是重新启动 Eclipse 和 Open Agent，但即使这样有时也不起作用，而且我偶尔会遇到一些 OA 的许可证服务器问题，这需要重新启动计算机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:52:24.227

从您发布的日志文件中，我可以看到您正在测试`eclipse.exe`和`iexplore.exe`. 当前构建脚本的方式是其中一种。这意味着一旦您切换到 Internet Explorer，Silk Test 就会从 Eclipse 中分离，并且将不再识别该窗口。

由于无论如何您都是通过其他机制启动应用程序，因此我建议使用该`attach`方法，该方法是累积的并且将添加模式而不是替换它，因此您将避免在应用程序之间切换。

```
Desktop desktop = new Desktop();
desktop.attach("*\\eclipse.exe", TechDomain.SWT, TechDomain.XBROWSER, TechDomain.WIN32);
desktop.attach("*\\iexplore.exe", TechDomain.SWT, TechDomain.XBROWSER, TechDomain.WIN32);
Shell eclipse = desktop.find("/Shell[@caption='Java EE*']");
BrowserApplication browserApp = desktop.find("/BrowserApplication"); 
```

# android - 如何在android中的多选模式下设置列表视图中选中项目的背景

> ID：13473839
> 
> 赞同：4
> 
> 时间：2012-11-20T13:06:25.733
> 
> 标签：android

我有一个`ListActivity`

```
public class MyActivity extends ListActivity{

    protected void onCreate(Bundle savedstate){
        super.onCreate(savedstate);
        getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
        getListView().setMultiChoiceModeListener(new AbsListView.MultiChoiceModeListener() {

        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            Log.i("xxx", "onPrepareActionMode");
            return false;
        }

        public void onDestroyActionMode(ActionMode mode) {
            // TODO Auto-generated method stub

        }

        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            // TODO Auto-generated method stub
            return true;
        }

        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            // TODO Auto-generated method stub
            return false;
        }

        public void onItemCheckedStateChanged(ActionMode mode, int position, long id, boolean checked) {
            Log.i("xxx", "pos: "+position+", checked: "+checked);
            mode.setTitle(getListView().getCheckedItemCount()+" checked");

        }
    });
    }

} 
```

在这里我可以看到项目被检查，但检查项目的背景没有改变。我知道如何做到这一点，让你`CustomAdapter`和 in`getView()`设置检查视图的背景。但我相信有更简单的方法来处理它。你能告诉我是否有办法实现它吗？

附加屏幕截图![](../Images/dc231b31eea17722c25ff092f5a9998c.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T01:56:51.287

好的，我通过查看其他应用程序的源代码得到了答案。将 statelist drawable 设置为列表项的背景。在选择器`state_activated = true`中给出背景可绘制。

# c - 如何从命令行使所有（数据）缓存无效？

> ID：13473846
> 
> 赞同：0
> 
> 时间：2012-11-20T13:07:02.600
> 
> 标签：c, linux, performance, caching, cpu-architecture

对于一些精确的测量，我想从命令行使所有缓存无效/刷新到 RAM（主内存）（以便主程序运行时间评估不受此过程的影响）。我发现了以下内容（第一个和最后一个来自[这里](https://stackoverflow.com/q/3446138/50305)）：

```
1\. echo 3 > /proc/sys/vm/drop_caches 
```

我可以用以下内容构建一个（预执行的）程序

```
2\. #include <asm/cachectl.h>
int cacheflush(char *addr, int nbytes, int cache); 
```

或者我终于可以做一个

```
3\. int main() {
     const int size = 20*1024*1024; // Allocate 20M. Set much larger then L2
     char *c = (char *)malloc(size);
     for (int i = 0; i < 0xffff; i++)
       for (int j = 0; j < size; j++)
         c[j] = i*j;
 } 
```

我的问题是：对于我需要做的事情，哪个版本是最好的，如果它是＃2，我应该给它作为起始地址的地址是什么？我`uname -a`的是 Linux 3.2.0-33-generic #52-Ubuntu SMP Thu Oct 18 16:19:45 UTC 2012 i686

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:20:35.597

你在一个操作系统上运行，它会在你背后做其他事情。操作系统将处理中断，在后台运行各种守护程序并执行各种维护任务，并可能将您正在运行的进程移动到不同的 cpu 等。

使缓存失效是您最不担心的事情，如果您的测量必须如此准确，您需要重新评估运行测试的环境。即使您设法控制了操作系统所做的一切（这基本上意味着使您的测试代码成为操作系统的一部分），您仍然需要考虑 TLB 行为和分支预测缓冲区（这将比缓存更影响您的性能），控制 SMM（除非您可以控制 BIOS，否则通常无法控制）并了解您用于测量的时钟的实际行为（我猜 10 度的温差会比拥有一个清理缓存）。

换句话说 - 算了吧。实际测量事物的典型方法是运行“足够”次并取平均值（或最小值或最大值或中值，具体取决于您要证明的内容）。

添加更多：您的方法 1 刷新文件系统缓存，与 cpu 上的数据缓存无关。第 2 号我不知道，我的 linux 风格没有它。如果您的 cpu 上具有完美的缓存关联性，那么第 3 号可能会起作用，而您没有，并且必须确保操作系统分配的物理页面将触及每个可能的缓存行，而您不能这样做。您还必须确保您要么在将运行测试的同一 cpu 上执行它，要么在所有 cpu 上执行它，并且不会安排任何东西在其间运行。由于您想从命令行运行它，因此您的 shell 将在程序运行之前很久就踩遍缓存（并且 exec 系统调用和文件系统操作无济于事）。

可靠地清除架构上的缓存的唯一方法是不允许调用 wbinvd 指令，因为您不是内核并且不应该乱用缓存。

# jquery - jQuery DataTable - 选择结果数

> ID：13473852
> 
> 赞同：0
> 
> 时间：2012-11-20T13:07:17.390
> 
> 标签：jquery

我使用 jQuery DataTable，当我从下拉列表中选择结果数量时，我想调用我的函数。我怎样才能做到这一点？

DataTable 生成代码：

```
<div id="displayData_length" class="dataTables_length">
  <label>
     Show <select name="displayData_length" size="1" aria-controls="displayData">
             <option value="10" selected="selected">10</option>
             <option value="25">25</option>
             <option value="50">50</option>
             <option value="100">100</option>
           </select>
  </label>
</div> 
```

所以我尝试使用功能：

```
$('select[name=displayData_length]').bind('change', function(event) {
    alert($(this).val());
}); 
```

但这不好，因为我在选择结果数时没有看到 alert() 。

我怎样才能做到这一点？也许是另一种解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:10:55.167

尝试`.live()`代替`.bind()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:13:58.007

已经测试了您的代码 - 它工作正常，正如预期的那样。确保将脚本放在-markup之后*。*`<div id="displayData_length"`

如果标记是由 DataTables 在运行时生成的，请将函数放在文档就绪函数中

```
$(document).ready(function() {
    $('select[name=displayData_length]').bind('change', function(event) {
        alert($(this).val());
    });
}); 
```

# forms - Yii 模型方法 addError 不起作用

> ID：13473858
> 
> 赞同：1
> 
> 时间：2012-11-20T13:07:43.753
> 
> 标签：forms, yii

我有一个关于以 yii 形式显示错误的问题。

### 这是我的控制器：

```
$custom_user->attributes = $_POST['CustomUser'];
if($custom_user->validate())
{
  ...
  save
  ...
}
else
{
  $custom_user->addError('username', 'Error X');
  $this->redirect(array('access/index'),
                  array('user'=>$custom_user,
                        'tab'=>$tab_person,
  ));
} 
```

### 这是我的索引视图：

```
<?php $form=$this->beginWidget('BaseForm', array(
                            'id'=>'user-form',
                           'action'=>Yii::app()->createUrl('person/createUser'))); ?>

 <?php echo $form->errorSummary($user);?>

 <div class="right">
        <?php echo $form->textField($user,'username',array('size'=>30,'maxlength'=>255)); ?>
        <br/><?php echo $form->error($user,'username'); ?>
    </div>
  ...
  ...
 <div style="float: left;">
        <?php echo $form->dateField($user,'valid_from',null,'valid_from_formated'); ?>
        <br/><?php echo $form->error($user,'valid_from'); ?>
 </div> 
```

### 这是我的 BaseForm

```
public $enableClientValidation = true;
public $enableAjaxValidation = true;
public $clientOptions = array(  'hideErrorMessage'=>false,
                                'validateOnSubmit'=>true,
                                'validateOnChange'=>false,
                                'validateOnType'=>false,
                                'afterValidateAttribute' => 'js:enableSubmitAV',
                                'afterValidate' => 'js:submitFormAV'); // always fires this after 
```

### 这是问题所在：

"$form->errorSummary($user);" 为空，注意显示在“$form->error($user,'username');”下

但是，如果我查看 Firebug，我可以在“响应”选项卡下看到：

> {"CustomUser_valid_until":["Valid Until 必须大于 \"20121127\"."]}

这是一件好事，因为这意味着我的规则很有效。但没有显示任何错误。不是这个，甚至我在控制器中添加的错误“错误 X”也没有显示...（我确定我通过了 else 语句，我试过了）。

那么，有没有人可以有一个想法？

感谢您阅读我，并为我的近似英语感到抱歉。

祝你有美好的一天 ：）

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:46:05.393

您正在重定向，这意味着调用了一个全新的请求，并删除了所有响应。

为什么要重定向到“访问/索引”而不是仅仅调用视图？如果您确实需要重定向，当然可以，请尝试设置一个 flash 变量，因为它存储在浏览器的会话中，并将通过重定向持续存在：

```
Yii::app()->user->setFlash('username', "Error X"); 
```

然后在访问/索引页面上：

```
<?php if(Yii::app()->user->hasFlash('username')):?>
    <div class="error">
        <?php echo Yii::app()->user->getFlash('username'); ?>
    </div>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:46:32.983

好吧，我终于明白了什么是错的。这是我的 CActiveForm 中的配置。选项“enableAjaxValidation”在设置为“true”时似乎会产生一些问题。我真的不知道为什么，但我之前的登录表单已经遇到过这个问题。我会尝试解决这个问题。

# android - 安卓应用内容管理系统

> ID：13473859
> 
> 赞同：2
> 
> 时间：2012-11-20T13:07:44.020
> 
> 标签：android, content-management-system

我最近开始使用 java 和 xml 在 eclipse 中编写我的第一个 android 应用程序，而且我对这两种语言都比较陌生。

我的应用程序将主要包含大学学生的静态信息，我计划将其简单地保存为 xml 本身中的文本，但客户希望在应用程序上有几个页面，其内容可以定期更改而无需查看或了解任何代码。

基本上我想做的是拥有一个只能由客户端访问的基本内容管理系统，他们可以轻松地使用它来更改这些特定页面的内容。

任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:10:42.017

如果信息允许，您可以将其集成到客户端可以通过 Web 内容管理系统更新的 Web 视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:21:38.093

您需要一个 Web 服务器，您可以从中将更新的信息作为推送通知发送。

# python - CLD 的编码问题

> ID：13473861
> 
> 赞同：0
> 
> 时间：2012-11-20T13:07:57.560
> 
> 标签：python

在 Windows 上安装 Chrome 紧凑型语言检测库出现一些[问题后，我从](https://stackoverflow.com/questions/13328180/installing-cld-libary-on-windows-and-bind-to-python)[这个 easy_install](http://www.lfd.uci.edu/~gohlke/pythonlibs/#cld)安装了 CLD 。

我现在可以使用 CLD，但遇到了一些编码问题。

## 背景

将推文提取到 python 脚本中，并在去除主题标签和链接后，将它们传递给 CLD 以检测语言。
以下是我的代码的简化版本：

```
s = "I am a tweet from Twitter"
clean_s = s.encode('utf-8')
lan = cld.detect(clean_s, pickSummaryLanguage=True, removeWeakMatches=True) 
```

## 问题

5 次中有 4 次按预期工作（返回关于它是什么语言的响应）。

但是，我不断弹出此错误：

> UnicodeEncodeError：“charmap”编解码器无法在位置 15 编码字符 u'\u2019'：字符映射到未定义

我[确实读过](http://blog.mikemccandless.com/2011/10/language-detection-with-googles-compact.html)：

> “您必须提供 CLD 干净（交换有效）的 UTF-8，因此必须事先解决任何编码问题。”

但是，我认为我的声明已经涵盖了这一点以编码为 UTF8？

我假设我需要确保将字符串传递给 CLD，以保留阿拉伯语、亚洲等语言的字体。

这是我的第一个 python 项目，所以这很可能是一个菜鸟错误。谁能指出我的错误以及如何纠正？

如果我需要收集更多信息，请在评论中告诉我，我将编辑我的 Q 以提供更多信息。

*编辑* 如果有帮助，[这是我的菜鸟代码](http://pastebin.com/3DU2BYp0)（减少复制问题）。我正在运行 Python 2.7 32 位。

运行这段代码，过了一会儿，我[得到了这个错误](http://pastebin.com/dsYkJKHE)。如果我没有正确实现错误报告，请告诉我。

```
Raw: Traceback (most recent call last):
  File "LanguageTesting.py", line 71, in <module>
    parse_tweet(tweet)
  File "LanguageTesting.py", line 43, in parse_tweet
    print "Raw:", raw
  File "C:\Python27\ArcGIS10.1\lib\encodings\cp850.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_map)
UnicodeEncodeError: 'charmap' codec can't encode characters in position 29-32: character maps to <undefined> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:41:29.713

看起来您在打印语句上失败了，对吗？这意味着 Python 无法将 unicode 字符串编码为它认为控制台的标准输出编码（“print sys.getdefaultencoding()”）。

如果 python 对您的终端的期望有误，您可以设置 env var ("export PYTHONIOENCODING=UTF-8")，它会将您打印的字符串编码为 utf-8。或者，在打印之前，您可以编码为终端期望的任何字符集（并且可能必须忽略/替换错误以避免像您遇到的异常那样的异常）...

# c - 使用 ASL 登录到 console.app

> ID：13473864
> 
> 赞同：6
> 
> 时间：2012-11-20T13:08:16.030
> 
> 标签：c, macos

在 OSX 10.8 中，输出到 stdout 和 stderr 不再以 Console.app 结尾。我想在不使用 NSLog 的情况下在 Console.app 中获得输出，因为我需要支持使用基本打印语句来打印调试信息的代码（有关一些背景信息，请参阅[https://bitbucket.org/ronaldoussoren/py2app/issue/77](https://bitbucket.org/ronaldoussoren/py2app/issue/77)）。

NSLog 输出“以某种方式”出现在 ASL（Apple 系统日志）日志中，因为您可以使用“syslog -C”查看这些日志行。这就是我尝试将此代码添加到我的应用程序的原因：

```
aslclient c = asl_open("py2app", "com.apple.console", ASL_OPT_NO_DELAY);
int fd = dup(2);
asl_set_filter(c, ASL_FILTER_MASK_UPTO(ASL_LEVEL_DEBUG));
asl_add_log_file(c, fd);
asl_log(c, NULL, ASL_LEVEL_INFO, "Hello world from py2app launcher");
asl_log_descriptor(c, NULL, ASL_LEVEL_INFO, 1, ASL_LOG_DESCRIPTOR_WRITE);
asl_log_descriptor(c, NULL, ASL_LEVEL_INFO, 2, ASL_LOG_DESCRIPTOR_WRITE); 
```

这有点工作：当我将行写入标准输出流时，这些行被 ASL 转换：输出现在以通常的日志记录前缀为前缀：

```
Nov 20 13:46:14 Gondolin.local py2app[43722] <Info>: Hello world from py2app launcher 
```

但是，日志文件不会最终出现在 ASL 数据存储区或 Console.app 中。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T17:02:06.427

以下 C 代码似乎可以满足我的要求：

```
#include <asl.h>
#include <unistd.h>
#include <stdio.h>

static void
setup_logging(void)
{
        aslmsg msg;
        aslclient c = asl_open("py2app", "com.apple.console", 0);

        msg = asl_new(ASL_TYPE_MSG);
        asl_set(msg, ASL_KEY_FACILITY, "com.apple.console");
        asl_set(msg, ASL_KEY_LEVEL, ASL_STRING_NOTICE);
        asl_set(msg, ASL_KEY_READ_UID, "-1");

        int fd = dup(2);
        //asl_set_filter(c, ASL_FILTER_MASK_UPTO(ASL_LEVEL_DEBUG));
        asl_add_log_file(c, fd);
        asl_log(c, NULL, ASL_LEVEL_INFO, "Hello world from py2app launcher");
        asl_log_descriptor(c, msg, ASL_LEVEL_INFO, 1,  ASL_LOG_DESCRIPTOR_WRITE);
        asl_log_descriptor(c, msg, ASL_LEVEL_INFO, 2, ASL_LOG_DESCRIPTOR_WRITE);
}

int main(void)
{
        setup_logging();
        printf("hello world, this is a printf\n");
} 
```

与我的第一次尝试相比，这包含一个更改：它使用 asl_log_descriptor 的“aslmsg”参数显式设置 ASL 设施、级别和 ReadUID。如果没有这些参数，消息将不会出现在 Console.app 中。尤其需要 ReadUID 才能在没有超级用户权限的情况下读取日志条目。

注意：为了方便测试，您可以使用“syslog -C | tail”来读取控制台日志。如果没有 ReadUID，我的程序输出仅在我使用“sudo syslog -C”时可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T06:35:56.153

无需执行 asl_add_log_file(c, dup(2))。

此外，您可以在调用 asl_log_descriptor 而不是在 asl_msg 中设置日志级别。请注意，在信息级别时您没有在 syslog 中看到消息的原因是默认情况下会过滤掉未通知的消息（请参阅 /etc/asl.conf）。

例子：

```
#include <asl.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main() {
    asl_log_descriptor(NULL, NULL, ASL_LEVEL_INFO, STDOUT_FILENO, ASL_LOG_DESCRIPTOR_WRITE);
    asl_log_descriptor(NULL, NULL, ASL_LEVEL_NOTICE, STDERR_FILENO, ASL_LOG_DESCRIPTOR_WRITE);
    fprintf(stdout, "This is written to stdout which will be at log level info.");
    fprintf(stderr, "This is written to stderr which will be at log level notice.");
    return 0;
} 
```

# jquery - Cufon 和 Chosen 插件

> ID：13473866
> 
> 赞同：2
> 
> 时间：2012-11-20T13:08:26.333
> 
> 标签：jquery, plugins, cufon, jquery-chosen

我正在为选择元素使用选择的插件：

```
 <select id="choose" style="width:200px" class="chzn-select">
        <option value="">Option1</option>
        <option value="opt2">Option2</option>
        <option value="opt3">Option3</option>
        <option value="opt4">Option4</option>
    </select> 
```

并激活它：

```
$(".chzn-select").chosen() 
```

我需要使用 cufon 进行文本样式设置。我正在这样做：

```
Cufon.replace('#choose_chzn', { fontFamily: 'HeliosCond', fontWeight:'400' }); 
```

它工作正常，但直到点击选择。我认为这是因为点击时生成的“新”文本。

我的建议是在某处使用 Cufon.refresh() 像这样重新加载 cufon：

```
 $(".chzn-select").chosen().change(Cufon.refresh()); 
```

但它不工作，我无法弄清楚如何让它工作......有人可以帮助我吗？

# c# - 如何访问类库中的 app.config 值？

> ID：13473867
> 
> 赞同：5
> 
> 时间：2012-11-20T13:08:28.193
> 
> 标签：c#, asp.net

我有一个使用类库的 dll 的 Web 应用程序。我无法访问`app.config`类库中的值

我如何尝试访问`app.config`：

```
ConfigurationSettings.AppSettings["conStr"].ToString(); 
```

这是返回一个空值

此外，当我尝试使用`ConfigurationManager`它时，它说未找到或缺少程序集参考。

还添加了使用 System.Configuration 。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T13:19:45.200

您必须将`AppSettings`值放在`web.config`应用程序的内部，因为它会覆盖`app.config`类库中的。

`System.Configuration`在类库项目中添加对命名空间的引用，它们会从文件中获取您期望的值`web.config`，而不是从`app.config`文件中获取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:12:51.553

在您的项目中添加对库的引用`System.Configuration`，然后像这样获取您的密钥

```
ConfigurationManager.AppSettings["conStr"] 
```

请注意，Web 应用程序将搜索`web.config`文件而不是`app.config`!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:17:36.077

AMembers 的答案应该可以让你跑步。但我喜欢*告诉*（“告诉；不要问”）我的图书馆应该在哪里连接。不要让你的库找到它的连接字符串，而是让调用代码提供它：

```
var myLib = new MyLib(ConfigurationManager.AppSettings["conStr"]); 
```

这样，无论您的配置是否在 web.config/app.config/custom config/registry/.ini 文件中，您的库都不在乎。

# ios - ios：同一类中的 UIWebview 及其委托方法不起作用

> ID：13473868
> 
> 赞同：0
> 
> 时间：2012-11-20T13:08:27.637
> 
> 标签：ios, uiwebview, uiwebviewdelegate

我想在 safari 浏览器中打开 uiwebview 的链接，如果我在 viewController 中实现 shouldStartLoadWithRequest 方法，我的代码可以正常工作，但是当我在同一个类中实现 shouldStartLoadWithRequest 并将 UIWebView 的委托设置为 self 时，它不起作用它会在两者之间停止并显示带有错误**EXC_BAD_ACCESS(code=2, address=0x9)**的汇编级代码 我的文件如下

**//ShowView.h 文件内容**

```
#import <UIKit/UIKit.h>
@interface ShowView : UIView <UIWebViewDelegate> {

}

- (void) showViewFunction;

@property (nonatomic, assign) UIViewController *mainViewContObj;

@end 
```

**//ShowView.m 文件的内容是：**

```
#import "ShowView.h"

@implementation ShowView

- (void) showViewFunction {

    UIWebView *aWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 150)];
    aWebView.autoresizesSubviews = YES;
    aWebView.autoresizingMask = (UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth);
    [aWebView setDelegate:self];
    NSString *urlAddress = @"http://localhost/test/index.php";
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    aWebView.delegate = self;
    [aWebView loadRequest:requestObj];
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
    [[[self mainViewContObj] view] addSubview:aWebView];
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request
 navigationType:(UIWebViewNavigationType)navigationType {

    NSLog(@"In shouldStartLoadWithRequest method");

    if ([[[request URL] absoluteString] isEqual:@"http://localhost/test/index.php"])
        return YES;

    [[UIApplication sharedApplication] openURL:[request URL]];
    return NO;
}

@end 
```

**// ViewController.h 的内容**

```
#import "ViewController.h"
#import "ShowView.h"

@interface mnetViewController ()

@end

@implementation mnetViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    MNETMobAd *bannerObj = [[MNETMobAd alloc] init];
    bannerObj.mainViewContObj = self;    
    [bannerObj showAd];

}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

有时会显示 html 页面，但是当我单击链接时，它会在同一个 UIWebview 窗口中打开，甚至没有进入 shouldStartLoadWithRequest 方法，我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:20:18.960

您的代码不清楚，可能需要更多信息，但据我所知， ShowView 类从未实例化，因此它甚至不应该显示。

我猜你应该做这样的事情：

//mnetViewController.m

```
 #import "mnetViewController.h"
    #import "ShowView.h"

    @interface mnetViewController ()

    @end

    @implementation mnetViewController

    - (void)viewDidLoad {
        [super viewDidLoad];

    ShowView* theShowView = [[ShowView alloc] initWithFrame:CGRectMake(insert the frame you want your webview to have)];
theShowView.autoresizesSubviews = YES;

    [self.view addSubview:theShowView];
    [theShowView release];

        MNETMobAd *bannerObj = [[MNETMobAd alloc] init];
        bannerObj.mainViewContObj = self;    
        [bannerObj showAd];

    } 
```

现在对于 ShowView 类，尝试这样的事情：

//ShowView.h

```
#import <UIKit/UIKit.h>
@interface ShowView : UIView <UIWebViewDelegate> {

}
@end 
```

//ShowView.m

```
#import "ShowView.h"

@implementation ShowView

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
    if (self) 
    {
 UIWebView *aWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width, frame.size.height)];

    aWebView.scalesPageToFit = YES;
    [aWebView setDelegate:self];
[self addSubview:aWebView];    

NSString *urlAddress = @"http://localhost/test/index.php";
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [aWebView loadRequest:requestObj];

[aWebView release];
}
    return self;
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request
 navigationType:(UIWebViewNavigationType)navigationType {

    NSLog(@"In shouldStartLoadWithRequest method for URL : %@",[request [URL absolutString]]);

    if ([[[request URL] absoluteString] isEqual:@"http://localhost/test/index.php"])
        return YES;

    [[UIApplication sharedApplication] openURL:[request URL]];
    return NO;
} 
```

这应该可以，我没试过，如果有必要我明天回来试试。

# c# - 用于休眠条件的 sql 语句

> ID：13473869
> 
> 赞同：0
> 
> 时间：2012-11-20T13:08:28.667
> 
> 标签：c#, sql, nhibernate

以下 SQL 语句的 nhibernate（3.3 版）查询（标准？）中的语法是什么：

```
SELECT DISTINCT usr.* FROM User usr, User_SecurityGroup grp, SecurityGroup_Permission prm, Permission org 
WHERE usr.Id = grp.User_id AND grp.SecurityGroup_id = prm.SecurityGroup_id AND org.Id = prm.Permission_id 
AND org.Site_id IN (1,2,3) AND org.PermRead = 1 AND usr.Active = 1 AND org.Active = 1; 
```

**我不确定如何在表和标准语法之间完成连接以完成此类任务。**

对于此特定查询，将传入站点 ID 列表

同样条件“org.PermRead = 1”，属性名称将是动态的。所以它可能是“PermWrite”。

编辑：好的，这就是我到目前为止所拥有的

```
 ICriteria criteria = this.Session.CreateCriteria<User>();

        criteria.Add(Restrictions.In("User.Site", siteList.ToArray()));
        criteria.Add(Restrictions.Eq("User.Active", true));
        criteria.Add(Restrictions.Eq("Site.Active", true));
        criteria.Add(Restrictions.Eq(Enum.GetName(typeof(Perm.Types), access), true));

        criteria.SetResultTransformer(Transformers.DistinctRootEntity);
        return criteria.List<User>(); 
```

我认为加入的格式如下：

```
 criteria.CreateAlias("Sites", "Sites", NHibernate.SqlCommand.JoinType.LeftOuterJoin); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:38:47.807

```
ICriteria criteria = Session.CreateCriteria<User>()
    .Add(Restrictions.Eq("Active", true))
    .CreateCriteria("Sites", "Site"); 
        .Add(Restrictions.In("Id", siteList.ToArray()))
        .Add(Restrictions.Eq("Active", true))
        .Add(Restrictions.Eq(access.ToString(), true))

return criteria.List<User>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:00:42.180

我最终得到了这个：

```
 ICriteria criteria = Session.CreateCriteria<User>()
            .CreateAlias("SecurityGroups", "SecurityGroups")
            .CreateAlias("SecurityGroups.Permissions", "Permissions")
            .Add(Restrictions.Eq("Permissions.Active", true))
            .Add(Restrictions.Eq("Active", true))
            .Add(Restrictions.In("Permissions.Site", ids.ToArray()))
            .Add(Restrictions.Eq("Permissions.Perm" + Enum.GetName(typeof(Perm.Types), accessRight), Perm.Level.Allow));
        return criteria.List<User>(); 
```

# asp.net - 如何在 ASP.NET 中实现悲观锁定

> ID：13473871
> 
> 赞同：3
> 
> 时间：2012-11-20T13:08:35.670
> 
> 标签：asp.net, sql, sql-server, asp.net-mvc, asp.net-mvc-3

有一个名为 Accounts 的表。表结构如下所示：

```
 AccountID  AccountName  AccountTotalMoney

   1           Stsven          3000 
```

该帐户（其中 AccountID=1）被许多用户共享。

因此，当用户更新帐户（锁定帐户）时，我想阻止其他人更新帐户。

我拜访了

[在 .NET 中进行锁定的 6 种方法](http://www.codeproject.com/Articles/114262/6-ways-of-doing-locking-in-NET-Pessimistic-and-opt#How%20can%20we%20solve%20concurrency%20problems)

但我还不明白。对不起我的英语不好。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:19:19.227

您可以使用 TransactionScope 来实现悲观锁定（更改隔离级别）

我认为这篇文章可以提供帮助：[使用 System.Transactions TransactionScope 设置 IsolationLevel。](http://blogs.msdn.com/b/angelsb/archive/2004/07/27/199261.aspx)

请注意，您发布的链接中提到的“悲观锁定”是“悲观并发”的不同概念。确保它是你想要的东西。

# ruby-on-rails - Rails 3 的内部消息系统

> ID：13473883
> 
> 赞同：0
> 
> 时间：2012-11-20T13:08:58.733
> 
> 标签：ruby-on-rails, messaging

任何人都可以告诉我消息系统的一个很好的宝石，带有附件功能，可以在应用程序中发送消息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:20:02.210

在这种情况下，查看用于该领域项目的优秀 RubyToolbox 很有用。

[https://www.ruby-toolbox.com/categories/User_Messaging_Systems](https://www.ruby-toolbox.com/categories/User_Messaging_Systems)

他们列出了许多消息系统，应用程序中的用户可以在这些系统中相互发送消息

# java - 我可以禁用 JVM 字符串池吗？

> ID：13473887
> 
> 赞同：4
> 
> 时间：2012-11-20T13:09:04.827
> 
> 标签：java, string, jvm

我有一个在字符串池中存储 3 MB 的应用程序，这对于这个特定的应用程序来说是相当大的内存量。我想自己管理所有的字符串，避免他们去 PermGen。我知道 Java 7 将实习字符串放在堆上，但不幸的是 Java 7 现在不是一个选项。

有一种方法可以在 Java 6 上禁用 JVM 字符串池，或者至少有一种方法可以使字符串文字不去那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:18:03.440

根据 jlordo 的链接 - 你不能禁用它。但是，如果您想避免实习，您可以从文件中加载字符串 - 这样它们就不会被实习，除非您明确说明。

# .net - MEF 实例化和多线程

> ID：13473893
> 
> 赞同：2
> 
> 时间：2012-11-20T13:09:21.213
> 
> 标签：.net, c#-4.0, mef, factory, abstract-factory

我在 .Net 4.0 中使用 MEF 为我节省了大量的抽象工厂代码和配置 gubbins。无法移动到 .net 4.5，因为它未部署。

**班上**

```
/// <summary>
/// Factory relies upon the use of the .net 4.0 MEF framework
/// All processors need to export themselves to make themselves visible to the 'Processors' import property auto MEF population
/// This class is implemented as a singleton
/// </summary>
public class MessageProsessorFactory
{
    private static readonly string pluginFilenameFilter = "Connectors.*.dll";
    private static CompositionContainer _container;
    private static MessageProsessorFactory _instance;
    private static object MessageProsessorFactoryLock = new object();

    /// <summary>
    /// Initializes the <see cref="MessageProsessorFactory" /> class.
    /// Loads all MEF imports
    /// </summary>
    /// <exception cref="System.NotSupportedException"></exception>
    private MessageProsessorFactory()
    {
        lock (MessageProsessorFactoryLock)
        {
            if (_container == null)
            {
                RemoveDllSecurityZoneRestrictions();

                //Create a thread safe composition container
                _container = new CompositionContainer(new DirectoryCatalog(".", pluginFilenameFilter), true, null);

                _container.ComposeParts(this);
            }
        }
    }

    /// <summary>
    /// A list of detected class instances that support IMessageProcessor
    /// </summary>
    [ImportMany(typeof(IMessageProcessor), RequiredCreationPolicy = CreationPolicy.NonShared)]
    private List<Lazy<IMessageProcessor, IMessageProccessorExportMetadata>> Processors { get; set; }

    /// <summary>
    /// Gets the message factory.
    /// </summary>
    /// <param name="messageEnvelope">The message envelope.</param>
    /// <returns><see cref="IMessageProcessor"/></returns>
    /// <exception cref="System.NotSupportedException">The supplied target is not supported:  + target</exception>
    public static IMessageProcessor GetMessageProcessor(MessageEnvelope messageEnvelope)
    {
        if (_instance == null)
            _instance = new MessageProsessorFactory();

        var p = _instance.Processors.FirstOrDefault(
                    s => s.Metadata.ExpectedType.AssemblyQualifiedName == messageEnvelope.AssemblyQualifiedName);

        if (p == null)
            throw new NotSupportedException(
                "The supplied type is not supported: " + messageEnvelope.AssemblyQualifiedName);

       return p.Value;

    }

    /// <summary>
    /// Removes any zone flags otherwise MEF wont load files with
    /// a URL zone flag set to anything other than 'MyComputer', we are trusting all pluggins here.
    /// http://msdn.microsoft.com/en-us/library/ms537183(v=vs.85).aspx
    /// </summary>
    private static void RemoveDllSecurityZoneRestrictions()
    {
        string path = System.IO.Path.GetDirectoryName(
                            System.Reflection.Assembly.GetExecutingAssembly().Location);

        foreach (var filePath in Directory.EnumerateFiles(path, pluginFilenameFilter))
        {
            var zone = Zone.CreateFromUrl(filePath);

            if (zone.SecurityZone != SecurityZone.MyComputer)
            {
                var fileInfo = new FileInfo(filePath);
                fileInfo.DeleteAlternateDataStream("Zone.Identifier");
            }
        }
    }
} 
```

调用之后`_container.ComposeParts(this);`，处理器会填充所有找到的 IMessageProcessor 实现。伟大的。

**笔记**

*   GetMessageProcessor 被许多线程调用。
*   我们无法控制开发人员如何构建 IMessageProcessor 的类实现，因此我们不能保证它们是线程安全的 - 可重入。但是，该类必须使用 Export 属性进行检测。

**导出属性**

```
 [MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class MessageProccessorExportAttribute : ExportAttribute
{
    public MessageProccessorExportAttribute()
        : base(typeof(IMessageProcessor))
    {
    }

    public Type ExpectedType { get; set; }
} 
```

*   ExpectedType 只是元数据，它记录了 IMessageProcessor.ProcessMessage() 期望处理的内容，纯粹是实现细节。

我的问题是，我到处都读到，每个 Imported 实例都是一个 Singleton，无论其通过 Lazy<> 引用构造时的激活策略如何。

因此，我们不能允许从 MEF 中的实例从 GetMessageProcessor 返回，因为多个线程将获取相同的实例，这是不希望的。啊！我想知道以下“解决方法”是否是最好的方法，或者我是否把 MEF 坚持概念弄错了。

我的解决方法是将看似毫无意义的`RequiredCreationPolicy = CreationPolicy.NonShared`属性设置更改为`CreationPolicy.Shared`.

然后更改函数 GetMessageProcessor 以手动创建一个新实例，与 MEF 完全分离。使用 MEF 共享实例 plurry 作为类型列表。

```
IMessageProcessor newInstance = (IMessageProcessor)Activator.CreateInstance(p.Value.GetType()); 
```

完整的方法；

```
public static IMessageProcessor GetMessageProcessor(MessageEnvelope messageEnvelope)
    {
        if (_instance == null)
            _instance = new MessageProsessorFactory();

        var p = _instance.Processors.FirstOrDefault(
                    s => s.Metadata.ExpectedType.AssemblyQualifiedName == messageEnvelope.AssemblyQualifiedName);

        if (p == null)
            throw new NotSupportedException(
                "The supplied type is not supported: " + messageEnvelope.AssemblyQualifiedName);

        // we need to create a new instance from the singleton instance provided by MEF to assure we get a instance un-associated with the MEF container for
        // currently as of .net 4.0 it wants to keep references on objects which may impact memory consumption.
        // As we have no control over how a developer will organise there class that exposes an Export,
        // this could lead to multithreading issues as an imported lazy instance is a singleton regardless 
        // of the RequiredCreationPolicy.
        // MEF is still invaluable in avoided a tone of abstract factory code and its dynamic detection of all supporting 
        // Exports conforming to IMessageProcessor means there is no factory config for us to maintain.

        IMessageProcessor newInstance = (IMessageProcessor)Activator.CreateInstance(p.Value.GetType());

        return newInstance;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:44:10.940

像这样的东西应该工作：

```
public class MessageProsessorFactory
{
   private const string pluginFilenameFilter = "Connectors.*.dll";
   private static readonly Lazy<CompositionContainer> _container 
      = new Lazy<CompositionContainer>(CreateContainer, true);

   private static CompositionContainer CreateContainer()
   {
      RemoveDllSecurityZoneRestrictions();
      var catalog = new DirectoryCatalog(".", pluginFilenameFilter);
      return new CompositionContainer(catalog, true, null);
   }

   public static IMessageProcessor GetMessageProcessor(MessageEnvelope messageEnvelope)
   {
      var processors = _container.Value.GetExports<IMessageProcessor, IMessageProccessorExportMetadata>();
      var p = processors.FirstOrDefault(s => s.Metadata.ExpectedType.AssemblyQualifiedName == messageEnvelope.AssemblyQualifiedName);
      if (p == null) throw new NotSupportedException("The supplied type is not supported: " + messageEnvelope.AssemblyQualifiedName);
      return p.Value;
   }

   private static void RemoveDllSecurityZoneRestrictions()
   {
      // As before.
      // PS: Nice to see someone found a use for my code! :)
      // http://www.codeproject.com/Articles/2670/Accessing-alternative-data-streams-of-files-on-an
      ...
   }
} 
```

# ruby-on-rails - 语法错误 - 预期 tCOLON2 的意外 tASSOC

> ID：13473895
> 
> 赞同：0
> 
> 时间：2012-11-20T13:09:22.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

[从这里](https://github.com/mguymon/stiki#readme)使用 stiki gem

在 Stiki 配置部分，它说你可以让它对这样的某些页面进行身份验证。

```
stiki.authenticate_pages = :all   # other options are :only => [actions]  or :except => [actions] 
```

我尝试过的是做

```
stiki.authenticate_pages, :only => [:new] 
```

但我在下面得到这个错误

```
C:\Users\X\Documents\GitHub\X>rails s
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/act
ive_support/dependencies.rb:245:in `load': C:/Users/X/Documents/GitHub/X/config/initializers/stiki.rb:10: syntax error, unexpected tASSOC, expecting tC
OLON2 or '[' or '.' (SyntaxError)
...ki.authenticate_pages, :only => [:new]  # other options are ...
...                               ^ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:11:59.860

尝试

```
stiki.authenticate_pages = {:only => [:new]} 
```

或者

```
stiki.authenticate_pages :only => [:new] 
```

# jquery - 在不单击子项的情况下删除父项

> ID：13473904
> 
> 赞同：4
> 
> 时间：2012-11-20T13:09:49.360
> 
> 标签：jquery, layer, children

我在 A 层内有 A 层和 B 层

![在此处输入图像描述](../Images/fc099580278ab996f6eb63fcc38dc5e8.png)

[http://jsfiddle.net/PhZhY/](http://jsfiddle.net/PhZhY/)

`remove()`是否可以通过仅单击 A 层而不是 B 层的 jQuery 函数来删除 A层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:11:05.067

```
$("body").on("click", ".a1", function(e) {
    if (this === e.target) $(this).remove();
});​ 
```

**演示：http:** [//jsfiddle.net/PhZhY/1/](http://jsfiddle.net/PhZhY/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T13:15:23.617

**如果你想`.b1`保留和删除只是`.a1`**

```
$('.a1').live('click',function() {
     $(".b1", this).unwrap();
}); 
```

[http://jsfiddle.net/PhZhY/3/](http://jsfiddle.net/PhZhY/3/)

即使您不知道任何子元素，也可以删除该 div：

```
$('.a1').live('click',function() {
     $(".a1 :first-child").unwrap();
}); 
```

[http://jsfiddle.net/PhZhY/5/](http://jsfiddle.net/PhZhY/5/)

**如果你想删除`.a1`div 如果它没有被点击，`.b2`这就是你需要的：**

```
$('.a1').live('click',function() {
     $(".a1 :first-child").unwrap();
});

$('.b1').live('click',function() {
 throw "stop execution";
});​ 
```

[http://jsfiddle.net/PhZhY/6/](http://jsfiddle.net/PhZhY/6/)

根据@Rick Calder 的评论：如果您愿意，可以使用`.addClass()`更改类或`.removeClass()`删除类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:19:49.887

这是我阅读问题的方式：

如果单击`.b1`，则不会发生任何事情。如果你点击`.a1`它应该被删除。

如果这是意图，这里是 jQuery：

```
$('.b1').click( function(e){
  e.stopImmediatePropagation();
});

$('.a1').click( function(){
  $(this).remove();
}); 
```

这是一个[jsbin](http://jsbin.com/iserij/1/edit)。注意：从@Vision 的 jsFiddle 无耻地窃取 css、html

# delphi - 取消 firebird 中长时间运行的查询或事务

> ID：13473905
> 
> 赞同：2
> 
> 时间：2012-11-20T13:09:54.627
> 
> 标签：delphi, firebird

我怎样才能安全地中止/取消当前正在运行的查询/事务。使用 gfix -shut 可能会损坏数据库。我正在使用 delphi 和 firebird 2.5

提前感谢雷纳尔迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:20:18.680

Gfix 不能损坏数据库。它使用运行查询的安全终止并回滚所有活动事务。

您可以通过执行 DELETE FROM MON$STATEMENTS WHERE MON$STATEMENT_ID = ... 来取消给定的查询

您可以通过执行 DELETE FROM MON$CONNECTIONS WHERE CONNECTION_ID = ... 来关闭整个附件

所有查询都应从并行附件运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:41:18.807

在 Andrej 提供的答案旁边，Firebird 2.5 API 还包括[`fb_cancel_operation`](http://www.ib-aid.com/articles/item114)取消数据库句柄上所有正在运行的操作的命令。您需要检查您的 Delphi 组件是否支持此功能。

# iphone - 删除 NSMutableAttributedString 中的特殊字符

> ID：13473908
> 
> 赞同：-1
> 
> 时间：2012-11-20T13:10:00.150
> 
> 标签：iphone, ios, nsattributedstring, catextlayer

在我的应用程序中显示文本`CATextLayer`（更改字符颜色），`NSMutableAttributedString`用于更改颜色，我想删除特殊字符`NSMutableAttributedString`以显示弹出视图，但不知道如何删除特殊字符，以帮助解决问题

我想要这种类型的o/p

```
"code" to code  //in NSMutableAttributedString, not in NSString 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:17:49.830

to remove such characters you simply write something like this:

```
NSMutableString* mutableString = ...;
[mutableString replaceOccurrencesOfString:@"\"" withString:@"" options:0 range:NSMakeRange(0, mutableString.length)]; 
```

Note that symbol " is written as \" - this one is called an escape sequence. Here is a list of such special characters in C - [http://msdn.microsoft.com/en-us/library/h21280bw(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/h21280bw(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:26:18.327

试试这个...这可能会帮助你。

```
NSMutableString *unfilteredString = @"!@#$%^&*()_+|abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
NSCharacterSet *notAllowedChars = [[NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"] invertedSet];
NSMutableString *resultString = [[unfilteredString componentsSeparatedByCharactersInSet:notAllowedChars] componentsJoinedByString:@""];
NSLog (@"Result: %@", resultString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:38:04.430

您可以尝试一下，它可能适合您的代码：

```
 NSMutableString *mutableStrng = [NSMutableString stringWithCapacity:1000];
[mutableStrng setString:@"my name is i#pho#ne"];

[mutableStrng replaceOccurrencesOfString:@"#" withString:@"" options:0 range:NSMakeRange(0,
 mutableStrng.length)];
NSMutableAttributedString *mutableAtrString = [[NSMutableAttributedString
 alloc]initWithString:mutableStrng]; 
```

# c#-4.0 - 用户控件不显示

> ID：13473910
> 
> 赞同：0
> 
> 时间：2012-11-20T13:10:03.660
> 
> 标签：c#-4.0, inheritance

我正在开发一种屏幕管理器，代码如下：

```
/// <summary>
/// Change the screen according to type
/// </summary>
/// <author>Kay van Bree</author>
/// <param name="type">Replacement screen type</param>
public void ChangeScreen(ScreenType type)
{
    // Swap old screen with loading screen
    ReplaceScreen(screen, new LoadingScreen(this));
    UserControl newScreen;

    // Get instance of correct screen
    switch(type)
    {
        case ScreenType.login:
            newScreen = new LoginScreen(this);
            break;
        case ScreenType.dashboard:
            newScreen = new DashboardScreen(this);
            break;
        default: 
            newScreen = new LoginScreen(this);
            break;
    }

    // Swap loading screen with new screen
    ReplaceScreen(screen, newScreen);
    Text = "Attendance Tracker | " + screen;
}

private void ReplaceScreen(UserControl oldScreen, UserControl newScreen)
{
    Controls.Remove(oldScreen);
    screen = newScreen;

    // Initialize screen
    newScreen.BackColor = Color.Transparent;
    newScreen.Location = new Point((Size.Width - screen.Size.Width) / 2, (Size.Height - screen.Size.Height) / 2);

    Controls.Add(newScreen);
} 
```

此函数的目标是在初始化另一个 UserControl（屏幕是 UserControl 的子类）时显示加载屏幕。当 UserControl 被初始化时，它会移除 Loading 屏幕并将 UserControl 添加到控件中。

问题是我的加载屏幕（也是一个用户控件）不会出现。在其他 UserControl 初始化之前，它不会执行任何代码。

我似乎找不到解决方案，或者根本找不到问题所在。你能解释一下这种行为吗？我是否错误地接近加载屏幕？C# 是否在不同的线程中加载构造函数？有什么问题？

[编辑]顺便说一句。加载屏幕只是我想添加的东西。屏幕管理器的其余部分工作得很好，所以如果我处理错了，我可能会放弃整个加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:44:18.277

一个简单的 Refresh() 解决了我的问题。

# javascript - Ajax 与 Jsf 1.1 实现

> ID：13473911
> 
> 赞同：2
> 
> 时间：2012-11-20T13:10:06.077
> 
> 标签：javascript, ajax, jsf

我正在使用 JSF1.1，我想从第一个更新第二个 selectOneMenu 并拥有这个代码_

```
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://www.azureworlds.org" prefix="azure"%>
<%@ taglib uri="http://myfaces.apache.org/tomahawk" prefix="x"%>
<%@ taglib uri="http://www.asifqamar.com/jsf/asif" prefix="a"%> 
```

...

```
<h:outputText value="State* " />
<x:selectOneMenu value="#{hotelBean.state}">
                    <f:selectItem itemLabel="Select One" itemValue="" />
                    <f:selectItem value="#{hotelBean.mapStates }" />
                    <x:ajax update="city" listener="#{hotelBean.handleCityChange}" />

</x:selectOneMenu>

                <h:outputText value="City* " />
                <x:selectOneMenu id="city" value="#{hotelBean.city}">

                    <f:selectItem itemLabel="Select One" itemValue="" />

                    <f:selectItem value="#{hotelBean.mapCities }" />
                </x:selectOneMenu> 
```

行*x:ajax update="city" listener="#{hotelBean.handleCityChange}"* 不起作用，我搜索但 JSF1.1 不支持 Ajax。

那么我该怎么做呢，我怎么能使用javascript呢？而且我对JS的了解较少。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T11:14:43.597

根据[Tomahawk 1.1 标签文档](http://myfaces.apache.org/tomahawk-project/tomahawk/tagdoc.html)，根本没有`<t:ajax>`标签（是的，我知道您出于某种不清楚的原因将`t`前缀重命名为，为了保持一致性，我将继续调用它）。`x``t`

以前，在 JSF 1.1 时代，人们会为此使用 Ajax4jsf 标签库，当时它仍然是一个单独的项目，可在[http://ajax4jsf.dev.java.net](http://ajax4jsf.dev.java.net)上找到。JSF 没有其他像样的 Ajax 库。我隐约记得 Dojo 之上的某个库是对[这篇 IBM 文章](http://www.ibm.com/developerworks/web/library/wa-aj-jsfdojo/index.html)的抄袭，但它并不受欢迎。后来，在 JSF 1.2 时代初期，Ajax4jsf 被[JBoss RichFaces](http://jboss.org/richfaces)收购，并作为其子库。从那以后，您不能再从官方网站单独下载 Ajax4jsf，您必须同时下载整个 RichFaces 组件库。

但是，在 Maven 存档的某个深处，您仍然可以下载原始的 Ajax4jsf 库。这是：[Ajax4jsf 1.0.6](http://mvnrepository.com/artifact/net.java.dev.ajax4jsf/ajax4jsf/1.0.6)。原始的 java.net 站点已关闭，因此原始开发人员指南也不再可用。然而，[谷歌](http://google.com/search?q=ajax4jsf%201.0%20developer%20guide)显示有一个网站有[原始 Ajax4jsf 开发人员指南的在线备份](http://ac.aua.am/Cis/Avsl/Literature/Jsf/ebooks/Ajax4JSF/developerGuide.html)（该网站非常慢；一旦完成下载，我会创建一个离线副本以便更快地参考以及它曾经出现故障的情况） . 此外，还有一篇关于如何设置和使用它的[JavaWorld 文章](http://www.javaworld.com/javaworld/jw-09-2006/jw-0911-jsf.html)（结合 MyFaces）。

最终，您希望最终使用`<a4j:support>`如下内容：

```
<%@ taglib uri="https://ajax4jsf.dev.java.net/ajax" prefix="a4j"%>
...
<h:outputLabel for="state" value="State* " />
<t:selectOneMenu id="state" value="#{hotelBean.state}">
    <f:selectItem itemLabel="Select One" itemValue="" />
    <f:selectItem value="#{hotelBean.mapStates }" />
    <a4j:support event="onchange" actionListener="#{hotelBean.handleCityChange}" reRender="city" />
</t:selectOneMenu>
<h:outputLabel for="city" value="City* " />
<t:selectOneMenu id="city" value="#{hotelBean.city}">
    <f:selectItem itemLabel="Select One" itemValue="" />
    <f:selectItem value="#{hotelBean.mapCities }" />
</t:selectOneMenu> 
```

# php - 正则表达式解析模板回显

> ID：13473912
> 
> 赞同：0
> 
> 时间：2012-11-20T13:10:07.993
> 
> 标签：php, regex

我正在尝试使用正则表达式解析一些输入。输入将采用以下格式：

{一些值：3}

目的是显示“som”（无引号）。

目前，我有：

```
 'echo' => array(
            'search' => '~\{((?:'.$this->preg['var'].')(?:\.)?)\}~sU',
            'replace' => "'.\$this->_get('\\1').'"
        ) 
```

这对我的模板系统非常有用，可以回显标准变量（即'somevalue'）。但是，我希望允许用户使用 : 分隔符来限制要输出的字符数（即 {somevalue:3} 将显示 'som'）。

我试过了：

```
'echo' => array(
            'search' => '~\{((?:'.$this->preg['var'].')(?:\.)?:(.*)/)\}~sU',
            'replace' => "'.substr(\$this->_get('\\1'),0,\\2).'"
        ) 
```

但这没有用。老实说，我不太了解正则表达式，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:24:44.560

看起来您在新的搜索表达式中有一个额外的“/”。

```
 |
                                                       v
'search' => '~\{((?:'.$this->preg['var'].')(?:\.)?:(.*)/)\}~sU', 
```

我不熟悉您使用的模板系统，但似乎替换表达式也需要更改。

```
'replace' => "'.substr(\$this->_get('\\1'),0,\$this->_get('\\2')).'" 
```

把这些放在一起，你会得到这样的尝试：

```
'echo' => array(
            'search' => '~\{((?:'.$this->preg['var'].')(?:\.)?:(.*))\}~sU',
            'replace' => "'.substr(\$this->_get('\\1'),0,\$this->_get('\\2')).'"
        ) 
```

应该注意的是，如果这有效，那么旧的输入方式将不再有效。换句话说，您将始终必须使用格式`{<string>:<num_of_chars>}`，而不仅仅是`{<string>}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:35:37.407

```
$s = preg_replace_callback(
       '/\{([^:]+):(\d+)\}/',
       create_function('$m', 'return substr($m[1], 0, $m[2]);'), $s); 
```

**[在此处](http://ideone.com/QJLPVS)**测试此代码。

# .htaccess - 我的 .htaccess 给了我一个 Forbidden 错误

> ID：13473913
> 
> 赞同：0
> 
> 时间：2012-11-20T13:10:07.273
> 
> 标签：.htaccess, content-management-system

我在网站的根目录中有以下内容：

```
 RewriteEngine on
    RewriteRule ^([^./]{3}[^.]*)$ /index.php?page=$1 [QSA,L] 
```

.htaccess 应该重定向任何 3 个字符或更长的请求，而不需要 . 在 index.php/$string-text 的字符串中查询我的 CMS 数据库以获取输出，但是当我尝试加载索引页面时，我收到 403 禁止错误...我的 .htaccess 知识非常基础，所以请尝试对我轻松一点！:)

谢谢

里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:21:54.730

好的！所以我发现了问题，解释了 apache error_log 文件我需要将它添加到我的 .htaccess 文件和 httpd.conf 文件中 - >“Options +FollowSymLinks +SymLinksIfOwnerMatch”并且它有效！现在创建我的虚拟主机，我很高兴！！！谢谢！！！！！

谢谢

里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T23:38:13.200

`.htaccess`您的文件似乎没有任何意外。如果未正确配置 mod 重写，我预计会看到 404 错误或用户被错误地重定向。因为情况似乎并非如此；您需要扩大搜索范围以检查是否存在不合适的安全设置。

我在 httpd.conf 文件中看不到任何明显的内容，但这里有一些您可能想要采取的步骤。

1.  删除`.htaccess`文件——如果网站加载正常——那么这个文件会以某种方式引起问题；如果没有，那么还有其他问题。
2.  检查正在使用的 Web 目录的权限；可能存在权限问题。
3.  检查 httpd 错误日志以获取建议。
4.  在`serverfault.com`或 poweruser 堆栈交换站点提出问题。

# networking - 路由器和IP地址

> ID：13473916
> 
> 赞同：-2
> 
> 时间：2012-11-20T13:10:12.577
> 
> 标签：networking, network-protocols

网络 MCQ 问题出现在 Gate 2008 中，而不是家庭作业。
主机 X 有 IP 地址`192.168.1.97`，并通过两个路由器 R1 和 R2 连接到另一个具有 IP 地址的主机`192.168.1.80`Y。路由器 R1 的 IP 地址`192.168.1.135`和`192.168.1.110`. R2 有 IP 地址`192.168.1.67`，`192.168.1.155`网络中使用的网络掩码是`255.255.255.224`。
**保证网络中已经存在多少个不同的子网？选项 (a)1 (b)2 (c)3 (d)6 和 X 应将其网关配置为哪个 IP 地址？options 应该是为 R1 和 R2 提供的路由器地址之一**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:20:01.043

您的设置正在使用`3 subnets (Host X - R1, R1 - R2, R2 - Host Y)`. 您应该总共有 8 个子网，每个子网有 30 个可用主机。

主机 X 通常应该将连接的路由器接口配置为他的`default gateway, so 192.168.1.110`.

查看两个链接以获取有关子网划分的更多信息：

*   [http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a00800a67f5.shtml](http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a00800a67f5.shtml)
*   [http://www.fruned.com/dwn/Network-Fundamentals-CCNA-Exploration-Companion-Guide-Mark%20A.%20Dye.pdf](http://www.fruned.com/dwn/Network-Fundamentals-CCNA-Exploration-Companion-Guide-Mark%20A.%20Dye.pdf)（第 6 章）

# php - 运行 PHP 脚本以检查 rss 提要是否已更改

> ID：13473918
> 
> 赞同：1
> 
> 时间：2012-11-20T13:10:12.233
> 
> 标签：php, cron

我正在寻找一个 PHP 脚本来检查网站 RSS 提要是否基于特定术语进行更改，然后通过电子邮件向我发送通知。

我知道如何设置电子邮件系统和设置 cron 作业，但我不知道如何让 PHP 搜索 RSS 提要中的术语 :(

示例：我将脚本设置为 BBC 新闻`http://feeds.bbci.co.uk/news/rss.xml`（

我不是要任何人给我写一个脚本，但是如果有人知道任何设置 RSS 搜索的教程，那就太好了，也不需要全部是唱歌脚本，它只适合我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:12:48.830

RSS 只是普通的 XML，可以很容易地用[`DOM`](http://php.net/manual/en/book.dom.php).

```
$doc = new DOMDocument();
$doc->load('http://feeds.bbci.co.uk/news/rss.xml'); 
```

然后解析它[`xPath`](http://www.php.net/manual/en/class.domxpath.php)

```
$xpath = new DOMXPath($doc);
foreach( $xpath->query( '//item') as $node){
    // $node is DOMElement
} 
```

拥有项目节点后，您可以使用以下方法轻松获得标题[`GetElementesByTagName()`](http://www.php.net/manual/en/domelement.getelementsbytagname.php)：

```
$titleNodes = $node->GetElementsByTagName('title');
if( $titleNodes->length < 1){
   // Error
}
$title = $titleNodes->item(0)->nodeValue; 
```

或者，如果您可以依靠始终包含的有效 rss `<title>`：

```
$title = $node->GetElementsByTagName('title')->item(0)->nodeValue; 
```

# silverlight-4.0 - INotifyDataErrorInfo.GetErrors 应该返回什么类型的 IEnumerable？

> ID：13473919
> 
> 赞同：6
> 
> 时间：2012-11-20T13:10:13.410
> 
> 标签：silverlight-4.0

让我大吃一惊的是，MSDN 的官方文档没有说明 INotifyDataErrorInfo 的 GetErrors 返回的可枚举的底层对象类型应该是什么：http: [//msdn.microsoft.com/en-us/library/system .componentmodel.inotifydataerrorinfo.geterrors(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo.geterrors(v=vs.95).aspx)

选项有：System.String、System.Object、MyCustomObject、ISomeOtherShitThatDoesntHaveAnythingToDoWithValidationWhatsoever

任何人都可以向我解释一个任意可枚举的对象如何可以在不对其结构做出任何假设的情况下通知错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:13:06.103

提供更多信息的[文档：`INotifyDataErrorInfo`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo%28v=vs.95%29.aspx)

> GetErrors 方法返回的验证错误可以是任何类型。但是，如果您实现自定义错误类型，请确保重写 ToString 方法以返回错误消息。Silverlight 在其默认错误报告中使用此字符串。
> 
> 当您在用户界面中提供自定义错误报告时，自定义错误对象很有用。例如，您可以为绑定到 ErrorLevel 属性的报告工具提示创建模板，以便以黄色显示警告，以红色显示严重错误。

`GetErrors`返回该文档的示例部分中有一个链接：

> 有关此方法的实现示例，请参阅`INotifyDataErrorInfo`类概述。

我同意它可能没有那么清楚，但是文档在那里......

# android - android sdk 与 wi-fi direct 不兼容

> ID：13473920
> 
> 赞同：0
> 
> 时间：2012-11-20T13:10:15.757
> 
> 标签：android, android-intent, wifi-direct

我正在开发一个使用 wi-fi direct 模块的应用程序。众所周知，它在 Android 4.0 之前不可用，但我想在没有 wi-fi direct 的情况下保持兼容性。

问题是我正在使用来自 Channel 或 WifiP2pManager 等类的实例变量。当然，在 ICS 的早期版本中，它们将不可用。我只是在遵循 Android 官方开发者指南，所以看起来我没有做错任何事情。

关于如何解决这个问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:14:59.610

> ```
> if(Build.VERSION_CODES < Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
>     // compat code here
> } else {
>   // normal code here
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:14:15.123

使您的代码有条件，例如

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES. ICE_CREAM_SANDWICH ) {

  // something

} 
```

或在清单中设置 minSdk 版本

```
android:minSdkVersion="14" 
```

或者，如果您需要，将您的应用程序拆分为单独的模块，使核心不需要 API14，但尝试使用 wifi-direct 模块。wifi-direct 模块需要 API14，因此具有适当设备的用户可以同时安装两者，而其他的只是核心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:39:45.020

It was not a problem with this. It was a problem with Roboguice =)

I've just opened an issue. Just if someone wants to try it =)

[http://code.google.com/p/roboguice/issues/detail?id=226&thanks=226&ts=1353421889](http://code.google.com/p/roboguice/issues/detail?id=226&thanks=226&ts=1353421889)

# c# - 从浏览器可见asp.net代码隐藏？

> ID：13473922
> 
> 赞同：1
> 
> 时间：2012-11-20T13:10:25.413
> 
> 标签：c#, asp.net, code-behind

有人可以从浏览器中看到 .aspx 网站的代码隐藏吗？

有人告诉我这是可能的，但我真的找不到办法，查看页面源代码只显示演示页面..

那么有没有办法做到这一点？如何？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:12:05.913

不，如果没有对服务器本身的物理或远程访问，就不可能看到代码隐藏。

理论上，您也可以错误地配置 IIS 服务器以显示源文件，这将导致它们被显示，而不是被编译，但不知道为什么有人会这样做。默认情况下，IIS 不会显示它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T13:18:31.250

By default, IIS shows parts of your code (aspx or code-behind) when an exception occurs - along with the call stack of the exception. Any serious ASP.NET application hides this information from users by using specific error handlers to show the error information in another (often more user-friendly) format.

As others mentioned, it's not normally possible to see the code, as it's a server-side handler, compiled and run on the server, while client only sees the HTML output.

# asp.net - 如何为 IIS 7.0 中托管的页面添加自定义 HTTP 标头？

> ID：13473925
> 
> 赞同：2
> 
> 时间：2012-11-20T13:10:33.037
> 
> 标签：asp.net, http, iis-7, http-headers

如何为 IIS 7.0 中托管的页面添加自定义 HTTP 标头？

可以为文件夹添加一个，但不能为 IIS 7.0 中的页面添加一个，否则我不知道怎么做。

但是，在 IIS 6.0 中，您可以轻松地右键单击页面并通过属性窗口添加自定义标题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:07:42.930

将以下元标记添加到您的页面

```
<meta http-equiv="X-UA-Compatible" content="IE=7" /> 
```

其中 http-equiv 和内容是可变的：[http ://weblogs.asp.net/joelvarty/archive/2009/03/23/force-ie7-compatibility-mode-in-ie8-with-iis-settings.aspx](http://weblogs.asp.net/joelvarty/archive/2009/03/23/force-ie7-compatibility-mode-in-ie8-with-iis-settings.aspx)

或以编程方式在代码隐藏中：

```
//C#
Page.Header.Controls.AddAt(0, new HtmlMeta { HttpEquiv = "X-UA-Compatible", Content = "IE=EmulateIE7" });

'VB.NET
Dim custom As New HtmlMeta
custom.HttpEquiv = "X-UA-Compatible"
custom.Content = "IE=EmulateIE7"
Page.Header.Controls.Add(custom) 
```

# android - android中操作栏中的徽标和标题

> ID：13473933
> 
> 赞同：0
> 
> 时间：2012-11-20T13:10:53.527
> 
> 标签：android, xml, styles, android-actionbar

我在我的应用程序（actionbarsherlock）中使用操作栏，我希望不显示标题，而只是查看 ab 中的徽标。所以我尝试使用

```
<item name="abDisplayOptions">useLogo</item> 
```

是的，标题消失了，但徽标不再显示。为什么？以及如何仅使用 XML 来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:55:44.787

行。我已经解决了这个问题

`<item name="abIcon">@drawable/logo</item>`

进而

`<item name="abDisplayOptions">showHome</item>`

但我不明白为什么它不适用于 abLogo。

# git - git 合并而不事先提交本地更改

> ID：13473944
> 
> 赞同：0
> 
> 时间：2012-11-20T13:11:18.490
> 
> 标签：git, merge, commit

也许这已经被回答过，但我似乎无法找到它。让我来说明我的问题。我检查了一个 git 存储库，然后对文件进行了一些修改。这已经是前一段时间了，我现在想将存储库中的最新更新与我的更改合并。问题是，我不使用 git 作为版本控制，因为我们在日常操作中使用 mercurial。如何在不必提交 git 的情况下获得最新的更改（无论如何我都做不到）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:15:30.803

将您的更改填充到 stash 中（使用 git stash），使用 git pull 从远程仓库中提取，然后使用 git stash apply（或 pop，如果您确信它会起作用）。没有做出正式的承诺。

```
git stash
git pull        # or: git fetch ; git checkout --force origin/master
git stash pop   # or: git stash apply 
```

如果上游源代码和您自己的代码之间存在冲突更改，git 可以在这些情况下使用 ~/.gitconfig - YMMV 中的以下内容生成更易读的差异输出，但可能值得一试：

```
[merge]
    conflictstyle = diff3 
```

# c++ - 如何将 QMessageBox 文本重定向到文本文件

> ID：13473947
> 
> 赞同：0
> 
> 时间：2012-11-20T13:11:26.357
> 
> 标签：c++, qt

在我的项目中很多时候我都在使用 QMessageBox。这是警告/信息。例如，如果我有一些验证，那么当时我正在使用一些 QMessageBox::information(...) ，或者如果我想限制用户不要移出特定页面，那么我正在使用 QMessageBox::critical(... ) . 我知道“如何将 qDebug 输出重定向到文件”。我也想为 QMessagebox 做同样的事情。这样我将在我的项目文件夹中维护一个文本文件。每当应用程序运行时，如果用户通过 QMessagebox 遇到一些消息，则应将其重定向到该文本文件。这样，在关闭应用程序后，用户有一个小的消息详细列表，无论他在运行应用程序期间遇到了什么。

请帮我写这段代码..

提前谢谢xx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:19:46.483

您可以声明自己的静态信息、警告和关键函数，这些函数将显示原始 QMessageBox 并写入一些内容以记录。

```
static StandardButton information(QWidget *parent, const QString &title, const QString &text, StandardButtons buttons = Ok, StandardButton defaultButton = NoButton);

StandardButton information(QWidget *parent, const QString &title, const QString &text, StandardButtons buttons, StandardButton defaultButton) 
{
   qDebug() << "writing to log";
   return QMessageBox::information (parent, title, text, buttons, defaultButton)
} 
```

# django - Django 1.4 上的 Django url 模板标签 {% url %} 错误

> ID：13473949
> 
> 赞同：0
> 
> 时间：2012-11-20T13:11:35.550
> 
> 标签：django, django-templates, django-1.4

我做了很多次，它奏效了，但这次不行。

当我尝试使用 {% url path.to.view %} django 的模板标签时出现此错误：

> /login/ 'str' 对象的 AttributeError 没有属性 'regex'

* * *

## urls.py（主要）

```
urlpatterns= patterns('', (r'', include('authenticate.urls')),  ) 
```

* * *

## urls.py（我的应用程序）

```
urlpatterns= patterns('authenticate.views', url(r'^login/$','login'),) 
```

* * *

## 登录.html

```
{{ form }}
{% url authenticate.views.login %} < --- Error comes here 
```

* * *

在意见中：

```
return render_to_response('login.html',{'form':form},context_instance=RequestContext(request),  ) 
```

* * *

也不适用于：

```
 {% url authenticate.views.login %}
 {% url 'authenticate.views.login' %}
 {% url "authenticate.views.login" %} 
```

* * *

这是在 django 1.4 上；我可能做错了什么，或者我在那个版本的 django 中错过了什么？

提前致谢！

* * *

## 更新：

我还可以补充一点，在我的视图中使用 reverse 不起作用，并给我上面的相同错误：

```
from django.core.urlresolvers import reverse

result = reverse('django.contrib.auth.views.password_reset')         
HttpResponse(result) 
```

*错误：*

> /abc/ 'str' 对象的 AttributeError 没有属性 'regex'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:21:09.620

检查这个 [https://docs.djangoproject.com/en/1.4/topics/http/urls/](https://docs.djangoproject.com/en/1.4/topics/http/urls/)

您可以在 URL 中添加名称以帮助引用。还要检查你是如何声明模式的。应该这样做：

```
urlpatterns = patterns('',
    url(r'^archive/(\d{4})/$', archive, name="full-archive"),
    url(r'^archive-summary/(\d{4})/$', archive, {'summary': True}, "arch-summary"),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:42:09.900

我得到了它 ：））

问题不在 url 模板标签中，而在另一个 urls 文件中，该文件已包含在主文件中；直到我的应用程序才出现问题。点击 url 模板标签或 django 的 reverse 方法，否则，django 不会抱怨任何 url！

# java - Eclipse - 无法加载类“org.slf4j.impl.StaticLoggerBinder”

> ID：13473953
> 
> 赞同：45
> 
> 时间：2012-11-20T13:11:58.593
> 
> 标签：java, eclipse, maven

> **可能重复：**
> [SLF4J：无法加载类 org.slf4j.impl.StaticLoggerBinder 错误](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)

我正在使用**eclipse juno**使用**maven**（m2eclipse 插件）运行其他人的 Java 代码。但我收到以下消息：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

在[官方网站上](http://www.slf4j.org/codes.html)，我找到了针对此问题的以下修复：

```
This error is reported when the org.slf4j.impl.StaticLoggerBinder class could not be loaded into memory. 
This happens when no appropriate SLF4J binding could be found on the class path. 
Placing one (and only one) of slf4j-nop.jar, slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar or logback-classic.jar on the class path should solve the problem. 
```

所以我将 slf4j-simple.jar 复制到**"C:\Program Files\Java\jdk1.7.0_07\lib"**中。但我仍然收到错误。

请指导我什么是正确的解决方案。我是一个Java新手。

`JAVA_HOME`也有人可以提一下,`CLASSPATH`和`CLASS`变量的值到底应该是什么。我很困惑它是否应该是路径`jre`或`jdk`任何？

**更新：**

`slf4j`项目中存在以下依赖项`pom.xml`。

```
<dependency>
           <groupId>org.slf4j</groupId>
           <artifactId>slf4j-api</artifactId>
           <version>1.5.6</version>
           <type>jar</type>
</dependency>
<dependency>
           <groupId>org.slf4j</groupId>
           <artifactId>slf4j-simple</artifactId>
           <version>1.5.6</version>
</dependency> 
```

我已经更新了我的项目。也出现在我项目`slf4j-api-1.5.6.jar`的**“Maven 依赖项”中。**并且也存在于`slf4j-simple-1.5.6.jar`**`org.slf4j.impl.StaticLoggerBinder.class``slf4j-simple-1.5.6.jar`**

 *** * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-20T18:22:25.717

Eclipse Juno、Indigo 和 Kepler 在使用捆绑的 maven 版本 (m2e) 时不会抑制消息 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。此行为从 m2e 版本 1.1.0.20120530-0009 及更高版本开始存在。

虽然，这被指示为错误，您的日志将正常保存。在修复此错误之前，突出显示的错误仍将存在。[在m2e 支持站点](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)中了解更多信息。

当前可用的解决方案是使用外部 maven 版本而不是 Eclipse 的捆绑版本。您可以在下面的问题中找到有关此解决方案以及有关此错误的更多详细信息，我相信该问题描述了您面临的相同问题。

[SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。错误](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-20T13:15:06.003

您是否更新了项目（右键单击项目，“Maven”>“更新项目...”）？否则，您需要检查是否`pom.xml`包含必要的 slf4j 依赖项，例如：

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.7.0</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.0</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.7.0</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T13:22:21.640

将jar文件放在所需位置后，您需要通过**右键单击**添加jar文件

> 项目 --> 属性 --> Java 构建路径 --> 库 --> 添加 Jar。**

# templates - Ember 的多个视图

> ID：13473958
> 
> 赞同：0
> 
> 时间：2012-11-20T13:12:16.697
> 
> 标签：templates, layout, ember.js, multiple-views

我正在研究 Ember，我想知道是否可以在单个页面中包含多个视图并在布局模板之间切换。我以前用 AngularJS 开发过。

我正在寻找与此 `$route.when('/view1', ...);`和`<ng-include src="templates.top" />`.

这是Angular的工作[**小提琴**](http://jsfiddle.net/stephanebisson/QpP65/2/)。我希望有人可以帮助我，因为我找到的帮助很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:23:01.690

您正在考虑的是 Ember.js 路由器，顶部带有 Handlebars.js 模板。[这](http://emberjs.com/guides/router_primer/)是一个很好的指南，它涵盖了您入门所需的一切。通读和理解本教程可能需要一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:33:01.193

以最简单的形式，您可以使用`StateManager`. 请参阅我创建的以下小提琴：http: [//jsfiddle.net/npCfF/](http://jsfiddle.net/npCfF/)

**Javascript：**

```
App= Ember.Application.create();

App.StateManager = Ember.StateManager.create({
    rootElement: '.tab-content',
    initialState: 'tab1', 
    //Show the location tab function
    showTab1: function(manager) {

        manager.transitionTo('tab1');
    },
    //show seleceted areas
    showTab2: function(manager) {

        manager.transitionTo('tab2');
    },
    showTab3: function(manager) {

        this.set('locationActive', 'inactive');
        this.set('areasActive', 'active');
        this.set('filterActive', 'inactive');
        this.set('childOf', 'showAreas');
        manager.transitionTo('tab3');
    },

    tab1: Ember.ViewState.create({
        route: 'tab1',
        view: Ember.View.create({ templateName: 'tab1' })
    }),
    tab2: Ember.ViewState.create({
        route: 'tab2',
        view: Ember.View.create({ templateName: 'tab2' })
    }),
    tab3: Ember.ViewState.create({
        route: 'tab3',
        view: Ember.View.create({ templateName: 'tab3' })
    })
});
​ 
```

**HTML：**

```
<script type="text/x-handlebars">
      <nav class="tab_menu">
           <span id="tab_location_result" data-show="location_result"  {{action "showTab1" target="App.StateManager"}}><i class="icon-globe"></i>Tab 1</span> | 
           <span id="tab_selected_areas" data-show="selected_areas" {{bindAttr class="MapSearch.StateManager.areasActive"}} {{action "showTab2" target="App.StateManager"}}><i class="icon-map-marker"></i>Tab 2</span> | 
           <span id="tab_filter_results" data-show="filter_results" {{bindAttr class="MapSearch.StateManager.filterActive"}} {{action "showTab3" target="App.StateManager"}}><i class="icon-filter"></i>Tab 3</span>
      </nav>
</script>
<div class="tab-content"></div>
<script type="text/x-handlebars" data-template-name="tab1">
Tab1 
</script>
<script type="text/x-handlebars" data-template-name="tab2">
Tab2
</script>
<script type="text/x-handlebars" data-template-name="tab3">
Tab3
</script>
​ 
```

# google-chrome - 使用谷歌浏览器 ttsengine 进行语音输入

> ID：13473960
> 
> 赞同：1
> 
> 时间：2012-11-20T13:12:22.537
> 
> 标签：google-chrome, google-chrome-extension, speech-recognition, speech-to-text, text-to-speech

我正在开发一个 chrome 扩展并使用 tts 和 ttsengine 进行语音输入/输出。但是我的扩展程序让我的 chrome 在没有有用的错误代码的情况下崩溃（Chrome 意外退出`Process: Google Chrome [888]`）

当我调用 javascript 方法时，`chrome.experimental.speechInput.start(function(){})`chrome 崩溃了。

我尝试了谷歌提供的另一个扩展，即语音识别器，它运行良好，google.com 中的语音输入也运行良好。已设置实验标志。

是否有任何额外的许可或任何其他程序来使语音到文本的工作？

我的清单.json：

```
{
"name": "my_extension",

"version": "0.1",

"manifest_version": 2,

"description": "my description",

"icons": {
    "16": "icon16.png",
    "128": "icon128.png"
},

"app": {
    "launch": {
        "local_path": "/twitter/index.html"
    }
},

"offline_enabled": true,

"permissions": [
    "experimental",
    "unlimitedStorage",
    "https://api.twitter.com/*",
    "ttsEngine",
    "tts"
],

"tts_engine": {
    "voices": [{
        "lang": "de",
        "event_types": ["end"]
    }]
}
} 
```

* * *

我的 .js 文件：

```
function startSpeechInput() {
    chrome.experimental.speechInput.onError.addListener(recognitionFailed);
    chrome.experimental.speechInput.onResult.addListener(recognitionSucceeded);
    chrome.experimental.speechInput.onSoundEnd.addListener(recognitionEnded);

    chrome.experimental.speechInput.isRecording(function (recording) {
        if (!recording) {
            chrome.experimental.speechInput.start({ 'language': 'en-US' }, function(){
                            //TODO
                    }

                    console.log("Voice recognition started!");
            });
        }
        else {
            console.log('Pressed Record while it is already recording. Do nothing...');
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:31:31.430

经过一些更改后，它对您的内容有用。

***截屏***

![输出生成](../Images/ab046c41e27524296373a1ddfe6e51bd.png)

**清单.json：**

```
{
"name": "my_extension",

"version": "0.1",

"manifest_version": 2,

"description": "my description",

"icons": {
    "16": "icon.jpg",
    "128": "icon.jpg"
},

"app": {
    "launch": {
        "local_path": "index.html"
    }
},

"background":{
        "scripts": ["background.js"]
    },

    "offline_enabled": true,

"permissions": [
    "experimental",
    "unlimitedStorage",
    "https://api.twitter.com/*",
    "ttsEngine",
    "tts"
],

"tts_engine": {
    "voices": [{
        "lang": "de",
        "event_types": ["end"]
    }]
}
} 
```

**索引.html**

```
<html>
<head>
<script src="index.js">
</script>
</head>
<body>
</body>
</html> 
```

**index.js**

```
function recognitionFailed(error) {
  alert("Speech input failed: " + error.code);
}

function recognitionSucceeded(result) {
  alert("Recognized '" + result.hypotheses[0].utterance + "' with confidence " + result.hypotheses[0].confidence);
}
function startSpeechInput() {
    chrome.experimental.speechInput.onError.addListener(recognitionFailed);
    chrome.experimental.speechInput.onResult.addListener(recognitionSucceeded);
    chrome.experimental.speechInput.onSoundEnd.addListener(function (){
        console.log("started");
    });

    chrome.experimental.speechInput.isRecording(function (recording) {
        if (!recording) {
            chrome.experimental.speechInput.start({ 'language': 'en-US' }, function(){

                    console.log("Voice recognition started!");
            });
        }
        else {
            console.log('Pressed Record while it is already recording. Do nothing...');
        }
    });
}
startSpeechInput(); 
```

**背景.js**

```
function dummy() {

} 
```

# scala - scala：将对象包装在另一个对象中的更简单方法

> ID：13473962
> 
> 赞同：2
> 
> 时间：2012-11-20T13:12:28.360
> 
> 标签：scala, inheritance, playframework-2.0, playframework-2.1

在 play 2.1 应用程序中，我有以下代码（它只是一个去掉任何尾部斜杠的请求包装器）：

```
class NormalizedRequest(request: RequestHeader) extends RequestHeader {

  val headers = request.headers
  val id = request.id
  val method = request.method
  val queryString = request.queryString
  val remoteAddress = request.remoteAddress
  val tags = request.tags
  val version = request.version

  // strip first part of path and uri if it matches http.path config
  val path = if (request.path == "/") "/" else request.path.stripSuffix("/")
  val uri = path + {
    if(request.rawQueryString == "") ""
    else "?" + request.rawQueryString
  }
}

object NormalizedRequest {
  def apply(request: RequestHeader) = new NormalizedRequest(request)
} 
```

这种代码很常见，你只需将一个对象包装在另一个对象中

我想知道是否有更简单的方法来完成它，理想情况下它会像（受案例类启发的伪代码）：

```
object NormalizedRequest {
  def apply(request: RequestHeader) = {
    val path = if (request.path == "/") "/" else request.path.stripSuffix("/")
    val uri = path + {
      if(request.rawQueryString == "") ""
      else "?" + request.rawQueryString
    }
    request.copy(path = path, uri = uri)
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:57:07.667

如果我理解正确，您要求在 scala 中提供更简洁的装饰器模式版本。您仍然需要您的“包装器”与您的内部类的类型相同（通过扩展它或公共基础/特征），以便能够将其传递给期望接收内部类实例的某个函数（或共同的基础/特征）。

您在伪代码中编写的内容实际上几乎是合法的 scala，您只需更改 in 的定义`apply`以`NormalizedRequest`返回扩展 RequestHeader 的匿名类。

即代替

```
class NormalizedRequest(request: RequestHeader) extends RequestHeader {
    //.... "decorated" logic here
}
object NormalizedRequest {
  def apply(request: RequestHeader) = new NormalizedRequest(request)
} 
```

你将会拥有

```
object NormalizedRequest {
  def apply(request: RequestHeader) = new RequestHeader {
    // ...
    // instead of having a separate NormalizedRequest class
    // define its behaviour here in anonymous form    
    }
} 
```

一个简化的例子：

```
// our inner class and companion object 
// (a simplified version of your RequestHeader)
class Inner() {def test="hello"}; object Inner {
    def apply() = new Inner()
} 

// our wrapper
object Outer {
    def apply(inner: Inner) = new Inner {
        override def test=inner.test + "!"
    }   
} 
```

然而，虽然它为你节省了几次击键，但我真的认为你会失去可读性。

# mapping - 推土机，自定义转换器上的 InstantiationException

> ID：13473964
> 
> 赞同：3
> 
> 时间：2012-11-20T13:12:35.990
> 
> 标签：mapping, converter, dozer, instantiationexception

我写了自己的客户转换器：

```
public class MyFancyCustomConverter extends DozerConverter<Integer, AnObject>
{
    public MyFancyCustomConverter(Class<Integer> prototypeA, Class<AnObject> prototypeB)
    {
        super(prototypeA, prototypeB);
    }

    @Override
    public AnObject convertTo(Integer source, AnObject destination)
    {
        // TODO: do something
        return null;
    }

    @Override
    public Integer convertFrom(AnObject source, Integer destination)
    {
        // TODO: do something
        return 0;
    }
} 
```

还有我的mapping.xml：

```
<mapping>
    <class-a>java.lang.Integer</class-a>
    <class-b>xyz.AnObject</class-b>
    <field custom-converter="xyz.MyFancyCustomConverter" custom-converter-param="hello">
      <a>this</a>
      <b key="my.key">this</b>
    </field>
</mapping> 
```

但我得到了这个例外：

org.dozer.MappingException: java.lang.InstantiationException: xyz.MyFancyCustomConverter

知道我做错了什么吗？我想这是因为 MyFancyCustomConverter 没有默认转换器。但我不能添加一个，因为 DozerConverter 没有一个......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T15:37:51.697

```
public MyFancyCustomConverter(Class<Integer> prototypeA, Class<AnObject> prototypeB)
{
    super(prototypeA, prototypeB);
} 
```

应该

```
public MyFancyCustomConverter()
{
    super(Integer.class, AnObject.class);
} 
```

超类需要知道两个类的运行时类型，并且由于类型擦除，需要传入一个类型标记。

# c++ - 如何在 x86 和 x64 平台之间使用 boost::serialization

> ID：13473967
> 
> 赞同：5
> 
> 时间：2012-11-20T13:12:44.287
> 
> 标签：c++, serialization, boost, compatibility, 32bit-64bit

我有一个在 Windows 下作为 64 位应用程序运行的程序。我希望相同的程序作为 32 位应用程序工作。它可以编译、链接和运行，但我无法读取在 32 位应用程序中使用 64 位应用程序存储的文件。我将 boost::serialization 与二进制档案一起用于写入和读取文件。

该软件已经发布给客户。客户端应该能够使用 32 位应用程序读取 64 位应用程序存储的文件。这可能吗？如何？有什么经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:31:25.660

考虑使用[protable binary archive](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/todo.html#portablebinaryarchives)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:48:29.363

您可以编写一个 64 位应用程序，将二进制存档转换为 xml 存档。这些您可能可以使用 32 位应用程序读取并转换为您选择的格式。

# php - 使用php dbo通过引用行号和列号来显示数据

> ID：13473970
> 
> 赞同：1
> 
> 时间：2012-11-20T13:12:50.310
> 
> 标签：php, mysql, pdo

在 mysql_* 中，您可以使用以下内容来显示特定的行和列：

`mysql_result(3,2)`

这将显示结果集的第三行第二列。

我有一个 php pdo 脚本来显示一些 mysql 数据：

```
$sth = $db->prepare("SELECT name, surname FROM people"); 
$sth->execute(); 
$row = $sth->fetch(); 
$name=$row[name];
$surname=$row[surname]; 
```

如果我有一个查询结果，上述方法会很好。如果我有多个结果，我如何获取特定行和列的名称和 suraname。

因此，如果我想要第 11 行第 0 列和第 11 行第 1 列（第 11 行中的姓名和姓氏），我的语法是什么？

一如既往地感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:27:46.567

如果您需要某些行，您应该`LIMIT`在查询中使用以缩小返回的数据集。或者，您可以使用`fetchAll()`，但这会使用比需要更多的资源，因此`LIMIT`既可以加快速度又可以减少资源使用。

PS：你的数组使用是错误的。你不应该这样`$row['name'];`做`$row[name];`。或使用`fetch(PDO::FETCH_OBJ)`(or `fetchObject()`) 然后访问这样的属性`$row->name;`

**编辑**

`fetchAll()`返回数组，包含数字索引和列名索引。因此访问第 11 行的第 0 列和第 1 列将如下所示：

```
$dataArray = $sth->fetchAll();
$name = $dataArray[10][0];
$surname = $dataArray[10][1]; 
```

或（哪个更好）：

```
$name = $dataArray[10]['name'];
$surname = $dataArray[10]['surname']; 
```

请注意，行是 0 索引的，因此`10`不是`11`.

# python - 对 Python 文档测试的多版本支持

> ID：13473971
> 
> 赞同：10
> 
> 时间：2012-11-20T13:12:53.703
> 
> 标签：python, python-3.x, doctest

我正在这样写我的文档测试：

```
>>> some_function(a=1, b=2)
{u'id': u'123', u'name': u'abc'} 
```

这适用于 Python 版本 2.5、2.6 和 2.7，但对于 Python 3 失败并出现以下错误：

```
Expected:
    {u'id': u'123', u'name': u'abc'}
Got:
    {'id': '123', 'name': 'abc'} 
```

问题是，如果我这样写我的文档测试：

```
>>> some_function(a=1, b=2)
{'id': '123', 'name': 'abc'} 
```

它们仅适用于 Python3，在 Python2 版本上失败。我的问题是如何使它跨版本兼容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T13:21:28.510

我在 IPython 中遇到了与 doctests 相同的问题。没有简洁的解决方案，但我将所有`u'`前缀都包装在`{}`, ie`{u}'`中，并制作了一个小函数，可以根据需要包含或排除它们。

您可以看到[u_format() 函数](https://github.com/ipython/ipython/blob/master/IPython/utils/py3compat.py#L93)和[使用它](https://github.com/ipython/ipython/blob/master/IPython/core/tests/test_magic.py#L410)的文档测试。

但这相当混乱，所以我将许多测试从 doctest 中移开。

或者，您可以像这样测试它：

```
>>> some_function(a=1, b=2) == {'id': '123', 'name': 'abc'}
True 
```

如果您在键中需要一些 unicode 字符串，您可以使用`u'abþ'`，并使用分发`2to3`在 doctests 上运行。但这仅适用于输入代码，不适用于输出 reprs。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-13T20:01:57.383

如果你使用 pytest，你可以这样做：

```
>>> some_function(a=1, b=2) # doctest: +ALLOW_UNICODE
{u'id': u'123', u'name': u'abc'} 
```

如果您正在运行 Python 3，则 u 将被剥离，并保留在 Python 2 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T18:18:09.510

我在 NLTK 中遇到了与 doctests 相同的问题；它是通过使用由自定义鼻子插件安装的自定义 doctest 输出检查器（将 u'foo' 和 'foo' 视为相同）解决的：[https ://github.com/nltk/nltk/blob/develop/nltk /test/doctest_nose_plugin.py](https://github.com/nltk/nltk/blob/develop/nltk/test/doctest_nose_plugin.py)

这个解决方案不是很漂亮，但效果很好（NLTK 中有大约 0.5 兆字节的文档测试）并且它不会降低文档测试的可读性。

编辑：找到了这个鼻子插件的简化独立版本：[https ://github.com/gnublade/doctest-ignore-unicode](https://github.com/gnublade/doctest-ignore-unicode)

# javascript - 如何隐藏移动设备上的 Safari 地址栏

> ID：13473972
> 
> 赞同：0
> 
> 时间：2012-11-20T13:13:02.547
> 
> 标签：javascript, jquery, safari

> **可能重复：**
> [如何隐藏 iPhone 上的地址栏？](https://stackoverflow.com/questions/4117377/how-to-hide-the-address-bar-on-iphone)

我把这一切都放在了头上：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <meta name="viewport" content="initial-scale=1.0">
    <meta name="viewport" content="maximum-scale=1.0">
    <meta name="viewport" content="user-scalable=no">
    <meta name="viewport" content="width=device-width"> 
```

我还放了一些 jquery/javascript 代码来提升浏览器.. 但它不起作用.. 还有什么其他解决方案？！？

```
<script>
    addEventListener("load", function() {
        window.scrollTo(1, 0);
    }, false);    
</script> 
```

以上也不行。

# regex - 是否有用于将类似字符串转换为子字符串组或正则表达式的 R 包或函数？

> ID：13473974
> 
> 赞同：1
> 
> 时间：2012-11-20T13:13:03.870
> 
> 标签：regex, string, r

我正在尝试编写用于从标签的字符向量到正则表达式子组的字符向量的机器转换的函数，就像在下面的示例中一样，其中 lab 是标签的向量，而 pat 如上所述的明显结果是通过正则表达式组表征实验室内容。

我首先使用 adist 功能比较具有相同长度的字符串，但我认为我正在重新发明轮子。

是否有任何现有的包或功能处理？或者任何足够接近开始的东西？

在现实生活中，我的实验室对象的长度可能为 1k - 5k，并且特定标签可以包含任何描述。下面的一个被创建为一个展示。

```
lab <- c(
"Speed - unit 1",
"Speed - unit 2",
"Speed - unit 3",
"Speed - unit 4",
"Speed - unit 5",
"Layer A",
"Layer B",
"Layer Cx",
"Colour Left",
"Colour Right",
"Colour Up",
"Colour Down"
)

pat <- c(
"^Speed - unit .$",
"^Layer [ABCx]*$",
"^Colour .*"
) 
```

# c++ - 如何从 C++ 代码调用 PL/pgSQL 函数

> ID：13473977
> 
> 赞同：1
> 
> 时间：2012-11-20T13:13:09.697
> 
> 标签：c++, function, postgresql, plpgsql

我正在尝试使用 PL/pgSQL 调用在 PostgreSQL 中声明的函数。为此，我编写了下面的代码。我的功能正在运行，但之后我正在接受“PGRES_FATAL_ERROR”。此外，当我使用“DELETE * FROM TABLE1”之类的 sql 查询更改“select removestopwords()”时，它工作成功。

我正在考虑，即使现在可以工作，该错误也可能在将来引起一些大问题。如何在不出错的情况下调用 PL/pgSQL 函数？

```
void removeStopWordsDB(PGconn* conn) {

PGresult *res = PQexec(conn, "select removestopwords()");

if (PQresultStatus(res) != PGRES_COMMAND_OK) {
    printf("removestopwords failed");
    cout<<PQresultStatus(res);
    PQclear(res);
    exit_nicely(conn);
}

printf("removestopwords - OK\n");

PQclear(res); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:44:31.063

PostgreSQL API 不支持“忽略所有错误”之类的标志。如果您想忽略结果，那么就不要在主机环境中检查结果。但这是一个糟糕的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:47:08.683

如果您从中获取`PGRES_FATAL_ERROR`，`PQresultStatus`您应该使用`PQresultErrorField`从结果集中获取所有错误数据以提供有用的错误消息。这将允许您确定此处的实际错误（很可能是从服务器发送的错误）。

考虑创建一个类来保存可以从 q`PQresult`指针构造的 PostgreSQL 错误详细信息，例如：

```
PgError(const PGresult *rs)
{
  severity = GetErrorField(rs, PG_DIAG_SEVERITY);
  sqlstate = GetErrorField(rs, PG_DIAG_SQLSTATE);
  primary = GetErrorField(rs, PG_DIAG_MESSAGE_PRIMARY);
  // ...
}
static std::string GetErrorField(const PGresult *rs, int fieldCode)
{
  const char *message = PQresultErrorField(rs, fieldCode);
  if (message == NULL) return "";
  return std::string(message);
} 
```

然后，例如，您可以封装将错误转储到此对象中的流中，以提供详细信息，就像 psql 和朋友所做的那样（尽管严格来说，您还需要输入 SQL 来完成所有这些操作）

# mysql - 简单的 MySQL 查询运行速度很慢

> ID：13473982
> 
> 赞同：1
> 
> 时间：2012-11-20T13:13:30.660
> 
> 标签：mysql, sql, phpmyadmin

我在 MySQL 中发现了一些奇怪的（对我来说）行为。我有一个简单的查询：

```
SELECT CONVERT( `text`.`old_text` 
USING utf8 ) AS stext
FROM  `text` 
WHERE  `text`.`old_id` IN 
(    
 SELECT  `revision`.`rev_text_id`
 FROM  `revision` 
 WHERE  `revision`.`rev_id`
 IN 
  (    
  SELECT `page_latest`
  FROM  `page` 
  WHERE `page_id` = 108
  )
) 
```

当我运行它时，phpmyadmin 显示执行时间为 77.0446 秒。
但后来我替换

```
WHERE  `text`.`old_id` IN 
```

经过

```
WHERE  `text`.`old_id` = 
```

它的执行时间下降到大约 0.001 秒。此查询的结果

```
 SELECT  `revision`.`rev_text_id`
 FROM  `revision` 
 WHERE  `revision`.`rev_id`
 IN 
  (    
  SELECT `page_latest`
  FROM  `page` 
  WHERE `page_id` = 108
  ) 
```

是

```
+------------+
|rev_text_id |
+------------+
|6506        |
+------------+ 
```

有人可以解释一下这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:17:54.873

尝试添加`INDEX`以下列，

```
ALTER TABLE `text` ADD INDEX idx_text (old_id);
ALTER TABLE `revision` ADD INDEX idx_revision (rev_text_id); 
```

并执行以下查询

```
SELECT  DISTINCT CONVERT(a.`old_text` USING utf8 ) AS stext
FROM    `text` a
        INNER JOIN `revision` b
            ON a.`old_id` = b.`rev_text_id`
        INNER JOIN `page` c
            ON b.`rev_id` = c.`page_latest`
WHERE   c.`page_id` = 108 
```

***PS：您可以运行以下查询并发布它们各自的结果吗？***

```
DESC `text`;
DESC `revision`;
DESC `page`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:21:25.187

MySQLDB 循环遍历内部查询的每个结果，并将其与外部查询中的每条记录进行比较。在第二个内部查询中；

```
 WHERE  `revision`.`rev_id`
   IN 
   ( SELECT `page_latest`
     FROM  `page` 
     WHERE `page_id` = 108 
```

您绝对应该使用 '=' 而不是 IN，因为您选择的是不同的记录，当您知道每次只会返回一条记录时，循环遍历结果是没有意义的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:27:58.993

有两种主要方法可以在此处提高查询性能

*   添加索引（如 Kuya 提到的）
*   尽可能摆脱子查询

对于索引，在您正在搜索匹配项的列上添加索引：text.old_id、revision.rev_text_id 和 page.page_id

```
ALTER TABLE `text` ADD INDEX idx_text (old_id);
ALTER TABLE `revision` ADD INDEX idx_revision (rev_text_id);
ALTER TABLE `page` ADD INDEX idx_page (page_id); 
```

您的下一个问题是嵌套子选择对您的查询执行计划来说是地狱。这是一个讨论[JOIN vs Subquery](https://stackoverflow.com/questions/2577174/join-vs-subquery)的好帖子。这是一篇关于如何从 mySQL[获取执行计划信息的文章。](http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html)

首先查看执行计划可能会令人困惑，但当您必须关注查询优化时，它将是您最好的朋友。

这是您仅使用联接的相同查询的示例（您可以使用内部或左侧并获得几乎相同的结果）。我没有你的表或数据，所以请原谅语法问题（我无法验证代码在你的环境中逐字运行，但它应该给你一个很好的起点）。

```
SELECT 
  CONVERT( `text`.`old_text` USING utf8 ) AS stext
  FROM  `text` 
  -- inner join only returns rows when it can find a 
  --    matching `revision`.`rev_text_id` row to `text`.`old_id`
  INNER JOIN `revision`  
  ON `text`.`old_id` = `revision`.`rev_text_id` 
  -- Inner Join only returns rows  when it can find a 
  --  matching `page_latest` row to `page_latest`
  INNER JOIN `page`
  ON `revision`.`rev_id` = `page`.`page_latest`
WHERE `page`.`page_id` = 108 
```

# javascript - 如何在 MongoDB 中累积结果（使用 forEach？）？

> ID：13473987
> 
> 赞同：3
> 
> 时间：2012-11-20T13:13:59.357
> 
> 标签：javascript, mongodb, mongodb-query, nosql

假设我想搜索一个集合，扫描返回的结果集并返回它的一些转换。我试过以下代码：

```
db.my_collection.find({timestamp : {$gt: 1343032491799}}, {_id:0,sid:1}).limit(20).forEach(function(element) { print(element.sid); }) 
```

好的，效果很好。对于这个问题：我怎样才能将结果（`sid`s）累积到一个数组中而不是仅仅打印它们？

*更新*：当然首选红宝石风格的单线（但不是必需的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:19:59.113

调用`toArray`光标而不是`forEach`：

```
var a = db.my_collection.find(
    {timestamp : {$gt: 1343032491799}}, {_id:0,sid:1}).limit(20)
    .toArray().map(function(o){return o.sid;}) 
```

**更新**

似乎您可以跳过`toArray`并直接转到[`map`](http://docs.mongodb.org/manual/reference/method/cursor.map/)光标，因为光标直接提供了该方法：

```
var a = db.my_collection.find(
    {timestamp : {$gt: 1343032491799}}, {_id:0,sid:1}).limit(20)
    .map(function(o){return o.sid;}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:18:54.950

您可以在父范围内使用变量。

```
var myArr = []; //the results will go there
db.my_collection.find({timestamp : {$gt: 1343032491799}}, {_id:0,sid:1}).limit(20).forEach(function(element) {
  myArr.push(element.sid); //this function has access to myArr
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T13:20:09.717

将 id 推送到数组中：

```
var myArray = [];
b.my_collection.find({timestamp : {$gt: 1343032491799}}, {_id:0,sid:1 })
    .limit(20)
    .forEach(function(element) {
        myArray.push(element.sid);
    })​ 
```

# java - 如何在eclipse插件末尾添加摘要页面

> ID：13473993
> 
> 赞同：0
> 
> 时间：2012-11-20T13:14:20.710
> 
> 标签：java, eclipse, plugins, eclipse-plugin

我用向导写了一个 Eclipse 插件。向导包含一些页面，我希望当用户按下完成（在任何页面中）时，我将能够打开页面，其中包含其他页面中所有字段的摘要，然后才执行完成功能，我知道怎么做实施吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:36:28.000

您也许可以`performFinish`在向导的方法中做一些事情：

```
@Override
public boolean performFinish() {
    IWizardContainer container = getContainer();
    if (summaryPage.equals(container.getCurrentPage())) {
        // Do something.
        return true;
    } else {
        container.showPage(summaryPage);
        return false;
    }
} 
```

# android - 从 Fragment 填充 ListView 的外部 AsyncTask

> ID：13473995
> 
> 赞同：1
> 
> 时间：2012-11-20T13:14:39.480
> 
> 标签：android, android-asynctask, android-fragments

我正在开发一个基于片段的应用程序。这些片段的许多内容是从使用`AsyncTask`. 因此，我正在尝试将“获取数据”类外部化，以便可以重用它。我的片段如下：

```
public class LocalFragment extends SherlockListFragment {

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        LoadDataFromURL url_data = new LoadDataFromURL();
        url_data.setContext(getSherlockActivity());
        url_data.setURL("http://url.com/get_data/");
        url_data.execute();

    }

} 
```

我的`LoadDataFromURL`班级如下：

```
class LoadDataFromURL extends AsyncTask<String, String, String>{

    String our_url;
    ListActivity our_context;
    private ProgressDialog pDialog;
    JSONParser jParser = new JSONParser();
    JSONArray results = null;
    List<PubListDetails> pubs = new ArrayList<PubListDetails>();
    Handler mHandler;

    public void setContext(ListActivity context){
        our_context = context;
    }

    public void setURL(String url){
        our_url = url;
    }

    ArrayList<HashMap<String, String>> productsList = new ArrayList<HashMap<String, String>>();

    @Override
    protected void onPreExecute() {

        // TODO Auto-generated method stub
        super.onPreExecute();

        mHandler = new Handler();

        pDialog = new ProgressDialog(our_context);
        pDialog.setMessage("Loading pubs please wait..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub

        List<NameValuePair> params = new ArrayList<NameValuePair>();

        JSONArray json = jParser.makeHttpRequest(our_url, "GET", params);

        Log.d("All Products: ", json.toString());

        try {
            int success = json.length();

            if (success != 0){
                results = json;

                pubs.clear();

                for (int i = 0; i <results.length(); i++){
                    JSONObject c = results.getJSONObject(i);

                    String id = c.getString("id");
                    String name = c.getString("name");
                    String town = c.getString("town");
                    String county = c.getString("county");

                    //HashMap<String, String> map = new HashMap<String, String>();

                    pubs.add(new PubListDetails(id,name,town,county));
                    //map.put(TAG_PID, id);
                    //map.put(TAG_NAME, name);

                    //productsList.add(map);
                }
                }else{
                    Intent i = new Intent(our_context,MainMenu.class);

                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    our_context.startActivity(i);
                }
            } catch (JSONException e){
                e.printStackTrace();
                }

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        Toast.makeText(our_context, "ff", Toast.LENGTH_SHORT).show();
        // TODO Auto-generated method stub
        pDialog.dismiss();

our_context.runOnUiThread(new Runnable(){

    @Override
    public void run() {
        // TODO Auto-generated method stub
        ListAdapter adapter = new PubListAdapter(our_context, pubs);
        our_context.setListAdapter(adapter);
    }});

    }   

} 
```

`getSherlockActivity`它在不通过 a的基础上给我错误`ListActivity`，这`setListAdapter`需要。

除此之外，我越来越觉得我在概念上错过了重点，这不是实现我想要的理想方式。

有人可以建议我如何从一个片段中调用一个`AsyncTask`将收集数据然后`ListView`用它填充的外部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:14:17.820

首先，您要在 上设置数据，`SherlockListFragment`以便您的业务与`Activity`.

> 除此之外，我越来越觉得我在概念上错过了重点，这不是实现我想要的理想方式。
> 
> 有人可以建议我如何从一个片段中调用一个外部 AsyncTask 来收集数据，然后用它填充一个列表视图..？

只需实现一个回调接口。

```
public interface OnLoadDataListener {
      public onLoadComplete(List<PubListDetails> data);
} 
```

让你的片段类实现这个接口：

```
public class LocalFragment extends SherlockListFragment implements OnLoadDataListener {

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {    
        super.onActivityCreated(savedInstanceState);
        LoadDataFromURL url_data = new LoadDataFromURL();
        url_data.setContext(getSherlockActivity());
        url_data.setURL("http://url.com/get_data/");
        url_data.setListener(this); // you could unite the setContext() method in the listener registration
        url_data.execute();
    }

    @Override
    public void onLoadComplete(List<PubListDetails> data) {
         ListAdapter adapter = new PubListAdapter(getSherlockActivity(), pubs);
         our_context.setListAdapter(adapter);
    }
} 
```

在你的`AsyncTask`：

```
private OnLoadDataListener mListener

public void setListener(OnLoadDataListener listener){
    mListener = listener;
} 
```

并在`onPostExecute`您将数据发送给侦听器：

```
@Override
protected void onPostExecute(String result) {
    Toast.makeText(our_context, "ff", Toast.LENGTH_SHORT).show();
    // TODO Auto-generated method stub
    pDialog.dismiss();
    if (mListener != null) {
        mListener.onLoadComplete(pubs);
    }
} 
```

# jquery - 未捕获的 SyntaxError：使用 JSON 时出现意外标识符。

> ID：13473996
> 
> 赞同：1
> 
> 时间：2012-11-20T13:14:39.260
> 
> 标签：jquery, json

```
<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <script src="jquery.js"></script>
    <script type="text/javascript">

        var index = "index";
        var park = "park";

        $(document).ready(function() {
            $("button").click(function() {
                url="http://openAPI.seoul.go.kr:8088/personalKeyvalue/json/SearchParkInfoService/1/3"
                $.getJSON(url,function(result) {
                    JSONObject jsonRoot = new JSONObject(result);
                    JSONObject jsonService = jsonRoot.getJSONObject("SearchParkInfoService");
                    int totalCount = jsonService.getInt("list_total_count");
                    JSONArray json = jsonService.getJSONArray("row");
                    for (var i = 0; i < totalCount; i++) {
                        document.write(json+"<br>");
                    }
                });
            });
        });

    </script>
    </head>
    <body>
        <h2>Retrieve data from JSON with AJAX!</h2>
        <button>GetAJAX data</button>
    </body>
</html> 
```

我有`Uncaught SyntaxError: Unexpected identifier`谷歌浏览器。

错误发生在第 14 行，即：

```
JSONObject jsonRoot = new JSONObject(result); 
```

你能提供任何解决问题的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:17:03.113

你不要在 JavaScript 中定义这样的变量：

```
JSONObject jsonRoot = new JSONObject(result); 
```

因为它不是强类型语言。你可以这样定义这个变量：

```
var jsonRoot = new JSONObject(result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:25:46.033

无论您从哪里获得该代码，这都是错误的。它不是有效的 JavaScript。

在 javascript 中声明变量的唯一方法是通过关键字`var`.

正确的是（在您发表评论后编辑）：

```
var jsonObject = JSON.parse(result);
// now you can work with the json by retrieving the values in javascript fashion
// like this:
var jsonService = jsonObject["SearchParkInfoService"];
var totalCount  = jsonService["list_total_count"];
var row         = jsonService["row"]; 
```

假设您的 jsonObject 看起来像：

```
{
   SearchParkInfoService : {
        list_total_count : <value>,
        row              : [<arrayvalues>,...]
   },
} 
```

# php - PHP 倒计时从设定的日期时间开始 48 小时

> ID：13473998
> 
> 赞同：1
> 
> 时间：2012-11-20T13:14:51.543
> 
> 标签：php, datetime

我正在寻找在 PHP 中创建一个倒数计时器。当用户单击按钮时，它将当前日期和时间保存到数据库条目中，然后它应该将该条目与当前日期和时间的差异以及当差异大于 48 小时时“doSomething”。

我的问题是实际倒计时。

我尝试了以下方法，但无济于事，它只计算两个字符串的差异，而不考虑天数。不仅如此，它似乎还错误地显示了结果差异：

```
$d1=strtotime("2012-07-08 11:14:15");
$d2=strtotime("2012-07-09 12:14:15");
$diff = round(abs($d1 - $d2));
$cd = date("H:i:s", $diff);
echo $cd; 
```

感谢您从 StackOverflow 帮助我 Yan.kun！下面提交的代码就是解决方案！为了以小时：分钟：秒严格显示倒计时，我将 printf() 代码替换为以下内容：

```
$hours = ($result->d*24)+$result->h;
$minutes = $result->i;
$seconds = $result->s;
echo $hours . ":" . $minutes . ":" . $seconds; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:20:45.320

试试这个：

```
$d1 = new DateTime("2012-07-08 11:14:15");
$d2 = new DateTime("2012-07-09 12:14:15");
$result = $d1->diff($d2);

printf('difference is %d day(s), %d hour(s), %d minute(s)', $result->d, $result->h, $result->i); 
```

编辑：如果您没有可用的 PHP 5.3，您可以将您的时间转换为 unix 纪元时间戳，如[本答案](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:31:27.987

不确定这是否是您想要的：

```
$d1=strtotime("2012-11-18 11:14:15");//2 days earlier
$d2=strtotime("2012-11-20 11:14:15");//today
$diff = $d2 - $d1; //difference in seconds.

$hours = $diff/60/60;//translation to minutes then to hours

echo $hours;

if($hours>48){
    echo "Script";
} 
```