# StackOverflow 问答 16132000-16132999

# c++ - C++ 实现 (XOR,IMPLIES,IFF)

> ID：16132002
> 
> 赞同：2
> 
> 时间：2013-04-21T14:08:45.373
> 
> 标签：c++, boolean-logic, xor

真值表：

***P-----------Q-----------异或------------暗示-----------IFF***

T------------T-------------F----------------T------ ------------T

T------------F--------------T----------------F------ - - - - - -F

F------------T--------------T----------------T------ - - - - - -F

F-----------F-------------F----------------T------ ------------T

我想知道如何仅使用 and,or,not 运算符来计算 XOR、IMPLIES、IFF。比如说 XOR 是 -“ ( p || Q ) && ! ( a && b ) ”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:07:25.743

好吧，解决这个问题的一般方法。

所以，你有一个真值表，像这样：

```
P   Q   f(P, Q)
0   0   0
0   1   1
1   0   1
1   1   1 
```

现在，您可以先用`1`这样的方式转录每一行：

```
//Row 2            3            4
      (!P && Q) || (P && !Q) || (P && Q) 
```

现在你有了析取范式的表达式，你需要简化它。我们在学校学过一个系统的简化过程，但是我不太记得了（也许你可以尝试在互联网上搜索类似 DNF 表达式简化的东西）。您也可以尝试使用逻辑公理来做到这一点，例如[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，但这不会是完全系统的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:21:13.500

*   异或：`(p || q) && !(p && q)`或`p ^ q`或`p != q`
*   暗示：`(!p || q)`
*   IFF：异或的逆？

# cocoa - 如何在一个紧密的循环中检查 Command-Period？

> ID：16132003
> 
> 赞同：2
> 
> 时间：2013-04-21T14:08:46.527
> 
> 标签：cocoa, loops, scripting

我正在实现一种脚本语言，用户可能会意外导致无限循环。我想让用户有机会通过在键入句点（“。”）键的同时按住命令键来取消这种失控循环。

目前，每行一次，我使用以下代码检查取消：

```
NSEvent *   evt = [[NSApplication sharedApplication] nextEventMatchingMask: NSKeyDownMask untilDate: [NSDate date] inMode: WILDScriptExecutionEventLoopMode dequeue: YES];
if( evt )
{
    NSString        *   theKeys = [evt charactersIgnoringModifiers];
    if( (evt.modifierFlags & NSCommandKeyMask) && theKeys.length > 0 && [theKeys characterAtIndex: 0] == '.' )
    {
        // +++ cancel script execution here.
    }
} 
```

这样做的问题是它会在脚本运行时吃掉用户可能正在键入的任何键盘事件，即使脚本应该能够检查按键。此外，它不会使相应的 NSKeyUp 事件出列。但是，如果我告诉它也将按键事件出列，它可能会将 keyUp 出列，以便在我的脚本开始之前持有的按键，并且我的应用程序可能永远不会发现按键已被释放。

另外，在我知道它实际上是一个取消事件之前，我不想让任何事件出队，但是没有单独的出队调用，并且仅仅假设第二次调用中最前面的事件将是同一个事件感觉不可靠。即使它保证是第一个，这也意味着用户输入一个'a'然后Cmd-。这意味着我只看到'a'而从来没有看到Cmd-。如果我不使事件出队，则在它后面。

有没有比使用旧的 Carbon 备用 GetKeys() 更好的选择？幸运的是，这似乎在 64 位中可用。

另外，我正在考虑添加一个 NSStatusItem 来添加一个按钮来取消脚本到菜单栏左右。但是我将如何以一种不允许用户选择菜单的方式处理事件，例如，当脚本期望成为主线程的统治者时？

有什么建议么？建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:56:31.453

按照戴夫的建议使用`-addLocalMonitorForEventsMatchingMask:`可能是最简单的方法，是的。

我只是想补充一点，尽管您感觉不可靠，但事件队列实际上是一个队列，并且事件不会改变顺序。调用`-nextEventMatchingMask:inMode:dequeue:NO`、检查事件、确定它是您想要处理的事件，然后调用`-nextEventMatchingMask:inMode:dequeue:YES`以使用它是非常安全的（并且是事件循环中的标准做法）。只需确保两次调用之间的掩码和模式相同即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:41:19.970

我建议使用事件监视器。由于您要请求`NSApp`事件，因此您似乎正在当前进程中运行脚本，因此您只需监视自己进程中的事件（而不是全局）。

有几种方法可以做到这一点（子类化`NSApplication`和覆盖`-sendEvent:`，放入事件点击等），但最简单的方法是使用[本地事件监视器](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/doc/uid/20000016-SW17)：

```
id eventHandler = [NSEvent addLocalMonitorForEventsMatchingMask:NSKeyDown handler:^(NSEvent *event) {
  // check the runloop mode
  // check for cmd-.
  // abort the script if necessary

  return event;
}]; 
```

当您完成对事件的监控后，不要忘记取消注册您的监控器：

```
[NSEvent removeMonitor:eventHandler]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:04:56.543

所以有`+[NSEvent modifierFlags]`which 旨在替代`GetKeys()`. 遗憾的是，它不包括句点键的用例。

事件队列的核心问题是您希望能够搜索它，这不是 API 公开的内容。我能想到的唯一解决方法是将所有事件出列到一个数组中，检查一个`Command-.`事件，然后使用`postEvent:atStart:`. 不漂亮。

也许作为一种优化，您可以使用`+[NSEvent modifierFlags]`仅在按住命令键时检查事件队列，但这听起来对我来说是竞争条件。

所以最后的建议，覆盖`-postEvent:atStart:`（`NSApplication`或者`NSWindow`），看看你是否可以在那里找到所需的信息。我认为在最坏的情况下调试可能会很有趣。

# php - 如何显示缺席或当前结果

> ID：16132006
> 
> 赞同：0
> 
> 时间：2013-04-21T14:09:03.753
> 
> 标签：php, mysql

如何显示缺席或当前结果

请帮我解决这个问题谢谢

现在显示这样的结果

```
________________________________________
 Name   TeacherNo   Attendance
________________________________________
 XYZ       993             5 Days Present

 Abc       991             7 Days Present

 123       955             2 Days Present

________________________________________ 
```

我想要这样

```
________________________________________________________________
Name    TeacherNo      Present Day          Absent Days
_________________________________________________________________
XYZ       993             5 Days Present        3 Days Present

Abc       991             7 Days Present        0 Days Present

123       955             2 Days Present        4 Days Present  

________________________________________________________________ 
```

这是代码

```
 $result1 = mysql_query("select name ,id ,`teacherno` as teacherno, CONCAT(count(`teacherno`),' Present days') as Attendance
   from tattendance 
   where `Attendance` = 'present' AND date BETWEEN '2013-04-01' AND '2013-04-07' group by `teacherno` order by attendance desc"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:15:04.990

您是否正在寻找类似以下查询的内容：

```
SELECT name, teacherno, 
    CONCAT(COALESCE(SUM(CASE WHEN Attendance = 'present' THEN 1 END),0),' Present days') as Present,
    CONCAT(COALESCE(SUM(CASE WHEN Attendance = 'absent' THEN 1 END),0),' Absent days') as Absent
FROM tattendance  
GROUP BY teacherno 
```

这用于根据出勤列将天数相加`SUM`。`CASE`我还包括`COALESCE`返回 0 而不是`NULL`.

[SQL 小提琴演示](http://sqlfiddle.com/#!2/fb6a6/1)

# r - 用于计算 R 中矩阵的特征值的函数

> ID：16132007
> 
> 赞同：3
> 
> 时间：2013-04-21T14:09:08.390
> 
> 标签：r, eigenvector, eigenvalue, linear-equation

我想写一个函数`eigen()`来计算任意矩阵的特征值和特征向量。我写了以下代码来计算特征值，我需要一个函数或方法来求解得到的线性方程。

```
eig <- function(x){
       if(nrow(x)!=ncol(x)) stop("dimension error")
          ff <- function(lambda){
                for(i in 1:nrow(x)) x[i,i] <- x[i,i] - lambda
                }
det(x)
} 
```

我需要解决`det(x)=0`一个多项式线性方程来找到 的值`lambda`。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:37:39.547

这是使用的一种解决方案`uniroot.all`：

```
library(rootSolve)
myeig <- function(mat){
  myeig1 <- function(lambda) {
    y = mat
    diag(y) = diag(mat) - lambda
    return(det(y))
  }

  myeig2 <- function(lambda){
    sapply(lambda, myeig1)
  }
  uniroot.all(myeig2, c(-10, 10))
}

R > x <- matrix(rnorm(9), 3)
R > eigen(x)$values
[1] -1.77461906 -1.21589769 -0.01010515
R > myeig(x)
[1] -1.77462211 -1.21589767 -0.01009019 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-16T23:11:59.757

计算行列式是个坏主意，因为它在数值上不稳定。`Inf`即使对于中等大小的矩阵，您也可以轻松获得等。我建议阅读以下答案（阅读它们，否则你不知道我的代码在做什么）：

*   [R 函数 eigen() 返回的特征向量是否错误？](https://stackoverflow.com/a/52458862/4891738)
*   [当 A-lx 为奇异且无解时的特征向量](https://stackoverflow.com/a/52844991/4891738)

然后使用以下任一

```
NullSpace(A - diag(lambda, nrow(A)))
nullspace(A - diag(lambda, nrow(A))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-10T19:10:11.693

如果有两个重复的特征值，@liuminzhao 的解决方案将不起作用。该函数将无法找到根，因为矩阵的特征多项式不会改变符号（它为零并且不穿过零线），这就是`rootSolve::uniroot.all()`寻找根时所做的事情。因此，您需要另一种方法来找到局部最小值（如`optim()`）。此外，它将无法确定重复特征值的数量。

更好的方法是用 找到特征方程，这很容易完成，`pracma::charpoly()`然后使用`polyroot()`。

```
par <- pracma::charpoly(M) # find parameters of the CP of matrix M
par <- par[length(par):1]  # reverse order for polyroot()
roots <- Re(polyroot(par)) # keep real part of the polyroot() 
```

本身并`pracma::charpoly()`不太复杂，请参阅它的源[代码](https://rdrr.io/cran/pracma/src/R/charpoly.R)，从第 1 行开始`a1 <- a`。

# .net - 如何通过引用按钮或其他控件的文本来传递

> ID：16132008
> 
> 赞同：0
> 
> 时间：2013-04-21T14:09:12.873
> 
> 标签：.net, c++-cli, controls, pass-by-reference

```
String ^% text = button->Text ; 
text = "something" ; 
```

应该更改按钮的文本，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:11:45.300

这不起作用，代码只更新对象。它没有比这更进一步，还更新了 TextBox::Text 属性。这不仅仅是因为这是一个字符串，正如重复链接中所暗示的那样，它也不适用于简单的值类型属性。

这是因为属性不是值，您无法创建对它们的引用。当您使用它们时，它们看起来就像语法中的值。但肯定不是当你声明它们时，请注意你必须如何编写一个 get 和一个 set 方法。因此，要更新 TextBox 中显示的文本，您必须调用属性的 set 方法。这不仅仅是一个简单的变量赋值，它是一个方法调用。直观上可能很明显，请注意分配 Text 属性是如何产生很多副作用的。你可以在屏幕上看到它。

要间接调用一个方法，你需要另一辆车，你需要一个*委托*。非常类似于 C 中的函数指针。任何有关 .NET 编程的介绍性书籍都会解释它们。您可以声明自己的委托类型，但更喜欢 .NET 框架中内置的通用委托类型。添加对 System.Core 的引用，以便您可以使用通用 Action<> 委托类型。您需要首先编写一个分配 Text 属性的方法：

```
private: 
    void updateTextBox(String^ text) {
        textBox1->Text = text;
    } 
```

这将使用如下示例方法进行更新：

```
 void Test(Action<String^>^ updater) {
        updater("foo");
    } 
```

并注意此方法如何更新*任何*文本框，您传递的委托对象决定哪个。您可以使用如下代码创建委托变量：

```
 Test(gcnew Action<String^>(this, &Form1::updateTextBox)); 
```

# java - 检查Java异常的定义？

> ID：16132013
> 
> 赞同：6
> 
> 时间：2013-04-21T14:09:56.160
> 
> 标签：java, exception, exception-handling

我看到一个定义可以是这样的：

> 通常 RuntimeExceptions 是可以以编程方式阻止的异常。

但这仍然不是受检异常的定义。我认为检查异常是“可以在编译时处理的异常”。这是正确的和/或你能告诉我更多吗？

我也在网站上看到了这个，你能解释一下报价吗？

> 许多人说根本不应该使用已检查的异常（即您应该明确捕获或重新抛出的异常）。

[Java：已检查与未检查的异常解释](https://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explanation)

我可以了解定义是什么吗？我也有些意外地读到：

> NumberFormatException 未选中`

但我认为这`NumberFormatException`是经过检查的，因为我会在编译时处理它。你能帮我理解吗？我做过一些 Java 编程，但我从未编写过自己的异常类，为什么需要它？ ![在此处输入图像描述](https://i.stack.imgur.com/p9xqv.jpg)

## 更新

Sierra / Bates 的 SCJP 书给出了一个定义：

![在此处输入图像描述](https://i.stack.imgur.com/FkKXs.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T14:13:32.580

已检查异常被定义为`java.lang.Throwable`（包括 Throwable 本身）的任何子类，它不是 or 的子`java.lang.Error`类`java.lang.RuntimeException`。您看到的指南就是这样，旨在帮助您了解运行时异常的意图的指南。

请参阅 Java 语言规范，第 11.1.1 节

> 未经检查的异常类是运行时异常类和错误类。
> 
> 已检查异常类是除未检查异常类之外的所有异常类。也就是说，检查的异常类都是 Throwable 的子类，除了 RuntimeException 及其子类和 Error 及其子类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:22:59.583

更广泛的定义是：

> CheckedExceptions 是您必须明确处理的异常。你要么必须声明你可以扔掉它，要么抓住它并处理它。[坎宁安维基](http://c2.com/cgi/wiki?CheckedException.)

因此，不检查 RuntimeExceptions，但如果方法声明它抛出它并且您被迫捕获或重新抛出，则检查 NumberFormatException。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T14:15:50.353

Checked exceptions 允许您在编译时验证您是在处理异常还是声明它们被抛出。

有些人确实建议避免检查异常。但是，这并不能消除管理异常的成本。它从编译时到运行时和调试时对其进行转换和放大。

来自[Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)：

> [P]程序员可能会想编写只抛出未经检查的异常的代码，或者让他们的所有异常子类都继承自 RuntimeException。这两种快捷方式都允许程序员编写代码，而无需担心编译器错误，也无需担心指定或捕获任何异常。尽管这对程序员来说似乎很方便，但它回避了捕获或指定要求的意图，并且可能会给使用您的类的其他人带来问题。

未经检查的异常允许您不必在任何地方声明几乎可以在任何地方发生的异常。来自[Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)：

> 运行时异常可以在程序中的任何地方发生，并且在一个典型的程序中它们可能非常多。必须在每个方法声明中添加运行时异常会降低程序的清晰度。因此，编译器不需要您捕获或指定运行时异常（尽管您可以）。

NumberFormatException 未选中，因为它属于这个阵营。在许多应用程序中，数字格式异常几乎可以在任何地方发生，并且数量众多。

# c# - 引用由变量定义的对象

> ID：16132015
> 
> 赞同：1
> 
> 时间：2013-04-21T14:10:05.930
> 
> 标签：c#

我有一个问题，我最近无法解决。我有这个代码

```
 foreach (Hashtable i in (ArrayList)inv["database"])
        {
            if (i != null)
            {
                if (i["type"].ToString() == "1")
                {
                    if (i["dataValue"].ToString() != "0")
                    {
                        inv{nn}.Image = Program.Properties.Resources._i["type"].ToString()+"-"+i["dataValue"].ToString();
                    }
                    else
                    {
                        inv{nn}.Image = Program.Properties.Resources._i["type"].ToString()
                    }
                }
            }
            nn++;
        } 
```

我有 36 个控件（这是我项目中的一个类，所以不是“香草”），每个控件都是一个“图片框”。我有 505 张图片，语法如下：如果数据值为 0，则为 {typeID}.png，如果数据值大于 0，则为 {typeID}-{dataValue}.png

因此，例如，如果它是第一个循环，i["type"].ToString() = 1 和 i["dataValue"].ToString() = 3，则 inv0 的图像更改为 Program.Proporties.Resources._1-3当第二个循环到来时，inv1 的图像会发生变化等......直到 inv35

这样的事情可能吗？我试过了

```
InterpolationBox x = Form1.FindControl("inv"+nn) 
```

而且我似乎没有使用 System.Web.UI 的 FindControl (FrameWork 4) 之类的东西。

我试过了

```
InterpolationBox x = this.Controls.Find("inv" + nn, false); 
```

而且我无法将“System.Windows.Forms.Control[]”类型的对象转换为“Program.InterpolatedBox”。无论如何，如果我摆脱了那个错误，我能改变那个实际的图片框，而不仅仅是复制的“x”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:13:33.690

```
InterpolationBox x = this.Controls.Find("inv" + nn, false); 
```

是你的问题所在。

你得到的错误告诉你：

> 无法将“System.Windows.Forms.Control[]”类型的对象转换为“Program.InterpolatedBox”类型。

您可以看到它说它不能将数组`System.Windows.Forms.Control`转换为 a`Program.InterpolationBox`是明智的，因为`InterpolationBox`它是单个控件。

该`Find`方法返回一个控件数组，而不仅仅是一个，因此您需要在数组中查找并取出您想要的控件（即使它只是第一个）。

* * *

至于您关于更改是否`x`会更改您使用答案获得的控制权`Controls.Find()`的问题是肯定的。

.NET 中的对象是通过引用的，这意味着`x`它不是对内存中`InterpolationBox`的引用。`InterpolationBox`

你甚至可以这样做：

```
var a = x;
var b = a;
var c = b;

c.DoSomething(); 
```

您调用的代码`c`将针对同一个对象进行操作，它们都只是指向同一事物的引用。

# c++ - 在 C++ 中，为什么引用 std::string 的单个字符会给出一个数字

> ID：16132017
> 
> 赞同：-7
> 
> 时间：2013-04-21T14:10:27.767
> 
> 标签：c++, string, character, substring

我有一个这样的字符串：

```
std::string N; 
```

我像这样分配一个（测试）值：

```
N = "Ant"; 
```

为了打印第一个字符，我这样做了：

```
std::cout << N[0]; 
```

但输出是`65`（即 ASCII 值）而不是实际字母。所以我尝试了这个：

```
putchar(N[0]); 
```

**为什么它会给出一个数字，是否有替代 putchar 的**方法可以避免使用旧的头文件`stdio.h`？

谢谢！

附加信息：编译器：gcc 版本 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)

完整的代码示例：

```
#include <iostream>
#include <string>
#include <stdio.h>
main()
{
 std::string N;

 N = "Ant"; 
 std::cout << N[0]; //output 65
 putchar(N[0]); //output A
} 
```

编译如下：

```
g++ c.cpp -o c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:21:23.480

在我的 Debian/Sid/x86-64 上，下面的程序（在`itsols.cc`使用命令编译的源文件中`g++ -Wall itsols.cc -o itsols`）

```
#include <iostream>
#include <string>

int main(int, char**) {
  std::string s = "Hello";
  std::cout << s[3] << std::endl;
  return 0;
} 
```

显示单个小写字母`l`（`g++ -Wall itsols.cc -o itsols`使用 GCC 4.7.2 和 GCC 4.8.0 以及 GCC 4.6.3 编译）

所以我无法重现您声称的内容（而且我相信您可能错了，因为当您阅读 C++ 参考资料时[，字符串上的运算符 []](http://www.cplusplus.com/reference/string/string/operator%5B%5D/)会给出`const char&`结果，该结果使用`std::cout <<`单个字符而不是数字输出）。

## 附加物

即使通过您的 [final] 示例（这不是正确的 C++，因为`main`签名错误，并且 GCC 对此发出警告）我得到两个`A`输出（并且使用 GCC 4.6.3、或 GC 4.7.2 或 GCC 4.8 .0)。另外，您的示例缺少一个`std::endl`和一个final `putchar('\n'); return 0;`...。

养成始终传递`-Wall`到`g++`or的习惯（在您使用 调试程序时`gcc`也传递，稍后 在没有错误时使用它进行优化），并检查您是否正在运行您相信的编译器，并获取它的版本。`-g``gdb``-O2``g++ -v`

# linux - ZF2 分页在 linux 服务器中不起作用？

> ID：16132020
> 
> 赞同：0
> 
> 时间：2013-04-21T14:10:40.127
> 
> 标签：linux, windows, pagination, zend-framework2

在我的 Windows 服务器分页工作正常但是当我把它放在 linux 服务器上时它显示这个错误`Fatal error: Cannot access private property Zend\Paginator\SerializableLimitIterator::$count in /var/www/foldername/vendor/zendframework/zendframework/library/Zend/Db/ResultSet/AbstractResultSet.php on line 243`

我真的不知道真正的问题是什么。我猜没什么。

# ios - IOS；NSAutoreleasePool 已经过时了？

> ID：16132023
> 
> 赞同：0
> 
> 时间：2013-04-21T14:11:18.897
> 
> 标签：ios, objective-c, nsautoreleasepool

我正在关注有关 CSV 数据访问的 youtube 视频。但是我在`NSAutoreleasePool`指定为过时的框架中看到了。我们有另一种方法来开发对 CSV 数据文件的访问吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T14:13:21.790

```
@autoreleasepool {
   // parse your CSV
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T14:39:19.547

“括号”`pool = [[NSAutoreleasePool alloc] init]`和`[pool drain];`已替换为`@autoreleasepool { <stuff between the "brackets> }`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T14:21:48.763

`@autoreleasepool`在 iOS5++ 中完全没有过时。在某些情况下，您必须设置自己的自动释放池，请参阅[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)。
最重要的情况是 1) 如果您的代码创建了许多可以在应用程序返回主运行循环之前释放的临时对象（您应该），以及 2) 如果您设置了一个单独的线程（您必须）。

# php - 使用 PHP 将数组元素插入数据库的语法

> ID：16132027
> 
> 赞同：0
> 
> 时间：2013-04-21T14:11:45.587
> 
> 标签：php, mysql, database, arrays

这并不是什么过于复杂的事情（我假设），我只是不确定做我想做的事的语法。我正在尝试将数组中的值插入数据库。下面实现了我想做的事情，但是我想知道是否可以将其重新格式化为下面的代码。

***当前代码可以满足我的要求：***

```
$name = explode(" ",$fullName);
$firstName = $name[0];  
$lastName = $name[count($name) - 1];
mysql_query("INSERT INTO `person` VALUES(NULL, '$firstName', '$lastName',0)")); 
```

***我想知道的是它是否可以像这样格式化：***

```
$name = explode(" ",$fullName);
mysql_query("INSERT INTO `person` VALUES(NULL, '$name[0]', '$name[count($name) - 1]',0)")); 
```

我之前尝试了几种不同的方法并得到了一个错误，这只是语法问题还是更深层次的问题？

哦，我应该补充一点，我唯一一次真正让插入完全运行，我最终分别在`Array[0]`和列中。`Array[2] - 1``first_name``last_name`

谢谢大家，希望我已经足够清楚了。需要更多信息，让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:20:43.937

你可以试试这个：

```
mysql_query("INSERT INTO `person` VALUES(NULL, '$name[0]', '".$name[count($name) - 1]."' "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:21:15.777

尝试这个：

```
$name = explode(" ",$fullName); 
$query="INSERT INTO person VALUES(NULL,'". $name[0]."','".$name[count($name) - 1]."'";
mysql_query($query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:22:26.897

尝试这个：

```
mysql_query("INSERT INTO `person` VALUES(NULL, '{$name[0]}', '{$name[count($name) - 1]}',0)"); 
```

# devexpress - 在 Devexpress 中单击的 NavBarItem 上打开新选项卡

> ID：16132028
> 
> 赞同：0
> 
> 时间：2013-04-21T14:11:59.040
> 
> 标签：devexpress

我正在使用 Devexpress 开发一些 Windows 窗体应用程序，并且我有类似下面的内容，打开了一组与“系统参数”相关的选项卡，并且我想要打开一组新选项卡来代替旧选项卡单击错误 navBarItem ，反之亦然，我在演示中看到了这个，但我自己不知道该怎么做，谢谢

![在此处输入图像描述](https://i.stack.imgur.com/2LiE9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:30:28.423

我建议您`UserControl`对每组选项使用 a ，当您单击导航栏的某个项目时，请执行以下操作：

*   将当前用户控件的可见属性设置为 false
*   检查与被点击项关联的用户控件是否存在，如果存在，将其可见属性设置为 true（重新激活它），否则，创建它的新实例并停靠它。

要管理它，您应该有一个已经打开的用户控件列表，以便您可以在需要时重新激活它们。

[这个链接](http://www.differentpla.net/content/2004/10/implementing-a-paged-options-dialog)可以帮助你:-)

# iphone - 从 Springboard 获取应用程序图标图像（越狱）

> ID：16132031
> 
> 赞同：4
> 
> 时间：2013-04-21T14:12:11.057
> 
> 标签：iphone, objective-c, jailbreak, theos, logos

我正在使用 theos 开发锁屏应用程序，部分功能需要手机上某些应用程序的图标图像。如何获取这些图标图像并将它们显示在手机的锁屏上？

到目前为止，我已经尝试了所有我能想到的东西，并且没有运气搜索过跳板标题。我一直在尝试从我通过谷歌找到的建议中检索 SBApplication 和 SBIconModel 中的图像，但我仍然没有运气。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T15:13:54.473

在你 %hook 一个类之后，在你正在使用的方法中，如果你试图获取邮件应用程序的图标，请执行以下操作

```
// Get the SBApplication for the mail app
Class $SBApplicationController = objc_getClass("SBApplicationController");
SBApplication *mailApp = [[$SBApplicationController sharedInstance] applicationWithDisplayIdentifier:@"com.apple.mobilemail"];

// Get the SBApplicationIcon for the mail app
SBApplicationIcon *mailAppIcon = [[objc_getClass("SBApplicationIcon") alloc] initWithApplication:mailApp]; 
```

重要的是获得您感兴趣的应用程序的正确 DisplayIdentifier。

希望这有帮助！任何问题请大声疾呼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T23:18:12.540

虽然，我接受以上作为答案，但我最终使用了以下代码，它显示了标题和徽章：

```
SBIcon *sbIcon = [model applicationIconForDisplayIdentifier:identifier];
SBIconView *app = [[%c(SBIconView) alloc] initWithDefaultSize];
[app setIcon:sbIcon];

//if you want the titles to be conditional
[app setLabelHidden:!titlesEnabled];

//if you want the badge view to be conditional
id badgeView;
if (device_version >= 6.0) badgeView = MSHookIvar<id>(app, "_accessoryView");
else badgeView = MSHookIvar<id>(app, "_badgeView");
if (badgeView) [badgeView setHidden:!badgesEnabled]; 
```

# php - How to sort a multidimensional array?

> ID：16132036
> 
> 赞同：-2
> 
> 时间：2013-04-21T14:12:29.120
> 
> 标签：php, arrays, multidimensional-array, sorting

Does ANYBODY know how to sort a multidimensional array?! I've been trying to do this for hours, with no success. I'm trying to sort the array "$page" with "position" in ascending order, as that's the position to show in the navigation bar. Any help would be MUCH appreciated! Already tried most of the on examples in the documentation, but nothing seems to work.

```
Array
(
[0] => Array
    (
        [position] => 0
        [text] => Home
        [url] => ./
        [navigation] => true
    )

[1] => Array
    (
        [position] => 0
        [text] => 404
        [url] => ./?p=404
        [navigation] => false
    )

[2] => Array
    (
        [position] => 0
        [text] => 403
        [url] => ./?p=403
        [navigation] => false
    )

[3] => Array
    (
        [position] => 1
        [text] => Posts
        [url] => ./?p=posts
        [navigation] => true
    )

[4] => Array
    (
        [position] => 3
        [text] => Users
        [url] => ./?p=users
        [navigation] => true
    )

[5] => Array
    (
        [position] => 1
        [text] => Logout
        [url] => ./?p=logout
        [navigation] => false
    )

[6] => Array
    (
        [position] => 2
        [text] => Banner
        [url] => ./?p=banner
        [navigation] => true
    )

[7] => Array
    (
        [position] => 5
        [text] => Login
        [url] => ./?p=login
        [navigation] => false
    )

) 
```

Please don't tell me to search, because I have, and nothing is working! One of them did work when i was testing it locally, but my server threw up an error so I had to find an alternative.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:19:13.230

Use [usort](http://php.net/manual/en/function.usort.php).

```
function cmp($a, $b)
{
    if ($a['position'] == $b['position']) {
        return 0;
    }
    return ($a['position'] < $b['position']) ? -1 : 1;
}

usort($page, "cmp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:06:06.327

You can try out the code below here: [sandbox](http://sandbox.onlinephpfunctions.com/code/8873e9c8bd3ebe0b0efd247d795427d06e2b027f)

**Code**

```
function intComparator($key) {
    return function ($a, $b) use ($key) {
        if ($a[$key] == $b[$key]) return 0;
        return $a[$key] > $b[$key] ? 1 : -1;
    };
}

$items = Array (
  Array (
    'position'   => 0,
    'text'       => 'Home',
    'url'        => './',
    'navigation' => True
  ),
  Array (
    'position'   => 0,
    'text'       => '404',
    'url'        => './?p=404',
    'navigation' => False
  ),
  Array (
    'position'   => 0,
    'text'       => '403',
    'url'        => './?p=403',
    'navigation' => False
  ),
  Array (
    'position'   => 1,
    'text'       => 'Posts',
    'url'        => './?p=posts',
    'navigation' => True
  ),
  Array (
    'position'   => 3,
    'text'       => 'Users',
    'url'        => './?p=users',
    'navigation' => True
  ),
  Array (
    'position'   => 1,
    'text'       => 'Logout',
    'url'        => './?p=logout',
    'navigation' => False
  ),
  Array (
    'position'   => 2,
    'text'       => 'Banner',
    'url'        => './?p=banner',
    'navigation' => True
  ),
  Array (
    'position'   => 5,
    'text'       => 'Login',
    'url'        => './?p=login',
    'navigation' => False
  )
);

usort($items, intComparator('position'));

for ($i = 0; $i < count($items); $i++) {  
  echo "######## Item $i ########\n";
  $item = $items[$i];          
  foreach($item as $key => $value) {
    printf("%-12s=> %s\n", $key, $value);
  }
} 
```

**Output**

```
######## Item 0 ########
position    => 0
text        => Home
url         => ./
navigation  => 1
######## Item 1 ########
position    => 0
text        => 403
url         => ./?p=403
navigation  => 
######## Item 2 ########
position    => 0
text        => 404
url         => ./?p=404
navigation  => 
######## Item 3 ########
position    => 1
text        => Logout
url         => ./?p=logout
navigation  => 
######## Item 4 ########
position    => 1
text        => Posts
url         => ./?p=posts
navigation  => 1
######## Item 5 ########
position    => 2
text        => Banner
url         => ./?p=banner
navigation  => 1
######## Item 6 ########
position    => 3
text        => Users
url         => ./?p=users
navigation  => 1
######## Item 7 ########
position    => 5
text        => Login
url         => ./?p=login
navigation  => 
```

# java - 为 is.readObject 生成了异常。为什么？

> ID：16132041
> 
> 赞同：0
> 
> 时间：2013-04-21T14:13:15.250
> 
> 标签：java, android

我有一个游戏，它会定期将游戏当前状态保存到文件中（通过将序列化对象写入文件）。用户可以稍后恢复游戏，它将读取该对象并从那里构建游戏。

这似乎工作正常，但有时我得到这个异常

```
java.io.EOFException
        at java.io.DataInputStream.readByte(DataInputStream.java:98)
        at java.io.ObjectInputStream.nextTC(ObjectInputStream.java:506)
        at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:778)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2003)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1960)
        at com.myGame.GameState.loadFromFile
        at com.myGame.GameState.loadGame 
```

这是 loadFromFile 代码

```
 try {
    FileInputStream fis = mActivity.openFileInput(fileName);
    ObjectInputStream is = new ObjectInputStream(fis);
    stateDetails = (StateDetails)is.readObject();//exception is generated here

    is.close();
    fis.close();
} catch (Exception e) {
    MyApplication.SWERR(e);
} 
```

我不明白为什么会发生这种情况。它的一次性对象保存和读取。到达文件末尾不涉及循环。为什么会生成？任何帮助表示赞赏........谢谢

编辑：这就是我保存的方式

```
FileOutputStream fos = mActivity.openFileOutput(fileName, Context.MODE_PRIVATE);
            ObjectOutputStream os = new ObjectOutputStream(fos);
            os.writeObject(stateDetails);
            os.flush();
            fos.flush();
            os.close();
            fos.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:48:32.500

[EOFException](http://docs.oracle.com/javase/6/docs/api/java/io/EOFException.html)表示您正在尝试读取文件末尾。可能的原因可能是：

1.  写入文件时出现问题，或文件本身可能损坏。
2.  它可以是不应该是零长度的零长度文件。
3.  您可能正在读取文件，而不是写入的文件。

我的建议是，检查[is.available()](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html#available%28%29)并尝试读取对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:28:09.827

> 这似乎工作正常，但有时我得到这个异常

尝试使用这种方法：

```
try {
   FileInputStream fis = mActivity.openFileInput(fileName);
   ObjectInputStream is = new ObjectInputStream(fis);
   while(true) {
      try {
         stateDetails = (StateDetails) is.readObject();
      }
      catch(EOFException ex) {
          is.close();
          break;     
      }
   }
}
catch (Exception e) {
   MyApplication.SWERR(e);
} 
```

我有类似的问题，我通过上面的代码解决了它。但您始终需要确保：

*   不要打电话`readObject()`两次
*   `ObjectOutputStream`写入完成后总是立即关闭
*   `writeInt(<value>)`如果您首先要编写更多对象，则需要先通过然后在读取调用`getInt()`和循环中读取对象之前写入它们的计数

# python - Python 简单 TCP 中继

> ID：16132043
> 
> 赞同：1
> 
> 时间：2013-04-21T14:13:22.087
> 
> 标签：python, linux, sockets

我正在尝试构建一个接受多个客户端连接的简单 TCP 中继。

```
Client1 --> TCPrelay1 --> RealServer1 --> TCPrelay1 --> Client1
Client2 --> TCPrelay1 --> RealServer1 --> TCPrelay1 --> Client2
Client3 --> TCPrelay1 --> RealServer1 --> TCPrelay1 --> Client3 
```

在这件事上有些东西。真正的客户数量没有限制

* * *

[我在这里](https://github.com/EtiennePerot/misc-scripts/blob/master/udp-relay.py)找到了一个 UDP 中继脚本。

我试图将其修改为 TCP。我对python套接字真的很陌生。那么我的代码有什么问题呢？什么都没有发生。而且它没有中继。

```
#SOCK_STREAM --TCP
localPort = 5000
remotePort = 5000

#SV
remoteHost = "xxxxx"

try:
    localPort = int(localPort)
except:
    fail('Invalid port number: ' + str(localPort))
try:
    remotePort = int(remotePort)
except:
    fail('Invalid port number: ' + str(remotePort))

try:
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind(('', localPort))
    s.listen(1)
except:
    fail('Failed to bind on port ' + str(localPort))

knownClient = None

while True:
    conn, addr = s.accept()
    conn2, addr2 = s.connect((remoteHost, remotePort))
    data = connection.recv(1024)
    if knownClient is None:
        knownClient = addr
    if addr == knownClient:
        s.sendall(data)
        print "Sent     : " + ":".join("{0:X}".format(ord(c)) for c in data)
    else:   
        s.sendall(data)
        print "Received : " + ":".join("{0:X}".format(ord(c)) for c in data) 
```

* * *

[忽略]
做了一些研究，在另一个 SO 问题上发现了这个逻辑：

```
import select

def fromAtoB(A, B):
    r, w = select.select([A], [B], [])
    if not r: select.select([A], [], [])
    elif not w: select.select([], [B], [])
    B.sendall(A.recv(4096)) 
```

但我仍在尝试了解如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:23:29.770

您的代码接受一个连接，然后在一个方向上中继一个数据块，然后不再查看该连接。

你的第二段代码有各种各样的问题，但最大的问题是它可能会死锁。在您调用 到 期间`B.sendall`，如果`B`拒绝读取任何数据，直到它能够完成发送到`A`，这在您中继的协议中可能是合法的，您的代理`B`将永远等待对方，因为您的代理拒绝读取任何数据从`B`直到它完成发送。

一个适当的接力必须尝试一次做四件事，并且不能等待一件事完成后再开始另一件事。这四件事是：

1）从连接A读取。（除非已经备份了大量数据。）

2）从连接B读取。（除非已经备份了大量数据。）

3）写入连接A。（除非没有从连接B接收到未中继的数据。）

4）写入连接B。（除非没有从连接A接收到未中继的数据。）

特别是，您需要*两个*缓冲区，一个用于每个方向的未发送数据。您不能更改方向，因为这将要求您等待其中一个节点接收数据，如果该节点正在等待*您*接收数据，这可能会死锁。

通常，实现代理的最简单方法是每个连接使用两个线程，每个方向一个。

# android - 如何使用 ext4 运行 AVD？

> ID：16132050
> 
> 赞同：1
> 
> 时间：2013-04-21T14:14:03.707
> 
> 标签：android, emulation, avd, ext4

我想在 android 模拟器中使用 ext4 运行 AVD。在创建新的 AVD 并运行它之后，/system、/data 和 /cache 总是使用 yaffs2 挂载。

有没有办法用 ext4 创建 AVD？或者：我可以在创建 AVD 后更改文件系统吗？它试图简单地将其重新安装为 ext4，但这并没有成功。

# iphone - UINavigationController 奇怪的问题

> ID：16132060
> 
> 赞同：0
> 
> 时间：2013-04-21T14:15:19.583
> 
> 标签：iphone, ios, xcode, uinavigationcontroller

在我的应用程序中，我有 NavigationController 作为 root，我也有一个导航按钮。当我按下按钮时，它会翻转到另一个控制器。

**目标视图代码：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *filePath = [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]stringByAppendingPathComponent:@"favorites.plist"];
    NSData *data = [[NSData alloc]initWithContentsOfFile:filePath];
    NSKeyedUnarchiver *unArchiver = [[NSKeyedUnarchiver alloc]initForReadingWithData:data];

    self.title = [unArchiver decodeObjectForKey:@"title"];
    self.pubDate = [unArchiver decodeObjectForKey:@"pubdate"];
    self.description = [ unArchiver decodeObjectForKey:@"description"];
} 
```

**按钮代码1：**

```
 -(void)navFavoritesButton{
    [UIView beginAnimations:@"flipview" context:nil];
    [UIView setAnimationDuration:2];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft
                           forView:self.view cache:YES];
    FavoritesView *fav = [[FavoritesView alloc]initWithStyle:UITableViewStylePlain];
    UINavigationController *favNav = [[UINavigationController alloc]initWithRootViewController:fav];
    favNav.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:favNav animated:YES];
} 
```

**按钮代码2：**

```
-(void)navFavoritesButton{
    [UIView beginAnimations:@"flipview" context:nil];
    [UIView setAnimationDuration:2];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft
                           forView:self.view cache:YES];
    FavoritesView *fav = [[FavoritesView alloc]initWithStyle:UITableViewStylePlain];
    fav.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:fav animated:YES];

} 
```

我有一个奇怪的问题；如果我使用按钮 2 代码一切正常，则加载视图，取消归档数据并将其显示在 tableView 上。

但是，如果我使用按钮 1 代码，则应用程序崩溃并显示以下日志：

```
 2013-04-21 16:51:56.714 YnetXML[21898:f803] -[__NSArrayM isEqualToString:]: unrecognized selector sent to instance 0x6b4fd30
2013-04-21 16:51:56.715 YnetXML[21898:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM isEqualToString:]: unrecognized selector sent to instance 0x6b4fd30'
*** First throw call stack:
(0x268c052 0x1a61d0a 0x268dced 0x25f2f00 0x25f2ce2 0xc312d1 0xc9830e 0x82123 0xc9764e 0xc96c1c 0xcbd56d 0xca7d47 0xcbe441 0xcbe4f9 0xeb5c68 0xc754a1 0xc7612b 0xeb54c7 0xc9e427 0xc9e58c 0x348c4 0xc9e5cc 0x34568 0x387d 0x268dec9 0xbd45c2 0xe0fd54 0x268dec9 0xbd45c2 0xbd455a 0xc79b76 0xc7a03f 0xc792fe 0xbf9a30 0xbf9c56 0xbe0384 0xbd3aa9 0x35a9fa9 0x26601c5 0x25c5022 0x25c390a 0x25c2db4 0x25c2ccb 0x35a8879 0x35a893e 0xbd1a9b 0x22ed 0x2215)
terminate called throwing an exception(lldb) 
```

**编辑：**

我删除了下面的行，它适用于按钮 1 和 2 代码。什么应该导致问题？

```
self.title = [unArchiver decodeObjectForKey:@"title"]; 
```

可能是什么问题呢？为什么它在没有 navigationController 的情况下运行良好并崩溃？

我试图解决这个问题几个小时，我尝试了各种方法，我在网上阅读但没有任何效果。我只是不知道是什么原因导致它崩溃，请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:00:35.107

我想问题出在这三个陈述上

```
self.title = [unArchiver decodeObjectForKey:@"title"];
self.pubDate = [unArchiver decodeObjectForKey:@"pubdate"];
self.description = [ unArchiver decodeObjectForKey:@"description"]; 
```

尝试这个：

```
//I guess problem with this, because only when you bring in a navigation controller , your app crashes so only when navigation controller comes into play the navigation bar appears and self.title is the text you see in the center of the navigation bar - so rename self.title to self.titlesArray or something

if([[unArchiver decodeObjectForKey:@"title"] isKindOfClass:[NSString class]])
{
 //do not use self.title for other purposes, it is to set title of navigation bar.
self.title = [unArchiver decodeObjectForKey:@"title"];
}

self.pubDate = [unArchiver decodeObjectForKey:@"pubDate"];
self.description= [unArchiver decodeObjectForKey:@"description"]; 
```

注意：这不是实现的方法，但这只是一种找出这些语句是否是导致崩溃的原因的方法。试试这个并告诉我，我们会想出另一种方法。

# android - 使用单独的数组列表填充 5 个片段页面

> ID：16132063
> 
> 赞同：0
> 
> 时间：2013-04-21T14:15:43.367
> 
> 标签：android

我已经被困了好几天了。我有一个活动可以解析 html 并将信息分类到 5 个数组列表中。每个数组列表是一个工作日。我想获取每个数组列表并在单独的页面上的列表视图中显示信息，所以星期一将显示在一个页面上，然后通过滑动移动到星期二等等。

我采用了 eclipse 默认的可滚动标签 + 滑动导航，我正在尝试从那里构建。

所以基本上我想用 5 个数组列表填充 5 页数据，每页 1 个数组列表。任何想法如何在特定页面中将数组列表分配给列表视图？

这是我到目前为止的代码

```
public class DisplayOnlineTimetable extends FragmentActivity {

SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
String value;   
Document doc = null;
private ListView mainListView ;  

static ViewGroup mViewGroup;
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_display_online_timetable_dummy);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.display_online_timetable, menu);
    return true;
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        return DummySectionFragment.newInstance(i);
    }

    @Override
    public int getCount() {
        return 5;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        Locale l = Locale.getDefault();
        switch (position) {
        //monday
        case 0:
            return getString(R.string.title_section1).toUpperCase(l);
            //tuesday
        case 1:
            return getString(R.string.title_section2).toUpperCase(l);
            //wednesday
        case 2:
            return getString(R.string.title_section3).toUpperCase(l);
            //thursday
        case 3:
            return getString(R.string.title_section3).toUpperCase(l);
            //friday
        case 4:
            return getString(R.string.title_section3).toUpperCase(l);
        }
        return null;
    }
}

public void createTimetable(ArrayList<SingleClass> list, Elements elements, Day day)
{

}   

private class CreateTimetables extends AsyncTask<URL, Integer, Long> 
{
    protected Long doInBackground(URL... urls) {

    }

    protected void onPostExecute(Long result) 
    {

    }
} 
```

}

DummySectionFragment 类

```
public class DummySectionFragment extends ListFragment {
private Integer arrayListId;
ViewGroup myViewGroup;
public static final String CATEGORY_POSITION = "section_number";
public static DummySectionFragment newInstance(int pos) {
    DummySectionFragment f = new DummySectionFragment();

    // Supply num input as an argument.
    Bundle args = new Bundle();
    args.putInt(CATEGORY_POSITION, pos);
    f.setArguments(args);

    return f;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    //get the id for your array list
    arrayListId = getArguments() != null ? getArguments().getInt(CATEGORY_POSITION) - 1 : 1;
}

//create the list view layout
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
myViewGroup = container;
View v = inflater.inflate(R.layout.list_row, container, false);
return v;
 }

//populate the list view row
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    ArrayAdapter<SingleClass> arrayAdapter =      
 new ArrayAdapter<SingleClass>(getActivity(), android.R.id.list, R.layout.list_row);

    setListAdapter(arrayAdapter);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:08:25.917

你需要做的是标准的，你几乎就在那里。

首先在 ViewPager 适配器的 getItem 方法中，启动 Fragment 所在的位置：

```
@Override
public Fragment getItem(int i) {
    return DummySectionFragment.newInstance(i);
} 
```

接下来，在您的 Fragment 类中，创建一个构造函数来实例化它：

```
public static DummySectionFragment newInstance(int pos) {
    DummySectionFragment f = new DummySectionFragment();

    // Supply num input as an argument.
    Bundle args = new Bundle();
    args.putInt(CATEGORY_POSITION, pos);
    f.setArguments(args);

    return f;
} 
```

现在让你的 DummySectionFragment 扩展一个 ListFragment，在 onActivityCreated 方法中你可以填充它：

```
public class DummySectionFragment extends ListFragment {
    private Integer arrayListId;
    //the constructor from above

    @Override
    public void onCreate(Bundle savedInstanceState) {
        //get the id for your array list
        arrayListId = getArguments() != null ? getArguments().getInt(CATEGORY_POSITION) - 1 : 1;
    }

    //create the list view layout
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    myViewGroup = container;
    View v = inflater.inflate(R.layout.fragment_list, container, false);
    return v;
}

    //populate the list view row
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        ArrayAdapter<String> arrayAdapter =      
     new ArrayAdapter<String>(this, android.R.layout.list, <your_array_list_row.xml>);

        setListAdapter(adapter);
    }
} 
```

您的 Fragment 类的上述代码将根据片段的位置获取数组的 id，并为其创建一个 ArrayAdapter，并使用此适配器填充列表视图片段。现在您所要做的就是为列表创建 xml 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="match_parent"
          android:layout_height="match_parent">

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    </ListView>

</LinearLayout> 
```

最后一件事是确保所有的 Fragment 类都来自同一组库（例如，常规的 Fragment 库或 support.v4）。

# android - 谷歌地图不显示

> ID：16132065
> 
> 赞同：0
> 
> 时间：2013-04-21T14:15:52.057
> 
> 标签：android, google-maps

我正在尝试加载 GoogleMap。我使用该`<uses-library android:name="com.google.android.maps" />`库，这是 MapView 的 xml。

```
 <?xml version="1.0" encoding="utf-8"?>
    <com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="AIzaSyDvTjB5XuzifATB4G50qBc7TTRo5luhV9o"
    /> 
```

我的活动扩展了`MapActivity as public class Geofencesetup extends MapActivity {}`。但是当我运行代码时，我只有很小的网格，看不到地图。我的应用程序有两个 xml，一个具有另一个地图显示应用程序的片段，如下所示

```
 <fragment 
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      class="com.google.android.gms.maps.SupportMapFragment" /> 
```

我想添加 MapView，因为它更适合为地理围栏设置制作叠加层。对于片段，我可以看到整个地图，但对于 MapView，我只看到网格。我的查询是（1）我可以在同一个应用程序中使用`com.google.android.gms.maps.SupportMapFragment`和吗？`com.google.android.maps.MapView`(2)为什么我在 MapView 上只看到网格？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:22:50.130

据我所知，不可能在同一个应用程序中同时使用这两个 API。即使你能做到这一点，你也不能使用`Google Map API V1`它`MapView`和`MapActivity`对象，因为这个 API 已经被谷歌弃用了，你不能得到`API`它的新密钥。这可能是您只看到网格而不是地图的原因。

因此，鼓励并建议将您的应用程序移动到仅使用`Google Maps API V2`.

# hadoop - 从另一个目录启动时，Hive 不显示表

> ID：16132069
> 
> 赞同：2
> 
> 时间：2013-04-21T14:16:19.153
> 
> 标签：hadoop, installation, hive, cloudera, rhel

我在 RHEL 上安装了 Hive cdh4。每当我从一个目录启动 Hive 时，它​​都会在其中创建 metastore_db 目录和一个 derby.log 文件。这是正常行为吗？此外，当我创建表时，从特定目录启动 Hive；当我从目录启动 Hive 时，我无法看到该表，除此之外。

例如，假设我从我的主目录启动 Hive，即 $HOME 或 ~，然后我在 Hive 中创建表。但是当我从 /path/to/my/Hive/directory 启动 Hive 并显示表时，我刚刚创建的表不会出现。但是，如果再次从我的主目录启动 Hive 并查找表，我可以看到该表。

此外，如果我在 hive-site.xml 中进行一些更改，它们只会被 Hive 忽略。

请帮助我我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:22:27.753

您可以通过更新“$HIVE_HOME/conf/hive-default.xml”文件的“javax.jdo.option.ConnectionURL”来更改这一点并使用一个 metastore_db，如下所示：

```
 <property>
       <name>javax.jdo.option.ConnectionURL</name>
       <value>jdbc:derby:;databaseName=/path/to/my/metastore_db;create=true</value>
       <description>JDBC connect string for a JDBC metastore</description>
    </property> 
```

`/path/to/my/metastore_db`您要保留元存储 dB 的位置在哪里。

# google-app-engine - 如何在本地模拟谷歌驱动器

> ID：16132071
> 
> 赞同：0
> 
> 时间：2013-04-21T14:16:22.990
> 
> 标签：google-app-engine, google-drive-api

我正在使用 gae 构建一个网站，它将连接到 google drive api。

我想在本地模拟驱动器功能（无需身份验证）以进行测试。

我的计划是创建一个 DriveObject 类，它定义了一个用于访问驱动器文件的接口。然后我会创建两个子类。一个连接到驱动器 api，另一个在本地文件系统上工作。

遗憾的是，我发现 gae 开发服务器无法访问本地文件系统。

有没有办法解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:39:45.710

在 Drive API 之上写一个抽象层。提供两个实现：一个使用 Drive API 的服务层和一个类似它的模拟服务。

# c++ - C++ 将 wstringstream 传递给另一个函数

> ID：16132075
> 
> 赞同：2
> 
> 时间：2013-04-21T14:16:43.063
> 
> 标签：c++, function

我尝试执行以下操作：

```
wstring wStringStreamToWString(wstringstream uStream)
{
   wstring s(uStream.str());
   return s;
} 
```

这给了我编译器错误

```
"C2248 std::basic_ios>_Elem,_Traits>::basic_ios: No access to private members whose declaration was done in std::basic_ios<_Elmen,_Trais>- class." 
```

但是，如果我不在单独的函数中执行此操作，它可以正常工作。所以我想当我将 wstringstream 传递给函数时，我只是犯了一个错误，但我看不出是哪个。

有人可以帮忙吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:32:24.847

通过（`const`因为它没有被修改）引用传递参数，因为流是不可复制的：

```
wstring wStringStreamToWString(wstringstream const& uStream)
{
    wstring s(uStream.str());
    return s;
} 
```

尽管就目前而言，该功能似乎完全没有必要。

# c# - 通过 GUI 将连接字符串和计时器间隔传递给 Windows 服务

> ID：16132078
> 
> 赞同：0
> 
> 时间：2013-04-21T14:16:57.393
> 
> 标签：c#, windows-services, ipc

我想用 c# 编写一个 Windows 服务，从 database1 中的 t1 表中获取数据，并将这些数据插入到另一个数据库中的另一个表中（例如 database2 中的 t2）。我正在使用本教程系列：[C# 中的 Windows 服务](http://arcanecode.com/2007/05/21/windows-services-in-c-getting-started-part-1/)。简而言之，通过使用计时器，一段时间（例如每 1000 毫秒）从 database1 读取和写入 database2 中的数据。这项工作很好，没有问题。

我想为用户提供一个 GUI，他可以输入这些项目：

1.  数据库 1 的连接字符串
2.  数据库 2 的连接字符串
3.  定时器间隔

因为我开始使用 Windows 服务，所以我不能做这个项目。我在 net 和 SO 中搜索这个，发现这个问题引入了 IPC（进程间通信）。但我找不到 IPC 以及如何通过它解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:26:49.753

如果您只每隔一秒左右进行一次实际工作，那么您可以在执行工作周期之前轻松地从注册表或配置文件中读取设置。

您的 GUI 应用程序将完全独立，它只需编写注册表设置或配置文件，这可能比 IPC 更容易。

如果您确实想使用 IPC，您需要首先决定圆顶 IPC 机制（我建议使用套接字以实现可移植性和可能的​​远程配置，但这是个人喜好问题），然后让您的服务监听和您的 GUI 应用程序连接并编写. 确保您不会忘记干净的身份验证。

# c# - MVC 4 - 使用 PagedList 和 Ajax.ActionLink 在初始导航后抛出所有 javascript/jQuery

> ID：16132079
> 
> 赞同：0
> 
> 时间：2013-04-21T14:17:00.357
> 
> 标签：c#, jquery, ajax, asp.net-mvc, pagedlist

我在我的应用程序的部分视图中使用 PagedList nuget 包。我的部分包含许多打开引导模式窗口的按钮。在部分的某些部分中，我使用截断多行文本的 jQuery 插件。

在初始页面加载时，一切正常 - 截断、引导 JS 功能等。当我导航到结果的第二页，然后返回到第一页时，所有这些功能都停止工作。

用于导航页面的链接是 Ajax.ActionLink()：

```
 @Ajax.ActionLink("Next >", "GetAllProperties", new { page = Model.PageNumber + 1 }, 
new AjaxOptions { UpdateTargetId = "quick-property-search-results" }) 
```

我已经`$(document.body).on('click', '.view', function (e) {...};`在我所有的 jQuery 函数中使用了 document.ready 之后绑定事件处理程序，但仍然没有乐趣。通过“分页”页面来回导航后，如果我尝试打开一个模式，我会得到

> 对象 [对象对象] 没有方法“模态”

我创建了一个[collabedit](http://collabedit.com/9wx87)，它说明了我的布局、视图和局部视图的简化版本，希望它可以提供对问题的更多见解。

真的很感激这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:21:59.443

找出问题所在。在我使用分页的部分中，我对 jQuery 有一个额外的引用，所以，我认为最初绑定到 jQuery 的任何东西，都不是在`Ajax.ActionLink()`对任何额外的“分页”页面发出 GET 请求之后，因此我得到了对象 [对象对象] 没有方法“X”。

# ios - 我的自定义 UIView 没有收到触摸

> ID：16132080
> 
> 赞同：2
> 
> 时间：2013-04-21T14:17:11.470
> 
> 标签：ios, uiview, nib

使用 IB，我创建了一个包含几个按钮的小子视图。我的控制器从 xib 文件中读取小视图并将其作为子视图添加到主视图中。它加载正常，我可以看到子视图及其所有按钮。据我所知，它还连接到控制器中的 IBOutlets 和 IBActions。

但是，当我按下按钮时，什么也没有发生！事实上，当我按下一个按钮时*，超级视图的 touchesBegan 就会被调用！* 超级视图还包含一个“普通按钮”（即我的子视图的兄弟），并且该按钮可以正常工作！问题：为什么我的子视图上的按钮不起作用？

```
-(void) loadMultibutt{
    self.buttErase = nil; // test if the outlet connects
    NSArray *arr = [[NSBundle mainBundle]
                    loadNibNamed:@"multibutt_ipad" owner:self options:nil];

    UIView *viewButts = [arr objectAtIndex:0];
    ViewWorkbench* vw = (ViewWorkbench*) self.view;
    [vw addMultibuttView:viewButts];

    // now, buttErase != nil.
    NSSet *setTest = [self.buttErase allTargets];
    NSLog(@"setTest = %@", setTest); // This works!
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T08:42:27.337

根据您的回复，我可以安全地得出结论，您的问题是按钮的父视图不包含其交互区域中的按钮。您仍然可以看到它们，因为您没有剪切子视图，但您仍然无法与它们交互。有两种选择可以解决您的问题

a）（推荐）将按钮放置在适当的位置，以便它们在可见（和父视图的交互区域）内

b) 覆盖父视图的 hitTest 选择器，以便它跟踪其子视图中的所有触摸，包括其边界之外的触摸。为此，您必须创建 UIView 的子类并实现以下内容：

```
-(UIView *) hitTest:(CGPoint)point withEvent:(UIEvent *)event{
UIView* result = [super hitTest:point withEvent:event];
if (result)
    return result;
for (UIView* sub in [self.subviews reverseObjectEnumerator]) {
    CGPoint pt = [self convertPoint:point toView:sub];
    result = [sub hitTest:pt withEvent:event];
    if (result)
        return result;
}
return nil; 
```

}

# c - ARM-C 互通

> ID：16132084
> 
> 赞同：3
> 
> 时间：2013-04-21T14:18:23.927
> 
> 标签：c, assembly, cortex-m3, thumb, lpc

我正在尝试一个简单的 ARM-C 互通程序。这是代码：

```
 #include<stdio.h>
#include<stdlib.h>

int Double(int a);
extern int Start(void);
int main(){

int result=0;
printf("in C main\n");
result=Start();
printf("result=%d\n",result);
return 0;
}

int Double(int a)
{
  printf("inside double func_argument_value=%d\n",a);

  return (a*2);
} 
```

汇编文件如下-

```
.syntax unified
    .cpu cortex-m3
    .thumb

    .align
    .global Start
    .global Double
    .thumb_func

Start:
      mov r10,lr
      mov r0,#42
      bl Double
      mov lr,r10
      mov r2,r0
      mov pc,lr 
```

在 LPC1769（嵌入式艺术家板）上调试期间，我在指令“result=Start()”上遇到硬故障错误。我正在尝试在这里进行 arm-C 互联。执行上述语句(result=Start())时的lr值为0x0000029F，故障指令所在，pc值为0x0000029E。这就是我在 r1 中得到错误指令的方式

```
__asm("mrs r0,MSP\n"
"isb\n"
"ldr r1,[r0,#24]\n"); 
```

谁能解释我哪里出错了？任何解决方案表示赞赏。先感谢您。

我是 cortex-m3 的初学者，并且正在使用由 Code_Red 提供支持的 NXP LPCXpresso IDE。这是我的代码的反汇编。

```
 IntDefaultHandler:
00000269:   push {r7} 
0000026b:   add r7, sp, #0
0000026d:   b.n 0x26c <IntDefaultHandler+4>
0000026f:   nop 
00000271:   mov r3, lr
00000273:   mov.w r0, #42 ; 0x2a
00000277:   bl 0x2c0 <Double>
0000027b:   mov lr, r3
0000027d:   mov r2, r0
0000027f:   mov pc, lr

main:
00000281:   push {r7, lr}
00000283:   sub sp, #8
00000285:   add r7, sp, #0
00000287:   mov.w r3, #0
0000028b:   str r3, [r7, #4]
0000028d:   movw r3, #11212 ; 0x2bcc
00000291:   movt r3, #0
00000295:   mov r0, r3
00000297:   bl 0xd64 <printf>
0000029b:   bl 0x270 <Start>
0000029f:   mov r3, r0
000002a1:   str r3, [r7, #4]
000002a3:   movw r3, #11224 ; 0x2bd8
000002a7:   movt r3, #0
000002ab:   mov r0, r3
000002ad:   ldr r1, [r7, #4]
000002af:   bl 0xd64 <printf>
000002b3:   mov.w r3, #0
000002b7:   mov r0, r3
000002b9:   add.w r7, r7, #8
000002bd:   mov sp, r7
000002bf:   pop {r7, pc}

Double:
000002c0:   push {r7, lr}
000002c2:   sub sp, #8
000002c4:   add r7, sp, #0
000002c6:   str r0, [r7, #4]
000002c8:   movw r3, #11236 ; 0x2be4
000002cc:   movt r3, #0
000002d0:   mov r0, r3
000002d2:   ldr r1, [r7, #4]
000002d4:   bl 0xd64 <printf>
000002d8:   ldr r3, [r7, #4]
000002da:   mov.w r3, r3, lsl #1
000002de:   mov r0, r3
000002e0:   add.w r7, r7, #8
000002e4:   mov sp, r7
000002e6:   pop {r7, pc} 
```

根据您的建议 Dwelch，我已将 r10 更改为 r3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:12:14.080

我假设您的意思是互通而不是互联互通？LPC1769 是一个 cortex-m3，它只是 thumb/thumb2，因此它不支持 arm 指令，因此该平台没有可用的交互操作。尽管如此，使用编译器看看发生了什么：

先让编译器为你做这件事，然后在 asm 中自己尝试...

开始.s

```
.thumb
.globl _start
_start:
    ldr r0,=hello
    mov lr,pc
    bx r0
hang : b hang 
```

你好ç

```
extern unsigned int two ( unsigned int );
unsigned int hello ( unsigned int h )
{
    return(two(h)+7);
} 
```

二.c

```
unsigned int two ( unsigned int t )
{
    return(t+5);
} 
```

生成文件

```
hello.list : start.s hello.c two.c
    arm-none-eabi-as -mthumb start.s -o start.o
    arm-none-eabi-gcc -c -O2 hello.c -o hello.o
    arm-none-eabi-gcc -c -O2 -mthumb two.c -o two.o
    arm-none-eabi-ld -Ttext=0x1000 start.o hello.o two.o -o hello.elf
    arm-none-eabi-objdump -D hello.elf > hello.list

clean :
    rm -f *.o
    rm -f *.elf
    rm -f *.list 
```

产生 hello.list

```
Disassembly of section .text:

00001000 <_start>:
    1000:   4801        ldr r0, [pc, #4]    ; (1008 <hang+0x2>)
    1002:   46fe        mov lr, pc
    1004:   4700        bx  r0

00001006 <hang>:
    1006:   e7fe        b.n 1006 <hang>
    1008:   0000100c    andeq   r1, r0, ip

0000100c <hello>:
    100c:   e92d4008    push    {r3, lr}
    1010:   eb000004    bl  1028 <__two_from_arm>
    1014:   e8bd4008    pop {r3, lr}
    1018:   e2800007    add r0, r0, #7
    101c:   e12fff1e    bx  lr

00001020 <two>:
    1020:   3005        adds    r0, #5
    1022:   4770        bx  lr
    1024:   0000        movs    r0, r0
    ...

00001028 <__two_from_arm>:
    1028:   e59fc000    ldr ip, [pc]    ; 1030 <__two_from_arm+0x8>
    102c:   e12fff1c    bx  ip
    1030:   00001021    andeq   r1, r0, r1, lsr #32
    1034:   00000000    andeq   r0, r0, r0 
```

hello.o 自行反汇编：

```
00000000 <hello>:
   0:   e92d4008    push    {r3, lr}
   4:   ebfffffe    bl  0 <two>
   8:   e8bd4008    pop {r3, lr}
   c:   e2800007    add r0, r0, #7
  10:   e12fff1e    bx  lr 
```

编译器使用 bl 假设/希望它将从 arm 调用 arm。但它没有，所以他们所做的就是在里面放了一个蹦床。

```
0000100c <hello>:
    100c:   e92d4008    push    {r3, lr}
    1010:   eb000004    bl  1028 <__two_from_arm>
    1014:   e8bd4008    pop {r3, lr}
    1018:   e2800007    add r0, r0, #7
    101c:   e12fff1e    bx  lr

00001028 <__two_from_arm>:
    1028:   e59fc000    ldr ip, [pc]    ; 1030 <__two_from_arm+0x8>
    102c:   e12fff1c    bx  ip
    1030:   00001021    andeq   r1, r0, r1, lsr #32
    1034:   00000000    andeq   r0, r0, r0 
```

bl 到 __two_from_arm 是 arm 模式到 arm 模式的分支链接。设置了 lsbit 的目标函数（两个）的地址，它告诉 bx 切换到 thumb 模式，被加载到一次性寄存器 ip（r12？）然后 bx ip 发生切换模式。分支链接在 lr 中设置了返回地址，这无疑是一个 arm 模式地址（lsbit 零）。

```
00001020 <two>:
    1020:   3005        adds    r0, #5
    1022:   4770        bx  lr
    1024:   0000        movs    r0, r0 
```

two() 函数完成它的工作并返回，注意在互通时你必须使用 bx lr 而不是 mov pc,lr 。基本上，如果您没有运行没有 T 的 ARMv4 或没有 T 的 ARMv5，则 mov pc,lr 是一个好的习惯。但是任何 ARMv4T 或更新版本（ARMv5T 或更新版本）都使用 bx lr 从函数返回，除非您有特殊理由不这样做。（出于同样的原因，也避免使用 pop {pc} ，除非您确实需要保存该指令并且不互通）。现在在一个只有 thumb+thumb2 的 cortex-m3 上，你不能互通，所以你可以使用 mov pc,lr 和 pop {pc}，但是代码不可移植，这不是一个好习惯，因为那个习惯会当您切换回手臂编程时会咬您。

因此，由于 hello 在使用设置链接寄存器的 bl 时处于 arm 模式，因此 two_from_arm 中的 bx 不会触及链接寄存器，因此当 two() 返回 bx lr 时，它会在 bl __two_from_arm 之后返回 arm 模式hello() 函数中的行。

还要注意拇指功能后额外的 0x0000，这是为了在字边界上对齐程序，以便对齐以下 arm 代码......

看看编译器如何做拇指到手臂改变两个如下

```
unsigned int three ( unsigned int );
unsigned int two ( unsigned int t )
{
    return(three(t)+5);
} 
```

并将该函数放入 hello.c

```
extern unsigned int two ( unsigned int );
unsigned int hello ( unsigned int h )
{
    return(two(h)+7);
}

unsigned int three ( unsigned int t )
{
    return(t+3);
} 
```

现在我们得到另一个蹦床

```
00001028 <two>:
    1028:   b508        push    {r3, lr}
    102a:   f000 f80b   bl  1044 <__three_from_thumb>
    102e:   3005        adds    r0, #5
    1030:   bc08        pop {r3}
    1032:   bc02        pop {r1}
    1034:   4708        bx  r1
    1036:   46c0        nop         ; (mov r8, r8)
...
00001044 <__three_from_thumb>:
    1044:   4778        bx  pc
    1046:   46c0        nop         ; (mov r8, r8)
    1048:   eafffff4    b   1020 <three>
    104c:   00000000    andeq   r0, r0, r0 
```

现在这是一个非常酷的蹦床。bl 到three_from_thumb 处于thumb 模式，链接寄存器设置为返回two() 函数，lsbit 设置无疑表示返回thumb 模式。

蹦床以 bx pc 开始，pc 设置为提前两条指令，并且 pc 内部始终清除 lsbit，因此如果尚未处于 arm 模式，bx pc 将始终带您进入 arm 模式，并且在任一模式下都提前两条指令。bx pc 前面的两条指令是一条分支（不是分支链接！）到三个函数的 arm 指令，完成了蹦床。

请注意我一开始是如何编写对 hello() 的调用的

```
_start:
        ldr r0,=hello
        mov lr,pc
        bx r0
    hang : b hang 
```

那实际上行不通吗？它会让你从一个手臂到另一个拇指，而不是从一个拇指到另一个手臂。我将把它作为练习留给读者。

如果您将 start.s 更改为此

```
.thumb

.globl _start
_start:
    bl hello
hang : b hang 
```

链接器会照顾我们：

```
00001000 <_start>:
    1000:   f000 f820   bl  1044 <__hello_from_thumb>

00001004 <hang>:
    1004:   e7fe        b.n 1004 <hang>
    ...

00001044 <__hello_from_thumb>:
    1044:   4778        bx  pc
    1046:   46c0        nop         ; (mov r8, r8)
    1048:   eaffffee    b   1008 <hello> 
```

我会并且总是反汇编这样的程序，以确保编译器和链接器解决了这些问题。还要注意，例如 __hello_from_thumb 可以从任何 thumb 函数中使用，如果我从几个地方调用 hello，一些 arm，一些 thumb，并且 hello 是为 arm 编译的，那么 arm 调用将直接调用 hello（如果他们可以到达）并且所有拇指调用将共享相同的 hello_from_thumb （如果它们可以到达）。

这些示例中的编译器假设代码保持在相同模式（简单分支链接），并且链接器添加了互通代码......

如果您真的指的是互联网络而不是互联互通，那么请描述那是什么，我将删除此答案。

编辑：

您在调用 Double 期间使用寄存器来保留 lr，这将不起作用，没有寄存器适用于您需要使用内存的情况，最简单的是堆栈。看看编译器是怎么做的：

```
00001008 <hello>:
    1008:   e92d4008    push    {r3, lr}
    100c:   eb000009    bl  1038 <__two_from_arm>
    1010:   e8bd4008    pop {r3, lr}
    1014:   e2800007    add r0, r0, #7
    1018:   e12fff1e    bx  lr 
```

r3 被推送可能会在 64 位边界上对齐堆栈（使其更快）。需要注意的是链接寄存器保留在堆栈中，但弹出不会弹出到 pc，因为这不是 ARMv4 构建，因此需要一个 bx 从函数返回。因为这是 arm 模式，我们可以弹出到 lr 并简单地 bx lr。

对于拇指，您只能直接按下 r0-r7 和 lr，然后直接弹出 r0-r7 和 pc，您不想弹出到 pc，因为只有在您处于相同模式（拇指或手臂）时才有效。这对 cortex-m 来说很好，或者如果你知道你所有的呼叫者是什么也很好，但总的来说很糟糕。所以

```
00001024 <two>:
    1024:   b508        push    {r3, lr}
    1026:   f000 f811   bl  104c <__three_from_thumb>
    102a:   3005        adds    r0, #5
    102c:   bc08        pop {r3}
    102e:   bc02        pop {r1}
    1030:   4708        bx  r1 
```

同样的交易 r3 用作虚拟寄存器以保持堆栈对齐以提高性能（我使用了 gcc 4.8.0 的默认构建，这可能是具有 64 位 axi 总线的平台，指定架构可能会删除那个额外的寄存器）。因为我们不能弹出 pc，所以我假设因为 r1 和 r3 会出现故障并且选择了 r3（他们可以选择 r2 并保存一条指令），所以有两个弹出，一个是为了摆脱堆栈上的虚拟值，另一个是其他将返回值放在寄存器中，以便他们可以bx到它返回。

您的 Start 函数不符合 ABI，因此当您将它与 printf 调用等大型库混合时，毫无疑问您会崩溃。如果你没有，那就是愚蠢的运气。您的 main 程序集列表显示既没有使用 r4 也没有使用 r10，并且假设除了引导程序之外没有调用 main()，那么这就是您逃脱 r4 或 r10 的原因。

如果这真的是 LPC1769，那么整个讨论是无关紧要的，因为它不支持 ARM 也不支持互通（互通 = ARM 模式代码和拇指模式代码的混合）。您的问题与互通无关，您不是互通（注意函数末尾的 pop {pc}）。您的问题可能与您的汇编代码有关。

编辑2：

更改 makefile 以指定 cortex-m

```
00001008 <hello>:
    1008:   b508        push    {r3, lr}
    100a:   f000 f805   bl  1018 <two>
    100e:   3007        adds    r0, #7
    1010:   bd08        pop {r3, pc}
    1012:   46c0        nop         ; (mov r8, r8)

00001014 <three>:
    1014:   3003        adds    r0, #3
    1016:   4770        bx  lr

00001018 <two>:
    1018:   b508        push    {r3, lr}
    101a:   f7ff fffb   bl  1014 <three>
    101e:   3005        adds    r0, #5
    1020:   bd08        pop {r3, pc}
    1022:   46c0        nop         ; (mov r8, r8) 
```

首先，它全是拇指，因为 cortex-m 上没有手臂模式，其次，函数返回不需要 bx（因为没有手臂/拇指模式更改）。所以 pop {pc} 会起作用。

奇怪的是，虚拟寄存器仍然在推送中使用，我尝试了 arm7tdmi/armv4t 构建，它仍然这样做，所以还有一些其他标志可以用来摆脱这种行为。

如果您的愿望是学习如何制作可以从 C 中调用的汇编函数，那么您应该已经完成​​了。创建一个有点类似于您要在 asm 中创建的函数的框架的 C 函数：

```
extern unsigned int Double ( unsigned int );
unsigned int Start ( void )
{
    return(Double(42));
} 
```

组装然后拆卸

```
00000000 <Start>:
   0:   b508        push    {r3, lr}
   2:   202a        movs    r0, #42 ; 0x2a
   4:   f7ff fffe   bl  0 <Double>
   8:   bd08        pop {r3, pc}
   a:   46c0        nop         ; (mov r8, r8) 
```

并从组装功能开始。

```
.globl Start
.thumb_func
Start:
   push {lr}
   mov  r0, #42 
   bl   Double
   pop  {pc} 
```

那，或者阅读 gcc 的 arm abi 并了解哪些寄存器可以使用和不能使用而不将它们保存在堆栈中，哪些寄存器用于传递和返回参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T14:24:13.497

_start 函数是调用 main() 的 C 程序的入口点。为了调试任何 C 程序的 _start 函数都在汇编文件中。实际上linux上程序的真正入口点不是main()，而是一个叫做_start()的函数。标准库通常提供一个运行一些初始化代码，然后调用 main() 的版本。

尝试使用 gcc -nostdlib 编译它：

# jquery - iframe 来自网站的 div

> ID：16132086
> 
> 赞同：1
> 
> 时间：2013-04-21T14:18:57.903
> 
> 标签：jquery, html, iframe

搜索了这个东西并尝试了所有这些，但我似乎无法让它工作。

我只想将网站的特定部分 iframe 放入论坛帖子中，该论坛支持 html 发布。我想 iframe 来自这个网站 doodle.com/5bd7fzirdd3gnbzh 的 div:ptContainer 到这里的帖子 interncup-thc.ucoz.com/forum/5-1-2 看起来是空的帖子实际上里面有这个代码：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script> $("#ptContainer").load("http://doodle.com/5bd7fzirdd3gnbzh");</script> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:42:55.033

使用该代码，您不是在构建，而是在加载。这两个动作有很大的不同。

## 框架：

> HTML 元素（或 HTML 内联框架元素）表示嵌套的浏览上下文，有效地将另一个 HTML 页面嵌入到当前页面中。每个浏览上下文都有自己的会话历史和活动文档。包含嵌入内容的浏览上下文称为父浏览上下文。顶级浏览上下文（没有父级）通常是浏览器窗口。

参考：[https ://developer.mozilla.org/en-US/docs/HTML/Element/iframe](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)

## jQuery 加载：

> 描述：从服务器加载数据并将返回的 HTML 放入匹配的元素中。

参考：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

这两个解决方案不相关；知道你想做什么很重要。

如果你想使用 iframe，你可以做一个简单的 html iframe，比如：

```
<iframe src="http://doodle.com/5bd7fzirdd3gnbzh" width="300" height="300"></iframe> 
```

小提琴：http: [//jsfiddle.net/IrvinDominin/32bDj/](http://jsfiddle.net/IrvinDominin/32bDj/)

使用 iframe，您无法直接/简单地控制 iframe 页面的内容。

使用 jQuery 加载的问题是您面临的是一个不允许`Access-Control-Allow-Origin`的典型跨域请求问题。在这里查看解决方案：[JQuery load content from a remote site](https://stackoverflow.com/questions/8973672/jquery-load-content-from-a-remote-site)

# encryption - 如何解密 AES-128 加密的 m3u8 视频文件？

> ID：16132088
> 
> 赞同：10
> 
> 时间：2013-04-21T14:19:08.170
> 
> 标签：encryption, openssl, aes, m3u8

我试图解密 AES-128 加密的 m3u8 视频文件，例如这个：

m3u8 文件：

```
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-ALLOW-CACHE:NO
#EXT-X-VERSION:2
#EXT-X-FAXS-CM:MII6lAYJKoZIhvcNAQcCoII6hTCCOoECAQExCzAJBgUrDgMCGgUAM... very long key...
#EXT-X-KEY:METHOD=AES-128,URI="faxs://faxs.adobe.com",IV=0X99b74007b6254e4bd1c6e03631cad15b
#EXT-X-TARGETDURATION:8
#EXTINF:8,
video.mp4Frag1Num0.ts
#EXTINF:8,
video.mp4Frag1Num1.ts
... 
```

我试过 openssl ：

```
openssl aes-128-cbc -d -kfile key.txt -iv 99b74007b6254e4bd1c6e03631cad15b -nosalt -in video_enc.ts -out video_dec.ts 
```

key.txt 包含很长的密钥 -->

```
bad decrypt
1074529488:error:06065064:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt:evp_enc.c:539: 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-01-04T17:14:43.653

这可能有点小技巧，但是给定一个 .m3u8 文件的 URL，它将下载和解密构成流的文件：

```
#!/usr/bin/env bash
curl "$1" -s | awk 'BEGIN {c=0} $0 ~ "EXT-X-KEY" {urlpos=index($0,"URI=")+5; ivpos=index($0,"IV="); keyurl=substr($0, urlpos, ivpos-urlpos-2); iv=substr($0, ivpos+5); print "key=`curl -s '\''"keyurl"'\'' | hexdump -C | head -1 | sed \"s/00000000//;s/|.*//;s/ //g\"`"; print "iv="iv} $0 !~ "-KEY" && $0 ~ "http" {printf("curl -s '\''"$0"'\'' | openssl aes-128-cbc -K $key -iv $iv -d >seg%05i.ts\n", c++)}' | bash 
```

此脚本生成第二个脚本，该脚本提取密钥和初始化向量，并在下载时使用它们进行解密。它需要 curl、awk、hexdump、sed 和 openssl 才能运行。它可能会阻塞未加密的流，或使用非 AES-128 的流（是否支持任何其他加密？）。

你会得到一堆文件：seg00000.ts、seg00001.ts 等。使用 tsMuxeR ( [https://www.videohelp.com/software/tsMuxeR](https://www.videohelp.com/software/tsMuxeR) ) 将这些文件合并到一个文件中（简单的连接不起作用对我来说......这是我首先尝试的）：

```
(echo "MUXOPT --no-pcr-on-video-pid --new-audio-pes --vbr  --vbv-len=500"; (echo -n "V_MPEG4/ISO/AVC, "; for i in seg*.ts; do echo -n "\"$i\"+"; done; echo ", fps=30, insertSEI, contSPS, track=258") | sed "s/+,/,/"; (echo -n "A_AAC, "; for i in seg*.ts; do echo -n "\"$i\"+"; done; echo ", track=257") | sed "s/+,/,/") >video.meta
tsMuxeR video.meta video.ts 
```

（轨道 ID 和帧速率可能需要调整...通过将下载的文件之一传递给 tsMuxeR 来获取要使用的值。）

然后使用 ffmpeg 重新组合到更广泛理解的东西：

```
ffmpeg -i video.ts -vcodec copy -acodec copy video.m4v 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-29T11:11:25.537

为了解密加密的视频流，您需要加密密钥。此密钥**不是**流的一部分。应单独获取。

EXT-X-FAXS-CM 标头包含 DRM 元数据而不是密钥。

这是 Adob​​e Media Server 开发人员指南的摘录：受 Adob​​e Access Server 保护的变体播放列表还需要包含 #EXT-X-FAXS-CM 标签。变体播放列表中#EXT-X-FAXS-CM 标签的值是相对 URI，指的是单个流之一的 DRM 元数据。在客户端，变体播放列表中的#EXT-X-FAXS-CM 标签将是用于创建 DRM 会话。相同的 DRM 会话将用于变体播放列表中的所有加密 M3U8 文件。

完整指南可在此处找到：http: [//help.adobe.com/en_US/adobemediaserver/devguide/WS5262178513756206-4b6aabd1378392bb59-7fe8.html](http://help.adobe.com/en_US/adobemediaserver/devguide/WS5262178513756206-4b6aabd1378392bb59-7fe8.html)

还有人提到，faxs://faxs.adobe.com URI 用于本地密钥服务。所以密钥是从设备本地获取的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-03T09:42:49.693

虽然现有答案中的一些 bash 脚本可以让您部分（甚至全部）完成，但取决于您尝试从哪个站点下载，您可能会遇到其他障碍（不同的身份验证方法、自定义许可证服务器挂载等）。 )

我发现[streamlink](https://streamlink.github.io)是最强大的解决方案，它还可以让您直接流式传输（而不是下载），如果这是您所追求的，并且它已经为您完成了所有特定于站点的工作很长时间站点列表（请参阅[插件部分](https://streamlink.github.io/plugin_matrix.html)，但请记住它正在积极开发中，最新版本是在 6 月，因此对于一些较新的站点，您必须`git clone`从源代码安装）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-01T12:37:29.450

在许多情况下，VLC 很乐意将 .m3u8 视频转换为未加密的 .ts 或 .mp4。在 VLC 图形界面中，转到媒体 > 转换/保存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T19:36:07.653

即使通过此文件包含 AES 加密数据，`openssl`也不知道`m3u8`格式。但是[FFmpeg](http://ffmpeg.mplayerhq.hu/)可能能够处理它。

# html - 浮动到图像时如何对齐图像和文本

> ID：16132090
> 
> 赞同：1
> 
> 时间：2013-04-21T14:19:17.063
> 
> 标签：html, css

使用时如何制作如下`display: inline-block;`

```
+----------+  heading text here
|  image   +  some paragraph text
+----------+

+----------+  heading text here
|  image   +  some paragraph text
+----------+ 
```

hmtl 我用过...

```
<div class="videos">
  <div><img src=""><h3>heading text here</h3><p>some paragraph text</p></div>
  <div><img src=""><h3>heading text here</h3><p>some paragraph text</p></div>
</div> 
```

我用过的css...

```
.videos{
  display: inline-block; /* i have to use this as other elements to be inline-block */
}
.videos img{
  float: left;
} 
```

我的问题的解决方案是“某些段落文本”不应低于图像。或者有什么方法可以得到吗？

**编辑**

**[演示](http://jsfiddle.net/pJWBH/)**为什么即使设置后第二个标题和文本也会向右移动`text-align: left !imortant;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:33:33.857

与使用另一个浮点数相比，在浮点数旁边放置一*列*`overflow: hidden`内容的另一种方法是使用（*列*表示如果内容高于图像，则不会在此浮点数下显示）

工作小提琴：http: [//jsfiddle.net/kUdBm/](http://jsfiddle.net/kUdBm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:29:22.387

您是否尝试过：

```
.video p h3{
  float : right;
 } 
```

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:30:25.430

您可以将您的`h3`and包装`p`在一个 div 中：

```
<div class="right">
    <h3>heading text here</h3><p>some paragraph text</p>
</div> 
```

然后你只需要将该 div 浮动到图像的右侧

```
div.right {
    float: right;
} 
```

**[小提琴](http://jsfiddle.net/ydDeX/)**

* * *

当浮动元素位于容器框内时会出现问题，该元素不会自动强制容器的高度调整为浮动元素。当一个元素浮动时，其父元素不再包含它，因为浮动已从流中移除。您可以使用 2 种方法来修复它，即`clear: both`添加：

```
<br style="clear:both" /> 
```

这是一个快速而肮脏的解决方案，但不鼓励使用，因为它有很多缺点。更优雅和正确的方法是使用`clearfix`which 是一种元素在其自身之后自动清除的技术，这样您就不需要添加额外的标记。它通常用于浮动布局，其中元素浮动以水平堆叠。

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: block;
} 
```

`clearfix`你可以在互联网上找到很多关于的资源。这是基于您更新的问题的**[更新小提琴。](http://jsfiddle.net/pJWBH/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T14:33:33.470

这是演示您的代码：

[http://jsfiddle.net/bartekbielawa/cgWtH/](http://jsfiddle.net/bartekbielawa/cgWtH/)

**CSS 代码**

```
.videos{
  display: inline-block; /
}

.videos div {
    clear: both;
    margin: 20px 0;
    min-height: 60px;
}

.videos img {
  float: left;
  width: 100px; 
  margin-right: 10px;  
}

.videos div h3, videos div p {
    float: left;
}

.videos div h3 {
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-21T14:25:41.563

你必须在你使用的 H3 和 p 上加上宽度。否则，如果 h3 和 p 很大，它将在图像下方。

# c# - WPF 中的 BackgroundWorker 和 Dispatcher.BeginInvoke

> ID：16132091
> 
> 赞同：0
> 
> 时间：2013-04-21T14:19:28.437
> 
> 标签：c#, wpf, backgroundworker

谁能在 WPF 中告诉我，当我们可以通过在 DoWork 事件 Eventhandler 中调用 ReportProgress() 方法来使用 ProgressChangedEvent 事件处理程序更新 UI 时，为什么我们需要使用 Dispatcher.BeginInvoke() 方法从 DoworkEvent 处理程序更新 UI？如果我对后台工作人员和调度员的理解不正确，请纠正我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:24:23.497

您需要记住一条规则：

更新 UI 需要从 UI 线程完成。

牢记这一点，让我们看看调度程序做什么以及后台工作人员做什么：

**Dispatcher** 调度程序是一个对象，当您调用 BeginInvoke 时，它​​将在创建调度程序的线程上执行方法。应用程序的调度程序始终在 UI 线程上创建，因此这将起作用。

**后台工作者** 后台工作者非常相似，尽管它提供了一个基于事件的 API：当您`ReportProgress`在 DoWork 方法内部调用时，BackgroundWorker 将在创建后台工作者的线程上引发一个事件。因此，如果您在 UI 线程上创建 Background-Worker，您可以在 ProgressChanged 事件处理程序中更新 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T15:07:05.360

您可以从 BackgroundWorker 的 ProgressChanged 处理程序安全地更新 UI，而无需调用 Dispatcher。

[每当您调用ReportProgress](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)时，都会引发 ProgressChanged 事件。它在创建 BackgroundWorker 实例的线程上执行，该线程通常是 UI 线程。

从 ReportProgress 的备注部分：

> 对 ReportProgress 方法的调用是异步的并立即返回。ProgressChanged 事件处理程序在创建 BackgroundWorker 的线程上执行。

# android - 在安卓手机中写入通话记录

> ID：16132093
> 
> 赞同：0
> 
> 时间：2013-04-21T14:19:34.340
> 
> 标签：android, call

我想知道是否有任何方法可以将一些数字写入通话记录，即未接来电。我想要做的是，当我运行我的应用程序时，它会在通话记录中写入一个号码，假设该号码是 04556433，当我关闭应用程序时，它将显示为未接来电警报。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:21:59.163

```
public static void insertPlaceholderCall(ContentResolver contentResolver, String number)      {
        ContentValues values = new ContentValues();
        values.put(CallLog.Calls.NUMBER, number);
        values.put(CallLog.Calls.DATE, System.currentTimeMillis());
        values.put(CallLog.Calls.DURATION, 0);
        values.put(CallLog.Calls.TYPE, CallLog.Calls.MISSED_TYPE);
        values.put(CallLog.Calls.NEW, 1);
        values.put(CallLog.Calls.CACHED_NAME, "");
        values.put(CallLog.Calls.CACHED_NUMBER_TYPE, 0);
        values.put(CallLog.Calls.CACHED_NUMBER_LABEL, "");
        contentResolver.insert(CallLog.Calls.CONTENT_URI, values);
    } 
```

为此，您将需要以下许可 `android:name="android.permission.READ_CONTACTS`和`android.permission.WRITE_CONTACTS`

# javascript - Twitter Bower 文件选择

> ID：16132097
> 
> 赞同：1
> 
> 时间：2013-04-21T14:19:58.193
> 
> 标签：javascript, components, bower

我只是在玩 Bower 并让它拉下 jQuery 1.9.1 和 Fancybox 2.1.4

这很好，但是例如，Fancybox 将它的整个 repo 拉下来，包括所有演示文件，而不仅仅是我需要的实际文件。

这种情况应该如何处理？

尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:14:54.617

您目前有三个选择：

1.  关于正确使用（或即将成为）的`ignore`属性或为 Bower 维护单独的存储库（例如[AngularJS](https://github.com/angular/bower-angular)所做的）的错误作者。`component.json``bower.json`
2.  自己注册和维护一个组件。
3.  通过 HTTP 仅拉入您需要的文件，如下所示：

```
  “依赖”：{
    “fancybox”：“https://raw.github.com/fancyapps/fancyBox/master/source/jquery.fancybox.js”
  }

```

最后一个选项的缺点是依赖解析和多个文件都不起作用。最好的长期解决方案是游说作者正确支持鲍尔。

# node.js - 复合 JS 关系访问

> ID：16132102
> 
> 赞同：2
> 
> 时间：2013-04-21T14:20:37.830
> 
> 标签：node.js, compoundjs, jugglingdb

我已经定义了 2 个模式对象如下（用于 mongodb）

```
var User = describe('User', function () {
    property('name', String);
    property('email', String);
    property('password', String);
    set('restPath', pathTo.users);
});

var Message = describe('Message', function () {
    property('userId', String, { index : true });
    property('content', String);
    property('timesent', Date, { default : Date });
    property('channelid', String);
    set('restPath', pathTo.messages);
});

Message.belongsTo(User, {as: 'author', foreignKey: 'userId'});
User.hasMany(Message, {as: 'messages',  foreignKey: 'userId'}); 
```

但我无法访问相关的消息对象：

```
action(function show() {
    this.title = 'User show';

    var that = this;
    this.user.messages.build({content:"bob"}).save(function(){
        that.user.messages(function(err,message){
            console.log('Messages:');
            console.log(message);
        });
    });
    // ... snip ...
    }
}); 
```

尽管向消息集合添加了一条新消息，但消息数组始终为空。

我运行`db.Message.find({userId:'517240bedd994bef27000001'})`了 mongo shell 并显示了您所期望的消息，所以我开始怀疑[mongo 适配器](https://github.com/jugglingdb/mongodb-adapter "Mongo 适配器")是否存在问题。

[CompoundJS 中的一对多关系](https://stackoverflow.com/questions/15224642/one-to-many-relationship-in-compoundjs)显示了类似的问题（我认为）。

据我可以从文档中解决，这应该有效。我究竟做错了什么？

**编辑：**

在按照 Anatoliy 的建议将更改应用到我的架构后，我删除了我的 mongo 数据库并更新了 npm，但是当我尝试创建一个新用户时，我得到了以下信息：

```
Express
500 TypeError: Object #<Object> has no method 'trigger' in users controller during "create" action
at Object.AbstractClass._initProperties (/mnt/share/chatApp2/node_modules/jugglingdb/lib/model.js:123:10)
at Object.AbstractClass (/mnt/share/chatApp2/node_modules/jugglingdb/lib/model.js:31:10)
at Object.ModelConstructor (/mnt/share/chatApp2/node_modules/jugglingdb/lib/schema.js:193:23)
at Function.AbstractClass.create (/mnt/share/chatApp2/node_modules/jugglingdb/lib/model.js:222:15)
at Object.create (eval at (/mnt/share/chatApp2/node_modules/compound/node_modules/kontroller/lib/base.js:157:17), :16:10).... 
```

**EDIT2：** 创建动作：

```
action(function create() {
    User.create(req.body.User, function (err, user) {
        respondTo(function (format) {
            format.json(function () {
                if (err) {
                    send({code: 500, error: user && user.errors || err});
                } else {
                    send({code: 200, data: user.toObject()});
                }
            });
            format.html(function () {
                if (err) {
                    flash('error', 'User can not be created');
                    render('new', {
                        user: user,
                        title: 'New user'
                    });
                } else {
                    flash('info', 'User created');
                    redirect(path_to.users);
                }
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T17:24:14.340

这是 ObjectID 的问题。在您的架构代码中：

```
property('userId', String, { index : true }); 
```

所以 userId 是字符串，但是当你调用`user.messages`user.id 时使用（它是一个 ObjectID）。作为一种解决方案，只需从您的架构定义中删除这一行。

PS在您的情况下，您可以将关系定义为：

```
Message.belongsTo('author', {model: User, foreignKey: 'userId'});
User.hasMany('messages'); 
```

# extjs - Sencha破坏视图，用事件重新创建一个新视图

> ID：16132105
> 
> 赞同：1
> 
> 时间：2013-04-21T14:20:53.437
> 
> 标签：extjs, sencha-touch, touch, sencha-touch-2

我有一个 MVC 风格的 Sencha Touch 应用程序。

当我用

```
view.destroy(); 
```

然后尝试重新创建视图

```
view = Ext.create('testapp.view.view1'); 
```

控制器中事件的所有连接都不再触发。销毁视图并重新创建它以使事件仍然链接并触发的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:32:50.543

正如 Mitchell 所说 - “尝试不使用 id 配置，让 componentquery 使用 xtype 和属性解析组件。”

查看此讨论：[在销毁和重新创建面板后未触发控制器操作绘制事件](http://www.sencha.com/forum/showthread.php?203620-Controller-Action-painted-event-not-firing-after-destroy-and-re-creating-panel)

# wordpress - 排除父猫但不排除儿童 Wordpress 的最简单方法

> ID：16132116
> 
> 赞同：1
> 
> 时间：2013-04-21T14:21:57.067
> 
> 标签：wordpress

有什么方法可以包含属于 982 类的任何子项的帖子，但排除仅属于 982 类的帖子？

```
<?php query_posts($query_string . '&cat=-282,-428,,-1046,-1103,-982'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:28:30.760

我首先要获取父类别的子 ID，将它们存储在列表中，然后将它们作为参数作为包含传入。

```
<?php

$cats = wp_list_categories('echo=0&title_li=&child_of=982');
$args = array(
    'cat' => array(
        '-282', 
        '-428',
        '-1046',
        '-1103',
        '-982'
    )
);

foreach($cats as $cat) {
    $args['cat'][] = $cat->id;
} 

$posts = query_posts( $args ); 
```

类似的东西。

* * *

您也可以采用非关联数组方法。

```
<?php

$cats = wp_list_categories('echo=0&title_li=&child_of=982');

$include_cats = "";

if(!empty($cats)) {
    foreach($cats as $cat) {
        $include_cats .= "," . $cat->id;
    } 
}

$posts = query_posts($query_string . '&cat=-282,-428,-1046,-1103,-982' . $include_cats ); 
```

# objective-c - 跟踪执行 executeFetchRequest 时导致冻结的块/死锁

> ID：16132122
> 
> 赞同：2
> 
> 时间：2013-04-21T14:22:32.890
> 
> 标签：objective-c, macos, cocoa

我有一个经常和永久冻结的应用程序。发生这种情况时，我在 Xcode 中单击暂停，并看到在主线程上它总是停在执行 MOC 上的获取请求的代码行处。我还在`__psynch_mutexwait + 17`左侧的线程列表中看到了输出。这让我假设应用程序遇到死锁或由于某种原因 MOC 被阻止。

我的第一直觉是，我可能正在非主线程上执行 fetch 请求，所以我放入日志进行检查，但事实并非如此。所有获取都发生在主线程上。

我怎样才能去追踪可能在这里阻塞的东西？我应该在堆栈跟踪中寻找更多的东西吗？

我在其他线程上设置在主线程上获取的对象的属性是否有问题？即，`objectA`在 main 上获取，然后将其传递给另一个线程并执行类似的操作`objectA.someNumber = [NSNumber numberWithInt:2]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:47:25.960

正是因为您的获取请求正在您的应用程序阻塞的主线程上运行。请记住，主线程是一个串行队列，并且在您的获取请求完成之前不会运行其他块（或事件）（即使理论上它可以，因为您的块处于等待状态）。这就解释了为什么当你中断时你总是会遇到 _psanch_mutexwait。

您应该在另一个队列上运行您的获取请求，并在必要时使用主队列上的结果。实现此目的的一种方法是使用以下模式：

```
- (void) fetchRequest1
{
     dispatch_async(not_the_main_queue, ^(void) {

         // Code the request here.

         // Then use the result on the main if necessary.
         dispatch_async(dispatch_get_main_queue(), ^(void) {
             // Use the result on the main queue.
         });
     });
} 
```

另请注意，通常不需要在主队列上运行任何内容。事实上，如果您在该线程上运行得越少，您的应用程序通常会运行得更顺畅。当然，有些事情必须在那里完成，在这种情况下，您可以使用以下模式来确保它是：

```
- (void) runBlockOnMainThread:(void(^)(void))block
{
    dispatch_queue_t thisQ = dispatch_get_current_queue();
    dispatch_queue_t mainQ = dispatch_get_main_queue();

    if (thisQ != mainQ)
        dispatch_sync(mainQ, block);
    else
        block();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T09:28:58.110

> 我在其他线程上设置在主线程上获取的对象的属性是否有问题？即，在 main 上获取 objectA，然后将其传递给另一个线程并执行类似 objectA.someNumber = [NSNumber numberWithInt:2] 的操作？

是的！我试过这个。

当你在 ThreadA 中获取 ObjA，然后将它传递给 ThreadB 进行一些操作时，它就会陷入死锁。

# c++ - 如何判断模板类型是基本类型还是类

> ID：16132123
> 
> 赞同：5
> 
> 时间：2013-04-21T14:22:34.523
> 
> 标签：c++, templates, types

我有这样的代码

```
template <typename T> void fun (T value)
{
    .....
    value.print ();  //Here if T is a class I want to call print (), 
                     //otherwise use printf
    .....
} 
```

现在，要打印值，如果 T 是类，我想调用对象的打印函数，但如果 T 是基本数据类型，我只想使用 printf。

那么，如何判断 Template 类型是基本数据类型还是类呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T14:24:50.590

您可以使用[`std::is_class`](http://en.cppreference.com/w/cpp/types/is_class)（并且可能`std::is_union`）。详细信息取决于您对“基本类型”的定义。[在此处](http://en.cppreference.com/w/cpp/types)查看有关类型支持的更多信息。

但请注意，在 C++`std::ostream& operator<<(std::ostream&, T)`中，打印用户定义类型通常会重载`T`。这样，您无需担心传递给函数模板的类型是否为类：

```
template <typename T> void fun (T value)
{
    std::cout << value << "\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:25:11.380

[`operator<<(std::ostream&)`](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt)建议为任何类型重载`T`而不是使用`printf()`：你怎么知道要使用什么格式说明符？

```
template <typename T> void fun (T value)
{
    .....
    std::cout << value <<  std::endl;
    .....
} 
```

FWIW，[`std::is_class`](http://en.cppreference.com/w/cpp/types/is_class)存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T14:26:57.367

如果您没有 C++11 支持，另一种选择。

```
template<typename T>
class isClassT {
private:
    typedef char One;
    typedef struct { char a[2]; } Two;
    template<typename C> static One test(int C::*);
    template<typename C> static Two test(…);
public:
    enum { Yes = sizeof(isClassT<T>::test<T>(0)) == 1 };
    enum { No = !Yes };
}; 
```

用于确定类型是否为类类型的简单模板。[C++ 模板完整指南](https://rads.stackoverflow.com/amzn/click/com/0201734842)中的更多内容。

```
if (isClassT<T>::Yes) {
    std::cout << " Type is class " << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T14:30:53.473

我会使用打印辅助功能模板/重载：

```
template <typename T>
void print(T const & t) { t.print(); }

template <typename U>
void print(U * p) { std::printf("%p", static_cast<void*>(p)); }
// we really an enable_if on is_object<U>::value here...

void print(char x) { std::printf("%c", x); }
void print(int x) { std::printf("%d", x); }

// etc. for all fundamental types 
```

然后你可以简单地`print(value);`在你的代码中说。

# android - 将多个arraylist保存到sqlite数据库

> ID：16132124
> 
> 赞同：0
> 
> 时间：2013-04-21T14:22:38.130
> 
> 标签：android, sqlite, arraylist

我检索一些传感器值并将它们存储到 ArrayList。

```
ArrayList<Float> x_event = new ArrayList<Float>();
ArrayList<Float> y_event = new ArrayList<Float>();
ArrayList<Float> z_event = new ArrayList<Float>(); 
```

在 sensorChanged()

```
x_axis = acceleration[0];
y_axis= acceleration[1];
z_axis= acceleration[2];

x_event.add(x_axis);
y_event.add(y_axis);
z_event.add(z_axis); 
```

有没有办法以一种方法将所有 ArrayList 保存到我的 SQLite 数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:39:14.327

您有几种方法可以将此信息存储在数据库中。我首先想到的是：

1.  创建一个`event`包含`index`, `x`, `y`,`z`列的表。您遍历数组和索引`i`，存储在`event` `i`, `x_event.get(i)`, `y_event.get(i)`, 中`z_event.get(i)`。
2.  创建一个`event_array_lists`包含列的表`id`和`arraylist`的表。[序列化](http://docs.oracle.com/javase/tutorial/jndi/objects/serial.html)数组列表并将它们存储为 BLOB。
3.  将数组列表转换为[JSON](http://www.vogella.com/articles/AndroidJSON/article.html)并将它们作为字符串存储在与 2 非常相似的表中。

# ruby-on-rails - 为什么捆绑忽略“gem 'pg'”？

> ID：16132130
> 
> 赞同：5
> 
> 时间：2013-04-21T14:23:09.680
> 
> 标签：ruby-on-rails, ruby, gem, bundler, pg

**正在工作**

不知道发生了什么。在 linux 机器上构建 gemfile.lock 并将其移过来。缺少东西，运行捆绑安装，工作。

* * *

Bundle 忽略了我在 Gemfile 中包含的“pg”gem。通过安装 pg`gem install pg`工作正常，当我使用`gem list --local`.

宝石文件：

```
source 'http://rubygems.org'

gem 'rails' 
gem 'pg' 
```

`bundle install`（无 pg）：

```
Using rake (10.0.4)
Using i18n (0.6.1)
Using multi_json (1.7.2)
Using activesupport (3.2.13)
Using builder (3.0.4)
Using activemodel (3.2.13)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.5)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.2)
Using tilt (1.3.7)
Using sprockets (2.2.2)
Using actionpack (3.2.13)
Using mime-types (1.23)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.5.3)
Using actionmailer (3.2.13)
Using arel (3.0.2)
Using tzinfo (0.3.37)
Using activerecord (3.2.13)
Using activeresource (3.2.13)
Using json (1.7.7)
Using rack-ssl (1.3.3)
Using bundler (1.3.5)
Using rdoc (3.12.2)
Using thor (0.18.1)
Using railties (3.2.13)
Using rails (3.2.13)
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

`bundle show pg`：

```
Could not find gem 'pg'.
Did you mean pg? 
```

`gem list --local`（pg存在）：

```
*** LOCAL GEMS ***

actionmailer (3.2.13)
actionpack (3.2.13)
activemodel (3.2.13, 3.1.11)
activerecord (3.2.13)    
activeresource (3.2.13)
activesupport (3.2.13, 3.1.11)
arel (3.0.2)
bigdecimal (1.2.0)
builder (3.0.4)
bundler (1.3.5)
erubis (2.7.0)
hike (1.2.2)
i18n (0.6.4, 0.6.1)
io-console (0.4.2)
journey (1.0.4)
json (1.7.7)
mail (2.5.3)
mime-types (1.23)
minitest (4.3.2)
multi_json (1.7.2)
pg (0.15.1 x64-mingw32)
polyglot (0.3.3)
psych (2.0.0)
rack (1.4.5, 1.3.10)
rack-cache (1.2)
rack-mount (0.8.3)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.13)
railties (3.2.13)
rake (10.0.4, 0.9.6)
rdoc (4.0.0, 3.12.2)
rubygems-update (2.0.3)
sprockets (2.2.2, 2.0.4)
test-unit (2.0.0.0)
thor (0.18.1)
tilt (1.3.7)
treetop (1.4.12)
tzinfo (0.3.37) 
```

另外，如果我尝试运行`rails s`,`rake db:create`等，我会得到：

```
rake aborted!
Please install the postgresql adapter: `gem install activerecord-postgresql-adap
ter` (pg is not part of the bundle. Add it to Gemfile.)

Tasks: TOP => db:create
(See full trace by running task with --trace) 
```

使用：

```
Windows 7, 64-bit
Rails 3.2.13
ruby 2.0.0p0 (2013-02-24) [x64-mingw32]
Bundler version 1.3.5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:24:45.480

尝试删除您的“gemfile.lock”然后重新运行`bundle install`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:32:49.260

尝试删除`Gemfile.lock`并运行`bundle check`以查看当前安装的 gems 是否满足 Gemfile 中列出的依赖项。

# php - 如何从外部sql数据库中获取某个数据？

> ID：16132131
> 
> 赞同：0
> 
> 时间：2013-04-21T14:23:18.490
> 
> 标签：php, mysql, json

我想以最快的方式从外部数据库获取数据。我的问题是我可以进行查询并获取所有数据，然后使用 JSON 我能够获得我需要的东西。但是我很好奇是否有更快的解决方案，所以我检查了 php 中的所有数据，然后找到我需要的适当数据并将其仅返回到 JSON 而不是整个查询。当我需要一百万条记录时，第一个解决方案可能会很慢。

如果是 ID，这将是查找用户名的 .php 代码。如何将该 ID 提供给 .php 脚本？

```
$ID = $_GET['ID'];
try {
    $stmt = $conn->prepare("SELECT USERNAME FROM APPUSERS WHERE ID=?");
    $stmt -> execute(array($id));
        while($row = $stmt->fetchAll(PDO::FETCH_ASSOC)) {
            $userdata[] = $row;
        }
    $response = '1';
    } catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
    $response = '0';
}

print(json_encode($userdata)); 
```

如果我删除 sql 代码的 WHERE 部分，我可以使用以下代码获取表中的所有记录：

```
try{
      HttpClient httpclient = new DefaultHttpClient();
      HttpPost httppost = new HttpPost("http://www.mywebpage.com/query.php");
      HttpResponse response = httpclient.execute(httppost);
      HttpEntity entity = response.getEntity();
      is = entity.getContent();
}catch(Exception e){
Log.e("log_tag", "Error in http connection "+e.toString());
}
//convert response to string
try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
               sb.append(line + "\n");
        }
        is.close();

        Bresult=sb.toString();
}catch(Exception e){
   Log.e("log_tag", "Error converting result "+e.toString());
} 
```

然后从这个 Bresult 变量我得到适当的记录，例如

```
JSONArray jArray = new JSONArray(ViewPagerActivity.Bresult);
for(int i=0;i<jArray.length();i++){
  JSONObject jsonObject = innerJsonArray.getJSONObject(j);
  if (jsonObject.getString("ID").equals("12345") {
      String user = jsonObject.getString("USERNAME");
  }
} 
```

所以我浏览了所有记录，然后检索我需要的用户名。但是，如果我只能检索我需要的用户名而不是所有记录，我认为这可以更快。问题是，我该怎么做？

先感谢您！！

# ios - NSJSONSerialization 适用于 IOS 6 但不适用于 IOS 5.0

> ID：16132134
> 
> 赞同：1
> 
> 时间：2013-04-21T14:23:47.290
> 
> 标签：ios, objective-c, ios5, ios6, nsjsonserialization

我正在努力将 iOS 5.1 兼容性恢复到我发布的当前需要 6.0 的应用程序。

此代码在 6.0 下完美运行，但在 5.1 下运行时，解析返回 null 对象，并在解析完全相同的 JSON 结果时返回错误。

```
NSData *responseData = [request responseData];
NSError *jsonError;
NSDictionary *responseDict = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&jsonError];

if ((responseData == nil) || (responseDict == nil)) {
   // I only get here when running on 5.1            
} 
```

我尝试弱链接 Foundation 框架。`jsonError`是_

> 错误域 = NSCocoaErrorDomain 代码 = 3840“操作无法完成。（可可错误 3840。）”（字符 8 周围对象的重复键。） UserInfo = 0x11d58530 {NSDebugDescription =字符 8 周围对象的重复键。}

我已经验证了我的 JSON，并且在字符 8 处只有一个对象类型实例，字符 8 只是一个冒号：

```
{"site":{ 
```

# android - 自 API 16 起，Android AvoidXfermode 已被弃用，是否有替代品？

> ID：16132141
> 
> 赞同：5
> 
> 时间：2013-04-21T14:24:13.580
> 
> 标签：android, graphics, android-canvas

我需要在另一个位图上绘制位图，但我只想在具有特定颜色的像素上绘制（在这种情况下是透明的）。我知道`AvoidXfermode`可以这样做，但自 API 16 起已弃用。现在有不同的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T06:27:41.563

我在我的私人收件箱中收到了正确的答案，所以我将在这里分享：没有替代方法。 `AvoidXfermode`已弃用，因为它在硬件中不受支持。但是，在位图上绘图时仍然可以使用它。

当然，另一种方法是逐个像素，并用特定颜色替换那些，但这不是我想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:06:48.183

在这里，假设位图大小相同。

```
var image1, image2;

var newCanvas = document.createElement('canvas');
var newContext = newCanvas.getContext('2d');
newCanvas.width = image1.width;
newCanvas.height = image1.height;
newContext.drawImage(image1, 0, 0);
var imgData = newContext.getImageData(0,0,newCanvas.width, newCanvas.height);
newContext.drawImage(image2, 0, 0);
var imgData2 = newContext.getImageData(0,0,newCanvas.width, newCanvas.height);

for (var i = 0; i < imgData.data.length; i += 4) {
    if( imgData.data[i] < 20        //If Red is less than 20
        && imgData.data[i+1] == 40    //If Green is 40
        && imgData.data[i+2] >= 240   //If Blue is over 240
        && imgData.data[i+3] >= 240) //If Alpha is over 240
    {
        imgData.data[i] = imgData2.data[i];
        imgData.data[i+1] = imgData2.data[i+1];
        imgData.data[i+2] = imgData2.data[i+2];
        imgData.data[i+3] = imgData2.data[i+3];
    }
}
imgData2 = null;
newContext.putImageData(imgData, 0, 0); 
```

如果任何像素符合这些参数，那应该只是照原样复制它。

最终结果要么是 imgData，一个可以使用 putImageData 绘制的字节数据数组，要么是一个画布（基本上可以用作新图像）

# actionscript-3 - 在 AS3 运行时使用快速内存 操作码发出一个类？

> ID：16132146
> 
> 赞同：1
> 
> 时间：2013-04-21T14:24:38.637
> 
> 标签：actionscript-3, flash, memory

下面列出了几个库，它们允许您通过发出必要的 ABC（Actionscript 字节代码）标签并将生成的 IL 作为 SWF 加载到 Flash Player 中来动态生成 ActionScript 类。

这些库中哪个是小而快的库，并且支持使用方法/变量生成类，并支持最新的“快速内存”操作码？是的，我已经在做自己的研究，但只是询问是否有人已经有这方面的经验。

*   [As3-commons-bytecode](http://www.as3commons.org/as3-commons-bytecode/index.html) - 目前最活跃的项目
*   [Loom](https://code.google.com/p/loom-as3/) - 最古老的项目，现在由作者关闭 - 继续 as3-commons
*   [FLEmit](https://code.google.com/p/flemit/) - ??
*   [弗洛西](https://code.google.com/p/floxy/)- ??
*   [阿斯莫克](http://asmock.sourceforge.net/)- ??

# java - 在 spring 中过滤属性和占位符

> ID：16132150
> 
> 赞同：1
> 
> 时间：2013-04-21T14:24:55.657
> 
> 标签：java, spring, properties, configuration, placeholder

如何避免重复使用弹簧占位符？通常我会加载所有属性，然后一个一个地使用它们，将所有内容重复 3 次（属性文件、来自 xml 的属性名称、占位符名称）：

```
<context:property-placeholder location="classpath:/spring/application.properties,
                                        classpath:/spring/${env}.properties" />

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="properties">
            <value>
                user = ${db.user}
                password = ${db.passwd}
            </value>
        </property>
</bean> 
```

我可以：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="properties" ref="allProperties"/>
</bean> 
```

但是，这不是一个好的解决方案，因为：

*   如果我有很多组件，那么可能会有一些属性冲突
*   我不想传递密码
*   我也不想为每个组件拆分我的配置文件。我想每个环境有 1 个全局文件和 1 个文件。拆分属性会使维护变得困难

所以问题是：有什么可以让我选择应该传递的属性（按前缀）？就像是：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="properties">
            <bean class="...PropertiesFilter">
                <property name="prefix" value="c3p0"/>
                <property name="src" ref="allProperties"/>
            </bean>
        </property>
</bean> 
```

我知道，写起来并不难，但也许 spring 已经有了类似的东西（语法更好）。

# bash - 使用管道读取文件、运行脚本并写入同一个文件

> ID：16132154
> 
> 赞同：5
> 
> 时间：2013-04-21T14:25:14.497
> 
> 标签：bash

我需要编写一个脚本，其中一行获取一个文件，并在每行末尾的同一文件上打印句子中的单词数，只有当单词“word”出现在它上面时。我可以使用另一个可以做任何我想做的脚本。我的问题是，在我运行脚本后，文件为空，即我发送给脚本的文件。

这是单行脚本：

```
#!/bin/bash
cat $1 | ./words_num word | cat $1 
```

### words_num

```
#!/bin/bash
while read line; do
    temp=`echo $line | grep $1 | wc -l`
    if (($temp==1)); then
        word_cnt=`echo $line | wc -w`
        echo "$line $word_cnt" 
    else 
        echo "$line"
    fi  
done 
```

例如，之前的文件是：

```
bla bla blaa word
words blaa
bla bla 
```

文件后：

```
bla bla blaa word 4
words blaa 2
bla bla 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-23T17:38:50.460

单线：

```
cat $1 | ./words_num word | cat $1 
```

很奇特。它大约相当于：

```
cat $1 | ./words_num word >/dev/null; cat $1 
```

这不太可能是预期的结果。它也是 UUOC（无用使用`cat`）奖的候选者。

如果打算用修改后的版本覆盖原始文件，那么您可能应该写：

```
./words_num word < $1 > tmp.$$; mv tmp.$$ $1 
```

如果您还想在屏幕上查看结果，那么：

```
./words_num word < $1 | tee tmp.$$; mv tmp.$$ $1 
```

如果中断，这两者都会留下一个临时文件。您可以通过以下方式避免这种情况：

```
#!/bin/bash
trap "rm -f tmp.$$; exit 1" 0 1 2 3 13 15
./words_num word < $1 | tee tmp.$$
mv tmp.$$ $1
trap 0 
```

陷阱设置信号处理程序（EXIT、HUP、INT、QUIT、PIPE、TERM）并删除临时文件（如果存在）并以失败状态退出。最后`trap 0`的 取消退出陷阱，因此命令成功退出。

至于`words_num`脚本，这似乎需要`awk`而不是 shell：

```
#!/bin/bash
[ $# == 0 ] && { echo "Usage: $0 word [file ...]" >&2; exit 1; }
word=$1
shift
awk "/$word/"' { print $0, NF; next } { print }' "$@" 
```

如果您对`awk`脚本进行代码打高尔夫球，您可以减少这种情况，但我更喜欢澄清低于标准的代码。它查找包含该单词的行，打印该行以及该行中的字段数，然后移至下一行。如果该行不匹配，则简单地打印它。赋值和移位意味着`"$@"`包含所有其他参数`words_num`，并且`awk`将自动循环通过命名文件，或者如果没有命名文件则读取标准输入。

脚本应该检查给定的单词是否不包含任何斜杠，因为这会弄乱正则表达式（可以将出现的每个替换为`[/]`，一个只包含斜杠的字符类）。这种防弹级别留给感兴趣的用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:33:28.117

```
cat $1 | ./words_num word | tee $1 
```

# gdb - 使用 less 作为 gdb 寻呼机

> ID：16132163
> 
> 赞同：16
> 
> 时间：2013-04-21T14:25:48.203
> 
> 标签：gdb

我注意到在 GDB 中，当发出类似`info variables`的长输出命令时，输出一次显示一页，按下`enter`向下并`q`退出。

是否可以将默认寻呼机替换为另一个寻呼机，例如`less`，以便我可以上下导航、退出、搜索等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T15:26:35.087

> 是否可以用另一个替换默认寻呼机

否：GDB 不会调用外部程序来显示输出，它只是在每个屏幕满屏时*暂停*输出（您可以让它不暂停`set height 0`）。

除了运行 inside `emacs`，您还可以使用`screen`or `tmux`（学习它们通常会在很多其他情况下帮助您），或者让 GDB 记录输出（`set logging on`），然后使用您想要`gdb.txt`的任何内容进行搜索。`$PAGER`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T14:38:36.770

`gdb`在里面运行`emacs`，你应该能够使用 emacs 的分页命令。

1.  运行 emacs
2.  类型`M-x gdb`返回（M 代表元 - Mac 上的 alt 键或选项）
3.  Emacs 消息栏现在将显示消息： `Run gdb (like this): gdb`

更多信息可在此处获得：http: [//tedlab.mit.edu/~dr/gdbintro.html](http://tedlab.mit.edu/~dr/gdbintro.html)

高温高压

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-06T04:27:01.377

您可以将以下用户定义的命令放入~/.gdbinit，然后

```
% cat ~/.gdbinit
python import os
define less1
    python os.popen("less","w").write(gdb.execute("$arg0",to_string=True))
end

define less2
    python os.popen("less","w").write(gdb.execute("$arg0 $arg1",to_string=True))
end
...
% gdb
(gdb) less2 info var
...
(gdb) less1 disass
... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-11T22:27:02.287

Starting with version 9.1, GDB has a `pipe` command, so you can send a command's output to the pager of your choice. From the [documentation](https://sourceware.org/gdb/current/onlinedocs/gdb/Shell-Commands.html#index-pipe):

> pipe [*command*] | *shell_command*
> Executes *command* and sends its output to *shell_command*. Note that no space is needed around `|`. If no *command* is provided, the last command executed is repeated.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-05T16:52:45.067

这是一个有点旧的线程，但我认为值得添加。@yichun 在这里给出了一个非常好的想法，但为了更实用，它可以扩展到任意数量的参数：

```
define less
    python import os
    python os.popen("less","w").write(gdb.execute(' '.join(["$arg{0}".format(i) for i in range(0, argc)]), to_string=True))
end 
```

然后它还可以添加异常处理并等待进程终止以避免键盘故障，我们有这样的事情：

```
% cat ~/.gdbinit
define less

python argc = $argc
python
import os
f = None
try:
    f = os.popen("less","w")
    f.write(gdb.execute(' '.join(["$arg{0}".format(i) for i in range(0, argc)]), to_string=True))
except Exception as e:
    if f:
        f.write(str(e))
    else:
        print (str(e))
finally:
    if f:
        f.close()

end

end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-11T21:28:35.703

In **gdb 8.1.1** this code in `.gdbinit` adds the required functionality:

```
python
import os

class Less(gdb.Command):
    def __init__(self):
        super().__init__("less", gdb.COMMAND_USER, gdb.COMPLETE_COMMAND)

    def invoke(self, argstr, from_tty):

        with os.popen("less","w") as pipe:
            try:
                pipe.write(gdb.execute(argstr, to_string=True))
            except Exception as e:
                pipe.write(str(e))

Less()
end 
```

**Usage**

```
(gdb) less info breakpoints
(gdb) less backtrace 
```

**Information:** [Commands In Python](https://sourceware.org/gdb/current/onlinedocs/gdb/Commands-In-Python.html).

# wordpress - ContactForm 7 不发送邮件（即使他认为自己发送了）

> ID：16132167
> 
> 赞同：1
> 
> 时间：2013-04-21T14:26:20.430
> 
> 标签：wordpress, contact-form-7

我有一个使用 Contact Form 7 的 WordPress 网站。我对其进行了配置，为邮件和表单插入了我的模板，并尝试在我的网络服务器（在线，而不是本地）上运行它。问题是 - 邮件没有来。我完全不知道在哪里寻找这个问题的任何原因。我在另外两个站点上安装了 CF7，它们运行良好。会是什么？请注意，该`mail()`功能在我的服务器上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:51:58.350

ContactForm7 使用 Ajax 调用将发送邮件的操作。所以也许你得到任何 Javascript 错误？您可以使用 Firebug 或 Chrome 开发工具进行检查。您还必须在模板中包含 wp_head() 和 wp_footer()，因为 javascript 文件由 Wordpress 排队。此页面可以帮助您：[http ://contactform7.com/why-isnt-my-ajax-contact-form-working-correctly/](http://contactform7.com/why-isnt-my-ajax-contact-form-working-correctly/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:45:40.553

尝试使用不同的 SMTP 插件来强制 Wordpress 和 Contact Form 7 使用 SMTP 而不是 mail() 发送邮件，看看是否可以收到电子邮件。其中一些插件具有测试功能和调试输出来测试 SMTP 和 mail()，因此您可以弄清楚两者都发生了什么。请参阅[http://wordpress.org/extend/plugins/search.php?q=smtp](http://wordpress.org/extend/plugins/search.php?q=smtp)

还要查看您的错误日志。这是你自己的服务器吗？听起来像是一条错误的路径或一些 php 配置问题。使用[http://php.net/manual/en/function.phpinfo.php](http://php.net/manual/en/function.phpinfo.php)检查您的 php 配置。

# sql - 将列中的所有值选择为 SQLite 中的字符串？

> ID：16132169
> 
> 赞同：2
> 
> 时间：2013-04-21T14:26:26.367
> 
> 标签：sql, select, sqlite, system.data.sqlite

在 SQL Server 中，我可以在 Cursor 的帮助下执行此操作（循环遍历结果集中的每一行并构建我的字符串）。但是我不知道如何在 SQLite 中做同样的事情，这个任务不像所谓的 Pivoting ，据我所知，我们必须知道我们想要转向列的确切行。我的情况不同，我想将指定列的所有值选择为一个字符串（然后可以选择为 1 行的列），该列可以有各种值，具体取决于 SELECT 查询。这是它的外观示例：

```
A    |    B    
------------
1    |    0
8    |    1
3    |    2
...     .... 
```

我想将 A 列的所有值选择成这样的字符串“183...”（或“1,8,3,...”就可以了）。

这可以用作另一个 SELECT 中的列，我必须实现它，因为我需要将所有子信息（在 A 列的每一行上）显示为另一行中的逗号分隔列表。

我对此一无所知，它似乎需要一些过程语句（例如放置在一个过程中），但 SQLite 对我如何处理循环、变量声明、......我真的被卡住了。这种任务在数据库编程时很常见，我没有理由拒绝这样做。

请帮助，您的帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T14:32:17.790

如果您只是想将 A 列中的所有值放入一条记录中，请使用`GROUP_CONCAT`：

```
select group_concat(a, ',')
from yourtable 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!7/d96df/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:35:40.127

主要问题是您像应用程序程序员一样思考。SQL 为您做了很多事情。

```
SELECT * 
  FROM tableA
 WHERE A IN (SELECT A 
                  FROM tableB) 
```

无需求助于游标、存储过程和多个查询。

# html - iPad 3 加载智能手机图像

> ID：16132170
> 
> 赞同：0
> 
> 时间：2013-04-21T14:26:33.880
> 
> 标签：html, css, ipad

我正在使用以下媒体查询为智能手机加载视网膜图像，但是 iPad 3 也在加载这些图像，尽管 max-width 属性设置为 480px

`@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5), only screen and (min-device-pixel-ratio: 1.5) and (max-width: 480px) {`

然而，iPad 2 很好。

有谁知道我如何修改声明以便 iPad 3 忽略它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:29:44.843

试试 -webkit-min-device-pixel-ratio: 2 检查这个[Retina iPad Specific CSS](https://stackoverflow.com/questions/9780189/retina-ipad-specific-css)

# java - JSF 错误：类“java.lang.String”没有属性“lista”

> ID：16132175
> 
> 赞同：-1
> 
> 时间：2013-04-21T14:27:18.633
> 
> 标签：java, jsf, netbeans-7

我对 JSF 很陌生，我只是按照课程中的一本书的例子进行操作。当我在 Net Beans 中执行示例时，我收到错误：类“java.lang.String”没有属性“lista”。

我的豆类：

```
public class FuncionarioBean {

    private Funcionario dados;
    private FuncionarioDAO dao;
    private DataModel lista;

    public FuncionarioBean() {
        dados = new Funcionario();
        dao = new FuncionarioDAO();
    }

    public String inserir() {
        dados = new Funcionario();
        return "confirmarinserir";
    }

    public String executeInserir() {
        return dao.inserir(dados) ? "sucesso" : "erro";
    }

    public String excluir() {
        dados = dao.exibir(getId());
        return "confirmarexcluir";
    }

    public String executeExcluir() {
        return dao.excluir(dados) ? "sucesso" : "erro";
    }

    public String atualizar() {
        dados = dao.exibir(getId());
        return "confirmaratualizar";
    }

    public String executeAtualizar() {
        return dao.atualizar(dados) ? "sucesso" : "erro";
    }

    public DataModel getLista() {
        lista = new ListDataModel(dao.listar());
        return lista;
    }

        public void setLista(DataModel lista) {
                this.lista = lista;
        }

    public Funcionario getDados() {
            return dados;
        }
    public void setDados(Funcionario dados) {
            this.dados = dados;
        }

    public int getId() {
        FacesContext contexto = FacesContext.getCurrentInstance();
        HttpServletRequest req = (HttpServletRequest) contexto.getExternalContext().getRequest();
        return Integer.parseInt(req.getParameter("pid"));
    }

} 
```

面孔-config.xml

```
<faces-config version="2.1"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd">

    <managed-bean>
        <managed-bean-name>func</managed-bean-name>
        <maged-bean-class>
            controle.FuncionarioBean
        </maged-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean> 
```

索引.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>

<%@taglib prefix="f" uri="http://java.sun.com/jsf/core"%>
<%@taglib prefix="h" uri="http://java.sun.com/jsf/html"%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<f:view>
<html>
        <head>
            <f:loadBundle basename="util.configuracoes" var="conf" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <title><h:outputText value="#{conf.Titulo}" /></title>
            <link rel="stylesheet" type="text/css" href="estilo.css">
        </head>
<body>
   <h1><h:outputText value="#{conf.Titulo}" /></h1>
<h:form>
<h:dataTable id="TabFuncionarios" value="#{func.lista}" var="lista" headerClass="cabecalho" rowClasses="linhaPar,linhaImpar">
    <h:column>
        <f:facet name="header">
        <h:outputText value="#{conf.Id}" />
        </f:facet>
        <h:outputText value="#{lista.id}" />
    </h:column>
    <h:column>
        <f:facet name="header">
        <h:outputText value="#{conf.Nome}" />
        </f:facet>
        <h:outputText value="#{lista.nome}" />  
    </h:column>
    <h:column>
        <f:facet name="header">
        <h:outputText value="#{conf.Endereco}" />
        </f:facet>
        <h:outputText value="#{lista.endereco}" />
    </h:column>
    <h:column>
        <f:facet name="header">
        <h:outputText value="#{conf.Bairro}" />
        </f:facet>
        <h:outputText value="#{lista.bairro}" />
    </h:column>
    <h:column>
        <f:facet name="header">
        <h:outputText value="#{conf.Cidade}" />
        </f:facet>
        <h:outputText value="#{lista.cidade}" />
    </h:column>
    <h:column>
        <f:facet name="header">
        <h:outputText value="#{conf.Cep}" />
        </f:facet>
        <h:outputText value="#{lista.cep}" />
    </h:column>
    <h:column>
        <f:facet name="header">
        <h:outputText value="#{conf.Salario}" />
        </f:facet>
        <h:outputText value="#{lista.salario}">
                    <f:convertNumber pattern="R$ ###,###,00" />
        </h:outputText>
    </h:column>
        <h:column>
        <h:commandLink action="#{func.atualizar}" value="atualizar">
            <f:param name="pid" value="#{lista.id}" />
        </h:commandLink>
    </h:column>
    <h:column>
        <h:commandLink action="#{func.excluir}" value="excluir">
            <f:param name="pid" value="#{lista.id}" />
        </h:commandLink>
    </h:column>
</h:dataTable>
<h:commandLink action="#{func.inserir}" value="Inserir Funcionário" />
</h:form>
</body>
</html>
</f:view> 
```

堆栈跟踪：

```
javax.el.PropertyNotFoundException: The class 'java.lang.String' does not have the property 'lista'.
    at javax.el.BeanELResolver.getBeanProperty(BeanELResolver.java:722)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:351)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIData.getValue(UIData.java:731)
    at javax.faces.component.UIData.getDataModel(UIData.java:1798)
    at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
    at javax.faces.component.UIData.setRowIndex(UIData.java:473)
    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.JspViewHandlingStrategy.doRenderView(JspViewHandlingStrategy.java:432)
    at com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:233)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662) 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:55:40.630

您应该使用其他名称而`var`不是`var=lista`in`datatable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:15:14.437

我修复了错误：“JSF 错误：类'java.lang.String' 没有属性'lista'”创建一个新项目并将首选语言设置为jsp 而不是facelets。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T10:59:49.057

在对 java 代码和 .xhtml 页面中的一些行进行注释后，我遇到了同样的问题。但是，如果我取消注释，所有问题都会消失。我也尝试清理浏览器缓存。解决方案似乎是取消注释或删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-17T21:51:51.083

一个解决方案可能是您的模型类需要公开：

```
public class Car implements Serializable{ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-07T12:59:30.350

我在使用`<c:forTokens>`而不是`<c:forEach>`. 使用 forEach 进行对象和属性访问。

# c++ - std::stoi 的问题，不适用于 MinGW GCC 4.7.2

> ID：16132176
> 
> 赞同：8
> 
> 时间：2013-04-21T14:27:18.693
> 
> 标签：c++, mingw

```
#include <iostream>
#include <string>

int main()
{
    std::string test = "45";
    int myint = stoi(test);
    std::cout << myint << '\n';
} 
```

我在运行 MinGW GCC 4.7.2 的计算机上尝试了此代码。它给了我这个错误：

![在此处输入图像描述](https://i.stack.imgur.com/mBWff.png)

我做错了什么，我从[cppreference](http://en.cppreference.com/w/cpp/string/basic_string/stol)得到这个。它的代码完全相同。[它与此处](https://stackoverflow.com/questions/8542221/stdstoi-doesnt-exist-in-g-4-6-1-on-mingw)描述的错误不同。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T14:39:44.830

看来您的 MinGW 需要一个补丁：[在 MinGW 中启用字符串转换功能](http://tehsausage.com/mingw-to-string)

> 此补丁在 std 命名空间中启用以下 C++11 函数和模板列表：
> 
> stoi, stol, stoul, 斯托尔, stof, stod, stold, to_string, to_wstring

在上面的链接中，有一个`.zip`文件，下载它并

*   将 zip 文件中的 include 目录中的 wchar.h 和 stdio.h 复制到以下目录（覆盖）：C:\mingw\include（将 C:\mingw\ 替换为适当的目录）
*   将 os_defines.h 复制到以下目录（覆盖）：C:\mingw\lib\gcc\mingw32\4.7.0\include\c++\mingw32\bits（将 C:\mingw\ 替换为适当的目录）（替换 4.7\. 0 带有正确的版本号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-02T00:19:37.100

另一种解决方案是使用开箱即用[的 MinGW-w64 。](http://mingw-w64.org/doku.php)这是 MinGW 的一个分支，可以生成 32 位和 64 位版本。

# android - Android 使用可绘制文件夹

> ID：16132177
> 
> 赞同：0
> 
> 时间：2013-04-21T14:27:19.633
> 
> 标签：android, loading, drawable, directory, resolution-independence

简单的问题。如果任何文件夹为空，android 如何处理可绘制文件夹？可以说我只有在文件夹“drawable-hdpi”中有图像。当我在具有更高dpi“drawable-xhdpi”的模拟器上启动应用程序时，它会从“drawable-hdpi”加载图像（当然尺寸不好）。此外，当我在具有较低 dpi“drawable-mdpi”的设备上启动应用程序时，它会从“drawable-hdpi”加载图像。

我的问题是 - 这是否意味着如果当前设备 dpi 不存在图像，android 系统从其他文件夹获取图像，它不为空？直到今天我还想，当当前 dpi 中的图像不存在时，应用程序不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:30:42.400

它采用近 dpi，并通过目标 dpi 和文件夹 dpi 之间的 dpi 差异来放大或缩小图像。如果在“drawale”文件夹中（无 dpi），则不会发生缩放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:33:43.150

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

注意：低密度 (ldpi) 资源并不总是必需的。当您提供 hdpi 资产时，系统会将它们缩小一半以适合 ldpi 屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:29:27.380

有用。它首先检查当前 dpi 文件夹中的资源。如果未找到，则使用其他可用资源

# css - 带有边距的导航栏中的 CSS hr 标签

> ID：16132180
> 
> 赞同：2
> 
> 时间：2013-04-21T14:27:46.887
> 
> 标签：css, html

如何在导航栏上方和下方添加规则？我尝试了一个 HR 标签，但这似乎在导航栏周围腾出了很多空间。这是我的 html，这里是我想要做的例子。

[http://matthewtbrown.com/jeffandcricketquilt/](http://matthewtbrown.com/jeffandcricketquilt/)

[http://matthewtbrown.com/jeffandcricketquilt/rule.png](http://matthewtbrown.com/jeffandcricketquilt/rule.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:48:56.323

If you do not want to change your html at all, you can add this to your css

```
nav ul:before {
    border-bottom: 1px solid white;
    border-top: 1px solid white;
    bottom: 5px;
    content: "";
    left: 5px;
    position: absolute;
    right: 5px;
    top: 5px;
    z-index:0;
}
nav ul {
    overflow: auto;
    position: relative;
    background-color:#000;
}
nav ul li{
    position:relative;
    z-index:10;
} 
```

and remove the background-color from the `li` elements (*since i added it to the `ul`*)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:36:03.157

使用边框和填充：

```
* {
    margin: 0;
    padding: 0;
}

nav {
    text-align: center;
    background: black;
    color: white;
    padding: .2em;
}

ul {
    padding: .5em;
    border: 1px solid white;
    border-left: none;
    border-right: none;
}

nav li {
    display: inline;
    list-style-type: none;
    padding: 0 2em;
} 
```

[演示](http://jsfiddle.net/bfqLj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:38:26.847

我会为 ul 标签应用一个大纲，所以 css 应该是：

```
nav ul{
  outline-color: white;
  outline-style: solid;
  outline-width: 2px;
  outline-offset: -7px;
  height: 60px;
  width: 848px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T14:38:34.800

最简单的方法是为 nav 元素添加一个内边距，4px 适合 li 元素的宽度。还添加浮动：左

现在将border-top 和border-bottom 添加到ul 元素。添加 float: left here 为好。这将切换您的 li 元素，因为它们具有固定的宽度。将它们的宽度降低到 210px，应该没问题。

CSS 添加到您的代码中：

```
nav {
  padding: 4px
  float: left;
}

nav ul {
  border-top: 1px solid white;
  border-bottom: 1px solid white;
  float: left;
}

nav li {
  width: 210px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T14:33:09.103

尝试将此 CSS 应用于导航栏：

```
border-top: 1px solid #eee
border-bottom: 1px solid #eee 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-12T10:54:04.880

如果`line-height`与您可以通过更改列表元素 `font-size`来操纵边框距离相同，这是我的示例：`padding-bottom`

```
.headerSection ul.navigation li  a {
    font-size: 12px;
    line-height: 12px;
    text-decoration: none ;
    padding-bottom: 10px; 
    border-bottom-color: transparent;
    border-bottom-width: 5px;
    border-bottom-style: solid;
} 

.headerSection ul.navigation li a:hover {
    border-bottom-color: #e8bf5d;
} 
```

# android - Android CustomListView item higlhight on click

> ID：16132181
> 
> 赞同：0
> 
> 时间：2013-04-21T14:28:06.790
> 
> 标签：android, listview, click, highlight

我想突出显示单击自定义列表视图的项目。我尝试了不同的选项，但没有一个有效。有人可以告诉我有什么问题吗？

我的自定义列表视图`com.foo.ViewEditListView extends ListView implements android.widget.AdapterView.OnItemLongClickListener`

list_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:orientation="vertical"
     >

    <TextView
        android:id="@+id/textView_list_info"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        >
    </TextView>

     <EditText
         android:id="@+id/searchQueryText"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_gravity="left"
         android:drawableRight="@drawable/search"
         android:hint="Search Expenses by Amount"        
         android:textColorHint="#5e8e19"
         android:inputType="numberSigned|numberDecimal"
         style="@android:style/TextAppearance.Small"         
          >

        </EditText>

     <com.foo.ViewEditListView
        android:id="@+id/viewExpenseListView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:background="@/drawable/list_selector_bg" //doesn't work
         />

</LinearLayout>

list_row.xml 

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@/drawable/list_selector_bg" //doesn't work
    >

 <RelativeLayout
     android:layout_width="match_parent"
     android:layout_height="match_parent"

     >

  <TextView
        android:id="@+id/v_row_field1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:textSize="14sp"
        android:textStyle="bold"
        android:textColor="#C11B17"
        android:layout_alignParentLeft="true"
        />

    <TextView
        android:id="@+id/v_row_field2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:textStyle="bold"
        android:layout_marginRight="2dp" />

  </RelativeLayout>  

</LinearLayout>

list_selector_bg.xml

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

<item android:state_pressed="true"
    android:drawable="@android:drawable/list_selector_background" />      

</selector> 
```

我也尝试在 Activity 中设置选择器，但它们都没有工作。现在，我一无所知。有人可以在这里帮助我吗？

如果我将 android:background="@/drawable/list_selector_bg" 放入 RelativeLayout，它只会突出显示该部分。但我希望突出显示整个布局。

谢谢CP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:33:55.043

将自定义可绘制设置为布局的背景。根据您的需要修改以下内容。按下时，您将有不同的背景，释放时将返回默认状态。

在你的 list_row.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_alignParentBottom="true"
android:background="@drawable/listbkg" // set backcground
android:orientation="vertical"
 >
....
</LinearLayout> 
```

可绘制文件夹中的 listbkg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" 
    android:drawable="@drawable/pressed" /> //pressed state
<item  android:state_focused="false" 
    android:drawable="@drawable/normal" /> // normal state
</selector> 
```

可绘制文件夹中的pressed.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FF1A47"/>     //background color 
<stroke android:width="3dp"          // border color
        android:color="#0FECFF"/>
<padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
<corners android:bottomRightRadius="7dp"  //for rounded corners    
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
</shape> 
```

可绘制文件夹中的 normal.xml

```
 <?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FFFFFF"/>    //  change olor
<stroke android:width="3dp"   // for border color
        android:color="#0FECFF" />

<padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
<corners android:bottomRightRadius="7dp"// for rounded corners
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
</shape> 
```

编辑：

您还可以包括渐变，因为您可以在快照中看到相同的效果。

在自定义适配器的 getView() 中

```
 convertView =mInflater.inflate(R.layout.list_row, parent,false);
     // inflating custom layout 
```

然后在 list_row.xml 中设置根布局的背景。

结果快照

按下时，它突出显示布局，释放时将恢复正常状态。

![在此处输入图像描述](https://i.stack.imgur.com/1jkz3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:24:58.403

1）如果您想突出显示选定的项目，您可以使用您的 CustomAdapter 来处理它。但这不是很好的方法:)

2）我认为，最好的方法是为您的视图使用常见的 Android 实现 Checkable 接口（例如）：

```
public class CheckableFrameLayout extends FrameLayout implements Checkable {
    private boolean mChecked;

    public CheckableFrameLayout(Context context) {
        super(context);
    }

    public CheckableFrameLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setChecked(boolean checked) {
        mChecked = checked;
        setBackgroundDrawable(checked ? new ColorDrawable(0xff0000a0) : null);
    }

    public boolean isChecked() {
        return mChecked;
    }

    public void toggle() {
        setChecked(!mChecked);
    }
} 
```

或者

3) 使用[CheckedTextView](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/CheckedTextView.java)

您可以在名为 ApiDemos (ListView with multichoice)的[Android 示例中找到示例。](http://developer.android.com/tools/samples/index.html)

**更新：** 不要忘记您`ListView`必须拥有[ChoiceMode](http://developer.android.com/reference/android/widget/AbsListView.html#getChoiceMode%28%29)！= [ListView.CHOICE_MODE_NONE](http://developer.android.com/reference/android/widget/AbsListView.html#CHOICE_MODE_NONE)

放入`CheckableFrameLayout`您的包中并像这样重写您的`list_row.xml`：

```
<com.foo.CheckableFrameLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/list_selector_bg"
    >

 <RelativeLayout
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     >

  <TextView
        android:id="@+id/v_row_field1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:textSize="14sp"
        android:textStyle="bold"
        android:textColor="#C11B17"
        android:layout_alignParentLeft="true"
        />

    <TextView
        android:id="@+id/v_row_field2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:textStyle="bold"
        android:layout_marginRight="2dp" />

  </RelativeLayout>  
</com.foo.CheckableFrameLayout> 
```

如果您想`CheckableFrameLayout`从 statelist 获取您的状态（将其设置为背景），那么您需要覆盖您的`list_selector_bg.xml`：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_checked="true" android:drawable="@android:drawable/list_selector_background" />
</selector> 
```

并重写`CheckableFrameLayout`以使用它。我没有匆忙正确地完成它（我不知道为什么它只在第二次点击后才正确更改突出显示）。但是您可以使用此代码并对其进行改进（也许使用[CheckedTextView](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/CheckedTextView.java)的代码可以帮助您）：

```
public class CheckableFrameLayout extends FrameLayout implements Checkable {
    private static final int[] CHECKED_STATE_SET = {
        android.R.attr.state_checked
    };

    private boolean mChecked;

    public CheckableFrameLayout(Context context) {
        super(context);
    }

    public CheckableFrameLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (isChecked()) {
            mergeDrawableStates(drawableState, CHECKED_STATE_SET);
        }
        return drawableState;
    }

    @Override
    public void setChecked(boolean checked) {
        mChecked = checked;
        // setBackgroundDrawable(checked ? new ColorDrawable(0xff0000a0) : null);
    }

    @Override
    public boolean isChecked() {
        return mChecked;
    }

    @Override
    public void toggle() {
        setChecked(!mChecked);
    }
} 
```

# java - RESTful Web 服务中复合对象的 URI

> ID：16132183
> 
> 赞同：4
> 
> 时间：2013-04-21T14:28:23.213
> 
> 标签：java, spring, rest, jakarta-ee, uri

我已经创建了路径：

```
POST /books/4/chapters 
```

`Chapter`实体是组合的一部分`Book`。没有书就不可能存在于系统中。现在通过发布到上面的 URI 创建章节后，我是否应该为答案资源创建另一组 URI 以更新和获取特定章节？

`GET /books/4/chapters/6`还是`GET /chapters/6`？

> 请记住，一旦您拥有一个级别的主键，您通常不需要包含上述级别，因为您已经获得了您的特定对象。换句话说，你不应该需要太多比我们上面的 /resource/identifier/resource 更深的 URL 的情况。

*来自 apigee Web API 设计*

这`GET /chapters/6`将更符合文章所说的，但这也意味着您的对象不再在其父级的范围内（因为它是类 Book 的复合对象的一部分）。但是我觉得这更好，因为章节可能再次是其他对象的组合，这意味着您会获得长嵌套的 URI

`GET /books/4/chapters/5/paragrahps/5`如果一切都应该在父母的范围内。

这样做的首选方法是什么

**编辑**

经过更多思考之后，最好有类似`/books/4/chapters/9`等的URI，因为您在代码中没有存储库等来检索没有父级的特定反馈，因为它是复合的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:05:59.330

我会做的绝对是你提到的方式。例如 ：

```
/books/4/chapters -- GET : Retrieve full list of chapters of the book
/books/4/chapters/9 -- GET : Retrieve the 9th chapter of book 4\. 
```

重要的关键字是*of*。这是一本书的一章，没有它的书就完全没有关系。只是做`/chapters/9`的很不清楚。您将它视为一个完整的实体，而它实际上是一本书的一个子集。

使用上面说明的方式，您将拥有非常清晰的 URI。您正在检索作为另一个子资源的特定资源（第 9 章）（因此，您必须提及“超级”资源）。

我真的建议你看一下Symfony 团队成员 David Zülke 的*[精彩演讲](http://www.youtube.com/watch?feature=player_embedded&v=NEWTPFzt2-E)*。这是关于 REST 的与语言无关的演示文稿。更准确地说，它讨论了从 16 分钟到 30 分钟的 URI，但整个演示文稿都很棒，值得一看。

* * *

### 关于*apigee*演示文稿的说明

我今天看过了，虽然我同意他们的观点，但在大多数情况下。我在这里看到一件事。虽然能够通过以下方式检索章节可能很棒

```
/chapter/{its id} -- GET 
```

问题是，在某些情况下，您想要一本书的***第 9*章**，而不一定要检索**第*238723***章（不清楚是否是第 9 章）。在这种情况下，通过执行以下操作来检索它更有意义：

```
/books/4/chapters/9 -- GET 
```

# java - 使用 maven 创建 .war 文件，如何使用我的生产资源？

> ID：16132184
> 
> 赞同：0
> 
> 时间：2013-04-21T14:28:25.900
> 
> 标签：java, spring, maven, spring-mvc

我用它来构建我的 spring mvc 应用程序：

```
mvn clean package 
```

我使用 Maven 战争插件来创建一个战争文件，但我面临的问题是，在我的资源文件夹中，我有我的 .properties 文件的开发版本，用于 log4j 等。

当我推动生产并运行时：

```
java -jar ... 
```

它分解了 war 文件，然后我可以使用我的生产设置修改 .properties 文件，但我显然想在我的 maven 构建期间执行此操作以进行生产。

有没有办法告诉 maven 这是一个生产版本，所以从其他地方获取这些文件？在开发过程中，继续做现在正在做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:41:40.097

用户 Maven 配置文件。Maven 配置文件可帮助您为不同的配置文件指定不同的属性。所以你可以有两个配置文件——开发和生产。

像这样的东西-

```
 <profiles>
  <profile>
    <id>development</id>
    <!-- we'll properties here... -->
  </profile>
  <profile>
    <id>production</id>
    <!-- ...and here -->
  </profile>
</profiles> 
```

像这个例子 -

```
<profile>
  <id>development</id>
  <properties>
    <db.driverClass>oracle.jdbc.driver.OracleDriver</db.driverClass>
    <db.connectionURL>jdbc:oracle:thin:@127.0.0.1:1521:XE</db.connectionURL>
  </properties>
</profile>
<profile>
  <id>production</id>
  <properties>
    <db.driverClass>oracle.jdbc.driver.OracleDriver</db.driverClass>
    <db.connectionURL>jdbc:oracle:thin:@134.0.0.1:3124:XE</db.connectionURL>
  </properties>
</profile> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:46:26.200

这里有几个选项。第一个（正如其他人也提到的）是使用 Maven 配置文件。而不是拥有多个版本的属性文件，您将拥有以下内容：

```
mypropsfile.properties
-----------------------
prop1=${prop1.val}
prop2=${prop2.val} 
```

然后在您的配置文件中，您可以定义这些属性的值（确保您启用了资源过滤以使其正常工作。请参阅示例[http://www.manydesigns.com/en/portofino/portofino3/tutorials/using-maven-配置文件和资源过滤](http://www.manydesigns.com/en/portofino/portofino3/tutorials/using-maven-profiles-and-resource-filtering)）。

您还可以让您的属性文件在其中包含生产值，但能够在开发中覆盖这些文件。[弹簧配置文件](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)对此很有帮助。例如，在开发模式下，您可以查找名为 的属性文件`<user-home>/mypropertiesoverride.properties`，该文件可用于用开发特定的属性覆盖任何生产值属性。

我更喜欢这里的第二种方法，你有一个默认属性文件，然后你可以覆盖选择属性。

# sql-server - 指定的用户组 SQLServerMSSQLUSer 不存在

> ID：16132186
> 
> 赞同：1
> 
> 时间：2013-04-21T14:28:31.063
> 
> 标签：sql-server

![在此处输入图像描述](https://i.stack.imgur.com/1rhVK.jpg)

我在安装 SQL Server 2008 Standard 时遇到问题，在安装过程中会弹出一条错误消息

> 指定的用户组 SQLServerMSSQLUSer 不存在

我试图在卸载 SQL Server 2008 Express 版本后将它安装在 Windows 2003 服务器 sp2 上。

请帮我保存这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:46:30.330

`SQLServerMSSQLUser`是 SQL Server 为处理权限而创建的标准组之一。

如果我不得不猜测您不是机器上的管理员并且没有创建组的权限。

这是我发现的几个描述类似问题的链接。

[http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/77efd493-ad01-48cf-a804-a1babc90e975/](http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/77efd493-ad01-48cf-a804-a1babc90e975/)

[http://www.sqlservercentral.com/Forums/Topic1207218-391-1.aspx#bm1207251](http://www.sqlservercentral.com/Forums/Topic1207218-391-1.aspx#bm1207251)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:58:36.167

如果您尝试升级快捷版，我认为这与安装快捷版期间使用的原始安全组有关，您的系统上不存在孤独者。

如果当前安装的 SQL Server Express 版本功能，请尝试退出安装程序，启动管理控制台，并在安全选项卡中查找该组或某些“未链接”的 ADO 对象。

可能就像删除这个有问题的项目然后尝试重新安装一样简单。

# php - 登录后用户未重定向到 PHP 中的特定页面

> ID：16132190
> 
> 赞同：3
> 
> 时间：2013-04-21T14:29:09.693
> 
> 标签：php, sql

用户登录到数据库后，他应该被重定向到 index.php，但我得到的只是警告消息：“无法修改标头信息 - 标头已发送（输出开始于...”

这是我的输入表单：

```
<form action="login.php" method="post">
<div id="header"><h2 class="sansserif">Login</h2></div>
<table>

    <tr>
        <td>Enter Username:</td>
        <td> <input type="text" name="username" size="20"></td>
    </tr>

    <tr>
        <td>Enter Password:</td>
        <td><input type="password" name="password" size="20"></td>
    </tr>
    <tr>
         <td><input type="submit" value="Log In"></td>
         <td><a href="signup.html">Sign Up</a></td>
   </tr>
 </table>
</form> 
```

这是我的代码：

```
<?php 
include("configuration.php"); 
$username = $_POST["username"];
$password = $_POST["password"];
$match = "select id from $table where username = '".$_POST['username']."'and password =         '".$_POST['password']."';"; 
$qry = mysql_query($match);
$num_rows = mysql_num_rows($qry); 
if ($num_rows <= 0) { 
echo "Sorry, there is no username $username with the specified password.";
echo "Try again";
exit; 
} else {
$_SESSION['user']= $_POST["username"];
header("Location:index.php");
}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:19:31.790

首先尝试评论 header() 函数检查浏览器上是否有任何输出。如果没有检查您的 configuration.php，则可能正在回显或打印某些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:32:34.447

检查您的 PHP 标记前后是否没有空格。我可以在开头看到 3 个空格，这可能导致“无法修改标头信息”。

# php - PHP / Bash：使用密码从 OpenSSH 密钥创建 PPK

> ID：16132200
> 
> 赞同：0
> 
> 时间：2013-04-21T14:30:53.417
> 
> 标签：php, openssl, putty, private-key

我想创建一个为 ssh 身份验证创建密钥的 php 脚本。我从一个开始

```
exec("ssh-keygen -b 1024 -t dsa -N *pwd* -f *path-to-file* -q"); 
```

创建私钥和公钥对。到这里为止没问题；）

现在我必须将 OpenSSL-Key 转换为 PuTTY 的 ppk 格式（在 cmd 中，而不是在 GUI 中）。如果有人对如何管理它有任何想法，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:40:39.423

如果您使用的是 RSA 密钥，您可以这样做（需要[phpseclib](http://phpseclib.sourceforge.net/)）：

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->setPassword('password');
$rsa->loadKey('...');

//$rsa->setPassword(); // clear the password if there was one
echo $rsa->getPrivateKey(CRYPT_RSA_PRIVATE_FORMAT_PUTTY);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:17:16.030

您尚未指定运行的操作系统。在 *nix 上，您可以使用 PuTTYgen（来自 PuTTY）：

```
puttygen openssl-key -o mykey.ppk 
```

详情见：[https ://linux.die.net/man/1/puttygen](https://linux.die.net/man/1/puttygen)

在 Windows 上，PuTTYgen 只是一个 GUI 应用程序。虽然，您可以使用 WinSCP，但它具有[PuTTYgen 兼容的命令行界面](https://winscp.net/eng/docs/commandline#keygen)：

```
winscp.com /keygen openssl-key -o mykey.ppk 
```

# network-programming - hping [main] 没有这样的设备（hping2 windows 8）

> ID：16132201
> 
> 赞同：5
> 
> 时间：2013-04-21T14:30:53.723
> 
> 标签：network-programming

当我尝试对 localhost 进行简单的 syn flood 攻击时，只是为了了解 hping 的工作原理，我不断收到此错误：

[主要] 没有这样的设备

我不太明白它的含义或如何解决它。有什么帮助吗？

同样，我使用的是本机 win32 hping2。

# javascript - jQuery appendTo 在 $.post 下不起作用

> ID：16132208
> 
> 赞同：1
> 
> 时间：2013-04-21T14:31:36.323
> 
> 标签：javascript, jquery, jquery-post

```
// plays a card into table.
// this code works. rendered card is appending into the table.
    var playCard = function(card){
        var renderedCard = renderCard(card);
        $('#'+renderedCard.id).appendTo('#flop');

// but this one does not work.
var playCom = function(){
        $.post('/api/comPlay', function(data){
            var renderedCard = renderCard(data.card);
            $('#'+renderedCard.id).appendTo('#flop');
        });
    }; 
```

我检查返回的值`$.post`。`data.card`给出正确的值。我用我的`renderCard`函数创建了一个 div html。如您所见，该功能正常工作。但下`$.post`不了。

我被困住了。有什么特别的事情我必须知道`$.post`吗？

谢谢你。

**更新**：

```
var renderCard = function(card){
        var create = document.createElement('div');
        create.className = 'cardBig';
        create.id = card;
        return create;
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:38:50.520

您不需要“找到”新创建的 DOM 元素。

```
$(renderedCard).appendTo('#flop'); 
```

应该这样做。

此外，由于您仍然使用 jQuery：

```
$('#flop').append($('<div/>', {
  className: 'cardBig',
  id: data.card
})); 
```

将为您节省额外的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:39:31.070

在`renderCard()`方法中，您只是创建了一个新的 html 元素，但它没有呈现给 dom。

所以你的元素查找`$('#'+renderedCard.id)`将不起作用

```
$(renderedCard).appendTo('#flop'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:39:58.227

您是否尝试过先选择 id 元素，如下所示：

```
 $(renderedCard).appendTo( $('#flop')[0] ) 
```

# c - 在 C 中读取 char 的二维数组

> ID：16132212
> 
> 赞同：-1
> 
> 时间：2013-04-21T14:32:06.523
> 
> 标签：c, arrays, multidimensional-array, char

我正在尝试读取一个 M*N 字符数组，但是在打印数组时我得到了一些奇怪的字符。我无法弄清楚代码有什么问题，我在这里遗漏了什么？

```
int i,j,m,n;
char mat[10][10]
printf("N=");
scanf("%d", &n);
printf("M=");
scanf("%d", &m);
fflush(stdin);
// Read array elements, one by one
for (i=0; i<n; i++)
    for (j=0; j<m; j++)
    {
        printf("mat[%d][%d]=", i+1, j+1);
        scanf("%c", &mat[i][j]);
        fflush(stdin);
    }
// Print matrix
putchar('\n');
for (i=0; i<n; i++);
{
    for (j=0; j<m; j++)
        printf("%2c", mat[i][j]);
    putchar('\n');
} 
```

示例输入/输出：

```
N=2
M=2
mat[1][1]=1
mat[1][2]=A
mat[2][1]=2
mat[2][2]=B

 ╥ ⌠
1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:42:40.210

`char mat[10][10]`->`char mat[10][10];`

`for (i=0; i<n; i++);`->`for (i=0; i<n; i++)`

```
/* delete
for (i=0; i<(n-1); i++)
    for (j=0; j<i+1; j++)
        printf("%c ", mat[i][j]);
*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T14:36:39.563

您的

```
scanf("%c", &mat[i][j]); 
```

正在赶上换行符。在格式的开头添加空格

```
scanf(" %c", &mat[i][j]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T11:31:17.250

```
#include<stdio.h>
#include<string.h>

int main (void)
{
        int i,j,m,n;
        char mat[10][10];
        char ch;
        printf("N=");
        scanf("%d", &n);
        printf("M=");
        scanf("%d", &m);
        // Read array elements, one by one
        for (i=0; i<n; i++)
        {
                for (j=0; j<m; j++)
                {
                        printf("mat[%d][%d]=", i, j);
                        //Flush standard inputs
                        while ((ch = fgetc(stdin)) != EOF && ch != '\n')
                        {
                        }
                        mat[i][j]=getchar();
                        printf("\n");
                }
        }
        printf("printing %d x %d matrix", n , m);
        // Print matrix
        putchar('\n');
        for (i=0; i<n; i++)
        {
                for (j=0; j<m; j++)
                {
                        printf("mat[%d][%d]=", i, j);
                        putchar(mat[i][j]);
                        printf("\n");
                }
        }
return (0);
} 
```

# c++ - 为什么这会立即运行？

> ID：16132215
> 
> 赞同：0
> 
> 时间：2013-04-21T14:32:26.370
> 
> 标签：c++, arrays, g++

我在 Windows 和 Linux 上的不同编译器上对数组、向量、boost::array 进行基准测试。我遇到了以下奇怪的事情。

我在 Linux 3.7.0.7 上有 gcc 4.7.2，带有标志：

`g++ -O3 -g -Wall -c -fmessage-length=0 -std=c++11 -MMD -MP -MF"main.d" -MT"main.d" -o "main.o" "../main.cpp"`

而这段代码：

```
 const int arrLength = 5;
    int a[arrLength];
    for (int i = 0; i < arrLength; i++) {
        a[i] = i * 5;
    }

    srand(time(0)); // randomise at run time so it cannot be precomputed by the compiler
    int numbers[10];
    for (auto &i : numbers)
        i = rand();

    clock_t c;

    c = clock();
    for (int i = 0; i < 100000000; i++) {
        for (int j = 0; j < arrLength; j++)
            a[j] += numbers[j%10];
    }

    // write it out so the compiler doesn't omit the whole operation if the values in the array are not being used
    for (int x : a)
        cout << x;
    cout << endl;
    cout << (float) (clock() - c) << endl; 
```

它实际上在 0 秒内运行......这怎么会发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:39:26.267

我的编译器只是计算最终结果。这是我带注释的源代码：

```
asm volatile("DEBUG_IN");

for (int i = 0; i < 100000000; i++)
{
    for (int j = 0; j < arrLength; j++)
    {
        a[j] += numbers[j % 10];
    }
}

asm volatile("DEBUG_OUT"); 
```

调用是`g++ -std=c++11 -O3 -S -masm=intel`.

结果：

```
#APP
# 21 "/tmp/x.cpp" 1
        DEBUG_IN
# 0 "" 2
#NO_APP
        mov     ecx, DWORD PTR [esp+60]
        imul    edi, DWORD PTR [esp+56], 100000000
        mov     eax, DWORD PTR [esp+64]
        mov     edx, DWORD PTR [esp+68]
        mov     DWORD PTR [esp+36], edi
        imul    edi, ecx, 99999999
        lea     ecx, [ecx+5+edi]
        mov     DWORD PTR [esp+40], ecx
        imul    ecx, eax, 99999999
        lea     eax, [eax+10+ecx]
        mov     DWORD PTR [esp+44], eax
        imul    eax, edx, 99999999
        lea     eax, [edx+15+eax]
        mov     edx, DWORD PTR [esp+72]
        mov     DWORD PTR [esp+48], eax
        imul    eax, DWORD PTR [esp+72], 99999999
        lea     eax, [edx+20+eax]
        mov     DWORD PTR [esp+52], eax
#APP
# 31 "/tmp/x.cpp" 1
        DEBUG_OUT
# 0 "" 2
#NO_APP 
```

如您所见，只有五个简单的作业。请注意，`[esp+36]`要`[esp+52]`引用 的各个元素`numbers`。

# java - 多线程程序不工作

> ID：16132216
> 
> 赞同：1
> 
> 时间：2013-04-21T14:32:31.637
> 
> 标签：java, multithreading, swing

我正在努力完成这项工作。我创建了一个带有一个文本字段和按钮的窗口，然后运行**​​run()**方法，该方法应该刷新文本字段中的文本，当我单击按钮时，它应该将数字迭代 1。我想同时进行这项工作，但我是卡住。它只是迭代数字但不刷新文本字段中的值。你能帮我吗？我认为它很容易学习线程，但是......没有:-D 这是代码。

### 窗口类

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton; 
import javax.swing.JFrame;
import javax.swing.JTextField;

@SuppressWarnings("serial") 
public class Okno extends JFrame implements ActionListener,Runnable {

    private JFrame o = new JFrame();
private static JTextField t = new JTextField();
private JTextField t2 = new JTextField();
private static int x = 0;
protected JButton b = new JButton("KLIK");

Okno() {

    o.setVisible(true);
    o.setBounds(0, 0, 300, 200);
    o.setLayout(null);
    o.setDefaultCloseOperation(EXIT_ON_CLOSE);

    t.setBounds(10, 10, 60, 20);
    t2.setBounds(80, 10, 60, 20);
    b.setBounds(50, 80, 60, 30);
    b.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            while (true) {
                Okno.work();
                System.out.println("Klik");
            }

        }
    });
    o.add(t);
    o.add(b);
    o.add(t2);
}
public static int iter(){

    x++;
    return x;
}

public static void work(){
    try {
        iter();
        System.out.println(x);
        Thread.sleep(1000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
@Override
public void actionPerformed(ActionEvent e) {

}
@Override
public void run() {
    while(true){
        try {
            Thread.sleep(1200);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    t.setText(Integer.toString(x));
    System.out.println("RUN");
    }
}
    } 
```

### 主班

```
public class ThreadDemo {
public static void main(String args[]) {
 Okno o = new Okno();

 while(true){
 o.run();
 }
 }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:35:29.473

Swing 是单线程的。调用会`Thread.sleep`阻止 UI 更新。请改用[摇摆计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。

[从GETah对每秒更新gui的java秒表](https://stackoverflow.com/questions/11058172/java-stopwatch-that-updates-the-gui-every-second)的回答：

> 沿着这些路线的东西应该这样做：

```
import java.awt.EventQueue;
import java.util.Timer;
import java.util.TimerTask;
import javax.swing.JFrame;
import javax.swing.JLabel;

/** @see https://stackoverflow.com/a/11058263/230513 */
public class Clock {

    private Timer timer = new Timer();
    private JLabel timeLabel = new JLabel(" ", JLabel.CENTER);

    public Clock() {
        JFrame f = new JFrame("Seconds");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(timeLabel);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
        timer.schedule(new UpdateUITask(), 0, 1000);
    }

    private class UpdateUITask extends TimerTask {

        int nSeconds = 0;

        @Override
        public void run() {
            EventQueue.invokeLater(new Runnable() {

                @Override
                public void run() {
                    timeLabel.setText(String.valueOf(nSeconds++));
                }
            });
        }
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                final Clock clock = new Clock();
            }
        });
    }
} 
```

> 将`timeLabel`始终显示计时器已运行的秒数。
> 
> 1.  您需要正确格式化它以显示“hh:mm:ss”；[这里](https://stackoverflow.com/a/2705674/230513)展示了一种方法。
>     
>     
> 2.  创建一个容器并向其添加标签，以便您可以将其显示为 GUI 的一部分。
>     
>     
> 3.  使用将结果与此[替代](https://stackoverflow.com/a/5529043/230513)进行比较`javax.swing.Timer`。

# javascript - jQuery 元素的容器层次结构访问

> ID：16132227
> 
> 赞同：1
> 
> 时间：2013-04-21T14:33:44.240
> 
> 标签：javascript, ajax, jquery-mobile

物理页面上的 JQM 元素：

```
#page_test1
    button changing page to #page_test2

#page_test2
    div #place to put something programmatically 
```

将按钮放在#place 容器中，我编写了以下（工作）代码：

```
$(document).on('pagebeforeshow', '#page_test2', function(event) {
    $('#place').empty();
    $('#place').append('<a href="#" data-role="button" data-theme="d">Dynamic button inserted by JavaScript</a>');
    $('#place').trigger('create');
}); 
```

好的，但是当我尝试将`.on`正文移动到脚本级别（直接在脚本标记下）时，由于上下文松散，内部代码变得错误：

```
$(document).on('pagebeforeshow', '#page_test2', function(event) {
    addButton(); // Attempt to move widget manipulation up
});

// Widget manipulation not changed but moved outside (level up) .on
// Not working
function addButton() {
    $('#place').empty();
    $('#place').append('<a href="#" data-role="button" data-theme="d">Dynamic button inserted by JavaScript</a>');
    $('#place').trigger('create');
} 
```

如何从不同级别的 JQM 层次结构及其外部访问 JQM 元素？

猜猜它对于 JQM / Ajax 来说是非常基础的，所以我将非常感谢使用带有通用信息的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:24:42.977

要在目标页面外部动态访问代码，请使用以下命令：

```
$(document).on(event, '.selector', function() { }); 
```

要在目标页面内动态访问代码，请使用以下命令：

```
$('.selector').on(event, function() { }); 
```

# matlab - 如何阈值/过滤向量？

> ID：16132231
> 
> 赞同：0
> 
> 时间：2013-04-21T14:34:44.013
> 
> 标签：matlab, vector, filter

我有一个包含数据列表（X 和 Y 坐标）的向量，我想将其与 100 个向量的数组（每个向量具有相似但不相同的 XY 坐标）进行比较，以找到匹配项。

每个向量的数据大小范围（10 到 20 条线之间），这在匹配不同大小的矩阵时会导致问题。

所以为了匹配，我使用了匹配精确数据的匹配特征，这些数据不能用作不同大小的向量。

所以我做了（使用 pdist 将绳索变成距离）

```
threshigh = (vector1/100) * 110;
threslow = (vector1/100) * 90;

if (Vector2 <= threshigh)&&(vector2 >= threslow)   
    disp its a match
else
    not a match
end 
```

太棒了！但是.. 我不能在向量上使用运算符，因为它们仅适用于标量。

我该如何解决这个问题？

我也想到了，即使这可行，并且向量中的某些值落在此范围之间，除非它们都匹配，否则它将不匹配？我如何只取大部分结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:20:09.497

重复问题的链接应该可以解决您的第一个问题。至于你的第二个问题：

> ...即使这有效并且向量中的某些值落在此范围内，除非它们都匹配，否则它不会匹配？我如何只取大部分结果？

一旦你有了一个逻辑数组（在指定范围内的元素对应的位置为 1，在其他位置为 0），你可以根据自己的喜好对其进行操作。

在其当前形式中，仅当*所有*元素都是（逻辑“1”）时，`if`语句才会分支。如果您知道被测试的表达式可能是一个向量（即一个*数组*），您可以执行以下操作：*`true`*

 ***   使用[`any`](http://www.mathworks.com/help/matlab/ref/any.html)命令检查数组中是否至少有一个元素是`true`：

    ```
    if any(...)
        %// Do something...
    end 
    ```

*   使用[`all`](http://www.mathworks.com/help/matlab/ref/all.html)命令检查所有元素是否为`true`：

    ```
    if all(...)
        %// Do something...
    end 
    ```

    （`all`在这里使用是多余的，但它确实增强了可读性......）

*   使用以下命令检查大多数“1” [`mode`](http://www.mathworks.com/help/matlab/ref/mode.html)：

    ```
    if mode(double(...))
        %// Do something...
    end 
    ```

    `mode`返回数组中出现频率最高的元素，因此如果它为 '1'，则`if`语句将分支。**

# emacs - 如何加快 Emacs DocView 模式？

> ID：16132234
> 
> 赞同：7
> 
> 时间：2013-04-21T14:35:30.187
> 
> 标签：emacs, docview

我正在使用相当标准的安装：

*   Ubuntu 12.04 LTS（不到一周前安装）
*   GNU Emacs 24.1

当我在 Emacs 中打开 PDF 文件时，速度非常慢。简单地用鼠标滚动时有 2-3 秒的延迟，使用`n`, `p`, `C-p`,`C-n`等时有 1-2 秒的延迟。

这是一个 20 页的文档。使用像[这样](http://www.symantec.com/content/en/us/enterprise/media/security_response/whitepapers/w32_stuxnet_dossier.pdf)的 50 页文档，Emacs 变得无法使用（不断冻结），因此问题随着文档大小而变得更糟。

**我将如何解决这个问题？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T14:35:30.187

当我跑`emacs -Q`的时候，问题就解决了。我将它隔离到我的`.emacs.d/init.el`文件中的这一行：

```
(global-linum-mode 1) 
```

如果我将其注释掉并重新启动 Emacs，我可以滚动 PDF，并且不会有任何 UI 延迟。如果我用 重新打开它`M-x global-linum-mode`，鼠标滚动和 UI 更新之间的长时间滞后就会回来。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-26T06:32:31.007

要在 DocView 模式下禁用 linum-mode，可以使用以下设置文件： [setup-linum.el](https://github.com/Khady/emacs.d/blob/master/setup-linum.el) 您可以通过编辑第 5 行来自定义

# ios - 使用 CoreData 存储 JSON 字符串

> ID：16132239
> 
> 赞同：0
> 
> 时间：2013-04-21T14:35:46.937
> 
> 标签：ios, json, core-data

我有一组 JSON 字符串，其中每个 JSON 字符串都有一个键。现在，我想将这些 JSON 字符串存储在设备上，以便以后可以使用这些数据。在这里，我不在设备上存储任何对象。我可以使用 CoreData 还是有任何替代方法？在设备上存储 JSON 的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:47:12.350

您也可以简单地将 JSON 保存到文件中，并在下次需要时再次反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:33:38.480

如果您没有太多数据要存储，您可以使用 plist 或 json。Plist 会更容易，如果你这样存储 json，你需要多几行代码。

创建一个 DataHelper 类，其中包含 save、add、findAll、findFirtWithValue:forObject: 方法。

这是一个示例

```
#define kPlistFilePath @"Data.plist"
#define kJsonFilePath @"Data.json"

@implementation DataController

+ (NSString *)savedFilePath
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = paths[0]; 
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:kPlistFilePath];
    return filePath;
}

+ (NSArray *)findAll
{   
    NSString *filePath = [self savedFilePath];
    return [NSArray arrayWithContentsOfFile:filePath];
}

+ (void)saveJSON:(id)object 
{
    NSString *filePath = [self savedFilePath];

    NSArray *unsavedArray = nil;

    if ([object isKindOfClass:[NSString class]]) {
        NSError *error = nil;
        unsavedArray = [NSJSONSerialization JSONObjectWithData:[object dataUsingEncoding:NSUTF8StringEncoding]
                                                       options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments
                                                         error:&error];

    }else if([object isKindOfClass:[NSArray class]]){
        unsavedArray = object;

    }else if([object isKindOfClass:[NSDictionary class]]){
        unsavedArray = @[object];
    }

    if ([unsavedArray count]) {
        [unsavedArray writeToFile:filePath atomically:NO];
    }
}

+ (NSDictionary *)userInfoForID:(NSString *)userID
{
    NSArray *allData = [self findAll];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"userid = %@",userID];
    return [[allData filteredArrayUsingPredicate:predicate]lastObject];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:40:30.047

JSON 只是为服务器和客户端（您的应用程序）之间的快速传输定义了紧凑的数据格式。

您需要做的是将服务器中的 JSON 数据解码为数据类型 NSDictionary、NSArray、NSString...，然后如果要存储它们，请使用 plist、sqlite 或 CoreData 进行存储。

对于 CoreData，您需要创建与 JSON 格式关联的实体。

例如：“键”：“值”-> NSDictionary

# c++ - 对单个像素应用 GaussianBlur

> ID：16132242
> 
> 赞同：4
> 
> 时间：2013-04-21T14:36:18.330
> 
> 标签：c++, opencv, blur, gaussian

我正在使用 OpenCV 在 C++ 中编写一个应用程序，以将高斯滤波器应用于图像中的单个像素。例如，我循环遍历图像中的每个像素，如果它们匹配特定的 RGB 值，我想将高斯算法仅应用于这些像素，以便仅在图像的这些部分周围发生模糊。

但是，我很难找到一种方法来做到这一点。OpenCV 库提供的`GaussianBlur()`功能只允许我模糊整个图像，而不是简单地将算法和内核一次应用于一个像素。有没有人对我如何实现这一点有任何想法（例如，有没有我不知道的另一种方法）？我希望我不必自己编写整个算法来将其应用于单个像素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:36:01.637

我的一个朋友提出了一个很好的解决方案：

*   克隆原始矩阵
*   适用`GaussianBlur()`于克隆
*   将每个像素与 RGB 值进行比较
*   如果匹配，将原始像素替换为克隆像素

简直不敢相信那是多么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:28:43.603

如果您只需要在几个像素上应用高斯模糊，您可以自己编写代码。它比你想象的要容易得多，只需要几行。它是一个简单的[模板运算符](http://en.wikipedia.org/wiki/Stencil_%28numerical_analysis%29)，其内核使用[高斯函数](http://en.wikipedia.org/wiki/Gaussian_function)。您所需要的只是像素及其邻居的坐标。

其余的都是直截了当的。这是一个高斯矩阵的示例，您可以轻松编码或使用高斯函数生成：

![高斯模糊矩阵示例](https://i.stack.imgur.com/J0TfU.gif)

简而言之，它只是相邻值的加权平均值。

# json - 使用 curl 模拟 Gmail 请求

> ID：16132245
> 
> 赞同：0
> 
> 时间：2013-04-21T14:36:36.377
> 
> 标签：json, post, curl, gmail, http-post

我正在尝试模拟 gmail 请求。基本上我打算获取所有的 json 响应。

当您`Themes -> Change you background image`在 gmail 中单击时，您会看到一个 picasa 特色图库，您可以从中选择图像。我设法获取了 gmail 用于获取更多图像的请求 POST 字符串`chrome developer tools -> Network -> XHR`。我将请求复制为 curl。

```
curl "https://mail.google.com/picker/pvr?hl=en&native=1&hostId=gm-theme" -H ":host: mail.google.com" -H ":version: HTTP/1.1" -H "origin: https://mail.google.com" -H "accept-encoding: gzip,deflate,sdch" -H "accept-language: en-US,en;q=0.8" -H "content-control: no-cache" -H "cookie: GMAIL-COOKIES" -H "content-length: 257" -H ":path: /picker/pvr?hl=en&native=1&hostId=gm-theme" -H "accept-charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3" -H "user-agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31" -H "content-type: application/x-www-form-urlencoded;charset=UTF-8" -H "accept: */*" -H "referer: https://mail.google.com/_/mail-static/_/js/main/m_i,t/rt=h/ver=NB-HmMH_MVQ.en./sv=1/am=!JjrcIo7GA7b0RPF-I9tbYvMmngnebTyl_O_8x6inji58opxSrbuft8sKd6tLvMR8EoLV76U/d=1?random=1366542355442" -H "x-same-domain: explorer" -H ":scheme: https" -H ":method: POST" --data "start=2050&numResults=50&sort=3&desc=true&data=0&view=2&service=picasa&type=featured&options=%7B%22excludeLabels%22%3Anull%7D&token=MY-TOKEN&version=4&subapp=5&app=2&clientUser=16140887335626099390&authuser=0" 
```

当我在 curl 中运行它时，我没有收到一个 json 文件，而是收到一个混淆/加密的文本，例如：[link](https://www.dropbox.com/s/8o6zo31klejyvmt/abc.json)

为什么响应不是这样的 json 文本：[link](https://www.dropbox.com/s/vytjds8z8ld68he/normal.json)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:13:56.700

结果与您刚刚忘记解压缩结果相同。如果我将您重命名`abc.json`为`abc.json.gz`并提取，`abc.json`我将得到一个与您的`normal.json`.

**正常.json**：

```
&&&START&&&{"response":{"cursor":"2100","docs":[{"attrs":{"ut":1.20922026E12}... 
```

**abc.json**（解压后）：

```
&&&START&&&{"response":{"cursor":"50","docs":[{"attrs":{"ut":1.364824967E12}... 
```

# javascript - 在requireJS中加载文件字典，就好像它是1个文件一样

> ID：16132246
> 
> 赞同：0
> 
> 时间：2013-04-21T14:36:38.983
> 
> 标签：javascript, requirejs, manifest, require

我正在尝试用javascript编写游戏引擎，我想做的是在游戏代码执行之前加载所有引擎代码。现在，这只是第一步，因为我还想做的是将游戏代码中的所有引擎代码加载到一个文件中。所以我会有一个引导文件，我在其中加载所有引擎代码，返回主游戏对象并将其返回到游戏代码中。

```
define(['engine'[,...[]]], function(engine){
    // do what you want in order for you to make a game
}); 
```

在我的引擎文件中，我将加载所有引擎代码，例如：

```
requirejs.config({
        baseUrl: '/js/libraries/engine',
        paths: {

            message         : "message",
            debug           : "debug",
            vector2         : "helpers/vector2",
            settings        : "settings",
            engine          : "engine",
            loop            : "loop",
            extra           : "extras",
            scene           : "scene",
            scenemanager    : "scenemanager",
            audio           : "audio",
            input           : "input",
            canvas          : "canvas",
            drawable        : "drawables/drawable",
            sprite          : "drawables/sprite",
            animation       : "drawables/animation",
            boxcollider     : "colliders/boxcollider",
            spherecollider  : "colliders/spherecollider",
            actor           : "actor",
            world           : "world"

        }
});

require(["message", "debug", "vector2", "settings", "engine", "loop", "extra", "scene", "scenemanager",
            "audio", "input","canvas","drawable","sprite","animation","boxcollider", "spherecollider", "actor", "world"]
    , function(
            message,   debug,    vector2,   settings,   engine,   loop,   extra,   scene,  scenemanager,
            audio,   input,   canvas, drawable, sprite,   animation,   boxcollider,   spherecollider,   actor,  world)
        {
         return engine;
        }
    ); 
```

所以基本上，engine.js 文件将成为引擎代码的清单，我只想加载 engine.js 文件以访问其中定义的所有组件。我只是不知道目前该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:53:56.903

要创建单个（可能已缩小）文件，请使用[RequireJS 优化器](http://requirejs.org/docs/optimization.html)。

在文件布局方面：

## 引擎.js

engine 在这里定义，并且依赖于所有其余的引擎子组件。

```
define(["message", "debug", "vector2", "settings", "loop", "extra", "scene", "scenemanager",
        "audio", "input","canvas","drawable","sprite","animation","boxcollider", "spherecollider", "actor", "world"]
, function(
        message,   debug,    vector2,   settings,   loop,   extra,   scene,   scenemanager,
        audio,   input,   canvas, drawable, sprite,   animation,   boxcollider,   spherecollider,   actor,  world) {
        var engine = ...;
        return engine;
    }
); 
```

## 索引.html

```
<head>
...
<script>
require.config({
    baseUrl: '/js/libraries/',
    paths: {
        engine          : "engine",
        message         : "message",
        debug           : "debug",
        vector2         : "helpers/vector2",
        settings        : "settings",
        engine          : "engine",
        loop            : "loop",
        extra           : "extras",
        scene           : "scene",
        scenemanager    : "scenemanager",
        audio           : "audio",
        input           : "input",
        canvas          : "canvas",
        drawable        : "drawables/drawable",
        sprite          : "drawables/sprite",
        animation       : "drawables/animation",
        boxcollider     : "colliders/boxcollider",
        spherecollider  : "colliders/spherecollider",
        actor           : "actor",
        world           : "world"
    }
});
</script>
<script>
require(['engine'], function(engine) {
    // do something with the game
});
</script>
...
</head> 
```

# cakephp - CakePHP 2.x Auth 自定义用户名（代码到位但不起作用！）

> ID：16132249
> 
> 赞同：1
> 
> 时间：2013-04-21T14:36:54.070
> 
> 标签：cakephp, authentication

抱歉 - 不想问，但我已经花了几个小时来解决这个问题并进行研究，但没有任何运气。

CakePHP（运行最新版本）似乎拒绝使用字段设置（这样我就可以使用数据库中的电子邮件列作为用户名）。如果我将其设置为“电子邮件”，这是我希望从数据库中使用的字段，它只会拒绝登录并说明不正确的详细信息。由于某种原因，无法从 DebugKit 中的 SQL 获得任何输出。尽管按照下面将其设置为用户名时，只需使用数据库中的“临时”列就可以正常工作。我试过把它放在 components var 中，但也没有运气。我可能做错了什么？调试已打开，在日志或浏览器中看不到任何错误。

该模型确实包含一个电子邮件列。

**控制器/AppController.php**

```
class AppController extends Controller {

        public $components = array(
                'Session',
                'DebugKit.Toolbar',
                'Auth' => array(
                        'allow' => array('login','logout'),
                        'loginAction' => array('controller' => 'users', 'action' => 'login'),
                        'loginRedirect' => array('controller' => 'dashboard', 'action' => 'index'),
                        'authorize' => 'Controller'
                )
        );

        function beforeFilter() {
                Security::setHash('md5');
                $this->Auth->authenticate = array(
                        'Form' => array(
                                'fields' => array(
                                        'username' => 'username',
                                ),
                        ),
                );
        }
} 
```

**控制器/用户控制器.php**

```
class UsersController extends AppController {

        public $uses = array('User');

        public function beforeFilter() {
                parent::beforeFilter();
        }

        public function isAuthorized($user){
                return true;
        }

        public function login() {
                $this->layout = 'login';

                if ($this->request->is('post')) {
                        if ($this->Auth->login()) {
                                $this->redirect($this->Auth->redirect());
                        } else {
                                $this->Session->setFlash('Invalid username or password, try again','flash_error');
                        }
                }
        }

        public function logout() {
                $this->layout = 'login';

                $this->Session->setFlash('Successfully logged out!','flash_success');
                $this->redirect($this->Auth->logout());
        }

} 
```

**查看/用户/login.ctp**

```
<?php
        $this->set('title_for_layout', 'Login');

        echo $this->Session->flash();
        echo $this->Session->flash('auth','flash_info');

        echo $this->Form->create('User', array(
                'action' => 'login'
        ));
        echo $this->Form->input('username',array(
                'between' => '<br/>',
                'before' => '<p>',
                'after' => '</p>',
                'class' => 'text',
                'label' => 'Email:'
        ));
        echo $this->Form->input('password',array(
                'between' => '<br/>',
                'before' => '<p>',
                'after' => '</p>',
                'class' => 'text',
                'label' => 'Password:'
        ));
        echo $this->Form->submit('Login', array(
                'class' => 'submit',
                'before' => '<p>',
                'after' => '</p>'
        ));
        echo $this->Form->end();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:03:04.483

您需要将表单上的字段名称从用户名更改为电子邮件。仅将标签设置为“电子邮件”是不够的。

```
 echo $this->Form->input('email',array(
            'between' => '<br/>',
            'before' => '<p>',
            'after' => '</p>',
            'class' => 'text',
            'label' => 'Email:' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:15:01.450

尝试更新 appController 中的组件代码以将身份验证值添加到 Auth 数组，如下所示：

```
public $components = array(
            'Session',
            'DebugKit.Toolbar',
            'Auth' => array(
                    'allow' => array('login','logout'),
                    'loginAction' => array('controller' => 'users', 'action' => 'login'),
                    'loginRedirect' => array('controller' => 'dashboard', 'action' => 'index'),
                    'authorize' => 'Controller',
                    'authenticate' => array(
                        'Form' => array(
                                'fields' => array('username' => 'email')
                            )
                    )
            )
    ); 
```

# .net - .exe 文件在移动到另一台计算机时不起作用

> ID：16132251
> 
> 赞同：0
> 
> 时间：2013-04-21T14:37:07.757
> 
> 标签：.net, exe, emgucv

我在 Microsoft Visual C# 2010 上制作了图像处理软件，效果很好。该软件使用 EMGU CV 图像处理库，因此我将 .dll 文件以及视频和图片放在了我计算机上的文件中。一切仍然运作良好。

但是，当我将包含 .exe 和 .dll 以及视频和图片的相同文件传输到另一台计算机时，它不起作用。我怀疑另一台计算机上的 .net 框架。我确定.net 在那里，但我不确定版本。我自己电脑上的版本是4.5。

.net 框架是唯一的问题吗？或者可能还有其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:42:01.317

是的，您的问题很可能是 .NET 框架。Visual Studio.NET 2010 使用 .NET 框架 4.0，而不是 4.5。所以，你的电脑上必须有 4.0，即使它不显眼。还有，有什么问题吗？运行可执行文件时发生了什么错误？

# c++ - 没有分段错误，为什么？用作参数的返回函数值

> ID：16132252
> 
> 赞同：1
> 
> 时间：2013-04-21T14:37:14.830
> 
> 标签：c++, function, segmentation-fault

下面的代码会导致分段错误吗？

```
struct Dim {
  int x, y, z;
};

Dim set_dim(int a) {
 Dim l;
 l.x=a;
 l.y=a;
 l.z=a;
 return l;
}

int sum(const Dim &m) {
  int s=m.x+m.y;
  return s;
}

main() {
  cout<<sum(set_dim(5))<<endl;
} 
```

我认为它可以，因为引用了 set_dim 中的局部变量“l”，换句话说，对现在超出范围的变量的引用。但它的工作量永远不会减少

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:39:43.523

永远不会引用 of `l`（*不直接可能是由于间接返回值优化，但您不必担心*）。

*   `set_dim`返回 的**副本`l`**。将传递给的临时副本`sum`。

*   `sum`可以接受一个临时的，因为它需要一个 const 引用，一切都很好，他们都过着幸福的生活，直到 `sum`返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:40:09.283

这是很好定义的。`set_dim`按值返回，因此它的返回对象是局部变量的临时副本`l`。然后将此临时值绑定到 的`const`引用参数`sum`。这会影响临时对象的生命周期：

> 临时绑定到函数调用 (5.2.2) 中的引用参数将持续存在，直到包含调用的完整表达式完成。

所以临时对象的生命周期是 full-expression `cout<<sum(set_dim(5))<<endl;`。它在执行时仍然存在`sum`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T14:43:09.460

`set_dim`不返回引用而是 l 的副本，所以我不认为有任何段错误的机会。

# eclipse - 结合 Eclipse Juno 和 GlassFish 服务器

> ID：16132253
> 
> 赞同：0
> 
> 时间：2013-04-21T14:37:15.403
> 
> 标签：eclipse, glassfish

我正在使用 Eclipse Juno 并在 Windows 7 上的 C:\glassfish3 下安装了 GlassFish Server 3.1.2。Glassfish 运行良好，我可以访问 localhost:4848/common/index.jsf 下的管理面板。Morevoer 我能够部署一个战争文件并可以启动应用程序。我的外部 GlassFish 服务器似乎没问题！

如果我想在我的 Eclipse Juno 环境中添加一个新服务器，我会进入一个屏幕，我可以在其中选择一个 GlassFish 变体，然后我需要设置一个 JRE 和一个应用程序服务器目录。我无法为我的 Eclipse 向导让我完成配置的应用程序服务器目录设置路径。提前感谢您提供更多信息！

`C:\glassfish3\glassfish`更新：在将应用程序服务器目录路径设置为喜欢这里建议后，我在向导中收到此错误消息： [https ://glassfishplugins.java.net/eclipse36/#1](https://glassfishplugins.java.net/eclipse36/#1)

`There is no valid GlassFish installation in the specified directory. Click the Install Server button to download and install to that directory.`

# php - 使用 PHP 的自动化事件

> ID：16132255
> 
> 赞同：1
> 
> 时间：2013-04-21T14:37:31.923
> 
> 标签：php, mysql

我有这个 php 代码来检查日期是否已过，以便我可以显示或不显示或做某事。

我想修改它并制作一个像 FB 一样的自动发布系统！所以下面是我已经找到并按原样工作的我的 php 代码。

```
$regdate = "20/10/2009"; // recording date
$d = explode("/",$regdate); //date in array
$day = $d[0]+10; // Plus ten days
$end_timestamp = mktime("0","0","0",$d[1],$day,$d[2]); //Expiration date Timestamp
$thismoment = time(); // Current Timestamp
if ($end_timestamp > $thismoment) // Compare
{ 
echo "Hello Word";
} 
```

如何在特定日期和时间修改它，以便我的脚本发送电子邮件？

例如，我想在 2013 年 4 月 22 日 14:30 我的脚本做点什么？（如 facebook 的 Aumated 帖子）

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:05:01.573

您有 2 个选择（至少）：

*   使用系统提供的 cron 作业 (Linux/Unix)
*   在控制台中将您的 PHP 脚本作为守护程序运行，请参见下面的示例代码。

> ```
> <?php
> define("MY_DEFINED_TIME", strtotime("22/04/2013 14:30"));
> while (true) {
>     if (time()==MY_DEFINED_TIME) {
>         //send your email
>         echo "Hello world";
>         break;
>     }
>     sleep (1); // have a rest
> } 
> ```

您可以使用以下命令运行您的守护进程：

> nohup php your_script.php 2>&1 >> /tmp/your_script.log &

然后，当出现任何错误时，您可以在 /tmp/your_script.log 中找到输出。希望这有帮助。

# java - 如何将键盘上的回车键分配给 JButton

> ID：16132257
> 
> 赞同：1
> 
> 时间：2013-04-21T14:37:40.050
> 
> 标签：java, swing, netbeans, jframe

我为特定操作创建了一个带有 JButton 的 Jframe。现在请我想要一种情况，只要我在键盘上按下回车键，它就会执行我在 Jbutton 中编写的操作。我的 Jframe 是用 Netbeans 7.3 设计的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:39:40.850

> 现在请我想要一种情况，只要我在键盘上按下回车键，它就会执行我在 Jbutton 中编写的操作。

*   使您的 JButton 成为 JRootPane 的默认按钮。
*   您可以通过调用`setDefaultButton(myJButton)`根窗格来执行此操作。
*   `getRootPane()`您可以通过调用JFrame来获取 JRootPane 。

*   请注意，如果您希望在 JTextField 具有焦点时执行此操作，则解决方案是不同的；在这里，您需要将与 JButton 相同的 ActionListener 添加到 JTextField。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T14:40:07.020

**实现 ActionListener 接口**

> 用于接收动作事件的监听器接口。对处理动作事件感兴趣的类实现此接口，并且使用该类创建的对象使用组件的 addActionListener 方法注册到组件。当动作事件发生时，该对象的 actionPerformed 方法被调用。

# c++ - 将文件中的数字与控制台输入进行比较

> ID：16132259
> 
> 赞同：0
> 
> 时间：2013-04-21T14:37:53.890
> 
> 标签：c++

我正在尝试编写一个程序以从控制台读取数字，然后从文件中读取任意数量的数字。然后它应该打印出控制台编号在从文件读取的列表中出现的次数。我不知道如何做第二部分任何人都可以帮助我计算数字出现的次数。到目前为止，我唯一的代码是第一部分。

我对第二部分的想法是这样的：

```
 while(!inputfile.eof){
    if(inputfilenumber == consolenumber){
       counter = counter + 1;
  } 
```

但我似乎无法将其付诸实践，因为我不确定它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:51:03.747

Sample code you can use it for reference.

```
int input;
int count = 0;
cin>>input;
ifstream myReadFile;
myReadFile.open("text.txt");
char output[100];
if (myReadFile.is_open()) 
{
  while (!myReadFile.eof())
   {          
     myReadFile >> output;
     int val = atoi(output);
     if(val == input)
      {
          cout<<"found input"<<input;
          count++;
      }

   }
}
cout<<"count ="<<count;
myReadFile.close(); 
```

# c++ - 在 Qt 中将文本设置为粗体的函数

> ID：16132266
> 
> 赞同：1
> 
> 时间：2013-04-21T14:38:53.247
> 
> 标签：c++, qt, qtextedit

嗨，我正在尝试在 Qt 中创建一个函数，将 QTextEdit 的字体设置为粗体：

```
void TextEditor::setBold(){
    if (editor->fontWeight() == 75)
        editor->setFont(QFont::setBold(false));
    else
        editor->setFont(QFont::setBold(true));

} 
```

我收到错误：无法在没有对象的情况下调用成员函数 'void QFont::setBold(bool)'

不确定如何在这里分配对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:44:42.800

该方法`setBold`不是`static`使用它的方法，您必须制作一个对象。

```
void TextEditor::setBold(){
  QFont font(editor->font());

  if (editor->fontWeight() == 75)
      font.setBold(false);
  else
      font.setBold(true);

   editor->setFont(font);
} 
```

# php - PHP - 在未提交的表单页面上正确销毁会话？

> ID：16132273
> 
> 赞同：3
> 
> 时间：2013-04-21T14:39:23.740
> 
> 标签：php, session

如果我有一个顶部带有 session_start() 的 php 联系表，我知道这会创建一个会话。但是如果用户没有填写表单而是导航到不同的页面怎么办？

我是否还需要使用 session_destroy，因为我只想在用户通过我的联系页面提交 php 表单时创建会话？

谢谢。

**更新：**为了更好地了解我的表单而不发布冗长的代码。

联系表格.html

```
<?php session_start(); ?>
<?php $fname = isset($_SESSION['fname'] ) ? $_SESSION['fname'] : NULL ; ?>
<form method="post" action="http://www.mysite.com/form-process.php">
  <input value="<?php echo $fname ?>" type="text" id="fname" name="fname" />
  <input type="submit" value="Submit Request" />
</form> 
```

表单-process.php

```
<?php
session_start(); 
$_SESSION['fname'] = $_POST['fname'];
$user = "John" ;
session_write_close(); 
if ($_SESSION['fname'] != $user) {
   header('Location: http://www.mysite.com/contact-form.html');
} 
else {
  $_SESSION = array();
  session_destroy();
  header('Location: http://www.mysite.com/thankyou.html');
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:42:27.657

创建会话的开销微乎其微，如果您只想在用户发帖时使用会话，则`session_destroy()`可以将其放在检测帖子的块中而不是放在脚本的顶部，但没有真正的理由需要这样做。`session_start()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T15:13:50.910

如果您只想在用户提交特定表单时创建会话，请按照您的描述进行操作。不需要放在`session_start()`网站的每个页面上，也不需要放在文件的第一行（它只需要能够生成 cookie，因此它需要在任何*输出*之前）。

```
// contact-form.php
if( $_SERVER['REQUEST_METHOD']=='POST' ){
    session_start();
    // ...
} 
```

如果用户没有完成某些任务，HTTP 的无状态特性就不可能主动删除会话。但是，如果您不在站点的其他部分加载会话，会话文件将在过期时间后的下一次垃圾收集中被删除，即使用户仍在浏览您的站点。除此之外，会话只是一个小文本文件，无害地位于临时目录中。

# git - 在我的本地机器上的两个不同位置拥有一个 repo 的两个不同分支

> ID：16132284
> 
> 赞同：2
> 
> 时间：2013-04-21T14:40:18.867
> 
> 标签：git, github, git-branch, working-directory

我目前正试图将我的回购的两个分支放在两个完全不同的位置。意味着我有分支大师和构建。

主人的路径应该是`C:\some folder\some other folder\another folder\src`

构建的路径应该是`C:\some folder\misc\builds`

我现在发现，它们都在同一个目录中，如果我切换分支只会更改内容。我怎么能在我的本地机器上把它们分开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:43:25.147

首先，你为什么想要？git 的强大功能允许您在同一路径中使用多个分支。

如果您需要其他位置的存储库，只需在该路径克隆存储库：

`C:\some folder\misc\builds> git clone http://pathToMyRepo.git`

然后切换到你想要的分支：

```
C:\some folder\misc\builds> cd \MyRepo
C:\some folder\misc\builds\MyRepo> git checkout builds 
```

# c# - 按数组中的信息排序数组列表？

> ID：16132292
> 
> 赞同：0
> 
> 时间：2013-04-21T14:40:58.563
> 
> 标签：c#

我想要做的是通过数组中的信息重新排序数组列表。例如，我的列表可能有 20 个 Long[] 数组，我想按 Highest Totallaps 和 Lowest TotalTime 进行排序 尝试了几件事，尽管想不出任何问题。任何帮助将不胜感激。

```
public List<long[]> Reorderedlist()
{
    _timeKeeper._timeKeeperControls controls = new _timeKeeper._timeKeeperControls();

    List<long[]> returnList = new List<long[]>();

    List<long[]> listToReOrder = new List<long[]>();

    listToReOrder = controls.teamInfoInClass("1",ContactlessTimer.Properties.Settings.Default.currentRaceID);

    //newlist contains list of long[] arrays
    //each array contains

    //long[0] = id1 (eg 33) 
    //long[1] = id2 (eg 34)
    //long[2] = totalLaps (eg 10)
    //long[3] = total time (eg 340000 in miliseconds)

    foreach (long[] Arr in listToReOrder)
    {
        foreach (long info in Arr)
        {
            //order
        }
    }

    return returnList;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:46:06.133

使用 LINQ 方法：`OrderByDescending`和`ThenBy`：

```
List<long[]> returnList = listToReOrder.OrderByDescending(x => x[2])
                                       .ThenBy(x => x[3])
                                       .ToList(); 
```

# function - 使用带有字典的整数来创建文本菜单（切换/大小写替代）

> ID：16132293
> 
> 赞同：0
> 
> 时间：2013-04-21T14:40:58.820
> 
> 标签：function, dictionary, python-3.x, switch-statement

我正在阅读Core Python Programming一书。练习 2_11 指示构建一个菜单系统，该系统允许用户选择运行早期简单程序的选项。菜单系统将保持打开状态，直到用户选择退出选项。这是我的第一个工作程序。

```
programList = {1:"menu system", 
    2:"for loop count 0 to 10", 
    3:"positive or negative", 
    4:"print a string, one character at a time", 
    5:"sum of a fixed tuple", 
    "x":"quit()", 
    "menu":"refresh the menu"}
import os
for x in programList:
    print(x,":",programList[x])

while True:
    selection = input("select a program: ")
    if selection == "1":
        os.startfile("cpp2_11.py")

    elif selection == "2":
        os.startfile("cpp2_5b.py")

    elif selection == "3":
        os.startfile("cpp2_6.py")

    elif selection == "4":
        os.startfile("cpp2_7.py")

    elif selection == "5":
        os.startfile("cpp2_8.py")

    elif selection == "menu":
        for x in range(8): print(" ")
        for x in programList:print(x,":",programList[x])

    elif selection == "X":
        break

    elif selection == "x":
        break

    else:
        print("not sure what you want")
input()
quit() 
```

这个版本运行良好，但我想使用字典作为 case/switch 语句来清理丑陋的 if/elif/else 行。

现在我被困住了。我将 Eclipse 与 PyDev 一起使用，我的新代码抛出错误：

重复签名：！！

这是我当前代码的副本：

```
import os

def '1'():
    os.startfile("cpp2_11.py")
def '2'():
    os.startfile("cpp2_5b.py")
def '3'():
    os.startfile("cpp2_6.py")
def '4'():
    os.startfile("cpp2_7.py")
def '5'():
    os.startfile("cpp2_8.py")
def 'm'():       
    for x in range(8): print(" ")
    for x in actions:print(x,":",actions[x])
def 'x'():
    quit()
def errhandler():    
    else:
        print("not sure what you want")

actions = {1:"menu system",
    2:"for loop count 0 to 10", 
    3:"positive or negative", 
    4:"print a string, one character at a time", 
    5:"sum of a fixed tuple", 
    "X":"quit()", 
    "menu":"refresh the menu"}

for x in actions:
    print(x,":",actions[x])

selectedaction = input("please select an option from the list")
while True:
    actions.get(selectedaction,errhandler)()
input()
quit() 
```

我很确定我当前的问题（错误代码）与我尝试在函数中使用 os.startfile() 的方式有关。也许我已经走远了。任何帮助表示赞赏。

编辑：我正在更改标题以使其对将来的参考更有用。在 Ryan 的有用评论指出函数命名中的简单错误之后，我能够拼凑出一个有效的脚本。有点......这里是：

```
import os

def menu_system():
    os.startfile("cpp2_11alt.py")
def loopCount_zero_to_ten():
    os.startfile("cpp2_5b.py")
def positive_or_negative():
    os.startfile("cpp2_6.py")
def print_a_string_one_character_at_a_time():
    os.startfile("cpp2_7.py")
def sum_of_a_tuples_values():
    os.startfile("cpp2_8.py")
def refresh_the_menu():       
    for x in range(4): print(" ")
    for y in actions:print(y,":",actions[y])
    for z in range(2): print(" ")
def exit_the_program():
    quit()
def errhandler():    
    print("not sure what you want")

actions = {'1':menu_system,
    '2':loopCount_zero_to_ten, 
    '3':positive_or_negative, 
    '4':print_a_string_one_character_at_a_time, 
    '5':sum_of_a_tuples_values, 
    'x':exit_the_program, 
    'm':refresh_the_menu}

for item in actions:
    print(item,":",actions[item])
for z in range(2): print(" ")    

selectedaction = input("please select an option from the list:    ")
while True:
    actions.get(selectedaction,errhandler)()
    selectedaction = input("please select an option from the list:    ")
quit() 
```

第二次尝试有很多问题。我在调用函数时引用了字典键而不是值。我在菜单打印和处理输入值的方式上也有一些错误。现在我需要做的就是弄清楚如何在没有所有额外信息的情况下打印字典值：这是我打印菜单时的输出：

```
2 : <function loopCount_zero_to_ten at 0x027FDA08>
3 : <function positive_or_negative at 0x027FD810>
1 : <function menu_system at 0x027FD978>
4 : <function print_a_string_one_character_at_a_time at 0x027FD930>
5 : <function sum_of_a_tuples_values at 0x027FD780>
x : <function exit_the_program at 0x027FD858>
m : <function refresh_the_menu at 0x027FD7C8> 
```

**以及如何让菜单按数字顺序打印 **。****

 **再次感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:40:13.283

我终于找到了对字典进行排序并将函数名称打印为字符串的问题的解决方案。在已编辑问题的最后一部分（第 3 代码部分）中，我为开始这篇文章的问题提供了固定代码：如何在字典中使用整数来创建菜单 - 旨在创建开关/案例样式替代方案并避免在第一个代码部分出现丑陋的 if/elif/else 问题。

这是工作代码的最终版本：

导入操作系统

```
def menu_system():
    os.startfile("cpp2_11alt.py")
def loopCount_zero_to_ten():
    os.startfile("cpp2_5b.py")
def positive_or_negative():
    os.startfile("cpp2_6.py")
def print_a_string_one_character_at_a_time():
    os.startfile("cpp2_7.py")
def sum_of_a_tuples_values():
    os.startfile("cpp2_8.py")
def refresh_the_menu():       
    for x in range(4): print(" ")
    for key in sorted(actions):
        print (key, '=>', actions[key].__name__)
    for z in range(2): print(" ")
def exit_the_program():
    quit()
def errhandler():    
    print("not sure what you want")

actions = {'1':menu_system,
    '2':loopCount_zero_to_ten, 
    '3':positive_or_negative, 
    '4':print_a_string_one_character_at_a_time, 
    '5':sum_of_a_tuples_values, 
    'x':exit_the_program, 
    'm':refresh_the_menu}

for key in sorted(actions):
    print (key, '=>', actions[key].__name__)

selectedaction = input("please select an option from the list:    ")
while True:
    actions.get(selectedaction,errhandler)()
    selectedaction = input("please select an option from the list:    ")
quit() 
```

添加该`.__name__`方法允许我将函数名称打印为字符串。

使用 for 循环：

```
 for key in sorted(actions):
        print (key, '=>', actions[key].__name__) 
```

创造了对字典进行排序的能力。**

# jquery - JQuery datetimepicker 更改 min/maxDate 导致无限循环

> ID：16132295
> 
> 赞同：0
> 
> 时间：2013-04-21T14:41:17.193
> 
> 标签：jquery, datetime, onchange, datetimepicker, on-the-fly

我正在使用来自[http://trentrichardson.com/examples/timepicker/的 datetimepicker](http://trentrichardson.com/examples/timepicker/)

问题是我有一个开始和结束输入字段。我不希望用户可以选择晚于开始日期字段的结束日期时间。

输入字段如下所示：

```
<input type="text" name="dateStart" id="dateStart" value="<?php echo $pageInfo['page_date_start'];?>" onChange="dateStartChange();" />
<input type="text" name="dateEnd" id="dateEnd" value="<?php echo $pageInfo['page_date_end'];?>" onChange="dateEndChange();" />
// Default date value = 0000-00-00 00:00:00 
```

设置 datetimepicker 的 JScript：

```
$('#dateStart').datetimepicker({
    showSecond: false,
    timeFormat: 'HH:mm:ss',
    dateFormat: "yy-mm-dd",
});

$('#dateEnd').datetimepicker({
    showSecond: false,
    timeFormat: 'HH:mm:ss',
    dateFormat: "yy-mm-dd",
}); 
```

和 onchange 函数：

```
function dateStartChange(){
    console.log("dateStartChange: " + $("#dateStart").val());
    $("#dateEnd").datepicker('option', 'minDate', $("#dateStart").val()); 
}

function dateEndChange(){
    console.log("dateEndChange: " + $("#dateEnd").val());
    $("#dateStart").datepicker('option', 'maxDate', $("#dateEnd").val()); 
} 
```

这很好用，除了一件事。如果我更改日期，然后在同一天单击另一个输入字段并选择，如果我检查控制台日志，则会导致无限循环： ![控制台输出...](https://i.stack.imgur.com/yiuoj.jpg)

页面（chrome）更改为： ![页面结果](https://i.stack.imgur.com/jWBpD.jpg)

日期时间选择器有问题还是我做错了什么？我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:54:52.340

这可能是递归......

```
When dateStart changes, you are modifying dateEnd.
When dateEnd changes, you are modifying dateStart.
When dateStart changes, you are modifying dateEnd.
When dateEnd changes, you are modifying dateStart.
When dateStart changes, you are modifying dateEnd.
When dateEnd changes, you are modifying dateStart.
When dateStart changes, you are modifying dateEnd.
When dateEnd changes, you are modifying dateStart. 
```

等等等等等等。

[编辑建议的解决方法，适用于两个事件处理程序]

```
var bCodeChange = false;

function dateStartChange()
{
    if (bCodeChange == true)
        return;
    else
        bCodeChange = true;

    console.log("dateStartChange: " + $("#dateStart").val());
    $("#dateEnd").datepicker('option', 'minDate', $("#dateStart").val());

    bCodeChange = false;
} 
```

# python - python管道的同步/异步行为

> ID：16132299
> 
> 赞同：10
> 
> 时间：2013-04-21T14:41:28.413
> 
> 标签：python, linux, multiprocessing, pipe

在我的应用程序中，我使用来自多处理模块的管道在 python 进程之间进行通信。最近我观察到一种奇怪的行为，具体取决于我通过它们发送的数据的大小。根据 python 文档，这些管道基于连接并且应该以异步方式运行，但有时它们会在发送时卡住。如果我在每个连接中启用全双工，一切正常，即使我没有使用连接来发送和收听。谁能解释这种行为？

1.  *100 个浮点数，全双工禁用*
    代码工作，利用异步性。
2.  *100 个浮点数，启用全双工*
    该示例按预期工作正常。
3.  *10000 个浮点数，全双工禁用*
    即使处理较小的数据也没问题，执行被永远阻塞。
4.  *10000 个浮点数，全双工*
    再次启用 Fine。

代码（这不是我的生产代码，它只是说明了我的意思）：

```
from collections import deque
from multiprocessing import Process, Pipe
from numpy.random import randn
from os import getpid

PROC_NR = 4
DATA_POINTS = 100
# DATA_POINTS = 10000

def arg_passer(pipe_in, pipe_out, list_):
    my_pid = getpid()
    print "{}: Before send".format(my_pid)
    pipe_out.send(list_)
    print "{}: After send, before recv".format(my_pid)
    buf = pipe_in.recv()
    print "{}: After recv".format(my_pid)

if __name__ == "__main__":
    pipes = [Pipe(False) for _ in range(PROC_NR)]
    # pipes = [Pipe(True) for _ in range(PROC_NR)]
    pipes_in = deque(p[0] for p in pipes)
    pipes_out = deque(p[1] for p in pipes)
    pipes_in.rotate(1)
    pipes_out.rotate(-1)

    data = [randn(DATA_POINTS) for foo in xrange(PROC_NR)]
    processes = [Process(target=arg_passer, args=(pipes_in[foo], pipes_out[foo], data[foo]))
                 for foo in xrange(PROC_NR)]

    for proc in processes:
        proc.start()

    for proc in processes:
        proc.join() 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T12:59:22.567

首先，值得注意的是[`multiprocessing.Pipe`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Pipe)类的实现......

```
def Pipe(duplex=True):
    '''
    Returns pair of connection objects at either end of a pipe
    '''
    if duplex:
        s1, s2 = socket.socketpair()
        s1.setblocking(True)
        s2.setblocking(True)
        c1 = _multiprocessing.Connection(os.dup(s1.fileno()))
        c2 = _multiprocessing.Connection(os.dup(s2.fileno()))
        s1.close()
        s2.close()
    else:
        fd1, fd2 = os.pipe()
        c1 = _multiprocessing.Connection(fd1, writable=False)
        c2 = _multiprocessing.Connection(fd2, readable=False)

    return c1, c2 
```

不同之处在于半双工“管道”使用[匿名管道](http://en.wikipedia.org/wiki/Anonymous_pipe)，但全双工“管道”实际上使用[Unix 域套接字](http://en.wikipedia.org/wiki/Unix_domain_socket)，因为匿名管道本质上是单向的。

我不确定在这种情况下您所说的“异步”一词是什么意思。如果您的意思是“非阻塞 I/O”，那么值得注意的是两种实现都默认使用阻塞 I/O。

* * *

其次，值得注意的是您尝试发送的数据的腌制大小......

```
>>> from numpy.random import randn
>>> from cPickle import dumps
>>> len(dumps(randn(100)))
2479
>>> len(dumps(randn(10000)))
237154 
```

* * *

第三，从`pipe(7)`手册页...

> **管道容量**
> 
> 管道的容量有限。如果管道已满，则 write(2) 将阻塞或失败，具体取决于是否设置了 O_NONBLOCK 标志（见下文）。不同的实现对管道容量有不同的限制。应用程序不应该依赖于特定的容量：应用程序的设计应该使得读取进程在数据可用时立即使用数据，以便写入进程不会保持阻塞状态。
> 
> 在 2.6.11 之前的 Linux 版本中，管道的容量与系统页面大小相同（例如，在 i386 上为 4096 字节）。从 Linux 2.6.11 开始，管道容量为 65536 字节。

* * *

So, in effect, you've created a deadlock where all the subprocesses have blocked on the `pipe_out.send()` call, and none of them can receive any data from the other processes, because you're sending all 237,154 bytes of data in one hit, which has filled the 65,536 byte buffer.

You might be tempted just to use the Unix domain socket version, but the only reason it works at present is that it has a larger buffer size than a pipe, and you'll find that solution will also fail if you increase the number of `DATA_POINTS` to 100,000.

The "quick n' dirty hack" solution is to break the data into smaller chunks for sending, but it's not good practice to rely on the buffers being a specific size.

更好的解决方案是在调用中使用非阻塞 I/O `pipe_out.send()`，尽管我对该模块不够熟悉，`multiprocessing`无法确定使用该模块实现它的最佳方法。

伪代码将沿着......

```
while 1:
    if we have sent all data and received all data:
        break
    send as much data as we can without blocking
    receive as much data as we can without blocking
    if we didn't send or receive anything in this iteration:
        sleep for a bit so we don't waste CPU time
        continue 
```

...或者您可以使用 Python[`select`](http://docs.python.org/2/library/select.html)模块来避免睡眠时间超过必要的时间，但是，再次集成它`multiprocessing.Pipe`可能会很棘手。

课程可能会[`multiprocessing.Queue`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Queue)为你完成所有这些，但我以前从未使用过它，所以你必须做一些实验。

# java - SQL/数据库：将数组存储在表的列中

> ID：16132301
> 
> 赞同：0
> 
> 时间：2013-04-21T14:41:30.457
> 
> 标签：java, sql

有没有一种规范的方法可以在 sql 表的列中存储一些东西的数组/列表？我正在尝试执行以下操作：我有“Building”和“Room”对象，而 Building 对象已设置为它的字段。这种关系（建筑物有很多房间）如何用 SQL 来描述？

我是数据库设计的新手，所以，如果它太微不足道，请不要生气。

ps 另外，如果有人能解释“很多公交车司机使用很多公交车”的关系如何，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:53:58.747

对于您的第一个关联（一个建筑物有很多房间），您通常会使用两个表（建筑物和房间）对此进行建模，其中子表（房间）将具有父表（建筑物）的外键

```
building
id (PK), name, location

room
id(PK), building_id (FK referencing building.id), room_number 
```

对于第二个关联，它是多对多关联，您需要在总线和驱动程序之间建立一个连接表：

```
bus
id (PK), plate_number, color

driver
id (PK), first_name, last_name

driver_drives_bus
driver_id (FK referencing driver.id), bus_id (FK referencing bus.id) 
```

这个连接表的主键是 couple `[driver_id, bus_id]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:59:21.103

我认为你应该考虑阅读这篇文章。

请参阅：[SQL 初学者：第 3 部分 - 数据库关系](http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/)

数据库关系

*   一对一关系
*   一对多
*   多对一关系
*   多对多关系
*   自引用关系

# c - 二值图像的简单多斑点检测？

> ID：16132303
> 
> 赞同：5
> 
> 时间：2013-04-21T14:41:46.643
> 
> 标签：c, image, computer-vision, feature-detection

如果有一个给定的图像二维数组，阈值已经完成，现在是二进制信息。

有没有什么特殊的方法可以处理这个图像，让我在图像上获得多个 blob 的坐标？

我不能使用 openCV，因为这个过程需要在 C 语言自定义模拟器上的 10 多个模拟机器人上同时运行。

我需要 blobs xy 坐标，但首先我需要先找到那些多个 blob。

像素组大小的最简单标准应该足够了。但我不知道如何开始编码。

PS：单个blob应该没问题。问题是多个斑点。

只是一个开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:59:41.060

看看[QuickBlob](http://kmkeen.com/quickblob/)，它是一个小型、独立的 C 库，听起来非常适合您的需求。

QuickBlob 带有一个小型命令行工具 ( `csv-blobs`)，它可以输出在输入图像中找到的每个 blob 的位置和大小：

```
./csv-blobs white image.png
X,Y,size,color
28.37,10.90,41,white
51.64,10.36,42,white
... 
```

这是一个示例（输出图像是由`show-blobs.py`QuickBlob 附带的小型 Python 实用程序生成的）：

![输入图像](https://i.stack.imgur.com/r4yFo.gif) ![输出图像](https://i.stack.imgur.com/MJAQM.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:07:14.533

您可以使用如下算法浏览标记连接部分的二进制图像：

1.  创建一个二维整数数组 labelArray，它将保存连接区域的标签并将其初始化为全零。

2.  逐行迭代每个二进制像素 p

    A. 如果 p 为真，并且 labelArray 中该位置的对应值为 0（未标记），则将其分配给新标签并进行广度优先搜索，将所有周围的二进制像素都添加到同一标签上.

现在唯一的问题是，如果您有多个相互接触的 blob。因为您知道 blob 的大小，所以您应该能够计算出给定连接区域中有多少 blob。这是棘手的部分。此时您可以尝试进行 k-means 聚类。您还可以尝试其他方法，例如使用二元膨胀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-19T14:38:55.700

我知道我参加聚会很晚，但我只是为正在研究这个问题的受益人添加这个。

这是一个很好的描述，可能适合您的需求。 [http://www.mcs.csueastbay.edu/~grewe/CS6825/Mat/BinaryImageProcessing/BlobDetection.htm](http://www.mcs.csueastbay.edu/~grewe/CS6825/Mat/BinaryImageProcessing/BlobDetection.htm)

# javascript - javascript长度函数在文本字段上引发错误

> ID：16132305
> 
> 赞同：0
> 
> 时间：2013-04-21T14:41:48.250
> 
> 标签：javascript, jquery

这准确地报告了 console.log 中文本字段的长度，但它也在每个 keyup 的代码下方抛出了错误。有什么想法吗？

```
$('.search').keyup(function () {
    var searchTerm = this.value;
            console.log(this.value.length);
            if (this.value.length>0){
            getSuggestions(searchTerm);
            }else{
                $('#Button').click();
            }
        }) 
```

这就是我在 Chrome 控制台中得到的

```
Uncaught TypeError: Cannot read property 'length' of undefined pm_functions.js:283
(anonymous function) pm_functions.js:283
p.event.dispatch jquery.min.js:2
g.handle.h 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:46:40.137

尝试替换`this.value.length`为`$(this).val().length`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:56:42.997

这是一个盲目的答案，因为您必须共享您的 html

```
$('.search').keyup(function () {
    var searchTerm = $(this).val();
    if (searchTerm && searchTerm.length>0){
        getSuggestions(searchTerm);
    }else{
        $('#Button').click();
    }
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:17:29.887

好的，解决了。谢谢您的帮助。我注意到`keyup`发射了两次。第二次抛出错误。当我仔细查看 HTML 时，我发现父级也在使用“.search”类。

所以这是我对输入字段使用强 ID 的修复

```
$('#searchInputField').keyup(function () {
            var searchTerm = this.value;
            if (searchTerm.length > 2){
            getSuggestions(searchTerm);
            }else{
                $('#Button').click();
            }
        }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T14:53:36.587

你可以测试 this.value 的值：

```
$('.search').keyup(function () {
var searchTerm = this.value;
        console.log(this.value.length);
        if ( (this.value.length>0) && (searchTerm !== null) ){
            getSuggestions(searchTerm);
        }
        else {
            $('#Button').click();
        }
    }) 
```

# ruby - 无法启动乘客 - 缺少“analytics_log_dir”

> ID：16132308
> 
> 赞同：0
> 
> 时间：2013-04-21T14:42:04.160
> 
> 标签：ruby, nginx, passenger

我正在尝试在 Ruby 1.9.3-p392、nginx 1.2.7 和 rvm 1.19.6 上运行Passenger。我收到这个奇怪的错误：

```
Unable to start the Phusion Passenger watchdog because it encountered 
the following error during startup: Unable to start the Phusion Passenger
logging agent: it seems to have crashed during startup for an unknown reason,
with exit code 1 (-1: Unknown error)

terminate called after throwing an instance of 
'Passenger::VariantMap::MissingKeyException'

  what():  Required key 'analytics_log_dir' is missing
[ pid=17372, timestamp=1366554425 ] Process aborted! signo=SIGABRT(6), 
reason=SI_TKILL, signal sent by PID 17372 with UID 0, backtrace available.

--------------------------------------
[ pid=17372 ] Backtrace with 12 frames:
PassengerLoggingAgent[0x4d7f5c]
/lib/x86_64-linux-gnu/libpthread.so.0(+0xfcb0)[0x7f3aa684bcb0]
/lib/x86_64-linux-gnu/libc.so.6(gsignal+0x35)[0x7f3aa5c9e425]
/lib/x86_64-linux-gnu/libc.so.6(abort+0x17b)[0x7f3aa5ca1b8b]
/usr/lib/x86_64-linux-gnu/libstdc++.so.6(_ZN9__gnu_cxx27__verbose_terminate_handlerEv+0x11d)[0x7f3aa6599e2d]
/usr/lib/x86_64-linux-gnu/libstdc++.so.6(+0x5ef26)[0x7f3aa6597f26]
/usr/lib/x86_64-linux-gnu/libstdc++.so.6(+0x5ef53)[0x7f3aa6597f53]
/usr/lib/x86_64-linux-gnu/libstdc++.so.6(+0x5f17e)[0x7f3aa659817e]
PassengerLoggingAgent(_ZNK9Passenger10VariantMap3getERKSsb+0x8a)[0x4a0d92]
PassengerLoggingAgent(main+0x112)[0x499a43]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f3aa5c8976d]
PassengerLoggingAgent[0x498919] 
```

这是一个回溯： http: [//pastie.org/7682098](http://pastie.org/7682098)

知道有什么问题吗？

# html - 加密 HTML 中的文本字段

> ID：16132310
> 
> 赞同：2
> 
> 时间：2013-04-21T14:42:14.277
> 
> 标签：html, encryption, textfield, password-encryption

我的 HTML 项目中有一个文本字段，我想将其加密为密码。

所以基本上不是显示在文本字段中：

```
mypassword 
```

我想让它说：

```
********* 
```

或类似的东西。所以基本上只是使用户输入的文本不可见。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:49:02.440

Use `<input type="password" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:53:35.340

这与加密无关，它只是一个[表单字段类型](http://www.blooberry.com/indexdot/html/tagpages/i/inputpassword.htm)，可以使用以下内容：

```
<input type="password" name="password"/> 
```

但是，上传用户提交时在此处输入的任何内容都将通过 Internet 直接发送，除非您使用[带有有效 SSL 证书的 HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure)，这将加密用户和您的站点之间的所有通信，并且建议用于登录的任何内容.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T14:43:21.167

你正在寻找`<input type="password" />`.

请注意，这与加密**无关。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T14:51:43.110

You can use `< input type="password" >` like this to hide your password with stars.but it is not enough when you upload your password .you should use PHP or something else

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T15:32:49.157

只需将其放在您放置文本框的现有代码中

```
<input type="password" name="password"/> 
```

默认情况下，这不会让您看到您输入的内容并用星号对其进行编码。

# objective-c - 如何正确使用CGAffineTransformConcat，结合缩放和旋转

> ID：16132321
> 
> 赞同：1
> 
> 时间：2013-04-21T14:43:30.557
> 
> 标签：objective-c, cocoa-touch, cgaffinetransform

我正在创建视图，然后旋转它们并翻转它们。似乎可以使用 CGAffineTransformConcat 来组合缩放和旋转以获得我期望的结果，但我遇到了一些麻烦。

最初，我设置了一个垂直翻转视图的变换。

```
CGAffineTransform flipViewTrans;

viewFlipTrans = CGAffineTransformMakeScale(1, -1);
selectedView.transform = CGAffineTransformConcat(selectedView.transform, flipViewTrans); 
```

![在此处输入图像描述](https://i.stack.imgur.com/T6IHZ.png)

当我旋转视图时，我连接了原始翻转变换，这似乎通过旋转完全按照预期保留了这个翻转变换。

```
-(IBAction)rotateView:(UISlider*)sender {
    float angle = sender.value;
    selectedView.rotation = angle;
    [selectedView setTransform:CGAffineTransformMakeRotation(angle)];
    selectedView.transform = CGAffineTransformConcat(selectedView.transform, flipViewTrans);
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/WLytg.png)

视图翻转也很好。

```
-(IBAction)flipSickerH:(GradientButton*)sender {
    viewFlipTrans = CGAffineTransformMakeScale(-1, 1);
    selectedView.transform = CGAffineTransformConcat(selectedView.transform, viewFlipTrans);
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/TPv0S.png) ![在此处输入图像描述](https://i.stack.imgur.com/hg7Tb.png) ![在此处输入图像描述](https://i.stack.imgur.com/GSMi4.png)

问题是当我按照上面的方式进行翻转后旋转时，结果并没有像预期的那样出现。视线突然向相反的方向翻转。

![在此处输入图像描述](https://i.stack.imgur.com/eNPIi.png)

我认为正在发生的事情是连接的变换被重置，所以唯一的变换是旋转。因此，在这种情况下，旋转代码中的连接可能会失败。

关于我需要做什么的任何线索？

# wcf - 选择 WCF 实例管理

> ID：16132322
> 
> 赞同：1
> 
> 时间：2013-04-21T14:43:31.477
> 
> 标签：wcf

我们正在 IIS 上设计具有以下特征的 WCF Web 服务：

*   对象创建相对繁重（大约需要 500 毫秒），因为它涉及写入文件
*   创建对象后无需保留任何状态
*   来自客户端的每个呼叫平均需要 150 - 200 毫秒。此调用涉及向另一台服务器发送 UDP 请求并接收响应。
*   我们预计大约有 30 个同时存在的客户。它可能会增长到 50 个客户。在最坏的情况下（50 个客户端），我们将需要一个包含 10 个对象实例的池来处理此负载。

您会推荐 3 个实例管理上下文（PerCall、PerSession、Single）中的哪一个，为什么？哪个实例使我们能够管理可以完成工作的可用对象池？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:09:37.893

开箱即用，WCF 不支持服务对象池。您需要一个自定义[IInstanceProvider](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iinstanceprovider.aspx)。在这种情况下，WCF 上下文模式将定义 WCF 何时从 IInstanceProvider 请求新对象，并且 IInstanceProvider 行为将管理池。根据使用情况，将服务设置为 PerInstance 或 PerSession 可能有意义。

如果您在实现中使用依赖注入容器，例如[Castle Windsor](http://docs.castleproject.org/Windsor.MainPage.ashx)、[StructureMap](http://docs.structuremap.net/)或 MS Enterprise Library 的[Unity](http://msdn.microsoft.com/en-us/library/dd203101.aspx)，那么您可以将容器的现有 IInstanceProvider 与池化生活方式一起使用。所有这些容器都是合理的（尽管我个人没有太多让它们管理对象池的经验）。

我个人选择的容器是温莎城堡。在这种情况下，您将使用 Windsor 的[WCF 集成设施](http://docs.castleproject.org/Windsor.WCF-Integration-Facility.ashx)和[共享生活方式](http://docs.castleproject.org/Windsor.LifeStyles.ashx#Pooled_10)。

这是一个使用 Castle.Facilites.WcfIntegraion NuGet 包的快速测试控制台程序。

```
using Castle.Facilities.WcfIntegration;
using Castle.MicroKernel.Registration;
using Castle.Windsor;
using System;
using System.Collections.Generic;
using System.ServiceModel;
using System.Threading.Tasks;

namespace WCFWindsorPooledService
{
    [ServiceContract]
    public interface ISimple
    {
        [OperationContract]
        void Default(string s);
    }

    public class SimpleService : ISimple
    {
        private static int CurrentIndex = 0;
        private int myIndex;

        public SimpleService()
        {
            // output which instance handled the call.
            myIndex = System.Threading.Interlocked.Increment(ref CurrentIndex);
        }

        public void Default(string s)
        {
            Console.WriteLine("Called #" + myIndex);
            System.Threading.Thread.Sleep(5);
        }
    }

    class PooledService
    {
        static void Main(string[] args)
        {
            Console.WriteLine("\n\n" + System.Reflection.MethodInfo.GetCurrentMethod().DeclaringType.Name);

            // define mapping of interfaces to implementation types in Windsor container.
            IWindsorContainer container = new WindsorContainer();
            container.AddFacility<WcfFacility>()
                     .Register(Component.For<SimpleService>().LifeStyle.PooledWithSize(2, 5));

            var host = new Castle.Facilities.WcfIntegration.DefaultServiceHostFactory()
                                                           .CreateServiceHost(typeof(SimpleService).AssemblyQualifiedName,
                                                                              new Uri[] { new Uri("http://localhost/Simple") });
            host.Open();

            ChannelFactory<ISimple> factory = new ChannelFactory<ISimple>(host.Description.Endpoints[0]);

            List<Task> tasks = new List<Task>();
            for (int i = 0; i < 20; i++)
            {
                tasks.Add(Task.Run(() =>
                {
                    ISimple proxy = factory.CreateChannel();
                    proxy.Default("Hello");

                    ((ICommunicationObject)proxy).Shutdown();
                }));
            }

            Task.WaitAll(tasks.ToArray());

            ((ICommunicationObject)host).Shutdown();
            container.Dispose();
        }
    }

    public static class Extensions
    {
        static public void Shutdown(this ICommunicationObject obj)
        {
            try
            {
                obj.Close();
            }
            catch (Exception ex)
            {
                Console.WriteLine("Shutdown exception: {0}", ex.Message);
                obj.Abort();
            }
        }
    }
} 
```

我不会假装了解 Castle 如何管理游泳池的所有规则，但显然正在使用游泳池。输出是：

```
PooledService
Called #1
Called #5
Called #2
Called #3
Called #4
Called #6
Called #7
Called #8
Called #7
Called #4
Called #2
Called #5
Called #1
Called #10
Called #6
Called #9
Called #4
Called #7
Called #1
Called #9 
```

# excel - 在excel 2010中将行数据排序到具有相同标题的列中

> ID：16132325
> 
> 赞同：1
> 
> 时间：2013-04-21T14:43:48.227
> 
> 标签：excel, spreadsheet, excel-2010

简而言之，我需要根据该列标题将特定范围的行数据排序到正确的列中。例如，如果有五列标记为 A 到 E，并且下面的行中的数据范围从 A 到 E；我需要所有 A 都在 A 列中，所有 B 都在 B 列中等等。示例起始数据：

![例子](https://i.imgur.com/odr66Jh.png)

它应该如何处理排序：

![期望的结果](https://i.imgur.com/8woe7Vh.png)

它还必须能够处理有空单元格的可能性。例如; 如果第一个示例数据在第 3 行中没有 B，则数据不得向左移动，以使 C 位于 B 列等。

其他信息：手工操作不可行 - 超过 450 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:12:01.917

> 它还必须能够处理有空单元格的可能性。

综合以上情况。

**非 VBA 方式**

插入足够多的列，使数据向右移动

![在此处输入图像描述](https://i.stack.imgur.com/QbiMK.png)

接下来在第一行中，复制数据中的值

![在此处输入图像描述](https://i.stack.imgur.com/d0pOl.png)

接下来在单元格中输入`A2`这个公式

```
=IF(COUNTIF($H$2:$L$2,A1)>0,A1,"") 
```

![在此处输入图像描述](https://i.stack.imgur.com/lLMOi.png)

把公式复制到右边

![在此处输入图像描述](https://i.stack.imgur.com/E5G4u.png)

接下来从表格范围中删除“$”并将其添加到单元格中公式的标题中，`A2`以便我们可以将公式复制下来。这就是它的样子

```
=IF(COUNTIF(H2:L2,$A$1)>0,$A$1,"") 
```

同样，您的`B2`公式将如下所示

```
=IF(COUNTIF(H2:L2,$B$1)>0,$B$1,"") 
```

改变它的其余部分

![在此处输入图像描述](https://i.stack.imgur.com/VGA15.png)

如何突出显示单元格`A2:E2`并向下复制公式。

![在此处输入图像描述](https://i.stack.imgur.com/dVZRt.png)

您的最终`Sorted`数据如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/vVwdC.png)

复制列`A:E`并在 Col`A:E`本身上粘贴特殊值，以便公式更改为值，然后删除`Cols H:L`

# c - 如何在C中将uword的低10位转换为十六进制

> ID：16132327
> 
> 赞同：0
> 
> 时间：2013-04-21T14:43:51.077
> 
> 标签：c, hex, converter

我有以下功能：

```
uword ADC_uwReadConv(void) {
  ADCIR = 0;
  return(ADDAT);
} 
```

此函数返回（C164CI 的）AD 转换的结果。低 10 位包含转换结果，而高 4 位标识转换后的模拟通道。

现在，我有一些问题：

*   我现在知道 datatype uword 是什么了。如果有人能给我一个详细的解释，那就太好了。
*   我需要将结果转换为十六进制，我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:43:33.787

这是一个 16 位微处理器，因此字长为 16 位。一个 uword 是一个无符号字；在这种情况下，范围为 0x0000 - 0xFFFF。

“转换”的结果不一定是最好的选择词。如果你确实需要显示值的低 10 位，你可以使用类似的东西

```
printf("%x", ADC_uwReadConv()&0x3F) 
```

# java - IText html页眉/页脚和表格重叠

> ID：16132328
> 
> 赞同：0
> 
> 时间：2013-04-21T14:44:07.290
> 
> 标签：java, html, pdf, itext

我开发了一种将 HTML 文件转换为 .pdf 文件的方法，但是该 HTML 文件在每个页面中都包含重复的页脚和页眉。

问题是内容包含一个大表，当这个表变大时，它会覆盖下一页的页脚和页眉。

这是一个示例 PDF。

![页眉页脚重叠](https://i.stack.imgur.com/H1r2X.png)

# c# - C# 字符串问题

> ID：16132329
> 
> 赞同：1
> 
> 时间：2013-04-21T14:44:20.453
> 
> 标签：c#, .net, string

我有一个名为的多行文本框`txtOutput`，用于接收来自串行端口的消息。每条新消息都是一个新行，代表一个从 1 到最多 4 位的数字。用于在多行文本框中添加数据的方法是追加。我对上述功能没有任何问题，它工作正常。

如果数字小于 1000，我想从最后一条消息中`txtOutput`显示，如果不是，则显示在中。然后两个文本框都会更新。`textBox2``textbox3`

如果有人能举个例子，特别是如何将*最后*一条消息从多行文本框获取到变量以及如果有新值时如何更新文本框，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:51:42.187

You should save the last message (from the serial port) in a variable such as `lastSerialMesssage`. You can then convert this value to an integer and use a `conditional statement` to check if the value is smaller than 1000, if it is, set `TextBox3` to the last serial message value, else set the value to `TextBox2`.

```
string lastSerialMessage = SerialPortMessage;

int lastMessageValue;
Int32.TryParse(lastSerialMessage, out lastMessageValue);

if (lastMessageValue < 1000)
{
   TextBox3.Text = lastSerialMessage;
} else {
   TextBox2.Text = lastSerialmessage;
} 
```

[http://msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:40:38.507

Thanks to all for the suggestions but as I mentioned in my comments, the suggested methods did not work because the content of the string was not accurate and I ended up receiving in the textBox 2 and 3 only part of the data and not always. I have solved the problem (thanks to other advices) using RegEx in this way:

```
 if (txtOutput.Text.Length > 0)
        {
            MatchCollection mc = Regex.Matches(txtOutput.Text, @"(\+|-)?\d+");
            if (mc.Count > 0)
            {
                long value = long.Parse(mc[mc.Count - 1].Value);
                if (value < 1000)
                {
                    textBox2.Text = value.ToString();
                }
                else
                {
                    value = value - 1000;
                    textBox3.Text = value.ToString();
                }
            }
        } 
```

this is working fine and no piece of information are lost.Thanks again for your advices.

# java - 如何将 actionlistener 添加到整个类而不将其单独分配给组件？

> ID：16132333
> 
> 赞同：0
> 
> 时间：2013-04-21T14:44:41.270
> 
> 标签：java, swing, awt, jbutton, actionlistener

例如，假设我有 5 个 JButton

```
b1 = new JButton("Add");
b2 = new JButton("Add 2");
b3 = new JButton("Find Connection");
b4 = new JButton("Read File");
b5 = new JButton("Exit"); 
```

如果我想将 Actionlistener 添加到所有 5 个按钮，我必须为每个按钮执行 5 次。

```
b1.addActionListener(this); 
```

有没有办法在一行代码中将 actionlistener 添加到类中的所有 JButton 中？或者甚至更好地将 actionlistener 添加到类中的每个组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:57:02.257

您可以创建一个循环，将侦听器添加到按钮。

```
 for(int i=0; i<5; i++)
{
    button[i].addActionListener(new ButtonListener());
} 
```

# python - Python-Tkinter，for-loop 创建图片按钮

> ID：16132336
> 
> 赞同：2
> 
> 时间：2013-04-21T14:45:16.970
> 
> 标签：python, image, for-loop, tkinter, ttk

我对编程还是很陌生，所以也许我的问题很简单，甚至很愚蠢。正如标题中所说，我正在尝试编写一个 for 循环，它为某个文件夹中的每个图片创建一个图片按钮小部件。这是我到目前为止所拥有的：

```
import tkinter  
from tkinter import ttk
from tkinter import PhotoImage
import os

root = tkinter.Tk()

list_files = os.listdir(".")

for file in list_files:
    if file.endswith(".gif"):
        drink = PhotoImage(file)
        print(drink)
        b1 = ttk.Button(image=drink, text="Hello", compound="right").pack()
        l1 = ttk.Label(image=drink).pack()

root.mainloop() 
```

现在我得到的是两个小部件，一个标签不显示任何内容，一个按钮显示 Hello。在外壳中，它显示drink1.gif，这是正确的，因为这是我的标准python 文件夹中唯一的gif 文件......

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:15:16.123

1.  用于`PhotoImage(file='path_to_file')`从路径创建图像。
2.  当`PhotoImage`对象被 Python 垃圾收集时，标签被清除。您必须在`drink`某处保存对对象的引用：：http `l1.image = drink`:
    [//effbot.org/pyfaq/why-do-my-tkinter-images-not-appear.htm](http://effbot.org/pyfaq/why-do-my-tkinter-images-not-appear.htm)
3.  `widget.pack()`方法什么都不返回。

```
import tkinter  
from tkinter import ttk
from tkinter import PhotoImage
import os

root = tkinter.Tk()
list_files = os.listdir(".")
for path in list_files:
    if path.endswith(".gif"):
        drink = PhotoImage(file=path)
        b1 = ttk.Button(root, image=drink, text="Hello", compound="right")
        b1.pack()
        l1 = ttk.Label(root, image=drink)
        l1.image = drink
        l1.pack()

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T15:00:15.290

`PhotoImage(file)`创建一个图像并将其*命名为*“drink1.gif”，然后返回。如果您确实想将文件加载到图像中，则需要`PhotoImage(file = file)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:55:38.960

`self.pack`根据 Zetcode 教程，我相信你应该运行。

# php - PHP - COM 在 IIS 中不起作用

> ID：16132340
> 
> 赞同：0
> 
> 时间：2013-04-21T14:45:35.193
> 
> 标签：php, iis, com

我在尝试让 COM 在运行 php 的本地 iis 服务器上工作时遇到问题。这与较早的帖子有关，但现在我发现 COM 根本不加载任何内容。

我试过这个... `new COM( 'ADODB.Connection' )`

这个我也试过... `new COM("WScript.Shell")`

这两行代码都不起作用。它们不会抛出错误，只是简单地死掉并且不会在代码中进一步执行。我尝试在 try-Catch 中捕获异常，但没有返回任何内容。我猜测 COM 有问题，但之前从未使用过它，所以我不知道在哪里寻找修复或启用它。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:07:24.820

从[安装页面](http://php.net/manual/en/com.installation.php)；

> 自 PHP 5.3.15 / 5.4.5 起，此扩展需要在 php.ini 中启用 php_com_dotnet.dll 才能使用这些功能。以前的 PHP 版本默认启用这些扩展。

由于您运行的是 5.3.19，因此您需要`php.ini`使用类似的东西启用它；

```
[COM_DOT_NET] 
extension=php_com_dotnet.dll 
```

# html - 如何在 HTML 中创建模板？

> ID：16132341
> 
> 赞同：11
> 
> 时间：2013-04-21T14:45:38.017
> 
> 标签：html, templates

我开始用纯 HTML 创建网页。我有页眉、主要内容和页脚。主要内容分为左右两部分。除了正确的内容外，所有页面上的所有内容都相同。现在我有大约 15 页。如果我对其他静态页面（页眉、页脚和左侧内容）进行一些更改，这是非常令人厌烦的，因为我必须浏览所有页面。

如何为每个静态区域创建一个 HTML 文件以及如何集成它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T15:00:03.670

基本上，您可以在三个地方执行此操作：

1.  **在构建时**。运行将页面放在一起并输出静态 HTML 的脚本。然后将静态 HTML 上传到服务器。早在 2013 年，我就推荐[过 ttree](http://www.template-toolkit.org/docs/tools/ttree.html)，但现在[静态站点构建器](https://www.staticgen.com)很常见并且功能更强大。我的项目倾向于[Gatsby](https://www.gatsbyjs.com/)（复杂项目）和[Metalsmith](https://metalsmith.io/)（简单项目）。[Jekyll](https://jekyllrb.com/)非常流行（Github 提供了将它与 GH Pages 一起使用的[文档](https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll)）。
2.  **在服务器上运行时**。这可能是一个简单的[SSI](http://bignosebird.com/ssi.shtml)、一个 PHP[包含](http://php.net/include)或一个完整的模板系统（其中有很多，包括[Template Toolkit](http://www.template-toolkit.org/)和[mustache](http://mustache.github.io/)），可能在 MVC 框架内运行（例如[Catalyst](http://www.catalystframework.org/)或[Django](https://www.djangoproject.com/)）。这是最常见的方法，它在进行更改和将结果投入使用之间的时间比在构建时进行模板化的时间更短。
3.  **在客户端运行时**。这增加了对客户端 JavaScript 的依赖（它[可能很脆弱](https://kryogenix.org/code/browser/everyonehasjs.html)，对搜索引擎不友好），所以我不推荐它，除非你已经有了[服务器端或构建时解决方案](http://en.wikipedia.org/wiki/Progressive_enhancement)。例如，[Gatsby是一个静态站点生成器，它构建由静态页面支持的 React 前端。](https://www.gatsbyjs.com)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-21T14:54:09.633

有几种方法可以做到这一点。

如果您纯粹使用 HTML，那么您可以使用“服务器端包含”——这是一个允许您将文件加载到页面中的标签（参见[http://en.wikipedia.org/wiki/Server_Side_Includes](http://en.wikipedia.org/wiki/Server_Side_Includes)） . 托管您的网站的任何人都必须支持这一点。

```
<!--#include virtual="../quote.txt" --> 
```

如果您的网络主机碰巧使用 PHP，您可以使用 include 方法来执行此操作（请参阅[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)）：

```
<?php include('path_to_file/file.htm');?> 
```

这将包括您放置标签的位置的文件。但同样，托管您网站的任何人都需要支持这一点。

还有其他方法可以做到这一点，这是我使用的两种。

# python - Python - 语法错误。TypeError：无法连接“str”和“int”对象

> ID：16132348
> 
> 赞同：-3
> 
> 时间：2013-04-21T14:46:13.647
> 
> 标签：python

我正在尝试编写一些文件分发脚本：该脚本接收要分发为 var 'filename' 的文件/目录，目标路径为 'path'，然后应该运行 srv.list 中列出的所有服务器并 scp 文件/他们每个人的目录。此外，如果用户输入是目录而不是文件，则使用 ropt。

```
#!/usr/bin/python
import os
dirList = os.listdir("./")
srvlist = os.system("cat srv.lst")
filename = raw_input("Please enter file/dir to distribute")
path = raw_input("Please enter destination path")
ropt = ()
for d in dirList:
    if os.path.isdir(d) == True:
        ropt = "-r"
        os.system("/usr/bin/scp " (ropt)"-- "(filename)" "(srvlist)":"(path)
    else:
        os.system("/usr/bin/scp "(filename)" "(srvlist)":"(path)) 
```

输出：

```
Please enter file/dir to distribute: 1.py
Please enter destination path: /root/
Traceback (most recent call last):
  File "1.py", line 13, in ?
    os.system("/usr/bin/scp "+filename+" "+srvlist+":"+path)
TypeError: cannot concatenate 'str' and 'int' objects
[root@g1-lon distribute]# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:53:21.293

```
os.system("/usr/bin/scp "+ ropt+"-- "+filename+" "+srvlist+":"+path) 
```

该`+`符号用于连接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T14:48:24.430

此行绝对无效：

```
os.system("/usr/bin/scp " (ropt)"-- "(filename)" "(srvlist)":"(path) 
```

它缺少一个培训父母。

我不确定您要做什么，但假设您修复了该错误，也许您可​​以使用插值）：

```
os.system("/usr/bin/scp %s -- %s %s:%s" % (ropt, filename, srvlist, path)) 
```

# java - jEdit Java - 比较 Eclipse 中的类路径语法以及如何实现

> ID：16132351
> 
> 赞同：1
> 
> 时间：2013-04-21T14:46:33.987
> 
> 标签：java, swing, jedit

这应该很简单，我正在学习 java 并想使用 jEdit，因为它在我的 linux 机器上很轻。在 Eclipse 中，我可以选择在构建路径下添加外部库，并单击。所以在 Eclipse 中，我的 jar 路径是 /opt/andev/lib。当你移植到 jEdit 时，这个语法会去哪里？我已经搜索过，但我不认为我正确地表达了我的问题，所以我提供了 eclipse 的比较功能。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:22:25.477

使用[`org.gjt.sp.jedit.textarea.StandaloneTextArea`](http://www.jedit.org/api/org/gjt/sp/jedit/textarea/StandaloneTextArea.html)“将一个嵌入`jEdit` `TextArea`到其他应用程序中”。API 包含一个示例。您需要查看`jedit.props`“可以设置的属性”。

附录：糟糕，我误解了这个问题。您可能会查看一个以 Java 为中心的[插件](http://plugins.jedit.org/list.php?category=5)，例如`Classpath`“维护全局和特定于项目的 Java 类路径”。

# c++ - 渲染到屏幕时如何计算对象的高度？

> ID：16132353
> 
> 赞同：0
> 
> 时间：2013-04-21T14:46:45.710
> 
> 标签：c++, direct3d

我正在开发一个 C++ 项目，我想将一个 3D 对象（一个字符）渲染到屏幕上。

我可以通过 API 得到这个对象的高度，它等于 1.6666 ，我不知道它是什么意思。

我知道由directX（SCR_W，SCR_H）设置的视口，正交投影矩阵（由directX API创建，参数：视图宽度，视图高度，近和远）。

当它被渲染到屏幕上时，我能得到这个对象的正确高度吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:22:48.093

坐标 [0, 1.6666] 将乘以 Orthographic 投影矩阵得到齐次坐标（[-1, -1] 是屏幕左下角， [1, 1] 是右上角）。然后将其乘以视口尺寸/2，得到最终的屏幕坐标。

听起来您的正交投影已经创建以匹配屏幕分辨率。这意味着 1.6666 将对应于变换后的 1.6666 像素。

# delphi - 一种在 OnClientConnect 事件中识别套接字的方法？

> ID：16132355
> 
> 赞同：0
> 
> 时间：2013-04-21T14:46:53.900
> 
> 标签：delphi, winsock

我有一个客户端，我希望服务器（从高级）在 OnClientConnect 事件中识别他，这可能吗？

我需要在 TClientSocket 的 OnConnect 事件中做些什么吗？

例如，如果我从 onconnect（客户端）事件发送一个字符串，它将到达 onclientread 事件（服务器端），而不是我想知道是否有任何方法可以使它到达 onclientconnect 事件。

如果有更简洁的方法，请告诉我。;]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:19:04.400

如果您使用`TServerSocket`in 非阻塞模式（其默认模式），那么您必须等待`OnClientRead`事件进行任何读取。您可以使用该`TCustomWinSocket.Data`属性来跟踪您是否已阅读第一个字符串。您可以在事件中初始化该跟踪，`OnClientConnect`然后在事件中更新它`OnClientRead`。如果其他代码需要访问客户端，在读取第一个字符串之前不要对其进行任何操作。

要考虑的另一件事 - 想象一下，如果客户端连接并且没有发送任何内容。如果您的服务器在该事件中阻止自己等待字符串，这将为 DOS 攻击创建一个入口点。该`OnClientConnect`活动不是阅读的好地方。

如果您绝对需要在`OnClientConnect`事件中进行读取，则改为切换`TServerSocket`到线程阻塞模式。

# php - php：从日期范围中排除日期

> ID：16132356
> 
> 赞同：2
> 
> 时间：2013-04-21T14:47:00.777
> 
> 标签：php, html, date, datepicker

我试图弄清楚如何从我设置的日期范围中排除某些日期。日期范围可以正常工作，如下所示：

```
<?php $newBegin = new DateTime('6/30/2010');
$newEnd = new DateTime('7/12/2010');
$newEnd = $newEnd->modify( '+1 day' );

$newDaterange = new DatePeriod($newBegin, new DateInterval('P1D'), $newEnd);

foreach($newDaterange as $newDate){
    echo $newDate->format("jnY") . " ";
} ?> 
```

打印结果如下：

```
3062010 172010 272010 372010 472010 572010 672010 772010 872010 972010 1072010 1172010 1272010 
```

但是客户需要从每个日期范围中排除某些日期，所以我最好像这样输入日期：`7/2/2010 7/4/2010 8/4/2010`并将它们排除在日期范围之外。这是可能吗？我不想排除周末之类的，我可以这样做，只需输入一组日期并将它们从日期范围中排除。任何建议将不胜感激！

* * *

更新：

正如@hek2mgl 要求的那样，我添加了`var_dump()`一个`get_field('test_select'));`

```
var_dump(get_field('test_select')); 
```

结果：

```
array(2) { [0]=> string(8) "7/2/2010" [1]=> string(8) " 
```

* * *

完整代码（不工作）：

```
$newBegin = DateTime::createFromFormat('n/j/Y', '6/30/2010');
$newEnd = DateTime::createFromFormat('n/j/Y', '7/12/2010');
$newEnd = $newEnd->modify( '+1 day' );

$exclude = array();

// stores dates like so: 7/2/2010 7/3/2010
foreach(get_field('test_select') as $datestring) {
    $exclude []= new DateTime($datestring);
}

$newDaterange = new DatePeriod($newBegin, new DateInterval('P1D'), $newEnd);

foreach($newDaterange as $newDate){
    if(!in_array($newDate, $exclude)) {
        echo $newDate->format("jnY") . " ";
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:53:04.837

无法使用`DatePeriod`该类排除某个范围内的多个日期。但是你可以和对象`in_array()`一起使用。`DateTime`这可能导致如下代码：

```
$newBegin = new DateTime('6/30/2010');
$newEnd = new DateTime('7/12/2010');
$newEnd = $newEnd->modify( '+1 day' );

$exclude = array(
    new DateTime('7/2/2010'),
    new DateTime('7/4/2010'),
    new DateTime('8/4/2010')
);

$newDaterange = new DatePeriod($newBegin, new DateInterval('P1D'), $newEnd);

foreach($newDaterange as $newDate){
    if(!in_array($newDate, $exclude)) {
        echo $newDate->format("jnY") . " ";
    }   
} 
```

输出：

```
3062010 172010 372010 572010 672010 772010 872010 972010 1072010 1172010 1272010 
```

* * *

更新：

在评论中，您询问了如何将传入的日期字符串列表转换为`DateTime`可在`$exclude`数组中使用的对象。

例子：

```
$exclude = array();

// stores dates like so: 7/2/2010 7/3/2010
foreach(get_field('test_select') as $datestring) {
    $exclude []= new DateTime::createFromFormat('n/j/Y', $datestring);
} 
```

而已。:)

# ide - Aptana - 窗口的黑色（不是编辑器！）

> ID：16132357
> 
> 赞同：2
> 
> 时间：2013-04-21T14:47:02.267
> 
> 标签：ide, aptana, color-scheme

我有个问题。是否可以将 Aptana Studio 3 窗口框架、选项菜单等变黑？如果您使用黑色主题没有太大区别，如果周围的一切仍然是灰色的。我正在开发 Win 7，甚至在操作系统上使用另一种主题颜色，而不是在 Aptana 中改变颜色。

# c++ - 不同类型参数的重载函数？

> ID：16132363
> 
> 赞同：1
> 
> 时间：2013-04-21T14:47:33.377
> 
> 标签：c++, operators, overloading

我正在考虑重载函数，这不是一种更快的执行方式吗，例如，成瘾而不用不同的参数和输出（int，float double ecc ...）定义函数很多次。

更易理解：

```
// 2 ints addiction

int addic(int & a, int & b) {
  int c;
  c = a + b;
  return c;
}

// 1 int + 1 float

float addic(int & a, float & b) {
  float c;
  c = a + b;
  return c;
} 
```

不是更快的方法吗？我必须定义所有情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:11:31.407

这（为了避免代码重复）是模板存在的目的之一；这是一个示例，说明如何实现您用作示例的函数（在 C++11 中）：

```
#include <type_traits> // for std::common_type
template<class T1, class T2>
std::common_type<T1, T2>::type addic(const T1& a, const T2& b)
{
    return a + b;
} 
```

`T1`将是您传递给函数的第一个参数的类型，而`T2`将是第二个参数的类型。

`std::common_type<T1, T2>::type`是 T1 和 T2 都可以转换为的类型。例如，如果您添加 a`float`和 an `int`，则类型将为`float`。

编辑：如果你想用向量做一些事情，你可以这样做：

```
template<class T>
void MyFunction(std::vector<T>& v)
{
    // do something with the vector v, for example:
    v.push_back(5);
} 
```

# python - Python - 对带有条件的字典列表求和

> ID：16132370
> 
> 赞同：1
> 
> 时间：2013-04-21T14:48:20.973
> 
> 标签：python, dictionary, sum, conditional-statements

假设我有一个清单：

```
l = [{"num1":3, "num2":8, "num3":5, "type":"A"}, {"num1":2, "num2":5, "num3":5, "type":"B"}, {"num1":5, "num2":2, "num3":1, "type":"A"}, {"num1":4, "num2":4, "num3":9, "type":"B"} 
```

我想创建 2 个字典： sumA:

```
{"num1":8, "num2":10, "num3":6} 
```

总和B：

```
{"num1":6, "num2":9, "num3":14} 
```

我想让它尽可能简单易读。我设法以一种可怕的方式使用太多变量来做到这一点......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:54:40.877

这可以使用一些[list 和 dict comprehensions](http://www.youtube.com/watch?v=pShL9DCSIUw)相当容易地完成。

```
from operator import itemgetter
from itertools import groupby

l = [{"num1": 3, "num2": 8, "num3": 5, "type": "A"},
     {"num1": 2, "num2": 5, "num3": 5, "type": "B"},
     {"num1": 5, "num2": 2, "num3": 1, "type": "A"},
     {"num1": 4, "num2": 4, "num3": 9, "type": "B"}]

wanted_values = {"num1", "num2", "num3"}

type_getter = itemgetter("type")
groups = [(group, list(items)) for group, items in 
          groupby(sorted(l, key=type_getter), type_getter)]

print({group: {k: sum(map(itemgetter(k), items)) for k in wanted_values}
       for group, items in groups}) 
```

这给了我们：

```
{'B': {'num2': 9, 'num3': 14, 'num1': 6}, 
 'A': {'num2': 10, 'num3': 6, 'num1': 8}} 
```

我们按类型对值进行排序，然后将它们分成组[`itertools.groupby()`](http://docs.python.org/3.3/library/itertools.html#itertools.groupby)（制作项目列表而不是生成器，因为我们需要多次迭代它们）。

然后，我们使用嵌套的 dict 理解来创建我们需要的数据，将项目中的值相加并将它们分配给一个组。

这是一个灵活的解决方案，可以扩展到不止两种类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:12:14.210

我会使用嵌套理解。

```
lst = [{"num1": 3, "num2": 8, "num3": 5, "type": "A"},
     {"num1": 2, "num2": 5, "num3": 5, "type": "B"},
     {"num1": 5, "num2": 2, "num3": 1, "type": "A"},
     {"num1": 4, "num2": 4, "num3": 9, "type": "B"}]

sum_by_a = {key: sum(d[key] for d in lst if d['type'] == 'A')
    for key in ("num1", "num2", "num3")} 
```

或者，对于泛型类型，

```
sum_by_type = lambda t: {
    key: sum(d[key] for d in lst if d['type'] == t)
        for key in ("num1", "num2", "num3")}

 sum_by_b = sum_by_type(B) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:16:16.867

我会那样做，使用[`Collections.Counter`](http://docs.python.org/3.3/library/collections.html#collections.Counter)：

```
from collections import Counter
from functools import reduce

l = [{"num1":3, "num2":8, "num3":5, "type":"A"},
     {"num1":2, "num2":5, "num3":5, "type":"B"},
     {"num1":5, "num2":2, "num3":1, "type":"A"},
     {"num1":4, "num2":4, "num3":9, "type":"B"}]

def remove_keys(d, keys):
    return {i: j for i, j in d.items() if i not in keys}

def add_dicts(dicts):
    return reduce(lambda a, b: a+b,  map(Counter, dicts))

tmp = {}
for d in l:
    tmp[d["type"]] = tmp.get(d["type"], []) + [remove_keys(d, ["type"])]

result = {key: add_dicts(value) for key, value in dict(tmp).items()} 
```

这使：

```
{'A': Counter({'num2': 10, 'num1': 8, 'num3': 6}), 
'B': Counter({'num3': 14, 'num2': 9, 'num1': 6})} 
```

# ruby-on-rails - Angular + Rails 应用程序在尝试获取子页面时挂起整个浏览器

> ID：16132372
> 
> 赞同：1
> 
> 时间：2013-04-21T14:48:28.417
> 
> 标签：ruby-on-rails, angularjs, asset-pipeline, pushstate

我正在使用 Angular 和 Rails 编写应用程序。我有后备`ApplicationController`：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :intercept_html_requests

  private

  def intercept_html_requests
    render('pages/index') if request.format == Mime::HTML
  end
end 
```

和路由器一样：

```
betly.config(function($routeProvider, $locationProvider) {
  $locationProvider.html5Mode(true);

  $routeProvider.when('/', {
    templateUrl: 'assets/tournaments.html',
    controller: 'tournamentController'
  }).when('/aaa', {
    templateUrl: 'assets/tournaments.html',
    controller: 'tournamentController'
  }).when('/matches/:matchId',{
    templateUrl: 'assets/matchDetails.html',
    controller: 'matchController'
  }).otherwise({
    redirectTo:'/'
  });
}); 
```

`views/layouts/application.html.erb`：

```
<!DOCTYPE html>
<html lang="en" ng-app>
  <head>
    <meta charset='utf-8' />
    <title>BetLy</title>
    <%= stylesheet_link_tag    "application", media: "all" %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <%= yield %>
    <%= javascript_include_tag "application" %>
  </body>
</html> 
```

当我试图去`/matches/10`浏览器无限下载资产时。为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T12:54:59.170

问题出在路线文件中。当您尝试捕获 Rails 应用程序中的所有路线时，您不应该添加`/`路线，因此它应该如下所示：

```
match '*any', to: 'controller#method' 
```

代替

```
match '/*any', to: 'controller#method' 
```

# android - MediaRecorder recording in 15 FPS only

> ID：16132379
> 
> 赞同：6
> 
> 时间：2013-04-21T14:48:58.620
> 
> 标签：android

I'm making a camera app and i have a problem, i can't set the frame rate of the video, my code looks like this I am setting the frame rate to 30, but it ignores it and it records in 15, i know that on some devices it's not setting the actual frame rate but the suggested frame rate, and the phone decides based on the lighting, but i recorded outside in light and it was still recording in a low fps, probably i'm doing something wrong

```
MediaRecorder recorder;
Camera camera;
SurfaceView preview;
SurfaceHolder holder;
boolean isRecording = false;
String TAG = "Evolution Camera";
int frameRate = 30;

public static final int MEDIA_TYPE_IMAGE = 1;
public static final int MEDIA_TYPE_VIDEO = 2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    setContentView(R.layout.camera_view);

    preview = (SurfaceView) findViewById(R.id.camera_preview);

 // Add a listener to the Capture button
    ImageButton captureButton = (ImageButton) findViewById(R.id.btn_capture);
    captureButton.setOnClickListener(
        new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                record();
            }
        }
    );
}
private boolean prepareVideoRecorder(){

    camera = getCameraInstance();

    recorder = new MediaRecorder();

    // Step 1: Unlock and set camera to MediaRecorder
    camera.unlock();
    recorder.setCamera(camera);

    // Step 2: Set sources
    recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
    recorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

    recorder.setVideoFrameRate(frameRate);

    // Step 4: Set output file
    recorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());

    // Step 5: Set the preview output
    recorder.setPreviewDisplay(preview .getHolder().getSurface());

    // Step 6: Prepare configured MediaRecorder
    try {
        recorder.prepare();
    } catch (IllegalStateException e) {
        Log.d(TAG, "IllegalStateException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    } catch (IOException e) {
        Log.d(TAG, "IOException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    }
    return true;
}

void record()
{

    if (isRecording) {
        // stop recording and release camera
        recorder.stop();  // stop the recording
        releaseMediaRecorder(); // release the MediaRecorder object
        camera.lock();         // take camera access back from MediaRecorder

        // inform the user that recording has stopped
        //setCaptureButtonText("Capture");
        isRecording = false;
    } else {
        // initialize video camera
        if (prepareVideoRecorder()) {
            // Camera is available and unlocked, MediaRecorder is prepared,
            // now you can start recording
            recorder.start();
            setParameters();

            // inform the user that recording has started
            //setCaptureButtonText("Stop");
            isRecording = true;
        } else {
            // prepare didn't work, release the camera
            releaseMediaRecorder();
            // inform user
        }
    }
}

void setParameters()
{
// set Camera parameters
   Camera.Parameters params = camera.getParameters();

   if (params.getMaxNumMeteringAreas() > 0){ // check that metering areas are supported
       List<Camera.Area> meteringAreas = new ArrayList<Camera.Area>();

       Rect areaRect1 = new Rect(-100, -100, 100, 100);    // specify an area in center of image
       meteringAreas.add(new Camera.Area(areaRect1, 600)); // set weight to 60%
       Rect areaRect2 = new Rect(800, -1000, 1000, -800);  // specify an area in upper right of image
       meteringAreas.add(new Camera.Area(areaRect2, 400)); // set weight to 40%
       params.setMeteringAreas(meteringAreas);

   }
   params.setFocusMode(Camera.Parameters.FOCUS_MODE_INFINITY);

   camera.setParameters(params);
}

    @Override
    protected void onPause() {
        super.onPause();
        if (isRecording) {
            recorder.stop();  // stop the recording
            releaseMediaRecorder(); // release the MediaRecorder object
            camera.lock(); 
            isRecording = false;
        }
        else {

            releaseMediaRecorder();
        }  
        releaseCamera();       
    }

    private void releaseMediaRecorder(){
        if (recorder != null) {
            recorder.reset();   // clear recorder configuration
            recorder.release(); // release the recorder object
            recorder = null;
            camera.lock();           // lock camera for later use
        }
    }

    private void releaseCamera(){
        if (camera != null){
            camera.release();        // release the camera for other applications
            camera = null;
        }
    }

/** Create a file Uri for saving an image or video */
private static Uri getOutputMediaFileUri(int type){
      return Uri.fromFile(getOutputMediaFile(type));
}

/** Create a File for saving an image or video */
private static File getOutputMediaFile(int type){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_DCIM), "Evolution");
    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");

    } else if(type == MEDIA_TYPE_VIDEO) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "VID_"+ timeStamp + ".mp4");
        Log.d("MyCameraApp", "File created "+ mediaStorageDir.getPath().toString());
    } else {
        return null;
    }

    return mediaFile;
}

public static Camera getCameraInstance(){
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
    }
    catch (Exception e){
        // Camera is not available (in use or does not exist)
    }
    return c; // returns null if camera is unavailable
}

@Override
public void onPreviewFrame(byte[] data, Camera camera) {
    // TODO Auto-generated method stub

}
@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    // TODO Auto-generated method stub

}
@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}
@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    if (isRecording) {
        recorder.stop();
        isRecording = false;
    }
    recorder.release();

} 
```

The default camera app records at 24 fps in the same conditions

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T19:03:09.817

我用这个解决了

```
Camera.Parameters params = camera.getParameters();
    params.setPreviewFpsRange(24000, 30000);
camera.setParameters(params); 
```

现在我得到 22-23 fps（我猜是因为现在是晚上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T13:19:59.243

这取决于 AutoExposure 参数。在所有光照条件下使用固定帧速率（来自 API 14，Android 4.0）：

```
Camera.Parameters p = camera.getParameters();
p.setPreviewFpsRange( 30000, 30000 ); // 30 fps
if ( p.isAutoExposureLockSupported() )
     p.setAutoExposureLock( true );
camera.setParameters( p ); 
```

# c# - C# 结构数组

> ID：16132381
> 
> 赞同：-1
> 
> 时间：2013-04-21T14:49:09.763
> 
> 标签：c#, arrays, struct

我有这个项目，我正在做，我需要 C# 结构的帮助。我正在使用控制台应用程序。

我所追求的是创建一个可以在数组中使用的结构。到目前为止，我所拥有的是：

```
 public struct array
            {
                public static int id;
                public static int x;
                public static int y;
            };
    public static  array[] test = new array[amount]; 
```

然后我想要做的是像这样设置变量。

```
test[i].id = 1;
test[i].x = 1;
test[i].y = 1; 
```

但是它不起作用。如果有人有任何想法，将不胜感激。

谢谢亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:52:34.253

您需要将字段设为非`static`.
`static`字段与类型相关联；不是每个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:12:39.870

解决此问题的另一种方法是：

```
 array[] test = new array[amount];
        array temp = new array();

        temp.id = 1;
        temp.x = 1;
        temp.y = 1;

        test[i] = temp; 
```

并去除静电。

希望对你有帮助

# git - git 发布管理模型：总是从主分支发布？

> ID：16132382
> 
> 赞同：0
> 
> 时间：2013-04-21T14:49:11.613
> 
> 标签：git, git-svn

我正在阅读[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)这似乎很有希望。

我正在寻找这篇文章中缺少的一些澄清：

1.  版本总是由大师制作的——对吗？我可能有一个修补程序分支或发布分支，但发布是由 master 制作的。因此，在发布之前将分支合并到 master，标记它然后发布。让我的生活变得简单，但我不确定这也是 gitflow 所推荐的。
2.  由于这个确切的原因，标签总是存在于主分支上。每个标签标记一个发布点。这也行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:02:51.280

1.  Yes
2.  Yes

This is a quote from that [post](http://nvie.com/posts/a-successful-git-branching-model/), in the section "Finishing a release branch":

> When the state of the release branch is ready to become a real release, some actions need to be carried out. First, the release branch is merged into master (since every commit on master is a new release by definition, remember). Next, that commit on master must be tagged for easy future reference to this historical version

# javascript - changing DIV visibility with JavaScript

> ID：16132383
> 
> 赞同：12
> 
> 时间：2013-04-21T14:49:27.553
> 
> 标签：javascript, html, visibility

EDIT: Since the question has became quite popular I will fix the problem so it will be working code example. The original problem is still listed, But the **code works**.

i am trying to show a div after pressing a button but this wont work, any idea why is that?

```
<form action="insert.php" method="POST" align="right" id="post_form">
<input type="button" value="click me" onClick="show()">
<div id="show_button">  fdsfds </div><br>
</form>

#show_button{
 visibility:hidden;
}

function show(){
  // alert("cheked the button - worked");
  document.getElementById("show_button").style.visibility= 'visible' ;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-21T14:51:58.733

将您的 CSS 更改为：

```
#show_button{
 display: none
} 
```

而你在你的 javascript 中：

```
function show(){
  //alert("cheked the button - worked");
  document.getElementById('show_button').style.display= 'block' ;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T15:03:43.263

错别字 `document.getElementById(show_button)`改成 `document.getElementById("show_button")`

```
function show(){
  document.getElementById("show_button").style.visibility= "visible" ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T14:52:24.063

尝试这个 ：

```
function show(){
  //alert("cheked the button - worked");
  document.getElementById("show_button").style.visibility= "visible" ;
} 
```

或者

```
function show(){
  //alert("cheked the button - worked");
  document.getElementById(show_button).style.display= "inline" ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T14:58:57.660

`document.getElementById(show_button)`-：语法错误，缺少引号“”！

# java - Integer to String conversion?

> ID：16132387
> 
> 赞同：0
> 
> 时间：2013-04-21T14:49:52.900
> 
> 标签：java, string, integer

I have a problem with Integer.toString conversion. This code outputs "ololo". Why? And how can I convert integer to string right?

```
 String str1= "1";
 String str2=Integer.toString(1);
 if (str1!=str2)Log.d("myLogs","ololo"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:51:40.787

You must compare `String`s using `equals` method, not `==` nor `!=` operators since they will compare the `String` object references.

```
if (!str1.equals(str2)) {
    Log.d("myLogs","ololo");
} 
```

Note that when you use `Integer#toString` you're creating a new `String` that is not in the `String` JVM pool, thus getting the error described.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:52:11.213

字符串比较必须用equals来完成。
`if (!str1.equals(str2))...`

当你使用`!=`你得到引用相等（不等式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:52:51.690

尝试[`String.valueOf(1);`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#valueOf%28int%29)将整数更改为字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T14:52:59.640

改为使用`!str1.equals(str2)`。

你不应该使用`==`or`!=`字符串

# arrays - 在 Symfony 中更新多个条目

> ID：16132388
> 
> 赞同：0
> 
> 时间：2013-04-21T14:49:53.877
> 
> 标签：arrays, loops, symfony, foreach

在我的 Symfony 项目中，我想一次更新多个数据库条目。

起点是我想更新现有条目的日期和值数组：

```
$updates = Array ( [0] => Array ( [date] => 2007 [value] => 5 )
                   ...
                   [4] =>Array ( [date] => 2010 [value] => 8 )); 
```

我通过 foreach 得到 $date 和 $value：

```
 foreach($updates AS $update)
 {
     $date = $update['date'];
     $value = $update['value'];
 } 
```

我的问题是从 $updates 获取 [date] 和 [value] 值以正确更新条目。由于某种原因，在更新所有条目时，仅使用 $updates 中的最后一个数组，如下所示：

```
 foreach($repo->customQuery($parameter1,..., $parameter5) AS $obj)
           {
               $obj->setThis($date)
                   ->setThat($value);
               $em->persist($obj);
           }
           $em->flush(); 
```

我错过了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:47:07.233

[教义 - 只用一个 save() 插入多行](https://stackoverflow.com/questions/5415725/doctrine-insert-multiple-rows-with-just-one-save)

如果您要处理大型数据集，请注意内存使用情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T08:36:36.013

我的问题的解决方案是使用一个 for 循环而不是两个 foreach。

```
 $statistic = (array with entities to be updated);
    $update = (array with new values);

    for($i = 0; $i < count($update); $i++)
    {
        $valStatistic = $statistic[$i];
        $valDate = $update[$i]['fromDate'];
        $valValue = $update[$i][$value];

        $valStatistic->setThis($valDate)
                     ->setThat($valValue);

        $em->persist($valStatistic);   
    }
    $em->flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:10:18.897

根据评论编辑：

```
 foreach($repo->customQuery($parameter1,..., $parameter5) AS $obj)
       {
           $obj->setThis($date)
               ->setThat($value);
           $em->persist($ob); 
           $em->flush();
       } 
```

# c# - Same Wpf app on server and client possible?

> ID：16132392
> 
> 赞同：1
> 
> 时间：2013-04-21T14:50:03.943
> 
> 标签：c#, wpf, silverlight, tcp, webserver

I run an application (can run as console app or windows service) that frequently makes updated data available either through tdf data blocks, callbacks, or other means such as publishing to RedisDB channels. (I will chose only one means out of the three mentioned depending on which framework to go with in the end).

I like those updates reflected in a Wpf frontend gui application that runs on the same machine as the core application that outputs said data. At the same time I want to be able to run the same wpf application on a client machine that receives said data on a client machine that may not even reside in the same network but connect through tcp, browser, or other means over the Internet.

What is the most optimal framework that accomplishes that and please keep in mind that I want to implement the mvvm pattern within the wpf application. The data that the wpf application will need are chart data point updates, grid updates, and other status messages. The wpf application should also be able to submit data back to the core application through human interaction through controls within the wpf application.

Any recommendations which layers and frameworks would most optimally solve my problem? I want to stick to a wpf application, not silver light and not asp.net. I could consider running the wpf app within a browser but it has to run within google chrome not only ms ie.even the wpf frontend on the same machine as the core app can run within a browser if that is the optimal solution though I would prefer an installed windows wpf application.

Any recommendations and guidance?

Thanks

# google-maps - Autocomplete restrict results

> ID：16132393
> 
> 赞同：0
> 
> 时间：2013-04-21T14:50:14.790
> 
> 标签：google-maps, google-maps-api-3

Reading the documentation of google maps, geocoding service, I see that to restrict the search results, for example in the country, I have to enter

```
http://maps.googleapis.com/maps/api/js?key=MY_API_KEY&components=country:IT&sensor=true 
```

But it does not work! If I type in "Via" returns results like:

![results](https://i.stack.imgur.com/qyeX8.png)

I forget to do something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:59:13.557

尝试这个

```
var input = document.getElementById('searchTextField');
var options = {
types: ['(cities)'],
componentRestrictions: {country: 'fr'}
};

autocomplete = new google.maps.places.Autocomplete(input, options); 
```

# oracle - iSQL Plus：打印到屏幕

> ID：16132394
> 
> 赞同：0
> 
> 时间：2013-04-21T14:50:26.627
> 
> 标签：oracle, plsql, database, isql

如何启用 iSQL*Plus 终端将输出打印到屏幕？

例如一个简单的 hello world 块：

![iSQL plus 终端](https://i.stack.imgur.com/3Mh6c.png)

注意“hello world”应该如何打印到屏幕上，但只确认没有编译错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:54:16.187

您需要启用 dbms outout 并设置服务器输出。

```
exec dbms_output.enable(1000000); 
```

并在您的程序顶部粘贴以下内容：

```
set serveroutput on 
```

# bash - getopts 将选项视为前一个选项的参数

> ID：16132395
> 
> 赞同：0
> 
> 时间：2013-04-21T14:50:33.583
> 
> 标签：bash, getopts

我有以下脚本：

```
#!/bin/bash

USER="NONE"
LOST=0
AVG=0

while getopts ":pmu:" OPTION; do
    case $OPTION in
        u)
            USER=$OPTARG
            ;;
        p)
            LOST=1
            ;;
        m)
            AVG=1
            ;;
        \?)
            echo "Invalid argument: -$OPTARG"
            exit 1
            ;;
        :)
            echo "-$OPTARG requires an argument."
            exit 1
            ;;
    esac
done

echo "$USER-$LOST-$AVG"

exit 0 
```

我希望`-u`选择接受一个论点。该脚本正确识别无效选项以及何时`-u`在没有参数的情况下调用。但不幸的是，当我输入：

`myscript -u -m -p`

它打印：

`-m-1-0`

因此，它`-m`用作`-u`参数并忽略`-m`选项本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:59:16.100

您告诉[`getopts`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/getopts.html)该`-u`选项后跟一个选项参数。 `-m`是一个字符串值；它以符号开头的事实`-`对其作为选项参数的地位无关紧要；您可以`-`在选项参数值的开头使用。

所以，你的观察是正确的。那是预期的设计；这就是[`getopt()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getopt.html)函数的工作方式，它是 POSIX [Utility Syntax Guidelines](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap12.html#tag_12_02)的实现——实际上是这些指南的稍微宽松的版本。如果您不喜欢它，请使用 以外的其他东西`getopts`，但您将与系统作斗争。

请注意，虽然 POSIX`getopt()`在理论上允许“可选选项参数”，但实际上，只有命令行上的最后一个选项可以有可选选项参数，这使得它们基本上无用。

完全有可能设计出行为不同且基本满足实用程序语法指南的选项解析系统；许多人已经做到了。事实上，GNU[`getopt`](http://www.manpagez.com/man/1/getopt/)程序是一个扩展的实现，这可能是您应该看到的——但它有一个非常不同的调用来获得行为（另请参阅在 bash shell 脚本中[使用`getopts`来获取长短命令行选项](https://stackoverflow.com/questions/402377/using-getopts-in-bash-shell-script-to-get-long-and-short-command-line-options/)）。这些系统都是不同的，并且简洁而明确地描述所需的选项处理行为通常很复杂。有关详细信息，请参见[Solaris CLIP — 命令行界面范例](http://www.unix.com/man-page/OpenSolaris/1/Intro/)^*。

^(* Google 搜索词“solaris clip”为您提供电影“Solaris”的电影剪辑。一个有效的搜索词是“Solaris 命令行界面范例”。)

# backbone.js - 如何渲染由其他视图中的事件触发的视图？

> ID：16132402
> 
> 赞同：0
> 
> 时间：2013-04-21T14:51:25.253
> 
> 标签：backbone.js, backbone-views

我正在尝试使用backbone.js 创建即时搜索。我打算在一个视图中保留搜索框。其他视图中的全部内容。如果用户在搜索视图中键入任何内容，则另一个视图中的集合会自动更新。我不想要代码，但如果方法是对是错或者最好的方法是什么，我需要一些评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:22:14.553

在初始化时，您可以让搜索框和搜索结果视图都引用同一个集合。在搜索字段的键位/更改时，您调用集合上的方法（或触发事件）以更新搜索词并调用 fetch。然后，您将搜索结果视图设置为在集合的更改事件上自动重新呈现。

# android - 相对布局文本字段未正确对齐

> ID：16132404
> 
> 赞同：0
> 
> 时间：2013-04-21T14:51:29.023
> 
> 标签：android

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dip" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="1dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Name"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:id="@+id/facesheet_detail_firstandLastName"            
            android:layout_weight="1.20"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
           android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Street1"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_street1"            
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="E-Mail"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_email"            
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="35dp"
        android:layout_marginRight="5dip"
        android:padding="1dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.60"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Gender"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_gender"            
            android:layout_width="0dp"
            android:layout_weight="1.40"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.60"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Street 2"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_street2"            
            android:layout_width="0dp"
            android:layout_weight="1.20"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="SSN"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_ssn"            
            android:layout_width="0dp"
            android:layout_weight="1.20"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:layout_marginTop="70dp"
        android:padding="1dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="DOB"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_dob"            
            android:layout_width="0dp"
            android:layout_weight="1.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="City"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_city"            
            android:layout_width="0dp"
            android:layout_weight="1.30"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.70"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Religion"
            android:textColor="#000000" />

        <TextView
             android:id="@+id/facesheet_detail_religion"   
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text=""
            android:textColor="#000000" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:layout_marginTop="105dp"
        android:padding="1dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.60"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Phone"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_phone"            
            android:layout_width="0dp"
            android:layout_weight="1.15"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.60"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="State"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_state"            
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Race"
            android:textColor="#000000" />

        <TextView
             android:id="@+id/facesheet_detail_race"   
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text=""
            android:textColor="#000000" />

    </LinearLayout>

     <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:layout_marginTop="140dp"
        android:padding="1dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.60"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Mobile"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_mobile"            
            android:layout_width="0dp"
            android:layout_weight="1.35"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.70"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Zip Code"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_zipCode"            
            android:layout_width="0dp"
            android:layout_weight="1.15"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.70"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Ethnicity"
            android:textColor="#000000" />

        <TextView
             android:id="@+id/facesheet_detail_ethnicity"   
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

    </LinearLayout>
</RelativeLayout> 
```

我有一个问题，我必须映射像这种制服这样的东西。

```
Name: "Kevin"        State: "VA"        Email: "Kevin@Kevin.com 
```

但是当我尝试在模拟器中查看输出时，布局似乎很混乱，附件是相同的屏幕截图。谁能告诉我我应该给什么确切的空间以使其均匀。

![在此处输入图像描述](https://i.stack.imgur.com/rAlaY.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:56:38.447

您可以使用属性

```
android:layout_alignLeft="@+id/idOfViewToAlignWith"
android:layout_alignRight="@+id/idOfViewToAlignWith" 
```

对齐边缘`Views`

您还拥有诸如

```
android:layout_alignCenter
android:layout_centerInParent="true" 
```

查看[RelativeLayout 文档](http://developer.android.com/reference/android/widget/RelativeLayout.html)，了解哪些属性最适合您

此外，这是一大堆`Views`。我建议注释掉除一两行和列之外的所有行和列，并从最少的数量开始，`Views`直到你把它们弄对，这样你就不会经常改变它们。在使用这些新属性后，您可能还需要`padding`稍微尝试一下。由于这些是嵌套的，您显然`LinearLayouts`会希望在 parent 中使用这些属性`LinearLayouts`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:00:50.007

如果您希望行以相同的方式对齐，请确保`TextView`在每个`LinearLayout`s 上为每个 , 赋予相同的权重。

例如：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dip" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="1dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Name"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:id="@+id/facesheet_detail_firstandLastName"            
            android:layout_weight="1.20"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
           android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Street1"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_street1"            
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="35dp"
        android:layout_marginRight="5dip"
        android:padding="1dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Gender"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_gender"            
            android:layout_width="0dp"
            android:layout_weight="1.20"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />

        <TextView
            android:layout_width="0dp"
            android:layout_weight="0.50"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:text="Street 2"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/facesheet_detail_street2"            
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:textColor="#000000" />
    </LinearLayout>
</RelativeLayout> 
```

注意 "Name" 和 "Gender"`TextView`的权重相同，因为我希望它们对齐。与每个的第二个相同`TextView`，`LinearLayout`依此类推。

# ruby-on-rails - [Rails]Page caching on deployment

> ID：16132405
> 
> 赞同：0
> 
> 时间：2013-04-21T14:51:30.303
> 
> 标签：ruby-on-rails, caching, nginx, capistrano

I've actually a problem with my deployed rails 3 app. It is hosted on a linux server using Nginx. But I have a problem.
When I update my app with Capistrano and I reload the page in my browser, the page is still on the website's previous version. That until I reload the page deleting the cache with "CTRL + R". Or if I directly enter the IP adress of my server I don't have any problem. Is it a DNS problem ?
Thank you.

# gwt - 为什么延迟 TextBox.setFocus(true) 有效？

> ID：16132406
> 
> 赞同：1
> 
> 时间：2013-04-21T14:51:32.470
> 
> 标签：gwt

在帮助加快用户工作流程的过程中，我想将焦点设置为[TextBox](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/TextBox.html)。我从简单地将行添加`queryBox.setFocus(true);`到视图方法开始。然而，这并没有奏效。有效的是推迟通话：

```
 Scheduler.get().scheduleDeferred(new ScheduledCommand() {

     @Override
     public void execute() {
        queryBox.setFocus(true);
     }
  }); 
```

为什么它起作用了，与我的第一次尝试相比？

## 更新

从下面 Baadshah 提供的参考资料来看，这似乎是一个[现有的 GWT 问题](https://code.google.com/p/google-web-toolkit/issues/detail?id=1849)，根据该问题，“基本上，除非它大部分时间都包含在 DeferredCommand 中，否则 setFocus() 将不起作用。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:22:53.183

是的，queryBox.setFocus(true); 如果`queryBox`尚未附加到`DOM.` The`TextBox`需要附加到 the `document`，则将无法工作`focus`。

你是对的，虽然这对我们来说是不可见的，但`browser`加载确实需要时间。`DOM``delay`

我们完全不知道`load`（我的意思是附加到文件）的`textbox`完成时间。

因此，通过使用`schedular`我们让我们自己等到`some time`渲染完成，应用`focus`on render `textbox`。

这是一个对此感兴趣的[**讨论**](https://groups.google.com/forum/m/?fromgroups#!topic/google-web-toolkit/R6Zp3I5rJGk)。

# html - 在我的网站上正确的 Html Float

> ID：16132411
> 
> 赞同：-6
> 
> 时间：2013-04-21T14:51:57.007
> 
> 标签：html, css, css-float

我做一个网站，它就像一个软件搜索引擎。但这是网站中的 HTML 或 CSS 问题。请查看给定的 url。
[http://www.azelead.tk/search.php?search=skype](http://www.azelead.tk/search.php?search=skype)
如果您在浏览器中看到搜索结果内容，那么它。您的浏览器支持此功能，如果不支持，请查看问题所在以及如何解决此问题.
FOR CODE：进入这个网站并右键单击，然后单击显示源代码。
这是所有的 css 和 html 代码。
**更新 ：**

这是一个CSS代码

```
 #navBar{
margin:20px 0px 20px 0px;}  
 #navBar a{
display:block;
width:134.7px;
text-align:center;
text-decoration:none;
font-size:16px;
color:#FFF;
background-color:#06F;
font-family:Arial, Helvetica, sans-serif;
border:1px solid #0099FF;
padding:10px 0 10px 0;
float:left;}
 #navBar a:hover, #result a:hover{
background-color:#FFF;
color:#06F;}
 #downDiv{
margin-top:10px;
border:1px solid #00BBFF;
overflow:hidden;}   
 #searchContent{
margin-top:30px;
border:2px solid #0099FF;
background-color:#FFFFCC;
padding:7px 7px 7px 7px;
width:600px;
color:#0D2E57;
float:left;} 
```

这是html代码。

```
<body>
  <div id="navBar">
            <b><a href="index.html">Search</a>
            <a href="dailysoft.html">Daily Soft</a>
            <a href="addsite.html">Add Site</a>
            <a href="contactus.html">Contact us</a>
            <a href="TermsAndConditions.html">Terms & Cond.</a>
            <a href="javascript:feedback('RFB');">FeedBack us</a>
            <a href="javascript:errorReport('RER');">Error Report</a></b>
        </div>
    <div id="downDiv">
            <div id="searchContent">
            I want this div in down side of the nav bar<br />
            other content goes here any sample content.<br />
    </div>
 <div>
 This is another div which I want on the right hand side<br />
 of the div search content.
 </div>     

 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:58:15.377

任何一个：

1.  `float:left; display:block`从您的导航栏链接中删除，然后添加-`display:inline-block`您可能需要调整一些大小或删除它们之间的所有空格，但它可以工作。

2.  或：添加`clear:both`到 downDiv 元素

# sql - 从具有相同 ID 的不同表中获取值

> ID：16132417
> 
> 赞同：0
> 
> 时间：2013-04-21T14:52:11.183
> 
> 标签：sql

从不同的表调用时，我正在努力处理一些 sql 查询。

我试图从 2 个表中获得一些结果。在这种情况下，我想从 user.id=1 中获取值以及 user.id=1 所关注的用户的值。

但它总是最终只给我所有具有相同 follow_id 的用户，或者仅来自 user.id = 1。

我在想这样的事情，但是这个查询给出了空的结果。

```
SELECT 
user.email, user.username, tweets.message, tweets.date, userdetails.profile_img,           userdetails.firstname, userdetails.lastname, following.id, following.user_id, following.follow_id
FROM user
JOIN userdetails ON user.id = userdetails.user_id
JOIN tweets ON userdetails.user_id = tweets.user_id
JOIN following ON following.follow_id
WHERE user.id = following.follow_id AND user.id = 1 
```

表。关注id | 用户 ID | follow_id

```
Tweets
user_id|id|date|message

user
id|email|password|username

userdetails
id|firstname|lastname|profile_img|user_id|about 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:20:16.393

```
SELECT
user.email, user.username, tweets.message, tweets.date, userdetails.profile_img,userdetails.firstname, userdetails.lastname, '' as id, '' as user_id, '' as follow_id
FROM user
JOIN userdetails ON user.id = userdetails.user_id
JOIN tweets ON userdetails.user_id = tweets.user_id
WHERE user.id = 1
UNION ALL
SELECT 
user.email, user.username, tweets.message, tweets.date, userdetails.profile_img,userdetails.firstname, userdetails.lastname, following.id, following.user_id, following.follow_id
FROM user
JOIN userdetails ON user.id = userdetails.user_id
JOIN tweets ON userdetails.user_id = tweets.user_id
JOIN following ON user.id = following.user_id and following.follow_id = 1 
```

此查询将提供来自用户 1 的所有推文。以及来自我相信的关注用户 1 的用户的所有推文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:15:32.960

如果这是我的问题，我将使用以下查询开始我的故障排除：

```
select count(*)
from user
where user.id = 1 
```

如果返回一个大于 0 的数字，我会运行这个：

```
select count(*)
from user u inner join userdetails ud on u.id = ud.id
where u.id = 1 
```

然后我将继续一次添加其他位，直到查询返回 0。当它返回时，我会知道为什么。

# node.js - Express.js：将默认的 public/images 文件夹更改为另一个目录（在 Express.js 之外）

> ID：16132421
> 
> 赞同：4
> 
> 时间：2013-04-21T14:52:18.110
> 
> 标签：node.js, express

在 Express.js 中，我想将我的图像/视频保存在 Express.js 项目文件夹之外，这意味着不在 public/images 中。例如，现在我的媒体位于 Express.js 项目文件夹中：

```
/home/myName/Project/public/images 
```

我希望我的图片/视频能在

```
/home/myName/allMyMedia 
```

我的 app.configure() 函数现在看起来像这样：

```
app.configure(function(){
app.set('port', process.env.PORT || 3000);
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(expressValidator);
app.use(express.methodOverride());
app.use(express.cookieParser('your secret here'));
app.use(express.session());
app.use(app.router);
app.use(require('less-middleware')({ src: __dirname + '/public' }));
app.use(express.static(path.join(__dirname, 'public')));
}); 
```

我试图将 '/public' 更改为 '../public' 但没有奏效。我还玩了一点其他公开的路径声明，但据我所知，我不知道如何解决这个问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T15:27:47.950

如果您想处理来自您的媒体文件夹的一些请求和来自您的公共文件夹的其他请求，请调用`static`两次，如[https://github.com/visionmedia/express/blob/master/examples/static-files/index.js](https://github.com/visionmedia/express/blob/master/examples/static-files/index.js)所示（有好评）

```
var express = require('../..');
var app = express();

app.use(express.logger('dev'));
app.use(express.static(__dirname + '/public'));
app.use(express.static('/home/myName/allMyMedia/'));
app.use(app.router);

app.listen(3000);
// GET /images/foo.jpg will first check ./public/images/foo.jpg,
// then /home/myName/allMyMedia/images/foo.jpg,
// then it will attempt to match a routing function to '/images/foo.jpg'
// As usual, as soon as something sends a response, no further functions are called.
// Reorder the app.use stack to change this order. 
```

# java - Log4j 不打印到文件或标准输出

> ID：16132424
> 
> 赞同：8
> 
> 时间：2013-04-21T14:52:29.430
> 
> 标签：java, file-io, log4j, stdout

我刚刚下载了 Log4j 并正在尝试对其进行测试。[我从这里](http://www.mkyong.com/logging/log4j-log4j-properties-examples/)复制了一个示例属性文件以打印到标准输出和一个文件，但它都没有。

这是我的代码：

```
public class ClientTest {
    //static CanvasFrame canvas = new CanvasFrame("Web Cam");

    static Logger logger = Logger.getLogger(ClientTest.class);
    public static void main(String [] args) {

        BasicConfigurator.configure();

        logger.debug("HERPADERP");

        Client bob = new Client("localhost", 6789);
        bob.startRunning();

    }
} 
```

和 log4j.properties ：

```
# Root logger option
log4j.rootLogger=INFO, file, stdout

# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=Log/log.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n 
```

log.log 文件已创建，但没有写入任何内容...

谁能发现我哪里出错了？谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:54:26.457

您的记录器级别设置为 INFO。您正在使用调试语句。改变

`log4j.rootLogger=INFO, file, stdout`

到

`log4j.rootLogger=DEBUG, file, stdout`

# c# - 将树视图绑定到对象而不是列表 This is maybe a very simple question, still I don't know how to solve this. I have a model in my MVVM application which I want to bind to a tree view. However I can only bind the tree view to a list of item 问问题 问问题 2013-04-21T14:52:34.373 965 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. This is maybe a very simple question, still I don't know how to solve this. I have a model in my MVVM application which I want to bind to a tree view. However I can only bind the tree view to a list of items (or in my case an ObservableCollection). This is the model I currently use: /// <summary> /// Represents an group a character can belong to. /// </summary> public class OrganisationBase : ModelBase<OrganisationBase> { /// <summary> /// The name. /// </summary> private string name; /// <summary> /// The parent organization. /// </summary> private ObservableCollection<OrganisationBase> parentOrganizations; /// <summary> /// Gets or sets the name of the organization. /// </summary> public string Name { get { return this.name; } set { this.name = value; this.NotifyPropertyChanged(p => p.Name); } } /// <summary> /// Gets or sets the parent organization. /// </summary> public ObservableCollection<OrganisationBase> ParentOrganizations { get { return this.parentOrganizations; } set { this.parentOrganizations = value; this.NotifyPropertyChanged(p => p.ParentOrganizations); } } } Now my question is: How can I bind this model to my tree view without using Observable collections. I want to do this, because there is no need for an ObservableCollection since every Organisation can only have one parent. Or, how can I bind the following code to my tree view: /// <summary> /// Represents an group a character can belong to. /// </summary> public class OrganisationBase : ModelBase<OrganisationBase> { /// <summary> /// The name. /// </summary> private string name; /// <summary> /// The parent organization. /// </summary> private OrganisationBase parentOrganizations; /// <summary> /// Gets or sets the name of the organization. /// </summary> public string Name { get { return this.name; } set { this.name = value; this.NotifyPropertyChanged(p => p.Name); } } /// <summary> /// Gets or sets the parent organization. /// </summary> public OrganisationBase ParentOrganizations { get { return this.parentOrganizations; } set { this.parentOrganizations = value; this.NotifyPropertyChanged(p => p.ParentOrganizations); } } } This is the code of the tree view I currently use: <TreeView ItemsSource="{Binding Path=Character.CharacterAllegiances.MemberOf}"> <TreeView.ItemContainerStyle> <Style TargetType="{x:Type TreeViewItem}"> <Setter Property="IsExpanded" Value="True" /> </Style> </TreeView.ItemContainerStyle> <TreeView.ItemTemplate> <HierarchicalDataTemplate ItemsSource="{Binding ParentOrganizations}"> <TextBlock Text="{Binding Name}" /> </HierarchicalDataTemplate> </TreeView.ItemTemplate> </TreeView> Note: The Organisation property is part of a character model. Still when I use ObservableCollections everything displays fine. However as asked above I want to discard this ObservableCollections. Greetings Ruhrpottpatriot How to add substitution tags to the subject of the email in SendGrid using the xsmtp-api with the php library I am trying to set up the name of my client in the subject of the email. This is very crucial for my application, and from what I've read in the SendGrid API docs it is quite possible!. Info - Substitution tags will work in the Subject line as well as the body of the email. The problem is that I dob't seem to manage to accomplish this. At first I though that perhaps it's because I am already using the %name% sub within the body of the email, so I've created a new substitution parameter name %nameSubject%, and yet, it won't work. I use the following code, and the rest of the parameters within the email are workigng just fine: /** @description Wrapper method in order to handle possible exception due to programmer\ maintainer errors. A part of a small wrapper class that I have designed to allow 1-line comfortable use of the the SendGrid and transport classes. @returns int - 1, unless there is an internal error, or an exception thrown */ public function execute(){ if(!class_exists('SendGrid') || !class_exists('SendGrid\Mail')){ throw new exception('Dependency exception SendGrid or SendGrid\Mail are not included'); } if(!isset($this->mailingList) && empty($this->mailingList) || sizeof($this->mailingList) == 0){ throw new exception('Cannot send an email to an empty set of addresses'); } if(!isset($this->subject, $this->body) || empty($this->subject) || empty($this->body)){ throw new exception('Cannot send an email without both a subject and a body'); } $sendgrid = new SendGrid(SENDGRID_USER, SENDGRID_PASSWORD); // $this->importMailList(); foreach($this->mailingList as $key => $val) { $this->mail->addTo($key, $val); } $this->mail-> setFrom($this->fromMail)-> setSubject($this->subject)-> setText($this->text)-> setHtml($this->body); if(preg_match('/%name%/', $this->body) && !array_filter($this->mailingList, 'is_int') ){ $this->mail->addSubstitution("%name%", array_values($this->mailingList)); } return $sendgrid->smtp->send($this->mail); } Any help is much appriciated!. c#.netxamlmvvm 4 2 回答 2 This answer is useful 0 TreeView 需要一个项目集合来构建它的节点，这显然是正确的方法并且非常不言自明。 将树视图绑定到单个对象仅在该对象将其自身公开为集合时才有效，例如实现IEnumerable树视图将使用IEnumerable实现来填充数据的方式。 或者，您可以只绑定到针对对象的集合，例如 <TreeView ItemsSource="{Binding object.SomeCollection}" /> 于 2013-04-21T14:56:00.090 回答 This answer is useful 0 您需要使用 HierarchicalDataTemplate。 绑定数据（如上面的文件夹和文件），可以参考这篇文章： WPF Treeview: data binding of heterotypes data using CompositeCollection class 于 2013-04-21T15:08:35.680 回答 Related 1 php - paypal IPN的ssl地址SSL是什么 2 java - 为什么这个 Expect Exception Junit 测试不起作用？ 4 c++ - 有没有办法返回 null 而不是自定义对象（不是指针）？ 1 objective-c - Sqlite 目标 c 单例数据库连接在执行准备好的语句之前关闭 2 css - css：要改变什么以使尺寸变大？ 1 ruby-on-rails - Rails：如何使用 Ajax Jquery 打印错误消息？ 1 gap-system - 需要帮助才能在 GAP 中正确调用代码 1 python - 在 Python 中搜索 Unicode 字符 1 php - HEREDOC 中的静态函数调用结果 0 kineticjs - KineticJS - 部分舞台创建像素错误并拒绝事件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16132426
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, .net, xaml, mvvm

This is maybe a very simple question, still I don't know how to solve this.

I have a model in my MVVM application which I want to bind to a tree view. However I can only bind the tree view to a list of items (or in my case an ObservableCollection). This is the model I currently use:

```
/// <summary>
/// Represents an group a character can belong to.
/// </summary>
public class OrganisationBase : ModelBase<OrganisationBase>
{
    /// <summary>
    /// The name.
    /// </summary>
    private string name;

    /// <summary>
    /// The parent organization.
    /// </summary>
    private ObservableCollection<OrganisationBase> parentOrganizations;

    /// <summary>
    /// Gets or sets the name of the organization.
    /// </summary>
    public string Name
    {
        get
        {
            return this.name;
        }

        set
        {
            this.name = value;
            this.NotifyPropertyChanged(p => p.Name);
        }
    }

    /// <summary>
    /// Gets or sets the parent organization.
    /// </summary>
    public ObservableCollection<OrganisationBase> ParentOrganizations
    {
        get
        {
            return this.parentOrganizations;
        }

        set
        {
            this.parentOrganizations = value;
            this.NotifyPropertyChanged(p => p.ParentOrganizations);
        }
    }
} 
```

Now my question is: How can I bind this model to my tree view without using Observable collections. I want to do this, because there is no need for an ObservableCollection since every Organisation can only have one parent.

Or, how can I bind the following code to my tree view:

```
/// <summary>
/// Represents an group a character can belong to.
/// </summary>
public class OrganisationBase : ModelBase<OrganisationBase>
{
    /// <summary>
    /// The name.
    /// </summary>
    private string name;

    /// <summary>
    /// The parent organization.
    /// </summary>
    private OrganisationBase parentOrganizations;

    /// <summary>
    /// Gets or sets the name of the organization.
    /// </summary>
    public string Name
    {
        get
        {
            return this.name;
        }

        set
        {
            this.name = value;
            this.NotifyPropertyChanged(p => p.Name);
        }
    }

    /// <summary>
    /// Gets or sets the parent organization.
    /// </summary>
    public OrganisationBase ParentOrganizations
    {
        get
        {
            return this.parentOrganizations;
        }

        set
        {
            this.parentOrganizations = value;
            this.NotifyPropertyChanged(p => p.ParentOrganizations);
        }
    }
} 
```

This is the code of the tree view I currently use:

```
<TreeView ItemsSource="{Binding Path=Character.CharacterAllegiances.MemberOf}">
  <TreeView.ItemContainerStyle>
    <Style TargetType="{x:Type TreeViewItem}">
      <Setter Property="IsExpanded"
              Value="True" />
    </Style>
  </TreeView.ItemContainerStyle>
  <TreeView.ItemTemplate>
    <HierarchicalDataTemplate ItemsSource="{Binding ParentOrganizations}">
      <TextBlock Text="{Binding Name}" />
    </HierarchicalDataTemplate>
  </TreeView.ItemTemplate>
</TreeView> 
```

Note: The Organisation property is part of a character model. Still when I use ObservableCollections everything displays fine. However as asked above I want to discard this ObservableCollections.

Greetings Ruhrpottpatriot

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:56:00.090

TreeView 需要一个项目集合来构建它的节点，这显然是正确的方法并且非常不言自明。

将树视图绑定到单个对象仅在该对象将其自身公开为集合时才有效，例如实现`IEnumerable`树视图将使用`IEnumerable`实现来填充数据的方式。

或者，您可以只绑定到针对对象的集合，例如

```
<TreeView ItemsSource="{Binding object.SomeCollection}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:08:35.680

您需要使用 HierarchicalDataTemplate。

![将文件夹对象绑定到树视图](https://i.stack.imgur.com/Gu0T7.png) ![将文件对象绑定到树视图](https://i.stack.imgur.com/rwY4c.png)

绑定数据（如上面的文件夹和文件），可以参考这篇文章： [WPF Treeview: data binding of heterotypes data using CompositeCollection class](http://xinyustudio.wordpress.com/2012/09/27/wpf-treeview-data-binding-of-heterogeneous-types-of-data-datatemplate-and-hierarchicaldatatemplate/)

# php - 如何使用带有 php 库的 xsmtp-api 将替换标签添加到 SendGrid 中的电子邮件主题

> ID：16132427
> 
> 赞同：4
> 
> 时间：2013-04-21T14:52:35.003
> 
> 标签：php, sendgrid

我正在尝试在电子邮件的主题中设置我的客户名称。这对我的应用程序非常重要，从我在[SendGrid API 文档](http://sendgrid.com/docs/API_Reference/SMTP_API/substitution_tags.html)中读到的内容来看 ，这很有可能！。

> 信息 - 替换标签将在主题行以及电子邮件正文中起作用。

问题是我似乎无法做到这一点。起初我认为这可能是因为我已经在电子邮件正文中使用了 %name% sub，所以我创建了一个新的替换参数名称 %nameSubject%，但是它不起作用。

我使用以下代码，电子邮件中的其余参数都可以正常工作：

```
 /**
    @description Wrapper method in order to handle possible exception due to programmer\ maintainer errors.
    A part of a small wrapper class that I have designed to allow 1-line comfortable use of the the SendGrid and transport classes.
   @returns int - 1, unless there is an internal error, or an exception thrown
    */
public function execute(){
    if(!class_exists('SendGrid') || !class_exists('SendGrid\Mail')){
        throw new exception('Dependency exception SendGrid or SendGrid\Mail are not included');
    }
    if(!isset($this->mailingList) && empty($this->mailingList) || sizeof($this->mailingList) == 0){
        throw new exception('Cannot send an email to an empty set of addresses');
    }
    if(!isset($this->subject, $this->body) || empty($this->subject) || empty($this->body)){
        throw new exception('Cannot send an email without both a subject and a body');
    }

    $sendgrid = new SendGrid(SENDGRID_USER, SENDGRID_PASSWORD);

    // $this->importMailList();
    foreach($this->mailingList as $key => $val) {   
        $this->mail->addTo($key, $val);
    }
    $this->mail->
    setFrom($this->fromMail)-> 
    setSubject($this->subject)->
    setText($this->text)->
    setHtml($this->body);
    if(preg_match('/%name%/', $this->body) && !array_filter($this->mailingList, 'is_int') ){
        $this->mail->addSubstitution("%name%", array_values($this->mailingList));
    }
    return $sendgrid->smtp->send($this->mail);

} 
```

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:12:37.007

应为主题或正文单独设置替换标签。尝试这样的事情：

```
$this->mail->
setFrom($this->fromMail)-> 
setSubject($this->subject)->addSubstitution("%name%", array("Harry", "Bob"))->
... 
```

您可以将我使用的示例数组替换为您自己的数组值。我们也有一些 PHP 代码示例在我们的文档中显示替换标记。（[http://sendgrid.com/docs/Code_Examples/php.html#-Using-Substitutions](http://sendgrid.com/docs/Code_Examples/php.html#-Using-Substitutions)）

# php - 用php形成图像

> ID：16132428
> 
> 赞同：0
> 
> 时间：2013-04-21T14:52:41.277
> 
> 标签：php, image, converter

我想从这样的表格中拍照

[http://users.atw.hu/onlinemoney/news.php](http://users.atw.hu/onlinemoney/news.php)然后你点击`prrof - x`然后你得到一张图片

[http://users.atw.hu/onlinemoney/proof/tulipptc_1.jpg](http://users.atw.hu/onlinemoney/proof/tulipptc_1.jpg)

我如何使用 PHP 来模仿它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:15:34.787

如果你想在图像上写一些东西。试试 PHP-GD 或 PHP-Imagick。

[http://www.php.net/manual/en/function.imageloadfont.php](http://www.php.net/manual/en/function.imageloadfont.php) [http://www.php.net/manual/en/book.imagick.php](http://www.php.net/manual/en/book.imagick.php)

但我猜您正在尝试将 html 页面（表单？）转换为图像。请参阅此主题以找到答案：

[将网页转换为图像](https://stackoverflow.com/questions/968201/convert-web-page-to-image)

# c++ - pushGLStates 在使用时返回 GL_INVALID_OPERATION

> ID：16132435
> 
> 赞同：1
> 
> 时间：2013-04-21T14:53:11.677
> 
> 标签：c++, opengl, user-interface, sfml

我正在尝试使用 SFML 为我的游戏制作 gui，因此建议使用 glpush 和 pop 状态。并输入我的命令以在 push 和 pop 之间绘制 gui。所以这就是我所拥有的：

```
void Engine::run()
{
while (App.isOpen())
{
    while (c_FPSClock.getElapsedTime().asSeconds() < 1.f/60)
    {
    }

    // Set the active window before using OpenGL commands
    // It's useless here because active window is always the same,
    // but don't forget it if you use multiple windows or controls
    App.setActive();

    App.pushGLStates();
    App.draw(text);
    App.popGLStates();

    // Clear color and depth buffer
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    getInput();
    update();
    render();

    App.display();
}
} 
```

但这让我的游戏变得非常糟糕：

```
- The input isn't working like before at all
- The player is rendering below the map 
```

我要做的就是在屏幕底部绘制一些文本以显示健康状况和一个矩形！哈哈。

我也在控制台中收到这些错误

> RenderTarget.cpp <255> 中的内部 OpenGL 调用失败：GL_INVALID_OPERATION，当前状态下不允许指定的操作

游戏使用 C++ OpenGL 和 SFML 构建，用于渲染窗口和 gui

# javascript - Connect js library Joomla 3

> ID：16132436
> 
> 赞同：0
> 
> 时间：2013-04-21T14:53:20.033
> 
> 标签：javascript, joomla

I change

```
JHTML::script("dhtmlxgrid/dhtmlxcommon.js",'media/com_telecomax/js/'); 
```

to

`JHTML::script("com_telecomax/dhtmlxgrid/dhtmlxcommon.js");` in **\administrator\components\mycomponent\views\info\tmpl\default.php**

but it don't connect script

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:24:41.017

尝试使用以下方法：

```
$doc = JFactory::getDocument();
$doc->addScript(JURI::root() . "components/com_telecomax/dhtmlxgrid/dhtmlxcommon.js"); 
```

希望这可以帮助

# java - 数组列表 索引出界

> ID：16132438
> 
> 赞同：0
> 
> 时间：2013-04-21T14:53:21.947
> 
> 标签：java

我是编程的初学者，我正在做一个笔记程序。您可以添加、编辑、删除笔记。该程序正在运行，但我想让它创建一个文件，其中注释保存如下：`Header§Note;`所以我必须使用`String.split()`2 次。笔记已成功加载并且拆分也可以，但是当我想设置变量时它不起作用。

我希望你能帮助我。

```
private void splitFile(String input) {

    ArrayList<String> listOfNotes = new ArrayList<String>(Arrays.asList(input.split(";")));
    String[] notes;

    for(int i=0; i<listOfNotes.size(); i++) {
        notes = listOfNotes.get(i).split("§");
        System.out.println(notes[0] + " " + notes[1]);
        organizers.get(i).setHeader(notes[0]);
        organizers.get(i).setNote(notes[1]);
    }       
} 
```

我得到一个`IndexOutOfBoundException`何时`organizers.get(i).setHeader(notes[0]);`被调用。这是`setHeader`方法。

```
public void setHeader(String s) {
    header = s;
} 
```

编辑：这是 Organizer 类：

```
public class Organizer {    

private String header = new String("");
private String note = new String("");

public Organizer() {
    this("", "");
}
public Organizer(String h, String n) {
    header = h;
    note = n;
}

public String getHeader() {
    return header;
}

public String getNote() {
    return note;
}

public void setHeader(String s) {
    header = s;
}

public void setNote(String s) {
    note = s;
}

public String toString() {
    return String.format("\n\n%s\n\n%s", header, note);
} 
```

}

这是一个例外：

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at java.util.ArrayList.rangeCheck(Unknown Source)
at java.util.ArrayList.get(Unknown Source)
at com.ThalerPhilipp.Menu.splitFile(Menu.java:135)
at com.ThalerPhilipp.Menu.readNotesFromFile(Menu.java:116)
at com.ThalerPhilipp.Menu.showMenu(Menu.java:17) 
```

## 在 com.ThalerPhilipp.Main.main(Main.java:9)

编辑：我让它工作了。我让它工作了。我更换了

```
organizers.get(i).setHeader(notes[0]);
organizers.get(i).setNote(notes[1]); 
```

和

```
organizers.add(new Organizer(notes[0], notes[1])); 
```

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:57:28.860

您尝试访问不存在的索引`organizers`。

请记住，您遍历所有元素`listOfNotes`并尝试`organizers`为每个元素更新一个元素。

所以`organizers`长度必须至少为`listOfNotes.size()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:59:53.537

这是因为

`organizers.size() != listOfNotes.size()`

即要么没有被初始化，要么它的大小与大小`organizers`不匹配`listOfNotes`

# javascript - How to pan google maps upon scroll position

> ID：16132440
> 
> 赞同：0
> 
> 时间：2013-04-21T14:53:32.897
> 
> 标签：javascript, jquery, html, google-maps

I have this idea for an website where the background is made up of google maps. As the user scrolls the map has to "move"/pan to a specific location. I've found a script that will set google maps as my background so this is not the issue.

Now my question is: how do I make the map "move"/pan depending on scroll position?

Any help is greatly appreciated :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:08:41.540

使用`.panTo`API 的方法（[https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map)）并从滚动事件中调用它

就像是

```
$(document).on('scroll', function(){
    // get current scroll position
    var currentScroll = $('element that scrolls').scrollTop();

    // calculate a new map point based on the currentScroll value
    var latLng = new google.maps.LatLng(somelat, somelong);

    // pan to it
    map.panTo(latLng); // assuming map refers to the map object
}); 
```

# iphone - 是否可以在 iOS 应用程序中使用 safari？

> ID：16132449
> 
> 赞同：1
> 
> 时间：2013-04-21T14:54:25.907
> 
> 标签：iphone, ios

是否可以在应用程序内使用具有完整功能的 Safari？（尤其是地址栏+搜索+标签）？如果是这样，我还可以访问地址栏内容+网站标题吗？如果没有，是否有任何其他“浏览器框架”可以完全在应用内使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:04:21.077

您可以使用 UIWebView 和 UIWebViewDelegate 为自己编写一个自定义的应用内浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:03:02.783

我认为您不能直接访问 Safari.app。

您可以打开一个到 Safari 的链接，但用户需要暂时离开您的所有内容。

此外，您可以在您的应用程序中创建一个 Safari 克隆。您需要创建一个 UIWebView，它应该不会那么困难。

# highcharts - Highcharts 两个系列，每个都是堆积面积

> ID：16132451
> 
> 赞同：2
> 
> 时间：2013-04-21T14:54:29.377
> 
> 标签：highcharts

我正在尝试制作一个总共有 3 个系列的图表，其中 3 个系列中的 2 个与第三个系列堆叠在一起。在示例中，红色和绿色图表都与蓝色图表堆叠在一起。有什么办法吗？

![图表](https://i.stack.imgur.com/d1IPp.png)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:09:04.157

找到了解决方案，这是一个小提琴：

[http://jsfiddle.net/WCmGC/](http://jsfiddle.net/WCmGC/)

```
series: [
    // first stack 
     {
        type: 'areaspline',
        data: [30, 176.0, 135.6, 148.5, 216.4],
        stack: 0,
        name: 'pos pos'
    },
    {
        type: 'areaspline',
        data: [29.9, 71.5, 106.4, 129.2, 144.0],
        stack: 0,
        name: 'neu pos'
    }, 
    // second stack 
    {
        type: 'areaspline',
        data: [148.5, 216.4, 30, 176.0, 135.6],
        stack: 1,
        name: 'neu neg'
    },
    {
        type: 'areaspline',
        data: [29.9, 71.5, 106.4, 129.2, 144.0],
        stack: 1,
        name: 'neu neg'
    }] 
```

# android - onItemClickListener 在 AlertDialog 中没有给出任何事件，在 DialogFragment 中工作正常

> ID：16132452
> 
> 赞同：0
> 
> 时间：2013-04-21T14:54:32.603
> 
> 标签：android, dialog

我已经构建了一个 DialogFragment 用于显示自定义 ListView 然后选择一个条目，它工作正常。除了我无法删除标题栏。我可以使用 setStyle(....) 删除标题，但白色字段仍然存在。我在[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)上阅读并得出结论，使用 AlertDialog 将是一个解决方案。我转换了我的课程，实际上让它工作了，但我没有从 OnItemClickListener 得到任何事件......

这是工作的DialogFragment：

```
package com.SverkerSbrg.Spendo.Transaction.InsertTransaction.CategoryPicker;

import com.SverkerSbrg.Spendo.R;
import com.SverkerSbrg.Spendo.Category.CategoryList.CategoryList;
import com.SverkerSbrg.Spendo.Category.CategoryList.CategoryListChild;
import com.SverkerSbrg.Spendo.Category.Datastructure.Category;
import com.SverkerSbrg.Spendo.general.interfaces.CategoryReceiver;

import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

public class CategoryPickerFragment extends DialogFragment implements OnItemClickListener{
private CategoryReceiver receiver;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.category_picker_fragment, container);
    CategoryList categoryList = (CategoryList) view.findViewById(R.id.clCategories);
    categoryList.setOnItemClickListener(this);

    this.getDialog().setTitle(this.getActivity().getResources().getString(R.string.CategoryPicker_DialogHeader));

    return view;
}
public void setCategoryReceiver(CategoryReceiver receiver){
    this.receiver = receiver;
}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Category category = ((CategoryListChild)view).getCategory();
    receiver.setCategory(category);
    this.dismiss();
}

} 
```

这是警报对话框：

```
package com.SverkerSbrg.Spendo.Tester;

import com.SverkerSbrg.Spendo.R;
import com.SverkerSbrg.Spendo.Category.CategoryList.CategoryList;
import com.SverkerSbrg.Spendo.Category.CategoryList.CategoryListChild;
import com.SverkerSbrg.Spendo.Category.Datastructure.Category;
import com.SverkerSbrg.Spendo.general.interfaces.CategoryReceiver;

import android.app.AlertDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

public class AlertDialogTest extends DialogFragment implements OnItemClickListener{
private CategoryReceiver receiver;
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    // Get the layout inflater
    LayoutInflater inflater = getActivity().getLayoutInflater();

    // Inflate and set the layout for the dialog
    // Pass null as the parent view because its going in the dialog layout
    View view = inflater.inflate(R.layout.category_picker_fragment, null);

    builder.setView(inflater.inflate(R.layout.category_picker_fragment, null));
    AlertDialog ad = builder.create();

    CategoryList categoryList = (CategoryList) view.findViewById(R.id.clCategories);
    categoryList.setOnItemClickListener(this);

    return ad;
}

public void setCategoryReceiver(CategoryReceiver receiver){
    this.receiver = receiver;
}
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    System.out.println("adfafefawefaewfae");
    Category category = ((CategoryListChild)view).getCategory();
    receiver.setCategory(category);
    this.dismiss();
}
} 
```

最后是我如何称呼它们：

```
//      FragmentActivity a = (FragmentActivity) this.getContext();
//      AlertDialogTest adt = new AlertDialogTest();
//      adt.show(a.getSupportFragmentManager(), "CategoryPicker");
//      adt.setCategoryReceiver(this);

    CategoryPickerFragment cpfFragment = new CategoryPickerFragment();
    FragmentActivity a = (FragmentActivity) this.getContext();
    cpfFragment.show(a.getSupportFragmentManager(), "CategoryPicker");
    cpfFragment.setCategoryReceiver(this); 
```

帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:06:48.583

您正在使用两种不同的视图，

即`categoryList`您设置`setOnItemClickListener`的视图与您用于警报对话框的视图不同。 `inflater.inflate(R.layout.category_picker_fragment, null);`这将创建视图的副本。

你已经设置

```
 builder.setView(inflater.inflate(R.layout.category_picker_fragment, null)); 
```

但是您正在从此处夸大的另一个视图中获取类别列表

```
 View view = inflater.inflate(R.layout.category_picker_fragment, null); 
```

所以两种不同的看法。尝试像这样使用

```
View view = inflater.inflate(R.layout.category_picker_fragment, null);
    builder.setView(view ); 
```

这将解决您的问题

# vb.net - 如何使用日期记录在sql中唯一选择月份？

> ID：16132455
> 
> 赞同：1
> 
> 时间：2013-04-21T14:54:42.513
> 
> 标签：vb.net, sql-server-2008

我当前的系统有问题。我的数据库中有一个名为的表`Payment`。这是桌子的图片

![在此处输入图像描述](https://i.stack.imgur.com/SwoRU.png)

如您所见，我对 3 月和 4 月的利息余额有相同的详细信息。但我希望`resultset`值是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/gJiPz.png)

我只想要`currentIntBal`每个月的一个细节。顺便说一句，我还需要知道如何将日期转换`varchar`为日期数据类型本身，因为该字段`lastPaymentDate`是`varchar`数据类型我怎么可能做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:02:11.147

```
with monthlyPayments as
(
  select *
    , rownum = row_number() over (partition by year(lastPaymentDate), month(lastPaymentDate) order by lastPaymentDate)
  from payments
)
select lastPaymentDate
  , currentIntBal
from monthlyPayments
where rownum = 1 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/c8a99/2)。

在这种情况下，我只是每月支付第一笔款项。

**在附加信息后编辑：**

```
with monthlyPayments as
(
  select *
    , rownum = row_number() over (partition by year(convertedDate), month(convertedDate) order by convertedDate)
  from payments p
    cross apply (select convertedDate = cast(replace(lastPaymentDate,'-','') as date)) c
)
select lastPaymentDate = convertedDate
  , currentIntBal
from monthlyPayments
where rownum = 1 
```

在上面的新查询中，我将*lastPaymentDate*从更改`varchar`为`date`。我使用了 a`CROSS APPLY`所以它可以被多次引用而无需重复代码。

请注意，我还将日期格式更改为 ISO 格式，以防止不同连接语言出现任何问题 -`YYYY-MM-DD`可能会给出不一致的结果，但`YYYYMMDD`会保持一致。

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/a8f69/2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:02:39.907

像这样的东西：

```
SELECT MIN(lastPaymentDate) As lastPaymentDate, currentInBal
FROM   yourTable
GROUP BY currentInBal, MONTH(lastPaymentDate)+12*YEAR(lastPaymentDate) 
```

另一种略有不同的方式：

```
SELECT MIN(lastPaymentDate) As lastPaymentDate, 
    MIN(currentInBal) As currentInBal
FROM   yourTable
GROUP BY MONTH(lastPaymentDate)+12*YEAR(lastPaymentDate) 
```

# azure - How to obtain an SSL certificate for Azure Cloud Service

> ID：16132457
> 
> 赞同：5
> 
> 时间：2013-04-21T14:54:56.583
> 
> 标签：azure, certificate, ssl-certificate, azure-web-roles

I have an azure cloud service (WebRole) and I want to purchase an SSL certificate.

What is the technical requirements to purchase this certificate? An SSL provider like godaddy offers 256-bit encryption certificate but Azure documentation said that **The certificate must use a minimum of 2048-bit encryption**, I no one provide such length.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T20:28:18.043

GoDaddy provides certificates that work with Azure just fine. We use them quiet well (just installed a new one yesterday)

Here's a helpful blog that seems to address the "how-to" [http://blog.amusedia.com/2011/10/setting-up-secure-windows-azure-web.html](http://blog.amusedia.com/2011/10/setting-up-secure-windows-azure-web.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T23:58:28.043

All major domain hosting companies support 2048 bit root certificates as shown in this comparison table:

[http://www.networksolutions.com/SSL-certificates/compare.jsp](http://www.networksolutions.com/SSL-certificates/compare.jsp)

Whoever is hosting your domain/DNS should be able to generate this certificate for you. I would suggest sending them this link if you aren't sure that they can do it.

[http://www.windowsazure.com/en-us/develop/net/common-tasks/enable-ssl/](http://www.windowsazure.com/en-us/develop/net/common-tasks/enable-ssl/)

If the company hosting your domain can NOT issue a SSL/TLS certificate that meets those requirements then you should probably move your domain to someone who can. I want all of my domain and SSL hosting with only one company for my convenience.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-30T12:56:18.517

Back in 2013, GoDaddy was an option, but these days Let's Encrypt are offering ***free*** SSL certificates, and there's an Azure Extension that ties in, to auto-renew them, too.

The SSL Certificates from Let's Encrypt are genuine, real and as secure as any other.

Here's a few links to get anyone new to this on their way:

[Let's Encrypt - FAQs](https://letsencrypt.org/docs/faq/)

[SJKP's Azure Site Extension](https://github.com/sjkp/letsencrypt-siteextension/wiki/How-to-install)

[Troy Hunt - Everything you need to know about loading a free Let's Encrypt certificate into an Azure website](https://www.troyhunt.com/everything-you-need-to-know-about-loading-a-free-lets-encrypt-certificate-into-an-azure-website/)

[Securing an Azure App Service Website under SSL in minutes with Let's Encrypt](https://www.hanselman.com/blog/SecuringAnAzureAppServiceWebsiteUnderSSLInMinutesWithLetsEncrypt.aspx)

# css - 在 Internet Explorer 10 中无法识别 css url()

> ID：16132460
> 
> 赞同：7
> 
> 时间：2013-04-21T14:55:10.847
> 
> 标签：css, internet-explorer-10

我的 CSS 中有这一行：

```
.ui-icon-zoom-in { content: url(images/16x16/ZoomIn.png); } 
```

我正在使用这样的[jQuery UI Button 小部件](http://api.jqueryui.com/button/)：

```
$("#zoomin").button({ text: false, icons: { primary: "ui-icom-zoom-in" } }); 
```

在 Chrome 中，我可以看到按钮内居中的图像。但是，在 IE10 中，我看不到图像。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T14:59:15.990

该`content`属性仅对 :before 和 :after 伪元素有效。您应该将其更改为：

```
.ui-icon-zoom-in { 
  background: url(images/16x16/ZoomIn.png) no-repeat; 
  width:16px;
  height:16px;
} 
```

除此之外，IE8+ 仅`content`在指定了有效的 DOCTYPE 时才支持属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T15:02:54.417

该`content`属性仅在 CSS3 中的伪元素上被`:before`接受`:after`。您可能应该使用 jQuery 选择器将图像附加到对象：

```
$("#zoomin").html("<img src='images/16x16/ZoomIn.png' alt='Zoom In'>"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-12T09:50:53.613

我在 IE 11 中遇到了同样的情况。内容是`<div class="image"> </div>` 所以在 Chrome 中它是这样工作的

```
.image {
  content: url("image.jpg");
} 
```

为了让它在 IE 中工作，我将`content`选项设置为`:after`element。像

```
.image:after {
  content: url("image.jpg");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-30T08:44:07.197

可以使用该`box-sizing`属性来保持尺寸，将新图像添加为背景图像，并通过以下方式“推出”现有（旧）内联图像`padding-left`：

```
.image{
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  background: url(https://yourdomain/yoursite/yourasset.png) no-repeat;
  width: 20px; /* Width of new image */
  height: 25px; /* Height of new image */
  padding-left: 20px; /* Equal to width of new image */
} 
```

`box-sizing`具有良好的网络浏览器支持：[https ://caniuse.com/#feat=css3-boxsizing](https://caniuse.com/#feat=css3-boxsizing)

采用自：[https ://css-tricks.com/replace-the-image-in-an-img-with-css/](https://css-tricks.com/replace-the-image-in-an-img-with-css/)

# audio - What Would Happen If a .wav File Was All 1's or -1's?

> ID：16132462
> 
> 赞同：0
> 
> 时间：2013-04-21T14:55:52.397
> 
> 标签：audio, wav

To my understanding, .wav file is a list of numbers ranging from -1 to 1 (at least, if you are using a java class called WavFile to convert an array into a .wav file, the array must have values between -1 and 1). When you play a .wav file, those numbers are turned into voltages on your soundcard.

I have never tried this for the safety of my equipment, but if a .wav file was all 1's (max voltage), would your soundcard snap to full output voltage for the duration of the file? This would be very dangerous for headphones and receivers that the soundcard might be connected to, and it may be dangerous to the soundcard itself.

What I'm wondering is whether or not there is some built-in protection from this event in Windows OS.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:01:54.687

It depends on the amplifier you use, typically the one in the sound card. To have any effect at all it would need to be direct-coupled. That's not common, most amplifiers are AC-coupled and block any DC offset on the signal to prevent the speaker from overheating.

Think of it as a high-pass filter, your WAV file has in effect a sound with a frequency of 0\. You won't hear anything, your ear can only perceive signals with a frequency between about 20 and 20,000 Hertz. Nature's analog version of the Fast Fourier Transform. Except when you start playing, you'll get a sudden spike from 0 to max. Which produces a lot of high frequencies in the spectrum, you'll perceive this as a tick or pop.

Destroying equipment with data is an urban myth. A simple workaround is to not turn the volume to 11.

# mysql - mysql: countaing num of columns with certain value

> ID：16132466
> 
> 赞同：1
> 
> 时间：2013-04-21T14:56:17.450
> 
> 标签：mysql, select, where-clause

I got a database contain employee name and month days in front of it

```
id         name        1    2       3     4
-----      ------      ---  --     ---    ---
1          Mark        half  full  full   half 
```

i would like to count the number of columns which contain value half and number of columns which contain full value

like if i want to count null values i write

```
select is null(`1`)+ is null (`2`) as count from employee where id = 280 
```

so what should i do or which query can solve this problem for me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:59:12.770

```
SELECT  (`1` = 'half') + (`2` = 'half') + (`3` = 'half') + (`4` = 'half') AS `HALF`,
        (`1` = 'full') + (`2` = 'full') + (`3` = 'full') + (`4` = 'full') AS `FULL`
FROM    TableName
-- WHERE condition here 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/54169/1)
*   [SQLFiddle 演示（`COALESCE`如果列可以为空，则使用）](http://www.sqlfiddle.com/#!2/02a73/2)

# python - Django 会话意外丢失数据

> ID：16132471
> 
> 赞同：5
> 
> 时间：2013-04-21T14:56:51.050
> 
> 标签：python, django, session, django-settings

我有一个管理操作，它将当前选择和一个处理程序类（的子类`object`）存储到会话中，并重定向到另一个处理选择的页面。然而，出于某种原因，每当我这样做时，整个会话都会丢失。

实际发生的情况是，在调用会话没有键“action_options”的视图函数时出现错误。深入研究实际发生的情况，变量在会话中设置得很好，但是在调用视图时，会话完全是空的，包括以前肯定存在的管理员登录。所有其他页面（即内置管理页面）加载正常。

这是动作：

```
def myaction(self, request, queryset):
    opts = request.session.setdefault('action_options', {})
    opts['queryset'] = queryset
    opts['handler'] = MyHandlerClass
    request.session.modified = True
    return HttpResponseRedirect(reverse('myapp.views.handler_view')) 
```

这是视图，目前只打印出选项集：

```
def handler_view(request):
    opts = request.session['action_options']
    return HttpResponse(str(opts)) 
```

我也尝试过直接存储查询集，即`request.session['queryset'] = queryset`，但我得到了相同的行为。但是，如果我保存主键列表，那就没问题了。

作为参考，这是我的中间件定义：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',

    'johnny.middleware.LocalStoreClearMiddleware',
    'johnny.middleware.QueryCacheMiddleware',
) 
```

我正在使用 Johnny Cache，配置如下：

```
CACHES = {
    'default' : dict(
        BACKEND='johnny.backends.memcached.MemcachedCache',
        LOCATION=['127.0.0.1:11211'],
        JOHNNY_CACHE=True,
    )
}
JOHNNY_MIDDLEWARE_KEY_PREFIX = 'jc_myproj' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T13:05:04.087

Queryset 在执行之前不能被序列化并存储在 session 中。

```
opts['queryset'] = list(queryset) 
```

这将使它成为一个列表，但问题仍然是它是否可以序列化和反序列化。基本上，会话数据是纯文本。相应地计划。

# grails - 升级到 2.2.1 后禁用 Grails Run-App Hotdeployment

> ID：16132472
> 
> 赞同：0
> 
> 时间：2013-04-21T14:56:51.143
> 
> 标签：grails

在“运行应用程序”模式下运行我的 Grails 应用程序时遇到一些问题。在升级到 2.2.1 之前，控制器、视图和 CSS 将在我修改它们之后立即更新。自从我升级到最后一个版本后，这种行为就消失了。

你知道为什么会这样吗？

谢谢，尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:42:25.223

所以，我通过更新到 IntelliJ 的最新版本（从 11 到 12）解决了这个问题。IntelliJ 11 似乎与最新版本的 Grails 不兼容。

亲切的问候，尼古拉斯。

# ruby-on-rails - 如何在 Rails 中记忆类方法？

> ID：16132477
> 
> 赞同：15
> 
> 时间：2013-04-21T14:57:31.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个带有类方法的模型，该方法计算量很大，每个请求我都会调用很多次。

理想情况下，我想在单个请求期间缓存结果。

在这种情况下，rails 的最佳实践是什么？

例子：

```
class MyClass < ActiveRecord::Base
  def self.heavy_method; ... ; end
end 
```

然后在助手中

```
def helper
  MyClass.heavy_method
end 
```

这个助手在许多视图中使用

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-21T15:15:39.290

这是一个非常通用的解决方案，可能对您有用。

```
class Klass
  def self.memoized_expensive_method
    @memoized_expensive_method_result ||= expensive_method
  end

  def self.expensive_method
    # ...
  end
end 
```

然后，如果您想确保在每个请求上重新执行您的代码，您可以在控制器中使用过滤器。

```
class Klass
  def self.reset_expensive_method_cache!
    @memoized_expensive_method_result = nil
  end
end

class ApplicationController
  before_filter :reset_klass_expensive_method_cache

  def reset_klass_expensive_method_cache
    Klass.reset_expensive_method_cache!
  end
end 
```

请注意，将内容存储在类变量中可能会导致线程安全问题，因为缓存的结果将在线程之间共享。

如果这可能是您的应用程序的问题，您可能希望将数据存储在线程中，而不是使用类变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T18:37:11.637

感谢@unixcharles，这就是我结束的工作

```
class SomeClass
  @lock = Mutex.new

  after_save :clear_cached_calculation

  class << self
    def some_calculation
      @lock.synchronize do
        @calc ||= heavy_operation
      end
    end

    def clear_calculation
      @lock.synchronize do
        @calc = nil
      end
    end

  end

private

  def clear_cached_caculation
    SomeClass.clear_calculation
  end
end 
```

编辑：

它可能是一个更好的解决方案，`Rails.cache.fetch`而不是将值保存在内存中。

# xcode - How should I go about making a barcode reader app using Xcode

> ID：16132479
> 
> 赞同：0
> 
> 时间：2013-04-21T14:57:32.690
> 
> 标签：xcode, barcode

I was just wondering the steps that I need to take to develop a Barcode Scanning app with Xcode considering that I am new to programming with Xcode.

Thanks

Ben

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:01:07.950

查看 ZBar iOS sdk - 它非常有用并且是一个很好的库。 [http://zbar.sourceforge.net/iphone/](http://zbar.sourceforge.net/iphone/)

# c - 输入重定向和倒带

> ID：16132484
> 
> 赞同：0
> 
> 时间：2013-04-21T14:57:48.940
> 
> 标签：c

我正在将一个文本文件重定向到我的 C 程序中，例如

```
./test.c < earthquakes.txt 
```

我用这样的scanf读入了我需要的数据：

```
while (scanf("%4d-%2d-%2d%c%2d:%2d:%2d+%2d:%2d,%f,%f,%f,%f",
    &yyyy, &mm, &dd, &junkc, &hh, &min, &sec, &junki, &junki,
    &latit, &longi, &depth, &magnitude) == 13) {
    printf("test\n");
    num_earthquakes++;
} 
```

直到我读完我需要的所有行。之后，我如何倒回到标准输入的开头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:00:24.463

`stdin`是一个流而不是一个常规文件，所以你不能只是倒带输入。

所以我想，你应该定期读取文件，或者如果你想将接收到的数据复制到缓冲区，以便再次读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:00:59.397

也许只通过一次是最好的选择：读取值，并`realloc`在必要时使用调整数组大小。为了最大程度地减少因大量输入而出错的机会，您需要只存储解决问题所需的信息。如果输出基于月份，则基于月份收集信息。例如：

```
size_t count = 0;
struct month_stat *month = NULL;
while (count <= SIZE_MAX / sizeof *month &&
       scanf("%4d-%2d-%2d%c%2d:%2d:%2d+%2d:%2d,%f,%f,%f,%f",
             &yyyy, &mm, &dd, &junkc, &hh, &min, &sec, &junki, &junki,
             &latit, &longi, &depth, &magnitude) == 13)
{
    /* resize based upon powers of two for simplicity */
    if (count & (count - 1) == 0)
    {
        void *temp = realloc(month, (count * 2 + 1) * sizeof *month);
        if (temp == NULL)
        {
            /* handle error */
        }

        month = temp;
    }

    /* TODO: Update month[count] and overall stats
     *       When the month changes, you'll want to count++;
     */
} 
```

您是否知道可以通过在您使用的格式说明符和您使用`*`的任何格式说明符之间放置一个来告诉 scanf 丢弃输入`%`？例如，`assert(scanf("%*c") == 0);`将读取并丢弃没有赋值的字符，这反映在返回值上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:16:06.353

一种可能的方法是，在第一堂课中，在记忆中建立一个表示。例如，您创建一个与每一行对应的链表，并且元素是您自己的结构。

这样，一次又一次地阅读，你有一种有趣且方便的方式来使用它们。

# c# - Work efficiently between ASP.NET and C#

> ID：16132489
> 
> 赞同：-3
> 
> 时间：2013-04-21T14:58:30.777
> 
> 标签：c#, asp.net-mvc, database

I have not knowledgement about ASP.NET programming, only C# programming (Desktop Apps, not Web-based apps). I have been assigned to a projet which is web-based using ASP.NET. The part of GUI (Web and ASP.NET) is done by another person and I only do the part related to C# programming (not web, lower level) that have to communicate with a SQL database in order to process the events raised from the ASP.NET GUI. So I would like to know which is the best way to work efficiently in this scenario. Is it better that my part C# (Not web) be a DLL and then called from ASP.NET code (by the person who is in charge of ASP.NET coding)? I think it is necessary to define an interface between ASP.NET GUI part and my part. By the way, I think that it is a good practice to use MVC pattern here, but how to isolate the two parts correctly to avoid conflics (as one person implements ASP.NET GUI and I, the lower level C# communication with database)? I do not want to have any kind of problems when integrating the two parts. I highly appreciate suggestions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:16:32.407

听起来您负责实施[Repository Pattern](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。

我的建议是创建一个包含这些存储库类的程序集，您的 MVC 程序员可以使用它们返回信息以供显示，并将这些相同的类用于实际任务。

不要在存储库中使用“插入”和“更新”方法。与任何要求您这样做的人坐下来，清楚地了解正在完成哪些工作单元，这样您就可以在您的存储库上创建明确定义的方法。

# linux - why is this rsync command not deleteing?

> ID：16132495
> 
> 赞同：0
> 
> 时间：2013-04-21T14:58:53.147
> 
> 标签：linux, centos, rsync

Can anyone please tell me why this rsync command doesn't delete?

It just keeps adding new files, but never deleting files on the destination that are no longer on the source.

rsync -avz -e --delete --rsh='ssh -p1157' /backup/virtualservers/monthly/ [removed for security]:/volume1/NetBackup/virtalservers/monthly

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:17:09.590

the -e argument is the same as the --rsh according to the man page

-e, --rsh=COMMAND This option allows you to choose an alternative remote shell program to use for communication between the local and remote copies of rsync. Typically, rsync is configured to use ssh by default, but you may prefer to use rsh on a local network.

so I think your command is confusing, try the following instead:

rsync -avz --delete --rsh='ssh -p1157' /backup/virtualservers/monthly/ [removed for security]:/volume1/NetBackup/virtalservers/monthly

Romain

# javascript - 每次刷新时通过控制台运行 js 代码

> ID：16132497
> 
> 赞同：0
> 
> 时间：2013-04-21T14:58:59.833
> 
> 标签：javascript, firefox

我想通过 Firefox 控制台在页面上运行简单的 javascript 代码。像这样的东西：

```
 var yesno=1;  
  setInterval(function(){
    $("input[name='elementname']").click()
  }2500) 
```

如果页面不会在每次点击时重新加载，那将有效。所以我想知道是否有任何方法（不需要使用 firefox 浏览器）在每次重新加载时自动运行此代码。

# validation - 是否有用于验证文件名和路径名的类型加速器？

> ID：16132498
> 
> 赞同：2
> 
> 时间：2013-04-21T14:59:04.523
> 
> 标签：validation, powershell

我知道有一种方便的方法可以在 Powershell 中验证 IPAdresses：

`[ipaddress]"12.12.12.12"`

`[ipaddress]"12.12.12.812" #Throws an Error.`

您知道是否有类似的方法来验证文件名和路径名？例如

`[path]"c:\temp\t?est.txt" #Throws an Error`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T15:04:48.287

您可以使用`Test-Path`cmdlet：

```
Test-Path "c:\temp\t?est.txt" -IsValid 
```

从帮助：

```
PS> help test-path -param isvalid

-IsValid [<SwitchParameter>]
    Determines whether the syntax of the path is correct, regardless of whether the elements of the path exist. This
    parameter returns TRUE if the path syntax is valid and FALSE if it is not.

    Required?                    false
    Position?                    named
    Default value                False
    Accept pipeline input?       false
    Accept wildcard characters?  false 
```

# file - Fixed size image upload using codeigniter, howto?

> ID：16132499
> 
> 赞同：1
> 
> 时间：2013-04-21T14:59:06.797
> 
> 标签：file, codeigniter, class, uploading

I am using the file uploading class in codeigniter and can successfully upload images. My question is how to go about making sure the user uploads an image of only a fixed size, 600px by 360px, nothing more nothing less? I have tried using the upload data array to get the image height and width and am checking against these values TRUE or FALSE. If false, I pass an error string to the view, if true, I display nothing in the view, but I am not sure it is working right. Any one can help with how to go about doing this? Thank you in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:08:57.697

您可以将图像处理库与文件上传库结合使用。

使用文件上传库，您可以：

*   确保上传的文件具有您想要的确切大小：

如果需要，您可以使用图像处理库来调整上传图像的大小，因此完整的解决方案如下所示：

```
$fileInfo = $this->upload->data();

if( $fileInfo['width'] == 600 && $fileInfo['height'] == 300 ) {
    // do something
} else {
    // initiialize library
    $this->image_lib->resize();
} 
```

您可以在此处阅读有关这些库的更多信息：

[http://ellislab.com/codeigniter/user-guide/libraries/image_lib.html](http://ellislab.com/codeigniter/user-guide/libraries/image_lib.html)

[http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:06:53.220

您可以使用 GDI 库工具找出图像的高度和宽度以及其他信息。

例如：

```
$imgInfo = getimagesize("/path/to/image.png");
if ($imgInfo[0] != 600) && $imgInfo[1] != 360){
   throw new Exception("Illegal image size");
} 
```

[http://www.php.net/manual/en/function.getimagesize.php](http://www.php.net/manual/en/function.getimagesize.php)

# android - Android - 如何将 y 标签与它们的点对齐？

> ID：16132506
> 
> 赞同：0
> 
> 时间：2013-04-21T14:59:30.693
> 
> 标签：android, graph, achartengine

我正在使用 achartengine 绘制图表，但我不知道如何将 x 标签与图表中的相对点对齐。要添加 Y 标签，我使用此方法：

```
 private void addSampleData() {
    int i=0;
    for(i=0; i<count; i++){
        mCurrentSeries.add(i+1, list_peso[i]);
        mCurrentSeries2.add(i+1, list_peso_ideale[i]);
        list_peso_string[i] = Double.toString(list_peso[i]);
        mRenderer.addXTextLabel(i+1, list_data[i]);
        mRenderer.addYTextLabel(i+1, list_peso_string[i]);
    } 
```

它适用于 Y 标签，但不适用于 X 标签。我怎么样？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:36:47.357

我不明白你为什么使用`i+1`in`mRenderer.addYTextLabel(i+1, list_peso_string[i]);` 而只是使用`i`它可以解决你的问题

如果你想要自定义标签:::

假设您的自定义 x 轴标签应该是：`private String[] mMonth = new String[] { "Jan", "Feb" , "Mar", "Apr", "May", "Jun", "Jul", "Aug" , "Sep", "Oct", "Nov", "Dec" };`

所以通过使用以下循环可以得到[如图所示的图表](http://i49.tinypic.com/2j5xhrs.png)

```
int[] x = { 0,1,2,3,4,5,6,7 };
for(int i=0; i< x.length;i++){
    multiRenderer.addXTextLabel(i, mMonth[i]);          
} 
```

[看看这个问题和我的答案](https://stackoverflow.com/q/15738648/1752560)

# phpmyadmin - PhpMyAdmin adds WHERE 1 to every statement by default

> ID：16132507
> 
> 赞同：2
> 
> 时间：2013-04-21T14:59:34.040
> 
> 标签：phpmyadmin

Just a curiosity question. Why phpMyadmin adds `WHERE 1` to every statement in the SQL query input box?

For example,

```
 SELECT * FROM User WHERE 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:06:19.747

在生成动态查询时，总是有一个`WHERE`子句比有一个算法在不需要时删除它更容易。这意味着“一切”，如果您在自己的查询中添加子句，`WHERE 1`phpMyAdmin 将不会附加它。`WHERE`

phpMyAdmin 可能通过连接字符串来创建它的查询，所以它会生成 say `$selectStatement`，`$whereStatement`然后`$limitStatement`将它们加在一起。我不知道它是否仍然这样做，但它总是用来添加一个`LIMIT`子句，即使在不需要时也是如此。

这只是在 PHP 中构建 SQL 语句的一种简单而全面的方法，完全不会影响您的查询结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:14:25.250

我的猜测是它是一个有用的指南。不幸的是，我犯了几个错误，忘记添加一个`WHERE`子句，最后不得不疯狂地恢复备份，然后每个人都意识到我重置了他们所有的密码，而不仅仅是一个……哎呀！

把它放在那里没有任何功能性目的，但在你像我一样搞砸之前，它可能是一个有用的提醒。

# python - Indexing Wikipedia's Links to Make a Graph

> ID：16132510
> 
> 赞同：1
> 
> 时间：2013-04-21T14:59:43.243
> 
> 标签：python, xml, algorithm, memory, graph

I downloaded the Wikipedia dumps(the first torrent on [this page](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download)) and tried to index all the links by storing them in a python dictionary. I stored the links as a list of destinations in a dictionary with a key of the current page. However as I processed the dump I ended up with a MemoryError, so I decided to assign each page an integer ID. This got me farther but I still ended up with a MemoryError. What can I do to process this without that? I would prefer to store it all in memory. As my code is reasonably long I posted it [here](http://pastebin.com/Y6XfeYK5).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:12:54.297

您应该开始查看数据库，以便为您的 id 和相关链接编制索引。

首先，您可以尝试使用[Sqlite](http://www.sqlite.org/)或[MySQL](http://www.mysql.com/)。

这里是 python 数据库处理的起点[。](http://wiki.python.org/moin/DatabaseInterfaces)

我个人喜欢与 python 模块 psycopg2 结合使用的[Postgresql](http://www.postgresql.org/)

# linux - Getting file size of each file on a very large file system

> ID：16132514
> 
> 赞同：1
> 
> 时间：2013-04-21T15:00:01.183
> 
> 标签：linux, bash, ubuntu, filesystems, centos

I have to move the 20TB file system with a couple of million of files to a ZFS file system. So I would like to get an idea of the file sizes in order to make a good block size selection.

My current idea is to `stat --format="%s" each file and then divide the files into bins.

```
#!/bin/bash

A=0 # nr of files <= 2^10
B=0 # nr of files <= 2^11
C=0 # nr of files <= 2^12
D=0 # nr of files <= 2^13
E=0 # nr of files <= 2^14
F=0 # nr of files <= 2^15
G=0 # nr of files <= 2^16
H=0 # nr of files <= 2^17
I=0 # nr of files >  2^17

for f in $(find /bin -type f); do

    SIZE=$(stat --format="%s" $f)

    if [ $SIZE -le 1024 ]; then
    let $A++
    elif [ $SIZE -le 2048 ]; then
    let $B++
    elif [ $SIZE -le 4096 ]; then
    let $C++
    fi
done

echo $A
echo $B
echo $C 
```

The problem with this script is that I can't get `find` to work inside a for-loop.

**Question**

How to fix my script?

And is there a better way to get the all the file sizes of a file system?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:35:24.627

主要问题是您正在使用命令替换将输出提供`find`给`for`循环。命令替换通过在括号（或反引号）内运行命令完成，收集其输出并将其替换到脚本中来工作。这不支持流式传输，这意味着在`find`扫描完全完成之前 for 循环不会运行，并且您也需要大量内存来缓冲输出`find`。

特别是因为您正在扫描许多 TB 的文件，您将需要使用支持流的东西，例如`while`循环：

```
find /bin -type f | while read f; do
    ...
done 
```

有了可以流式传输的内容，您的脚本至少可以工作，但请记住，这种技术会强制您`stat`为找到的每个文件调用一次外部命令 ( )。这将导致命令的大量进程创建、销毁和启动成本`stat`。如果你有 GNU find，那么在`find`命令中输出每个文件的大小以及它的`-printf`选项会执行得更好。

另外：`let`循环体中的语句看起来是错误的。您正在扩展、 和变量的内容`$A`，而不是引用它们。你不应该在这里使用。`$B``$C``$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:36:46.217

如果只想找出介于 100M 和 1000M 之间的文件数，您可以执行以下操作

```
find . -size +100M -size -1000M  -type f | wc -l 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:16:19.490

```
find /bin/ -type f -printf "%s\n" > /tmp/a 
```

然后将以下内容用作`script.pl < /tmp/a`.

```
#!/usr/bin/perl

use warnings;
use strict;
use Data::Dumper;

my %h = ();

while (<STDIN>) {
    chomp;
    if    ($_ <= 2**10) { $h{1} += 1}
    elsif ($_ <= 2**11) { $h{2} += 1}
    elsif ($_ <= 2**12) { $h{4} += 1}
    elsif ($_ <= 2**13) { $h{8} += 1}
    elsif ($_ <= 2**14) { $h{16} += 1}
    elsif ($_ <= 2**15) { $h{32} += 1}
    elsif ($_ <= 2**16) { $h{64} += 1}
    elsif ($_ <= 2**17) { $h{128} += 1}
    elsif ($_ >  2**17) { $h{big} += 1}
}

print Dumper \%h; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T21:13:35.793

古老的[du 命令](http://linux.die.net/man/1/du)将更直接地为您提供尺寸。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T15:44:19.267

我会调查使用 dd 来读取 zfs 元数据，这些元数据应该包含在数据磁盘本身上。

这可能是一个糟糕的建议，可能会导致您浪费时间。但是用 bash 爬取文件系统需要很长时间并且会消耗系统 CPU 利用率。

# xslt - 从（结果树片段）搜索节点/文本（）

> ID：16132515
> 
> 赞同：-1
> 
> 时间：2013-04-21T15:00:02.347
> 
> 标签：xslt, xslt-1.0

我的模板 (XSLT 1.0)

> ```
> <xsl:template name="doo"> 
> ```

```
 <xsl:variable name="nodelist">
        <root>
            <a size="12" number="11">
                <sex>male</sex>
                Hulk
            </a>
            <a size="12" number="11">
                <sex>male</sex>
                Steven XXXXXXXXXXX
            </a>
        </root>
    </variable>

    <xsl:call-template name="findString">
       <xsl:with-param name="content1" select="$nodelist"></xsl:with-param>
    </xsl:call-template> 
```

> ```
> </xsl:template> 
> ```

```
<xsl:template name="findString">
    <xsl:param name="content1" select="."></xsl:param>

    <!-- here i need to search the text() XXXXXXXXXXX from $content1 and replace them-->

</xsl:template> 
```

这可能吗

```
for each node in Tree Fragment from myvariable
if node/text()='xxxxxxxx'
  do something 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:22:11.580

使用 xslt version=1.0，您可以使用扩展名“未设置”。

```
<xsl:call-template name="findString">
   <xsl:with-param name="content1" select="exsl:node-set($nodelist)"></xsl:with-param>
</xsl:call-template> 
```

要让它醒来，您必须添加以下行。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:exsl="http://exslt.org/common"
    extension-element-prefixes="exsl"
    version="1.0"> 
```

更新：基于[Mads Hansen的解决方案](https://stackoverflow.com/a/16127524/2115381)

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0"
    xmlns:exsl="http://exslt.org/common"
    extension-element-prefixes="exsl">
    <xsl:template name="doo">
        <xsl:variable name="nodelist">
            <root>
                <a size="12" number="11">
                    <sex>male</sex>
                    Hulk
                </a>
                <a size="12" number="11">
                    <sex>male</sex>
                    Steven XXXXXXXXXXX
                </a>
            </root>
        </xsl:variable>
        aaa
        <xsl:call-template name="findString">
            <xsl:with-param name="content1" select="exsl:node-set($nodelist)"></xsl:with-param>
        </xsl:call-template>
    </xsl:template>
    <xsl:template match="/">
        <xsl:call-template name="doo" />
    </xsl:template>

    <xsl:template name="findString">
        <xsl:param name="content1" select="."></xsl:param>

        <!-- here i need to search the text() XXXXXXXXXXX from $content1 and replace them-->
        <xsl:apply-templates mode="mytext" select="$content1"/>

    </xsl:template>

    <!--Identity template will copy all matched nodes and apply-templates-->
    <xsl:template match="@*|node()" mode="mytext">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" mode="mytext"/>
        </xsl:copy>
    </xsl:template>

    <!--Specialized template to match on text nodes that contain the "findString" value-->
    <xsl:template match="text()[contains(.,'XXXXXXXXXXX')]"  mode="mytext">
        <xsl:variable name="findString" select="'XXXXXXXXXXX'"/>
        <xsl:variable name="replaceString" select="'YYYYYYYYYYYY'"/>
        <xsl:value-of select="concat(substring-before(., $findString), 
                                    $replaceString, 
                                    substring-after(., $findString))"/>
    </xsl:template>

</xsl:stylesheet> 
```

# ms-access - How to wait for Compact Repair - Access VBA

> ID：16132519
> 
> 赞同：2
> 
> 时间：2013-04-21T15:00:26.153
> 
> 标签：ms-access, ms-access-2007, vba

Have a VBA Module in Access 2007 which performs similar actions in a For loop. At the end of every loop I wish to compact and repair the current database before proceeding to the next iteration.

Reason : In every iteration I create , use for calculation and delete a table. The size should remain under control.

Using SendKeys , I cannot compact and repair - if calling the module from a Form Button. Any trick to ensure that the SendKey works fine and the Module continues onto the next iteration flawlessly. Some idea to control Form loading / Module execution / Checking Status etc. End Purpose being to wait just long enough till the Compacting is done and then move on. Also how to safely ensure that SendKeys / (suggest alternate) for compacting works fine.

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T22:16:13.803

*“......在一个 For 循环中。在每个循环结束时，我希望在进行下一次迭代之前压缩并修复当前数据库。”*

考虑压缩当前数据库时实际发生的情况。Access 首先将当前数据库的压缩版本创建为*新*的db 文件。然后它删除旧的 db 文件，将新文件重命名为旧名称，最后打开新的 db 文件。

因此，如果您的代码尝试通过一个循环压缩每个循环`For`......当 Access 然后打开压缩的 db 文件......它怎么知道你希望它在那个`For`循环中继续？

如果你真的想做这样的事情，你必须存储一个值来记录`For`循环的最后一次迭代。然后创建一个*autoexec*宏以在数据库打开时检索该值，并`For`在适当的周期进入循环。然后决定您是否真的希望每次打开数据库时都发生这一切。

然而，这对我来说似乎太过分了。使用另一个 db 文件来保存易失性数据应该更简单。然后从*当前*数据库中的代码中，您可以使用[DBEngine.CompactDatabase](http://msdn.microsoft.com/en-us/library/office/bb220986%28v=office.12%29.aspx)压缩外部 db 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:08:10.927

如果您正在做那么多紧凑和修复，那么我会将数据库拆分为前端和后端。您的所有表格都将位于后端。无论如何，拆分数据库对于任何常规 Access 程序员来说都是相当标准的。

**然后，当您需要时，使用 Shell 命令使用/compact**开关打开后端数据库。这将打开它，进行压缩和修复，然后将其关闭。

因此，您的代码将是这样的：

```
Ret = Shell("C:\Program Files\Microsoft Office\Office12\MSACCESS.EXE /compact c:\MyFolder\MyDB.accdb") 
```

如果您需要等待它完成，请改用**WScript.Shell**命令。

祝你好运

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T18:02:31.087

**您不能在任何类型的循环中压缩和修复当前数据库。** 您可以在循环中压缩和修复外部数据库，也可以在关闭时压缩当前数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:16:30.587

我已经回答了您的[另一个问题](https://stackoverflow.com/questions/16131820/temp-table-in-access-manage-size)（非常相似），但是为了帮助其他人，我发布了一个简单的实用程序函数，可以帮助您重新启动和压缩当前数据库：

*   [以编程方式重新启动和压缩 MSAccess 数据库](http://blog.nkadesign.com/2008/ms-access-restarting-the-database-programmatically/)

为确保您在重新启动后继续正确的迭代：

*   将您的操作状态（例如循环计数）保存在`LocalSettings`数据库中的表（例如）中。
*   重新开始。
*   使用`autoexec`宏来启动执行您工作的函数：它应该从`LocalSettings`表中加载操作/循环计数并继续执行。

另一种解决方案是修改重新启动函数，将自定义命令行参数传递给 Access 应用程序，您可以在应用程序重新启动时检查该参数。
您可以轻松检查命令行参数，请参阅 VBA[命令函数](http://office.microsoft.com/client/helppreview14.aspx?AssetId=HV080205899&lcid=2057&NS=MSACCESS%2EDEV&Version=14&tl=2&CTT=4)。

# iphone - iphone - 从下面显示按钮列表

> ID：16132521
> 
> 赞同：-1
> 
> 时间：2013-04-21T15:00:53.337
> 
> 标签：iphone, xcode

我将添加从下方出现/消失的按钮的下拉列表，作为本机 iphone 中的“共享按钮”。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:05:59.347

分享视图是一个 UIActivityController 对象，你只能用它来分享等等。

最好的办法是创建一个自定义 UIView 并将您的按钮放在其中。然后你简单地将它动画到屏幕的可见部分，然后再出来。如果您需要一个简单的代码示例，请告诉我。

更新：

```
// Create your UIView and connect in your storyboard/XIB
UIView *myView = [[UIView alloc] init];

// Add the UIButtons to your UIView
UIButton *button = [[UIButton alloc] init];
[myView addSubview:button];

// Animate the UIView that contains the buttons
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.15];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
myView.frame = CGRectMake(0, 740, 768, 264);
[UIView commitAnimations]; 
```

# node.js - nodejs casperjs ejs express: settings values not seen by casperjs

> ID：16132522
> 
> 赞同：0
> 
> 时间：2013-04-21T15:01:01.693
> 
> 标签：node.js, express, phantomjs, ejs, casperjs

CasperJS doesn't seem to be able to see values passed from express via app.settings. Is there something I am leaving out?

Thanks in advance to anyone who can point me to a solution!

Here is a hello world node server:

```
hello.js
var http = require('http'),
    express = require('express'),
    app = express();

app.configure(function()
{
    app.set('view engine', 'ejs');
    app.set('views', __dirname);
    app.set('message', 'hello world!');
    app.set('secretmessage', 'foobar');

    app.get("/", function(req, res)
    {
        res.render('index.ejs', { layout:false });
    });
});

http.createServer(app).listen(3000, function(){
  console.log("Express server listening on port 3000");
}); 
```

In the same folder:

```
index.ejs
<!DOCTYPE html>
<html>
   <body>
      <input type="hidden" id="secret" value="<%= settings.secretmessage %>">
      <p><%= settings.message %></p>
   </body>
</html> 
```

When I start with `node hello.js` it tells me appropriately that the server is listening:

`Express server listening on port 3000`

Here is the html returned, as seen by Firefox - it is as you would expect:

```
<!DOCTYPE html>
<html>
   <body>
      <input type="hidden" id="secret" value="foobar">
      <p>hello world!</p>
   </body>
</html> 
```

I am trying to test this with casperjs. Here is my test code:

```
indextest.js
var casper = require('casper').create();

casper.start( 'http://localhost:3000', function start()
{
    var secretExists = this.evaluate( function() { return __utils__.exists( '#secret' ) });
    var secretValue = this.evaluate( function() { return __utils__.getFieldValue( 'secret' ) });
    casper.test.comment( 'Confirming hidden field secret exists and has value' );
    casper.test.assert( secretExists, 'secret exists' );
    casper.test.assertTruthy( secretValue, 'secret has value' );
});

casper.run(function run() {
    casper.test.done();
}); 
```

And here are the results:

```
$ casperjs indextest.js
# Confirming hidden field secret exists and has value
PASS secret exists
FAIL secret has value
#    type: assertTruthy
#    subject: "" 
```

Instead of seeing the value of `secret` as "foobar" it is seeing it as "".

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:03:35.023

事实证明，虽然`__utils__.exists()`使用 CSS 选择器，但`__utils__.getFieldValue()`使用了 'name' 属性。

`name="secret"`因此在 index.ejs 中添加属性：

`<input type="hidden" id="secret" name="secret" value="<%= settings.secretmessage %>"`

导致两个测试都通过。感谢VP的解决方案！

# security - SPA 架构问题

> ID：16132523
> 
> 赞同：3
> 
> 时间：2013-04-21T15:01:05.513
> 
> 标签：security, memory-management, knockout.js, breeze, single-page-application

这篇文章旨在开始对 Web 的单页应用程序进行更深入的讨论。在有关该主题的大多数资源中，有些问题似乎没有明确的答案。他们在我心中

1.  授权和认证。由于整个 Web 应用程序都在客户端上，它可以在其任何功能中调用服务器，即使是那些用户无权访问的功能。用户看不到菜单这一事实并不妨碍该人调用 java 脚本函数。这在 MVC 应用程序中很容易处理，例如，通过使用基于 cookie 验证用户对特定功能的权限的控制器。但是，一些 SPA 应用程序仅使用带有 Breeze 或 Web Api 的单个控制器，这使得授权服务器端不可能。
2.  客户端上的内存管理 对于小型示例应用程序来说，这不是问题，但是想象一个有 100 个屏幕的应用程序或一个在一天内提取数千条记录的单个屏幕的应用程序。有了持久缓存，人们可以想象会出现很大的内存问题，尤其是在 RAM 很少且功率不足的设备上，例如手机或平板电脑。一群开发人员如何在没有处理内存管理的清晰愿景的情况下拥有 SPA 路线？
3.  三层部署 一些 IT 部门绝不允许带有连接字符串的应用程序连接到位于前端 Web 服务器上的数据库。我见过的每个 SPA 演示的结构都完全一样，包括 Breeze 或 Web Api。
4.  不显眼的验证。它将要求开发人员使用 MVC 部分视图和控制器，而不仅仅是 HTML 文件，这似乎与 SPA 概念背道而驰，同时它提供了一种非常强大的方法来轻松地将验证和 UI 合并到 Web 应用程序中以支持它。
5.  在 url 中公开基于主整数的键。
    这在 OWASP 中是非否。因此，SPA 应用程序“似乎”针对安全要求很少且功能集小的领域。你怎么看？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-21T21:06:19.960

@Sergey - 我认为这对 StackOverflow 来说太宽泛了。SO 不是讨论论坛；这是一个寻求具体答案的地方。因此，尽管您的问题可能是有效的，但我认为您不应该对这里的深入实质性回应抱太大希望。

我可以以最友好的方式补充一点，您的笼统，不受支持和负面的陈述使您看起来像一个巨魔。你不是巨魔，你是谢尔盖吗？

如果你真的很担心，我会提供一些快速反应，尤其是与微风有关的反应。

1.  **授权**。在 Web API 中，您可以在方法级别进行授权。ApiController 基类有一个`User`属性，该属性返回`IPrincipal`. 因此，无论您有一个控制器还是多个控制器（如果需要，您可以在 Breeze 中拥有多个控制器），粒度是方法级别，而不仅仅是类级别。

2.  **内存管理**。桌面开发人员多年来一直在应对这种担忧。如果您一直在开发进程生命周期很短的传统 Web 应用程序，这可能会让您感到惊讶。但是对于我们这些使用 WinForms、WPF 和 Silverlight 等桌面技术构建大型应用程序的人来说，长时间运行的流程并不是什么新鲜事。在 HTML 和 JavaScript 领域，问题和解决方案大致相同。

3.  **后端的图层**。你看演示太久了。是的，大多数演示将所有内容都转储到在一台服务器上运行的一个项目中。我们假设您知道如何重构服务器以满足您环境的扩展、性能和安全要求。我们的演示主要关注前端 SPA 开发。我们确实涉足了服务边界，以展示数据如何通过服务 API、ORM 和数据库流动。我们认为识别这些不同的层就足够了，并将这些层移动到不同层的相对琐碎的事情留给读者作为练习。有一天，我们可能不得不重新审视这个假设。但是有没有人认真地相信在服务器端层之间分配层/职责存在重大障碍？真的吗？像什么？

4.  **不显眼的验证**。当大多数人开始在 HTML 中使用“不显眼”这个词时，他们通常会强调将 JavaScript 排除在 HTML 之外。也许这也是您的意思，在这种情况下，各地的 SPA 开发人员都同意……这就是为什么有许多“不显眼的验证”库可用的原因。想到 HTML 5 验证、jQuery 验证和 Knockout 验证。所有这些都在 SPA 开发人员的工具包中，并且没有一个“要求开发人员使用 MVC 部分视图和控制器”。是什么让您觉得 SPA 需要*任何类型的服务器端资源*才能使用无 JavaScript 的 HTML 标记实现验证？

5.  **IDs 作为安全风险**。真的吗？这是假的。键值不比任何其他数据值更具安全风险。数以百万计的应用程序——不仅仅是 SPA——在 URL 和正文中向客户端传达键值。它是 REST API 中的标准。它是 ODATA 的标准。并且您想通过说它们“*针对安全要求少且功能集小的区域*”来驳斥它们？祝你好运。我认为你必须做的更好，而不是把你的案子放在一个相对不起眼​​的组织的整个网站的链接上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:17:36.383

我已经构建了一些 SPA 应用程序，从小到大（超过 100 个脚本和视图）。只有少数人拥有公众可以访问的所有视图。其余的经历了严格的访问结构。从服务器返回未经授权的 401 非常简单，客户端只需处理 401 即可将其重定向到登录屏幕。沃德先生和爸爸先生说得对。退出演示模式并尝试为您遇到的问题找到解决方案。我在复数视觉上观看了 John Papa 的 SPA，浏览了 Breeze 上的大量文章和应用程序，我必须告诉你，我的应用程序都没有使用 Breeze 从客户端进行查询，因为你不需要！

此外，我只是扩展了我所学的知识，并提出了我自己解决问题的方法。这不是您的问题的答案，但我只能提供一个简短的评论。没有一种技术是完美的，也没有一种方法可以做所有事情。我的服务器端在需要被锁定的地方被锁定，我在客户端的路由被锁定（如果使用 durandal 看看guardRoute），我的脚本被缩小并且我的图像被精灵化（如果有像这样的词那）。总而言之，SPA 是一项很棒的技术，您必须找到解决问题的方法！

# android - Android Service won't start from a Thread

> ID：16132528
> 
> 赞同：1
> 
> 时间：2013-04-21T15:01:32.053
> 
> 标签：android, android-service

I am trying to start a service from a thread which I hava initialized with `getApplicationContext()` but `context.startService` returns null. I can't figure out why. Thanks in advance.

Mainlogic.java

```
public class MainLogic extends Thread {
Context context;

public MainLogic(Context context) {
    this.context = context;
}

ArrayList<Messenger> mClients = new ArrayList<Messenger>();
Messenger bluetoothService;
Messenger mMessanger = new Messenger(new MainHandler());

private class MainHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MessageType.NEW_HEARTH_RATE: {
                         //stuff

            break;
        }
        case MessageType.REGISTER: {
            mClients.add(msg.replyTo);break;
        }
        case MessageType.UNREGISTER: {
            mClients.remove(msg.replyTo);break;
        }
        case MessageType.START_BLUETOOTH_SERVICE: {
            startBluetoothService();
            break;
        }

        default:
            break;
        }

    }
}

private ServiceConnection bluetoothConnection = new ServiceConnection() {

    @Override
    public void onServiceDisconnected(ComponentName name) {
        Message msg = Message.obtain();
        msg.what = MessageType.CONNECTION_ENDED;
        msg.replyTo = mMessanger;

        try {
            bluetoothService.send(msg);
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
        bluetoothService = new Messenger(service);

        Message msg = Message.obtain();
        msg.replyTo = mMessanger;
        msg.what = MessageType.CONNECTION_ESTABLISHED;

        try {
            bluetoothService.send(msg);
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
};

public void startBluetoothService() {
            //This is where i start the service
    Intent intent = new Intent(context, BluetoothService.class);
    ComponentName name=  context.startService(intent);
            //name equals null after startService 

    boolean bind=context.bindService(new Intent(context,    BluetoothService.class),
            //bind equals false after bindService
            bluetoothConnection, Context.BIND_AUTO_CREATE);

}

@Override
public void run() {
    while(true){

    }

}

public Messenger getMessanger() {
    return mMessanger;
}

} 
```

BluetoothService.java:

```
public class BluetoothService extends Service {
private NumberGenerator nGenerator;

final Messenger mMessenger = new Messenger(new BluetoothServiceHandler());
ArrayList<Messenger> mClients = new ArrayList<Messenger>();

private final class BluetoothServiceHandler extends Handler {

    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
             //random messaging
        }

        default:
            break;
        }

    }
}

@Override
public void onCreate() {
    HandlerThread thread = new HandlerThread("BluetoothService",
            Process.THREAD_PRIORITY_BACKGROUND);
    thread.start();

    super.onCreate();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Message msg = Message.obtain();

    msg.arg1 = startId;
    msg.what = MessageType.START_NUMBERGENERATOR;
    try {
        mMessenger.send(msg);
    } catch (RemoteException e) {
        e.printStackTrace();
    }

    return START_STICKY;
}

@Override
public void onDestroy() {
    Message msg = Message.obtain();
    msg.what = MessageType.BLUETOOTH_SERVICE_STOPED;

    try {
        mMessenger.send(msg);
    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    super.onDestroy();
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return mMessenger.getBinder();
}
} 
```

And this is how I start the thread:

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MainLogic mainLogic=new MainLogic(this.getApplicationContext());
    mainLogic.setPriority(Thread.MAX_PRIORITY);
    mainLogic.start();

    mainMessenger=mainLogic.getMessanger();

    Message message= Message.obtain();
    message.what=MessageType.REGISTER;
    message.replyTo=actMessenger;
    try {
        mainMessenger.send(message);
    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }} 
```

Update 1: Manifest:

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bugra.bluetoothcomponent"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <service android:name="BluetoothService"  />
        <activity
            android:name="com.bugra.bluetoothcomponent.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:24:46.753

问题可能出在清单声明中。~~尝试启动此服务时，您必须有一个异常，告诉您找不到它。~~您应该输入服务的完全限定名称（带有包名称），或者至少一个点“。” 如果您的服务位于根包中，则在名称前面。您的清单行应如下所示：

```
<service android:name=".BluetoothService"  /> 
```

或者：

```
<service android:name="com.bugra.bluetoothcomponent.BluetoothService"  /> 
```

# java - Java设计模式/转换模式

> ID：16132531
> 
> 赞同：1
> 
> 时间：2013-04-21T15:01:41.637
> 
> 标签：java, oop, design-patterns

我有以下用例，其中我得到包含 JsonString1 的事件，我必须做一些处理/转换才能通过对象 4 到达对象 1。到目前为止，我只有一个这样的情况，而且将来可能会有更多这样的情况层次结构（最多 2-3 个）。

我无法决定用什么优雅的方式来编码。

```
 JsonString1
            |
        JsonString2
          /   \
JsonString3  JsonString4
    |            |
 Object1      Object2
                 |
              Object3 
```

我可以有一个抽象类来处理 JsonStrings 1 到 4 以及每种事件类型的具体实现。就像是

```
public abstract class AbstractEventProcessor {
    public AbstractEventProcessor(String jsonString1) {
         // Do processing to get JsonString2, JsonString3 and JsonString4
    }
}

public class Event1Processor extends AbstractEventProcessor {
    Event1Processor(String str) {
         super(str);
    }
    Object1 getObject1() { 
    }
    Object2 getObject2() { 
    }
    Object3 getObject3() { 
    }
} 
```

类似的实现会随着更多事件的出现而发生。

有一个更好的方法吗 ？

现在还有两件事是不变的，但在极少数情况下可能会改变。

1.  所有事件都会有 JsonString1 .. JsonString4 但最后的对象数量会有所不同。但在未来，这可能会改变。
2.  虽然字符串的格式可能会改变（比如从 json 到 xml）不太可能（但并非不可能）

我是否也可以通过为字符串转换提供接口来适应这种变化，或者这是一种矫枉过正的做法？

通常我被困在这样的地方，我试图找出最优雅的方式来做到这一点并最终花费大量时间？对此也有任何一般性建议吗？:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T16:44:03.757

目前还不是很清楚你到底想要什么。然而，即使没有它，当我看到你的等级制度时，它也有味道。*通常*，在我的代码审查期间，每当我看到像你这样的过于花哨的层次结构时，设计中就会出现问题。

尝试考虑使用装饰器来避免继承地狱。因此，您可以创建在不久的将来可能需要的任何组合。[从标准 java 类java.io.Reader](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html)及其子类中获得一些灵感。

对于您的情况，这意味着这样的事情（至少我如何理解您的描述）：

```
public interface EventProcessor {
    public BaseObject processJsonString(String jsonString);
}

public abstract class AbstractEventProcessor implements EventProcessor {
    final private EventProcessor processor;
    public AbstractEventProcessor(EventProcessor processor) {
        this.processor = processor;
    }
}

public class SpecialObject1 extends/implements BaseObject { ... }
public class SpecialObject2 extends/implements BaseObject { ... }
public class SpecialObject3 extends/implements BaseObject { ... }

// Each your future processor will look like this
public class Event1Processor extends AbstractEventProcessor implements EventProcessor {
    public Event1Processor(EventProcessor processor) {
        super(processor);
    }
    public SpecialObject1 processJsonString(String jsonString) {
        final SpecialObject1 result = (SpecialObject1) super.processJsonString(jsonString);
        // here you add this Event processor specific stuff
        ...
        return result;
    }
    // Maybe more methods here
}

public class Client {
    public void useEventProcessor() {
        final EventProcessor processor1 = new Event1Processor(new Event2Processor(new Event3Processor(null)));
        final SpecialObjectX object1 = processor.processJsonString(jsonString);

        final EventProcessor processor2 = new Event51Processor(new Event20Processor(new Event2Processor(null)));
        final SpecialObjectY object2 = processor2.processJsonString(jsonString);

    }
} 
```

# javascript - Javascript SDK: can i have another FB.api() calls inside FB.api()

> ID：16132532
> 
> 赞同：1
> 
> 时间：2013-04-21T15:01:47.957
> 
> 标签：javascript, facebook, facebook-javascript-sdk

```
// count total no. of groups created by me
function totalGroups(response) {
    FB.api('/me/groups', {fields:'owner'}, function(g_response) {
        for (i in g_response.data) {
            FB.api('/me', function(m_response) {
                var c = 0;
                if (g_response.data[i].owner.name == m_response.name) {
                    c++;
                }
            });
        }
        console.log('Total:' +c);
  });
} 
```

hi, can i have another FB.api() calls inside FB.api() like i do on the above code because i can't get the value for **if (g_response.data[i].owner.name == m_response.name)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:02:43.493

这就是我解决问题的方法，我知道它很丑，但这是我目前能做的最好的。

```
function totalGroups(response) {
    var c = 0;
    FB.api('/me', function(m_response) {
        FB.api('/me/groups', {fields:'owner'}, function(g_response) {
            for (i in g_response.data) {            
                if (g_response.data[i].owner) {
                    if (g_response.data[i].owner.name == m_response.name) {     
                        c++;
                    }
                }
            }
            console.log('Total: ' + c);
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:09:29.647

是的，您可以在另一个 Fb.api() 调用中嵌入一个 FB.api() 调用，但由于 FB.api() 调用是异步的，因此可以保证流程。我在您的代码中发现的一个问题与`var c`. 首先，它超出了`console.log('Total:' +c)`方法的范围，而且您已经在循环中声明了它，这意味着它的值将在每次循环执行后重置。

尝试这个：

```
// count total no. of groups created by me
function totalGroups(response) {
    var c = 0;
    FB.api('/me/groups', {fields:'owner'}, function(g_response) {
        for (i in g_response.data) {
            FB.api('/me', function(m_response) {               
                if (i.owner.name == m_response.name) {
                    c++;
                }
            });
        }
        console.log('Total:' +c);
});
} 
```

# jquery - 使用 jquery 和 modernizr 插入 html

> ID：16132549
> 
> 赞同：1
> 
> 时间：2013-04-21T15:03:53.370
> 
> 标签：jquery, html, debugging, modernizr

Modernizr 和 jQuery 的新手，但根据我看到的示例认为这会起作用。Modernizr 和 jQuery 脚本已加载，位于页面下方：

```
<div id="demo></div>
<script>
(function() {
    if (Modernizr.mq('only screen and (min-width: 500px)')) {
        $('div.demo').html('test');
    }
});
</script> 
```

那么我到底错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:05:52.793

我认为你需要：

```
$('div#demo') 
```

`#`表示一个 ID。

`.`表示一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:05:55.800

您错过`$`了 jQuery 代码，应该是：

```
$(function() 
```

以及您`id`为 div 指定的内容，因此您需要使用`#`而不是`.`：

```
$('div#demo') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:06:51.280

试试这个

```
<script>
$(function() {
if (Modernizr.mq('only screen and (min-width: 500px)')) {
$('div#demo').html('test');
  }
});
</script> 
```

# oracle - 将 oracle 形式 10g 连接到 oracle 11g 时出现 TNS 侦听器错误

> ID：16132554
> 
> 赞同：0
> 
> 时间：2013-04-21T15:04:26.277
> 
> 标签：oracle, oracle10g, oracle11g, oracleforms

我正在运行 oracle 11g，我正在尝试将表单/报告 10 与它连接，但我收到 TNS 侦听器错误。我可以使用 PHP、SQLPLUS 和 SQLDEVELOPER 连接到 oracle 11g DB。我在同一台 Windows 7 机器上运行 oracle 11g 和报告/表单 10g。

错误详情

```
ORA-12514: TNS:listener does not currently know of service requested i connect descriptor. 
```

listener.log 数据

```
Sun Apr 21 21:05:44 2013
21-APR-2013 21:05:44 * service_update * orcle * 0
Sun Apr 21 21:05:57 2013
21-APR-2013 21:05:56 * service_update * orcle * 0
21-APR-2013 21:06:06 * service_update * orcle * 0
Sun Apr 21 21:06:24 2013
21-APR-2013 21:06:23 * (CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=orcl)(SID=orcl)   (CID=(PROGRAM=G:\app\form10g\BIN\frmbld.exe)(HOST=APML-HP)(USER=APML))) * (ADDRESS=(PROTOCOL=tcp)(HOST=127.0.0.1)(PORT=49519)) * establish * orcl * 12514
TNS-12514: TNS:listener does not currently know of service requested in connect descriptor
Sun Apr 21 21:06:39 2013
21-APR-2013 21:06:39 * service_update * orcle * 0
21-APR-2013 21:06:45 * service_update * orcle * 0 
```

# jquery - 使用 JQuery 按顺序显示 div

> ID：16132564
> 
> 赞同：0
> 
> 时间：2013-04-21T15:05:38.243
> 
> 标签：jquery

我试图一个接一个地显示 3 个 div。我希望它们以 1,2,3,1,2,3,.... 的顺序显示，依此类推..

这是我正在使用的代码

```
//Initially setting the divs to be hidden
$(document).ready(function(e) {
    $(".1").css("visibility","hidden");
    $(".2").css("visibility","hidden");
    $(".3").css("visibility","hidden");
    myFun();
});

var x=1;

function myFun(){
switch(x)
{       
case 1:
    $(".3").css("visibility","hidden");
    $(".2").css("visibility","hidden");
    $(".1").css("visibility","visible");
    x++;
    break;

case 2:
    $(".1").css("visibility","hidden");
    $(".3").css("visibility","hidden");
    $(".2").css("visibility","visible");
    x++;
break;

case 3:
    $(".1").css("visibility","hidden");
    $(".2").css("visibility","hidden");
    $(".3").css("visibility","visible");
    x=1;

break;

}
//this might be wrong
$(this).delay(1000,myFun());
} 
```

这将显示三个 div，但没有延迟。我该如何进行延迟并再次调用相同的函数。有没有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:18:45.130

另一种方法

```
<div class="d d1">Div1</div>
<div class="d d2">Div2</div>
<div class="d d3">Div3</div> 
```

JS

```
 cycle(1);

function cycle(seqIndex) {    
  $('.d' + seqIndex).fadeIn(500, function() {
        $('.d' + seqIndex).hide();
        seqIndex = (seqIndex == $('.d').length) ? 1 : seqIndex+1
        cycle(seqIndex);            
    });
} 
```

小提琴：http: [//jsfiddle.net/XUFqu/](http://jsfiddle.net/XUFqu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:10:05.587

您将变量设置回`x`in`1`所以`case 3`我假设您想旋转。因此`setInterval`可能是正确的选择。

只需`window.setInterval(myFun, 1000);`在您的函数之外调用`myFun`，一切正常。

这是一个小提琴：http: [//jsfiddle.net/KHVvf/](http://jsfiddle.net/KHVvf/)

此外，类名不应以数字开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:10:06.780

您可以使用 setTimeout：

```
window.setTimeout(myFun, 1000);
window.setTimeout(myFun, 1000);
window.setTimeout(myFun, 1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T15:10:06.843

这可以帮助您：

```
var $divs = $('div');
function foo(){
    $divs.each(function(i){
        $(this).delay(i * 500).toggle(0);
    });
    foo();
}

foo(); 
```

但这取决于隐藏的**真正**原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T16:54:16.643

为什么不使用 display:none 代替可见性？

你可以试试这个，并不优雅，只是为了解释元素可见性继承：

使用 show() 函数，您可以设置动画结束后要执行的持续时间和回调，

给你的 div 一个公共类，这样你就可以一起引用 myclass ，例如：

```
<div class="myclass 1" >1</div>
<div class="myclass 2" >2</div>
<div class="myclass 3" >3</div>

$(document).ready(function(e) {
    $(".myclass").hide(); //maybe is better to hide them by Css
    fadeInAll()
});

 var delay = 500;

   //Show each div in sequence
    function fadeInAll(){
        $(".1").show(delay,function(){
               $(".2").show(delay,function(){
                     $(".3").show(delay,function(){
                         fadeOutAll()
                    })
               })
        })
    }

   //Hide each div in sequence 
    function fadeOutAll(){
        $(".1").hide(delay,function(){
               $(".2").hide(delay,function(){
                     $(".3").hide(delay,function(){
                         //Loop again
                         fadeInAll()
                    })
               })
        })
    } 
```

[这里](http://jsfiddle.net/sprvM/1/)是这个工作示例

# google-custom-search - 我如何让谷歌 cse 只搜索图像

> ID：16132569
> 
> 赞同：0
> 
> 时间：2013-04-21T15:06:00.467
> 
> 标签：google-custom-search

谷歌的自定义搜索引擎真的很棒。虽然我有问题。每当我搜索它时，它都有 2 个标签。（网络和图像）。当搜索某些内容时，我如何让它成为默认选项卡的图像选项卡。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T23:05:23.330

您可以在搜索框配置中使用“defaultToImageSearch”参数：

这里解释： [https ://developers.google.com/custom-search/docs/element#supported_attributes](https://developers.google.com/custom-search/docs/element#supported_attributes)

# c++ - C++ 时钟错误地测量时间

> ID：16132574
> 
> 赞同：1
> 
> 时间：2013-04-21T15:06:21.563
> 
> 标签：c++, time, clock, measure

我有一个读取 2 个输入文件的程序。第一个文件包含一些随机词，这些词被放入 BST 和 AVL 树中。然后程序查找第二个读取文件中列出的单词，并说明它们是否存在于树中，然后将收集到的信息写入一个输出文件。在执行此操作时，程序会打印出查找某个项目所花费的时间。但是，该程序似乎没有测量花费的时间。

```
BST* b = new BST();
AVLTree* t = new AVLTree();

string s;

ifstream in;
in.open(argv[1]);

while(!in.eof())
{
    in >> s;
    b->insert(s);
    t->insert(s);
}

ifstream q;    
q.open(argv[2]);

ofstream out;
out.open(argv[3]);

int bstItem = 0;
int avlItem = 0;
float diff1 = 0;
float diff2 = 0;

clock_t t1, t1e, t2, t2e;

while(!q.eof())
{
    q >> s;

    t1 = clock();
    bstItem = b->findItem(s);
    t1e = clock();

    diff1 = (float)(t1e - t1)/CLOCKS_PER_SEC;        

    t2 = clock();
    avlItem = t->findItem(s);
    t2e = clock();

    diff2 = (float)(t2e - t2)/CLOCKS_PER_SEC;

    if(avlItem == 0 && bstItem == 0)
        cout << "Query " << s << " not found in " << diff1 << " microseconds in BST, " << diff2 << " microseconds in AVL" << endl;

    else
        cout << "Query " << s << " found in " << diff1 << " microseconds in BST, " << diff2 << " microseconds in AVL" << endl;

    out << bstItem << " " << avlItem << " " << s  << "\n"; 
} 
```

我在进入 while 之前和完成之后得到的 clock() 值完全相同。所以看起来程序甚至根本没有运行while循环，所以它打印0。我知道情况并非如此，因为程序完成它应该需要大约10秒。此外，输出文件包含正确的结果，因此存在错误的 findItem() 函数的可能性也不正确。

我在 Stack Overflow 上做了一些研究，发现很多人都遇到了和我一样的问题。然而，我读过的答案都没有解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:36:06.860

我使用更高分辨率的时钟解决了我的问题，尽管时钟分辨率不是我的问题。我使用了 time.h 中的 clock_gettime()。据我所知，比 clock() 更高的时钟分辨率取决于平台，我在代码中使用的这种特殊方法仅适用于 Linux。我仍然没有弄清楚为什么我无法从clock() 中获得健康的结果，但我再次怀疑平台依赖性。

一个重要的注意事项，clock_gettime() 的使用要求您在编译代码时包含 POSIX 实时扩展。所以你应该这样做：

```
g++ a.cpp b.cpp c.cpp -lrt -o myProg 
```

其中 -lrt 是包含 POSIX 扩展的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:41:37.787

如果 (t1e - t1) < CLOCKS_PER_SEC 您的结果将始终为 0，因为整数除法被截断。将 CLOCKS_PER_SEC 转换为浮动。

diff1 = (t1e - t1)/((float)CLOCKS_PER_SEC);

# java - Reading from database postgresql in java and record of result in ArrayList

> ID：16132576
> 
> 赞同：-1
> 
> 时间：2013-04-21T15:06:25.537
> 
> 标签：java, database, postgresql, arraylist

I decided to remove the intermediate link and as a whole to simplify the decision, having transferred everything to the java program. There is a code on С++, reading of database postgresql

```
#include <iostream>

//using namespace std;

#include <stdio.h>
#include "libpq-fe.h"
#include <string>
#include <cstdio>
#include <stdlib.h>

int     main() {
    PGconn          *conn;
    PGresult        *res;
    int             rec_count;
    int             row;
    int             col;
    FILE            *stream;

    conn = PQconnectdb("hostaddr=192.168.143.93 port=5432 connect_timeout=10 dbname=NexentaSearch user=postgres password=postgres");
    if (PQstatus(conn) == CONNECTION_BAD) {
        fprintf(stderr, "Connection to database failed: %s\n",PQerrorMessage(conn));
     puts("No connection");
        exit(0);
    }

    res = PQexec(conn, "select path from tasks order by id");

    if (PQresultStatus(res) != PGRES_TUPLES_OK) {
        printf("We didn't get the data");
        exit(0);
    }

    rec_count = PQntuples(res); 
```

I want to execute the same request to postgresql to a database on Java and to write results in ArrayList . Help to make it please.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:13:00.063

看这个帖子：

1.  [连接 postgreqsl](http://www.mkyong.com/jdbc/how-do-connect-to-postgresql-with-jdbc-driver-java/)
2.  [完整示例](http://zetcode.com/db/postgresqljavatutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:13:33.420

你有两个问题：

1.  [如何使用 Java 与 PostgreSQL 交互。](http://docs.oracle.com/javase/tutorial/jdbc/basics/)
2.  [如何将查询结果集映射到集合。](https://stackoverflow.com/questions/7507121/efficient-way-to-handle-resultset-in-java)

第一个不难。从 DAO 的接口开始：

```
public interface PathDao {
    List<String> findAllPaths(); 
} 
```

创建一个实现：

```
public class PathDaoImpl implements PathDao {
    private static final String FIND_ALL_PATHS_QUERY = "select path from tasks order by id"; 
    private DataSource dataSource;

    public PathDaoImpl(DataSource dataSource) {
        this.dataSource = dataSource;
    }

    public List<String> findAllPaths() {
        List<String> paths = new ArrayList<String>();
        Statement st = null;
        ResultSet rs = null;
        try {
            st = this.dataSource.getConnection().createStatement(FIND_ALL_PATHS_QUERY);
            rs = st.executeQuery();
            paths = mapPathQuery(rs);
        } catch (Exception e) {
            throw new RuntimeException(e);
        } finally {
            DatabaseUtils.close(rs);
            DatabaseUtils.close(st);
        }    
        return paths;
    }

    private List<String> mapPathQuery(ResultSet rs) throws SQLException {
        List<String> paths = new ArrayList<String>();
        while (rs.next()) {
            paths.add(rs.getString("path");
        }
        return paths; 
    }
} 
```

第二个非常简单，因为您要求的是单个 String 列值。

```
public class DatabaseUtils {
    private DatabaseUtils() {}

    public static void close(Statement st) {
        try {
            if (st != null) {
                st.close();
            }
        } catch (Exception e) {
            e.printStackTrace(); // logging is a better solution
        }
    }

    public static void close(ResultSet rs) {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (Exception e) {
            e.printStackTrace(); // logging is a better solution
        }
    }
} 
```

# ruby - Ruby 正则表达式忽略第一个有效（？）匹配

> ID：16132577
> 
> 赞同：2
> 
> 时间：2013-04-21T15:06:47.890
> 
> 标签：ruby, regex

我正在尝试操作 SRT 字幕文件。文件开头的示例字符串`@data`：

```
1
00:01:09,611 --> 00:01:12,404
In co-production with

2
00:01:14,783 --> 00:01:17,034
presents 
```

`id`我将所有的's 与正则表达式匹配：

```
@data.scan(/^\d+\w*$/) 
```

但是，这忽略了第一个`1`，也是唯一的 output `2..900`。我以为我错过了正则表达式中的一些字符，并分析了`@data`：

```
puts @data[0,10].inspect => "1\n00:01:09,611 --> " 
```

我不明白为什么这首先`1`不匹配。也运行它`@data.match()`不会产生`1`但`2`.

`\n`然后我在 之前添加了一个`1`，它起作用了。但是，我不明白为什么`^`需要 a`\n`而不是字符串的真正开头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:49:47.830

如果问题是文档中的 BOM，Ruby 支持在读取文件时检查 BOM 以及使用多字节编码。[来自IO.new](http://ruby-doc.org/core-2.0/IO.html#method-c-new)的“IO 编码”文档：

> 如果使用“BOM|UTF-8”、“BOM|UTF-16LE”或“BOM|UTF16-BE”，ruby 会检查输入文档中的 Unicode BOM 以帮助确定编码。对于 UTF-16 编码，文件打开模式必须是二进制的。当存在时，将剥离 BOM 并使用 BOM 中的外部编码。当 BOM 缺失时，给定的 Unicode 编码用作 ext_enc。（BOM 集编码选项不区分大小写，因此“bom|utf-8”也是有效的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T15:30:47.630

正如@Dogbert 在评论中指出的那样，您的字符串开头有一个Unicode [BOM 。](http://en.wikipedia.org/wiki/Byte_order_mark)我怀疑这是编写您正在阅读的文件的任何程序的工件。您可以通过几种方式解决此问题 - 删除字符：

```
@data = @data[1..-1] if @data[0] == "\ufeff"
# or
@data.sub!(/\A\ufeff/, '') 
```

或者让您的扫描正则表达式将 BOM 视为行锚的开头，并具有积极的后视：

```
@data.scan(/(?:^|(?<=\ufeff))\d+\w*$/) 
```

或者，正如 Tin Man 指出的那样，让 ruby​​ 在读取数据时了解 BOM：

```
@data = File.read('somedata', nil, 0, 'r:BOM|UTF-8') 
```

# javascript - 如何在Firefox中等待图像加载时制作加载图像

> ID：16132578
> 
> 赞同：0
> 
> 时间：2013-04-21T15:06:47.813
> 
> 标签：javascript, html, firefox

我在使用 Firefox 时遇到了这个问题，在 chrome 上完美运行。

我正在创建一个幻灯片库，用户可以单击下一个或上一个在画廊中的图像之间切换。我正在尝试在用户等待实际图像加载时在切换图像之间创建加载图像。我目前要做的代码如下：

```
 function changePicture()
    {   
            var imagevar = document.getElementById('theimage');

            //display loading image
            imagevar.src = "/img/LoadingPage.png";

            //Load actual Image
            var imgURL = <IMAGE PATH>
            imagevar.onload = ShowImage(imgURL);    
    }

    function ShowImage(imgURL)
    {
        var imagevar = document.getElementById('theimage');
        imagevar.src = imgURL;
    } 
```

所以里面的逻辑很简单。在图像之间切换时加载“加载中的图像”，当“加载中的图像”完成加载后，在“实际图像”中开始加载。当实际图像完成加载后，它应该会显示出来。

在 Firefox 中，所有发生的事情都是在加载下一个图像时图像将挂在前一个图像上，当加载下一个图像时，它将显示新图像。但是“加载图像”永远不会显示/显示。

我还尝试直接隐藏图像，直到它被加载并在 onLoad 上再次取消隐藏它。但所发生的只是图像将一直挂在前一个图像上，直到当前图像加载，而不是真正隐藏图像。

所有这些技术都可以在 chrome 上完美运行。有人可以帮我解决如何让它在 Firefox 上运行或知道更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:23:29.197

问题是您的逻辑在同一个图像元素上运行。加载图像应该与用于显示内容的图像分开。

这是在图像元素上加载新图像的代码，当发生这种情况时，我们会在某处显示加载图像，直到其他加载。

```
function showGalleryImage(path){
  //get our placeholder
  var theImage = document.getElementById('theimage');

  //show our loading image. usually overlaying theImage
  showLoadingImage(true);

  //set our handler to check if loaded
  theImage.onload = function(){
    //when loaded, hide
    showLoadingImage(false);
  }

  //start loading the new image
  theImage.src = path;
}

function showLoadingImage(state){
  //get our loading image placeholder
  var loadingImage = document.getElementById('loadingImage');

  //set our display states
  var displayState = state ? 'block' : 'none';
  loadingImage.style.display = displayState;
} 
```

# android - Android警报在单独的进程中不触发

> ID：16132582
> 
> 赞同：0
> 
> 时间：2013-04-21T15:06:56.133
> 
> 标签：android, multithreading, alarm

以下代码来自我的 MANIFEST.XML 文件

以下工作：
`<receiver android:name="com.PageP.Alarm>`
但是，当我添加进程时它不会触发：
`<receiver android:process=":remote" android:name="com.PageP.Alarm>`

我有一个断点： `public void onReceive(Context context, Intent intent)`

如果没有远程进程，它可以工作，如果我添加远程进程，它就会停止工作。

我错过了什么？？？

好的，让我发布我的 ASYNC HTTPGET

```
package com.PageP;

import java.io.IOException;

import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

import android.os.AsyncTask;

public class GrabURL extends AsyncTask<String, Void, Void> {
    private HttpClient Client = new DefaultHttpClient();
    private String content;
    private String Error = null;
    private String url = null;

    protected void onPreExecute() {
 //       Dialog.setMessage("Downloading source..");
 //       Dialog.show();
    }

    protected Void doInBackground(String... urls) {
        url = urls[0];
        try {
            HttpGet httpget = new HttpGet(urls[0]);
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            content = Client.execute(httpget, responseHandler);
        } catch (ClientProtocolException e) {
            Error = e.getMessage();
            cancel(true);
        } catch (IOException e) {
            Error = e.getMessage();
            cancel(true);
        }

        return null;
    }

    protected void onPostExecute(Void unused) {
      Login.GotURL(content, url);
      Client = null;
    }

} 
```

然后我称之为

```
public static void Ping(String Args) {
 final GrabURL wget = new  GrabURL();
 String url = "";

 url = MyAuth("PING")+ Args;
 wget.execute(PPURL+url);
} 
```

当我的警报触发时，我希望它保持清醒，以便在我解码返回的 HTML 的另一端接收数据。当 Android 进入睡眠模式时，我遇到了问题，它不能可靠地接收 HTML 返回的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:41:01.183

> 我错过了什么？

由于拥有一个单独的流程通常是一个坏主意，因此请不`android:process`要这样做。

> 我需要它保持清醒足够长的时间调用异步 wget 并处理返回的 html。

我不知道您认为“异步 wget”是什么意思。我将假设您的字面意思是您正在将 ARM 编译的`wget`二进制文件与您的应用程序一起打包，这真是难以言喻。

此外，Android 将在几秒钟内终止您的进程，以占用该进程的主应用程序线程。因此，您将浪费 RAM、CPU 和电池而没有特别的优势。

使用`HttpUrlConnection`或`HttpClient`执行您的 HTTP 请求（“async wget”），来自`WakefulIntentService`或您自己的`IntentService`，处理与使用警报有关的`WakeLock`问题。为您提供一个后台线程（进行长时间运行的工作所必需的），并在不再需要时自动关闭（这是必要的，因此用户不会使用任务杀手攻击您以损害他们的设备）。`_WAKEUP``IntentService`

> 我可以进入一个 do/loop 并在其中休眠，每 250 毫秒醒来一次以查看数据是否已进入

如果您使用`HttpUrlConnection`或`HttpClient`执行您的 HTTP 请求，您将通过这些 API 知道“数据是否已进入”。

> 有设定的超时时间

如果您使用`HttpUrlConnection`或`HttpClient`执行您的 HTTP 请求，您将能够指定请求超时期限。

# html - ActionScript - 单击并转到 URL，在当前选项卡上打开

> ID：16132583
> 
> 赞同：1
> 
> 时间：2013-04-21T15:07:02.437
> 
> 标签：html, flash, iframe, actionscript, google-swiffy

我用actionscript（我不太了解）创建了一个flash动画，并且我已经将它转换为带有swiffy的html5。

我想知道当单击“单击并转到网页”按钮时是否有可能在当前选项卡中打开 URL 而不是新选项卡？我试过用谷歌搜索它，但什么也没出现。

这是出现在 Flash 中的动作脚本。我会省去你快速生成的代码！

```
forumgo.addEventListener(MouseEvent.CLICK, fl_ClickToGoToWebPage);

function fl_ClickToGoToWebPage(event:MouseEvent):void
{
navigateToURL(new URLRequest("http://www.adobe.com"), "_blank");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:24:49.720

将“_blank”更改为“_self”，转换后应该可以工作。

```
navigateToURL(new URLRequest("http://www.adobe.com"), "_self"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:23:54.333

知道了！它应该是 _parent 而不是 _blank

```
forumgo.addEventListener(MouseEvent.CLICK, fl_ClickToGoToWebPage);

function fl_ClickToGoToWebPage(event:MouseEvent):void
{
navigateToURL(new URLRequest("http://www.adobe.com"), "_parent");
} 
```

# android - 在所有设备上具有额外相同的布局。如何？

> ID：16132584
> 
> 赞同：0
> 
> 时间：2013-04-21T15:07:04.413
> 
> 标签：android, layout, adt, device

我想在所有设备上制作具有完全相同布局的游戏。我熟悉`dp`,`wrap_content`和`fill_parent`。但他们不会产生完全相同的布局。

有没有办法以相对于屏幕宽度和高度的百分比来制作各种视图的宽度和高度，以及它们从设备屏幕边缘的宽度？

就像是：

```
android:layout_width="40%" 
```

我知道上面的 XML 代码不起作用，但是有解决方法吗？没有Java解决方案吗？某物？下图中是我试图在所有设备中实现的目标。

![在此处输入图像描述](https://i.stack.imgur.com/keKgd.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:13:34.047

> 我知道上面的 XML 代码不起作用，但是有解决方法吗？

`LinearLayout`并`android:layout_weight`允许您按百分比工作。以下布局包含三个按钮，分别占屏幕的 50%、30% 和 20%：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <Button
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="50"
        android:text="@string/fifty_percent"/>

    <Button
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="30"
        android:text="@string/thirty_percent"/>

    <Button
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="20"
        android:text="@string/twenty_percent"/>

</LinearLayout> 
```

要按百分比执行操作，请将宽度或高度（`LinearLayouts`分别用于水平或垂直）设置为`0dp`，然后分配`android:layout_weight`给所需的百分比（例如，`20`）。如果权重之和不会加到 100，`android:weightSum="100"`则加到`LinearLayout`自身。

当然，对于术语“EXACT”的任何常规定义，按百分比做事不会为您提供“完全相同的布局”。但是，也许它会满足您的需求。它当然可以从您的屏幕截图中实现标记设计。

# php - 如果内容类型错误，则中止 curl 下载

> ID：16132586
> 
> 赞同：1
> 
> 时间：2013-04-21T15:07:05.423
> 
> 标签：php, curl, content-type

我正在建立一个用户可以发布链接的网站，curl（在 php 中）将抓取 url，并根据元数据格式化某些内容、打开图形标签等。我将其设置为运行同时上传使用 multi_init 和 multi_exec。我在这里为课程创建了一个要点[。](https://gist.github.com/kennethrapp/7eb1aa92e5cfb87a599a)它应该做的是：

*   从多个 url 获取元数据
*   返回单个 json 字符串，但仅适用于内容类型为 'text/html' 的页面（因此不要为图像、js、可执行文件等的直接链接而烦恼）

问题似乎是 CURLOPT_HEADERFUNCTION 的回调。我认为当内容类型标头存在但不是 html 标头时让它返回 -1 会中止下载，但它似乎没有做任何事情（尽管检查看起来正确并且它似乎返回 -1。 ) 它似乎仍然允许任何内容类型通过。

这里具体是回调：

```
CURLOPT_HEADERFUNCTION  => function($ch, $header){

// if they're sending a content-type header, it must be text/html
 if(stripos(trim($header), "Content-Type") === 0){  

 list($key, $val) = explode(":", $header);

 if(stripos(trim($val), "text/html") === 0){
    return strlen($header);
  }
  else{
    return -1;
  }
}
else{ 
    return strlen($header);
}
} 
```

我尝试了 curl_close 但在回调中关闭 curl 时出错。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:42:09.300

使用回调设置（全局）变量。`curl_exec()`假时跳过你的电话。

```
$htmlheader = true;
function header_callback($ch, $headers)
{
    $GLOBALS['htmlheader']=false;
}
$ch = curl_init('http://www.example.com/');
curl_setopt($ch,CURLOPT_HEADERFUNCTION,  'header_callback');
if($htmlheader)
{
    $result = curl_exec($ch);
}   
curl_close($ch); 
```

# c# - C#：从嵌入资源中的备份恢复 SQL Server DB

> ID：16132590
> 
> 赞同：0
> 
> 时间：2013-04-21T15:07:21.747
> 
> 标签：c#, sql-server, embedded-resource

我有一个包含 SQL Server 2012 数据库备份的文件。我将此文件与 C# WinForms 应用程序一起使用，该应用程序创建一个数据库，将备份恢复到其中，然后执行更多功能。

我不想只是将此备份文件添加到我的应用程序中，因为这是一个安全问题。我在想我应该将备份添加为嵌入式资源，然后将其保存到临时文件中，从中恢复并删除它。

有一个更好的方法吗？有没有办法通过我可以传递给 SQL 服务器以在 RESTORE DATABASE 命令中使用的文件路径直接访问嵌入式资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:12:45.183

SQL Server 不知道如何从可执行文件中的内容恢复数据库。鉴于您声明您认为它能够成为嵌入式资源，我将假设它不是“最后一次正确的”备份，而是更多的“默认”备份。

如果我的想法是正确的，那么您基本上是在说您有一个默认设置。如果是这种情况，您根本不需要备份，您的代码只需要能够创建一个数据库并用某些东西填充它以“成为”默认状态。通过将备份作为资源嵌入，您（在我看来）表明结构和数据是众所周知的，那么为什么要走这`RESTORE DATABASE`条路呢？

# google-maps - Google Maps Places API 只返回城市？

> ID：16132591
> 
> 赞同：13
> 
> 时间：2013-04-21T15:07:23.720
> 
> 标签：google-maps, google-maps-api-3

我正在尝试使用 Google 的地图 API 仅从他们的 json 请求中返回城市：

```
 https://maps.googleapis.com/maps/api/place/autocomplete/json?input=green%20lanes&types=geocode&sensor=false&types=regions&key=*API KEY HERE* 
```

关键是，`&types=regions`但它仍然返回所有结果。

例如，我正在搜索街道`Green Lanes`，而不是返回可能包含`Green Lanes`其返回伦敦街道作为最高结果的城市。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-26T03:07:32.967

[https://maps.googleapis.com/maps/api/place/autocomplete/json?input=green%20lanes&types=geocode&sensor=false&types=regions&key=](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=green%20lanes&types=geocode&sensor=false&types=regions&key=) *API KEY HERE*

应该

[https://maps.googleapis.com/maps/api/place/autocomplete/json?input=green%20lanes&sensor=false&types=(regions)&key=](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=green%20lanes&sensor=false&types=(regions)&key=) *API KEY HERE*

零结果，因为区域不搜索街道名称：

(regions) 类型集合指示 Place 服务返回匹配以下类型的任何结果： locality sublocality postal_code country Administrative_area1 Administrative_area2

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-11-17T20:23:41.117

这是一个老问题，但接受的答案对于特定问题是不正确的。

`types`仅返回城市的参数的正确参数是`(cities)`. 所以完整的 URL 将是：

[https://maps.googleapis.com/maps/api/place/autocomplete/json?input=green%20lanes&types=(cities)&key=](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=green%20lanes&types=(cities)&key=) *API_KEY_HERE*

[您可以在此处](https://developers.google.com/places/supported_types#table3)查看更多信息。另外，我省略了`sensor`参数，因为[它不再需要了](https://stackoverflow.com/questions/8616764/what-is-the-sensor-parameter-for-in-the-google-places-api)。

# android - 无法解析 IntelliJ 中的符号 BitmapFactory.decodeResource

> ID：16132596
> 
> 赞同：3
> 
> 时间：2013-04-21T15:08:02.630
> 
> 标签：android, intellij-idea, bitmapfactory

我尝试在我的 Activity 中使用类 BitmapFactory 的方法 decodeResource ，如下所示：

```
Bitmap image = new BitmapFactory.decodeResource(getResources(),R.drawable.my_image); 
```

我进行了所有必要的导入，IntelliJ 甚至在我键入它时为我完成了方法，但是当我尝试编译时它给了我错误：

```
java: cannot find symbol

symbol:   class decodeResource 

location: class android.graphics.BitmapFactory 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T15:13:45.400

删除`new`，因为`decodeResource`是静态方法，

像这样使用

```
Bitmap image = BitmapFactory.decodeResource(getResources(),R.drawable.my_image); 
```

# php - 通过 .htaccess 或 PHP 删除 URL 中的重复斜杠和反斜杠

> ID：16132597
> 
> 赞同：1
> 
> 时间：2013-04-21T15:08:11.323
> 
> 标签：php, .htaccess, url, rewrite

我想完全删除 URL 末尾的所有斜杠或反斜杠。

`http://www.mp7.org/?site=69.com\\\\\\\\\\\\\`

通过 .htaccess 或 PHP。

以下 .htaccess 规则不起作用：

`RewriteRule ^(.*)[/\]+$ $1 [L,R=301]`

```
#### mod_rewrite in use
Options +FollowSymlinks
RewriteEngine On 
```

请提供替代解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:14:30.127

您可以执行以下操作：

```
$string = substr($string, 0, strpos($string, "\\")); 
```

如果没有 \ 会更早出现

* * *

**编辑：** 要测试的完整代码：

```
<?php
$string = "http://www.mp7.org/?site=69.com\\\\\\\\\\\\\\\\\\\\\\\\\\";
$string = substr($string, 0, strpos($string, "\\"));
echo($string);
?> 
```

# c - 为什么 printf 在输出的时候会连接两个变量，但是只有在没有指定字符串长度的情况下？

> ID：16132598
> 
> 赞同：-1
> 
> 时间：2013-04-21T15:08:12.693
> 
> 标签：c

任何人都知道为什么 printf 在输出时连接这两个变量，但前提是没有指定字符串的长度？

```
#include <stdio.h>
int main(){
char myname[3] = "tim";
char myage[3] = "ten";
printf("myname is:%s \n", myname);
printf("myage is:%s \n", myage);
} 
```

我的名字是：蒂姆

我的年龄是：tentim

...但是当我没有指定字符串的长度时，它似乎可以按我的预期工作，而无需打印两个变量。

```
#include <stdio.h>
int main(){
char myname[] = "tim";
char myage[] = "ten";
printf("myname is:%s \n", myname);
printf("myage is:%s \n", myage);
} 
```

我的名字是：蒂姆

我的年龄是：十

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T15:10:04.123

您将数组声明为具有大小`3`，但您尝试在`4`其中存储元素。由于只有`3`元素有足够的内存，所以最后一个元素（*字符串 null 终止符`\0`*）没有剩余内存，这会使您的字符数组没有 null 终止符。
请注意，c 中的字符数组应为空终止，以便您可以使用`printf`. 这是因为`printf`简单地遍历字符数组直到遇到`\0`. 在您的第一个示例中，由于数组从未`\0`终止，因此您最终得到的是未定义的行为。（*实际上，`pintf`将继续打印直到遇到`\0`并且在读取超出分配给数组的内存范围的过程中*）

在第二种情况下，由于您没有自己指定大小，因此根据字符串中指定的元素数量选择适当的大小，即：4 并且`\0`终止就位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T15:25:05.957

您没有在数组中为空终止符留出足够的空间。在 C 中，当您使用长度完全相同的字符串初始化 char 数组时，会删除空终止符。

```
char myname[3] = "tim"; // equivalent to char myname[3] = {'t','i','m'};
char myage[3] = "ten"; // equivalent to char myage[3] = {'t','e','n'}; 
```

如果没有空终止符，printf 函数不知道何时停止打印字符串，因此它会一直转到`myage`数组之后的下一个内存位置，这恰好是`myname`数组的存储空间。堆栈可能如下所示：

```
t <- beginning of myage
e
n
t <- beginning of myname
i
m
\0  <- a null terminator, by coincindence. 
```

名字后面没有其他垃圾的事实只是一个巧合。任何东西都可能存储在您的`myname`数组之后，但在您的情况下它是一个空字符，因此 printf 停止打印。

如果您没有为数组指定大小，则选择比字符串长度大一的大小，以便可以存储空终止符：

```
char myname[] = "tim"; // equivalent to myname[4] = {'t','i','m','\0'};
char myage[] = "ten";  // equivalent to myage[4] =  {'t','e','n','\0'}; 
```

现在您的空终止符已明确放置，您的堆栈如下所示：

```
t <- beginning of myage
e
n
\0 <- explicit null terminator
t <- beginning of myname
i
m
\0  <- explicit null terminator. 
```

现在 printf 函数确切地知道何时停止打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:38:27.157

该`%s`指令对应于指向*字符串*的参数。字符串是一个以第一个结尾的字符序列`'\0'`。但是，您没有为第一个示例中的数组提供足够的空间 a `'\0'`，因此这些数组不包含字符串。

printf 认为存在一个字符串，并继续打印字符，直到遇到`'\0'`属于字符串末尾的那个字符。如前所述，没有`'\0'`字符是因为没有空间。您的代码导致 printf 访问数组边界之外的字节，这是未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T15:14:08.643

并且假设`myname[3]`有`myage[3]`一个终止的地方`\0`。因此，您实际上只能在每个数组中存储**2 个符号。**

在第二种情况下，编译器自动设置大小等于`4`足以存储字符串的大小。

# asp.net - 关闭解决方案并重新打开时，TFS 源绑定断开连接

> ID：16132599
> 
> 赞同：0
> 
> 时间：2013-04-21T15:08:23.477
> 
> 标签：asp.net, .net, tfs

当我关闭解决方案并重新打开解决方案时，它将断开源绑定并给出消息 TFS 处于脱机状态我如何解决这个问题？

# java - 为什么这个活动没有开始？

> ID：16132601
> 
> 赞同：0
> 
> 时间：2013-04-21T15:08:34.273
> 
> 标签：java, android

我是android开发的新手。我有一项活动甚至没有发挥其`onCreate()`功能。我正在使用一些“Log.d”来检查控制流，并且其中没有 Log.d`onCreate`在运行时被执行。我究竟做错了什么？课程的开始部分如下：

```
 public class MainActivityap extends Activity
    implements IMediaPlayerServiceClient {
    private StatefulMediaPlayer mMediaPlayer;

    private StreamStation mSelectedStream = new StreamStation("","http://nbc.com/154.mp3");
    private MediaPlayerService mService;
    private boolean mBound;

    private ProgressDialog mProgressDialog;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d("msg", "msg0");
        super.onCreate(savedInstanceState);
        Log.d("msg", "msg1");
        setContentView(R.layout.main);
        Log.d("msg", "msg2");
        bindToService();
        Log.d("msg", "msg3");
        mProgressDialog = new ProgressDialog(this);
        Log.d("msg", "msg4");
        initializeButtons();
        setupStationPicker();
    }..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:30:50.743

将评论转换为答案。

在 中注册您的活动`AndroidManifest.xml`。

```
<activity
        android:name="MainActivityap"
    /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:32:21.340

可能是您尚未在清单中注册您的活动...

或者如果注册了你可能没有在其中设置过滤器..

```
 android:name=".MainActivityap"

        android:label="@string/app_name" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />

        </intent-filter>

    </activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:18:34.590

您是否在 AndroidManifest.xml 中将此 Activity 注册为启动 Activity？像这样：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"    package="com.dutycode.chatchatmain" android:versionCode="1" android:versionName="1.0">
<uses-sdk android:minSdkVersion="9" android:targetSdkVersion="17"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<application android:allowBackup="true" android:icon="@drawable/chatchat" android:label="@string/app_name" android:theme="@style/AppTheme">
     <activity android:name="com.dutycode.chatchatmain.LoginActivity" android:label="@string/app_name" android:windowSoftInputMode="adjustResize|stateVisible">
          <intent-filter>
                 <action android:name="android.intent.action.MAIN"/>
                 <category android:name="android.intent.category.LAUNCHER"/>
          </intent-filter>
     </activity>

</application>
</manifest> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T15:14:36.083

注册您的活动`AndroidManifest.xml`

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.package" 
    ... >

     <activity android:name="MainActivityap" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

即使它*不是你的主要活动*，你也必须注册它，没有`<intent-filter>`

```
 <activity
        android:name="MainActivityap"
    /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T15:14:54.443

很可能您尚未在其中注册您的活动，`AndroidManifest.xml`或者您已注册但未指定`<intent-filters>`. 添加这个：

```
 <activity
        android:name="<com.yourpackage.yourapp>.MainActivityap"
        android:label="@string/app_name" >
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# python - 在 XML 中呈现多种编码

> ID：16132607
> 
> 赞同：0
> 
> 时间：2013-04-21T15:09:42.093
> 
> 标签：python, xml, json, encoding, utf-8

我正在提供一个电子邮件 API，它允许您通过 XML/JSON 获取某些电子邮件的内容。

我的问题是，我有一个列表视图，我想一次显示多封电子邮件的文本。并且文本使用不同的编码进行编码。

我尝试放置特定的编码文本而不是 XML 的 CDATA 部分，以便它被允许。但现在我仍然得到错误：

```
This page contains the following errors:

error on line 45 at column 23: Input is not proper UTF-8, indicate encoding !
Bytes: 0x10 0x30 0x30 0x33 
```

我在这些电子邮件中有各种字符编码，从 ISO 到拉丁文等。我可以在 XML 编码中声明没有错误的“通用”编码吗？

JSON 序列化运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:24:56.483

如果您有办法知道传入数据的编码，只需将其解码为 Unicode，然后在创建 XML 之前将其编码为 UTF-8。

```
# e.g. latin1 -> utf-8
text.decode('latin1').encode('utf-8') 
```

# c - 强制每 1 秒调用一次警报处理程序（在 C 中）

> ID：16132608
> 
> 赞同：-1
> 
> 时间：2013-04-21T15:09:53.270
> 
> 标签：c, unix, signals, alarm

我正在尝试做的主要思想：

我的目标是每 1 秒调用一次 alarm_handler，尽管有其他信号（在本例中为 SIGUSR2）。为此，我在 pause() 语句之前编写了 alarm(1)。

但是，实际上发生的事情是，如果我多次收到 SIGUSR2 信号，则永远不会调用 alarm_handler （而我确实希望每 1 秒调用一次）。

注意：我不想忽略 SIGUSR2 信号。我希望它们完成，但我必须确保每 1 秒完成一次 alarm_handler。

这是主要的：

```
int main(int argc, const char* argv[])
{
signal(SIGUSR2, sig_readPipe);
signal(SIGALRM, alarm_handler);

do
{
    alarm(1);
    pause();
}while(stopFlag);

return 0;
} 
```

这里是信号处理程序：

```
void sig_readPipe(int sig)
{
signal(SIGUSR2, sig_readPipe);
.
.
.
}

void alarm_handler(int sig)
{
signal(SIGALRM, alarm_handler);
.
.
.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:27:12.853

将每秒需要处理的任何内容放入一个单独的函数中，并在该函数中将全局计数器设置为当前时间。每次调用任何信号处理程序时，它都应检查计数器是否与当前秒匹配，如果不匹配，则调用 run_this_every_second()。

# php - 获取 Twitter 用户主页的简单方法

> ID：16132609
> 
> 赞同：0
> 
> 时间：2013-04-21T15:10:00.670
> 
> 标签：php, javascript, twitter, twitter-oauth

有谁知道使用 oAuth 检索用户主页提要（使用 PHP 或 JavaScript）的好方法？我一直在搜索网络（谷歌、YouTube 和 Twitter 网站），但还没有找到像 developer.facebook.com 这样的简单教程。

如果您知道一个很好的教程，或者您编写了一些有效的代码，我会很高兴看到它。我更喜欢整个过程，从授权用户到显示他们的提要，但任何事情都比我现在拥有的要好。

希望得到解答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:13:55.077

OAuth 是一种身份验证方法，您应该使用 Twitter 提供的 REST API。

请检查：[https](https://dev.twitter.com/docs/api/1.1) : //dev.twitter.com/docs/api/1.1（statuses/user_timeline）

**编辑：**

[https://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)

请查看“使用示例代码的扩展流程”部分，这里有您想知道的一切。

请注意，如果您有长期访问令牌（从您的应用仪表板，请参阅 oauth 选项卡），您只需在创建 TwitterOAuth 类的新实例时将令牌和令牌密码作为第三个和第四个参数传递，如下所示：

```
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, OAUTH_TOKEN,
OAUTH_SECRET); 
```

# redirect - 此网页有一个重定向循环 - IIS7

> ID：16132611
> 
> 赞同：0
> 
> 时间：2013-04-21T15:10:05.220
> 
> 标签：redirect, iis-7, web-config, redirect-loop

我有一个小网站，我在 iFrame 中有一个邮件列表联系表单，一旦提交，我在邮件列表服务中注册的回调页面就会被调用，显示在 iFrame 中并要求用户检查他们的电子邮件。我注册的页面是[http://mydomain.com/verify.html](http://mydomain.com/verify.html)。在 vertify.html 我使用“window.parent.document.getElementById('lightbox4').style.display='none';” 关闭包含 I 帧的灯箱 div。这一切都很好，只要用户最初访问[http://mydomain.com](http://mydomain.com)，但如果他们访问[http://www.mydomain.com](http://www.mydomain.com)，然后调用“window.parent.document.getElementById('lightbox4')。 style.display='无';" 不起作用，因为它是一个跨域请求。

所以，我认为没问题，我将创建一个重定向规则来将调用从 www.mydomain.com 转换为 mydomain.com。但是现在，当我尝试访问 www.mydomain.com 或 mydomain.com 时，出现错误“此网页具有重定向循环”。在 IIS7 中，我有两个绑定，一个用于 mydomain.com，一个用于 www.mydomain.com。我的 DNS 区域有一个 mydomain.com 的 A 记录和一个 www.mydomain.com 的 CNAME。

我在这里做傻事吗？有没有办法调试这个？我可以在 Firefox 中看到，使用 Live HTTP 标头插件，将 URL 从 www.mydomain.com 正确重定向到 mydomain.com ，但随后尝试继续尝试将 mydomain.com 重定向到 mydomain.com，从而创建了无限循环：

```
http://www.mydomain.com/

GET / HTTP/1.1
Host: www.mydomain.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:20.0) Gecko/20100101 Firefox/20.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive

HTTP/1.1 302 Redirect
Content-Type: text/html; charset=UTF-8
Location: http://mydomain.com/
Server: Microsoft-IIS/7.0
X-Powered-By: ASP.NET
Date: Sun, 21 Apr 2013 15:20:12 GMT
Content-Length: 150
----------------------------------------------------------
http://mydomain.com/

GET / HTTP/1.1
Host: mydomain.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:20.0) Gecko/20100101 Firefox/20.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive

HTTP/1.1 302 Redirect
Content-Type: text/html; charset=UTF-8
Location: http://mydomain.com/
Server: Microsoft-IIS/7.0
X-Powered-By: ASP.NET
Date: Sun, 21 Apr 2013 15:20:12 GMT
Content-Length: 150
----------------------------------------------------------
http://mydomain.com/

GET / HTTP/1.1
Host: mydomain.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:20.0) Gecko/20100101 Firefox/20.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive

HTTP/1.1 302 Redirect
Content-Type: text/html; charset=UTF-8
Location: http://mydomain.com/
Server: Microsoft-IIS/7.0
X-Powered-By: ASP.NET
Date: Sun, 21 Apr 2013 15:20:12 GMT
Content-Length: 150
----------------------------------------------------------
and it keeps going until "This webpage has a redirect loop" is displayed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:40:20.600

我希望我必须为 www.mydomain.com 创建一个新的虚拟目录，然后将其重定向到 mydomain.com，但这似乎很尴尬。

# visual-studio - System.Data.Common.DbConnection 在我的 win 8 应用程序中无法解析

> ID：16132624
> 
> 赞同：0
> 
> 时间：2013-04-21T15:11:13.420
> 
> 标签：visual-studio, ms-access, windows-8, microsoft-metro

真的很奇怪...我正在尝试访问我的 win 8 应用程序中的 mdb 文件。这是我的简单代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data;
using System.Data.Common;
using System.Data.OleDb;

 string strConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=Assets/File.mdb";
 string strSQL = "SELECT CF FROM Comuni WHERE Comune = '" + m_strComNasc + "'";
 OleDbConnection myConn = new OleDbConnection(strConn);
 OleDbCommand myCmd = new OleDbCommand(strSQL, myConn);
 myConn.Open();
 OleDbDataReader myReader = myCmd.ExecuteReader();
 if (myReader.Read())
      strConn = myReader.GetString(0);
 else
      strConn = "";

 myReader.Close();
 myConn.Close(); 
```

在解决方案资源管理器参考中，我完成了添加参考并选择了“C:\Program Files\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\System.Data.dll”...

这些是错误：

```
The base class or interface 'System.ComponentModel.Component' in assembly 'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' referenced by type 'System.Data.Common.DbConnection' could not be resolved    c:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\System.Data.dll

The base class or interface 'System.ComponentModel.Component' in assembly 'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' referenced by type 'System.Data.Common.DbCommand' could not be resolved   c:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\System.Data.dll

The base class or interface 'System.MarshalByRefObject' in assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' referenced by type 'System.Data.Common.DbDataReader' could not be resolved    c:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\System.Data.dll 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:47:32.410

您不能在 Metro (Windows Store) 应用程序中使用 ADO.Net。如果您查看[.NET for Windows Store apps - supported APIs](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)页面，您将看到`System.Data`命名空间不存在。

# r - 如何避免 data.table 中的优化警告

> ID：16132625
> 
> 赞同：3
> 
> 时间：2013-04-21T15:11:28.823
> 
> 标签：r, data.table

我有以下代码：

```
> dt <- data.table(a=c(rep(3,5),rep(4,5)),b=1:10,c=11:20,d=21:30,key="a")
> dt
    a  b  c  d
 1: 3  1 11 21
 2: 3  2 12 22
 3: 3  3 13 23
 4: 3  4 14 24
 5: 3  5 15 25
 6: 4  6 16 26
 7: 4  7 17 27
 8: 4  8 18 28
 9: 4  9 19 29
10: 4 10 20 30
> dt[,lapply(.SD,sum),by="a"]
Finding groups (bysameorder=TRUE) ... done in 0secs. bysameorder=TRUE and o__ is length 0
Optimized j from 'lapply(.SD, sum)' to 'list(sum(b), sum(c), sum(d))'
Starting dogroups ... done dogroups in 0 secs
   a  b  c   d
1: 3 15 65 115
2: 4 40 90 140
> dt[,c(count=.N,lapply(.SD,sum)),by="a"]
Finding groups (bysameorder=TRUE) ... done in 0secs. bysameorder=TRUE and o__ is length 0
Optimization is on but j left unchanged as 'c(count = .N, lapply(.SD, sum))'
Starting dogroups ... The result of j is a named list. It's very inefficient to create the same names over and over again for each group. When j=list(...), any names are detected, removed and put back after grouping has completed, for efficiency. Using j=transform(), for example, prevents that speedup (consider changing to :=). This message may be upgraded to warning in future.
done dogroups in 0 secs
   a count  b  c   d
1: 3     5 15 65 115
2: 4     5 40 90 140 
```

如何避免可怕的“非常低效”警告？

我可以`count`在加入之前添加列：

```
> dt$count <- 1
> dt
    a  b  c  d count
 1: 3  1 11 21     1
 2: 3  2 12 22     1
 3: 3  3 13 23     1
 4: 3  4 14 24     1
 5: 3  5 15 25     1
 6: 4  6 16 26     1
 7: 4  7 17 27     1
 8: 4  8 18 28     1
 9: 4  9 19 29     1
10: 4 10 20 30     1
> dt[,lapply(.SD,sum),by="a"]
Finding groups (bysameorder=TRUE) ... done in 0secs. bysameorder=TRUE and o__ is length 0
Optimized j from 'lapply(.SD, sum)' to 'list(sum(b), sum(c), sum(d), sum(count))'
Starting dogroups ... done dogroups in 0 secs
   a  b  c   d count
1: 3 15 65 115     5
2: 4 40 90 140     5 
```

但这看起来不太优雅......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:23:44.163

我能想到的一种方法是`count`通过引用分配：

```
dt.out <- dt[, lapply(.SD,sum), by = a]
dt.out[, count := dt[, .N, by=a][, N]]
# alternatively: count := table(dt$a)

#    a  b  c   d count
# 1: 3 15 65 115     5
# 2: 4 40 90 140     5 
```

* * *

**编辑1：**我仍然认为这只是消息而不是警告。但是，如果您仍然想避免这种情况，请执行以下操作：

```
dt.out[, count := as.numeric(dt[, .N, by=a][, N])] 
```

* * *

**编辑2：**非常有趣。进行等效的多重`:=`赋值*不会*产生相同的消息。

```
dt.out[, `:=`(count = dt[, .N, by=a][, N])]
# Detected that j uses these columns: a 
# Finding groups (bysameorder=TRUE) ... done in 0.001secs. bysameorder=TRUE and o__ is length 0
# Detected that j uses these columns: <none> 
# Optimization is on but j left unchanged as '.N'
# Starting dogroups ... done dogroups in 0 secs
# Detected that j uses these columns: N 
# Assigning to all 2 rows
# Direct plonk of unnamed RHS, no copy. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:33:01.823

此解决方案删除有关命名元素的消息。但是你必须在之后把名字放回去。

```
require(data.table)
options(datatable.verbose = TRUE)

dt <- data.table(a=c(rep(3,5),rep(4,5)),b=1:10,c=11:20,d=21:30,key="a")

dt[, c(.N, unname(lapply(.SD, sum))), by = "a"] 
```

输出

```
> dt[, c(.N, unname(lapply(.SD, sum))), by = "a"]
Finding groups (bysameorder=TRUE) ... done in 0secs. bysameorder=TRUE and o__ is length 0
Optimization is on but j left unchanged as 'c(.N, unname(lapply(.SD, sum)))'
Starting dogroups ... done dogroups in 0.001 secs
   a V1 V2 V3  V4
1: 3  5 15 65 115
2: 4  5 40 90 140 
```

# machine-learning - 寻找由神经网络逼近的函数

> ID：16132627
> 
> 赞同：1
> 
> 时间：2013-04-21T15:11:36.033
> 
> 标签：machine-learning, artificial-intelligence, neural-network

如果我有一个带有 sigmoid 激活函数的前馈多层感知器，它经过训练并具有已知权重，我如何找到由网络近似的曲线方程（分隔两种数据类型的曲线）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:08:42.077

通常，对于 NN 输出为 0.5（或 0，如果是 -1/1 而不是 0/1）的输入点，没有封闭形式的解决方案。

通常在低维输入空间中进行可视化是对输入空间进行网格化并计算 NN 输出的轮廓。（轮廓是对 NN 响应面的平滑估计。）

在 MATLAB 中，一个人会做

```
[X,Y] = meshgrid(linspace(-1,1), linspace(-1,1));
contour(f(X,Y)) 
```

您训练的神经网络在哪里`f`，并假设 [-1,1] x [-1,1] 空间。

# java - 我必须依赖哪罐提卡？

> ID：16132628
> 
> 赞同：1
> 
> 时间：2013-04-21T15:11:38.883
> 
> 标签：java, dependencies, apache-tika

我想`Tika`用来提取一些文件格式的文本，比如`.doc`，`.ppt`等等。
目前我依赖于`tika-app-1.2.jar`，但我认为依赖于这个 jar 并不是一个好主意，因为这个 jar 是可运行的。此外，在解析`.ppt`文件时，它给了我这个运行时异常：

```
org.apache.tika.exception.TikaException: Unexpected RuntimeException from  org.apache.tika.parser.microsoft.OfficeParser@5de82b72
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:244)
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)
    at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120)
    ... 
```

我对这个问题进行了深入的谷歌搜索，发现这个问题是由`apache-poi`嵌入在`tika-app`.

我的问题是我必须依赖哪些罐子里的提卡？

*   蒂卡
*   蒂卡核心
*   tika 捆绑
*   tika-父母
*   tika-app

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:17:36.193

[http://tika.apache.org/1.3/gettingstarted.html](http://tika.apache.org/1.3/gettingstarted.html)

我认为您想要 tika-parsers 依赖项。来自 Tika 网站。

> 如果您想使用 Tika 解析文档（而不是简单地检测文档类型等），您将需要依赖 tika-parsers：

```
<dependency>
  <groupId>org.apache.tika</groupId>
  <artifactId>tika-parsers</artifactId>
  <version>1.3</version>
</dependency> 
```

附带说明一下，如果没有先查阅该项目的文档，我绝不会尝试直接从 Maven 中心获取依赖项。正如您在 Tika 中看到的那样，打破依赖关系是 IMO 的新标准方法，而不是提供一个单一的整体 jar，以便包括这些项目的人们在包含依赖项时可以更精细地控制他们在自己的项目中引入的内容.

# linux - 需要Linux奇怪的文件夹权限（CentOs）

> ID：16132629
> 
> 赞同：1
> 
> 时间：2013-04-21T15:11:45.973
> 
> 标签：linux, bash, permissions, centos, directory

我不知道我现在问的是否可能，但如果是的话，那就太好了。

我有一个公共文件夹，一些用户可以访问。我想阻止所有这些用户在其中创建子文件夹。他们应该能够创建像`touch note.txt`但不能创建其他文件夹的文件。

我在想我是否可以`mkdir`在本地禁用该文件夹的命令，但我不知道它是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:42:28.390

原则上，[SELinux](http://wiki.centos.org/HowTos/SELinux)应该允许这种级别的控制，但不要问我如何配置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:33:10.167

首先，这不是一个编程问题——所以[http://superuser.com](http://superuser.com)是更好的提问地方。

AFAIK（我不是 Centos 大师）- 不可能使用 CentOS。对于这种类型的权限，您需要支持扩展 ACL 的操作系统。例如：Solaris ZFS，或者 Mac OS X 等等。更改底层操作系统可能不是您的解决方案，所以这是另一种可能性 - 但不容易。

您可以使用[FUSE](http://fuse.sourceforge.net)并制作一个充当文件系统桥接器的程序，并且简单地不允许创建目录。正如我所说 - 这不是一个简单的解决方案，但可能。对于低容量使用，您可以使用 perl 通过 FUSE 内核/lib 接口在 perl 中实现文件系统。请参阅[保险丝](http://search.cpan.org/~dpavlin/Fuse-0.14/Fuse.pm)。对于一些基本教程，您可以查看[此站点](http://blogs.perl.org/users/fuzzix/2012/08/fun-with-fuse.html)。

听起来很傻？是的。也许有人知道在 Centos 上设置 ACL 的简单方法。至少它是一个“编程解决方案”。:)。

# box2d - 将外部物理引擎库添加到 Java 中的新项目 (JBox2D)

> ID：16132633
> 
> 赞同：0
> 
> 时间：2013-04-21T15:12:09.667
> 
> 标签：box2d, jbox2d

我想将 JBox2D 库导入一个新项目，我不熟悉使用外部库，所以我的怀疑看起来真的很愚蠢，但是哦，这就是你学习的方式。

所以我有点遵循 JBox2D 网站上的教程，我做到了这一点：

![在此处输入图像描述](https://i.stack.imgur.com/j3dVz.png)

你可以看到我有 JBox2D 主干（我不太明白什么是主干......）我相信它们都是 Maven 项目，我的目标是能够在你可以看到打开的 PhysicTest 项目中使用引擎的库。

（可能是愚蠢的）我试图导入你在图像中看到的并且它不起作用，所以我请求你帮助解决一个对我来说并不那么简单的简单问题^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T20:10:19.487

您需要将这些项目导入到您的项目中。转到您的项目属性、构建路径，然后单击库选项卡。在那里，您可以将 jbox2d 库添加到您的 PhysicTest 项目中。

# ios - 在 stringWithContentsOfFile 期间记录错误消息

> ID：16132634
> 
> 赞同：1
> 
> 时间：2013-04-21T15:12:11.680
> 
> 标签：ios, objective-c

我正在尝试读取 CSV 文件。我已经在我的应用程序中导入了文件，所以文件在本地。当我在下面执行这部分代码时：

```
@autoreleasepool {
    NSError *error;
    NSString *alldata =  [NSString stringWithContentsOfFile:@"config_menu_position.csv"
                                                   encoding:NSUTF16StringEncoding error:&error];
    NSLog(@"alldata: %@", alldata);
    NSLog( @"error: %@", error );
} 
```

我有这个日志错误消息，我的变量总是 nul：

```
 2013-04-21 17:05:37.571 PageViewController[1578:c07] alldata :(null)
    2013-04-21 17:05:38.242 PageViewController[1578:c07] error: Error Domain=NSCocoaErrorDomain
 Code=260 "The operation couldn’t be completed. (Cocoa error 260.)" UserInfo=0x7ebf100 
{NSFilePath=config_menu_position.csv, NSUnderlyingError=0x7ebf060 "The operation couldn’t be 
completed. No such file or directory"} 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:16:22.393

您缺少文件的完整路径，请尝试以下操作：

```
NSString* filePath = [[NSBundle mainBundle] pathForResource:@"config_menu_position" ofType:@"csv"];
NSString *alldata = [NSString stringWithContentsOfFile:filePath
                                              encoding:NSUTF16StringEncoding 
                                                 error:&error]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:19:51.800

尝试`pathForResource:ofType`从`NSBundle`，例如。

```
[[NSBundle mainBundle] pathForResource:@"config_menu_position" ofType:@"csv"] 
```

然后使用 A`NSString`初始化程序中返回的路径。

# logging - Prestashop - 我如何写入日志文件？

> ID：16132637
> 
> 赞同：3
> 
> 时间：2013-04-21T15:12:35.433
> 
> 标签：logging, module, prestashop

我应该在 Prestashop 模块中使用什么 php 代码来写入日志文件？我用过

```
Logger::addLog("something",1); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-09-14T13:21:56.343

您还可以使用以下代码存储登录文件。

```
$logger = new FileLogger(0); //0 == debug level, logDebug() won’t work without this.
$logger->setFilename(_PS_ROOT_DIR_.”/log/debug.log”);
$logger->logDebug(“message 1″);
$logger->logDebug(“message 2″); 
```

它会工作的！

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:56:07.587

日志保存在“日志”表中的数据库中（使用您当前的前缀）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-25T16:59:10.827

另一种选择是使用[PHP 的](https://www.php.net/manual/fr/function.file-put-contents.php)

```
file_put_contents(_PS_ROOT_DIR_ . '/path/to/logfile',
                  $data . "\n",
                  FILE_APPEND); 
```

# php - 递归函数调用用户在 smarty 插件目录中创建的 smarty 函数

> ID：16132645
> 
> 赞同：0
> 
> 时间：2013-04-21T15:13:32.297
> 
> 标签：php, plugins, recursion, smarty, user-defined-functions

我正在尝试在 smarty 插件目录中编写一个 smarty 函数。它是一个递归函数。它在普通的 php 文件中运行良好，并且会生成一个下拉选择框。现在我想让它成为一个聪明的函数，并想从 tpl 调用它。

```
 <?php
        /*
        * Smarty plugin
        * ————————————————————-
        * File:     function.recurse_array.php
        * Type:     function
        * Name:     recurse_array
        * Purpose:  prints out elements of an array recursively
        * ————————————————————-
        */

        function smarty_function_recurse_array($arr,$depth=0, &$smarty)
        {
            $html = '';
                    foreach ( $arr as $v ) {

                        $html.= '<option value="' . $v['id'] . '">';
                        $html.= str_repeat('-', $depth);
                        $html.= $v['cata_name'] . '</option>' . PHP_EOL;

                        if ( array_key_exists('subcategories', $v) ) {
                            $html.= smarty_function_recurse_array($v['subcategories'], $depth+1);
                        }
                    }

                    return $html;
        } 
```

该文件存储在 smarty 插件目录中，并希望调用为

```
{recurse_array array=$myarray} 
```

现在我对递归调用函数参数部分感到困惑

```
$html.= smarty_function_recurse_array($v['subcategories'], $depth+1); 
```

它会生成一个警告

```
Warning: Missing argument 3 for smarty_function_recurse_array() 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:18:37.277

尝试这个：

```
<?php

/*
* Smarty plugin
* ————————————————————-
* File:     function.recurse_array.php
* Type:     function
* Name:     recurse_array
* Purpose:  prints out elements of an array recursively
* ————————————————————-
*/

function smarty_function_recurse_array($params, &$smarty)
{
    $depth = isset($params['depth'])?$params['depth']:0;

    $html = '';
    foreach ( $params['array'] as $v ) {    
        $html.= '<option value="' . $v['id'] . '">';
        $html.= str_repeat('-', $depth);
        $html.= $v['cata_name'] . '</option>' . PHP_EOL;

        if ( array_key_exists('subcategories', $v) ) {
            $html.= smarty_function_recurse_array(array ('array' => $v['subcategories'], 'depth' => $depth + 1), $smarty);
        }
    }

    return $html;
} 
```

# xml - 'match' 范围内的 scala yield 需要 'case' 子句

> ID：16132649
> 
> 赞同：0
> 
> 时间：2013-04-21T15:13:48.567
> 
> 标签：xml, scala

我有一个代码，它用产品解析来自 xml 的一些**产品**。有一个部分匹配，并将结果放入**产品**val：

```
 val products = 

  for (event <- reader) {    

     event match {

        case EvElemStart(_, "product", meta, _) =>

                  product = new Product()

                  product.title = meta("title").toString
                  product.description = meta("description").toString

        case EvElemEnd(_, "product") =>
                  yield product                  // <--

        case _ =>

     }

} 
```

它期望在**yield**之后出现“case” 。为什么？

以及如何以scala方式完成？

* * *

另一个尝试：

```
val products =   

   for (event <- reader) {

          var title = "";
          var description = "";

          event match {

            case EvElemStart(_, "product", meta, _) =>

              title = meta("title").toString
              description = meta("title").toString

            case EvElemEnd(_, "product") =>

            case _ =>

          }

   }  yield new Product("", "");  // <--- 
```

编译器说它在**yield之前需要“}”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:54:59.747

`expr match case { ... }`是一个表达式。它通常返回一个值，尽管它可以是`Unit`. 在这种情况下，它更像是一个声明。

`for (...) yield {...}`也是一种表达方式。在您的情况下，它将返回一个迭代器（因为 reader 是一个迭代器）。所以这会编译（虽然不是你想要的）：

```
for (event <- reader) yield {
  new Product("", "")
}

for {
  event <- reader
  product = new Product("", "")
} yield product

for {
  event <- reader
} yield {
  val product = new Product("", "")
  product
} 
```

请注意，大括号可以替换为括号，这会改变分号/语句结尾的推断方式。通常，如果您需要多行，请使用大括号。

这也可以编译：

```
for (event <- reader) yield {
  val product = event match {
     case EvElemStart(_, "product", meta, _) =>
       val title = meta("title").toString 
       val description = meta("title").toString
       Some(Product(title, description) // return some product 
     case _ =>
       None                             // return none
  }
  // product is a value of type Option[Product]
  product // last expression of a { ... } block will be the return value of block
} 
```

它将返回一个产生如下值的迭代器`Some(Product(...)), None, None, Some(Product(...))`：

# asp-classic - 有没有办法使用 GetRows() 方法访问整行？

> ID：16132655
> 
> 赞同：0
> 
> 时间：2013-04-21T15:14:19.217
> 
> 标签：asp-classic, multidimensional-array

我使用 GetRows() 方法将记录集放入二维数组中。我可以像这样访问单个数组项：

```
x = rows(colNumber, rowNumber) 
```

现在我想从这个数组中取出一整行/维度并将其传递给另一个函数。

有没有办法做到这一点？我一直找不到。寻找这样的东西：

```
entireSingleRow = rows(*, rowNumber) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:42:22.537

语言中没有这样的结构，但下面的“助手”会做”

```
REM 'Returns 1-D array of all "columns" in a "row" with index "rowNumber"'
REM 'from the 2-D "from2DArray" array (column, row)'
Function GetCols(ByRef from2DArray, ByVal rowNumber)
    Dim cols : cols = UBound(from2DArray, 1)
    Dim i
    Dim result()
    For i = 0 To cols
        Redim Preserve result(i)
        result(i) = from2DArray(i, rowNumber)
    Next

    GetCols = result
End Function

entireSingleRow = GetCols(rows, rowNumber) 
```

# iphone - CHCSV 错误：无法为长度分配内存

> ID：16132656
> 
> 赞同：2
> 
> 时间：2013-04-21T15:14:22.640
> 
> 标签：iphone, ios, objective-c, csv

我想解析一个 .csv 文件。为此，我使用 CHCSV 解析器。但是当我推入解析器应该开始解析的视图时，应用程序崩溃了。

> 由于未捕获的异常“NSMallocException”而终止应用程序，原因：“ *** -[NSConcreteMutableData appendBytes:length:]：无法为长度分配内存（4294967295）”

```
NSString *filePath = @"http://somewhere.com/test.csv";
NSString *fileContent = [NSString stringWithContentsOfURL:[NSURL URLWithString:filePath] encoding:NSUTF8StringEncoding error:nil];
self.csvParser = [[CHCSVParser alloc] initWithContentsOfCSVFile:fileContent]; 
```

**编辑：**

我正在为 iOS 6+ 开发。感谢您的精彩评论和回答。我希望得到正确的解决方案。

*输入流*
它不起作用。当我想使用输入流时，应用程序由于编码错误而崩溃。

> > 不兼容的整数到指针转换将“int”发送到“NSStringEncoding *”类型的参数（又名“unsigned int *”）

```
NSData *downloadData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://example.com/test.csv"]];
NSInputStream *stream = [NSInputStream inputStreamWithData:downloadData];
self.csvParser = [[CHCSVParser alloc] initWithInputStream:stream usedEncoding:NSUTF8StringEncoding delimiter:@";"];

self.csvParser.delegate = self;
[self.csvParser parse]; 
```

*CSV 字符串*

```
NSString *filePath = @"http://example.com/test.csv";
NSString *fileContent = [NSString stringWithContentsOfURL:[NSURL URLWithString:filePath] encoding:NSUTF8StringEncoding error:nil];  
self.csvParser = [[CHCSVParser alloc] initWithCSVString:fileContent];

self.csvParser.delegate = self;
[self.csvParser parse]; 
```

仅此解析`(null)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:50:39.080

**最终编辑：**的作者 Dave`CHCSVParser`在 github 上更新了他的代码，所以当您使用最新版本时应该可以解决这个问题。[立即获取！](https://github.com/davedelong/CHCSVParser)

* * *

好的，我们开始：

首先在中添加以下代码`CHCSVParser.m`：

在一开始的方法`- (void)_sniffEncoding`中，您有：

```
uint8_t bytes[CHUNK_SIZE];
NSUInteger readLength = [_stream read:bytes maxLength:CHUNK_SIZE];
[_stringBuffer appendBytes:bytes length:readLength];
[self setTotalBytesRead:[self totalBytesRead] + readLength]; 
```

将其更改为：

```
uint8_t bytes[CHUNK_SIZE];
NSUInteger readLength = [_stream read:bytes maxLength:CHUNK_SIZE];
if (readLength > CHUNK_SIZE) {
    readLength = CHUNK_SIZE;
}
[_stringBuffer appendBytes:bytes length:readLength];
[self setTotalBytesRead:[self totalBytesRead] + readLength]; 
```

更改后我只得到了`null`值，所以我更改了路径`file`（在示例项目中它位于.`main()``viewDidLoad`

*确保您将文件复制到捆绑目录中以使其正常工作！*

```
file = [NSBundle pathForResource:@"Test" ofType:@"scsv" inDirectory:[[NSBundle mainBundle] bundlePath]]; 
```

**编辑：**

当您说需要下载文件时，您可以执行以下操作（但请注意，这是一种快速而肮脏的解决方案，尤其是在移动设备上）

```
NSData *downloadData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.yourdomain.tld/Test.scsv"]];
NSInputStream *stream = [NSInputStream inputStreamWithData:downloadData]; 
```

最后一行是您需要更改的重要行。

希望能解决您的问题。

**编辑2：**

我刚刚为您创建了一个带有演示项目的存储库，代码实际可以在其中运行。也许你可以找出你做错了什么（或至少不同）。[链接在这里。](https://bitbucket.org/dennis_weissmann/chcsvparserdemo/src)

**编辑3：**

改变

```
self.csvParser = [[CHCSVParser alloc] initWithInputStream:stream usedEncoding:NSUTF8StringEncoding delimiter:@";"]; 
```

至

```
self.csvParser = [[CHCSVParser alloc] initWithInputStream:stream usedEncoding:&encoding delimiter:';']; 
```

# java - 文件存在返回错误值

> ID：16132659
> 
> 赞同：0
> 
> 时间：2013-04-21T15:14:31.737
> 
> 标签：java

在我的程序中，我正在处理由其他应用程序移动到 NFS 中的公共共享挂载点的文件。在大约 0.01% 的时间里，我的`File.exists()`检查失败，说文件不存在，但是当我`ls -l`在目录上尝试 a 时，我可以看到文件就在那里。这种行为的任何原因以及如何纠正它。

# list - 如果事实不在列表中，则将其添加到列表中

> ID：16132664
> 
> 赞同：0
> 
> 时间：2013-04-21T15:15:07.590
> 
> 标签：list, prolog

我需要根据我拥有的事实构建一个列表。例如，我有一个这样的课程列表：

```
 attend(student1,c1).
    attend(student1,c2).
    attend(student2,c1).
    attend(student2,c3). 
```

现在我想要一个谓词 courselist/2 ，它返回给定学生的课程列表。当然，每门课程都应该只在这个列表中出现一次。我不能使用像 findall 这样的内置谓词，但我可以使用成员或附加。到目前为止，我有这样的事情：

```
 courselist(S,R) :- attend(S,C), member(C,R), courselist(S,R).
    courselist(S,R) :- attend(S,C), append([C],L,R), courselist(S,R). 
```

我知道那是错误的，但我不知道如何在不陷入无限循环的情况下找到所有事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:36:49.940

这是一个您不能使用的愚蠢限制`findall/3`，因为它是解决此类问题的自然方法。您可以像这样手动执行此操作：

```
student_courses(Student, Courses) :-
        student_courses(Student, [], Courses).

student_courses(S, Cs0, Cs) :-
        (   attend(S, C), \+ member(C, Cs0) ->
            student_courses(S, [C|Cs0], Cs)
        ;   Cs = Cs0
        ). 
```

示例查询：

```
?- student_courses(student2, Cs).
Cs = [c3, c1]. 
```

请注意，这不是真正的关系，因为此特定解决方案不会出现在以下*更一般*的查询中：

```
?- student_courses(Student, Cs).
Student = student1,
Cs = [c2, c1]. 
```

我把它作为练习留给你，让你以最一般的查询产生*所有*正确结果的方式来实现它。还要注意更具可读性和相关性的谓词名称。

# html - [HTML doctype 声明]：为什么我们需要声明以及声明会影响样式吗？

> ID：16132666
> 
> 赞同：1
> 
> 时间：2013-04-21T15:15:14.737
> 
> 标签：html, css, web, w3c

我有点好奇，

我有一个链接，它显示有和没有以下声明的不同行为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

与声明的链接：

![与 html 声明的链接](https://i.stack.imgur.com/GJ8wM.png)

没有声明的链接：

![没有html声明的链接](https://i.stack.imgur.com/9JAFn.png)

为什么我们需要声明，声明会影响风格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:19:26.563

> 为什么我们需要声明和

历史上？它为验证器提供了一种方法来了解哪些元素和属性被允许在何处以及解析器扩展实体引用。

HTML 5 放弃了这个想法，并有一个更简单的 Doctype，除了触发标准模式（见下文）之外什么都不做。

> 声明会影响风格吗？

浏览器供应商正走出“有很多很多错误”的时代，他们决定使用 Doctype 作为一种启发式方法来确定页面的作者是否知道他们在做什么。

由于没有 Doctype，他们认为作者不知道他们在做什么，并模仿了许多古老的错误。这会在不同浏览器呈现给定页面的方式上产生很多不一致。这称为怪癖模式。

使用 Doctype（某些 Doctype 除外），他们认为作者*确实*知道他们在做什么，并尝试尽可能接近标准所说的呈现页面。这是标准模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:19:41.747

[规范](http://www.w3.org/html/wg/drafts/html/master/syntax.html#the-doctype)中定义的文档类型。

```
8.1.1 The DOCTYPE

A DOCTYPE is a required preamble.

DOCTYPEs are required for legacy reasons. When omitted, browsers tend 
to use a different rendering mode that is incompatible with some 
specifications. Including the DOCTYPE in a document ensures that the 
browser makes a best-effort attempt at following the relevant specifications. 
```

DOCTYPE 声明的作用：

1.  在网页上执行 HTML 验证测试时，它会告诉 HTML（超文本标记语言）验证器网页编码应该符合哪个版本的 (X)HTML 标准。当您验证您的网页时，HTML 验证器会根据适用标准检查编码，然后报告编码的哪些部分未通过 HTML 验证（不合规）。

2.  它告诉浏览器如何以标准兼容模式呈现页面。

如果不包括 DOCTYPE：

1.  您将无法使用 HTML（超文本标记语言）验证器来检查页面编码。

2.  呈现网页的浏览器将以“怪癖”模式处理编码。

3.  样式表可能无法按计划实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:16:54.363

为什么？

为什么要指定文档类型？因为它定义了您的文档实际使用的 (X)HTML 版本，这是处理文档的某些工具所需的关键信息。

例如，指定文档的 doctype 允许您使用诸如标记验证器之类的工具来检查 (X)HTML 的语法。如果这些工具不知道您使用的是哪种文档，它们将无法工作。

但最重要的是，对于大多数浏览器系列来说，一个 doctype 声明会使很多猜测变得不必要，从而触发“标准”渲染模式。

[http://www.w3.org/QA/Tips/Doctype](http://www.w3.org/QA/Tips/Doctype)

# java - 将eclipse项目导出到jar

> ID：16132671
> 
> 赞同：1
> 
> 时间：2013-04-21T15:15:37.410
> 
> 标签：java, eclipse, jar, export, lwjgl

我确实检查了已经回答的问题，这些问题与这个问题的主题几乎相同，但没有一个回答过的问题能够解决我的问题。

我现在已经在网上搜索了大约 4 个小时，并尝试了很多不同的方法来解决我的问题..

我正在尝试用 Java 制作 Pong 游戏，现在我想导出我的项目，以便我可以将其发送给某个朋友，以便他可以尝试。

我在这个项目中使用 LWJGL，所以我确实在引用的库中添加了一些 jar，并且 LWJGL.jar 添加了包含在项目 lib 文件夹中的 windows natives。这是项目查看器的图像：

![](https://i.stack.imgur.com/3vIGM.png) 我发布这张图片的原因是让您了解我拥有项目中的所有库以及项目运行所需的本地人。

在阅读为什么 jar 不起作用时，我还读到您需要一个 Manifest.mf 文件，所以我创建了一个文件，在这个清单文件中我有以下文本：

```
Manifest-Version: 1.0
Main-Class: jGame.Main
Class-Path: lib/jars/asm-debug-all.jar lib/jars/jinput.jar lib/jars/lwjgl.jar lib/jars/izma.jar lib/jars/slick.jar 
```

Class-Path 下面还有 2 个空行，因为我听说你必须拥有它。

只要我在 Eclipse 中运行这个项目，它就可以正常运行，但是当我在 Eclipse 中使用可运行的 jar 或 jar 向导导出项目时，当我双击 .jar 文件时它不会启动，所以我进入 cmd 并使用了这个命令：

```
java.exe -jar JGame.jar 
```

并显示以下消息：

![](https://i.stack.imgur.com/AfT03.png)

我已经检查了至少 10 次，我为主要课程提供了正确的路径。我不知道该做什么了。在 Eclipse 向导中，我一直在尝试导出可运行的 jar 和导出普通 jar，但两者都没有工作。同样在向导中，我选择导出一个不可运行的普通 jar，因为当我选择可运行时，库会因为 lib 文件夹被替换而变得混乱。

我尝试将 jar 文件作为存档打开并得到以下信息： ![](https://i.stack.imgur.com/eoAj3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:35:16.027

在尝试使用 JarSplice 时，我成功地解决了这个问题。

读完后：

> > 它不会按照您当前尝试的方式工作，因为您需要将本机文件放在 jar 旁边并通过“-Djava.library.path”参数指向它们。
> 
> 如果您只想要一个 jar 并且想要避免命令行和本地文件的麻烦，请使用 JarSplice 工具。JarSplice 易于使用，并且会自动为您处理本机文件内容。
> 
> 1）只需将您的项目（类和资源）导出到一个 jar 中（通过您的 IDE 更容易做到）。
> 
> 2) 然后运行 ​​JarSplice，将所需的所有 jar 添加到 jar 选项卡（您的应用程序 jar、lwjgl.jar 和您正在使用的任何其他外部 jar）。
> 
> 3）然后在 natives 选项卡上添加所有 natives 文件（windows *.dll、linux *.so、mac *.dylib 和 *.jnilib）。
> 
> 4）在类选项卡上添加您的主类。然后创建你的罐子。
> 
> 然后你可以通过双击它来运行这个jar（或者如果你希望通过命令行使用'java -jar yourapp.jar'）。

我从这个链接找到了这个解决方案：[Can't start .jar file (using LWJGL)](https://stackoverflow.com/questions/6749141/cant-start-jar-file-using-lwjgl)

它第一次不起作用的原因是我没有包含在使用 JarSplice 时从 eclipse 导出的实际 .jar 文件。

# ember.js - 使用 ember.js 构建完整的 Web 应用程序的最佳教程是什么

> ID：16132677
> 
> 赞同：6
> 
> 时间：2013-04-21T15:15:54.447
> 
> 标签：ember.js

我是使用 ember.js 构建 Web 应用程序的新手。我浏览了 ember.js 官方指南，发现 ember.js 非常有趣。我已经学习了 ember.js 的基本结构。但是我需要一个教程来帮助我使用 ember.js 构建一个完整的 Web 应用程序，描述其开发过程的不同部分。这可能在文档或视频教程中。请帮助我找到学习 ember.js 的最佳教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:19:17.393

[您可以在EmberWatch](http://emberwatch.com/)上找到很多资料，我建议您从Tom Dale的[官方指南开始。](http://emberjs.com/guides/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T19:27:38.613

我想我们还没有发现完整的 Ember.js 教程，不过您可以使用这些资源来帮助您入门。

*   我肯定会从[官方指南开始](http://emberjs.com/guides/)
*   如果您不想使用仍处于早期阶段的 Ember Data，您可以阅读此[博客](http://eviltrout.com/2013/03/23/ember-without-data.html)
*   [EmberCamp 2013](https://addepar.com/ember)上提供了很多有用的信息
*   如果您想查看真实世界的应用程序源代码，请查看[Discourse](https://github.com/discourse/discourse)

# java - 使用@Configurable 在JPA 实体监听器中注入spring bean

> ID：16132678
> 
> 赞同：0
> 
> 时间：2013-04-21T15:15:54.323
> 
> 标签：java, spring, jpa, aspectj, configurable

我尝试使用`@Configurable`在`@PostPersist`侦听器中注入spring bean。

```
@Configurable
@EnableSpringConfigured
public class BankAccountAuditListener {

@PersistenceContext
private EntityManager em;

@PostPersist
public void createAudit(BankAccount bankAccount){
    ...
}
} 
```

侦听器由`@EntityListeners({BankAccountAuditListener.class})`

我把它放在spring配置xml文件中：

```
<context:annotation-config/>
<context:spring-configured/>
<context:load-time-weaver/> 
```

在`createAudit(...)`函数中，`em`始终为空。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:22:09.867

好的，BankAccountAuditListener 是在 Spring 的 ApplicationContext 可以使用之前由 Hibernate 创建的。可能这就是我不能注入任何东西的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T05:17:47.380

You can use a lazily initialized bean inside your JPAEventListener class , which is initialized when the first time entity is persisted.

Then use @Configurable on lazy loaded bean. It may not be the best solution but a quick workaround

```
 public class JPAEntityListener{

/**
* Hibernate JPA  EntityListEner is not spring managed and gets created via reflection by hibernate library while entitymanager is loaded.
* Inorder to inject business rules via Spring use lazy loaded bean  which makes use of   @Configurable 
 */
private CustomEntityListener listener;

public JPAEntityListener() {
    super();
}

@PrePersist
public void onEntityPrePersist(TransactionalEntity entity) {
    if (listener == null) {
        listener = new CustomEntityListener();
    }
    listener.onEntityPrePersist(entity);

}

@PreUpdate
public void onEntityPreUpdate(TransactionalEntity entity) {
    if (listener == null) {
        listener = new CustomEntityListener();
    }
    listener.onEntityPreUpdate(entity);
}} 
```

And your lazy loaded bean class

```
 @Configurable(autowire = Autowire.BY_TYPE)
    public class CustomEntityListener{

    @Autowired
    private Environment environment;

    public void onEntityPrePersist(TransactionalEntity entity) {

        //custom logic
    } 
```

# android - ejabberd 服务器中的服务器错误没有响应

> ID：16132680
> 
> 赞同：1
> 
> 时间：2013-04-21T15:15:57.253
> 
> 标签：android, xmpp, ejabberd, smack

现在我正在使用 ejabberd 服务器使用 XMPP-chat for Android。

当我尝试连接到服务器时，它显示错误。但它在 openfire 服务器中运行良好。

我在用`smack library`.

错误日志如下：

> 04-21 20:34:16.824: I/XMPPChatDemoActivity(1929): [SettingsDialog] 连接到 10.0.2.2 04-21 20:34:21.932: E/XMPPChatDemoActivity(1929): 以 test3@eworks.com 登录失败04-21 20:34:21.932：E/XMPPChatDemoActivity(1929)：服务器没有响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:41:54.753

我找到了如何使用 Smack 3.1.0 连接到 gtalk 和 jabber.org 的解决方案：

GTalk 的代码：

```
ConnectionConfiguration cc = new ConnectionConfiguration("talk.google.com", 5222, "gmail.com");
XMPPConnection connection = new XMPPConnection(cc);
try {
     connection.connect();

     // You have to put this code before you login
     SASLAuthentication.supportSASLMechanism("PLAIN", 0);

     // You have to specify your gmail addres WITH @gmail.com at the end
     connection.login("some.account@gmail.com", "password", "resource");

     // See if you are authenticated
     System.out.println(connection.isAuthenticated());

} catch (XMPPException e1) {
     e1.printStackTrace();
} 
```

对于 jabber.org，这里是代码：

```
ConnectionConfiguration cc = new ConnectionConfiguration("jabber.org", 5222, "jabber.org");
XMPPConnection connection = new XMPPConnection(cc);
try {
     connection.connect();

     // You have to put this code before you login
     SASLAuthentication.supportSASLMechanism("PLAIN", 0);

     // You have to specify your Jabber ID addres WITHOUT @jabber.org at the end
     connection.login("your.jabber", "password", "resource");

     // See if you are authenticated
     System.out.println(connection.isAuthenticated());

} catch (XMPPException e1) {
     e1.printStackTrace();
} 
```

使用此代码，我现在可以连接到我的本地 ejabberd 和 openfire 服务器。我希望这能解决你的问题。

# javascript - Jquery淡出速度将不适用

> ID：16132682
> 
> 赞同：0
> 
> 时间：2013-04-21T15:16:06.870
> 
> 标签：javascript, jquery, jquery-ui

我对 jquery 淡出有问题。我试图设置 3000 毫秒，但它不适用

我用：

```
$('#alertSuccess').fadeOut('3000', function() {
    document.getElementById("alertSuccess").style.display = "none";
}); 
```

但它仍然很快消失（我猜默认为 400 毫秒）..

有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T06:22:46.157

尝试使用此代码：

```
html:
<div id="box1" class="box">linear</div> 
```

然后使用这个脚本

```
$(document).ready(function() {

function complete() {
document.getElementById("alertSuccess").style.display = "none";
}

 $("#box1").fadeOut(3000,complete);

}); 
```

[您可以在http://jsfiddle.net/FLAH/](http://jsfiddle.net/FLARH/)上查看此代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T15:18:37.497

```
.fadeOut(3000, function() { ... }
```

# iphone - 我如何使用 id 作为变量值的临时存储

> ID：16132689
> 
> 赞同：0
> 
> 时间：2013-04-21T15:16:52.043
> 
> 标签：iphone, objective-c

我是编程新手，所以这里的任何人都可以告诉我以下内容是否在 Objective-C 中有效。谢谢。

```
@interface MainViewController : UIViewController
{
  id iTempStore;
}

@property (nonatomic, assign) id iTempStore;

// FirstViewController

@interface FirstViewController : UIViewController
{
  MainViewController* pParent;
}

-(void) SomeFunction
{
  m_pParent = [[[MainViewController]alloc]init];

  NSString* pTest = [[[NSString alloc] initWithString:@"Test"]autorelease];
  // Is this valid way to store an object ???
  [m_pParent setITempStore: pTest];

  // Check Value
  NSString* pValue = [m_pParent iTempStore];
  NSLog(@"Value is: %@", pValue);// Value is: Test

  [m_pParent release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:26:59.723

id 可以保存对任何对象的引用，因此在那里存储字符串很好，但是由于您使用 iVar 支持，因此您可能希望使用复制或保留而不是分配为您的属性存储类...如果它，您将使用复制总是 NSString 或任何具有可变子类的类......但由于 id 不能指定类型安全，你可以这样做：

```
@property(copy) id <NSCopying> iTempStore; 
```

或者

```
@propery(retain)  id iTempStore; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:30:14.897

技术上没问题……但不是很好……好

1.  如果你声明一个属性，你也不需要它作为实例变量。
2.  不要使用非 ARC 的东西......所有 ios 设备（不确定第一代）都支持[ARC ，但至少在所有真正重要的设备上都支持。](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)
3.  如果您知道对象类型，则不需要使用 id。id 用于不确定返回类型时。

您的代码应如下所示：

```
@interface MainViewController : UIViewController

@property (nonatomic, assign) NSString* iTempStore;

// FirstViewController

@interface FirstViewController : UIViewController
{
  MainViewController* pParent;
}

-(void) SomeFunction
{
  m_pParent = [[MainViewController alloc]init];

  NSString* pTest = [[[NSString stringWithString:@"Test"];
  [m_pParent setITempStore: pTest];

  NSString* pValue = [m_pParent iTempStore];
  NSLog(@"Value is: %@", pValue);

} 
```

# django - django 内置对 MongoDB 的支持

> ID：16132692
> 
> 赞同：5
> 
> 时间：2013-04-21T15:17:17.390
> 
> 标签：django, nosql

如果官方 django 将支持任何 noSQL DBMS，尤其是 MongoDB，我正在尝试查找任何信息。我发现了[django 1.3](http://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-django-mongodb-engine/)的一个分支[django-nonrel](https://github.com/django-nonrel/django)（官方 django 的一个分支）和其他一些不太可靠的项目（根据我在网上找到的评论，失败经常发生）。django 会不会正式支持 noSQL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T07:15:34.210

也许，**[除了](https://stackoverflow.com/questions/7933596/django-dynamic-model-fields/7934577#7934577)**去`noSQL`。

简而言之，如果您只需要动态字段，您还有其他选择。[我在另一个答案](https://stackoverflow.com/questions/7933596/django-dynamic-model-fields/7934577#7934577)中对它们进行了广泛的撰写：

*   [实体-属性-值模型](https://en.wikipedia.org/wiki/Entity-attribute-value_model)（[Django-eav](https://github.com/mvpdev/django-eav)）
*   PostgreSQL [hstore](http://www.postgresql.org/docs/9.0/static/hstore.html) ( [Django-hstore](https://github.com/jordanm/django-hstore) )
*   [基于迁移的](http://blip.tv/djangocon-europe-2011/wednesday-1415-will-hardy-5311186)动态模型（[Django-mutant](https://github.com/charettes/django-mutant)）

是的，这并不是您所要求的，但这就是我们目前所拥有的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T21:23:01.937

正如您所说，分叉代码永远不是最好的选择：更改需要更长的时间才能进入分叉，它可能会破坏事情......即使使用`django-nonrel`, 也不是真正的 Django，因为您会丢失模型继承、M2M 等东西......基本上任何东西这将需要`JOIN`在幕后进行查询。

Django 会支持 NoSQL 吗？据我所知，短期内没有计划这样做的路线图。根据[Russell Keith-Magee在](https://github.com/freakboy3742)[PyCon Russia 2013](http://www.slideshare.net/it-people/django-16-and-beyond?ref=http://pycon.ru/en/program/content/django-roadmap/)上的演讲，“NoSQL”在路线图上，但从长远来看，SQLAlchemy 也是如此。所以如果你想等，恐怕要花很长时间。

无论如何，即使它不理想，您仍然可以使用 Django，但使用其他东西作为 ORM。没有什么能阻止你使用 vanilla Django 和 MongoDB 之类的东西而不是 Django ORM。

# html - 何时以及为何使用 display inline-block

> ID：16132694
> 
> 赞同：2
> 
> 时间：2013-04-21T15:17:28.243
> 
> 标签：html, css

例如，我对使用 inline-block 感到非常困惑：

html...

```
<div id="main">
  <div class="one">inline-block</div>
  <div class="two">inline-block</div>
</div> 
```

有时`inline-block`用 for 时有效`#main`，有时用 to 时有效`.one`，`.two`有时用 for 时无效`#main`，有时用 to 时无效`.one`，`.two`

任何人都可以正确描述内联块的时间和原因吗？

**编辑**

我的意思是设置也可以将 inline-block设置`display: inline-block;`为and元素而不设置为and ，但我不知道为什么？`#main``.one``.two``display: inline-block;``.one``.two`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T15:38:51.167

**内联块演示**

[我在http://jsfiddle.net/audetwebdesign/NxMLu/](http://jsfiddle.net/audetwebdesign/NxMLu/)上设置了一个 Fiddle来说明四个场景：

考虑以下代码：

```
<div class="main">
  <div class="inner one">inline-block</div>
  <div class="inner two">inline-block</div>
</div> 
```

和以下CSS：

```
.main {
    outline: 2px dotted blue;
    padding: 5px;
}
.one, .two {
    outline: 1px dotted blue;
}
.ex2 .inner {
    display: inline-block;
}
.ex3.main {
    display: inline-block;
}
.ex4.main, .ex4 .inner {
    display: inline-block;
} 
```

**示例 1：所有块**

默认情况下，`<div>`元素显示为块，并且它们的宽度会拉伸以填充屏幕的宽度。

**示例 2：孩子是内联块**

在这种情况下，子`<div>`元素显示为`inline-block`，因此它们的宽度缩小以适应，并且它们并排显示在全宽父元素中。

**示例 3：parent 是一个内联块**

在这种情况下，父元素的宽度是缩小以适应内容，子元素的宽度也是缩小以适应但每个子元素都在单独的行上，因为它们仍然是块级元素。

**示例 4：父元素和子元素是内联块**

与示例 3 类似，子元素并排显示，因为它们现在处于内联流上下文中。

**何时使用内联块**

当`inline-block`您需要将顶部和底部边距或填充应用于需要出现在单行上的元素时，显示类型很有用，例如水平导航栏。元素的主要优点`inline-block`是它们会响应`text-align: center`声明，因此您可以将所有元素居中在一行中，并对边距和填充有一些控制。

# c++ - 如何分配内存块并将其放入Cache？

> ID：16132698
> 
> 赞同：1
> 
> 时间：2013-04-21T15:17:38.823
> 
> 标签：c++, c, caching, memory

我想在C/C++中为一个数组动态分配一个内存块，这个数组会被高频访问。所以我希望这个数组留**在芯片上**，即在**Cache**中。如何使用 C/C++ 中的代码显式执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:56:51.960

我将尝试从不同的角度回答这个问题。你真的需要这样做吗。即使这是一种方法，它值得吗？想象有一个“神奇”的 void * malloc_and_lock_in_cache(int cacheLevel) 函数。你将如何处理这些数据。如果它是一个仅限于 while (1) 循环并从单线程访问随机数组的应用程序，那么由于优化和 CPU 架构，您无论如何都会有这样的行为。如果您考虑更多现实世界的解决方案，您总是有关于访问的逻辑。例如锁定多线程，某些条件等。问题 - 你的应用程序算法的其余部分是否非常完美，只剩下要做的就是在缓存中分配数组。

是否所有其他访问/排序/查找功能都是最先进的逻辑，无法审查，而是获得非常有限的性能回扣，试图覆盖 CPU 优化。

此外，您是否考虑在没有任何操作系统的情况下在原始硬件上运行您的应用程序，因此您不应该关心您的分配将如何影响操作系统行为，其余的应用程序运行？

如果您的应用程序将在虚拟机或 XEN 等环境中运行，会发生什么？

我还记得 15 到 18 年前一个类似的流行主题，关于物理内存使用和磁盘缓存实用程序。确实，像 MS-DOS smartdrive 或类似实用程序这样的工具非常有用，并且可以大大加快速度。Usenet 充满了诸如直写/回写设置之类的“调整建议”和性能分析。

尤其是如果您的 DOS 应用程序正在处理大量数据并实现了一些内存交换逻辑（我说的是当时 4MB RAM 是奢侈的），这主要是一场戏剧，从某个角度来看，您需要尽可能多的内存，但是从另一个角度来看，您需要交换，因此您实际上需要交换，但是交换通过缓存等进行。

但接下来发生了什么。我们已经将 VM386 模式、磁盘缓存/内存交换集成到操作系统中，并且谁再关心诸如调整 smartdrive/ramdisk 之类的事情了。一般来说，分配尽可能多的虚拟机然后实现自己的巫毒算法来交换物理内存块是“更便宜”的（尽管这个功能仍然在 WinAPI 中）。

因此，我真的建议将精​​力集中在算法和应用程序设计上，而不是尝试使用一些非常低级的功能，但结果确实无法预测，直到您不开发一些新的微内核操作系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T15:21:30.197

没有标准的 C++ 语言功能允许您执行此操作。

根据您的编译器和 CPU，您可能能够在 asm 块中使用特定于架构的 CPU 指令：

```
T* p = new T(...);
size_t n = sizeof(T);
asm {
    "CACHE n bytes at address p"
} 
```

...或执行此操作的某些内置编译器函数（“内在”）。

您需要查阅 CPU 手册和/或编译器手册。

例如，x86 CPU 有一组以`PREFETCH`.

另一个例子，GCC 有一个函数叫做`__builtin_prefetch`. 请参阅[GCC 数据预取支持](http://gcc.gnu.org/projects/prefetch.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T15:21:47.763

我不认为你可以。首先，哪个缓存？L3，L2，L1？您可以[prefetch](http://gcc.gnu.org/projects/prefetch.html)和[align](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html)以使其访问更加优化，然后您可以定期查询它以使其保持不变而不是 LRU，但您不能真正使其保持在缓存中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T15:24:10.650

首先，您必须知道要在其上运行代码的机器的架构是什么。然后你应该检查它有一个指令做那种事情。

实际上大量使用内存将迫使缓存控制器将此区域放入缓存中。

还有优化的三个规则，你可能想先了解它们:) [http://c2.com/cgi/wiki?RulesOfOptimization](http://c2.com/cgi/wiki?RulesOfOptimization)

# php - 网上商店中的贝宝集成。锁定/移除购物车中的物品？

> ID：16132699
> 
> 赞同：0
> 
> 时间：2013-04-21T15:17:39.793
> 
> 标签：php, paypal, shopping-cart

我有一个列出多个待售物品的网站。我想用贝宝在上面卖东西。唯一的问题是，当我剩下 1 件商品时，如果两个人打算同时购买它，我该如何避免冲突。假设 A 将商品 X 添加到他的购物车。30 秒后，B 将物品添加到他的购物车。现在 A 人要结帐并填写他的贝宝信息，而 B 人也按结帐。我怎样才能避免这种情况？我知道我可以在其中一个处于结账阶段的那一刻从列表中删除该项目，但是如果有人一直走到结账页面并且只是关闭他的浏览器并且从不购买该项目，该怎么办？如果有人可以提出解决此问题的解决方案并在网上购物期间为人们提供灵活性，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:14:02.163

如果您在 PayPal.com 上创建托管按钮，则在按钮创建的第 2 步下，您可以跟踪库存。将数量设置为 1 或 2 或任何库存。稍后您可以通过转到我保存的按钮 -> 操作 -> 编辑按钮来更改库存数量。

如果它是独一无二的商品，请从数量 1 开始，并在售出后从您的网站上移除按钮。当库存剩余 0 时，人们无法完成结帐，因此先到先得。

# php - 单击 html 和 php 时的按钮可见性

> ID：16132700
> 
> 赞同：0
> 
> 时间：2013-04-21T15:17:50.570
> 
> 标签：php, html

我有一个编辑按钮，我希望在用户按下插入按钮之前将其隐藏。

例如，

首先，我将点击 。此代码的编辑按钮。添加按钮将运行以下 php 代码。

```
 <?php

        if(isset($_REQUEST['img']))
        {

        $filename=  $_FILES["imgfile"]["name"];
        if ((($_FILES["imgfile"]["type"] == "image/gif")|| ($_FILES["imgfile"]["type"] == "image/jpeg") || ($_FILES["imgfile"]["type"] == "image/png")  || ($_FILES["imgfile"]["type"] == "image/pjpeg"))&& ($_FILES["imgfile"]["size"] < 999999))
        {
        if(file_exists($_FILES["imgfile"]["name"]))
        {
        echo "File name exists.";
        }
        else
        {
        echo "tmp_name=".$_FILES["imgfile"]["tmp_name"];
        echo "destination="."images/$filename";

        move_uploaded_file($_FILES["imgfile"]["tmp_name"],"/usr/local/apache/htdocs/Kxclusive/images/$filename");
        echo "Upload Successful . <a href='images/$filename'>Click here</a> to view the uploaded image";

        }
        }
        else
        {
        echo "invalid file.";
        }
        }

        ?> 
```

我希望在运行 php 标记中的最后一行代码后可以看到编辑按钮。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:50:37.420

您必须先检查文件的状态（是否已上传），然后您可以根据该值决定编辑按钮的可见性，例如

```
$status = codeforImageUploadChecking();
if($status==true){
        Edit  Button Code here
} 
```

# java - Java命令行尖括号

> ID：16132704
> 
> 赞同：0
> 
> 时间：2013-04-21T15:18:01.560
> 
> 标签：java, command-line, io

您如何使用 < 和 > 符号读取和写入在命令行上传递的文件？

这是命令：`java Main < input.txt > output.txt`

所以我想知道java文件中的代码会是什么样子。如何引用这些文件？

只是为了澄清，如果通过：我可以使用文件没有问题：`java Main input.txt output.txt` 但我目前仅限于使用尖括号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:20:22.633

这些运算符意味着您要从**读取**输入`input.txt`并将结果**写入**`output.txt`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:20:50.883

遵循正常约定，`<`is`System.in`和`>`is `System.out`。~~但是，在这种情况下，仅将 String 传递给 System.in 可能不会达到您的预期~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:27:06.167

假设你在谈论 Linux/Unix/Bsd ...

和`<`重定向`>`由 shell 本身处理。当您的 Java 应用程序被调用时，shell 已经知道路径名解析为什么，打开它们，并将它们连接到用于`System.in`和的文件描述符`System.out`。

因此，您只需编写程序以读取`System.in`和写入`System.out`.

（如果您的应用程序是管道的一部分，同样的原则也适用，并且如果 FD #2 被重定向，它将连接到`System.err`. 唯一不直接的是，如果您执行如下异常操作：

```
 java Main < input.txt 3> output.txt 
```

这会将 FD #3 重定向到一个文件。AFAIK，没有简单的方法可以从 Java 写入超过 2 的 FD。）

# android - 获取当前用户的唯一 ID

> ID：16132706
> 
> 赞同：2
> 
> 时间：2013-04-21T15:18:26.720
> 
> 标签：android

如何获取正在使用我的应用程序的当前用户的唯一 ID？

我不想检索`device UDID`（出于我的用户隐私问题）。

我曾经看到在最新的 API 版本（4.0+）中有这样的方法可以为当前的 android 用户生成一个唯一的 id，但我现在找不到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T15:22:32.267

这是谷歌的官方声明

[http://android-developers.blogspot.be/2011/03/identifying-app-installations.html](http://android-developers.blogspot.be/2011/03/identifying-app-installations.html)

你真的应该读一读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:23:35.333

我猜你正在使用某种后端，所以也许你可以创建一个端点来返回一个你保存在共享首选项中的唯一令牌。

# jqgrid - jqGrid 内联编辑自动完成预加载器图标

> ID：16132710
> 
> 赞同：1
> 
> 时间：2013-04-21T15:18:41.880
> 
> 标签：jqgrid, autocomplete

我有一个自动完成字段在内联编辑上工作正常，但我希望在请求/加载数据时显示在字段右侧的 nice-ajax-preloader-icon，就像在这个非内联示例中一样: [http://www.trirand.com/blog/phpjqgrid/examples/integrations/autocomplete/default.php](http://www.trirand.com/blog/phpjqgrid/examples/integrations/autocomplete/default.php)（就在 ShipName 字段上）

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:38:12.630

以下应该回答您的问题：

[执行自动完成搜索时如何显示加载图标？](https://stackoverflow.com/questions/7959373/how-to-display-loading-icon-when-autocomplete-search-is-performed)

基本上它只是打开加载图标，然后在收到响应时将其关闭。

# zend-framework - Zend Form 将 span 添加到 dd

> ID：16132714
> 
> 赞同：1
> 
> 时间：2013-04-21T15:19:07.487
> 
> 标签：zend-framework, zend-form, zend-form-element

我正在尝试制作自定义装饰器，但遇到了一个问题。下面是我的代码：

```
$oElement->setDecorators(array(
    'ViewHelper',
    array(array( 'data' => 'HtmlTag'),
    array('tag' => 'dd', 'span' => 'myspan', 'class' => $class . ' myclass ' )),
    array('Label', array('tag' => 'dt', 'class' => $class))
)); 
```

我想在 dd 内添加一个跨度，以便在呈现表单后看起来像：

```
<dd class="myclass"> <span> </span> </dd> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:28:58.920

我无法测试这一点，因为我的平板电脑上没有安装 Zend，但认为您必须添加跨度：

```
$oElement->setDecorators(array(
    'ViewHelper',
    array(array('data' => 'HtmlTag'), 
        array('tag' => 'span', 'class' => $class . 'myspan')),
    array(array('span'   => 'HtmlTag'), 
        array('tag' => 'dd', 'class' => $class . 'myclass')),
    array('Label', array('tag' => 'dt', 'class' => $class))
)); 
```

我记得我个人厌倦了 Zend 装饰器和一般的 Zend Forms，因为感觉它比仅仅用 HTML 制作表单需要更多的努力。无论如何，希望这会有所帮助。

# sml - 如何在 SML 中映射字符串中的每个字符

> ID：16132715
> 
> 赞同：2
> 
> 时间：2013-04-21T15:19:13.983
> 
> 标签：sml, smlnj, ml

我有一个函数 foo 接受一个字符。我想将该函数映射到字符串中的每个字符。

```
fun foo (ch : char) =
    ch;
fun bar (str : string) =
    map foo [(str)]; 
```

显然，由于将字符串应用于需要 char 的函数，这将不起作用。所以我尝试使用 String.explode(str) 将其分解为一个 char 数组，但是我似乎无法映射数组中的每个 char 并将 char 应用于 foo 函数。

```
fun foo (ch : char) =
     ch;
fun bar (str : string) =
    map foo [(String.explode(str))]; 
```

如何将函数映射到字符串中的每个字符？

编辑：我想将 foo 更改为采用 2 个参数

```
fun foo(ch : char, i : int) =
    ch;
fun bar(str : string) =
    map foo (String.explode(str), 1); 
```

但这给了我一个大亨不匹配

```
operator domain: (char * int) list
operand:         char list * int 
```

为什么以前 map 函数可以理解 String.explode(str) 来映射每个字符，但现在它把它视为一个完整的字符列表？

编辑2：没关系，想通了。

```
fun bar(str : string) =
    map (fn x => foo (x, 1)) (String.explode(str)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:33:55.153

当您想要`map`覆盖每个字符时，您提供的列表`map`必须是字符列表。`explode`返回一个字符列表，所以使用`explode`绝对是正确的想法。但是您将返回的列表`explode`放入另一个列表中，从而产生一个字符列表*列表*。这就是您收到类型错误的原因。

只需删除外部列表，您的代码就会按您的意愿工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T18:49:20.130

```
- String.map Char.succ "HAL";
> val it = "IBM" : string 
```

# android - 游戏动画帧生成工具

> ID：16132719
> 
> 赞同：1
> 
> 时间：2013-04-21T15:19:32.243
> 
> 标签：android, ios, animation, graphics, photoshop

对于任何游戏开发来说，最重要的是需要好的动画来吸引用户。动画由各种帧（按顺序播放的单个图片）组成。到目前为止，我一直在使用 Photoshop 和 Flash 为我的游戏生成帧。但是生成每个单独的帧并按顺序完美播放它是一项耗时的工作。

**我想知道是否有适用于 Mac 或 PC 的智能且易于使用的工具，我可以使用它轻松快速地生成游戏角色和所有动画帧？**

欢迎所有建议。

# haskell - 执行块内的Haskell Parse Error

> ID：16132724
> 
> 赞同：0
> 
> 时间：2013-04-21T15:19:47.473
> 
> 标签：haskell, indentation

我收到以下错误...

> 输入“args”上的解析错误

...在尝试编译以下代码时：

```
import System.Environment (getArgs)

interactWith function inputFile outputFile = do 
    input <- readFile inputFile
    writeFile outputFile (function input)

main = mainWith myFunction   
    where mainWith function = do
        args <- getArgs  
        case args of
            [input,output] -> interactWith function input output 
            _ -> putStrLn "error: exactly two arguments needed"

        -- replace "id" with the name of our function below 
        myFunction = id 
```

代码取自*Real World Haskell*的第 4 章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:29:14.493

问题是缩进。在书中我无法正确解释缩进。代码应该是这样的：

```
import System.Environment (getArgs)

interactWith function inputFile outputFile = do 
    input <- readFile inputFile
    writeFile outputFile (function input)

main = mainWith myFunction   
    where 
        mainWith function = do
            args <- getArgs  
            case args of
                [input,output] -> interactWith function input output 
                _ -> putStrLn "error: exactly two arguments needed"

        -- replace "id" with the name of our function below 
        myFunction = id 
```

我在学习 Haskell 时遇到的最大问题之一是模糊的编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:44:50.843

您问题代码中的缩进是正确的。您可能在代码中加入了 a 。有很多方法可以强制你的编辑器用 4 个空格替换每个选项卡。

# google-app-engine - 如何使用 Google API Explorer 通过 OAuth 测试我自己的 App Engine Endpoints？

> ID：16132727
> 
> 赞同：14
> 
> 时间：2013-04-21T15:20:03.987
> 
> 标签：google-app-engine, oauth-2.0, google-cloud-endpoints

我在 App Engine 上部署了一个 Endpoints API。我使用 Google API Explorer 向不需要登录的 API 方法发出请求没有问题。我使用的 URL 是：

https://developers.google.com/apis-explorer/?base=https://[MY_APP_ID].appspot.com/_ah/api

我被卡住的地方是调用需要用户登录的 API 方法，例如这个：

```
@ApiMethod(name = "config.get",
        clientIds = {"[MY_CLIENT_ID].apps.googleusercontent.com", "com.google.api.server.spi.Constant.API_EXPLORER_CLIENT_ID"},
        audiences = {"[MY_APP_ID].appspot.com"},
        scopes = {"https://www.googleapis.com/auth/userinfo.email"})
public Config getConfig(User user) throws OAuthRequestException {
    log.fine("user: " + user);

    if (user == null) {
        throw new OAuthRequestException("You must be logged in in order to get config.");
    }

    if (!userService.isUserAdmin()) {
        throw new OAuthRequestException("You must be an App Engine admin in order to get config.");
    }
    ... 
```

在 API Explorer 右上角有一个开关，单击该开关后，我可以指定范围和授权。我只检查了 userinfo.email 范围。没有什么不同的。我从电话中得到的回应是：

```
503 Service Unavailable

- Show headers -

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "backendError",
    "message": "java.lang.IllegalStateException: The current user is not logged in."
   }
  ],
  "code": 503,
  "message": "java.lang.IllegalStateException: The current user is not logged in."
 }
} 
```

回到 Endpoints 处于 Trusted Tester 阶段时，我记得在 OAuth2 Playground 中有一个手动步骤来获取 ID 令牌而不是访问令牌或类似的东西。如果仍然需要这样做，那么现在 Endpoints 文档中似乎已经消失了任何提及，我现在也看到了在 API Explorer 中交换令牌的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T22:00:16.740

我看到你有`"com.google.api.server.spi.Constant.API_EXPLORER_CLIENT_ID"`引号。如果这不是您对 Stack Overflow 的转录中的拼写错误，那就是个问题。该值已经是一个字符串，因此您只需将文本`com.google.api.server.spi.Constant.API_EXPLORER_CLIENT_ID`（不是实际的客户端 ID）作为白名单范围传递。那是行不通的。试试这个：

```
@ApiMethod(name = "config.get",
        clientIds = {"[MY_CLIENT_ID].apps.googleusercontent.com", com.google.api.server.spi.Constant.API_EXPLORER_CLIENT_ID},
        audiences = {"[MY_APP_ID].appspot.com"},
        scopes = {"https://www.googleapis.com/auth/userinfo.email"}) 
```

**编辑**：`isUserAdmin`在 Endpoints 中不受支持，并且可能是错误的次要原因。我建议在提供的 User 对象上提交支持此方法的功能请求（我们可能不会为用户服务本身提供支持，因此它与 OAuth 登录是分开的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T14:32:41.667

我不知道这是什么时候引入的，但是如果您使用 OAuth2，则`UserService.isUserAdmin()`可以使用`OAuthServiceFactory.getOAuthService().isUserAdmin(EMAIL_SCOPE)`where `EMAIL_SCOPE`is " [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email) " 而不是。

这使得使用旧的 OpenId 或 OAUth2 变得容易：

```
boolean isAdmin = false;
try {
  isAdmin = userService.isUserAdmin());
} catch (IllegalStateException e1) {
  try {
    isAdmin = OAuthServiceFactory.getOAuthService().isUserAdmin(EMAIL_SCOPE);
  } catch (Exception e2) {}
} 
```

最初的问题是几年前提出的，但也许这对其他人有帮助。

# c++ - 运算符的定义

> ID：16132733
> 
> 赞同：1
> 
> 时间：2013-04-21T15:20:34.420
> 
> 标签：c++, class, operators

我正在尝试定义一些运算符。

我是根据这个文档做的：

[http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)

是否存在应该定义两次的运算符？

我认为它是索引运算符。我对吗？我将其定义为：

```
int operator [] (const int power) const{
    // here there is some code
} 
```

假设我正确实现了它，那么应该定义两次的运算符是什么？

它支持接下来的事情吗？

```
a[1] = 3;
cout << a[1]; // I defined the << operator 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:25:25.997

您可能希望同时拥有运算符的 a`const`和非`const`版本：

```
int operator[](int index) const { ... }
int& operator[](int index) { ... } 
```

这将允许您的示例中给出的两种用法。即使`a`is ，它也将允许第二次使用`const`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T15:24:08.340

> 我认为它是索引运算符。我对吗？

几乎。它被称为*下标运算符*，它必须接受**一个**参数。您的运营商接受两个，这使您的代码非法。

> 它支持接下来的事情吗？

假设你有一个正确编写的`operator []`（在不知道应用程序逻辑的一些上下文的情况下，我不知道如何编写一个），那么你提到的两个指令都应该得到支持。

但是，为了做到这一点：

```
a[1] = 3; 
```

要合法（如果返回基本类型），`operator []`应该返回一个左值引用 - 因此，`int&`而不是`int`. 当然，这意味着左值引用所绑定的对象不能是本地对象或临时对象，因为这意味着返回一个*悬空*引用。

```
int& operator [] (const int power) { // <== The function cannot be "const" if you
// ^                                 //     are returning a non-const lvalue ref
                                     //     to a data member or element of a data
                                     //     member array
    // here there is some code
} 
```

您可能还需要一个`const`版本的下标运算符：

```
int operator [] (const int power) const {
// No need to use a int const&    ^^^^^
// here, that is basically the    This member function can be const, since it is
// same as returning an int by    neither modifying the object on which it is
// value                          invoked, nor returns any non-const lvalue ref
                                  to a data member or an element of data member
    // here there is some code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:32:37.150

为了支持分配，有两个选项

1.  索引运算符`[]`返回一个引用
2.  索引操作符`[]`返回一个实现赋值的代理对象

第一种情况是最简单的，但不允许您区分读取和写入操作。第二种方法有点复杂，但允许更多控制：

方法（2）的一个例子如下

```
struct MyArray {
    std::vector<int> v;

    MyArray(int n) : v(n) {}

    struct ItemRef {
        MyArray& a;
        int index;

        ItemRef(MyArray& a, int index)
          : a(a), index(index)
        {}

        int operator=(int x) {
            printf("Writing to element %i\n", index);
            a.v[index] = x;
            return x;
        }

        operator int() {
            printf("Reading element %i\n", index);
            return a.v[index];
        }
    };

    ItemRef operator[](int index) {
        if (index < 0 || index >= int(v.size()))
            throw std::runtime_error("Invalid index");
        return ItemRef(*this, index);
    };
}; 
```

# view - 使用 RESTAdapter 时 Ember 的选择选项错误

> ID：16132739
> 
> 赞同：1
> 
> 时间：2013-04-21T15:21:02.633
> 
> 标签：view, ember.js, ember-data

我使用 RESTAdapter 模型用选项填充 Ember 的选择视图。

contentBinding 映射到控制器中的 a 属性，我在其中使用 this.set('myProperty', model.find(someQuery))。

具有 1 个结果的 model.find(someQuery) 效果很好，但是具有许多结果的 model.find(someQuery) 效果很奇怪。结果中的最后一个对象显示的次数与结果的长度一样多。

{{查看 Ember.Select contentBinding="myProperty" optionValuePath="content.id" optionLabelPath="content.name" selectionBinding="selectedResult" prompt=" "}}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:50:09.697

有趣的。乍一看，您问题中包含的代码看起来不错。调试：

1) 检查以确保查询结果符合您的预期。

```
content = model.find(someQuery); //with many results
// wait for results...
console.log(content.getEach('id')); //expect array of ids
console.log(content.getEach('name')); //expect array of names 
```

2) 检查 myProperty 的内容 - 来自模板：

```
{{#each myProperty}}
  <pre>{{id}}.{{name}}</pre>
{{/each}} 
```

期望模板为每个选项输出 id/name。

# iphone - 如何保持 UITableView 的数据源有序以响应用户移动行？

> ID：16132740
> 
> 赞同：3
> 
> 时间：2013-04-21T15:21:28.507
> 
> 标签：iphone, ios, objective-c, ipad, uitableview

我有一个 UITableView，其中一个部分由 NSFetchedResultsController 管理。它获取核心数据对象并按“order”属性对其进行排序：

1.  订单为 1 的对象
2.  订单为 2 的对象
3.  订单为 3 的对象

我面临的要求是用户可以移动行。搬家后：

1.  订单为 2 的对象
2.  订单为 1 的对象
3.  订单为 3 的对象

**我需要做些什么来确保核心数据中的托管对象反映用户移动表视图行导致的顺序变化？** 当我使用 GMGridView 时，有一个回调可以交换两个对象。在这种情况下，改变他们的顺序是可行的，但我没有看到 UITableView 的这种功能。

我是否需要手动更改移动行下方存在的所有对象的 order 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:56:56.357

移动行不仅会影响自身的 order 属性，还会影响其后面的所有行。我发现的一种解决方法是将获取请求对象复制到 nsmutablearray，然后在该数组中移动对象。然后运行一个 for 循环并更新每个对象中的 order 属性，然后保存托管对象上下文。然后重新加载uitableview。这似乎需要做很多工作，但目前在获取请求中移动对象不像插入和删除那样是自动的。我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:43:48.097

您需要存储获取的对象和“行顺序”之间的关联。您根据行顺序对行进行排序；行顺序默认为您的“订单”属性。当用户移动一行时，您也会更新“行顺序”。

您可以在 CoreData 对象本身（添加另一个属性）或通过将获取的对象映射到其行顺序（在`NSUserDefaults`或仅在 a 中`NSDictionary`）来维护关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:24:23.960

你可以使用这个：

```
 - (NSIndexPath *)            tableView:(UITableView *)tableView 
  targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath 
                       toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath 
```

加上通过交换对象顺序重新排序您的数据源。

# php - PHP系统通知发送

> ID：16132745
> 
> 赞同：1
> 
> 时间：2013-04-21T15:22:00.427
> 
> 标签：php, linux, ubuntu

我试图在某些情况下显示通知。我看到你可以用 system() 函数做到这一点。除了我不能让它工作;)。

```
error_reporting(E_ALL);
system("notify-send 'Text here?'");
system('notify-send "Text here?"'); 
```

有人可以告诉我我做错了什么吗？还是我的设置错误？我想用 notify-send 和 PHP 在 Ubuntu 上创建通知

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:26:19.427

好的，即使这有点解决了，但我想在这里添加一些注释/信息，
据我所知，问题应该是运行 PHP 的用户与运行桌面会话的用户不同（gnome/kde /etc)，因此 PHP 可执行文件无权在该屏幕上显示通知。
对我来说，我通过使 PHP 可执行文件在拥有会话的同一用户下运行来解决它（例如，如果我的用户名被调用`abc`，我将 PHP 设置为在同一`abc`用户下运行，我还必须使用导出显示`export DISPLAY=:0`，
所以我的整个 exec/system 调用是这样的

```
exec("export DISPLAY=:0; notify-send 'title' '$message' ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T07:58:33.790

我将导出 DISPLAY 方法变成了 /usr/bin 脚本。我通过远程 ssh 对系统进行了测试，并在 bash 脚本/crons 中成功使用了它。 [http://pastebin.com/h11p2HtN](http://pastebin.com/h11p2HtN) 我很好奇的是如何在登录屏幕上显示桌面通知。显示一些有关初始化脚本的信息会很好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-03-31T14:42:35.683

我试图让它与 php 一起工作，但我在这里看到的每个解决方案都很糟糕，要么以您的用户身份运行 apache，要么导出显示等等。

我在 node.js 中编写了这个小脚本，优点是由桌面用户运行，不需要导出额外的环境变量：

1.  安装 node.js（应该很容易下载、配置、制作、安装）
2.  为这个应用程序创建一个目录，例如 mkdir ~/message
3.  安装 express-framework: cd ~/message ; npm 安装快递
4.  创建脚本
5.  运行它...“node ./script-name.js”

现在您可以触发类似 localhost:5555/?message=Hello+World 的请求

为我工作，在我浪费了几个小时试图用 apache、php、cgi 或其他东西来获得这个之后。

脚本：

```
var express = require('express');
var app = express();
var sys = require('sys');
var exec = require('child_process').exec;
var child;

app.get('*', function (req, res) {
  res.contentType('text/html');
  res.send(200, '');
  child = exec("/usr/bin/notify-send 'Message' '" + req.query.message + "'", function (error, stdout, stderr) {});
});

app.listen(5555); 
```

# google-app-engine - google-app-engine没有运行项目windows 7

> ID：16132746
> 
> 赞同：2
> 
> 时间：2013-04-21T15:22:09.747
> 
> 标签：google-app-engine

你好我有一个谷歌应用引擎的问题。我已经从 python.org 安装了 python 2.7.4，并且我还从谷歌的网站安装了用于 python 的谷歌应用引擎。然后我创建一个新项目，加载它，单击运行按钮。到目前为止，一切都很好。然后它停止做任何事情，名称旁边的小图标是黄色时钟。如果我再次单击运行，它会显示“无法运行检查首选项或安装 python”

我签入了 cmd 并且 python 已经安装。在首选项中，我同时单击了“c/python27/python.exe 和 c/python27/pythonw.exe”，但仍然没有解决方案。

有什么办法可以让它工作吗？

# android - 如何实现滑动菜单在android中工作

> ID：16132749
> 
> 赞同：2
> 
> 时间：2013-04-21T15:22:18.327
> 
> 标签：android, slider, actionbarsherlock

我在[这里有滑动菜单库](https://github.com/jfeinstein10/SlidingMenu)有滑动菜单库，我希望左右滑动菜单都基于操作，在我的情况下，无论图标点击如何，总是从左到右滑动。这是代码

问题出在哪里？。如何使两个幻灯片工作？

```
package com.example.simple_left_right_slider;

import android.os.Bundle;
import android.app.ActionBar;
import android.app.Activity;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.view.MenuItem;

import com.actionbarsherlock.app.SherlockFragmentActivity;

import com.slidingmenu.lib.SlidingMenu;

public class MainActivity extends  FragmentActivity{

    private SlidingMenu menu;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);

        menu = new SlidingMenu(this);
        menu.setTouchModeAbove(SlidingMenu.LEFT_RIGHT);
        menu.setMode(SlidingMenu.LEFT_RIGHT);
        menu.setShadowWidthRes(R.dimen.shadow_width);
        //menu.setShadowDrawable(R.drawable.shadow);
        menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        menu.setFadeDegree(0.35f);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        menu.setMenu(R.layout.menu_frame);
        getSupportFragmentManager()
          .beginTransaction()
          .replace(R.id.menu_frame, new SampleListFragment())
          .commit();

        menu.setSecondaryMenu(R.layout.menu_frame1);

        getSupportFragmentManager()
          .beginTransaction()
          .replace(R.id.menu_frame1, new SampleListFragment())
          .commit();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.mainmenu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected (MenuItem item)
    {
        switch (item.getItemId()) {

          case android.R.id.home:
            menu.toggle();
            break;

          case R.id.github:
            menu.toggle();
            break;

        }
        return super.onOptionsItemSelected(item);

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T15:50:03.450

这是因为您`menu.toggle()`对两个操作都使用相同的操作：根据该方法打开/关闭左侧菜单的[来源。](https://github.com/jfeinstein10/SlidingMenu/blob/master/library/src/com/slidingmenu/lib/SlidingMenu.java)您应该`showSecondaryMenu()`改为使用打开右侧菜单。

# html - Rails 应用程序上的背景音乐

> ID：16132750
> 
> 赞同：0
> 
> 时间：2013-04-21T15:22:21.983
> 
> 标签：html, ruby-on-rails, background-music

我尝试在 Rails 应用程序中添加背景声音。代码是这样的：

```
embed src="followme.mp3" autostart="true" loop="true" hidden="true" 
```

但是我应该把声音放在哪里？在资产文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:24:41.613

转到顶部的属性选项卡...选择您的项目属性，然后转到参考。如果不存在，则创建一个新的参考文件夹，然后添加参考。现在从属性中选择创建对象音频文件的路径。简单的呃:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T22:25:51.543

## 简单的答案

将文件放在`public/`目录中。例子：`public/my_audio_file.mp3`

## 更好，更干净的答案

将所有音频文件放在一个文件夹中，例如：`public/audio/my_audio_file.mp3`. 然后执行以下操作：

```
embed src="audio/my_audio_file.mp3" autostart="true" loop="true" hidden="true" 
```

# c# - 如何更改 ListView 中正在更新的值？

> ID：16132752
> 
> 赞同：1
> 
> 时间：2013-04-21T15:22:43.580
> 
> 标签：c#, asp.net, listview, updating

我似乎无法找到答案，也许我没有使用正确的术语。

我有一个可编辑的 ListView，我想要它，以便如果用户单击编辑然后单击更新，该字段将使用来自另一个文本框的值进行更新，而不是他们正在编辑的字段。

这样做的原因是我有一个颜色选择器，它可以改变文本框的值，当他们单击更新时，我希望这个值成为更新的值。

我想我利用了 ItemUpdating 事件，但我没有太多的代码方式，因为我很迷茫。到目前为止我有这个：

```
protected void ListView2ItemUpdating(object sender, ListViewUpdateEventArgs e)
{
  var selectedItem = ListView2.Items[ListView2.EditIndex];

// I have no idea what to put here
 something = ColourChosen.Value;
} 
```

这是一张图片，我希望能让我尝试做的事情更容易理解：

![列表视图2](https://i.stack.imgur.com/QYkMg.png)

如果有人可以为我指出任何示例的正确方向，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:25:19.477

虽然这不能回答我最初的问题，但这确实是我想要发生的。

我应该做的是更改 ListView 附加到的数据库。

我使用这段代码：

```
protected void ListView2ItemUpdating(object sender, ListViewUpdateEventArgs e)
{
  using (var myEntities = new i96X_utilEntities())
  {
    var myPlotColour = (from plotC in myEntities.PlotColours
                        where plotC.ID == selectedID
                        select plotC).Single();
    myPlotColour.PlotColour1 = ColourChosen.Value;
    myEntities.SaveChanges();
  }
} 
```

因此，即使我不知道如何截取 ListView 中正在更新的字段，但在此示例中我不需要这样做。

# jquery - 在 WebMatrix 项目中应该将 jquery CDN 引用放在哪里？

> ID：16132755
> 
> 赞同：0
> 
> 时间：2013-04-21T15:22:58.253
> 
> 标签：jquery, google-api, cdn, webmatrix

我在这里看到：[你从哪里包含 jQuery 库？谷歌 JSAPI？CDN？](https://stackoverflow.com/questions/547384/where-do-you-include-the-jquery-library-from-google-jsapi-cdn)这是从 CDN（Google 的）包含 jQuery 的好方法：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script> 
```

由于 jQuery 2 刚刚发布，我打算使用：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script> 
```

...以及最新的 jQueryUI：

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script> 
```

注意：这些片段与上面链接的 Stack Overflow 上的“规范答案”相同，来自谷歌的 jQuery CDN 页面：[https ://developers.google.com/speed/libraries/devguide#jquery-ui](https://developers.google.com/speed/libraries/devguide#jquery-ui)

现在我的问题是：在 WebMatrix 项目中，对 CDN 的引用应该去哪里？在 Web.Config 中？_AppStart.cshtml？_SiteLayout.cshtml？或者...？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:31:57.987

_SiteLayout.cshtml 将是这个地方：

```
. . .
<script src="~/Scripts/jquery-2.0.0.min.js"></script>
<!-- May want to replace the above before deploying with:
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
..and similar for jquery-ui -->
<script src="~/Scripts/jquery-ui-1.9.2.js"></script>
. . . 
```

当然，需要从[http://code.jquery.com/jquery-2.0.0.min.js](http://code.jquery.com/jquery-2.0.0.min.js)下载 jquery-2.0.0.min.js并放在项目的 Scripts 文件夹中。

# c# - 将 US-Style DateTime 转换为本地时间

> ID：16132757
> 
> 赞同：0
> 
> 时间：2013-04-21T15:23:07.037
> 
> 标签：c#, datetime, windows-phone-8, localtime

如何将服务器返回的美国时间转换为用户本地时间`DateTime`？`5/1/2012 3:38:27 PM`我正在为 Windows 手机开发。

我试过了

```
DateTime localTime = serverTime.ToLocalTime(); 
```

但结果是几个小时。我认为`ToLocalTime()`会负责转换到用户所在的任何时区？也许我需要先获取用户的时区信息？

**编辑 1**

我认为 serverTime 在 PST 时区

**编辑 2**

我的时区是 GMT +8。我尝试了以下方法，但结果 localTime 落后了 15 小时。

```
TimeZoneInfo localZone = TimeZoneInfo.Local;
DateTime localTime = TimeZoneInfo.ConvertTime(serverTime, localZone); 
```

**编辑 3**

这导致我当地时间晚了 7 个小时。

```
TimeZoneInfo localZone = TimeZoneInfo.Local;
DateTime dateTimeKind = DateTime.SpecifyKind(serverTime, DateTimeKind.Utc);
DateTime localTime = TimeZoneInfo.ConvertTime(dateTimeKind, localZone); 
```

**编辑 4**

好的，我想我到了那里，但不确定这是否适用于所有时区。我认为我仍然必须考虑夏令时，因为由此产生的当地时间现在只提前一小时。

```
TimeZoneInfo localZone = TimeZoneInfo.Local;
double offset = localZone.GetUtcOffset(DateTime.Now).TotalHours;
DateTime dateTimeKind = DateTime.SpecifyKind(serverTime, DateTimeKind.Utc);
DateTime localTime = TimeZoneInfo.ConvertTime(dateTimeKind, localZone).AddHours(offset); 
```

但是，您如何获得`DLS`对 Windows Phone 中特定时区有效的信息？`TimeZoneInfo.FindSystemTimeZoneById`好像不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:29:33.180

为此，`DateTime`-object`serverTime`必须是 UTC 格式 - 或者至少知道`Kind`它是什么。**在本页的备注**部分阅读有关此内容的所有详细信息[。](http://msdn.microsoft.com/en-us/library/system.datetime.tolocaltime%28v=vs.95%29.aspx)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:22:08.170

时间*代表*什么？如果它是特定的时间点，例如发生某事的日期和时间，那么您应该更新您的服务器代码以以下列格式之一返回时间：

```
// ISO8601 local time with offset.
// get from DateTimeOffset.ToString("o")
2012-05-01T15:38:27-07:00

// ISO8601 UTC time
// get from DateTime.ToString("o") when kind is UTC
2012-05-01T22:38:27Z 
```

这样做非常重要，因为夏令时结束时本地时间可能不明确。您必须提供正确的偏移量（-8 表示 PST，-7 表示 PDT），或者以 UTC 格式发送。

在极少数情况下，发送本地时间本身是有意义的。如果你认为你有一个，请详细说明时间代表什么。

# java - Java中有自动类型推断吗？

> ID：16132759
> 
> 赞同：141
> 
> 时间：2013-04-21T15:23:15.607
> 
> 标签：java, c++, auto

`auto`Java 中是否有像 C++ 中的变量类型？

一个例子：

```
for ( auto var : object_array)
    std::cout << var << std::endl;

for( auto var : object_array)
    var.do_something_that_only_this_particular_obj_can_do(); 
```

我知道 Java 中有一个增强的 for 循环，但是有自动吗？如果没有，这样做是否有技巧？我指的是 C++11 中的新特性

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2017-10-31T14:15:23.783

`var`可能是 Java 10 通过关键字拥有您（和我）想要的东西。

```
var list = new ArrayList<String>();  // infers ArrayList<String>
var stream = list.stream();          // infers Stream<String> 
```

来自[JDK 增强提案 286](http://openjdk.java.net/jeps/286)

* * *

**更新：**是的，该功能已进入 Java 10 版本！

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-04-21T15:28:23.373

Java 10 引入了一个`var`类似于 C++ 的标识符`auto`；看到[sorrymissjackson的回答](https://stackoverflow.com/a/47037550/)。

在 Java 10 之前，没有等效于`auto`关键字。相同的循环可以实现为：

```
for ( Object var : object_array)
  System.out.println(var); 
```

Java 有局部变量，其范围在定义它们的块内。*类似于 C 和 C++，但没有 auto 或 register 关键字。但是，Java 编译器不允许使用未显式初始化的局部变量，并且会给出编译错误（与 C 和 C++ 不同，编译器通常只会给出警告）。*礼貌：[维基百科](http://en.wikipedia.org/wiki/Automatic_variable)。

Java 中没有像 C++ 这样的主流类型推断。有一个[RFE](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4459053)，但这被关闭为“不会修复”。给出的是：

> 人类通过两种方式从类型声明的冗余中受益。首先，冗余类型作为有价值的文档——读者不必搜索 getMap() 的声明来找出它返回的类型。其次，冗余允许程序员声明预期的类型，从而受益于编译器执行的交叉检查。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-07-31T22:48:36.107

Java 7 引入了[菱形语法](http://docs.oracle.com/javase/tutorial/java/generics/types.html#diamond)

```
Box<Integer> integerBox = new Box<>(); // Java 7 
```

与旧 java 相比

```
Box<Integer> integerBox = new Box<Integer>(); // Before Java 7 
```

* * *

挑剔的读者会注意到，这种新语法无助于在原始问题中编写 for 循环。这似乎是正确且完全有意的。请参阅引用 Oracle 的错误数据库的其他答案。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-05-09T16:37:34.163

在 Java 8 中，您可以使用 lambda 类型推断来避免声明类型。与提问者的例子类似的是：

```
object_array.forEach(obj -> System.out.println(obj)); 
object_array.forEach(obj -> obj.do_something_that_only_this_particular_obj_can_do()); 
```

两者都可以使用方法引用进行简化：

```
object_array.forEach(System.out::println); 
object_array.forEach(ObjectType::do_something_that_only_this_particular_obj_can_do); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-10-22T21:22:35.833

它不是一个纯 Java 解决方案，但是添加一个名为[lombok](https://projectlombok.org/)`auto`的库将使下面的魔法能够编译和工作，与C++中的关键字非常相似

```
List<String> strList = Arrays.asList("foo", "bar", "baz");
for (val s: strList){
    System.out.println(s.length());
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-04-21T15:25:07.100

简而言之，不，没有自动类型。如果您所做的只是打印值，则可以将值称为`Object`.

# c# - 跳跃时改变角色方向

> ID：16132762
> 
> 赞同：1
> 
> 时间：2013-04-21T15:23:33.550
> 
> 标签：c#, unity3d

我正在制作一个 2D 平台游戏，并按照教程来构建我的角色。这个角色工作正常，除了跳跃时，它不允许在空中改变方向。我如何添加这个以使我的角色能够在跳跃中改变方向？

用于基本运动的代码如下：

```
void Update()
{

    CharacterController controller = GetComponent<CharacterController>();
    float rotation = Input.GetAxis("Horizontal");
    if(controller.isGrounded)
    {
        moveDirection.Set(rotation, 0, 0);
        moveDirection = transform.TransformDirection(moveDirection);

        //running code
        if(Input.GetKey(KeyCode.LeftShift) || Input.GetKey(KeyCode.RightShift)) //check if shift is held
        { running = true; }
        else
        { running = false; }

        moveDirection *= running ? runningSpeed : walkingSpeed; //set speed

        //jump code
        if(Input.GetButtonDown("Jump"))
        {
            jump();
        }
    }

    moveDirection.y -= gravity * Time.deltaTime;

    controller.Move(moveDirection * Time.deltaTime);

} 
```

编辑：忘记包含 jump() 的代码，这可能很重要......

```
 void jump()
{
    moveDirection.y=jumpHeight;
    transform.parent=null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:46:19.857

`moveDirection`仅当字符接地时才更新向量：

```
if(controller.isGrounded) 
```

当玩家跳跃时`isGrounded`设置为 false，因此`moveDirection`不会更新（重力除外）。

我想你不想在跳跃时影响角色的速度（除非它应该在空中飞行或行走）。我猜你想在它跳跃的时候改变它的方向，所以你可以直接修改变换，让它根据你的输入旋转。

就像是：

```
else
{
   float amountOfRotation = Input.GetAxis("...") * rotationScaleFactor; 
   transform.RotateAround(transform.position, transform.up, Time.deltaTime * amountOfRotation);
} 
```

* * *

编辑

我从未使用过它，但我认为 CharacterController 的设计目的是仅在对象接地时才移动。因此，如果您想在播放时移动它，请不要使用 Move 方法，而是直接编辑 GameObject 的变换：

```
else
{
   float additionalForwardSpeed = Input.GetAxis("...") * speedScaleFactor;  
   transform.Translate(transform.forward * Time.deltaTime * additionalForwardSpeed ); //translate
} 
```

上面的代码应该可以提高对象在本地正向的速度。

# android - 实现android音乐搜索

> ID：16132766
> 
> 赞同：1
> 
> 时间：2013-04-21T15:23:38.430
> 
> 标签：android, sqlite, search, media-player, android-sqlite

我正在为 android 实现一个音乐播放器，并希望实现搜索功能。搜索应该寻找专辑、艺术家和标题，我希望它们以不同的方式显示。此外，如果我找到例如艺术家和标题，我的应用程序应该能够在用户单击一个项目时做出正确反应（艺术家 = 显示他的所有歌曲，标题 = 播放歌曲）。

我知道有一个 MediaStore 提供程序（[http://developer.android.com/reference/android/provider/MediaStore.Audio.Media.html](http://developer.android.com/reference/android/provider/MediaStore.Audio.Media.html)），但似乎我需要比这更多的功能。如果我做这样的查询，我现在不匹配艺术家或标题：

```
String[] projection = {
    BaseColumns._ID,   
    MediaStore.Audio.Media.MIME_TYPE, 
    MediaStore.Audio.Artists.ARTIST,
    MediaStore.Audio.Albums.ALBUM,
    MediaStore.Audio.Media.TITLE,
};

Cursor c = getContentResolver().query(
    MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, 
    projection, MediaStore.Audio.Media.TITLE + " 
    LIKE "+ "'%"+query+"%' OR " + MediaStore.Audio.Media.ARTIST  + " 
    LIKE "+ "'%"+query+"%'", null, MediaStore.Audio.Media.TITLE); 
```

我现在正在考虑创建一个基于中央 android 音乐数据库的索引，但我不确定这是否可能。

也许有一个简单的解决方案，或者有人已经实现了这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:33:36.303

我自己找到了解决方案。实际上有一个由 android 系统提供的音乐搜索表，尽管它似乎没有在任何地方记录。无论如何，如果有人有同样的问题，试试这个 Uri：content://media/external/audio/search/fancy/

顺便说一句：我在这个源代码中找到了 uri：http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.2.2_r1/com/android/music/ QueryBrowserActivity.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.2.2_r1/com/android/music/QueryBrowserActivity.java)

# .htaccess - 使用 .htacess 将空格 (%20) 替换为 url 中的破折号

> ID：16132767
> 
> 赞同：0
> 
> 时间：2013-04-21T15:23:42.647
> 
> 标签：.htaccess, url-rewriting

我在 .htaccess 中重写 url 时遇到问题。我的 url 数据来自数据库，其中也包含一些空格。我想从我的网址中省略空格，并想用破折号替换它。

目前我用我目前的.htacess ..

[http://www.xyz.com/detail-10-Event%20Tickets.html](http://www.xyz.com/detail-10-Event%20Tickets.html)

我希望将其替换为

[http://www.xyz.com/detail-43-61-Event-Tickets.html](http://www.xyz.com/detail-43-61-Event-Tickets.html)（这就是我想要的。）

请找到 .htaccess 的代码并建议我应该进行哪些更改来解决此问题。

```
Options +FollowSymLinks
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteRule uploadPRODUCT-(.*)-(.*)-(.*).html$ uploadPRODUCT.php?cid=$1&aid=$2&tid=$3

    RewriteRule ab-(.*)-(.*).html$ products.php?cid=$1&cname=$2 
    RewriteRule detail-(.*)-(.*)-(.*).html$ productDETAILS.php?cid=$1&aid=$2&pname=$3

    RewriteRule (.*)-(.*).html$ cms.php?name=$1&cmsid=$2

    errorDocument 404 http://www.xyz.com/notfound.php 
    errorDocument 500 http://www.xyz.com/500error.html

    RewriteCond %{http_host} ^xyz.com.com [NC]

    RewriteRule ^(.*)$ http://www.xyz.com/$1 [R=301,L] 

</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:43:47.143

由于您从数据库条目创建 URL，因此我将在创建 URL 时替换空格。你可以用[`str_replace`](http://www.php.net/manual/en/function.str-replace.php)这个

```
$url = str_replace(' ', '-', $db_column); 
```

# python - 如何通过烧瓶从客户端将png文件写入目标目录

> ID：16132769
> 
> 赞同：3
> 
> 时间：2013-04-21T15:23:44.413
> 
> 标签：python, flask

我想从 request.form["file"] 写入文件，但我做不到。

我的contact.html 在这里。

客户端代码是这样的......

```
<form action="contact" method="POST" enctype="multipart/form-data">
<input type="file" name="file">
<input type="submit" value="submit">
</form> 
```

服务器端是这样的

```
filestorage = request.files["file"]

print type(_file) #-> <FileStorage: u"__proto.png" ("img/png")>

# I tried below this , but it doesn't work.

f = open("tmp.png","wb")
f.write(filestorage) 
```

我想写这个是png文件到某处上传的文件。你有什么主意吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T16:06:27.410

You have the `save()` method of the `FileStorage` object, that lets you save the file content to disk:

```
file.save('/path/to/your/file') 
```

Flask Documentation: [http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.FileStorage.save](http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.FileStorage.save)

A useful tutorial: [http://flask.pocoo.org/docs/patterns/fileuploads/](http://flask.pocoo.org/docs/patterns/fileuploads/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:06:39.583

First, you have to configure your upload folder

```
app.config['UPLOAD_FOLDER'] = PATH_TO_UPLOAD_FOLDER 
```

Then to save your file

```
f = request.files["file"]
f.save(os.path.join(app.config['UPLOAD_FOLDER'], 'tmp.png')) 
```

# java - 在 Swing 中单击按钮后删除按钮周围的线条

> ID：16132777
> 
> 赞同：1
> 
> 时间：2013-04-21T15:24:21.407
> 
> 标签：java, swing, button, lines

我在 Java（Swing）中有一个 JButton：

![按钮](https://i.stack.imgur.com/qvvhF.png)

单击后，我在按钮周围得到这条线：

![在此处输入图像描述](https://i.stack.imgur.com/kzmnt.png)

如何删除这些行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:00:17.360

`button.setFocusPainted(false);`是正确的解决方案！

# java - 如何在netbean中将数据一帧传输到另一帧

> ID：16132779
> 
> 赞同：0
> 
> 时间：2013-04-21T15:24:26.680
> 
> 标签：java

我在netbean下面的运行方法中以不同的名声为GPS编写了一些代码继续更新500ms并获得经度和纬度的新值我想在另一个类名声中发送这个值我怎么办？目标变量是 tlon 和 tlat.t getvalue 方法不起作用。

```
public void run() {
            try {
                p1 = new communication().com();
            } catch (UnsupportedCommOperationException ex) {
                Logger.getLogger(vpsmain.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(vpsmain.class.getName()).log(Level.SEVERE, null, ex);
            } catch (TooManyListenersException ex) {
                Logger.getLogger(vpsmain.class.getName()).log(Level.SEVERE, null, ex);
            }

                  if(p1.substring(0, 1).equals("$"))
                  {
                     s=p1.split("\\$",0);
                      a1=s[1].split("\\*", 0);
                      t=a1[0].split(",",0);
           if((a1[0].substring(2, 5).equalsIgnoreCase("GGA")))
           {

    tlon.setText(t[4].substring(0, 3).concat(" ").concat(t[4].substring(4)).concat("'").concat("  ").concat(t[5]));

           double y1=Double.parseDouble(t[2])*180/Math.PI;

    tlat.setText(t[2].substring(0, 2).concat(" ").concat(t[2].substring(3).concat("'").concat("  ").concat(t[3])));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:57:16.080

在目标中创建一个公共方法（带有一些参数）`JFrame`并使用相关参数调用该方法。并创建类变量来获取这些值。
在第 2 帧中

```
public void setData(Lan lan,Lon lon){ // you can use any data type for these values as you need
   // there should be lan & lon defined in the class definition too.
   this.lan = lan;
   this.lon = lon;
} 
```

# objective-c - iOS / xcode：在设备上运行时didReceiveData为空但在模拟器上正常吗？

> ID：16132781
> 
> 赞同：3
> 
> 时间：2013-04-21T15:24:39.980
> 
> 标签：objective-c, json, api

我正在开发一个使用 API 的 iphone 应用程序。

在“**模拟器**”上它工作正常。在“**设备**”上，api 调用全部运行，但响应委托全部返回 EMPTY。

**LOG:**
**1)在下面为** **设备**`didReceiveData`返回（空`NSData`，即 <20>）：

 **```
append data <20> 
```

但这对于**模拟器**：

```
append data <dfgdf89fgd.....> 
```

**2）**`didReceiveResponse`我有下面的设备返回（**设置**NSLog 以监视 NSURLConnection 对象）。困惑为什么这不完整：

```
1 connection <NSURLConnection: 0x147a30> 
```

但这对于**模拟器**：

```
1 connection <NSURLConnection: 0x4b76ea0, http://api.site.com/search?id=111> 
```

**3)**下面`connectionDidFinishLoading`是**模拟器**

```
DONE. Received Bytes: 1400 
```

但下面的**设备**：

```
DONE. Received Bytes: 1 
```

**我的代码：**
我在 API 文件中有以下代码：

```
- (void)fetch: (NSString *)id{

    NSMutableData *receivedData = [[NSMutableData alloc]init];//initialised
   self.receivedData = receivedData;//set to available globally

   NSString *initialUrl = [NSString stringWithFormat: @"http://api.site.com/search?id=%@",id];

    NSURL *url = [NSURL URLWithString:initialUrl];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
    [request setHTTPMethod:@"GET"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"Token token=\"apitoken\"" forHTTPHeaderField:@"Authorization"];

    [NSURLConnection connectionWithRequest:[request autorelease] delegate:self];

}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"1 connection %@",connection);
    NSLog(@"didReceiveResponse");
    [self.receivedData setLength: 0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{

     NSLog(@"2 connection %@",connection);
     NSLog(@"append data %@",data);
    [self.receivedData appendData:data];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    //TODO error handling for connection
    NSLog(@"Cannot Connect");
    if ([_delegate respondsToSelector:@selector(apiFailed:)]) {
        [_delegate apiFailed:[error localizedDescription]];
    }

}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"DONE. Received Bytes: %d", [self.receivedData length]);
    NSLog(@"FULL DATA: %@",self.receivedData);
} 
```

**模拟器**和**设备**（我的iphone 配置了配置文件并正在工作）都在同一个 Wifi（我的家庭路由器）上运行。

**API：**
API 返回少量 JSON，我已经使用不同的 JSON 集进行了测试，设备和模拟器都返回完整的 JSON 没问题，我只能让它与这个 API 一起工作。
我什至在不同的位置有相同的 JSON（api 返回），我可以执行完全相同的请求（带有标头和身份验证），它对**device**没有问题。奇怪的是，虽然连接对象仍然不适合伪造的 api 服务器。在**设备** `didReceiveResponse`上`1 connection <NSURLConnection: 0x1af600>`仍然没有连接 url（但在**模拟器**上运行时它有`1 connection <NSURLConnection: 0x8193fd0, http://test-server.com:81/api-data.json>`）。这表明它是**设备**和**模拟器** `NSURLCONNECTION`对象之间的正常差异。
我觉得这可能是身份验证的障碍，但 API 是完全开放的（假设你有令牌）并且在模拟器中没有问题加上`didFailWithError`没有运行..

我已经在头文件中声明了委托方法。
不知道为什么连接对象和数据对象都会出现问题。

**替代方案：**
我在 fetch 方法中尝试了下面的方法，而不是我已经尝试过的方法，但它也适用于**Simulator**但同样的事情发生在**Device**上。

```
//NSURLCONN and NSDATA in response still return empty???
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL                                                                  
         URLWithString:@"http://api.site.com/search?id=111"]
         cachePolicy:NSURLRequestUseProtocolCachePolicy
         timeoutInterval:60.0];

[request setHTTPMethod:@"GET"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"Token token=\"mytoken\"" forHTTPHeaderField:@"Authorization"];
NSURLConnection *connection=[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

我将不胜感激有关此的任何想法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T16:17:31.407

用于检测：

1.  从请求中删除缓存（它可以做一些非常有趣的事情）。
2.  打印出 HTTP 状态码`connection:didReceiveResponse:`。确保你得到 200（你应该经常检查状态码！）
3.  在其他一些 REST 客户端中测试连接（大多数浏览器的插件都存在）。
4.  确保 API 不是“用户代理”敏感的。
5.  如果使用“https”协议，请确保证书由设备已知的根权限签署。
6.  使用调试器检查一切是否正常工作（例如`url`is not `nil`，在创建请求时）。
7.  你确定你`Authorization`正确使用了标题吗？价值`Token token="..."`似乎很奇怪。**

# c - 指向链表的动态大小的指针数组

> ID：16132785
> 
> 赞同：0
> 
> 时间：2013-04-21T15:24:44.660
> 
> 标签：c, arrays, pointers, struct

我试图弄清楚如何根据用户输入初始化指向具有动态大小的链表的指针数组。

我有一个结构如下：

```
struct HashTable {
int tableSize;
int (*getKey)(void *);
char *  (*toString)(void *);
void (*freeHashObject)(void *);
Boolean (*compare)(void *, void *);
ListPtr table;
}; 
```

表变量应该包含动态数量的链接列表，具体取决于用户输入。您可以假设 n 是一个有效的整数，并且 createHashObject 按预期工作。

```
HashTablePtr table;
HashObjectPtr job;
table = createHashTable(n, getKey, toString, freeHashObject, compare);

for (i=0; i<n; i++)
{
    job = createHashObject(firstInput);
    HashInsert(table, job);
} 
```

我相信问题在于 createHashTable 如下。

```
HashTablePtr createHashTable(int size, int (*getKey)(void *), 
char * (*toString)(void *), void (*freeHashObject)(void *), 
Boolean (*compare)(void *, void *))
{
HashTablePtr h = (HashTablePtr)malloc(sizeof(HashTable));
//dont worry that i dont do things with the function pointers
h -> table = (ListPtr)malloc(sizeof(List)*size);
int i;
for (i = 0; i < size; i++)
{
    h -> table[i] = createList(getKey, toString, freeHashObject);
}
} 
```

上面的代码似乎没有正确初始化所有的链表。这是 createList 函数和 List 结构的代码。

```
ListPtr createList(int(*getKey)(void *), 
               char * (*toString)(void *),
               void (*freeHashObject)(void *))
{
ListPtr list;
list = (ListPtr) malloc(sizeof(List));
list->size = 0;
list->head = NULL;
list->tail = NULL;
list->getKey = getKey;
list->toString = toString;
list->freeObject = freeHashObject;
return list;
}

struct list {
int size;
NodePtr head;
NodePtr tail;
int (*getKey)(void *);
char *  (*toString)(void *);
void (*freeObject)(void *);
}; 
```

我敢打赌，问题在于我如何定义指向链表的动态大小的指针数组，然后对其进行初始化。谁能给我一些帮助？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:36:56.543

在您的`HashTable`结构中更改`table`定义以将其声明为指针，如下所示

```
struct HashTable {
    ...
    ListPtr *table;
}; 
```

然后，您可以分配您正确完成的任意数量。

# c# - 什么是创建等待函数的正确方法

> ID：16132788
> 
> 赞同：3
> 
> 时间：2013-04-21T15:25:00.967
> 
> 标签：c#, asynchronous, task-parallel-library, async-await

我对如何实际创建适当的等待函数感到两难。我没有完全理解整个概念，可能是由于语言障碍:)

**一个**

```
public async Task<int> InsertASync(string tableName, Dictionary<string, string> data)
    {
        int r = 0;

        using (SQLiteConnection con = NewConnection())
        {
            await con.OpenAsync();
            using (SQLiteCommand com = new SQLiteCommand(Query_Insert(tableName, data), con))
            {
                r = await com.ExecuteNonQueryAsync();
            }
            con.Close();
        }

        return r;
    } 
```

或者

**乙**

```
public Task<int> InsertASync(string tableName, Dictionary<string, string> data)
    {
        return Task<int>.Run(async () =>
            {
                int r = 0;

                using (SQLiteConnection con = NewConnection())
                {
                    await con.OpenAsync();
                    using (SQLiteCommand com = new SQLiteCommand(Query_Insert(tableName, data), con))
                    {
                        r = await com.ExecuteNonQueryAsync();
                    }
                    con.Close();
                }

                return r;
            });
    } 
```

我想知道它的原因是因为我通过廉价方式创建等待方法的方式。

*例子*

```
public void DoHeavyWork() //this will block UI
{
    //Do work
}

public Task DoHeavyWorkASync() //this won't
{
    return Task.Run(() =>
    {
         DoHeavyWork();
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:29:04.967

你想走这`A`条路。编译器将负责创建返回的任务并在可用时返回实际的整数。

您可以阅读[Asynchronous Programming - Pause and Play with ...](http://msdn.microsoft.com/en-us/magazine/hh456403.aspx)以获得有关编译器内部工作的一些很好的深入信息（如何将您的方法转换为状态机）

# mysql - 如何从 php mysql 中的其他类别中获取一个值？

> ID：16132793
> 
> 赞同：0
> 
> 时间：2013-04-21T15:25:44.437
> 
> 标签：mysql, sql

我有一个带有表的样本数据是测试

```
name | catid | date
------------
abc  |   1
def  |   2
ghi  |   1
jkl  |   2
mno  |   1
pqr  |   3 
```

我的查询

```
SELECT * FROM test WHERE catid = 1 AND catid = 2 AND catid = 3 ORDER BY date DESC 
```

如何通过结果获得价值是

```
 name | catid
    ------------
    abc  |   1
    def  |   2
    pqr  |   3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:28:01.913

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  catid, MAX(DATE) max_date
            FROM    tableName
            GROUP   BY catID
        ) b ON  a.catID = b.catID AND
                a.date = b.max_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:30:26.383

```
SELECT name, catid FROM test WHERE catid IN (1, 2, 3) GROUP BY catid 
```

我认为您需要比 catid = X OR catid... 更简单的 IN 运算符（并且您需要 OR，而不是 AND）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:32:30.873

根据您想要的输出，这可能是查询：

```
select catid, min(name)
from yourtable
where catid between 1 and 3
group by catid 
```

但是根据您问题中提供的信息，很难知道您想要什么。

# c++ - 在根窗口的背景中显示彩色 X Window Pixmap

> ID：16132794
> 
> 赞同：1
> 
> 时间：2013-04-21T15:25:59.240
> 
> 标签：c++, linux, gcc, x11

我有一个彩色 X PixMap 文件、GCC 编译器、一个在显示器上工作的 X 服务器和一个非常简单的任务：通过在显示器上运行的 X 服务器，由 C/C++ 程序以彩色显示 XPM 文件。

我用谷歌搜索了很多，我的大脑完全崩溃了。没有关于 XCreatePixmapFromData 的信息。我无法进入 xloadimage 源。但是放置一个 1 位深度的位图是成功的，我想要一个这样简单的彩色像素图解决方案。

Teh pixmap 是普通的，例如，我只是想证明它与 X BitMap 文件（常量字符数组）具有几乎相同的结构，并且可以包含在 C/C++ 程序中... [http： //pastebin.com/b5QTrDTH](http://pastebin.com/b5QTrDTH)

一个绘制彩色像素图的简单代码示例会很棒。

这应该很容易，请帮助！PS对不起，这是我的第一个stackoverflow问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:17:10.030

该函数的名称是`XpmCreatePixmapFromData`。它与其他功能和数据结构一起[在此处进行了描述。](http://www.opennet.ru/docs/formats/xpm.pdf)

基本上，您传递 XPM 数据并取回两件事，一个像素图和一个位图掩码。如果您的像素图是矩形的，您可以忽略遮罩。如果没有，您可以使用它在 GC 中设置掩码。然后你使用`XCopyArea`从返回的像素图复制到窗口。

您可以将 NULL 作为“属性”参数传递。如果不这样做，请确保正确设置了值掩码。

您需要链接到 xpm 库，您可能需要在某处下载该库。它不是 X11 的一部分。

一个例子可以在[这里](http://www.csn.ul.ie/~caolan/pub/xsheep/xsheep/oldsheep.c)找到。

# python - Python动画图

> ID：16132798
> 
> 赞同：8
> 
> 时间：2013-04-21T15:26:40.910
> 
> 标签：python, animation, graph

我有一个项目来创建一些图形动画。我将有一个有向加权图，并且在每一步中，我都会对此进行一些更改。我想用动画做出这些改变。所以，我的问题是：

**是否可以使用python制作动画，如果可以，您将如何制作简单的动画？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T16:14:25.030

Matplotlib 是 python 的标准图形库，它带有一个相当不错的动画包。Jake Vanderplas 在[这里](http://jakevdp.github.io/blog/2012/08/18/matplotlib-animation-tutorial/)有一个很好的使用教程。

取自此链接，如果要为正弦波设置动画，可以使用以下方法：

```
import numpy as np
from matplotlib import pyplot as plt
from matplotlib import animation

# First set up the figure, the axis, and the plot element we want to animate
fig = plt.figure()
ax = plt.axes(xlim=(0, 2), ylim=(-2, 2))
line, = ax.plot([], [], lw=2)

# initialization function: plot the background of each frame
def init():
    line.set_data([], [])
    return line,

# animation function.  This is called sequentially
def animate(i):
    x = np.linspace(0, 2, 1000)
    y = np.sin(2 * np.pi * (x - 0.01 * i))
    line.set_data(x, y)
    return line,

# call the animator.  blit=True means only re-draw the parts that have changed.
anim = animation.FuncAnimation(fig, animate, init_func=init,
           frames=200, interval=20, blit=True)

plt.show() 
```

动画库每间隔调用一次函数“animate”（在本例中指定为 20）。该函数应适当地更新绘图。在这种情况下，它使用 set_data 方法更新“line”，它是正弦波数据的数组。

# jquery - 添加 data-position="fixed" jquerymobile 后的图像质量

> ID：16132799
> 
> 赞同：0
> 
> 时间：2013-04-21T15:26:43.687
> 
> 标签：jquery, mobile

我的页脚是带有 4 个社交媒体图标链接的灰色条带。通常看起来很棒，但是由于将 data-position="fixed" 添加到页脚以确保它始终粘在屏幕底部，因此图像质量会降低。

在这里查看两张图片，顶部是在添加固定代码之前，底部是之后。

添加固定代码后，我尝试添加更大的总部图像，但同样的问题。这对我来说很奇怪吗？

[http://www.magnetikmedia.co.uk/m/images/image_links.png](http://www.magnetikmedia.co.uk/m/images/image_links.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:51:16.570

jQuery Mobile 论坛上一位知识渊博的人解决了这个问题。我有点困惑，没有坚持使用 jQuery Mobile 默认页脚/页眉结构，所以他纠正了我。

# ruby-on-rails-3 - rails 在其他控制器中出现错误后呈现表单

> ID：16132801
> 
> 赞同：2
> 
> 时间：2013-04-21T15:26:56.053
> 
> 标签：ruby-on-rails-3, controller, render

我在以下关系中有两个模型：Client has_many products 和 Product belongs_to client。在客户端显示视图中，我展示了一个用于创建新产品的表单，该新产品自动属于当前客户端。客户端控制器中的 show 方法

```
def show
  @client    = Client.find(params[:id])
  @products  = @client.products.paginate(page: params[:page])
  @product = @client.products.new
  @product.client_id = @client.id
end 
```

并且显示视图呈现部分

```
 <h1>New Product:</h1>
    <%= render 'shared/product_form' %> 
```

这有效，产品被正确创建。

当发生验证错误时，我在产品创建方法中设置了一个 flash 并重定向到客户端显示页面。在那里，我丢失了已正确填写的数据。我尝试保存 @product 实例变量，其中包含所有数据（包括错误的字段）

```
render client_path(client) 
```

来自产品控制器，但这会产生错误

> 缺少模板 /clients/17

地址是

```
http://localhost:3000/products 
```

我说错了吗？我知道渲染通常会渲染同一个控制器的动作。我可以从产品控制器以某种方式呈现 Client::show 吗？是否有另一种方法来保存用户输入的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T15:44:59.837

如果发生验证错误，您应该重定向回产生验证错误的页面。即：如果用户在`products/new`提交表单时正在，那么您的`products#create`操作应该`render :new`以再次呈现产品表单结束。

如果您的`products#create`操作是从 接收表单`clients#show`，那么您确实希望呈现`clients#show`验证错误。在这种情况下，表格中填写的所有信息都将在 中可用`params[:product]`，就像在 中一样`products#create`。

您可能想看看我最近写的[另一个答案](https://stackoverflow.com/questions/16115644/rails-routes-controllers-views-oh-myexclamation/16116009#16116009)，以了解控制器之间的流程。

具体而言，您的案例中的误解如下：

当您遇到验证错误时，记录将不会保存，因此您无法“返回该数据”，因为您的应用程序没有将其保存在任何地方。提交的数据的唯一副本在请求中。

如果您 REDIRECT 您没有转发请求，则您通过向不同的 url 发出新请求来响应初始 POST 请求（其中包括所有表单信息作为 params[:product]）。这就是您要使用 RENDER 的原因。

但是，如果您尝试这样做`render clients_path(client)`，Ruby 将首先评估`clients_path(client)`字符串`clients/(client.id)`，或者在您给出的示例中，`clients/17`.

然后 render 尝试调用`render 'clients/17'`，您没有模板。它正在寻找一个名为`clients/17.html.erb`. 这就是为什么你会得到你得到的错误。

因此，再次总结一下 - 您的`products#create`操作接收从表单发送的信息为`params[:products]`. 该信息在此控制器操作之外不可用。因此，如果出现验证错误，而不是创建产品，此控制器操作应该呈现用户最初（通常）来自的同一页面，`products/new`以便他们可以看到他们刚刚拥有的表单（将信息填回其中如果您使用的是表单生成器），还会看到阻止保存的错误。

我希望这是有道理的，请随时提出后续问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T14:46:56.423

安德鲁的好答案加上这个：
[在模型验证失败时在哪里渲染 Rails 中的评论控制器？](https://stackoverflow.com/questions/5175385/where-to-render-comments-controller-in-rails-on-model-validations-failure)
使解决方案更加清晰。

您的具体示例：请注意您`create`在其中的操作`ProductsController`具有它需要的所有实例变量`render 'clients/show'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T16:35:14.943

是的，你说错了。

存在三个问题：

1.  `render`应该呈现一个模板名称，比如`client/new`，`shared/form`等等。参数不能是路径或变量。变量由控制器传递给视图，与`render`.

2.  您不应将`render`其用于保存失败。即使您使用#1 提到的模板名称，您最终也会得到一个错误的 URL，例如`products/create`客户端页面。这是不可接受的。

    我的建议是始终`redirect`用于保存失败。

3.  小问题。在控制器中，如果您使用过`@product = @client.products.new`，则该`@product`对象的所有属性都将为空，但具有有效的客户端 ID。因此，您无需再次分配客户端 ID `@product.client_id = @client.id`。但这不会影响结果。

# android - Android - 打开跟踪文件时出错：没有这样的文件或目录(2)

> ID：16132807
> 
> 赞同：2
> 
> 时间：2013-04-21T15:27:16.993
> 
> 标签：android

我正在开发一个 android 应用程序，其中一部分是检查手机的 wifi 是否启用。

我直接在手机上运行应用程序。这些是一些错误

```
error opening trace file: No such file or directory (2)
Refusing to reopen boot DEX 'system/framework/hwframework.jar' 
```

这是我的清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.demo.Test_allActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我对 android 很陌生，无法找出解决方案。谢谢是提前

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T15:29:29.187

我猜你需要清单中的[ACCESS_NETWORK_STATE](http://developer.android.com/reference/android/Manifest.permission.html#ACCESS_NETWORK_STATE)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-26T11:00:23.853

需要检查“Manifest.xml”中是否提到了您的主类（MainActivity）文件。

```
<activity
            android:label="@string/app_name"
            android:name="com.androidexample.demo.MainActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
</activity> 
```

# jquery - How to remove scroll bar using overflow CSS HTML (Possible Positioning Conflict)

> ID：16132808
> 
> 赞同：0
> 
> 时间：2013-04-21T15:27:17.510
> 
> 标签：jquery, html, css, conflict

I have tried everything to try and remove this bottom scroll bar but cant seem to figure it out. I'm not sure if it is something to do with the positioning.

The image (banner) is supposed to be 2000px(width) by 400px(height) but I would like it to not effect the page size by adding the scroll bar.

**[LIVE DEMO](http://goo.gl/SsxDy)**

**CSS**

```
#banner {
    margin:0 auto;
    background: #EAEAEA;
    position: relative;
    width:1000px;
    height:400px;
    display:block;
    float:none;
    top:160px;
}
#slideshow { 
    width: 1000px; 
    display:block;
    text-align:center; 
    position:absolute;
    left:-50%;
}
#slideshow > div { 
    position: absolute; 

}
.images {
    overflow-y:visible;
    width:1000px;
    height:400px;   
} 
```

**HTML**

```
<div id="banner">
    <div id="slideshow">
        <div><a class="images" href="#"><img src="AG/images/bulbs.png"></a></div>
        <div><a class="images" href="#"><img src="AG/images/cables.png"></a></div>
    </div>
</div>  <!--END banner --> 
```

Thank you in advance

**UPDATE**

Is there a way to only add overflow to the banner rather than the whole page? For example the same as [**EXAMPLE**](http://www.johnlewis.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:30:32.753

只需添加：

```
body {
    overflow-x: hidden;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T09:25:36.430

您可以在横幅周围包裹另一个 div。

```
<div id="bannerWrapper">
    <div id="banner">
         <!--the rest of your code-->
    </div>
</div> 
```

在 CSS 中：

```
#bannerWrapper{
    width:100%;
    overflow-x:hidden;
} 
```

横幅将在较小的屏幕上显示较少，而在较大的屏幕上显示为全宽。希望它有所帮助

# javascript - Minesweeper game - Maximum call stack side exceeded

> ID：16132809
> 
> 赞同：1
> 
> 时间：2013-04-21T15:27:36.270
> 
> 标签：javascript, recursion, size, stack, max

So I'm making a minesweeper game in JS.

I have this function:

```
function doSquare(x, y) { //takes x,y coordinates of a square. checks and acts accordingly to what's around it
                var revealed = [];
                var size = board.length;
                var mines = countAround(x,y);
                table.rows[x].cells[y].innerHTML = mines;

                if (mines === 0) {
                    for (var i=Math.max(0,x-1), l = Math.min(x+1, size-1); i<=l; i++) {
                        for (var j=Math.max(0, y-1), k = Math.min(y+1, size-1); j<=k; j++) {
                            if (x == i && y==j) {continue;}
                            if (revealed.indexOf(i+"."+j) === -1) {
                                doSquare(i, j);
                                revealed.push(i+"."+j);
                            }
                        }
                    }
                }

            } 
```

The board's rows and cols are equal. `countAround(x,y)` returns the amount of mines around (x,y); `revealed` is an array which stores which squares have already been dealt with, to prevent dealing with them again.
This function is supposed to, when a square is clicked, reveal the number of mines near it and write it into the cell. Then, it checks every square around it, and if that square hasn't already been dealt with (if it isn't in the `revealed` array), the function `doSquare()` runs on it again. The function will not 'spread' from a square if the square has any mines next to it.

I get an error: maximum call stack size exceeded. But the function stops its 'spreading' upon reaching a square with mines, and also doesn't run on a square which already has been taken care of. So I would love an explanation as to why this happens.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:41:11.943

我认为问题在于您的函数内部定义了“显示”。这意味着每次调用该函数时，都会在本地为该函数创建一个新的“显示”。因此，一个周围没有地雷的方格会为相邻方格调用 doSquare，而相邻方格可能又会在原始方格上调用 doSquare。然而，doSquare 不会记住它已经检查过这个方格，因为为这个调用创建了一个新的本地版本的 'revealed'。

解决方案：

要么将“revealed”作为参数传递给 doSquare，因此所有调用都使用相同的变量（即`function doSquare(x, y, revealed){...`，将初始调用设为`doSquare(x, y, []);`，或者在 doSquare 之外声明“revealed”，并在每次您希望检查地雷时将其清空。

# imap - 从 IMAP 获取所有 UID？

> ID：16132810
> 
> 赞同：3
> 
> 时间：2013-04-21T15:27:36.537
> 
> 标签：imap

这是我的 gmail 帐户显示我有 373 封电子邮件的问题。但是，当我使用命令“SELECT INBOX\r\n”查询 IMAP 服务器时，它显示我的收件箱中有大约 968 封电子邮件，而不是 373 封。

因此，当我发送以下命令“UID SEARCH ALL\r\n”返回收件箱中邮件的 UID 时，它总共返回 355 个 UID，而不是 968 个 UID。请问我做错了什么？

获取收件箱中电子邮件数量的正确命令是什么？以及如何获取所有 UID？我一直在寻找一个很好的教程，我得到的那些非常实用。

# java - 制作匿名线程的副本对象

> ID：16132812
> 
> 赞同：0
> 
> 时间：2013-04-21T15:27:59.793
> 
> 标签：java, multithreading, clone

我是多线程新手，

我目前正在将参数传递给线程。

```
public class MyRunnable<T> implements Runnable{

protected T obj;

public MyRunnable(){
    obj= null;
}
@Override
public void run(){
    //do something
}

public void setObj(T obj){
    this.obj=obj;
}

public T getObj(){
    return obj;
}

} 
```

我正在尝试使用指定任务初始化 MyRunnable obj

公众虚空之内奔跑，就是这样。

```
someMethod(new MyRunnable<someType>(){
public void run(){
    // do some jobs 1.
        // do some jobs 2.
}
}); 
```

我想将此可运行对象用于具有不同 obj 值的不同线程，那么是否可以使用相同的运行方法进行深层复制？

提前致谢！

编辑：原来的 MyRunnable().run() 什么都不做，并且任务是在匿名块中实现的，是否可以使用相同的实现 run() 方法制作副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:54:14.983

您可以创建一个返回特定类型的 MyRunnable 的方法：

```
public MyRunnable<SomeType> getRunnableForSomePurpose(){
    return new MyRunnable<SomeType>(){
        public void run(){
            //do some jobs
        }
    }
} 
```

然后在每次需要具有特定运行方法的 MyRunnable 时调用该方法：

```
someMethod(getRunnableForSomePurpose()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:34:45.427

您可以制作一个复制构造函数

```
public MyRunnable(MyRunnable myRunnable) {
    this.fieldA = myRunnable.fieldA;
    this.felddB = myRunnable.fieldB;
    // etc
} 
```

因为您将使用不同的对象（所有其他字段都相同），所以修改构造函数以反映这一点

```
public MyRunnable(T obj, MyRunnable myRunnable) {
    this.obj = obj;
    this.fieldA = myRunnable.fieldA;
    this.felddB = myRUnnable.fieldB;
    // etc
} 
```

# java - 在 Java 中重复一系列行

> ID：16132814
> 
> 赞同：0
> 
> 时间：2013-04-21T15:28:01.997
> 
> 标签：java, repeat

我想不出如何表达我想做的事情，但希望这能解释清楚。

我的朋友正在制作一个基于文本的冒险游戏，而我正在努力将游戏的一部分分离出来以便于管理。

在游戏中，玩家的统计数据、玩家库存和更多信息被发送到另一个班级。

```
 static Char player;
    static battle bat;

    public static void directchoice(Char p, battle b) {
    player = p;
    bat = b;
    String[] rightLeft = {"Left", "Right"};
    int direct = JOptionPane.showOptionDialog(null, "Left or Right?", "Option", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, rightLeft, rightLeft[0]);
    if(direct == 0){
        Maze.makeChoice(player, bat);
    }
    if(direct == 1){
        Maze.DoorChoice(player, bat);   
    }
} 
```

从这里可以看出，在课程的开头，“玩家”和“蝙蝠”是一个角色和一场战斗。这些是从游戏的前一部分导入的。

子程序括号中的“Char p，battle b”，以及“player = p; bat = b;” 子程序内部必须为每个子程序重复。

例如，这是该类中的另一个子例程：

```
 public static void DoorChoice(Char p, battle b) {   
    player = p;
    bat = b;
    String[] others = {"Go through door", "Don't go through"};
int checkers = JOptionPane.showOptionDialog(null, "Go through door or not?", "Option", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, others, others[0]); 
```

还有很多其他的，比如玩家库存、怪物等等，也需要重复。我想要做的是创建一种为每个子例程自动重复这些代码行的方法，而不是必须将它们全部输入或复制和粘贴。

我尝试了我能想到的，但对 java 仍然比较陌生，我不知道该怎么做才能重复这些行。

我希望这是有道理的，如果没有，我很抱歉:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:33:39.217

你想要做的事情叫做`loop`. 有[许多类型的循环](http://www.tutorialspoint.com/java/java_loop_control.htm)。

这是 a 的一般示例`for-loop`：

```
for (int counter; counter<repeatXTimes;counter++){
//This will repeat for as long as counter<repeatXTimes, and counter will increase once per loop.
} 
```

# java - 是否可以使用 SWIG 生成的 JNI 从 C 代码调用 java 方法？

> ID：16132816
> 
> 赞同：1
> 
> 时间：2013-04-21T15:28:20.090
> 
> 标签：java, c, java-native-interface, swig

我正在尝试使用 SWIG 生成我的 JNI。我已经有了可以工作的 JNI 代码，但它是手写的，而且变得越来越复杂且难以维护。

我在 C 中的一些函数是从 Java 调用的，然后它们在 Java 中调用一些方法（可能这不是一个好主意，但它现在可以工作）......

我想知道 SWIG 是否可以生成那种 JNI 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:57:22.403

是的，这应该是可能的。

> swig-1.3.6 及更高版本还支持以下语言：Java JDK 1.1 和更新版本。

引自[http://www.swig.org/compat.html](http://www.swig.org/compat.html)

更多信息在这里：

*   [http://www.swig.org/Doc1.3/Java.html#imclass](http://www.swig.org/Doc1.3/Java.html#imclass)
*   [http://www.swig.org/Doc1.3/SWIGPlus.html#SWIGPlus](http://www.swig.org/Doc1.3/SWIGPlus.html#SWIGPlus)

**更新**：有关从 C++ 调用 Java 的更多信息，请查看：[http ://www.swig.org/Doc1.3/Java.html#java_directors](http://www.swig.org/Doc1.3/Java.html#java_directors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:04:36.853

我知道的这种类型的唯一 JNI 包装器是[Jace](http://code.google.com/p/jace/)和[JunC++ion](http://codemesh.com/products/junction/)，它们都是基于 C++ 的，因此不符合您的需求。

# database - 哪个是最好的选择，三元关系还是二元关系？

> ID：16132817
> 
> 赞同：1
> 
> 时间：2013-04-21T15:28:22.093
> 
> 标签：database, database-design

我简单的例子可以是这样。我有电影桌，电影有导演和演员。在我的数据库中，一部电影可以有一个或多个导演和一个或多个演员。我还有一个表格 Persons ，其中包含人员的信息。所以一个人可以在电影中扮演不同的角色，我有另一个表，它有可能的角色，表角色。

在许多情况下，我会对了解电影的导演或演员感兴趣，因此我可以通过两种主要方式来分配表格。

第一种选择：三元关系：

```
Movies(IDMovie, ...)
Persons(IDPerson, ...)
Roles(IDRol,...)
MoviesPersons(IDMovie, IDPerson, IDRol...) 
```

在这种情况下，我使用三元关系。

第二个选项是：

```
MoviesDirectors(IDMovie, IDPerson,...)
MoviesActors(IDMovie, IDPerson,...) 
```

在这种情况下，我可以从关系表中推断出角色。

哪个是最好的选择？

谢谢。

编辑：如果我使用两个二元关系的选项，如果将来，如果我想要配乐的作曲家，我需要创建一个新的表和关系，但是，使用三元关系我不需要什么都不做，只在角色表中添加一个新角色和其他任何东西。

在性能上两个二元关系比一个三元关系更好？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:30:55.093

> 哪个是最好的选择？

您几乎回答了您自己的问题 - 如果您希望在不改变数据库结构的情况下灵活地在未来添加新角色，那么三元关系就是您的最佳选择。

如果它们中的每一个都需要具有不同的字段或约束（根据您的描述，情况似乎并非如此），我会考虑单独的二元关系。

> 在性能上两个二元关系比一个三元关系更好？

由于表示三元关系的表需要物理存储角色标识符（与从表名本身推断角色的二元关系相反），因此您的缓存使用率会*稍差*。

但是，通过对复合 PK 中的字段进行仔细排序，可以使三元关系更适合某些类型的查询。例如，PK:`{IDMovie, IDRol, IDPerson}`可以有效地支持以下查询：

*   哪些人在给定的电影上工作过？^(（X）)
*   哪些人在给定的电影中以给定的角色工作过？

如果您在: 上创建索引`{IDPerson, IDRol, IDMovie}`，您还可以有效地查询：

*   给定的人参与过哪些电影？^(（X）)
*   给定的人在给定的角色中工作过哪些电影？

* * *

*^((X))对于单独的二元关系，您需要查询每个联结表。这当然不是只有两张表的问题，但是随着表的数量增加（当然从维护甚至从性能角度来看），它可以变成一张。*

# sqlite - Windows 8: How do I implement code reuse of SQLite operations outside of client executable

> ID：16132820
> 
> 赞同：0
> 
> 时间：2013-04-21T15:28:36.183
> 
> 标签：sqlite, microsoft-metro, windows-store-apps

Windows 8 store apps do not allow other projects within one's solution to perform CRUD operations even though these projects can have the proper reference to the SQLite DLL that's required.

As a result of my finding, I am duplicating my Data Access Layer code in all my Windows Store apps. Thus, development time is increasing dramatically as a result of updating all my apps each time I need to account for recently added tables for the multi app solution that I am building.

NOTE: I heard that implementing SkyDrive integration is an alternative approach that may solve this issue. However, I made the decision early on to implement sync operations with SQLite and cannot afford to swap out data access layers at this stage of development.

Any suggestions?

Thanks, Scott Nimrod

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:31:43.220

您可以将通用数据访问代码放在 Windows 应用商店类库 (dll) 项目中。然后，您的每个应用程序都可以重用此 dll。

请注意，您的共享 dll 项目不需要对 Sqlite3 二进制 dll（sqlite3 Visual Studio 扩展）的引用。它应该只引用 sqlite api（例如 Sqlite-net）。对于您的主应用程序，应该颠倒引用 - 它应该引用扩展，而不是 api。

# open-source - 在开源项目中包含 Highcharts

> ID：16132822
> 
> 赞同：7
> 
> 时间：2013-04-21T15:28:54.593
> 
> 标签：open-source, licensing, highcharts

我想将[Highcharts](http://www.highcharts.com/)库包含在开源项目[scala-notebook](https://github.com/OlegIlyenko/scala-notebook)中，但我不确定是否允许根据[Highcharts license](http://creativecommons.org/licenses/by-nc/3.0/)。

**scala-notebook**是一个 web-repl (read-eval-print-loop) 或 web-console (类似于**IPython** )。可以创建新的笔记本并在那里编写将在服务器端执行的代码，结果将呈现在页面上（在输出部分中）。我想让用户能够在代码中定义图表数据，然后使用 Highcharts 库将其呈现为图表。它是根据[修改后的 BSD 许可证（也称为新的或修订的 BSD）](https://github.com/OlegIlyenko/scala-notebook/blob/master/COPYING)分发的。

所以我的问题是：

*   我可以在项目发行版中添加 Highcharts 库吗？
*   如果是，那么我应该包括什么才能在我的项目中正确引用 Highcharts 许可信息（例如，我可以将其添加到页面的帮助部分和/或将许可证添加到项目文件树的根目录，等等。 )?

我的项目是开源的，所以我可以想象，有人会下载它并在他/她的公司内部部署它。我还想确保这个用例是允许的（根据许可证）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:37:51.743

如果您将其用于非商业用途，那么您可以根据 CC BY-NC 使用它。

据我所知，您应该被允许（因为它没有类似共享条款）在您喜欢的任何许可下重新分发；这在道德上是否合理是另一个问题。

请注意，知识共享许可并非针对软件，因此在链接、与其他许可组合等方面的水域有点模糊。

最好向 Highchart 的人员询问您的问题（或者甚至向他们发送此 Stack Overflow 问题的链接）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-10T06:37:35.840

您可以将它与一些开源项目一起使用，但是您不能将它与自由软件一起使用。

不幸的是，将 Highcharts 与 GPL 代码一起使用是违反版权的，因为商业限制违反了 GPL。

不幸的是，这是一个问题，因为即使是 Highcharts 网站也可能违反 GPL，将 Highcharts 包含在 Joomla 代码中，尽管有一种论点认为，只要 Highchart 不从其网站分发代码，它就可能是明确的。

在 AGPL 网站上使用 Highcharts 没有任何想象的方法。

这里解释了结合“非商业”和 GPL 代码的问题。

[https://softwareengineering.stackexchange.com/questions/214904/is-free-for-non-commercial-use-license-compatible-with-gnu-gplv3-license](https://softwareengineering.stackexchange.com/questions/214904/is-free-for-non-commercial-use-license-compatible-with-gnu-gplv3-license)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T15:30:27.937

目前Highcharts 提供“允许您在软件或硬件产品中分发 Highcharts”[的 OEM 许可证，也许在（并且因为？）这个问题出现之后添加了这个。](http://shop.highsoft.com/highcharts.html)[OEM 许可协议](http://shop.highsoft.com/media/highsoft/Highsoft-OEM-License-Agreement-2.1.pdf)将为您提供有关如何使用它的信息。

无论如何，我认为该产品的任何其他许可证都不会允许您这样做。

# php - MySQLi 行数不起作用

> ID：16132827
> 
> 赞同：0
> 
> 时间：2013-04-21T15:29:03.907
> 
> 标签：php, mysql, oop, mysqli

我有一个简单的登录系统，但在尝试获取行数时却一无所获，以前一直使用的方法相同，我不知道今天发生了什么。

代码：

```
<?php
class LoginClass {
    public $User;
    public $Pass;
    public $Query;
    function Init() {
        $User = $this->User;
        $Pass = $this->Pass;
        if($User != '')
        {
            if($Pass != '')
            {
                $this->HashPass();
            }
            else
            {
                echo 'Please Enter A Password.';
            }
        }
        else
        {
            echo 'Please Enter A Username or E-Mail.';
        }
    }

    function HashPass() {
        $Pass = $this->Pass;
        $this->Pass = hash('sha256', $Pass);
        $this->CheckUser();
    }

    function CheckUser() {
        $User = $this->User;
        if(!filter_var($User, FILTER_VALIDATE_EMAIL))
        {
            $this->Query = 'SELECT * FROM Users WHERE User = "'.$User.'" AND Pass = "'.$this->Pass.'"';
        }
        else
        {
            $this->Query = 'SELECT * FROM Users WHERE EMail = "'.$User.'" AND Pass = "'.$this->Pass.'"';
        }
        $this->CheckDB();
    }

    function CheckDB() {
        $Query = $this->Query;
        $Connect = new mysqli("127.0.0.1", "root", "", "Data");
        $Stmt = $Connect->prepare($Query)
        $Stmt->execute();
        $Stmt->store_result();
        echo $Stmt->num_rows;
        $Stmt->close();
        $Connect->close();
    }

    function SetupSession() {
        echo 'Test';
    }
} 
```

Check DB 是这里的问题，我能够在该函数中回显查询变量一切都很好，这正是我得到的

SELECT * FROM Users WHERE User = "Test" AND Pass = "532eaabd9574880dbf76b9b8cc00832c20a6ec113d682299550d7a6e0f345e25"

我还检查了我的数据库，我所有的表都设置正确并且没有密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:35:05.237

好的，需要比评论区更多的空间，问题显然在这个块中：

```
function CheckDB() {
    $Query = $this->Query;
    $Connect = new mysqli("127.0.0.1", "root", "", "Data");
    $Stmt = $Connect->prepare($Query)
    $Stmt->execute();
    $Stmt->store_result();
    echo $Stmt->num_rows;
    $Stmt->close();
    $Connect->close();
} 
```

我认为这是因为您没有将参数绑定到准备好的语句，您已经将它们内联包含在之前的语句中。因此，您可能想要：

**切换到非准备好的语句**

这里最简单的选择是切换到未准备好的语句。将您的块替换为：

```
function CheckDB() {
    $Query = $this->Query;
    $Connect = new mysqli("127.0.0.1", "root", "", "Data");
    $Stmt = $Connect->query($Query)
    echo $Stmt->num_rows;
    $Stmt->close();
    $Connect->close();
} 
```

使用这种方法要注意一点：您需要在定义的块中清理您的用户输入`$User`，否则您会让自己对 mysql 注入开放。在该块中，更改此行：

```
$User = $this->User; 
```

到以下：

```
$User = mysql_real_escape_string($this->User); 
```

# phpmyadmin - linux mint 中 PhpMyAdmin 的配置文件

> ID：16132829
> 
> 赞同：0
> 
> 时间：2013-04-21T15:29:21.173
> 
> 标签：phpmyadmin

我想在 linux mint 14 中不使用密码连接到 PhpMyAdmin。

当我搜索它时，我发现我必须`$cfg['Servers'][$i]['AllowNoPassword'] : FALSE`在配置文件中更改它，但我不知道在哪里可以找到这个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T11:51:19.803

Linux Mint 16：文件系统->etc->phpmyadmin：config.inc.php

我也完全是菜鸟，只是找到了文件:) 小心，更改是永久性的。

# linux - 尝试在 unix 服务器上安装 headless Dropbox 时出错

> ID：16132832
> 
> 赞同：4
> 
> 时间：2013-04-21T15:29:25.690
> 
> 标签：linux, unix, ubuntu, dropbox, headless

尝试在 unix 无头环境中安装 Dropbox 时出现以下错误

*.dropbox-dist/dropbox：语法错误：单词意外（期望“）”）*

说明如下：[http ://www.dropboxwiki.com/Text_Based_Linux_Install#Step-by-step_version](http://www.dropboxwiki.com/Text_Based_Linux_Install#Step-by-step_version)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:29:25.690

当您尝试在 32 位 unix 服务器上安装 64 位 Dropbox 版本时，会发生此错误。仔细检查您是否为您的服务器架构获取了正确的 Dropbox 版本

# jquery - 更新列表时，iScroll 跳转到列表顶部

> ID：16132837
> 
> 赞同：0
> 
> 时间：2013-04-21T15:29:46.630
> 
> 标签：jquery, json, iscroll

我正在使用 JSON 和 iScroll 制作一个动态列表，并且效果很好。问题是我的列表每 20 秒更新一次，每次更新列表时它都会跳到列表的顶部。我如何通过这个？

这是我的脚本：

```
var myScroll;

hoverClassRegEx = new RegExp('(^|\\s)iScrollHover(\\s|$)'),
removeClass = function () {
    if (this.hoverTarget) {
        clearTimeout(this.hoverTimeout);
        this.hoverTarget.className = this.hoverTarget.className.replace(hoverClassRegEx, '');
        this.target = null;
    }
};  

$(document).on('pageshow', function (){
    var userid=1,

    dataUrl = 'http://mypage.com/playermenu.php?callback=?&userid=' + userid,
    dataCallback = function (data) {
        var content = [];
        //var profile = [];
        $.each(data, function (i, val) {
            content.push(val.list); // GETTING ALL THE GAMES //
            $('#userbar').html(val.profile); // FETCHING USERS DATA FOR PROFILEBAR //
        });
        $('#games').html(content.join('')).listview('refresh');
    },
    fetchData = function () {
        //myScroll = new iScroll('wrapper');
        //myScroll = new iScroll('wrapper', { checkDOMChanges: true, hScrollbar: false, vScrollbar: false });
        myScroll = new iScroll('wrapper', { checkDOMChanges: true, hScrollbar: false, vScrollbar: false, 
            onBeforeScrollStart: function (e) {
                var target = e.target;

                clearTimeout(this.hoverTimeout);

                while (target.nodeType != 1) target = target.parentNode;

                this.hoverTimeout = setTimeout(function () {
                    if (!hoverClassRegEx.test(target.className)) target.className = target.className ? target.className + ' iScrollHover' : 'iScrollHover';
                }, 80);

                this.hoverTarget = target;

                e.preventDefault();
            },
            onScrollMove: removeClass,
            onBeforeScrollEnd: removeClass
        });
        if (myScroll.isReady()){
            $.getJSON(dataUrl, dataCallback);
        }
    };
    fetchData();
    setInterval(fetchData, 20000);

    document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
    document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200);  }, false);

}); 
```

希望提前帮助和感谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:49:57.393

这被称为“橡皮筋效应”，可以通过使用 myScroll.refresh() 来解决

查看更新的小提琴

> [http://jsfiddle.net/VmQeE/10/](http://jsfiddle.net/VmQeE/10/)
> 
> myScroll = new iScroll('wrapper', { myScroll.refresh(),checkDOMChanges: true, hScrollbar: false, vScrollbar: false, onBeforeScrollStart: function (e) { var target = e.target;
> 
> ```
>  clearTimeout(this.hoverTimeout);
> 
>           while (target.nodeType != 1) target = target.parentNode;
> 
>           this.hoverTimeout = setTimeout(function () {
>               if (!hoverClassRegEx.test(target.className)) target.className = target.className ? target.className + ' iScrollHover' : 
> ```
> 
> 'iScrollHover'; }, 80);

# c# - 在单独的窗口中显示选定的抽认卡

> ID：16132843
> 
> 赞同：0
> 
> 时间：2013-04-21T15:30:30.680
> 
> 标签：c#

我需要找到一种将字符串选择的抽认卡调用到新表单的方法，但我不知道如何传递它，因为我要做的是在单独的窗口中将单个抽认卡显示到表单中的标签中，代码在下面谢谢。

```
public void FlashcardDisplaylistbox_DoubleClick(object sender, MouseEventArgs e)
{
    int index = this.FlashcardDisplaylistbox.IndexFromPoint(e.Location);
    if (index != System.Windows.Forms.ListBox.NoMatches)
    {
        // when an item in listbox is double clicked it will execute this bit of code below
        String selectedflashcard = FlashcardDisplaylistbox.SelectedItem.ToString();
        MessageBox.Show(selectedflashcard);
        MessageBox.Show(FlashcardDisplaylistbox.SelectedIndex.ToString());
        int FlashcardID = (int)Flashcards.Rows[FlashcardDisplaylistbox.SelectedIndex][0];  // this section identifies the  position of category the user clicks and converts it to a an integer
        // the flashcardID will possibly be a way to remove the desired flashcard from the database
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:38:50.727

如果我理解正确（并且您使用的是 Windows 窗体），则需要将参数传递给不同的窗体，以便将其显示在标签中。

在这种情况下，[这个问题](https://stackoverflow.com/questions/4701734/passing-parameters-back-and-forth-between-forms-in-c-sharp)的答案应该对您有所帮助。

# c++ - 应该如何构建基本的类层次结构？

> ID：16132844
> 
> 赞同：9
> 
> 时间：2013-04-21T15:30:31.587
> 
> 标签：c++, python, class, inheritance, class-hierarchy

我知道如何编码和使用简单的类，我什至知道继承是如何工作的以及如何使用它。但是，关于如何实际**设计**类层次结构，甚至如何设计简单类的指南数量非常有限？另外，我何时以及为什么应该继承（或使用）一个类？

所以我不是真的问**如何**，我问的是**何时**以及**为什么**。示例代码始终是学习的好方法，因此我将不胜感激。另外，强调设计的进展，而不是简单地给出一个何时和为什么的一句话。

我主要使用 C++、C# 和 Python 进行编程，但我可能会理解大多数语言的简单示例。

如果任何术语似乎混淆了，请随时编辑我的问题。我不是本地人，我不确定所有的单词。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T18:17:03.507

我将使用 C++ 作为示例语言，因为它非常依赖继承和类。这是一个关于如何为简单的操作系统（例如 windows）构建控件的简单指南。控件包括窗口上的简单对象，例如按钮、滑块、文本框等。

* * *

**建立基础班。**

本指南的这一部分适用于（几乎）任何课程。请记住，精心策划是成功的一半。我们在上什么样的课？它有哪些属性，需要哪些方法？这些是我们需要思考的主要问题。

我们在这里处理操作系统控件，所以让我们从一个简单的类开始，它应该是`Button`. 现在，我们按钮的属性是什么？显然它需要一个`position`在窗口上。此外，我们不希望每个按钮都具有完全相同的大小，`size`其他属性也是如此。按钮也“需要” a `label`（按钮上绘制的文本）。这就是你对每个类所做的事情，你设计它然后编码它。现在我知道我需要哪些属性，所以让我们构建这个类。

```
class Button
{
    private:
        Point m_position;
        Size m_size;
        std::string m_label;
} 
```

请注意，为了缩短代码，我省略了所有 getter 和 setter 以及其他方法，但您也必须包含这些方法。我也希望我们有`Point`课程`Size`，通常我们必须自己构建它们。

* * *

**进入下一堂课。**

现在我们已经`Button`完成了一节课 ( )，我们可以转到下一节课了。让我们一起去吧`Slider`，例如帮助您上下滚动网页的栏。

让我们像按钮一样开始，我们的滑块类需要什么？`position`它在窗口和`size`滑块上有位置 ( )。此外，它有最小值和最大值（最小值意味着滚动条设置在滑块的顶部，最大值意味着它在底部）。我们还需要当前值，即当前滚动条所在的位置。现在这已经足够了，我们可以构建我们的类：

```
class Slider
{
    private:
        Point m_position;
        Size m_size;
        int m_minValue;
        int m_maxValue;
        int m_currentValue;
} 
```

* * *

**创建一个基类。**

现在我们有了两个类，我们注意到的第一件事是我们刚刚定义了两个类`Point m_position;`的`Size m_size;`属性。这意味着我们有两个具有共同元素的类，并且我们只编写了两次相同的代码，如果我们可以只编写一次代码并告诉我们的两个类使用该代码而不是重写，那不是很棒吗？好吧，我们可以。

如果我们有两个具有共同属性的相似类，则建议创建一个基类“总是”（有例外，但初学者不必担心），在这种情况下`Button`和`Slider`. 它们都是我们操作系统上的控件，带有`size`和`position`。从这里我们得到一个新的类，叫做`Control`：

```
class Control
{
    private:
        Point m_position;
        Size m_size;
} 
```

* * *

**从公共基类继承类似的类。**

现在我们得到了`Control`包含每个控件的公共项的类，我们可以告诉我们`Button`并`Slider`从它继承。这将节省我们的时间、计算机的内存并最终节省时间。这是我们的新课程：

```
class Control
{
    private:
        Point m_position;
        Size m_size;
}

class Button : public Control
{
    private:
        std::string m_label
}

class Slider : public Control
{
    private:
        int m_minValue;
        int m_maxValue;
        int m_currentValue;
} 
```

现在有人可能会说，写`Point m_position; Size m_size;`两次比写两次`: public Control`和创建`Control`类要容易得多。在某些情况下可能是这样，但仍然建议不要两次编写相同的代码，尤其是在创建类时。

此外，谁知道我们最终会找到多少共同属性。稍后我们可能会意识到我们需要类`Control* m_parent`的成员`Control`，它指向我们控制所在的窗口（或面板等）。

另一件事是，如果我们后来意识到，`Slider`我们`Button`还需要`TextBox`，我们可以创建一个文本框控件`class TextBox : public Control { ... }`，只写文本框特定的成员变量，而不是在每个类上一遍又一遍地写大小、位置和父级.

* * *

**最后的想法。**

基本上总是当你有两个具有共同属性或方法的类时，你应该创建一个基类。这是基本规则，但您可以使用自己的大脑，因为可能会有一些例外。

我自己也不是专业的编码员，但我正在学习，我已经教给你一切，就像我的教育工作者教给我的一样。我希望你（或至少某人）会发现这个答案很有用。尽管有人说 python 和其他鸭子类型语言甚至不需要使用继承，但他们错了。使用继承将为您在大型项目上节省大量时间和金钱，最终您会感谢自己创建了基类。您的项目的可重用性和管理将变得容易十亿倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:06:39.287

我将从[维基百科](http://en.wikipedia.org/wiki/Class_%28computer_science%29)的类定义开始：

> 在面向对象的编程中，类是用于创建自身实例的构造——称为类实例、类对象、实例对象或简称为对象。一个类定义了使它的实例具有状态和行为的组成成员。数据字段成员（成员变量或实例变量）使类实例能够保持状态。其他类型的成员，尤其是方法，使类实例的行为成为可能。类定义其实例的类型

您经常会看到使用狗、动物、猫等的示例。但是，让我们来点实际的东西。

当您需要一个类时，第一个也是最直接的情况是您需要（或者更确切地说应该）将某些函数和方法封装在一起，因为它们在一起才有意义。让我们想象一些简单的事情：HTTP 请求。

创建 HTTP 请求时需要什么？服务器，端口，协议，标头，URI ...您可以将所有这些都放入 dict 中，`{'server': 'google.com'}`但是当您为此使用 class 时，您只需明确说明您需要将这些属性放在一起，并且您将使用它们来做这是一项特殊的任务。

对于方法。您可以再次创建 method `fetch(dict_of_settings)`，但整个功能都绑定到 的属性，`HTTP class`没有它们就没有意义。

```
class HTTP:
    def __init__(self):
        self.server = ...
        self.port = ...
        ...

    def fetch(self):
        connect to self.server on port self.port
        ...

r1 = HTTP(...)
r2 = HTTP(...)
r1.port = ...
data = r1.fetch() 
```

它不是很好读吗？

* * *

### [抽象类/接口](https://stackoverflow.com/questions/372042/difference-between-abstract-class-and-interface-in-python)

这一点，很快......假设您想在您的项目中针对这种特殊情况实现[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)：您希望您的应用程序独立于数据库引擎。

因此，您提出了接口（由抽象类表示），每个数据库连接器都应实现该接口，然后依赖应用程序中的通用方法。假设您使用`DatabaseConnectorAbstract`方法定义（您不必在 python 中实际定义，但在提出接口时您可以在 C++/C# 中定义）：

```
class DatabaseConnectorAbstract:
    def connect(): raise NotImplementedError(  )
    def fetch_articles_list(): raise NotImplementedError(  )
    ...

# And build mysql implementation
class DatabaseConnectorMysql(DatabaseConnectorAbstract):
   ...

# And finally use it in your application
class Application:
    def __init__(self,database_connector):
        if not isinstanceof(database_connector, DatabaseConnectorAbstract):
            raise TypeError()

        # And now you can rely that database_connector either implements all
        # required methods or raises not implemented exception 
```

* * *

### 类层次结构

[Python 异常](http://docs.python.org/3.2/library/exceptions.html#exception-hierarchy)。看看那里的层次结构。

`ArithmeticError` **是**通用`Exception`的，在某些情况下它可以像说一样特别`FloatingPointError`。这在处理异常时非常有用。

当添加到表单时对象必须是实例时，您可以在[.NET 表单](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)上更好地实现这一点`Control`，但实际上可以是其他任何东西。重点是对象`DataGridView`仍然存在`Control`（并实现所有方法和属性）。这与抽象类和接口密切相关，许多现实生活中的示例之一可能是 HTML 元素：

```
class HtmlElement: pass # Provides basic escaping
class HtmlInput(HtmlElement): pass # Adds handling for values and types
class HtmlSelect(HtmlInput): pass # Select is input with multiple options
class HtmlContainer(HtmlElement): pass # div,p... can contain unlimited number of HtmlElements
class HtmlForm(HtmlContainer): pass # Handles action, method, onsubmit 
```

我试图让它尽可能简短，所以请随时在评论中提问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T19:59:21.110

由于您主要对全局感兴趣，而不是类设计的机制，因此您可能希望熟悉面向对象设计的**[SOLID原则。](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)**这不是一个严格的程序，而是一套或规则来支持你自己的判断和品味。

1.  本质是一个类代表一个**单一**的责任（S）。它只做一件事并且做得很好。它应该代表一种**抽象**，最好是代表应用程序逻辑的一部分（**封装**行为和数据以支持该行为）。它也可以是多个相关数据字段的聚合抽象。类是这种封装的单元，负责维护抽象的**不变量**。

2.  构建类的方式是**对扩展开放**和**对修改关闭**（O）。确定类的依赖项（您在其接口和实现中使用的类型或常量）中可能发生的变化。您希望**接口**足够完整，以便可以扩展，但您希望它的**实现**足够健壮，这样就不必为此进行更改。

    这是关于类作为基本构建块的两个原则。现在开始构建代表类关系的层次结构。

3.  层次结构是通过**继承**或**组合**构建的。这里的关键原则是您只使用继承来模拟严格**的 Liskov-substitutability** (L)。这是一种奇特的说法，即您只对**is-a**关系使用继承。对于其他任何事情（除非有一些技术例外以获得一些小的实现优势），您都可以使用组合。这将使您的系统尽可能**松散耦合**。

4.  在某些时候，许多不同的客户可能出于不同的原因依赖于您的课程。这将扩大您的类层次结构，并且层次结构中较低的一些类可能会变得过大（**“胖”**）接口。当这种情况发生时（在实践中，这是一个品味和判断的问题），您将**通用**类接口分离为许多特定于客户端的接口（I）。

5.  随着您的层次结构进一步增长，当您绘制它时，它可能看起来形成了一个金字塔，上面是基本类，下面是它们的子类或组合。这将意味着您的更高级别的应用程序层将**依赖于较低级别的细节**。您可以通过让高层和低层都依赖于抽象（即接口，在 C++ 中，例如可以实现为**抽象类**或**模板参数**）。这种依赖倒置（D）再次有助于放松应用程序各个部分之间的耦合。

就是这样：[五个可靠的建议](http://www.objectmentor.com/resources/articles/Principles_and_Patterns.pdf)或多或少独立于语言并且经受住了时间的考验。软件设计很难，这些规则是为了让你远离最常发生的麻烦，其他的一切都是通过实践来实现的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T15:57:29.777

这取决于语言。

例如，在 Python 中，您通常不需要大量继承，因为您可以将任何对象传递给任何函数，并且如果对象实现了正确的方法，一切都会好起来的。

```
class Dog:
    def __init__(self, name):
        self.name = name

    def sing(self):
        return self.name + " barks"

class Cat:
    def __init__(self, name):
        self.name = name

    def sing(self):
        return self.name + " meows" 
```

在上面的代码中`Dog`和`Cat`是不相关的类，但是您可以将其中任一的实例传递给使用`name`和调用方法的函数`sing`。

相反，在 C++ 中，您将被迫添加一个基类（例如`Animal`）并将这两个类声明为派生类。

当然，继承在 Python 中也得到了实现和有用，但在许多情况下，比如 C++ 或 Java，你可以避免它，这要归功于“鸭子类型”。

但是，例如，如果您想继承某些方法的实现（在本例中为构造函数），那么继承也可以与 Python 一起使用

```
class Animal:
    def __init__(self, name):
        self.name = name

class Dog(Animal):
    def sing(self):
        return self.name + " barks"

class Cat(Animal):
    def sing(self):
        return self.name + " meows" 
```

继承的阴暗面是您的类将更加耦合，并且在您现在无法预见的其他上下文中更难重用。

有人说，在面向对象编程（实际上是面向类编程）中，有时你只需要一根香蕉，而你却得到一只拿着香蕉的大猩猩和整个丛林。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T15:42:33.767

当有两个类包含单个类的属性时，或者当有两个类，其中一个依赖于另一个时，您需要使用继承。例如）

```
class animal:
    #something
class dog(animal):
    #something
class cat(animal):
    #something 
```

这里有两个类，狗和猫，它们具有类的属性`animal`。在这里，继承发挥了它的作用。

```
class parent:
    #something
class child(parent):
    #something 
```

这里，parent 和 child 是两个类，其中 child 依赖于 parent，其中 child 具有 parent 的属性和自己独特的属性。所以，这里使用继承。

# git - 远程分支上的特定提交推送

> ID：16132846
> 
> 赞同：0
> 
> 时间：2013-04-21T15:30:36.960
> 
> 标签：git, github

我在本地和远程都有一个主分支。我在 master 分支上做了一些提交，并将它们推送到远程。现在，我在远程创建了一个新分支 x 并希望将唯一的最新提交推送到该分支，而不是我已推送到远程 master 的所有提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:42:02.117

你到底是什么意思？您是否尝试将本地提交推送到远程分支“x”而不是远程主分支？为此，我相信它是：

```
git push remote x 
```

或者如果具有提交的本地分支具有不同的名称：

```
git push remote src_branch:dest_branch 
```

但是，如果您可以更详细地解释问题会有所帮助，那么您要尝试做什么还不是很清楚。

# c# - 如何使用 Get Set

> ID：16132853
> 
> 赞同：0
> 
> 时间：2013-04-21T15:32:01.467
> 
> 标签：c#

```
class item_Electronic
{

    string eID;
    public string ID
    {
        get { return eID; }
        set { eID = value; }
    }

    string eType;
    public string Type
    {
        get { return eType; }
        set { eType = value; }
    }

    string eManufacturer;
    public string Manufacturer
    {
        get { return eManufacturer; }
        set { eManufacturer = value; }
    }

    string eMake;
    public string Make
    {
        get { return eMake; }
        set { eMake = value; }
    }

    string eModelNo;
    public string ModelNo
    {
        get { return eModelNo; }
        set { eModelNo = value; }
    }

    int ePrice;
    public int Price
    {
        get { return ePrice; }
        set { ePrice = value; }
    }

    int eQuantity;
    public int Quantity
    {
        get { return eQuantity; }
        set { eQuantity = value; }
    }

    //customized Constructor which will enable itx connection to database
    public item_Electronic()
    {
        connectDB();
    }

    //Properties supporting Methods of Object
    OleDbConnection myConn;
    OleDbCommand myComm;
    string queryString;

    public void connectDB()
    {
        myConn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\rummykhan\MCS\Spring 2013\Object Oriented Programming\My Apps\MyProject\c Projects\My Class Project\Projects Database\IMSDatabase.accdb");
    }

    public void insert(item_Electronic product)
    {
        try
        {
            queryString = "Insert INTO Electronics (eID,eType,eManufacturer,eMake,eModelNo,ePrice,eQuantity) Values('" + product.ID + "','" + product.Type
                + "','" + product.Manufacturer + "','" + product.Make + "','" + product.ModelNo + "','" + product.Price
                + "','" + product.Quantity + "')";
            myComm = new OleDbCommand(queryString, myConn);
            myConn.Open();
            myComm.ExecuteNonQuery();
            MessageBox.Show("Test");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            if (myConn!=null)
            {
                myConn.Close();

            }
        }

    }
} 
```

我正在处理应用程序，并且我在课堂上封装了我的每个领域，我想知道这是否是一个好习惯。提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:49:02.523

我会重写您上面的代码片段，如下所示：

```
//underscore is not C# convention for class name
public class ItemElectronic 
{
    //Auto properties simplifies usage and create backing field behind the scene
    public String Id { get; set; }
    public String Type { get; set; }
    public String Manufacturer { get; set; }
    public String Make { get; set; }
    public String ModelNo { get; set; }
    public int Price { get; set; }
    public int Quantity { get; set; }

    public ItemElectronic()
    {
       //It's not appropiate to call DB connection in constructor as it could result in exception
       //connectDB(); 
    }

}

// Create another class to provide DataAccess to your entity class 
public class ItemElectronicDataAccess
{
    OleDbConnection _connection;
    OleDbCommand _command;
    string queryString;

    public void ConnectDb()
    {
        _connection = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\rummykhan\MCS\Spring 2013\Object Oriented Programming\My Apps\MyProject\c Projects\My Class Project\Projects Database\IMSDatabase.accdb");
    }

    public void Insert(ItemElectronic product)
    {
        try
        {
            queryString = "Insert INTO Electronics (eID,eType,eManufacturer,eMake,eModelNo,ePrice,eQuantity) Values('" + product.Id + "','" + product.Type
                + "','" + product.Manufacturer + "','" + product.Make + "','" + product.ModelNo + "','" + product.Price
                + "','" + product.Quantity + "')";
            _command = new OleDbCommand(queryString, _connection);
            _connection.Open();
            _command.ExecuteNonQuery();
            _connection.Close();
            MessageBox.Show("Test");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            if (_connection != null)
            {
                _connection.Dispose();
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:44:06.223

我建议您使用自动属性，

采用：

```
public int MyProperty { get; set; } 
```

代替：

```
int _MyProperty;
public int MyProperty 
{
    get { return _MyProperty; }
    set { _MyProperty = value; }
} 
```

# r - 图例的位置

> ID：16132854
> 
> 赞同：0
> 
> 时间：2013-04-21T15:32:06.673
> 
> 标签：r, position, legend

我想编写一个带有原始数据回归图形输出的函数和一个用于修改数据的函数。原始数据回归应该是一种选择。此外，图表中应该有图例。这是我的问题：如果我选择选项：orig.plot=FALSE，一切正常。但是当我选择另一个选项时：orig.plot=TRUE，我的图例的位置不是很令人满意。

```
# Generation of the data set

set.seed(444)

nr.outlier<- 10

x<-seq(0,60,length=150);
y<-rnorm(150,0,10);
yy<-x+y;
d<-cbind(x,yy)

# Manipulation of data:
ss1<-sample(1:nr.outlier,1) # sample size 1
sri1<-sample(c(1:round(0.2*length(x))),ss1) # sample row index 1
sb1<-c(yy[quantile(yy,0.95)<yy])# sample base 1
d[sri1,2]<-sample(sb1,ss1,replace=T) # manipulation of part 1

ss2<-nr.outlier-ss1 # sample size 2 
sri2<-sample(c(round(0.8*length(x)+1):length(x)),ss2) # sample row index 2
sb2<-c(yy[quantile(yy,0.05)>yy])# sample base 2
d[sri2,2]<-sample(sb2,ss2,replace=T) # manipulation of par 2

tlm2<-function(x,y,alpha=0.95,orig.plot=FALSE,orig.ret=FALSE){

m1<-lm(y~x)
res<-abs(m1$res)
topres<-sort(res,decreasing=TRUE)[1:round((1-alpha)*length(x))] # top alpha*n residuals
topind<-rownames(as.data.frame(topres)) # indices of the top residuals
x2<-x[-as.numeric(topind)] #
y2<-y[-as.numeric(topind)] # removal of the identified observations

m2<-lm(y2~x2)
r2_m1<-summary(m1)$'r.squared'
r2_m2<-summary(m2)$'r.squared'
if(orig.plot==TRUE){
    par(mfrow=c(2,1))
    plot(x,y,xlim=range(x),ylim=c(min(d[,2])-30,max(d[,2]+30)),main="Model based on original data")
    abline(m1$coef);legend("topleft",legend=bquote(italic(R)^2==.(r2_m1)),bty="n")
}
plot(x2,y2,xlim=range(x),ylim=c(min(d[,2])-30,max(d[,2]+30)),main="Model based on trimmed data")
abline(m2$coef);

legend("topleft",legend=bquote(atop(italic(R)^2==.(r2_m2),alpha==.(alpha))),bty="n")

return(if(orig.ret==TRUE){list(m1=m1,m2=m2)} else{m2})
}

tlm2(d[,1],d[,2])

tlm2(d[,1],d[,2],orig.plot=T) 
```

谁能给我一个提示？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:49:09.837

问题在于它`atop`本质上是一个除法（即 x/y），而没有绘制除法条。它还使分母居中。解决方案是使用`expression`而不是`bquote`. 但是，要混合表达式和变量，您需要使用`substitute`and `eval`：

这是您的图例调用应如下所示：

```
legend("topleft",legend=c(eval(substitute(expression(italic(R)^2==my.r2), list(my.r2 = r2_m2))) ,
                          eval(substitute(expression(alpha==my.alpha), list(my.alpha = alpha)))
                          )
                          ,bty="n") 
```

结果如下： ![在此处输入图像描述](https://i.stack.imgur.com/BeqXd.png)

# matlab - Matlab中的无限循环

> ID：16132862
> 
> 赞同：0
> 
> 时间：2013-04-21T15:32:45.960
> 
> 标签：matlab, loops, recursion, while-loop, infinite

我正在尝试在 Matlab 中编写一个脚本文件，该文件将绘制以特定角度 (a)、速度 (v) 和初始高度 (y0) 抛出的球的轨迹。我有方程式，并希望 Matlab 绘制飞行中球的路径。但是，我希望它只绘制它直到它落地（y = 0）。

为此，我使用了一个 while 循环，但它似乎永远不会满足条件并且永远运行。我确信在 x 的多次迭代后可以满足条件，但它只会持续几分钟，有什么问题？

代码如下。

```
 % Trajectory Plotter with cutoff
    clear all
    close all 
    clc

    y0 = input('Enter a value for y0 in meters: ');

    if y0 < 0 
        disp('Please enter a positive value for y0')
    end

    a = input('Enter a value for theta in degrees: ');
    g = 9.81;
    v = input('Enter a value for initial velocity in m/s: ');

    x = 0;
    y = y0 + x*tand(a) - (g*x.^2)/(2*(v*cosd(a))^2)

    while y >= 0
        x = x+0.2
    end

    plot(x,y); 
```

抱歉，如果这是一个微不足道的问题，我是 Matlab/编程的新手。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:38:20.577

没错，`while`循环就是问题所在。如果您的条件（在这种情况下`y >= 0`）不受循环执行的影响，那么条件的真值将永远不会改变。这就像将画笔笔触放在墙上，然后等待对面的墙壁上漆......

现在，对于这个特殊问题，您可能还想在更新`y`' 值之后更新`x`' 值：

```
while y >= 0
    x = x+0.2;
    y = y0 + x*tand(a) - (g*x.^2)/(2*(v*cosd(a))^2);
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:57:56.423

确实，您确实需要在`y`while 循环中更新循环控制变量，但这并不是您的代码有问题的全部。

由于您要绘制轨迹，因此您需要保留 和 的`x`值`y`；在这里，它们只是被覆盖了。

以下将实现您似乎需要的内容：

```
% Trajectory Plotter with cutoff
clear all
close all 
clc

y0 = input('Enter a value for y0 in meters: ');

if y0 < 0 
    disp('Please enter a positive value for y0')
end

a = input('Enter a value for theta in degrees: ');
g = 9.81;
v = input('Enter a value for initial velocity in m/s: ');

x = 0;
y = y0 + x*tand(a) - (g*x.^2)/(2*(v*cosd(a))^2);

X = x;
Y = y0;

while y >= 0
    x = x+0.2;
    y = y0 + x*tand(a) - (g*x.^2)/(2*(v*cosd(a))^2);

    X = [X x];
    Y = [Y y];
end

plot(X,Y,'--o'); 
```

在这里，在覆盖`x`和之前`y`，它们的值分别附加到`X`和`Y`，因此保留在这些变量中。

# c - C中指向指针的指针和指针的地址有什么区别？

> ID：16132867
> 
> 赞同：1
> 
> 时间：2013-04-21T15:33:30.057
> 
> 标签：c

*将变量x*初始化为 char ** 和将变量*x*初始化为 char * 然后使用*&*引用它有什么区别？这个问题来自以下调查：

我在看**man 3 strtol**函数。函数签名是：

```
long strtol(const char *restrict str, char **restrict endptr, int base); 
```

因此，为了传递**endptr**变量，我设置了一个变量：

```
char **endptr; 
```

但是当我将它传递给函数时，它总是返回 NULL，即使在传递给**strtol的****str**类似于*abc*的情况下也是如此。IE：

 ***```
 char ** endptr;
         long exitval = strtol(args[1], endptr, 10); /* try to get the val */
         if (endptr != NULL) { /* it wasn't a valid base-10 number */ 
```

然而，当我将初始化 endptr 的方式更改为：

```
char *endptr; 
```

然后将**endptr**作为*&endptr*传递给函数，**endptr**设置正确。IE：

```
 char * endptr;
         long exitval = strtol(args[1], &endptr, 10); /* try to get the val */
         if (endptr != NULL) { /* it wasn't a valid base-10 number */ 
```

在这两种情况下，我认为我传递的是*指向 char array 中第一个 char 的指针的指针*，但是一种方法有效而另一种方法无效的事实并不表明我的理解是不正确的。

**为什么一种方法有效而另一种方法无效？我有什么误解？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:45:12.367

我会开枪的。

该函数`strtol`需要它可以写入的地址。

当你声明

```
char *ptr; 
```

您有一个名为的变量`ptr`，当您传递其地址时，`strtol`可以写入该位置，然后您可以通过查看变量的内容来使用该值。

当你声明

```
char **ptr; 
```

并且只传递它的值，首先你可能传递了一个未初始化的值，`strtol`它将尝试写入，其次，即使你初始化它，你也只是传递它的内容 -`strtol`将修改它指向的位置，而不是变量本身的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:46:22.287

在第一个中，您没有为指向指针的指针赋值，它是您传递给 strtol 的未初始化值，在第二个中，您正在定义一个指针，然后您正在获取它的地址，因此您正在传递endptr 的地址。

另一种思考方式是，第一个示例是您在内存中定义一个位置，该位置用于保存指向指针的指针，但该内存未设置为任何内容，然后您将该垃圾传递给 strol。第二个是在内存中定义一个保存指针的位置，然后获取内存位的地址，然后将其传递给 strol。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:51:30.113

从手册页：

> 如果 endptr 不为 NULL，strtol() 将第一个无效字符的地址存储在 *endptr 中。

在第一种情况下，您传递的值被初始化为 0，因此`endptr`不会将第一个无效字符的地址存储在.`strtol()``strtol()``*endptr`

在第二种情况下，您传递`endptr`to的地址`strtol()`，它不是 0，因此如果找到无效字符，它将不会返回 NULL。***

# c# - C# WPF 禁用退出/关闭按钮

> ID：16132872
> 
> 赞同：8
> 
> 时间：2013-04-21T15:34:22.747
> 
> 标签：c#, wpf

是否可以禁用 WPF 表单中的关闭按钮？如何禁用关闭按钮？

我一直在寻找并找到下面的解决方案。但这仅适用于 Windows 窗体！

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
      e.Cancel = true;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-21T15:37:23.160

在 wpf 这个事件称为 Closing ：

```
public Window4()
    {
        InitializeComponent();
        this.Closing += new System.ComponentModel.CancelEventHandler(Window4_Closing);
    }

    void Window4_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        e.Cancel = true;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:36:23.743

您需要实现一个 Windows 挂钩来完成此操作。有关详细信息，请参阅[此 MSDN 帖子](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/549a4bbb-e77b-4c5a-b724-07996774c60a/)。

# xcode - 如何在 10.7 上的 xcode 中构建到受保护的文件夹

> ID：16132875
> 
> 赞同：0
> 
> 时间：2013-04-21T15:34:29.273
> 
> 标签：xcode, audiounit

我正在尝试构建一个音频单元合成器，我已经编译了它，但是到目前为止它可以工作，但我想通过将我的 daw 设置为调试 exexuble 来正确调试它。问题是 daw 只加载组件文件夹中的插件，而 xcode 说它没有在那里构建的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:48:09.793

您应该设置一个构建步骤，将插件从构建的产品目录复制到您的组件文件夹。除了内部构建的产品目录是内部的这一事实之外，Mac 上的 AU 工具*只会*在系统和用户组件目录中查找插件，而 VST 可以是任意路径。

脚本看起来像这样：

```
cp -r "$BUILT_PRODUCTS_DIR/$PRODUCT_NAME.component" "$HOME/Library/Audio/Plug-Ins/Components" 
```

# html - 如何使用 kramdown 在 octopress 中创建连续的反斜杠

> ID：16132877
> 
> 赞同：1
> 
> 时间：2013-04-21T15:34:36.657
> 
> 标签：html, markdown, octopress

我正在使用 Kramdown 和 Octopress 编写降价文本，但我不知道如何进入`\\`html。我试过`\\\\`但得到`&#92;`. 根据其文档，`\`用于逃生。有谁知道如何进入`\\`html，不`&#92;&#92;`？谢谢。我很困惑什么时候`\\`会被翻译成什么`\`时候会被翻译成`<br />`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T07:30:44.900

问题不在于 Kramdown，而在于 Octopress 附带的一个名为 ruby​​pants.rb 的插件。查看 plugins/rubypants.rb，您会发现一个名为 process_escapes 的方法，它对 str.gsub 进行了多次调用。（第 335 行左右。）其中一个用您看到的转义码替换双反斜杠（“\”） - 修复该行，你会很好。（您可以通过将“str.”移动到下一个 gsub 并删除该行的其余部分来修复它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:21:06.410

我在这里没有看到问题

```
$ kramdown --version
0.14.2

$ kramdown <<< '\\\\'
<p>\\</p> 
```

# javascript - 如何从表单中删除上传项目？

> ID：16132879
> 
> 赞同：2
> 
> 时间：2013-04-21T15:34:56.697
> 
> 标签：javascript, file, upload

我有一个允许使用文件输入加载文件的表单。我想允许用户删除上传项目，但我无法弄清楚。这是我到目前为止尝试做的事情：

```
<form action="insert.php" method="POST" align="right" id="post_form">
 <input type="file" id="upload_file" onChange="display()">
 <div id="show_button" onClick="remove_pic()">  remove </div><br>
</form>

function remove_pic() {
  alert('check');
  var file_loaded = document.getElementById("upload_file");
  file_loaded = null; // here i try to remove the object
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:39:50.930

通过 JSFiddle 运行代码并检查 Chrome 开发控制台后，我不断收到“未定义函数”错误消息。

我发现将您尝试直接调用的函数显式放入全局范围可以将其识别为已定义。您还需要使用空白字符串而不是 null 并将对“.value”属性的更改附加到“file_loaded”变量中。

代替

```
function remove_pic() {
  alert('check');
  var file_loaded = document.getElementById("upload_file");
  file_loaded = null; // here i try to remove the object
} 
```

尝试

```
window.remove_pic = function() {
  alert('check');
  var file_loaded = document.getElementById("upload_file");
  file_loaded.value = ""; // here i try to remove the object 
}; 
```

示例 JSFiddle：http: [//jsfiddle.net/xu6SD/1/](http://jsfiddle.net/xu6SD/1/)

# ruby-on-rails - 当锚点存在时，Rails 请求参数被忽略

> ID：16132881
> 
> 赞同：2
> 
> 时间：2013-04-21T15:35:05.643
> 
> 标签：ruby-on-rails, routing

我有一个请求进入我的 rails 3 应用程序：

```
http://mydomain/controller/action#an_anchor?p1=1&p2=2&p3=3 
```

我的路线：

```
match '/controller/:action' => 'controller' 
```

路由成功找到我的控制器和动作，但参数为空。（几乎是空的，参数包含控制器和动作，但没有传入的参数）。

好像 # 之后的 url 上的所有内容都被删除了。我希望系统忽略#...？，但仍然提供我的查询参数。

我也试过这条路线：

```
match '/controller/*stuff' => 'controller' 
```

并且“东西”在参数中，直到 # 。# 之后的所有内容都消失了，包括 url 参数。

这是一个错误吗？有*什么*方法可以在 url 中传递锚标记并仍然提取查询参数？

（补充：）此网址来自 PayPal，作为其嵌入式购物车的一部分。我无法控制字符串上字段的顺序，我不能成为唯一使用贝宝迷你购物车的人。实际的 url 值为：

.../paypal#PPMiniCart=reset?tx=4NH71321AG6850224&st=已完成&amt=2.73&cc=USD

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T15:45:01.183

# 之后的所有内容都被删除 - 浏览器不会将 URL 的片段部分发送到服务器。

如果您希望将这些参数视为查询字符串的一部分，它们必须在 # 之前

# ios - UICollectionView 在滚动时留下空白单元格

> ID：16132884
> 
> 赞同：1
> 
> 时间：2013-04-21T15:35:38.680
> 
> 标签：ios, objective-c, xcode, uicollectionview

我已经构建了一个显示图像缩略图的 uicollectionview。直到一切正常。

我从收藏视图的末尾删除了一张照片并滚动到顶部。

所以问题是当我从底部滚动到顶部时，它会留下这些空白单元格。但是如果我从集合视图的顶部删除并滚动到底部，那么它不会留下这些空白单元格。

我不知道是什么原因造成的。我非常确定 UICollectionViewDataSource 已正确更新。

请帮我解决一下这个。

![在此处输入图像描述](https://i.stack.imgur.com/b9Ftd.png)

![在此处输入图像描述](https://i.stack.imgur.com/3Y9KJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:27:20.770

回答我自己的问题。它是一个错误。减小单元大小解决了这个问题。我只是减小了单元格宽度，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T14:33:51.887

[这个问题](https://stackoverflow.com/questions/12927027/uicollectionview-flowlayout-not-wrapping-cells-correctly-ios)有更多关于可能发生的事情的详细信息以及指向[openradar 错误报告](http://openradar.appspot.com/12433891)的链接。

# uitableview - 滚动 UITableView 时自定义单元格重新加载问题

> ID：16132885
> 
> 赞同：0
> 
> 时间：2013-04-21T15:35:48.873
> 
> 标签：uitableview, scroll

我有一个 UITableView，我在其中使用自定义 UITableViewCell。一切都很好，直到 UITableView 滚动。一旦我滚动 UITableView，第二部分中的单元格就会开始显示第一部分中单元格的内容。

我正在为我的项目使用 Storyboard。

这是 cellForRowAtIndexPath 中的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

LS_Custom_Cell *customCell = (LS_Custom_Cell *)[tableView dequeueReusableCellWithIdentifier:@"LS_Custom_Cell" forIndexPath:indexPath];

if (indexPath.section == 0 && indexPath.row == 0) {
    customCell.selectionStyle = UITableViewCellSelectionStyleNone;
    [customCell.btnAddContact addTarget:self
                                 action:@selector(btnAddContactAction:)
                       forControlEvents:UIControlEventTouchDown];
    customCell.btnSelectContact.hidden   = YES;
    customCell.btnAddContact.hidden      = NO;
    customCell.lblAddContactText.hidden  = NO;
    customCell.lblContactName.hidden     = YES;
    customCell.lblContactEmailId.hidden  = YES;
}else if (indexPath.section == 1){
    customCell.lblContactName.text = [NSString stringWithFormat:@"%@", [[contactsArray objectAtIndex:indexPath.row] valueForKey:@"name"]];
    customCell.lblContactEmailId.text = [NSString stringWithFormat:@"%@", [[contactsArray objectAtIndex:indexPath.row] valueForKey:@"email"]];
}

return customCell;
} 
```

我还附上了图片以进一步澄清问题。

这个屏幕截图是第一次当表格加载记录看起来很完美

[http://postimg.org/image/y2114vjdl/](http://postimg.org/image/y2114vjdl/)

一旦我从第一部分开始滚动单元格就会出现在第二部分

[http://postimg.org/image/c5ei4i66x/](http://postimg.org/image/c5ei4i66x/)

这是我第一次在这里发布问题，如果有任何错误，请原谅我。非常感谢这方面的任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T04:23:57.797

尝试这个

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    LS_Custom_Cell *customCell = (LS_Custom_Cell *)[tableView dequeueReusableCellWithIdentifier:@"LS_Custom_Cell" forIndexPath:indexPath];

    if (indexPath.section == 0 && indexPath.row == 0)
    {
        customCell.selectionStyle = UITableViewCellSelectionStyleNone;
        [customCell.btnAddContact addTarget:self
                                     action:@selector(btnAddContactAction:)
                           forControlEvents:UIControlEventTouchDown];
        customCell.btnSelectContact.hidden   = YES;
        customCell.btnAddContact.hidden      = NO;
        customCell.lblAddContactText.hidden  = NO;
        customCell.lblContactName.hidden     = YES;
        customCell.lblContactEmailId.hidden  = YES;
    }

    else if (indexPath.section == 1)
    {
        customCell.btnSelectContact.hidden   = NO;
        customCell.btnAddContact.hidden      = YES;
        customCell.lblAddContactText.hidden  = YES;
        customCell.lblContactName.hidden     = NO;
        customCell.lblContactEmailId.hidden  = NO;
        customCell.lblContactName.text = [NSString stringWithFormat:@"%@", [[contactsArray objectAtIndex:indexPath.row] valueForKey:@"name"]];
        customCell.lblContactEmailId.text = [NSString stringWithFormat:@"%@", [[contactsArray objectAtIndex:indexPath.row] valueForKey:@"email"]];
    }

    return customCell;
} 
```

# html - 如何通过 Webkit.net 获取完整的 html 代码

> ID：16132886
> 
> 赞同：0
> 
> 时间：2013-04-21T15:35:49.787
> 
> 标签：html, ajax, webkit.net

该网站使用ajax加载一些数据。当DocumentCompleted时，我只得到没有ajax数据的html代码。

如何通过 webkit.net 获取 ajax 数据？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T02:14:04.660

我自己最近刚刚与这个进行了斗争，并且拥有应该是一个可行的解决方案。我没有用 ajax 尝试过，但我在从 C# 创建和附加 DOM 元素之后使用了它，它产生了完整的代码，其中 DocumentText 只产生原始的未修改的 HTML。

```
var fullHTML = webKitBrowser1.StringByEvaluatingJavaScriptFromString("document.getElementsByTagName('html')[0].outerHTML") 
```

我见过的这种方法的唯一限制是它不包括 doctype 标签（如果有的话），但其他所有东西都在那里。

# java - 将星号作为命令行参数传递给 Eclipse 中的 main

> ID：16132890
> 
> 赞同：3
> 
> 时间：2013-04-21T15:36:32.293
> 
> 标签：java, eclipse

我正在Eclipse中处理一个Java项目，现在我想将星号`*`作为命令行参数传递给main。我知道这是一个通配符，在每个 shell 中，只需将它放在引号中就可以正常工作，所以`java MyProgram *`我不用输入`java MyProgram "*"`.

在 Eclipse (Run Cofigurations -> Arguments) 中，这两种方式都不起作用，即使有引号，它也只会列出目录中的所有文件。单引号与 in 的`'*'`工作方式相同`a*a`，这意味着单引号（或撇号）也将传递到字符串中。

任何想法如何`*`进入主要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-21T17:07:51.987

Eclipse 将 * 扩展为属性名称列表。所以程序实际上（在我的系统上）传递了一个 args 数组： .classpath, .project, .settings, .bin, .src 而不是 * 。

如果我将任何文本放在 中*，例如“X* ”，那么我会得到“X*”。

双引号没有帮助。也不会用斜线转义它。

从 shell 中它可以正常工作，尽管在 Windows 上至少有一个警告，您确实需要将它放在引号中。Windows 将在程序获取引号之前去掉引号。

但是在 Eclipse 下，我找不到只允许传递 * 的解决方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-21T19:28:56.287

这是您自己程序中的编程错误。Eclipse 将主要参数逐字传递给您的程序。您可以通过创建一个在 main 中只有这一行的 Java 程序来轻松检查这一点：

```
System.out.println(args[0]); 
```

并在运行配置中将星号作为唯一参数传递给该程序。正如预期的那样，打印单个星号字符。

# ajax - Spring3：未找到 HTTP 请求的映射

> ID：16132893
> 
> 赞同：1
> 
> 时间：2013-04-21T15:36:48.773
> 
> 标签：ajax, json, spring, rest

我正在发送以下请求：

```
GET http://127.0.0.1:8080/ajax/rest/teamService/list HTTP/1.1
Host: 127.0.0.1:8080
Connection: keep-alive
Accept: application/json, text/javascript, */*; q=0.01
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31
Referer: http://127.0.0.1:8080/do/controlpanel
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: JSESSIONID=MMezuISPiL9aOEvxmoOKbUWI.undefined 
```

我的 spring 服务 xml 将 /ajax 映射到控制器。此映射应响应：

```
@RequestMapping(value = "/rest/*") 
public @ResponseBody JSONResponse team(@ModelAttribute("cpSession") ControlPanelSession sess, Model model, HttpServletRequest request) {

...

} 
```

同一控制器中的其他映射可以很好地应答 /ajax 调用。例如：

```
@RequestMapping(value = "/isFNameOK", method = RequestMethod.GET)
@ResponseBody
public String isFNameOK(@ModelAttribute("cpSession") ControlPanelSession sess, Model model, HttpServletRequest request, @RequestParam("fName") String fName) {

...

} 
```

但显然不是，因为我得到：

```
No mapping found for HTTP request with URI [/ajax/rest/teamService/list] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:51:58.697

/rest/* 将匹配`/rest/teamService`，但不匹配`/rest/teamService/list`。

您可以使用 /rest/** 来匹配 /rest 路径下的所有内容。但是，您可能更喜欢使用：

```
@RequestMapping(value = "/rest/{service}/{action}")
public @ResponseBody JSONResponse team(@PathVariable String service, @PathVariable String action, ...) { 
```

这将匹配您的 URL，并在您的方法主体中提供通配符部分以供进一步检查。

# css - 为什么我的页脚边距不显示？[CSS]

> ID：16132895
> 
> 赞同：-1
> 
> 时间：2013-04-21T15:36:52.847
> 
> 标签：css, margin, footer

这是一个相当基本的 HTML/CSS 问题，很抱歉我不得不在这里问这个问题（我已经尽力了！）。我编写了以下 HTML 和 CSS 代码，虽然标题部分与文章和旁边的部分相隔 20 像素，但页脚仅相隔 10 像素。事实上，不管我为页脚设置的边距如何，间隔仍然是 10 像素。我究竟做错了什么？

如果您可以在浏览器中测试此代码以了解我的意思，那就太棒了。我还在文章/旁边部分和页脚部分之间的倾斜边距下方插入了一个图片链接。

[http://cl.ly/image/3M2u1L0x2C0x](http://cl.ly/image/3M2u1L0x2C0x)

**HTML 代码**

```
<!DOCTYPE html>
<html>
    <head>
    <title>My Grey Boxes</title>
    <link type="text/css" rel="stylesheet" href="stylesheet.css"/>
</head>

<body>
<div id="wrapper">
    <header></header>
    <article></article>
    <aside></aside>
    <footer></footer>
</div>
</body>
</html> 
```

**CSS 代码**

```
#wrapper {
    margin: auto;
    width: 940px;
    }

body {
    background-color: #fafafa;
    }

header {
    height: 120px;
    width: 920px;
    display: block;
    margin: 10px 10px;
    position: relative;
    background-color: #c6c6c6;
    }

article {
    height: 740px;
    width: 600px;
    margin: 10px 10px;
    float: left;
    position: relative;
    background-color: #c6c6c6;
    }

/* Keep scrolling! */

aside {
    height: 740px;
    width: 300px;
    margin: 10px 10px;
    float: right;
    position: relative;
    background-color: #c6c6c6;
    }

footer {
    height: 120px;
    width: 920px;
    display: block;
    margin: 10px 10px; /* Why is this being ignored? */
    background-color: #c6c6c6;
    position: relative;
    clear: both;
    } 
```

任何帮助将不胜感激！如果我没有遵守这里的所有社区准则，我很抱歉 - 这是我第一次在 StackOverflow 上发帖，我会尽快处理！提前谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:46:03.373

在到达页脚**之前**，您需要清除浮动。将您的 HTML 更改为此将起作用：

```
<div id="wrapper">
    <header></header>
    <article></article>
    <aside></aside>
    <div style="clear:both;"></div>
    <footer></footer>
</div> 
```

# iphone - iPhone 5 接平板媒体查询

> ID：16132897
> 
> 赞同：0
> 
> 时间：2013-04-21T15:36:55.450
> 
> 标签：iphone, html, css

出于某种原因，我的 iPhone 正在以下媒体查询中选择样式：

`@media screen and (min-width: 481px) and (max-width: 900px)`

有谁知道这可能是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:42:27.507

iPhone5屏幕大于900px（1136）

从另一个问题中得到这个：

iPhone 5 之前：'@media screen and (device-aspect-ratio: 2/3) {}'

iPhone 5: '@media screen and (device-aspect-ratio: 40/71) {}'

iPad: '@media screen and (device-aspect-ratio: 3/4) {}'

# c - 多个进程可以使用 MPI_Scatter 吗？

> ID：16132899
> 
> 赞同：1
> 
> 时间：2013-04-21T15:36:57.577
> 
> 标签：c, parallel-processing, mpi, distributed-computing

假设我有 3 个具有以下数组的进程：

```
P0 - int sendBuff[3] = {1,2,3};
P1 - int sendBuff[3] = {4,5,6};
P2 - int sendBuff[3] = {7,8,9}; 
```

假设每个进程都有一个`int recvBuff[3];`

我想将每个进程 sendBuff 分散到每个进程 recvBuff 中，所以我的主文件中有代码：

```
int rank, size, i;
MPI_Init(&argc, &argv);
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);

MPI_Scatter(&sendBuff[0], 1, MPI_INT, &recvBuff[0], 3, MPI_INT, rank, MPI_COMM_WORLD);
MPI_Barrier(MPI_COMM_WORLD);
//print recvBuffs 
```

但是，当我打印出 processes 时`recvBuff`，我得到：

```
recvBuff of P0:  1, -1077259864, 134517329
recvBuff of P1:  5, 6, 4
recvBuff of P2:  9, 7, 8 
```

我不应该得到：

```
recvBuff of P0:  1, 4, 7
recvBuff of P1:  2, 5, 8
recvBuff of P2:  3, 6, 9 
```

我有一种感觉，每个进程每次调用时都会覆盖每个进程的 recvBuff `MPI_Scatter`。

此外，一组进程中只能有一个进程调用 MPI_Scatter 还是所有进程都可以并行调用它？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:52:04.710

事实上，我正在寻找的是 MPI_Alltoall(..)

显然，我试图做的很容易用 MPI_Alltoall(..)

任何有相同问题的人都可以看看：[Hiestro Liev 的回答](https://stackoverflow.com/questions/15049190/difference-between-mpi-allgather-and-mpi-alltoall-functions)

为了完整起见：

Scatter 是让一个进程向所有其他进程发送值：

```
P0- {1, 2, 3}
P1
P2 
```

分散后：

```
P0-{1}
P1-{2}
P2-{3} 
```

此外，Scatter 操作中的“root”参数对于所有进程应该是相同的，因为这意味着将根位置的数组分散到所有其他进程。在上面的示例中，该值为 0。

（新加坡国立大学对VAARN DROLIA的赞美）

# javascript - 在 jquery 中创建命名空间时出错

> ID：16132902
> 
> 赞同：0
> 
> 时间：2013-04-21T15:37:24.240
> 
> 标签：javascript, jquery, namespaces

我在js文件中写了一段代码

```
(function ($) {
    var $r = $.loadaccess;

    jQuery.loadaccess.page.user = {
        init: function () {
            debugger;
            var k = 'dd';
            alert(k);
        }
    };
})(jQuery);

var user = jQuery.loadaccess.page.user; 
```

我在 .aspx 页面上调用它

```
$(document).ready(function () {

        jQuery.loadaccess.page.user.init();
    }); 
```

但它对我抛出了错误“Microsoft JScript 运行时错误：无法获取属性‘页面’的值：对象为空或未定义”

在这

```
jQuery.loadaccess.page.user = {
            init: function () {
                debugger;
                var k = 'dd';
                alert(k);
            }
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:45:53.553

该错误非常具有自我描述性，`jQuery.loadaccess`为空或未定义。你期望 jQuery.loadaccess 是什么？您需要自己创建这个“命名空间”。例如：

```
jQuery.loadaccess = {
  page: {
    user: {
      init: function () {
          debugger;
          var k = 'dd';
          alert(k);
      }
    }
  }
}; 
```

我不建议向 jQuery 对象添加对象，而是创建自己的顶级命名空间。

# c# - 如何进行c#碰撞检测？

> ID：16132903
> 
> 赞同：3
> 
> 时间：2013-04-21T15:37:34.587
> 
> 标签：c#, wpf, ellipse

c# 中是否有任何允许碰撞检测的预定义方法？

我是 c# 的新手，正在尝试对两个椭圆进行碰撞检测 是否有任何预定义的方式可以实现碰撞检测？

我已经有绘制椭圆的代码，什么是开始碰撞检测的好方法？

```
private void timer1_Tick(object sender, EventArgs e)
    {
        //Remove the previous ellipse from the paint canvas.
        canvas1.Children.Remove(ellipse);

        if (--loopCounter == 0)
            timer.Stop();

        //Add the ellipse to the canvas
        ellipse = CreateAnEllipse(20, 20);
        canvas1.Children.Add(ellipse);

        Canvas.SetLeft(ellipse, rand.Next(0, 500));
        Canvas.SetTop(ellipse, rand.Next(0, 310));
    }

    // Customize your ellipse in this method
    public Ellipse CreateAnEllipse(int height, int width)
    {
        SolidColorBrush fillBrush = new SolidColorBrush() { Color = Colors.Yellow};
        SolidColorBrush borderBrush = new SolidColorBrush() { Color = Colors.Black };

        return new Ellipse()
        {
            Height = height,
            Width = width,
            StrokeThickness = 1,
            Stroke = borderBrush,
            Fill = fillBrush
        }; 
    } 
```

这是绘制椭圆的代码，然后将其移除并出现在另一个位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T15:45:58.107

我已经测试过了，它有效，至少对我来说

![在此处输入图像描述](https://i.stack.imgur.com/sxCjc.png)

```
var x1 = Canvas.GetLeft(e1);
var y1 = Canvas.GetTop(e1);
Rect r1 = new Rect(x1, y1, e1.ActualWidth, e1.ActualHeight);

var x2 = Canvas.GetLeft(e2);
var y2 = Canvas.GetTop(e2);
Rect r2 = new Rect(x2, y2, e2.ActualWidth, e2.ActualHeight);

if (r1.IntersectsWith(r2))
    MessageBox.Show("Intersected!");
else
    MessageBox.Show("Non-Intersected!"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T17:01:07.793

会像以下工作吗？

```
var ellipse1Geom = ellipse1.RenderedGeometry;
var ellipse2Geom = ellipse2.RenderedGeometry;
var detail = ellipse1Geom.FillContainsWithDetail(ellipse2Geom);
if(detail != IntersectionDetail.Empty)
{
    // We have an intersection or one contained inside the other
} 
```

该[`Geometry.FillContainsWithDetail(Geometry)`](http://msdn.microsoft.com/en-us/library/ms607451.aspx)方法定义为

> > 返回一个值，该值描述当前几何与指定几何之间的交集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T16:52:42.220

假设您的 Ellipses 始终是圆形（即它们的`Width`和`Height`属性设置为相同的值）并且它们始终设置了`Canvas.Left`和`Canvas.Top`属性，则以下辅助方法会检查碰撞：

```
public static bool CheckCollision(Ellipse e1, Ellipse e2)
{
    var r1 = e1.ActualWidth / 2;
    var x1 = Canvas.GetLeft(e1) + r1;
    var y1 = Canvas.GetTop(e1) + r1;
    var r2 = e2.ActualWidth / 2;
    var x2 = Canvas.GetLeft(e2) + r2;
    var y2 = Canvas.GetTop(e2) + r2;
    var d = new Vector(x2 - x1, y2 - y1);
    return d.Length <= r1 + r2;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T16:16:44.120

我认为你绝对应该看看[XNA 框架](http://msdn.microsoft.com/en-us/library/bb313876(v=xnagamestudio.20).aspx)，它有很多方法可以进行碰撞检测。

查看有关如何在 c# 中手动实现它的其他[链接，它可能会有所帮助。](https://stackoverflow.com/questions/3540472/collision-detection-implementation)

# javascript - Javascript中的字符串转换（十进制到二进制）

> ID：16132905
> 
> 赞同：27
> 
> 时间：2013-04-21T15:38:03.627
> 
> 标签：javascript

这里是新手！想知道为什么以下转换失败！

```
var num = prompt("Enter num");
alert(num.toString(2));
```

如果 num 输入为 32。我也收到 32 作为 num 警报消息。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-21T15:42:27.847

尝试

```
(+num).toString(2) 
```

,

```
Number(num).toString(2) 
```

或者

```
parseInt(num, 10).toString(2) 
```

其中任何一个都应该更适合您。

问题是`toString`javascript`Number`对象的方法会覆盖对象的`toString`方法`Object`以接受可选的基数作为参数来提供您正在寻找的功能。该`String`对象不会覆盖`Object`的`toString`方法，因此传入的任何参数都将被忽略。

有关这些对象的更多详细信息，请参阅 Mozilla 的文档：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString) [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Methods](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Methods)

或 W3 学校：

[http://www.w3schools.com/jsref/jsref_tostring_number.asp](http://www.w3schools.com/jsref/jsref_tostring_number.asp) [http://www.w3schools.com/jsref/jsref_obj_string.asp](http://www.w3schools.com/jsref/jsref_obj_string.asp)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-16T11:38:24.447

使用此功能，您可以指定输出的长度。

例如`decbin(7,4)`产生`0111`.

```
function decbin(dec,length){
  var out = "";
  while(length--)
    out += (dec >> length ) & 1;    
  return out;  
} 
```

[演示](http://jsbin.com/iKalUga/1/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-29T03:10:19.777

这是我不使用 parseInt 的解决方案，而是一种显示将十进制转换为二进制背后的逻辑的方法。

此方法将位打印到数组中，如果您愿意，您可以稍后打印出来：

```
var number = 156;
var converted = [];

while(number>=1) {
    converted.unshift(number%2);
    number = Math.floor(number/2);
} 
```

转换后的数组现在将如下所示：

**[1,0,0,1,1,1,0,0]**

这当然会转换回 156。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-26T03:11:35.500

/** 将十进制数转换为二进制数 **/

```
var toBinary = function(decNum){
    return parseInt(decNum,10).toString(2);
} 
```

/** 将二进制数转换为十进制数 **/

```
var toDecimal = function(binary) {
    return parseInt(binary,2).toString(10);
} 
```

终于用上了

```
var num= prompt("Enter num"); 
alert(toBinary(num)); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-21T15:41:50.567

首先将其转换为整数。目前，您正在将字符串转换为二进制表示。

```
num = +num; 
```

# html - 图像的 HTML 问题

> ID：16132906
> 
> 赞同：0
> 
> 时间：2013-04-21T15:38:20.513
> 
> 标签：html, image, background-image

我有以下问题：我目前正在使用 html 和 css 制作一个网站。我已经构建了这样的背景：

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      div.background {
        width: 500px;
        height: 250px;
        background: url(klematis.jpg) repeat;
        border: 2px solid black;
      }
      div.transbox {
        width: 400px;
        height: 180px;
        margin: 30px 50px;
        background-color: #ffffff;
        border: 1px solid black;
        opacity:0.6;
        filter:alpha(opacity=60); /* For IE8 and earlier */
      }
      div.transbox p {
        margin: 30px 40px;
        font-weight: bold;
        color: #000000;
      }
    </style>
  </head>
  <body>
    <div class="background">
      <div class="transbox">
        <p>
          This is some text that is placed in the transparent box.
          This is some text that is placed in the transparent box.
          This is some text that is placed in the transparent box.
          This is some text that is placed in the transparent box.
          This is some text that is placed in the transparent box.
        </p>
      </div>
    </div>
  </body>
</html> 
```

当然，我还想在盒子里放一些额外的图片，但是你可以看穿它们，你可以看到背景图片，所以图片看起来很苍白透明。我怎样才能只为图片制作不同的背景颜色才能看起来很立体？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:01:08.350

您可以通过设置元素的`background`属性来设置图像的背景，例如`img`

```
img { background: black; } 
```

这会覆盖初始值`background: transparent`，如果图像具有透明区域，则该初始值会让页面背景发光。

# java - 尝试在 Android 中使用 FFT

> ID：16132910
> 
> 赞同：0
> 
> 时间：2013-04-21T15:38:49.050
> 
> 标签：java, android, fft

晚上好！我正在尝试使用在 Android 中的 Java 中工作的 FFT 代码，但不知道为什么它不能正常工作。这是我在 Android 中修改后的代码。提前致谢！！

```
package dani;

public class FFT {

    // compute the FFT of x[], assuming its length is a power of 2
    public static Complex[] fft(Complex[] x) {
        int N = x.length;

        // base case
        if (N == 1) return new Complex[] { x[0] };

        // radix 2 Cooley-Tukey FFT
        if (N % 2 != 0) { throw new RuntimeException("N is not a power of 2"); }

        // fft of even terms
        Complex[] even = new Complex[N/2];
        for (int k = 0; k < N/2; k++) {
            even[k] = x[2*k];
        }
        Complex[] q = fft(even);

        // fft of odd terms
        Complex[] odd  = even;  // reuse the array
        for (int k = 0; k < N/2; k++) {
            odd[k] = x[2*k + 1];
        }
        Complex[] r = fft(odd);

        // combine
        Complex[] y = new Complex[N];
        for (int k = 0; k < N/2; k++) {
            double kth = -2 * k * Math.PI / N;
            Complex wk = new Complex(Math.cos(kth), Math.sin(kth));
            y[k]       = q[k].plus(wk.times(r[k]));
            y[k + N/2] = q[k].minus(wk.times(r[k]));
        }
        return y;
    }

    // compute the inverse FFT of x[], assuming its length is a power of 2
    public static Complex[] ifft(Complex[] x) {
        int N = x.length;
        Complex[] y = new Complex[N];

        // take conjugate
        for (int i = 0; i < N; i++) {
            y[i] = x[i].conjugate();
        }

        // compute forward FFT
        y = fft(y);

        // take conjugate again
        for (int i = 0; i < N; i++) {
            y[i] = y[i].conjugate();
        }

        // divide by N
        for (int i = 0; i < N; i++) {
            y[i] = y[i].times(1.0 / N);
        }

        return y;

    }

    // compute the circular convolution of x and y
    public static Complex[] cconvolve(Complex[] x, Complex[] y) {

        // should probably pad x and y with 0s so that they have same length
        // and are powers of 2
        if (x.length != y.length) { throw new RuntimeException("Dimensions don't  
 agree"); }

        int N = x.length;

        // compute FFT of each sequence
        Complex[] a = fft(x);
        Complex[] b = fft(y);

        // point-wise multiply
        Complex[] c = new Complex[N];
        for (int i = 0; i < N; i++) {
            c[i] = a[i].times(b[i]);
        }

        // compute inverse FFT
        return ifft(c);
    }

    // compute the linear convolution of x and y
    public static Complex[] convolve(Complex[] x, Complex[] y) {
        Complex ZERO = new Complex(0, 0);

        Complex[] a = new Complex[2*x.length];
        for (int i = 0;        i <   x.length; i++) a[i] = x[i];
        for (int i = x.length; i < 2*x.length; i++) a[i] = ZERO;

        Complex[] b = new Complex[2*y.length];
        for (int i = 0;        i <   y.length; i++) b[i] = y[i];
        for (int i = y.length; i < 2*y.length; i++) b[i] = ZERO;

        return cconvolve(a, b);
    }

    }

    public static void main(String[] args) { 
        int N = 64;
        Complex[] x = new Complex[N];

        // original data
        for (int i = 0; i < N; i++) {
            x[i] = new Complex(i, 0);
            x[i] = new Complex(-2*Math.cos(i)/N, 0);//AQUI se mete la funcion
        }

        // FFT of original data
        Complex[] y = fft(x);

        // take inverse FFT
        Complex[] z = ifft(y);

        // circular convolution of x with itself
        Complex[] c = cconvolve(x, x);

        // linear convolution of x with itself
        Complex[] d = convolve(x, x);

    }

} 
```

我已经为复数定义了另一个类，这是代码：

```
package dani;

public class Complex {
private final double re;   // the real part
private final double im;   // the imaginary part

// create a new object with the given real and imaginary parts
public Complex(double real, double imag) {
    re = real;
    im = imag;
}

// return a string representation of the invoking Complex object
public String toString() {
    if (im == 0) return re + "";
    if (re == 0) return im + "i";
    if (im <  0) return re + " - " + (-im) + "i";
    return re + " + " + im + "i";
}

// return abs/modulus/magnitude and angle/phase/argument
public double abs()   { return Math.hypot(re, im); }  // Math.sqrt(re*re + im*im)
public double phase() { return Math.atan2(im, re); }  // between -pi and pi

// return a new Complex object whose value is (this + b)
public Complex plus(Complex b) {
    Complex a = this;             // invoking object
    double real = a.re + b.re;
    double imag = a.im + b.im;
    return new Complex(real, imag);
}

// return a new Complex object whose value is (this - b)
public Complex minus(Complex b) {
    Complex a = this;
    double real = a.re - b.re;
    double imag = a.im - b.im;
    return new Complex(real, imag);
}

// return a new Complex object whose value is (this * b)
public Complex times(Complex b) {
    Complex a = this;
    double real = a.re * b.re - a.im * b.im;
    double imag = a.re * b.im + a.im * b.re;
    return new Complex(real, imag);
}

// scalar multiplication
// return a new object whose value is (this * alpha)
public Complex times(double alpha) {
    return new Complex(alpha * re, alpha * im);
}

// return a new Complex object whose value is the conjugate of this
public Complex conjugate() {  return new Complex(re, -im); }

// return a new Complex object whose value is the reciprocal of this
public Complex reciprocal() {
    double scale = re*re + im*im;
    return new Complex(re / scale, -im / scale);
}

// return the real or imaginary part
public double re() { return re; }
public double im() { return im; }

// return a / b
public Complex divides(Complex b) {
    Complex a = this;
    return a.times(b.reciprocal());
}

// return a new Complex object whose value is the complex exponential of this
public Complex exp() {
    return new Complex(Math.exp(re) * Math.cos(im), Math.exp(re) * Math.sin(im));
}

// return a new Complex object whose value is the complex sine of this
public Complex sin() {
    return new Complex(Math.sin(re) * Math.cosh(im), Math.cos(re) * Math.sinh(im));
}

// return a new Complex object whose value is the complex cosine of this
public Complex cos() {
    return new Complex(Math.cos(re) * Math.cosh(im), -Math.sin(re) * Math.sinh(im));
}

// return a new Complex object whose value is the complex tangent of this
public Complex tan() {
    return sin().divides(cos());
}

// a static version of plus
public static Complex plus(Complex a, Complex b) {
    double real = a.re + b.re;
    double imag = a.im + b.im;
    Complex sum = new Complex(real, imag);
    return sum;
}

} 
```

# c - 它如何存储过去的字符？

> ID：16132911
> 
> 赞同：0
> 
> 时间：2013-04-21T15:38:49.407
> 
> 标签：c

下面的代码递归调用 main 并以相反的顺序打印输入的字符。我不明白过去的字符是如何存储在变量 c 中的。当新的输入为什么不覆盖存储在 c 中的过去值？

```
int main(void) 
{
    char c;
    c=getchar();

    if (c!=EOF)
    {
        main();

        printf("%c",c); 
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:47:31.157

关键是该函数是递归调用的。

如您所见，变量 c 是在函数中定义的，因此在函数的每次调用中，都会在堆栈上定义一个新变量 c。

因此，如果您在“hello”中读取，“h”将存储在堆栈上 c 的第一个实例中，然后调用 main，因为“hello”中有另一个字符，因此“e”将存储在第二个实例中堆栈上的 c。这一直持续到读取完整的“你好”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:45:41.030

递归的概念是，维护了一个堆栈，其中存储了每个级别中使用的值。因此，值 c 每次都被压入堆栈，并在从递归深度返回时弹出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:45:03.453

如果一个变量像 c 一样是局部变量，它存储在堆栈中，因此每次调用 main 时，您都会得到一个 c 的新副本，然后使用 getchar 设置该副本。

当到达文件末尾时，函数返回，之前的 main 调用继续并打印该值。然后该调用返回并打印前一个字符，直到顶层退出。

这是“abc”的示例，破折号显示堆栈级别

```
main called c set to "a"
-main called c set to "b"
--main called c set to "c"
---eof
---return
--print "c"
--return
-print "b"
-return
print "a"
return 
```

# javascript - jQuery追加如果定义

> ID：16132915
> 
> 赞同：1
> 
> 时间：2013-04-21T15:38:57.877
> 
> 标签：javascript, jquery

仅当电话存在时我将如何进行此附加，如果电话不存在则跳过

```
for (var i in data.businesses) {
    $('body').append( "<p>" + data.businesses[i].telephone + "</p>");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:42:38.083

尝试

```
$.each(data.businesses, function(index, business){
    if(business.telephone){
        $('body').append( "<p>" + business.telephone + "</p>");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:45:46.610

```
for (var i in data.businesses) {
    if(data.businesses[i].telephone)
        $('body').append( "<p>" + data.businesses[i].telephone + "</p>");
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:42:40.300

尝试这个：

```
for (var i in data.businesses) {
    if(data.businesses[i].telephone  !== null and data.businesses[i].telephone !== undefined) {
        $('body').append( "<p>" + data.businesses[i].telephone + "</p>");
    }
} 
```

# jquery - 如何将多个站点更新到最新版本的 jQuery？

> ID：16132916
> 
> 赞同：0
> 
> 时间：2013-04-21T15:39:03.377
> 
> 标签：jquery, jquery-ui, versioning, cdn

我最近在某处读到“使用 jQuery-latest 被认为是有害的”。

这个讨论也涉及这个问题：

[是否有指向 Google API 上“最新”jQuery 库的链接？](https://stackoverflow.com/questions/441412/is-there-a-link-to-the-latest-jquery-library-on-google-apis)

所以我对使用它（“最新”）持谨慎态度，但处理新版本的首选方式是什么？除了没有缓存库的缺点（性能拖累）之外，“最新”似乎是一件轻而易举的事。当然，还有一个考虑因素是您希望针对新库测试您的代码，而不仅仅是盲目/自动升级。

所以...当您*确实*想升级使用的 jQuery 版本（以及 jQuery-*，例如 jQueryUI）时，您如何以一种不乏味的方式进行此操作？例如，如果您有 42 个站点要从 1.9.2 版本升级到 2.0.0 版本，您是手动编辑 42 个文件，还是有一些工具可以为您完成这项工作？显然，您可以根据您使用的技术编写一个脚本来为您执行此操作，但我认为必须有一种通用的方法来处理/解决这项工作，因为这是由数以百万计的人完成的每次发布新版本的 jQuery 时，开发人员都会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:47:26.757

`Obviously, you can write a script, depending on which technology you're using, to do this for you`.

这是真的，但是由于您没有向我们提供足够的信息，因此我无法向您提供脚本。

可能最好的方法是使用 jQuery 代码将**所有**站点链接到一个页面（例如，*yourwebsite.com/jquery.js*）。这样，您需要做的就是在一个站点上更新单个 jquery.js，它们都已更新。

至于目前更新它们，您可能需要手动或脚本来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:46:44.970

您可以使用服务器端包含从您的服务器中包含一个文件，该文件定义了您的所有依赖项 - jQuery、Modernizr 等等。这假设您的所有站点都有服务器端代码并​​使用类似的库。这将让您更改一次，并使其出现在所有 42 个站点中。

# javascript - 设计一个 javascript 表单让用户“在线签名”？

> ID：16132919
> 
> 赞同：0
> 
> 时间：2013-04-21T15:39:19.167
> 
> 标签：javascript, html, css

我正在构建一个简单的界面，通过提供用户可以在其上放置姓名以开始注册的行来复制“签署”文档的想法。我正在尝试找到某种方式为用户提供一个很好的书写线条，而不是标准框。有谁知道实现这一目标的任何技巧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:41:25.623

您可以像这样设置输入框的样式：

```
<input type="text" class="linebox" />

.linebox{
    border: none;
    border-bottom: 1px solid black;
} 
```

# mysql - 用 IN 子句替换 AND 条件 - Mysql

> ID：16132920
> 
> 赞同：-1
> 
> 时间：2013-04-21T15:39:36.403
> 
> 标签：mysql, sql

我们使用`IN`子句来替换许多`OR`条件。
像，我可以有任何其他条款来代替许多`AND`条件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:50:01.433

我认为您正在寻找此查询的替代方法，

```
SELECT  ID
FROM    TableName
WHERE   col = 1 AND col = 2 AND col = 3 
```

这将给出空结果集，因为一条记录一次只能有一个值。这应该写成：

```
SELECT  ID
FROM    TableName
WHERE   col IN (1, 2, 3)
GROUP   BY ID
HAVING  COUNT(*) = 3 
```

[关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:43:05.940

那没有意义：

```
YourColumn AND_IN (1,2,3) 
```

这永远不会是真的，因为一列不能同时是两个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:43:38.657

不，

那是因为一个字段不会有多个值。

例如。

你永远不会写一个查询说

```
SELECT * 
FROM
tblName
WHERE 
fldCol = 1
AND fldCol = 2
AND fldCol = 3; 
```

# shell - 在输出中输出标准输入和标准输出的方法

> ID：16132922
> 
> 赞同：0
> 
> 时间：2013-04-21T15:39:57.350
> 
> 标签：shell, stdout, stdin

我需要一种简单的方法来捕获发出的命令（从脚本）和生成的输出到日志文件。

这是一个简单的例子： 命令：

```
grep '^#PermitRootLogin' /etc/ssh/sshd_config 
```

输出：

```
#PermitRootLogin no 
```

要求的结果：

```
grep '^#PermitRootLogin' /etc/ssh/sshd_config
  PermitRootLogin no 
```

通过重定向标准输入，我似乎踩到了标准输出；它不应该那么困难，但由于某种原因它躲避了我。

使用 tee 只会创建一个带有外来噪音的日志文件；我想在最后使用该文件进行报告（无噪音）。

提前致谢，

TT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:32:10.537

将您想要的行为包装在一个函数中，即

```
function stomp {
    echo $@
    eval $@
} 
```

然后这样称呼它

```
stomp grep '^#PermitRootLogin' /etc/ssh/sshd_config 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:48:27.977

有一个`script`实用程序，它将记录您键入的所有内容以及任何程序输出到 stdout 的文件中名为`typescript`. 但是，它*非常*彻底，并且还记录了所有换行符和换行符以及 shell 的所有提示，因此您很可能希望将`typescript`.

也许更容易

```
echo "grep '^#PermitRootLogin' /etc/ssh/sshd_config" > file
grep '^#PermitRootLogin' /etc/ssh/sshd_config >> file 
```

然后你有命令和它的输出`file`。

# java - Java indexof() 搜索

> ID：16132930
> 
> 赞同：2
> 
> 时间：2013-04-21T15:41:00.747
> 
> 标签：java, search, linked-list

我有一个`LinkedList`包含多个相同类型的自定义对象的 java。

```
LinkedList<myClass> = new LinkedList<myClass>(); 
```

在我的对象中，我有一个特定的价值

```
class myClass(){
    public int id;
} 
```

我希望能够返回链接列表的索引以匹配特定值，即：*查找对象 id = 7 的 LinkedList 索引*

我已经研究过使用`indexof`、`contains`和`containsall`，但没有任何运气（索引总是返回-1）。

这是我可以用预构建库做的事情，还是我必须为自定义对象扩展我自己的搜索功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:44:22.320

覆盖类`equals`上的方法，`myClass`以便`LinkedList`可以找到对象：

```
public class myClass {
    private int id; //it should be private, not public
    //other attributes...
    //getters and setters...

    @Override
    public void equals(Object o) {
        if (o == null) return false;
        if (o == this) return true;
        if (o instanceof myClass) {
            myClass x = (myClass)x;
            return x.getId() == this.id;
        }
        return false;
    }
} 
```

由于您正在覆盖`equals`，您还应该覆盖该[`hashCode`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)方法：

```
@Override
public int hashCode() {
    return this.id;
} 
```

其原因在`Object`javadoc 类中进行了解释：

> 请注意，每当重写该方法时，通常都需要重写 hashCode 方法，以维护 hashCode 方法的一般约定，即相等的对象必须具有相等的哈希码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:45:11.817

这可以根据`List`'s方法来实现，您所`indexOf()`要做的就是覆盖`equals()`并指定必须使用属性进行比较（[这里](https://stackoverflow.com/a/27609/201359)解释了为什么需要覆盖这两种方法）。只需将此方法添加到：`hashChode()``myClass``id``myClass`

```
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    myClass other = (myClass) obj;
    if (id != other.id)
        return false;
    return true;
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + id;
    return result;
} 
```

现在要查找元素的索引，`id == 7`请执行以下操作：

```
int idx = myList.indexOf(new myClass(7)); 
```

也就是说，假设存在一个`myClass`以`id`为参数的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:45:34.663

也许你应该简单地将你的对象存储在一个你将一个对象作为带有键的值放入其中。如果您想搜索一个对象，您只需通过密钥获取它。因此，例如，您使用您的课程并使用 objectID 作为键（如果它是唯一的）。[`HashMap<key,value>`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

```
HashMap<Integer, myClass> list = new HashMap<Integer, myClass>();
list.put(newId, new MyClass(newId)); //just an example! 
```

现在要找到它，您只需要这样一行：

```
list.get(newId); 
```

如果`newId`不存在的话`return null`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T15:45:50.737

LinkedList 使用它们的 equals() 方法比较 Object。因此，如果您希望类的两个实例在具有相同 ID 时被视为相等，则必须重写 equals() 方法：

```
@Override
public boolean equals(Object o) {
    if (o == this) {
        return true;
    }
    if (o == null) {
        return false;
    }
    if (o.getClass() == this.getClass()) {
        return this.id == ((MyClass) o).id;
    }
    return false;
} 
```

当覆盖 equals() 时，hashCode() 也必须被覆盖，因为两个 equals 对象必须具有相同的 hashCode：

```
@Override
public int hashCode() {
    return id;
} 
```

请注意，如果您不希望两个实例在具有相同 ID 时被视为相等，那么您别无选择，只能迭代列表并找到与您要查找的实例具有相同 ID 的第一个元素。或者您必须使用其他数据结构，例如 a `Map<Integer, MyClass>`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-20T11:37:58.293

你可以这样做

```
 list.indexOf(new Object() {
        @Override
        public boolean equals(Object o) {
            MyClass mine = (MyClass) o;
            return mine.id == yourValue;
        }
    }); 
```

# arrays - 如何初始化列表的数组

> ID：16132932
> 
> 赞同：0
> 
> 时间：2013-04-21T15:41:06.477
> 
> 标签：arrays, arraylist, jmonkeyengine, nurbs

我正在学习使用 JMonkey api 构建表面。该类`Surface`有一个方法

```
 createNurbsSurface(controlPoints, nurbKnots, uSegments, vSegments, basisUFunctionDegree, basisVFunctionDegree). 
```

我试图做一个简单的例子来理解论点的含义。但是，我无法初始化第二个参数：

```
List<Float>[] nurbKnots 
```

我试过了：

```
List<Float>[] nurbKnots = {new ArrayList<Float>()}; 
```

但它抱怨你不能创建一个通用数组`List<Float>.`

有人可以告诉我如何初始化这个`nurbKnots.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:50:44.630

它适用于非泛型`List`：

```
List[] listNonGeneric = new ArrayList[10]; 
```

但这不起作用：

```
List<Float>[] listGeneric = new ArrayList<Float>[10]; 
```

你必须使用：

```
List<List<Float>> nurbKnots = new ArrayList<>(); 
```

并将参数传递为

```
(List<Float>[])nurbKnots.toArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:46:07.277

一位朋友帮忙。他告诉我：

> 在 Java 中，实际上不可能（安全地）拥有泛型类型的数组。您必须允许未经检查的分配。就像是：

```
@SuppressWarnings("unchecked")
List<Float>[] f = new List[2];
f[0] = new ArrayList<Float>();
f[0].add(0.1);
f[1] = new ArrayList<Float>();
f[1].add(0.2); 
```

但是，它奏效了！

# iphone - 根据最顶层/最后一个子视图旋转？

> ID：16132933
> 
> 赞同：0
> 
> 时间：2013-04-21T15:41:07.057
> 
> 标签：iphone, ios, objective-c, ios5, ios6

我有一个 UITabController 通过成为窗口的子视图来显示（然后动画滑入）：

```
 [self.window addSubview:tabController.view];

    CGRect endFrame = tabController.view.frame;

    CGRect startFrame = tabController.view.frame;
    startFrame.origin.y += [[UIScreen mainScreen] bounds].size.height;
    tabController.view.frame = startFrame;

    [UIView animateWithDuration:.5 animations:^{
        tabController.view.frame = endFrame;
    }]; 
```

我的问题是我希望这个子视图根本不旋转，并且只是纵向的。尽管 在 my 的子视图`shouldAutorotateToInterfaceOrientation`中`shouldAutoRotate`返回 false `UITabController`，但它的一部分仍然旋转 - 比如状态栏和`UINavigationBar`更改大小。

有没有办法解决这个问题，或者只是一种更好的做事方式？也许是一种强制状态栏旋转和`UINavigationBar`高度的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:58:22.450

在您的 UITabController 中定义以下内容：

```
- (UIInterfaceOrientation) supportedInterfaceOrientations
{ return UIInterfaceOrientationPortrain; } 
```

来自 iOS 文档：

> **声明首选的呈现方向** 当视图控制器全屏呈现以显示其内容时，有时当以特定方向查看时内容看起来最好。如果内容只能以该方向显示，那么您只需将其作为 `supportedInterfaceOrientations`方法中的唯一方向返回。

# r - 如何使用combn的结果和一个数据框来得到一个新的矩阵？

> ID：16132940
> 
> 赞同：2
> 
> 时间：2013-04-21T15:41:51.377
> 
> 标签：r

这是我的数据框：

> ```
> V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15  
> 1   1  1  1  1  1  1  1  1  1   1   1   1   1   1   1  
> 2   1  1  1  1  1  1  1 -1 -1  -1  -1  -1  -1  -1  -1  
> 3   1  1  1 -1 -1 -1 -1  1  1   1   1  -1  -1  -1  -1 
> 4   1  1  1 -1 -1 -1 -1 -1 -1  -1  -1   1   1   1   1  
> 5   1 -1 -1  1  1 -1 -1  1  1  -1  -1   1   1  -1  -1  
> 6   1 -1 -1  1  1 -1 -1 -1 -1   1   1  -1  -1   1   1  
> 7   1 -1 -1 -1 -1  1  1  1  1  -1  -1  -1  -1   1   1  
> 8   1 -1 -1 -1 -1  1  1 -1 -1   1   1   1   1  -1  -1  
> 9  -1  1 -1  1 -1  1 -1  1 -1   1  -1   1  -1   1  -1  
> 10 -1  1 -1  1 -1  1 -1 -1  1  -1   1  -1   1  -1   1  
> 11 -1  1 -1 -1  1 -1  1  1 -1   1  -1  -1   1  -1   1  
> 12 -1  1 -1 -1  1 -1  1 -1  1  -1   1   1  -1   1  -1  
> 13 -1 -1  1  1 -1 -1  1  1 -1  -1   1   1  -1  -1   1 
> 14 -1 -1  1  1 -1 -1  1 -1  1   1  -1  -1   1   1  -1  
> 15 -1 -1  1 -1  1  1 -1  1 -1  -1   1  -1   1   1  -1  
> 16 -1 -1  1 -1  1  1 -1 -1  1   1  -1   1  -1  -1   1 
> ```

首先，我`combn(4:15, 3)`用来计算组合。

像这样：

> ```
>  [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] ....      [,220] 
> [1,]    4    4    4    4    4    4    4    4    4     4     4     4     4 ....         13 
> [2,]    5    5    5    5    5    5    5    5    5     5     6     6     6 ....         14  
> [3,]    6    7    8    9   10   11   12   13   14    15     7     8     9 ....         15 
> ```

我的问题是：如何使用结果`combn(4:15, 3)`和我的数据集来获得大量矩阵？（在这种情况下，我需要 220 个矩阵，因为有 220 个组合。）

以第一种组合为例，第一种组合是：

```
 [,1]   
[1,]    4      
[2,]    5      
[3,]    6 
```

所以我从我的数据框中取出第 4 列、第 5 列和第 6 列来得到一个像这样的新矩阵：

```
 V4 V5 V6 
1  1  1  1 
2  1  1  1   
3  1 -1 -1 
4  1 -1 -1  
5  -1  1  1 
6  -1  1  1 
7  -1 -1 -1 
8  -1 -1 -1 
9  -1  1 -1 
10 -1  1 -1  
11 -1 -1  1 
12 -1 -1  1 
13  1  1 -1 
14  1  1 -1 
15  1 -1  1  
16  1 -1  1 
```

有没有人有一些简单的代码来做到这一点？感谢大家的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T15:48:58.877

`combn`有一个函数参数，所以你可以简单地做：

```
output <- combn(4:15, 3, FUN = function(x) mydf[x], simplify = FALSE) 
```

这会产生一个`list`s `data.frame`。这是第一个：

```
output[[1]]
#    V4 V5 V6
# 1   1  1  1
# 2   1  1  1
# 3  -1 -1 -1
# 4  -1 -1 -1
# 5   1  1 -1
# 6   1  1 -1
# 7  -1 -1  1
# 8  -1 -1  1
# 9   1 -1  1
# 10  1 -1  1
# 11 -1  1 -1
# 12 -1  1 -1
# 13  1 -1 -1
# 14  1 -1 -1
# 15 -1  1  1
# 16 -1  1  1 
```

第 220 条：

```
output[[220]]
#    V13 V14 V15
# 1    1   1   1
# 2   -1  -1  -1
# 3   -1  -1  -1
# 4    1   1   1
# 5    1  -1  -1
# 6   -1   1   1
# 7   -1   1   1
# 8    1  -1  -1
# 9   -1   1  -1
# 10   1  -1   1
# 11   1  -1   1
# 12  -1   1  -1
# 13  -1  -1   1
# 14   1   1  -1
# 15   1   1  -1
# 16  -1  -1   1 
```

* * *

为了比较，这`combn`本身就是：

```
> temp <- combn(4:15, 3)
> ncol(temp)
[1] 220
> temp[, 1]
[1] 4 5 6
> temp[, 220]
[1] 13 14 15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:05:03.450

您快到了，只需将每一列用作数据框的索引。

```
df <- your.data.frame
idx <- combn(4:15, 3)

## first
df[idx[,1]]

## 19th
df[idx[,19]] 
```

# android - 使用 Robotium 的 Android Maven Instrumentation 测试返回 IllegalAccessError

> ID：16132941
> 
> 赞同：2
> 
> 时间：2013-04-21T15:41:53.317
> 
> 标签：android, maven, robotium, android-testing

我有我的 android 应用程序集成测试。当我尝试从 Maven 运行它们时，出现以下错误。[我在这里](https://stackoverflow.com/questions/14839162/instrumentation-run-failed-due-to-java-lang-illegalaccesserror "这里")读到我应该使用`<scope>provieded</scope>`，但后来我得到了编译错误，比如“找不到包”......

附加集成测试 pom.xml。

```
[INFO] --- android-maven-plugin:3.5.3:internal-integration-test (default-internal-integration-test) @ md-lt-tests ---
[INFO] Found 1 devices connected with the Android Debug Bridge
[INFO] android.device parameter not set, using all attached devices
[INFO] Emulator emulator-5554_Test_unknown_sdk found.
[INFO] emulator-5554_Test_unknown_sdk :   Running instrumentation tests in lt.ito.md.tests
[INFO] emulator-5554_Test_unknown_sdk :     Run started: lt.md.md.tests, 0 tests:
[INFO] emulator-5554_Test_unknown_sdk :     Run failed: Instrumentation run failed due to 'java.lang.IllegalAccessError'
[INFO] emulator-5554_Test_unknown_sdk :     Run ended: 0 ms
[INFO]   Tests run: 0,  Failures: 0,  Errors: 0
[INFO] emulator-5554_Test_unknown_sdk :   Report file written to /home/martynas/work/md-android/md/lt/lt-tests/target/surefire-reports/TEST-emulator-5554_Test_unknown_sdk.xml
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:20.297s
[INFO] Finished at: Sun Apr 21 18:31:30 EEST 2013
[INFO] Final Memory: 22M/307M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.5.3:internal-integration-test (default-internal-integration-test) on project md-lt-tests: emulator-5554_Test_unknown_sdk :   Test run failed to complete: Instrumentation run failed due to 'java.lang.IllegalAccessError' 
```

集成测试项目 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>company</groupId>
        <artifactId>md-lt</artifactId>
        <version>1.5.4</version>
        <relativePath>../pom.xml</relativePath>
    </parent>

    <artifactId>md-lt-tests</artifactId>
    <packaging>apk</packaging>

    <dependencies>
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>md-lt-app</artifactId>
            <version>${project.version}</version>
            <type>apk</type>
        </dependency>
        <dependency>
            <groupId>com.jayway.android.robotium</groupId>
            <artifactId>robotium-solo</artifactId>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>android</groupId>
            <artifactId>android</artifactId>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
    <sourceDirectory>src</sourceDirectory>
        <finalName>${project.artifactId}</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.5.3</version>
                <extensions>true</extensions>
                <configuration>
                    <sdk>
                        <platform>${android.platform.version}</platform>
                    </sdk>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:09:01.180

[在这里](https://groups.google.com/forum/?fromgroups=#!topic/maven-android-developers/ULS_Di5DePA "Android Maven Plugin Google groups")找到解决方案

测试项目应该同时具有`apk`和`jar`依赖关系并且两者都应该具有`<scope>provided</scope>`

```
<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>md-lt-app</artifactId>
    <version>${project.version}</version>
    <scope>provied</scope>
    <type>apk</type>
</dependency>
<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>md-lt-app</artifactId>
    <version>${project.version}</version>
    <scope>provied</scope>
    <type>jar</type>
</dependency> 
```

# c# - 使用 INotify 绑定到 Brush 属性

> ID：16132945
> 
> 赞同：1
> 
> 时间：2013-04-21T15:42:02.603
> 
> 标签：c#, wpf, xaml, binding

当我尝试将标签的前景绑定到实现 INotify 的画笔属性 (CurrentBrush) 时，当 CurrentBrush 的值更改时，前景不会更新。我在这里完成了其他绑定进行测试，它们似乎工作正常，这只是 Brush 属性。

最初，标签的前景是洋红色，这表明绑定至少可以工作一次。关于为什么它不会在后续更改中更新（例如，单击按钮时）的任何想法？

（我实际上在一个更大的项目中遇到了这个问题，我将颜色选择器控件的 SelectedColor 绑定到元素的 Stroke 属性（这是一个画笔）。它不起作用，所以我试图隔离可能是什么导致问题，这就是我最终的结果 - 任何帮助将不胜感激！）

xml:

```
<Label Content="Testing Testing 123" Name="label1" VerticalAlignment="Top" />
<Button Content="Button" Name="button1" Click="button1_Click" /> 
```

这是背后的代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private Brush _currentBrush;
    public Brush CurrentBrush
    {
        get { return _currentBrush; }
        set
        {
            _currentBrush = value;
            OnPropertyChanged("CurrentBrush");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));

    }

    public MainWindow()
    {
        InitializeComponent();
        CurrentBrush = Brushes.Magenta;
        Binding binding = new Binding();
        binding.Source = CurrentBrush;
        label1.SetBinding(Label.ForegroundProperty, binding);
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        CurrentBrush = Brushes.Black;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:35:20.630

定义绑定源意味着UI会监听该源中的变化，这就是为什么当您将CurrentBrush更改为其他颜色时不会影响UI以避免您可以设置画笔的颜色，这样源保持不变对象，您只需修改属性：

设置画笔 - 你不能使用 Brushes.Magenta 因为他的属性是只读的（它是一个冻结的画笔）

```
 CurrentBrush = new SolidColorBrush(Colors.Magenta); 
```

换颜色：

```
 private void buttonBrush_Click(object sender, RoutedEventArgs e)
   {
       (CurrentBrush as SolidColorBrush).Color = Colors.Black;
   } 
```

# symfony - 如何选择表单助手中的项目

> ID：16132956
> 
> 赞同：0
> 
> 时间：2013-04-21T15:43:23.680
> 
> 标签：symfony, sonata-admin

我想知道如何深入使用表单助手

给定，有一个这样的表

```
ID |student |sex
1  | bob    | 2
2  | kayo   | 1 
3  | ken    | 2

protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
       ->add('student') 
```

此代码显示显示选择框

```
<option> bob</option>
<option> kayo</option>
<option> ken</option> 
```

但我只想显示性别为 2 的候选人

```
<option> bob</option>
<option> ken</option> 
```

我怎样才能做到这一点？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:40:53.777

我不使用 SonataAdminBundle 但我认为您可以这样做，因为它使用 Symfony[实体类型](http://symfony.com/doc/current/reference/forms/types/entity.html#query-builder)，因此您的代码应如下所示：

```
$formMapper
   ->add(
       'student',
       'entity',
       array(
           'query_builder' => function (\Doctrine\ORM\EntityRepository $rep) {
                return $rep
                    ->createQueryBuilder('s')
                    ->where('s.sex = 2')
                ;
           }
       )
   )
; 
```

# c# - e.ChosenPhoto 中的 Base64 显然已损坏

> ID：16132959
> 
> 赞同：2
> 
> 时间：2013-04-21T15:43:32.650
> 
> 标签：c#, windows-phone-7, imgur

```
 //convert photo to baos
            var memoryStream = new System.IO.MemoryStream();
            e.ChosenPhoto.CopyTo(memoryStream);
            //string baos = memoryStream.ToString();
            byte[] result = memoryStream.ToArray();
            String base64 = System.Convert.ToBase64String(result);
            String post_data = "&image=" + base64;
            ...
            wc.UploadStringAsync(imgur_api,"POST",post_data); 
```

我正在使用此代码使用 WebClient 将图像上传到 Imgur API v3。选择的图像是 Windows Phone 7.1 模拟器提供的 7 张照片之一，或者是模拟的相机图像。当我尝试加载图像时，它们大部分是灰色的损坏的混乱。我是否正确生成了 base64 和/或在创建 byte[] 和 base64 之前是否需要先渲染图片的位图？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T18:46:34.110

使用类似的东西`Uri.EscapeDataString`来转义数据，这样特殊的 URL 字符就不会被解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:43:02.623

我用这个

```
 private void PhotoChooserTaskCompleted(object sender, PhotoResult e)
    {
        if (e.TaskResult != TaskResult.OK) return;
        var bimg = new BitmapImage();
        bimg.SetSource(e.ChosenPhoto);
        var sbytedata = ReadToEnd(e.ChosenPhoto);
    }

 public static byte[] ReadToEnd(System.IO.Stream stream)
    {
        long originalPosition = stream.Position;
        stream.Position = 0;

        try
        {
            byte[] readBuffer = new byte[4096];

            int totalBytesRead = 0;
            int bytesRead;

            while ((bytesRead = stream.Read(readBuffer, totalBytesRead, readBuffer.Length - totalBytesRead)) > 0)
            {
                totalBytesRead += bytesRead;

                if (totalBytesRead == readBuffer.Length)
                {
                    int nextByte = stream.ReadByte();
                    if (nextByte != -1)
                    {
                        byte[] temp = new byte[readBuffer.Length * 2];
                        Buffer.BlockCopy(readBuffer, 0, temp, 0, readBuffer.Length);
                        Buffer.SetByte(temp, totalBytesRead, (byte)nextByte);
                        readBuffer = temp;
                        totalBytesRead++;
                    }
                }
            }

            byte[] buffer = readBuffer;
            if (readBuffer.Length != totalBytesRead)
            {
                buffer = new byte[totalBytesRead];
                Buffer.BlockCopy(readBuffer, 0, buffer, 0, totalBytesRead);
            }
            return buffer;
        }
        finally
        {
            stream.Position = originalPosition;
        }
    } 
```

并上传`byte[]`到服务器。希望有帮助

# c++ - 查找向量中的重复元素

> ID：16132964
> 
> 赞同：3
> 
> 时间：2013-04-21T15:44:01.540
> 
> 标签：c++, stl

我有一个向量，它包含元素的标识符以及 x 和 Y 坐标。我想要做的是检查它们是否具有相同的 x 和 y 坐标？- 如果他们确实删除了其中一个（基于另一个字段）。

但是，我确实在 Google 上找到了有关“唯一”功能的信息，因为所有标识符都是唯一的，这不起作用吗？正确的？

我正在考虑使用嵌套的 for 循环比较向量中的每个项目，有没有更好的方法？

谢谢J

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T16:11:27.077

我只是继续写了一些示例。我希望它有所帮助。

```
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <iterator>

using namespace std;

// Sample coordinate class 
class P {
public:
    int x;
    int y;
    P() : x(0), y(0) {}
    P(int i, int j) : x(i), y(j) {}
};

// Just for printing out
std::ostream& operator<<(ostream& o, const P& p) {
    cout << p.x << " " << p.y << endl;
    return o;
}

// Tells us if one P is less than the other
bool less_comp(const P& p1, const P& p2) {

    if(p1.x > p2.x)
        return false;
    if(p1.x < p2.x)
        return true;

    // x's are equal if we reach here.
    if(p1.y > p2.y)
        return false;
    if(p1.y < p2.y)
        return true;

    // both coordinates equal if we reach here.
    return false;
}

// Self explanatory
bool equal_comp(const P& p1, const P& p2) {

    if(p1.x == p2.x && p1.y == p2.y) 
        return true;

    return false;
}

int main()
{

  vector<P> v;
  v.push_back(P(1,2));
  v.push_back(P(1,3));
  v.push_back(P(1,2));
  v.push_back(P(1,4));

  // Sort the vector. Need for std::unique to work.
  std::sort(v.begin(), v.end(), less_comp);

  // Collect all the unique values to the front.
  std::vector<P>::iterator it;
  it = std::unique(v.begin(), v.end(), equal_comp);
  // Resize the vector. Some elements might have been pushed to the end.
  v.resize( std::distance(v.begin(),it) );

  // Print out.
  std::copy(v.begin(), v.end(), ostream_iterator<P>(cout, "\n"));

} 
```

* * *

> 1 2
> 
> 1 3
> 
> 1 4

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T15:59:40.670

您可以使用[std::unique](http://www.cplusplus.com/reference/algorithm/unique)丢弃重复项。但是，这不允许您对已删除的元素执行任何操作。它们只是从容器中掉落。当你需要这样做时，你可以使用这种方法：

将[vector.sort](http://www.cplusplus.com/reference/algorithm/sort/)与自定义比较函数一起使用，该函数比较 x 和 y 坐标。然后迭代向量一次，将每个元素与前一个元素进行比较。

当您不想更改向量的顺序时，您还可以从头到尾迭代向量，并将每个元素与具有更高索引的所有元素进行比较：

```
for (int i = 0; i < vector.size(); i++) {
    Position current = vector.at(i);
    for (int j = i+1; j < vector.size(); j++) {
         if current.isEqualPosition(vector.at(j)) {
             // found a duplicate
         }
    }
} 
```

顺便说一句：根据您的确切要求，在二维空间中处理对象的更好方法可能是自定义数据结构，如[二维树](http://en.wikipedia.org/wiki/K-d_tree)。

# iphone - 强制横向 iOS 6

> ID：16132965
> 
> 赞同：2
> 
> 时间：2013-04-21T15:44:04.467
> 
> 标签：iphone, ios, objective-c, rotation

我希望在我的应用程序中有一个视图具有横向方向。我已经设法让视图在手动旋转时保持在横向，但是如果设备已经是纵向的，则无论其支持的方向如何（使用`supportedInterfaceOrientations`方法设置），它都会保持纵向。有没有办法让视图自动旋转？我努力了：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:NO]; 
```

但这不起作用。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:05:01.777

做到这一点的一种方法是覆盖`preferredInterfaceOrientationForPresentation`，但为了被称为​​ viewController 必须**呈现（如在模式中），而不是像**[这里](https://stackoverflow.com/a/12897383/1262527)提到的那样推送：

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    NSLog(@" preferred called");
    return UIInterfaceOrientationPortrait;
} 
```

为了在 UINavigationController 中显示您的 viewController，请使用：

```
UINavigationController *presentedNavController = [[UINavigationController alloc] initWithRootViewController:protraitViewController];

[self presentViewController:presentedNavController animated:YES completion:nil]; 
```

为了使 UINavigationController 尊重您当前的 viewController 的方向偏好，请使用这个简单的[类别](https://stackoverflow.com/a/12539784/1262527)而不是子类。

此外，Apple 文档的这一[部分](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)对于更好地理解 iOS 方向处理来说是一本很好的读物。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T15:51:35.877

在 UIViewController 中为您的纯横向视图定义以下内容：

```
- (UIInterfaceOrientation) supportedInterfaceOrientations
{ return UIInterfaceOrientationLandscapeLeft; } // or right or both 
```

这应该可以防止您的视图以纵向显示。来自 iOS 文档：

> **声明首选的呈现方向** 当视图控制器全屏呈现以显示其内容时，有时当以特定方向查看时内容看起来最好。如果内容只能以该方向显示，那么您只需将其作为 `supportedInterfaceOrientations`方法中的唯一方向返回。

# android - 在 Activity1 中从 Activity2 调用方法

> ID：16132967
> 
> 赞同：-3
> 
> 时间：2013-04-21T15:44:17.643
> 
> 标签：android, class, methods, android-activity

我有两个课程/活动：

*头等舱：*

```
public class FirstClass extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
  }
  public void addData(String filename, String data); {
    SecondClass second = new SecondClass();
    second.save(name, data);
  }
} 
```

*二等：*

```
public class SecondClass extends Activity {
  public void save(String filename, String data) {
    try {
      FileOutputStream fos = openFileOutput(filename, Context.MODE_PRIVATE);
      fos.write(data.getBytes());
      fos.close();
    } catch (FileNotFoundException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
  }
} 
```

如您所见，我想做的是从`SecondClass`in调用一个方法`FirstClass`。该方法将一些数据保存到内部存储中。

这样做的正确方法是什么？我知道我可能应该对 做点什么`Context`，但我不知道具体是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:47:08.830

使它成为一个简单的java类。

```
public class ThirdClass
{
    public void save(String filename, String data, Context context)
    {
        try {
            FileOutputStream fos = context.openFileOutput(filename,Context.MODE_PRIVATE);
            fos.write(data.getBytes());
            fos.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

像在您的第一个活动中一样调用此方法。

```
ThirdClass third= new ThirdClass();
third.save(name, data,this); 
```

替代方案如果您不想参加第三类并想使用第二类。然后将此保存方法设为静态。

```
public class SecondClass extends Activity
{
    //Oncreate method....

    public static void save(String filename, String data)
    {
        try {
            FileOutputStream fos = openFileOutput(filename,Context.MODE_PRIVATE);
            fos.write(data.getBytes());
            fos.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

并从第一个活动中调用此方法。

```
SecondClass.save(name, data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:48:27.700

制作`save`一个静态方法和/或将其移动到它自己的静态类（不是活动）。

因此，您可以使用以下方法调用它：

```
SecondClass.save(name, data); 
```

并将其定义如下：

```
public static void save(String filename, String data)
{ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:48:58.080

您应该创建一个名为 SaveHelper 之类的类，它不扩展活动并添加一个静态方法，以便您可以这样做：FileHelper.save(...)

```
public class FileHelper {
public static void save(Context context, String filename, String data) {
try {
  FileOutputStream fos = context.openFileOutput(filename, Context.MODE_PRIVATE);
  fos.write(data.getBytes());
  fos.close();
} catch (FileNotFoundException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
} catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
} 
```

} }

# c - 如何在 C 中发送 ctrl+z

> ID：16132971
> 
> 赞同：13
> 
> 时间：2013-04-21T15:44:25.817
> 
> 标签：c, character

我正在与 Arduino 合作。

我想在 C 中的一个字符串之后发送`Ctrl`+ 。我尝试截断但没有奏效。那么该怎么做呢？`z``^Z`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-28T08:05:40.313

`Ctrl`+ `Z`= 26 = `'\032'`= `'\x1A'`。任何一个反斜杠转义序列都可以写成字符串文字（但要小心十六进制转义，就好像它后面跟着一个数字或 AF 或 af，这也将被视为十六进制转义的一部分，这不是你要）。

但是，如果您在 Windows 机器上模拟终端输入（因此您希望将字符视为 EOF 指示），则需要重新考虑。这不是它的工作原理。

它可能会也可能不会用 Arduino 做你想做的事；在某种程度上，这取决于你认为它会做什么。它还取决于输入字符串是否会被视为来自终端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-18T16:48:41.257

我破解了这个，因为我需要类似的

```
#include <stdio.h>
#define CTRL(x) (#x[0]-'a'+1)
int main (void)
{
    printf("hello");
    printf("%c", CTRL(n));
    printf("%c", CTRL(z));
} 
```

希望对你有帮助 8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T08:00:13.230

我假设“截断”实际上意味着附加。

在 ASCII 中，`CTRL`+`z`是代码点 26，因此您可以简单地将其附加为字符，例如：

```
#define CTRL_Z 26
char buffer[100];
sprintf (buffer, "This is my message%c", CTRL_Z); 
```

该`sprintf`方法只是执行此操作的方法*之一*，但它们基本上都取决于您在末尾放置一个值为 26 的单个字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-12T14:59:34.310

以下应该有效：无论您要`\032`在最后写什么附加例如：

```
strcpy(InputCommand,"hi\032");
GetSerialData(InputCommand,......); //this is my own function which uses serialPuts() 
```

# internet-explorer - 在 IE 10 中使用 ms-box 垂直居中文本

> ID：16132975
> 
> 赞同：0
> 
> 时间：2013-04-21T15:44:49.507
> 
> 标签：internet-explorer, css, sass, flexbox

这是一个在框中垂直居中文本的mixin

```
@mixin box-center(){
/* Firefox */
  display:-moz-box;
  -moz-box-orient:horizontal;
  -moz-box-pack:center;
  -moz-box-align:center;

/* Safari and Chrome */
  display:-webkit-box;
  -webkit-box-orient:horizontal;
  -webkit-box-pack:center;
  -webkit-box-align:center;

  /* IE10 -Doesn't work! */
  display: -ms-box;
  -ms-box-orient:horizontal;
  -ms-box-pack:center;
  -ms-box-align:center;
} 
```

这在 Chrome 和 Firefox 中完美运行。

但是当然它在 IE 10 中不能正常工作（我还没有在旧版本的 IE 中测试过）。文本保持在顶部。

这是一个[jsfiddle](http://jsfiddle.net/EeHEp)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T15:59:56.363

IE10 没有实现 2009 年 Flexbox 规范，它实现了 2012 年 3 月的草案。

这应该是您需要的：

```
.foo {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -webkit-flex-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -webkit-flex-line-pack: center;
  -ms-flex-line-pack: center;
  -webkit-align-content: center;
  align-content: center;
} 
```

我确实有一组用于 Flexbox 的 Sass mixin，可以为您正确处理所有前缀，您现在可以免费使用： [https](https://gist.github.com/cimmanon/4461470) ://gist.github.com/cimmanon/4461470 。它们已提交给 Compass 项目，并且应该在下一个版本中可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T15:57:14.447

这在 IE 10 上对我来说很好。这是[小提琴](http://jsfiddle.net/KtCjs/1/) 截图：http: [//img189.imageshack.us/img189/9135/eae7aabb6f494aeb8410553.png](http://img189.imageshack.us/img189/9135/eae7aabb6f494aeb8410553.png)

```
display: -ms-flexbox;
-ms-flex-align: center;
-ms-flex-pack: center;
-ms-box-orient:horizontal; 
```

# android - 两个项目，工作区中的参考库

> ID：16132981
> 
> 赞同：-1
> 
> 时间：2013-04-21T15:45:15.253
> 
> 标签：android, eclipse

我做这两个步骤

额外的Android方式 需要两步：

标记您要用作库项目的项目 引用标记的项目 标记库项目

右键单击您的项目并选择属性。选择左侧的 Android 并勾选 IsLibrary 复选框。完毕。

引用标记的项目

右键单击您的项目并选择属性。选择左侧的 Android 并添加...您标记的项目。它将被添加到列表中并可以使用。现在您可以从引用的标记项目中访问所有类和资源（例如可绘制对象、字符串）。太棒了，嗯？:)

这里提到[Eclipse Android 项目，如何在工作区中引用库？](https://stackoverflow.com/questions/9283040/eclipse-android-project-how-to-reference-library-within-workspace)由 poitroae 但是......我在 locate 收到：

```
04-21 18:31:13.539: E/AndroidRuntime(19255): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.uploadvideo/com.examples.youtubeapidemo.FullscreenDemoActivity}; have you declared this activity in your AndroidManifest.xml? 
```

和活动崩溃......

我所做的是在我添加的主项目中

```
 Intent intent1 = new Intent(this,FullscreenDemoActivity.class);
             intent1.putExtra("current_url",current_url);
             startActivity(intent1); 
```

在图书馆项目中我添加

```
Intent intent= getIntent();
current_url = intent.getStringExtra("current_url"); 
```

我希望我可以用意图在这个项目之间传递

谢谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:48:28.660

我试试这个答案，它不起作用..

[无法从包含库的应用程序启动意图](https://stackoverflow.com/questions/3596884/unable-to-start-intent-from-application-containing-library)

“调用库中定义的Intent时需要指定应用程序的包：”

```
Intent serviceIntent = new Intent();
serviceIntent.setAction("org.example.library.MY_ACTION");
serviceIntent.setPackage("org.example.application");
startService(serviceIntent); 
```

# java - 过滤具有相似数据的 ArrayList

> ID：16132982
> 
> 赞同：-1
> 
> 时间：2013-04-21T15:45:18.890
> 
> 标签：java, collections, guava

我有以下课程：

```
public class School{
List<ClassRoom> classRooms;
}

public class ClassRoom{
List<Student> students;
}

public class Student{
String name;
long typeId;
} 
```

我需要让所有学生都在 typeID=123 的给定教室里

预期结果：

列出filteredStudent=classRoomList.filterByStudentTypeID(typeIdToSearchFor)

我不需要编写一些脏代码和循环。

我需要利用现有的库。我发现了谷歌番石榴。

我在 guava 找到了一种方法，它通过整个参考进行搜索......相反，我需要使用属性 typeId 进行搜索

```
Collection<Student> filtered =Collections2.filter(students, Predicates.equalTo(s1)); 
```

有任何想法吗！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:55:28.860

由于您使用的是 Guava，因此您可以使用自定义谓词：

```
final long typeIdToSearchFor = ...;
Collection<Student> filtered = Collections2.filter(students,
    new Predicate<Student>() {
        @Override
        public boolean apply(Student s) {
            return s.typeId == typeIdToSearchFor;
        }
    }
); 
```

请注意，它`typeIdToSearchFor`必须`final`在调用范围内，`filter`因为它被（匿名）`Predicate`子类引用。

# c# - 主 WPF 窗口如何知道辅助 WPF 窗口何时关闭

> ID：16132983
> 
> 赞同：0
> 
> 时间：2013-04-21T15:45:23.503
> 
> 标签：c#, wpf, window

我遇到了一个问题。我的项目中有两个 WPF 窗口，我通过按下 WPF 主窗口上的按钮打开第二个 WPF 窗口。但是当我关闭第二个窗口时，我需要第一个窗口知道发生了这种情况并采取一些措施。我怎么做这个？我尝试了 isLoaded 和 Application.Current.Windows，但它们都没有按我的需要工作。有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:58:35.357

你可以这样使用。

```
 public void CreateNewWindow()
   {
       Window wind=new Window();
       wind.Closing+=yourClosingHandler;
   }

   void yourClosingHandler(object sender, CancelEventArgs e)
   {
     //do some staff
   } 
```

# android - 如何将资源和html中的图片加载到webview中？

> ID：16132989
> 
> 赞同：0
> 
> 时间：2013-04-21T15:45:41.340
> 
> 标签：android, android-webview, android-resources, android-drawable

我希望 webview 显示资源中的图片和数据库中的 html 代码，但只有数据库中的 html 代码可以正常工作。

```
WebView wv = (WebView) findViewById(R.id.wv);
String city = "lichtenstein";
String img = "<img src =\"file://res/drawable/picture.png\" width=\"100\" height=\"100\" />";
String dbHTML = cursor.getString(cursor.getColumnIndex(Database.COLUMN_HTML));
String webdata = "<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />" + img + "<br />" + "<span style=\"color:#064896;font-weight:bold;\">" + city  + " </span>" + dbHTML;
wv.loadData(webdata, "text/html; charset=UTF-8", null); 
```

我也尝试使用资产文件夹中的图像，但这也不起作用。

```
String img = "<img src =\"file:///android_asset/picture.png\" width=\"100\" height=\"100\" />"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:39:54.930

您可以使用[loadDataWithBaseURL](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)。

```
String htmlString = <html><body><img src="file.png"></body></html>
myWebView.loadDataWithBaseURL("file:///android_asset/", htmlString, "text/html", "UTF-8", null); 
```

第一个参数，必须指向图像必须在的位置。

[资源](http://lomza.people.totem-soft.com/?p=62)

# c# - 使用 C# 将这个“”替换为这个“”

> ID：16132993
> 
> 赞同：0
> 
> 时间：2013-04-21T15:45:55.680
> 
> 标签：c#, asp.net

如果表格行为空，我的文本框中显示的这个空格“”有问题。所以我想用这个“ `&nbsp;`”替换这个“ `”。例如，这是我所拥有的：`

 ````
StartTime.Text = row.Cells[5].Text; 
```

所以这是我想要实现的伪代码：

```
if (StartTime.Text == ""&nbsp;" then replace it with "  ")
else show the value of StartTime.Text 
```

我知道我的 C# 技能太差了，所以请帮忙。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T15:50:30.313

关于什么`StartTime.Text = row.Cells[5].Text.Replace("&nbsp", " ")`

或者我没有正确理解这个问题`

# c# - 控制台应用程序和单元测试方法之间的不同垃圾收集行为

> ID：16132997
> 
> 赞同：7
> 
> 时间：2013-04-21T15:46:05.340
> 
> 标签：c#, .net, garbage-collection

`Main`我偶然发现了这样一种情况，即垃圾收集似乎在作为单元测试编写的相同代码与以控制台应用程序的方法编写的代码之间表现不同。我想知道这种差异背后的原因。

在这种情况下，我和一位同事就注册事件处理程序对垃圾收集的影响存在分歧。我认为演示会比简单地向他发送一个[高度评价的 SO 答案](https://stackoverflow.com/a/298276/1072626)的链接更好地接受。因此，我写了一个简单的演示作为单元测试。

我的单元测试表明事情按我说的那样工作。但是，我的同事编写了一个控制台应用程序，显示事情按他的方式工作，这意味着 GC 没有像我预期的那样在`Main`方法中的本地对象上发生。`Main`只需将代码从我的测试移到控制台应用程序项目的方法中，我就能够重现他看到的行为。

我想知道的是，为什么在`Main`控制台应用程序的方法中运行时，GC 似乎没有按预期收集对象。通过提取方法，使调用`GC.Collect`和超出范围的对象发生在不同的方法中，恢复了预期的行为。

这些是我用来定义我的测试的对象。只有一个带有事件的对象和一个为事件处理程序提供合适方法的对象。两者都有终结器设置一个全局变量，以便您可以知道它们何时被收集。

```
private static string Log;
public const string EventedObjectDisposed = "EventedObject disposed";
public const string HandlingObjectDisposed = "HandlingObject disposed";

private class EventedObject
{
    public event Action DoIt;

    ~EventedObject()
    {
        Log = EventedObjectDisposed;
    }

    protected virtual void OnDoIt()
    {
        Action handler = DoIt;
        if (handler != null) handler();
    }
}

private class HandlingObject
{

    ~HandlingObject()
    {
        Log = HandlingObjectDisposed;
    }

    public void Yeah()
    {
    }
} 
```

这是我的测试（NUnit），它通过了：

```
[Test]
public void TestReference()
{
    {
        HandlingObject subscriber = new HandlingObject();

        {
            {
                EventedObject publisher = new EventedObject();
                publisher.DoIt += subscriber.Yeah;
            }

            GC.Collect(GC.MaxGeneration);
            GC.WaitForPendingFinalizers();
            Thread.MemoryBarrier();

            Assert.That(Log, Is.EqualTo(EventedObjectDisposed));
        }

        //Assertion needed for foo reference, else optimization causes it to already be collected.
        Assert.IsNotNull(subscriber);
    }

    GC.Collect(GC.MaxGeneration);
    GC.WaitForPendingFinalizers();
    Thread.MemoryBarrier();

    Assert.That(Log, Is.EqualTo(HandlingObjectDisposed));
} 
```

我将上面的主体粘贴到`Main`新控制台应用程序的方法中，并将调用转换`Assert`为`Trace.Assert`调用。两个相等断言都失败然后失败。如果需要，生成的 Main 方法的代码在[这里。](http://pastebin.com/rkBW5J9X)

我确实认识到应该将 GC 何时发生视为非确定性的，并且通常应用程序不应该关心它何时发生。在所有情况下，代码都是在发布模式下编译并针对 .NET 4.5。

**编辑：我尝试过的其他事情**

*   制作测试方法`static`，因为 NUnit 支持它；测试仍然有效。
*   我还尝试将整个 Main 方法提取到程序上的实例方法中并调用它。两个断言仍然失败。
*   归因`Main`于`[STAThread]`或`[MTAThread]`以防万一[这](http://support.microsoft.com/kb/828988)有所作为。两个断言仍然失败。
*   基于@Moo-Juice 的建议：
    *   我将 NUnit 引用到控制台应用程序以便我可以使用 NUnit 断言，但它们失败了。
    *   我尝试对测试、测试的类、`Main`方法和包含`Main`静态方法的类的可见性进行各种更改。没变。
    *   我尝试将测试类设为静态，并将包含该`Main`方法的类设为静态。没变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T20:41:06.117

如果将以下代码提取到单独的方法中，则测试更有可能按照您的预期运行。编辑：请注意，C# 语言规范的措辞并不要求通过此测试，即使您将代码提取到单独的方法中也是如此。

```
 {
            EventedObject publisher = new EventedObject();
            publisher.DoIt += subscriber.Yeah;
        } 
```

规范*允许*但不要求`publisher`在此块的末尾立即有资格进行 GC，因此您不应以假设可以在此处收集的方式编写代码。

**编辑：**来自 ECMA-334（C# 语言规范）§10.9 自动内存管理（强调我的）

> 如果除了运行终结器之外，任何可能的继续执行都无法访问对象的任何部分，则该对象被视为不再使用并且它有资格进行终结。[注意：实现可能会选择分析代码以确定将来可以使用对对象的哪些引用。例如，**如果作用域内的局部变量是对对象的唯一现有引用，但从过程中的当前执行点开始的任何可能的继续执行中从未引用该局部变量，则实现可能（但不是需要）将对象视为不再使用**。尾注]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T08:11:39.450

问题不在于它是一个控制台应用程序 - 问题在于您可能通过 Visual Studio 运行它 -*附加了调试器*！和/或您正在将控制台应用程序编译为调试版本。

确保您正在编译发布版本。然后转到`Debug -> Start Without Debugging`，或按 Ctrl+F5，或从命令行运行控制台应用程序。垃圾收集器现在应该按预期运行。

这也是 Eric Lippert 在[C# Performance Benchmark Mistakes, Part One](http://tech.pro/blog/1293/c-performance-benchmark-mistakes-part-one)中提醒您不要在调试器中运行任何性能基准测试的原因。

> jit 编译器知道附加了一个调试器，它会故意对它生成的代码进行反优化，以使其更易于调试。垃圾收集器知道附加了一个调试器；它与 jit 编译器一起工作，以确保清理内存的积极性较低，这在某些情况下会极大地影响性能。

Eric 系列文章中的许多提醒都适用于您的场景。如果您有兴趣阅读更多内容，这里是[第二](http://tech.pro/tutorial/1295/c-performance-benchmark-mistakes-part-two)、[第三](http://tech.pro/tutorial/1317/c-performance-benchmark-mistakes-part-three)和[第四](http://tech.pro/tutorial/1433/performance-benchmark-mistakes-part-four)部分的链接。