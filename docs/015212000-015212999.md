# StackOverflow 问答 15212000-15212999

# pdo - PDO For Each 循环中的非法字符串偏移

> ID：15212008
> 
> 赞同：6
> 
> 时间：2013-03-04T22:02:37.667
> 
> 标签：pdo, foreach

PHP 查询：

```
<?php

    $query = $db->prepare('SELECT * FROM Locations WHERE user_id = :id LIMIT 0, 5');
    $query->bindParam(":id",$id);
    $result = $query->execute();

    $rows = $query->fetch();

    foreach ($rows as $row) {
        echo $row["timestamp"]; "<br />";
    }

?> 
```

应该打印的两行（时间戳）：

![数据库](../Images/6f160c0796434e014670ddd35980424b.png)

实际打印的内容：1188((22

控制台中的错误：PHP 警告：第 73 行 /Sites/pages/user_account.php 中的非法字符串偏移 'timestamp' - 第 73 行是 forloop 内的 echo $row...。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T22:14:26.333

您正在使用`fetch`，它检索单行，而不是`fetchAll`：

```
$rows = $query->fetchAll(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-12T04:47:35.120

你有两行（user_id = 8）

```
$rows = $query->fetchAll(); 
```

对于所有行

```
foreach ($rows as $row) {
  echo $row . "<br />";
} 
```

对于 1 行，所有列

```
while ($row = $rows) {

  foreach ($row as $column) {
    echo $column . "<br />";
  }

} 
```

# javascript - find replace not working in ie

> ID：15212010
> 
> 赞同：0
> 
> 时间：2013-03-04T22:02:45.667
> 
> 标签：javascript, jquery

Could anyone tell me why the following code doesnt work in ie? it works in every other browser and just comes up as undefined in ie:

```
var infoTemplate = '<div style="text-align:left"><h4 style="color:#0068a6;font-size:16px;margin:0px 0px 10px 0px;">%Title</h4><strong>%Tel</strong><br /><br />%Add</div>';
var seletedMarker = null;

function composeInfoString(row) {
    var $row = $(row);
    return infoTemplate.replace('%Title', $row.find('.itemtitle a').html())
        .replace('%Tel', $row.find('.tel').html())
        .replace('%Add', $row.find('.add').html());
} 
```

%Title, %Tel, %Add all come up as undefined in IE. Any help gratefully apreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:19:10.990

您必须添加 html 代码（和 IE 版本），我在 IE 10 中尝试过，没关系：

```
var a = composeInfoString('<div><div class="itemtitle"><a href="#a">aaaa</a></div><div class="tel">bbbb</div>><div class="add">cccc</div></div>');
console.log(a); 
```

结果：

```
<div style="text-align:left"><h4 style="color:#0068a6;font-size:16px;margin:0px 0px 10px 0px;">aaaa</h4><strong>bbbb</strong><br /><br />cccc</div> 
```

# vbscript - 使用 vbscript 设置权限

> ID：15212018
> 
> 赞同：0
> 
> 时间：2013-03-04T22:03:14.343
> 
> 标签：vbscript

我正在尝试向所有人授予文件夹调用 Test 的权限。如果我这样做，它会起作用

```
objShell.ShellExecute "cmd.exe","/k icacls c:\Test /grant everyone:(OI)(CI)M ", "", 
```

但如果我这样做，它不会

```
Set objShell = CreateObject("Shell.Application")
  Dim var
  var = "C:\Test"
  objShell.ShellExecute "cmd.exe", "/k icacls" & var & "/grant everyone:(OI)(CI)M ", "",  "runas", 1 
```

所以我的问题是我怎样才能让它工作请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:16:39.057

你忘记了你的空间，将它们包含在你的变量中，比如

```
var = " C:\Test " 
```

或者更好地预先并将它们附加到字符串的其余部分

```
objShell.ShellExecute "cmd.exe", "/k icacls " & var & " /grant everyone:(OI)(CI)M ", "",  "runas", 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:16:28.537

看起来是间距问题。你能试试这个吗？

```
Set objShell = CreateObject("Shell.Application")
  Dim var
  var = "C:\test"
  objShell.ShellExecute "cmd.exe", " /k icacls " & var & " /grant everyone:(OI)(CI)M ", "",  " runas ", 1 
```

# c# - EntitiesToDTOs（实体框架 DTO 生成器）是否支持延迟加载？

> ID：15212028
> 
> 赞同：0
> 
> 时间：2013-03-04T22:04:07.807
> 
> 标签：c#, entity-framework, code-generation, add-in, dto

我在父子关系中有几个实体：家庭（父）和更新（子）。我想阅读没有相应更新的家庭列表。只有 17 个家庭，但大约有 60,000 个更新，所以我真的不想要更新。

我使用[EntitiesToDTO](http://entitiestodtos.codeplex.com)从 Family 实体生成 DTO，并创建了一个用于将 Family 实体转换为 FamilyDTO 的汇编程序。汇编器的 ToDTO 方法如下所示：

```
public static FamilyDTO ToDTO(this Family entity)
{
    if (entity == null) return null;

    var dto = new FamilyDTO();

    dto.FamilyCode = entity.FamilyCode;
    dto.FamilyName = entity.FamilyName;
    dto.CreateDatetime = entity.CreateDatetime;
    dto.Updates_ID = entity.Updates.Select(p => p.ID).ToList();

    entity.OnDTO(dto);

    return dto;
} 
```

当我运行汇编程序时，我发现每个生成的 FamilyDTO 都填充了 Updates_ID 列表，尽管 EF 模型（edmx 文件）的延迟加载设置为 true。是否可以将 EntitiesToDTO 配置为支持子元素的延迟加载，还是总是使用急切加载？我在 EntitiesToDTOs 中看不到任何可以设置为在生成汇编程序时支持延迟加载的选项。

顺便说一句，我是一个更大的团队的一员，该团队几乎每天都使用[EntitiesToDTO](http://entitiestodtos.codeplex.com)来重新生成汇编器，所以如果可能的话，我宁愿不要手动修改汇编器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T00:43:35.640

我是**[EntitiesToDTOs](http://entitiestodtos.codeplex.com)**的创建者 Fabian 。

首先，**非常感谢您使用它**。

您检测到的实际上是我不希望汇编程序执行的操作，我希望开发人员仅在需要时使用部分方法**OnDTO**和**OnEntity**映射导航属性。否则你会遇到像你一样的问题。

似乎我从未使用该工具遇到过这个问题，非常感谢。

~~所以现在我正在解决这个问题。~~[它现在已在3.1 版本](http://entitiestodtos.codeplex.com/releases/view/102942)中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:10:18.187

根据您在此处发布的代码，以及我认为有人会如何实现这样的解决方案（即将记录转换为 DTO 格式），我认为您别无选择，只能进行急切加载。

一些关键点：

1）您的`Updates_ID`字段显然是一个列表，这意味着它会立即对集合进行水合（ToList 始终执行。只有常规的 IEnumerable 采用延迟执行）。

2) 如果您在 DTO 中添加任何类型的导航属性，它将自动被急切地加载。这是因为一旦你触摸了一个由 Entity Framework 带回的导航属性，框架就会自动从数据库中加载它，而不关心你想要的只是用它填充 DTO。

# eventbrite - 无法使用 Eventbrite API 方法 event_update 发布取消的事件

> ID：15212043
> 
> 赞同：0
> 
> 时间：2013-03-04T22:05:05.760
> 
> 标签：eventbrite

每个人。

我正在为我的应用程序使用 eventbrite 的 API，并尝试使用 event_update 方法更新 eventbrite 事件。当我尝试取消实时事件时，该调用有效，但当我尝试重新发布已取消的事件时它不起作用。我可以从我帐户的“我的活动”选项卡下为每个活动提供的“快速链接”发布取消的活动。所以，我想知道这是否也可以使用 API 来完成。event_update 的文档说状态字段的允许值是“draft”、“live”、“canceled”、“deleted”，但是当我进行更新时，我收到以下错误：

活动已删除或取消。

非常感谢任何帮助或输入。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:58:06.830

目前，取消的活动只能通过您帐户“我的活动”选项卡中的“快速链接”重新启用。无法通过“管理”页面或 API 使已取消的活动生效。此信息已传递给 API 团队，这应该会在未来几周内得到解决。我们会在更新后通知您！

# c# - C#序列化一个没有无参数构造函数的类

> ID：15212051
> 
> 赞同：15
> 
> 时间：2013-03-04T22:05:34.140
> 
> 标签：c#, serialization, bouncycastle

我正在为 3 个不同的密码学类实现工厂模式。工厂将确定创建哪个类，然后从数据库中获取正确类的序列化实例并将其返回给请求者。现在我正在序列化这些类以将它们存储在数据库中。我正在为一个名为`BouncyCastle`. 我可以从文件中创建类和键，但是当我尝试序列化它时，它说两个成员变量，它们是 class`PgpPublicKey`和的对象`PgpPrivateKey`，不能序列化，因为它们没有无参数的构造函数。

```
public void createdBouncyFromFiles()
{
    var bc = new BouncyCastle("C:\\TestFiles\\BouncyPublicKey.txt", "C:\\TestFiles\\BouncyPrivateKey.txt", "Password1");
    var xmlSerializer = new XmlSerializer(bc.GetType());
    var textWriter = new StringWriter();
    xmlSerializer.Serialize(textWriter, bc);
    var theSerializedClass = textWriter.ToString();
} 
```

该类有两个成员变量是问题所在。

```
public class BouncyCastle : ICryptographyProvider
{

    public PgpPublicKey m_publicKey;
    public PgpPrivateKey m_privateKey;
    public string m_passPhrase;
    // cut out the irelevant parts 
```

这是公钥类。没有无参数的构造函数。

```
public class PgpPublicKey
{
    public PgpPublicKey(PublicKeyAlgorithmTag algorithm, AsymmetricKeyParameter pubKey, DateTime time);
    // cut other methods
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-04T22:11:04.893

任何序列化程序类都需要一个无参数构造函数，因为在反序列化它时会创建一个空的新实例，然后它会复制从序列化数据中获取的每个公共属性。

如果您想避免在没有参数的情况下创建它，您可以轻松地将构造函数设为私有。

前任：

```
public class PgpPublicKey
{
    public PgpPublicKey(PublicKeyAlgorithmTag algorithm, AsymmetricKeyParameter pubKey, DateTime time);

    private PgpPublicKey();
    // cut other methods
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T22:11:11.730

是的，XmlSerializer*需要*存在无参数构造函数才能使序列化工作。

从以下答案：[Why XML-Serializable class need a parameterless constructor](https://stackoverflow.com/questions/267724/why-xml-serializable-class-need-a-parameterless-constructor)

> 在对象的反序列化过程中，负责反序列化对象的类创建序列化类的实例，然后仅在获取要填充的实例后才继续填充序列化的字段和属性。
> 
> 如果需要，您可以将构造函数设为私有或内部，只要它无参数即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-23T08:39:42.243

DataContractSerializer 不需要无参数构造函数。相反，它需要的是类的特殊属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T22:28:11.447

`PgpPublicKey`和`PgpPrivateKey`类是由你定义的吗？只需向它们添加无参数构造函数。

如果您不想让它们从外部访问，它们可以是私有的。解串器仍然可以访问它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-07T18:00:23.530

对于几年后仍在寻找的任何人，答案现在是 FormatterServices.GetUninitializedObject。小心它，因为这只是一块设置为所有空值和零的内存，如果对象的默认值中的字段不是零，它可能设置错误：“因为对象的新实例已初始化为零并且没有运行构造函数，则该对象可能不代表该对象认为有效的状态。”

# gcc - “架构 x86_64 的未定义符号：”在编译 lex 和 yacc 时

> ID：15212053
> 
> 赞同：0
> 
> 时间：2013-03-04T22:05:37.660
> 
> 标签：gcc, bison, yacc, lex

Lex 和 Yacc 工作，但是当我尝试编译 y.tab.c 文件时，我收到以下错误。我感觉它是一个链接问题，编译器找不到它需要的库，但我不知道如何修复它。

在我的 nor.y 文件中，我在顶部有这个：

```
%{
#include <stdio.h>
%} 
```

在我的 nor.l 文件中，我在顶部有这个：

```
 %{
#include "y.tab.h"
#include <stdlib.h>
extern YYSTYPE yylval;
%} 
```

然后，当我尝试编译时

```
gcc y.tab.h -ly -ll 
```

我得到错误：

```
Undefined symbols for architecture x86_64:
  "_yyparse", referenced from:
  _main in liby.a(main.o)
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:33:31.893

您需要编译 .c 文件，而不是头文件：

```
gcc y.tab.c lex.yy.c -ly -ll 
```

# razor - 在 MVC 和 WebPages 2 中使用 CreateInstanceFromVirtualPath

> ID：15212055
> 
> 赞同：0
> 
> 时间：2013-03-04T22:05:47.050
> 
> 标签：razor, asp.net-webpages

在 WebPages Razor v1 中，可以使用以下语法跨 cshtml 页面调用函数：

```
@{
    dynamic hlp = WebPage.CreateInstanceFromVirtualPath("/newhelper.cshtml");
}
@hlp.SomeHelper("foo") 
```

在 Razor v2 中是不可能的（空引用错误）。在 MVC 中也没有（这可能不那么令人惊讶）。我想知道在 Razor v2 中是否有另一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:13:03.507

不支持执行问题中显示的代码 - 它只是试图模拟一些可能与 Web Pages / Razor 编译实际发生的逻辑相同或可能不同的逻辑。

网页助手应该在 CSHTML 文件中放入`~/App_Code`. 应用程序中的所有其他视图页面都应该可以访问其中的代码。

# ios6 - UICollectionView 自定义单元格，如何在点击 UIButton 时在 segue 之前进行选择

> ID：15212060
> 
> 赞同：1
> 
> 时间：2013-03-04T22:06:35.923
> 
> 标签：ios6, uicollectionview

我在 UIViewController 中嵌入了一个 UICollectionView。我有一个自定义 UICollectionView 单元格，在 CollectionView 中有一个按钮。我想点击按钮并让它推动一个细节视图控制器并在它出现时传递一些数据。

我可以通过主视图控制器中的 prepareForSegue 轻松掌握哪个单元格

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
   NSArray *indexPaths = [self.collectionView indexPathsForSelectedItems];
    NSIndexPath *index = [indexPaths objectAtIndex:0];
    DetailController *destViewController = segue.destinationViewController;
    } 
```

如果我点击单元格本身，这将起作用。但是，我有一个想要点击的 UIButton，我需要找到一种方法来连接 indexPathsForSelectedItems ... 现在，除非我真正点击它所在的单元格，否则我的按钮将无法正常工作。在触发点击事件之前，我是否需要以编程方式选择它所在的单元格？

我该怎么做？我会在哪里做这个？在视图控制器上？或在我的自定义 UICollectionViewCell 中的点击事件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:53:24.787

Please check out the link [http://ashfurrow.com/blog/uicollectionview-example](http://ashfurrow.com/blog/uicollectionview-example).

It's not a simple example but it has the answer. And there is a link to github so you may play with it.

# django - forms.FileField() 中的 Django 错误

> ID：15212062
> 
> 赞同：2
> 
> 时间：2013-03-04T22:06:44.740
> 
> 标签：django

我的应用程序有问题。宠物商店应用程序。

我创建了 2 个表格。第一种形式允许用户创建自己的商店并将数据保存到我成功完成的模型中，第二种形式允许用户将自己的宠物添加到宠物商店。

第一个表单成功，因为它得到了正确验证，但我的第二个表单没有成功验证，因为在 PetForm 中，我有一个名为 image = forms.FileField() 的字段，用户可以在其中上传他们宠物的图片，但验证失败是因为图片不会保存在任何地方。

我试图将一个参数放入 image = forms.FileField(upload_to="images/") 但我收到一个错误

```
__init__() got an unexpected keyword argument 'upload_to' 
```

我现在正在阅读文档，上面写着“当您在表单中使用 FileField 时，您还必须记住将文件数据绑定到表单。”。

我无法理解绑定文件数据。

有人可以帮帮我吗 ！

我的表格.py

```
from django import forms
from pet.models import Store
from pet.models import Pet

class StoreForm(forms.ModelForm):
    name = forms.CharField(max_length =20,widget =forms.Textarea)
    number = forms.CharField(max_length =20,widget =forms.Textarea)
    address = forms.CharField(max_length = 20,widget = forms.Textarea)

    class Meta: 
        model = Store
        fields = ('name','number','address')

class PetForm(forms.ModelForm):
    animal =forms.CharField(max_length = 20,widget = forms.Textarea)
    description =forms.CharField(max_length =20, widget = forms.Textarea)
    owner = forms.ModelChoiceField(queryset=Store.objects.all())
    image = forms.FileField()

    class Meta:
        model = Pet
        fields = ('animal','description','owner','image') 
```

我的模型.py

```
from django.db import models

class Store(models.Model):
    name = models.CharField(max_length = 20)
    number = models.BigIntegerField()
    address =models.CharField(max_length = 20)
    def __unicode__(self):
        return self.name

class Pet(models.Model):
    animal = models.CharField(max_length =20)
    description = models.TextField()
    owner = models.ForeignKey(Store)
    image = models.FileField(upload_to="images/",blank=True,null=True)

    def __unicode__(self):
        return self.animal 
```

这是我的views.py的一部分

从 django.core.files.uploadedfile 导入 导入 SimpleUploadedFile

```
def fan(request): # this is the function that saves my form into my models.
    form = PetForm(request.POST or None)
    if form.is_valid():
        dad = form.save(commit=False)
        dad.save()
        if 'cat' in request.POST:
            cat = request.POST['next']
        else:
            cat = reverse('world:index')
        return HttpResponseRedirect(cat)
    return render_to_response(
        'fan.html',
        {'form':PetForm()},
        context_instance = RequestContext(request)
) 
```

和我的fan.html

```
<form method="POST" "action">{% csrf_token %}
    <ul>
        {{ form.as_ul }}
    </ul>
    <input type = "submit" value= "Add Pets to Store" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T00:49:10.130

因为您覆盖了您的宠物模型图像。删除表单中的图像。

```
class PetForm(forms.ModelForm):
    animal =forms.CharField(max_length = 20,widget = forms.Textarea)
    description =forms.CharField(max_length =20, widget = forms.Textarea)
    owner = forms.ModelChoiceField(queryset=Store.objects.all())

    class Meta:
        model = Pet
        fields = ('animal','description','owner','image')

//It's not necessary to defined again model field in the form. Once you call the model 
//in the form it's understood what you want to show. You can only defined the model 
//field again if you want something to add or embed in that field. Like for example you
//want to change the charfield in to textarea or you defined a queryset like you did 
//above. Erase your max_length because you are already defined that in the model. 
```

上传图片时不要忘记在表单中添加“ **multipart/form-data”**

```
<form method="POST" enctype="multipart/form-data" "action" >
    {% csrf_token %}
    <ul>
        {{ form.as_ul }}
    </ul>
    <input type = "submit" value= "Add Pets to Store" />
</form> 
```

# javascript - 为什么即使使用字符串键，数组也会保留这么多空格？

> ID：15212065
> 
> 赞同：3
> 
> 时间：2013-03-04T22:07:10.253
> 
> 标签：javascript, arrays, hashmap

我有以下数组：

```
var arr = [];
console.log(arr.length); //Output: 0

arr["1231321"] = "abcd";
console.log(arr.length); //Output: 1231322

arr["1231321".toString()] = "abcd";
console.log(arr.length); //Output: 1231322

arr["a1231321"] = "abcd";
console.log(arr.length); //Output: 0

arr["1231321a"] = "abcd";
console.log(arr.length); //Output: 0 
```

这是小提琴：http: [//jsfiddle.net/HcrcR/](http://jsfiddle.net/HcrcR/)

当我将我的 arr 更改为`var arr = {};`then 它就可以工作了。

但是即使我使用字符串键它开始从键中推送数据，它的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T22:10:21.687

> 我有以下数组/哈希图：

这是`Array`JavaScript 术语。

```
var arr = [];
console.log(arr.length); //Output: 0 
```

这是预期的，它是一个空数组。

```
arr["1231321"] = "abcd";
console.log(arr.length); //Output: 1231322 
```

`length`属性如此之大的原因总是`+1`比最高指数。使用字符串并不重要，`Array`s 和`Object`s 的键在 JavaScript 中始终是字符串。

> 此 Array 对象的长度属性是一个数据属性，其值始终在数值上大于名称为数组索引的每个可删除属性的名称。

[来源](http://es5.github.com/#x15.4.5.2)

```
arr["1231321".toString()] = "abcd";
console.log(arr.length); //Output: 1231322 
```

调用`toString()`一个字符串不会做任何事情（它已经是一个字符串）。

```
arr["a1231321"] = "abcd";
console.log(arr.length); //Output: 0 
```

还可以预料的是，您在其上设置了一个`Array`看起来不像索引的属性。

```
arr["1231321a"] = "abcd";
console.log(arr.length); //Output: 0 
```

往上看。字符串内部没有解析来尝试获取数字。

> 当我将我的 arr 更改为`var arr = {};`then 它就可以工作了。

这就是对象在 JavaScript 中的工作方式。它们只是一串值的字符串键。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T22:16:14.943

`Array != Object (or hashmap)`在 JavaScript 中。因此，添加到不是整数索引的数组的属性不会影响`Array.length`

注意没有预留空间，仅仅因为长度为1231321，并不意味着所有的空间都被分配了，JavaScript数组不必使用连续内存，稀疏的情况下通常也不需要。实际上，它们只是作为优化的连续性，默认行为是它们就像对象一样是哈希映射。

如果你需要知道一个对象的所有键，你需要使用[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)

但是，您不应该混合这两个概念，在 JS 中，您应该使用数组（数字索引）或对象（任何索引）

当你这样做

```
arr["1231321"] = "abcd"; 
```

那是一样的

```
arr[1231321] = "abcd"; 
```

这会影响`length`数组的。然而，

```
arr["1231321a"] = "abcd" 
```

不创建新的数组索引（只是一个新的对象属性）并且不影响`length`属性

请注意，如果您一个接一个地键入以下命令，则您问题中的示例不正确

```
arr = [];
arr["1231321"] = "abcd";
console.log(arr.length); //Output: 1231322
arr["a1231321"] = "abcd";
// Output: 1231322, should be the same as before, not undefined
console.log(arr.length); //Output: 1231322 
```

[http://jsfiddle.net/tWCa4/](http://jsfiddle.net/tWCa4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T22:09:18.923

它能够使用您的前 2 个字符串作为索引，因为它们能够被解析为数字。

当您将无法解析为整数的内容传递给它时，数组会将其附加为数组的属性，而不是条目。

当您将其定义为对象时，它将充当对象并将所有内容视为字符串属性。长度将始终定义为 javascript 中数组的最大值+1。

所以要清楚

```
var x = [] 
```

创建一个新的`Array`，它将尝试将其输入解析为整数并将它们添加到数组中，但否则会将它们分配为属性。

```
var x = {} 
```

将创建一个对象，它作为一组无序的属性工作，并且没有长度，除非您自定义定义`x.length = y`，在这种情况下，它将只是另一个没有特殊含义的属性。

# design-patterns - Symfony 2 基于路由文化

> ID：15212067
> 
> 赞同：1
> 
> 时间：2013-03-04T22:07:19.147
> 
> 标签：design-patterns, symfony, routing, culture

我想用 sf2 构建一个多语言应用程序。我希望多个路由指向同一个控制器，并且当我生成 url 时，我希望它们正确生成，即使有多个路由指向该控制器。

我的研究表明，我可以使用 @Route 注释向控制器添加多个路由，但是我将如何生成正确的 url？

理想情况下，我希望能够定义这样的路线：

```
homepage:
    pattern:
       en:    /homepage
       fr:    /le_homepage
    defaults:  { _controller: AcmeDemoBundle:Main:homepage } 
```

并且路由应该能够识别模式并确定匹配的文化。此外，当我生成 url 时，它应该让我提供一种文化或获取默认文化并使用适当的模式来生成 url。例如，如果我在用户使用 fr 语言时生成主页 url，它应该转到 /le_homepage。如果使用 en 语言，它应该转到 /homepage。

现在显然这在 sf2 中不可用。有人对此有解决方案吗？我考虑过手动添加 homepage_en: 和 homepage_fr: 路由，但是我会不断地复制东西，并且在生成 url 时要小心。如果有人有更好的解决方案，我想听听。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:13:37.560

你应该使用[`JMSI18nRoutingBundle`](https://github.com/schmittjoh/JMSI18nRoutingBundle).

# node.js - 在 mongo 中创建嵌套对象的正确方法

> ID：15212068
> 
> 赞同：0
> 
> 时间：2013-03-04T22:07:21.790
> 
> 标签：node.js, mongoose

我正在尝试创建一个嵌套对象数组。我正在遵循一本书中的示例，该示例执行以下操作：

```
 // Creates the Schema for the Features object (mimics ESRI)
      var Phone = new Schema({
          number: { type: Number, required: false },
          ...
          personId: {type: Schema.Types.ObjectId}
        }
      );

      // Creates the Schema for the Attachments object
      var Person = new Schema({   
         name: { type: String },  
         phones: [Phone]
        }
      );

  var Person = mongoose.model('Person', Person); 
```

为一个人存储多个电话号码时效果很好。但是我不确定是否有一种好的/快速的方法可以通过_id 获取电话对象。由于 Phone 不是猫鼬模型，因此您不能直接转到 Phone.findOne({...}); 现在，我坚持通过 _id 获取一个人，然后遍历该人的电话并查看 id 是否匹配。

然后我偶然发现了这个链接： http: [//mongoosejs.com/docs/populate.html](http://mongoosejs.com/docs/populate.html)

一种方法比另一种更正确吗？目前，当我删除一个人时，他/她的手机也会消失。不太确定是否适用于“填充”，似乎我需要删除人员和电话。

有人想尝试解释这些差异吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:56:28.833

一般规则是，如果您需要独立查询电话，则应将它们保存在单独的集合中，并在需要时`populate`用于查找它们`People`。否则，嵌入它们通常是更好的选择，因为它简化了更新和删除。

当使用像现在这样的嵌入式方法时，请注意 Mongoose 数组提供了一种方法，您可以使用它来更轻松地按元素的值[`id`](http://mongoosejs.com/docs/api.html#types_documentarray_MongooseDocumentArray-id)查找元素。`_id`

```
var phone = person.phones.id(id); 
```

# iphone - NSTimer 因访问错误而崩溃

> ID：15212071
> 
> 赞同：0
> 
> 时间：2013-03-04T22:07:33.820
> 
> 标签：iphone, ios, nstimer, exc-bad-access

我有以下方法来更新显示简单时间的标签

```
-(void)updateTimeLabel:(NSTimer *)timer{
    NSInteger secondsSinceStart = (NSInteger)[[NSDate date] timeIntervalSinceDate:_startTime];

    NSInteger seconds = secondsSinceStart % 60;
    NSInteger minutes = (secondsSinceStart / 60) % 60;
    NSInteger hours = secondsSinceStart / (60 * 60);
    NSString *result = nil;
    if (hours > 0) {
        result = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds];
    }
    else {
    result = [NSString stringWithFormat:@"%02d:%02d", minutes, seconds];
    }

    _totalTime = result;
    _totalTimeLabel.text = result;
} 
```

然后我将其称为按钮的操作：

```
-(IBAction) startTimer{
    _startTime = [NSDate date];
    _walkRouteTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateTimeLabel:) userInfo:nil repeats:YES];
    [_walkRouteTimer fire];
} 
```

但是当我运行应用程序时，我遇到了一个错误的访问错误并且应用程序崩溃了，谁能帮我解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T22:59:39.673

你在用ARC吗？如果没有，`_startTime = [NSDate date];`这条线会导致你的问题。`[NSDate date]`返回一个自动释放对象，如果您不使用 ARC（或使用 ARC 但将 _startTime 声明为弱），则 _startTime 将不会保留它。

如果是这样，请尝试为其添加保留

```
-(IBAction) startTimer{
    //_startTime = [NSDate date]
    _startTime = [[NSDate date] retain];
    _walkRouteTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateTimeLabel:) userInfo:nil repeats:YES];
    [_walkRouteTimer fire];
} 
```

当你完成你的计时器，在调用 之后`[_walkRouteTimer invalidate]`，调用`[_startTime release]`。

或者更简单，如果您使用属性`startTime`并将其声明为保留。只需使用点符号：

```
-(IBAction) startTimer{
    //_startTime = [NSDate date]
    self.startTime = [NSDate date];
    _walkRouteTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateTimeLabel:) userInfo:nil repeats:YES];
    [_walkRouteTimer fire];
}
...
//After [_walkRouteTimer invalidate]
self.startTime = nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:49:15.683

尝试添加异常断点以查看哪一行崩溃：

1）单击断点选项卡（右起第二个）...有点像向右箭头或“下一步”按钮

2) 点击标签菜单左下角的“+”

3）选择“添加异常断点”

4）（可选）选择“例外”下拉菜单并更改为“Objective-C”

5) 选择“完成”

6) 再次运行您的代码并尝试生成崩溃...当您这样做时，它有望被此断点捕获，您将看到哪一行正在崩溃并能够修复它

祝你好运

# sage - Sage：Catch MACSYMA-QUIT 未定义

> ID：15212076
> 
> 赞同：1
> 
> 时间：2013-03-04T22:07:49.450
> 
> 标签：sage, maxima, computer-algebra-systems, ecl

## 我的情况

当我在普通shell上使用`sage.all`模块时，会在运行**方法**时引发**错误，例如****or**：`python``sage.all`****`solve``assume`****

 **```
>>> import sage.all as sg;a=sg.var('a');sg.assume(a==0);
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/sage/local/lib/python2.7/site-packages/sage/symbolic/assumptions.py", line 412, in assume
    x.assume()
  File "expression.pyx", line 1397, in sage.symbolic.expression.Expression.assume (sage/symbolic/expression.cpp:8428)
  File "lazy_import.pyx", line 212, in sage.misc.lazy_import.LazyImport.__getattr__ (sage/misc/lazy_import.c:1865)
  File "lazy_import.pyx", line 148, in sage.misc.lazy_import.LazyImport._get_object (sage/misc/lazy_import.c:1268)
  File "/opt/sage/local/lib/python2.7/site-packages/sage/interfaces/maxima_lib.py", line 153, in <module>
    ecl_eval("#$%s$"%l)
  File "ecl.pyx", line 1236, in sage.libs.ecl.ecl_eval (sage/libs/ecl.c:7040)
  File "ecl.pyx", line 1251, in sage.libs.ecl.ecl_eval (sage/libs/ecl.c:6977)
  File "ecl.pyx", line 257, in sage.libs.ecl.ecl_safe_eval (sage/libs/ecl.c:2839)
RuntimeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined. 
```

运行`assume`或`solve`在`sage`外壳（和预处理器）上运行就像它应该做的那样。

## 我的问题

我该怎么做才能`sage.all`正常工作`python`？

谢谢 - 如果我的问题有任何不清楚的地方，请发表评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:34:04.393

我只会使用 IPython shell 的 Sage 副本。

```
$ sage -ipython
Python 2.7.3 (default, Feb 16 2013, 21:48:36) 
Type "copyright", "credits" or "license" for more information.
IPython 0.13.1 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: import sage.all as sg

In [2]: a = sg.var('a')

In [3]: sg.assume(a==0)

In [4]: 
```**

# php - PHP 和 MySQL 可选 WHERE 条件

> ID：15212081
> 
> 赞同：-1
> 
> 时间：2013-03-04T22:08:19.853
> 
> 标签：php, mysql, select, where

我有以下问题：我想让用户将过滤器应用于数据库搜索。我有三个过滤器，A、B 和 C。它们都可以是“空的”，例如，用户不关心它们并选择“任何”。现在我想根据数据库记录检查这个查询。我使用普通的 mysql 查询，如

```
$db_q = "Select * from table where row1 = '" . $A . "' and row2 = '" . $B . "' and row3 =
'" . $C . "'"; 
```

只要用户输入任何特定于 A、B、C 的内容（！=“任何”），这都可以正常工作。选择“任何”时，我得到这样的内容：“从Row1 =”任何/全部“等中的表中选择* 我似乎无法弄清楚正确的语法（如果可能的话），我想避免混乱的大小写区分（如果 A == any，执行选择；如果 B == empty.. 等等）。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:29:59.063

其他答案大多是正确的，但这是完成所需内容的更简单方法：

```
$where = array();

if($A != 'any'){ // or whatever you need
    $where[] = "A = $A'";
}
if($B != 'any'){ // or whatever you need
    $where[] = "B = $B'";
}
if($C != 'any'){ // or whatever you need
    $where[] = "C = $C'";
}

$where_string = implode(' AND ' , $where);

$query = "SELECT * FROM table";

if($where){
    $query .= ' ' . $where_string;
} 
```

这将允许条件和扩展的任何组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:12:56.777

在查询之前，您可以使用：

```
$tmp = "where ";
if($A and $A!="any" and $A!="not used")
 $tmp .= "row1 = '".$A."'";
if($B and $B!="any" and $B!="not used")
 $tmp .= "AND row2 = '".$B. "'";
if($C and $C!="any" and $C!="not used")
 $tmp .= "AND row3 = '".$C."'";
$db_q = "Select * from table $tmp"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:16:09.317

试试这个：

```
$db_q = "Select * from table ";

if ($A != "any" || $B != "any" || $C != "any")
{
    $db_q .= "where ";
}

$firstCondition = true;

if ($A != "any")
{
   if (!$firstCondition)
       $db_q .= "and ";

   $db_q .= "row1 = '$A' ";
   $firstCondition = false;
}

if ($B != "any")
{
   if (!$firstCondition)
       $db_q .= "and ";

   $db_q .= "row2 = '$B' ";
   $firstCondition = false;
}

if ($C != "any")
{
   if (!$firstCondition)
       $db_q .= "and ";

   $db_q .= "row3 = '$C' ";
   $firstCondition = false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T21:52:01.260

尝试做这样的事情：

```
if @param1 is not null
   select * from table1 where col1 = @param1
else
   select * from table1 where col2 = @param2 
```

这可以重写：

```
select * from table1
where (@param1 is null or col1 = @param1)
  and (@param2 is null or col2 = @param2) 
```

从 Baron Schwartz 的博客中得到这个想法：[https ://www.xaprb.com/blog/2005/12/11/optional-parameters-in-the-where-clause/](https://www.xaprb.com/blog/2005/12/11/optional-parameters-in-the-where-clause/)

# database - 拥有未在数据库中定义的 ID 的坏习惯？

> ID：15212082
> 
> 赞同：0
> 
> 时间：2013-03-04T22:08:21.157
> 
> 标签：database, database-design

我正在开发其他人编写的应用程序，似乎他们在整个应用程序中使用了未在数据库中定义的 ID。对于一个简化的示例，假设有一个名为 Question 的表：

```
Question
------------
Id
Text
TypeId
SubTypeId 
```

当前，该`SubTypeId`列填充了一组 ID，这些 ID 不引用数据库中的另一个表。在代码中，这些`SubTypeId`s 映射到配置文件中的特定字符串。

过去，当我拥有这些类型的值时，我会创建一个查找表并插入适当的值，但在此应用程序中，ID 与其在配置文件中的相应文本值之间存在映射。

在配置文件中而不是在数据库本身中定义查找表是不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:25:41.750

> 在配置文件中而不是在数据库本身中定义查找表是不好的做法吗？

绝对没错。它严重依赖代码来管理和维护引用、获取必要的值等。在您现在需要创建附加功能的情况下，您将依赖复制粘贴映射（或导入它们等）这更有可能导致问题。

这类似于为什么数据库约束应该在数据库中而不是在访问它的程序/应用程序中 -**任何维护或新应用程序都需要复制所有行为和规则。**以这种方式处理事情有类似的副作用，[我在另一个答案中提到过](https://stackoverflow.com/a/13743714/1431750)。

有一个查找表的充分理由：

1.  由于数据库通常可以*自然地*具有这些类型的关系，因此使用它们是显而易见的。
2.  首先需要在 Type- 和 SubType- Text vs ID 的代码中构造查询，而不是将它们作为实际执行的查询的 where/having 子句的一部分。
3.  速度/性能 - 使用正确的索引和表结构，您将从中受益（并降低管理它的代码复杂性）
4.  您无需更新代码即可添加新的`Type`or`SubType`或编辑/删除它们。

这样做的可能原因，我认为这不是正当理由：

*   `TypeID`and是相关的`SubTypeID`，原始设计者不知道如何创建复杂的外键。（虽然不是一个很好的理由。）
*   另一个可能是“翻译”，但也可以使用外键关系来处理。
*   在某些代码中，可能没有严格的`TypeID`关系`SubTypeID`，并且该逻辑是在代码中而不是在数据库中处理的。同样，如果可能，可以使用“标志”值或 NULL 进行管理。这些特定情况可以通过设计正确的数据库来处理，然后解决代码中的独特/奇怪情况，而不是将所有依赖都放在代码上。
*   NoSQL：原始设计者可能认为这样的外键或关系不能在 NoSQL 数据库中完成。
*   *以及明显的“人”问题与技术挑战：最初的设计者可能对数据库没有正确的理解，并且可能是在*没有正确知识或帮助的情况下执行该应用程序（或被迫执行该应用程序）的程序员。
*   只是把它放在那里：如果以前的设计师是外部承包商，他可能已经使用代码维护复杂性或“支持”条款作为获得更多业务/资金的手段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:17:09.850

作为一般的经验法则，我会说将所有相关数据保存在数据库中是一种更好的做法，因为它消除了数据库和您的应用程序之间的默认依赖关系，并且因为它使数据库更“易于理解”。如果 SubTypeID 的定义在查找表中，则可以创建返回人类可读结果的查询等。

也就是说，正确的答案可能在一定程度上取决于应用程序的具体情况。如果数据库和应用程序之间的耦合非常紧密（例如，如果数据库不会被其他客户端访问），这可能是一个次要问题，尤其是在 SubTypeID 集很小且很少更改的情况下。

# ios - 如何在 iOS 中将自定义元数据写入 PNG 图像

> ID：15212083
> 
> 赞同：12
> 
> 时间：2013-03-04T22:08:28.607
> 
> 标签：ios, objective-c, png, metadata, uipasteboard

我的应用程序应该能够将自定义元数据条目写入 PNG 图像以导出到 UIPasteboard。

通过拼凑有关该主题的各种帖子，我已经能够提出下面给出的课程作为来源。

使用按钮触发 copyPressed 方法，我可以使用 JPG 图像（EXIF）设置自定义元数据：

```
Image[6101:907] found jpg exif dictionary
Image[6101:907] checking image metadata on clipboard
Image[6101:907] {
    ColorModel = RGB;
    Depth = 8;
    Orientation = 1;
    PixelHeight = 224;
    PixelWidth = 240;
    "{Exif}" =     {
        ColorSpace = 1;
        PixelXDimension = 240;
        PixelYDimension = 224;
        UserComment = "Here is a comment";
    };
    "{JFIF}" =     {
        DensityUnit = 0;
        JFIFVersion =         (
            1,
            1
        );
        XDensity = 1;
        YDensity = 1;
    };
    "{TIFF}" =     {
        Orientation = 1;
    };
} 
```

虽然我能够很好地读取 PNG 元数据，但我似乎无法写入它：

```
Image[6116:907] found png property dictionary
Image[6116:907] checking image metadata on clipboard
Image[6116:907] {
    ColorModel = RGB;
    Depth = 8;
    PixelHeight = 224;
    PixelWidth = 240;
    "{PNG}" =     {
        InterlaceType = 0;
    };
} 
```

但是，文档中没有任何内容表明这应该失败，并且许多[特定于 PNG 的元数据常量](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGImageProperties_Reference/Reference/reference.html)的存在表明它应该成功。

我的应用程序应该使用 PNG 来避免[JPG 的有损压缩](http://www.cultofmac.com/184993/jpeg-rotation-and-lossless-editing-in-ios/)。

为什么我不能在 iOS 中的内存中 PNG 图像上设置自定义元数据？

注意：我已经看到[了这个 SO question](https://stackoverflow.com/questions/5125323/problem-setting-exif-data-for-an-image/5294574)，但它并没有解决这里的问题，即如何专门将元数据写入 PNG 图像。

**IMViewController.m**

```
#import "IMViewController.h"
#import <ImageIO/ImageIO.h>

@interface IMViewController ()

@end

@implementation IMViewController

- (IBAction)copyPressed:(id)sender
{
//    [self copyJPG];
    [self copyPNG];
}

-(void)copyPNG
{
    NSData *pngData = UIImagePNGRepresentation([UIImage imageNamed:@"wow.png"]);
    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)pngData, NULL);
    NSDictionary *metadata = (__bridge NSDictionary *) CGImageSourceCopyPropertiesAtIndex(source, 0, NULL);
    NSMutableDictionary *mutableMetadata = [metadata mutableCopy];
    NSMutableDictionary *dict = [[mutableMetadata objectForKey:(NSString *) kCGImagePropertyPNGDictionary] mutableCopy];

    if (dict) {
        NSLog(@"found png property dictionary");
    } else {
        NSLog(@"creating png property dictionary");
        dict = [NSMutableDictionary dictionary];
    }

    // set values on the root dictionary
    [mutableMetadata setObject:@"Name of Software" forKey:(NSString *)kCGImagePropertyPNGDescription];
    [mutableMetadata setObject:dict forKey:(NSString *)kCGImagePropertyPNGDictionary];

    // set values on the internal dictionary
    [dict setObject:@"works" forKey:(NSString *)kCGImagePropertyPNGDescription];

    CFStringRef UTI = CGImageSourceGetType(source);
    NSMutableData *data = [NSMutableData data];
    CGImageDestinationRef destination = CGImageDestinationCreateWithData((__bridge CFMutableDataRef) data, UTI, 1, NULL);

    if (!destination) {
        NSLog(@">>> Could not create image destination <<<");

        return;
    }

    CGImageDestinationAddImageFromSource(destination, source, 0, (__bridge CFDictionaryRef) mutableMetadata);

    BOOL success = CGImageDestinationFinalize(destination);

    if (!success) {
        NSLog(@">>> Error Writing Data <<<");
    }

    UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];

    [pasteboard setData:data forPasteboardType:@"public.png"];
    [self showPNGMetadata];
}

-(void)copyJPG
{
    NSData *jpgData = UIImageJPEGRepresentation([UIImage imageNamed:@"wow.jpg"], 1);
    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef) jpgData, NULL);
    NSDictionary *metadata = (__bridge NSDictionary *) CGImageSourceCopyPropertiesAtIndex(source, 0, NULL);
    NSMutableDictionary *mutableMetadata = [metadata mutableCopy];
    NSMutableDictionary *exif = [[mutableMetadata objectForKey:(NSString *)kCGImagePropertyExifDictionary] mutableCopy];

    if (exif) {
        NSLog(@"found jpg exif dictionary");
    } else {
        NSLog(@"creating jpg exif dictionary");
    }

    // set values on the exif dictionary
    [exif setObject:@"Here is a comment" forKey:(NSString *)kCGImagePropertyExifUserComment];
    [mutableMetadata setObject:exif forKey:(NSString *)kCGImagePropertyExifDictionary];

    CFStringRef UTI = CGImageSourceGetType(source);
    NSMutableData *data = [NSMutableData data];
    CGImageDestinationRef destination = CGImageDestinationCreateWithData((__bridge CFMutableDataRef) data, UTI, 1, NULL);

    if(!destination) {
        NSLog(@">>> Could not create image destination <<<");

        return;
    }

    CGImageDestinationAddImageFromSource(destination,source, 0, (__bridge CFDictionaryRef) mutableMetadata);

    BOOL success = CGImageDestinationFinalize(destination);

    if (!success) {
        NSLog(@">>> Could not create data from image destination <<<");
    }

    UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];

    [pasteboard setData:data forPasteboardType:@"public.jpeg"];
    [self showJPGMetadata];
}

-(void)showJPGMetadata
{
    NSLog(@"checking image metadata on clipboard");

    UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
    NSData *data = [pasteboard dataForPasteboardType:@"public.jpeg"];

    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)data, NULL);
    NSDictionary *metadata = (__bridge NSDictionary *) CGImageSourceCopyPropertiesAtIndex(source,0,NULL);

    NSLog(@"%@", metadata);
}

-(void)showPNGMetadata
{
    NSLog(@"checking image metadata on clipboard");

    UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
    NSData *data = [pasteboard dataForPasteboardType:@"public.png"];

    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)data, NULL);
    NSDictionary *metadata = (__bridge NSDictionary *) CGImageSourceCopyPropertiesAtIndex(source,0,NULL);

    NSLog(@"%@", metadata);
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:34:49.007

如果您尝试使用修改后的元数据保存图像

```
[data writeToFile:[NSTemporaryDirectory() stringByAppendingPathComponent:@"test.png"]   
       atomically:YES]; 
```

而不是在 Finder 中查看它的属性。您将看到该`kCGImagePropertyPNGDescription`字段已成功设置。

![在此处输入图像描述](../Images/dd4e9382681a3cad9faa26107e149a5d.png)

但是如果你尝试读取这个新文件的元数据，`kCGImagePropertyPNGDescription`将会丢失。

```
ColorModel = RGB;
Depth = 8;
PixelHeight = 1136;
PixelWidth = 640;
"{PNG}" =     {
    InterlaceType = 0;
}; 
```

经过一番研究，我发现 PNG 不包含元数据。但它可能包含[XMP 元数据](http://en.wikipedia.org/wiki/Extensible_Metadata_Platform)。但是似乎`ImageIO`不适用于 XMP。
也许您可以尝试使用[ImageMagic](http://www.imagemagick.org)或[libexif](https://stackoverflow.com/a/11753126/881989)。

有用的链接：
[PNG 规范](http://www.w3.org/TR/PNG/#11textinfo)
[在 iPhone / Objective-c 上读取/写入图像 XMP](https://stackoverflow.com/questions/4148140/reading-writing-image-xmp-on-iphone-objective-c)
[PNG 是否支持元数据字段，如作者、相机模型等？](https://stackoverflow.com/questions/8113314/does-png-support-metadata-fields-like-author-camera-model-etc)
[PNG 是否包含像 JPG 这样的 EXIF 数据？](https://stackoverflow.com/questions/9542359/does-png-contain-exif-data-like-jpg)
[libexif.sourceforge.net](http://libexif.sourceforge.net)

# asp.net-mvc-routing - 打破一个区域的一些控制器

> ID：15212087
> 
> 赞同：0
> 
> 时间：2013-03-04T22:08:36.523
> 
> 标签：asp.net-mvc-routing

我在我的应用程序的一个区域中有三个控制器，我想从该区域的其余部分中分离出来。例如，我想要一个类似的 url `/Area/Approve/Timesheet/Action`，然后仍然能够拥有`/Area/Timesheet/Action`两者具有完全不同的功能（一个批准时间表作为主管，另一个作为员工填写时间表）。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:14:32.797

是的，这绝对是可能的，只要您设置了正确的路线。请记住，即使默认的 MVC 区域模板显示了一种特定的路由模式，最终，所有路由都会进入同一个全局路由表，因此只要设置正确的 URL 模式，就可以了。

如果您在使用任何特定的路线时遇到问题，请说明您拥有哪些路线以及哪些路线不起作用。

# wordpress - WordPress：如何使“主题选项页面”出现在“编辑页面”上？

> ID：15212089
> 
> 赞同：1
> 
> 时间：2013-03-04T22:08:40.657
> 
> 标签：wordpress

以防万一，以下是 WordPress 中的*主题选项页面：*

[http://css.dzone.com/articles/how-create-theme-options-page](http://css.dzone.com/articles/how-create-theme-options-page)

我一直在绞尽脑汁想弄清楚如何让任何 WordPress 主题的*主题选项页面*出现在 WordPress 的“编辑页面”上。有谁知道如何做到这一点，所以我创建的每个页面在发布时都会有不同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:24:37.897

我认为您的问题是，实际上 WordPress 设置为具有单个主题和一组选项，您尝试做的基本上是为每个页面设置一个新主题。

相反，您可能需要针对您希望逐页自定义的选项（例如蓝色背景、白色背景、大徽标等）使用单独的[页面模板。](http://codex.wordpress.org/Pages#Page_Templates)

如果您想要一系列易于动态调整的选项，您可以设置一些[自定义字段](http://wordpress.org/extend/plugins/advanced-custom-fields/)，然后调整您的模板以根据需要从中提取设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T10:05:52.383

首先，定义这样的动作：

功能 mytheme_customize_register( $wp_customize ) {

} add_action('customize_register', 'mytheme_customize_register');

# variables - 创建一个带有增量数字的 txt 文件

> ID：15212101
> 
> 赞同：1
> 
> 时间：2013-03-04T22:10:10.747
> 
> 标签：variables, batch-file, intervals, incremental-build

抱歉这个问题我是编程的初学者，对于知道该怎么做的人来说，这可能很容易：

我需要在一个 txt 文件中创建一系列带有递增数字的链接，例如我想保持某个部分“固定”而某个部分必须更改；例如想象一下：

[http://user:password@website.com/members/sets/001/somethingfixed-001.zip](http://user:password@website.com/members/sets/001/somethingfixed-001.zip) 在文本中以下几行应该是：

[http://user:password@website.com/members/sets/002/somethingfixed-002.zip](http://user:password@website.com/members/sets/002/somethingfixed-002.zip) 等。

我认为必须有一种方法来生成我可以指定的那些，创建链接，保持每行中的固定部分相等，然后逐步放置 001、002、003，直到我需要它为止。

如果我可以创建一个 .bat 文件来询问我：初始链接是什么，要修复的部分是什么以及要更改的内容是什么，那就太棒了。

我会做这样的程序：

插入第一个链接，然后我粘贴它。

然后它问我固定部分是什么，我输入：.../members/sets/X/somethingfixed-Y.zip

变量 X 和 Y 的范围是多少？起始号码？然后我输入 001 然后它问我最后的数字是多少？我放了 150，它会在 txt 文件中生成链接，以便我可以使用它们。

希望很清楚。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:31:07.417

### 例子

这将针对第一个数字进行`X`，我将留下一些供您开发和学习。**`:)`**

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion
echo LeftXRight Gen
set /p "Left=Left = "
set /p "Right=Right = "
set /p "Start=Begin = "
set /p "End=End = "
>output.txt ( <nul set /p "=" )
for /L %%A in (%Start%, 1, %End%) do (
    set "X=00%%A"
    echo !Left!!X:~-3!!Right!>>output.txt
)
endlocal 
```

### 输出

```
LeftXRight Gen
Left = http://user:password@website.com/members/sets/
Right = /somethingfixed.zip
Start = 1
End = 10 
```

### 输出.txt

```
http://user:password@website.com/members/sets/001/somethingfixed.zip
http://user:password@website.com/members/sets/002/somethingfixed.zip
http://user:password@website.com/members/sets/003/somethingfixed.zip
http://user:password@website.com/members/sets/004/somethingfixed.zip
http://user:password@website.com/members/sets/005/somethingfixed.zip
http://user:password@website.com/members/sets/006/somethingfixed.zip
http://user:password@website.com/members/sets/007/somethingfixed.zip
http://user:password@website.com/members/sets/008/somethingfixed.zip
http://user:password@website.com/members/sets/009/somethingfixed.zip
http://user:password@website.com/members/sets/010/somethingfixed.zip 
```

* * *

## 更新

为问题添加了这个完整的解决方案。

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion
echo LeftXMidXRight Gen
set /p "Left=Left = "
set /p "Middle=Middle = "
set /p "Right=Right = "
set /p "Start=Begin = "
set /p "End=End = "
>output.txt ( <nul set /p "=" )
for /L %%A in (%Start%, 1, %End%) do (
    set "X=00%%A"
    echo !Left!!X:~-3!!Middle!!X:~-3!!Right!>>output.txt
)
endlocal 
```

### 例子

```
LeftXMidXRight Gen
Left = http://user:password@website.com/members/sets/
Middle = /somethingfixed-
Right = .zip
Begin = 1
End = 150 
```

### 输出.txt

```
http://user:password@website.com/members/sets/001/somethingfixed-001.zip
http://user:password@website.com/members/sets/002/somethingfixed-002.zip
...
http://user:password@website.com/members/sets/150/somethingfixed-150.zip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:30:43.687

这接近你所追求的，有几个限制..

它只能附加到 url 的末尾。

1 位和 2 位数字不是以零为前缀的。

```
@echo off

set /p url="Enter URL: "
set /p start="Start Number: "
set /p end="End Number: "

for /L %%X in (%start%, 1, %end% ) do echo %url% %%X >> file.txt 
```

# javascript - 突出显示 DIV 并在鼠标悬停时使其余部分变暗

> ID：15212102
> 
> 赞同：2
> 
> 时间：2013-03-04T22:10:12.353
> 
> 标签：javascript, jquery, css

我有一个充满 DIV 的页面，其中包含图像。

当我将鼠标悬停在图像上时，我可以通过添加类等来突出显示它或添加阴影以轻松强调它，但是有没有办法使所有其他图像变暗。

DIV 被加载到 DOM 中，我希望当前悬停的 DIV 保留 100% 或 1 的不透明度，并且当突出显示一个 DIV 时，页面上的其余 DIV 淡化为 70% 或 0.7。

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T22:57:26.340

**仅 CSS：**

**[jsBin 演示](http://jsbin.com/umacat/183/edit)**

```
#parent:hover > div{ opacity:0.6; }    /* Fade ALL OUT on parent hover */   
#parent > div:hover{ opacity:1; }      /* Fade in hovered one */ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T22:17:19.477

```
$('div').hover(function() {
    $('div').css({opacity: '0.7'});
    $(this).css({opacity: '1'});
}, function() {
    $('div').css({opacity: '1'})}
); 
```

我认为这应该有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T22:12:46.200

您可以做的是使用新的 div 作为“掩码”。

例如，您将拥有**图像 div**`z-index:1;`。

而且你还有另一个**div**。`opacity:50%; position:fixed; top:0; left:0; width:100%; height:100%; z-index:2;`页面加载时必须隐藏此黑色 div ( `display:none;`)。

使用 javascript，当您将鼠标悬停在图像 div 上时，白色 div 应更改为`z-index:3;`，黑色 div 应更改为`display:block;`或类似。

附录：

如果你不想要一个覆盖div，而只想让其他图像不透明，则javascript只需要更改不透明度（你可以在类中管理这些不透明度，然后使用JS在它们之间切换）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T22:12:52.817

最简单的方法可能是：

1）制作覆盖整个页面的半透明叠加层。

2）克隆您的 DIV 并将其放置在叠加层的顶部。

# ruby - Ruby 和“您必须使用 OpenSSL 支持重新编译 Ruby 或更改 Gemfile 中的源代码”

> ID：15212104
> 
> 赞同：49
> 
> 时间：2013-03-04T22:10:20.267
> 
> 标签：ruby, macos, openssl, rvm

使用 rvm 我将我的 ruby​​ 升级到 1.9.3-p392，还添加了 2.0.0，每当我尝试使用这个版本时，当我运行我的 bundle 命令时，我都会收到这个错误。

```
Could not load OpenSSL.
You must recompile Ruby with OpenSSL support or change the sources in your Gemfile from 'https' to 'http'. Instructions for compiling with OpenSSL using RVM are
available at rvm.io/packages/openssl. 
```

我已经按照几个不同的说明来解决这个问题。我尝试删除版本并使用 rvm 选项安装它

```
--with-openssl-dir=$HOME/.rvm/usr 
```

我已经用 rvm 和 macports 安装了 OpenSSL。两者都没有解决问题。我什至使用以下方法更改了 ssl 证书的文件位置：

```
export SSL_CERT_FILE=/Users/DarkLord/.rvm/usr/ssl/cert.pem 
```

无论我做什么，我都会继续收到错误。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-05-06T10:21:18.867

这对我有用：

`rvm get stable`

`brew install libyaml`

`rvm pkg install openssl`

`rvm install ruby-2.0.0 --with-openssl-dir=$HOME/.rvm/usr`

`rvm use ruby-2.0.0`

所有学分都转到[https://coderwall.com/p/tptocq](https://coderwall.com/p/tptocq)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2017-06-15T15:24:26.010

这有助于我在 Mac 上安装 1.9.3-head：

```
rvm get latest    
brew install openssl    
rvm reinstall 1.9.3-head --with-openssl-dir=`brew --prefix openssl` 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-04-11T15:48:09.020

在我的情况下：

```
 1\. brew install openssl
 2\. rvm install ruby-2.6.0 
```

`bundle install`因此错误而失败。问题是 openssl 是全局设置的，所以我必须通过显式设置 openssl 目录来安装新的 ruby​​ 版本。

所以我必须做的是：

```
 1\. rvm reinstall ruby-2.6.0 --with-openssl-dir=/usr/local/opt/openssl
 2\. rvm reload 
```

*假设`usr/local/opt/openssl`这是安装它的地方。*

之后`bundle install`就成功运行了。

**警告**当我像一些答案建议的那样使用此路径尝试此命令时`/usr/local`，它不起作用。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-06T20:08:22.400

为了让它再次工作，我必须安装自制软件并将我的 mac 端口移开。然后在删除 1.9.3-p392 和 2.0.0-p0 后执行以下操作：

```
rvm get head --autolibs=3
rvm install 1.9.3 --with-opt-dir=/usr/bin
rvm install 2.0.0 
```

我的 mac 端口和 openssl 以及 make 和 configure 出现了一些问题。这是我能够让 rvm 再次安装 ruby​​ 而不会出现 openssl 问题或 make/configure 问题的唯一方法。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-12-18T17:46:38.293

就我而言：

**问题：**安装ruby-2.3.1后，我运行命令`bundle install`，然后出现错误。

**解决方案：**

*   我首先在我的机器上安装了**OpenSSL 。**`$ brew install openssl`
*   然后，用 openssl 重新安装了我需要的 ruby​​ 版本（2.3.1）。

    `$ rvm reinstall 2.3.1 --with-openssl-dir=/usr/local/opt/openssl`

这解决了我的问题！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-12-21T00:24:11.787

根据上面@Purplejacket 的评论，新的方法如下：

```
rvm autolibs homebrew
rvm install 2.1.1
rvm use 2.1.1 
```

这要容易得多。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-05T04:23:37.133

根据以下问题： [如何判断 RVM-installed ruby​​ 实际使用了哪个 openssl lib](https://stackoverflow.com/questions/13956134/how-to-tell-which-openssl-lib-is-actually-being-used-by-an-rvm-installed-ruby/13958931)

从 Ruby 1.9.3 开始，这些选项似乎`--with-openssl-dir=...`不再有效。我试过

```
rvm install 1.9.3 --with-opt-dir=/usr/local --with-openssl 
```

它奏效了。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-04-06T04:36:46.837

macOS 卡塔利娜

```
brew install rbenv/tap/openssl@1.0
rvm reinstall 2.3.8 --with-openssl-dir=/usr/local/opt/openssl@1.0 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-07-19T18:40:11.873

以下步骤对我有用。

首先确保`openssl`通过运行安装`brew install openssl`，然后使用 rvm 重新安装 ruby​​ 版本，但是这一次，您必须传递`with-opt-dir`指向您机器上安装 openssl 的位置的标志（使用命令`which openssl`找到此位置）。

```
rvm install 1.9.3-p392 --with-openssl-dir=/usr/local/opt/openssl 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-02T01:37:02.880

在 macOS 10.14、Ruby 2.5.3 和 OpenSSL 1.0.2n 这对我有用：

```
./configure --with-openssl --with-openssl-dir=/usr/local/ssl 
```

但我只是在尝试错误消息告诉我的内容：

```
*** Following extensions are not compiled:
openssl:
    Could not be configured. It will not be installed.
    /Users/brian/Desktop/Ruby/ruby-2.5.3/ext/openssl/extconf.rb:97: OpenSSL library could not be found. You might want to use --with-openssl-dir=<dir> option to specify the prefix where OpenSSL is installed.
    Check ext/openssl/mkmf.log for more details.
*** Fix the problems, then remove these directories and try again if you want.
make[1]: *** [note] Error 1 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-11T12:13:45.330

这对我有帮助：

```
rvm reinstall 2.5

brew tap raggi/ale
brew install openssl-osx-ca
brew services start openssl-osx-ca 
```

在这里找到了这个解决方案：[https ://github.com/raggi/openssl-osx-ca#readme](https://github.com/raggi/openssl-osx-ca#readme)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-16T15:16:44.307

我在我的 Gemfile 中指定了一个更新的 Ruby 版本，然后运行 ​​bundle install。现在一切都好。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-27T20:40:30.207

**我在处理Ruby 2.2.3**应用程序时遇到了这个问题。

我以前卸载了我机器上的**MySQL 数据库服务器**，因为我不需要它。但是，我仍然需要[mysql2](https://github.com/brianmario/mysql2) gem，因为我的应用程序正在连接到另一个应用程序的 MySQL 数据库以提取数据。

但是，当我尝试运行`bundle`命令时出现错误：

> 无法加载 OpenSSL。您必须使用 OpenSSL 支持重新编译 Ruby，或将 Gemfile 中的源代码从“https”更改为“http”。rvm.io/packages/openssl 提供了使用 RVM 使用 OpenSSL 进行编译的说明。

**这是我解决它的方法**：

这个问题是由于我在我的机器上`libssl-dev`卸载**MySQL 数据库服务器**及其库时删除了库引起的。

首先，我运行以下命令重新安装`ruby`，因为我使用以下命令安装它`rvm`：

```
rvm reinstall ruby-2.2.3 
```

这引发了一个错误：

> 使 gemset ruby​​-2.2.3 原始...................................... .../- .'command gem pristine --extensions mysql2 --version 0.5.3' 失败，您需要手动修复这些 gem。. 运行“__rvm_with ruby​​-2.2.3 gemset_pristine”时出错，请阅读/home/promisepreston/.rvm/log/1630094455_ruby-2.2.3/gemset.pristine-ruby-2.2.3.log

接下来，我尝试安装 mysql2 gem：

```
gem install mysql2 
```

然后我遇到了这个错误：

> 构建原生扩展。这可能需要一段时间... 错误：安装 mysql2 时出错：错误：无法构建 gem 原生扩展。mysql 客户端丢失。您可能需要“sudo apt-get install libmariadb-dev”、“sudo apt-get install libmysqlclient-dev”或“sudo yum install mysql-devel”，然后重试。

最后，我使用以下命令安装了 mysql 客户端库：

```
sudo apt-get install libmysqlclient-dev 
```

**注意**：这也会同时安装`libssl-dev`库。

一切正常。

就这样。

# c# - 我怎样才能访问我的目录

> ID：15212111
> 
> 赞同：0
> 
> 时间：2013-03-04T22:11:00.427
> 
> 标签：c#

我想访问我的目录的路径，但我不能。我在我的代码中放了一个断点：

```
string directoryPath = args[0]; 
```

当我点击 时`args[0];`，它向我展示了这张图片：

```
-       args    {string[3]} string[]
        [0] "C:\\Users\\soft\\Documents\\Visual"    string
        [1] "Studio"    string
        [2] "2010\\Projects\\erereerer\\erereerer\\bin\\Debug\\MAXee\\" string
        directoryPath   null    string
        filesList   null    string[]
        filesListTmp    null    string[]
        opList  null    erereerer.IFileOperation[] 
```

我一直在尝试访问我的目录，但一直失败。我尝试了很多次，但是当我运行我的代码时，它说目录不存在，而目录实际上存在..

这是我的代码：

```
class Program
{
   static void Main(string[] args)
   {
      string directoryPath = args[0];
      string[] filesList, filesListTmp;
      IFileOperation[] opList = { new FileProcNameAfter10(),
                                  new FileProcEnc(),
                                  new FileProcByExt("jpeg"),
                                  new FileProcByExt("jpg"),
                                  new FileProcByExt("doc"),
                                  new FileProcByExt("pdf"),
                                  new FileProcByExt("djvu")
   };

   if (Directory.Exists(directoryPath))
   {
      filesList = Directory.GetFiles(directoryPath);
      while (true)
      {
         Thread.Sleep(500);
         filesListTmp = Directory.GetFiles(directoryPath);

         foreach (var elem in Enumerable.Except<string>(filesListTmp, filesList))
         {
            Console.WriteLine(elem);

            foreach (var op in opList)
            {
               if (op.Accept(elem)) op.Process(elem);
            }
         }
            filesList = filesListTmp;
            if (Console.KeyAvailable == true && Console.ReadKey(true).Key == ConsoleKey.Escape) break;
       }
    }

    else
    {
       Console.WriteLine("There is no such directory.");
       Console.ReadKey();
     }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:16:20.027

> [0] "C:\Users\soft\Documents\Visual" 字符串
> [1] "Studio" 字符串
> [2] "2010\Projects\erereerer\erereerer\bin\Debug\MAXee\" 字符串

它告诉我您正在传递不带引号的参数。

以这种方式调用您的程序：

```
MyApp.exe "C:\Users\soft\Documents\Visual Studio 2010\Projects\erereerer\erereerer\bin\Debug\MAXee\" 
```

或者按照 Blachshma 所说的去做：

```
directoryPath = String.Join(" ", args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:15:43.233

用引号传递目录：

```
MyProgram.exe "C:\Users\soft\Documents\Visual Studio 2010\Projects\erereerer\erereerer\bin\Debug\MAXee\" 
```

或**[加入](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)**`args`代码：

```
directoryPath = String.Join(" ", args); 
```

# html - HTML5 Canvas 行 的宽度不一致

> ID：15212113
> 
> 赞同：0
> 
> 时间：2013-03-04T22:11:05.347
> 
> 标签：html, canvas, html5-canvas

我正在使用以下代码在 HTML5 画布上绘制一个矩形：

```
canvasId = $('#objectData').find('#miImages '+imageId+' .imageContainer canvas').attr("id");
canvas = document.getElementById(canvasId);
context = canvas.getContext("2d");
context.beginPath();
context.rect(coordinateArray[0],coordinateArray[1],coordinateArray[2],coordinateArray[3]);  
context.lineWidth = 2;
context.strokeStyle = "DarkBlue";
context.stroke(); 
```

问题是两条垂直线比两条水平线粗很多，这是什么原因造成的？

编辑：我将高度设置为`89`，宽度设置为`802`。当我删除高度时，矩形不再扭曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:44:46.490

我使用 CSS 而不是 JavaScript 来调整画布的大小，JavaScript 是缩放画布而不是实际调整它的大小。我使用下面的代码解决了这个问题。

```
function applyCanvasSize(){
  $("#objectData img").on('load', function(){
    var theHeight = $(this).height();
    var canvasId = $(this).next('canvas').attr('id');
    var canvas = document.getElementById(canvasId);
    if (canvas.getContext) { 
      canvas.width = 802;
      canvas.height = theHeight;
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T07:45:03.290

有点晚，但有同样的问题。在我的代码中，我正在使用 style.width 和 style.height 更改画布的大小。直接使用宽度和高度代替。最后没有“px”（因此只接受像素？）。你不会再得到失真了。

# c - char* var 之间的区别；和 char *var;?

> ID：15212126
> 
> 赞同：22
> 
> 时间：2013-03-04T22:12:02.333
> 
> 标签：c, pointers, ansi-c

只是想知道之间是否有任何区别：

```
char* var;
char *var; 
```

还是只是偏好问题（间距）？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-04T22:13:58.347

在这种情况下没有区别。但是，您应该更喜欢`char *var;`.

这是因为`*`与变量名关联更紧密，并且**不是基本类型的一部分**。例如，如果您这样做：

```
char* a, b; 
```

你所拥有的是`a`一个指向 - 的指针`char`和`b`一个`char`. 这令人困惑！由于`*`字符更接近`char`关键字，我们期望两个变量的类型都是指向-的指针`char`，但`*`实际上*只*与相关联`a`。（这类似于`char a[10], b;`teppic 在评论中指出的那样；说明`[10]`符同样只与 相关联`a`，因此只会`a`是一个数组。）

正确的声明是：

```
char *a, *b; 
```

将说明符放在变量附近意味着当您*打算*将一个变量作为指针而另一个变量`*`不是时，很容易看到发生了什么：

 *```
char *a, b; 
```

在这种情况下，很明显这`b`不是一个指针。在原始示例 ( `char* a, b;`) 中，我们不知道程序员是否打算`b`成为指针。借用 Douglas Crockford 的话，我们所知道的只是程序员不称职。

有些人喜欢在 : 之前和之后放置一个空格`*`：

```
char * a, * b; 
```

这会成为上述相同问题的牺牲品：如果`b`不是指针，则声明 ( `char * a, b;`) 也可能导致对程序员意图的不确定性。^(因此，我建议不要在变量名1)`*`和变量名之间放置空格。

无论你怎么看，`char* var;`都应该被视为糟糕的风格。根据语言规范，它在语法上是正确的，但会导致代码不可读，因为它*似乎*表明说明`*`符是同一声明中所有变量共享的类型的一部分，而实际上并非如此。（这类似于在同一行上编写一个复杂的函数——它可以工作，但这是一个坏主意。在某些情况下，可读性和可维护性取代了个人风格偏好，这就是其中之一。）

* * *

¹就我个人而言，在处理函数返回值时，我更喜欢在`*` *only后面加一个空格：*

```
char * foo(); 
```

这是明确的：它是一个返回指向指针的函数`char`。

```
char *foo(); 
```

程序员的意思是返回一个指向 - 的函数`char`，还是他的意思是创建一个指向返回的函数的指针`char`？*该语言会将其解析为与其他原型相同，但我们的目标是可读性，这意味着准确地向人类*传达我们的意思，而不仅仅是编译器。*

# base64 - 空字符串是零字节长度的有效 base64 编码数据吗？

> ID：15212127
> 
> 赞同：24
> 
> 时间：2013-03-04T22:12:03.677
> 
> 标签：base64

我的一所大学告诉我空字符串不是有效的 base64 编码数据字符串。我不认为这是真的（他懒得解析它），但是在谷歌搜索了一下甚至检查了[RFC](https://www.rfc-editor.org/rfc/rfc3548)之后，我没有找到任何**明确**说明如何在 base64 中正确编码零字节长度的 blob 的文档.

*所以，问题是：*您是否有指向一些官方文档的链接，其中明确说明了零字节应该如何在 base64 中编码？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-01-30T18:49:48.577

根据[RFC 4648 第 10 节](https://www.rfc-editor.org/rfc/rfc4648#section-10)，测试向量，

```
BASE64("") = "" 
```

我会假设逆也必须成立。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T19:53:10.137

我对此的想法是空字符串可能产生两个可能的 base64 值；可以是空字符串，也可以是完全由填充字符 ('===') 组成的字符串。任何其他有效的 base64 字符串都包含信息。对于第二种情况，我们可以应用 RFC 中的以下规则：

> 如果在字符串末尾发现超过允许数量的填充字符，例如以“===”结尾的 base 64 字符串，则可以忽略多余的填充字符。

由于它们可以被忽略，它们可以从生成的编码字符串中删除而不会产生任何后果，再次给我们留下一个空字符串作为空字符串的 base64 表示。

# c# - anksvn 签入文件

> ID：15212130
> 
> 赞同：0
> 
> 时间：2013-03-04T22:12:21.673
> 
> 标签：c#, svn

我正在将最新版本的 anksvn 用于 Visual Studio 2008 项目文件。我现在想将此代码签入 anksvn，但我遇到了问题。

情况是，我将最新版本的代码签入 anksvn。那也行。

但是我有这个代码的另一个版本，我最初没有从 subversion 中签出。该代码的另一个副本仅用于“演示”。但是，现在此代码需要成为生产代码。因此，我试图确定如何将此代码签入 anksvn。

我知道我能做的是“删除”anksvn 中最新的代码文件夹。然后我可以把这个项目文件夹放到那个位置。因为原始的“演示”代码还包括当前的生产代码。

但是我想看看是否有更好的方法来实现这个目标。我可以使用分支/切换选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:23:45.470

演示代码是否完全从 Subversion 中签出？我知道你没有检查它，但它检查了吗？如果是，您可以将此代码提交回 Subversion，然后更新您的工作目录。

如果他的代码与 Subversion 无关，您将不得不采取更复杂的路线：您必须手动将更改复制到您的代码中。

由于您使用的是 Windows，因此您应该看看[Beyond Compare](http://www.scootersoftware.com/)，这是商业代码，但您可以免费下载限时演示 - 有足够的时间来处理您的情况。我一直使用 Beyond Compare 来比较两个不同的目录或 Java jar 文件或 zip 档案等。它不仅可以快速显示差异，而且可以将这些差异从一个复制到另一个。

除了作为客户之外，我与 Beyond Compare 的制造商 Scooter 软件没有任何关系。

# f# - F# 中的增量值

> ID：15212133
> 
> 赞同：12
> 
> 时间：2013-03-04T22:12:40.353
> 
> 标签：f#

也许这太简单了，但我在网络上找不到任何答案
我试图在 F# 中增加值（就像`count++`在 C# 中一样）。
我不想使用“可变”选项，我只想看一个例子，F# 中的增量函数应该是什么样的。
以及如何使用它。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-04T22:17:05.487

只有在使用可变值或使用可变引用单元格（本质上是一个存储可变值的简单对象）时，与 C++ 相同的“增加值”的想法才有意义。如果你有一个可变的参考单元，你可以使用`incr`函数：

```
let count = ref 0
incr count 
```

如果您使用可变变量，则没有内置函数，您需要编写`count + 1`：

```
let mutable count = 0
count <- count + 1 
```

如果您使用不可变值编写代码，那么您通常只需编写`count + 1`然后将结果传递给某个函数（或其他地方 - 这取决于具体情况）。例如，要计算 F# 列表的长度，您可以编写：

```
let rec length list =
  match list with 
  | [] -> 0
  | _::tail -> 1 + (length tail) 
```

在此示例中，表达式`1 + (...)`是对应`i++`于 C++ 代码中的代码，该代码遍历列表并计算其长度。表达式的结果没有分配给新变量，因为它直接作为`length`函数的结果返回。

**编辑**函数的参数是不可变的，这意味着您不能更改它们的值。正如 Lee 所提到的，您可以使用变量阴影来用新值隐藏旧值 - 但请注意，这只具有局部效果（就像定义一个具有不同名称的新变量来存储新值一样）。例如：

```
let rec length list count =
  match list with 
  | [] -> count
  | _::tail -> 
     let count = count + 1 // Variable shadowing used here
     length tail count 
```

您不能编写函数来简化该行`let count = count + 1`，如上所述，这相当于在最后一行编写`let newCount = count + 1`然后使用`newCount`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T07:01:23.333

您无法模拟后增量运算符，但可以进行前增量

```
let inline (+=) (x : byref<_>) y = x <- x + y

let mutable a = 0
&a += 1 
```

或者

```
let inline incv (x : byref<_>) = x <- x + LanguagePrimitives.GenericOne; x

let mutable b = 0
incv &b 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T22:22:47.807

如果你不想使用 mutable，那么你就不能像`++`在 C# 中那样进行破坏性更新。您可以使用具有相同名称的新变量来隐藏变量，例如

```
let x = 4;
let x = x + 1 in (x+4)  //returns 8 
```

虽然你不能把它写成一个函数。

编辑：如果确实想使用可变变量，那么您可以创建一个修改[ref](http://msdn.microsoft.com/en-us/library/dd233186.aspx)的函数：

```
let increment (ir: int ref) = ir := !ir + 1 
```

然后，您可以将其用作

```
let i = ref 1
increment i
let iv = !i    //iv contains 2 
```

正如托马斯在他的回答中指出的那样，这个函数已经存在并被调用`incr`。

# apache - .htaccess 规则：多个域到一个 ssl 域

> ID：15212134
> 
> 赞同：1
> 
> 时间：2013-03-04T22:12:45.417
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我已经尝试让以下工作现在工作 2 小时。

我有多个域，例如：Test.Xy.zz Test.Abc.de Test.mmm.mm

现在只有 Test.xy.zz 获得了 ssl 证书，并且在其上运行的应用程序仅限于此。我希望所有非 ssl 请求 - 包括 test.xy.zz 和所有其他域都转到[https://test.xy.zz](https://test.xy.zz)

希望有人可以提供帮助。

**可能的解决方案：**

```
RewriteEngine On

RewriteCond %{HTTP_HOST} !test\.xy\.zz
RewriteRule ^(.*) https://test.xy.zz/$1 [QSA,R=301]

RewriteCond %{HTTPS} !on
RewriteRule ^(.*) https://test.xy.zz/$1 [QSA,R=301] 
```

希望这对任何人都有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:32:40.083

```
 RewriteCond %{HTTPS} !on [OR]
 RewriteCond %{HTTP_HOST} !^test.xy.zz$
 RewriteRule (.*) https://test.xy.zz$1 [QSA,R=301] 
```

# java - 同步两部手机的系统时间

> ID：15212146
> 
> 赞同：7
> 
> 时间：2013-03-04T22:13:20.197
> 
> 标签：java, android, time, synchronization

我正在做一个研究项目，其中 2 部 android 手机必须同时播放相同的声音文件，为此我需要将每部手机中的系统时间同步到毫秒。我的问题是，如何在代码级别实现这一点？现在所有的方法都只能做秒级同步。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T22:22:34.963

你没有。如果你需要它，你需要一个实时操作系统，而 Android 不是。太多的事情可能会出错——时钟偏差、垃圾收集、dalvik JIT 差异等。你可以使用实时时钟函数来接近它，但你永远不会在任何编写的东西中获得那种性能保证在多任务操作系统上的虚拟机之上。

# c# - 将 cookie 从一个 WebClient 复制到另一个？

> ID：15212148
> 
> 赞同：2
> 
> 时间：2013-03-04T22:13:24.050
> 
> 标签：c#, .net, webclient, parallels

我想知道是否可以将 cookie 从一个 Web 客户端复制到另一个客户端。

## 原因

我正在使用并行 Web 请求，它会在每个新线程上创建新的 Web 客户端实例。

## 问题

信息是敏感的，需要使用 post 请求授权并保存 cookie。所以基本上那些新的 Web 客户端实例无法访问。我不想授权正在创建的每一个 Web 客户端，所以我想知道是否有可能以某种方式将 cookie 从一个 Web 客户端复制到另一个 Web 客户端。

## 示例代码

```
public class Scrapper
{
    CookieAwareWebClient _web = new CookieAwareWebClient();

    public Scrapper(string username, string password)
    {
        this.Authorize(username, password); // This sends correct post request and then it sets the cookie on _web
    }

    public string DowloadSomeData(int pages)
    {
        string someInformation = string.Empty;

        Parallel.For(0, pages, i =>
        {
            // Cookie is set on "_web", need to copy it to "web"
            var web = new CookieAwareWebClient(); // No authorization cookie here
            html = web.DownloadString("http://example.com/"); // Can't access this page without cookie

            someInformation += this.GetSomeInformation(html)
        });

        return someInformation;
    }
}

// This is cookie aware web client that I use
class CookieAwareWebClient : WebClient
{
    private CookieContainer cookie = new CookieContainer();

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = cookie;
        }
        return request;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T22:27:37.630

我相信您可以在对象之间共享`CookieContainer`实例。`WebClient`因此，一旦您通过了身份验证，就可`CookieContainer`以为您创建的每个新客户端重复使用相同的身份验证。请注意您的后续请求不会修改`CookieContainer`，否则您可能会遇到竞争条件，因为我怀疑该类对于并行修改是线程安全的。

首先，`CookieAwareWebClient`使用可以传入 cookie 容器的自定义构造函数进行修改。另外，提供一种通过属性获取容器引用的方法：

```
class CookieAwareWebClient : WebClient
{
    private CookieContainer cookie;

    public CookieContainer Cookie { get { return cookie; } }

    public CookieAwareWebClient() {
        cookie = new CookieContainer();
    }

    public CookieAwareWebClient(CookieContainer givenContainer) {
        cookie = givenContainer;
    }
} 
```

然后你的`Scrapper`类应该在身份验证后将它自己的传递`CookieContainer`给每个客户端：

```
public string DowloadSomeData(int pages)
{
    string someInformation = string.Empty;
    CookieContainer cookie = this._web.Cookie;

    Parallel.For(0, pages, i =>
    {
        // pass in the auth'ed cookie
        var web = new CookieAwareWebClient(cookie);
        html = web.DownloadString("http://example.com/");

        someInformation += this.GetSomeInformation(html)
    });

    return someInformation;
} 
```

# zsh - zsh提示功能未运行

> ID：15212152
> 
> 赞同：6
> 
> 时间：2013-03-04T22:13:41.593
> 
> 标签：zsh

我正在尝试了解 zsh 中的自定义提示，但遇到以下问题：

使用此代码：

```
print_dir(){
  echo $PWD 
}

export PROMPT=$'%{%F{134}%}$(print_dir)%{%f%}
%{%F{231}%}❯%{%f%} ' 
```

我得到这个输出而不是函数的结果：

```
$(project_pwd) 
```

我知道这里不需要这个功能，但我想在学习时扩展它。

为什么函数没有执行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T22:27:42.217

你需要做`setopt prompt_subst`。这记录在`zshoptions`手册页中，可在[zsh 网站](http://zsh.sourceforge.net/Doc/Release/Options.html#Prompting)上查看。

# azure - 我们能否在 Azure 云服务的单个实例中拥有一个辅助角色和一个 Web 角色

> ID：15212154
> 
> 赞同：1
> 
> 时间：2013-03-04T22:13:47.767
> 
> 标签：azure, azure-sql-database, azure-web-roles, azure-worker-roles, azure-web-app-service

我正准备将我的网站、数据库和后台调度程序移到 Azure 平台上。

我必须使用具有网络和工作者角色的云服务。现在我的问题是，我是否需要为每种类型的角色提供单独的实例，或者一个实例能够托管多种类型的角色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:30:04.157

您不能同时拥有 Web 和辅助角色实例。它可以是其中之一。但是，可以让 Web 角色进行后台处理，因此它可以托管后台工作负载。

看到这个 SO question 有几个选项

[每天早上的 Azure WebRole 计划任务](https://stackoverflow.com/questions/14401878/azure-webrole-scheduled-task-every-morning)

那是关于每天早上运行一项任务。显然，您可以根据您的应用程序更频繁地执行此操作。

但请注意此操作的可扩展性限制。一旦您的流量增加，将其分解为单独的网络和工作角色将是有意义的。

事实上，即使您的后台工作负载很轻，从一开始就采用单独的架构并使用 XS 实例进行后台处理可能仍然更有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:58:38.190

从技术上讲，您不能同时担任这两种类型的角色。然而，Web 角色与辅助角色一样，只是配置了 IIS。因此，您可以将它们合并为一个 Web 角色 - IIS 将在单独的进程中运行，并且角色入口点`Run()`将为“后端”处理运行一些无限循环。看到[这个类似的问题](https://stackoverflow.com/q/6266560/57428)。

这将使缩放更加复杂。单独角色的整个想法（请记住，您不仅可以拥有一个 Web 角色和一个辅助角色，例如，如果适合您的解决方案，您还可以拥有四个辅助角色和两个 Web 角色）是您可以单独扩展它们。

看起来一旦您将两个角色合并为一个角色，您就无法再精细地扩展它们了。大多数时候这不是真的——你只需要改变指标。

例如，您希望每分钟为每千个 HTTP 请求运行一个 Web 角色实例，为后端队列中的每十个请求运行一个工作角色实例。好的，这意味着每千个 HTTP 请求需要与后端队列中的十个项目相同的处理能力。因此，您制定了一个新的指标，它同时接受参数并推断出一些实例。就像您每分钟有 5000 个请求和后端队列中有 20 个请求一样 - 您需要 7 个 am 合并角色实例。

这不适用于所有应用程序，但大多数应用程序都会很好地使用这种方法。好处是您可以避免任何一个角色因为当前负载转移到另一个角色而处于空闲状态的情况。

# python - 在字符串中查找公式的有效方法

> ID：15212158
> 
> 赞同：0
> 
> 时间：2013-03-04T22:14:14.663
> 
> 标签：python, regex

说我有字符串`testString = "x=4+y and y = 8"`

我想运行`findIndices(testString)`并取回包含公式项的索引列表

即这应该返回`[0,1,2,3,4,10,11,12,13,14]`

我想这会奏效

```
find equalSigns
foreach equalSign
   look to the left until you see a space not preceded by an operator
        put current index in  formulalist
   look to the right until you see a space not preceded by an operator
        put current index in formulalist
   put the equalSign index in the formulalist

return formulalist 
```

1）在python中有更有效的方法吗？它是什么？（正则表达式？）

2）如果这是有效的：我如何编写“向左看”和“向右看”子例程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:19:09.370

我不确定你要做什么，但是

```
string.split("=")  
string.index("=") 
```

例如：

```
In [1]: a= "y = 25*x  + 42*z"
In [2]: a.split("=")
Out[2]: ['y ', ' 25*x  + 42*z']
In [3]: a.index("=")
Out[3]: 2 
```

可能对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T22:41:41.563

正如 gnibbler 的评论所说，在你考虑解析它之前写下语法。也就是说，如果“公式”是其中没有空格且至少有一个等号的字符串，则以下函数将从字符串中返回公式列表：

```
def formulas(s):
   return filter(lambda x: '=' in x, s.split()) 
```

例如：
`formulas('x=4+y and y=8')`产生`['x=4+y', 'y=8']`
`formulas("x=4+y and y = 8")`产生`['x=4+y', '=']` `formulas('x=4+y and y=8 etc z=47+38*x + y')`产生`['x=4+y', 'y=8', 'z=47+38*x']`

当然，这些结果不是索引列表，并且字符串`y = 8`不被视为公式。但是，从更大的角度来看，在进行更详细的处理之前，简化语法并将原始字符串拆分为单独的公式可能对您更有用。

# php - Symfony2 html5 表单多个验证消息可能吗？

> ID：15212160
> 
> 赞同：0
> 
> 时间：2013-03-04T22:14:20.783
> 
> 标签：php, html, symfony, validation

在 symfony2 表单中使用 html5 验证具有强大的功能。

在互联网上搜索了一段时间后，我找到了这个**很好的**解决方案：

*   [覆盖 symfony2 上的表单验证消息](https://stackoverflow.com/questions/12257491/overriding-form-validation-messages-on-symfony2)

但这总是给我**一个**验证消息

> 请输入有效的电子邮件地址好吗？

多个验证消息呢？就像文档中描述的那样：

*   [http://symfony.com/doc/2.1/book/translation.html#book-translation-constraint-messages](http://symfony.com/doc/2.1/book/translation.html#book-translation-constraint-messages)

所以我可以对**一条**消息使用 html5 表单验证，或者我可以对多条消息使用普通验证（如链接中），但没有像 html5 这样的客户端验证（当然，我可以实现一些验证功能，但我更喜欢使用内置的 html5 功能）

*编辑：我做了一些研究，看起来这个 html5 表单验证与 symfony2 框架无关，对吗？所以基本上没有创建太多的客户端代码，我只能检查“必需”（这是这个属性的原始原因）。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:30:00.507

> 编辑：我做了一些研究，看起来这个 html5 表单验证与 symfony2 框架无关，对吗？所以基本上没有创建太多的客户端代码，我只能检查“必需”（这是这个属性的原始原因）。

基本上是的，您可以在构建表单时向标签添加一些属性`builder->add("name","text",array("attr"=>array(" ... "` ，并且是的，标记字段为必填项对您的 html 标记具有必需的属性。如果你想关闭 html5 验证，你可以在表单标签中使用 novalidate 属性，然后使用客户端 js 库来完成工作或其他任何事情。

**我喜欢使用 js 的一个技巧**，在提交时，将表单作为 ajax 请求发送到服务器，然后获取新的 html 呈现的表单作为响应，这样我就可以将 symfony 和 javascript 结合起来而无需js 验证库。您只需要使用一些 ajax 编写一个 on submit 处理程序。

# symfony - 可以禁用 Symfony 的国际要求吗？

> ID：15212163
> 
> 赞同：3
> 
> 时间：2013-03-04T22:14:31.440
> 
> 标签：symfony, php-extension

我在共享主机上有一个 Symfony 2 项目。显然供应商不会为 PHP 打开 Intl 扩展。有没有办法打开它，还是我被迫重新评估整个项目？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T22:24:38.350

如果您的 Web 服务器不提供`intl`扩展，您可以使用该`Locale`组件。

它可以使用 composer 或使用[Git 存储库](https://github.com/symfony/Locale)轻松安装。

**来源**：[http ://symfony.com/doc/master/components/locale.html](http://symfony.com/doc/master/components/locale.html)

**更新**

该`Locale`组件自 2.3 版以来已弃用，并将在 Symfony 3.0 中删除。您应该改用该`Intl`组件（[http://symfony.com/doc/master/components/intl.html](http://symfony.com/doc/master/components/intl.html)）。

# css - 在 FireFox 中有效 在 Chrome 中无效？背景图像：线性渐变（到底部，rgb（53、53、53）、rgb（34、34、34））；

> ID：15212166
> 
> 赞同：0
> 
> 时间：2013-03-04T22:14:50.327
> 
> 标签：css

```
background-image: linear-gradient(to bottom, rgb(53, 53, 53), rgb(34, 34, 34)); 
```

为什么这个 CSS 属性在 Chrome 中无效但在 Firefox 中有效？以及有关如何使其在两种浏览器中均有效的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:18:33.627

Chrome 使用不同的代码将其渲染为背景渐变。

[您可以在此处](http://css-tricks.com/css3-gradients/)找到代码示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:17:57.480

您需要使用浏览器特定的供应商前缀。

我通常使用一个生成器，它会为你提供所有浏览器的代码。

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:18:00.850

WebKit 已更新以匹配规范语法，因此您应该像这样获得最大的浏览器支持：

```
background: -webkit-gradient(linear, center top, center bottom, from(#917c4d), to(#ffffff));
background: -webkit-linear-gradient(#917c4d, #ffffff);
background: -moz-linear-gradient(#917c4d, #ffffff);
background: -o-linear-gradient(#917c4d, #ffffff);
background: -ms-linear-gradient(#917c4d, #ffffff);
background: linear-gradient(#917c4d, #ffffff); 
```

# newline - 在 Markdown 中模仿换行符

> ID：15212168
> 
> 赞同：28
> 
> 时间：2013-03-04T22:14:53.893
> 
> 标签：newline, markdown

我有一个 HTML 文本输入`<input type="text" />`，用户可以在其中输入一个字符串。因为它是文本输入而不是文本区域，所以用户不能输入换行符。

用户可以在文本输入中输入 Markdown 元素，以便稍后重新显示数据时对其进行格式化。但是，它们的选项是有限的，因为它们不能输入换行符（例如标题、列表）。

最后，不允许用户在字段中输入 HTML 元素（为了防止 XSS 攻击），因此他们不能`<br/>`在文本输入中输入元素。

我想知道 Markdown 中是否有一种方法可以模拟单行文本输入字段中的换行符，当稍后重新显示为格式化文本时，将显示为换行符或换行符。

* * *

**示例**（*假设`@cr`在 Markdown 中表示这个所需的换行符*）：

输入：`#A Header @cr ##A Subheader @cr Some text`

输出：

# 标题

## 副标题

一些文字

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2015-09-27T16:57:33.150

根据 Markdown 文档：

> 当您确实想`<br />`使用 Markdown 插入中断标记时，请以两个或更多空格结束一行，然后键入 return。

```
One  \nTwo  \nThree  \nFour 
```

然后将渲染成四个单独的行。

**笔记** `that between each entry and newline, there are two spaces.`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-02-06T15:19:55.357

在某些降价风格中，您可以**使用两个或更多空格来结束行，**这将产生一个换行符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T22:38:29.810

> 我想知道 Markdown 中是否有一种方法可以在单行文本输入字段中模拟换行符...

AFAIK，不。

[当然，Markdown 有多种风格，但原始 Markdown 语法](http://daringfireball.net/projects/markdown/syntax)中没有这样的功能。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2020-05-27T02:46:04.140

添加一个空代码块

根据标记的呈现方式，您可以看到它，但它肯定没有文本

# javascript - 与 HAML 格式结合使用时，jquery collapse all 不起作用

> ID：15212169
> 
> 赞同：0
> 
> 时间：2013-03-04T22:15:05.080
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, haml

我的 Exapand All 按钮在以下 jsfiddle 中工作正常（折叠和展开）。

[http://jsfiddle.net/HqXMN/6/](http://jsfiddle.net/HqXMN/6/)

但是以 HAML 格式使用时，“全部展开/全部折叠”功能不起作用。我无法确定问题所在。

这是我在 HAML 中的代码。

```
%a{ href:"#", class: "expandcollapse"}
  %i.icon-white.icon-plus-sign
  Expand All
#programs-accordion.accordion
  - @patient_summary.programs.each_with_index do |program, index|
    .accordion-group
      .accordion-heading
        .accordion-toggle.group-accordion-toggle
          %a{ href: "#collapse-#{index}", data: { parent: '#programs-accordion', toggle: 'collapse' }}
            %i.icon-plus
          %a= program.name
         .accordion-body{id: "collapse-#{index}", class: (@office.to_i == office.id) ? "" : "collapse" }
           .accordion-inner 
            - office.positions.each_with_index do |position, index|
              #measures-accordion.accordion
                .accordion-group
                  .accordion-heading
                    .row-fluid
                      .span2{class: "offices-#{position.status}"}= position.status
                      .span1= position.results.first.value
                      .span2= position.results.first.value_date_time.blank? ? '' : Date.parse(position.results.first.value_date_time)
                      .span5= position.name 
```

注意：我已经更新了 jsfiddle 链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:19:55.053

好的。因此，您的代码似乎没有任何明显错误。我能够获取生成的内容并将其放入 jsFiddle 并且效果很好。

我无法发布 jsFiddle，因为我需要附带代码，但我没有任何相关代码可以使用。对不起。

检查以确保您的 javascript 中没有任何遗漏，但除此之外似乎没有任何问题。

我仍然建议您研究渲染部分，即使只是从代码的清洁度的角度来看。希望那些对你有帮助。

# asp.net - MS SQL 查询参数已通过，但在 VB.net 中无法识别

> ID：15212172
> 
> 赞同：0
> 
> 时间：2013-03-04T22:15:21.373
> 
> 标签：asp.net, vb.net, visual-studio-2010, sql-server-2008

一段时间以来，我一直在努力解决这个问题。

我有一个从表中检索字段并从中填充输入的函数，但是当我尝试执行该函数时，我收到一条错误消息，提示“过程或函数'Quad_GetAllFields'需要参数'@subWeek'，但未提供”。

我知道我正在提供参数，因为我可以从函数中的任何位置访问它。

功能是：

```
Protected Sub setAllFields(ByVal myConnection As SqlConnection, ByVal subWeek As String, ByVal site As String)
    Dim myCommand = New SqlCommand("Quad_GetAllFields", myConnection)
    myCommand.Parameters.AddWithValue("@subWeek", subWeek)
    myCommand.Parameters.AddWithValue("@site", site)
    Dim myDataReader As SqlDataReader = myCommand.ExecuteReader()
    If myDataReader.Read() Then
        'populate fields
    End If
End Sub 
```

存储过程是：

```
ALTER PROCEDURE dbo.Quad_GetAllFields
(
@subWeek VARCHAR(50),
@site VARCHAR(20)   
)
AS
BEGIN
SELECT TOP (1) ID, Priority1, Priority2, Priority3, Priority4, Highlight1, Highlight2, Highlight3, Highlight4, Update1, Update2, Update3, Ahead1, Ahead2, Ahead3, Outlook1, Outlook2, Comments, Site, Week, Submitted FROM Charts WHERE Week = @subWeek AND Site = @site ORDER BY ID DESC
END 
```

对我做错了什么有帮助吗？

我在使用存储过程方面相当新，但我仍然找不到问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:01:26.940

您必须将`SqlCommand's` [`CommandType`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtype%28v=vs.110%29.aspx)属性设置为[`StoredProcedure`](http://msdn.microsoft.com/en-us/library/system.data.commandtype.aspx)，默认为`Text`：

```
Protected Sub setAllFields(ByVal myConnection As SqlConnection, ByVal subWeek As String, ByVal site As String)
    Dim myCommand = New SqlCommand("Quad_GetAllFields", myConnection)
    myCommand.CommandType = CommandType.StoredProcedure
    myCommand.Parameters.AddWithValue("@subWeek", subWeek)
    myCommand.Parameters.AddWithValue("@site", site)
    Dim myDataReader As SqlDataReader = myCommand.ExecuteReader()
    If myDataReader.Read() Then
        'populate fields'
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:19:57.350

如果您的字符串参数@subWeek 为空，您可能会收到此错误。

如果您的字符串为空，则需要为@subWeek 传递 DBNull.Value。

尝试硬编码 @subWeek 值

```
myCommand.Parameters.AddWithValue("@subWeek", "Myvalue") 
```

这应该可以正常工作。

# html - IE9 中的问题

> ID：15212174
> 
> 赞同：2
> 
> 时间：2013-03-04T22:15:27.437
> 
> 标签：html, css, internet-explorer, internet-explorer-9

我在 IE9 的下拉菜单中设置默认值时遇到问题。它似乎适用于其他浏览器。我的所有搜索都产生了尝试使用 JQuery 来设置该属性的人。但我根本没有使用 JQuery。这是一个示例：

```
<select id="selectType" name="selectType">
<option label="1" selected="selected">1</option>
<option label="2">2</option>
<option label="3">3</option>
</select> 
```

我忘了补充一点，问题是它默认显示一个空白字段而不是“1”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:17:20.963

这应该可以正常工作，尽管我个人认为这`selected`是一个布尔属性，因此它的存在就是所需要的：

```
<option label="1" selected>1</option> 
```

话虽这么说，我不确定`label`那里有一个有效的属性。我相当确定它们是用于`<optgroup>`标签的。尝试删除该属性。

# scala - Scala中println中的匿名函数

> ID：15212179
> 
> 赞同：1
> 
> 时间：2013-03-04T22:15:48.613
> 
> 标签：scala

假设我们这样做

```
object Test {
    def main(args: Array[String]){
        println(() => "2pac")     // passing anon function 
        println((() => "shakur")()) // passing anon function, with empty args
        println(biggie)           // passing named function, no args
    }

    def biggie = "smalls"
} 
```

那将打印出来

```
<function>
shakur
smalls 
```

为什么与命名函数具有相同类型签名的匿名函数需要显式的空参数？为什么`biggie`打印时调用但`2pac`函数不调用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T22:27:50.343

让我们逐行进行：

```
println(() => "2pac") 
```

在这里，您将一个函数传递给 println。记住 Scala 中的函数只是一个对象，所以 println 只是调用类型`toString`上的方法`Function0`，它总是输出`<function>`（实际上对我来说它输出`<function0>`）

```
println((() => "shakur")()) 
```

现在您在将 anon 函数传递给 之前调用它`println`，因此它不是接收`Function0`对象，而是接收函数的返回值并输出字符串

```
println(biggie) 
```

最后，这里`biggie`不仅仅是 a `Function0`，它是一个**空**函数，这意味着该函数在被引用时执行，并且不需要显式调用`()`。这是因为您在没有参数列表的情况下定义了它，而不是空参数列表。因此，当您调用 时`println(biggie)`，会评估该`biggie`函数并将其结果发送到`println`

如果你调用`println(biggie _)`，下划线告诉编译器*不要*评估函数，而是将函数本身传递给`println`。同样，如果您定义`biggie`为：

```
def biggie() = "smalls" 
```

当您调用`println(biggie)`它时，其行为与传递 0-arg anon 函数相同。

# java - android facebook 登录 Graphuser 详细信息

> ID：15212183
> 
> 赞同：2
> 
> 时间：2013-03-04T22:16:05.620
> 
> 标签：java, android

我有一个 buttonLoginLogout Button，它是一个 facebook 登录按钮（我将 facebook sdk 导入到我的项目中），这是我在 mainActivity 中的方法：

它取自 Facebook 活动的 LoginUsingActivityActivity 示例，我没有看到 GraphUser 或未完成的方法，所以我怎样才能获得通过 facebook 连接的用户详细信息...

我尝试添加“void onCompleted”方法（最后如您所见），但是我无法覆盖它并且我无法获取用户详细信息，并且当我登录到 Facebook（并且登录成功）时，它没有到达 oncompleted方法...

如何获取成功登录 facebook 的 GraphUser？

另外，我在这里添加了 onCompleted 方法，它不在这里，它说它没有覆盖另一个方法..

多谢

Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

```
 Session session = Session.getActiveSession();
    if (session == null) {
        if (savedInstanceState != null) {
            session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
        }
        if (session == null) {
            session = new Session(this);
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        }
    }

    updateView();
}

@Override
public void onStart() {
    super.onStart();
    Session.getActiveSession().addCallback(statusCallback);
}

@Override
public void onStop() {
    super.onStop();
    Session.getActiveSession().removeCallback(statusCallback);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    Session session = Session.getActiveSession();
    Session.saveSession(session, outState);
}

private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {
        //button logout string
        buttonLoginLogout.setOnClickListener(new OnClickListener() {
            public void onClick(View view) { onClickLogout(); }
        });
    } else {
        //button log in string
        buttonLoginLogout.setOnClickListener(new OnClickListener() {
            public void onClick(View view) { onClickLogin(); }
        });
    }
}

private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    } else {
        Session.openActiveSession(this, true, statusCallback);
    }
}

private void onClickLogout() {
    Session session = Session.getActiveSession();
    if (!session.isClosed()) {
        session.closeAndClearTokenInformation();
    }
}

private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        updateView();
    }

    //doesnt get here, why?????????
    public void onCompleted(GraphUser user, Response response) {

    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T00:00:48.597

把它写在一个方法中：

```
final Session session = Session.getActiveSession();
    if (session != null && session.isOpened()) {
        // If the session is open, make an API call to get user data
        // and define a new callback to handle the response
        Request request = Request.newMeRequest(session, new Request.GraphUserCallback() {
            @Override
            public void onCompleted(GraphUser user, Response response) {
                // If the response is successful
                if (session == Session.getActiveSession()) {
                    if (user != null) {
                        user_ID = user.getId();//user id
                        profileName = user.getName();//user's profile name
                        userNameView.setText(user.getName());
                    }   
                }   
            }   
        }); 
        Request.executeBatchAsync(request);
    } 
```

并确保仅在成功登录后调用此方法。这意味着你应该从`onActivityResult`.

# codeigniter - CodeIgniter Active Record 选择 2 个或更多表

> ID：15212189
> 
> 赞同：0
> 
> 时间：2013-03-04T22:16:15.627
> 
> 标签：codeigniter, activerecord, codeigniter-2

我在旧代码中设置了这个 sql 语句，并希望将其移至活动记录，我分阶段解决的问题是如何执行

```
 SELECT news_items.id FROM 

 (SELECT news_items.* FROM news_items 
 JOIN feeds ON feeds.id=news_items.feed 
 LEFT JOIN news_item_country ON news_item_country.id=news_items.country 
 WHERE news_items.id=30758 
 ORDER BY date_item DESC ) 

 AS news_items

 GROUP BY news_items.id 
 ORDER BY date_item DESC 
```

尝试使用 Active Record 执行此操作，首先我创建了进入选择内部的选择，至少这是我认为需要完成的。

```
$news_items = $this->db->select('default_news_items.*')
              ->from('default_news_items ')
              ->join('default_feeds','default_feeds.id=default_news_items.feed')
->join('default_news_item_country','default_news_item_country.id=default_news_items.country','left')
->join('default_news_item_options','default_news_item_options.id=default_news_items.options','left')
              ->where($where)                        
              ->order_by('date_item DESC')
              ->limit($limit)
              ->get(); 
```

接下来，我创建实际的选择并引用 from 中的另一个选择

```
 if ($query = $this->db->select("
                            news_items.id,
                    ->from($news_items)
                    ->group_by('news_items.id')
                    ->get()) { 
```

它没有用，所以我问是否有人有这方面的经验以及如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:42:32.530

看看我的这个答案，这可能有助于你如何实现它。

[在 codeigniter 中使用 Mysql WHERE IN 子句](https://stackoverflow.com/questions/11023318/using-mysql-where-in-clause-in-codeigniter/11031431#11031431)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:28:32.020

您不能直接在本机活动记录语法中执行子查询。查看此答案以获取解决方案：

[codeigniter 活动记录中的子查询](https://stackoverflow.com/questions/6047149/subquery-in-codeigniter-active-record)

（作者为活动记录子查询写了一个库[http://labs.nticompassinc.com/CodeIgniter-Subqueries/](http://labs.nticompassinc.com/CodeIgniter-Subqueries/)）

如果没有这种或类似的技术，您至少需要为子查询 ( `$news_items`) 保留当前的选择代码。

# http - 为什么 netsh http add sslcert 从 Powershell ps1 文件中抛出错误？

> ID：15212190
> 
> 赞同：5
> 
> 时间：2013-03-04T22:16:19.827
> 
> 标签：http, powershell, ssl-certificate, guid, netsh

我正在尝试从 powershell ps1 文件中使用 netsh http 添加 sslcert，但它不断抛出错误：

```
$guid = [guid]::NewGuid()

netsh http add sslcert ipport=0.0.0.0:443 certhash=5758B8D8248AA8B4E91DAA46F069CC1C39ABA718 appid={$guid} 

'JABnAHUAaQBkAA' is not a valid argument for this command.
 The syntax supplied for this command is not valid. Check help for the correct syntax.

  Usage: add sslcert [ipport=]<IP Address:port>
         [certhash=]<string>
         [appid=]<GUID>
         [[certstorename=]<string>
          [verifyclientcertrevocation=]enable|disable
          [verifyrevocationwithcachedclientcertonly=]enable|disable
          [usagecheck=]enable|disable
          [revocationfreshnesstime=]<u-int>
          [urlretrievaltimeout=]<u-int>
          [sslctlidentifier=]<string>
          [sslctlstorename=]<string>
          [dsmapperusage=]enable|disable
          [clientcertnegotiation=]enable|disable] 
```

参数：

```
 Tag                       Value

    ipport                  - IP address and port for the binding.
    certhash                - The SHA hash of the certificate. This hash
                              is 20 bytes long and specified as a hex
                              string.
    appid                   - GUID to identify the owning application.
    certstorename           - Store name for the certificate. Defaults
                              to MY. Certificate must be stored in the
                              local machine context.
    verifyclientcertrevocation - Turns on/off verification of revocation
                                 of client certificates.
    verifyrevocationwithcachedclientcertonly - Turns on/off usage of
                                               only cached client
                                               certificate for revocation checking.
    usagecheck              - Turns on/off usage check. Default is enabled.
    revocationfreshnesstime - Time interval to check for an updated
                              certificate revocation list (CRL). If this
                              value is 0, then the new CRL is updated
                              only if the previous one expires. (in
                              seconds)
    urlretrievaltimeout     - Timeout on attempt to retrieve certificate
                              revocation list for the remote URL.
                              (in milliseconds)
    sslctlidentifier        - List the certificate issuers that can
                              be trusted. This list can be a subset of
                              the certificate issuers that are trusted
                              by the machine.
    sslctlstorename         - Store name under LOCAL_MACHINE where
                              SslCtlIdentifier is stored.
    dsmapperusage           - Turns on/off DS mappers. Default is
                              disabled.
    clientcertnegotiation   - Turns on/off negotiation of certificate.
                              Default is disabled.

Remarks: adds a new SSL server certificate binding and corresponding client
         certificate policies for an IP address and port.

Examples:

     add sslcert ipport=1.1.1.1:443 certhash=0102030405060708090A0B0C0D0E0F1011121314 appid={00112233-4455-6677-8899
-AABBCCDDEEFF} 
```

我可能是错的，但我相信这与我如何在我的 powershell 脚本文件中指定 appid GUID 有关。有人可以帮我解决错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T22:48:56.267

Powershell 解析 cmd 命令的方式有问题。这将成功执行命令：

```
$guid = [guid]::NewGuid()
$Command = "http add sslcert ipport=0.0.0.0:443 certhash=5758B8D8248AA8B4E91DAA46F069CC1C39ABA718 appid={$guid}"
$Command | netsh 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-18T14:27:11.583

错误的原因是大括号必须用反引号 (`) 转义。

以下命令将从 PowerShell 命令行运行：

这将在 PowerShell 命令行中起作用：

```
$AppId = [Guid]::NewGuid().Guid
$Hash = "209966E2BEDA57E3DB74FD4B1E7266F43EB7B56D"

netsh http add sslcert ipport=0.0.0.0:8000 certhash=$Hash appid=`{$Guid`} 
```

重要的细节是用反引号 (`) 转义每个 { }。

如果 netsh 引发错误 87，请尝试附加 certstorename my

没有必要使用变量。它只是为了方便。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T13:53:14.027

下面的代码将起作用，`&`这里用于调用带参数的程序，并`"appid={$guid}"`使其传递字符串值。

```
& netsh http add sslcert ipport=0.0.0.0:443 certhash=5758B8D8248AA8B4E91DAA46F069CC1C39ABA718 "appid={$guid}" 
```

# html - 用背景颜色替换导航栏

> ID：15212192
> 
> 赞同：0
> 
> 时间：2013-03-04T22:16:22.133
> 
> 标签：html, css, twitter-bootstrap

我正在使用 twitter bootstrap 开发响应式网站....
当我缩小浏览器窗口时，导航栏会折叠....
但是在折叠的导航栏中我需要显示背景颜色....
但它显示背景图片. 如何替换它`background-color: #14486b;`
我不确定这个背景图像是从哪里出现的

```
<div class="nav-collapse in collapse" style="height: auto;">
            <ul class="nav">
              <li class="active"><a href="/docs/examples/product.html">Product</a></li>
              <li><a href="/docs/examples/solution.html">Solutions</a></li>
              <li><a href="/docs/examples/service.html">Services</a></li>
              <li class="iphonePartnerLink"><a href="/docs/examples/partner.html">Partners</a></li>
              <li class="iphoneContactLink"><a href="/docs/examples/contact.html">Contact</a></li>
            </ul>

            <ul class="nav" id="navSecond">
              <li class=""><a href="/docs/examples/partners.html">Partners</a></li>
              <li><a href="/docs/examples/contact.html">Contact</a></li>
            </ul>
            <form class="navbar-form pull-right">
              <input class="span2" type="text" placeholder="Email">
              <input class="span2" type="password" placeholder="Password">
              <button type="submit" class="btn">Sign in</button>
            </form>
          </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:38:41.593

您必须使用媒体查询将图像替换为背景颜色：

```
 @media (min-width: 768px) and (max-width: 979px) {

         .navbar-inner{
                 background-image: url("http://www.defie.co/designerImages/bg_bar.png");/*remove this */
                 background-color:#14486b;
               }

           }

 /* Landscape phone to portrait tablet */
  @media (max-width: 767px) {

           .navbar-inner{
                 background-image: url("http://www.defie.co/designerImages/bg_bar.png");
                 background-color:#14486b;
               }
        }

 /* Landscape phones and down */
  @media (max-width: 480px) {

             .navbar-inner{
                 background-image: url("http://www.defie.co/designerImages/bg_bar.png");
                 background-color:#14486b;
               }
        } 
```

如果要修复顶部的导航栏：

```
.navbar {
 left: 0;
 position: absolute;/*remove this line if you want to fix it */
 right: 0;
 top: 0;
  } 
```

评论后编辑：您已在媒体查询中将背景图像设置为无，并且颜色被注释掉，如下所示：

```
@media (max-width:980px){
         .navbar-inverse .navbar-inner{
          background-image: none;
          /*background-color: red;*/
        }
       }
@media (max-width: 767px) {
     .navbar-inverse .navbar-inner {
  background-image: none;
    /*background-color: red;*/
     }
    }

    @media (max-width: 480px) {
      .navbar-inverse .navbar-inner{
          background-image: none;
          /*background-color: red;*/
        }
      } 
```

请用我上面提到的样式替换样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:28:46.583

尝试分析图像的来源。这样做的好工具是 Firebug for Firefox [https://addons.mozilla.org/de/firefox/addon/firebug/](https://addons.mozilla.org/de/firefox/addon/firebug/) 或 Chrome 的开发工具（在 Chrome 中按 F12 打开它）。在这两种工具中，您都可以检查 DOM 树的单个组件并查看所有附加的 CSS 样式（及其源代码）。

如果原因是背景图像，您可以通过以下方式覆盖样式：

```
#idOfComponent {
    background-image:none
} 
```

# .net - 为什么这个微软异步服务器示例不应该阻塞？

> ID：15212193
> 
> 赞同：3
> 
> 时间：2013-03-04T22:16:27.957
> 
> 标签：.net, vb.net

我是 VB.net 和套接字编程的新手，这是一个新手问题，所以请友好:)

我已经阅读了十几篇关于创建简单的异步聊天服务器（如 app）的文章。尽管我对编程并不陌生，但我仍处于学习 .net 模型的早期阶段。

[这个 Microsoft vb.net 和 c sharp 示例](http://msdn.microsoft.com/en-gb/library/fx6588te.aspx)应该是一个异步服务器来监听客户端连接，但是当我将代码复制并粘贴到 Window Loaded 事件处理程序中的 vb.net 表单中时，它会阻止我的 GUI。我不明白为什么。它应该是异步的。在我将客户端代码粘贴到不同的 vb.net 表单中并运行它之前，该窗口不会显示。然后显示服务器上的 GUI。:(

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:19:35.590

看到在主线程中调用了吗`while (true)`？`StartListening`那东西实际上完全使用了它被调用的线程。

它仍然是异步的。问题是什么是异步的。有这个 main 方法来编排套接字，而 IO 实际上与它是异步的。但方法本身不一定与调用它的代码异步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:24:22.337

不要调用`StartListening`UI 线程。从新线程调用它或重写它以使用 UI 线程模型。然后它将按预期异步运行（但可能会遇到新问题，例如跨线程访问）。

请注意，在示例中，调用`StartListening()` *never 返回*或程序将立即退出。也就是说，该示例*演示*了异步操作的使用，但将它们包装在“同步”控制台程序中。毕竟，它是一个样本，而不是一个旨在直接组合的组件。

# javascript - 在我的 js 生成的“跳棋”板上添加一个额外的层

> ID：15212198
> 
> 赞同：0
> 
> 时间：2013-03-04T22:16:52.993
> 
> 标签：javascript, jquery, css

我有以下小提琴（单击 1 查看板）：http: [//jsfiddle.net/mauricederegt/vNpYe/1/](http://jsfiddle.net/mauricederegt/vNpYe/1/)

这部分代码：

```
 this.getHTML = function () {
        return '<div class="tile tile' + this.type + '" style="left:' + this.x + 'px; top:' + this.y + 'px"></div>';
    }; 
```

使用以下代码生成“跳棋”板：

```
var levels = [
    [ //lvl1
        //layer1
        [1, 2, 1],
        [0, 0, 0, 0, 0, 0],
        [2, 1, 2],
        [0, 0, 0, 0, 0, 0],
        [1, 2, 1],
        [0, 0, 0, 0, 0, 0]
        //layer2
        //[0, 3, 4],
        //[0, 0, 0, 0, 0],
        //[0,4,3],
        //[0, 0, 0, 0, 0]
    ],
    [ //lvl2
        [1,2,0,1,2,1],
        [1, 2]
    ]

]; 
```

目前它只有一层。我想在第一层之上添加一个额外的层。基本上在这个板上添加一个板（稍后会增加更多层）。该板的代码应如下所示：

```
//layer2
  [0, 3, 4],
  [0, 0, 0, 0, 0],
  [0, 4, 3],
  [0, 0, 0, 0, 0] 
```

如果尝试将它放在额外的标签{}中，那么它会在进入level2之前先完成它之间的循环，但无法让它工作。玩了一下z-index，也没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:33:45.513

请注意，您的 1 级图层都在同一个“级别”...

请参阅下面的更正版本：

```
var levels = [
    [ //level one
        [//layer one of level one
            [1, 2, 1],
            [0, 0, 0, 0, 0, 0],
            [2, 1, 2],
            [0, 0, 0, 0, 0, 0],
            [1, 2, 1],
            [0, 0, 0, 0, 0, 0]
        ],
        [ //layer one of level one
           [0, 3, 4],
           [0, 0, 0, 0, 0],
           [0,4,3],
           [0, 0, 0, 0, 0]
        ]
    ],
    [ //level two
        [//layer one of level two
            [1,2,0,1,2,1],
            [1, 2]
        ]
    ]

]; 
```

# c# - 在数据表中分组

> ID：15212206
> 
> 赞同：-3
> 
> 时间：2013-03-04T22:17:31.517
> 
> 标签：c#, linq, datatable

我有一个数据表：

```
DataTable table = new DataTable();

table.Columns.Add("Name", typeof(string));
table.Columns.Add("Value", typeof(string));          

table.Rows.Add("A", "High");
table.Rows.Add("B", "Low");
table.Rows.Add("A", "Low");
table.Rows.Add("C", "High");
table.Rows.Add("B", "Medium");
table.Rows.Add("A", "High");
table.Rows.Add("A", "High"); 
```

我想使用 LINQ 对我的结果进行分组，例如：

```
Name   value  Count
-------------------
A      High    3
A      Low     1
B      Medium  1
B      Low     1
C      High    1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:24:45.120

此 Linq to DataSet 查询将返回分组值作为匿名对象

```
var query = from r in table.AsEnumerable()
            group r by new { 
               Name = r.Field<string>("Name"),
               Value = r.Field<string>("Value")
            } into g
            select new {
                g.Key.Name,
                g.Key.Value,
                Count = g.Count()
            }; 
```

用法：

```
foreach(var item in query)
{
    // item.Name
    // item.Value
    // item.Count
} 
```

如果您希望结果作为另一个 DataTable，那么您可以使用MSDN 文章[How to: Implement CopyToDataTable Where the Generic Type T Is Not a DataRow](http://msdn.microsoft.com/en-us/library/bb669096.aspx)`CopyToDataTable`中描述的扩展：

```
DataTable result = query.CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:24:58.390

这是一种方法：

```
IEnumerable<IGrouping<Tuple<string,string>, DataRow>> groups= table.Rows.OfType<DataRow>().GroupBy(x=> new Tuple<string,string>(x["Name"].ToString(), x["Value"].ToString()));

foreach (var group in groups)
{
    //Name Value: Count
    Console.WriteLine(group.Key.Item1 + " " + group.Key.Item2 + ": " + group.Count());
} 
```

# c# - 用 TimeSpan 和 DateTime 计算

> ID：15212209
> 
> 赞同：1
> 
> 时间：2013-03-04T22:17:40.270
> 
> 标签：c#, datetime, timespan

根据当前时间，我需要计算商店是否实际营业。到目前为止，开放时间一直保持为`TimeSpan`：

```
public TimeSpan OpeningTime { get; set; }
public TimeSpan ClosingTime { get; set; } 
```

如何计算商店现在是否营业？我尝试了一些想法，但解决方案看起来很麻烦。一个原因是需要在 和 之间进行`TimeSpan`转换`DateTime`。`TimeSpan`开放时间的格式是否正确？当时单独上课会更有意义吗？

*注：工作日单独处理*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T22:21:43.473

它在以下情况下开放：

```
OpeningTime <= DateTime.Now.TimeOfDay <= ClosingTime 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T22:25:16.783

嗯， a是*两次之间差异*`TimeSpan`的度量，而不是*实际时间*。

 **假设您使用来指示*相对于午夜*`TimeSpan`的开放和关闭时间，请尝试

 *```
TimeSpan currentTime = DateTime.Now.TimeOfDay;   
bool isOpen = currentTime > OpeningTime && currentTime < ClosingTime; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:23:49.940

尝试类似：

```
var timeOfDay = DateTime.Now.TimeOfDay;
if (timeOfDay >= OpeningTime && timeOfDay < ClosingTime)
{
    // open now!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T22:26:32.490

您可以使用`DateTime.Now.TimeOfDay`并与您的 2 个 TimeSpan 进行比较

```
 OpeningTime = new TimeSpan(9, 30, 0); // 9:30AM
    ClosingTime = new TimeSpan(17, 30, 0); // 5:30AM

    bool isOpen = DateTime.Now.TimeOfDay >= OpeningTime && DateTime.Now.TimeOfDay <= ClosingTime; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T22:26:35.007

```
TimeSpan OpeningTime = new TimeSpan(8, 0, 0);
TimeSpan ClosingTime = new TimeSpan(16, 0, 0);

TimeSpan now = DateTime.Now - DateTime.Now.Date;

if (now > OpeningTime && now < ClosingTime)
{ 
    //...
} 
```***

# highcharts - 高图表 - 带梯度和阈值的面积图

> ID：15212210
> 
> 赞同：1
> 
> 时间：2013-03-04T22:17:47.107
> 
> 标签：highcharts

我有一个可变阈值的面积图；我已经为这个值画了一条线。

是否可以为阈值以上的填充设置一种颜色，为低于阈值的填充设置一种颜色？

如果图表越过线，我有一个适合账单的渐变，但如果数据全部低于或全部高于它，则不是。

（将尝试用 jsfiddle 更新我的问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-01T13:40:55.693

虽然这是一个老问题，但我觉得无论如何我都应该回答：

我将系列一分为二，并添加了“虚拟”中值（阈值）来代替“错误”系列中的任何值。

`[1, 2, 5, 8, 6, 4, 3, 10]`有阈值的数据`5`

被分成：

数据 1`[5, 5, 5, 8, 6, 5, 5, 10]`颜色 绿色

数据 2`[1, 2, 5, 5, 5, 4, 3, 5]`红色

`5`当我无论如何都画一条黑线时，这些图表看起来是正确的。我还必须修改“悬停”功能以显示原始 Y 值，而不是拆分系列中的值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T23:32:28.660

我相信最简单的方法是使用`arearange`图表。您的面积图中不会只有一个数据集，而是在面积范围内有两个数据集，每个阴影区域一个。见[http://jsfiddle.net/gXpHH/2/](http://jsfiddle.net/gXpHH/2/)

# sql-server - 在 SSMS 对象资源管理器详细信息视图中排序

> ID：15212217
> 
> 赞同：2
> 
> 时间：2013-03-04T22:18:09.103
> 
> 标签：sql-server, ssms

我在 Win7 Pro x64 上安装了 SQL Server 2012 的开发人员版。从 Management Studio 中，我可以拉出对象资源管理器详细信息视图并查看给定数据库中所有表的列表。如果我按模式排序，我希望它随后按表名排序。但它不会那样做。它使用其他一些神秘属性来对给定模式中的表进行排序。

是否可以按第二列排序，或者更改二级排序以查看表名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:27:27.960

不，对象资源管理器详细信息仅支持单级排序，就像`ORDER BY x`在 SQL Server`y`中以任意方式排序一样。

# mysql - 使用 group by 排序分组项目

> ID：15212218
> 
> 赞同：1
> 
> 时间：2013-03-04T22:18:12.790
> 
> 标签：mysql, sql

以下代码用于 Sql Server。
但我无法让它正常工作；状态只是不会按顺序排列并首先显示最新的状态。
我该如何解决？

```
<%
    SQL = "SELECT S.MEMBERID, S.StatusMessage, S.StatusPlace, S.StatusCity, S.StatusDateEntered"
    SQL = SQL & " FROM STATUSES S"
    SQL = SQL & " GROUP BY S.MEMBERID"
    SQL = SQL & " ORDER BY S.StatusDateEntered DESC"
    Set objStatuses = objConn.Execute(SQL)
%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:27:18.620

您的代码不起作用，因为您正在执行`GROUP`on `MEMBERID`，但是您没有聚合任何未分组的列...这为每个其他列提供了一个随机值`MEMBERID`...这不一定成为最新的。接下来，您将按这些乱码数据进行排序，这不是您所期望的。

要解决此问题，您需要执行*groupwise-max*，它可以有效地实现为包含for each`JOIN`的子查询：`MAX(StatusDateEntered)``MEMBERID`

```
SELECT 
    S.MEMBERID, 
    S.StatusMessage, 
    S.StatusPlace, 
    S.StatusCity, 
    S.StatusDateEntered
FROM 
    STATUSES S
    JOIN (
        SELECT MEMBERID, MAX(S2.StatusDateEntered) AS MaxStatusDateEntered
        FROM STATUSES
        GROUP BY MEMBERID
    ) S2 
        ON S.StatusDateEntered = S2.MaxStatusDateEntered
        AND S.MEMBERID = S2.MEMBERID
ORDER BY S.StatusDateEntered DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:43:36.617

迈克尔非常感谢您的帮助。我刚刚发现了 LIMIT 子句。它也成功了。

```
 SQL = "SELECT S.MEMBERID, S.StatusMessage, S.StatusPlace, S.StatusCity, S.StatusDateEntered"
    SQL = SQL & " FROM STATUSES S"
'   SQL = SQL & " GROUP BY S.MEMBERID"
    SQL = SQL & " ORDER BY S.StatusDateEntered DESC LIMIT 1"
    Set objStatuses = objConn.Execute(SQL) 
```

# c - goocanvas - 坐标系和缩放到光标

> ID：15212219
> 
> 赞同：4
> 
> 时间：2013-03-04T22:18:14.877
> 
> 标签：c, gtk, cursor, zooming, scale

我正在尝试在`goocanvas`位于 a 内的 a内实现对指针/光标的缩放`scrolledwindow`。不幸的是，有关使用的坐标系的文档不是最佳的。

那么有人能解释一下为什么下面的概念代码不应该*工作*吗？（详见内联代码注释）

便利结构

```
 typedef struct {
     gdouble x;
     gdouble y;
 } Coords;
 typedef Sheet GooCanvas; // actually a subclass, but anyways 
```

只是一个方便的辅助功能（剥离测试）

```
gboolean sheet_get_adjustments (const Sheet *sheet, GtkAdjustment **hadj, GtkAdjustment **vadj)
{
GtkWidget *parent;
GtkScrolledWindow *scrolled;
parent = gtk_widget_get_parent (GTK_WIDGET (sheet));
scrolled = GTK_SCROLLED_WINDOW (parent);
*hadj = gtk_scrolled_window_get_hadjustment (scrolled);
*vadj = gtk_scrolled_window_get_vadjustment (scrolled);
return TRUE;
} 
```

以像素为单位获取指针位置（已验证，按预期工作）

```
gboolean sheet_get_pointer_pixel (Sheet *sheet, gdouble *x, gdouble *y)
{
GtkAdjustment    *hadj, *vadj;
gdouble           x1, y1;
gint              _x, _y;
GdkDeviceManager *device_manager;
GdkDevice        *device_pointer;
GdkRectangle      allocation;

device_manager = gdk_display_get_device_manager (
                gtk_widget_get_display (GTK_WIDGET (sheet)));
device_pointer = gdk_device_manager_get_client_pointer (device_manager);
gdk_window_get_device_position (gtk_widget_get_window (GTK_WIDGET (sheet)),
                                    device_pointer,
                                    &_x, &_y, NULL);

gtk_widget_get_allocation (GTK_WIDGET (sheet), &allocation);

_x -= allocation.x;
_y -= allocation.y;

x1 = (gdouble) _x;
y1 = (gdouble) _y;

if (!sheet_get_adjustments (sheet, &hadj, &vadj))
    return FALSE;

x1 += gtk_adjustment_get_value (hadj);
y1 += gtk_adjustment_get_value (vadj);

*x = x1;
*y = y1;
return TRUE;
} 
```

对于实际的缩放校正，我们采用以像素为单位的指针位置，该位置是恒定的并且与 goo 画布比例无关。在将比例应用于画布*之前*和*之后*，根据指针位置（以像素为单位）计算 goocanvas 位置。不同之处在于指针在缩放后的位置和它应该在的位置之间的偏移量（我们希望夹在画布位置）。在画布坐标中获取画布的左上角，应用偏移量并滚动到新的左上角位置（[goo_canvas_scroll_to](http://developer.gnome.org/goocanvas/unstable/GooCanvas.html#goo-canvas-scroll-to)总是向左上角滚动）

```
void change_zoom(Sheet *sheet, gdouble f)
{
Coords a;
Coords pixel_pointer;
    Coords goo_pointer_before, goo_pointer_after;

GtkWidget *w;
GtkAdjustment *hadj, *vadj;

if (sheet_get_adjustments (sheet, &hadj, &vadj)) {
    a.x = gtk_adjustment_get_value (hadj);
    a.y = gtk_adjustment_get_value (vadj);
} else {
    a.x = a.y = 0.;
}

w = GTK_WIDGET (sheet);

//top left, not used, just to "visualize" the visible canvas range
Coords goo_tl = {a.x, a.y}; 
Coords pixel_tl = goo_tl;
goo_canvas_convert_to_pixels (GOO_CANVAS (sheet), &pixel_tl.x, &pixel_tl.y);
NG_DEBUG ("### top left [pixel]  %lf,%lf", pixel_tl.x, pixel_tl.y);

sheet_get_pointer_pixel (sheet, &pixel_pointer.x, &pixel_pointer.y);
goo_pointer_before = pixel_pointer;
goo_canvas_convert_from_pixels (GOO_CANVAS (sheet), &goo_pointer_before.x, &goo_pointer_before.y);
NG_DEBUG ("### pointer before scale[canvas] %lf,%lf", goo_pointer_before.x, goo_pointer_before.y);
////////////////////////////////////////////////////////////////////////////////////////////
goo_canvas_set_scale (GOO_CANVAS (sheet), f * goo_canvas_get_scale (GOO_CANVAS (sheet)));
////////////////////////////////////////////////////////////////////////////////////////////
goo_pointer_after = pixel_pointer;
goo_canvas_convert_from_pixels (GOO_CANVAS (sheet), &goo_pointer_after.x, &goo_pointer_after.y);
NG_DEBUG ("### pointer after scale[canvas] %lf,%lf", goo_pointer_after.x, goo_pointer_after.y);

// this needs to be redone, as scaling might have changed the bar positions
if (sheet_get_adjustments (sheet, &hadj, &vadj)) {
    a.x = gtk_adjustment_get_value (hadj);
    a.y = gtk_adjustment_get_value (vadj);
} else {
    a.x = a.y = 0.;
}
Coords goo_tl2 = {a.x, a.y}; //top left, after scroll (in pixel coords)
goo_canvas_convert_from_pixels (GOO_CANVAS (sheet), &goo_tl2.x, &goo_tl2.y); // to goo canvas coords
NG_DEBUG ("### top left after zoom[canvas] %lf,%lf", goo_tl2.x, goo_tl2.y);

// the delta in goo canvas coords
const Coords goo_delta = {goo_pointer_before.x - goo_pointer_after.x, goo_pointer_before.y - goo_pointer_after.y};
NG_DEBUG ("### delta[canvas] %lf,%lf", goo_delta.x, goo_delta.y)

//apply the offset to the _current_ top left corner
goo_tl2.x -= goo_delta.x;
goo_tl2.y -= goo_delta.y;
goo_canvas_scroll_to (GOO_CANVAS (sheet), goo_tl2.x, goo_tl2.y);
NG_DEBUG ("### top left after scroll[canvas] %lf,%lf", goo_tl2.x, goo_tl2.y);

NG_DEBUG ("\n\n\n");
return;
} 
```

**问题是，尽管显示的所有内容都存在`goo_delta` *问题*，但指针并未固定在 goo 坐标上。所以我的猜测是，我需要一个辅助校正因子，或者我在现有代码中有一个错误。**

示例（`f=1.1`，光标靠近画布的左上角）

```
 sheet_change_zoom +++ ### top left [pixel]  0.000000,0.000000
 sheet_change_zoom +++ ### pointer before scale[canvas] 7.000000,12.000000
 sheet_change_zoom +++ ### pointer after scale[canvas] 6.363636,10.909091
 sheet_change_zoom +++ ### top left after zoom[canvas] 42.045455,30.318182
 sheet_change_zoom +++ ### delta[canvas] 0.636364,1.090909
 sheet_change_zoom +++ ### top left after scroll[canvas] 41.409091,29.227273
 sheet_change_zoom +++ 

 sheet_change_zoom +++ ### top left [pixel]  50.105000,35.365000
 sheet_change_zoom +++ ### pointer before scale[canvas] 47.772727,40.136364
 sheet_change_zoom +++ ### pointer after scale[canvas] 43.429752,36.487603
 sheet_change_zoom +++ ### top left after zoom[canvas] 79.632231,56.789256
 sheet_change_zoom +++ ### delta[canvas] 4.342975,3.648760
 sheet_change_zoom +++ ### top left after scroll[canvas] 75.289256,53.140496
 sheet_change_zoom +++ 

 sheet_change_zoom +++ ### top left [pixel]  110.231000,77.803000
 sheet_change_zoom +++ ### pointer before scale[canvas] 81.074380,63.057851
 sheet_change_zoom +++ ### pointer after scale[canvas] 73.703982,57.325319
 sheet_change_zoom +++ ### top left after zoom[canvas] 110.037566,78.196844
 sheet_change_zoom +++ ### delta[canvas] 7.370398,5.732532
 sheet_change_zoom +++ ### top left after scroll[canvas] 102.667168,72.464313
 sheet_change_zoom +++ 
```

任何类型的提示，指向涵盖此特定问题的 goocanvas 示例的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T01:36:35.500

我最终通过查看 goocanvas 源来修复它，看看他们是如何通过实际滚动来中心魔法的。据此，我将画布指针位置移动到中心，缩放并将其移回。这里重要的是，向后移动只是像素位置（这里：只是开始时指针和中心之间的像素差异！）除以累积的缩放因子！（`goo_canvas_get_scale`用来获取）

注意：以上描述不包含对基于钳位问题的更正。

伪代码：

```
delta = pointer_pos_in_pixel - center_pos_in_pixel
top_left_in_pixel read
top_left_in_pixel -= delta
convert_to_goo_coords (top_left_in_pixel → top_left_in_goo)
scroll_to (top_left_in_goo)

scale (f)

delta /= get_absolute_scale()
top_left_in_pixel read
top_left_in_pixel -= delta
convert_to_goo_coords (top_left_in_pixel → top_left_in_goo)
scroll_to (top_left_in_goo) 
```

注意：要以像素为单位计算小部件的中心，请使用`gtk_adjustment_get_page_size`代替`gtk_widget_get_allocation`

* * *

**添加：**

我为牛至实现了它，所以对于那些喜欢真正源代码（GPLv2.0）的人，请参阅[https://github.com/drahnr/oregano/blob/master/src/sheet/sheet.c](https://github.com/drahnr/oregano/blob/master/src/sheet/sheet.c)`sheet_change_zoom`上的函数

# javascript - JQuery 不工作 iPhone Objective-c

> ID：15212220
> 
> 赞同：1
> 
> 时间：2013-03-04T22:18:18.240
> 
> 标签：javascript, jquery, iphone, objective-c, uiwebview

我一直在尝试在我的 UIWebView 中运行 jQuery，但它会提示“未定义”。 ![在此处输入图像描述](../Images/20020b0909decf1fbdb884827bb97321.png)

Obj-C 代码：

```
- (void)webViewDidFinishLoad:(UIWebView *)WebView {
NSString *js = [NSString stringWithFormat:@"alert($(\"[property='og:title']\").attr('content'));"];
    [webView stringByEvaluatingJavaScriptFromString:js];

} 
```

`javascript:alert($("[property='og:title']").attr('content'));`但是，当我在 safari 窗口 ( [http://instagram.com/lecrae/](http://instagram.com/lecrae/) ) 中运行 Javascript 时，它会以正确的值发出警报：

![在此处输入图像描述](../Images/5de18ca25dfde611e7f60ffffeec4aec.png)

为什么这不起作用？我该如何解决？提前致谢。

*注意：我正在运行这个 jQuery 代码，它工作得很好：*

```
NSString *BGIMG = [webView stringByEvaluatingJavaScriptFromString:@"$(\".user-avatar\").css('background-image');"]; 
```

# ios - 打开图形对象喜欢和评论

> ID：15212222
> 
> 赞同：1
> 
> 时间：2013-03-04T22:18:25.610
> 
> 标签：ios, facebook, facebook-opengraph

我目前正在开发一个与 Facebook 的 Open Graph 集成并使用单点登录的原生 iOS 应用程序。现在我很远：

*   单点登录作品
*   该应用程序获得以下权限：`user_about_me`、`user_likes`和`read_stream``publish_actions`
*   应用程序成功发布了一个新的 Open graph 对象

我已经设置了一个带有 Open Graph 对象/操作的 Facebook 应用程序，并且 Open Graph 调试器显示绿灯。

现在的问题是，我想跟踪这个图形对象被喜欢的频率，或者有多少人评论它，我被卡住了。

我已经阅读了很多帖子并尝试了 FQL 和 Graph API 都没有成功。

例如：

```
SELECT url, normalized_url, share_count, like_count, comment_count,total_count, commentsbox_count, comments_fbid, click_count FROM link_stat where url='http://example.org/objects/G0DnVgFGfX/' 
```

结果是：

```
{
  "data": [
    {
      "url": "http://example.org/objects/G0DnVgFGfX/", 
      "normalized_url": "http://example.org/objects/G0DnVgFGfX/", 
      "share_count": 0, 
      "like_count": 0, 
      "comment_count": 0, 
      "total_count": 0, 
      "commentsbox_count": 0, 
      "comments_fbid": 495931393801732, 
      "click_count": 0
    }
  ]
} 
```

不管它被点赞多少次，或被评论多少次，我总是得到`0`结果。

我还运行了以下具有匹配结果的查询：

```
SELECT user_id FROM like WHERE object_id IN (SELECT id FROM object_url WHERE url = "http://example.org/objects/G0DnVgFGfX/") 
```

回报：

```
{
  "data": [
  ]
} 
```

结果是一个空数组，而`SELECT id FROM object_url WHERE url = "http://example.org/objects/G0DnVgFGfX/"`确实给了我一个 ID。

为了提供更多背景信息，这是我要创建的工作流程：

*   用户通过单点登录在移动应用上登录
*   用户创建“本地”存储的新对象并作为 Open Graph 对象发布到 Facebook
*   当朋友在 Facebook 上喜欢或评论对象时，用户会收到推送通知
*   用户查看对象并查看对象被点赞或评论的次数
*   用户查看对象的详细信息并可以查看评论

甚至可以做我想做的事情吗？我发现 API 很容易与 Facebook 分享内容，但检索信息却要困难得多。

当然，我有一个自定义服务准备好轮询 Facebook（或者更好的是，使用它的实时更新）来进行推送通知。

有没有人有任何建议可以为我指明正确的方向？

**我是根据 Open graph object url 而不是 iOS 方法返回的 ID 来查找评论和喜欢的`startForPostWithGraphPath`。**

**使用返回的ID查找评论和喜欢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:48:52.707

我是根据 Open graph 对象 url 而不是 iOS 方法 startForPostWithGraphPath 返回的 ID 来查找评论和喜欢的。

使用返回的ID查找评论和喜欢！

# wordpress - Wordpress-在将个人资料信息添加到作者框之前检查可用值

> ID：15212226
> 
> 赞同：0
> 
> 时间：2013-03-04T22:18:50.773
> 
> 标签：wordpress, wordpress-theming

我制作了一个简单的 Wordpress 主题，并在帖子底部使用了作者框。它目前显示一个名称，该名称链接到作者所有帖子的搜索结果，并显示他们的简历。我想在底部添加链接，输出指向所有“联系信息”的链接。此主题的选项将是电子邮件、雅虎 IM、Jabber、AIM、Twitter、Facebook 和 Google +。

我知道我可以`<?php the_author_meta('thing'); ?>`用来踢出每个链接。但我希望它在创建链接之前检查这些字段是否已填写。我如何使用内置的 Wordpress 好东西来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:51:42.397

您可以测试这些字段是否设置为：

```
<?php 

$value=get_the_author_meta( $field, $userID ); 

if(strlen($value)>0){
    // do stuff
}
?> 
```

# html - 在浮动容器内对齐元素绝对底部（左右浮动）

> ID：15212232
> 
> 赞同：0
> 
> 时间：2013-03-04T22:19:31.003
> 
> 标签：html, css, css-float

我想将文本与容器底部对齐。我知道我可以`position: relative;`在容器和`position: absolute; bottom: 0;`内部元素上使用来完成此操作。但是，我有像这样的浮动元素：

```
 float: left;                 .align-bottom (and also float: left)
++++++++++++++++++++++++++++++++++++++++++++++++
+     #blah                    |               +
+                              |               +
+ Title            btn1 btn2   | TEXT          +
++++++++++++++++++++++++++++++++++++++++++++++++ 
```

左侧浮动元素的大小不固定。

如何使用 CSS 和 HTML 将**TEXT**对齐到正确容器的底部？

到目前为止，我已经尝试过：

```
.align-bottom {
  /* the 2nd floated element, on right side */
  position: relative;
  overflow: auto;
  height: 100%;
}
.align-bottom div {
  position: absolute;
  bottom: 0;
} 
```

CSSDesk：[http](http://cssdesk.com/kNE98) : //cssdesk.com/kNE98（类似 jsFiddle，但没有 JS）

我已经看到了一些相关的问题（虽然不是很多两个浮动容器），包括：[垂直对齐与绝对定位](https://stackoverflow.com/questions/14472794/vertical-align-with-absolute-positioning)但它没有太大帮助，因为浮动部分的高度相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:35:56.910

```
body{position:relative}
.align-bottom {
  position: absolute;
  bottom: -50px;
} 
```

不要在 CSSDesk 上签入，因为 iframe 的高度为 100%，它会将底部 div 发送到页面底部。但是使用此代码，div 将位于正文的底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:38:49.427

因此，我在您希望具有相同高度的两列周围添加了一个父包装器，以及一个使包装器成为浮动元素的完整高度的 cf（clearfix）类。然后我设置了元素的宽度（29%），使它恰好位于“左”div 的右侧。使用绝对位置并将其设置为底部：0 让它坐得很好。

这是带有正确代码的 cssdesk 链接：http: [//cssdesk.com/SjSFQ](http://cssdesk.com/SjSFQ)

问候

# javascript - Google 地图标记工具提示未显示（API v3）

> ID：15212234
> 
> 赞同：1
> 
> 时间：2013-03-04T22:19:40.570
> 
> 标签：javascript, google-maps

我正在使用 Google Maps API v3 实现一个带有标记和提示的相当标准的地图。

我正在尝试一步一步地进行，当我的标记可点击时我被卡住了。我在文档中读到，默认情况下标记是可点击的，并且将显示`title`参数设置的任何内容。

我成功地在我的地图上的预期位置显示了我的标记。但我无法显示工具提示。标记看起来可点击（光标更改），但点击它们时没有任何反应。我应该期待工具提示出现。

这是我的代码，它是我在 API 文档中找到的内容的简单实现，有一些曲折。

**注意：**我正在遍历一个`stores`JS 对象以获取我的所有数据。该`name`属性是纯文本。

```
/*  Show Stores Data on Map
-----------------------------------------------------  */

var center = new google.maps.LatLng( 47.56980820673984, -71.09390248632815 );

function initialize()
{
  var mapOptions = {
  center   : center,
  zoom     : 6,
  mapTypeId   : google.maps.MapTypeId.ROADMAP,
  zoomControl : true,
  disableDefaultUI : true
};

theMap = new google.maps.Map(
  document.getElementById("storemap"), mapOptions );

/*  place markers on the map  */
$.each( stores, function(i,v)
{
  stores[i]['marker'] = new google.maps.Marker(
    {
      position : new google.maps.LatLng( this.coords.lat, this.coords.lng ),
      map      : theMap,
      title    : this.name
    });
});

}

initialize(); 
```

我错过了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:36:37.503

感谢你们，我意识到我完全误解了文档。

我确实感到困惑`tooltip`。`InfoWindow`我的项目需要一个 InfoWindow，工具提示是出现在标记悬停上的简单文本，而 InfoWindows 需要它们自己的构造函数。

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:25:18.117

你可能误用了 Jquery 的 .each，试试这个：

```
/*  place markers on the map  */
stores.forEach(function( store ){
  var tmpmarker = new google.maps.Marker(
    {
      position : new google.maps.LatLng( store.coords.lat, store.coords.lng ),
      map      : theMap,
      title    : store.name
    }
  );
  google.maps.event.addListener(tmpmarker, 'click',
    (function(a){ 
      return function(){
        console.log(JSON.stringify(a, null, 2));
      };  
    })(store)
  );
  store['marker'] = tmpmarker;
}); 
```

据我所知，单击标记时没有默认弹出窗口。标题属性应在鼠标悬停时显示为工具提示。

# ios - 按下时使用 UIViewAnimationTransitionFlipFromRight 翻转 UIButton 并在“另一侧”显示新按钮

> ID：15212238
> 
> 赞同：0
> 
> 时间：2013-03-04T22:20:00.227
> 
> 标签：ios, uiview, uibutton, uiviewanimation, uiviewanimationtransition

为 MOXY 编辑。

我有一组顶部带有图像的按钮和一组视图为背景颜色的按钮。当我单击一个按钮时，我想检索该按钮索引并使用该索引来获取另一个视图的适当背景颜色..并使用该信息翻转按钮（带有图像）并“将其翻转”到显示背景颜色。

我的屏幕组成是 ViewControllersView->TileView->（按钮数组）。

```
 -(void)viewDidAppear:(BOOL)animated{
 _viewContents = [model getRequestedView];  //this retrieves an array of UIButtons(24 
  //of them) whose frames and background colors have already been initialized to fit
   //within the TileView.
 _viewFrontImageContents =[model getRequestedViewFrontCardImagesWithFrame:_viewContents];

for(int screenViewIndex = 0; screenViewIndex < [_viewContents count]; screenViewIndex++){
    [TileView addSubview:[_viewFrontImageContents objectAtIndex:screenViewIndex]];
    [[_viewFrontImageContents objectAtIndex:screenViewIndex] addTarget:self action:@selector(frontOfCardPushed:) forControlEvents:UIControlEventTouchUpInside];
    //[TileView addSubview:[_viewContents objectAtIndex:screenViewIndex]];
    //[[_viewContents objectAtIndex:screenViewIndex] addTarget:self action:@selector(frontOfCardPushed:) forControlEvents:UIControlEventTouchUpInside];
}

} 
```

//getRequestedViewFrontCardImagesWithFrame 方法

```
-(NSMutableArray *)getRequestedViewFrontCardImagesWithFrame:(NSArray *)views{
        NSMutableArray *cards = [[NSMutableArray alloc] init];
        UIImage *frontOfCardImage = [UIImage imageNamed:@"Back_of_Tile"];
        UIButton *frontOfCardView;

        for(int viewIndex = 0; viewIndex < [views count]; viewIndex++){
            frontOfCardView = [[UIButton alloc] initWithFrame:[[views objectAtIndex:viewIndex] frame]];
            frontOfCardView.backgroundColor = [UIColor colorWithPatternImage:frontOfCardImage];
  //setting the tag of each frontCard to match the view index to keep them aligned.
            frontOfCardView.tag = viewIndex;
            [cards addObject:frontOfCardView];

            if(viewIndex == 0){
              NSLog(@"first frontcard frame %@, first _viewContentsFrame %@", [cards objectAtIndex:0], [views objectAtIndex:0]);
    }
        }
        return cards;
    } 
```

上面我添加了 UIButtons，上面有一个图像来表示“扑克牌的正面”。所述按钮的索引与 _viewContents 数组的索引完全匹配。我设置每个按钮以匹配已经初始化的按钮的框架（大小和位置）。

```
-(IBAction)frontOfCardPushed:(id)sender{
int containerViewIndex = -1;
UIButton *pressedButton = (UIButton *)sender;
NSLog(@"Button Index: %i", pressedButton.tag);
containerViewIndex = pressedButton.tag;
UIView *container = [TileView viewWithTag:containerViewIndex];
UIView *viewToShow = [_viewContents objectAtIndex:containerViewIndex];
NSLog(@"container: %@, viewToShow: %@", container, viewToShow);
//viewToShow.frame = container.frame;
//NSLog(@"container: %@, viewToShow: %@", container, viewToShow);

[UIView transitionWithView:container duration:0.5 options:UIViewAnimationOptionTransitionFlipFromRight
                animations:^{
                    [sender removeFromSuperview];
                    [container addSubview:viewToShow];
                }
                completion:nil]; 
```

我想要做的是使用过渡 - 即“UIViewAnimationTransitionFlipFromRight”在按下时“翻转卡片”以显示关联的 _viewContents 数组的内容。我还希望用户能够将卡片翻转过来以显示 frontCardButton 的图像。上面这段代码只关注卡片的第一次翻转，以避免出现代码墙。

我看到了适当的背景颜色 - 但动画本身不起作用。

我做错了什么，我需要在这段代码中添加/删除什么才能使其工作？

*   编辑* 如下所述，Moxy，看看 getRequestedViewFrontCardImagesWithFrame 方法中的输出。查看第一张卡片的输出，然后查看 frontCardPushed: 方法中容器视图的输出，然后使用适当的标签请求视图 - 它们不匹配。我正在打印按钮索引，以便您可以看到我正在点击第一个 TileView 子视图。_viewContents 视图的标签是一个标签集，代表一种颜色，与我在 getRequestedViewFrontCardImagesWithFrame 方法中分配的 TileView 标签无关。然而，令人费解的是，当我打印出第一个按钮时，在我为第一个按钮分配一个标签之后，没有列出一个标签。

输出：

```
//why doesnt the first frontcard frame list a tag? I had just assigned it one? 
```

> 第一个前卡框架 UIButton: 0x1c53f020; 帧 = (6 5; 145 145); 不透明=否；层=CALayer：0x1c534ac0，第一个_viewContentsFrame UIButton：0x1d045220；帧 = (6 5; 145 145); 不透明=否；标签 = 3; 层=CALayer：0x1d04535
> 
> 按钮索引：0
> 容器：UIView：0x1c53a400；帧 = (51 83; 922 614); clipsToBounds = YES; 自动调整大小 = W+H；手势识别器 = NSArray: 0x1d05afe0>; 层=CALayer：0x1c53a460，viewToShow：UIButton：0x1d045220；帧 = (6 5; 145 145); 不透明=否；标签 = 3; 层=CALayer：0x1d045350

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T18:43:56.570

更简单的方法是使用 [UIView transitionWithView]：

```
[UIView transitionWithView:self.flipButton
                  duration:0.8
                   options:displayingFirstButton ? UIViewAnimationOptionTransitionFlipFromLeft : UIViewAnimationOptionTransitionFlipFromRight
                animations:^{
                  //change image for button
                }
                completion:^(BOOL finished) {

                }]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T22:59:08.720

您可以通过使用容器视图来保持按钮使其工作。

```
-(void)viewDidAppear:(BOOL)animated
{
    _viewContents = [model getRequestedView];  //this retrieves an array of UIButtons(24 of them) whose frames and background colors have already been initialized to fit within the TileView.

    for(int i = 0; i < [_viewContents count]; i++){
        UIView *container = [[UIView alloc] initWithFrame:[[_viewContents objectAtIndex:screenViewIndex] frame]]; 
        container.tag = i;      
        UIButton *frontOfCardView = [[UIButton alloc] initWithFrame:container.bounds];
        frontOfCardView.backgroundColor = [UIColor colorWithPatternImage:_frontOfCardImage];
        frontOfCardView.tag = i;
        [container addSubview:frontOfCardView]; 
        [frontOfCardView addTarget:self action:@selector(frontOfCardPushed:) forControlEvents:UIControlEventTouchUpInside];
        [tileView addSubview:container];
    }
}

-(IBAction)frontOfCardPushed:(UIButton *)sender
{
    UIView *container = [tileView viewWithTag:sender.tag];
    UIView *viewToShow = [_viewContents objectAtIndex:index];
    viewToShow.frame = sender.frame;
    [UIView transitionWithView:container
                      duration:0.5
                       options:UIViewAnimationOptionTransitionFlipFromRight
                    animations:^{
                      [sender removeFromSuperView];
                      [container addSubview:viewToShow];
                    }
                    completion:nil];
} 
```

我没有测试过它，但它应该可以工作。无论如何，这不是很干净/漂亮的代码。但是，我知道这只是为了学习目的。

让我知道它是否仍然不起作用。

编辑 ：

我以单个视图控制器为例做了一个简单的项目。我认为您跟踪所有视图/按钮的方式是无用的。在这种情况下，模型只是一种背景颜色，您要做的就是显示/隐藏它，因此一旦您将颜色分配给按钮，它所知道的就是切换状态，因此您甚至不需要标签。（在其他情况下，控制器需要识别哪个按钮接收到事件，以便询问模型它需要什么内容）

```
#import "ViewController.h"

@interface ViewController ()
@property (nonatomic, strong) NSArray *colors;
@property (nonatomic, strong) UIView *tileView;
@end

@implementation ViewController

#pragma mark -
#pragma Getters and setters

// I'm assuming the tileView is just a simple view to wrap all the buttons
// PS : propertys should always start with a lowercase letter
-(UIView *)tileView
{
    if (!_tileView) {
        _tileView = [[UIView alloc] initWithFrame:self.view.bounds];
        _tileView.backgroundColor = [UIColor greenColor];
    }
    return _tileView;
}

// The model: just an array of colors, you can generate it or use other complicated stuff
-(NSArray *)colors
{
    if (!_colors) {
        _colors = @[[UIColor blackColor], [UIColor redColor], [UIColor grayColor], [UIColor yellowColor],
                    [UIColor whiteColor], [UIColor blueColor], [UIColor orangeColor], [UIColor darkGrayColor],
                    [UIColor lightGrayColor], [UIColor cyanColor], [UIColor brownColor], [UIColor magentaColor],
                    [UIColor blackColor], [UIColor redColor], [UIColor grayColor], [UIColor yellowColor],
                    [UIColor whiteColor], [UIColor blueColor], [UIColor orangeColor], [UIColor darkGrayColor],
                    [UIColor lightGrayColor], [UIColor cyanColor], [UIColor brownColor], [UIColor magentaColor]];
    }
    return _colors;
}

#pragma mark -
#pragma mark Helper methods

#define ROWS 6
#define COLUMNS 4
#define CARD_HEIGHT 60.0f
#define CARD_WIDTH 40.0f

// Gets the width that each card can use based on the chose number of columns
-(CGFloat)horizontalStep
{
    return self.tileView.frame.size.width / COLUMNS;
}

// Gets the height that each card can use based on the chose number of columns
-(CGFloat)verticalStep
{
    return self.tileView.frame.size.height / ROWS;
}

// Calculates the center for the card frame (return (0,0) if the index is out of bounds)
-(CGPoint)centerForCardAtIndex:(NSUInteger)index
{
    CGFloat x = 0.0f, y = 0.0f;
    if (index < [self.colors count]) {
        x = [self horizontalStep] * 0.5f + (index % COLUMNS) * [self horizontalStep];
        y = [self verticalStep] * 0.5f + (index / COLUMNS) * [self verticalStep];
    }
    return CGPointMake(x, y);
}

// Gets the frame for the card at index
-(CGRect)frameForCardAtIndex:(NSUInteger)index
{
    CGPoint center = [self centerForCardAtIndex:index];
    CGPoint origin = CGPointMake(center.x - CARD_WIDTH * 0.5f, center.y - CARD_HEIGHT * 0.5f);
    return CGRectMake(origin.x, origin.y, CARD_WIDTH, CARD_HEIGHT);
}

-(void)layoutCards
{
    // Add tileView to the controller's view
    [self.view addSubview:self.tileView];
    // Create the card buttons and add them to the tile view
    for (int i = 0; i < [self.colors count]; i++) {
        UIButton *card = [UIButton buttonWithType:UIButtonTypeCustom];
        card.frame = [self frameForCardAtIndex:i];

        // The only use of the model IN THIS CASE
        card.backgroundColor = self.colors[i];
        [card setImage:[UIImage imageNamed:@"back_of_tile.png"]
              forState:UIControlStateNormal];

        [card addTarget:self
                 action:@selector(cardPressed:)
       forControlEvents:UIControlEventTouchUpInside];

        [self.tileView addSubview:card];
    }
}

-(void)cardPressed:(UIButton *)card
{
    [UIView transitionWithView:card
                      duration:0.5
                       options:UIViewAnimationOptionTransitionFlipFromRight
                    animations:^{
                        card.selected = !card.selected;
                        if (!card.selected) {
                            [card setImage:[UIImage imageNamed:@"back_of_tile.png"]
                                  forState:UIControlStateNormal];
                        } else {
                            [card setImage:nil
                                  forState:UIControlStateNormal];
                        }
                    }
                    completion:nil];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self layoutCards];
} 
```

# java - 带有 if 语句的 While 循环不起作用，但它应该起作用（Math.random）

> ID：15212239
> 
> 赞同：1
> 
> 时间：2013-03-04T22:20:06.687
> 
> 标签：java, random

我的程序目标是首先从 1-6 生成一个随机数，称为“点”，然后用户将继续输入一个键来重新掷出相应的“骰子”，如果掷出相同的数字，用户应该提示来自第一个 if 语句的消息

但是，无论何时掷下一个骰子，它都不会滚到点数上，并且第一个 if 语句打印行会随机打印出来。关于如何解决这个问题的答案将不胜感激？

```
import java.io.*;

public class DiceGame1
{
  public static void main (String [] args) throws IOException
  {

    String userInput;
    int DiceRoll;
    int exit = 0;

    BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));
    System.out.println("Hello, this program rolls a dice and outputs the number rolled");

    System.out.println("The number rolled is called the point it will keep rolling untill it");
    System.out.println("hits that point again, press any key to con't");

    userInput = myInput.readLine();

    DiceRoll = (int) (Math.random () *(6-1) + 1);

    System.out.println("The point to match is: " + DiceRoll);
    System.out.println("Press any key to roll again...");
    userInput = myInput.readLine();

    while(exit != 999) {
      int nextRoll = (int) (Math.random () *(6-1) + 1);

      if (nextRoll == DiceRoll)
      {
        System.out.println(" It took the computer _____ tries to reach the point");
      }
      else 
      {
        System.out.println("The roll is : " + nextRoll);
        System.out.println("Press any key to roll again...Or press '999' to exit");
        userInput = myInput.readLine();
      }  
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:31:19.850

您的循环退出条件是`exit == 999`. `exit`但是您永远不会在循环中分配任何值。所以它无限循环。

In addition, you only print the value of the dice when it's not equal to the first roll. And not when it is. So you got the impression that the first message is printed when it shouldn't.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:35:50.000

I think what you are looking for to do is to always have to roll the dice, even if it is a match. You can accomplish that by removing the print and input to outside of the else clause, as such:

```
 if (nextRoll == DiceRoll)
  {
    System.out.println(" It took the computer _____ tries to reach the point");
  }
  else 
  {
    System.out.println("The roll is : " + nextRoll);
  }  
   System.out.println("Press any key to roll again...Or press '999' to exit");
   userInput = myInput.readLine(); 
```

Besides, you will never get a DiceRoll or NextRoll that is 6 - `(int) Math.random()*5+1` = (int) (0-.999)*5+1 = (int) (0-4.999)+1 = (int) 1-5.999 = 1-5\. The cast to int will round downwards, so you will need `(int) Math.random()*6+1` instead.

# javascript - Javascript 将数据保存到文件系统（带有用户提示）

> ID：15212240
> 
> 赞同：10
> 
> 时间：2013-03-04T22:20:12.097
> 
> 标签：javascript, html, google-chrome

在最新的最新浏览器（支持 html5）中实现以下目标的最佳方法是什么。我主要针对谷歌浏览器。

在我的应用程序中，数据是通过 javascript 操作的，需要通过浏览器提示（另存为对话框）将输出写入文件系统。我不确定写入文件系统的安全限制，但我不打算匿名写入（但会提示用户并选择位置）。

我看到[saveAs](http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side)还没有原生支持。通过我的研究，我看到的选择很少。

1.  [https://github.com/eligrey/FileSaver.js](https://github.com/eligrey/FileSaver.js)
2.  a.下载（[http://html5-demos.appspot.com/static/a.download.html](http://html5-demos.appspot.com/static/a.download.html)）
3.  网络文件系统
4.  对象 URL

如果没有本机支持，FileServer 会回退到 2、3、4，我可能会使用它。但是，我找不到打开另存为对话框的方法。它只是将文件保存在默认位置（mac 中的下载文件夹）。

您会使用哪个选项在最新的浏览器中获得良好的支持？如何打开“另存为”对话框并让用户命名文件。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-24T19:52:46.593

我同意内森·海菲尔德的观点。浏览器将为您处理保存对话框。设置标头 Content-Disposition 会将响应作为附件发送回来，浏览器将从那里处理它。例如。

```
content.Headers.Add("Content-Disposition", "attachment; filename=export.csv"); 
```

# c# - 调试时如何获取返回值？

> ID：15212242
> 
> 赞同：11
> 
> 时间：2013-03-04T22:20:18.560
> 
> 标签：c#, visual-studio, debugging, visual-studio-2012, visual-studio-debugging

我查看了 SO 但找不到答案，但我确定它在那里......？

在调试时，如果我在其上放置断点，如何获取 return 语句的值？我喜欢浓缩成一行，这样它看起来“漂亮”。但我目前不知道，因为我不知道如何调试返回的结果......？

```
using (IUnitOfWork context = new EFUnitOfWork())
{
    var repo = new ReportRepository(context);
    return repo.GetProcedureReport(startDate, endDate).ToList();
    //return result.ToList();
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-07-23T06:25:14.590

在 VS 2013 中，您可以将变量 $ReturnValue 添加到手表中。它包含函数的实际返回值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T22:24:40.823

选择方法并单击鼠标右键。从菜单中选择快速观看。

![在此处输入图像描述](../Images/d64d039eac484ac92a968416f9397af9.png)

我假设您不能在其中设置断点`GetProcedureReport`？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T23:23:16.990

您尝试的返回值调试类型对于 C# 等托管语言是不可能的。C++ 调试器通过自动窗口提供此信息，但不提供托管语言。

主要原因是 CLR 调试引擎根本不提供此值。为了让 C#、VB 或 F# 提供此功能，他们需要重写每个 return 语句以将值溢出到临时值中，然后返回临时值。然后可以通过在调试器中显示此临时值来实现返回值调试。

```
var returnTemp = repo.GetProcedureReport(startDate, endDate).ToList();
return returnTemp; 
```

这会起作用，但会给代码带来负面影响。最值得注意的是，大型结构值最终会被复制两次并对性能产生负面影响。此外，这种重写需要在编译时进行，并且会影响正在编译的每个方法。如果可以在调试时按需完成，则影响会小得多。负面因素在这里权衡了好处。

请注意，VB.Net 确实在一定程度上提供了返回值调试。我在博客上写过它是如何工作的

> [http://blogs.msdn.com/b/jaredpar/archive/2011/01/12/why-the-debugging-difference-between-c-and-vb-net-return-values.aspx](http://blogs.msdn.com/b/jaredpar/archive/2011/01/12/why-the-debugging-difference-between-c-and-vb-net-return-values.aspx)

# objective-c - instanceViewControllerWithIdentifier 不分配？

> ID：15212249
> 
> 赞同：0
> 
> 时间：2013-03-04T22:20:48.170
> 
> 标签：objective-c, uiviewcontroller, uistoryboard, xcode4.6

```
MyViewController *myVC = (MyViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];

[scrollView addSubview:myVC.view]; 
```

上面的代码有效，它加载了我在我的情节提要中的一个视图控制器，情节提要 ID 为：“MyViewController”，并将其显示为子视图。

唯一的事情是，例如，我想在执行 addSubview 之前在该视图控制器上设置 UILabel 的文本。

像这样：

```
MyViewController *myVC = (MyViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];

myVC.aTextLabel.text = @"pippo";

[scrollView addSubview:myVC.view]; 
```

但是，这不起作用。UILabel 为空。- 在我做 addSubview 之后，我不能对视图做任何事情。像这样：

```
MyViewController *myVC = (MyViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];

[scrollView addSubview:myVC.view];

myVC.aTextLabel.text = @"pippo"; 
```

上面的工作，但它并不漂亮，标签的文本在添加视图后发生了变化！

当我以前在没有故事板的情况下这样做时，我会这样做：

```
MyViewController *myVC = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];

    myVC.aTextLabel.text = @"pippo";

    [scrollView addSubview:myVC.view]; 
```

这会很好。

我正在显示的视图没有通过序列连接到其他视图，我将它的多个实例并排加载到 UIScrollView 中，所以我希望最简单的方法类似于上面的方法。

那么，如何以编程方式实例化视图，更新该视图上的 UILabel，然后将其添加为子视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:06:41.480

所以问题是，虽然视图控制器被创建（分配和初始化），但它的视图层次结构直到有人引用它的视图属性才被加载。

因此，当您阅读`myVc.view`（实际上是`[myVc view]`）时，如果尚未加载视图控制器，则会导致视图控制器从情节提要中加载其视图。

您可能需要在这里考虑您的设计。创建一个视图控制器，只是为了获取它的视图并将它们添加到其他视图层次结构中并不是一个好主意**，除非**你在容器视图控制器 API 的框架内这样做。

如果您想一次在屏幕上将多个视图控制器组合在一起，请[查看视图控制器编程指南中的](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)“创建自定义容器视图控制器” 。

# javascript - 使用 javascript 验证表单

> ID：15212250
> 
> 赞同：0
> 
> 时间：2013-03-04T22:20:55.607
> 
> 标签：javascript, forms, validation

我有一个表单，我正在尝试使用 javascript 验证是否选中了一个复选框..我能够让它与此代码一起使用..

```
function validate( )
{ var message = '';
valid = true;
if (
   document.trip_form.attributename.checked == false &&
   document.trip_form.attributename.checked == false &&
   document.trip_form.attributename.checked == false) 
{
 message += "Please select a trip from the list.\n";
 valid = false;
} 
```

我的问题是我正在使用salesforce并且需要有代码来跟踪选择了哪些框..通过salesforce给出的名称属性以数字开头，所以我不能将它插入attributename区域..我已经尝试创建它的变量，但我不相信我这样做是正确的..有没有人有一个他们可以指出我的大方向..

**编辑：**

```
<div class="checkbox_trips"><label for="grand-trip" class="trips-checkbox"><input id="grand-trip" name="00NA0000009xbVA" type="checkbox" class="checkbox-row" value="1"/>Grand Canyon</label></div>

<div class="checkbox_trips"><label for="mammoth-trip" class="trips-checkbox"><input id="mammoth-trip" type="checkbox" name="00NA0000009xbVF" class="checkbox-row" value="1"/>Mammoth Mountain</label></div> 
```

# ios - 使用 CALayer 设置 UITableViewCell 背景颜色

> ID：15212251
> 
> 赞同：1
> 
> 时间：2013-03-04T22:21:00.097
> 
> 标签：ios, objective-c, core-animation, calayer, quartz-graphics

在 iOS 上，我将 CALayer 添加到 UITableViewCell 的层。这是我第一次使用CALayer，它只是为了改变表格单元格的背景颜色。我的目标是 (1) 学习如何使用 CALayer，以及 (2) 使用 Instruments 测试绘图是否比我当前的实现快，这会减慢 CGContextFillRect。

（[技术问答 QA1708](http://developer.apple.com/library/ios/#qa/qa1708/_index.html)是这一切的催化剂。）

# 当前实施（作品）

```
- (void)drawRect:(CGRect)r
{
    UIColor *myColor = [self someColor];
    [myColor set];
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextFillRect(context, r);  // draw the background color
    // now draw everything else
    // [...]

} 
```

# 尝试了新的实现（不起作用）

```
#import <QuartzCore/QuartzCore.h>

@implementation MyCell {
    CALayer *backgroundLayer;
}

- (id) initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

    if (self) {
        // [...other stuff here too]
        backgroundLayer = [[CALayer alloc] init];
        [[self layer] addSublayer:backgroundLayer];
    }

    return self;
}

- (void)drawRect:(CGRect)r {
    backgroundLayer.frame = CGRectMake(0, 0, r.size.width, r.size.height);
    [backgroundLayer setBackgroundColor:[self someColor]];
    // now draw everything else
    // [...]
} 
```

我看到正确的颜色，但没有其他绘图（我假设自定义绘图最终*位于*我的新图层后面）。

如果我删除这`backgroundLayer.frame = ...`条线，我的所有其他绘图仍然存在，但在黑色背景上。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:43:21.143

你得到意外行为的原因是因为`UITableViewCell`'s 相对复杂的视图层次结构：

```
- UITableViewCell
   - contentView
   - backgroundView
   - selectedBackgroundView 
```

每当您在 a 中定义自定义绘图例程时`UITableViewCell`，您都应该在`contentView`层次结构中这样做。这涉及子类化`UIView`、覆盖`-drawRect:`并将其作为子视图添加到`contentView`.

在您的示例中忽略背景颜色的原因是由于您将您添加`CALayer`为`UITableViewCell`' 图层的子图层。这被`UITableViewCell`'s所掩盖`contentView`。

但是，出于某种原因，您希望在`CALayer`此处使用 a。我想了解为什么它没有 a 没有的任何东西`UIView`。你可以设置`backgroundColor`你的`contentView`而不是做这些迂回的事情。

`CALayer`这是一个按照您的要求使用的示例：

```
@implementation JRTableViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
   self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
   if(self) {
      [self addCustomLayerToContentView];
   }
   return self;
}

- (void)addCustomLayerToContentView {
   CALayer *layer = [[CALayer alloc] initWithFrame:[self bounds]];  
   [layer setBackgroundColor:[[UIColor blueColor] cgColor]]; //use whatever color you wish.

   [self.contentView.layer addSublayer:layer];
}

@end 
```

# google-app-engine - 如何避免 google api 电子表格与日历不兼容

> ID：15212252
> 
> 赞同：0
> 
> 时间：2013-03-04T22:21:02.860
> 
> 标签：google-app-engine, google-api-java-client, google-spreadsheet-api

在我的 GAE/J 项目中，我尝试使用 Google API、电子表格和日历。

但是电子表格 API CONTAINER 包含 google-collect-1.0-rc1.jar，其中包含旧版本的 Joiner 类。

Calendar 需要更新版本的它（使用 on() 方法），它随 guava-jdk5-13.0.jar 一起提供，位于 Calendar API CONTAINER 中。

当 Calendar 代码运行时，Joiner 类已被解析（成为旧版本）并因 NoSuchMethod 错误而失败。

这意味着它们不兼容。我尝试了多个类路径设置，但没有成功。电子表格访问有效，但日历访问失败。

其他人看到这个并有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:51:30.013

尝试从 google-collect-1.0-rc1.jar 中删除 Joiner 类 - 我已经从一些 jar 文件中删除了类，不是很干净，但工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:40:45.603

'google-collect-1.0-rc1.jar 已弃用，并已被此处描述的 'guava' jar 取代： [https ://code.google.com/p/guava-libraries/wiki/GuavaExplained](https://code.google.com/p/guava-libraries/wiki/GuavaExplained)

问题是，正如 OP 所述，某些 Google API 确实不兼容，需要一些非常小心的处理。例如，Google 电子表格 API 仍然与 google-collect-1.0-rc1.jar 打包在一起

有关更多信息，请参阅： [https ://code.google.com/p/gdata-java-client/issues/detail?id=344](https://code.google.com/p/gdata-java-client/issues/detail?id=344)

这是我为使 Calendars(Oauth) 与电子表格一起使用所做的工作（使用客户端库）：

*   不要使用 Eclipse 插件来管理 Google API - 我发现它在 DEV 中工作，但是一旦我部署到 GAE 它就不起作用，我认为因为部署过程复制了在它使用的目录中找到的 jar：'。 google_apis/' - 这会导致运行时错误，例如：

> 引起：java.lang.NoSuchMethodError:
> com.google.common.collect.ImmutableSet.of([Ljava/lang/Object;)Lcom/google/common/collect/ImmutableSet;

如上所述，手动管理 jar 还可让您在必要时切换 jar。

*   并非所有版本的“java 客户端”库都是相同的，即使它们可能共享相同的名称，例如“gdata-client-1.0.jar”如果您希望它依赖于 Guava 而不是依赖于 Guava，则需要使用新的旧集合 jar ：（即 1.4.7.1 - 在此处下载[https://code.google.com/p/gdata-java-client/](https://code.google.com/p/gdata-java-client/)）
*   小心手动删除并重新复制您的 jar 到 war/WEB-INF/lib 中，因为 eclipse 不会为您完全管理这个（特别是如果您正在更新同名的 jar）
*   最后，通过解决您从哪些文件中获取依赖项来帮助跟踪运行时错误的提示：

> System.out.println("URL:" + Thread.currentThread().getContextClassLoader().getResource("com/google/common/collect/ImmutableSet.class"));

# iphone - 寻求 CSS 向导...在 iOS webView 中不守规矩的内联 CSS div/class/style

> ID：15212256
> 
> 赞同：0
> 
> 时间：2013-03-04T22:21:21.267
> 
> 标签：iphone, css, webview

这个问题正在重新措辞，因为有些问题只需要重新编写

如何覆盖这些 p 标签的宽度？内容超出了我的窗口范围，这是不可接受的。我无法编辑 html（由 SharePoint 生成），只能用 CSS 压倒它。：

```
<div class="ms-rteElement-photodivright" style="width:475px">
<p class="ms-rteStyle-photoCredit">this text spills over my desired width</p>
<p class="ms-rteStyle-photocaption">This text spills over my desired width</p>
</div> 
```

这就是我所拥有的：

```
div#wrapper
 { 
margin:0 auto !important; 
width:%f !important; 
background:green;
 float:left !important; 
 position: relative !important;
}
body 
{
  background:darkgreen !important;
 }

.clear
 {
clear:both !important;
}
img 
{max-width:%f !important; 
height:auto;
} 
div [class] 
{
p: width:%f !important; 
float:clear !important;
}
 .override div.ms-rteElement-photodivright
 {
max-width:%f 
!important; 
margin:auto;
}

.override p.ms-rteStyle-photocaption 
{
max-width:%f !important; 
margin:auto;
} 
```

结果如下：你看到不同深浅的绿色了吗？我希望溢出到深绿色阴影中的内容保留在绿色（我的包装器）中......溢出的内容是上面代码中的这些 P 类...... ![在此处输入图像描述](../Images/2d143ccea04a33ac92f0ec6ff513a409.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:08:22.870

我想知道您的包装器是否需要`position: relative;`我可以告诉您的图像具有绝对位置。它们将在具有相对、绝对或固定位置的级联中针对它们上方的第一个容器定位/测量自己。但是，如果没有工作示例，这有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:37:44.067

你不知道吗，我回答了我自己的问题......

```
 .ms-rteElement-photodivright
 {
 max-width:%f 
 !important; 
 margin:auto;
 }

.ms-rteStyle-photocaption 
{
max-width:%f !important; 
margin:auto;
} 
```

# java - 拆分字符串以生成所需的数组？

> ID：15212257
> 
> 赞同：-4
> 
> 时间：2013-03-04T22:21:22.707
> 
> 标签：java, regex, arrays, split

假设我有文本：aabbaaccddaaee。我需要拆分字符串以生成数组：[“aa”、“aa”、“aa”]。我将如何做到这一点？

**编辑**：
为了搞清楚，我让用户 enter `{blocked-users(user1|user2|user3)}`，我需要找到所有出现的`{blocked-users(.*)}`并获取它们的数组，这样我就可以解析他们输入的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:17:56.530

```
System.out.println( Arrays.toString( "aabbaaccddaaee".split("[^a]+") ) );
// [aa, aa, aa] 
```

要获取所有被阻止的用户，您可以编译模式

```
"\\{blocked-users\\(([^)]+)\\)\\}" 
```

并`find`在循环中使用，将捕获组拆分为每个匹配`()`项`|`生成一组被阻止的用户，即`group(1).split("\\|")`.

# grails - g:link 忽略命名映射

> ID：15212258
> 
> 赞同：-1
> 
> 时间：2013-03-04T22:21:24.687
> 
> 标签：grails, gsp

我有以下命名`UrlMapping`

```
name 'admin_user' :"/admin/user/$action?/$id?"(controller:'userAdmin') 
```

在另一个页面上`site/edit.gsp (/admin/site/edit)`，我正在调用：

```
<g:link  mapping="admin_user" action='create' class="create" >New User</g:link> 
```

但它的产生

```
/admin/site/create 
```

基本上忽略了我的映射参数。对我做错了什么有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:36:17.773

这个映射似乎没问题。我在我的 Grails v2.0.4 环境中做对了。

```
<g:link  mapping="admin_user" action='create' class="create" >New User</g:link> 
```

产生一个链接：

```
/admin/user/create 
```

和

```
<g:link  mapping="admin_user" action='create' class="create" id="3">New User</g:link> 
```

生成

```
/admin/user/create/3 
```

您可以检查 UrlMapping.groovy 是否在正确的位置，或者您采用的 Grails 版本的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:59:09.807

所以我终于明白了，这是两个 url 映射冲突的问题。

```
name 'admin_user' :"/admin/user/$action?/$id?"(controller:'userAdmin')
"/$controller/$action?/$id?"() 
```

它忽略了第一个并总是使用第二个。我最终不得不放弃使用管理员前缀并实际使用`/admin/userAdmin/`我定义的

```
"/admin/$controller/$action?/$id?"() 
```

然后将 createLink 与 controller='userAdmin' 一起使用。

每当我需要指向 /user/xxx 的链接时，我都会明确定义它。

屁股疼得厉害....

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T22:32:43.070

看起来您没有正确创建或使用您的命名映射。您正在尝试同时使用命名映射和`action`，但操作表单优先，这就是您最终获得指向`/controller/action`. 根据[docs](http://grails.org/doc/latest/guide/single.html#namedMappings)，您需要为您的操作指定一个特定的命名映射，它看起来更像这样：

```
name createAdminUser: "/admin/user/create" {
    controller = 'userAdmin'
} 
```

您仍然可以`$id?`通过`params="[name: value]"`. 在您的视图中使用它，例如：

```
<g:link mapping="createAdminUser" class="create">New User</g:link> 
```

# report - 如何在 QTP 的测试报告/日志中检测失败/错误

> ID：15212259
> 
> 赞同：0
> 
> 时间：2013-03-04T22:21:26.293
> 
> 标签：report, reporting, automated-tests, qtp

在 QTP 中，每当测试的关键部分通过或失败时，我经常向日志报告。我使用的方法：`Reporter.ReportEvent micPass, "Critical Area of Test", "Things went better than expected"`

我想在我完成测试时检测是否有任何错误记录到报告中。我正在查看的错误与`Err.Raise InvalidCall`; 任何时候我打电话都会出错`micFail`。通过了解测试中是否（以及在何处）调用了 micFail，我可以让自定义函数自动将结果写入不同的区域。

是否可以创建一个函数来查看默认报告以查看测试是否失败，如果失败，是哪个区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:49:55.890

您可以替换`micFail`为设置环境变量的自定义函数，并在以后报告该环境变量。

自定义函数将定义如下：

```
Function OnFail()
  Environment.Value("Status") = "FAIL"
  OnFail = micFail
End Function 
```

因此，每次您通常使用`micFail`时，请使用`OnFail`：

```
Reporter.ReportEvent OnFail, "Subject", "Description" 
```

在测试结束时，检查环境变量并执行所需的操作：

```
In Environment.Value("Status") = "FAIL"
  ' ...
End If 
```

或者，您可以创建一个替换的函数`Reporter.ReportEvent`（它将接受相同的参数并调用`Reporter.ReportEvent`）。在此函数中，您将检查状态参数并基于`micFail`.

# objective-c - 在 Objective-C 中隐藏隐私的位置

> ID：15212260
> 
> 赞同：5
> 
> 时间：2013-03-04T22:21:28.040
> 
> 标签：objective-c, cocoa, private-members

关于应在何处声明私有实例变量以及为什么要声明的约定/规则/首选项/diktat 是什么？

```
// someClass.h

@interface someClass : NSObject {
@private
// Here in the class declaration?
}
// ...
@end

// someClass.m

@interface someClass () {
// Here in the class extension? This seems to be obj-c's version
// of the C++ Pimpl idiom.
}
@end

@implementation someClass {
// Here in the class definition? BTW, what's the default scope here?
// Seems like it should be @private. I haven't been able to find much
// documentation about this declaration block.
}
// ...
@end 
```

任何人都可以评论这三个部分的适当使用或指出一个好的网络资源吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:46:21.383

今天，最好的做法是将它们放在`@implementation`或（非公共）类扩展中。

类的客户永远不会对 Ivar 感兴趣，因此它们不应该在公共 API（标头）中可见。

将它们放在@implementation 或类扩展中没有太大区别。为了保持一致，我总是将它们放在@implementation 中。

# c++ - C++ 中 POD 类型的默认初始化

> ID：15212261
> 
> 赞同：17
> 
> 时间：2013-03-04T22:21:28.600
> 
> 标签：c++, initialization

我知道一些[POD](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)变量是默认初始化的，但其他的不是。（POD 类型包括`int`、、`float`指针、联合、POD 类型的数组、POD 类型的结构等）

**范围和存储类如何影响 POD 类型的默认初始化？**

具体来说，以下哪一项将被隐式初始化：

*   具有自动存储功能的局部变量
*   静态局部变量
*   静态全局变量
*   外部变量
*   分配的变量`new`
*   类的 POD 成员（在构造函数中没有显式初始化）

我知道存在与其中一些情况相关的问题，但并不全面（它们只针对特定情况）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-04T22:33:09.333

具有自动存储持续时间的局部变量不会自动初始化。由于使用未初始化的变量会产生**未定义的行为**，因此即使变量是多余的，显式初始化变量也是一种很好的做法。

关于被零初始化的 POD 类型，C++03 标准**3.6.2 非本地对象的初始化**状态：

> **§1**具有**静态存储持续时间**（3.7.1）的对象应在任何其他初始化发生之前进行**零初始化（8.5）。**零初始化和用常量表达式初始化统称为静态初始化；所有其他初始化都是动态初始化。使用常量表达式 (5.19) 初始化的具有静态存储持续时间的 POD 类型 (3.9) 的对象应在任何动态初始化发生之前进行初始化。

因此，标准保证具有*静态存储持续时间*（无论它们的范围是什么）的 POD 类型将被零初始化。

> *类的 POD 成员（在构造函数中没有显式初始化）*

这种情况在**12.6.2 Initializing bases and members**中进行了描述，说明（选定部分）：

> 如果给定的*非静态*数据成员或基类不是由 mem-initializer-id 命名的（包括由于构造函数没有 ctor-initializer 而没有 mem-initializer-list 的情况），则：
> 
> — 如果实体是非**静态数据成员**...，并且实体类**是非 POD**类，则实体是**默认初始化的**（8.5）...
> 
> —**否则，实体未初始化**...
> 
> 在对类 X 的构造函数的调用完成后，如果 X 的成员既没有在构造函数的 mem-initializers 中指定，也没有默认初始化，也没有值初始化，也没有在构造函数主体执行期间给定值，**该成员具有不确定的价值。**

例子：

```
class C
{
public:
    C(int x, int z) : x(x), z(z) { }
    int x, y, z;
};

int main(void)
{
    C* c = new C(1,3);
    std::cout << c->y; // value of y is undetermined !!!
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-04T22:27:31.540

如果我们只讨论 POD，那么只有**局部和全局静态**以及**外部变量**，因为它们必须在某个地方定义。

**分配的 POD`new`****有时也会**被初始化- 如果您明确初始化：

```
int* x = new int(); 
```

将创建一个指向它的`int`初始化对象，而`0``x`

```
int* x = new int; 
```

将`x`指向未初始化的`int`.

**有时 - POD 类成员**- 它们可以显式初始化（​​不在构造函数中）：

```
struct X
{
   int x;
};

X x;        //x.x is not initialized
X y = X();  //y.x is 0 
```

# ssl - SSL / TLS 客户端对没有 DN 的证书请求消息的正确响应？

> ID：15212263
> 
> 赞同：5
> 
> 时间：2013-03-04T22:21:43.397
> 
> 标签：ssl, certificate

当 SSL/TLS 客户端收到具有空 DN 列表的证书请求消息时，它的正确行为是什么？

这里有两种看起来很自然的可能性：1）发回一个空的证书消息 2）从所有可能的证书中选择（或提示用户选择）一个证书

是否有一个正确的行为，或者任何一个选项都可以？我的目标是在我的代码（.Net、WCF）中向服务器提供一个证书，我试图确定是否需要在客户端进行更改以覆盖不发送证书的看似默认行为，或者如果我需要在服务器端进行更改以实际发送 DN 列表。

浏览器似乎会选择选项 2，但我使用 WCF 和 .Net 的代码正在使用选项 1。我可以从商店中选择证书，但它没有在 TLS 握手中发送。

TLS 1.0 和 1.2 规范（RFC 2246 和 5246）似乎没有针对这种情况提供任何指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:32:01.213

这实际上是[TLS 1.0](https://www.rfc-editor.org/rfc/rfc2246#section-7.4.4)规范和 TLS [1.1](https://www.rfc-editor.org/rfc/rfc4346#section-7.4.4) / [1.2](https://www.rfc-editor.org/rfc/rfc5246#section-7.4.4)不同的地方。

特别是，[在 TLS 1.1 的第 7.4.4 节（证书请求）中](https://www.rfc-editor.org/rfc/rfc4346#section-7.4.4)添加了以下内容：

> 如果 certificate_authorities 列表为空，则客户端可以发送任何适当的 ClientCertificateType 证书，除非有一些相反的外部安排。

根据我的经验（至少对于浏览器和 Java/JSSE），这在实践中也适用于 SSLv3 和 TLS 1.0，即使没有提到空列表。

选择做什么仍然由实现自行决定（“ *[...] 可以发送任何 [...]* ”）。

在任何情况下，即使使用非空 CA 列表，当多个客户端证书与 CA 条件匹配时，也需要自动或通过 UI 进行选择。这也是依赖于实现的，并且可以根据框架进行定制。

# asp.net-mvc-4 - 计算请求应该是 GET 还是 POST？

> ID：15212266
> 
> 赞同：2
> 
> 时间：2013-03-04T22:22:06.697
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用 ASP.NET Web API 构建一些服务来执行计算。请求应该是 GET 还是 POST？

计算将有 0..n 个参数，但很可能有 3-6 个。我打算将参数作为json放在body中。这让我认为我应该使用 POST。

想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:41:39.033

鉴于计算是幂等的，您应该使用 GET。默认情况下，浏览器可能会缓存这些请求（我认为这对您的应用程序来说是件好事）。此外，不会有烦人的“回发数据到服务器”或任何弹出窗口。

# c++ - 为什么我不能在 C++ 的 setter 中这样设置？

> ID：15212267
> 
> 赞同：1
> 
> 时间：2013-03-04T22:22:07.893
> 
> 标签：c++

我试图在这样的 C++ 对象中编写一个 setter 函数。

```
void set_acceleration(double acceleration) {
  acceleration_(acceleration);
} 
```

其中`acceleration_`是私有变量。但是，g++ 发出了编译时错误：

```
'((Car*)this)->Car::acceleration_' cannot be used as a function. 
```

我知道那`acceleration_`是一个`double`，而不是一个函数，但为什么我不能这样设置呢？`acceleration_`当我构造一个`Car`对象时，我就是这样设置的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T22:23:56.613

除非您在声明时初始化变量，否则语法是非法的（*这将创建一个新变量，而不是修改您的类成员，所以这不是您想要的*）：

```
double acceleration_(acceleration); 
```

或在成员初始化列表中：

```
className() : acceleration_(acceleration)
{
} 
```

您正在寻找任务：

```
acceleration_ = acceleration; 
```

# .net - 结构的一致散列到 32 位

> ID：15212271
> 
> 赞同：1
> 
> 时间：2013-03-04T22:22:34.970
> 
> 标签：.net, hash

我有一个在 [1, 1000] 和字符串中有 3 个整数的结构。

我需要用 32 位数字表示它，以便至少一个字段中不同的两个结构会产生不同的代码，而具有相同内容的结构会始终产生相同的代码。通常整数字段之一将以几个单位增加。这必然会产生不同的代码。

起初，我想将结构字段格式化为常量格式的字符串，然后使用 String 类的 GetHashCode 函数对其进行哈希处理。但是后来我在一些讨论中读到，在相同输入上运行的重复过程不一定会产生相同的哈希输出。首先，在 .NET 4 中这是真的吗？这对我很重要，因为哈希值应该被持久化并在进程运行中保持一致。我还在这里看到了使用素数对应用于每个结构字段的平台 GetHashCode 的结果执行按位运算的建议。但是在这里，显然我不能指望过程运行的一致结果。

如果我使用加密哈希函数，我会超过 32 位。

如果我没有字符串字段，我会将代码组合为来自数字字段的 32 位数组。可能值得用字符串字段 GetHashCode 结果对这样的位数组进行异或吗？我是否会增加在某些输入上重复运行会产生相同哈希输出的机会？

你会建议做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:39:38.517

匿名类型具有自动生成的合理`GetHashCode()`实现。我会尝试使用：

```
struct MyStruct 
{
    int _intField1;
    int _intField2;
    int _intField3;
    string _stringField;

    public long GetHashCode() 
    {
        return new { _intField1, _intField2, _intField3, _stringField }.GetHashCode();
    }
} 
```

由于`int`s 和`string`s 都是不可变类型，因此只要底层 .NET 框架版本相同，哈希码在应用程序运行之间应该保持相同。（这可能会或可能不会“足够持久”。）

也就是说，如果内部实施发生变化，它*可能会*`GetHashCode()`发生变化。在这种情况下，请使用加密哈希。它超过 32 位并不重要，因为加密哈希旨在为输入的微小变化产生截然不同的输出。这意味着对于两个不同的输入，**任何**给定的 32 位哈希码都不太可能相等。只需使用[`BitConverter.ToInt32()`](http://msdn.microsoft.com/en-us/library/system.bitconverter.toint32.aspx)将您想要的散列的任何部分转换为`int`.

此外，显然，这只会使两种不同的结构不太可能产生不同的哈希码。（这可以使用生日悖论的近似公式来确定，如果我正确阅读 wiki，这意味着一旦您存储了~~~140,000~~ ~30,000 条记录，您就有 10% 的机会获得重复。假设加密哈希具有理想的属性。我不确定如果没有完美的哈希，你能做得更好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:33:04.493

如果您有以下情况：

```
struct 
{
    int A;
    int B;
    int C;
} 
```

假设 A、B、C 在范围内`[1, 1000]`。可以创建“完美哈希”（没有冲突），因为 A、B、C 可以有 1000 个不同的可能值。实际上，`log2(1000^3) <= 32`(`1000^3`是结构的可能值的数量，并且`log2`用于获得存储所有这些值而不会发生冲突所需的位数，并且`32`是整数的位数)。

```
int MyHashCode()
{
    return 1000 * (1000 * (A - 1) + (B - 1)) + (C - 1);  // There is no overflow or collision since A, B, C are in the range [1, 1000]
} 
```

我们可以通过使用更弱的条件来简化它：A、B、C 在 [0, 1000] 范围内：

```
int MyHashCode()
{
    return 1001 * (1001 * A + B) + C;  // There is no overflow or collision since A, B, C are in the range [0, 1000]
} 
```

## 更新

鉴于您的结构中包含一个字符串。你想要达到的目标是不可能的。因为字符串可以表示无限数量的值。

如果可以做到这一点，可以创建一个非常强大的压缩算法。这可以将任何文件存储到... 32 位数字中！从数学上讲，它来自于一个单射函数只能映射到更大空间的事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:48:44.410

1.  将您的类型序列化为 byte[]
2.  对byte[]应用常用的hash算法，得到hash byte[]
3.  例如，提取哈希字节 [] 的前 32 位并使用它

# java - 如何将字符串传递给客户端并使用正则表达式来决定采取什么行动？

> ID：15212273
> 
> 赞同：0
> 
> 时间：2013-03-04T22:22:36.800
> 
> 标签：java, regex, client-server

我需要将一个字符串从服务器传递给客户端。该字符串以“P1”开头，后跟一张扑克牌的名称。我想在客户端使用正则表达式来检查它是否以“P1”开头，如果是，则从字符串的其余部分中提取卡片信息并显示该卡片。但是，我似乎无法让正则表达式识别传入的字符串。

服务器端：

```
for(int i = 0; i < players.length; i++) {
    imagePath1 = players[i].getCard(0).getImagePath();
    imagePath2 = players[i].getCard(0).getImagePath();
    output.format("%s\n", "Pocket Cards");
    output.flush();
    output.format("%s\n", "P1, " + imagePath1);
    output.flush();
} 
```

客户端：

```
public void run() {
    playerNumber = input.nextLine();
    SwingUtilities.invokeLater(
        new Runnable() {
            public void run() {
                lblIdField.setText("You are Player " + playerNumber + ".");
            }
        }
    );
    myTurn = (playerNumber.equals("Player 1"));
    while(true) {
        if(input.hasNextLine()) {
            processMessage(input.nextLine());
        }
    }
}

public void processMessage(String message) {
    if(message.equals("Pocket Cards")) {
        //displayPocketCards("resources/10C.png");
    }
    else if(message.matches("P1, [.]*")) {
        String[] split = message.split(", ");
        displayPocketCards("resources/10C.png");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:49:33.200

当您使包含`.`它的字符类不被解释为“任何东西”通配符时，它会按字面意思解释为句点。`P1,`您的消息与“后跟零个或多个 .”不完全匹配。所以你不要进入那个街区。如果您只想“匹配零次或多次”，那就是`.*`没有括号。虽然比这更具体一点通常是明智的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:49:59.793

我假设您想匹配以 P 开头的字符串，后跟一个或多个数字、逗号、分隔符，然后是任何其他字符。

以下代码可能会解决问题：

```
 ...
    else if(message.matches("^(P)(\\d)+(\\,)(\\s)(.)*")) {
        String[] split = message.split(", ");
        displayPocketCards("resources/10C.png");
    }
} 
```

此外，您可以使用匹配块来获取玩家的 id，以及打出的牌...

您可以使用许多正则表达式测试站点来检查您的正则表达式，这里有一个[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:50:32.557

而不是使用`matches()`我建议使用的方法`startsWith()`。因此，`message.matches("P1, [.]*"))`您可以使用`message.startsWith("P1")`.

要解析卡片信息，我建议您在数字和卡片类型之间使用另一个逗号（和空格）。然后，您可以轻松地使用拆分功能，您必须`Integer.parseInt(split[1])`为号码和`split[2]`类型调用。

# php - 共享主机上的 html5 websockets 阻塞了其他端口

> ID：15212274
> 
> 赞同：0
> 
> 时间：2013-03-04T22:22:45.900
> 
> 标签：php, linux, html

我目前无法使用 websockets，因为我在共享主机上，它不允许绑定到任何其他端口。有没有办法以某种方式通过端口 80？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:25:39.537

有一个用于 apache 的 websocket 模块可用。如果您在端口 80 上同时需要 webserver 和 websocket，这可能会有所帮助。但如果您使用共享主机，则不太可能安装它。

因此，共享主机将没有办法。对不起。

# javascript - 检查是否每个单选按钮都被选中的 JavaScript？

> ID：15212280
> 
> 赞同：0
> 
> 时间：2013-03-04T22:22:55.737
> 
> 标签：javascript, forms, validation

你好，我是 JavaScript 新手，所以我需要一点帮助。

我有这个带有单选按钮的简单 html 表单。有 20 个问题，每个问题都必须回答，所以我需要某种形式的验证来检查在访问者单击提交按钮之前是否回答了每个问题？（检查是否选择了单选按钮）

先感谢您。

```
 <form action="rezultatiFU.php" method="post">

<ol>

<li>
    <h3>Koji ste pol?</h3>

    <div>
    <input type='radio' name='answer1' id='answer1' value='A' />
    <label for='answer1A'>Muško</label>
    </div>

    <div>
    <input type='radio' name='answer1' id='answer1' value='B' />
    <label for='answer1B'>Žensko</label>
    </div>
    </li>

    <li>
    <h3>Koliko imate godina?</h3>

    <div>
    <input type='radio' name='answer2' id='answer2' value='A' />
    <label for='answer2A'>18-25</label>
    </div>

    <div>
    <input type='radio' name='answer2' id='answer2' value='B' />
    <label for='answer2B'>25-35</label>
    </div>

    <div>
    <input type='radio' name='answer2' id='answer2' value='C' />
    <label for='answer2C'>35-45</label>

    </div>
    <div>
    <input type='radio' name='answer2' id='answer2' value='D' />
    <label for='answer2D'><45</label>
    </li>

    <li>
    <h3>Koliko ste visoki? (cm)</h3>

    <div>
    <input type='text' name='answer3' id='answer3' />
    </div>
    </li>

     <li>
    <h3>Koliko imate kilograma?</h3>
    <div>
    <input type='text' name='answer4' id='answer4' />
    </div>
    </li>

    <li>
    <h3>Da li Vaš posao zahteva kretanje ili neku fizičku aktivnost?</h3>

    <div>
    <input type='radio' name='answer5' id='answer5' value='A' />
    <label for='answer5A'>Da</label>
    </div>

    <div>
    <input type='radio' name='answer5' id='answer5' value='B' />
    <label for='answer5B'>Ne</label>
    </div>
    </li>

    <li>
    <h3>Da li ste dijabetičar?</h3>

    <div>
    <input type='radio' name='answer6' id='answer6' value='A' />
    <label for='answer6A'>Da</label>
    </div>

    <div>
    <input type='radio' name='answer6' id='answer6' value='B' />
    <label for='answer6B'>Ne</label>
    </div>
    </li>

<li>
    <h3>Koliko tečnosti unosite tokom dana?</h3>

    <div>
    <input type='radio' name='answer7' id='answer7' value='A' />
    <label for='answer7A'>Ispod 2 litre</label>
    </div>

    <div>
    <input type='radio' name='answer7' id='answer7' value='B' />
    <label for='answer7B'>2 litre</label>
    </div>
    <div>
    <input type='radio' name='answer7' id='answer7' value='C' />
    <label for='answer7C'>Preko 2 litre</label>
    </div>
    </li>

    <li>
    <h3>Da li doručkujete?</h3>

    <div>
    <input type='radio' name='answer8' id='answer8' value='A' />
    <label for='answer8A'>Da</label>
    </div>

    <div>
    <input type='radio' name='answer8' id='answer8' value='B' />
    <label for='answer8B'>Ne</label>
    </div>
     <div>
    <input type='radio' name='answer8' id='answer8' value='C' />
    <label for='answer8C'>Ponekad, kada stignem</label>
    </div>
    </li>

    <li>
    <h3>Koliko često se bavite fizičkom aktivnošću?</h3>

    <div>
    <input type='radio' name='answer9' id='answer9' value='A' />
    <label for='answer9A'>Skoro nikada</label>
    </div>

    <div>
    <input type='radio' name='answer9' id='answer9' value='B' />
    <label for='answer9B'>Jednom nedeljno</label>
    </div>

    <div>
    <input type='radio' name='answer9' id='answer9' value='C' />
    <label for='answer9C'>Više puta nedeljno</label>
    </div>

    <div>
    <input type='radio' name='answer9' id='answer9' value='D' />
    <label for='answer9D'>Svaki dan</label>
    </div>

    </li>

    <li>
    <h3>Koliko obroka imate tokom dana?</h3>

    <div>
    <input type='radio' name='answer10' id='answer10' value='A' />
    <label for='answer10A'>1-2</label>
    </div>

    <div>
    <input type='radio' name='answer10' id='answer10' value='B' />
    <label for='answer10B'>3</label>
    </div>

    <div>
    <input type='radio' name='answer10' id='answer10' value='C' />
    <label for='answer10C'>5 i više</label>
    </div>
    </li>

    <li>
    <h3>Da li konzumirate hranu sa velikim udelom masti?</h3>

    <div>
    <input type='radio' name='answer11' id='answer11' value='A' />
    <label for='answer11A'>Da</label>
    </div>

    <div>
    <input type='radio' name='answer11' id='answer11' value='B' />
    <label for='answer11B'>Izbegavam masnu hranu</label>
    </div>
     <div>
    <input type='radio' name='answer11' id='answer11' value='C' />
    <label for='answer11C'>Ponekad</label>
    </div>
    </li>

    <li>
    <h3>Da li konzumirate hranu sa velikim količinama šećera? (slatkiši, sokovi sa šećerom i sl.)</h3>

    <div>
    <input type='radio' name='answer12' id='answer12' value='A' />
    <label for='answer12A'>Da, uživam u takvoj hrani</label>
    </div>

    <div>
    <input type='radio' name='answer12' id='answer12' value='B' />
    <label for='answer12B'>Ne, izbegavam kad god mogu</label>
    </div>

    <div>
    <input type='radio' name='answer12' id='answer12' value='C' />
    <label for='answer12C'>Ponekad</label>
    </div>
    </li>

        <li>
    <h3>Koliko često jedete voće i povrće?</h3>

    <div>
    <input type='radio' name='answer13' id='answer13' value='A' />
    <label for='answer13A'>Svaki dan</label>
    </div>

    <div>
    <input type='radio' name='answer13' id='answer13' value='B' />
    <label for='answer13B'>Retko</label>
    </div>
    </li>

        <li>
    <h3>Koliko kalorija unesete tokom dana? (odprilike)?</h3>

    <div>
    <input type='radio' name='answer14' id='answer14' value='A' />
    <label for='answer14A'>Nedovoljno</label>
    </div>

    <div>
    <input type='radio' name='answer14' id='answer14' value='B' />
    <label for='answer14B'>Dovoljno</label>
    </div>
     <div>
    <input type='radio' name='answer14' id='answer14' value='C' />
    <label for='answer14C'>Previše</label>
    </div>
    </li>

        <li>
    <h3>Koliko često konzumirate alkohol?</h3>

    <div>
    <input type='radio' name='answer15' id='answer15' value='A' />
    <label for='answer15A'>Jednom nedeljno</label>
    </div>

    <div>
    <input type='radio' name='answer15' id='answer15' value='B' />
    <label for='answer15B'>Više puta nedeljno</label>
    </div>
    <div>
    <input type='radio' name='answer15' id='answer15' value='C' />
    <label for='answer15C'>Jednom mesečno</label>
    </div>
    <div>
    <input type='radio' name='answer15' id='answer15' value='D' />
    <label for='answer15D'>Nikada ili jako retko</label>
    </div>
    </li>

    <li>
    <h3>Koliko često konzumirate hranu iz FastFood restorana?</h3>

    <div>
    <input type='radio' name='answer16' id='answer16' value='A' />
    <label for='answer16A'>Svaki dan</label>
    </div>

    <div>
    <input type='radio' name='answer16' id='answer16' value='B' />
    <label for='answer16B'>Svaki drugi dan</label>
    </div>
     <div>
    <input type='radio' name='answer16' id='answer16' value='C' />
    <label for='answer16C'>Jednom nedeljno</label>
    </div>
    <div>
    <input type='radio' name='answer16' id='answer16' value='D' />
    <label for='answer16D'>Ne jedem u Fast Food restoranima</label>
    </div>
    </li>

    <li>
    <h3>Koliko često jedete pečenu hranu?</h3>

    <div>
    <input type='radio' name='answer17' id='answer17' value='A' />
    <label for='answer17A'>Svaki dan</label>
    </div>

    <div>
    <input type='radio' name='answer17' id='answer17' value='B' />
    <label for='answer17B'>Svaki drugi dan</label>
    </div>
     <div>
    <input type='radio' name='answer17' id='answer17' value='C' />
    <label for='answer17C'>Jednom nedeljno</label>
    </div>
    <div>
    <input type='radio' name='answer17' id='answer17' value='D' />
    <label for='answer17D'>Ne jedem pečenu hranu</label>
    </div>
    </li>

    <li>
    <h3>Kada ogladnite a nije vreme za obrok, šta pojedete?</h3>

    <div>
    <input type='radio' name='answer18' id='answer18' value='A' />
    <label for='answer18A'>Čips</label>
    </div>

    <div>
    <input type='radio' name='answer18' id='answer18' value='B' />
    <label for='answer18B'>Kokice</label>
    </div>
    <div>
    <input type='radio' name='answer18' id='answer18' value='C' />
    <label for='answer18C'>Semenke, kikiriki, lešnik, badem</label>
    </div>
    <div>
    <input type='radio' name='answer18' id='answer18' value='D' />
    <label for='answer18D'>Slatkiše</label>
    </div>  
    <div>
    <input type='radio' name='answer18' id='answer18' value='E' />
    <label for='answer18E'>Voće</label>
    </div>  
    <div>
    <input type='radio' name='answer18' id='answer18' value='F' />
    <label for='answer18F'>Popijem tečnost i čekam da pregladnim</label>
    </div>  
    </li>

    <li>
    <h3>Da li jedete i kada niste gladni?</h3>

    <div>
    <input type='radio' name='answer19' id='answer19' value='A' />
    <label for='answer19A'>Da</label>
    </div>

    <div>
    <input type='radio' name='answer19' id='answer19' value='B' />
    <label for='answer19B'>Ne</label>
    </div>
    </li>

    <li>
    <h3>Okarakterišite sebe?</h3>

    <div>
    <input type='radio' name='answer20' id='answer20' value='A' />
    <label for='answer20A'>Optimista</label>
    </div>

    <div>
    <input type='radio' name='answer20' id='answer20' value='B' />
    <label for='answer20B'>Pesimista</label>
    </div>
    </li>

    <br/>
    <input type="image" src="http://www.programtreninga.com/slike/dugmetest.png" alt="Submit Form" width="110" />

    <p><strong>* Napomena: morate odgovoriti na sva pitanja kako biste dobili tačan rezultat!</strong></p>
</ol>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:25:33.023

简单的方法是这样的：

```
if( document.querySelectorAll("input[type=radio]:checked").length < 20) {
    alert("You didn't answer all the questions");
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:30:51.347

您也可以使用`jquery`.

```
var names = {};
$('input:radio').each(function() {
      names[$(this).attr('name')] = true;
});
var count = 0;
$.each(names, function() {
      count++;
});
if($('input:radio:checked').length == count) {
      // all questions answered
} 
```

# javascript - 来自字符串和格式模板的新 javascript 日期？

> ID：15212281
> 
> 赞同：1
> 
> 时间：2013-03-04T22:23:01.380
> 
> 标签：javascript

我有一个适用于多种“文化”的应用程序。我将使用许多日期格式。

我有一个带有我的格式的字符串（即'd/m/y'，但请记住这是可变的）和2个带有该给定格式日期的文本输入。

我需要将输入框 1 中的日期与输入框 2 中的日期进行比较。我有一个方法可以很好地做到这一点，直到我们添加了国际格式。

```
new Date(endDate) >= new Date(startDate) 
```

这曾经仅适用于美国日期。现在没有。有没有我可以使用的方法像这样工作？：

```
new Date(endDate, 'd/m/y') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:42:54.683

您可能需要考虑[moment.js 库](http://momentjs.com/)，它可以让您摆脱许多日期操作问题，因为 Javascript 无法解析语言环境格式。对于你的情况，你会写

```
moment("12-25-1995", "MM-DD-YYYY"); 
```

这将创建一个“时刻”对象，将日期字符串解析为提供的模板。

# java - org.apache.struts.action 不存在

> ID：15212285
> 
> 赞同：-2
> 
> 时间：2013-03-04T22:23:34.133
> 
> 标签：java, jakarta-ee, struts, struts-1

下面我给出我的代码，它显示了一些错误，它说不`org.apache.struts.action`存在我能做什么，请告诉我解决方案....

```
import javax.servlet.http.HttpSession;
import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.action.ActionForward;

public class LoginAction extends org.apache.struts.action.Action {

    /* forward name="success" path="" */
    private final static String SUCCESS = "success";

    public ActionForward execute(ActionMapping mapping, ActionForm  form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {
             LoginBean loginbean=(LoginBean)form;
             String uname=loginbean.getLogin();
             String pass=loginbean.getPass();
             HttpSession session=request.getSession();
             ArrayList al=new ArrayList();
             al.add(uname);//User Name
             al.add("1");//User Id
             al.add("A");//User Level Means Admin Or Simple User

             if(uname.equalsIgnoreCase("Admin")&& pass.equals("admin"))
             {
                 session.setAttribute("admin",al.get(0));
                 response.sendRedirect("main.jsp");
             }
             else
             {
                 session.removeAttribute("admin");
                 response.sendRedirect("index.jsp?error=notvalid");
             }

        return mapping.findForward(SUCCESS);
    }
} 
```

下面我给出我的代码它显示了一些错误它说 org.apache.struts.action 不存在我能做什么请告诉我解决方案....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:41:59.597

您需要将 Struts jar 添加到类路径中。

# c# - 解决泛型和动态参数

> ID：15212286
> 
> 赞同：0
> 
> 时间：2013-03-04T22:23:44.423
> 
> 标签：c#, dynamic, dapper, service-layer

我正在尝试编写一个包装器来隐藏我发现自己为 Dapper 中的每个 db 调用重复的大部分代码。（即 Sql Connection、try、default catch 和 finally）本质上我想做类似下面的代码，但我知道由于有一个动态参数，我不能以这种方式使用泛型 int。

我得到错误的方式是：

> 考虑强制转换动态参数或调用没有扩展方法语法的扩展方法（参考 conn.Query 方法）

有没有办法重构我的`ExecuteQuery`或类似的东西？

```
public abtract class IDbAccessService
{
   public LogService Logger { get; set; }

   public virtual IEnumerable<T> ExecuteQuery<T>(string sql, dynamic param, string connString)
      where T : BaseModel
   {
      using (var conn = DataAccessHelpers.GetOpenConnection(connString))
      {
         try
         {
            return conn.Query<T>(sql, param).ToList<T>();
         }
         catch (Exception ex)
         {
            Logger.Logger.Error(ex.Message, ex);
            throw ex;
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:01:26.130

扩展方法不能动态调度。所以在没有扩展方法语法的情况下调用它：

```
static IEnumerable<T> ExecuteQuery<T>(string sql, dynamic param, string connStr)
    where T : BaseModel
{
    using (var conn = DataAccessHelpers.GetOpenConnection(connStr))
    {
        return SqlMapper.Query(conn, sql, param).ToList<T>();
    }
} 
```

此外，您还有无用的日志记录，它为单个错误创建多个日志条目，以及无用的连接处理（通过*使用*块自动完成）。

异常处理技巧：

*   处理异常并记录它
*   将异常包装在高级异常中并抛出该包装器（调用者将处理该高级异常，或者也将包装它）
*   不要捕获异常（调用者将执行第一个或第二个选项）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:01:52.263

我试图创建如下的辅助方法。

```
private SqlConnection GetSqlConnection()
        {
            var sqlConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["con1"].ConnectionString);
            sqlConnection.Open();
            return sqlConnection;
        }

public IEnumerable<T> GetAll<T>(string query, object cmdParams = null, CommandType cmdType = CommandType.Text) where T : class
        {
            IEnumerable<T> objList;
            using (var conn = GetSqlConnection())
            {
                objList = conn.Query<T>(query, param: cmdParams, commandTimeout:0, commandType: cmdType);
                conn.Close();
            }
            return objList;
        }

 public IEnumerable<dynamic> Query(string query, object cmdParams = null, CommandType cmdType = CommandType.Text)
        {
            IEnumerable<dynamic> objDyn;
            using (var conn = GetSqlConnection())
            {
                objDyn = conn.Query(query, cmdParams, commandTimeout: 0, commandType: cmdType);
                conn.Close();
            }
            return objDyn;
        } 
```

从另一层：

```
var param = new DynamicParameters();
param.Add("@name", name);
var objGroupsList = _iDapper.GetAll<CustomerDTO>("dbo.GetCustomersList", param, CommandType.StoredProcedure).ToList(); 
```

# django - django 自定义过滤器只在不注册的情况下工作？

> ID：15212293
> 
> 赞同：0
> 
> 时间：2013-03-04T22:24:05.947
> 
> 标签：django, django-templates

我正在关注自定义 django 过滤器的教程，真的无法解释发生了什么。这是模板中的代码。

```
{% load filters %}
{{ entry.language|cut:"blabla" } 
```

这是过滤器

```
from django import template

register = template.Library()

def cut(value, arg):
    return value.replace(arg, '')

register.filter('cut', cut) 
```

奇怪的是，我收到了这个错误

```
AttributeError
'Language' object has no attribute 'replace' 
```

但是如果我删除 register filter function `register.filter('cut', cut)`，没有错误，并且 filter 实际运行？这里到底发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:36:01.023

已经有一个内置过滤器[`cut`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#cut)。

您的问题是，如果参数不是字符串，它将失败。内置版本大概会在调用之前转换为字符串`replace()`。改用那个。

# php - 调用子页面缩略图

> ID：15212297
> 
> 赞同：0
> 
> 时间：2013-03-04T22:24:25.210
> 
> 标签：php, wordpress

我在我的 Wordpress 网站中使用以下代码。短代码查找当前页面的子页面并返回它们的标题和摘录。我正在尝试集成页面缩略图，但它正在返回父页面的帖子缩略图。有任何想法吗？

```
 add_shortcode("children-excerpt", "sc_show_children_excerpt");

   function sc_show_children_excerpt($atts, $content = null){
if($atts['length'] > 0 ){
    //maybe set a minimum length here

   }else{
    $atts['length'] = 50;
}

if(isset($atts['id']) && is_numeric($atts['id'])){
    //id specified by shortcode attribute
    $parent_id = $atts['id'];
}else{
    //get the id of the current article that is calling the shortcode
    $parent_id = get_the_ID();
}

$output = "";

$i = 0;

if ( $children = get_children(array(
    'post_parent' => $parent_id,
    'orderby' => 'menu_order',
    'order' => 'ASC',
    'post_type' => 'page')))
{
    foreach( $children as $child ) {
        $title = $child->post_title;

        $child_excerpt = apply_filters('the_excerpt', $child->post_excerpt);

        //split excerpt into array for processing
        $words = explode(' ', $child_excerpt);

        //chop off the excerpt based on the atts->lenth
        $words = array_slice($words, 0, $atts['length']);

        //merge the array of words for the excerpt back into sentances
        $child_excerpt = implode(' ', $words);

        $link = get_permalink($child->ID);

        $test = wp_get_attachment_image_src( $post->ID, 'thumbnail' );          
        $image_id = get_post_thumbnail_id($post->ID);  
        $image_url = wp_get_attachment_image_src($image_id,'medium');  
        $image_url = $image_url[0]; 
        $result = '<img src="'.$image_url.'" class="alignleft" />';

        $output .= "<div class='attorney'>";
        $output .= $result;
        $output .= "<a href='$link'>$title</a>";
        $output .= "<p>". $child_excerpt ."</p>";
        $output .= "</div><div class='clear'></div>";
    }
} 

return $output; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:53:00.383

这应该让你的孩子缩略图，使用这个

```
 $image_url = get_the_post_thumbnail($child->ID,'medium'); 
   $result = $image_url; 
```

代替

```
 $image_url = wp_get_attachment_image_src($image_id,'medium');  
   $image_url = $image_url[0]; 
   $result = '<img src="'.$image_url.'" class="alignleft" />'; 
```

# c# - 字符串比较时出现间歇性“超出范围”异常

> ID：15212298
> 
> 赞同：-1
> 
> 时间：2013-03-04T22:24:27.283
> 
> 标签：c#, console-application, string-comparison, outofrangeexception

环境：C#、VS2012、SharePoint 2010

我正在使用控制台应用程序与 SharePoint 网站进行交互，并且我正在尝试对一组警报标题进行简单的字符串比较...但是在调试时，*有时会*在特定的细绳。这是代码片段：

```
// This is pointing to a txt file with two lines in it, "folder1" and "folder3"
string[] aTitleList = System.IO.File.ReadAllLines(@"c:\path\to\specific\file.txt");
// Now we iterate through all the alerts to compare titles against those two lines
for (int i = oAlertCollection.Count - 1; i > -1; i--)
{
    System.Guid guid = oAlertCollection[i].ID;
    foreach (string sTitle in aTitleList)
    {
        if (oAlertCollection[i].Title.Contains(sTitle))
        {
            // At this point it throws the exception on the sTitle string
            // But ONLY on "folder3" and ONLY about half of the time
            // If I change it to something other than "folder3" it works 100%
        }
    }
} 
```

这在其他人看来是不是很奇怪？我在这个应用程序中有很多其他方法可以进行类似的比较并且没有问题，即使使用“folder3”字符串，只有当我使用这个特定的数组时我才会遇到麻烦。

**编辑 1 - 循环的深入解释：**这种情况下的循环是删除与给定字符串匹配的项目。循环的设置方式，它从最后一个项目开始并迭代直到它达到 0（这是因为 SharePoint 自动将集合中每个项目的 ID 向下移动以替换已删除的项目，因此没有间隙，这也是它获取`Count`方法的地方，查看集合中编号最高的 ID）。澄清一下：该`Count`方法返回警报的总数，但实际的警报 ID 从 0 开始，因此`for`循环在使用`i`索引之前调整计数。如果该`Count`方法返回 0 个元素，则`for`循环将其设置为 -1 并且不会触发。

**编辑 2 - 测试结果：**我一直在对应用程序进行电池测试，虽然在使用阵列中的 2 个项目时我仍然无法找到它何时工作/炸弹之间的一致性，但我发现了一些可能会阐明原因的东西。如果我将数组增加到 3 个项目，它将始终失败。当第一个或第二个字符串比较为真并且项目被删除时，问题就出现了，因为此时`foreach`循环没有退出，它会继续针对现在不存在的警报测试剩余的字符串，这会引发异常。~~**当数组中只有两个项目发生这种情况时，在第一个项目触发删除后测试第二个项目并不总是引发异常。一半的时间它“测试”已删除的警报，就好像它仍然在那里一样，并继续主循环。**~~

~~作为参考，这是对[SPAlertCollection](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spalertcollection.aspx)工作原理的解释。即使在它被删除之后，它是否可能会在内存中短暂保留警报？这是我可以看到它每次测试已删除警报时都不会抛出异常的唯一方法。~~

**最终编辑：**问题得到了很好的回答，划线部分仍未得到解答，但最终与情况无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:35:03.760

**As pointed out by Jim Mischel the following can only happen if you happen to delete elements from `oAlertCollection` in your loop**

* * *

I'm going out on a limb and assume your `oAlertCollection` can sometimes hold 0 elements, which is why your code crashes on this line

```
if (oAlertCollection[i].Title.Contains(sTitle)) 
```

You'd then be trying to access position -1 in the array which throws an outofrange exception

You could avoid this by checking for `oAlertCollection.Count`'s value before looping like this

```
if(oAlertCollection.Count() > 0)
{
    //for loop
} 
```

This way if it actually holds 0 elements you avoid the error because it will not enter the loop

# python - 将节点添加到第一个文档树并保存到文件

> ID：15212303
> 
> 赞同：2
> 
> 时间：2013-03-04T22:24:43.757
> 
> 标签：python, docutils

**我想在文档树中插入一个自定义节点并将这些更改保存到文件中。**

我正在阅读以下 RST 文件...

```
Hello World!
############

:date: 2010-10-03 10:20
:author: James Bond

This is a test. 
```

像这样：

```
doctree = docutils.core.publish_doctree(open('test.rst').read()) 
```

我现在想在 docinfo 中插入一个新节点 :id: 234123 并将其保存为 test.rst。但是怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:04:54.913

没有 reStructuredText 编写器。

在此处查看答案：[是否有 reST Writer？](https://stackoverflow.com/questions/13804333/is-there-a-rest-writer/13805167#13805167)

如果这是一个微不足道的更改，您最好编写一个简单的函数，将文件作为文本行读取，然后将其写入新的文本文件，在解析/写入期间的某个时间点插入新行。

# objective-c - 如何创建一个方法来返回带有另一个类的对象的数组？

> ID：15212305
> 
> 赞同：2
> 
> 时间：2013-03-04T22:24:46.443
> 
> 标签：objective-c

我有一个类`AddressCards.h/m`，另一个类`AddressBook`，现在我想创建一个搜索方法来查找 AddressBook 类中的名称，但出现了一些错误。

我想我需要我的方法来返回一个 AddressCards 类型指针，但我不确定如何返回它，因为我需要一个包含名称的数组，以防匹配超过 1 个。

这是我当前的代码：

```
 -(NSMutableArray *) searchName:(NSString *) someName{

        NSMutableArray *results = [NSMutableArray alloc];

        for (NSString *name in book)
        {
            if ([someName caseInsensitiveCompare:name] == NSOrderedSame)
                [results addObject:name];
        }
        return results;
    }

@end 
```

我在这一行出现错误：`if ([someName caseInsensitiveCompare:name] == NSOrderedSame)` 这说明`signal 1 SIGABRT`我不知道它是什么：/

这是添加地址卡的方法：

```
-(void) addCard:(AddressCards *)theCard{

    [book addObject:theCard];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:46:45.057

`book`是 的 NSMutableArray `AddressCards`，但是您正在尝试使用 NSString ( ) 迭代对象`name`。

您应该使用 object 进行迭代`addressCards`，然后使用相应的`name`属性进行比较。我相信您应该实现类似于以下代码的搜索方法：

```
-(NSMutableArray *) searchName:(NSString *) someName{

    NSMutableArray *results = [[NSMutableArray alloc] init];

    for (AddressCards *addressCard in book)
    {
        // do your comparison check here
        // assuming that you have a name property in AddressCards class

        if ([addressCard.name rangeOfString:someName].location != NSNotFound)
            [results addObject:addressCard.name];
    }
    return results;
} 
```

希望这可以帮助。

[编辑：使用此答案](https://stackoverflow.com/a/2754075/1576979)根据需要修改了比较代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T22:41:29.847

`init`一个问题是您在创建`results`数组时没有调用。

```
NSMutableArray *results = [NSMutableArray alloc]; 
```

应该：

```
NSMutableArray *results = [[NSMutableArray alloc]init]; 
```

这肯定会导致`SIGABRT`错误。

# android - 从服务器调用值到字符串

> ID：15212307
> 
> 赞同：2
> 
> 时间：2013-03-04T22:24:54.383
> 
> 标签：android, spinner

我想从服务器访问字符串列表。下面是我的代码。当我在第二个微调器显示中选择第一个微调器值时，从服务器获取。当我在输出中选择微调器的任何值时，我希望服务器发送值，请解释。

```
import android.os.Bundle;
import android.app.Activity;
import android.widget.Spinner;
import android.widget.Toast;

public class Library11 extends Activity implements OnItemSelectedListener{
    /** Called when the activity is first created. */
    Spinner sp;
    Spinner sp1;
    Spinner sp2;
    Spinner sp3;
    Spinner sp4;
    Spinner sp5;
    String[] menu;
    ArrayAdapter<String> adp2;
    ArrayAdapter<String> adp1;
    ArrayAdapter<String> adp;
    ArrayAdapter<String> adp3;
    ArrayAdapter<String> adp4;
    ArrayAdapter<String> adp5;
    ArrayAdapter<String> adp6;
    ArrayAdapter<String> adp7;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_library11);
        sp=(Spinner)findViewById(R.id.Spinner01);
        sp1=(Spinner)findViewById(R.id.spinner1);
        menu= new String[]{"Select Subject","Engineering Physics-I","Engineering Chemistry","Engineering", "Mathematics-I","Communicative English","Fundamentals of Computer Programming"
    };
} 
```

在上半部分，第一个微调器调用该值，然后我为第二个微调器使用数组适配器，但在这里我想访问 Web 服务器值。如果可以编辑此内容或我必须更改某些内容，请告诉我。

```
String[] Author=new String[]{"Author"}; 
      String[] Physics=new String[]{"H.c. Jain(320)"};
       String[] Chemistry=new String[]{"Yasmin Ali(180)"};
       String[] Maths=new String[]{"Gokhru(200)"};
       String[] English=new String[]{"Jain & Jain(200)"};
       String[] Mechanics=new String[]{"Jaz(320)"};
       String[] Programming=new String[]{"Jaz(320)"};
       adp= new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,menu);
       adp1= new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,Author);
       adp2= new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,Physics);
        adp3= new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,Chemistry);
       adp4=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,Maths);
       adp5=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,English);
       adp6=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,Mechanics);
       adp7=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,Programming);

       sp.setAdapter(adp);

      sp.setOnItemSelectedListener(this);
       }
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub

        menu[0]="Select Subject";
        Toast.makeText(getApplicationContext(), "Selected the book & Author available", 1500).show();
            if(sp.getSelectedItemPosition()==0)
                sp1.setAdapter(adp1);
            if(sp.getSelectedItemPosition()==1){
                sp1.setAdapter(adp2);
                }
            if(sp.getSelectedItemPosition()==2){
                sp1.setAdapter(adp3);
                }
            if(sp.getSelectedItemPosition()==3){
                sp1.setAdapter(adp4);
                }
            if(sp.getSelectedItemPosition()==4){
                sp1.setAdapter(adp5);
                }
            if(sp.getSelectedItemPosition()==5){
                sp1.setAdapter(adp6);
                }
            if(sp.getSelectedItemPosition()==5){
                sp1.setAdapter(adp7);
                }
            }

    public void onNothingSelected(AdapterView<?> arg0) {

    //  sp.setAdapter(adp3);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:11:14.720

这是我的代码。这和你的有点相似。我的代码从 Facebook API 检索 Facebook 朋友并将他们添加到`spinner`.

```
public class Friends extends AsyncTask<String, Void, Void>{
    @Override
    protected Void doInBackground(String... params) {

        try{
            String fql = "SELECT uid, name FROM user WHERE is_app_user  AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())";
            Bundle parameters = new Bundle();

            parameters.putString("query", fql);
            parameters.putString("method", "fql.query");
            parameters.putString("access_token",  fb.getAccessToken());
            String Response = fb.request(parameters);
            JSONArray json = new JSONArray(Response);
            list = new ArrayList<String[][]>();
            String[][] friendsToList;
            SpinnerList = new ArrayList<String>();
            String TempToSpinnerList=new String();
            for(int i = 0; i < json.length(); i++){
                friendsToList = new String[1][2];
                friendsToList[0][0] = json.getJSONObject(i).getString("uid");
                friendsToList[0][1] = json.getJSONObject(i).getString("name");
                TempToSpinnerList= friendsToList[0][1];
                list.add(i,friendsToList);
                SpinnerList.add(TempToSpinnerList);
            }
            return null;
        }catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (FacebookError e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;    
    }

    @Override
    protected void onPostExecute(Void v)
    {
        dataAdapter = new ArrayAdapter<CharSequence>(getApplicationContext(),android.R.layout.simple_spinner_item);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        Iterator<String> it = SpinnerList.iterator();
        while(it.hasNext()){
            String ve = (String) it.next();
            dataAdapter.add(ve);
        }
        spinner.setAdapter(dataAdapter);
        Log.e("Hh","Done");
    }
} 
```

您可以使用连接到服务器套接字的类似 AsyncTask 来获取所需的数据。

# android - 无法从 ViewPager 中删除片段，为什么？

> ID：15212309
> 
> 赞同：1
> 
> 时间：2013-03-04T22:25:00.020
> 
> 标签：android, android-viewpager, fragment, fragmentstatepageradapter

我一定遗漏了一些东西，但我无法从我的`ViewPager`. 我将页面标题存储在`ArrayList`：

部分`ViewPagerActivity.java`（这是一个`FragmentActivity`，主要活动）：

```
public static ArrayList<String> mEntries = new ArrayList<String>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate( savedInstanceState );
    setContentView( R.layout.main );
    context=this;

    mEntries.add("   111");
    mEntries.add("   222");
    mEntries.add("   333");
    mEntries.add("   444");
    mEntries.add("   555");
    mEntries.add("   666");

    List<String> fragments = new Vector<String>();

    fragments.add(111.class.getName());
    fragments.add(222.class.getName());
    fragments.add(333.class.getName());
    fragments.add(444.class.getName());
    fragments.add(555.class.getName());
    fragments.add(666.class.getName());

    this.mPagerAdapter = new PagerAdapter1(super.getSupportFragmentManager(), fragments);
    pager = (ViewPager)super.findViewById(R.id.viewpager);
    pager.setAdapter(this.mPagerAdapter);
    // ... 
```

我有一个片段 ( `111`)，我想`555`通过单击`111`. （因为它以 , 开头`0`，`555`是第 4 个片段）。

部分`fragment111.java`（即 a `Fragment`）：

```
 button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
           ViewPagerActivity.mEntries.remove(5);
     ViewPagerActivity.mPagerAdapter.removeX(5);
    ViewPagerActivity.mPagerAdapter.removeX2(5);
    ViewPagerActivity.pager.setAdapter( ViewPagerActivity.mPagerAdapter);
    ViewPagerActivity.pager.getAdapter().notifyDataSetChanged();    
   }
        }); 
```

我有`POSITION_NONE`一些人通过覆盖该`getItemPosition()`方法而错过的东西。

我的适配器类：

```
 public class PagerAdapter1 extends FragmentStatePagerAdapter {

    private List<String> fragments;
       private static final String TAG = "FragmentPagerAdapter";
        private static final boolean DEBUG = true;
        private Fragment mCurrentPrimaryItem = null;
        private final FragmentManager mFragmentManager;
        private FragmentTransaction mCurTransaction = null;

    /**
     * @param fm
     * @param fragments2
     */
    public PagerAdapter1(FragmentManager fm, List<String> fragments2) {
        super(fm);
        mFragmentManager=fm;
        this.fragments = fragments2;
    }
    /* (non-Javadoc)
     * @see android.support.v4.app.FragmentPagerAdapter#getItem(int)
     */
    @Override
    public Fragment getItem(int position) {
        //return this.fragments.get(position);
        return Fragment.instantiate(ViewPagerActivity.context, fragments.get(position));

    }

    /* (non-Javadoc)
     * @see android.support.v4.view.PagerAdapter#getCount()
     */
    @Override
    public int getCount() {
        return this.fragments.size();
    }

      /**
     * Return the Fragment associated with a specified position.
     */

    @Override
    public void startUpdate(ViewGroup container) {
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {

        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }

        final long itemId = getItemId(position);

        // Do we already have this fragment?
        String name = makeFragmentName(container.getId(), itemId);

        Fragment fragment = mFragmentManager.findFragmentByTag(name);
        if (fragment != null) {
            if (DEBUG) Log.v(TAG, "Attaching item #" + itemId + ": f=" + fragment);
                mCurTransaction.attach(fragment);

        } else {

            fragment = getItem(position);

            if (DEBUG) Log.v(TAG, "Adding item #" + itemId + ": f=" + fragment);
            mCurTransaction.add(container.getId(), fragment,
                    makeFragmentName(container.getId(), itemId));

        }

        if (fragment != mCurrentPrimaryItem) {
            fragment.setMenuVisibility(false);
            fragment.setUserVisibleHint(false);
        }

        return fragment;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }
        if (DEBUG) Log.v(TAG, "Detaching item #" + getItemId(position) + ": f=" + object
                + " v=" + ((Fragment)object).getView());
        mCurTransaction.detach((Fragment)object);
    }

    @Override
    public void setPrimaryItem(ViewGroup container, int position, Object object) {
        Fragment fragment = (Fragment)object;
        if (fragment != mCurrentPrimaryItem) {
            if (mCurrentPrimaryItem != null) {
                mCurrentPrimaryItem.setMenuVisibility(false);
                mCurrentPrimaryItem.setUserVisibleHint(false);
            }
            if (fragment != null) {
                fragment.setMenuVisibility(true);
                fragment.setUserVisibleHint(true);
            }
            mCurrentPrimaryItem = fragment;
        }

    }

    @Override
    public void finishUpdate(ViewGroup container) {
        if (mCurTransaction != null) {
            mCurTransaction.commitAllowingStateLoss();
            mCurTransaction = null;
            mFragmentManager.executePendingTransactions();
        }

    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return ((Fragment)object).getView() == view;
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    /**
     * Return a unique identifier for the item at the given position.
     *
     * <p>The default implementation returns the given position.
     * Subclasses should override this method if the positions of items can change.</p>
     *
     * @param position Position within this adapter
     * @return Unique identifier for the item at position
     */
    public long getItemId(int position) {
        return position;
    }

    private static String makeFragmentName(int viewId, long id) {
        return "android:switcher:" + viewId + ":" + id;
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }

   public void removeX(int position){
        fragments.remove(5);
}        

public void removeX2(int position){

    Fragment ff =  getItem(position);
    mFragmentManager.beginTransaction().remove(ff).commit();
    notifyDataSetChanged();
}

} 
```

我正在使用`FragmentStatePagerAdapter`并且`notifyDataSetChanged()`效果很好（我更新了 a 的状态`CheckBox`并且我看到它有效）。如何从`ViewPager`?

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:41:26.780

我遇到了同样的问题，我找到的唯一解决方案是在删除片段后再次设置适配器，如下所示：

```
@Override
    public void onClick(View v) {
    ViewPagerActivity.mEntries.remove(4);
    pager.setAdapter(mPagerAdapter);
    } 
```

更新：您不需要再次设置适配器。**这是我的PagerAdapter**的一些方法，您可能需要进行一些修改才能将其用作 FragmentPagerAdapter

要删除视图：

```
public static void deleteChildren(int pStart) {

    List<ViewInfo> viewToRemove = new ArrayList<ViewInfo>();

    for (int iView = pStart+1; iView < _views.size(); iView++) {
        viewToRemove.add(_views.get(iView));
    }

    if (viewToRemove.size() != 0) {
        _views.removeAll(viewToRemove);
    }
}

@Override
public void destroyItem(View pView, int pIndex, Object pObject) {
        ((ViewPager) pView).removeView((View)pObject);
} 
```

覆盖 getItemPosition(Object pObject) ：

```
 @Override
public int getItemPosition(Object pObject) {
    int pos = 0;
    for (ViewInfo iView : _views) {
        if (iView.mView == (View)pObject) {

            break;
        }
        pos++;
    }
    return pos;
} 
```

刷新所有视图：

```
public static void refreshAdapterViewPager() {
    _pagerAdapter.notifyDataSetChanged();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T14:09:23.397

问题是 ***FragmentStatePagerAdapter***，它回收了从视图中消失的片段。即使你创建一个新的。尝试改用 **FragmentPagerAdapter** ，这会重新开始实例化它。

# c4 - 几行代码后更改动画持续时间

> ID：15212311
> 
> 赞同：2
> 
> 时间：2013-03-04T22:25:03.900
> 
> 标签：c4

我想做

1.  将动画持续时间更改为 0
2.  做一点事
3.  将 animationDuration 更改为更长的时间（例如 1.0f）
4.  做别的事

...全部在 touchesBegan 方法中，中间没有任何“暂停”。但似乎它不会让我这样做。

像这样：

```
s1.animationDuration = 0.0f;
s1.center = touchedPoint;
s1.alpha = 1.0f;
s1.animationDuration = 1.0f;
s1.alpha = 0.0f; 
```

完整示例： [https ://gist.github.com/gregtemp/5086240](https://gist.github.com/gregtemp/5086240)

我知道我可以将其移至 touchesEnded 方法，但我想避免这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:45:55.197

在您的问题中，您要问如何：

1.  更新对象的属性
2.  移动它
3.  更新同一对象的属性
4.  淡出

...这样当您触摸屏幕时它可以重新出现在另一个地方。

此外，你想用一种方法来做到这一点......

我建议采取不同的方法来解决这个问题。

首先，尝试将形状视为在您删除或处置它们之前一直存在的对象。基本上，您可以将对象视为将传递给各种方法的事物。

当您开始这样思考时，您可以使用以下技术来制作您正在寻找的效果：

```
#import "C4WorkSpace.h"

@implementation C4WorkSpace 

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch *t in touches) {
        CGPoint touchPoint = [t locationInView:self.canvas];
        [self createObjectAtPoint:touchPoint];
    }
}

-(void)createObjectAtPoint:(CGPoint)newPoint {
    C4Shape *s = [C4Shape ellipse:CGRectMake(newPoint.x-25,newPoint.y-25,50,50)];
    s.userInteractionEnabled = NO;
    [self.canvas addShape:s];
    [self runMethod:@"fadeAndRemoveShape:" withObject:s afterDelay:0.0f];
}

-(void)fadeAndRemoveShape:(C4Shape *)shape {
    shape.animationDuration = 1.0f;
    shape.alpha = 0.0f;
    [shape runMethod:@"removeFromSuperview" afterDelay:shape.animationDuration];
}

@end 
```

这是做什么的：

1.  获得接触点
2.  将触摸点传递给创建形状的方法
3.  将创建的形状传递给淡出它的方法
4.  当它消失时从画布中删除形状
5.  形状从屏幕上删除后会自动从内存中删除

# ruby-on-rails - hstore 上的新手困惑加入了 rails

> ID：15212315
> 
> 赞同：0
> 
> 时间：2013-03-04T22:25:17.230
> 
> 标签：ruby-on-rails, postgresql, model, controller, hstore

我有两个基于 postgres hstore 的表，`entity`并且`info`，它们看起来都像这样：

```
 Column   |           Type           |                           Modifiers
------------+--------------------------+---------------------------------------------------------------
 id         | integer                  | not null default nextval('entity__entities_id_seq'::regclass)
 created_at | timestamp with time zone | not null
 updated_at | timestamp with time zone | not null
 context    | hstore                   | default hstore((ARRAY[]::character varying[])::text[])
 data       | hstore                   | default hstore((ARRAY[]::character varying[])::text[]) 
```

所以我想要执行的 SQL 查询是这样的：

```
SELECT e.context->'device' AS device, i.data->'location' AS location from entity AS e 
  LEFT JOIN info AS i ON e.context->'device' = i.context->'device'  
  WHERE e.data->'type'='chassis 
```

所以我有两条路：

*   编写在数据库上引用 VIEW 的 rails 控制器
*   使用include，join等编写一些rails，例如查询。

我真的更愿意做后者。但是，对于要使用的 Rails 代码，我完全感到困惑。

我的模型是（我知道我错过了`belongs_to`等，但我不知道如何与 hstore 字段建立关系）：

```
class Device < ActiveRecord::Base
  self.table_name = 'entity'
  self.primary_key = 'id'
  attr_accessible :id, :created_at, :updated_at, :context, :data
  serialize :context, ActiveRecord::Coders::Hstore
  serialize :data, ActiveRecord::Coders::Hstore
end

class DeviceInfo < ActiveRecord::Base
  self.table_name = 'info'
  self.primary_key = 'id'
  attr_accessible :id, :created_at, :updated_at, :context, :data
  serialize :context, ActiveRecord::Coders::Hstore
  serialize :data, ActiveRecord::Coders::Hstore
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:43:52.513

我可能错了，但 ActiveRecord 的理念是为数据库创建一个公共层，并且该查询与 postgres 非常相关，具有序列化的内部连接。

您可以编写一个原始查询来执行此操作：

```
Device.find_by_sql("SELECT e.context->'device' AS device, i.data->'location' AS location from entity AS e LEFT JOIN info AS i ON e.context->'device' = i.context->'device' WHERE e.data->'type'='chassis") 
```

# objective-c - 继承 .m 文件中声明的方法

> ID：15212321
> 
> 赞同：1
> 
> 时间：2013-03-04T22:25:36.207
> 
> 标签：objective-c, uiviewcontroller, derived-instances

我现在知道 Objective-C 中没有受保护的方法，这是我的问题。我有两个具有许多共享功能和属性的视图控制器。我的愿景是拥有一个 BaseViewController 来保存共享方法和属性，并且两个类将继承并覆盖所需的功能，同时使用相同的变量， **我不希望通过将共享函数**放在 . h 文件

为了帮助澄清我的问题，我正在添加代码:)

```
@interface BaseViewController ()
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *uiButtons;
- (void)setBtns:(NSArray *)p_btns; //tried with & without this line
@end

@implementation BaseViewController
- (void)setBtns:(NSArray *)p_btns {
    uiButtons = p_btns;
    //do something generic with the buttons (set font, image etc.)
}
@end

@interface DerivedViewController ()
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *buttonsConnectedToTheActualView;
@end

@implementation DerivedViewController
- (void) setBtns:(NSArray *)p_btns {
    [super setBtns:p_btns];
    //do something specific with the buttons (decide if they face up or down according to this class logic)
}
@end 
```

调用`[super setBtns:p_btns];`引发错误：

`DerivedGameViewController.m:No visible @interface for 'BaseViewController' declares the selector 'setBtns:'`

我怎样才能做到这一点？有人可以发布一个片段或指出我的错误（在代码或概念中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:31:46.913

只需使用在类别中声明的受保护方法创建第二个标头。适当地命名和记录标题。

UIGestureRecognizer.h 和[UIGestureRecognizerSubclass.h](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009279-CH1-DontLinkElementID_2)可以作为示例为您服务。

# django - 博客存档 Django

> ID：15212323
> 
> 赞同：0
> 
> 时间：2013-03-04T22:25:39.530
> 
> 标签：django, date, blogs, archive

我正在尝试按照[此处的教程](http://www.quxisto.com/2012/mar/5/not-another-django-blog-part-2/)创建基于年/月的博客存档。当尝试访问诸如“www.example.com/blog/2013/feb”或“www.example.com/blog/2013”​​之类的网址时，我`TypeError: 'str' object is not callable`使用上述方法得到了一个。

我真的不在乎使用的方法是否与上面的教程中的方法相同，我只是希望档案能够正常工作，以便如果用户访问：'example.com/blog/2013/'，它会提供在中创建的对象列表2013\. 这是我到目前为止所拥有的：

意见：

```
from django.views.generic import date_based

def post_archive_year(request, year):
    return date_based.archive_year(
        request,
        year=year,
        date_field='date',
        queryset=Blog.objects.date(),
    )

def post_archive_month(request, year, month):
    return date_based.archive_month(
        request,
        year=year,
        month=month,
        date_field='date',
        queryset=Blog.objects.date(),
    ) 
```

模型：

```
class Blog(models.Model):
    name = models.CharField(max_length=50)
    date = models.DateTimeField()
    slug = models.SlugField()
    article = models.TextField()
    tags = TaggableManager()
    def __unicode__(self):
        return self.name

    @permalink
    def get_absolute_url(self):
        return ('blog_detail', None, {
            'year': self.date.year,
            'month': self.date.strftime('%b').lower(),
            'slug': self.slug
        }) 
```

网址：

```
url(r'^blog/(?P<year>\d{4})/$', view='post_archive_year', name='post_archive_year'),
url(r'^blog/(?P<year>\d{4})/(?P<month>\w{3})/$', view='post_archive_month', name='post_archive_month'), 
```

感谢您提供任何可以帮助我创建基于日期的存档的想法。感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:16:04.173

该`__unicode__`方法需要返回一个 unicode 对象。

您要返回`self.name`的是`CharField`. 只有字符串或缓冲区协议对象可以自动转换为 unicode 对象。

尝试这个：

```
def __unicode__(self):
    return u'%s' % self.name 
```

内置 Python 类型或任何具有自己`__unicode__`方法的用户定义类的另一个选项：

```
def __unicode__(self):
    return unicode(self.name) 
```

# javascript - setTimeout 计数器不工作

> ID：15212325
> 
> 赞同：0
> 
> 时间：2013-03-04T22:25:43.137
> 
> 标签：javascript, settimeout

这个 setTimeout 函数只运行一次然后停止。我没有收到任何错误，所以我不知道为什么会这样。

```
count = 100;

counter = setTimeout('timer()', 100);

$('#reset').click(function() {
    count = 100;
    counter = setTimeout('timer()', 100);
})

function timer() {
    if (count <= 0) {
        clearTimeout(counter);
        alert('done');
    }
    $('#counter').html(count);
    count -= 1;
} 
```

我尝试了 setTimeout 函数的几种不同形式，包括`setTimeout(timer(),100)`和`setTimeout(function() { timer() }, 100)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:31:13.763

您应该使用`setInterval()`which 重复函数调用，而不是`setTimeout()`，它执行一次。另外，不要`()`在函数名引用中使用。

```
var count = 100;

var counter = setInterval('timer', 100);

$('#reset').click(function() {
    count = 100;
    counter = setInterval('timer', 100);
})

function timer() {
    if (count <= 0) {
        clearInterval(counter);
        alert('done');
    }
    $('#counter').html(count);
    count -= 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:29:25.293

`setTimeout`工作正常，但它不是你要找的。试试吧`setInterval`。`setInteval(function, delay)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:29:36.740

[`setTimeout()`](http://www.w3schools.com/jsref/met_win_settimeout.asp)-在等待指定的毫秒数后执行一次函数**。**

您可能希望[`setInterval()`](http://www.w3schools.com/jsref/met_win_setinterval.asp)在指定的时间间隔内一遍又一遍地执行函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T22:30:03.593

是的，就是`setTimeout`这样。它运行代码一次。

您想使用该`setInterval`方法重复运行代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T22:31:19.693

不确定您要达到什么目的，而且我不理解**$('#reset').click** (etc) 构造。这些是 JQuery 吗？

但是，为什么不使用 setInterval()？然后在满足您的条件时清除间隔计时器？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-24T08:40:10.107

```
var count = 10;

function counter() {

    if ( count > 0 )
    {
        --count;
        var t2 = setTimeout( counter, 1000 );

        document.querySelector("#demo").innerHTML = count;
    }
    else
    {
        clearTimeout(t2);

        document.querySelector("#demo").innerHTML = "Done";
    }
}

var countdown_timeout = counter();
```

```
<p>Count: <b><span id="demo"></span></b></p>
```

# css - 是否可以使用 CSS 更改输入值？

> ID：15212328
> 
> 赞同：0
> 
> 时间：2013-03-04T22:26:20.460
> 
> 标签：css, forms, input

当用户单击时，我可以使用 CSS 更改输入字段值吗？

喜欢：

```
<input type=text name=username>
<input type=password name=password> 
```

因此，当用户单击此字段时，文本将消失，他将能够写一些东西。

我努力了：

```
input[value="Input desired username here"] {
styles...
} 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:30:06.863

没有必要为此使用 css。您可以为输入标签使用占位符属性，它将在输入框中显示默认值：

```
<input type="text" name="username" placeholder="Username" /> 
```

请注意，`placeholder`并非所有浏览器都支持该属性，如果您想让它跨浏览器，您可以编写一个 javascript 代码在您的输入框中放置一个默认值，或者使用这个简单而快速的修复：

```
<input type="text" name="username" onFocus="if(this.value=='Username') this.value='';" onBlur="if(this.value=='') this.value='Username';" value="Username" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T22:38:46.593

这称为占位符。现代浏览器将允许您使用这样的占位符属性：

```
<input type="text" name="username" placeholder="Input desired username here" /> 
```

它会如你所愿出现。然后，您将需要利用 Modernizr 将该功能反向移植到旧版浏览器。像这样的 JavaScript 会有所帮助：

```
$(document).ready(function () {
  if(!Modernizr.input.placeholder) {
    $('[placeholder]').focus(function () {
      var input = $(this);
      if (input.val() == input.attr('placeholder')) {
        input.val('');
        input.removeClass('placeholder');
      }
    }).blur(function () {
      var input = $(this);
      if (input.val() == '' || input.val() == input.attr('placeholder')) {
        input.addClass('placeholder');
        input.val(input.attr('placeholder'));
    }).blur();
    $('[placeholder]').parents('form').submit(function () {
      $(this).find('[placeholder]').each(function () {
        var input = $(this);
        if (input.val() == input.attr('placeholder')) {
          input.val('');
        }
      })
    });
  }
}) 
```

# ruby-on-rails - Facebook iFrame 正在将 Rails 动态页面拉为 404 错误

> ID：15212333
> 
> 赞同：0
> 
> 时间：2013-03-04T22:26:31.277
> 
> 标签：ruby-on-rails, ruby, facebook, http-status-code-404

我有一个 Facebook 应用页面和一个 rails 应用程序。我的 rails 应用程序根据给定的键加载动态页面。这在我的 facebook 应用程序之外工作得很好而且很花哨：

[https://app.eventsent.net/event_lists/3d40ba2a4a10947c17c2337fba3421dd406cceb5?frame=true](https://app.eventsent.net/event_lists/3d40ba2a4a10947c17c2337fba3421dd406cceb5?frame=true)

然而，在 Facebook 内部，该页面被拉为 404 错误：

[https://www.facebook.com/reynoldsdesignstudio/app_419134091467471](https://www.facebook.com/reynoldsdesignstudio/app_419134091467471)

我已经通过在我的系统中创建一个静态文件以便能够让 facebook 查看它来解决这个问题，但这并不理想，因为部署带有更新的 rails 应用程序会使修改这些静态页面变得很痛苦。

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T18:14:33.423

我们通过更改路由文件以允许发布请求而不只是获取请求来解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:48:06.277

您的问题与动态/静态内容无关。Facebook 也显示 501 错误，而不是 404。简而言之，您的 SSL 证书对于您指向 Facebook 页面的 staging.app 子域无效。

访问您的 Facebook 页面 ( [https://www.facebook.com/reynoldsdesignstudio/app_419134091467471](https://www.facebook.com/reynoldsdesignstudio/app_419134091467471) ) 会产生此错误：

> ### 此网页无法使用
> 
> **[https://staging.app.eventsent.net/event_lists/3d40ba2a4a10947c17c2337fba3421dd406cceb5.html](https://staging.app.eventsent.net/event_lists/3d40ba2a4a10947c17c2337fba3421dd406cceb5.html)**上的网页可能暂时关闭，或者它可能已永久移至新网址。
> 
> 错误 501 (net::ERR_INSECURE_RESPONSE)：未知错误。

请注意，子域是*staging.app*。如果您碰巧使用的是 Firefox，您会收到一条很好的错误消息，其中包含所有内容：

> # 当前连接不可信任
> 
> 您已要求 Firefox 安全地连接到**staging.app.eventsent.net**，但我们无法确认您的连接是否安全。
> 
> staging.app.eventsent.net 使用了无效的安全证书。
> 
> 该证书仅对以下名称有效： app.eventsent.net 、 www.app.eventsent.net
> 
> （错误代码：ssl_error_bad_cert_domain）

最简单的解决方案是获取对 *.eventsent.net 有效的 WildCard SSL 证书。

仅供参考，如果您访问[https://staging.app.eventsent.net/event_lists/3d40ba2a4a10947c17c2337fba3421dd406cceb5?frame=true](https://staging.app.eventsent.net/event_lists/3d40ba2a4a10947c17c2337fba3421dd406cceb5?frame=true)，您的浏览器会收到一个看起来相当可怕的警告。如果您忽略警告并告诉浏览器接受证书，您的 Facebook 页面将在同一浏览器中正常加载。

# java - 控制器和远程工作机器之间的连接

> ID：15212337
> 
> 赞同：0
> 
> 时间：2013-03-04T22:26:35.887
> 
> 标签：java, sockets, connection, rmi

我需要用 Java 开发一个平台来从 Twitter 下载推文（这很明显）。这个想法是让各种计算机从流式 API 和一个主控制器下载，以将任务（要下载的关键字和其他数据）发送到每个提取器。我的问题与这些程序之间的连接有关。最好的方法是什么？实际上，我正在使用 RMI 将诸如“stop”、“start”、“setTask”之类的命令从 Controller（客户端）发送到每个 fetcher（服务器）和 SSLSocket 以进行快速验证，但我不确定这是否是个好主意。我可以使用 TCP 套接字，但拥有永久连接可能不是一个好主意。你怎么看？继续使用 RMI 是个好主意，还是我应该换一种观点？

谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:41:42.953

我建议您使用队列（和任何队列协议）。 [ActiveMQ](http://activemq.apache.org)、[RabbitMQ](http://www.rabbitmq.com)、[QPID](http://qpid.apache.org)或许多其他工具之一。

我在 prod 中使用 ActiveMQ 并且很好，但是对于非常高的 RabbitMQ 会更好。

您可以轻松扩展任何数量的工作人员，以及在工作人员之间共享/拆分任务的最简单方法。

也请查看[ActiveMQ 或 RabbitMQ 或 ZeroMQ 或](https://stackoverflow.com/questions/731233/activemq-or-rabbitmq-or-zeromq-or)

# c# - 使用Visual Studio 2010 C#调试时，如何避免单步执行常用功能？

> ID：15212339
> 
> 赞同：0
> 
> 时间：2013-03-04T22:26:41.783
> 
> 标签：c#, visual-studio-2010, debugging

谷歌有一个指南，但描述得不好。 [http://www.cprogramming.com/debugging/visual-studio-msvc-debugging-NoStepInto.html](http://www.cprogramming.com/debugging/visual-studio-msvc-debugging-NoStepInto.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:30:27.637

[DebuggerStepThroughAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)可以是您正在寻找的吗？

```
using System.Diagnostics;
class Foo
{
    [DebuggerStepThrough]
    int Bar()
    {
        return 10;
    }
} 
```

# php - 如何为 CakePHP 创建 HTTPS 页面？

> ID：15212340
> 
> 赞同：0
> 
> 时间：2013-03-04T22:26:51.190
> 
> 标签：php, facebook, cakephp

我不太了解 HTTP 和 HTTPS 之间的区别，只是 HTTP 对数据传输进行了加密（我想，如果我错了，请纠正我）。现在，我即将启动并运行我的 Facebook 页面选项卡。为此，我需要我的 CakePHP 应用程序中的标签 URL 也可以通过 HTTPS 访问。我如何在 CakePHP 中做到这一点？仅仅在 URL 中编写一个 HTTPS 而不是 HTTP 并不能完成这项工作。

# c++ - vector < vector < int >> 在第一维上的点积

> ID：15212343
> 
> 赞同：4
> 
> 时间：2013-03-04T22:27:03.600
> 
> 标签：c++, vector, matrix, iterator, dot-product

我有

```
vector < vector < int > > data_mat ( 3, vector < int > (4) );
vector          < int >   data_vec ( 3                     ); 
```

where`data_mat`可以被认为是一个矩阵和`data_vec`一个列向量，我正在寻找一种方法来计算 with 的每一列的内积`data_mat`，`data_vec`并将其存储在另一个`vector < int > data_out (4)`.

使用and的示例[http://liveworkspace.org/code/2bW3X5%241](http://liveworkspace.org/code/2bW3X5%241)可用于计算矩阵的列和：`for_each``transform`

```
sum=vector<int> (data_mat[0].size());
for_each(data_mat.begin(), data_mat.end(),
         [&](const std::vector<int>& c) {
            std::transform(c.begin(), c.end(), sum.begin(), sum.begin(),
                           [](int d1, double d2) 
                             { return d1 + d2; }
                          );
            }
        ); 
```

是否有可能以类似的方式（或以稍微不同的方式使用 STL 函数）计算矩阵列与向量的列点积？

问题是 'd2 = d1 + d2' 技巧在列内积情况下在这里不起作用 - 如果有一种方法可以包含 d3 也可以解决它（ d3 = d3 + d1 * d2 ）但是中似乎不存在三元函数`transform`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T13:34:41.960

事实上，您几乎可以一对一地使用现有的列求和方法。您不需要三元`std::transform`作为内部循环，因为在对矩阵行求和之前缩放矩阵行的因子对于每一行都是恒定的，因为它是列向量中的行值，并且与矩阵行一起迭代，因此外`std::for_each`。

所以我们需要做的是遍历矩阵的行，并将每个完整的行乘以列向量中的相应值，然后将缩放后的行添加到和向量中。但不幸的是，为此我们需要一个`std::for_each`同时迭代两个范围的函数，即矩阵的行和列向量的行。为了实现这一点，我们可以使用通常的一元`std::for_each`，并使用额外的迭代器手动对列向量进行迭代：

```
std::vector<int> sum(data_mat[0].size());
auto vec_iter = data_vec.begin();
std::for_each(data_mat.begin(), data_mat.end(), 
              [&](const std::vector<int>& row) {
                 int vec_value = *vec_iter++;    //manually advance vector row
                 std::transform(row.begin(), row.end(), sum.begin(), sum.begin(),
                                [=](int a, int b) { return a*vec_value + b; });
              }); 
```

内部的额外手动迭代`std::for_each`并不是标准库算法的惯用用法，但不幸的是没有`std::for_each`我们可以使用的二进制文件。

* * *

另一种选择是`std::transform`用作外部循环（它可以迭代两个范围），但我们并没有在每次外部迭代中真正计算单个值以返回，所以我们只需要从外部 lambda 中返回一些虚拟值和通过使用某种虚拟输出迭代器将其丢弃。这也不是最干净的解决方案：

```
//output iterator that just discards any output
struct discard_iterator : std::iterator<std::output_iterator_tag,
                                        void, void, void, void>
{
    discard_iterator& operator*() { return *this; }
    discard_iterator& operator++() { return *this; }
    discard_iterator& operator++(int) { return *this; }
    template<typename T> discard_iterator& operator=(T&&) { return *this; }
};

//iterate over rows of matrix and vector, misusing transform as binary for_each
std::vector<int> sum(data_mat[0].size());
std::transform(data_mat.begin(), data_mat.end(), 
               data_vec.begin(), discard_iterator(), 
               [&](const std::vector<int>& row, int vec_value) {
                   return std::transform(row.begin(), row.end(), 
                                         sum.begin(), sum.begin(),
                                         [=](int a, int b) { 
                                             return a*vec_value + b;
                                         });
               }); 
```

* * *

**编辑：**虽然这已经在评论中讨论过，并且我理解（并欣赏）这个问题的理论性质，但我仍然会提出这样的建议，即在实践中动态数组的动态数组是表示这种结构良好的一种糟糕的方式-像矩阵一样定义二维数组。具有适当运算符的适当矩阵数据结构（连续存储其内容）几乎总是更好的选择。但是由于它们的通用性，您仍然可以使用标准库算法来处理这种自定义数据结构（甚至可以让矩阵类型提供自己的迭代器）。

# javascript - JQueryMobile 滑块小部件

> ID：15212346
> 
> 赞同：0
> 
> 时间：2013-03-04T22:27:19.347
> 
> 标签：javascript, jquery, html

我正在使用 jQuery 插入滑块，但是没有添加 jQueryMobile 的样式...这是 html 代码：

```
<div data-role="collapsible-set" data-theme="c" data-content-theme="d">
          <div data-role="collapsible" data-collapsed="false">
            <h3>Compra de productos por colores y paquetes</h3>
            <div id='insert_colors_slider'></div>
          </div>
      </div> 
```

这是动态插入滑块的 Javascript 部分。动态添加时，它们没有 jquerymobile 的风格......

```
var array_colors_available = (product_info.pcolors).split(',');
    array_colors_available.forEach(function printSliderEachColor(element, index, array){
        $('#insert_colors_slider').append('<div data-role="fieldcontain"><fieldset data-role="controlgroup"> <label for="slider1">'+element+' : '+'</label><input id='+element+' type="range" name="slider" value="0" min="0" max="25" data-highlight="false"data-track-theme="a"></fieldset></div>');
    });
    $('#insert_colors_slider').collapsible(); 
```

# javascript - 在 IE (jFontSize) 中使用 jQuery 文本调整器的问题

> ID：15212347
> 
> 赞同：0
> 
> 时间：2013-03-04T22:27:22.993
> 
> 标签：javascript, jquery, html, internet-explorer

我无法让文本调整器在 IE 8-9 中工作，我找到的最好的插件叫做 jFontSize。

除了这两个版本的 IE 之外，我可以在所有浏览器中使用它。

我已经包含了这个 jFiddle... [http://jsfiddle.net/GZyxJ/](http://jsfiddle.net/GZyxJ/)

我非常感谢您的回复，我知道这可能很愚蠢，因为我仍在学习。该网站也是用 HTML 5 构建的，我已经包含了 jquery 1.9.1

谢谢！

```
<div class="size"> 
                <span>Change Font Size:-</span>
                <a class="jfontsize-button" id="jfontsize-minus" title="decrease font" href="#">A-</a>
                <a class="jfontsize-button" id="jfontsize-default" title="reset default font" href="#">A</a>
                <a class="jfontsize-button" id="jfontsize-plus" title="increase font" href="#">A+</a>

            </div>

(function($){
    $.fn.jfontsize = function(opcoes) {
        var $this=$(this);
        var defaults = {
            btnMinusClasseId: '#jfontsize-minus',
            btnDefaultClasseId: '#jfontsize-default',
            btnPlusClasseId: '#jfontsize-plus',
            btnMinusMaxHits: 5,
            btnPlusMaxHits: 5,
            sizeChange: 1
        };

        if(($.isArray(opcoes))||(!opcoes)){
            opcoes = $.extend(defaults, opcoes);
        } else {
            defaults.sizeChange = opcoes;
            opcoes = defaults;
        }

        var limite=new Array();
        var fontsize_padrao=new Array();

        $(this).each(function(i){
            limite[i]=0;
            fontsize_padrao[i];
        })

        $('#jfontsize-minus, #jfontsize-default, #jfontsize-plus').removeAttr('href');
        $('#jfontsize-minus, #jfontsize-default, #jfontsize-plus').css('cursor', 'pointer');

        /* Ação do Botão A- */
        $('#jfontsize-minus').click(function(){
            $this.each(function(i){
                if (limite[i]>(-(opcoes.btnMinusMaxHits))){
                    fontsize_padrao[i]=$(this).css('font-size');
                    fontsize_padrao[i]=fontsize_padrao[i].replace('px', '');
                    fontsize=$(this).css('font-size');
                    fontsize=parseInt(fontsize.replace('px', ''));
                    fontsize=fontsize-(opcoes.sizeChange);
                    fontsize_padrao[i]=fontsize_padrao[i]-(limite[i]*opcoes.sizeChange);
                    limite[i]--;
                    $(this).css('font-size', fontsize+'px');
                }
            })
        })

        /* Ação do Botão A */
        $('#jfontsize-default').click(function(){
            $this.each(function(i){
                limite[i]=0;
                $(this).css('font-size', fontsize_padrao[i]+'px');
            })
        })

        /* Ação do Botão A+ */
        $('#jfontsize-plus').click(function(){
            $this.each(function(i){
                if (limite[i]<opcoes.btnPlusMaxHits){
                    fontsize_padrao[i]=$(this).css('font-size');
                    fontsize_padrao[i]=fontsize_padrao[i].replace('px', '');
                    fontsize=$(this).css('font-size');
                    fontsize=parseInt(fontsize.replace('px', ''));
                    fontsize=fontsize+opcoes.sizeChange;
                    fontsize_padrao[i]=fontsize_padrao[i]-(limite[i]*opcoes.sizeChange);
                    limite[i]++;
                    $(this).css('font-size', fontsize+'px');
                }
            })
        })
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:29:59.723

您还没有在 Fiddle 中包含 jQuery。从左侧的下拉列表中选择它。

此外，您调用`$('p').jfontsize();`函数的方式意味着它是在添加插件之前被调用的。

[更新，工作小提琴](http://jsfiddle.net/GZyxJ/1/)

# javascript - 如何在 Jasmine 中编写 FileReader 测试？

> ID：15212348
> 
> 赞同：24
> 
> 时间：2013-03-04T22:27:23.947
> 
> 标签：javascript, html, unit-testing, jasmine

我正在尝试使这个测试工作，但我无法理解如何使用 FileReader 编写测试。这是我的代码

```
 function Uploader(file) {
    this.file = file;
}

Uploader.prototype =  (function() {

    function upload_file(file, file_contents) {
        var file_data = new FormData()
        file_data.append('filename', file.name)
        file_data.append('mimetype', file.type)
        file_data.append('data', file_contents)
        file_data.append('size', file.size)

        $.ajax({
            url: "/upload/file",
            type: "POST",
            data: file_contents,            
            contentType: file.type,
            success: function(){

                // $("#thumbnail").attr("src", "/upload/thumbnail");    

            },
            error: function(){
                alert("Failed");
            },
            xhr: function() {
                myXhr = $.ajaxSettings.xhr();
                if(myXhr.upload){
                    myXhr.upload.addEventListener('progress',showProgress, false);
                } else {
                    console.log("Upload progress is not supported.");
                }
                return myXhr;
            }
        });
    }

    return {
        upload : function() {
            var self = this,
                reader = new FileReader(),
                file_content = {};

            reader.onload = function(e) {
                file_content = e.target.result.split(',')[1];

                upload_file(self.file, file_content);
            }
        }
    };
})(); 

```

这是我的测试

```
 describe("Uploader", function() {
    it("should upload a file successfully", function() {
        spyOn($, "ajax");
        var fakeFile = {};

        var uploader = new Uploader(fakeFile);
        uploader.upload();

        expect($.ajax.mostRecentCall.args[0]["url"]).toEqual("/upload/file");
    })
}); 

```

但它永远不会到达`reader.onload`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T07:40:07.200

这里的问题是它的使用`reader.onload`很难测试。您可以`reader.addEventListener`改用，这样您就可以监视全局 FileReader 对象并返回一个模拟：

```
eventListener = jasmine.createSpy();
spyOn(window, "FileReader").andReturn({
 addEventListener: eventListener
}) 
```

然后你可以自己触发 onload 回调：

```
expect(eventListener.mostRecentCall.args[0]).toEqual('load');
eventListener.mostRecentCall.args[1]({
  target:{
    result:'the result you wanna test'
  }
}) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-11T10:30:28.727

此语法在 2.0 中发生了变化。下面的代码给出了一个基于 Andreas Köberle 的答案但使用新语法的示例

```
 // create a mock object, its a function with some inspection methods attached
    var eventListener = jasmine.createSpy();

    // this is going to be returned when FileReader is instantiated
    var dummyFileReader = { addEventListener: eventListener };

    // pipe the dummy FileReader to the application when FileReader is called on window
    // this works because window.FileReader() is equivalent to new FileReader()
    spyOn(window, "FileReader").and.returnValue(dummyFileReader)

    // your application will do something like this ..
    var reader = new FileReader();

    // .. and attach the onload event handler
    reader.addEventListener('load', function(e) {

        // obviously this wouldnt be in your app - but it demonstrates that this is the 
        // function called by the last line - onloadHandler(event);
        expect(e.target.result).toEqual('url');

        // jasmine async callback
        done();
    });

    // if addEventListener was called on the spy then mostRecent() will be an object. 
    // if not it will be null so careful with that. the args array contains the 
    // arguments that addEventListener was called with. in our case arg[0] is the event name ..
    expect(eventListener.calls.mostRecent().args[0]).toEqual('load');

    // .. and arg[1] is the event handler function
    var onloadHandler = eventListener.calls.mostRecent().args[1];

    // which means we can make a dummy event object .. 
    var event = { target : { result : 'url' } };

    // .. and call the applications event handler with our test data as if the user had 
    // chosen a file via the picker
    onloadHandler(event); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-12-10T05:28:27.847

我也遇到了类似的问题，并且能够在不使用 addeventlistener 的情况下实现它。我曾经使用过onloadend，所以下面是我所做的。我的 ts 文件有以下代码：-

```
 let reader = new FileReader();
    reader.onloadend = function() {
                let dataUrl = reader.result;
                // Some working here
            };
    reader.readAsDataURL(blob); 
```

我的规范文件（测试）案例代码：-

```
 let mockFileReader = {
            result:'',
            readAsDataURL:(blobInput)=> {
                console.log('readAsDataURL');
            },
            onloadend:()=> {
                console.log('onloadend');
            }
        };

    spyOn<any>(window, 'FileReader').and.returnValue(mockFileReader);
    spyOn<any>(mockFileReader, 'readAsDataURL').and.callFake((blobInput)=> {
        // debug your running application and assign to "encodedString" whatever 
        //value comes actually after using readAsDataURL for e.g. 
        //"data:*/*;base64,XoteIKsldk......"
        mockFileReader.result = encodedString;
        mockFileReader.onloadend();
    }); 
```

这样，您就模拟了 FileReader 对象并返回了对您自己的“readAsDataURL”的虚假调用。因此，现在当您的实际代码调用“reasAsDataURL”时，您的假函数被调用，您在“结果”中分配编码字符串并调用您已经在代码（.ts）文件中分配功能的“onloadend”函数。因此它以预期的结果被调用。希望能帮助到你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-09-14T18:12:40.047

我认为最好的方法是使用真实的`FileReader`（不要模拟它），并传入一个真实的`File`or `Blob`。这提高了您的测试覆盖率并使您的测试不那么脆弱。

如果您的测试不在 IE 中运行，您可以使用[File 构造函数](https://developer.mozilla.org/en-US/docs/Web/API/File/File)，例如

```
const fakeFile = new File(["some contents"], "file.txt", {type: "text/plain"}); 
```

如果需要兼容IE，可以构造一个[Blob](https://developer.mozilla.org/en-US/docs/Web/API/Blob/Blob)，让它看起来像一个文件：

```
const fakeFile = new Blob(["some contents"]);
fakeFile.name = "file.txt";
fakeFile.type = "text/plain"; 
```

可以读取这些对象中的`FileReader`任何一个，因此无需模拟它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-07T18:06:33.693

我发现自己接下来最容易做。

*   模拟 blob 文件
*   在测试环境中运行 *reader.onload 。*

结果 - 我不嘲笑 Filereader

```
//    CONTROLLER

$scope.handleFile = function (e) {

            var f = e[0];

            $scope.myFile = {
                name: "",
                size: "",
                base64: ""
            };
            var reader = new FileReader();
            reader.onload = function (e) {
                        try {
                            var buffer = e.target.result;
                            $scope.myFile = {
                                name: f.name,
                                size: f.size,
                                base64: XLSX.arrayBufferToBase64(buffer)
                            };
                            $scope.$apply();

                        } catch (error) {
                            $scope.error = "ERROR!";
                            $scope.$apply();
                        }
                    };

reader.readAsArrayBuffer(f);
//run in test env
if ( typeof jasmine == 'object') {reader.onload(e)}
}

//JASMINE TEST

it('handleFile    0', function () {

    var  fileContentsEncodedInHex = ["\x45\x6e\x63\x6f\x64\x65\x49\x6e\x48\x65\x78\x42\x65\x63\x61\x75\x73\x65\x42\x69\x6e\x61\x72\x79\x46\x69\x6c\x65\x73\x43\x6f\x6e\x74\x61\x69\x6e\x55\x6e\x70\x72\x69\x6e\x74\x61\x62\x6c\x65\x43\x68\x61\x72\x61\x63\x74\x65\x72\x73"];
    var blob = new Blob(fileContentsEncodedInHex);
    blob.type = 'application/zip';
    blob.name = 'name';
    blob.size = 11111;
    var e = {0: blob, target: {result: {}}};

    $scope.handleFile(e);
    expect($scope.error ).toEqual("");

});
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-21T17:01:48.980

我努力弄清楚如何测试`onloadend`它何时被调用`readAsDataURL`。这是我最终得到的转储。

生产代码：

```
loadFileDataIntoChargeback(tempFileList) {
        var fileNamesAndData = [];
        for (var i = 0, f; f = tempFileList[i]; i++) {
            let theFile = tempFileList[i];
            var reader = new FileReader();
            reader.onloadend = ((theFile) => {
                return (fileData) => {
                    var insertionIndex = this.chargeback.fileList.length;
                    this.chargeback.fileList.push({ FileName: theFile.name, Data: fileData.target.result, FileType: theFile.type });
                    this.loadFilePreviews(theFile, insertionIndex);
                }
            })(f);
            reader.readAsDataURL(f);
        }
        this.fileInputPath = "";
    } 
```

测试代码：

```
describe('when the files are loaded into the chargeback', () => {
            it('loads file previews', () => {
                let mockFileReader = {
                    target: { result: '' },
                    readAsDataURL: (blobInput) => {},
                    onloadend: () => {}
                };
                spyOn(chargeback, "loadFilePreviews");
                spyOn(window, 'FileReader').and.returnValue(mockFileReader);
                spyOn(mockFileReader, 'readAsDataURL').and.callFake((blobInput) => {
                    mockFileReader.onloadend({ target: { result: "data:image/jpeg;base64,/9j/4QAYRXh" } });
                });
                var readFileList = chargeback.getArrayFromFileInput([getImageFile1()]);

                chargeback.loadFileDataIntoChargeback(readFileList);

                expect(chargeback.loadFilePreviews).toHaveBeenCalled();
            });
        }); 
```

# php - 如何通过php从数据库中获取特定字段

> ID：15212349
> 
> 赞同：0
> 
> 时间：2013-03-04T22:27:25.340
> 
> 标签：php, html, mysql, css

我正在尝试从我的数据库中获取四个不同的值。会话变量`username`和`usernameto`正在工作，但我想得到 4 个不同的值——两个来自 username 和 usernameto：

```
<?php
    session_start(); // startsession

    $Username=$_SESSION['UserID'];
    $Usernameto= $_SESSION['UserTO'];

    $db = mysql_connect("at-web2.xxxxxx", "yyyyy", "xxxxxxx");
    mysql_select_db("db_xxxxxx",$db);

    $result1 = mysql_query("SELECT user_lon and user_lat FROM table1 WHERE id = '$Usernameto'");
    $result2 = mysql_query("SELECT user_lon and user_lat FROM table1 WHERE id = '$Username'");

    $myrow1 = mysql_fetch_row($result1);
    $myrow2 = mysql_fetch_row($result2);

    while($myrow1)
    {
        $_Mylon=$myrow1[0];
        $_Mylat=$myrow1[1];
    }
    while($myrow2)
    {
        $_Mylon2=$myrow2[0];
        $_Mylat2=$myrow2[1];
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:31:18.350

[来自 php 手册的示例回显 html 表](http://www.php.net/manual/en/mysql.examples-basic.php)

不知道你能不能从中得到你需要的东西？

更具体：您可以使用：

```
$line = mysql_fetch_array($result, MYSQL_ASSOC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:32:02.187

编辑 - 刚刚意识到您没有告诉我们您提供的代码有什么问题。您是收到错误消息还是没有获得正确的数据？您仍然应该修复您的查询，但我们需要更多信息来了解问题所在。

您的查询语句不应该在选择参数之间有“和”，所以它应该是：

编辑 2 - 我刚刚注意到你有一个不需要的 while 循环，试试这个：

```
$result1 = mysql_query("SELECT user_lon, user_lat FROM table1 WHERE id = '$Usernameto'");
$result2 = mysql_query("SELECT user_lon, user_lat FROM table1 WHERE id = '$Username'");

$myrow1 = mysql_fetch_row($result1);
$myrow2 = mysql_fetch_row($result2);

if (isset($myrow1)) {
    $_Mylon=$myrow1[0];
    $_Mylat=$myrow1[1];
}

if (isset($myrow2)) {
    $_Mylon2=$myrow2[0];
    $_Mylat2=$myrow2[1];
} 
```

# android - Android使用两台设备之间的声音获取距离

> ID：15212361
> 
> 赞同：2
> 
> 时间：2013-03-04T22:28:14.757
> 
> 标签：android, bluetooth, fft, audiorecord, audiotrack

这个想法是Phone A同时发送声音信号和蓝牙信号，Phone B将计算两个信号之间的延迟。

在实践中，我得到的结果不一致，延迟从 90 毫秒到 160 毫秒。我尝试尽可能优化两端。

在输出端：
一旦蓝牙和音频输出各有自己的线程，就会产生音调
蓝牙仅在 AudioTrack.write 之后输出，并且 AudioTrack 处于流模式，因此它
应该在写入完成之前开始输出。

在接收端：
再次两个单独的线程
系统时间在每个 AudioRecord.read 之前记录

采样规格：
44.1khz
读取整个缓冲区
使用 fft 一次采样 100 个样本
考虑到自初始 read() 以来转换了多少样本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T22:44:24.587

您的方法在整个管道中基本上依赖于零延迟，这实际上是不可能的。您只是无法以那种准确度同步它。如果您可以将延迟降低到 5-6 毫秒，这可能是可能的，但在此之前您会用力敲击键盘。即便如此，也只能精确到1.5米左右。

考虑您收到的延迟的下限。在 90ms 内，声音可以传播[30m 以上](https://www.google.com/#hl=en&safe=off&output=search&sclient=psy-ab&q=speed+of+sound+*+90+milliseconds&oq=speed+of+sound+*+90+milliseconds&gs_l=hp.3...995.995.0.1736.1.1.0.0.0.0.78.78.1.1.0.les;..0.0...1c.1.5.psy-ab._3FsxPey_xI&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.43148975,d.eWU&fp=ddf23fe43a7920f3&biw=1920&bih=968)。*这是市场上销售*的蓝牙范围的最末端，甚至没有考虑到您可能处于非理想的传输条件。

[这是一个](https://stackoverflow.com/questions/7266298/android-sound-api-deterministic-low-latency/12309643#12309643)讨论 Android 中低延迟音频的线程。TL; DR 是它很糟糕，但正在变得更好。使用最新的 API 和最近的设备，假设您运行一些手动调整的音频功能，您*可能*能够将其缩短到 30 毫秒左右。这里没有简单的 AudioTrack。即便如此，这仍然是一个很好的 10 米圆形错误概率。

**编辑：**

假设您可以同步设备的时钟，更好的方法是使用简单的 am/fm 调制或脉冲序列将时间戳嵌入到音频信号中。然后你可以在另一端解码它并知道它是什么时候发送的。您仍然必须处理延迟问题，但它很好地简化了整个事情。根本不需要蓝牙，因为它无论如何都不是一个真正可靠的时钟，因为它可以被认为有它自己的延迟问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:50:30.830

这为您提供了一个很好的方法 [http://netscale.cse.nd.edu/twiki/pub/Main/Projects/Analyze_the_frequency_and_strength_of_sound_in_Android.pdf](http://netscale.cse.nd.edu/twiki/pub/Main/Projects/Analyze_the_frequency_and_strength_of_sound_in_Android.pdf)

您必须创建一个具有一定幅度（以 dB 为单位）的 1 kHz 声音，并尝试测量到达其他设备的声音的幅度。从镇静剂中，您也许可以测量距离。

我记得：a0 = 20*log (4*pi*distance/lambda) 其中 a0 是镇静剂，而 lambda 是给定的（你可以从 1kHz 算起）但是在如此敏感的环境中，噪音可能会破坏整个事情，只是一个想法，如果我是你，我会怎么做。

# entity-framework - Entity Framework Code First 忽略连接字符串，改用 IIS

> ID：15212362
> 
> 赞同：7
> 
> 时间：2013-03-04T22:28:16.397
> 
> 标签：entity-framework, entity-framework-4, ef-code-first, connection-string, dbcontext

我有一个使用 Entity Framework Code First 创建的 Web 应用程序。在设置它时，我通过将 DBContext 的完整命名空间和类指定为连接字符串的名称，设法将我的 DB 连接字符串与我的 DBContext 匹配。

```
<add name="MyClassProject.EfDbContext"  connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=MyDatabase;Integrated Security=true;User Id=MyUsername;Password=MyPassword;" providerName="System.Data.SqlClient"/> 
```

最初，当我设置项目时，我只是在 c:\inetpub\wwwroot 中创建它，然后通过 Visual Studio 运行它。一切正常。

现在我正在尝试将代码构建到一个单独的网站文件夹，并让网站作为它自己的网站和 IIS 中的应用程序池运行。我已经设置了网站和主机文件，但是当我去运行它时，我收到了以下错误。

> 无法打开登录请求的数据库“MyDatabase”。登录失败。
> 
> 用户 'IIS APPPOOL\MyAppPool' 登录失败。

我想知道为什么会这样，因为我似乎在我的连接字符串中指定了用于数据库的安全用户名和密码......那么为什么它试图连接为我的网站正在运行的应用程序池?

另外，我该如何解决这个问题，而不必在 SQL Server 中授予 MyAppPool（或网络服务，如果我将其更改为）DB 权限？

**更新：**我应该提到我使用以下方法初始化我的 DBContext 类：

```
namespace MyClassProject 
{ 
    public class EfDbContext : DbContext 
    { 
        public EfDbContext() : base ("MyDatabase") 
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:43:40.990

我发现了这个问题。当我用 初始化我的 DBContext 类时`: base("MyDatabase")`，它会覆盖 web.config 中指定的连接字符串。

从我的 DBContext 类中删除它，数据库已经存在，该站点现在可以在 IIS 中运行。但是，如果我还没有创建数据库，（或者如果我使用了我的数据库初始化程序，`DropCreateDatabaseWhenModelChanges`或者`DropCreateDatabaseAlways`它需要重新创建数据库），初始化程序将失败，因为它会尝试使用 SQL 用户没有创建数据库的权限。

我的解决方法是`: base("MyDatabase")`最初使用并从 Visual Studio 运行，以便创建数据库。然后将其从代码中删除，将指定的用户添加到 SQL Server 中的数据库安全性，然后它将允许我的站点在 IIS 中运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T22:30:14.780

删除`Integrated Security=true;`. 这是使当前用户离开的设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-27T16:26:32.247

使用集成安全性时，数据库会从当前运行进程的用户那里获得一个令牌。您很可能从您的用户帐户运行 Visual Studio，该帐户可能对您的 SQL Server 实例具有管理员权限。

当 IIS 运行您的应用程序时，它使用称为应用程序池（或应用程序池）的东西。您可以在一个池中同时管理多个应用程序。应用程序池还在为该池命名的特殊用户帐户下运行。应用程序池用户存在于名为“IIS AppPool”的容器下，因此 DefaultAppPool 的本地用户是`IIS AppPool\DefaultAppPool`. 如果您想授予对本地系统上的资源的访问权限（包括文件权限），您还可以将其授予应用程序池用户或本地组`IIS_IUSRS`以将其授予所有应用程序池。

请记住，这些是本地帐户，因此它们不会跨越网络边界。要在不同的服务器上授予权限，您需要使用域用户（或者更好的是域托管服务帐户），或者您可以将应用程序池用户设置为 NETWORK SERVICE，然后您可以授予权限`MyDomain\MyWebServer$`（美元标志很重要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T04:58:25.137

您可以使用[Web.config 转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)使本地连接与远程不同（例如在发布模式下）。要开始使用它，您需要使用Visual Studio中[的一键发布](http://msdn.microsoft.com/en-us/library/dd465337.aspx)来发布您的 Web 应用程序。这是发布 Web 应用程序的非常方便的方式！

看起来这就是你要找的东西。

* * *

或根据条件设置连接字符串名称：

```
public EfDbContext() : base (GetConnectionStringName())
{
}

private static GetConnectionStringName()
{
    return RunLocally() : "LocalDatabase" : "RemoteDatabase";
}

private static bool RunLocally()
{
   // implement some how
} 
```

# php - MySQL 查询不会拉取所有行

> ID：15212363
> 
> 赞同：0
> 
> 时间：2013-03-04T22:28:17.830
> 
> 标签：php, mysql

这是我的代码：

```
$counter = 0;
$result = mysql_query("select * from funds_backup");

echo mysql_num_rows($result)."</br>";   // <--this prints 48,173

while ($row = mysql_fetch_object($result)) {
    $counter++;
    $name = $row->Name;
    $ticker = $row->Ticker  ;
    $current[$ticker] = $name;
    echo $counter."  ".$current[$ticker]."</br>"; //<--this prints to 48,173

      }
echo count($current);   // <--this prints 45,650 
```

我无法`mysql_fetch_object`将所有 48,173 行初始化为 php 数组。

我以前用更大的查询做过这个。我不知道为什么这不起作用。它不会截断数组的末尾，即省略 45,651-48,173。这是随机的。我使用了 TRIM() 但这不起作用。它在某种程度上也是一致的。始终省略相同的行。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:33:38.193

听起来您有多行包含相同的数据 - 这意味着 的值`$ticker`不止一次地以相同的方式结束。在这种情况下，您将使用该键覆盖先前的数组条目。尝试`$current[] = $name;`或`$current[$counter] = $name;`确保所有数组键都是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:33:57.083

这些`mysql_*`函数在 PHP5.5 中实际上已被弃用，因此您可能需要考虑将代码更改为使用 PDO 或 MySQLi。

确保字段 'Ticker' 实际上是唯一的，否则值将不断被覆盖。另外，您在运行此程序时是否遇到任何内存耗尽错误？这可能是造成这种情况的原因之一。

返回什么`echo $counter;`？如果**是**48,173，那么这些值将被覆盖。

# c - 在 C 编程中练习循环

> ID：15212365
> 
> 赞同：1
> 
> 时间：2013-03-04T22:28:25.990
> 
> 标签：c

这是一个家庭作业问题，但我只是寻求调试帮助。我不确定是什么导致了这些错误。

```
int CalculateResult(int High, int Low)
{
  int Result;
  int count = 0;
  int check;
do
    {
    printf("Enter the value to check within the range: ");
    scanf("%d",&Result);

     if (Result == 0)
     {
     printf("Error! Positive value only!\n");
     }

     else if (Result < -1)
     {
     printf("Error! Positive value only!\n");
     }

     else if (Result>= 1);
     {
     for (check = Low ; check <= High;check++)
         {
         if (check%Result==0)
            {
            (count++);
            }
         }
     } 
    while (Result != -1);
    return (count);
    }
} 
```

我有两个错误：174:1 --- 预期在 } 标记之前，然后有 174:1 --- 预期在输入结束时声明

有人看到有什么问题吗？对不起，它很乱，我是菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:36:23.293

Change

```
 } 
    while (Result != -1);
    return (count);
    }
} 
```

to

```
 } 
     }
    while (Result != -1);
    return (count);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:36:43.290

If you indent your code correctly, you can easily see where the error is:

```
int CalculateResult(int High, int Low)
{
  int Result;
  int count = 0;
  int check;
  do
  {
     printf("Enter the value to check within the range: ");
     scanf("%d",&Result);

     if (Result == 0)
     {
         printf("Error! Positive value only!\n");
     }

     else if (Result < -1)
     {
         printf("Error! Positive value only!\n");
     }

     else if (Result >= 1);
     {
        for (check = Low ; check <= High; check++)
        {
           if (check%Result == 0)
           {
                 (count++);  <-------- The () are OK, but not necessary.
           }
        }
     }
  }  <---------------------------  Moved this brace up from below.
  while (Result != -1);

  return (count);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T22:32:42.080

在 while 指令之前添加“}”。你失去了一个括号:) 现在，“while”是最后一个“else if”指令。正确的架构： `do {
//Some code here
} while (*clause*);` 

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T22:39:38.480

只想说两件事：
1\. 检查是否有所有需要的括号
2\. 检查是否缺少“;” 或者如果有一个“;” 它不应该在哪里
这是一个家庭作业问题所以我不会直接给你答案
好吧:)，还有一些提示：
1.总是缩进你的代码
2.一个`if`或`else if`没有一个块来做任何事情可能是无用的`if`或`else if`;)

# c# - 在字符串数组中对字符串的特定位置进行分组

> ID：15212367
> 
> 赞同：1
> 
> 时间：2013-03-04T22:28:38.863
> 
> 标签：c#, arrays, string

我想将字符串的特定位置分组到字符串数组中。

例子：

```
string[] arr = {"DENVER01TECHNOLOGY",
                "DENVER02TECHNOLOGY",
                "DENVER01TECHNOLOGY",
                "DENVER0103TECHNOLOGY",
                "DENVER01TECHNOLOGY"}; 
```

我想根据第 7 位的位置和长度 2 对数组进行分组。即丹佛和技术之间的文本。

如何在 C# 中实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:32:20.753

```
var query = arr.GroupBy(i => i.Substring(6, 2));
// consider also using "DENVER".Length instead of 6 
```

用法：

```
foreach (var g in query)
{
    Console.WriteLine(g.Key);
    foreach (var item in g)
        Console.WriteLine(item);
} 
```

# c++ - 预处理器指令和#error

> ID：15212369
> 
> 赞同：0
> 
> 时间：2013-03-04T22:28:41.163
> 
> 标签：c++, compiler-errors, g++, c-preprocessor

当有人尝试在 WIN32 和 LINUX 以外的其他系统下编译我的代码时，我想显示错误。但是这段代码：

```
#ifdef WIN32
    // Some code here for windows
#elif LINUX
    // Some code for linux
#else
#error OS unsupported!
#endif 
```

但这给了我一个错误：

> #error 操作系统不受支持

编译器什么也没说，只是错误。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:42:55.180

这里有两个问题：

*   你`#elif`不测试符号的存在，而是测试它的真实性（即定义*和*非零）。您应该在开始时使用`#elif defined(...)`and，以保持一致`#if defined(...)`。

*   您匹配的符号是错误的。您应该分别使用`_WIN32`和`__linux__`。有关更多平台，请参阅[此参考](http://sourceforge.net/p/predef/wiki/OperatingSystems/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:41:01.470

`LINUX`不是标准的预定义宏。`__linux`你可能想检查一下`LINUX`

我知道一些代码检查，`_WIN32`但我不知道在 Windows 上什么是正确的。

# ios - 以编程方式在 UISplitViewController 中显示/隐藏主视图

> ID：15212370
> 
> 赞同：1
> 
> 时间：2013-03-04T22:28:42.700
> 
> 标签：ios, uisplitviewcontroller

我有一个使用 UISplitViewController 的应用程序。在横向时，我们有时希望始终显示主视图，有时希望它像纵向一样自动隐藏。目前可以在应用程序中调整此设置。

这一切都很好，除了一件事。当我更改设置时，我希望自动隐藏设置立即生效，而不仅仅是在我下次旋转设备时（即调用 - splitViewController:shouldHideViewController:inOrientation: 时）。

是否有某种方法（以编程方式）强制 UISplitViewController 弹出/隐藏主视图，以便 SVC 将再次查询 splitViewController:shouldHideViewController:inOrientation: 方法？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:39:29.007

没有直截了当的方法。

一个实用但有点 hacky 的解决方案是设置一个委托并记录在显示/隐藏主控时传递给委托的 barButtonItem。您可以使用它来触发按钮上的操作。但是，正如我所说，这并不是一个很好的方法（将来可能会中断）：

```
- (void)splitViewController:(UISplitViewController *)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)pc
{
    _buttonItem = barButtonItem;
    // ...
}

- (void)splitViewController:(UISplitViewController *)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)button
{
    _buttonItem = nil;
    // ...
}

- (void)toggleMasterVisible
{
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [_buttonItem.target performSelector:_buttonItem.action];
#pragma clang diagnostic pop
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T01:18:33.597

对于现有按钮，您可以添加此目标以实现您想要的：

```
[button addTarget: theSplitViewController action: @selector(toggleMasterVisible:) forControlEvents:UIControlEventTouchUpInside]; 
```

我必须假设这意味着你可以打电话

```
[theSplitViewController toggleMasterVisible: nil]; 
```

这完全没有记录，但它与您从 willHideViewController 函数获得的 barButtonItem 具有相同的行为。

# javascript - 我应该如何编写我的定义以使用 curl.js？

> ID：15212375
> 
> 赞同：0
> 
> 时间：2013-03-04T22:28:56.717
> 
> 标签：javascript, amd, curl.js

我正在阅读Addy Osmani关于编写 AMD 模块[的优秀博文。](http://addyosmani.com/writing-modular-js/)我从从他的帖子中提取的一小段 js 开始：

```
define('modTest', [],
  // module definition function
  function () {
      // return a value that defines the module export
      // (i.e the functionality we want to expose for consumption)

      // create your module here
      var myModule = {
        doStuff:function(){
          console.log('Yay! Stuff');
        }
      }

      return myModule;
  }
); 
```

`foo`我去掉了对and的依赖`bar`。只想要一个记录到控制台的简单对象。

所以我将其保存，`/js/modTest.js`然后尝试加载它：

```
curl(['/js/modTest.js'])
 .then(function(mt) {
     console.log("Load complete"); 
     console.log("mt:"); 
     console.log(mt); 
     mt.doStuff()
  }, function(ex) {alert(ex.message);}) 
```

结果：错误：`Multiple anonymous defines in URL`。好的，那没有用。尝试在命名空间中添加：`define('myCompany/modTest', [],`，同样的结果。尝试在依赖数组中添加一个空字符串，结果相同。

也尝试`curl(['modTest.js'], function(dep){console.log(dep)});`了相同的结果。

Addy 博文中的代码不正确吗？难道我做错了什么？也许卷曲中的错误？

***5/24 更新***：我放弃了 curl.js 以支持 require.js。零奇怪的错误，很少有工作需要改变。我确实需要处理一些 amdefine 来让我的代码在客户端和服务器端运行（两个地方都有一个对象，所以必须配置 grunt 来处理这个问题）。我的定义通常如下所示：

```
define(->
    class AlphaBravo 
    ... 
```

并且永远不会有任何问题加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:34:58.510

您要求 curl() 获取名为“/js/modTest.js”的模块。它找到了文件并加载了它，并找到了一个名为“modTest”的模块，所以它抱怨了。:) （不过，该错误消息非常错误！）

以下是修复它的方法（选择一个）：

1) 从您的define() 中删除ID。不建议使用身份证。它通常仅由 AMD 构建工具和在测试工具中声明模块时使用。

2) 通过您在define() 中提供的ID 引用模块。（同样，在大多数情况下不建议使用 ID。）

```
curl(['modTest'], doSomething); 
```

3) 将包（或路径）映射到包含应用程序模块的文件夹。我不清楚你的例子会是什么，因为 modTest 似乎是一个独立的模块。但是，如果您决定将应用程序的文件组织在“应用程序”包下，您的包配置可能如下所示：

```
packages: [ { name: 'app', location: 'app' } ] 
```

然后，当您有依赖于 modTest 模块的代码时，您可以通过“app/modTest”的 ID 访问它。

```
curl(['app/modTest'], doSomething); 
```

我希望这有助于澄清事情！

Fwiw，Addy 的示例实际上可以使用正确的配置，但我在那篇文章中没有看到任何配置（或者我的眼睛错过了它）。像这样的东西可能会起作用：

```
packages: [ { name: 'app', location: '.' } ] 
```

- 约翰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:59:26.887

我刚刚遇到了一个类似的问题，原来是我用于其他库的包含顺序。我以传统方式（头部中的脚本标签）将handlebars.js、crossroads.js、jquery和其他一些库加载到我的项目中，发现当我首先放置curl.js时，我得到了这个错误，但是当我最后包含它时，我没有收到此错误。

我的头部标签现在看起来像这样：

```
<script type="text/javascript" src="/js/lib/jquery.js"></script>
<script type="text/javascript" src="/js/lib/signals.js"></script>
<script type="text/javascript" src="/js/lib/crossroads.js"></script>
<script type="text/javascript" src="/js/lib/handlebars.js"></script>
<script type="text/javascript" src="/js/lib/curl.js"></script>
<script type="text/javascript" src="/js/main.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:31:02.220

你的`define`电话有问题。它被**命名**

有关如何编写定义的完整故事，请参阅[AMD 规范](https://github.com/amdjs/amdjs-api/wiki/AMD)，但这是我希望在您的`js/modTest.js`文件中看到的内容：

```
define(/* this is where the difference is */ function () {
      // return a value that defines the module export
      // (i.e the functionality we want to expose for consumption)

      // create your module here
      var myModule = {
        doStuff:function(){
          console.log('Yay! Stuff');
        }
      }

      return myModule;
  }
); 
```

现在，无聊的解释：

CurlJS 很棒。事实上，在处理了 RequireJS 和 CurlJS 之后，我会说 CurlJS 在一个类别中比 RequireJS 更棒 - 脚本执行顺序的可靠性。所以你在正确的轨道上。

CurlJS 的主要不同之处在于它使用“为每个加载的模块查找至少一个匿名定义，否则为错误”逻辑。RequireJS 使用超时，它有效地忽略了在给定文件中没有定义任何内容的情况，但会因捕获的加载/解析错误而崩溃。

这种差异就是让你来到这里的原因。CurlJS 期望每个加载的模块至少有一个**匿名**（如未命名）定义。正如预期的那样，它仍然可以很好地处理命名定义。第二次将“js/modTest.js”的内容移动到内联代码中，您必须“命名”定义。但是，那是另一回事了。

# ruby-on-rails - 为什么投票是 Nil 类？

> ID：15212376
> 
> 赞同：0
> 
> 时间：2013-03-04T22:29:00.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3

好的，这是我第一次尝试在没有任何教程或示例的情况下编写代码，所以我可能正在做一些非常愚蠢的事情。我有一个评分模式，哪个家长参加派对，哪个家长投票。我没有为投票生成脚手架，只是模型，因为我认为通常我不需要在这里拥有所有标准控制器或视图。我尝试添加简单的投票系统（我知道宝石，但为了练习想自己做）

所以我的派对模型：

```
class Party < ActiveRecord::Base
  belongs_to :rating
  has_one :vote
  end

end 
```

投票模型：

```
 class Vote < ActiveRecord::Base
  attr_accessible :negative, :positive, :party_id
  belongs_to :party
  #def self.build(party_id)
    #return Vote.new(:party_id=>party_id)
  #end

end 
```

派对控制器：

```
def create
    @rating = current_rating
    @party = @rating.parties.build(:rating_id => @rating_id)
    #@vote = Vote.add_voting(@party.id)
    @vote = @party.Vote.build(:party_id=>@party.id) 
```

评论部分是尝试做完全相同的事情之一。
如果考虑到我要求上课：

```
<%  @rating.parties.each do |item| %>
      <p><%= item.name %></p>
       <p><%= item.vote.class %></p>
    <% end %> 
```

它显示'nilClass' 为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:35:21.593

此语法无效：

```
@party.Vote.build(:party_id => @party.id) 
```

改用这个：

```
@vote = @party.build_vote 
```

无需分配`party_id`. 该`build_vote`方法为您执行此操作。

请参阅[Rails Guides](http://guides.rubyonrails.org/association_basics.html#has_one-build_association)的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:33:23.497

```
@positive_votes = Vote.find_by_positive(params[:user_uid, :party_id]) 
```

find_by_positive 期望在您的数据库中搜索“肯定”列，但您传入的是 user_id 和 party_id。尝试这个：

```
@positive_votes = Vote.find_by_user_uid_and_party_id(params[:user_uid], params[:party_id]) 
```

# python - web2py 跨应用程序全局设置良好实践

> ID：15212377
> 
> 赞同：1
> 
> 时间：2013-03-04T22:29:06.013
> 
> 标签：python, django, settings, web2py

我知道在 Django 中对于 web2py 没有像 setting.py 这样的东西。但是对于 web2py 的这些全局设置是否有一个好地方？

我想把秘密密钥、全局常量等东西放在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T14:05:28.370

尽管它们在底层可能工作方式不同，但您仍然可以将应用程序范围的全局设置放在此文件 applications/yourapp/models/0_whatever_name.py 中

此文件中的内容将在（每个）请求到达您的应用程序之前定义。

或者您可以简单地将应用程序范围的全局定义附加到 applications/yourapp/models/db.py 默认情况下，它已经包含此应用程序的许多设置。

# regex - solr PatternReplaceCharFilterFactory 意外工作

> ID：15212378
> 
> 赞同：0
> 
> 时间：2013-03-04T22:29:11.377
> 
> 标签：regex, search, solr

我对 Solr 比较陌生，所以如果我遗漏了一些明显的东西，请原谅我。我有一个允许用户搜索音乐艺术家的应用程序。索引来自具有正确拼写的只读数据库，因此在索引方面我已经弄清楚了。

然而，在查询方面，我需要预测各种拼写错误/差异，并希望帮助 solr 找到这些实例。从我们旧的本土搜索解决方案中，我有一个正则表达式列表和他们申请的艺术家。当我尝试使用 PatternReplaceCharFilterFactory 将这些转换为 solr 时，我注意到有些工作完美，而另一些则根本不工作......它们之间似乎没有韵律或理由。

例如：

```
<charFilter class="solr.PatternReplaceCharFilterFactory" pattern="em[ei]n[ei]m" replacement="Eminem"/> 
```

准确地捕捉了 Eminem 的常见拼写错误。但对于 311 乐队：

```
<charFilter class="solr.PatternReplaceCharFilterFactory" pattern="[Tt]hree [Ee]leven" replacement="311"/> 
```

不工作。另一个例子是九英寸钉子：

```
<charFilter class="solr.PatternReplaceCharFilterFactory" pattern="((nine|9).*inch.*nails\b)|(n\.? ?i\.? ?n\.?\b)" replacement="Nine Inch Nails"/> 
```

非常适合查找乐队名称的最常见模式。但是对于夏娃 6：

```
 <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="[Ee]ve.{0,4}([Ss]ix|6)" replacement="Eve 6"/> 
```

在使用此过滤器时，我是否缺少一些基本的东西？我已经尝试了我上面提到的正则表达式的许多变体（甚至使用像“三十一”这样的文字），但仍然没有成功。我已经尝试使有问题的过滤器成为分析器中唯一的 PatternReplaceCharFilterFactory 。我也确定这些项目在索引中是正确的，因为当我搜索正确的拼写时，它会返回正确的结果。

有什么建议么？

斯诺达尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T04:31:09.573

我怀疑问题不在于您的 Char Factory，而在于毕竟出现的问题，特别是标记器。如果您使用标准标记器，它将摆脱您刚刚放入流中的数字。如果您不需要将文本拆分为标记，则可以查看[KeywordTokenizerFactory](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.KeywordTokenizerFactory)。

通常，在 Solr 4+ 中解决此问题的最佳方法是管理 WebUI 中的分析屏幕。它允许您针对特定字段类型输入文本，并查看分析链中每个组件之后发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:36:59.383

我建议将 SynonymFilter 用于您描述的那种应用程序。它允许您提供一个外部文件，您可以在其中列出单词及其同义词，例如：

```
eminem <=> emenem
nine <=> 9 
```

如果您在此之前使用 LowerCaseFilter，您将不必在同义词中对大小写规范化大惊小怪。只要您不进行标记，您也应该能够处理 311 案例（即按照 Alexander Rafalovitch 的建议使用 KeywordTokenizer）。

# composer-php - Composer：如何在不更新旧依赖项的情况下安装另一个依赖项？

> ID：15212381
> 
> 赞同：219
> 
> 时间：2013-03-04T22:29:22.817
> 
> 标签：composer-php

我有一个包含一些依赖项的项目，我想安装另一个，但我想保持其他项目的原样。所以我编辑了`composer.json`，但是如果我运行`composer install`，我会得到以下输出：

```
Installing dependencies from lock file
Warning: The lock file is not up to date with the latest changes in composer.json. You may be getting outdated dependencies. Run update to update them.
Your requirements could not be resolved to an installable set of packages.

Problem 1
    - laravel/framework dev-master requires ext-mcrypt * -> the requested PHP extension mcrypt is missing from your system.
    - laravel/framework dev-master requires ext-mcrypt * -> the requested PHP extension mcrypt is missing from your system.
    - Installation request for laravel/framework dev-master -> satisfiable by laravel/framework dev-master. 
```

首先，我确实安装了 mcrypt，所以我不知道为什么它在那里抱怨。

那么，我该如何安装这个新的依赖项呢？

**我的作曲家.json：**

```
{
    "require": {

        "opauth/opauth": "*",
        "opauth/facebook": "*",
        "opauth/google": "*",
        "opauth/twitter": "*",

        "imagine/Imagine": "dev-develop",

        "laravel/framework": "4.*",
        "loic-sharma/profiler": "dev-master"
    },
    "autoload": {
        "classmap": [
            "app/libraries",
            "app/commands",
            "app/controllers",
            "app/models",
            "app/database/migrations",
            "app/tests/TestCase.php"
        ]
    },
    "minimum-stability": "dev"
} 
```

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2013-03-05T09:03:34.950

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-08-20T05:57:31.587

实际上，正确的解决方案是：

`composer require vendor/package`

取自[Composer 的 CLI 文档](https://getcomposer.org/doc/03-cli.md#require)：

> 该`require`命令将新包`composer.json`从当前目录添加到文件中。
> 
> `php composer.phar require`
> 
> 添加/更改需求后，将安装或更新修改后的需求。
> 
> 如果您不想以交互方式选择需求，您可以将它们传递给命令。
> 
> `php composer.phar require vendor/package:2.* vendor/package2:dev-master`

虽然确实会`composer update`安装 composer.json 中的新包，***但它也会根据 composer.json****中的任何模糊逻辑（`>`或`*`冒号后的字符）更新 composer.lock 文件和任何已安装的包！*这可以通过使用 来避免`composer update vendor/package`，但我不建议养成它的习惯，因为你是一个被遗忘的论点，远离一个可能被破坏的项目......</p>

保持理智并坚持`composer require vendor/package`添加新的依赖项！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-09T21:50:29.290

我的用例更简单，只适合您的标题，但不适合您的更多细节。

也就是说，我想安装一个尚未在我的包中的新包，`composer.json`而不更新所有其他包。

这里的解决方案是`composer require x/y`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-29T20:14:45.763

就我而言，我有一个回购：

*   要求 A、B、C、D 在`.json`
*   但只有 A,B,C 在`.lock`

与此同时，A、B、C 在生成锁时具有更新的版本。

出于某种原因，我删除了“供应商”并想做一个`composer install`并失败了消息：

```
Warning: The lock file is not up to date with the latest changes in composer.json.
You may be getting outdated dependencies. Run update to update them.
Your requirements could not be resolved to an installable set of packages. 
```

我试图从 Seldaek 运行解决方案，`composer update vendorD/libraryD`但 composer 坚持要更新更多的东西，所以`.lock`我的 git 工具也看到了太多的变化。

我使用的解决方案是：

1.  删除所有`vendors`目录。
2.  暂时`VendorD/LibraryD`从`.json`.
3.  运行`composer install`。
4.  然后删除文件`.json`并从 repo 中再次签出（相当于重新添加文件，但避免潜在的空白更改）。
5.  然后运行 ​​Seldaek 的解决方案`composer update vendorD/libraryD`

它确实安装了库，但除此之外，`git`diff 向我展示了`.lock`仅添加了新内容而没有编辑其他内容。

（Thnx Seldaek 的指针；））

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-27T12:32:49.640

我们可以在不更新其他依赖项的情况下安装新包，如下所示：

```
 composer require package/name --no-update 
```

这会将您的包添加到composer.json（没有更新composer.lock）

```
composer update package/name 
```

这现在将安装/更新您的新包，将其添加到 composer.lock 而不更新其他部门

# c++ - Apache标准输出流

> ID：15212384
> 
> 赞同：3
> 
> 时间：2013-03-04T22:29:32.687
> 
> 标签：c++, linux, apache

在我的 cpp 文件中，我将一些调试消息打印到 std::cout 标准输出流。当我使用此文件并使用 Apache 服务器运行可执行文件时。调试消息将在哪里打印。我没有看到它们打印在 /var/lib/httpd/error_log 中。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:44:07.643

您应该使用 Apache Web 服务器来运行 C++ 程序的唯一原因是您制作 CGI 脚本

看看：[http ://en.wikipedia.org/wiki/Common_Gateway_Interface](http://en.wikipedia.org/wiki/Common_Gateway_Interface)

* * *

此处的过程是 Web 服务器 Apache 运行您的程序并使用输出（std::cout）作为页面源。

页面源可以是 html 或纯文本。唯一的问题是服务器不知道，所以你在输出开始时给它一点提示。它被称为标题。

如果您输出 html，则必须打印：

> 内容类型：文本/html

后跟*两个*换行符。

或者如果您希望 Web 服务器将数据解释为纯文本，则必须首先打印

> 内容类型：文本/纯文本

后面还有*两个*换行符。

* * *

例如，一个应该可以工作的 C++ 程序看起来像这样：

```
#include <iostream>

int main()
{
  //output header, then one newline, then another, paired with a flush.
  std::cout << "Content-type: text/plain\n" << std::endl;
  //now your output
  //calculation...
  std::cout << "Hello World" << std::endl;
  return 0;
} 
```

可以使用一些预先设置的环境变量来查询任何 Web 服务器参数。阅读我链接的维基百科文章。

* * *

**编辑：**

我很抱歉，`Content-type: text/html`并且`Content-type: text/plain`是正确的，但我之前说过他们需要一个新行。我弄错了，他们需要两条新线

如果这是您第一次看到这篇文章，请不要担心。

# authentication - File.Exists 在 Active Directory 环境中返回 False

> ID：15212386
> 
> 赞同：1
> 
> 时间：2013-03-04T22:29:37.527
> 
> 标签：authentication, iis, active-directory

我在 IIS 7 的默认网站下有一个应用程序，每当我尝试访问同一域（但不同的机器）上的另一个文档时`File.Exists`，`False`即使该文档确实存在并且我可以从机器上正常访问它，也会返回托管网站。设置的 AD 部分似乎工作正常，我只是无法访问域中不同机器上的文档。这是我的 IIS 设置：

1.  应用程序池：.NET 4.0，集成管道，并使用 ApplicationPoolIdentity 标识。我试过使用 NetworkService 但这似乎没有什么不同。

2.  身份验证：我的应用程序仅启用了 ASP.NET 模拟和 Windows 身份验证。bin 文件夹是一样的。

如果还有其他与 IIS 设置相关的内容，请告诉我，我会添加。

我还尝试授予我的机器对包含我尝试访问的文档（位于同一域中的另一台机器上）的文件夹的完全权限。这似乎也没有什么不同。

以前有没有人遇到过这个问题，或者知道我可以尝试的其他任何事情，或者知道我可以检查的任何 IIS 设置？如果我可以在我的设置中包含任何其他相关内容，请告诉我！

**更新：**

是否有可能找出正在使用的身份或在`System.IO.File.Exists()`调用时冒充谁，或者更具体地说，找出*该方法*冒充的是谁？我已经尝试`Thread.CurrentPrincipal.Identity.Name`在调用之前进行检查`File.Exists()`，它**正确地**返回了我的域用户。

因此，执行时似乎不是模拟用户`File.Exists()`。更重要的是，如果在 IIS 中，我将 ASP.NET 模拟（在身份验证设置中）更改为使用我的特定域用户，一切正常！但是当我将它改回使用“经过身份验证的用户”时，它不会吗？

我还可以确认`Principal.WindowsIdentity.GetCurrent.Name()`之前的调用`File.Exists()`也会返回正确的域用户。

**更新 2：**

我还尝试将应用程序池标识设置为我的特定域用户，这似乎也没有什么不同。在这一点上，我不确定在检查文件是否存在时它可能会模拟什么其他帐户？

**更新 3：**

我尝试在具有我要访问的文档的机器上使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)，但是当我将其过滤为我正在寻找（或期望看到）的文件类型时，当我重新 -运行我的测试。我只能假设`File.Exists()`对您无权访问的文件进行操作，不注册到进程监视器？有没有其他方法可以让我找出哪个模拟用户/服务正在尝试（无法）访问这些文档？

**更新 4：**

使用下面@john 找到的示例，我尝试在检查文件是否存在之前以编程方式模拟登录用户：

```
Dim wID As WindowsIdentity = HttpContext.Current.User.Identity
Dim ctx As WindowsImpersonationContext = Nothing

ctx = wID.Impersonate()

If System.IO.File.Exists(sFile) Then

Else
   'Still gets here?
End If 
```

但是，`File.Exists()`即使在模拟时仍然返回 false。

**更新 5（解决方案）：**

我需要这个：

```
Using ctx As System.Security.Principal.WindowsImpersonationContext = System.Security.Principal.WindowsIdentity.Impersonate(IntPtr.Zero)
   'My code here
End Using 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:14:51.237

在 IIS 中，选择您的网站，然后转到身份验证，选择 Windows 身份验证，

1.  选择高级设置 -> 确保内核模式已启用
2.  选择Provider，检查Negotiate是否是mapping中的第一项

当您测试时只使用 IE 并从您的 Intranet 运行。

您还可以模拟特定用户，转到 ASP.NET 模拟，指定有权访问远程目录的用户。

# javascript - 缩放后的动力学.js层宽度

> ID：15212393
> 
> 赞同：1
> 
> 时间：2013-03-04T22:29:59.957
> 
> 标签：javascript, kineticjs

kinetic.js 图层对象是否缩放其宽度？

在缩放整个图层并尝试通过 getWidth() 方法获取宽度后，我得到了我在图层实例化上设置的内容。这是故意的 kinetic.js 行为吗？

[http://jsfiddle.net/qHmZz/](http://jsfiddle.net/qHmZz/)

```
var stage = new Kinetic.Stage({
    container : 'container',
    width: 300,
    height: 300
});

var layer = new Kinetic.Layer({
    width: 300,
    height: 300
});

var circle = new Kinetic.Circle({
        x: 150,
        y: 150,
        radius: 30,
        fill: 'green',
});

layer.add(circle);

stage.add(layer);

$('#message').append( 'width before scale: ' + layer.getWidth() + "</br>");
// 300

layer.setScale(0.9);
layer.draw();

$('#message').append('width after scale: ' + layer.getWidth());
//300 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:59:25.680

是的，这是预期的行为。

如果你想要缩放宽度：

```
$('#message').append('width after scale: ' + layer.getWidth() * layer.getScale().x); 
```

[http://jsfiddle.net/qHmZz/2/](http://jsfiddle.net/qHmZz/2/)

# c# - 计算不同行中不同列之间的差异

> ID：15212400
> 
> 赞同：7
> 
> 时间：2013-03-04T22:30:41.093
> 
> 标签：c#, linq

我有一张表格，记录了车辆在访问期间发生的情况。对于每次访问，都有多行表示已完成的操作。桌子看起来像这样

```
VisitID | ActionID | StartTime | EndTime
   0    |    0     | 1/1/2013  | 1/2/2013
   1    |    0     | 1/2/2013  | 1/4/2013
   1    |    1     | 1/4/2013  | 1/7/2013
   2    |    0     | 1/4/2013  | 1/5/2013
   2    |    1     | 1/5/2013  | 1/6/2013
   2    |    2     | 1/6/2013  | 1/7/2013 
```

我希望构建一个能够获取访问时间的 LINQ 查询。`TotalTime`的计算方法是首先找到第一个和最后一个（最低和最高）`ActionID`，然后`last.EndTime - first.StartTime`. 预期成绩：

```
VisitID | TotalTime
   0    |   1
   1    |   5
   2    |   3 
```

我可以通过这样做来产生我的预期结果

```
var first = db.Visits.Where(v => v.ActionID == 0)
var last = db.Visits.GroupBy(x => x.VisitID).Select(g => g.OrderByDescending(x => x.ActionID).First())

first.Join(last, f => f.VisitID, l => l.VisitID, (f, l) new{ VisitID = Key, TotalTime = l.EndTime - f.StartTime}); 
```

我真的不喜欢我用来获取最后一个 ActionID 的 hack，我真的很希望能够在 1 个 LINQ 语句中做到这一点。我需要做什么才能实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:40:06.553

我认为这应该工作......

```
var result = db.Visits.GroupBy(v => v.VisitID)
            .Select(g => new
                    {
                        VisitId = g.Key,
                        TotalTime = g.Max(v => v.EndTime).Subtract(g.Min(v => v.StartTime)).Days
                    }); 
```

编辑：这假设 actionid 与最大和最小开始日期无关紧要。这是一个不同的解决方案，其中对 actionid 进行排序，并使用第一次和最后一次访问来计算时间差。

```
var result2 = db.Visits.GroupBy(v => v.VisitID)
            .Select(g => new
                    {
                        VisitId = g.Key,
                        TotalTime =
                    g.OrderBy(v => v.ActionID).Last().EndTime.Subtract(g.OrderBy(v => v.ActionID).First().StartTime).Days
                    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:53:05.513

```
db.Visits.GroupBy(v => v.VisitID)
    .Select(g => new { VisitId = g.Key, 
            Days = g.Select(x => x.EndTime.ToOADate()).Sum()
            -g.Select(x => x.StartTime.ToOADate()).Sum() }); 
```

使用一点技巧来添加每次访问的所有开始日期和结束日期并获得差异。

# ruby-on-rails - 如何在 Ruby on Rails 中将数组转换为 content_tags？

> ID：15212405
> 
> 赞同：0
> 
> 时间：2013-03-04T22:30:53.030
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试在 Rails 中编写一个辅助函数，将值数组转换为`radio_buttons`. 在我的表格中，我有这个：

```
<%= radio_tags_for_select(f.object.invoice_types) %> 
```

这是我的辅助功能：

```
def radio_tags_for_select(array)
  options = []
  array.each do |value|
    options << content_tag(:span, value, :class => 'radio_option')
  end
  options
end 
```

不幸的是，该函数只吐出我不能真正使用的原始 HTML。有没有更优雅的解决方案，甚至可能使用`radio_tag`助手？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:36:54.973

You can do that in a single line of code:

```
f.object.invoice_types.collect {|e| radio_button_tag("my_radio_button_name", e) } 
```

Now, is that what you want? An array of radio buttons?

# sql - Apache Derby 插入触发器 - 检索插入的记录

> ID：15212410
> 
> 赞同：1
> 
> 时间：2013-03-04T22:31:11.380
> 
> 标签：sql, triggers, derby, sql-insert

我的 Derby 数据库有一个插入触发器。此触发器的目的是获取插入 table_1 的所有内容并将该信息复制到 table_2 中。当我输入静态数字时，我的代码可以正常工作并向 table_2 添加一行，但我无法找到一种方法来简单地获取刚刚插入 table_1 的行的值。

```
create trigger insert_new_row
after insert on table_1
referencing new as insertedrow
for each row
insert (a,b,c)
values(a,b,c); 
```

在这一`values`部分中，我需要刚刚插入 table_1 的值（最新值）。我也试过`(insertedrow.a`- ) ( `:insertedrow.a`) ( `new.a`) （从 table_1 中选择一个）和（从 table_1 中选择一个，其中 a = 插入行.a）但这些都不起作用。

示例-如果插入语句读取-

```
insert into table_1 (a,b,c)
values(1,2,3); 
```

我需要触发器在 table_2 中插入具有相同值 (1,2,3) 的行。列名称相同，因此触发

```
create trigger insert_new_row
after insert on table_1
referencing new as insertedrow
for each row 
insert (a,b,c)
values(1,2,3); 
```

会起作用，但不实用，因为我需要在幕后发生这种情况，并且需要使用原始插入语句更改值。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:40:27.080

您缺少`into`插入的子句。

以下对我有用：

```
create trigger insert_new_row
  after insert on table_1
  referencing new as insertedrow
  for each row 

insert into table_2 (a,b,c)
values( insertedrow.a, insertedrow.b, insertedrow.c); 
```

# xpath - rapidminer 的 apath 声明

> ID：15212411
> 
> 赞同：-1
> 
> 时间：2013-03-04T22:31:12.440
> 
> 标签：xpath, rapidminer

在快速矿工中，我尝试使用 xpath 从 xml 页面获取数据，我尝试了许多不同的语句，但没有成功。下面是我试图检索的数据，我想要无序列表中的所有特征。

```
enter code here

<div id="features">
<h3>Features:</h3>
<ul><li>Front  garden</li>
<li>Rear Large Shed</li>
<li>Superb condition and tastefully decorated</li>
<li>Energy Efficent with a B2 Ber rating</li>
<li>Gravel &amp; driveway</li>
</ul></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:36:09.130

Assuming you want a sequence of strings there is the quick way:

```
//li/string() 
```

And the specific way:

```
/div[@id='features']/ul/li/string() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:45:52.347

您并没有真正指定您需要如何提取这些数据或它的去向，但也许这会有所帮助：

我将您的示例 xml 保存如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<div id="features"> 
<h3>Features:</h3>
<ul><li>Front  garden</li>
<li>Rear Large Shed</li>
<li>Superb condition and tastefully decorated</li>
<li>Energy Efficent with a B2 Ber rating</li>
<li>Gravel &amp; driveway</li>
</ul></div> 
```

然后，我创建了以下 RapidMiner 进程，该进程将每个列表元素作为单独的属性提取：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<process version="5.3.005">
  <context>
    <input/>
    <output/>
    <macros/>
  </context>
  <operator activated="true" class="process" compatibility="5.3.005" expanded="true" name="Process">
    <process expanded="true">
      <operator activated="true" class="read_xml" compatibility="5.3.005" expanded="true" height="60" name="Read XML" width="90" x="112" y="165">
        <parameter key="file" value="path/to/Test.xml"/>
        <parameter key="xpath_for_examples" value="//h3"/>
        <enumeration key="xpaths_for_attributes">
          <parameter key="xpath_for_attribute" value="//li[1]/text()"/>
          <parameter key="xpath_for_attribute" value="//li[2]/text()"/>
          <parameter key="xpath_for_attribute" value="//li[3]/text()"/>
          <parameter key="xpath_for_attribute" value="//li[4]/text()"/>
          <parameter key="xpath_for_attribute" value="//li[5]/text()"/>
        </enumeration>
        <list key="namespaces"/>
        <parameter key="use_default_namespace" value="false"/>
        <list key="annotations"/>
        <list key="data_set_meta_data_information"/>
      </operator>
      <connect from_op="Read XML" from_port="output" to_port="result 1"/>
      <portSpacing port="source_input 1" spacing="0"/>
      <portSpacing port="sink_result 1" spacing="0"/>
      <portSpacing port="sink_result 2" spacing="0"/>
    </process>
  </operator>
</process> 
```

我认为您要查找的 XPATH 查询是“//li[n]/text()”，其中 n 是您尝试从中提取数据的节点的编号。我希望这有帮助！

# java - Swing JPanel 切换超出范围

> ID：15212418
> 
> 赞同：0
> 
> 时间：2013-03-04T22:31:24.747
> 
> 标签：java, swing, user-interface, jpanel

我是 Swing 新手，我对 Java 的经验也很有限。我正在创建一个 GUI，但为了进入主屏幕，首先需要登录。我的课程结构是这样的：

类树的根：

```
public class master {

static mainwindow mainWindow;
static login loginScreen;

static JFrame frame;} 
```

正确的用户名和密码的结果应该将面板从登录屏幕切换到主窗口。我的问题是，当在“登录”类中处理登录操作时，我无法访问我的 mainWindow 面板或框架，因为它们位于“更高”类中。

我希望我的要求很清楚，如果不是，我会用更多的代码和详细说明来编辑我的帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:33:27.037

OO 中的重要概念之一是职责分离。

在您的情况下，`Login`组件不负责决定在成功登录后应该采取什么行动（您也可以争辩不成功）。

在这种情况下，您需要让登录组件通过某种方式通知相关方登录过程的状态。这最好使用观察者模式之类的东西来实现。

基本上，这意味着您有某种可以对更改做出反应的侦听器/回调。

在下面的示例中，我使用 a`CardLayout`作为切换视图的主要方法，但是您可以很容易地使用 a`JDialog`作为登录表单（就像 Hovercraft 所做的那样）并在处理登录后加载主框架成功地。

![在此处输入图像描述](../Images/87c29771b9139460eef67a1843fc898f.png)

```
public class TestCardLogin {

    public static void main(String[] args) {
        new TestCardLogin();
    }

    public TestCardLogin() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel implements LoginListener {

        private MainPane mainPane;
        private LoginPane loginPane;

        public TestPane() {
            setLayout(new CardLayout());

            mainPane = new MainPane();
            loginPane = new LoginPane(this);

            add(mainPane, "MAIN");
            add(loginPane, "LOGIN");

            ((CardLayout) getLayout()).show(this, "LOGIN");

        }

        @Override
        public void loginSuccessful() {
            ((CardLayout) getLayout()).show(this, "MAIN");
        }

        @Override
        public void loginFailed() {
            JOptionPane.showMessageDialog(TestPane.this, "Login failed", "Error", JOptionPane.ERROR_MESSAGE);
        }
    }

    public class MainPane extends JPanel {

        public MainPane() {
            JLabel label = new JLabel("Welcome!");
            Font font = label.getFont();
            label.setFont(font.deriveFont(Font.BOLD, 32));
            setLayout(new GridBagLayout());
            add(label);
        }
    }

    public class LoginPane extends JPanel {

        private JTextField user;
        private JPasswordField password;
        private JButton login;
        private LoginListener loginListener;

        public LoginPane(LoginListener listener) {
            this.loginListener = listener;
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.insets = new Insets(4, 4, 4, 4);
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.EAST;
            add(new JLabel("User name:"), gbc);
            gbc.gridy++;
            add(new JLabel("Password:"), gbc);

            gbc.gridx++;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;

            user = new JTextField(12);
            password = new JPasswordField(12);

            add(user, gbc);
            gbc.gridy++;
            add(password, gbc);

            login = new JButton("Login");

            gbc.gridx = 0;
            gbc.gridy++;
            gbc.anchor = GridBagConstraints.CENTER;
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            add(login, gbc);

            login.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    boolean accept = (boolean) (((int) Math.round(Math.random() * 1)) == 0 ? true : false);
                    if (accept) {
                        loginListener.loginSuccessful();
                    } else {
                        loginListener.loginFailed();
                    }
                }
            });

        }
    }

    public interface LoginListener {

        public void loginSuccessful();

        public void loginFailed();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T23:25:56.793

你不应该以你正在做的方式使用静态变量或方法，给方法和变量一个全局范围，因为这样做你失去了面向对象编程的许多优点。

你应该有一个主类，也许你可以称它为一个控制类，它运行所有东西并将引用传递到需要它的地方。通常我的登录窗口是模态对话框，例如 JDialog，它是主窗口的模态，主窗口是一个 JFrame。

例如，类似...

```
public class MasterControl {
   private MainView mainView = new MainView(this);
   private LoginView loginView = new LoginView(this);

   public MasterControl() {
      loginAndStart();
   }

   private void loginAndStart() {
      JFrame frame = new JFrame("MasterControl");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainView.getMainPanel());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);

      JDialog loginDialog = new JDialog(frame, "Log In", ModalityType.APPLICATION_MODAL);
      loginDialog.getContentPane().add(loginView.getMainPanel());
      loginDialog.pack();
      loginDialog.setLocationRelativeTo(frame);
      loginDialog.setVisible(true);

      // here extract info from loginView, ask model to validate login credentials
      // and then change main view.
   } 
```

# java - 如何在将提交按钮上的整数加一到jsp字符串？

> ID：15212421
> 
> 赞同：1
> 
> 时间：2013-03-04T22:31:42.203
> 
> 标签：java, jsp

```
<input type="text" name="integer" value="0"/>
<input type="submit" value="add one" /> 
```

* * *

```
<% 
String integer = request.getParameter("integer"); 
%>

<%
int x = 0;
try { x = Integer.parseInt("integer"); }
catch (Exception e) { x = 0; }
%> 
```

每次点击提交按钮时，如何将整数加一？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:19:50.470

```
<% 
String integer = request.getParameter("integer"); 
int x = (integer == null ? 0 : (Integer.parseInt(integer) + 1));
%>

<input type="text" name="integer" value="<%=x%>"/>
<input type="submit" value="add one" /> 
```

# python - 在 Python 中使用进程作为线程和网络

> ID：15212425
> 
> 赞同：3
> 
> 时间：2013-03-04T22:32:01.220
> 
> 标签：python, multithreading, networking, process

基本上，我的想法是编写某种基本服务器，我可以在其中连接到我的计算机，然后远程运行命令。这似乎不是什么大问题。但后来我有了一个好主意，下一步逻辑上是添加某种*线程*，这样我就可以产生多个连接。

我读到，由于 GIL，`multiprocessing.Process`最好尝试这样做。我不完全理解线程，很难找到关于它的好的文档；所以我只是扔东西并试图弄清楚它是如何工作的。

好吧，看来我可能快要做到这一点了；但我有一种感觉，我几乎不可能正确地做到这一点。我的程序现在确实允许多个连接，而当我第一次开始使用线程时它没有；但是一旦建立连接，然后建立另一个连接，第一个连接就不再能够向服务器发送命令。如果有人能给我任何帮助，或者指出我需要学习和理解的正确方向，我将不胜感激。

这是我的代码：

```
class server:
    def __init__(self):
        self.s = socket.socket()
        try:
            self.s.bind(("",69696))
            self.s.listen(1)
        except socket.error,(value,message):
            if self.s:
                self.s.close()
    def connection(self):
        while True:
            client , address = self.s.accept()

            data = client.recv(5)
            password = 'hello'
            while 1:
                if data == password:
                    subprocess.call('firefox')
                    client.close()
                else:
                    client.send('wrong password')
                    data = client.recv(5)
            p = Process(target=x.connection())
            p.start()
x = server()

if __name__ == '__main':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:44:04.710

好吧，这个答案仅适用于您使用的是 unix 或类似 unix 的操作系统（windows 没有`os.fork()`我们使用的操作系统）。

在 unix 平台上做这些事情的最常见方法之一是[派生](http://en.wikipedia.org/wiki/Fork_%28operating_system%29)一个新进程来处理客户端连接，而主进程继续侦听请求。

下面是一个可以处理多个同时连接的简单回显服务器的代码。您只需要修改`handle_client_connection()`以满足您的需求

```
import socket
import os

class ForkingServer:
    def serve_forever(self):
        self.s = socket.socket()
        try:
            self.s.bind(("", 9000))
            self.s.listen(1)
        except socket.error, (value,message):
            print "error:", message
            if self.s:
                self.s.close()
            return

        while True:
            client,address = self.s.accept()
            pid = os.fork()
            # You should read the documentation for how fork() works if you don't
            # know it already
            # The short version is that at this point in the code, there are 2 processes
            # completely identical to each other which are simulatenously executing
            # The only difference is that the parent process gets the pid of the child
            # returned from fork() and the child process gets a value of 0 returned
            if pid == 0:
                # only the newly spawned process will execute this
                self.handle_client_connection(client, address)
                break
            # In the meantime the parent process will continue on to here
            # thus it will go back to the beginning of the loop and accept a new connection

    def handle_client_connection(self, client,address):
        #simple echo server
        print "Got a connection from:", address
        while True:
            data = client.recv(5)
            if not data:
                # client closed the connection
                break
            client.send(data)
        print "Connection from", address, "closed"

server = ForkingServer()
server.serve_forever() 
```

# vb.net - 在 Visual Basic 中更改光标位置

> ID：15212426
> 
> 赞同：1
> 
> 时间：2013-03-04T22:32:01.110
> 
> 标签：vb.net

我想更改光标在特定标签上的位置。我用：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Cursor.Position = Label17.Location

End Sub 
```

但它不会改变我想要的地方。我试过了：

```
 Label16.Location = Label17.Location 
```

这会正确移动 label16。

那么我们如何将光标移动到 label17 或任何标签/对象的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:43:29.450

问题是 Label.Location （和任何其他 Control.Location ）指的是*相对于其容器左上角的*位置。这意味着您必须调用父容器的 PointToScreen 方法。在一个只有 Form 而没有任何其他容器的简单应用程序中，它将是：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Cursor.Position = Me.PointToScreen(Label17.Location)

End Sub 
```

一个更优雅的：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Cursor.Position = Label17.Parent.PointToScreen(Label17.Location)

End Sub 
```

# java - eclipse中没有控制台窗口

> ID：15212432
> 
> 赞同：2
> 
> 时间：2013-03-04T22:32:32.703
> 
> 标签：java, eclipse

eclipse中的控制台窗口消失了。

我怎样才能打开它？它无法打印`System.out.println()`。

![这里的图片](../Images/fb979aae126f61e020ec6c1729ff52e7.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T22:34:57.310

Check in this menu

**Windows > Show View > Console (Alt + Shift + Q, C)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T22:33:53.290

使用快捷方式：

```
Alt + Shift + Q, C 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:38:13.357

控制台是您可以在 Eclipse 中配置的众多视图之一。要添加新视图，请转到“窗口”>“显示视图”。

# javascript - IE、Safari：在客户端使用 l10n.js 进行本地化

> ID：15212435
> 
> 赞同：1
> 
> 时间：2013-03-04T22:32:35.323
> 
> 标签：javascript, internet-explorer, localization, safari

我正在使用 L10n.js ( [https://github.com/eligrey/l10n.js/](https://github.com/eligrey/l10n.js/) ) 在我的应用程序的一个功能中被动本地化字符串的 cpl。

出于某种原因，在 IE 和 Safari 上，演示 ( [http://code.eligrey.com/l10n.js/demo.html](http://code.eligrey.com/l10n.js/demo.html) ) 总是以美式英语（我当前的语言环境）显示。即使我的浏览器设置中只有法语，也会发生这种情况。它适用于 FF 和 Chrome，但对于 IE 和 Safari，它默认为用户当前的语言环境，而不管浏览器的语言设置如何。关于为什么会发生这种情况以及如何解决这个问题的任何想法。

谢谢你的帮助。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T04:23:32.777

用于`String.locale`手动配置区域设置以进行测试。

# c# - 仅当部署到 iis 时，asp.net mvc web 请求才说代理错误 502

> ID：15212437
> 
> 赞同：1
> 
> 时间：2013-03-04T22:32:39.737
> 
> 标签：c#, iis, asp.net-mvc-4, proxy

嗨，我正在通过我的 asp.net MVC 应用程序中的控制器创建一些 Web 请求。要验证我正在使用的代理

```
System.Net.WebRequest.DefaultWebProxy.Credentials =  System.Net.CredentialCache.DefaultNetworkCredentials; 
```

这在向外部服务器发出网络请求时工作正常，例如：[http](http://www.google.com) ://www.google.com或其他

但是当我向本地主机发出请求时，它说代理错误并给出错误代码 502。这个错误的可能原因是什么？任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:35:21.757

这是 IIS 的问题，它实际上不读取主机文件，因此必须手动将代理服务器和绕过列表分配给 web.config 文件。很好的资源[http://msdn.microsoft.com/en-us/library/31465c77.aspx](http://msdn.microsoft.com/en-us/library/31465c77.aspx)

# css - 如何防止元素下拉？

> ID：15212439
> 
> 赞同：0
> 
> 时间：2013-03-04T22:32:40.660
> 
> 标签：css

我在一个 div、一个按钮和一个跨度中有 2 个元素：

```
<div class="outer">
    <button>Perform Action</button>
    <span class="option">View Some Stuff</span>
</div> 
```

对于跨度，我应用了告诉它制作省略号的规则：

```
div.outer {
    width: 50%;
    border: 2px dotted navy;
}

span.option {
    border: 2px solid red;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
} 
```

我故意将 div 的宽度设置为 50%，因此很容易复制我所说的内容。我已将此代码放入[此小提琴](http://jsfiddle.net/sbel/frxdu/)中。如何使跨度不会向下跳而是会形成一个省略号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:38:10.123

[JSFiddle](http://jsfiddle.net/frxdu/1/).

```
span.option {
    border: 2px solid red;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
    display:inline-block;
    width:200px;
} 
```

You need a set it as `inline-block` or `block`, otherwise a `span` keeps increasing. You may remove or edit the `width` as you see fit.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:39:49.063

```
button {
  display: block;
  float: left;
}
span.option {
  border: 2px solid red;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:44:55.910

span.option 没有什么可以省略的，因为它有空间可以增长。其容器的宽度为可用空间的 50%。

span.option 需要有一个小于内容的宽度并且它也需要是一个块元素

```
div.outer   { border: 2px dotted navy;
              display:inline-block;
              width: 50%;}
span.option { border: 2px solid red;
              text-overflow: ellipsis;
              white-space: nowrap;
          overflow: hidden; 
              display:inline-block;
              width: 70px; } 
```

# javascript - 为 Dummies 购买的 Windows 8 Metro Inapp

> ID：15212442
> 
> 赞同：0
> 
> 时间：2013-03-04T22:32:48.343
> 
> 标签：javascript

我准备部署我的第二个 Windows 8 Metro 风格 javascript 应用程序，我很想将其包含在应用程序购买中。我尝试使用从这里获得的以下代码 [http://msdn.microsoft.com/en-us/library/windows/apps/hh694067.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh694067.aspx)

```
function appInit()
{
  // some app initialization functions

    // Get current product object 
    // Execute only one of these statements. 
    // The next line is commented out for testing.
    // currentApp = Windows.ApplicationModel.Store.CurrentApp;

    // The next line is commented out for production/release.
    currentApp = Windows.ApplicationModel.Store.CurrentAppSimulator;

    // We should have either a real or a simulated CurrentProduct object here.

    // Get the license info
    licenseInformation = currentApp.licenseInformation;

  // other app initializations function
 }
 function buyFeature1() {
    if (!licenseInformation.productLicenses.lookup("featureName").isActive)
      {

        currentApp.requestProductPurchaseAsync("featureName", false).then(
           function () {
            // the in-app purchase was successful
            }, 
           function () {
            // The in-app purchase was not completed because // there was an error.
        });
    } 
    else
    {
    // The customer already owns this feature.
    }
   } 
```

但似乎什么也没发生。我知道这是一个新手问题。但如果有人能提供一个完整的简单工作解决方案，我会很高兴。顺便说一句，我已经阅读了文档并下载了示例。我也有我的 storeproxy.xml 文件设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:10:10.130

You might try changing:

```
currentApp.requestProductPurchaseAsync("featureName", false).then( 
```

Into:

```
currentApp.requestProductPurchaseAsync("featureName", false).done( 
```

That is what I use and it works for me.

# hibernate - 我们是否必须使用 ScrollableResults 进行批量更新？

> ID：15212444
> 
> 赞同：1
> 
> 时间：2013-03-04T22:32:51.093
> 
> 标签：hibernate

我正在阅读有关休眠批处理的[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html 。](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)批量更新部分说

> 对于检索和更新数据，同样的想法也适用。此外，您需要使用 scroll() 来利用服务器端游标来进行返回多行数据的查询。

这是否意味着我们必须使用 ScrollableResults 来启用批量更新？或者它只是意味着使用它会给我们带来更多的好处？

谢谢，莎拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:40:20.133

`OutOfMemoryError`文档说明的是，当尝试使用`select`返回的许多行进行批量更新时，很容易得到一个。

通过使用，`ScrollableResults`您可以迭代这些行并仅在到达时检索它们。

这不是强制性的。如果您查看示例，它只是迭代实体，然后更新这些实体并刷新会话。

因此，是否使用`scroll()`或存储 a 中的所有行`List`取决于您。我会推荐`ScrollableResultSet`。

# c - 为什么 WaitForSingleObject 会错过信号？

> ID：15212450
> 
> 赞同：3
> 
> 时间：2013-03-04T22:33:21.407
> 
> 标签：c, multithreading, winapi, synchronization, waithandle

`WaitForSingleObject`即使已发出事件信号，有时也会等待超时。

`SetEvent()`信令线程每次都收到成功。但是，发出信号的线程并不总是能听到信号。如果我向信号线程添加冗余`SetEvent()`，问题就会消失。

显然这里有些不对劲。可能的原因是什么？

```
// Signalling Thread
if (SetEvent(waitEvent))
    consoleprintf(L"\r\nEvent Set."); 
```

并且应该等待延迟时间*或*收到信号。但并不总是得到信号。

```
waitEvent = CreateEvent( 
    NULL,               // default security attributes
    FALSE,               // auto-reset event
    FALSE,              // initial state is nonsignaled
    TEXT("WaitEvent")  // object name
    ); 

for(;;)
{
   dwWaitResult = WaitForSingleObject(waitEvent, // event handle
        5000);    

  switch (dwWaitResult) 
  {
    // Event object was signaled
    case WAIT_OBJECT_0:
        consoleprintf(L"\r\nSuccess.");
        break; 

    case WAIT_FAILED:
    //break;
    case WAIT_ABANDONED:
        consoleprintf(L"\r\nWait failed.");
        break;
    case WAIT_TIMEOUT:
        consoleprintf(L"\r\nWait Timed out: %d", waitTime);
        break;
          default: 
        break;
   }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T23:33:14.920

由于您正在创建一个命名事件，因此知道该名称的其他进程可以访问该事件。其他进程也可能正在等待事件，导致它吃掉信号。除非出于某种原因该事件需要对其他进程可见，否则您应该`NULL`作为事件名称传递。这会创建一个其他进程无法访问的匿名事件。

请注意，如果给事件命名，那么您将遇到问题，如果您的程序的两个副本正在运行，它们都将使用相同的事件，这将产生同样的问题。

# c# - 如何从 Windows Phone 8 UI 线程调用要在特定工作线程上运行的代码？

> ID：15212452
> 
> 赞同：1
> 
> 时间：2013-03-04T22:33:24.737
> 
> 标签：c#, multithreading, windows-phone-8

我的应用程序源自 Windows Phone 8 Direct3D Xaml 示例，其中 C# 程序实例化包含 Direct3D 设备的 WinPRT 组件。C# 代码在 UI 线程上运行，组件代码在单独的应用程序线程上运行。WinPRT 组件与 C++ 预编译库一起使用，该库包含按线程声明的变量**static __declspec(thread)**。

变量在应用程序线程中需要时被初始化，但在 UI 线程上调用关闭（由生命周期 Closing 事件引起）。关闭进程使用了​​错误的每线程变量集，这些变量尚未初始化并导致崩溃。

我还没有找到在关闭期间在应用程序线程上调用的 WinPRT 组件上的任何方法。我希望能找到一个把我的东西挂起来的，但似乎没有。

那么，如何从 UI 线程调用关闭代码以在应用程序线程上运行呢？

WinPRT 严重限制了我可用的线程功能。我一直无法找到可行的解决方案。我查看了 Dispatcher 类，但在 WinPRT 上，它仅用于从工作线程在 UI 线程上运行代码，反之亦然。可能还有哪些其他选择？

# css - IE9 重定向缓存、字体和跨域资源共享 (CORS) CDN HTTP 标头

> ID：15212453
> 
> 赞同：3
> 
> 时间：2013-03-04T22:33:25.883
> 
> 标签：css, amazon-s3, internet-explorer-9, font-face, cors

我以为我已经[找到了解决 Firefox 和 CDN 托管字体访问这个非常棘手的问题的方法](https://stackoverflow.com/questions/12229844/amazon-s3-cors-cross-origin-resource-sharing-and-firefox-cross-domain-font-loa)，但是 IE9 来了。

我最近发现了一个非常令人沮丧的 IE9 缓存问题，并且偶然看到了这篇[博文（IE9 Redirect Caching Nightmare）](http://blog.maskalik.com/asp-net/ie9-redirect-caching-nightmare)，它让我对实际问题有了更多的了解。

我不得不承认我不确定上面提到的是否真的是问题，但它似乎足够接近。

**问题：**

我有一个网站设置有 2 个域（基域和子域）指向同一服务器，提供完全相同的网站，该网站使用由 Cloudfront 提供服务的 Amazon S3 上托管的 CDN 中的同一组资源。

```
https://example.com
https://www.example.com 
```

使用@font-face 从我的 CSS 文件加载字体时，我在 IE9 开发人员工具控制台中收到此类错误消息：

```
CSS3117: @font-face failed cross-origin request. Resource access is restricted. 
```

当我首先加载其中一个 URL，然后访问另一个 URL 时，就会发生这种情况。IE9**没有**在`Compatibility Mode`. 它运行在`Document Mode: IE9 Standards`.

根据我对 CORS 的有限理解和设置`Access-Control-Allow-Origin`HTTP 标头的需要，我尽职尽责地在 S3 CORS 策略中设置了它，并且它在 Firefox 上运行得非常好。

来自两个域的请求在请求 CDN 资源时将获得各自的标头。

似乎 IE9 尝试对缓存进行一些优化，并缓存了重定向。这会导致问题，因为`Access-Control-Allow-Origin`标头也被缓存。如果不向 CDN 服务器发送请求，则`Access-Control-Allow-Origin`不同域的标头无法更改。

因此，我遇到了请求来自`https://www.example.com`但`Access-Control-Allow-Origin`is的情况`https://example.com`。这会导致上述错误消息的资源受限问题。

**进一步看：**我用Firefox 19做了一个检查，确实出现了上述情况，但是没有遇到和IE9一样严格的限制。`https://www.example.com`请求信息的子域 ( ) 将接受`access-control-allow-origin`主域 ( `https://example.com`) 的。Chrome (Webkit) 似乎并不在意。我不知道哪个浏览器的行为实现是正确的。

根据我在 CDN 中的当前设置，Chrome 和 Firefox 似乎会自动将所有`www`子域请求重新路由到主域。只有多次尝试`www`在地址栏中输入子域，Chrome 和 Firefox 才会服从。另一方面，IE9 只会转到地址栏中输入的任何地址。IE9 似乎是奇怪的，但我不确定哪个浏览器的行为实际上是正确的。

从可用性的角度来看，Chrome 和 Firefox 似乎是“正确”的行为。

**已知可能的解决方案：**

1.  设置`Access-Control-Allow-Origin`标题以允许所有，即`*`
2.  在浏览器中关闭缓存
3.  将一个域重定向到另一个域
4.  使用查询字符串区分资源的不同域调用
5.  将字体作为 data-uri 嵌入到 CSS 中

对于解决方案 1，假设我很偏执，只想设置特定域以允许。

*对于解决方案 2，如果我要为所有*浏览器设置它并不是最佳选择，而且我的网站必须在通常低于理想下载速度的移动设备上运行。

对于解决方案 3，可能，但我仍然对直接处理 IE9 缓存问题的解决方案感到好奇。

对于解决方案 4，实现起来非常困难，尤其是从`@font-face`. 这是否意味着我必须为不同行的不同域调用动态重新生成 CSS 才能加载字体以绕过问题？似乎违背了 CSS 本身的目的，并为此缓存资源。

**编辑：**样式表有效，字体加载无效。

对于解决方案5，维护和更新非常繁琐，特别是在字体文件定期更改时。

**问题：**在这种特殊情况下，是否有任何已知的方法来专门处理 IE9 的重定向缓存行为？

非常感谢您的回答和评论。提前致谢！

编辑：更多浏览器测试信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T13:59:11.357

我们在 IE10 和 IE11 中也发现了同样的奇怪行为。

重置浏览器缓存可以毫无问题地加载字体。还启用和禁用兼容模式。

但是当切换到另一个子域时，IE 不会渲染字体，因为请求头与响应头不匹配，响应头仍然是最后一个请求的 URL。即使存储桶上的定义是 *.ourdomain.com，IE 也会始终显示完整的 URL

因此，通过向 S3 存储桶添加 CORS 权限解决了允许对 webfonts 等资产的跨源请求的一般问题——这使得 webfonts 在 Firefox 中完美运行。

但是我们仍然不知道如何避免*****并告诉 IE 不要缓存响应头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:26:14.793

**解决方案1：** 检查[这个问题](https://stackoverflow.com/a/1850482)。

**解决方案 4：**将您的 CSS 文件重命名为 style.php 并使用您需要调用适当资源的任何代码。

在页面顶部设置内容类型。

```
<?php
    header("Content-type: text/css; charset: UTF-8");
?> 
```

来自 Chris Coyier 的有关 style.php 的[更多信息。](http://css-tricks.com/css-variables-with-php/)

# java - Java：Eclipse 中的行号与命令行中的行号相同吗？

> ID：15212455
> 
> 赞同：-4
> 
> 时间：2013-03-04T22:33:39.613
> 
> 标签：java, eclipse

只是想确保我得到一些奇怪的行号。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:35:11.173

行号是行号 - 无论程序从哪里开始，都是第 1 行。如果您需要在 Eclipse 中显示它们，[请参阅此](https://stackoverflow.com/questions/640884/eclipse-line-numbers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:36:38.010

是的，他们是。在进行更改后启动程序之前是否再次运行编译器？

# http - 在 Web 应用程序中上传文件

> ID：15212456
> 
> 赞同：0
> 
> 时间：2013-03-04T22:33:45.083
> 
> 标签：http, browser, file-transfer

这可能是一个不成熟的问题，但......

*   当我们使用html输入文件控件上传文件时，OS加密了！由于安全原因，文件的完整路径。IE：`C:\falsepath\XXXXXX.txt`
*   为什么必须强制执行安全性，因为客户端是上传文件的人，他显然知道位置，为什么不能只提供完整路径（客户端脚本）
*   但是服务器如何从客户端获取字节流？

有人可以解释一下屏幕后面发生了什么吗？

操作系统-windows环境，浏览器-all

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:37:47.703

Server does not to know what is local path, browser sends to him stream of bytes. Local path is for good looking for user, nothing else.
If you ask: how does BROWSER know where the file is, this is good question, but you didn't write what is your OS.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:38:44.333

您应该知道，服务器与客户端完全分离。

客户端应用程序向服务器发送一条消息，其中包含文件的内容和文件名（只是文件名，而不是目录。将实际名称更改为 C:\falsepath* 仅用于防止客户端的脚本了解有关原始位置的任何信息，其中可能包含您不想发布的敏感信息。

# javascript - How to send js array to servlet using ajax?

> ID：15212464
> 
> 赞同：0
> 
> 时间：2013-03-04T22:34:43.420
> 
> 标签：javascript, ajax, servlets

I have a textarea where a user can enter 1 or more emails on there, each email separated by comma.

My js code:

```
 var emails = $("#emails").val().split(",");

    if (emails.length == 0)
    {
        window.alert("Enter an email address.");
        $("#emails").focus();
        return;
    }

    var valid = validateEmails(emails);
    var goodEmails = valid[0];
    var badEmails = valid[1];
    var json = JSON.stringify(goodEmails);

    $.ajax
    ({
        url: "/mfa/service/initiate_user",
        type: "POST",
        data: {"emails" : json}, 
```

The data I see:

```
["yao@a.com","yao@b.com] 
```

What I was hoping for:

```
yao@a.com, yao@b.com 
```

The way I would handle it in the backend is basically stripping out the "[ ]" from it then stripping out the quotes from each email.

What is the proper way to send the emails to backend without those silly brackets and quotes?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:39:34.583

要获取表格`yao@a.com, yao@b.com`，您可以使用该`Array.join(delim)`功能。

前任：

```
var emails = ["yao@a.com", "yao@b.com"];
var email_string = emails.join(", ");
// email_string:
// yao@a.com, yao@b.com 
```

但是，我会说您希望将电子邮件保留为数组并执行以下操作：

```
var valid = validateEmails(emails);
var goodEmails = valid[0];
var badEmails = valid[1];

$.ajax
({
    url: "/mfa/service/initiate_user",
    type: "POST",
    data: {"emails" : goodEmails},
... 
```

这将允许您解析返回的 JSON 对象。`emails`您将拥有一个数组，而不是一个字符串。不确定您的后端，但如果您已经能够解析 JSON，这可能是一种更简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:42:23.737

尝试将标头添加到 ajax 配置：

标头：{'Content-type'：“应用程序/json; charset=utf-8”}

# neo4j - Choose properties to be COLLECTed

> ID：15212465
> 
> 赞同：2
> 
> 时间：2013-03-04T22:34:49.113
> 
> 标签：neo4j, cypher

How can I choose which properties to be collected in a Cypher [COLLECT](http://docs.neo4j.org/chunked/milestone/query-aggregation.html#aggregation-collect) statement?

I can do `COLLECT([profile.name, profile.email])` but then I don't get the properties names.

Say I have ProfileA which is connected to several ProfileB's, I'd like to have returned ProfileA and a collection of ProfileB's where `ProfileA-->ProfileB`, but only ProfileB.name and ProfileB.email.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:36:39.890

目前不支持集合中的文字映射，因此我们无法构建映射集合，这听起来像是您希望能够做到的。

您将集合传递给 collect 的想法应该可行，并且您将获得一个集合集合，其中名称始终位于第一个，电子邮件始终位于最后。

另一种选择是做`collect(profile.name) as names, collect(profile.email) as emails`两个集合。

或者，您可以只拥有完整的节点。抱歉，没有更好的方法（AFAIK）！

# vb.net-2010 - Variable has been used before assigning a value?

> ID：15212469
> 
> 赞同：0
> 
> 时间：2013-03-04T22:34:58.503
> 
> 标签：vb.net-2010

Trying to resolve getting IP from host name but I get this warning on RetIP: (on Return RetIP line) "Variable 'RetIP' is used before it has been assigned a value. A null reference exception could result at runtime."

```
Public Function GetIPFromHostname(ByRef Host As String) As System.Net.IPAddress()
    Dim IP As System.Net.IPHostEntry
    'Dim host As System.Net.IPHostEntry
    Dim RetIP As System.Net.IPAddress()
    Try
        'Host = System.Net.Dns.GetHostByAddress(IP)
        IP = System.Net.Dns.GetHostEntry(Host)
        RetIP = IP.AddressList()
    Catch ex As Exception
        Console.WriteLine("Cannot resolve IP address from hostname ({0}) - {1}", Host, ex.Message)
    End Try

    Return RetIP
End Function 
```

This code used to work in VB 2008 and 2010 but now doesn't work. Any idea what I'm missing here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:38:16.550

警告是完全正确的；如果你在 2008 年没有得到它，那是因为微软修复了一个错误。

如果抛出异常，则不会设置该变量。

# sbt - 使用 doc 任务生成 scaladoc 后如何运行 bash 脚本？

> ID：15212472
> 
> 赞同：5
> 
> 时间：2013-03-04T22:35:00.823
> 
> 标签：sbt, scaladoc

我有一个简短的 Bash 脚本，它对我的​​ Scaladoc 注释进行查找和替换，以便生成指向第三方库的外部文档的链接。我希望每次使用该`doc`任务生成 Scaladocs 时都运行此脚本。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T02:33:42.447

这实际上很容易。首先，我检查了 doc 以查看它是什么（`inspect doc`在 sbt 提示符上），注意到它是一项任务，然后继续声明对自身的依赖`build.sbt`：

```
doc in Compile <<= doc in Compile map { (file) =>
  Seq("bash", "-c", "ls >tmp.log").! // CWD is sbt's current dir
  file
} 
```

我用来执行的那个东西`bash`是同一个库`scala.sys.process`，所以你可以查找[Scaladoc](http://www.scala-lang.org/api/current/index.html#scala.sys.process.package)。这是在 SBT 0.12.2 上测试的，我认为在 SBT 0.11.x 或 0.10.x 上可能会有细微差别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T19:01:18.700

在 sbt 0.13 和最新版本中，也可以使用`:=`和`.value`宏来实现用例（它们都旨在比 更简单`<<=`）：

```
doc in Compile := {
  val f = (doc in Compile).value
  // execute a shell script if you want with sbt's Process API
  // http://www.scala-sbt.org/0.13/docs/Process.html
  val ec = (baseDirectory.value / "myBashScript.sh").getAbsolutePath !
  val log = streams.value.log
  log.debug(s"Exit code: $ec")
  f
} 
```

您可能还喜欢`triggeredBy`以下任务的方法：

```
lazy val runMyBashScriptTask = taskKey[Unit]("Run myBashScript")

runMyBashScriptTask := {
  val ec = (baseDirectory.value / "myBashScript.sh").getAbsolutePath !
  val log = streams.value.log
  log.debug(s"Exit code: $ec")
}

runMyBashScriptTask <<= runMyBashScriptTask triggeredBy (doc in Compile) 
```

它假定它`myBashScript.sh`位于设置所指向的项目的主目录中`baseDirectory`。

# highstock - xDateFormat string doesn't apply to large amounts of data

> ID：15212475
> 
> 赞同：4
> 
> 时间：2013-03-04T22:35:15.693
> 
> 标签：highstock

I have an issue that **I have been able to replicate on JFiddle**. Link: [http://jsfiddle.net/h5sSR/](http://jsfiddle.net/h5sSR/)

```
$(function() {
var chart = new Highcharts.StockChart({

    chart: {
        renderTo: 'container'
    },

    tooltip: {
        backgroundColor: {
            linearGradient: {
                x1: 0, 
                y1: 0, 
                x2: 0, 
                y2: 1
            },
            stops: [
                [0, 'white'],
                [1, '#EEE']
            ]
        },
        xDateFormat: '%m/%e/%y %H:%M',
        borderColor: 'gray',
        borderWidth: 1
    },

    rangeSelector: {
        selected: 1
    },

    series: [{
        name: 'USD to EUR',
        data: usdeur
    }]
});
}); 
```

**The Problem**: I need the xDateFormat attribute to be applied under ToolTip at all times (*month* / *day* / *year* *hour* : *minute*). It works perfectly when you have a small amount of data selected. It uses a different format when you have a large amount of data selected to view.

**The Example**: Try it on the JFiddle (link above). It initializes to a small amount of data visible and when you hover, you will see the Date like so: 12/3/12 0:0\. That's perfect. Now drag the navigator to the beginning and hover on the graph, the DateFormat changes to (Week from *Day of Week*, *Month Day*, *Year*).

**How to Solve**: Why is this happening and how can I apply the xDateFormat attribute all the time regardless of how much data is being displayed?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:01:19.310

看看文档：[http ://api.highcharts.com/highstock#tooltip.xDateFormat](http://api.highcharts.com/highstock#tooltip.xDateFormat)

> 工具提示标题中日期的格式。如果使用数据分组，则默认是根据最近点的接近程度进行智能猜测。它是从 #plotOptions.dataGrouping.dateTimeLabelFormats 数组中提取的。

因此，您可以在这里找到应该更改的内容：http: [//api.highcharts.com/highstock#plotOptions.series.dataGrouping.dateTimeLabelFormats](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping.dateTimeLabelFormats) - 适用于相同格式的所有表单，并且可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T16:57:15.370

这是解决此问题的新代码（在 Pawel Fus 将我链接到解决方案之后）：

```
plotOptions : {
                    series : {
                        dataGrouping : {
                            dateTimeLabelFormats : {
                                millisecond: ['%m/%e/%y %H:%M', '%m/%e/%y %H:%M', '-%H:%M'],
                                second: ['%m/%e/%y %H:%M', '%m/%e/%y %H:%M', '-%H:%M'],
                                minute: ['%m/%e/%y %H:%M', '%m/%e/%y %H:%M', '-%H:%M'],
                                hour: ['%m/%e/%y %H:%M', '%m/%e/%y %H:%M', '-%H:%M'],
                                day: ['%m/%e/%y %H:%M', '%m/%e/%y %H:%M', '-%H:%M'],
                                week: ['%m/%e/%y %H:%M', '%m/%e/%y %H:%M', '-%H:%M'],
                                month: ['%m/%e/%y %H:%M', '%m/%e/%y %H:%M', '-%H:%M'],
                                year: ['%m/%e/%y %H:%M', '%m/%e/%y %H:%M', '-%H:%M']
                            }
                        }
                    }
                }, 
```

这将“完成”。这里是更新的 JFiddle 链接：http: [//jsfiddle.net/h5sSR/1/](http://jsfiddle.net/h5sSR/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T18:24:44.660

HighStockchart 默认**分组数据**。 [https://api.highcharts.com/highstock/plotOptions.series.dataGrouping.dateTimeLabelFormats](https://api.highcharts.com/highstock/plotOptions.series.dataGrouping.dateTimeLabelFormats)

就我而言，我只是禁用了数据分组并设置**xDateFormat**它对我有用

```
plotOptions: {
        series: {
          dataGrouping: {
            enabled: false
          }
        }
} 
```

# r - R functions on sequential rows in a data frame

> ID：15212476
> 
> 赞同：3
> 
> 时间：2013-03-04T22:35:28.440
> 
> 标签：r, dataframe

I have a data frame that is made up of mostly sequential rows. Mostly meaning that some are out of sequence or missing. When the the sequential row for the current row is present, I'd like to perform some function using data from both rows. If it's not present, skip it and move on. I know I can do this with a loop, but it's quite slow. I think this has something to do with using the index. Here is an example of my problem using sample data and a desired result that uses a loop.

```
df <- data.frame(id=1:10, x=rnorm(10))
df <- df[c(1:3, 5:10), ]
df$z <- NA

dfLoop <- function(d)
{
  for(i in 1:(nrow(d)-1))
  {
    if(d[i+1, ]$id - d[i, ]$id == 1)
    {
      d[i, ]$z = d[i+1, ]$x - d[i, ]$x
    }
  }

  return(d)
}

dfLoop(df) 
```

So how might I be able to get the same result without using a loop? Thanks for any help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:44:05.740

试试这个：

```
index <- which(diff(df$id)==1) #gives the index of rows that have a row below in sequence

df$z[index] <- diff(df$x)[index] 
```

作为一个函数：

```
fun <- function(x) {
  index <- which(diff(x$id)==1)
  xdiff <- diff(x$x)
  x$z[index] <- xdiff[index]
  return(x)
} 
```

与您的循环进行比较：

```
a <- fun(df)
b <- dfLoop(df)
identical(a, b)
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:58:24.143

R 是基于向量的。试试这段代码——它就像你的`for`循环，但一次使用整个范围：

```
i <- 1:(nrow(d)-1)
d[i+1, ]$id - d[i, ]$id == 1 
```

您应该看到一个长度向量`nrow(d) - 1`，其中包含条件成立的索引。保存：

```
cond <- (d[i+1, ]$id - d[i, ]$id == 1) 
```

您还可以获得所有`TRUE`值的位置：

```
(cond.pos <- which(cond)) 
```

现在您可以将值分配给条件为真的那些索引：

```
d[cond.pos, ]$z <- d[cond.pos+1, ]$x - d[cond.pos, ]$x 
```

有很多方法可以实现您想要的，但需要一些经验才能抓住“基于矢量”的想法。特别是`diff`正如 alexwhan 所指出的，该函数可以帮助为这个特定示例节省一些输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:36:04.933

这首先计算所有“第一个差异”，然后将非连续行设置为 NA：

```
 df[1:(nrow(df)-1), "z"] <- df[-1, "x"] - df[-nrow(df), "x"]
 is.na(df[-nrow(df), "z"]) <- diff( df$id) !=1
 df
#
   id           x           z
1   1 -0.04493361  0.02874335
2   2 -0.01619026  0.96002647
3   3  0.94383621          NA
5   5  0.59390132  0.32507605
6   6  0.91897737 -0.13684107
7   7  0.78213630 -0.70757132
8   8  0.07456498 -2.06391668
9   9 -1.98935170  2.60917744
10 10  0.61982575          NA 
```

负索引在创建略短版本的向量时很有用。该`is.na<-`函数在其 RHS 上接受一个逻辑参数，并使用它将其 LHS 侧目标中的所有条目设置为 NA，以符合逻辑向量的“判断”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T22:52:02.100

不是最漂亮的，但它会在没有循环的情况下运行：

```
> df <- data.frame(id=1:10, x=rnorm(10))
> df <- df[c(1:3, 5:10), ]
> df$z <- NA
> df
   id           x  z
1   1 -1.91564886 NA
2   2  0.27260879 NA
3   3 -1.08563119 NA
5   5 -0.13747215 NA
6   6 -0.38367874 NA
7   7 -1.17825737 NA
8   8 -0.08521386 NA
9   9 -0.44392382 NA
10 10 -0.97192253 NA
> 
> temp = c(df$id,1:10)
> temp
 [1]  1  2  3  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10
> 
> idx = which(table(temp)<2)
> idx 
4 
4 
> 
> newdf = df[-idx,]
> newdf
   id           x  z
1   1 -1.91564886 NA
2   2  0.27260879 NA
3   3 -1.08563119 NA
6   6 -0.38367874 NA
7   7 -1.17825737 NA
8   8 -0.08521386 NA
9   9 -0.44392382 NA
10 10 -0.97192253 NA
> 
> newdf$z = newdf$x[2:nrow(df)] - newdf$x[1:(nrow(df)-1)]
> newdf
   id           x          z
1   1 -1.91564886  2.1882577
2   2  0.27260879 -1.3582400
3   3 -1.08563119  0.7019524
6   6 -0.38367874 -0.7945786
7   7 -1.17825737  1.0930435
8   8 -0.08521386 -0.3587100
9   9 -0.44392382 -0.5279987
10 10 -0.97192253         NA
> 
> newdf = rbind(newdf,df[idx,])
> newdf
   id           x          z
1   1 -1.91564886  2.1882577
2   2  0.27260879 -1.3582400
3   3 -1.08563119  0.7019524
6   6 -0.38367874 -0.7945786
7   7 -1.17825737  1.0930435
8   8 -0.08521386 -0.3587100
9   9 -0.44392382 -0.5279987
10 10 -0.97192253         NA
5   5 -0.13747215         NA
> 
> newdf = newdf[order(newdf$id),]
> newdf
   id           x          z
1   1 -1.91564886  2.1882577
2   2  0.27260879 -1.3582400
3   3 -1.08563119  0.7019524
5   5 -0.13747215         NA
6   6 -0.38367874 -0.7945786
7   7 -1.17825737  1.0930435
8   8 -0.08521386 -0.3587100
9   9 -0.44392382 -0.5279987
10 10 -0.97192253         NA 
```

# glassfish - Howto use JDBC realm in embedded Glassfish

> ID：15212480
> 
> 赞同：5
> 
> 时间：2013-03-04T22:35:46.010
> 
> 标签：glassfish

I'm using embedded Glassfish (org.glassfish.main.extras:glassfish-embedded-all:3.1.2.2) and tried to add a JDBC realm. The application deploys fine but when trying to login (Basic auth. shows the right realm name) the following **error message** occurs:

> com.sun.web.security.RealmAdapter authenticate WARNING: WEB9102: Web Login Failed: com.sun.enterprise.security.auth.login.common.LoginException: Login failed: No LoginModules configured for jdbcRealm

My code looks like this:

**embedded Glassfish**

```
// create-jdbc-connection-pool ...    
// create-jdbc-resource ...

String realmProperties = "jaas-context=jdbcRealm:datasource-jndi=jdbc/myDB:user-table=Users:user-name-column=userid:password-column=password:group-table=Groups:group-name-column=groupid;

glassfish.getCommandRunner().run("create-auth-realm", "--classname", "com.sun.enterprise.security.auth.realm.jdbc.JDBCRealm", "--property", realmProperties, myRealm); 
```

**web.xml of deployed application**

```
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>myRealm</realm-name>
</login-config> 
```

I thought if nothing is specified default LoginModule (which in case of a non embedded Glassfish is specified in domain/conf/login.conf) applies?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T02:15:17.417

我的经验是，您无法以这种方式创建带有嵌入式 glassfish 的安全领域。原因是您需要启用安全管理员。当然，您可以在嵌入式 glassfish 中启用安全管理，但这需要重新启动。这就是重点，通常你不能重新启动嵌入式 glassfish，因为你会失去状态，所以你也会失去配置的安全领域。

奇怪的是，我希望只是登录失败，而不是丢失的 loginmodules-exception Oo。

好消息，您可以尝试另一种方法，这可能会有所帮助。如果您用于`EJBContainer.createEJBContainer(props);`创建 EJBContainer，您可以传递一些属性，并且我们可以使用一个属性。这将如下所示：

```
Map<String, Object> props = new HashMap<String, Object>();
props.put("org.glassfish.ejb.embedded.glassfish.instance.root", "./src/test/resources/testing-domain"); 
```

现在您可以在测试资源中指定整个测试域。为此，您需要从工作的独立 Glassfish 3.1.2.2 中复制一些内容。我发现您需要以下资源才能使其发挥作用：

```
testing-domain
    config
        admin-keyfile
        cacerts.jks
        domain.xml (there u can define the security-realm)
        keyfile
        keystore.jks
        logging.properties
        login.conf
        server.policy
        wss-server-config-1.0.xml
        wss-server-config-2.0.xml 
```

如果你使用的是`GlassFishRuntime.bootstrap().newGlassFish(glassfishProperties);`你只需要 domain.xml 和这个片段：

```
GlassFishProperties glassfishProperties = new GlassFishProperties();
File configFile = new File("src/test/resources/META-INF", "domain.xml");
glassfishProperties.setConfigFileURI(configFile.toURI().toString()); 
```

请注意更改服务器的端口，这样如果另一个 glassfish 实例正在运行，您将不会收到错误消息。此外，您应该剥离 domain.xml 以加快测试速度。

现在您可以在标签下的 domain.xml 中指定您的安全领域，`<security-service>`插入如下内容：

```
<auth-realm name="JDBC-AccountRealm" classname="com.sun.enterprise.security.auth.realm.jdbc.JDBCRealm">
    <property name="jaas-context" value="jdbcRealm"></property>
    <property name="password-column" value="PASSWORD"></property>
    <property name="datasource-jndi" value="jdbc/__default"></property>
    <property name="group-table" value="ACCOUNT_GROUP"></property>
    <property name="user-table" value="ACCOUNT"></property>
    <property name="group-name-column" value="GROUPS"></property>
    <property name="group-table-user-name-column" value="EMAIL"></property>
    <property name="user-name-column" value="EMAIL"></property>
    <property name="digest-algorithm" value="SHA-256"></property>
    <property name="encoding" value="Hex"></property>
</auth-realm> 
```

就是这样，很容易做到，对吧？;D

注意：如果您愿意，可以在 login.conf 中指定 LoginModules。

注意2：我假设 myRealm （不带引号）是该命令中的错字？-> 'glassfish.getCommandRunner().run("create-auth-realm", "--classname", "com.sun.enterprise.security.auth.realm.jdbc.JDBCRealm", "--property", realmProperties , 我的领域);'

# image - How can I save a photo into a folder with mdm zinc in flash?

> ID：15212484
> 
> 赞同：0
> 
> 时间：2013-03-04T22:35:54.227
> 
> 标签：image, actionscript-3, flash, mdm, mdm-zinc

So far I have this code which uploads the photo

```
mdm.Dialogs.BrowseFile.filterList = "Images|*.bmp;*.jpg;*.jpeg;*.png;*.gif";
function showPrompt(eventObj:MouseEvent):void {
var f:String = mdm.Dialogs.BrowseFile.show();
if (f!="" && f!=false) {
    l1.source = f;
    addChild(l1);
} 
```

**My question is how can I save the photo into another folder?**
for example something like:

```
mdm.FileSystem.BinaryFile.setDataBA();
mdm.FileSystem.BinaryFile.writeData("c:\\myimage.jpg"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T15:59:19.707

查看[`ImageAdv`MDM 的 Livedocs 中的课程](http://www.multidmedia.com/support/livedocs/4.0/class.php?action=class&class=ImageAdv)

`ImageAdv`包含和之类的方法`loadJpg`，`saveJpg`这可能会对您有所帮助。

# java - 在 play framework 2 中如何处理每个连接？

> ID：15212487
> 
> 赞同：4
> 
> 时间：2013-03-04T22:36:04.213
> 
> 标签：java, playframework-2.0, playframework-2.1

我得到了关于 play 2 如何构建的混合信息。它在网站上说它是建立在 akka 上的，这很可能意味着它每个连接都使用一个演员？它还说不要编写阻塞代码，因为它会阻止其他事件在不同的连接中触发（有点像它如何阻止 node.js 中的事件循环）。这怎么可能，因为阻止 1 个参与者的代码不会阻止另一个参与者的代码？这不就是使用actor 与node.js 之类的回调的重点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T22:24:07.067

当他们说 Play 建立在 Akka 之上时，他们的意思是框架而不是网络服务器。连接由作为嵌入式 Web 服务器的 JBoss Netty ( [http://netty.io/ ) 处理。](http://netty.io/)

连接可以绑定（或不绑定）到 Akka Actor 以提供异步响应，如下所述：[http ://www.playframework.com/documentation/2.1.0/JavaAkka](http://www.playframework.com/documentation/2.1.0/JavaAkka)

Actor 之间的通信是非阻塞的，因为它们发送消息（任何对象）并且不等待响应（它们不调用方法与不同的 Actor 通信）。

逻辑与此类似：

```
//somewhere in the code
ActorB.tell(new Request(...));
-----------------------------------------
ActorB:

    public void onReceive(Object msg) throws Exception {
        if (msg instanceof Request) {
            //process the request
            ActorA.tell(new Response(...))
        }
    }
----------------------------------------------------------------
ActorA:

    //ActorA is notified
    public void onReceive(Object msg) throws Exception {
        if (msg instanceof Response) {
            System.out.println("Response: " + msg)
        }
    } 
```

方法 tell() 发送消息并且不等待响应。

# sqlite - sqlite3 带引号导入

> ID：15212489
> 
> 赞同：9
> 
> 时间：2013-03-04T22:36:11.077
> 
> 标签：sqlite, tsv

我正在尝试导入在字段中包含引号的数据集合。它们目前是制表符分隔的。

根据我根据文档（[http://www.sqlite.org/cvstrac/wiki?p=ImportingFiles](http://www.sqlite.org/cvstrac/wiki?p=ImportingFiles)）的理解，sqlite shell 应该从字面上解释引号，我认为这意味着我不应该有问题。

我在这条线上遇到了一个问题：

```
1193782372  Lips Like Sugar (12" Mix)   Echo & the Bunnymen 80's/12": The Extended Collection   a76d9b04-51d9-4672-801f-356ab36dbae7    ccd4879c-5e88-4385-b131-bf65296bf245    1abb270a-e791-407f-a989-ff3ad6f8401c 
```

由于不清楚选项卡的位置，因此我将它们包含在以下行中。

```
1193782372\tLips Like Sugar (12" Mix)\tEcho & the Bunnymen\t80's/12": The Extended Collection\ta76d9b04-51d9-4672-801f-356ab36dbae7\tccd4879c-5e88-4385-b131-bf65296bf245\t1abb270a-e791-407f-a989-ff3ad6f8401c 
```

我正在尝试执行以下操作，但出现错误。

```
sqlite> .separator \t
sqlite> .import ./file.txt table
Error: ./file.txt line n: expected 7 columns of data but found 5 
```

它可以在没有双引号的情况下工作，但引号很重要。我似乎也无法逃脱引号`\"`。

如何正确导入我想要的数据？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T12:06:44.433

Sqlite3 的 .import 工具的行为就好像它的输入是逗号分隔值格式，即使 .separator 不是逗号。您可以通过将引号 (") 加倍 ("")*并*引用它们出现的整个字段来转义引号 (")。

通过以下过滤器运行测试数据后，我得到了一个干净的 .import：

```
sed 's/"/""/g;s/[^\t]*/"&"/g' file.txt >quoted.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:12:43.797

命令行工具在`sqlite3`它支持的导入格式方面不是很灵活。

你可以

*   更改导入文件以添加双引号并在字段中转义双引号；或者
*   将导入文件转换成一系列 SQL 语句：

    ```
    INSERT INTO MyTable VALUES(
        1193782372,
        'Lips Like Sugar (12" Mix)',
        'Echo & the Bunnymen 80''s/12": The Extended Collection',
        'a76d9b04-51d9-4672-801f-356ab36dbae7',
        'ccd4879c-5e88-4385-b131-bf65296bf245',
        '1abb270a-e791-407f-a989-ff3ad6f8401c'); 
    ```

    或者

*   编写自己的导入工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:14:22.803

您引用的网页是旧的（请注意 URL 的 cvstrac 部分，这是赠品；sqlite 现在使用化石，而不是 cvs）。该网页的较新版本在[这里](http://www.sqlite.org/sqlite.html)。

由于 SQLite 是公共领域软件，解决您的问题的一种方法是修复 sqlite 的 shell.c 以正确处理您的文件格式。问题出在第 1861 行

```
if( c=='"' ) inQuote = !inQuote; 
```

如果您不想要引号分隔，只需注释掉这一行。该行的目的是让您可以通过引用列在列中嵌入分隔符。

另一种方法是使用支持 SQLite 的数据库管理器；其中有很多，大多数都声称支持文件导入/导出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-07T09:23:01.390

要在不更改输入数据或 sqlite 源代码的情况下执行此操作，请使用 ascii 模式并将列分隔符设置为制表符，将行分隔符设置为 CRLF (windows) 或 "\n" (*nix)。

视窗：

```
sqlite> .mode ascii
sqlite> .separator "\t" "\r\n"
sqlite> .import ./file.txt table 
```

*尼克斯

```
sqlite> .mode ascii
sqlite> .separator "\t" "\n"
sqlite> .import ./file.txt table 
```

有关原因的解释，请参阅[我对这个问题的回答。](https://stackoverflow.com/questions/44604644/unescaped-character-when-importing-text-data-into-sqlite/64240761#64240761)

# random - 在Scheme中，你如何做概率？

> ID：15212492
> 
> 赞同：2
> 
> 时间：2013-03-04T22:36:24.133
> 
> 标签：random, scheme, probability

如果我有一个像 sub1 和一个列表这样的过程，如何将概率值应用于列表的每个元素？

像这样的东西：`(blahblah sub1 '(1 1 1 1) 0.5)`

我希望它以例如 0.5 的概率将 sub1 应用于每个元素。但是，我不知道该怎么做。我想我必须随机使用一些方法，但我不确定如何。帮助？

这就是我到目前为止所拥有的。它根本不起作用。

```
(define map-random
  (lambda (proc ls p)
    (map
      (lambda (x)
        (if (null? ls) '()
            (proc x (+ x (random p))))) ls))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:03:00.703

也许你打算写这样的东西：

```
(define map-random
  (lambda (proc ls p)
    (map (lambda (e)
           (if (<= (random) p)
               (proc e)
               e))
         ls))) 
```

请注意，`map`它负责遍历输入列表和构建输出列表，您只需决定如何处理每个元素 - 在这种情况下，这意味着是将给定过程应用于元素还是离开单独的元素取决于随机值 - 如果该值在给定的概率内，则应用该程序，如果不使用相同的元素。它按预期工作：

```
(map-random sub1 '(1 1 1 1) 0.5)
=> '(1 1 0 1) ; a possible output 
```

# php - 如果没有嵌套的 DIV，JQuery AJAX 将无法工作，为什么？

> ID：15212495
> 
> 赞同：0
> 
> 时间：2013-03-04T22:36:36.787
> 
> 标签：php, jquery, ajax

想象一下以下 index.php ：

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>

    <form id="MY_FORM" action="./index.php" method="get">
        <input name="var_name">
        <input type="submit">
    </form> 

    <!-- <div> -->
    <div id="MY_CONTENT">
        <?php
            var_dump( $_GET ); 
        ?>
    </div>
    <!-- </div> -->

    <script type="text/javascript">

        $('#MY_FORM').submit(function()
        {
            var form = $(this);
            $.get('./', form.serialize(), function(data)
            {
                var updated = $('#MY_CONTENT', data);
                $('#MY_CONTENT').replaceWith(updated);
            });
            return false;
        });

    </script>

</body>
</html> 
```

有一个简单的 AJAX 表单。提交此表单后，应使用 AJAX 刷新 MY_CONTENT（因此表单的 action="./index.php"）。问题：我发现代码只有在 MY_CONTENT div 包含在另一个 div 中时才有效。

我把

```
<!-- <div> -->
<!-- </div> --> 
```

在 MY_CONTENT 附近。这必须更改为 div 才能使脚本正常工作。
为什么必须将 MY_CONTENT 包装在 div 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:38:39.273

发生这种情况是因为`data`包含所有作为 head 和 body 标签的子元素，但不包含 head/body 本身。你可以通过使用摆脱包装器

```
var updated = $(data).filter("#MY_CONTENT") 
```

相反，因为在您摆脱包装器后，它是 body 标记的直接子代。

另一种解决方案（如 Fabrício Matté 所指出的）是仅在请求是 ajax 请求时才返回目标 html。

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && Strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    var_dump( $_GET );
}
else {
   ... rest of your page ... 
```

那么你可以做

```
$('#MY_CONTENT').html(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:39:45.467

代替

```
var updated = $('#MY_CONTENT', data);
$('#MY_CONTENT').replaceWith(updated); 
```

经过：

```
$('#MY_CONTENT').html(data); 
```

# sql - 是否可以在使用 SELECT 创建的命令上使用 Oracle EXECUTE IMMEDIATE？

> ID：15212502
> 
> 赞同：1
> 
> 时间：2013-03-04T22:37:00.853
> 
> 标签：sql, oracle

考虑一个具有大量过期用户帐户的 Oracle 11gR2 数据库。我想在不更改任何密码的情况下重新启用所有用户帐户。

这是一个 SQL 语句，用于创建`ALTER USER`可以执行以重新启用帐户的 SQL 语句字符串：

```
select listagg( cmds, ' ' ) within group ( order by rownum )
    as cmd
from (
    select
        'alter user "' || d.username || '"' ||
            ' identified by values ''' || u.password || '''' ||
            ' account unlock;'
    as
        cmds
    from
        dba_users d, sys.user$ u
    where
        d.user_id = u.user#
); 
```

此查询的结果是一个字符串，其中包含如下所示的条目：

`alter user "USERNAME" identified by values '1234567890ABCDEF' account unlock; ...`

我确信可以创建一个 PL/SQL 过程来将此查询的结果存储到一个变量中，然后调用`EXECUTE IMMEDIATE [var]`，但是是否可以通过一些 SQL 语法魔术来`EXECUTE IMMEDATE`简单地执行由`SELECT`语句创建的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:40:02.790

您不需要存储过程，可以使用匿名 PL/SQL 块：

```
DECLARE
   stmt varchar(5000);
   cursor get_users
   is
    select d.username, u.password
    from dba_users d
        join sys.user$ u d.user_id = u.user#
    where lock_date is not null;
   user_rec get_users%rowtype;

BEGIN
    FOR user_rec in get_users loop
    BEGIN
       stmt := 'alter user "' || user_rec.username || '"' ||
               ' identified by values ''' || user_rec.password || '''' || 
               ' account unlock';
       execute immediate stmt;
     EXCEPTION WHEN others THEN
        dbms_output.put_line('Error unlocking '||user_rec.username);
        dbms_output.put_line(SQLERRM);
     END;
   END LOOP;
END;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:01:41.997

像这样生成 SQL 的 SQL 有效，不知道它是否符合您的需求：

```
sqlplus -s user/pw@db
set heading off
set feedback off 
set pages 0
spool cmd.sql
select ...
spool off
@cmd.sql 
```

# css - Targeting Browsers in CSS

> ID：15212505
> 
> 赞同：1
> 
> 时间：2013-03-04T22:37:16.193
> 
> 标签：css, google-chrome, firefox, media-queries, targeting

I'm having a host of problems that I have managed to work around until now.

First, different browsers are responding to different media queries even though they are all being displayed on the same screen. I've managed to work around that problem but now I'm stuck. I have an image that is acting up in Chrome and Firefox. If I fix it in Chrome, it gets out of line in Firefox, if I fix it in Firefox, it breaks down in Chrome.

Right now it is broken in Firefox, since it is easier to try to fiddle with it with Firebug than Chrome. I have tried using vendor specific prefixes, targeting Firefox with Javascript, rewriting media queries--nothing works.

I've never heard of browser windows using different media queries on the same screen, and neither have any of the other folks I've asked. I'd appreciate any help. You can find the problem at www.rachelbrent.com/#about and if anybody looks at the CSS (it's a mess, I know) it's in the base.min.css file and the div in question is img_place_about.

Edit to clarify: It's my image in the "About" section (I'm having some other image issues in the slider up top too. The whole thing is a mess) As far as code goes this is the HTML

```
<div class="fullWidth darkStyle" >
  <div class="container" >
    <div class="separator_mini"></div>
    <div class="nine columns" >
      <div class="mini_description">
        The first time I ever saw HTML I was in middle school and I was trying to figure out how to make a trail of planets follow a cursor around a page about the solar system. My main reference was a Geocities page that used Comic Sans liberally and catered to the Lisa Frank crowd. Yikes.</br>
        <div class="separator_mini"></div>
        Fast-forward ten years. I’ve earned an undergraduate degree from the University of Georgia in Advertising/New Media and I’ve almost completed my master’s in Interactive Media from Elon University. I’ll graduate this May, and I’m ready to take on the world. </br>
        <div class="separator_mini"></div>
        I’ve been lucky to have a wide range of digital communications experience, but I like to think of myself as a design minded strategist.
        <div class="img_place_about" >
          <img src="images/about_image1.jpg" class="scale-img "  >
          <div class="overlay_about social" >
            <ul class="social_bookmarks" >
              <li class="twitter_white noMargin"><a href="http://twitter.com/rbrent" target="_blank"></a></li>
              <li class="facebook_white noMargin"><a href="http://www.facebook.com/rachel.brent" target="_blank"></a></li>
              <li class="gplus_white noMargin"><a href="https://plus.google.com/118253125375848607885/posts" target="_blank"></a></li>
              <li class="linkedin_white noMargin"><a href="http://www.linkedin.com/in/rachelbrent" target="_blank"></a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="sixteen columns" >
      <div class="mini_description">
        I combine my educational background with my work history in public relations, project and social media management, and event coordination to make sure every project gets the most out of its digital content. The best strategy works in concert with good design though, and I always keep that in mind whether working with a team or leading one.  </br>
        <div class="separator_mini"></div>
        I get a thrill from outside the box problem solving and if you’re interested to hear more about that, I’d love to chat. Scroll over my picture to connect now, or check out the rest of my work and drop me a line at the end. Either way, I can’t wait to hear from you. </br>
        <hr>
      </div>
    </div> 
```

And here is the CSS

Original:

```
.img_place_about {
  display: inline;
  float: right;
  margin-left: 48%;
  margin-top: -35;
  padding: 0;
  position: absolute;
} 
```

Targeting Firefox:

```
@-moz-document url-prefix() {
  .img_place_about {    
    display: inline;
    float: right;
    margin-left: 17%;
    margin-top: -25%;
    -moz-margin-top: -25%;
    padding: 5px;
    position: absolute;
    width: 40%;
  } 
} 
```

Problem Code:

```
.img_place_about {
  display: inline;
  float: right;
  margin-left: 17%;
  margin-top: -40%;
  -moz-margin-top: -25%;
  padding: 5px;
  position: absolute; 
```

And what the code should be for Firefox:

```
.img_place_about {    
  display: inline;
  float: right;
  margin-left: 17%;
  margin-top: -25%;
  -moz-margin-top: -25%;
  padding: 5px;
  position: absolute;
  width: 40%;
} 
```

Hopefully that helps. I know it is a rambling mess.

# jquery - jquery if else 语句不起作用

> ID：15212506
> 
> 赞同：1
> 
> 时间：2013-03-04T22:37:17.050
> 
> 标签：jquery, drupal, login

我一直在尝试不同的方法来使 div 在切换 div 可见时添加自身，并在不可见时删除。但是 else 不会被读取，无论我怎么说，else 语句都不会被读取。

这就是我现在所拥有的

```
if ($('#toboggan-login').css('display') == 'none'){
    $("#art-main").append('<div class="outer-login"></div>');
} else{
    $("#art-main").find(".outer-login").removeClass();
} 
```

我也尝试过 :visible 和 counter :hidden 但不管它是如何工作的，如果我无法读取语句的 else 部分，我将无法获得预期的效果。

这是我正在开发的 drupal 6 网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:19:43.690

您可能需要将此代码与“#toboggan-login”的切换事件连接起来。就像是：

```
$('#toboggan-login').toggle('slow', function() {
  if ($(this).css('display') == 'none'){
    $("#art-main").append('<div class="outer-login"></div>');
  } else{
    $("#art-main").find(".outer-login").remove();
  }
}); 
```

# gallery - upon onclose colorbox gallery reopen previous original colorbox , how?

> ID：15212507
> 
> 赞同：1
> 
> 时间：2013-03-04T22:37:21.480
> 
> 标签：gallery, colorbox, parent

I have Page A ([page A](http://www.hilariousworld.com/animalplus.ca/JaiperduTemplateTEST.html) ) and page B ( [page B](http://www.hilariousworld.com/animalplus.ca/FicheAnimaleTemplateTEST.html) ) which is to be opened by page A .

What I'm trying to accomplish is to have page B start a colorbox gallery and when the colorbox gallery is closed that page B colorbox come back up.

**Problem 1**: If you click on a thumbnail from page B (colorboxed) a colorbox photo shows up but the gallery is not functional.

**Problem 2**: If you close the gallery, page B doesn't come back. Instead you're brought back to page A.

*Page A has the following code to reopen page B upon closing of colorbox gallery:*

```
/* _photourl is the picture url,   */
/* _photorel is the group name,    */
/* _parenturl is the url of page B */

function showColorboxGallery(_photourl, _photorel, _parenturl) {
   $.colorbox(
         {
            scrolling: false,
            href: _photourl,
            rel: _photorel,

            onClosed: function () {
            parent.$.colorbox({
                href: _parenturl, 
                iframe: true, 
                width: 960, 
                height: 418
            });
                return;
            }
         }
   );
   return;
} 
```

Page B uses the following to open a gallery upon clicking on any thumbnail:

```
onclick="parent.showColorboxGallery('http://www.abc.com/photo.jpg', 
                                    'photosanimal', 
                                    'Full_URL_of_HTML_Page_B')" 
```

What am I missing or doing wrong? Any suggestion?

# mysql - 简单的mysql函数帮助：如何存储一个函数，用它来操作数据并将数据写入新表

> ID：15212511
> 
> 赞同：3
> 
> 时间：2013-03-04T22:37:53.037
> 
> 标签：mysql, function, call

我是 MySQL 新手，需要一些有关 MySQL 功能的帮助。假设我有一些存储在 MySQL 中的数据，我想将它们带入一个函数，做一些事情，然后将结果输出到另一个表。

假设表“数据”有 x 列和 y 列。我希望我的函数获取一对 x,y，如果 x 或 y 不等于 0，则将 x 和 y 相加并存储在另一个名为 result 的表中？

我知道如何存储我已经完成的功能：

```
DELIMITER $$    
CREATE FUNCTION adder(x,y)
  IF x = 0 OR y=0 THEN
      RETURN 0;
  END IF;
  RETURN x+y; END $$
DELIMITER ; 
```

我不知道如何在我的 MySQL 语句中使用它并将结果写入新表。理想情况下，这将查看表数据的所有行并将结果写入新表。非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:41:08.240

使用此查询

```
INSERT INTO Result SELECT adder(x, y) from Data; 
```

`Result`您要在其中输入数据的表的名称在哪里。并且`Data`是您要添加其列的表。

这是小提琴 - [http://www.sqlfiddle.com/#!2/c0a2d/1](http://www.sqlfiddle.com/#!2/c0a2d/1)

# database - 如何正确设计 USER 表

> ID：15212517
> 
> 赞同：0
> 
> 时间：2013-03-04T22:38:15.003
> 
> 标签：database, hibernate

我已经开始设计一个数据库，因为我是它的初学者，所以我想问一下在我的案例中最好的设计方式是什么。

我有一个数据库，它应该存储有关 Web 应用程序用户的详细信息。但是，用户分为两个（将来可能是三个）组，比如说“客户”和“工人”。两个组都有共同的信息（电子邮件、登录名、密码等）和一些组独有的信息。在这种情况下，我想知道哪种解决方案更好：使用重复列（“LOGIN”、“PASSWORD”）创建单独的表“CUSTOMER”和“WORKER”，或者将公共信息标记到一个表“USER”中并存储“USER_ID”在“客户”和“工人”栏中。

第二种情况，应该如何使用hibernate 3.x注解来解决呢？因为它不是严格的 OneToOne 映射。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:53:38.143

我希望有一个用户表和一个具有多对多关系的用户角色表（“客户”、“工人”等）。

# jakarta-ee - Java EE 6 集群集合

> ID：15212526
> 
> 赞同：2
> 
> 时间：2013-03-04T22:38:48.310
> 
> 标签：jakarta-ee, caching, collections, cluster-computing

我目前正在开发一个 Java EE 应用程序（JSF、CDI、EJB、JPA），它应该在集群环境中工作。

我几乎没有用作缓存的地图和列表（集合 API），还没有准备好分发。

我在一篇文章中读到有一个包含集合 API 的框架，但我无法通过 Google 找到该产品。

有什么想法适合这个目的的产品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:36:00.497

经过大量谷歌搜索后，我找到了该产品

[榛树](http://www.hazelcast.com/)

这条[推](https://twitter.com/harkje/status/299507849359417344)文让我朝着正确的方向前进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:51:44.060

恕我直言，你走错路了。如果您不使用 Collections.synchronizedXXX() 自己做集合类，则集合类不会同步，但如果您想跨集群共享缓存，即使这样也不会完成这项工作。
如果你这样走，我会看看 ConcurrentHashMap。无论如何，在 Collection 类中维护缓存很少是一个好主意，你有一些好的框架，比如 ehcache 或 jbosscache 来为你完成这项工作。

如果要缓存的对象是实体，则最好将缓存管理委托给 ORM。如果您希望跨集群共享缓存（这也不是一个好主意，在这种情况下使用数据库通常是正确的方法），您可以使用一些供应商特定的解决方案，例如 JBOSS 上的 HASingleton。

希望我能帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:08:04.950

有很多支持集群的缓存框架。这是我的选择

*   来自 Terracota 的[Ehcache](http://ehcache.org/)
*   [操作系统缓存](http://java-source.net/open-source/cache-solutions/oscache)
*   [Java缓存系统](http://java-source.net/open-source/cache-solutions/jcache)

好吧，在我所有的项目中，我都使用 EHCACHE，它很稳定，有很好的文档并且被广泛使用。当您遇到缓存设置问题或其他问题时，这会派上用场，很有可能有人会遇到类似的问题。

以下链接中有更多可用的 [Open Caching frameworks in Java](http://java-source.net/open-source/cache-solutions)

# angularjs - Select2标记输入失去价值AngularJS

> ID：15212530
> 
> 赞同：2
> 
> 时间：2013-03-04T22:38:56.680
> 
> 标签：angularjs, jquery-select2

我有一个用 切换视图的应用程序`ng-switch`，而在切换视图时，我的标记输入特别丢失了它的值并落入了它的对象字符串，我的其他输入都没有遇到这个问题：

![在此处输入图像描述](../Images/d79df39b1df5cd26f895fba3d20c0dbc.png)

**HTML：**

```
<input ui-select2="version2" 
        id="keywordsGlobal" 
        name="keywordsGlobal" 
        class="region-keywords input-xlarge" 
        data-ng-model="data.keywordsGlobal" 
        required-multiple /> 
```

**JSON：**

```
[  
   {  
      "id":"[object Object]",
      "text":"[object Object]"
   }
] 
```

有没有办法专门防止这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T22:50:12.777

我在使用 ui-select2 时遇到了各种问题，只写了一个简单的自定义指令，一切正常。如果其他人在 angular、select2 和标记方面遇到问题，我建议尝试一下。对我有用的是这样的模板：

```
<input type="text" tag-list ng-model="item.tags"> 
```

请注意， item.tags 是一个 JavaScript 数组，而不是一串逗号分隔的标签或类似的东西。与自定义指令一起使用（不使用 ui-select2，只使用 select2）：

```
app.directive('tagList', function($timeout) {
  return {
    require: 'ngModel',
    restrict: 'A',
    link: function(scope, element, attrs, controller) {
      scope.$watch(attrs.ngModel, function(value) {
        if (value !== undefined) {
          element.select2('val', value);
        }
      });

      element.bind('change', function() {
        var value = element.select2('val');
        controller.$setViewValue(value);
      });

      $timeout(function() {
        element.select2({
          tags: []
        });
      });
    }
  };
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T00:24:54.047

在随后加载选择时，数据似乎没有正确加载。使用`initSelect()`并手动将数据重新分配给选择似乎可以解决问题。

看看[http://jsfiddle.net/qdrjk/111/](http://jsfiddle.net/qdrjk/111/)

```
$scope.version2 = {
    tags : null,
    initSelection: function(elem, callback) {
        console.log(elem);
        var data = $scope.data.keywordsGlobal;
        callback(data);
    },
    createSearchChoice : function(term, data) {
        if ($(data).filter(function() {
            return this.text.localeCompare(term) === 0;
        }).length === 0) {
            return {
                id : term,
                text : term
            };
        }
    }
} 
```

# java - 没有强制转换的Java平方根整数运算？

> ID：15212533
> 
> 赞同：15
> 
> 时间：2013-03-04T22:39:16.243
> 
> 标签：java

该`Math.sqrt()`函数将双精度数作为参数并返回双精度数。我正在使用一个在所有情况下都使用完美方形网格的程序，我需要以整数形式获得平方根。这样做的唯一方法是将参数转换为 an`int`然后返回一个`int`-casted double 吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-04T22:50:46.887

铸造技术比乍看起来要好得多。

从 int 到 double 的转换是准确的。

对于正常的正数，Math.sqrt 指定返回“最接近参数值的真正数学平方根的双精度值”。如果输入是完美平方 int，则结果将是 int 范围内的整数值 double。

同样，将该整数值 double 转换回 int 也是精确的。

最终效果是强制转换技术不会在您的情况下引入任何舍入误差。

如果您的程序可以从使用 Guava intMath API 中受益，您可以使用它来计算平方根，但我不会为了避免强制转换而添加对 API 的依赖。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-04T22:41:51.707

您始终可以使用 Google Guava IntMath [API](http://docs.guava-libraries.googlecode.com/git-history/v11.0/javadoc/com/google/common/math/IntMath.html)。

```
final int sqrtX = IntMath.sqrt(x, RoundingMode.HALF_EVEN); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T22:57:25.340

如果您只计算完美平方的平方根，您是否考虑过将它们预先计算到表格中的选项？整数完全平方的数量是有限的，大多数 JVM 可以毫不费力地同时保存所有这些。如果空间非常宝贵，我相信在这个方向上会有其他选择。

虽然有 65535 个，但如果这太多了，你可以存储四分之一，然后计算介于两者之间的那些。毕竟 (x+1)^2 = (x+1)(x+1) = x^2 + 2x + 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-14T08:46:45.983

也许有人感兴趣，找到了一个链接：

[http://atoms.alife.co.uk/sqrt/index.html](http://atoms.alife.co.uk/sqrt/index.html)

```
/*
ATOMS
Fast integer square roots in Java

Here are several fast integer square root methods, written in Java, including:
sqrt(x) agrees completely with (int)(java.lang.Math.sqrt(x)) for x < 2147483648 (i.e. 2^31), while executing about three times faster than it1.

fast_sqrt(x) agrees completely with (int)(java.lang.Math.sqrt(x)) for x < 289 (and provides a reasonable approximation thereafter), while executing about five times faster than it1.

SquareRoot.java - fast integer square root class;
SquareRootTest.java - basic speed and accuracy test class.
Thanks to Paul Hsieh's square root page for the accurate algorithm.
This code has been placed in the public domain.

Can you improve on the speed or accuracy of these methods (without chewing an "unreasonable" quantity of cache with a huge look-up table)?

If so, drop us a line, and hopefully we'll put your name up in lights.

[1: your mileage may vary]

tim@tt1.org | http://atoms.org.uk/
*/

/*
 * Integer Square Root function
 * Contributors include Arne Steinarson for the basic approximation idea, Dann 
 * Corbit and Mathew Hendry for the first cut at the algorithm, Lawrence Kirby 
 * for the rearrangement, improvments and range optimization, Paul Hsieh 
 * for the round-then-adjust idea, Tim Tyler, for the Java port
 * and Jeff Lawson for a bug-fix and some code to improve accuracy.
 * 
 * 
 * v0.02 - 2003/09/07
 */

/**
 * Faster replacements for (int)(java.lang.Math.sqrt(integer))
 */
public class SquareRoot {
  final static int[] table = {
     0,    16,  22,  27,  32,  35,  39,  42,  45,  48,  50,  53,  55,  57,
     59,   61,  64,  65,  67,  69,  71,  73,  75,  76,  78,  80,  81,  83,
     84,   86,  87,  89,  90,  91,  93,  94,  96,  97,  98,  99, 101, 102,
     103, 104, 106, 107, 108, 109, 110, 112, 113, 114, 115, 116, 117, 118,
     119, 120, 121, 122, 123, 124, 125, 126, 128, 128, 129, 130, 131, 132,
     133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 144, 145,
     146, 147, 148, 149, 150, 150, 151, 152, 153, 154, 155, 155, 156, 157,
     158, 159, 160, 160, 161, 162, 163, 163, 164, 165, 166, 167, 167, 168,
     169, 170, 170, 171, 172, 173, 173, 174, 175, 176, 176, 177, 178, 178,
     179, 180, 181, 181, 182, 183, 183, 184, 185, 185, 186, 187, 187, 188,
     189, 189, 190, 191, 192, 192, 193, 193, 194, 195, 195, 196, 197, 197,
     198, 199, 199, 200, 201, 201, 202, 203, 203, 204, 204, 205, 206, 206,
     207, 208, 208, 209, 209, 210, 211, 211, 212, 212, 213, 214, 214, 215,
     215, 216, 217, 217, 218, 218, 219, 219, 220, 221, 221, 222, 222, 223,
     224, 224, 225, 225, 226, 226, 227, 227, 228, 229, 229, 230, 230, 231,
     231, 232, 232, 233, 234, 234, 235, 235, 236, 236, 237, 237, 238, 238,
     239, 240, 240, 241, 241, 242, 242, 243, 243, 244, 244, 245, 245, 246,
     246, 247, 247, 248, 248, 249, 249, 250, 250, 251, 251, 252, 252, 253,
     253, 254, 254, 255
  };

  /**
   * A faster replacement for (int)(java.lang.Math.sqrt(x)).  Completely accurate for x < 2147483648 (i.e. 2^31)...
   */
  static int sqrt(int x) {
    int xn;

    if (x >= 0x10000) {
      if (x >= 0x1000000) {
        if (x >= 0x10000000) {
          if (x >= 0x40000000) {
            xn = table[x >> 24] << 8;
          } else {
            xn = table[x >> 22] << 7;
          }
        } else {
          if (x >= 0x4000000) {
            xn = table[x >> 20] << 6;
          } else {
            xn = table[x >> 18] << 5;
          }
        }

        xn = (xn + 1 + (x / xn)) >> 1;
        xn = (xn + 1 + (x / xn)) >> 1;
        return ((xn * xn) > x) ? --xn : xn;
      } else {
        if (x >= 0x100000) {
          if (x >= 0x400000) {
            xn = table[x >> 16] << 4;
          } else {
            xn = table[x >> 14] << 3;
          }
        } else {
          if (x >= 0x40000) {
            xn = table[x >> 12] << 2;
          } else {
            xn = table[x >> 10] << 1;
          }
        }

        xn = (xn + 1 + (x / xn)) >> 1;

        return ((xn * xn) > x) ? --xn : xn;
      }
    } else {
      if (x >= 0x100) {
        if (x >= 0x1000) {
          if (x >= 0x4000) {
            xn = (table[x >> 8]) + 1;
          } else {
            xn = (table[x >> 6] >> 1) + 1;
          }
        } else {
          if (x >= 0x400) {
            xn = (table[x >> 4] >> 2) + 1;
          } else {
            xn = (table[x >> 2] >> 3) + 1;
          }
        }

        return ((xn * xn) > x) ? --xn : xn;
      } else {
        if (x >= 0) {
          return table[x] >> 4;
        }
      }
    }

    illegalArgument();
    return -1;
  }

  /**
   * A faster replacement for (int)(java.lang.Math.sqrt(x)).  Completely accurate for x < 2147483648 (i.e. 2^31)...
   * Adjusted to more closely approximate 
   * "(int)(java.lang.Math.sqrt(x) + 0.5)"
   * by Jeff Lawson.
   */
  static int accurateSqrt(int x) {
    int xn;

    if (x >= 0x10000) {
      if (x >= 0x1000000) {
        if (x >= 0x10000000) {
          if (x >= 0x40000000) {
            xn = table[x >> 24] << 8;
          } else {
            xn = table[x >> 22] << 7;
          }
        } else {
          if (x >= 0x4000000) {
            xn = table[x >> 20] << 6;
          } else {
            xn = table[x >> 18] << 5;
          }
        }

        xn = (xn + 1 + (x / xn)) >> 1;
        xn = (xn + 1 + (x / xn)) >> 1;
        return adjustment(x, xn);
      } else {
        if (x >= 0x100000) {
          if (x >= 0x400000) {
            xn = table[x >> 16] << 4;
          } else {
            xn = table[x >> 14] << 3;
          }
        } else {
          if (x >= 0x40000) {
            xn = table[x >> 12] << 2;
          } else {
            xn = table[x >> 10] << 1;
          }
        }

        xn = (xn + 1 + (x / xn)) >> 1;

         return adjustment(x, xn);
      }
    } else {
      if (x >= 0x100) {
        if (x >= 0x1000) {
          if (x >= 0x4000) {
            xn = (table[x >> 8]) + 1;
          } else {
            xn = (table[x >> 6] >> 1) + 1;
          }
        } else {
          if (x >= 0x400) {
            xn = (table[x >> 4] >> 2) + 1;
          } else {
            xn = (table[x >> 2] >> 3) + 1;
          }
        }

        return adjustment(x, xn);
      } else {
        if (x >= 0) {
          return adjustment(x, table[x] >> 4);
        }
      }
    }

    illegalArgument();
    return -1;
  }

  private static int adjustment(int x, int xn) {
    // Added by Jeff Lawson:
    // need to test:
    //   if  |xn * xn - x|  >  |x - (xn-1) * (xn-1)|  then xn-1 is more accurate
    //   if  |xn * xn - x|  >  |(xn+1) * (xn+1) - x|  then xn+1 is more accurate
    // or, for all cases except x == 0:
    //    if  |xn * xn - x|  >  x - xn * xn + 2 * xn - 1 then xn-1 is more accurate
    //    if  |xn * xn - x|  >  xn * xn + 2 * xn + 1 - x then xn+1 is more accurate
    int xn2 = xn * xn;

    // |xn * xn - x|
    int comparitor0 = xn2 - x;
    if (comparitor0 < 0) {
      comparitor0 = -comparitor0;
    }

    int twice_xn = xn << 1;

    // |x - (xn-1) * (xn-1)|
    int comparitor1 = x - xn2 + twice_xn - 1;
    if (comparitor1 < 0) { // need to correct for x == 0 case?
      comparitor1 = -comparitor1; // only gets here when x == 0
    }

    // |(xn+1) * (xn+1) - x|
    int comparitor2 = xn2 + twice_xn + 1 - x;

    if (comparitor0 > comparitor1) {
      return (comparitor1 > comparitor2) ? ++xn : --xn;
    }

    return (comparitor0 > comparitor2) ? ++xn : xn;
  }

  /**
  * A *much* faster replacement for (int)(java.lang.Math.sqrt(x)).  Completely accurate for x < 289...
  */
  static int fastSqrt(int x) {
    if (x >= 0x10000) {
      if (x >= 0x1000000) {
        if (x >= 0x10000000) {
          if (x >= 0x40000000) {
            return (table[x >> 24] << 8);
          } else {
            return (table[x >> 22] << 7);
          }
        } else if (x >= 0x4000000) {
          return (table[x >> 20] << 6);
        } else {
          return (table[x >> 18] << 5);
        }
      } else if (x >= 0x100000) {
        if (x >= 0x400000) {
          return (table[x >> 16] << 4);
        } else {
          return (table[x >> 14] << 3);
        }
      } else if (x >= 0x40000) {
        return (table[x >> 12] << 2);
      } else {
        return (table[x >> 10] << 1);
      }
    } else if (x >= 0x100) {
      if (x >= 0x1000) {
        if (x >= 0x4000) {
          return (table[x >> 8]);
        } else {
          return (table[x >> 6] >> 1);
        }
      } else if (x >= 0x400) {
        return (table[x >> 4] >> 2);
      } else {
        return (table[x >> 2] >> 3);
      }
    } else if (x >= 0) {
      return table[x] >> 4;
    }
    illegalArgument();
    return -1;
  }

  private static void illegalArgument() {
    throw new IllegalArgumentException("Attemt to take the square root of negative number");
  }

  /** From http://research.microsoft.com/~hollasch/cgindex/math/introot.html
     * where it is presented by Ben Discoe (rodent@netcom.COM)
     * Not terribly speedy...
     */

  /*
     static int unrolled_sqrt(int x) {
        int v;
        int t = 1<<30;
        int r = 0;
        int s;

        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;} t >>= 2;
        s = t + r; r>>= 1; 
        if (s <= x) { x -= s; r |= t;}

        return r;
     }
  */

  /**
   * Mark Borgerding's algorithm...
   * Not terribly speedy...
   */

  /*
     static int mborg_sqrt(int val) {
        int guess=0;
        int bit = 1 << 15;
        do {
           guess ^= bit;  
           // check to see if we can set this bit without going over sqrt(val)...
           if (guess * guess > val )
              guess ^= bit;  // it was too much, unset the bit...
        } while ((bit >>= 1) != 0);

        return guess;
     }
    */

  /** 
   * Taken from http://www.jjj.de/isqrt.cc
   * Code not tested well...
   * Attributed to: http://www.tu-chemnitz.de/~arndt/joerg.html / email: arndt@physik.tu-chemnitz.de
   * Slow.
   */

  /*
     final static int BITS = 32;
     final static int NN = 0;  // range: 0...BITSPERLONG/2

     final static int test_sqrt(int x) {
        int i;
        int a = 0;                   // accumulator...
        int e = 0;                   // trial product...
        int r;

        r=0;                         // remainder...

        for (i=0; i < (BITS/2) + NN; i++)
        {
           r <<= 2;
           r +=  (x >> (BITS - 2));
           x <<= 2;

           a <<= 1;
           e = (a << 1)+1;

           if(r >= e)
           {
              r -= e;
              a++;
           }
        }

        return a;
     }
  */

  /*
  // Totally hopeless performance...
     static int test_sqrt(int n) {
        float r = 2.0F;
        float s = 0.0F;
        for(; r < (float)n / r; r *= 2.0F);
        for(s = (r + (float)n / r) / 2.0F; r - s > 1.0F; s = (r + (float)n / r) / 2.0F) {
           r = s;
        }

        return (int)s;
     }
    */
}

/*
 * Test Integer Square Root function
 */

public class SquareRootTest {
  public static void main(String args[]) {
    int x = -2;
    debug("" + (x == -2L));

    // perform timings...
    //testSpeed();

    // accuracy test...
    testAccuracy();

    // hang...
    do {} while (true);
  }

  static void testSpeed() {
    int i;
    long newtime;
    long oldtime;
    int N = 10000000;
    int mask = (1 << 16) - 1;

    // SquareRoot.fast_sqrt()...
    oldtime = System.currentTimeMillis();

    for (i = 0; i < N; i++) {
      int temp = SquareRoot.fastSqrt(i & mask);
    }

    newtime = System.currentTimeMillis();
    debug("SquareRoot.fast_sqrt:" + (newtime - oldtime));

    // SquareRoot.sqrt()...
    oldtime = System.currentTimeMillis();

    for (i = 0; i < N; i++) {
     int temp = SquareRoot.sqrt(i & mask);
    }

    newtime = System.currentTimeMillis();
    debug("SquareRoot.sqrt:" + (newtime - oldtime));

    /*
       // SquareRoot.mborg_sqrt()...
       oldtime = System.currentTimeMillis();

       for (i = 0; i < N; i++) {
          temp = SquareRoot.mborg_sqrt(i & mask);
       }

       newtime = System.currentTimeMillis();
       debug("SquareRoot.mborg_sqrt:" + (newtime - oldtime));

       // SquareRoot.test_sqrt()...
       oldtime = System.currentTimeMillis();

       for (i = 0; i < N; i++) {
          temp = SquareRoot.test_sqrt(i & mask);
       }

       newtime = System.currentTimeMillis();
       debug("SquareRoot.test_sqrt:" + (newtime - oldtime));
    */

    // java.lang.Math.sqrt()...
    oldtime = System.currentTimeMillis();

    for (i = 0; i < N; i++) {
     int temp = (int) (java.lang.Math.sqrt(i & mask));
    }

    newtime = System.currentTimeMillis();
    debug("java.lang.Math.sqrt:" + (newtime - oldtime));
  }

  static void testAccuracy() {
    int i;
    int a;
    int b;
    int c;
    int d;
    int e;
    int start = 0;
    int last_wrong_value = 0;

    for (i = start; ; i++) {
      a = (int) (java.lang.Math.sqrt(i));
      b = (int) (java.lang.Math.sqrt(i) + 0.5);
      c = SquareRoot.sqrt(i);
      d = SquareRoot.fastSqrt(i);
      e = SquareRoot.accurateSqrt(i);
      // e = SquareRoot.mborg_sqrt(i);
      // f = SquareRoot.test_sqrt(i);

      if (b != e) {
        //if (a > (last_wrong_value * 1.05)) { // don't print too many wrong values - just a sample...
          last_wrong_value = a;
          debug("N:" + i + " - Math.sqrt:" + a + " - Math.sqrt+:" + b + " - accurateSqrt:" + e + " - sqrt:" + c);
        }
      //}
    }
  }

  final static void debug(String o) {
    System.out.println(o);
  }
} 
```

; ;

# php - 如何为谷歌地图创建可拖动的自定义标记列表

> ID：15212542
> 
> 赞同：0
> 
> 时间：2013-03-04T22:39:47.183
> 
> 标签：php, javascript, mysql, google-maps, google-maps-api-3

好吧，自从我访问 StackOverflow 的非常有用的世界以来已经有一段时间了，但我又回来了另一个问题，以帮助我尝试做比我目前能够做的更多的事情。

我想在我的一个网站上放一张谷歌地图，我希望它在地图的一侧有一个自定义标记列表，该网站的访问者可以将其拖到地图上以识别各种功能 -例如，假设该列表具有商店、房屋和办公室的自定义标记。访问者将适当的标记拖到地图上要素所在的位置。他们可能想要拖动同一自定义标记的多个副本（例如许多商店），因此在用户将标记拖到地图后，该标记必须重新出现在列表中。当用户放下标记时，他们应该看到一个信息框，询问用户更多信息，然后提示他们保存该标记，以便当其他人访问时他们也可以看到该功能（但不能更改它）。

所以这是最终目标，我知道这是一项艰巨的任务，但如果有人能指出我作为 10 岁首发的方向，我将不胜感激。

非常感谢，

抢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:09:51.673

我创建了一个带有自定义可拖动标记的示例。

更具体地说，它包含以下标记类型：

*   停車處
*   信息
*   图书馆

pointsOfInterest 数组包含按下 Add Some Markers 链接时显示的标记。

```
<!doctype html>
<html lang="en">

    <head>
        <title>Google Maps</title>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en">

        </script>
        <script type="text/javascript">
            // points of interest
            var pointsOfInterest = [
                    ['Chicago Parking', 41.850033, -87.6500523, 'parking'],
                    ['Illinois Library', 40.797177, -89.406738, 'library'],
                    ['Detroit Info', 42.302284,-83.231215, 'info']
                ],
                // map initial center position
                demoCenter = new google.maps.LatLng(42, -87),
                map;

            // initialize the map
            function initialize() {
                map = new google.maps.Map(document.getElementById('map_canvas'), {
                    zoom: 7,
                    center: demoCenter,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                });
            }

            // some standard icons for google markers
            var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
            var icons = {
                parking: {
                    icon: iconBase + 'parking_lot_maps.png',
                    shadow: iconBase + 'parking_lot_maps.shadow.png'
                },
                library: {
                    icon: iconBase + 'library_maps.png',
                    shadow: iconBase + 'library_maps.shadow.png'
                },
                info: {
                    icon: iconBase + 'info-i_maps.png',
                    shadow: iconBase + 'info-i_maps.shadow.png'
                }
            };

            // create draggable marker and add in map
            function createMarker(feature) {
                var marker = new google.maps.Marker({
                    position: feature.position,
                    icon: icons[feature.type].icon,
                    shadow: {
                        url: icons[feature.type].shadow,
                        anchor: new google.maps.Point(16, 34)
                    },
                    draggable: true,
                    map: map
                });
                return marker;
            }

            // add the markers included inside the pointsOfInterest array
            function addMarkers() {
                var marker,
                i,
                infowindow = new google.maps.InfoWindow();

                for (i = 0; i < pointsOfInterest.length; i++) {

                    var feature = new Object();
                    // set type
                    feature.type = pointsOfInterest[i][3];
                    // set position
                    feature.position = new google.maps.LatLng(pointsOfInterest[i][1], pointsOfInterest[i][2]);
                    // create the marker
                    var marker = createMarker(feature);

                    // add a listener to do something on marker click
                    google.maps.event.addListener(marker, 'click', (function (marker, i) {
                        return function () {
                            infowindow.setContent(pointsOfInterest[i][0]);
                            infowindow.open(map, marker);
                        }
                    })(marker, i));
                }
            }

            $(document).ready(function () {
                initialize();
            });

            $(document).on('click', '.add-markers', function (e) {
                e.preventDefault();
                addMarkers();
            });
        </script>
    </head>

    <body>
        <div id="basic-map">
            <div id="map_canvas" style="height:350px;"></div>
            <a href="#" class="add-markers">Add Some Markers</a>
        </div>
    </body>

</html> 
```

我希望这有帮助。

# javascript - 如何让 HTML 搜索框中的单词在关注 iOS 时自行删除

> ID：15212551
> 
> 赞同：0
> 
> 时间：2013-03-04T22:40:34.713
> 
> 标签：javascript, html

我已经在 Google 上搜索了一下，但由于它的特殊性，搜索起来有点困难。

我的网站上有一个 HTML 搜索框（使用简单的 HTML 表单/表格制作）。我想在文本框中添加“搜索”一词以使其看起来更好（而不是将其放在搜索框的左侧）。我还在页面加载时将焦点设置到该搜索框，因此一旦您加载页面，您的光标就会放在该文本框内。

现在，这是桌面操作系统上的行为，但在 iOS 上，页面不会在内部加载光标，因此不会自动选择文本。

我想知道的是如何在点击搜索框时让“搜索”文本自行删除。

同样，如果这是重复的帖子，我提前道歉，但我无法通过搜索找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:45:59.860

您应该编写一个函数来调用页面加载，像这样`onload`在`<body>`标签中使用..

把这个放在你的某个地方`<head>`

```
<script>

  function focusOnTextBox(){

    //Get the textbox element
    var textBox = document.getElementById('moviesearchinput');

    //Focus on the textBox.
    textBox.focus();

    //Empty the value of the textbox.
    textBox.value = "";

  }

</script> 
```

然后将您的开始`<body>`标签更改为如下所示

```
<body onload="focusOnTextBox();"> 
```

这是一个 JSFiddle 来演示这个工作 - [http://jsfiddle.net/kp5br/](http://jsfiddle.net/kp5br/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:53:22.660

我认为最简单的方法是使用 CSS 使文本变亮和变灰，并将其放置在文本框的后面。然后你可以使用 javascript 来隐藏文本。

谢谢，

最大</p>

# php - 可以在 PHP 中重现的带有 jQ uery 的唯一哈希

> ID：15212552
> 
> 赞同：0
> 
> 时间：2013-03-04T22:40:39.850
> 
> 标签：php, jquery, equivalence

我正在使用一个脚本，我需要使用 jQuery 创建一个**独特的**Hash，我将能够类似于 PHP 函数`uniqid()`。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:43:40.660

我认为你需要的是 jquery md5 插件，它将创建一个字符串的 md5 哈希，它应该为你给它的任何字符串提供一个唯一的哈希。查看[https://github.com/placemarker/jQuery-MD5](https://github.com/placemarker/jQuery-MD5)

然后查看[http://php.net/manual/en/function.md5.php](http://php.net/manual/en/function.md5.php)的 php 函数来做同样的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:45:50.437

[php 中的 uniqid 函数](http://www.php.net/manual/en/function.uniqid.php)以毫秒为单位使用当前时间。不可能在客户端上生成相同的哈希，因为时间会不同。

# linux - 删除文件夹中 lsof 未列出的所有文件

> ID：15212554
> 
> 赞同：2
> 
> 时间：2013-03-04T22:40:48.740
> 
> 标签：linux, bash, command-line

最近我正在编写一个 bash 命令行脚本来维护特定文件夹的大小。请注意，某些程序有时会在此文件夹中写入/更新文件，因此“包罗万象”的 rm -rf 永远不适合这种情况。

我能够检索所有“活动”，换句话说，使用 lsof 打开文件并使用 awk 将它们打印出来：

```
lsof +D ./ | awk ' { print ( $NF ) } ' 
```

这给了我这些打开文件的列表，我显然不想摆脱它们。但是我想删除其余的。

我希望 rm 命令中有一个选项可以使用 ^ 选项排除某些文件...

有没有办法在 bash 中实现这一点？

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:19:33.143

这可以在没有临时文件的情况下在一行上完成，但我会将其拆分以使注释和调试更容易：

```
# Get a sorted list of used files
lsof +D ./ | awk ' { print ( $NF ) } ' | sort | uniq > usedFiles

# Get a sorted list of existing files
find ./ | sort > existingFiles

# Find lines unique to existingFiles
comm -23 existingFiles usedFiles > removableFiles

# Delete them
rm $(< removableFiles) 
```

请注意，这不是空格安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:11:21.483

首先确保你有`extglob`：

```
shopt -s extglob 
```

然后删除所有未列出的文件`lsof`：

```
DONT_RM=`lsof +D \. | awk '{ print $NF; }' | tr "\\n" "|" | sed 's/\.\///g'` && rm !($DONT_RM) 
```

分解上述内容，我们将`lsof`使用管道`|`而不是换行符连接结果，`\n`并从文件名的开头删除前缀`./`。然后我们将这个 OR 文件列表作为非`!`extglob 选项传递给 rm。试试看，它适用于我的基本测试。

# jquery - HTML/CSS - 位于元素顶部的动画背景

> ID：15212556
> 
> 赞同：0
> 
> 时间：2013-03-04T22:40:54.623
> 
> 标签：jquery, html, css

我正在通过向设计中添加其他功能来试验响应式模板。

我正在尝试向导航添加动画视差背景。

[http://www.stopcry.in/test/](http://www.stopcry.in/test/)

背景由 3 个 div 组成，并由一些 jQuery 补充。在此链接中，背景 div 放置在“侧边栏”div 之外，看起来有些正确 - 当您向下滚动时，图像会缩短。

当将 div 放入“侧边栏” div 时，它完全占主导地位，侧边栏的元素消失，同时将徽标留在视图中，我无法弄清楚为什么会被挑出来？

[http://www.stopcry.in/test/index2.html](http://www.stopcry.in/test/index2.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:45:52.007

尝试更改`position:absolute`为`position:fixed`. 请注意，虽然背景不再随页面滚动，但它至少会留在正确的位置而不是切断。

如果您需要它与页面一起滚动，您可以尝试将其高度设置为页面的高度（确保在调整窗口大小时更新它），而不是我在第一段中所说的，但请注意，可能如果你这样做，会有些紧张。

# jquery - jQuery可点击元素的效果序列

> ID：15212564
> 
> 赞同：0
> 
> 时间：2013-03-04T22:41:29.977
> 
> 标签：jquery

我设计了一个 h2 标签，并使用 jQuery 将它变成了一个按钮。单击时，隐藏的内容将从该按钮下方滑落。我的问题是效果的顺序，我无法让它们定时正确。

这是我希望它看起来的样子：

1.  该按钮有圆角。单击时，底部的圆角会被移除，因此看起来隐藏的内容正在滑出按钮的底部。

2.  再次单击按钮时，内容会向上滑入按钮中。当内容完成向上滑动时，按钮恢复其所有圆角的外观。

在我的[jfiddle 模型](http://jsfiddle.net/Jrmy/WsE8R/4/)上有 2 个示例按钮。示例 1 适用于第一次单击，但在再次单击时内容滑回之前按钮变为圆形。

单击 Example2 时，按钮会随着内容滑出而保持圆形。但是当再次单击以隐藏内容时，序列以正确的顺序工作。

这是要点：

```
$('.section').hide();

$('.example1').click( function(event) {
    event.preventDefault(); 

    $(this).next().slideToggle('slow')
    .prev().toggleClass('open-header');    
});

$('.example2').click( function(event) {
    event.preventDefault();

    $(this).next()
        .slideToggle('slow')
        .queue( function(next) {
            $(this).prev().toggleClass('open-header');
            $(this).dequeue();
        }); 
}); 
```

我想组合每个按钮的工作部分，但我不确定如何。我读过其他关于使用 .queue() 或回调的帖子，但我一定不知道我在做什么，因为我无法让它工作。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:50:12.647

而不是使用切换，只需`.open-header`手动检查它是否具有类，然后在向上滑动时，删除回调上的类：

```
$('.example1').click( function(event) {
    event.preventDefault(); 
    if(!$(this).hasClass('open-header')) {
      $(this).addClass('open-header');
        $(this).next().slideDown('slow');
    } else {
        $(this).next().slideUp('slow',function() {
           $(this).siblings('h2').removeClass('open-header');
        });

    }
}); 
```

更新的小提琴：http: [//jsfiddle.net/WsE8R/5/](http://jsfiddle.net/WsE8R/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:52:34.640

您可能需要检测`open-header`函数中是否存在类并更改操作顺序。您需要在打开时首先切换类，然后在关闭时最后需要它。

所以是这样的：

```
$('.example1').click( function(event) {
    event.preventDefault();

    if($(this).hasClass('open-header')) {
        // we need to close it
        $(this).next().slideToggle('slow').prev().toggleClass('open_header');
    } else {
        // we need to open it
        $(this).toggleClass('open_header').next().slideToggle('slow');
    }   
}); 
```

# javascript - 使用 node.js 通过外部脚本更新 HTML？

> ID：15212569
> 
> 赞同：1
> 
> 时间：2013-03-04T22:41:51.457
> 
> 标签：javascript, html, node.js

我正在尝试设置一个 Node.js 应用程序，该应用程序将在 ping IP 时在前端提供一个 HTML 页面。最终结果将有望成为一个静态网页，该网页将显示被 ping 的 IP 的状态。

我的 HTML 页面使用 Express 运行得很好。它基本上只是一个静态文件，其中`<a>`的文本和颜色由外部脚本更改。暂时，我有一个按钮来切换显示的状态，到目前为止它看起来不错。

问题是，如何根据从`Pinger`（如下所述）获得的结果更新 HTML？

我有两个 Node.js 源文件。显然，主要的是`server.js`：

```
var express = require("express"),
app     = express(),
Pinger  = require("./pinger");

app.use(express.static(__dirname));
console.log("Using static files at /");
app.use("/styles", express.static(__dirname + '/styles'));
console.log("Using stylesheets at /styles");
app.use("/res", express.static(__dirname + '/res'));
console.log("Using resources at /res");

app.listen(3000);
console.log("Listening on port 3000");

var pinger = new Pinger('google.com'); /* how the instance would be created */ 
```

还有`Pinger`模块：

```
var ping  = require('ping');

var Pinger = function() {

    this.host = arguments.length > 0 ? arguments[0] : 'google.com'; 
    this.isOnline = false;

    this.pingAll = function pingAll() {

        console.log(">>PING: " + host);
        ping.sys.probe(host, function(isAlive) {
            if (isAlive) console.log(">>PONG: " + host);
            else console.log("Unable to reach " + host);
        });

        // somehow return isAlive

    };

};

module.exports = Pinger; 
```

显然，现在，pinger`isOnline`只能是假的，因为它从未更新过。

附带说明一下，我如何能够从`ping.sys.probe`回调内部更新 isOnline ？我知道不同的范围，而且我很确定仅仅使用`this.isOnline = isAlive`是没有用的，因为它`this`会引用回调（除非我一开始就错了并且想多了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:45:08.363

您需要切换到模板引擎并使页面动态化。您回调可以使用完成的模板调用 res.send / res.end 函数，该模板将被推送回客户端。结帐jade或coffeekup，如果它很简单，只需在函数中构建html而不是使用外部模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:11:59.850

你也可以使用`socket.io`：

```
npm install socket.io 
```

一旦你`isOnline`在 Pinger 中设置了 from ，在`server.js`：

```
var socketio = require('socket.io');
var io = socketio.listen(app);

io.sockets.on('connection', function(socket) {
  var msg = 'Cannot reach host';
  if (pinger.isAlive) {
    msg = 'Host is reachable';
  }
  socket.emit('ping result', {
    msg: msg
  });
}); 
```

从您的客户端 javascript 之一：

```
// client.js
var socket = io.connect();

socket.on('ping result', function(data) {
  $('div.ping-result').html(data.msg);
}); 
```

在您的 html 中：

```
<script src="javascripts/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="javascripts/client.js"></script>

<div class="ping-result"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:51:15.987

您是对的，`this`将参考回调函数的范围。不过，您可以做的是创建`this`对 pinger 函数的引用。

```
Func = function () {
   var self = this;
   self.isOnline = false
   asyn(function (online) {
      self.isOnline = online;       
   }
} 
```

`self`将是对`this`of的引用`Func`。

至于静态页面和服务器之间的通信，您可以简单地向服务器设置一个 Ajax 请求，该请求将简单地返回`pinger.isOnline`。或者，如果您愿意，您可以使用 socket.io 之类的东西。

```
app.get('/ping', function (req, res) {
   res.json(200, {"ping": pinger.isOnline});
} 
```

现在，如果您提出请求`/ping`，您将收到带有您的 pinger 值的响应。

# javascript - 尝试获取查询字符串值时未定义

> ID：15212572
> 
> 赞同：0
> 
> 时间：2013-03-04T22:42:05.477
> 
> 标签：javascript, jquery, ajax

谁能发现在 3 个查询字符串参数中，2 个获取值和 1 个未定义的原因。

```
<li class="@ViewBag.ShowNext">@Html.RouteLink("Next »", "Search", new { page = @ViewBag.NextPage, q = @ViewBag.TextClean, Option = @ViewBag.Option }, new { id = "frmPageNext" })</li> 
```

Javascript/jQuery

```
var vars = [], QStrings;
var q = document.URL.split('?')[1];
if (q != undefined) {
    q = q.split('&');
    for (var i = 0; i < q.length; i++) {
        QStrings = q[i].split('='); vars.push(QStrings[1]);
        vars[QStrings[0]] = QStrings[1];
    }
}

$('#frmPageNext').live('click',function (e) {
    e.preventDefault();
    $.ajax({
        url: '@Url.Action("Results")',
        data: { "q": vars['q'], "page": vars['page'], "Option": vars['Option'] },
        success: function (data) {
            alert(vars['q']);
            alert(vars['page']); //Returning undefined
            alert(vars['Option']);
            $("#dvSearchLeft").html(data).fadeIn(300);
        }
    });        
}); 
```

-------------------------URL MVC-----------------

```
<a href="/Search-Results-For/Hotels/Web/2" id="frmPageNext">Next &#187;</a>

The above would be <a href="/Search-Results-For/q=Hotels&Option=Web&Page=2 
```

----------------当前代码--------------------------------

我曾尝试移动 javascript 以使代码正常工作，但所有 3 个参数都未定义

```
<script>

        $('#frmPageNext').live('click',function (e) {
            e.preventDefault();
            var vars = [], QStrings;
            var q = $('#frmPageNext').attr('href').split('?')[1];
            if (q != undefined) {
                q = q.split('&');
                for (var i = 0; i < q.length; i++) {
                    QStrings = q[i].split('='); vars.push(QStrings[1]);
                    vars[QStrings[0]] = QStrings[1];
                }
            }
            $.ajax({
                url: '@Url.Action("Results")',
                type: 'Get',
                data: { "q": vars['q'], "Page": vars['page'], "Option": vars['Option'] },
                dataType: 'html',
                success: function (data) {
                    alert(vars['q']);
                    alert(vars['page']);
                    alert(vars['Option']);
                    $("#dvSearchLeft").html(data).fadeIn(300);
                }
            });

        });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:54:58.187

在 JavaScript 中，大小写很重要。`page`不一样`Page`。

我建议替换这一行：

```
vars[QStrings[0]] = QStrings[1]; 
```

有了这个：

```
vars[QStrings.shift().toLowerCase()] = QStrings.join("="); 
```

`=`请注意，这也处理了值本身中存在未编码符号的边缘情况。

然后只需确保将`data: {"q".....`行更新为仅使用小写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:51:55.860

这似乎是一个案例问题：尝试使用`vars['Page']`而不是`vars['page']`.

这当然是如果您`Page`的 url 参数中有一个变量。否则你会`undefined`从你的`vars`数组中得到一个。

[评论后编辑]因此，如果我做对了，您想要实现的是将 :`"/Search-Results-For/Hotels/Web/2"`转换为 ajax 查询字符串。然后你会做类似的事情：

```
var splittedHref = $('#frmPageNext').attr('href').split("/");
var q = splittedHref[2];
var Option = splittedHref[3];
var Page = splittedHref[4];
$.ajax({
  url: '@Url.Action("Results")',
  type: 'Get',
  data: { "q": q,"Page": Page, "Option": Option },... 
```

这能解决你的问题吗？

# delphi - PlgBlt 失败且没有错误代码

> ID：15212577
> 
> 赞同：4
> 
> 时间：2013-03-04T22:42:36.993
> 
> 标签：delphi, winapi

如果位图大于 2500x2500，则不会旋转，否则会旋转。
返回值始终为真。是否有任何设置可以增加大小限制？

```
 pts[0].x := dynamicBMP.height;
 pts[0].y := 0; 
 pts[1].x := dynamicBMP.height;
 pts[1].y := dynamicBMP.width; 
 pts[2].x := 0; 
 pts[2].y := 0;

  y := plgblt(TempBmp.canvas.Handle,
              pts,
              dynamicBMP.canvas.Handle,
              0,
              0,
              dynamicBMP.width,
              dynamicBMP.height,
              0,
              0,
              0);
if y = false then
  raise Exception.Create('Plgblt failed'); 
```

# jquery - 将类添加到具有特定类的元素

> ID：15212578
> 
> 赞同：0
> 
> 时间：2013-03-04T22:42:38.007
> 
> 标签：jquery, django, forms, validation, twitter-bootstrap

我正在用 Django 生成一个表单，验证错误显示如下（可能有几个）：

```
<ul class="errorlist">
    <li>This field is mandatory.</li>
</ul> 
```

我想通过添加类“alert alert-error”来将错误设置为“Twitter Boostrap 方式”，并认为可以使用 jQuery。这是我的（糟糕的）尝试，但不起作用：

```
$('.errorList').each(function() {
    $(this).addClass('alert alert-error');
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:47:21.623

并使用错误列表而不是错误列表（较低的“l”）

```
$('.errorlist').each(function() {
    console.log("!", (this));
    $(this).addClass('alert alert-error');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:46:12.803

您不需要`each`函数，只需`addClass`像这样调用：

```
$('.errorlist').addClass('alert alert-error'); 
```

PS似乎没有任何充分的理由通过javascript添加这些css类，您应该立即从服务器端代码中输出它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:46:35.600

使用没有意义`.each()`。做就是了：

```
$('.errorList').addClass('alert alert-error'); 
```

# javascript - 以特定顺序加载（请求）javascript

> ID：15212579
> 
> 赞同：1
> 
> 时间：2013-03-04T22:42:41.780
> 
> 标签：javascript

大家下午好，我有一个独特的情况，我试图以特定的顺序加载 javascript。似乎浏览器一次通过多个文件从服务器请求 javascript。我的问题是，我需要加载一个，它设置一个 cookie，然后我需要第二个。这是为了检查是否启用了 3rd 方 cookie。根据它们是否存在，它会隐藏或显示 DOM 元素，特别是隐藏 iFrame 并显示一个窗口，说明他们需要启用 3rd 方 cookie，或者有一个可以点击的链接。

我有一个 .net MVC 应用程序，它有一个控制器和 2 个动作。动作 1 称为 setcookie，它只返回一个 cookie。

第二个操作称为 ValidateCookie，它检查是否发送了 cookie，并返回一个简单的 Javascript 函数，该函数返回 true 或 false。但问题是，有时浏览器会在 setcookie 之前调用 ValidateCookie。我已经使用提琴手验证了这一点。但并非总是如此，通常它是以正确的顺序调用的。也许十分之一是倒退的。

我尝试将 SetCookie 放在头部并在正文的末尾进行验证。在正文顶部设置，在末尾验证，都在末尾，使用链接标签调用 setcookie，使用 img 标签，使用 CSS @import。设置延迟=无。我似乎无法让它以正确的顺序加载 javascript。因为它的顺序不正确，cookie 结果函数很可能会返回 false，即使它们确实启用了它们。

我找到了一些解决方案，它们让第一个 javascript 调用一个将第二个脚本标记动态添加到 html 的方法。一切都很好，除了我需要在一切继续之前加载这两个 javascript。并在所有其他脚本完成后加载动态添加的脚本标签。

也许这也是不可能的，因为现在一切都是关于同时加载多个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:59:05.733

当请求第二个脚本时，您可以将第一个脚本中的 cookie 发送到服务器的唯一方法是在第一个脚本设置 cookie 后手动加载第二个脚本。您不能依赖`<script>`标签来为您执行此操作，因为即使它们将按`<script>`标签顺序执行，浏览器也可以预取脚本。

所以，事件的顺序是这样的：

1.  第一个脚本加载并执行。
2.  Cookie 已设置。
3.  第二个脚本被动态添加到文档中。

您还必须确保第二个脚本没有被缓存，可能通过在 URL 的末尾附加一个唯一的参数（通常是日期时间戳）。

您还需要确保该页面以及脚本和 cookie 都在公共域中，并在 cookie 上进行了适当的设置，以便它们都可以访问 cookie。

这是一个示例（firstscript.js 设置 cookie，它在请求 secondscript.js 时发送到服务器）：

```
<script src="firstscript.js"></script>
<script>
(function() {
    var dynScript = document.createElement("script");
    var now = new Date().getTime();
    dynScript.src = "secondscript.js?ts=" + now; 
    document.getElementsByTagName("head")[0].appendChild(dynScript);
})();
</script> 
```

# c - 在 C 中为 ffmpeg 动态生成参数列表

> ID：15212581
> 
> 赞同：1
> 
> 时间：2013-03-04T22:42:49.630
> 
> 标签：c, memory-management, ffmpeg, malloc

我目前正在用 C 编写一个视频转换守护程序。它使用 execvp 调用 ffmpeg。

我创建了一个名为“ffmpeg_job”的结构，它表示要完成的转换作业。我想为每个作业动态分配参数给 ffmpeg，这样我就可以在作业完成后释放其中一个结构及其参数列表。

我开始编写动态分配参数列表的函数，但我觉得我这样做的方式很幼稚。代码如下。

有一个更好的方法吗？

编辑：我现在在想，我将为每个质量级别提供一个静态参数字符串列表，然后将 sprintf 放入其中并将其 strtok 放入 char **

```
char ** generate_arguments(
    char *filepath,
    ph5v_format format,
    ph5v_quality quality)
{
    char ** arguments;
    if (format == ph5v_MP4) {
        mp4_arguments = {
            "-i", "%%INPUT FILEPATH 1",
            "-vcodec", "libx264",
            "-preset", "%%X264 PRESET 5",
            "-b:v", "%%VIDEO BITRATE 7",
            "-strict", "-2",
            "-acodec", "aac",
            "-b:a", "%%AUDIO BITRATE 13",
            "-ar", "%%AUDIO SAMPLERATE 15",
            "-ac", "2",
            "-y", "%%OUTPUT FILEPATH 19"
        }

        arguments = malloc(sizeof(char*) * 20);

        int i;
        for (i = 0; i < 20; i++) {
            if (i == 1) {
                char *argument = malloc(strlen(filepath) + 1);
                strcpy(argument, filepath);
                arguments[1] = argument;
            } else if (i == 5) {
                if (quality == ph5v_LOW || quality == ph5v_MEDIUM) {
                    char *argument = malloc(strlen("fast") + 1);
                    strcpy(argument, "fast");
                    arguments[5] = argument;
                } else if (quality == ph5v_HIGH || quality == ph5v_ULTRA ) {
                    char *argument = malloc(strlen("medium") + 1);
                    strcpy(argument, "medium");
                    arguments[5] = argument;
                }
            } else if (i == 7) {
                if (quality ==
            .
            .
            . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:43:07.613

您提出的代码似乎在功能上很好。关于当前代码的一些观察

`for`我假设您正在填充循环内的所有奇数索引。因此，循环可以潜在地优化为`for(i = 1; i < 20; i++)`。

在质量的情况下，我假设您有一组预先固定的选项，例如**fast**、**medium**等。在当前的实现中，您正在计算用于内存分配的字符串长度。这可能会被数组查找替换，其中数组元素对应于已存储名称和大小的结构。例如，代码可能如下

```
if (quality == ph5v_LOW || quality == ph5v_MEDIUM) 
    index = 0;

argument = malloc(sizeof(quality_array[index].size + 1));
strcpy(argument, quality_array[index].strname); 
```

其中`quality_array`是如下定义的结构数组

```
 typedef struct qual_param {
      int size;
      char *strnamne;
 } 
```

# apache - Ubuntu 12.10 Forbidden - 您无权访问此服务器上的 /

> ID：15212583
> 
> 赞同：2
> 
> 时间：2013-03-04T22:43:04.380
> 
> 标签：apache, ubuntu, apache2, virtualhost, ubuntu-12.10

我正在尝试配置我的本地服务器，就像我一直做但不工作一样，说我没有借口，但如果我给 www 文件夹相同的权限，如果我指向这个文件夹 www if它的工作原理我不明白？

如果我这样做：它有效

```
DocumentRoot /var/www
<Directory />
        Options FollowSymLinks
        AllowOverride None
</Directory>
<Directory /var/www>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
</Directory>

drwxr-xr-x  2 root root     4096 nov  6 15:27 www 
```

但如果我这样做：不起作用

```
DocumentRoot /home/diego/web_server
<Directory />
        Options FollowSymLinks
        AllowOverride None
</Directory>
<Directory /home/diego/web_server>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
</Directory>

drwxr-xr-x 2 root root 4096 mar  4 15:40 web_server 
```

我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:00:46.023

在 Ubuntu 12.10 上的 Apache 中，您应该在 /etc/apache2/envars 中有一个 envars 文件。Web 服务器正在运行的用户：组在 envars 中设置。如果您更改 documentroot，则需要适当地设置该新文档根目录的权限。很可能在您的环境中，您的 Apache2 安装运行为 www-data:www-data。如果是这样，您需要对新的 docroot 以及将写入该目录结构的任何用户设置权限。

在 /etc/apache2/apache2.conf 中，您会在文件的一半左右找到以下行。

```
#These need to be set in /etc/apache2/envars
    User ${APACHE_RUN_USER}
    Group ${APACHE_RUN_GROUP} 
```

在 /etc/apache2/envars 你会发现

```
export APACHE_RUN_USER=www-data
export APACHE_RUN_GROUP=www-data 
```

您可以在 envars 中分配不同的 User:Group 或为 www-data 分配目录权限。

这与过去在 httpd.conf 中完成的方式不同。

# java - Java中return语句中的递减（或递增）运算符

> ID：15212591
> 
> 赞同：1
> 
> 时间：2013-03-04T22:43:41.000
> 
> 标签：java

我在我的 Web 应用程序（使用 Spring 和 Hibernate）中实现分页，我需要类似下面的东西。

```
public static int deleteSingle(long totalRows, long pageSize, int currentPage)
{
   return totalRows==currentPage*pageSize-pageSize ? currentPage-- : currentPage;
} 
```

假设，我从某处调用此方法，如下所示。

```
deleteSingle(24, 2, 13); 
```

使用这些参数，满足条件并且应该返回变量`currentPage`（即 13）减去 1（即 12）的值，但它不会减少 的值`currentPage`。它在此调用后返回原始值 13。

* * *

我必须更改如下方法才能使其按预期工作。

```
public static int deleteSingle(long totalRows, long pageSize, int currentPage)
{
    if(totalRows==currentPage*pageSize-pageSize)
    {
        currentPage=currentPage-1;   //<-------
        return currentPage;          //<-------
    }
    else
    {
        return currentPage;
    }
} 
```

那么为什么不使用递减运算符 - 将值递减 1`currentPage--`呢？为什么需要 -`currentPage=currentPage-1;`在这种情况下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T22:45:32.093

在您的 return 语句中，它使用`currentPage--`which 导致 return 后的递减。您想`--currentPage`在返回之前进行减量。就个人而言，对于这样一个复杂的语句，为了便于阅读，您可能无论如何都想将其分解，但这是一个偏好问题。

（从技术上讲，它在读取后会递减。它是一个在递减时会发生变化的 return 语句并没有什么特别之处。）

如果由我决定，我的口味会是这样：

```
public static int deleteSingle(long totalRows, long pageSize, int currentPage)
{
    if(totalRows==currentPage*pageSize-pageSize)
    {
        currentPage--;
    }
    return currentPage;

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T22:45:51.933

请注意，您可能需要在使用其值*后*`x--`递减，这将在使用其值*之前*递减变量。`x` *`--currentPage`*

 *** * *

要看到这一点，请考虑：

```
public static int deleteSingle(long totalRows, long pageSize, int currentPage) {
    try {
        return totalRows == currentPage * pageSize - pageSize ? currentPage--
                    : currentPage;
    } finally {
        System.out.println("*" + currentPage);  // value after return
    }
} 
```

调用`deleteSingle(24, 2, 13)`打印：

```
*12
13

```

如果我们替换`currentPage--`为`--currentPage`，我们会收到：

```
*12
12

```

正如预期的那样。

**但是**，您不认为直接使用会更好`currentPage - 1`吗？在这种情况下没有理由*重新分配* `currentPage`（请记住，这样的重新分配在方法范围之外是不可见的）。

* * *

[JLS 的第15.15.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.15.2)介绍了前缀减量运算符。注意句子：

> 前缀递减表达式的值是存储新值*后变量的值。***

# php - 从 wp 数组回显多个类别

> ID：15212593
> 
> 赞同：0
> 
> 时间：2013-03-04T22:43:48.350
> 
> 标签：php, wordpress, custom-post-type

好的，所以我的 php 很糟糕，所以在某些时候可能很难理解我的意思，但我几乎有一个 wordpress 循环，并且有一次我得到了帖子的类别并将其回显到课堂上。

有些帖子有多个类别，我想在课堂上回应它们。

到目前为止，这是我用来获取类别的

```
$categories = get_the_category(); 
```

这就是我回应他们的方式

```
<?php echo $categories[0]->category_nicename; ?> 
```

如果我改为

```
<?php echo $categories[1]->category_nicename; ?> 
```

它获得了第二类，但我希望它获得所有这些

这是完整的代码

```
<?php query_posts("post_type=portfolio"); ?>
<?php $i=0; /** start the project loop here */?>
<?php if(have_posts()):?>
<?php while(have_posts()) : the_post();?> 
<?php $i++; ?>

<?php
$image1ID = get_field('thumbnail');
$image1 = wp_get_attachment_image_src( $image1ID, '500by250-thumb' );
$attachment = get_post( $image1ID );
$image1_title = $attachment->post_title;
$categories = get_the_category(); 

?>          

    <pre>
        <?php print_r($categories) ?>
    </pre>

    <li data-type="<?php echo $categories[0]->category_nicename; ?>" data-id="id-<?php echo $i ?>" class="portfolio-thumb <?php the_field('thumb_size');?>">

        <a data-scroll="#portfolio-second" href="<?php the_permalink(); ?>" title="<?php echo $image_title; ?>">
            <div class="hover-content">
                <span class="thumb-caption"><?php the_field('thumb_caption');?></span>
                <span class="thumb-title"><?php the_title();?></span>
            </div>
            <img src="<?php echo $image1[0] ?>" alt="<?php echo $image_title; ?>">
        </a>

    </li>   

<?php endwhile; ?>
<?php else: ?>  
<?php endif; ?>
<?php wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:47:52.473

如果要遍历所有类别数组，可以使用`foreach`如下语句：

```
<?php foreach($categories as $category){?>
    <li data-type="<?php echo $category->category_nicename; ?>" data-id="id-<?php echo $i ?>" class="portfolio-thumb <?php the_field('thumb_size');?>">

                        <a data-scroll="#portfolio-second" href="<?php the_permalink(); ?>" title="<?php echo $image_title; ?>">
                            <div class="hover-content">
                                <span class="thumb-caption"><?php the_field('thumb_caption');?></span>
                                <span class="thumb-title"><?php the_title();?></span>
                            </div>
                            <img src="<?php echo $image1[0] ?>" alt="<?php echo $image_title; ?>">
                        </a>

                    </li> 
<?php } ?> 
```

完整的代码是：

```
 <?php query_posts("post_type=portfolio"); ?>
        <?php $i=0; /** start the project loop here */?>
        <?php if(have_posts()):?>
        <?php while(have_posts()) : the_post();?> 
        <?php $i++; ?>

        <?php
        $image1ID = get_field('thumbnail');
        $image1 = wp_get_attachment_image_src( $image1ID, '500by250-thumb' );
        $attachment = get_post( $image1ID );
        $image1_title = $attachment->post_title;
        $categories = get_the_category(); 

        ?>          

            <pre>
                <?php print_r($categories) ?>
            </pre>

            <?php foreach($categories as $category){?>
    <li data-type="<?php echo $category->category_nicename; ?>" data-id="id-<?php echo $i ?>" class="portfolio-thumb <?php the_field('thumb_size');?>">

                        <a data-scroll="#portfolio-second" href="<?php the_permalink(); ?>" title="<?php echo $image_title; ?>">
                            <div class="hover-content">
                                <span class="thumb-caption"><?php the_field('thumb_caption');?></span>
                                <span class="thumb-title"><?php the_title();?></span>
                            </div>
                            <img src="<?php echo $image1[0] ?>" alt="<?php echo $image_title; ?>">
                        </a>

                    </li> 
<?php } ?>
        <?php endwhile; ?>
        <?php else: ?>  
        <?php endif; ?>
        <?php wp_reset_query(); ?> 
```

# type-conversion - RSA。明文以字符串形式给出，如何将其转换为整数？

> ID：15212594
> 
> 赞同：0
> 
> 时间：2013-03-04T22:43:51.050
> 
> 标签：type-conversion, rsa

假设我有 RSA 和带有“一”或“二”的输入，我想在其上运行 RSA 以获得密文。有谁知道如何将这些字符串转换为我尝试在其上运行 RSA 的整数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T21:05:16.507

在这种特殊情况下，我们被要求使用 0-25 作为 AZ。

所以“一个”将是“141304”

# c# - 非静态字段、方法或属性“CityCollectionCSharp.BRTDataSet.prop.get”需要对象引用

> ID：15212596
> 
> 赞同：0
> 
> 时间：2013-03-04T22:44:03.663
> 
> 标签：c#, winforms, data-binding

我已经阅读了这里关于这个问题的许多主题，但我仍然不明白为什么会在这种情况下发生这种情况。过去，我曾多次使用此确切代码将参数传递给打开的表单，但由于某种原因，我收到了该错误。我收到的错误在线 propTableAdapter.FillByBRTNumber(BRTDataSet.prop, BrtNumberKey); 因为它无法识别作为数据集中表的 prop。

代码在我收到错误的页面下方，请注意我确实创建了数据集的实例，但随后发生的情况是页面在调试期间打开，但似乎绑定源从未获得查询。过去我从来没有这样做过，包括在这个项目中很多次。

```
public partial class frmBRTDetail : Form
{
    public frmBRTDetail(BRTSearch _owner)
    {
        InitializeComponent();           
    }

    public void LoadBRTNumberKey(String BrtNumberKey, String tableName)
    {            
        //BRTDataSet BRTDataSets = new BRTDataSet();
        propTableAdapter.FillByBRTNumber(BRTDataSet.prop, BrtNumberKey);
    }
} 
```

打开这个的页面上的代码：

```
 public BRTSearch()
    {
        InitializeComponent();
    }

    private void BRTSearch_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'bRTDataSet.prop' table. You can move, or remove it, as needed.
        //this.propTableAdapter.Fill(this.bRTDataSet.prop);
    }

    private void btnSearch_Click(object sender, EventArgs e)
    {
        //caseSelectorBindingSource.Filter = "BRTNumber ='" + textBox3.Text + "'";
        //propBindingSource.Filter = "PARCEL ='" + textBox3.Text + "'";
        if (textBox3 != null)
        {           
           frmBRTDetail BRTDetail = new frmBRTDetail(this);
           BRTDetail.LoadBRTNumberKey(textBox3.Text, null);
           BRTDetail.Show();
        }
    }

    private void dgvBRT_DoubleClick(object sender, EventArgs e)
    {
        System.Data.DataRowView SelectedRowView;
        BRTDataSet.propRow SelectedRow;

        SelectedRowView = (System.Data.DataRowView)propBindingSource.Current;
        SelectedRow = (BRTDataSet.propRow)SelectedRowView.Row;

        frmBRTDetail BRTDetail = new frmBRTDetail(this);
        BRTDetail.LoadBRTNumberKey(SelectedRow.PARCEL, null);
        BRTDetail.Show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:11:36.197

改变：

```
propTableAdapter.FillByBRTNumber(BRTDataSet.prop, BrtNumberKey); 
```

至：

```
propTableAdapter.FillByBRTNumber(brtDataSet.prop, BrtNumberKey); 
```

愚蠢的错误。

# .net - XML 文档有错误；反序列化时 EndElement 是无效的 XmlNodeType

> ID：15212599
> 
> 赞同：3
> 
> 时间：2013-03-04T22:44:19.910
> 
> 标签：.net, xml, web-services, xml-deserialization, hl7

考虑一个 .NET 客户端调用定义为 Web 引用的远程 XML SOAP Web 服务。客户端调用服务，并尝试将返回的 XML 反序列化为对象。

Web 方法正在正确执行，并且从服务返回的 XML 格式正确，在 Fiddler 中得到确认。Web 服务是一种已知的良好工作服务，因为我们有另一个客户端 (.NET 2.0) 毫无问题地使用它。

当 .NET Web 服务代理类尝试反序列化返回的 XML 时，会引发以下错误：

> System.InvalidOperationException：XML 文档中存在错误 (1, 1999)。---> System.Xml.XmlException: 'EndElement' 是无效的 XmlNodeType。第 1 行，位置 1999。在 System.Xml.XmlReader.ReadStartElement()
> 在 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReader_PRPA_AR101202_Service.Read135_MCCI_MT000200LocatedEntity(Boolean isNullable, Boolean checkType)

它抱怨的[XML 响应](https://gist.github.com/philoushka/485989cffc83b2fbcb51/raw/7a92873b3509c52692aeb64a8539eabf74e644dd/gistfile1.xml)的行/列 (1,1999)是`/`in `</device>`：

```
<sender>
   <device>
      ..snip..
      <location classCode="IDENT" realmCode="xyz" />
   </device> 
```

**如何使用 .NET 反序列化解决此问题？**

没有解决方案/更多信息的尝试解决方案：

*   从 .NET 4 迁移到 4.5，希望在最新版本中看到任何修复`System.Xml`
*   [被反序列化的去标识化响应文档](https://gist.github.com/philoushka/485989cffc83b2fbcb51/raw/7a92873b3509c52692aeb64a8539eabf74e644dd/gistfile1.xml)
*   [完整的堆栈跟踪](https://gist.github.com/philoushka/4724f30b4ae7c3f1548a/raw/76fde52fa4ee3c2b52b3df03675c96b4abcd59e8/gistfile1.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:16:59.767

堆栈跟踪的第二行表明 xml 处理器需要`locatedEntity`第二个元素内的`device`元素。可以推断出不会有这样的元素的最早位置是该元素的结束标记`device`。

查看命名空间的架构文档`"urn:hl7-org:v3"`；可能`location`被错误地使用而不是`locatedEntity`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:15:02.397

我使用了 .config 调整来强制 XML 序列化程序使用遗留行为：

```
<configuration>
     <system.xml.serialization> 
        <xmlSerializer  useLegacySerializerGeneration="true" />    
     </system.xml.serialization>
</configuration> 
```

[在 WCF 4.5 中运行现有 XML 序列化代码时序列化或反序列化失败](http://support.microsoft.com/kb/2748720)

# java - 在独立和 webapp 上下文（Java 7、Tomcat 7）中使用的应用程序的哪个数据源？

> ID：15212600
> 
> 赞同：5
> 
> 时间：2013-03-04T22:44:20.753
> 
> 标签：java, jdbc, datasource, jndi, desktop-application

我构建了一个具有独立“核心”层的应用程序，该层也用于构建 webapp（它是一个 Maven 多模块项目，具有一个“核心”模块和一个“webapp”模块，它依赖于“核心”模块）。它使用 MySQL 数据库。我尝试实现一个`DataSource`在两种上下文中都可以的（在独立上下文中只有 1 个连接就足够了）。

在阅读了很多关于 DataSources 的文档之后，我不得不说我有点迷茫。我得出的结论是，也许我应该使用[Tomcat JDBC Connection Pool](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)。我的问题是：

1）在独立上下文中，我应该如何提供使用 DataSource 的配置，知道此配置将由 Tomcat 在 webapp 上下文中提供（独立配置不应覆盖 Tomcat 配置）？

*   我应该在仅在独立上下文中调用的方法中执行[其他问题中的类似操作吗？](https://stackoverflow.com/questions/13792469/basic-db-connection-pool-with-java-and-tomcat-7)但是如何在 webapp 上下文中看到 Tomcat 已经提供了数据源？

*   还是我应该使用 bean 定义？但是这个 bean 怎么不会在 webapp 上下文中使用呢？

2) 其他池化 DataSource 实现呢？

*   我不应该只使用[MySQL DataSource](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)吗？

*   我在 Java EE 7 中读到，DataSources 更易于使用（[https://blogs.oracle.com/arungupta/entry/default_datasource_in_java_ee](https://blogs.oracle.com/arungupta/entry/default_datasource_in_java_ee)）。那么，Java 7 有什么突破吗？我绝对应该在 Java 7 中使用的新 DataSource 提供程序？

结论：是的，我迷路了，我不知道 DataSource 使用的“黄金标准”是什么。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:33:26.580

您可以在核心模块中查找数据源。您需要[在 Tomcat](http://www.mkyong.com/tomcat/how-to-configure-mysql-datasource-in-tomcat-6/)中为 webapp 模块创建 JNDI 数据源，并为独立模块创建[独立 JNDI 支持](http://penguindreams.org/blog/running-beans-that-use-application-server-datasources-locally/)。

例如，`Connection`从数据源获取数据在两种情况下都是相同的：

```
Context ctx = new InitialContext();
DataSource ds = (DataSource)ctx.lookup("java:comp/env/jdbc/MySQLDB");
Connection conn = ds.getConnection(); 
```

但是数据源的配置是不同的。在 Tomcat 中，您将在链接中的示例中看到类似的内容。

```
<Context>
<Resource name="jdbc/MySQLDB" ... />
</Context> 
```

独立中的资源名称必须与独立中的`ctx.lookup`调用相同：

```
Properties prop = new Properties();
prop.put("java:comp/env/jdbc/MySQLDB", ds1); 
```

独立模块中的`InitialContextFactory`必须独立于核心模块创建。

关于`com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource`看到[这个](https://stackoverflow.com/a/2353593/870248)。Tomcat 使用 Apache Software Foundation 的 DBCP 库，您也可以在自己的非 Java EE 代码中使用它：http: [//jakarta.apache.org/commons/dbcp/](http://jakarta.apache.org/commons/dbcp/)

对于 Tomcat 中的 JDBC 连接池，请参阅[此](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)，对于 Apache DBCP 池，请参阅[此](http://svn.apache.org/viewvc/commons/proper/dbcp/trunk/doc/PoolingDataSourceExample.java?view=markup)。

# ruby-on-rails - 无法将“哈希”转换为“字符串”

> ID：15212602
> 
> 赞同：0
> 
> 时间：2013-03-04T22:44:23.263
> 
> 标签：ruby-on-rails, capistrano, rvm-capistrano

我正在尝试通过部署`capistrano`，出于某种原因，我得到：

```
/Users/mysite/.rvm/gems/ruby-1.9.2-p318@fbadapter/gems/json-1.4.6/lib/json/common.rb:146:in `initialize': can't convert Hash into String (TypeError)
  from /Users/mysite/.rvm/gems/ruby-1.9.2-p318@fbadapter/gems/json-1.4.6/lib/json/common.rb:146:in `new'
  from /Users/mysite/.rvm/gems/ruby-1.9.2-p318@fbadapter/gems/json-1.4.6/lib/json/common.rb:146:in `parse'
  from /Users/mysite/.rvm/gems/ruby-1.9.2-p318@fbadapter/gems/chef-capistrano-0.1.0/lib/chef/capistrano.rb:27:in `role_from_chef'
  from ./config/deploy.rb:35:in `block in load' 
```

我的问题`config/deploy.rb`是：

```
after 'multistage:ensure' do
 role_from_chef :db, 'app', :limit => 1, :primary => true # perform db operations on one of the app servers
 role_from_chef :web, 'app'
 role_from_chef :app
 role_from_chef :queue
 role_from_chef :cron
end 
```

第二行是第 35 行

**更新代码**

```
 def role_from_chef(cap_role, *roles)
    %w(chef_host chef_port chef_scheme chef_client_name chef_key_file).each do |value|
      abort "Please set :#{value}" unless exists?(value.to_sym)
    end

    Spice.setup do |s|
      s.host = fetch(:chef_host)
      s.port = fetch(:chef_port)
      s.scheme = fetch(:chef_scheme)
      s.client_name = fetch(:chef_client_name)
      s.key_file = fetch(:chef_key_file)
    end
    Spice.connect!

    options = roles.extract_options!
    roles = [cap_role.to_s] if roles.empty?
    search_roles = fetch(:chef_search_roles) + roles
    query = search_roles.map{|r| "role:#{r}"}.join(" AND ")

    response = Spice.connection.get("/search/node?q=#{URI.encode(query)}")        
    response_object = JSON.parse(response)
    raise response_object['error'].join(' ') if response_object.has_key?('error')

    nodes = response_object['rows']
    hosts = nodes.select{|n| n['ec2']}.map{|n| n['ec2']['public_hostname']}

    if limit = options.delete(:limit)
      hosts = hosts.slice(0, limit)
    end

    hosts.each do |host|
      node = nodes.detect { |n| n['ec2']['public_hostname'] == host }
      puts "#{cap_role}: #{node['ec2']['instance_id']} - #{node['ec2']['public_hostname']}"
    end

    hosts << options
    role cap_role, *hosts
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:23:14.980

```
role_from_chef :db, 'app', :limit => 1, :primary => true 
```

相当于

```
role_from_chef( :db, 'app', { :limit => 1, :primary => true } ) 
```

根据错误，我会说您的函数 role_from_chef 确实接受字符串作为第三个参数。但是如果没有您粘贴 role_from_chef 函数，我无法确定。

无论如何，这就是您应该调查的内容：按照 role_from_chef 中的第三个参数，看看它是否在某处用作字符串

# javascript - 使用闭包传递数组值

> ID：15212604
> 
> 赞同：1
> 
> 时间：2013-03-04T22:44:26.633
> 
> 标签：javascript, arrays, closures

从另一个函数获取多个本地数组的最佳方法是什么。我正在做类似的事情。至于附加到函数的变量名“arr1=f1()”，是否需要将它们声明为本地“var arr1=f1()”。

```
<script>

    function ArrValues(arr){
        var array=arr;
        function f1(){
            var ID=[];
            ID=['grapes','peaches','plums'];
            return ID
        };
        function f2(){
            var Nam=[]; 
            Nam=['car','motorcycle','tree'];
            return Nam
        };
        function f3(){
            var Num=[]; 
            Num=['200','1000','350'];
            return Num
        };

        if(array=='one' || array=='all'){ arr1=f1()};
        if(array=='two' || array=='all'){ var arr2=f2()};
        if(array=='three' || array=='all'){ var arr3=f3()};

        gotIt(arr1,arr2,arr3)
    }

    function gotIt(arr1,arr2,arr3){
        alert(arr1);
        alert(arr2);
        alert(arr3);
    }

</script>

<div id="one" onclick="ArrValues(this.id)">one</div>
<div id="two" onclick="ArrValues(this.id)">two</div>
<div id="three"onclick="ArrValues(this.id)">three</div>
<div id="all"onclick="ArrValues(this.id)">all</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:50:21.393

那要看情况了。由于您将值`gotIt`直接传递给，因此看起来您并不需要它们全局，所以应该`var`对它们都有。

也就是说，您的代码非常混乱且有点多余。试试这个：

```
function ArrValues(arr) {
    var arr1 = arr=='one' || arr=='all' ? ['grapes','peaches','plums'] : [],
        arr2 = arr=='two' || arr=='all' ? ['car','motorcycle','tree'] : [],
        arr3 = arr=='three' || arr=='all' ? ['200','1000','350'] : [];
    gotIt(arr1,arr2,arr3);
} 
```

请注意，我已经为每个数组指定了一个空数组的默认值，否则您最终会得到未定义的变量。

# apache - Solr：排除某些 HTML 标签或仅在索引中包含某些标签

> ID：15212605
> 
> 赞同：1
> 
> 时间：2013-03-04T22:44:40.453
> 
> 标签：apache, solr, solr-cell

我目前正在使用 Solr-Cell 来获取几个 html 页面的内容并将它们编入索引。问题是我在标题中有一个菜单，它显示在所有页面上。此菜单及其所有项目都出现在搜索结果中。我不希望这被索引。

你将如何做到这一点？

是否可以排除某些 DIV（带有类名或 id）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:27:11.573

实际上，如果您进行测试，您会看到在 Solr 中使用 Tika 的方式，它剥离了大部分 HTML，包括 div、classes 和 ids 属性。

因此，您可能无法获得所需的粒度，并且可能需要使用 RegexReplaceProcessorFactory UpdateRequestProcessor 之类的东西通过匹配纯文本来删除不需要的部分。

如果您直接从代码中调用 Tika，您可以对其进行更多控制，并且可以将 IdentityHtmlMapper 设置为不进行 HTML 过滤。

# python - Django 管理视图：如何在 InlineFormset 中分别为每个表单控制 FormFields 的属性？

> ID：15212613
> 
> 赞同：0
> 
> 时间：2013-03-04T22:45:35.040
> 
> 标签：python, django, django-admin

## 前言

我正在实现一个基于 Django 框架（目前稳定的 1.4.3）的*“收藏管理系统” 。*
我正在设计 ORM 的良好关系性质来强制一些讨厌的“OO 方面”，我试图提取一个最小的例子。（免责声明：完整的功能描述将是另一个冗长而无聊的阅读，所以我不会制作它，除非它被证明是设计讨论）。

## 提取的例子

假设我们使用 Django 模型松散地模拟 OO。我们有**发布**模型（=一个类），它可以由不同的**属性**（=类的数据成员）组成。然后可以为相同的**Release**实例化不同的**实例**（= 对象） 。每个**Instance**可以为其相关**Release中存在的所有/部分/无****属性**存储一个值。 这将为我们提供以下模型：

 ******```
#An attribute is a name, that can be given a value at instance level.
class Attribute(models.Model):
    name = models.CharField(max_length=60)

#A release can be compared to a class in OO :
# it's a data structure description (the attributes' list).
class Release(models.Model):
    name = models.CharField(max_length=60)
    #A release is caracterized by a list of attributes
    # the same attribute can be present in several releases
    attributes = models.ManyToManyField(Attribute, blank=True, null=True)

#An instance entry can be compared to an object in OO :
# it instantiates a release
# it can hold its own value for each of the attributes in this release.
#Nb : Attributes are all optional.
class Instance(models.Model):
    #the instantiated release
    release = models.ForeignKey(Release)

#Store the actual attribute-value pairs for the different instances.
class InstanceAttribute(models.Model):
    instance = models.ForeignKey(Instance)
    attribute = models.ForeignKey(Attribute)
    value = models.CharField(max_length=60) 
```

## 问题

用这种方法使用强大的 Django 管理员会很棒。

*   一切都是开箱即用的，可以添加**Releases**并使用**Attributes**组合它们。

*   **实例**添加视图变得越来越复杂。（相关的**Release** id 可以通过 GET 形式的 url 转发：*instance/add/?release=x*）。当这个视图被加载时，我们需要提出一个**InstanceAttribute**的 InlineFormset ：

    1.  与组成相关**版本的****属性**数量匹配的表单数量
    ***   对于这些表单中的每一个，应将*Attribute字段初始化为 Release 的***Attribute**，并且它的查询集被限制为仅显示此**Attribute**。**

 **我们可以通过覆盖`ModelAdmin.get_formsets()`返回一个`inlineformset_factory`并将*额外*参数设置为所需数字的方法来解决#1。
仔细查看[add_view 源代码](https://github.com/django/django/blob/stable/1.4.x/django/contrib/admin/options.py#L924)，我找不到实现#2 的好方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:05:39.530

我正在用一个有效的解决方案来回答我自己的问题*，*但至少可以说并不令人满意。我认为它还可以通过展示我想要达到的目标来帮助读者理解上述问题。

## 基于全局状态的解决方案

所以（坏的）想法是将视图使用的**InstanceAttribute**表单子类化。它允许覆盖表单`__init__`，同时引入具有**InstanceAttributeForm**静态数据成员的全局状态。

*   这个全局状态应该接收数据，例如必须呈现的**属性**列表，只要是当前构造的表单的**计数器**（用于索引**属性**列表）。
*   然后，被覆盖的对象`__init__`使用这些全局变量将属性绑定到由表单集构造的每个表单。

编码

```
class InstanceAttributeForm(forms.ModelForm):
    #form_id count the initializations (to know which form is currently constructed by the formset)
    form_id = 0
    total = 0
    #the list of attributes in the instantiated release
    #it should be populated before the formset start the constructor calls
    attributes = []

    def __init__(self, *args, **kwargs):
        super(InstanceAttributeForm, self).__init__(*args, **kwargs)
        #"deferred template rendering' is trying to construct 3 additional forms
        #bonus point if you can comment on the reason for this behavior  ; )
        if InstanceAttributeForm.form_id==InstanceAttributeForm.total:
            return

        attribute = InstanceAttributeForm.attributes[InstanceAttributeForm.form_id]
        self.initial = {'attribute' : attribute}
        self.fields['attribute'].queryset = Attribute.objects.filter(id=attribute.id)
        InstanceAttributeForm.form_id += 1 
```

我们必须在实际进入表单的构造函数之前初始化这些全局变量，并将***InstanceAttributeForm***挂钩到表单集工厂。为此，我们可以自定义**Instance** ModelAdmin ：

```
class InstanceAdmin(admin.ModelAdmin):  
    #Responsible for re-initializing the global state each time before calling the super add_view
    def add_view(self, request, form_url='', extra_context=None):
        initialize_globalstate(request)
        return super(InstanceAdmin, self).add_view(request, form_url, extra_context)

    #Return a formset factory specifying the exact number of required forms
    # and hooking our specialised ModelForm class.
    def get_formsets(self, request, obj=None):
        yield inlineformset_factory(
            Instance,
            InstanceAttribute,
            form=InstanceAttributeForm,
            can_delete=False,
            extra=InstanceAttributeForm.total) 
```

为了完整起见，全局状态初始化过程（在`add_view()`上面的覆盖中调用）：

```
def initialize_globalstate(request):
    instantiated_release = Release.objects.get(id=request.GET['release'])

    InstanceAttributeForm.form_id = 0
    InstanceAttributeForm.attributes = instantiated_release.attributes.all()
    InstanceAttributeForm.total = len(InstanceAttributeForm.attributes) 
```********

# perl - 如何将两个字符串作为参数传递给 perl 脚本？

> ID：15212624
> 
> 赞同：0
> 
> 时间：2013-03-04T22:46:18.187
> 
> 标签：perl

我编写了一个 perl 脚本，它可以提取 Excel 工作表的内容。该脚本在命令行上打印出 excel 工作表的内容。我被什么困住了？我想要一种用 perl 进行数据挖掘的东西。我的excel表格是这样的...

```
 SUNY MARK 40%

  MIT  JOHN 60%

  UIUC LIU  77% 
```

假设如果我给 myscript.pl`'SUNY' 'MARK'` 它应该提取 40% 并应该在命令行上打印出来。

`Spreedsheet::Parseexcel`到目前为止我正在使用。但我对如何实现这个功能一无所知。正在使用`ARGV[]`一个好的方法吗？帮帮我好吗？任何想法都非常感谢..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:58:24.607

```
myscript.pl 'SUNY' 'MARK' 
```

会将 SUNY 存储在 $ARGV[0] 中，将 MARK 存储在 $ARGV[1] 中。然后您将遍历行，检查单元格 0 和 1 以查看它们是否匹配 $ARGV[0] 和 $ARGV[1]，如果匹配，则返回单元格 2。

# c# - 在转换为 PDF 时，在 HTML 表格单元格中将数组元素写入新行

> ID：15212631
> 
> 赞同：1
> 
> 时间：2013-03-04T22:46:37.127
> 
> 标签：c#, html, pdf, pdf-generation

我正在使用 Winnovative 转换器工具将 HTML 表格转换为 PDF。我以编程方式创建了一个 HTML 表格，并将一个数组分配给一个表格单元格，如下所示：

```
td10.Text dt.Rows[i][5].ToString(); 
```

表格单元格以段落格式显示文本，没有任何换行符。我想用逗号分割它，并在同一个单元格的新行上写下一个内容（逗号之后）。例如，每个逗号后的换行符。

我尝试了以下方法；

```
string descri = dt.Rows[i][5].ToString();
            char[] delimiter1 = new char[] { ',' };
            string[] array2 = descri.Split(delimiter1,
    StringSplitOptions.RemoveEmptyEntries);
            foreach (string item in array2)
            {
                td10.Text += item.ToString() + "\n";
            } 
```

在调试时（在文本可视化器中），这会将逗号后面的字符串分开并写在新行上，但是当我打开 PDF 时，它仍然像段落一样写。

有什么办法可以做到这一点。我会很感激你的建议和帮助。谢谢你。

# jquery - 在不同页面上启动时，主页上的滑块未初始化

> ID：15212632
> 
> 赞同：0
> 
> 时间：2013-03-04T22:46:37.817
> 
> 标签：jquery, ajax, jquery-mobile

我的移动主页上的滑块不会初始化，*只有在加载到不同的页面时*。

您可以通过从[http://www.nolanknill.com/mobile/projects](http://www.nolanknill.com/mobile/projects)开始并导航到主页来进行测试。如果您在主页 ( [http://www.nolanknill.com/mobile](http://www.nolanknill.com/mobile) ) 上重新加载浏览器，滑块会被初始化并正常工作。

这是我现在拥有的代码，我也尝试过 .bind() 和 .live()，但没有成功。我已经使用这些来代替 .ready() 因为 .ready() 不适用于 jQuery mobile 中的 AJAX 请求（或类似的东西）

```
<script>
$("#home").ready(function(){
    slider = new Swipe(document.getElementById('slider'));
});
</script> 
```

不管怎样，让我知道你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:03:14.397

将此 jQuery 添加到我所有页面的页眉中使滑块工作。

```
 $(document).delegate('#homepage', 'pageshow', function () {
        slider = new Swipe(document.getElementById('slider'));
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:52:28.170

在萤火虫中注意到，当我首先加载[http://www.nolanknill.com/mobile/projects](http://www.nolanknill.com/mobile/projects)页面然后导航到主页时，它缺少对名为 Swipe.js 的文件的引用。看起来它没有正确加载该文件。

# rest - REST：我如何知道 PUT 请求是否执行需要身份验证的更新或创建操作？

> ID：15212635
> 
> 赞同：0
> 
> 时间：2013-03-04T22:46:59.730
> 
> 标签：rest, authentication, request, put

我有一个这样的网址：

```
http://www.example.com/users/ 
```

我想用 PUT 请求创建一个新用户：

```
requests.put('http://www.example.com/users/john/', data={'password': 1234}) 
```

实际上，此请求创建了一个新的用户资源并返回 201“已创建”状态代码，如果我想更新该资源，我可以发出如下请求：

```
requests.put('http://www.example.com/users/john/', data={'username': 'jane'}) 
```

好吧，我可以在 Location 标头中返回带有 301“永久移动”状态代码和新创建的 url 的响应。当我试图在控制器代码中实现这样的逻辑时，问题就出现了，在逻辑的某些部分，我有一些代码可以检查用户名是否存在，例如：

```
if username in users:
  # do something 
```

如果我使用 PUT 创建一个新资源，在这种情况下，一个用户说用户名已经存在，我可以返回一个 409“冲突”状态代码，如果用户名不存在，则返回一个消息，如“用户名已经存在，选择另一个” '不存在我只是返回一个 201“创建”，逻辑上这个创建操作不需要身份验证原因就像一个“注册”操作。

另一方面，当我请求更新资源时，我需要进行某种身份验证以允许用户更新他的帐户信息。

因此，如果我使用用户名变量来确定我必须执行的操作，并且用户名名称已经存在，我不知道何时需要验证或无效的用户名响应来响应。

我的第一个想法是使用 POST 请求来创建新用户并 PUT 仅用于更新行为，但似乎使用 POST 来创建标识符不是由服务器创建的资源是一个坏主意。

所以我的问题是，是否有任何方法可以通过 PUT 请求实现创建和更新功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:57:36.760

对于更新，另一个选项是 PATCH，您可以验证该请求并将其视为纯更新。

当您创建一个对象时，您可以针对集合创建它并返回 201。当您完全替换整个资源时，您可以针对用户资源进行 PUT。PATCH 可能用于部分更新。

```
Create (Anonymous)
Request  : [POST|PUT]  /users/        body=full object (incuding name)
Response : 201 LOCATION =  /users/123

Overwrite (Auth)
Request   : [PUT]      /users/123     body=full object - id implies overwrite    
Response  : 200

Update (Auth)
Request   : [PATCH]    /users/123     body=partial objects      
Response  : 200 
```

通过针对父资源（在本例中为用户集合）创建资源（通过 POST | PUT）。它解决了这个问题。这也是一种很好的做法。您还应该使用永久链接（int id 或 guid）创建资源，以便用户可以更改他们的名称并且不会让存储的引用中断。

如果您希望标识符成为永久链接并且您希望它由客户端创建（如评论中所建议的那样），那么您需要为标识符使用类似 guid 的东西。

# ruby-on-rails - 在 Rails 中使用 Presenter

> ID：15212637
> 
> 赞同：5
> 
> 时间：2013-03-04T22:47:12.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

```
json = JSON.parse(response.body)
    @games = json['machine-games']

    paging = json['paging']
    if paging
      if paging['next']
        next_page_query = paging['next'].match(/\?.*/)[0]
      @next_page = "/machine_games/search#{next_page_query}"
    end

    if paging['previous']
      previous_page_query = paging['previous'].match(/\?.*/)[0]
      @previous_page = "/machine_games/search#{previous_page_query}"
    end
  end 
```

以上是控制器中 show 方法的一小部分逻辑。我如何将它移动到演示者，以便它保存 machine_games JSON 响应并提供访问游戏和下一页/上一页链接的方法（以及是否它们存在）。{不太熟悉使用演示者模式}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T02:07:26.797

让我们创建一个演示者，用于将 JSON 响应解析为`@games`、`@next_page`和`@previous_page`。

```
# app/presenters/games_presenter.rb

class GamesPresenter

  attr_reader :games, :next_page, :previous_page

  def initialize json
    @games = json['machine-games']

    paging = json['paging']
    if paging && paging['next']
      next_page_query = paging['next'].match(/\?.*/)[0]
      @next_page = "/machine_games/search#{next_page_query}"
    end

    if paging && paging['previous']
      previous_page_query = paging['previous'].match(/\?.*/)[0]
      @previous_page = "/machine_games/search#{previous_page_query}"
    end
  end

end 
```

现在你的控制器动作应该是这样的：

```
def show
  # ...
  @presenter = GamesPresenter.new(json)
end 
```

您可以在视图中使用它：

```
<% @presenter.games.each do |game| %>
  ...
<% end %>

<%= link_to "Previous", @presenter.previous_page %>
<%= link_to "Next", @presenter.next_page %> 
```

为了告诉 Rails 加载 apps/presenters/ 目录以及 models/、controllers/、views/ 等，请将其添加到 config/application.rb：

```
config.after_initialize do |app|
  app.config.paths.add 'app/presenters', :eager_load => true
end 
```

# matlab - 如何在 MATLAB 中处理方法（obj）调用？

> ID：15212641
> 
> 赞同：0
> 
> 时间：2013-03-04T22:47:24.010
> 
> 标签：matlab

现在，据我所知，调用`obj.method`或`method(obj)`似乎给出了相同的结果。然而，当我试图了解`subsref`这些情况下的行为方式时，我`method(obj)`突然意识到似乎并没有通过 subsref 机制。那么这些调用是如何处理的，是否有一种实用的方法来覆盖它们呢？

我正在尝试这样做，所以我可以使类似的事情成为`method(object).otherMethod`可能（我显然会通过 custom 来处理`subsref`）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:25:34.410

`method(obj)`实际上只是调用函数`method`on `obj`。`obj.method`通过`subsref`，然后将其分配给相同的功能，除非您已经实现了自己的 custom `subsref`。我不确定你所说的“覆盖”是什么意思`method(obj)`——你不能让 MATLAB 调度过程以不同的方式工作。

而不是`method(obj).otherMethod`，您通常会这样做`tmp = method(obj); tmp.otherMethod`。

如果您尝试完全重新实现`subsref`到处理任意深度嵌套和复杂表达式的程度 - 例如可能采用的形式`obj.property{1}.structfield(2).method.otherMethod`- 事情会变得非常复杂非常快。我通常会尝试只处理较小深度的嵌套，然后将任何更深的嵌套传递给`builtin('subsref')`.

# modal-dialog - rails_admin 任意打开的模态表单

> ID：15212642
> 
> 赞同：4
> 
> 时间：2013-03-04T22:47:27.513
> 
> 标签：modal-dialog, rails-admin

嗨，我正在使用 Rails Admin，我需要在某些模型上打开任意模式表单。为了简单起见，我希望有一个链接，一旦单击它就会打开一个模式表单。我虽然只是在触发模态表单的链接上设置了什么类和“data-*”属性，但看起来它更复杂。我如何实现这一目标？我一直在浏览 gem 中的部分视图和 javascript，以尝试了解此功能是如何实现的，例如在一对多关系上，但代码有点超出我的知识范围，我无法完成。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-14T16:28:43.983

尽管 Rails Admin remoteForm 小部件是为在表单中工作而构建的，但您可以在其他地方使用它，如下所示：

在您的视图中，在 div 中，在属性中插入带有 RA 内部链接的按钮`data-link`，例如：

```
<div id="new-payment">
  <a href="#" data-link="<%= new_path(:payment, associations: {client: client.id}, modal: true) %>" class="create btn btn-info">
    New Payment
  </a>
</div> 
```

请注意，该链接具有 modal=true 属性。外部 div #new-payment 是将要应用小部件的 DOM 对象。

另一个重要提示是按钮必须具有`create`新寄存器或`update`更新现有寄存器时的类。

现在您可以在您的 javascript 中调用 remoteForm 小部件（即 /app/assets/javascripts/rails_admin/custom/ui.js）：

```
$(document).on('rails_admin.dom_ready', function() {
  $('#new-payment').remoteForm({
    success: function(data, status, xhr) { 
      $.pjax.reload({container:"[data-pjax-container]"}); 
    }
  });
}); 
```

在这种情况下，我正在利用 pjax，并设置一个“成功”回调，在创建付款后调用，以重新加载页面的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:42:52.447

我认为您无法通过配置来完成此操作。您将需要扩展现有操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T08:27:35.520

我也试图找出解决方案，我的方法是将 rails admin 中调用的函数复制到我的代码库中。它的方法不好，但正在工作。

> [https://github.com/sferik/rails_admin/blob/master/app/assets/javascripts/rails_admin/ra.remote-form.js](https://github.com/sferik/rails_admin/blob/master/app/assets/javascripts/rails_admin/ra.remote-form.js)

**创建**类绑定到打开模型的操作，但它不起作用。所以我将**_bindModalOpening**、**_bindFormEvents**和**_getModal**函数放入我的代码库。

# ruby-on-rails - Highcharts 图表中格式化的错误数据点

> ID：15212643
> 
> 赞同：0
> 
> 时间：2013-03-04T22:47:28.097
> 
> 标签：ruby-on-rails, highcharts, highstock

我正在使用 highstocks 来显示从美联储 API 检索到的数据。数据是 1929-2012 年的年度值。我有两个我认为是确切的 jsfiddle 示例，它们给出了不同的错误结果。

版本 1： http: [//jsfiddle.net/johngalt/NeC54/](http://jsfiddle.net/johngalt/NeC54/) 版本 1a：http: [//jsfiddle.net/johngalt/LdWh4/](http://jsfiddle.net/johngalt/LdWh4/)

我的问题是为什么两组代码会产生不同的结果？另外，我在 Rails 中从 API 传递给我的字符串计算 Epoch Time：

```
tempDateHolder = DateTime.strptime(observation.date.to_s, '%Y-%m-%d').to_i * 1000 
```

日期的原始形式是“1932-01-01”

# ipad - iPad iOS 6.1 UIPopover ImagePicker 在按两次栏按钮时崩溃

> ID：15212644
> 
> 赞同：0
> 
> 时间：2013-03-04T22:47:42.483
> 
> 标签：ipad, ios6, uiimagepickercontroller, uipopovercontroller

我`image picker`在 iPad 上创建了一个弹出框。此功能有效。但是，如果您按`UIBarButton`两次应用程序崩溃。

```
@property (retain) UIPopoverController *popoverController1;

-(IBAction)photos:(id)sender {

    test = false;

    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.wantsFullScreenLayout = NO;
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    imagePicker.allowsEditing = YES;

    self.popoverController1 = [[UIPopoverController alloc] initWithContentViewController:imagePicker];

    _popoverController1.delegate = self;

    [_popoverController1 setPopoverContentSize:CGSizeMake(1024, 500)];
    [self.popoverController1 presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:35:05.757

您可能需要检查弹出框是否可见。如果您创建了它的对象，则将其关闭并再次创建弹出框

```
if ([self.popoverController isPopoverVisible]) {
    [self.popoverController dismissPopoverAnimated:YES];
    [popoverController setDelegate:nil];
    [popoverController release]; // Use release only if , it is without ARC
}
else
{
    // Create popover and assign its properties.
} 
```

这肯定会解决您在所有 iOS 版本中的问题。:) 祝你编码愉快。！！

# laravel - Laravel 4：它支持/有哪些事件？

> ID：15212652
> 
> 赞同：3
> 
> 时间：2013-03-04T22:48:37.870
> 
> 标签：laravel, laravel-4

我看到了[这个关于 Laravel 事件的 SO question](https://stackoverflow.com/questions/13059744/where-can-i-get-a-complete-list-of-laravel-events-fired-by-the-core-libaries)，但它们适用于 Laravel 3。我已经尝试了所有这些，但它们都不起作用。这是我的代码`global.php`：

```
$event_names = array("laravel.done", "laravel.log", "laravel.query", "laravel.resolving", "laravel.composing", "laravel.started", "laravel.controller.factory", "laravel.config.loader", "laravel.language.loader", "laravel.view.loader", "laravel.view.engine", "view.filter", "eloquent.saving", "eloquent.updated", "eloquent.created", "eloquent.saved", "eloquent.deleting", "eloquent.deleted");
foreach ($event_names as $event_name) {
    echo "Listening to {$event_name}<br/>";
    Event::listen($event_name, function($event) {
        var_dump($event);
        exit;
    }); 
} 
```

它只是开始监听，但没有触发任何事件。我尝试过自己使用它们来触发它们`Event::fire()`并且它有效，但显然这不是我想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-06T03:08:21.670

我在 laravel wiki 中找到了这个列表：[http://wiki.laravel.io/Event_List_(Laravel_4)](http://wiki.laravel.io/Event_List_(Laravel_4))

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T17:41:53.687

到目前为止，我在 Laravel 4 中发现了以下事件：

```
auth.login
auth.logout

artisan.start

illuminate.query
illuminate.log

eloquent.updating
eloquent.updated
eloquent.creating
eloquent.created

locale.changed

composing: {viewName} 
```

当我发现更多时，我会更新这个列表

# jquery - jQuery 动画更改

> ID：15212657
> 
> 赞同：0
> 
> 时间：2013-03-04T22:48:56.463
> 
> 标签：jquery

有人在这里看到问题吗？它不工作。

```
$('#div1').hover(
                function () {                       
                    $('#div2').stop().animate({ backgroundPosition : '(0 -60px)' }, 500);                       
                    $('#div3').stop().animate({ marginRight : '-=10px;' }, 500);
                },
                function () {                   
                    $('#div2').stop().animate({ backgroundPosition : '(0 0)'}, 500);                        
                    $('#div3').stop().animate({ marginRight : '+=10px;'}, 500);
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:50:30.870

**[JSFiddle](http://jsfiddle.net/exEqP/2/)**

您在右边距宽度中有分号，在背景位置有括号。

此外，您没有在小提琴中加载 jQuery。

```
$('#div1').hover(
    function () {                       
        $('#div2').stop().animate({ 'background-position-x' : '0px', 'background-position-y': '-60px' }, 500);                        
        $('#div3').stop().animate({ 'margin-right' : '-=10px' }, 500);
     },
    function () {
        $('#div2').stop().animate({ 'background-position-x' : '0px', 'background-position-y': '0px'}, 500);                        
        $('#div3').stop().animate({ 'margin-right' : '+=10px'}, 500);
}); 
```

我还对 css 定义进行了字符串化，有时它们不能正常工作，所以我总是使用字符串以防万一。

根据[这个问题](https://stackoverflow.com/questions/5171080/jquery-animate-background-position)分离 x 和 y 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:52:51.467

这个：

```
$('#div2').stop().animate({ backgroundPosition : '(0 -60px)' }, 500); 
```

是无效的！

jQuery 不理解`'(0 -60px)'`，所以什么也没有发生，而且无论如何你不能为这两个值设置动画，因为 animate 一次只接受一个值，如果我没记错的话，那将是 X 轴，而不是 Y 轴。您需要为此使用该`step()`方法：

**编辑：**

这个答案中实际上有一个解决背景动画问题的方法，那就是跨浏览器：

**[Y 轴上的 JQuery 动画背景图像](https://stackoverflow.com/questions/12340130/jquery-animate-background-image-on-y-axis)**

# c++ - 指向堆上数组的指针的地址

> ID：15212660
> 
> 赞同：0
> 
> 时间：2013-03-04T22:49:17.703
> 
> 标签：c++, arrays, pointers

我正在尝试在堆上存储一个字符数组。

以下代码有效

```
char *array[3];
*array = new char; 
```

还有以下

```
char *array[3];
array[0] = new char; 
```

但不是以下

```
char *array[3];
array = new char; 
```

我查看了`*array`和`array[0]`的内容`array`。第一个和第二个在分配 using 后不包含有效的指针地址，`new`但第三个包含。那么是什么让第三个不起作用呢？其他两个如何工作，而它们似乎只是存储一些未知符号（例如 $、%、-）而不是指针的实际地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T22:52:00.820

也许这将有助于详细说明 a`char *array[3]`是什么。这是一个由三个指针组成的数组，它们指向字符。也就是说，`array[0]`、`array[1]`和`array[2]`都是指向一个字符的指针。所以，`*array`and`array[0]`是存储指向字符的指针的好地方（实际上是同一个地方），但`array`它甚至不是指针，它是一个数组，所以试图在那里存储一个指针是没有意义的。

如果要将字符存储在堆中（使用 c 样式的字符数组），您应该这样做`char *array;`，然后将其初始化为`array = new char[3];`

但是，由于您使用的是 C++，因此建议您`std::string`在尝试存储字符串或`std::vector`想要单个字符列表时使用。

# jmeter - 如何设置服务器来参加 jmeter 通话？

> ID：15212663
> 
> 赞同：1
> 
> 时间：2013-03-04T22:49:28.470
> 
> 标签：jmeter

在进入问题本身之前，让我简要介绍一下我们目前的情况：
我们有 15 个客户，我们为每个客户使用 jmeter 运行后端测试用例，每个客户都有一个运行每晚构建的 VM和 jmeter 安装，外部 shell 脚本（由 Jenkins 触发）以非 gui 模式调用 jmeter 并执行测试。

现在，我们要做的是从 15 个客户的 VM 中的每一个中删除所有 jmeter 客户端，并将其仅安装在一个 jmeter-VM 中以参加来自此 shell 脚本的调用。换句话说，每个客户虚拟机都会联系这个服务器并请求安装的 jmeter 实例来运行测试用例。

这就引出了一个问题：
如何设置服务器来参加 jmeter 呼叫？
这可能吗？
此服务器必须能够回答至少 2 个来自其他 VM 的并行请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:32:04.470

这是可能的，但不建议用于性能测试，因为同一台机器上的两个 JMeter 会影响彼此的结果。

但是，您已经在 VM 上，结果可能会受到虚拟化问题的影响。此外，您可能只想运行功能测试，所以：

如果您曾经在 JMeter-server 上将 jmeter 测试作为远程测试运行，那么只需在不同的目录中进行两个单独的 jmeter 安装，并配置不同的安装以侦听不同的端口。使用这些端口来选择在哪个安装上运行测试。有关详细信息，请参阅[http://jmeter.apache.org/usermanual/remote-test.html](http://jmeter.apache.org/usermanual/remote-test.html)

# php - 使用 HTML 表单和 PHP 添加

> ID：15212664
> 
> 赞同：0
> 
> 时间：2013-03-04T22:49:30.350
> 
> 标签：php, html, forms, math

我在添加从 HTML 表单中提取的数字时遇到了一些问题。我知道这是一个非常基本的问题，但似乎没有任何效果。我正在尝试在诸如拼字游戏之类的心理游戏中将用户的分数相加。该代码应该获取输入的分数和旧分数并将它们相加，尽管我还没有添加添加数字的部分。我在哪里以及如何在代码中显示添加的分数？您可以在以下位置访问 Web 应用程序：ripdvd.x10.mx/index.php。感谢 Michi 已经尝试帮助我解决这个问题！

```
<?php
// Get data from HTML form.
$addScore1 = $_POST['addScore1'];
$addScore2 = $_POST['addScore2'];
$oldScore1 = $_POST['oldScore1'];
$oldScore2 = $_POST['oldScore2'];

?>

// Generate HTML form
<html>
    <head>
         <title>Score Add</title>
    </head>

    <body>
        <div id="displayNames">   
            <p><?php echo $player1; ?> current score: <?php echo $oldScore1; ?>
            <form method="post" action="">
                <label for="addScore1">Enter your score:</label>
                <input type="text" name="addScore1" id="addScore1" />
                <input type="hidden" name="oldScore1" id="oldScore1" value="<?php echo $oldscore1; ?>" />
            <input type="submit" />
        </p>

        <p><?php echo $player2; ?> current score: <?php echo $oldScore2; ?>
            <label for="addScore2">Enter your score:</label>
            <input type="text" name="addScore2" id="addScore2" />
            <input type="hidden" name="oldScore2" id="oldScore2" value="<?php echo $oldscore2; ?>" />
                <input type=\"submit\"/>
            </form>
             </p>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:53:23.020

改变

```
<input type="text" name="addScore1" id="addScore1" /> 
```

到

```
<input type="text" name="addScore1" id="addScore1" value="<?php echo $addScore1; ?>" /> 
```

和

```
<input type="text" name="addScore2" id="addScore2" /> 
```

到

```
<input type="text" name="addScore2" id="addScore2" value="<?php echo $addScore2; ?>" /> 
```

那是你需要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:59:48.210

例如，您可以在要显示所有分数变量总和的位置添加以下代码：

```
<?php
echo intval($addScore1)+intval($addScore2)+intval($oldScore1)+intval($oldScore2);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:05:59.057

```
<?php
// Get data from HTML form. 
$addScore1 = $_POST['addScore1'];
$addScore2 = $_POST['addScore2'];
$oldScore1 = $_POST['oldScore1'];
$oldScore2 = $_POST['oldScore2'];

$newScore1 = (int) $oldScore1 + (int) $addScore1;
$newScore2 = (int) $oldScore2 + (int) $addScore2;
?>
<h2>Old Sores</h2>
<p>
<input type="text" value="<?=$oldScore1?>" name="oldScore1">
<input type="text" value="<?=$oldScore2?>" name="oldScore2">
</p>
<h2>New Sores</h2>
<p>
<input type="text" value="<?=$newScore1 ?>" name="newScore1">
<input type="text" value="<?=$newScore1 ?>" name="newScore1">
</p> 
```

这是你需要的吗？

**更新：** 试试这个代码：刚刚测试过它可以用作计算器 :) 希望这就是你所需要的。

```
<?php
// Get data from HTML form. 
$addScore1 = (int) $_POST['addScore1'];
$addScore2 = (int) $_POST['addScore2'];

$oldScore1 = (int) $_POST['newScore1'];
$oldScore2 = (int) $_POST['newScore2'];

$newScore1 = (int) $oldScore1 + (int) $addScore1;
$newScore2 = (int) $oldScore2 + (int) $addScore2;

?>
<html>
    <head>
         <title>Score Add</title>
    </head>

    <body>  
        <form method="post" action="">
        <h2>Old Scores</h2>
        <p>
        <input type="text" value="<?=$oldScore1?>" name="oldScore1">
        <input type="text" value="<?=$oldScore2?>" name="oldScore2">
        </p>
        <h2>New Scores</h2>
        <p>
        <input type="text" value="<?=$newScore1 ?>" name="newScore1">
        <input type="text" value="<?=$newScore2 ?>" name="newScore2">
        </p>
        <h2>Add Scores</h2>
        <p>
        <input type="text" value="" name="addScore1">
        <input type="text" value="" name="addScore2">
        </p>
        <input type="submit" /> 
        </form>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T23:18:14.667

使用 cookie 在 post 调用之间保持值的简单解决方案：

```
<?php
// Get data from HTML form.
$addScore1 = $_POST['addScore1'];
$addScore2 = $_POST['addScore2'];
$curr1=$_COOKIE["score1"]+$addScore1;
$curr2=$_COOKIE["score2"]+$addScore2;
setcookie("score1", $_COOKIE["score1"]+$addScore1, time()+3600);
setcookie("score2", $_COOKIE["score2"]+$addScore2, time()+3600);

?>

// Generate HTML form 
```

```
<body>
    <div id="displayNames">   
        <p><?php echo $player1; ?> current score: <?php echo $oldScore1; ?>
        <form method="post" action="messing.php">
            <label for="addScore1">Enter your score:</label>
            <input type="text" name="addScore1" id="addScore1" />
            <input type="hidden" name="oldScore1" id="oldScore1" value="<?php echo $oldscore1; ?>" />
        <input type="submit" />
    </p>

    <p><?php echo $player2; ?> current score: <?php echo $oldScore2; ?>
        <label for="addScore2">Enter your score:</label>
        <input type="text" name="addScore2" id="addScore2" />
        <input type="hidden" name="oldScore2" id="oldScore2" value="<?php echo $oldscore2; ?>" />
            <input type="submit"/>
        </form>
         </p>
    </div>

    <p>first added score <?php echo $curr1?></p>
    <p>second added score <?php echo $curr2?></p>
</body> 
```

# ios - Shinobi Charts iOS -> 自定义十字准线行为，选定数据点的轴上自定义刻度，在图表上绘图

> ID：15212666
> 
> 赞同：4
> 
> 时间：2013-03-04T22:49:39.547
> 
> 标签：ios, charts, shinobi

目前我正在试用 ShinobiCharts。我希望他们能够满足我工作的公司正在制作的应用程序的要求。在这个应用程序中，必须能够跟踪图表中的曲线。我有一些问题：

1.  我可以在 xAxis 上添加一个自定义刻度，将所选点标记在其上（类似于十字准线的线，但带有带有轴上值的标签）？我记得在某处使用 ShinobiCharts 在线制作的具有该功能的图表，但在 API 中找不到它。

2.  十字准线似乎画了一个方便的“目标圆”。我可以在给定的图表点按需绘制这些圆圈吗？

3.  十字准线似乎是我们想要的东西……差不多。它应该在几条曲线上绘制这些目标，并沿着绘制的系列（不仅仅是一个）跟踪它们。可以这样做吗？

4.  其中可以覆盖十字准线行为 - 这样它只有在第一次长按时才可移动，然后图表再次可平移。再次长按后可以再次拖动十字准线。

将不胜感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:15:14.677

请查看本教程。它不能回答你所有的问题，但它会有所帮助：

[http://www.shinobicontrols.com/blog/posts/2012/07/19/customizing-that-c​​rosshair/](http://www.shinobicontrols.com/blog/posts/2012/07/19/customizing-that-crosshair/)

# actionscript-2 - AS2 - 带有一个滚动窗格/条的多个动态测试框

> ID：15212668
> 
> 赞同：0
> 
> 时间：2013-03-04T22:49:50.427
> 
> 标签：actionscript-2

对于我的游戏中的高分，我为排名设置了一个静态文本框，为用户名和分数设置了多个动态单行文本框。由于我将显示前 50 名分数，因此我需要滚动功能。我知道如何为单个文本框执行此操作，但我很难理解如何使其适用于多个文本框。找了又找。

任何帮助，将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:58:53.940

您可以：

1.  将所有文本框放在一个新的 MovieClip 中，将该剪辑标记为“Export for ActionScript”，为其指定一个标识符，然后将该标识符输入到 ScrollPane 组件的 contentPath 中。然后 ScrollPane 会将所有文本框作为一个单元移动。
2.  使用 DataGrid 组件而不是文本框。这将使您拥有每个用户的行，以及排名、用户名和分数的列。

# c++ - 使用 boost::spirit 解析多种类型的单值

> ID：15212671
> 
> 赞同：3
> 
> 时间：2013-03-04T22:50:04.700
> 
> 标签：c++, boost, boost-spirit

我想用boost spirit解析一个可以有多种类型的值；例如：

```
singleValueToBeParsed %= (double_ | int_ | bool_ | genericString);

genericString   %= +(char_("a-zA-Z")); 
```

解析为 int 或 double 的情况似乎相当简单：

[使用 boost 精神 (longest_d) 解析 int 或 double](https://stackoverflow.com/questions/13261502/parse-int-or-double-using-boost-spirit-longest-d)

..但我不确定如何扩展它以合并其他类型，包括通用字符串和布尔值..

有任何想法吗？

谢谢，

本。

编辑：所以根据答案，我更新了我的语法如下：

```
genericString   %= +(char_("a-zA-Z"));
intRule         %= int_;

doubleRule      %= (&int_ >> (double_ >> 'f'))
                | (!int_ >> double_ >> -lit('f'));

boolRule        %= bool_; 
```

其中每个 qi 规则都有一个字符串、整数、双精度或布尔迭代器

然后我有一个规则

```
 add    %= string("add") >> '('
               >> (intRule | doubleRule | genericString) >> ','
               >> (intRule | doubleRule | genericString) >> ','
               >> genericString
               >> ')' >> ';'; 
```

它期望采用语法 add(5, 6.1, result); 或添加（a，b，结果）；但到目前为止，如果前两个参数是整数，它唯一的解析。

注意添加规则被指定为：

```
qi::rule<Iterator, Function(), ascii::space_type> add; 
```

函数指定为：

```
typedef boost::any DirectValue;

struct Function
{
    //
    // name of the Function; will always be a string
    //
    std::string name;

    //
    // the function parameters which can be initialized to any type
    //
    DirectValue paramA;
    DirectValue paramB;
    DirectValue paramC;
    DirectValue paramD;
    DirectValue paramE;
};

BOOST_FUSION_ADAPT_STRUCT(
    Function,
    (std::string, name)
    (DirectValue, paramA)
    (DirectValue, paramB)
    (DirectValue, paramC)
    (DirectValue, paramD)
    (DirectValue, paramE)
) 
```

编辑2：

现在它的解析正确。请参阅[http://liveworkspace.org/code/3asg0X%247](http://liveworkspace.org/code/3asg0X%247)，由 llonesmiz 提供。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T00:00:56.830

这是一个有趣的练习。

当然，一切都取决于输入语法，您很方便地没有指定。

但是，为了演示，我们假设一个文字语法（非常）松散地基于 C++ 文字，我们可以提出以下内容来解析十进制（有符号）整数值、浮点值、布尔文字和简单的字符串文字：

```
typedef boost::variant<
    double, unsigned int, 
    long, unsigned long, int, 
    bool, std::string> attr_t;

// ...

start = 
    (
        // number formats with mandatory suffixes first
        ulong_rule | uint_rule | long_rule | 
        // then those (optionally) without suffix
        double_rule | int_rule | 
        // and the simple, unambiguous cases
        bool_rule | string_rule
    );

double_rule = 
         (&int_ >> (double_ >> 'f'))     // if it could be an int, the suffix is required
       | (!int_ >> double_ >> -lit('f')) // otherwise, optional
       ;   
int_rule    = int_;
uint_rule   = uint_ >> 'u' ;
long_rule   = long_ >> 'l' ;
ulong_rule  = ulong_ >> "ul" ;
bool_rule   = bool_;
string_rule = '"' >> *~char_('"') >> '"'; 
```

有关测试用例的输出，请参阅链接的现场演示：http: **[//liveworkspace.org/code/goPNP](http://liveworkspace.org/code/goPNP%241)**

**注意**只有一个测试输入（“无效”）应该失败。其余的应该解析为文字，可选择留下未解析的剩余输入。

## 完整的测试演示

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>

namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;

typedef boost::variant<double, unsigned int, long, unsigned long, int, bool, std::string> attr_t;

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, attr_t(), Skipper>
{
    parser() : parser::base_type(start)
    {
        using namespace qi;

        start = 
            (
                // number formats with mandatory suffixes first
                ulong_rule | uint_rule | long_rule | 
                // then those (optionally) without suffix
                double_rule | int_rule | 
                // and the simple, unambiguous cases
                bool_rule | string_rule
            );

        double_rule = 
                 (&int_ >> (double_ >> 'f'))     // if it could be an int, the suffix is required
               | (!int_ >> double_ >> -lit('f')) // otherwise, optional
               ;   
        int_rule    = int_;
        uint_rule   = uint_ >> 'u' ;
        long_rule   = long_ >> 'l' ;
        ulong_rule  = ulong_ >> "ul" ;
        bool_rule   = bool_;
        string_rule = '"' >> *~char_('"') >> '"';

        BOOST_SPIRIT_DEBUG_NODE(start);
        BOOST_SPIRIT_DEBUG_NODE(double_rule);
        BOOST_SPIRIT_DEBUG_NODE(ulong_rule);
        BOOST_SPIRIT_DEBUG_NODE(long_rule);
        BOOST_SPIRIT_DEBUG_NODE(uint_rule);
        BOOST_SPIRIT_DEBUG_NODE(int_rule);
        BOOST_SPIRIT_DEBUG_NODE(bool_rule);
        BOOST_SPIRIT_DEBUG_NODE(string_rule);
    }

  private:
    qi::rule<It, attr_t(), Skipper> start;
    // no skippers in here (important):
    qi::rule<It, double()>        double_rule;
    qi::rule<It, int()>           int_rule;
    qi::rule<It, unsigned int()>  uint_rule;
    qi::rule<It, long()>          long_rule;
    qi::rule<It, unsigned long()> ulong_rule;
    qi::rule<It, bool()>          bool_rule;
    qi::rule<It, std::string()>   string_rule;
};

struct effective_type : boost::static_visitor<std::string> {
    template <typename T>
        std::string operator()(T const& v) const {
            return typeid(v).name();
        }
};

bool testcase(const std::string& input)
{
    typedef std::string::const_iterator It;
    auto f(begin(input)), l(end(input));

    parser<It, qi::space_type> p;
    attr_t data;

    try
    {
        std::cout << "parsing '" << input << "': ";
        bool ok = qi::phrase_parse(f,l,p,qi::space,data);
        if (ok)   
        {
            std::cout << "success\n";
            std::cout << "parsed data: " << karma::format_delimited(karma::auto_, ' ', data) << "\n";
            std::cout << "effective typeid: " << boost::apply_visitor(effective_type(), data) << "\n";
        }
        else      std::cout << "failed at '" << std::string(f,l) << "'\n";

        if (f!=l) std::cout << "trailing unparsed: '" << std::string(f,l) << "'\n";
        std::cout << "------\n\n";
        return ok;
    } catch(const qi::expectation_failure<It>& e)
    {
        std::string frag(e.first, e.last);
        std::cout << e.what() << "'" << frag << "'\n";
    }

    return false;
}

int main()
{
    for (auto const& s : std::vector<std::string> {
            "1.3f",
            "0.f",
            "0.",
            "0f",
            "0", // int will be preferred
            "1u",
            "1ul",
            "1l",
            "1",
            "false",
            "true",
            "\"hello world\"",
            // interesting cases
            "invalid",
            "4.5e+7f",
            "-inf",
            "-nan",
            "42 is the answer", // 'is the answer' is simply left unparsed, it's up to the surrounding grammar/caller
            "    0\n   ",       // whitespace is fine
            "42\n.0",           // but not considered as part of a literal
            })
    {
        testcase(s);
    }
} 
```

# ios - 在 applicationDidEnterBackground 上调度保存操作：

> ID：15212672
> 
> 赞同：4
> 
> 时间：2013-03-04T22:50:06.513
> 
> 标签：ios, multithreading, grand-central-dispatch, multitasking

Apple 的[“应用程序状态和多任务处理”](https://web.archive.org/web/20140824215114/https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)文档（“移至后台时的操作”一节）说，当应用程序进入后台时进行保存：

> **保存用户数据和应用状态信息。**进入后台时，所有未保存的更改都应写入磁盘。这一步是必要的，因为您的应用程序可能会由于多种原因在后台被悄悄杀死。您可以根据需要从后台线程执行此操作。

当我开始调度操作时，例如保存需要一些时间，`applicationDidEnterBackground:`如下所示，按下主页按钮时我没有得到 NSLog 输出。返回应用程序后，会出现 NSLog 输出。

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
      dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
         [self performOperation];
         NSLog(@"Operation finished");
      });
} 
```

我可以确定该`performOperation`方法已完全执行还是在应用程序进入睡眠模式时中断？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T23:02:11.530

确保您将`plist`密钥设置`UIApplicationExitsOnSuspend`设置为 no 以确保`applicationDidEnterBackground`被调用。

接下来确保您开始一个长时间运行的任务。在您的情况下，它看起来像这样：

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
   UIBackgroundTaskIdentifier __block bgTask = nil;
   UIApplication  *app = [UIApplication sharedApplication];
   bgTask = [app beginBackgroundTaskWithExpirationHandler:^{ 
         [app endBackgroundTask:bgTask]; 
         bgTask = UIBackgroundTaskInvalid;
    }];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
         [self performOperation];
         NSLog(@"Operation finished");
     });
 } 
```

这样，您就告诉应用程序在您完成时停留 10 分钟。在十分钟结束时，到期处理程序被调用。

此外，您可以设置所需的后台模式键以获得更多时间。有许多技巧和变体可以让你有更多时间使用我上面提到的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:06:39.783

为了确定，我将使用不同类型的日志记录：

[灵活的 iOS 日志记录](http://brenwill.com/2010/flexible-ios-logging/)

通过将此日志添加到您的项目中，您可以通过转到管理器 -> 设备 -> “您的设备” -> 控制台来检查项目的日志，无论您是否正在调试。

我认为这是最好的方法，当我不确定我是否可以调试某些东西时，它对我有很大帮助。

# python - python - 生成查询时出现mysql语法错误

> ID：15212680
> 
> 赞同：0
> 
> 时间：2013-03-04T22:50:39.620
> 
> 标签：python, mysql, sql

直到最近，以下代码才能正常工作。

```
for player in away_starters_names:
    on = 0
    this_player = player[0]
    if this_player in event:
        player_id = away_team_dict[this_player]
        player_id = int(player_id[0])
        team = 0
        team_id = away_id
        cur.execute("""INSERT INTO football.match_subs(player, time, added, game_id, home, on, team_id) VALUES (%s, %s, %s, %s, %s, %s, %s) ON DUPLICATE KEY UPDATE game_id = game_id""", (player_id, time, added, game_id, team, on, team_id))
        db.commit() 
```

它现在给出了这个错误：

```
 Traceback (most recent call last):
  File "Z:\Coding\bbc\find_teams.py", line 508, in <module>
    cur.execute("""INSERT INTO football.match_subs(player, time, added, game_id, home, on, team_id) VALUES (%s, %s, %s, %s, %s, %s, %s) ON DUPLICATE KEY UPDATE game_id = game_id""", (player_id, time, added, game_id, team, on, team_id))
  File "C:\Python27\lib\site-packages\MySQLdb\cursors.py", line 202, in execute
    self.errorhandler(self, exc, value)
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on, team_id) VALUES (299191, 89.33, 0, 21570967, 0, 0, 2) ON DUPLICATE KEY UPDAT' at line 1") 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:59:23.307

在字段名称周围使用反引号。`ON`是 MySQL 中的保留字

# java - Android，拖放后删除拖动的项目

> ID：15212682
> 
> 赞同：0
> 
> 时间：2013-03-04T22:50:46.170
> 
> 标签：java, android, drag-and-drop

```
// Touched
public class ChoiceTouchListener implements OnTouchListener {
    public boolean onTouch(View view, MotionEvent motionEvent) {

        switch (motionEvent.getAction()) {

        case MotionEvent.ACTION_MOVE:

            return true;

        case MotionEvent.ACTION_DOWN:
            Viewed = String.valueOf(view.getId());

            ClipData data = ClipData.newPlainText("", "");
            DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);

            // Drag Function When Item Touched
            view.startDrag(data, shadowBuilder, view, 0);
            return true;

        case MotionEvent.ACTION_UP:
            return true;

        default:
            return true;
        }
    }
}

private class ChoiceDragListener implements OnDragListener {

    // onDrag Method, imagine we dragging numbers from display TextView
    @Override
    public boolean onDrag(View v, DragEvent event) {

        // Android has onDrag action types. there are some kind of action
        switch (event.getAction()) {

            // if drag stared
            case DragEvent.ACTION_DRAG_STARTED:

            break;

            // if drag entered software
            case DragEvent.ACTION_DRAG_ENTERED:

            break;

            // if drag exited, stopped or something
            case DragEvent.ACTION_DRAG_EXITED:

            break;

            // main case, if drag dropped what we do...
            case DragEvent.ACTION_DROP:

                // handle the dragged view being dropped over a drop view
                View view = (View) event.getLocalState();

                // stop displaying the view where it was before it was dragged
                // ************* view.setVisibility(View.KEEP_SCREEN_ON);

                // view dragged item, where numbers will be dragged
                dropTarget = (TextView) v;

                // view dropped item, that will be dropped in drag TextView
                dropped = (TextView) view;

                // view result place, when make math operation, show results
                resultPlace = (TextView) findViewById(R.id.calcResult);

                // simple debug
                // ****** resultPlace.setText( dropped.getText() + " " + dropTarget.getText() );

                // if an item has already been dropped here, there will be a tag
                Object tag = dropTarget.getTag();

                // if there is already an item here, set it back visible in its
                // original place
                if (tag != null)
                {
                    // the tag is the view id already dropped here
                    int existingID = (Integer) tag;

                    // set the original view visible again
                    findViewById(existingID).setVisibility(View.VISIBLE);

                }

                // set the tag in the target view being dropped on - to the ID
                // of the view being dropped
                dropTarget.setTag(dropped.getId());

                // show results
                resultPlace.setText( dropped.getText() + " " + dropTarget.getText() + " " + dropped.getText() );

            break;

            // if drag ended, we did it already successfully
            case DragEvent.ACTION_DRAG_ENDED:

            break;

            // what do default
            default:

            break;
        }
        return true;
    }
} 
```

我有非常简单的触摸和拖动类。我唯一的问题是，当我将项目拖放到某个布局中时，我的项目也会保持在旧位置。android中是否有任何方法可以检测我正在触摸的项目并在掉落后将其删除？

我有一个小型应用程序，单击数字并在仪表板中拖放，然后重复它并将仪表板中的所有项目拖动到 X 和 Y 位置。这就是为什么我想清空旧的数字空间来创建另一个。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-10T18:23:20.597

我最终在我的程序中得到了这样的东西，希望它有所帮助。

```
View.OnDragListener DropListener = new View.OnDragListener() {
    @Override
    public boolean onDrag(View v, DragEvent event) {
        int dragEvent = event.getAction();

        switch (dragEvent) {
            case DragEvent.ACTION_DRAG_ENTERED:
                Log.i("Drag Event", "Entered");
                break;

            case DragEvent.ACTION_DRAG_EXITED:
                Log.i("Drag Event", "Exited");
                break;

            case DragEvent.ACTION_DROP:
                TextView target = (TextView) v;
                TextView dragged = (TextView) event.getLocalState();
                target.setText((CharSequence) dragged.getText());
                dragged.setText("");
                break;

        }
        return true;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:38:20.280

您可以在触摸侦听器中获取视图的父级。在 action down 部分，将父视图保存在全局变量中，当视图下降时，使用 removeView(View v) 函数将其从父视图中删除。

# javascript - 回调中的 Javascript 范围

> ID：15212685
> 
> 赞同：2
> 
> 时间：2013-03-04T22:50:48.760
> 
> 标签：javascript, node.js, callback

我在nodeJS中有一个带有回调的方法，我试图在外部函数中设置一个值，该值可以与在回调中传递给猫鼬调用的数据的结果一起返回：

```
'use strict';

var mongoose = require('mongoose')
    ,Alert = mongoose.model('Alert');

exports.getAllAlerts = function() {
    var result = [];
    Alert.find({}, function(err, alerts) {
        if(err) {
            console.log('exception while fetching alerts');
        }
        if(alerts) {
            result = alerts;
            console.log('result: ' + result);
        }
    });
    return result;
} 
```

如何使用在猫鼬回调中返回的警报值设置 result[] 的值？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:58:58.067

最有可能`find()`异步运行，在这种情况下，您将始终返回一个*空 Array*，因为在您返回值时，它没有定义也没有分配。

您需要重写您的`.getAllAlerts()`方法，以便它允许自己的回调函数，例如

```
exports.getAllAlerts = function( cb ) {
    Alert.find({}, function(err, alerts) {
        if(err) {
            console.log('exception while fetching alerts');
        }

        if(alerts) {
            if( typeof cb === 'function' ) {
                cb( alert || [ ] );
            }
        }
    });
} 
```

...你会以类似的方式使用它

```
YourModule.getAllAlerts(function( alerts ) {
    console.log( alerts );
}); 
```

# wcf - wcf 中的 asp.net 成员资格

> ID：15212686
> 
> 赞同：0
> 
> 时间：2013-03-04T22:50:55.623
> 
> 标签：wcf, asp.net-membership

我不知所措，似乎无法解决这个问题。谷歌只会让我更加困惑。

我需要做的是创建一个托管在 IIS 中的 WCF 服务，该服务将充当我的身份验证服务。我想使用 asp.net 会员用户/角色/配置文件。

该服务需要被多个客户端（网站、win form app、java、iphone）使用

有没有人有一个很好的链接或示例，它不是 4 岁，并且不需要您将 dll 链接到每个项目。

只是一个托管在 IIS 中的 WCF 服务，供多个客户端使用。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:02:35.880

我认为您正在尝试做的事情已经存在

[http://thinktecture.github.com/](http://thinktecture.github.com/)

这是一个 WS-Trust 风格的安全令牌服务 (STS)，可以与 ASP.Net 成员资格提供程序和配置文件提供程序集成。它还支持 OAuth、WS -Federation 和 HTTP GET，所以应该有你需要的。

它是可靠的、可扩展的、有据可查的，并由该领域备受尊敬的专家 Dominic Baier 创建。

# c++ - atoi() 方法，char * cout II

> ID：15212687
> 
> 赞同：0
> 
> 时间：2013-03-04T22:51:02.913
> 
> 标签：c++, while-loop, char, compare

这是atoi **(** [) 方法的连续，char * cout](https://stackoverflow.com/questions/15211507/atoi-method-char-cout)

我不明白的最后一个问题是：

在第 5 行之后，

```
 while ( pCur >= pStr && *pCur <= '9' && *pCur >= '0' )     { 
```

现在 pCur = 2 和 pStr = 242，为什么条件被评估为真？

我实际上写了 cout**测试**：

```
 cout << "pCur: " << pCur << endl;       //line 5
    cout << "pStr: " <<  pStr << endl;  
    bool b = (pCur >= pStr);
    cout << "pCur >= pStr: " << b << endl; 
```

**输出：**

```
pCur: 2    
pStr: 242
pCur >= pStr: 1 
```

这对我来说没有任何意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:59:17.553

`pCur`并且`pStr`都是`char*`。A`char*`通常被理解为 C 风格的字符串，因为它可能（并且经常这样做）指向以空字符结尾的数组中的第一个字符`char`。当您这样做`cout << pCur`时，输出流`cout`会将其解释为 C 风格的字符串并打印出它指向的字符。如果你想打印出实际的指针值，试试这个：

```
cout << "pCur: " << static_cast<void*>(pCur) << endl;
cout << "pStr: " << static_cast<void*>(pStr) << endl; 
```

强制转换`void*`停止`cout`将其视为 C 样式字符串。我敢打赌，您现在会发现`pCur >= pStr`如预期的那样。

# multithreading - Perl 进程控制器

> ID：15212689
> 
> 赞同：0
> 
> 时间：2013-03-04T22:51:05.530
> 
> 标签：multithreading, perl

我想在 perl 中创建一个能够启动和终止子进程的程序。

细节：当给定命令时，父进程将产生一个新的子进程并根据需要通过命令行传递参数。一旦子进程启动，父进程将继续前进并等待另一个命令。这些命令要么启动一个进程，要么停止一个特定的进程。

父进程永远不应该等待子进程。所有孩子都可以优雅地退出并根据需要进行清理。但是，父进程需要根据需要跟踪和终止任何单个子进程。

我目前正在构建这个父脚本，但想知道我是否使用了正确的 perl 函数以及这样做的最佳实践是什么。

我将使用以下 Perl 函数之一以及 waitpid($pid, WNOHANG) 和 kill('TERM', $pid) 的组合。这是正确的方法吗？有没有现成的解决方案？这里的最佳做法是什么？

系统函数 exec 函数 反引号 (``) 运算符打开函数

这是我的工作代码。

```
sub spawnNewProcess
{
    my $message = shift;

    # Create a new process
    my $pid = fork;
    if (!$pid)
    {
        # We're in the child process here. We'll spawn an instance and exit once done
        &startInstance( $message );
        die "Instance process for $message->{'instance'} has completed.";
    }
    elsif($pid)
    {
        # We're in the parent here. Let's save the child pid.
        $INSTANCES->{ $message->{'instance'} } = $pid;
    }
}

sub stopInstance
{
    my $message = shift;

    # Check to see if we started the specified instnace 
    my $pid = $INSTANCES->{$message->{'instance'}};
    if( $pid )
    {
        # If we did, then check to see if it's still running
        while( !waitpid($pid, WNOHANG) )
        {
            # If it is, then kill it gently
            kill('TERM', $pid);

            # Wait a couple seconds
            sleep(3);

            # Kill it forceably if gently didn't work
            kill('KILL', $pid) if( !waitpid($pid, WNOHANG) );
        }
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:19:43.850

守护进程怎么样::控制[http://hashbang.ca/2012/04/16/wherein-i-realize-the-bliss-of-writing-init-scripts-with-daemoncontrol](http://hashbang.ca/2012/04/16/wherein-i-realize-the-bliss-of-writing-init-scripts-with-daemoncontrol)

它可以启动/停止一个进程。

问候

# sqlite - SQLite3 数据库轮换

> ID：15212692
> 
> 赞同：1
> 
> 时间：2013-03-04T22:51:24.100
> 
> 标签：sqlite

我有大量数据，我想在达到一定数量的记录后自动旋转它。如何在 sqlite3 中添加此功能？

# android - 点击微调器时如何不丢失文本选择？

> ID：15212693
> 
> 赞同：3
> 
> 时间：2013-03-04T22:51:25.543
> 
> 标签：android, android-edittext, textview, android-spinner

我正在开发一个文本编辑器。

我有一个`EditText`输入文本的小部件，下面有一行带有各种格式的小部件，例如按钮和`Spinner`s。

用户可以选择文本，然后按一个按钮来打开和关闭粗体、斜体和其他格式选项，这可以毫无问题地工作。

但是，对于`Spinner`s，用户可以通过它选择颜色或字体等内容，在运行 Android 4.1 的华硕平板电脑或运行 4.2.2 的 Nexus 4/7/10 上，一旦`Spinner`点击 ，文本选择就会消失。

在三星 Galaxy SII 上，不会发生这种行为。在与`Spinner`. （它运行 Android 4.0.4，我不确定问题是与 Android 版本相关还是由于三星采取了不同的做法）。

我想在每台设备上都有三星的行为。如何确保这是默认行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T09:19:46.327

使用以下覆盖创建自定义 EditText 类可以解决问题：

```
@Override
public void onWindowFocusChanged (boolean hasWindowFocus) {
    boolean hadSelection = this.hasSelection();
    int start=0, end=0;
    if(hadSelection) {
        start = getSelectionStart();
        end = getSelectionEnd();
    }
    super.onWindowFocusChanged(hasWindowFocus);
    if(hadSelection) {
        setSelection(start, end);
    }
} 
```

我不完全确定在某些情况下它可能不会产生一些不需要的副作用。如果您使用它并遇到任何问题，请发表评论或发布避免它们的解决方案。

# c - 在c中传递指向char数组的指针

> ID：15212694
> 
> 赞同：1
> 
> 时间：2013-03-04T22:51:35.337
> 
> 标签：c

我编写了一个小型测试程序，看看如何将指向 char 数组的指针传递给函数。这是我的代码：

```
#include <stdio.h>
#include <string.h>

int scopy(char *org ){
    printf("the value of org is %s" , org);
    printf("\n");
}

int main(void)
{
    char original[11];
    strcpy(original , "helloworld");

    scopy(original);

    printf("the value of original now is %s" , original);

    return 0;
} 
```

我对指针的了解告诉我 org 是一个指针，它传递了 original[0] 的内存地址，当我执行这个程序时，我观察到一些让我感到困惑并让我怀疑我所了解的关于指针的事实的事情.

当我打印 org 时，我得到了完整的单词。但是根据逻辑，如果指针不应该打印出内存地址；

当我尝试打印 out[1] , out[2] 时，键盘告诉我进程异常结束

我对这个问题的基本疑问是 org 到底在做什么，我知道它是一个指向内存地址的 char 指针（哪个？？）。任何帮助，将不胜感激 。我对 c 编程很陌生。

另外，当我尝试像这样的while循环时

```
while(out[i] !='\0')
printf("%s",out[i]); 
```

它不会在 '\0' 处终止。strcpy 文档指出 '\0' 被复制到 char 数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:59:15.383

org 是指向 char 的指针，这是您在 scopy 中传递的内容（指向数组第一个元素的指针）。当您`%s`在 printf 中使用说明符时，您将指向 char 的指针视为字符串；如果要将其值打印为指针，则应`%p`改为使用。例如：`printf("The memory address in org is %p\n", org);`

从你所说的我得到你认为`%s`将数字转换为字符串的感觉。它不会那样做，它需要一个指向字符串第一个字符的指针。

请记住，数组的名称等价于`&array[0]`，即当您在函数中传递数组的名称时，您传递的是指向第一个元素的指针。因此，在这里，当您调用`scopy(original)`它时，它与 write 相同`scopy(&original[0])`，并且由于`original[0]`是 a`char`并且`&`是指向它的指针，这就是您的函数需要`char *`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:00:14.903

是的，你是对的，当你调用scopy 时`scopy(original);`，scopy 会传递一个指向`original`数组中 1\. 元素的指针。

`scopy(original);`与`scopy(&original[0]);`

但是，您将 %s 与 printf 一起使用。%s 期望匹配的参数是一个字符指针，指向一个字符序列，并且该序列的结尾是一个 0 字节。这就是 C 所说的字符串。

这意味着你不能做 eg `printf("%s",org[i]);`，因为 org[i] 是一个字符，它不是指向以 0 字节结尾的数组的字符指针。

`prinf["%c", org[0])`您可以通过执行`while(out[i] !='\0')打印单个字符

或者对于您的 while 循环：

```
while(out[i] !='\0')
  printf("%c",out[i]); 
```

你也可以尝试：

```
while(out[i] !='\0')
  printf("%s",&out[i]); 
```

# ruby-on-rails - 简单 Rails 3 关联 - has_many、belongs_to 和 has_and_belongs_to_many

> ID：15212702
> 
> 赞同：0
> 
> 时间：2013-03-04T22:51:57.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我是 Rails 的新手，并试图准确了解如何进行关联，以及我是否正确地完成了它。我已经阅读了[有关关联的 Rails 指南](http://guides.rubyonrails.org/association_basics.html)并搜索了网络并找到了许多资源，但我不确定。

你可以在这里看到我的项目：majorfinder.com 在我的应用程序上会有专业、学校和职业。我希望能够为每个添加评论。因为我刚刚开始，所以我刚开始为专业添加评论。

以下是我的联想：

模型/review.rb

```
belongs_to :user
has_and_belongs_to_many :majors 
```

模型/用户.rb

```
has_many :reviews 
```

模型/major.rb

```
has_and_belongs_to_many :reviews 
```

我的第一个问题是，这看起来是创建关联的好方法吗？

我了解如何在专业控制器中进行简单关联：

```
@reviews = Review.includes(:user) 
```

这样我就可以向我的主要控制人展示评论：

```
<div class="row">
  <% @reviews.each do |review| %>
    <div>
      <h3><%= link_to review.review,
        :controller => "reviews", :action => "show", :id => review.id %></h3>
      <small>Posted on <%= review.created_at %> by
        <a href="#"><%= review.user.profile_name %></a></small>
    </div>
  <% end %>
</div> 
```

但我不确定如何将其与我正在研究的特定专业联系起来。

我的评论数据库架构有 review(text)、user_id(integer) 和 major_id(integer)。

最后一个问题是如何在主要控制器显示页面中发布与特定专业相关联的评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:30:13.673

首先，您确定要在和`has_and_belongs_to_many`之间建立关系吗？我会假设每条评论只适用于一个特定的专业（或学校/职业），如果是这种情况，它是一对多的关系，你会想要使用and 。`reviews``majors``has_many``belongs_to`

其次，考虑到您最终还想为其他模型添加评论，您可能希望将其设为[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)，这将允许您`review`对所有其他三个模型使用相同的模型。为此，您需要将关联更改为以下内容：

```
# In review.rb
belongs_to :reviewable, polymorphic: true

# In major.rb (and later also in school.rb and career.rb)
has_many :reviews, as: :reviewable 
```

您还需要更改您的评论模型，以便`major_id`它拥有一个`reviewable_id` `integer`属性和一个属性，而不是一个`reviewable_type` `string`属性。

就您希望如何显示它们而言，您可能希望在最初加载专业时包含`review`和`user`模型（假设您想显示所有评论，尽管您最终可能希望将它们拆分为如果有很多页面）：

```
# In majors_controller.rb (or whatever it's named)
def show
  @major = Major.includes(:reviews => :user).find(params[:id])
  ... 
```

然后在您的视图中，您可以使用 的`reviews`方法`@major`来访问它们（请记住，关联还向模型[添加了一堆方法](http://guides.rubyonrails.org/association_basics.html#detailed-association-reference)以使其更易于使用）

```
# In /app/views/majors/show.html.erb
<div class="row">
  <% @major.reviews.each do |review| %>
    ...
  <% end %>
</div> 
```

或者更方便的是，您可以使用部分（如果您想在每个页面上以相同方式显示评论列表），并使用渲染集合的快捷方式：

```
# /app/views/reviews/_review.html.erb
<div>
  <h3><%= link_to review.review,
    :controller => "reviews", :action => "show", :id => review.id %></h3>
  <small>Posted on <%= review.created_at %> by
    <a href="#"><%= review.user.profile_name %></a></small>
</div>

# In /app/views/majors/show.html.erb
<div class="row">
  <%= render @major.reviews %>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:35:23.497

至于这些是否是适当的关联，这完全取决于您要达到的目标以及这些关系在“真实”世界中的实际样子。

从它的外观来看，在您的应用程序中，您有用户，每个用户都可以创建（或拥有）许多不同的评论，您有专业，每个专业可以有许多与之关联的评论，并且您有评论，其中每个单独的评论是与许多不同的专业相关联（即一篇评论可以写几个不同的专业）。

这个对吗？如果是这样，那么您尝试创建的关联似乎是合适的。

但是，我不确定您是否完全了解实施情况。

评论属于用户，因此它有 user_id 列是合适的，但是它不应该有一个 major_id 列（否则你将每个评论限制为只属于一个专业）。

相反，专业和评论之间的关系是通过连接表（例如major_reviews）管理的，该表将具有major_id 和review_id 列。您是否已创建此连接表？

正确设置关联后，您将可以访问许多 rails 方法，以使您在运行查询时更轻松。

例如，为了获得给定用户的所有评论，您可以这样做`@user.reviews`。类似地，要获得相关专业的个人评论，您可以做`@review.majors`，或者要获得给定专业的所有评论，您可以做`@major.reviews`。

您可以在 Rails 指南[http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)的第 4.4.1 节中看到更多可用方法的`@major`示例。`@review`

# c++ - 调整窗口大小时 Direct2D 内存过度使用

> ID：15212712
> 
> 赞同：0
> 
> 时间：2013-03-04T22:52:38.403
> 
> 标签：c++, memory, resize, direct2d

我最近开始使用 Direct2D，在调整窗口大小时发现了一些奇怪的行为：内存使用猛增，最后我得到了一些“内存不足错误”。这是我的代码的布局：

```
// Nothing special in there
int wWinMain(...)
{
    // Window creation, ressource allocation, message loop.
} 
```

然后是windowProc

```
// Nothing special in there either
case WM_PAINT :
    if(myObject->paint()) {
        ValidateRect(myObject->rect());
        return 0;
     }
    else return DefWindowProc(...);
default :
    return DefWindowProc(...); 
```

对于我刚刚使用的绘画方法

```
// Check the ressources
checkRessources();

mRenderTarget->BeginDraw();

mRenderTarget->EndDraw();

// Check for errors
checkForError(); 
```

没有别的了。一切编译正常，窗口已显示。然后我拿起调整大小的手柄，开始摇晃它，这导致我的窗口不断地调整大小和重新粉刷。晃动了大约 20 秒后，内存开始开始过度使用（每秒使用大约 200Mo），直到达到我计算机 RAM 的全部容量......

我寻找这种行为的根源，发现这完全是由

```
BeginDraw();
EndDraw(); 
```

部分。我删除了所有完成的绘画，停止处理除 WM_PAINT 之外的所有消息。仍然......（我也转向调试）。

然后我检查了一些其他代码，即[Direct2D Hello World Example](http://msdn.microsoft.com/en-us/library/dd317124%28VS.85%29.aspx)。摇动窗口调整大小手柄。并获得完全相同的内存过度使用....

所以。我不知道是什么原因造成的。它是 Direct2D 错误吗？我的显卡驱动？有没有人经历过同样的现象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:14:38.343

我不明白这种行为。内存使用确实增加了，但最多只有 2mb 左右，然后就停止增加了。

关于您的问题，有一部分似乎很矛盾：

> 我寻找这种行为的根源，发现这完全是由
> 
> 开始绘制（）；
> 
> 结束绘制（）；
> 
> 部分。我删除了所有完成的绘画，停止处理除 WM_PAINT 之外的所有消息。仍然......（我也转向调试）。

所以它是由 BeginDraw/EndDraw 调用引起的，但是你删除它们并且问题仍然存在？

编辑：要查看 _com_error 异常的描述，请将 wWinMain 中的所有代码包装在 try/catch 块中，如下所示：

```
int __stdcall wWinMain(HINSTANCE, HINSTANCE, PWSTR, int)
{
    try
    {
        ...
    }
    catch (const _com_error& e)
    { // <-- Put a breakpoint at this line and then inspect the "e" variable in the Locals window in the debugger

        // Or use this:
        ::MessageBoxW(nullptr, e.ErrorMessage(), L"Error", MB_ICONSTOP);
    }
} 
```

# c++ - 继承和内联？

> ID：15212718
> 
> 赞同：6
> 
> 时间：2013-03-04T22:53:00.413
> 
> 标签：c++, polymorphism, virtual, inline

我最近读了很多书，在介绍继承（和虚函数）的同时，我一直在偶然发现“内联”关键字。现在我知道正常意义上的内联是什么——编译器可以用确切的代码替换函数调用。但是，我看到它提到的关于继承的次数——在继承中使用内联有什么特殊原因吗？不明白为什么一直被提及......

内联函数在继承/派生类/虚拟函数中具有什么额外作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T03:49:40.663

是的，在虚函数上使用内联是浪费时间。必须通过由函数指针组成的虚函数表来调用虚函数。内联函数不能被指针调用。它必须作为一个真正的功能存在。

有一些例外。如果调用者知道确切的对象类型，它可以完全跳过虚函数表。

过度使用 virtual 关键字会导致代码非常慢。编译器可能能够内联和优化三个或四个小函数调用，使用虚拟函数它必须执行实际的函数调用，不对调用之间的内存或寄存器状态做任何假设。

# html - 堆叠背景图像只会导致接近零的透明度？

> ID：15212720
> 
> 赞同：0
> 
> 时间：2013-03-04T22:53:04.073
> 
> 标签：html, background, overlay

我一直在尝试为我正在构建的网站提供叠加背景。到目前为止，从 Jquery 覆盖插件到 css 编辑，我所尝试的一切都只会导致几乎不透明的空白白色（奇怪的是没有图像，只是不相关颜色的透明度很差）。

知道为什么吗？

# java - 使我的变量可以用于我的打印语句

> ID：15212722
> 
> 赞同：0
> 
> 时间：2013-03-04T22:53:09.150
> 
> 标签：java, jgrasp

我在我的程序结束时遇到了障碍。我知道我的程序一定会输入一个数字文件并找到最小值。我的障碍是如何写出我的最高值变量，以便它将通过我的 while 循环运行并为我的打印行语句分配一个值.....这是我的程序

```
import java.io.*;
import java.util.Scanner;

public class LargenSmalltest
{
public static void main(String[] args) throws IOException
{

    //Open the file
    File file = new File("Numbers.txt");
    Scanner inputFile = new Scanner(file);

    String filename;                                 
    double lowest = inputFile.nextDouble();  //lowest first number in list
    double highest = lowest;

    //Read all the values in Numbers file 
    while (inputFile.hasNext())
    {
        //Read second value from file
        double number = inputFile.nextDouble();

        //Read the numbers in the file and compare each value to find lowest value
        if (number < lowest) 
            //The lowest number in the list has now been stored as lowest
            lowest = number;
    }

    //Reread all the values in Numbers file 
    while (inputFile.hasNext())
    {
        //number equals the second value in your list
        double number = inputFile.nextDouble();

        if (number > highest)   
            highest = number;
    }

    //Close file
    inputFile.close();

    //Print out the lowest value in the list
    System.out.println("The lowest number in your file called, " +
      "Numbers.txt is "   +lowest+ ".");

    System.out.println("The highest number in your file is, " +highest+ ".");
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:03:58.860

同意@rgettman。此外，您的扫描仪正在读取整个文件，但无法重新开始或反转。如果您要再次浏览文件，则需要创建一个新的扫描仪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:57:59.990

没有理由有第二个`while`循环。在你的两个循环中，你用完了第一个循环中的所有值，而第二个循环中没有任何值。

您可以`number`在一个循环中执行最低和最高测试：

```
while (inputFile.hasNext())
{
   // Read second value from file
   double number = inputFile.nextDouble();

   // Read the numbers in the file and compare each value to find lowest value
   if (number < lowest) 
      //The lowest number in the list has now been stored as lowest
      lowest = number;

   // Find the highest value.
   if (number > highest)
      highest = number;
} 
```

# java - 在android中使用onDraw @override导致错误

> ID：15212724
> 
> 赞同：0
> 
> 时间：2013-03-04T22:53:20.243
> 
> 标签：java, android, overriding, ondraw

我无法弄清楚为什么我会收到“DrawStuffActivity.MyView 类型的方法 OnDraw(Canvas) 必须覆盖或实现超类型方法”错误，任何帮助将不胜感激

我的项目设置为 java 1.6，API 设置为 4.0.3 (15)

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class DrawStuffActivity extends Activity implements OnTouchListener
{
    MyView myView;
    int numberOfFingers = 0; 
    float oldX[] = new float[2],
            oldY[] = new float[2];
    Rect rectangle = new Rect(0, 0, 100, 100);
    DisplayMetrics metrics = new DisplayMetrics();

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        myView = new MyView(this);
        setContentView(myView);
        myView.setOnTouchListener(this);

        getWindowManager().getDefaultDisplay().getMetrics(metrics);
    }

    @Override
    public boolean onTouch(View view, MotionEvent event) 
    {
        switch (event.getActionMasked() )
        {
        case MotionEvent.ACTION_DOWN:
            numberOfFingers = 1;
            oldX[0] = event.getX(0);
            oldY[0] = event.getY(0);
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            numberOfFingers = 2;
            oldX[1] = event.getX(1);
            oldY[1] = event.getY(1);
            break; 
        case MotionEvent.ACTION_MOVE:
            handleMove(event);
            break;
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_UP:
            numberOfFingers--;
            break;
        }

        view.invalidate();
        return true;
    }

    float newX[] = new float[2], newY[] = new float[2];
    int xChange[] = new int[2], yChange[] = new int[2];

    int diffX, diffY;
    int newLeft = rectangle.left, 
            newTop = rectangle.top, 
            newRight = rectangle.right,
            newBottom = rectangle.bottom;

    void handleMove(MotionEvent event)
    {
        newX[0] = Math.round(event.getX(0) );
        newY[0] = Math.round(event.getY(0) );
        xChange[0] = Math.round(newX[0] - oldX[0] );
        yChange[0] = Math.round(newY[0] - oldY[0] );
        oldX[0] = newX[0];
        oldY[0] = newY[0];

        switch (numberOfFingers)
        {
        case 1:
            newLeft = rectangle.left + xChange[0];
            newTop = rectangle.top + yChange[0];
            newRight = rectangle.right + xChange[0];
            newBottom = rectangle.bottom + yChange[0];

            if (newLeft < 0 || newRight > metrics.widthPixels)
            {
                newLeft = rectangle.left;
                newRight = rectangle.right;
            }
            if (newTop > 0 || newTop > metrics.heightPixels)
            {
                newTop = rectangle.top;
                newBottom = rectangle.bottom;
            }

            rectangle = new Rect(newLeft, newTop, newRight, newBottom);

            break;

        case 2:
            newX[1] = Math.round(event.getX(1) );
            newY[1] = Math.round(event.getY(1) );

            diffX = Math.abs(Math.round(newX[1] - newX[0])) - Math.abs(Math.round(oldX[1] - oldX[0]));
            diffY = Math.abs(Math.round(newY[1] - newY[0])) - Math.abs(Math.round(oldY[1] - oldY[0]));

            oldX[1] = newX[1];
            oldY[1] = newY[1];

            newLeft = rectangle.left - diffX / 2;
            newTop = rectangle.top - diffY / 2;
            newRight = rectangle.right - diffX / 2;
            newBottom = rectangle.bottom - diffY / 2;
            rectangle = new Rect(newLeft, newTop, newRight, newBottom);

            break;
        }

    }

    class MyView extends View
    {
        Paint whitePaint = new Paint();

        MyView(Context context)
        {
            super(context);
            whitePaint.setColor(Color.WHITE);
        }

        @Override
        public void OnDraw(Canvas canvas) 
        {
            canvas.drawRect(rectangle, whitePaint);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:54:48.477

你已经`onDraw()`大写了`OnDraw()`。将其更改为`onDraw()`. 方法名称应始终以小写字母开头。

# android - 为什么 PlusClient.loadPeople 会因 HTTP 403 错误而失败？

> ID：15212725
> 
> 赞同：4
> 
> 时间：2013-03-04T22:53:22.350
> 
> 标签：android, google-plus

我将旧的 Google Plus（又名 Google Play 服务）API 集成到我的应用程序中，现在我正在尝试更新内容以使用 V2 API，其中包括访问某人圈子中的人员列表等。

从表面上看，我应该做的唯一更改是更新我用来进行身份验证的 OAuth 配置文件：

```
 _plusClient = new PlusClient.Builder(_activity, this, this).
        setScopes(Scopes.PLUS_LOGIN).build(); 
```

然后（在进行必要的环跳以确保事物连接之后），向用户的朋友发出请求：

```
 _plusClient.loadPeople(new PlusClient.OnPeopleLoadedListener() {
            public void onPeopleLoaded (ConnectionResult status, PersonBuffer people,
                                        String nextPageToken) {
                // ...
            }
        }, com.google.android.gms.plus.model.people.Person.Collection.VISIBLE); 
```

然而，这导致`ConnectionResult.NETWORK_ERROR`被报告。我可以在 Android 日志中看到以下内容：

```
 E/Volley  (13590): [4053] BasicNetwork.performRequest: Unexpected response code 403 for https://www.googleapis.com/plus/v1/people/me/people/visible?maxResults=100&orderBy=alphabetical 
```

我的旧代码在使用 PlusClient 获取 OAuth 自动令牌（通过`GoogleAuthUtil.getToken`）后手动发出 REST 请求。因此，为了获取用户的基本个人资料信息，我最终发出了一个 HTTP 请求，如下所示：

```
https://www.googleapis.com/oauth2/v1/userinfo?auth_token=XXX 
```

这对 V2 代码非常有效，`userinfo`并且继续适用于`userinfo`V2 代码。但是，如果我尝试通过 REST API 手动获取用户的可见人员，请求如下：

```
https://www.googleapis.com/plus/v1/people/me/people/visible?auth_token=XXX 
```

我收到带有以下 JSON blob 的 403 响应：

```
 {                                                                                                                                  
  "error": {                                                                                                                        
   "errors": [                                                                                                                      
    {                                                                                                                               
     "domain": "usageLimits",                                                                                                       
     "reason": "accessNotConfigured",                                                                                               
     "message": "Access Not Configured"                                                                                             
    }                                                                                                                               
   ],                                                                                                                               
   "code": 403,                                                                                                                     
   "message": "Access Not Configured"                                                                                               
  }                                                                                                                                 
 } 
```

从我可以通过文档收集到的信息来看，无需获取和配置 Google API 密钥即可通过 Google Play 服务代码将 Google Plus 集成到 Android 应用程序中。实际上，API 中没有提供这样一个密钥的地方，这证实了这种怀疑。

我碰巧有一个 Google API 密钥连接到我的 GCM 的 Android 应用程序。万一该 API 密钥以某种方式在所有这一切中混在一起，我已确保为该 API 密钥启用了 Google+，但这并没有使 403 响应神奇地消失。

我已经`https://www.googleapis.com/plus/v1/people/me/people/visible`通过嵌入在[Google+ 的 REST API 文档](https://developers.google.com/+/api/latest/people/list)中的 API 资源管理器测试了一个请求，它在那里工作。我可以在 JSON 结果中看到我圈子中的人。

我注意到这些请求似乎在 URL 上添加了一个 API 密钥：

```
https://www.googleapis.com/plus/v1/people/me/people/visible?key=AIzaSyCFj15TpkchL4OUhLD1Q2zgxQnMb7v3XaM 
```

因此，我尝试为我的 Android 应用程序创建一个 API 密钥（使用与 GCM 相同的 Google API 项目），并将其附加到手动尝试加载好友列表的代码中的 URL 上。此请求失败并出现 401 错误，说明授权信息错误。我假设我从 Google Plus SDK 代码返回的身份验证令牌是通过不同的“API 项目”（可能是 Android Google Plus 应用程序使用的那个）获得的，当我传递我自己的密钥时，事情变得很不稳定.

到目前为止，我还没有尝试消除对 Google Play Services Google+ SDK 的所有使用，而只是自己获得了一个 OAuth 访问令牌。我宁愿希望这能奏效，而且我不必浪费太多时间来调查它。所以也许宇宙中的某个人要么让这些 Google+ 的东西正常工作，要么可以为我指明一个有用的方向。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T02:45:51.660

您是否在 Google API 控制台中注册了数字签名的 .apk 文件的公共证书？[如果没有，您可以在此处](https://developers.google.com/+/mobile/android/getting-started#step_1_enable_the_google_api)找到有关如何操作的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T00:24:29.140

确保您已添加 google+ api 访问权限。和使用 SHA1 创建的客户端密钥和 android 清单文件中的完整项目包

# javascript - 在画布上绘制背景图像

> ID：15212729
> 
> 赞同：0
> 
> 时间：2013-03-04T22:53:25.973
> 
> 标签：javascript, css, html, canvas

我正在尝试将 dom 对象绘制到画布上，如下所示。

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas)

我有下面的代码，它看起来好像背景图像不起作用？我在这里做错了吗？或者有没有办法解决它？

[见小提琴](http://jsfiddle.net/aaronk85/7MrVQ/1/)

```
 <canvas id="canvas" style="border:2px solid black;" width="400" height="300"></canvas>
    <div style='background-color:red' class='test'><h1>Hello World</h1></div>
    <div style='background-image:url(http://lorempixel.com/400/100/transport/)' class='test'><h1>Hello World</h1></div>

    <script>
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    var data = "<svg xmlns='http://www.w3.org/2000/svg' width='500' height='500'>" +
                 "<foreignObject width='100%' height='100%'>" +
                   "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:40px'>" +
        "<div style='background-color:red' class='test'><p>Hello World</p></div>" +
         "<div style='background-image:url(http://lorempixel.com/500/500/transport/)' class='test'><p>Hello World</p></div>" +
                   "</div>" +
                 "</foreignObject>" +
               "</svg>";
    var DOMURL = self.URL || self.webkitURL || self;
    var img = new Image();
    var svg = new Blob([data], {type: "image/svg+xml;charset=utf-8"});
    var url = DOMURL.createObjectURL(svg);
    img.onload = function() {
        ctx.drawImage(img, 0, 0);
        DOMURL.revokeObjectURL(url);
    };
    img.src = url;
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:58:49.863

也许[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas)相同的域安全原因：

安全

SVG 图像不允许加载任何外部资源，例如，即使是看似来自同一域的资源。诸如光栅图像（例如 JPEG 图像）或 s 之类的资源必须作为 data: URI 内联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:59:25.527

> SVG 图像不允许加载任何外部资源，例如，即使是看似来自同一域的资源。诸如光栅图像（例如 JPEG 图像）或 s 之类的资源必须作为 data: URI 内联。

这是来自您链接的页面。这确认您不能使用背景图像，除非您将它们转换为`data`URI。就其本身而言，这并不*难*，您所要做的就是将图像复制到另一个画布并`toDataURL()`在其上使用。但是，您将需要扫描任何此类图像的输入，它仍然只能在同域资源上工作。

# mongodb - 如何使用“.”引用集合名称 在 Mongo 数据库中？

> ID：15212737
> 
> 赞同：3
> 
> 时间：2013-03-04T22:54:26.200
> 
> 标签：mongodb, mongo-shell

我有一个 mongo DB，在 mongo shell 中，当我运行“显示集合”时，它会返回集合名称中带有点的集合，例如

```
a.1
a.2
a.3 
```

我如何在命令中引用它

```
db.a.1.find() 
```

以上返回 SyntaxError: missing ; 声明之前

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T22:57:16.950

想办法。将其包裹在 [ ] 中。基本的 JavaScript 知识。

```
db["a.1"].find() 
```

# java - 无法使用 ant 任务创建发音 Java 客户端

> ID：15212741
> 
> 赞同：2
> 
> 时间：2013-03-04T22:54:57.813
> 
> 标签：java, ant, enunciate

我正在尝试使用发音 v1.26.2 ant 任务创建 java-client 库。问题是每次我尝试这样做时，都会收到以下警告消息：

```
WARNING: Unknown artifact 'java.client.library'.  Artifact will not be exported. 
```

我检查了 java-client enunciate jar 是否在类路径上，并且 enunciate 甚至说它在输出中找到了它。

```
enun:
Loading modules from the specified classpath....
Discovered module docs
Discovered module java-client
... 
```

所以我不确定该怎么做。我试过用谷歌搜索发现 SO 只有几个问题要表达，似乎没有人回答我的问题。这是我的带有相关行的 ant 脚本：

```
<path id="enunciate.classpath">
    <fileset dir="${lib.enunciate.dir}">
        <include name="*.jar"/>
    </fileset>
    <fileset dir="${lib.dir}">
        <include name="**/*.jar" />
    </fileset>
    <fileset dir="${java.home}">
        <include name="lib/tools.jar"/>
    </fileset>
</path>

<taskdef name="enunciate" classname="org.codehaus.enunciate.main.EnunciateTask">
    <classpath refid="enunciate.classpath"/>
</taskdef>

<target name="enun" description="Run enunicate task on the rest services">
    <enunciate basedir="${src.web.java.dir}">
        <include name="**/*.java"/>
        <classpath refid="enunciate.classpath"/>
        <export artifactId="java.client.library" destination="${dist.client.dir}/rest/" />
        <export artifactId="docs" destination="${dist.docs.rest.dir}/"/>
        <javacArgument argument="-g"/>
    </enunciate>
</target> 
```

注意：文档导出被调用并正确导出，没有问题。包含的代码编译没有问题。我似乎无法发现为什么 ant 脚本不想导出 java-client 库。我尝试将 artifactId 的名称更改为几个不同的值，包括：java.client.library.binaries、java-client.library、enunciate-java-client 以及所有其他没有最终结果的东西。我尝试使用 enunciate.xml 配置文件，但似乎没有帮助。这是我尝试使用的xml：

```
<?xml version="1.0"?>
<enunciate label="full" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="http://enunciate.codehaus.org/schemas/enunciate-1.26.xsd">
    <modules>
        <java-client disabled="false" disableCompile="false" jarName="foo.jar"/>
        <docs disabled="false" docsDir="dist/docs/rest/"/>
    </modules>
</enunciate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:11:28.703

**tl;dr：** *对于我的项目，我只能使用 enunciate 的 docs 功能，因为我没有在其余服务的域对象上设置 JAXB/Jackson。我使用了一些不同的东西，它只是传递 JSON 字符串，它发音不识别为有效的端点返回/接受类型，因此无法创建客户端 API。*

因此，在对发音进行了详尽的搜索和分析之后，我意识到我对此做了一些假设，导致我走上了一条错误的道路。我将在这里分享我的发现，以防这有助于一路上的其他人。

我的错误之一是我第一次只浏览了 enunciate 的网站，它并没有完全点击 enunciate 的目标是什么。Enunciate 是一个试图让*创建*rest API 变得更加容易的库。但是，在已经制作的 rest API 中工作可能会很棘手。就我而言，其余服务是如此庞大，以至于不可能进行大的更改。

我最大的认识是：enunciate 要求你有某种 enunciate 可以识别的端点返回/接受类型。因此，JAXB、Jackson 等......如果没有这些东西，基本上会说：“我无法制作客户端 API，因为我不知道您的端点正在返回/接受什么。” 因此它拒绝。我通过检查我的代码与发音示例来测试这一点，[POJO](http://enunciate.codehaus.org/getting_started_step1.html "入门第 1 部分")示例[在](http://enunciate.codehaus.org/wannabecool/java_step1/com/ifyouwannabecool/domain/persona/Persona.java.html "角色示例")其域 POJO 上具有来自 JAXB 的 @XmlRootElemet。这允许其余服务传递它们，并由 JAXB 处理（un/）编组。然后，Enunciate 使用 POJO 创建一个客户端 API，该 API 可以处理端点传递给它的数据。（甚至可能只是 POJO 的直接副本，不过我还没有证实这一点。）

（希望我对这个过程的理解是正确的。如果不是，请发表评论，我会进行适当的编辑。）

我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:35:56.103

嗯。奇怪的。当您尝试导出到特定*文件*时会发生什么？例如：

```
 <export artifactId="java.client.library" destination="${dist.client.dir}/rest/myfile.zip" /> 
```

# knockout.js - 从 ko.observables knockout.js 创建 json 对象

> ID：15212745
> 
> 赞同：1
> 
> 时间：2013-03-04T22:55:18.223
> 
> 标签：knockout.js

如果这是一个愚蠢的问题，请原谅我，但我似乎无法在文档中找到它。

我想构建一个 JSON 对象，我可以使用我的 ko.observables(); 通过 ajax 发送它。

我的视图模型看起来像这样，但问题是如果我将 storeNumber 文本框的值更改为空文本框。它不会在 self.searchTest 对象中更新。

我可能完全错了，这是从我的文本框中创建 json 对象的最佳方法吗？看起来很乱。

```
 function StoresViewModel() {
        // Data
        var self = this;
        self.stores = ko.observableArray([]);
        self.storeNumber = ko.observable();
        self.cityName = ko.observable();
        self.stateName = ko.observable();        

        self.searchTest = {
            "City": self.cityName,
            "State": self.stateName,
            "StoreNumber": self.storeNumber,
        }; 
```

HTML：

```
 <label for="term">Search by store number:</label>
  <input data-bind="value: storeNumber" id="storenumber" name="storenumber" 
  placeholder="Store Number"/>
  <br /><b>or</b><br />
 Search by city and state:<br />

 <input data-bind="value: cityName" id="city" name="city" placeholder="City"/>
 <select name="state" data-bind="value: stateName">//lots of selects</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:11:36.950

创建 Json 对象

```
var jsonObj = ko.toJS(StoresViewModel);
alert(jsonObj);//alerts the object. 
```

注意：要在没有原生 JSON 序列化程序的旧浏览器（例如 IE 7 或更早版本）上工作，您还必须引用[json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)库。

生成 JSON 字符串

```
var jsonString = ko.toJSON(StoresViewModel);
alert(jsonString);//alerts the json String. 
```

您还可以从 json String 创建 json 对象

```
 var jsonString = ko.toJSON(StoresViewModel);
 alert(jsonString);//alerts the json String.

 var myJsonObj = $.parseJSON(jsonString);
 alert(myJsonObj);//alerts the object. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:05:17.747

您可以使用：

```
var js = ko.toJS(StoresViewModel); 
```

这是[最简单的方法](http://knockoutjs.com/documentation/json-data.html)，尽管您需要在 IE 6 + 7 中包含一个[JSON stringify 库。](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

或者，您可以使用[Knockout.js 映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)，它可以让您更加灵活，例如能够忽略视图模型上的一些可观察对象：

```
var mapping = {
    'ignore': ["propertyToIgnore", "alsoIgnoreThis"]
}
var viewModel = ko.mapping.fromJS(data, mapping); 
```

# jquery - FadeOut/FadeIn jQuery 跳转

> ID：15212748
> 
> 赞同：3
> 
> 时间：2013-03-04T22:55:46.353
> 
> 标签：jquery, fadein, fadeout

关于为什么这有时会使页面跳转的任何想法。看起来fadeOut 实际上是在移除元素#main 的高度。它的高度在 CSS 中声明。在 FireFox 20 中测试

```
$('.active').click(function(){
    $('#main').fadeOut(1100, function() {
        $(this).load('blank.html', function() {
            $(this).fadeIn(1100);
        });
    });
    return false;
});

<div id="main" style="margin-bottom:30px;overflow:hidden">
    <div class="slider nivoSlider">
        <img src="1.jpg" alt="" />
        <img src="2.jpg" alt="" />
        <img src="3.jpg" alt="" />
        <img src="4.jpg" alt="" />
    </div>
</div>

<li><a href="blank.html" class="active">Projects (a)</a></li> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T22:59:21.077

`fadeIn`并`fadeOut`在内容淡出完成后将显示设置为无，这使得元素消失，页面上的流程被中断。尝试只为不透明度设置动画：

```
$('.active').click(function(){
    $('#main').animate({opacity: 0}, 1100, function() {
        $(this).load('blank.html', function() {
            $(this).animate({opacity: 1}, 1100);
        });
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T22:59:41.640

`fadeOut`也可以`hide`，大致相当于调用`.css('display', 'none')`

`dislay: none`, 从布局中完全隐藏元素（及其尺寸）。

`opacity`如果您对此有疑问，将其设置为 0 可能更安全

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-10T17:34:55.760

您还可以为高度和填充设置动画，`0px`如下所示：

```
$('#main').animate({height:'0px', padding:'0px'}, {duration: 1100}); 
```

使用这种方法，站点不会跳跃，因为高度会慢慢变小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T22:57:29.423

没有看到你的 HTML 很难说，但我想你有一个锚点 ( `<a></a>`) 上的活动类。请执行下列操作：

```
$('.active').click(function(e){
       e.preventDefault();
       $('#main').fadeOut(1100, function() {
           $(this).load('blank.html', function() {
               $(this).fadeIn(1100);
           });
       });
       return false;
}); 
```

# c++ - 移动字符串中的单词，空格作为单词之间的分隔符

> ID：15212749
> 
> 赞同：3
> 
> 时间：2013-03-04T22:55:52.350
> 
> 标签：c++, c, string

让我用一个例子更详细地解释我的问题。

给定一个字符串：

> “谐音是在几个连续单词的开头重复相同的元音”

如果我们想将第四个单词 reiteration 移动**到**第二个单词的位置，字符串将变为：

> “同音重复是几个连续单词开头的同一个元音”

给定一个`C`原型如下的函数：

```
void move(char *s, int word_begin_ind, int word_end_ind, int target_begin_ind) 
```

如何实现这个功能来完成这项工作？

在上面的例子中，`word_begin_ind = 17, word_end_ind = 27, target_begin_ind = 10`

***这不是功课***。其实是面试题。我有一个算法。基本思想是这样的：

(1) 使用`word_begin_ind`and复制目标词`word_end_ind`。

(2) from `target_begin_ind`to `word_begin_ind - 1`，将每个字符移动到正确的位置。例如，移动`word_begin_ind-1`到“word_end_ind”、`word_begin_ind-2`“word_end_ind-1”等等。

(3) 最后，将副本移动到正确的位置（从target_begin_ind开始）。

我希望每个人都能明白我在问什么。

您不需要使用 c 来完成这项工作。也欢迎 C++。

谁能帮我找到其他解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T23:06:16.140

1.  在一个位置的开始和另一个位置的结束之间取一个范围：

    ```
    "Assonance [is the reiteration] of the same vowel sound at the beginning of several consecutive words" 
    ```

2.  反转这个范围：

    ```
    "Assonance [noitaretier eht si] of the same vowel sound at the beginning of several consecutive words" 
    ```

3.  将此范围拆分为单词和其他所有内容：

    ```
    "Assonance [noitaretier|eht si] of the same vowel sound at the beginning of several consecutive words" 
    ```

4.  反义词：

    ```
    "Assonance [reiteration|eht si] of the same vowel sound at the beginning of several consecutive words" 
    ```

5.  反转一切-其他：

    ```
    "Assonance [reiteration|is the] of the same vowel sound at the beginning of several consecutive words" 
    ```

6.  所以你已经完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:19:09.990

我会这样解决它：

```
char * temp = malloc(end-begin);
memcpy(temp,s,end-begin); 
```

现在我们知道在目标位置必须留出一些空间来放回单词，所以我想从目标位置前后移动 n 个字节，具体取决于原始单词是在目标位置之前还是之后，这应该用*memmove*完成，然后只需**memcpy**目标位置的单词

# php - 基本 Google Drive PHP API 上传脚本的内存分配错误

> ID：15212752
> 
> 赞同：2
> 
> 时间：2013-03-04T22:56:03.427
> 
> 标签：php, google-drive-api, google-api-php-client

**[编辑]**正如错误所指出的，我的 php.ini 为每个脚本分配 1GB 的 RAM（memory_limit = 1G），这应该绰绰有余，所以我不是在问如何增加或修改这个限制。我刚刚发现这个问题可以被认为是这个其他**未回答**问题的重复：[Upload large file to google drive with PHP Client Library](https://stackoverflow.com/questions/13808528/upload-large-file-to-google-drive-with-php-client-library)

我正在尝试使用[google API 快速入门指南](https://developers.google.com/drive/quickstart-php#step_1_enable_the_drive_api)中提供的 PHP CLI 脚本从我的 VPS 将一个大文件 (237MB) 上传到我的 google drive 帐户，但出现以下错误：

```
PHP Fatal error:  Allowed memory size of 1073741824 bytes exhausted 
(tried to allocate 316952783 bytes) in 
/var/www/google-api-php-client/src/service/Google_MediaFileUpload.php on line 135 
```

剧本：

```
<?php
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$client = new Google_Client();
// Get your credentials from the APIs Console
$client->setClientId('MY_CLIENT_ID');
$client->setClientSecret('MY_CLIENT_SECRET');
$client->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));

$service = new Google_DriveService($client);

$authUrl = $client->createAuthUrl();

//Request authorization
print "Please visit:\n$authUrl\n\n";
print "Please enter the auth code:\n";
$authCode = trim(fgets(STDIN));

// Exchange authorization code for access token
$accessToken = $client->authenticate($authCode);
$client->setAccessToken($accessToken);

//Insert a file
$file = new Google_DriveFile();
$file->setTitle('My zip file');
$file->setDescription('A test zip file');
$file->setMimeType('application/zip');

$data = file_get_contents('myfile.zip');

$createdFile = $service->files->insert($file, array(
      'data' => $data,
      'mimeType' => 'application/zip',
    ));

print_r($createdFile);
?> 
```

top 说我有 787816k 可用物理内存（加上 2G 缓存），所以我不知道问题出在哪里。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:57:44.820

**[编辑]**这是内存分配问题的有效答案，但不能在合理的脚本内存使用限制内解决文件上传问题，这是实际问题。有关该问题的答案，请查看[https://stackoverflow.com/a/14693917/1060686](https://stackoverflow.com/a/14693917/1060686)

PHP 有一种机制可以防止 PHP 脚本使用超过给定阈值所允许的内存。这个阈值可以在 php.ini 中配置（对于所有脚本）或每个脚本。我建议将每个脚本设置为更高的值。

在脚本顶部添加以下行：

```
ini_set('memory_limit', '500M'); 
```

* * *

大内存使用说明：您使用以下行读取文件：

$data = file_get_contents('myfile.zip');

这需要 PHP 将完整的文件内容读入内存（在 var 中`$data`）。最好是按块读取文件，例如以 4096 字节块的形式，然后立即将它们发送到网络。就像我说的，我目前不知道是否可以使用您正在使用的 google API。

# php - 让 2 个模块在 magento 中使用相同的名称

> ID：15212753
> 
> 赞同：2
> 
> 时间：2013-03-04T22:56:21.380
> 
> 标签：php, magento, routes

我正在创建一个模块，允许客户在未达到处理阶段时编辑他们的订单，到目前为止一切正常，但是在订单历史记录页面上我有这 3 个链接

```
View Order        | http://www.site.com/Current-Build/sales/order/view/order_id/[ID]/
Reorder           | http://www.site.com/Current-Build/sales/order/reorder/order_id/[ID]/
Edit Order (mine) | http://www.site.com/Current-Build/mymodulefrontname/order/edit/order_id/[ID]/ 
```

`<frontName>`为了让事情看起来整洁，我尝试通过将我的模块更改为 config.xml 中的 sales 并更改`mymodulefrontname`to来更改我的链接以匹配前 2 个链接`sales`，而这对我的链接问题有效，现在前 2 个链接现在转到404 页

有没有办法让我的模块与 Mage_Sales 具有相同的名称而不会引起冲突

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T00:53:00.040

Magento[在 Magento 1.3 [link] 中引入了在现有名称下添加目录的功能](https://github.com/benmarks/magento-mirror/blob/1.3.0/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php#L45)。

在您的情况下，适当的语法是：

```
<frontend>
    <routers>
        <sales>
            <args>
                <modules>
                    <arbitrary after="Mage_Sales">Your_Module_Sales</arbitrary>
                    <!-- points to Your/Module/controllers/Sales/ -->
                </modules>
            </args>
        </sales>
    </routers>
</frontend> 
```

使用方法在匹配目录中创建一个*OrderController.php*`editAction()`类，然后您就可以开展业务了。

作为风格问题，上述配置将开始匹配模块*控制器目录下的**Sales*子目录中的路由。我更喜欢将这些类型的控制器分开；您可以选择一个不同的子目录或选择根本不使用一个。

# .net - 单声道 3 - 403 错误

> ID：15212754
> 
> 赞同：1
> 
> 时间：2013-03-04T22:56:23.670
> 
> 标签：.net, linux, mono, fastcgi, centos5

我通过 fastcgi 运行单声道 3.0 ......

我的 htaccess 是这样的：

```
Action mono-cgi /home/vamola/public_html/cgi-bin/mono-cgi
AddHandler mono-cgi .aspx .asmx .ashx .ascx .asax .axd .config .cs 
```

单cgi：

```
#!/opt/mono-3.0.2/bin/fastcgi-mono-server4 -f
-connect /tmp/mono-fcgi.sock /home/admin/mono-fcgi 
```

单fcgi：

# !/

```
bin/sh
umask 0077
exec >>/tmp/mono-fcgi.log
exec 2>>/tmp/mono-fcgi.err

echo $(date +"[%F %T]") Starting fastcgi-mono-server2

cd /
chmod 0700 /tmp/mono-fcgi.sock
echo $$>/tmp/mono-fcgi.pid
# stdin is the socket handle
exec env -i \
PATH="/opt/mono-3.0.2/bin:$PATH" \
LD_LIBRARY_PATH="/opt/mono-3.0.2/lib:$LD_LIBRARY_PATH" \
TMP="/home/username/tmp" \
MONO_SHARED_DIR="/tmp" \
/opt/mono-3.0.2/bin/fastcgi-mono-server2 \
/root=/home/vamola/public_html /applications=/:/home/vamola/public_html 
```

我得到这个问题 404 未找到服务器错误......而且没有日志，什么都没有......我做错了吗？

我一一按照这些步骤[http://www.mono-project.com/CGI ...](http://www.mono-project.com/CGI)

另一个问题是，有什么方法可以测试我的“/opt/mono-3.0.2/bin/fastcgi-mono-server4”是否工作正常？

请看一下：[http ://www.vamola.net/net/test.aspx](http://www.vamola.net/net/test.aspx)

[编辑] 无论如何要强制创建日志？因为我在 apache 日志中什么也看不到……即使这样：

```
 ErrorLog  /etc/httpd/logs/mono-error.log
  CustomLog /etc/httpd/logs/mono-access.log combined 
```

tks 和最好的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:25:16.130

您可以尝试将**virtual**关键字添加到您的 apache“操作”指令中吗？

```
 Action mono-cgi /home/vamola/public_html/cgi-bin/mono-cgi virtual 
```

它将阻止 apache 检查文件是否存在于错误的目录中。

# mysql - 在 MySQL 服务器中链接 MS SQL Server 表

> ID：15212757
> 
> 赞同：0
> 
> 时间：2013-03-04T22:56:28.710
> 
> 标签：mysql, sql, sql-server

我想知道是否可以在 MySQL 服务器中连接 MS SQL Server 表。或者，如果它可以通过 Java DB 完成。我的意思是，将 MySQL 和 MS SQL Server 的表链接到 JavaDB，然后通过 JavaDB 进行查询。如果您知道其他好的解决方案，无论如何都可以（不包括：（1）UnityJDBC，因为我已经尝试过了，它对我不利；（2）MS SQL Server 的“链接服务器”，因为我工作的公司是基于MySQL 数据库）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:17:27.863

几年前有一些工作是创建一个 FEDERATED_ODBC 存储引擎，它允许 MySQL 通过 ODBC 访问另一个数据库实例上的表。

[http://capttofu.livejournal.com/2456.html](http://capttofu.livejournal.com/2456.html)

我不确定它发展了多少比特腐烂。如果有兴趣，您可以让其创建者对其进行一些工作。

# jquery - 如何判断 JQuery 错误是否意味着调用被中断

> ID：15212760
> 
> 赞同：6
> 
> 时间：2013-03-04T22:56:52.707
> 
> 标签：jquery

假设我有一个运行时间较长的 jQuery Ajax 调用（比如 5 秒），如下所示：

```
$.ajax({
    url: '/LongCall',
    type: 'POST',
    async: true,
    cache: false,
    datatype: 'json',
    success: function(data) {
      alert('Success!');
    },
    error(xhr, textStatus, errorThrown) {
      alert('Error!');
    }
}); 
```

现在假设在等待我的五秒钟进程运行时，用户变得不耐烦并决定在我的页面上点击某种导航。上述调用中发生的情况是用户在单击链接时收到错误警报。

如果确实存在错误，我确实希望显示错误警报，但如果发生的一切是用户决定离开，我不希望显示错误警报。我怎样才能做到这一点？

换句话说，是否有一些值我可以检查（可能是 xhr.status？），它会告诉我发生的错误只是进程被中断，所以我可以知道忽略错误？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T00:52:59.403

据我所知，最好的方法是在错误处理程序中检查 xhr.readyState。任何小于 4 的值都表示进程仍在运行，因此这意味着浏览器中正在发生一些事情来中断它。

您还想调用 xhr.abort() 来尝试停止 ajax 进程，这样用户就不必在导航实际发生之前等待它完成，尽管对我来说对 xhr.abort() 的调用实际上并没有加快速度。

```
$.ajax({
    url: '/LongCall',
    type: 'POST',
    async: true,
    cache: false,
    datatype: 'json',
    success: function(data) {
      alert('Success!');
    },
    error(xhr, textStatus, errorThrown) {
       if (xhr.readyState < 4) {
           xhr.abort();
       }
       else {
           alert('Error!');
       }
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T23:04:22.580

阅读[文档](http://api.jquery.com/jQuery.ajax/)，我会猜测您的错误处理程序应该是这样的：

```
error(xhr, textStatus, errorThrown) {
    if( textStatus != "abort") {
        alert("Error!");
    }
} 
```

# sql - SQL数据库体育联盟统计名册

> ID：15212773
> 
> 赞同：1
> 
> 时间：2013-03-04T22:57:37.883
> 
> 标签：sql, rostering

我正在制作一个数据库来存储篮球统计数据。我正在尝试确定我跟踪花名册的方法是否明智。

在整个赛季中，球员可能会更换球队或完全离开/加入联盟。我想跟踪这一点并保持查询的能力：

*   球员在每支球队任职期间的统计数据
*   任何时间段的球队统计数据（主要来自他们的球员），例如一个赛季，包括任何球员为球队效力的所有比赛。
*   球队名册在任何日期

我有一种方法，但我在思考它在未来的潜在局限性时有点困难。

*   表 playerStats 包含游戏中每个玩家的统计信息，带有 gameID、teamID。
*   游戏表具有每个游戏 ID 的日期。
*   rosters 表包含 playerID、teamID、fromDate 和 toDate 列。

这足够了吗？我什至需要 rosters 表，否则我需要 playerStats 表中的 teamID 还是两者都有？这通常是用于名册类型的 DB 的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:16:42.240

你并不需要名册。如果您计划使用非描述性的团队 ID 和/或希望团队更改其名称，您可能需要使用`Team`表 ( `teamID`, )。`teamName`

您还需要`Players`table 来保存他们的名字以及您想要保留的任何其他属性..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:26:00.747

```
game
----------
game_id (pk)
team_1_id
team_2_id
play_date
location_id

roster
----------
player_id
team_id
begin_date
end_date

game_stats
-------------
game_id
player_id
stats... 
```

# java - 将 @Transactional 和 @RequestMapping 与 RuntimeExceptions 一起使用

> ID：15212774
> 
> 赞同：2
> 
> 时间：2013-03-04T22:57:44.197
> 
> 标签：java, spring, hibernate

我有点奇怪，希望有人能解释一下。我正在使用`Hibernate 3.6.10`和`Spring Framework 3.1.2.RELEASE`。

我有一个带有和`@Controller`注释的方法，我知道这是一件坏事。由于一些乏味的问题，我们现在必须这样做，但这不是真正的问题。所有延迟加载都在控制器/事务中按预期工作。`@RequestMapping``@Transactional`

这些事务方法调用一个`@Service`也用普通 old 标记的 with 方法`@Transactional`，它应该将所有内容保存在同一个事务中，这`Propagation.REQUIRED`是默认设置。到目前为止，一切都很好。

现在这是令人困惑的花絮。该`@Service`方法抛出一个`XyzException`扩展`RuntimeException`，据称将事务标记为仅回滚。按照这种逻辑，正在使用的唯一一个事务应该回滚，并且在事务结束之前不重新抛出的任何尝试处理方法`XyzException`中`@Controller`的事务都应该导致另一个不太预期`RuntimeException`的 Hibernate 说由于事务被标记而导致提交操作失败仅回滚。但事实并非如此。

相反，事务回滚并且重定向（使用 POST、重定向、GET）成功发生。没有例外，没有混乱。

`So the question is, "What am I doing to make this work as it does?"`

我有一个`OpenSessionInViewInterceptor`被使用的，所以我想也许交易实际上并没有从这个`@Controller`级别开始。但是，当我删除`@Transactional`时，延迟加载操作中断了。

**- 编辑 -**

因此，不管 OSIV 是什么废话，我能够处理该方法的`XyzException` *内部*`@Transactional`是否有意义？我认为在未重新抛出`RuntimeException`的方法中处理了 s会导致错误。`@Transactional`所讨论的`@Transactional`方法是入口点（即第一个`@Transactional`调用的方法）是否重要？

# c# - 转换表达式 > 到表达式 动态的

> ID：15212779
> 
> 赞同：8
> 
> 时间：2013-03-04T22:58:08.807
> 
> 标签：c#, linq, reflection, lambda

我找不到从 Expression<Func<T1,bool>> 转换为 Expression<Func<T2,bool>> 的方法。由于我使用了大量的反射，事实上，我真正需要的是一个接受类型参数并执行转换的方法。

```
public object Convert(Expression<Func<T1,bool>> expr, Type t); 
```

T2 源自 T1

```
public class T1 {
     int FamilyId {get; set;}
}

public class T2 : T1 {
     ... other properties
} 
```

我在基类上定义一个过滤器表达式

```
Expression<Func<T1,bool>> filter = p => p.FamilyId == [some value] 
```

我想申请一个 List<T2>

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T23:51:01.603

这是你要找的吗？该方法有两种风格：第一种让您将新的输入类型作为参数传递；第二个允许您将输入类型作为泛型参数传递并获得强类型的 LambdaExpression。

```
 public static LambdaExpression ChangeInputType<T, TResult>(Expression<Func<T, TResult>> expression, Type newInputType)
    {
        if (!typeof(T).IsAssignableFrom(newInputType))
            throw new Exception(string.Format("{0} is not assignable from {1}.", typeof(T), newInputType));
        var beforeParameter = expression.Parameters.Single();
        var afterParameter = Expression.Parameter(newInputType, beforeParameter.Name);
        var visitor = new SubstitutionExpressionVisitor(beforeParameter, afterParameter);
        return Expression.Lambda(visitor.Visit(expression.Body), afterParameter);
    }

    public static Expression<Func<T2, TResult>> ChangeInputType<T1, T2, TResult>(Expression<Func<T1, TResult>> expression)
    {
        if (!typeof(T1).IsAssignableFrom(typeof(T2)))
            throw new Exception(string.Format("{0} is not assignable from {1}.", typeof(T1), typeof(T2)));
        var beforeParameter = expression.Parameters.Single();
        var afterParameter = Expression.Parameter(typeof(T2), beforeParameter.Name);
        var visitor = new SubstitutionExpressionVisitor(beforeParameter, afterParameter);
        return Expression.Lambda<Func<T2, TResult>>(visitor.Visit(expression.Body), afterParameter);
    }

    public class SubstitutionExpressionVisitor : ExpressionVisitor
    {
        private Expression before, after;
        public SubstitutionExpressionVisitor(Expression before, Expression after)
        {
            this.before = before;
            this.after = after;
        }
        public override Expression Visit(Expression node)
        {
            return node == before ? after : base.Visit(node);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:06:57.543

你的要求是非常不明智的。编译器如何知道 T1 是否可以转换为 T2？似乎要求可怕的运行时错误，即使它是可能的。*

（*我认为这是不可能的，因为您试图将反射与嵌套的泛型类型结合起来。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:09:22.867

看起来您想要组合 2 个表达式 -`T2`转换`T1`，而不是调用给`expr`定结果。

这个问题一般讨论[组合两个表达式（Expression<Func<T, bool>>）](https://stackoverflow.com/questions/457316/combining-two-expressions-expressionfunct-bool)。对于您的情况，我认为您需要[Expression.Call](http://msdn.microsoft.com/en-us/library/dd323927.aspx)来构造转换表达式，而不是再次调用具有转换结果的原始表达式。

# php - Zend 框架 2：空 isValid/getMessages

> ID：15212780
> 
> 赞同：5
> 
> 时间：2013-03-04T22:58:11.520
> 
> 标签：php, forms, zend-framework2

我正在创建注册表单：

这是我的行动：

```
public function registrationAction() {
    $form = new RegistrationForm();

    $request = $this->getRequest();
    if ($request->isPost()) {
        $users = new Users();
        $form->setInputFilter($users->getInputFilter());
        $form->setData($request->getPost());

        var_dump($form->isValid());
        exit;

        if ($form->isValid()) {
            $users->exchangeArray($form->getData());
            $this->getUsersTable()->addUser($users);
            $message = 'Регистрирахте се успешно! Можете да влезете в профила си чрез формата за вход на началната страница.';
        }
    }

    return new ViewModel(array(
                'form' => $form,
                'message' => $message,
            ));
} 
```

这是我的表格：

```
namespace Main\Form;

use Zend\Form\Form;

class RegistrationForm extends Form {

public function __construct($name = null) {
    parent::__construct('User');

    $this->add(array(
        'name' => 'username',
        'attributes' => array(
            'type' => 'Zend\Form\Element\Text',
        ),
        'options' => array(
            'label' => 'Потребителско име',
        ),
    ));

    $this->add(array(
        'name' => 'email',
        'attributes' => array(
            'type' => 'Zend\Form\Element\Text',
        ),
        'options' => array(
            'label' => 'Email адрес',
        ),
    ));

    $this->add(array(
        'name' => 'password',
        'attributes' => array(
            'type' => 'Zend\Form\Element\Text',
        ),
        'options' => array(
            'label' => 'Парола',
        ),
    ));

    $this->add(array(
        'name' => 'submit',
        'attributes' => array(
            'type' => 'Zend\Form\Element\Submit',
        ),
        'options' => array(
            'label' => 'Регистрация',
        )
    ));
} 
```

}

这是 Object\Model\Users.php 中用户模型中的 inputFilter：

```
namespace Object\Model;

use Zend\Validator\StringLength;
use Zend\Validator\NotEmpty;
use Zend\Validator\EmailAddress;
use Zend\Validator\Date;
use Zend\InputFilter\Factory as InputFactory;
use Zend\InputFilter\InputFilter;
use Zend\InputFilter\InputFilterAwareInterface;
use Zend\InputFilter\InputFilterInterface;

class Users {

public $user_id;
public $username;
public $name;
public $email;
public $password;
public $sex;
public $birthday;
public $avatar;
public $user_level;
public $date_registered;
public $is_active;
public $is_banned;

public function exchangeArray($data) {
    $this->user_id = (isset($data['user_id'])) ? $data['user_id'] : null;
    $this->username = (isset($data['username'])) ? $data['username'] : null;
    $this->name = (isset($data['name'])) ? $data['name'] : null;
    $this->email = (isset($data['email'])) ? $data['email'] : null;
    $this->password = (isset($data['password'])) ? $data['password'] : null;
    $this->sex = (isset($data['sex'])) ? $data['sex'] : null;
    $this->birthday = (isset($data['birthday'])) ? $data['birthday'] : null;
    $this->avatar = (isset($data['avatar'])) ? $data['avatar'] : null;
    $this->user_level = (isset($data['user_level'])) ? $data['user_level'] : null;
    $this->date_registered = (isset($data['date_registered'])) ? $data['date_registered'] : null;
    $this->is_active = (isset($data['is_active'])) ? $data['is_active'] : null;
    $this->is_banned = (isset($data['is_banned'])) ? $data['is_banned'] : null;
}

public function setInputFilter(InputFilterInterface $inputFilter) {
    throw new \Exception('Not used');
}

public function getInputFilter() {
    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();

        $factory = new InputFactory();

        $inputFilter->add($factory->createInput(array(
                    'name' => 'user_id',
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'username',
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'NotEmpty',
                            'options' => array(
                                'messages' => array(
                                    NotEmpty::IS_EMPTY => 'Моля въведете потребителско име!',
                                ),
                            ),
                        ),
                        array(
                            'name' => 'StringLength',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'min' => 1,
                                'max' => 50,
                                'messages' => array(
                                    StringLength::TOO_SHORT => 'Потребителското име трябва да бъде минимум 1 символ',
                                    StringLength::TOO_LONG => 'Потребителското име не може да надвишава 50 символа',
                                ),
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'name',
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'StringLength',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'max' => 255,
                                'messages' => array(
                                    StringLength::TOO_LONG => 'Вашите име и фамилия не може да надвишават 255 символа',
                                ),
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'email',
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'NotEmpty',
                            'options' => array(
                                'messages' => array(
                                    NotEmpty::IS_EMPTY => 'Моля въведете email адрес!',
                                ),
                            ),
                        ),
                        array(
                            'name' => 'EmailAddress',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'min' => 1,
                                'max' => 50,
                                'messages' => array(
                                    EmailAddress::INVALID => 'Email адресът е невалиден.',
                                ),
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'password',
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'NotEmpty',
                            'options' => array(
                                'messages' => array(
                                    NotEmpty::IS_EMPTY => 'Моля въведете парола!',
                                ),
                            ),
                        ),
                        array(
                            'name' => 'StringLength',
                            'options' => array(
                                'encoding' => 'UTF-8',
                                'min' => 4,
                                'max' => 90,
                                'messages' => array(
                                    StringLength::TOO_SHORT => 'Паролата трябва да бъде минимум 4 символ',
                                    StringLength::TOO_LONG => 'Паролата не може да надвишава 90 символа',
                                ),
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'sex',
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'birthday',
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'Date',
                            'options' => array(
                                Date::INVALID_DATE => 'Въведената дата е грешна.',
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'avatar',
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'user_level',
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'date_registered',
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'is_active',
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'is_banned',
                    'filters' => array(
                        array('name' => 'Int'),
                    ),
                )));

        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
} 
```

}

当我尝试访问 $form 对象的 isValid() 或 getMessages() 方法时，它们是空的。在 var_dump 中调用它们时，它们总是布尔值错误......有人可以帮助我吗？提前致谢。这只发生在这个模块中。在我的另一个模块中，表格一切正常。这个 ZF2 有时很复杂... :|

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-06T10:47:17.257

我和你有同样的问题，isValid() 会返回 false，而 getMessages() 会是一个空数组。

我的问题是我已经为一个字段（例如电子邮件）定义了一个输入验证器，但是我正在验证的表单上不存在该字段。Zend Framework 2 中似乎有一个错误，在这种情况下不会打印错误消息：[github 上的错误报告](https://github.com/zendframework/zf2/issues/2799)

所以解决办法是把缺失的字段加到表单对象中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T09:23:58.163

检查字段名称的拼写是否与输入过滤器中的名称匹配 - 我做了同样的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-26T21:36:53.277

我遇到了同样的问题，这是因为表单和过滤器没有相同数量的属性。

您的注册表单的属性少于您的过滤器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T13:36:28.887

你写的（在控制器中）是正常的吗？

```
var_dump($form->isValid());
exit; 
```

如果发生错误，可能只是显示“消息”，不是吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-26T14:57:51.397

我找不到错误，但这里有一些提示：

您不需要使用 InputFactory 将元素设置为 InputFilter，ZF2 会自动完成（[ZF2 Docs](http://framework.zend.com/manual/2.1/en/modules/zend.input-filter.intro.html)）

> 最后，默认的 InputFilter 实现由 Factory 支持。这意味着当调用 add() 时，您可以提供工厂可以理解的规范，并且它将创建适当的对象。您可以以这种方式创建 Input 或 InputFilter 对象。

所以而不是

```
$inputFilter->add($factory->createInput(array(
                'name' => 'user_id',
                'filters' => array(
                    array('name' => 'Int'),
                ),
            ))); 
```

你可以做

```
$inputFilter->add(array(
    'name' => 'user_id',
         'filters' => array(
             array('name' => 'Int'),
          ),
     )); 
```

另一件事，如果您为同一个实例调用 $form->isValid() 两次，第二次将导致一些不可见的错误，并且其余代码将不会执行。我不知道会发生什么错误，但您可以为每个 $form 实例调用一次 isValid 。

# iphone - 在文本字段之外触摸时并不总是关闭键盘

> ID：15212783
> 
> 赞同：0
> 
> 时间：2013-03-04T22:58:17.510
> 
> 标签：iphone, cocoa-touch

我有触摸方法，但它仅在我单击视图的某些区域时才有效，而不是无处不在。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    [self.view endEditing:YES];// this will do the trick
} 
```

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:11:50.500

好的，尝试使用以下代码并检查：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    [touch locationInView:self.view];
    [self.view endEditing:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:23:22.027

尝试这个

```
- (void)viewDidLoad
{
[super viewDidLoad];
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured:)];
[self.view addGestureRecognizer:singleTap];

// Do any additional setup after loading the view, typically from a nib.
}
- (void)singleTapGestureCaptured:(UITapGestureRecognizer *)gesture
{
//Get touch point
CGPoint touchPoint=[gesture locationInView:self.view];

//Hide keyBoard
[self.view endEditing:YES];
} 
```

# html - raphael 将对象从一个容器拖放到另一个容器

> ID：15212785
> 
> 赞同：6
> 
> 时间：2013-03-04T22:58:23.543
> 
> 标签：html, svg, raphael

我已经能够在同一张纸上拖放元素。现在我需要能够将 raphael 元素从一个纸容器拖放到另一个容器。这是示例：

从第一个 svg 拖到第二个 svg

html中的第一个svg元素

```
<svg style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" xmlns="http://www.w3.org/2000/svg" version="1.1" width="500" height="260">
  <rect style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" x="10" y="15" width="64" height="64" r="5" rx="5" ry="5" fill="#ffc0cb" stroke="#000">
  </rect>
</svg>
```

html中的第二个svg元素

```
<svg style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" </svg>
```

首先，有可能吗？如果可能的话，请给我一些线索如何做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-12T08:41:01.453

几天后，我使用简单的 javascript 和 svg 向用户提供了“拖放”功能。在其中我给出了一个函数，它可以确定鼠标指针的确切位置，而不管平移或缩放。看看它，看看它是否对你有用。（我不知道它在 rapheal 中是如何工作的）

```
 var mainsvg = document.getElementsByTagName('svg')[0];
function mouseup(event) {
    var svgXY = getSvgCordinates(event);// get current x,y w.r.t to your   svg.
}
    function getSvgCordinates(event) {
                var m = mainsvg.getScreenCTM();
                var p = mainsvg.createSVGPoint();
                var x, y;

                x = event.pageX;
                y = event.pageY;

                p.x = x;
                p.y = y;
                p = p.matrixTransform(m.inverse());

                x = p.x;
                y = p.y;

                x = parseFloat(x.toFixed(3));
                y = parseFloat(y.toFixed(3));

                return {x: x, y: y};
            } 
```

# ruby-on-rails - 我可以选择性地运行 db:schema:load 吗？

> ID：15212793
> 
> 赞同：0
> 
> 时间：2013-03-04T22:58:59.967
> 
> 标签：ruby-on-rails, linux, rake

我有一个脚本，它将在包含 Rails 应用程序的虚拟实例的启动时运行。这是用于设置测试环境的自动化系统的一部分，因此我希望它能够正确初始化，无论这是否是该应用程序第一次在此环境中启动。也就是说，环境第一次看到这个应用程序时，它应该运行标准：

```
rake db:create
rake db:schema:load
rake db:fixtures:load 
```

但是在创建数据库之后的任何时候，它都应该忽略这些命令。到目前为止，很聪明地知道 db:create 可以跳过，但它会不断重新运行其他的。

除了直接调用数据库并采取行动之外，是否有一种简单的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:23:58.517

可能务实的解决方案是忽略 db:create 上的错误（如果 db 存在，它将引发异常）

所以你可以创建一个 rake 任务，比如

```
task :my_task => :environment do
  begin
    Rake::Task["db:create"].invoke
    Rake::Task["db:schema:load"].invoke
    Rake::Task["db:fixtures:load"].invoke
  rescue Exception => e
  end

  #more stuff...
end 
```

# java - 有没有办法从 java 执行 Objective-C 应用程序？

> ID：15212797
> 
> 赞同：1
> 
> 时间：2013-03-04T22:59:08.053
> 
> 标签：java, objective-c

我有一个已经存在的 Objective-C 控制台应用程序。我不是开发它的人，所以我无法轻松访问代码。因此，更改代码可能不是一个选项，但我所知道的是，对于编译，它需要 Cocoa 和 SystemConfiguration。（我在一封电子邮件中被告知）一旦运行，它会提示等待命令，并且在该命令之后有一个文本输出结果。有没有办法让我可以使用这个应用程序并在 java 中运行它并捕获输出？

我以前从未做过 OSX 开发，但我知道 C 代码可以很好地与 Java 一起工作，而 Obj-c 是 C 的超集，但是根据框架要求，很明显在代码中的某处使用了对象。

我见过像 rococoa 这样的东西，但有一段时间没有更新（2009 年）它仍然适用于山狮吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:18:54.597

当你说你有一个 Objective-C 应用程序时，你真的是说你有一个为 Mac OS 编译的二进制/可执行文件？

如果是这样，您可以[使用 Class ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)来创建操作系统进程。

```
Process p = new ProcessBuilder("myCommand", "myArg").start(); 
```

注意：此解决方案仅适用于 Mac OS X。此外，您可能会遇到一些安全问题，因为 Java 喜欢在沙箱中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:24:28.840

如果你想创建一个子进程并在它和你的主程序之间交换信息，我认为下面的代码会对你有所帮助。

它通过调用二进制/可执行文件创建一个子进程，然后将某些内容（例如命令）写入其输入流并读取一些文本：

```
import java.io.*;

public class Call_program
{
    public static void main(String args[])
    {
        Process the_process = null;
        BufferedReader in_stream = null;
        BufferedWriter out_stream = null;

        try {
            the_process = Runtime.getRuntime().exec("...");   //replace "..." by the path of the program that you want to call
        }
        catch (IOException ex) {
            System.err.println("error on exec() method");
            ex.printStackTrace();  
        }

        // write to the called program's standard input stream
        try
        {
            out_stream = new BufferedWriter(new OutputStreamWriter(the_process.getOutputStream()));
            out_stream.write("...");     //replace "..." by the command that the program is waiting for
        }
        catch(IOException ex)
        {
            System.err.println("error on out_stream.write()");
            ex.printStackTrace();  
        }

        //read from the called program's standard output stream
        try {
            in_stream = new BufferedReader(new InputStreamReader(the_process.getInputStream()));
            System.out.println(in_stream.readLine());   //you can repeat this line until you find an EOF or an exit code.
        }
        catch (IOException ex) {
            System.err.println("error when trying to read a line from in_stream");
            ex.printStackTrace();  
        }
    }
} 
```

参考。

[http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2frzaha%2fiostrmex.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2frzaha%2fiostrmex.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:06:00.103

如果这个列表很全面，那么就没有纯粹的 Objective-C 解决方案。

[http://en.wikipedia.org/wiki/List_of_JVM_languages](http://en.wikipedia.org/wiki/List_of_JVM_languages)

您的下一个选项是从 Java 调用 C 的解决方案 - 这本身对 Google 来说很容易，因此我不会在此处包含信息 - 或者更多解耦的解决方案（这很可能是您想要的），例如使用消息总线，例如ZeroMQ 或 RabbitMQ。

我强烈建议避免桥接两种语言，除非您有特别不寻常的架构或硬件要求。桥接两种语言是 O(n^2) APIs 来学习语言的数量，实现消息队列是 O(n)。

# c# - 达到另一个类的方法提供的结果

> ID：15212808
> 
> 赞同：0
> 
> 时间：2013-03-04T22:59:37.113
> 
> 标签：c#, windows-phone-8

我正在制作一个 RSS 阅读器，但在保持 MVVM 和类之间的通信方面遇到了麻烦。

我有一个 ViewModel，有一个我想绑定到视图的项目列表，称之为项目。

还有另一个类，一个 FeedReader，它将为 Items 列表提供项目。至少这是我的目标。FeedReader 有以下方法：

```
 public void GetFeed(Uri uri)
    {
        // that's all it does:
        WebClient webClient = new WebClient();
        webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
        webClient.DownloadStringAsync(uri);
     }

    private void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
    // the async method finished
    // calls UpdateFeed:
            UpdateFeed(e.Result);
    }

    private List<ItemViewModel> UpdateFeed(string feedXML)
    {
    // parsing the string
    // LINQ to XML query does the rest, creates new Model items, put them in a list with .ToList()

    //return this result List:

        return feedItems;
    } 
```

这些方法效果很好。

在 ViewModel 中，我使用 uri 调用 FeedReader 的 GetFeed(Uri)。我想用提供的项目填写项目列表。问题是提供项目的方法是 UpdateFeed，我没有调用它，我调用了 GetFeed。

```
 var feed = new FeedReader();
        feed.GetFeed(uri); 
```

如何在 ViewModel 中获得 UpdateFeed 的结果？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:56:48.043

您应该使用 taskcompletionsource 使其可等待；

```
public Task<List<Foo>> GetFeed(Uri uri)
{
    var tcs = new TaskCompletionSource<List<Foo>>(); //used to transform a synchronous method into an asynchronous.
    WebClient webClient = new WebClient();
    webClient.DownloadStringAsync(uri);
    webClient.DownloadStringCompleted += async(sender,e)=>
    {
        tcs.SetResult(e.Result); //Method ended, can now return. 
    };
    return tcs.Task;
} 
```

在您的视图模型中：

```
var feed = new FeedReader();
var listFoo = feed.GetFeed(uri);

//UpdateFeed 
```

然后您将能够在您的视图模型中使用这些数据。问候

# ruby - 递归方法

> ID：15212812
> 
> 赞同：0
> 
> 时间：2013-03-04T22:59:48.770
> 
> 标签：ruby

我有来自 Flickr API 的响应，其中列出了我所有收藏的树。

我基本上需要一种递归方法来循环并将每个集合添加到我的数据库中。

我的头完全在旋转。

这就是我所拥有的：

```
 def add_collection(options = {})
    Collection.create!({
        :flickr_id    =>  options['id'],
        :title        =>  options['title'],
        :description  =>  options['description'],
        :primary      =>  options['primary']
      })
  end

  def self.complete_grab
    collections = Flickr.get_collection_tree
    collections.each do |c|
      add_collection({id: c.id, title: c.title, description: c.description, primary: c.primary})
      if c.has_children?
        //
      end
    end
  end 
```

有什么想法吗？我接近解决了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:09:32.587

我不熟悉 Flickr API，但我认为您正在寻找的粗略结构是：

```
def complete_grab
   add_all(Flickr.get_collection_tree)
end

def add_all(collections)
   collections.each do |c|
      add_collection({id: c.id, title: c.title, description: c.description, primary: c.primary})
      add_all(c.children)
   end
end 
```

这假设每个集合都有一个名为 children 的成员，其中包含多个子集合。

# barcode - 使用 PixelSense 读取条码

> ID：15212815
> 
> 赞同：1
> 
> 时间：2013-03-04T23:00:12.237
> 
> 标签：barcode, pixelsense

如何使用 Microsoft PixelSense 读取标准条形码并在代码中对其进行操作？

我希望在 中创建类似于位码的东西`TagVisualizer`，但希望能够使用标准条形码（在员工 ID 的背面）。PixelSense 是否能够提取此信息并为我提供一个数字或任何我可能能够解析的信息量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:00:55.047

标准条码包含太多细节，Microsoft Pixelsense 无法识别。您将需要一个外部设备来阅读它们。来自[ms surface 2.0 的标记对象白皮书](http://www.microsoft.com/en-us/download/details.aspx?id=28959)

> 条码支持
> 
> 条形码是通常用于扫描产品或跟踪库存的数据的光学机器可读表示。最常见的条形码是用于在销售终端扫描产品的 UPC 代码。Surface 的最佳条码集成使用**专用的外部条码扫描设备** ，该设备可以内置在 Surface 外壳中，通过 USB 连接到设备。Surface 不支持显示条形码以供外部设备扫描。

# xslt - 如何在 陈述？

> ID：15212818
> 
> 赞同：1
> 
> 时间：2013-03-04T23:00:19.443
> 
> 标签：xslt, xslt-2.0, saxon

我正在使用 Saxon 9.4 和 XSLT 2.0

我的样式表中有以下代码片段：-

```
<xsl:template name="some_template">
  <xsl:param name="some_param" as="xs:integer?"/>
</xsl:template> 
```

这基本上是一个接受可选整数参数的模板。然而，当我尝试这样称呼它时，

```
<xsl:call-template name="some_template>
  <xsl:with-param name="some_param">
    <xsl:if test="some_condition">
      <xsl:value-of select="xs:integer(./@attr div 20)"/>
    </xsl:if>
  </xsl:with-param>
</xsl:call-template> 
```

我收到一条错误消息：-

> ```
> Validation error 
>   FORG0001: Cannot convert zero-length string to an integer 
> ```

但是，以下两个样式表不会给我一个错误：-

```
<xsl:call-template name="some_template>
  <xsl:with-param name="some_param">
    <xsl:value-of select="xs:integer(./@attr div 20)"/>
  </xsl:with-param>
</xsl:call-template> 
```

或者

```
<xsl:variable name="dummy" as="xs:integer?">
  <xsl:if test="some_condition">
    <xsl:value-of select="xs:integer(./@attr div 20)"/>
  </xsl:if>
</xsl:variable>
<xsl:call-template name="some_template>
  <xsl:with-param name="some_param" select="$dummy"/>
</xsl:call-template> 
```

很明显，类型信息没有在整个块中保留。知道如何让第一件事发挥作用吗？第三个样式表在语义上做了我想要的，但我宁愿不要为了能够做到这一点而四处创建（几个）虚拟变量。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:21:08.843

我认为当您`<xsl:if>`的错误意味着没有为您的参数分配值时会出现错误。您可以尝试以下解决方案之一：

### 默认值

您是否尝试为您的 设置默认值`<xsl:param>`？

```
<xsl:template name="some_template">
  <xsl:param name="some_param" select="-1" as="xs:integer?" />
</xsl:template> 
```

### 管理`false`案例

[使用XPath2.0 if-then-else 表达式](http://www.w3.org/TR/xpath20/#id-conditionals)调用模板时始终设置一个值：

```
<xsl:call-template name="some_template>
  <xsl:with-param name="some_param" select="
     if (some_condition) 
     then xs:integer(./@attr div 20)
     else -1"
  />
</xsl:call-template> 
```

我`-1`用作`false`案例的价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:12:34.893

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output method="text"/>

 <xsl:template match="/*">
    <xsl:call-template name="some_template">
      <xsl:with-param name="some_param" select=
       "if(some_condition)
          then xs:integer(@attr div 20)
          else ()
      "/>
    </xsl:call-template>
 </xsl:template>

 <xsl:template name="some_template">
  <xsl:param name="some_param" as="xs:integer?"/>
  XXX
</xsl:template>
</xsl:stylesheet> 
```

**当应用于以下每个 XML 文档时：**

```
<t attr="20">
 <some_condition/>
</t> 
```

,

```
<t>
 <some_condition/>
</t> 
```

,

```
<t attr="20">
</t> 
```

和

```
<t>
</t> 
```

**产生想要的、正确的结果（不引发任何异常）：**

```
 XXX 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:33:26.677

我并不完全清楚这里发生了什么，但很清楚的是如何改进你的代码，这样它就不会那么混乱了。使用编写的代码，在真实情况下，您正在计算双精度数，将其转换为整数，将整数转换为文本节点，将其包装在文档节点中，将文档节点作为参数传递，将其原子化为无类型在接收端是原子的，因为预期的类型是原子的，然后将无类型的原子值转换为整数。所有这些都应该起作用，但实际上是迂回的，并且很容易通过 xsl:with-param 上的 "as="xs:integer"" 避免。

In the false case, you are passing a document node with no children, and conversion of that to xs:integer? will fail - it won't convert to an empty sequence. So despite what you say, I think it's failing on the false path.

# c++ - C++ 字符串上的 < 和 > 是否反映字母顺序？

> ID：15212820
> 
> 赞同：7
> 
> 时间：2013-03-04T23:00:46.187
> 
> 标签：c++, string

我对 C++ 中字符串的字母顺序有疑问。假设我有两个字符串：

```
 string x="asd123";
    string y="asd136"; 
```

我们可以将这些字符串与 < 或 > 运算符进行比较吗？例如：我们可以说

```
 if(x>y)
    cout<<"....."; 
```

这总是有效吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T23:11:54.837

字符串按字典顺序（字典样式）进行比较，一个字符串是另一个字符串的较短子集，位于较长字符串之前。但这*不一定是按字母顺序排列的*；它是根据底层字符编码的。现在大多数系统都使用 ASCII，所以小写字母按顺序出现，大写字符按顺序出现，大写字符在小写字符之前出现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-04T23:01:38.190

是的，将`std::string`s 与[`std::string::operator>`](http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp)总是有效的比较。字符串[按字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)进行比较。这意味着依次比较两个字符串的每个对应元素，直到找到两个不相等的元素，并且该排序决定了字符串的顺序。

字典顺序`<`对`std::basic_string`. 也就是说，对于 a `std::string`，每个`char`都将使用 进行比较`<`。它只会比较那些`char`s 的值。就 C++ 而言，a`char`只是一个数值。*这些值通过执行字符集*映射到字符串文字中的字符（对于现代 C++ 编译器，它几乎总是至少与 ASCII 兼容）。

# android - ActionBar 外的 ICS 微调器，下拉菜单不工作

> ID：15212823
> 
> 赞同：0
> 
> 时间：2013-03-04T23:01:16.270
> 
> 标签：android, actionbarsherlock, spinner

我尝试使用 ActionBarSherlock 在 ActionBar 之外制作 IcsSpinner。我在[操作栏之外使用了下拉微调器中的信息？（冰淇淋三明治风格，带 ActionBarSherlock）](https://stackoverflow.com/questions/10323471/dropdown-spinner-outside-of-actionbar-icecream-sandwich-style-w-actionbarsher)。看起来不错，这就是我要找的。我的问题是我的微调器只显示第一个选项并且不可点击。下拉菜单不可访问，并且永远不会调用方法 getDropDownView。

HoloSpinner.java：

```
import android.content.Context;
import android.util.AttributeSet;

import com.actionbarsherlock.internal.widget.IcsSpinner;

public class HoloSpinner extends IcsSpinner {

  public HoloSpinner(Context context, AttributeSet attrs) {
    super(context, attrs, com.actionbarsherlock.R.attr.actionDropDownStyle);
  }

 public HoloSpinner(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
  }
} 
```

HoloSpinnerAdapter.java：

```
package pl.tmmk.organizer.studencki;

import android.content.Context;
import android.database.DataSetObserver;
import android.text.TextUtils.TruncateAt;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.SpinnerAdapter;
import android.widget.TextView;

public class HoloSpinnerAdapter<T> extends ArrayAdapter<T> implements SpinnerAdapter {
    private LayoutInflater layoutInflater;
    private T[] array;

public HoloSpinnerAdapter(Context context, int res, T[] objects){
    super(context, res, objects);
    layoutInflater = LayoutInflater.from(context);
    array = objects;
}

@Override
  public View getView(int position, View convertView, ViewGroup parent) {
    Log.d("HINT", "getView");
    final TextView filterName;
    if (convertView == null) {
      filterName = (TextView) layoutInflater.inflate(R.layout.sherlock_spinner_item, parent, false);
    } else {
      filterName = (TextView) convertView;
    }

    filterName.setText(getItem(position).toString());
    return filterName;
  }

  @Override
  public View getDropDownView(int position, View convertView, ViewGroup parent) {
      Log.d("HINT", "getDropDownView");
    final TextView filterName;
    if (convertView == null) {
      filterName = (TextView) layoutInflater.inflate(R.layout.sherlock_spinner_dropdown_item, parent, false);
      filterName.setEllipsize(TruncateAt.END);
    } else {
      filterName = (TextView) convertView;
    }

    filterName.setText(getItem(position).toString());
    return filterName;
  }

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return array.length;
}

@Override
public T getItem(int position) {
    // TODO Auto-generated method stub
    return array[position];
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public int getItemViewType(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public int getViewTypeCount() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean isEmpty() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void registerDataSetObserver(DataSetObserver observer) {
    // TODO Auto-generated method stub

}

@Override
public void unregisterDataSetObserver(DataSetObserver observer) {
    // TODO Auto-generated method stub

}
} 
```

xml文件的一部分：

```
<com.xxx.yyyy.zzzzz.HoloSpinner
android:layout_marginTop="4dp"
android:id="@+id/event_type_spinner"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:textAllCaps="true"
android:background="@drawable/abs__spinner_ab_holo_dark"
android:textColor="#000000"
android:gravity="center"/> 
```

微调器初始化：

```
String[] eventTypeArray = getResources().getStringArray(R.array.event_type_array);
HoloSpinnerAdapter<String> spinnerAdapter = new HoloSpinnerAdapter<String>(this, R.layout.sherlock_spinner_item, eventTypeArray);
HoloSpinner spinner = (HoloSpinner) findViewById(R.id.event_type_spinner);
spinner.setAdapter(spinnerAdapter); 
```

我的目标是让 ICS 看起来像微调器，即使在旧版 Android 手机上也是如此。我不知道我做错了什么。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T14:39:19.010

在清单中设置**样式**很重要，例如

```
<activity android:name="fr.example.demo.MyActivity" android:theme="@style/Theme.Sherlock"></activity> 
```

或者修改style.xml中的主题样式

```
<style name="AppTheme" parent="@style/Theme.Sherlock">
</style> 
```

# iphone - 如何在 IOS 上运行的 phonegap/cordova 应用程序中打开 iframe？

> ID：15212824
> 
> 赞同：13
> 
> 时间：2013-03-04T23:01:20.673
> 
> 标签：iphone, ios, cordova, iframe

我有一个与 PhoneGap/Cordova 一起使用的 webapp，用于安装在 iOS 和 Android 中。在应用程序的某一时刻，我有一个 iframe，它从第二台服务器加载内容。

当我从浏览器运行应用程序时，一切都按预期工作 - iframe 在同一页面中打开并从第二个站点加载内容。

当我使用 Cordova 在 iPhone 模拟器上运行 webapp 时，当 iframe 打开时，iOS 切换到 Safari 并将我的应用程序置于后台。

采取的步骤：

1.  我将第二个站点添加到 Cordova.plist 文件中的“ExternalHosts”数组中。
2.  根据 PhoneGap/Cordova 文档 ( [https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml) )，我在 /www 目录中的 index.html 文件旁边创建了一个 config.xml 文件。
3.  我在 config.xml 文件中添加了一个 <preference name="stay-in-webview" value="true" /> 标签作为主 <widget> 标签的子标签。

我的怀疑是它没有读取/使用 config.xml 文件，但可能还有其他东西......有没有人知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-13T16:25:52.773

在添加了一个 InAppBrowser 来代替我之前使用的 iframe 之后，我最终再次尝试了 iframe，并且 iframe 现在可以正常工作，而无需像以前那样跳转到手机的浏览器，并且 iframe 在 iOS 和 Android 中都能正常工作.

从 iframe 被破坏到它们开始工作时，有两件事发生了变化：

1.  我升级到 Cordova 2.5
2.  我开始使用 jquery 动态地创建/添加 iframe 到页面，而不是像我最初所做的那样仅仅*取消隐藏已经存在的 iframe：*

    $('<iframe src="whatever.com" height="100%" width="100%" frameborder="0"></iframe>').appendTo('body'); .

我没有费心检查修复 iframe 问题的是 #1 还是 #2（我猜它是 #1），但我想我会发布它可以让 iframe 与 PhoneGap/Cordova 应用程序一起使用，以防其他人遇到同样的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T23:27:53.933

为什么不使用 InAppBrowser？[http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html)。使用在 Android 和 iOS 中都可以使用的 iframe 会很棘手

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T18:38:24.940

现在与 iOS 8 相同的事情不起作用。我得到的 iFrame 在其他 div 上没有滚动和溢出。尝试了各种css样式，但没有解决方案。在 Android 应用上运行良好。这是使用最新的 Phonegap 版本。

# java - 如何使用java将当前日期和时间保存到数据库？

> ID：15212832
> 
> 赞同：0
> 
> 时间：2013-03-04T23:02:04.663
> 
> 标签：java, sql, jakarta-ee, datetime

我正在使用以下代码获取当前日期和时间，但输出不是我所期望的，我无法将其保存到数据库中。

输出 >> 当前：Tue Mar 05 09:58:26 EST 2013

预期产出>>当前：2013-03-05 9:58:26

```
 .....{  
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        SimpleDateFormat parseFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        Date date = new Date();
        try {
            System.out.println("current: " +parseFormat.parse(dateFormat.format(date)));
            return parseFormat.parse(dateFormat.format(date));
        } catch (ParseException ex) {
            Logger.getLogger(ConstructionModel.class.getName()).log(Level.SEVERE, null, ex);
        }
        return date;
     }
        ......

        ps.setDate(....) <<< failed 
```

数据库

```
 name   type
 mydate Date 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:09:07.703

您不需要在格式化之前解析：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

Date date = new Date();

String frmtdDate = dateFormat.format(date);

System.out.println("frmtdDate: " + frmtdDate); 
```

但是，如果您尝试将日期放入某些 DB 语句中，则不应以文本形式执行此操作，而应使用使用`java.sql.Date`或`java.sql.Timestamp`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T23:10:07.220

您需要使用 sql 时间戳来保存到数据库。将您的 java.util.Date 转换为[java.sql.Timestamp](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html)：

```
ps.setTimestamp(new java.sql.Timestamp(myDate.getTime())); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T23:12:45.507

`format` takes a `Date` and returns a formatted `String`. `parse` takes a formatted `String` and returns a `Date` object. When you do `parseFormat.parse(dateFormat.format(date))` you are converting `Date` to `String` and to `Date` again. The value that is printed is the default representation provided by `Date.toString()` instead of the formatted string.

```
 System.out.println("current: " +dateFormat.format(date)); 
```

# django - 在 javascript 文件中使用 Django url

> ID：15212837
> 
> 赞同：3
> 
> 时间：2013-03-04T23:02:40.047
> 
> 标签：django, django-templates, django-views, django-urls

我正在尝试`url-names`在我的 javascript/jquery 文件中使用 AJAX 请求，并且我找到了几种可以解决此问题的解决方案。我目前正在使用的是以下。

我定义了一个 url 来提供 javascript 文件：

网址.py

```
url(r'^js/([\w\.\-]+)/([\w\.\-]+)/$', 'views.get_javascript_file', name='get_javascript_file')
url(r'^getmoredicus/$', 'load_discussions', name="load-discus"), 
```

然后我定义呈现 javascript 文件的视图。

视图.py：

```
def get_javascript_file(request, app_name, js_file):
'''
    Used to request and serve rendered javascript/jquery files.
'''
return render_to_response("%s/%s.js" % (app_name, js_file), 
                          context_instance=RequestContext(request)) 
```

现在在 html 文件中，我们可以使用`get_javascript_file`url 来获取渲染的 javascript 文件。

.html 文件：

```
<script type="text/javascript" src="{% url get_javascript_file 'myapp' 'jsfile' %}"></script> 
```

现在在任何 javascript 文件中，我都可以`url-names`通过`{% url url-name %}`.

**问题：**

1) 是否有更好/更快的方式`url-names`在 javascript 文件中使用？我知道已经创建了一些应用程序来实现这一点，但我希望获得每个人（django 专家）对实现这一目标的最佳方式的意见。

2）我们可以在第一次渲染后缓存渲染的javascript文件，以便在每个后续请求中，我们不必再次渲染它们吗？如果是，那么我们该如何去做。

3）在这种方法中，我们从他们的应用程序文件夹中渲染脚本文件。`STATIC_ROOT`有没有办法从`get_javascript_file`视图中访问位于其中的静态文件？我只是在考虑这将如何在生产环境中工作。从他们的应用程序文件夹中访问静态文件而不是将它们放入`STATIC_URL`并从那里访问它们是一种好习惯吗？

**笔记**

我知道已经有一些关于 SO 的问题可以回答这个问题的某些部分，但我只是想一劳永逸地为未来的 django 学习者了解这一点。最好的使用方法`url-names`是`javascript`什么`script`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:31:29.683

我不喜欢通过视图渲染运行外部 js。特别是如果您使用 django-compressor 之类的东西来压缩和缓存 js 文件。

我更喜欢在包含外部文件之前将变量包含在脚本标记中。

```
<script>
    my_var = "{{ MY_PROPERTY }}"
</script>
<script type="text/javascript" src="{{ STATIC_URL }}js/external_script.js"></script> 
```

该解决方案也并不总是理想的，但我对其他解决方案持开放态度。

# python - 从python中的numpy矩阵计算这两个元素对的两个元素的单独频率

> ID：15212838
> 
> 赞同：1
> 
> 时间：2013-03-04T23:02:57.740
> 
> 标签：python, numpy, counter, itertools

使用这个 numpy 矩阵：

```
>>> print matrix
[['L' 'G' 'T' 'G' 'A' 'P' 'V' 'I']
 ['A' 'A' 'S' 'G' 'P' 'S' 'S' 'G']
 ['A' 'A' 'S' 'G' 'P' 'S' 'S' 'G']
 ['G' 'L' 'T' 'G' 'A' 'P' 'V' 'I']] 
```

我已经有了这段代码：

```
for i, j in itertools.combinations(range(len(matrix.T)), 2):
    c = matrix[:, [i,j]]
    counts = collections.Counter(map(tuple,c))
    print 'columns {} and {}'.format(i,j)
    for AB in counts:
      freq_AB = float(float(counts[AB])/len(c))
      print 'Frequency of {} = {}'.format(AB, freq_AB)
    print 
```

产生

```
columns 0 and 1
Frequency of ('A', 'A') = 0.5
Frequency of ('G', 'L') = 0.25
Frequency of ('L', 'G') = 0.25

columns 0 and 2
Frequency of ('A', 'S') = 0.5
Frequency of ('G', 'T') = 0.25
Frequency of ('L', 'T') = 0.25

[...] 
```

我想添加到代码中的是从列 i、j 的一对字母中检索每个字母在列 (i, j) 内的频率...我的意思是，输出类似于以下输出：

```
columns 0 and 1
Frequency of ('A', 'A') = 0.5
  Freq of 'A' in column 0 = 0.5
  Freq of 'A' in column 1 = 0.5
Frequency of ('G', 'L') = 0.25
  Freq of 'G' in column 0 = 0.25
  Freq of 'L' in column 1 = 0.25
Frequency of ('L', 'G') = 0.25
  Freq of 'L' in column 0 = 0.25
  Freq of 'G' in column 1 = 0.25

columns 0 and 2
Frequency of ('A', 'S') = 0.5
  Freq of 'A' in column 0 = 0.5
  Freq of 'S' in column 2 = 0.5
Frequency of ('G', 'T') = 0.25
  Freq of 'G' in column 0 = 0.25
  Freq of 'T' in column 2 = 0.5
Frequency of ('L', 'T') = 0.25
  Freq of 'L' in column 0 = 0.25
  Freq of 'T' in column 2 = 0.5

[...] 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:21:55.287

如何扩展相同的方法并这样做：

```
for i, j in itertools.combinations(range(len(matrix.T)), 2):
    c = matrix[:, [i,j]]
    combined_counts = collections.Counter(map(tuple,c))
    first_column_counts = collections.Counter(c[:,0])
    second_column_counts = collections.Counter(c[:,1])
    print 'columns {} and {}'.format(i,j)
    for AB in combined_counts:
      freq_AB = float(float(combined_counts[AB])/len(c))
      print 'Frequency of {} = {}'.format(AB, freq_AB)
      freq_A = float(first_column_counts[AB[0]])/len(c)
      print "  Freq of '{}' in column {} = {}".format(AB[0], i, freq_A)
      freq_B = float(second_column_counts[AB[1]])/len(c)
      print "  Freq of '{}' in column {} = {}".format(AB[1], i, freq_B)
    print 
```

# axapta - 有没有办法让客户端在连接到特定 AOS 时显示一条消息？

> ID：15212844
> 
> 赞同：0
> 
> 时间：2013-03-04T23:03:20.233
> 
> 标签：axapta

我们有一些旧的 AOS 实例，我们不想摆脱，但希望客户开始远离。我想做的是每当客户端连接到这些旧 AOS 实例之一时弹出一个框，上面写着“嘿，你应该改用这个。” 我知道可以让客户端在启动时显示消息，但是有没有办法让客户端仅在连接到特定 AOS 时才显示消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:07:05.047

您可以在“AX 配置实用程序”的**启动消息字段中配置***欢迎消息：*

 **[http://technet.microsoft.com/en-us/library/aa569644.aspx](http://technet.microsoft.com/en-us/library/aa569644.aspx)

您可以为用户拥有的每个 AOS 连接更改此消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:35:29.470

`Application.startupPost()`如果满足您的条件，您可以添加自定义代码以显示消息。您应该小心在此处添加的内容，因为它会在会话启动时执行，包括 Business Connector 会话和其他可能没有客户端可用于显示消息框的情况。**

# java - File.mkdirs() 创建目录而不是文件

> ID：15212845
> 
> 赞同：13
> 
> 时间：2013-03-04T23:03:28.647
> 
> 标签：java, io

我正在尝试序列化以下类：

```
public class Library extends ArrayList<Book> implements Serializable{

public Library(){
    check();
} 
```

使用该类的以下方法：

```
void save() throws IOException {
    String path = System.getProperty("user.home");
    File f = new File(path + "\\Documents\\CardCat\\library.ser");    

    ObjectOutputStream oos = new ObjectOutputStream (new FileOutputStream (f));  
    oos.writeObject(this);
    oos.close();
} 
```

但是，`library.ser`该程序不是创建一个名为 的文件，而是创建一个名为的目录`library.ser`，其中没有任何内容。为什么是这样？

如果它有帮助，save() 方法最初会从此方法（同一个类）中调用：

```
void checkFile() {
    String path = System.getProperty("user.home");
    File f = new File(path + "\\Documents\\CardCat\\library.ser");    

    try {    
         if (f.exists()){
             load(f);
         }
         else if (!f.exists()){
             f.mkdirs();
             save();
         }
    } catch (IOException | ClassNotFoundException ex) {
         Logger.getLogger(Library.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-04T23:08:10.593

> File.mkdirs() 创建目录而不是文件

这就是它应该做的。阅读 Javadoc。没有关于创建文件的内容。

> f.mkdirs();

正是这一行创建了目录。它应该是

```
f.getParentFile().mkdirs(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T23:08:28.983

我很确定调用`f.mkdirs()`是你的问题。如果该文件尚不存在（这似乎是您的情况），该`f.mkdirs()`调用将为您提供一个名为“library.ser”的目录而不是一个文件，这就是您的“save()”调用不起作用的原因 -您不能将对象序列化到目录。

# django - 在 Lubuntu 12.10 中找不到 django-admin.py

> ID：15212849
> 
> 赞同：2
> 
> 时间：2013-03-04T23:03:52.060
> 
> 标签：django, ubuntu

我刚刚在一台新笔记本电脑上安装了 Lubuntu 12.10，我正在尝试让 Django 工作。我从 Synaptic 包管理器安装了它，当我尝试在命令行上创建一个示例项目时，这就是我得到的：

```
amanda@amanda-ThinkPad-E420:~$ django-admin.py startproject caltrain
django-admin.py: command not found 
```

我验证了 Django 安装正确，

```
amanda@amanda-ThinkPad-E420:~$ python
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
>>> print(django.get_version())
1.4.1
>>> 
```

这是某种路径问题还是什么？我不记得在我的 Mac 上遇到过这个问题，但我还是不是很了解 Unix。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:09:02.403

此信息可能有点陈旧，但我发现此信息似乎与您的问题相似：[http ://ubuntuforums.org/showthread.php?t=1267372](http://ubuntuforums.org/showthread.php?t=1267372)

使用此解决方案：

> 在 python-django 包的 /usr/bin 目录中，“django-admin.py”的名称更改为“django-admin”。为了解决这个问题，我刚刚创建了一个名为 django-admin.py 的 django-admin 符号链接。ln -s /usr/bin/django-admin /usr/bin/django-admin.py （作为根）

希望这会有所帮助，但这又是在 2009 年写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T20:57:29.280

你应该看到这个。它包含有关 django-admin.py 位置问题的详细信息 [https://docs.djangoproject.com/en/1.6/faq/troubleshooting/#troubleshooting-django-admin-py](https://docs.djangoproject.com/en/1.6/faq/troubleshooting/#troubleshooting-django-admin-py)

# delphi - 开始在字符串网格的选定单元格中输入

> ID：15212854
> 
> 赞同：1
> 
> 时间：2013-03-04T23:04:22.690
> 
> 标签：delphi, tstringgrid

使用 Dephi XE，当用户单击按钮时，我希望能够在 StringGrid (SG) 中选择一个单元格（没问题），然后允许用户立即开始输入该单元格。

```
SG.Row := DesiredRow;
SG.Col := 1;
SG.SetFocus; 
```

这会将所需的单元格设置为蓝色，但用户必须单击一个单元格才能输入。我希望用户能够在单击按钮后立即开始输入，而无需使用鼠标。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T23:10:40.950

将`EditorMode`stringgrid 设置为 true：`SG.EditorMode := True;`应在`Options`属性中设置“goEditing”以使其正常工作。

或者，您可以在 grid`goAlwaysShowEditor`中设置。`goEditing``Options`

# silverlight - Windows Phone 中的网格和 ItemsControl.ItemContainerStyle

> ID：15212855
> 
> 赞同：3
> 
> 时间：2013-03-04T23:04:34.520
> 
> 标签：silverlight, windows-phone-7, mvvm, grid

我有一个严重的问题，我无法解决。以下代码在 WPF 中完美运行：

```
 <ItemsControl Grid.Row="1" ItemsSource="{Binding GameFields}" HorizontalAlignment="Stretch">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Rows="7" Columns="7" Margin="20" HorizontalAlignment="Center" VerticalAlignment="Center" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Button Command="{Binding SingleStepCommand}" CommandParameter="{Binding Index}" Visibility="{Binding Visible}" Background="Transparent" 
                        Margin="10" BorderBrush="Transparent" BorderThickness="0">
                    <Button.Content>
                        <Image Source="{Binding IconPath}" Stretch="Fill" />
                    </Button.Content>                            
                </Button>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.ItemContainerStyle>
            <Style>
                <Setter Property="Grid.Row" Value="{Binding X}" />
                <Setter Property="Grid.Column" Value="{Binding Y}" />
            </Style>
        </ItemsControl.ItemContainerStyle>            
    </ItemsControl> 
```

并尝试在 Windows Phone(7.1) 中实现。但是 itemspaneltemplate 网格的所有元素都在彼此上，我的意思是在相同的 X 和 Y 位置上。这是我尝试过的：

```
 <ItemsControl x:Name="ContentSource" Grid.Row="1" Margin="12,0,12,0" ItemsSource="{Binding GameFields}" >
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Grid.RenderTransform>
                        <TransformGroup>
                            <TranslateTransform X="{Binding X}" Y="{Binding Y}" />
                        </TransformGroup>
                    </Grid.RenderTransform>
                </Grid>
            </ItemsPanelTemplate>                
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Button Command="{Binding SingleStepCommand}" CommandParameter="{Binding Index}" Visibility="{Binding Visible}" Grid.Row="{Binding X}"
                        Grid.Column="{Binding Y}">
                    <Button.Content>
                        <Image Source="{Binding IconPath}" Stretch="Fill" />
                    </Button.Content>
                </Button>
            </DataTemplate>
        </ItemsControl.ItemTemplate>             
        <!--ItemsControl.Resources>
            <Style TargetType="ContentPresenter">
                <Setter Property="Grid.Row" Value="17" />
                <Setter Property="Grid.Column" Value="17" />
            </Style>
        </ItemsControl.Resources-->            
    </ItemsControl> 
```

3种不同的方式，它们都不起作用。（资源、TranslateTransform 和 Button grid.row 绑定）。你有什么建议我做错了什么或者我应该使用什么？我必须严格使用 MVVM，所以后面没有代码。任何建议都会对我的英语表示感谢和抱歉:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:05:16.617

您有正确的想法 - 您确实需要在 ContentPresenter 上设置 Grid.Row 和 Grid.Column 属性。最简单的方法是使用您自己的每个附加属性。

像这样的东西：

```
public class ItemsGridLayout
{
    public static int GetGridRow(DependencyObject obj)
    {
        return (int)obj.GetValue(GridRowProperty);
    }

    public static void SetGridRow(DependencyObject obj, int value)
    {
        obj.SetValue(GridRowProperty, value);
    }

    // Using a DependencyProperty as the backing store for GridRow.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty GridRowProperty =
        DependencyProperty.RegisterAttached("GridRow", typeof(int), typeof(FrameworkElement), new PropertyMetadata(0, (s, e) =>
        {
            var presenter = GetItemsPresenter(s);
            if (presenter != null)
            {
                Grid.SetRow(presenter, GetGridRow(s));
            }
        }));

    public static int GetGridColumn(DependencyObject obj)
    {
        return (int)obj.GetValue(GridColumnProperty);
    }

    public static void SetGridColumn(DependencyObject obj, int value)
    {
        obj.SetValue(GridColumnProperty, value);
    }

    // Using a DependencyProperty as the backing store for GridColumn.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty GridColumnProperty =
        DependencyProperty.RegisterAttached("GridColumn", typeof(int), typeof(FrameworkElement), new PropertyMetadata(0, (s, e) =>
        {
            var presenter = GetItemsPresenter(s);
            if (presenter != null)
            {
                Grid.SetColumn(presenter, GetGridColumn(s));
            }
        }));

    static FrameworkElement GetItemsPresenter(DependencyObject target)
    {
        while (target != null)
        {
            if (target is ContentPresenter)
            {
                return target as FrameworkElement;
            }
            target = VisualTreeHelper.GetParent(target);
        }
        return null;
    }
} 
```

然后在 XAML 中它是这样使用的：

```
<ItemsControl>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Button local:ItemsGridLayout.GridRow="{Binding X}" 
                    local:ItemsGridLayout.GridColumn="{Binding Y}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T12:38:37.800

我今天遇到了同样的问题。在WPF之后学习Silverlight，没想到*这*行不通。

在进行了几次搜索以避免这种变通方法后，我尝试为它添加一个`Style`资源，`ContentPresenter`它就像 Silverlight 5 中的魅力一样。

```
 <ItemsControl ItemsSource="{Binding Source={StaticResource CVM}, Path=PagedItems}">
        <ItemsControl.Resources>
            <Style TargetType="ContentPresenter">
                <Setter Property="Grid.Column" Value="{Binding OffsetX}"/>
                <Setter Property="Grid.Row" Value="{Binding OffsetY}"/>
            </Style>
        </ItemsControl.Resources>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        ...
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        ...
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                </Grid>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl> 
```

# c - valgrind 没有发现内存泄漏吗？

> ID：15212856
> 
> 赞同：1
> 
> 时间：2013-03-04T23:04:36.420
> 
> 标签：c, memory-leaks, valgrind

此代码创建一个 BST，填充它，并努力释放资源。release() 的两个版本如下所示：

```
typedef struct Node {
    int d;
    struct Node *left;
    struct Node *right;
} Node;

int main() {

    Node **tree = NULL;

    tree = mkTree();
    if (!tree) {
        puts("problem\n");
        return 1;
    }

    insert(7, tree);
    insert(3, tree);
    insert(9, tree);
    insert(6, tree);

    printTree(*tree);
    release(tree);
    free(tree);

    return 0;

}
/* Make a new binary tree */
    Node **mkTree() {

    Node **t = malloc(sizeof **t);
    return t;
}

/* insert datum d into tree */

bool insert(int d, Node **tree) {

    Node *newptr = NULL;

    if (tree == NULL) { /*ptr to rootptr NULL */
        return false;
    }

    if (*tree == NULL) {
        newptr = buildNode(d);
        if (!newptr) {
            return false;
        }
        *tree = newptr;
        return true;
    }

    return insert(d, d < (*tree)->d ? &(*tree)->left : &(*tree)->right);
} 
```

我不明白为什么 valgrind 声称在以下两种情况（I 和 II）中都释放了所有资源。我尝试使用 release() 清除每个节点，并且在 main 结束时，我调用 free(tree) 来清除在 main 中声明的 Node **tree。

一世。

```
/* release resources by passing Node **tree */

void release(Node **tree) {

    if (*tree) {
        Node *here = *tree;
        release(&here->left);
        release(&here->right);
    }
    free(*tree);

} 
```

二、

```
/* passing Node *tree. this shouldn't free anything, right? */

void release(Node *tree) {

    if (tree) {
        Node *here = tree;
        release(here->left);
        release(here->right);
    }
    free(tree);

} 
```

尽管有选择，运行这个程序有四个插入会给出

```
==5182== HEAP SUMMARY:
==5182==     in use at exit: 0 bytes in 0 blocks
==5182==   total heap usage: 5 allocs, 5 frees, 60 bytes allocated 
```

这里发生了什么事？valgrind 是否只是统计 malloc 和 free 的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:19:48.453

两个版本`Release`都在做同样的事情。一个只是有一个额外的（和不必要的）间接级别。您可以将指针传递给函数并释放该指针；不必传递保存指针的变量的地址。

事实上，对的调用`free`正是这样做的。它只接受指针值（不是持有指针的变量的地址）。

# ajax - 使用 AJAX 更新面板的正确方法是什么？

> ID：15212859
> 
> 赞同：1
> 
> 时间：2013-03-04T23:05:36.340
> 
> 标签：ajax, asp.net-mvc, jquery, asp.net-ajax

在 MVC4 应用程序中，我想使用 AJAX 更新面板，但使用 jQuery 方法而不是使用 MVC 中的 AjaxExtensions。

但我的问题是`updatePanelId`.

我见过几个人在成功时使用它来更新它：

```
success: function (response) {
    var $target = $("#target");
    var $newHtml = response;
    $target.replaceWith($newHtml);
} 
```

但是当我这样做时，它迫使我在每个部分视图中使用，包括`id="target"`我的剃刀视图的根级别，我想这不是一个好习惯；我这么说是因为我意识到当我使用 AjaxExtensions 时它不会发生，替换更新并且它不会删除`panelId`. 但是使用 jQuery 就可以了。

将 AjaxExtensions 功能移植到 jQuery 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:27:16.550

使用[jQuery 的`.load`函数](http://api.jquery.com/load/)。这会将您指定的 URL 的内容加载到目标元素中。您可以选择在加载的 URL 之后指定一个选择器，以仅抓取目标页面的一部分。

```
$(function() {
  $("#target").load("/MyURL");
}); 
```

[JavaScript 同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)适用于此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:59:37.897

您可以只使用：

```
$("#target").html(response); // it will just update content of the $("#target") container 
```

# php - 去除空格 PHP

> ID：15212864
> 
> 赞同：1
> 
> 时间：2013-03-04T23:05:51.013
> 
> 标签：php, regex, whitespace, removing-whitespace

我对 RegEx 和 PHP 有疑问，我有这个字符串：

```
Panorama - SPIEGEL ONLINE - Nachrichten                                                                                                                                                Schlagzeilen                        Hilfe                        RSS                        Newsletter                        Mobil                        Wetter                        TV-Programm                                                            Dienstag, 26\. Februar 2013                                    Panorama                                                                                                                                                                                                                                    NACHRICHTEN                                                                Home                                                                    Politik Deutschland                                                Ausland                                                &nbsp;                                                                                                                                                WirtschaftB 
```

我想去掉所有不需要的空格，所以除了一个之外的所有空格，这样单词仍然被一个空格分隔。
我写了这个正则表达式：

```
echo trim(preg_replace("/\s+/", " ", $lol)); 
```

我非常接近：

```
Panorama - SPIEGEL ONLINE - Nachrichten Schlagzeilen Hilfe RSS Newsletter Mobil Wetter TV-Programm Dienstag, 26\. Februar 2013 Panorama NACHRICHTEN Home Politik Deutschland Ausland   WirtschaftB 
```

我错过了什么？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:08:34.847

问题是`&nbsp;`. 这是浏览器中不可破坏的空间。用这个：

```
$string = "Panorama - SPIEGEL ONLINE - Nachrichten                                                                                                                                                Schlagzeilen                        Hilfe                        RSS                        Newsletter                        Mobil                        Wetter                        TV-Programm                                                            Dienstag, 26\. Februar 2013                                    Panorama                                                                                                                                                                                                                                    NACHRICHTEN                                                                Home                                                                    Politik Deutschland                                                Ausland                                                &nbsp;                                                                                                                                                WirtschaftB";
$string = str_replace("&nbsp;"," ",$string);

echo preg_replace('!\s+!', ' ', $string); 
```

演示：[http ://sandbox.onlinephpfunctions.com/code/8c85dcc5ba0c9aa9306125ad5878c02d07fcf452](http://sandbox.onlinephpfunctions.com/code/8c85dcc5ba0c9aa9306125ad5878c02d07fcf452)

# oracle - 如何在创建语句中禁用检查数据集成（引用不存在的表）

> ID：15212869
> 
> 赞同：2
> 
> 时间：2013-03-04T23:06:19.080
> 
> 标签：oracle, foreign-keys

假设我有一个空数据库，我想创建两个表。他们之间有关系。例如，R 中的一个属性（称为 b）是外键。定义应该（数据库为空，我还没有执行任何语句）看起来：

```
create table R(
a type primary key,
b type references S(b)
);  

create table S(
b type primary key
); 
```

如果我尝试使用上述语句运行脚本，我会收到错误 (根据 line: b type references S(b)) ，因为 S 不存在 - 这是正常和自然的。是否可以禁用检查现有表，对应外键？

我知道我可以更改语句的顺序。或者创建没有约束的表，稍后再添加。

为什么我要问。假设我们有很多表，它们之间有很多关系。当我们需要准备一种“备份脚本”时，手动订购表将消耗大量时间。

我知道可以禁用约束，如下所示：

```
alter table table_name disable constraint_name; 
```

但这适用于例如插入语句。是否有适合创建语句的解决方案？

# scala - 参数函数的 Scala 类型推断问题

> ID：15212876
> 
> 赞同：5
> 
> 时间：2013-03-04T23:06:50.567
> 
> 标签：scala, type-inference

这些天我一直在学习Scala，今天遇到了一些我无法理解的问题。

假设我们有以下参数函数定义：

```
def filter[T](source: List[T], predicate: T=>Boolean): List[T] = {
    source match {
        case Nil => Nil
        case x::xs => if(predicate(x)) x::filter(xs, predicate)
                  else filter(xs, predicate)
    }
} 
```

现在，如果我按如下方式调用它，它就可以正常工作：

```
filter(List(1,2,3,4,5,6), ( (n:Int) => n % 2 == 0)) 
```

但是如果去掉类型标签，Scala 似乎无法推断 T 的类型是 Int。

```
filter(List(1,2,3,4,5,6), ( n => n % 2 == 0)) 
```

所以，我不得不在这个调用中提供明确的类型信息。

有谁知道为什么 Scala 无法在此调用中推断 T 的类型。该列表显然是一个 Int 列表，我不明白为什么它不能推断 n 的类型也是 Int。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T23:20:50.357

Scala 的类型推断适用于每个参数*列表*`T`，而不是每个参数，因此在第二个示例中到达谓词时它还没有解决`Int`。但是，您可以通过使用两个参数列表来获得所需的内容：

```
def filter[T](source: List[T])(predicate: T => Boolean): List[T] =
  source match {
    case Nil => Nil
    case x :: xs =>
      if (predicate(x))
        x :: filter(xs)(predicate)
      else
        filter(xs)(predicate)
  } 
```

现在以下将正常工作：

```
scala> filter(List(1, 2, 3, 4, 5, 6))((n => n % 2 == 0))
res0: List[Int] = List(2, 4, 6) 
```

有关其他讨论，请[参见](https://stackoverflow.com/a/9119507/334519)我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:22:15.540

您需要将谓词放在另一组参数中才能使推理起作用：

```
def filter[T](source: List[T])(predicate: T=>Boolean): List[T] = {
    source match {
        case Nil => Nil
        case x::xs => if(predicate(x)) x::filter(xs)(predicate)
                   else filter(xs)(predicate)
    }
}

filter(List(1,2,3,4,5,6))(_ % 2 == 0) 
```

不幸的是，这是 scala 的限制。

# visual-studio-2010 - 当项目名称有连字符时，为什么 VS 2010 ATL 简单对象向导不会生成 .cpp/.h 文件？

> ID：15212880
> 
> 赞同：3
> 
> 时间：2013-03-04T23:07:11.740
> 
> 标签：visual-studio-2010, atl, wizard

对于 Visual Studio 项目命名，这既是一个问题，也是一个“提示”。

我在 VS 2010 中构建了一个 ATL/COM 项目，当我运行**Add --> Class --> ATL Simple Object**向导来创建类 Foo 时，只创建了 Foo.rgs 文件和预期的 Foo.cpp和 Foo.h 文件没有出现。

经过几次尝试使向导工作的变体（检查了不同的选项等等），我仍然没有成功。没有错误消息，除了输出中的“无源文件”之外，没有任何迹象表明发生了故障。

在试图找到“为什么会这样”的答案的过程中，我遇到了一个提示，即需要使用 ProjectName.ClassName 手动填写相关项目和类的 ProgID 字段。当我尝试输入项目名称 (Some-Project) 时，向导抱怨连字符在该字段中是“非法字符”。

Web 搜索和关于“为什么 ATL 向导不会生成文件”的变体搜索在这里也是空的。

因此，猜测 ProgID 字段中的“不允许使用破折号”可能会产生进一步的影响，我着手将项目名称、文件名、目录名称等中的所有破折号更改为下划线，看看会有什么影响。在整个项目中，“Some-Project”变成了“Some_Project”，而“Random-Module.*”变成了“Random_Module.*”。

将所有破折号/连字符都转换为下划线后，向导可以正确运行，并且所有预期的文件都神奇地出现了，其中包括所有必需的 COM/ATL 管道材料。

所以 。. .

1）知道为什么名称中带有破折号的项目是“合法的”，但破折号会破坏向导吗？

2) 不管是什么原因，我建议不要在 Visual Studio 项目名称中使用破折号/连字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T08:51:10.560

因为该向导使用包含项目名称的 c 和 c++ 预处理指令（宏）来生成新文件和代码，并在现有文件中生成代码，并且因为这些预处理指令无法正确理解其名称中的连字符。请参阅有关 c/c++ 宏的标准，但请记住例如您已经看到的所有宏：有很多下划线“_”来分隔名称，但没有连字符。

# git - 我怎样才能只应用一些 git stash？

> ID：15212882
> 
> 赞同：36
> 
> 时间：2013-03-04T23:07:20.327
> 
> 标签：git

我想将 git stash 中的一些更改应用于一个提交，并将其余更改应用于另一个。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2015-08-29T00:22:40.853

```
git checkout stash@{0} -- <filename> 
```

您也可以使用列表或文件名全局执行此操作。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-06-16T02:18:11.080

看起来您可以`git checkout -p`与存储参考一起使用，例如 `stash@{0}`. 这将让您从存储中逐个选择要应用于工作树的内容。

完成使用后`git checkout -p`，您接受的更改将应用​​于您的工作树并添加到缓存/索引中，准备提交。您可以`git checkout -p stash@{0}`多次使用，选择您想要的补丁并在此过程中多次提交。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-20T15:49:41.467

仅对要更改的文件应用补丁。

```
git show --first-parent stash@{0} -- <file(s) in question> | git apply 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-04T23:09:21.187

解开隐藏...

```
git stash pop 
```

...`git add`在补丁模式下使用...

```
git add -p 
```

...然后提交...

```
git commit -m "Partial stashed commit" 
```

在没有阅读文档的情况下，这就是我很快想到的。[狮子座的答案](https://stackoverflow.com/a/32281463/31671)有更好的方法来实现这一点。

# javascript - 带有本地 URL 的 Google 地图 MarkerImage 不会在 Safari 移动 iOS 6 中显示

> ID：15212883
> 
> 赞同：0
> 
> 时间：2013-03-04T23:07:25.530
> 
> 标签：javascript, html, google-maps, google-maps-api-3, mobile-safari

我的网页中嵌入了谷歌地图，我想使用自定义图像创建标记。这是添加标记的代码。'map' 是代表 Google 地图对象的变量。

```
function addMarker(location) {
    var image = new google.maps.MarkerImage("tree.gif", null, null, null, new google.maps.Size(16, 24));
    marker = new google.maps.Marker({
        position: location,
        map: map,
        icon: image
    });
}; 
```

这在 IE 8、Chrome 25、Firefox 19 和 Safari 5（桌面）中运行良好 - 创建了标记并显示了 tree.gif 图像。但是，这在 iOS 6（iPad 和 iPhone）上的 Safari 移动版中不起作用。

如果满足以下条件，这确实适用于 Safari 移动设备：

1.  ...我删除了自定义图标 - 出现默认的 Google 地图标记图标（红色图钉）

2.  ...我使用其他图像文件的远程 URL（例如/ [http://somedomain.com/images/someimage.gif](http://somedomain.com/images/someimage.gif)）

我一直在 SOF 和 Google 小组工作，但都没有运气。有任何想法吗？

2013 年 3 月 12 日添加：[此站点](http://bsatreerecycle.herokuapp.com)已上线并显示此行为（最后检查）。从“标记”页面开始在您的 GPS 位置张贴标记，然后检查“地图”页面以查看您的标记是否显示。源代码在[GitHub 上](https://github.com/mattskone/bsatreerecycle)- 问题在 scripts/map.js 文件中。

2013 年 3 月 15 日添加：缩小范围。我的页面还使用 HTML5 服务器发送的事件。上述行为仅在 EventSource 连接打开时发生。但是，如果我注释掉这一行，标记会按预期显示（链接到上一段中的代码）：

```
var source = new EventSource('../pickups'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:44:15.120

这不是解决方案，但我知道为什么会这样。如[本文](http://techcrunch.com/2012/09/21/ajax-web-apps-in-ios-6-are-sort-of-broken/)所述，除其他地方外，iOS 6 中的 Safari 似乎每次只允许每个主机一个 http 连接。

一旦我按照上面的代码创建了一个新的 EventSource，Safari 就会只打开那个新的连接（到“/pickups”）并忽略原始连接（到“/map”）。在此之后，将不会获取原始连接上的任何其他资源，包括我的树 GIF。这就解释了为什么默认的 Google 地图标记（从 google.com 获取）和来自其他主机的图像可以正常工作。

在找到更好的解决方案之前，我将对 Safari iOS 6 客户端使用轮询而不是 EventSource。

# r - 使用 r 为箱线图中的不同组数据着色

> ID：15212884
> 
> 赞同：3
> 
> 时间：2013-03-04T23:07:32.177
> 
> 标签：r

[如何放置 x 轴值](https://stackoverflow.com/questions/15060036/how-to-put-x-axis-values)

链接中的箱线图，我想显示不同的背景颜色，例如：2002-2004 - 在一组中，2005-2007 在另一组中，而从 2008-2011 在另一组中。所有组都可以显示在不同的背景颜色上，并在图表底部显示图例或注释的描述。

如何以不同的颜色显示这些组箱线图（每个组箱线图应该是相同的颜色）？

提前谢谢了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T23:15:56.963

```
 df <- read.table(textConnection('2002    2003    2004    2005    2006    2007    2008    2009    2010    2011
 0.8392  0.8337  0.8145  0.8306  0.8545  0.7876  0.8491  0.8568  0.8459  0.8778
 0.8251  0.7509  0.7301  0.7829  0.8103  0.7368  0.7122  0.685   0.7623  0.8159
 0.8584  0.8217  0.8105  0.8295  0.8382  0.769   0.8265  0.8287  0.8344  0.8204
 0.8651  0.8211  0.8346  0.8624  0.8629  0.7926  0.8543  0.8648  0.8456  0.8656
 0.7991  0.7653  0.7512  0.8106  0.8354  0.7013  0.752   0.8256  0.8235  0.7579
 0.8572  0.8186  0.8009  0.6988  0.719   0.7645  0.8142  0.8164  0.7529  0.7214
 0.8483  0.8159  0.833   0.8401  0.8426  0.7777  0.8608  0.8243  0.8426  0.8602'), header=TRUE)

#New code for coloring
colors = c(rep("red",3),rep("blue",3),rep("green",4))
boxplot(df, names=2002:2011,col=colors) 
```

![在此处输入图像描述](../Images/3545ef9b55a1f1d013e3e2195876483f.png)

# javascript - jQuery Datepicker 到期日期

> ID：15212889
> 
> 赞同：0
> 
> 时间：2013-03-04T23:08:07.550
> 
> 标签：javascript, jquery, validation, datepicker

我正在使用 jQuery UI 的 Datepicker 插件。当用户登录时，一旦到期日期过期，我需要显示一条错误消息。我尝试在下面添加 if 语句，但它不起作用。有任何想法吗？

```
 $("#expDate").datepicker({
        changeMonth: true,
        changeYear: true,
        minDate: 0
    });

   if (Date.parse(expDate) < jQuery.now()) {
      $("#expDate").addClass("error");// . for class  expDate
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:18:22.637

也许您忘记将 jquery 选择器添加到 expDate？

尝试使用：

```
if (Date.parse($('#expDate')) < jQuery.now()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-29T03:58:14.857

使用 jQuery 的过期日期验证

宝石文件：

```
gem 'bootstrap-datepicker-rails' 
```

应用程序.js

```
//= require datapicker/bootstrap-datepicker.js 
```

应用程序.css.scss

```
*= require datapicker/datepicker3.css 
```

应用程序.js：

```
 $(document).ready(function(){

      $('.datepicker').datepicker({
        format: "yy-mm-dd",
        startDate: new Date('2019-1-1'), 
        endDate: new Date('2025-12-31')
      });
    };

}); 
```

# c# - 如何同步树视图和列表视图的行高

> ID：15212892
> 
> 赞同：-1
> 
> 时间：2013-03-04T23:08:21.140
> 
> 标签：c#, .net, winforms

我有一个不寻常的需要并排显示树视图和列视图，以便我可以直观地显示层次结构，同时还以列格式显示每个项目的详细信息。为此，我在左侧有一个 TreeView，在右侧有一个 ListView，中间有一个拆分器。

我的问题是，无论我为树视图的 ItemHeight 属性设置什么值，它都不会与 ListView 对齐。17px 有点太小，18px 有点太大。有没有人这样做过？

**16px 行高:**
![在此处输入图像描述](../Images/31cf00d5df0e8d12da4750902186e0fb.png) :

**17px 行高:**
![在此处输入图像描述](../Images/e16884eb679dd6f15aaf3b4a913ae837.png) :

**18px 行高:**
![在此处输入图像描述](../Images/ab3cf087726c39f8d481c6e7c34bf97f.png) :

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:22:53.790

刚刚验证 - 当您设置完全相同的字体和相同的 ItemHeight（您可以将其设置为 TreeView）时，TreeView 和 ListView 的行将被“同步”。

这是字体的示例屏幕截图`San Serif, 9.75pt`，`ItemHeight`等于 16：

![在此处输入图像描述](../Images/9fdb346a54e29565a215d9d019c40ebb.png)

[还可以考虑使用DevExpress TreeList 之](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraTreeListTreeListtopic)类的控件。这将为您节省一些时间。

* * *

这是另一个 scrrenshot，它显示了`Microsoft San Serif, 8.28pt`等于`ItemHeight`13 的控件：

![在此处输入图像描述](../Images/cd899f3683877ad626394c9a1168ceb6.png)

# javascript - 如何使用 JavaScript 从 Word 文档中提取图像？

> ID：15212895
> 
> 赞同：0
> 
> 时间：2013-03-04T23:08:31.567
> 
> 标签：javascript, activexobject

我正在尝试使用 JavaScript 中的 ActiveXObject（仅限 IE）从 Word 文档中提取图像。

我无法找到 Word 对象的任何 API 参考，只有来自 Internet 的一些提示：

```
var filename = 'path/to/word/doc.docx'
var word = new ActiveXObject('Word.Application')
var doc = w.Documents.Open(filename)
// Displays the text
var docText = doc.Content 
```

我将如何使用类似的东西访问 Word 文档中的图像`doc.Content`？

此外，如果有人有 API 的明确来源（最好来自 Microsoft），那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:57:39.777

`SaveAs`因此，经过几周的研究，我发现使用Word ActiveXObject 的一部分功能最容易提取图像。如果文件保存为 HTML 文档，Word 将创建一个包含图像的文件夹。

从那里，您可以使用 XMLHttp 获取 HTML 文件并创建可由浏览器查看的新 IMG 标记（我使用的是 IE (9)，因为*ActiveXObject 仅适用于 Internet Explorer*）。

让我们从`SaveAs`部分开始：

```
// Define the path to the file
var filepath = 'path/to/the/word/doc.docx'
// Make a new ActiveXWord application
var word = new ActiveXObject('Word.Application')
// Open the document
var doc = word.Documents.Open(filepath)
// Save the DOCX as an HTML file (the 8 specifies you want to save it as an HTML document)
doc.SaveAs(filepath + '.htm', 8) 
```

现在我们应该在同一目录中有一个文件夹，其中包含图像文件。

**注意：**在 Word HTML 中，图像使用`<v:imagedata>`存储在标签中的`<v:shape>`标签；例如：

```
<v:shape style="width: 241.5pt; height: 71.25pt;">
     <v:imagedata src="path/to/the/word/doc.docx_files/image001.png">
         ...
     </v:imagedata>
</v:shape> 
```

*我已经删除了 Word 保存的无关属性和标签。*

要使用 JavaScript 访问 HTML，请使用 XMLHttpRequest 对象。

```
 var xmlhttp = new XMLHttpRequest()
 var html_text = "" 
```

因为我正在访问数百个 Word 文档，所以我发现最好在发送调用**之前**`onreadystatechange`定义 XMLHttp 的回调。

 **```
// Define the onreadystatechange callback function
xmlhttp.onreadystatechange = function() {
    // Check to make sure the response has fully loaded
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        // Grab the response text
        var html_text=xmlhttp.responseText
        // Load the HTML into the innerHTML of a DIV to add the HTML to the DOM
        document.getElementById('doc_html').innerHTML=html_text.replace("<html>", "").replace("</html>","")
        // Define a new array of all HTML elements with the "v:imagedata" tag
        var images =document.getElementById('doc_html').getElementsByTagName("v:imagedata")
        // Loop through each image
        for(j=0;j<images.length;j++) {
            // Grab the source attribute to get the image name
            var src = images[j].getAttribute('src')
            // Check to make sure the image has a 'src' attribute
            if(src!=undefined) {
                ... 
```

我在加载正确`src`属性时遇到了很多问题，因为 IE 在将它们加载到 innerHTML div 时会转义它的 HTML 属性，`doc_html`因此在下面的示例中，我使用伪路径并`src.split('/')[1]`获取图像名称（此方法不会如果有超过 1 个正斜杠，则不起作用！）：

```
 ...
                images[j].setAttribute('src', '/path/to/the/folder/containing/the/images/'+src.split('/')[1])
                ... 
```

在这里，我们使用父级（对象）的父级（恰好是一个对象）`img`向 HTML div 添加一个新标签。我们通过从图像中获取属性和从元素中获取信息来将新标签附加到 innerHTML ：`v:shape``p``img``src``style``v:shape`

```
 ...
                images[j].parentElement.parentElement.innerHTML+="<img src='"+images[j].getAttribute('src')+"' style='"+images[j].parentElement.getAttribute('style')+"'>"

            }
        }       
    }
}
// Read the HTML Document using XMLHttpRequest
xmlhttp.open("POST", filepath + '.htm', false)
xmlhttp.send() 
```

虽然有点具体，但上述方法能够成功地将 img 标签添加到 HTML 中它们在原始文档中的位置。**

# ruby-on-rails - Windows 和 SQLite3 到 Ubuntu 和 PostgreSQL 的迁移问题

> ID：15212899
> 
> 赞同：0
> 
> 时间：2013-03-04T23:08:51.883
> 
> 标签：ruby-on-rails, ruby, postgresql, ubuntu

我在 Windows 中有我的开发环境，有人建议我将它从 Windows 转移到 Ubuntu，并将数据库从库存 SQLite3 更改为 PostgreSQL。原因是实现搜索会更容易。

我试图在 Windows 中将其设为 PostgreSQL，但一直遇到一个错误。现在我已经在 Ubuntu 中启动并运行它，我收到了相同的错误消息。

20130218175105_devise_create_users.rb：

```
class DeviseCreateUsers < ActiveRecord::Migration
 def change
    create_table(:users) do |t|
      ## Database authenticatable
      t.string :email,              :null => false, :default => ""
      t.string :encrypted_password, :null => false, :default => ""

  ## Recoverable
  t.string   :reset_password_token
  t.datetime :reset_password_sent_at

  ## Rememberable
  t.datetime :remember_created_at

  ## Trackable
  t.integer  :sign_in_count, :default => 0
  t.datetime :current_sign_in_at
  t.datetime :last_sign_in_at
  t.string   :current_sign_in_ip
  t.string   :last_sign_in_ip

  ## Confirmable
  # t.string   :confirmation_token
  # t.datetime :confirmed_at
  # t.datetime :confirmation_sent_at
  # t.string   :unconfirmed_email # Only if using reconfirmable

  ## Lockable
  # t.integer  :failed_attempts, :default => 0 # Only if lock strategy is :failed_attempts
  # t.string   :unlock_token # Only if unlock strategy is :email or :both
  # t.datetime :locked_at

  ## Token authenticatable
  # t.string :authentication_token

  t.timestamps
end

add_index :users, :email,                :unique => true
  add_index :users, :reset_password_token, :unique => true
    # add_index :users, :confirmation_token,   :unique => true
    # add_index :users, :unlock_token,         :unique => true
    # add_index :users, :authentication_token, :unique => true
  end
end 
```

20130224193041_add_username_to_users.rb：

```
class AddUsernameToUser < ActiveRecord::Migration
  def change
    add_column :users, :username, :string
  end
end 
```

20130225171914_add_title_to_items.rb：

```
class AddTitleToItems < ActiveRecord::Migration
  def change
    add_column :items, :title, :string

  end
end 
```

20130303014952_add_city_state_to_users.rb：

```
class AddCityStateToUsers < ActiveRecord::Migration
  def change
    add_column :users, :city, :string

    add_column :users, :state, :string

  end
end 
```

数据库.yml：

```
development:
adapter: postgresql
encoding: unicode
database: scratch_development
pool: 5
timeout: 5000
username: postgres
password: harley
host: localhost 
```

错误：

```
mike@ubuntu:~/Sites/scratch$ rake db:migrate
==  DeviseCreateUsers: migrating ==============================================
-- create_table(:users)
NOTICE:  CREATE TABLE will create implicit sequence "users_id_seq" for serial column "users.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "users_pkey" for table "users"
   -> 0.0452s
-- add_index(:users, :email, {:unique=>true})
   -> 0.0151s
-- add_index(:users, :reset_password_token, {:unique=>true})
   -> 0.0309s
==  DeviseCreateUsers: migrated (0.0921s) =====================================

rake aborted!
An error has occurred, this and all later migrations canceled:

uninitialized constant AddUsernameToUsers
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.1/lib/active_support/inflector/methods.rb:229:in `block in constantize'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.1/lib/active_support/inflector/methods.rb:228:in `each'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.1/lib/active_support/inflector/methods.rb:228:in `constantize'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.1/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:522:in `load_migration'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:517:in `migration'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:512:in `migrate'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:704:in `block (2 levels) in migrate'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:759:in `call'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:759:in `block in ddl_transaction'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/database_statements.rb:190:in `transaction'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/transactions.rb:208:in `transaction'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:759:in `ddl_transaction'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:703:in `block in migrate'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:684:in `each'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:684:in `migrate'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:554:in `up'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/migration.rb:535:in `migrate'
/home/mike/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.1/lib/active_record/railties/databases.rake:153:in `block (2 levels) in <top (required)>'
/home/mike/.rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `eval'
/home/mike/.rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

我 99% 确定我的 gemfile 没问题，这就是我没有发布它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:33:19.743

我需要

```
rake db:schema:load 
```

我是个白痴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:35:20.870

我看到了错误：

```
uninitialized constant AddUsernameToUsers 
```

并通过您的代码搜索我只看到一个名为`AddUsernameToUser`. 所以，这是一个开始的地方。

# html - 并排 Div 没有对齐

> ID：15212900
> 
> 赞同：0
> 
> 时间：2013-03-04T23:08:54.127
> 
> 标签：html, css, positioning

我整天都在寻找解决方案。可能有一个，但我不明白对 CSS 和 DIV 的解释。

链接或帮助将不胜感激。我试图将 DIV 并排放置在包装器中，但我不知道为什么它们不对齐。

谢谢您的帮助。~多纳文

左标题 = 75% 和右标题 = 25%，因此应该等于 100% 的包装器，即 95%。但是正确的标题正在包装。

和

Left、Middle 和 Right portlet 部分应在同一行对齐。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <title>test-columns</title>

    <style type="text/css">
    #buttons {
       border:             1px solid;
       text-align:         center;
       width:              95%;
       margin:             0 auto;
    }

    #container_heading {
       border:             1px solid;
       width:              95%;
       text-align:         center;
       margin:             0 auto;
    }

    #left_heading {
      border:             1px solid;
      float:              left;
      width:              75%;
      text-align:         center;
      margin:             0; 
      padding:            0;
    }

    #right_heading {
      border:             1px solid;
      float:              right;
      width:              25%;  
      text-align:         center;
      margin:             0; 
      padding:            0;
    }

    #controls {
      clear:              both;
      border:             1px solid;
      text-align:         center;
      width:              95%;
      margin:             0 auto;
    }

    #sections {
      border:             1px solid;
      margin:             0px auto;
      width:              95%;
    }

    #left_portlets {
      border:             1px solid;
      text-align:         center;
      float:              left;
      width:              33%;
      margin:             0 auto;
    }

    #middle_portlets {
      border:             1px solid;
      text-align:         center;
      width:              33%;
      margin:             0 auto;
    }

    #right_portlets {
      border:             1px solid;
      text-align:         center;
      float:              right;
      width:              33%;
      margin:             0 auto;
    }

</style>

</head>

<body style="margin: 0" >

  <div id="buttons"> 
    Buttons
  </div>

  <br /><br />

  <div id="container_heading">   
    <div id="left_heading"> 
      Left Heading
    </div>

    <div id="right_heading"> 
      Right Heading
    </div>
  </div>  

  <br /><br />

  <div id="controls"> 
    Controls
  </div>

  <br /><br />

  <div id="sections">
    <div id="left_portlets">
      <div id="1-1_portlet">
        1-1 Portlet
      </div>

      <div id="1-2_portlet">
        1-2 Portlet
      </div>

      <div id="1-3_portlet">
        1-3 Portlet
      </div>
    </div>

    <div id="middle_portlets">
      <div id="2-1_portlet">
        2-1 Portlet
      </div>

      <div id="2-2_portlet">
        2-2 Portlet
      </div>

      <div id="2-3_portlet">
        2-3 Portlet
      </div>    
    </div>

    <div id="right_portlets">
      <div id="3-1_portlet">
        3-1 Portlet
      </div>

      <div id="3-2_portlet">
        3-2 Portlet
      </div>

      <div id="3-3_portlet">
        3-3 Portlet
      </div>
    </div>
  </div>

</body>
</html> 
```

+-------------------------------------------------- --------------------------------+

编辑：
哇。这帮助很大...

我从宽度中去掉了一个百分点来补偿边框并添加了“display:inline-block;” 到彼此相邻排列的 div 和“box-sizing:border-box;” 到整个样式表。

事情现在排成一排。但是现在我如何平衡外部边缘，所以一切都是方形的？每次我做一点改变，布局就会中断。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<title>test-columns</title>

<style type="text/css">
/* apply a natural box layout model to all elements */
* { -moz-box-sizing:    border-box; 
    -webkit-box-sizing: border-box; 
    box-sizing:         border-box; }

#buttons {
  border:             1px solid;
  text-align:         center;
  width:              95%;
  margin:             0 auto;
}

#container_heading {
  border:             0px;
  width:              95%;
  text-align:         center;
  margin:             0 auto;
}

#left_heading {
  border:             1px solid;
  width:              74%;
  text-align:         center;
  margin:             0; 
  padding:            0;
  display:            inline-block;
}

#right_heading {
  border:             1px solid;
  width:              24%;  
  text-align:         center;
  margin:             0; 
  padding:            0;
  display:            inline-block;
}

#controls {
  clear:              both;
  border:             1px solid;
  text-align:         center;
  width:              95%;
  margin:             0 auto;

}

#sections {
  border:             0px;
  margin:             0px auto;
  width:              95%;
  text-align:         center;
}

#left_portlets {
  border:             1px solid;
  text-align:         center;
  width:              31%;
  margin:             0 auto;
  display:            inline-block;
}

#middle_portlets {
  border:             1px solid;
  text-align:         center;
  width:              31%;
  margin:             0 auto;
  display:            inline-block;
}

#right_portlets {
  border:             1px solid;
  text-align:         center;
  width:              31%;
  margin:             0 auto;
  display:            inline-block;
}

</style>

<script type="text/javascript" language="javascript">
</script>

</head>

<body style="margin: 0" >

  <div id="buttons"> 
    Buttons
  </div>

  <div id="container_heading">   
    <div id="left_heading"> 
      Left Heading
    </div>

    <div id="right_heading"> 
      Right Heading
    </div>
  </div>  

  <div id="controls"> 
    Controls
  </div>

  <div id="sections">
    <div id="left_portlets">
      <div id="1-1_portlet">
        1-1 Portlet
      </div>

      <div id="1-2_portlet">
        1-2 Portlet
      </div>

      <div id="1-3_portlet">
        1-3 Portlet
      </div>
    </div>

    <div id="middle_portlets">
      <div id="2-1_portlet">
        2-1 Portlet
      </div>

      <div id="2-2_portlet">
        2-2 Portlet
      </div>

      <div id="2-3_portlet">
        2-3 Portlet
      </div>    
    </div>

    <div id="right_portlets">
      <div id="3-1_portlet">
        3-1 Portlet
      </div>

      <div id="3-2_portlet">
        3-2 Portlet
      </div>

      <div id="3-3_portlet">
        3-3 Portlet
      </div>
    </div>
  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:11:40.667

这是导致问题的边框，因为它增加了框的大小（75% + 2px，每边 1px）。你可以包括这个：

```
#left_heading,#right_heading,[anything else %-width and has borders] {
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
} 
```

这将通过使框符合包括边框在内的禁止宽度来纠正它，但请注意它仅适用于 IE8+（显然是符合标准的）。IE7-你需要包括[一些疯狂的垫片](https://github.com/Schepp/box-sizing-polyfill)。[这是一个适用于所有内容](http://paulirish.com/2012/box-sizing-border-box-ftw/)的好策略，因为它可以为块项目上的 CSS 省去很多麻烦。

您可能要考虑的其他事情是使用`display:inline-block;`而不是浮动。这属于相同的范围`box-sizing:border-box;`（仅适用于 IE8+，但是有一个 IE7- 后备的`zoom:1; *display:inline;`工作方式相同），但是它在未来创建了更多的可定制性选项。如果你添加了一个新的标题怎么办？现在你需要改变你的宽度和你的浮动......但如果一切都是内联块，你可以改变宽度并且你是金色的。然后，您还可以在一个类声明中分配显示，而不是为项目的不同位置分配不同的浮动。

只是思考的食物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:11:42.183

移除边框（将其推到 100% 以上）并浮动中间的方块。

一旦你这样做，它们就会全部到位......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:14:17.493

问题是您将边框样式与宽度结合使用，因为边框围绕元素的外部延伸。由于一行中元素的组合宽度加起来为 100%，因此应用边框会强制它进行调整，以便所有元素都适合页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T01:12:55.487

要解决您的问题，您应该删除`border`因为边框也会影响您的宽度，`1px`它在两个盒子中`right and left`变得`2px`等同`4px`于导致盒子不对齐的原因，因为您已经有 100% 的宽度并且没有 4px 的空间。

要使两个 div 对齐，您应该消除`border`或调整您的`width`

```
 #left_heading {
          float:              left;
          width:              75%;
          text-align:         center;
          margin:             0; 
          padding:            0;
        }

    #right_heading {
      float:              right;
      width:              25%;  
      text-align:         center;
      margin:             0; 
      padding:            0;
    } 
```

# python - Django 删除时区

> ID：15212905
> 
> 赞同：1
> 
> 时间：2013-03-04T23:09:28.333
> 
> 标签：python, django

我正在使用支持时区的日期时间字段对 postgres 中的表进行查询。我正在做一个独特的选择，以在一天中按小时对所有结果进行分组。

```
footage = IpCameraFootage.objects.filter(ipCamera=c, start__gte=start, end__lte=end).extra(select={'hours': "to_char(start,'dd/mm/yyyy hh24')"}).values_list('hours', flat=True).distinct().order_by('hours') 
```

然而，当我迭代结果时，这一切都很好。它正在应用时区转换。我正在尝试从没有时区的数据库中获取直接值。例如，如果它返回一个值：

```
05/03/2013 07 
```

当我使用以下命令在 django 视图中访问 hours 变量时：

```
for f in footage:
   print f 
```

值为：

```
04/03/2013 21 
```

任何想法如何获得应有的结果？

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:18:39.497

您在额外语句中执行的格式化函数是否可以被返回的查询集上的纯 python 命令替换？

就像是

```
from django.utils.timezone import utc

for f in footage:
    print('{0:%d/%m/%Y %H}':format(f.start.replace(tzinfo=utc))) 
```

否则，在模板中，根据[django 文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#template-tags)，您可以使用

```
{% load tz %}

{% localtime off %}
    {{ value }}
{% endlocaltime %} 
```

# ios - 通用寄存器的内容包含什么？

> ID：15212911
> 
> 赞同：5
> 
> 时间：2013-03-04T23:09:48.250
> 
> 标签：ios, objective-c, macos, cpu-registers

我包含了 iOS 标签，但我在 Core i7 MacBook Pro（x86-64，对吗？）上的模拟器中运行，所以我认为这无关紧要。

我目前正在调试 Flurry 的视频广告中的崩溃。我在 Objective-C 异常上设置了一个断点。当断点被击中时，我在`objc_msgSend`. 调用堆栈包含私有 Flurry 和 iOS 方法的混合，没有公开的，也没有我写过的。`register read`从 堆栈帧调用`objc_msgSend`输出以下内容：

```
(lldb) register read
General Purpose Registers:
       eax = 0x1ac082d0
       ebx = 0x009600b5  "spaceWillDismiss:interstitial:"
       ecx = 0x03e2cddb  "makeKeyAndVisible"
       edx = 0x0000003f
       edi = 0x0097c6f3  "removeWindow"
       esi = 0x00781e65  App`-[FlurryAdViewController removeWindow] + 12
       ebp = 0xbfffd608
       esp = 0xbfffd5e8
        ss = 0x00000023
    eflags = 0x00010202  App`-[FeedTableCell setupVisibleCommentAndLike] + 1778 at FeedTableCell.m:424
       eip = 0x049bd09b  libobjc.A.dylib`objc_msgSend + 15
        cs = 0x0000001b
        ds = 0x00000023
        es = 0x00000023
        fs = 0x00000000
        gs = 0x0000000f 
```

我有几个关于这个输出的问题。

*   我假设 $ebx 包含导致崩溃的选择器，而 $edi 是最后一个执行方法。是这样吗？
*   $eip 是我崩溃的地方。通常是这样吗？
*   $eflags 引用了一个实例方法，据我所知，该方法与这次崩溃无关。那是什么？
*   我可以从这些寄存器中撬出任何其他信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-06T14:26:58.787

我不能专门谈论 iOS/Objective-C 框架布局，所以我无法回答您关于 EBX 和 EDI 的问题。但我可以帮助您了解 EIP 和 EFLAGS，并为您提供一些有关 ESP/EBP 和选择器寄存器的一般提示。（顺便说一下，模拟器正在模拟 32 位 x86 环境；您可以知道，因为您的寄存器是 32 位长的。）

EIP是[*指令指针*](https://en.wikipedia.org/wiki/Program_counter)寄存器，也称为*程序计数器*，包含当前正在执行的机器指令的地址。因此，它将指向您的程序崩溃的位置，或者更一般地说，您的程序在遇到断点、转储核心等时所在的位置。

EIP 被保存和恢复以实现函数调用（在机器代码级别——内联可能导致高级语言调用不执行实际调用）。在内存不安全的语言中，堆栈缓冲区溢出会覆盖指令指针的保存值，导致返回指令返回错误的位置。如果幸运的话，覆盖的值将在下一次内存获取时触发段错误，但 EIP 的值将是任意的，并且对调试问题没有帮助。如果你不走运，攻击者制作了新的 EIP 以指向有用的代码，因此许多环境使用“堆栈 cookie”或“金丝雀”在恢复保存/覆盖的 EIP 之前检测这些覆盖，在这种情况下，EIP 值可能是有用。

[EFLAGS](https://en.wikipedia.org/wiki/FLAGS_register)不是内存地址，也可以说不是通用寄存器。EFLAGS 的每一位都是一个标志，可以通过各种指令设置或测试。最重要的标志是进位、零和符号标志，它们由算术指令设置并用于条件分支。您的调试器将其误解为内存地址并将其显示为最接近的函数，但这实际上与您的崩溃无关。（这`+ 1778`是赠品：这意味着 EFLAGS 将 1778 字节指向函数，但该函数实际上不太可能是 1778 字节长。）

ESP 是堆栈指针，而 EBP（通常）是帧指针（也称为基指针）。这些寄存器将当前帧绑定在调用堆栈上。您的调试器通常可以根据这些指针向您显示堆栈变量的值和当前调用堆栈。如果发生损坏，有时您可以手动检查堆栈以恢复 EBP 并手动展开调用堆栈。请注意，可以在没有帧指针的情况下编译代码（省略帧指针），从而释放 EBP 以供其他用途；这在 x86 上很常见，因为通用寄存器很少。

SS、CS、DS、ES、FS 和 GS 保存段选择器，在分页之前用于实现[分段](https://en.wikipedia.org/wiki/Memory_segmentation)的糟糕时代。今天 FS 和 GS 被操作系统普遍用于进程和线程状态块；它们是唯一继承到 x86-64 的选择器寄存器。选择器寄存器通常对调试没有帮助。

# objective-c - 检查当前方向是否支持方向

> ID：15212916
> 
> 赞同：2
> 
> 时间：2013-03-04T23:10:01.543
> 
> 标签：objective-c, xcode, ipad, uideviceorientation

在我的属性列表文件中，我提到了所有支持的方向。我有许多支持不同方向的应用程序。为了处理所有这些应用程序的所有 UI 相关的东西，我有一个共同的项目。所以，我不能在这个公共项目中做任何特定于应用程序的事情，因为它也会影响其他应用程序。在这个通用项目的一个文件中，我需要检查是否支持设备方向。

我已经使用数组检索了支持的方向

```
NSArray *supportedOrientations = [[[NSBundle mainBundle] infoDictionary]     objectForKey:@"UISupportedInterfaceOrientations"]; 
```

我的方法有签名

```
-(BOOL) isInvalidOrientation: (UIDeviceOrientation) orientation 
```

我需要检查是否支持当前方向，即我需要检查supportedOrientations 数组中是否存在当前方向。

我无法这样做，因为当我使用

```
[supportedOrientations containsObject:self.currentOrientation]; 
```

我收到一条错误消息，说 ARC 不允许将 UIDeviceOrientation 隐式转换为 id。

这是因为它们是不兼容的类型。我该如何检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:12:37.383

问题是`UISupportedInterfaceOrientations`info 键为您提供了一个字符串数组。While`self.currentOrientation`给你一个枚举值来自`UIDeviceOrientation`. 您需要一种将枚举值映射到字符串值的方法。另请注意，您正在处理设备方向和界面方向。

```
- (NSString *)deviceOrientationString:(UIDeviceOrientation)orientation {
    switch (orientation) (
        case UIDeviceOrientationPortrait:
            return @"UIInterfaceOrientationPortrait";
        case UIDeviceOrientationPortraitUpsideDown:
            return @"UIInterfaceOrientationPortraitUpsideDown";
        case UIDeviceOrientationLandscapeLeft:
            return @"UIInterfaceOrientationLandscapeLeft";
        case UIDeviceOrientationLandscapeRight:
            return @"UIInterfaceOrientationLandscapeRight";
        default:
            return @"Invalid Interface Orientation";
    }
}

NSString *name = [self deviceOrientationString:self.currentOrientation];

BOOL res = [supportedOrientations containsObject:name]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:20:47.637

我有类似的需要来确定应用程序支持的方向，以便预先缓存一些资源。但我只需要知道应用程序是否支持纵向、横向或两者。该线程使我找到了以下解决方案，因此我想我可能会发布它。

```
// get supported screen orientations
NSArray *supportedOrientations = [[[NSBundle mainBundle] infoDictionary]
                                  objectForKey:@"UISupportedInterfaceOrientations"];
NSString *supportedOrientationsStr = [supportedOrientations componentsJoinedByString:@" "];
NSRange range = [supportedOrientationsStr rangeOfString:@"Portrait"];
if ( range.location != NSNotFound )
{
    NSLog(@"supports portrait");
}
range = [supportedOrientationsStr rangeOfString:@"Landscape"];
if ( range.location != NSNotFound )
{
    NSLog(@"supports landscape");
} 
```

# api - 是否特定于 API 语言

> ID：15212919
> 
> 赞同：3
> 
> 时间：2013-03-04T23:10:28.560
> 
> 标签：api, bing-api

这可能是一个非常基本的问题，但特定于 API 语言。一般来说，某些语言是否只适用于某些 API，或者任何语言都应该能够与任何 API 对话。

具体来说，Bing Webmaster Tools API 有 C# 代码示例。这是否意味着我无法在 Python 中访问 API？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:54:16.687

如果 API 通过 HTTP 公开并返回一种与语言无关的格式，如 JSON 或 XML（大多数流行的第三方 API 都这样做），那么您可以使用哪种编程语言来解析 API 响应就没有限制。

一些 API 提供者可能会提供特定的客户端库，例如。Facebook JavaScript SDK，但这并不排除使用不同的语言，它只是意味着你会得到更少的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:24:59.823

这取决于。许多 API 设计用于一种特定语言，例如 PHP 框架提供的功能。话虽如此，但这并不一定意味着将来另一种语言可以开始使用它们；例如 IronPython 利用 .NET Framework。

编译库被多种语言使用是很常见的，例如图形库。

您还可以使用基于 Web 服务的 API（例如您的示例中的 Bing）来响应 HTTP 请求。这些可以被任何语言或*任何*一般的东西调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:15:50.070

API 总是只与一种语言相关。但是，有时会创建接口或库，以便其他语言可以访问它们。例如，XML 用于指定 ebay 中的列表。它是通过 HTTP 上传的。然而，有许多库，例如 PHP 和 Java，将其抽象为它们的术语，但在它们的使用和它们发送的 XML 之间保持直接关联。

# trigger.io - 使用 forge.event.connectionStateChange.addListener 时 Trigger.io App 崩溃

> ID：15212920
> 
> 赞同：3
> 
> 时间：2013-03-04T23:10:31.493
> 
> 标签：trigger.io

我正在尝试`forge.event.connectionStateChange.addListener`从[文档](http://docs.trigger.io/en/v1.4/modules/event.html#connectionstatechange-addlistener)中使用。我创建了一个完全空的应用程序，添加`"event":true`到`config.json`配置中，并将以下位添加到`main.js`：

```
forge.logging.info("Add JavaScript to js/main.js!");

forge.event.connectionStateChange.addListener(
    function() {
      alert('Device ' + (forge.is.connection.connect() ? "is" : "is not") + 'connected.');
    },
    function(){
      alert('Erorr');
    }
); 
```

当我运行应用程序并关闭机器的 wifi 时，应用程序崩溃。如果需要，我可以提供更多日志。

```
[DEBUG] Native call: {
[DEBUG]     callid = "9B3DBB44-870E-438B-8128-07E88474DDAB";
[DEBUG]     method = "launchimage.hide";
[DEBUG]     params =     {
[DEBUG]     };
[DEBUG] }
[DEBUG] Returning to javascript: {
[DEBUG]     callid = "9B3DBB44-870E-438B-8128-07E88474DDAB";
[DEBUG]     content = "<null>";
[DEBUG]     status = success;
[DEBUG] }
[INFO] No reload update available.
[INFO] 2013-03-04 16:59:54.725 Forge[68603:c07] +[BorderControl returnResult:]: unrecognized selector sent to class 0x2fb4a4
[INFO] 2013-03-04 16:59:54.725 Forge[68603:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[BorderControl returnResult:]: unrecognized selector sent to class 0x2fb4a4'
[INFO] *** First throw call stack:
[INFO] (0x33b6012 0x2e55e7e 0x34412ad 0x33a5bbc 0x33a594e 0x2e695c8 0x2895765 0x3339f3f 0x333996f 0x335c734 0x335bf44 0x335be1b 0x33107e3 0x3310668 0x1d99ffc 0x26e6 0x2625)
[INFO] libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:04:17.907

抱歉 - 我们的错误：这是在 v1.4.32 中导致 Reload 出现问题的同一问题的症状。

v1.4.33 中有一个修复 - 请尝试一下，让我知道这是否适合您。

# java - Jung2：如何一次连接所有节点

> ID：15212921
> 
> 赞同：0
> 
> 时间：2013-03-04T23:10:33.960
> 
> 标签：java, algorithm, jung

我想问有没有什么方法可以使用 Jung2 API 中的一种简单方法来连接所有节点。我想获得我放置在画布上的节点的完整图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:39:55.587

为给定的一组节点生成一个完整的图非常简单（而且也相当少见），因此 JUNG 没有提供执行此操作的方法。代码看起来像这样：

```
for (V v : g.getVertices()) {
  for (V w: g.getVertices()) {
    g.addEdge(createEdge(), v, w);
  }
} 
```

（您需要提供 createEdge() 的实现。）

# php - SQL 更新语句为 access_end 日期增加一年

> ID：15212923
> 
> 赞同：0
> 
> 时间：2013-03-04T23:10:40.937
> 
> 标签：php, sql, date

我可以用 PHP 编写代码，但我一点也不擅长 SQL。我需要在表上运行更新，以便传入给定的 user_id，并将用户拥有的所有产品的“access_end”日期设置为从今天起一年。

非常感谢任何帮助

数据库是 MySQL

表名是 dap_users_products_jn

数据库中的相关字段是：

```
user_id | access_end_date | product_id

1       |   2012-10-26    | 34
1       |   2012-11-21    | 30
1       |   2012-12-22    | 3
2       |   2012-10-20    | 34
2       |   2012-07-18    | 30
2       |   2012-08-15    | 3
...etc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:12:04.743

```
update dap_users_products_jn
set access_end_date = date_add(now(), interval 1 year)
where user_id = 1 
```

# java - 二元运算符“-”的错误操作数类型第一种类型：int；第二种类型：java.lang.String

> ID：15212925
> 
> 赞同：0
> 
> 时间：2013-03-04T23:10:43.723
> 
> 标签：java, string, operators, int

我在将 String(birthyear) 转换为 int(age) 时遇到了麻烦。我希望有人输入他们的出生年份，并让程序进行简单的减法计算以计算出他们的年龄。我是编程新手，所以我一直在四处寻找，大多数地方都告诉我同样的事情。

```
Integer.parseInt(birthyear); 
```

但是，这样做之后，当我尝试进行数学运算时...

```
int age = year-birthyear; 
```

我得到标题中的错误。

```
public class WordGameScanner
{
    public static void main(String[] argus)
    {
        String name;
        String home;
        String birthyear;
        String course;
        String reason;
        String feedback;
        int year = 2013;

        Scanner input = new Scanner(System.in);
        System.out.print("What is your name: ");
        name = input.nextLine();
        System.out.print("Where are you from: ");
        home = input.nextLine();
        System.out.print("What year were you born: ");
        birthyear = input.nextLine();
        Integer.parseInt(birthyear);
        System.out.print("What are you studying: ");
        course = input.nextLine();
        System.out.print("Why are you studying " + course + ": ");
        reason = input.nextLine();
        System.out.print("How is " + course + " coming along so far: ");
        feedback = input.nextLine();

        int age = year-birthyear;

        System.out.println("There once was a person named " + name +
            " who came all the way from " + home +
            " to study for the " + course +
            " degree at --------------.\n\n" + name +
            " was born in " + birthyear + " and so will turn " + age +
            " this year.");
        System.out.println(name + " decided to study the unit ------------, because \"" +
            reason + "\". So far, ----------- is turning out to be " +
            feedback + ".");
    }
} 
```

如果发错地方了，我很抱歉，这只是我在这里的第二篇文章。我只是点击“提问”并按照指示进行操作 >.<

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T23:12:13.103

```
int age = year-Integer.parseInt(birthyear); 
```

调用`parseInt`不会将变量重新定义`String birthYear`为`int`，它只是返回一个`int`值，您可以将其存储在另一个变量（如`int birthYearInt = Integer.parseInt(birthYear);`）中或在上述表达式中使用。

* * *

您可能还想花一点时间考虑输入。

您的用户可能只输入最后两位数字（“83”而不是“1983”），因此您可以这样做：

```
int birthYearInt = Integer.parseInt(birthYear);
if (birthYear.length() == 2) {
  // One way to adjust 2-digit year to 1900.
  // Problem: There might not be more users born in 1900 than born in 2000.
  birthYearInt = birthYearInt + 1900; 
}
int age = year = birthYearInt; 
```

或者，您可以使用[`java.text.NumberFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html)正确处理输入中的逗号。 `NumberFormat`是处理来自人类的数字的好方法，因为它处理人们格式化数字的方式与计算机不同。

* * *

另一个问题是，这使用了中国的年龄编号系统，每个人的年龄在新年（中国农历，而不是公历）都会加一。这不是他们在世界范围内计算年龄的方式。例如，在美国和欧洲大部分地区，您的年龄会在您的出生周年纪念日增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T23:13:02.477

```
Integer.parseInt(birthyear); 
```

**不会覆盖出生年份值，也不会将其类型从 String 更改为 int**

所以你必须做

```
int intbirthyear = Integer.parseInt(birthyear); 
```

接着

```
int age = year-intbirthyear; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:13:10.637

`Integer.parseInt`不会`birthyear`从 String 更改为 int，它只是返回字符串表示的 int。您需要将此返回值分配给另一个变量并在减法中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T23:14:25.093

即使在`Integer.parseInt(birthyear);`没有分配任何东西的情况下执行， `birthyear`也将是一个字符串。

要么使用 `int age = year-Integer.parseInt(birthyear);`

或者

```
int ibirthyear = Integer.parseInt(birthyear);
int age = year - ibirthyear; 
```

# javascript - 在窗口调整大小时重新计算的等高列

> ID：15212927
> 
> 赞同：0
> 
> 时间：2013-03-04T23:11:20.040
> 
> 标签：javascript, jquery, window-resize

我下面的代码应该找到最大列（.border）的高度并调整.container div中找到的任何其他列的高度以使其相等。不幸的是，我无法让这段代码按预期工作，所以我希望比我更聪明的人能帮助我。

还值得一提的是，每当调整窗口大小时，都应重新计算列高并分别调整列大小。

```
<script type="text/javascript">
    $(document).ready(function(){
        //Bind the window onresize event
        $(window).bind('resize', resizeWindow);

        //Call resizeWindow() function immediately to intiially set elements
        resizeWindow();
    });

    function resizeWindow(){
        //Find all the container parent objects
        $('.container').each(function(){
            //Initialize the height variable
            var maxHeight = 0;

            //Cache the jQuery object for faster DOM access and performance
            var $borders = $(this).find('.border');

            //Find all the border child elements within this specific container
            $borders.each(function(){
                //Get current element's height
                var thisHeight = $(this).height();

                //Check if the current height is greater than the max height thus far
                //If so, change max height to this height
                if (thisHeight>maxHeight) maxHeight = thisHeight;
            });

            //Now that we have the maximum height of the elements,
            //set that height for all the .border child elements inside the parent element
            $borders.height(maxHeight);
        });
    }
</script>

<div class="container">
    <a href="#" class="border">
        <div class="column">
            <div class="content">asdf</div>
        </div>
    </a>
    <a href="#" class="border">
        <div class="column">
            <div class="content">asdf</div>
        </div>
    </a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:25:00.657

使用 jQuery equalHeights 插件：

[http://www.cssnewbie.com/equalheights-jquery-plugin](http://www.cssnewbie.com/equalheights-jquery-plugin)

```
$('.container .border').equalHeights(); // make all .border the same height
$(window).resize(function(){$('.container .border').equalHeights();}); 
```

见：http: [//jsfiddle.net/rZU35/](http://jsfiddle.net/rZU35/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:21:40.107

这不完全是您的 JavaScript 问题的解决方案。这是一个 CSS 解决方案，不需要任何 JavaScript。将这些样式与您的标记一起使用，两列将始终具有相同的高度：

```
div.container {
    display: table;
    width: 100px;
}

div.container > a {
    display: table-cell;
    border: 1px solid red;
} 
```

**演示**

[http://jsfiddle.net/wmbcr/](http://jsfiddle.net/wmbcr/)

如果没有设置固定宽度，这也适用于调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:35:15.323

我认为你应该为你的`DIV`not提供一个高度`<a>`。

试试这个小提琴：

[http://jsfiddle.net/ddFtX/1/](http://jsfiddle.net/ddFtX/1/)

# caching - 如何在不使用全局变量的情况下将数据加载和缓存到可以在多个函数中访问的 bottle.py 应用程序中？

> ID：15212928
> 
> 赞同：0
> 
> 时间：2013-03-04T23:11:21.973
> 
> 标签：caching, web-applications, global-variables, bottle

我有一个bottle.py 应用程序，它应该加载一些数据，其中部分数据会根据特定路线获得服务。（这在原则上类似于 memcached，除了数据不是那么大而且我不想要额外的复杂性。）我可以将数据加载到全局变量中，这些变量可以从我编写的每个函数中访问，但这似乎不太干净. 有没有办法在初始化期间将一些数据加载到 Bottle() 实例中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T19:56:01.230

你可以通过使用 bottle.default_app 来做到这一点。
这是一个简单的例子。

main.py（使用来自[http://bottlepy.org/docs/dev/](http://bottlepy.org/docs/dev/)的示例代码）

```
import bottle
from bottle import route, run, template

app = bottle.default_app()
app.myvar = "Hello there!"  # add new variable to app

@app.route('/hello/<name>')
def index(name='World'):
    return template('<b>Hello {{name}}</b>!', name=name)

run(app, host='localhost', port=8080) 
```

some_handler.py

```
import bottle

def show_var_from_app():
    var_from_app = bottle.default_app().myvar
    return var_from_app 
```

# api - Rally 回溯 API：SSO 身份验证错误

> ID：15212929
> 
> 赞同：1
> 
> 时间：2013-03-04T23:11:22.807
> 
> 标签：api, rally, lookbackapi

我们的组织使用单点登录功能为每个用户自动登录 Rally。对于我过去创建的使用 Web 服务 API 的自定义应用程序，这似乎不会造成任何问题，但是，当启用了 SSO 的用户尝试运行使用 Lookback API 的应用程序时，会出现一个登录框（如下所示）。用户的 SSO 凭据或他们之前的 Rally 登录凭据似乎都无法让他们访问 API。

![在此处输入图像描述](../Images/4bbac3a46066134ad89f991097743d2e.png)

我认为是 SSO 导致了这个问题的假设严格基于这样一个事实，即我们中的少数禁用它的人不会遇到这些问题，但是使用 SSO 的人每次都会遇到它。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:16:48.700

Jake 在 Rally 的团队部署了一个应该可以解决这个问题的更新。如果它仍在发生或有其他问题，请不要犹豫回帖。

# php - 通过php、AT命令发送短信

> ID：15212930
> 
> 赞同：1
> 
> 时间：2013-03-04T23:11:33.823
> 
> 标签：php, sms, at-command

我想使用 php 通过 GSM 网关发送短信。我想直接向调制解调器发送 AT 命令。我应该尝试与 minicom 或类似的东西交互吗？我应该只使用短信服务器工具吗？有没有更简单的方法来做到这一点？

顺便说一句，使用 Debian。

此外，作为后续工作，什么是我可以与标准 SIM 卡一起使用的体面的 GSM 调制解调器，并且可以与上述程序一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:24:17.377

用php做一个短信管理器并不容易——实际上做一个可靠的短信管理器根本不是那么容易，调制解调器是一个特殊的品种。短信服务器工具易于设置、可靠且功能丰富，因此我不会打扰，只需设置短信工具即可。

Wrt调制解调器，我认为大多数应该可以工作。我们使用的是 Cinterion TC65，它们运行良好，但我相信许多其他的也同样运行良好。

# iphone - 调用 MPMoviePlayerViewController 完成按钮。iPad

> ID：15212934
> 
> 赞同：0
> 
> 时间：2013-03-04T23:11:50.473
> 
> 标签：iphone, mpmovieplayercontroller

当用户在`MPMoviePlayerViewController`显示 a 时退出应用程序或更改应用程序时，他们会重新进入应用程序，并且该应用程序`MPMoviePlayerViewController`仍然存在大约半秒。我想保持`MPMoviePlayerViewController`状态，或者在用户重新打开应用程序时看到它之前将其移开，或者`MPMoviePlayerViewController`在用户退出应用程序之前关闭它。现在我计划`MPMoviePlayerViewController`在用户离开应用程序之前关闭我的 AppDelegate 中的。

所以我想知道是否可以在 上调用完成按钮`MPMoviePlayerViewController`，我想从我的 AppDelegate 执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:04:07.720

试着打电话`MPMoviePlayerWillExitFullscreenNotification` `NSNotificationCenter`。下面不错

关于这个主题的讨论可能会对您有所帮助：

[完成按钮事件 MPMoviePlayerController](https://stackoverflow.com/questions/8227801/done-button-event-mpmovieplayercontroller)

# regex - 正则表达式查找两个字符串之间的匹配

> ID：15212941
> 
> 赞同：0
> 
> 时间：2013-03-04T23:12:11.543
> 
> 标签：regex

寻找 reg 表达式以在 .NET 环境中返回匹配。

在这样的字符串中......

```
Parameters!param_id.Value && Parameters!abc.Value 
```

我正在寻找参数之间的匹配词 xyz！和 .Value

因此，从上面的字符串示例中，它将返回“param_id”和“abc”。

我试过了 ...

```
(?<=Parameters!)(.*)(?=\.Value) 
```

但它返回第一个开始字符串和最后一个结束字符串之间的匹配。

```
(?<=Parameters!)(.*?)(?=\.Value) 
```

只返回第一个匹配的单词。

任何帮助是极大的赞赏！

一些代码让它继续......

```
Dim reg As Regex = New Regex("(?<=Parameters!)(.*)(?=\.Value)", RegexOptions.IgnoreCase)
Dim col As MatchCollection = reg.Matches("Parameters!param_id.Value && Parameters!abc.Value")
For Each m As Match In col
    Debug.WriteLine(m)
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T13:09:12.247

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

```
Dim reg As Regex = New Regex("(?<=Parameters!)(\w*)(?=\.Value)", RegexOptions.IgnoreCase)
Dim col As MatchCollection = reg.Matches("Parameters!param_id.Value && Parameters!abc.Value")
For Each m As Match In col
    Debug.WriteLine(m)
Next 
```

– 狗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:14:52.437

我只是想尝试：

```
Parameters\!(.*?)\.Value 
```

# c - 重命名文件序列 Matlab

> ID：15212944
> 
> 赞同：0
> 
> 时间：2013-03-04T23:12:15.403
> 
> 标签：c, matlab

关于重命名目录中的图像文件列表，然后将其他一些图像文件放入该目录中，我想寻求您的帮助。例如，我有目录 Dir1，其中有一个图像列表，如下所示：

```
Dir1 = [Image-001.jpg, Image-002.jpg, Image-003.jpg,...
        Image-004.jpg, Image-005.jpg, Image-006.jpg,...
        Image-007.jpg, Image-008.jpg, Image-009.jpg,...
        Image-010.jpg, Image-011.jpg, Image-012.jpg]; 
```

我将图像列表分为两个子目录，Dir2 和 Dir3。Dir3 包含 Dir1 的每 3 个图像；Dir2 包含其余的图像。

```
Dir2 = [Image-001.jpg, Image-002.jpg, Image-004.jpg,...
        Image-005.jpg, Image-007.jpg, Image-008.jpg,...
        Image-010.jpg, Image-011.jpg];

Dir3 = [Image-003.jpg, Image-006.jpg, Image-009.jpg, Image-012.jpg]; 
```

现在，对 Dir2 和 Dir3 的图像进行一些处理后，Dir2 和 Dir3 的文件名变为：

```
Dir2 = [Image-001.jpg, Image-002.jpg, Image-003.jpg,...
        Image-004.jpg, Image-005.jpg, Image-006.jpg,...
        Image-007.jpg, Image-008.jpg];

Dir3 = [Image-001.jpg, Image-002.jpg, Image-003.jpg,...
        Image-004.jpg]; 
```

谁能告诉我如何合并 Dir2 和 Dir3 的文件并返回到 Dir1 的文件名模式；也就是我要把Dir3的Image-001.jpg重命名为Image-003.jpg，放到Image-003.jpg所在的Dir2的第3个位置；并且 Image-003.jpg 和 Dir2 中的其余图像将相应地重命名。对于 Dir3 的 Image-002 等也会发生同样的情况。

请问我是否无法清楚地解释问题。任何帮助将非常感激。Matlab 或 C++ 中的任何示例代码都会有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T06:31:23.410

你应该使用[`movefile`](http://www.mathworks.com/help/matlab/ref/movefile.html)and[`copyfile`](http://www.mathworks.com/help/matlab/ref/copyfile.html)来完成这项工作。

例如，在 Dir3 你可以做

```
for ii=1:4,
    dir3filename = fullfile( 'Dir3', sprintf('Image-%03d.jpg', ii ) );
    dir1filename = fullfile( 'Dir1', sprintf('Image-%03d.jpg', 3*ii) ); % new name
    copyfile( dir3filename, dir1filename );
end 
```

请注意，`dir3filename`and`dir1filename`是相对路径，只有当相对路径相对于当前工作目录正确时，代码才会起作用。您可以更改代码以使用绝对路径。

您可能还想查看[`fullfile`](http://www.mathworks.com/help/matlab/ref/fullfile.html)字符串[格式](http://www.mathworks.com/help/matlab/matlab_prog/formatting-strings.html)。

# c# - 仅允许数字和句点的文本框

> ID：15212947
> 
> 赞同：0
> 
> 时间：2013-03-04T23:12:36.907
> 
> 标签：c#, .net, wpf, regex, visual-studio-2012

我对 C# 和 WPF 还很陌生，但我正在尝试创建一个最多允许 14 个数字和 3 个句点的文本框，以及另一个只允许 5 个数字的文本框。我怎样才能做到这一点？由于某种原因，我没有运气研究过stackoverflow。我尝试了许多“解决方案”，但这些对我从来没有用过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:55:44.743

我正在查看 nakiya 的解决方案，我可以看到您不明白该怎么做。我会做一个完整的例子，这样你就可以从中学到一些东西。看一看：

*主窗口.xaml*

```
<TextBox TextChanged="TextBoxBase_OnTextChanged" /> 
```

*主窗口.cs*

```
private void TextBoxBase_OnTextChanged(object sender, TextChangedEventArgs e) {
    var textBox = sender as TextBox;
    if (textBox != null) {
        string newValue = textBox.Text;
        int changed = ValidateText(ref newValue);

        int selectionStart = textBox.SelectionStart;
        textBox.Text = newValue;
        textBox.SelectionStart = selectionStart - changed;
    }
}

private int ValidateText(ref string input) {
    // If no value, return empty string
    if (input == null) return 0;

    int changed = 0;
    // Go through input string and create new string that only contains digits and period
    StringBuilder builder = new StringBuilder();
    for (int index = 0; index < input.Length; index++) {
        if (Char.IsDigit(input[index]) || input[index] == '.')
            builder.Append(input[index]);
        else changed++;
    }
    input = builder.ToString();
    return changed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:27:37.873

如果你愿意，你可以像这样设置绑定：

```
<TextBox Text="{Binding Field, UpdateSourceTrigger=PropertyChanged}" /> 
```

然后在`Field`属性的设置器中执行您的要求：

```
public string Field
{
    get { return _field; }
    set
    {
        var val = MakeNumeric(value)
        _field = value;
        OnPropertyChanged("Field");
    }
} 
```

# dotnetopenauth - ProcessUserAuthorization 上的错误请求 (DotNetOpenAuth 4.2.2.13055)

> ID：15212959
> 
> 赞同：1
> 
> 时间：2013-03-04T23:13:49.313
> 
> 标签：dotnetopenauth

我正在尝试将版本升级`DotNetOpenAuth`到`4.2.2.13055`, 在 Google dotnet 客户端库中。所以我下载了最新的 dll - DotNetOpenAuth.Core、DotNetOpenAuth.OAuth2 等（我们仍然不使用 NuGet）。

我做了一个小改动（改变了我用 client_id 和 client_secret 构建 NativeApplcationClient 的方式）来支持新版本。然后，我尝试运行我们的示例存储库中的示例（例如[https://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.SimpleOAuth2/Program.cs?repo= samples](https://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.SimpleOAuth2/Program.cs?repo=samples) )，我收到了一个错误的请求错误，如下所示：

```
 DotNetOpenAuth.Messaging.ProtocolException: Error occurred while sending a direct message or getting the response. --->
 System.Net.WebException: The remote server returned an error: (400) Bad Request.
   at System.Net.HttpWebRequest.GetResponse()
   at DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request, DirectWebRequestOptions opt
ions)
   --- End of inner exception stack trace ---
   at DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request, DirectWebRequestOptions opt
ions)
   at DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request)
   at DotNetOpenAuth.Messaging.Channel.GetDirectResponse(HttpWebRequest webRequest)
   at DotNetOpenAuth.Messaging.Channel.RequestCore(IDirectedProtocolMessage request)
   at DotNetOpenAuth.Messaging.Channel.Request(IDirectedProtocolMessage requestMessage)
   at DotNetOpenAuth.OAuth2.ClientBase.UpdateAuthorizationWithResponse(IAuthorizationState authorizationState, EndUserAu
thorizationSuccessAuthCodeResponse authorizationSuccess)
   at DotNetOpenAuth.OAuth2.UserAgentClient.ProcessUserAuthorization(IAuthorizationState authorizationState, IDirectedPr
otocolMessage response)
   at DotNetOpenAuth.OAuth2.UserAgentClient.ProcessUserAuthorization(Uri actualRedirectUrl, IAuthorizationState authoriz
ationState)
   at Google.Apis.Authentication.OAuth2.DotNetOpenAuth.NativeApplicationClient.ProcessUserAuthorization(String authCode,
 IAuthorizationState authorizationState) in c:\code.google.com\google-api-dotnet-client\default_oauth2\Src\GoogleApis.Au
thentication.OAuth2\DotNetOpenAuth\NativeApplicationClient.cs:line 102
   at Google.Apis.Samples.TasksOAuth2.Program.GetAuthorization(NativeApplicationClient arg) in c:\code.google.com\google
-api-dotnet-client\samples_oauth2\Tasks.SimpleOAuth2\Program.cs:line 73
   at Google.Apis.Authentication.OAuth2.OAuth2Authenticator`1.LoadAccessToken() in c:\code.google.com\google-api-dotnet-
client\default_oauth2\Src\GoogleApis.Authentication.OAuth2\OAuth2Authenticator.cs:line 124 
```

我还注意到第二个请求（用令牌交换代码）有一个不同：授权标头已添加到请求中，并且正文缺少我的 client_id 和 client_secret。

类似的代码适用于旧版本 - 4.0.0.11165，我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:23:13.557

我想知道问题是否在于较新的 DNOA 版本*默认支持将客户端凭据放在 HTTP 标头中*。如果您创建您的客户端类，将不同的客户端凭据提供程序传递给构造函数，它可能对您有用。

要将行为从使用 HTTP 授权标头更改回在 POST 实体中传递客户端凭据，请实例化您的 ClientBase 派生类，并将其作为参数传递给构造函数：

```
ClientCredentialApplicator.PostParameter(clientSecret) 
```

# haskell - 如何将字符串转换为 Pandoc 内联数据类型

> ID：15212962
> 
> 赞同：2
> 
> 时间：2013-03-04T23:14:01.437
> 
> 标签：haskell

我正在尝试为一些定制的需求制作一个 pandoc 脚本。我需要将一个字符与 pandoc 内联数据类型连接起来。下面的演示代码不起作用，因为标题是内联类型，而“a”是字符类型。我该怎么做呢？

对 $"a"++ 说明文字

# linux - 使用 last 和 tr 剪切行和列

> ID：15212967
> 
> 赞同：-1
> 
> 时间：2013-03-04T23:14:19.530
> 
> 标签：linux, bash, multiple-columns

用户从“最后一个”命令中选择要剪切的行以及要剪切的列。除了使用变量之外，还使用 ​​'tr' 来修复空格中的所有差异。我尝试了以下代码，但不知道我哪里出错了。

```
echo -n "What rows and columns would you like to cut: "
read before
read after
read stop
read start
last | head -n $before friend_list | tail -n $after | tr -d $start $stop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:30:07.547

*听起来*你想要的是这样的：

```
last | head -n $after | tail -n $((after-before+1)) | cut -f $start-$stop 
```

它将`last`逐行`$before`、逐`$after`列输出 的子集。`$start``$stop`

# actionscript-3 - 将actionscript 3项目构建为exe

> ID：15212968
> 
> 赞同：3
> 
> 时间：2013-03-04T23:14:21.233
> 
> 标签：actionscript-3, flash, apache-flex

就像标题一样简单，我希望我的项目从可执行文件而不是 swf 运行

我知道“创建投影仪”选项，但最新的 Flash 播放器将此选项显示为灰色。

如果重要，我会使用 Flash 开发

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:54:08.683

正如 Flextras 在评论中提到的，您可以通过将 AIR 应用程序打包为强制运行时将其分发为 exe+dmg。

这会将 AIR 运行时与您的应用程序捆绑在一起，并且**不需要**用户安装任何其他东西。所需的一切都将包含在应用程序二进制文件中。

你可以`adt`用来构建你的exe，

[http://www.tricedesigns.com/2011/08/10/air-3-0-captive-runtime/](http://www.tricedesigns.com/2011/08/10/air-3-0-captive-runtime/)

```
adt -package SIGNING_OPTIONS? -target bundle SIGNING_OPTIONS? <output-package> ( <app-desc> FILE-OPTIONS | <input-package> ) 
```

更多信息，

[http://help.adobe.com/en_US/air/build/WSfffb011ac560372f709e16db131e43659b9-8000.html](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f709e16db131e43659b9-8000.html)

您也可以直接从 Flash Builder 4.6+ 构建它

[http://houseofbilz.com/archives/2011/10/11/captive-runtime-packaging-in-air-3-0/](http://houseofbilz.com/archives/2011/10/11/captive-runtime-packaging-in-air-3-0/)

如果您确实有依赖项，您还可以将 AIR 应用程序打包为本机桌面安装程序，

[http://help.adobe.com/en_US/air/build/WS789ea67d3e73a8b22388411123785d839c-8000.html](http://help.adobe.com/en_US/air/build/WS789ea67d3e73a8b22388411123785d839c-8000.html)

[http://www.adobe.com/devnet/air/articles/air3-install-and-deployment-options.html#articlecontentAdobe_numberedheader](http://www.adobe.com/devnet/air/articles/air3-install-and-deployment-options.html#articlecontentAdobe_numberedheader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:02:48.810

如果您使用 Flash Player 10.1 运行 .swf 文件，您会发现“创建投影仪”选项仍然可用。看起来 Adob​​e 希望所有桌面应用程序都使用 AIR SDK，因此创建投影仪的这个选项是灰色的。因此，我仍然坚持使用 fp 10.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T00:06:50.593

投影仪导出 (Flash CC)

投影仪是包含已发布 SWF 和 Flash Player 的 Flash 文件。投影仪可以像普通应用程序一样播放，无需网络浏览器、Flash Player 插件或 Adob​​e AIR。

关于这个扩展：

投影仪已从 Flash Pro CC 中弃用，但是，使用此扩展程序，您现在可以将 Flash Pro CC 中的 Flash 内容作为独立应用程序发布。

从 Flash CC 导出的 Projector 在 windows 上是 .EXE 文件，在 Mac 上是 .APP 文件，即使没有安装 Flash Player 或插件，也可以分别在任何 Windows 和 Mac 机器上播放。

如何安装：

下载 ZXP 扩展文件并通过 Extension Manager CC 安装。（在使用此扩展之前，您必须在系统上安装 Flash Pro CC）

如何使用：

1.  在 Flash Pro CC 中打开要导出为投影仪的 Fla 文件。
2.  导航到命令菜单 -> 导出为投影仪
3.  选择保存投影仪的位置，然后单击“选择文件夹”。

在此处下载： [https ://nipunasthana.wordpress.com/projectorforflashcc](https://nipunasthana.wordpress.com/projectorforflashcc/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-13T07:52:06.853

1.  用 Flash 播放器打开 swf 文件
2.  文件->创建投影仪

    如此简单...

# javascript - jQuery GeoComplete：如何访问地图对象？

> ID：15212970
> 
> 赞同：0
> 
> 时间：2013-03-04T23:14:23.243
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在使用 GeoComplete jQuery 插件： [https ://github.com/ubilabs/geocomplete/blob/master/jquery.geocomplete.js](https://github.com/ubilabs/geocomplete/blob/master/jquery.geocomplete.js)

我在这个例子中初始化它，它工作正常： [http ://ubilabs.github.com/geocomplete/examples/draggable.html](http://ubilabs.github.com/geocomplete/examples/draggable.html)

我希望能够访问创建的 Google 地图实例以进行更多控制，例如，在标记拖动后显示 InfoWindow 等。

在 geocomplete 脚本中，地图的初始化如下：

```
...
this.map = new google.maps.Map(
    $(this.options.map)[0],
    this.options.mapOptions
);
... 
```

`this.map`我可以从我的脚本中访问该对象吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:24:21.560

```
$("#selector").geocomplete('map') 
```

....返回`google.maps.Map`-instance

# .htaccess - 使用 .htaccess 重写查询字符串

> ID：15212981
> 
> 赞同：1
> 
> 时间：2013-03-04T23:15:29.827
> 
> 标签：.htaccess, url-rewriting, query-string

我正在尝试为 SEO 目的重写 URL。

旧网址是：

```
http://www.domain.net/index.php?p=beer 
```

新的 URL 应该是：

```
http://www.domain.net/beer 
```

我在 .htaccess 中的代码是：

```
RewriteRule ^([^/\.]+)/?$ index.php?p=$1 
```

即使经过数小时的研究，我也不知道为什么这不起作用:(

这是完整的 .htaccess：

```
RewriteEngine on 
RewriteCond %{HTTP_USER_AGENT} Teoma
RewriteRule ^.* - [F]
rewritecond %{HTTP_HOST} !^www\.domain\.net$ [NC]
rewriterule ^(.*)$ http://www\.domain\.net/$1 [R=301,L]

RewriteCond %{QUERY_STRING} ^p=uppic$
RewriteRule ^index\.php$ /? [L,R=301]

RewriteRule ^([^/\.]+)/?$ index.php?p=$1

# Pwd service

AuthType Basic
AuthName "Service"
AuthUserFile /xxxx/www/xxxxxx/xxxxx/xxxxxx/.htpasswd

<Files admin.php>
Require user xxxxxxx
</Files>

Options -Indexes 
```

提前致谢！

* * *

我对这段代码的最后一个问题是：

```
RewriteRule ^([^/\.]+)/?$ index.php?p=$1 
```

使工作：

```
http://www.domain.net/beer 
```

和啤酒是指该页面：

```
http://www.domain.net/index.php?p=beer 
```

太棒了！但是如果我在啤酒后面放一个 / ，例如：

```
http://www.domain.net/beer/ 
```

我的 beer.php 文件在另一个路径上运行，因此不包含 css、图像、js 等。有什么想法可以在不将 html 更改为[http://www.domain.net/style.css](http://www.domain.net/style.css) ... 的情况下解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:23:34.177

如果要捕获部分查询字符串，则必须使用[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)with`QUERY_STRING`

```
RewriteEngine On
RewriteCond %{QUERY_STRING} p=(.+)
RewriteRule ^/?index.php$ /%1? [R,L] 
```

这会将客户端重定向到新的 URL `http://www.domain.net/beer`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T23:22:40.130

你试过这个：？

```
^([^/\.]+)\/?$ 
```

否则我会尝试没有其他东西的.htacces。

只是：

```
RewriteEngine On
RewriteBase /
RewriteRule ^([^/\.]+)\/?$ index.php?p=$1 
```

# couchdb - Google 关闭 CouchDB

> ID：15212983
> 
> 赞同：1
> 
> 时间：2013-03-04T23:15:34.543
> 
> 标签：couchdb, google-closure, google-closure-library

我的 goog 依赖项在常规服务器上 100% 运行，但我正在迁移到 CouchDB，您可能知道，这会破坏文件层次结构。我的一些依赖项没有加载，但我不知道为什么。有谁知道找出它*认为*依赖文件在哪里的好方法，哪些是它成功获得的，哪些不是......

基本上，调试这个的最佳方法是什么？或者在 CouchDB 中有没有办法做到这一点，所以我不必更改文件的位置。

编辑：它似乎在大约 50% 的时间内工作（它应该显示一些乐谱。）在 FF 中它似乎更频繁地工作。想法？

[http://fullscore.iriscouch.com/fullscore/_design/API%20Tests/public%2fpublic%2fscore-library%2ftests%2f01a-Pitches-Pitches.html](http://fullscore.iriscouch.com/fullscore/_design/API%20Tests/public%2fpublic%2fscore-library%2ftests%2f01a-Pitches-Pitches.html)

# hadoop - 使用 PIG 计算平均值

> ID：15212985
> 
> 赞同：13
> 
> 时间：2013-03-04T23:15:38.653
> 
> 标签：hadoop, apache-pig

我是 PIG 的新手，想计算我的一列数据的平均值，看起来像

0
10.1
20.1
30
40
50
60
70
80.1

我写了这个猪脚本

```
dividends = load 'myfile.txt' as (A);
dump dividends
grouped   = group dividends by A;
avg       = foreach grouped generate AVG(grouped.A);
dump avg 
```

它将数据解析为

(0)
(10.1)
(20.1)
(30)
(40)
(50)
(60)
(70)
(80.1)

但给出这个错误的平均值

```
2013-03-04 15:10:58,289 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1200: Pig script failed to parse: 
<file try.pig, line 4, column 41> Invalid scalar projection: grouped
Details at logfile: /Users/PreetiGupta/Documents/CMPS290S/project/pig_1362438645642.log 
```

任何的想法

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-05T01:25:47.290

`AVG`内置函数将一个包作为输入。在您的`group`声明中，您目前正在按 的值对元素进行分组`A`，但您真正想要做的是将所有元素分组到一个包中。

Pig's`GROUP ALL`是您想要使用的：

```
dividends = load 'myfile.txt' as (A);
dump dividends
grouped   = group dividends all;
avg       = foreach grouped generate AVG(dividends.A);
dump avg 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T07:41:34.870

下面将用于计算平均值：

```
dividends = load 'myfile.txt' as (A);
grouped   = GROUP dividends all;
avg       = foreach grouped generate AVG(dividends);
dump avg 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-06T04:10:02.373

您必须使用原始数据变量名称，而不是使用组变量。在行中`FOREACH`，我使用`AVG(dividends.A)`而不是`AVG(grouped.A)`. 这是解决方案脚本：

```
dividends = load 'myfile.txt' as (A);
dump dividends

grouped   = group dividends by A;
avg = foreach grouped generate AVG(dividends.A);
dump avg 
```

# php - Ajax 调用 memcache 函数总是查询 Db

> ID：15212986
> 
> 赞同：0
> 
> 时间：2013-03-04T23:15:48.217
> 
> 标签：php, ajax, memcached

我遇到了一个奇怪的问题。我正在使用名为 count.php 的文件中的 memcache 函数缓存查询的输出。当用户查看特定页面时，该文件每秒由 ajax 调用。输出缓存 5 秒，所以在这段时间内，如果这个文件有 5 次点击，我希望缓存的结果至少返回 3-4 次。但是，这并没有发生，而是每次查询都将通过 echo 语句发送到 db，但是如果通过键入 url 直接从浏览器调用文件（例如[http://example.com/help/count.php](http://example.com/help/count.php) ) 在 5 秒内重复多次从缓存返回数据（再次从 echo 语句中得到证明）。下面是count.php的相关代码

```
mysql_connect(c_dbhost, c_dbuname, c_dbpsw) or die(mysql_error());
mysql_select_db(c_dbname) or die("Coud Not Find Database");

$product_id=$_POST['product_id'];

echo func_total_bids_count($product_id);

function func_total_bids_count($product_id)
{
    $qry="select count(*) as bid_count from tbl_userbid where userbid_auction_id=".$product_id;
    $row_count=func_row_count_only($qry);
    return $row_count["bid_count"];
}

function func_row_count_only($qry)
{
    if($_SERVER["HTTP_HOST"]!="localhost")
    {
        $o_cache = new Memcache;
        $o_cache->connect('localhost', 11211) or die ("Could not connect to memcache");
        //$key="total_bids" . md5($product_id);
        $key = "KEY" . md5($qry);
        $result = $o_cache->get($key);
        if (!$result) 
        {
            $qry_result = mysql_query($qry);
            while($row=mysql_fetch_array($qry_result)) 
            {
                $row_count = $row;
                $result = $row;
                $o_cache->set($key, $result, 0, 5);
            }
            echo "From DB <br/>";
        }
        else
        {
            echo "From Cache <br/>";
        }
            $o_cache->close();
        return $row_count;
    }
} 
```

我很困惑为什么当一个 ajax 调用这个文件时，DB 每秒都会被命中，但是当在浏览器中输入 URL 时，缓存的数据被返回。要尝试 URL 方法，我只需将 $product_id 替换为有效数字（例如：在我的情况下为 $product_id=426）。我不明白这里出了什么问题，因为我希望在第一次命中后 5 秒内从缓存中返回数据。我希望从缓存中返回数据。有人可以帮我理解发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:29:08.600

如果您正在使用地址栏，那么您正在执行 GET，但您的代码正在寻找 $_POST['...']，因此您最终会得到一个无效的查询。因此，首先，使用地址栏的结果不会是您所期望的。您的 Ajax 调用实际上是在执行 POST 吗？

另请注意，那里存在 SQL 注入漏洞。确保 $product_id 是一个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:35:04.540

你的代码有很多问题，首先你总是连接到数据库并选择一个表，即使你不需要它。其次，您应该使用**!empty($result)检查 $result ，这与 !$** **result**一样更可靠，因为它也涵盖空对象。

如上所述，如果“product_id”不在 $_POST 数组中，您可以使用 $_REQUEST 来覆盖 $_GET（但如果您确定它是通过 $_POST 来的，则不应该这样做）。

# java - 将 JSON 发送到 Rails

> ID：15212988
> 
> 赞同：0
> 
> 时间：2013-03-04T23:15:55.207
> 
> 标签：java, android, ruby-on-rails, json

我的问题是转义字符使我的 JSON 无效。我将我的 JSON 发送到 Rails 服务器，但是当它到达时，它会获得一些转义字符。

我可以做些什么来在我的 restfull 课程上解决这个问题，还是在服务器端进行纠正？

这是我发送的 JSON，

```
[session={"password":"********","email":"********@omobile.com.br"}] 
```

这是出现在服务器日志上的 JSON：

```
{"session"=>"{\"password\":\"********\",\"email\":\"********@omobile.com.br\"}"} 
```

我尝试了这些不同的方式来发送我的 JSON，结果是一样的：

```
JSONObject object = new JSONObject();
object.accumulate("email", username);
object.accumulate("password", password);
String jsonString = object.toString();

Session session = new Session();
session.setEmail(username);
session.setPassword(password);
Gson gson = new Gson();
String jsonString = gson.toJson(session, Session.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:36:08.897

发生的事情是一团糟，因为您发布的字符串实际上都不是 JSON。第一个实际上我不知道它是什么，而第二个可能意味着在 Ruby 端你有这个 Ruby 哈希，其中键“会话”指的是 JSON 编码的哈希。

由于您没有发布代码，我们无法判断网络上发生了什么，因此我们无法判断您的服务器是否需要一个表单编码的请求正文、一个多部分的请求正文，或者直接是一个 JSON 编码的对象。

我希望您考虑到我看到的唯一 JSON 是以下部分：

```
{"password": "********","email":"********@omobile.com.br"} 
```

正如我所说，这可以按原样传递，也可以作为多信封的一部分传递，甚至可以通过 url 编码传递。该格式确实在服务器上建立。例如，我使用 Apache HttpClient 做了一个快速测试：

```
public class GsonSendToSinatra {

    private static class Session {
        @SuppressWarnings("unused")
        String username, password;
    }

    public static void main(String[] args) throws Exception {
        Session session = new Session();
        session.username = "foo@example.com";
        session.password = "qwerty1234";

        Gson gson = new Gson();

        String responseText = Request.Post("http://localhost:4567/echo")
            .bodyString(gson.toJson(session), ContentType.APPLICATION_JSON)
            .execute()
            .returnContent()
            .asString();

        System.out.println(responseText);
    }
} 
```

和服务器上的 Sinatra：

```
require 'sinatra'
require 'json'

post '/echo' do
  content_type "text/plain"
  layout false

  session = JSON.parse request.body.read

  session.map {|k,v| "#{k}: #{v}\n"}
end 
```

我希望这个例子能帮助你弄清楚 HTTP 对话中的移动部分是什么，以及如何组合它们。

# hive - 使用 Pig 中的 HcatLoader 访问在 Hive 中创建的视图

> ID：15212992
> 
> 赞同：1
> 
> 时间：2013-03-04T23:16:04.983
> 
> 标签：hive, apache-pig, hcatalog

我只是在猪的蜂巢和 HcatLoader 中尝试一些东西。我所做的是，在 Hive 中创建了一个视图，然后尝试通过我使用 HcatLoader 创建的视图将数据加载到猪中。但它似乎不起作用。我只是想确认有没有办法做到这一点？当我尝试使用 HcatLoader 在猪中加载视图时出现以下错误

events=使用 org.apache.hcatalog.pig.HCatLoader() 加载“ViewName”；转储事件；

当我使用任何 tableName 而不是 Hive 中的 View 时，它似乎可以工作。此外，它不会给出 Metastore 错误。正如它所说的在转储时成功连接到 metastore at load 语句，它崩溃并出现以下错误。

任何指针都会有所帮助。

谢谢， 阿图尔

```
org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias events
at org.apache.pig.PigServer.openIterator(PigServer.java:857)
at org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java:682)
at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:303)
at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189)
at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)
at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)
at org.apache.pig.Main.run(Main.java:555)
at org.apache.pig.Main.main(Main.java:111)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: org.apache.pig.PigException: ERROR 1002: Unable to store alias events
at org.apache.pig.PigServer.storeEx(PigServer.java:956)
at org.apache.pig.PigServer.store(PigServer.java:919)
at org.apache.pig.PigServer.openIterator(PigServer.java:832)
... 12 more
Caused by: org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobCreationException: ERROR 2017: Internal error creating job configuration.
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getJob(JobControlCompiler.java:731)
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.compile(JobControlCompiler.java:259)
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.launchPig(MapReduceLauncher.java:180)
at org.apache.pig.PigServer.launchPlan(PigServer.java:1270)
at org.apache.pig.PigServer.executeCompiledLogicalPlan(PigServer.java:1255)
at org.apache.pig.PigServer.storeEx(PigServer.java:952) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:34:03.997

我收到的回复是在其他论坛上发布的。

“ **HCatLoader 不支持在 Hive 中读取视图**。问题是视图被定义为对表的查询**（将视图 V 创建为 select x, y from t）**。

> 猪不会说SQL，

和

> HCat 不包含 Hive 的执行引擎

所以它也无法执行查询。从 Pig 和 MR 读取 Hive 视图将需要比我们目前更紧密的产品集成。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T12:39:18.460

我今天很难找到同样的问题。Hive 无法读取 Hive 视图（但缺少关于此主题的良好异常处理代码）。对于记录（任何其他陷入此问题的人），这是当前版本的行为方式：在 Hortonworks 2.3 和 Pig 1.15 上，我在日志中只收到以下错误：

> 错误 org.apache.pig.tools.grunt.Grunt - 错误 2017：创建作业配置的内部错误。

Pig 以这种方式失败，因为没有要加载的文件（因为我们试图从视图加载）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-16T04:25:59.810

由于 Pig 从 hadoop 中的文件加载数据，因此从视图（没有物理文件）读取数据可能无法正常工作。可能如果我们能够设法在 hadoop 中为视图创建一个文件，Pig 可能能够加载它。至少一个指向实际数据文件的虚拟指针文件。不确定这是否可能或是否已经考虑过。

# vb.net - 需要帮助显示 Itembox 值

> ID：15212994
> 
> 赞同：0
> 
> 时间：2013-03-04T23:16:11.697
> 
> 标签：vb.net

我是 Visual Basic 的新手，我很难将 itembox 值显示到我的标签显示中。有任何想法吗？

![http://i49.tinypic.com/n368ut.png](../Images/0a64da036ba91bfb156acd8e880ecad7.png)

```
Private Sub frmMain_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    'fill the list box with values
    lstNames.Items.Add("Smith, Joe")
    lstNames.Items.Add("Jones, Mary")
    lstNames.Items.Add("Adkari, Joel")
    lstNames.Items.Add("Lin, Sue")
    lstNames.Items.Add("Li, Vicky")
    lstNames.SelectedIndex = 0
End Sub

Private Sub MainForm_MouseClick(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseClick
    Select Case (lstNames.SelectedIndex)
        Case 0
            lblDisplay.Text = "3388"
        Case 1
            lblDisplay.Text = "3356"
        Case 2
            lblDisplay.Text = "2487"
        Case 3
            lblDisplay.Text = "1111"
        Case 4
            lblDisplay.Text = "2222"
    End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:30:59.780

我会尝试将您的代码从 MainForm.MouseClick 事件移动到 lstNames.ItemSelected

默认情况下，双击设计视图中的 lstNames 控件应该会为您创建此事件。