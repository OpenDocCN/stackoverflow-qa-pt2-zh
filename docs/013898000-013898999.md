# StackOverflow 问答 13898000-13898999

# java - 遍历 hashmap - 抛出异常

> ID：13898000
> 
> 赞同：0
> 
> 时间：2012-12-16T02:12:17.297
> 
> 标签：java, hashmap

这与我之前问过的一个问题有关： [遍历 hashmap 并创建唯一对象 - 试图防止重复](https://stackoverflow.com/q/13896528/1005450)

虽然我假设我可以为我的 add 方法的 remove 方法应用类似的逻辑，但我必须检查不存在的记录的异常被抛出，即使我非常清楚该记录存在并且应该被删除。我的删除方法如下：

```
 public boolean removePatron(int libraryCardNumber) throws PatronException {
    boolean patronRemoved = false;
    int keyToRemove = 0;
    for (Map.Entry<Integer, Patron> entry : patrons.entrySet()) {
        if (entry.getValue().getCardNumber() != libraryCardNumber) {
            throw new PatronException("This record does not exist");

        }
        keyToRemove = entry.getKey();
    }
    patrons.remove(keyToRemove);
    patronRemoved = true;
    return patronRemoved;
} 
```

作为参考，Patron 对象如下所示：

```
public class Patron {

//attributes
private String name = null;
private int cardNumber = 0;

//operations
public Patron (String name, int cardNumber){
    this.name = name;
    this.cardNumber = cardNumber;
}

public String getName(){
    return name;

}

public int getCardNumber(){
    return cardNumber;
}

 } 
```

我的测试只是先添加三个顾客，然后尝试通过我知道会存在的卡号将其删除。我在我的 add 方法中添加了赞助人号码的 println，这样我可以很容易地看到它们，同时在 eclipse 中添加它们时弄乱这个。

```
 @Test
public void testRemovePatron() {
    boolean exceptionThrown = false;
    try {
        testLibrary.addPatron("TestName");
        testLibrary.addPatron("TestName2");
        testLibrary.addPatron("TestName3");
        testLibrary.removePatron(1);
    } catch (PatronException e) {
        System.out.println(e.getMessage());
        exceptionThrown = true;
        fail("what the hell is going on");
    }
    assertFalse(exceptionThrown);
} 
```

我从每次抛出的 remove 方法中得到异常。

编辑：我对提供的答案做了一个小改动，以说明如果找不到匹配项则需要抛出异常：

```
 public boolean removePatron(int libraryCardNumber) throws PatronException {
    boolean patronRemoved = false;
    int keyToRemove = 0;
    for (Map.Entry<Integer, Patron> entry : patrons.entrySet()) 
    {
        if (entry.getValue().getCardNumber() == libraryCardNumber) 
        {
            keyToRemove = entry.getKey();
            patronRemoved = true;
        }
    }
    if (patronRemoved)
    {
        patrons.remove(keyToRemove);
    } else {
        throw new PatronException("This record did not exist");
    }
    return patronRemoved;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:31:43.403

由于以下代码，您会遇到异常

```
 if (entry.getValue().getCardNumber() != libraryCardNumber) {
        throw new PatronException("This record does not exist");

    } 
```

考虑 Map 中有 3 条记录 [0,1,2] 并且您传递`libraryCardNumber`为 1。您的条件仅第一次失败。注意 hashmap 不保证顺序，以顺序举例只是为了更好地理解

```
public boolean removeDuplicateCardNumber(int libraryCardNumber) {
    for (Iterator<Map.Entry<Integer, Patron>> i = myMap.entrySet()
            .iterator(); i.hasNext();) {
        Map.Entry<Integer, Patron> entry = i.next();
        if (entry.getValue().getCardNumber() == libraryCardNumber) {
            i.remove();
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:45:10.640

任何不是您要查找的用户的用户都会抛出异常。改变这个：

```
public boolean removePatron(int libraryCardNumber) throws PatronException{
    boolean patronRemoved = false;
    int keyToRemove = 0;
    for (Map.Entry<Integer, Patron> entry : patrons.entrySet()) {
        if (entry.getValue().getCardNumber() != libraryCardNumber) {
            throw new PatronException("This record does not exist");

        }
        keyToRemove = entry.getKey();
    }
    patrons.remove(keyToRemove);
    patronRemoved = true;
    return patronRemoved;
} 
```

对此：

```
public boolean removePatron(int libraryCardNumber) {
    boolean patronRemoved = false;
    int keyToRemove = 0;
    for (Map.Entry<Integer, Patron> entry : patrons.entrySet()) 
    {
        if (entry.getValue().getCardNumber() == libraryCardNumber) 
        {
            keyToRemove = entry.getKey();
            found = true;
        }
    }
    if (found)
    {
        patrons.remove(keyToRemove);
    }
    return patronRemoved;
} 
```

或者更简洁如 AmitD 所示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T02:21:37.657

```
 for (Map.Entry<Integer, Patron> entry : patrons.entrySet()) {
        if (entry.getValue().getCardNumber() != libraryCardNumber) {
            throw new PatronException("This record does not exist");

        }
        keyToRemove = entry.getKey();
    } 
```

有

```
if (entry.getValue().getCardNumber() != libraryCardNumber) {
        throw new PatronException("This record does not exist");

} 
```

因此，如果第一个条目与您的参数不匹配，则会引发异常。这就是为什么您会抛出自定义异常。逻辑有缺陷。

好吧，再看一遍，它可能比这更复杂一些，因为您没有提供添加条目的代码。但这将是我的第一个猜测......

编辑：

在我看来，您还想检查该值是否存在以及 ti 是否确实将其删除。你不必循环来实现这一点。

看看HashMap API 中的`containsKey`和`containsValue`方法。然后您可以简单地调用该`remove`方法。

此外，在阅读评论后，您应该评估`if (**entry.getKey()** != libraryCardNumber)`这比依赖可变值对象字段要干净得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T02:24:00.777

*if*语句（在for*循环*内）将不会匹配，除非有一条记录。该*if*语句必须移出*for*循环。

*if*块之后的语句也必须离开 for 循环。您不希望对 MAP 的每个成员都执行该操作，而只对地图的一个成员执行该操作。

试试 java.util.Map 的 containsKey 函数。

# objective-c - 计算两组坐标之间的距离（NSStrings）

> ID：13898001
> 
> 赞同：2
> 
> 时间：2012-12-16T02:12:40.507
> 
> 标签：objective-c, ios, xcode, nsstring, cllocationmanager

我有两组地理坐标，我正在尝试计算它们之间的距离。我已经做了一些挖掘，但不知道该怎么做。我正在尝试获取用户（userLatitude/userLongitude）和地点（placeLatitude/placeLongitude）之间的距离（以英里为单位）。我的坐标存储为 NSStrings，如下所示。有谁知道如何做到这一点？谢谢你们！

```
NSString *userLatitude =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate 
getUserLatitude];

NSString *userLongitude =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate 
getUserLongitude];

NSString *placeLatitude = [element1 objectForKey:@"placeLatitude"];

NSString *placeLongitude = [element1 objectForKey:@"placeLongitude"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T02:33:37.737

这可能会帮助你。尝试从您拥有的 lat long 创建 CLLocation

```
CLLocation* Location1;
CLLocation* Location2;
CLLocationDistance distance = [Location1 distanceFromLocation:Location2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T10:12:33.057

从下面你可以得到距离。

```
CLLocation *locA = [[CLLocation alloc] initWithLatitude:currentLocation.latitude longitude:currentLocation.longitude];

CLLocation *locB = [[CLLocation alloc] initWithLatitude:[[element1 objectForKey:@"placeLatitude"] doubleValue]  longitude:[[element1 objectForKey:@"placeLongitude"] doubleValue]];

CLLocationDistance currentDistance = [locA distanceFromLocation:locB]; 
```

# javascript - 鼠标悬停时显示链接

> ID：13898005
> 
> 赞同：2
> 
> 时间：2012-12-16T02:13:12.910
> 
> 标签：javascript, html

我有页面的某些区域，单击时会将用户重定向到某些地址。我的问题是，当用户“鼠标悬停”这些区域时，他们会看到一个指针，但不知道它链接到哪里。出于我的目的，重要的是用户知道他们被链接到哪里。我相信当您将鼠标悬停在链接上时，Google 会显示“假”链接。

我怎样才能做到这一点？没有实际`<a>`标签就不可能吗？

我目前正在使用`location.href="http://www.site.com"`重定向`"site"`存储在 javascript 数组中的用户，并根据鼠标位置进行更改。

编辑：链接应该显示在正常的鼠标悬停链接区域中 - 在 chrome 中，这是左下角 - 就像当您将鼠标悬停在普通链接上时，您会看到链接指向的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T02:25:42.267

我不相信如果不使用`<a>`标签这是可能的，你最好的希望是使用`title`属性来显示工具提示。

例如

```
<div title='www.google.co.uk' style='cursor:pointer'>
 This is my div!
</div> 
```

使用锚链接（如 Google 所做的那样），您可以执行以下操作：

```
<a href="http://www.mwhahaha.com"
   onmouseover="this.href='http://www.test.com';"
   onmouseout="this.href='http://www.mwhahaha.com';"
   onclick="this.href='http://www.mwhahaha.com';">Link</a>​​​​​​​ 
```

这将显示一个看起来像是要访问 www.test.com 的链接，但单击它实际上会访问 www.mwhahaha.com，尽管我不确定这是多么合法/良好的做法（仅在 Chrome 中测试过）。 ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:38:19.417

如果我没记错的话，谷歌会在活动`href`期间将链接更改为真实网址`mousedown`。尝试在将鼠标悬停在链接上时按下鼠标按钮，但在释放按钮之前将鼠标光标从链接上移开。当您再次将鼠标悬停在该链接上时，您应该会看到一个新的 URL。

我正在用手机接听，否则我会自己检查。他们现在的做法可能有所不同。

# node.js - Socket.io 无法正常工作

> ID：13898009
> 
> 赞同：-4
> 
> 时间：2012-12-16T02:14:15.467
> 
> 标签：node.js, socket.io

我制作了一个实时图表，显示每秒的系统负载。它在我的本地机器上运行良好，但是在我将它部署到服务器后，在数据从服务器发回之前有很长的延迟。另外，我除了每秒发送一次数据外，它以不规则的间隔发送数据。

```
io.sockets.on('connection',function (socket) {
    var sysinfo = setInterval(function(){
        socket.emit('system_info',{
            time:Date.now(),
            load:os.loadavg(),
            memory:os.totalmem()-os.freemem()
        });
    },3000);

    socket.on('disconnect',function(){
        clearInterval(sysinfo);
    });
}); 
```

[这是图表](http://licson-node.hp.af.cm/system/chart)

[这是源代码](http://licson-node.hp.af.cm/index.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:14:34.080

好吧，您已将其描述为“*每秒*”，但您的时间间隔设置为`3000`“*每**3**秒*”。

对于“*不规则间隔*”，不保证间隔是准确的。

来自[全球](http://nodejs.org/api/globals.html#globals_setinterval_cb_ms)：

> 请注意，实际间隔可能会有所不同，具体取决于操作系统计时器粒度和系统负载等外部因素。它永远不会少于`ms`但它可能会更长。

从[计时器](http://nodejs.org/api/timers.html#timers_setinterval_callback_delay_arg)：

> 重要的是要注意，您的回调可能不会在精确的`delay`毫秒内被调用 - Node.js 不保证回调触发的确切时间，也不保证触发的顺序。回调将被称为 close尽可能到指定的时间。

# vba - 为什么返回 Range 的 Excel/VBA 用户定义的默认属性不像 Range？

> ID：13898010
> 
> 赞同：9
> 
> 时间：2012-12-16T02:14:17.730
> 
> 标签：vba, excel

我正在编写的 Excel/VBA 类中的一个属性返回一个范围。[我使用http://www.cpearson.com/excel/DefaultMember.aspx](http://www.cpearson.com/excel/DefaultMember.aspx)中描述的技术将其设为该类的默认属性。我希望将 Range 类的所有内置属性和方法与我的类的对象一起使用，而无需明确指定属性。它不起作用。这里有几个更简单的类来说明。（这些清单是使用文本编辑器查看的导出源代码，因为 VBA 的编辑器隐藏了 Attribute 语句。）

```
' clsDefLong:    This class just verifies that default properties work as I expected.
Public Property Get DefProp() As Long
Attribute DefProp.VB_UserMemId = 0
    DefProp = 125
End Property

' clsDefRange:  This class is identical except the default property returns a Range.
Public Property Get DefProp() As Range
Attribute DefProp.VB_UserMemId = 0
    Set DefProp = ActiveCell
End Property 
```

这是一个普通模块中的 Sub 用于实例化和测试类。评论表明当我单步执行时会发生什么：

```
Sub DefTest()
    Dim DefRange As New clsDefRange, DefLong As New clsDefLong
    Debug.Print DefLong.DefProp         '(1) Displays 125\. Verifies the class behaves as intended.
    Debug.Print DefLong                 '(2) Same as (1). Verifies VBA uses the DefProp property as the default.
    Debug.Print DefRange.DefProp.Value  '(3) Displays the ActiveCell content. Verifies that this class works as intended.
    Debug.Print DefRange.DefProp        '(4) Same as (3). Verifies VBA knows DefProp returns a Range without further prompting.
    Debug.Print DefRange                '(5) Aborts with the messge "Run-time error '13': Type mismatch"
 End Sub 
```

为什么语句 (5) 中的 DefRange 的行为不像语句 (4) 中的 DefRange.DefProp？

如果我将语句 (5) 更改为：

```
Debug.Print DefRange.Cells(1, 1) 
```

编译器选择“.Cells”，说“编译错误：未找到方法或数据成员”并停止，因此问题出在对象模型中 - 而不仅仅是在运行时搞砸了。难道我做错了什么？还是不可能有一个返回范围的默认属性？其他内置类呢？用户定义的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T15:51:14.743

```
Debug.Print DefRange 
```

这似乎是您要求它链接默认属性，但它不会这样做。您只能从您提供的对象中提取默认属性。在这种情况下，您将返回一个无法打印的范围对象。VBA 不会进入下一个级别来查看默认属性是否返回一个对象以及该对象类型是否具有默认属性。我想如果是这样，您可以创建一个无限循环 - 两个对象每个都是另一个对象的默认属性的结果。

```
Debug.Print DefRange.Cells(1, 1) 
```

没有默认属性会将自身插入到点链中。我认为这是因为如果 DefRange 确实有自己的 Cells 属性，它会使用哪个？我想不出 Excel 模型中的任何对象都以这种方式运行。你可以用这个

```
Debug.Print DefRange(1,1) 
```

这似乎是链接默认属性的示例，我说过它不会这样做。我想这`(1,1)`足以再次启动链条。DefRange 返回范围对象，(1,1) 返回范围对象，并返回 Value（默认）属性。

有趣的问题。我想知道默认属性功能是故意以这种方式构建的，还是只是它的工作方式。

# java - MongoDB 聚合条件转换为 JAVA 驱动程序

> ID：13898014
> 
> 赞同：0
> 
> 时间：2012-12-16T02:15:03.457
> 
> 标签：java, mongodb, aggregation-framework

我对 MongoDB 比较陌生，我目前正在与 java 一起使用“通过大多数标签匹配查找”解决方案来查找集合中的信息。

我现在正试图将 MongoDB shell 操作转换为 JAVA 驱动程序版本（这个 sintaxis 是所需定义的一部分）

`$cond:[{$eq: ["$tags", 200]}, 1, 0]`

对于上面的句子，正确的 JAVA 实现是什么？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:35:54.747

无论聚合操作中的 $cond 对象是什么，构建它都应该执行以下操作：

```
BasicDBList eqList = new BasicDBList();
eqList.add("$tags");
eqList.add(200);

DBObject eqObject = BasicDBObjectBuilder.start()
    .add("$eq", eqList)
    .get();

BasicDBList condList = new BasicDBList();
condList.add(eqObject);
condList.add(1);
condList.add(0);

DBObject condObject = BasicDBObjectBuilder.start()
    .add("$cond", condList)
    .get(); 
```

我对您的聚合操作感到困惑，您能否提供更多详细信息？

# c++ - 如何正确设置随机数生成器？

> ID：13898016
> 
> 赞同：3
> 
> 时间：2012-12-16T02:15:39.010
> 
> 标签：c++, c, matlab, opencv, particle-filter

为了开发粒子滤波器算法的实现，我需要生成与要跟踪的对象相关的运动的假设：如果我设置*N*个样本并且如果我使用*2×1*状态向量，那么在每一步我必须生成*N*对随机值（一个*2×N*矩阵）。此外，如果我知道运动的统计数据（平均值和标准偏差），那么我可以使用平均值和标准偏差来生成所有 N 值。最后，为了模拟运动的不确定性，我可以生成一个噪声矩阵（一个*2×N*矩阵）并将其添加到运动矩阵中。

基于这些前提，我实现了在 matlab 中运行的算法，并使用以下代码来生成运动假设。

```
ds_mean = [dx_mean dy_mean];
ds_stddev = [dx_stddev dy_stddev];
d = 5;

V = zeros(2,N);
V(1,:) = normrnd(ds_mean(1),ds_stddev(1),1,N);   % hypotheses of movement on x axis
V(2,:) = normrnd(ds_mean(2),ds_stddev(2),1,N);   % hypotheses of movement on y axis

E = d*randn(2,N);   % weighted noise

M = V + E;   % hypotheses of movement 
```

当我不得不使用 C++ 和 OpenCV 实现相同的算法时出现了一个问题：基本上，虽然上面的 matlab 代码产生了很好的预测（它工作得很好），但用 C++ 编写的相同代码（见下面的代码）产生了很差的预测（即远离物体）。为什么？

```
RNG m_rng;

x_mean = // ...
y_mean = // ...
x_stddev = // ...
y_stddev = // ...

Mat velocity(STATE_DIM, NUM_PARTICLES, DataType<double>::type);
m_rng.fill(velocity.row(0), RNG::NORMAL, x_mean, x_stddev);
m_rng.fill(velocity.row(1), RNG::NORMAL, y_mean, y_stddev);

Mat noise(STATE_DIM, NUM_PARTICLES, DataType<double>::type);
m_rng.fill(noise,RNG::NORMAL,0,1);
noise *= d;   % weighted noise

movements = velocity + noise; 
```

如何确保 C++ 算法和 matlab 中实现的算法一样有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:29:11.533

我想我只是在这里偶然回答了你的问题，或者至少提供了一个替代解决方案。

[https://stackoverflow.com/a/13897938/1899861](https://stackoverflow.com/a/13897938/1899861)

我相信这会生成正确的随机数，并且在英特尔处理器（386、486、奔腾）上使用 Microsoft C 编译时已经过死测试。

仅供参考，4.0 * atan(1.0) 产生的 PI 值比上述环境中的常数要好得多。

# javascript - 如何将 Jscrollpage 集成到弹出内容？

> ID：13898018
> 
> 赞同：0
> 
> 时间：2012-12-16T02:16:06.997
> 
> 标签：javascript, popup

我有一个包含弹出窗口的 html 页面。弹出窗口包含基本内容。由于弹出内容超出屏幕高度，弹出窗口顶部无法预览。因此，我决定使用任何 javascript[滚动插件](http://jscrollpane.kelvinluck.com/)。

但我无法在弹出和滚动插件之间集成。

我能做些什么 ？

演示：[http ://www.heptasarim.com/test/cezayir](http://www.heptasarim.com/test/cezayir)

PS：弹出内容的所有部分目前是预览。但稍后会添加几张图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:34:01.053

如果您的问题是如何将 jScrollPane 添加到您的弹出窗口中，那么有两件事：

1.）在你`<div id="ab-orta"></div>`喜欢的地方设置一个高度`#ab-orta{height:500px;}`（否则它只会扩大）

2.) 在您的 div 上调用 jScrollPane 函数：`$('#ab-orta').jScrollPane();`

# java - JGoodies DefaultFormBuilder - 动态添加一行

> ID：13898021
> 
> 赞同：1
> 
> 时间：2012-12-16T02:16:22.083
> 
> 标签：java, swing, layout-manager, jgoodies

在我的表单中有一个`JComboBox`, 并且根据选择的内容，我想`JTextFields`在表单下方添加一些额外的行（标签和 ），`JComboBox`并将其余的字段推低许多行。JGoodies [`DefaultFormBuilder`](http://www.jarvana.com/jarvana/view/com/jgoodies/forms/1.2.0/forms-1.2.0-javadoc.jar!/com/jgoodies/forms/builder/DefaultFormBuilder.html)（或任何其他技术）是否可以做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:22:46.917

据我所知，没有合适的方法。所以我最终做的是为每个带有 BoderLayout 的字段创建一个 JPanel。然后我在表单中添加了我需要的最大字段数。然后，当我需要向下移动字段时，我会将它们从分配的 JPanel 中删除，并将它们循环推送到下面的那些。

不完全是最漂亮或最优雅的，但我根本找不到其他解决方案......

# php - 基于网络的零件库存设计

> ID：13898022
> 
> 赞同：-3
> 
> 时间：2012-12-16T02:16:26.187
> 
> 标签：php, mysql, web-applications

我是一名现场服务技术人员，我有一份零件库存，这些零件要么由我工作的公司发给我，要么通过特定工作的订单发给我。我正在尝试设计一个网站来管理我的零件，包括现有库存和已退回或转移给其他人的零件。这是我需要跟踪的信息：

*   零件编号（10位）
*   请求编号（8位，唯一）
*   描述（最多 50 个字符）
*   位置（货车或棚子）。
*   WorkOrder("w"+9 位 ex: 'W212141234')
*   BOL(15位提单#)
*   TransferDate（删除部分的日期）
*   TransferMethod（枚举'DEF'，'RTS'，'OBF'）

我可能会使用 PHP 创建一个网站并与 MySQL 数据库进行交互。

什么是最好的设计？一种多表方法还是一个带有仅显示某些字段查询的网页的表？我需要列出零件编号、请求编号、描述和位置的现有零件清单。我还需要能够拥有“有缺陷的退货”视图，该视图将列出我作为 DEF 退回的部分，并填写了所有剩余的字段。

除了“现有”字段外，其余字段在不再“现有”之前不会有数据。

我非常感谢任何帮助，因为我对 SQL 和 PHP 都是新手。我已经尝试过 Ruby on Rails 和 django，但我不确定此时是否需要解决所有这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:41:51.460

即使您提供了有关您的问题的一些信息，也很难真正接近它，因为“什么是最好的设计”的问题本身是模糊的。

我要做的是：

**MYSQL 表设计**

表零件

```
req number(int(8), unique, KEY) 
part number(int(10))
description(varchar(50))
location(enum 'Van','shed')
WorkOrder(varchar(10))
BOL(varchar(15))
TransferDate(date)
TransferMethod(enum 'DEF','RTS','OBF')
onhand (boolean) 
```

**PHP 脚本**

然后我会制作 2 个 php 脚本，每个脚本都有一个查询和一个显示信息的表格

onhand.php

```
select *fields filled for on hand parts* from parts where onhand = 1 
```

notonhand.php

```
select *fields filled for not on hand parts* from parts where onhand = 0 
```

# database - 如何处理这个数据库模式？

> ID：13898023
> 
> 赞同：0
> 
> 时间：2012-12-16T02:16:39.820
> 
> 标签：database, database-design

以 SO 为例，假设某个问题的`question`or`answer`被删除，但在被删除之前获得了一些赞成票。我想这些积分仍然授予作者（如果不是，让我们假设他们是），那么 SO 如何保持*准确*的声誉总数？

问题/答案是否实际上*并未*从数据库本身中删除，并且可能具有已处理并决定问题或答案是否可见的状态字段？

或者，它们实际上已被删除，并且声誉依赖于系统在计算每张选票时持续准确，并且不一定有它的历史记录（例如记录投票的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:35:54.340

据我所知，SO 使用软删除和硬删除的组合。我可以肯定地说，我已经失去了因发布者或版主删除的问题而获得的声誉。然而，这不是你问题的重点，所以......

如果您希望能够推断出准确的总数，特别是如果您希望能够计算该总数（SO 允许您通过查看积分历史记录的方式），那么您需要保留**交易信息**，而不是运行总数.

如果您希望点的事务日志具有参照完整性，那么您将需要使用软删除机制来隐藏“已删除”的问题。

如果您不保留交易日志并且您没有可软删除的问题来备份您的交易积分日志，那么您将无法重新计算或证明积分总数。您也将很难显示随着时间的推移获得的积分和随着时间的推移累积的声誉的图表。您可以通过保持每日点快照来制作这些图表，但这在存储方面会比仅跟踪上下投票更加繁重和昂贵。

# c# - Lambda“选择”

> ID：13898024
> 
> 赞同：3
> 
> 时间：2012-12-16T02:16:43.913
> 
> 标签：c#, asp.net

我有一个看起来像这样的通用字符串列表：

```
List<string> list = new List<string>();

list.Add("foo");
list.Add("1");
list.Add("2");
list.Add("bar");
list.Add("foo");
list.Add("1");
list.Add("2");
list.Add("3");
list.Add("bar"); 
```

我想知道的是是否有任何方法可以选择两个值之间的内容。在这种情况下，我在“1”、“2”和“3”之后。所以换句话说，我想选择最后一个“foo”和“bar”之间的所有内容。或者如果这更容易，也许在“foo”之后选择 N 行。

我最好的猜测是`TakeWhile`方法，但我需要你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:21:42.773

使用 LINQ获取*最后*一个通常有点棘手。我只是去`LastIndexOf`那部分，因为你有一个`List`，毕竟：

```
int end = list.LastIndexOf("foo");

list.Skip(end + 1).TakeWhile(x => x != "bar") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T02:25:40.697

我会使用这样的东西（如果“bar”并不总是出现在“foo”之后）：

```
var start = list.FindLastIndex(i => i == "foo");
var end = list.FindLastIndex(i => i == "bar");

if(start != -1 && end != -1){
    var result = list.Skip(start + 1).Take(end - start - 1);
} 
```

或这个：

```
var start = list.FindLastIndex(i => i == "foo");
var end = list.FindLastIndex(i => i == "bar");

if(start != -1 && end != -1){
    var result = list.GetRange(start + 1, end - start - 1);
} 
```

# haskell - CL中是否存在与#'asdf:system-relative-pathname类似的东西？

> ID：13898026
> 
> 赞同：0
> 
> 时间：2012-12-16T02:16:54.330
> 
> 标签：haskell

在 Common Lisp 中，我们可以使用

```
(namestring (asdf:system-relative-pathname 'money "money.dat")) 
```

得到的绝对路径`money.dat`。这非常方便，因为该数据文件与位置无关。

假设有一个`Money.hs`模块`money.dat`在同一目录中操作数据文件`DIR-1`。因为它使用的是相对路径，所以我必须`cd DIR-1`让`money.dat`这个模块可见。现在如果我`ghc-pkg register`这个模块，无论当前目录在哪里，我都`money.dat`可以看到吗？`Money.hs`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T21:04:39.943

`data-dir`根据 hammar 的评论，我们可以在我们的文件中设置一个`.cabal`包含数据文件的文件，这些数据文件在打包时部署`cabal install`。然后，使用[Cabal 手册中](https://www.haskell.org/cabal/users-guide/developing-packages.html#accessing-data-files-from-package-code)的说明，我们可以以编程方式从我们安装的库中访问这些文件。

# jquery - jquery ui sortable：无法使用取消方法输入输入字段

> ID：13898027
> 
> 赞同：3
> 
> 时间：2012-12-16T02:16:55.890
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

在实现方法之后，我不能再使用**输入字段**来输入数据。`cancel``sortable`

```
$(function() {
            $( ".sortable" ).sortable({
                connectWith: ".connected-sortable",
                cancel: ".not-sortable",
                update: function(){

                // php update...
                }
            });
});​ 
```

所有输入字段都可以正常工作，**不** `cancel`知道如何解决这个问题？或者，也许我在 html 代码中犯了一些错误，等等？

这是测试页面 -

[jsfiddle](http://jsfiddle.net/VqB2u/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:55:00.490

这真的很奇怪，而且可能有点痛苦。

我想出了一个解决方法，但这不是最干净的。

```
$('input').on('click', function(e) {
    $(this).trigger({
        type: 'mousedown',
        which: 3
    });
});

$('input').on('mousedown', function(e) {
    if(e.which == 3){
        $(this).focus();   
    }
}); 
```

基本上，在上面，我们检测到点击。该事件仍然触发，所以我们触发 mousedown 并声明 3 中的哪一个，这是右键单击，因为由于某种原因右键单击有效。然后在我们触发的 mousedown 中，我们检测它是否是右键单击，如果是，我们将聚焦元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T03:05:21.437

一个好的解决方案是设置`handle`选项。将要求您在您的内部创建一个`LI`不在`input`. 该元素将充当拖动手柄

# php - 了解 CodeIgniter 对象和多维数组

> ID：13898028
> 
> 赞同：0
> 
> 时间：2012-12-16T02:17:04.303
> 
> 标签：php, arrays, object, multidimensional-array, codeigniter-2

我正在 CodeIgniter 2 中开发一个项目，现在我停留在最基本的概念上。

**模型：**

从我的表中获取一个对象数组，其中包含与名为 的字段的特定值匹配的所有行`foo`。可以有一个或多个匹配的行。在这个例子中，两行。

```
public function get_sample($foo)
{
    $query = $this->db->get_where('sample_db', array('foo' => $foo));

    return $query->result();
} 
```

**控制器：**

分配结果并使输出可供查看。

```
public function view($foo)
{
    $data['array'] = $this->sample_model->get_sample($foo);

    $this->load->view('view', $data);
} 
```

**看法：**

```
echo var_dump($array); // for testing

echo $array[1]->text 
```

**`var_dump()`的`$array`：**

```
array(2) {
    [0]=> object(stdClass)#23 (4) {
        ["id"]=> string(1) "1"
        ["foo"]=> string(3) "bar"
        ["number"]=> string(4) "1234"
        ["text"]=> string(23) "This is content in 1234"
    }
    [1]=> object(stdClass)#24 (4) {
        ["id"]=> string(1) "2"
        ["foo"]=> string(3) "bar"
        ["number"]=> string(4) "9999"
        ["text"]=> string(23) "This is content in 9999"
    } 
} 
```

的渲染输出`echo $array[1]->text;`为：`This is content in 9999`

而且我了解这一切是如何工作的： 是数组对象中字段`$array[1]->text`的内容，索引为，我的第二个对象。`text``1`

但是，我有一个名为的字段`number`，我想以特定的方式访问该对象`number`并获取其相应的`text`值。

**示例：**如何检索`text`where the `number`is的值`9999`？我不能使用`$array[1]->text`，因为我永远无法确定对象在数组中的位置。类似的东西`$array['number' => '9999']->text`，但我知道这是不对的。也许我需要遍历数组寻找匹配项？

这看起来很简单，但我尝试过的一切都失败了，并导致了各种 PHP 错误。我一直在研究 PHP 手册[here](http://php.net/manual/en/language.types.array.php)和[here](http://php.net/manual/en/language.types.object.php)，但似乎找不到任何关于我想要做什么的信息，或者我只是误用了我正在阅读的内容。任何指导表示赞赏。

除了使用遵循 MVC 模型的最佳实践的答案之外，我还希望有一个指向文档中正确页面的链接，并指出我上面的措辞/术语中的任何错误。

* * *

**编辑：**

[这个答案](https://stackoverflow.com/a/13905837/594235)包含我用来解决我的问题的实际代码。虽然，[八木的回答](https://stackoverflow.com/a/13898189/594235)被接受了，因为它让我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:49:45.157

如何使用这个：

```
foreach ($array as $row) {
        if ($row->number == '9999') {
            echo $row->text;
        }
    } 
```

遍历数组，找到数字对象值9999，得到文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:25:19.410

你可能正在寻找这样的东西......

```
array_filter($array, function($o){ return $o->number == 9999; } ); 
```

[http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

**编辑**

$o 是回调函数中的参数。数组的每个元素都传递给回调函数。如果函数返回 false，则该元素将被过滤掉。

```
$arr = array(
    (object) array(
        'num' => 33,
        'text' => 'hello',
    ),
    (object) array(
        'num' => 44,
        'text' => 'world',
    ),
);
$filtered = array_filter($arr, function($o){ return $o->num == 33; });
echo $filtered[0]->text; // hello 
```

如您所述，索引将保留，因此请使用 array_values 或 array_shift。这是一个函数的例子

```
function get_by_num($arr, $num){
    return array_shift(array_filter($arr, function($o) use ($num) { return $o->num == $num; }));
}
$obj = get_by_num($arr, 44);
var_dump($obj);
// object(stdClass)#2 (2) { ["num"]=> int(44) ["text"]=> string(5) "world" } 
```

在这种情况下，如果未找到元素，$obj 将为 NULL，或者第一个匹配项。$num 被转移，所以你可以使用任何值。你甚至可以改进它：

```
function get_first_match($arr, $field, $val){
    return array_shift(array_filter($arr, function($o) use ($field, $val) { return $o->{$field} == $val; }));
}
$obj = get_first_match($arr, 'num', 44); 
```

现在您可以搜索任何字段。在你的情况下

```
$obj = get_first_match($array, 'number', 9999); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T02:35:05.367

您为什么不直接查询并搜索该号码（或按该号码排序？）

无论哪种方式，您需要的是一个多维数组搜索函数（迭代对象数组并返回找到的字段值组合）

像这样的东西（把它放在助手中）

```
function multi_array_search($array, $field, $value) 
 { 
     $results = array(); 

     if (is_array($array)) 
     { 
         if ($array->$field == $value)  //chek the filed against teh value, you can do addional check s(i.e. if field has been set)

             $results[] = $array; 

         foreach ($array as $subarray) 
             $results = array_merge($results,  multi_array_search($subarray, $key, $value));  //recurisve serach
     } 

     return $results; 
 }

    //than in view or in controller, depending where you need it

   $result  = multi_array_search($array, "number", "9999"); 
```

`var_dump($result`) 将返回或是否创建实例数

```
array() {
    [0]=> object(stdClass)#24 (4) {
        ["id"]=> string(1) "2"
        ["foo"]=> string(3) "bar"
        ["number"]=> string(4) "9999"
        ["text"]=> string(23) "This is content in 9999"
    } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T21:53:23.687

感谢[八木的回答](https://stackoverflow.com/a/13898189/594235)，我想出了以下非常简单的解决方案。我遍历数组并将 的值分配给`text`索引与 的值匹配的新数组`number`。然后在视图文件中，我可以`text`根据这个索引访问值。

**控制器：**

```
public function view($foo)
{
    $data['array'] = $this->sample_model->get_sample($foo);

    foreach ($data['array'] as $row) {
        $data['result'][$row->number] = $row->text;
    };

    $this->load->view('view', $data);
} 
```

**看法：**

```
if (isset($result[9999])) echo $result[9999]; 
```

# visual-studio - 视觉工作室 2012 智能感知颜色

> ID：13898030
> 
> 赞同：2
> 
> 时间：2012-12-16T02:17:55.357
> 
> 标签：visual-studio, colors, intellisense, marker, indicator

我想要的是更改 ActionResult 字母 A 下指示器的颜色。我检查了工具->选项->文本编辑器下的所有内容。我当前的设置都没有设置为这种蓝色。有谁知道在哪里改变它，或者它是不可定制的？

我是新用户，无法发布图片。我的截图可以在[http://i.stack.imgur.com/ibUSZ.png找到](http://i.stack.imgur.com/ibUSZ.png)

我不确定其他人是否已经问过这个问题，因为我真的不知道如何调用这个指标。

# objective-c - xcode中的UISlider

> ID：13898034
> 
> 赞同：1
> 
> 时间：2012-12-16T02:18:10.420
> 
> 标签：objective-c, xcode

我想知道是否有人知道如何将文本字段与滑块连接起来。我希望滑块列出 1-100 或 1-1000 的数字。我已经看过一些地方，但对于我正在寻找的东西没有真正的答案。您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:34:37.190

视图控制器.h

```
@interface ViewController : UIViewController {

    IBOutlet UISlider *mySlider;
    IBOutlet UITextField *myTextField;      
}
@property (nonatomic, retain) IBOutlet UISlider *mySlider;
@property (nonatomic, retain) IBOutlet UITextField *myTextField;

- (IBAction) sliderValueChanged:(id)sender;
- (IBAction) changeButtonPressed:(id)sender; 
```

视图控制器.m

```
 #import "ViewController.h"

    @implementation TutorialProjectViewController

    @synthesize mySlider, myTextField;

    - (void)viewDidLoad {

     [super viewDidLoad];
    self.myTextField.delegate = self;

    }

    - (IBAction) sliderValueChanged:(UISlider *)sender {
        myTextField.text = [NSString stringWithFormat:@" %.1f", [sender value]];
    }

    - (IBAction) changeButtonPressed:(id)sender {
        NSString *textValue = [myTextField text];
        float value = [textValue floatValue];
        if (value < 0) value = 0;
        if (value > 100) value = 100;
        mySlider.value = value;
        myTextField.text = [NSString stringWithFormat:@"%.1f", value];

    }

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [myTextField resignFirstResponder];
    //[put your textfield name here resignFirstResponder];
    return NO;
}

    @end 
```

更改滑块值：

![在此处输入图像描述](../Images/26609663cda45f05bae8e8aa118291de.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:35:51.523

我假设您想在更改滑块时更新文本字段的文本。

你没有把两者联系起来。您需要监听滑块值的变化。在为此设置的方法中，您需要将滑块的值转换为所需的文本。然后，您可以根据滑块的值使用此新文本更新文本字段的文本。

滑块的挂钩：

```
[someSlider addTarget:self action:@selector(sliderUpdate:) forControlEvents:UIControlEventValueChanged]; 
```

监听滑块的方法：

```
- (void)sliderUpdate:(UISlider *)slider {
    float newVal = slider.value;

    NSString *newText = [NSString stringWithFormat:@"%d", (int)newVal];

    someTextField.text = newText;
} 
```

此代码假定在 ivar 中引用了滑块，并且在`someSlider`ivar 中引用了文本字段`someTextField`。它还假设滑块`minimumValue`为 0，`maximumValue`根据需要为 100 或 1000。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T21:29:11.497

```
#import "FirstViewController.h"

@interface FirstViewController ()

@property (weak, nonatomic) IBOutlet UITextField *myTextBox;
@property (weak, nonatomic) IBOutlet UISlider *mySlider;
@property (weak, nonatomic) IBOutlet UINavigationBar *titleOnTop;
@property (weak, nonatomic) IBOutlet UIBarButtonItem *backButton;
- (IBAction)changeGreeting:(id)sender;
- (IBAction)sliderValueChanged:(id)sender;
- (IBAction)changeButtonPressed:(id)sender;

@end

@implementation FirstViewController

@synthesize mySlider, myTextBox;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.myTextBox.delegate = self;
}

- (IBAction) sliderValueChanged:(UISlider *)sender
{
    myTextBox.text = [NSString stringWithFormat:@"%.1f", [sender value]];
}

- (void)sliderUpdate:(UISlider *)slider {
    float newVal = slider.value;

    NSString *newText = [NSString stringWithFormat:@"%d", (int)newVal];

    myTextBox.text = newText;
}

- (IBAction) changeButtonPressed:(id)sender
{
    NSString *textValue = [myTextBox text];
    float value = [textValue floatValue];
    if (value < 0) value = 0;
    if (value > 1000) value = 1000;
    mySlider.value = value;
    myTextBox.text = [NSString stringWithFormat:@"%.1f", value];
    if ([myTextBox canResignFirstResponder]) [myTextBox resignFirstResponder];
}

- (void) touchesBegan: (NSSet *) touches withEvent: (UIEvent *) event
{
    if (myTextBox)
    {
        if ([myTextBox canResignFirstResponder]) [myTextBox resignFirstResponder];
    }
    [super touchesBegan: touches withEvent: event];
}

/*
 // The designated initializer. Override to perform setup that is required before the view is loaded.
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
 if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
 // Custom initialization
 }
 return self;
 }
 */

/*
 // Implement loadView to create a view hierarchy programmatically, without using a nib.
 - (void)loadView {
 }
 */

/*
 // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
 - (void)viewDidLoad {
 [super viewDidLoad];
 }
 */

/*
 // Override to allow orientations other than the default portrait orientation.
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 // Return YES for supported orientations
 return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }
 */

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidUnload
{
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (IBAction)changeGreeting:(id)sender {

    self.username = self.myTextBox.text;

    NSString *nameString = self.username;
    if ([nameString length] == 0) {
        nameString = @"World";
    }
   }

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [myTextBox resignFirstResponder];
    return YES;
}

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T23:02:37.807

```
 #import "FirstViewController.h"

    @interface FirstViewController ()

    @property (weak, nonatomic) IBOutlet UITextField *myTextBox;
    @property (weak, nonatomic) IBOutlet UISlider *mySlider;
    @property (weak, nonatomic) IBOutlet UINavigationBar *titleOnTop;
    @property (weak, nonatomic) IBOutlet UIBarButtonItem *backButton;
    - (IBAction)changeGreeting:(id)sender;
    - (IBAction)sliderValueChanged:(id)sender;
    - (IBAction)changeButtonPressed:(id)sender;
    - (IBAction)backgroundTouched:(id)sender;
    - (IBAction)textFieldReturn:(id)sender;

    @end

    @implementation FirstViewController

    @synthesize mySlider, myTextBox;

    - (IBAction)backgroundTouched:(id)sender;
    {
        [myTextBox resignFirstResponder];
    }

    - (IBAction)textFieldReturn:(id)sender;
    {
        [sender resignFirstResponder];
    }
    - (void)viewDidLoad
    {
        [super viewDidLoad];
        self.myTextBox.delegate = self;
    }

    - (IBAction) sliderValueChanged:(UISlider *)sender
    {
        myTextBox.text = [NSString stringWithFormat:@"%.1f", [sender value]];
    }

    - (void)sliderUpdate:(UISlider *)slider {
        float newVal = slider.value;

        NSString *newText = [NSString stringWithFormat:@"%d", (int)newVal];

        myTextBox.text = newText;
    }

  - (void)textFieldDidChange:(UITextField*)sender { slider.value = [sender.text floatValue]; } 

    - (IBAction) changeButtonPressed:(id)sender
    {
        NSString *textValue = [myTextBox text];
        float value = [textValue floatValue];
        if (value < 0) value = 0;
        if (value > 1000) value = 1000;
        mySlider.value = value;
        myTextBox.text = [NSString stringWithFormat:@"%.1f", value];
        if ([myTextBox canResignFirstResponder]) [myTextBox resignFirstResponder];
    }

    - (void) touchesBegan: (NSSet *) touches withEvent: (UIEvent *) event
    {
        if (myTextBox)
        {
            if ([myTextBox canResignFirstResponder]) [myTextBox resignFirstResponder];
        }
        [super touchesBegan: touches withEvent: event];
    }

    /*
     // The designated initializer. Override to perform setup that is required before the view is loaded.
     - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
     if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
     // Custom initialization
     }
     return self;
     }
     */

    /*
     // Implement loadView to create a view hierarchy programmatically, without using a nib.
     - (void)loadView {
     }
     */

     // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
     - (void)viewDidLoad {
     [super viewDidLoad];

[self.textField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];

     }

    /*
     // Override to allow orientations other than the default portrait orientation.
     - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
     // Return YES for supported orientations
     return (interfaceOrientation == UIInterfaceOrientationPortrait);
     }
     */

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    - (void)viewDidUnload
    {
        // Release any retained subviews of the main view.
        // e.g. self.myOutlet = nil;
    }

    - (IBAction)changeGreeting:(id)sender {

        self.username = self.myTextBox.text;

        NSString *nameString = self.username;
        if ([nameString length] == 0) {
            nameString = @"World";
        }
       }

    - (BOOL)textFieldShouldReturn:(UITextField *)textField {
        [myTextBox resignFirstResponder];
        return NO;
    }

    @end 
```

# php - 网站在 DateTime::createFromFormat 之后停止显示

> ID：13898037
> 
> 赞同：0
> 
> 时间：2012-12-16T02:18:27.947
> 
> 标签：php, datetime

我有一段代码

```
 $date = dateTime::createFromFormat('Y-m-d', $sel_event['date']);
    $output_date = $date->format('F j, Y'); 
```

当我在我的本地主机服务器上运行该页面时，它工作正常。但是如果我将它上传到我的 linux bluehost 服务器，它不会在那之前的代码行之后在整个站点上显示任何其他内容。当我将这些行注释掉时，一切都显示完美..这里有更多代码。任何可以帮助我的人，在此先感谢。

```
 <div id="headliner">
    <h2><?php echo $sel_event['title'] . " At " . $sel_event['venue']; ?></h2>
    <?php 
    $date = dateTime::createFromFormat('Y-m-d', $sel_event['date']);
    $output_date = $date->format('F j, Y');
    ?>
    <h2><?php echo $sel_event['hotel'] . " | " . $output_date; ?></h2>
    </div><!-- close #headliner --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:43:29.387

`DateTime::createFromFormat()`仅在 PHP >= 5.3.0 中可用，您可能想尝试`phpinfo();`在主机上运行以查看它们正在运行的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:43:38.803

您的脚本可能由于调用 datetIme 时出现致命错误而死亡。[DatTime](http://php.net/manual/en/datetime.createfromformat.php)是 PHP 5.3 >= 函数。检查服务器上的 PHP 版本

# php - 基于磁盘的 APC 替代方案？

> ID：13898039
> 
> 赞同：1
> 
> 时间：2012-12-16T02:19:05.857
> 
> 标签：php, caching, apc

我真的很喜欢 PHP 的 APC 缓存模块的易于实现和功能。在我正在开发的网站中，我一直在使用它来缓存来自远程服务器的 json 响应（用于库存等）。但是，我现在正在执行许多不同的请求（数千个），我想缓存这些请求，并且我担心为此目的浪费内存。

我知道我*可以*编写一些 MYSQL 处理程序来将结果存储在数据库中，但似乎这将是我相当大的时间投资，特别是如果避免它的方法已经存在的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:28:33.473

我讨厌成为理性的声音，但是这样的事情有什么问题（好吧，我意识到它过于简化了，应该检查以防文件在读取时仍在写入）：

```
function get_json($id) {
    $fn = './json-cache/' . $id . '.json';
    if(file_exists($fn)) {
        return file_get_contents($fn);
    } 

    $json = do_something_to_get_json();
    file_put_contents($fn, $json, LOCK_EX);
    return $json;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:26:10.190

这完全取决于您需要缓存多少请求以及为什么需要缓存它们。如果只是几个，通过 Memcached 之类的东西将它们缓存在内存中将非常简单（并且是临时的）。此外，您可以设置 memcached 使用的 RAM 量，以免内存不足。

如果您只是为了速度而进行缓存，那么将它们从驱动器中拉出来并不会比重新轮询 Web 服务快得多。

如果您正在为持久性进行缓存（如果您正在轮询的 Web 服务出现故障），那么您最好使用 MySQL 甚至 MongoDB 之类的东西。特别是使用 Mongo 会很好，因为您不需要模式，并且可以将 JSON 对象塞入一个集合中，然后再将它们拉出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T03:12:50.767

为了回答我自己的问题，[Pear:Cache-Lite](http://pear.php.net/manual/en/package.caching.cache-lite.intro.php)可以解决问题。

# css - 设置输入写入空间

> ID：13898050
> 
> 赞同：0
> 
> 时间：2012-12-16T02:22:29.450
> 
> 标签：css

**我有输入，其通过放置在输入的最右侧（输入内部**）的绿色 tic 或红色十字进行验证。

如果我写了很多文字，图片会与文字重叠。有没有办法在不限制可以输入的字符的情况下指定输入的书写空间？为了防止用户输入的文本到达输入中的图片？

我觉得解释不是很清楚，所以我将尝试举一个例子：

这应该是一个输入：

```
|______________________| 
```

验证图片如下所示：

```
|___________________ x | 
```

我希望能够在输入中写入，直到`:`：

```
|_________________ : __| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:25:31.373

将其设置为`padding-right`：

```
padding-right: 1.4em; /* However wide your image is, plus some extra padding */ 
```

这应该有效，无论它是`background-image`覆盖在文本框上的元素还是其他元素。

# javascript - 无法在 Javascript 中删除 div

> ID：13898051
> 
> 赞同：3
> 
> 时间：2012-12-16T02:22:43.763
> 
> 标签：javascript

我正在尝试删除 Javascript 中的 div，但它不起作用。我的控制台中没有错误，但该函数确实被调用了。

我不明白我做错了什么，所以我希望有人能解释一下。这是它的工作原理：

```
function menu_load(type){
  document.getElementById(type).onclick = function(){ menu_unload(type); }
  var width = 100;
  var height = 100;
  var d = document.createElement('div');
  d.id = 'menu';
  d.className = 'menu';
  d.style.width = width + 'px';
  d.style.height = height + 'px';
  document.getElementById('G').appendChild(d);
}

function menu_unload(type){
  alert('test'); //this displays
  var div = document.getElementById("menu");
  div.parentNode.removeChild(div); // doesn't remove the div
  document.getElementById(type).onclick = menu_load(type);
}

window.onload = function(){
  menu_load('test');
} 
```

这里有什么我错过的错误吗？我只是无法解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T02:36:16.970

如果我更正以下行，您的代码对我有用：

```
document.getElementById(type).onclick = menu_load(type); 
```

哪个错误地调用`menu_load()`并尝试将结果分配给`.onclick`. 它应该就像你在其他功能中所做的那样

```
document.getElementById(type).onclick = function() { menu_load(type); }; 
```

演示：http: [//jsfiddle.net/MCZza/](http://jsfiddle.net/MCZza/)

~~老实说，我不知道为什么要修复它，因为~~您的代码实际上并不是语法错误，*而是因为它调用* `menu_load()` *它重新创建了刚刚删除的 div。* ~~这`.removeChild()`条线应该首先发生，但无论如何......~~

# c++ - 命名空间中的 C++ 前向声明和友谊

> ID：13898053
> 
> 赞同：6
> 
> 时间：2012-12-16T02:22:54.810
> 
> 标签：c++, namespaces, friend, access-control, forward-declaration

根据 C++ 标准 ISO/IEC 14882:2003(E) 中的 7.3.1.2 命名空间成员定义

> 在命名空间中首先声明的每个名称都是该命名空间的成员。如果非本地类中的友元声明首先声明了一个类或函数（这意味着类或函数的名称是不合格的），则友元类或函数是最内层封闭命名空间的成员。

```
// Assume f and g have not yet been defined.
void h(int);
template <class T> void f2(T);
namespace A {
   class X {
   friend void f(X);  //  A::f(X) is a friend
      class Y {
         friend void g();  //  A::g is a friend
         friend void h(int);  //  A::h is a friend
         //  ::h not considered
         friend void f2<>(int);  //  ::f2<>(int) is a friend
      };
   };
   //  A::f, A::g and A::h are not visible here
   X x;
   void g() { f(x); }  // definition of A::g
   void f(X) { /* ... */}  // definition of A::f
   void h(int) { /* ... */ }  // definition of A::h
   //  A::f, A::g and A::h are visible here and known to be friends
} 
```

由于`void h(int);`首先在全局命名空间中声明，因此它是全局命名空间的成员。为什么要考虑`friend void h(int);`而不是考虑朋友声明？`class Y``A::h``::h`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:53:38.747

在该段的末尾，它指出：

> 在查找声明为友元的类或函数的先前声明时，并且当友元类或函数的名称既不是限定名称也不是模板 ID 时，不考虑最内层封闭命名空间之外的范围。

这就是`::h`不考虑的原因：它既不是限定名称也不是模板 ID。这也是考虑 '::f2' 的原因，因为它是一个模板 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T04:06:12.137

我认为内部声明会影响全局命名空间中的声明。此外，友元声明本身是前向声明，因此它们会影响全局命名空间中的那些，而不仅仅是“引用”这些函数。

参考N3485中的3.3.10.1“名称隐藏”：

> 可以通过在嵌套声明区域或派生类 (10.2) 中显式声明相同名称来隐藏名称。

11.3.4 朋友：

> 在友元声明中首次声明的函数具有外部链接（3.5）。否则，该函数将保留其先前的链接（7.1.1）。

看 3.5.2：

> 当一个名称具有外部链接时，它所表示的实体可以被其他翻译单元的范围或同一翻译单元的其他范围的名称引用。

# iphone - 是否有任何 ios 图形库具有内置的“爆炸”效果？

> ID：13898056
> 
> 赞同：1
> 
> 时间：2012-12-16T02:23:07.883
> 
> 标签：iphone, ios, graphics, core-image

给定一个 UIImage，我想把它“分解”成一堆小块作为一个可爱的动画。凸版印刷有这样的东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:04:40.303

对于 3D 效果，您应该使用 OpenGL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:41:30.467

现在有一个图书馆可以做到这一点。它的麻省理工学院也获得了许可。你可以在这里抓住它：[https ://github.com/vibrazy/letterpressexplosion](https://github.com/vibrazy/letterpressexplosion)

# java - AWS 错误消息：冲突的条件操作当前正在针对此资源进行

> ID：13898057
> 
> 赞同：194
> 
> 时间：2012-12-16T02:23:19.297
> 
> 标签：java, amazon-web-services, amazon-s3

我间歇性地收到此错误。

我有一个程序，它使用 java aws sdk 并将成千上万的小文件加载到 s3。我间歇性地看到这个错误。

在互联网上快速搜索后找不到任何有用的答案。

注意调用程序是单线程的。底层的 aws java sdk 似乎确实使用了工作线程。

```
Status Code: 409, AWS Service: Amazon S3, AWS Request ID: 75E16E8DE2193CA6, AWS Error Code: OperationAborted, AWS Error Message: A conflicting conditional operation is currently in progress against this resource. Please try again., S3 Extended Request ID: 0uquw2YEoFamLldm+c/p412Lzd8jHJGFBDz3h7wN+/4I0f6hnGLkPMe+5LZazKnZ
    at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:552)
    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:289)
    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:170)
    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2648)
    at com.amazonaws.services.s3.AmazonS3Client.createBucket(AmazonS3Client.java:578)
    at com.amazonaws.services.s3.AmazonS3Client.createBucket(AmazonS3Client.java:503) 
```

* * *

## 回答 #1

> 赞同：488
> 
> 时间：2013-05-14T21:20:27.560

当我执行以下操作时，我收到了相同的错误消息：

1.  创建了一个存储桶 - 默认情况下它转到美国区域（使用 AWSCLI）

2.  意识到，桶应该去欧盟地区并删除它（使用AWS控制台）

3.  （几分钟后）尝试创建存储桶，指定欧盟地区

在第 3 步，AWS 控制台向我显示了来自您问题标题的错误消息。

所以我猜，美国的桶被删除了，但可能有一些同步过程，这需要时间。我希望，等待几个小时后，我会再次找到可用于创建的存储桶名称 - 这次是在适当的（欧盟）区域。

**FIX :- 编辑：大约一个小时后，我尝试创建存储桶（在欧盟地区）成功。**

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-01-07T08:45:10.930

对于从谷歌偶然发现此线程的所有其他人，作为搜索此错误消息的第一个结果：

如果您删除了存储桶，要在新区域中重新创建，**请不要“手动”等待此后台同步完成**，而是放置一个小型 bash 脚本运行并每 5 秒左右重试您需要的存储桶创建。

例子：

```
#!/bin/bash 
RESULT=2 
until [  $RESULT -eq 0 ]; do
    aws s3 mb s3://your.bucket.name --region us-west-2
    RESULT=$?
    sleep 5 
done 
echo "Bucket created!" 
```

它会每隔几秒重试一次“创建存储桶”操作（取决于“睡眠”），并且会尽快为您创建它，因此没有人可以错误地窃取您的存储桶名称:)

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-12-16T09:23:20.770

您的示例中的请求是创建一个存储桶。如果您尝试创建太多存储桶或替换存储桶，则它不健康。

请注意，您的帐户限制为 100 个存储桶（请参阅[此处](http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html)）。编辑：现在这个限制是一个“软限制”，如果需要，你可以增加它。

另请注意，创建存储桶需要时间，并且：

> ...在应用程序的高可用性代码路径上进行存储桶创建或删除调用是不合适的...

最好是创建一次存储桶，然后您可以将任意数量的对象放入现有存储桶（甚至一个）中。

无论如何，当使用一个注定会不时失败的系统时，您应该能够处理错误并在收到此类错误时减慢您的进程。[在AWS Docs](http://docs.aws.amazon.com/AmazonS3/latest/dev/ErrorBestPractices.html)中查看更多详细信息。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-03-03T21:55:55.007

此错误通常发生在删除 Bucket 并创建与旧 Bucket 同名的新 Bucket 时。

我相信我们需要等待一段时间才能创建一个同名的新存储桶。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-03-18T07:04:11.413

**简单明了：**更改新的存储桶名称或等待 1 小时。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-03-01T11:03:23.593

最后，AWS 现在在自己的知识中心有了明确的答案，见[https://aws.amazon.com/premiumsupport/knowledge-center/s3-conflicting-conditional-operation/](https://aws.amazon.com/premiumsupport/knowledge-center/s3-conflicting-conditional-operation/)。

我刚刚删除了一个存储桶（因为 S3 存储桶名称是全局唯一的，我需要在另一个 AWS 账户中创建相同的存储桶）并且我创建具有相同名称的存储桶的脚本失败并出现相同的错误。所以我必须耐心等待一个小时。

**作为确认：**大约一个小时后，我可以成功创建一个与已删除存储桶同名的存储桶。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-24T04:31:41.397

当您的账户中已有超过 100 个存储桶时，您也会收到此消息。有 100 个存储桶的软限制。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-07T15:27:40.547

更改您的存储桶名称或等待。我等了不到 30 分钟。我不需要更改名称，也无法更改它，因为我已经设置好了 - 它必须与我已经存在的域名相匹配，以用于我正在寻找托管的静态网站。无论如何，在不到 30 分钟的时间内，它就自动创建了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-28T04:18:15.017

我在运行 Cloud Formation 模板时遇到错误。

原来 EC2 假设我正在运行 CFN 模板的 IAM 角色没有创建 S3 存储桶的权限。

提供 IAM 访问权限，或通过执行`AWS Configure`或以[编程](https://aws.amazon.com/blogs/security/how-to-implement-federated-api-and-cli-access-using-saml-2-0-and-ad-fs/)方式代入具有创建 S3 存储桶的必要权限的角色来使用不同的 IAM 角色。

# java - 在一个字节中切换十六进制符号

> ID：13898062
> 
> 赞同：2
> 
> 时间：2012-12-16T02:24:05.607
> 
> 标签：java, hex, switch-statement, bit-manipulation

我想在一个字节中切换两个十六进制符号，例如，如果

```
input  = 0xEA 
```

然后

```
output = 0xAE 
```

它必须在java中。

我已经有了这个方法，但它只在某些情况下有效：

```
public static final byte convert(byte in){

    byte hex1 = (byte) (in <<  4);
    byte hex2 = (byte) (in >>> 4);

    return (byte) (hex1 | hex2);
} 
```

一个工作示例是：

```
input:  0x3A 
hex1:   0xA0
hex2:   0x03
output: 0xA3 
```

一个不工作的例子是：

```
input:  0xEA
hex1:   0xA0
hex2:   0xFE
output: 0xFE 
```

任何人都可以阐明为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T02:27:54.313

我怀疑问题是符号扩展。具体来说，你可能需要做

```
byte hex2 = (byte) ((in >>> 4) & 0xF); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:32:30.247

尝试

```
 byte hex1 = (byte) (in <<  4);
    byte hex2 = (byte) ( in >>> 4);
    return (byte) (hex1 | hex2 & 0x0F); 
```

这就像一个已知的谜题

```
 byte x = (byte)0xFF;
    x = (byte) (x >>> 1);
    System.out.println(x); 
```

打印`-1`因为在无符号移位之前 0xFF 被提升为 int -> 0xFFFFFFFF; 移位后为 0x7FFFFFFF；转换为字节-> 0xFF

但

```
 byte x = (byte)0xFF;
    x = (byte) ((x & 0xFF) >>> 1);
    System.out.println(x); 
```

打印`127`是因为我们截断了 0xFFFFFFFF -> 0x000000FF，现在 shift 产生 0x0000007F，转换为字节 -> 0x7F

实际上，这个提升是在编译时完成的。JVM 仅适用于 4 或 8 字节操作数（堆栈上的局部变量）。即使是字节码中的布尔值也是 0 或 1 int。

# django - 如何在 django 中使用自定义主键访问外键模型

> ID：13898074
> 
> 赞同：6
> 
> 时间：2012-12-16T02:25:55.533
> 
> 标签：django, django-models

这是我的两个模型：

在模型.py

```
class Person(models.Model):

    person_no = models.IntegerField(max_length=10, primary_key='True')
    phone = models.IntegerField(max_length=20)

    class Meta:
        db_table = 'person'

class person_ext(models.Model):

    person_no = models.ForeignKey(Person)
    key = models.CharField(max_length=64)
    value = models.TextField()

    class Meta:
        db_table = 'personExt' 
```

我去 manage.py shell 来测试我的模型，并尝试以这种方式访问​​一个给定此人 id 的人的 cell_phone：

```
 p = Person.objects.get(pk=1)
        cell_phone = Person_ext.objects.get(person_no=p).filter(key='cell').value 
```

但是，我收到以下错误：

`DatabaseError: (1054, "Unknown column 'personExt.person_no_id' in 'field list'")`

我的数据库列只是“person_id”，但 django 正在寻找“person_no_id”。我需要做什么才能使用来自 person 的 person_no 访问 personExt 数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T02:36:03.840

person_no_id 是我希望 Django 看到的。看来您的数据库实际上与您的模型所期望的不同步。我会考虑比较（sql）的输出

```
SHOW CREATE TABLE `personExt `; 
```

和

```
python manage.py sql APPNAME 
```

对于有问题的表。您可以通过使用诸如南之类的迁移工具、重新创建数据库或手动编辑数据库来修复该字段来解决此问题。或者，如果您正在导入，您可以更改模型：

```
person_no = models.ForeignKey(Person, db_column="person_id") 
```

编辑：primary_key 应该是 True，而不是字符串“True”，Meta 类的缩进看起来是错误的，您应该考虑将 person_ext 命名为 PersonExt。

# bash - 在 bash 中索引当前行

> ID：13898075
> 
> 赞同：3
> 
> 时间：2012-12-16T02:26:00.643
> 
> 标签：bash, shell

我很好奇是否有办法在 bash 中索引当前行，因为它可能会节省很多打字。

例如

```
$ command longarg1 longarg2 longarg3 | command2 <something_to_expand_longarg2> 
```

我试过 !#2 （！# 将扩展该行的内容）但是它不起作用，因为它会扩展整行然后放 2。

-谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T02:56:29.840

从`bash(1)`手册页，**HISTORY EXPANSION**部分，**Word Designators**小节：

> A : 将事件规范与词指示符分开。

```
$ command longarg1 longarg2 longarg3 | command2 !#:2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:34:16.537

没有按照您的要求进行索引，并且不完全理想，但是如何：

*   使用向上/向下箭头键循环浏览历史记录
*   用鼠标选择长命令，Ctrl+Shift+C复制，然后Ctrl+Shift+V粘贴？

（取决于环境）

# mod-rewrite - 模式重写重定向目录到另一个不会工作

> ID：13898082
> 
> 赞同：0
> 
> 时间：2012-12-16T02:27:11.143
> 
> 标签：mod-rewrite

好吧，所以我需要模式重写，我完全是新手/新手。

我读过服务器指南。解释模式重写是 - 模式 - 重定向 - 标志。

我正在尝试重定向进入`domain.com/product/ to domain.com/product.php` 并传递变量 url=232 的任何人，但是我首先尝试将 /product/ 重定向到 product.php

这是我到目前为止得到的。

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule \/product\/ /product.php 
```

我已经开始了比重定向更基本的方法，`product.php to index.php`并且有效。

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:31:38.587

```
RewriteEngine On
RewriteBase /
RewriteRule ^product/?$ /product.php?url=232 
```

# node.js - Node.js：Consolidate.js + Jade 无法正确渲染 Jade

> ID：13898086
> 
> 赞同：0
> 
> 时间：2012-12-16T02:28:03.673
> 
> 标签：node.js, express, pug

我正在使用 Express@3.0.0rc2 + jam@0.2.3 + consolidate@0.5.0。当我呈现页面时，输出与预期不符。这是玉：

索引.jade

```
extends ../../layouts/default
block headIncludes
    link(href='/_widgets/search/index.css',rel='stylesheet')
block footerIncludes
    script(type='text/javascript',src='/_widgets/search/index.js')
    script(src='/views/site/home/js/index.js')

block content
    header(class='jumbotron masthead')
       div.inner
           h1 Pricing Page
//Search
div.row-fluid
    div(class='span12 centeredText',id='searchWidget')
div.row-fluid
    div.span12
div.row-fluid
    div.span12
div.row-fluid
    div.span12 
```

这是输出：

```
<extends>../../layouts/default</extends><block>headIncludes</block> link(href='/_widgets/search/index.css',rel='stylesheet') <block>footerIncludes</block>  script(type='text/javascript',src='/_widgets/search/index.js')  script(src='/views/site/home/js/index.js')   <block>content</block> header(class='jumbotron masthead')      div.inner           h1 Pricing Page     //Search    div.row-fluid       div(class='span12 centeredText',id='searchWidget')  div.row-fluid       div.span12  div.row-fluid       div.span12  div.row-fluid       div.span12 
```

如您所见，它不再像 Jade 一直那样评估 Extends，而是创建

```
<extends>../../layouts/default</extends> 
```

块也一样。

```
<block>headIncludes</block> 
```

这是我设置应用程序的方式：

应用程序.js

```
....
var app = express()
require('./settings').boot(app, config, passport) 
```

设置.js

```
var express = require('express')
, RedisStore = require('connect-redis')(express)
, url = require("url")
, cons = require('consolidate')

exports.boot = function(app, config, passport){
   bootApplication(app, config, passport)
}

 // App settings and middleware

 function bootApplication(app, config, passport) {

   app.set('showStackError', true)

   app.use(express.static(__dirname + '/public'))

   app.use(express.logger(':method :url :status'))

// set views path, template engine and default layout

 app.configure(function () {

 app.engine('jade', require('jade').renderFile)

 app.set('views', __dirname + '/app/views')
 app.set('view engine', 'jade')
 app.set('view options', { layout: false })

// cookieParser should be above session
app.use(express.cookieParser())

// bodyParser should be above methodOverride
app.use(express.bodyParser())
app.use(express.methodOverride())

var redisURL = process.env.REDISTOGO_URL || config.redis
console.log(redisURL)
var redisUrl = url.parse(redisURL),
    redisAuth = redisUrl.auth.split(':');  
app.set('redisHost', redisUrl.hostname);
app.set('redisPort', redisUrl.port);
app.set('redisDb', redisAuth[0]);
app.set('redisPass', redisAuth[1]); 

app.use(express.session({
  secret: '......',
  cookie: { maxAge: new Date(Date.now() + 360000)}, //1 Hour
  store: new RedisStore({
        host: app.set('redisHost'),
        port: app.set('redisPort'),
        db: app.set('redisDb'),
        pass: app.set('redisPass')
    })
}))

app.use(passport.initialize())
app.use(passport.session())

app.use(express.favicon())

require('./config/customMiddleware').boot(app)  

// routes should be at the last
app.use(app.router)

// assume "not found" in the error msgs
// is a 404\. this is somewhat silly, but
// valid, you can do whatever you like, set
// properties, use instanceof etc.

app.use(function(err, req, res, next){
  // treat as 404
  if (~err.message.indexOf('not found')) return next()

  // log it
  console.error(err.stack)

  // error page
  res.status(500).render('500')
})

// assume 404 since no middleware responded
app.use(function(req, res, next){
  res.status(404).render('404', { url: req.originalUrl })
})

})

app.set('showStackError', false)

} 
```

这对我来说似乎真的很奇怪，因为 Jade 看起来有点编译，只是不像预期的那样。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:11:32.883

您需要更新`jade`到较新的版本 - 至少要使用和[`0.16.0`](https://github.com/visionmedia/jade/blob/master/History.md#0160--2011-09-26-)进行[模板继承](https://github.com/visionmedia/jade#a11)。`block``extends`

当前版本是[`0.27.7`](https://npmjs.org/package/jade).

* * *

您可能还想更新`express`，它不再是`rc`at [`3.0.4`](https://npmjs.org/package/express)。

# c# - 除悬停外不显示按钮镀铬/皮肤/视觉样式？

> ID：13898091
> 
> 赞同：0
> 
> 时间：2012-12-16T02:30:38.340
> 
> 标签：c#, winforms

每当在 C# 中创建表单按钮时，它们默认带有该操作系统按钮的视觉样式。我要做的是：默认情况下，只显示按钮的文本或图标。当文本和/或图标悬停时，还显示我们之前隐藏的按钮视觉样式的其余部分。

这有任何意义吗？有谁知道这可能是如何实现的？我以前看过它，但我不确定它是如何完成的。

我应该澄清一下 - 我没有使用 WPF 或 XAML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:21:49.900

您可以制作 a`Style`和 a并在鼠标悬停时`ControlTemplate`隐藏。`ControlTemplate`

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WpfApplication8" Height="200" Width="200" Name="mainWindow" >

    <Window.Resources>

        <ControlTemplate TargetType="Button" x:Key="dummyStyle" >
            <Border>
                <ContentPresenter Margin="0" VerticalAlignment="Center" HorizontalAlignment="Center" />
            </Border>
        </ControlTemplate>

        <Style TargetType="Button" x:Key="masterStyle">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="False">
                    <Setter Property="Template" Value="{StaticResource dummyStyle}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>

    <Grid>
        <Button Style="{StaticResource masterStyle}" Content="Button" Height="44" Width="129" />
    </Grid>

</Window> 
```

如果您使用 winforms（不确定），您可以制作一个简单的自定义控件，如下所示：

```
public partial class HoverButton : UserControl
{
    private string _buttonText;

    public HoverButton()
    {
        InitializeComponent();
        ButtonText = "HoverButton1";
    }

    public string ButtonText
    {
        get { return _buttonText; }
        set
        { 
            _buttonText = value;
            button1.Text = _buttonText;
            label1.Text = _buttonText;
        }
    }

    private void label1_MouseEnter(object sender, EventArgs e)
    {
        label1.Visible = false;
    }

    private void button1_MouseLeave(object sender, EventArgs e)
    {
        label1.Visible = true;
    }
}

partial class HoverButton
{
    /// <summary> 
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary> 
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Component Designer generated code

    /// <summary> 
    /// Required method for Designer support - do not modify 
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.button1 = new System.Windows.Forms.Button();
        this.label1 = new System.Windows.Forms.Label();
        this.SuspendLayout();
        // 
        // button1
        // 
        this.button1.Dock = System.Windows.Forms.DockStyle.Fill;
        this.button1.Location = new System.Drawing.Point(0, 0);
        this.button1.Name = "button1";
        this.button1.Size = new System.Drawing.Size(150, 150);
        this.button1.TabIndex = 0;
        this.button1.Text = "button1";
        this.button1.UseVisualStyleBackColor = true;
        this.button1.MouseLeave += new System.EventHandler(this.button1_MouseLeave);
        // 
        // label1
        // 
        this.label1.Dock = System.Windows.Forms.DockStyle.Fill;
        this.label1.Location = new System.Drawing.Point(0, 0);
        this.label1.Name = "label1";
        this.label1.Size = new System.Drawing.Size(150, 150);
        this.label1.TabIndex = 1;
        this.label1.Text = "label1";
        this.label1.TextAlign = System.Drawing.ContentAlignment.MiddleCenter;
        this.label1.MouseEnter += new System.EventHandler(this.label1_MouseEnter);
        // 
        // HoverButton
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.Controls.Add(this.label1);
        this.Controls.Add(this.button1);
        this.Name = "HoverButton";
        this.ResumeLayout(false);

    }

    #endregion

    private System.Windows.Forms.Button button1;
    private System.Windows.Forms.Label label1;
} 
```

# microdata - 微数据规范要求“itemscope”属性的值？

> ID：13898099
> 
> 赞同：2
> 
> 时间：2012-12-16T02:32:18.080
> 
> 标签：microdata

我一直在用微数据（使用推荐的元数据/schema.org）填充我的网站，以便在搜索引擎中获得丰富的搜索结果。

在完成并使用 Google Rich Snippet Tool 进行测试后，一切看起来都不错，但是现在当我使用 Android 浏览器访问我的网站时，我收到以下消息：

> 属性的规范要求值`itemscope`

这看起来像是一个与未定义值的属性相关的错误`itemscope`，但这就是 Microdata 定义其标准的方式。

Web 上缺乏关于这个主题的信息非常令人惊讶，所以我在这个问题上求助于 Stack Overflow。

有谁知道如何解决这个问题？微数据定义了`itemscope`没有值的属性（有趣的东西，因为它产生无效的 XML 并且它是由网络巨头定义的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:11:52.787

HTML5 不是 XML。布尔属性不需要显式值。有关示例，请参见此处的规范。

[http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#boolean-attributes](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#boolean-attributes)

如果有浏览器不处理这种风格的属性，你应该可以随意使用空字符串形式。不要担心微数据规范使用不同的形式，因为它们的含义相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:08:53.087

它看起来像定义`itemscope=""`作品，但这违反了微数据规范。

# balanced-payments - balance-payments 用户如何更新他们的信用卡信息？

> ID：13898102
> 
> 赞同：0
> 
> 时间：2012-12-16T02:32:37.567
> 
> 标签：balanced-payments

如果用户想要更新到期日期，他们可以这样做吗？我尝试使用 updateCard，但它只允许我更新“元”信息，但我打算更改 expire_year 或 expiration_month。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:52:31.077

只需新建一个`card`，然后将以前的标记为无效。创建卡片后，您无法对卡片详细信息进行任何更改。（您的用户将不得不重新输入他们所有的卡信息。）希望这会有所帮助。

# objective-c - 归档后比较对象

> ID：13898107
> 
> 赞同：0
> 
> 时间：2012-12-16T02:33:52.760
> 
> 标签：objective-c, object, compare, nsarchiving

我有一个`NSMutableArray`自定义对象，它们通过`NSArchiver`. 我需要能够检索存档作为备份并将其与现有`NSMutableArray`的应用程序合并。我需要删除应用内`NSMutableArray`和未存档之间的重复项，但通常使用`NSSet`或使用比较的方法是`isEqual`或`containsObject`不工作，因为虽然最初相等的对象显然不是在存档后。我可以通过两个数组进行嵌套迭代并比较对象 ivars，但这似乎相当繁重。

有什么我想念的吗。我对 Objective-C 和使用`NSArchiver`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:42:05.173

`isEqual:`并且`hash`应该在您存储的对象中被覆盖`NSArchiver`（如果它们是自定义的），否则您将无法将已取消归档的项目与您已有的实例进行比较。

通常，该`isEqual:`方法必须关心对两个对象的相等性有意义的所有 ivars，即使因为我不知道您如何认为能够比较使用许多其他对象的两个对象而不检查它们中的每一个。这只是你必须做的。

如果您有带有 x、y 和 z ivars 的 A 类，那么通常是`[a1 isEqual:a2]`iif `[a1.x isEqual:a2.x] && [a1.y isEqual:a2.y] && [a1.z isEqual:a2.z]`，这没什么奇怪的。

# javascript - 用户单击时将复选框值传递给文本字段

> ID：13898108
> 
> 赞同：0
> 
> 时间：2012-12-16T02:34:00.607
> 
> 标签：javascript, jquery

我会将多个字段的值传递给一个文本字段。有问题，复选框。如果用户选中复选框，如何确保复选框（允许）仅将值传递给文本字段？

[http://jsfiddle.net/e2ScF/55/](http://jsfiddle.net/e2ScF/55/)

HTML：

```
<select id="Salary_para1">
  <option value="">Choose...</option>
  <option value="MYR" selected>MYR</option>
  <option value="SGD" >SGD</option>
</select>
<input id="Salary_value" type="text"/>
+ <input type="checkbox" id="Salary_para2" name="Salary_para2" value=" + Allowance"  />Allowance<br/>
<input type="text" id="targetTextField" name="targetTextField" size="31" tabindex="0" maxlength="99" value=""> 
```

代码：

```
$(function() {
  $("#Salary_para1").change(function(){
    setTarget()
  });
  $("#Salary_para2").change(function(){
    setTarget()
  });
  $("#Salary_value").keyup(function(){
    setTarget();
  });
});

function setTarget(){
  var tmp = $("#Salary_para1").val();
  tmp += $("#Salary_value").val();
  tmp += $("#Salary_para2").val();
  $('#targetTextField').val(tmp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:42:32.070

检查复选框是否为`checked`：

```
$(function() {
    setTarget();
    $("#Salary_para1,#Salary_para2").change(setTarget);
    $("#Salary_value").keyup(setTarget);

    function setTarget() {
        var tmp = $("#Salary_para1").val();
        tmp += $("#Salary_value").val();
        tmp += $("#Salary_para2:checked").val() || '';
        $('#targetTextField').val(tmp);
    }
});​ 
```

[http://jsfiddle.net/oceog/e2ScF/62/](http://jsfiddle.net/oceog/e2ScF/62/)

（我还对原始代码进行了一些重构）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:38:00.477

对不起，你的意思是这样吗？

```
function setTarget(){
    var tmp = $("#Salary_para1").val();
    tmp += $("#Salary_value").val();
    tmp += $("#Salary_para2").val();
    if($("#Salary_para2").is(":checked")){
        $('#targetTextField').val(tmp);
    }
}
​ 
```

例子：

[http://jsfiddle.net/e2ScF/59/](http://jsfiddle.net/e2ScF/59/)

# java - 当数据库中的数据发生变化时用于动态消息传递的技术

> ID：13898109
> 
> 赞同：-5
> 
> 时间：2012-12-16T02:34:04.447
> 
> 标签：java, android, iphone, web-services, web

我想知道当数据库中的用户帐户发生任何更改时，使用什么技术可以立即将通知/消息发送到多个设备，这些更改将在后端存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:48:36.637

我强烈推荐[亚马逊网络服务](http://aws.amazon.com/what-is-aws/)。AWS 是一个与语言和操作系统无关的平台，它非常易于使用。由于它是基于云的，因此它们具有高可用性、可扩展性和安全性。

你可以使用：

*   [用于通知的Amazon Simple Notification Service (Amazon SNS)](http://aws.amazon.com/sns/)。
*   [用于消息传递的Amazon Simple Queue Service (Amazon SQS)](http://aws.amazon.com/sqs/)。
*   [用于电子邮件的Amazon Simple Email Service (Amazon SES)](http://aws.amazon.com/ses/)。

您还可以考虑使用数据库服务，例如[Amazon DynamoDB](http://aws.amazon.com/dynamodb/)，这是一个非常棒的完全托管的 NoSQL 数据库服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:47:57.340

你的意思是推送通知吗？我正在使用 Urban Airship 发送推送通知，请参阅[此处](https://docs.urbanairship.com/display/DOCS/Home)的文档。

# cucumber - 弗兰克检验是否存在两个元素中的任何一个

> ID：13898126
> 
> 赞同：1
> 
> 时间：2012-12-16T02:36:42.403
> 
> 标签：cucumber, frank

`uiview`我想在检查某些东西之前“等待”两个s 中的任何一个出现，
如果我想等待一个特定元素，我可以使用 Frank 示例中提供的示例步骤之一：

```
Then /^I should wait to see "([^"]*)"$/ do |expected_mark|
  wait_for_element_to_exist("view marked:'#{expected_mark}'")
end 
```

但我想要类似的东西：

```
Then /^I should wait to see either "([^"]*)" or "([^"]*)" $/ do |expected_mark, other_mark| 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:08:11.923

您可以使用 wait_until 函数：

```
Then /^I should wait to see either "([^"]*)" or "([^"]*)" $/ do |expected_mark, other_mark|  
  browser.wait_until() {
    expected_mark.exists? or other_mark.exists?
  }
end 
```

# ruby-on-rails - Ruby/Rails - 从文件路径字符串在浏览器中打开文件

> ID：13898127
> 
> 赞同：1
> 
> 时间：2012-12-16T02:37:10.550
> 
> 标签：ruby-on-rails, ruby, file, path

我有一个 Rails 应用程序，我在项目文件夹中的浏览器中列出了所有 css 和 js。我有这个代码来列出文件：

```
<% @files = Dir['**/*.{js,css}'] %>
<% @files.sort.each do |d| %>
  <li><%= d %></li>
<% end %> 
```

如何使这些路径字符串链接到文件，以便它们可以在浏览器中打开和编辑？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:08:27.667

假设要列出的所有 js 和 css 文件都在`/public`应用程序的子文件夹下，以下应该可以在浏览器中显示文件：

```
<% @files = Dir['**/*.{js,css}'] %>
<% @files.sort.each do |file_name| %>
  <% file_name = file_name.gsub( 'public', '' ) %>
  <li><%= link_to("public" + file_name, file_name) %></li>
<% end %> 
```

从中得到启发：[http ://railsforum.com/viewtopic.php?id=20097](http://railsforum.com/viewtopic.php?id=20097)

注意：这只会使文件在浏览器中可见；不确定是否可以直接从浏览器编辑文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:05:36.447

由于 .js、.css 是纯文本文件，您只需提取字符串中的文本并以漂亮的格式显示即可。

```
data = File.read("/path/to/file") 
```

我认为您不能在浏览器中编辑文件。一种方法是调用编辑器来打开文件。

**更新**：在编辑器中打开文件

```
server_cmd = "gedit path/to/file"
res = `#{server_cmd}` 
```

将此代码块放置在您单击视图中的文件链接时将调用的操作中。应该打开 gedit 编辑器，你就可以开始了。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:16:35.210

“[有一个好的浏览器内代码编辑器吗？](https://stackoverflow.com/questions/198271/is-there-a-good-in-browser-code-editor) ”是处理该问题的一个预先存在的 Stack Overflow 问题。查看该页面右下角的相关问题以获取更多想法。

# registry - 使用 regsvr32.exe 注册 OCX 并使其可供所有用户使用

> ID：13898129
> 
> 赞同：5
> 
> 时间：2012-12-16T02:37:45.723
> 
> 标签：registry, ocx, regsvr32

我有一个第三方 Web 应用程序，它依赖于在用户计算机上注册的特定 OCX 文件。我已经以管理员身份进入计算机并使用以下命令注册了文件：

REGSVR32 /S MyFile.ocx

这工作正常，我可以毫无问题地使用 Web 应用程序。在 regedit 中，我可以看到控件已正确注册。

但是，当另一个不是管理员的用户登录计算机并尝试运行 Web 应用程序时，它不起作用。

如果我将该用户添加到管理员组并让他们运行 REGSVR32 命令，它对他们来说效果很好。不幸的是，让所有用户成为他们机器上的管理员对我来说确实是不可行的。

有没有办法可以使用 REGSVR32 注册 OCX 文件并让所有用户都可以使用它，即使是没有管理员权限的用户？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T03:09:30.117

通常 regsvr32 在 HKEY_LOCAL_MACHINE\software\Classes 中注册 CLSID 信息，因此注册应该对所有用户可见。

问题可能出在您的 OCX 上。它可能会在启动时做一些事情，阻止非管理员用户打开它。例如，它需要向 HKEY_LOCAL_MACHINE 注册表写入一些内容，写入 Windows 目录，...

[您可以使用Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)工具检查此 OCX 是否正在为非管理员用户执行某些操作并检查 ACCESS_DENIED 错误。

如果您的 OCX 在 admin 帐户下没有执行任何操作，您可以尝试使用[RegSvrEx](http://www.codeproject.com/Articles/3505/RegSvrEx-An-Enchanced-COM-Server-Registration-Util)工具在 HKEY_CURRENT_USER 杠杆下注册您的 OCX。这样您的 OCX 将在 current_user_level 下注册

# java - Java：从静态方法中的其他 ArrayList 派生的实例 ArrayList

> ID：13898132
> 
> 赞同：0
> 
> 时间：2012-12-16T02:38:14.520
> 
> 标签：java, arrays, static, arraylist, static-methods

我的代码的问题是，当我`generateCSV()`在下面调用时，ArrayList 的输出不正确。它正在用仅最后一个要实例化的实例替换所有实例，即最后一个实例正在替换所有先前的事件。

我的基类`PausePred`接受一个字符串和一个 ArrayList

```
public class PausePred {

    private String predString;  // the keys preceding the pause
    private ArrayList<KSE> kseArr;  // the arraylist of KSEs comprising the PausePred

    public PausePred(String predStr) { 
        this.predString = predStr;
        kseArr = new ArrayList<KSE>();
    } 

    public void setKseArr(ArrayList<KSE> kseArr) {
        this.kseArr.addAll(kseArr);
    } 
```

在`PausePred`中，我有一个静态方法来创建`PausePreds`.

```
public static Collection<PausePred> parseKseArray(KSE[] kArr) {

    Collection<PausePred> pausePredArray = new ArrayList<PausePred>();

    String pausePredStr = "";       // to store incrementally appended events preceding pause
    int pauseDur = 0;               // to store pause duration
    boolean startPosSet = false;    // checks if startPos has been set
    ArrayList<KSE> pausePredKseArr = new ArrayList<KSE>();;

    for (int kseArrIdx = 0; kseArrIdx < kArr.length; kseArrIdx++) {
        if (kArr[kseArrIdx].isKeyPress()) { // only down-keys
            // if start positio"n has not been set, set it, and update flag
            // set time stamp, as well
            if (startPosSet == false) {
                startPosSet = true;
                // get first char of PredStr by going back one index
                if (kseArrIdx > 0) {
                    pausePredStr = VisualCharStream.vkCodetoString(kArr[kseArrIdx-1].getKeyCode());
                    pausePredKseArr.add(kArr[kseArrIdx-1]);
                }
            }

            if (kArr[kseArrIdx].getM_pauseMs() < PauseBursts.PAUSE) {   // is not a pause
                //append vkCode (to string) to pausePred
                pausePredStr += VisualCharStream.vkCodetoString(kArr[kseArrIdx].getKeyCode());
                pausePredKseArr.add(kArr[kseArrIdx]);
            }

            else {  // is a pause

                //start incrementing pause duration, until a non-pause is reached
                while (kArr[kseArrIdx].getM_pauseMs() >= PauseBursts.PAUSE) {
                    pauseDur = (int) kArr[kseArrIdx].getM_pauseMs();
                    kseArrIdx++;
                }

                //add to pausePred array
                PausePred pp = new PausePred(pausePredStr);
                pp.setKseArr(pausePredKseArr);
                pausePredArray.add(pp);

                //reset variables
                pausePredStr = "";
                startPosSet = false;
                pausePredKseArr.clear();
                //need to take one step back from above while loop
                kseArrIdx--;
            }
        } // close outer if loop
    } // close for loop
    return pausePredArray;
} // close parseKseArray() 
```

当我在下面调用此方法时，第一部分给出了每个实例，但第二部分只给出了数组中最后一个实例的 kseArr。

```
 public static void generateCSV(String fileName,ArrayList<PausePred> pausePredArr) {
        for (PausePred pp : pausePredArr)
System.out.println(pp.getPredString()+"\t"+pp.kseArr.get(pp.kseArr.size()-1).getKeyCode()); 
} 
```

这是调用上面 parse 方法的提取方法。我不确定它是否与这个问题密切相关。

```
public class ExtractPausePred implements ExtractionModule {

    private static ArrayList<PausePred> pausePredArray = new ArrayList<PausePred>();

    @Override
    public void extract(DataNode data) {

        for (Answer a : data) {
            //create KSE array
            KSE[] kseArr = parseSessionToKSE(a.getKeyStrokes());

            //from above KSE array, extract Pause Predecessors
            pausePredArray.addAll(PausePred.parseKseArray(kseArr));
            PausePred.generateCSV("testing123",pausePredArray);
        }

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:42:29.917

问题是您试图通过重用相同的对象来过早优化：

> pausePredKseArr.clear();

创建一个新`ArrayList`的而不是清除旧的，你会没事的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T02:45:51.017

> 我的代码的问题是，当我在下面调用 generateCSV() 时，ArrayList 的输出不正确。它正在用仅最后一个要实例化的实例替换所有实例，即最后一个实例正在替换所有先前的事件。

我没有详细阅读您的代码，也许您可​​以尝试减少它。但这几乎总是因为同一个对象（修改后）被添加到集合中，而不是`new`每次都创建一个实例：

```
SomeType s = new SomeType();
while (condition) {
      s.setAttr1(value1);
      s.setAttr2(value2);
      collection.add(s); 
```

}

您所拥有的是.`s`中每个索引处的相同对象`collection`。它的属性将在最后一次迭代中添加相同的值。

你需要的是：

```
while (condition) {
      SomeType s = new SomeType();    
      s.setAttr1(value1);
      s.setAttr2(value2);
      collection.add(s); 
```

}

**By creating the object inside the loop, a different object is added in every iteration.**

# java - 如何将整数包含到另一个变量的名称中

> ID：13898139
> 
> 赞同：0
> 
> 时间：2012-12-16T02:39:19.560
> 
> 标签：java, string, naming-conventions

> **可能重复：**
> [动态变量名称 Java](https://stackoverflow.com/questions/5805843/dynamic-variable-names-java)

如果我有一个

```
int i =5; 
```

如何创建一个新变量，该变量的名称中包含前一个整数的值？

例子：

```
String string**i**;

so that, in the ent, my String variable will be named 

string**5** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:46:07.287

你没有。你使用一个数组：

```
String[] strings = new string[10];
strings[5] = "foo"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:58:52.237

简单的答案是你不能/不应该尝试在 Java 中做那种事情。Java 变量名必须在编译时知道。时期。

* * *

在这种特殊情况下，无论如何这似乎都是毫无意义的练习。考虑一下：

```
String buildstring_<buildNumber> = ... 
```

你将如何使用这个假设变量？

```
if (buildstring_<buildNumber>.equals(...)) {
    ....
} 
```

但你也可以像这样实现同样的事情：

```
String buildstring_current = ...

if (buildstring_current.equals(...)) {
    ....
} 
```

好的，所以假设有很多这些构建字符串......

```
String buildstring_1 = ...
String buildstring_2 = ...
String buildstring_3 = ...

if (buildstring_<buildNumber>.equals(...)) {
    ....
} 
```

很好......但是当`<buildNumber>`大于最后一个`buildstring_?`声明时会发生什么？编译错误或运行时错误！！！

不。在 Java 中执行此操作的明智方法是使用数组或`Map`... 或可能从属性文件中读取的内容。

# javascript - 防止按下多个按钮

> ID：13898140
> 
> 赞同：0
> 
> 时间：2012-12-16T02:39:28.727
> 
> 标签：javascript

我有一个简单的倒计时，由按钮激活。使用`onclick`i 开始操作，但我注意到如果您继续按下按钮，它会增加时间并且倒计时不同步。我将如何防止这种情况发生，并且一次只允许单击一次？

```
 var count = 10,
      startcounter = document.getElementById("stercount");

startcounter.onclick = function() {
  countdown = setInterval(function(){
    document.getElementById("countdown").innerHTML = count + " seconds remaining!";
    if (count <= 0) {
      clearInterval(countdown);
      document.getElementById("countdown").innerHTML = "Done!";
    }
    count--;
  }, 1000);
}; 
```

演示： http: [//jsfiddle.net/StWXk/1/](http://jsfiddle.net/StWXk/1/) ​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T02:42:06.547

将标志变量`isClicked`默认设置为`false`. 当您单击按钮时，设置`isClicked`为`true`。在`click`事件期间，如果`isClicked`是`true`则 make it `return false`。

```
var isClicked = false;  
var count = 10,
      startcounter = document.getElementById("stercount");

startcounter.onclick = function() {
    if(isClicked) return false;

    isClicked = true;
    countdown = setInterval(function(){
    document.getElementById("countdown").innerHTML = count + " seconds remaining!";
    if (count <= 0) {
      clearInterval(countdown);
      document.getElementById("countdown").innerHTML = "Done!";
    }
    count--;
  }, 1000);
};​ 
```

演示：http: [//jsfiddle.net/StWXk/2/](http://jsfiddle.net/StWXk/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T02:57:57.967

删除点击处理程序：

```
startcounter.onclick = function() {
    this.onclick = null;
    ...
}; 
```

[http://jsfiddle.net/StWXk/3/](http://jsfiddle.net/StWXk/3/)

**编辑：**根据您的暂停按钮要求，您可以在计时器暂停时重新绑定点击处理程序：

```
function startTimer() {
    this.onclick = null;
    ...
}

startcounter.onclick = startTimer;

pausecounter.onclick = function() {
    startcounter.onclick = startTimer;
    clearTimeout(countdown);
}; 
```

[http://jsfiddle.net/StWXk/8/](http://jsfiddle.net/StWXk/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T02:45:30.833

有两种解决方案，一种是定义和设置一个标志来跟踪计时器在 onclick 之外运行，另一种是在倒计时之前调用 clearInterval 以停止任何已经运行的倒计时。

解决方案 1： *指示计时器是否正在运行的标志。*

```
var count = 10,
    startcounter = document.getElementById("stercount"),
    running;

startcounter.onclick = function() {
    if (running)
        return;

    running = true;
    countdown = setInterval(function(){
        document.getElementById("countdown").innerHTML = count + " seconds remaining!";
        if (count <= 0) {
            clearInterval(countdown);
            document.getElementById("countdown").innerHTML = "Done!";
        }
        count--;
    }, 1000);
}; 
```

解决方案 2： *在启动计时器之前**停止计时器。`clearInterval`*

```
var count = 10,
    startcounter = document.getElementById("stercount");

startcounter.onclick = function() {
    clearInterval(countdown);
    countdown = setInterval(function(){
        document.getElementById("countdown").innerHTML = count + " seconds remaining!";
        if (count <= 0) {
            clearInterval(countdown);
            document.getElementById("countdown").innerHTML = "Done!";
        }
        count--;
    }, 1000);
}; 
```

解决方案 3： *您可以将`countdown`其用作您的标志，但这样做时，您必须确保每次清除它时都将其设置为 null。这与解决方案 1 基本相同，只是删除了一个 var。*

**编辑：**如果您没有`countdown`在 onclick 上方的 vars 列表中定义，这可能实际上不起作用，因为您的 countdown-DIV 将填充 countdown-global。

```
var count = 10,
    startcounter = document.getElementById("stercount");

startcounter.onclick = function() {
    if (countdown)
        return;

    countdown = setInterval(function(){
        document.getElementById("countdown").innerHTML = count + " seconds remaining!";
        if (count <= 0) {
            clearInterval(countdown);
            countdown = null;
            document.getElementById("countdown").innerHTML = "Done!";
        }
        count--;
    }, 1000);
}; 
```

附言。您是否忘记在代码顶部的变量中定义倒计时或在其他地方定义倒计时？现在它将是一个全局的，任何其他代码（例如库）都可以覆盖它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-23T10:35:10.547

我的解决方案使用 .ONE 非常简单，超时（2 秒）后再次将 .ONE() 绑定到按钮

```
<script>
            var execute_form_func = function(){
                console.log("Click on button");
                //some code or other stuff
                ....
                // bind same function to button
                setTimeout(function(){ 
                    console.log("Enabling"); 
                    $( "#update_submit" ).one("click",execute_form_func); 
                }, 2000);

            };
            $(document).ready(function(){
                $( "#update_submit" ).one("click",execute_form_func);
            });
</script> 
```

# windows-phone-7 - 每次在 Windows Phone 中启动应用程序时，如何缓存数据以使用它？

> ID：13898141
> 
> 赞同：1
> 
> 时间：2012-12-16T02:39:43.410
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-8, windows-phone-7.1.1

我的 Windows Phone 应用程序中有一个搜索功能，用户可以在其中输入单词并相应地返回结果。每次在 Windows Phone 中启动应用程序时，如何缓存此搜索数据以使用它？每当加载此搜索页面时，我都想加载搜索文本框，其中所有搜索词用作上下文菜单。

而且我还想在我的应用程序设置中有一个复选框，用户可以使用它来设置应用程序级别的设置。我想在每次启动应用程序时记住这些设置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:03:31.610

使用独立存储来保存数据： http: [//www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/](http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:59:10.250

或者，您可以使用本地数据库存储： http: [//www.windowsphonegeek.com/articles/Windows-Phone-Mango-Local-Database-mapping-and-database-operations](http://www.windowsphonegeek.com/articles/Windows-Phone-Mango-Local-Database-mapping-and-database-operations)

与将数据粘贴到隔离存储中相比，它需要更多的工作和更复杂的工作，但如果您的数据完全是关系型的，您想要存储多个搜索查询/结果等，它可能会更合适。

# php - 用于字符串的 PHP preg_match 正则表达式，如 235 12 r12、212 70 43 等

> ID：13898144
> 
> 赞同：-3
> 
> 时间：2012-12-16T02:40:50.377
> 
> 标签：php, regex, preg-match

我需要一个 preg_match 正则表达式来搜索类似的东西

123 21 r32 , 329 29 49

基本上我想要的是正则表达式将匹配前 3 个出现的数字，然后是一个空格，然后是 2 个数字，然后是一个空格，然后是 2 个或 3 个字母数字字符。

### 从评论中移植的代码：

我已经尝试过`/^[\d{3} \d{2} [0-9,a-z]{2-3}]+$/i`，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:40:23.150

```
$string = '123 21 r32 , 329 29 49';

preg_match_all('/\d{3} \d{2} [a-z\d]{2,3}/i', $string, $matchs);

print_r($matchs[0]); 
```

输出：

```
Array
(
    [0] => 123 21 r32
    [1] => 329 29 49
) 
```

# string - Cobol 子串；取一个 4 个字符串并取内部 2 个字符

> ID：13898148
> 
> 赞同：1
> 
> 时间：2012-12-16T02:41:20.057
> 
> 标签：string, substring, cobol

我已经在这个问题上停留了一段时间。帮助将不胜感激。

我有一个从文件中读取的 4 位数字，我需要取里面的 2 位数字。我认为将数字作为字符串读取是个好主意，然后在子字符串中取中间两位数字并使用 numval 函数将它们转换回来。不幸的是，我不知道如何获得里面的两个字符。

前任。我有号码 5465，我想要 46。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T05:08:01.050

Keith Thompson 的建议会很好用。您可能想检查 I > 0 和 J > 0。如果您始终知道 1000 <= I <= 9999，那将不是问题。

IBM Enterprise COBOL 包含一个[MOD 函数](http://pic.dhe.ibm.com/infocenter/pdthelp/v1r1/index.jsp?topic=/com.ibm.entcobol.doc_4.2/PGandLR/ref/rlinfmod.htm)，您的编译器可能提供也可能不提供。

我认为您还可以执行以下操作...

```
01  A-GROUP.
    05  A-NUMBER PIC 9999 VALUE ZEROES.
    05  A-STRING REDEFINES A-NUMBER.
        10  FILLER PIC X.
        10  THE-MIDDLE-TWO-DIGITS PIC XX.
        10  FILLER PIC X.

MOVE your-number TO A-NUMBER. 
```

无论您的号码被定义为 COMP 还是 COMP-3，只要 0 <= your-number <= 9999，这都应该有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T01:11:43.943

您可以使用参考修改。考虑以下：

```
1 WS-MY-FIELD Pic X(4).
1 WS-TGT-FIELD Pic X(2).
...
Move WS-MY-FIELD (2:2) to WS-TGT-FIELD 
```

第一个数字表示起始位置（从 1 开始），第二个数字表示长度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T02:59:05.940

如果你把它作为一个数字而不是一个字符串，你可以用算术方法来做。鉴于这`I`是`5465`，并且您想要存储`46`在`J`：

```
DIVIDE I BY 10 GIVING J.
DIVIDE J BY 100 GIVING ignored REMAINDER J. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T19:07:18.003

```
01  a-long-piece-of-data.
    05  the-first-character pic x.
    05  the-two-characters-we-want pic xx.
    05  the-last-character pic x.

01  a-short-piece-of-data pic xx.
01  filler redefines a-short-piece-of-data.
    05  a-short-unsigned-number pic 99.

MOVE the-two-characters-we-want TO a-short-piece-of-data
MOVE/ADD/COMPUTE/whatever a-short-unsigned-number 
```

或将一小段数据移动到任何地方

有签名号码并想保留该签名？

```
01  a-long-number PIC S9(4).
01  FILLER REDEFINES a-long-number.
    05  FILLER PIC X.
    05  an-integer-with-one-decimal-place PIC S99V9.

01  a-short-number-no-decimals PIC S99.

MOVE an-integer-with-one-decimal-place TO a-short-number-no-decimals 
```

# graphviz - 从 Graphviz 中记录元素的中心开始绘制出边

> ID：13898151
> 
> 赞同：3
> 
> 时间：2012-12-16T02:42:04.130
> 
> 标签：graphviz

在 Graphviz 中，是否可以从子记录的中心而不是边界开始绘制出边？

[这张图](http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/072/7275/7275f3.inline.jpg)（[原始文章](http://www.linuxjournal.com/article/7275)）看起来是这样，但是示例代码是错误的，我在 Graphviz 2.29 中测试了清单 1 中的代码（绘制了[这个](http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/072/7275/7275f1.jpg)，但我`twopi`改用了），结果不同（边缘从记录边界开始） .

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T19:32:24.710

链接的文章是从 2004 年开始的，从那时起对 graphviz 进行了一些更改。

以下是如何调整清单°1 显示源自记录形状单元中心的边缘：

在定义边缘之前添加以下行：

```
edge[headclip=false, tailclip=false]; 
```

这告诉 graphviz 将边缘绘制到末尾，而不是在边框的节点处剪裁它们。

但是在这种情况下这还不够，因为边缘已经使用了一个端口——我们可以添加一个[*罗盘点*](http://www.graphviz.org/content/attrs#kportPos)来指示放置边缘的结束/开始的位置。例如，为了让第一条边从 的中心`J`到 的边界`E`：

```
 "node0":f1:c -> "node1":f1; 
```

或者只是省略端口和罗盘点以使用节点的中心：

```
 "node0" -> "node1":f1; 
```

* * *

为了让*所有*边都起源和结束于记录节点的中心：

```
digraph G
{
    node [shape = record];
    edge[headclip=false, tailclip=false];

    node0 [ label ="<f0> | <f1> J | <f2> "];
    node1 [ label ="<f0> | <f1> E | <f2> "];
    node4 [ label ="<f0> | <f1> C | <f2> "];
    node6 [ label ="<f0> | <f1> I | <f2> "];
    node2 [ label ="<f0> | <f1> U | <f2> "];
    node5 [ label ="<f0> | <f1> N | <f2> "];
    node9 [ label ="<f0> | <f1> Y | <f2> "];
    node8 [ label ="<f0> | <f1> W | <f2> "];
    node10 [ label ="<f0> | <f1> Z | <f2> "];
    node7 [ label ="<f0> | <f1> A | <f2> "];
    node3 [ label ="<f0> | <f1> G | <f2> "];

    // identical result: "node0" -> "node1";
    "node0":f1:c -> "node1":f1:c;
    "node0":f1:c -> "node2":f1:c;

    "node1":f1:c -> "node4":f1:c;
    "node1":f1:c -> "node6":f1:c;
    "node4":f1:c -> "node7":f1:c;
    "node4":f1:c -> "node3":f1:c;

    "node2":f1:c -> "node5":f1:c;
    "node2":f1:c -> "node9":f1:c;

    "node9":f1:c -> "node8":f1:c;
    "node9":f1:c -> "node10":f1:c;
} 
```

![记录节点居中](../Images/40a25a8ace7020e526fa569882916b60.png)

# javascript - jquery datatables 按钮用css类打开新窗口

> ID：13898155
> 
> 赞同：1
> 
> 时间：2012-12-16T02:42:30.713
> 
> 标签：javascript, jquery, ajax, jquery-datatables

基本上，我只想要一个链接到我网站上不同页面的按钮，但我想保留来自 datatables.net 的 TableTools 按钮的当前 CSS 和样式，我不想在 CSS 中鬼混以模仿某些东西是我使用 TableTools 完成的内置方式。

我的班级名称是“basic-modal”，我尝试使用 html 格式链接并为此代码打开新窗口模式，

```
 <a href="#" class="basic-modal">Modal Two</a></li> 
```

问题是当我想在数据表按钮中添加链接时。这是我的代码

```
 "aButtons": [   
               {
                 "sExtends": "ajax",
                 "sButtonText": "Add SKOM ",
                 "fnClick": function ( nButton, oConfig, oFlash )
                  {
                    window.open('jex5.htm','mywindow','width=400,height=200,left=0,top=100,screenX=0,screenY=100');
                  }
               } 
             ] 
```

它不会加载 css 类，因为我正在使用 window.open 加载新窗口。在新窗口链接中插入我的css类有什么建议和解决方案吗？

# css - Symfony 2 控制台错误

> ID：13898160
> 
> 赞同：0
> 
> 时间：2012-12-16T02:43:21.813
> 
> 标签：css, symfony

我是 Symfony2 的新手。我已经更改了我的 css，当我尝试在 eclipse shell 中再次安装我的修改时，它给了我一个错误：

> 'C:\wamp\www\Symfony' 不是内部或外部命令、可运行程序或批处理文件。

我把这行代码`C:\wamp\www\Symfony> php app/console/install`

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:08:35.333

我有一段时间没有在 Windows 上进行 Symfony2 开发，也没有完全使用过 Eclipse，但我相信这可能会有所帮助。

右键单击我的电脑，然后转到属性 > 高级 > 环境变量 > 系统变量。

在该窗口中选择“路径”并单击编辑按钮。转到“变量值”的末尾并附加此值

```
;C:\wamp\bin\php\php5.3.X 
```

重要提示：确保替换`php5.3.X`为 php 目录下的任何名称`C:\wamp\bin\php\`

然后你可以运行

```
> cd C:\wamp\www\Symfony
> php app/console install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:01:48.670

您正在寻找的命令是：

`php app/console assets:install web`

这会将“src/Vendor/SomeBundle”中“public”文件夹中的所有文件安装到“web/bundles”目录中。

# android - 使用 ADT Bundle 设置 android

> ID：13898164
> 
> 赞同：1
> 
> 时间：2012-12-16T02:44:13.460
> 
> 标签：android, adt

我正在尝试在 win7 上使用 ADT Bundle 设置 android。我已经安装了这个包，但是我找不到“Android SDK Manager”。[**当我打开此处**](http://developer.android.com/tools/help/sdk-manager.html)提到的“窗口”选项卡时，此选项不可用。

我在这里绝对是初学者，不确定是否需要安装其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:38:44.220

SDK 已经包含在包中。文件夹 adt-bundle-windows-x64/x86 应包含 2 个附加文件夹，即 eclipse 和 sdk，以及 SDK 管理器（您正在搜索的绿色 Android 图标）。

你可以从那里自己运行它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:56:50.453

因此，您已经安装了 Android SDK，但现在您需要将 ADT 插件安装到 Eclipse，以便两者能够交谈。通过在 Eclipse 中执行以下操作来做到这一点：

帮助 -> 安装新软件 -> 添加

姓名：     `Android`
地点：`https://dl-ssl.google.com/android/eclipse/`

确定 -> 加载后，检查（开发者工具） -> 下一步 -> 接受 -> 等等 -> 重启 Eclipse

下次运行 Eclipse 时，它​​会提示您设置 Android SDK，您需要将其指向 SDK 的安装目录。

**编辑**

转到Android 开发人员的[此页面](http://developer.android.com/sdk/index.html)，然后单击蓝色下载按钮。这将下载一个 ZIP，解压后将包含 Android SDK 的副本以及已配置的 Eclipse。

让我知道这个是否有效。快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:58:00.823

再次，运行 Eclipse 后出现。

Java 虚拟机启动器。错误：无法打开 'C:\Program Files (x86)\ECLIPSE...

在设置 ADT 捆绑包中，最后一段说注意：这是我的问题。如何手动更改路径

**这是一条老路，因为我无法改变它，所以就到此为止**

设置 ADT 捆绑包

ADT Bundle 提供您开始开发应用程序所需的一切，包括带有内置 ADT（Android 开发人员工具）的 Eclipse IDE 版本，以简化您的 Android 应用程序开发。如果您还没有，请下载 Android ADT Bundle。（如果您仅下载了 SDK 工具，以便与现有 IDE 一起使用，则应改为阅读设置现有 IDE。）

安装 SDK 和 Eclipse IDE 1.解压缩 ZIP 文件（名为 adt-bundle-.zip）并将其保存到适当的位置，例如主目录中的“开发”目录。2.打开adt-bundle-/eclipse/目录并启动eclipse。

而已！IDE 已经加载了 Android 开发者工具插件，并且 SDK 已准备就绪。要开始开发，请阅读构建您的第一个应用程序。

注意：不要从 adt-bundle- 目录中移动任何文件或目录。如果您移动 eclipse 或 sdk 目录，ADT 将无法找到 SDK，您需要手动更新 ADT 首选项。

保护你

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T10:35:03.487

更好地下载Android Developer 站点中提供的[ADT 包](http://developer.android.com/sdk/index.html#download)，因为 Eclipse 和 Android SDK 都包含在一个包中

下载后只需在 Android SDK 中安装您需要的所有 API 级别

# xslt - XSLT 2.0 中的尾递归函数不起作用

> ID：13898166
> 
> 赞同：3
> 
> 时间：2012-12-16T02:45:12.010
> 
> 标签：xslt, xslt-2.0, saxon

我正在尝试在 XSLT 2.0 中编写一个尾递归函数，它遍历日期的多值变量并返回最早的一个。由于某种原因，我的函数未被 SaxonHE9.4 识别为尾递归，当输入文件包含超过 150-200 个左右的条目时，我收到以下错误：

> tail_rec_test.xsl 第 73 行出错：嵌套函数调用过多。可能是由于无限递归。在内置模板规则中

**这是我的 xml 输入：**

```
<?xml version="1.0"?>
<Events>
  <Event>
    <Date>2004-01-01</Date>
  </Event>
  <Event>
    <Date>2003-01-01</Date>
  </Event>
  <Event>
    <Date>2002-01-01</Date>
  </Event>
  <Event>
    <Date>2001-01-01</Date>
  </Event>
  <Event>
    <Date>2005-01-01</Date>
  </Event>
  <Event>
    <Date>2006-01-01</Date>
  </Event>
  <Event>
    <Date>2007-01-01</Date>
  </Event>
  <Event>
    <Date>2008-01-01</Date>
  </Event>
</Events> 
```

**这是我的 xsl 文件的样子：**

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions"
    xmlns:own="http://ownfunctions">
    <xsl:output method="xml" indent="yes"/> 
    <xsl:strip-space elements="*"/>

    <xsl:function name="own:findEarliestDate">
        <xsl:param name="dates" as="xs:date*"/>

        <xsl:variable name="size"><xsl:value-of select="count($dates)" /></xsl:variable>
        <xsl:choose>
            <xsl:when test="$size &gt; 0">
                <xsl:value-of select="own:findEarliestDate-helper($dates, $size, xs:date('2050-01-01'))" />
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="''"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:function>

    <xsl:function name="own:findEarliestDate-helper" as="xs:date">
        <xsl:param name="items" as="xs:date*"/>
        <xsl:param name="i" as="xs:integer"/>
        <xsl:param name="curMin" as="xs:date"/>

        <xsl:choose>
            <xsl:when
                test="$i = 0">
                <xsl:value-of select="xs:date($curMin)"/>           
            </xsl:when>
            <xsl:otherwise>
                <xsl:variable name="item" as="xs:date">
                    <xsl:value-of select="xs:date($items[$i])"/>
                </xsl:variable>

                <xsl:variable name="next" as="xs:date">
                    <xsl:choose>
                        <xsl:when test="$item &lt; $curMin">
                            <xsl:value-of select="$item"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:value-of select="$curMin"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:variable>

                <xsl:value-of select="own:findEarliestDate-helper($items, $i - 1, $next)"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:function>

    <xsl:template match="Events">
        <xsl:variable name="items" as="xs:date*">
            <xsl:for-each select="Event">
                <xsl:value-of select="xs:date(Date)"/>
            </xsl:for-each>
        </xsl:variable>

        <Test>
            <EarliestDate>
                <xsl:value-of select="own:findEarliestDate($items)"/>
            </EarliestDate>
        </Test>
    </xsl:template>

</xsl:stylesheet> 
```

如何将其转换为正确的尾递归函数？我已经测试了这个例子，但我不能将它应用到我自己的代码中：http: [//www.nesterovsky-bros.com/weblog/2008/02/20/EfficientXslt20RecursionInSaxon9.aspx](http://www.nesterovsky-bros.com/weblog/2008/02/20/EfficientXslt20RecursionInSaxon9.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T03:40:56.547

**我无法重现这个**。

使用 Saxon 9.4.06EE（评估副本）的结果是：

```
<Test xmlns:fo="http://www.w3.org/1999/XSL/Format"
      xmlns:xs="http://www.w3.org/2001/XMLSchema"
      xmlns:fn="http://www.w3.org/2005/xpath-functions"
      xmlns:own="http://ownfunctions">
   <EarliestDate>2001-01-01</EarliestDate>
</Test>

Saxon-EE 9.4.0.6J from Saxonica
Java version 1.6.0_31
Using license serial number XXXXXXXX
Generating byte code...
Stylesheet compilation time: 2168 milliseconds
Processing file:/C:/Program%20Files/Java/jre6/bin/marrowtr.xml
Using parser com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser
Building tree for file:/C:/Program%20Files/Java/jre6/bin/marrowtr.xml using class net.sf.saxon.tree.tiny.TinyBuilder
Tree built in 10 milliseconds
Tree size: 27 nodes, 80 characters, 0 attributes
Execution time: 122ms
Memory used: 52169472
NamePool contents: 8 entries in 8 chains. 6 URIs 
```

**顺便说一句，可以使用它来产生相同的结果**：

```
<xsl:value-of select="min(/*/*/Date/xs:date(.))"/> 
```

* * *

**更新**：

问题出在这一行：

```
 <xsl:value-of select="own:findEarliestDate-helper($items, $i - 1, $next)"/> 
```

因为函数的返回类型是`xs:date`，所以上面这行并不是函数执行顺序的最后一行。它产生一个*字符串*（更准确地说，是一个文本节点），XSLT 处理器需要获取这个字符串并将其转换为`xs:date`-- 这意味着函数占用的内存不会被丢弃，调用堆栈会继续成长，直到溢出。

**解决方案很简单**：

将以上内容替换为：

```
 <xsl:sequence select="own:findEarliestDate-helper($items, $i - 1, $next)"/> 
```

这将产生一个`xs:date`，XSLT 处理器现在将该函数识别为尾递归。

**我用 1000 个事件（原始代码在这些事件上崩溃）测试了更正的代码，结果正常产生（而且速度更快）。**

```
Saxon-EE 9.4.0.6J from Saxonica
Java version 1.6.0_31
Using license serial number XXXXXXXXXX
Generating byte code...
Stylesheet compilation time: 2002 milliseconds
Processing file:/C:/Program%20Files/Java/jre6/bin/marrowtr.xml
Using parser com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser
Building tree for file:/C:/Program%20Files/Java/jre6/bin/marrowtr.xml using class net.sf.saxon.tree.tiny.TinyBuilder
Tree built in 124 milliseconds
Tree size: 3032 nodes, 9800 characters, 0 attributes
Execution time: 364ms
Memory used: 55089048
NamePool contents: 8 entries in 8 chains. 6 URIs 
```

# ruby-on-rails - 将 Rails 战争部署到 Tomcat6

> ID：13898168
> 
> 赞同：2
> 
> 时间：2012-12-16T02:45:18.857
> 
> 标签：ruby-on-rails, jruby, tomcat6, warbler

我正在将 Rails 应用程序部署到 tomcat6 服务器。

一切似乎都运行良好，但是当我尝试访问网站上的任何页面时出现 500 错误。该错误信息不是很丰富（来自 tomcat 日志文件）：

```
Dec 16, 2012 11:37:56 AM org.apache.catalina.core.ApplicationContext log
SEVERE: INFO: failed to capture exception message
org.jruby.exceptions.RaiseException: (ArgumentError) wrong number of arguments (1 for 2)
    at RUBY.capture(file:/usr/local/tomcat6/webapps/myapp/WEB-INF/lib/gems-gems-jruby-rack-1.1.12-lib-jruby-rack-1.1.12.jar!/jruby/rack/capture.rb:48)
    at RUBY.capture(file:/usr/local/tomcat6/webapps/myapp/WEB-INF/lib/gems-gems-jruby-rack-1.1.12-lib-jruby-rack-1.1.12.jar!/jruby/rack/capture.rb:59)
    at RUBY.capture(file:/usr/local/tomcat6/webapps/myapp/WEB-INF/lib/gems-gems-jruby-rack-1.1.12-lib-jruby-rack-1.1.12.jar!/jruby/rack/capture.rb:69)
    at RUBY.capture(file:/usr/local/tomcat6/webapps/myapp/WEB-INF/lib/gems-gems-jruby-rack-1.1.12-lib-jruby-rack-1.1.12.jar!/jruby/rack/capture.rb:82)
    at RUBY.capture(file:/usr/local/tomcat6/webapps/myapp/WEB-INF/lib/gems-gems-jruby-rack-1.1.12-lib-jruby-rack-1.1.12.jar!/jruby/rack/capture.rb:116)
Dec 16, 2012 11:37:56 AM org.apache.catalina.core.ApplicationContext log
INFO: DEBUG: resetting rack response due exception 
```

我的相关行`Gemfile.lock`：

```
warbler (1.3.6)
  jruby-jars (>= 1.4.0)
  jruby-rack (>= 1.0.0)
  rake (>= 0.8.7)
  rubyzip (>= 0.9.4)
jruby-jars (1.7.1)
jruby-rack (1.1.12)
rake (10.0.3)
rubyzip (0.9.9) 
```

我正在`$ rake war`使用. 我也尝试过使用该选项，并且两者都打开，但我仍然收到相同的错误消息。 `config.features = %w(compiled)``config/warble.rb``gemjar`

我怎样才能找到这个问题？

# z3 - Z3 如何处理非线性整数运算？

> ID：13898175
> 
> 赞同：33
> 
> 时间：2012-12-16T02:46:30.803
> 
> 标签：z3

我知道整数乘法的理论通常是不可判定的。然而，在某些情况下，Z3 确实返回了一个模型。我很想知道这是怎么做到的。它与实数非线性算术的新决策程序有关吗？哪些特定实例（例如：有限模下的整数等）已被识别，Z3 会为其返回乘法查询的模型？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-16T04:07:33.623

是的，非线性整数算术的决策问题是不可判定的。我们可以用非线性整数算法对图灵机的停机问题进行编码。我强烈向任何对此问题感兴趣的人推荐这本美丽[的希尔伯特第十](https://rads.stackoverflow.com/amzn/click/com/0262132958)题。

请注意，如果公式有解，我们总是可以通过蛮力找到它。也就是说，我们不断枚举所有可能的赋值，并测试它们是否满足公式。这与尝试通过运行程序并检查它是否在给定数量的步骤后终止来解决停机问题没有什么不同。

Z3 不执行简单的枚举。给定一个数字`k`，它使用位对每个整数变量进行编码，`k`并将所有内容简化为命题逻辑。然后，使用 SAT 求解器来寻找解决方案。如果找到解决方案，它会将其转换回原始公式的整数解决方案。如果命题形式没有解决方案，那么它会尝试增加`k`，或切换到不同的策略。这种对命题逻辑的简化本质上是一个模型/解决方案查找过程。它不能表明一个问题没有解决方案。实际上，对于每个整数变量都有下限和上限的问题，它可以做到。因此，Z3 不得不使用其他策略来显示不存在解决方案。

此外，只有在存在非常小的解决方案（需要对少量比特进行编码的解决方案）时，减少到命题逻辑才有效。我在下面的帖子中讨论了这一点：

*   [需要帮助理解方程](https://stackoverflow.com/questions/12326306/need-help-understanding-the-equation)

Z3 对非线性整数运算没有很好的支持。上述方法非常简单。在我看来，Mathematica 似乎拥有最全面的技术组合：

[http://reference.wolfram.com/legacy/v5_2/functions/AdvancedDocumentationDiophantinePolynomialSystems](http://reference.wolfram.com/legacy/v5_2/functions/AdvancedDocumentationDiophantinePolynomialSystems)

最后，非线性实数算术 (NLSat) 求解器默认情况下不用于非线性整数问题。它通常在整数问题上非常无效。尽管如此，即使是整数问题，我们也可以强制 Z3 使用 NLSat。我们只需要替换：

```
(check-sat) 
```

和

```
(check-sat-using qfnra-nlsat) 
```

使用此命令时，Z3 会将问题作为真正的问题来解决。如果没有找到真正的解决方案，我们就知道没有整数解决方案。如果找到解决方案，Z3 将检查解决方案是否真的将整数值分配给整数变量。如果不是这种情况，它将返回`unknown`以指示它未能解决问题。

# java - 用java将时间插入Mysql

> ID：13898177
> 
> 赞同：-2
> 
> 时间：2012-12-16T02:46:55.203
> 
> 标签：java, mysql, sql, time

我正在为不同的客户建立一个数据库，他们有他们的用户名和密码，但我想看看他们登录的时间。我使用以下代码：

```
if (userName.equals("EXAMPLE")) {

                        Calendar cal = Calendar.getInstance();
                        cal.getTime();
                        SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
                        String Time = "update `clients` set `time`=
                          "+ sdf.format(cal.getTime()) + " where clientid=1 "; 
```

但它有问题，它不会更新表。我将衷心感谢您的帮助。另外，作为一个额外的问题，如果您能帮助我更新时间和日期，那就太好了。谢谢谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:24:38.973

我想出了答案。

```
public static final String DATE_FORMAT_NOW = "yyyy-MM-dd HH:mm:ss";

public static String now() {
    Calendar cal = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT_NOW);
    return sdf.format(cal.getTime());
           } 
```

然后在需要时调用 now() ：

```
if (userName.equals("EXAMPLE")) {

                        //update time when client logged in
                        String Time = "update `clients` set `time`='" + now() + "' where clientid=1 "; 
                        stmt.executeUpdate(Time);

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:53:39.607

使用带有参数的准备好的语句。这样您就不必格式化日期。可以保存整个日期和时间。

看看这个链接[http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)。

也很难说为什么它没有更新，因为你没有发布任何数据库更新发生的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T02:53:46.973

您只是在值周围缺少单引号

```
String Time = "update `clients` set `time`=
                      '" + sdf.format(cal.getTime()) + "' where clientid=1 "; 
```

但请记住，这个易受攻击的 with 使用`SQL Injection`参数化查询`PreparedStatements`

*   [准备好的语句](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

前任

```
String Time = "update `clients` set `time`= ? where clientid=1 ";
PreparedStatement pstmt = con.prepareStatement(Time);
pstmt.setDate(1, cal.getTime());
pstmt.executeUpdate(); 
```

# backbone.js - 主干更改事件不会更新视图

> ID：13898184
> 
> 赞同：0
> 
> 时间：2012-12-16T02:48:55.813
> 
> 标签：backbone.js

有人对为什么在模型上执行 .set 时这个该死的视图不会更新有任何想法吗？我认为如果可能与我放入的渲染功能有关......

骨干视图：

```
 App.Views.PanelOne = Backbone.View.extend({

    initialize: function() {
        console.log("View PanelOne Initialized");

        panelonesetting = this.model.get('panel_one');
        console.log( panelonesetting );

        _.bindAll(this, 'render');
        this.model.bind('change', this.render);

    },

    render: function(){
        if ( panelonesetting == "poolprice" ){
            this.$el.html(JST['dashboard/poolprice']({}));
        return this;
        };
        if ( panelonesetting == "none" ){
            this.$el.html(JST['dashboard/none']({}));
        return this;
        };
        if ( panelonesetting == "noconnection" ){
            this.$el.html(JST['dashboard/noconnection']({}));
        return this;
        };
    }

}); 
```

骨干路由器：

```
App.Routers.Dashboard = Backbone.Router.extend({

    routes: {
        ""          : "index"       
        },

    initialize: function(options) {
    console.log("Router initialized");
      preflist = new App.Models.PrefList({});

    preflist.fetch({
        success: function() {
            console.log( preflist );
          paneloneview = new App.Views.PanelOne({ model: preflist });
          $('#panelone').html(paneloneview.render().$el);             
        }  
    });
  },

    index: function() {

    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:00:56.950

你有一些意外的全局变量。特别是，您的视图中有这个`initialize`：

```
panelonesetting = this.model.get('panel_one'); 
```

然后`render`看看`panelonesetting`。没有`var`，`panelonesetting`所以它是一个全局变量。

该`initialize`方法在您构建视图时被调用，并且不再被调用；这意味着`panelonesetting`将被分配初始`panel_one`值，然后永远不会更新。因此，如果模型发生更改，您`render`将被调用，但它会查看原始`panel_one`设置。结果是似乎什么都没有改变：你可以`render`用你想要的任何模型更改来调用你想要的任意多次，而且你永远不会看到任何事情发生。

您应该检查方法`panel_one`内部的值`render`：

```
initialize: function() {
    _.bindAll(this, 'render');
    this.model.bind('change', this.render);
},

render: function(){
    var panelonesetting = this.model.get('panel_one');
    if(panelonesetting == "poolprice")
        this.$el.html(JST['dashboard/poolprice']({}));
    if(panelonesetting == "none")
        this.$el.html(JST['dashboard/none']({}));
    if(panelonesetting == "noconnection")
        this.$el.html(JST['dashboard/noconnection']({}));
    return this;
} 
```

当您`preflist and`的路由器中的 paneloneview 变量几乎肯定是本地的时，它们也是全局的。

# ios - didUpdateToLocation 未第二次调用

> ID：13898185
> 
> 赞同：3
> 
> 时间：2012-12-16T02:49:09.400
> 
> 标签：ios, core-location, cllocationmanager, cllocation

在我们的应用程序中，我使用 CoreLocation 来获取用户的位置。我认为对 startUpdatingLocation 的调用每次都会调用 locationManager:didUpdateLocations。但是一旦第一次被调用，他们就再也不会被调用了。

在我的 AppDelegate.m 中：

```
- (void) startStandardUpdates {
 if (_locationManager == nil) {
    _locationManager = [[CLLocationManager alloc] init];
    [_locationManager setDelegate:self];
    _locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    _locationManager.distanceFilter = 10;
    [_locationManager startUpdatingLocation];

 } else {
    NSLog(@"[LOCATION]: Location Manager already exists.");
    [_locationManager startUpdatingLocation];
 }
} 
```

然后通过 NSTimer 调用它：

```
- (void) startTask {
  NSLog(@"Start task called.");
  [NSTimer scheduledTimerWithTimeInterval:15
                                   target:self
                                 selector:@selector(actualTask)
                                 userInfo:nil
                                  repeats:YES];
}

- (void) actualTask {
  NSLog(@"[TASK]: Starting location service...");
  [self startStandardUpdates];
} 
```

上面的代码应该每 15 秒调用一次 startUpdatingLocation，但第二次没有调用 didUpdateToLocation 方法（第一次调用成功......）。

有没有办法以“编程方式”调用（或强制）didUpdateToLocation？或者我们必须等到 didUpdateToLocation 获得位置？我已经搜索了每隔 x 分钟/秒获取用户位置的方法，但似乎没有人成功实现这一目标。我想做的只是相当于Android如何使用Service类（iOS没有这个）。

任何帮助，将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T04:46:42.680

_locationManager.distanceFilter=10; 您的距离过滤器设置为 10m，您将不会收到通知。一旦位置移动到足以超过您的距离过滤器设置，那么您将获得 didUpdateToLocation 回调...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T03:54:32.250

唔。一旦你开始更新位置，它就会开始。根据您选择的精度，几乎不间断，因此无需继续启动它。它将等待与您的准确性相匹配的重大位置更改……它会为您处理所有这些效率和功率权衡的事情。您是否尝试过使用模拟器并选择行车路线选项？它可能会帮助您更多地了解它的运动（仅启动一次）。

如果您只需要它每 15 秒给您一次 ping，那么可能开始更新......然后只需在计时器中每 15 秒读取一次当前位置/航向？

```
- (void) actualTask {
    NSLog("Currently at: %@", MyLocationManager.location.coordinate);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T11:27:26.357

我想如果你在建筑或复杂的话`didUpdateLocations`就不会打电话了。如果您可以进行实时测试，例如在设备上进行构建，则只需移动到开放空间，以便 GPS 可以获取数据，您将收到数据。如果你走路那么它也不会经常得到`didUpdateLocations`。您必须在汽车/公共汽车或自行车上进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-03T12:33:37.770

在您的代码中，更改`distancefilter=10`为`kCLDistanceFilterNone`

# php - imagejpeg() 函数不会输出图像

> ID：13898186
> 
> 赞同：1
> 
> 时间：2012-12-16T02:49:08.197
> 
> 标签：php, gd

好的，所以我正在学习如何使用 PHP 的 GD 库来生成投票、图像等。问题是当使用该`imagejpeg`函数输出图像时，屏幕上什么都没有显示。对于这个练习，我在 HTML 论坛上输入文本，需要使用 GD 库将文本放在图像上，基本上是在图像上放置文本。这很简单，我只是不明白为什么我的图像不会显示。下面是 HTML 表单代码和 PHP 代码。

HTML 表单：

```
<html>
    <head> 
        <title> Create Buttons </title> 
    </head>
    <body>
        <form action ="button.php" method ="post">
            <p> Type button text here </p>
            <input type="text" name="button_text" size ="20" />
            <p> Choose button color: </p>
            <input type ="radio" name="color" value="red"> Red <br>
            <input type ="radio" name="color" value="green"> Green <br>
            <input type ="radio" name="color" value="blue"> Blue <br>
            <input type ="submit" value ="Create Button" />
        </form>    
    </body>
</html> 
```

PHP代码：

```
<?php
Header('Content-type: image/jpeg');
$DOCUMENT_ROOT = $_SERVER['DOCUMENT_ROOT'];
$button_text = $_POST['button_text']; var_dump($button_text);
$color = $_POST['color']; var_dump($color);
if(empty($color) || empty($button_text)) {
    echo " Could not create image - form not filled correctly";
    exit;
}
$path = $DOCUMENT_ROOT."/uploads/$color-button.jpg";
$im = imagecreatefromjpeg ($path);
$width_image = imagesx($im);
$height_image = imagesy($im);

$width_image_wo_margins = $width_image-(2*18);
$height_image_wo_margins = $width_image-(2*18);

$font_size = 33;
putenv('GDFONTPATH=C:\Windows\Fonts');

$fontname = getenv('GDFONTPATH') . '\comic.ttf';
if(!is_file($fontname)) {
    die( "Missing Font");
}

do {
    $font_size--;
    $bbox = imagettfbbox($font_size,0,$fontname,$button_text);
    $right_text = $bbox[2];
    $left_text = $bbox[0];
    $width_text  = $right_text -$left_text;
    $height_text = abs($bbox[7] - $bbox[1]);
}

while($font_size > 8 && ( $height_text > $height_image_wo_margins || $width_text > $width_image_wo_margins));

if ( $height_text > $height_image_wo_margins || $width_text > $width_image_wo_margins) {
    echo "Text given wil not fit on button.<br />";
} else {
    $text_y = $width_image/2.0 - $width_text/2.0;
    $text_x = $height_image/2.0 - $height_text/2.0;

    if($left_text < 0) {
        $text_x += abs($left_text); //add factor for left overhang.  
    }
    $above_line_text = abs($bbox[7]);
    $text_y += $above_line_text;
    $text_y -=2;
    $white = imagecolorallocate($im,255,255,255);
    imagettftext($im, $font_size, 0, $text_x, $text_y, $white, $fontname, $button_text);

    imagejpeg($im, NULL,75); 
}
imagedestroy($im);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:58:19.373

它没有显示，因为您实际上没有做任何事情来显示图像。当这个脚本创建一个图像时，你需要另一个来实际调用它，就像在普通 HTML 中一样。

该主题之前已在 SO 上介绍过：[PHP GD 库：在同一页面上输出图像和文本](https://stackoverflow.com/questions/8338695/php-gd-library-output-an-image-and-text-content-on-same-page)。

我还建议您完成一两个教程。如果您进行快速搜索，有几十个可用。我不会冒着把它变成“20 个伟大的 GD 教程”的风险在这里发布任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:04:22.917

使用对我有用的 header('Content-Type: image/jpeg') 时删除 echo 语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T03:49:00.157

你的问题是`var_dump`陈述。

那就是将文本发送到您的输出。该`imagejpeg()`调用可能会很好地创建图像，但它不会与`var_dump`语句一起呈现。

# c# - 尝试在 C# 中设置 xaml 矩形的填充颜色，但更改未在运行时反映

> ID：13898190
> 
> 赞同：0
> 
> 时间：2012-12-16T02:49:52.847
> 
> 标签：c#, windows-8, winrt-xaml

我有这个 XAML 矩形 -

```
<Rectangle x:Name="rctRGB"
           HorizontalAlignment="Left"
           Margin="100,316,0,0"
           Stroke="Black"
           VerticalAlignment="Top" Height="100" Width="702"/> 
```

我有三个滑块，并尝试使用它们分别设置 RGB 值。此事件正确触发，但矩形只是简单地不改变颜色。

```
private void FillRectangle()
{
  Windows.UI.Color c = new Windows.UI.Color();
  c.R = Convert.ToByte(sldRed.Value);
  c.G = Convert.ToByte(sldGreen.Value);
  c.B = Convert.ToByte(sldBlue.Value);
  Brush b = new SolidColorBrush(c);
  rctRGB.Fill = b;
} 
```

我很迷茫为什么这没有发生；我是否必须强制矩形重绘自身？如果是这样，我该怎么做？还是有其他问题？

谢谢 ！

（注意，这是一个 Windows 8 商店项目；我不知道这是否相关，因为我以前没有在 WPF/XAML 中工作过）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T05:34:31.320

您还没有设置默认为 0 的 alpha 通道，所以您的颜色就在那里，它只是透明的。

为 Alpha 通道添加另一个滑块，或者将以下内容添加到您的代码中：

```
c.A = 255; 
```

# delphi - 将位图写入/读取到 tfilestream

> ID：13898191
> 
> 赞同：6
> 
> 时间：2012-12-16T02:50:09.500
> 
> 标签：delphi, bitmap, tfilestream

我已经搜索和搜索，似乎找不到任何描述我在delphi代码中要做的事情。溶液有时很接近，但不够接近，我无法弄清楚。所以我在这里问..

我有很多位图，我正在从屏幕截图中提取。我一直在做的是保存到bitmaps_001.bmp，但是它需要很多存储空间，所以我升级了例程以保存为bitmaps_001.png，这样可以节省更多的空间，但是现在我想保存到一个文件中，一个 tfilestream，并使用 tprogressbar 从中读取，我可以在屏幕上显示图像时向左/向右拖动。

基本上，我正在尝试完成以下操作：

```
procedure SaveBMPtoStream(st: tfilestream; bmp: tbitmap);
procedure ReadBMPfrStream(st: tfilestream; bmp: tbitmap; bnum: integer); 
```

到目前为止，代码（下面）按原样工作，（它在按下 tbutton 时写入和读取一个位图图像）但我只能写一个位图图像。我需要将每个会话所需的尽可能多的图像实时写入 tfilestream，可能使用 ttimer 控件并让它写入尽可能多的图像，直到我按下停止按钮。我该怎么做才能修改下面的代码来解决这个问题？谢谢你。

我正在运行 Windows XP，连接到带有 NTFS 文件系统的外部 usb3.0 1tb 驱动器。

```
type
  TMS = TFileStream; 
var
  MS:  TMS; 
  pos: int64;   // bnum for 0-99,999 images.
  sz:  integer; // size of the image/stream ?

//write bitmaps to stream
procedure SaveBMPtoStream(ms: TMS; Bmp: TBitmap; bnum: integer);
begin
  // create (or append to) stream
  if fileexists('d:\streams\s.stm') then MS := TFileStream.Create('d:\streams\s.stm', fmOpenReadWrite)
    else MS := TFileStream.Create('d:\streams\s.stm', fmCreate);
  //sz:=MS.Size; pos:=ms.Position;
  bmp.SaveToStream(MS); 
  // free stream
  ms.free;
end;

//read bitmaps from stream
procedure ReadBMPfrStream(ms: TMS; Bmp: TBitmap; bnum: integer);
begin
  // open stream.
  MS := TFileStream.Create ('d:\streams\s.stm', fmOpenReadWrite); 
  // read in bitmap from stream
  //sz:=MS.Size; pos:=ms.Position;
  bmp.LoadFromStream(MS);
  // free stream
  ms.free;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T08:04:02.463

```
Function LoadBMPFromStream(const fn: String; Bmp: TBitmap; Nr: Integer):Boolean;
var // Nr is 0 based first Bitmap=0
  fs: TFileStream;
  ms: TMemoryStream;
  intNr: Integer;
  pos: Cardinal;
  size: DWord;
begin
  intNr := 0;
  if fileexists(fn) then
  begin
    Result := true;
    fs := TFileStream.Create(fn, fmOpenRead or fmShareDenyNone);
    try
      fs.Read(size, SizeOf(DWord)); // Read Size of first Bitmap
      while (Nr > intNr) and (fs.Position < fs.size) do
      begin
        fs.Seek(size, soFromCurrent);
        fs.Read(size, SizeOf(DWord)); // Read Size of  Bitmap with intNr
        inc(intNr);
      end;
      if fs.Position < fs.size then
      begin
        ms := TMemoryStream.Create;
        try
          ms.CopyFrom(fs, size);
          ms.Position := 0;
          Bmp.LoadFromStream(ms);
        finally
          ms.Free;
        end;
      end
      else Result := false;
    finally
      fs.Free;
    end;

  end;
end;

procedure SaveBMPtoStream(const fn: String; Bmp: TBitmap);
var
  fs: TFileStream;
  ms: TMemoryStream;
  pos: Cardinal;
  size: DWord;
begin
  if fileexists(fn) then
  begin
    fs := TFileStream.Create(fn, fmOpenReadWrite or fmShareDenyNone);
    fs.Seek(0, soEnd);
  end
  else
  begin
    fs := TFileStream.Create(fn, fmCreate or fmShareDenyNone);
  end;
  try
    ms := TMemoryStream.Create;
    try
      Bmp.SaveToStream(ms);
      size := ms.size;
      ms.Position := 0;
      fs.Write(size, SizeOf(DWord)); // Write Size of next Bitmap first
      fs.CopyFrom(ms, size);
    finally
      ms.Free;
    end;
  finally
    fs.Free;
  end;

end;

procedure TForm6.Button2Click(Sender: TObject);
begin
  // load first Picture
  LoadBMPFromStream('C:\temp\test.str', Image3.picture.bitmap, 0);
  // load third picture
  // LoadBMPFromStream('C:\temp\test.str', Image3.picture.bitmap, 2);
end;

procedure TForm6.Button1Click(Sender: TObject);
begin
  SaveBMPtoStream('C:\temp\test.str', Image1.picture.bitmap);
  SaveBMPtoStream('C:\temp\test.str', Image2.picture.bitmap);
  SaveBMPtoStream('C:\temp\test.str', Image1.picture.bitmap);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:47:25.533

您想将所有图像保存到同一个文件吗？然后，您最简单的选择是使用 0 压缩（仅存储）的 7zip 文件，这将非常轻松地为您管理存档中文件的索引/保存/检索。

这是一个很好的免费组件，可以做到这一点：[http ://www.rg-software.de/rg/index.php?option=com_content&view=article&id=29&Itemid=51](http://www.rg-software.de/rg/index.php?option=com_content&view=article&id=29&Itemid=51)

您现在也可以再次尝试仅使用位图，同时在 7zip 中使用快速压缩设置，这可能会获得比 PNG 更好的速度。

# magento - 我的自定义 Magento 扩展程序出现 404 页面未找到错误

> ID：13898194
> 
> 赞同：1
> 
> 时间：2012-12-16T02:53:35.630
> 
> 标签：magento, module, http-status-code-404, block, adminhtml

首先让我说我已禁用并清除缓存并注销并重新登录。但是，我仍然收到此错误。

其次，让我解释一下我要做什么。顺便说一句，这是我的第一个扩展构建:) 我只是想构建一个扩展，如果启用它，它将用我自己的模板文件覆盖原始的 cart/shipping.phtml 文件。

我可以在管理员配置下的左侧边栏中看到我的扩展。但是，当我单击我的扩展程序以拉出允许您禁用或启用它的常规选项卡时，我得到了可怕的 404 页面未找到。你能看看我的代码，让我知道我做错了什么吗？感谢所有帮助的人！

这是我所有的文件:)

等/config.xml

```
<?xml version="1.0"?>
<config>    
<modules>
<Beckin_DropDownShipping><version>1.0.0</version></Beckin_DropDownShipping>
    </modules>

<global>
            <blocks>
                 <dropdownshipping>
                      <class>Beckin_DropDownShipping_Block</class>
                 </dropdownshipping>
            </blocks>

    <helpers>
         <dropdownshipping>
          <class>Beckin_DropDownShipping_Helper</class>
         </dropdownshipping>
    </helpers>      
</global>

 <frontend>
    <layout>
        <updates>
            <beckin>
                <file><!-- beckin_dropdownshipping.xml --></file>
            </beckin>
        </updates>
    </layout>
    <routers>
        <dropdownshipping>
            <use>standard</use>
            <args>
                <module>Beckin_DropDownShipping</module>
                <frontName>dropdownshipping</frontName>
            </args>
        </dropdownshipping>
    </routers>  
 </frontend>

 <adminhtml>
    <acl>
        <resources>
            <admin>
                <children>
                    <system>
                        <children>
                            <config>
                                <children>
                                    <dropdownshipping_options>
                                        <title>Beckin Drop Down Shipping Extension</title>
                                    </dropdownshipping_options>
                                </children>
                            </config>
                        </children>
                    </system>
                </children>
            </admin>
        </resources>
    </acl>
</adminhtml>

</config> 
```

等/system.xml

```
<?xml version="1.0"?>
<config>
<tabs>
    <beckin translate="label">
        <label>Beckin Extensions</label>
        <sort_order>100</sort_order>
    </beckin>
</tabs> 
<sections>  
            <dropdownshipping translate="label">
        <label>Drop Down Shipping</label>
        <tab>beckin</tab>
        <frontend_type>text</frontend_type>
        <sort_order>1000</sort_order>
        <show_in_default>1</show_in_default>
        <show_in_website>1</show_in_website>
        <show_in_store>1</show_in_store>

            <groups>            

                <settings translate="label">
                <label>Settings</label>
                <frontend_type>text</frontend_type>
                <sort_order>1</sort_order>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>       
            <fields>
                <enable translate="label">
                <label>Enable</label>
                <comment>
                <![CDATA[Enable or Disable this extension.]]>
                </comment>
                <frontend_type>select</frontend_type>
                <source_model>adminhtml/system_config_source_yesno</source_model>
                <sort_order>1</sort_order>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>                    
                </enable>           
            </fields>

                </settings>
            </groups>
        </dropdownshipping>
</sections>     
</config> 
```

助手/Data.php

```
<?php
class Beckin_DropDownShipping_Helper_Data extends Mage_Core_Helper_Abstract
{   

} 
```

块/购物车/Shipping.php

```
<?php

class Beckin_DropDownShipping_Block_Cart_Shipping extends Mage_Checkout_Block_Cart_Shipping
{

protected function _construct()       
    if(Mage::getStoreConfig('dropdownshipping/general/enable', Mage::app()->getStore()->getId())
    {
    $this->setTemplate('Beckin/dropdownshipping/drop_down_shipping.phtml');
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T06:41:02.000

在您的配置文件中，acl 部分：更改

```
<dropdownshipping_options>
    <title>Beckin Drop Down Shipping Extension</title>
</dropdownshipping_options> 
```

至

```
<dropdownshipping>
    <title>Beckin Drop Down Shipping Extension</title>
</dropdownshipping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T22:45:20.627

我也遇到了 404 错误的问题，最终帮助我弄清楚的答案在这里：[https ://stackoverflow.com/a/6426041/3424147](https://stackoverflow.com/a/6426041/3424147)

在链接到[博客文章](http://alanstorm.com/custom_magento_system_configuration)并阅读了一些评论后，我发现了一篇关于手动清除会话数据的评论。事实证明，对我来说，注销并重新登录不足以更新会话中的 ACL 数据，但是在`var/session`我从新的管理配置菜单部分手动清除会话文件后开始工作（不再出现 404 错误）。

# json - Json.net：条件属性序列化 - 每个 Web 请求

> ID：13898198
> 
> 赞同：2
> 
> 时间：2012-12-16T02:53:49.190
> 
> 标签：json, serialization

在某些应用程序中，允许 Web 端点的使用者在返回的对象图中指定他们想要的属性子集，根据请求进行自定义，这很方便。调用者将在查询字符串/请求中指出他们想要的属性。需要自定义每个请求的序列化，而不是每个类型结构。我想不出一个理想的方法来解决这个问题——理想情况下，它不强制对视图模型（要序列化的对象）进行任何更改，而只是为每个端点启用此功能（例如，通过在端点上放置一个属性）。

今天有一种方法可以做到这一点，例如在 MVC4/Web Api 中，但它并不理想。JSonPropery 上的 ShouldSerialize 谓词几乎是不需要更改任何视图模型所需的，除了回调只提供实例/对象而没有上下文（用户想要哪些属性，您在对象图中的位置）。如果您只对一种类型进行过滤就可以了，那么这将起作用（如果您使用请求全局 HttpContext），但这不适用于更通用的解决方案来进行分层过滤和/或当一个类型可以出现在多个级别中时对象图。

目前，我看到的一种方法是为要序列化的视图模型提供一个基类/接口，然后实现 ISerializable。您还必须编写自己的 MediaTypeFormatter 以便您可以将内容填充到流上下文中以完成过滤所需的工作，例如查询字符串中指定的字段以及访问具有方便 Path 属性的编写器可用于轻松地对属性名称进行分层和/或通配符过滤。

我看不到无需触摸视图模型对象的方法。我们需要在序列化程序中添加功能。一种方法是将流式上下文添加到 ShouldSerialize 回调签名中（可能需要在 JSonProperty 接口上使用新方法，除非可以选择指定传入的实例对象的格式也包含流式上下文）。添加按属性名称过滤的逻辑仍然是我们的工作。另一种方法是将逻辑烘焙到 JSonSerializerInternalWriter::ShouldSerialize 方法上，并在序列化设置中有条件地启用该功能。

关于如何在不接触视图模型的情况下执行此操作的任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T15:39:27.840

**两种可能的解决方案**

1.  我的想法是使用[此处](http://james.newtonking.com/json/help/index.html?topic=html/ConditionalProperties.htm)描述的[IContractResolver](http://james.newtonking.com/json/help/html/T_Newtonsoft_Json_Serialization_IContractResolver.htm) ，但使用 c'tor 参数以某种方式控制它。

    公共类 ShouldSerializeContractResolver : DefaultContractResolver { private readonly bool _alwaysIncludeManager; public new static readonly ShouldSerializeContractResolver Instance = new ShouldSerializeContractResolver();

    ```
    public ShouldSerializeContractResolver(bool alwaysIncludeManager = true)
    {
        _alwaysIncludeManager = alwaysIncludeManager;
    }

    protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
    {
        JsonProperty property = base.CreateProperty(member, memberSerialization);

        if (property.DeclaringType == typeof(Employee) && property.PropertyName == "Manager")
        {
            property.ShouldSerialize =
                instance =>
                {
                    Employee e = (Employee)instance;
                    return e.Manager != e || _alwaysIncludeManager;
                };
        }

        return property;
    } 
    ```

    }

2.  对于更简单的事情，我过去只是在序列化之前将其转换为匿名对象：

-

```
List<Employee> employeeList = LoadEmployeeList();
bool alwaysIncludeManager = true; //Set by context
var outputList = employeeList.Select(x =>
    new
    {
        x.Name,
        Manager = (Manager != x || alwaysIncludeManager)
                    ? x.Manager : null
    });
//Then return this anonymous object, or serialize it 
```

# security - 是否有一种安全的方式允许 JavaScript 在用户生成的内容中使用子域？

> ID：13898203
> 
> 赞同：1
> 
> 时间：2012-12-16T02:55:12.817
> 
> 标签：security, cookies, subdomain, xss

考虑一个博客站点，其中博客的每个用户都有子域，`foo.blog.com`或者`bar.blog.com`允许在布局和帖子中使用 JavaScript。

用户登录以`www.blog.com`进行编辑，因此需要 cookie 沙盒。

这样做有哪些潜在的安全风险，以及仅使用`blog.com`域来解决问题的现代方法是什么？

# c - recvfrom：错误地址，sendto：协议不支持的地址族

> ID：13898207
> 
> 赞同：2
> 
> 时间：2012-12-16T02:56:47.087
> 
> 标签：c, udp, chat, recv, sendto

我正在尝试在 C 中实现一个小的 UDP-Server/Client 应用程序，并在服务器端遇到两个错误： **recvfrom: Bad address** && **sendto: Address family not supported by protocol**。我搜索了错误并搜索了答案，但不幸的是，它们并没有真正有帮助......也许我以错误的方式投射参数并且没有得到它。我希望你能给我一个提示:)。

```
#include <unistd.h>
#include <ctype.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <arpa/inet.h>
#include <errno.h>

#define BUFFSIZE 256
#define IP "127.0.0.1"
#define PORT 7755

int main(void){

  int socket_fd = socket(AF_INET, SOCK_DGRAM, 0);
  char buffer[1] = "s";

  struct sockaddr_in src_addr;
  struct sockaddr_in dest_addr;

  src_addr.sin_family = AF_INET;
  src_addr.sin_port = htons(PORT);
  src_addr.sin_addr.s_addr = inet_addr(IP);

  if(socket_fd==-1)
    perror("socket");

  if(bind(socket_fd, (struct sockaddr*)&src_addr, sizeof(src_addr))==-1)
    perror("bind");

  if(recvfrom(socket_fd, buffer, 2, 0, (struct sockaddr*)&dest_addr, (unsigned int *)sizeof(struct sockaddr_in))==-1)
    perror("recvfrom");

  if(sendto(socket_fd, buffer, 2, 0,(struct sockaddr*)&dest_addr, sizeof(dest_addr))==-1)
    perror("sendto");

  if(close(socket_fd)==-1)
    perror("close");

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T03:00:28.817

您需要将有效指针传递给 recvfrom。`(unsigned int *)sizeof(struct sockaddr_in)`不是一个有效的指针。

改变

```
 if(recvfrom(socket_fd, buffer, 2, 0, (struct sockaddr*)&dest_addr, 
             (unsigned int *)sizeof(struct sockaddr_in) == -1) 
```

例如

```
 socklen_t len = sizeof dest_addr;
 if(recvfrom(socket_fd, buffer, 2, 0, 
             (struct sockaddr*)&dest_addr, &len) == -1) 
```

您还在构造一个您发送的无效数组，您的数组长度为 1，但您告诉 sendto/recvfrom 它的长度为 2。所以更改

```
char buffer[1] = "s"; 
```

至

```
char buffer[] = "s"; 
```

（字符串 "s" 是字符 's' 和一个 0 字节，因此`buffer`在后一种情况下长度为 2。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:44:33.823

`recv/recvmsg/recv`从主页引用 Fedora 18 Beta ：

```
ssize_t recv(int sockfd, void *buf, size_t len, int flgags);  
ssize_t recvfrom(int sockfd, void*buf, size_t len, int flags,  
       struct sockaddr *src_addr, socklen_t* addrlen); 
```

`recvfrom`应从以下调整：

```
 recvfrom(socket_fd, buffer, 2, 0, (struct sockaddr*)&dest_addr, 
             (unsigned int *)sizeof(struct sockaddr_in) == -1) 
```

至：

```
 recvfrom (socket_fd, buffer, sizeof(buffer), 0, 
            (struct sockaddr*)&dest_addr, &addrlen); 
```

*   你没有初始化`dest_addr`
*   数组`(eg _buffer_)`始终是指针类型
*   在生产程序中缓冲区必须大得多（动态大小），否则缓冲区的固定大小将成为堆栈粉碎的目标（安全漏洞）。

# android - 2.3 上未调用 AsyncTask onPostExecute

> ID：13898210
> 
> 赞同：3
> 
> 时间：2012-12-16T02:56:56.763
> 
> 标签：android, android-asynctask

我有一段代码使用 AsyncTask 在后台运行。代码与此类似：

```
private class MyAsyncTask extends AsyncTask<Void, Void, Object> {

    public MyAsyncTask() {
        // Some init. code
    }

    @Override
    protected Object doInBackground(Void... params) {
        // Doing some long running task.
        Log.v(TAG, "Finished everything. Returning ...");
        return result;
    }

    @Override
    protected void onCancelled(Object result) {
        // Either way, run the next one in the line.
        Log.v(TAG, "Task cancelled");
    }

    @Override
    protected void onPostExecute(Object result) {
        Log.v(TAG, "Task Completed.");
    } 
```

}

在 Android 4 上它工作得很好，但是当我在 2.3 上运行它（HTC Wildfire 是我目前唯一的测试手机）时，不会调用 onPostExecute。

我可以看到来自 的最后一条消息`doInBackground`，但没有来自`onCancelled`或的消息`onPostExecute`。有没有其他人面临同样的问题？我发现这个[链接](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/RJODLQfD8m0)讨论了一个类似的问题，但既没有给出明确的解决方案（只是建议使用普通线程而不是`AsyncTask`），也不是我正在寻找的。

有什么建议么？

干杯

## 编辑1：

好的，在花了一天时间阅读了 , 和 2.3 和 4 的代码之后`AsyncTask`，`Handler`我`Message`现在对正在发生的事情有了更多的线索。

首先多一点关于我的设计。我有一个单例类，它既可以在应用程序中使用，也可以在从我的应用程序启动的某些服务中使用。所以`AsyncTask`我上面展示的代码既可以从活动中运行（假设单例是通过活动访问的），也可以从服务中运行（如果单例是通过服务访问的）。

现在在 API 11+ 中，无论单例如何访问，`onPostExecute`都可以正常调用。在 API 10 及以下版本中，如果从 Activity 访问单例，则`onPostExecute`可以正常调用，但如果通过服务访问，`onPostExecute`则不会调用。

这是有关卡住位置的更多详细信息。`AsyncTask`在 2.3 上有一个`FutureTask`覆盖`done`函数以将 a 发送`Message`到其内部`Handler`，如下所示：

```
 mFuture = new FutureTask<Result>(mWorker) {
        @Override
        protected void done() {
            Message message;
            Result result = null;

            try {
                result = get();
            } catch (final InterruptedException e) {
                android.util.Log.w(AsyncTask.LOG_TAG, e);
            } catch (final ExecutionException e) {
                throw new RuntimeException("An error occured while executing doInBackground()",
                        e.getCause());
            } catch (final CancellationException e) {
                message = AsyncTask.sHandler.obtainMessage(AsyncTask.MESSAGE_POST_CANCEL,
                        new AsyncTaskResult<Result>(AsyncTask.this, (Result[]) null));
                message.sendToTarget();
                return;
            } catch (final Throwable t) {
                throw new RuntimeException("An error occured while executing "
                        + "doInBackground()", t);
            }

            message = AsyncTask.sHandler.obtainMessage(AsyncTask.MESSAGE_POST_RESULT, new AsyncTaskResult<Result>(AsyncTask.this, result));
            message.sendToTarget();
        }
    }; 
```

以下代码的最后两行调用`message.sendToTarget`了应该调用`handleMessage`的`Handler`类，但事实并非如此！现在我不知道为什么对处理程序的回调发生在活动而不是服务中！我有一些解决方案如何解决这个问题（只是在我的代码中始终使用 API15+ 的 AsyncTask 类），但是任何关于这个原因的解释都将非常感激，因为我对此一无所知！

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-16T03:08:50.463

[官方文档很详细，试试看。](http://developer.android.com/reference/android/os/AsyncTask.html)

请检查此链接它可能对您有所帮助

[http://foo.jasonhudgins.com/2010/05/limitations-of-asynctask.html](http://foo.jasonhudgins.com/2010/05/limitations-of-asynctask.html)

好的~注意：

onCancel 函数在您调用 cancel(boolean) 方法时执行。你有没有调用这个函数？

# java - Java - 如何从 JTeXtField 中获取变量并在算法 J48 中使用

> ID：13898212
> 
> 赞同：2
> 
> 时间：2012-12-16T02:57:46.917
> 
> 标签：java, swing, static, compiler-errors

我想在 Java 中创建一个小应用程序——一个按钮和一个 JTextField。此外，我使用从 J48 算法生成“树”的代码（我在寻找 WEKA totorial 时在网上找到代码）。可变表单文本字段应该在此代码中使用（实现 J48）。我创建了这样的东西，但它不起作用：

```
package visio;

import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

import java.awt.BorderLayout;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.BufferedReader;
import java.io.FileReader;

import javax.swing.JFrame;

import weka.classifiers.trees.J48;
import weka.core.Instances;
import weka.gui.treevisualizer.PlaceNode2;
import weka.gui.treevisualizer.TreeVisualizer;

public class Visio extends JFrame implements ActionListener {

    int temp;
    JTextField pole;
    JButton button = new JButton("bb");

    public Visio() {

        setSize(400, 400);
        setTitle("okno");

        setLayout(null);

        button.setBounds(50, 50, 100, 20);
        add(button);

        button.addActionListener(this);

        pole = new JTextField("");
        pole.setBounds(20, 70, 150, 20);
        add(pole);

    }

    public static void main(String[] args) throws Exception {

        Visio okienko = new Visio();
        okienko.setDefaultCloseOperation(EXIT_ON_CLOSE);
        okienko.setVisible(true);

        // train classifier
        J48 cls = new J48();

        BufferedReader reader;
        reader = new BufferedReader(new FileReader("E:/Desktop/weka.arff"));
        Instances data = new Instances(reader);
        reader.close();

        /* Instances data = new Instances(new BufferedReader(new FileReader(args[0])));*/
        data.setClassIndex(data.numAttributes() - temp);
        cls.buildClassifier(data);

        // display classifier
        final javax.swing.JFrame jf =
                new javax.swing.JFrame("Weka Classifier Tree Visualizer: J48");
        jf.setSize(500, 400);
        jf.getContentPane().setLayout(new BorderLayout());
        TreeVisualizer tv = new TreeVisualizer(null,
                cls.graph(),
                new PlaceNode2());
        jf.getContentPane().add(tv, BorderLayout.CENTER);
        jf.addWindowListener(new java.awt.event.WindowAdapter() {
            @Override
            public void windowClosing(java.awt.event.WindowEvent e) {
                jf.dispose();
            }
        });

        jf.setVisible(true);
        tv.fitToScreen();

    }

    @Override
    public void actionPerformed(ActionEvent e) {

        temp = Integer.parseInt(pole.getText());

    }
} 
```

帮帮我。我有一个错误：不能从静态上下文中引用非静态变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:59:36.820

这意味着您正在使用“temp”，这是一个在您的静态主方法中不是静态的变量。

```
data.setClassIndex(data.numAttributes() - temp); // you use it here 
```

如果您想修复它，您所要做的就是更改“temp”的变量声明：

```
static int temp; 
```

但是请确保您[了解静态的含义](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)，能够编写您不理解的代码是没有意义的；），还请记住，如果方便，最好避免使用静态变量。

另一种选择是将主要方法中的代码移动到“Visio”的构造函数中。由于“Visio”的构造函数不是静态的，因此您可以访问所有实例变量而不会出错。

这就像将代码从“main”复制粘贴到“Visio”一样简单，只需确保将“okienko.(whatever)”更改为“this.(whatever)”即可。（虽然您不必输入“this”关键字，但在引用继承的成员时我还是喜欢这样做；它使源代码更清晰）。

# jquery - 如果使用 jQuery 验证插件的开始/结束日期相等，确保结束时间大于开始时间

> ID：13898219
> 
> 赞同：0
> 
> 时间：2012-12-16T02:58:56.200
> 
> 标签：jquery, jquery-validate

我有 4 个字段 - 开始日期（使用 jQuery datepicker 的文本字段）、开始时间（下拉选择）、完成日期（使用 jQuery datepicker 的文本字段）和完成时间（下拉选择）。

```
<form id="my_form">

  <label for="start_date">Start Date</label>
  <input type="text" id="start_date" name="start_date" />

  <label for="start_time">Start Time</label>
  <select name="start_time" id="start_time">
    <option value="09:00" >09:00</option>
    <option value="09:30" >09:30</option>
    <option value="10:00" >10:00</option>
    <option value="10:30" >10:30</option>
    <option value="11:00" >11:00</option>
    <option value="11:30" >11:30</option>
    <option value="12:00" >12:00</option>
  </select>

  <label for="finish_date">Finish Date</label>
  <input type="text" id="finish_date" name="finish_date" />

  <label for="finish_time">Finish Time</label>
  <select name="finish_time" id="finish_time">
    <option value="09:00" >09:00</option>
    <option value="09:30" >09:30</option>
    <option value="10:00" >10:00</option>
    <option value="10:30" >10:30</option>
    <option value="11:00" >11:00</option>
    <option value="11:30" >11:30</option>
    <option value="12:00" >12:00</option>
  </select>

  <input type="submit" />

</form> 
```

我正在使用标准的[jQuery Datepicker Widget 函数](http://api.jqueryui.com/datepicker/)来确保结束日期始终与开始日期相同或晚于开始日期：

```
$( "#start_date" ).datepicker({
    dateFormat: 'dd/mm/y',
    minDate: new Date(),
    onClose: function( selectedDate ) {
        $( "#finish_date" ).datepicker( "option", "minDate", selectedDate );
    }
});
$( "#finish_date" ).datepicker({
    dateFormat: 'dd/mm/y',
    minDate: new Date(),
    onClose: function( selectedDate ) {
        $( "#start_date" ).datepicker( "option", "maxDate", selectedDate );
    }
}); 
```

所以我的问题是，使用[jQuery 验证插件](http://docs.jquery.com/Plugins/Validation/Validator)，我如何添加一个规则来确保结束时间大于（但不等于）开始时间，**如果**开始日期和结束日期相同？我什至不确定从哪里开始，目前有一个空白脚本，所以任何帮助将不胜感激：

```
$("#my_form").validate({
  rules: {
    start_time: {  }
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:29:21.093

这是一个重要的工作开端。当日期/时间相等或开始小于结束时，您需要对哪些元素设置错误，或者您希望如何显示错误，这将需要进行一些修改。该插件有许多错误选项。

核心功能是：

```
function compareDates() {
    var startDate = $("#start_date").datepicker('getDate');
    var endDate = $("#finish_date").datepicker('getDate');        
    if( !startDate || !endDate){
        return false;
    }

    if(endDate > startDate) {
        return true;

    } else {
        var endTime = endDate.getTime() + $('#finish_time').parseValToNumber();
        var startTime = startDate.getTime() + $('#start_time').parseValToNumber();
        return endTime > startTime;
    }
} 
```

这被用于`addMethod`验证器：

```
jQuery.validator.addMethod("checkDates", function(value, element) {
  /* see function above*/
  return  compareDates() ;
}, "End date/time must be after start"); 
```

验证器使用以下方法初始化：

```
$('#my_form').validate({ 
    rules:{
        start_date:'required', 
        /* arbitrarily used this element  for "checkDates" rule*/
        finish_date:{required:true,checkDates:true},

        finish_time:'required',
        start_time:'required'
    }
}); 
```

帮助插件将`select`标签值解析为一个数字（用于`compareDates()`）：

```
/* change the select value to an integer to add to unix time of date from datepicker*/
$.fn.parseValToNumber = function() {
    return parseInt($(this).val().replace(':',''), 10) || 0;
} 
```

演示：http: [//jsfiddle.net/dUe83/1/](http://jsfiddle.net/dUe83/1/)

这可能仍然有错误......被匆忙地放在一起，并不是为了成为一个完整的现成解决方案，而是作为一个重要的工作起点。

# sql - 删除行重复并使用 PostgreSQL 获得最高值

> ID：13898221
> 
> 赞同：2
> 
> 时间：2012-12-16T02:59:06.517
> 
> 标签：sql, postgresql, distinct, inner-join, greatest-n-per-group

使用以下查询

```
SELECT
  users.id,
  users.username,
  users.email,
  groups.permission
FROM users
INNER JOIN memberships ON users.id = memberships.user_id
INNER JOIN groups ON memberships.group_id = groups.id
INNER JOIN groupings ON groups.id = groupings.group_id
WHERE groupings.repo_id = 1
GROUP BY users.id, groups.permission
ORDER BY users.id 
```

我得到以下行：

```
----+---------------------------+-----------------------------------------+------------
 id |         username          |                  email                  | permission 
----+---------------------------+-----------------------------------------+------------
  2 | viva_leuschke0            | viva_leuschke0@ritchiealtenwerth.org    | 1
  2 | viva_leuschke0            | viva_leuschke0@ritchiealtenwerth.org    | 2
  3 | loyce_herman1             | herman1.loyce@bednar.com                | 1
  3 | loyce_herman1             | herman1.loyce@bednar.com                | 3
  4 | verona_vandervort2        | verona.vandervort2@mante.biz            | 1
  4 | verona_vandervort2        | verona.vandervort2@mante.biz            | 2
  4 | verona_vandervort2        | verona.vandervort2@mante.biz            | 3
  5 | bruen3_ms_hans            | ms.bruen3.hans@bechtelar.net            | 1
  5 | bruen3_ms_hans            | ms.bruen3.hans@bechtelar.net            | 2
  5 | bruen3_ms_hans            | ms.bruen3.hans@bechtelar.net            | 3
----+---------------------------+-----------------------------------------+------------ 
```

问题是：如何调整此查询以返回唯一行，按最高权限值过滤？就像是：

```
----+---------------------------+-----------------------------------------+------------
 id |         username          |                  email                  | permission 
----+---------------------------+-----------------------------------------+------------
  2 | viva_leuschke0            | viva_leuschke0@ritchiealtenwerth.org    | 2
  3 | loyce_herman1             | herman1.loyce@bednar.com                | 3
  4 | verona_vandervort2        | verona.vandervort2@mante.biz            | 3
  5 | bruen3_ms_hans            | ms.bruen3.hans@bechtelar.net            | 3
----+---------------------------+-----------------------------------------+------------ 
```

我正在使用 PostgreSQL 9.1。

**更新：**通过使用该`DISTINCT ON`子句，我能够得到我想要的。

```
SELECT DISTINCT ON(users.id)
  users.id,
  users.username,
  users.email,
  groups.permission
FROM users
INNER JOIN memberships ON users.id = memberships.user_id
INNER JOIN groups ON memberships.group_id = groups.id
INNER JOIN groupings ON groups.id = groupings.group_id
WHERE groupings.repo_id = 1
GROUP BY users.id, groups.permission
ORDER BY 
  users.id ASC, 
  groups.permission DESC 
```

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:22:45.083

仔细检查后，您的查询可以（并且应该）得到改进：

```
 SELECT DISTINCT ON (u.id)
      ,u.id
      ,u.username
      ,u.email
      ,g.permission
FROM   users       u
JOIN   memberships m  ON m.user_id = u.id
JOIN   groups      g  ON g.id = m.group_id
JOIN   groupings   gi ON gi.group_id = g.id 
WHERE  gi.repo_id = 1
~~GROUP  BY u.id, g.permission~~
ORDER  BY u.id, g.permission DESC 
```

`GROUP BY`是没有用的。`DISTINCT ON`单独给你一个独特的`users.id`。删除`GROUP BY`，你会得到相同的结果，只是更快。

您可能希望添加更多列来`ORDER BY`决定选择哪一行，其中每一个`id`份额最高`permission`。以您拥有它的方式，您可以随意选择这种情况（前提是它可以发生）。

[我对此查询技术的参考答案有更多解释、基准和链接。](https://stackoverflow.com/a/7630564/939860)

# android - 在 android TableView 中显示查询结果时如何调整性能？

> ID：13898223
> 
> 赞同：0
> 
> 时间：2012-12-16T02:59:13.267
> 
> 标签：android, ios, sqlite, tableview

我正在编写我的第一个 android 应用程序并来自 iOS 世界。我有一个相当大的查询（约 100k+ 行），我想通过滚动显示在表格视图中。

当我在 iPhone 应用程序中构建同样的功能时，他们的 tableview 版本可以自动处理*屏幕*上的行。这使得显示器很容易开始工作。

从我所见，看来 android tableview 正在加载整个结果，并且速度大大减慢。

android tableview 类是否有任何内置功能可以实现某种形式的“延迟加载”，还是我必须在查询中编写一些处理程序和限制？

例如伪代码：

```
 // Event Method:
 //    tableview "onscroll"
 //        get current table view index
 //        query DB with limit "Number of rows to display", Offset firstRowOnScreen
 //        display each of the values in this "subset" 
```

目前显示代码为：

```
 EditText editText = (EditText) findViewById(R.id.lookupFoodInfo);
    String message = editText.getText().toString();
    android.util.Log.i("FOOO", message);

    String where = "";
    if (message.trim() != "") {
        where = "WHERE Long_Desc LIKE '%"+message.trim()+"%'";
    }

    String sql = "  SELECT bt.Long_Desc " + 
                " FROM BIG_TABLE bt INNER JOIN OTHER_TABLE ot ON bt.id = ot.fk_id " +
                where +
                " ORDER BY ot.value, bt.long_desc ASC";

    Cursor c = sqdb.rawQuery(sql, null);
    if (c != null) {
        c.moveToFirst();
        while (c.isAfterLast() == false) 
        {
            String data = c.getString(c.getColumnIndex("Long_Desc"));
            TableRow row = new TableRow(getApplicationContext());
            row.setLayoutParams(new LayoutParams(
                    LayoutParams.WRAP_CONTENT));

            TextView b3=new TextView(this);
            b3.setText(data);
            b3.setTextColor(Color.BLUE);
            b3.setTextSize(25);
            row.addView(b3);
            table.addView(row);

            c.moveToNext();
        }
    }
    c.close();
    sqdb.close();
    myDbHelper.close(); 
```

iOS中非常相似的东西就像闪电一样运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:17:22.453

您正在寻找的是 a`ListView`和 a `CursorAdapter`。ListView 的行一旦移出屏幕就会被回收，因此您只有 ~ n + 2（其中 n 是可见行数），而不是数据库中的每个项目一行。

[http://developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T03:18:33.287

你犯了一个很大的错误。您不能使用表格布局来加载行列表。当您来自 ios 背景时，您可能会这样做。您指的是 Android 中的 LIstview，它为您完成了一半的工作。

请参阅此[链接](http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html)。每件事都解释清楚

# python - 用 numpy 求解整数上的线性系统

> ID：13898233
> 
> 赞同：7
> 
> 时间：2012-12-16T03:01:32.047
> 
> 标签：python, numpy, linear-algebra

我正在尝试用 numpy 求解一个超定线性方程组。目前，我正在做这样的事情（作为一个简单的例子）：

```
a = np.array([[1,0], [0,1], [-1,1]])
b = np.array([1,1,0])

print np.linalg.lstsq(a,b)[0] 
```

```
[1\. 1.]

```

这有效，但使用浮点数。有没有办法只解决整数系统？我已经尝试过类似的东西

```
print map(int, np.linalg.lstsq(a,b)[0]) 
```

```
[0, 1]

```

为了将解决方案转换为整数数组，期待`[1, 1]`，但显然我错过了一些东西。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T10:45:28.180

您应该使用专门的整数问题求解器（请注意，整数问题甚至都不容易解决）。`openopt`是一个包，例如应该为整数二次优化提供良好的包装，比如你正在做的。尝试使用线性代数根本不会直接为您提供正确的解决方案。

你的问题可以写成[二次程序](http://en.wikipedia.org/wiki/Quadratic_programming)，但它是一个[整数](http://en.wikipedia.org/wiki/Integer_programming)，所以使用`openopt`或其他一些模块。由于它是一种非常简单、不受约束的方法，也许还有其他方法。但是对于初学者来说，这并不是一开始看起来那么简单的问题，openopt等中有程序准备好有效地解决这种事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T12:43:36.857

您正在查看一个线性[丢番图方程组](http://en.wikipedia.org/wiki/Diophantine_equation)。快速的谷歌搜索出现了 Felix Lazebnik[的线性丢番图方程系统。](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.94.6106&rep=rep1&type=pdf)在那篇论文中，作者考虑了以下问题：

> 给定一个线性方程组 Ax = b，其中 A = a(i,j) 是具有整数项的 m × n 矩阵，b 是具有整数分量的 m × 1 列向量，系统是否有整数解，即具有整数分量的 n × 1 解向量 x？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T03:18:02.177

当您转换为 时`int`，元素的小数部分会被截断，因此会向下舍入。

```
a = np.array([[1,0], [0,1], [-1,1]])
b = np.array([1,1,0])

x = np.linalg.lstsq(a,b)[0] 
```

结果：

```
>>> x
array([ 1.,  1.])
>>> x[0]
0.99999999999999967
>>> x[1]
1.0000000000000002
>>> x.astype(int)
array([0, 1])
>>> map(int, x)
[0, 1]
>>> np.array([1.,1.]).astype(int) # works fine here
array([1, 1]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T03:20:01.617

我可能误解了你的问题，但我认为你只需要`round`and then的组合`astype(int)`？

例如

```
a = np.array([[1,0], [0,1], [-1,1]])
b = np.array([1,1,0])

x = np.linalg.lstsq(a,b)[0]
print x.round().astype(int) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-16T17:00:41.473

+1 到 seberg，这里有一个反例来说明你不应该映射圆形：（
对不起，它是 matlab 风格，但你会很容易地 pythonize）

```
a =
     3     0
     0     3
     1     1
b = 
    2.71
   11.7
    0.5
x = a\b =
    0.5121
    3.5088
round(x) =
    1
    4
norm(a*round(x)-b) = 4.5193
norm(a*[0;4]-b) = 4.4367
norm(a*[1;3]-b) = 4.4299 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-19T05:38:21.897

我需要这样做并最终将 Keith Matthews 编写的 PHP 程序（您可以在[http://www.numbertheory.org/php/php.html](http://www.numbertheory.org/php/php.html)上找到）移植到 Python 中。我最初使用 Numpy 数组，但遇到整数溢出问题，因此切换到使用任意精度数字表示的 Sympy 矩阵。

该代码在 GitHub 上发布，地址为[https://github.com/tclose/Diophantine](https://github.com/tclose/Diophantine) ，遵循MIT 许可证，因此请随时使用它，如果您遇到任何问题，请告诉我（抱歉，没有更好的文档记录）。master 分支使用 Sympy，但您可以在“numpy”分支中访问原始 Numpy 实现，这对于相当稀疏的系统似乎可以正常工作。

如果您最终将它用于科学出版物，请引用 Keith 的论文（并可能添加指向 GitHub 存储库的链接）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-04T01:31:43.437

我的方法是先找到非整数解，然后放大到整数一

```
from fractions import Fraction, gcd
from functools import reduce

def lcm(a, b):
    return a * b // gcd(a, b)

def common_int(*numbers):
    fractions = [Fraction(n).limit_denominator() for n in numbers[0]]
    multiple = reduce(lcm, [f.denominator for f in fractions])
    ints = [f * multiple for f in fractions]
    divisor = reduce(gcd, ints)

    return [int(n / divisor) for n in ints]

sol = np.linalg.solve(np.array([[1, 2, 3], [2, 1, 0], [2, 1, 4]]), np.array([1., 1., 1.]))  # system of equation
# [0.3333333, 0.3333333, 0.]

common_int(sol)
# [1., 1., 0.] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-10T23:46:02.573

有一种方法叫做[块 lanczos。](https://en.wikipedia.org/wiki/Block_Lanczos_algorithm)这可以在有限域上回答。您可以找到针对此特定问题的块 lanczos 求解器。

# c# - 在 WP 8.0 项目中引用来自 WP 7.1 项目的 ResourceDictionary

> ID：13898236
> 
> 赞同：1
> 
> 时间：2012-12-16T03:02:46.570
> 
> 标签：c#, xaml, windows-phone-7.1, windows-phone-8, resourcedictionary

我有一个面向 Windows Phone OS 7.1 的 Windows Phone 类库项目（“WPLib”）。在这个项目中，我有一个文件夹（“ResourceDictionaries”），其中包含一个资源字典（“ColorsAndBrushes.xaml”），内容如下：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
</ResourceDictionary> 
```

我有一个针对 Windows Phone OS 8.0 的 Windows Phone 应用程序项目，它引用了“WPLib”，并且有一个自己的资源字典，其中包含以下内容：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/WPLib;component/ResourceDictionaries/ColorsAndBrushes.xaml" />
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

这会导致以下错误：

*“在 'Silverlight,Version=v4.0,Profile=WindowsPhone71' 项目中定义的资源字典 '/WPLib;component/ResourceDictionaries/ColorsAndBrushes.xaml' 不能在 'WindowsPhone,Version=v8.0' 项目中使用。”*

除了将原始资源字典添加为 WP8 应用程序项目的链接之外，是否有解决此问题的方法？（注意 - 类库必须保持针对 WP 7.1）

# ember.js - 简单的 Ember 路由示例没有通过车把输出

> ID：13898238
> 
> 赞同：2
> 
> 时间：2012-12-16T03:02:51.063
> 
> 标签：ember.js

我一直在尝试学习 Ember，通过在 SOF 上遵循其他示例，我编写了一个非常简单的路由示例。我有三个观点：

主页 火星 木星

我想要三个导航链接来调用/解析提到的视图。我不知道我做错了什么，我似乎根本无法得到任何输出。如果有人能指出错误，我将不胜感激。

这是小提琴：http: [//jsfiddle.net/combustion007/PvCk8/](http://jsfiddle.net/combustion007/PvCk8/)

应用程序代码：

```
$(function()
{
    App = Em.Application.create({
        name: "superman",
        init: function(){
            alert("APP INIT");
        }
    })

    //  APPL
    App.ApplicationController = Em.Controller.extend();
    App.ApplicationView = Em.View.extend({
        templateName: 'application'
    });

    //  NAVBAR
    App.NavbarController = Em.Controller.extend();
    App.NavbarView = Em.View.extende({
        templateName: 'navbar',
        classNames: ['']
    });

    //  HOME
    App.HomeController = Em.Controller.extend();
    App.HomeView = Em.View.extend({
        tempalteName: 'home',
        classNames: ['']
    });

    //  MARS
    App.MarsController = Em.Controller.extend();
    App.MarsView = Em.View.extend({
        templateName: 'mars',
        classNames: ['']
    });

    //  JUPITER
    App.JupiterContoller = Em.Controller.extend();
    App.JupiterView = Em.View.extend({
        templateName: 'jupiter',
        classNames: ['']
    });

    //ROUTER INIT
    App.Router = Em.Router.extend({
        enableLogging: true,
        location: 'hash',

        //  EVENTS
        root: Em.Route.extend({
            gotoHome: Ember.Route.transitionTo('home'),
            gotoMars: Ember.Route.transitionTo('mars'),
            gotoJupiter: Ember.Route.transitionTo('jupiter'),

        // STATES
            home: Em.Route.extend({
                route: '/',
                connectOutlets: function(router, context){
                    router.get('applicationController').connectOutlet('home');
                }
            }),

            mars: Em.Route.extend({
                route: '/',
                connectOutlets: function(router, context){
                    router.get('applicationController').connectOutlet('mars');
                }
            }),

            jupiter: Em.Route.extend({
                route: '/',
                connectOutlets: function(router, context){
                    router.get('applicationController').connectOutlet('jupiter');
                }
            }),         
        })
    });
    App.initialize();
}) 
```

HTML：

```
<script type="text/x-handlebars" data-template-name="application">
    {{view App.NavbarView controllerBinding="controller.controllers.navbarController"}}
    <br /><hr />
    <div class="content">
        {{outlet}}
    </div>
</script>

<script type="text/x-handlebars" data-template-name="navbar">
    <ul>
        <li><a href="#" {{action gotoHome}}>Home</a></li>
        <li><a href="#" {{action gotoMars}}>Mars</a></li>
        <li><a href="#" {{action gotoJupiter}}>Jupiter</a></li>
    </ul>
</script>

<script type="text/x-handlebars" data-template-name="home">
    <h2>Home</h2>
    <hr />
    <br /><br />          
</script>

<script type="text/x-handlebars" data-template-name="mars">
    <h2>Mars</h2>
    <hr />
    <br /><br />          
</script>

<script type="text/x-handlebars" data-template-name="jupiter">
    <h2>Jupiter</h2>
    <hr />
    <br /><br />          
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:41:48.997

更改您的 jsfiddle [http://jsfiddle.net/cteegarden/PvCk8/7/](http://jsfiddle.net/cteegarden/PvCk8/7/)：

*   添加了车把js库
*   修复了 2 个拼写错误：`extende`更改为`extend`和`tempaltName``templateName`
*   更新`mars`和`jupiter`路线可在路线以外访问`'/'`
*   删除了`init`方法`App`

`{{outlet}}`handlebars 模板中的应用程序处于状态`application`时默认填充主视图，应用程序处于`'/'`状态时填充火星视图，应用程序处于状态时填充`'/mars'`jupiter 视图`'/jupiter'`。您在`navbar`模板中拥有的 3 个链接以编程方式将状态更改为每个链接，从而将`{{outlet}}`其替换为正确的视图。

**编辑**

具有类似路由示例的两个资源

*   [使用 Ember 进行导航的正确方法](https://stackoverflow.com/questions/11318572/right-way-to-do-navigation-with-ember)
*   [http://codebrief.com/2012/07/anatomy-of-an-ember-dot-js-app-part-i-redux-routing-and-outlets/](http://codebrief.com/2012/07/anatomy-of-an-ember-dot-js-app-part-i-redux-routing-and-outlets/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:34:03.983

我浏览了你的 jsFiddle 并修复了一些让它工作的东西：http: [//jsfiddle.net/arasbm/fLBty/3/](http://jsfiddle.net/arasbm/fLBty/3/)

它仍然没有做你想做的事，因为有些事情你需要决定。该代码的主要问题是`/`在路由器中定义了三次。您只需要定义一次，然后连接该路由内的所有插座：

```
root: Em.Route.extend({

    whatever: Em.Route.extend({
        route: '/',
        connectOutlets: function(router, context){
            router.get('applicationController').connectOutlet('home_outlet', 'home');
            router.get('applicationController').connectOutlet('mars_outlet', 'mars');
            router.get('applicationController').connectOutlet('jupiter_outlet', 'jupiter');
        }
    })            
}) 
```

因为在这种情况下，在同一条路线中使用了多个出口，您需要命名出口：

```
<script type="text/x-handlebars" data-template-name="application">
    {{view App.NavbarView}}
    <br /><hr />
    {{outlet home_outlet}}
    {{outlet mars_outlet}}
    {{outlet jupiter_outlet}}
</script> 
```

我只使用了 ember 几个月，所以我对它还没有很好的看法。我希望这能帮助你前进。

**编辑：**根据尚未发布的新路由器 API 的评论更新了答案。

如果您刚开始使用 ember，请查看[tomdale 的路由器 API v2 指南，](https://gist.github.com/3981133)这是有关如何在 Ember 1.0 中定义路由器的最新信息。但正如评论中指出的那样，它还没有在主人身上。

# c++ - c++ xcode上二进制表达式的无效操作数

> ID：13898239
> 
> 赞同：3
> 
> 时间：2012-12-16T03:03:01.207
> 
> 标签：c++, xcode, map

我对 C++ 还是很陌生，只是不知道如何解决这个错误。我得到的错误是说“二进制表达式的操作数无效”。有谁知道如何解决这个问题？任何帮助表示赞赏！我正在使用 Xcode 4.5.2。谢谢！

[编辑] 好的。我已经更新了下面的代码。我仍然在同一行（find（））遇到相同的错误......但这里是变化......

```
Vertex myVertex = new Vertex(1); 
```

至

```
Vertex myVertex(1); 
```

并为 < 添加了运算符重载

```
struct Vertex {
    int node;
    bool known;
    float distance;
    Vertex *path;

    Vertex(int n=0, bool known=false, duuble dist=INFINITY):
    node(n), known(known), distance(dist) {}
};

struct Edge {
    Vertex target;
    float weight;
    bool directed;

    Edge(Vertex v2, float w, bool dir):target(v2), weight(w), directed(dir) {}
};

class Graph {
public:
    /*unrelated members are removed*/

    void findVertex() {
        Vertex myVertex(1);
        map<Vertex, vector<Edge> >::iterator itr;
        itr = edges.find(myVertex); // <--- this is the line the error seems to related to
    }

    friend bool operator< (const Vertex& lhs, const Vertex& rhs) {
        return lhs.node < rhs.node;
    }

private:
    /*unrelated members are removed*/
    vector<Vertex> vertices;
    map<Vertex, vector<Edge> > edges;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T03:10:38.690

映射中的元素按照构造时设置的特定严格弱排序标准从低到高的键值排序。

您需要为 Vertex 提供 operator<，例如：

```
bool operator<(const Vertex& lhs, const Vertex& rhs){
      return lhs.node < rhs.node;
  } 
```

`Vertex myVertex = *new Vertex(1);`正如 David 和 selbie 所提到的那样，还会泄漏内存。看看这个链接：[为什么使用'new'会导致内存泄漏？](https://stackoverflow.com/questions/8839943/why-does-the-use-of-new-cause-memory-leaks/8840302#8840302)

更改`Vertex myVertex = *new Vertex(1);`为`Vertex myVertex = Vertex(1);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T03:37:13.893

我有同样的问题，最后，我只是在 Build Settings 中将 Xcode 默认 C++ 库更改为 libstdc++（GNU C++ 标准库）。它已经解决了。

就像下图一样。 ![在此处输入图像描述](../Images/d6fa8fba68b416a58be9a59a7b2b8a1a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T03:23:36.540

我喜欢 BillZ 的回答。但我永远不会存储重复的数据。在顶点和边成员之间存储重复的顶点成员就是这种情况。

考虑这样做，然后您没有在 Vertex 类中实现比较运算符。我不知道您的 findVertex 函数会将什么作为输入参数，所以我只是用两种方式编写了它。

```
class Graph {
public:
    /*unrelated members are removed*/

    void findVertex(int nodeNumber) {
        map<int, vector<Edge> >::iterator itr;
        itr = edges.find(nodeNumber);
    }

    void findVertex(const Vertex& v) {
        map<int, vector<Edge> >::iterator itr;
        itr = edges.find(v.node);
    }

private:
    /*unrelated members are removed*/
    vector<Vertex> vertices;
    map<int, vector<Edge> > edges;
}; 
```

# symfony-2.1 - Symfony2 FormBuilder 实体类型没有值

> ID：13898240
> 
> 赞同：0
> 
> 时间：2012-12-16T03:03:09.360
> 
> 标签：symfony-2.1

我在 Symfony2 的表单构建器中使用实体类型的表单元素。

```
 ->add('categories', 'entity', array('required' => false,
            'multiple' => true,
            'expanded' => true,
            'label'=>'Categories (select all that apply)',
            'class' => 'AcmeBundle:Category',
            'query_builder' => function(EntityRepository $er) use ($profile) {
                return $er->createQueryBuilder('u')
                    ->where('u.profile = :profile')
                    ->setParameter('profile', $profile)
                    ->orderBy('u.name', 'ASC');
            })); 
```

有一种情况，数据库查询没有返回任何值，但 Symfony2 仍然显示元素的标签。

对于没有要显示的实体结果的情况，如何完全抑制标签？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:26:08.177

在您关联的 .twig 文件中添加以下内容：

```
{% if not empty(entity.categories) %}
    {{ form_label(form.categories) }}
    {{ form_errors(form.categories) }}
    {{ form_widget(form.categories) }}
{% endif %} 
```

只有当它不为空时才会显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T07:40:01.127

自从我的编辑被拒绝后，改进了@alainivars 的答案。

在您关联的 .twig 文件中添加以下内容：

```
{% if not empty(entity.categories) %}
    {{ form_label(form.categories) }}
    {{ form_errors(form.categories) }}
    {{ form_widget(form.categories) }}
{% else %}
    {% do form.categories.setRendered %}
{% endif %} 
```

仅当它不为空并在字段上标记了 setRendered 时才会显示它，因此它不会显示在 form_rest 上，从而绕过您的问题。

# php - 内爆包含数组的多维数组

> ID：13898241
> 
> 赞同：0
> 
> 时间：2012-12-16T03:03:13.697
> 
> 标签：php, mysql, multidimensional-array, pdo, implode

我正在尝试使用以下方法内爆数组：

```
 $implode_keys = implode(',', array_values($arr)
   $implode_values = implode(',', array_keys($arr) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:21:34.720

`serialize`数组（或数组数组）。这就是序列化的目的。当你需要它作为一个数组（或数组的数组）时......只是`unserialize`它。

对于后代......序列化将数据结构展平，例如数组，以便可以以简化的方式存储它，例如在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:17:29.323

也许您可以尝试[json_encode()](http://php.net/manual/en/function.json-encode.php)将其保存到文本字段，如果这是一些非常静态的数据，仅用于在插入数据后读取数据（如果您不使用排序，通过一些数组 $var 或类似查找），或者如果是（将是）非常小的桌子。

# c# - AJAX 幻灯片扩展器问题

> ID：13898242
> 
> 赞同：2
> 
> 时间：2012-12-16T03:03:41.410
> 
> 标签：c#, asp.net, ajax, asp.net-ajax, ajaxcontroltoolkit

我无法让 AJAX 幻灯片扩展器工作。它不会旋转页面上的图像。奇怪的是，当它在浏览器中渲染并在那里旋转图像时，它会在页面底部的标签之外创建一个 img 标签，就像这样

```
<img style=" display:none;" src="the rotating images" /> 
```

但是，它不会在目标控件内提供或旋转图像。我的代码如下：

.aspx 页面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Slideshow.aspx.cs" Inherits="MirandasWebsite.Slideshow" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Miranda's Slideshow</title>
<link href="Styles/Mir3.css" rel="stylesheet" type="text/css" />
</head>
<body>
<form id="form1" runat="server">
<asp:ScriptManager ID="smSlideshow" runat="server" EnablePartialRendering="true">
</asp:ScriptManager>
<div class="Images">
    <asp:Image ID="mySlideshow" runat="server" Height="250" Width="300"  />
</div>
<asp:SlideShowExtender ID="Slideshowextender1" runat="server" BehaviorID="SSBehaviorID"
    TargetControlID="mySlideshow" SlideShowServiceMethod="GetSlides" AutoPlay="true"
    NextButtonID="btnNext" PreviousButtonID="btnPrev" PlayButtonID="btnPlay" PlayButtonText="Play"
    StopButtonText="Stop" Loop="true">
</asp:SlideShowExtender>
<div id="slideshowDescription" runat="server">
</div>
<div class="centerControls">
<asp:Label ID="lblDesc" runat="server" Text=""></asp:Label><br />
<asp:Button ID="btnPrev" runat="server" Text="Previous" />
<asp:Button ID="btnPlay" runat="server" Text="" />
<asp:Button ID="btnNext" runat="server" Text="Next" />
</div>
</form>
</body>
</html> 
```

和代码隐藏

```
 [System.Web.Services.WebMethod]
    [System.Web.Script.Services.ScriptMethod]
    public static AjaxControlToolkit.Slide[] GetSlides()
    {
        DataTable table = SiteAccess.GetImages();
        AjaxControlToolkit.Slide[] imgSlide = new AjaxControlToolkit.Slide[table.Rows.Count];
        int i = 0;
        foreach (DataRow row in table.Rows)
        {
            imgSlide[i] = new AjaxControlToolkit.Slide(row["Full"].ToString(), String.Empty, String.Empty);
            i++;
        }

        return (imgSlide);
    } 
```

关于为什么会发生这种情况的任何线索。我已经尝试了我能想到的所有方法，包括在图像中进行硬编码，但我仍然得到相同的结果。

# python - 通过降低精度来加速 sympy 求解器？

> ID：13898247
> 
> 赞同：1
> 
> 时间：2012-12-16T03:04:08.660
> 
> 标签：python, floating-point, precision, solver, sympy

sympy 中的求解功能需要一些时间才能提出解决方案。是否可以通过降低所需的精度来加快速度（我真的不需要小数点后的 15 位数字！）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:58:49.367

您可以尝试使用[mpmath](http://docs.sympy.org/dev/modules/mpmath/index.html#introduction)（带有 sympy 的覆盖精度数学）。您可以根据需要将[精度](http://docs.sympy.org/dev/modules/mpmath/basics.html#setting-the-precision)设置为所需的级别。与 sympy 的集成是直截了当的，[高级数学](http://docs.sympy.org/dev/modules/mpmath/index.html#advanced-mathematics)部分下的示例将帮助您了解其用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:46:36.170

请注意，打印 15 个小数并不意味着相对误差范围是 10^-15。
我鼓励在切换到单精度浮点数之前分析有效精度。
使用上面建议的任意精度包是检查结果如何更改的好方法：双位数并查看结果如何变化。还要检查输入的细微变化的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T05:11:06.317

使用 float 而不是 double 应该可以减少 1/2 的存储空间，并且可能会加速至少 2 倍——当你不做任何非线性或状态的事情时，从双精度到单精度会有好处。

其他并行化和算法优化技术也可能有所帮助，具体取决于您何时向我们展示代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-21T23:23:18.250

*注意：这个解决方案帮助我解决了这个问题。但是，我没有仔细研究过 sympy 的文档。所以使用这个基于经验的解决方案需要您自担风险，如果可能，请改进它。*

* * *

假设我们有以下代码：

```
import sympy as sp
import time

P = sp.symbols('P')

equation = -sp.log(P/22064) - 10.494012

t0 = time.time()
ans = sp.solve(equation)
t1 = time.time()
calculation_time = t1 - t0
print('Time = %s sec' % calculation_time) 
```

输出：

> 时间 = 1.6773369312286377 秒

现在这种缓慢的性能是由等式中的**10.494012**引起的。如果我将其更改为**10.494**，计算将在不到**0.3**秒内完成。显然，sympy 正在从我的输入中获取精度，并使用它来设置求解器的精度。无论如何，我不需要这样的洞察力。

所以解决方案是减少我的输入数字percisions；即用有限精度数字替换我的方程式中的所有数字。要自动执行此操作，我使用以下代码：

```
equation = equation.replace(
                    lambda expr: expr.func == sp.numbers.Float,
                    lambda x: round(x, 3)) 
```

*（请注意，我已将 sympy 包含为 sp。）*

# multithreading - 如何卸载在 FreeBSD 中创建了 kproc/kthread 的内核模块

> ID：13898249
> 
> 赞同：1
> 
> 时间：2012-12-16T03:04:48.347
> 
> 标签：multithreading, module, freebsd, proc

我想卸载一个有线程的模块。我已经引用了dev/random中的代码，我的代码是这样的：

```
$ cat tmp.c 

#include <sys/param.h>
#include <sys/module.h>
#include <sys/kernel.h>
#include <sys/systm.h>
#include <sys/proc.h>
#include <sys/kthread.h>

/* 
 * $ ps auxH | grep kproc 
 */ 

static int kproc_control = 1; 

#define output_id(p, td, fmt, args...)                                  \ 
        printf("%s[%d]:%s[%d]:[%s] %s\n", p->p_comm, p->p_pid,          \ 
            td->td_name, td->td_tid, __func__, msg) 

static void thread_routine(void *arg) 
{ 
        char *msg = arg; 
        struct thread *td = curthread; 
        struct proc *p = td->td_proc; 

        output_id(p, td, msg); 
        pause("-", hz * 100); 
        output_id(p, td, msg); 

        kthread_exit(); 
} 

static void proc_routine(void *arg) 
{ 
        char *msg = arg; 
        struct thread *td = curthread; 
        struct proc *p = td->td_proc; 
        struct thread *ntd; 
        int error; 

        output_id(p, td, msg); 

        error = kthread_add(thread_routine, "I'm kthread", p, &ntd, 
            0, 0, "kthread"); 
        if (error) 
                printf("error: %d\n", error); 

        while (kproc_control >= 0) { 
                pause("-", hz / 10); 
        } 

        wakeup(&kproc_control); 
        kproc_exit(0); 
} 

static int foobar_init(void) 
{ 
        int error; 
        struct proc *p; 

        error = kproc_create(proc_routine, "I'm kproc", &p, 0, 0, "kproc"); 
        uprintf("error: %d\n", error); 

        return error; 
} 

static void foobar_fini(void) 
{ 
        kproc_control = -1; 
        tsleep(&kproc_control, 0, "term", 0); 
        //pause("delay", 2 * hz); 
} 

static int 
foobar_modevent(module_t mod __unused, int event, void *arg __unused) 
{ 
        int error = 0; 

        switch (event) { 
        case MOD_LOAD: 
                error = foobar_init(); 
                break; 
        case MOD_UNLOAD: 
                foobar_fini(); 
                break; 
        default: 
                error = EOPNOTSUPP; 
                break; 
        } 

        return (error); 
} 

static moduledata_t foobar_mod = { 
        "foobar", 
        foobar_modevent, 
        NULL 
}; 

DECLARE_MODULE(foobar, foobar_mod, SI_SUB_DRIVERS, SI_ORDER_MIDDLE); 
```

当我通过 kldunload 卸载它时，我的内核崩溃并且系统重新启动。解决这个问题的正确方法是什么？任何意见将不胜感激！;-)

PS。我可以睡在 &p->p_stype 上吗？我在 exit1() 中看到以下代码：

```
 /*
     * Note that we are exiting and do another wakeup of anyone in
     * PIOCWAIT in case they aren't listening for S_EXIT stops or
     * decided to wait again after we told them we are exiting.
     */
    p->p_flag |= P_WEXIT;
    wakeup(&p->p_stype); 
```

PS。更新代码：

```
#include <sys/param.h>
#include <sys/module.h>
#include <sys/kernel.h>
#include <sys/systm.h>
#include <sys/proc.h>
#include <sys/kthread.h>
#include <sys/lock.h>
#include <sys/mutex.h>

/*
 * $ ps auxH | grep kproc
 */

static int kproc_control = 1;
static struct proc *foobar_proc;
static struct mtx mtx;

#define output_id(p, td, fmt, args...)                                  \
        printf("%s[%d]:%s[%d]:[%s] %s\n", p->p_comm, p->p_pid,          \
            td->td_name, td->td_tid, __func__, msg)

static void thread_routine(void *arg)
{
        char *msg = arg;
        struct thread *td = curthread;
        struct proc *p = td->td_proc;

        output_id(p, td, msg);
        pause("-", hz * 100);
        output_id(p, td, msg);

        kthread_exit();
}

static void proc_routine(void *arg)
{
        char *msg = arg;
        struct thread *td = curthread;
        struct proc *p = td->td_proc;
        struct thread *ntd;
        int error;

        output_id(p, td, msg);

        error = kthread_add(thread_routine, "I'm kthread", p, &ntd,
            0, 0, "kthread");
        if (error)
                printf("error: %d\n", error);

        mtx_lock(&mtx);
        while (kproc_control >= 0) {
                mtx_unlock(&mtx);
                pause("-", hz / 10);
                mtx_lock(&mtx);
        }
        mtx_unlock(&mtx);
        kproc_exit(0);
}
static int foobar_init(void)
{
        int error;

        mtx_init(&mtx, "foobar_mtx", NULL, MTX_DEF);
        error = kproc_create(proc_routine, "I'm kproc", &foobar_proc, 0, 0, "kproc");
        uprintf("error: %d\n", error);

        return error;
}

static void foobar_fini(void)
{
        mtx_lock(&mtx);
        kproc_control = -1;
        //mtx_sleep(foobar_proc, &mtx, 0, "waiting", 0);
        mtx_sleep(&foobar_proc->p_stype, &mtx, 0, "waiting", 0);
}

static int
foobar_modevent(module_t mod __unused, int event, void *arg __unused)
{
        int error = 0;

        switch (event) {
        case MOD_LOAD:
                error = foobar_init();
                break;
        case MOD_UNLOAD:
                foobar_fini();
                break;
        default:
                error = EOPNOTSUPP;
                break;
        }

        return (error);
}

static moduledata_t foobar_mod = {
        "foobar",
        foobar_modevent,
        NULL
};

DECLARE_MODULE(foobar, foobar_mod, SI_SUB_DRIVERS, SI_ORDER_MIDDLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:07:59.853

原则上，您等待线程或 proc 句柄以确保它已退出。

您应该使用某种锁来同步对共享变量的访问，例如您的 kproc_control 标志。然后，您还可以使用 mtx_sleep 以原子方式释放锁并等待 proc 句柄，以避免在处理终止事件时出现竞争条件。

我使用的模型看起来像这样：

```
void proc(whatver)
{
    mtx_lock(&sc->m_lock);

    while (!sc->time_to_die) {
        mtx_unlock(&sc->m_lock);
        /* Do whatever */
        mtx_lock(&sc->m_lock);
    }

    mtx_unlock(&sc->m_lock);

    kproc_exit(0);
}

void detach(whatever)
{
    mtx_lock(&sc->m_lock);
    sc->time_to_die = 1;
    mtx_sleep(sc->m_proc, &sc->m_lock, 0, "waiting", 0);
    /* proc cleaned up, safe to continue */
} 
```

# ios - 阐明 iOS 中 Objective-C 中的继承

> ID：13898250
> 
> 赞同：1
> 
> 时间：2012-12-16T03:05:02.753
> 
> 标签：ios, inheritance, uiviewcontroller

我的应用程序中有几个 viewController，我想从单个父 viewController 继承，当然，它扩展了 UIViewController（从而使所有 viewController 类，除了父类，兄弟类）。我想知道（而且我是 Objective-C 中的继承新手），在我的父 viewController 类中，我在 .h 文件中声明了一个名为 NSString *name 的参数，我将其标记为@property（非原子，保留），然后在我的 .m 文件中合成。

在父类中执行此操作后，我是否可以访问子 viewControllers 中的 NSString *name 参数，还是必须在从父类继承的每个 viewController 类中声明一个单独的参数？每个 viewController 的 NSString *name 参数都有一个唯一值，如果是这种情况，我是否需要为每个 viewController 类创建一个单独的参数，或者我只需在父类中创建一次就足够了?

我还想确认，如果我在父类中声明任何方法，我将能够使用来自子类的引用来访问它们（只要该方法没有在子类中被覆盖），就像我一样能用Java吗？我的猜测是肯定的，因为这是 Objective-C 的基本原则之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:18:59.037

如果每个视图控制器都有一个唯一的值，并且该值是不可变的，那么您可以简单地覆盖您的`name`属性的 getter 并返回该视图控制器的唯一值：

```
- (NSString *)name {
    return @"The name of this view controller";
} 
```

如果您希望能够改变结果，您可以声明 iVar 或具有不同名称的属性，然后在类的 getter 中返回它：

```
- (NSString *)name {
    return _myNameiVar;
} 
```

另外，要回答您的第二个问题，在类的方法文件中声明的变量、方法甚至属性对子类是不可见的，其中在标题中声明的方法和属性对所有导入标题的人都是可见的。iVar 始终可以通过 struct 访问运算符 ( `->`) 访问，但除非它们被标记为`@public`，否则编译器会阻止您走这条路。

# microsoft-metro - 我用 c++/cx 为 Metro 应用程序编写的文件有什么问题？

> ID：13898252
> 
> 赞同：1
> 
> 时间：2012-12-16T03:05:23.400
> 
> 标签：microsoft-metro, local-storage, c++-cx

我正在使用以下代码尝试写入文件：

```
StorageFolder ^localFolder = ApplicationData::Current->LocalFolder;
concurrency::task<StorageFile^> fileOperation = localFolder->CreateFileAsync("data.txt", CreationCollisionOption::ReplaceExisting);
fileOperation.then([this](StorageFile^ sampleFile)
{
    ::Globalization::DateTimeFormatting::DateTimeFormatter("longtime");
    Platform::String ^str; // other str stuff here

    return FileIO::WriteTextAsync(sampleFile, str);
}).then([this](concurrency::task<void> previousOperation) {
    try {
        previousOperation.get();
    } catch (Platform::Exception^) {
    }
}); 
```

由于“有时是开发人员”而修复了错误

我从这里得到了代码：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:11:53.477

只需替换这一行：

```
concurrency::task<StorageFile^> fileOperation = localFolder->CreateFileAsync("data.txt",
    CreationCollisionOption::ReplaceExisting); 
```

用这条线：

```
concurrency::task<StorageFile^> fileOperation(localFolder->CreateFileAsync("data.txt",
    CreationCollisionOption::ReplaceExisting)); 
```

# ruby-on-rails - 假设值为 nil 时如何设计视图？

> ID：13898254
> 
> 赞同：1
> 
> 时间：2012-12-16T03:05:50.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

我是Rails的新手。

至此，我想出了如何制作模型、控制器、视图和路由。

我现在面临的问题是，当值为 nil 时如何在视图中设计代码。
显然，当引用的值为 nil 时，它会返回错误。

现在，在每个部分，我都这样编码以避免错误。
这正常吗？？？

特别是，我使用acts_as_paranoid 进行逻辑删除。
所以在大多数情况下，这种事情会发生在我的 rails 应用程序上。

```
 <% if @messages.sender %>  
    <%= @messages.sender.user_profile.nickname %> (<%= @messages.sender.username %>)
  <% else %>
    Resigned User!
  <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:17:43.427

您可以编写辅助方法来避免代码重复。

在助手中：

```
def sender_name(msg)
  if msg.sender
    "#{msg.sender.user_profile.nickname} (#{msg.sender.username})"
  else
    "Resigned User!"
  end
end 
```

在视图中：`<%= sender_name(@message) %>`

# java - 如何重构只有变量不同的代码

> ID：13898256
> 
> 赞同：-1
> 
> 时间：2012-12-16T03:06:17.500
> 
> 标签：java, refactoring

大家好：我正在开发两个java程序，实际上两者之间的唯一区别是定义二维数组的开始语句。我在下面的例子中大大缩短了代码：

```
public class Qwerty {
    /** this is what needs to be replaced */
    private static char master[][] = {
        QwertyKbd.lIndex,
        QwertyKbd.lMiddle,
        QwertyKbd.lRing,
        QwertyKbd.lPinky,
            /** and so forth in this fashion */
    };

    public static int[] analyze(String file) {
    }

    public static void split(char c) {
    }
} 
```

和这里的第二堂课：

```
 public class Dvorak{
        /** this is what needs to be replaced */
        private static char master[][] = {
            /** various definitions, eliminated for conciseness */
        };

        public static int[] analyze(String file) {
            /** this is the same*/
        }

        public static void split(char c) {
            /** this is the same*/
        }
    } 
```

问题是我如何重构以获得唯一不同的是“主”二维数组的类？钩子方法等在这里会很愚蠢。因为程序没有任何需要修改的地方。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:08:41.940

看来这是继承的经典案例。继承的真正目的是代码重用，这正是您在这里得到的。我会让所有方法都变成非静态的，并对它们做一个“提取超类”，拉`analyze()`入`split()`抽象类，并添加一个抽象`getMaster()`或类似的东西，每个类都会覆盖它以返回适当的值。

更糟糕的选择——出于几个原因，但主要是因为它把你留在“静止的土地”，这是一个可怕的地方——将简单地移动`analyze()`并`split()`进入一些三等舱，这是一个容纳你的“共享”的地方像这样的实用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T03:44:02.470

如果你的类在不同的项目中，你不能这样做但是如果它们是项目的一部分，你可以为你的所有类创建一个抽象类或超类：Qwerty、Dvorak...例如，你创建一个抽象

```
public class CustomAbstract{
    protected char master[][];
    public int[] analyze(String file){return null;};
    public void split(char c){};
} 
```

然后在你的类中，你扩展了这个抽象类

```
public class Qwerty extends CustomAbstract{
    public Qwerty(){
        //master = ...;
    }
    //your code
} 
```

当您重构 CustomAbstract 中的 master 字段时，其他类中的所有 master 字段也会被重构。

上面代码的问题是你不能使用静态字段主，即使静态方法分析等。可能你需要类中的所有方法和字段都是静态的，你可以使用单骨架模式。在每个类中，您都创建一个这样的静态方法

```
public class Qwerty extends CustomAbstract{
    //your code
    static Qwerty instance = new Qwerty();
    public static Qwerty getInstance(){
        return instance;
    }
} 
```

然后可以使用 Qwerty.getInstance().analyze(String) 而不是使用 Qwerty.analyze(String) 希望对您有所帮助。

# c# - 如何从 WP8 中的 LongListSelector 项获取数据

> ID：13898270
> 
> 赞同：1
> 
> 时间：2012-12-16T03:10:32.430
> 
> 标签：c#, windows, mvvm, windows-phone-8

所以我有一个 LongListSelector 很快就会绑定到一个对象列表。

我想要的是当一个 LongListSelectorItems 被点击时，我可以点击特定的对象，并且能够将该对象传递到另一个屏幕，这样我就可以显示有关该对象的完整信息

```
private void PeopleList_Tap_1(object sender, System.Windows.Input.GestureEventArgs e)
    { 
        MessageBox.Show("SUCCESS");
    } 
```

我的 Tap 正在工作，我只是不知道如何获取选中的对象，或者如何使用 NavigationService 将其传递到另一个页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:02:32.760

下面是直接从我最新的应用程序中提取的。

不能直接传递对象，但可以传递文本数据。就我而言，一个ID：

```
private void WishListBoxSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (WishListBox != null && WishListBox.SelectedItem != null)
    {
        var selectedItem = (Models.Gift)WishListBox.SelectedItem;
        WishListBox.SelectedIndex = -1;
        var id = selectedItem.Id;
        NavigationService.Navigate(new Uri("/Views/Gift/GiftView.xaml?action=load&id=" + id, UriKind.Relative));
    }
} 
```

然后在接收端：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    if (NavigationContext.QueryString.ContainsKey("action"))
    {
        if (NavigationContext.QueryString["action"]=="load")
        {
            PageTitle.Text = "edit gift";
            giftVm.Gift = App._context.Gifts.Single(g => g.Id == Int32.Parse(NavigationContext.QueryString["id"]));                    
        }
        else if (NavigationContext.QueryString["action"] == "new")
        {
            PageTitle.Text = "new gift";
        }
        else if (NavigationContext.QueryString["action"] == "newWishList")
        {
            App.vm = ((MainViewModel)App.vm).Me;
        }
    }
    else
    {
        MessageBox.Show("NavigationContext.QueryString.ContainsKey('action') is false");
    }
} 
```

就我而言，数据存储在数据库中。我只需将所选项目转换为正确的对象类型，然后检查其 ID 并将其传递到我进行查找的下一页。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T03:24:37.523

您可以使用`SelectionChanged`事件和`LongListSelector.SelectedItem`属性来获取所选项目。

# java - jsf inputtext没有设置值

> ID：13898273
> 
> 赞同：0
> 
> 时间：2012-12-16T03:10:42.510
> 
> 标签：java, jsf

我难住了。我有一个带有输入文本的表单，我希望用户填充它，当他们点击添加按钮时，使用 f:param 设置这些属性。当我尝试从上下文中获取它们时，这些值不断返回为空：

```
 <h:form>
        <h1 align="center" style="font-size: 12pt; color: green">Enter the details for the new product</h1>
        <br/>
        <div align="center">
            <h:outputLabel id="productNameLabel"
                           value="Product Name " />
            <h:inputText id="productName" value="#{product.productName}" />
        </div>
        <br/>
        <div align="center">
            <h:outputLabel id="productDescriptionLabel"
                           value="Product Description " />
            <h:inputText id="description" value="#{product.description}" />
        </div>
        <br/>
        <div align="center">
            <h:outputLabel id="productQuantity"
                           value="Product Quantity " />
            <h:inputText id="quantity" value="#{product.quantity}" />
        </div>
        <div align="center">
            <h:commandButton value="Submit" action="welcome">
                <f:param name="creating" value="true"/>
                <f:param name="name" value="#{product.productName}" />
                <f:param name="description" value="#{product.description}" />
                <f:param name="quantity" value="#{product.quantity}" />
            </h:commandButton>
        </div>
    </h:form> 
```

# google-app-engine - 查询以更新 appengine 数据存储实体中的字段

> ID：13898276
> 
> 赞同：0
> 
> 时间：2012-12-16T03:11:42.313
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个`ndb.Model`叫`Article`. 它有许多实体，比如 1000 个。模型有`title`、`author`、`date`、`content`。假设我所有的标题都包含`by Kasav Bere`标题字符串中某处的短语。

有没有办法在数据存储上运行查询，以删除所有出现的`by Kasav Bere`. 我一直在寻找，但还没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:06:03.437

没有这样的查询。

您可以 1) 获取所有实体，删除所有“by Kasav Bere”，然后将它们放回原处。或者 2) 使用 mapreduce [https://developers.google.com/appengine/docs/python/dataprocessing/overview](https://developers.google.com/appengine/docs/python/dataprocessing/overview)

对于 1000 个实体，我建议只获取所有实体并将它们放回去。

[您可以使用远程 shell https://developers.google.com/appengine/articles/remote_api](https://developers.google.com/appengine/articles/remote_api)轻松完成此类任务

# ruby-on-rails - 如何在具有嵌套模型的控制器中使用 respond_with

> ID：13898282
> 
> 赞同：0
> 
> 时间：2012-12-16T03:13:21.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的报告模型 has_many 领域。

在我尝试将其切换为使用新的 respond_with 样式之前，area_controller.rb 工作正常。

切换后，创建和索引操作仍然可以正常工作，但编辑操作实际上并没有更新区域，尽管发送了 Flash 消息“区域已成功更新”。为什么？

**area_controller.rb**：

```
class AreasController < ApplicationController

  respond_to :html
  filter_resource_access
  layout "wide"

  def index
    @report = Report.find(params[:report_id])
    @areas = @report.areas
    respond_with(@report, @areas)
  end

  def show
    @report = Report.find(params[:report_id])
    @area = @report.areas.find(params[:id])
    respond_with(@report, @area)
  end

  def new
    @report = Report.find(params[:report_id])
    @area = @report.areas.build
    respond_with(@report, @area)
  end

  def create
    @report = Report.find(params[:report_id])
    @area = @report.areas.build(params[:area])
    flash[:notice] = "Area was successfully created." if @area.save
    respond_with(@report, @area)
  end

  def edit
    @report = Report.find(params[:report_id])
    @area = @report.areas.find(params[:id])
    respond_with(@report, @area)
    #also tried leaving that respond_with out
  end

  def update
    @report = Report.find(params[:report_id])
    @area = @report.areas.find(params[:id])
    flash[:notice] = "Area was successfully updated." if @area.save
    respond_with(@report, @area, :location => report_area_path(@report, @area))
    # also tried respond_with(@report, @area)
  end

  def destroy
    @report = Report.find(params[:report_id])
    @area = @report.areas.find(params[:id])
    @area.destroy
    respond_with(@report, @area)
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:46:48.547

您需要更新模型上的属性：

```
def update
  @report = Report.find(params[:report_id])
  @area = @report.areas.find(params[:id])
  flash[:notice] = "Area was successfully updated." if @area.update_attributes(params[:area])
  respond_with(@report, @area, :location => report_area_path(@report, @area))
end 
```

# windows-phone-8 - windows phone 8 app Application_Activated() 从未调用过

> ID：13898286
> 
> 赞同：0
> 
> 时间：2012-12-16T03:14:53.313
> 
> 标签：windows-phone-8

我正在编写一个 Windows Phone 8 应用程序。

我刚刚意识到，每次我切换到应用程序（无论是第一次还是在我点击 HOME 然后点击应用程序磁贴返回）时，都会调用 Application_Launching() 。另一方面，Application_Activated() 永远不会被调用。

想知道我是否做错了什么。

```
 // Code to execute when the application is launching (eg, from Start)
    // This code will not execute when the application is reactivated
    private void Application_Launching(object sender, LaunchingEventArgs e)
    {
        Log.AppLaunch();
    }

    // Code to execute when the application is activated (brought to foreground)
    // This code will not execute when the application is first launched
    private void Application_Activated(object sender, ActivatedEventArgs e)
    {
        Log.AppActive();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:58:07.520

这是意料之中的 - 您总是通过点击“开始”屏幕中的应用程序磁贴来启动应用程序的新实例。

按下 HOME 键后，如果要测试该`Application_Activated`方法，则必须按硬件返回键。如果您长时间按住硬件返回键，您应该会得到一个最近的应用程序列表，您可以通过这种方式返回。

# c# - 如果将新对象添加到 ObjectSet，则 ObjectContext.SaveChanges() 永远不会返回。有没有人经历过这个？

> ID：13898288
> 
> 赞同：0
> 
> 时间：2012-12-16T03:15:18.977
> 
> 标签：c#, .net, visual-studio-2010, entity-framework-4, sql-server-express

我有一个名为`UnitHistoryEntities`. 数据库存储在 SQL Express 2012 中。Windows 7 64 位。

1.  我用`context = new UnitHistoryEntities()`.
2.  我将此上下文传递到几个对话框中，这些对话框从用户那里收集一些信息。在此期间可能执行了一些查询。
3.  基于该输入，我构造了一个新的 Unit 实体`var unit = new Unit()`，设置了一些属性，并将其添加到上下文中`context.Units.AddObject(unit)`
4.  然后我打电话`context.SaveChanges()`。

调用`SaveChanges()`never, ever 返回（我已经给了它至少 10 分钟）并且从不抛出异常。如果我删除`AddObject()`，它将返回而不对数据库进行任何更改，因为没有任何修改。

为什么`SaveChanges()`永远不回来？有人遇到过这种现象吗？

当我的程序处于这种状态时，我能够从 SQL Management Studio 连接并在数据库上执行查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T06:40:56.760

实体它的功能是添加到表中，每个表都有一个名为自己的函数，您可以使用实体将以下内容添加到数据库中：

```
UnitHistoryEntities context=new UnitHistoryEntities();
Unit unit=new Unit();
unit.field1=value1;
unit.field2=value2;
context.AddtoUnit(unit);
context.SaveChange(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:47:52.540

原来我遇到的问题与[这个问题](https://stackoverflow.com/questions/4608734/the-conversion-of-a-datetime2-data-type-to-a-datetime-data-type-resulted-in-an-o)非常相似。我有一个没有设置的 DateTime 字段。我制作了一个控制台应用程序，它在我的应用程序正在执行的上下文中执行完全相同的操作。在这种情况下，`SaveChanges()` **确实**返回了，但有例外`The conversion of a datetime2 data type to a datetime data type resulted in an out-of-range value.\r\nThe statement has been terminated.`

所以我现在将我的 DateTime 字段设置为 1/1/1900，我会将它视为一个空日期。我的程序现在可以正常运行。

奇怪的是我没有在我的 WPF 应用程序中抛出异常，但我在控制台应用程序中做到了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-28T06:29:17.040

这是因为 EF 在您尝试插入的数据上抛出了 DbEntityValidationException。如果 EF 抑制错误，您可以使用记录查询和错误。

```
context.Database.Log = s => System.Diagnostics.Debug.WriteLine(s); 
```

# jquery - Django - JSON serializers.serialize 不工作

> ID：13898289
> 
> 赞同：0
> 
> 时间：2012-12-16T03:15:32.777
> 
> 标签：jquery, django, json

我在views.py 中有以下代码，我想获取完整的人员列表。

```
def all_json_persons(request, state):
    print "current_state--" + str(state)
    current_state = State.objects.get(id=state)
    print "current_state--" + str(current_state)
    districts = District.objects.all().filter(state=state)
    print "districts--" + str(districts)
    personsList = []
    for current_district in districts:
       villages = Address.objects.all().filter(district=current_district) 
       for current_village in villages:
          persons = Person.objects.all().filter(address=current_village)
          print "persons--" + str(persons)
          personsList.append(persons)  
    print "personsList--" + str(personsList)
    json_persons = serializers.serialize("json", personsList)
    print "json_persons--" + json_persons
    return HttpResponse(json_persons, mimetype="application/javascript") 
```

它在终端上返回以下结果：

```
current_state--2
current_state--Odisha
districts--[<District: Jagatsighpur>, <District: Koraput>]
persons--[<Person: Annnn Ppppp>, <Person: Rrrrr Jeeee>, <Person: Raaaaa Jennn>, <Person: Annnnn Saaaa>]
persons--[<Person: Laaaa Sikaka>, <Person: Lingram  Azzzzz>]
personsList--[[<Person: Annnn Ppppp>, <Person: Rrrrr Jeeee>, <Person: Raaaaa Jennn>, <Person: Annnnn Saaaa>], [<Person: Laaaa Sikaka>, <Person: Lingram  Azzzzz>]]
**[15/Dec/2012 21:05:42] "GET /state/2/all_json_persons/ HTTP/1.1" 500 75201** 
```

我无法弄清楚为什么下面的代码行在上述情况下不起作用：

```
json_persons = serializers.serialize("json", personsList) 
```

但是，如果我将上面一行中的 peopleList 替换为 people. 它运作良好。但我想要一个州的全部人员名单。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:19:14.003

Django 的序列化器用于序列化查询*集*。如果您想序列化其他内容，请使用例如`values()`或将其转换为基本类型，`values_list()`然后使用正常的 JSON 机制对其进行序列化。

# codeigniter - 当我在服务器中托管我的网站时出现 404 错误

> ID：13898290
> 
> 赞同：3
> 
> 时间：2012-12-16T03:15:36.583
> 
> 标签：codeigniter, url-rewriting, http-status-code-404, codeigniter-url

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:26:25.440

您是否更新了 HTACCESS 以将请求转发到 index.php 文件？您不能只将 $index_page 设置为 ''。如果出现 www.subdomain.example.com/index.php/Welcome/login，您可能只需将其添加到您的 HTACCESS 文件中：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [NC,L,QSA] 
```

# html - Mirroring a path in SVG

> ID：13898292
> 
> 赞同：14
> 
> 时间：2012-12-16T03:15:51.473
> 
> 标签：html, svg, path, scale, mirroring

I want to code a Christmas tree in SVG using path.

I started with writing the path for the left half of the tree, now I want to mirror these points along the y-axis to create the right half. I tried the scale command in many variations but it doesn't work at all. :/ Can somebody help me with this?

Here's my code:

```
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN"
"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">

    <svg width="2000" height="2000" xmlns="http://www.w3.org/2000/svg">

    <path style="stroke:green;fill:none;
                    stroke-width:10;"
                    d="M1000,200 Q950,400 800,500 Q600,600 750,650 T700,850 Q400,1100 600,1100 T500,1400   Q250,1600 450,1600 L850,1600 Q950,1600 950,1700"/>

    <path transform="translate(350)" style="stroke:green;fill:none;
                    stroke-width:10;"
                    d="M1000,200 Q950,400 800,500 Q600,600 750,650 T700,850 Q400,1100 600,1100 T500,1400 Q250,1600 450,1600 L850,1600 Q950,1600 950,1700"/>

    </svg> 
```

How it is now: [http://www.bilderload.com/bild/272965/istFI270.jpg](http://www.bilderload.com/bild/272965/istFI270.jpg)

How it should look: [http://www.bilderload.com/bild/272964/soll399GL.jpg](http://www.bilderload.com/bild/272964/soll399GL.jpg)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T06:39:17.823

利用`transform="translate(2000), scale(-1, 1)"`

```
<svg width="200" height="200">
     <g transform="scale(.1)">

    <path style="stroke:green;fill:none;
                    stroke-width:10;"
                    d="M1000,200 Q950,400 800,500 Q600,600 750,650 T700,850 Q400,1100 600,1100 T500,1400   Q250,1600 450,1600 L850,1600 Q950,1600 950,1700"/>

    <path transform="translate(2000), scale(-1, 1)" style="stroke:green;fill:none;
                    stroke-width:10;"
                    d="M1000,200 Q950,400 800,500 Q600,600 750,650 T700,850 Q400,1100 600,1100 T500,1400 Q250,1600 450,1600 L850,1600 Q950,1600 950,1700"/>

    </g>
</svg>
```

[jsFiddle 上的原创](http://jsfiddle.net/Wexcode/dFTtd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:24:13.553

### 猜你需要这个：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="2000"
   height="2000"
   id="svg2997"
   version="1.1"
   inkscape:version="0.48.2 r9819"
   sodipodi:docname="path.svg">
  <metadata
     id="metadata3007">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <defs
     id="defs3005" />
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1920"
     inkscape:window-height="1018"
     id="namedview3003"
     showgrid="false"
     inkscape:zoom="0.118"
     inkscape:cx="1000"
     inkscape:cy="1000"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="svg2997" />
  <path
     style="stroke:green;fill:none;                     stroke-width:10;"
     d="M1000,200 Q950,400 800,500 Q600,600 750,650 T700,850 Q400,1100 600,1100 T500,1400   Q250,1600 450,1600 L850,1600 Q950,1600 950,1700"
     id="path2999" />
  <path
     style="fill:none;stroke:#008000;stroke-width:10"
     d="m 1041.1111,1700 q 0,-100 100,-100 l 400,0 q 200,0 -50,-200 -300,-300 -100,-300 200,0 -100,-250 -200,-150 -50,-200 150,-50 -50,-150 -150,-100 -200,-300"
     id="path3001"
     inkscape:connector-curvature="0" />
</svg> 
```

### 截屏：

![](../Images/08bc7dc9247ff6ae8c77f35853b4ce9c.png)

# ios - 在我的 iOS 开发中，我应该使用什么编码来编码温度符号？

> ID：13898299
> 
> 赞同：0
> 
> 时间：2012-12-16T03:17:53.753
> 
> 标签：ios, encode, temperature

```
char symbol[] = {0xa1,0xe3};  //temperatue symbol code

NSString *degree = [NSString stringWithCString:symbol encoding:NSASCIIStringEncoding];

//when "degree" displayed on screen,messy code. 
```

我应该使用什么样的编码？似乎这`NSASCIIStringEncoding`行不通。

或者任何其他方法可以帮助解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:17:00.200

# datasource - Kendo UI：分组时数据源中存在观察模式的错误

> ID：13898306
> 
> 赞同：0
> 
> 时间：2012-12-16T03:18:51.330
> 
> 标签：datasource, kendo-ui

我在配置时为网格分配了一个数据源：

```
parsedData = $.parseJSON(data);
 var dataSource = new kendo.data.DataSource({
        data: parsedData
    });

$("#grid").kendoGrid({
        dataSource: dataSource,
        etc etc
        .
        .
        . 
```

然后我绑定到配置/初始化后的更改事件：

```
 var grid = $('#grid').data('kendoGrid');
    grid.dataSource.bind("change", function (e) {
        dataChanged();
    });

function dataChanged() {
    var grid = $("#grid").data("kendoGrid");
    grid.refresh();
} 
```

然后我删除 dataSource 的数据数组中的所有项目：

```
 while (grid.dataSource.data().length > 0) {
    grid.dataSource.data().pop();
} 
```

正如预期的那样，网格中的行消失了。但随后，使用空网格，我将列标题拖到组面板，网格重新填充自身。

我正在尝试找到一种每 60 秒刷新一次网格数据的方法，因此了解如何清除数据并将其替换为不同的数据对我来说很重要，而不会在未调整到观察到的数组的地方出现残留数据被观察的物体。

或者也许我做错了什么或不完整——很有可能，因为我刚刚开始使用 Kendo UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:24:03.677

正如我在您的[其他](https://stackoverflow.com/questions/13892021/kendo-ui-grid-refreshing-grid-data-every-60-seconds-with-new-data-datasource-a)问题中所说，您需要使用数据源的[数据](http://docs.kendoui.com/api/framework/datasource#data)方法。

# c# - 一个应用程序上的多个 Windows 窗体

> ID：13898310
> 
> 赞同：0
> 
> 时间：2012-12-16T03:19:38.857
> 
> 标签：c#, winforms, mvp

我有两个窗体，第一个是初始窗体，第二个是在按下第一个按钮时调用的。这是两个不同的窗口，有不同的任务。我为这两种 MVP 模式编程。但在 Main() 我有这个：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    ViewFirst viewFirst = new ViewFirst();//First Form
    PresenterFirst presenterFirst = new PresenterFirst(viewFirst);
    Application.Run(viewFirst);
} 
```

我有第二个 Windows 窗体：

```
ViewSecond viewSecond = new ViewSecond();//Second Form
PresenterSecond presenterSecond = new PresenterSecond(viewSecond); 
```

单击第一个按钮后，我想在此应用程序中运行它。我怎么能这样做？我在第一个 WF 上的按钮是：

```
private void history_button_Click(object sender, EventArgs e)
{
    ViewSecond db = new ViewSecond();//second Form where I have sepparate WF.
    db.Show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:30:46.130

`Application.Run(Form mainForm)`每个线程只能运行一个表单。如果您尝试使用 在同一线程上运行第二个表单`Application.Run`，则可能会引发以下异常

```
System.InvalidOperationException was unhandled

Starting a second message loop on a single thread is not a valid operation. Use
Form.ShowDialog instead. 
```

所以，如果你想调用`Application.Run`运行另一个`Form`，你可以在一个新线程下调用它。

**例子**

```
private void history_button_Click(object sender, EventArgs e)
{
    Thread myThread = new Thread((ThreadStart)delegate { Application.Run(new ViewSecond()); }); //Initialize a new Thread of name myThread to call Application.Run() on a new instance of ViewSecond
    //myThread.TrySetApartmentState(ApartmentState.STA); //If you receive errors, comment this out; use this when doing interop with STA COM objects.
    myThread.Start(); //Start the thread; Run the form
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:54:07.063

我不确定您在哪里为您的第二个表单设置演示者。您应该在创建 ViewSecond 表单时设置它。在按钮点击事件中试试这个：

```
private void history_button_Click(object sender, EventArgs e)
{
    ViewSecond viewSecond = new ViewSecond();//Second Form
    PresenterSecond presenterSecond = new PresenterSecond(viewSecond);
    db.Show();
} 
```

# android - 事件向上或向下传播

> ID：13898314
> 
> 赞同：3
> 
> 时间：2012-12-16T03:20:02.707
> 
> 标签：android, event-propagation

当点击屏幕上的按钮时，事件如何展开？它是否以可以将事件传递给其父级的按钮开头？

还是父母首先收到事件并将其传递给其孩子，直到它到达按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:31:51.280

事件传播有两种模型：

*   事件捕获：向下
*   事件冒泡：向上

参考[这里](http://www.quirksmode.org/js/events_order.html#link1)

# php - 为每个选中的复选框添加一个 $_GET 变量到 URL

> ID：13898320
> 
> 赞同：0
> 
> 时间：2012-12-16T03:20:40.190
> 
> 标签：php, function, variables, filter, get

我有一个包含 20 个复选框的 HTML 表单，我正在使用 PHP 中的 isset() 函数来检查每个框是否在提交时被选中。

我希望 PHP 脚本为每个选中的复选框添加一个 $_GET 变量到 URL。

例如，如果复选框 #1 和 #3 被选中，我想要一个 header() 函数将用户重定向到[http://domain.com/form.php?one=checked&three=checked](http://domain.com/form.php?one=checked&three=checked)但如果 #4、#7、和 #19 已检查，我希望重定向的 URL 为[http://domain.com/form.php?four=checked&seven=checked&nineteen=checked](http://domain.com/form.php?four=checked&seven=checked&nineteen=checked)

这是可能的还是有更好的方法来做到这一点？

PS 这是一个高级搜索功能，可以根据选中的框过滤掉结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:26:24.023

创建一个将复选框编号映射到参数名称的数组，然后遍历复选框并[构建一个查询字符串](http://php.net/manual/en/function.http-build-query.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:27:51.663

听起来应该在提交表单之前在客户端使用 javascript 完成。

例如，当复选框被（取消）选中时，使用 javascript 更改表单的 action 属性。监听并等待该表单上的 onsubmit 事件被触发，然后将选中的复选框添加到表单的 action 属性中

# iphone - 何时在模态视图控制器上设置父/呈现视图控制器？

> ID：13898324
> 
> 赞同：5
> 
> 时间：2012-12-16T03:21:07.027
> 
> 标签：iphone, objective-c, ios, views

我正在展示一个模态视图控制器。在那个模态视图控制器中`viewDidLoad`，我似乎找不到对父 VC.... `parentViewController`、`presentingViewController`等的任何引用。如果尚未设置，我应该如何获得对它的引用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T04:37:13.667

对于一般解决方案，您可以在第二个控制器中拥有自己的属性，它是`weak`指向第一个视图控制器的指针。第一个控制器应该在第一个 segue 中设置第二个控制器的属性`prepareForSegue`。

在回答您的问题时，`parentViewController`仅在使用视图控制器包含（您没有这样做）时设置。当`presentingViewController`你这样做时设置`presentViewController`，但行为会根据第一个视图控制器是否嵌入导航控制器而改变（如果嵌入，第二个视图控制器`presentingViewController`是导航控制器，如果不是，它是你的视图控制器'会期望它是）。如果你这样做，它似乎`presentingViewController`根本没有设置`pushViewController`。

最重要的是，如果您在第一个控制器中设置第二个控制器的自定义属性，我发现它会更加可靠和一致`prepareForSegue`。

* * *

因此，在.h 中`SecondViewController`，我的 .h`@interface`看起来像：

```
@class FirstViewController;

@interface SecondViewController : UIViewController

@property (nonatomic, weak) FirstViewController *firstViewController;

@end 
```

然后在第一个视图控制器中，我有一个`prepareForSegue`看起来像：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"IdentifierForSegueToSecondControllerHere"])
    {
        SecondViewController *controller = segue.destinationViewController;
        controller.firstViewController = self;
    }
} 
```

显然，如果您使用情节提要，则上述观点适用。如果您使用的是 NIB，您会执行以下操作：

```
SecondViewController *controller = [[SecondViewController alloc] initWithNibName:nil bundle:nil];
controller.firstViewController = self;
[self presentViewController:controller animated:YES completion:nil]; 
```

无论如何，一旦您在 中设置了该`firstViewController`属性`SecondViewController`，`SecondViewController`现在就可以访问属性或调用 的公共方法`FirstViewController`，例如：

```
// up at the top, where you have your import statements, include the following

#import "FirstViewController.h"

// then, in the @implementation of the SecondViewController, you can reference
// the first view controller and its properties, such as:

self.firstViewController.someStringProperty = @"some value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:33:24.533

从概念上讲，可以随时加载视图。仅仅因为您的视图已加载并不一定意味着它将以某种形式显示。

您可以发现呈现视图控制器的最早点是`viewWillAppear:`在`UIViewController`.

# ruby-on-rails - Ruby on Rails：GeoKit 邮政编码搜索？

> ID：13898327
> 
> 赞同：1
> 
> 时间：2012-12-16T03:21:43.843
> 
> 标签：ruby-on-rails, zipcode

我在使用 GeoKit 进行邮政编码搜索时遇到问题。一些错误使整个应用程序崩溃。

这就是我所拥有的：

```
 def zipcode
    zipcode = params[:zipcode]
    @bathrooms = Bathroom.geo_scope(:all, :origin=>[zipcode], :within=>10)
    respond_to do |format|
      format.json  { render :json => @bathrooms }
      #format.json { render :json => {:bathrooms => @bathrooms} }
      format.js   { render :nothing => true } 
     end        
  end

 match '/bathrooms/zipcode', :controller => 'bathrooms', action =>"zipcode" 
```

这是我得到的错误：

```
 ArgumentError in BathroomsController#zipcode

wrong number of arguments (2 for 1)

Rails.root: /Users/chance 1/source/rails_projects/squat
Application Trace | Framework Trace | Full Trace

app/controllers/bathrooms_controller.rb:44:in `geo_scope'
app/controllers/bathrooms_controller.rb:44:in `zipcode'

Request

Parameters:

{"zipcode"=>"47130",
 "format"=>"json"}

Show session dump

Show env dump
Response

Headers: 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:17:44.387

`geo_scope`只需要[一个参数](https://github.com/jlecour/geokit-rails3/blob/master/lib/geokit-rails3/acts_as_mappable.rb#L108)：哈希。您正在向它传递两个参数：一个符号 ( `:all`) 和一个哈希 ( `:origin=>[zipcode], :within=>10`)。当它只需要一个参数时，它会接收两个参数，从而给您错误：

```
wrong number of arguments (2 for 1) 
```

有两种方法可以解决这个问题。

首先，您可以删除`:all`符号并使用查找器方法：

```
Bathroom.geo_scope(:origin=>[zipcode], :within=>10).all 
```

或者，您可以完全忘记 GeoKit 并改用[地理编码](http://www.rubygeocoder.com)器。[(github)](https://github.com/alexreisner/geocoder)

```
# GeoKit
@bathrooms = Bathroom.geo_scope(:origin=>[zipcode], :within=>10).all

# geocoder
@bathrooms = Bathroom.near(zipcode, 10) 
```

# javascript - 频繁调用 onkeyup 事件函数，导致 AJAX 响应极慢

> ID：13898329
> 
> 赞同：1
> 
> 时间：2012-12-16T03:21:56.447
> 
> 标签：javascript, jquery, ajax

我正在使用 AJAX 通过使用“LIKE”查询来查询数据库来生成搜索建议。当用户在输入字段中键入文本时，将返回结果。

我设置它的方式如下：

查询：

```
 var timer;
        $(".prod-name-input").keyup(function(){
            var self = this;
            clearTimeout(timer);
            searchword = self.value;
            timer = setTimeout(function(){
                $(".smart-suggestions").load('invoice-get-data.php?searchword=' + self.value);
            },300); //onkeyup event works with a 300 millisecond delay
        }); 
```

问题是，如果我键入一个包含 6 个字符的单词，则至少需要几秒钟才能为完整的单词填充 AJAX 结果，似乎在用户之前多次调用 AJAX 函数完成在文本字段中输入一个单词（由于 onkeyup 事件）。我在 mySQL 查询上使用了 var_dump 来尝试查看发生了什么，它表明一旦查询了完整的搜索词，这通常太慢了，并且使用我的方法需要几秒钟，结果就会返回几乎是瞬间，

我的目标是让搜索建议几乎立即出现，避免我现在的极度滞后，因此只要用户在输入字段中输入一些文本，搜索建议就会出现。我试图仔细控制 ajax 调用的数量以提高响应时间，但没有任何成功。几天来我一直在尝试解决这个问题，并希望得到任何帮助。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:45:21.200

我的解决方案是为 mysql 查询设置一个 LIMIT，因为我不需要 100 个查询结果，但只需要少数，这导致 AJAX 显着提高了速度。

# python - 使用 Python 解码 JSON 时出错，导出 jqGrid

> ID：13898332
> 
> 赞同：1
> 
> 时间：2012-12-16T03:22:52.783
> 
> 标签：python, django, jqgrid, json

我正在尝试将 jqGrid 导出为 CSV。到目前为止，我在 jqGrid 的标题中添加了一个按钮，该按钮运行一个指向 CSV 下载 url 的 javascript 函数，该函数具有一个包含变量的 get 请求：1）JSON 所在的 url 和 2）来自 jqGrid 的 urlencoded 标头。

我确实喜欢这样（“网格”是要下载的网格的名称）：

```
function downloadGrid(grid) {  
    var columnNames = $(grid).getGridParam("colNames");
    columnNames = encodeURIComponent(columnNames)
    var dataLoc = $(grid).getGridParam("url");
    window.open( "/csv/download/?header=" + columnNames+"&jqgrid=" + dataLoc);
    } 
```

在编写 CSV 文件的视图中，我尝试使用 simplejson 读取一些 json，但出现错误：

```
JSONDecodeError at /csv/download/

No JSON object could be decoded: line 1 column 0 (char 0) 
```

我正在使用 python 2.7.1 和 simplejson 2.6.2，对 simplejson 的回溯到第 426 行。

视图如下所示：

```
import simplejson as json
import csv
import urllib2
from django.http import HttpResponse
from settings import PRIMARY_DOMAIN

def csv_writer(request):
    response = HttpResponse(mimetype='text/csv')
    dat = '%s' % datetime.now()
    dat = dat[0:16]
    response['Content-Disposition'] = 'attachment; filename="CSV_%s.csv"' % dat

    writer = csv.writer(response)
    json_data = urllib2.urlopen(PRIMARY_DOMAIN + '/json/test_day/4982/')

    if request.method == "GET":
        if 'header' in request.GET.keys():
            header = request.GET['header'].split(',')
            writer.writerow([str(x) for x in header])
        if 'jqgrid' in request.GET.keys():
            url = request.GET['jqgrid']
            json_data = urllib2.urlopen(PRIMARY_DOMAIN + url)

    data = json.loads(json_data.read())

    ###below here may not work, haven't gotten past the json.loads()
    for row in data:
        writer.writerow(row)

    return response 
```

以下是对我来说失败的两个 json 示例：

```
{"records": "0", "total": "1", "rows": [], "page": "1"} 
```

另一个是：

```
{"records": "17", "total": "1", "rows": [{"cell": ["04/05/10", 4, 196, 73, 3.0, 3.6, 1.5, 0.83, 8.0, 67, 28452, "", 115, 3.2, "$20.76", "$15.16"], "id": 1}, {"cell": ["01/30/10", 4, 131, 75, 4.0, 3.0, null, 1.33, null, 81, null, "", 141, 3.5, "$18.34", "$13.75"], "id": 2}, {"cell": ["01/06/10", 4, 107, 114, 3.3, 3.0, null, 1.1, null, 110, null, "", 283, 4.5, "$17.11", "$19.50"], "id": 3}, {"cell": ["11/28/09", 4, 68, 105, 3.7, 2.8, null, 1.32, null, 108, null, "", 214, 4.1, "$17.30", "$18.16"], "id": 4}, {"cell": ["11/02/09", 4, 42, 99, 4.1, 2.5, null, 1.64, null, 108, null, "", 47, 1.9, "$17.40", "$17.23"], "id": 5}, {"cell": ["10/02/09", 4, 11, 94, 3.9, 3.2, null, 1.22, null, 100, null, "", 17, 0.4, "$19.29", "$18.13"], "id": 6}], "page": "1"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:27:23.900

这是一个更好的方法。无需打开与 urllib2 的新连接，您需要的一切都在 django 中。

```
from django.core.urlresolvers import resolve
view_match = resolve('/json/test_day/4982/')
json_data = view_match.func(request,**view_match.kwargs).content 
```

# android - 如何获得缩放的图像大小

> ID：13898335
> 
> 赞同：2
> 
> 时间：2012-12-16T03:23:49.933
> 
> 标签：android, imageview, scale

我`Matrix`用来缩放图像，但是如何以简单的方式知道缩放后的图像大小？

我的代码如下：

```
public class MainActivity extends Activity {
    private final String TAG = "MainActivity";

    private ImageView mImageView;
    private Button btnin, btnout;
    int imageid = 0;
    LinearLayout mlayout;
    private float scaleWidth = 1, scaleHeight = 1;
    private final static int NONE = 0;
    private final static int DRAG = 1;
    private final static int ZOOM = 2;

    private int mode = NONE;
    private Matrix matrix;
    private Matrix currentMatrix;
    private PointF startPoint;
    private PointF midPoint;
    private float startDistance;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mlayout = (LinearLayout) findViewById(R.id.mlayout);

        mImageView = (ImageView) findViewById(R.id.myImageView);
        matrix = new Matrix();
        currentMatrix = new Matrix();
        startPoint = new PointF();

        btnin = (Button) findViewById(R.id.myButton1);
        btnout = (Button) findViewById(R.id.myButton2);
        btnout.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                zoomOut();

            }
        });
        btnin.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                zoomIn();

            }
        });

        mImageView.setOnTouchListener(new ImageViewOnTouchListener());
    }

    private void reSetImage(double d) {

        Matrix matrix=new Matrix();
        scaleWidth *= d;
        scaleHeight *= d;
        matrix.postScale(scaleWidth, scaleHeight);
        mImageView.setImageMatrix(matrix);
    }

    private void zoomIn() {

        reSetImage(0.8);

    }

    private void zoomOut() {

        reSetImage(1.2);
    }

    @SuppressLint("NewApi")
    class ImageViewOnTouchListener implements OnTouchListener {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            ImageView view = (ImageView) v;

            switch (event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:

                 matrix.set(view.getImageMatrix());  
                 currentMatrix.set(matrix);
                 startPoint.set(event.getX(), event.getY());
                 mode = DRAG;

                break;

            case MotionEvent.ACTION_UP:

                mode = NONE;
                Log.i(TAG, "up");
            case MotionEvent.ACTION_POINTER_UP:
                mode = NONE;

                Log.i(TAG, "pointer up");
                break;

            case MotionEvent.ACTION_POINTER_DOWN: {
                startDistance = distance(event);
                if (startDistance > 15f) {

                    currentMatrix.set(matrix);
                    midPoint = getMidPoint(event);
                    Log.i(TAG, "midpoint:" + "X:" + midPoint.x + " Y:"
                            + midPoint.y);

                    mode = ZOOM;
                }

            }

                break;

            case MotionEvent.ACTION_MOVE: {
                if (mode == DRAG) {
                    float dx = event.getX() - startPoint.x;
                    float dy = event.getY() - startPoint.y;
                    matrix.set(currentMatrix);
                    matrix.postTranslate(dx, dy);
                    Log.i(TAG, "action move");

                } else if (mode == ZOOM) {
                    float distance = distance(event);
                    if (distance > 15f) {
                        matrix.set(currentMatrix);
                        float scale = distance / startDistance;
                        matrix.postScale(scale, scale, midPoint.x, midPoint.y);

                    }
                }
            }

                break;

            default:
                break;
            }

            mImageView.setImageMatrix(matrix);

            mImageView.invalidate();
            return true;
        }

    }

    private float distance(MotionEvent event) {

        float ex = event.getX(1) - event.getX(0);
        float ey = event.getY(1) - event.getY(0);
        return FloatMath.sqrt(ex * ex + ey * ey);

    }

    private PointF getMidPoint(MotionEvent event) {
        float x = (event.getX(1) + event.getX(0)) / 2;
        float y = (event.getY(1) + event.getY(0)) / 2;
        return new PointF(x, y);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:16:18.867

ImageView 类继承自 View 类，具有 getWidth() 和 getHeight()。这些方法会为您返回以像素为单位的测量值。所以你需要做的就是调用`mImageView.getWidth()`它，它会返回一个int。

# haskell - 使用 Type Nats 创建类型级别列表（在类型级别添加数字时遇到问题）

> ID：13898343
> 
> 赞同：4
> 
> 时间：2012-12-16T03:25:21.447
> 
> 标签：haskell, types

只是为了好玩，我想创建一个知道它有多长的类型级别列表。像这样的东西：

```
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE TypeOperators #-}

import GHC.TypeLits

data family TypeList a (n::Nat)

data instance TypeList a (0) = EmptyList
data instance TypeList a (1) = TL1 a (TypeList a (0))
data instance TypeList a (2) = TL2 a (TypeList a (1))
data instance TypeList a (3) = TL3 a (TypeList a (2)) 
```

但是，我当然想将其概括为：

```
data instance TypeList a (n)   = TL3 a (TypeList a (n-1)) 
```

但这会产生错误：

```
 TypeList.hs:15:53: parse error on input `-'
    Failed, modules loaded: none. 
```

另一种尝试：

```
data instance TypeList a (n+1) = TL3 a (TypeList a (n)) 
```

还会产生错误：

```
 Illegal type synonym family application in instance: n + 1
    In the data instance declaration for `TypeList' 
```

我认为这样的事情一定是可能的。绝对可以使用以下符号：

```
data Zero
data Succ a 
```

但我无法用更好看的版本弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-03T01:12:33.267

类型级别的`Nat`改进已在 GHC 7.8 中实现，现在可以实现了！

```
{-# LANGUAGE DataKinds, KindSignatures #-}
{-# LANGUAGE TypeFamilies, TypeOperators #-}

import GHC.TypeLits

data family List (n :: Nat) a
data instance List 0 a = Nil
data instance List n a = a ::: List (n - 1) a

infixr 8 ::: 
```

using与您自己编写`List`的任何类似数据结构一样自然：`[]`

```
λ. :t 'a' ::: 'b' ::: 'c' ::: Nil
'a' ::: 'b' ::: 'c' ::: Nil :: List 3 Char 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T04:40:46.053

正如它们在 GHC 7.6 中一样，类型级别的 Nats 不会让你做这种事情。尽管名称暗示了什么，但类型`0 :: Nat`and之间目前或多或少没有关系（不像你的and ，你可以用它做有用的事情）。这在 GHC 的未来版本中会更好。`1 :: Nat``Zero``Succ Zero`

# mysql - 如何保存 BLOB 数据类型的图像

> ID：13898350
> 
> 赞同：3
> 
> 时间：2012-12-16T03:26:25.967
> 
> 标签：mysql

我正在尝试在我的 MYSQL 数据库中的字段中使用 BLOB 数据类型存储图像，但是当我点击应用按钮时，它给了我以下错误：

```
ERROR 1105: Parameter of prepared statement which is set through mysql_send_long_data() is longer than 'max_long_data_size' bytes 
```

我将非常感谢任何投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:45:31.517

max_long_data_size 的默认值为 1048576 - 你的图片比这大吗？如果是，您需要增加 /etc/my.cnf 文件中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T04:23:21.980

在 xampp 中，“我的”（配置文件）位置是“xampp\mysql\bin\”，如果你在那里得到那个文件，请在 bin 中查看。并且您尝试使用 longblob 而不是 blob。longblob 可以存储比 blob 更多的数据。

**编辑：**您可以将图像路径（即：../image1.jpg）存储在数据库中，而不是将图像存储到数据库中。将图像存储在数据库中可能会导致问题，甚至可能导致数据库崩溃。

# android - 意图和 setcontentview 之间的区别

> ID：13898355
> 
> 赞同：5
> 
> 时间：2012-12-16T03:28:51.337
> 
> 标签：android

在我的主要活动中，将视图作为意图加载或使用 setContentView 有区别吗？

```
public class MainActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
  }
} 
```

还是这样更好？如果他们都加载布局文件，不确定有什么区别？

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         Intent i = new Intent(MainActivity.this, CalculateTip.class);
         startActivity(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T03:32:48.253

不同之处在于，第一种方式不是创建新的 Activity，而是简单地更改当前 Activity 的布局。使用第二种方式，您正在创建一个新的 Activity。

实际的区别在于，在您开始新的 Activity 后，使用第二种方式，您可以按下后退按钮并返回第一种方式。而第一种方式一旦显示第二个布局，如果您按下后退按钮，它将完成当前（唯一）活动，这将使用户回到他们在进入您的应用程序之前所做的任何事情。

如果不进一步了解您要完成的具体目标，就无法确定哪个“更好”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:34:45.727

意图是从活动初始化新活动......

setContentView 是设置布局xml

# jquery - 有没有更好的方法来根据包含的文本查找和替换类？

> ID：13898356
> 
> 赞同：1
> 
> 时间：2012-12-16T03:29:11.633
> 
> 标签：jquery, sharepoint

在我的共享点页面中，我需要一个多选字段。我想用图标替换该文本。

现在，我想出了这个确实可以工作的 jquery 函数。问题是它在页面加载后运行，并使页面在完成之前无响应。

正如你所看到的，它遍历每个带有类的元素`.ms-vb2`并检查它的文本是否与其中一个字符串匹配，然后删除该字符串，但提供一个类。我将用背景图像图标填充该类的 css。

有一个更好的方法吗？如果有更好的方法，我不喜欢 jQuery。否则，也许有更好的方法来编写这个函数？

```
function setRatingsStyles(){
    var ClassName = ".ms-vb2";
    //var ClassName = ".RatingsCSStoken";
    var ratingscale1 = [];
    ratingscale1[1] = "(1) Go";
    ratingscale1[2] = "(2) Warning";
    ratingscale1[3] = "(3) Stop";

    $(ClassName).each(function (){
         for(i=0;i < ratingscale1.length; i++){
            //$(ClassName).text(ratingscale1[i]).addClass("statusRating" + i).text("");     //we are replacing the text with an icon
            $((ClassName) + ":contains('" + ratingscale1[i] + "')").addClass("statusRating" + i).text("");      //we are replacing the text with an icon
         }
    });

} 
```

这是我从 Firebug 中提取的截断片段（我删除了表单标签上方和下方的所有内容，以及脚本标签；这些`...`只是示例不需要的属性）：

```
<div>
<div>
<div id="s4-ribbonrow" class="s4-pr s4-ribbonrowhidetitle" style="height: 44px;">
<div id="s4-workspace" class="s4-nosetwidth" style="height: 737px;">
<div id="s4-bodyContainer" style="width:2010px!important">
<div id="ctl00_MSO_ContentDiv">
<div id="powerstrip" class="s4-notdlg">
<div id="toplinkbar" class="s4-notdlg">
<div class="s4-notdlg">
<div id="s4-leftpanel" class="s4-notdlg">
<div id="pagebody" class="s4-ca">
<div id="pagebodytitle" class="s4-notdlg">
<div id="pageholder">
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>
<td id="MSOZoneCell_WebPartWPQ2" class="s4-wpcell-plain" ...">
<table class="s4-wpTopTable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>
<td valign="top">
<div id="WebPartWPQ2" class="noindex" style="" allowexport="false" allowdelete="false" width="100%" ...>
<span></span>
<table width="100%" cellspacing="0" cellpadding="0" border="0" ...>
<tbody>
<tr>
<td>
<iframe id="FilterIframe20" ...>
<table id="{...}" class="ms-listviewtable" width="100%" cellspacing="0" cellpadding="1" border="0" ...>
<tbody>
<tr class="ms-viewheadertr ms-vhltr" valign="top">
<tr class="ms-itmhover" iid="20,4,0" setedgeborder="true">
<td class="ms-vb-itmcbx ms-vb-firstCell">
<td class="ms-vb2"></td>
<td class="ms-vb2">
<td class="ms-vb2">Georgetown IL</td>
<td class="ms-vb-title" height="100%" onmouseover="OnChildItem(this)">
<td class="ms-vb2">Renovation</td>
<td class="ms-vb2">Active</td>
<td class="ms-vb2">Bob Newhart</td>
<td class="ms-vb-user"></td>
<td class="ms-vb2">
<td class="ms-vb2 rating4">(4) High</td>
<td class="ms-vb2">
**...repeated over and over....**
<td class="ms-vb2">(1) Go</td>
<td class="ms-vb2">(2) Warning</td>
<td class="ms-vb2">(3) Stop</td>
<td class="ms-vb2">(1) Go</td>
<td class="ms-vb2">Office</td>
<td class="ms-vb-user">
<td class="ms-vb2 ms-vb-lastCell">
</tr>
<tr class="ms-alternating ms-itmhover" iid="20,6,0" setedgeborder="true">
<tr class="ms-itmhover" iid="20,8,0" setedgeborder="true">
**...repeated over and over....**
</tbody>
</table>

</td>
</tr>
</tbody>
</table>
<table class="ms-bottompaging" width="100%" cellspacing="0" cellpadding="0" border="0" ...">
<table id="Hero-WPQ2" width="100%" cellspacing="0" cellpadding="0" border="0" ...>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="masterfooter" class="s4-notdlg" style="clear: both;">
<div id="DeveloperDashboard" class="ms-developerdashboard"> </div>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:45:26.913

现在，您正在循环这些类项至少 4 次（一次在外循环中，三次在内循环中）。您应该将循环切换为更像以下内容：

```
$(ClassName).each(function (){
  var $this = $(this);
  var i = $.inArray($this.text(), ratingscale1);
  if(i >= 0) {
    $this.addClass("statusRating" + i).text("");
  }
}); 
```

我不确定这是否是理想的，因为它仍然有你循环过多的负面影响。它比你所拥有的要好。理想情况下，您将控制生成的 HTML 并将类名放入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:26:38.057

一些可以显着提高性能的建议：

让服务器代码向包含文本中值的类添加`data-`属性。`.ms-vb2`这将有助于避免使用`:contains`需要正则表达式解析文本的选择器。如果元素有值，则仅在服务器代码中添加`data-`属性以避免循环空元素。

```
<td class="ms-vb2" data-rating="(1) Go">(1) Go</td> 
```

将整个类缓存在变量中以避免多次搜索 DOM：

```
var $ratings=$('td .ms-vb2[data-rating]'); 
```

循环`ratingscale1`数组并使用`filter()`方法从先前缓存的对象中创建适当元素的集合：

```
 for(i=0; i= ratingscale1.length;i++){
     $ratings.filter(function(){
           return $(this).data('rating') == ratingscale1[i];
     }).addClass("statusRating" + i).text("");
 } 
```

在编写此代码时考虑了所有这些之后……您可以在服务器上添加类并删除文本，这也比在 DOM 中更快，并且在页面加载时呈现 CSS 时会存在类。

# sql - COALESCE 接受多少参数？

> ID：13898362
> 
> 赞同：3
> 
> 时间：2012-12-16T03:30:46.873
> 
> 标签：sql, oracle, coalesce

我无法在 SO 中找到它，并认为在这里找到它可能是值得的，因为 oracle 文档没有指定它。

[http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions023.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions023.htm)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T03:32:04.843

在 Oracle 10g 上测试。

```
DECLARE
    cur SYS_REFCURSOR;
    vQuery VARCHAR2(32000) := 'SELECT COALESCE(:NULLS) FROM dual';
    vNulls VARCHAR2(32000) := '1, 1';
    i PLS_INTEGER := 2;
BEGIN
    LOOP
        OPEN cur FOR REPLACE (vQuery, ':NULLS', vNulls);
        CLOSE cur;

        i := i + 1;
        vNulls := vNulls || ', 1';
    END LOOP;
    EXCEPTION
        WHEN OTHERS THEN
            DBMS_OUTPUT.PUT_LINE(i || ' ' || SQLERRM);
END;

256 ORA-00939: too many arguments for function 
```

所以，答案是`256`

**编辑：** 正如 Bob Duell 所建议的：

```
SELECT func_id, name, minargs, maxargs 
FROM V$SQLFN_METADATA
WHERE name = 'COALESCE'

FUNC_ID NAME        MINARGS MAXARGS 
387     COALESCE    2       0 
```

:(

**编辑：**

11.2.0.3 的限制似乎是 65,535。

上面的脚本不适用于那么多参数。您可以通过创建和运行一个非常大的 SQL 语句来测试限制，使用如下脚本。

```
--Create a COALESCE with 65,536 functions.
--It will fail with: ORA-00939: too many arguments for function
--But if you remove the last argument it will work, at least on 11.2.0.3.
--WARNING: Sending this much data through DBMS_OUTPUT may freeze some tools.
begin
    dbms_output.put_line('select coalesce(');
    for i in 1 .. 6553 loop
        dbms_output.put_line('1,2,3,4,5,6,7,8,9,0,');
    end loop;
    dbms_output.put_line('1,2,3,4,5,6');
    dbms_output.put_line(') from dual;');
end;
/ 
```

# jquery-validate - 清除输入旁边的错误消息

> ID：13898363
> 
> 赞同：0
> 
> 时间：2012-12-16T03:30:56.153
> 
> 标签：jquery-validate

我正在使用 jquery 验证插件并试图弄清楚如何删除表单输入旁边的默认错误消息。

这是[JSFiddle中的一个示例](http://jsfiddle.net/Dman100/jJsSG/29/)

我在顶部的 div 中显示无效字段的数量并突出显示我的输入字段。

我要删除的输入“此字段为必填项”旁边的错误消息。如果该字段有效，我想添加一个绿色刻度线，显示该字段已成功验证。

这是我一直在玩弄的脚本：

```
<script type="text/javascript">

    var j$ = jQuery.noConflict();

    j$(document).ready(function(){
        var validator = j$('[id$=Details]').validate({
            invalidHandler: function() {
                j$("#error-message").html('<img src="{!URLFOR($Resource.event, 'images/error-icon.png')}" width="32" height="32">').append(" Please correct the entries highlighted below. " + validator.numberOfInvalids() + " field(s) are invalid.");
            },
            success: function(label) {
                //label.replaceWith('<img src="{!URLFOR($Resource.event, 'images/success-icon.png')}" width="16" height="16" class="validated">');
            }
        });

        j$('[id$=Email]').rules("add",{
            required: true,
            email: true
        }); 
    });
</script> 
```

这有助于解释吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:02:20.103

默认情况下，jQuery Validate 插件已经自动显示和动态清除错误，所以也许你让这变得比它需要的更复杂。在没有看到您的 HTML 或完全不知道为什么要采用这种方法的情况下，这是一个通用示例，它将为您指明正确的方向。

这可以很容易地修改为显示复选标记而不是背景颜色。

[**jsFiddle 演示**](http://jsfiddle.net/v2yqL/)

**HTML：**

```
​&lt;form>
    <input type="text" name="myfield" />
    <br/><br/>
    <input type="submit" />
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**jQuery：**

```
$(document).ready(function(){

    $('form').validate({
        rules: {
            myfield: {
                required: true,
                email: true
            }
        }
    });

});​ 
```

**CSS：**

```
.valid {
    background-color: green;
}
.error {
    background-color: red;
}​​​ 
```

* * *

**编辑：** 根据 OP 的 jsFiddle

更改`.replaceWith()`并[`.html()`](http://api.jquery.com/html/)清除`#error-message` `div`on success，并`.insertAfter(element)`在元素旁边放置复选标记。最后，添加`return false`到`errorPlacement:`函数以阻止放置任何错误。

```
success: function(label, element) {
    label
        .html(
            '<img src="images/success-icon.png" width="16" height="16" class="validated">'
        )
        .insertAfter(element);
    j$("#error-message").text('');
},
errorPlacement: function(error, element) {
    return false;
}, 
```

**工作演示：http:** [//jsfiddle.net/jJsSG/34/](http://jsfiddle.net/jJsSG/34/)

# javascript - Javascript - 在上一个功能结束后启动功能

> ID：13898366
> 
> 赞同：1
> 
> 时间：2012-12-16T03:32:12.980
> 
> 标签：javascript, jquery, function

我正在尝试在之前的功能结束后启动一个功能。.SideArea div 将在 .sideShowing 动画之后显示：none，#page 已结束，但 display:none 部分被忽略。

这是我的代码。

```
$(function(){
    $("#SideMenuButton").click(function() {
        var SideArea = $(".SideArea");
        if (SideArea.css('display')!=='block') {
            SideArea.css('display','block');
            var move = 260;
            $(".sideShowing #page").stop().animate({left:"+="+move},{queue:false,duration:150});
            $("body, #viewport").css('min-height','600px').css('max-height','600px');
        } else {
            $(".sideShowing #page").stop().animate({left:"0"},{queue:false,duration:150}, function() {
                $(".SideArea").css('display','none')});

            $("body, #viewport").css('min-height','800px').css('max-height','');
        }
    });
}); 
```

它是

```
$(".sideShowing #page").stop().animate({left:"0"},{queue:false,duration:150}, function() {
                $(".SideArea").css('display','none')}); 
```

部分，其中 display: none 被忽略。我希望该功能在前一个动画功能结束但它不起作用时启动。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:21:37.917

使用这种形式`animate()`，`complete`回调被指定为第二个参数（选项映射）的属性，而不是第三个参数。

```
$(".sideShowing #page").stop().animate({left:"0"}, {
    queue: false,
    duration: 150,
    complete: function() {
        $SideArea.css('display','none');
    }
}); 
```

# c# - 使用 MySQL 和 C# 将 FolderBrowserDialog 选定路径保存到数据库

> ID：13898370
> 
> 赞同：0
> 
> 时间：2012-12-16T03:32:54.773
> 
> 标签：c#, mysql

示例：这是我`selected path`的来自`browserdialog`

```
C:\Users\PHWS13\Desktop 
```

保存到数据库后，路径是这样的

```
C:UsersPHWS13Desktop 
```

我的路径字段的数据类型是`VARCHAR(100)`

这是我的 SQL 查询

```
 CREATE DEFINER=`xxxxxxxx`@`%` PROCEDURE `AddFolder`(folder_loc VARCHAR(100))
BEGIN
    INSERT INTO `tbl_folder`(`folder_location`) VALUES(folder_loc); 
```

我怎样才能解决这个问题？

C#代码：

```
public void AddFolder(string f)
{
    cn.Open();
    cmd = new MySqlCommand("call AddFolder('" + f + "')", cn);
    cmd.ExecuteNonQuery();
    cn.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:04:39.603

你需要`\`通过使用来逃避`\\`。

在 AddFolder 方法的开头试试这个：

```
f=f.Replace("\\","\\\\"); 
```

# c++ - 安全停止线程

> ID：13898372
> 
> 赞同：8
> 
> 时间：2012-12-16T03:33:24.677
> 
> 标签：c++, multithreading, winapi

我写多线程程序。

`TerminateThread`我想问和有什么区别`ExitThread`？

这是我`WM_DESTROY`收到时的代码片段：

```
void CleanAll()
{
    DWORD dwExit[MAX_THREAD];
    for(int i = 0; i < MAX_THREAD; i++)
    {
        GetExitCodeThread(hThread[i], &dwExit[i]);
        // I used ExitThread(dwExit[i]); previously
        TerminateThread(hThread[i], dwExit[i]);
        CloseHandle(hThread[i]);
    }
} 
```

我以前使用`ExitThread()`过，但是我的程序在任务管理器中仍然存在，所以我将其更改为`TerminateThread()`并且我的程序从任务管理器中消失了。

非常感谢任何提前解释。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T03:52:34.137

TerminateThread 强制**另一个线程**退出。你应该不惜一切代价避免调用它，因为它会阻止一个线程死在它的轨道上，而没有任何清理的机会。这包括分配的任何 CRT 内存。

ExitThread 是为了让**当前运行的线程**干净利落地停止自己。当您在上面调用它时，您可能会强制主 (UI) 线程退出，并可能让正在运行的线程仍然徘徊。因此，您的程序仍在运行，正如任务管理器中所证明的那样。GetExitCodeThread 也可能失败，因为线程实际上并未退出。

但是停止线程的正确方法是通过任何必要的干净方式发出干净的信号，表明它应该退出。 **然后在允许主线程退出之前让线程自行**退出。在下面的示例中，我使用了一个全局标志来指示线程它们应该退出。但这假设您的线程将始终有机会轮询全局 bool 状态。另一种更简洁的方法是让每个线程在事件句柄上调用 WaitForSingleObject。当事件句柄发出信号时，线程检查全局变量并在需要时退出。

```
bool global_Need_ToExit;  // use a bool or replace with an event handle the thread shoudl wait on

void CleanAll()
{
    //signal all threads to exit
    global_Need_ToExit = true;

    DWORD dwExit[MAX_THREAD];
    for(int i = 0; i < MAX_THREAD; i++)
    {
        // actually wait for the thread to exit
        WaitForSingleObject(hThread[i], WAIT_INFINITE);

        // get the thread's exit code (I'm not sure why you need it)
        GetExitCodeThread(hThread[i], &dwExit[i]);

        // cleanup the thread
        CloseHandle(hThread[i]);
        hThread[i] = NULL;
    }
}

DWORD __stdcall YourThreadFunction(void* pData)
{

    while (global_Need_To_Exit == false)
    {
        // do more work
    }

    return 0; // same as ExitThread(0);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-21T10:12:49.410

抱歉，但投票最多的答案是使用 ExitThread，因为它会“干净利落地停止自己”。这是不正确的。文档指出： ***ExitThread 是在 C 代码中退出线程的首选方法。但是，在 C++ 代码中，线程在调用任何析构函数或执行任何其他自动清理之前退出。因此，在 C++ 代码中，您应该从您的线程函数返回。*** 我听从一个论坛的建议来使用 ExitThread，然后花了几个小时想知道我所有的内存泄漏是从哪里来的，我很难学到这一点。是的，那是针对 C++ 的，但这就是这个问题的意义所在。实际上，即使对于 C 也有一个警告***“链接到静态 C 运行时库 (CRT) 的可执行文件中的线程应该使用 _beginthread 和 _endthread 进行线程管理，而不是 CreateThread 和 ExitThread。如果不这样做，会在线程调用 ExitThread 时导致少量内存泄漏。”*** 不要在不知道后果的情况下使用 ExitThread！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T03:52:14.137

当您的线程完成时，您的进程是否应该完成？您描述的问题可能有很多解释。如果要终止整个过程，只需调用`ExitProcess`.

问题`TerminateThread`在于这很可能导致内存泄漏。它不关心线程状态，也不关心它分配的资源。它也可能导致死锁，具体取决于您进行同步的方式。换句话说，它不会优雅地终止它。

终止线程的最佳方法是不显式终止它。不要调用`TerminateThread`nor `ExitThread`，而只是`return`从线程的函数中调用。您可能需要使用原子标志，或触发事件（或其他同步方法）来发出线程应该终止的信号。然后您的线程应定期检查该标志（或事件）并在返回（终止）之前释放所有资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T04:33:56.210

您可以使用 SingleWaitObjects 或 QueueUserAPC 但您必须确保线程停止检查这些异步对象或等待一个结束并正常终止线程..在linux中您可以使用信号

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T21:33:02.497

最终，您需要像查看迷你进程一样查看每个线程（无论如何，这就是它们的底层内容）。为了让它干净地关闭，你需要额外的基础设施让你 - 主线程 - 告诉它停止。

做到这一点的最简单方法是信号系统，POSIX 的发明者很早就发现了它，因此直接在操作系统中公开。这种系统在现实世界中最好的例子是美国邮局。每个代理都有一个唯一的地址，他们可以从该地址发送和接收来自其他地址的邮件（信号），并且由代理决定当他们收到信号时做什么。有些是信息或垃圾，因此会被忽略，而另一些则是高优先级，如果忽略它们，后果自负。

在代码级别，您需要以下内容才能使其正常工作（我已经为图像处理程序构建了其中一些）：
1）一些抽象的“事件”或“控制信号”对象。如果足够，请随意使用默认的 Windows 事件或 linux 信号。
2）某种“管道”：操作系统通常会有一个字面内核原语调用一个管道，让一个端拉数据，而另一个端把数据放入。这个家伙通常对于进程中的通信来说是矫枉过正的，但是你的对象需要在概念上是等价的。
3) 线程中的代码从管道中检索信号并对其进行操作。4) 所有线程都识别的“停止”或“取消”信号。

当然，您可以使用 TerminateThread 硬中止线程，就像您可以使用 taskkill 或 CTRL-C 终止进程一样。ExitThread 是一种特定于 Windows 的方式来构建干净的关闭信号，就像我在 (4) 中描述的那样，但您仍然需要 while 循环和“WaitForSingleObject”(3) 以及特定于 Windows 的句柄 (2) 才能使其工作。

# scala - 如何在 sbt 控制台中加载 scala 文件？

> ID：13898373
> 
> 赞同：11
> 
> 时间：2012-12-16T03:34:34.243
> 
> 标签：scala, sbt

> **可能重复：**
> [将 Scala 文件加载到解释器中以使用函数？](https://stackoverflow.com/questions/7383436/load-scala-file-into-interpreter-to-use-functions)

我像这样启动 sbt 控制台：

```
alex@alex-K43U:~/projects$ sbt console
[info] Set current project to default-8aceda (in build file:/home/alex/projects/)
[info] Starting scala interpreter...
[info] 
Welcome to Scala version 2.9.2 (OpenJDK Client VM, Java 1.6.0_24).
Type in expressions to have them evaluated.
Type :help for more information.

scala> 
```

我有一个`test.scala`(/home/alex/projects/test.scala) 文件，其中包含以下内容：

```
def timesTwo(i: Int): Int = {
  println("hello world")
  i * 2
} 
```

如何做到这一点，以便我可以在控制台中做这样的事情：

```
scala> timesTwo 
```

并输出函数的值？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T09:47:34.613

简而言之，使用`:load`scala REPL 中的函数来加载文件。然后，如果您将其包装在对象或类中，则可以在文件中调用该函数，因为`sbt`它会尝试编译它。不确定是否可以仅使用函数定义来完成。

将其包装在 an`object`中以`sbt`正确编译它。

```
object Times{
  def timesTwo(i: Int): Int = {
    println("hello world")
    i * 2
  }
} 
```

加载文件：

```
 scala> :load Times.scala
 Loading Times.scala...
 defined module Times 
```

然后调用`timesTwo`：`Times`

```
 scala> Times.timesTwo(2)
 hello world
 res0: Int = 4 
```

如果您只想要函数定义而不将其包装在 a 中，`class`或者`object`您可以使用`:paste`scala REPL/sbt 控制台中的命令将其粘贴。

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

def timesTwo(i: Int): Int = {
  println("hello world")
  i * 2
}

// Exiting paste mode, now interpreting.

timesTwo: (i: Int)Int 
```

这可以通过函数名来调用。

```
 scala> timesTwo(2)
 hello world
 res1: Int = 4 
```

# php - 如何将图像发送到邮箱？

> ID：13898374
> 
> 赞同：-1
> 
> 时间：2012-12-16T03:34:35.277
> 
> 标签：php, phpmailer

我正在使用 PHPmailer (http://phpmailer.worxware.com/) 类通过电子邮件发送表单信息。表格里面有这样的图像：

```
<form.....>

<div><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(42, 42); ?></div>

</form> 
```

如何通过电子邮件发送该图像？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:53:45.157

使用该`AddAttachment`方法或撰写 HTML 邮件并将图像作为`src`链接包含在内。

附件：[http](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/AdvancedMail)
://code.google.com/a/apache-extras.org/p/phpmailer/wiki/AdvancedMail 链接： [http ://code.google.com/a/apache-extras.org/p/phpmailer /wiki/基本邮件](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/BasicMail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:45:03.807

除非您有一个文件输入字段，您可以通过该字段将图像上传到服务器，否则您将无法通过 PHPMailer（或任何其他方式）发送它。

```
<form>
    ...
    <input type="file" />
    ...
</form> 
```

也就是说，如果您真的想发送附加到电子邮件的图像。另一方面，如果您想发送一封电子邮件，其中包含嵌入在电子邮件正文中的图像代码，那么我猜您正在寻找一种发送 HTML 电子邮件的方法，PHPMailer 也支持这种方法。这是一个示例，您将如何做到这一点（请注意，图像本身需要可公开访问）。

```
<?php
/**
* Sending an HTML email through PHPMailer and SMTP...
*/
require_once('PHPMailer.class.php');

$mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch

$mail->IsSMTP(); // telling the class to use SMTP

try {
    $mail->CharSet = 'utf-8';
    $mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
    $mail->SMTPSecure = 'tls';
    $mail->SMTPAuth   = true;                  // enable SMTP authentication
    $mail->Host       = "smtp.example.com"; // sets the SMTP server
    $mail->Port       = 587;                    // set the SMTP port for the GMAIL server
    $mail->Username   = "user@example.com"; // SMTP account username
    $mail->Password   = "password";        // SMTP account password
    $mail->AddReplyTo('user@example.com', 'Sending User');
    $mail->AddAddress('user_2@example.com', 'Receiving User');
    $mail->SetFrom('user@example.com', 'Sending User');
    $mail->Subject = 'Image';
    $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!'; // optional - MsgHTML will create an alternate automatically
    $mail->MsgHTML('<html><body><img src="http://example.com/path_to_image.jpg" width="xxx" height="xxx" /></body></html>'));
    $mail->Send();
    echo "Message Sent OK<p></p>\n";
} catch (phpmailerException $e) {
    echo $e->errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
    echo $e->getMessage(); //Boring error messages from anything else!
}
?> 
```

至于 HTML 电子邮件，它们有自己的一套规则和最佳实践。[即，如果您打算做比发送图像更复杂的事情，您应该使用像这样](http://beaker.mailchimp.com/inline-css)的 CSS 内联器，避免使用诸如`background-image`等之类的东西。

# knockout.js - Knockout Mapping 插件 - 将对象映射到可观察对象

> ID：13898376
> 
> 赞同：0
> 
> 时间：2012-12-16T03:34:42.217
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

我想使用敲除映射插件，但我需要模型上的对象本身就是属性（主要是因为它们需要可替换）。

考虑一个使用以下模型的大大简化的示例：

```
{
  family: {
    patriarch: {
      name: "Fred Flintstone", child: "Pebbles"
    }
  },
  allPeople: [
    {name: "Fred Flintstone", child: "Pebbles"},
    {name: "Wilma Flintstone", child: "Pebbles"},
    {name: "Barney Rubble", child: "Bam Bam"}
  ]
} 
```

假设我希望能够通过选择来修改族长，其中选项是 allPeople，更改选择可能会产生很多副作用。

映射插件使所有名称属性都可观察，并且 allPeople 成为 observableArray，但为了让我的选择正常工作，族长对象本身必须是可观察的。

编写我自己的粗略映射器只需要 13 行代码，但由于映射插件功能如此齐全，我希望有一个选项或其他方式来让这个看似常见的场景工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:02:50.443

这个怎么样？对于选择：

```
<select data-bind="options: allPeople, optionsText: 'name', value: family.patriarch"></select> 
```

并且在设置映射时，不是为 patriarch 属性指定子视图模型，而是使用初始数据返回一个 observable：

```
var data = {
  family: {
    patriarch: {
      name: "Fred Flintstone", child: "Pebbles"
    }
  },
  allPeople: [
    {name: "Fred Flintstone", child: "Pebbles"},
    {name: "Wilma Flintstone", child: "Pebbles"},
    {name: "Barney Rubble", child: "Bam Bam"}
  ]
};

var mapping = {
    'patriarch': {
        create: function (options) {
            return ko.observable(options.data);
        }
    }
}

var vm = ko.mapping.fromJS(data, mapping);

vm.family.patriarch.subscribe(function(value) {
    alert(ko.toJSON(value));
});

ko.applyBindings(vm); 
```

在这里提琴：

[http://jsfiddle.net/SZXDG/6/](http://jsfiddle.net/SZXDG/6/)

这可以按您的需要工作吗？

# ios - iOS UIScrollView 抗锯齿

> ID：13898383
> 
> 赞同：0
> 
> 时间：2012-12-16T03:35:42.377
> 
> 标签：ios, uiscrollview, uiimageview, antialiasing

> **可能重复：**
> [iOS UIImageView 缩小图像在 iPad 2 上产生锯齿图像](https://stackoverflow.com/questions/12730384/ios-uiimageview-scaling-image-down-produces-aliased-image-on-ipad-2)

我想这不会打扰除我之外的很多人，但在旧手机（3GS 及之前）上，如果您将大图像放在 UIScrollView 中然后缩小，图像看起来确实有锯齿，即锯齿状。在具有更高分辨率屏幕的较新设备上，它看起来不错。

有什么方法可以消除图像的锯齿吗？

坏的：

![在此处输入图像描述](../Images/6153bf0507a7074633a12f0c44aaa75e.png)

好的： ![在此处输入图像描述](../Images/e2ade247a0f641c09fb2a6bb307cdbb7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:15:26.597

您可以将下采样图像用于非视网膜显示设备，也可以将核心图像过滤器应用于现有图像。也许试试 CIGaussianBlur。

# php - Apache 列出目录文件而不是 index.php

> ID：13898386
> 
> 赞同：7
> 
> 时间：2012-12-16T03:37:15.023
> 
> 标签：php, apache, directoryindex

我的 Apache Web 服务器突然停止自动提供 index.php 文件。它改为显示目录列表。我试过帮助，但没有运气。

我的 htttpd.conf 文件包括

```
<IfModule module_php5>
    AddType application/x-httpd-php .php
</IfMOdule> 
```

和

```
DirectoryIndex index.php index.html 
```

如果以上都OK，会出现什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T13:12:14.627

当我第一次提出问题时，我对快速响应感到惊讶，然后回复停止了！所以我自己找到了答案（偶然！）。主服务器根目录显示索引文件很好，我的用户站点文件夹没有。

apache 用户目录中的每个用户都有一个 .conf 文件。我添加了

```
<Directory "/Users/mavili/Sites/">
    Options Indexes MultiViews FollowSymLinks SymLinksIfOwnerMatch Includes ExecCGI
    DirectoryIndex index.php index.html index.pl index.cgi
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

进入我的用户名和 tata 的文件，它起作用了！

# wxpython - wxPython 笔记本的标签位于顶部？

> ID：13898391
> 
> 赞同：0
> 
> 时间：2012-12-16T03:38:50.183
> 
> 标签：wxpython

我怎样才能让 wxPython 笔记本选项卡位于顶部的中心？

额外的文字让它看起来更长，尽管这是一个简单的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:16:03.277

对于本机小部件，笔记本选项卡始终从左上角开始。您唯一可以更改的是选项卡出现在哪一侧（即顶部、左侧、底部或右侧）。您无法控制它们出现在哪一侧。

您可能可以使用 FlatNotebook 并对其进行一些修改以添加此功能，因为它是用纯 Python 编写的，而 wx.Notebook 是用 C++ 包装的。

# sql - 查询依赖于另外两个表和一列

> ID：13898392
> 
> 赞同：3
> 
> 时间：2012-12-16T03:39:04.853
> 
> 标签：sql, dependencies

我需要从一个取决于其他两个条件的表中获取一行，所以如果可能的话，我正在寻找一个很好的查询来解决我的问题。

**说明**
A`level`是 a 的一部分`series`。A`player`可以完成一个`level`（保存在表中`players_levels_done`）。在 a中，使用列`series`对`level`s 进行排序`order`。最低的订单号是要解决的第一级。现在我想获得`level_id`玩家需要解决的下一个级别。

**示例 #1**

> 玩家 9 已完成第 5 级。由于第 5 级是最低顺序，因此查询应返回`level_id`4，因为它是该特定用户系列 1 中下一个未解决的级别。

**示例 #2**

> 玩家 19 已完成第 11 关。但第 11 关不是系列中第一个排序的关卡，因此查询应返回`level_id`12。

如果玩家解决了系列的所有级别，则查询应返回总行数 0。

**桌子`levels`**

```
id (level_id) | series_id | order
--------------+-----------+------
4             | 1         | 20
5             | 1         | 10
6             | 1         | 30
11            | 2         | 60
12            | 2         | 50
13            | 2         | 70 
```

**桌子`players_levels_done`**

```
player_id | level_id
----------+---------
9         | 5
19        | 11 
```

**桌子`series`**

```
id (series_id) | ...
---------------+----
1              | ...
2              | ... 
```

**桌子`players`**

```
id (player_id) | ...
---------------+----
9              | ...
19             | ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T04:13:35.660

这是一个答案。它有效！

我将 order 更改为 level_order 以在 mysql 中使用它。

[这是在 SQL Fiddle](http://sqlfiddle.com/#!2/8c4e7/1)中尝试的相同方法。

```
select 
  pout.player_id, lout.id
from
      levels as lout,
      players_levels_done as pout
where 
  lout.level_order in ( 
    select 
      min(l1.level_order )
    from 
      levels as l1,
      players_levels_done as p1
    where
      l1.id not in 
        (
            select 
              level_id 
            from 
              players_levels_done 
            where 
              player_id = p1.player_id
         )
      and
      l1.series_id =
        (
           select 
            distinct l.series_id 
          from 
            levels as l,
            players_levels_done as p
          where
            p.level_id = l.id
            and 
             player_id = p1\. player_id
        )
    and p1.player_id = pout.player_id
    group by p1.player_id
  )
; 
```

# windows-8 - Visual Studio 2012 中缺少模板 Direct3D 应用程序

> ID：13898396
> 
> 赞同：1
> 
> 时间：2012-12-16T03:39:50.127
> 
> 标签：windows-8, visual-studio-2012, project-template

如何在 Visual Studio 2012 中添加缺少的模板“Direct3D 应用程序”？缺少许多这样的模板，使用 online->templates 会导致找不到模板。我后来安装了 .net 框架 2 和 3.5，当我尝试最新版本的 .net 4.5 时，它说它已经安装在我的操作系统 windows 8 上。我必须下载这个模板才能开始游戏开发，非常有义务为你提供帮助。

它是在这个网站上给出的 -> [http://msdn.microsoft.com/en-us/library/windows/apps/hh780569.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780569.aspx)，它的 Visual C++ 和许多已安装的模板都丢失了。仅显示诸如 win32 项目、控制台、空 2 测试项目模板和 makefile 项目模板之类的模板。休息没有模板。此外，Visual C++ 中没有Windows 商店的类别，即Visual C++ 中没有Windows 商店类型的项目。也许我应该安装 MSVC2012 以外的东西。此外，在 2010 年默认安装的模板是隐藏的，您必须使用“devenv.exe /vsshowtemplates”显式取消隐藏它们 - 该命令是这样的。但是MSVS2012中没有devenv.exe，甚至没有控制台窗口View->Other Windows。拜托，如果你能弄清楚，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:36:21.830

你用什么语言编程，你有什么版本的 Visual Studio 2012？

在 Visual Studio Express for Windows 8 中，您可以在“新建项目”对话框左侧的树视图控件中的已安装、模板、Visual C++、Windows 应用商店下找到“Direct3D 应用程序”。

[您可以从此处](http://aka.ms/JenVS2012)安装适用于 Windows 8 的 Visual Studio Express，页面中间的蓝色部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:55:05.423

终于发现问题了。事实证明，当我们安装“Visual STudio 2012 for desktop”时，没有得到像 Grid App、Split App、Direct3D App 等模板。相反，我们需要安装“Visual STudio 2012 for Windows 8”。浪费了 2 天的时间来解决这个问题。Microsoft 应在提供诸如开发游戏之类的教程之前提供这些信息。

# php - 当xml标签中已经有内容时，如何获取它的内部文本？

> ID：13898399
> 
> 赞同：3
> 
> 时间：2012-12-16T03:40:06.517
> 
> 标签：php, xml, arrays

这是我正在使用的示例 xml：

```
<contact id="43956">
 <personal>
      <name>
           <first>J</first>
           <middle>J</middle>
           <last>J</last>
           Some text...
      </name>
      <title>Manager</title>
      <employer>National</employer>
      <dob>1971-12-22</dob>
 </personal>
</contact> 
```

我得到了，`Some text...`但现在我需要我的代码来读取整个 xml 文档。它也没有读取 xml 中的值......正如你所知道的那样，我以前从未使用`XMLReader`过。

这就是我得到的：

`Array ( [contact] => Array ( [id] => 43956 [value] => some sample value ) [first] => [middle] => [last] => [#text] => Some text... [name] => [title] => [employer] => [dob] => [personal] => )`

这是我现在拥有的代码：

```
function xml2array($file, array $result = array()) {
$lastElementNodeType = '';
$xml = new XMLReader();
if(!$xml->open($file)) {
    die("Failed to open input file");
}
while($xml->read()) {
    switch ($xml->nodeType) {
        case $xml::END_ELEMENT:
            $lastElementNodeType = $xml->nodeType;
        case $xml::TEXT:
            $tag = $xml->name;
            if($lastElementNodeType == 15) {
                $result[$tag] = $xml->readString();                 
            }
        case $xml::ELEMENT:
            $lastElementNodeType = $xml->nodeType;
            $tag = $xml->name;
            if($xml->hasAttributes) {
                while($xml->moveToNextAttribute()) {
                    $result[$tag][$xml->name] = $xml->value;
                }
            }
    }
}
print_r($result);
} 
```

我想过让这个函数递归，但是当我尝试这样做时，它使数组变得非常混乱。

我有一个版本，但它仍然没有输出`J`，`first`等等：

```
function xml2assoc($xml) { 
$tree = null; 
while($xml->read()) 
    switch ($xml->nodeType) { 
        case XMLReader::END_ELEMENT: return $tree; 
        case XMLReader::ELEMENT: 
            $node = array('tag' => $xml->name, 'value' => $xml->isEmptyElement ? '' : xml2assoc($xml)); 
            if($xml->hasAttributes) 
                while($xml->moveToNextAttribute()) 
                    $node['attributes'][$xml->name] = $xml->value; 
            $tree[] = $node; 
        break; 
        case XMLReader::TEXT: 
        case XMLReader::CDATA: 
            $tree .= $xml->value; 
    } 
return $tree; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T03:24:23.640

## 拿 1

我认为您需要做的是保存最近节点的类型或至少最后一个节点的类型，以便对其进行测试。简而言之，至少当您在示例 XML 中呈现它时，您将遇到一个`ELEMENT_END`节点类型、一个`TEXT`带有您要查找的文本的节点类型，然后是另一个`ELEMENT_END`节点类型。

因此，您将需要一个`case $xml::TEXT`，并且您还需要保存以前的节点类型，以便您的解析器知道，在正常情况下，它应该期待一个新`ELEMENT`事件或一个`END_ELEMENT`事件，但已经收到文本。这将是您需要将文本捕获到临时变量`readString()`并保存它以供您使用的信号，或者等待查看下一个节点是否也是一个`ELEMENT_END`，此时您可以保存它并清除临时变量。

## 拿 2

现在我们对您希望得到的结果有了更多了解（即，由于您希望捕获整个树，而不仅仅是从中获取特定信息），我建议您坚持使用函数的递归版本. 我稍微修改了你的那个（请参阅 TEXT 和 CDATA 案例以了解主要的实质性变化）。

```
function xml2assoc($xml)
{
    $tree = null;
    while($xml->read())
    {
        switch ($xml->nodeType)
        {
            case XMLReader::END_ELEMENT:
                return $tree;
            case XMLReader::ELEMENT: 
                $node = array('tag' => $xml->name, 'value' => $xml->isEmptyElement ? '' : xml2assoc($xml));
                if($xml->hasAttributes)
                    while($xml->moveToNextAttribute()) 
                        $node['attributes'][$xml->name] = $xml->value; 
                $tree[] = $node;
                break;
            case XMLReader::TEXT:
                $tree["text"] = $xml->value;
                break;
            case XMLReader::CDATA:
                $tree["cdata"] = $xml->value;
                break;
        }
    }
    return $tree;
} 
```

这种情况下的输出如下所示：

```
Array
(
    [0] => Array
        (
            [tag] => contact
            [value] => Array
                (
                    [0] => Array
                        (
                            [tag] => personal
                            [value] => Array
                                (
                                    [0] => Array
                                        (
                                            [tag] => name
                                            [value] => Array
                                                (
                                                    [0] => Array
                                                        (
                                                            [tag] => first
                                                            [value] => Array
                                                                (
                                                                    [text] => J
                                                                )
                                                        )
                                                    [1] => Array
                                                        (
                                                            [tag] => middle
                                                            [value] => Array
                                                                (
                                                                    [text] => J
                                                                )
                                                        )
                                                    [2] => Array
                                                        (
                                                            [tag] => last
                                                            [value] => Array
                                                                (
                                                                    [text] => J
                                                                )
                                                        )
                                                    [text] => Some text...
                                                )
                                        )
                                    [1] => Array
                                        (
                                            [tag] => title
                                            [value] => Array
                                                (
                                                    [text] => Manager
                                                )
                                        )
                                    [2] => Array
                                        (
                                            [tag] => employer
                                            [value] => Array
                                                (
                                                    [text] => National
                                                )
                                        )
                                    [3] => Array
                                        (
                                            [tag] => dob
                                            [value] => Array
                                                (
                                                    [text] => 1971-12-22
                                                )
                                        )
                                )
                        )
                )
            [attributes] => Array
                (
                    [id] => 43956
                )
        )
) 
```

我认为这就是您要做的小修改，尽管我们实际上只是在这里重新发明轮子。我希望您需要解析的 XML 不是特别大。

# opencv - 是否有访问 OpenCV 元素的模板方法？

> ID：13898402
> 
> 赞同：3
> 
> 时间：2012-12-16T03:40:23.930
> 
> 标签：opencv, mat

我有一些使用 OpenCV Mat 的例程。这是其中之一：

```
void drawCircles(Mat& image, const Mat points, Scalar color)
{
    // fix format of Matrix <-> hard coding

    //MatInfo(points);
    //getchar();

    CV_Assert(points.channels() == 2);
    //CV_Assert(points.depth() == CV_32FC2); // this is so restricted!!

    //CV_Assert(points.channels() == 2);
    //CV_Assert(points.depth() == CV_16UC2); 

    // added working for both row/col point vector

    Point2d p0;

    for (int i = 0; i < points.cols; i++)
    {   
        //p0.x = cvRound(points.at<Vec2i>(0,i)[0]);
        //p0.y = cvRound(points.at<Vec2i>(0,i)[1]);

        p0.x = cvRound(points.at<Vec2f>(0,i)[0]);
        p0.y = cvRound(points.at<Vec2f>(0,i)[1]);

        //p0.x = cvRound(points.at<Vec2d>(0,i)[0]);
        //p0.y = cvRound(points.at<Vec2d>(0,i)[1]);

        circle(image, p0, 5, color, 2, 8);
    }
} 
```

用于在给定点的图像上绘制圆圈。

我可以通过 matrixA.at(i,j) 访问 Mat 的元素。然而，这太具体了。当矩阵的元素类型不同时，该功能将无法工作。在这种情况下是否可以编写某种模板函数？哪个与 Mat 的元素类型无关？

谢谢

编辑01：

如果是这样的

```
template <class T> 
void drawCircles(Mat_<T> img, const Mat points, Scalar cl)
{
  ..
  img.at<T>() = something;
  ..
} 
```

那么这将是完美的。但是我已经使用 OpenCV 文档进行了搜索，并且认为 OpenCV MAT 不支持这一点。还是我遗漏了一些要点？

Edit02：这是我的尝试：

```
template <class Type>
void drawCircles(Mat& image, const Mat_<Vec<Type, 2> > points, Scalar color)
{

    for (int i = 0; i < points.cols; i++)
    {
        p0.x = cvRound(points.at<Vec<Type, 2>>(0,i)[0]);
        p0.y = cvRound(points.at<Vec<Type, 2>>(0,i)[1]);

        circle(image, p0, 5, color, 2, 8);
    }
} 
```

我称之为：

```
drawCircles(frame, Points, Scalar(255, 255, 255)); 
```

其中点是：

```
Mat Points = Mat(1, 5, CV_32FC2, 0); 
```

还是不行:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:59:22.117

首先：你的设计对我来说似乎有点坏了。如果“点”只不过是一个包含 2D 向量的 1xn 矩阵，那么使用向量代替会更合适，例如`std::vector<Point2f>`.

但是，对您的尝试进行微小更改后，模板版本应该可以正常工作：

```
template <typename T>
void drawCircles(InputArray _image, InputArray _points, Scalar color)
{
    Mat images = _image.getMat(), points = _points.getMat();
    CV_Assert(points.channels() == 2);

    for (int i = 0; i < points.cols; i++) {
        Vec<T,2>& v = points.at<Vec<T,2>>(0,i);

        Point2i p;
        p.x = cvRound(v[0]);
        p.y = cvRound(v[1]);

        circle(image, p, 5, color, 2, 8);
    }
}

// Usage:
drawCircles<float>(frame, Points, Scalar(255, 255, 255)); 
```

# c++ - 当我们计算 Gflop 时，我们需要考虑索引计算吗？

> ID：13898404
> 
> 赞同：-1
> 
> 时间：2012-12-16T03:41:19.173
> 
> 标签：c++, c, counter, flops

例如，在这里计算数学运算：

```
 for (int i = 0; i < 100; ++i)
          {
            for (int j = 0; j < 50; ++j)
            {
              X[i*xcol+j] = Y[i] * Z[j];
             }
           } 
```

我们应该在我们的总 gflops 中计算诸如`++i`, `i*xcol+j`etc 之类的操作（在你指出这里明显的错误之前，让我们暂时忘记 flops 的严格定义）计数还是我们只需要 count `Y[i]*Z[j]`？我问这个的原因是我读了一些论文，他们在这里只把最后一篇算作 gflops/maths ops。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:09:21.820

当您为我执行工作时，我所关心的只是计算我想要的东西。我不在乎计算你的开销。在这种情况下，目标是将每个 Y 乘以每个 Z。所以问题是，你每秒能给我多少次乘法？

我不在乎您是否必须进行许多数组索引计算，或者您是否找到了一些解决方法。例如，假设有一天你做了 20,000 次总算术运算来给我 5,000 次乘法，这花了你一秒钟（对于现代计算机来说太慢了）。对我来说，这是每秒 5,000 次失败。第二天，你想出了一个更好的方法来编写你的代码，你只需要 10,000 次算术运算就可以给我 5,000 次乘法，而且只需要半秒钟。即每秒 10,000 次失败。

显然，我宁愿在半秒内完成我的 5000 次操作。这些是唯一重要的操作。

# python - pyplot twinx() 刻度线重叠

> ID：13898409
> 
> 赞同：3
> 
> 时间：2012-12-16T03:42:38.287
> 
> 标签：python, matplotlib

请原谅我糟糕的 Python 技能，我对这门语言还很陌生！

尽管如此，我对我`twinx()`目前得到的结果感到困惑。我不知道为什么当我双 x 轴时，右侧 y 轴上的刻度似乎加倍。

```
import matplotlib.pyplot as plt

x = linspace(0,2*pi,100)
y = sin(x) + 100*rand(len(x))
z = cos(x) + 100*rand(len(x))
data = []
data.append(y)
data.append(z)

fig = plt.figure(1)
for kk in range(len(data)):
    ax1 = fig.add_subplot(111)
    ax1.plot(x.T, data[kk], 'b.-')

plt.show() 
```

第一个情节显示（在我看来）正确的行为 ![左 Y 轴](../Images/9a5a5a6ac47d8836c75cdd8e53b11d7a.png)

```
fig2 = plt.figure(2)
for kk in range(len(data)):
    ax3 = fig2.add_subplot(111)
    ax4 = ax3.twinx()
    ax4.plot(x.T, data[kk], 'b.-')

plt.show() 
```

而第二个图（我所做的只是翻转轴）似乎具有较差的 y 刻度行为，其中两条“曲线”各有自己的刻度线。 ![右 y 轴](../Images/de357c958aa7796f594fbb975a3c3014.png)

任何关于为什么会发生这种情况的想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:35:32.807

因为那`twinx`是应该做的:)

不过，说真的，重点`twinx`是在同一个图上创建一个独立的 y 轴。默认情况下，它会在绘图右侧显示第二个独立 y 轴的刻度。

这个想法是你可以使用`twinx`（或者`twiny`如果你想要两个独立的 x 轴）来做这样的事情：

```
import matplotlib.pyplot as plt
import numpy as np

fig, ax = plt.subplots()
ax2 = ax.twinx()

x = np.linspace(0, 10, 100)

ax.plot(x, np.sin(x), color='blue')
ax.set_ylabel(ylabel='Y-Value 1', color='blue')
ax.set_xlabel('Same X-values')

ax2.plot(x, x**3, color='green')
ax2.set_ylabel('Y-Value 2', color='green')

plt.show() 
```

![在此处输入图像描述](../Images/6cbf752b34eb3b3bf11f10ec80242f16.png)

如果您只想要两条共享相同轴的曲线，只需将它们绘制在相同的轴上即可。例如：

```
import matplotlib.pyplot as plt
import numpy as np

fig, ax = plt.subplots()

x = np.linspace(0, 10, 100)
ax.plot(x, x, label='$y=x$')
ax.plot(x, 3 * x, label='$y=3x$')
ax.legend(loc='upper left')

ax.set(xlabel='Same X-values', ylabel='Same Y-values')

plt.show() 
```

![在此处输入图像描述](../Images/b3c29d24145b366c692d571546143eac.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:39:19.150

如果您接听电话`twinx()`并`add_subplot()`退出循环，我想您会得到您想要的数字。像这样：

```
fig2 = plt.figure(2)
ax3 = fig2.add_subplot(111)
ax4 = ax3.twinx()
for kk in range(len(data)):
    ax4.plot(x.T, data[kk], 'b.-')

plt.show() 
```

在你的循环结束时，你调用`twinx()`了两次，所以你自然会得到两个孪生轴。由于它们具有不同的比例，因此数字以一种尴尬的方式重叠。

# php - 使用 HTML 表单更新 SQL 数据库

> ID：13898410
> 
> 赞同：0
> 
> 时间：2012-12-16T03:42:51.360
> 
> 标签：php, html, sql

自己修好了，不需要书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:56:18.117

这不是 SQL 在 PHP 中的工作方式。

从阅读有关[使用 PDO 访问数据库](http://php.net/manual/en/book.pdo.php)的内容开始，然后从那里开始。当您阅读了该内容并通过 PHP 执行了一些 SQL 查询后，您的程序无法正常工作，请回到我们这里。

就目前而言，为了让我们帮助修复该代码，我们必须从头开始教您有关 PHP 和数据库的知识，而当文档已经做得很好时，这是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:24:05.050

PHP 和 SQL 是不同的语言。

您正在 PHP 文档中运行 SQL 语句。

这行不通的原因是 PHP 不知道如何连接到数据库。它不知道什么是数据库。PHP 用于处理数据并将其发送到前端。

可以通过 SQL 访问数据库，SQL 是一种专门为此目的而构建的语言。

现在您编写的行是纯 SQL 行，因此 PHP 无法理解或用它做任何事情。

要了解如何在 PHP 中执行 SQL，您必须向 PHP 展示如何访问您的数据库，这是通过一个名为`PHP Data Objects`或`PDO`

[可能在这里](http://php.net/manual/en/book.pdo.php)找到更多信息

# mysql - 我可以使用 MySQL 变量来命名表吗？

> ID：13898412
> 
> 赞同：4
> 
> 时间：2012-12-16T03:43:25.320
> 
> 标签：mysql

我有一个工作流程，要求我保留一堆不同名称的表，例如

```
2012_10_15_ncvoter68
2012_11_15_ncvoter68
2012_12_15_ncvoter68 
```

你明白了。

假设我刚刚创建了 table `2012_12_15_ncvoter68`。

我想使用变量查询此表。例如，我可以定义一个变量：

```
SET @dt_ncv = CONCAT((SELECT DATE_FORMAT(CURDATE(), '%Y_%m_%d')),"_ncvoter68"); 
```

变量`@dt_ncv`计算为字符串`2012_12_15_ncvoter68`。

但我不知道如何（或是否有可能）使用这个变量来引用表。

查询：

```
SELECT count(*) FROM @dt_ncv; 
```

简单地给出一个 SQL 语法错误。

我试过玩准备好的陈述，但这似乎没有帮助。

我希望你们中的一些 MySQL 专家可以提供帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T03:48:26.310

不，你不能那样做。

您必须使用过程语言处理变量替换。

正如手册所说（http://dev.mysql.com/doc/refman/5.1/en/user-variables.html）

> 用户变量旨在提供数据值。它们不能直接在 SQL 语句中用作标识符或标识符的一部分，例如在需要表或数据库名称的上下文中，或用作保留字（如 SELECT）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T04:11:05.620

我查看了我的旧 MySQL 笔记并找到了一种方法：

```
SET @dt_ncv = CONCAT((SELECT DATE_FORMAT(CURDATE(), '%Y_%m_%d')),"_ncvoter68");
SET @cntstmt = CONCAT_WS(" ", "SELECT count(*) FROM",@dt_ncv);
PREPARE ncv_count_stmt FROM @cntstmt;
EXECUTE ncv_count_stmt; 
```

它不漂亮，也不简洁，但它有效！

# javascript - 是否可以根据声音的平均和最大分贝水平自动调整音量？

> ID：13898414
> 
> 赞同：1
> 
> 时间：2012-12-16T03:43:27.273
> 
> 标签：javascript, html, html5-audio

目的是使播放列表中的所有项目具有相同的音量，以便用户不必重新调整每首歌曲。

我正在使用[SoundManager 2](http://www.schillmania.com/projects/soundmanager2/) ，这是我想出的可以使用此功能的网站：[wavecat](http://wave.cat/)

# database - 表关系逻辑

> ID：13898416
> 
> 赞同：2
> 
> 时间：2012-12-16T03:44:11.343
> 
> 标签：database, logic

我有一个逻辑问题，我有两张表，Doctor 和 Specialty，我不知道谁属于谁。医生可以拥有多个专业，但我不知道如何设置它。

一个医生可以有多个专业，所以我的逻辑是一个名为 special 的表应该属于一个表医生。这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:01:34.060

例如，您应该将所有医生放在一张桌子上，`Doctor`并将所有专科放在另一张桌子上`Specialty`。然后你应该有一个链接表，其中包含给定医生的专业列表。

*   医生

    *   医生编号
    *   姓名
    *   学位等，
*   专业

    *   专业编号
    *   姓名等，
*   专科医生

    *   专业编号
    *   医生编号

这将帮助您确定医生的专业或具有专业的医生。

# android - 使用 linkify 创建链接

> ID：13898419
> 
> 赞同：3
> 
> 时间：2012-12-16T03:45:26.697
> 
> 标签：android, design-patterns, linkify

我想用一个简单的 html 字符串创建链接，例如“使用 Google 搜索 stackoverflow”。已尝试使用正则表达式来检测具有以下代码的文本部分，但单词“stackoverflow”未显示为文本视图上的链接

```
String content = "Search <b>stackoverflow<b> with Google";    
TextView tv = (TextView)this.findViewById(R.id.tv);
tv.setText(Html.fromHtml(content));
Pattern pattern = Pattern.compile("<b\b[^>]*>(.*?)</b>");
Linkify.addLinks(tvContent, pattern, "http://www.google.com/search?q=",
            null, myTransformFilter); 
```

对此的任何帮助将不胜感激。非常感谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:53:00.343

您也许可以使用[Html.fromHtml()](http://developer.android.com/reference/android/text/Html.html)来获得您正在寻找的效果。

我认为这样的事情会做到：

```
tv.setText(Html.fromHtml("<a href=\"http://www.google.com/search?q=\">Search content with Google</a>"); 
```

注意：我没有编译这个，不确定我是否得到了正确的转义，但你应该能够理解。

# magento - Magento：如何在结帐页面更改运输方式标题？

> ID：13898420
> 
> 赞同：5
> 
> 时间：2012-12-16T03:45:29.210
> 
> 标签：magento, checkout, shipping

基本上我要做的是在结帐页面上，我正在尝试将 USPS 'First-Class Mail Parcel' 更改为 'First-Class Mail Parcel (3-5 Business Days)'，'Priority Mail' to “优先邮件（2-3 个工作日）”和“特快专递”改为“特快专递（下一个工作日）”。

已经尝试使用以下链接中建议的 translate.csv 解决方案。出于某种原因，它只更改了 UPS 文本，但保持 USPS 不变。

[如何在注册和结帐过程中更改 magento 中的“运输信息”标签](https://stackoverflow.com/questions/8646041/how-to-change-shipping-information-label-in-magento-while-registration-and-che)

还尝试通过管理面板使用内联翻译，但无法正常工作。反正讨厌那个功能。每当您移动鼠标时，这本书就会不断移动，因此很难单击该框。

必须有一种方法来改变这一点......任何帮助将不胜感激。现在已经在谷歌和论坛上搜索了几个小时，以寻找这样一个看似简单的修复方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:46:19.467

要更改**USPS**方法的运输方式标题，只需转到此文件`app\code\core\Mage\Usa\Model\Shipping\Carrier\Usps.php` ，在`getCode()`功能中，您会在此处找到各种**USPS**运输方式的标题，您可以更改标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:14:30.300

请参考以下链接。使用你可以满足你的要求。我也做了。

[http://www.magentocommerce.com/magento-connect/webshopapps-matrixrate-1-multiple-table-rates-extension-certified-bug-free.html](http://www.magentocommerce.com/magento-connect/webshopapps-matrixrate-1-multiple-table-rates-extension-certified-bug-free.html)

从此模块中，您可以上传 CSV 文件以便明智地查看商店。

# sql-server-2008 - 在sql中插入后如何更新字段

> ID：13898422
> 
> 赞同：1
> 
> 时间：2012-12-16T03:45:52.050
> 
> 标签：sql-server-2008

我有一个`Purchaseforms`包含一些字段的表。该表有两个字段`PurchaseId`，一个是身份，`PurchaseNumber`一个是`nvarchar`.

在 Purchaseform 表中插入一行后，它返回`@@IDENTITY`. 我想在插入后立即更新 PurchaseNumber 字段。

例如

如果`PurchaseId`是 1000，`PurchaseNumber`则应更新为`P1000`. 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:46:21.423

插入触发器可用于根据另一个字段更新一个字段。

请注意`PurchaseNumber`，即使在插入行时提供了值，以下代码也将始终覆盖。可以将一个`WHERE`子句添加到`UPDATE`已经具有值的跳过行中`PurchaseNumber`。

```
create trigger PurchaseForms_Insert on PurchaseForms after Insert as
  begin
  set nocount on

  update PF
    set PurchaseNumber = N'P' + cast( i.PurchaseId as NVarChar(10) )
    from PurchaseForms as PF inner join
      inserted as i on i.PurchaseId = PF.PurchaseId
  end 
```

除了触发器：`inserted`和`deleted`是表，因此它们可以表示集合操作的结果。假设触发器总是包含一行，而设计触发器通常是一个糟糕的计划。如果您绝对确定不会超过一行，那么请添加对行数的检查，并用于`RaIsError`明确告知后来出现的人他们试图执行不可接受的语句。( `if ( select Count(*) from inserted ) > 1 RaIsError( 'FooTable_Insert: No more than one row may be processed.', 25, 42 ) with log`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:40:36.053

可以使用更好的计算列

```
CREATE TABLE Purchaseforms
 (
  PurchaseId int IDENTITY,
  PurchaseNumber AS 'P' + CAST(PurchaseId AS nvarchar(10)),
  ... 
  other columns
  ) 
```

# javascript - Javascript：将 24 小时时间字符串转换为 12 小时时间，上午/下午且无时区

> ID：13898423
> 
> 赞同：55
> 
> 时间：2012-12-16T03:46:21.087
> 
> 标签：javascript, time-format

服务器正在以这种格式发送一个字符串：`18:00:00`. 这是一个独立于任何日期的时间值。如何将其转换为`6:00PM`Javascript？我可以将今天的日期作为字符串添加到服务器发送的值中，然后解析组合值，然后尝试使用`.toTimeString()`Date 对象的方法，但是 time 方法发出的格式是 24 小时制时间和秒块。我可以写一个函数，但是有什么内置的吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-12-16T05:54:06.710

没有内置任何东西，我的解决方案如下：

```
function tConvert (time) {
  // Check correct time format and split into components
  time = time.toString ().match (/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/) || [time];

  if (time.length > 1) { // If time format correct
    time = time.slice (1);  // Remove full string match value
    time[5] = +time[0] < 12 ? 'AM' : 'PM'; // Set AM/PM
    time[0] = +time[0] % 12 || 12; // Adjust hours
  }
  return time.join (''); // return adjusted time or original string
}

tConvert ('18:00:00'); 
```

此函数使用正则表达式来验证时间字符串并将其拆分为其组成部分。另请注意，时间中的秒数可以选择省略。如果显示有效时间，则通过添加 AM/PM 指示和调整小时来调整时间。

如果提供了有效时间，则返回值是调整后的时间或原始字符串。

**工作示例**

```
(function() {

  function tConvert(time) {
    // Check correct time format and split into components
    time = time.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/) || [time];

    if (time.length > 1) { // If time format correct
      time = time.slice(1); // Remove full string match value
      time[5] = +time[0] < 12 ? 'AM' : 'PM'; // Set AM/PM
      time[0] = +time[0] % 12 || 12; // Adjust hours
    }
    return time.join(''); // return adjusted time or original string
  }

  var tel = document.getElementById('tests');

  tel.innerHTML = tel.innerHTML.split(/\r*\n|\n\r*|\r/).map(function(v) {
    return v ? v + ' => "' + tConvert(v.trim()) + '"' : v;
  }).join('\n');
})();
```

```
<h3>tConvert tests : </h3>
<pre id="tests">
  18:00:00
  18:00
  00:00
  11:59:01
  12:00:00
  13:01:57
  24:00
  sdfsdf
  12:61:54
</pre>
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-12-16T03:59:25.683

要获得 AM/PM，请检查小时部分是否小于 12，则为 AM，否则为 PM。

要获得时间，请执行`(hour % 12) || 12`.

这应该这样做：

```
var timeString = "18:00:00";
var H = +timeString.substr(0, 2);
var h = H % 12 || 12;
var ampm = (H < 12 || H === 24) ? "AM" : "PM";
timeString = h + timeString.substr(2, 3) + ampm; 
```

[http://jsfiddle.net/Skwt7/4/](http://jsfiddle.net/Skwt7/4/)

这假设上午时间被格式化为，例如，`08:00:00`。如果它们的格式没有前导零，则必须测试第一个冒号的位置：

```
var hourEnd = timeString.indexOf(":");
var H = +timeString.substr(0, hourEnd);
var h = H % 12 || 12;
var ampm = (H < 12 || H === 24) ? "AM" : "PM";
timeString = h + timeString.substr(hourEnd, 3) + ampm; 
```

[http://jsfiddle.net/Skwt7/3/](http://jsfiddle.net/Skwt7/3/)

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2019-01-11T08:34:58.347

**toLocaleTimeString() 使这变得非常简单。**没有必要再自己做这件事了。如果你不使用字符串方法攻击日期，你会更快乐，活得更久。

```
const timeString = '18:00:00'
// Append any date. Use your birthday.
const timeString12hr = new Date('1970-01-01T' + timeString + 'Z')
  .toLocaleTimeString('en-US',
    {timeZone:'UTC',hour12:true,hour:'numeric',minute:'numeric'}
  );
document.getElementById('myTime').innerText = timeString12hr
```

```
<h1 id='myTime'></h1>
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-11-30T21:35:23.673

基于gilly3的回答。

如果你想转换：

```
 08:00 to 08:00 AM 
 16:00 to 04:00 PM 
```

然后这将起作用：

```
function tConv24(time24) {
  var ts = time24;
  var H = +ts.substr(0, 2);
  var h = (H % 12) || 12;
  h = (h < 10)?("0"+h):h;  // leading 0 at the left for 1 digit hours
  var ampm = H < 12 ? " AM" : " PM";
  ts = h + ts.substr(2, 3) + ampm;
  return ts;
}; 
```

[https://jsfiddle.net/fpjs9g0L/](https://jsfiddle.net/fpjs9g0L/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-11-15T13:51:56.063

短 ES6 代码

```
const convertFrom24To12Format = (time24) => {
  const [sHours, minutes] = time24.match(/([0-9]{1,2}):([0-9]{2})/).slice(1);
  const period = +sHours < 12 ? 'AM' : 'PM';
  const hours = +sHours % 12 || 12;

  return `${hours}:${minutes} ${period}`;
} 
```

```
const convertFrom12To24Format = (time12) => {
  const [sHours, minutes, period] = time12.match(/([0-9]{1,2}):([0-9]{2}) (AM|PM)/).slice(1);
  const PM = period === 'PM';
  const hours = (+sHours % 12) + (PM ? 12 : 0);

  return `${('0' + hours).slice(-2)}:${minutes}`;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-12-23T09:57:16.780

**使用momentjs**会更好

 **只是从“下午 2 点”到“14 点”的小对话

```
const number = moment("02:00 PM", ["h:mm A"]).format("HH:mm");
cosole.log(number); 
```

**// "14.00" "14.00" 到 "2 PM"**

```
const number = moment("14.00", ["HH.mm"]).format("hh:mm a");
cosole.log(number); // "02:00 pm" 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-10-11T05:29:12.350

在研究同样的问题时，我遇到了几个复杂、难以理解的解决方案，然后我恍然大悟：有一个非常简单的解决方案，它不依赖于难以阅读的正则表达式或其他复杂的代码。除非我遗漏了一些明显的东西，否则这是一个非常简单、易于理解的解决方案：

```
function timeTo12HrFormat(time)
{   // Take a time in 24 hour format and format it in 12 hour format
    var time_part_array = time.split(":");
    var ampm = 'AM';

    if (time_part_array[0] >= 12) {
        ampm = 'PM';
    }

    if (time_part_array[0] > 12) {
        time_part_array[0] = time_part_array[0] - 12;
    }

    formatted_time = time_part_array[0] + ':' + time_part_array[1] + ':' + time_part_array[2] + ' ' + ampm;

    return formatted_time;
}

var time = timeTo12HrFormat(18:00:00);
console.log(time);  // 6:00:00 PM 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-08-26T13:44:39.377

一个简单的代码将是

```
time = time.split(':');// here the time is like "16:14"
let meridiemTime = time[0] >= 12 && (time[0]-12 || 12) + ':' + time[1] + ' PM' || (Number(time[0]) || 12) + ':' + time[1] + ' AM'; 
```

您可以根据自己的时间格式进行调整

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-04T06:19:14.400

这是我使用 if 语句的方式。

```
const converTime = (time) => {
  let hour = (time.split(':'))[0]
  let min = (time.split(':'))[1]
  let part = hour > 12 ? 'pm' : 'am';

  min = (min+'').length == 1 ? `0${min}` : min;
  hour = hour > 12 ? hour - 12 : hour;
  hour = (hour+'').length == 1 ? `0${hour}` : hour;

  return (`${hour}:${min} ${part}`)
}

console.log(converTime('18:00:00'))
console.log(converTime('6:5:00'))
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-09-28T12:04:00.230

通过使用 Moment 库，我们可以将 24 小时时间格式转换为 12 小时格式。

```
moment('20:00', 'hh:mm').format('hh:mm') 
```

//// 输出：08:00

如果你想转换成 AM 和 PM

```
moment('20:00', 'hh:mm a').format('hh:mm a') 
```

//// 输出：08:00 pm

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-25T12:23:34.140

假设您将以正确的格式获取日期字符串，我有一个解决方案。

```
function parseDateTime(dt) {
        var date = false;
        if (dt) {
            var c_date = new Date(dt);
            var hrs = c_date.getHours();
            var min = c_date.getMinutes();
            if (isNaN(hrs) || isNaN(min) || c_date === "Invalid Date") {
                return null;
            }
            var type = (hrs <= 12) ? " AM" : " PM";
            date = ((+hrs % 12) || hrs) + ":" + min + type;
        }
        return date;
    }

    parseDateTime("2016-11-21 12:39:08");//"12:39 AM"
    parseDateTime("2017-11-21 23:39:08");//"11:39 PM" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-08T17:56:05.890

确保您的时间采用这种格式 HH:MM:SS(PM/AM)

```
function timeConversion(s) {

    s = s.split(':');
    var time = s[2];
    if(time.charAt(2) === 'A' && parseInt(s[0]) == 12) s[0] = '00';
    if(time.charAt(2) === 'P' && parseInt(s[0]) <12) s[0] = parseInt(s[0])+12;
    if(s[0] >=24) s[0]-=24;
    var x = time.split('').slice(0,2);
    s[2] = x.join('');
    console.log(s.join(':'));
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-25T14:05:05.343

以下是一些可行的变体。

```
const oneLiner = (hour = "00", min = "00", sec = "00") => `${(hour % 12) || 12}:${("0" + min).slice(-2)}:${sec} ${(hour < 12) ? 'am' : 'pm'}`
console.log('oneliner', oneLiner(..."13:05:12".split(":")))

const oneLinerWithObjectInput = ({hour = "00", min = "00", sec = "00"} = {}) => `${(hour % 12) || 12}:${("0" + min).slice(-2)}:${sec} ${(hour < 12) ? 'am' : 'pm'}`
console.log('onelinerWithObjectInput', oneLinerWithObjectInput({
   hour: "13:05:12".split(":")[0],
   min: "13:05:12".split(":")[1],
   sec: "13:05:12".split(":")[2]
}))

const multiLineWithObjectInput = ({hour = "00", min = "00", sec = "00"} = {}) => {
   const newHour = (hour % 12) || 12
       , newMin  = ("0" + min).slice(-2)
       , ampm    = (hour < 12) ? 'am' : 'pm'
   return `${newHour}:${newMin}:${sec} ${ampm}`
}
console.log('multiLineWithObjectInput', multiLineWithObjectInput({
   hour: "13:05:12".split(":")[0],
   min: "13:05:12".split(":")[1],
   sec: "13:05:12".split(":")[2]
}))
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-12T09:52:28.103

如果您使用的是 ES6，这可能有助于格式化。
下面的代码片段将忽略秒。如果要考虑秒数，可以将其添加为第一个参数。

```
 const formatFrom24Hrsto12Hrs = (time, ignoreZero = true) => {
      let [hours, minutes] = time.split(':')
      let modifier = +hours < 12 ? 'am' : 'pm'
      hours = +hours % 12 || 12
      minutes = ignoreZero && +minutes === 0 ? '' : `:${minutes}`
      return hours + minutes + modifier
    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-09-17T12:56:35.913

感谢@HBP 在这里铺平道路！

我发现这为解决方案增加了一点灵活性。

RegEx 已更新以适应中午之前的时间。

此解决方案允许您将任何字符串传递给它。只要有效时间（格式为 18:00 || 18:00:00 || 3:00 || 3:00:00）在该字符串中的某个位置，您就可以开始了。

注意：您可以只使用变量`militaryToTweleveHourConverter`或从变量中取出胆量`parseTime`。但是，我正在格式化数据库中的日期，`date-fns`然后将该格式化的日期传递给转换器。

完全有效。希望这可以帮助。

```
import dateFns from 'date-fns';

//* +---------------------------+
//* Format ex. Sat 1/1/18 1:00pm
//* +---------------------------+
const formatMonthDayYearTime = date =>
  militaryToTweleveHourConverter(
    dateFns.format(new Date(date), 'ddd M/DD/YY H:mm')
  );

//* +-------------------------------+
//* Convert MILITARY TIME to 12 hour
//* +-------------------------------+
const militaryToTweleveHourConverter = time => {
  const getTime = time.split(' ');

  const parseTime = getTime.map(res => {
    // Check for correct time format and split into components or return non-time units unaltered
    let timeUnit = res
      .toString()
      .match(/^([\d]|[0-1]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/) || [res];

    console.log('timeUnit', timeUnit);
    // If the time format is matched, it will break the components into an array
    // ie. ["19:00", "19", ":", "00", undefined]
    if (timeUnit.length > 1) {
      // Remove full string match value
      timeUnit = timeUnit.slice(1);
      // Set am/pm and assign it to the last index in the array
      timeUnit[5] = timeUnit[0] < 12 ? 'am' : 'pm';
      // Adjust hours by subtracting 12 from anything greater than 12 and replace the value in the hours index
      timeUnit[0] = timeUnit[0] % 12 || 12;
    }
    // return adjusted time or original string
    return timeUnit.join('');
  });
  // Re-assemble the array pieces into a string
  return parseTime.join(' ');
};

console.log(formatMonthDayYearTime('Sat 9/17/18 18:30'));
// console log returns the following
// Mon 9/17/18 6:30pm

console.log(militaryToTweleveHourConverter('18:30'));
// console log returns the following
// 6:30pm

console.log(militaryToTweleveHourConverter('18:30:09'));
// console log returns the following
// 6:30:09pm

console.log(militaryToTweleveHourConverter('8:30:09'));
// console log returns the following
// 8:30:09am 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-01-11T07:43:02.970

```
function timeformat(date1) {
  var date=new Date(date1);
  var month = date.toLocaleString('en-us', { month: 'long' });
  var mdate  =date.getDate();
  var year  =date.getFullYear();
  var hours = date.getHours();
  var minutes = date.getMinutes();
  var ampm = hours >= 12 ? 'pm' : 'am';
  hours = hours % 12;
  hours = hours ? hours : 12; // the hour '0' should be '12'
  minutes = minutes < 10 ? '0'+minutes : minutes;
  var strTime = mdate+"-"+month+"-"+year+" "+hours + ':' + minutes + ' ' + ampm;
  return strTime;
}
var ampm=timeformat("2019-01-11 12:26:43");
console.log(ampm); 
```

这里使用日期将时间转换为上午或下午的功能，它可能对某人有所帮助。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-12-28T11:53:32.293

```
function Time_Function() {
var date = new Date()
var time =""
var x= "AM"
if(date.getHours() >12){
    x= "PM"
}
time= date.getHours()%12 + x +":"+ date.getMinutes() +":"+ date.getSeconds()
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-03-05T12:43:42.767

```
function timeConversion(s) {
    let hour = parseInt(s.substring(0,2));
    hour = s.indexOf('AM') > - 1 && hour === 12 ? '00' : hour;
    hour = s.indexOf('PM') > - 1 && hour !== 12 ? hour + 12 : hour;
    hour = hour < 10 && hour > 0 ? '0'+hour : hour;

    return hour + s.substring(2,8);
} 
```**

# loops - 使用for循环遍历文件并对文件执行cut命令

> ID：13898424
> 
> 赞同：0
> 
> 时间：2012-12-16T03:46:24.400
> 
> 标签：loops, traversal, cut

I have four to five files of FOTP_YYYYMMDD_001_01.tsv, FOTP_YYYYMMDD_001_02.tsv, FOTP_YYYYMMDD_001_03.tsv, FOTP_YYYYMMDD_001_04.tsv, FOTP_YYYYMMDD_001_05.tsv with other files in directory, now i have to perform cut operation only on FOTP_YYYYMMDD_001_01.tsv to `FOTP_YYYYMMDD_001_05.tsv files . 但使用循环，因为 fotp 计数可能不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:56:42.843

像这样的问题很难帮助你。当您说剪切时-您的意思是删除吗？移动？另外，你是在什么平台上的？Linux？视窗？苹果电脑？

# html - div 标签内的 CSS

> ID：13898425
> 
> 赞同：-3
> 
> 时间：2012-12-16T03:46:27.057
> 
> 标签：html, css, doctype

[我的 CSS 文件的 W3C Css 验证器](http://jigsaw.w3.org/css-validator/validator?uri=http://www.killgorack.com/killgorack.com%25202.0/&profile=css3&usermedium=all&warning=1&vextwarning=)

[这里的 HTML](http://www.killgorack.com/killgorack.com%202.0/)

我的问题是，当我将一些 CSS 放入 DIV 标记中时，当我从 4.0 转到 doctype 4.01 时它会停止工作（过渡）这里的目标当然是让所有的花里胡哨在最新版本的 IE、FF、和铬。我在这里想念什么？

我已经搜索了这个网站，但找不到任何可以帮助的东西..希望它是简单的..

```
<div class="ContentContainer"><div class="text1">Formatting for text1 is NOT working.</div></div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T03:51:01.250

您应该使用 html5 文档类型 ..

```
<!DOCTYPE html> 
```

* * *

您似乎也使用了错误的 html 注释语法..

评论应该像`<!-- Menu here -->`（*[文档](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.4)*）而***不是***像`<! Menu here ===========>`

* * *

**更新**

CSS 区分大小写，因此当您应用它的类时，`text1`它不会匹配名为的 CSS 规则`Text1`

# php - 来自 PHP 的主干 JSON 请求问题

> ID：13898428
> 
> 赞同：4
> 
> 时间：2012-12-16T03:47:00.050
> 
> 标签：php, javascript, json, backbone.js

我在 stackoverflow 上的第一篇文章。我正在开发一个系统，该系统结合了客户端 javascript、backbone.js 和 highcharts.js，以显示来自我家可再生能源系统的实时数据。

它使用一个称为 Arduino 的小型微控制器来处理低级别的传感器数据。控制器有自己的以太网硬件，我将它设置为小型服务器。

在我的客户端程序中，我使用 Backbone 作为 MVC，模型 URL 指向 Arduino 的 IP 以请求 json 数据包。效果很好。

我现在要做的是将该 URL 指针移动到我的托管站点，在那里我有一个小的 php 文件，可以将数据从 SQL 表中提取出来，并以相同的 json 格式呈现。

从我的浏览器中，当我从 Arduino 控制器请求 json 数据包时，它看起来像这样；

```
<head></head><body><pre>{"vT_pv":234.00,"iT_pv":5.90,"iS_pv":0.00,"vB_pv":27.51}</pre></body> 
```

当我将浏览器指向我调用 php 的托管站点时，它看起来像这样；

```
<head></head><body><pre>{"vT_pv":230.70,"iT_pv":4.90,"iS_pv":0.00,"vB_pv":27.56}</pre></body> 
```

编辑：已包含 Alex 要求的完整标题

两者看起来相同，但在我的客户端 javascript 中，只有第一个真正起作用，因为数据已成功放入模型中，然后在屏幕上可见。

两者之间的一个区别是，当我检查页面时，我的 Arduino 返回为 HTTP/1.0，而从我的托管站点返回的 json 数据是 HTTP/1.1

这足以引起这样的问题吗？

以下是该 json 的主干模型；

```
PollerModel = Backbone.Model.extend({
//  url:'//xxx.xxx.xxx.xxx/poller.json',    // this one works
    url: 'http://yyy.yyy.yyy.yyy.host_site/sql_get_live.php',    // this one does not

    startUpdate: function() {
        var that = this;
        startUpdate(that);
        function  startUpdate(isThis) {
            that.fetch({async:false});
            pollerUpdateInterval = setTimeout(function(){startUpdate(that);}, 5000);
        };
    },
}); 
```

如您所见，一旦调用 startUpate 函数，它就会永远每 5 秒调用一次，这就是我想要的。

当我使用指向微控制器的第一个 URL 时，它就像一个魅力。当我使用第二个 URL 时，我可以看到它发出请求并得到回复，但它似乎对数据没有任何作用，它没有放入模型中。

因此，在我的客户端应用程序中，第一个 URL 我在呈现的视图上看到了数据，但在第二个 URL 中看不到。

以下是我在主机站点上的 php 文件；

```
<?php

//  The JSON standard MIME header.
//  header('content-type: application/json; charset=utf-8');

    $con = mysql_connect('host', 'username', 'password');
    if (!$con) {
        die('mysql connect error: ' .mysql_error());
    }

    mysql_select_db("DataBase", $con);

    $sql_Live = "SELECT * FROM live";
    $mysql_record = mysql_query($sql_Live,$con);

    $row = mysql_fetch_array($mysql_record);
    $jsonData = '{"vT_pv":' . $row['vT_pv'] . ',"iT_pv":' . "4.90" . ',"iS_pv":' . $row['iS_pv'] . ',"vB_pv":' . $row['vB_pv'] . '}';
    echo "<pre >";
    echo $jsonData;
    echo "</pre>";
    mysql_close($con);
?> 
```

被注释掉的标头对格式或任何结果都没有影响。我尝试过以各种方式使用 json 编码函数，但都没有成功。事实上，使用 json 编码会产生我认为是非 json 格式的东西，所以也许上面我使用的格式格式不正确？然而它适用于第一个 URL？

我已经搜索过，感觉有点卡在这里，所以我想是时候问我了。

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:03:58.147

我几乎毫不怀疑这是标题的问题。

在 chrome 中 go:view>developer>developer tools>network tab> 然后重新加载并从左侧面板中选择文件，然后查看“headers tab”，它将为您提供发送或接收的每个 http 标头的详细信息，然后您就可以工作了找出两个结果之间的差异。

your php `header("content-type"...)` should work but if not it may be apache overriding your PHP header(); if so change the content type in an `.htaccess` file or delete the `content-type text/html` attribution for .php files in httpd.conf.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T04:58:33.763

在您的 PHP 中，您正在执行以下操作：

```
echo "<pre >";
echo $jsonData;
echo "</pre>"; 
```

`$jsonData`看起来像有效的 JSON，但`<pre>$jsonData</pre>`不是 JSON，它将被包裹在一些 HTML 中的 JSON。您应该能够在`echo $jsonData;`没有`<pre>`包装器的情况下简单地在 JavaScript 中获得合理的结果；我也会包括`Content-Type: application/json`标题。

# jquery - jquery ui sortable：连接和不连接？

> ID：13898432
> 
> 赞同：0
> 
> 时间：2012-12-16T03:48:04.187
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

`sortable`似乎很`connectWith`奇怪。例如，我有一个可排序项目列表（橙色），我**不**希望它们与其他可排序连接列表项目（黄色）连接。

所以我给那些已连接的类添加了一个类名`connected-sortable`，但那些（橙色）未连接的仍然可以放入已连接列表中。

这是为什么？我该如何解决这个问题 - 橙色项目**不应**放入黄色项目中。

这是[jsfiddle](http://jsfiddle.net/Y2RJj/)。

jQuery,

```
 $( ".sortable" ).sortable({
                connectWith: ".connected-sortable",
                cancel: ".not-sortable",
                handle: '.handle',
                update: function(){

                   // php updates  

                }
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:44:28.687

您可以调用 sortable 两次，其中 .sortable 为黄色， .sortable2 为橙色（不要忘记将 .sortable2 li 添加到您的 css 中）。

```
$(function() {
        $( ".sortable" ).sortable({
            connectWith: ".connected-sortable",
            cancel: ".not-sortable",
            handle: '.handle',
            update: function(){

                var path = $(this).closest(".parent-sortable").find('input.path-sort-image').val();
                var order = $(this).sortable("serialize");
                //alert(path);
                //alert(order);

            }
        });
$( ".sortable2" ).sortable({             
            cancel: ".not-sortable",
            handle: '.handle',
            update: function(){

                var path = $(this).closest(".parent-sortable").find('input.path-sort-image').val();
                var order = $(this).sortable("serialize");
                //alert(path);
                //alert(order);

            }
        });
    }); 
```

我还更新了你的[jsfiddle](http://jsfiddle.net/Y2RJj/1/)。我希望这有帮助。

# sql - SQL - 最新行的自联接

> ID：13898438
> 
> 赞同：0
> 
> 时间：2012-12-16T03:49:03.817
> 
> 标签：sql

这是表格：

```
 id -           date               - attempts
    --------------------------------------------
    1  -  2012-12-11 14:52:06.143     - success
    2  -  2012-12-11 15:51:52.320     - whatever
    3  -  2012-12-11 12:51:52.321     - success
    4  -  2012-12-11 12:51:52.312     - whatever 
    5  -  2012-12-11 14:51:52.320     - fail 
```

我正在尝试获取最新的“失败”和最新的“成功”行，然后在两者中查看最新的是否失败（成功行可能晚于失败行）。

我不能只选择最新的行，因为它可能不是“成功”或“失败”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T03:57:45.293

内部查询将识别尝试成功或失败的最近日期的记录，外部查询结合内部查询的结果来识别失败记录。

```
SELECT
    a.*
FROM
    myTable a
    JOIN
    (
        SELECT MAX(date) AS `date` FROM myTable
        WHERE attempts IN ('success', 'fail')
    ) b
    ON a.date = b.date
WHERE
    a.attempts = 'fail' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:05:44.880

```
 Select s.id successId, s.date latestSuccess, 
         f.id failId, f.date latestFail, 
         case When s.date > f.Date 
              Then 'Success' Else 'Fail' End Last
  From myTable s full join mytable f
     On s.attempts = 'success'
        And s.date - (Select Max(date) From myTable
                    Where attempts = 'success')
        And f.attempts = 'fail'
        And f.date - (Select Max(date) From myTable
                      Where attempts = 'fail') 
```

# networking - 为什么有探测响应时需要 Beacon

> ID：13898440
> 
> 赞同：6
> 
> 时间：2012-12-16T03:49:40.093
> 
> 标签：networking, wireless, wifi

我试图了解 802.11 网络中信标和探测响应的使用。如果宣传 AP 的存在只是目标，那么为什么需要信标帧？站点漫游时被动扫描可能很重要，但它是信标帧的唯一用途吗？请说明此帧在典型 802.11 网络中的其他用途。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:30:50.627

当电台处于漫游状态时，被动扫描并不重要**。**相反，漫游决定是根据扫描结果（被动和主动）做出的。信标的主要原因：

*   保持网络列表更新以进行漫游
*   信标向连接的 802.11 站指示 AP 处于活动状态
*   802.11 站可以使用信标来促进基于信标数据和间隔的节能机制
*   信标包含等待发送到该站的缓冲数据的附加站的指示

# php - 使用 PHP 和 PDO 从 MySQL 检索 MEDIUMBLOB 失败

> ID：13898445
> 
> 赞同：2
> 
> 时间：2012-12-16T03:50:49.610
> 
> 标签：php, mysql, image, pdo, blob

我将图像数据存储在图像表的 MEDIUMBLOB 列中，如下所示：

```
CREATE TABLE IF NOT EXISTS `images` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `description` varchar(160) DEFAULT NULL,
  `image` mediumblob,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

我有`images.php`一个接收要显示的图像的脚本`id`，调用一个应该接收图像`id`参数的 API（以及与此问题无关的其他内容）并将二进制字符串从`image`列返回到`images.php`应该显示它的脚本。

这是 API（实际上是一个 imageController）的一部分，它从 db 中获取图像数据，将其加载到我的`Image`类中，该类根据前几个字节签名确定图像类型并返回对应的 mime 类型。

```
 $pdo = Database::getPDO($db);
        $select_image_statement = $pdo->prepare(
            "SELECT image FROM images WHERE id = :id"
        );
        $select_image_statement->bindParam(":id", $image_id);
        $select_image_statement->execute();

        $select_image_statement->bindColumn(1, $img, PDO::PARAM_LOB);

        $select_image_statement->fetch(PDO::FETCH_BOUND);

        $image = new Image();
        $image->load($img);

        $return = array(
            'image' => $img,
            'mime_type' => $image->getMimeType()
        );

        return $return; 
```

问题虽然是`$img`绑定变量`˙Ř˙ŕ`在我使用输出它时总是包含序列`error_log($img)`，当我`echo`从我的`image.php`脚本（没有`header()`）我得到空白页时，也`empty()`返回 1 所以我猜这个`˙Ř˙ŕ`序列只是一些奇怪的（至少对我而言）error_log 行为当给定空输入字符串时。

从 API返回`empty($img)`或直接返回到`isset($img)`并在那里输出都可以始终如一地工作，因此在传输图像数据时可能不会出现一些错误。`count($img)``image.php`

我正在获取没有其他问题或错误的行（其他列按预期工作）。

此外，当我单击 phpMyAdmin 中的 BLOB 列时，它显示存储的图像没有问题或错误，因此图像被正确存储，唯一的问题可能是从数据库中检索它时。我还检查了 MySQL 配置中的最大允许数据包，它设置为 16,777,216，这应该足够了，因为我的图像最大大小为 5 MB（我要检索的那些是 ~100 kB）

我花了大约 6 个小时试图修复它并浏览类似的问题，阅读我使用的每个 PDO 方法的 PHP 文档和用户评论，我尝试了所有建议的限制列的方法，不同的获取选项等等，但没有一个解决了我的问题。我尝试这样做[http://php.net/manual/en/pdo.lobs.php#96311](http://php.net/manual/en/pdo.lobs.php#96311)和“官方”方式[http://php.net/manual/en/pdo.lobs.php](http://php.net/manual/en/pdo.lobs.php)（使用流) 但在我的情况下两者都不起作用，并且在这两种情况下`$img`都是空的。我也尝试过这样的连接，正如在类似问题中所建议的那样

```
$dbh = new PDO("mysql:host={$db['host']};dbname={$db['name']}", $db['user'], $db['password'], array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")); 
```

并且没有`SET NAMES`命令，两者都对我的问题无能为力。

我很绝望，我不知道该怎么办了，现在已经很晚了，所以我现在要睡觉了，我真诚地希望我能梦想一个解决方案，或者至少你们中的一些人会知道出了什么问题并写下为我准备或分享一个有用的链接:)

PS 我知道将图像存储在 db 中并不是一个好主意，但我决定这样做，因为我对这个项目的截止日期很紧，而且我对以文件系统的方式做这件事还不够了解，并认为我使用 db 方法将节省一些时间。我当然没有节省任何时间:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T16:30:12.760

LOB 的 PDO 处理似乎存在错误：[https](https://bugs.php.net/bug.php?id=40913) ://bugs.php.net/bug.php?id=40913 。在撰写本文时，该错误仍未解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T03:08:02.703

我对您的建议有类似的问题，请执行以下操作：

第一次尝试：当您将图像保存在数据库中以使用**base64_encode**将其转换为十六进制时。要在生成图像之前使用**base64_decode进行相反的显示。**

如果失败，您可以尝试以下操作： 打开文件。[Notepad++](http://en.wikipedia.org/wiki/Notepad++)中的“PHP” ，转到**Format -> convertes to UTF-8 (without BOM)**

出于某种原因，使用 UTF-8（带有 BOM）格式化文件会生成无效字符。

# ruby-on-rails-3 - 将字段从一个模型导入另一个模型

> ID：13898447
> 
> 赞同：0
> 
> 时间：2012-12-16T03:51:26.310
> 
> 标签：ruby-on-rails-3, console, export

我正在控制台中将几个模型（想法、问题等）整合到一个主题模型中，我认为这样的事情可能会起作用：

```
Question.find_each do |q|
  t = Topic.new
  t.create(:title=q.title, :description=q.description, :kind=”Question”)
end 
```

但我收到一个错误：

```
 SyntaxError: (irb):24: syntax error, unexpected tIDENTIFIER, expecting ')'
 t.create(:title=q.title,:description=q.description,:kind='question') 
```

想知道是否有人尝试过在这样的模型之间传输数据，以及是否有“正确”的方法来做到这一点。

[编辑] 这有效：

```
Question.find_each do |q|  
@qt=q.title  
@qd=q.description  
@q=‘Question’  
@ca=q.created_at  
@ui=q.user.id  
@uvt=q.user_votes_total  
Topic.create!({:title => @qt, :description => [@qd], :kind => @q, :created_at=>@ca, :user_id=>@ui, :user_votes_total=>@uvt })  
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:07:31.357

替换`=`为`=>`

```
t.create(:title => q.title, :description => q.description, :kind => 'Question') 
```

# php - JQuery Mobile / PHP登录/刷新问题

> ID：13898448
> 
> 赞同：0
> 
> 时间：2012-12-16T03:51:39.470
> 
> 标签：php, jquery-ui, jquery, jquery-mobile

我有一个标准的 Jquery 移动页面要启动，并且我添加了一些登录元素（用户通行证）。提交表单调用自身，发布，如果页面看到一个帖子，它会检查 mysql / hash 等标准。它找到匹配项，设置会话数据，然后将标题设置为帐户页面，加载正常。

我遇到的问题是，在我重新加载页面之前，事件不起作用。这是我第一次尝试登录和 jquery mobile。一旦我刷新一切都在正常工作，但这很烦人。我必须在这里遗漏一些简单的东西，有什么建议吗？

除非我重新加载页面，否则不会识别任何 a href="#etc" 调用。

我环顾了一些问题，但找不到完全匹配的问题。抱歉打扰。我很高兴被指出正确的方向。如果有帮助，我可以发布一些特定的代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:53:39.010

用这个;

```
$(document).on('pageinit', '#secondpage', function() {
  console.log('test');
}); 
```

您可以在此答案中找到详细信息；

[JQuery $(document).ready(function () 不工作](https://stackoverflow.com/questions/14379082/jquery-document-readyfunction-not-working)

# objective-c - 如何缩放屏幕图像以在 Facebook 墙上发布？

> ID：13898453
> 
> 赞同：0
> 
> 时间：2012-12-16T03:52:37.197
> 
> 标签：objective-c, ios, facebook, uiimage, scale

我正在开发一个 iPhone 应用程序，该应用程序的一个功能是将 iPhone 屏幕的图像发布到用户的 Facebook 墙上，但我无法正确调整和缩放图像的大小。当应用程序发布到 Twitter 时没有问题，但当它发布到 Facebook 时，我最终得到的只是更大图像的一小部分。我想要的只是屏幕图像的缩小版本。

这是我正在使用（或尝试使用）的代码：

这将创建图像。

```
-(UIImage *)createImage
{
CGRect newRect = CGRectMake(0, 0, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height-44);
UIGraphicsBeginImageContext(newRect.size); //([self.view frame].size])
[[self.view layer] renderInContext:UIGraphicsGetCurrentContext()];
UIImage *myImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIGraphicsBeginImageContext([self.view bounds].size);
[myImage drawInRect:CGRectMake(0, 0, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height-44)];
myImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return myImage;
} 
```

而这目前无法扩展它：

```
- (UIImage*) scaleImage:(UIImage*)image
{
int widthToUse = [[UIScreen mainScreen] bounds].size.width;
int heightToUse = [[UIScreen mainScreen] bounds].size.height;
CGSize scaledSize;
scaledSize.height = 350;  //I used 350 because it seemed to be the maximum size of a Facebook wall photo.
scaledSize.width = ((350*widthToUse)/heightToUse);
UIGraphicsBeginImageContextWithOptions( scaledSize, NO, 0.0 );
CGRect scaledImageRect = CGRectMake(0.0, 0.0, scaledSize.width, scaledSize.height);
[image drawInRect:scaledImageRect];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return newImage;
} 
```

这是我使用它的方式：

```
 [controller setInitialText:msgText];
    [controller addURL:[NSURL URLWithString:@"http://www.myURL.com"]];
    UIImage *img = [self createImage];
    UIImage *pic;
    if (self.serviceType==SLServiceTypeFacebook)
    {
        pic = [self scaleImage:img];
    }
    else if (self.serviceType==SLServiceTypeTwitter)
    {
        pic = img;
    }
    [controller addImage:pic];
    [self presentViewController:controller animated:YES completion:Nil]; 
```

关于如何解决这个问题的任何想法？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:23:13.753

你用 UIImage 的方法试过了吗

```
 UIImage *scaledImage = 
            [UIImage imageWithCGImage:[originalImage CGImage] 
                                scale:2.0 
                          orientation:UIImageOrientationUp]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:59:28.703

好吧，我更改了`UIGraphicsBeginImageContextWithOptions`方法中的最后一个数字`scaleImage`（从 0.0 到 0.975），它似乎成功了。奇怪的是，虽然 0.975 很好，但 0.98（和更高的数字）复制了原始问题。

```
- (UIImage*) scaleImage:(UIImage*)image
{
int widthToUse = [[UIScreen mainScreen] bounds].size.width;
int heightToUse = [[UIScreen mainScreen] bounds].size.height;
CGSize scaledSize;
scaledSize.height = 350;
scaledSize.width = ((350*widthToUse)/heightToUse);
UIGraphicsBeginImageContextWithOptions( scaledSize, NO, 0.975 );
CGRect scaledImageRect = CGRectMake(0.0, 0.0, scaledSize.width, scaledSize.height);
[image drawInRect:scaledImageRect];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return newImage;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T23:46:58.430

您是否有机会尝试使用：`UIGraphicsBeginImageContext`或 1.0 in 的比例因子`UIGraphicsBeginImageContextWithOptions`？

在您的原始版本中，它使用的是您设备的主屏幕比例因子。因此，如果您在视网膜显示器上运行，而不是 350，您得到的图像实际上是 700 高。

# list - 通过使用while循环生成列表进行水平分析

> ID：13898461
> 
> 赞同：0
> 
> 时间：2012-12-16T03:54:33.077
> 
> 标签：list, python-2.7, while-loop

给定以下列表：

[[0.074, 0.073, 0.072, 0.03, 0.029, 0.024, 0.021, 0.02], [0.02, 0.02, 0.015], [0.026, 0.026, 0.02, 0.02, 0.02, 0.015], [0.021, 0.02] 17, 0.021, 0.0 , [0.077, 0.076, 0.074, 0.055, 0.045, 0.021], [0.053, 0.052, 0.051, 0.023, 0.022], [0.016, 0.016]]

我如何循环浏览列表并从每个子列表中提取 #1，从每个子列表中提取 #2，从每个子列表中提取 #3 并生成单独的列表。

例如，在这种情况下，#1 应包括 0.074、0.02、0.026、0.021、0.077、0.063 和 0.016。他们将在一个单独的独立列表中。

我使用了while循环，但它对我不起作用：

```
a=0
b=len(data['stock'])

while a<=b - 1:
    print data['stock'][a][0]
            a = a + 1
    print "\n"

while a<=b - 1:
    print data['stock'][a][1]
        a = a + 1
print "\n"

while a<=b - 1:
    print data['stock'][a][2]
        a = a + 1
print "\n"

while a<=b - 1:
    print data['stock'][a][3]
        a = a + 1
print "\n"

while a<=b - 1:
    print data['stock'][a][4]
        a = a + 1
print "\n"

while a<=b - 1:
    print data['stock'][a][5]
        a = a + 1
print "\n"

while a<=b - 1:
    print data['stock'][a][6]
        a = a + 1
print "\n" 
```

有多少我解决了这个问题并根据上述逻辑创建了列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:57:23.003

你可以使用`itemgetter`：

```
>>> from operator import itemgetter
>>> map(itemgetter(0), data)
[0.074, 0.02, 0.026, 0.021, 0.077, 0.053, 0.016]
>>> map(itemgetter(1), data)
[0.073, 0.02, 0.026, 0.021, 0.076, 0.052, 0.016] 
```

您还可以使用列表推导（可能更具可读性）：

```
>>> [l[0] for l in data]
[0.074, 0.02, 0.026, 0.021, 0.077, 0.053, 0.016] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T04:05:50.000

转置列表的一种方法是使用`zip`：

```
>>> data = [[1,2,3],[4,5,6]]
>>> zip(*data)
[(1, 4), (2, 5), (3, 6)] 
```

要解决数据形状不一致的问题，您可以使用`izip_longest`：

```
>>> data = [[0.074, 0.073, 0.072, 0.03, 0.029, 0.024, 0.021, 0.02], [0.02, 0.02, 0.015], [0.026, 0.026, 0.02, 0.02, 0.02, 0.015], [0.021, 0.021, 0.02, 0.017], [0.077, 0.076, 0.074, 0.055, 0.045, 0.021], [0.053, 0.052, 0.051, 0.023, 0.022], [0.016, 0.016]]
>>> from itertools import izip_longest
>>> izip_longest(*data)
<itertools.izip_longest object at 0x101d77c00>
>>> list(izip_longest(*data))
[(0.074, 0.02, 0.026, 0.021, 0.077, 0.053, 0.016), (0.073, 0.02, 0.026, 0.021, 0.076, 0.052, 0.016), (0.072, 0.015, 0.02, 0.02, 0.074, 0.051, None), (0.03, None, 0.02, 0.017, 0.055, 0.023, None), (0.029, None, 0.02, None, 0.045, 0.022, None), (0.024, None, 0.015, None, 0.021, None, None), (0.021, None, None, None, None, None, None), (0.02, None, None, None, None, None, None)] 
```

因此：

```
>>> columns = list(izip_longest(*data))
>>> columns[0]
(0.074, 0.02, 0.026, 0.021, 0.077, 0.053, 0.016)
>>> columns[1]
(0.073, 0.02, 0.026, 0.021, 0.076, 0.052, 0.016)
>>> columns[2]
(0.072, 0.015, 0.02, 0.02, 0.074, 0.051, None) 
```

我不确定你想为“#3”做什么——你的最后一个子列表只有两个元素。 `izip_longest`有一个`fillvalue`选项可以用来指定要做什么，默认为`None`（这就是为什么最后一个条目`columns[2]`是`None`）。

# c# - 替换字符串中的开头和结尾但不相同的字符

> ID：13898462
> 
> 赞同：0
> 
> 时间：2012-12-16T03:55:06.023
> 
> 标签：c#, regex, replace, contains

```
lines = "some stuff\"some other \"stuff\"\"";
lines = lines.Replace("\"", "\"");
lines = lines.Replace("\"", "\""); 
```

在当前的上下文和最简单的形式中，这两个操作似乎毫无意义，但是当我将其放入代码中时，它并非毫无意义，并且除了用自身替换自身之外，还有其他目的。

好的，所以我有具有 4 个转义引号的字符串行，我希望用引号替换第一个引号，用引号替换结束引号我将如何在不替换任何内部引号的情况下完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:05:52.450

使用 IndexOf 和 LastIndexOf 查找第一个和最后一个引号。然后使用 Substring 替换引号：

```
lines = "some stuff\"some other \"stuff\"\"";
firstQuote = lines.IndexOf("\"");
lastQuote = lines.LastIndexOf("\"");
lines = lines.Substring(0, firstQuote) + "\"" + lines.Substring(firstQuote + 1, lastQuote) + "\"" + lines.Substring(lastQuote + 1, lines.Length); 
```

# c++ - 如何防止过度打字

> ID：13898464
> 
> 赞同：3
> 
> 时间：2012-12-16T03:55:51.810
> 
> 标签：c++

我正在尝试用 C++ 制作一个简单的聊天应用程序。它有效，但是，如果有人在别人打字的时候输入了一些东西。它就像写他们正在输入的内容。我将图片链接为下面的示例。

我用于客户端和服务器的代码可以在这里找到：

[客户](https://github.com/topkiller/networking/blob/master/Client.cpp)

[服务器](https://github.com/topkiller/networking/blob/master/Server.cpp)

图片：

之前 ![在此处输入图像描述](../Images/8ca09ed942e99b4566ee96adc7c8f2a9.png) 之后 ![在此处输入图像描述](../Images/cf816fbc4ddba47416211429e3166c46.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T09:04:02.793

一种方法是在用户第一次开始输入一行文本时设置一个标志——然后，如果您在设置该标志时从网络接收数据，只需将接收到的数据排队到某个本地数据结构中（即不要打印它）直到本地用户按下返回。当本地用户按下回车键时，您将打印出在他键入时排队的所有数据，并取消设置标志。

当然，这种方法有几个缺点：

*   如果本地用户输入了一些文本并且从不按回车键，他将永远看不到任何传入的远程文本。这可能是一个问题，例如，如果用户按下空间并走开。
*   C/C++ 中的 cin/stdin 功能通常以每行为基础工作，您需要将终端设置为原始/非规范模式，以使其在本地用户仅输入一个字符时进行报告（而不是缓冲字符直到本地用户按下回车键，然后立即将整行文本报告给您的程序）

另一种方法是将本地用户的文本和远程用户的文本保存在物理上分开的区域（例如，窗口的上半部分和下半部分，就像许多聊天程序一样）。要做到这一点，需要比 vanilla C/C++ stdin/stdout/cin/cout API 提供更多的控制；您需要使用两个单独的文本小部件创建一个 GUI 窗口（使用 Win32 或 Qt 或其他一些 GUI API），或者如果您想将所有内容保存在 MS-DOS 窗口中，您可以使用类似[PDCurses](http://pdcurses.sourceforge.net)的东西来实现那。

但是，这些选项中的任何一个都不是微不足道的——与您的聊天应用程序的其余部分相比，它们可能需要更多的时间和精力来实现。如果是我，而聊天应用程序只是一个学习练习，我会倾向于简单地将当前行为记录为“已知限制”，而不用担心修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:41:56.217

杰里米的帖子非常彻底。我将添加另一个可供您使用的选项：跟踪正在键入的用户输入的字符，直到他最终按下 ENTER。这样，当远程用户输入文本时，您所要做的就是：

向终端写入适当数量的退格字符（'\b'）（即与本地用户输入的文本长度一样多），然后输出新传入的文本行，然后将所有字符输出到本地用户之前输入过。然后照常继续。

它看起来好像新传入的文本“滑动”到位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T04:05:51.903

```
#include <Conio.h>
#include <mutex> // C++11, if not C++11 find your own mutex

std::vector<char> inputBuffer;
std::mutex inputGuard;
struct Locker {
  std::mutex* m;
  Locker(std::mutex& m_):m(&m_) { m->lock(); }
  void release() { if (m) m->unlock(); m = 0; }
  ~Locker() { release(); }
}
void AddToInputBuffer( char c ) {
  Locker lock(inputGuard);
  inputBuffer.push_back(c);
  printf("%c",c);
}
std::string FinishInputBuffer() {
  Locker lock(inputGuard);
  std::string retval( inputBuffer.begin(), inputBuffer.end() );
  inputBuffer.clear();
  printf("\n");
  return retval;
}
void OverlappedPrintln( std::string s ) {
  Locker lock(inputGuard);
  for (int i = 0; i < inputBuffer.size(); ++i) {
    printf("%c", 8 /*backspace*/);
  }
  printf("%s\n", s.c_str());
  for (int i = 0; i < inputBuffer.size(); ++i) {
    printf("%c", inputBuffer[i]);
  }
}

std::string readCharactersFromUser() {
  // TODO: Handle exiting
  while( int input = getch() ) {
    if (input == '\n') {
      return FinishInputBuffer();
    AddToInputBuffer(input);
  }
} 
```

Now, replace `cin.getline(message, 256);` with `std::string message = readCharactersFromuser()`, then check the length of the `string` before doing `(message[0] == 's' && message[1] == 'a' && message[2] == 'y' && message[3] == ' '` that.

Elsewhere in the program, where you do `printf`, instead build a `std::string` and call `OverlappedPrintln` with it.

The effect of this is that when you want to print something out, you lock a mutex, backspace over the user input, print out the message, do a newline, then print out the text you backspaced over, and release your mutex. The mutex isn't needed in 99% of situations, especially with modern computer speed, but it is good practice.

The above code was not tested or compiled. Nor is it of the highest quality.

The choice of non-echoing get character was because I cannot read from user input in a lock, and asynchronously echoing to the output might cause garbled text. So I read without echo, then echo within the mutex, such that `inputBuffer` always contains the characters that the user has both typed and I've echoed to the screen.

This is an implementation of @NikBougalis 's answer.

# c++ - 非阻塞套接字上的 read() 没有选择的低延迟

> ID：13898466
> 
> 赞同：3
> 
> 时间：2012-12-16T03:56:05.320
> 
> 标签：c++, sockets, nonblocking

我有一个从非阻塞套接字读取的单独线程，我可以根据需要使用尽可能多的 CPU，因为低延迟是项目最重要的方面。简单地循环 read() 调用会比首先使用 select() 来查找可读的套接字更快吗？

伪代码：

```
while (!finished) {

    int rc = read(socket, buf);
    if (rc > 0) {
        // process buf
    } else if (rc == 0) {
        // eof, reconnect to server
    } else if (errno == EGAIN) {
        // nothing to do, continue
    } else if (errno == ECONNREFUSED) {
        // connection refused, attempt connect again
    } else {
        // error not yet supported
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:34:38.057

不，它不会更快，因为您不知道数据何时到达。所以，要么你睡太久，这不是更快，要么你睡得太短，在这种情况下，你必须重新做一遍，这不是更快，或者你会很幸运，睡得正好正确的时间，这不是更快，需要运气，否则你根本不会睡觉，这意味着你必须烧 CPU 直到数据到达，这也不是更快。

# python - import argparse 失败，一些设置/路径问题？

> ID：13898468
> 
> 赞同：1
> 
> 时间：2012-12-16T03:56:40.763
> 
> 标签：python, macos, netbeans, argparse

我已经尽可能地使用 argparse 编写了一个最小的 python 程序。就三行。

```
import argparse
if __name__ == "__main__":
    print "Hello World" 
```

它得到以下错误：

> 文件“/Users/pfarrell/sandbox/dbms/extractor/src/extractor.py”，第 2 行，在 import argparse ImportError: No module named argparse

这是我编写的第一个 python 程序，所以我很容易相信我没有正确设置一些 python 库路径等。

这是在 OS-X 上运行的

```
python --version  
Python 2.7.1  
pfarrell@way:~/sandbox/dbms/extractor/src$ python -c "import argparse; print argparse"  
<module 'argparse' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.pyc'> 
```

更多测试（感谢评论）

在 shell 中显式运行它可以工作，但在 netbeans 中运行它失败：

### 仅外壳

```
python extractor.py -h  
Hello World  
usage: extractor.py [-h]  

optional arguments:  
  -h, --help  show this help message and exit 
```

作为脚本运行它会显示完全不同的路径。看起来 netbeans 设置需要一两次调整

```
./extractor.py  -h  
/Users/pfarrell/sandbox/dbms/extractor/src  
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip  
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7  
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin  
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac  
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib- scriptpackages  
/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python    
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk  
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old  
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload  
/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC  
/Library/Python/2.7/site-packages  
Hello World 
```

### 在netbeans内部执行

```
/Users/pfarrell/sandbox/dbms/extractor/src  
/Users/pfarrell/Library/Application Support/NetBeans/7.2.1/jython-2.5.1/Lib  
/Users/pfarrell/Library/Application Support/NetBeans/7.2.1/jython-2.5.1/Lib/site-packages  
/Users/pfarrell/sandbox/dbms/extractor/src  
__classpath__  
__pyclasspath__/  
Hello World 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:33:47.637

谢谢大家。正如@sberry 建议的那样，这条路径有很多问题。我发现 netbeans 默认使用 jpython，这是一个较旧的 2.5 版本。它还可以使用标准的python 2.7.1，当我使用它时，一切都是快乐和快乐

谢谢一堆。

# objective-c - NSUndoManager 会撤消后台发生的更改吗？

> ID：13898472
> 
> 赞同：4
> 
> 时间：2012-12-16T03:57:28.503
> 
> 标签：objective-c, ios, cocoa-touch, core-data, nsundomanager

我有一个编辑视图控制器，我正在使用一个 NSUndoManager，它是我的持久性存储（核心数据项目）的集合。

我的应用程序的功能之一是与外部服务器同步。我想知道的是，如果我在视图中编辑某些内容，同时应用程序正在与服务器同步，如果我改变主意并决定撤消当前编辑中的任何更改，它是否也会撤消如果在撤消分组开始时进行了同步期间所做的所有更改，还是只会撤消我自己所做的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T13:38:57.103

取决于您的实施。通常，撤消管理器会为您的事件打开一个撤消组并封装更改，请参阅 groupsByEvent。如果您使用辅助托管对象上下文进行后台同步并将上下文合并回主上下文，则必须确保禁用撤消注册，请参阅 disableUndoRegistration。

编辑：这是一个小代码片段，您可以在单独的上下文中同步而无需创建撤消操作

```
// create a child context with no undo manager
NSManagedObjectContext *context = [NSManagedObjectContext contextWithParent:self.managedObjectContext];
context.undoManager = nil;

[... do your synchronization with the child context...]

// merge into main context without generating undo actions
[undoManager disableUndoRegistration];
[context save:&error];
[managedObjectContext processPendingChanges];
[undoManager enableUndoRegistration];

// to prevent undo action beyond the synchronization to remove all undo actions
[undoManager removeAllActions]; 
```

# java-me - 遍历 j2me 文件夹内的资源

> ID：13898475
> 
> 赞同：-1
> 
> 时间：2012-12-16T03:57:56.440
> 
> 标签：java-me, resources, iteration

如何遍历 jar 内文件夹中的资源？

我想做 Image.createImage(name) 很多次，所以我只需要名称列表。我需要使用 (FileConnection)Connector.open 吗？如果没有 root 访问权限，我就无法做到这一点，没有这个，我怎么知道我的应用程序在终端机器中的路径？

该解决方案提出了 ClassLoader，它不在 j2me 中，并且不再被回答： [(J2ME) How to get list of files/resources inside my jar app](https://stackoverflow.com/questions/8251669/j2me-how-to-get-list-of-files-resources-inside-my-jar-app)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:33:27.637

嗯，我不明白巴维克的意思。我找到了一种解决方法，使用 png 图像的名称创建一个 txt 文件。不过，我仍然不知道如何遍历 jar 中的 res 文件夹：

```
 InputStream is = getClass().getResourceAsStream("/Aves/dir.txt");
  int ch, isp=0;
  String l = "";
  do {
    ch = is.read();
    if ((ch != 13) && (ch != 10)) {
      l+=(char)ch;
    } else {
      if (ch == 13) {
        Image Img1 = Image.createImage("/Aves/"+l);
        sppW[isp] = Img1.getWidth();
        sppH[isp] = Img1.getHeight();
        Img1.getRGB(sppImg[isp], 0, Img1.getWidth(), 0, 0, Img1.getWidth(), Img1.getHeight());
        isp++;
        l = "";
      }
    }
  } while (ch != -1); 
```

# php - 用于确定 mpeg-4 文件编解码器的 php 代码

> ID：13898476
> 
> 赞同：0
> 
> 时间：2012-12-16T03:58:41.867
> 
> 标签：php, h.264, codec

我需要对 .mp4 文件进行检查，以检查它们是否有 h.264 编解码器来创建 php 条件，或者至少只是打印编解码器。是否有一些相当简单的代码可以在 html 文件中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T05:40:17.727

使用：

*   [https://code.google.com/p/php-mp4info/](https://code.google.com/p/php-mp4info/)

这是他们的示例测试文件：

```
include "MP4Info.php";

print '<h1>MP4Info test script</h1>';
print '<p><small>'.__FILE__.' $Id: test.php 2 2009-06-11 14:12:31Z lacroix.tommy@gmail.com $</small></p>';
print '<hr />';

$dir = './TestFiles/';
$de = opendir($dir);
if ($de) {
    while (($file = readdir($de)) !== false) {
        $path = $dir.$file;
        if ((!is_file($path)) || (!is_readable($path)) || (strtolower(pathinfo($path,PATHINFO_EXTENSION) != 'f4v'))) continue;

        print '<h2>'.$file.'</h2>';
        print "<pre>";
        try {
            print_r(MP4Info::getInfo($path));
        } catch (MP4Info_Exception $e) {
            print 'Caught MP4Info_Exception with message '.$e->getMessage();
            throw ($e);
        } catch (Exception $e) {
            print 'Cauth Exception with message '.$e->getMessage();
            throw ($e);
        }
        print "</pre>";
        print '<hr/>';
    }
} else {
    print '<strong>Could not open directory "'.$dir.'".';
} 
```

它确实支持找出视频是否具有 h.264 编码。

# excel - Excel 中的 VBA 条件复制和粘贴；大数据解决方案

> ID：13898478
> 
> 赞同：0
> 
> 时间：2012-12-16T03:59:01.163
> 
> 标签：excel, finance, vba

我有一个巨大的数据转储，我们每个月都会进行大约 14,000 行数据，大约 12 列宽（每个月的条目）。在所有数据的左侧，我添加了一个列，该列使用 LEFT() 函数来获取一个属性代码，该代码标识该行对应的属性（每个属性大约 150 行，大约 100 个属性，因此 15,000 行）。

我们对每个属性都有一个工作表。我们每个月都会使用此数据转储对其进行更新，然后将其发送给经理，以便他们可以根据我们刚刚添加的数据月份对今年剩余时间进行预测。

我一直在努力寻找一种解决方案来创建比我的前任更高效的模型。他在每张涉及这个巨大数据转储的工作表上进行了 v-lookups 和索引。您可以猜到，该文件的运行速度很慢。

我想到的解决方案可能是一个宏，它从该主表复制并粘贴每个属性的数据行，并将其粘贴到各个工作表上（然后删除那里的数据以节省文件空间）。

这样，v-lookups 将是每个工作表的本地文件，并且文件可能运行得更顺畅（除了运行宏的第一个序列，这可能会占用一些压缩空间）。

我希望对此有所了解，如果解决方案是有效的解决方案，也许会提出有关编码以实现此目的的建议。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:41:51.973

我发现加快工作簿速度的一件事是旋转我的数据，然后查询数据透视表，而不是使用 vlookups。

在您的情况下，您可以使用属性 ID/Name 为行标签创建一个数据透视，为列标签创建月份，然后在数据部分中使用您的数据。

那么您的公式将如下所示：

```
=GETPIVOTDATA("value",Sheet1!$B$4,"Property","propertyName","Month","monthName") 
```

在 60k 行上使用大量 vlookup 时，这帮助了我。这确实意味着每次更新数据时都要更新数据透视表的额外步骤，但我认为工作簿的速度应该从中受益。

显然，将数据直接存储在工作表上会更好，但编写脚本来执行此操作可能非常乏味且耗时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:38:52.170

我需要电子表格的更多细节来建议大重构，但可以快速完成的事情是使用 VLOOKUP 的多列属性：

```
=VLOOKUP(Lookup_value, Table_array, {1, 2, 3}, 0) 
```

以上将返回数组中的第 1、2 和 3 列。您需要将其作为数组公式输入`CTRL` `SHIFT` `ENTER`3 个单元格，但如果您有多个使用相同查找值但返回不同列的查找，则会有很大的性能增强。

# android - Sending a tweet from an Android app to a handle and a particular hashtag

> ID：13898484
> 
> 赞同：0
> 
> 时间：2012-12-16T03:59:27.163
> 
> 标签：android, twitter

I have the handle and the hashtag and I just need to send a tweet from an Android app I'm developing. I have seen many different implementations (intents/OAuth etc) but all I need is to send a public tweet. Does a user have to be logged in for this? Do I need to user a library if all I need is to send a tweet?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:32:30.183

Sorry but yes, the user needs to be logged in.

You cannot post a tweet with no account.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:53:04.727

You need the user to authenticate your app to allow tweeting, so yes sign in is required to send a public tweet, as well as a library such as twitter4j. Check it out here [twitter4j](http://twitter4j.org/en/index.html#introduction) Also, you have to sign your application on twitter to receive a consumer key and consumer secret to add to your application's twitter configuration.

# php - 获取构造中列出的函数的变量？

> ID：13898488
> 
> 赞同：0
> 
> 时间：2012-12-16T04:00:05.420
> 
> 标签：php

我不是一个了不起的开发人员，所以请多多包涵，但我已经开始使用类和函数，而且我真的很喜欢编写库的方式。一个页面，我的所有 PHP 都可以去。不过我在想，如果我可以检查构造中函数的变量，并在运行函数之前将它们全部转义，我的生活会轻松一百万倍。这样，我就不必为每个函数转义每个变量。

我需要能够让构造以某种方式检查并查看函数中的变量，然后转义它们。

```
so X = 'Variable for a function' 
   X = mysqli_real_escape_String($conn, X); 
```

任何人都可以告诉我这是否可能，如果没有，你还能建议什么其他选择？

PS 我还不够先进，无法使用 PDO，所以请保留对程序编程的建议。

对不起，也许我没有正确解释这一点。我要做的是消除当有人调用函数（$vars）时在我的库中转义变量的需要。所以想法是在 __construct 中编写某种类型的脚本，在函数运行之前检查 $vars 并转义它们。

```
class users
{
function __construct()
{
   //the idea is that i can somehow escape the variables within the function
   //for the function that's being called
    function magical_funtion_that_calls_all_variables()
    {
        foreach($var)
        {
            $var = mysqli_real_escape_string($conn, $var);
        }
    }
}

function register($user, $pass1, $pass2)
{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:07:15.900

```
function escape_vars(array &$arr) {
  function ev(&$var) {
    $var = '*'.$var;
  }
  array_walk_recursive($arr,'ev');
} 
```

该函数接受通过引用传递的多维值数组，并对数组中的每个值运行一个函数来更改所有值。不要那样做。

使用准备好的语句。这里有程序样式示例：

[http://us1.php.net/manual/en/mysqli.prepare.php](http://us1.php.net/manual/en/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:02:55.060

我不认为你在做什么是一个好的解决方案。如果你想传递一个你不想被转义的参数会发生什么？如果您想要这样做的唯一*真正*原因是因为您很懒（我们都是...），那么您可以创建自己的“包装器”方法以在 1 次简单调用中转义值。

如：

```
class User
{
    public function register($user, $pass1, $pass2)
    {
        list($user, $pass1, $pass2) = $this->escape($user, $pass1, $pass2);
        ...
    }

    private function escape()
    {
        $args = func_get_args();
        foreach ($args as &$arg)
        {
            $arg = myqli_real_escape_string($arg);
        }
        return $args;
    }
} 
```

PS：正如其他人所建议的那样，我*强烈*建议使用准备好的语句。起初它们很吓人，但非常容易掌握并消除潜在的安全风险。

虽然我根本不推荐它，但这里有一种方法可以让你完全按照你的要求去做：

```
class User
{
    public function __call($methodName, $args)
    {
        foreach ($args as &$arg)
            $arg = myqli_real_escape_string($conn, $arg);

        call_user_func_array(array($this, $methodName), $args);
    }

    private function register($user, $pass1, $pass2)
    {
        // $user, $pass1, $pass2 will all be escaped
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T04:09:40.623

```
class users
{
  public function __construct()
  {
     //this is to set up the class you dont want to escape values until just before you
     // execute a query!
  }

  public function register($user, $pass1, $pass2)
  {
     // DO THE ESCAPING HERE
     $user = mysqli_real_escape_string($conn, $user);
     $pass1 = mysqli_real_escape_string($conn, $pass1);
     $pass2 = mysqli_real_escape_string($conn, $pass2);

     //now do your query
  }
} 
```

不是 100% 清楚你在问什么，但我认为你只想检查类型，例如：

```
if(is_string($x)) {
  $x = mysqli_real_escape_string($x);
} 
```

因此，在构造函数的上下文中：

```
public function __construct() {
   $args = func_get_args();
   foreach($args as $key => $arg) {
      if(is_string($arg) {
         $args[$key] = myqli_real_escape_string($arg);
      }
   }
} 
```

前面示例的问题是现在您必须使用数字索引`$args`数组，而不是您可能在构造函数定义中定义的任何“命名”参数。

所以你应该做的是手动检查所有参数。这不应该是那么令人头疼的问题，因为如果你有超过 5 个，那么你做错了什么。

也就是说，使用 PDO 或 Mysqli 的 OO api 并不比使用函数更困难，除非您尝试扩展类。所以我仍然建议使用它们。即使在程序环境中，它们也使 IMO 变得更容易。

现在，在您的具体示例中，您确实应该使用准备好的语句，这有助于转义和查询（语句）重用。好吧，mysqli 在这里更难处理，因为它要求事物是引用。

# c# - 字符串中出现的字母

> ID：13898489
> 
> 赞同：3
> 
> 时间：2012-12-16T04:00:17.633
> 
> 标签：c#, c#-4.0

如何计算字符串中出现的字符？

例如，假设我有以下输入字符串：

```
test text 
```

输出应该是：

```
t  4
e  2
s  1
x  1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T04:02:53.660

如果不编译和测试它，下面的 linq 应该可以解决问题：

```
from c in str
group by c into g
select new { letter= g.Key, count= g.Count()} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T04:32:56.947

```
var str = "abc cccdd";

var group = from c in str
            group c by c into g
            select g;

foreach(var g in group)
{
    Console.WriteLine(string.Format("{0}\t{1}", g.Key, g.Count()));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T04:21:37.763

执行此操作的另一种方法，与 Luke McGregor 的回答相同，只是不同的语法

```
string mystring = "test text";
var result = mystring.GroupBy(ch => ch).Select(a => new {chr = a.Key, count = a.Count()}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T04:40:16.567

**递归解决方案**

请注意，这也将计算空白。您之前可以删除空格。

```
public static void GroupString(string str) 
    {
        if (str.Length == 1)
            Console.WriteLine(str[0] + " 1");
        else
        {
            Console.WriteLine(str[0] +  " "+ str.Count(c => c == str[0]));
            GroupString(str.Replace(str[0].ToString(),""));
        }
    } 
```

# variables - 变量批处理循环问题

> ID：13898490
> 
> 赞同：3
> 
> 时间：2012-12-16T04:00:18.010
> 
> 标签：variables, batch-file, set, ping, goto

我试图让这个批处理脚本工作，但我对某些命令有点问题。它一直不将变量视为有效并将其发送到无效部分。奇怪的是我在代码的另一部分有相同的变量处理部分。这是我的代码：

```
:comp
cls
ECHO.
ECHO =================================================
ECHO Please Select the Device you would like to ping:
ECHO =================================================
SET /P comp="> "
IF /I %comp%==1 goto reg
IF /I %comp%==2 goto reg2
IF /I %comp%==3 goto reg3
IF /I %comp%==4 goto reg4
IF /I %comp%==5 goto reg5
IF /I %comp%==6 goto reg6
IF /I %comp%==7 goto reg7
IF /I %comp%==8 goto reg8
IF /I %comp%==9 goto reg9
IF /I %comp%==0 goto reg0
IF NOT %comp%=='1''2''3''4''5''6''7''8''9''0' goto inval
goto _ping
:inval
cls
ECHO.
ECHO ======================================
ECHO Choice invalid, please try again.
ECHO ======================================
ECHO.
pause
goto comp
:reg
cls
ECHO.
ECHO =========================================================
ECHO Please select the specific you would like to connect to.
ECHO =========================================================
ECHO.
SET /P regi="> "
IF /I %regi%==1 set str3=141
IF /I %regi%==2 set str3=142
IF /I %regi%==3 set str3=143
IF /I %regi%==4 set str3=144
IF /I %regi%==5 set str3=145
IF /I %regi%==6 set str3=146
IF /I %regi%==7 set str3=147
IF /I %regi%==8 set str3=148
IF /I %regi%==9 set str3=149
IF NOT %regi%=='1''2''3''4''5''6''7''8''9''0' goto inval
goto _ping 
```

所以第一部分工作并发送到正确的部分。第二部分是无效响应部分，第三部分是处理要 ping 的确切设备（和最后一个八位字节）的部分。如果您输入了一个有效的选择，它仍然会转到 if not 并处理到 inval 部分。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:10:30.433

### 问题 #1

问题出在这一行：

```
IF NOT %regi%=='1''2''3''4''5''6''7''8''9''0' goto inval 
```

由于`regi`不等于字符串`'1''2''3''4''5''6''7''8''9''0'`（给定合法的 0-9 输入），脚本将始终跳转到该`inval`部分。请注意，这条线背后的逻辑是有缺陷的：用户不太可能将其作为输入输入，我怀疑您是否想要这种行为。

相反，我相信您只想检查是否`regi`是数字。对此的解决方案是简单地初始化为一些初始值，并在语句`str3`之后检查它：`if`

```
str3=invalid
IF /I "%regi%"=="1" set str3=141
...
IF /I "%regi%"=="9" set str3=149
IF "%str3%"=="invalid" goto inval
goto _ping 
```

如果`str3`保留“无效”值，这意味着输入无效，因为没有`if`执行任何语句。

### 问题 #2

这条线也是如此：

```
IF NOT %comp%=='1''2''3''4''5''6''7''8''9''0' goto inval 
```

这检查`comp`到一个非常不可能的

如果`if`执行任何语句，脚本将跳转到“reg”标签之一。如果输入无效，`if`则跳过语句，因此只需放在`goto inval`它们之后，如下所示：

```
IF /I "%comp%"=="1" goto reg
...
IF /I "%comp%"=="0" goto reg0
goto inval 
```

这也使以下`goto ping`行变得多余。

### 问题 #3

我还可以在您的脚本中发现另一个问题：如果`comp`是空字符串，则进行以下比较（以及类似的比较）：

```
 IF /I %comp%==1 goto reg 
```

将评估为这个非法表达式：

```
IF /I ==1 goto reg 
```

并将导致解释器引发错误。建议将固定字符连接到比较的两侧以避免这种情况，例如：

```
IF /I "%comp%"=="1" goto reg1 
```

希望能帮助到你！

# php - SQL 查询出错

> ID：13898494
> 
> 赞同：1
> 
> 时间：2012-12-16T04:01:49.647
> 
> 标签：php, mysql, sql, moodle

我正在将 Moodle 1.0 模块移植到 2.0 版。在检查几个 PHP 文件中的错误时，我遇到了一条查询错误消息，但没有表明错误是什么。这是查询：

```
global $DB; //required global variable

$vms = $DB->get_records_sql('SELECT DISTINCT vm.*, uva.assignment_id, gm.groupid,
                                    CASE WHEN gm.groupid IS NULL THEN uva.user_id ELSE NULL END user_id
                                    FROM {mdl_vMoodle_Virtual_Machine} vm 
                                    INNER JOIN {mdl_vMoodle_UVA} uva ON vm.id = uva.vm_id 
                                    LEFT JOIN {mdl_groups_members} gm ON gm.userid = uva.user_id
                                    WHERE uva.assignment_id = :assignmentid', array('assignmentid'=>$assignment_id)); 
```

谁能告诉我这个函数调用有什么问题？

更新：删除 DISTINCT 使错误消失。Moodle 2.0 的文档很少，所以我不确定它是否根本不接受 distinct 关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:44:44.460

不要添加表名前缀“mdl_”，因为使用 {} 它会自动添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:07:12.983

SQL 语法没问题，所以这不是问题。您需要检查 $assignment_id 的值，该变量可能未设置，或者设置的值类型不正确，这就是导致错误的原因。

我建议你添加：

```
var_dump($assignment_id); 
```

就在这个查询之前，看看你得到了什么。如果您收到“未定义”消息，请检查软件的逻辑以查看可能导致此问题的原因。

# objective-c - 与 scanf 函数一起使用

> ID：13898496
> 
> 赞同：2
> 
> 时间：2012-12-16T04:02:19.667
> 
> 标签：objective-c, xcode4, scanf

我正在通过objective-C进行scanf倒计时，因此程序将从您输入的任何数字开始倒计时。但是，代码中有一个烦人的语义错误：格式字符串未使用数据参数。此外，该程序不会倒计时，它只会在我输入数字后将输出显示为零。

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        int x,number;

        NSLog(@"please enter a number:");
        scanf("i", &number);
        for (x = number;  x>=0; x--)
            NSLog(@"%i",x);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T10:40:52.263

你没有说你遇到了什么麻烦，或者你试图解决什么问题，所以人们很难帮助你。

但是对于初学者来说，您发布的代码片段（a）永远不会给出`y`值，并且（b）循环永远不会按照您的设置执行`count = 1`然后测试`count == 3`- 这将立即失败并且不会进入循环。

对于（a）我只能猜测您期望`y`来自哪里，对于（b）您可能的意思是`count <= 3`-即循环3次？

**评论后补充**

好的，让我们重新编写你的代码并添加一些注释。循环可以`for`重写为`while`循环，在您的情况下，这看起来像：

```
count = 1; // initialize
while (count == 3) // Test, will fail immediately, did you mean count <= 3?
{
   NSLog(@"enter a number");
   scanf("%i", &x);
   // At this point you have set x to a value
   // however y has no value - as it is a local variable it has some random value
   // the next line calculates `y%x`, and without a value for y this calculation
   // is meaningless. Did you mean to read in both x and y? E.g. scanf("%i%i", &x, &y)?
   // Note you should also check the return value from scanf, it is the number of items
   // successfully converted - while you may "enter a number" your user might type
   // "sixteen", which is a number to them but scanf won't parse it with %i!
   if (y%x == 0)
      NSLog(@"%i is evenly divisible by %i", y, x);
   else
      NSLog(@"%i is NOT evenly divisible by %i", y, x);

   count++; // increment
} 
```

进行上述更改并恢复`for`为：

```
for (count = 1; count <= 3; count++)
{
   NSLog(@"enter two numbers");
   int numberRead = scanf("%i%i", &x, &y);

   if (numberRead != 2)
      NSLog(@"error, unable to parse two numbers");
   else if (y%x == 0)
      NSLog(@"%i is evenly divisible by %i", y, x);
   else
      NSLog(@"%i is NOT evenly divisible by %i", y, x);
} 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-29T19:06:05.397

您的 scanf 语法错误，应该是

```
scanf("%i",&number) //for integer 
```

# android - 调整 textview 的高度以匹配内容

> ID：13898500
> 
> 赞同：0
> 
> 时间：2012-12-16T04:02:32.163
> 
> 标签：android, android-layout, textview, scrollview, settext

我正在动态地将内容添加到下面的 textView 并且它可以工作。唯一的问题是，我只看到一行文字。如果我通过 layout.xml 或使用字符串将 textView 的文本设置为 25 行长，然后动态地用新文本替换它，那么新文本将只有 25 行长，即使它实际上是 50 行。我将 minLines 设置为一个很高的数字，但这对我来说是草率的代码。知道我在这里缺少什么吗？

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/progressBar1"
    android:layout_weight="1" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent" />
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:24:16.170

代替：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" /> 
```

尝试使用：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

这将使 TextView 扩展到其内容所需的高度。同时，ScrollView 将根据滚动位置处理显示的内容。

# android - 通过网络位置显示 GPS 安卓

> ID：13898501
> 
> 赞同：0
> 
> 时间：2012-12-16T04:02:35.667
> 
> 标签：android

我正在使用 Fedor 的示例，来自[What is the most simple and most robust way to get the user's current location on Android?](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a) 在我的应用程序中。一切正常，但我需要应用程序显示 GPS 位置（如果在启用所有提供程序的情况下可用）。当设备上仅启用独立 GPS 服务时，它将显示 GPS，但一旦打开其他位置服务，它会显示网络位置而不是 GPS。如果可用，我需要该应用程序显示 GPS 位置。即使删除了告诉它使用最新版本的语句，它仍然会显示网络位置（如果可用）。这是我第一次在 Android 上使用定位服务，因此非常感谢任何帮助。

```
 import java.util.Timer;
 import java.util.TimerTask;
 import android.content.Context;
 import android.location.Criteria;
 import android.location.Location;
 import android.location.LocationListener;
 import android.location.LocationManager;
 import android.os.Bundle;

public class MyLocation {
Timer timer1;
LocationManager lm;
LocationResult locationResult;
boolean gps_enabled=false;
boolean network_enabled=false;

public boolean getLocation(Context context, LocationResult result)
{
    //I use LocationResult callback class to pass location value from MyLocation to user code.
    locationResult=result;
    if(lm==null)
        lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

    //exceptions will be thrown if provider is not permitted.
    try{gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){}
    try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){}

    //don't start listeners if no provider is enabled
    if(!gps_enabled && !network_enabled)
        return false;

    if(gps_enabled)
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
    if(network_enabled)
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
    timer1=new Timer();
    timer1.schedule(new GetLastLocation(), 20000);
    return true;
}

LocationListener locationListenerGps = new LocationListener() {
    public void onLocationChanged(Location location) {
        timer1.cancel();
        locationResult.gotLocation(location);
        lm.removeUpdates(this);
        lm.removeUpdates(locationListenerNetwork);
    }
    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
};

LocationListener locationListenerNetwork = new LocationListener() {
    public void onLocationChanged(Location location) {
        timer1.cancel();
        locationResult.gotLocation(location);
        lm.removeUpdates(this);
        lm.removeUpdates(locationListenerGps);
    }
    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
};

class GetLastLocation extends TimerTask {
    @Override
    public void run() {
        lm.removeUpdates(locationListenerGps);
        lm.removeUpdates(locationListenerNetwork);

        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(false);
        criteria.setPowerRequirement(Criteria.POWER_HIGH);
        String provider = lm.getBestProvider(criteria, true);

        Location net_loc = null, gps_loc = null;
        if (gps_enabled)
            gps_loc = lm.getLastKnownLocation(provider);
        if (network_enabled)
            net_loc = lm.getLastKnownLocation(provider);

        // if there are both values use GPS
        if (gps_loc != null && net_loc != null) {

            locationResult.gotLocation(gps_loc);

            return;
        }

        if (gps_loc != null) {
            locationResult.gotLocation(gps_loc);
            return;
        }
        if (net_loc != null) {
            locationResult.gotLocation(net_loc);
            return;
        }
        locationResult.gotLocation(null);
    }
}

public static abstract class LocationResult {
    public abstract void gotLocation(Location location);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:16:28.290

使用单一标准 `criteria.setAccuracy(Criteria.ACCURACY_FINE);`对我正确选择网络/gps 有效。对于所有其他人，我使用默认值。那*可能*是你的问题。您始终可以`getProviders`自己调用和选择网络和 gps。

从您发布的代码中，尚不清楚您如何知道网络和 gps 位置之间的区别。您是否正在记录您从那里返回的提供程序`getBestProvider`？请注意，以下代码并没有做你认为它正在做的事情——

```
if (gps_enabled)
        gps_loc = lm.getLastKnownLocation(provider);
if (network_enabled)
        net_loc = lm.getLastKnownLocation(provider); 
```

当 gps_enabled 和 network_enabled 都为真时，gps_loc 和 net_loc 将始终相同，因为“提供者”将是相同的（由 返回的“最佳”提供者`getBestProvider`）。

我还注意到您正在扩展 TimerTask。在课堂上，您关闭您的位置更新。您应该只需要对您的任务进行轮询或通过`LocationListener`. 后者是首选方法，但无论哪种方式，您都不需要两者都做。

我建议查看[让您的应用程序位置感知](http://developer.android.com/training/basics/location/index.html)。甚至还有一节介绍了同时使用网络和 gps 并选择最准确的一个。

# algorithm - 为什么冒泡排序、插入排序和选择排序具有相同的 Big-O？

> ID：13898502
> 
> 赞同：0
> 
> 时间：2012-12-16T04:02:50.473
> 
> 标签：algorithm, big-o

正如标题所问，为什么插入、冒泡和选择排序具有相同的大o？在我的算法课中，我们已经介绍了上述四种算法和归并排序，为什么还要使用上述任何一种算法而不是归并排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T04:09:52.107

虽然它们是不同的算法，但它们具有相同的渐近复杂度，因为在某种程度上，每个算法都会两次通过长度为 n 的列表。关键是 Big-O 是最坏情况下的性能测量。插入排序在最坏的情况下是 O(n^2)，但在最好的情况下，当列表已经排序时，它变成 O(n)。不同的排序算法具有不同的优势，需要超出 big-o 复杂性的分析。

话虽如此，使用 nlog(n) 排序几乎总是更好，而冒泡排序之类的主要功能可能是向人们介绍排序算法的概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T04:13:03.580

尽管像冒泡排序这样的排序算法对于大量项目非常慢，但当您只有少量项目时它们非常快，部分原因是它们非常简单。当项目已经接近正确位置时，冒泡排序或插入排序也很有用。在这种情况下，一个好的排序算法通常会使用一种技术来使项目按课程规模排序，然后使用另一种算法进行精细排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T04:15:09.150

这是这里被问到的更常见的问题之一。Big-O 表示法是一种衡量算法理论界限的方法，这是在最好的情况下得到恒定时间 O(1) 的地方，即使这种情况很少发生，因此是最好的情况。这三种算法之所以具有相同的大 O 是因为它们都以相同的方式解决排序问题，具有相同的大 O 并不意味着这些算法在它们的工作方式上是远程等效的，即使过程类似。从纯粹的学术角度来看，教授这些内容的原因是您能够从历史中学习，而不是认为您会通过提出冒泡排序来“震惊世界”。它还用于显示看似简单的概念，即排序，

# java - 如何对二维 Java 数组进行切片？

> ID：13898504
> 
> 赞同：4
> 
> 时间：2012-12-16T04:02:56.587
> 
> 标签：java, multidimensional-array

伙计们，

我正在使用 JTables 并有一个二维数组。我需要删除数组中每一行的第一个元素。除此之外还有更简单的方法吗？

```
int height = data2.length;
int width = data2[0].length;
Object[][] data = new Object[height][width];
for (int j=0; j<height; j++) {
    for (int i=1; i<width; i++) {
        data[j][i-1] = data2[j][i];
    }
}
data2 = data; 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T04:05:39.593

是的 - 您可以使用[System.arraycopy](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)而不是内部循环：

```
Object[][] data = new Object[height][width];
for (int i = 0; i < height; i++) {
    System.arraycopy(data2[i], 1, data[i], 0, width-1);
} 
```

# scala - Scala Futures - 被两种方法的 CPU 负载和输出混淆

> ID：13898506
> 
> 赞同：1
> 
> 时间：2012-12-16T04:03:42.780
> 
> 标签：scala, future, scala-2.9

我在实现 scala 期货时犯了一个错误，或者至少我认为我做到了，并且只是注意到它，当我修复错误时，它的运行速度比我不使用期货时慢得多。有人可以帮助我了解发生了什么吗？

我有一个慢速方法，需要运行 5,000 次。每个都是独立的并返回一个 Double。然后我需要计算 5,000 个返回值的平均值和标准差。

当我最初编码时，我是这样做的：

```
import actors.Futures._
import util.Random
import actors.Future

def one = {
  var results = List[Future[Double]]()
  var expectedResult: List[Double] = Nil
  var i = 0

  while (i < 1000) {
    val f = future {
      Thread.sleep(scala.util.Random.nextInt(5) * 100)
      println("Loop count: " + i)
      Random.nextDouble
    }
    results = results ::: List(f)
    println("Length of results list: " + results.length)

    results.foreach(future => {
      expectedResult = future() :: expectedResult
      i += 1
    })
  }
  // I would return the list of Doubles here to calculate mean and StDev
  println("### Length of final list: " + expectedResult.length)
} 
```

我没有想到它，因为它运行得很快，我得到了我预期的结果。当我仔细查看它以尝试让它运行得更快（它没有使用我所有可用的 CPU 资源）时，我意识到我的循环计数器在错误的位置，并且`foreach`在`future`创建循环中并且因此，提前阻止了期货。或者我是这么想的。

我坚持了几个 println 语句，看看我是否能弄清楚发生了什么，并对发生的事情感到非常困惑......结果列表的长度与最终列表长度不匹配，也不匹配循环计数器！

我根据我认为（应该）发生的事情将我的代码修改为以下内容，并且事情变得慢得多，并且打印语句的输出与第一种方法相比没有任何意义。这次循环计数器似乎跳到了 1000，尽管最终列表长度是有意义的。

第二种方法确实使用了所有可用的 CPU 资源，这更符合我的预期，但我确信结果相同需要更长的时间。

```
def two = {
  var results = List[Future[Double]]()
  var expectedResult: List[Double] = Nil
  var i = 0

  while (i < 1000) {
    val f = future {
      Thread.sleep(scala.util.Random.nextInt(5) * 100)
      println("Loop count: " + i)
      Random.nextDouble
    }
    results = f :: results
    i += 1
    println("Length of results list: " + results.length)

  }
  results.foreach(future => {
    expectedResult = future() :: expectedResult
  })
  // I would return the list of Doubles here to calculate mean and StDev
  println("### Length of final list: " + expectedResult.length)
} 
```

我在这里遗漏了一些明显的东西吗？

* * *

## 编辑

对于任何看到这个的人......问题是我正在将期货的结果重新添加到期货循环中的最终列表（expectedResult）中 - 正如 som-snytt 所指出的那样。

因此，在每个循环中，我都会反复迭代已完成的期货并获得：

```
//First Loop: 
List(1)
//Second Loop:
List(1,2)
//Third Loop:
List(1,2,3,4)
//... and so on 
```

最终列表中的模式是这样的：

```
List(n, n-1, n-2, ..., 4, 3, 2, 1, 3, 2, 1, 2, 1, 1) 
```

由于列表有 5050 项长和 Double 值，当我只查看列表的开头时，很难看到模式。

最终，循环的数量实际上只有 100 个，而不是我需要的 5000 个。

该方法的第二版对于 scala 2.9 是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:09:49.560

> 我在这里遗漏了一些明显的东西吗？

不。可以公平地说，命令式编程使一切变得不明显。

一方面，您反复迭代结果，颠簸`i`。

上次通过：

```
Length of results list: 45
Loop count: 990
### Length of final list: 1035 
```

i 计算最终列表，应用未来会增加结果的长度，所以数学是正确的：`45 + 990 = 1035`.

应用已完成的期货只会获得价值；您阻塞只是为了等待，因此您不一定会注意到一遍又一遍地获取未来值的性能问题。

但请注意，在未来，您将关闭 var i，请参阅[Captured by Closures](http://scalapuzzlers.com/index.html#pzzlr-008)，而不是创建未来时 i 的值。作为一个额外的混淆，“循环计数”由于缺乏同步而据报道是不可靠的。

> 我没有想到它，因为它运行得很快，我得到了我预期的结果。

这一观察包含了如此多的工程智慧。

以下是 2.9 的另外两个公式：

```
 def four = (1 to 1000).par map { i =>
    Thread sleep nextInt(5) * 100
    Console println "Loop count: " + i
    nextDouble
  } 

  def three = 
    (1 to 1000) map (i => future {
        Thread sleep nextInt(5) * 100
        Console println "Loop count: " + i
        nextDouble
    }) map (_()) 
```

这是 2.10 中的新 API，仅供比较。

```
import scala.concurrent._
import scala.concurrent.duration._
import scala.util._

object Test extends App {
  import ExecutionContext.Implicits.global
  import Random._
  def compute(i: Int) = future {
    Thread.sleep(nextInt(5) * 100)
    val res = nextDouble
    println(s"#$i = $res")
    res
  }
  val f = Future.traverse(1 to 1000)(compute)
  val res = Await result (f, Duration.Inf)
  println(s"Done with ${res.length} results")
} 
```

# jquery - 对 JQuery 切换代码的 一项更改：内容在单击之前显示。单击此代码中的按钮后，如何使内容显示？

> ID：13898508
> 
> 赞同：0
> 
> 时间：2012-12-16T04:04:26.143
> 
> 标签：jquery

```
<!DOCTYPE html>
<html>
<head>
  <style>
p { margin:-3px 0px 0px 3px;
background:#212121;
width:175px;
padding:10px;
color:#fff;
font-weight:500;
font-size:14px; }
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <button>Toggle 'em</button>

<p>I figured out how to get the toggle to look and work up to this point, but I can't seem to get this content box to appear ONLY AFTER the button is clicked upon NOT before. And, when the visitor doesn't want to see the content anymore, s/he would have to click on the button (toggling). If you happen to know how to incorporate a delayed auto close on this toggle, please do tell (if not, no biggie--not my main focus). Thanks! </p>
    <script>
$("button").click(function () {
$("p").toggle("fast");
});    
</script>

</body>
</html> 
```

我对 JQuery 不太了解，但我使用了这个网站[http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_toggle](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_toggle)并弄清楚了如何让切换器看起来和工作到这一点，但我似乎无法让这个内容框出现在按钮被点击之后而不是之前。而且，当访问者不想再看到内容时，他/她必须点击按钮（切换）。如果您碰巧知道如何在此切换中加入延迟自动关闭，请务必告诉（如果没有，没什么大不了的——不是我的主要关注点）。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:06:34.430

只需添加：

> 显示：无；

到 CSS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:07:19.817

改用这个！

```
$(document).ready( function() {
$("p").hide();
$("button").click(function () {
$("p").toggle("fast");
});
}); 
```

[http://jsfiddle.net/N6NJR/](http://jsfiddle.net/N6NJR/)

# php - CakePHP 和 Mognodb

> ID：13898511
> 
> 赞同：1
> 
> 时间：2012-12-16T04:04:59.467
> 
> 标签：php, cakephp

我正在使用 CakePHP 2.2.4 和 Mongodb 2.2.2

我已经解决了几个问题，但在我的 cakephp 主页上出现以下错误

```
Strict (2048): Declaration of MongodbSource::execute() should be compatible with DboSource::execute($sql, $options = Array, $params = Array) [APP/Plugin/Mongodb/Model/Datasource/MongodbSource.php, line 36] 
```

对于这些函数声明，我得到了类似的错误

*   MongodbSource::query()
*   MongodbSource::create()
*   MongodbSource::read()
*   MongodbSource::update()
*   MongodbSource::delete()
*   MongodbSource::calculate()
*   MongodbSource::group()
*   MongodbSource::dropSchema()
*   MongodbSource::describe()

MongodbSource 扩展了 DbSource

在 DbSource 中：

```
public function execute($sql, $options = array(), $params = array()) { <code here> } 
```

在 Mongodb 来源：

```
public function execute($query, $params = array()) { <code here> } 
```

我有点明白发生了什么，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:45:27.820

覆盖父方法的方法应该实现相同的参数，即你的`execute`方法签名`MongodbSource`应该是：

```
public function execute($sql, $options = array(), $params = array()) 
```

也可以看看：

[方法声明应与 PHP 中的父方法兼容](https://stackoverflow.com/questions/3115388/declaration-of-methods-should-be-compatible-with-parent-methods-in-php)

[https://www.google.com/search?q=php+Declaration+of+should+be+compatible+with](https://www.google.com/search?q=php+Declaration+of+should+be+compatible+with)

[http://php.net/manual/en/migration51.oop.php#migration51.oop-inheritance](http://php.net/manual/en/migration51.oop.php#migration51.oop-inheritance)

# ios5 - MobileVLC 编译 libcompat.a(dummy.o) 没有符号

> ID：13898521
> 
> 赞同：1
> 
> 时间：2012-12-16T04:07:16.907
> 
> 标签：ios5, vlc, libvlc

```
[info] Installing libvlc
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/libcompat.a(dummy.o) has no symbols
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/libcompat.a(tdestroy.o) has no symbols
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/libvlccore.a(cache.o) has no symbols
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/libvlccore.a(update_crypto.o) has no symbols
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/libvlccore.a(media_library.o) has no symbols
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/control/libmotion_plugin.a(libmotion_plugin_la-unimotion.o) has no symbols
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/video_filter/librotate_plugin.a(librotate_plugin_la-unimotion.o) has no symbols
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/liba52_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/liba52_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_attachment_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_attachment_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_avio_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_avio_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_ftp_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_ftp_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_http_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_http_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_mms_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_mms_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_rar_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_rar_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_tcp_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_tcp_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_udp_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_udp_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_vdr_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaccess_vdr_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libadpcm_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libadpcm_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaes3_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaes3_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libafile_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libafile_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaiff_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaiff_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libamem_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libamem_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaraw_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaraw_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libasf_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libasf_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libau_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libau_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaudio_endian_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaudio_endian_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaudio_format_neon_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaudio_format_neon_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaudio_format_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaudio_format_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaudioqueue_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libaudioqueue_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libavcodec_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libavcodec_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libavformat_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libavformat_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libavi_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libavi_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libblend_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libblend_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcanvas_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcanvas_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcc_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcc_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcdg_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcdg_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libchain_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libchain_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libchorus_flanger_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libchorus_flanger_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcompressor_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcompressor_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcroppadd_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcroppadd_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcvdsub_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libcvdsub_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdash_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdash_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdecomp_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdecomp_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdeinterlace_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdeinterlace_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdemux_cdg_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdemux_cdg_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdemux_stl_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdemux_stl_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdemuxdump_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdemuxdump_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdirac_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdirac_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdolby_surround_decoder_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdolby_surround_decoder_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdts_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdts_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdvbsub_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libdvbsub_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libequalizer_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libequalizer_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libes_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libes_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libfilesystem_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libfilesystem_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libflac_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libflac_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libflacsys_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libflacsys_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libfloat32_mixer_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libfloat32_mixer_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libfolder_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libfolder_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libgain_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libgain_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libh264_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libh264_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libi420_rgb_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libi420_rgb_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libi420_yuy2_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libi420_yuy2_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libi422_i420_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libi422_i420_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libi422_yuy2_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libi422_yuy2_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libimage_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libimage_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libinteger_mixer_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libinteger_mixer_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libkaraoke_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libkaraoke_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/liblive555_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/liblive555_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/liblogo_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/liblogo_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/liblpcm_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/liblpcm_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmjpeg_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmjpeg_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmkv_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmkv_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmod_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmod_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmono_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmono_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmp4_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmp4_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmpeg_audio_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmpeg_audio_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmpgatofixed32_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmpgatofixed32_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmpgv_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libmpgv_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libnormvol_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libnormvol_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libnsc_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libnsc_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libnsv_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libnsv_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libnuv_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libnuv_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libogg_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libogg_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libopus_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libopus_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_dirac_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_dirac_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_flac_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_flac_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_h264_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_h264_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_mlp_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_mlp_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_mpeg4audio_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_mpeg4audio_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_mpeg4video_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_mpeg4video_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_mpegvideo_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_mpegvideo_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_vc1_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpacketizer_vc1_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libparam_eq_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libparam_eq_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libplaylist_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libplaylist_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpng_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpng_plugin.a are identical (not copied).
cp: /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpostproc_plugin.a and /Users/Eric/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/install-ios-OS/lib/vlc/plugins/libpostproc_plugin.a are identical (not copied).

[info] Removing unneeded modules
~/Documents/Develop/Project/MobileVLC/ImportedSources/vlc/extras/package/ios
[info] Building MobileVLCKit (Aggregate static plugins)
[info] Building MobileVLCKit (MobileVLCKit)
[info] Building MobileMediaLibraryKit (MobileMediaLibraryKit)
[info] Building MobileVLC (MobileVLC)
** BUILD FAILED ** 
```

有人知道如何解决这个问题吗？我从 Git 获得源代码，我的开发环境是 Xcode4.4.1 和 Mac OS 10.8。我在 Mac OS 10.7 上尝试了 Xcode4.2.1，我已经被这个问题困扰了几天，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:04:41.103

当我在终端中编译代码时，我也得到了错误，“没有符号”。在（清理）删除先前构建的库/可执行文件之后，虽然消息再次出现（没有符号），但我的应用程序在终端中编译。

我认为，您可以尝试清理编译并重试。

# javascript - 看不到从子对象添加到原型的属性

> ID：13898526
> 
> 赞同：1
> 
> 时间：2012-12-16T04:07:48.467
> 
> 标签：javascript, node.js, inheritance, prototype

我需要一些帮助来理解 javascript protoypal 继承是如何工作的……或者更确切地说，为什么它没有做我期望它做的事情。

本质上，我正在尝试建立从`new`语句返回的模板化对象。我在模块中有一个通用构造函数`utils.js`，它将参数对象中的任何值分配给相应的模板对象，我返回修改后的模板对象作为调用的结果`new`。

* * *

```
module.exports.ctor = ctor;

//Mapped object constructor
function ctor(template) {

  return function(args) {
     var s, t, p;

    //guard against being used without new
    //courtesy of John Resig http://ejohn.org/blog/simple-class-instantiation/
    if (!(this instanceof arguments.callee)) {
      throw new Error("Constructor called without 'new'");
    }

    //create a deep copy of `template` to modify
    t = JSON.parse(JSON.stringify(template));
    args = args === 'undefined' ? {} : args;   

    // copy values of matching properties from `args` to `t`
    // (uses Crockford's `typeOf` function http://javascript.crockford.com/remedial.html)
    for (p in t) {
      if (args[p]) {
        s = typeOf(t[p]);

        if (s === 'function' || s === 'null') {
          /* do nothing */
        } else if (s === 'array') {
          t[p] = t[p].concat(args[p]);
        } else {
          t[p] = args[p];
        }
      }
    }

    return t;
  };
} 
```

下面是一个泛型构造函数如何作用于`Contact`模板对象的示例，其中`Contact`添加了一些特定的属性到`prototype`对象中：

```
var template = {
    email: null,
    phone: null,
    address: []
};

var Contact = require('../util').ctor(template);

Contact.prototype.template = template;

Contact.prototype.print = function() {
  var str = this.email + '\n';
  str += this.phone + '\n';
  for (var i = 0; i < this.address.length; i++) {
    str += this.address[i].toString() + '\n';
  }
};

module.exports = Contact; 
```

* * *

我的期望是`template`属性和`print`函数将在返回的对象的链中可用，但似乎它们不是（来自节点 REPL）：

```
> var Contact = require('./mapping/Contact');
undefined
> var c = new Contact();
undefined
> c.print
undefined
> c.template
undefined
> c
{ email: '', phone: '', address: [] } 
```

* * *

有人可以向我解释为什么如果我明确地向 的原型添加属性`Contact`，这些属性对返回的对象不可用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:27:53.167

这是因为`ctor()`导致构造函数返回`t`，这是一个普通的泛型对象。由于构造函数返回的是普通对象，因此您丢失了原型。不要返回`t`，而是复制`t`to的属性`this`：

```
for (var k in t) {
    this[k] = t[k];
} 
```

然后，不要返回任何东西。或者，`this`如果您愿意，可以返回。

# awk - 如何在列之间留出空间？

> ID：13898527
> 
> 赞同：0
> 
> 时间：2012-12-16T04:07:57.187
> 
> 标签：awk

我有一个如下所示的文本文件。我想在第五列的字符和数字之间留一个空格。我怎样才能用 awk 做到这一点？

```
cxe  911  bv  heg   A1029   53.030
bvf  912  cv  lya   A1030   51.99

Desired output

cxe  911  bv  heg   A 1029   53.030
bvf  912  cv  lya   A 1030   51.99 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:45:12.620

```
$ awk 'match($0,/([^[:space:]]+[[:space:]]+){4}[^[:space:]]/) {
         print substr($0,1,RLENGTH), substr($0,RLENGTH+1) }' file
cxe  911  bv  heg   A 1029   53.030
bvf  912  cv  lya   A 1030   51.99 
```

上面的“4”是您感兴趣的列之前的列数，即第 5 列。如果您想在不同的字段上进行操作，只需以明显的方式更改该数字即可。

如果您使用的是旧版本的 gawk，则需要添加 --re-interval 标志，但对于较新的 gawk，RE-intervals ({4}) 默认启用。

此外，如果您愿意，这里有一个更简短但特定于 GNU-awk 的解决方案：

```
$ awk '{print gensub(/(([^[:space:]]+[[:space:]]+){4}[^[:space:]])(.*)/,"\\1 \\3","")}' file
cxe  911  bv  heg   A 1029   53.030
bvf  912  cv  lya   A 1030   51.99 
```

您可以使用一对 sub() 在任何 awk 中执行类似操作，但它很难看，因此我将 match()/substr() 用于这些 awk。

最后，如果像其他人发布的那样，您想要一个解决方案，在每行的第 21 个字符之后而不是在每行的第 5 个字段中的第一个字符之后添加一个空格，那么那就是：

```
$ awk 'sub(/.{21}/,"& ")' file
cxe  911  bv  heg   A 1029   53.030
bvf  912  cv  lya   A 1030   51.99 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T04:27:00.110

这非常特定于您的数据格式，但它有效：

```
awk '{print substr($0,1,21)" "substr($0,22)}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T04:29:22.213

假设您的第五列以单个字符开头，

```
{
  if(sub(/^./, "& ", $5)) {
    print $0;
  } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T13:18:51.510

我还没有测试过，但我想这应该可以。

```
awk '{$5=substr($5,0,1)" "substr($5,1);print}' your_file 
```

# c# - SCCM 2007 SDK Powershell 访问被拒绝错误

> ID：13898534
> 
> 赞同：0
> 
> 时间：2012-12-16T04:09:55.033
> 
> 标签：c#, powershell, access-denied, sccm, sccm-2007

我已经使用 SCCM 2007 SDK 大约一周了，使用 C# 示例连接和运行我想要的命令没有问题。不幸的是，我试图从 Powershell 中运行我的 .Net DLL，一旦它到达 WglConnectionManager 对象的 .Connect 语句，我就会收到拒绝访问错误。

我做了很多研究，已经在远程机器上启用了 PSRemoting，并反编译了 wgladmin DLL 以确保将身份验证设置为 PacketPrivacy。我确信我缺少一些东西，虽然我已经使用 Powershell 将近一年了，但它主要是在本地系统上。

此连接是在我已经将所需的两个 DLL 导入命名空间之后。我收到的错误是：

```
 Exception calling "Connect" with "3" argument(s): "Access is denied. (Exception from HRESULT:   0x80070005 (E_ACCESSDENIED))"
At C:\Users\cnanda\Documents\WindowsPowerShell\Modules\Sccmpack\SCCMPack.PSM1:15 char:38
+             [void]$connection.Connect <<<< ("", "", "
");
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException

SciSessionHandle       :
ConnectionScope        : System.Management.ManagementScope
QueryProcessor         : Microsoft.ConfigurationManagement.ManagementProvider.WqlQueryEngine.WqlQueryProcessor
UniqueIdentifier       : 4acb728e-1aeb-4493-a0a7-218f68bce2d9
MinVersion             : 0
MaxVersion             : 0
ExecuteQueryBatchSize  : 50
AsyncQueryBatchSize    : 50
ResultObjectsBatchSize : 1000
NamedValueDictionary   : {}
UserDataObject         :
Context                : 
```

这是连接代码：

```
 $namedValues = New-Object Microsoft.ConfigurationManagement.ManagementProvider.SmsNamedValuesDictionary
        $connection =  New-Object Microsoft.ConfigurationManagement.ManagementProvider.WqlQueryEngine.WqlConnectionManager($namedValues)

        [void]$connection.Connect("SERVERNAME", "USERNAME", "PASSWORD"); 
```

# c - 在 C 中取消引用字符串文字有什么影响？

> ID：13898535
> 
> 赞同：2
> 
> 时间：2012-12-16T04:09:59.850
> 
> 标签：c

```
#include<stdio.h>

int main()
{
    printf("%c",*"abcde");
    return 0;
} 
```

'a' 将如何成为该程序的输出？让我知道为什么在 turbo c 中编译时输出为“a”。这里的“*”意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:12:14.470

`"abcde"`是一个字符串文字，它是一个字符数组 ( `char[]`)。它*通常*放置在程序的只读数据部分中。如果您要将它传递给`printf`，编译器实际上是将该数组的地址传递给`printf`.

但是，在这里您要*取消引用*该指针，该指针仅传递第一个字符。

这是一个等效的，更详细的版本，可能更有意义：

```
const char* str = "abcde";    // str is a char* pointer to "abcde"
char c = *str;                // De-reference that pointer - in other words,
                              //   get me the char that it points to.
printf("%c", c);              // Pass that char to printf, where %c is
                              //   expecting a char. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T04:23:52.300

`"abcde"`是字符串文字，因此具有数组类型。`sizeof`在除或 的操作数之外的任何上下文中`&`，数组衰减为指向其第一个元素的指针。因此，当用作一元运算`*`符的操作数时，`"abcde"`它被评估为指向字符串开头的“a”的指针，并且`*`运算符取消引用该指针，获得 value `'a'`。将此值（整数）传递`printf`给使用`%c`格式说明符进行格式化会导致`printf`将相应的字符“a”打印到标准输出。

# android - 填充 GridView：startManagingCursor() 和 SimpleCursorAdapter 已被弃用

> ID：13898538
> 
> 赞同：2
> 
> 时间：2012-12-16T04:10:42.807
> 
> 标签：android, deprecated, android-gridview, android-adapter

我有这个方法来填充 GridView

```
private void populateGrid()
{

    GridView gv= (GridView)findViewById(R.id.mygrid);

    Cursor c = getData():
    startManagingCursor(c);

    String[] cols = new String[] { adap.ONE, adap.TWO, adap.THREE};
    int[]   views = new int[] { R.id.txt_1, R.id.txt_2, R.id.txt_3};

    // Now create an array adapter and set it to display using our row
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
            R.layout.row, c, cols, views);

    Log.w("NumRows",adapter.getCount() + "");

    gv.setAdapter(adapter);

} 
```

不幸的是方法

```
startManagingCursor(c); 
```

而这个构造函数

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
                R.layout.listviewtemp, c, cols, views); 
```

自 API 级别 11 起已弃用。

我应该如何重写这个简单的方法以避免弃用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T12:42:36.107

您需要使用**CursorLoader**进行迁移。

这提供了比**cursoradapter**更好的性能。

您可以在以下链接中找到示例项目，该链接获取安装在任何手机中的应用程序列表。

[https://github.com/alexjlockwood/AppListLoader.git](https://github.com/alexjlockwood/AppListLoader.git)

祝你好运..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:04:49.787

[https://gist.github.com/1217628](https://gist.github.com/1217628)试试这个，在此之前只需阅读 CursorLoader 的文档

# mysql - 检索具有某些条件的相同列总和的记录

> ID：13898539
> 
> 赞同：0
> 
> 时间：2012-12-16T04:10:50.917
> 
> 标签：mysql, sql

我有两个表，`table1`和`table2`，具有相同的结构。列是`R`, `a`, `b`, `c`, `d`; `a`, `b`, `c`,`d`是`INT`s 和`R`是`VARCHAR`.

我需要所有`R`的 s 其中和的总和小于 40 并且对于, 和`a`是`table1`相同的。`table2``b``c``d`

我执行的语句是：

```
SELECT table1.R FROM table1,table2 where
table1.a + table2.a <40 or
table1.b + table2.b <40 or 
table1.c + table2.c <40 or 
table1.d + table2.d <40; 
```

但它给出了意想不到的结果。返回的行数远远大于两个表的记录数之和。

```
 table1                   table2
R   a   b   c   d            R      a     b    c    d
i1 45  28  29  22           i1      8   20   13    8
i2 28  28  29  30           i2      12   12  16     20 
i2 28  28  10  30           i2      12   12  16     20 
i2 28  5  29  30            i2      12   12  16     20 
i2 28  28  10  30           i2      12   12  16     20 
i2 28  28  29  30           i2      15   15  10     12 
i2 10  12  15  20           i2      8     3  6      12 

expected results 
i1

because table1.d+table2.d <40 for R = i1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:28:28.703

这并不完全清楚，但您可能想要的是：

```
SELECT table1.R FROM table1,table2 where
table1.R = table2.R and
(table1.a + table2.a <40 or
 table1.b + table2.b <40 or 
 table1.c + table2.c <40 or 
 table1.d + table2.d <40); 
```

看到这个[小提琴](http://www.sqlfiddle.com/#!2/9a9c8/1)

# wpf - 在 xaml 中访问属性背后的代码

> ID：13898549
> 
> 赞同：4
> 
> 时间：2012-12-16T04:13:01.993
> 
> 标签：wpf

这是我的第一篇文章，所以看起来不是那么好，但我会尽力而为......

我已经在网上搜索了几个小时，这听起来可能很愚蠢，但我一直无法找到答案。

我有 Window 类，在 .cs 文件中我有一些属性，例如

```
public ImageSource Obal { get; set; } 
```

然后在设计器中我添加了一些图像、按钮等。还设置了窗口的名称：**Name="Somename"**

我想知道如何访问该属性，例如，我可以为它设置一些图像的源属性，如下所示：

**图片名称="Blah" 来源="Obal"**

现在我知道我可以通过绑定设置 Source 值：

**Source="{绑定元素名称=karta, 路径=Obal}"**

但我必须每次都这样吗？无论如何，所有这些属性都来自 Window 类......而且我也在问，因为我想在 Image.Style 的 Storyboard 中更改**image.Source** ......**而且**我**不能**在那里使用绑定......

 ****我希望我很清楚，我提前感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:02:42.770

要访问 XAML 文件中属性背后的代码，您需要执行 3 个步骤：

1.  引用 xaml 文件中的命名空间，例如：

    ```
    xmlns:local="clr-namespace:AccessACodeBehindPropertyinXaml" 
    ```

2.  提供您在 Windows.Resources 标记中引用的命名空间的键。此键将允许访问您的 XAML 文件中引用的命名空间的任何类、属性，例如

    ```
    <Window.Resources>
            <local:ImageClass x:Key="imageClass"/>
    </Window.Resources> 
    ```

3.  现在您只需使用 Binding 类的 Source & Path 属性在 XAML 中绑定控件的属性，如下所示：

    ```
    <Label Content="{Binding Source={StaticResource imageClass}, Path=ImageName}" Name="label1" /> 
    ```

我编写了一个将类属性绑定到标签控件的示例应用程序。看一看

MainWindow.xaml.cs 文件：

```
namespace AccessACodeBehindPropertyinXaml
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();                       
        }
    }

    public class ImageClass
    {
        string m_ImageName;

        public ImageClass()
        {
            m_ImageName = "My Image Name";
        }
        public string ImageName
        {
            get
            {
                return m_ImageName;
            }
            set
            {
                m_ImageName = value;
            }
        }
    }
} 
```

主窗口.xaml

```
<Window x:Class="AccessACodeBehindPropertyinXaml.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:AccessACodeBehindPropertyinXaml"
        Title="MainWindow" Height="350" Width="525" Name="ImageWindow">
    <Window.Resources>
        <local:ImageClass x:Key="imageClass"/>
    </Window.Resources>
    <Grid>
        <Label Content="{Binding Source={StaticResource imageClass}, Path=ImageName}" Height="28" HorizontalAlignment="Left" Margin="159,126,0,0" Name="label1" VerticalAlignment="Top" Width="109" />
    </Grid>
</Window> 
```

如果您需要更多说明，请告诉我。****

# c# - 当我尝试更新我的访问数据库中的记录时出现错误

> ID：13898551
> 
> 赞同：1
> 
> 时间：2012-12-16T04:13:05.880
> 
> 标签：c#, ms-access, oledb, oledbcommand, executenonquery

我有一个连接到访问数据库的小程序，我想做的是通过编辑表单更新（编辑）选定的记录。当我执行我的代码时，我得到这个错误：

```
System.Data.OleDb.OleDbException was unhandled
  Message=Syntax error (missing operator) in query expression '5346 S. Eubank blvd'.
  Source=Microsoft Access Database Engine
  ErrorCode=-2147217900 
```

不用说，它是为地址字段..

这是我的代码块：

```
private void saveChangeBtn_Click(object sender, EventArgs e)
{
    Customer.SetCustID(Convert.ToInt32(editIdTB.Text));
    Customer.SetFirstName(editFirstNameTB.Text);
    Customer.SetLastName(editFirstNameTB.Text);
    Customer.SetAddress(editAddressTB.Text);
    Customer.SetPhoneNum(editPhoneTB.Text);
    Customer.SetEmail(editEmailTB.Text);

    using (OleDbConnection connect = new OleDbConnection(connectionString))
    {
        OleDbCommand cmd = new OleDbCommand();
        connect.Open();

        cmd.Connection = connect;
        cmd.CommandText = "UPDATE Customers SET [Customer ID]=" + Customer.GetCustId() +
            ", [First Name]=" + Customer.GetFirstName() +
            ", [Last Name]=" + Customer.GetLastName() +
            ", [Address]=" + Customer.GetAddress() +
            ", [Phone Number]=" + Customer.GetPhoneNum() +
            ", [Email Address]=" + Customer.GetEmailAddress() + 
            ", WHERE [Customer ID]=" + editIdTB.Text + "";
        cmd.ExecuteNonQuery();
        connect.Close();
        MessageBox.Show("Changes made successfully!", "Success!", MessageBoxButtons.OK);
    }
    this.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:20:00.323

我认为您遇到的问题是 WHERE 之前的逗号。尝试删除它并尝试一下。

如果您可以捕获您正在执行的确切 sql，并尝试在查询浏览器中运行它，那么诊断会更容易。

另外，我建议您在构建 sql 时使用 string.format。要获得更好的解决方案，请尝试使用 LINQ to SQL 或实体框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:35:22.597

试试这个

```
cmd.CommandText = "UPDATE Customers SET [First Name]='" + Customer.GetFirstName() +
            "', [Last Name]='" + Customer.GetLastName() +
            "', [Address]='" + Customer.GetAddress() +
            "', [Phone Number]='" + Customer.GetPhoneNum() +
            "', [Email Address]='" + Customer.GetEmailAddress() + 
            "' WHERE [Customer ID]=" + editIdTB.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T04:37:04.857

您需要在值周围加上引号。这应该解决这里的主要问题。

但是，这里有一个相当大的安全漏洞。google "sql injection" 你会看到一个坏人可以通过将恶意文本放入 editIfTB 文本框来严重破坏你的一周

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T15:03:52.010

除了安全漏洞之外，这种方式构建查询仍然会存在稳定性问题。只要您的数据字段之一包含撇号，SQL 就会再次中断（例如姓 O'Neill）。最佳实践是通过参数提供所有数据值；它避免了在所有这些单引号/撇号中连接的需要，不会对数据值敏感，也不会存在安全漏洞。

# ajax - 使用方法 post Codeigniter 更新数据库

> ID：13898555
> 
> 赞同：1
> 
> 时间：2012-12-16T04:14:51.873
> 
> 标签：ajax, post

我想要这样的作业：

数据库中有一个图像列表，对于每个图像，它都有一个 id、一个路径、一个评论。我想为每个图像实现一个文本输入，写入评论并将其更新到数据库中。

在数据库中，table:images，包含 id、path、comment。

这是代码：

**图像控制器：**

```
<?php
class Image extends CI_Controller {
function comment()
{
  $data=array(
    'id'=>$this->input->post('id'),
    'path'=>$this->imageModel->get($this->input->post('id'))->path,
    'comment'=>$this-input->post('comment')
    );
  $result=$this->imageModel->Update($data);

}

} 
```

**图像模型：**

```
<?php
class ImageModel extends CI_Model {
private  $table = 'images';
function ImageModel()
{
 // Call the Model constructor
 parent::__construct();
}

function get($id)
{
$query = $this->db->get_where( $this->table, array('id' => $id) );
return $query->result();
}

function Update($news){
$this->db->where('id',$news->id);
$this->db->update($this->table,$news);
 }
} 
```

**意见：**

```
img src="<?php echo base_url();?>/<?php echo $item->path;?>" title ="<?php echo $item->path;?>" rel="<?php echo $item->comment;?>" 
  class ="tips" width=200 height=200></img>

<span><?php echo $item->id;?> :<input type="text" id="<?php echo $item->id;?>"/>
   <input type="submit" id="send<?php echo $item->id;?>"

<script type='text/javascript'>
        window.addEvent("domready",function(){
          $("send<?php echo $item->id;?>").addEvent("click",function(){
            if($("<?php echo $item->id;?>").value==''){
                  alert('Please entre your comment!');
                  return;
                }
            var myRequest = new Request({
                method: 'post',
                url: 'http://localhost/public_html/CodeIgniter/index.php/image/comment',
            onSuccess: function(responseText){
            alert(responseText);
            },
            onFailure: function(){
            alert( 'Erreur!');
            }
        });
            myRequest.send('id='+<?php echo $item->id;?> +'&comment='+$("<?php echo $item->id;?>").value);
    });
    });
    </script> 
```

问题是：当我在文本中写一些东西并单击提交时，它总是说“Erreur！”。我花了2天时间。有人可以帮忙吗？？？

# php - 为什么这个查询在 Mysql 中不起作用？

> ID：13898558
> 
> 赞同：1
> 
> 时间：2012-12-16T04:15:15.300
> 
> 标签：php, mysql, codeigniter

** 我英语不好，很抱歉。

我试图通过下面的查询获取两个日期的记录，但它返回一个空结果。

```
SELECT * FROM orders WHERE 
DATE(dateadd) = '2012-06-03' and DATE(dateadd) = '2012-06-04' 
```

更新：

**dateadd**是我的日期时间列，默认为：**0000-00-00 00:00:00**

我使用 DATE 仅获取日期（不包括时间）。我想获取特定日期的记录，而不是介于两者之间。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T04:16:45.077

您应该使用`OR`而不是`AND`，日期怎么可能`2012-06-03`同时`2012-06-04`出现？

```
SELECT * FROM orders WHERE 
DATE(dateadd) = '2012-06-03' OR DATE(dateadd) = '2012-06-04' 
```

# jquery - 工作验证提示，工作字计数器但不能一起工作

> ID：13898562
> 
> 赞同：0
> 
> 时间：2012-12-16T04:15:45.530
> 
> 标签：jquery

我在表单的文本区域中添加了一个单词计数器......它是这样的......

```
<div>
  <label>About you:</label>
  <textarea id="qualification" class="textarea hint_needed" rows="4" cols="30" ></textarea>                     
  <span class="hint">explain about you</span>
  <script type="text/javascript">
    $("textarea").textareaCounter();
  </script>
</div> 
```

我的问题是当我像这样添加 textaracounter() 时，我的验证提示不起作用..当我删除计数器功能验证提示时......

这是提示消息的jquery ..

```
$(".hint").css({ "display":"none" });
$("input.hint_needed, select.hint_needed, textarea.hint_needed, radio.hint_needed").on("mouseenter", function() {
$(this).next(".hint").css({ "display":"inline" });
}).on("mouseleave", function() {
$(this).next(".hint").css({ "display":"none" });
}); 
```

这是单词计数器..

```
(function($){
    $.fn.textareaCounter = function(options) {
        // setting the defaults
        // $("textarea").textareaCounter({ limit: 100 });
        var defaults = {
            limit: 150
        };  
        var options = $.extend(defaults, options);

        // and the plugin begins
        return this.each(function() {
            var obj, text, wordcount, limited;

            obj = $("#experience");
            obj.after('<span style="font-weight: bold; color:#6a6a6a; clear: both; margin: 3px 0 0 150px; float: left; overflow: hidden;" id="counter-text">Max. '+options.limit+' words</span>');

            obj.keyup(function() {
                text = obj.val();
                if(text === "") {
                    wordcount = 0;
                } else {
                    wordcount = $.trim(text).split(" ").length;
                }
                if(wordcount > options.limit) {
                    $("#counter-text").html('<span style="color: #DD0000;">0 words left</span>');
                    limited = $.trim(text).split(" ", options.limit);
                    limited = limited.join(" ");
                    $(this).val(limited);
                } else {
                    $("#counter-text").html((options.limit - wordcount)+' words left');
                } 
            });
        });
    };
})(jQuery); 
```

谁能告诉我那里有什么问题？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:43:06.630

我将评论代码：

```
(function($) {
    var defaults = {
        limit: 150
    };

    $.fn.textareaCounter = function(options) {
        // setting the defaults
        // $("textarea").textareaCounter({ limit: 100 });
        var options = $.extend(defaults, options);

        // and the plugin begins
        return this.each(function() {
            var obj, text, wordcount, limited, counter_text;
            //TEXTAREA, current one
            obj = $(this);
            //setup counter text only once, do not recreate it
            if (counter_text === undefined) {
                //better to set class here, but will work
                counter_text=$('<span style="font-weight: bold; color:#6a6a6a; clear: both; margin: 3px 0 0 150px; float: left; overflow: hidden;" id="counter-text">');
                obj.after(counter_text);
            }
            counter_text.text('Max. ' + options.limit + ' words');
            //for better handling of paste you can refer to my other answer: http://tinyurl.com/bvtjoa7
            obj.bind('keyup input',function(e) {
                text = obj.val();
                if (text === "") {
                    wordcount = 0;
                } else {
                    wordcount = $.trim(text).split(" ").length;
                }
                //I added the code here to check for space key, for better usability
                if (wordcount > options.limit || (wordcount==options.limit && e.keyCode == 32 )) {
                    counter_text.html('<span style="color: #DD0000;">0 words left</span>');
                    limited = $.trim(text).split(" ", options.limit);
                    limited = limited.join(" ");
                    $(this).val(limited);
                    return false;
                } else {
                    counter_text.html((options.limit - wordcount) + ' words left');
                }
            });
        });
    };
})(jQuery);

//HINT
$(".hint").css({
    "display": "none"
});

$("input,textarea,select").filter('.hint_needed').on("mouseenter", function() {
    $(this).nextAll(".hint").css({
        "display": "inline"
    });
}).on("mouseleave", function() {
    $(this).nextAll(".hint").css({
        "display": "none"
    });
});  
//END OF HINT

//run with limit of 3 words
$("textarea").textareaCount({
  limit: 3
});​ 
```

[演示](http://jsfiddle.net/oceog/MfHMB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:45:04.917

[http://jsfiddle.net/QD3Hn/14/](http://jsfiddle.net/QD3Hn/14/) `// without improvements`

```
(function($){
    $.fn.textareaCounter = function(options) {
        // setting the defaults
        // $("textarea").textareaCounter({ limit: 100 });
        var defaults = {
            limit: 150
        };  
        var options = $.extend(defaults, options);

        // and the plugin begins
        return this.each(function() {
            var obj, text, wordcount, limited;

            obj = $(this);
            obj.next(".hint").after('<span style="font-weight: bold; color:#6a6a6a; clear: both; margin: 3px 0 0 150px; float: left; overflow: hidden;" id="counter-text">Max. '+options.limit+' words</span>');

            obj.on("keyup keydown", function() {
                text = obj.val();
                if(text === "") {
                    wordcount = 0;
                } else {
                    wordcount = obj.val().split(" ").length;
                }
                if(wordcount == options.limit) {
                    obj.next(".hint").next("#counter-text").html('<span style="color: #DD0000;">0 words left</span>');
                    limited = $.trim(text).split(" ", options.limit);
                    limited = limited.join(" ");
                    $(this).val(limited);
                } else {
                    obj.next(".hint").next("#counter-text").html((options.limit - wordcount)+' words left');
                } 
            });
        });
    };
})(jQuery);
$(document).ready( function() {
    $(".hint").css({ "display":"none" });
    $("input.hint_needed, select.hint_needed, textarea.hint_needed, radio.hint_needed").on("mouseenter", function() {
    $(this).next(".hint").css({ "display":"inline" });
    }).on("mouseleave", function() {
    $(this).next(".hint").css({ "display":"none" });
    });
        $("textarea").textareaCounter();
    });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T04:51:18.933

主要问题是您的 textarea 插件在 textarea 中添加了一个元素`after`。这意味着`next()`in your`mousenter`不是`hint`您期望的类，因为新添加的跨度。

`next()`寻找下一个直接兄弟...现在是 textAreaCounter 跨度

如果您要将 textArea 包装在另一个元素中，例如 span，您可以将提示代码更改为：

```
$(".hint_needed").on("mouseenter mouseleave", function() {
    var $this=$(this), $next= $this.is('textarea') ? $this.parent().next() : $this.next();

    $next.toggle();
}); 
```

演示：http: [//jsfiddle.net/QD3Hn/12/](http://jsfiddle.net/QD3Hn/12/)

# java - Java 如何确定通过隐式类型调用调用什么方法？

> ID：13898563
> 
> 赞同：4
> 
> 时间：2012-12-16T04:15:44.950
> 
> 标签：java, methods, type-conversion

这个问题是在我和我的朋友们准备考试的时候出现的。在调用静态分配变量的方法时，我们注意到了奇怪的行为。

***代码>单词，所以我们开始：***

```
class C {

    public void a(double x) {}
}

class D extends C {
    void b() {} 
}

class F extends D {

    void a(int i) {} 
    void a(double d) {} 
```

现在，做

```
D foo = new F();
foo.a(1); 
```

这会带来什么？好吧..它在**F中运行方法****a(double)**！

 **这是我们认为发生的事情：

1.  程序首先在静态类型**D**中寻找**一个**：那里什么都没有。
***   转到它的超类**C**。没有找到**a(int)**而是找到**a(double)**。*   决定这是我的意思的签名（即a（双）），但首先，在所有这些搜索之后，让我们先看看它说的*动态*类型！*   在 F 中运行**a(double) ！****

 **它是否正确？这意味着它爬上了层次结构以找到一些适合从 int 到 double 的类型转换的方法。在此之后，它检查动态类型是否具有这个新解释的签名。

我注意到如果我添加

```
void a(int) {} 
```

** 在**C 类**中，运行上面的调用时，它会在**F**中给我**a(int) ！**

 **有人可以解释一下这个过程中涉及的机制吗？为什么代码会以这种方式运行/编译？这背后的技术原因是什么？关于类似情况，还有什么需要注意的吗（）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T04:27:34.267

原因是因为 Java 是静态类型的。参数类型的调度是在编译时完成的，而不是运行时。

编译代码时，编译器会看到您正在调用`a`在静态类型对象上命名的方法`D`。它在 中查找兼容的方法`D`，并找到一个方法（继承自`C`）。它生成代码以执行对`C.a(double)`.

在运行时，虚拟调用调度对象的实际类型（不是参数！），所以它最终调用`F.a(double)`，因为它覆盖了`C.a(double)`.

对象的运行时类型是`F`并且`F`碰巧具有不同的方法，如果它在编译时已知，则该方法将是有效的这一事实是无关紧要的。如果你想要这种行为，你需要反思。

如果您添加了`C.a(int)`，编译器将看到名为`a`in 的两种不同方法`D`，并根据重载规则选择采用 int 的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T04:28:06.973

要调用的方法在编译时解析，而不是运行时解析。由于编译器只在编译时知道 foo 是 a `D`，因此只有一个 method `a(double)`，即被调用的方法。然而，准确`a(double)`地调用哪个对象是动态完成的（在运行时），这就是为什么`F.a(double)`会被调用而不是`C.a(double)`.

这称为*单一调度*：调用的方法在它被调用的对象上是动态的，但在其参数类型上是静态的。

如果你`C`完全删除了那个方法，它就不会调用`a(int)`，`F`它只会编译失败，说它找不到那个方法。******

# c# - 在我将其设置为某物后，属性被设置为 null 吗？

> ID：13898566
> 
> 赞同：0
> 
> 时间：2012-12-16T04:16:11.953
> 
> 标签：c#

我有一个自定义控件，其中一个属性是：

```
public List<SelectionBox> Boxes { get; set; } 
```

在控制构造函数中，我有：

```
this.Boxes = new List<SelectionBox>();
this.Boxes.Add(new SelectionBox("", Color.Red)); 
```

在 InitializeComponent() 之前，如果我在此处设置断点，则表明 Boxes 是具有 1 个元素的 SelectionBox 列表。但是在我的 OnPaint 覆盖内部，如果我执行以下操作，它已被设置为 null 并出现一些奇怪的行为：

```
foreach (SelectionBox box in Boxes) {} 
```

它不会抛出错误，它只是在那里退出函数。我究竟做错了什么？

选择框结构：

```
[Serializable]
public struct SelectionBox
{
    public string Name;
    public Color Colour;
    public Rectangle BoxRectangle;
    public bool IsActive;

    public SelectionBox(string name, Color colour)
    {
        this.Name = name;
        this.Colour = colour;
        this.IsActive = false;
        this.BoxRectangle = new Rectangle(0, 0, 0, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:27:54.133

如果您需要追踪一个属性是如何神秘地将其值设置为 null，请使用显式 get/set 实现重写该属性，在 setter 中放置一个断点，并在断点被命中时检查调用堆栈

```
private List<SelectionBox> _boxes;
public List<SelectionBox> Boxes { get { return _boxes; } set { _boxes = value; } } 
```

# delphi - 如何在调整 DSPack TVideoWindow 的大小时防止黑色背景

> ID：13898571
> 
> 赞同：2
> 
> 时间：2012-12-16T04:17:33.240
> 
> 标签：delphi, resize, directshow, dspack

在播放视频时调整窗口大小时有没有办法防止黑色背景？

我尝试将 TVideoWindow.Color 和 TVideoWindow.Canvas.Color 设置为白色，但每次调整窗口大小时，都会在调整大小操作期间出现黑色背景。

当加载新视频时，这也会在短暂的瞬间发生。

# iphone - iOS - 从 Chrome 打开一个带有 URL 方案的应用程序

> ID：13898573
> 
> 赞同：14
> 
> 时间：2012-12-16T04:18:36.093
> 
> 标签：iphone, objective-c, google-chrome, mobile-safari

我已经阅读了许多关于如何从`URL scheme`（例如，this [blog ）打开应用程序的博客和示例，当我从](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)**移动 safari**调用我的应用程序时，它似乎工作得很好。例如，当我调用`testapp://some.data.here`移动 safari 时，它会打开我的`testapp`，我可以解析出 some.data.here。

但是，当我调用`testapp://some.data.here`iOS- **Chrome**时，它​​只是搜索该术语而不是调用应用程序。

有没有办法让 iOS **Chrome像****移动 safari**一样将 URL 识别为已注册的应用程序？

当我在谷歌上搜索这个主题时，我看到很多关于如何从应用程序中打开 chrome 中的 url 的评论，但反之则不然。

有没有人遇到过这个？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:59:57.143

由于 Chrome 应用程序的开发方式，目前**看来**，如果没有越狱，这是不可能的（即使那样，也不容易）。你应该去找[Google Chrome iOS 团队的 bug](https://www.google.com/intl/en/chrome/browser/mobile/ios_team.html)来解决这个问题（例如，在谷歌搜索之前尝试在所有已注册的应用程序中使用 URL 方案打开）。抱歉，我没有更多用处，但似乎没有一个简单的方法解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T21:52:58.413

有一个复杂的解决方法，但您可能不会对构建它感到太兴奋，因为它涉及托管 Web 服务器以动态生成具有适当重定向的页面。这是对我们在[Branch](https://branch.io)构建的内容的过度简化表示。这包括一些帮助您入门的代码，尽管 Web 服务器需要一些此处未描述的设置。

1.  而不是 testapp://some.data.here，您将链接到[http://yoursite.com/hosted-redirect/some.data.here](http://yoursite.com/hosted-redirect/some.data.here)。

2.  你的服务器应该监听 /hosted-redirect 路由，在此处获取 some.data.here 并构建以下页面（此处为正文）：

[![代码](../Images/1a89a0f9530c31948f6d0de398452029.png)](https://i.stack.imgur.com/KdMSJ.png)
[（来源：[derrrick.com](http://derrrick.com/stackoverflow/code.png)）]

因此，您的服务器必须生成并响应此页面，并在任何时候请求[http://yoursite.com/hosted-redirect/some.data.here](http://yoursite.com/hosted-redirect/some.data.here)时填写 some.data.here 。

轻量级节点应用程序可以使用单个文件执行此操作。

我刚刚为我的一个应用程序测试了一个静态文件，这绝对有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-24T04:35:27.493

我们可以简单地使用 JavaScript打开**深层链接，它在 iOS 的 chrome 和 safari 中都可以正常工作。**如果您想使用 JavaScript 实现自定义 url 方案，您可以使用以下代码： *document.location = "testapp://"*

# bash - 批处理到 Bash 转换

> ID：13898574
> 
> 赞同：1
> 
> 时间：2012-12-16T04:19:19.343
> 
> 标签：bash, batch-file

我需要知道这个批处理脚本到 Bash 中：

```
@echo off
set /p name= Name? 
findstr /m "%name%" ndatabase.txt
if %errorlevel%==0 (
cls
echo The name is found in the database!
pause >nul
exit
)
cls
echo.
echo Name not found in database.
pause >nul
exit 
```

我是 Linux 内核的新手，所以从一个简单的发行版开始 - Ubuntu 12.10。我的问题是我不太了解 Bash Script，因为我非常习惯 Batch Script 格式；这对我的 C++ 来说显然是个坏习惯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:45:59.213

我认为它是这样的：

```
#!/bin/bash

read -p "Name? " name

clear

if [ $(grep -qF "$name" ndatabase.txt) ]
then
    read -p "The name is found in the database!" PAUSE

else
    read -p "Name not found in database." PAUSE
fi 
```

和一个较短的版本：

```
#!/bin/bash
read -p "Name? " name
[ $(grep -qF "$name" ndatabase.txt) ] && echo "The name is found in the database!" || echo "Name not found in database." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:40:05.060

嗯，“Korn shell”与 Bash 密切相关（参见 Rosenblatt 的 oreilly 'Learning the Korn Shell'）

```
@echo off             ::: has no linux/bash meaning  
set /p name= Name?    ::: read input from prompt 'name?' --- _'echo -n "name?"; read TERM;'_  
findstr /m "%name%" ndatabase.txt ::: _grep $TERM ndatabase.txt_   

if %errorlevel%==0  ::: _if (($! == 0 )); then_   enclosed with _fi_; the (( means numeric   
cls                 ::: no real linux/bash meaning (maybe multiple _echo_ statements  
pause               ::: can be faked with _read_  
_exit_ translates rather well.        
_$$_=process id (aka pid) _$@_ commandline arguments, there are others : _$!_ is last exit code
var=_$(command)_     var (with **NO** dollarsign assumes the contents of _command_'s output 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T05:36:09.600

我想这是尽可能直接的：

```
#!/bin/bash
read -p "Name? " name
fgrep -le "$name" ndatabase.txt 
if [ $? = 0 ]; then
    clear
    echo "The name is found in the database!"
    read -n1 >/dev/null
    exit
fi
clear
echo
echo "Name not found in database."
read -n1 >/dev/null
exit 
```

正如其他人所提到的，尽管有更短、更优雅的解决方案。

# jquery - 方法“.scrollTop()”的结果值？- jQuery，HTML

> ID：13898577
> 
> 赞同：0
> 
> 时间：2012-12-16T04:20:12.053
> 
> 标签：jquery, html

# 问题：

**示例链接：http:** [//jsfiddle.net/j65yQ/](http://jsfiddle.net/j65yQ/)

```
/* First: */
/* Set the Position of the Division Tag to Fixed When Reaching the Top of the Window While Scrolling */

$(window).scroll(function(){ 

    var u_div_cn = $('div#container_nav');
    var u_os_top_read = $('div#container_nav').offset().top;

    if ($(window).scrollTop() > u_os_top_read) {      
    u_div_cn.addClass('set_position');};

}); 
```

滚动时会得到`resulting value`哪个？`.scrollTop()`

上面示例中的`division tag`确实将其位置属性设置为固定，`conditional if statement`当它到达顶部时`window`。

然而，为什么在这个例子中***“大于”*** `.offset().top`有效，而***“等于”*** `zero`却在多次尝试后无效？

# 作为“等于”的示例：

```
$(window).scroll(function(){    

    var u_div_cn = $('div#container_nav');
    var u_div_cn_os_top = $('div#container_nav').scrollTop();

    if ( u_div_cn_os_top ==  0 ) {      
        u_div_cn.addClass('set_position');
    };

}); 
```

我问的原因是，因为我想到了`equals to`在.`top: 0``window`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:27:47.463

该`scrollTop`函数返回内容向下滚动了多少像素，即窗口上方有多少像素。

滚动时，您不会收到滚动内容的每个像素的事件。如果使用`==`算子检查偏移量，大部分时间都会错过。使用`>`操作符可确保元素在其顶部移出顶部窗口时立即固定。

如果将值从`scrollTop`零进行比较，则只有向下滚动然后向上滚动到顶部时才会如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:25:52.230

这是因为当窗口滚动到分区标签之外时，它会添加一个类来修复视口上的问题。

# java - 使 Java 中的 Scanner 对象的西里尔字母可读

> ID：13898578
> 
> 赞同：2
> 
> 时间：2012-12-16T04:20:11.850
> 
> 标签：java, encoding

我的问题是，当我在扫描仪中输入西里尔字母时，当我尝试将其打印出来时，它会变成 gobbldygook（例如，输入 ходить，输出 = Ö–æ–¥–∏）。我有西里尔字母的 Ascii 值以及存储在文本文件中的 UTF-8 值。我很确定 System.in 是错误的，那么我到底应该怎么做呢？

```
Scanner s = new Scanner(System.in);
String line = s.nextLine();
System.out.println(line); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T13:34:23.993

（我提前为我的英语道歉）我遇到了同样的问题。我使用“eclipse”，文本文件编码是 UTF-8。当我从控制台输入西里尔文文本并尝试打印时，输出结果与您的相似。

```
Scanner input = new Scanner(System.in,  "UTF-8");
      String word = input.nextLine();
      System.out.println(word); 
```

结果：

```
дума
РґСѓРјР° 
```

这两行必须相同，但它们不是。

我的决心是：

```
Scanner input = new Scanner(System.in,  "UTF-8");
      String word = input.nextLine();

      try {
        word = new String(word.getBytes("windows-1251"), Charset.forName("UTF-8"));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      System.out.println(word); 
```

结果：

```
дума
дума 
```

这是正确的结果。

很抱歉，我的英语很差...希望对您有所帮助。

# java - Java - 异步读取？

> ID：13898579
> 
> 赞同：-4
> 
> 时间：2012-12-16T04:20:14.273
> 
> 标签：java, sockets, asynchronous, synchronization

**服务器：**有一个服务器保存一组数据，这些数据可以被某个客户端标记（服务器给它一个颜色）。因此，它应该由客户端接收一个事件，处理它，并使用数组的新状态更新所有客户端。该阵列是所有客户共享的扫雷阶段。

**客户端：**它有几个按钮，每个按钮都指向数组中的一个位置。每当按下按钮时，它首先与服务器同步（使用[Cristian 算法](http://en.wikipedia.org/wiki/Cristian%27s_algorithm)），然后向服务器发送一个事件。它还应该随时等待接收更新，当这种情况发生时，按钮也应该更新。

**问题：**如果我希望客户端永久等待更新并且不与任何其他接收数据混合，我该怎么办？假设客户端收到一个`Long`用于同步时钟的消息，那么任何等待接收更新的客户端都不应该收到`Long`.

预先感谢您！

编辑：我使用 TCP 作为我的协议。另外，我添加了一些关于服务器和客户端如何管理事件的伪代码。

使用一些伪代码我应该更好地解释这一点：

游戏`main()`

```
Create an event handler, and make it run as a separate thread
while amount of players < 2
    Receive a connection
    Create an instance that represents the player
    Send the player some data it will need
    Register the player as an observer of the game
end while
for each player
    Tell them the game is ready to start
    Make the player run in a separate thread
end for each
Mark the game as started
Notify each of the observers about the game 
```

播放器`run()`

```
while true
    Wait for a time request
    Send the player the current time
    Wait for a button click
    Insert the event into a global list of events
end while 
```

事件处理程序`run()`

```
while true
    Wait 50 ms
    Order the event list by the time marks
    Get and remove the first element in the list
    Tell the game the button was pressed, also tell it who pressed it
    Ask the game to notify the observers
end while 
```

目前，我的客户这样做：

客户`main()`

```
Connect to the server
Receive the basic needed data
Wait for a confirmation to start the game
Receive the stage (an array with the positions in the server)
Display one button for each element in the received array
Append an action listener to the button
if the button is pressed
    Request the current time to the server
    Adjust the time
    Send a button click event to the server
    Wait to receive the stage again
    Update the stage
end if 
```

问题来了。如何将服务器接收时间的时刻和舞台分开，这样两者都不能互相看？我的意思是，服务器可以按任何顺序发送时间或阶段，客户端应该知道它正在接收什么。我迷路了，我不知道该怎么办......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:13:23.017

您是否查看或考虑过 JMS？您可以参考[JAVA EE 6 DOC](http://docs.oracle.com/javaee/6/tutorial/doc/bncdq.html)开始使用 JMS。

# mysql - MySQL 在表上创建更新/插入触发器

> ID：13898583
> 
> 赞同：0
> 
> 时间：2012-12-16T04:21:43.727
> 
> 标签：mysql, triggers

是否可以为此在mysql中创建触发器：

我有一张这样的桌子

```
Column1_id Column2_val
 1            2
 2            2 
```

第二张桌子

```
Column1_id1 Column2_id2
    1           2 
```

如果两行具有相同的值，那么几乎在更新或插入时，`Column2_val`我想将它的 id 插入到第二个表中。任何帮助将不胜感激。

我写了这个，但它似乎没有工作我做错了什么？

```
BEGIN
    set @user_id_update =  (SELECT Column1_id from users where in_play = 2 LIMIT 1);
    INSERT INTO player_pairs(PLAYER1_ID, PLAYER2_ID, GAME_ID) 
    VALUES (new.Column1_id, @user_id_update, 2); 
    UPDATE users  SET in_play = 1 where Column1_id in(@user_id_update, new.user_id);
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T06:57:28.157

尝试这样的事情

```
DELIMITER $$

    CREATE TRIGGER test AFTER INSERT, UPDATE ON `table1`
    FOR EACH ROW BEGIN
      SET x = (SELECT count(*) FROM `table1` WHERE Column2_val=NEW.Column2_val)
      IF (x > 1) THEN
            INSERT INTO `table2` VALUES(NEW.Column1_id, NEW.Column2_val)
      END IF;
    END$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-07T20:58:22.893

试试这个，让我知道：

```
DELIMITER $$

    CREATE TRIGGER test AFTER INSERT, UPDATE ON `table1`
    FOR EACH ROW BEGIN
      IF (select count(Column2_val) from `table1` WHERE Column2_val=NEW.Column2_val> 0 ) THEN
            INSERT INTO `table2` VALUES(NEW.Column1_id, NEW.Column2_val)
      END IF;
    END$$

DELIMITER ; 
```

但是，如果您想在第一个表的任何列上有任何重复记录，您可以将此列设置为“唯一”。

# line-breaks - 在 IRC 消息中插入换行符

> ID：13898584
> 
> 赞同：17
> 
> 时间：2012-12-16T04:22:15.853
> 
> 标签：line-breaks, irc

我正在尝试使用该`PRIVMSG`命令以编程方式发送 IRC 消息。IRC 用于`CRLF`分隔单独的命令，因此“enter”是每个命令的结尾。

我想发送一条带有换行符的消息，以便收件人（人类 IRC 用户）看到带有换行符的响应。这可能吗？我可以使用其他换行符吗？我应该在换行符处拆分消息并将它们作为多条消息发送吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-16T04:36:07.680

IRC 协议不允许在其消息中使用 CR 和/或 LF，除了末尾的 CRLF。有关详细信息，请参阅[RFC 1459](https://www.rfc-editor.org/rfc/rfc1459#section-2.3.1)。

# variables - 球拍可变变量

> ID：13898589
> 
> 赞同：4
> 
> 时间：2012-12-16T04:23:38.790
> 
> 标签：variables, scheme, racket, mutable

我是球拍新手，遇到了一个需要可变数值变量的实例

下面是一个通过一串位（101011 ....）工作的函数，如果遇到 1 会更改名为“value”的数字变量，如果遇到 0 则必须更改相同的变量“value”。因此，当我们到达一个字符串的末尾时，我们应该以“值”的总和结束。

```
(define (implode bstr value)
        (for ([c (string-length bstr)])
           (display (string-ref bstr c))
      (if (eqv? (string-ref bstr c) #\1) (displayln (+ (/ value 3) 17))
          (displayln (/ value 3))))) 
```

如果没有 mtauble 变量，我如何在 prgram 运行时更改此变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T21:27:09.943

球拍支持突变。例如：

```
#lang racket

;; count-whales: (listof string) -> number
;; Returns a count of the number of whales in lst.
(define (count-whales lst)
  (define c 0)
  (for ([thing lst])
    (when (equal? thing "shamu")
      (set! c (add1 c))))
  c)

;; Example:
(count-whales '("shamu" "donald duck" "shamu")) 
```

您可能习惯于以这种方式查看循环，其中变异允许我们记录一些运行值。使用突变进行写作没有障碍。但话虽如此，上述功能并不是惯用的球拍。Racketeer 将改为使用可以**累积**值的循环，而不是使用突变。

以下是使用累加器编写上述函数时的样子：

```
#lang racket

;; count-whales: (listof string) -> number
;; Returns a count of the number of whales in lst.
(define (count-whales lst)
  (for/fold ([c 0])
            ([thing lst])
    (if (equal? thing "shamu")
        (add1 c)
        c)))

;; Example:
(count-whales '("shamu" "donald duck" "shamu")) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T04:42:52.447

正如已经建议的那样，这个问题可以很容易地使用递归来解决，而无需使用可变变量。这是在 Scheme 中编写过程的首选方式：

```
(define (implode bstr value)
  (let loop ((value value)
             (lst (string->list bstr)))
    (cond ((null? lst)
           value)
          ((char=? (car lst) #\1)
           (loop (+ (/ value 3) 17) (cdr lst)))
          ((char=? (car lst) #\0)
           (loop (/ value 3) (cdr lst)))
          (else (error "unexpected char" (car lst)))))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T04:58:39.863

我不确定该`implode`功能的目标是什么，但是是的，您绝对不需要使用突变。Racket 是一种高级语言，具有尾调用消除功能，这意味着通过 Óscar 示例中所做的本地函数循环是编译器稍后将转换为使用突变或任何需要的有效代码的东西。

但更重要的是，展示如何编写更简洁的 Racket 代码可能更接近突变的心理模型。这里的主要成分是[`for/fold`](http://docs.racket-lang.org/reference/for.html#%28form._%28%28lib._racket/private/base..rkt%29._for/fold%29%29)，它正在执行“for 循环”，但在整个循环中使用“状态变量”。这里引用了“状态”，因为它实际上并不存在——它实际上是一个宏，可以扩展为与 Óscar 示例中类似的循环。我还以一些小而有用的方式改进了代码的其他部分：您可以直接迭代字符串，不需要索引；那里并不真正需要，但它使`in-string`迭代更明确，使其更快，并且如果`bstr`不是字符串则会抛出错误；您可以使用`case`检查您所在的角色；只要你使用它，如果一个字符既不是“0”也不是“1”，最好抛出一个错误。

这是它的样子：

```
(define (implode bstr)
  (for/fold ([value 0]) ([c (in-string bstr)])
    (case c
      [(#\0) (+ (/ value 3) 17)]
      [(#\1) (/ value 3)]
      [else (error 'implode "bad character: ~e" c)]))) 
```

尽管如此，这会产生一些奇怪的结果，但同样，我不确定这个函数应该做什么......

# python - Reportlab：鸭嘴兽中是否可以有内部链接？

> ID：13898593
> 
> 赞同：4
> 
> 时间：2012-12-16T04:24:01.037
> 
> 标签：python, reportlab, platypus

我知道我可以在内部与画布链接，但我的整个文档都是用鸭嘴兽设置的。Platypus 是否支持内部链接？如果没有，迁移到画布有多难？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T12:18:59.537

您可以使用段落内标记来创建锚点 ( `<a>`tag) 和链接 ( `<link>`tag)，如[*ReportLab 2.6 用户手册*](http://www.reportlab.com/docs/reportlab-userguide.pdf)[PDF的第](http://www.reportlab.com/docs/reportlab-userguide.pdf)*6.3 节段落内标记*（第 6 章，第 72 页）中所述，其中还包含以下示例：[](http://www.reportlab.com/docs/reportlab-userguide.pdf)

 *```
This <a href="#MYANCHOR" color="blue">is a link to</a> an
anchor tag ie <a name="MYANCHOR"/><font color="green">here</font>.
This <link href="#MYANCHOR" color="blue" fontName="Helvetica">is
another link to</link> the same anchor tag. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-11T02:27:08.120

一种受[https://www.blog.pythonlibrary.org/2014/03/10/reportlab-how-to-create-custom-flowables/](https://www.blog.pythonlibrary.org/2014/03/10/reportlab-how-to-create-custom-flowables/)启发的方法。

创建一个继承自 Flowables 的自定义类，可以添加到“故事”中

```
class flowable_bookmark(Flowable):
    def __init__(self, x=0, y=0, width=10, height=10, bookmark_name = "", text=""):
        Flowable.__init__(self)
        self.x = x
        self.y = y
        self.width = width
        self.height = height
        self.bookmark_name = bookmark_name
        self.text = text

    def draw(self):
        self.canv.drawString(self.x, self.y, self.text)
        self.canv.bookmarkPage(self.bookmark_name) 
```

用法：

```
my_anchor = flowable_bookmark("MYANCHOR", text=" ")
self.story.append(my_anchor) 
```*

# vba - VBA 日期和保存

> ID：13898597
> 
> 赞同：0
> 
> 时间：2012-12-16T04:25:59.133
> 
> 标签：vba

我正在尝试构建一个宏，将当前日期（2012 年 12 月 15 日）放在工作表的一个单元格（比如 A1）中，将工作表另存为 12.15.2012，然后放置昨天的日期（2012 年 12 月 14 日）在同一个单元格中，保存工作表等等。我怎么做？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:34:37.107

将日期函数与 Format() 结合使用：

```
'This puts yesterdays date in cell A1 and saves the workbook with that format
Private Sub test()
    Range("A1").Value = Format(DateAdd("d", -1, Now()), "dd/MM/yy")
    ActiveWorkbook.SaveAs "something" & Format(DateAdd("d", -1, Now()), "dd/MM/yy")
End Sub 
```

现在您可以遍历它并开展您的业务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:28:41.700

您只想保存工作表还是工作簿？对于工作表，您可以使用：

```
Range("A1").Value = Format(Now(), "mm/dd/yyyy")
ActiveSheet.Name = Format(Range("A1").Value, "mm.dd.yyyy")
Range("A1").Value = Format(DateAdd("d", -1, Range("A1").Value), "dd/mm/yyyy") 
```

请注意日期格式，不允许使用“/”作为文件名或工作表名。

# asp.net-mvc-4 - 使用 JsonResult 包含渲染的部分视图 - XSS 注入风险？

> ID：13898598
> 
> 赞同：0
> 
> 时间：2012-12-16T04:26:33.093
> 
> 标签：asp.net-mvc-4, partial-views, xss

我需要类似这里描述的东西（一种将部分视图呈现为字符串的方法，因此我可以将它与其他一些数据一起作为 JsonResult 传递）

[将视图渲染为字符串](https://stackoverflow.com/questions/483091/render-a-view-as-a-string/1241257#1241257)

最佳答案似乎运作良好，但我想知道这是否会为 XSS CSS 注入打开一个向量？

如果是这样，是否会像在返回结果之前对结果进行 html 编码一样简单以防止它发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:46:25.753

无论您使用的是 Json、HTML 部分视图还是 HTTP **POST**操作都应该提供一些 XSS 防御。这意味着 Get 提供了相同的令牌。通常在 Razor... 添加令牌，然后在 POST 操作中检查。

```
Html.BeginForm
 @Html.AntiForgeryToken()

 [HttpPost]
 [ValidateAntiForgeryToken]
  public AResultTypeHere SomeActionMethod(myModel model) 
```

或者您使用自己的隐藏字段并实施一些检查。所以是的，请确保 HTTP 帖子受到保护。 [http://www.veracode.com/security/xss](http://www.veracode.com/security/xss) 作为入门。

还有关于该主题的基于 MVC 的材料，例如 [http://weblogs.asp.net/jgalloway/archive/2011/04/28/preventing-javascript-encoding-xss-attacks-in-asp-net-mvc.aspx](http://weblogs.asp.net/jgalloway/archive/2011/04/28/preventing-javascript-encoding-xss-attacks-in-asp-net-mvc.aspx)

# sql - 从 2 个视图中选择一个聚合列

> ID：13898600
> 
> 赞同：0
> 
> 时间：2012-12-16T04:27:21.440
> 
> 标签：sql, sql-server

我有两个视图查询：

第一种观点：

```
SELECT 
   t1.entity_id, t1.entity_name, 
   t2.order1, t2.order2, t2.order3, t2.order4, t3.date, t2.score
FROM table1 t1 
LEFT JOIN table2 t2 ON t1.entity_id = t2.entity_id 
LEFT JOIN table3 t3 ON t2.code = t3.code
WHERE 
   t1.entity_id = 1 
```

第二种观点：

```
SELECT 
   t1.entity_id, t1.entity_name, 
   t2.order1, t2.order2, t2.order3, t2.order4, max(t3.date) as 'date'
FROM table1 t1 
LEFT JOIN table2 t2 ON t1.entity_id = t2.entity_id 
LEFT JOIN table3 t3 ON t2.code = t3.code
WHERE
   t1.entity_id = 1
GROUP BY 
   t1.entity_id, t1.entity_name, t2.order4, t2.order3, t2.order2, t2.order1 
```

我遇到的问题是，当我尝试选择具有最大日期的最终分数时，会出现错误：

> *列“dbo.t2.score”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。*

我坚持要获得最新日期的分数，而不使用任何总分。我已经尝试了很多方法，但我无法弄清楚获得最新日期

的分数如何在这种情况下获得分数（在相同的情况下检查 order1 到 order4 之后）：

*   当日期不同时，选择最新的分数
*   当日期相同时，选择最高分

有可能这样做吗？

在上述条件下， 我怎样才能得到`entity_id`and ？`score`

## 更新

view1 的结果：

```
entity_id | entity_name | order1 | order2 | order3 | order4 | date       | score
================================================================================  
1         | entity 1    | aaa    | rrr    | eee    | NULL   | 2012-12-15 | 2  
1         | entity 1    | aaa    | rrr    | eee    | NULL   | 2012-11-01 | 5.3  
1         | entity 1    | bbb    | sss    | ttt    | ggg    | 2012-11-16 | 1.5  
1         | entity 1    | ccc    | sss    | xxx    | NULL   | 2012-12-15 | 2.3 
```

view2的结果：

```
entity_id | entity_name | order1 | order2 | order3 | order4 | date
========================================================================
1         | entity 1    | aaa    | rrr    | eee    | NULL   | 2012-12-15 
1         | entity 1    | bbb    | sss    | ttt    | ggg    | 2012-11-16
1         | entity 1    | ccc    | sss    | xxx    | NULL   | 2012-12-15 
```

我想要的结果：

```
entity_id | entity_name | order1 | order2 | order3 | order4 | date       | score
================================================================================  
1         | entity 1    | aaa    | rrr    | eee    | NULL   | 2012-12-15 | 2  
1         | entity 1    | bbb    | sss    | ttt    | ggg    | 2012-11-16 | 1.5  
1         | entity 1    | ccc    | sss    | xxx    | NULL   | 2012-12-15 | 2.3 
```

我已经解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:35:47.133

第一：第二次查询中选择的列有小错误（3次t2.order2）。

二、部分答案：

```
SELECT 
    t1.entity_id, t1.entity_name, t2.order4, t2.order3, t2.order2, t2.order1, t2.score, max(t3.date) as 'date'
FROM table1 t1 
LEFT JOIN table2 t2 ON t1.entity_id = t2.entity_id 
LEFT JOIN table3 t3 ON t2.code = t3.code
WHERE
   t1.entity_id = 1
GROUP BY 
    t1.entity_id, t1.entity_name, t2.order4, t2.order3, t2.order2, t2.order1, t2.score 
```

如果我理解正确，您只需要每个分数的结果，那么您只需将分数列添加到选择部分以及按部分分组。

请记住：在 SQL-Server 和 Oracle 中，如果您想在没有操作的情况下显示它（max、first、sum 等），则必须将列放在 group by 子句中。

# c# - 如何压缩列表中的空格 ?

> ID：13898604
> 
> 赞同：0
> 
> 时间：2012-12-16T04:27:49.703
> 
> 标签：c#, list, removing-whitespace

我正在尝试使用以下代码压缩 C# 列表中的所有空白，但它不会编译...我在整个`Regex`表达式下得到红色的“错误”行，我不明白为什么。有谁可以帮我离开这里吗？

```
char[] delimiterChars = { ',', ':', '|', '\n' };
List<string> sortBox1 = new List<string>(textBox2.Text.Split(delimiterChars));

#region >> COMPRESS WHITESPACE
if (checkBox2.Checked)
{
    sortBox1 = Regex.Replace(sortBox1, @"\s+", " ").Trim();              
}
#endregion 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:33:40.067

这样的事情应该可以解决问题：

```
if (checkBox2.Checked)
{
    sortBox1 = sortBox1.Select(s => Regex.Replace(s, @"\s+", " ").Trim()).ToList();             
} 
```

您收到的错误很可能是因为您正在传递`sortBox1`给该`Replace`方法 - 它必须是 a`string`而不是`List`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T04:38:40.000

该`Replace`方法适用于单个字符串，而不是字符串列表。您将遍历列表中的字符串：

```
for (int i = 0; i < sortBox1.Count; i++) {
  sortBox1[i] = Regex.Replace(sortBox1[i], @"\s+", " ").Trim();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T04:37:31.903

您可以使用 String.Trim 函数

```
char[] delimiterChars = { ',', ':', '|', '\n' };
List<string> sortBox1 = new List<string>(checkBox2.Checked ? textBox2.Text.Split(delimiterChars).Select(s => s.Trim()) : textBox2.Text.Split(delimiterChars)); 
```

# drupal - drupal 多彩菜单

> ID：13898610
> 
> 赞同：-2
> 
> 时间：2012-12-16T04:28:08.557
> 
> 标签：drupal, menu

如何像 drupal 7 中的 www.io1.biz 一样创建彩色菜单？是否有任何模块或类似的东西，或者我必须编码？顺便说一句，我目前正在使用 omega html5 主题。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:00:10.173

试试[Mega menu](http://drupal.org/project/megamenu)吧。您可以自定义 css 以实现相同的目的。

> > **特征**
> 
> 1.  将 Drupal 菜单变成超级菜单 在菜单打开/关闭时创建 javascript 事件以实现交互可能性。
> 2.  解决了“对角线问题”（当鼠标离开父菜单项或在窗格之间移动时，菜单不会立即消失）

# jsf-2 - 选择菜单 JSF 到 CDI 的区别

> ID：13898612
> 
> 赞同：1
> 
> 时间：2012-12-16T04:28:15.257
> 
> 标签：jsf-2, cdi

我想为我正在开发的 JSF 项目使用 arquillian warp 测试框架。我知道我需要使用 CDI 注释而不是 JSF 注释才能使其正常工作。我正在使用`@ViewScoped`bean，所以我在我的项目中包含了接缝面来处理这个问题（我在 JBoss 7 上运行）。我已经修改了要使用的 bean，`@Named`并且在我使用的地方`@PostConstruct`我已经将它放入构造函数中，这一切似乎都很好。

当我使用 a 访问视图时，`selectOneMenu`它永远不会有任何列表项。这是视图和bean的代码。

看法：

```
<h:selectOneMenu value="#{ngoBean.ngo.country}" >
    <f:selectItems value="#{ngoBean.countryValues}" />
</h:selectOneMenu> 
```

豆：

```
import com.a.Facade;
import com.a.CountryEnum;
import com.a.GoverningBody;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ViewScoped;
import javax.faces.model.SelectItem;
import javax.inject.Named;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

/**
 * Created with IntelliJ IDEA.
 */
@Named("ngoBean")
@ViewScoped
public class NgoBean implements Serializable {

    private GoverningBody ngo = new GoverningBody();
    private List<GoverningBody> ngoList;
    private boolean edit;

    private List<SelectItem> countryValues;

    @EJB(beanName = "NgoFacadeImpl")
    private Facade<GoverningBody> ngoController;

    public NgoBean(){
    }

    @PostConstruct
    public void init(){
        //TODO this is a bad way of loading db data i should change it
        ngoList = ngoController.findAll();

        countryValues = initCountryValues();
    }

    public void add(){
        ngoList.add(ngoController.save(ngo));

        //reset the variable
        ngo = new GoverningBody();
    }

    public void edit(GoverningBody item) {
        this.ngo = item;
        edit = true;
    }

    public void save() {
        ngo = ngoController.update(ngo);
        edit = false;
    }

    public void delete(GoverningBody item) {
        ngoController.delete(item);
        ngoList.remove(item);
    }

    public List<GoverningBody> getNgoList() {
        return ngoList;
    }

    public GoverningBody getNgo() {
        return ngo;
    }

    public boolean isEdit() {
        return edit;
    }

    public List<SelectItem> getCountryValues() {
        return countryValues;
    }

    public void setCountryValues(List<SelectItem> countryValues) {
        this.countryValues = countryValues;
    }

    public List<SelectItem> initCountryValues() {
        List<SelectItem> items = new ArrayList<>(CountryEnum.values().length);
        int i = 0;
        for(CountryEnum g: CountryEnum.values()) {
            items.add(new SelectItem(g, g.getName()));
        }

        System.out.println("items = " + items);
        return items;
    }
} 
```

我尝试用注释方法，`@Factory("countryValues")`但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:13:10.460

此问题与症状无关。问题的根本原因是定位不正确，`beans.xml`这应该是在战争的 WEB-INF 目录中，而不是耳朵的 META-INF 目录。

我还更改了`seam-faces`依赖项以使用 apache CODI，这不是必需的，但我认为这个使用`@ViewAccessScoped`而不是`@ViewScoped`不同的名称不那么模棱两可。

# perl - nginx和催化剂配置

> ID：13898615
> 
> 赞同：0
> 
> 时间：2012-12-16T04:29:12.890
> 
> 标签：perl, nginx, fastcgi, catalyst

我在使用 nginx 和 fastcgi 部署 Catalyst 应用程序时遇到问题。我试图在 ubuntu 12.04 下这样做。

我已成功配置 nginx 以从我的应用程序的 /root 子目录中提供静态内容。但是，当我尝试访问我的任何动态 url 时，我在应用程序的错误日志中收到 404 错误，提示找不到（未映射的）url，这让我相信 nginx 正在尝试提供类似于静态页面的请求而不是将其发送到我的 Catalyst 应用程序。

重申一下，点击“localhost:3001/root/static.html”会导致静态内容成功显示在浏览器中，但点击“localhost:30001/expense/editor”会导致以下错误：

```
"GET /expense/editor HTTP/1.1" 404 
```

（其中 '/expense/editor' 是我的应用程序中的一个路径，在运行内置 Catalyst 开发服务器时我可以成功访问该路径）。

我将 Catalyst 应用程序启动为：

```
> perl script/budgetweb_fastcgi.pl -l localhost:3003 
```

我还尝试运行 /etc/init.d/fcgiwarp。我不清楚是否需要运行单独的 fastcgi 包装器，或者上面的 perl 脚本**是否是**我的 fastcgi 包装器。我编辑 fcgiwrap 以使用 TCP 套接字 (127.0.0.1:3003)，然后阻止我同时运行 /etc/init.d/fcgiwrap 和 script/budgetweb_fastcgi.pl，因为它们都使用相同的套接字。所以我猜我应该只使用 Catalyst 脚本？此外，在运行 fcgiwrap 时，我在尝试访问静态内容时收到 502“错误网关”错误。

任何帮助或帮助指针，将不胜感激。到目前为止，我已经查看了以下页面（其中包括；StackOverflow 只允许我发布两个链接）：

[Catalyst wiki](http://wiki.catalystframework.org/wiki/adventcalendararticles/2008/02-catalyst_and_nginx)
[HOWTO：使用 FastCGI 和 nginx 部署 Catalyst 应用程序](http://richard.wallman.org.uk/2010/02/howto-deploy-a-catalyst-application-using-fastcgi-and-nginx/)

这是我的服务器的 nginx 配置文件：

```
server {
       listen       3001;
       server_name  budgetweb.com;
       root     /local/www/money/budgetweb;

       location /root {
           add_header Cache-control public;
       root /local/www/money/budgetweb/;
       }

       location / {
          access_log    /local/www/money/budgetweb/logs/access.log;
          error_log /local/www/money/budgetweb/logs/error.log;
          index  index.html index.htm index.pl;
      try_files $uri =404;
      gzip off;

      fastcgi_pass  localhost:3003;
          fastcgi_index index.pl;

          include /etc/nginx/fastcgi_params;
          fastcgi_param  SCRIPT_FILENAME  /local/www/money/budgetweb$fastcgi_script_name;
      fastcgi_param  SCRIPT_NAME /;
      fastcgi_param  PATH_INFO $fastcgi_script_name;
        } 

       # Disable gzip (it makes scripts feel slower since they have to complete
       # before getting gzipped)
       gzip off;

#       include         /etc/nginx/fcgiwrap.conf;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:44:01.497

Catalyst 中包含的 fastcgi.pl 脚本是您的 FastCGI 包装器。您所要做的就是在套接字上启动它，然后将您的网络服务器指向该套接字，一切都应该通过。对于生产系统，您唯一需要做的就是创建一个启动/停止脚本，该脚本将在启动和关闭时启动和停止您的应用程序。start 命令看起来很像您在上面运行的（您可能需要添加一个 '-d' 标志来守护它。）

在您的网络服务器配置中，将“/”配置为指向您的应用程序应该没问题。您可以尝试删除“index”、“try_files”和“fastcgi_index”配置行，这可能会导致 nginx 尝试静态提供内容，而不是将请求传递给您的应用程序。

# javascript - 使用内部html时使用jquery进行内容或图像fadeIN

> ID：13898618
> 
> 赞同：0
> 
> 时间：2012-12-16T04:30:04.443
> 
> 标签：javascript, jquery

使用 javascripts innerHTML 时，您将如何处理淡化内容或图像。

我尝试了很多东西，但我对 javascript/jquery 的了解不足，这使得它变得困难。

```
function swapLogo(){
    document.getElementById("title").innerHTML='';
    document.getElementById("logo").innerHTML='<img src="images/logo_filled.gif"/>'.fadeIn('slow');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:32:36.743

您可以隐藏它，更改 HTML，然后将其淡入。

```
$("#logo").hide().html('<img src="images/logo_filled.gif"/>').fadeIn('slow'); 
```

# pointers - Pointer.new(:uint) 未转换为 CoreMIDI (RubyMotion) 的正确类型

> ID：13898619
> 
> 赞同：1
> 
> 时间：2012-12-16T04:30:43.647
> 
> 标签：pointers, typedef, rubymotion, coremidi

我正在尝试在 RubyMotion 项目中使用 CoreMIDI。下面是一个简单的代码示例：

```
clientName = "Client"
clientRef = Pointer.new(:uint)
MIDIClientCreate( clientName, nil, nil, clientRef ) 
```

在以下要点中查看更详细的代码和回溯：[https ://gist.github.com/4299810](https://gist.github.com/4299810)

该代码导致以下错误：

> （主）> 2012-12-15 14:43:27.410 core-midi-test[42560:c07] app_delegate.rb:5:in `application:didFinishLaunchingWithOptions:': expected instance of Pointer of type`^{OpaqueMIDIClient}'，得到`I' (TypeError) 2012-12-15 14:43:27.412 core-midi-test[42560:c07] *** Terminating app due to uncaught exception 'TypeError', reason: 'app_delegate.rb:5:in`应用程序：didFinishLaunchingWithOptions:'：类型指针的预期实例`^{OpaqueMIDIClient}', got`我'（类型错误）'

该错误显然与 MIDIClientCreate 的第四个参数有关。MIDIClientCreate 的文档显示：

```
OSStatus MIDIClientCreate (
   CFStringRef     name,
   MIDINotifyProc  notifyProc,
   void            *notifyRefCon,
   MIDIClientRef   *outClient
); 
```

MIDIClientRef 派生自定义为 UInt32 的 MIDIObjectRef，因此我相当确定 Pointer.new(:uint) 是与 RubyMotion 一起使用的正确类型。

以下是 RubyMotion 使用的 CoreMIDI.bridgesupport 文件的相关部分：

```
<function name='MIDIClientCreate'>
  <arg name='name' type='^{__CFString=}' declared_type='CFStringRef'/>
    <arg name='notifyProc' function_pointer='true' type='^?' declared_type='MIDINotifyProc'>
        <arg type='^{MIDINotification=iI}' declared_type='MIDINotification*' const='true'/>
        <arg type='^v' declared_type='void*'/>
        <retval type='v' declared_type='void'/>
    </arg>
    <arg name='notifyRefCon' type='^v' declared_type='void*'/>
    <arg name='outClient' type='^^{OpaqueMIDIClient}' declared_type='MIDIClientRef*'/>
    <retval type='l' declared_type='OSStatus'/>
</function> 
```

据我所知，bridgesupport 定义应该包括必要的管道以进行正确的转换。但这当然是行不通的。

我的代码有问题还是 RubyMotion 包含的 CoreMIDI.bridgesupport 文件有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T05:36:43.127

我通过阅读 MacRuby 的文档发现可以将所需的指针类型显式传递给 Pointer 构造函数，如下所示：

```
clientName = "Client"
clientRef = Pointer.new(MIDIClientRef.type)
MIDIClientCreate( clientName, nil, nil, clientRef )

portName = "Output"
outport = Pointer.new(MIDIPortRef.type)
MIDIOutputPortCreate( clientRef[0], portName, outport ) 
```

# javascript - 如何在点击事件上切换两个单词

> ID：13898622
> 
> 赞同：1
> 
> 时间：2012-12-16T04:32:22.623
> 
> 标签：javascript, jquery, toggle

我想在切换面板时切换打开和隐藏单词。

这是我使用的代码。它仅适用于隐藏，但是当我下次单击时它不会显示打开。

```
$(document).ready(function(){
        $(".flip1").click(function(){
            $(".panel1").slideToggle("slow");
       var val= 0;
       if(val==0){
        $('#word').html("hide").show();
        val=1;
       }else{
        $('#word').html("open").show();
        val=0;

       }
           // $(".info").hide();
        });
    }); 
```

帮我纠正这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:37:12.013

移动这一行：

```
var val= 0; 
```

出`click()`回调。

在你拥有它的地方，它是你点击处理程序中的一个局部变量，`0`每次调用处理程序时它都会被设置为。将它移到处理程序之外，它将被初始化`0`一次，然后在单击处理程序中更新。

或者，完全摆脱该变量并执行以下操作：

```
$(document).ready(function(){
    $(".flip1").click(function(){
        $(".panel1").slideToggle("slow");
        $("#word").html(function(i,oldHtml) {
           return oldHtml==="hide"?"show":"hide";
        }).show();
    });
}); 
```

演示：http: [//jsfiddle.net/9S5eq/](http://jsfiddle.net/9S5eq/)

编辑：如果将回调传递给[`.html()`方法](http://api.jquery.com/html/)，jQuery 会为 jQuery 对象中的每个元素调用它，传递对象中当前元素的索引和该元素的当前 html。它将 html 设置为您返回的任何值。因此，在只有一个元素的情况下，实际上根本不需要 index 参数，但您不能将其省略，因为当前值是在第二个参数中传递的（因此`i`只是一种占位符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:20:28.780

你可以使用这个代码

```
 $(document).ready(function(){
    var val= 0;
    $(".flip1").click(function(){
        $(".panel1").slideToggle("slow");

   if(val==0){
    $('#Word').html("hide").show();
    val=1;
   }else{
    $('#Word').html("open").show();
    val=0;

   }
       // $(".info").hide();
    });
}); 
```

您必须`var val=0`在点击事件之前使用`.flip1`

# django - 动态场的django模型结构

> ID：13898628
> 
> 赞同：2
> 
> 时间：2012-12-16T04:32:58.860
> 
> 标签：django, database-design, model

好的，所以我不想创建这样的论坛应用程序：

```
class Section(models.Model):
    section_name = models.CharField(max_length = 200)

class Thread(models.Model):
    title = models.CharField(max_length = 200) 
    content = models.TextArea() 
```

但是，我想要 4 种类型的`Thread`用户可以提交文本或链接或图像或仅包含图像的链接。`content`字段将根据类型而变化。做到这一点的最佳方法是什么？我需要`SubThread`为每种类型定义吗？或者我可以这样定义：

```
class Thread(models.Model):
THREAD_TYPE = (
    ('text', 'Text'),
    ('link', 'Link'),
        ('imge', 'Image'),
    ('limg', 'Link Image'), 
)

type = models.CharField(max_length = 4, choices = THREAD_TYPE)
    title = models.CharField(max_length = 200) 
if self.type == 'text':
    content = models.CharField(max_length = 200)
# and so on... 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:31:20.343

听起来你想要模型继承。if 语句将不起作用，因为在保存模型之前不会设置类型。将模型视为您的数据库设计。列需要存在于整个表中，而不仅仅是表的一部分。这是模型继承的示例：

```
Class Thread(models.Model):
    title = models.CharField(max_length = 200)

    class Meta:
        abstract = True

Class ThreadText(Thread):
    content = models.CharField(max_length = 200)

Class ThreadLink(Thread):
    link = models.URLField() 
```

您还可以参考文档以获取更多信息[https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:31:33.213

您绝对不能使字段有条件；想想这将如何（或不会）在数据库中工作。

为每种类型创建 Thread 子类是一种选择，但您必须使用 GenericForeignKeys 在 Thread 子类和另一个模型之间创建关系。如果极高的性能是主要考虑因素，GenericForeignKeys 的性能就不那么好了。

另一种选择是定义 Thread 以支持您的所有类型（例如具有 FileField、URLField）并包含一个具有不同类型选项的字段。使用 type 字段，您可以指定一个模板来呈现项目和/或您可以按类型过滤。

# php - PHP数组作为变量？

> ID：13898629
> 
> 赞同：0
> 
> 时间：2012-12-16T04:33:18.947
> 
> 标签：php, arrays

我是 PHP 新手，我有以下代码：

```
if(!$form['profile_hunter']['field_profile_hunter_location']['und']['0']['value']['#default_value']){
    $form['profile_hunter']['field_profile_hunter_location']['und']['0']['value']['#default_value'] = $default_city;
  } 
```

它正在工作，但我不喜欢它那么长，所以我改变了：

```
$form_location = $form['profile_hunter']['field_profile_hunter_location']['und']['0']['value']['#default_value'];
if(!$form_location){
  $form_location = $city;
} 
```

然后就不行了，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T04:36:24.060

这是因为当您分配 $form_location 时，它正在制作数据的副本。为了让两个变量“指向”相同的数据，您需要使用引用运算符，例如：

```
$var = &$some_var; 
```

在你的情况下：

```
$form_location = &$form['profile_hunter']['field_profile_hunter_location']['und']['0']['value']['#default_value'];
if(!$form_location){
  $form_location = $default_city;
} 
```

[http://php.net/manual/en/language.references.php](http://php.net/manual/en/language.references.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T04:35:24.603

因为您的代码分配给`$form_location`，而不是数组中的实际值。

分配使`$form_location`指的是不同的东西。它以前的值恰好是从数组中复制出来的这一事实是无关紧要的。

在 C/C++ 中，您可以使用指针执行类似的操作，但大多数高级语言不支持它，因为它容易出错。

无论如何，您可以为最里面的数组设置一个变量，因为数组是通过引用存储的。这将减少您需要的代码量，同时避免直接引用数组元素引入的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T04:38:44.117

```
$form_location = $form['profile_hunter']['field_profile_hunter_location']['und'][0]['value']['#default_value'];
if(empty($form_location)){
  $form['profile_hunter']['field_profile_hunter_location']['und'][0]['value']['#default_value'] = $city;
} 
```

您可能应该使用“空”，这是 Drupal 约定。“0”也不是一个字符串，而是一个数字，所以你不需要在它周围加上引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T04:52:16.597

得到了答案！感谢托尼！

它应该是

```
$form_location = &$form['profile_hunter']['field_profile_hunter_location']['und']['0']['value']['#default_value']; 
```

“&”表示通过引用传递，没有它就是按值传递。

# java - Dom4j：节点实现不兼容

> ID：13898631
> 
> 赞同：0
> 
> 时间：2012-12-16T04:33:39.813
> 
> 标签：java, xml, dom4j, incompatibility

Dom4j 显然是一个很棒的项目，它自 2005 年以来就没有被触及，但它仍然被广泛使用。

但是，Node 实现的不兼容给我带来了一些问题。`org.dom4j`、和其他之间存在名称冲突`org.w3c.dom`，例如`org.dom4j.Node`和`org.w3c.dom.Node`。

例如，我有`<li><p>Some content</p></li>`并且想要从`<p>`to中提取任何东西`<li>`并摆脱`<p>`. 所以我尝试了

```
 if( itemElm.getFirstChild().getNodeType() == Node.ELEMENT_NODE ){
        NodeList nodes = itemElm.getFirstChild().getChildNodes();
        //itemElm.removeChild( itemElm.getFirstChild() ); // No effect on error
        for( int i = 0; i < nodes.getLength(); i++ ) {
            itemElm.appendChild( nodes.item(i) );
        }
    }/**/ 
```

这适用于我从 C++、.Net 甚至 Java 知道的其他实现。但不适用于 Dom4j：

```
// Cannot convert: org.dom4j.tree.DefaultText@275d595c [Text: "Some content."] into a W3C DOM Node 
```

所以我尝试了

```
itemElm.add( DOMNodeHelper.asDOMNode( itemElm, nodes.item(i) )); 
```

不 - 一样。所以我尝试了：

```
DOMNodeHelper.appendChild( itemElm, nodes.item(i) ); // TODO: Could improve Dom4j. 
```

因为它是`appendChild(org.dom4j.Node, org.w3c.dom.Node)`。但是没有——同样的结果。

**我应该如何解决这个问题？我应该如何在 Dom4j 中使用这两个类型集？**谢谢。

*上下文：[http ://code.google.com/p/jtexy/source/browse/trunk/core/src/main/java/cz/dynawest/jtexy/modules/ListModule.java#380](http://code.google.com/p/jtexy/source/browse/trunk/core/src/main/java/cz/dynawest/jtexy/modules/ListModule.java#380)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:17:58.467

如果你打算使用 DOM api，那么绝对没有理由使用 DOM4J；使用最新的 xerces 或 JRE 提供的 xerces。

可能有理由使用其他 API，例如 DOM4J，但只能使用“本机”API。对于任何严肃的工作，我都不相信 DOM4J 中的 DOM 适配层；正如你所说，它自 2005 年以来就没有被触及过。

# perl - XML::Simple 不抓取单个 XML 节点

> ID：13898633
> 
> 赞同：2
> 
> 时间：2012-12-16T04:33:44.500
> 
> 标签：perl, xml-parsing, mediawiki-api

我正在使用 MediaWiki API 来获取搜索结果。我只是想获取第一个结果的 URL，即标记为“Url”的 XML 元素。最终我会想用 XML 做其他事情，但我想在得到这个答案时，我会意识到我做错了什么并且能够做其他事情。[这](http://en.wikipedia.org/w/api.php?action=opensearch&search=rooney&limit=10&namespace=0&format=xml)是我正在使用的页面。

```
require HTTP::Request;
require LWP::UserAgent;
require XML::Simple;

my $url = URI->new("http://en.wikipedia.org/w/api.php?action=opensearch&search=rooney&limit=10&namespace=0&format=xml");
my $request = HTTP::Request->new(GET => $url);
my $ua = LWP::UserAgent->new;
my $response = $ua->request($request);

my $xml = XML::Simple->new(); 
my $data = $xml->XMLin($response->content); 
```

到这里为止的一切似乎都运行良好。我的 HTTP 请求顺利通过（如果我只是打印`$response->content`它返回 XML 内容很好，如果我打印`$data`，我被告知它是一个哈希。

为了获得“Url”元素，我根据我所做的搜索尝试了多种方法。下面几个：

```
print $data->{'Url'};
print $data->{Url};
print $data{Url} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T04:45:23.463

专业提示：用于`Data::Dumper`查看数据结构内部。

```
use Data::Dumper;
print Dumper($data); 
```

你会得到这样的东西......

```
$VAR1 = {
  'xmlns' => 'http://opensearch.org/searchsuggest2',
  'Section' => {
    'Item' => [
      {
        'Url' => {
          'content' => 'http://en.wikipedia.org/wiki/Rooney',
          'xml:space' => 'preserve'
        },
        'Description' => {
          'content' => 'Rooney may refer to:',
          'xml:space' => 'preserve'
        },
        'Text' => {
          'content' => 'Rooney',
          'xml:space' => 'preserve'
        }
      },
... much much more ... 
```

从中您可以推断出到达所需数据的路径是通过

```
$data->{Section}{Item}[0]{Url}{content} 
```

您还应该考虑使用类似的东西[`XML::XPath`](http://search.cpan.org/perldoc?Xml%3a%3aXPath)，这样可以更容易地进行这种搜索。

# eclipse - Eclipse Juno下无法安装Spring Tool Suite

> ID：13898640
> 
> 赞同：1
> 
> 时间：2012-12-16T04:34:39.050
> 
> 标签：eclipse, spring, spring-tool-suite

我正在尝试使用 Eclipse MarketPlace 为 Eclipse Juno (3.8 + 4.2) 安装 Spring Tools Suite (STS)，但是当我尝试安装它时，安装程​​序说：

```
The following solutions are not available: Spring Tool Suite (STS) for Eclipse Juno (3.8 + 4.2) (id=org.springframework.ide.eclipse.mylyn.feature.feature.group, org.springframework.ide.eclipse.autowire.feature.feature.group, org.springframework.ide.eclipse.aop.feature.feature.group, org.springframework.ide.eclipse.ajdt.feature.feature.group, org.springframework.ide.eclipse.osgi.feature.feature.group, com.vmware.vfabric.ide.eclipse.tcserver.insight.feature.group, org.springframework.ide.eclipse.roo.feature.feature.group, org.springframework.ide.eclipse.security.feature.feature.group, org.springframework.ide.eclipse.webflow.feature.feature.group, org.springframework.ide.eclipse.batch.feature.feature.group, org.springframework.ide.eclipse.maven.feature.feature.group, org.springsource.ide.eclipse.dashboard.feature.group, org.springframework.ide.eclipse.feature.feature.group, org.springframework.ide.eclipse.integration.feature.feature.group, org.springframework.ide.eclipse.data.feature.feature.group, org.springframework.ide.eclipse.uaa.feature.feature.group, site=http://dist.springsource.com/release/TOOLS/update/e4.2/) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:07:59.303

打开日食

1.  帮助 --> Eclipse 市场
2.  按关键字“STS”搜索
3.  单击“Spring Tool Suite (STS) for Eclipse Juno (3.8 + 4.2)”部分上的安装按钮
4.  按照日食指令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:47:07.373

我想这会对你有所帮助。试试下面的链接

[Eclipse Juno (4.2) 的 SpringSource 工具套件](http://blog.springsource.org/2012/03/14/early-access-springsource-tool-suite-for-eclipse-juno-4-2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:46:30.380

我也在尝试将 Spring Tool Suite 安装到 Eclipse 中，我也遇到了同样的错误。如果我去[spring 源下载站点](http://www.springsource.org/downloads/sts-ggts)并尝试下载任何版本，我也会得到错误。看来他们的下载网站目前已关闭...

问候，下午。

# java - java映射的FileChannel实现

> ID：13898641
> 
> 赞同：0
> 
> 时间：2012-12-16T04:35:11.407
> 
> 标签：java, performance, memory-mapped-files

使用 a 读取文件`Mapped FileChannel`似乎快如闪电......但我想知道他们是如何做到这一点的？

他们只是在一个大的（~64kB）缓冲区中读取，然后让我通过它吗？或者还有更多？

我只是对速度印象深刻，并想更好地理解它背后的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:57:16.727

在您阅读之前，他们不会阅读任何内容，然后您阅读的内容基本上是通过操作系统分页系统阅读的。打开可能几乎不会花费您，但重复读取文件的同一部分可能会导致重复 I/O。没有什么是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:12:14.273

内存映射，将文件映射到您的内存中，Java 提供了一个库来包装它，因此您可以相对安全地访问它。

它的好处包括：

*   在内存、操作系统磁盘缓存和应用程序内存中只有一个副本。
*   您无需系统调用即可访问文件的随机区域。
*   Java 确实限制了您可以映射的数量。即，如果您的最大堆为 1 GB，而您的最大直接内存为 1 GB，您仍然可以在 1 TB 中进行映射。

它的缺点包括：

*   它会消耗虚拟内存，如果您重新映射或关闭文件，它不会返回。如果您有一个 64 位 JVM，这不是这样的问题，但如果您有一个可能只有 1 GB 可用空间的 32 位 JVM，那么这个问题就非常有限。它在 GC 运行时释放虚拟内存。
*   它一次读取/写入至少一页。如果您有很多随机访问，这可能会很好，但如果您正在读取/写入磁盘上的许多文件，这实际上会减慢顺序访问的速度。一次随机附加到许多文件 4KB 可能会导致高度碎片化的文件，这是不明智的。
*   使用内存映射文件可能比使用普通的 DataXxxxStream 或 BufferedReader/Writer 更加困难。

我已经编写了几个库，使内存映射文件更易于使用，我会说我会在超低延迟至关重要或您需要读取大量内存时使用它，这些内存您希望已经在磁盘缓存中并且您想要充分利用您的磁盘缓存。

值得注意的是，内存映射不会使您的磁盘子系统更快，如果这是您的限制因素，那么您读取/写入数据的方式并不重要。

# java - 如何处理渲染视图时抛出的异常

> ID：13898644
> 
> 赞同：0
> 
> 时间：2012-12-16T04:35:23.717
> 
> 标签：java, spring, jsp, exception-handling

对于处理请求时抛出的异常，Spring 有许多不同的方法来注册异常处理程序。有没有办法在渲染视图时抛出异常时应用类似的异常处理？至少我希望能够执行一些日志记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:16:34.093

问题是视图渲染期间抛出的异常不能做很多事情。特别是，它们通常无法呈现包含错误报告的 HTML 页面……甚至无法发送 5xx 响应……因为响应通常在引发异常之前“已提交”。

所以你能做的最好的（可能）是：

*   为捕获并记录异常的 View 对象创建一个包装器，或者
*   在 servlet 过滤器中进行日志记录，

但是有可能 Web 容器可以配置为无论如何记录未捕获的异常。

**更新**

> 我刚刚注意到 Spring 的 HandlerInterceptor 类公开了一个 'afterCompletion' 方法，该方法将在引发异常时调用。关于使用这个与过滤器的好处的任何想法？

试试看。:-) 但鉴于以下情况，我怀疑它会起作用。

> 使用过滤器或拦截器不适用于呈现 jsp 时引发的异常。它确实打印出错误：

```
Dec 16, 2012 12:18:03 PM org.apache.catalina.core.ApplicationDispatcher 
    invoke SEVERE: Servlet.service() for servlet jsp threw exception
    javax.el.PropertyNotFoundException: Property 'fooo' not found on 
    type java.lang.String" 
```

> 不幸的是，异常不会向上传播到过滤器。我想添加我自己的日志记录，它会发送错误通知并记录有关失败请求的其他信息。密切关注日志文件以发现错误并不是一个好的选择。

1.  日志消息实际上是使用日志子系统生成的。如果是，您可以使用日志配置为 JSP 引擎日志事件添加自己的处理程序并发送特殊通知。

2.  异常是 1）在 JSP 视图呈现期间被抛出，以及 2）JSP 引擎没有传播它们的事实意味着（IMO）您不太可能有办法捕获它们。

3.  另一种选择是为日志文件设置扫描仪......作为一般系统监控的一部分。

# java - CopyOnWriteArrayList 内部状态是瞬态的

> ID：13898647
> 
> 赞同：2
> 
> 时间：2012-12-16T04:35:41.127
> 
> 标签：java, concurrency, arraylist

CopyOnWriteArrayList 被标记为可序列化。但它的内部状态是短暂的。任何人都可以回答我们试图在这种类型的列表中序列化什么。

```
/** The array, accessed only via getArray/setArray. */
private volatile transient Object[] array; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T04:42:12.293

该[`writeObject`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/CopyOnWriteArrayList.java#CopyOnWriteArrayList.writeObject%28java.io.ObjectOutputStream%29)方法已被覆盖以特定方式存储状态。所以实际的存储，即`array`瞬态不会影响 CopyOnWRiteArrayList 对象的序列化。

对象中的临时成员将在 JVM 的默认序列化过程中留下。但是，如果您覆盖`writeObject()`，则该方法定义将用于序列化对象，而不是默认的序列化策略。

# c# - 以编程方式绑定 ItemsSource

> ID：13898654
> 
> 赞同：10
> 
> 时间：2012-12-16T04:37:03.450
> 
> 标签：c#, xaml, binding, windows-runtime

c# 代码中的 this 等价物是什么？

```
<ListView
    x:Name="taskItemListView"
    DataContext="{Binding SelectedItem, ElementName=itemListView}"
    ItemsSource="{Binding taskItems}">
...
</ListView> 
```

我已经尝试了以下代码，但它似乎不起作用......

```
Binding b = new Binding();
b.Path = new PropertyPath("taskItems");

DependencyProperty dp = DependencyProperty.Register("itemsSource", typeof(object), typeof(object), null);
BindingOperations.SetBinding(taskItemListView, dp, b); 
```

**编辑**：

根据@sa_ddam213 的回答，这行得通：

```
Binding dataContextBinding = new Binding();
dataContextBinding.Path = new PropertyPath("SelectedItem");
dataContextBinding.Source = itemListView;
BindingOperations.SetBinding(taskItemListView, ListView.DataContextProperty, dataContextBinding );

Binding sourceBinding = new Binding();
sourceBinding.Path = new PropertyPath("taskItems");
BindingOperations.SetBinding(taskItemListView, ListView.ItemsSourceProperty, sourceBinding ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T04:51:34.940

像这样的东西应该工作：

```
BindingOperations.SetBinding(taskItemListView, ListView.DataContextProperty, new Binding("SelectedItem") { Source = itemListView});
BindingOperations.SetBinding(taskItemListView, ListView.ItemsSourceProperty, new Binding("taskItems") { Source = this }); 
```

注意：“Source = this”`this`等于持有`taskItems`,`SelectedItem`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T17:52:53.243

一个简单的方法是通过 SetValue：

```
taskItemListView.SetValue(ListView.ItemsSourceProperty, this.Source); 
```

更多信息在这里：[DependencyObject.SetValue 方法](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.dependencyobject.setvalue)

# formal-languages - 这个 DFA 有解决方案吗？

> ID：13898656
> 
> 赞同：0
> 
> 时间：2012-12-16T04:37:10.377
> 
> 标签：formal-languages

我试图创建一个可以识别带有字母 {a,b,c} 的字符串的 DFA，其中 a 和 c 出现偶数次，而 b 出现奇数次。

我想知道这可能只能用图灵机或无上下文语言等其他方法来表达。

您可能会觉得考虑解决方案很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:48:48.380

我将要构建这样一台机器的方法如下。做八种状态。每个状态代表一个可能的 3 元组组合。开始状态是表示所有三个为偶数的组合的状态。如果 a 是输入中的第一个字符，那么您将进入一个表示奇数个 a 和偶数个 b 和 c 的状态。接受状态是 a 和 c 为偶数，b 为奇数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:43:41.117

这是可能的，使用 DFA 只需为奇数个 a、b 和 c 的组合中的每个组合提供一个状态。因此，如果您处于具有偶数 # 个 a、奇数 # 个 b 和偶数 # 个 c 的状态，那么您可以接受。您还可以为任何其他情况定义简单的转换。所以天真地这可以用 8 个状态来完成。

# android - 查找 git commit 产生的一些代码

> ID：13898659
> 
> 赞同：3
> 
> 时间：2012-12-16T04:37:29.207
> 
> 标签：android, git, linux-kernel

我有一些用于修改版本的 linux 内核的原始开源代码。理想情况下，我会有一个补丁，这样我就可以将它应用到更新版本的内核中，但我只有源代码，所以我正在尝试自己创建那个补丁。

我发现当我创建一个补丁并将其应用到较新的内核时，我最终会恢复很多更改。git 中是否有一个功能可以判断本地更改是否正在恢复以前的提交？或者是否有其他工具可以找到更改最少的提交（即使它很耗时并且必须在我自己的机器上运行）？

我一直在手动缩小源分支的提交范围，但这非常耗时。我找到了一个非常匹配的分支，现在我试图弄清楚在对其进行更改之前最新的提交是什么。

我将检查提交 A，复制更改的文件，对任何包含大量内容的文件进行日志记录，以确定是否从提交 B 添加了这些确切的更改，然后在提交 B 之前检查提交等， ETC...

编辑：由于这都与开源代码有关，我看不出有什么理由不能在这里分享它的链接。

LGE 发布的源代码可以在[这里](http://www.lg.com/global/support/opensource/opensource.jsp)找到。在 Mobile 下搜索 LS970。

MSM 内核的不同分支可以在[这里](https://www.codeaurora.org/gitweb/quic/la/?p=kernel/msm.git;a=heads)找到。到目前为止，`ics_strawberry`头部似乎是最接近的。它是少数几个有`chromeos`文件夹的公司之一，如果专门为不运行 Chrome OS 的手机添加似乎是一件奇怪的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:55:58.407

不幸的是，您不能`git bisect`在此处使用，因为您无法在任何提交时判断它是好是坏。

您的目标是找到与您的目标源最匹配的提交。我认为“匹配最佳”的最佳指标是统一差异/补丁的大小（以行为单位）。

考虑到这一点，您可以根据以下伪代码编写脚本（对不起，shell、Perl 和 C 的奇怪组合）：

```
min_diff_size = 10000000000
best_commit = none
git branch tmp original_branch  # branch to scan
git checkout tmp
for (;;) {
    diff_size = `diff -burN -x.git my_git_subtree my_src_subtree | wc -l`;
    if (diff_size < min_diff_size) {
         min_diff_size = diff_size;
         best_commit = `git log --oneline -1`;
    }
    git reset --hard HEAD~; # rewind back by 1 commit
    if (git reset did not work) break;
}
git checkout original_branch
git branch -d tmp

print "best commit $best_commit, diff size $min_diff_size" 
```

您可能还想循环浏览内核分支以找到最佳匹配分支。

这可能会运行缓慢并且需要很多时间（可能是几个小时），但它会找到最匹配的提交。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-16T05:10:12.050

您可以使用`git blame`来找出每行代码引入的提交。例如，

```
git blame main.c 
```

查看[手册页](http://git-scm.com/docs/git-blame)，了解可用于微调`blame`输出和其他很酷技巧的各种选项。

# apache - 如何使用 apache CXF 在 JAX-RS 中对用户进行身份验证？

> ID：13898662
> 
> 赞同：0
> 
> 时间：2012-12-16T04:38:08.973
> 
> 标签：apache, security, cxf, jax-rs

我正在将 apache CXF 用于 JAX-RS 应用程序。我按照 url 中的示例“ [http://www.javatips.net/blog/2012/02/cxf-restful-tutorial](http://www.javatips.net/blog/2012/02/cxf-restful-tutorial) ”..... 最后，我是在“webapps”下的tomcat中将应用程序托管为“war”？...

如何在 JAX-RS 中注入安全性（简单授权和身份验证）？基本上，我的目标是在餐饮服务请求之前验证“用户”角色？

谁能提供一个简洁的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:57:59.337

我不知道 CXF 但你可以在 JAX-RS 中找到安全性如何？[在这里](https://stackoverflow.com/questions/11136027/authentication-in-rest-jersey/13578820#13578820) 。

# android - contactcontracts 表中的字段 CONTACT_ID 是否为 AUTO_INCREMENT

> ID：13898672
> 
> 赞同：0
> 
> 时间：2012-12-16T04:41:12.490
> 
> 标签：android

我正在为联系人创建一个新数据库，并将 conatctscontract 字段的contact_id 作为主键。我的问题是，如果有人删除联系人中的一行，那么该联系人的 contact_id 是否会被 android 系统重用。如果是这样，那么如何防止在我的应用程序中使用该联系人 ID，或者是否有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:47:38.227

我假设您使用 MySQL。数据库系统自动递增contact_id 主键。当该行被删除时，该 id 已经被“使用”并存储在数据库中作为“使用”可以说，即使该行本身已被删除。只要您不重置 auto_increment 起点（语法看起来像这样），它将继续保持这种状态

```
ALTER TABLE contact AUTO_INCREMENT = 0; 
```

如果您使用 auto_increment 功能，只要您不重置该表的 auto_increment 设置（据我所知），已删除的 contact_id 将不会被重用。它只会从存储在数据库中的最高 ID 继续。

编辑：如果我没记错的话，使用 auto_increment 的列用于存储最新的“auto_incremented”数字的特殊数据库统计表（您不可用，但从数据库中自动存储）。使用上面的语法会将 auto_increment 重置回 0 并从那里恢复，填补已删除的空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:41:04.707

如果您指的是内置`contactsprovider`数据库，则`Contacts`表和`Data`表的 id 都为 AUTOINCREMENT。
所以我不认为 id 会被重用。

你可以在[这里查看代码库](http://androidxref.com/4.2_r1/xref/packages/providers/ContactsProvider/src/com/android/providers/contacts/ContactsDatabaseHelper.java#936)

# oracle - 选择子查询期间出现 ORA-00937 错误

> ID：13898674
> 
> 赞同：0
> 
> 时间：2012-12-16T04:42:32.367
> 
> 标签：oracle, ora-00937

我正在尝试编写一个查询，返回员工人数、平均工资和低于平均工资的员工人数。

到目前为止我的查询是：

```
select trunc(avg(salary)) "Average Pay", 
count(salary) "Total Employees",
(
   select count(salary)
   from employees 
   where salary < (select avg(salary) from employees)
) UnderPaid
from employees; 
```

但是当我运行它时，我在子查询中得到了 ora-00937 错误。

我曾认为可能是“计数”函数导致了问题，但即使运行更简单的子查询，例如：

```
select trunc(avg(salary)) "Average Pay", 
count(salary) "Total Employees",
(
  select avg(salary) from employees 
) UnderPaid
from employees; 
```

仍然返回相同的错误。由于 AVG 和 COUNT 似乎都是聚合函数，我不确定为什么会出现错误？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T04:51:29.733

当您使用 scala 子查询时，它是选择列表中的子查询，它应该只返回一行。一般来说，子查询可以返回多行。所以当你在带有聚合函数的选择列表中使用它时，你应该用没有副作用的聚合函数包裹它。

```
select count(*), (select count(*) from emp) from emp
-- ERROR. Oracle doesn't know that the subquery returns only 1 row.

select count(*), max((select count(*) from emp)) from emp
-- You know that the subquery returns 1 row, applying max() results the same. 
```

或者您可以像这样重写查询：

```
select avg(salary), count(*), count(case when salary < sal_avg then 1 end)
from (select salary, avg(salary) over () sal_avg from emp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T02:43:08.157

[ntalbs](https://stackoverflow.com/users/1513384/ntalbs)的答案有效（谢谢，[ntalbs](https://stackoverflow.com/users/1513384/ntalbs)！），但如果需要，请参阅问题“ [ORA-00937: Not a single-group group function - Query error](https://stackoverflow.com/questions/11349571/ora-00937-not-a-single-group-group-function-query-error) ”以获得更完整的解释。

# c++ - 排序时如何弄清楚“进度”？

> ID：13898675
> 
> 赞同：10
> 
> 时间：2012-12-16T04:42:40.960
> 
> 标签：c++, algorithm, sorting, progress

我`stable_sort`用来排序一个大的`vector`.

排序大约需要几秒钟（比如 5-10 秒），我想向用户显示一个进度条，显示到目前为止已经完成了多少排序。

但是（即使我要编写自己的排序程序）我怎么知道我已经取得了多少进展，还有多少要走？

我不需要它是精确的，但我需要它是“合理的”（即合理的线性，不是伪造的，当然也不是回溯）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T04:57:15.137

标准库排序使用用户提供的比较函数，因此您可以在其中插入一个比较计数器。quicksort/introsort 或 mergesort 的比较总数将非常接近 log [2] N * N（其中 N 是向量中的元素数）。这就是我要导出到进度条的内容：比较次数 / N*log [2] N

由于您使用的是合并排序，因此比较计数将是一个非常精确的进度衡量标准。如果实现花费时间在比较运行之间置换向量，它可能会略微非线性，但我怀疑您的用户会看到非线性（无论如何，我们都习惯于不准确的非线性进度条:)）。

根据数据的性质，快速排序/引入排序会显示出更多的差异，但即使在这种情况下，也总比没有好，您总是可以根据经验添加一个捏造因素。

比较类中的一个简单计数器几乎不会花费您任何费用。就我个人而言，我什至不会费心锁定它（锁会影响性能）；它不太可能进入不一致的状态，并且无论如何进度条不会因为它获得不一致的进度数字而开始辐射蜥蜴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:07:18.537

将向量分成几个相等的部分，数量取决于您想要的进度报告的粒度。分别对每个部分进行排序。然后开始合并`std::merge`。您可以在对每个部分进行排序后以及每次合并后报告您的进度。您需要进行试验以确定与合并相比应计算部分排序的百分比。

**编辑：**

我自己做了一些实验，发现与排序相比，合并微不足道，这就是我想出的功能：

```
template<typename It, typename Comp, typename Reporter>
void ReportSort(It ibegin, It iend, Comp cmp, Reporter report, double range_low=0.0, double range_high=1.0)
{
    double range_span = range_high - range_low;
    double range_mid = range_low + range_span/2.0;
    using namespace std;
    auto size = iend - ibegin;
    if (size < 32768) {
       stable_sort(ibegin,iend,cmp);        
    } else {
        ReportSort(ibegin,ibegin+size/2,cmp,report,range_low,range_mid);
        report(range_mid);
        ReportSort(ibegin+size/2,iend,cmp,report,range_mid,range_high);
        inplace_merge(ibegin, ibegin + size/2, iend);
    }   
}

int main()
{
    std::vector<int> v(100000000);
    std::iota(v.begin(), v.end(), 0);
    std::random_shuffle(v.begin(), v.end());

    std::cout << "starting...\n";

    double percent_done = 0.0;
    auto report = [&](double d) {
        if (d - percent_done >= 0.05) {
            percent_done += 0.05;
            std::cout << static_cast<int>(percent_done * 100) << "%\n";
        }
    };
    ReportSort(v.begin(), v.end(), std::less<int>(), report);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T04:55:35.307

最简单的方法：对一个小向量进行排序并假设 O(n log n) 复杂度推断时间。

t(n) = C * n * log(n) ⇒ t(n [1] ) / t(n [2] ) = n [1] /n [2] * log(n [1] )/log(n [2] )

如果排序 10 个元素需要 1 μs，那么 100 个元素将需要 1 μs * 100/10 * log(100)/log(10) = 20 μs。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T04:59:56.397

稳定排序基于归并排序。如果您编写了自己的合并排序版本（忽略一些加速技巧），您会看到它由 log N 次传递组成。每次传递都以 2^k 个排序列表开始并生成 2^(k-1) 个列表，当它将两个列表合并为一个时排序完成。因此，您可以使用 k 的值作为进度的指示。

如果您要运行实验，您可以使用比较对象来计算所进行的比较次数，并尝试查看所进行的比较次数是否是 n log n 的某个合理可预测的倍数。然后，您可以通过计算完成的比较次数来跟踪进度。

（请注意，对于 C++ 稳定排序，您必须希望它找到足够的存储来保存数据的副本。否则成本会从 N log N 变为可能 N (log N)^2，并且您的预测也会很远乐观的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T05:11:08.160

选择一小部分索引并计算反转。您知道它的最大值，并且您知道完成后该值为零。因此，您可以将此值用作“progressor”。您可以将其视为熵的度量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-16T19:31:49.350

快速排序基本上是

1.  使用枢轴元素对输入进行分区
2.  递归排序最小部分
3.  使用尾递归对最大部分进行排序

所有工作都在分区步骤中完成。您可以直接进行外部分区，然后在完成最小部分时报告进度。所以在上面的 2 和 3 之间会有一个额外的步骤。

*   更新进度条

这是一些代码。

```
template <typename RandomAccessIterator>
void sort_wReporting(RandomAccessIterator first, RandomAccessIterator last)
{
double done = 0;
double whole = static_cast<double>(std::distance(first, last));

typedef typename std::iterator_traits<RandomAccessIterator>::value_type value_type;

while (first != last && first + 1 != last)
{
    auto d = std::distance(first, last);
    value_type pivot = *(first + std::rand() % d);

    auto iter = std::partition(first, last, 
        [pivot](const value_type& x){ return x < pivot; });
    auto lower = distance(first, iter);
    auto upper = distance(iter, last);
    if (lower < upper)
    {
        std::sort(first, iter);
        done += lower;
        first = iter;
    }
    else
    {
        std::sort(iter, last);
        done += upper;
        last = iter;
    }

    std::cout << done / whole << std::endl;
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-18T21:11:20.790

我花了将近一天的时间来弄清楚如何显示 shell 排序的进度，所以我将在这里留下我的简单公式。给定一组颜色，它将显示进度。它正在将颜色从红色混合到黄色，然后再到绿色。当它被排序时，它是数组的最后一个位置是蓝色的。对于 shell 排序，它每次通过数组的迭代次数是相当比例的，因此进度变得非常准确。（Dart/Flutter 中的代码）

```
List<Color> colors = [
    Color(0xFFFF0000),
    Color(0xFFFF5500),
    Color(0xFFFFAA00),
    Color(0xFFFFFF00),
    Color(0xFFAAFF00),
    Color(0xFF55FF00),
    Color(0xFF00FF00),
    Colors.blue,
  ];
[...]
style: TextStyle(
    color: colors[(((pass - 1) * (colors.length - 1)) / (log(a.length) / log(2)).floor()).floor()]), 
```

它基本上是一个交叉乘法。一个手段数组。(log(a.length) / log(2)).floor() 表示向下取整 log2(N)，其中 N 表示项目数。我用数组大小​​、数组编号和颜色数组大小的几种组合对此进行了测试，所以我认为这很好。

# javascript - javascript中的亚像素抗锯齿画布像素移位算法

> ID：13898684
> 
> 赞同：2
> 
> 时间：2012-12-16T04:44:05.160
> 
> 标签：javascript, image-processing, canvas, html5-canvas, gaussian

我正在尝试找出一种使用 javascript 画布扭曲纹理的伪 3d 方法。

到目前为止，满足我需求的最佳方法是使用[置换贴图](http://en.wikipedia.org/wiki/Displacement_mapping)，我主要从[本教程和源代码示例](http://www.soundstep.com/blog/2012/04/25/javascript-displacement-mapping/)中遵循。

基本原理是使用置换贴图中选定像素的通道级别 (RGBA)，然后应用像素移位算法……到目前为止一切都很好。

问题是这种移动纹理图像像素的方法是非常二进制的，并且由于以下事实而呈现出略微“锯齿状”的边缘 - 它只是移动“完整”像素。

与 PhotoShop 或[此处的一些 ImageMagick 示例](http://www.imagemagick.org/Usage/mapping/#displacement_maps)相比，javascript 方法看起来不太现实。这是由于 PS 和 IM 的子像素处理能力，因此可以为像素间数据导出中值。

**问题：**任何人都可以建议一个可以集成到我的算法中以产生输出的高斯/锯齿平滑度的步骤吗？

也许我可以简单地通过 FFT 运行图像数据并再次返回？有没有这方面的例子？

我有点难过，非常感谢一些指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:25:15.437

1）您提到了两种非常不同的算法：位移映射是一种 3D 技术，因此它涉及“Z”和投影，另一种是更简单的 2D 像素移位算法。

（提供的音步链接使用“位移映射”一词，但它是一种像素移动技术。）

2）无论您的 MVC 项目的大小，算法*都应该*是隔离的，并且具有如下签名：

```
var pixelShift = function (sourceCanvas, shiftCanvas, xOffset, yOffset) 
```

并返回一个新的画布或更改 sourceCanvas 到位。

如果没有这个功能，请不要谈论MVC，除非M代表'Mess'。;-) -

3) 实际上，该算法非常简单，您必须遍历目标像素并查看它们应该来自的像素的颜色（而不是相反）：

```
var pixelShift = function (sourceCanvas, shiftCanvas, xOffset, yOffset) {
    var shiftXY           = { xS:0, yS:0     };
    var shiftCanvasWidth  = shiftCanvas.width ;
    var shiftCanvasHeight = shiftCanvas.height;
    for ( var x=0 ; x < shiftCanvasWidth ; x ++) {
        for ( var y = 0 ; y < shiftCanvasHeight ; y++ ) {
            readShift ( shiftCanvas, x, y, shiftXY );
            var sourceColor = readPixelColor ( sourceCanvas, 
                                                 xOffset + shiftXY.xS, 
                                                         yOffset + shiftXY.yS) ;
            writePixel(sourceCanvas, xOffset + x , yOffset + y, sourceColor );
        }
     }
 };

 // sourceColor represents the color within a 32 bits integer (r,g,b,a * 8 bits). 
```

在这里写所有东西太长了，但是：

-- 在 pixelShift 循环中，您不应处理源画布，而应处理 32 位性能数组。

-- 班次画布应转换一次为 Int8Array 数组，并按此存储。
这个数组大小是 shiftWidth * shiftHeight
奇数索引包含 x 移位，偶数包含 y 移位。
该数组经过预处理，并包含移位值 - 128。
对于此 shiftArray ：

```
shiftX (x,y) = shiftArray [ 2 * (x + y * shiftWidth)     ] ;                                               
shiftY (x,y) = shiftArray [ 2 * (x + y * shiftWidth) + 1 ] ; 
```

- 所以 pixelShift 应该是这样的：

```
var pixelShift = function (sourceCanvas, 
                               shiftArray, shiftWidth, shiftHeight, xOffset, yOffset) {  
          [ Get a 32 bit performance array out of the canvas's target area ]  
          [ process this array using the shiftArray ]  
          [ write back the processed array onto the canvas's target area ]  
 } 
```

- 核心循环可以以线性方式处理：

```
 var areaSize = shiftWidth * shiftHeight ;
        for ( pixelIndex=0 ; pixelIndex < areaSize ; pixelIndex++ ) {
            var linearShift = shiftArray [ 2*pixelIndex ] 
                                       + shiftWidth * shiftArray [ 2*pixelIndex + 1 ]  ;
            targetAreaArray [ pixelIndex ] = targetAreaArray [ pixelIndex + linearShift ] ;
            } 
```

-- Rq : 你可能想要在 [0, areaSize[.

——我想现在你不能再快了。
性能瓶颈将是获取/放置目标区域所需的 getImageData 和 putImageData，但据我所知，除了这两个 slooooow 函数之外，没有其他方法可以在 Canvas 上获取二进制视图。

# jquery - 无法调用 Jquery 绑定函数事件

> ID：13898685
> 
> 赞同：-3
> 
> 时间：2012-12-16T04:44:06.077
> 
> 标签：jquery

我无法调用“addFav”事件，请告诉我以下代码中是否有任何问题：

```
var CCRemoteMain = {
addFav :function(event) {
e.preventDefault();
alert('called');
return false;
},

Init: function () {
alert('called');
$('a#fav').bind('click', addFav);
}

};

$(document).ready(function() {
// Call the default function to be loaded
var RemoteMainFunc = CCRemoteMain.Init();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:47:01.540

尝试引用这样的方法：

```
$('a#fav').bind('click', CCRemoteMain.addFav); 
```

我怀疑`addFav`方法不在该方法的范围内`Init`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:51:18.713

您对事件的引用不正确，而且您的代码还有一些其他问题。请参阅下面的更正示例：

```
var CCRemoteMain = {
    addFav : function (e) {
        e.preventDefault();
        alert('called');
        return false;
    },
    Init: function () {
        alert('called');
        $('#fav').bind('click', CCRemoteMain.addFav);
    }
};

$(document).ready(function () {
    // Call the default function to be loaded
    var RemoteMainFunc = CCRemoteMain.Init();
});​ 
```

[http://jsfiddle.net/9xkKG/](http://jsfiddle.net/9xkKG/)

# c++ - 检索 16k 键值对的最快方法是什么？

> ID：13898687
> 
> 赞同：4
> 
> 时间：2012-12-16T04:44:43.807
> 
> 标签：c++, c, arrays, map, hashtable

**好的，这是我的情况：**

*   我有一个函数——比如说`U64 calc (U64 x)`——它接受一个 64 位整数参数，执行一些 CPU 密集型操作，并返回一个 64 位值
*   现在，鉴于我`x`事先知道该函数的所有可能输入（s）（尽管有大约 16000 个），我认为预先计算它们然后按需获取它们（从类似数组的结构）可能会更好.
*   理想的情况是将它们全部存储在某个数组中并通过索引（再次）`U64 CALC[]`检索它们`x`
*   这就是问题所在：我可能知道我的 calc 函数的可能输入是什么，但它们绝对**不是连续**的（例如，不是从 1 到 16000，而是可能低至 0 和高达数万亿的值 - 总是具有 64 位范围）

**例如**

```
 X        CALC[X]
-----------------------
  123123   123123123
  12312    12312312
  897523   986123

  etc. 
```

**我的问题来了：**

*   你会如何储存它们？
*   您更喜欢哪种解决方法？
*   现在，鉴于这些值 (from `CALC`)**必须每秒访问数千到数百万次**，这将是性能方面的最佳解决方案？

* * *

***注意**：我没有提及我想到或尝试过的任何事情，以免将答案变成关于 A 与 B 类型事物的辩论，并且大多数情况下不会影响任何人......*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T06:30:44.330

我会使用某种散列函数来创建指向 u64 对的索引，其中一个是创建键的值，另一个是替换值。从技术上讲，如果您需要节省空间但我会使用 u32s，则索引可能是三个字节长（假设 1600 万-“1600 万”-对）。如果存储的值与（哈希冲突）计算的值不匹配，您将输入溢出处理程序。

*   您需要确定自定义散列算法以适合您的数据
*   由于您知道数据的大小，因此您不需要允许数据增长的算法。
*   我会警惕使用一些标准算法，因为它们很少适合特定数据
*   除非您确定代码是所见即所得（不会产生很多不可见的调用），否则我会警惕使用 C++ 方法
*   您的索引应该比对数大 25%

遍历所有可能的输入并确定碰撞次数的最小值、最大值、平均值和标准偏差，并使用这些来确定可接受的性能水平。然后配置文件以实现最佳代码。

所需的内存空间（使用 u32 索引）为 (4*1.25)+8+8 = 每对 21 个字节或 336 MeB，在典型的 PC 上没有问题。

**________ 编辑________**

我受到“RocketRoy”的挑战，要把钱放在嘴边。开始：

该问题与（固定大小）哈希索引中的冲突处理有关。设置舞台：

*   我有一个 n 条目的列表，其中条目中的一个字段包含计算哈希值的 v
*   我有一个 n*1.25（大约）indeces 的向量，使得 indeces 的数量 x 是一个素数
*   计算一个素数 y，它是 x 的一部分
*   向量初始化为 -1 表示未占用

很标准的东西，我想你会同意的。

列表中的条目被处理，哈希值 h 被计算和取模并用作向量的索引，条目的索引被放置在那里。

最终我遇到了索引指向的向量条目被占用（不包含-1）的情况——瞧，碰撞。

那我该怎么办？我将原始 h 保留为 ho，将 y 添加到 h 并取模 x 并在向量中获得一个新索引。如果条目未被占用，我使用它，否则我继续添加 y 模 x 直到我到达 ho。理论上，这会发生，因为 x 和 y 都是素数。在实践中 x 大于 n 所以它不会。

因此，RocketRoy 声称的“重新散列”成本很高，这不是这样的事情。

这种方法的棘手部分 - 与所有散列方法一样 - 是：

*   为 x 确定一个合适的值（最终使用的 x 越大，难度就越大）
*   为 h=a(v)%x 确定算法 a 使得 h 的索引合理均匀（“随机”）进入索引向量，并尽可能少地发生冲突
*   为 y 确定一个合适的值，以使碰撞合理地均匀（“随机”）索引到索引向量中

**________ 编辑________**

很抱歉，我花了这么长时间来编写这段代码……其他事情有更高的优先级。

无论如何，这是证明散列比二叉树具有更好的快速查找前景的代码。它通过一堆散列索引大小和算法来帮助找到最适合特定数据的组合。对于每种算法，代码将打印第一个索引大小，这样查找所需的时间不会超过 14 次搜索（二进制搜索的最坏情况），平均查找需要少于 1.5 次搜索。

如果您没有注意到，我喜欢在这些类型的应用程序中使用素数。

有许多方法可以创建具有强制溢出处理的散列算法。我选择了简单，假设它会转化为速度……确实如此。在我的带有 i5 M 480 @ 2.67 GHz 的笔记本电脑上，平均查找需要 55 到 60 个时钟周期（大约每秒 4500 万次查找）。我实现了一个特殊的 get 操作，具有恒定数量的 indeces 和同上的 rehash 值，循环计数下降到 40（每秒 6500 万次查找）。如果您查看调用 getOpSpec 的行，则索引 i 与 0x444 进行异或运算，以使用缓存来获得更多类似于“真实世界”的结果。

我必须再次指出，该程序为**特定**数据建议了合适的组合。其他数据可能需要不同的组合。

源代码包含生成 16000 个无符号长长对和测试不同常量（索引大小和重新散列值）的代码：

```
#include <windows.h>

#define i8    signed char
#define i16          short
#define i32          long
#define i64          long long
#define id  i64
#define u8           char
#define u16 unsigned short
#define u32 unsigned long
#define u64 unsigned long long
#define ud  u64

#include <string.h>
#include <stdio.h>

u64 prime_find_next     (const u64 value);
u64 prime_find_previous (const u64 value);

static inline volatile unsigned long long rdtsc_to_rax (void)
{
  unsigned long long lower,upper;

  asm volatile( "rdtsc\n"
                : "=a"(lower), "=d"(upper));
  return lower|(upper<<32);
}

static u16 index[65536];

static u64 nindeces,rehshFactor;

static struct PAIRS {u64 oval,rval;} pairs[16000] = {
#include "pairs.h"
};

struct HASH_STATS
{
  u64 ninvocs,nrhshs,nworst;
} getOpStats,putOpStats;

i8 putOp (u16 index[], const struct PAIRS data[], const u64 oval, const u64 ci)
{
  u64 nworst=1,ho,h,i;
  i8 success=1;

  ++putOpStats.ninvocs;
  ho=oval%nindeces;
  h=ho;
  do
  {
    i=index[h];
    if (i==0xffff)    /* unused position */
    {
      index[h]=(u16)ci;
      goto added;
    }
    if (oval==data[i].oval) goto duplicate;

    ++putOpStats.nrhshs;
    ++nworst;

    h+=rehshFactor;
    if (h>=nindeces) h-=nindeces;
  } while (h!=ho);

  exhausted:    /* should not happen */
  duplicate:
    success=0;

  added:
  if (nworst>putOpStats.nworst) putOpStats.nworst=nworst;

  return success;
}

i8 getOp (u16 index[], const struct PAIRS data[], const u64 oval, u64 *rval)
{
  u64 ho,h,i;
  i8 success=1;

  ho=oval%nindeces;
  h=ho;
  do
  {
    i=index[h];
    if (i==0xffffu) goto not_found;    /* unused position */

    if (oval==data[i].oval)
    {
      *rval=data[i].rval;    /* fetch the replacement value */
      goto found;
    }

    h+=rehshFactor;
    if (h>=nindeces) h-=nindeces;
  } while (h!=ho);

  exhausted:
  not_found:    /* should not happen */
    success=0;

  found:

  return success;
}

volatile i8 stop = 0;

int main (int argc, char *argv[])
{
  u64 i,rval,mulup,divdown,start;
  double ave;

  SetThreadAffinityMask (GetCurrentThread(), 0x00000004ull);

  divdown=5;   //5
  while (divdown<=100)
  {
    mulup=3;  // 3
    while (mulup<divdown)
    {
      nindeces=16000;
      while (nindeces<65500)
      {
        nindeces=   prime_find_next     (nindeces);
        rehshFactor=nindeces*mulup/divdown;
        rehshFactor=prime_find_previous (rehshFactor);

        memset (index, 0xff, sizeof(index));
        memset (&putOpStats, 0, sizeof(struct HASH_STATS));

        i=0;
        while (i<16000)
        {
          if (!putOp (index, pairs, pairs[i].oval, (u16) i)) stop=1;

          ++i;
        }

        ave=(double)(putOpStats.ninvocs+putOpStats.nrhshs)/(double)putOpStats.ninvocs;
        if (ave<1.5 && putOpStats.nworst<15)
        {
          start=rdtsc_to_rax ();
          i=0;
          while (i<16000)
          {
            if (!getOp (index, pairs, pairs[i^0x0444]. oval, &rval)) stop=1;
            ++i;
          }
          start=rdtsc_to_rax ()-start+8000;   /* 8000 is half of 16000 (pairs), for rounding */

          printf ("%u;%u;%u;%u;%1.3f;%u;%u\n", (u32)mulup, (u32)divdown, (u32)nindeces, (u32)rehshFactor, ave, (u32) putOpStats.nworst, (u32) (start/16000ull));

          goto found;
        }

        nindeces+=2;
      }
      printf ("%u;%u\n", (u32)mulup, (u32)divdown);

      found:
      mulup=prime_find_next (mulup);
    }
    divdown=prime_find_next (divdown);
  }

  SetThreadAffinityMask (GetCurrentThread(), 0x0000000fu);

  return 0;
} 
```

无法包含生成的对文件（答案显然限于 30000 个字符）。但是给我的收件箱发一条消息，我会邮寄的。

这些是结果：

```
3;5;35569;21323;1.390;14;73
3;7;33577;14389;1.435;14;60
5;7;32069;22901;1.474;14;61
3;11;35107;9551;1.412;14;59
5;11;33967;15427;1.446;14;61
7;11;34583;22003;1.422;14;59
3;13;34253;7901;1.439;14;61
5;13;34039;13063;1.443;14;60
7;13;32801;17659;1.456;14;60
11;13;33791;28591;1.436;14;59
3;17;34337;6053;1.413;14;59
5;17;32341;9511;1.470;14;61
7;17;32507;13381;1.474;14;62
11;17;33301;21529;1.454;14;60
13;17;34981;26737;1.403;13;59
3;19;33791;5333;1.437;14;60
5;19;35149;9241;1.403;14;59
7;19;33377;12289;1.439;14;97
11;19;34337;19867;1.417;14;59
13;19;34403;23537;1.430;14;61
17;19;33923;30347;1.467;14;61
3;23;33857;4409;1.425;14;60
5;23;34729;7547;1.429;14;60
7;23;32801;9973;1.456;14;61
11;23;33911;16127;1.445;14;60
13;23;33637;19009;1.435;13;60
17;23;34439;25453;1.426;13;60
19;23;33329;27529;1.468;14;62
3;29;32939;3391;1.474;14;62
5;29;34543;5953;1.437;13;60
7;29;34259;8263;1.414;13;59
11;29;34367;13033;1.409;14;60
13;29;33049;14813;1.444;14;60
17;29;34511;20219;1.422;14;60
19;29;33893;22193;1.445;13;61
23;29;34693;27509;1.412;13;92
3;31;34019;3271;1.441;14;60
5;31;33923;5449;1.460;14;61
7;31;33049;7459;1.442;14;60
11;31;35897;12721;1.389;14;59
13;31;35393;14831;1.397;14;59
17;31;33773;18517;1.425;14;60
19;31;33997;20809;1.442;14;60
23;31;34841;25847;1.417;14;59
29;31;33857;31667;1.426;14;60
3;37;32569;2633;1.476;14;61
5;37;34729;4691;1.419;14;59
7;37;34141;6451;1.439;14;60
11;37;34549;10267;1.410;13;60
13;37;35117;12329;1.423;14;60
17;37;34631;15907;1.429;14;63
19;37;34253;17581;1.435;14;60
23;37;32909;20443;1.453;14;61
29;37;33403;26177;1.445;14;60
31;37;34361;28771;1.413;14;59
3;41;34297;2503;1.424;14;60
5;41;33587;4093;1.430;14;60
7;41;34583;5903;1.404;13;59
11;41;32687;8761;1.440;14;60
13;41;34457;10909;1.439;14;60
17;41;34337;14221;1.425;14;59
19;41;32843;15217;1.476;14;62
23;41;35339;19819;1.423;14;59
29;41;34273;24239;1.436;14;60
31;41;34703;26237;1.414;14;60
37;41;33343;30089;1.456;14;61
3;43;34807;2423;1.417;14;59
5;43;35527;4129;1.413;14;60
7;43;33287;5417;1.467;14;61
11;43;33863;8647;1.436;14;60
13;43;34499;10427;1.418;14;78
17;43;34549;13649;1.431;14;60
19;43;33749;14897;1.429;13;60
23;43;34361;18371;1.409;14;59
29;43;33149;22349;1.452;14;61
31;43;34457;24821;1.428;14;60
37;43;32377;27851;1.482;14;81
41;43;33623;32057;1.424;13;59
3;47;33757;2153;1.459;14;61
5;47;33353;3547;1.445;14;61
7;47;34687;5153;1.414;13;59
11;47;34519;8069;1.417;14;60
13;47;34549;9551;1.412;13;59
17;47;33613;12149;1.461;14;61
19;47;33863;13687;1.443;14;60
23;47;35393;17317;1.402;14;59
29;47;34747;21433;1.432;13;60
31;47;34871;22993;1.409;14;59
37;47;34729;27337;1.425;14;59
41;47;33773;29453;1.438;14;60
43;47;31253;28591;1.487;14;62
3;53;33623;1901;1.430;14;59
5;53;34469;3229;1.430;13;60
7;53;34883;4603;1.408;14;59
11;53;34511;7159;1.412;13;59
13;53;32587;7963;1.453;14;60
17;53;34297;10993;1.432;13;80
19;53;33599;12043;1.443;14;64
23;53;34337;14897;1.415;14;59
29;53;34877;19081;1.424;14;61
31;53;34913;20411;1.406;13;59
37;53;34429;24029;1.417;13;60
41;53;34499;26683;1.418;14;59
43;53;32261;26171;1.488;14;62
47;53;34253;30367;1.437;14;79
3;59;33503;1699;1.432;14;61
5;59;34781;2939;1.424;14;60
7;59;35531;4211;1.403;14;59
11;59;34487;6427;1.420;14;59
13;59;33563;7393;1.453;14;61
17;59;34019;9791;1.440;14;60
19;59;33967;10937;1.447;14;60
23;59;33637;13109;1.438;14;60
29;59;34487;16943;1.424;14;59
31;59;32687;17167;1.480;14;61
37;59;35353;22159;1.404;14;59
41;59;34499;23971;1.431;14;60
43;59;34039;24799;1.445;14;60
47;59;32027;25471;1.499;14;62
53;59;34019;30557;1.449;14;61
3;61;35059;1723;1.418;14;60
5;61;34351;2803;1.416;13;60
7;61;35099;4021;1.412;14;59
11;61;34019;6133;1.442;14;60
13;61;35023;7459;1.406;14;88
17;61;35201;9803;1.414;14;61
19;61;34679;10799;1.425;14;101
23;61;34039;12829;1.441;13;60
29;61;33871;16097;1.446;14;60
31;61;34147;17351;1.427;14;61
37;61;34583;20963;1.412;14;59
41;61;32999;22171;1.452;14;62
43;61;33857;23857;1.431;14;98
47;61;34897;26881;1.431;14;60
53;61;33647;29231;1.434;14;60
59;61;32999;31907;1.454;14;60
3;67;32999;1471;1.455;14;61
5;67;35171;2621;1.403;14;59
7;67;33851;3533;1.463;14;61
11;67;34607;5669;1.437;14;60
13;67;35081;6803;1.416;14;61
17;67;33941;8609;1.417;14;60
19;67;34673;9829;1.427;14;60
23;67;35099;12043;1.415;14;60
29;67;33679;14563;1.452;14;61
31;67;34283;15859;1.437;14;60
37;67;32917;18169;1.460;13;61
41;67;33461;20443;1.441;14;61
43;67;34313;22013;1.426;14;60
47;67;33347;23371;1.452;14;61
53;67;33773;26713;1.434;14;60
59;67;35911;31607;1.395;14;58
61;67;34157;31091;1.431;14;63
3;71;34483;1453;1.423;14;59
5;71;34537;2423;1.428;14;59
7;71;33637;3313;1.428;13;60
11;71;32507;5023;1.465;14;79
13;71;35753;6529;1.403;14;59
17;71;33347;7963;1.444;14;61
19;71;35141;9397;1.410;14;59
23;71;32621;10559;1.475;14;61
29;71;33637;13729;1.429;14;60
31;71;33599;14657;1.443;14;60
37;71;34361;17903;1.396;14;59
41;71;33757;19489;1.435;14;61
43;71;34583;20939;1.413;14;59
47;71;34589;22877;1.441;14;60
53;71;35353;26387;1.418;14;59
59;71;35323;29347;1.406;14;59
61;71;35597;30577;1.401;14;59
67;71;34537;32587;1.425;14;59
3;73;34613;1409;1.418;14;59
5;73;32969;2251;1.453;14;62
7;73;33049;3167;1.448;14;61
11;73;33863;5101;1.435;14;60
13;73;34439;6131;1.456;14;60
17;73;33629;7829;1.455;14;61
19;73;34739;9029;1.421;14;60
23;73;33071;10399;1.469;14;61
29;73;33359;13249;1.460;14;61
31;73;33767;14327;1.422;14;59
37;73;32939;16693;1.490;14;62
41;73;33739;18947;1.438;14;60
43;73;33937;19979;1.432;14;61
47;73;33767;21739;1.422;14;59
53;73;33359;24203;1.435;14;60
59;73;34361;27767;1.401;13;59
61;73;33827;28229;1.443;14;60
67;73;34421;31583;1.423;14;71
71;73;33053;32143;1.447;14;60
3;79;35027;1327;1.410;14;60
5;79;34283;2161;1.432;14;60
7;79;34439;3049;1.432;14;60
11;79;34679;4817;1.416;14;59
13;79;34667;5701;1.405;14;59
17;79;33637;7237;1.428;14;60
19;79;34469;8287;1.417;14;60
23;79;34439;10009;1.433;14;60
29;79;33427;12269;1.448;13;61
31;79;33893;13297;1.445;14;61
37;79;33863;15823;1.439;14;60
41;79;32983;17107;1.450;14;60
43;79;34613;18803;1.431;14;60
47;79;33457;19891;1.457;14;61
53;79;33961;22777;1.435;14;61
59;79;32983;24631;1.465;14;60
61;79;34337;26501;1.428;14;60
67;79;33547;28447;1.458;14;61
71;79;32653;29339;1.473;14;61
73;79;34679;32029;1.429;14;64
3;83;35407;1277;1.405;14;59
5;83;32797;1973;1.451;14;60
7;83;33049;2777;1.443;14;61
11;83;33889;4483;1.431;14;60
13;83;35159;5503;1.409;14;59
17;83;34949;7151;1.412;14;59
19;83;32957;7541;1.467;14;61
23;83;32569;9013;1.470;14;61
29;83;33287;11621;1.474;14;61
31;83;33911;12659;1.448;13;60
37;83;33487;14923;1.456;14;62
41;83;33587;16573;1.438;13;60
43;83;34019;17623;1.435;14;60
47;83;31769;17987;1.483;14;62
53;83;33049;21101;1.451;14;61
59;83;32369;23003;1.465;14;61
61;83;32653;23993;1.469;14;61
67;83;33599;27109;1.437;14;61
71;83;33713;28837;1.452;14;61
73;83;33703;29641;1.454;14;61
79;83;34583;32911;1.417;14;59
3;89;34147;1129;1.415;13;60
5;89;32797;1831;1.461;14;61
7;89;33679;2647;1.443;14;73
11;89;34543;4261;1.427;13;60
13;89;34603;5051;1.419;14;60
17;89;34061;6491;1.444;14;60
19;89;34457;7351;1.422;14;79
23;89;33529;8663;1.450;14;61
29;89;34283;11161;1.431;14;60
31;89;35027;12197;1.411;13;59
37;89;34259;14221;1.403;14;59
41;89;33997;15649;1.434;14;60
43;89;33911;16127;1.445;14;60
47;89;34949;18451;1.419;14;59
53;89;34367;20443;1.434;14;60
59;89;33791;22397;1.430;14;59
61;89;34961;23957;1.404;14;59
67;89;33863;25471;1.433;13;60
71;89;35149;28031;1.414;14;79
73;89;33113;27143;1.447;14;60
79;89;32909;29209;1.458;14;61
83;89;33617;31337;1.400;14;59
3;97;34211;1051;1.448;14;60
5;97;34807;1789;1.430;14;60
7;97;33547;2417;1.446;14;60
11;97;35171;3967;1.407;14;89
13;97;32479;4349;1.474;14;61
17;97;34319;6011;1.444;14;60
19;97;32381;6337;1.491;14;64
23;97;33617;7963;1.421;14;59
29;97;33767;10093;1.423;14;59
31;97;33641;10739;1.447;14;60
37;97;34589;13187;1.425;13;60
41;97;34171;14437;1.451;14;60
43;97;31973;14159;1.484;14;62
47;97;33911;16127;1.445;14;61
53;97;34031;18593;1.448;14;80
59;97;32579;19813;1.457;14;61
61;97;34421;21617;1.417;13;60
67;97;33739;23297;1.448;14;60
71;97;33739;24691;1.435;14;60
73;97;33863;25471;1.433;13;60
79;97;34381;27997;1.419;14;59
83;97;33967;29063;1.446;14;60
89;97;33521;30727;1.441;14;60 
```

第 1 列和第 2 列用于计算 rehash 值和索引大小之间的粗略关系。接下来的两个是第一个索引大小/重新散列因子组合，平均不到 1.5 次搜索，最坏的情况是 14 次搜索。然后是平均和最坏情况。最后，最后一列是每次查找的平均时钟周期数。它没有考虑读取时间戳寄存器所需的时间。

最佳常量的实际内存空间（# of indeces = 31253 和 rehash factor = 28591）比我最初指出的要多（16000*2*8 + 1,25*16000*2 => 296000 字节）。实际大小为 16000*2*8+31253*2 => 318506。

最快的组合是 11/31 的近似比率，索引大小为 35897，rehash 值为 12721。这将平均为 1.389（1 个初始散列 + 0.389 个 rehash），最大值为 14（1+13）。

**________ 编辑________**

我删除了“goto found;” 在 main() 中显示所有组合，它表明可以有更好的性能，当然是以更大的索引大小为代价的。例如，57667 和 33797 的组合产生 1.192 的平均值和 6 的最大重新哈希。44543 和 23399 的组合产生 1.249 的平均值和 10 最大的重新哈希（与索引表相比，它节省了 (57667-44543)*2=26468 字节57667/33797）。

与变量相比，具有硬编码哈希索引大小和重新哈希因子的专用函数将在 60-70% 的时间内执行。这可能是由于编译器（gcc 64 位）用乘法代替了模，而不必从内存位置获取值，因为它们将被编码为立即值。

**________ 编辑________**

关于缓存的主题，我看到了两个问题。

第一个是数据缓存，我认为这是不可能的，因为查找只是某个较大过程中的一小步，并且您冒着表数据的缓存行开始在较小或（可能）较大程度上失效的风险-如果不是完全 - 通过更大过程的其他步骤中的其他数据访问。即，整个过程中执行的代码和访问的数据越多，任何相关的查找数据将保留在缓存中的可能性就越小（这可能与 OP 的情况有关，也可能不相关）。要使用（我的）散列查找条目，每次需要执行的比较都会遇到两次缓存未命中（一个加载索引的正确部分，另一个加载包含条目本身的区域）。在第一次尝试中找到一个条目将导致两次未命中，第二次尝试四次，以此类推。在我的示例中，每次查找 60 个时钟周期的平均成本意味着该表可能完全驻留在 L2 缓存中，并且在大多数情况下 L1 不必去那里。我的 x86-64 CPU 具有 L1-3，RAM 等待状态大约为 4、10、40 和 100，这对我来说表明 RAM 完全被排除在外，而大部分是 L3。

第二个是代码缓存，如果它很小、紧凑、内联并且控制传输（跳转和调用）很少，它将产生更显着的影响。我的哈希例程可能完全驻留在 L1 代码缓存中。对于更正常的情况，代码缓存行加载的数量越少，加载速度就越快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:39:31.637

执行记忆，或者简单地说，缓存你已经计算的值并计算新的值。您应该对输入进行哈希处理并检查该结果的缓存。您甚至可以从一组您认为该函数会被更频繁地调用的缓存值开始。除此之外，我认为您不需要像其他答案所建议的那样走极端。做一些简单的事情，当您完成应用程序后，您可以使用分析工具来查找瓶颈。

编辑：一些代码

```
#include <iostream>
#include <ctime>
using namespace std;

const int MAX_SIZE = 16000;

int preCalcData[MAX_SIZE] = {};

int getPrecalculatedResult(int x){
 return preCalcData[x];
}

void setupPreCalcDataCache(){
  for(int i = 0; i < MAX_SIZE; ++i){
    preCalcData[i] = i*i; //or whatever calculation
  }
}

int main(){
  setupPreCalcDataCache();

  cout << getPrecalculatedResult(0) << endl;
  cout << getPrecalculatedResult(15999) << endl;

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T05:47:59.430

制作一个键值对结构数组。

按键排序数组，把它作为静态数组放在你的程序中，只有128kbyte。

然后在您的程序中，通过键进行简单的二进制查找平均只需要 14 次键比较即可找到正确的值。在现代 PC 上应该能够达到每秒 3 亿次查找的速度。

您可以使用 qsort 排序和使用 bsearch 搜索，这两个标准库函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T05:09:24.857

我不会太担心性能。这个简单的例子，使用数组和二分查找[`lower_bound`](http://www.cplusplus.com/reference/algorithm/lower_bound/)

```
#include <stdint.h>
#include <algorithm>
#include <cstdlib>
#include <iostream>
#include <memory>

const int N = 16000;
typedef std::pair<uint64_t, uint64_t> CALC;
CALC calc[N];

static inline bool cmp_calcs(const CALC &c1, const CALC &c2)
{
    return c1.first < c2.first;
}

int main(int argc, char **argv)
{
    std::iostream::sync_with_stdio(false);
    for (int i = 0; i < N; ++i)
        calc[i] = std::make_pair(i, i);

    std::sort(&calc[0], &calc[N], cmp_calcs);

    for (long i = 0; i < 10000000; ++i) {
        int r = rand() % 16000;
        CALC *p = std::lower_bound(&calc[0], &calc[N], std::make_pair(r, 0), cmp_calcs);
        if (p->first == r)
            std::cout << "found\n";
    }

    return 0;
} 
```

并编译

```
g++ -O2 example.cpp 
```

在我 5 年的旧电脑上，包括设置在内，在大约 2 秒内完成了 10,000,000 次搜索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T05:28:45.193

您需要有效地存储 16,000 个值，最好是在内存中。我们假设这些值的计算比从存储中访问它们更耗时。

您可以使用许多不同的数据结构来完成工作，包括数据库。如果您以可查询的块访问这些值，那么 DB 开销很可能会被吸收并分散在您的处理中。

您已经在问题标签中提到了 map 和 hashmap（或 hashtable），但这些可能不是您问题的最佳答案，尽管它们可以做得很好，前提是散列函数不比直接计算更昂贵目标 UINT64 值，它必须是您的参考基准。

*   [范埃德博阿斯树](http://en.wikipedia.org/wiki/Van_Emde_Boas_tree)
*   [B 树的许多变体](http://en.wikipedia.org/wiki/B-tree)（广泛用于数据库引擎、高性能文件系统），
*   [尝试](http://en.wikipedia.org/wiki/Trie)

可能更适合。有了一些经验，我可能会选择 B-tree：它们支持相当好的序列化。这应该可以让您提前在不同的程序中准备数据集。VEB 树的访问时间非常好（O（log log（n）），但我不知道它们序列化的难易程度。

稍后，如果您需要更高的性能，了解您的“数据库”的使用模式以弄清楚您可以在存储之上实现哪些[缓存技术也会很有趣。](http://en.wikipedia.org/wiki/Cache_algorithms)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-16T05:16:42.123

使用 std::pair 比任何 map 的速度都要好。

但是如果我是你，我首先使用一个 std::list 来存储数据，在我得到它们之后，我将它们移动到一个简单的向量中，然后如果你自己实现一个简单的二叉树搜索，那么检索会非常快。

# visual-c++ - MFC：如何绘制静态文本

> ID：13898689
> 
> 赞同：1
> 
> 时间：2012-12-16T04:45:00.820
> 
> 标签：visual-c++, mfc, draw, invalidation

我尝试在一个名为 IDC_RESULT 的静态文本控件中绘制。当我单击确定按钮时，静态文本将根据我选择的形状显示不同的图片。所以我声明了三个 bool 变量：isLine ，is Rect 和 isEllipse，每次我选择 Lien 单选框，我使布尔变量 isLine 为真，其他为假，与 Rectangle 和 Ellipse 相同。

这是我的代码：

```
void CDrawDlg::OnPaint()
{

    CWnd* pWnd = (CWnd*)GetDlgItem(IDC_RESULT); 
    CPaintDC dcPaint(pWnd);
    CPen pen(PS_SOLID,2,RGB(0,0,0));   
    dcPaint.SelectObject(&pen);

    CRect  rect;
    pWnd->GetClientRect(&rect);

    if(isLine)
    {   
        dcPaint.MoveTo(10,150);
        dcPaint.LineTo (350,150);

    }

    if(isRect)
    {
        dcPaint.Rectangle(50, 100, 300, 200);
    }

    if(isEllipse)
    {
        doSomething;
    }

    ReleaseDC(&dcPaint);

    if (IsIconic())
    {
        CPaintDC dc(this); 

        SendMessage(WM_ICONERASEBKGND, reinterpret_cast<WPARAM>(dc.GetSafeHdc()), 0);

    int cxIcon = GetSystemMetrics(SM_CXICON);
    int cyIcon = GetSystemMetrics(SM_CYICON);
    CRect rect;
    GetClientRect(&rect);
    int x = (rect.Width() - cxIcon + 1) / 2;
    int y = (rect.Height() - cyIcon + 1) / 2;

    dc.DrawIcon(x, y, m_hIcon);

}
else
{
    CDialogEx::OnPaint();
}
} 
```

下面的功能与确定按钮相关联：

```
void CDrawDlg::OnBnClickedOk()
{
     Invalidate(false);
} 
```

问题是：当我选择矩形并单击确定按钮绘制一个矩形时，如何擦除静态文本控件中的线条，但我无法擦除线条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:15:33.673

[Invalidate](http://msdn.microsoft.com/en-us/library/ax04k970.aspx "CWnd::无效") ( )的参数`bErase`控制是否应擦除更新区域内的背景。既然你通过了`false`，那就不是了。`TRUE`而是通过。

顺便说一句，您应该使用`TRUE`/`FALSE`而不是`true`/`false`作为 MFC 方法的参数。即使类型兼容，它们仍然不同。

# python - 如何在 Selenium Webdriver 中识别输入框

> ID：13898691
> 
> 赞同：1
> 
> 时间：2012-12-16T04:45:11.520
> 
> 标签：python, selenium

我第一次使用 Selenium Webdriver 并且正在运行一个非常简单的脚本，但它不起作用。我想打开 Firefox，转到 LinkedIn，然后在电子邮件登录字段中输入我的电子邮件地址。使用下面的代码，我可以让前两个操作正常工作，但是脚本没有正确识别电子邮件字段，因此我的电子邮件地址永远不会在任何地方输入。

```
browser = webdriver.Firefox()   #Get local session of firefox
browser.get("http://www.linkedin.com")  #Load page
elem = browser.find_element_by_name("session_key-login")  #Find the login box
elem.send_keys("email@gmail.com" + Keys.RETURN)   #Enter email into login box 
```

如何正确识别电子邮件登录框并将其传递给“elem”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:07:28.303

你怎么办

```
elem.send_keys("email@gmail.com") 
```

更新

* * *

您使用的标识符不正确，您可以使用以下任一标识符。

`elem = browser.find_element_by_id("session_key-login")`

`elem = browser.find_element_by_name("session_key")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:11:18.393

尝试给
element.send_keys("email@gmail.com");

代替

```
 elem.send_keys("email@gmail.com" + Keys.RETURN) 
```

# python - App Engine：将表单数据映射到 url

> ID：13898693
> 
> 赞同：1
> 
> 时间：2012-12-16T04:45:26.100
> 
> 标签：python, html, google-app-engine, python-2.7

使用 Google App Engine 时如何将表单数据编码到 url？

下面的代码会生成一个表单，您可以在其中输入一些文本。然后文本显示在另一页上`"/sign"`

而不是指向`/sign`我想指向`/sign?message="hello"`

这是我的代码，来自这里：[https](https://developers.google.com/appengine/docs/python/gettingstartedpython27/handlingforms) ://developers.google.com/appengine/docs/python/gettingstartedpython27/handlingforms ）

```
import cgi
import webapp2

from google.appengine.api import users

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("""
          <html>
            <body>
              <form action="/sign" method="post">
                <div><textarea name="content" rows="3" cols="60"></textarea></div>
                <div><input type="submit" value="Sign Guestbook"></div>
              </form>
            </body>
          </html>""")

class Guestbook(webapp2.RequestHandler):
    def post(self):
        self.response.out.write('<html><body>You wrote:<pre>')
        self.response.out.write(cgi.escape(self.request.get('content')))
        self.response.out.write('</pre></body></html>')

app = webapp2.WSGIApplication([('/', MainPage),
                              ('/sign', Guestbook)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:51:48.097

我不确定你想达到什么目的。如果你写下你的意图，你可能会得到更可靠的建议。

为了得到结果，我认为您的描述需要使用 get 而不是 post。获取将更改网址。这是修改后的代码：

```
import cgi
import webapp2

from google.appengine.api import users

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("""
          <html>
            <body>
              <form action="/sign">
                <div><textarea name="content" rows="3" cols="60"></textarea></div>
                <div><input type="submit" value="Sign Guestbook"></div>
              </form>
            </body>
          </html>""")

class Guestbook(webapp2.RequestHandler):
    def get(self):
        self.response.out.write('<html><body>You wrote:<pre>')
        self.response.out.write(cgi.escape(self.request.get('content')))
        self.response.out.write('</pre></body></html>')

app = webapp2.WSGIApplication([('/', MainPage),
                              ('/sign', Guestbook)],
                              debug=True) 
```

如果您想了解更多关于 webapp2 和 get 和 post 方法的信息，请查看[udacity CS253](http://www.udacity.com/)

# url - 在 Razor MVC 中更改 URL 中的 GET 参数

> ID：13898701
> 
> 赞同：1
> 
> 时间：2012-12-16T04:47:20.957
> 
> 标签：url, razor, asp.net-mvc-4

我正在 ASP.NET MVC 4 中构建一个分页脚本，我希望能够获取页面的当前 URL

```
 /Cards/Search?Page=&Terms=&Display=false 
```

并更改 Page 参数的值。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:38:02.160

这可能不是最有效的方法，但它确实适用于我正在做的事情：

```
RouteValueDictionary rvd = new RouteValueDictionary();
foreach(string item in Request.QueryString){
    if (item != "Page") { rvd.Add(item, Request[item]); }
} 
rvd.Add("Page", 1);

Url.Action("Action", rvd) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T10:30:07.617

建议你看看 RouetConfig 是如何工作的。 [http://www.asp.net/mvc/tutorials/controllers-and-routing](http://www.asp.net/mvc/tutorials/controllers-and-routing)

从这里开始 global.asax

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes); // Research this
        BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

没有什么能阻止你调用你的控制器动作。您也可以在那里重定向

```
RedirectToAction("Action","controller"); 
```

或直接重定向...

```
Redirect(myHackedUrl); 
```

如果这是一个更具体的永久网络规则，那么在 IIS 级别还有一个非常有用的工具来管理重定向。 [http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

# ios - iOS - iCarousel 仅使用可见视图的索引

> ID：13898703
> 
> 赞同：3
> 
> 时间：2012-12-16T04:48:07.913
> 
> 标签：ios, view, indexing, icarousel

我正在实现 iCarousel（使用 Coverflow 类型）来显示我的应用程序中可用的一些视频的一堆图像。（2个单独的轮播，同样的问题）

我使用 numberOfItemsInCarousel（当前为 60）和 viewForItemAtIndex 的视频数组来使用我的数组中的对象来构建视图。

但是，只有 5 个视频被使用。因此，轮播中显示了 60 个项目，但重复的只是相同的 5 个项目。当我在“viewForItemAtIndex”中记录索引时，它只被调用 5 次（0,1，...5 是日志结果）。经过一些测试，似乎唯一被调用的索引是默认情况下在轮播中可见的任何内容。

是什么赋予了？*阵列已经过测试，以确保它们填充了所有独特的视频。数组很好，它与 iCarousel 方法有关。

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel{
    if(carousel==freeCarousel){
        NSLog(@"Free: %i",freeVideos.count);
        return freeVideos.count;
    }
    if(carousel==feeCarousel){
        NSLog(@"Fee: %i",feeVideos.count);
        return feeVideos.count;
    }
    return 0;
}
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view{
    NSLog(@"TESTING");
    if (view == nil){
        //Copy array for easier use of global Video / File object
        NSArray *copy = [[NSArray alloc] init];
        if(carousel==freeCarousel){
            copy = [NSArray arrayWithArray:freeVideos];
        }
        else if(carousel==feeCarousel){
            copy = [NSArray arrayWithArray:feeVideos];
        }

        Videos *currentVideo = [copy objectAtIndex:index];
        Files *file = [currentVideo valueForKey:@"files"];
        NSLog(@"TITLE TEST: %@",currentVideo.title);
        //Video Button
        UIButton *buttonVideo = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 465, 310)];
        [buttonVideo setTag:[currentVideo.videoID intValue]];
        [buttonVideo addTarget:self action:@selector(showVideoDetails:) forControlEvents:UIControlEventTouchUpInside];

        //Thumbnail
        UIImageView *videoThumbnail = [[UIImageView alloc] initWithFrame:buttonVideo.bounds];
        //Border
        [videoThumbnail setBackgroundColor:[UIColor whiteColor]];

        //Caption
        UIImage *captionImage = [UIImage imageNamed:@"video-box-caption"];
        UILabel *caption = [[UILabel alloc] initWithFrame:CGRectMake(0, videoThumbnail.frame.size.height-captionImage.size.height, videoThumbnail.frame.size.width, captionImage.size.height)];
        [caption setBackgroundColor:[UIColor colorWithPatternImage:captionImage]];
        [caption setTextAlignment:NSTextAlignmentCenter];
        [caption setFont:[UIFont fontWithName:@"Open Sans Condensed" size:16]];
        [caption setTextColor:[UIColor whiteColor]];
        [caption setText:currentVideo.title];
        [videoThumbnail addSubview:caption];

        if(file.thumbnailPath!=(id)[NSNull null] || ![file.thumbnailPath isEqualToString:@"missing_image.png"]){
            UIImage *thumbnailImage = [[DataManager sharedManager] generateThumbnailImage:currentVideo];
            [videoThumbnail setImage:thumbnailImage];
            [buttonVideo addSubview:videoThumbnail];
        }else{
            UIImage *thumbnailImage = [UIImage imageNamed:@"video-details-thumbnail"];
            [videoThumbnail setImage:thumbnailImage];
            [buttonVideo addSubview:videoThumbnail];
        }
        view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, buttonVideo.frame.size.width, buttonVideo.frame.size.height)];
        [view addSubview:buttonVideo];
    }
    return view;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T08:58:16.983

您错误地实现了 viewForItemAtIndex 方法。

iCarousel 回收视图以避免在移动时分配新对象（如 UITableView）。if (view == nil) 检查是说“如果视图为 nil，则创建一个新视图，否则使用我已经设置的视图而不修改它）。

将任何特定于索引的逻辑移到 if (if view == nil) 检查之外。如果您查看库中包含的 iCarousel 示例，它会显示如何正确执行此操作。

# google-chrome - 如何强制 Chrome 在新选项卡中打开指定链接，而不是在带有扩展名的同一窗口中打开？

> ID：13898706
> 
> 赞同：1
> 
> 时间：2012-12-16T04:48:56.480
> 
> 标签：google-chrome, google-chrome-extension

> **可能重复：**
> [Javascript - 我如何在新选项卡（而不是新窗口）中打开链接？](https://stackoverflow.com/questions/6296013/javascript-how-can-i-open-a-link-in-new-tab-and-not-new-window)

我正在编写一个扩展程序，为用户提供一个选项，强制 chrome 在新选项卡中打开 AD 链接，而不是在同一窗口中打开。我想知道是否有办法在不修改标签中的“target = '_top'”的情况下这样做？这些广告链接都在 iframe 中，我不想将内容脚本注入所有这些 iframe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:58:43.653

您可以使用`[chrome.tabs.create](https://developer.chrome.com/extensions/tabs.html#method-create)(options)`在 Chrome 扩展程序中创建新选项卡。

# c++ - 试图删除指针会触发断点

> ID：13898707
> 
> 赞同：0
> 
> 时间：2012-12-16T04:49:10.010
> 
> 标签：c++, class, pointers, delete-operator

我正在开发的程序的目的是创建一个类，通过模拟动态指针数组来“改进”默认整数数组数据类型。尝试删除指针和指针数组时，我一直遇到错误，其中显示“Windows 已触发 project4.exe 中的断点。

这可能是由于堆损坏，这表明 project4.exe 或其已加载的任何 DLL 中存在错误。

这也可能是由于用户在 project4.exe 获得焦点时按 F12。

输出窗口可能有更多诊断信息。”

```
class Array
{
private:
    int length;
int* data;
public:
    Array();
    Array(const Array &cpy);
    ~Array();
    bool addint(int toadd);
    bool deletelast();
    int getlength();
    friend ostream& operator<<(ostream &out, const Array &n);
};

ostream& operator<<(ostream &out, const Array &n);

Array::Array()
{
    length = -1;    
    data = NULL;
}

Array::Array(const Array &cpy)
{  
    length = cpy.length;                //value of length is copied

    if (length < 0)
        data = NULL;
    else
    {
        data = new int [length];

        for (int i=0; i<=length; i++)
            data[i] = cpy.data[i];
    }

}    

Array::~Array()
{
    if (length != 0)
        delete [] data;
    else
        delete data;

    data = NULL;
}  

bool Array::addint(int toadd)
{   
    length ++;
    int* point = new int[length];

    for (int i=0; i < length; i++)
        point[i] = data[i];             

    point[length] = toadd;

    if (length != 0)    
        delete [] data; 

    data = point;

    point = NULL;

    return true;
}    

bool Array::deletelast()
{
    int* temppoint;
    if (length > 0)
        temppoint = new int [length-1]; 
    else
        temppoint = new int[0];

    for (int i=0; i<length; i++)        
        temppoint[i] = data[i];

    if (length == 0)
        temppoint[0] = 0;

    length --;
    delete [] data; 
    data = temppoint;
    temppoint = NULL;

    return true;
}  

void menu(Array var)
{
    int selection=0,
        input;
    bool success;
    Array* arrcpy;
    while (selection != 3)
    {
        if (var.getlength() == -1)
        {
            cout << "What would you like to demonstrate?" << endl << "1) Add an integer " << endl
            << "2) Exit" << endl << "Enter your selection: ";
            cin >> selection;
            if (selection == 2)
                selection = 4;
        }
        else
        {
            cout << endl << "Now what would you like to demonstrate?" << endl << "1) Add an integer " << endl
            << "2) Delete the last entered integer" << endl << "3) Copy constructor" << endl << "4) Exit" << endl << "Enter your selection: ";
            cin >> selection;
        }

        if (selection==1)
        {
            cout << endl << "The length of the array before adding a new value is: " << var.getlength() + 1 << endl;
            cout << "Please enter the integer that you wish to add: ";
            cin >> input; 
            success = var.addint(input);
            if (success)
                cout << endl << "The data input was a success!" << endl << "The length of the array is now: " 
                << var.getlength() + 1 << endl << "The new value of the array is: " << var << endl;
            else
                cout << endl << "The input failed" << endl;
        }       
        if (selection == 2)
        {
            cout << endl << "The lenght of the array before the deletion is: " << var.getlength() + 1 << endl 
                << "and the value held in the array is: " << var << endl;
            success = var.deletelast();
            if (success)
                cout << endl << "The data deletion was a success!" << endl << "The length of the array is now: "
                << var.getlength() + 1 << endl << "The new value of the array is: " << var << endl;
            else
                cout << endl << "The deletion failed" << endl;
        }       
        if (selection == 3)
        {
                cout << endl << "The lenght of the array being copied is: " << var.getlength() + 1 << endl 
                << "and the value held in the array is: " << var << endl;
                arrcpy=new Array(var);
                cout << endl << "The length of the copied array is: " << arrcpy->getlength() +1 << endl
                << "and the value contained in the array is: " << *arrcpy;
                delete arrcpy;
        }
    }
} 
```

这是我遇到的问题的所有相关源代码。即将出现`delete`运算符和`delete []`运算符的每个实例都导致此断点错误，我不确定自己做错了什么。

编辑：重写代码以使长度值默认为 0 而不是 -1，现在一切正常！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:52:26.360

我相信`for (int i=0; i<=length; i++)`复制构造函数中的 应该包含`i<length`（小于，不小于或等于）。这是一个明显的问题。

此外，您正在传递`addint()`方法中的界限。数组中的最后一个元素位于索引 [length-1] 处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:12:32.110

```
int* point = new int[length]; 
```

由于您的长度从 -1 开始，因此该行的第一个调用将是 do `new int[0]`。可能是问题..如果你坚持不修复 的语义`length`，你想`length+1`在这里

无关的点，你应该看看它是怎么`std::vector`做的，而不是重新分配每个添加，你应该尝试过度分配并且只有在空间被填满时才重新分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-16T01:10:41.400

我知道这是一个旧线程，我承认我还没有阅读所有评论，但是关于为什么当长度更改为 0 时它似乎工作的主题我相信这可能是由于给数组提供了一个 nullptr被制成无效的大小，后来，试图删除这样的指针会导致断点。

# database - 我想创建一个医生预约应用程序，这将是设置他的工作时间表的最佳方法？

> ID：13898708
> 
> 赞同：0
> 
> 时间：2012-12-16T04:49:19.647
> 
> 标签：database

每个医生都应该有自己的工作时间表，周一，周二，......，以及工作时间，半小时的时间段。

我有点迷失如何设计表格并将它们关联起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:23:22.790

标准设计可能如下：

```
Doctors(id,name,specialization,...)
Patients(id,name,birthdate,.....)
Calendar(doc_id,pat_id,startDate,endDate,subject,....) 
```

# android - Ajax 请求结束前的 jQuery 移动函数调用

> ID：13898714
> 
> 赞同：2
> 
> 时间：2012-12-16T04:51:21.513
> 
> 标签：android, jquery, cordova, jquery-mobile

这是我的问题。当我的主页显示时，我调用 LoadUser 函数，该函数在成功`globalUser`时使用返回的 JSON 设置变量。加载后我调用警报函数，但它说`globalUser`未定义。我尝试了许多其他解决方法，但我总是收到未定义的消息。

如果我调用`alert(globalUser);`成功函数，它会按预期工作，提醒对象。

```
$('#Home').live('pageshow', function(event) {
  $.when(LoadUser()).done(function(a1) {
    alert(globalUser);
  });
});

function LoadUser() {
  $.ajax({
    // connects with the web service and validate de user input
    url: "http://localhost:51396/Icademy.asmx/GetUser",
    contentType: "application/json; charset=utf-8",
    data: { "userName": "'rodrigo'" },
    dataType: "jsonp",
    success: function(json) {
      globalUser = JSON.parse(json.d);
      return globalUser;
    },
    error: function(ret) {
      alert("Um erro ocorreu, tente novamente mais tarde.");
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:38:47.617

您不需要`$.when`在您的情况下打扰您，只需`$.ajax`在您的`pageshow`事件中实施

```
$('#Home').live('pageshow', function(event) {
  $.ajax({
    // connects with the web service and validate de user input
    url: "http://localhost:51396/Icademy.asmx/GetUser",
    contentType: "application/json; charset=utf-8",
    data: { "userName": "'rodrigo'" },
    dataType: "jsonp",
    success: function(json) {
      globalUser = JSON.parse(json.d);

      alert(globalUser)
    },
    error: function(ret) {
      alert("Um erro ocorreu, tente novamente mais tarde.");
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:00:48.297

我不明白为什么您不在成功功能中做所有事情。正如你自己所说，这行得通。此外，您还可以成功运行代码。在您的示例中，如果 ajax 调用出现问题，您将显示“发生错误”警报，但您的 when() 代码将假定成功。

说了这么多……

您显然意识到 ajax 的异步特性，但是您使用 .when().done() 错误地解决了它。LoadUser() 立即返回，它返回 null，而不是延迟。因此， .done() 可能会立即触发。

解决方案是如示例中那样将 .when(LoadUser()) 替换为 .when($.ajax())，或者从 LoadUser() 返回 $.ajax 的结果（即延迟对象）。

# html - 使用 :cover 的完整背景；添加水平滚动

> ID：13898718
> 
> 赞同：0
> 
> 时间：2012-12-16T04:51:38.937
> 
> 标签：html, css, background-image, frontend

我正在开发一个需要具有完整背景图像和 650 高度的标题的网站。目前我正在使用背景尺寸：封面；具有 100% 宽度的属性。

虽然它正在工作，但它会在右侧留下一个约 50 像素的尴尬水平滚动。这在较小的分辨率中更为突出。

我也尝试将背景应用于正文而不是标题 div。但同样的事情也发生在那里。

您可以在此处查看预览 - [http://nitingarg.com/projects/tfe/](http://nitingarg.com/projects/tfe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:02:30.357

实际上是导致滚动的页脚上的填充。它是 100%，内边距为 40 像素。这就是整个页面宽度 + 40px。删除填充或将其设为“填充：20px 0px;” 你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:11:42.617

我检查了你的网页源代码，缩放 100% 它在右侧有大约 50px 的水平滚动，但是当你增加缩放水平时会增加更多。

在我为自己的网站解决同样的问题时尝试下面的 css

```
.header {
    min-width:980px; 
    height:auto;
    margin:0 auto;
}
.container {
    width:100%; 
    height:650px;
    margin:0 auto;
} 
```

祝你好运 ：）

# javascript - 10次 点击后如何禁用输入属性？

> ID：13898720
> 
> 赞同：0
> 
> 时间：2012-12-16T04:52:22.333
> 
> 标签：javascript, input, disabled-input

我正在尝试删除文本框的样式或背景以在单击 10 次后显示内容。我怎样才能在 Javascript 上做到这一点？

这是我的html：

```
<input id="firstN" type="text" style="color:#FF0000; background-color:#FF0000"> 
```

这是我的JS：

```
 function check() {

    var tries++;

    if (tries == 10){
        document.getElementById('firstN').disabled= true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T04:58:44.623

问题是这`tries`是一个局部变量（`check`函数的局部变量）。每次`check`调用时，都会创建一个名为的新变量并将`tries`其初始化为 0。

试试这个：

```
var tries = 0;
function check() {
  tries++;
  if (tries == 10) {
    document.getElementById('firstN').style.background = '#ffffff';
  }
} 
```

（我假设您在`check`单击元素时已经有一些代码要调用。如果没有，则需要向元素添加[单击处理程序](https://developer.mozilla.org/en-US/docs/DOM/element.onclick)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T04:59:07.947

每次进入此函数时，您都在实例化一个 var“尝试”。将变量向上移动到它将递增的位置：

```
var btn = document.getElementById("btnclick");
btn.onclick = check;
var tries = 0;
function check() {

    tries++;

    if (tries == 10){
        var ele = document.getElementById("firstN");
        ele.value= "DISABLED";

        ele.disabled = true;
    }
}​ 
```

编辑：

工作[JSFiddle](http://jsfiddle.net/TNCodeMonkey/t9M6P/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T05:01:44.457

将其存储在 cookie 中：

```
<script type="text/javascript">var clicks = 0;</script>
<input id="firstN" type="text" style="color:#FF0000; background-color:#FF0000" value="Click" onclick="clicks++">

onclick="$.cookie('clicks', $.cookie('clicks') + 1);" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T05:54:12.437

干得好。当您看到它有效时删除警告行。

```
<html>
<head>
    <title>Test</title>

    <script>
 function check(){

    var getClicks = parseInt(document.getElementById('firstN').getAttribute('clicks')); //Get Old value

    document.getElementById('firstN').setAttribute("clicks", 1 + getClicks); //Add 1

    if (getClicks === 10){ //Check
        alert('Locked');
        document.getElementById('firstN').disabled= true;
    } else {
        alert(getClicks); //Remove else statement when you see it works.
    }

}

    </script>
</head>
<body>

<form action="#">
    Input Box: <input id="firstN" type="text" style="color:#FF0000; background-color:#FF0000" onclick="check();" clicks="0">
    <input type="submit" name="Submit" value="Submit">
</form>
</body>
</html> 
```

# r - R中数据框的简单连接计算

> ID：13898726
> 
> 赞同：2
> 
> 时间：2012-12-16T04:53:52.413
> 
> 标签：r

我有一个数据框`a`，其中 A、B、C 是单独的条目

```
Source Target N
A B 100
A D 200 
```

我有另一个`b`条目属性的数据框

```
Name Rate1 Rate2
A  0.1 0.2
B  0.2 0.3 
```

我想计算 中的新列`Flow` ，`a`因为它是基于行计算的`Flow = a$N * b[Name == a$Source]$Rate1`。我尝试`apply`按行使用，但我觉得它很慢。有更快的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T05:20:11.313

我不知道您尝试过什么应用，但这里是合并和转换的答案

```
 transform(merge(a,b,by.x = 'Source',by.y ='Name'),flow = N*Rate1)

  Source Target   N Rate1 Rate2 flow
1      A      B 100   0.1   0.2   10
2      A      D 200   0.1   0.2   20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T06:51:15.500

这是一个相当有表现力的解决方案，与您尝试的代码非常相似：

```
>  a$Flow <- a$N*b$Rate1[ match(a$Source, b$Name) ]
> a
  Source Target   N Flow
1      A      B 100   10
2      A      D 200   20 
```

该函数是和`match`的基础。它对于构建索引向量以从备选方案中挑选特别有用。`merge``%in%`

# android - 在 Android 中将 Button 和处理程序添加到 ActionBar

> ID：13898729
> 
> 赞同：0
> 
> 时间：2012-12-16T04:55:23.363
> 
> 标签：android, android-actionbar

这个应用程序跟踪我的锻炼程序，我想与几个朋友分享它，所以我需要制作一个按钮来添加额外的锻炼。目前，我有一个带有 + 按钮的操作栏，如下所示，按下时会扩展为 editText 字段。

![由于代表人数少，我不允许发布的图像...](../Images/52ad2b642dcf75909b47eebb8d2ac43f.png)

**问题 #1：** editText 字段似乎设置为 wrap_Content，我宁愿它填充剩余空间，但我不知道如何。它是这样实现的；

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_create"
        android:title="@string/menu_create"
        android:showAsAction="ifRoom|collapseActionView"
        android:actionViewClass="android.widget.EditText" />
</menu> 
```

**问题#2：**我还需要一个按钮来显示，一旦输入了练习的名称就可以按下它。到目前为止，我还没有弄清楚如何做到这一点。我只是在使用[Android Dev Guide](http://developer.android.com/guide/topics/ui/actionbar.html)，我无法在谷歌上搜索任何接近我所追求的东西......

我在正确的轨道上吗？如果是这样，有关如何添加按钮和修复 editText 字段的任何提示/提示？如果没有，对其他实施方式有什么建议吗？（显然，一个全新的活动有点矫枉过正......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:14:21.473

感谢@Gunnar Karlsson 的提示，自定义布局为我完成了这项工作。再具体一点;

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/exerciseInput"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:inputType="text"
        android:layout_weight="1" >
        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/addExerciseButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/exerciseadd" />
</LinearLayout> 
```

# svg - 使用优雅降级的 SVG 图像

> ID：13898732
> 
> 赞同：2
> 
> 时间：2012-12-15T23:02:37.377
> 
> 标签：svg

我正在尝试在网站上使用 SVG 形式的图像，因为它比我可以使用的 PNG/GIF 或 JPG 更清晰。事情是我想确保旧的浏览器也可以看到这个图像（基于这个：[http](http://caniuse.com/svg) ://caniuse.com/svg ）所以有没有一种标准的方法可以将 SVG 图像优雅地降级为 PNG/GIF 或 JPG？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:54:10.647

通过“旧浏览器”，您的意思是 IE。或者至少在 IE9 在 SVG 支持方面十多年来第一次赶上世界其他地方。

检查 IE 对 SVG 元素和命名空间做了什么。iirc，它只是忽略了与 SVG 相关的任何内容，您可以使用条件注释来修复 IE 并回退到使用图像来代替它。

```
**SVG stuff here ignored by IE<9**
    <!--[if lt IE 9]>
    <img src="">
    <![endif]--> 
```

# html - 删除 A 标签中的填充

> ID：13898739
> 
> 赞同：1
> 
> 时间：2012-12-16T04:58:26.137
> 
> 标签：html, css, padding

为什么我会得到这个奇怪的填充，我该如何删除它？

```
<div style="border: 1px solid black;">
<a href="?lang=ru" ><img  src="http://top-5ive.net/images/flags/ru.png" alt=""></a>
</div>​ 
```

[http://jsfiddle.net/uE9F6/1/](http://jsfiddle.net/uE9F6/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T05:05:26.077

这是因为它`line-height`比旗帜的图像大。指定`line-height:11px;`。[请参阅此 jsFiddle 以获得更多帮助](http://jsfiddle.net/dvfz2/)。

有关这方面的更多信息，请参阅[W3C 关于行高的信息](http://www.w3.org/TR/REC-CSS1/#the-height-of-lines)。

# android - 应用程序立即崩溃

> ID：13898742
> 
> 赞同：0
> 
> 时间：2012-12-16T04:58:41.410
> 
> 标签：android

我对 Android 非常陌生，所以我可能没有做一些简单的事情来给我这个问题。一旦我尝试运行我的应用程序，它就会立即关闭，我不知道为什么。

这是我的Java代码：

```
package com.example.androidside;
import java.util.List;
import android.os.Bundle;
import android.app.Activity;
import android.app.ActivityManager;
import android.util.Log;
import android.view.Menu;
public class MainActivity extends Activity {
    public static final String TAG = "MyActivity";
    ActivityManager am;
    int s;
    List<ActivityManager.RunningAppProcessInfo> l;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        l = WhatchyaDoin();
        s = l.size();
        for(int i = 0; i < s; i++) {
            Log.d(TAG, "" + l.get(i));
        }
    }
    public List<ActivityManager.RunningAppProcessInfo> WhatchyaDoin() {
        return(am.getRunningAppProcesses());
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

如果有人可以帮助我，将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:05:09.540

当您从. `am`_`NullPointerException``WhatchayDoin()``onCreate()`

您应该学习如何从您的程序中读取 logcat 输出。（在 Eclipse 中，您可以通过转到 Window->Show View->Other 然后导航到 Android->LogCat 打开 logcat 视图。这通常会告诉您发生了什么。如果您无法弄清楚，那么，当您发布有关 Android 崩溃的问题时，请始终包含相关的 logcat 输出。

`am`您可以使用以下方法进行初始化`onCreate()`：

```
am = (ActivityManager) getSystemService(ACTIVITY_SERVICE); 
```

# session - 刷新一个 我有一个“j_security_check 连接中断（http 代码 408）”，建议的解决方案是https://stackoverflow.com/a/2141274/1852036但我的页面结构是使用template.xhtml和view.xhtml的组合：我的模板.xhtml： <ui:composition <html="" ...="" <f:view="" <h:body="" <ui:insert="" name="content">... 我的 view.xhtml 在session.maxInactiveInterval时刷新 <ui:composition ...="" <ui:define="" name="content"> ... 有人可以帮我这样做吗？我想刷新这个<ui:composition视图，我不能<meta http-equiv="refresh" content="#{session.maxInactiveInterval}">在template.xhtml上使用，因为它被多个视图使用 我已经使用 p:poll 来解决类似的问题。就像是 <p:poll interval="#{session.maxInactiveInterval - 1}" process="@all"> sessionauthenticationjsf-2primefacesj-security-check 4 1 回答 1 This answer is useful 0 我已经使用 p:poll 来解决类似的问题。就像是 <p:poll interval="#{session.maxInactiveInterval - 1}" process="@all"> 于 2012-12-16T18:46:15.400 回答 Related 0 windows - WaitForSingleObject 返回 ERROR_IO_PENDING 3 html - 如何在 flexslider 上获得控制导航？ 2 passwords - 如何在我的数据库中存储其他应用程序的密码？（加密） 1 python - 我如何在扭曲的高速公路上使用不同的网址？ 1 jquery - IE兼容视图模式下的superfish菜单错误 0 javascript - 更改gridview页面后jQuery选项卡不起作用 1 c# - SelectedValuePath 的内部如何工作（在组合框/列表框上）？ 2 java - 重新排序 GridLayout SWT 1 java - Jackson，继承，域对象和泛型 2 php - 使用表单和会话（PHP）发送数组 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</p:poll></p:poll></ui:composition视图，我不能<meta></ui:composition></ui:composition>

> ID：13898744
> 
> 赞同：0
> 
> 时间：
> 
> 标签：session, authentication, jsf-2, primefaces, j-security-check

我有一个**“j_security_check 连接中断（http 代码 408）”**，建议的解决方案是`<meta http-equiv="refresh" content="#{session.maxInactiveInterval}"/>`https://stackoverflow.com/a/2141274/1852036[但](https://stackoverflow.com/a/2141274/1852036)我的页面结构是使用*template.xhtml*和*view.xhtml*的*组合*：**我的模板.xhtml：****`<ui:composition`** 

 ****```
<html ...
<f:view ...
<h:body ...
 <ui:insert name="content">
... 
```

**我的 view.xhtml 在*session.maxInactiveInterval时刷新***

```
<ui:composition ...
<ui:define name="content">
... 
```

有人可以帮我这样做吗？我想刷新这个`<ui:composition`视图，我不能`<meta http-equiv="refresh" content="#{session.maxInactiveInterval}"/>`在***template.xhtml***上使用，因为它被多个视图使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:46:15.400

我已经使用 p:poll 来解决类似的问题。就像是

```
<p:poll interval="#{session.maxInactiveInterval - 1}" process="@all"/> 
```****

# php - 访问 JSON 编码数据中的上传文件

> ID：13898746
> 
> 赞同：0
> 
> 时间：2012-12-16T04:58:55.890
> 
> 标签：php, extjs4

我已将表单数据编码为 JSON。这已通过以下 ExtJS 存储配置实现：

```
Ext.define('XXX.store.Registration', {
    extend: 'Ext.data.Store',
    model: 'XXX.model.Registration',
    autoLoad: true,
    pageSize: 15,
    autoLoad: {
        start: 0,
        limit: 15
    },

    proxy: {
        type: 'ajax',
        api: {
            create: './server/registration/create.php',
            read: './server/registration/get.php',
            update: './server/registration/update.php',
            destroy: './server/registration/destroy.php'
        },
        reader: {
            type: 'json',
            root: 'registrations',
            successProperty: 'success'
        },
        writer: {
            type: 'json',
            writeAllFields: true,
            encode: true,
            root: 'registrations'
        }
    }

}); 
```

我的服务器端代码已在 PHP 中实现。我可以通过使用字段名称作为键来访问编码的表单字段，如下所示：

```
$reg  = $_REQUEST['registrations'];

$data = json_decode(stripslashes($reg));

$registerNum = $data->registerNum;
$folioNum = $data->folioNum; 
```

我表单中的一个字段是`fileuploadfield`. 如何从上传的 JSON 访问上传的文件。任何帮助将不胜感激。

# debugging - 猫鼬调试日志到单独的文件

> ID：13898748
> 
> 赞同：3
> 
> 时间：2012-12-16T04:59:16.340
> 
> 标签：debugging, node.js, express, mongoose

我将猫鼬调试设置为真。

> mongoose.set('debug', true)

但是现在调试日志正在控制台中打印。我需要为 mongoose 调试指定一个单独的文件，以便在需要时检查查询。我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-20T10:57:56.973

伟大的 aaron heckmann 在[Logging outbound queries中回答了这个问题](https://groups.google.com/forum/#!topic/mongoose-orm/aCMpWx587b4)

```
mongoose.set('debug', function (collectionName, method, query, doc [, options]) {

  //save to file what you need

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:24:42.117

好吧，您可能必须打开一个文件句柄并将错误写入该文件。

但对于一个捷径，我所做的是在我启动我的应用程序时捕获控制台的所有输出并将其记录到一个文件中：

```
node app.js 1>$APP_DIR/log/app.log 2>&1 & 
```

然后你可以尾随日志文件：

```
tail -f ./log/app.log 
```

# c++ - 将临时绑定到引用是否需要 C++ 中的复制构造函数？

> ID：13898750
> 
> 赞同：7
> 
> 时间：2012-12-16T04:59:49.477
> 
> 标签：c++, reference, copy-constructor, temporary

考虑以下代码：

```
class A {
  A(const A&);
 public:
  A() {}
};

int main() {
  const A &a = A();
} 
```

此代码在 GCC 4.7.2 中编译良好，但在 Visual C++ 2010 中编译失败，并出现以下错误：

```
test.cc(8) : error C2248: 'A::A' : cannot access private member declared in class 'A'
        test.cc(2) : see declaration of 'A::A'
        test.cc(1) : see declaration of 'A' 
```

那么在将临时对象绑定到引用时是否有必要让复制构造函数可访问？

这与我之前的问题有些相关：

[有没有办法禁用将临时绑定到 const 引用？](https://stackoverflow.com/q/13823626/471164)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T05:23:40.527

> **那么在将临时对象绑定到引用时是否有必要让复制构造函数可访问？**

C++11 后 - 否
C++11 前 - 是。

* * *

这段代码在 GCC 4.7.2 中编译得很好，因为它符合 C++11 标准。

C++11 标准规定，当从 初始化 const 引用时`prvalue`，它必须直接绑定到引用对象，并且不允许创建临时对象。此外，不使用或不需要复制构造函数。

在 C++11 之前，规则是不同的。并且这种行为（*是否将调用复制构造函数*）是实现定义的。C++03 允许在将 const 引用绑定到临时对象时调用复制构造函数，因此在 C++11 之后，复制构造函数需要可访问。Visual C++2010 遵循 C++03 标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T05:11:52.980

C++03 标准的第 8.5.3.5 节声明这是实现定义的：

> 如果初始化表达式是右值，T2 是类类型，并且“cv1 T1”与“cv2 T2”引用兼容，则引用以下列方式之一绑定（选择由实现定义）：
> 
> -- 引用绑定到由右值表示的对象（参见 3.10）或该对象内的子对象。
> 
> -- 创建一个“cv1 T2”[sic] 类型的临时对象，并调用构造函数将整个右值对象复制到临时对象中。引用绑定到临时对象或临时对象中的子对象。
> 
> 无论复制是否实际完成，用于制作复制的构造函数都应该是可调用的。

所以看起来这两种实现都符合 C++03 标准。

最后一句话有点混乱，但是我的阅读方式，这意味着实现可能会选择第二种方式，但仍然优化掉副本。在这种情况下，即使副本实际上没有完成，复制构造函数也必须是可访问的，类似于返回值优化。

对于 C++11 标准，第二种方式不再是一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T05:06:39.627

Visual C++ 不正确；该标准并未表明必须可以访问复制构造函数才能将`const`引用绑定到临时对象。

# objective-c - 在 UIView 中实现 ZBar 二维码阅读器

> ID：13898753
> 
> 赞同：3
> 
> 时间：2012-12-16T05:00:18.320
> 
> 标签：objective-c, ios, qr-code, zbar-sdk, zbar

我在这里真的需要帮助。如果问题解决很明显或者我的代码很糟糕，我对 iOS/Objective-C 还是很陌生。对我轻点！！:-)

我正在努力将用于读取 QR 码的 ZBarSDK 集成到我正在构建的 iPad 应用程序中。如果我使用 ZBarReaderController（其中有很多关于实现的教程和指南），它可以正常工作。但是，我想让相机出现在 UIView 中，而不是全屏相机。

现在我已经做到了让相机视图（readerView）按预期出现在 UIView（ZBarReaderView）中，但是当它扫描代码时出现错误。在扫描代码之前不会出现错误，让我相信这与委托相关或其他原因。

这是我的代码的重要部分：（ZBarSDK.h 在 PCH 文件中导入）

SignInViewController.h

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@class AVCaptureSession, AVCaptureDevice;

@interface SignInViewController : UIViewController
< ZBarReaderDelegate >
{
    ZBarReaderView *readerView;
    UITextView *resultText;
}

@property (nonatomic, retain) UIImagePickerController *imgPicker;
@property (strong, nonatomic) IBOutlet UITextView *resultText;
@property (strong, nonatomic) IBOutlet ZBarReaderView *readerView;

-(IBAction)StartScan:(id) sender; 
```

SignInViewController.m

```
#import "SignInViewController.h"

@interface SignInViewController ()

@end

@implementation SignInViewController

@synthesize resultText, readerView;

-(IBAction)StartScan:(id) sender
{
readerView = [ZBarReaderView new];
readerView.readerDelegate = self;

readerView.tracksSymbols = NO;

readerView.frame = CGRectMake(30,70,230,230);
readerView.torchMode = 0;
readerView.device = [self frontFacingCameraIfAvailable];

ZBarImageScanner *scanner = readerView.scanner;
[scanner setSymbology: ZBAR_I25
               config: ZBAR_CFG_ENABLE
                   to: 0];

[self relocateReaderPopover:[self interfaceOrientation]];

[readerView start];

[self.view addSubview: readerView];
resultText.hidden=NO;

}

- (void) readerControllerDidFailToRead: (ZBarReaderController*) reader
                         withRetry: (BOOL) retry{
NSLog(@"the image picker failing to read");

}

- (void) imagePickerController: (UIImagePickerController*) reader     didFinishPickingMediaWithInfo: (NSDictionary*) info
{

NSLog(@"the image picker is calling successfully %@",info);
id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];
ZBarSymbol *symbol = nil;
NSString *hiddenData;
for(symbol in results)
    hiddenData=[NSString stringWithString:symbol.data];

NSLog(@"the symbols  is the following %@",symbol.data);

resultText.text=symbol.data;

NSLog(@"BARCODE= %@",symbol.data);

NSLog(@"SYMBOL : %@",hiddenData);
resultText.text=hiddenData;

} 
```

扫描代码时出现的错误：

```
2012-12-16 14:28:32.797 QRTestApp[7970:907] -[SignInViewController     readerView:didReadSymbols:fromImage:]: unrecognized selector sent to instance 0x1e88b1c0
2012-12-16 14:28:32.799 QRTestApp[7970:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[SignInViewController readerView:didReadSymbols:fromImage:]: unrecognized selector sent to instance 0x1e88b1c0' 
```

我还不太担心结果会发生什么，只是想克服这个错误。由于 ZBarReaderView 上严重缺乏教程或文档（无论如何对于初学者），我花了很长时间才让相机出现在 UIView 中。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T01:14:32.473

我解决了这个问题。代表姓名不正确。它应该是“ZbarReaderViewDelegate”。我错过了“视图”部分。啊！！

```
@interface SignInViewController : UIViewController
< ZBarReaderViewDelegate >
{
ZBarReaderView *readerView;
UITextView *resultText;
} 
```

# jquery - jQuery Mobile 和带有 URL 的选择菜单

> ID：13898754
> 
> 赞同：0
> 
> 时间：2012-12-16T05:00:55.443
> 
> 标签：jquery, url, select, mobile, menu

一直在与这个斗争一段时间。我试图让选择菜单作为导航菜单工作，但我无法让 URL 正常工作并让它实际更改页面。

在头上：

```
<script>
$(function() {
    $("#select-choice-1").click(function() {
        $.mobile.changePage($("#select-choice-1"));
    });        
});
</script> 
```

使用此菜单：

```
<div id="MobileWrapper" data-role="fieldcontain">
<select name="select-choice-1" id="select-choice-1" data-theme="a" data-form="ui-btn-up-a" data-mini="true">
<option data-placeholder="true">Navigation</option><!-- data=placeholder makes this not show up in the pop up-->
<option value="/index.php" data-ajax="false">Home</option>
<option value="/services/index.php" data-ajax="false">Services</option>
<option value="/trainers/index.php" data-ajax="false">Trainers</option>
<option value="/locations/index.php" data-ajax="false">Locations</option>
<option value="/calendar/index.php" data-ajax="false">Calendar</option>
<option value="/contactus/index.php" data-ajax="false">Contact Us</option>
</select>
</div><!--END MobileWrapper DIV--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:13:50.577

尝试

```
$(function() {
    $("#select-choice-1").change(function() {
        $.mobile.changePage($(this).val());
    });        
}); 
```

每次用户单击下拉菜单时，您都在告诉 jQuery mobile 更改为下拉菜单。

`.change``$(this).val()`仅当从下拉列表中选择新选项并获取所选项目的值时才会触发。

**更新**

上述解决方案解决了部分问题，但导航仍然无法正常工作，因为......

导航 URL 被解析为`http://www.domain.com/...`和页面加载`http://domain.com/...`，默认情况下 jQuery mobile 阻止跨域页面。

有几个解决方案（未经测试）

1.  在文档头部添加基本标签
    `<base href="http://domain.com/" />`
2.  通过在 DOM 准备好之前设置以下内容来允许 jQuery 中的 crossDomainPages
    `$.mobile.allowCrossDomainPages = true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:05:30.187

不知道为什么，但是如果我切换到 jQuery mobile 的早期版本，我的菜单可以工作：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

# visual-studio - 以编程方式将事件处理程序添加到单选按钮数组

> ID：13898756
> 
> 赞同：1
> 
> 时间：2012-12-16T05:01:22.587
> 
> 标签：visual-studio, vb.net-2010

尝试将事件处理程序添加到在用户输入上创建的单选按钮，以[this](https://stackoverflow.com/questions/2760892/add-on-click-event-to-picturebox-vb-net)和[this](http://msdn.microsoft.com/en-us/library/ms743596.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)作为示例。

但是，我收到一个`answerOptions`不是事件的错误。

创建单选按钮

```
Private answerOptions(n) As RadioButton
...    
Private Sub showQuestion(n As Integer)

For i = 0 To answerOptions.Length - 1
    answerOptions(i) = New RadioButton
    AddHandler answerOptions, AddressOf Me.Radios_Click
    With answerOptions(i)
        ' --------- SET TEXT, LOCATION ETC.
    End With
    Me.Controls.Add(answerOptions(i))
Next
End Sub 
```

计划然后处理事件

```
Private Sub Radios_Click(sender As Object, e As EventArgs) Handles answerOptions.checked

End Sub 
```

我希望在检查无线电时发生一些事情。不想使用复选框，因为我想一次限制一个选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:25:45.017

在您的表单或页面中尝试此操作

```
 Private Sub ClickButton(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Dim Rbtn As RadioButton
    Rbtn = CType(sender, RadioButton)
    MsgBox(Rbtn.Text)
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim i As Integer
    Dim Rbtn As New RadioButton()

    For i = 0 To 19
        Rbtn = New RadioButton()
        With Rbtn
            .Name = "RBtn" & i
            .Text = .Name
            .Checked = False
            .Left = 20
            .Top = (i * 20)
            .Visible = True
            Me.Controls.Add(Rbtn)
            AddHandler Rbtn.Click, AddressOf ClickButton
        End With
    Next

End Sub 
```

# javascript - 选择浏览器端的样式表还是服务器端的样式表？

> ID：13898757
> 
> 赞同：1
> 
> 时间：2012-12-16T05:01:43.160
> 
> 标签：javascript, browser, stylesheet

我的问题是我必须为不同的浏览器使用不同的样式表，我必须在两种方法之间进行选择：

1.  在浏览器端选择 javascript

2.  根据 HTTP 请求在服务器端选择。

哪个更好？为什么？

（这是一个大学项目，不是公共网站）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T05:08:09.147

支持客户端：您可以提供静态页面，而不必运行脚本，因此服务器开销更少。

支持服务器端：如果用户禁用了 Javascript，它将起作用。

# javascript - 基于图层是否可见的图像切换

> ID：13898760
> 
> 赞同：0
> 
> 时间：2012-12-16T05:02:19.240
> 
> 标签：javascript, jquery

我有一个网站，其中包含多个页面作为图层（而不是单独的 HTML 文件）。

我有三个图像：

```
<img src="image1.png" onclick="showlayer(1);return false;" />
<br />
<img src="image2.png" onclick="showlayer(2);return false;" />
<br />
<img src="image3.png" onclick="showlayer(3);return false;" /> 
```

单击图像时，它会显示相关图层并隐藏其他图层。

我希望它还将图像更改为 image1_active.png / image2_active.png / image3_active.png 取决于哪个图层是可见的（而不是通过 onclick 事件处理程序）。

为什么不通过 onclick 事件处理程序？...

第 1 层在 CSS 中默认设置为可见，因此默认情况下 image1 也需要为 image1_active.png - 因为用户还没有点击任何内容，这就是为什么我需要图像开关来检测层的可见性/显示以更改图像。

showlayer 脚本是：

```
function showlayer(n){
    for(i=1;i<=3;i++){
        document.getElementById("layer"+i).style.display="none";
        document.getElementById("layer"+n).style.display="block";
    }
} 
```

是否可以为此目的调整此脚本？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:16:47.647

您可以像这样为图像添加 ID：

```
<img src="image1.png" onclick="showlayer(1);return false;" id="image1" />
<br />
<img src="image2.png" onclick="showlayer(2);return false;" id="image2" />
<br />
<img src="image3.png" onclick="showlayer(3);return false;" id="image3" /> 
```

然后在当前脚本中设置活动图像，例如：

```
function showlayer(n){
    for(i=1;i<=3;i++){
        document.getElementById("layer"+i).style.display="none";
        document.getElementById("layer"+n).style.display="block";
        document.getElementById("image"+n).src = 'image' + n + '_active.png';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:25:42.360

```
document.onload = function(){
    showlayer(1);
}

function showlayer(n){
    var range = [1, 2, 3];
    range = range.filter(function(item){
        return item != n;
    });

    for(i in range){
        document.getElementById("layer"+range[i]).style.display="none";
        document.getElementById("layer"+range[i]).src = 'image' + range[i] + '.png';
    }

    document.getElementById("layer"+n).style.display="block"; 
    document.getElementById("layer"+n).src = 'image' + n + '_active.png';
} 
```

# jquery - 如何停止任何事情滑块

> ID：13898762
> 
> 赞同：0
> 
> 时间：2012-12-16T05:02:25.687
> 
> 标签：jquery, anythingslider

我在同一页面上有几个滑块，但不会一次全部显示。我希望能够通过事件函数停止滑块并删除动画。因为它现在工作，如果我隐藏一个滑块，它仍然在后台运行，dom 显示图像旋转并且 url 参数发生变化。

我见过这个问题，但它对我不起作用：[当 Flowplayer 点击时如何停止任何滑动](https://stackoverflow.com/questions/2827312/how-to-stop-anythingslider-when-flowplayer-clicked)

这也有点相似，但我想删除滑块而不是重新启动：[AnythingSlider: how to restart slideshow](https://stackoverflow.com/questions/5879060/anythingslider-how-to-restart-slideshow)

```
function stopAnythingSlider() {
  // I receive `TypeError: $(".anythingSlider").data("AnythingSlider") is undefined`
  // $('.anythingSlider').data('AnythingSlider').startStop(false);
} 
```

*编辑：我使用了我的列表的 id 而不是`.anythingSlider`这似乎有效，

```
 $('#idOfList').data('AnythingSlider').startStop(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:26:19.303

我必须指定要停止的列表的 ID

```
function stopAnythingSlider() {
   $('#idOfList').data('AnythingSlider').startStop(false);
} 
```

如果我想停止具有同一类的多个列表：

```
function stopAnythingSliderMultiple() {
  $('.anythingSlider ul.hideTheseOnly').each(function() {
    $(this).data('AnythingSlider').startStop(false);
  });
} 
```

# python - 如何从一个类发出 Qtsignal 导致从 pyqt 中的父类发出 Qtsignal

> ID：13898767
> 
> 赞同：2
> 
> 时间：2012-12-16T05:04:51.673
> 
> 标签：python, multithreading, qt, pyqt, pyqt4

我有一个要求，我的执行将在线程中发生，我想从该线程向主类发出信号。下面是我的示例代码片段，我在其中创建了一个实例`MainClass`并将其分配给`temp`. 其中`MainClass`内部连接到`Thread1`将发生实际工作的线程。当信号从我发出时，`Thread1`我希望`signalcalled`执行连接的定义`temp`

**代码片段**

```
class Thread1(QtCore.QThread):

    ThreadSignal = QtCore.pyqtSignal(str)

    While True:

        #some statments
        if Condition:
            ThreadSignal.emit('Yes')
        else:
            ThreadSignal.emit('No')

class MainClass(QtCore.QObject):

    MainSignal = QtCore.pyqtSignal(str)

    Testinstance = Thread1()

def signalcalled(s):

    print s

if __name__=='__main__':
    app = AtGui.QApplication(sys.argv)
    temp = MainClass()
    temp.MainSignal.connect(signalcalled)
    sys.exit(app.exec()_) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:47:28.830

这应该有效：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myThread(QtCore.QThread):
    threadSignal = QtCore.pyqtSignal(str)

    def __init__(self, parent=None):
        super(myThread, self).__init__(parent)

    def run(self):
        while True:
            if True:
                self.threadSignal.emit('Yes')

            else:
                self.threadSignal.emit('No')

            break

class myMainClass(QtCore.QObject):
    mainSignal = QtCore.pyqtSignal(str)

    def __init__(self, parent=None):
        super(myMainClass, self).__init__(parent)

        testInstance = myThread(self)
        testInstance.threadSignal.connect(self.mainSignal.emit)
        testInstance.start()

def signalcalled(s):
    print s

if __name__ == "__main__":
    import  sys

    app = QtGui.QApplication(sys.argv)
    main = myMainClass()
    main.mainSignal.connect(signalcalled)
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:48:31.997

```
class Thread1(QtCore.QThread):

    ThreadSignal = QtCore.pyqtSignal(str)

    def __init__(self):
        super(myThread, self).__init__()

    def run(self):

        While True:

            #some statments
            if Condition:
                ThreadSignal.emit('Yes')
            else:
                ThreadSignal.emit('No')

class MainClass(QtCore.QObject):

    MainSignal = QtCore.pyqtSignal(str)

    def __init__(self):

        super(myThread, self).__init__()

        Testinstance = Thread1()
        Testinstance.ThreadSignal.connect(MainSignal)
        Testinstance.start()

def signalcalled(s):

    print s

if __name__=='__main__':
    app = AtGui.QApplication(sys.argv)
    temp = MainClass()
    temp.MainSignal.connect(signalcalled)
    sys.exit(app.exec()_) 
```

# python - 精灵从其组中继承属性的最简洁方式？

> ID：13898769
> 
> 赞同：-1
> 
> 时间：2012-12-16T05:05:15.380
> 
> 标签：python, pygame

具体来说，我希望 sg_fireball 中的每个精灵都有“反弹”，而不是从 Spell() 给每个精灵“反弹”。有没有一种干净的方法可以做到这一点，而无需将“反弹”作为 Spell() 的参数，或循环通过 sg_fireball？

相关代码片段：

```
self.sg_fireball = pygame.sprite.Group()
self.sg_fireball.speed = 6.0
self.sg_fireball.image = pygame.image.load("fireball.png")
self.sg_fireball.bounces = 1

if event.type == pygame.MOUSEBUTTONDOWN:
    self.character.cast(self.sg_fireball)

def cast(self, sg):
    sg.add(Spell(self.rect.center, sg.speed, self.dir, sg.image))

class Spell(pygame.sprite.Sprite):
    def __init__(self,pos, speed, direction, img, bounces):
        pygame.sprite.Sprite.__init__(self)
        self.bounces = bounces
        self.image = img
        self.rect = pygame.Rect(pos, (8,8))
        self.posx = self.rect.x
        self.posy = self.rect.y
        self.speed = speed
        self.dir = direction
        self.velx = self.speed*math.cos(self.dir)
        self.vely = self.speed*math.sin(self.dir) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:16:44.853

如果我理解正确，您希望某些精灵具有特定属性，而其他精灵则不会。这是多态和继承的完美例子。这是您可以执行的选项之一：

1.  你将普通法术子分类为弹力法术。然后，您可以使用另一个更新功能来处理弹跳。您通常可以在与 NormalSpell 相同的精灵组中添加 BouncySpell。

# silverlight - Windows Phone 8：如果按下返回键，如何在退出应用程序之前显示消息框？

> ID：13898772
> 
> 赞同：0
> 
> 时间：2012-12-16T05:05:34.220
> 
> 标签：silverlight, windows-phone-7, exit, windows-phone-8, back

我有一个应用程序需要在用户退出应用程序至少一次时引起用户的注意。所以我得到下面的代码来显示一个消息框。我不知道的是，如果用户已经阅读了消息，我该如何真正退出应用程序？因为似乎后退键事件总是会出现在我设置的呼叫（OnBackKeyPress）或者什么是处理显示消息框而不弄乱覆盖BackKey的好方法？因为如果屏幕上有另一个弹出窗口并且用户按下了后退键，那么如果我尝试自己处理后退键，我似乎遇到了一些异常。

我的理想情况是，一旦她/他按下消息框的退出按钮，应用程序就会立即关闭。如果按下取消，它将返回而不退出。请帮忙。谢谢！

我用过的东西……但效果不好

```
private void OnBackKeyPressed(object sender, CancelEventArgs e)
    {
        e.Cancel = true;

        CheckBox checkBox = new CheckBox()
        {
            Content = "Do not ask me again",
            Margin = new Thickness(0, 14, 0, -2)
        };

        TiltEffect.SetIsTiltEnabled(checkBox, true);

        CustomMessageBox messageBox = new CustomMessageBox()
        {
            Caption = "Would you like to stop and exit?",
            Message =
                "If you want to continue listen music while doing other stuff, please use Home key instead of Back key",
            Content = checkBox,
            LeftButtonContent = "Exit",
            RightButtonContent = "Cancel",
        };

        messageBox.Dismissed += (s1, e1) =>
        {
            switch (e1.Result)
            {
                case CustomMessageBoxResult.LeftButton: //Exit
                    return;// What to do here??
                case CustomMessageBoxResult.RightButton: //Cancel
                case CustomMessageBoxResult.None:
                    break;
                default:
                    break;
            }
        };
        messageBox.Show();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:04:24.900

如果您真的需要按钮说“退出”，则必须使用 ColinE 或 Paul Annetts 解决方案。就我个人而言，我会尝试以另一种方式来制定消息，并使用像这样的普通消息框：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
   string caption = "Stop music and exit?";
   string message ="If you want to continue listen music while doing other stuff, please use Home key instead of Back key. Do you still want to exit?";
   e.Cancel = MessageBoxResult.Cancel == MessageBox.Show(message, caption, MessageBoxButton.OKCancel);

   base.OnBackKeyPress(e);
} 
```

这将显示一个消息框，但带有“确定”和“取消”按钮，如果用户按下“确定”，将直接退出。

而对于“不再询问”，也许可以在设置页面上添加设置。并在用户第一次在“确定”和“取消”之间选择时添加第二个对话框，如果他或她想再次看到该对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T06:46:01.610

不幸的是，没有很好的方法来实现您所追求的结果。Windows Phone 不允许您以编程方式退出应用程序。大多数人在这种情况下使用的解决方案是抛出一个未经处理的异常。请参阅以下内容：

[如何退出windows phone 7应用程序？](https://stackoverflow.com/questions/4492053/how-to-exit-windows-phone-7-app) [有没有办法以编程方式退出我的应用程序？（Windows 电话 7）](https://stackoverflow.com/questions/3993507/is-there-a-way-to-programmatically-quit-my-app-windows-phone-7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:12:25.060

我使用自定义消息框做了同样的事情。像这样修改您的代码：

```
messageBox.Dismissed += (s1, e1) =>
    {
       switch (e1.Result)
        {
            case CustomMessageBoxResult.LeftButton: //Exit
                App.Current.Terminate(); //Put this line followed by break
                break;
            case CustomMessageBoxResult.RightButton: //Cancel
                break;
            default:
                break;
        }
    }; 
```

当用户按下退出时，您的应用程序将终止，当按下关闭时，“左”按钮的默认操作是关闭消息框。这应该工作，只要你把线

```
break; 
```

在正确的地方

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T08:01:32.510

对于 WP8，您可以调用`Application.Current.Terminate()`以编程方式退出应用程序。对于 WP7，这是不可用的，您必须选择 Colin 提供的选项之一。

但是，如果你走这条路，你应该小心满足 Microsoft Store 的认证要求，因为如果你的应用程序没有按预期运行，它可能会被拒绝。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-25T11:23:28.403

您可以简单地取消先按下后退键的事件，然后根据在消息框上单击的按钮，您可以采取如下适当的操作：

```
private void BackKey_Pressed(object sender, System.ComponentModel.CancelEventArgs e)
{
        e.Cancel = true;
        MessageBoxResult messageBoxResult = MessageBox.Show("Text", "Caption", MessageBoxButton.OKCancel);
        if (messageBoxResult == MessageBoxResult.OK)
        {
            Application.Current.Terminate();
        }
} 
```

# c# - 如何在 Windows 手机上使用 Auth Token 获取 Google Tasks (REST API)

> ID：13898782
> 
> 赞同：3
> 
> 时间：2012-12-16T05:08:15.997
> 
> 标签：c#, rest, oauth, google-api, windows-phone-8

在获得具有所需权限的身份验证令牌后，我正在尝试访问用户的任务。

请求网址：

```
https://www.googleapis.com/tasks/v1/lists/%40default/tasks?key={YOUR_API_KEY} 
```

提出请求的代码：

```
 public void FetchTasks(string url)
    {
        var httpWebRequest = HttpWebRequest.CreateHttp(url);
        httpWebRequest.BeginGetResponse(new AsyncCallback(FinishedWebRequest), httpWebRequest);
    }

    private void FinishedWebRequest(IAsyncResult ar)
    {
        var httpWebRequest = ar.AsyncState as HttpWebRequest;
        var httpWebResponse = (HttpWebResponse) httpWebRequest.EndGetResponse(ar);
        byte[] responseByteArray= new byte[200];
        httpWebResponse.GetResponseStream().Read(responseByteArray, 0, responseByteArray.Length);
    } 
```

回复

```
 {
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

我是否需要其他任何内容作为请求标头的一部分以及 URL 中的身份验证令牌？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T04:38:32.240

您需要将`Authorization`HTTP 标头设置`access_token`为对您想要访问其任务的用户有效。假设您已经完成了 OAuth 2.0 舞蹈并且有一个有效的`access_token`，您可以通过更改为以下内容来设置标题`FetchTasks()`：

```
public void FetchTasks(string url, string accessToken)
{
    var httpWebRequest = HttpWebRequest.CreateHttp(url);
    request.Headers.Add("Authorization", "Bearer "+accessToken);
    httpWebRequest.BeginGetResponse(new AsyncCallback(FinishedWebRequest), httpWebRequest);
} 
```

Also, it looks like you're accessing the APIs using HTTP directly. Managing OAuth 2.0 tokens can be a bit cumbersome, You may want to investigate using the [official Google .NET API client library](https://code.google.com/p/google-api-dotnet-client/) which takes care of a lot of the heavy lifting for you.

# unit-testing - 使用 mocha 进行所有测试后在哪里删除数据库并关闭连接

> ID：13898783
> 
> 赞同：17
> 
> 时间：2012-12-16T05:09:15.540
> 
> 标签：unit-testing, node.js, mongoose, mocha.js

我试图找出在所有测试运行后将删除数据库和关闭连接的函数放在哪里。

这是我的嵌套测试：

```
//db.connection.db.dropDatabase();
//db.connection.close();

describe('User', function(){
    beforeEach(function(done){
    });

    after(function(done){
    });

    describe('#save()', function(){
        beforeEach(function(done){
        });

        it('should have username property', function(done){
            user.save(function(err, user){
                done();
            });
        });

        // now try a negative test
        it('should not save if username is not present', function(done){
            user.save(function(err, user){
                done();
            });
        });
    });

    describe('#find()', function(){
        beforeEach(function(done){
            user.save(function(err, user){
                done();
            });
        });

        it('should find user by email', function(done){
            User.findOne({email: fakeUser.email}, function(err, user){
                done();
            });
        });

        it('should find user by username', function(done){
            User.findOne({username: fakeUser.username}, function(err, user){
                done();
            });
        });
    });
}); 
```

似乎没有任何效果。我得到错误：超过 2000 毫秒的超时

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-16T05:31:12.650

`after()`您可以在第一个`describe()`处理清理之前定义一个“根”钩子：

```
after(function (done) {
    db.connection.db.dropDatabase(function () {
        db.connection.close(function () {
            done();
        });
    });
});

describe('User', ...); 
```

不过，您得到的错误可能来自 3 个异步钩子，它们没有通知 Mocha 继续。这些需要调用`done()`或跳过参数，以便它们可以被视为同步：

```
describe('User', function(){
    beforeEach(function(done){ // arg = asynchronous
        done();
    });

    after(function(done){
        done()
    });

    describe('#save()', function(){
        beforeEach(function(){ // no arg = synchronous
        });

        // ...
    });
}); 
```

[从文档](http://visionmedia.github.com/mocha/#asynchronous-code)：

> 通过向 Mocha 添加一个回调（通常命名为`done`）`it()`就会知道它应该等待完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T18:31:46.093

我实现它有点不同。

1.  我删除了“之前”钩子中的所有文档 - 发现它比 dropDatabase() 快得多。
2.  我使用 Promise.all() 确保在退出钩子之前删除了所有文档。

    ```
    beforeEach(function (done) {

        function clearDB() {
            var promises = [
                Model1.remove().exec(),
                Model2.remove().exec(),
                Model3.remove().exec()
            ];

            Promise.all(promises)
                .then(function () {
                    done();
                })
        }

        if (mongoose.connection.readyState === 0) {
            mongoose.connect(config.dbUrl, function (err) {
                if (err) {
                    throw err;
                }
                return clearDB();
            });
        } else {
            return clearDB();
        }
    }); 
    ```

# android - GridView 布局文本填充问题和空单元格

> ID：13898784
> 
> 赞同：3
> 
> 时间：2012-12-16T05:09:20.657
> 
> 标签：android, android-layout, android-gridview

我有一个 GridView 并且文本单元格总是垂直填充，此外由于某些奇怪的原因，可能是 RDA 或 AI 的属性引用仅在 RDA 时显示，AI 似乎不可见（我在列*引用*中的表没有为空细胞）。

请参阅此屏幕截图以更好地理解 ![在此处输入图像描述](../Images/c1a01ca2a4d0356b41899e8a22aefcbf.png)

使用此方法填充 GridView

```
private void populateGrid(){
    Cursor c = dba.getNutriData():
    startManagingCursor(c);

    String[] from = new String[] { dba.Nutrient, dba.Intake, dba.Limit, dba.Refer};
    int[]   to = new int[] { R.id.txtNutrient, R.id.txtIntake, R.id.txtLimit, R.id.txtRefer};

    SimpleCursorAdapter sca = new SimpleCursorAdapter(this, R.layout.grid_row, c, from, to);

    grid.setAdapter(sca);
} 
```

我使用这个 GridView 布局

```
 <GridView
            android:id="@+id/tabellaDieta"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:fitsSystemWindows="false"
            android:gravity="start"
            android:numColumns="1"
            android:scrollingCache="true"
            android:stretchMode="columnWidth"
            android:textAlignment="textStart" >

        </GridView> 
```

这是网格布局

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >
  <TableRow android:layout_gravity="left">

  <TextView
      android:id="@+id/colNome"
      android:layout_width="50px"
      android:layout_height="wrap_content"
      android:layout_gravity="left"
      android:layout_weight="1"
      android:gravity="left|start"
      android:padding="5px"
      android:textColor="@color/white"
      android:textSize="12dp" />

  <TextView
      android:id="@+id/colDose"
      android:layout_width="50px"
      android:layout_height="wrap_content"
      android:layout_gravity="left"
      android:layout_weight="1"
      android:gravity="left|start"
      android:padding="5px"
      android:textColor="@color/greenlight"
      android:textSize="12dp" >

</TextView>

  <TextView
      android:id="@+id/colLimite"
      android:layout_width="50px"
      android:layout_height="wrap_content"
      android:layout_gravity="left"
      android:layout_weight="1"
      android:gravity="left|start"
      android:padding="5px"
      android:textColor="@color/orange"
      android:textSize="12dp" />

  <TextView
      android:id="@+id/colRiferimento"
      android:layout_width="50px"
      android:layout_height="wrap_content"
      android:layout_gravity="left"
      android:layout_weight="1"
      android:gravity="left|start"
      android:padding="5px"
      android:textColor="@color/light_sky"
      android:textSize="12dp" >

</TextView>

  </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T06:31:20.133

`android:layout_weight="1"`这条线和这条线的价值 和这条`android:padding="5px"`线`android:numColumns="1"`很关键。

通过删除`weight`and`padding`行来测试它并增加`columns`

`textView`您也已将此处的宽度固定`android:layout_width="50px"`为`WrapContent`

# css - Drupal - 需要更改框内容

> ID：13898785
> 
> 赞同：0
> 
> 时间：2012-12-16T05:09:21.140
> 
> 标签：css, drupal, content-management-system

我正在尝试在朋友网站上进行一些更新。我对 Drupal 很陌生，并且发现进行大多数这些更新并不难，但是，有一件事让我很难过

在她网站的首页上：http: [//lisaleslie9.com](http://lisaleslie9.com)

你会在左中看到一个粉红色的方框，是关于她的领导学院的

但是，当我单击编辑该框时，我得到：

```
<div class="clear ads"><a class="ad" href="https://lisaleslie9.com/lisa-leslie-basketball-leadership-academy" id="ad-preregister" title="The Lisa Leslie Basketball &amp; Leadership Academy">The Lisa Leslie Basketball &amp; Leadership Academy....</a><span class="spacer"> 
```

但我需要更改下面的句子“一个月......”

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:03:50.267

非常简单，您必须在块中进行编辑，转到 Site Buildings --> Blocks --> 选择您的块并单击配置。您现在可以编辑以进行更改，然后单击保存。而已。

# sharepoint - 使用 Admin.asmx Web 服务创建 SharePoint 网站集

> ID：13898789
> 
> 赞同：0
> 
> 时间：2012-12-16T05:10:07.583
> 
> 标签：sharepoint, service, web, sitecollection

我正在通过调用内置 SharePoint Web 服务来创建网站集。

```
http://Server_Name/_vti_adm/admin.asmx 
```

此 Web 服务有一个称为`CreateSite`允许用户创建网站集的方法。非常简单（[方法文档](http://msdn.microsoft.com/en-us/library/administration.admin.createsite%28v=office.12%29.aspx)）。

它创建一个带有 URL 的站点，例如：

```
http://Server_Name/sites/SiteCollection_Name 
```

我想创建一个网站集，其中网站名称位于首位，例如：

```
http://SiteCollection_Name/Server_Name 
```

我记得有一个属性叫做**UseHostHeaderAsSiteName**

我看不到将此属性与`CreateSite`方法一起使用的选项。我们如何使用此属性或任何方法来创建将提供 URL 的站点，例如：

```
http://SiteCollection_Name/Server_Name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:39:38.120

您所描述的 -`http://SiteCollection_Name/Server_Name`是 SP API 无法实现的。URL 格式为`protocol://server:port/path`. 网站集只能出现在`path`.

如果您需要不同的主机名 -`server`部分 - 您必须在映射到您的 SP 服务器 IP 地址的 DNS 中注册它们，然后在您的 SP Web 应用程序中设置备用访问 URL，以便它们被 SP 接受。（如果您在安装它的 URL 中不使用相同的主机名，SP 会很挑剔......）

# ruby-on-rails - 如何在 Ruby on Rails 中循环数月

> ID：13898795
> 
> 赞同：13
> 
> 时间：2012-12-16T05:10:34.120
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, loops

我需要在 Ruby on Rails 应用程序中循环几个月。对于每个月，我需要找到给定月份的第一天和最后一天。然后在单独的查询中使用这些日期来查找在这些日期期间发生的事件并对其进行计算。

最初，我尝试了类似的方法：

```
(11.months.ago.to_date.month..Date.today.month).each do |m|
  start_date = '01-#{m}-#{Date.today.year}'.to_date.beginning_of_month
  end_date = '01-#{m}-#{Date.today.year}'.to_date.end_of_month
end 
```

当然，如果 11 个月前涉及回到上一年，则在这种情况下不会更新年份。而且，我认为这种类型的 for/each 循环不起作用。我还尝试将数字映射到数组并使用相同的方法，但收到错误。

完成这样的事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T05:41:33.833

这是一种方法：

```
number_of_months = 0..11
number_of_months.to_a.reverse.each do |month_offset|
  start_date = month_offset.months.ago.beginning_of_month
  end_date = month_offset.months.ago.end_of_month
  puts "Start date : #{start_date} End date : #{end_date}"
end 
```

=>

```
Start date : 2012-01-01 00:00:00 -0700 End date : 2012-01-31 23:59:59 -0700
Start date : 2012-02-01 00:00:00 -0700 End date : 2012-02-29 23:59:59 -0700
Start date : 2012-03-01 00:00:00 -0700 End date : 2012-03-31 23:59:59 -0600
Start date : 2012-04-01 00:00:00 -0600 End date : 2012-04-30 23:59:59 -0600
Start date : 2012-05-01 00:00:00 -0600 End date : 2012-05-31 23:59:59 -0600
Start date : 2012-06-01 00:00:00 -0600 End date : 2012-06-30 23:59:59 -0600
Start date : 2012-07-01 00:00:00 -0600 End date : 2012-07-31 23:59:59 -0600
Start date : 2012-08-01 00:00:00 -0600 End date : 2012-08-31 23:59:59 -0600
Start date : 2012-09-01 00:00:00 -0600 End date : 2012-09-30 23:59:59 -0600
Start date : 2012-10-01 00:00:00 -0600 End date : 2012-10-31 23:59:59 -0600
Start date : 2012-11-01 00:00:00 -0600 End date : 2012-11-30 23:59:59 -0700
Start date : 2012-12-01 00:00:00 -0700 End date : 2012-12-31 23:59:59 -0700 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-16T07:03:05.457

首先，计算两个日期之间的月数（*由[Massimiliano Peluso](https://stackoverflow.com/a/9428676/1153362)*提供）：

```
start_date = 13.months.ago.to_date
# => Wed, 16 Nov 2011

end_date = Date.today
# => Sun, 16 Dec 2012

number_of_months = (end_date.year*12+end_date.month)-(start_date.year*12+start_date.month)
# => 13 
```

然后从开始月份开始，然后计算每个月，找到第一个/最后一个日期并附加到一个累加器数组。

```
dates = number_of_months.times.each_with_object([]) do |count, array|
  array << [start_date.beginning_of_month + count.months,
            start_date.end_of_month + count.months]
end
# => ... 
```

现在`dates`将包含一个数组，其中包含`Date`对应于每个月的第一个和最后一个日期的嵌套对。这个`dates`数组将很容易迭代处理。

```
dates
# => [[Tue, 01 Nov 2011, Wed, 30 Nov 2011], [Thu, 01 Dec 2011, Fri, 30 Dec 2011], ...

dates[0].first
# => Tue, 01 Nov 2011

dates[0].last
# => Wed, 30 Nov 2011

dates[0].last.class
# => Date 
```

这是在 Rails 3.2.5/Ruby 1.9.3p194 中测试和工作的

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-03T08:44:53.133

```
(start_date..end_date).select{|date| date.day == 1}.map{|date| [date.beginning_of_month, date.end_of_month]} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-16T11:30:38.030

```
time_start = 13.months.ago
time_end = 0.seconds.ago
time = time_start
while time < time_end
  puts("m:#{time.month} y:#{time.year}")
  time = time.advance(months: 1)
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-17T13:41:12.153

未来 12 个月的开始和结束（包括）some_date：

```
(0..11).map do |m| 
  start_date = some_date.at_beginning_of_month + m.month
  end_date = start_date.at_end_of_month
end 
```

# python - 如果实现了自定义 __dir__，如何获取对象名称的实际列表？

> ID：13898796
> 
> 赞同：1
> 
> 时间：2012-12-16T05:10:45.197
> 
> 标签：python, internals

官方文档[说](http://docs.python.org/2/library/functions.html#dir)：

> 如果对象有一个名为 的方法`__dir__()`，该方法将被调用并且必须返回属性列表。这允许实现自定义`__getattr__()`或`__getattribute__()`功能的对象自定义`dir()`报告其属性的方式。

如果自定义`__dir__`实现，由另一个函数返回的结果`inspect.getmembers()`也会受到影响。

例如：

```
class С(object):
    __slots__ = ['atr']
    def __dir__(self):
        return ['nothing']
    def method(self):
        pass
    def __init__(self):
        self.atr = 'string'

c = C() 
print dir(f) #If we try this - well get ['nothing'] returned by custom __dir__()
print inspect.getmembers(f) #Here we get []
print f.__dict__ #And here - exception will be raised because of __slots__ 
```

在这种情况下，如何获取对象名称列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T05:15:13.960

### 回答原始问题- 是否`inspect.getmembers()`使用`__dir__()`like `dir()`does？

这是源代码，`inspect.getmembers()`因此我们可以看到它的实际作用：

```
def getmembers(object, predicate=None):
    """Return all members of an object as (name, value) pairs sorted by name.                                                                                                                                     
    Optionally, only return members that satisfy a given predicate."""
    results = []
    for key in dir(object):
        try:
            value = getattr(object, key)
        except AttributeError:
            continue
        if not predicate or predicate(value):
            results.append((key, value))
    results.sort()
    return results 
```

从这里我们看到它**正在**使用`dir()`并且只是对结果进行了一些过滤。

### 如何获取具有覆盖的属性`__dir__()`？

根据[这个答案](https://stackoverflow.com/a/191029/1460235)，不可能总是得到一个完整的属性列表，但在某些情况下我们仍然可以肯定地得到它们/得到足够有用的东西。

从[文档](http://docs.python.org/2/library/functions.html#dir)：

> 如果对象不提供`__dir__()`，则该函数会尽力从对象的`__dict__`属性（如果已定义）及其类型对象中收集信息。结果列表不一定完整，并且当对象具有 custom 时可能不准确`__getattr__()`。

因此，如果您不使用`__slots__`，您可以查看您的对象（以及它的类型对象）以获得通常会提供给您`__dict__`的基本相同的信息。`dir()`因此，就像 with 一样`dir()`，您必须使用更严格的方法来获取元类方法。

如果您正在使用`__slots__`，那么在某种程度上，获取类属性会更简单一些。是的，没有字典，但有它`__slots__`自己，它包含所有属性的名称。例如，添加`print c.__slots__`到您的示例代码会产生`['atr']`. （同样，需要更严格的方法来获取超类的属性。）

### 如何获取方法

根据用例，您可能需要不同的解决方案，但如果您只是想轻松找出方法，您可以简单地使用内置的`help()`.

### 修改后的 PyPy`dir()`

这是上述某些方法的替代方案：要获得`dir()`忽略用户定义`__dir__`方法的版本，您可以只采用[PyPy 的实现](https://bitbucket.org/pypy/pypy/src/0f2f6fcca4d3/pypy/module/__builtin__/app_inspect.py?at=default#cl-27)并`dir()`删除引用`__dir__`方法的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:15:27.763

正如马修在另一个答案中指出的那样，`getmembers`显然返回的`dir`是实际属性的结果子集。

```
>>> class C:
>>>   def foo(self):
>>>     pass
>>>   def __dir__(self):
>>>     return ['test']
>>>
>>> import inspect
>>> c = C()
>>> dir(c)
['test']
>>> inspect.getmembers(c)
[] 
```

# backbone.js - Backbone.Marionette 控制器不工作

> ID：13898799
> 
> 赞同：2
> 
> 时间：2012-12-16T05:11:16.490
> 
> 标签：backbone.js, marionette

我有一个使用[AppRouter](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.approuter.md)和[EventAggregator](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.eventaggregator.md)配置的 Backbone.Marionette 应用程序。

初始化程序启动路由器，然后启动历史。我确定我的 EventAggregator 设置正确 - MyVent.trigger('abc') 在控制台中正常工作。正如预期的那样，AppRouter 似乎也可以正常工作，因为导航到未定义的 URL 会导致 404。

我错过了什么吗？

```
//Initializer
MyApp.addInitializer(function(options){

  //do stuff here

  router = new MyRouter(MyController);
  console.log('routing started!');
  MyVent.trigger('routing:started'); <-- this works
});

//EventAggregator
MyVent = new Backbone.Marionette.EventAggregator();

MyVent.on('contactUs', function(){
  console.log('ContactUs received by MyVent!');
  startContactUsModal();
  Backbone.history.navigate("contactus/");
});
MyVent.on('bookNow', function(){
  console.log('BookNow received by MyVent!');
  startBookNowModal();
  Backbone.history.navigate("booknow/");
});
MyVent.on('home', function(){
  console.log('home received by MyVent!');
  startHome();
  console.log('after starthome on myvent');
});
MyVent.on('routing:started', function(){
  console.log('routing:started recieved at MyVent!');
  if( ! Backbone.History.started) Backbone.history.start();
  console.log('Backbone.history sucessfully started!');
});

//Controller
MyController = {
  homeMethods:function(){
    console.log('home receieved at mycontroller');
    MyVent.trigger('home')
  },
  booknowMethods:function(){
    MyVent.trigger('bookNow')
  },
  contactusMethods:function(){
    MyVent.trigger('contactUs')
  }
};

//Router
MyRouter = Backbone.Marionette.AppRouter.extend({
  controller: MyController,
  routes: {
    '' : 'homeMethods',
    'tours' : 'toursMethods',
    'booknow' : 'booknowMethods',
    'contactus' : 'contactusMethods'
  },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:27:41.760

**哇！**多么愚蠢的错误——至少我在识别这些方面变得越来越快。

在 AppRouter 中声明路由与在 Backbone 路由器中不同。

木偶：**appRoutes**

常规骨干网：路由

# c# - 读取文件并显示内容

> ID：13898809
> 
> 赞同：1
> 
> 时间：2012-12-16T05:13:04.600
> 
> 标签：c#, file-io

我希望当我单击“列出所有客户”按钮时，代码应该读取 Customer.csv 文件并在名为“列出所有客户”的表单上显示信息。

我怎样才能做到这一点？

```
public static void ReadFile()
{
    StreamReader sr = File.OpenText("Customer.csv");
}

public static void LoadCustomers()
{
    try
    {
        if (File.Exists("Customer.csv"))
        {
            string temp = null;
            int count = 0;

            using (StreamReader sr = File.OpenText(@"Customer.csv"))
            {
                while ((temp = sr.ReadLine()) != null)
                {
                    temp = temp.Trim();
                    string[] lineHolder = temp.Split(',');
                    Customer tempCust = new Customer();
                    tempCust.customerName = lineHolder[0];
                    tempCust.customerAddress = lineHolder[1];
                    tempCust.customerZip = Convert.ToInt32(lineHolder[2]);
                    myCustArray[count] = tempCust;
                    count++;
                }//end for loop
            }
        }
        else
        {
            File.Create("Customer.csv");
        }
    }
    catch (Exception e)
    {
        System.Windows.Forms.MessageBox.Show("File Loading Error: " + e.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:42:02.827

我不确定您要在哪种控件中显示此数据，但您的方法可能只返回一个列表`Customer`，然后您可以添加到一个`ListBox`，`ListView`或者`DataGrid`

```
public static IEnumerable<Customer> LoadCustomers(string filename)
{
    if (File.Exists(filename))
    {
        foreach (var line in File.ReadAllLines(filename).Where(l => l.Contains(',')))
        {
            var splitLine = line.Split(',');
            if (splitLine.Count() >= 3)
            {
                yield return new Customer
                {
                    customerName = splitLine[0].Trim(),
                    customerAddress = splitLine[1].Trim(),
                    customerZip = Convert.ToInt32(splitLine[2].Trim())
                };
            }
        }
    }
} 
```

列表框

```
 listBox1.DisplayMember = "customerName";
 listBox1.Items.AddRange(LoadCustomers(@"G:\Customers.csv").ToArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:42:49.050

首先，利用列表对象：

```
public static void ReadFile()
{
    StreamReader sr = File.OpenText("Customer.csv");
}

public static void LoadCustomers()
{
    try
    {
        if (File.Exists("Customer.csv"))
        {
            string temp = null;
            var retList = new List<Customer>();
            using (StreamReader sr = File.OpenText(@"Customer.csv"))
            {
                while ((temp = sr.ReadLine()) != null)
                {
                    temp = temp.Trim();
                    string[] lineHolder = temp.Split(',');
                    retlist.add(new Customer(){
                      customerName = linerHolder[0],
                      customerAddress = lineHolder[1],
                      customerZip = Convert.ToInt32(lineHolder[2])
                    });
                }//end for loop
            }
        }
        else
        {
            File.Create("Customer.csv");
        }
    }
    catch (Exception e)
    {
        System.Windows.Forms.MessageBox.Show("File Loading Error: " + e.Message);
    }
} 
```

只需将其包装在一个类中，从控制器调用 if 并填充结果。根据您更新此数据的频率，您可能会考虑缓存它，因此您不必每 X 秒为每个用户运行此过程。

# jquery - 向 el 元素添加点击事件并从主干中的 DOM 中删除

> ID：13898817
> 
> 赞同：1
> 
> 时间：2012-12-16T05:15:46.907
> 
> 标签：jquery, backbone.js

在这种情况下，如何将点击事件添加到我的 el 元素中多个 li。我正在尝试在单击时从 dom 中删除 li，但单击事件未触发。

```
App.Views.ListItem = Backbone.View.extend({

    el : 'li',
    Wrapper : '#list_cntr ul',
    template : 'tmplItem',

    events : {
        'click li' : 'removeMe'
    },

    initialize : function() {

        this.render();
    },

    render : function() {
        $(this.Wrapper).prepend($(this.el).html(App.Templates[this.template](this.model.toJSON())));
    },

    removeMe : function() {
        var eventList = App.Collections.eventCollectionList;
        var eid = this.model.get('id');
        eventList.remove(eid);

       //How to remove the li?
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T05:24:08.617

来自[精美手册](http://backbonejs.org/#View-delegateEvents)：

> **委托事件** `delegateEvents([events])`
> 
> [...] 省略选择器会导致事件绑定到视图的根元素 ( `this.el`)。

您的`el`视图是`<li>`您想要点击处理程序的，因此您应该能够将选择器放在您的`events`：

```
events : {
    'click' : 'removeMe'
}, 
```

这将绑定`removeMe`到点击`<li>`本身。

`el: 'li'`当你想说的时候，你也在设置`tagName: 'li'`。该[`el`](http://backbonejs.org/#View-el)属性是您视图的 DOM 元素，但`'li'`不会做任何有用的事情。如果您指定 a`tagName`那么 Backbone 将为`<li>`您创建 并且`this.el`将是视图的单一`<li>`。这可能就是您看到的奇怪的“看起来像所有`<li>`s”行为的来源。

您的视图应该看起来更像这样：

```
App.Views.ListItem = Backbone.View.extend({
    tagName : 'li',
    //...
    events : {
        'click' : 'removeMe'
    },
    //...
    removeMe : function() {
        var eventList = App.Collections.eventCollectionList;
        var eid = this.model.get('id');
        eventList.remove(eid);
        this.remove();
    }
}); 
```

演示：http: [//jsfiddle.net/ambiguous/MTh57/](http://jsfiddle.net/ambiguous/MTh57/)

# ruby - Ruby/Rspec：可以比较两个对象的内容吗？

> ID：13898826
> 
> 赞同：19
> 
> 时间：2012-12-16T05:17:01.270
> 
> 标签：ruby, rspec

我在 ruby​​ 中创建了 2 个具有完全相同属性和值的不同对象。

我现在想比较两个对象的内容是相同的，但以下比较：

```
actual.should == expected
actual.should eq(expected)
actual.should (be expected) 
```

失败：

```
 Diff:
  @@ -1,4 +1,4 @@
  -#<Station:0x2807628
  +#<Station:0x2807610 
```

rspec/ruby 有什么方法可以轻松实现这一点吗？

干杯！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-16T05:20:21.887

一种惯用的方法是覆盖`#==`操作符：

```
class Station
  def ==(o)
    primary_key == o.primary_key
  end

  def hash
    primary_key.hash
  end
end 
```

执行此操作时，您通常也希望覆盖该`#hash`方法。`#eql?`覆盖或不太常见`#equal?`。

**编辑**：在这种特定情况下，您可以做的另一件事，不涉及覆盖`#==`，是制作一个[自定义 RSpec 匹配器](https://github.com/dchelimsky/rspec/wiki/custom-matchers)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-28T18:23:35.520

使用 have_attributes 匹配器指定对象的属性与预期的属性匹配：

```
 Person = Struct.new(:name, :age)
  person = Person.new("Jim", 32)

  expect(person).to have_attributes(:name => "Jim", :age => 32)
  expect(person).to have_attributes(:name => a_string_starting_with("J"), :age => (a_value > 30) ) 
```

[Relishapp RSpec 文档](https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/have-attributes-matcher)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-22T09:53:05.477

有点晚了，但你可以序列化它，例如：

```
require 'json'

expect(actual.to_json).to eq(expected.to_json) #new rspec syntax
actual.to_json.should eq(expected.to_json) #old rspec syntax 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T05:19:43.747

也许您应该考虑在对象上重载相等运算符。

# matlab - 3D 曲面的双三次插值

> ID：13898828
> 
> 赞同：0
> 
> 时间：2012-12-16T05:17:18.750
> 
> 标签：matlab

我正在 matlab 中编写一个算法来对表面进行双三次插值`Psi(x,y)`。我在代码中有一个错误，似乎无法追踪它。我正在尝试一个测试用例，`Psi=X^2-0.25`以便更容易追踪错误。好像我的插值有一个偏移量。我的评论包含在我的代码中。任何帮助，将不胜感激。

蓝色的绘图`Psi=X^2`和红色的插值 ![<code>Psi=X^2</code> 用蓝色绘制，插值用红色绘制](../Images/7c9af09a4e855837741fd4c466ff52c3.png)

绘制了Countour 线，`Psi`红点是我正在计算插值的点。粗红线是从红点偏移相当多的插值。 ![<code>Psi</code> 的计数线被绘制，红点是我正在计算插值的点。 粗红线是从红点偏移相当多的插值。](../Images/6b1c4f4e85ad52c4dd31c785e38c25cd.png)

```
function main()

    epsilon=0.000001;
    xMin=-1+epsilon;
    xMax= 1+epsilon;
    yMin=-1+epsilon;
    yMax= 1+epsilon;

    dx=0.1;  Nx=ceil((xMax-xMin)/dx)+1;
    dy=0.1;  Ny=ceil((yMax-yMin)/dy)+1;

    x=xMin:dx:xMax;  x=x(1:Nx);
    y=yMin:dy:yMax;  y=y(1:Ny);

    [XPolInX,XPolInY]=GetGhostMatricies(Nx,Ny); %Linear extrapolation matrix
    [D0x,D0y]=GetDiffMatricies(Nx,Ny,dx,dy); %derivative matricies: D0x is central differencing in x

    [X,Y]=meshgrid(x,y);
    Psi=X.^2-0.25;    %Note that my algorithm is being written for a Psi that may not have a analytic representation. This Psi is only a test case. 

    psi=zeros(Nx+2,Ny+2);   %linearly extrapolate psi (for solving differential equation not shown here)
    psi(2:(Nx+1),2:(Ny+1))=Psi';
    psi=(XPolInY*(XPolInX*psi)')';

    %compute derivatives of psi
    psi_x =D0x*psi;             psi_x =(XPolInY*(XPolInX*psi_x)')';
    psi_y =(D0y*psi')';         psi_y =(XPolInY*(XPolInX*psi_y)')';
    psi_xy=D0x*psi_y;           psi_xy=(XPolInY*(XPolInX*psi_xy)')'; 
    % i have verified that my derivatives are computed correctly    

    biCubInv=GetBiCubicInverse(dx,dy);  

    i=5;  %lets compute the bicubic interpolation at this x(i), y(j)
    j=1;

    psiVoxel=[psi(   i,j),psi(   i+1,j),psi(   i,j+1),psi(   i+1,j+1),...
              psi_x( i,j),psi_x( i+1,j),psi_x( i,j+1),psi_x( i+1,j+1),...
              psi_y( i,j),psi_y( i+1,j),psi_y( i,j+1),psi_y( i+1,j+1),...
              psi_xy(i,j),psi_xy(i+1,j),psi_xy(i,j+1),psi_xy(i+1,j+1)]';

    a=biCubInv*psiVoxel; %a=[a00 a01 ... a33]; polynomial coefficients; 1st index is power of (x-xi), 2nd index is power of (y-yj)

    xi=x(5); yj=y(1);
    clear x y
    x=(xi-.2):.01:(xi+.2);   %this is a local region about the point we are interpolating
    y=(yj-.2):.01:(yj+.2);
    [dX,dY]=meshgrid(x,y);
    Psi=dX.^2-0.25;   

    figure(2)            %just plotting the 0 level contour of Psi here 
    plot(xi,yj,'.r','MarkerSize',20)
    hold on
    contour(x,y,Psi,[0 0],'r','LineWidth',2)
    set(gca,'FontSize',14)
    axis([x(1) x(end) y(1) y(end)])
    grid on
    set(gca,'xtick',(xi-.2):.1:(xi+.2));
    set(gca,'ytick',(yj-.2):.1:(yj+.2));
    xlabel('x')
    ylabel('y')

    [dX dY]=meshgrid(x-xi,y-yj);
    %P is my interpolating polynomial
    P =   a(1)       + a(5)       *dY + a(9)        *dY.^2 + a(13)       *dY.^3 ...
        + a(2)*dX    + a(6)*dX   .*dY + a(10)*dX   .*dY.^2 + a(14)*dX   .*dY.^3 ...
        + a(3)*dX.^2 + a(7)*dX.^2.*dY + a(11)*dX.^2.*dY.^2 + a(15)*dX.^2.*dY.^3 ...
        + a(4)*dX.^3 + a(8)*dX.^3.*dY + a(12)*dX.^3.*dY.^2 + a(16)*dX.^3.*dY.^3 ;
    [c h]=contour(x,y,P)  
    clabel(c,h)

    figure(3)
    plot(x,x.^2-.25)  %this is the exact function
    hold on
    plot(x,P(1,:),'-r*')

    %See there is some offset here 

end
%-------------------------------------------------------------------------
function [XPolInX,XPolInY]=GetGhostMatricies(Nx,Ny)

    XPolInX=diag(ones(1,Nx+2),0);
    XPolInY=diag(ones(1,Ny+2),0);

    XPolInX(1,1)      =0; XPolInX(1,2)      =2; XPolInX(1,3)    =-1;
    XPolInY(1,1)      =0; XPolInY(1,2)      =2; XPolInY(1,3)    =-1;
    XPolInX(Nx+2,Nx+2)=0; XPolInX(Nx+2,Nx+1)=2; XPolInX(Nx+2,Nx)=-1;
    XPolInY(Ny+2,Ny+2)=0; XPolInY(Ny+2,Ny+1)=2; XPolInY(Ny+2,Ny)=-1;

    fprintf('Done GetGhostMatricies\n')
end
%-------------------------------------------------------------------------
function [D0x,D0y]=GetDiffMatricies(Nx,Ny,dx,dy)

    D0x=diag(ones(1,Nx-1),1)-diag(ones(1,Nx-1),-1); 
    D0y=diag(ones(1,Ny-1),1)-diag(ones(1,Ny-1),-1);
    D0x(1,1)=-3; D0x(1,2)=4; D0x(1,3)=-1;
    D0y(1,1)=-3; D0y(1,2)=4; D0y(1,3)=-1;
    D0x(Nx,Nx)=3; D0x(Nx,Nx-1)=-4; D0x(Nx,Nx-2)=1;
    D0y(Ny,Ny)=3; D0y(Ny,Ny-1)=-4; D0y(Ny,Ny-2)=1;

    %pad with ghost cells which are simply zeros
    tmp=D0x;     D0x=zeros(Nx+2,Nx+2);   D0x(2:(Nx+1),2:(Nx+1))=tmp; tmp=0;
    tmp=D0y;     D0y=zeros(Ny+2,Ny+2);   D0y(2:(Ny+1),2:(Ny+1))=tmp; tmp=0;

    %scale appropriatley by dx & dy
    D0x=D0x/(2*dx);
    D0y=D0y/(2*dy);

end
%-------------------------------------------------------------------------
function biCubInv=GetBiCubicInverse(dx,dy)
    %p(x,y)=a00+a01(x-xi)+a02(x-xi)^2+...+a33(x-xi)^3(y-yj)^3
    %biCubic*a=[psi(i,j) psi(i+1,j) psi(i,j+1) psi(i+1,j+1) psi_x(i,j) ... psi_y(i,j) ... psi_xy(i,j) ... psi_xy(i+1,j+1)] 
    %here, psi_x is the x derivative of psi
    %I verified that this matrix is correct by setting dx=dy=1 and comparing to the inverse here http://en.wikipedia.org/wiki/Bicubic_interpolation

    biCubic=[ 
       %00      10      20      30      01      11      21      31        02      12      22        32          03        13        23          33
        1       0       0       0       0       0       0       0         0       0       0         0           0         0         0           0;
        1       dx      dx^2    dx^3    0       0       0       0         0       0       0         0           0         0         0           0;
        1       0       0       0       dy      0       0       0         dy^2    0       0         0           dy^3      0         0           0;
        1       dx      dx^2    dx^3    dy      dx*dy   dx^2*dy dx^3*dy   dy^2    dx*dy^2 dx^2*dy^2 dx^3*dy^2   dy^3      dx*dy^3   dx^2*dy^3   dx^3*dy^3;

        0       1       0       0       0       0       0       0         0       0       0         0           0         0         0           0;
        0       1       2*dx    3*dx^2  0       0       0       0         0       0       0         0           0         0         0           0;
        0       1       0       0       0       dy      0       0         0       dy^2    0         0           0         dy^3      0           0;
        0       1       2*dx    3*dx^2  0       dy      2*dx*dy 3*dx^2*dy 0       dy^2    2*dx*dy^2 3*dx^2*dy^2 0         dy^3      2*dx*dy^3   3*dx^2*dy^3;

        0       0       0       0       1       0       0       0         0       0       0         0           0         0         0           0;
        0       0       0       0       1       dx      dx^2    dx^3      0       0       0         0           0         0         0           0;
        0       0       0       0       1       0       0       0         2*dy    0       0         0           3*dy^2    0         0           0;
        0       0       0       0       1       dx      dx^2    dx^3      2*dy    2*dx*dy 2*dx^2*dy 2*dx^3*dy   3*dy^2    3*dx*dy^2 3*dx^2*dy^2 3*dx^3*dy^2;

        0       0       0       0       0       1       0       0         0       0       0         0           0         0         0           0;
        0       0       0       0       0       1       2*dx    3*dx^2    0       0       0         0           0         0         0           0;
        0       0       0       0       0       1       0       0         0       2*dy    0         0           0         3*dy^2    0           0;
        0       0       0       0       0       1       2*dx    3*dx^2    0       2*dy    4*dx*dy   6*dx^2*dy   0         3*dy^2    6*dx*dy^2   9*dx^2*dy^2];   

    biCubInv=inv(biCubic);

end

%------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:29:05.043

我发现了我的错误。我用幽灵细胞填充我的矩阵，但是我忘记了现在`i`没有`Psi`幽灵细胞`i+1`的里面`psi`有幽灵细胞。因此，我应该`P`在`xi=x(6); yj=y(2)`而不是评估我的插值多项​​式`xi=x(5); yj=y(1)`。

# java - java编译错误“找不到或加载主类main.java”

> ID：13898832
> 
> 赞同：1
> 
> 时间：2012-12-16T05:17:52.650
> 
> 标签：java, linux, ubuntu

我知道有很多类似的线程，但我找不到解决我问题的线程。按照[`this`](http://introcs.cs.princeton.edu/java/15inout/linux-cmd.html)说明，我能够在终端中获取 java 并能够编译。我能够“javac main.java”没有错误，但是当我“java main.java”时，它只是说它`could not find or load main class main.java`。我相信我的类路径是错误的，但我也不完全确定如何解决这个问题。这是我输入时出现的内容`echo $PATH`

```
/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/home/taka/.rvm/bin 
```

当我键入时`echo $CLASSPATH`，它什么也不显示。

我也尝试过 java -cp ./main.java，因为当我编译并运行 HelloWorld.java 时这似乎有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T05:35:15.847

如果您`javac`成功，则更新您的类路径环境变量并添加当前目录，即`.`在类路径中，然后运行`java`如下：

```
 java main 
```

**请注意：**没有`.java`扩展名，因为您需要运行`.class`文件（在 javac 之后生成），也没有提及扩展名。`Java`使用生成的类文件不执行原始源文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T06:58:02.543

`main.java`java是你的源代码。你不能在没有编译的情况下运行java源代码。对于编译，您应该使用 javac 命令。之后，它将创建一个 main.class 文件，该文件可以被解释器理解为`java`.

所以你运行你的课程使用`java main`或`java main.class`

# asp.net - ASP.Net 和回发

> ID：13898834
> 
> 赞同：0
> 
> 时间：2012-12-16T05:18:22.353
> 
> 标签：asp.net

我有一个表格供人们在我的联系页面上输入信息。我试图弄清楚他们如何在单击提交后不再显示表单并显示一个简单的谢谢。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:24:32.253

创建具有 2 个视图的多视图控件。将所有控件放入一个中，在另一个中添加“谢谢”消息，并在提交点击时切换 ActiveViewIndex

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T06:06:41.757

最简单的方法就是使用[面板](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.aspx)控件：

```
<asp:Panel ID="pnlForm" runat="server">
   ... form here ...
   <asp:Button ID="btnSubmit" OnClick="btnSubmit_Click" Text="Submit" runat="server" />
</asp:Panel>

<asp:Panel ID="pnlThankYou" Visible="False" runat="server">
    Thanks!
</asp:Panel> 
```

**C＃**

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    pnlForm.Visible = false;
    pnlThankYou.Visible = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T06:24:46.190

尝试将两个部分放在单独的 div 中并使 divs runat=server 并将不需要可见的 div 设置为 false 或仅添加属性显示以隐藏在服务器端并通过可见的 true 或属性显示另一个 div 以阻止

# matlab - 具有大系数的多项式的根

> ID：13898836
> 
> 赞同：0
> 
> 时间：2012-12-16T05:19:01.657
> 
> 标签：matlab

我有一个多项式，其系数取决于两个参数`x`及其`y`非线性幂。我扫描`x`找到多项式的根`y`，但是对于 x 的大多数值，该函数`roots`给出了“输入到 ROOTS 不能包含 NaN 或 Inf”的错误，当我看到该函数的多项式系数时`sym2poly`，它们是`inf`.

我无法更改多项式，因为它是从问题中获得的，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:05:12.257

出于实际目的，我可以建议以下解决方法：

将所有 inf 值替换为一个非常大的正数，并将所有 -inf 值替换为一个很大的正数。

对于 NaN，您可以做类似的事情，但我认为 NaN 通常不用于替换 Matlab 中的大数字。如果您不关心这些点，我想您可以将它们替换为 0 例如。

# android - textview 不显示文本（一个文本视图将另一个文本视图推离屏幕很远）

> ID：13898837
> 
> 赞同：3
> 
> 时间：2012-12-16T05:19:11.407
> 
> 标签：android, textview

现在，如果我将滚动到底部很远，textview 会显示该语句。看起来 promis textview 变大了。有没有办法解决它？

![截屏](../Images/93c8ea95a593fc6964d4980a1d3a5cc5.png) 星星下的一切都是promis textview的一部分。这是一个带有几个换行符的单个字符串 ![截图2](../Images/045a13a7b70fa3ac9152de34fa820a19.png)另一个屏幕截图

生成承诺的代码

```
prm = doc.getElementsByTagName("promise");
            for (int j = 0; j < prm.getLength(); j++) {
                prom += parser.getValue(e, KEY_PROMISES, j) + "\n";

            }
            prom.substring(0,prom.lastIndexOf('\n')); 
```

布局

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget32"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/top"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/face"
            android:layout_width="68dp"
            android:layout_height="68dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" />

        <TextView
            android:id="@+id/name"
            android:layout_width="243dp"
            android:layout_height="35dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@id/face"
            android:text="from" />

        <TextView
            android:id="@+id/office"
            android:layout_width="242dp"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/face"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/name"
            android:layout_toRightOf="@id/face"
            android:text="subject" />
    </RelativeLayout>

    <RatingBar
        android:id="@+id/ratingBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/top"
        android:numStars="6"
        android:singleLine="false" />

    <TextView
        android:id="@+id/promises"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/ratingBar1"
        android:layout_marginTop="5dp"
        android:text="TextView" />

    <ScrollView
        android:id="@+id/scroll"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/promises"
        android:layout_marginRight="22dp"
        android:layout_marginTop="26dp" >

        <TextView
            android:id="@+id/statement"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </ScrollView>

</RelativeLayout> 
```

我的应用的活动

```
public class SingleMenuItemActivity  extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.candidate);
        Log.d("here ?", "No ");
        int loader = R.drawable.loader;
        // getting intent data
        Intent in = getIntent();
        Log.d("here ?", "No ");
        // Get XML values from previous intent
        String name = in.getStringExtra("name");
        Log.d("Name ", name);
        Log.d("here ?", "No ");
        DatabaseHandler db = new DatabaseHandler(this);
        Log.d("here ?", "No ");
        Candidate p = db.getCandidate(name);
        Log.d("Did i take candidate? ", "yea ");
        db.close();
        Log.d("Statement", p.get_statment());
        // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.name);
        TextView lblOffice = (TextView) findViewById(R.id.office);
        TextView lblPromise = (TextView) findViewById(R.id.promises);
        TextView lblStatement = (TextView) findViewById(R.id.statement);
        ImageView lblFace = (ImageView) findViewById(R.id.face);
        RatingBar lblRating = (RatingBar) findViewById(R.id.ratingBar1);
        ImageLoader imgLoader = new ImageLoader(this);
        lblName.setText(p.get_name());
        lblOffice.setText(p.get_office());
        lblPromise.setText(p.get_promises());
        lblStatement.setText(p.get_statment());
        lblRating.setRating(p.get_ranking());
        imgLoader.DisplayImage(p.get_photograph(), loader, lblFace);

    }
} 
```

logcat 说 p.get_statment() 有适当的价值

```
12-16 05:07:16.089: D/Statement(279): I strive for the highest standards of appearance and personal grooming.  If, like me, you think that the University's reputation is being dragged down by lecturers who have little or no regard for fashion and are content to wear ill-fitting or patched clothes then vote for me: the stylish choice. 
```

声誉太低，无法发布图片 %)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T05:43:42.603

看起来您的 RatingBar 正在覆盖您的`statement`TextView：

```
<RatingBar
    android:layout_above="@+id/statement"
    ... /> 
```

也许你的意思是`layout_below`？

此外，您的`promises`TextView 的上边距非常大，它可能会将`statement`TextView 推离屏幕底部：

```
<TextView
    android:id="@+id/promises"
    android:layout_marginTop="124dp"
    ... /> 
```

* * *

**加法**显然， TextView
的末尾还有许多换行符。`promises`如果您无法从源中删除这些字符，您可以使用[`trim()`](http://developer.android.com/reference/java/lang/String.html#trim%28%29)：

```
prom = prom.trim(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T05:33:51.410

您的代码似乎正确。如果带有 id *lblStatement*的 textView不显示文本，则可能是您的背景无法识别文本（因此请尝试更改颜色），或者边距不足以容纳 textview 位置。

如果`p.get_statment()`具有正确的值，则没有其他可能的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:17:31.370

好的，我找到了解决方案，除了我不明白为什么 textview 扩展了这么多我现在知道如何修复它:) 首先我们需要知道行数，哪个字符串会产生

```
private static int countLines(String str){
           String[] lines = str.split("\r\n|\r|\n");
           return  lines.length;
        } 
```

然后简单地限制文本视图的大小

```
lblPromise.setMaxLines(countLines(p.get_promises())); 
```

# c++ - 获取二进制的所有可能变化 - 给定一个模式

> ID：13898839
> 
> 赞同：0
> 
> 时间：2012-12-16T05:19:39.517
> 
> 标签：c++, c, 64-bit, bit-manipulation, combinations

好的，我正在尝试做的事情可能听起来有点复杂，但我仍然无法弄清楚：

*   假设我们有一个`unsigned long long`64 位整数
*   我想设置一些“变量”位位置并获取所有可能的派生数字

**例如**

```
Pattern = 00000000XXXXX000XX000X 
Positions = 0,4,5,9,10,11,12,13

Result (Pattern, Positions) = {
    0000000000000000000000
    0000000000000000000001
    0000000000000000010000
    0000000000000000010001
    0000000000000000100000
    0000000000000000100001
    0000000000000000110000
    0000000000000000110001
    etc...
} 
```

我该怎么做呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T05:25:43.363

他们太容易了。

制作要保持不变的位位置的掩码。在每次迭代中：

```
x |= mask;
++x;
x &= ~mask; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T05:26:12.813

使用*n 个*“变量”位位置在*n*位变量中计数。对于通过位位置的每个位模式循环，将计数器位位置映射到相应的“可变”位位置，将该位值设置在 a 中`std::bitset`。或者，如果您更喜欢，可以进行位移。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T08:25:50.507

```
#include <bitset>
#include <iostream>

int positions[] = { 0, 4, 5, 9, 10, 11, 12, 13 };

int main(int argc, char **argv)
{
  int length = sizeof(positions) / sizeof(*positions);
  /* There are 2^length possible combinations */
  for (unsigned long long i = 0; i < 1 << length; i++) {
    unsigned long long pattern = 0;
    for (unsigned long long j = i, k = 0; j != 0; j >>= 1, k++) {
      if (j & 1)
        pattern |= 1ULL << positions[k];
    }
    std::cout << std::bitset<64>(pattern) << std::endl;
  }
} 
```

# mysql - 从 2 个表中选择记录

> ID：13898846
> 
> 赞同：4
> 
> 时间：2012-12-16T05:20:25.260
> 
> 标签：mysql, sql, select

我在 MySQL 中有 2 个表，在这两个表中我都有 id、title、date 和其他一些字段，一个表的名称是`news`，另一个表是`gallery`.

```
 Table news :
    id   |  title   |   date       |  ...
   ------+----------+--------------+-------
    1    | TestN 1  |  2012-12-12  | ...
    2    | TestN 2  |  2012-12-14  | ...
    3    | TestN 3  |  2012-12-14  | ...

     Table gallery :
    id   |  title   |   date       |  ...
   ------+----------+--------------+-------
    1    | TestG 1  |  2012-12-10  | ...
    2    | TestG 2  |  2012-12-12  | ...
    3    | TestG 3  |  2012-12-15  | ... 
```

我想知道如何从两个表中按日期顺序选择 id、title 记录？是否可以？

像这样：

```
 Result :
    id   |  title   |   date       |  ...
   ------+----------+--------------+-------
    1    | TestG 1  |  2012-12-10  | ...
    1    | TestN 1  |  2012-12-12  | ...
    2    | TestG 2  |  2012-12-12  | ...
    2    | TestN 2  |  2012-12-14  | ...
    3    | TestN 3  |  2012-12-14  | ...
    3    | TestG 3  |  2012-12-15  | ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T05:22:25.320

采用`UNION`

```
SELECT id, title, date FROM news
UNION ALL
SELECT  id, title, date FROM gallery
ORDER BY date, id, title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:22:13.647

为了实现这个使用 UNION 子句，像这样......

```
SELECT id,title,date FROM news 
UNION
SELECT id,title,date FROM gallery 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T05:42:55.207

您可以使用以下查询

```
SELECT id,title,date FROM news 
UNION All
SELECT id,title,date FROM gallery 
ORDER BY date, id, title 
```

# c# - 如何在 Windows 窗体中显示多个状态

> ID：13898848
> 
> 赞同：-3
> 
> 时间：2012-12-16T05:20:47.803
> 
> 标签：c#, tablelayoutpanel

我正在制作的程序需要显示许多状态和网站信息。我需要知道执行此操作的最佳方法。我对 tableLayoutPanel 的运气为 0。

我希望它与 iOS 上的类似，[但](http://i.i.com.com/cnwk.1d/i/tim/2010/09/15/AlienBlueHDScreen_DD_09152010.PNG)在 C# 中找不到类似的东西。

任何帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:25:09.343

您可以使用 TableLayoutPanel。问题是您需要动态添加行，然后将控件添加到行。如果行被删除或移动，您还必须手动重新排序行。

您还可以设置 datagridview 控件的[样式](http://msdn.microsoft.com/en-us/library/1yef90x0.aspx "风格")，使其看起来像这样，并且 datagridview 已经为您完成了数据绑定的大部分繁重工作。

最后，您可能只需要使用[ListView](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.aspx "列表显示")控件，具体取决于您需要的功能。这应该是最简单的方法

# c - C程序查找当前文件名

> ID：13898850
> 
> 赞同：5
> 
> 时间：2012-12-16T05:20:53.760
> 
> 标签：c, file

我想使用 C 程序显示我当前的 C 文件。我知道可执行文件名可以通过`argv[0]`. 但我想要文件名作为`'hello.c'`例子。是否可以？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T05:29:37.740

一个程序可以由*多个*C 文件组成。那么你在找哪一个？

`__FILE__`为此制作了宏。它被预处理器替换为正在编译的当前源 (.C) 文件的名称。

**主程序**

```
#include <stdio.h>
int main(int argc, char** argv)
{
    printf("Executable name: %s\n", argv[0]);

    printf("This is %s() from %s, line %d\n",
        __FUNCTION__, __FILE__, __LINE__);

    one();

    return 0;
} 
```

**一.c**

```
#include <stdio.h>
void one(void)
{
    printf("This is %s() from %s, line %d\n",
        __FUNCTION__, __FILE__, __LINE__);
} 
```

**输出**（假设可执行文件名为“hello.exe”）：

```
Executable name: hello.exe
This is main() from main.c, line 4
This is one() from one.c, line 3 
```

也可以看看：

*   [`__FILE__`, `__LINE__`, 和`__FUNCTION__`C++ 中的用法](https://stackoverflow.com/questions/597078/file-line-and-function-usage-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:24:09.013

如果您使用的是 Windows，并且`".exe"`您的程序具有扩展名，则将该扩展名替换为`".c"`. 如果您在 Linux 或 OSX 上，则只需 append `".c"`，但不要直接附加到，`argv[0]`因为该字符串不会为此分配空间。而是创建一个新字符串。

然而，这并不适用于所有情况，因为实际的源文件和可执行文件当然可能以不同的名称命名，并且可执行文件甚至可能与源文件不在同一个文件夹中。`__FILE__`可以使用宏来获取源文件的实际名称。如果您使用的是 VisualC++，那么您可以向编译器添加一个标志，告诉它在`__FILE__`宏中使用完整路径，请参阅[此 MSDN 参考](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.100%29.aspx)。GCC 预处理器已经有完整的路径`__FILE__`，请参阅[文档](http://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html)。

# c - 字符流中单词计数程序的软件测试

> ID：13898852
> 
> 赞同：1
> 
> 时间：2012-12-16T05:21:28.050
> 
> 标签：c

我已经完成了一个程序，其中给定的输入应该是字符流，并且程序会计算非空白字符和单词。word 被定义为由空格字符分隔的字符流。所以这是程序..

```
#include <stdio.h> 
#include<ctype.h>
#include <stdbool.h>
#include<iso646.h>

int main(void)  
{   unsigned long int wordcount = 0,charcount = 0, count=1;
    int ch;
    bool flag, prev;

    while ((ch = getchar()) != EOF) 
      {   if(isgraph(ch))
              flag=true;
          else
              flag=false;

          if(flag)
             charcount++;

          if(count ==1)
             prev = flag;

        if(count != 1)
           {   if(prev and (not flag))
                  wordcount++;
               prev = flag;
           }

          count++;
      }

    if((ch == EOF) and flag)
          wordcount++;

   printf("\nnumber of words counted are %lu \n", wordcount);
   printf("\nnumber of characters counted are %lu \n", charcount);

   return 0;

} 
```

现在我已经用简单的句子检查了这个程序。但只是为了练习，我想对此进行详细的软件测试。那么我该怎么做呢？我只是给出更多的句子吗？我试图从我在古腾堡项目中找到的一些小说中给出几段。我还能在这里做什么？我也可以提高这个程序的效率吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T06:21:27.100

有各种基本测试要做：

1.  空的文件
2.  文件只有一个空格
3.  只有一个非空白的文件
4.  一个空白和一个非空白的文件
5.  一个非空白和一个空白的文件
6.  仅包含多个空格的文件
7.  仅包含多个非空白的文件
8.  包含多个空格后跟非空格的文件

如此继续……这是边界测试；确保代码在边界条件下正常工作。

您将值 from 分配`getchar()`给 an `unsigned long int`（现在已在问题中解决）是不寻常的。由于常规字符的返回值为正，文件结尾或错误的返回值为负 (EOF)，因此将其分配给带符号的 plain 是正常的`int`。

`ch == EOF`循环后的测试是多余的；退出循环的唯一方法是条件为真时。

使用`<iso646.h>`and （宏）关键字`and`也`not`很不寻常。

最常见的是，人们不会将代码与块的左大括号放在同一行。

您可以在您设置`charcount`的`if`块中增加`flag = true;`. 您可以使用`else`块代替`if (count != 1)`. 事实上，AFAICT，你的代码：

```
if(count ==1)
    prev = flag;

if(count != 1)
    {   if(prev and (not flag))
            wordcount++;
        prev = flag;
    } 
```

可以写成：

```
if (count > 1 and prev and (not flag))
    wordcount++;
prev = flag; 
```

“计算的字符数”的描述并不完全准确；它是您报告的图形（非空白、非控制）字符的数量。不过，这可能是在挑剔程度的过度挑剔端（以及观察到“单词数量”是一个奇异的数量，它应该是“是”而不是“是”）。

`count`从1 而不是 0开始有点不寻常。它似乎记录了“比读入程序的原始字符数多一个”，这是一个不寻常的记录量。更通常的情况是，您也将其初始化为 0，并修改我重写的测试以读取：

```
if (count != 0 and prev and (not flag)) 
```

（您可以使用`count != 0`or `count > 0`; 对于无符号值，这些术语是等效的。）

您可以通过`prev`适当地初始化（可能是`false`）来简化条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T08:55:42.077

养成将要测试的常数放在左侧的习惯，例如

而 (EOF != (ch = getchar()))

...因为这将使您免于花费无数小时，就在您最能承受挫折的时候，当您不小心输入 = 时，您的意思是 ==。由于您不能将变量分配给常量，因此编译器将标记您的错误并保存您的问题。

根据我的经验，一旦你习惯阅读这种代码，你会发现在 if(, while( 旁边寻找要测试的内容比在如果您有很长的测试列表，例如打开文件、套接字等，然后通过 malloc() 分配内存来保存文件数据，则尤其如此。

**PS：经过一番考证，CS 101有几个基本的东西值得一提……**

第一，这里有一个经典案例——在这种情况下，因为你需要查看一个字符的后面，即使是在第一次通过 while() 循环时——用于播种 while() 循环。解决方案是使用一个简单的 if() 块设置 while() 循环，该块执行与 while() 循环相同的逻辑的单次传递。（仅供参考，while() 是具有终止条件的 if() 的无限集合）

执行此操作的正确方法如图所示。回报是能够抛弃所有的 if() 测试，并检查这是否是每次通过该循环时第一次通过 while() 循环。这里的第一遍由 while() 循环之前的 if() 测试处理。

第二，我发现你的变量名没有提供信息。这并不意味着他们是“错误的”，但很可能有人试图维护您的代码也会遇到困难。以我的经验，当您更好地理解一段代码时，变量名称会越来越好。用它作为你是否理解问题、是否有好的解决方案以及知道原因的试金石。

第三，当您发现自己将 main() 中的变量初始化为 1 时，它应该在您的脑海中引发关于正确流量控制的标志，就像现在的 PassKnt 一样，被设置为 1。此外，通常，您希望增加 a循环/if/while 结束处的循环计数器，而不是它的开头。同样，这应该让你质疑你的逻辑。

**注意：**默认情况下，记事本以 unicode 格式保存。如果使用记事本为此程序创建测试文件，请务必以**ANSI**格式保存。

我把它留在了，因为它使程序更容易理解，但这里不需要 IsGraphFlg。不是在循环底部将 IsGraphFlg 分配给 WasGraphFlg，而是可以在 if-else 块的上半部和下半部的底部完成，因为上下文提供与 IsGraphFlag 相同的信息。

```
 while (EOF != (ch = fgetc(pFile)))  {
        if(isgraph(ch)) {
            IsGraphFlg=true;
            charcount++;
        }   else    {   // this char is whitespace, last char was part of a word
            IsGraphFlg=false;
            if(WasGraphFlg) {
                wordcount++;
            }
        }
        WasGraphFlg = IsGraphFlg;
        PassKnt++;
    } 
```

您可能还会注意到 PassKnt 现在也没有任何用处，也不再需要。

有人建议 isgraph() 是最佳的，但是当我创建一个 bool 数组并使用 isgraph() 对其进行初始化时，代码运行（超出内存缓冲区，这比戴尔 XPS 8500 上的文件快 10 倍） ) 不到 2/3 的时间 - 每个字符 9.25 个时钟而不是 14.75 个时钟。这是一个完全可选的优化——尽管很重要。

```
bool    IsGph[256];
for(i=0; i<sizeof(IsGph); i++)  {
    IsGph[i] = isgraph((unsigned char)i);
} 
```

在使用中，if(isgraph(i)) 在主要字符和单词计数循环中被替换为 if(IsGph[i])。

**代码更新于 2012 年 12 月 30 日**

```
// Word_Counter.cpp : Defines the entry point for the console application.
//
#include "stdafx.h"
#include "stdafx.h"
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <memory.h>
#include <locale>

#define UCHAR unsigned char
#define dbl   double
#define LLONG __int64

#define PROCESSOR_HZ ((LLONG) 3400000000)
#pragma warning(disable : 4996)
//
//  function prototypes
FILE *OpenFiles (int *FileSz, char *FileName);
// -----------------------------------------------------------------------
FILE *OpenFiles (int *FileSz, char *FileName)   {
    FILE *pFile=NULL;
    if (NULL == (pFile = fopen ((char *)FileName, "r+t" ))) {
        printf ( "Can't open %s\n", FileName );
        return NULL;
    }   else    {
        fseek(pFile,0,SEEK_END);
        *FileSz = ftell(pFile);
        rewind(pFile);
        printf("\nFile size is %i", *FileSz);
        return pFile;
    }
 }
// -----------------------------------------------------------------------
int _tmain(int argc, char *argv[])  {
bool    IsGph[256];
UCHAR   *p, *pBuff=NULL;
int     WrdKnt=0,CharKnt=0;
int     i, j, FileSz, LoopKnt=3500;
time_t  Etime=0,start=0, Eclocks=0;
FILE    *pFile=NULL;
bool    WasGraphFlg=false;

    //  Initialize boolean array to detect printable characters
    for(i=0; i<sizeof(IsGph); i++)  {
        IsGph[i] = isgraph((unsigned char)i);
    }
    if(NULL == (pFile = OpenFiles(&FileSz, (char *)argv[1])))   {
        return 0;
    }
   // --- Process out of buffer, not stdin -------------------------------
    pBuff = (unsigned char *)calloc(FileSz,  sizeof(char));
    fread(pBuff, sizeof(char), FileSz, pFile);
    start = clock();
    for(i=LoopKnt; i; i--)  {
        p= pBuff;
        CharKnt=0;
        WrdKnt=0;
        for(j=FileSz; j; j--)   {
            if(IsGph[*p++]) {
                CharKnt++;
                WasGraphFlg = true;
            }   else    {           // this char is whitespace, and
                if(WasGraphFlg) {   // last char was part of word ?
                    WrdKnt++;
                }
                WasGraphFlg = false;
            }
        }
    }
    Etime  = clock() - start;
    Eclocks= Etime * PROCESSOR_HZ/(LLONG) CLOCKS_PER_SEC;
    printf("\nElapsed time for %10i loops was %10i milliseconds",
                    LoopKnt, Etime);
    printf("\nCPU cycles consumed per char were %2f\n", 
                    (dbl)Eclocks/(dbl)((LLONG)FileSz*(LLONG)LoopKnt));
    printf("\n%i words counted per loop", WrdKnt);
    printf("\n%i chars counted per loop\n", CharKnt);
    getchar();
    return _fcloseall();
    free(pBuff);
} 
```

如果您在命令行参数指定文件名时遇到问题，请在 Visual Studio 的“项目->属性->配置属性->常规”下，将“Unicode”更改为严重错误标记的“多字节”字符集。您总是可以在调试器中查看 argv[1] 的内存，以了解 argv[] 中的实际内容。

# windows-phone-7 - 向 API 发送多个请求时出现 webclient I/O 错误

> ID：13898854
> 
> 赞同：0
> 
> 时间：2012-12-16T05:21:44.437
> 
> 标签：windows-phone-7, c#-4.0, silverlight-4.0

我想做 Twitter 情绪分析 Windows Phone 应用程序。

该应用程序通过根据用户输入的查询词检索所有相关推文来工作。例如，如果我在输入搜索框中输入“Windows Phone”，结果将显示所有包含“Windows Phone”字词的推文。

这是代码（我从[Arik Poznanski 的博客](http://blogs.microsoft.co.il/blogs/arik/archive/2011/02/21/get-twitter-trends-on-windows-phone-7.aspx)中获得）

```
 /// <summary>
    /// Searches the specified search text.
    /// </summary>
    /// <param name="searchText">The search text.</param>
    /// <param name="onSearchCompleted">The on search completed.</param>
    /// <param name="onError">The on error.</param>
    public static void Search(string searchText, Action<IEnumerable<Twit>> onSearchCompleted = null, Action<Exception> onError = null, Action onFinally = null)
    {
        WebClient webClient = new WebClient();

        // register on download complete event
        webClient.OpenReadCompleted += delegate(object sender, OpenReadCompletedEventArgs e)
        {
            try
            {
                // report error
                if (e.Error != null)
                {
                    if (onError != null)
                    {
                        onError(e.Error);
                    }
                    return;
                }

                // convert json result to model
                Stream stream = e.Result;
                DataContractJsonSerializer dataContractJsonSerializer = new DataContractJsonSerializer(typeof(TwitterResults));
                TwitterResults twitterResults = (TwitterResults)dataContractJsonSerializer.ReadObject(stream);

                App thisApp = Application.Current as App;
                thisApp.klasifikasi = new Klasifikasi();

                foreach (Twit Tweet in twitterResults.results)
                {
                    try
                    {
                        thisApp.klasifikasi.UploadData(Tweet); //requesting 
                        break;
                    }
                    finally
                    {
                        // notify finally callback
                        if (onFinally != null)
                        {
                            onFinally();
                        }
                    }
                }
                //thisApp.klasifikasi.UploadDatas(twitterResults.results);
                //thisApp.PositiveTweetModel = new PositiveTweetModel("Positive", twitterResults.results);

                // notify completed callback
                if (onSearchCompleted != null)
                {
                    onSearchCompleted(twitterResults.results);

                   /// Divide the list here

                }
            }
            finally
            {
                // notify finally callback
                if (onFinally != null)
                {
                    onFinally();
                }
            }
        };

        string encodedSearchText = HttpUtility.UrlEncode(searchText);
        webClient.OpenReadAsync(new Uri(string.Format(TwitterSearchQuery, encodedSearchText)));
    } 
```

并调用该方法

```
 TwitterService.Search(
            text,
           (items) => { PositiveList.ItemsSource = items; },
           (exception) => { MessageBox.Show(exception.Message); },
           null
           ); 
```

将 POST 数据上传到 API

```
 public void UploadData(Twit tweetPerSend)
    {
        if (NetworkInterface.GetIsNetworkAvailable())
        {
            chatterbox.Headers[HttpRequestHeader.ContentType] = "application/x-www-                       form-urlencoded";
            chatterbox.Headers["X-Mashape-Authorization"] = "MXBxYmptdjhlbzVnanJnYndicXNpN2NwdWlvMWE1OjA0YTljMWJjMDg4MzVkYWY2YmIzMzczZWFkNDlmYWRkNDYzNGU5NmI=";

            var Uri = new Uri("https://chatterboxco-sentiment-analysis-for-social-media---nokia.p.mashape.com/sentiment/current/classify_text/");

            StringBuilder postData = new StringBuilder();
            postData.AppendFormat("{0}={1}", "lang", HttpUtility.UrlEncode("en"));
            postData.AppendFormat("&{0}={1}", "text", HttpUtility.UrlEncode(tweetPerSend.DecodedText));
            postData.AppendFormat("&{0}={1}", "exclude", HttpUtility.UrlEncode("is")); // disesuaikan 
            postData.AppendFormat("&{0}={1}", "detectlang", HttpUtility.UrlEncode("0"));
            chatterbox.UploadStringAsync(Uri, "POST", postData.ToString());
            chatterbox.UploadStringCompleted += new UploadStringCompletedEventHandler(chatterbox_UploadStringCompleted);

        }
    }

    void chatterbox_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
    {
        var chatterbox = sender as WebClient;
        chatterbox.UploadStringCompleted -= chatterbox_UploadStringCompleted;
        string response = string.Empty;
        if (!e.Cancelled)
        {
            response = HttpUtility.UrlDecode(e.Result);
            nilaiKlasifikasi = ParsingHasil(response);
            MessageBox.Show(nilaiKlasifikasi.ToString()); //just testing
            //textBlock1.Text = response;
        }
    }

    private double ParsingHasil(String response)
    {

        var result = Regex.Match(@response, @"(?<=""value"": )(-?\d+(\.\d+)?)(?=,|$)");
        Debug.WriteLine(result);
        double hasil = Convert.ToDouble(result.ToString());
        //return Convert.ToInt32(result);
        return hasil;

    } 
```

但是，不仅要检索 1 条推文，还会有很多推文，所以主要问题是，在我检索所有推文并向 API 请求结果后，我收到此错误“WebClient does not support concurrent I /O 操作"

有谁知道如何解决这个问题？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:14:24.563

您必须一次同步执行一个 UploadStringAsync。（即在 UploadStringCompleted 处理程序中链式执行下一个 UploadStringAsync。

或者，为每个 UploadStringAsync 创建一个新的 WebClient。

# iphone - 对象c属性dealloc，哪一个是正确的？

> ID：13898857
> 
> 赞同：0
> 
> 时间：2012-12-16T05:21:50.657
> 
> 标签：iphone, objective-c, ios, ipad, properties

> **可能重复：**
> [iOS 中的 Dealloc 方法并将对象设置为 nil](https://stackoverflow.com/questions/6778793/dealloc-method-in-ios-and-setting-objects-to-nil)

至于对象 c 中的属性 dealloc，我见过不同的形式。以下哪个是最好的/正确的

```
//Kind1:
- (void)dealloc
{
    [_property release];
    [super dealloc];
}

//Kind2:
- (void)dealloc
{
    self.property = nil;
    [super dealloc];
}

//Kind3:
- (void)dealloc
{
    [_property release]; _property = nil;
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T06:37:26.457

你的第二个选择是不可取的。属性设置器可能有副作用，并且通常不会在考虑到对象可能已经被拆掉一半的情况下实施。一般来说，除了`[super dealloc]`. 您还应该避免对其他对象进行重要的调用（即除释放之外的任何调用），因为您可能有循环引用，这些引用可能会导致对半释放对象的引用。

第一个选项就足够了。请注意，如果您使用 ARC，则它是多余的。使用 ARC 始终是您最好的选择，因为它不仅更安全，而且速度更快。

第三种选择是有争议的。有些人认为它使您的程序对错误更具弹性（因为在 dealloc 之后的引用可能以零实例变量结束，而不是通过它弹跳并出现段错误，或者更糟）。他们还争辩说，它确保如果您*确实*运行了一个尝试使用该值的方法，它可能会优雅地失败（再次，而不是在此时取消引用什么是悬空指针）。但是，如果您同意我关于避免这种情况的第一点，那就有点没有意义了。而且我的经验是，依赖这种行为是一个坏主意——即使它一开始是一个干净的设计，也很容易忘记它并最终在一段时间后更改代码，从而破坏它。

那些不喜欢第三种选择的人也认为它隐藏了错误。有些人甚至不使用 nil 而是使用明显的虚假值（例如 0x0badf00d）来显式覆盖，以便在取消引用悬空指针时更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:34:34.000

Kind1 绰绰有余；在 alloc 和 dealloc 上使用“self”通常不是一个好主意。因为 self 将调用 setter/getter 方法，如果你有自定义的 setter/getter 方法，它可能会导致麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T06:43:21.333

你永远不应该调用`self.`dealloc。

一旦你已经`release`-ed 那么制作它就没有任何优势了`nil`。

所以，第一个是正确的使用方法`dealloc`。

# uiview - 临时设置 UIView 的锚点，直到关键帧动画之后

> ID：13898862
> 
> 赞同：1
> 
> 时间：2012-12-16T05:23:07.790
> 
> 标签：uiview, point, cakeyframeanimation

设置我的 UIView 的锚点（到 0.5、1.0）会导致我的布局出现各种问题。只要我需要它，我就不能暂时更改它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:05:18.347

我最终将它向下移动了视图高度的 50%，所以它看起来是正确的。这是一个黑客修复，但它有效。

# javascript - 用百分比而不是画布中的像素调整高度和宽度

> ID：13898866
> 
> 赞同：2
> 
> 时间：2012-12-16T05:23:31.573
> 
> 标签：javascript, canvas

我只是想知道如何让 Javascript Canvas 响应 90% 的高度和 100% 的宽度。我试过了：

```
canvas.width = 100%;
canvas.height = 90%; 
```

但是，它只会在我的 IDE 中引发语法错误，并且画布不再呈现。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T05:24:22.830

尝试`canvas.style.width = '100%';`并类似地为`height`.

# java - MAC OSX 上是否预装了 Java 运行时？

> ID：13898870
> 
> 赞同：7
> 
> 时间：2012-12-16T05:24:18.527
> 
> 标签：java, macos, jnlp, java-web-start

我需要为 mac os-x 移植一个 java 桌面应用程序。该应用程序将通过 JNLP 启动。MAC-OSX 上是否预装了 Java 运行时环境？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T05:28:29.100

一般来说。Java 5 或 Java 6 预装在 Mac OS X 上直到[10.6](http://support.apple.com/kb/PH6928)，但在 10.7 中停止了。

此外，最近的 Mac OSX 更新卸载了 Apple 之前支持的 Java 6 插件版本。Apple 从未支持 Java 7。

[https://blogs.oracle.com/thejavatutorials/entry/apple_s_java_mac_os](https://blogs.oracle.com/thejavatutorials/entry/apple_s_java_mac_os)

您（或您的用户）需要从 Oracle 下载并安装适用于 Mac 的 Java 7。但是@Andrew Thompson 的评论（见上文）提供了一种平滑“减速带”的好方法。

# ruby - 如何将 selenium ruby webdriver 测试结果从 Ruby 终端写入输出文件

> ID：13898872
> 
> 赞同：0
> 
> 时间：2012-12-16T05:24:28.747
> 
> 标签：ruby, selenium, webdriver, rake

目前，我在“使用 Ruby 启动命令提示符”终端中使用 rake gem 一次在我的测试套件（由 Selenium Ruby Webdriver 编写）中运行所有 selenium 脚本。

为此，我必须创建一个名称为“rakefile.rb”的文件，其内容如下，并在我的终端中调用“rake”：（我已经根据我之前的帖子中的一个人的指南了解了这些知识[如何导出结果运行 selenium ruby​​ webdriver 脚本以从命令提示符 ruby​​ 窗口输出文件时](https://stackoverflow.com/questions/13881610/how-to-export-results-when-running-selenium-ruby-webdriver-scripts-to-output-fil/13881878#13881878)）。

```
task :default do
    $stdout = File.new('console.out', 'w')

    $stdout.sync = true

    FileList['test*.rb'].each { |file|
    begin
      ruby file

     rescue

      puts "The following tests reported unexpected behavior:"
          puts "#{file} \n"
     end
     }
end 
```

但是，我不知道如何修改“rakefile.rb”以便能够将**执行每个失败的测试（显示在我的终端上）的内容导出到每个输出文件**？这意味着我希望执行每个我的脚本的内容将被写入输出文件而不是显示在我的 Ruby 终端上（例如：当我运行测试脚本“test_GI-1.rb”时，执行这个的内容脚本将被写入输出文件“test_GI-1.rb.out”，而不是显示在我的终端中。

我**将“rakefile.rb”修改为 ruby​​ file >> test.rb.out 之类的东西，但它根本不起作用**（这个东西只有在我直接键入 ruby​​ test.rb >> output.out 之类的东西时才起作用我的红宝石终端）。任何人请指导我的方式。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:12:12.273

我还没有尝试过，但我想这应该可以

```
task :default do
FileList['test*.rb'].each { |file|
 begin
   system("ruby #{file} > #{file}.log")
  rescue
   puts "The following tests reported unexpected behavior:"
   puts "#{file} \n"
  end
}
end 
```

基于新要求——

**更新**

* * *

```
task :default do
    logfile.new("console.out", "w")
    FileList['test*.rb'].each { |file|
     begin
       system("ruby #{file} > #{file}.log")
      rescue
       logfile.puts("The following tests reported unexpected behavior:")
       logfile.puts("#{file} \n")
      end
      }
end 
```

# iphone - iOS 应用内购买跟踪购买的物品

> ID：13898887
> 
> 赞同：1
> 
> 时间：2012-12-16T05:27:15.487
> 
> 标签：iphone, ios, in-app-purchase, storekit

我是应用程序内购买领域的新手，我刚刚在 iTunes 上观看了有关如何将其集成到我的应用程序的教程。我想知道开发人员如何在无需验证收据的情况下跟踪购买的物品。我认为如果我们可以将购买的物品存储在应用程序中会很好，因为这样我们就可以在没有互联网连接的情况下识别购买的物品。

这样做的惯例是什么？这是一个不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-28T17:45:53.587

有两种方法可以跟踪购买的物品：

1 -**存储**- 临时/永久。显然，临时存储不能保护您免受删除/设备更改。如果您在购买成功后立即将其存储在钥匙串或自己的服务器上，则可以确保永久存储。

2 - 苹果自己的 API 告诉你 - 基于某些规则/条件。

**条件**：如果这是非消耗品购买，您再次尝试购买。（[SKPaymentQueue addPayment]）

来自 iTunes Store 的响应将导致 storekit 调用`updatedtransactions`- with status - `SKPaymentTransactionStateRestored`。这仅仅意味着产品已经购买，需要恢复 - 因此您有责任解锁它。

简而言之，如果它是非消耗性购买，它将不允许您再次购买。对于尚未过期的订阅也必须如此（不确定）。

如果您需要有关如何集成 IAP 的分步教程 - 这是[我自己的 SWIFT 和 Objective C 讲座系列](https://www.udemy.com/the-complete-ios-moneymaking-course-learn-in-app-purchases/?couponCode=PROMO29SO)。它还附带代码示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:33:51.353

这是一种不好的做法，因为当您的用户删除并重新安装应用程序时会发生什么？他不会再有他购买的物品了。

[本教程](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)是一个非常好的教程，它应该为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-28T15:02:59.933

应该有允许或能够记录和管理通过 Apple ID 进行的每次应用内购买的应用或设备功能。

问题是……当前的应用内购买设置对用户不友好。

简而言之：购买是您的问题，记录您的购买只是 Apple Inc 和应用程序开发人员“慷慨提供的便利功能”。

不过不应该是这样的。Apple Inc 和应用程序开发人员应整合用户购买信息，使其透明且易于用户访问/理解。

毕竟这是21世纪。

# ruby-on-rails - Ajax 动作不会体现在外观上，而是体现在价值上。为什么？

> ID：13898891
> 
> 赞同：0
> 
> 时间：2012-12-16T05:27:51.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我正在使用 Rails3。现在尝试在 index.html.erb 中实现关注按钮，就像 twitter 一样。
它显示成员列表及其关注按钮。
看起来不错，但如果我按下任何跟随按钮，外观不会改变。
它应该立即更改为取消关注。
我不知道为什么会这样。但是如果我重新加载页面，它会显示正确的状态。

follow_controller.rb

```
class FollowsController < ApplicationController

  def create
    @user = User.find(params[:user_id])
    current_user.follow(@user)
    respond_to do |format|
      format.js {render :action=>"create.js"}
      end
  end

  def destroy
    @user = User.find(params[:user_id])
    current_user.stop_following(@user)
    respond_to do |format|
      format.js {render :action=>"destroy.js"}
  end
end

end 
```

意见/用户/_follow_user.html.erb

```
<% unless user == current_user %>
    <% if current_user.following?(user) %>
        <%= button_to("Un-Follow", user_follow_path(user.to_param, current_user.get_follow(user).id), 
        :method => :delete, 
        :remote => true, 
        :class => 'btn') %>
    <% else %>
        <%= button_to("Follow", user_follows_path(user.to_param), 
        :remote => true, 
        :class => 'btn btn-primary') %>
    <% end %>
<% end %> 
```

意见/用户/create.js.erb

```
$('.follow_user[data-user-id="<%=@user.id%>"]').html('<%= escape_javascript(render :partial => "follow_user", :locals => {:user => @user}) %>');
#jQuery 
```

意见/用户/destroy.js.erb

```
$('.follow_user[data-user-id="<%=@user.id%>"]').html('<%= escape_javascript(render :partial => "follow_user", :locals => {:user => @user}) %>');
#jQuery 
```

意见/用户/index.html.erb

```
<%- model_class = User.new.class -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize %></h1>
</div>
  <% @from %>
  <h3>tag cloud</h3>
  <% tag_cloud(@tags, %w(css1 css2 css3 css4)) do |tag, css_class| %>
    <%= link_to tag.name, {:action=>'index', :tag=>tag.name}, :class => css_class%>
  <% end %> 

<%= paginate @users %>

<table class="table table-condensed">
  <thead></thead>
    <tbody>
    <% @users.each do |user| %>  
      <div class="memberListBox">
        <div class="memberList">
            <p class="name"><span><%= user.user_profile.nickname %></span>(<%= user.user_profile.age %>)</p>
            <p class="size"><%= user.username %></p>
            <p class="img">
            <% if user.user_profile.user_avatar? %>
            <%= image_tag(user.user_profile.user_avatar.url(:thumb),:height => 100, :width => 100, :class => 'img-polaroid' ) %>
            <% else %>
            <%= image_tag('nophoto.gif',:height => 100, :width => 100, :class => 'img-polaroid' ) %>
            <% end %>
            </p>
            <div class="introduction">
                <%= user.user_profile.introduction %>
            </div>

<% if user_signed_in? && current_user!=user %>          
  <div id="follow_user">
    <%= render :partial => "follow_user", :locals => {:user => user} %>
  </div>
<% end %>

  <%= link_to sanitize('<i class="icon-pencil icon-white"></i> ') + 'Message', new_messages_path(user.username), :class => 'btn btn-primary'  %>

                <%= link_to sanitize('<i class="icon-user icon-white"></i> ') + 'Profile', show_user_path(:username => user.username, :breadcrumb => @from), :class => 'btn btn-info' %>              

        </div>
    </div>
   <% end %>
  </tbody>  
</table> 
```

响应内容

`$('#follow_user').html(' <form action=\"/users/1/follows\" class=\"button_to\" data-remote=\"true\" method=\"post\"><div><input class=\"btn btn-primary\" type=\"submit\" value=\"Follow\" /><input name=\"authenticity_token\" type=\"hidden\" value=\"G/taOUeWy2gumhWUi10cPvECAmYLQdhQ2/eGGMJwvPE=\" /><\/div><\/form>`\n');

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:21:16.807

将用户id添加到属性`data-user-id`并添加类`follow_user`

```
<div class="follow_user" data-user-id="<%= user.id %>">
  <%= render :partial => "follow_user", :locals => {:user => user} %>
</div> 
```

# php - PHP - 相对路径“需要”

> ID：13898894
> 
> 赞同：12
> 
> 时间：2012-12-16T05:28:15.947
> 
> 标签：php, url, path, require, relative-path

我的目录结构如下所示：

```
blog -> admin -> index.php
blog.php
db.php
functions.php 
```

我一直在尝试`include`（`require`真的）`blog.php`，`admin/index.php`但面临很多错误。我正在学习 PHP 课程，并且讲师成功地做了同样的事情。

管理员/index.php：

```
require "../blog.php"; 
```

反过来，它的目录中还需要两个文件。

```
require "db.php";
require "functions.php"; 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-16T05:40:52.700

If you find that relative include paths aren't working as expected, a quick fix is to prepend `__DIR__` to the front of the path you're trying to include.

```
require __DIR__ . "/../blog.php"; 
```

It's reasonably clean, and you don't need to modify the include path or working directory.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T05:34:57.280

您需要[`include_path`](http://php.net/manual/en/ini.core.php#ini.include-path)在 php.ini 中设置。

如果要在运行时设置它，请使用[`set_include_path()`](http://php.net/manual/en/function.set-include-path.php).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T05:31:52.870

如果要包含此文件`db.php and functions.php`，`index.php`则必须编写此代码

```
require "../db.php";
require "../functions.php"; 
```

或者，如果您包含此文件，`blog.php`则编写此代码

```
require "db.php";
require "functions.php"; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-16T05:30:03.347

我喜欢以`chdir($_SERVER['DOCUMENT_ROOT'])`. 这使我能够为我的所有包含获得一个很好且合乎逻辑的基本路径。

# objective-c - 如何使只读属性在 iOS 中进行读写？

> ID：13898901
> 
> 赞同：1
> 
> 时间：2012-12-16T05:29:15.417
> 
> 标签：objective-c

我有这样的场景，

```
@interface ClassA:UIView
@property(readonly,strong)UIView *aView;
@end 
```

我还有一堂课

```
@interface ClassB:NSObject
@property(readonly)ClassA *aObj;
@end 
```

如何访问 ClassA 中的视图属性，如 setHidden 等....使用 ClassB 属性

例如：

在另一个类 ClassC.m 中，

```
import ClassB.h
@implementation ClassC
//
 ClassB *bObj;
bObj.aObj.aView.hidden = YES; 
```

（注意：我不想在 .m 中为 ClassA 和 ClassB 修改/添加任何内容）

我想知道这是否可以通过为 ClassA 编写任何类别方法来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:46:25.617

我了解您想要更改对象的属性，而不是指向它的变量。因此，标题具有误导性，您已经可以更改对象。没有什么能阻止你调用任何对象的方法。如果您希望在 Objective-C 中实现对象不变性，则必须在对象内部对其进行编码才能使其工作。

# gwt - Gwt 错误 ...没有可用于 java.io.FileOutputStream 类型的源代码；你忘了继承一个必需的模块吗？

> ID：13898913
> 
> 赞同：1
> 
> 时间：2012-12-16T05:33:22.453
> 
> 标签：gwt, smartgwt

目前我正在使用 smartgwt 从列表网格中导出 csv 文件我正在使用文件输出流将 listgrid 数据写入 csv 问题是它编译成功但在运行时它给出 * 没有源代码可用于 java.io.FileOutputStream 类型; 您是否忘记继承所需的模块？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T05:42:44.757

GWT 是一个客户端库。客户端没有文件。因此，FileOutputStream 无法编译成 JavaScript。

# node.js - 如何使用 Socket.io 禁用多路复用

> ID：13898917
> 
> 赞同：4
> 
> 时间：2012-12-16T05:34:10.970
> 
> 标签：node.js, twitter, websocket, socket.io, multiplexing

我正在使用 Socket.io 使用 Twitter 的 Streaming API 向我的用户流式传输实时推文（我的实现或多或少基于[本教程](http://www.i-avington.com/Posts/Post/using-nodejs-and-socketio-to-stream-tweets-from-the-twitter-api)）。

问题是每次 Socket.io 触发连接事件时，新连接的客户端都会导致连接到服务器的所有其他客户端停止更新。虽然完成我尝试过的所有黑客攻击需要很长时间，但我会说我已经玩够了，我相信这个问题是由 Socket.io 多路复用来自多个客户端的连接（默认启用）作为一个性能提升以允许多个客户端或连接共享相同的底层套接字。简而言之，我认为情况确实如此，因为如果不是连接多路复用，我认为新连接不可能以这种方式影响旧连接。换句话说，如果一个新的，每次客户端连接时都会创建与其自己的底层（TCP）套接字的独立连接，这是不可能发生的，因为一个连接对另一个连接一无所知，因此不会影响当前正在发生的任何其他客户端的状态。这也让我相信，简单地禁用多路复用功能将是解决这个问题的最简单方法，因为我不关心缩放，因为 Node.js 已经处理了我可能需要非常充分地处理的所有并发。

我已经浏览了 Socket.io 的[文档](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)，但看不到通过 API 公开“解复用”连接的能力，所以如果有人知道如何做到这一点，我会感谢您的回复。

我下面的代码非常标准和简单。但要明确一点，问题是每当一个新客户端连接到 Socket.io 时，每个其他客户端都会停止接收新推文，并且更新不再推送到旧客户端，除非我刷新浏览器，在这种情况下，新刷新的客户端将开始更新并再次接收新的推文，但其他仍然连接的客户端将停止更新。

**服务器端代码：**

```
// Code also uses ntwitter (https://github.com/AvianFlu/ntwitter) as an abstraction over Twitter's Streaming API
io.sockets.on('connection', function (socket) {
  tweet.stream('statuses/filter', { track : 'new orleans' }, function (stream) { 
    stream.on('data', function (data) {
      // The following lines simply pre-process data sent from Twitter so junk isn't
      // unnecessarily sent to the client.
      if (data.user) {
         tweets = {
         text  : data.text,
         image : data.user.profile_image_url,
         user  : data.user.name
         };
         var t = JSON.stringify(tweets);
         console.log(t);
         socket.send(t);
      }  
    });
  });
}); 
```

**客户端代码**

```
// Notice the option that I passed in as the second argument. This supposedly forces every 
// new client to create a new connection with the server but it either doesn't work or I'm 
// implementing it incorrectly. It is the very last configuration option listed in the 
// documentation linked to above.
var socket = io.connect('http://' + location.host, {'force new connection' : true });
socket.on('message', function (tweet) {
  var t = JSON.parse(tweet);
  if (t.image) {
    $('.hero-unit').prepend('<div class="media"><a class="pull-left" href="#"><img class="media-object" alt="64x64" style="width: 64px; height: 64px;" src="' + t.image + '"></a><div class="media-body"><h4 class="media-heading">' + t.user + '</h4>' + t.text + '</div></div>');
  } 
}); 
```

如果我的想法不正确，或者我的代码有问题，我绝对愿意接受任何建议。我也很乐意回复任何其他详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T15:41:10.793

我会尝试这样的事情

服务器端：

```
io.sockets.on('connection', function (socket) {
    //Other Connectiony goodness here.
    });
});

tweet.stream('statuses/filter', { track : 'new orleans' }, function (stream) { 
    stream.on('data', function (data) {
      // The following lines simply pre-process data sent from Twitter so junk isn't
      // unnecessarily sent to the client.
      if (data.user) {
         tweets = {
         text  : data.text,
         image : data.user.profile_image_url,
         user  : data.user.name
         };
         var t = JSON.stringify(tweets);
         console.log(t);
         io.sockets.emit("tweet", t);
      }  
}); 
```

客户端：

```
var socket = io.connect('http://' + location.host, {'force new connection' : true });
socket.on('tweet', function (tweet) {
  var t = JSON.parse(tweet);
  if (t.image) {
    $('.hero-unit').prepend('<div class="media"><a class="pull-left" href="#"><img class="media-object" alt="64x64" style="width: 64px; height: 64px;" src="' + t.image + '"></a><div class="media-body"><h4 class="media-heading">' + t.user + '</h4>' + t.text + '</div></div>');
  } 
}); 
```

基本上让来自 twitter 的流在你的套接字之外，然后在一条新的推`emit`文上向所有连接的人发送一条消息。

# c# - “动态” exe 可能吗？

> ID：13898920
> 
> 赞同：1
> 
> 时间：2012-12-16T05:34:44.143
> 
> 标签：c#, ruby, windows, winforms

我想知道是否可以使用反射在运行时更改代码文件/可移植可执行文件，并保存它们。所以从技术上讲，可执行文件正在保存对自身的更改。我已经并且正在通过两个可执行文件来做到这一点，一个只是简单地读取另一个的字节，编辑，重新排列它们并覆盖。我只是想知道是否有一个聪明的反射选项，使用.Net？如果没有，在 Windows 上运行的任何其他语言是否具有此功能？我听说过很多关于 Ruby 的好消息。如果您有兴趣，目标是将我自己的自定义数据库类编译到我的 exe 中，作为我的程序数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:11:44.010

这是一个 Ruby 脚本的[youtube 视频](http://www.youtube.com/watch?v=ktq-22iq-Po)，它正在重写自身。作者：[远藤佑介](http://mamememo.blogspot.nl/2010/09/qlobe.html)；还有[更多](http://mamememo.blogspot.nl/2010/12/merry-quine-mas-2010.html)。

# sql - 具有许多空值的表与 2 个单独的表

> ID：13898925
> 
> 赞同：3
> 
> 时间：2012-12-16T05:35:25.903
> 
> 标签：sql, database, sql-server-2008, database-design

我有一个包含 10 列的表 (X)，其中 6 个是可为空的外键（bigint 数据类型），并且每行中的 5 个将为 NULL。

解决方案：将表 (X) 分成 2 个表：(X) 和 (XType)，以便 (X) 包含一个用于插入六个数据之一的大 int 列（不是外键）`ID`和一个`XType_id`用于确定 6 个数据类型的列。

这个解决方案是最优的还是第一个有 10 列的表更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T08:21:02.103

我更喜欢你的第一个选项。

当您拥有这 6 个单独的外键列时，您可以通过对这6 个引用的表设置实际的**外键约束来****强制引用完整性。**

 **如果你有一个*超级聪明的*方法，一个`ID`和一个`ID_Type`，你就不能再强制引用完整性了。

对我来说，能够**真正实施参照完整性的好处****远远超过**了只有一个列的*“好处” ；*`ID`有几列`NULL`值也不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:39:30.510

[Marc_s 的回答](https://stackoverflow.com/a/13899689/533120)是绝对正确的，让我再补充一个花絮：您不太可能使用第二种方法节省空间（并且通过扩展，改进缓存）。MS SQL Server 将在位字段中对字段的“NULL-iness”进行编码，并且 6 个 NULL-able 列可以由单个字节表示。第二种方法中的“类型”字段不会少于一个字节。

*顺便说一句，如果您的 FK 具有不同的类型，则第二种方法需要将 FK 值存储为“最小公分母”类型（可能是字符串）并手动进行类型转换，因此您也会失去域的完整性。***

# sql - 如何根据默认表插入多行？

> ID：13898927
> 
> 赞同：0
> 
> 时间：2012-12-16T05:35:52.923
> 
> 标签：sql, ruby-on-rails

我有以下表格：用户、默认价格、客户、客户价格。我想要的是在创建新客户端时让 default_prices 自动填写 client_prices 表。看起来我可以使用与[此答案](https://stackoverflow.com/a/4327831/1158929)类似的解决方案。我想要发生的是，当用户创建新客户端时，客户端的所有 client_prices 都由 default_prices 表填充。

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :stripe_token, :default_prices_attributes
  has_many :default_prices
  has_many :clients
  accepts_nested_attributes_for :default_prices, :allow_destroy => true

class DefaultPrice < ActiveRecord::Base
  attr_accessible :price, :user_id, :visit_type, :id
  belongs_to :user
end

class Client < ActiveRecord::Base
  attr_accessible :active, :address_1, :address_2, :city, :email, :first_name, :last_name, :state, :user_id, :zip, :client_prices_attributes
  belongs_to :user
  has_many :client_prices
  accepts_nested_attributes_for :client_prices_attributes

class ClientPrice < ActiveRecord::Base
  attr_accessible :price, :client_id, :visit_type, :id
  belongs_to :uclient
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T06:04:53.487

您可以添加 before_create 块来复制默认价格。

```
before_create do
  user.default_prices.each do |default_price|
    client_prices.build(default_price.attributes.slice("price", "visit_type"))
  end
end 
```

# mongodb - 查询字段小于或不存在的文档

> ID：13898929
> 
> 赞同：0
> 
> 时间：2012-12-16T05:36:25.373
> 
> 标签：mongodb

我想查询`version`少于 3 个或完全丢失的所有文档。

我试过了

```
{
  version: [
    { $exists: false },
    { $lt: 3 }
  ]
} 
```

但它不返回任何文件。我的查询是什么意思，正确的查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:47:40.903

您需要使用[`$or`](http://docs.mongodb.org/manual/reference/operators/#_S_or)：

```
{
    $or: [
        { version: { $exists: false } },
        { version: { $lt: 3 } }
    ]
} 
```

我不确定您所写的查询实际上意味着什么（至少，任何记录的内容）。它指定了一个数组，但无法在逻辑上组合元素（`$and`、`$or`、`$in`等）。

# java - Java mysql十进制排序错误

> ID：13898931
> 
> 赞同：1
> 
> 时间：2012-12-16T05:36:45.097
> 
> 标签：java, mysql, jdbc

我似乎遇到了一个障碍。我正在为我的世界 bukkit 服务器创建一个“经济”系统。

我试图先按“最富有”来订购桌子，但是收到的订单是不同的。当我通过 phpMyAdmin 运行 SQL 时，它以正确的顺序接收

![在此处输入图像描述](../Images/286df0124a658b1b2beb1072ae14f928.png)

![在此处输入图像描述](../Images/b7e6d2155d8f5db640d14257384abc34.png)

```
public static HashMap<String, Double> topPlayers(String economyKey) {
    sql.build("SELECT b.balance, p.username FROM " + sql.prefix
            + "players p INNER JOIN " + sql.prefix + "balances b ON p.id=b.user_id WHERE economy_key=? ORDER BY b.balance DESC LIMIT 0,5");
    String[] params = { economyKey };

    ResultSet results = sql.executePreparedQuery(params);
    HashMap<String, Double> players = new HashMap<String, Double>();
    try {
        while (results.next()) {
            players.put(results.getString("username"), results.getDouble("balance"));
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    return players;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T05:39:41.483

您正在使用未排序的 HashMap。尝试使用[*List*](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)或任何其他有序数据结构 - 它会解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T05:47:20.653

您使用的`HashMap`是不保证元素顺序的。

这就是[java.util.HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)的 API 文档所说的：

***此类不保证地图的顺序；特别是，它不保证订单会随着时间的推移保持不变。***

您应该选择一个实现`SortedMap`接口的具体类，它是***A Map ，它进一步提供了对其键的总排序***。

例如 a`TreeMap`就足够了，因为它实现了`SortedMap`接口。

# c# - 具有事件驱动架构的 C# 托管插件框架

> ID：13898934
> 
> 赞同：0
> 
> 时间：2012-12-16T05:37:06.043
> 
> 标签：c#, plugins, architecture, maf

有什么方法可以将事件驱动的体系结构与 .NET 3.5 托管加载项框架一起使用？

据我所知，MAF 只允许使用严格定义的数据管道直接调用预定义函数，用于主机和插件之间的信息交换。我正在寻找一个框架，它允许在应用程序中使用热插拔插件，同时仍然允许事件驱动的架构（从主机和插件端）。

如果 MAF 不能做到这一点，是否有任何框架可以做到？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T18:39:27.380

最终完全放弃了 MAF，因为拖放功能是不必要的。

# c++ - 在线程之间共享文件描述符

> ID：13898935
> 
> 赞同：0
> 
> 时间：2012-12-16T05:37:11.973
> 
> 标签：c++, multithreading, synchronization, pthreads

我有许多 POSIX 线程，两个读取器从串行端口读取，其他读取器使用文件描述符写入同一端口。如何在它们之间共享相同的描述符？我通过信号量在所有线程之间同步了读/写和写/写操作。

**注意：**我假设文件描述符应该在同一进程的线程之间共享，但是`EBUSY`当第二个读取器尝试从端口读取时，我的代码无法运行并出现错误。（之前问过一个[问题](https://stackoverflow.com/questions/13889609/force-read-system-call-to-block)）

**更新**

这是一个有点奇怪的情况，即使在运行时只有一个线程，对`read()`after的任何调用都会`write()`返回错误。也许我问错了问题。每个之后都应该有某种方式来确保该设备是免费的？或以某种方式强制阻止？`-l``EBUSY``flush``write()``write()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:27:29.057

很明显，`EBUSY`返回码表明该端口正在使用中，稍后应再次查询。您的线程应该稍等片刻再试一次，直到命令通过。

您在其中一条评论中提到了端口背后的系统是机械系统，这可以解释为什么处理命令可能需要一点时间。

我认为“一个线程处理 IO”是最好的方法。每次读/写都会阻塞线程并避免`EBUSY`您目睹的问题。您剩下要做的就是实现一个命令队列（非常容易使用`std::queue`或类似，只需一个互斥锁即可同步所有访问）。

**更新**：阅读您的更新，我想这`EBUSY`只是命令执行速度非常慢的迹象，并且在系统调用返回后不久完成，以至于即使一个线程正在执行 IO，它也可能会遇到它。正如我在回答开头所说的那样，让线程在重新发出它的命令之前稍等片刻，就应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:33:48.003

打开带有“O_NONBLOCK”标志的文件。

# php - HashCash - PHP & JavaScript

> ID：13898936
> 
> 赞同：0
> 
> 时间：2012-12-16T05:37:24.893
> 
> 标签：php, javascript, forms, security

> **可能重复：**
> [如何在 PHP 中创建 Hashcash](https://stackoverflow.com/questions/10135914/how-to-create-a-hashcash-in-php)

我想我的第一个问题是，“hashcash”在提高安全性方面有什么用处（尤其是考虑到摩尔定律）？

如果是这样，我的第二个问题是，有人知道如何在 PHP 和 JavaScript 中实现它吗？它的网站（[http://hashcash.org/](http://hashcash.org/)）很旧，并且有一个 JavaScript 和 PHP 实现的死链接，**我基本上找不到任何关于它**的东西，特别是如何使用这两种语言制作和使用它.

欢迎任何帮助。:-)

# iphone - UIWebView 加载带有参数的 URL

> ID：13898938
> 
> 赞同：20
> 
> 时间：2012-12-16T05:38:20.510
> 
> 标签：iphone, objective-c, url, uiwebview, nsuserdefaults

我有一个将用户 ID 和代码存储在 NSUSERDEFAULTS 中的应用程序我需要使用这些值才能让 UIWebView 访问 url：www.mywebsite.com/check.php?id=(idhere)&code=(idhere)。

我看过其他一些主题，但到目前为止似乎没有任何帮助。

我是这种语言的新手，所以感谢您的耐心等待。

杰克布朗。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-16T05:47:32.310

最简单的形式：

```
- (void) viewDidLoad 
{    
    [super viewDidLoad];

    UIWebView *webView = [UIWebView alloc] initWithFrame:self.view.frame];
    [self.view addSubview:webView];
    NSString *url = @"http://google.com?get=something&...";
    NSURL *nsUrl = [NSURL URLWithString:url];
    NSURLRequest *request = [NSURLRequest requestWithURL:nsUrl cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:30];

    [webView loadRequest:request];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-16T06:55:40.383

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

NSString *userId= [prefs stringForKey:@"userIdkey"];

NSString *code= [prefs stringForKey:@"codeKey"]; 
```

所以你的网址字符串将是，

```
NSString *urlStr = [NSString stringWithFormat:@"http://www.mywebsite.com/check.php?id=%@&code=%@",userId,code]; 
```

# c# - C# - 实时显示多行文本框计数

> ID：13898939
> 
> 赞同：1
> 
> 时间：2012-12-16T05:38:33.473
> 
> 标签：c#, list, counter, multiline

我有一个多行文本框，我可以在其中键入或粘贴项目。在文本框的底部，我有一个“Item Count =”标签和旁边的“0”文本框。

我希望“0”文本框中的文本实时跟踪我的文本框列表中的项目数。这可能吗？

这就是我所拥有的，但我无法让它工作：

```
 private void textBox2_TextChanged(object sender, EventArgs e)
    {
        char[] delimiterChars = { ',', ':', '|', '\n' };
        List<string> sortBox = 
              new List<string>(textBox_ListSource.Text.Split(delimiterChars));
        var itemCount = sortBox.Count();
        textBox_SourceCount.Text = itemCount;
    } 
```

我在最后一行的“itemCount”下得到了一个红色的波浪线。它不会编译并说不能明确地将'int'转换为'string'。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T05:46:36.833

尝试

```
textBox_SourceCount.Text = itemCount.ToString(); 
```

此外，您不需要使用 LINQ Count 函数，因为 List 具有 Count 属性。

```
var itemCount = sortBox.Count(); // Calls a LINQ function which calls the Count property
var itemCount = sortBox.Count; // Calls the Count property directly 
```

为了将来参考，C# 不会自动将 an 强制`int`转换为`string`. 在大多数情况下，您需要显式执行转换。

# algorithm - Flow Free Like Random Level Generation 只有一种可能的解决方案？

> ID：13898941
> 
> 赞同：5
> 
> 时间：2012-12-16T05:39:19.723
> 
> 标签：algorithm, game-development

我已经实现了在这个问题中标记为正确答案的算法：[What to use for flow free-like game random level creation？](https://stackoverflow.com/questions/12926111/what-to-use-for-flow-free-like-game-random-level-creation/12926928)

但是，使用该方法将创建可能具有多种解决方案的板。我想知道是否可以对算法进行任何简单的限制或修改以确保只有一种可能的解决方案？

![解决方案](../Images/e8f2c9918533b2402baf78862366a3f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T10:48:09.967

创建唯一的 Numberlink/Flow Free 非常困难。[如果您在提到的线程中](https://stackoverflow.com/a/14007585/205521)查看我的算法建议，您会发现一种算法可以让您创建具有必要条件的谜题，即解决方案不能具有相同颜色的 2x2 正方形。[然而，在http://forum.ukpuzzles.org/viewtopic.php?f=3&t=41](http://forum.ukpuzzles.org/viewtopic.php?f=3&t=41)的讨论表明这还不够，因为还有许多非平凡非独特的谜题。

从我对这个问题的研究来看，解决这个问题的唯一方法似乎是有一个单独的算法来测试唯一性，并丢弃坏实例。一种专门为唯一性测试算法而设计的求解器是[Imo 的求解器](https://github.com/imos/Puzzle/tree/master/NumberLink)。另一种选择是使用多个不同的求解器并检查它们是否提出了相同的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:05:09.277

我认为您应该实施求解器，它可以找到某个级别的所有解决方案。最简单的方法是回溯。

当您有许多级别时，请一个接一个并寻找解决方案。一旦你找到了某个关卡的第二个解决方案，就把那个关卡扔掉。

# haskell - Monad 的 Num 实例；仅在存在看似无关的代码的情况下重叠实例？

> ID：13898945
> 
> 赞同：0
> 
> 时间：2012-12-16T05:40:41.330
> 
> 标签：haskell, overlapping-instances

`Monad`如果我可以将s 视为`Num`s（当然，在适用的情况下），我有一些代码会写得更干净。很容易做到：

```
{-# LANGUAGE FlexibleInstances #-}

import Control.Monad (liftM, liftM2)
import Data.Char (digitToInt)

instance (Monad m, Num a) => Num (m a) where
  (+) = liftM2 (+)
  (-) = liftM2 (-)
  (*) = liftM2 (*)
  abs = liftM abs
  signum = liftM signum
  fromInteger = return . fromInteger

square :: (Monad m, Num a) => m a -> m a
square x = x * x

-- Prints "Just 9", as expected
main = putStrLn $ show $ square $ Just 3 
```

但是当我将以下函数添加到文件中时......

```
digitToNum :: (Num a) => Char -> a
digitToNum = fromIntegral . digitToInt 
```

…我收到以下错误：

```
monadNumTest.hs:15:14:
    Overlapping instances for Num (m a)
      arising from a use of `*'
    Matching instances:
      instance (Monad m, Num a) => Num (m a)
        -- Defined at monadNumTest.hs:6:10
      instance Integral a => Num (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
    (The choice depends on the instantiation of `m, a'
     To pick the first instance above, use -XIncoherentInstances
     when compiling the other instance declarations)
    In the expression: x * x
    In an equation for `square': square x = x * x 
```

这对我来说没有意义，因为 (1)`digitToNum`从未被调用， (2)`Ratio`不是`Monad`. 所以我不确定这是如何或为什么会出现问题。任何有关此的提示将不胜感激。

这是 GHC 7.4.2，使用 Haskell 平台 2012.4.0.0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T06:02:13.220

这里的关键问题是 haskell 中的一个原则，即编写额外的实例不应该改变现有代码的操作。这增加了 haskell 代码的健壮性，因为如果它所依赖的模块添加了新实例，代码不会中断或具有不同的行为。

出于这个原因，在选择用于类型的可能实例时，Haskell 不会考虑实例的上下文。例如，当匹配检查一个类型是否匹配`instance (Monad m, Num a) => Num (m a)`该类的实例时`Num`，它只会检查它是否可以匹配`m a`。这是因为以后任何类型都可能成为类的实例，并且如果实例选择使用上下文信息，则添加该实例将改变现有程序的操作。

例如，没有什么可以阻止在您的模块或您依赖的模块中添加以下代码：

```
instance Monad Ratio where
   return = undefined
   (>>=) = undefined 
```

当然，这样的实例是无用的，但 haskell 无法判断。也可能有一个有用的`Monad`for定义`Ratio`（我没有研究过）。

总之，你试图做的不是一个好主意。`OverlappingInstances`您可以使用和来停止这些限制`IncoherentInstances`，但是由于上述原因，大多数 Haskell 程序员不建议将这些标志用于主流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T10:16:37.033

正如@nanothief 解释的那样，Haskell 的类型类是根据[“开放世界假设”](http://book.realworldhaskell.org/read/using-typeclasses.html#id608052)设计的。解决这个问题的标准方法是使用`newtype`包装器，它使实例头不那么通用。例如

```
newtype WrappedMonad m a = WrapMonad { unwrapMonad :: m a }

instance Monad m => Monad (WrappedMonad m) where
   return = WrapMonad . return
   (WrapMonad a) >>= f = WrapMonad (a >>= unwrapMonad . f)

instance (Monad m, Num a) => Num (WrappedMonad m a)
   (+) = liftM2 (+)
   fromInteger = return . fromInteger
   -- etc. 
```

现在您应该能够通过首先包装所有输入来使用它，并且只在最后展开：

```
unwrapMonad . sum . map WrapMonad $ [[1, 2], [10,20], [100,200]]
-- [111,211,121,221,112,212,122,222] 
```

（显然，更长的算术链会有更大的好处。）

可能值得推导`Eq`等`Show`，`WrappedMonad`以使其成为`m a`.

# php - 如何使用 php 之类的 twitter 在我的网站中显示自定义 facebook 提要

> ID：13898947
> 
> 赞同：0
> 
> 时间：2012-12-16T05:40:57.233
> 
> 标签：php, facebook, facebook-graph-api

我浏览了整个网站，没有得到任何东西。

我想做的是，我有一个 facebook 页面，我想使用 php 在我的网站页脚页面中显示最新帖子。我只想`post description and time`在格式化的 CSS 中仅从 facebook 显示。高音扬声器提供相同的设施，但我不确定 facebook。请帮助在我的网站上进行配置

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:59:56.840

我建议你看看 HybridAuth 库。

> [http://hybridauth.sourceforge.net/](http://hybridauth.sourceforge.net/) [http://hybridauth.sourceforge.net/userguide/IDProvider_info_Facebook.html](http://hybridauth.sourceforge.net/userguide/IDProvider_info_Facebook.html)

初始化 Facebook Adapter 后，只需使用 Facebook API 查询所需对象即可

> [http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

# c# - 在几种情况下为真的单元测试断言

> ID：13898949
> 
> 赞同：3
> 
> 时间：2012-12-16T05:41:22.623
> 
> 标签：c#, unit-testing, nunit, mstest

我正在尝试编写一个单元测试来检查某个结果是否正确。但是，有两个结果被认为是正确的。有没有办法用断言做 OR？我知道我可以做 result = x || result = y 并断言这是真的。但我不想看到真！=假，我想看到结果！= x或y。

我使用的框架是 mstest，但我也愿意听取有关 nunit 的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T06:10:43.337

你可以试试[Fluent Assertions](http://fluentassertions.codeplex.com/)。这是一组 .NET 扩展方法，可让您更自然地指定预期结果测试。Fluent Assertions 同时支持 MSTest 和 NUnit，所以以后切换到 nUnit 也没什么大不了的。然后您可以使用以下代码段表达您的断言：

```
// Act phase: you get result somehow
var result = 42;

// Assert phase
result.Should().BeOneOf(new [] { 1, 2 } ); 
// in this case you'll be following error:
// Expected value to be one of {1, 41}, but found 42. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T15:11:54.327

NUnit 中有一个很好 *的基于约束的断言模型*。它允许定义复合约束。[在此处](http://www.nunit.org/index.php?p=constraintModel&r=2.4.8)查看详细信息

在您的情况下，断言可能会写：

```
Assert.That(result, Is.EqualTo(1).Or.EqualTo(5)); 
```

失败的测试消息将是（例如）：
预期：1 或 5
但是是：10

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:17:42.573

您可以创建您的 Assert 方法，以防实际结果可能匹配两个以上的预期值：

```
public void AssertMultipleValues<T>(object actual, params object[] expectedResults)
{
    Assert.IsInstanceOfType(actual, typeof(T));

    bool isExpectedResult = false;
    foreach (object expectedResult in expectedResults)
    {
        if(actual.Equals(expectedResult))
        {
            isExpectedResult = true;
        }
    }

    Assert.IsTrue(isExpectedResult, "The actual object '{0}' was not found in the expected results", actual);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T06:13:23.997

你可以做：

```
Assert.IsTrue( result == x || result == y ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T06:14:18.160

最简单的选择是只使用`Assert.IsTrue`，但也传递一个字符串消息以在失败时打印。该字符串可以提供有关现实如何未能达到预期的信息：

```
Assert.IsTrue(result == x || result == y, "Result was not x or y"); 
```

您还可以轻松地在自定义消息中包含实际值：

```
Assert.IsTrue(result == x || result == y, "Result was not x or y, instead it was {0}", result); 
```

或者，您可以将“正确”值存储在 Collection 中，然后使用[`CollectionAssert.Contains`](http://msdn.microsoft.com/en-us/library/ms244248.aspx).

# ruby - Ruby 语法：位掩码

> ID：13898952
> 
> 赞同：1
> 
> 时间：2012-12-16T05:41:38.020
> 
> 标签：ruby, syntax

我在整理[以下代码](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)应该做的事情时遇到了很多困难（我理解它应该做什么，我只是无法将这些部分放在一起）：

```
def roles=(roles)
  self.roles_mask = (roles & ROLES).map { |r| 2**ROLES.index(r) }.inject(0, :+)
end

def roles
  ROLES.reject do |r|
    ((roles_mask || 0) & 2**ROLES.index(r)).zero?
  end
end 
```

`ROLES`是链接中指定的数组。我假设`roles`也是一个数组。

1.  为什么有同名的 setter 方法和常规方法？
2.  什么数组作为`map`方法的对象？如果`roles`is`['author', 'editor']`和`ROLES`is `['author', 'editor', 'manager']`，运算符如何为`&`创建一个数组`map`？
3.  是什么`2**ROLES`？*我发现这真的只是`2`提升到`ROLES.index(r)`.*
4.  “ [Rails 应用程序上的位掩码属性](http://asilia.heroku.com/2011/04/06/bitmask-attributes-on-a-rails-application)”说这是针对数组`(roles & ROLES)`清理参数，但清理它是什么意思？`roles``ROLES`
5.  如果`r`是数组的当前值，返回的方法`(roles & ROLES)`如何？*我发现这是返回**数组中的位置**，但我仍然不知道如何**与它交互/工作。*`index``2**ROLES``r`*`roles``ROLES``(roles & ROLES).map`*
6.  该方法如何在该`inject`方法的括号中的条件下工作`map`？

我想弄清楚这个位掩码是如何工作的，但我不知道等式右边是如何`def roles=(roles)`返回一个整数的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T06:02:57.053

基本上，`index`调用通过确定它们在数组中的位置来将给定的角色转换为整数`ROLES`。然后将 2 提升到该指数的幂，并`inject`简单地对结果求和。

简单地说

`&`第 1 步是通过使用to se 两个数组中的哪些值匹配来获取在 ROLES 中找到的角色。

第 2 步，为每个匹配的角色计算 2**index。Map 返回这些值的数组。

第三步，对数组求和，得到最终的整数。

这个想法是为每个角色组合计算一个唯一的整数。

getter 只是展开返回匹配角色组合的过程。

# php - 使用多个下拉列表的 Wordpress 搜索

> ID：13898954
> 
> 赞同：1
> 
> 时间：2012-12-16T05:42:24.833
> 
> 标签：php, javascript, jquery, html, wordpress

我如何搜索多个类别？

例如，我有 4 个下拉菜单：

```
1\. City
2\. Area
3\. Month
4\. Products/Services 
```

因此，当任何用户访问我的网站时。将打开一个静态页面，将有 4 个下拉列表可供选择和一个按钮名称搜索，从所有 4 个类别中选择后，搜索将在我的 Wordpress 中按用户选择类别。

![在此处输入图像描述](../Images/7b372f4092cd360eb6743d4a7c0935db.png)

另请查看[http://gorillathemes.com/broker/?wptheme=Broker-Real-Estate-White-Style](http://gorillathemes.com/broker/?wptheme=Broker-Real-Estate-White-Style)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:38:19.310

我不完全了解您的编程技能。基本上，您需要在提交时手动构建查询。据我所知，在 WordPress 中没有这样做的本地方式。这就是为什么您需要使用选定的参数自行构建它。解决方案取决于您为此使用的代码，但通常在表单中，提交操作将生成类似的查询

`?dropdown-name=selected-option-value&dropdown2-name=selected-option-value`

那可以做的工作。所以做一个正确的标记就足够了。请记住，下拉名称由声明的名称给出，值取自属性（显示给用户的文本可能与值不同，例如，出于用户友好的目的）。这意味着选择名称应该是分类名称，而值应该是术语本身，以便开箱即用。

格式应该是：`?city=mumbai&area=kurla&month=april&product=food`假设它们中的每一个都代表`taxonomy-name=term`. 我认为这类查询没有漂亮的固定链接格式。

如果需要，请随时要求澄清。我希望这可以帮助你。

# html - 来自单独文件的内容，布局完整

> ID：13898955
> 
> 赞同：0
> 
> 时间：2012-12-16T05:42:34.553
> 
> 标签：html, layout, tabs

我正在制作个人主页。我想展示几个“类别”。我看到两个选择：

1) 制作许多页面，例如 category1.html、category2.html ... 并复制我不想更改的所有部分（例如菜单、标题 ...）。但是，如果我只想更改布局，那么更改所有这些部分会很糟糕。

2) 我可以将所有内容放在一个 index.html 文件中并使用标签功能吗？这会使 index.html 太长，我将不得不查看所有内容以仅更改内容

是否可以在我的主页中有某种选项卡，并且只从单独的文件中提取特定 div 的内容而不改变主布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T03:39:40.320

我找到了我的答案。实际上，我认为像[jekyll](http://jekyllrb.com/)这样的东西是我想要的，即静态站点生成器。不管怎么说，还是要谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:12:47.290

通常，如果您使用 Web 框架构建站点，它包含一个可以轻松处理此类问题的模板系统。如果您只想要一个基本的 HTML 页面，这涉及到很多可能有点过分的东西。

如果您只想构建一些 HTML 页面，请考虑使用服务器端包含 (SSI)。如果您的网络服务器是 Apache，此页面可能会有所帮助：[https ://httpd.apache.org/docs/2.4/howto/ssi.html](https://httpd.apache.org/docs/2.4/howto/ssi.html)

SSI 允许您添加这样的标签

`<!--#include virtual="/header.html" -->`

您可以添加到您的各个类别页面，以便它们可以共享一个公共标题。

# ping - 如果我能够在浏览器中加载站点的主页，会导致 ping 失败的原因是什么？

> ID：13898961
> 
> 赞同：1
> 
> 时间：2012-12-16T05:43:31.353
> 
> 标签：ping, traceroute

我可以从网络浏览器加载网站的主页，但从命令行 ping 它会导致多台机器 100% 丢失。

如果超出范围，我深表歉意。指出我正确的方向，我会在别处提出我的问题。

traceroute 如下所示（随机，我的意思是我不认识它们）：

```
Hop (ms)    (ms)    (ms)             IP Address Host name
1     3       0       0          __random.ip__   __random.host.net__  
2     4       0       0          __random.ip__   __random.host.net__  
3     0       0       0          __random.ip__   __random.host.net__  
4     20      20      20         __random.ip__   __random.host.net__  
5     20      20      21         __random.ip__   __random.host.net__  
6     28      28      28         __random.ip__   __random.host.net__  
7     32      32      31         __random.ip__   __random.host.net__  
8     Timed out       Timed out       Timed out               -  
9     Timed out       Timed out       Timed out               -  
10    Timed out       Timed out       Timed out               -  
11    Timed out       Timed out       Timed out               - 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T05:47:01.600

[`ping`](http://en.wikipedia.org/wiki/Ping_%28networking_utility%29)是一个实用程序，它向机器发送[ICMP](http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol) “回显请求”消息，如果它被支持并启用，它将用发送给它的相同数据包回复。

该网站由侦听 TCP 端口 80 的网络服务器提供服务。

这是两种完全不同的服务，任何机器上都不能启用，或者两者都不能启用。

您可能看到的是您正在连接的机器正在运行一个网络服务器，但禁用了 ICMP 请求。此外，您和此盒子之间可能存在任意数量的防火墙，其中任何一个都可能过滤掉 ICMP 流量。

事实上，最新版本的 Windows 在默认防火墙规则中禁用了 ICMP ECHO。它必须明确启用。

# javascript - 简单的点击计数器

> ID：13898965
> 
> 赞同：-4
> 
> 时间：2012-12-16T05:44:38.330
> 
> 标签：javascript, html, dom, click, counter

我希望从 10 开始的数字显示在文本框中，每次单击按钮时，数字都会减少 1。如何在 Javascript 上执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T05:49:04.350

将您的文本字段定义为：

```
<input type="text" name="counter" id="countField" value="10"/> 
```

然后定义一个 reductionValue 函数为：

```
function decreaseValue(){
    var fieldElem = document.getElementById("countField");
    fieldElem.value = parseInt(fieldElem.value, 10) -1;
} 
```

将上述函数作为`onclick`函数添加到您的按钮中，这一切都应该完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:48:56.613

好吧，您首先制作一个文本框和一个按钮：

```
<input id="mybox" type="text" value="10" />
<button id="mybutton">Decrease</button> 
```

接下来，您需要一个单击处理程序来减少文本框中的值：

```
document.getElementById('mybutton').addEventListener("click", function(){
    var input = document.getElementById('mybox');
    mybox.value = parseInt(mybox.value, 10) - 1;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T05:48:57.160

如果你有 jquery 包括它是非常简单的......

```
<script type='text/javascript'>
var totalClicks = 10;
$(document).ready(function() {
    $('INSERT THE ID OF THE BUTTON HERE').click(function() {
        totalClicks -= 1;
        $('INSERT THE NAME OF THE INPUT FIELD YOU WANT THE CONTENT HERE').val(totalClicks);
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T05:49:38.347

演示：http: [//jsfiddle.net/6kVD9/](http://jsfiddle.net/6kVD9/)

```
​document.getElementById('btn').onclick = function() {
  var input = document.getElementById('input');
  input.value = parseInt(input.value) - 1;
};​​​​​ 
```

注意：它不是跨浏览器，使用 jQuery 或类似的库来处理 dom。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T05:53:54.323

好吧，既然你指定了 JavaScript，我就不提 HTML5 数字输入了……哎呀。;)

任何人，JavaScript：

```
function counter(id){
input = document.getElemenyById(id); // the id of the element with the decreasing value

input.value = input.value - 1; //or input.value-- I guess
} 
```

在 HTML 中：

```
<input type="text" id="id" value="10" /><!-- Field containing the value that is changed -->
<input type="button" name="counter" onclick="counter('id');" value="Clicky!" /> <!-- Button that changes the value when clicked --> 
```

# c# - 独立存储在逻辑删除时丢失对象属性

> ID：13898968
> 
> 赞同：1
> 
> 时间：2012-12-16T05:46:12.010
> 
> 标签：c#, windows-phone-8, isolatedstorage

我正在尝试编写一个非常简单的待办事项列表应用程序来尝试 WP8 编程，但是我在使用独立存储时遇到了一些问题。

背景：

*   该应用程序目前仅支持一个待办事项列表
*   List itemTo-Do List 是一个 ListItem 类型的对象

我试图做的事情：

*   将 ListItem 对象保存到 IsolatedStorage
*   当用户退出并重新打开应用程序时，应用程序应从独立存储中检索用户的数据。

现在，我能够在应用程序运行时检索正确的数据。当用户退出应用程序并返回时，数据全部消失。有人可以帮我找出问题所在吗？

应用程序的主要代码块：

```
public partial class MainPage : PhoneApplicationPage
{
    // Constructor

    ListItem toDoList1 = new ListItem();

    public MainPage()
    {
        InitializeComponent();

        ToDoList.ItemsSource = toDoList1.getObjList();

        var settings = IsolatedStorageSettings.ApplicationSettings;

        System.Diagnostics.Debug.WriteLine("Loading file... rows: {0}", settings.Count());

        if (settings.Contains("myList"))
        {
            ListItem check;
            settings.TryGetValue<ListItem>("myList", out check);
            System.Diagnostics.Debug.WriteLine("Retrieved number of rows at load: {0}.", check.countRows());

        }
        else
        {
            System.Diagnostics.Debug.WriteLine("File does not exist");

        }

    }

    private void add_Click(object sender, RoutedEventArgs e)
    {
        String myInput = input.Text;

        toDoList1.addItem(myInput);

        input.Text = "";

        save();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        int selected = ToDoList.SelectedIndex;

        toDoList1.removeItem(selected);

        save();

    }

    public void save()
    {
        var settings = IsolatedStorageSettings.ApplicationSettings;
        settings.Remove("myList");
        settings.Add("myList", toDoList1);

        int rows = toDoList1.countRows();
        System.Diagnostics.Debug.WriteLine("Number of rows at save: {0}", rows);

        ListItem check;
        settings.TryGetValue<ListItem>("myList", out check);
        System.Diagnostics.Debug.WriteLine("Retrieved number of rows at save: {0}", check.countRows());

    }

} 
```

列表项类：

```
namespace PhoneApp6
{
public class ListItem
{

    private ObservableCollection<String> objList = new ObservableCollection<String>();

    public ObservableCollection<String> getObjList()
    {
        return objList;
    }

    public void setObjList(ObservableCollection<String> x)
    {
        objList = x;
    }

    public void addItem(String x)
    {
        objList.Add(x);

    }

    public void removeItem(int x)
    {
        objList.RemoveAt(x);
    }

    public int countRows()
    {
        return objList.Count();
    }

}
} 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T06:07:28.597

调用[IsolatedStorageSettings.Save](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.save%28v=vs.95%29.aspx)方法

# html - Groovy Geb 无法捕获下拉列表

> ID：13898973
> 
> 赞同：2
> 
> 时间：2012-12-16T05:46:39.857
> 
> 标签：html, drop-down-menu, groovy, webdriver, geb

```
@Grapes([
    @Grab("org.codehaus.geb:geb-core:0.7.2"),
    @Grab("org.seleniumhq.selenium:selenium-firefox-driver:2.25.0"),
    @Grab("org.seleniumhq.selenium:selenium-support:2.25.0")
])
import geb.Browser
import org.openqa.selenium.firefox.FirefoxDriver

Browser.drive {

  go "http://www.asu.edu/"
  $("li a").each { a ->
     println(a.text())
  }

} 
```

我正在尝试使用该框架`a`从网页中获取所有链接（由标签表示）。`Geb`但我未能在下拉列表中捕获这些链接。以[这个页面](http://www.asu.edu/)为例，我无法在`Colleges & Schools`和下捕获下拉列表`Map & Locations`。在上面代码的输出中，下拉列表中的每一项都是占一行的“空字符串”。输出的开始部分如下：

```
SIGN IN
ASU Home
My ASU
Colleges & Schools

Map & Locations

Contact ASU
Freshman
Transfer
Graduate
International
Military | Veteran
Home-Educated
Online
Prospective Students 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T01:02:45.630

这是因为您只能获取可见元素的文本。这样 text() 只返回对用户可见的文本。

看起来当 :hover 伪类应用于它时，该下拉菜单的样式是打开的。Geb和[moveToElement 操作](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html#moveToElement%28org.openqa.selenium.WebElement%29)中有[拖放支持，](http://www.gebish.org/manual/current/navigator.html#drag_and_drop)您可以使用它来将光标指向元素，但它似乎不起作用 - 我发现一些线程表明 Firefox 驱动程序不能很好地处理它。不幸的是，当前无法使用 jQuery 模拟 :hover，因此您唯一的选择是使用[Geb 的 jQuery 集成](http://www.gebish.org/manual/current/javascript.html#jquery_integration)来手动使元素可见：

```
$('#asu_universal_nav li', 2).find('ul').jquery.show() 
```

之后，调用 text() 时应返回链接中的文本。另一种选择是使下拉菜单不仅在 :hover 时可见，而且在应用类并在 mouseenter/mouseleave 处理程序中添加/删除该类时也可见。但这只有在您可以修改为您正在自动化/测试的页面提供服务的应用程序时才有可能。

# html - 跨度浮动在Safari中不起作用？

> ID：13898980
> 
> 赞同：1
> 
> 时间：2012-12-16T05:47:32.027
> 
> 标签：html, css, safari, css-float

我创建了这个倒计时（[这里的代码](http://jsfiddle.net/yentup/cQXx3/)），由于某种原因，这些数字在 Safari 中似乎是向下的，而不是从左到右。

跨度不是太宽或任何东西，（`width: 150px;`）所以我不知道为什么会这样。

有谁知道是什么原因造成的或如何解决？

我已经在 Chrome 和 Firefox 中测试过，效果很好，但我不知道 IE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T05:52:57.533

只需`display: table;`从中删除`.nums`_`display: table-cell;``.nums span`

[**演示**](http://jsfiddle.net/cQXx3/1/)

CSS

```
@font-face {
    font-family: 'Quicksand Book';
    src: url('http://donutdev.com/fonts/Quicksand_Book.otf');
}

#headr {
    font-family: 'Trebuchet MS', sans-serif;
    font-size: 50px;
}

#countdown {
    width: 600px;
    height: 166px;
    background-color: #212121;
    border-radius: 7px;
    display: none;
}

.nums {
    float: left;
    width: 150px;
    padding-top: 20px;
    height: 90px;
    text-align: center;
    font-family: 'Quicksand Book', sans-serif;
    font-size: 50px;
}

.nums span {
    vertical-align: middle;
    color: #dcdcdc;
}

.text {
    float: left;
    width: 150px;
    padding-bottom: 20px;
    text-align: center;
    font-family: 'Verdana', sans-serif;
    font-size: 25px;
    color: #dcdcdc;
} 
```

# java - 为什么从spring-data-jpa保存返回的实体中没有设置ID

> ID：13898982
> 
> 赞同：13
> 
> 时间：2012-12-16T05:47:44.077
> 
> 标签：java, spring-data, spring-data-jpa

我有一个简单的实体。我正在使用 spring-data-jpa 版本 1.2.0.RELEASE 和 eclipselink 2.4.1。

```
@Entity
@Table(name="platform")
public class Platform {

    @Id
    @Column(name="id", nullable=false, updatable=false, insertable=true)
    private Long id;
    // etc.
} 
```

我想保存它。我的存储库看起来像

```
public interface PlatformRepository extends JpaRepository<Platform, Long> {

    Platform findByName( String name );
} 
```

我的控制器使用这种方法非常简单

```
@RequestMapping(method=RequestMethod.POST, produces="application/json")
public Platform post( Platform platform ) {
    Platform result = platformDao.saveAndFlush(platform);
    return result;
} 
```

该方法的响应是

```
{"platform":{"id":null,"name":"Test1"}} 
```

Select * from platform 显示 Test1 的 ID 为 6。该表定义为：

```
create table platform(
id int not null auto_increment primary key,
name varchar(128) not null); 
```

我希望在保存后设置 ID，但事实并非如此。他们不希望我在写完实体后立即进行查找，对吧？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T09:10:02.883

您尚未指定 ID 是由映射中的数据库自动生成的。添加

```
@GeneratedValue(strategy = GenerationType.IDENTITY) 
```

到您的 ID 字段。没有它，JPA 不知道它必须在插入后执行 select 语句才能从数据库中获取生成的 ID。

# javascript - 让 RequireJS 异步插件与 almond.js 一起工作

> ID：13898984
> 
> 赞同：9
> 
> 时间：2012-12-16T05:48:29.703
> 
> 标签：javascript, google-maps, requirejs, almond

我阅读了以下[有关](http://blog.millermedeiros.com/requirejs-2-0-delayed-module-evaluation-and-google-maps/)如何获取 Google 地图以及[`gmaps.js`](http://hpneo.github.com/gmaps/)使用 RequireJS 的文章。然而，当我构建我的项目时，RequireJS 被替换为 Almond。在上面的文章中，它指出 Almond 不能与 RequireJS 异步插件一起使用。如果没有 async 插件，Google 的依赖项就不会被加载，并且会`gmaps.js`抛出错误。

有没有办法解决这个问题，并且仍然在使用 Almond 而不是 RequireJS 的项目中加载谷歌地图代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T15:18:09.980

是的，我也在找这个。它说动态库无法加载。我想你必须在本地下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T18:24:48.280

[Almond.js 无法处理异步插件](http://blog.millermedeiros.com/requirejs-2-0-delayed-module-evaluation-and-google-maps)。您可以使用 jQuery.Deferred 来加载库。

```
var googleMapsLoader = function(func, options) {
    var defaults = { 
        "sensor"   : "false", 
        "v"        : "3", 
        "key"      : "", 
        "language" : "pt", 
        "region"   : "br",
        "libraries": ""
     };

     $.when($.ajax({
         type: "GET",
         dataType: "script",
         data: $.extend({}, defaults, options),
         url: "https://maps.google.com/maps/api/js",
         crossDomain: true
     })).then(function() {
         func();
     });
};

/*
 * Loading Google Maps API with $.Deferred.
 */
googleMapsLoader(function() {
    // You may call your code here.
}, {
    "libraries" : "geometry,places",
    "v"         : "3.7"
}); 
```

看看[这个](http://jsfiddle.net/edson_araujo_soares/mhx1cr1r/)使用 $.Deferred 和 Maplace 的例子。

# c++ - 为什么编译超过 100,000 行的 std::vector::push_back 需要很长时间？

> ID：13898985
> 
> 赞同：19
> 
> 时间：2012-12-16T05:48:48.803
> 
> 标签：c++, gcc, compilation, stdvector

我正在编译一个 C++ 库，它定义了一个从一组数据点中随机采样的函数。数据点存储在`std::vector`. 有 126,272 个`std::vector`push_back 语句，其中所讨论的向量的类型为`double`. 编译需要很长时间。

为什么这需要这么长时间？（除了 push_back 语句之外的所有代码`std::vector`都需要不到 1 秒的时间来编译，因为几乎没有其他代码。）

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-25T22:19:53.120

gcc 中有一个`-ftime-report`选项可以打印每个编译器阶段浪费的时间的详细报告。

我使用 ubuntu 12.04 64-bit 和 gcc 4.6.3 和这段代码来重现你的情况：

```
#include <vector>
using namespace std;

int main()
{
  vector<double> d;

 d.push_back(5.7862517058766);
/* ... N lines generated with 
  perl -e 'print(" d.push_back(",rand(10),");\n") for 1..100000'
*/
 d.push_back(3.77195464257674);

  return d.size();
} 
```

有`-ftime-report`各种 N 的输出（`wall`由于 PC 上的背景负载，时间不准确，所以请看`user time`, `usr`）：

N=10000

```
$ g++ -ftime-report ./pb10k.cpp

Execution times (seconds)
...
 expand vars           :   1.48 (47%) usr   0.01 ( 7%) sys   1.49 (44%) wall    1542 kB ( 2%) ggc
 expand                :   0.11 ( 3%) usr   0.01 ( 7%) sys   0.10 ( 3%) wall   19187 kB (30%) ggc
...
 TOTAL                 :   3.18             0.15             3.35              64458 kB 
```

N=100000

```
$ g++ -ftime-report ./pb100k.cpp

Execution times (seconds)
....
 preprocessing         :   0.49 ( 0%) usr   0.28 ( 5%) sys   0.59 ( 0%) wall    6409 kB ( 1%) ggc
 parser                :   0.96 ( 0%) usr   0.39 ( 6%) sys   1.41 ( 0%) wall  108217 kB (18%) ggc
 name lookup           :   0.06 ( 0%) usr   0.07 ( 1%) sys   0.24 ( 0%) wall    1023 kB ( 0%) ggc
 inline heuristics     :   0.13 ( 0%) usr   0.00 ( 0%) sys   0.20 ( 0%) wall       0 kB ( 0%) ggc
 integration           :   0.03 ( 0%) usr   0.00 ( 0%) sys   0.04 ( 0%) wall    4095 kB ( 1%) ggc
 tree gimplify         :   0.22 ( 0%) usr   0.00 ( 0%) sys   0.23 ( 0%) wall   36068 kB ( 6%) ggc
 tree eh               :   0.06 ( 0%) usr   0.00 ( 0%) sys   0.14 ( 0%) wall    5678 kB ( 1%) ggc
 tree CFG construction :   0.08 ( 0%) usr   0.01 ( 0%) sys   0.10 ( 0%) wall   38544 kB ( 7%) ggc
....
 expand vars           : 715.98 (97%) usr   1.62 (27%) sys 718.32 (83%) wall   18359 kB ( 3%) ggc
 expand                :   1.04 ( 0%) usr   0.09 ( 1%) sys   1.64 ( 0%) wall  190836 kB (33%) ggc
 post expand cleanups  :   0.09 ( 0%) usr   0.01 ( 0%) sys   0.15 ( 0%) wall      43 kB ( 0%) ggc
....
 rest of compilation   :   1.94 ( 0%) usr   2.56 (43%) sys 102.42 (12%) wall   63620 kB (11%) ggc
 TOTAL                 : 739.68             6.01           866.46             586293 kB 
```

因此，在“**扩展变量**”阶段对于巨大的 N 有一些额外的工作。这个阶段正好在这一行：[cfgexpand.c:4463](http://code.metager.de/source/xref/DragonFly-BSD/contrib/gcc-4.7/gcc/cfgexpand.c#4463)（在 TV_VAR_EXPAND 宏之间）。

有趣的事实：我的自定义编译 32 位 g++ 4.6.2 的编译时间非常短（对于 N = 100000，大约 20 秒）。

我的 g++ 和 ubuntu g++ 有什么区别？一个是[默认打开](https://wiki.ubuntu.com/ToolChain/CompilerFlags)Ubuntu 中的 Gcc 堆栈保护（`-fstack-protect`选项）。并且此保护仅添加到“扩展变量”阶段（在源代码[cfgexpand.c:1644,expand_used_vars()中找到；](http://code.metager.de/source/xref/DragonFly-BSD/contrib/gcc-4.7/gcc/cfgexpand.c#1644)[此处](http://en.wikibooks.org/wiki/GNU_C_Compiler_Internals/Stackguard_4_1)提到）：

N = 100000，使用选项禁用堆栈保护器**`-fno-stack-protector`**（将其用于您的代码）：

```
$ g++ -ftime-report -fno-stack-protector pb100k.cpp 2>&1 |egrep 'TOTAL|expand vars'
 expand vars           :   0.08 ( 0%) usr   0.01 ( 1%) sys   0.09 ( 0%) wall   18359 kB ( 3%) ggc
 TOTAL                 :  23.05             1.48            24.60             586293 kB 
```

运行时间为 24 秒，低于 800 秒。

更新：

在内部启动 gcc 后`callgrind`（Valgrind 的调用图分析工具），我可以说有 N 个堆栈变量。如果启用了堆栈保护器，它们将在“扩展变量”阶段使用三个 O(N^2) 算法进行处理。实际上有 N^2 成功的冲突检测和 1,5 * N^2 位操作以及一些嵌套循环逻辑。

为什么堆栈变量的数量如此之多？因为代码中的每个双精度常量都保存到堆栈中的不同位置。然后它从它的插槽加载并按照调用约定传递（通过 x86 中的堆栈顶部；通过 x86_64 中的寄存器）。有趣的事实：所有带有 s 的代码都是用s或 with`push_back`编译的；常量的堆栈布局也是一样的。只有非 push_back 代码的一些堆栈布局偏移受到影响（使用和检查两次运行）。启用的堆栈保护器没有创建其他代码。`-fstack-protector``-fno-stack-protector``-S``diff -u`

启用堆栈保护器会致命地改变编译器内部的某些行为。不能确切地说出在哪里（注意：通过将堆栈跟踪与Juan M. Bello Rivas的[callgraph.tar.gz](https://stackoverflow.com/a/1980770/196561)进行比较可以找到这个转折点）。

第一个大 N*(N+1)/2 = O(N^2) walk 在`expand_used_vars_for_block (tree block, level)`函数中设置有关堆栈变量对之间冲突的信息：

```
 /* Since we do not track exact variable lifetimes (which is not even
     possible for variables whose address escapes), we mirror the block
     tree in the interference graph.  Here we cause all variables at this
     level, and all sublevels, to conflict.  */
  if (old_sv_num < this_sv_num)
    {
      new_sv_num = stack_vars_num;

      for (i = old_sv_num; i < new_sv_num; ++i)
        for (j = i < this_sv_num ? i : this_sv_num; j-- > old_sv_num ;)
          add_stack_var_conflict (i, j);
    }
} 
```

`add_stack_var_conflict(i,j)`转向_

*   分配（每个变量一次）大小为...的位图哦，动态大小将增长到 N 位
*   在第 i 个 var 的位掩码中设置一个位以与 j 发生冲突
*   在第 j 个 var 的位掩码中设置一个位以与 i 发生冲突

有第二个 N^2 步入`add_alias_set_conflicts`。它对每一对使用`objects_must_conflict_p`. 它检查两个变量是否属于同一类型（大多数对是；这是基于类型的别名分析，[TBAA](http://en.wikipedia.org/wiki/Alias_analysis#Type-based_alias_analysis)）。如果没有，`add_stack_var_conflict`则调用；这个 N^2 循环嵌套只有 N 个这样的调用。

最后一个巨大的步行`partition_stack_vars()`功能与`qsort`堆栈变量（ O(NlogN) ）和 N*(N-1)/2 = O(N^2) 步行一起寻找所有不冲突的对。这是`partition_stack_vars`来自 cfgexpand.c 文件的伪代码：

```
 Sort the objects by size.
        For each object A {
          S = size(A)
          O = 0
          loop {
            Look for the largest non-conflicting object B with size <= S.
                   /* There is a call to stack_var_conflict_p to check for 
                    * conflict between 2 vars */
            UNION (A, B)
            offset(B) = O
            O += size(B)
            S -= size(B)
          }
        } 
```

函数`stack_var_conflict_p`只是检查某个第 i 个变量中是否存在冲突位掩码，以及是否有第 j 个位设置为与第 j 个变量的冲突标志（调用`bitmap_bit_p(i->conflict_mask,j)`）。这里真正的坏消息是， callgrind 表示每次冲突检查都是成功的，并且每对都跳过 UNION 逻辑。

因此，O(N^2) 位集和 O(N^2/2) 位检查浪费了大量时间；所有这些工作都无助于优化任何东西。是的，这一切`-O0`都是 `-fstack-protector`.

更新2：

似乎，转折点是`expand_one_var` [cfgexpand.c 来自 4.6](http://gcc.gnu.org/viewcvs/gcc/branches/gcc-4_6-branch/gcc/cfgexpand.c?revision=175029&view=markup)，在检查堆栈上变量的立即或延迟分配：

```
1110      else if (defer_stack_allocation (var, toplevel))
1111        add_stack_var (origvar);
1112      else
1113        {
1114          if (really_expand)
1115            expand_one_stack_var (origvar);
1116          return tree_low_cst (DECL_SIZE_UNIT (var), 1);
1117        } 
```

（根据 callgrind，expand_one_stack_var 仅在快速变体中被调用）

启用延迟分配时会强制执行`-fstack-protect`（有时需要重新排序所有堆栈变量）。甚至还有一个关于一些“二次问题”的评论，这对我们来说现在看起来太熟悉了：

```
969 /* A subroutine of expand_one_var.  VAR is a variable that will be
970    allocated to the local stack frame.  Return true if we wish to
971    add VAR to STACK_VARS so that it will be coalesced with other
972    variables.  Return false to allocate VAR immediately.
973 
974    This function is used to reduce the number of variables considered
975    for coalescing, which reduces the size of the quadratic problem.  */
976 
977 static bool
978 defer_stack_allocation (tree var, bool toplevel)
979 {
980   /* If stack protection is enabled, *all* stack variables must be deferred,
981      so that we can re-order the strings to the top of the frame.  */
982   if (flag_stack_protect)
983     return true; 
```

（堆栈分配也被推迟了`-O2`）

这是一个提交：[http](http://gcc.gnu.org/ml/gcc-patches/2005-05/txt00029.txt) ://gcc.gnu.org/ml/gcc-patches/2005-05/txt00029.txt添加了这个逻辑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T00:17:43.477

osgx 的出色回答完全回答了这个问题。

也许还有一个方面：`push_back()`vs 初始​​化列表

当使用 100000 push_backs 运行上述测试时，我在 Debian 6.0.6 系统上使用 gcc 4.4.6 得到以下结果：

```
$ time g++ -std=c++0x -ftime-report ./pb100k.cc 

Execution times (seconds)
 garbage collection    :   0.55 ( 1%) usr   0.00 ( 0%) sys   0.55 ( 1%) wall       0 kB ( 0%) ggc
 ...
 reload                :  33.95 (58%) usr   0.13 ( 6%) sys  34.14 (56%) wall   65723 kB ( 9%) ggc
 thread pro- & epilogue:   0.66 ( 1%) usr   0.00 ( 0%) sys   0.66 ( 1%) wall      84 kB ( 0%) ggc
 final                 :   1.82 ( 3%) usr   0.01 ( 0%) sys   1.81 ( 3%) wall      21 kB ( 0%) ggc
 TOTAL                 :  58.65             2.13            60.92             737584 kB

real    1m2.804s
user    1m0.348s
sys     0m2.328s 
```

使用初始化列表时，速度**要**快得多：

```
$ cat pbi100k.cc
#include <vector>
using namespace std;

int main()
{
   vector<double> d {
   0.190987822870774,
   /* 100000 lines with doubles generated with:
          perl -e 'print(rand(10),",\n") for 1..100000'
   */
   7.45608614801021};

  return d.size();
}

$ time g++ -std=c++0x -ftime-report ./pbi100k.cc 

Execution times (seconds)
 callgraph construction:   0.02 ( 2%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall      25 kB ( 0%) ggc
 preprocessing         :   0.72 (59%) usr   0.06 (25%) sys   0.80 (54%) wall    8004 kB (12%) ggc
 parser                :   0.24 (20%) usr   0.12 (50%) sys   0.36 (24%) wall   43185 kB (65%) ggc
 name lookup           :   0.01 ( 1%) usr   0.05 (21%) sys   0.03 ( 2%) wall    1447 kB ( 2%) ggc
 tree gimplify         :   0.01 ( 1%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall     277 kB ( 0%) ggc
 tree find ref. vars   :   0.01 ( 1%) usr   0.00 ( 0%) sys   0.01 ( 1%) wall      15 kB ( 0%) ggc
 varconst              :   0.19 (15%) usr   0.01 ( 4%) sys   0.20 (14%) wall   11288 kB (17%) ggc
 integrated RA         :   0.02 ( 2%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall      74 kB ( 0%) ggc
 reload                :   0.01 ( 1%) usr   0.00 ( 0%) sys   0.01 ( 1%) wall      61 kB ( 0%) ggc
 TOTAL                 :   1.23             0.24             1.48              66378 kB

real    0m1.701s
user    0m1.416s
sys     0m0.276s 
```

这大约快 30 倍以上！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T22:41:30.430

我相信很长一段时间都与向量作为模板有关。`push_back`编译器需要用相应的函数重写每一次出现。这就像有许多重载的函数，编译需要进行名称修改来处理正确的函数。与简单地编译非重载函数相比，这是一项额外的工作。

# c# - 调用另一个类中的控件

> ID：13898989
> 
> 赞同：0
> 
> 时间：2012-12-16T05:49:03.213
> 
> 标签：c#, winforms

我正在尝试使用另一个类向 Form1 的列表框中添加一些内容。我怎么做？

这是我当前的代码：

Form1.cs

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public void writeTest(string items)
    {
        this.listBox1.Items.Add(items);
    }
} 
```

测试.cs

```
class Test
{
    Form1 frm1 = new Form1();

    public void test()
    {
        frm1.writeTest("Hello");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:55:15.250

这是策略模式版本的示例。这里我们使用调解器，它控制列表框的加载。

```
public partial class Form1 : Form
{
    private IMediator _mediator; // any class deriving from IMediator 

    public Form1(IMediator mediator)
    {
        InitializeComponent();
        _mediator = mediator;
        LoadList();
    }

    private void LoadList()
    {
        // in strategy you might supply different mediators, each may load listbox with different type of items. You pass reference to your control. Load logic is totally up to the external class, such as mediator.
        _mediator.LoadList(this.listBox1);
    }
 } 
```

这是在模式中使用不同类加载控件的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:55:34.520

“测试”类从何而来？我假设它是在 Form1 中创建的。您可以在创建时将 Form1 的引用传递给 Test。例如：

```
public Form1() {
  test = new Test(this);
}

class Test {
  private Form1 form;
  public Test(Form1 f) {
    form = f;
  }
  ... 
```

然后，您可以从 Test 中访问该表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T06:08:16.827

您的示例导致非常高的耦合。这是你不想要的。您可以使用多种技术。首先，您可以查看 SOLID 原则（如果您还没有这样做）：[http ://en.wikipedia.org/wiki/SOLID_%28object-orientated_design%29](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)

特别是**D**部分（依赖倒置）。因此，在您的示例中，您可以`IAddTestItem`使用名为`AddTestItem`. 然而，这可能仍然不理想。

我怀疑您会通过使用某种消息传递机制（观察者模式）获得更多收益。所以你可以有一些共享（注入）的实例`MessageBus`。您的表单和您的类都可以使用依赖注入之类的方式接收相同的实例（但可以使用其他机制）。然后，您的班级可以发布一些消息，例如`AddTestItem`（更多是命令），或者即使`TestItemAdded`只是通知任何侦听器事件已经发生，并且他们可以自由地使用他们认为合适的数据：例如添加到列表框。

但是如果你不以某种方式解耦你的代码，你肯定会遇到维护问题。

# ruby-on-rails - 使用 Devise 时如何在更新前添加事务？

> ID：13898991
> 
> 赞同：0
> 
> 时间：2012-12-16T05:49:13.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我将 act_as_taggable_on 与设计一起使用。
每个用户可以在他们的个人资料编辑页面上最多设置 3 个标签。
在它保存之前，我想在下面进行这样的交易。这是我为我的社区模型实现的，它是由脚手架制作的。

```
params[:community][:tag_list] = params[:community][:tag_list].gsub(/[ ]+/," ")
params[:community][:tag_list] = params[:community][:tag_list].gsub(/[.]+/,",") 
```

我不知道何时使用 Devise 进行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:12:08.330

将代码移至模型以处理此功能。

```
alias_method :super_tag_list=, :tag_list=
def tag_list=(tag_names)
  self.super_tag_list = tag_names.gsub(/[ ]+/," ").gsub(/[.]+/,",")
end 
```

# c# - C# ASP.NET 中的动态业务对象

> ID：13898993
> 
> 赞同：2
> 
> 时间：2012-12-16T05:50:06.260
> 
> 标签：c#, sql-server-2008

我有 ac# 应用程序，我正在将存储过程结果的各个列读取到输出类对象中。但是，如果存储过程中的列数发生变化，我必须重写数据访问层代码。

有什么方法可以改变输出存储过程中的列数不会让我改变数据访问层中的代码？我是初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:57:45.767

有 ORM 工具可以自动为你生成数据访问层代码。对于 .NET，有实体框架。

[http://msdn.microsoft.com/en-us/data/ef.aspx](http://msdn.microsoft.com/en-us/data/ef.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T05:39:55.830

我个人认为，EF 中的 Data-First 模型可能适用于这种情况。还在 c# 4.5 中通过 ExpandoObjects。也许这也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T06:11:19.170

如果您要更改返回数据的结构并且您依赖该结构，无论您是自己进行映射、使用 ORM 还是依赖简单`DataTable`的容器，它总是会导致代码更改。

# javascript - 用锚改变内容

> ID：13898997
> 
> 赞同：0
> 
> 时间：2012-12-16T05:51:06.520
> 
> 标签：javascript, html, anchor

是否有任何简单的方法可以在单击时让锚点更改页面内容？单击链接时，我最好的选择是用 JS 设置内容 div 吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T06:03:57.660

每个现代浏览器 (IE8+) 都支持 hashchange 事件，您可以让链接更改锚点并且 hashchange 事件处理程序更新内容。

HTML：

```
<a href="#newcontent">change content</a> 
```

Javascript：

```
 $(window).bind( 'hashchange', function(e) {
        if (location.hash == "#newcontent")
        {
            ...
        }
    }); 
```

如果您希望在单个页面上创建一个完整的 web 应用程序，并根据哈希值更改内容，那么有一些框架可以帮助您解决这个问题 - AngularJS、Backbone.js 等。

# jquery - 无法从一个特定方向旋转到另一个方向

> ID：13898998
> 
> 赞同：4
> 
> 时间：2012-12-16T05:51:20.937
> 
> 标签：jquery, css, webkit, rotation, css-transforms

我的示例是使用 CSS3 转换和过渡的旋转动画立方体。

问题是似乎没有可能从**[这个 jsfiddle](http://jsfiddle.net/rDky9/9/)**中的起始位置开始**CSS3 旋转**以显示“4”面（向左旋转一圈）。

**JSFiddle 的基本说明：** 'x' 键使用 CSS3 设置立方体样式`rotateX:90deg`，'y' 用于 rotateY，'z' 用于 rotateZ。单击“重置”按钮返回到起始位置。**注意***无论何种旋转（x、y 或 z），我都无法让立方体**向左旋转**一个位置。

我正在使用 CSS3 rotate3d 属性`rotateX`，`rotateY`以及影响属性`rotateZ`的 CSS3 。`transition``transform`

此外，值得一提的是，使用 rotateX/Y/Z 属性允许立方体在几乎所有其他位置/方向上向上、向左、向右或向下旋转。

**问题：**

这里有什么问题？这种轮换是不可能的吗？CSS3 旋转有问题，还是我的代码/逻辑有问题？

最好的答案是解释 CSS3 rotate3d 转换是如何工作的（在幕后；数学上）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T06:27:09.417

这里发生的变换是复合变换（变换矩阵经历矩阵连接）。例如，当您围绕其 x 轴旋转元素时，其他轴将旋转 90 度，因此围绕 y 轴的旋转不再具有最初的从右到左的效果。相反，它现在的行为就像一个倒置的 z 轴。考虑下图：

![在此处输入图像描述](../Images/ff775211a8bbf9634752de07ae27d865.png)

问题背后的数学是这样的：当你对一个点应用多个变换时，它们的所有变换矩阵都与点本身相乘，按照应用的顺序从左到右。例如，让我们说绕 x 旋转 90 度的矩阵是 R [x]，绕 y 旋转 90 度的矩阵是 R [y]，绕 z 旋转 90 度的矩阵是 R [z]。

假设我们按`z`了两次和`x`一次。现在，对于元素中的任何点 P，其新位置 P ^'将计算为：

> *P ^' = [Rz] ^。[Rz] ^。 _ R [x] ^。磷*

不幸的是，这样做的问题是每个后续转换都将应用于上次计算产生的参考系。所以在这种情况下，当我们围绕它旋转时，x 轴将指向完全相反的方向。

这个问题的解决方案（我不会讨论的数学问题）是将矩阵**以相反的顺序**相乘。如果这样做，每个连续的变换都将相对于固定轴，而不是相对于前一次变换离开轴的任何状态。所以我们的计算将如下所示：

> *P ^' = R [x] ^。[Rz] ^。 _ [Rz] ^。 _ 磷*

在摆弄`WebKitCSSMatrix`了一下之后，我设法提出了以下解决方案：

```
// Make a matrix out of the transformation currently in effect
var oldMatrix = new WebKitCSSMatrix(cube[0].style.webkitTransform);

//Make a matrix that applies the new rotation
var extraRotate = (new WebKitCSSMatrix()).rotate(anglex, angley, anglez);

//Multiply them (with the new one on the left)
var final = extraRotate.multiply(oldMatrix);

//I need to extract the elements of the final matrix into an array. 
//They are stored like this: 1st row 1st column in key m11, 2nd row
//1st column in key m12, etc.
var finalstring = [];
for (var i = 1; i < 5; i++) {
    for (var j = 1; j < 5; j++) {
        finalstring.push(Math.round(final['m' + i + j]));
    }
}

//Make a new style rule out of our final matrix and apply it to the element
cube[0].style.webkitTransform = 'matrix3d(' + finalstring.join(',') + ')'; 
```

通过将现有变换矩阵与所需的额外旋转**预**乘，这设法解决了旋转参考系的问题。请注意我如何首先计算`extraRotate`矩阵，*然后*将其与现有转换相乘，有效地将矩阵以相反的应用顺序相乘：

> *P ^' = R[新] ^。[旧] ^。 _ 磷*

这会计算相对于世界坐标的新点向量，而不是相对于变换后的坐标。

作为奖励，这也消除了对全局变量的需要，因为元素的当前变换矩阵是我们需要的唯一信息。

# TL;博士

**我在下面包含了一个更新的小提琴。按下`y`可将您的立方体向右旋转 90 度。**

这是一个演示：http: [//jsfiddle.net/guruB/](http://jsfiddle.net/guruB/)

`z`（和以前一样，使用`x`和`y`围绕相应的轴旋转）

注意：您可以在此处了解如何计算旋转矩阵[。](http://en.wikipedia.org/wiki/Rotation_matrix#Basic_rotations)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T06:12:57.877

看看这个[演示](http://desandro.github.com/3dtransforms/examples/cube-02-show-sides.html)

它使用此代码向左旋转：

```
#cube.show-left {
      -webkit-transform: translateZ( -100px ) rotateY(   90deg );
         -moz-transform: translateZ( -100px ) rotateY(   90deg );
           -o-transform: translateZ( -100px ) rotateY(   90deg );
              transform: translateZ( -100px ) rotateY(   90deg ); 
```