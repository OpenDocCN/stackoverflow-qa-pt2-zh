# StackOverflow 问答 12755000-12755999

# ssl - SSL 是如何真正加密信息的？

> ID：12755001
> 
> 赞同：8
> 
> 时间：2012-10-05T22:46:52.660
> 
> 标签：ssl, https

我最近刚刚在我网站的帐户创建页面上设置了 SSL。我希望将其进一步扩展到我的整个网站。

不过，我有一个问题。SSL 加密如何实际工作并保护传输中的数据？此外，黑客通常可以使用哪些方法来拦截通过 HTTP 以纯文本形式发送的数据？我知道有“嗅探”，但这始终是唯一给出的方法，从来没有任何详细说明。有没有办法检查通过 HTTP 和 HTTPS 发送的数据？比较和对比？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T23:08:49.457

HTTP 没有以任何方式加密。任何可以嗅探 HTTP 客户端和服务器之间的数据包的网络嗅探器（大多数网络适配器为此目的支持混杂模式）都可以查看 HTTP 数据。

另一方面，HTTPS 数据是使用 SSL/TLS 加密的 HTTP 数据。SSL/TLS 在出站数据到达网络之前对其进行加密，在入站数据离开网络后对其进行解密。网络上没有纯文本，因此数据包是否被第三方嗅探并不重要。如果没有加密密钥，嗅探到的数据就是垃圾。在 SSL/TLS 握手期间，客户端和服务器在交换任何应用程序数据之前相互协商加密密钥、证书等。发送到服务器的数据使用服务器的密钥进行加密，发送到客户端的数据使用客户端的密钥进行加密。这保证了客户端发送的加密数据只能被服务器解密，反之亦然。

从 SSL/TLS 加密连接中拦截和提取纯文本的唯一方法是使用中间人攻击。这意味着 SSL 客户端连接到 MITM，然后 MITM 连接到 SSL 服务器，并在它们之间来回传输数据。MITM 需要访问客户端或服务器正在运行的网络，并且必须能够将客户端的连接重新路由到它自己而不是服务器。但如果它能做到这一点，MITM 就可以与双方协商其自己的 SSL/TLS 连接，因此它拥有所有必要的加密信息。然后，它可以使用它与 SSL 客户端协商的加密密钥接收和解密 SSL 客户端发送的数据，然后使用它与 SSL 服务器协商的加密密钥重新加密并将该数据传递给 SSL 服务器。反之亦然。SSL 客户端和 SSL 服务器将不知道他们正在与 MITM 交谈而不是彼此交谈，除非您使用证书以便 SSL 客户端和 SSL 服务器可以在初始握手期间验证彼此的身份。SSL/TLS 不需要证书，但如果您拥有它们，它们就可以很好地使用。

# git - git远程推送是如何工作的？

> ID：12755002
> 
> 赞同：2
> 
> 时间：2012-10-05T22:46:55.877
> 
> 标签：git, github

git 远程推送功能是如何工作的？我正在尝试复制 github 的 ssh 推送风格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:40:08.597

GitHub 允许注册 ssh 密钥，并允许使用 ssh 类型的 url：

```
git@github.com:user/repo.git 
```

如果您希望自己的服务器遵循这一点，则需要：

*   一个 ssh 守护进程正在运行，它的路径中有 git。
*   `authorized_keys`在 git admin 帐户（例如 'git'）文件中注册您的公钥（请参阅“ [Git book](http://git-scm.com/book/en/Git-on-the-Server-Getting-Git-on-a-Server) ”）：注意[权限问题](https://stackoverflow.com/questions/3712443/creating-ssh-keys-for-gerrit-and-hudson/3712619#3712619)。
*   [在配置文件](https://stackoverflow.com/questions/12668278/mercurial-and-git-custom-ssh-key-location/12668477#12668477)中在客户端声明您的私钥。

然后，您将能够使用 uri 克隆/推送/拉取您的远程仓库`yourserver:yourRepo`（这将引用`yourServer`您的配置文件的“”条目）

正如[Will Palmer](https://stackoverflow.com/users/1664755/will-palmer) [所说](https://stackoverflow.com/questions/12755002/how-does-git-remote-pushing-work/12757814#comment17238374_12757814)，您可以在 git 安装中添加一个名为**[gitolite的](https://github.com/sitaramc/gitolite)****[授权](http://sitaramc.github.com/gitolite/auth.html)**框架。查看[安装页面](http://sitaramc.github.com/gitolite/install.html)，或者我[自己的安装脚本本地安装](https://github.com/VonC/compileEverything/blob/master/gitolite/install_or_update_gitolite.sh)（与''帐户在同一帐户中）`git`

# mysql - 创建一个过程 MySQL

> ID：12755003
> 
> 赞同：13
> 
> 时间：2012-10-05T22:47:02.173
> 
> 标签：mysql

我试图将一个过程从使用 sql plus 转换为 mysql，但在第三行出现语法错误，它显示 (W_IN IN NUMBER) 并且它突出显示为语法错误。

SQL加：

```
CREATE OR REPLACE PROCEDURE PRC_CUS_BALANCE_UPDATE (W_IN IN NUMBER) AS
W_CUS NUMBER := 0;
W_TOT NUMBER := 0;
BEGIN
-- GET THE CUS_CODE
SELECT CUS_CODE INTO W_CUS 
FROM INVOICE
WHERE INVOICE.INV_NUMBER = W_IN;

-- UPDATES CUSTOMER IF W_CUS > 0
IF W_CUS > 0 THEN
    UPDATE CUSTOMER
    SET CUS_BALANCE = CUS_BALANCE + 
                (SELECT INV_TOTAL FROM INVOICE WHERE INV_NUMBER = W_IN)
    WHERE CUS_CODE = W_CUS;
END IF;
END; 
```

mysql:

```
-- Trigger DDL Statements
DELIMITER $$

CREATE PROCEDURE prc_cus_balance_update (W_IN IN NUMBER) 
AS
W_CUS NUMBER = 0;
W_TOT NUMBER = 0;
BEGIN
-- GET CUS_CODE
SELECT CUS_CODE INTO W_CUS 
FROM INVOICE
WHERE INVOICE.INV_NUMBER = W_IN;

-- UPDATES CUSTOMER IF W_CUS > 0
IF W_CUS > 0 THEN
    UPDATE CUSTOMER
    SET CUS_BALANCE = CUS_BALANCE + 
                (SELECT INV_TOTAL FROM INVOICE WHERE INV_NUMBER = W_IN)
    WHERE CUS_CODE = W_CUS;
END IF;
END $$

DELIMITER ; 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-05T23:48:17.237

这在 MySQL 5.5.23 中编译：

```
-- Trigger DDL Statements
DELIMITER $$

DROP PROCEDURE IF EXISTS prc_cus_balance_update;

CREATE PROCEDURE prc_cus_balance_update (IN W_IN INT UNSIGNED) 
BEGIN
DECLARE W_CUS INT UNSIGNED DEFAULT 0;
DECLARE W_TOT DOUBLE DEFAULT 0; -- NOT USED?
-- GET CUS_CODE
SELECT CUS_CODE INTO W_CUS 
FROM INVOICE
WHERE INVOICE.INV_NUMBER = W_IN;

-- UPDATES CUSTOMER IF W_CUS > 0
IF W_CUS > 0 THEN
    UPDATE CUSTOMER
    SET CUS_BALANCE = CUS_BALANCE + 
                (SELECT INV_TOTAL FROM INVOICE WHERE INV_NUMBER = W_IN)
    WHERE CUS_CODE = W_CUS;
END IF;
END $$

DELIMITER ; 
```

当然，在这种情况下，不需要存储过程，因为以下查询将更快地执行相同的功能（并且更容易理解）：

```
UPDATE 
    CUSTOMER c
INNER JOIN
    INVOICE i ON i.CUS_CODE = c.CUS_CODE
SET 
    c.CUS_BALANCE = c.CUS_BALANCE + i.INV_TOTAL 
WHERE 
    i.INV_NUMBER = W_IN 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T23:04:18.067

医生似乎说

```
 [ IN | OUT | INOUT ] param_name type 
```

# asp.net-mvc - 在 Asp.Net MVC3 中创建外部链接

> ID：12755004
> 
> 赞同：0
> 
> 时间：2012-10-05T22:47:08.633
> 
> 标签：asp.net-mvc, url

我知道有很多实用程序和帮助程序类/方法可用于从内部路由和控制器生成 URL 和链接。但是您将如何处理 MVC 3 中的以下问题？

在剃刀文件中，有人定义了这个：

```
<a href="http://@Model.Details.ExternalURL" target="_blank">Website</a> 
```

`ExternalURL`在这种情况下，将保存类似的值`www.yoursite.com`，没有任何前缀。一开始就硬编码`http://`是一个明显的禁忌，但如何最好地处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:56:25.203

在您的情况下硬编码 http:// 并不是那么糟糕，但是如果您想避免它，我看到的选项很少，但也许最正确的方法是使用属性 @Model.Details.ExternalUrlLink 或类似的东西扩展您的模型。在 getter 中，您可以对原始值执行任何您想要的逻辑，例如连接 http:// 前缀（如果未显示）

# linux - cronjob 等待问题

> ID：12755008
> 
> 赞同：0
> 
> 时间：2012-10-05T22:47:28.637
> 
> 标签：linux, bash, ubuntu, cron

我在 ubuntu 服务器上运行 python 脚本，尽管 cronjob bellow 是我的 bash 文件内容

```
#!/bin/bash
cd /home/ubuntu/
PATH=$PATH:/usr/local/bin
export PATH
nohup scrapy crawl first_job &
nohup scrapy crawl second_job &
nohup scrapy crawl third_job &
wait $(pgrep third_job)
nohup scrapy crawl fourth_job & 
```

我想要的是**第四个作业在****第三个作业**完成后立即开始执行

但

目前即使**third_job**完成，**fouth_job**等待**first_job**和**second_job完成**

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T23:04:35.117

获取最后一个后台进程的 PID 的更安全的方法是记住 $! 的值：

```
nohup scrapy crawl third_job &
PID=$!
wait $PID 
```

# javascript - Javascript 事件处理程序存储在哪里？

> ID：12755018
> 
> 赞同：8
> 
> 时间：2012-10-05T22:48:27.933
> 
> 标签：javascript, events

我试图弄清楚 DOM 如何跟踪事件处理程序，无论是通过使用 jQuery、addEventListener 还是通过 HTML 属性（例如 onload="myFunc()"）绑定。

我读过 jQuery 使用 .data() 方式来存储由 jQuery 绑定的事件处理程序......但是其他的呢？他们去哪里？我知道 Webkit 的检查器工具通过检查元素选项卡中的元素来显示事件侦听器，但是它从哪里获取这些信息？

顺便说一句，在使用 Chrome 的 web 检查器进行的一些测试中，我使用控制台通过拉入标签将实时站点上的 jQuery 版本替换为较新的版本`<script>`，从而覆盖`jQuery`和`$`变量。显然，替换之前使用 jQuery 绑定的事件丢失了，因为在这个过程中引入了一个新的 .data() 接口。

然而，那些“丢失”的处理程序仍然绑定到某些事件，因为它们实际上最终会在事件触发时被调用。假设我想完全删除它们，或者用我自己的处理程序取代它们？这就是为什么我想知道如何在 DOM 保存它们的地方访问实际的处理程序......并且没有 jQuery。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T22:54:30.537

对于类似 的方法`addEventListener`，它们在常规 JavaScript 代码中并不直接可见。它们存储在内部。

* * *

关于内联处理程序，它们只是直接存储在 DOM 元素上，就像典型的处理程序一样，因此：

```
<a href="#" onclick='alert("foo");'>click</a> 
```

*有效地*变成这样：

```
a_element.onclick = function(event) { alert("foo"); }; 
```

*（旧版 IE 不包含`event`函数中的参数。）*

* * *

`.data()`关于 jQuery，您是对的，它们存储在`jQuery.cache`.

但是您的处理程序永远不会直接分配给元素。jQuery 分配一个你从未见过的通用处理程序*（使用`addEventListener`or `attachEvent`，任何可用的）*。当事件发生时，它会查看`event.type`，然后查找元素`.data()`以查看是否有该类型的处理程序，如果有，则调用它们。

* * *

因此，如果您有一些正在覆盖的脚本`jQuery.cache`，那么您实际上已经孤立了这些处理程序。`addEventListener`除非您有对该处理程序的引用，否则您无法删除绑定的处理程序。由于 jQuery 的通用处理程序也存储在 中`jQuery.cache`，因此除非您销毁元素本身，否则无法解除绑定。

我不记得通用处理程序是否有引用`jQuery.cache`或只是它的一个子集。它确实持有的参考将对可能存在多少泄漏数据产生影响。

# linq - where 子句的通用表达式 - “LINQ to Entities 不支持 LINQ 表达式节点类型 'Invoke'。”

> ID：12755022
> 
> 赞同：5
> 
> 时间：2012-10-05T22:48:40.573
> 
> 标签：linq, entity-framework, generics, linq-to-sql, expression-trees

我正在尝试编写一种非常通用的方法来批量加载 EF 实体，使用 Contains 方法生成 SQL IN 语句。如果我传入整个表达式，我就可以正常工作，但是当我尝试动态构建表达式时，我得到一个“LINQ to Entities 不支持 LINQ 表达式节点类型'Invoke'”。所以我知道这意味着 EF 认为我正在调用任意方法并且它无法将其转换为 SQL，但我无法弄清楚如何让它理解底层表达式。

所以如果我做这样的事情（只显示相关的片段）：

函数声明：

```
public static List<T> Load<T>(IQueryable<T> entityQuery, int[] entityIds, Func<T, int> entityKey, int batchSize = 500, Func<T, bool> postFilter = null) where T : EntityObject
{
    var retList = new List<T>();

    // Append a where clause to the query passed in, that will use a Contains expression, which generates a SQL IN statement.  So our SQL looks something like
    // WHERE [ItemTypeId] IN (1921,1920,1922)
    // See http://rogeralsing.com/2009/05/21/entity-framework-4-where-entity-id-in-array/ for details
    Func<int[], Expression<Func<T, bool>>> containsExpression = (entityArray => (expr => entityArray.Contains(entityKey(expr))));

    // Build a new query with the current batch of IDs to retrieve and add it to the list we are returning
    newQuery = entityQuery.Where<T>(containsExpression(entityIds));
    retList.AddRange(newQuery.ToList());

    return retList;
} 
```

调用函数：

```
var entities = BatchEntity.Load<ItemType>(from eItemType in dal.Context.InstanceContainer.ItemTypes
select eItemType
, itemTypeData
, (ek => ek.ItemTypeId)
); 
```

我得到“LINQ to Entities 不支持 LINQ 表达式节点类型‘Invoke’。”

但如果我把它改成这样：

函数声明：

```
public static List<T> Load<T>(IQueryable<T> entityQuery, int[] entityIds, Func<int[], Expression<Func<T, bool>>> containsExpression, int batchSize = 500, Func<T, bool> postFilter = null) where T : EntityObject
{
    var retList = new List<T>();

    // Build a new query with the current batch of IDs to retrieve and add it to the list we are returning
    newQuery = entityQuery.Where<T>(containsExpression(entityIds));
    retList.AddRange(newQuery.ToList());

    return retList;
} 
```

调用函数：

```
var entities = BatchEntity.Load<ItemType>(from eItemType in dal.Context.InstanceContainer.ItemTypes
select eItemType
, itemTypeData
, (entityArray => (ek => entityArray.Contains(ek.ItemTypeId)))
); 
```

它工作正常。有什么方法可以让 EF 理解更通用的版本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T00:51:59.237

正如您所描述的，问题在于第一个示例中的 entityKey 函数是不透明的，因为它的类型是 Func 而不是 Expression。但是，您可以通过实现 Compose() 方法来组合两个表达式来获得所需的行为。我在这个问题中发布了实现 compose 的代码：[use Expression<Func<T,X>> in Linq contains extension](https://stackoverflow.com/questions/10090267/use-expressionfunct-x-in-linq-contains-extension)。

实现 Compose() 后，您的函数可以实现如下：

```
public static List<T> Load<T>(this IQueryable<T> entityQuery, 
                              int[] entityIds, 
                              // note that this is an expression now
                              Expression<Func<T, int>> entityKey, 
                              int batchSize = 500, 
                              Expression<Func<T, bool>> postFilter = null) 
    where T : EntityObject
{
    Expression<Func<int, bool>> containsExpression = id => entityIds.Contains(id);
    Expression<Func<T, bool>> whereInEntityIdsExpression = containsExpression.Compose(entityKey);

    IQueryable<T> filteredById = entityQuery.Where(whereInEntityIdsExpression);

    // if your post filter is compilable to SQL, you might as well do the filtering
    // in the database
    if (postFilter != null) { filteredById = filteredById.Where(postFilter); }

    // finally, pull into memory
    return filteredById.ToList();
} 
```

# python - Django url路由错误

> ID：12755023
> 
> 赞同：0
> 
> 时间：2012-10-05T22:48:58.000
> 
> 标签：python, django, url, routing, admin

我的 django 项目中有一个非常基本的 url 路由器：

```
from django.conf.urls import patterns, include, url
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

from django.contrib import admin
admin.autodiscover()

urlpatterns = staticfiles_urlpatterns()

urlpatterns += patterns('',
    url(r'^admin/', include(admin.site.urls)),
    url(r'^/?', include('customApp.urls')),
) 
```

当我启动开发服务器并转到 时`127.0.0.1:8000/admin/`，出现`ViewDoesNotExist at /admin/`错误。

以下是异常的内容：

```
Could not import customApp.views.event. View does not exist in module customApp.views. 
```

我已经尝试重新排序网址（我不知道这会有什么帮助，但我还是尝试过）并更改`r'^/?'`为`r'^/'`.

当我注释掉最后一个 url 时，管理页面再次工作。

这是`customApp.urls`代码：

```
from django.conf.urls import patterns, include, url
import django.contrib.auth.views
import django.contrib.auth

urlpatterns = patterns('customApp.views',
    url(r'^$', 'index'),
    url(r'^rest/v1/event/add/$', 'event'),
    url(r'^rest/v1/reports/$', 'reports'),
)

urlpatterns += patterns('',
    url(r'^login/$', 'django.contrib.auth.views.login', {'template_name': 'login.html'}),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:47:51.413

这是简单的伙伴。`Django cannot find customApp views`. 请确保您在 urls.py 中获得的任何视图都应该存在。

谢谢

# c - 如何在 C/C++ 中将二维数组的指针分配给内存地址

> ID：12755025
> 
> 赞同：0
> 
> 时间：2012-10-05T22:49:11.047
> 
> 标签：c, arrays, memory, pointers, multidimensional-array

我想为二维数组分配一个固定的内存地址。例如，对于简单的整数，我们这样做： int *p = (int *)0xabcdf34;

我需要从固定位置开始分配内存，比如 0xf3ab25 到二维数组。我该怎么做。请帮忙。

编辑：我在玩回忆。我想将矩阵的所有内存分配给缓存或主内存。我想检查对计算和运行时间的影响。我正在使用模拟器，所以我有直接地址。假设我想使用 matrix[100][100] 的矩阵

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T22:55:50.467

像这样的东西：

```
int foo() {
  int (*p)[10] = (int (*)[10])0xf3ab25;
  return p[3][4];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:52:22.947

您无法决定要分配的内存地址，因为您无法决定程序的实际布局。

它由编译器（静态变量）或运行时（自动变量和动态分配的内存）决定

# html - HTML 定义列表的用例，以及引导程序的问题

> ID：12755027
> 
> 赞同：6
> 
> 时间：2012-10-05T22:49:17.377
> 
> 标签：html, web-applications, css, twitter-bootstrap

我使用定义列表 (dl, dd, dt) 来呈现视图页面（实体的详细信息）。描述列表不适合这个用例吗？

与 Twitter 引导程序一起使用时，如果 `<dd></dd>`为空，则所有内容都移到顶部。不希望显示对象的详细信息，该对象可能包含一些空属性。

请在此处查看小提琴[http://jsfiddle.net/cPwHr/](http://jsfiddle.net/cPwHr/)

这是一个错误吗？我该如何防止它。或者我应该使用普通列表（ul，li ..）还是表格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T23:45:58.653

如果您没有定义而不是将其留空，则可以只使用不间断空格。这样所有的 css 规则仍将按预期应用。

```
 <dt>Description lists</dt>
        <dd>&nbsp;</dd> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T22:17:34.810

您还可以使用此样式覆盖：

```
.dl-horizontal > dd:after {
  display: table;
  content: "";
  clear: both;
} 
```

由@gael-marziou 回答，请参阅此线程：[防止 Twitter 引导空 <dd> 填充下一个 <dd> 值](https://stackoverflow.com/questions/10566451/how-to-prevent-twitter-bootstrap-dds-from-going-up-if-empty)

# f# - 以 x64 为目标有时会导致比 anycpu 更差的性能

> ID：12755033
> 
> 赞同：9
> 
> 时间：2012-10-05T22:50:22.587
> 
> 标签：f#

这是 2 个函数，`fun1`需要 1 个参数，`fun2`需要 4 个额外的无用参数。当我针对 x64 时，`fun1`需要 4 秒但`fun2`不到 1 秒。如果我以anycpu为目标，那么两者都需要不到1s。

我在这里问了一个类似的问题 [，如果目标是 x64，为什么 Seq.iter 比 for 循环快 2 倍？](https://stackoverflow.com/questions/13209729/why-seq-iter-is-2x-faster-than-for-loop-in-this-case)

它在 .Net 4.5 Visual Studio 2012、F# 3.0 中编译，在 windows 7 x64 中运行

```
open System
open System.Diagnostics

type Position =
    {
        a: int
        b: int
    }

[<EntryPoint>]
let main argv = 

    let fun1 (pos: Position[]) =  //<<<<<<<< here
        let functionB x y z = 4

        Array.fold2 (fun acc x y -> acc + int64 (functionB x x y)) 0L pos pos

    let fun2 (pos: Position[]) u v w x =  //<<<<<<<< here
        let functionB x y z = 4

        Array.fold2 (fun acc x y -> acc + int64 (functionB x x y)) 0L pos pos

    let s = {a=2;b=3}
    let pool = [|s;s;s|]

    let test1 n =
        let mutable x = 0L
        for i in 1 .. n do
            x <- fun1 pool

    let test2 n =
        let mutable x = 0L
        for i in 1 .. n do
            x <- fun2 pool 1 2 3 4

    let sw = new Stopwatch()
    sw.Start()
    test2 10000000
    sw.Stop()
    Console.WriteLine(sw.Elapsed)

    sw.Restart()
    test1 10000000
    sw.Stop()
    Console.WriteLine(sw.Elapsed)

    0 // return an integer exit code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:01:57.513

*这不是一个完整的答案，它是问题的第一个诊断。*

我可以使用相同的配置重现该行为。如果您在 中打开 F# Interactive 64-bit `Tools -> Options -> F# Tools -> F# Interactive`，您可以在那里观察到相同的行为。

与[另一个问题不同](https://stackoverflow.com/questions/13209729/why-seq-iter-is-2x-faster-than-for-loop-if-target-is-for-x64?lq=1)，x64 抖动不是问题。事实证明，Project 属性中的*“生成尾调用”*选项导致`test1`与`test2`. 如果您关闭该选项，则两种情况的速度相似。

另一方面，您可以使用`inline`关键字 on`fun1`以便不需要尾调用。无论`fun2`是否内联，两个示例在执行时间上再次具有可比性。

也就是说，添加`tail.`操作码`fun1`使其比 (does the same with) 慢得多，这很奇怪`fun2`。您可以联系 F# 团队进行进一步调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:27:37.010

这种差异几乎可以肯定是 JITer 的一个怪癖。它还解释了不一致的结果。这是像这样的微基准测试的常见问题。执行一个或多个方法的冗余执行，以便在幕后编译整个事情，并为最后一个计时。它们将是相同的。

由于这个怪癖，你可以获得比这更奇怪的结果。

# java - 如何在 Java 7 中为 RMI 配置自定义客户端套接字工厂？

> ID：12755034
> 
> 赞同：1
> 
> 时间：2012-10-05T22:50:28.280
> 
> 标签：java, sockets, rmi

我已经为 RMI 编写了一个自定义客户端套接字工厂，因此如果由于防火墙而导致直接套接字连接不可用，我将回退到 HTTP。这适用于 Java 6。在 Java 7 中，当我调用 RMISocketFactory.setSocketFactory(mySocketFactory) 时，我收到以下错误消息：

java.net.SocketException：工厂已经定义

调用 RMISocketFactory.getSocketFactory() 表明安装的工厂是 com.sun.deploy.net.protocol.rmi.DeployRMISocketFactory 的一个实例。我不能使用默认的 HTTP 回退机制，因为我已经为 http 连接自定义了 URL（我不能使用 /cgi/java-rmi 路径）。

当 setSocketFactory() 被定义为每个进程只能调用一次时，为什么 Java 7 会预先安装一个套接字工厂？我怎样才能让它使用我自己的套接字工厂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:51:26.367

您应该通过上世纪 1.2 中引入的 RMIClientSocketFactory 机制来使用每个对象的套接字工厂。

# java - 使用 Java API 的 S3/AWS 的 SSL 问题：“证书中的主机名不匹配”

> ID：12755038
> 
> 赞同：10
> 
> 时间：2012-10-05T22:51:17.807
> 
> 标签：java, ssl, amazon-s3, amazon-web-services

Amazon 在 1.3.21 版本中“升级”了其 AWS Java SDK 中的 SSL 安全性。在使用 Amazon 的 AWS Java API 时，这会破坏对名称中带有句点的任何 S3 存储桶的访问。我正在使用 1.3.21.1 版本，该版本截至 2012 年 10 月 5 日。我在下面的回答中提供了一些解决方案，但我正在寻找解决此问题的其他方法。

如果您收到此错误，您将在异常/日志中看到类似于以下消息的内容。在此示例中，存储桶名称为`foo.example.com`。

```
INFO: Unable to execute HTTP request: hostname in certificate didn't match:
       <foo.example.com.s3.amazonaws.com> != <*.s3.amazonaws.com>
       OR <*.s3.amazonaws.com> OR <s3.amazonaws.com>
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:220)
at org.apache.http.conn.ssl.StrictHostnameVerifier.verify(StrictHostnameVerifier.java:61)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:149)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:130)
at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:390) 
```

您可以在 AWS S3 讨论论坛上查看此问题的文档：

> [https://forums.aws.amazon.com/thread.jspa?messageID=387508](https://forums.aws.amazon.com/thread.jspa?messageID=387508&#387508)

亚马逊对此问题的回应如下。

> 我们应该能够通过对具有这种命名模式的存储桶使用较旧的路径样式寻址方法（而不是较新的虚拟主机样式寻址）来解决此问题。我们将开始修复并确保我们的内部集成测试具有包含句点的存储桶名称的测试用例。

任何解决方法或其他解决方案？感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T02:29:51.297

**原文：2012 年 10 月**

> 事实证明，亚马逊在 2012 年 9 月下旬“升级”了 S3 上的 SSL 安全性。当使用亚马逊的 AWS Java API 时，这破坏了对名称中带有句点的任何 S3 存储桶的访问。

这是不准确的。S3 的 SSL 通配符匹配与 S3 于 2006 年推出时相同。更有可能的是 AWS Java SDK 团队启用了对 SSL 证书的更严格验证（很好），但最终破坏了与 S3 的 SSL 相冲突的存储桶名称证书（坏）。

正确的答案是您需要使用*路径式*寻址而不是*DNS 式*寻址。这是解决 SSL 证书上通配符匹配问题的唯一*安全*方法。禁用验证会使您面临*中间人*攻击。

我目前不知道 Java SDK 是否将其作为可配置选项提供。如果是这样，这就是你的答案。否则，听起来 Java SDK 团队说“我们将添加此功能，然后添加集成测试以确保一切正常。”

**更新：2020 年 10 月**

AWS 已宣布不推荐使用的路径式寻址将在不久的将来消失。AWS 的建议是使用与 DNS 兼容的存储桶名称，这意味着没有句点（以及其他一些内容）。S3 的某些较新功能*需要*与 DNS 兼容的存储桶名称（例如，加速传输）。

如果您需要一个包含句点的存储桶名称（在不久的将来也不允许新存储桶使用），如果您想通过 HTTPS 访问它，我最好的建议是在它前面放置一个 CloudFront 分配。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T22:51:17.807

亚马逊发布了 1.3.22 版本解决了这个问题。我已经验证我们的代码现在可以工作了。引用他们的发行说明：

> 现在可以通过 HTTPS 再次正确寻址名称中包含句点的存储桶。

除了等到亚马逊发布新的 API 之外，我还可以看到一些解决方案。

1.  显然，您可以回滚到 AWS Java SDK 的 1.3.20 版本。不幸的是，我需要 1.3.21 中的一些功能。

2.  您可以替换`org.apache.http.conn.ssl.StrictHostnameVerifier`类路径中的 。这是一个*hack*，但是我认为它将删除对 Apache http 连接的所有 SSL 检查。这是对我有用的代码：http: [//pastebin.com/bvFELdJE](http://pastebin.com/bvFELdJE)

3.  我最终从 AWS 源 jar 下载并构建了自己的包。我将以下近似补丁应用于`HttpClientFactory`源。

    ```
    ===================================================================
    --- src/main/java/com/amazonaws/http/HttpClientFactory.java     (thirdparty/aws)      (revision 20105)
    +++ src/main/java/com/amazonaws/http/HttpClientFactory.java     (thirdparty/aws)    (working copy)
    @@ -93,7 +93,7 @@

                            SSLSocketFactory sf = new SSLSocketFactory(
                                    SSLContext.getDefault(),
    -                               SSLSocketFactory.STRICT_HOSTNAME_VERIFIER);
    +                               SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER); 
    ```

4.  正确的解决方法是从域名存储桶处理更改为基于路径的处理。

顺便说一句，以下似乎它可能有效，但它*没有*。AWS 客户端专门请求`STRICT`验证者，不使用默认的：

```
SSLSocketFactory.getSystemSocketFactory().setHostnameVerifier(
    SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER); 
```

# javascript - 着色器编译错误

> ID：12755044
> 
> 赞同：7
> 
> 时间：2012-10-05T22:52:20.653
> 
> 标签：javascript, google-chrome, webgl

我正在尝试编译一个“垃圾”着色器，向 WebGL 提供一些垃圾代码（请参阅[此处](http://jsfiddle.net/yjGV5/)获取小提琴）：

```
gl = $('canvas')[0].getContext('experimental-webgl');

source = 'garbage12398sv;aa[]|\[12';

shader = gl.createShader(gl.FRAGMENT_SHADER);
gl.shaderSource(shader, source);
gl.compileShader(shader);

console.log(gl.getError() === gl.NO_ERROR); 
```

令人惊讶的是，`gl.getError() === gl.NO_ERROR`尽管`true`要求 WebGL 编译一些垃圾。

为什么不`getError`标记错误？如何获取有关着色器编译状态的错误信息？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T23:33:42.440

gl.getError 仅返回 OpenGL 管道的错误。未能编译的着色器不会导致管道中的错误。[您可以在此处](http://www.opengl.org/sdk/docs/man/xhtml/glGetError.xml)阅读有关 gl.getError的信息。您可以像这样查询着色器的状态：

```
var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
console.log('Shader compiled successfully: ' + compiled);
var compilationLog = gl.getShaderInfoLog(shader);
console.log('Shader compiler log: ' + compilationLog); 
```

同样，着色器程序链接错误不会使 OpenGL 管道无效，并且无法使用 gl.getError() 检测到，您必须调用对象（着色器、程序、渲染缓冲区等）特定的错误查询函数。

# web-services - Backbone.js 和与服务器的通信（检索精炼的数据集）

> ID：12755045
> 
> 赞同：2
> 
> 时间：2012-10-05T22:52:21.753
> 
> 标签：web-services, api, model-view-controller, node.js, backbone.js

在backbone.js中，我对与服务器进行通信以检索数据的理解充其量是多云的......我目前的困惑是：

> 当您使用 Collection 时，您可以通过 Model 从数据库中获取一组数据并过滤掉不需要的结果。我对此的担忧是，在未经过滤的结果最终变成数百万个结果的情况下，这会减慢速度。

我知道这一定不是它的功能，因为其他人使用backbone.js，我以前没有见过这个投诉。

**问题：** 通过backbone.js，当您获取一组对象时，它与哪里通信以及如何传递变量来指定方法的过滤器？例如，调用 get 方法，该方法可以使用 user_id 返回具有关联 user_id 的对象。

如果这不是正确的方法，请告诉我。

解释backbone.js 如何与服务器通信，它期望通信的接口类型。示例也将非常有帮助。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:21:57.953

在文档中有一些地方可以传入 jQuery 选项。在这些选项中，您可以设置“数据”参数，该参数作为查询参数或表单参数传入，具体取决于它是 POST 还是 GET。

> jQuery.ajax 选项也可以直接作为 fetch 选项传递，因此要获取分页集合的特定页面： Documents.fetch({data: {page: 3}})

# javascript - 如何编写等待 3 个不同 ajax 请求响应的事件驱动代码？

> ID：12755047
> 
> 赞同：0
> 
> 时间：2012-10-05T22:52:21.947
> 
> 标签：javascript, jquery, ajax, callback

我有一个网页，其中有 3 个单独的 ajax 调用

所有 3 都使用相同的结构： $.ajax({ //这是处理数据并发送邮件的 php 文件 url: url,

```
 //POST method is used
        type: "POST",

        //pass the data         
        data: data,     

        //Do not cache the page
        cache: false,

        //success
        success: function (json) { 
```

我想触发另一个函数，但前提是 3 个单独的 ajax 调用成功。

我该怎么做呢？

**更新：我现在在使用 $.when() 时遇到问题**

我的代码现在看起来像这样：

```
function mainFunction() {
    $.when(someAjaxCall()).done(function(ajaxResult){
            // after all the pages, covers, and sneaks are uploaded
            // we will now change the status
            //start the ajax
            console.log(ajaxResult);
}

function someAjaxCall() {
    // do something...
    if (someGlobalScopedVariable == true) {
         return $.ajax({
        //this is the php file that processes the data and send mail
        url: url,

        //POST method is used
        type: "POST",

        //pass the data         
        data: data,     

        //Do not cache the page
        cache: false,

        //success
        success: function (json) {....},
     });
    }
} 
```

mainFunction $.when 中的 ajaxResult 给了我未定义的。我做错了什么是因为我遵循了这个[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T22:54:17.977

使用[`jQuery.when`](http://api.jquery.com/jQuery.when/).

```
var deferred1 = $.ajax({ ... });
var deferred2 = $.ajax({ ... });
var deferred3 = $.ajax({ ... });

$.when(deferred1, deferred2, deferred3).then(
    function(info1, info2, info3) {
        var response1 = info1[0], response2 = info2[0], response3 = info3[0];
        // Do something with response 1, 2, and 3...
    }
); 
```

`$.ajax`返回一个`Deferred`对象。您可以将多个`Deferred`对象传递给以`$.when`等待所有对象完成。

# java - android如何检测按钮位置并调用适当的处理程序？

> ID：12755048
> 
> 赞同：2
> 
> 时间：2012-10-05T22:52:24.540
> 
> 标签：java, android, operating-system, touch, system

我知道这可能不是一个合适的问题，但我想知道像 android 这样的支持触摸的操作系统如何检测应用程序中的按钮并调用适当的处理程序？在编写应用程序时，我们只需提供特定按钮的对齐信息。那么，android如何保持按钮和屏幕位置之间的映射呢？我认为这是动态的，因为如果您更改屏幕方向或使用缩放或类似的按钮位置会动态更改。因此，android 必须查看触摸位置并确定按钮是否存在并调用适当的处理程序。这一切是如何组合在一起的？

我很感激任何答复。

# c# - 声明一个超类数组

> ID：12755049
> 
> 赞同：2
> 
> 时间：2012-10-05T22:52:31.560
> 
> 标签：c#, .net, arrays, class, superclass

假设我有：

```
class A {
  //field, properties and common methods
}

class B : A {
  //specific ones
}

class C : A {
  //specific ones
}

class D : A {
  //specific ones
} 
```

然后是这 3 个列表：

```
List<B> b_list = new List<B>();
List<C> c_list = new List<C>();
List<D> d_list = new List<D>(); 
```

我需要一个指向`b_list`和`c_list`的列表`d_list`。是否有可能考虑到 B、C、D 类具有相同的超类 A？

就像是：

```
List<A>[] lists = new[] {b_list, c_list, d_list}; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:26:51.070

您想将`List<B>`、`List<C>`和`List<D>`视为 的子类`List<A>`，但它们不是。它们唯一常见的超类型是`object`.

在 .NET 4 及更高版本中，您可以将这些类型全部引用转换为`IEnumerable<A>`，因为`IEnumerable<out T>`接口在`T`. 在 .NET 4.5 中，添加了另外两个协变接口：`IReadOnlyList<out T>`and `IReadOnlyCollection<out T>`，因此您也可以将它们视为`IReadOnlyList<A>`and `IReadOnlyCollection<A>`。这些界面之一可能适合您的需求。

类在 .NET 中不能是协变的，并且接口只能在类型参数中是协变的，前提是该类型参数仅用于“输出”位置。换句话说，该方法`IList<T>.Add(T item)`防止`IList<>`协变。

因此，假设 .NET 4.5 ，您*可以这样做：*

```
IReadOnlyList<A>[] lists = new[] {b_list, c_list, d_list}; 
```

在 .NET 4 中，您可以执行此操作，虽然用处不大，但可能足以满足您的需求：

```
IEnumerable<A>[] lists = new[] {b_list, c_list, d_list}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:56:15.683

您必须列出 A 列表并将 b、c、d 对象分配给它。您必须将子类对象强制转换为父类 A。这将产生限制，您将只能访问从基类继承的属性和方法等。

```
List<B> blist = new List<B>();
List<C> cList = new List<C>();
List<D> dList = new List<D>();

List<List<A>> arrays = new List<List<A>>();    
arrays.Add(b_array.ConvertAll(c=>(A)c));; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T23:00:58.057

不直接（[协方差](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)“限制”）

但你可以做

```
List<A> superTypeList = 
   b_array.Cast<A>()
   .Concat(c_array.Cast<A>())
   .Concat(d_array.Cast<A>())
   .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T23:42:28.320

更好的方法是使用一种称为[Composite Pattern](http://www.dofactory.com/Patterns/PatternComposite.aspx)的设计模式。

本质上，您创建一个基类（组件），其中包含您希望子节点（如果它们反过来有子节点，则为 Compisites 节点，如果它们停止分支，则为叶节点）拥有的所有方法，然后仅实现您想要的每个方法在每个子类型中使用。

在您的情况下，您可以这样做：

```
abstract class A {   
    //All methods for all classes
    //ex.
    public abstract void b();
    public abstract void c();
    public abstract void d();
}  

class B : A {   
    public override void b()
    {
        //Do Something
    }
    public override void c()
    {
        throw new Exception("Not Implemented");
    }
    public override void d()
    {
        throw new Exception("Not Implemented");
    }
}  

class C : A {   
    public override void b()
    {
        throw new Exception("Not Implemented");
    }
    public override void c()
    {
        //Do Something
    }
    public override void d()
    {
        throw new Exception("Not Implemented");
    }
}  

class D : A {   
    public override void b()
    {
        throw new Exception("Not Implemented");
    }
    public override void c()
    {
        throw new Exception("Not Implemented");
    }
    public override void d()
    {
        //Do Something
    }
} 
```

然后根据多态性定律，如果您执行以下操作，则应保留派生类（b、c、d 等）的方法。

```
List<B> blist = new List<B>(); 
List<C> cList = new List<C>(); 
List<D> dList = new List<D>();  
List<List<A>> arrays = new List<List<A>>(); 
```

# c - 在 C 中初始化 3 维字符数组

> ID：12755052
> 
> 赞同：1
> 
> 时间：2012-10-05T22:52:56.317
> 
> 标签：c, arrays, multidimensional-array, initialization

我希望你们能帮助我解决我遇到的问题。

对于一个小项目，我必须初始化一个 3 维字符数组，当我在主中初始化它时它可以正常工作，所以我认为问题或多或少存在于我的键盘和椅子之间；）

我已经将初始化从 main 分离到一个单独的 .c 中，我将让你一睹它：

```
/*database.c*/
#define PHRASE_NUM 6
#define PHRASE_LEN 100
#define PHRASE_TYPES 2

void initDatabase(char database[][PHRASE_TYPES][PHRASE_LEN]) {

/* At this point I get the error "error: expected expression before ']' token" */
database[][PHRASE_TYPES][PHRASE_LEN]= 
{
        {{"string 1.1"},{"string 1.2"}},
        {{"string 2.1"},{"string 2.2"}},
        {{"string 3.1"},{"string 3.2"}},
        {{"string 4.1"},{"string 4.2"}},
        {{"string 5.1"},{"string 5.2"}},
        {{"string 6.1"},{"string 6.2"}}
};

}

 /*main.c*/
#include "database.h"
int main (void)
{
    char database[PHRASE_NUM][PHRASE_TYPES][PHRASE_LEN];
    initDatabase(database);

    printf(database[1][0]);
    /* should return string 2.1  */

    return 0;
} 
```

因此，如上面的评论中所述，我收到以下错误：“错误：']' 标记之前的预期表达式”。我检查了我是否对一般初始化做错了什么。的数组，但如果我直接在 main 中实现它，这将有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:54:51.653

您只能在声明时初始化数组，之后不能。

你可以做的是：

```
void initDatabase(char database[][PHRASE_TYPES][PHRASE_LEN]) {
    char temp_array[][PHRASE_TYPES][PHRASE_LEN]= 
    {
            {{"string 1.1"},{"string 1.2"}},
            {{"string 2.1"},{"string 2.2"}},
            {{"string 3.1"},{"string 3.2"}},
            {{"string 4.1"},{"string 4.2"}},
            {{"string 5.1"},{"string 5.2"}},
            {{"string 6.1"},{"string 6.2"}}
    };
    memcpy(database, temp_array, sizeof(temp_array));
} 
```

# php - PHP如何从文件输入字段中获取ID

> ID：12755055
> 
> 赞同：0
> 
> 时间：2012-10-05T22:53:41.847
> 
> 标签：php, forms

我只是想知道如何从 PHP 中的输入类型文件字段中检索 id。

```
<input name="images[]" class="browse" type="file" id="0_0"> 
```

我需要使用身份证。我以前使用的是另一个输入

```
<input name="ids[]" class="browse" type="hidden" id="0_0"> 
```

结合文件输入但是太麻烦了。我看了看，

```
print_r($_FILES['images']); 
```

但这没有存储ID。也没有，

```
$_POST['images']; 
```

是否可以检索文件输入的 id？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:58:17.480

为什么不在 中包含您要查找的 ID `name`？

```
<input name="images[0_0]" class="browse" type="file" id="0_0"> 
```

它可能不会破坏您正在执行的任何循环，并且您可以在`$_POST['images']`数组键中访问它。

`id`正如 dbf 所说，在表单发布后用 PHP访问属性是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:58:57.787

不可以。当您提交表单时，PHP 将只能访问输入元素的名称和值。

但是，您可以使用 JavaScript 获取 id，您可以使用 AJAX 将其发送到您的 PHP 脚本。

# c# - 使用 SelectedIndex 选择列表中的第一项

> ID：12755056
> 
> 赞同：-2
> 
> 时间：2012-10-05T22:53:45.287
> 
> 标签：c#, wpf

我有一个组合框，它默认为 ItemsSource 列表中的第一项，使用

```
<ComboBox  x:Name="combo" 
           SelectedIndex="0" 
           ItemsSource="{Binding comboBoxSelections, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" 
           DisplayMemberPath="Key" 
           IsEditable="True" > 
```

但是，下面没有正确绑定到 DataTable。
当我将绑定添加到 SelectedValue 时，它​​现在可以正确绑定，但不再默认为第一项；
`SelectedIndex="0"`现在不工作

```
<ComboBox  x:Name="combo" 
           SelectedValue="{Binding Selection, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
           SelectedIndex="0" 
           ItemsSource="{Binding comboBoxSelections, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" 
           DisplayMemberPath="Key" 
           IsEditable="True" > 
```

是否可以仅在 XAML 中初始化值？

我认为我不能从构造函数中设置它，因为`combo`它不是单个 Combobox，而是 DataGridComboBoxColumn 的一部分

```
<DataGrid.Columns>
    <DataGridComboBoxColumn Header="Department Id" x:Name="comboboxColumn1"
            SelectedValueBinding="{Binding Department Id}" />
        <DataGridTemplateColumn x:Name="DataGridTempCol" Header="Selection">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox  
                      x:Name="combo" 
                      SelectedValue="{Binding Selection, Mode=TwoWay,   UpdateSourceTrigger=PropertyChanged}" 
                      ItemsSource="{Binding comboBoxSelections, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"  
                      DisplayMemberPath="Key" 
                      IsEditable="True" >
                    </ComboBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:33:56.960

将 SelectedValue 设置为 ctor 中的第一行。

# audio - 运行 mac os x 的 vmware 中的音频错误

> ID：12755057
> 
> 赞同：0
> 
> 时间：2012-10-05T22:53:46.770
> 
> 标签：audio, cocos2d-iphone, vmware

在 cocos2d 应用程序中简单同步加载音频文件 (.mp3) 会使我的 vmware 断开声音。

错误显示在右下角，说“创建声音流时出错；声音已断开'

我读到这可能是我的 vmware 版本（我的是 8）的原因，但我正在寻找修复，而不是降级到另一个版本。

在我收到该错误之前，系统上的声音可以正常工作（youtube等）

我调用的确切代码是..

```
 [CDSoundEngine setMixerSampleRate: CD_SAMPLE_RATE_MID];
[[CDAudioManager sharedManager] setResignBehavior: kAMRBStopPlay autoHandle:Yes];
soundEngine = [SimpleAudioEngine sharedEngine];
[soundEngine preloadBackgroundMusic:@"somemp3.mp3"];
[soundEngine playBackgroundMusic:@"somemp3.mp3"]; 
```

也许比特率太高了..？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:58:50.307

vmware有问题。。

# c++ - boost::trim 和 std::bind2nd

> ID：12755060
> 
> 赞同：0
> 
> 时间：2012-10-05T22:53:53.790
> 
> 标签：c++

我正在尝试`boost::trim`在字符串向量上使用。我知道[这个解决方案](https://stackoverflow.com/a/2221871/625914)可以很好地工作，但是我不明白为什么

```
std::for_each(df.colnames.begin(), df.colnames.end(),
    std::bind2nd(std::ptr_fun(boost::trim<std::string>), std::locale())); 
```

不起作用。我得到错误：

```
error: ‘typename _Operation::result_type std::binder2nd<_Operation>::operator()(typename _Operation::first_argument_type&) const [with _Operation = std::pointer_to_binary_function<std::basic_string<char>&, const std::locale&, void>; typename _Operation::result_type = void; typename _Operation::first_argument_type = std::basic_string<char>&]’ cannot be overloaded 
```

为什么`std::bind2nd`在这里不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:41:17.127

我认为这有两个问题：

1.  `ptr_fun`要求其参数返回一个值。见： [http ://www.sgi.com/tech/stl/ptr_fun.html](http://www.sgi.com/tech/stl/ptr_fun.html)

2.  `bind2nd`不适用于引用参数。请参阅：[将 std::bind2nd 与引用一起使用](https://stackoverflow.com/questions/1464439/using-stdbind2nd-with-references)

故事的寓意： `boost::bind`隐藏着令人震惊的复杂性。

如果您真的想让它工作并且不关心按值传递字符串/语言环境，您可以将 trim 包装如下：

```
int trim2(std::string s, const std::locale loc)
{
  boost::trim<std::string>(s, loc);
  return 0;
} 
```

然后做：

```
std::for_each(df.colnames.begin(), df.colnames.end(),
    std::bind2nd(std::ptr_fun(trim2), std::locale())); 
```

PS：（1）可能依赖于库。我刚刚尝试使用 g++ 并且返回 void 没有问题。

# ios - CGAffineTransformRotate 大小问题

> ID：12755062
> 
> 赞同：1
> 
> 时间：2012-10-05T22:53:59.953
> 
> 标签：ios, cocoa-touch, uiimageview, rotation, cgaffinetransform

我正在开发一个允许用户旋转时钟指针的应用程序。为此，我正在使用针的 imageview 的 transform 属性：

`CGAffineTransform newTrans = CGAffineTransformRotate(initialTransform, -angleDif); minutesNeedle.transform = newTrans;`

为了检测用户的触摸，我必须检测针的空间（分钟或小时的帧）。在这里我的问题很明显，在旋转图像后，它看起来像被拉伸并干扰了其他图像。UIView 类文档说，在转换视图的框架更改后，您必须使用中心和边界属性。但是，我不能使用 bounds 属性来检测位于超级视图中的触摸用户。

有没有其他方法可以在不改变帧大小的情况下做这个动画（我怀疑）。或者我可以在 touchesEnded 方法中调整框架的大小（我试过但没有成功）。请帮助我在那里阻塞一个星期！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:15:01.310

也许我遗漏了一些东西，但似乎你可以完全避免这种冲突。创建一个单独的视图来处理触摸，独立于针视图。在触摸事件上，适当地移动针视图。这个单独的视图本质上是时钟的大小，并覆盖在其他视图上，具有清晰的背景。它会有一个带有适当回调的委托，以便您的视图控制器（或任何拥有针头的东西）可以调整它。

至于回调是什么，我只会转发触摸事件，例如：

```
 - (void)touchReceiverView:(TouchReceiverView *)view didReceiveTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:03:25.500

使用 CALayers 更容易，而且性能更好。

```
CALayer *handLayer = [CALayer layer];
handLayer.contents = (id)[UIImage imageNamed:@"hand.png"].CGImage;
handLayer.anchorPoint = CGPointMake(0.5,0.0)];
[myview.layer addSublayer:handLayer];

//i.e.: if handLayer represents the seconds hand then repeat this every second ;)
handLayer.transform = CGAffineTransformMakeRotation (angle); //set the angle here 
```

有人[使用 CALayers 编写了 ClockView 示例](https://github.com/nacho4d/ClockView)，也许你觉得它很有用。

# intersystems-cache - 如何在系统间的缓存中创建唯一的 GUID？

> ID：12755065
> 
> 赞同：3
> 
> 时间：2012-10-05T22:54:01.357
> 
> 标签：intersystems-cache, intersystems, intersystems-ensemble

浏览文档我没有看到 GUID 数据类型。是否有生成随机 GUID 的功能或其他东西？它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:50:43.257

```
$System.Util.CreateGUID() 
```

然而，这不会返回数据类型，它只是一个字符串。如果您需要在逻辑/显示/ODBC 之间进行特殊验证或转换，您可以编写自己的数据类型类。

# qt - 在子小部件（qt）上拦截 mousePressEvent

> ID：12755074
> 
> 赞同：0
> 
> 时间：2012-10-05T22:55:39.753
> 
> 标签：qt, qtgui

我正在尝试基于 QPlainTextEdit 实现以下功能 - 默认情况下，它应该显示“请在此处输入内容”消息，单击时它会消失并允许编辑。

为此，我需要拦截小部件是否已被单击。我可以在没有子类 QPlainTextEdit 的情况下这样做吗？

父widget onMousePressEvent 能否获取事件属于哪个子widget？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:12:55.517

> 我可以在没有子类 QPlainTextEdit 的情况下这样做吗？

是的，您可以实现一个事件过滤器：

[http://qt-project.org/doc/qt-4.8/eventsandfilters.html#event-filters](http://qt-project.org/doc/qt-4.8/eventsandfilters.html#event-filters)

本质上，您可以过滤掉用于纯文本编辑的鼠标事件。每当您的过滤器遇到鼠标按下事件时，您都可以清除纯文本编辑的内容。

> 父widget onMousePressEvent 能否获取事件属于哪个子widget？

并非没有事件过滤。Qt 的事件传播系统首先将事件发送到子窗口小部件，然后如果子窗口小部件不接受事件，则仅发送给父窗口小部件。

# c++ - C++ 接口抛出未解决的外部符号错误

> ID：12755076
> 
> 赞同：0
> 
> 时间：2012-10-05T22:55:56.567
> 
> 标签：c++, interface, lnk2001

好吧，我有一个简单的问题，但实际上没有我在网上寻找的示例，只有相同示例的副本，它在一个文件中完成所有操作。我正在尝试制作一个界面和一种使用它的方法，如下例所示，但是当我编译时，我从 Visual Studio 中得到了未解决的外部符号错误。关于我做错了什么的任何想法？

IFoo.h

```
class IFoo {
public:
    virutal int Bar();
} 
```

Foo.h

```
class Foo : public IFoo {
    virtual int Bar();
} 
```

Foo.cpp

```
int Foo::Bar() {
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:00:06.357

假设未解析的符号是 for `int IFoo::Bar()`，请注意该函数被声明为可调用函数，并且确实可以调用它，例如使用

```
p->IFoo::Bar() 
```

也就是说，您要么需要定义此函数，要么需要将其声明为不存在：

```
virtual int Bar() = 0; 
```

（不过，它仍然允许您定义它）​​。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:58:56.500

在 IFoo.h 中，虚方法必须是纯虚的：

```
class IFoo {
public:
    virtual int Bar() = 0;
}; 
```

或者，提供默认实现，内联或在 IFoo.cpp 中。但是，这会使 I 前缀具有误导性，因为它不会像接口那样起作用。

# c# - 用户登录时将用户信息添加到会话数据

> ID：12755080
> 
> 赞同：1
> 
> 时间：2012-10-05T22:56:28.657
> 
> 标签：c#, asp.net, asp.net-mvc-3

我目前有以下登录脚本：

```
[HttpPost]
        public ActionResult LogOn(LogOnModel model)
        {
            if (ModelState.IsValid)
            {
                if (Membership.ValidateUser(model.UserName, model.Password))
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                    Guid MyUserId = (Guid)Membership.GetUser().ProviderUserKey;
                    System.Web.HttpContext.Current.Session[MyUserId.ToString()] = profileRepository.GetFullProfile(MyUserId);
                    return Json(true);                  
                }
                else
                {
                    return Json("The user name or password provided is incorrect.");
                }
            }else
                return Json("The user name or password provided is incorrect.");

        } 
```

我得到一个错误的`Membership.GetUser()`说法`object reference`。我对此进行了研究，发现这是因为只有我的下一个 http 请求将被验证，那么当用户登录时将用户数据保存到会话中的最佳方法是什么？在用户的会话到期并将他踢出之前，是否会确保在会话中，或者是否会出现用户在没有会话数据集的情况下登录的情况？如果生病了，也需要一些东西来处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:46:14.257

`LoginButton_Clicked`这在`asp.net application`（非 MVC）中发生在我身上。即使认为这个事件（`LoginButton_Clicked`）在成功登录后触发 Membership.GetUser(), Roles.GetRolesForUser(), Profile 都还没有填写。因此需要将用户名传递给每个方法以获取详细信息。

**我认为同样的事情也发生在 MVC 中。**

您可以通过传递 model.UserName 来获取用户详细信息，如下所示。

```
MembershipUser mu = Membership.GetUser(model.UserName); 
```

# java - JLayeredPane 的自动内容大小调整

> ID：12755083
> 
> 赞同：2
> 
> 时间：2012-10-05T22:56:53.443
> 
> 标签：java, swing, layout-manager, docking, jlayeredpane

我正在尝试创建一个应用程序，`JLayeredPane`它会根据父级的大小自动缩放`JFrame`（这是`BorderLayout`在框架的内容窗格上用作布局管理器的简单部分）。困难的部分是我希望 的内容`JLayeredPane`自动调整大小`JLayeredPane`（因此`JFrame`也是）。

事实上，我想要实现的功能很像 Netbeans 中的可停靠控制台，就像单击时出现在编辑器的“顶部”一样，当被关闭时再次隐藏并停靠在状态栏中的“控制台”字样中。显然，我也希望调整大小的行为能够正常工作。实现这一目标的最佳方法是什么（如果不是`JLayeredPane`）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T23:03:18.197

您需要使用添加到 JLayeredPane 的 ComponentListener 并使其内容响应该`void componentResized(ComponentEvent e)`方法。

# iphone - 从 ScrollViewController 内容视图导航到堆栈上的另一个视图

> ID：12755085
> 
> 赞同：0
> 
> 时间：2012-10-05T22:57:05.423
> 
> 标签：iphone, ios, uiviewcontroller, navigation

我正在尝试使用 UIButton 从 UIScrollView 的内容视图导航到另一个视图。我不想以模态方式显示这个其他视图，并且将视图推送到堆栈上对我不起作用。

示例：我的 Viewcontroller 包含一个具有 2 个内容视图的 Scrollview。在这些内容视图中，我想将另一个视图推送到堆栈上。

我正在尝试做的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:08:56.010

好的，让我们看看我是否足够了解您的问题。

```
@interface MyViewController ()
@property (nonatomic, strong) UIScrollView *scrollView;
@property (nonatomic, strong) UIView *firstPlayerView;
@property (nonatomic, strong) UIView *secondPlayerView;
@end

@implementation MyViewController

-(UIView *)firstPlayerView
{
    if (!_firstPlayerView) {
        _firstPlayerView = [[UIView alloc] initWithFrame:self.view.bounds];
        // set up your view as you like and place the button to go to the second player
        // view when you need to.
        // let's suppose that you called that button "goToSecondPlayerViewButton"
        [goToSecondPlayerViewButton addTarget:self
                                       action:@selector(switchPlayer) 
                             forControlEvents:UIControlEventTouchUpInside];
    }
    return _firstPlayerView;
}

-(UIView *)secondPlayerView
{
    if (!_secondPlayerView) {
        _secondPlayerView = [[UIView alloc] initWithFrame:CGRectOffset(self.view.bounds, self.view.bounds.size.width, 0)];
        // set up your view as you like and place the button to go to the first player
        // view when you need to.
        // let's suppose that you called that button "goToFirstPlayerViewButton"
        [goToFirstPlayerViewButton addTarget:self
                                      action:@selector(switchPlayer) 
                            forControlEvents:UIControlEventTouchUpInside];
    }
    return _secondPlayerView;
}

-(UIScrollView *)scrollView
{
    if (!_scrollView) {
        _scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
        _scrollView.autoresizingMask = UIViewAutoresizingNone;
        [_scrollView addSubview:self.firstPlayerView];
        [_scrollView addSubview:self.secondPlayerView];
        _scrollView.contentSize = CGSizeMake(self.view.frame.size.width * 2, self.view.frame.size.height);
        _scrollView.pagingEnabled = YES;
        _scrollView.scrollEnabled = NO;
        _scrollView.bounces = NO;
        _scrollView.showsVerticalScrollIndicator = NO;
        _scrollView.showsHorizontalScrollIndicator = NO;
    }
    return _scrollView;
}

-(void)switchPlayer
{
    if(self.scrollView.contentOffset.x == 0) {
        [self.scrollView scrollRectToVisible:CGRectMake(self.scrollView.bounds.size.width, 0, self.scrollView.bounds.size.width, self.scrollView.bounds.size.height) animated:YES];
        self.title = @"Second Player";
    } else {
        [self.scrollView scrollRectToVisible:self.scrollView.bounds animated:YES];
        self.title = @"First Player";
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [self.view addSubview:self.scrollView];
    self.title = @"First Player";
}

@end 
```

我希望能解决你的问题！我还没有测试过代码，所以如果您遇到问题，只需发表评论，我会尽力提供帮助。

已编辑：要添加视图，您只需放大滚动视图 contentSize 并将该视图添加为其子视图

```
-(UIView *)thirdView
{
    if (!_thirdView) {
        _thirdView = [[UIView alloc] initWithFrame:CGRectOffset(self.view.bounds * 2, self.view.bounds.size.width, 0)];
        // set up your view as you like 
    }
    return _thirdView;
}

-(void)addThirdView
{
    self.scrollView.contentSize = CGSizeMake(self.scrollView.bounds.size.width * 3, self.scrollView.bounds.size.height);
    [self.scrollView addSubview:self.thirdView];
    [self.scrollView scrollRectToVisible:CGRectMake(self.scrollView.bounds.size.width * 2, 0, self.scrollView.bounds.size.width, self.scrollView.bounds.size.height) animated:YES];
} 
```

您可以概括这一点并首先设置您的内容大小，然后使用一个将索引作为参数的方法。

```
-(void)scrollToViewAtIndex:(NSInteger)index
{
    [self.scrollView scrollRectToVisible:CGRectMake(self.scrollView.bounds.size.width * index, 0, self.scrollView.bounds.size.width, self.scrollView.bounds.size.height) 
                                animated:YES]; 
} 
```

# php - 允许用户查看或下载文件，但不能执行它们

> ID：12755086
> 
> 赞同：0
> 
> 时间：2012-10-05T22:57:06.253
> 
> 标签：php, file-permissions

我正在制作一个允许用户上传任何类型文件的网站。所有文件都存储在“files/”文件夹中。我希望用户能够查看和下载该文件夹中的任何文件，但不能执行它们。

一些文件，如 JPG 文件，很简单：众所周知，浏览器有一个内置系统来显示它们。

其他文件，如 PDF 文件，无法直接显示，因此浏览器所做的就是提示用户下载屏幕。那也很好。

但是，其他文件（如 PHP 文件）会带来问题。当我打开一个这样的文件时，如果我不小心，它就会被执行。例如，如果文件包含

```
<?php echo 'ok'; ?> 
```

然后当我转到“files/myphpfile.php”时，我看到的只是“ok”，而不是文件的内容。我想这不仅会发生在 PHP 文件中，而且还会发生在我的服务器可以执行的任何其他文件类型（例如 ASP 文件，我想）中。

我需要的是阻止用户执行文件，这样当他们转到“files/myphpfile.php”时，他们要么看到文件内容，要么浏览器提示他们下载屏幕。理想情况下，这将是一个通用解决方案，不需要我构建服务器可执行的每种文件类型的列表。

对我来说，最合理的做法是将文件权限设置为 644，这样用户就只能读取文件。但这样做之后，PHP 文件会继续执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:00:53.813

去下载：

```
header('Content-Type: text/plain');
header('Content-Disposition: attachment; filename=somefile.php');
header('Pragma: no-cache');
readfile('/path/to/somefile.php'); 
```

显示：

```
echo htmlspecialchars(file_get_contents('/path/to/somefile.php')); 
```

**更新**

> 当我打开一个这样的文件时，如果我不小心，它就会被执行

这就是为什么您没有指向该文件的直接链接。即文件不应该被上传到文档根目录内的某个位置。如果文件被上传到文档根目录之外的目录，人们无法通过 URL 直接访问它，例如：`http://example.com/files/somefile.php`.

> 我想这不仅会发生在 PHP 文件中，而且还会发生在我的服务器可以执行的任何其他文件类型（例如 ASP 文件，我想）中。

您是唯一可以判断哪些文件可能存在危险的人。我们不知道您是否有一些服务器也提供（和解析）asp 文件，也不知道那里可能还有其他潜在的危险文件。

> 我需要的是阻止用户执行文件，这样当他们转到“files/myphpfile.php”时，他们要么看到文件内容，要么浏览器提示他们下载屏幕。

请参阅上面我已经提供的解决方案。

> 对我来说，最合理的做法是将文件权限设置为 644，这样用户就只能读取文件。但这样做之后，PHP 文件会继续执行。

这是因为 PHP 文件没有被执行。它们只是被解析（即被网络服务器读取）。

所以基本上你需要找出可能的危险文件类型（还要考虑可能被 PHP 解析的其他文件，例如`.phtml`或其他文件）。用户无论如何都不能通过 HTTP 请求调用可执行文件。因为当我这样做时`http://example.com/run-virus.exe`，它永远不会在服务器上执行，但它只请求文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:26:15.557

我通过脚本显示文件解决了这个问题，而不是直接从它们的真实位置显示。该脚本取自[我以前的问题的答案](https://stackoverflow.com/a/12712222/809356)。

```
$fileinfo = finfo_open( FILEINFO_MIME_TYPE );

header( 'Content-Type: ' . finfo_file( $fileinfo, 'files/' . $filename ) );

finfo_close( $fileinfo );

readfile( 'files/' . $filename ); 
```

所以现在想要看到'files/myfile.php'的用户必须去'open/myfile.php'，上面的脚本会提示他们下载屏幕，或者在浏览器中显示文件，如果浏览器能够这样做。

# android - ListView 中的挂起 listSelector

> ID：12755088
> 
> 赞同：7
> 
> 时间：2012-10-05T22:57:40.443
> 
> 标签：android, listview, user-interface, scroll, scrollview

我正在`ListView`实施`android:listSelector`

```
<style name="ListView" parent="@android:style/Widget.ListView">
    <item name="android:cacheColorHint">@color/transparent</item>
    <item name="android:divider">@drawable/divider</item>
    <item name="android:dividerHeight">1px</item>
    <item name="android:listSelector">@color/red</item>
</style> 
```

选择工作正常，但是当我开始滚动时，`listSelector`会随机挂到`ListView`. 我将不胜感激任何帮助。

![挂单选择器](../Images/308bf408d986a8391662b4d3a19f8fd5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:14:04.260

主要问题是您使用的是纯色而不是使用 Drawables。布局框架的一个缺点是如果设置纯色，就会出现hold的问题。

您使用的代码：

```
<item name="android:listSelector">@color/red</item> 
```

应该用作：

```
 <item name="android:listSelector">@drawable/list_view_selector</item> 
```

上面写的drawable应该包含在选择器标签中。

这是 list_view_selector 的代码

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_enabled="true" 
     android:state_pressed="true" android:drawable="@drawable/background_selected" />
    <item android:state_enabled="true"
     android:state_focused="true" android:drawable="@drawable/background_selected" />
    <item android:state_enabled="true"
     android:state_selected="true" android:drawable="@drawable/background_selected" />

</selector> 
```

注意：您不能按原样使用纯色。您必须将每种色调的选择器设置为：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:angle="90"
        android:centerColor="#ff0000"
        android:endColor="#ff0000"
        android:startColor="#ff0000" />

</shape> 
```

我已经检查过了。工作完美！！

# php - 并行运行 file_put_contents？

> ID：12755094
> 
> 赞同：5
> 
> 时间：2012-10-05T22:58:02.337
> 
> 标签：php, arrays, curl, foreach

正在寻找stackoverflow的解决方案，但找不到任何接近我想要实现的东西。也许我只是幸福地没有意识到每个人都在解决这个问题的一些神奇的 PHP 酱...... ;)

基本上我有一个数组，包含几百个 URL，指向远程服务器上的不同 XML 文件。我正在做一些神奇的文件检查以查看 XML 文件的内容是否已更改，如果更改了，我会将更新的 XML 下载到我的服务器。

PHP代码：

```
$urls = array(
    'http://stackoverflow.com/a-really-nice-file.xml',
    'http://stackoverflow.com/another-cool-file2.xml'
);
foreach($urls as $url){
    set_time_limit(0);
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FAILONERROR, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, false);
    $contents = curl_exec($ch);
    curl_close($ch);
    file_put_contents($filename, $contents);
} 
```

现在， $filename 设置在其他地方，并根据我的逻辑为每个 xml 提供它自己的 ID。到目前为止，该脚本运行良好，并且运行正常，但运行速度非常慢。我知道我的服务器可以处理更多，我怀疑我的 foreach 正在减慢这个过程。

有什么办法可以加快 foreach 的速度吗？目前我正在考虑将每个 foreach 循环中的 file_put_contents 提高到 10 或 20，基本上将我的执行时间缩短了 10 或 20 倍，但想不出如何以最佳和最高性能的方式来解决这个问题。有关如何进行的任何帮助或指示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T23:38:38.853

您的瓶颈（很可能）是您的 curl 请求，您只能在每个请求完成后写入文件，没有办法（在单个脚本中）加速该过程。

我不知道这一切是如何工作的，但您可以并行执行 curl 请求：http: [//php.net/manual/en/function.curl-multi-exec.php](http://php.net/manual/en/function.curl-multi-exec.php)。

也许您可以获取数据（如果有可用的内存来存储它），然后在它们完成时填写数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T23:07:57.563

只需运行更多脚本。每个脚本都会下载一些 url。

您可以在此处获取有关此模式的更多信息：[http ://en.wikipedia.org/wiki/Thread_pool_pattern](http://en.wikipedia.org/wiki/Thread_pool_pattern)

您运行的脚本越多，您获得的并行度就越多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-15T11:35:27.747

我在并行请求上使用 guzzle pool ;)（您可以发送 x 并行请求）

[http://docs.guzzlephp.org/en/stable/quickstart.html](http://docs.guzzlephp.org/en/stable/quickstart.html)

# ios6 - 从 iOS 6 中的 backtrace_symbols() 获取符号化堆栈跟踪

> ID：12755098
> 
> 赞同：4
> 
> 时间：2012-10-05T22:58:48.493
> 
> 标签：ios6, symbols, crash-reports, backtrace, human-readable

在 iOS 6 之前，调用 callStackSymbols()（也是 -[NSException callStackSymbols] 使用的）将提供人类可读的堆栈帧。但是，在 iOS 6 中，情况不再如此，只为 Apple 库提供地址（例如 57 CoreFoundation 0x367ba5db + 118）。

如何在 iOS 6 中以编程方式获取完全符号化的回溯？

# microsoft-metro - 无法在 Windows 8 中保存状态 [错误类型或命名空间名称“通用”

> ID：12755099
> 
> 赞同：1
> 
> 时间：2012-10-05T22:58:52.827
> 
> 标签：microsoft-metro, state-management, windows-store-apps, windows-store

无法在 Windows 8 中保存状态

```
{ 
Error   The type or namespace name 'Common' ...does not exist in the namespace 'ProjectName' (are you missing an assembly reference?) 
} 
```

下面的所有内容都是我的 App.Xaml.cs 文件中的默认代码，我添加的唯一行是

```
 ProjectNameSpace.Common.SuspensionManager.RegisterFrame(rootFrame, "appframe"); 
```

这是来自这里的 windows 8 教程，我在尝试这个[http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx)之前遵循了第 1 部分。我让它在另一个具有相同引用和 using 语句的项目中工作。项目中只有一个命名空间，我什至重建/清理过。有人有任何额外的信息吗？

```
protected override void OnLaunched(LaunchActivatedEventArgs args)
        {
            Frame rootFrame = Window.Current.Content as Frame;
            if (rootFrame == null)
            {
                rootFrame = new Frame();
                ProjectNameSpace.Common.SuspensionManager.RegisterFrame(rootFrame, "appframe"); 
                if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
                {
                }

                Window.Current.Content = rootFrame; 
```

**编辑：** 问题是我需要在空白模板中添加一个基本页面。此自动生成执行基本功能所需的一些类。下面是公用文件夹需要包含的最少项目的屏幕截图。 ![公用文件夹截图](../Images/888daa0d8cf24f77a451634a9d032719.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:24:10.370

您的项目中有 Common 文件夹吗？此文件夹通常包含在 Visual Studio 2012 应用程序项目模板（空白应用程序模板除外）中，其中包含一堆具有用于布局、样式和其他功能的样板代码的类。

如果您使用空白应用模板创建项目，您可能没有此模板。要包含它，请创建一个新的基本页面（右键单击您的项目 > 添加 > 新项目 > (Visual C#)* > 基本页面），Visual Studio 将询问您是否要创建这些文件。

*我不确定这对于 VB .NET 或 WinJS 是什么，但我认为它是相同的结构。

# vba - VBA 无法获取工作表类的 StDev 属性

> ID：12755102
> 
> 赞同：0
> 
> 时间：2012-10-05T22:59:02.970
> 
> 标签：vba, runtime-error, worksheet-function

我正在尝试运行一个通过数据表并计算列 G 到 R 的标准偏差的宏。每次运行程序时，我都会收到运行时 1004 错误，说它无法获取的 StDev 属性工作表函数类。大约两周前我运行它时没有这个错误，所以我不知道该怎么办。这是发生错误的代码部分。

```
For i = 1 To lastFilledRow

    standardDeviationT = WorksheetFunction.StDev(Range("G" + CStr(i) + ":R" + CStr(i)))
    Range("AB" & CStr(i)) = standardDeviationT

Next i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:29:23.687

StDev 函数至少需要传递两个数字。如果您的 Range 只有 0 或 1 个值，则该函数将失败并引发错误。为了确保你至少通过了 2，我建议先调用 Count：

```
For i = 1 To 100
    If WorksheetFunction.Count(Range("G" + CStr(i) + ":R" + CStr(i))) >= 2 Then
        standardDeviationT = WorksheetFunction.StDev(Range("G" + CStr(i) + ":R" + CStr(i)))
        Range("AB" & CStr(i)) = standardDeviationT
    End If
Next i 
```

此外，如果您使用的是现代 Excel IE 2010，您可能需要考虑切换到使用 StDev_S，因为 Micorsoft 建议这样做。这是[MSDN 在 StDev 上](http://msdn.microsoft.com/en-us/library/office/ff839479.aspx)的一个尝试。

> 此功能已被一个或多个新功能所取代，这些功能可以提供更高的准确性，并且其名称可以更好地反映其用途。此函数仍可用于与早期版本的 Excel 兼容。但是，如果不需要向后兼容，您应该考虑从现在开始使用新功能，因为它们更准确地描述了它们的功能。
> 
> 有关新函数的详细信息，请参阅[StDev_S](http://msdn.microsoft.com/en-us/library/office/ff835583.aspx)方法。

# python - 为什么必须将 self 传递给 python 实例方法？有没有理由通过别的东西呢？

> ID：12755104
> 
> 赞同：0
> 
> 时间：2012-10-05T22:59:10.320
> 
> 标签：python, oop

> **可能重复：**
> [Python 'self' 关键字](https://stackoverflow.com/questions/6019627/python-self-keyword)

在 Python 中，实例方法必须将实例作为参数传递给它们，例如：

```
class Foo:
    def bar(self):
         print self.name 
```

明确说明的目的是什么？（它只是隐式 < 显式吗？）在什么情况下你会想要传递“self”以外的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:02:46.943

Python 实例方法只是绑定到实例的函数。当被调用时，实例总是将自己作为第一个参数传递。

这个名字`self`只是一个约定。你可以随意称呼它。所以你可以这样做：

```
class Foo:
    def bar(s):
         print s.name 
```

但是不要，因为它违反了惯例。:)

# objective-c - 为什么我不能将 UIScrollView 添加到 UIImageView （它工作正常）

> ID：12755105
> 
> 赞同：0
> 
> 时间：2012-10-05T22:59:18.200
> 
> 标签：objective-c, uiscrollview, uiimageview, storyboard, uiscrollviewdelegate

我正在开发一个应用程序。在这里，我描述了我遇到的一个奇怪问题的简化版本。

我有一个情节提要创建的视图控制器，其中 UIImageView 也在情节提要中创建。

然后我有以下 h 和 m 文件，旨在将 UIScrollView 添加到 UIImageview 并为滚动视图提供容器。

h 文件：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (strong, nonatomic) IBOutlet UIImageView *imageView;

@property (nonatomic, strong) UIScrollView* scrollView;
@property (nonatomic, strong) UIView* container;

@end 
```

.m 文件：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImage *image = [UIImage imageNamed: @"new_phots_fake_port.png"];
    //Add the image to the imageView I created in the Storyboard
    [_imageView setImage:image];

    _scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(60.0, 70.0, 522.0, 100.0)];
    [_scrollView setBackgroundColor:[UIColor yellowColor]];

    // Set up the container view to exist inside the scrollview:
    CGSize containerSize = CGSizeMake(5000.0f, 730.0f);
    _container = [[UIView alloc] initWithFrame:(CGRect){.origin=CGPointMake(0.0f, 0.0f),       .size=containerSize}];
    _container.backgroundColor = [UIColor redColor];
    // Tell the scroll view the size of the contents
    self.scrollView.contentSize = containerSize;
    [_scrollView addSubview:_container];

    [_imageView addSubview:_scrollView]; //This is what I want but doesn't allow scrolling

    //[self.view addSubview:_scrollView];  //This allows scrolling but makes the imageView      and Scrollview siblings.  I need scrollview to be a child of imageview
   }

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

因此，滚动视图似乎无法添加到图像视图中（并且功能正常）。 **为什么**？我究竟做错了什么？

奇怪的是，我也没有使用任何委托方法 viewForZoomingInScrollView 或 scrollViewDidZoom。我不确定为什么不需要这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:06:40.840

您需要在`UIImageView`

```
_imageView.userInteractionEnabled = YES; 
```

# javascript - 是否有任何流行的 JavaScript 库包含 String.prototype.format 或等效的？

> ID：12755109
> 
> 赞同：2
> 
> 时间：2012-10-05T22:59:38.323
> 
> 标签：javascript

是否有任何流行的 JavaScript 库，如[jQuery](http://jquery.com/)、[Underscore.js](http://documentcloud.github.com/underscore/)或类似的实现`'Hello {0}!'.format('World');`或等效的库？

与不包含它的字符串连接相比，这是 JavaScript 中的一种不好的做法，还是它只是被忽略或被认为过于专业而无法包含在流行的库中？或者，还有别的原因吗？

*（请不要用 String.prototype.format 的实现来回答，我要求的是我可能忽略的流行库中的功能。）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:46:35.387

MooTools 在字符串原型上有一个 .substitute 函数，看起来它可以做你想做的事。请参阅：[http](http://mootools.net/docs/core/Types/String#String:substitute) ://mootools.net/docs/core/Types/String#String:substitute 。

Prototype.js 有一个类似的 .interpolate 函数。见：[http ://api.prototypejs.org/language/String/prototype/interpolate/](http://api.prototypejs.org/language/String/prototype/interpolate/)

有些人会争辩说，修改原始原型是不好的做法，因为它可能会破坏每个循环的一些常见但格式不正确的内容。

另一方面，谷歌的闭包库定义了一个全局的 goog.string.format 函数，而不是在字符串原型上，它做同样的事情。请参阅：[http ://closure-library.googlecode.com/svn/docs/namespace_goog_string.html#goog.string.format](http://closure-library.googlecode.com/svn/docs/namespace_goog_string.html#goog.string.format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:07:34.667

实际上，您可以自己轻松编写这样的方法。由于 ECMAscript 不是一种严格类型的语言，您可以让您的生活更加轻松。例子：

```
String.prototype.sFormat = function _simpleFormat( map ) {
    var myString    = this.toString(),
        args        = map instanceof Array ? map : Array.prototype.slice.call( arguments );

    while( ~myString.indexOf( '%r' ) ) {
        myString = myString.replace( '%r', args.shift() );
    }

    return myString;
}; 
```

从那时起，我们可以像

```
var foo = "Hello",
    bar = 42;

"%r world, the answer is %r".sFormat( foo, bar ); // "Hello world, the answer is 42" 
```

# javascript - 从 jquery 函数中调用 @(Html.Kendo().Grid

> ID：12755111
> 
> 赞同：0
> 
> 时间：2012-10-05T22:59:41.957
> 
> 标签：javascript, kendo-ui

我正在使用 razor asp.net mvc 4 显示剑道网格​​。我有一系列按钮，每个按钮显示不同的网格。因此，我在单击时使用 jquery 来获取按钮事件。然后我只是清除 dom 的网格部分，并在其位置重新加载新网格。也就是说，我不想使用 href 重新加载整个页面，因为只想加载一个部分。

我的问题是，我如何从 jQuery 中调用 @(Html.Kendo().Grid，因为它通常甚至不位于脚本中，并且当放入脚本中时，会显示所有语法错误。

正如你所看到的，我对模型或函数的使用不是很熟练，如果一个函数是答案，放在哪里。任何帮助，将不胜感激。

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:51:56.983

我不确定您是否正在尝试在两个网格之间来回切换，或者您是否正在尝试返回服务器以获取更新的数据。

第一种方法更简单。让我知道这是否适合您：

基本上，为两个网格编写代码（因此它们都在页面加载时初始化），但关闭一个的可见性。然后，使用 jQuery 在单击时切换两个网格的可见性。

**jQuery**

```
function toggleGridView(on, off) {
    var gridToShow = "#Grid" + on + "Container";
    var gridToHide = "#Grid" + off + "Container";
    $(gridToShow).show();
    $(gridToHide).hide();
} 
```

**查看标记**

```
<a class="k-button" href="#_" onclick="toggleGridView('1', '2')">Show Grid 1</a>
<a class="k-button" href="#_" onclick="toggleGridView('2', '1')">Show Grid 2</a>

<div id="container">
<div id="Grid1Container">
    @(Html.Kendo().Grid(Model.UserModel.UserAddressBook)
        .Name("Grid1")
        .Columns(columns =>
        {
            columns.Bound(i => i.CompanyName).Width(120).HtmlAttributes(new { id = "CompanyName" });
            //Other column data
        })
    )
</div>
<div id="Grid2Container" style="display:none;">
    @(Html.Kendo().Grid(Model.UserModel.UserProductBook)
        .Name("Grid1")
        .Columns(columns =>
        {
            columns.Bound(i => i.Description).Width(120).HtmlAttributes(new { id = "Description" });
            //Other column data
        })
    )    
</div> 
```

![结果](../Images/29fe087325584743df181bbd046d4f51.png)

# c# - 如何在 C# 中启用此计时器？

> ID：12755115
> 
> 赞同：0
> 
> 时间：2012-10-05T23:00:23.690
> 
> 标签：c#, timer, sequence

我已经开始了 c# 课程，但我无法让我的计时器运行。它可能很简单，我只是在这里错过了一些东西。基本上我有一个按钮来启动和停止红绿灯序列。我想要1秒的间隔。这是我写的。当我按下开始时，它没有按预期工作。谢谢你。

```
 }
    public int counter = 0;

private void rbStart_CheckedChanged(object sender, EventArgs e)
{

    counter++;

    if (counter == 1)
    {
        pbRed.Visible = true;
        pbAmber.Visible = false;
        pbGreen.Visible = false;
    }
    else if (counter == 2)
    {
        pbRed.Visible = true;
        pbAmber.Visible = true;
        pbGreen.Visible = false;
    }
    else if (counter == 3)
    {
        pbRed.Visible = false;
        pbAmber.Visible = false;
        pbGreen.Visible = true;
    }
    else if (counter == 4)
    {
        pbRed.Visible = false;
        pbAmber.Visible = true;
        pbGreen.Visible = false;
    }
    else if (counter == 5)
    {
        pbRed.Visible = true;
        pbAmber.Visible = false;
        pbGreen.Visible = false;
    }
    else
    {
        counter = 0;
    }
}

private void rbStop_CheckedChanged(object sender, EventArgs e)
{

    pbRed.Visible = false;
    pbAmber.Visible = false;
    pbGreen.Visible = false;
}

private void Form1_Load(object sender, EventArgs e)
{
    Light_timer.Tick += new EventHandler(rbStart_CheckedChanged);
    Light_timer.Interval = 1000;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:06:07.553

Interval 属性仅指定 Tick 事件之间经过的时间。您可能需要考虑一个单独的变量来跟踪灯的“状态”，然后在事件处理程序中使用每个“Tick”来“碰撞”该变量。然后只需调整您的 UI 元素以反映交通灯的正确状态。你可能有一个“停止”状态、一个“小心”状态和一个“绿色”状态，你的灯可能只是在每个滴答声之间“循环”。我会让你写细节，因为它似乎是一项任务。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:17:55.997

我认为您可能误解了 Timer 的工作原理。Timer.Tick[事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.tick.aspx)在 Interval 已过时触发。Timer 使用间隔来确定在滴答之间运行多长时间。它的值永远不会被定时器改变。实际上，System.Windows.Forms.Timer 无法检索经过的时间，这意味着您需要自己的不依赖于它的状态跟踪机制。好好看看我上面引用的页面上的例子，确保你理解它是如何工作的，然后再试一次。

# c++ - 如何获取小时、分钟和秒

> ID：12755116
> 
> 赞同：9
> 
> 时间：2012-10-05T23:00:30.623
> 
> 标签：c++, boost, boost-date-time

```
const boost::posix_time::ptime now= boost::posix_time::second_clock::local_time();

year_ = now.date().year();
month_ = now.date().month();
day_ = now.date().day(); 
```

这就是我从 boost::posix_time::ptime 中获得年、月和日的方法，但我不知道如何获得小时、分钟和秒。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-06T14:01:52.177

答案是

```
now.time_of_day().hours(); 
now.time_of_day().minutes();
now.time_of_day().seconds(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:21:01.667

```
Hours_=now.time_duration().hours;
... 
```

# java - 使用 Java 可以强制对话框字体默认为 Arial

> ID：12755120
> 
> 赞同：1
> 
> 时间：2012-10-05T23:01:05.883
> 
> 标签：java, swing, fonts, jtree

我有一个应用程序在 Unix 中使用默认的金属外观。对于 Solaris 10，这意味着 Dialog 字体被翻译为 Arial。对于 Solaris 11，字体文件已移动，因此我的字体已更改。除了我的应用程序中的文件之外，我无法更改任何文件，因此更改 fontconfig.properties 不是一种选择。

1) 有没有办法在应用程序的开头说 Dialog=Arial (and Dialog.Bold = Arial.Bold)？

2）由于我找不到执行上述操作的方法，我一直在使用 UIManager.put("Menu.font", new Font("Arial, Font.BOLD, 12)) 命令。这似乎有效（希望我不会错过小部件类型）但是我的 JTree，当我使用默认值时没有使用 Label.font，当我调用 UIManager.put("Label.font", new Font （“Arial，Font.BOLD，12））。即使我也有 UIManager.put("Tree.font", new Font("Arial, Font.PLAIN, 12)) 也会发生这种情况。

使用默认值，我的标签是粗体的，而我的树不是。您对这可能会发生什么以及如何将这两种字体分开以便我可以强制它们为 Arial 但标签为粗体和 JTree 纯文本有任何建议吗？

设置 UI 管理器是应用程序要做的第一件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:11:02.767

> 组合框或按钮上的一些值被截断，因为字体现在更大了。

当然*截断*文本是[可憎](https://stackoverflow.com/a/12532237/230513)的，但调整`Font`大小不是解决方案。相反，请使用合适的布局和`pack()`封闭`Window`的 ，“导致此窗口的大小调整为适合其子组件的首选大小和布局”。这个[例子](https://stackoverflow.com/a/5630271/230513)比较了几个平台上的同一个程序，每个平台都有不同的物理字体映射到默认字体系列。

由于这种方法本质上相当通用，因此它可能有助于编辑您的问题以包含一个展示您遇到的特定问题的[sscce](http://sscce.org/)。

另请参阅[*我应该避免在 Java Swing 中使用 set[Preferred|Maximum|Minimum]Size 方法吗？*](https://stackoverflow.com/q/7229226/230513)

# ios - 使用单个 IBAction 方法处理多个 UISwitch

> ID：12755121
> 
> 赞同：1
> 
> 时间：2012-10-05T23:01:10.470
> 
> 标签：ios, uiswitch

我有以下 IBAction 链接到我的应用程序中的多个开关。我想弄清楚点击了哪个开关。每个 UISwitch 都有一个特定的名称。我想要那个名字。

```
- (IBAction)valueChanged:(UISwitch *)theSwitch { //Get name of switch and do something... } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:07:24.277

IBAction 将指针传递给执行该操作的交换机。您可以从中获得任何财产。

比较开关：

```
- (void)valueChanged:(UISwitch *)theSwitch {

    if ([theSwitch isEqual:self.switch1]) {
        NSLog(@"The first switch was toggled!");
    }
    else if ([theSwitch isEqual:self.switch2]) {
        NSLog(@"The second switch was toggled!");
    }
    else {
        NSLog(@"Some other switch was toggled!");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T23:10:31.377

您可以使用标签：

创建开关时，您需要设置它们的标签。

```
- (IBAction)valueChanged:(UISwitch *)theSwitch { 
    switch(theSwitch.tag){
        case 0:
        {
            //things to be done when the switch with tag 0 changes value
        }
        break;
        case 1:
        {
            //things to be done when the switch with tag 0 changes value
        }
        break;
        // ...
        default:
        break;
    }
} 
```

或者检查开关是否是您的控制器属性之一

```
- (IBAction)valueChanged:(UISwitch *)theSwitch { 
    if(theSwitch == self.switch1){
        //things to be done when the switch1 changes value
    } else if (theSwitch == self.switch2) {
        //things to be done when the switch2 changes value
    }// test all the cases you have
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T23:35:14.533

UISwitch 没有 name 属性。但是您可以将其子类化并为子类添加名称属性。然后从子类而不是 UISwitch 创建开关，并在初始化时为它们命名。

```
@class MySwitch : UISwitch
@property (nonatomic, retain) NSString* name;
@end 
```

然后事件处理程序可以访问它们的名称字符串：

```
- (IBAction)valueChanged:(MySwitch *)theSwitch { 
    NSLog(@"switch %@ value changed", theSwitch.name);
} 
```

但我认为更好的答案是使用已经存在的标签字段并使用整数标签来识别开关而不是字符串。您可以在代码中创建枚举常量来命名标记值：

```
enum { SomeSwitch = 1, AnotherSwitch = 2, MainSwitch = 3 } _SwitchTags; 
```

最好的答案是@Moxy 提到的将开关的指针与控制器的属性进行比较以确定哪个开关发生了变化。这就是我在我的代码中所做的。从长远来看，标签和名称太容易出错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T23:08:30.573

我不感谢你能得到那个开关的名字。您可以标记每个开关，并使用该标记来确定开关的名称。

# redmine - 使用 chiliproject 比 redmine 有什么优势？

> ID：12755122
> 
> 赞同：3
> 
> 时间：2012-10-05T23:01:40.830
> 
> 标签：redmine, chiliproject

[这个问题已经存在](https://stackoverflow.com/q/6502645/171711)，但它现在已经有一年多了，如果文档是一个好的判断，可能已经发生了很多事情。例如，[没有记录](https://www.chiliproject.org/projects/chiliproject/wiki/Migrate_From_Redmine)从当前 redmine (2.1) 迁移到 chiliproject 的路径。

[Chiliproject](https://www.chiliproject.org)是[redmine](http://www.redmine.org)的一个分支，但我无法决定我应该迁移到哪里。关于我应该如何进行迁移以及我可能会丢失多少功能，并没有明确的路径。

有没有办法比较两个项目之间的差异？花时间调查迁移路径是否值得？

如果您已经迁移，您的经验是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:32:26.657

我在 StackOverflow 中搜索了“redmine vs. chiliproject”问题，因为在最新的 chiliproject 版本上安装任何类型的插件时遇到了很多麻烦。

[通常，在您尝试更新插件的设置（例如，安装联系表单](http://projects.andriylesyuk.com/projects/redmine-contact)插件并尝试更改某些内容）之前，看起来一切正常`http://SERVER:3000/settings?tab=contact_form`，调试日志显示更改是在数据库中进行的，但是他们的更改永远不会加载回插件页面。

我一直没有找到任何关于 ChiliProject 中插件架构的潜在变化的文档，这会导致这种情况。[插件页面](https://www.chiliproject.org/projects/chiliproject/wiki/Plugins)也没有列出许多已知可与 ChiliProject 3 一起使用的插件。

**TL;DR**：如果您认为您有任何愿望使用任何现有插件来扩展您选择的程序的功能，请使用 Redmine。

# javascript - 如何从javascript中的pagemethod检索类

> ID：12755123
> 
> 赞同：0
> 
> 时间：2012-10-05T23:01:50.317
> 
> 标签：javascript, asp.net

我想使用 Pagemethod 将类返回到 javascript。是否需要在客户端和服务器端创建相同的类构造？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:23:56.140

我想通了。我在 vb.net 上使用以下代码

```
 <WebMethod()> _
      Public Shared Function checkTime(ByVal ID As Integer) As Integer()

      Do something and return the value
      End Function 
```

在调用该方法的 javascript 上：

```
 PageMethods.checkTime(ID, OncheckTimeComplete, OncheckTimeError, senderInfo); 
```

# java - java.security.NoSuchProviderException：没有为 S/MIME 配置提供程序

> ID：12755126
> 
> 赞同：0
> 
> 时间：2012-10-05T23:02:24.527
> 
> 标签：java, jakarta-ee, pkcs#12

我一直在努力解决我的问题，但我无法 u_u

好吧，走着瞧。我需要发送一封电子邮件（我可以这样做），但最后一个要求是我需要附加证书（SSL），这就是问题所在。这是我的代码：

```
 // @param _smimePw         keystore password = "techbrainwave"
    // @param _alias         keystore password = "certificatekey"

    // get the S/MIME EncryptionUtilities
    ##EncryptionUtils smimeUtils = EncryptionManager.getEncryptionUtils(EncryptionManager.SMIME);##

    // load the S/MIME keystore from the given file.
    char[] smimePw = new String("techbrainwave").toCharArray();
    EncryptionKeyManager smimeKeyMgr = smimeUtils.createKeyManager();
    smimeKeyMgr.loadPrivateKeystore(new FileInputStream(new File("C:\\j2sdk1.4.2_18\\bin\\truststore.jks")), smimePw);

    // get our keys.
    java.security.Key smimeKey = smimeKeyMgr.getPrivateKey("certificatekey", smimePw);

    msg.setContent(parts);

    // write smime message.
    MimeMessage smimeSignedMsg = smimeUtils.signMessage(mailSession, msg, smimeKey);
    Transport tr = mailSession.getTransport("smtp");
    tr.connect(SMTPServer, "", "");
    smimeSignedMsg.saveChanges(); // don't forget this
    tr.sendMessage(smimeSignedMsg, smimeSignedMsg.getAllRecipients());
    tr.close(); 
```

标记的行是以下异常导致我的代码崩溃的地方：

> java.security.NoSuchProviderException：在 net.suberic.crypto.EncryptionManager.getEncryptionUtils(EncryptionManager.java:99) 处没有为 S/MIME 配置提供程序

我从这个链接中举了一个例子：

[http://blog.jservlet.com/post/2008/01/03/How-to-use-Javamail-Crypto-with-S/MIME-provider?pub=0#pr](http://blog.jservlet.com/post/2008/01/03/How-to-use-Javamail-Crypto-with-S/MIME-provider?pub=0#pr)

我希望你能帮助我。我有两天时间遇到这个问题，我不知道问题出在哪里。我尝试做的是将 SSL 证书附加到我的邮件中，这是我的问题的简历。如果有其他方法可以解决它，我将不胜感激。

提前致谢。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:31:58.590

此错误`java.security.NoSuchProviderException`表示未找到提供此服务的组件。
我不确定 java 的默认提供程序是否确实提供了这个。如果您已经切换到不受限制的文件，我猜您需要第三方提供商。
使用`Bouncy Castle`并通过快速谷歌搜索，在您的情况下需要[提及](http://osdir.com/ml/java.javamail.crypto-api.devel/2006-07/msg00002.html)以下内容（对于像您这样的问题）：

```
javamail-crypto.jar  

javamail-crypto-bouncycastle-smime.jar  

and bouncy castle libraries. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T10:09:31.467

当我使用 BouncyCastle 库“..jdk15on-149.jar”时，我遇到了同样的异常。但是使用旧版本“..jdk16-1.46.jar”它可以工作:)

# c - 原子比较（不等于）和交换

> ID：12755130
> 
> 赞同：6
> 
> 时间：2012-10-05T23:02:51.167
> 
> 标签：c, multithreading, gcc, compare-and-swap

我想使用原子比较和交换，但不是等于，我只想在内存位置不等于旧值时进行交换。在C中可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:56:22.817

这个怎么样：

```
void compare_and_swap_if_not_equal(word_t const required_non_value, word_t const new_value, word_t* ptr_to_shared_variable) { 
    for (;;) {
        word_t const snapshot_value = *ptr_to_shared_variable;
        if (required_non_value == snapshot_value) {
            break;
            // or (sleep and) 'continue;', if you want to wait for the stored value to be different 
            // -- but you might of course miss a transient change to a different state and back.
        } else { 
            if (compare_and_swap_if_equal(ptr_to_shared_variable, snapshot_value, new_value)) {
                // we know the stored value was different; if this 'theory' still matches reality: swap! done!
                break;
            }
        }
    }
} 
```

未经测试。未编译。使用'const'是因为我喜欢这样:)。'word_t' 是一个类型占位符，我不知道真正的类型应该是什么。而且我不知道在 stdatomic.h 中如何调用“compare_and_swap_if_equal”。

（添加） atomic_compare_exchange_weak() 是票。出于某种原因，它需要一个指向“预期”参数的指针，因此您必须将上面的代码修改为

> 如果 (atomic_compare_exchange_weak(ptr_to_shared_variable, &snapshot_value, new_value)) ...

“弱”版本应该在上面的代码中工作；虚假地返回“false”只会在循环中增加另一个行程。仍未编译，未经测试；不要在家里依赖这个代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:32:52.133

这取决于您的架构，但通常在 C 中不可能做到这一点。

通常，比较和交换是使用从内存中的某个位置**原子**加载并在内存中的位置与您指定的某个现有值匹配时将值存储到该位置的指令来实现的。

至少在 x86 上，没有规定仅在值不匹配时才执行此加载。也不清楚你为什么想做这样的事情。也许另一种架构会支持这样的东西，但这将取决于架构，而不是可以在 C 中以可移植方式完成的事情。

# uitableview - 如果表格的多个部分可见，则 UITableViewCell 中带有标签的 UITextfield 返回 null

> ID：12755136
> 
> 赞同：0
> 
> 时间：2012-10-05T23:03:37.350
> 
> 标签：uitableview, uitextfield

我有一个带有 4 个不同原型单元的静态 UITableView。我没有使用包括开关在内的 1 个可重用单元，而是使用了 3 个不同的“switchcell-prototypes”，switchCell1 - to switchCell3（我很懒）。第一个 switchCell 与我制作的 textBoxCell 位于表格的第 1 部分。其他 2 个 switchCells 在第 2 节中。我正在使用标签访问单元格内的开关和文本框。

只是为了尝试一下，我更改了我的代码，以便 tableview 现在只有一个部分。现在显示所有内容，无需切换到隐藏某些单元格。似乎这不是 2 个部分的问题，而是在其中包含文本字段的部分之后出现了单元格。诡异的。

开关和文本框的属性很强。

这就是我访问开关和文本框的方式：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

switchCellLabel = (UILabel *)[cell viewWithTag:10];
dailyLimitSwitch = (UISwitch *)[cell viewWithTag:20];

[dailyLimitSwitch setOn:[settings boolForKey:@"limitBool"]];

textBoxCellLabel = (UILabel *)[cell viewWithTag:30];
dailyLimitEntry = (UITextField *)[cell viewWithTag:40]; 
```

这是其中一个开关的操作：

```
- (IBAction)dailyLimitSwitch:(id)sender {

if ([settings boolForKey:@"limitBool"]==NO) {
    [settings setBool:YES forKey:@"limitBool"];
}else if ([settings boolForKey:@"limitBool"]==YES){
    [settings setBool:NO forKey:@"limitBool"];
    [settings setDouble:(0) forKey:@"limitDouble"]; 
```

我也在对文本框使用相同的操作。`- (IBAction)dailyLimitEntry:(id)sender`

所以，这是我的 UITextField 的完整 IBAction 我基本上从 UITextField 中获取字符串，将其变成一个数字以检查用户是否输入了实数，然后我创建一个整数来查看它是否是十进制数，因为我只想要整数，然后我将条目“保存”在一些 NSUserDefaults 中。就像最初发布的一样，只要表格的一部分可见，它就可以工作。一旦我在第二部分中显示开关，文本字段就会返回 null。

```
- (IBAction)dailyLimitEntry:(id)sender {

NSNumberFormatter *newLimitFormatter = [[NSNumberFormatter alloc]init];

[newLimitFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[newLimitFormatter setMaximumFractionDigits:3];

NSNumber *newLimitNr = [[NSNumber alloc]init];
newLimitNr = [newLimitFormatter numberFromString:dailyLimitEntry.text];

double newLimitDouble = [[newLimitFormatter numberFromString:dailyLimitEntry.text]doubleValue];

int newLimitInt = [newLimitNr intValue];

if (newLimitNr == nil || (newLimitDouble - newLimitInt)>0) {

    UIAlertView *invalidLimitAlert = [[UIAlertView alloc]initWithTitle:@"Limit" message:@"Invalid limit" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];

    [invalidLimitAlert show];

}else{

    [settings setDouble:newLimitDouble forKey:@"limitDouble"];

    if (![settings doubleForKey:@"countDouble"]==0) {
        double newRemainingDouble = [settings doubleForKey:@"limitDouble"]-[settings doubleForKey:@"countDouble"];

        [settings setDouble:newRemainingDouble forKey:@"remainingDouble"];

    }else if ([settings doubleForKey:@"countDouble"]==0){
        double newRemainingDouble = [settings doubleForKey:@"limitDouble"];

        [settings setDouble:newRemainingDouble forKey:@"remainingDouble"];
    }
}

[dailyLimitEntry resignFirstResponder]; 
```

}

最后是我的 cellForRowAtIndexPath ：（这是一切仍然有效的地方。我从 IB 中添加了我的新“switchcells”，方法是像此处的 switchcell 一样引用它们，并将数字 1 和 2 添加到标识符（switchcell1 和 switchcell2），以便它们是不同的。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

NSUInteger section = [indexPath section];
NSUInteger row = [indexPath row];

if (section == 0 && row == 0) {
    cellIdentifier = @"switchCell";
}
if (section == 0 && row == 1) {
    cellIdentifier = @"textBoxCell";
}

NSArray *labelsForCurrentSection = [sectionLabels objectAtIndex:section];

NSString *labelForCurrentCell = [[NSString alloc]init];

labelForCurrentCell = [labelsForCurrentSection objectAtIndex:row];

cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

switchCellLabel = (UILabel *)[cell viewWithTag:10];
dailyLimitSwitch = (UISwitch *)[cell viewWithTag:20];

[dailyLimitSwitch setOn:[settings boolForKey:@"limitBool"]];

textBoxCellLabel = (UILabel *)[cell viewWithTag:30];
dailyLimitEntry = (UITextField *)[cell viewWithTag:40];

switchCellLabel.text = labelForCurrentCell;
textBoxCellLabel.text = labelForCurrentCell;

if ([settings doubleForKey:@"limitDouble"]==0) {
    dailyLimitEntry.text = @"";
}else{

NSString *dailyLimitStr = [[NSString alloc]initWithFormat:@"%0.f",[settings doubleForKey:@"limitDouble"]];
dailyLimitEntry.text = dailyLimitStr;

}

return cell; 
```

}

这是问题所在：所有开关和文本框都通过 IBAction 链接到界面。无论第二部分是否可见，我都可以使用所有 3 个开关设置我的用户默认值。但是如果我的第二部分不可见，则文本字段返回它的值，如果可见则返回 null。

有任何想法吗？这真的让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T23:49:40.113

我解决了我的问题，现在它正在处理我的 UITextField 单元格之后的多个部分和单元格。

这是我所做的：

*   创建一个包含 UITextField 的原型单元格
*   通过 IBAction“didEndOnExit”将 UITextField 连接到 .h
*   在 cellForRowForIndexPath 中设置 UITextField-Cell 时，像这样引用 UITextField `dailyLimitEntry = (UITextField *)[cell viewWithTag:35];`（这样，可以通过 dailyLimitEntry.text 从 userdefaults 中设置内容
*   在 UITextField 的 didEndEditing 的 IBAction 中，`- (IBAction)dailyLimitEntry:(id)sender`我从发送者返回给我的任何内容中访问 UITextField 的内容。为此，我设置了一个像这样的临时变量`UITextField *cellDailyLimitEntryTextField= (UITextField*)sender;`（长变量名只是为了让我记得稍后回来时我做了什么。
*   现在我可以通过检索文本字段的值`cellDailyLimitEntryTextField.text`并继续执行我的其余代码。

UITextField 现在的行为就像它甚至不在 tableview 的单元格中一样，并且获取和设置内容是直截了当的。

这对 Apple 是否合适，我会在提交我的应用程序后立即知道。但我基本上是为自己制作我想要的应用程序 ;-)

顺便说一句，不需要 UITextFieldDelegate 及其方法。我认为设置我的单元格会创建一个 UITextField 的实例，我没有正确访问它来接收内容。就像我在问题中所说的那样，只要 UITextFieldCell 后面没有更多单元格，一切都会正常工作。现在我已经将我的 UITableView 打开到它的初始状态，有 2 个部分，并且它可以工作。

如果您喜欢我对我的问题的回答，请投票。

# java - 为什么将队列实现为循环数组？

> ID：12755139
> 
> 赞同：11
> 
> 时间：2012-10-05T23:04:19.050
> 
> 标签：java, data-structures, queue, fifo

在实现像队列这样的 FIFO 时，我的导师总是建议我们将其表示为循环数组而不是常规数组。为什么？

是因为在后者中，我们最终会在数组中拥有垃圾数据吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T23:11:14.150

如果您使用固定数量的 Array-Slots/Elements，则更容易以循环排列方式回收您的插槽，因为您不需要重新排序您的元素。每当第一个元素在类似数组的排列中被移除时，您必须将剩余的元素移动一个位置到前面，所以头部不是`null`。在您的循环队列中，您只需将指针增加到第一个位置。这减少了更新操作，并为您提供了更好的性能。

如果您正在构建一个具有无限/动态插槽数的队列，这并不重要，因为您可以动态释放和分配内存。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T23:24:35.963

我给你打个比方。

想象一下街头小贩的队列，人们在队伍的末端加入并从前面得到服务。当每个人都得到服务时，队列中剩余的人会向前移动（通常会咕哝着要花多长时间），最后会有新人加入。在这个例子中，人们必须向前移动才能让其他人加入队伍，否则队列的末端总是会离供应商越来越远。所以在这个例子中，服务器站在队列的最前面，处理前面的人或没有人。

现在想象一下，如果人们没有移动，而是在服务于队列头部之后，卖家自己沿着队列进一步移动，实际上移动到队列头部所在的位置。最终，在为 100 人服务后，服务器位于街道的中途，而在 500 人之后，服务器现在位于下一条街道等......它停在哪里？

因此，为方便起见，卖家绘制了一个大的环形区域，人们总是可以加入队列的末端，他总是移动到下一个人，但队列仍然在一个地方。他只是绕着队列为人们服务。当然他只能为排队的人服务，但只要他做得足够大，就可以跟上需求，而且他不必离开指定的销售区域。

将此类比回计算机……在第*一个*示例中，有一个队列管理器，并且在为项目提供服务时，它沿缓冲区对项目进行洗牌。在*第二个*示例中，程序运行直到没有更多的内存可以添加到数组中 = 它的大小是固定的（由空间定义或限制）。在*第三个*示例中，服务器像第二个示例一样移动到队列的头部，但数组是固定的，只有这么多的项目可以加入队列，但它们仍将获得服务 FIFO。

tl; dr：资源的有效管理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T23:18:06.873

想象一个由数组支持的队列，其中索引 0 始终是第一项，索引`n`始终是最后一项。为了从队列中删除一个项目，所有项目 1 到 n 必须向前移动以将索引 1 中的内容放入索引 0。正如您可以想象的那样，这个过程对于大型队列和/或对队列的频繁操作。

通过将数组视为循环缓冲区，当删除一个元素时将队列的头部指向下一个元素变得像单个赋值一样简单，这显然会提高性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-23T06:10:44.727

圆形数组不过是普通数组；只有指针（前/后）在到达终点时会重置到其起始位置。如果不是这种情况并且只有指针可以向前移动，那么我们需要将数组元素交换到顶部。

```
import java.lang.reflect.Array;

/**
 * Based on
 * https://www.youtube.com/watch?v=z3R9-DkVtds
 * Data Structure & Alogorithm: Queue using Circular Array by Ripon Datta
 * 
 * 1) When front and rear are equal there is no data.
 * 2) For each addition rear get incremented to new (empty) position, and for each removal
 *    front get moved right to point to the next available element. 
 * 3) Q Size (N - front + rear) % N :where N is total array size allocated
 * 4) Resize the array as part of adding new element and founding front and rear are equal 
 *    OR size is reached the MAX value.
 * 5) While resizing add the element from front to rear to the new array.
 *  
 */
public class QueueUsingCircularArray<T> {
    T[] array;
    int front = 0;
    int rear = 0;
    int N;
    Class<T> clazz;

    public QueueUsingCircularArray(Class<T> clazz, int size) {
        N = size;
        this.clazz = clazz;
        array = (T[]) Array.newInstance(clazz, N);
    }

    public int size() {
        return (N - front + rear) % N;
    }

    public void add(T data) {
        int size = size();
        if (size == N - 1) {
            resize();
        }
        array[rear++] = data;
        if (rear == N) {
            rear = 0;
        }
    }

    private void resize() {
        int size = size();
        N = N * 2;
        T[] newArray = (T[]) Array.newInstance(clazz, N);
        int i = 0;
        while (size > 0) {
            size--;
            newArray[i++] = array[front++];
            if (front == array.length) {
                front = 0;
            }
        }
        rear = i;
        front = 0;
        array = newArray;
    }

    public T remove() {
        if (size() == 0) {
            return null;
        }
        T data = array[front++];
        array[front - 1] = null;
        if (front == N) {
            front = 0;
        }
        return data;
    }

    public static void main(String[] args) {
        QueueUsingCircularArray ca = new QueueUsingCircularArray(Integer.class, 5);
        ca.add(1);
        ca.add(2);
        ca.add(3);
        ca.remove();
        ca.add(4);
        ca.add(5);
        ca.add(55); //RESIZE
        ca.remove();
        ca.remove();
        ca.add(6);
        ca.add(7);
        ca.add(8);
        ca.add(9);
        ca.add(10);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T23:18:26.673

这主要是性能和简单性的问题。在标准数组中，每次从队列中选择一个元素时，您都必须移动所有元素。使用循环数组，您只需要更新当前指针和大小......效率更高。

# python - 在python中将链接文档_ids数组添加到couchdb文档

> ID：12755142
> 
> 赞同：0
> 
> 时间：2012-10-05T23:04:39.240
> 
> 标签：python, dictionary, couchdb, relationship

我想`links`根据 csv 文件中的数据为每个 couchdb 文档添加一个属性。links 属性的值是一个字典数组，其中包含链接文档的 couchdb`_id`和`linkType`

`links`当我运行脚本时，我收到一个链接错误（请参阅下面的错误信息），如果它不存在，我不确定如何创建 dict 键并添加链接数据，或者`links`如果它确实存在则附加到数组中。

带有链接的文档示例如下所示：

```
{
    _id: p_3,
    name: 'Smurfette'
    links: [
                {to_id: p_2, linkType: 'knows'},
                {to_id: o_56, linkType: 'follows'}
           ]
} 
```

用于处理 csv 文件的 python 脚本：

```
#!/usr/bin/python
# coding: utf-8

# Version 1
# 
# csv fields: ID,fromType,fromID,toType,toID,LinkType,Directional

import csv, sys, couchdb

def csv2couchLinks(database, csvfile):

    # CouchDB Database Connection etc
    server = couchdb.Server()
    #assumes that couchdb runs on http://localhost:5984
    db = server[database]
    #assumes that db is already created

    # CSV file
    data = csv.reader(open(csvfile, "rb")) # Read in the CSV file rb=read/binary
    csv_links= csv.DictReader(open(csvfile, "rb"))

    def makeLink(from_id, to_id, linkType):
        # get doc from db
        doc = db[from_id]

        # construct link object
        link = {'to_id':to_id, 'linkType':linkType}

        # add link reference to array at key 'links'
        if doc['links'] in doc:
            doc['links'].append(link)
        else:
            doc['links'] = [link]

        # update the record in the database
        db[doc.id] = doc

    # read each row in csv file
    for row in csv_links:

        # get entityTypes as lowercase and entityIDs
        fromType = row['fromType'].lower()
        fromID   = row['fromID']
        toType   = row['toType'].lower()
        toID     = row['toID']

        linkType = row['LinkType']

        # concatenate 'entity type' and 'id' to make couch '_id'
        fromIDcouch = fromType[0]+'_'+fromID #eg 'p_2' <= person 2
        toIDcouch = toType[0]+'_'+toID

        makeLink(fromIDcouch, toIDcouch, linkType)
        makeLink(toIDcouch, fromIDcouch, linkType)

# Run csv2couchLinks() if this is not an imported module
if __name__ == '__main__':
    DATABASE = sys.argv[1]
    CSVFILE = sys.argv[2]
    csv2couchLinks(DATABASE,CSVFILE) 
```

错误信息：

```
$ python LINKS_csv2couchdb_v1.py "qmhonour" "./tablesAsCsv/links.csv"
Traceback (most recent call last):
  File "LINKS_csv2couchdb_v1.py", line 65, in <module>
    csv2couchLinks(DATABASE,CSVFILE)   
  File "LINKS_csv2couchdb_v1.py", line 57, in csv2couchLinks
    makeLink(fromIDcouch, toIDcouch, linkType)
  File "LINKS_csv2couchdb_v1.py", line 33, in makeLink
    if doc['links'] in doc:
KeyError: 'links' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:28:25.657

另一种选择是将`if`块压缩为：

```
doc.setdefault('links', []).append(link) 
```

字典的`setdefault`方法检查字典中是否`links`存在，如果不存在，它会创建一个键并将值设为空列表（默认值）。然后它附加`link`到该列表。如果`links`确实存在，它只是附加`link`到列表中。

```
def makeLink(from_id, to_id, linkType):
    # get doc from db
    doc = db[from_id]

    # construct link object
    link = {'to_id':to_id, 'linkType':linkType}

    # add link reference to array at key 'links'
    doc.setdefault('links', []).append(link)

    # update the record in the database
    db[doc.id] = doc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:24:41.783

代替：

```
if doc['links'] in doc: 
```

和：

```
if 'links' in doc: 
```

# c# - 返回未知类的实例？

> ID：12755146
> 
> 赞同：1
> 
> 时间：2012-10-05T23:05:08.773
> 
> 标签：c#

好的，所以，我可能是疯了，但是否有可能返回一个未知类型的值并让它获得函数？

基本上是一个看起来像......

```
public static ?????? Test(char c)
{
    if(c == char)
        return instance of SOMECLASS
    else
        return instance of SOMEOTHERCLASS
}

// so i could do
Test(new char()).SOMECLASS_METHOD();
Test(new int()).SOMEOTHERCLASS_METHOD(); 
```

请&谢谢

编辑：只是补充一下，有没有办法让它出现在智能感知中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:05:48.393

您可以返回`dynamic`（在 C# 4 或更高版本中），它允许您使用动态绑定。

这将允许编写任何方法，并且只有在对象上不存在该方法（或属性）时才会在*运行时失败。*

例如，您可以编写：

```
class Foo { 
   void Bar() { Console.WriteLine("Foo.Bar"); }
}

class Bar { 
   void Baz() { Console.WriteLine("Bar.Baz"); }
}

public static dynamic Test(char c)
{
   if (c == 'f') return new Foo();
   else return new Bar();
} 
```

有了这个，你可以写：

```
Test('f').Bar();
Test('q').Baz();
Test('z').Bar(); // Will raise exception at runtime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:09:37.677

```
public static object Test(char c)
{
    if(c == char)
        return instance of SOMECLASS
    else
        return instance of SOMEOTHERCLASS
}

// so i could do
var r = Test(new char());
if (r is SOMECLASS)
   (r as SOMECLASS).SOMECLASS_METHOD();
var rr = Test(new int());
if (rr is SOMEOTHERCLASS)
   (rr as SOMEOTHERCLASS).SOMEOTHERCLASS_METHOD(); 
```

# asp.net-mvc-3 - 未经授权的 AJAX 请求成功

> ID：12755158
> 
> 赞同：1
> 
> 时间：2012-10-05T23:06:08.020
> 
> 标签：asp.net-mvc-3, jquery

我有以下控制器方法：

```
[HttpPost]
[Authorize(Roles="some_role_actual_user_is_NOT_in")
public ActionResult AJAXMethod()
{
    return Json(new { message = "server message");
} 
```

和带有脚本的页面：

```
function sendReq()
{
    $.ajax({
        type: "POST",
        data: { somedata: "somedata" },
        url: "/Path/To/AJAXMethod",
        success: onAJAXSuccess,
        error: onAJAXError
    });
}

function onAJAXSuccess(response, status, xhr)
{
    alert("success: " + response.message);
    alert(status);
}

function onAJAXError(xhr,status,error)
{
    alert("error: " + status);
    alert(error);
} 
```

当我`sendReq`与非授权角色的用户通话时，AJAX 调用仍然成功 - 回调`onAJAXSuccess`被调用，但`response.message`未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:03:53.043

这是正确的行为。AJAX 调用的`success`时间仅取决于服务器以 200 OK 响应的事实。您需要自己查询返回的响应，以确保它是您期望的格式。

例如：

```
if (typeof response.message != "undefined" && response.message != "") {
   // it worked
}
else {
    // didn't work || user did not have access.
} 
```

# javascript - 在极少数情况下， 不重绘

> ID：12755166
> 
> 赞同：8
> 
> 时间：2012-10-05T23:07:28.550
> 
> 标签：javascript, canvas, redraw

我用来`<canvas>`在我的音乐教育网络应用程序中绘制所有音符和字形：http: [//www.musictheory.net/exercises/keysig/bc98yy](http://www.musictheory.net/exercises/keysig/bc98yy)

一位 Firefox 15.0.1 用户报告说，有时练习会继续到下一个问题，但画布仍然显示上一个问题。我曾在一次测试中看到过这种情况（大约 500 个问题）。

当它发生时，画布已被清除，并且已通过、、等在 JavaScript 中`canvas.width = canvas.width`调用`.clearRect`上下文和字形。但是，画布的后备缓冲区似乎永远不会被刷新/绘制到窗口中。`.beginPath``.quadraticCurveTo``.closePath`

我过去曾看到过关于类似问题的错误报告：

*   [https://bugzilla.mozilla.org/show_bug.cgi?id=787623](https://bugzilla.mozilla.org/show_bug.cgi?id=787623)
*   [https://bugzilla.mozilla.org/show_bug.cgi?id=794337](https://bugzilla.mozilla.org/show_bug.cgi?id=794337)
*   [http://code.google.com/p/chromium/issues/detail?id=55339](http://code.google.com/p/chromium/issues/detail?id=55339)

我可以通过执行 DOM hack 来强制重绘，例如插入文本节点作为画布的子节点，然后在下一个运行循环周期中将其删除，或者修改画布的背景颜色或填充。然而，这似乎很严厉，而且我一直有一种唠叨的感觉，我错过了一些明显的东西。

我的绘图代码很简单：

```
canvas.width = width;
ctx.clearRect(0, 0, width, height);
ctx.save();
// Lots of drawing code here
ctx.restore()
ctx.clearRect(0, 0, 1, 1); // Helped force a repaint on some older WebKit browsers? 
```

我确保了电话的数量`.save`和`.restore`电话是平衡的。

1）我直接调用此代码以响应`onclick`事件处理程序。我应该改为使用`requestAnimationFrame`还是`setTimeout`在未来的运行循环周期中执行绘图？

2) 我没有遗漏一些明显的东西，比如`canvas.pleaseRepaintNow()`API，对吧？

3）有没有其他人遇到过类似的问题，通过修改DOM来强制重绘？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:30:11.437

添加`context.stroke();`到`onLoad`函数的最后一行，它修复了 Firefox 中的错误。否则在重绘窗口之前不会渲染对画布的更改。

至少在我的情况下它有效。

```
window.onload = function() {
   canvas = document.getElementById("canvas");
   context = canvas.getContext("2d");
   //Code here...
   context.stroke();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:30:45.667

我试图让这个错误发生，但在疯狂点击 Firefox 一段时间后，我从未见过它。这就是我清除似乎可以工作的画布的方式，但是由于我无法让错误发生，所以我也无法检查是否可以解决任何问题...

```
// Store the current transformation matrix
ctx.save();

// Use the identity matrix while clearing the canvas
ctx.setTransform(1, 0, 0, 1, 0, 0);
ctx.clearRect(0, 0, canvas.width, canvas.height);

// Restore the transform
ctx.restore(); 
```

# linux - llvm-ld如何定位libstdc++

> ID：12755168
> 
> 赞同：2
> 
> 时间：2012-10-05T23:07:44.497
> 
> 标签：linux, linker, llvm, ld

**简短的问题**：如何`llvm-ld`定位`libstdc++`？

**详情**：

我收到以下错误消息：

`llvm-ld: error: Cannot find library 'stdc++'`

运行时`llvm-ld`。我试图了解如何`llvm-ld`搜索`libstdc++`.

我正在设置一个新系统并遵循在不同系统上工作的编译步骤。最终，我注意到`LD_LIBRARY_PATH`我`.bashrc`在旧系统上设置的目录有所不同，其中包括大量目录，包括 Cadence 和其他杂项软件。我不想使用`LD_LIBRARY_PATH`，我希望能够`libstdc++`通过提供适当的命令行参数来链接到`llvm-ld`.

我正在运行的命令是：

```
llvm-ld -disable-internalize -native -o foo foo.bc4 -L/usr/lib/x86_64-linux-gnu -lpthread -lrt  -lstdc++ -lm -v 
```

这导致以下输出：

```
 Linking bitcode file 'foo.bc4'
  Linked in file 'foo.bc4'
  Linking archive file '/usr/lib/x86_64-linux-gnu/libpthread.a'
  Linking archive file '/usr/lib/x86_64-linux-gnu/librt.a'
llvm-ld: error: Cannot find library 'stdc++' 
```

但是运行`ls -l /usr/lib/x86_64-linux-gnu/libstdc++*`会导致：

```
lrwxrwxrwx 1 root root     19 Apr 15 16:34 /usr/lib/x86_64-linux-gnu/libstdc++.so.6 ->    libstdc++.so.6.0.16
-rw-r--r-- 1 root root 962656 Apr 15 16:36 /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16 
```

所以我不明白为什么`llvm-ld`找不到这个文件？特别是当我使用`LD_LIBRARY_PATH`set 编译然后`ldd`在生成的可执行文件上运行时，我得到以下输出：

```
linux-vdso.so.1 =>  (0x00007ffff7ffe000)
libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007ffff7dc1000)
libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007ffff7ac0000)
libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007ffff77c6000)
libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007ffff75b0000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007ffff71f0000)
/lib64/ld-linux-x86-64.so.2 (0x0000555555554000) 
```

这似乎表明`libstdc++`我想要的版本是，`/usr/lib/x86_64-linux-gnu/libstdc++.so.6`但我不知道为什么`llvm-ld`不使用搜索路径找到它`-L/usr/lib/x86_64-linux-gnu`。

供参考：`uname -a`结果：`Linux FOO 3.2.0-30-generic #48-Ubuntu SMP Fri Aug 24 16:52:48 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux`

并且`llvm-ld --version`：

```
LLVM (http://llvm.org/):
  LLVM version 3.1svn
  Optimized build.
  Built Sep 14 2012 (13:22:38).
  Default target: x86_64-unknown-linux-gnu
  Host CPU: core2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:01:43.357

好像`llvm-ld`不是在找`.so.#`。根据`man`页面：

> `-l`在查找使用该选项指定的库时，`llvm-ld`首先尝试从当前目录加载具有该名称的文件。如果失败，它会寻找`liblibrary.bc`、`liblibrary.a`或 `liblibrary`。**`shared library extension`**，按此顺序，在使用 -L 选项添加到库搜索路径的每个目录中。这些目录按照指定的顺序进行搜索。如果找不到该库，则在环境变量`llvm-ld`指定的目录中查找。`LLVM_LIB_SEARCH_PATH`如果它在那里找不到库，它就会失败。

您可以通过创建符号链接`/usr/lib/x86_64-linux-gnu/libstdc++.so`->来完成这项工作`libstdc++.so.6`。

我通常`clang`直接链接，因为它更好地理解搜索 C++ 库的东西。

# c# - 我的 DropDownListFor 出现错误仅回发

> ID：12755169
> 
> 赞同：0
> 
> 时间：2012-10-05T23:07:52.273
> 
> 标签：c#, asp.net-mvc, razor, html.dropdownlistfor

我的 dropDownListFor 正确显示数据，但是当我转到 HttpPost 时显示错误 System.NullReferenceException。

我的视图模型：

```
public class contaModel
    {
        public SelectList responsaveis { get; set; }
        public List<int> idResponsaveis { get; set; }

        public SelectList responsaveisCartao { get; set; }
        public List<int> idResponsaveisCartao { get; set; }
    } 
```

我在选择列表中输入日期的那一刻：

```
public ActionResult Create()
        {
            contaModel model = new contaModel();

            model.responsaveis = new SelectList(db.responsavelporconta, "IdResponsavelPorConta", "Nome");
            model.responsaveisCartao = new SelectList(db.responsavelporconta, "IdResponsavelPorConta", "Nome");

            return View(model);
        } 
```

产生错误的行：

```
@Html.DropDownListFor(x => x.idResponsaveis, Model.responsaveis) 
```

我使用 List 因为我在我的页面中使用多个下拉列表。

# php - 在 PHP 中操作原始电子邮件消息（更改标题等）的最佳方法是什么？

> ID：12755174
> 
> 赞同：2
> 
> 时间：2012-10-05T23:08:35.223
> 
> 标签：php, parsing, email

在 PHP 中操作原始电子邮件消息（更改标题等）的最佳方法是什么？

我想做一些简单的更改，例如更改回复、格式化主题等。

我可以用正则表达式轻松做到这一点。然而，电子邮件既复杂又脆弱，我知道这很可能会与我没有想到的事情发生冲突。

Mailparse 之类的功能可以*读取*原始邮件，但我找不到标准扩展来*更改*原始电子邮件。

也许我应该使用 Mailparse 来帮助确保在设置正则表达式进行更改之前正确阅读邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:29:52.897

Pear 数据库提供了一个包[Mail_Mime](http://pear.php.net/package/Mail_Mime/docs)，它完全可以满足您的需要。

您可以通过运行以下命令使用[Pyrus](http://pear2.php.net/PEAR2_Pyrus)安装该软件包：

```
php pyrus.phar 安装 pear/Mail_Mime
```

该包提供了一个[很好的示例](http://pear.php.net/manual/en/package.mail.mail-mime.example.php)，展示了如何创建消息。

该包似乎不支持加载现有的原始消息并对其进行操作，但正如您在问题中提到的，您可以使用 Mailparse 提取相关信息，然后使用该信息通过 Mail_Mime 重新组合消息。

# iphone - 将滚动视图添加到 .xib 文件中的视图

> ID：12755175
> 
> 赞同：0
> 
> 时间：2012-10-05T23:08:39.097
> 
> 标签：iphone, objective-c, ios, xcode, xib

我有一个包含 UIView 和 UIScrollView 的 xib 文件。

在我的 UIView 中，我有另一个 UIView（中间的屏幕），我想以编程方式将我的 scrollView 添加到它。

原因是一次我想在那里添加一个scrollView，另一次我想添加一个mapView。

我所做的是这样的：

```
CGRect frame = self.view.bounds;
    self.scrollView = [[UIScrollView alloc] initWithFrame: frame];
    CGSize pagesScrollViewSize = self.view.frame.size;
    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * self.pageImages.count, pagesScrollViewSize.height); 
```

我还需要为 UIScrollView 设置委托。

我无法让它工作。这是我的错误：

```
-[UIScrollView setPageId:]: unrecognized selector sent to instance 0x7dd84e0
2012-10-06 00:56:17.373 testN[3525:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIScrollView setPageId:]: unrecognized selector sent to instance 0x7dd84e0' 
```

我也不知道应该在哪里连接 scrollView `delegate`。你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:50:47.110

您收到的错误不在您粘贴的代码中，这是因为您可能在其他地方有一些代码，例如 self.scrollView.pageId = ...

不管怎样，为了帮助您实现您想要的效果，您可能应该将屏幕中间的 MKMapView、UIScrollView 和白色 UIView 的 IBOutlet 引用添加到您的视图控制器。

您还可以通过右键单击它并将委托旁边的圆圈（在 Outlets 下）拖动到文件所有者（假设文件所有者是实现 UIScrollViewDelegate 的 UIViewController），在您的 xib 文件中设置滚动视图的委托

然后在 viewDidLoad 你会有这样的东西

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.scrollView.contentSize = self.scrollView.frame.size;
    self.scrollView.frame = self.whiteCenterView.bounds;
    [self.whiteCenterView addSubview:self.scrollView];
} 
```

您不应该在代码中手动分配/初始化滚动视图，因为您已经在 xib 文件中拥有它，并且它已经在控制器中调用 viewDidLoad 时自动创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:58:38.980

我可以通过在界面构建器中添加 UIScrollView 来成功地做到这一点，然后从那里设置委托和文件所有者。

我只是应该注意，由于我想将 UIView 添加到情节提要中的 ViewController 中，因此此代码将不起作用：

```
NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"OfferView" owner:self options:nil];
UIView *newPageView = [views lastObject]; 
```

我应该使用：

```
UIView *newPageView = [views objectAtIndex:0]; 
```

# c++ - 安装 Stan for R 和使用 Rcpp 时编译出错

> ID：12755180
> 
> 赞同：3
> 
> 时间：2012-10-05T23:09:27.843
> 
> 标签：c++, xcode, r, compiler-construction, stan

我需要为数据分析类安装 Rstan。说明发布在这里[http://code.google.com/p/stan/wiki/RStanGettingStarted](http://code.google.com/p/stan/wiki/RStanGettingStarted)。我正在运行 Mac OS 10.5.8 和 R 2.15.1 GUI 1.52 Leopard 构建 32 位 (6188)。我刚刚安装了 Xcode 版本 3.1.4，这是与 leopard 兼容的 Xcode c++ 编译器（我必须获得一个 mac 开发人员帐户才能执行此操作）。

根据 Stan 安装说明，我输入了以下代码以查看我的编译器是否正常工作：

```
library(inline) 
library(Rcpp)
src <- ' 
  std::vector<std::string> s; 
  s.push_back("hello");
  s.push_back("world");
  return Rcpp::wrap(s);
'
hellofun <- cxxfunction(body = src, includes = '', plugin = 'Rcpp', verbose = FALSE)
cat(hellofun(), '\n') 
```

它返回以下错误：

```
Error in compileCode(f, code, language = language, verbose = verbose) :
Compilation ERROR, function(s)/method(s) not created! 
Library/Frameworks/R.framework/Versions/2.15/Resources/library/
Rcpp/include/Rcpp/internal/export.h: In function ‘void
Rcpp::internal::export_range__dispatch(SEXPREC*, InputIterator,
Rcpp::traits::r_type_primitive_tag)’:
/Library/Frameworks/R.framework/Versions/2.15/Resources/
library/Rcpp/include/Rcpp/internal/export.h:56: internal
compiler error: Bus error
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://developer.apple.com/bugreporter> for
instructions.
make: *** [file795214e66510.o] Error 1
In addition: Warning message:
running command '/Library/Frameworks/R.framework/Resources/bin/
R CMD SHLIB file795214e66510.cpp 2>
file795214e66510.cpp.err.txt' had status 1 
```

当我尝试安装 stan 时：

```
 install.packages('rstan', type = 'source') ] 
```

我收到此警告：警告消息：在 install.packages("rstan", type = "source") 中：安装包 'rstan' 的退出状态非零

我不知道 C++ 是如何工作的。我所有的编码经验都在 R 中，之前不需要编译成 C++。在过去 4 小时左右的时间里，我一直在努力找出问题所在，一遍又一遍地在谷歌上搜索这些错误消息，但运气不佳。任何帮助将不胜感激，也将帮助我班上其他大约 10 名遇到相同或类似问题的学生。非常非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T10:43:32.060

这在我看来像是安装 C++ 编译器或安装 Rcpp 包的问题，​​而不是 rstan 包的问题。但是，如果 g++ 对您造成了棘手的问题，则可以使用 clang 编译器，如果您使用这两行创建 $HOME/.R/Makevars，它应该可以与 Rcpp 和 rstan 一起使用

抄送=叮当

CXX=叮当++

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:05:25.137

正如另一个答案中提到的，第一步是让 Rcpp 在您的 Mac 上工作（即，至少通过 hello world 示例）。

以前 Rcpp 的类似问题： [https ://stat.ethz.ch/pipermail/r-sig-mac/2010-July/007574.html](https://stat.ethz.ch/pipermail/r-sig-mac/2010-July/007574.html)

此外，从这个网页[http://useyourloaf.com/blog/2011/03/21/compiler-options-in-xcode-gcc-or-llvm.html](http://useyourloaf.com/blog/2011/03/21/compiler-options-in-xcode-gcc-or-llvm.html)，似乎 gcc 4.2 和 4.0 都在 Xcode 3.14 （不确定，因为它没有说它是 3.14）。所以尽量确保 R 使用 gcc 4.2.1 很重要。在终端中执行以下命令将显示 gcc 的当前版本。

$ g++ -v

# php - jquery php替换css

> ID：12755186
> 
> 赞同：0
> 
> 时间：2012-10-05T23:10:02.997
> 
> 标签：php, jquery, css, echo

嘿，我有以下代码可以在每次图像更改时更改图像和背景颜色：

```
$buildGrx = '';

if ($cssColor1 <> '') {$buildGrx = '\'uploadImage/bannerImg/slider/1.jpg\','; }
if ($cssColor2 <> '') {$buildGrx .= '\'uploadImage/bannerImg/slider/2.jpg\','; }
if ($cssColor3 <> '') {$buildGrx .= '\'uploadImage/bannerImg/slider/3.jpg\','; }
if ($cssColor4 <> '') {$buildGrx .= '\'uploadImage/bannerImg/slider/4.jpg\','; }
if ($cssColor5 <> '') {$buildGrx .= '\'uploadImage/bannerImg/slider/5.jpg\','; }
if ($cssColor6 <> '') {$buildGrx .= '\'uploadImage/bannerImg/slider/6.jpg\','; }
if ($cssColor7 <> '') {$buildGrx .= '\'uploadImage/bannerImg/slider/7.jpg\','; }
if ($cssColor8 <> '') {$buildGrx .= '\'uploadImage/bannerImg/slider/8.jpg\','; }
if ($cssColor9 <> '') {$buildGrx .= '\'uploadImage/bannerImg/slider/9.jpg\','; }
if ($cssColor10 <> '') {$buildGrx .= '\'uploadImage/bannerImg/slider/10.jpg\','; }

$buildGrx = substr($buildGrx, 0, strlen($buildGrx) - 1); 

var imgArr = new Array( // relative paths of images
 <?PHP echo $buildGrx ?>
 );

 var preloadArr = new Array();
 var i;
 var colorsCSS = new Array();

 colorsCSS[0] = '#fff';
 colorsCSS[1] = '<?PHP echo $cssColor1 ?>';
 colorsCSS[2] = '<?PHP echo $cssColor2 ?>';
 colorsCSS[3] = '<?PHP echo $cssColor3 ?>';
 colorsCSS[4] = '<?PHP echo $cssColor4 ?>';
 colorsCSS[5] = '<?PHP echo $cssColor5 ?>';
 colorsCSS[6] = '<?PHP echo $cssColor6 ?>';
 colorsCSS[7] = '<?PHP echo $cssColor7 ?>';
 colorsCSS[8] = '<?PHP echo $cssColor8 ?>';
 colorsCSS[9] = '<?PHP echo $cssColor9 ?>';
 colorsCSS[10] = '<?PHP echo $cssColor10 ?>';

 /* preload images */
 for(i=0; i < imgArr.length; i++){
    preloadArr[i] = new Image();
    preloadArr[i].src = imgArr[i];
 }

 var currImg = 1;
 var intID = setInterval(changeImg, 6000);

 /* image rotator */
 function changeImg(){
     alert(currImg);
    $('#pageBG').animate({opacity: 0}, 1000, function(){
    $(this).css('background-image','url(' + preloadArr[currImg++%preloadArr.length].src +')');
    $(this).css('background-color', colorsCSS[currImg]);
 }).animate({opacity: 1}, 1000);
 } 
```

以及它更改的 HTML 代码：

```
 echo '<div align="center" style="background-image:url("#"); background-color:"#fff"; background-repeat:no-repeat; background-position:center top; height:287px;" id="pageBG"></div>'; 
```

然而，问题在于，由于某种原因，它搞砸了 html 代码：

```
 <div align="center" id="pageBG" height:287px;"="" top;="" background-position:center="" background-repeat:no-repeat;="" background-color:"#fff";="" #");="" style="opacity: 1; background-image: url(&quot;http://www.thehamiltonfirm.com/hf-blog/uploadImage/bannerImg/slider/2.jpg&quot;);"></div> 
```

那么我该怎么做才能让它像那样混乱呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:27:28.747

`background-image:url("#");`您可以在-->中省略引号`background-image:url(#);`

`background-color:"#fff";`--> `background-color: #fff;`- 这里不需要引号。

标签中的所有样式属性都由引号包裹`style=""`，内部`style`属性不允许使用相同的引号，而是`""`必须使用`''`( `style="background-image: url('#');"`)。所以，`echo`也使用单引号，里面的引号`style`必须被转义：`style="background-image: url(\'#\');"`。

```
<?php
    echo '<div align="center" 
               style="background-image: url(\'#\'); 
               background-color: #fff; 
               background-repeat: no-repeat; 
               background-position: center top; 
               height: 287px;" id="pageBG">
          </div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:20:53.723

您在输出`div`.

```
echo '<div align="center" style="background-image:url("#"); background-color:"#fff"; background-repeat:no-repeat; background-position:center top; height:287px;" id="pageBG"></div>'; 
```

相反，您应该使用转义的单引号（因为您在单引号分隔的 PHP 字符串中使用它）。

```
echo '<div align="center" style="background-image:url(\'#\'); background-color:\'#fff\'; background-repeat:no-repeat; background-position:center top; height:287px;" id="pageBG"></div>'; 
```

# ruby-on-rails - RSpec：所有测试失败

> ID：12755190
> 
> 赞同：0
> 
> 时间：2012-10-05T23:10:30.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, rspec2, railstutorial.org

我正在关注 Michael Hartl 的 Ruby on Rails 教程。我的测试都通过了，直到我迁移了数据库并添加了最后 2 个测试。事情搞砸了，因为即使我删除了最后 2 个测试，所有测试现在都失败了。我不确定我是否在迁移或其他方面犯了一些错误。

这是我使用的：

```
$ bundle exec rake db:migrate
$ bundle exec rake db:test:prepare
$ bundle exec rspec spec/ 
```

这是完全失败的 user_spec 文件：

```
require 'spec_helper'

describe User do
  before do
   @user = User.new(name: "Example User", email: "user@example.com", password: "foobar", password_confirmation: "foobar") 
  end

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }

  it { should be_valid }

  describe "when name is not present" do
  before { @user.name = " " }
  it { should_not be_valid }
  end

  describe "when email is not present" do
    before { @user.email = " "}
    it { should_not be_valid }

  end

  describe "when name is too long" do
    before { @user.name = "a"*51 }
    it { should_not be_valid }
  end

  describe "when email format is invalid" do
    it "should be invalid" do
        addresses = %w[user@foo,com user_at_foo.org example.user@foo. foo@bar_baz.com foo@bar_baz.com]
         addresses.each do |invalid_address|
            @user.email = invalid_address
            @user.should_not be_valid 
        end
    end
  end

    describe "when email format is valid" do
        it "should be valid" do
            addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
                addresses.each do |valid_address|
                    @user.email = valid_address
                    @user.should be_valid
                end
            end
        end

    describe "when email address is already taken" do
        before do
            user_with_same_email = @user.dup
            user_with_same_email.email = @user.email.upcase
            user_with_same_email.save
        end

        it { should_not be_valid }
    end

    describe "when password is not present" do
      before { @user.password = @user.password_confirmation = " " }
      it { should_not be_valid }
    end 

    describe "when password doesn't match confirmation" do
      before { @user.password_confirmation = "mismatch" }
      it { should_not be_valid }
    end

    describe "when password confirmation is nil" do
      before { @user.password_confirmation = nil }
      it { should_not be_valid }
    end
end 
```

这是迁移文件：

```
class AddPassswordDigestToUsers < ActiveRecord::Migration
  def change
    add_column :users, :password_digest, :string
  end
end 
```

EDIT2 - 我刚刚`password: "foobar", password_confirmation: "foobar"`从规范的第一行中删除，现在我只收到 5 个错误（这是正确的，因为与密码相关的错误应该失败）

EDIT1 - 这是失败的测试

```
Running all specs
Running tests with args ["--drb", "-f", "progress", "-r", "/home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-1.2.1/lib/guard/rspec/formatters/notification_rspec.rb", "-f", "Guard::RSpec::Formatter::NotificationRSpec", "--out", "/dev/null", "--failure-exit-code", "2", "spec"]...
..FFFFFFFFFFFFFFF.........

Failures:

  1) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com", password: "foobar", password_confirmation: "foobar")
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:16:in `new'
     # ./spec/models/user_spec.rb:16:in `block (2 levels) in <top (required)>'

  2) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com", password: "foobar", password_confirmation: "foobar")
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:16:in `new'
     # ./spec/models/user_spec.rb:16:in `block (2 levels) in <top (required)>'

  3) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com", password: "foobar", password_confirmation: "foobar")
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:16:in `new'
     # ./spec/models/user_spec.rb:16:in `block (2 levels) in <top (required)>'

  4) User 
     Failure/Error: @user = User.new(name: "Example User", email: "user@example.com", password: "foobar", password_confirmation: "foobar")
     ActiveRecord::UnknownAttributeError:
       unknown attribute: password
     # ./spec/models/user_spec.rb:16:in `new'
     # ./spec/models/user_spec.rb:16:in `block (2 levels) in <top (required)>' 
```

.... 等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:30:05.227

从书中：

> 将所有内容放在一起给出了清单 6.28 中的（失败的）测试。我们将在第 6.3.4 节中让它们通过。

测试*应该*失败。一旦密码实施完成，它们将通过，稍后在教程中。

* * *

现在，解释*为什么*他们失败了：

在您创建用户（您的`before`块）的那一行，您将`password`属性传递给构造函数，但该属性尚不存在，因此您的模型会抱怨您看到的错误。在本教程中，这个属性是稍后创建的。

# javascript - 需要 JavaScript 地理定位和一般 JavaScript 协助

> ID：12755192
> 
> 赞同：0
> 
> 时间：2012-10-05T23:10:46.720
> 
> 标签：javascript, function, geolocation

我正在“尝试”使用 JavaScript 的地理定位功能，但我认为 JavaScript 的工作方式存在问题。我找到了很多关于如何使用地理定位功能的例子，它们基本上都是这样的：

```
navigator.geolocation.getCurrentPosition(function(position){alert("Your Coordinates:\nLatitude: " + position.coords.latitude + "\nLongitude: " + position.coords.longitude);}); 
```

上面的代码有效，但我想做的是这样的：

```
function geoMe(){
    var position = navigator.geolocation.getCurrentPosition();
    var geoLocationDiv = document.getElementById('geoLocationDiv');
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    geoLocationDiv.innerHTML = latitude + "," + longitude;
} 
```

正如您可能猜到的那样，它不起作用。我从来都不擅长解释像示例一样“卡住”在一起的代码，所以我很困惑。

在查看示例代码时，看起来有一个名为“getCurrentPosition”的函数。现在，这就是我迷路的地方。看起来有一个函数作为参数传递给 getCurrentPosition，它具有 [作为参数] 一个名为“位置”的参数。“位置”参数从何而来？？？我已经看到将函数（没有实际函数名）用作参数的位置，但这真的让我感到困惑。通常，我会执行以下操作：

```
function functionName(parameter1, parameter2, parameterN){
    function body
} 
```

我知道做这样的事情应该是先进的，但我是一个简单的人，我喜欢我的代码简单，我喜欢我的函数有名字。

那么，那里的任何人都可以帮助我让这个 GeoLocation 的东西按照我想要的方式工作吗？并且，也许在此过程中，解释一下这种奇怪的 JavaScript 函数方法？

谢谢你，祝你有美好的一天。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:40:24.340

这：

```
function geoMe () {
    navigator.geolocation.getCurrentPosition(function ( pos ) {
        document.getElementById('geoLocationDiv').innerHTML =
                pos.coords.latitude + "," + pos.coords.longitude;
    });
} 
```

**现场演示：http:** [//jsfiddle.net/K6sKe/1/](http://jsfiddle.net/K6sKe/1/)

您必须将函数对象传递给该`getCurrentPosition`方法。该函数充当回调函数，并在用户授予访问其位置的权限时被调用。在我们的例子中，我们的回调函数是一个匿名函数表达式。该`getCurrentPosition`方法旨在调用将 Position 对象传递给它的回调。因此，我们的函数表达式定义了一个`pos`表示 Position 对象的形式参数 ( )。在回调中，我们可以访问该 Position 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:43:12.247

如果您只是将 getCurrentPosition 视为另一个接受一个参数的函数，这并不奇怪。但是，该参数恰好是一个匿名函数。这里有一个非常简单的例子来说明回调函数的思想。

```
function sayHi(myFunction) {
    alert(myFunction());
}

sayHi(function() {return 'Hello World'}); 
```

在上面，sayHi 是一个接受名为 myFunction 的参数的函数，而 myFunction 只是一个返回字符串 'Hello World' 的函数。这显然是一个过于简化的示例，您可以通过传递字符串轻松实现。但是当函数变得更复杂时，使用这种方法可以为您提供更大的灵活性和更简洁的代码。

# php - $end unexpected - 你能“发现”它吗？短代码

> ID：12755194
> 
> 赞同：-1
> 
> 时间：2012-10-05T23:10:57.730
> 
> 标签：php, database, mysqli

代码问题 - 意外 $end ？现在尝试了半个小时来解决这个问题....

你能发现问题吗？

```
<?php
  session_start();

  if (!isset($_SESSION['user_id'])) {
if (isset($_COOKIE['user_id']) && isset($_COOKIE['username'])) {
  $_SESSION['user_id'] = $_COOKIE['user_id'];
  $_SESSION['username'] = $_COOKIE['username'];
}
  }
?>

<html>
<head>
</head>
<body>
test
<?php

  $dbc = mysqli_connect(localhost, hidden, hidden, hidden);

if (!isset($_GET['shipID'])) {
    $query = "SELECT user_id, shipID, IP, Image FROM ships WHERE shipID = '" .             $_SESSION['shipID'] . "'";
  }
  else {
    $query = "SELECT user_id, shipID, IP, Image FROM ships WHERE shipID = '" .     $_GET['shipID'] . "'";
  }
  $data = mysqli_query($dbc, $query);

while ($row = mysqli_fetch_array($data)) {
    if ($row['IP'] == $_SERVER["REMOTE_ADDR"])
    { 
      echo 'Cool';
  }
else { echo 'Fail' ; }

?>
</body>
</html> 
```

游戏的目的是证明 IP 地址与数据库中列出的 IP 地址相同。

任何和所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:12:35.520

你的 while 块永远不会在`else`.

您可以通过`}`在最后一个`else`.

其次，正如@Tadeck 所提到的，您的代码容易受到注入攻击。为了防止这种情况，我建议使用[PDO 或 mysqli](http://us2.php.net/manual/en/mysqlinfo.api.choosing.php)，因为这些`mysql_*`功能已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:17:56.363

尝试使用更高级的文本编辑器，如 Aptana，它具有许多内置功能，可以更轻松地排除代码故障。[http://www.aptana.com/](http://www.aptana.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T23:12:37.223

您没有关闭 while 循环上的大括号。

如果你缩进你的代码，发现这种事情会容易得多！

# javascript - 根据布尔值更改 JSP 中控件的可见性

> ID：12755201
> 
> 赞同：1
> 
> 时间：2012-10-05T23:11:57.033
> 
> 标签：javascript, jsp, visibility

我猜我需要使用javascript来做到这一点，但我完全一无所知。我以前从未使用过javascript。有人可以给我一个快速示例，说明如何根据 JSP 页面中的布尔值更改按钮的可见性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:18:19.043

如果您只考虑一次使用它，那么在您的 JS 代码中包含 JSP 值很容易：

```
 <script type="text/javascript">
           var e = document.getElementById("foo");
            var myvar='<%=myScriptletVar %>'
            if (myvar)
                e.style.display = 'none'; 
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:09:05.953

这是我的最终解决方案：

```
<c:if test="${viewModel.facebookToken != ''}">
  <script type="text/javascript">
    var e = document.getElementById("facebookButton");
    e.style.display = 'none';
  </script>
</c:if> 
```

# sql - 关系数据库 - 您如何知道数据是否已输入到表中？

> ID：12755204
> 
> 赞同：0
> 
> 时间：2012-10-05T23:12:20.327
> 
> 标签：sql, database

真的想不出一个相关的标题:-(

我用 C# 编写了一个程序来记录产品的销售情况。在我的数据库里面有两个表。一个称为“产品”，另一个表称为“客户”。'Product' 包含 CustomerId（所以我可以连接两个表），而 customer 表包含与客户相关的数据。

我的程序的用户必须输入产品详细信息和客户详细信息。但是我怎么知道一个客户是否已经存在于我的数据库的客户表中呢？我是否必须读出客户表中的所有记录并将它们与新的客户详细信息进行比较？这对我来说似乎有点狡猾。

（需要知道数据是否已经填写，防止重复）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:16:38.513

对不允许重复的表设置一个约束，然后尝试插入数据。如果它已经存在，服务器将不允许插入它并通知您。

我无法解释它将如何让您知道，因为您没有提供有关您正在使用的数据库的信息。它通常是抛出的异常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T23:20:42.893

您可以只使用适当的 where 子句发出适当的 select 语句来检查是否存在已与数据匹配的行。

如果您的客户 ID 不是由数据库本身生成的（即，当您将客户详细信息输入数据库时​​，您将输入该 ID，那么您可以发出如下选择语句：

```
SELECT * FROM Customer WHERE CustomerId = <Customer's ID> 
```

但是，如果客户 ID 是由数据库生成的，您需要更改 where 子句以跨要确保不重复的字段起作用。

# c# - 使用 Telerik RadGrid 如何从客户端隐藏 GridHyperLinkColumn？

> ID：12755209
> 
> 赞同：1
> 
> 时间：2012-10-05T23:13:17.547
> 
> 标签：c#, javascript, asp.net, telerik, telerik-grid

我正在使用 Telerik RadGrid，我正在做客户端数据绑定。这是我的网格：

```
<telerik:RadGrid ID="radGrid_Assignments" runat="server" AllowPaging="True" AutoGenerateColumns="false" 
                     AllowSorting="true" AllowFilteringByColumn="true" >
        <PagerStyle Mode="NextPrevAndNumeric" />
        <MasterTableView NoMasterRecordsText="No assigments found for the search criteria.">
            <Columns>
                <telerik:GridHyperLinkColumn HeaderText="Customer Name" DataTextField="CustomerName" Target="_customer"
                                             DataNavigateUrlFormatString="~/Modules/DataEntry/ProviderContact/Edit.aspx?id={0}"
                                             DataNavigateUrlFields="CustomerID" SortExpression="cust.Name" UniqueName="cust.Name"
                                             HeaderStyle-Width="200px" />
                <telerik:GridBoundColumn DataField="JobTitle" HeaderText="Title" HeaderStyle-Width="250px" />
                <telerik:GridBoundColumn DataField="ProviderName" HeaderText="Provider" HeaderStyle-Width="250px" />
                <telerik:GridHyperLinkColumn DataNavigateUrlFields="SurveyType,EvaluationID,SurveyID" DataNavigateUrlFormatString="~/Modules/AssignmentPortal/Evaluation/Enter{0}.aspx?EvalID={1}&sid={2}&menu=false" DataTextField="SurveyName" HeaderStyle-Width="200px" HeaderText="Survey Name" SortExpression="s.Description" Target="_survey" UniqueName="s.Description" />
                <telerik:GridBoundColumn DataField="ProductName" HeaderText="Product" HeaderStyle-Width="150px" />
                <telerik:GridBoundColumn DataField="WorkPhone" UniqueName="cust.WorkPhone" SortExpression="cust.WorkPhone" HeaderText="Work Phone"
                                         HeaderStyle-Width="150px" />
                <telerik:GridHyperLinkColumn HeaderText="Email" DataTextField="Email" UniqueName="cust.Email"
                                             DataNavigateUrlFormatString="mailto:{0}" DataNavigateUrlFields="Email" SortExpression="cust.Email"
                                             HeaderStyle-Width="300px" />
                <telerik:GridBoundColumn DataField="NoteDateTime" HeaderText="Last Note Date" DataFormatString="{0:MM/dd/yyyy hh:mm tt}"
                                         HeaderStyle-Width="150px" />
                <telerik:GridBoundColumn DataField="NoteText" HeaderText="Last Note" UniqueName="cln.NoteText"
                                         HeaderStyle-Width="400px" />
            </Columns>
        </MasterTableView>
        <ClientSettings>
            <DataBinding Location="/AjaxServices/SearchService" SelectMethod="GetAssignmentsSearchResults" />
            <ClientEvents OnCommand="showLoadingPanel" OnDataBound="OnClientDataBound" OnDataBinding="OnClientDataBinding" />
        </ClientSettings>
    </telerik:RadGrid> 
```

当 SpatialCoordinatesKLASID 的 DataNavigateUrlFields 为 NULL 时，我希望能够使用 HeaderText="KLAS Maps" 隐藏 GridHyperLinkColumn。我只想要一个空列。

我不能使用传统方式使用服务器端 OnItemDataBound 事件。因为这是在客户端加载的。

我怎样才能做到这一点？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T04:53:54.133

请尝试以下代码/演示。

```
 function DataBound(sender, args) {

            var grid = $find("<%= RadGrid1.ClientID %>");
            if (grid) {

                var IsColumnHaveData = false;
                var MasterTable = grid.get_masterTableView();
                var Rows = MasterTable.get_dataItems();
                for (var i = 0; i < Rows.length; i++) {
                    var row = Rows[i];

                    if (row.get_dataItem().EmployeeName != null) {
                        IsColumnHaveData = true;
                    }

                }

                var Columns = MasterTable.get_columns();
                for (var i = 0; i < Columns.length; i++) {
                    var column = Columns[i];
                    if (column.get_uniqueName() == "EmployeeName") {
                        column.set_visible(IsColumnHaveData);
                    }
                }

            }

        }

<ClientSettings>
            <DataBinding Location="http://localhost/WcfService1/Service1.svc" SelectMethod="GetData"
                SortParameterType="Linq" FilterParameterType="Linq">
            </DataBinding>
            <ClientEvents OnDataBound="DataBound" />
        </ClientSettings> 
```

请在下面的链接代码/演示中应用上面的代码。

[带有 WCF 休息服务的 RadGrid](http://jayeshgoyani.blogspot.in/2012/08/radgrid-with-wcf-rest-service.html)

隐藏特定链接。

函数数据绑定（发件人，参数）{

```
 var grid = $find("<%= RadGrid1.ClientID %>");
            if (grid) {

                var IsColumnHaveData = false;
                var MasterTable = grid.get_masterTableView();
                var Rows = MasterTable.get_dataItems();
                for (var i = 0; i < Rows.length; i++) {
                    var row = Rows[i];
                    row.get_cell("EmployeeName").getElementsByTagName("a")[0].style.display = 'none';
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:49:13.987

我会通过 jQuery 的 onload 使用不显眼的 JavaScript。看看这个[jsfiddle](http://jsfiddle.net/zxTuw/1/)。

您需要分析生成的 HTML 以实现正确的功能。

# java - Struts2 REST 插件：通过 PUT 发送 JSON 对象

> ID：12755219
> 
> 赞同：2
> 
> 时间：2012-10-05T23:15:08.200
> 
> 标签：java, json, rest, struts2, struts2-json-plugin

我正在用 Struts2 和 Struts2 REST 插件编写一个 RESTful 服务。目前，我的服务能够毫无问题地处理 GET 请求，但我一直试图让它“更新”（PUT）请求工作。

我有两个可能的模型，一个用于 show() 的 List 和一个用于 update() 的 ClientFeature 对象，其中 ClientFeature 是一个 pojo 类。

**休息控制器：**

```
public class ClientfeatureController extends ControllerParent implements ModelDriven<Object> {

    private ClientFeature clientFeature = new ClientFeature();
    private List<ClientFeature> clientFeatureList;

    //Client ID
    private String id;

    public ClientfeatureController() {
        super(ClientfeatureController.class);
    }

    @Override
    public Object getModel() {
        return (clientFeatureList != null ? clientFeatureList : clientFeature);
    }

    /**
     * @return clientFeatureList through Struts2 model-driven design
     */
    public HttpHeaders show() {
        -logic for GET request here..-
        //todo: add ETag and lastModified information for client caching purposes
        return new DefaultHttpHeaders("show").disableCaching();
    }

    // PUT request: /clientfeature/update/<id> + JSON data
    public String update() {
        logger.info("client id: " + id);
        logger.info("updated model test:" + clientFeature.getClientId());
        return "update";
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public List<ClientFeature> getClientFeatureList() {
        return clientFeatureList;
    }

    public void setClientFeatureList(List<ClientFeature> clientFeatureList) {
        this.clientFeatureList = clientFeatureList;
    }
} 
```

**客户端功能：**

```
 public class ClientFeature {
    private Long clientId;
    private Feature feature;
    private ArrayList<String> countries;

    public ClientFeature() {
        this.countries = new ArrayList<String>();
    }

    public Long getClientId() {
        return clientId;
    }

    public void setClientId(Long clientId) {
        this.clientId = clientId;
    }

    public Feature getFeature() {
        return feature;
    }

    public void setFeature(Feature feature) {
        this.feature = feature;
    }

    public ArrayList<String> getCountries() {
        return countries;
    }

    public void setCountries(ArrayList<String> countries) {
        this.countries = countries;
    }
} 
```

并且正在使用 Postman 的 chrome 扩展来测试服务，并通过 JSON 数据发送类似于：

```
{
 "clientFeature": {
   "feature" : {"featureId" : 999, "featureName" : "testFeature"}
   "countries": ["CA","US"]
   "clientId" : 001
 }
} 
```

和错误：

```
356572 [http-bio-8080-exec-6] WARN  net.sf.json.JSONObject  - Tried to assign property clientFeature:java.lang.Object to bean of class com.foo.bar.ClientFeature 
```

我对所有相关的东西都很陌生，所以任何帮助都将不胜感激。

编辑：

尝试发送以下 JSON：

{ "com.foo.entity.clientFeature" : {"clientId":10} }

并得到以下完整错误：

```
1016894 [http-bio-8080-exec-3] ERROR freemarker.runtime  - Method public java.lang.String org.apache.commons.lang.exception.NestableRuntimeException.getMessage(int) threw an exception when invoked on net.sf.json.JSONException: Error while setting property=com.foo.entity.clientFeature type class java.lang.Object

Method public java.lang.String org.apache.commons.lang.exception.NestableRuntimeException.getMessage(int) threw an exception when invoked on net.sf.json.JSONException: Error while setting property=com.foo.entity.clientFeature type class java.lang.Object
The problematic instruction:
----------
==> ${msg[0]} [on line 68, column 29 in org/apache/struts2/dispatcher/error.ftl]
----------

Java backtrace for programmers:
----------
freemarker.template.TemplateModelException: Method public java.lang.String org.apache.commons.lang.exception.NestableRuntimeException.getMessage(int) threw an exception when invoked on net.sf.json.JSONException: Error while setting property=com.foo.entity.clientFeature type class java.lang.Object
    at freemarker.ext.beans.SimpleMethodModel.exec(SimpleMethodModel.java:130)
    at freemarker.ext.beans.SimpleMethodModel.get(SimpleMethodModel.java:138)
    at freemarker.core.DynamicKeyName.dealWithNumericalKey(DynamicKeyName.java:111)
    at freemarker.core.DynamicKeyName._getAsTemplateModel(DynamicKeyName.java:90)
    at freemarker.core.Expression.getAsTemplateModel(Expression.java:89)
    at freemarker.core.Expression.getStringValue(Expression.java:93)
    at freemarker.core.DollarVariable.accept(DollarVariable.java:76)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.MixedContent.accept(MixedContent.java:92)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.IfBlock.accept(IfBlock.java:82)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.IteratorBlock$Context.runLoop(IteratorBlock.java:179)
    at freemarker.core.Environment.visit(Environment.java:417)
    at freemarker.core.IteratorBlock.accept(IteratorBlock.java:102)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.MixedContent.accept(MixedContent.java:92)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.IfBlock.accept(IfBlock.java:82)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.MixedContent.accept(MixedContent.java:92)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.Environment.process(Environment.java:190)
    at freemarker.template.Template.process(Template.java:237)
    at org.apache.struts2.dispatcher.Dispatcher.sendError(Dispatcher.java:797)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:519)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:851)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:278)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NullPointerException
    at freemarker.ext.beans.SimpleMemberModel.unwrapArguments(SimpleMemberModel.java:85)
    at freemarker.ext.beans.SimpleMethodModel.exec(SimpleMethodModel.java:106)
    ... 43 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:35:11.157

通过使用正确的 JSON 语法解决了这个问题..

如果有人陷入类似的问题，在我的情况下，正确的语法是：

```
{clientFeature: {"feature":{"id":3,"enabled":true,"description":"description here","type":"FEATURE_TYPE_HERE"},"countries":["SG"],"clientId":10}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-28T16:24:34.127

我想解释一下我在使用 Strtus2 rest 插件开发 API 时发现了什么。你应该了解rest插件如何管理我们暴露给外界的bean（json、xml等）

我已经坚持了一天来弄清楚我的 json 波纹管如何无法正确转换为我的 bean 列表。

所以，这是我的 json 字符串：

```
{ 
"messagesList": [{
    "id": "E57EC40F",
    "body": "Ok!",
    ... other_property
},{
    "id": "25B42CC8CCE57EC40F",
    "body": "Testing",
    ... other_property
}],
"ackList": [{
    "id": "5B42CC8CCE57EC40F",
    "queueNumber": 100,
    "chatId": "3434",
    "status": "delivered"
},{
    "id": "E6A25B42CC8CCE57EC40F",
    "queueNumber": 100,
    "chatId": "1747",
    "status": "viewed"
}]
} 
```

使用这个 json，我假设我可以通过添加属性获取并自动将该 json 转换到我的列表中

```
 List<OurModel> messageList;
 List<OurModel> ack; 
```

在我的控制器中。所以我的错误控制器看起来像这样：

```
 @ParentPackage("api-pesan")
@Namespace("/api/pesan")
    public class RetrieveMessageApi implements ModelDriven<Object> {
    @Autowired
    WebHookService webHookService;

    Object retModal;
    List<OurModel> messagesList;
    List<OurModel> ack;
    public HttpHeaders create() throws IOException {

        System.out.println(messagesList.toString());

        System.out.println(ack.toString());

        return new DefaultHttpHeaders("create");
    }

    public Object getModel() {
        return model;
    }

//setter and getter

 } 
```

如果您假设您可以在 create 方法中打印 messagesList 和 ack 属性，那您就错了。我被困了一天才能弄清楚。这是我关于如何将 json 发布到我们的 strtus2 rest 插件的解释。

首先，struts2中的rest插件只有在检索对象并将对象返回到外部restful url时才读取对象（属性名称，也是对象作为类型）。

到那时，我创建了我的类（pojo）来包装我的列表。这个类看起来像这样

```
 public class WrapperModel implements Serializable {

    private List<YourObject> messages;
    private List<YourObject> ack;

//setter getter

} 
```

你会注意到，我们的 json 结构看起来和这个类一样。所以这是我完整且成功的 cotroller 类，它可以获取 json 并正确绑定到我们的属性。

```
@ParentPackage("api-pesan")
public class RetrieveMessageApi implements ModelDriven<Object> {

    @Autowired
    WebHookService webHookService;

    Object model = new WrapperModel();

    public HttpHeaders create() throws IOException {

        System.out.println(model.toString());

        return new DefaultHttpHeaders("create");
    }

    public Object getModel() {
        return model;
    }

} 
```

然后尝试通过[http://localhost:8080/app/api/api-pesan/retrieve-message.json](http://localhost:8080/app/api/api-pesan/retrieve-message.json)和方法 post 发送 json，也将您的 json 作为正文。

结果，您将在日志控制台上看到来自我们的 json 的属性中的列表字符串。

谢谢，希望对大家有帮助......

# javascript - 滑块无法拖动（无法调用 undefined 的方法 'addClass'）（jQuery UI Bootstrap + Twitter Bootstrap）

> ID：12755220
> 
> 赞同：0
> 
> 时间：2012-10-05T23:15:14.887
> 
> 标签：javascript, jquery, jquery-ui, backbone.js, twitter-bootstrap

当我使用 Twitter Bootstrap 2.1.1、jQuery UI Bootstrap 1.8.16 和 Backbone.js 创建一个简单`#slider`的滑块时，当我尝试拖动滑块句柄（不跟随拖动）时出现以下错误：

**JS 错误**

```
Uncaught TypeError: Cannot call method 'addClass' of undefined 
```

**HTML**

```
<div id="slider"></div> 
```

**JS**

```
renderSlider: function() {
    this.$el.find('#slider').slider({
        range: true,
        min: 0,
        max: 500,
        values: [ 75, 300 ],
        slide: function( event, ui ) {}
    });

}, 
```

如果我没有将任何选项传递给，我在拖动滑块手柄时会遇到同样的错误`.slider()`：

```
renderSlider: function() {
    this.$el.find('#slider').slider(); 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:21:46.110

使用 jQuery `1.8.x`。您选择的版本存在不兼容问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T16:32:08.747

我认为这不是 Bootstrap 和 jQuery UI 之间的冲突。

我对滑块有同样的问题。我完全删除了引导程序，它仍然存在。只有下一个帮助：[jQuery UI 滑块 - 无法调用未定义的方法“addClass”](https://stackoverflow.com/questions/11728079/jquery-ui-slider-cannot-call-method-addclass-of-undefined)

最新版本的 jQuery UI。

# git - 使用 git 管理带有外部文件的多个子项目

> ID：12755225
> 
> 赞同：0
> 
> 时间：2012-10-05T23:16:35.993
> 
> 标签：git, subproject

我有一个想要进行版本控制的个人项目，但我不确定应该如何使用 git 来管理它。以下是文件夹结构的示例：

```
project
project/public/plugin1
project/public/plugin2
project/lib/plugin1
project/lib/plugin2 
```

我打算为每个插件或模块创建单独的存储库，但这似乎有点棘手，因为并非插件的所有文件都放在同一个文件夹下。所以我需要将这些目录作为 plugin1 来跟踪：

```
project/public/plugin1
project/lib/plugin1 
```

同样对于插件2：

```
project/public/plugin2
project/lib/plugin2 
```

public 文件夹中是css 和js 等文件，因此可以说比较重要的文件是lib 中的文件。我应该在该文件夹中设置存储库并以某种方式尝试添加外部公用文件夹吗？但当然 git 不会让我这样做。我已经从另一个问题中尝试过这个：

```
git --work-tree=/ add /project/public/plugin1 
```

我仍然收到一个错误，说它在存储库之外。

由于这只是一个个人项目，我不需要访问或做任何远程操作，希望能消除一些复杂性。关于正确设置方法的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T19:37:55.437

看起来像一个较老的问题，但是对于任何看到这个的人来说，你想要做的是使用 git 子模块。

1.  为您的主项目和任何模块（库、插件、模块等）创建存储库
2.  您的结构可能会有所不同，但您希望在主存储库中创建子模块，这些子模块引用包含您的插件等的其他存储库。

    ```
    # git submodule add git://path-to-your-repo.git modulename 
    ```

3.  请注意，您将内容拉入主 repo，并且它附加到主 repo 的该修订版，这允许您仅在子模块与主项目兼容时拉取特定版本的子模块。以下将子模块项目拉入主项目。

    ```
    # git submodule update modulename 
    ```

这只是一个高级别的概述。尝试阅读[http://www.git-scm.com/book/en/Git-Tools-Submodules](http://www.git-scm.com/book/en/Git-Tools-Submodules)了解更多详情。

# c# - 将 xml 数据发回额外的 html 标记被插入

> ID：12755227
> 
> 赞同：0
> 
> 时间：2012-10-05T23:16:45.107
> 
> 标签：c#, asp.net, xml, cxml

我有一个网站向我们的页面发出请求，`http://www.xyz.com/test.aspx`作为回报，我们必须发回响应。以下代码是发送响应的内容。问题是它发回了 XML 数据，但它也发送了 test.aspx 的代码，我不知道如何删除它。

```
Random random = new Random();
int randomNumber = random.Next(0, 10000000);
attrval = randomNumber + "tty";
strCXML = "<?xml version=" + "\"" + "1.0" + "\"" + " encoding=" + "\"" + " UTF-8" + "\"" + " ?>";      
strCXML =strCXML+"<!DOCTYPE cXML SYSTEM " + "\"" + "http://xml.cxml.org/schemas/cXML/1.2.023/cXML.dtd" + "\"" + ">";
strCXML = strCXML + " <cXML payloadID=" + "\"" + attrval + "\"" + " timestamp=" + "\"" + strTimeStamp + "\"" + ">";
strCXML = strCXML + "<Response>";
strCXML = strCXML + "   <Status code=" + "\"" + 200 + "\"" + " text=" + "\"" + "success" + "\"" + ">" + "</Status>";
strCXML = strCXML + "   <PunchOutSetupResponse> ";
strCXML = strCXML + "     <StartPage>";
strCXML = strCXML + "       <URL>" + strMySiteURL + "</URL>";
strCXML = strCXML + "     </StartPage>";
strCXML = strCXML + "   </PunchOutSetupResponse>";
strCXML = strCXML + " </Response>";
strCXML = strCXML + "</cXML>";
Response.Write(strCXML); 
```

这工作正常，除了当它发回数据时它还包括 test.aspx 页面的 html

```
!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title></head>
<body>

</body>
</html>
  Please contact support with the Error Reference Number: ANERR-10000000000000000057040121 for more details</Status>
        </Response>
</cXML> 
```

任何想法我如何发回它，所以它只发回上面的 XML 数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:23:43.973

您需要在将 xml 写入流后调用 Response.End，否则站点将继续呈现页面。

# php - 将 CI 查询存储到数组中？

> ID：12755228
> 
> 赞同：0
> 
> 时间：2012-10-05T23:16:54.263
> 
> 标签：php, mysql, codeigniter

我在模型中有以下函数，但是它不断返回：

消息：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源

我一辈子都想不通为什么。

```
 function getNames() {
    $query1 = $this->db->query("SELECT * FROM Device_tbl ORDER BY Manufacturer");   
    $dev = array();
    while($row = mysql_fetch_array($query1))
        {
            $manu =  $row['Manufacturer'];
            $mod = $row['Model'];
            $dev[] = $manu.' '.$mod;
        }
    return $dev->result();
} 
```

任何人都可以帮忙吗？

CodeIgniter 的答案是：

```
 $query1 = $this->db->query("SELECT * FROM table");  

    foreach($query1->result_array() as $row)
        {
            $manu =  $row['column1'];
            $mod = $row['column2'];
            echo $manu.' '.$mod;
        }
    return $query1->result(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T23:19:54.187

问题是您将 CodeIgniter 数据库方法与内置 PHP 数据库方法混合使用。`mysql_fetch_array`需要资源，而不是 CI 查询对象。

查看有关获取结果的[文档。](http://codeigniter.com/user_guide/database/results.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:12:48.940

有时，当您要处理大量数据（行）时，您可能希望使用原生 php mysql 函数，如 mysql_fetch_array 来节省内存（为了获得最佳的内存节省，我更喜欢 mysql_fetch_row）。在这种情况下，您可以使用：

```
try {

    $query = $this->db->query("SOME QUERY");

    while($row = mysql_fetch_row($query->result_id)) {

        /* ... */

    }

    $query->free_result(); //we talked about memory saving right ;-)
} catch(Exception $e) {
    /* ... */
} 
```

# c++ - 错误：“）”标记之前的预期主表达式

> ID：12755231
> 
> 赞同：0
> 
> 时间：2012-10-05T23:17:05.283
> 
> 标签：c++, qt

按下“pushButton_2”后，我正在尝试在 MainWindow 的图层中显示小部件“widg”，但我收到此错误：“在 ')' 令牌之前预期的主表达式”

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "widg.h"
#include "ui_widg.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    QObject::connect(ui->pushButton_2, SIGNAL(clicked()), SLOT(slotPush2()));
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::slotPush2()
{
    ui->verticalLayout_3->addWidget(widg);
} 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;

private slots:
    void slotPush2();
};

#endif // MAINWINDOW_H 
```

widg.h

```
#ifndef WIDG_H
#define WIDG_H

#include <QWidget>

namespace Ui {
class widg;
}

class widg : public QWidget
{
    Q_OBJECT

public:
    explicit widg(QWidget *parent = 0);
    ~widg();

private:
    Ui::widg *ui;
};

#endif // WIDG_H 
```

widg.cpp

```
#include "widg.h"
#include "ui_widg.h"

widg::widg(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::widg)
{
    ui->setupUi(this);
}

widg::~widg()
{
    delete ui;
} 
```

请帮助我，我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:05:13.310

很难准确理解您的意图，但也许您的意思是：

```
void MainWindow::slotPush2()
{
    ui->verticalLayout_3->addWidget(new widg(this));
} 
```

# winapi - 在 mingw 汇编程序中使用 winapi

> ID：12755237
> 
> 赞同：1
> 
> 时间：2012-10-05T23:18:07.140
> 
> 标签：winapi, gcc, assembly, mingw, ld

我正在尝试将以下汇编代码编译到共享库（dll）中

```
.extern _GetProcAddress

.global _main
_main:
    CALL _GetProcAddress 
```

使用以下推荐：

```
i686-w64-mingw32-gcc -shared -o file.dll file.S 
```

但我收到以下链接错误：

```
`_GetProcAddress' referenced in section `.text' of /tmp/ccamwU4N.o: defined in discarded section `.text' of /usr/lib/gcc/i686-w64-mingw32/4.6/../../../../i686-w64-mingw32/lib/../lib/libkernel32.a(dxprbs00553.o) 
```

如何修复此错误并调用 winapi 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:08:33.073

这段代码：

```
// file: winapi0.s
.extern  ___main
.extern  _GetStdHandle@4
.extern  _WriteConsoleA@20

        .data
_text:
        .ascii "Hello World!\12\0"

        .section .text.startup,"x"
        .p2align 2,,3

.globl  _main
_main:
        leal    4(%esp), %ecx
        andl    $-16, %esp
        pushl   -4(%ecx)
        pushl   %ebp
        movl    %esp, %ebp
        pushl   %ecx
        subl    $52, %esp
        call    ___main
        movl    $-11, (%esp)
        call    _GetStdHandle@4
        pushl   %edx
        movl    $0, 16(%esp)
        leal    -12(%ebp), %edx
        movl    %edx, 12(%esp)
        movl    $14, 8(%esp)
        movl    $_text, 4(%esp)
        movl    %eax, (%esp)
        call    _WriteConsoleA@20
        subl    $20, %esp
        xorl    %eax, %eax
        movl    -4(%ebp), %ecx
        leave
        leal    -4(%ecx), %esp
        ret 
```

为我编译就好了：

```
gcc -Wall -O2 winapi0.s -o winapi0.exe 
```

它通过打印这个来工作：

```
Hello World! 
```

`-S`这是由 gcc 翻译成带有开关的汇编的这个 C 代码的稍微清理的版本：

```
// file: winapi.c
#include <windows.h>
#include <tchar.h>

TCHAR text[] = _T("Hello World!\n");

int main(void)
{
  DWORD err;

  WriteConsole(GetStdHandle(STD_OUTPUT_HANDLE),
               text,
               sizeof(text) / sizeof(text[0]),
               &err,
               NULL);

  return 0;
} 
```

我最初得到这个：

```
 .file   "winapi.c"
        .def    ___main;        .scl    2;      .type   32;     .endef
        .section        .text.startup,"x"
        .p2align 2,,3
        .globl  _main
        .def    _main;  .scl    2;      .type   32;     .endef
_main:
LFB14:
        .cfi_startproc
        leal    4(%esp), %ecx
        .cfi_def_cfa 1, 0
        andl    $-16, %esp
        pushl   -4(%ecx)
        pushl   %ebp
        movl    %esp, %ebp
        .cfi_escape 0x10,0x5,0x2,0x75,0
        pushl   %ecx
        .cfi_escape 0xf,0x3,0x75,0x7c,0x6
        subl    $52, %esp
        call    ___main
        movl    $-11, (%esp)
        call    _GetStdHandle@4
        pushl   %edx
        movl    $0, 16(%esp)
        leal    -12(%ebp), %edx
        movl    %edx, 12(%esp)
        movl    $14, 8(%esp)
        movl    $_text, 4(%esp)
        movl    %eax, (%esp)
        call    _WriteConsoleA@20
        subl    $20, %esp
        xorl    %eax, %eax
        movl    -4(%ebp), %ecx
        .cfi_def_cfa 1, 0
        leave
        leal    -4(%ecx), %esp
        .cfi_def_cfa 4, 4
        ret
        .cfi_endproc
LFE14:
        .globl  _text
        .data
_text:
        .ascii "Hello World!\12\0"
        .def    _GetStdHandle@4;        .scl    2;      .type   32;     .endef
        .def    _WriteConsoleA@20;      .scl    2;      .type   32;     .endef 
```

你不能对 64 位的情况做同样的事情吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T05:13:47.863

与包含您要调用的函数的 Windows DLL 的导入库链接。我*相信*该符号包含在 kernel32.dll 中。您需要创建一个导入库，然后与之链接。

# wso2 - WSO2 bps 3.0.0 如何安装 DSS 功能

> ID：12755241
> 
> 赞同：1
> 
> 时间：2012-10-05T23:18:52.010
> 
> 标签：wso2, wso2dss

如何将 DSS 功能安装到 wso2 bps 3.0.0？我尝试使用 [http://dist.wso2.org/p2/carbon/releases/4.0.1/进行功能管理](http://dist.wso2.org/p2/carbon/releases/4.0.1/)

我收到此错误：

```
Caused by: java.lang.Exception: HttpSession is null
        at org.wso2.carbon.feature.mgt.services.prov.utils.ProvWSUtils.getResolutionResult(ProvWSUtils.java:338)
        at org.wso2.carbon.feature.mgt.services.prov.ProvisioningAdminService.performProvisioningAction(ProvisioningAdminService.java:271)
        ... 11 more
[2012-10-06 00:43:26,584] ERROR {org.wso2.carbon.feature.mgt.ui.ProvisioningAdminClient} -  Error occured while performing provisioning action
org.apache.axis2.AxisFault: Error occured while performing provisioning action
        at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
        at org.wso2.carbon.feature.mgt.stub.ProvisioningAdminServiceStub$3.onFault(ProvisioningAdminServiceStub.java:991) 
```

有人可以提供更多关于如何做到这一点的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:47:05.827

BPS 3.0.0 和 DSS 3.0.0 尚未发布。它将在未来几天内发布。

# php - XML 未返回正确的结果格式

> ID：12755242
> 
> 赞同：0
> 
> 时间：2012-10-05T23:18:54.050
> 
> 标签：php, xml

我正在运行一个调用亚马逊 MWS API 的 php 脚本，并且我试图通过 isbn 号查询一本书。

我得到以下返回

```
SimpleXMLElement Object
(
    [GetMatchingProductResult] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [ASIN] => 1908256052
                    [status] => Success
                )

            [Product] => SimpleXMLElement Object
                (
                    [Identifiers] => SimpleXMLElement Object
                        (
                            [MarketplaceASIN] => SimpleXMLElement Object
                                (
                                    [MarketplaceId] => A1F83G8C2ARO7P
                                    [ASIN] => 1908256052
                                )

                        )

                    [AttributeSets] => SimpleXMLElement Object
                        (
                        )

                    [Relationships] => SimpleXMLElement Object
                        (
                        )

                    [SalesRankings] => SimpleXMLElement Object
                        (
                            [SalesRank] => Array
                                (
                                    [0] => SimpleXMLElement Object
                                        (
                                            [ProductCategoryId] => book_display_on_website
                                            [Rank] => 3304
                                        )

                                    [1] => SimpleXMLElement Object
                                        (
                                            [ProductCategoryId] => 271146
                                            [Rank] => 11
                                        )

                                    [2] => SimpleXMLElement Object
                                        (
                                            [ProductCategoryId] => 1039764
                                            [Rank] => 25
                                        )

                                    [3] => SimpleXMLElement Object
                                        (
                                            [ProductCategoryId] => 270704
                                            [Rank] => 38
                                        )

                                )

                        )

                )

        )

    [ResponseMetadata] => SimpleXMLElement Object
        (
            [RequestId] => bba76d27-9648-4988-b0b6-63b43116d16d
        )

) 
```

当我应该得到类似...

```
<?xml version="1.0"?>
<GetMatchingProductResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<GetMatchingProductResult ASIN="1908256052" status="Success">
  <Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
    <Identifiers>
      <MarketplaceASIN>
        <MarketplaceId>A1F83G8C2ARO7P</MarketplaceId>
        <ASIN>1908256052</ASIN>
      </MarketplaceASIN>
    </Identifiers>
    <AttributeSets>
      <ns2:ItemAttributes xml:lang="en-GB">
        <ns2:Author>Slimming World</ns2:Author>
        <ns2:Binding>Hardcover</ns2:Binding>
        <ns2:Format>Illustrated</ns2:Format>
        <ns2:IsEligibleForTradeIn>true</ns2:IsEligibleForTradeIn>
        <ns2:Label>Slimming World</ns2:Label>
        <ns2:Languages>
          <ns2:Language>
            <ns2:Name>english</ns2:Name>
            <ns2:Type>Unknown</ns2:Type>
          </ns2:Language>
          <ns2:Language>
            <ns2:Name>english</ns2:Name>
            <ns2:Type>Original Language</ns2:Type>
          </ns2:Language>
          <ns2:Language>
            <ns2:Name>english</ns2:Name>
            <ns2:Type>Published</ns2:Type>
          </ns2:Language>
        </ns2:Languages>
        <ns2:ListPrice>
          <ns2:Amount>16.99</ns2:Amount>
          <ns2:CurrencyCode>GBP</ns2:CurrencyCode>
        </ns2:ListPrice>
        <ns2:Manufacturer>Slimming World</ns2:Manufacturer>
        <ns2:NumberOfItems>1</ns2:NumberOfItems>
        <ns2:NumberOfPages>224</ns2:NumberOfPages>
        <ns2:PackageDimensions>
          <ns2:Height Units="inches">0.87</ns2:Height>
          <ns2:Length Units="inches">9.69</ns2:Length>
          <ns2:Width Units="inches">7.64</ns2:Width>
          <ns2:Weight Units="pounds">1.85</ns2:Weight>
        </ns2:PackageDimensions>
        <ns2:ProductGroup>Book</ns2:ProductGroup>
        <ns2:ProductTypeName>ABIS_BOOK</ns2:ProductTypeName>
        <ns2:PublicationDate>2011-11-20</ns2:PublicationDate>
        <ns2:Publisher>Slimming World</ns2:Publisher>
        <ns2:SmallImage>
          <ns2:URL>http://ecx.images-amazon.com/images/I/61aM-pJlQtL._SL75_.jpg</ns2:URL>
          <ns2:Height Units="pixels">75</ns2:Height>
          <ns2:Width Units="pixels">64</ns2:Width>
        </ns2:SmallImage>
        <ns2:Studio>Slimming World</ns2:Studio>
        <ns2:Title>Slimming World Extra Easy All in One</ns2:Title>
      </ns2:ItemAttributes>
    </AttributeSets>
    <Relationships/>
    <SalesRankings>
      <SalesRank>
        <ProductCategoryId>book_display_on_website</ProductCategoryId>
        <Rank>2767</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>271146</ProductCategoryId>
        <Rank>7</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>1039764</ProductCategoryId>
        <Rank>24</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>270704</ProductCategoryId>
        <Rank>38</Rank>
      </SalesRank>
    </SalesRankings>
  </Product>
</GetMatchingProductResult>
<ResponseMetadata>
  <RequestId>e8dd69e8-7a40-4cab-9793-a666c0648753</RequestId>
</ResponseMetadata>
</GetMatchingProductResponse> 
```

我使用的功能是

```
public function getXML($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    $response = curl_exec($ch);

    return simplexml_load_string($response);
} 
```

有什么我想念的吗？为什么返回不同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:22:30.383

该函数[`simplexml_load_string`](http://www.php.net/manual/en/function.simplexml-load-string.php)仅将解释的 XML 作为 SimpleXMLElement 对象返回。请尝试[`SimpleXMLElement::asXML`](http://www.php.net/manual/en/simplexmlelement.asxml.php)：

```
public function getXML($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    $response = curl_exec($ch);

    // return $xml if you still want to parse the data elsewhere
    $xml = simplexml_load_string($response);

    // return this if you just want the raw XML string
    return $xml->asXML();
} 
```

**更新：**如何解析和迭代元素...

SimpleXMLElement 对象是[可迭代](http://www.php.net/manual/en/class.iterator.php)和[可访问](http://www.php.net/manual/en/class.arrayaccess.php)的。这意味着您可以使用它`foreach`来迭代一个元素：

```
foreach ($xml->GetMatchingProductResult->Product as $product) {
    // do something for each <Product>, such as output the ASIN...
    echo $product->Identifiers->MarketplaceASIN->ASIN;
} 
```

您可以参考有关[Basic SimpleXML 用法](http://www.php.net/manual/en/simplexml.examples-basic.php)的 PHP 文档以获取更多示例。在某些时候，您将不得不处理名称空间。以下是一些额外的资源：

*   [使用 SimpleXML 使用命名空间解析 XML](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)
*   [http://www.sitepoint.com/simplexml-and-namespaces/](http://www.sitepoint.com/simplexml-and-namespaces/)

# c# - 此命令至少需要两行源数据

> ID：12755248
> 
> 赞同：4
> 
> 时间：2012-10-05T23:20:17.713
> 
> 标签：c#, .net, excel, interop

我收到此错误：

```
This command requires at least two rows of source data. You cannot use the command on a selection in only one row. Try the following:

- If you're using an advanced filter, select a range of cells that contains at least two rows of data. Then click the Advanced Filter command again.
- I you're creating a PivotTable, type a cell reference or select a range that includes at least two rows of data 
```

在这行代码上间歇性地：

```
xlWorkBook.RefreshAll(); 
```

有两个工作表。一个有数据透视表，一个有原始数据。有时只有一行数据。对于多行数据，上面的代码行**总是有效**的；但是，对于只有 1 行数据，上面的代码**有时**可以工作，有时我会收到上面的错误消息。

除此之外，包含数据透视表的工作表**不会**刷新；但是，如果我重新打开文件，它也**不会**刷新，除非我手动显式刷新它。

这里发生了什么？为什么我*有时会收到此错误？*

非常感谢您的指导。

如果有帮助，我将包括整个方法：

```
private void SortandCreateFile(string column, string email, string emailStartPos) {
    string replacetext = "";

    try {
        var valueRange = xlWorkSheet.get_Range(column + emailStartPos, column + range.Rows.Count.ToString());
        var deleteRange = valueRange;
        xlApp.Visible = false;
        int startpos = 0;
        int endPos=0;
        bool foundStart = false;

        Excel.Range rng = xlWorkSheet.get_Range(column + "1", column + range.Rows.Count.ToString());

        string tempstring = "d";
        int INTemailStartPos = Convert.ToInt16(emailStartPos);

        for (int rCnt = INTemailStartPos; rCnt <= rng.Count; rCnt++) {
            Excel.Range cell = (Excel.Range)rng[rCnt, 1];

            try {
                if (cell.Value2 != null)
                    tempstring = cell.Value2.ToString();
                else {
                    startpos = rCnt;
                    releaseObject(cell);  /////////
                    break;
                }
            }
                catch (Exception ee)
            {
            MessageBox.Show(ee.ToString());
        }
        //grab the text from column link texdtbox
        Excel.Range rngLinkColumn;
        Excel.Range replacetextcell=null;

        if (FormControls.ColumnLink.Length > 0) {
            rngLinkColumn = xlWorkSheet.get_Range(FormControls.ColumnLink + "1", FormControls.ColumnLink + range.Rows.Count.ToString());
            replacetextcell = (Excel.Range)rngLinkColumn[rCnt, 1];
        }    
        //locate email
        if (cell.Value2.ToString() == email ) {
            //we found the starting position of the email we want!
            //this will tell us which row of data to start from
            startpos = rCnt;

            if (FormControls.ColumnLink.Length > 0)
                replacetext = replacetextcell.Value2.ToString();
            releaseObject(cell);  /////////
            break;
        }
        releaseObject(cell);
    }
    int foundstartminusONE = startpos - 1;
    int rngcount = rng.Count + INTemailStartPos;

    //delete everything from the top UNTIL the row of the email address that we need
    if (startpos != INTemailStartPos) {
        deleteRange = xlWorkSheet.get_Range(column + INTemailStartPos.ToString() + ":" + "CF" + foundstartminusONE.ToString(), Type.Missing);
        deleteRange = deleteRange.EntireRow;
        deleteRange.Delete(Excel.XlDeleteShiftDirection.xlShiftUp);
    }

    for (int rCnt = INTemailStartPos; rCnt <= rng.Count; rCnt++) {
        Excel.Range cell = (Excel.Range)rng[rCnt, 1];

        try {
            if (cell.Value2 != null )
                tempstring = cell.Value2.ToString();
            else {
                endPos = rCnt - 1;
                releaseObject(cell);////////
                break;
            }
        }
        catch (Exception ee) {
            //MessageBox.Show(ee.ToString());
        }    
        //locate email
        if (cell.Value2.ToString() != email ) {
            //we found where the last email address is that we need
            //this is where the issue is occurring i think with the deleting the last row
            endPos = rCnt;
            releaseObject(cell);////////
            break;
        }
        releaseObject(cell);
    }

    //delete all the stuff AFTER the email address that we need
    if (endPos != 0) {
        deleteRange = xlWorkSheet.get_Range(column + endPos + ":" + "CF" + rngcount.ToString(), Type.Missing);
        deleteRange = deleteRange.EntireRow;
        deleteRange.Delete(Excel.XlDeleteShiftDirection.xlShiftUp);
    }

    //when the user opens the excel file, we want the focus to be here
    var rangehome = xlWorkSheet.get_Range(FormControls.FocusOn, FormControls.FocusOn);
    xlWorkSheet.Activate();
    rangehome.Select();

    string filename = xlWorkBook.Path + @"\" + email + ".xlsx";
    string fileSubstring = filename.Substring(0, filename.IndexOf(".xlsx"));
    string randomfileString = Guid.NewGuid().ToString("N").Substring(0, 10) + ".xlsx";
    string targetfilenameRename = fileSubstring + randomfileString;

    //((Excel.Worksheet)this.Application.ActiveWorkbook.Sheets[FormControls.WorksheetFocus]).Activate();
    //((Excel.Worksheet)Excel.Application.ActiveWorkbook.Sheets[1]).Activate();  

    Excel.Worksheet xlWorkSheetFocus = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(FormControls.WorksheetFocus);
    xlWorkSheetFocus.Activate();
    xlWorkBook.SaveAs(targetfilenameRename, Excel.XlFileFormat.xlWorkbookDefault, Type.Missing, Type.Missing,
                false, false, Excel.XlSaveAsAccessMode.xlNoChange,
                Type.Missing, Type.Missing, Excel.XlSaveConflictResolution.xlLocalSessionChanges, Type.Missing, Type.Missing);

    try {
        xlWorkBook.RefreshAll();
    }
    catch { }
        xlWorkBook.Save();
        string targetfile = xlWorkBook.Path + @"\" + FormControls.FileName + " - "
                    + email.Substring(0, email.IndexOf("@")) + ".xlsx";
        System.IO.File.Copy(targetfilenameRename, targetfile, true);

        string body = FormControls.eMailBody;
        body = body.Replace("%replacetext%", replacetext);
        //replace %replacetext% in body
        string targetfileSubstring = targetfile.Substring(0, targetfile.IndexOf(".xlsx"));
        string randomString = Guid.NewGuid().ToString("N").Substring(0, 10)+".xlsx";
        string targetfileRename = targetfileSubstring+randomString;

        while (true) {
            try {
                SendEmail(targetfile, email, FormControls.eMailSubject, body,FormControls.eMailFrom);                                  
            }
            catch (Exception ee) {
                MessageBox.Show(ee.ToString());
                continue;
            }

            // all is good
            break;
        }
        releaseObject(valueRange);
        releaseObject(deleteRange);
        File.Copy(targetfile, targetfileRename, true);
    }
    catch (Exception e) {
        MessageBox.Show(e.ToString());
    }
    finally {
        //DisposeMe();
        // Release all COM RCWs.
        // The "releaseObject" will just "do nothing" if null is passed,
        // so no need to check to find out which need to be released.
        // The "finally" is run in all cases, even if there was an exception
        // in the "try". 
        // Note: passing "by ref" so afterwords "xlWorkSheet" will
        // evaluate to null. See "releaseObject".
        releaseObject(range);
        releaseObject(xlWorkSheet);
        releaseObject(xlWorkBook);
        // The Quit is done in the finally because we always
        // want to quit. It is no different than releasing RCWs.
        if (xlApp != null) {
            xlApp.Quit();
        }
        releaseObject(xlApp);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T19:59:14.040

我可以使用数据透视表复制此错误的唯一方法是尝试在没有列标题的范围内创建一个，就像 Stephan1010 答案的屏幕截图一样。

在*GetPivotData* Excel 函数中，透视字段由它们的名称 ( `=GETPIVOTDATA("EmailAddress",$A$3)`) 引用；因此，禁止没有它们的数据源是有意义的。

解决方案是当您选择范围和*格式为表格*（从功能区）时，在 Excel中旋转 a`ListObject`而不是- ，结果将跨越的表格；第一行的内容成为列标题，第二行是有效的空记录。有趣的是，无论您是否选中“我的表有标题”复选框，都会发生这种情况（2 行跨度）（数据将移动到第一行并且表将包含默认的“Column1”-“Column2 "-"Column3" 标题，如果复选框被清除）。`Range``$A$1:$C$1`*`$A$1:$C$2`*

 *换句话说，a`ListObject`始终*是*数据透视表的有效数据源，而 a`Range`可能不包含足够的行。此外，如果您没有列标题并且使用 range 创建数据透视表`$A$1:$C$2`，则 at 的记录`$A$1:$C$1`将用作列标题，这意味着第一条记录将丢失。

从您提供的代码中，我假设数据透视表已经存在并连接到包含宏的模板工作簿中的某个 [named?] 范围。将您的范围变成表格可能就像从功能区中选择*表格格式一样简单。*然后你可以有这样的代码来删除所有不必要的行，同时仍然为数据透视表保留一个有效的数据源：

```
 public void DeleteExtraTableRows(string emailAddress, Excel.ListObject table)
    {
        try
        {
            var rowIndex = 0;
            var wasDeleted = false;
            while (rowIndex <= table.ListRows.Count)
            {
                if (!wasDeleted) rowIndex++;
                var row = table.ListRows[rowIndex];

                var range = (Excel.Range)row.Range.Cells[1, 1];
                var value = range.Value2;

                if (value != null && !string.Equals(emailAddress, value.ToString()))
                {
                    row.Delete();
                    wasDeleted = true;
                }
            }
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message + "\n\n" + e.StackTrace);
        }
    } 
```

也有可能`email`在循环的条件中永远找不到`if (cell.Value2.ToString() == email )`，这最终会从您的范围中删除所有行 - 即使唯一的区别是单元格内值末尾的额外空格也是如此。使用上面的代码，即使所有电子邮件地址都被删除，数据源对于将连接到它的数据透视表仍然是有效的。

编辑：在 Excel 中，您可以通过选择相关范围并单击“*主页”选项卡中的“**格式化为表格*功能区”按钮将 a`Range`转换为 a 。或者，您可以像这样创建一个：`ListObject`

 **```
 var range = ((Excel.Range)(worksheet.Range[worksheet.Cells[1, 1], worksheet.Cells[3, 1]]));
            var table = worksheet.ListObjects.Add(SourceType: Excel.XlListObjectSourceType.xlSrcRange, Source: range,
                                      XlListObjectHasHeaders: Excel.XlYesNoGuess.xlYes);
            table.TableStyle = "TableStyleMedium3"; 
```

在代码中，您可以`ListObjects`使用以下属性访问工作表上的所有内容`ListObjects`：

```
 var worksheet = (Excel.Worksheet) Globals.ThisAddIn.Application.ActiveSheet;
        var tables = worksheet.ListObjects; 
```

`ListObject`然后，您可以通过几种不同的方式访问特定的/table：

```
 var myTable = tables[1];
        var myTable = tables.Item["Table1"];
        var myTable = tables.OfType<Excel.ListObject>().FirstOrDefault(t => t.Name == "Table1"); 
```

随着从表中添加行，它所引用的实际范围将相应扩大；用于`myTable.Range`访问有问题的范围。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T11:10:21.423

我想这种情况的发生是因为你得到了数据透视表。导致全部刷新也会触发数据透视表的刷新命令。看看下面的代码。它可能会让您对此有所了解。我确定它不是大约 1 行。我检查过它一切正常，最有可能是由数据透视表引起的。

```
Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
Microsoft.Office.Interop.Excel.Workbook xlWorkbook = xlApp.Workbooks.Open("some.xlsx");
// For each worksheet we got
foreach (Microsoft.Office.Interop.Excel.Worksheet worksheet in xlWorkbook.Sheets) 
{   // and each pivot table in each worksheet
    foreach (Microsoft.Office.Interop.Excel.PivotTable pivot in worksheet.PivotTables())
    {   // disable BackgroundQuery
        pivot.PivotTableWizard(BackgroundQuery: false);
    }
}
// try to refresh all sheet
try { xlWorkbook.RefreshAll(); } catch { }
// then save
xlWorkbook.Save(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T18:55:48.553

显而易见的答案似乎是，*有时*您将一行数据作为数据透视表的来源，而*有时*您却没有——即使您认为自己仍然如此。我无法为一行数据创建数据透视表（或更改数据透视表的来源）：

![数据透视表错误说明](../Images/6472b45d60e095c1a5e830dbc592f5e0.png)

但是，如果您能够以某种方式找到一种方法来做到这一点，那么您已经找到了答案。仅从实践/理论的角度来看，没有理由不能将一行数据作为源，但看起来 excel 试图阻止这种情况的发生（可能是因为代码假设有两行）。因此，如果您确实找到了方法，那么它可能是一个错误。祝你好运。***

# c# - 知道结构内的变量何时在 Visual Studio 中变为空？

> ID：12755249
> 
> 赞同：2
> 
> 时间：2012-10-05T23:20:32.893
> 
> 标签：c#, visual-studio, debugging

我在服务器端有一个结构，布局如下：

```
struct SomeStruct
{
    public string SomeString { get; set; };
    public string SomeString1;
    public string SomeString2;
    public string SomeString3;
} 
```

我正在使用客户端/服务器模型，并且该结构的一个实例被引用了很多次，因为它具有非常重要的信息（超过 200 次）。

问题是当某个函数被调用时，这个结构中的值变为空。我不知道为什么，它一直困扰着我很长时间。

在意识到这个值为空之前，我调用了很多方法，所以我不知道我的代码的哪一部分使我的字符串无效。

我正在使用 VS2012，但我也有 2010 和 2008 终极版。我想知道当某些代码部分使我的字符串无效时是否有一种方法可以执行触发器。

我尝试添加一些这样的属性，但从未抛出异常：

```
struct SomeStruct {
    string somestr;
    public string SomeString
    {
        get { return somestr; }
        set
        {
            if (value == null)
            {
                throw new Exception("stirng is null");
            }

            somestr = value;
        }
    }
    public string SomeString1;
    public string SomeString2;
    public string SomeString3;
} 
```

可能不重要，但这是我正在使用的结构之一（Name 变量在我的代码的某些部分变为 null，其余变为 default()）：

```
[ProtoContract]
public struct CharacterInformation
{
    [ProtoMember(2)]
    public string Name;
    [ProtoMember(3)]
    public IntegerVector2 Position;
    [ProtoMember(5)]
    public CharacterDirection Direction;
    [ProtoMember(6)]
    public CharacterStatus Status;
    [ProtoMember(7)]
    public CharacterClass Class;
    [ProtoMember(8)]
    public CharacterRace Race;
    [ProtoMember(9)]
    public CharacterType Type;
    [ProtoMember(10)]
    public CharacterFaction Faction;
    [ProtoMember(11)]
    public float MovementModifier;
    [ProtoMember(12)]
    public CharacterEquipment Equipment;
} 
```

**编辑：**此结构的唯一实例是在与 Sql 相关的函数上创建的：

```
public CharacterServerInformation GetInformation(int charID)
        {
            CharacterServerInformation information = new CharacterServerInformation();
            if (!authInstance.CharacterExists(charID))
            {
                // char doesn't exists
                throw new Exception("Character doesn't exists");
            }
            information.ID = charID;
            information.Experience = GetExperience(charID);
            information.Info.Direction = CharacterDirection.Bottom;
            information.Info.Name = authInstance.CharacterGetName(charID);
            information.Info.Class = GetClass(charID);
            information.Info.Faction = GetFaction(charID);
            information.Info.Position = GetPosition(charID);
            information.Info.Race = GetRace(charID);
            information.Info.Status = GetStatus(charID);
            information.Info.Type = GetType(charID);
            information.Info.MovementModifier = 1f; // should store old movement modifier, but well, whatever
            information.HealthLeft = GetHealthLastLogout(charID);
            return information;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:33:56.023

我怀疑问题纯粹是因为您正在使用`struct`而不是制作`class`. 由于`struct`成员按值复制到方法中，并且当从方法（包括属性获取器）返回时，您很可能会因在`struct`某处意外写入新内容而“丢失”信息。

在这种情况下，`class`似乎更合适。如果您阅读[Choosing Between Classes and Structures](http://msdn.microsoft.com/en-us/library/vstudio/ms229017%28v=vs.100%29.aspx)，您会发现`struct`仅应在以下情况下使用它：

*   它在逻辑上表示单个值，类似于原始类型（整数、双精度等）。
*   它的实例大小小于 16 字节。
*   它是不可变的。
*   它不必经常装箱。

在你的情况下，所有这些标准（可能除了最后一个）都被违反了，所以`class`会更合适。

# node.js - 在 node.js 中，如何使用 socket.io 和 express 设置 redis？具体使用 RedisStore()

> ID：12755250
> 
> 赞同：7
> 
> 时间：2012-10-05T23:20:38.343
> 
> 标签：node.js, session, express, redis, socket.io

**第一个问题**
我试图弄清楚会话、商店、授权和redis。如果它很重要，我正在使用`Express@3.0.0rc4`. 我知道我有两种选择来放置我的`RedisStore()`. 我用哪一个？我两个都用吗？

```
express.session({secret: 'secret', key: 'key', store: new RedisStore()});
io.set('store', new RedisStore()); 
```

我已经有`node.js`, `express`, 并且`socket.io`正在运行。所以现在我正在尝试实现`redis`，但我不知道如何使用会话/存储来实现授权，也不知道如何写入 redis 数据库。我还没有找到任何关于此的文档。我找到了一个使用[socket.io 和 express](http://www.danielbaulig.de/socket-ioexpress/)但没有 redis 讨论会话和存储的站点，另一个[使用所有三个](http://iamtherockstar.com/blog/2012/02/14/nodejs-and-socketio-authentication-all-way-down/)讨论会话和存储的站点，但它不使用`io.set('store', ...)`.

我也不知道我是否应该使用两个不同的商店，一个 for`express`和一个 for `socket.io`，或者我应该只使用一个。查看示例以进行说明：

```
//Redis Variables
var redis = require('socket.io/node_modules/redis');
var RedisStore = require('socket.io/lib/stores/redis');
var pub = redis.createClient();
var sub = redis.createClient();
var client = redis.createClient();
var redis_store = new RedisStore({
                        redisPub: pub,
                        redisSub: sub,
                        redisClient: client
                      });

app.configure(function(){
  //...code goes here...
  app.use(express.session({
                    secret: 'secret',
                    key: 'key',
                    store: redis_store  //Notice I'm using redis_store
                  }));
  //...more code...
});

io.configure(function(){
  io.set('store', redis_store);  //Notice it's the same RedisStore() being used
}); 
```

我`RedisStore()`每个人都使用相同的吗？我是否为每个创建单独的？我只使用`express`or`socket.io`吗？我真正想要的是能够对客户端进行身份验证（我假设这是通过会话完成的）并让他们在连接时更新 redis 数据库——记录人们何时访问我的网站。这导致了我的第二个问题。

* * *

**第二个问题**
所以我不知道如何从这一点访问和编辑redis数据库。由于我的第一个问题，我无法对此进行测试，但我认为它会是这样的：

```
io.sockets.on('connection', function(socket){
  var session = socket.handshake.session;
  redis.put(session);
}); 
```

我也没有看到任何关于如何从 node.js 中更新 redis 数据库的文档，所以我*非常怀疑*这`redis.put()`是正确的术语哈哈。我访问过[redis 的网站](http://redis.io/)，但找不到 node.js 的命令。只是从命令行使用常规 redis 的命令。无论如何，如果有人至少可以为我指出正确的方向，那就太好了。谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:34:27.917

如您所见，Express 和 Socket.IO 与 Redis 有自己的集成以进行会话管理。它被设计为黑盒集成，其想法是会话存储实现独立于您的其余代码。既然是独立的，那就意味着你不能进去直接使用express或者socket.io来访问Redis。您需要添加一个常规的 redis 客户端，例如 node_redis。好处是您不必担心自己进行所有这些 redis 调用，相反，您将与 express 或 socket.io 的会话存储接口进行交互。

因此，在您的#1 案例中，您可以传入一个新的 RedisStore 实例，而不是像您所做的那样传入两个新实例。或者您可以按照您的第二个链接并让 socket.io 通过 express 收听。在这种情况下，它将与快速会话管理集成。这就是为什么您在该示例中看不到额外的 io.set('store') 调用。

它可能对您来说似乎是多余的，但请尝试将 RedisStore 视为仅为会话管理而设计的特殊客户端。即使 RedisStore 可能依赖于 node_redis 之类的东西，你也不应该尝试访问它。你必须包含另一个库来直接访问你的 redis 数据库，假设你想首先将其他非会话项目存储在 redis 中。

# java - 基本 Java 程序不会在 Blue-J 中运行

> ID：12755262
> 
> 赞同：0
> 
> 时间：2012-10-05T23:22:42.083
> 
> 标签：java, bluej

所以我应该为我的编程课程实验室的介绍制作一台自动售货机。到目前为止，这就是我的 Java 代码的样子。

```
import java.util.Scanner;
public class VendingMachine
{
       public static void main (String[] args)
    {
 Scanner keyboard = new Scanner(System.in);

final int quarter = 25;
final int dime = 10;
final int nickel = 15;
int cost = keyboard.nextInt ();

int totalChange = 100 - cost;
int totalQuarters= totalChange/quarter;
totalChange = totalChange % quarter;
int totalDimes = totalChange/dime;
totalChange = totalChange % dime;
int totalNickels = totalChange/nickel;
totalChange = totalChange % nickel;

System.out.print("Enter Price for your item" + "30" );

 }
} 
```

我需要它做的是这个。

```
Enter a price for item (from 25 cents to a dollar, in 5-cent increments): 45

You bought and item for 45 cents and gave me a dollar, so your change is

 2 quarters,

 0 dimes, and

 1 nickels. 
```

使用值 30、65 和 100。由于某种原因，程序不会在 Blue J 中启动..所以我知道推荐使用 Eclipse，但我想我想用 Blue J 完成这个实验，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:27:27.070

我的猜测是程序正在启动，但您没有意识到它，因为它正在等待输入。

移动包含扫描输入`System.out.print("Enter Price for your item" + "30" );`上方的行。`keyboard.nextInt`像这样：

```
System.out.print("Enter Price for your item" + "30" );
int cost = keyboard.nextInt (); 
```

# ssrs-2008 - SSRS 共享文件夹订阅凭据

> ID：12755266
> 
> 赞同：0
> 
> 时间：2012-10-05T23:22:59.133
> 
> 标签：ssrs-2008, reporting-services

我们正在创建报告并尝试使用共享文件夹来提供它们，为此添加订阅，但是当我们将其创建为用户凭据时，我们可以将它们添加为测试建议，但环境在产品上，出于安全原因，我们无法放置凭据因为 IT 出于安全原因使用所有 Windows 身份验证。

是否有任何方法可以设置 Windows 用户在配置时将文件传递到共享文件夹而不添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:47:07.873

数据库和数据库服务器的参数可以在数据源中设置为表达式，但是您也需要定义一个“ReportAdmin”用户来始终发布报告。发布者应该在部署之前知道凭据。除此之外，数据源会犹豫并通知它需要凭据来运行操作:(

# javascript - 如何在 dojo.connect 中传递元素

> ID：12755267
> 
> 赞同：1
> 
> 时间：2012-10-05T23:23:23.687
> 
> 标签：javascript, dojo, event-handling, thumbnails, mouseover

我正在 dojo 中创建一个小部件，可在鼠标悬停时放大缩略图。

小部件将 mouseover 事件与构造函数中的所有缩略图绑定，如下所示：

```
dojo.connect(imgTag, "mouseover", this, "_showImgPreview"); 
```

在 _showImgPreview() 中，我需要发生鼠标悬停事件的图像。通过以上操作，我只得到事件而不是图像。

如何获取 _showImgPreview() 中发生的事件的缩略图？

我知道我可以这样做，但我有兴趣知道如何使用上述方法来做到这一点。

```
var self = this;
dojo.connect(imgTag, "mouseover", function(e){
   self._showImgPreview(e, this);
}); 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:33:24.333

`e.target`将是 imgTag。

如果您在扩展 Widget 的类中，则可以使用

```
this.connect(imgTag, "mouseover", "_showImgPreview"); 
```

如果你不是，你可以使用

```
dojo.connect(imgTag, "mouseover", dojo.hitch(this, this._showImgPreview)); 
```

注意：`dojo/connect`已被弃用，取而代之的是`dojo/on`

# php - 托管 PHP 的持续集成？

> ID：12755268
> 
> 赞同：4
> 
> 时间：2012-10-05T23:23:27.483
> 
> 标签：php, continuous-integration, jenkins

我只是想检查是否有人知道使用 PHP 为基于 Web 的项目制作的任何托管持续集成服务？

我一直在寻找，但大多数都是为 Java、Ruby 和一些 iOS/Android 制作的。我正在恢复使用 Jenkins 设置我自己的 CI 服务器。我猜 PHP 端对 CI 的需求不足以证明托管服务支持现成的它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T09:19:09.690

[Quora](https://www.quora.com/Travis-CI/What-are-the-alternatives-to-Travis-CI-Are-there-any-alternative-hosted-CI-services-for-open-source-projects/answer/Moritz-Plassnig)上有一个托管的持续集成提供商列表。

其中一些还支持 PHP：

*   circleci.com
*   无人机.io
*   codeship.io（免责声明：我是联合创始人之一）
*   travis-ci.org

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T23:58:30.400

[CircleCi](https://circleci.com)支持大多数网络应用程序，我们有很多使用 PHP 的用户。您必须提供自己的测试命令，但您应该能够在几分钟内完成设置，并且您需要的所有数据库和库都应该可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T08:48:42.843

查看所有现有持续集成托管服务的评论：[http ://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html](http://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html)

# spring - 如何从 Spring 应用程序中使用 OpenCMIS 在 Alfresco 中查找模板？

> ID：12755269
> 
> 赞同：0
> 
> 时间：2012-10-05T23:23:38.493
> 
> 标签：spring, templates, alfresco, opencmis

我正在使用 Spring 3.1 应用程序，我需要在 Alfresco 的存储库中找到一个字符串模板文档。我已经可以在露天使用 OpenCMIS 创建文件，但我不知道如何找到模板，所以如果有人知道如何做或给我一个例子，请告诉我，提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:36:13.363

您可以使用许多选项。首先，您需要有一个唯一标识您的文档的标准。下面我将展示一些，希望您的案例属于其中之一，或者它们会激励您找到正确的解决方案。以下使用伪代码，请查看使用 Java 客户端 API 的[OpenCMIS 开发指南](http://chemistry.apache.org/java/developing/guide.html)。

**凭身份证**

通过 CMIS 创建文档后，您将获得它的唯一 ID，您可以将其存储在应用程序中以供以后检索。

```
Map<String, Object> templateProperties = createDocumentProperties();
Folder folder = getTemplatesFolder();
ObjectId templateId = createTemplateIn(folder);
storeTemplateId(templateId.getId(), templateProperties); // persist the ID
...
// later on
...
String id = getTemplateId(); // retrieve the ID
Session session = openCMISSession();
Document template = (Document)session.getObject(id); 
```

**按路径**

与前面的示例类似，您必须记下文档的存储位置而不是其 ID，或者有一种手动构建路径的方法。

```
String path = getTemplatePath(); // either recover it from DB or construct a path
Document template = (Document)session.getObjectByPath(path); 
```

**按物业价值**

假设您可以在模板 Document 上使用特定的元数据字段，以便之后轻松检索它（例如，您为您的用例创建了一些特定的[Alfresco 元数据模型](http://wiki.alfresco.com/wiki/Data_Dictionary_Guide)）。

```
String meta = TemplateProperties.TEMPLATE_ID; // e.g. my:templateId
String type = TemplateProperties.TEMPLATE_TYPE; // e.g. my:template
String templateMeta = "TEMPLATE1";
Map<String, Object> templateProperties = createDocumentProperties();
templateProperties.put(meta, templateMeta);
templateProperties.put(PropertyIds.OBJECT_TYPE_ID, type);
createTemplate(templateProperties);
...
// later on
...
String type = TemplateProperties.TEMPLATE_TYPE; // e.g. my:template
String meta = TemplateProperties.TEMPLATE_ID;
String tplId = "TEMPLATE1";
String query = String.format("SELECT * FROM % WHERE % = '%'", type, meta, tplId);
ItemIterable<QueryResult> i = session.query(query, false);
QueryResult qr = i.iterator().next(); // let's assume we have one single match
String templateId = qr.getPropertyByQueryName("cmis:objectId").getFirstValue()
Document template = (Document)session.getObject(templateId); 
```

**按查询**

前面的方法实际上并不依赖于按属性名称进行搜索，并且可以轻松扩展以使用任何类型的标识您的模板的查询。[查看有关其CMIS 查询语言](http://wiki.alfresco.com/wiki/CMIS_Query_Language)实现详细信息的 Alfresco 页面，以了解更多查询存储库的方法。

# java - 带锁的单例 - 可能的死锁？在java中

> ID：12755282
> 
> 赞同：2
> 
> 时间：2012-10-05T23:25:22.927
> 
> 标签：java, singleton, deadlock, database-deadlocks

我使用单例记录系统中同时发生的所有事件。

```
public class Singleton {
  private static Lock dbLock;
  protected Singleton() {}
  private static class SingletonHolder { 
      private final static Singleton instance = new Singleton();
  }
  public static Singleton getInstance() {
      return SingletonHolder.instance;
  }
  public void recordEvent(Event ev) {
       dbLock.lock();
    try {
          database.insert(ev);
        } finally {
         dbLock.unlock();
    }
  }
  public File lockAndGetDB() {
      dbLock.lock();
      return database.getFile();
  }
  public void unlockDB() {
      dbLock.unlock();
  }
} 
```

每隔几个小时，我想锁定记​​录事件以通过 Internet 发送数据库。

```
file = Singleton.getInstance().lockAndGetDB();
try {
  sendViaHTTP(file);
}
finally {
   Singleton.getInstance().unlock();
} 
```

有没有可能的死锁？它是线程安全的吗？

已编辑。（尝试/最终添加用于通过HTTP 发送）但这不是主要问题。问题是，是否有线程在等待 dbLock.lock(); 在 recordEvent(Event ev) 是我的 Singleton.getInstance().unlock(); 将能够输入 getInstance() 代码并解锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:41:11.823

很可能，是的，可能会出现死锁。`database.getFile`如果在or期间发生错误会发生`sendViaHTTP`什么？没有`try/finally`模式可以确保`Lock.unlock`被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:40:27.527

当您以不同的顺序获取锁时，就会出现死锁。由于这里只有一个实际的锁，因此不存在问题。

在我看来，您的情况更像是读写锁的候选者：使用读锁来允许 DBMS 操作的最大并发性，并在您希望它们停止并发送文件时使用写锁。

# php - iconv_get_encoding 在某些主机中不可用

> ID：12755284
> 
> 赞同：2
> 
> 时间：2012-10-05T23:25:55.267
> 
> 标签：php

我正在使用[iconv_get_encoding](http://php.net/manual/en/function.iconv-get-encoding.php)但一些主机编译 PHP 时没有 iconv 扩展名（默认情况下启用）。

你推荐这个功能的哪个替代品？

带有[Zend Framework 类的系统使用此函数来验证主机名](http://framework.zend.com/manual/1.11/en/zend.validate.set.html#zend.validate.set.hostname)

这是使用的代码部分：(...)

```
 // Check input against DNS hostname schema
        if ((count($domainParts) > 1) && (strlen($value) >= 4) && (strlen($value) <= 254)) {
            $status = false;

            $origenc = iconv_get_encoding('internal_encoding');
            iconv_set_encoding('internal_encoding', 'UTF-8');
            do {
                // First check TLD
                $matches = array();
                if (preg_match('/([^.]{2,10})$/i', end($domainParts), $matches) ||
                    (end($domainParts) == 'ایران') || (end($domainParts) == '中国') ||
                    (end($domainParts) == '公司') || (end($domainParts) == '网络')) { 
```

(...)

# ruby-on-rails - 红宝石图片审查宝石

> ID：12755286
> 
> 赞同：2
> 
> 时间：2012-10-05T23:26:19.087
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Ruby 新手，想学习如何构建一个 gem，让用户能够感知他们上传的照片的不同部分。因此，任何教程、git 存储库或类似的 gem 都将不胜感激！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:35:39.330

检查[RMagick](http://rubygems.org/gems/rmagick)。

[`blur`方法可能是您正在寻找的。](http://www.imagemagick.org/RMagick/doc/imageattrs.html#blur)

# java - 可以停止使用 httpConnection.connect() 连接到 URL 的线程吗？

> ID：12755290
> 
> 赞同：7
> 
> 时间：2012-10-05T23:27:04.643
> 
> 标签：java, android, multithreading, urlconnection, httpconnection

我有一个线程连接到一个 url 以获取一些数据。

有时该方法`httpConnection.connect();`花费了太多时间来获得响应，我想将此连接线程的加载对话框限制为 5 段。

我尝试在代码中添加超时，**但它不起作用**！

```
URL formattedUrl = new URL(url); 
            URLConnection connection = formattedUrl.openConnection(); 
            connection.setConnectTimeout(5000);
            connection.setReadTimeout(5000);
            HttpURLConnection httpConnection = (HttpURLConnection) connection;
            httpConnection.setAllowUserInteraction(false);
            httpConnection.setInstanceFollowRedirects(true);
            httpConnection.setRequestMethod("GET");
            httpConnection.setConnectTimeout(5000);
            httpConnection.setReadTimeout(5000);
            httpConnection.connect(); 
```

所以，我必须在 5000 秒过去或当用户按下手机上的返回键时停止连接方法和线程。

如何做到这一点？我找不到有关在带有 url 连接线程的 android 中执行此工作的信息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T03:25:30.473

Brent Worden 的答案是正确的。但是他的解决方案有问题。如果任务超时启动，调用的线程`future.get`将按预期获得异常。但是，正在执行该`Runnable.run()`方法的工作线程*可能*仍会卡在等待连接或读取完成。

解决这个问题很困难。据我所知，解除正在等待套接字连接或套接字流读取或写入的线程的唯一可靠方法是调用`close()`该`Socket`对象。使用这种方法（这里）的问题是标准`HttpUrlConnection`对象没有暴露`Socket`对象。

我的建议是使用 Apache Http 客户端库。这个问题解释了如何在使用 HttpClient 时中止请求：[取消 HttpClient 请求](https://stackoverflow.com/questions/5400258/cancel-an-httpclient-request)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T01:41:10.950

URLConnection 上的超时设置不足以提供所需的超时控制。原因是：

*   setConnectTimeout() 设置与服务器建立连接的超时时间。因此，只有在打开连接时，无法在规定的时间内建立连接时才会触发超时。

*   setReadTimeout() 设置读取可用数据的超时时间。**为此，只有在任何单个**读取操作阻塞超过设置的时间量时才会触发超时。因此，即使在慢速连接上，每个读取操作也很有可能永远不会接近超时阈值，但是读取所有数据的总时间相当长。

将超时应用于整个读取工作单元的一种解决方案是使用 Java 5 及更高版本中的并发功能。特别是，使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)和[Future](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)就足够了。

```
Runnable task = new Runnable() {
    public void run() {
        // original code to read data from a URL
    }
};

ExecutorService executor = Executors.newSingleThreadExecutor();  // or any other implementation
Future<?> future = executor.submit(task);
try {
    future.get(5, TimeUnit.SECONDS); // wait 5 seconds for task to complete
    // success
} catch (TimeoutException ex) {
    // handle timeout
} finally {
    executor.shutdownNow(); // cleanup
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T23:42:32.363

您只需要调用[URLConnection.setConnectTimeout(millis)](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html#setConnectTimeout%28int%29)即可实现您的要求。如果指定的超时到期，则抛出[SocketTimeoutException 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/SocketTimeoutException.html)

```
try {
   HttpURLConnection con = (HttpURLConnection) new URL(url).openConnection();
   con.setConnectTimeout(5000); //set timeout to 5 seconds
} catch (java.net.SocketTimeoutException e) {
   //DO SOMETHING
} catch (java.io.IOException e) {
  //DO SOMETHING
} 
```

值得注意的是，它说了以下内容：

> 此方法的一些非标准实现可能会忽略指定的超时。要查看连接超时设置，请调用 getConnectTimeout()。

# asp.net - 使用自定义标题文本时如何对网格视图进行排序？

> ID：12755297
> 
> 赞同：0
> 
> 时间：2012-10-05T23:28:00.620
> 
> 标签：asp.net, .net, webforms

我在 gridview 的“RowCreated”事件中添加了一些自定义标题文本：

```
protected void gvResults_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        LinkButton lbAptNo = new LinkButton();
        lbAptNo.Text = "Apartment #";
        lbAptNo.Click += new EventHandler(lbAptNo_Click);                

        e.Row.Cells[0].Controls.Add(lbAptNo);                    
    }
}

protected void lbAptNo_Click(object sender, EventArgs e)
{            
    gvResults.Sort("aptno", SortDirection.Descending);            
} 
```

这段代码可以正常工作，因为它将链接按钮添加到 gridview 并允许我按降序对数据进行排序。然而，我想要做的是检测该列的当前排序是什么，然后根据当前值排序 asc/desc。

我知道我可以使用 GridView.SortDirection 来获取列的方向，但我无法指定**哪一**列。我该怎么做呢？有没有办法确定特定列的排序方向？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:31:51.953

您可以使用gridview 的[**sortexpression**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sortexpression.aspx)属性对列进行排序。

# c++ - 具有多个比较功能的单个 std::map/multimap？

> ID：12755304
> 
> 赞同：1
> 
> 时间：2012-10-05T23:28:48.923
> 
> 标签：c++, maps

这可能吗？它甚至有意义吗？例如，如果我有一个地图的比较函数，我需要（pos 1）作为键（按顺序）：

ac ab aa bc ba cb

但后来我可能想得到订单：

aa ab ac ba bc cb

我知道我可以从那里得到更低/更高并进行比较。另外，如果我有后者的比较功能怎么样。是否也可以通过不同的比较函数和相同的地图来完成先验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:37:14.720

An`::std::map`是一种以特定顺序保存元素的复杂数据结构。重新排序这个数据结构意味着完全破坏它并从头开始重新创建它。所以不，这不能完全按照您指定的方式完成。

但它是可以做到的。它需要多个映射，并且有效地为非平凡数据执行空间需要您存储指向数据的指针而不是数据本身。在这种情况下如何处理密钥取决于密钥是什么。在某些情况下，您可能还想存储指向键的指针，或者可能只是再次使用数据指针并让比较函数从数据中提取键。

# vim - Vim：Ctrl+S 不适用于俄语布局（假设我映射了俄语键）

> ID：12755306
> 
> 赞同：0
> 
> 时间：2012-10-05T23:28:56.673
> 
> 标签：vim, gtk, keyboard-shortcuts

我有这个`.vimrc`：

```
map ы s "this maps the russian letter "Ы" which is on the same key
map <C-s> :w<CR> 
```

不幸的是，`Ctrl`+`S`在俄语布局中不起作用。我知道这在 vim 社区中一定是一个老问题，但我认为它以前对我有用（我在编辑文件时一定不小心更改了正确的设置）。

我在 Ubuntu 中使用 gvim 7.3。

# ios - ios - 应用内购买错误代码 3“无法连接到 iTunes Store”

> ID：12755313
> 
> 赞同：1
> 
> 时间：2012-10-05T23:29:24.237
> 
> 标签：ios, in-app-purchase

我按照苹果的指南实施应用内购买，当我尝试购买东西时，我得到错误代码 3 和描述`Cannot connect to iTunes Store`。

我试图从手机中转储网络，手机似乎正确连接到沙盒。我还尝试添加一个新用户，然后我退出了商店。

我什至没有进入我的测试用户的屏幕......只是上面的错误。

帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:50:56.313

我必须在 iTunes Connect 中添加我的银行账户和税务信息。

这解决了问题。

# orchardcms - 如何在 Orchard CMS 中为 NotFound.cshml 和 ErrorPage.cshtml 指定备用布局

> ID：12755314
> 
> 赞同：3
> 
> 时间：2012-10-05T23:29:40.727
> 
> 标签：orchardcms

我知道您可以对带有 url 的普通页面使用布局过滤器，但是如果出现错误，视图会发生变化，同时保持 url 不变，所以我不能使用基于路径的新布局。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:28:29.380

在我的头顶上：

如果您查看 Core > Shapes > Views，您将看到两个文件 - 一个名为`ErrorPage.cshtml`，一个名为`NotFound.cshtml`. 只需复制这些文件并将它们粘贴到主题的视图文件夹中。

我没有在这些特定页面上测试过这种方法，但我确实对`LogOn`小部件做了类似的事情。

需要记住的是，这些文件的内容将呈`Content`现在您当前主题的区域中。

# php - 从扩展页面的控制器访问 SilverStripe 自定义配置变量

> ID：12755320
> 
> 赞同：0
> 
> 时间：2012-10-05T23:30:27.430
> 
> 标签：php, ajax, content-management-system, silverstripe, hmvc

如果我在 Ajax_Controller 中对 URL 进行硬编码，基本上一切正常，但我希望它从我创建的 CMS 字段中访问 URL。

提前致谢。（当我不关闭大括号时请忽略 - 只是试图有效地复制/粘贴）

在 /mysite/_config.php 我创建了一个自定义配置：

```
Object::add_extension('SiteConfig', 'CustomSiteConfig'); 
```

在 /mysite/code/CustomSiteConfig.php 中，我添加了一个用于存储 URL 的字段：

```
class CustomSiteConfig extends DataObjectDecorator {

function extraStatics() {
    return array(
        'db' => array(
            'COJsonPath' => 'Text'
        )
    );
}

public function updateCMSFields(FieldSet &$fields) {
    $fields->addFieldToTab("Root.CO", new TextField("COJsonPath", "CO JSON URL"));
}

public function getCOJsonPath(){
    return $SiteConfig.COJsonPath;
} 
```

这成功地在 CMS 的主父项中创建了一个名为“CO”的选项卡和一个名为“CO JSON URL”的字段。我登录到我的 CMS 并将[http://api.localhost/mymethod/](http://api.localhost/mymethod/)保存到该字段。

现在我创建了一个 Ajax 页面类型来方便运行 Ajax 命令，而不会让网站用户找到我的 API 所在的位置，而且因为 jQuery Ajax 不像 XSS（跨站点脚本）。

在 /mysite/code/Ajax.php 中：

```
class Ajax extends Page {

static $db = array(
);
static $has_one = array(
);

function getCMSFields()
{
    $fields = parent::getCMSFields();
    return $fields;
}

}

class Ajax_Controller extends Page_Controller {
public function getCO()
{
    $buffer = self::createHttpRequest("http://api.localhost/mymethod/");
    //$buffer = self::createHttpRequest($CustomSiteConfig::getCOJsonPath());        
    return $buffer;
} 
```

此代码有效，但是当我尝试使用您看到的注释行执行我的 createHttpRequest() 时，它失败了。我知道我的语法是错误的，我只是不知道它应该是什么。感谢您的帮助-在我无法弄清楚之前我已经完成了这项工作-星期五。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:03:06.503

我在您的代码中发现了几个语法错误：

```
public function getCOJsonPath(){
    return $SiteConfig.COJsonPath;
} 
```

应该：

```
public function getCOJsonPath(){
    return $this->owner->COJsonPath;
} 
```

1) $SiteConfig 在那一点上从未定义过。2) 通常你会使用 $this，但在你的情况下，你在 DataObjectDecorator 内部，所以你必须使用 $this->owner 3) 你不能`.`用来访问对象的属性，在 php 中你必须使用`->`

* * *

转到 Ajax_Controller 类，在 getCO 中存在以下错误：

1) $CustomSiteConfig 未定义，因此不能使用 2) getCOJsonPath 不是静态函数，但您尝试将其称为静态函数（再次您必须使用`->`

所以，代码应该是这样的：

```
public function getCO() {
    $siteConfig = SiteConfig::current_site_config();
    $buffer = self::createHttpRequest($siteConfig->getCOJsonPath());        
    return $buffer;
} 
```

* * *

* * *

这应该可行，但还有另一种想法可以改进。据我了解，您正在创建一个 ajax 页面，然后您在 CMS 中创建一次并告诉您的网站内容作者永远不要触摸 ajax 页面？这很丑陋，有几种不错的方法可以做你想做的事。

下面是我将如何创建 Ajax 控制器：

`_config.php`

```
// tell SilverStripe what URL your AjaxController should have, 
// here we set it to AjaxController::$URLSegment which is 'myAjaxController'
// so the url to the controller is mysite.com/myAjaxController
Director::addRules(100, array(
    AjaxController::$URLSegment => 'AjaxController',
)); 
```

`AjaxController.php`

```
<?php
class EventAssetsController extends Controller {
    public static $URLSegment = 'myAjaxController';
    // tell SilverStripe what URL should call what function (action)
    // for example, mysite.com/myAjaxController/foo should call the function foo
    public static $url_handlers = array(
        'foo' => 'foo',
        'bar/$ID/$OtherID' => 'bar',
        'co' => 'getCO'
    );
    public function Link($action = null) {
        // this function is just a helper, in case you evern need $this->Link()
        return Controller::join_links(self::$URLSegment, $action);
    }
    public function AbsoluteLink($action = null) {
        return Director::absoluteURL($this->Link($action));
    }
    public function foo(SS_HTTPRequest $request) {
         // do something here
         // this method is an action, the url to this action is:
         // mysite.com/myAjaxController/foo
    }
    public function bar(SS_HTTPRequest $request) {
         // do something here
         // this method is an action, the url to this action is:
         // mysite.com/myAjaxController/bar
         // you notice that the $url_handlers has "bar/$ID/$OtherID", 
         // that means you cann call mysite.com/myAjaxController/bar/21/42
         // and silverstripe will make 21 the ID, and 42 the OtherID
         // you can access ID and OtherID like this:
         // $ID = $request->param('ID'); // which is 21
         // $OtherID = $request->param('OtherID'); // which is 42
    }
    public function getCO() {
        // this method is an action, the url to this action is:
        // mysite.com/myAjaxController/co
        $siteConfig = SiteConfig::current_site_config();
        $buffer = self::createHttpRequest($siteConfig->getCOJsonPath());        
        return $buffer;
    }
} 
```

# actionscript-3 - AS3 - drawPath() & 缠绕重叠产生奇怪的行为

> ID：12755321
> 
> 赞同：0
> 
> 时间：2012-10-05T23:30:34.907
> 
> 标签：actionscript-3, flash

我试图在同一个 Sprite.graphics 范围内绘制多个形状，但似乎找不到任何合理的解决方案来解决我的问题。

请记住，我一直在使用 drawPath() 方法来解决性能问题：我可以将多个形状与混合模式一起使用，但我想避免这种情况并将性能成本降至最低。

我一直在试验 drawPath() 方法的缠绕参数，但我无法理解的一件事是 Flash 是如何定义缠绕方向的，所以在真正遇到真正的问题之前，这是第一个问题：Are points考虑坐标？还是定义方向的生产线之间的角度？

话虽如此，这是我的实际问题：我想绘制一个形状，它是一条直线上的矩形的投影 - 想想一扇窗户，穿过它的光线照射到地板上。

![在此处输入图像描述](../Images/cb6ddc139dbe9b64b0496199c17df29b.png)

为了实现这一点，我必须考虑到光源位置可能会发生变化并产生这种结果：

![在此处输入图像描述](../Images/18a6c860ca61de2581f9788f5116abba.png)

在第二张图片上，您已经可以看到我面临的问题。为了绘制我的形状，我一直在单独“绘制”（理解：将数字放在我的坐标向量中）我的图形的不同部分：我想要投影的实际矩形，从左侧投射的光，投射的光从它的底部，以及从它的右侧投射的光。

我一直在努力小心地保持每个部分的缠绕方向相同，从左上角开始，但我的推理似乎有问题，因为每次中心部分与任何侧面部分重叠时，形状都是在那里清空，每次两侧部分重叠时，都会发生同样的情况。

当我在这里写这篇文章时，我突然想到了一些启示，现在我想也许我的坐标向量中的**所有点**都必须按照相同的缠绕方向排序才能使我的形状起作用？...（不仅是小的我在脑海中分别画出的部分^^）

如果我是对的（如果我错了，请纠正我，或者我理解错了什么？...），这意味着我必须：

*   对我的点进行排序以放置在正确的缠绕方向上（这可能很复杂，一旦提供给绘图 API 可能会导致一些奇怪的绘制形状？...）

*   仅从最外部的点绘制形状，具体取决于形状的实际形状（这可能比我目前期望的更复杂）。

这里的任何人都可以证实或证实我最后的假设，并给我一个关于这里可能发生的事情以及如何解决它的线索吗？...

非常感谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:15:46.793

您想要一个由三个投影线组成的形状吗？好的，您已经确定了两个较低点的位置，并且您的窗口有 4 个点。然后你像这样构造一个列表：

*   两个最高点总是在列表中，因为你写到你的灯总是会从窗外掉下来。因此，将 0 放入命令，窗口的左上点坐标放入路径，1 放入命令（lineTo），窗口的右上点放入路径。
*   现在，如果您的两个地板点的 X 都小于窗口的右下角，则将窗口的点添加到路径中！
*   然后你添加最右边的地板点，然后是最左边的。
*   然后，如果您的两个楼层点的 X 都大于窗口的左下角，则将其添加到列表中。

你完成了。而且您将不再需要 3 个预测，您只计算最底部的一个（它会给您在地板上的两个点），然后列出您的列表。应该做。请评论。

# perl - 在 SFTP 中使用内存文件作为参数

> ID：12755323
> 
> 赞同：1
> 
> 时间：2012-10-05T23:30:46.987
> 
> 标签：perl, sftp, in-memory

我需要在 Perl 中打开一个 SFTP 连接，并且需要使用 dsa 密钥文件，但出于安全原因，我实际上不能将文件存储在硬盘上。我正在尝试使用 Net::SFTP。

```
my $sftp = Net::SFTP->new(  
    $host, user=>"$userid",
    ssh_args => {
        identity_files => [ $pathToInMemoryKeyFile ]
    }
); 
```

我想我知道如何获取表示为内存文件句柄的字符串，但我不知道如何获取该文件句柄的路径，以便可以将其作为 ssh_args 之一传递。有人有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:18:09.467

我已经查看了执行 SFTP 的各种选项（Net::SFTP 自 2005 年以来没有更新，Net::SFTP::Foreign 是最新的），它们都通过文件进行密钥身份验证。

Net::SFTP 由 Net::SSH::Perl 支持，它是一个纯 Perl SSH 实现。你可以做一些补丁来让它做你想做的事。我给你画个草图。

[在Net::SSH::Perl::Auth::PublicKey->authenticate](https://metacpan.org/source/TURNSTEP/Net-SSH-Perl-1.34/lib/Net/SSH/Perl/Auth/PublicKey.pm#L37)周围打补丁或封装以查找新的配置密钥。让我们称之为`identity_keys`。

```
sub authenticate {
    my $auth = shift;
    my $ssh = $auth->{ssh};

    my $sent = 0;
    if (my $agent = $auth->mgr->agent) {
        do {
            $sent = $auth->_auth_agent;
        } until $sent || $agent->num_left <= 0;
    }
    return $sent if $sent;

    ##### This is the new bit which tries any keys passed in. ######
    my $ik = $ssh->config->get('identity_keys') || [];
    for my $key (@$ik) {
        return 1 if $auth->_auth_key($key);
    }

    my $if = $ssh->config->get('identity_files') || [];
    my $idx = $auth->{_identity_idx} || 0;
    for my $f (@$if[$idx..$#$if]) {
        $auth->{_identity_idx}++;
        return 1 if $auth->_auth_identity($f);
    }
} 
```

`auth_key`将是`_auth_identity`但调用 Net::SSH::Perl::Key->read_private_key 的副本，这将是[Net::SSH::Perl::Key->read_private_pem](https://metacpan.org/source/TURNSTEP/Net-SSH-Perl-1.34/lib/Net/SSH/Perl/Key.pm#L69)减去打开并从文件中读取密钥的内容。 `read_private_pem`然后会被淘汰使用`read_private_key`.

或者，使用 ssh-agent。它将解密的私钥保存在内存中，因此您可以立即将其从磁盘上擦除。

# c# - 使用 REST Web 服务。API 密钥认证

> ID：12755324
> 
> 赞同：1
> 
> 时间：2012-10-05T23:30:58.647
> 
> 标签：c#, web-services, rest

我有一个小问题，我一直试图解决一段时间。我想连接到一个 REST Web 服务，并且我有我想要使用的那个 Web 服务的 API 密钥。我已经在 Google REST 控制台中尝试过该服务，它运行良好。

但是当我尝试为它构建 ac# .net 项目时，我不知道如何为身份验证设置 api 密钥。我从其他网站获取了这段代码：

```
string url = "http://Demo.company.com/Data/Values/1029/CarPart/id/"
HttpWebRequest GETRequest = (HttpWebRequest)WebRequest.Create(url);
GETRequest.Method = "GET";

Console.WriteLine("Sending GET Request");
HttpWebResponse GETResponse = (HttpWebResponse)GETRequest.GetResponse();
Stream GETResponseStream = GETResponse.GetResponseStream();
StreamReader sr = new StreamReader(GETResponseStream);

Console.WriteLine("Response from Server");
Console.WriteLine(sr.ReadToEnd()); 
```

如何使用我的 Api 密钥验证此服务：asdf1234。我需要将它添加到我的标题中，但如何？你能给我看一些代码示例吗？

干杯雷神

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T23:34:43.177

您应该能够执行以下操作：

```
HttpWebRequest GETRequest = (HttpWebRequest)WebRequest.Create(url);
GETRequest.Method = "GET";
GETRequest.Headers.Add("api-key", "asdf1234"); 
```

其中“api-key”是您要设置的标头的名称。

# android - 一个简单的、向后兼容的选项卡导航示例？

> ID：12755329
> 
> 赞同：2
> 
> 时间：2012-10-05T23:31:40.400
> 
> 标签：android

在过去的 3-4 天里，我一直在寻找可以`Android`在 3.0 之前的版本上使用的标签导航的清晰示例，但是我经历过的每个示例在`AVD emulator`. 在某些情况下，这些示例极其复杂且难以重现。

我正在`SO`联系社区中的任何人，他们可以为我的应用程序提供一个简单的基于选项卡的导航系统的演练。我希望它能够向后兼容`Android`3.0 之前的版本。

如果有人能简单地将我指向一个教程，我将不胜感激。我绝不要求任何人这样做，但如果有人感到特别慈善，那么额外的关注将*不胜*感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:39:47.337

为什么不试试 ViewPager？它向后兼容 Android 2.x ![在此处输入图像描述](../Images/e7dc20adf4373dafe19e4c8a006e541e.png)

在这里查看：[https ://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

# ruby-on-rails - Haml Coffee 资产模板错误，无法访问 Backbone JS 模型？

> ID：12755331
> 
> 赞同：0
> 
> 时间：2012-10-05T23:31:52.807
> 
> 标签：ruby-on-rails, syntax, coffeescript, haml, hamlc

我在 Rails 3.2 应用程序中使用 haml_coffee_assets。以下适用于 ejs 模板：

```
<table>
  <tr>
    <th></th>
  </tr>
  <% tutorials.each(function(model) { %>
    <tr>
      <td><%= model.escape('title') %>
    </tr>
  <% }); %>
</table> 
```

我似乎无法在 haml_coffee 中使用它。以下是我最好的猜测，但由于某种原因，这个 haml_coffee 模板不起作用：

```
%table
  %thead
    %tr
      %th Tutorial Name
  %tbody
    - for tutorial in @tutorials
      - do (model) ->
      %tr
        %td= model.title 
```

我得到的只是：

```
ReferenceError: Can't find variable: model 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T08:09:03.247

由于您提到您在 GitHub 问题上使用 Backbone，我假设这`@tutorials`是一个 Backbone 集合，您也可以使用此替代方法：

```
%table
  %thead
    %tr
      %th Tutorial Name
  %tbody
    - for model in @tutorials.models
      %tr
        %td= model.escape('title') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:03:33.797

我终于能够使用以下方法来解决这个问题：

```
%table
  %thead
    %tr
      %th Tutorial Name
  %tbody
    - @tutorials.each (model) ->
      %tr
        %td= model.escape('title') 
```

希望这对其他人有帮助！

# core-data - 核心数据无限钻取

> ID：12755333
> 
> 赞同：1
> 
> 时间：2012-10-05T23:32:26.813
> 
> 标签：core-data

我目前正在处理包含类别和子类别的表格列表，您可以在其中使用向下钻取浏览子类别，直到获得详细视图。

我从 iphonesdkarticles.com 获得灵感。

这个博客中无限向下钻取的解决方案是用一个 plist 和一个 UITableView 填充一个数组来进行向下钻取。

我想使用 NSFetchedResultsController 而不是 plist 的核心数据。我得到了第一个类别列表，但是当我单击其中一个时，我得到了一个空表。

我不知道在这种情况下使用 NSFetchedResultsController 是否是最合适的解决方案。也许我在使用 didSelectRowatIndex 时做错了什么：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

Categories *category = (Categories *)[fetchedResultsController objectAtIndexPath:indexPath];

MasterViewController *theViewController = [[MasterViewController alloc] initWithStyle:UITableViewStylePlain];
theViewController.CurrentLevel += 1;
theViewController.CurrentTitle = categories.name;

detailViewController.category = category;
[self.navigationController pushViewController:theViewController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:49:47.397

要在 Core Data 中创建无限向下钻取，只需使实体成为其自身的关系。

# c# - 在 C# 调用程序中从非托管 DLL 捕获标准输出

> ID：12755336
> 
> 赞同：2
> 
> 时间：2012-10-05T23:33:36.407
> 
> 标签：c#, c++-cli, stdout, io-redirection

我有一个 C# 应用程序通过一些 C++/CLI 编组代码调用本机 C++ DLL：

C# --> C++/CLI --> C++（无 CLR）

我希望 DLL 在运行时将字符串更新发布回调用应用程序。当前，非托管 DLL 将输出写入标准输出。本质上，我需要在 UI 中捕获此输出。

在我对非托管 exe 进行炮击的其他情况下，这可以通过简单地将 stdout 从被调用者重定向到绑定到文本面板的 UI 数据中的字符串缓冲区来实现。

我没有选择使用 P/Invoke 调用 DLL 或将其作为 exe 外壳，因为互操作层执行非原始类型的基本编组。非托管 DLL 没有 CLR 支持，必须保持这种方式。

[我使用代表（ http://msdn.microsoft.com/en-us/library/367eeye0(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/367eeye0%28v=vs.100%29.aspx) ）的成功有限，因为似乎总有托管和非托管世界发生冲突的地方。以链接中的示例为例，从 C++/CLI 传递一个伪装成指向 DLL 的本机函数指针的托管委托是可行的，但回调是在 C++/CLI 类的范围之外定义的，因此无法访问从调用层 (C#)。

理想情况下，我想定义一个接受非托管字符串的类，并且可以将这些转换为托管并回调到 UI 层，但是如果此类对托管字符串具有必要的支持，则不能将其传递给非托管代码。

我可能错过了一个简单的重定向技巧，它允许在不在层之间传递字符串的情况下捕获标准输出（例如，从通过委托接收的 C++/CLI 重定向标准输出）。如果这是不可能的，任何人都可以建议一种替代技术吗？

托管 C++：

```
using namespace System::Runtime::InteropServices;
using namespace System;

namespace BusinessObjectInterop
{
    typedef void (__stdcall *UnmanagedFP)(std::string);

    //Callback function
    public delegate void SetProgressDelegate(std::string);  

    void SetProgress(std::string s) {
        Console::WriteLine(s);

        //set m_progress - could use managed delegate passed from UI and exposed in static method in CIntermediate?
    }

    public ref class CIntermediate       
    {
    public:

        //Invoked by managed (C#) UI
        void ^ CallBusinessObject(Object ^ data, String ^ progress)
        {
        //Do some data marshalling...
        //...

        m_progress = progress;      

        //Create wrapper for managed delegate
        SetProgressDelegate^ fp = gcnew SetProgressDelegate(SetProgress);
        GCHandle gch = GCHandle::Alloc(fp);
        IntPtr ip = Marshal::GetFunctionPointerForDelegate(fp);
        UnmanagedFP cb = static_cast<UnmanagedFP>(ip.ToPointer());

        //Call unmanaged DLL
        BusinessObject::DoStuff(cb);
        gch.Free();
        }

    private:
        String ^ m_progress;

    };
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T00:49:10.423

对，这行不通。DLL 不拥有标准输出，进程拥有。而且您的进程不会创建一个，因为它是 GUI 应用程序，也不能重定向工作，因为这需要另一个进程。

解决方法很简单。确保您已选择调试配置。右键单击您的项目、属性、~~链接器、系统。将子系统设置更改为“控制台 (/SUBSYSTEM:CONSOLE)”~~应用程序选项卡。将输出类型设置更改为“控制台应用程序”。

按 F5。Presto，现在您已经拥有了一个控制台窗口，显示来自 DLL 的调试输出。还有你的常规 GUI。

# mongodb - 如何将整个 MongoDB 数据库转储为 text/json？

> ID：12755338
> 
> 赞同：14
> 
> 时间：2012-10-05T23:33:47.030
> 
> 标签：mongodb

如何将整个 MongoDB 数据库转储为文本（纯文本、json 或 CSV）？

我正在使用一个我不太熟悉的应用程序。我想

*   清空数据库
*   加载种子数据
*   将整个数据库转储为文本
*   做一些事情
*   再次转储

然后区分两者！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-02-13T17:24:44.670

使用`mongodump`和`bsondump`：

**步骤 1** 将整个数据库转储到 BSON 文件：

```
 mongodump --db db1 
```

**步骤 2** 将每个 BSON 文件转换为 JSON 文件：

```
for f in dump/db1/*.bson; do bsondump "$f" > "$f.json"; done 
```

希望对您有所帮助！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-06T03:16:08.337

您可以使用`mongoexport`实用程序。默认情况下它会转储 json，但您可以指定转储 csv 格式。

`mongoexport --help`将为您提供所需的所有选项。

您提到要转储数据库中的所有集合，并`mongoexport`希望您指定数据库和集合名称，因为它希望转储一个集合。

您可以编写一个简短的 shell 脚本（如果您在 Windows 上，请转换为批处理脚本），效果如下：

```
#!/bin/sh
# assuming mongo bin is in your path

host=YOURMONGOHOST
port=YOURMONGOPORT
db=DBYOUWANTTOEXPORT

for c in `mongo --quiet $host:$port/$db --eval 'db.getCollectionNames()' | sed 's/,/ /g'`
do
    mongoexport --host $host --port $port -d $db -c $c > $c.json
done 
```

# actionscript-3 - 如何使用 AS3 检测插入或取出耳机在 Flash 中暂停视频？

> ID：12755345
> 
> 赞同：2
> 
> 时间：2012-10-05T23:34:48.793
> 
> 标签：actionscript-3, flash, video, netstream, headphones

我注意到使用 NetStream 播放视频的最狡猾的行为。如果视频有音轨，并且耳机已插入我的机器或已移除，则视频会暂停一秒钟，然后音频从新输出开始播放。

但是，没有办法听到我能找到的这种情况！Flash 肯定不允许访问客户端机器的声卡，所以我们不能直接与系统讨论这个问题。此外，我尝试从 NetStream 中侦听 NetStatus 事件，这些事件可以通知我流正在暂停然后恢复，但没有调度任何事件。

有谁知道我可以监听一个事件来捕获这个输入开关？我正在考虑使用 Event.ENTER_FRAME 事件来检查每帧视频的 fps 或 NetStream 的时间属性，但这似乎很不合时宜。

有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:48:08.627

它不是 netstream 也不是 Flash Player，它是设备（声卡）在从耳机切换到扬声器时暂停声音，反之亦然。

# orchardcms - 渲染小部件的果园错误

> ID：12755346
> 
> 赞同：0
> 
> 时间：2012-10-05T23:35:03.847
> 
> 标签：orchardcms

我收到此错误：

***“Orchard.ContentManagement.ContentItem”不包含“LatestProductPublicationPreview”的定义***

我创建了同名的内容类型，并将其设置为“小部件”。

这是视图中失败的行：

```
var contentType = Model.ContentItem.LatestProductPublicationPreview; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:39:32.733

这是因为 ContentItem 上没有 LatestProductPublicationPreview 属性。很难从问题中的少量信息或您的期望中判断您正在尝试做什么，但我会尝试。您是说您有一个名为 LatestProductPublicationPreview 的内容类型吗？如果是这样，您通常不必指定。如果您想访问该内容项的标题部分，您可以使用 Model.ContentItem.TitlePart。现在，如果您想访问字段 Foo 的 Value 属性，您将执行 Model.ContentItem.LatestProductPublicationPreview.Foo.Value。等等

# grails - 我的 grails 应用程序的任何部分是否在 grails clean 上运行

> ID：12755348
> 
> 赞同：0
> 
> 时间：2012-10-05T23:35:10.930
> 
> 标签：grails, execute

我喜欢 grails 提供环境相关检查的方式，因此我只能在测试时在 BootStrap 中运行某些东西（`Environment.current == Environment.TEST`）。我已经编写了一些我想在每次测试时运行的常规代码，而且效果很好！

现在我希望每次运行时都运行一些 groovy 代码`grails clean`。grails 项目中是否有任何地方运行在干净的地方，我可以在其中添加一些代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:44:40.623

`scripts/_Events.groovy`如果它不存在则创建并将代码添加到“CleanStart”事件的处理程序中：

```
eventCleanStart = { kind ->
   // do work here
} 
```

ps 那是`Environment.TEST`

# licensing - 许可证问题 - 我可以构建基于 FreeBSD 的商业操作系统吗？

> ID：12755358
> 
> 赞同：0
> 
> 时间：2012-10-05T23:36:21.470
> 
> 标签：licensing

我可以基于 FreeBSD 构建商业操作系统吗？我可以在没有源代码的情况下分发这样的系统吗？我不想有任何法律问题。在没有任何法律问题的情况下分发基于 freebsd 的新操作系统的真正方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:44:24.087

BSD 许可证是一种[许可许可证](http://en.wikipedia.org/wiki/Permissive_free_software_licence)，所以是的，您可以将商业产品基于 BSD 许可代码（大部分情况下，FreeBSD 是）。

但是请注意，基本 FreeBSD 发行版中的某些代码实际上是根据 GPL（或其他非许可许可证）许可的。您需要确保您没有在项目中使用任何此类代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:51:34.390

是的，您可以构建基于 FreeBSD 的商业操作系统。您可以在没有任何源代码的情况下分发它，只要您在分发它时附上一条通知，说明您的操作系统包含 FreeBSD 代码和 FreeBSD 许可证的副本。

更多信息在这里：[http ://en.wikipedia.org/wiki/BSD_licenses](http://en.wikipedia.org/wiki/BSD_licenses)

# java - 安卓谷歌地图路线更新

> ID：12755361
> 
> 赞同：1
> 
> 时间：2012-10-05T23:36:30.647
> 
> 标签：java, android, google-maps-api-3

首先，我是 android 和 JAVA 的新手，并且是 stackoverflow 的注册用户，但它多次帮助我找到了一个好的答案，所以，感谢这个社区，让我在学校项目中多次摆脱困境我在这里因为我被困在这个小项目中，是一所大学，所以不涉及任何资金。

我正在尝试显示路线并在使用 android google maps api 在城市中移动时对其进行更新。到目前为止，我设法获得了我的位置，并且可以显示两点之间的路线，但是问题是当我想从当前位置获得起点时，似乎无法将其保存到变量中（或者我不知道怎么做）我使用谷歌示例作为地图显示的基础。我将发布整个代码，也许有人也会发现它有用。因为是一个大学的小项目，我没有秘密要隐藏，我在这里学习，所以很高兴发布完整的代码。如果有人对我的问题有提示，我将不胜感激。谢谢！注意：问题是让这个婴儿显示从我当前位置到第二个固定位置的路线。主要代码如下：

```
public class mapDisplay extends ActionBarMapActivity {

 private LocationManager myLocationManager;
 private LocationListener myLocationListener;
 private MapController myMapController;
 private MapView myMapView;
 private MyLocationOverlay myLocation;

 private void CenterLocatio(GeoPoint centerGeoPoint)
 {
  myMapController.animateTo(centerGeoPoint);
 };

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_screen);

    myMapView = (MapView) findViewById(R.id.mapview);
    //mapView.setBuiltInZoomControls(true);

    myMapView.setSatellite(false); //Set satellite view
    myMapController = myMapView.getController();
    myMapController.setZoom(15); //Fixed Zoom Level

    myLocationManager = (LocationManager)getSystemService(
      Context.LOCATION_SERVICE);

    //For enable location services dialogue
    if (!myLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){  
          createGpsDisabledAlert();  
     }  
    // see createGpsDisabledAlert function below

    myLocationListener = new MyLocationListener();

    myLocationManager.requestLocationUpdates(
      LocationManager.GPS_PROVIDER,
      0,
      0,
      myLocationListener);

    //Get the current location in start-up
    GeoPoint initGeoPoint = new GeoPoint(
     (int)(myLocationManager.getLastKnownLocation(
      LocationManager.GPS_PROVIDER)
      .getLatitude()*1000000),
     (int)(myLocationManager.getLastKnownLocation(
      LocationManager.GPS_PROVIDER)
      .getLongitude()*1000000));
     CenterLocatio(initGeoPoint);

     //draw the sample route
    MapView mv = (MapView) findViewById(R.id.mapview);
    mv.setBuiltInZoomControls(true);
    MapController mc = mv.getController();

    ArrayList all_geo_points = getDirections(50.0536, 8.69339, 50.021973, 8.69584);

    GeoPoint moveTo = (GeoPoint) all_geo_points.get(0);
    mc.animateTo(moveTo);
    mc.setZoom(12);
    mv.getOverlays().add(new MyOverlay(all_geo_points));

    //Adding position icon for current location
 // Add the MyLocationOverlay
    myLocation = new MyLocationOverlay(this, myMapView);
    myMapView.getOverlays().add(myLocation);
    myLocation.enableMyLocation();

    myLocation.runOnFirstFix(new Runnable() {
        public void run() {
            myMapController.animateTo(myLocation.getMyLocation());

        }
     });

   }

   private class MyLocationListener implements LocationListener{

    public void onLocationChanged(Location argLocation) {
     // TODO Auto-generated method stub
     GeoPoint myGeoPoint = new GeoPoint(
      (int)(argLocation.getLatitude()*1000000),
      (int)(argLocation.getLongitude()*1000000));

     CenterLocatio(myGeoPoint);
    }

    public void onProviderDisabled(String provider) {
     // TODO Auto-generated method stub

        //toast shown if GPS is disabled
        Context context = getApplicationContext();
        CharSequence text = "GPS is disabled! If you want to take full advantage of map please enable the GPS!";
        int duration = Toast.LENGTH_LONG;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();
    }

    public void onProviderEnabled(String provider) {
     // TODO Auto-generated method stub
    }

    public void onStatusChanged(String provider,
      int status, Bundle extras) {
     // TODO Auto-generated method stub
    } 
}

   @Override
    protected void onResume() {
        super.onResume();
        myLocation.enableMyLocation();
    }

    @Override 
    protected void onPause() {
        super.onPause();
        myLocation.disableMyLocation();
    }

    //Back button press returns to first activity (selection screen)
    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        //super.onBackPressed();
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    //rest of functions for GPS alert
   private void createGpsDisabledAlert(){  
      AlertDialog.Builder builder = new AlertDialog.Builder(this);  
      builder.setMessage("Your GPS is disabled! Would you like to enable it?")  
           .setCancelable(false)  
           .setPositiveButton("Enable GPS",  
                new DialogInterface.OnClickListener(){  
                public void onClick(DialogInterface dialog, int id){  
                     showGpsOptions();  
                }  
           });  
           builder.setNegativeButton("Do nothing",  
                new DialogInterface.OnClickListener(){  
                public void onClick(DialogInterface dialog, int id){  
                     dialog.cancel();  
                }  
           });  
      AlertDialog alert = builder.create();  
      alert.show();  
      }  

      private void showGpsOptions(){  
              Intent gpsOptionsIntent = new Intent(  
                      android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);  
              startActivity(gpsOptionsIntent);  
      }  

     //Testing - directions

     public static ArrayList getDirections(double lat1, double lon1, double lat2, double lon2) {
                String url = "http://maps.googleapis.com/maps/api/directions/xml?origin=" +lat1 + "," + lon1  + "&destination=" + lat2 + "," + lon2 + "&sensor=false&units=metric";
                String tag[] = { "lat", "lng" };
                ArrayList list_of_geopoints = new ArrayList();
                HttpResponse response = null;
                try {
                    HttpClient httpClient = new DefaultHttpClient();
                    HttpContext localContext = new BasicHttpContext();
                    HttpPost httpPost = new HttpPost(url);
                    response = httpClient.execute(httpPost, localContext);
                    InputStream in = response.getEntity().getContent();
                    DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
                    Document doc = builder.parse(in);
                    if (doc != null) {
                        NodeList nl1, nl2;
                        nl1 = doc.getElementsByTagName(tag[0]);
                        nl2 = doc.getElementsByTagName(tag[1]);
                        if (nl1.getLength() > 0) {
                            list_of_geopoints = new ArrayList();
                            for (int i = 0; i < nl1.getLength(); i++) {
                                Node node1 = nl1.item(i);
                                Node node2 = nl2.item(i);
                                double lat = Double.parseDouble(node1.getTextContent());
                                double lng = Double.parseDouble(node2.getTextContent());
                                list_of_geopoints.add(new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6)));
                            }
                        } else {
                            // No points found
                        }
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
                return list_of_geopoints;
            }} 
```

**编辑**10.07.2012：我开始怀疑这是一个愚蠢的问题，没有人知道答案或没有人想回答。我试图保存到局部变量中并在 get Directions() 函数中使用它们，但由于某种原因导致我的应用程序崩溃。或者更好的是，我被邀请在编译之前修复错误。

# emacs - 如何清除emacs中文件的所有内容？

> ID：12755367
> 
> 赞同：4
> 
> 时间：2012-10-05T23:37:46.260
> 
> 标签：emacs

这个问题听起来可能很愚蠢。但是我在网上搜索并找不到答案。那么清除文件中所有内容的emacs命令是什么？我想清除我的 error_log 文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T01:12:07.600

而不是`erase-buffer`，您可以使用`C-x h C-w`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T23:55:43.353

是`M-x erase-buffer`你要找的吗？请注意，默认情况下它是禁用的，因为新用户会觉得它令人困惑，并且在您第一次运行它时会询问您是否临时或永久启用它。然后，为了方便起见，您可以将其绑定到键盘快捷键。

# regex - 如何使用 Perl 正则表达式解析表示递归数据结构的字符串？

> ID：12755369
> 
> 赞同：3
> 
> 时间：2012-10-05T23:38:04.927
> 
> 标签：regex, perl, tree

我想知道 Perl 中有哪些方法可以遍历作为字符串给出的递归结构（例如二叉树）。

更具体地说：

这是一棵树，为简单起见是解析树并且非常短。想象它是没有花哨的制表符和空格的字符串。

```
tree(Sentence, 
  tree(NounPhrase,
    leaf(Determiner, "a"),
    leaf(Noun, "man", "singular")
  ), 
  tree(VerbPhrase,
    leaf(Verb, "walks", "present", "3rd person")
  )
) 
```

现在我想访问根的两个直接子节点，但我不能简单地使用正则表达式来做到这一点。

```
m/tree \( \w+ , (group1) , (group2) \) /x 
```

我想正确捕获 group1 和 group2，即 group1 和 group2 具有偶数个左括号和右括号。

**这似乎是一项相当复杂的任务，想知道它的常见/最简单的解决方案是什么？**

例如，prolog 很容易消化这个任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T04:50:00.447

我会尝试创建 2 个函数：`sub tree{}`和`sub leaf{}`

他们每个人都会返回一个标记为字符串的术语，例如`leaf(Determiner, "a")`会返回`<Determiner>a</Determiner>`

然后只需执行您要处理的文件。输出将是一个类似 DOM 的结构，您可以使用任何 DOM 解析器[`XML::DOM`](http://search.cpan.org/~tjmather/XML-DOM-1.44/lib/XML/DOM.pm)进行解析，例如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:59:31.907

Ok, thanks, so the answer is "Simply, it is not possible only with RegEx".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T17:20:43.723

如果您知道预期有多少孩子，正如您的示例正则表达式所暗示的那样，那么这相当容易，这样的事情就足够了：

```
my @children = m{ tree\(  \w+?, ( (?:tree|leaf)\(.+\) ), ( (?:tree|leaf)\(.+\) ) \) }x; 
```

如果你不这样做，这似乎更有可能，那么它确实不简单，但它是可能的。在[他关于正则表达式的书中](http://regex.info/book.html)，Jeffrey Friedl 建议使用他所谓的*动态正则表达式构造*来构建递归模式以匹配嵌套对。

```
# first, strip your string
s{ ^ tree\( \w+ , (.+) \) $ }{$1}x;

# then, define the recursive pattern to match paired parentheses
my $recursion;
$recursion = qr{ (?> [^()]+ | \( (??{ $recursion }) \) )* }x;

# finally, match!
my @children = m{ ( (?: tree | leaf ) \( $recursion \) ) ,?}gx; 
```

在 perlre 中，这称为*[延迟正则子表达式](http://perldoc.perl.org/perlre.html#%28??%7B-code-%7D%29)*，~~并被记录为实验性功能~~.

# ftp - 在 ftp 会话期间检查本地计算机上的目录是否存在

> ID：12755371
> 
> 赞同：0
> 
> 时间：2012-10-05T23:38:38.540
> 
> 标签：ftp, dos

我在 ftp 会话期间将大量文件从远程主机复制到本地计算机。我需要将文件保存在本地目录树中。我的问题是会话之前可能不存在特定目录。我过去处理这个问题的方法是通过首先创建目录树来设置我的脚本，甚至不用担心目录是否存在，然后从同一个批处理文件中（我使用 Python 创建批处理文件）我开始我的session 并使用 lcd 切换到正确的目录

```
md c:\123
md c:\234
md c:\234\2009
loginname
password
cd remotedirectory
lcd c:\123
get somefile.txt 
```

所以以上所有内容都写到一个批处理文件中，然后我开始运行它。如果在我尝试创建目录时该目录存在，那么我会在终端窗口中看到该目录存在的消息，并且由于没有发生任何不好的事情，我并不担心它。

我真正想做的是在我准备好移动到该目录时检查本地目录的存在，如果它不存在，它会被创建，但我还没有找到如何在不关闭会话并重新启动它的情况下执行此操作所以我回到贝壳。

有没有办法在 ftp 会话期间执行此操作，同时保持与主机的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:33:20.617

您可以使用`!`命令前缀来执行 CMD`MD`命令，以确保本地目录已经存在。例如：

`! md "c:\my data\download"``c:\data\download`如果目录尚不存在（并假设您具有所需的权限），则将创建目录。如果它已经存在，它只会显示一个无害的错误。您也可以使用`! md "c:\my data\download" > nul`来省略错误消息。或者执行其他命令。

基本上，`!`ftp 命令前缀之后的所有内容都将传递给`CMD.EXE`as `cmd /c {your command(s)}`。如果`!`单独使用，它将*转义*到 CMD 会话提示符并等待用户输入。CMD 的`EXIT`命令将关闭 CMD 会话并返回到 FTP 提示符。

# javascript - Google Maps API - 搜索 XML 标记

> ID：12755372
> 
> 赞同：2
> 
> 时间：2012-10-05T23:38:40.967
> 
> 标签：javascript, google-maps-api-3, search-engine

编辑：*只是一些背景信息 - 系统使用 mySQL 设置以存储每个标记的信息，然后通过一些 PHP 代码将其转换为 XML 文件，然后通过 Maps javascript 文件显示它。我目前有大约 10 个标记，它们存储在 mySQL 数据库中。加载地图后，所有标记都已加载。*

我目前正在使用 Maps API v3 来显示标记，并在 div 中显示它们的 infoWindows。到目前为止一切都很好。我想做的是添加搜索功能。据我了解，该 API 确实具有搜索功能，但是当我在文档中的示例上尝试它时，它会在整个地图上进行搜索。我希望它只在我的标记中搜索。编辑：正如我在顶部的编辑中提到的，所有标记都显示在 initialize() - 因此，当有人搜索位置时，将选择最接近的匹配。在我的地图的情况下，显示信息窗口并在地图区域之外的 2 个“html”部分中拆分（即，实际地图上没有气泡显示）

编辑：最初，我担心如果我发布 URL，有人会过来复制我的想法，但我确信它已经完成了！Scr*w it - [CityMap 原型](http://sandbox.tristanbacon.me/citymap)

所以，我想我需要找到/创建某种搜索 XML 文件的系统。最初，用户只能按名称搜索位置。后来，我确信我可以为搜索提出创造性的用途。

谁能指出我正确的方向？

编辑：发布后，我找到了关于 W3C - [PHP Example - AJAX Live Search](http://www.w3schools.com/php/php_ajax_livesearch.asp)的教程。它从 XML 文件中搜索链接，然后在您键入时将它们显示在栏下的临时搜索结果中。有谁知道我如何将此搜索功能链接到标记？据我所知，我需要通过 XML 以某种方式链接到每个标记，但这就是我猜测的程度。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:46:37.110

据我了解，api 的搜索功能不是针对本地文件，而是针对整个地图（世界），如果您正在使用 php，我建议您暂时使用您找到的教程，然后将搜索功能链接到执行某种 javacript响应将执行您在搜索时查找的操作。我不确定此功能是什么，因为您已经根据您的问题在地图上绘制了标记。如果您需要更多信息，请告诉我，不确定您是否处于 php/ruby/asp 环境中。（或者如果你在一个真正的 html 环境中）hth

# asp.net - 如何动态创建一个不会导致 UpdatePanel 内回发的 ASP:Button？

> ID：12755374
> 
> 赞同：0
> 
> 时间：2012-10-05T23:39:12.917
> 
> 标签：asp.net, ajax, ajax.net

我有一个页面，有 2 个 ASP 选项卡，第一个选项卡上有一个 UpdatePanel。在更新面板中（在 page_load 上），我动态地创建了一个表格，其中包含带有用于图像、一些文本和 ASP:Button 的单元格的行。我想要该按钮，当单击以将选项卡从第一个切换到第二个时。相反，它所做的只是刷新它所在的更新面板。我怎样才能阻止它这样做呢？如何让它执行我自己设计的功能，而不是发布？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:42:26.940

您可以添加 javascript 点击事件并通过返回 false 来阻止它回发；

在后面的代码中，您可以在其中动态添加按钮。

```
btnChangeTab.Attributes.Add("onclick", "return YourJavascriptFunction();"); 
```

在客户端。

```
<script type="text/javascript">

 function YourJavascriptFunction()
 {
      //Your javascript code here 
      return false; //the will stop from postback
 }

</script> 
```

# java - 动态设置 RememberMe 的 token-validitys-seconds

> ID：12755376
> 
> 赞同：0
> 
> 时间：2012-10-05T23:39:24.520
> 
> 标签：java, spring, spring-security, remember-me

使用 Spring，我在我的 XML 中声明了一个 RememberMe bean：

```
<security:http authentication-manager-ref="authenticationManager">
      ..... 
            <security:remember-me 
                data-source-ref="dataSource"
                user-service-ref="userDetailsService"/>

</security:http> 
```

据我了解，这会导致**PersistentTokenBasedRememberMeServices**因为声明了数据源。我也可以设置' *token-validity-seconds* '，但生活比这更复杂......我想**动态**设置有效性。

我怎样才能做到这一点？我如何“自动装配”这个 bean，或者如何使用“ *context.getBean()* ”来获取它？我不知道这个bean的名字......我必须以不同的方式声明它吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:31:54.527

知道了！

您所要做的就是自动装配 remember-me 服务，并设置令牌有效性：

```
@Autowired
private AbstractRememberMeServices rememberMeService; 
```

并在您的代码中，无论何时需要：

```
rememberMeService.setTokenValiditySeconds(X); 
```

# xml - 命名空间的 XSLT 转换

> ID：12755377
> 
> 赞同：1
> 
> 时间：2012-10-05T23:39:30.353
> 
> 标签：xml, xslt

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
     <soapenv:Body>
      <tns:send xmlns:tns="http://www.test.com/Service/v3">
         <NS2:Message release="006" version="010" xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT">

            <NS2:Body>
               <NS2:New>
                  <NS2:Pharmacy>
                     <NS2:Identification>
                        <NS2:ID>
                           <NS2:IDValue>01017</NS2:IDValue>
                           <NS2:IDQualifier>94</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                            <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                             </NS2:Identification>
                             </NS2:Pharmacy>
                    </NS2:New>
            </NS2:Body>
         </NS2:Message>
      </tns:send>
   </soapenv:Body>
</soapenv:Envelope> 
```

我有这个 xml，它位于架构版本 3.0 [http://www.test.com/Service/v3](http://www.test.com/Service/v3)上。我需要将其降级到版本 1 [http://www.test.com/Service/v1](http://www.test.com/Service/v1)。为此，我使用 XSL 对其进行转换。

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
        <xsl:stylesheet version="2.0" 
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
            xmlns:booga="http://schemas.xmlsoap.org/wsdl/"
            xmlns:tns="http://www.test.com/Service/v3"
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
            xmlns:src="http://www.ncpdp.org/schema/SCRIPT"
        > 

        <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

        <xsl:strip-space elements="*"/>

        <xsl:template match="node()|@*">
          <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>

           </xsl:copy>

         </xsl:template>

         <xsl:template match="tns:*">
            <!-- Output a new element in the new namespace -->
            <xsl:element name="tns:{local-name()}" namespace="http://www.test.com/Service/v1">
              <!-- Copy all child attributes and nodes 
             <xsl:apply-templates select="node()|@*"/> -->
            <xsl:apply-templates  />
            </xsl:element>
          </xsl:template>

        </xsl:stylesheet> 
```

但我得到这样的结果

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
     <soapenv:Body>
      <tns:send xmlns:tns="http://www.test.com/Service/v3">
         <NS2:Message release="006" version="010" xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT" xmlns:tns="http://www.test.com/Service/v3">

            <NS2:Body>
               <NS2:New>
                  <NS2:Pharmacy>
                     <NS2:Identification>
                        <NS2:ID>
                           <NS2:IDValue>01017</NS2:IDValue>
                           <NS2:IDQualifier>94</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                            <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                         </NS2:Identification>
                         </NS2:Pharmacy>
                    </NS2:New>
            </NS2:Body>
         </NS2:Message>
      </tns:send>
   </soapenv:Body>
</soapenv:Envelope> 
```

在我的输出 XML 中，我得到了这个

```
<NS2:Message release="006" version="010" xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT"   xmlns:tns="http://eps.pdxinc.com/webservice/Rxservice/v3"> 
```

**为什么将其添加到`NS2:Message`?**

```
xmlns:tns="http://eps.pdxinc.com/webservice/Rxservice/v3 
```

**它在输入 xml 中不存在。**

我缺少一些东西。如果有人能指出这个问题，我将不胜感激。

我希望在输出中创建以下内容：

```
<?xml version="1.0"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <tns:send xmlns:tns="http://www.test.com/Service/v1">
            <NS2:Message release="006" version="010" xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT" >

                <NS2:Body>
                    <NS2:New>
                        <NS2:Pharmacy>
                            <NS2:Identification>
                                <NS2:ID>
                                    <NS2:IDValue>01017</NS2:IDValue>
                                    <NS2:IDQualifier>94</NS2:IDQualifier>
                                    <NS2:IDRegion>SCA</NS2:IDRegion>
                                    <NS2:IDState>CA</NS2:IDState>
                                </NS2:ID>
                            </NS2:Identification>
                        </NS2:Pharmacy>
                    </NS2:New>
                </NS2:Body>
            </NS2:Message>
        </tns:send>
    </soapenv:Body>
</soapenv:Envelope> 
```

我正在应用的 XSL 文档 `xmlns:tns="http://www.test.com/Service/v3`在`NS2:Message`.

最初的标签是：

```
<NS2:Message release="006" version="010" xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT"> 
```

在我应用 XSL 后，它变为：

```
<NS2:Message release="006" version="010" xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT" xmlns:tns="http://www.test.com/Service/v3> 
```

我不知道这个命名空间是在哪里添加的。

我想要的只是转换`xmlns:tns="http://www.test.com/Service/v3`为`xmlns:tns="http://www.test.com/Service/v3`in`tns:send`标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:27:23.380

试试这个...

**XML 输入**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <tns:send xmlns:tns="http://www.test.com/Service/v3">
            <NS2:Message release="006" version="010" xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT">

                <NS2:Body>
                    <NS2:New>
                        <NS2:Pharmacy>
                            <NS2:Identification>
                                <NS2:ID>
                                    <NS2:IDValue>01017</NS2:IDValue>
                                    <NS2:IDQualifier>94</NS2:IDQualifier>
                                    <NS2:IDRegion>SCA</NS2:IDRegion>
                                    <NS2:IDState>CA</NS2:IDState>
                                </NS2:ID>
                            </NS2:Identification>
                        </NS2:Pharmacy>
                    </NS2:New>
                </NS2:Body>
            </NS2:Message>
        </tns:send>
    </soapenv:Body>
</soapenv:Envelope> 
```

**XSLT 1.0**（或 2.0，如果您更改版本）

（**编辑**：将“tns”前缀更改为“djh”以说明前缀无关紧要。）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:djh="http://www.test.com/Service/v3"
    xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT"
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|comment()|processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="djh:*">
        <xsl:element name="{name()}" namespace="http://www.test.com/Service/v1">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>  
    </xsl:template>

    <xsl:template match="*">
        <xsl:element name="{name()}">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>      
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <tns:send xmlns:tns="http://www.test.com/Service/v1">
         <NS2:Message xmlns:NS2="http://www.ncpdp.org/schema/SCRIPT" release="006" version="010">
            <NS2:Body>
               <NS2:New>
                  <NS2:Pharmacy>
                     <NS2:Identification>
                        <NS2:ID>
                           <NS2:IDValue>01017</NS2:IDValue>
                           <NS2:IDQualifier>94</NS2:IDQualifier>
                           <NS2:IDRegion>SCA</NS2:IDRegion>
                           <NS2:IDState>CA</NS2:IDState>
                        </NS2:ID>
                     </NS2:Identification>
                  </NS2:Pharmacy>
               </NS2:New>
            </NS2:Body>
         </NS2:Message>
      </tns:send>
   </soapenv:Body>
</soapenv:Envelope> 
```

# java - JPA - 使用 EclipseLink 保持单向一对多关系失败

> ID：12755380
> 
> 赞同：27
> 
> 时间：2012-10-05T23:39:47.303
> 
> 标签：java, jpa, orm, eclipselink

我试图坚持一个非常简单的单向一对多关系，但 EclipseLink (2.3.1) 失败了。

服务等级（父级）：

```
@Entity
@Table(name = "tbl_service2")
public class Service implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name="service_id")
    public long serviceID;

    @Column(name="name")
    public String name;

    @OneToMany(cascade={CascadeType.ALL})
    @JoinColumn(name="service_id", referencedColumnName="service_id")
    public Set<Parameter> parameters;
} 
```

参数类（子）：（
当然数据库中有“service_id”外键字段，类中没有表示，因为它是单向关系）。

```
@Entity
@Table(name = "tbl_service_parameters2")
public class Parameter implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name="param_id")
    public long parameterID;

    @Column(name="name")
    public String name;
} 
```

这是实体持久性的代码：

```
 Service service = new Service();
    service.parameters = new HashSet<Parameter>();
    service.name = "test";
    Parameter param = new Parameter();
    param.name = "test";
    service.parameters.add(param);
    em.persist(service);
    em.flush(); 
```

我得到这个例外：

```
Internal Exception: java.sql.SQLException: Field 'service_id' doesn't have a default value
Error Code: 1364
Call: INSERT INTO tbl_service_parameters2 (name) VALUES (?)
    bind => [test] 
```

**编辑：**由于数据的性质，数据库字段`service_id`具有（并且应该具有）非空约束。

这是一个错误还是代码中有问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-26T20:52:46.827

使用`nullable = false`, 在`@JoinColumn`:

```
@JoinColumn(name = "service_id", nullable = false) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-06T19:42:31.503

尝试删除 Parameter 表的 service_id 字段上的 not null 约束。Eclipselink 将在单独的语句中更新单向 1:m 连接列的外键，因此您需要禁用或延迟约束检查。使其成为双向将允许使用其余参数数据更新 fp 字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-20T16:30:57.663

通过使用可延迟的外键，我能够让它在 Oracle 中工作。

例子：

```
ALTER TABLE my_table ADD CONSTRAINT my_constraint_name FOREIGN KEY (my_table_column) REFERENCES foreign_key_table  (foreign_key_table_column) DEFERRABLE INITIALLY DEFERRED 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T16:41:18.053

您可以将您的持久性更改为休眠版本<4.0，并且您的代码将运行良好。“好吧”参考“仅用于一对多关系保存/持久父，而不是通过单独的任务保存/持久子的集合”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-06T14:13:35.823

默认情况下，@JoinColumn 上的 nullable 为 true，在以一对多关系持久化数据的同时，我们需要将 nullable 设置为 false，以避免在运行时发生数据违规异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-08T18:02:27.973

我发现，在这种情况下，外键填写在单独的语句中。在我的示例中，我使用`Address`实体`customer_id`作为外键。

```
2014-07-08T20:51:12.752+0300|FINE: INSERT INTO ADDRESS (address_id, street, city, region) VALUES (?, ?, ?, ?)
    bind => [10, foo, foo, foo]
2014-07-08T20:51:12.753+0300|FINEST: Execute query InsertObjectQuery(ua.test.customer.Address@28cef39d)
2014-07-08T20:51:12.757+0300|FINEST: Execute query DataModifyQuery(sql="UPDATE ADDRESS SET customer_id = ? WHERE (address_id = ?)")
2014-07-08T20:51:12.757+0300|FINE: UPDATE ADDRESS SET customer_id = ? WHERE (address_id = ?)
    bind => [151, 10] 
```

因此，拥有`@JoinColumn`with`nullable=true`会导致错误。

作为替代方案，您可以使用`@OneToMany (..., orphanRemoval = true, ...)`.

# android - 为什么当我按下返回键时我的 android 应用程序正在退出

> ID：12755381
> 
> 赞同：0
> 
> 时间：2012-10-05T23:39:55.080
> 
> 标签：android, android-activity, android-button

目前我正在开发一个小型应用程序，它包含 3 个活动。

现在，当我启动我的应用程序时，它开始正常，我可以正确地从活动 1 导航到活动 3，没有任何问题。

活动1-->活动2-->活动3

问题来了，当我按下移动设备的后退按钮返回活动 2 时，应用程序只是关闭了。

有人可以建议如何弄清楚发生了什么。

这就是我从 Activity2 到 Activity2 的方式

```
 Intent activity3 = new Intent(Activity2.this,Activity3.class);
            Activity2.this.startActivity(activity3);
            Activity2.this.finish(); 
```

注意：我没有使用模拟器，我使用的是手机并直接在手机上进行所有调试。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:44:38.827

这是因为您正在调用从堆栈中删除活动的 finish() 函数。删除线`Activity2.this.finish();`，你应该回到你想要的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:24:05.950

因为你调用了 finish() 方法。

由于这个从活动堆栈中删除，您的最后一个活动被删除，因此您当前的活动在 backPressed() 上完成。

为了克服这个你必须删除

Activity2.this.finish(); 从你的代码。

# php - 邮件功能限制 PHP

> ID：12755383
> 
> 赞同：0
> 
> 时间：2012-10-05T23:40:03.580
> 
> 标签：php, email

我有一个在 localhost 上运行的代码：

首先，代码以这种方式获取一些文件：

```
$opts = array('http' => array('header' => 'Accept-Charset: UTF-8, *;q=0'));
$context = stream_context_create($opts);
$directory = "../V1/sector2/";
  $array_filename = glob($directory . "*.html");

 foreach($array_filename as $filename){ 
  $dan = file_get_contents($filename,  false, $context); 
```

然后，代码使用 PCRE 函数来修改 html 文件并最终发送到 gmail 电子邮件：

```
 $from = "test.com <noreply@prueba.com>";
  $to = "juanfernandoz@gmail.com";
 $subject = 
 echo "<div style='display:none;'>ob_get_contents();
   echo "</div>";
  $headers = "Content-type: text/html; charset=iso-8859-1 \r\n"
             ."MIME-Version: 1.0 \r\n"
           ."To: $cliente <$email> \r\n"
           ."From: prueba <prueba@example.com> \r\n";
    mail($to,$subject,$contenido,$headers); 
```

该代码运行良好，但问题是，例如，如果我有 30 个 html 文件，我的电子邮件中只有 11 个文件，而不是 30 个文件。

所以，我认为也许邮件功能有一个限制。

你怎么想的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:49:51.793

鉴于您的收件人地址是`juanfernandoz@gmail.com`我打赌您达到了 Gmail 的预览长度限制。在标准 gmail 界面中查看时，Gmail的[正文限制为 102K 。](http://www.campaignmonitor.com/blog/post/3610/maximum-file-size-for-html-email)

电子邮件实际上并没有遗漏任何内容，只是在默认视图窗口中不会显示更多内容。您应该在电子邮件底部看到一个链接以查看整个内容，该链接将弹出一个带有较长文本的新窗口...这与 gmail 中的*嵌入*（未引用）图像经常出现显示图像源：图像代码被裁剪，导致剩余的片段被逐字翻译。

检查电子邮件底部的**[Message clipped] 查看整个消息**链接（尽管移动版 Gmail 不会显示此链接）。[你可以在这里](http://www.emailonacid.com/blog/details/C13/when_it_comes_to_html_email_size_does_matter)阅读更多。

# python-2.7 - Python：IndexError：列表索引超出范围

> ID：12755392
> 
> 赞同：0
> 
> 时间：2012-10-05T23:42:16.807
> 
> 标签：python-2.7

我不断收到此错误：

```
line 4, in timesTwo 
IndexError: list index out of range 
```

对于这个程序：

```
def timesTwo(myList):
counter = 0
while (counter <= len(myList)):
    if myList[counter] > 0:
        myList[counter] = myList[counter]*2
        counter = counter + 1
    elif (myList[counter] < 0):
        myList[counter] = myList[counter]*2
        counter = counter + 1
    else:
        myList[counter] = "zero"
return myList 
```

我不确定如何解决该错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:54:16.130

您将循环的上限设置`while`为 的长度`myList`，这意味着 counter 的最终值将是长度。由于列表从 0 开始索引，这将导致错误。您可以通过删除`=`标志来修复它：

```
while (counter < len(myList)): 
```

或者，您可以在一个`for`可能更容易处理的循环中执行此操作（不确定这是否适合您的用例，因此如果不适合，上述方法应该可以工作）：

```
def timesTwo(myList):

  for index, value in enumerate(myList):
    if value is not 0:
      myList[index] *= 2
    else:
      myList[index] = 'zero'

  return myList 
```

# c++ - 如果我的键是我的价值的一部分，我应该使用地图还是集合？

> ID：12755395
> 
> 赞同：3
> 
> 时间：2012-10-05T23:42:31.170
> 
> 标签：c++, key, stdmap, stdset

在 C++ 中，我有一个按其名称排序的类，即`std::string`. 我希望在 a`std::map`或`std::set`.

我可以使用 a `std::set`，因为`operator<`它将按名称对我的实例进行排序，但是，我需要按名称查找实例。使用键是名称的映射是直截了当的，但是，我也可以使用一个集合并构造一个具有我希望查找的名称的类的虚拟实例，以在集合中定位给定类的实际实例姓名。

我想我应该只使用地图以使代码直截了当，但想知道是否有办法使用该集合，因为无论如何密钥实际上都是我的对象的一部分，从而避免了一些冗余。

有没有办法使用该集合并能够以干净的方式通过它们的键定位对象，或者我应该只使用地图并完成它？

这是要插入的类（以草稿形式），并且在每个目录中都有一组节点或节点映射，它们以节点名称为键：

```
class Node {
public:
  Node(Directory &parent, const std::string &name)
    : _name(name),
      _parent(&parent),
      _isRoot(false) {
    if (name.empty()) {
      throw InvalidNodeNameError(name);
    }
  }

protected:
  // This is only used for the root directory:
  Node()
    : _name(""),
      _parent(0),
      _isRoot(true) {
  }
  Node(const std::string &name)
    : _name(name),
      _parent(0),
      isRoot(false) {
  }

public:
  virtual ~Node() {
    if (parent()) {
      parent()->remove(*this);
    }
  }

  bool operator<(const Node &rhs) const {
    return _name < rhs._name;
  }

  Directory *parent() const {
    return _parent;
  }
  void setParent(Directory *parent) {
    _parent = parent;
  }

  const std::string &name() const {
    return _name;
  }

  bool isRoot() const {
    return _isRoot;
  }

  std::string pathname() const {
    std::ostringstream path;

    if (parent()) {
      path << parent()->pathname() << '/';
    } else {
      path << '/';
    }
    path << name();

    return path.str();
  }

private:
  // Not defined:
  Node(const Node &rhs);
  Node &operator=(const Node &rhs);

private:
  std::string  _name;
  Directory   *_parent;
  const bool   _isRoot;

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:48:38.273

实际上，您可以只使用 map<std::string&, Node>，但要花费一个额外的指针，但我想您可能知道这一点，并且它需要一些混乱才能获得您想要的东西。

我一直认为 std::set 没有明确的 KeyExtractor 模板参数是一个真正的痛苦，特别是因为我看到的每个实现都使用其中一个，以便在（多）地图和（多）集。这是一个快速而肮脏的 hack，尚未完成，它公开了 GNU 标准 C++ 库的一些机制，以创建一个“keyed_set”容器：

```
// Deriving from the tree is probably not a good idea, but it was easy.

template<typename Key, typename Val, typename Extract,
         typename Compare = std::less<Key>, typename Alloc = std::allocator<Val>>
class keyed_set : public std::_Rb_tree<Key, Val, Extract, Compare, Alloc> {
  using Base = std::_Rb_tree<Key, Val, Extract, Compare, Alloc>;

  public:
    template<typename ...Args>
    auto insert(Args... args)
         ->decltype(Base()._M_insert_unique(std::declval<Args>()...)) {
      return this->_M_insert_unique(args...);
    }

    typename Base::iterator insert(typename Base::const_iterator i,
                                   const Val& val) {
      return this->_M_insert_unique_(i, val);
    }

    Val& operator[](const Key& key) {
      auto i = this->lower_bound(key);
      if (i == this->end() || this->key_comp()(key, Extract()(*i))) {
        i = this->_M_insert_unique_(i, Val(key));
      }
      return *i;
    }
}; 
```

要完成这项工作，您需要提供一个密钥提取器，如下所示：

```
template<class T>
struct KeyExtractor;

template<>
struct KeyExtractor<Node> {
  const std::string& operator()(const Node& n) { return n.name(); }
}; 
```

要使我的 operator[] 版本正常工作，您需要值类型具有一个构造函数，该构造函数将其键类型作为参数。

我遗漏了很多东西（例如擦除）；但是做一个简单的测试就足够了。

从 KeyExtractor 的返回类型中默认键类型可能会更好，但这会涉及以不同的顺序放置模板参数，而且我已经浪费了太多时间没有注意到 _M_insert_unique 和 _M_insert_unique_ 拼写不同（大概是为了避免模板实例化问题。）

这是我用来检查以确保有效的示例；MyKeyedClass 有一个名称，带有一个字符串向量，以及一个与每个字符串相关联的双精度值。（没有崇高的目的。）

```
int main(void) {
  keyed_set<std::string, MyKeyedClass, KeyExtractor<MyKeyedClass>> repo;
  for (std::string name, val; std::cin >> name >> val; ) {
    try {
      size_t end;
      double d = std::stod(val, &end);
      if (end != val.size())
        throw std::invalid_argument("trailing letters");
      repo[name].increment(d);
    } catch (std::invalid_argument(e)) {
      repo[name].push(val);
    } catch (std::out_of_range(e)) {
      std::cerr << "You managed to type an out of range double" << std::endl;
    }
  }
  std::for_each(repo.begin(), repo.end(),
                [](MyKeyedClass& c){ std::cout << c << std::endl; });
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:42:17.180

我认为因为在构造过程中`Node`需要引用`Directory`，所以创建一个虚拟节点来按名称搜索您的集合将使`Node`类更加混乱。

要使用`set`，您可能需要在`Directory`某处创建一个静态，并将其用作新的虚拟构造函数中的虚拟引用`Node(const std::string&)`。如果您不声明`explicit`可以`string`直接在调用`set::find`.

您可以改为将类转换为使用指针...但这会改变其内部语义：`Directory&`始终有效，而`Directory*`不必如此。问问自己，是否仅仅因为您对`set`容器的偏好而使读者对语义不太清楚。

所以我的观点在这种情况下很清楚......你有一个选择：要么使用`map`并保持你的类干净，要么使用`set`并编写一些对其他任何东西都没有用的支持垃圾代码。=)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T00:31:43.270

我通过键的代理来实现这样的类，例如在 std::string 的情况下，我有一个名为轻量级字符串的类，它实现`operator <`并在内部指向我使用的`std::string`然后我使用`map`的并且具有使用 map 的简单性和没有 2 的性能密钥的版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T02:34:31.243

对于您的情况，请检查您的编译器是否足够老，仍然`std::string`可以使用 COW（写入时复制）策略来实现。这在 C++11 中发生了变化，但旧的编译器版本仍然是 COW... 这有一个优点，即使用字符串作为键和作为值的一部分的映射几乎不会花费您任何成本。但请注意，这将在未来改变（或已经改变）......

# r - 子集R数组：长度为1时丢失维度

> ID：12755397
> 
> 赞同：13
> 
> 时间：2012-10-05T23:42:46.817
> 
> 标签：r, subset

在对数组进行子集化时，R 的行为会有所不同，具体取决于其中一个维度的长度是否为 1。如果维度的长度为 1，则该维度在子集期间丢失：

```
ax <- array(1:24, c(2,3,4))
ay <- array(1:12, c(1,3,4))
dim(ax)
#[1] 2 3 4
dim(ay)
#[1] 1 3 4
dim(ax[,1:2,])
#[1] 2 2 4
dim(ay[,1:2,])
#[1] 2 4 
```

从我的角度来看， ax 和 ay 是相同的，对它们执行相同的子集操作应该返回一个具有相同维度的数组。我可以看到 R 处理这两种情况的方式可能很有用，但在我正在编写的代码中是不可取的。这意味着当我将一个子集数组传递给另一个函数时，如果我在早期阶段碰巧将一个维度减少到长度 1，该函数将获得一个缺少维度的数组。（所以在这种情况下，R 的灵活性使我的代码不太灵活！）

如何防止 R 在子集期间丢失长度为 1 的维度？还有其他索引方式吗？设置一些标志？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-05T23:52:07.370

正如您所发现的，默认情况下 R 会删除不必要的尺寸。`drop=FALSE`在索引时添加可以防止这种情况：

```
> dim(ay[,1:2,])
[1] 2 4
> dim(ax[,1:2,])
[1] 2 2 4
> dim(ay[,1:2,,drop = F])
[1] 1 2 4 
```

# algorithm - 用于检查集合 A 是否是集合 B 的子集的算法，比线性时间快

> ID：12755401
> 
> 赞同：6
> 
> 时间：2012-10-05T23:43:46.693
> 
> 标签：algorithm, set, subset

是否有一种算法（最好是恒定时间）来检查集合 A 是否是集合 B 的子集？

创建数据结构来解决这个问题不计入运行时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:50:27.110

好吧，您将不得不查看 的每个元素`A`，因此它必须至少是 的大小的线性时间`A`。

`O(A+B)`算法很容易使用哈希表（将 的元素存储在`B`哈希表中，然后查找 的每个元素`A`）。我不认为你可以做得更好，除非你知道一些先进的结构`B`。例如，如果`B`按排序顺序存储，则可以`O(A log B)`使用二进制搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T00:01:52.050

您可能会选择布隆过滤器（http://en.wikipedia.org/wiki/Bloom_filter）。但是可能存在误报，可以通过上面 Keith 提到的方法解决（但请注意，散列的最坏情况复杂度不是 O(n)，但您可以执行 O(nlogn)。

1.  根据Bloom filter判断A是否是B的子集
2.  如果是，那么做一个彻底的检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T01:28:10.967

如果你有一个字符串集中最不常见的字母和字母对的列表，你可以存储你的集合，按照它们最不常见的字母和字母对排序，并尽可能快地排除负面匹配的机会。我不清楚这与布隆过滤器结合起来有多好，可能哈希表会做，因为没有太多的二字和字母。

如果您有一些关于子集的最大大小甚至是公共大小的信息，您可以通过将给定大小的所有子集放入前面提到的布隆过滤器来类似地预处理数据。

您也可以将这两者结合起来。

# c# - 如何将自定义控件的依赖属性绑定到其视图模型属性

> ID：12755404
> 
> 赞同：0
> 
> 时间：2012-10-05T23:44:07.037
> 
> 标签：c#, wpf, mvvm, binding, viewmodel

我正在尝试将自定义控件的依赖属性绑定到其 ViewModel 的属性。

自定义控件如下所示：

* * *

```
 public partial class MyCustomControl : Canvas
    {
            //Dependency Property
            public static readonly DependencyProperty TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(MyCustomControl));

            private VisualCollection controls;
            private TextBox textBox;

            public string Text
            {
                get { return textBox.Text; }
                set 
                {
                    SetValue(TextProperty, value);
                    textBox.Text = value;
                }
            }

            //Constructor
            public MyCustomControl ()
            {
                controls = new VisualCollection(this);
                InitializeComponent();

                textBox = new TextBox();
                textBox.ToolTip = "Start typing a value.";

                controls.Add(textBox);

                //Bind the property
                this.SetBinding(TextProperty, new Binding("Text") {Mode = BindingMode.TwoWay, Source = DataContext});
            }
   } 
```

* * *

视图模型看起来像：

* * *

```
-------

public class MyCustomControlViewModel: ObservableObject
{
    private string _text;

    public string Text
    {
        get { return _text; }
        set { _text = value; RaisePropertyChanged("Text");}
    }
}

---------- 
```

由于某种原因，此“文本”属性的绑定不起作用。

我想要做的是，在实际实现中，当我更新底层 ViewModel 的 Text 属性时，我希望 MyCustom Control 的 text 属性更新。

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:39:27.847

经过一番研究，我终于找出了我的代码的问题。我通过创建一个静态事件处理程序来使这段代码正常工作，该处理程序实际上将新属性值设置为依赖属性的基础公共成员。依赖属性声明如下：

```
//Dependency Property
public static readonly DependencyProperty TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(MyCustomControl), new PropertyMetadata(null, OnTextChanged)); 
```

然后定义设置属性的静态方法如下：

```
private static void OnTextChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    MyCustomControl myCustomControl = (MyCustomControl)d;
    myCustomControl.Text = (string) e.NewValue;
} 
```

这是我唯一缺少的东西。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T20:38:53.547

您应该将您的成员 TextBox 绑定到您的 TextProperty 。我很确定您的 Text 属性上的 xaml 中的绑定会覆盖您在构造函数中创建的绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T23:51:44.940

只需绑定到依赖属性

```
<MyCustomControl Text="{Binding Path=Text}" /> 
```

# java - JUnit 测试能否从返回断言的对象中解析？

> ID：12755410
> 
> 赞同：0
> 
> 时间：2012-10-05T23:45:28.347
> 
> 标签：java, junit, assert

JUnit 测试能否从返回断言的对象中解析？

例如，如果我有一个看起来像这样的测试，这会起作用吗？

```
@Test
public void testCase1() {
    TestObject to = new TestObject();
    to.login();
    to.runTest();
    // then assert success
    to.verifyTest();

}

public Class TestObject() {
  ....
  public Assert verifyTest() {
    return assertTrue("Test result not found.", this.validateTestResult() );
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:32:04.897

大多数 Assert 调用`AssertionError`如果失败就会抛出一个错误，因此代码看起来与您放置的方式不完全相同，但您的代码可以稍微调整并编译/运行。因为它们是作为异常实现的，所以您可以从任何地方调用 Assert 方法，包括您为帮助更轻松地运行测试而设置的任何帮助程序类，只要您愿意，就可以在堆栈深处调用。

**编辑**：如果您需要对许多对象进行一组类似的断言，我非常建议您设置帮助程序类。我误解并认为您`TestObject`的系统是您正在测试的系统；其余的则适用于这种情况。

==

没有什么可以阻止您从`Assert`被测类中调用方法，但是 JUnit 的部分意图是拥有与您的代码类分开的干净的测试类。这样，测试可以单独发展，并且通常甚至不需要更改，除非您的类的接口发生更改。在我的代码中，我将它们放在一个单独的“源文件夹”中的同一个包中，所以你有：

*   src/com/mypackage/project1/database/DatabaseAccessor.java
*   testsrc/com/mypackage/project1/database/DatabaseAccessorTest.java
*   testsrc/com/mypackage/project1/database/DatabaseAccessorSystemTest.java

以这种方式分离事物的原因之一是确保没有测试代码在生产中运行；如果该`verifyTest`方法在同一个类中，则没有什么可以阻止您在您的类中调用它——或者更糟的是，其他类从代码库的其他地方调用它。您还可以避免依赖生产代码中的 junit.jar。

如果您希望在生产代码中进行断言以避免不一致的状态或非法参数，那是另一回事，您应该避免使用 JUnit 的`Assert`类 - 或者，就此而言，`assert`语句（根据参数编译出来）`javac`）。相反，更喜欢 Guava 之类的库[`Preconditions`](http://guava-libraries.googlecode.com/svn-history/r13/trunk/javadoc/com/google/common/base/Preconditions.html)。

# php - 组合宽度 sprintf

> ID：12755412
> 
> 赞同：0
> 
> 时间：2012-10-05T23:45:44.323
> 
> 标签：php, formatting, printf

我有两个要组合的字符串，并且没有超过一定的宽度。

```
$string = sprintf("%4(%s %s)", $s1, $s2);
//s1 s 
```

请注意组合的 %s %s 如何不超过 4 的宽度。

我怎样才能用 sprintf 做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:58:03.607

我不确定如何使用 sprintf 执行此操作，但您可以使用[substr()](http://php.net/manual/en/function.substr.php)执行此操作；

```
$string = substr("$s1 $s2",0,4); 
```

这应该返回相同的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:06:08.397

您可能需要为您的问题添加更多细节 - 如果字段长度超过 3 个字符（4 - 一个空格），您希望发生什么？

但也许这就是你想要的：

```
sprintf("%.4s", "$s1 $s2"); 
```

这将输出组合的 string `"$s1 $s2"`，修剪为 4 个字符。当然 substr 也会这样做，这在较长格式字符串的上下文中可能很有用。

老实说，我之前没有意识到精度说明符（`.`后跟数字）可以与`%s`.

# cordova - 如何使用 phonegaps InAppPurchase Manager 验证收据？

> ID：12755416
> 
> 赞同：1
> 
> 时间：2012-10-05T23:46:38.747
> 
> 标签：cordova, in-app-purchase

有没有人有如何使用 PhoneGaps 插件 InAppPurchaseManager 验证收据的示例代码？我希望使用苹果服务器，而不是我自己的服务器来验证收据。

# ember.js - 为什么这个 Ember.js 应用程序可以在本地运行，但不能在 jsFiddle.net 上运行？

> ID：12755417
> 
> 赞同：1
> 
> 时间：2012-10-05T23:46:51.967
> 
> 标签：ember.js, handlebars.js, jsfiddle

这是[小提琴](http://jsfiddle.net/odigity/zS5uu/)。这是我的本地文件内容的[要点](https://gist.github.com/3843051)。

如您所见，HTML 和 JavaScript 是相同的，我正在加载相同版本的 jQuery、Handlebars.js 和 Ember.js 库。它在本地按预期工作，但不会在 jsFiddle.net 上呈现应用程序模板。

我在 Web 控制台中看到以下错误：

[19:44:18.202] 错误：断言失败：您必须至少将一个对象和事件名称传递给 Ember.addListener @ [https://github.com/downloads/emberjs/ember.js/ember-latest.js:51](https://github.com/downloads/emberjs/ember.js/ember-latest.js:51)

顺便说一句，要将要点作为本地 HTML 文件进行测试，请确保在 Web 服务器后面运行它，否则您的浏览器将不会下载 JavaScript 库。如果你有瘦安装（ruby webserver），转到它所在的目录并运行`thin -A file start`，然后在浏览器中导航到 localhost:3000/jsfiddle-problem.html。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:32:49.180

如果您将小提琴上的“代码包装”配置设置为“onLoad”以外的选项之一，您的应用程序将正常工作。这是一个[例子](http://jsfiddle.net/ethan/zS5uu/5/)。

原因是 Ember 在 jQuery 就绪事件触发时初始化应用程序（假设您没有将 Ember.Application.autoinit 设置为 false）。将 jsFiddle 的“代码包装”配置设置为“onLoad”，您的应用程序在 jQuery 就绪事件触发后被引入文档，因此在 Ember 自动初始化之后。

请参阅下面来自 ember-latest 的片段，取自撰写本文之日，其中记录了 Ember 自动初始化在传递给 $().ready 的处理程序函数中执行。

```
if (this.autoinit) {
    var self = this;
    this.$().ready(function() {
        if (self.isDestroyed || self.isInitialized) return;
        self.initialize();
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:07:53.583

这很奇怪 - 在我禁用自动初始化之前，我无法让你的小提琴工作，特别是你的`{{controller.foo}}`电话。我猜在使用 jsfiddle 时，应用程序初始化会在看到您的路由器之前启动。我还注意到，即使您将 enableLogging 设置为 true，路由器也没有记录任何输出。

我更新了你的小提琴不使用自动初始化，[http://jsfiddle.net/zS5uu/4/](http://jsfiddle.net/zS5uu/4/)。我知道今天发布了一个新版本的 ember-latest，不知道初始化有什么变化。

# angularjs - 如何测试 AngularJS 指令

> ID：12755421
> 
> 赞同：45
> 
> 时间：2012-10-05T23:47:29.767
> 
> 标签：angularjs, testing, angularjs-directive

我正在开发一个将使用 AngularJS 的 Rails 3.2 应用程序。我可以让 Angular 做我需要做的事情，但是我很难弄清楚如何测试我正在做的事情。我正在使用guard-jasmine 使用PhantomJS 运行Jasmine 规范。

这是（相关的）html：

```
<html id="ng-app" ng-app="app">
  <div id="directive-element" class="directive-element">
  </div>
</html> 
```

javascript（在咖啡脚本中）看起来像：

```
window.Project =
  App: angular.module('app', [])
  Directive: {}

Project.Directive.DirectiveElement =
  ->
    restrict: 'C'
    link: (scope, element, attrs) ->
      element.html 'hello world'
Project.App.directive 'directiveElement', Project.Directive.DirectiveElement 
```

上面的代码完全符合它的意图。测试是问题所在。我根本无法让他们工作。这是我尝试过的一件事。发布这主要是为了在某个地方开始对话。

```
describe 'App.Directive.DirectiveElement', ->
  it 'updates directive-element', ->
    inject ($compile, $rootScope) ->
      element = $compile('<div id="app" ng-app="app"><div id="directive'element" class="directive-element"></div></div>')
      expect(element.text()).toEqual('hello world') 
```

顺便说一句，我是 AngularJS 的新手，所以如果我没有遵循任何关于命名空间、模块等的最佳实践，我们将不胜感激。

我如何得到这个工作的测试？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-06T14:21:17.287

[以下是在 angular-ui/bootstrap 中测试 alert 指令的方式](https://github.com/angular-ui/bootstrap/blob/master/src/alert/test/alert.spec.js)。

[这是另一组简单的测试，用于按钮指令。](https://github.com/angular-ui/bootstrap/blob/master/src/buttons/test/buttons.spec.js)

这里有一些提示：

*   一定要告诉测试运行者你正在测试什么模块`beforeEach(module('myModule'))`。

*   如果您的指令中有外部 templateUrls，您将希望以某种方式为测试运行程序预先缓存它们。测试运行器不能异步`GET`模板。在引导程序中，我们通过构建步骤将模板注入 javascript，并使每个模板成为一个模块。我们使用`grunt-html2js`grunt 任务。

*   在您的测试中，使用 a 中的`inject`帮助`beforeEach`器来注入 $compile 和 $rootScope 以及您需要的任何其他服务。用于`var myScope = $rootScope.$new()`为每个测试创建一个新的范围。您可以`var myElement = $compile('<my-directive></my-directive>')(myScope);`创建指令的实例，并可以访问其元素。

*   如果一个指令创建了它自己的作用域并且你想对它进行测试，你可以通过执行来访问该指令的作用域`var directiveScope = myElement.children().scope()`——它将获取元素的子元素（指令本身），并获得它的作用域。

*   对于测试超时，您可以使用`$timeout.flush()`结束所有未决的超时。

*   对于测试 Promise，请记住，当您解决一个 Promise 时，它**​​不会**调用它的`then`回调，直到下一个摘要。所以在测试中你必须做很多事情：`deferred.resolve(); scope.$apply();`.

[您可以在bootstrap repo](http://github.com/angular-ui/bootstrap/)中找到针对不同复杂度的指令的测试。进去看看`src/{directiveName}/test/`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-17T21:34:33.403

[Angular Test Patterns](https://github.com/daniellmb/angular-test-patterns)可能会对您有所帮助，coffeescript 和 javascript 中都有示例。

这是一个测试模式，用于验证[示例指令](https://github.com/daniellmb/angular-test-patterns/blob/master/example/coffeescript/app.coffee#L76)是否[呈现预期的输出](https://github.com/daniellmb/angular-test-patterns/blob/master/patterns/directive.md#render-the-expected-output-)。

# tinymce - 在自定义 ui 中为字体大小创建选择下拉框

> ID：12755428
> 
> 赞同：1
> 
> 时间：2012-10-05T23:48:19.873
> 
> 标签：tinymce

以下摘自 TinyMCE 网站及其制作自定义 ui 的示例。问题是该示例仅演示了如果您需要按钮该怎么做。如果您想为字体大小等实现自己的选择下拉菜单怎么办？我什至不想要任何自定义的东西，只需要一个默认标签就可以了。我该怎么做？

```
tinyMCE.init({
        mode: "textareas",
        content_css : "../css/custom_theme_editor.css",
        theme_advanced_font_sizes: "10px,12px,13px,14px,16px,18px,20px",
    font_size_style_values : "10px,12px,13px,14px,16px,18px,20px",
        language: false, // Prevents language packs from loading

        theme: function(editor, target) {
            var dom = tinymce.DOM, editorContainer;

            // Generate UI
            editorContainer = dom.insertAfter(dom.create('div', {style: ''},
                '<div>' +
                    '<button data-mce-command="bold">bold</button>' +
                    '<button data-mce-command="italic">italic</button>' +
                    '<button data-mce-command="underline">underline</button>' +
                    '<button data-mce-command="fontsizeselect">font size</button>' +  
                    '<button data-mce-command="mceInsertContent" data-mce-value="Hello">Insert Hello</button>' +
                '</div>' +
                '<div style="border: 1px dashed #cccccc;"></div>'
            ), target);

            // Set editor container size to target element size
            dom.setStyle(editorContainer, 'width', target.offsetWidth);

            // Bind events for each button
            tinymce.each(dom.select('button', editorContainer), function(button) {
                dom.bind(button, 'click', function(e) {
                    e.preventDefault();

                    // Execute editor command based on data parameters
                    editor.execCommand(
                        dom.getAttrib(e.target, 'data-mce-command'),
                        false,
                        dom.getAttrib(e.target, 'data-mce-value')
                    );
                });
            });

            // Register state change listeners
            editor.onInit.add(function() {
                tinymce.each(dom.select('button', editorContainer), function(button) {
                    editor.formatter.formatChanged(dom.getAttrib(button, 'data-mce-command'), function(state) {
                        state ? $(button).addClass("tiny-mce-button-clicked") : $(button).removeClass("tiny-mce-button-clicked");

                    });
                });
            });

            // Return editor and iframe containers
            return {
                editorContainer: editorContainer,
                iframeContainer: editorContainer.lastChild,

                // Calculate iframe height: target height - toolbar height
                iframeHeight: target.offsetHeight - editorContainer.firstChild.offsetHeight
            };
        }
    }); 
```

# mysql - MySQL - 当某些年份有空值时计算年度总计

> ID：12755432
> 
> 赞同：2
> 
> 时间：2012-10-05T23:49:08.860
> 
> 标签：mysql, subquery

我有 1 个包含类似数据的表：

```
CustomerID | ProjectID | DateListed | DateCompleted
123456     | 045       | 07-29-2010 | 04-03-2011
123456     | 123       | 10-12-2011 | 11-30-2011
123456     | 157       | 12-12-2011 | 02-10-2012
123456     | 258       | 06-07-2011 | NULL 
```

基本上，客户与我们联系，我们在列表中找到一个项目，并在完成后将其标记为已完成。

我所追求的是所有项目的简单（至少你会认为）计数，预期输出如下：

```
YEAR | TotalListed | TotalCompleted
2010 |       1     |        0
2011 |       3     |        2
2012 |       0     |        1 
```

但是，我下面的查询 - 因为加入 - 没有显示 2012 年的计数，因为没有列出 2012 年的项目。但是，我不能真正反转查询，因为那时 2010 年的计数不会显示（因为什么都没有于 2010 年完成）。

我愿意接受任何建议或如何做到这一点的提示。我考虑过临时表，这是最好的方法吗？我愿意接受任何能得到我需要的东西！

（如果代码看起来很熟悉，你们会帮我制作子查询！[带有主查询数据变量的 MySQL 子查询](https://stackoverflow.com/questions/6062975/mysql-subquery-with-main-query-data-variable)）

```
SELECT YEAR(p1.DateListed) AS YearListed, COUNT(p1.ProjectID) As Listed, PreQuery.Completed  
FROM(
    SELECT YEAR(DateCompleted) AS YearCompleted, COUNT(ProjectID) AS Completed 
    FROM projects 
    WHERE CustomerID = 123456 AND DateListed >= DATE_SUB(Now(), INTERVAL 5 YEAR) 
    GROUP BY YEAR(DateCompleted)
) PreQuery 
RIGHT OUTER JOIN projects p1 ON PreQuery.YearCompleted = YEAR(p1.DateListed)
WHERE CustomerID = 123456 AND DateListed >= DATE_SUB(Now(), INTERVAL 5 YEAR)
GROUP BY YearListed 
ORDER BY p1.DateListed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:28:14.713

在查看了您的表格、查询和预期结果之后 - 我相信我已经找到了一个经过更多修改的查询来满足您的需求。虽然这是对您现有查询的相当完整的重写，但我已经用您给定的数据对其进行了测试，并收到了您想要/期望的相同结果：

```
SELECT
    years.`year`,
    SUM(IF(YEAR(DateListed) = years.`year`, 1, 0)) AS TotalListed,
    SUM(IF(YEAR(DateCompleted) = years.`year`, 1, 0)) AS TotalCompleted
FROM
    projects
    LEFT JOIN (
        SELECT DISTINCT `year` FROM (
            SELECT YEAR(DateListed) AS `year` FROM projects
            UNION SELECT YEAR(DateCompleted) AS `year` FROM projects WHERE DateCompleted IS NOT NULL
        ) as year_inner
    ) AS years
        ON YEAR(DateListed) = `year`
        OR YEAR(DateCompleted) = `year`
WHERE
    CustomerID = 123456 AND DateListed >= DATE_SUB(Now(), INTERVAL 5 YEAR)
GROUP BY
    years.`year`
ORDER BY
    years.`year` 
```

为了解释，我们应该从内部查询（别名为`year_inner`）开始。`DateListed`它在和`DateCompleted`列中选择完整的年份列表，*然后*选择其中的`DISTINCT`列表来创建`years`别名子查询。此子查询用于获取我们想要数据的“年”的完整列表。这样做，与具有计数和分组的子查询相反，您只需`WHERE`在最外层查询上定义子句（但是，如果效率成为成千上万条记录的问题，您总是可以添加一个`WHERE`子句到内部查询；或日期列的索引）。

在我们构建了我们的内部查询之后，我们`projects`用一个`LEFT JOIN`for `DateListed` *or* `DateCompleted`的`YEAR()`值将结果表连接起来——这也将允许我们带回`null`列！

对于字段选择，我们使用`year`内部查询中的列来确保我们获得要显示的完整年份列表。然后，我们将当前行的 DateListed & DateCompleted`YEAR()`值与当前年份进行比较；如果它们相等，则加 1 - 否则加 0。当 we 时`GROUP BY year`，我们`SUM()`将为每一列计算该年的所有 1，并为您提供所需的输出（希望，当然 =P）。

# java - Java 访问受保护的属性

> ID：12755433
> 
> 赞同：-6
> 
> 时间：2012-10-05T23:49:09.230
> 
> 标签：java, attributes, protected

我是Java新手，需要一些帮助

我有一个具有 2 个受保护属性的抽象超类

```
public abstract class Superclass {
  protected int a = 0;
  protected int b = 0;
  ...
  } 
```

然后我有一个扩展超类的子类，我希望访问 a 和 b，但我不知道如何。我在网上搜索并没有找到任何东西。

```
public class Subclass extends Superclass {
  public boolean someMethod(){
  .....
  // at the end i need to do
  a += 1;
  return true
  }
} 
```

我得到编译错误：“unreachable statemen”

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:52:52.523

接口不能定义`protected`成员。您应该会看到编译器错误。

`protected`超类的成员可用于子类：您只需`extends`在超类（抽象超类或其他）的任何类中引用它们。

[请参阅此处](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)的访问修饰符表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T23:54:22.613

如果你有这个

```
abstract class TestABC {
    protected int a = 0;
    protected int b = 0;
} 
```

然后这个：

```
public class TestABCD extends TestABC{
    public void increaseA() {
      try {
        //do method including return
      } finally {
         a++;
      }
    }

    public String printIt() {
      System.err.println(t);
      increaseA();
      System.err.println(t);
    }

    public static void main(String[] args){ 
        TestABCD t = new TestABCD();
        t.printIt();
    }
} 
```

可以看到我可以直接在println中访问ta，因为我的main方法在子类里面。如果变量`private`不是`protected`，您将无法访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T00:09:17.547

“无法访问的语句”意味着您的代码中没有路径可以让您到达程序中的这一行。它与受保护的领域无关。检查是否在您之前有一条`return`语句`a+=1`总是在到达此行之前退出您的方法。或者，如果您`a+=1`在一个`if`从未执行的 -block 中，因为您指定的条件始终评估为`false`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T23:55:02.300

该类应该可以像那样访问a＆b，但是如果您声明“隐藏”该类的a或b，如果您想要超类中的a＆b，您只需像这样使用它们

有点像镜子屋，但有时在涉及到事情时很方便

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T23:55:14.270

如果您有一个使用受保护方法扩展超类的子类，例如

```
public abstract class SuperClass{

protected int a = 0;
protected int b = 0;

} 
```

您所要做的就是直接在子类中调用这些变量，如下所示：

```
public class SubClass extends SuperClass{

    public Subclass(){
       System.out.println("int a value:" + a);
       System.out.println("int b value:" + b);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T00:02:13.107

您的问题与 protected 无关。这与您试图将代码语句赤裸裸地放在它们不属于的类中有关。而是将那行有问题的代码放在方法或构造函数中。

```
public class Subclass extends Superclass {
  a += 1; // **** this line ****
} 
```

注释行无效。类中唯一可以裸露的代码是变量声明或带有初始化的声明，而不是不涉及变量声明的语句。同样，将该行放在构造函数或方法中：

```
public class Subclass extends Superclass {
  public Subclass() {
    a += 1; // **** this line ****
  }
} 
```

# php - php。通过引用与字符串传递变量。如何处理这两个不同的论点？

> ID：12755434
> 
> 赞同：0
> 
> 时间：2012-10-05T23:49:09.417
> 
> 标签：php, pass-by-reference

我正在编写自己的调试函数，我需要一些帮助来修复下面的代码。

我正在尝试打印一个变量及其名称、声明变量和函数的文件以及函数调用的行。我做的第一部分，变量、变量名、文件和行打印正确。在代码中，*a($variable)*效果很好。

问题是我希望这个函数也接受一个字符串，来自一个变量。但是 PHP 返回一个致命错误（*PHP Fatal error: Only variables can be pass by reference in ...*）。在代码中，*a('text out')*。

那么，如何修复此代码以正确接受变量或字符串？

**代码（已编辑）：**

```
function a(&$var){
    $backtrace = debug_backtrace();
    $call = array_shift($backtrace);

    $line = $call['line'];
    $file = $call['file'];

    echo name($var)."<br>".$var."<br>".$line."<br>".$file;
}

$variable='text in';
a($variable);
a('text out'); 
```

我需要通过引用传递变量才能在下面使用此函数（该函数正确获取变量名称，也适用于数组）：

```
function name(&$var, $scope=false, $prefix='unique', $suffix='value'){
   if($scope) $vals = $scope;
   else      $vals = $GLOBALS;
   $old = $var;
   $var = $new = $prefix.rand().$suffix;
   $vname = FALSE;
   foreach($vals as $key => $val) {
      if($val === $new) $vname = $key;
   }
   $var = $old;
   return $vname;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:18:22.390

您的代码当前实现的方式在[`pass by reference`](http://php.net/manual/en/language.references.pass.php)设计上是完美的，但设计上也不能更改为具有两种`a()`方法 - 一种通过引用接受变量，另一种作为字符串文字。

如果确实需要传递字符串文字而不是首先将其分配给变量，我建议创建第二个名为的便捷方法`a_str()`，该方法实际上接受字符串文字而不是引用变量。此方法的唯一目的是将变量传递给原始`a()`方法 - 从而声明要通过引用传递的变量。

```
function a_str($var) {
    a($var);
} 
```

唯一要记住的是，`a($variable);`通过引用传递和`a_str('some text');`不传递时使用。

这是您的`name()`函数的相同便捷方法：

```
function name_str($var, $scope=false, $prefix='unique', $suffix='value'){
    return name($var, $scope, $prefix, $suffix);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:34:57.417

在不编写像@newfurniturey 建议的附加函数的情况下完成您所要求的唯一方法是简单而简单地打开和解析您的函数作为文本调用的文件（例如使用`fopen`），使用来自`debug_backtrace`. 这在性能方面会很昂贵，但如果仅用于调试目的可能还可以；并且使用此方法，您将不再需要函数中的引用，这意味着您可以自由地接受文字作为参数。

# c# - 如何用更丰富的类型覆盖接口方法中定义的参数？

> ID：12755439
> 
> 赞同：4
> 
> 时间：2012-10-05T23:49:51.270
> 
> 标签：c#, inheritance, arguments, overriding, base-class

我有这些：

```
public class TennisPlayer
{

}

public class RogerFederer : TennisPlayer
{

}

public class RafaelNadal : TennisPlayer
{

} 
```

然后我有一些带有方法的类，例如：

```
public abstract class Manager
{
    protected abstract void ScheduleFriendlies(TennisPlayer player);
}

public class RafaelNadalManager : Manager
{
    public void ScheduleFriendlies(RafaelNadal rn)
    {
        //throw new NotClayException();
    }
}

public class RogerFedererManager : Manager
{
    public void ScheduleFriendlies(RogerFederer rf)
    {
        //throw new NotGrassException();
    }
}

//'RafaelNadalManager' does not implement inherited abstract member 'Manager.ScheduleFriendlies(TennisPlayer)' 
```

我想要实现的目标是我希望拥有子类，`Manager`但每个这样的类都将绑定到一个玩家，因此这些子类（`Manager`类）中的方法将特定于该玩家。换句话说`Roger`，应该有他自己的`ScheduleFriendlies`，而`Rafael`应该有他自己的。

**我该怎么做？替代设计可以，但请记住：**

**我可以改变**的：继承，它的路线等

**但是没有奢侈**：取消子管理器课程并合并为一个（换句话说，我需要`RogerFederer`并`RogerFedererManager`作为单独的课程）。

**我试过这个**：

```
public abstract class Manager
{
    protected abstract bool ScheduleFriendlies<T>(T player) where T : TennisPlayer;
}

public class RafaelNadalManager : Manager
{
    protected override bool ScheduleFriendlies<T>(T player)
    {
        //but how do I enforce the caller that only RafaelNadal object can be 
        //passed to this but not RogerFederer?
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T23:53:06.700

你很接近，但你需要类泛型，而不仅仅是方法：

```
public abstract class Manager<T> where T : TennisPlayer
{
    protected abstract bool ScheduleFriendlies(T player);
} 
```

然后你可以使用：

```
public class RafaelNadalManager : Manager<RafaelNadal>
{
     protected override bool ScheduleFriendlies(RafaelNadal player)
     {}
} 
```

# python - python结构，如何不并行化本地命令？

> ID：12755442
> 
> 赞同：1
> 
> 时间：2012-10-05T23:50:25.623
> 
> 标签：python, fabric

如何不使用 @parallel 装饰器在任务中并行化本地命令：

```
@parallel
def myTask():
  local('initialize localhost')
  run('command on remote host')
  local('clean up localhost') 
```

我希望本地主机上的命令只执行一次，而远程主机的命令并行运行。现在我看到为每个远程主机实例运行本地主机命令。最干净的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:01:32.623

以下内容对您有用吗？

```
def local_init():
    local('initialize')

@parallel
def myTask():
    run('remote command')

def local_cleanup():
    local('clean up') 
```

进而：

```
fab local_init myTask local_cleanup 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:46:40.170

将您的并行命令分组到一个装饰函数中。然后使用 execute() 在本地调用之间调用它。

# android - 模拟器无法启动

> ID：12755447
> 
> 赞同：0
> 
> 时间：2012-10-05T23:51:13.570
> 
> 标签：android, android-emulator, emulation

我无法让模拟器启动。我正在运行 opensuse 12.1，拥有最新的 SDK (20.0.3)，并且一直在使用 developer.android 上的说明

我尝试以两种方式启动模拟器，eclipse 和命令行都具有相同的结果，事情看起来开始然后冻结。当我检查“adb 设备”并且 eclipse 没有找到任何设备时，eclipse 将完成动作但没有设备出现。如果我检查机器上的进程，则会出现一个仿真器进程，但如果放置数小时，它永远不会实现。

我安装/卸载了好几次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:12:20.863

removing or renaming tools/lib/libOpenglRender.so

[http://code.google.com/p/android/issues/detail?id=34233](http://code.google.com/p/android/issues/detail?id=34233)

# objective-c - 带有绑定的嵌套 NSCollectionView

> ID：12755460
> 
> 赞同：3
> 
> 时间：2012-10-05T23:53:30.507
> 
> 标签：objective-c, xcode, macos, binding

我正在尝试将 NSCollection 视图嵌套在另一个视图中。我尝试使用[Apple 快速入门指南](https://web.archive.org/web/20140604061651/https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CollectionViews/Introduction/Introduction.html "快速入门指南")作为基础创建一个新项目。

我首先将一个集合视图插入到我的笔尖中，然后将另一个集合视图拖到自动添加的视图上。添加的子集合视图获得一些标签。这是我的笔尖的照片：

![完成笔尖](../Images/a34fb5d335cb7b20d7b957926ef0eb1d.png)

然后我回去建立我的模型：我的第二级模型 .h 是

```
@interface BPG_PersonModel : NSObject

@property(retain, readwrite) NSString * name;
@property(retain, readwrite) NSString * occupation;

@end 
```

我的第一级模型 .h 是：

```
@interface BPG_MultiPersonModel : NSObject

@property(retain, readwrite) NSString * groupName;
@property(retain,readwrite) NSMutableArray *personModelArray;

-(NSMutableArray*)setupMultiPersonArray;

@end 
```

然后我写出实现在第一级控制器中制造一些假人（建立第二级模型）：（编辑）删除 awakefromnibcode

```
/*- (void)awakeFromNib {

    BPG_PersonModel * pm1 = [[BPG_PersonModel alloc] init];
    pm1.name = @"John Appleseed";
    pm1.occupation = @"Doctor";

    //similar code here for pm2,pm3

    NSMutableArray * tempArray = [NSMutableArray arrayWithObjects:pm1, pm2, pm3, nil];
    [self setPersonModelArray:tempArray];

} */

-(NSMutableArray*)setupMultiPersonArray{
    BPG_PersonModel * pm1 = [[BPG_PersonModel alloc] init];
    pm1.name = @"John Appleseed";
    pm1.occupation = @"Doctor";

    //similar code here for pm2,pm3

    NSMutableArray * tempArray = [NSMutableArray arrayWithObjects:pm1, pm2, pm3, nil];
    return tempArray;
} 
```

最后我在我的 appdelegate 中做了一个类似的实现来构建多人数组

```
- (void)awakeFromNib {

    self.multiPersonArray = [[NSMutableArray alloc] initWithCapacity:1];

    BPG_MultiPersonModel * mpm1 = [[BPG_MultiPersonModel alloc] init];
    mpm1.groupName = @"1st list";
    mpm1.personModelArray = [mpm1 setupMultiPersonArray]; 
```

（我没有在这里包含所有代码，让我知道它是否有用。）

然后我按照快速入门指南的建议绑定所有内容。我添加了两个带有属性的 nsarraycontrollers，以将每个级别的数组控制器绑定到控制器对象

然后我使用绑定到排列对象的内容将集合视图绑定到数组控制器

最后我绑定子视图：

在我的模型中使用 grouptitle 标签来表示object.grouptitle 对象

然后我的名字和职业标签到他们各自的代表对象

我通过包含必要的访问器方法使所有对象都符合 kvo

然后我尝试运行这个应用程序，我得到的第一个错误是：`NSCollectionView item prototype must not be nil.`

（编辑）从第一级模型中删除 awakefromnib 后，我得到了这个

![在此处输入图像描述](../Images/f5257e2f17d7ffea5f199f09d21b83e3.png)

有没有人成功嵌套 nscollection 视图？我在这里做错了什么？这是完整的项目压缩包供其他人测试：

[http://db.tt/WPMFuKsk](http://db.tt/WPMFuKsk)

谢谢您的帮助

编辑：

我终于联系了苹果技术支持，看看他们是否可以帮助我。他们的回应是：

> Cocoa 绑定只能到此为止，直到您需要一些额外的代码才能使其全部工作。
> 
> 当使用数组中的数组来填充您的集合视图时，如果没有继承 NSCollectionView 并覆盖 newItemForRepresentedObject 并自己实例化相同的 xib，而不是使用 NSCollectionView 提供的视图复制实现，绑定将无法正确传输到每个复制的视图。
> 
> 因此，在使用 newItemForRepresentedObject 方法时，您需要将我们的 NSCollectionViewItems 分解为单独的 xib，以便您可以将人员子数组从组集合视图传递到内部集合视图。
> 
> 因此，对于您的分组集合视图，您的覆盖如下所示：
> 
> ```
> - (NSCollectionViewItem *)newItemForRepresentedObject:(id)object 
> { 
> BPG_MultiPersonModel *model = object; 
> MyItemViewController *item = [[MyItemViewController alloc] initWithNibName:@"GroupPrototype" bundle:nil]; 
> item.representedObject = object; 
> item.personModelArray = [[NSArrayController alloc] initWithContent:model.personModelArray]; 
> return item; 
> } 
> ```
> 
> 对于您的内部集合子类，您的覆盖如下所示：
> 
> ```
> - (NSCollectionViewItem *)newItemForRepresentedObject:(id)object 
> { 
> PersonViewController *item = [[PersonViewController alloc] initWithNibName:@"PersonPrototype" bundle:nil]; 
> item.representedObject = object; 
> return item; 
> } 
> ```

这是他们发回给我的示例项目-

[http://db.tt/WPMFuKsk](http://db.tt/WPMFuKsk)

我仍然无法让它与我自己的项目一起使用。他们发回的项目可以进一步简化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T01:42:23.100

请仔细看看这个[答案](https://stackoverflow.com/a/12610324/795245)

简短的回答：将每个 NSView 提取到自己的 .xib 中应该可以解决这个问题。

扩展：复制原型时，您的 NSCollectionViewItem 子类中指定的 IBOutlet 未连接。那么我们如何将 NSCollectionViewItem 子类中指定的 IBOutlet 连接到视图中的控件呢？

Interface Builder 将自定义 NSView 放在与 NSCollectionView 和 NSCollectionViewItem 相同的 nib 中。这是愚蠢的。解决方案是将 NSView 移动到它自己的 nib 并让控制器以编程方式加载视图：

*   将 NSView 移动到它自己的 nib 中（从而断开 NSCollectionViewItem 和 NSView 之间的连接）。
*   在 IB 中，将 File Owner 的 Class Identity 更改为 NSCollectionViewItem 子类。
*   将控件连接到文件所有者插座。
*   最后获取 NSCollectionViewItem 子类来加载 nib：

有用的链接：

1.  [如何从头开始以编程方式创建 nscollectionview](https://stackoverflow.com/a/9154045/795245)
2.  [nscollectionview 提示](http://benedictcohen.co.uk/blog/archives/72)
3.  [尝试嵌套 nscollectionview 失败](http://www.cocoabuilder.com/archive/cocoa/283883-attempt-to-nest-an-nscollectionview-fails.html)
4.  [nscollectionview 还原](http://comelearncocoawithme.blogspot.fr/2011/08/nscollectionview-redux.html)

# c++ - 错误 LNK 2005 Visual Studio 2008

> ID：12755468
> 
> 赞同：0
> 
> 时间：2012-10-05T23:54:42.543
> 
> 标签：c++, visual-studio-2008

请帮助建立我的项目，我在 2 小时后放弃了。这就是它的样子： ![解决方案资源管理器](../Images/69a73b430dafc403e53c87541e6bf4b1.png)

```
BrickClass.h

 - #include"header.h"

header.h

 - #pragma once
 - #include windows.h
 - #include windowsX.h
 - #include tchar.h
 - #include commctrl.h
 - #include "matrixClass.h"
 - #include "resource.h"

mainClass.h

 - #include "header.h"
 - #include "brickClass.h"

matrixClass.h

 - #include cstdlib
 - #include cstdio
 - #include math.h

brickClass.cpp

 - #include "brickClass.h"

main.cpp

 - #include "mainClass.h"

mianClass.cpp

 - #include "mainClass.h" 
```

![错误](../Images/9cf9292405f273a0f0533761113933c9.png)

我需要做什么才能让他开心？我尝试了很多变种，但不知道如何..？感谢你的帮助。该项目在这里：[http ://www.filehosting.org/file/details/381812/Tetris.rar](http://www.filehosting.org/file/details/381812/Tetris.rar)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:01:00.957

如果您在第 2 个小时后放弃，这可能不是适合您的行业 :-) 有时您会花费数天时间试图解决问题，最后会自责，因为它是回想起来如此简单。

* * *

无论如何，解决手头的问题。这几乎可以肯定是因为您的头文件中有*代码。*`BrickClass`

`main.cpp`通过在(via `mainClass.h`) 和中包含该头文件`BrickClass.cpp`，每个目标文件都会获得代码的独立副本。

然后，当您尝试将这些目标文件链接在一起时，链接器发现有两个副本。

头文件通常应包含*声明，*例如`extern int i;`或函数原型，例如`int xyzzy (void);`.

*定义，*如和`int i;`函数`int xyzzy (void) {return 42;}`，应该只放在“常规”源文件中。

# c++ - 调整数组大小函数不会改变内存位置

> ID：12755469
> 
> 赞同：0
> 
> 时间：2012-10-05T23:54:53.227
> 
> 标签：c++

我找到了一个调整数组大小的函数，但无法理解它是如何工作的（或者它是否正常工作）。为了测试，我将“temp”数组设置为一个新值，并且“startCounter”确实被分配给该值，但是 startCounter 的内存位置没有改变。这是我的代码：

```
int * startCounter;

void resizeArray(int *&arraySent,int origSize,int newSize) {
    output << "&arraySent " << &arraySent << endl;
    output << "arraySent[0] " << arraySent[0] << endl;
    int* temp = new int[newSize];
    output << "&temp " << &temp << endl;
    for (int i=0; i<origSize; i++) {
        temp[i] = arraySent[i];
    }
    temp[0]=744;
    delete [] arraySent;
    arraySent = temp;
    output << "&arraySent " << &arraySent << endl;
}

//....

startCounter = new int [3];
startCounter[0]=345;
output << &startCounter << endl;
resizeArray(startCounter,3,10);
output << "startCounter[0]" << startCounter[0] << endl;
output << "&startCounter" << &startCounter << endl; 
```

这是我从中得到的输出：

```
 &startCounter 0x60fab8
    &arraySent 0x60fab8
    arraySent[0] 345
    &temp 0x82cfe54
    &arraySent 0x60fab8
    startCounter[0] 744
    &startCounter 0x60fab8 
```

我的问题是，为什么 startCounter 的内存位置在删除它并将其分配给新的“temp”数组后不会从 0x60fab8 更改？现在不应该变成0x82cfe54吗？

PS我了解向量等，但主要关心了解这个特定功能的工作原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:59:39.957

```
void resizeArray(int *&arraySent,int origSize,int newSize) {
    output << "&arraySent " << &arraySent << endl; 
```

输出指针变量的地址，而不是它持有的地址。

只需省略地址运算符即可获得（可能）预期效果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:00:02.070

`&startCounter`是指针的地址，而不是它指向的地址。它的价值不会改变。只需使用`startCounter`.

# url - 如何在cherrypy中获取对象的url？

> ID：12755471
> 
> 赞同：2
> 
> 时间：2012-10-05T23:55:00.947
> 
> 标签：url, reverse, cherrypy, dispatcher

我是 CherryPy 的新手。我正在使用默认调度程序，其 URL 结构类似于：

```
root = Root()
root.page1 = Page1()
root.page1.apple = Apple()
root.page2 = Page2()
root.page2.orange = Orange() 
```

`Orange`呈现一个模板，我需要在其中链接到`Apple`. 我可以硬编码`/page1/apple/`。但是我怎样才能`Apple`以 DRY 的方式获取 URL？

这可以使用 CherryPy 中的默认调度程序完成，还是只能使用 Routes 调度程序？

（我来自 Django 世界，人们会使用[`reverse()`](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse)它。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:35:53.387

您可以通过以下方式访问已安装的应用程序

```
cherrypy.tree.apps[mount_point].root 
```

`root`始终是挂载点的挂载实例。所以反向函数看起来像：

```
def reverse(cls):
    # get link to a class type
    for app_url in cherrypy.tree.apps.keys():
        if isinstance(cherrypy.tree.apps[app_url].root, cls):
            # NOTE: it will return with the first mount point of this class
            return app_url 
```

请在下面找到使用您的类的示例代码。`http://localhost:8080/page4/orange/`打印出来`{ Orange and the link to apple: : "/page3/apple" }`

```
import cherrypy

link_to_apple_global = ''

class Orange(object):
    def __init__(self):
        pass
    @cherrypy.expose
    @cherrypy.tools.json_out()
    def index(self):
        return {"Orange and the link to apple: ": link_to_apple_global}
class Page2(object):

    def __init__(self):
        pass
    @cherrypy.expose
    def index(self):
        return "Page2"
class Apple(object):

    def __init__(self):
        pass
    @cherrypy.expose
    def index(self):
        return "Apple"

class Page1(object):

    def __init__(self):
        pass
    @cherrypy.expose
    def index(self):
        return "Page1"

class Root(object):

    def __init__(self):
        pass
    @cherrypy.expose
    def index(self):
        return "Root"            

def reverse(cls):
    #return cherrypy.tree.apps.keys()
    #return dir(cherrypy.tree.apps[''].root)
    #return dir(cherrypy.tree.apps['/page3/apple'].root)
    # get link to apple
    for app_url in cherrypy.tree.apps.keys():
        if isinstance(cherrypy.tree.apps[app_url].root, cls):
            # NOTE: it will return with the first instance
            return app_url

root = Root()
root.page1 = Page1()
root.page1.apple = Apple()
root.page2 = Page2()
root.page2.orange = Orange()

cherrypy.tree.mount(root, '/')
# if you do not specify the mount points you can find the objects
# in cherrypy.tree.apps[''].root...
cherrypy.tree.mount(root.page1, '/page4')
cherrypy.tree.mount(root.page2, '/page3')
cherrypy.tree.mount(root.page2.orange, '/page4/orange')
cherrypy.tree.mount(root.page1.apple, '/page3/apple')

link_to_apple_global = reverse(Apple)

cherrypy.engine.start()
cherrypy.engine.block() 
```

# ruby - 迭代所有 mongoid 字段的最佳方法

> ID：12755476
> 
> 赞同：1
> 
> 时间：2012-10-05T23:55:49.977
> 
> 标签：ruby, validation, mongodb, mongoid, sanitization

说我有一个 mongoid 类

```
Class User
    include Mongoid::Document
    field :username, type: String
    field :age, type: Integer

    before_save :remove_whitespace

    def remove_whitespace
        self.username.strip!
        self.age.strip!
    end
end 
```

在方法中`remove_whitespace`；有没有更好的方法来迭代所有字段以使用块和迭代器将它们剥离，而不是单独键入每个字段（`self.username.strip!`）？我班上有大约 15 个字段，正在寻找一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T00:04:19.597

没有`attributes`方法吗？

```
attributes.each {|attr| attr.strip!} 
```

或者

```
attributes.each do |attr_name, value|
  write_attribute(attr_name, value.strip)
end 
```

# jquery - 页面中间的 Div 居中在显示第二次之前不起作用

> ID：12755477
> 
> 赞同：0
> 
> 时间：2012-10-05T23:56:15.597
> 
> 标签：jquery, html, css

我目前正在研究 HTML/CSS/Javascript。我有一个名为 message 的 div id 和一个显示消息的 javascript 函数，经过这么多秒后调用另一个函数来隐藏它。

这一切都非常有效，除了第一次调用 showMessage 函数时，消息 div 稍微向右推（非常明显不在屏幕中心），然后在 5 秒后 hideMessage 运行并隐藏 div 消息。

如果我再次调用 showMessage 函数，则 div 将正确居中在屏幕中间。

id 消息的 css 只是 got `display: none;`。

下面是 showMessage 函数在显示 div 之前添加的 messageError 类的 css。

```
.messageError
{
    position: absolute;
    top: -48px;
    width: auto;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    background-color: #ff3d3d;
    border: #c10000 solid thin;
    border-radius: 5px;
    color: white;
    font-weight: bold;
} 
```

下面是javascript使用的代码

```
function showMessage(persistent, message, type)
{
    $('#message').css({
        position:'absolute',
        padding: '10px',
        left: ($(window).width() - $('#message').outerWidth())/2
    });

    $("#message")
        .hide()
        .html(message);

    if (type == "error")
    {
        $("#message").addClass("messageError");
    }
    else if (type == "workingComplete")
    {
        $("#message").addClass("messageWorkingComplete");
    }

    $("#message").fadeIn("slow");
    if (!persistent)
    {
        setTimeout("hideMessage()", 5000);
    }
}

function hideMessage()
{
    $("#message")
        .fadeOut("slow");
         removeClass("messageError")
        .removeClass("messageWorkingComplete")
} 
```

我怎样才能使 div 第一次位于中间而无需关闭并重新加载以使其出现在中间。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:05:22.157

通常，我不喜欢使用：

```
 width:auto; 
```

如果您试图将 div 居中。分配一个宽度，

```
 margin:0 auto; 
```

可以做到这一点。还注意到您分配的课程未在您的问题上发布 css。这也可能是问题所在。如果您使用 chrome，一旦您查看结果，请右键单击它，然后使用“检查”元素。这将打开检查器并向您显示所有可以引导您找到问题所在的 css（以及其他非常有用的东西）。问候路易斯

# image - 如何将自定义表单图像保存到自定义用户字段

> ID：12755479
> 
> 赞同：0
> 
> 时间：2012-10-05T23:56:28.067
> 
> 标签：image, forms, drupal, drupal-7, drupal-forms

我有一个自定义表单，可以创建一个新用户并为该用户填写一些自定义字段。其中一个字段是自定义图像（不是系统头像图像）。

我可以通过表单将图像上传到服务器，但无法将其放入相应的字段。到目前为止，这是我的（自定义模块）代码。

```
function newacc_freebusiness_form($form, &$form_state) { 

$form['bussimage'] = array(
  '#title' => t('Upload an image that shows off your business.'),
  '#type' => 'managed_file',
  '#description' => t('Max size of 3Mb and filetype of jpg jpeg or png'),
  '#upload_location' => 'public://bussimages/',
  '#upload_validators' => array(
    'file_validate_extensions' => array('png jpg jpeg'),
    'file_validate_size' => array(3*1024*1024),
      ),
  '#required' => TRUE,
);
 $form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'Submit',
 );

 $form['#validate'][] = 'newacc_freebusiness_validate';

 return $form;
 }
 function newacc_freebusiness_validate($form, &$form_state) {
  $bussimage = $form_state['values']['bussimage'];
  $file = file_load($bussimage);
  $bussimage = image_load($file -> uri);
  image_save($bussimage);
  $bussimage = image_load($file -> uri);
  $edit = array(
    'name' => 'name',
    'mail' => 'mail@mail.com',
    'status' => 0,
    'language' => 'en',
    'init' => 'mail@mail.com',
    'roles' => array(8 => 'Promoter'),
    'field_business_image' => array(        
    'und' => array(
        0 => array(
            'value' => $bussimage,
            ),
          ),
        ),
        );
        user_save(NULL, $edit);
 } 
```

这是抛出错误消息：

```
Notice: Undefined index: fid in file_field_presave() (line 219 of /var/www/drupal_site/modules/file/file.field.inc). 
```

我现在已经尝试了很多技巧并且在谷歌上搜索了很长时间，以至于我什至无法解释我拥有什么并且没有尝试过！

请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:15:14.030

好的 - 解决了这个问题。线索在错误消息中，解决方案非常简单！这是代码：

```
function newacc_freebusiness_form($form, &$form_state) { 

    $form['bussimage'] = array(
    '#title' => t('Upload an image that shows off your business.'),
    '#type' => 'managed_file',
    '#description' => t('Max size of 3Mb and filetype of jpg jpeg or png'),
    '#upload_location' => 'public://bussimages/',
    '#upload_validators' => array(
    'file_validate_extensions' => array('png jpg jpeg'),
    'file_validate_size' => array(3*1024*1024),
    ),
    '#required' => TRUE,
    );
$form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'Submit',
);

$form['#validate'][] = 'newacc_freebusiness_validate';

return $form;
}
function newacc_freebusiness_validate($form, &$form_state) {
    $bussimage = $form_state['values']['bussimage'];
    $file = file_load($bussimage);
    $edit = array(
    'name' => 'name',
    'mail' => 'mail@mail.com',
    'status' => 0,
    'language' => 'en',
    'init' => 'mail@mail.com',
    'roles' => array(8 => 'Promoter'),
    'field_business_image' => array(        
        'und' => array(
            0 => array(
            'fid' => $file -> fid,
        ),
      ),
    ),
    );
user_save(NULL, $edit);
} 
```

Drupal 所寻找的只是数组中的文件fid。不知道为什么我最初认为它必须比这更复杂。

# c++ - EXE全球减速

> ID：12755482
> 
> 赞同：0
> 
> 时间：2012-10-05T23:56:49.733
> 
> 标签：c++, performance, linker, exe

我有一个包含 Fortran 和 C++ 代码的 exe，该代码最近被修改为链接到一些自定义静态库。exe 现在在每个函数中的运行速度都比以前慢得多（~ 2 倍），即使它在测试运行中没有调用任何新代码。调用图和函数命中计数已在分析器中检查，并验证新代码未被调用的断言。

在链接时，现在有许多由新代码引起的“多重定义”警告。但是，优化仍然启用，并且没有修改其他编译器或环境设置。exe 没有比以前大很多，并且两次运行的内存占用量相同。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:26:31.450

该问题是由螺旋状的包含链引起的，其中优化在调用链下游的某些模块中无意中关闭。在链接标头之前，在这些模块中没有优化是没有意义的，这是代码的性能关键部分。由于构建顺序的更改，用于包含这些标头的优化模块不再起作用。

# java - 如何获取有关 Java 文件中表达式的类型信息？

> ID：12755483
> 
> 赞同：1
> 
> 时间：2012-10-05T23:57:04.670
> 
> 标签：java, abstract-syntax-tree, typechecking

通过编写“注释处理器”，我可以将任何 Java 文本文件转换为抽象语法树，并使用自定义访问者（的子类）遍历它[`TreePathScanner`](http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/tree/TreeVisitor.html)。

不幸的是，[据我所知](http://openjdk.java.net/groups/compiler/doc/compilation-overview/index.html)，注释处理器都在编译器的类型检查阶段*之前运行。*

获取有关 Java 表达式的类型信息的最简单方法是什么（假设它们是完整、有效的 Java 文件的一部分）？我不想编写自己的类型检查器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:42:58.700

在戳了一会儿之后，似乎答案是“你不能”。唉，我必须寻求替代解决方案。（[Eclipse 编译器 API](https://stackoverflow.com/questions/5600213/using-java-compiler-api-without-requiring-install-of-jdk)看起来很有希望……）

# iphone - iOS如何本地化模块中的文件

> ID：12755484
> 
> 赞同：1
> 
> 时间：2012-10-05T23:57:08.523
> 
> 标签：iphone, ios, localization, internationalization, translation

我有一个实现我们都知道和喜爱的“拍照/从库中选择”的类。它在这里[https://github.com/fulldecent/FDtake](https://github.com/fulldecent/FDTake)这通过 git 子模块包含在我的其他项目中，并且工作正常。

现在我需要把那个课上的文字翻译成中文，比如“拉取/选照片”之类的。有没有好办法把翻译放在那里让每个人都可以使用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T07:52:01.507

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:01:35.463

我认为捆绑包（正如 Olaf 建议的那样）会很好用，但另一种方法是开销更少，以确保您的可本地化字符串资源不会干扰同一解决方案中的另一个项目（[对人们在另一个本地化中重用您的组件造成奇怪的问题project](https://stackoverflow.com/questions/10493243/xcode-localizable-strings-not-always-working/10494956#10494956) ) 是将您的`localizable.strings`文件名更改为唯一的文件名。这意味着`NSLocalizedString`您现在需要使用它的变体`NSLocalizedStringFromTable`（[Apple 文档](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/macro/NSLocalizedStringFromTable)），其中 tableName 与您的字符串文件同名（没有 .strings 扩展名）。您可以定义自己的宏，这样它就可以直接替换为`NSLocalizedString`，比如`FDTakeLocalizedString`.

与文件相比，XIB 文件或故事板发生文件名冲突的可能性要小得多`localizable.strings`。但是在这两种情况下，如果您使用前缀命名约定（例如 FDtake.strings 和 FDtake-Main.xib），它将消除风险并且只能提供帮助。

# javascript - 网页锚定链接。显示有关用户在哪个锚点上的指示

> ID：12755485
> 
> 赞同：-1
> 
> 时间：2012-10-05T23:57:19.060
> 
> 标签：javascript, css, html, hyperlink

如果我们有一个带有不同 div（部分）的单页网站，并且顶部有一个标题，其中不同的链接指向页面上的不同锚点（div），或者当然是滚动。如何在代表用户当前所在锚点的链接上显示一个小指示器，例如[这个网站](http://www.smokeybones.com/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:01:11.517

我会使用`:hover`CSS 选择器（[http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)）。您还可以使用`title`链接上的属性来创建工具提示。

**更新：**

我必须根据您的评论假设您指的是链接网站右下方的“页面指示器”。

为了模仿这一点，只需在更改活动 div 时更改目标指示器的 CSS。这是一个简单的例子：http: [//jsfiddle.net/N39Gf/1/](http://jsfiddle.net/N39Gf/1/)

请注意，如果您愿意考虑使用 jQuery 或类似的库，动画会变得非常简单，类切换和许多其他模拟这种效果所需的操作也是如此。

# asp.net-mvc - 通过 WCF 进行 Asp.net mvc4 身份验证

> ID：12755486
> 
> 赞同：1
> 
> 时间：2012-10-05T23:57:19.550
> 
> 标签：asp.net-mvc, wcf, authentication

我需要一个项目来构建一个 ASP.NET MVC4（剃刀引擎）“前端”和一个 WCF 服务作为“后端”（带有一个 sql server 2012 数据库）。

一个要求是登录、注册等。我想把这个逻辑放在后端，但在前端我想利用 [AllowAnonymous] 和逻辑来验证具有角色的用户（例如使用formauthentication、webmatrix.WebSecurity、Membership provider？）。

有可能实现吗？我是否必须自己创建登录和注册（以及角色等）功能？或者我可以使用 ASP.NET MVC 或 WCF 的内置功能/库吗？或两者？

您能否提供一些示例/建议/教程来实现这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:02:32.437

我认为这应该适合你：

[http://msdn.microsoft.com/en-us/library/bb386582.aspx](http://msdn.microsoft.com/en-us/library/bb386582.aspx)

**编辑：**详细说明，您可以使用自定义逻辑进行 WCF 身份验证，包括调用 ASP.NET 成员资格提供程序，这应该可以与 MVC 和您提到的安全属性一起正常工作。

或者是另一台服务器上的 WCF 服务，并且您想从您的 ASP.NET 控制器调用您的 WCF 服务以进行身份​​验证？这有点复杂，但您应该能够通过实现自己的 Membership 提供程序来做到这一点。

根据场景，您可以重用 MVC 附带的部分或全部登录和注册视图。

**编辑：**在第二种情况下，这里有一些可能有帮助的指针：

[http://singlesignon.codeplex.com/](http://singlesignon.codeplex.com/) - 似乎是你需要的，但我没有检查代码。

[使用 Web 服务进行身份验证的自定义成员资格](https://stackoverflow.com/questions/10837484/custom-membership-that-uses-web-service-for-authentication)- 没有代码，但它确认它应该可以工作。

# excel - 从 Excel 填充访问记录

> ID：12755488
> 
> 赞同：0
> 
> 时间：2012-10-05T23:57:28.570
> 
> 标签：excel, ms-access, vba, record

我正在 Access 2010 中创建一个表单，它将为特定文件夹中的每个 Excel 文件创建一条记录，并使用来自各个单元格的信息填充字段。该宏使用 Excel 工作簿的所有文件名（各种字母数字序列）填充一个数组，然后遍历这些文件并为每个 Excel 工作表创建一个新记录。

```
Private Sub PopulateArray_Click()
    Dim strListOfFiles() As String
    Dim intCount As Integer
    intCount = 0

    Dim sFile As String
    sFile = Dir$("P:\Share\Manufacturing\Propeller\Finalized" & "\*.*", vbDirectory Or vbHidden Or vbSystem Or vbReadOnly Or vbArchive)
    Do Until sFile = vbNullString
        If sFile <> "." Then ' relative path meaning this directory
            If sFile <> ".." Then ' relative path meaning parent directory
                ReDim Preserve strListOfFiles(0 To (intCount + 1)) As String
                strListOfFiles(intCount) = sFile
                intCount = intCount + 1
            End If
        End If
        sFile = Dir$()
    Loop

    Dim MyDB As DAO.Database
    Dim MyRS As DAO.Recordset
    Set MyDB = CurrentDb()
    Set MyRS = MyDB.OpenRecordset("Record", dbOpenDynaset)

    For Index = 0 To UBound(strListOfFiles)
        MyRS.AddNew
        MyRS![SerialNumber] = "'P:\Share\Manufacturing\Propeller\Finalized\[" & strListOfFiles(Index) & "]Order Input'!B15"
        MyRS.Update
    Next
End Sub 
```

我已经完成了大部分工作，但最后一步让我卡住了。问题出现在 For 循环中的“MyRS![SerialNumber]”位上。目前它所做的只是打印单元格的（正确）文件路径，而不是单元格本身的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:06:43.107

当然可以，因为您还没有打开工作簿。您需要包含对 MS Excel 对象库的引用（在我的计算机上使用 MSO 2007 的最新版本是 11.0）。

然后您可以使用`Excel`“命名空间”来访问 Excel 对象，如下所示：

```
Dim xlApp as Excel.Application
Dim xlWb as Excel.Workbook
Dim cell as Excel.Range

With xlApp
    .Visible = true
    Set xlWb = .Workbooks.Open(...)
End With

// And so on... 
```

编辑：要包含引用，您需要键入 Alt+F11 进入 VBA 编辑器，然后`Tools`进入`References`并检查该 Excel 对象库。

# c# - 在同一事件处理程序中检测 CTRL + 单击 DataGridView 单元格

> ID：12755491
> 
> 赞同：6
> 
> 时间：2012-10-05T23:58:13.250
> 
> 标签：c#, .net, winforms, events

所以很容易检查一个单元格是否被点击过：

```
 DataGridView.CellClicked += cellClickedHandler; 
```

并且很容易检查是否按下了一个键：

```
 DataGridView.KeyDown += keyPressedHandler; 
```

我想知道如何将这两个功能合二为一？我想在用户控件单击单元格时执行特定操作，据我所知，这些事件的操作处理程序是两个独特的独立函数，传递给 cellClickedHandler 的参数不允许我获取状态键盘和任何可能与鼠标点击一起触发的按键。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T00:24:04.600

```
 private void cellClicked(object sender, DataGridViewCellMouseEventArgs e)
    {
        if(e.Button == MouseButtons.Right) // right click
        {
            if (Control.ModifierKeys == Keys.Control)
               System.Diagnostics.Debug.Print("CTRL + Right click!");
            else
               System.Diagnostics.Debug.Print("Right click!");
        }
        if (e.Button == MouseButtons.Left) // left click
        {
            if (Control.ModifierKeys == Keys.Control)
                System.Diagnostics.Debug.Print("CTRL + Left click!");
            else
                System.Diagnostics.Debug.Print("Left click!");
        }
    } 
```

# java - 将文件保存到外部存储时出现 NullPointerException（在一部手机上，但不在另一部手机上）

> ID：12755492
> 
> 赞同：0
> 
> 时间：2012-10-05T23:58:57.267
> 
> 标签：java, android, nullpointerexception, android-sdcard

尝试将文件保存到存储中，在三星 Galaxy S3 上运行良好，但在 HTC One S 上崩溃。我有一种感觉，也许 HTC One S 没有在设备上指定外部存储。那么问题来了，我该如何规避呢？

以下是使其在 One S 上崩溃的三个功能：

```
public void takePicture(View view){
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    fileUri = getMediaFileUri(MEDIA_TYPE_IMAGE, "SL_IMG_");
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

    startActivityForResult(intent, IMAGE_REQUEST_CODE);
}

private Uri getMediaFileUri(int type, String lift){
    return Uri.fromFile(getMediaFile(type, lift));
}

private File getMediaFile(int type, String lift){
    File dir;
    if (type == MEDIA_TYPE_IMAGE) {
        dir = new     File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "StrongLifts"); //set destination folder
    } else {
        dir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES), "StrongLifts/" + lift); //set destination folder
    }
    if (!dir.exists()){ // if dir does not exist
        if (!dir.mkdirs()) {    // create dir
            // something went horribly wrong
            return null;
        }
    } 
```

和 logcat 消息：

```
nullPointerException: file
at android.net.Uri.fromFile(Uri.java:441)
at no.whg.getfit.LogWorkout.getMediaFileUri(LogWorkout.java:202)
at no.whg.getfit.LogWorkout.takePicture... etc 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:56:53.500

现在觉得好傻。我发现问题出在哪里，当手机通过 USB 插入时，它会将 sdcard 安装在手机上，所以手机会自动崩溃。但是当我把它拔掉时一切正常，很抱歉给您带来不便，但希望其他人将来也会遇到同样的问题:)

# xml - 使用 Xpath 过滤

> ID：12755493
> 
> 赞同：1
> 
> 时间：2012-10-05T23:59:25.217
> 
> 标签：xml, xpath

目前我有这个 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<productFeed>
        <product id="233004">
        <name><![CDATA[Van Bommel P2577]]></name>
        <description><![CDATA[Leren casual herensneaker met nopjes op de hiel van Van Bommel. Kleur: cognac.]]></description>
        <price><![CDATA[199.95]]></price>        <productURL>http://vanarendonk.cleafs.com/go?k=4upHUYcQalVXox0zikwnMgTagF73SwA5&amp;c=1190&amp;redirect=http%3A%2F%2Fwww%2Evanarendonk%2Enl%2Fheren%2FVan%2DBommel%2FP2577%2D%2FCognac%2F120%2E13%2E6</productURL>
        <imageURL><![CDATA[http://www.vanarendonk.nl/update/images/120.13.6/.tmp/tmb.MTIwLjEzLjZfMDEuanBn800733.jpg]]></imageURL>
        <additional>
            <category><![CDATA[schoen]]></category>
            <sub_category><![CDATA[heren]]></sub_category>
            <gender><![CDATA[heren]]></gender>
            <type><![CDATA[Sneakers]]></type>            <model><![CDATA[16102/02 751]]></model>            <brand><![CDATA[Van Bommel]]></brand>            <color><![CDATA[Cognac]]></color>            <topmaterial><![CDATA[Glad leer]]></topmaterial>            <insole><![CDATA[rubber]]></insole>                                    <size><![CDATA[41;42;42,5;43,5;44;45;46;47]]></size>            <size_UK><![CDATA[7,5;8;8,5;9,5;10;10,5;11;12]]></size_UK>            <image_1><![CDATA[http://www.vanarendonk.nl/update/images/120.13.6/.tmp/tmb.MTIwLjEzLjZfMDEuanBn480440.jpg]]></image_1>
<image_2><![CDATA[http://www.vanarendonk.nl/update/images/120.13.6/.tmp/tmb.MTIwLjEzLjZfMDIuanBn480440.jpg]]></image_2>
<image_3><![CDATA[http://www.vanarendonk.nl/update/images/120.13.6/.tmp/tmb.MTIwLjEzLjZfMDMuanBn480440.jpg]]></image_3>
<image_4><![CDATA[http://www.vanarendonk.nl/update/images/120.13.6/.tmp/tmb.MTIwLjEzLjZfMDQuanBn480440.jpg]]></image_4>
<image_5><![CDATA[http://www.vanarendonk.nl/update/images/120.13.6/.tmp/tmb.MTIwLjEzLjZfMDUuanBn480440.jpg]]></image_5>
<image_6><![CDATA[http://www.vanarendonk.nl/update/images/120.13.6/.tmp/tmb.MTIwLjEzLjZfMDYuanBn480440.jpg]]></image_6>
<image_7><![CDATA[http://www.vanarendonk.nl/update/images/120.13.6/.tmp/tmb.MTIwLjEzLjZfMDcuanBn480440.jpg]]></image_7>
<image_8><![CDATA[http://www.vanarendonk.nl/update/images/120.13.6/.tmp/tmb.MTIwLjEzLjZfMDguanBn480440.jpg]]></image_8>
            <delivery_costs><![CDATA[geen verzendkosten vanaf 75,00]]></delivery_costs>
            <delivery_time><![CDATA[3 days]]></delivery_time>
        </additional>
    </product>
        ... 
<productFeed> 
```

我想过滤这个品牌的提要。我试过了：

```
/productFeed/product[1]/additional[1][contains(brand,'BRANDNAME')] 
```

但这并没有给我任何结果。

谁知道如何仅根据品牌名称过滤此提要？有没有简单的在线工具可以做到这一点？自己搜索过但找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:00:41.257

试试这个（它使用品牌中的子字符串 Pant 获取节点）：

```
/productFeed/product/additional/brand[contains(.,'Pant')] 
```

# java - 如何在 Jetty 上的 Spring 应用程序中将 jsessionid cookie 路径更改为服务器根目录？

> ID：12755499
> 
> 赞同：18
> 
> 时间：2012-10-06T00:00:58.340
> 
> 标签：java, spring, jetty, session-cookies, maven-jetty-plugin

我有一个在`/app`上下文中运行 Spring 应用程序的 Jetty 服务器。该应用程序使用会话，因此它设置了一个会话 cookie，其响应如下：

```
set-cookie:JSESSIONID=679b6291-d1cc-47be-bbf6-7ec75214f4e5; Path=/app; HttpOnly 
```

我需要那个 cookie 有一个路径`/`而不是 webapp 的上下文。另外，我想使用安全 cookie。我想要这个回应：

```
set-cookie:JSESSIONID=679b6291-d1cc-47be-bbf6-7ec75214f4e5; Path=/; HttpOnly; Secure 
```

配置会话 cookie 的合适位置在哪里？春天有帮助吗？应该在`web.xml`吗？或者我是否需要以容器特定的方式对其进行配置，例如`jetty-web.xml`？

我已经尝试了很多东西，但到目前为止没有任何效果。以下是我尝试过的一些事情。

* * *

## 尝试#1

`WEB-INF/jetty-web.xml`使用以下内容创建：

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
    <Get name="sessionHandler">
      <Get name="sessionManager">
        <Set name="sessionCookie">MYJETTYSESSION</Set>
        <Set name="sessionPath">/</Set>
        <Set name="secureCookies" type="boolean">true</Set>
        <Set name="httpOnly" type="boolean">true</Set>
      </Get>
    </Get>
</Configure> 
```

这会导致抛出异常：

```
2012-10-05 02:41:41.180:WARN:oejx.XmlConfiguration:Config error at <Set name="sessionPath">/</Set> java.lang.NoSuchMethodException: class org.eclipse.jetty.server.session.HashSessionManager.setSessionPath(class java.lang.String)
2012-10-05 02:41:41.180:WARN:oejx.XmlConfiguration:Config error at <Get name="sessionManager"><Set name="sessionCookie">MYJETTYSESSION</Set><Set name="sessionPath">/</Set><Set name="secureCookies">true</Set><Set name="httpOnly">true</Set></Get> java.lang.NoSuchMethodException: class org.eclipse.jetty.server.session.HashSessionManager.setSessionPath(class java.lang.String)
2012-10-05 02:41:41.180:WARN:oejx.XmlConfiguration:Config error at <Get name="sessionHandler"><Get name="sessionManager"><Set name="sessionCookie">MYJETTYSESSION</Set><Set name="sessionPath">/</Set><Set name="secureCookies">true</Set><Set name="httpOnly">true</Set></Get></Get> java.lang.NoSuchMethodException: class 
```

完整的堆栈跟踪在[这个 gist](https://gist.github.com/3843133)中。

## 尝试#2

`WEB-INF/jetty-web.xml`使用以下内容创建：

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
    <Call name="setInitParameter">
        <Arg>org.eclipse.jetty.servlet.SessionCookie</Arg>
        <Arg>MYSESSIONID</Arg>
    </Call>
    <Call name="setInitParameter">
        <Arg>org.eclipse.jetty.servlet.SessionIdPathParameterName</Arg>
        <Arg>mysessionid</Arg>
    </Call>
    <Call name="setInitParameter">
        <Arg>org.eclipse.jetty.servlet.SessionPath</Arg>
        <Arg>/</Arg>
    </Call>
</Configure> 
```

这不会导致任何异常，但 cookie 仍然存在`JSESSIONID`并且包含 webapp 上下文路径`/app`。

## 尝试#3

更新`WEB-INF/web.xml`如下：

```
<context-param>
    <param-name>org.eclipse.jetty.servlet.SessionPath</param-name>
    <param-value>/</param-value>
</context-param>
<context-param>
    <param-name>org.eclipse.jetty.servlet.SessionCookie</param-name>
    <param-value>MYSESS</param-value>
</context-param> 
```

这不会导致任何异常，但 cookie 仍然存在`JSESSIONID`并且包含 webapp 上下文路径`/app`。

## 尝试#4

更新`WEB-INF/web.xml`如下：

```
<session-config>
    <session-timeout>720</session-timeout>
    <cookie-config>
        <name>SZSESSION</name>
        <path>/</path>
        <http-only>true</http-only>
        <secure>true</secure>
    </cookie-config>
</session-config> 
```

这不会导致任何异常，但 cookie 仍然存在`JSESSIONID`并且包含 webapp 上下文路径`/app`。

## Maven配置

请注意，我正在使用 Jetty Maven 插件版本 8.1.5.v20120716 并执行以下操作`mvn jetty:run`：

```
<jetty.maven.plugin.version>8.1.5.v20120716</jetty.maven.plugin.version>
<spring.version>3.0.0.RELEASE</spring.version>
  ...
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>${jetty.maven.plugin.version}</version>
    <configuration>
        <scanIntervalSeconds>10</scanIntervalSeconds>
        <reload>manual</reload>
        <stopPort>${jetty.stop.port}</stopPort>
        <stopKey>foo</stopKey>
        <webAppConfig>
              <contextPath>/app</contextPath>
        </webAppConfig>
    </configuration>
       ...
</plugin> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T12:48:40.603

尝试#4 是在正确的轨道上。

如果我没看错，您在上下文 /app 上使用 maven 配置，这意味着在您的 web.xml 中 / 您的设置*是*/app，因为这是您正在配置的上下文的根。

换句话说，如果您只部署到 www.foo.com/app 上下文中，则无法为 www.foo.com/ 配置会话，想象一下如果其他人正在将应用程序部署到该 url，您不能只是决定使您的会话 cookie 适用于在该 url 下操作的每个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-13T19:27:33.760

为了我的理智，我只以编程方式配置 Jetty。如果您要更改 Jetty 11 中的 cookie 路径：

```
sessionHandler.getSessionCookieConfig().setPath("/"); 
```

如果您没有显式创建 SessionHandler，则可以在创建诸如 servlet 上下文之类的内容后获取对它的引用...。

```
ServletContextHandler sch = new ServletContextHandler(..., "/api", true, false);
sch.getSessionHandler().getSessionCookieConfig().setPath("/"); 
```

这样，即使上下文位于`/api`会话 cookie 下，也可以在其他上下文中访问。

# vb.net - 在 VB.net 中获取下周的日期

> ID：12755503
> 
> 赞同：1
> 
> 时间：2012-10-06T00:01:22.817
> 
> 标签：vb.net, date

今天你会如何在 VB.net 中约会。然后找到下一周的星期一或星期五的日期。如果今天是星期四并且我正在寻找下一个星期五，那么我想要明天的日期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:05:26.773

您可以使用[DayOfWeek](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)枚举来查找：

```
Private Function GetNextDate(day As DayOfWeek) As DateTime
    Dim now As DateTime = DateTime.Today
    Dim today As Integer = CInt(now.DayOfWeek)
    Dim find As Integer = CInt(day)

    Dim delta As Integer = find - today
    If delta > 0 Then
        Return now.AddDays(delta)
    Else
        Return now.AddDays(7 - delta)
    End If
End Function 
```

使用您的示例，如果您致电：

```
Dim date = GetNextDate(DayOfWeek.Friday) 
```

你会得到明天的约会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-08T15:46:31.677

```
 Private Function NextMonday() As String
        Dim Tdate = DateTime.Now.AddDays(1)
        Do While Tdate.DayOfWeek <> DayOfWeek.Monday
            Tdate = Tdate.AddDays(1)
        Loop
        Return Tdate.ToShortDateString()
    End Function 
```

# android - 为 TextView 实现 onTouchListener

> ID：12755504
> 
> 赞同：4
> 
> 时间：2012-10-06T00:01:23.560
> 
> 标签：android, textview, ontouchlistener

我正在实现并将 an 归因`onTouchListener`于Textview ，但是当按下屏幕时运行时没有弹出消息。`MainActivity``OnTouchListener``tv`

主要活动

```
public class MainActivity extends Activity implements View.OnTouchListener
{
    TextView tv;    
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv=(TextView)findViewById(R.id.tv);
        tv.setOnTouchListener(this);
        tv.setText(R.string.hello);
    }

    public boolean onTouch(View v,MotionEvent event)
    {
        Toast.makeText(this,"onTouch",Toast.LENGTH_LONG).show();
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-06T09:47:36.190

```
TextView lastTV= (TextView) findViewById(R.id.lastTvValue);

lastTV.setOnTouchListener(new View.OnTouchListener() {

            @SuppressLint("ClickableViewAccessibility")
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    //do stuff here
                    }

                Log.i("click text", "kakak");
                return false;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:19:45.253

试试这个，如果同意就接受

```
 tv.setOnTouchListener(new CustomTouchListener());

public class CustomTouchListener implements View.OnTouchListener {     
    public boolean onTouch(View view, MotionEvent motionEvent) {
    switch(motionEvent.getAction()){            
            case MotionEvent.ACTION_DOWN:
                // Action you you want on finger down.
  Toast.makeText(this,"onTouch",Toast.LENGTH_LONG).show();
                break;          
            case MotionEvent.ACTION_CANCEL:             
            case MotionEvent.ACTION_UP:
                // Action you you want on finger up
                break;
    } 
        return false;   
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:24:03.533

您必须 @override onTouch 方法，尝试删除实现 onTouchListener 并再次将其写入导入正确的方法，直到您编写它才会起作用

```
@Override
public boolean onTouch(View v,MotionEvent event)
{
    Toast.makeText(this,"onTouch",Toast.LENGTH_LONG).show();
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T00:23:08.563

嗯，onTouchListener() 有时只接收一些用户触摸输入。您能否将其设为 onClickListener() 并查看行为是否解决？

顺便说一句，我编译并运行了你的代码，它工作正常。你可以让 onTouch() 打印一条 Log.v() 消息并确保你的 onTouch() 被调用吗？

# python - 当我知道我模拟出来的函数被调用时，为什么我会从 mox 得到 ValueError("必须至少有一种预期的方法")？

> ID：12755510
> 
> 赞同：0
> 
> 时间：2012-10-06T00:02:00.443
> 
> 标签：python, unit-testing, testing, mocking, mox

我正在使用 mox 在我的代码中删除电子邮件发送功能。我想验证该函数是否被调用 N 次，每次都使用一组参数。

Mox 正在引发 ValueError("必须至少有一个预期的方法") ，就好像我已经存根的函数调用没有发生，但它们实际上似乎正在发生。

观察我的日志，我可以看到正在调用的函数，并看到我的数据库中的所有日志消息/更新，这些消息告诉我正在测试的代码实际上正在运行。我还有 14 个其他单元测试来验证这一点，所以我相信这是测试而不是底层代码的问题。

这是我的测试：

```
class MyTestSuite(mox.MoxTestBase):
    def test_my_send_function(self):
        self.mox.StubOutWithMock(module_path, "my_send_function")
        for state in SEQUENCE: # defined elsewhere, assume 5 states in sequence
            module_path.my_send_function(to_email_address, subject, IgnoreArg())
    self.mox.ReplayAll()

    module_path.my_send_function_parent() # loops over the 5 states in SEQUENCE and calls my_send_function()

    # Verify() and UnsetStubs() are done automatically because I subclasses MoxTestBase 
```

为什么mox说电话从来没有发生过？我在 mox 文档或 SO 上的其他地方找不到任何关于此的信息。

# python - 在 Python 中睡觉时保持活跃

> ID：12755515
> 
> 赞同：2
> 
> 时间：2012-10-06T00:03:43.903
> 
> 标签：python, sleep

```
if ":!giveaway" in prevdata and senderusr in securelist and agive == 0:
    agive = agive+1
    message("Giveaway started by: " + senderusr)
    time.sleep(3)
    agive = 0
    enteredgiveaway = enteredgiveaway.rstrip()
    enteredgiveaway = enteredgiveaway.split(" ")
    gg = random.choice(enteredgiveaway)
    message("The winner of the giveaway is: " + gg)
    gg = ""
    enteredgiveaway = ""

if "PRIVMSG" in prevdata and agive == 1:
    enteredgiveaway += senderusr + " " 
```

第一个`if`开始赠品，然后在 3 秒后随机选择一个输入 IRC 的用户并向 IRC 发送消息说谁赢了。

但是，我的问题是第二个`if`无法收集用户，因为第一个命令使程序休眠而另一个`if`无法工作。

**我怎么睡觉，但程序可以对其他东西做些什么？**

（IRC 机器人）

完整代码： http: [//pastebin.com/Qr8hAH14](http://pastebin.com/Qr8hAH14)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:17:16.517

让第一个 if 子句设置 a [`Timer`](http://docs.python.org/library/threading.html#timer-objects)，调用一个方法，该方法执行您现在在睡眠后执行的操作。

```
from threading import Timer

def giveaway():
    agive = 0
    enteredgiveaway = enteredgiveaway.rstrip()
    enteredgiveaway = enteredgiveaway.split(" ")
    gg = random.choice(enteredgiveaway)
    message("The winner of the giveaway is: " + gg)
    gg = ""
    enteredgiveaway = "" 
```

并在您引用的代码段中：

```
if ":!giveaway" in prevdata and senderusr in securelist and agive == 0:
    agive = agive+1
    message("Giveaway started by: " + senderusr)
    t = Timer(3, giveaway)
    t.start()

... 
```

这有点粗略，因为我不知道例如`enteredgiveaway`您的代码示例来自哪里。因此，根据您的代码的其余部分，您可能需要重新组织/重组以使其工作。如果您还没有这样做，那么将所有内容都放在一个类中并使用实例变量可能会更好。

# android - 我可以使用 SimpleCursorTreeAdapter 在 ExpandableListView 中为子项使用不同的视图吗？

> ID：12755516
> 
> 赞同：2
> 
> 时间：2012-10-06T00:04:07.450
> 
> 标签：android, expandablelistview

我想使用数据库支持的 ExpandableListView ，其中子项应显示在两个不同视图之一中，具体取决于数据库字段。

（如果一个项目在数据库中设置了“完成”标志，它应该显示为灰色，否则它应该显示为白色。）

这就是我将 ExpandableListView 绑定到数据库的方式：

```
dbAdapter = new TasksDbAdapter(this);
dbAdapter.open();
c = dbAdapter.getTaskGroupsInList(listId);
startManagingCursor(c);
    dbTreeAdapter = new TaskListTreeAdapter(
            getApplicationContext(), 
            c, 
            listId, 
            R.layout.listgroupitem, 
            R.layout.listitem, 
            new String[] { 
                TaskDbAdapter.KEY_TASKTYPE_NAME }, 
            new int[] { 
                R.id.groupName }, 
            new String[] { 
                TaskDbAdapter.KEY_LISTITEMS_AMOUNT, 
                TaskDbAdapter.KEY_UNITS_NAME, 
                TaskDbAdapter.KEY_TASK_NAME }, 
            new int[] { 
                R.id.tvItemAmount, 
                R.id.tvItemUnit, 
                R.id.tvItemName }); 
```

这是 Adapter 的 getChildView 方法：

```
 public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        View vReturnView = null;
        Cursor cGroupsTemp = dbAdapter.getGroups(listId);
        if (cGroupsTemp.moveToPosition(groupPosition))
        {
            long groupId = cGroupsTemp.getLong(cGroupsTemp.getColumnIndex(KEY_PRODTYPE_ID));
            Cursor cChildsTemp = dbAdapter.getChildren(listId, groupId);
            if (cChildsTemp.moveToPosition(childPosition))
            {
                long childId = cChildsTemp.getLong(cChildsTemp.getColumnIndex(KEY_LISTITEMS_ID));
                boolean bought = cChildsTemp.getInt(cChildsTemp.getColumnIndex(KEY_DONE)) > 0;
                LayoutInflater inflater = getLayoutInflater();
                if (bought)
                {
                    vReturnView = inflater.inflate(R.layout.listenlistitemdone, null);
                } else {
                    vReturnView = inflater.inflate(R.layout.listenlistitem, null);
                }
            }
        }
        return vReturnView;
    } 
```

不幸的是，这两个不同的视图没有正确显示。有谁知道为什么？这两个视图是否必须属于一个共同的 ViewGroup？我在适配器中没有找到任何方法，如 getViewTypeCount() 或 getItemViewType()。此适配器不需要它们吗？两个视图中的元素是否必须具有相同的 ID（因为适配器仅将一个 ID 绑定到数据库列）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:32:58.163

我不相信你可以这样做，因为（正如你猜想的那样）布局必须有重复的 id，我认为这是不允许的。

与其尝试使用两种不同的布局，不如使用一个，然后覆盖`bindChildView`from the`ExpandableListAdapter`并更改其中的颜色？

我的一个项目中的一个小样本（经过编辑以将其压缩为可管理的块）：

```
 protected void bindChildView(View view, Context context, Cursor cursor,
            boolean isLastChild) {

        TextView name = (TextView) view.findViewById(R.id.ListItem1);
        TextView qty = (TextView) view.findViewById(R.id.ListItem3);

        name.setTextColor(GroceryApplication.shoplistitem_name);
        qty.setTextColor(GroceryApplication.shoplistitem_qty);

        name.setText(cursor.getString(2));
        qty.setText(cursor.getString(1));

        if (cursor.getInt(5) == 1) {
            name.setPaintFlags(name.getPaintFlags()
                    | Paint.STRIKE_THRU_TEXT_FLAG);
            qty.setPaintFlags(qty.getPaintFlags()
                    | Paint.STRIKE_THRU_TEXT_FLAG);
            view.setBackgroundResource(R.color.purchased);
        } else {
            name.setPaintFlags(name.getPaintFlags()
                    & ~Paint.STRIKE_THRU_TEXT_FLAG);
            qty.setPaintFlags(qty.getPaintFlags()
                    & ~Paint.STRIKE_THRU_TEXT_FLAG);
            view.setBackgroundResource(R.color.black);
        }
    }
} 
```

上面的代码在 db 中使用了一个标志，这将导致应用程序将背景更改为灰色并将文本更改为删除线样式，或者将背景颜色设置为我的默认颜色并取消删除线文本。

# wordpress - 自定义根框架

> ID：12755519
> 
> 赞同：0
> 
> 时间：2012-09-20T02:52:26.223
> 
> 标签：wordpress, twitter-bootstrap, less

我的问题与[Twitter Bootstrap 自定义最佳实践有关](https://stackoverflow.com/questions/10451317/twitter-bootstrap-customization-best-practices)

我正在为 wordpress 网站使用 root 框架。修改 root/twitter 引导程序的最佳实践是什么。例如，我想更改文本颜色，如锚点、h1、h2 等，

我是否需要编辑`variables.less`和重新编译所有内容。

或者

添加另一个`custom.less`带有变量的文件并导入`bootstrap.less`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:46:43.767

最好在[LESS Github 页面](https://github.com/cloudhead/less)上询问，但为了更好的向前兼容性，我建议创建一个新`.less`文件并将该路径添加到`bootstrap.less`. 然后，使用[Codekit 之](http://incident57.com/codekit/)类的工具进行编译。

# c - 为什么 C 不使用变量编译日志，而是使用幻数编译？

> ID：12755521
> 
> 赞同：0
> 
> 时间：2012-10-06T00:04:40.580
> 
> 标签：c

我们发现 C 语言在与幻数一起使用时会编译 log 函数，但不会与变量一起使用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T00:05:51.253

因为您没有将程序链接到数学库，并且使用文字，您的编译器可能正在使用内置函数。

使用文字，`gcc`您将得到相同的错误。`-fno-builtin`

以这种方式与 lib math 链接：`gcc bla.c -o bla -lm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T00:08:50.890

我们发现是因为C编译器的版本。较新的版本似乎更好地支持日志。

# box-api - 如何通过搜索 API 获取文档的私有 URL？

> ID：12755525
> 
> 赞同：1
> 
> 时间：2012-10-06T00:05:03.963
> 
> 标签：box-api

从 Search API 接收搜索结果时，我得到一堆文件 ID。我想将这些结果作为指向原始文档的链接显示给用户。有没有办法将这些 ID 转换为规范的*私有*URL？v1 或 v2 API 都可以用于此目的。

谢谢。

编辑：私有 URL 是指文档所有者可以访问的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:51:17.653

您可以使用 V2 [http://developers.box.com/docs/#files-create-a-shared-link-for-a-file](http://developers.box.com/docs/#files-create-a-shared-link-for-a-file)并使用“access”：“Collaborators”。如果它是一个私人文件夹，没有合作者，并且您没有将其他任何人添加到合作者列表中，那么所有者将是唯一可以使用该“共享链接”的人。添加引号是因为分享这个词变得相当具有讽刺意味，因为你并没有真正与任何人分享。

您可以将其他人添加到协作中，从而通过执行如下 curl 调用将其他人添加到允许使用该共享链接的人员俱乐部中：

```
curl https://api.box.com/2.0/collaborations \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \
-d '{"item": { "id": "FOLDER_ID", "type": "folder"}, {"accessible_by": { "id": "USER_ID"}, "role": "editor"}' \
-X POST 
```

这也记录在位于[http://developers.box.com/docs/#collaborations-add-a-collaboration的 V2 API 中](http://developers.box.com/docs/#collaborations-add-a-collaboration)

微妙之处在于协作者是在文件夹级别添加的，但共享链接是在文件级别创建的。我想您可能会要求我们提供一个新的共享链接级别“所有者”，它只允许所有者访问文件的共享链接。目前不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:35:12.200

这里的另一种方法是设置您的应用程序以代理下载。在您的应用程序中创建一个调用，该调用使用[Box“下载文件”API 调用](http://developers.box.com/docs/#files-download-a-file)，然后通过您的 Web 服务器将该调用的响应流式传输回用户。这通常不是简单的设置，并且涉及到各种问题（例如，如果下载调用失败会发生什么）。

根据您使用的语言、框架和 Web 服务器，这可能更难或更容易实现。在某些情况下，它可能相当简单。

# arraylist - 为什么我的 ArrayList 在程序中到处都返回大小 0？

> ID：12755527
> 
> 赞同：-1
> 
> 时间：2012-10-06T00:05:11.487
> 
> 标签：arraylist

出于某种原因，在这个程序中的任何地方，我的 ArrayList 返回的大小为 0，这真的让我在完成程序时搞砸了。在我解决这个问题之前，我无法完成程序。

这是程序：

```
import java.util.*;
import java.io.*;
import java.io.File;
import java.io.FileReader;

public class Book
{
//Instance Variables
private String author;
private static String title;

/*ArrayList<Books> books = new ArrayList<Books>();*/

public static void main(String[] args) throws Exception
{       

ArrayList<String> books = new ArrayList<String>();

fillArray(books);
getBook(books);
/*  getTitle(books);

clearScreen();
getFile(books);
printMenu();
chooseOption(books);
display(books);
/*  exit();*/
}

private static void printArrayList(ArrayList<String> books)
{
for (int i = 0; i < books.size(); i++){
            System.out.println(books.get(i));
}
}

private static void fillArray (ArrayList<String> books) throws Exception
{
File file = new File("library.dat");
    BufferedReader br = new BufferedReader(new FileReader(file));
    List<String> lines = new ArrayList<String>();
    String line = br.readLine();
    while(line != null) {
        lines.add(line.replace(">", ""));
        line = br.readLine();
    }
    for(String l : lines) {
        System.out.println(l);
    }
}

public static void clearScreen()
{
    System.out.println("\u001b[H\u001b[2J");
}

private static void exit()
{
System.exit(0);
}

private static void printMenu()
{
System.out.println("\t^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");
System.out.println("\t\tTHE GREAT BOOKS SEARCH PROGRAM");
System.out.println("\t^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");
System.out.println("\t1) Display all book records");
System.out.println("\t2) Search for a book by Title");
System.out.println("\t3) Exit Search Program");
System.out.println("\t^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");
 }

private static void chooseOption(ArrayList<String> books)
{
System.out.print("\tPlease Enter Your Choice > ");
Scanner stdin = new Scanner(System.in);
String option = stdin.nextLine();

if (option.compareTo("1") == 0){
    printRecord(books);
    display(books);}
else if (option.compareTo("2") == 0){
    showSearch(books, "Moby Dick");}
else if (option.compareTo("3") == 0){
    System.out.println("\n\tGoodbye. Have a nice day. :-)");
    System.exit(0);}
}

public static void printRecord(ArrayList<String> books)
{
clearScreen();
for (int i = 0; i < books.size(); i++){
System.out.println("\tRecord #" + books.get(i));}

System.out.println("\t^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");

System.out.println("\tTitle : ");

System.out.println("\tAuthor's Name : ");

System.out.println("\tCopyright : ");

System.out.println("\tPrice : ");

System.out.println("\tGenre : ");

System.out.println("\t^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");
System.out.println();
}

private static void display(ArrayList<String> books)
{

    Scanner in = new Scanner(System.in);

    for(int i = 0; i< books.size();i ++)
    {
        printRecord(books);
        System.out.println("");
        System.out.print("\tPress enter to continue, or type M to go back to the menu >   ");

if(in.nextLine().equals("M"))
          break;
          clearScreen();
    }
}

public static void showSearch(ArrayList<String> books, String key)
{
System.out.print("\n\tSearch Title > ");

Scanner stdin = new Scanner(System.in);
String Stitle = stdin.nextLine();

System.out.println(binarySearch(books, Stitle));
}

public static void getFile(ArrayList<String> books)
{
System.out.println("\t\tTHE BOOK SEARCH PROGRAM");
System.out.println("__________________________________________________________________        _____________");
System.out.println();
System.out.println("\tWhat file is your book data stored in?");
System.out.println();
System.out.println("\tHere are the files in the current directory : \n");

//Get all files from directory
File curDir = new File(".");
String[] fileNames = curDir.list();
ArrayList<String> data = new ArrayList<String>();

//Find files which may have data.
for(String s:fileNames)
    if(s.endsWith(".dat"))
        data.add(s);

for (int i = 0; i < data.size(); i++){
            System.out.println(data.get(i));
}

System.out.print("\n\tFilename: ");

Scanner stdin = new Scanner(System.in);
String dataName = stdin.nextLine();

int arraysize = books.size();
if (dataName.equals("library.dat")){
    Collections.sort(books);
    System.out.println("\n\tA total of " + arraysize + " have been input & sorted by title.");}
else {
    System.out.println("Error");}

System.out.print("\n\tPlease Hit Return to Continue...");
Scanner stdin2 = new Scanner(System.in);
String st = stdin2.nextLine();
clearScreen();
}

public static void getBook(ArrayList<String> books) throws Exception
{
int totalElements = books.size();

//  while (dataScanner.hasNext())
File datafile = new File("library.dat");
Scanner datascanner = new Scanner (datafile);
String data = datascanner.nextLine();
StringTokenizer dataParser = new StringTokenizer(data, ";");
title = dataParser.nextToken();
String author = dataParser.nextToken();  
    String   CopyR = dataParser.nextToken();
    String Price = dataParser.nextToken();
String Genre = dataParser.nextToken();

System.out.println(totalElements);
for (int i=0; i< books.size(); i++){
System.out.println(title);
System.out.println(author);
System.out.println(CopyR);
System.out.println(Price);
System.out.println(Genre);
}
}

public static String getTitle(ArrayList<String> books) throws Exception
{
String n = "n";
    for (String str : books)
{
  StringTokenizer st = new StringTokenizer(str, ";");
  String title = st.nextToken();
}
    return title;   
}

private static int binarySearch (ArrayList<String> books, String key)
{
Collections.sort(books);
int index = Collections.binarySearch(books, key);

return index;
}

/*
public Book (String title, String author, String CopyR, String Price)
{
this.title = title;
this.author = author;
this.CopyR = CopyR;
this.Price = Price;
}
*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:08:59.937

答案很明显：你从不调用`books.add()`or `books.addAll()`。不止一次。

我认为你的意思是实现这样的`fillArray`东西：

```
private static void fillArray (ArrayList<String> books) throws Exception
{
    File file = new File("library.dat");
    BufferedReader br = new BufferedReader(new FileReader(file));
    String line = br.readLine();
    while(line != null) {
        books.add(line.replace(">", ""));
        line = br.readLine();
    }
} 
```

# c - 是否有可能实现一个可以在 C 中打印任何类型的任何数组的函数？

> ID：12755529
> 
> 赞同：3
> 
> 时间：2012-10-06T00:05:12.597
> 
> 标签：c, function, generics

我是 C 的新手。我想知道如果我有三个这样的数组：

```
int a[] = {1, 2, 3}
char b[] = {'a', 'c', 'k'}
float c[] = {4.5, 5.8} 
```

是否可以编写一个多态函数来打印这些数组中的任何一个？

```
prarray(a); prarray(b); prarray(c); 
```

这种形式也是可以接受的：

```
prarray(a, int); prarray(b, char); prarray(c, float) 
```

是否可以解决该功能`void prarray(void *)`？有没有人有任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T00:26:09.477

最新的 C 标准是 C11 (C 2011)。

它提供了关键字**_Generic**（第 6.5.1.1 节通用选择，在第 6.5 节表达式下）来执行您要求的那种事情。

例如，

```
#define prarray(A, len) _Generic((A), \
    int: prarray_int, \
    char: prarray_char, \
    float: prarray_float, \
    )(A, len)

void prarray_int( int* a, ptrdiff_t len ) { ... }
void prarray_char( char* a, ptrdiff_t len ) { ... }
void prarray_float( float* a, ptrdiff_t len ) { ... } 
```

现在您需要做的就是获得一个 C11 编译器！:-)

或者更手动地执行 C11 宏的工作 - 实际上，将类型名称作为显式宏参数传递，然后使用`##`标记粘贴来生成函数名称。

免责声明：未经测试的代码（我没有 C11 编译器），而且，自 1990 年代后期以来我没有使用过 C。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T00:16:34.877

如果不对被调用函数提供大量帮助，您将无法做到这一点，以便它可以完成工作。查看标准 C 库中的两个“多态”函数，[`qsort()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/qsort.html)以及[`bsearch()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/bsearch.html).

```
void qsort(void *base, size_t nel, size_t width,
       int (*compar)(const void *, const void *));
void *bsearch(const void *key, const void *base, size_t nel,
       size_t width, int (*compar)(const void *, const void *)); 
```

`printf()`和`scanf()`系列是处理多种类型的其他函数。

您的打印数组函数可能需要：

```
typedef int (*DataPrinter)(void *ctxt, void *data);
extern int prarray(void *base, size_t nel, size_t width,
                   DataPrinter pr_func, void *ctxt) 
```

数据打印机函数指针将负责打印一个由`data`参数指定的值。该`ctxt`值是指向数据打印机功能所需的任何控制信息的指针（它可能像 a 一样简单`FILE *`，也可能更复杂）。数据打印机函数返回的值是写入的字符数；从返回的值`prarray()`是写入的字符总数。

当然，这只适用于一维数组。要打印 2D 或 3D 数组的子部分，您需要更复杂的代码。如果您需要担心换行等问题，那很可能是`ctxt`. 或者您为此功能设计更复杂的接口。请注意，为指定值分隔符提供的唯一机制是通过`ctxt`结构。这将起作用（或可以使其起作用），但它可能太笨拙了。

* * *

C2011 的解决方案`_Generic`很有趣，但需要 N 个函数用于 N 种类型，每个函数都处理打印一个数组。我无法完全摆脱：我的解决方案需要 N+1 个函数，但其​​中只有一个（1 个）处理数组；N 个函数分别处理打印给定类型的单个值，这比打印给定类型的整个数组更简单。当然，如前所述，它需要在每个相关平台上都有一个 C 2011 编译器。由于至少有一个“经常相关”的平台没有其供应商提供的 C 1999 编译器，因此您可能需要一段时间才能在该平台上使用 C 2011。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T00:29:34.937

我对同一问题的第二个回答。

您当然可以创建一个函数，如果您将类型信息传递给它，它将知道如何处理数据。因此，您可以使用以下调用约定：

```
prarray(a, len, 'i'); prarray(b, len, 'c'); prarray(c, len, 'f'); 
```

最好对“i”、“c”和“f”使用常量，但您会明白一般的想法。函数定义如下所示：

```
void parray(void *genericPtr, int len, char typeCode) {
    if (typeCode == 'i') {
        int *intArray = (int*) genericPtr;
        printIntArray(intArray, len);
    }
    if (typeCode == 'c') {
        char *charArray = (char*) genericPtr;
        printString(charArray, len);
    }
    if (typeCode == 'f') {
        float *floatArray = (float*) genericPtr;
        printFloatArray(floatArray, len);
    }
} 
```

注意邪恶的、不安全的类型转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T00:50:51.597

如果没有 C11 编译器，你可以得到的最接近的可能是宏

```
#define prarray(array, format, length) ({\
    size_t i;\
    size_t _length = length ;
    for (i = 0; i < _length; i++) \
        printf(format ",", (array)[i]);\
})\ 
```

invoke with format as your printf format string. e.g. `"%c"` for character, `"%d"` for `int` etc...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T00:12:24.720

在c中没有多态性。要做到这一点而没有不安全的做法，必须有三个不同的函数传递数组及其长度。IE; void print_ints(int *a,int size); 等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T00:19:40.603

简短的回答是否定的。

更长的答案是您可以创建一个可以包含不同类型值的新数据类型，然后编写一个知道如何将它们打印出来的函数。这会给你你想要的，但是定义你的值在语法上可能会很尴尬。

坦率地说，正是这种问题促使人们发明了动态语言、OOP 等。

我的C真的生锈了，但是...

```
struct varyThing {
    char typeCode; // indicates what type of data it is.
    union valueUnion {
        long longValue;
        float floatValue;
        char string[32];
    } value;
}; 
```

整个结构可能只占用 34 个字节，具体取决于类型大小和字节对齐以及其他编译器细节。

# apache - 用查询字符串重写 url

> ID：12755530
> 
> 赞同：0
> 
> 时间：2012-10-06T00:05:19.037
> 
> 标签：apache, .htaccess, url-rewriting, query-string, clean-urls

继续[我在这里问](https://stackoverflow.com/questions/12745174/get-params-with-clean-url-in-multi-hosting-environment)的内容，我想自动重写以下网址

```
http://testsite.com/siterootb/sample-page.php?bbi=value1&bbl=value2 
```

至

```
http://testsite.com/siterootb/sample-page/value1/value2 
```

我`htaccess`现在看起来像

```
RewriteEngine on

RewriteCond %{QUERY_STRING} !^$
RewriteRule ^(.*) http://localhost%{REQUEST_URI}%1? [R=301,L]

###########################################################################
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/siterootb/([^/]+)/([^/]+)/([^/]+)
RewriteCond %{DOCUMENT_ROOT}/siterootb/%1.php -f
RewriteRule ^/?([^/]+)/([^/]+)/([^/]+) $1.php?bbi=$2&bbl=$3 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L] 
```

我经历了[URL重写-查询字符串](https://stackoverflow.com/questions/11271352/url-rewriting-query-string)，[url重写查询字符串](https://stackoverflow.com/questions/8470670/url-rewriting-a-query-string)，[wordpress如何删除？从使用 htaccess 的 url](https://stackoverflow.com/questions/12721074/wordpress-how-to-remove-from-the-url-using-htaccess)和更多我得到的`[query-string] [.htaccess]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:38:19.193

添加这些规则：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /siterootb/([^.]+)\.php\?bbi=([^&\ ]+)&bbl=([^&\ ]+)
RewriteRule ^ /siterootb/%1/%2/%3? [L,R=301] 
```

您必须与`%{THE_REQUEST}`变量匹配的原因是您希望从字面上匹配所请求的内容，而不是 URI。URI 会随着规则的应用而更改，因此如果您匹配`%{REQUEST_URI}`变量，您将匹配另一个规则所做的更改。

# design-patterns - 为什么 Singleton 被认为是反模式？

> ID：12755539
> 
> 赞同：96
> 
> 时间：2012-10-06T00:07:17.520
> 
> 标签：design-patterns, anti-patterns

> **可能的重复：**
> [单身人士有什么不好的？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)
> 
> [单例设计模式：陷阱](https://stackoverflow.com/questions/1448393/singleton-design-pattern-pitfalls)
> 
> [单例反模式](https://stackoverflow.com/questions/12075993/singleton-anti-pattern)

我最近听说 Singleton 是一种反模式。我知道这与创建一个类单例就像使该唯一实例成为全局变量这一事实有关，但它的作用远不止于此（限制该对象的实例数量，管理实例化等）。

为什么 Singleton 被认为是反模式？还有哪些选择？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-10-06T00:22:43.870

为了帮助回答，这里有更多关于反模式评论的信息：

> 它被过度使用，在实际不需要类的唯一实例的情况下引入了不必要的限制，并将全局状态引入应用程序

来自：[http ://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

有关这方面的更多信息，您可以查看：[https ://www.michaelsafyan.com/tech/design/patterns/singleton](https://www.michaelsafyan.com/tech/design/patterns/singleton)

这是上面博客的一个很好的结局：

> 简而言之，单例模式使代码更复杂、更没用，并且重用或测试非常痛苦。消除单例可能很棘手，但这是一项值得的努力。

好的，所以，本段很好地描述了它是反模式的原因，并且正如作者所说，它将您的代码与单例紧密耦合。

如果您发现要使用单例，您可能需要考虑您的设计，但有时它很有用。

例如，曾经我必须编写一个最多可以有一个数据库连接的应用程序来处理数千个请求。因此，单例是有意义的，因为我的资源受限于只有一个实例。

但是，这通常用于简化代码，而不考虑将引入的困难。

例如，这也适用于静态类，如果您进行单元测试或具有并发性，那么一个请求的状态将改变状态，这可能会导致问题，因为调用实例的类可能会假设状态与它一样预期的。

我认为挑战使用的最好方法是考虑如果您的程序是多线程的，如何处理它，而一种简单的方法是对它进行单元测试，如果您同时运行多个测试。

如果你发现还需要它，那就用它，但要意识到后面会遇到的问题。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-06T00:14:59.133

我不会完全认为单例是一种反模式。

但是，单例基本上是一种使用全局变量的方法。全局变量很糟糕，因为系统中任何地方的任何代码都可以更改它们的值。因此，在调试时，找出导致单例当前状态的代码路径可能具有挑战性。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-06T00:24:19.213

单例通常执行不力。请参阅双重检查锁定。

Singleton 实例在哪个范围内必须是唯一的。像多线程环境，集群等。

单例可能很难测试。

分配给 Singleton 的内存无法释放。

随着单例的过度使用，您将从面向对象编程转向过程编程。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-06T00:38:21.797

我认为它被认为是一种反模式，因为 Singleton 类不能由其他对象以正常方式实例化（除非通过调用通常称为“getInstance”的方法）。因此，看起来该类被直接使用，而无需先实例化它来创建可用对象。

我同意你的观点，Singleton 可以作为一个全局唯一实例。我从一些人那里了解到，作为 Singleton 的替代方案，我们可以使用静态和/或最终变量，我们还可以使用枚举（这样我们就可以将多个变量分组到一个组名下，就像我们在使用普通类/对象）。

但是，这些替代方案只能与 Singleton 类在存储状态/值方面的能力相匹配。如果我们需要使用独特的函数，那些静态/最终变量和枚举将无济于事。在我看来，这就是我们需要使用单例类的情况（当我们需要一些独特的函数来处理静态/最终状态/值时）。

干杯... :))

# combobox - 三重组合框按钮 需要帮助

> ID：12755542
> 
> 赞同：0
> 
> 时间：2012-10-06T00:08:05.887
> 
> 标签：combobox

I have this triple combo script and when the third option is selected, it automatically redirects you. 我需要的是让它停止并通过一个按钮来执行。如果有人可以提供帮助，我将不胜感激。我试图修复它，但我是新手。不知道如何发布代码，所以如果有链接。谢谢

[http://www.codingforums.com/showthread.php?t=275240](http://www.codingforums.com/showthread.php?t=275240)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:21:02.187

查看提供的链接上的代码，第三个选项有一个“onchange”属性，它将调用“redirect2”函数。

尽管查看函数本身，但我不确定该函数是否能够进行重定向。但是，如果要禁用重定向，可以删除“onchange”属性。

如果您确实需要继续使用该功能（例如，用于更新任何状态/值），那么您需要在“onchange”属性的末尾添加 return false，例如：

```
onChange="redirect2(this.options.selectedIndex); return false;" 
```

干杯:))

> > > > > （上述解决方案无效） > 编辑为：

```
var nextPage = "";
function redirect2(z){
//parent.chartsloader.location=temp1[z].value
//parent.location=temp1[z].value
nextPage = temp1[z].value;
}

function goToNextPage()
{
    if(document.isc.example.options.selectedIndex > 0 && document.isc.stage2.selectedIndex > 0 && document.isc.stage3.selectedIndex > 0)
        window.location = nextPage;
} 
```

# c# - 在一种方法中应用样式的 Web.Ui.Controls 列表

> ID：12755543
> 
> 赞同：1
> 
> 时间：2012-10-06T00:08:28.423
> 
> 标签：c#, extension-methods, asp.net-4.0, web-deployment

我有一个帮助类，我用它来完成一些任务，其中之一是将样式应用于给定的控件

例如，其中一种方法是通过隐藏`Style.Add()`

所以对于我经常使用的每个元素说一个标签

```
Class Attrib
{
        public static void Atdd(Label LBLID, string prop, string value)
        {
            LBLID.Style.Add(prop, value);
        }
} 
```

然后使用上面的模板：

```
public Class Hide
{
        public static void LBL(Label LBLID)
        {
            Attrib.Atdd(LBLID, Props.propVisibility, Props.valHidden);
        }
} 
```

存储属性和值的所有常量的类

```
 public static class Props
    {
        public const string propVisibility = "visibility", valVisible = "visible", valHidden = "hidden"
    } 
```

*这项工作的全部目的是易于使用以及需要通过 IntelliSense 完成的任何事情。

所以当需要应用“隐藏”效果时，我只是这样做

```
Hide.LBL(MyLabelid); 
```

*   **我的问题是：**

我如何使它适用于任何`Web.UI.WebControl`作为 Hide 方法接受的参数？

所以而不是指定控制类型：

```
Hide.LBL(MyLabelid); 
```

我将只有一种方法用于所有控件

```
Hide.Acontrol(AnyWebControlHere); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:45:17.443

这是我测试的。它使用 Common WebControls 作为一种方法。

```
 public static void Atdd(Control htmlOrWebCntrl, string prop, string value)
        {
            if (htmlOrWebCntrl.GetType().IsSubclassOf(typeof(WebControl)))
            {
                WebControl wc = htmlOrWebCntrl as WebControl;
                wc.Style.Add(prop, value);
            }
            else
                if (htmlOrWebCntrl.GetType().IsSubclassOf(typeof(HtmlControl)))
                {

                    HtmlControl HtmlCtrl = htmlOrWebCntrl as HtmlControl;

                    HtmlCtrl.Style.Add(prop, value);
                }

        } 
```

# java - 从 .exe 获取 .jar

> ID：12755554
> 
> 赞同：0
> 
> 时间：2012-10-06T00:11:08.190
> 
> 标签：java, windows, jar, exe, decompiler

我目前正在处理的是一个包含可执行 .jar 的 Windows .exe。我尝试通过各种 .exe 和 .jar 反编译器运行它，但无济于事。我的问题是，我将如何获取 .jar 在被塞入 .exe 之前的状态？

请注意，我不是试图将程序从 C++ 或 C# 转换为 java，而是将 .jar 打包成 .exe 转换回原始 .jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:47:29.327

在不知道如何将其打包成 exe 的任何信息的情况下，一种方法是替换`ClassLoader`rt.jar 中的核心并将数据写入其`defineClass`方法中的文件。这样，每当加载类时，它们都会被写入相应的文件。

请注意，这是一个 hack，并且有很多陷阱。举个例子，它不会在 jar 文件中包含其他数据，例如资源。你最好的办法是找出它是如何像@HovercraftFullOfEels 提到的那样打包的。

OpenJDK java.lang.ClassLoader[源码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/ClassLoader.java)

# javascript - 如何对 AngularJS 中的两个字段求和并在标签中显示结果？

> ID：12755558
> 
> 赞同：44
> 
> 时间：2012-10-06T00:11:46.053
> 
> 标签：javascript, html, angularjs, sum

我的页面上有一个情况。

我的页面中有两个输入和一个标签。这些标签必须显示这两个输入值的总和。

所以我尝试了以下解决方案：

```
Sub-Total
<input type="text" ng-model="Property.Field1" />
Tax
<input type="text" ng-model="Property.Field2" />
Total
<label>{{ Property.Field1 + Property.Field2  }}</label> 
```

第一次，当页面完全加载时，标签显示总和，但是当我在任何输入中键入一些值时， **这些解决方案给了我一个 CONCATENATION 结果 `Property.Field1`和`Property.Field2`，而不是总和**。

所以我尝试了这些：

```
Sub-Total
<input type="text" ng-model="Property.Field1" />
Tax
<input type="text" ng-model="Property.Field2" />
Total
<label>{{ parseFloat(Property.Field1) + parseFloat(Property.Field2)  }}</label> 
```

再次没有成功。

如何获得标签中显示的两个输入的总和结果？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-06T01:28:51.203

你真的`parseFloat`在你的控制器中创建了一个方法吗？因为您不能简单地在 Angular 表达式中使用 JS，请参阅[Angular 表达式与 JS 表达式](http://docs.angularjs.org/guide/expression)。

```
function controller($scope)
{
    $scope.parseFloat = function(value)
    {
        return parseFloat(value);
    }
} 
```

编辑：也应该可以简单地设置对原始函数的引用：

```
$scope.parseFloat = parseFloat; 
```

我也希望它可以与过滤器一起使用，但不幸的是它不是（可能是一个错误，或者我误解了过滤器的工作原理）：

```
<label>{{ (Property.Field1|number) + (Property.Field2|number) }}</label> 
```

一种解决方法是使用乘法进行强制转换：

```
<label>{{ (Property.Field1 * 1) + (Property.Field2 * 1) }}</label> 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-11-22T14:57:59.303

哥伦布*的蛋*是：***双重否定***。

初始值为 0（而不是 null），结果将是和（而不是串联，因为隐式数字转换）。

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js">
</script>

<div ng-app>  
  <input ng-model="first"  placeholder="First number"  type="text" />
  <input ng-model="second" placeholder="Second number" type="text" />
  <h1> Sum: {{first--second}}! </h1>
</div>
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-07-18T00:06:51.913

将两个数字相加的最简单和最好的方法是使用 HTML5 的`type="number"`. 如果这样做，输入的值默认为整数。

[更新的小提琴](http://jsfiddle.net/73gQR/29/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-16T09:51:52.063

```
Sum in Angularjs
<div ng-app>
        <input type="text" ng-model="first" />
        <input type="text" ng-model="second" />
        Sum: {{first*1 + second*1}}
</div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-26T02:34:10.267

```
 <!DOCTYPE html>
    <html>
    <head>
    	<title>Angular Addition</title>
    	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    </head>
    <body>
    	<div ng-app="">
    		<p>First Number <input type="number"  ng-model="fnum"></p>
    		<p>Second Number <input type="number" ng-model="snum"></p>
    		<p>Total {{ (snum) + (fnum) }}</p>
    	</div>
    </body>
    </html>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-06T10:02:09.220

```
Simple method for this :
Js file:
var myApp = angular.module('myApp', []);
myApp.controller("myCtrl", function ($scope) {
    $scope.sum = function (num1, num2) {
        $scope.addition = parseInt(num1) + parseInt(num2);
    }
});

html file:

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js" type="text/javascript"></script>

<head>
<script src="script.js" type="text/javascript"></script>
    <title></title>
</head>
<body>
<div ng-app="myApp" ng-controller="myCtrl">

Enter First Number:<input type="text" id="num1" ng-model="num1" /><br />
Enter Second Number:<input type="text" id="num2" ng-model="num2" /><br />
<input type="button" value="Sum" ng-click="sum(num1,num2)" />
<input type="text" ng-model="addition" />

</div>
</body>
</html>

///.. the textbox in which u want the output just use ng-model there .. as u can see above:.. 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-20T04:32:39.800

'AngularJs中两个数字的总和

```
<input type="number" ng-model="FirstNumber">
<input type="number" ng-model="SecondNumber">
{{FirstNumber+SecondNumber}} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-30T12:53:15.060

```
<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>

<body>

 <h2>Demo-Sum of two input value </h2>
   <div ng-app="my_firstapp" ng-controller="myfirst_cntrl">
   Number 1 : <input type="text" ng-model="Property.num1" data-ng-init="Property.num1='1'"><br>
   Number 2 : <input type="text" ng-model="Property.num2" data-ng-init="Property.num2='2'"><br>
   Sum of : {{ parseFloat(Property.num1) + parseFloat(Property.num2) }}

 </div>

<script type="text/javascript">
 var app1 = angular.module('my_firstapp', []);
 app1.controller('myfirst_cntrl', function controller($scope) {
  $scope.parseFloat = function(value) {
    return parseFloat(value);
  }
});
</script>
</body>

</html> 
 <p>Output</p>
<p>Sum of : 3</p> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-26T13:24:34.273

对于 Angular（版本 2 及更高版本）尝试执行以下操作

```
 <p>First Number <input type="number"  [(ngModel)]="fnum"></p>
    <p>Second Number <input type="number" [(ngModel)]="snum"></p>
    <p>Total = {{fnum+snum}}</p> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-26T15:23:26.473

![根据输入标签类型，我们可以通过这两种方式进行](../Images/de656373d5b7775e6128f85f8f769b2a.png)

根据输入标签类型，我们可以通过以下两种方式进行：

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-19T05:39:48.433

```
Sub-Total
<input type="text" ng-model="Property.Field1" />
Tax
<input type="text" ng-model="Property.Field2" />
Total
<label>{{ Property.Field1 + Property.Field2  }}</label> 
```

您可以使用双重否定而不是使用直接 +。如果你有 type="number" 这将起作用。对于 type="text" 使用双重否定方法。像这样

```
 sum:{{ Property.Field1 -- Property.Field2  }} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-22T23:50:08.577

您可以使用一元加运算符将变量转换为数字。

```
{{ (+count1)+(+count2) }} 
```

# c# - 分发 NUnit 测试

> ID：12755565
> 
> 赞同：1
> 
> 时间：2012-10-06T00:14:12.743
> 
> 标签：c#, visual-studio-2010, nunit

我正在尝试分发一些在 Visual Studio 2010 中制作的 C# 代码，其中包含一些 NUnit 测试。有没有办法分发它，以便其他人不必安装 NUnit，但仍然可以以某种形式运行测试？想到的一个想法是将dll放在项目目录中并在Visual Studio项目中引用-那些-，然后压缩整个目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:20:28.767

NUnit 测试需要 NUnit。唯一需要引用/提供运行标准单元测试的程序集是 nunit.framework.dll。只要您包含该程序集，就可以构建解决方案。

在你的文档/页面中，单元测试是 NUnit 的简单参考足以让开发人员知道，他们可以下载 NUnit 来运行它们，或者像 TDD.Net 这样执行 NUnit 测试的东西。

对于即插即用，否则您将无法使用 MSTest 测试。

# iphone - UITableView 索引滚动问题

> ID：12755566
> 
> 赞同：1
> 
> 时间：2012-10-06T00:14:16.730
> 
> 标签：iphone, objective-c, ios, uitableview

我正在尝试索引表并在单击索引条目时滚动到正确的行。该表的每一行都有字母 A..Z。该指数还有 A..Z. 它在向下滚动时工作。例如，当我单击索引中的“H”时，表格会滚动，因此 H 是第一行，但现在当我单击“A”时，屏幕上有一半的空白空间，然后 A 行显示在中间。这是为什么？因为我是新会员，所以不能发图片。

我只有一节。我为节数返回 1，为节行数返回 26。

我在方法 sectionForSectionIndexTitle 中的代码是

```
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index {
NSLog(@"getting called %d",index);
int position;
switch (index) {
    case 0:
        position=0;
        break;
    case 1:
        position=1;
        break;
    case 2:
        position=2;
        break;    
    case 3:
        position=3;
        break;
    case 4:
        position=4;
        break;
    case 5:
        position=5;
        break;
    case 6:
        position=6;
        break;
    case 7:
        position=7;
        break;
    case 8:
        position=8;
        break;
    case 9:
        position=9;
        break;    
    case 10:
        position=10;
        break;
    case 11:
        position=11;
        break;
    case 12:
        position=12;
        break;
    case 13:
        position=13;
        break;
    case 14:
        position=14;
        break;
    case 15:
        position=15;
        break;
    case 16:
        position=16;
        break;    
    case 17:
        position=17;
        break;
    case 18:
        position=18;
        break;
    case 19:
        position=19;
        break;
    case 20:
        position=20;
        break;
    case 21:
        position=21;
        break;
    case 22:
        position=22;
        break;
    case 23:
        position=23;
        break;    
    case 24:
        position=24;
        break;
    case 25:
        position=25;
        break;
    case 26:
        position=26;
        break;
    default:
        position=1;
        break;
}
NSLog(@"scrolling to %d",position);
[tableView reloadInputViews];
[tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:position inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];
return index; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:11:26.517

试试这个东西.....我这是工作..

```
 [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:NO];
    [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:position inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:28:45.277

K 来自问题

*   查看`UITableView`数据源和委托
*   正确设置表

Indexpath 有两个参数行和部分

```
NSIndexPath *index=[NSIndexPath indexPathForRow:position inSection:section]
[tableView scrollToRowAtIndexPath:index atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

在您的 didSelectRowAtIndexpath 方法中，您将拥有 indexpath 并在单击时滚动，因此

```
[tableView scrollToRowAtIndexPath:indexpath atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

将足以实现这一目标

# python - Python 插入排序是如何工作的？

> ID：12755568
> 
> 赞同：16
> 
> 时间：2012-10-06T00:15:02.567
> 
> 标签：python

这是插入排序的 Python 实现，我尝试遵循纸上的值，但是一旦计数变量 i 大于 len(s)，我不知道该怎么办，它如何/为什么仍然运行？

```
def sort_numbers(s):
    for i in range(1, len(s)):
        val = s[i]
        j = i - 1
        while (j >= 0) and (s[j] > val):
            s[j+1] = s[j]
            j = j - 1
        s[j+1] = val

def main():
    x = eval(input("Enter numbers to be sorted: "))
    x = list(x)
    sort_numbers(x)
    print(x) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-02-25T19:13:40.200

或者，这个：

```
def ins_sort(k):
    for i in range(1,len(k)):    #since we want to swap an item with previous one, we start from 1
        j = i                    #create i's copy (or not)
        temp = k[j]              #temp will be used for comparison with previous items, and sent to the place it belongs
        while j > 0 and temp < k[j-1]: #j>0 bcoz no point going till k[0] since there is no seat available on its left, for temp
            k[j] = k[j-1] #Move the bigger item 1 step right to make room for temp
            j=j-1 #take k[j] all the way left to the place where it has a smaller/no value to its left.
        k[j] = temp
    return k 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-06T01:02:55.770

考虑 [3, 2, 1]

循环从 3 开始。因为它是列表中的第一项，所以没有其他事情可做。

```
[3, 2, 1] 
```

下一个项目是 2。它将 2 与 3 进行比较，由于 2 小于 3，因此交换它们，首先将 3 放在第二个位置，然后将 2 放在第一个位置。

```
[2, 3, 1] 
```

最后一项是 1。由于 1 小于 3，它移动了 3。

```
[2, 3, 3] 
```

由于 1 小于 2，因此它交换移动 2。

```
[2, 2, 3] 
```

然后它在开头插入 1。

```
[1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-08T08:39:08.743

要了解该实现是如何工作的，请在此处查看可视化：http: [//goo.gl/piDCnm](http://goo.gl/piDCnm)

但是，这是插入排序的一个不太容易混淆的实现：

```
def insertion_sort(seq):
    for i in range(1, len(seq)):
        j = i
        while j > 0 and seq[j - 1] > seq[j]:
            seq[j - 1], seq[j] = seq[j], seq[j - 1]
            j -= 1 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-12T05:22:06.677

递归实现

```
def insert(x, L):
    if [] == L:      return [x]
    elif x <= L[0]:  return [x] + L
    else:            return [L[0]] + insert(x,L[1:])

def insertion_sort(L):
    if [] == L:  return []
    else:        return insert(L[0], insertion_sort(L[1:]))

# test
import random

L = [random.randint(1,50) for _ in range(10)]

print L
print insertion_sort(L) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-06T04:15:09.613

如果我们考虑从左到右的数组 [LeftMost, ..., RightMost]，插入排序对每个项目执行以下过程：

1.  获取当前值 i。
2.  获取值 j（其中 j = i-1 在第一次迭代中，或者基本上是 i 左侧的第一个元素）。在第一次迭代中，array[i] 和 array[j] 是连续元素。例如，如果 array = [... 60, 100, 50, ...]，并且 array[i] 为 50，则 array[j] 为 100。
3.  如果前一个值大于当前值，则交换这两个值。基本上，如果在此操作发生之前你有类似 [..., 60, 100, 50, ...] 的东西，你最终会得到 [..., 60, 50, 100, ...]。这个想法是，只要它左边有较低的元素，你就移动 i 左边的每个项目。

    > 这是排序算法的关键。一旦你完成了第 i 项的处理，你就有了一个排序数组，从它最初的位置一直到开始（最左边）。

4.  将 j 的值减一。并返回第 1 步（在本例中，这将引导您比较 50 和 60 并交换它们）。

如果您仔细查看代码，您永远不会得到 i >= len(s) 的点（[range](http://docs.python.org/release/1.5.1p1/tut/range.html)是一个创建列表的函数，并且值 i 在循环内不会更改）。您可以将变量 i 视为一个虚构的箭头，指向数组中的一个位置，该位置的所有排序元素都在其左侧。变量 j 在 i 固定的情况下简单地向左移动，以交换原始 array[i] 值，直到找到另一个等于或小于它的值。

旁注（对于理解算法并不重要，但可能有用）：考虑到这一点，您可以推断出该算法的复杂性（在最坏情况比较中测量）为 O(N^2)，其中 N = len(s)。它类似于有两个嵌套的 for 语句。

[这个视频](http://www.youtube.com/watch?v=ROalU379l3U)很好地解释了上述内容，你知道他们在说什么，*一张图片值 1000 字*。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-03T20:40:37.143

有一些信息有助于理解插入排序。

首先，`i`永远不要大于`len(s)`。事实上，它也永远不等于它。所做的是`range(1, len(s))`产生一个可以迭代的不可变序列。您将在以下语句下拥有什么（让我们假设`len(s) = 3`）：

```
for i in range(1, len(s)):
    ... 
```

是这样的：

```
for i in (1, 2):
    ... 
```

您可以验证自己：

```
>>> list(range(1, 3))
>>> [1, 2] 
```

因此，您将迭代两次，第一次使用`i = 1`，第二次使用`i = 2`。

其次，它有助于提醒自己，您正在排序的列表本质上由两部分组成：已排序的部分 ( `list[0:i-1]`) 和尚未排序的部分 ( `[list[i:]`)。您试图在每次迭代中使用插入排序来实现的是找到一个将当前值放入排序列表的位置。我们很快就会谈到这一点。

第三，该算法可以被认为是完成两个截然不同的任务。第一个是遍历列表中的所有成员并确保列表已排序。这就是外循环关注的部分（当然，内循环参与实际检查，但它有助于简化）。另一种是为列表中的元素找到适当的位置，以便对列表进行排序。即，如果你有一个 list `letters = ['a', 'b', 'd', 'c']`，如果要按升序对列表进行排序，`'c'`显然应该去`letters[2]`并且`'d'`需要占据's 以前的位置。`'c'`这就是内部`while`循环所做的部分。

实际上，while 循环（和`s[j+1] = val`语句）如何确保列表被排序是非常聪明的。首先，它确保我们没有过度扩张（`j >= 0`条件）。也就是说，我们没有选择`s[-1]`元素，在 Python 中它将是列表中的最后一个元素，而其他语言，如 Java，则`ArrayIndexOutOfBounds`例外。然后，它会问：我持有的数字是否低于之前的数字？如果是这样，这意味着列表没有排序，我们需要将较大的第一个位置移到列表的末尾（如果你愿意的话，向右移动）。请注意，*我们用来比较其他元素的元素保持不变*。我们将它保存在`val`变量中。因此，我们不必担心在移动值时通过覆盖它而意外丢失它。

现在，一旦我们将较大的值向右移动，我们就会递减`j`并再次问同样的问题：at 的值是否`s[j]`大于我们所拥有的值`val`？我们继续这样做，直到我们找到低于我们所拥有的价值`val`，或者我们达到`s[0]`但没有找到更低的价值。这意味着我们持有的是列表中最小的数字。无论哪种方式，我们都会跳出`while`循环并用我们拥有的值覆盖`s[j+1]`，这样我们就不会失去`val`.

要查看它在实践中的外观，请考虑一个列表：`[2, 3, 4, 5, 1]`. 假设我们迭代直到达到 number `1`，此时我们进入 while 循环，因为`5 > 1`。采取的步骤是：

```
2, 3, 4, 5, 1   # val = 1, s[j] = 5, j = 3       5 > 1
2, 3, 4, 5, 5   # val = 1, s[j] = 4, j = 2       4 > 1
2, 3, 4, 4, 5   # val = 1, s[j] = 5, j = 1       3 > 1
2, 3, 3, 4, 5   # val = 1, s[j] = 5, j = 0       2 > 1
2, 2, 3, 4, 5   # val = 1, s[j] = 5, j = -1      break out of while
1, 2, 3, 4, 5   # val = 1, s[j] = 5, j = -1      put val into s[0] 
```

基本上就是这样。遍历循环，检查当前值之前的值是否低于我们所持有的值，如果不是，则将这些值向右移动以为我们的值腾出空间。你有它 - 插入排序。

编辑：如果您仍然很难了解它是如何工作的，那么有一个非常好的[代码审查可视化解释。](https://codereview.stackexchange.com/a/139058/79110)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-30T18:52:30.090

```
def insertionsort(list):
    for i in range(1,len(list)):
        temp=list[i]
        j=i-1
        while temp<+list[j] and j>=0:
            list[j+1]=list[j]
            j=j-1
        list[j+1]=temp
    return list
list=eval(raw_input('Enter a list:'))
print insertionsort(list) 
```

这将对您有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-02T05:24:51.257

试试这个，适用于递增和递减顺序：

```
import operator

def insertion_sort(arr, reverse=False):
    # check if array is empty or not
    if arr is None:
        raise TypeError("Data cannot be none")

    n = len(arr)
    # if length of array is less than two it is already sorted
    if n < 2:
        return arr

    lgt = operator.gt if reverse else operator.lt

    # Traverse through 1 to len(arr)
    for i in range(1, n):
        key = arr[i]
        j = i-1
        while j >= 0 and lgt(key, arr[j]):
            arr[j+1] = arr[j]
            j -= 1
        arr[j+1] = key
    return arr

li = [1, 4, 8, 9, 42, 0, 36]
print(insertion_sort(li)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-31T18:32:44.943

python函数从到`range(start, end)`开始计数。也就是说，永远不会成为价值观的一部分。因此，如果您有，例如，并且是一个包含 10 个整数的数组（在 Python 中是一个列表），则为10，并且将返回，以便您可以索引 A 中的每个元素。`start``end - 1``end``range()``range(len(A))``A``len(A)``range(len(A))``(0,1,2,3,4,5,6,7,8,9)`

在你的情况下，我永远不会比`len(s) - 1`.

在纸上遵循您的代码可能很有用，但您必须确保编程语言完全按照您的想法执行，有时实现并不直观。跟踪程序值的一种快速而简单的方法是使用`print`语句。例如：

```
def sort_numbers(s):
    for i in range(1, len(s)):

        # let's see what values i takes on
        print "i = ", i

        val = s[i]
        j = i - 1
        while (j >= 0) and (s[j] > val):
            s[j+1] = s[j]
            j = j - 1
        s[j+1] = val 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-10T17:12:28.797

+带有两个 for 循环和描述性名称的替代方案。

```
def insertionSort(list):
  for outerIndex in range(len(list)):
    for innerIndex in range(outerIndex, 0, -1):
      if list[innerIndex] >= list[innerIndex - 1]:
        break
      list[innerIndex], list[innerIndex - 1] = list[innerIndex - 1], list[innerIndex]
  return list

print insertionSort([3, 1e-10, 7e5, 2.3, 100, -2.5, 12.1])
# => [-2.5, 1e-10, 2.3, 3, 12.1, 100, 700000.0] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-19T04:15:21.773

通过递归插入排序：

```
k=1# def insertionsort(a): # should be written before k=1
c=a[:]
def swap(k,c,a):
    if c[k-1] > c[k]:
        c[k-1] = a[k]
        c[k] = a[k-1]
        a = c[:]
        if max(c[:k])!= c[k-1]:
            swap(k-1,c,a)
    if k < len(a)-1:
       return swap(k + 1, c,a)
    return c
return swap(k,c,a)

print(insertionsort(b)) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-12T21:02:04.693

```
def insertSort(list):
  for i in range(0, len(list)):
    index = list[i] // index holder for swapAt position
    while i > 0 and index < list[i - 1]:
      list[i] = list[i - 1]
      i = i - 1
      list[i] = index
  return list 
```

> `print(insert([3,3,6,1,7,2,8])) -> [1, 2, 3, 3, 6, 7, 8]`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-15T14:11:03.743

对数组进行排序的简单方法。

```
# Mutate the constant input 
# loop into the array
# check if the array[j] have to be greater than 0 and a[j] is less than a[j - 1] 
# then swap values and decrease the value swapped.

def insertionSort(array):
  a = array
  for i in range(0,len(a)):
    j = i
    while j > 0 and a[j] < a[j - 1]:
      a[j], a[j - 1] = a[j - 1], a[j]
      j -= 1
  return a

# input-> [2,1,3] then array[j] > 0 and array[j] < array[j - 1] -> swap -> decrease j 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-25T05:39:52.223

```
def insertion(x):
    for i in range(1, len(x)):
        while x[i - 1] > x[i] and i >= 0:
            x[i - 1], x[i] = x[i], x[i - 1]
            i -= 1
    return x 
```

类似的东西

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-13T13:28:06.933

列表切片和冒泡排序的简单组合

```
s = [54,26,93,17,77,31,44,55,20]

for i in range(1,len(s)+1):
    b = s[0:i]
    a = b
    count = 0

    while count<len(a):                  # while loop to perform the for loop len(a) number of times-like in bubble sort
        for j in range(len(a)-1):        # for loop compares every j'th element with next element
            if a[j] >= a[j+1-len(a)]:
                temp = a[j]
                a[j] = a[j+1-len(a)]
                a[j+1-len(a)] = temp

        count = count+1
print a 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-08-28T02:01:20.413

```
def ins(l):
    for i in range(1, len(l)):
        current_index = i
        current_value = l[i]
        while current_index > 0 and current_value < l[current_index - 1]:
            l[current_index] = l[current_index - 1]
            current_index -= 1
        l[current_index] = current_value
    print(l) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-08-31T19:41:06.713

```
def insertionSort(alist):
    for index in range(1, len(alist)):

        currentvalue = alist[index]
        position = index

        while position > 0 and alist[position-1] > currentvalue:
            alist[position] = alist[position-1]
            print(alist)
            position -= 1

        alist[position] = currentvalue

alist = [int(i) for i in input().split()]       
insertionSort(alist) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-09-17T11:03:08.447

```
__author__ = 'Dharmjit'  
def InsertionSort(list):  
    for index in range(1,len(list)):  
        curr = list[index]  
        position = index  

        while position > 0 and list[position-1] > curr:  
            list[position] = list[position-1]  
            position = position - 1  

        list[position] = curr  
    return list  

l = [2,1,5,3,9,6,7]  
print(InsertionSort(l))  
[1,2,3,5,6,7,9] 
```

你可以在这里看到整个概念 - [http://pythonplanet.blogspot.in/2015/07/sorting-algorithm-1-insertion-sort.html](http://pythonplanet.blogspot.in/2015/07/sorting-algorithm-1-insertion-sort.html)

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2014-11-25T05:32:07.377

```
def sort_numbers(list):
    for i in range(1, len(list)):
        val = list[i]
        j = i - 1
        while (j >= 0) and (list[j] > val):
            list[j+1] = list[j]
            j = j - 1
        list[j+1] = val

n = int(input("Enter the no. of elements"))
list = []
for i in range(0,n):
  t = int(input())
  list.append(t)

sort_numbers(list)

print list 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2016-11-30T11:33:09.293

我浏览了许多这些帖子，我认为人们过度复杂化了这个问题。如果我做错了，请纠正我，但这是我对此的解释。

```
def insert(L): # this creates the definition and assines the list that you input to L
    for i in range(len(L)): # this then loops the next code for the length of the list
        while i > 0 and L[i] < L[i-1]: # this is the main part of the code where it checks
        # if the value from the list is less than the one before it and if it is then it 
        # swaps them around 
            L[i-1], L[i] = L[i], L[i-1] # this code just swaps round the values
            print (L)# prints the list out at the end of each part

L = [5,2,3,7,6,9,7]
insert(L) 
```

使用它输出：

```
[2, 5, 3, 7, 6, 9, 7]
[2, 3, 5, 7, 6, 9, 7]
[2, 3, 5, 6, 7, 9, 7]
[2, 3, 5, 6, 7, 7, 9] 
```

print 函数也可以从行中删除，并且可以放在 for 循环之外，以便它只在末尾打印列表。这只会给出最后一行：

```
[2, 3, 5, 6, 7, 7, 9] 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2021-01-11T18:34:24.577

```
`enter code here`
def insertion_sort(data):
n = len(data)
for i in range(n):
    index = i
    value = data[i]
    while data[index] < data[index-1] and index > 0:
        #print("index : " ,index)
        data[index] = data[index-1]
        data[index-1] = value
        #print(f"DATA[index-1] : { data[index-1] } DATA[index] : { data[index] } " )
        index -= 1

    data[index] = value

return data;

if __name__ == "__main__":
data = []
size = int(input("How many data you want to enter ? : "))

print("\n-----------------INITIALISING----------------")
for i in range(size):
    temp = int(input(f"Enter element { i + 1 } : "))
    data.append(temp)

print("\n-----------------BEFORE SORTING DATA----------")
print(data)

print("\n-----------------AFTER SORTING DATA-----------")
print(insertion_sort(data)) 
```

* * *

## 回答 #22

> 赞同：-5
> 
> 时间：2016-01-27T14:18:13.223

```
 def insertie(x):
    nrc=0
    nrm=0
    for i in range(0,len(x)):
        aux=x[i]
        nrm=nrm+1
        j=i-1
        while j >= 0 and aux < x[j]:
            nrc=nrc+1
            x[j+1]=x[j]
            nrm=nrm+1
            j=j-1
        nrc=nrc+1
        x[j+1]=aux
        nrm=nrm+1
    return x

x=[7,5,4,9,1,4,0,1]
print insertie(x) 
```

# python - 附加/加入由 mlab.csv2rec(file) 创建的两个记录数组

> ID：12755569
> 
> 赞同：0
> 
> 时间：2012-10-06T00:15:13.970
> 
> 标签：python, matplotlib

我正在尝试附加我使用创建的三个recarrays`mlab.csv2rec(file)`

recarray 有几个字段，例如：

```
data = mlab.csv2rec(fd)
data2 = mlab.csv2rec(fd2)

data.temp, data.volt, data.chan, data.power
data2.temp, data2.volt, data2.chan, data2.power 
```

这两个recarrays是独一无二的。我曾尝试使用该`rec_join`功能，但没有通过以下方式取得任何成功：

```
data3 = mlab.rec_join([i for i, j in data.dtype.descr],data,data2) 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:56:58.960

我想我知道解决方案。

我首先使用该`np.hstack()`函数将它们堆叠起来。

```
data3 = np.hstack((data,data2)) 
```

然后我使用以下函数对其进行类型转换：

```
data4 = data3.view(np.recarray) 
```

# typescript - TypeScript 可以在没有定义文件的情况下与 jQuery 交互吗？

> ID：12755570
> 
> 赞同：22
> 
> 时间：2012-10-06T00:15:20.613
> 
> 标签：typescript

我一直在尝试了解这个新的“TypeScript”东西，我对某些东西有点好奇。

它是否仍然可以与现有的 javascript 框架（如 jQuery ）一起**使用，而不**需要包含所有这些接口的定义文件？我一直在尝试手动测试这一点，但到目前为止我有点不确定功能扩展了多远。

# 更新

我所说的“工作”指的是简单的功能，而不是像自动完成这样的 IDE 功能。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-06T00:20:27.660

简单的答案是**肯定**的。

TypeScript 能够与*任何*现有的 Javascript 库完全交互。如果您希望 IDE 中的工具使其更易于使用，则只需要定义文件。

此外，如果您不包含定义文件，TypeScript 编译器可能会因为使用尚未在您的代码中定义的变量（如`$`）而生您的气。为了解决这个问题，你可能需要做类似的事情

```
declare var $; 
```

也就是说，我不确定您为什么*不想*使用 jQuery 定义文件。用它来编写 jQuery 肯定会更愉快。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-06T00:24:00.840

是的你可以。例如只写：

```
declare var $; 
```

并且您基本上可以使用 JQuery 框架而无需定义任何其他内容。当您转换现有库/移植代码时，这也非常方便。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T08:11:28.093

Typescript 允许您使用`declare variable`or`declare function`语法在预期范围内声明变量（请参阅语言规范中第 9 页的第 1.1 节）。但是，使用环境声明只能是一种短期解决方案，因为您将有效地放弃 Typescript 的所有静态类型检查，因此是 Typescript 相对于 Javascript 的最重要优势之一。

# css - 内联 CSS 样式有效，但外部 CSS 样式无效

> ID：12755573
> 
> 赞同：1
> 
> 时间：2012-10-06T00:15:40.783
> 
> 标签：css, html, firefox, stylesheet

我需要帮助。这是荒唐的。

我正在使用 Komodo IDE 版本 7.1.2 和 Firefox 版本 15.0.1。

我创建了一个 HTML5 文件，如下所示：

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

<meta charset="utf-8" />

<title>Web Page</title>

<link rel="stylesheet" type="css/text" href="css/global.css" />

</head>

<body>

<div id="release">Release Date</div>

</body>

</html> 
```

全局样式表包含此内容，并且位于与名为 的 HTML 文件处于同一级别的目录中`css`：

```
#release {
    text-align: center;
    font: small-caps;
    border-top: solid 1px;
    border-bottom: solid 1px;
    border-right: solid 10px;
} 
```

这是目录结构的图片：

![在此处输入图像描述](../Images/49439b74012b1f071c76bde031899fe6.png)

我将相同的样式放入他的 HTML 文件中并且它可以工作，但是该样式不适用于外部样式表。我对网站开发并不陌生，所以这对我来说特别令人费解。

我也在两台 Windows 7 机器和一台 Ubuntu 11.10 机器上尝试了同样的事情，但同样异常。

这是小提琴的工作：

[http://jsfiddle.net/NKq8N/1/](http://jsfiddle.net/NKq8N/1/)

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:20:44.010

在`<link>`属性中，`type`应该是“text/css”，而不是“css/text”。

# c# - 麻烦添加计算变量c#

> ID：12755574
> 
> 赞同：2
> 
> 时间：2012-10-06T00:16:10.850
> 
> 标签：c#, try-catch, formatexception

基本上，我需要将resulta + resultb + resultc + 之前定义的propertyPrice 加在一起以获得总计，然后在文本框中显示总计。结果a/b/c 是根据propertyPrice * 一个常数计算的，房产价格由用户输入。

我没有尝试捕获就做到了，并且得到了格式异常。

```
int propertyPrice;

if (Int32.TryParse(propertyPriceTextBox.Text, out propertyPrice))
{
    stateSalesTaxTextBox.Text = (stateSalesTax * propertyPrice).ToString("c");

    if (residentialRadioButton.Checked == true)
        comissionTextBox.Text = (residentialCom * propertyPrice).ToString("c");

    if (commercialRadioButton.Checked == true)
        comissionTextBox.Text = (commercialCom * propertyPrice).ToString("c");

    if (hillsRadioButton.Checked == true)
        countySalesTaxTextBox.Text = (hilssTax * propertyPrice).ToString("c");

    if (pascoRadioButton.Checked == true)
        countySalesTaxTextBox.Text = (pascoTax * propertyPrice).ToString("c");

    if (polkRadioButton.Checked == true)
        countySalesTaxTextBox.Text = (polkTax * propertyPrice).ToString("c");

    decimal resulta;
    decimal resultb;
    decimal resultc;

    try
    {
        resulta = decimal.Parse(countySalesTaxTextBox.Text);
        resultb = decimal.Parse(stateSalesTaxTextBox.Text);
        resultc = decimal.Parse(comissionTextBox.Text);
    }
    catch (FormatException)
    {

    }

    decimal totalPrice = (resulta + resultb + resultc + propertyPrice);
    totalPriceTextBox.Text = totalPrice.ToString("c");  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:28:56.640

您有几个不同的问题：

首先，`FormatException`发生这种情况是因为您将非数字值传递给该`decimal.Parse()`方法。你需要检查你的输入。

接下来，在您的示例中，您正在有效地吞下您的异常。它被抛出，catch 时钟捕获它，但由于您在块内不做任何事情，您的代码只是离开 catch 块并继续。因此，您`totalPrice`仍然使用由于异常而未计算的变量的默认值进行计算。

正如其他人所建议的那样，`decimal.TryParse()`这是一个更好的选择，因为它不会引发异常。但是您需要决定当其中一个`Parse()`or`TryParse()`方法调用失败时要做什么。您要假设结果为零，还是要中止计算？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T00:22:33.083

使用`decimal.TryParse`；这将允许您检查字符串是否有效。

```
decimal resulta;
decimal resultb;
decimal resultc;

if (!decimal.TryParse(countySalesTaxTextBox.Text, out resulta))
{
    //take appropriate action here
}
if (!decimal.TryParse(stateSalesTaxTextBox.Text, out resultb))
{
    //take appropriate action here
}
if (!decimal.TryParse(comissionTextBox.Text, out resultc))
{
    //take appropriate action here
} 
```

我想借此机会建议您更改变量名称：

*   `resulta`应该`countySalesTaxRate`
*   `resultb`应该`stateSalesTaxRate`
*   `resultc`应该`commissionRate`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T00:23:38.933

```
decimal resulta = 0;
decimal resultb = 0;
decimal resultc = 0;

decimal.TryParse(countySalesTaxTextBox.Text, out resulta);
decimal.TryParse(stateSalesTaxTextBox.Text, out resultb);
decimal.TryParse(comissionTextBox.Text, out resultc); 
```

如果无法解析该值，它将保持为 0。如果解析成功，TryParse 将返回 true，因此如果您想在解析失败时显示消息，只需检查`TryParse == false`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-06T00:25:58.840

在您遇到文化问题之前，请提供一些额外信息。和 ，

像这样使用 Decimal.TryParse 重载

```
Decimal.TryParse(countySalesTaxTextBox.Text, NumberStyles.Any, new CultureInfo("en-US"), out resulta); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T00:19:53.763

尝试：

```
if (!decimal.TryParse(countySalesTaxTextBox.Text, out resulta)) { /*Resolve issue*/ }
if (!decimal.TryParse(stateSalesTaxTextBox.Text, out resultb)) { /*Resolve issue*/ }
if (!decimal.TryParse(comissionTextBox.Text, out resultc)) { /*Resolve issue*/ } 
```

仔细检查我的变量名和默认值。

# optimization - 优化 Go 文件读取程序

> ID：12755575
> 
> 赞同：2
> 
> 时间：2012-10-06T00:16:11.800
> 
> 标签：optimization, go

我正在尝试处理一个日志文件，其中每一行看起来像这样：

```
flow_stats: 0.30062869162666672 gid 0 fid 1 pkts 5.0 fldur 0.30001386666666674 avgfldur 0.30001386666666674 actfl 3142 avgpps 16.665896331902879 finfl 1 
```

我感兴趣的`pkts`领域和`fldur`领域。我有一个 Python 脚本，它可以读取一百万行日志文件，为所有不同持续时间的每个数据包数量创建一个列表，对这些列表进行排序并在大约 3 秒内计算出中位数。

我正在玩 Go 编程语言，并认为我会重写它，希望它运行得更快。

到目前为止，我很失望。仅将文件读入数据结构大约需要 5.5 秒。所以我想知道你们中的一些优秀的人是否可以帮助我更快地完成这个（呵呵）。

这是我的循环：

```
data := make(map[int][]float32)
infile, err := os.Open("tmp/flow.tr")
defer infile.Close()
if err != nil {
  panic(err)
}
reader := bufio.NewReader(infile)

line, err := reader.ReadString('\n')
for {
  if len(line) == 0 {
    break
  }
  if err != nil && err != io.EOF {
    panic(err)
  }
  split_line := strings.Fields(line)
  num_packets, err := strconv.ParseFloat(split_line[7], 32)
  duration, err := strconv.ParseFloat(split_line[9], 32)
  data[int(num_packets)] = append(data[int(num_packets)], float32(duration))

  line, err = reader.ReadString('\n')
} 
```

请注意，我确实检查了`err`循环中的 s ——为简洁起见，我省略了它。 `google-pprof`表示大部分时间都花在`strings.Fields`、和`strings.FieldsFunc`上。`unicode.IsSpace``runtime.stringiter2`

我怎样才能让它运行得更快？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T03:25:17.577

更换

`split_line := strings.Fields(line)`

和

`split_line := strings.SplitN(line, " ", 11)`

在模仿您上面提供的格式的 1M 行随机生成的文件上产生了约 4 倍的速度提升：

strings.Fields 版本：4.232525975s 完成

strings.SplitN 版本：1.111450755s 完成

一些效率来自于能够避免在分割持续时间后解析和分割输入行，但大部分来自于 SplitN 中更简单的分割逻辑。即使拆分所有字符串也不会比在持续时间后停止花费更长的时间。使用：

`split_line := strings.SplitN(line, " ", -1)`

1.554971313s 完成

SplitN 和 Fields 不一样。字段假定标记由 1 个或多个空白字符限定，其中 SplitN 将标记视为由分隔符字符串限定的任何内容。如果您的输入在标记之间有多个空格，则 split_line 将为每对空格包含空标记。

排序和计算中位数不会增加太多时间。为了方便排序，我将代码更改为使用 float64 而不是 float32。这是完整的程序：

```
package main

import (
    "bufio"
    "fmt"
    "os"
    "sort"
    "strconv"
    "strings"
    "time"
)

// SortKeys returns a sorted list of key values from a map[int][]float64.
func sortKeys(items map[int][]float64) []int {
    keys := make([]int, len(items))
    i := 0
    for k, _ := range items {
        keys[i] = k
        i++
    }
    sort.Ints(keys)
    return keys
}

// Median calculates the median value of an unsorted slice of float64.
func median(d []float64) (m float64) {
    sort.Float64s(d)
    length := len(d)
    if length%2 == 1 {
        m = d[length/2]
    } else {
        m = (d[length/2] + d[length/2-1]) / 2
    }
    return m
}

func main() {
    data := make(map[int][]float64)
    infile, err := os.Open("sample.log")
    defer infile.Close()
    if err != nil {
        panic(err)
    }
    reader := bufio.NewReaderSize(infile, 256*1024)

    s := time.Now()
    for {
        line, err := reader.ReadString('\n')
        if len(line) == 0 {
            break
        }
        if err != nil {
            panic(err)
        }
        split_line := strings.SplitN(line, " ", 11)
        num_packets, err := strconv.ParseFloat(split_line[7], 32)
        if err != nil {
            panic(err)
        }
        duration, err := strconv.ParseFloat(split_line[9], 32)
        if err != nil {
            panic(err)
        }
        pkts := int(num_packets)
        data[pkts] = append(data[pkts], duration)
    }

    for _, k := range sortKeys(data) {
        fmt.Printf("pkts: %d, median: %f\n", k, median(data[k]))
    }
    fmt.Println("\nCompleted in ", time.Since(s))
} 
```

和输出：

```
pkts: 0, median: 0.498146
pkts: 1, median: 0.511023
pkts: 2, median: 0.501408
...
pkts: 99, median: 0.501517
pkts: 100, median: 0.491499

Completed in  1.497052072s 
```

# python - OpenERP 中日记账项目的树形视图列

> ID：12755579
> 
> 赞同：0
> 
> 时间：2012-10-06T00:17:08.007
> 
> 标签：python, openerp

我想编写一个自定义模块，当您在 OpenERP 6.1 中搜索日记项目时调整哪些列是可见的。不幸的是，显示的列与视图定义中的列不匹配。真正定义的列在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:17:08.007

在跟踪代码时，我发现它`account_move_line`会覆盖`fields_view_get`并替换或大量修改列列表。它似乎根据会计下配置的日记帐视图做出决定：配置：财务会计：日记帐：日记帐视图。如果您更改日记视图或编辑其中一个日记视图，您可以更改显示在日记项目树视图中的字段。

当然，我也可以阅读[文档](http://doc.openerp.com/v6.1/book/3/3_9/journals.html)。

# python - 使用python将特定行从一个文件写入另一个文件

> ID：12755587
> 
> 赞同：13
> 
> 时间：2012-10-06T00:18:12.070
> 
> 标签：python

我有大约 200 个短文本文件 (50kb)，它们都有类似的格式。我想在每个包含某个字符串的文件中找到一行，然后将该行加上接下来的三行（但不是文件中的其余行）写入另一个文本文件。为了做到这一点，我正在尝试自学python，并编写了一个非常简单粗暴的小脚本来尝试一下。我使用的是 2.6.5 版本，并从 Mac 终端运行脚本：

```
#!/usr/bin/env python

f = open('Test.txt')

Lines=f.readlines()
searchquery = 'am\n'
i=0

while i < 500:
    if Lines[i] == searchquery:
        print Lines[i:i+3]
        i = i+1
    else:
        i = i+1
f.close() 
```

这或多或少有效并将输出打印到屏幕上。但我想将这些行打印到一个新文件中，所以我尝试了这样的事情：

```
f1 = open('Test.txt')
f2 = open('Output.txt', 'a')

Lines=f1.readlines()
searchquery = 'am\n'
i=0

while i < 500:
if Lines[i] == searchquery:
    f2.write(Lines[i])
    f2.write(Lines[i+1])
    f2.write(Lines[i+2])
    i = i+1
else:
    i = i+1
f1.close()
f2.close() 
```

但是，没有任何内容写入文件。我也试过

```
from __future__ import print_function
print(Lines[i], file='Output.txt') 
```

也无法让它发挥作用。如果有人能解释我做错了什么或提供一些关于我应该尝试什么的建议，我将非常感激。此外，如果您对改进搜索有任何建议，我也将不胜感激。我一直在使用一个测试文件，其中我要查找的字符串是行中唯一的文本，但在我的真实文件中，我需要的字符串仍然在行的开头，但后面是一堆其他文本，所以我认为我现在设置的方式也不会真正起作用。

谢谢，对不起，如果这是一个超级基本的问题！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-06T00:40:43.140

正如@ajon 所指出的，我认为您的代码除了缩进之外没有任何根本性的问题。缩进固定后，它对我有用。然而，有几个改进的机会。

**1)**在 Python 中，迭代事物的标准方法是使用[`for`循环](http://docs.python.org/tutorial/controlflow.html#for-statements)。使用`for`循环时，您无需定义循环计数器变量并自己跟踪它们以迭代事物。相反，你写这样的东西

```
for line in lines:
    print line 
```

遍历字符串列表中的所有项目并打印它们。

**2）**在大多数情况下，这就是您的`for`循环的样子。但是，在某些情况下，您确实确实想要跟踪循环计数。你的情况就是这样的情况，因为你不仅需要那一行，还需要接下来的三行，因此需要使用计数器进行索引（`lst[i]`）。为此，[`enumerate()`](http://docs.python.org/library/functions.html#enumerate)它将返回一个项目列表*及其*索引，然后您可以在其上循环。

```
for i, line in enumerate(lines):
    print i
    print line
    print lines[i+7] 
```

*如果*您要像示例中那样手动跟踪循环计数器，则有两件事：

**3)**那`i = i+1`应该移出`if`and`else`块。你在这两种情况下都这样做，所以把它放在`if/else`. 在您的情况下，该`else`块不再做任何事情，并且可以被消除：

```
while i < 500:
    if Lines[i] == searchquery:
        f2.write(Lines[i])
        f2.write(Lines[i+1])
        f2.write(Lines[i+2])
    i = i+1 
```

**4)**现在，这将导致`IndexError`文件少于 500 行。您应该使用正在迭代的序列的实际长度，而不是硬编码 500 的循环计数。[`len(lines)`](http://docs.python.org/library/functions.html#len)会给你那个长度。但是不要使用`while`循环，而是使用`for`循环并[`range(len(lst))`](http://docs.python.org/library/functions.html#range)遍历从零到`len(lst) - 1`.

```
for i in range(len(lst)):
    print lst[i] 
```

**5)** [`open()`](http://docs.python.org/library/functions.html#open)可以用作[上下文管理器](http://docs.python.org/reference/compound_stmts.html#with)，负责为您关闭文件。上下文管理器是一个相当高级的概念，但如果已经为您提供了它们，则使用起来非常简单。通过做这样的事情

```
with open('test.txt') as f:
    f.write('foo') 
```

`f`该文件将在该`with`块内打开并可供您访问。离开区块后，文件将自动关闭，因此您不会忘记关闭文件。

在您的情况下，您正在打开两个文件。这可以通过使用两个`with`语句并嵌套它们来完成

```
with open('one.txt') as f1:
    with open('two.txt') as f2:
        f1.write('foo')
        f2.write('bar') 
```

或者，在 Python 2.7 / Python 3.x 中，通过在单个`with`语句中嵌套两个上下文管理器：

```
 with open('one.txt') as f1, open('two.txt', 'a') as f2:
        f1.write('foo')
        f2.write('bar') 
```

**6)**根据创建文件的操作系统，行尾不同。在类 UNIX 平台上，它是`\n`.OS X 之前的 Mac `\r`，Windows 使用`\r\n`. 所以这`Lines[i] == searchquery`与 Mac 或 Windows 行结尾不匹配。`file.readline()`可以处理所有这三个，但是因为它保留了行尾的任何行尾，所以比较将失败。这可以通过 using 解决[`str.strip()`](http://docs.python.org/library/stdtypes.html#str.strip)，它将去除开头和结尾的所有空白字符串，并比较*没有*行结尾的搜索模式：

```
searchquery = 'am'
# ...
            if line.strip() == searchquery:
                # ... 
```

`file.read()`（使用和使用读取文件[`str.splitlines()`](http://docs.python.org/library/stdtypes.html#str.splitlines)将是另一种选择。）

但是，由于您提到您的搜索字符串实际上出现在该行的开头，让我们这样做，使用[`str.startswith()`](http://docs.python.org/library/stdtypes.html#str.startswith)：

```
if line.startswith(searchquery):
    # ... 
```

**7)** Python 的官方风格指南[PEP8](http://www.python.org/dev/peps/pep-0008/)建议`CamelCase`用于类，`lowercase_underscore`几乎所有其他东西（变量、函数、属性、方法、模块、包）。所以而不是`Lines`使用`lines`. 与其他方面相比，这绝对是一个小问题，但仍然值得尽早做好。

* * *

因此，考虑到所有这些事情，我会这样编写您的代码：

```
searchquery = 'am'

with open('Test.txt') as f1:
    with open('Output.txt', 'a') as f2:
        lines = f1.readlines()
        for i, line in enumerate(lines):
            if line.startswith(searchquery):
                f2.write(line)
                f2.write(lines[i + 1])
                f2.write(lines[i + 2]) 
```

正如@TomK 指出的那样，所有这些代码都假定如果您的搜索字符串匹配，那么它后面至少有两行。如果你不能依赖这个假设，那么使用[`try...except`](http://docs.python.org/reference/compound_stmts.html#the-try-statement)@poorsod 建议的块来处理这种情况是正确的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T00:24:49.857

我认为你的问题是底部文件的标签。

您需要从 if`Lines[i]`到 after缩进，`i=i+1`例如：

```
while i < 500:
    if Lines[i] == searchquery:
        f2.write(Lines[i])
        f2.write(Lines[i+1])
        f2.write(Lines[i+2])
        i = i+1
    else:
        i = i+1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T01:11:44.463

ajon 有正确的答案，但只要您正在寻找指导，您的解决方案就不会利用 Python 可以提供的高级构造。怎么样：

```
searchquery = 'am\n'

with open('Test.txt') as f1:
  with open(Output.txt, 'a') as f2:

    Lines = f1.readlines()

    try:
      i = Lines.index(searchquery)
      for iline in range(i, i+3):
        f2.write(Lines[iline])
    except:
      print "not in file" 
```

即使发生异常，两个“with”语句也会在最后自动关闭文件。

一个更好的解决方案是避免一次读取整个文件（谁知道它有多大？），而是逐行处理，在文件对象上使用迭代：

```
 with open('Test.txt') as f1:
    with open(Output.txt, 'a') as f2:
      for line in f1:
        if line == searchquery:
          f2.write(line)
          f2.write(f1.next())
          f2.write(f1.next()) 
```

所有这些都假设在您的目标线之外至少有两条额外的线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T01:17:55.000

您是否尝试过使用“Output.txt”以外的其他内容来避免任何与文件系统相关的问题？

在诊断时避免任何时髦的不可预见问题的绝对路径怎么样？

这个建议只是从诊断的角度来看。还可以查看 OS X dtrace 和 dtruss。

参见：[mac os X 上的 strace -feopen <command> 等价物](https://stackoverflow.com/questions/1925978/equivalent-of-strace-feopen-command-on-mac-os-x)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-04T16:03:46.407

处理大数据时，逐行写入可能会很慢。您可以通过一次读/写一堆行来加速读/写操作。

```
from itertools import slice

f1 = open('Test.txt')
f2 = open('Output.txt', 'a')

bunch = 500
lines = list(islice(f1, bunch)) 
f2.writelines(lines)

f1.close()
f2.close() 
```

如果您的行太长并且取决于您的系统，您可能无法将 500 行放在一个列表中。如果是这种情况，您应该减小`bunch`大小并根据需要设置尽可能多的读/写步骤来编写整个内容。

# nhibernate - NHibernate 在子查询中使用连接：不生成连接 sql 语句

> ID：12755590
> 
> 赞同：0
> 
> 时间：2012-10-06T00:18:38.950
> 
> 标签：nhibernate, nhibernate-criteria

我有一个使用 QueryOver 的调用，其布局如下，并且没有生成子查询中所需的内部连接语句。

我正在查询的对象的结构如下：

```
public class Product {
    public virtual long Id { get; set; }
    ... OTHER DATA MEMBERS ...
}

public class ProductListType1 {
    public virtual int Id { get; set; }
    public virtual DateTime Date { get; set; }
    public virtual char Category { get; set; }
    ... OTHER DATA MEMBERS ...
    public virtual IDictionary<short, Detail> Details { get; set; }

    public class Detail {
        public virtual short SequenceNumber { get; set; }
        public virtual ProductListType1 ProductListType1 { get; set; } // PARENT REFERENCE FOR BIDIRECTIONAL RELATIONSHIP
        public virtual Product Product { get; set; }
        ... OTHER DATA ...
    }
}

public class ProductListType2 {
    // SAME STRUCTURE AS PRODUCT LIST TYPE 1
}

ProductListType1.Detail detailAlias = null;
Product productAlias = null;

ProductListType2 productListType2Alias = null;
ProductListType2.Detail productListType2DetailAlias = null;

_session.QueryOver<ProductListType1>()
    .Left.JoinAlias(productListType1 => productListType1.Details, () => detailAlias)
    .Left.JoinAlias(() => detailAlias.Product, () => productAlias)
    .Where(productListType1 => productListType1.Next == "abc" || productListType1.Final == "abc")
    .And(productListType1 => productListType1.Status.IsIn(new string[] { "STATUS1", "STATUS2", "STATUS3", "STATUS4"}))
    .WithSubquery.WhereNotExists(QueryOver.Of<ProductListType2.Detail>(() => productListType2DetailAlias)
        .Select(productListType2Detail => productListType2Detail.Product.id)
        .Inner.JoinAlias(productListType2Detail => productListType2Detail.ProductListType2, () => productListType2Alias)
        .Where(productListType2Detail => productListType2Detail.SequenceNumber < 900)
        .And(productListType2Detail => productListType2Detail.Product.Id == detailAlias.Product.Id)
        .And(() => productListType2Alias.Date == DateTime.Today)
        .And(() => productListType2Alias.Category == "D")
    )
    .TransformUsing(Transformers.DistinctRootEntity)
    .List(); 
```

调用this时生成的sql如下。

```
SELECT (lots of stuff)
FROM PRODUCT_LIST_TYPE1_TABLE this_
LEFT OUTER JOIN PRODUCT_LIST_TYPE1_DETAILS_TABLE detailalia1_
    ON this_.id=detailalia1_.parentId
LEFT OUTER JOIN PRODUCT_TABLE product2_
    ON detailalia1_.productId=product2_.id
WHERE (this_.next = ? or this_.dest = ?)
AND this_.stat in (?, ?, ?, ?)
AND NOT EXISTS (
    SELECT this_0_.productId as y0_
    FROM PRODUCT_LIST_TYPE2_DETAILS_TABLE this_0_
    WHERE this_0_.sequenceNumber < ?
    AND this_0_.productId = detailalia1_.pron
    AND productlisttype2_.date = ?
    AND productlisttype2_.type = ?
); PARAMETERS 
```

生成的sql导致抛出异常：

```
GenericADOException: {"SQL5001 Column qualifier or table productlisttype2_ undefined."} 
```

谁能告诉我为什么子查询 .JoinAlias() 调用没有生成到 PRODUCT_LIST_TYPE2_TABLE 的内部连接语句，以及如何让它这样做？

要清楚我正在寻找它生成的 sql 是：

```
SELECT (lots of stuff)
FROM PRODUCT_LIST_TYPE1_TABLE this_
LEFT OUTER JOIN PRODUCT_LIST_TYPE1_DETAILS_TABLE detailalia1_
    ON this_.id=detailalia1_.parentId
LEFT OUTER JOIN PRODUCT_TABLE product2_
    ON detailalia1_.productId=product2_.id
WHERE (this_.next = ? or this_.dest = ?)
AND this_.stat in (?, ?, ?, ?)
AND NOT EXISTS (
    SELECT this_0_.productId as y0_
    FROM PRODUCT_LIST_TYPE2_DETAILS_TABLE this_0_
    INNER JOIN PRODUCT_LIST_TYPE2_TABLE productlisttype2_  // THIS PART IS MISSING
        ON this_0_.parentId=productlisttype2_.id
        AND productlisttype2_.date = ?
        AND productlisttype2_.type = ?
    WHERE this_0_.sequenceNumber < ?
    AND this_0_.productId = detailalia1_.pron
); PARAMETERS 
```

或在子查询中大致等效。

更新：我还尝试更改：

```
 .Inner.JoinAlias(productListType2Detail => productListType2Detail.ProductListType2, () => productListType2Alias) 
```

至

```
 .Inner.JoinAlias(() => productListType2DetailAlias.ProductListType2, () => productListType2Alias) 
```

并尝试使用连接查询：

```
 .Inner.JoinQueryOver(productListType2Detail => productListType2DetailAlias.ProductListType2) 
```

这两个更改都生成了相同的 sql，其中不存在 INNER JOIN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T05:03:07.093

Can you try re parsing the query as follows,

```
ProductListType1.Detail detailAlias = null;
Product productAlias = null;

ProductListType2 productListType2Alias = null;
ProductListType2.Detail productListType2DetailAlias = null;

_session.QueryOver<ProductListType1>()
    .Left.JoinAlias(productListType1 => productListType1.Details, () => detailAlias)
    .Left.JoinAlias(() => detailAlias.Product, () => productAlias)
    .Where(productListType1 => productListType1.Next == "abc" || productListType1.Final == "abc")
    .And(productListType1 => productListType1.Status.IsIn(new string[] { "STATUS1", "STATUS2", "STATUS3", "STATUS4"}))
    .WithSubquery.WhereNotExists(QueryOver.Of<ProductListType2.Detail>(() => productListType2DetailAlias)
        .Select(productListType2Detail => productListType2Detail.Product.id)
        .Inner.JoinAlias(() => productListType2Detail.ProductListType2, () => productListType2Alias)
        .Where(productListType2Detail => productListType2Detail.SequenceNumber < 900)
        .And(productListType2Detail => productListType2Detail.Product.Id == detailAlias.Product.Id)
        .And(() => productListType2Alias.Date == DateTime.Today)
        .And(() => productListType2.Category == "D")
    )
    .TransformUsing(Transformers.DistinctRootEntity)
    .List(); 
```

Change is,

```
.Inner.JoinAlias(productListType2Detail => productListType2Detail.ProductListType2, () => productListType2Alias) 
```

to

```
.Inner.JoinAlias(() => productListType2Detail.ProductListType2, () => productListType2Alias) 
```

# c++ - 具有 n 个参数的模板专用构造函数

> ID：12755592
> 
> 赞同：0
> 
> 时间：2012-10-06T00:18:49.463
> 
> 标签：c++, templates

我有一个用整数模板化的类（即：

```
template </*...*/, int a> /*...*/ 
```

）。在我的课堂上，我想要一个完全接受“a”参数的构造函数。我当然可以让它可变，但如果可能的话，我希望在编译时检查长度。我也认为宏黑客可以工作，但我开始寻找内置的 C++ 功能。

这在 C++ 中是否可行，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:35:25.603

处理一系列相同类型的值是数组的用途。

你甚至不需要使用原始数组；使用 C++11，您可以使用`std::array`.

比如像这样：

```
template< int a >
class MyClass
{
public:
    MyClass( std::array< int, a > const& args )
    {}
}; 
```

如果您的编译器不提供`std::array`，那么您可以很容易地定义相应的类，或者您可以只使用原始数组：

```
template< int a >
class MyClass
{
public:
    MyClass( int const (&args)[a] )
    {}
}; 
```

嗯，我希望我在那里得到了`&`正确的位置。由于某种我无法理解的原因，我总是忘记那个语法。不管我用了多少次。

* * *

鉴于 OP 在评论中澄清（1）他没有 C++11 和（2）他想要简单的声明语法*，如*

```
MyClass<4> m(0,1,2,3); 
```

一种可能性是创建`MyClass`一个可以由 C++03 花括号初始化程序初始化的聚合，即没有用户定义的构造函数：

```
#include <stddef.h>

typedef ptrdiff_t Size;
typedef Size Index;

template< Size a >
class MyClass
{
public:
    static Size const n = a;
    static Size size() { return n; }

    int elems_[n];
    int operator[]( Index const i ) const { return elems_[i]; }
    int& operator[]( Index const i ) { return elems_[i]; }
};

#include <iostream>
using namespace std;
int main()
{
    MyClass< 3 > x = {100, 200, 300};
    for( int i = 0;  i < x.size(); ++i )
    {
        wcout << x[i] << endl;
    }
} 
```

如果这个解决方案是可以接受的，那么本质上就是重新实现`std::array`.

# c++ - QT GUI 进度条

> ID：12755594
> 
> 赞同：0
> 
> 时间：2012-10-06T00:19:11.773
> 
> 标签：c++, visual-studio, qt4

我是使用 QT 的新手，对 C++ 比较陌生。我有一个称为驱动器的向量，它包含计算机的所有驱动器号。我有一个名为 noDrives 的 int，即 drive.size(); 我在 QT Designer 9 进度条中设置了我的表单，我将使用它设置为不可见

```
 ui.driveLabel1->setVisible(false); 
```

我忘记了如何在 for 循环中将条形设置为可见。例如 int drive = 4 所以我需要将progressBar0-4 变为可见。这是我到目前为止所拥有的。

```
 std::vector<std::string> drives = DriveFinder();
    int noDrives = drives.size();
    for (int i = 0 ; i < noDrives ; i++){
    ui.driveBar1->setVisible(false);
    } 
```

每次循环我都需要打开下一个 driveBar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:38:26.067

如果我正确理解您的问题：

```
switch( i )
{
 case 1: ui.driveBar1->setVisible(false); break;
 case 2: ui.driveBar2->setVisible(false); break;
 case 3: ui.driveBar3->setVisible(false); break;
 ...
} 
```

或者

```
std::vector<QProgressBar*> Bars (10);
Bars[0] = ui.driveBar1;
Bars[1] = ui.driveBar2;
... 
```

然后...

```
Bars[i]->setVisible(false); 
```

# javascript - 使用 .on() 和 .off() 禁用事件的 jQuery 分页会导致 UI 元素无响应

> ID：12755596
> 
> 赞同：1
> 
> 时间：2012-10-06T00:19:16.517
> 
> 标签：javascript, jquery, jquery-events, custompaging

我使用 jQuery 1.8.0 编写了一个自定义分页方案。我将事件处理程序绑定到后退和前进按钮。要在第 1 页禁用后退按钮，我使用 .off() 函数来禁用绑定。当我向上翻页时，我在按钮上调用 .on() 以再次启用绑定。当我三次更改事件绑定的开/关状态时，就会出现问题。之后，该事件将不再触发。

下面是我的代码的精简版本。这将说明我的问题。

这就是事件。后退按钮的 id 为 prevPageLink。

```
$("#prevPageLink").click( function() {
  // Decrement the current page
  global_currentPage--;

  // Check to see if first or last page clicked
  handlePaginationButtonState();

  // Decrement the results indicies
  startResultsIndex -= global_totalResultsPerPage;
  endResultsIndex = startResultsIndex + global_totalResultsPerPage - 1;

  getNextResults();  
}); 
```

函数 handlePaginationButtonState 完成打开和关闭后退和前进按钮的工作。

```
function handlePaginationButtonState() {

  if (global_currentPage == 1) {
    $("#prevPageLink").parent().attr('class', 'disabled');
    $("#prevPageLink").off('click');
  } else {
    $("#prevPageLink").parent().attr('class', 'enabled');
    $("#prevPageLink").on('click');
  }  // the rest of this function takes care of the numbered and right page buttons 
```

因此，当 Web 应用第一次返回结果时，会加载前 10 个结果。如果我执行以下操作：

1.  下一页（至第 2 页） - 绑定已打开
2.  上一页（返回第 1 页） - 绑定已关闭
3.  下一页（至第 2 页） - 出价已开启

我无法翻页，回到第 1 页。prePageLink 按钮不再响应。我已经使用下一页按钮和结果列表的末尾以及编号的页面按钮对此进行了测试。如果绑定已使用 .on() 或 .off() 函数打开或关闭，则它不再响应事件。

有任何想法吗？我完全感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:27:08.667

> *“如果使用 .on() 或 .off() 函数打开或关闭绑定”*

`$("#prevPageLink").on('click')`它并没有像您认为的那样做，实际上它根本没有做任何事情，因为您没有提供足够的参数。该`.on()`方法不会打开以前删除的事件处理程序，它会绑定一个新的事件处理程序，因此您必须提供事件发生时将调用的函数。换句话说：

```
$("#prevPageLink").on('click', function() { /* some code */ });
/// does the same thing as:
$("#prevPageLink").click(function() { /* some code */ }); 
```

该`.off()`方法*删除*了以前绑定的处理程序，它不会暂时禁用它。

如果您想继续重新绑定相同的函数，请不要使用匿名函数：

```
function myClickHandler() {
    // your code here
}
$("#prevPageLink").on('click', myClickHandler);
// remove it:
$("#prevPageLink").off('click');
// add it again:
$("#prevPageLink").on('click', myClickHandler); 
```

有关更多信息**[，](http://api.jquery.com/on/)****请阅读[文档](http://api.jquery.com/on/)。[`.on()`](http://api.jquery.com/on/)**

但是，与其删除和重新绑定处理程序，我认为将处理程序一直留在原处并让它测试您是否已经在第一页上会更容易 - 在函数的开头添加类似这样的内容：

```
if (global_currentPage === 1)
   return false; 
```

# .htaccess - 在子域上设置 URL 重写

> ID：12755597
> 
> 赞同：0
> 
> 时间：2012-10-06T00:19:27.630
> 
> 标签：.htaccess

**问题：**

我有一系列域链接到我的服务器，目前我的婚礼网站从一个名为 /wedding 的文件夹运行。在我的 cPanel 中，我已将默认目标设置为此文件夹，其中包含我的所有文件、index.html、location.html 等等。

现在到目前为止，我的问题是我尝试过的任何事情似乎都无法让我从 URL 的末尾删除 .html。

**目前我正在尝试：**

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks  
RewriteEngine On  

RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  

RewriteRule ^gallery$ ./wedding/gallery.html  
</IfModule> 
```

老实说，我不知道我在做什么。一些帮助将不胜感激。我只想要干净的网址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:49:54.297

> 它当前在我的 /wedding 目录中，我认为这是正确的，因为域开始文件夹在这里。

如果它在您的`wedding`目录中，那么您将永远不会访问 htaccess 文件`http://your.domain.com/gallery`（URI 路径中没有 /wedding/）。您需要将 htaccess 文件或至少文件中的规则）放在文档根目录中。

# android - 加载活动需要每次运行

> ID：12755600
> 
> 赞同：0
> 
> 时间：2012-10-06T00:19:53.783
> 
> 标签：android, android-activity, android-lifecycle

所以我有一个加载活动，每次用户打开程序时都需要加载。我将加载活动作为清单中的主要活动。如果加载活动成功，它会启动一个 HomeActivity。如果我从 HomeActivity 中点击后退按钮，当我再次尝试访问该应用程序时，它将触发 LoadingActivity。如果我从 HomeActivity 中点击主页按钮，启动它会返回 HomeActivity 而不会进入 LoadingActivity。

我已经尝试添加这些，clearTaskOnLaunch 和 FinishOnTaskLaunch。我已经尝试捕获主页按钮，但它不起作用。我无法完成 onPause 或 onStop，因为我让 HomeActivity 启动了一个在 HomeActivity 之上打开的活动，然后又回到它。关于做什么的任何想法？这是清单，仍在学习android清单的东西，所以不要杀了我。

```
<activity
        android:name=".start.LoadingActivity"
        android:screenOrientation="portrait" 
        android:clearTaskOnLaunch="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".HomeActivity"
        android:label="@string/title_activity_home"
        android:screenOrientation="nosensor" 
        >
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:35:09.220

主页按钮默认功能是在不杀死活动的情况下进入主屏幕。Android 用户希望在按下主页按钮后返回应用程序时找到他们所在的屏幕。所以我建议你改变你的设计。但是，如果您必须按照自己的方式进行操作，那么您可以使用以下一种逻辑。

每次启动主要活动时，在共享首选项中设置一个标志，例如 from_main=true。然后，在主要活动的 onPause 中，检查 from_main 是否为真。如果是真的调用finish()。如果没有，不要做任何事情。

现在，当您从主活动启动另一个活动时，将共享首选项中的标志 from_main 设置为 false。

这样，您现在将在从 main 启动其他活动之前或在启动它之后调用 onPause 。如果它在启动它之前，那么它不会完成 main 并且你可以回到它。如果是在启动它之后，那么它将完成主要活动。

# html - 文本链接而不是浏览表单

> ID：12755601
> 
> 赞同：0
> 
> 时间：2012-10-06T00:20:12.327
> 
> 标签：html, css, forms, upload

我需要使用纯文本打开浏览窗口。当您单击某些字词（例如“上传图像”）时，浏览窗口会出现，您可以选择要上传的图像。但不应该有可见的形式。只是纯文本作为打开浏览窗口的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:51:45.340

您可以简单地隐藏文件上传字段并通过 JavaScript 调用它。

在这里小提琴：http: [//jsfiddle.net/kboucher/FhpnF/](http://jsfiddle.net/kboucher/FhpnF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:38:11.423

ppk 写了一个很好的演练，叫做**[Styling an input type="file"](http://www.quirksmode.org/dom/inputfile.html)**。

# php - 使用 XPath 提取 xml 数据

> ID：12755610
> 
> 赞同：1
> 
> 时间：2012-10-06T00:21:35.783
> 
> 标签：php, xml, xpath, namespaces, simplexml

我正在尝试从以下 xml 中提取数据，但没有成功。

```
<?xml version="1.0"?>
<GetMatchingProductResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<GetMatchingProductResult ASIN="1908256052" status="Success">
  <Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
    <Identifiers>
      <MarketplaceASIN>
        <MarketplaceId>A1F83G8C2ARO7P</MarketplaceId>
        <ASIN>1908256052</ASIN>
      </MarketplaceASIN>
    </Identifiers>
    <AttributeSets>
      <ns2:ItemAttributes xml:lang="en-GB">
        <ns2:Author>Slimming World</ns2:Author>
        <ns2:Binding>Hardcover</ns2:Binding>
        <ns2:Format>Illustrated</ns2:Format>
        <ns2:IsEligibleForTradeIn>true</ns2:IsEligibleForTradeIn>
        <ns2:Label>Slimming World</ns2:Label>
        <ns2:Languages>
          <ns2:Language>
            <ns2:Name>english</ns2:Name>
            <ns2:Type>Unknown</ns2:Type>
          </ns2:Language>
          <ns2:Language>
            <ns2:Name>english</ns2:Name>
            <ns2:Type>Original Language</ns2:Type>
          </ns2:Language>
          <ns2:Language>
            <ns2:Name>english</ns2:Name>
            <ns2:Type>Published</ns2:Type>
          </ns2:Language>
        </ns2:Languages>
        <ns2:ListPrice>
          <ns2:Amount>16.99</ns2:Amount>
          <ns2:CurrencyCode>GBP</ns2:CurrencyCode>
        </ns2:ListPrice>
        <ns2:Manufacturer>Slimming World</ns2:Manufacturer>
        <ns2:NumberOfItems>1</ns2:NumberOfItems>
        <ns2:NumberOfPages>224</ns2:NumberOfPages>
        <ns2:PackageDimensions>
          <ns2:Height Units="inches">0.87</ns2:Height>
          <ns2:Length Units="inches">9.69</ns2:Length>
          <ns2:Width Units="inches">7.64</ns2:Width>
          <ns2:Weight Units="pounds">1.85</ns2:Weight>
        </ns2:PackageDimensions>
        <ns2:ProductGroup>Book</ns2:ProductGroup>
        <ns2:ProductTypeName>ABIS_BOOK</ns2:ProductTypeName>
        <ns2:PublicationDate>2011-11-20</ns2:PublicationDate>
        <ns2:Publisher>Slimming World</ns2:Publisher>
        <ns2:SmallImage>
          <ns2:URL>http://ecx.images-amazon.com/images/I/61aM-pJlQtL._SL75_.jpg</ns2:URL>
          <ns2:Height Units="pixels">75</ns2:Height>
          <ns2:Width Units="pixels">64</ns2:Width>
        </ns2:SmallImage>
        <ns2:Studio>Slimming World</ns2:Studio>
        <ns2:Title>Slimming World Extra Easy All in One</ns2:Title>
      </ns2:ItemAttributes>
    </AttributeSets>
    <Relationships/>
    <SalesRankings>
      <SalesRank>
        <ProductCategoryId>book_display_on_website</ProductCategoryId>
        <Rank>3304</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>271146</ProductCategoryId>
        <Rank>11</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>1039764</ProductCategoryId>
        <Rank>25</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>270704</ProductCategoryId>
        <Rank>38</Rank>
      </SalesRank>
    </SalesRankings>
  </Product>
</GetMatchingProductResult>
<ResponseMetadata>
  <RequestId>8d4fde2b-d2bb-4c06-800d-68eec2effcf3</RequestId>
</ResponseMetadata>
</GetMatchingProductResponse> 
```

我正在使用以下函数来返回和处理响应

```
public function getXML2($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    $response = curl_exec($ch);

    $xml = simplexml_load_string($response, NULL, NULL, "http://mws.amazonservices.com/schema/Products/2011-10-01");
    $xml->registerXPathNamespace('ns2', 'http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd');
    return $xml;

} 
```

当我尝试遍历数据时，我无法返回任何内容

```
foreach($xml->xpath('//ns2:ItemAttributes') as $event) {
    $event->registerXPathNamespace('ns2', 'http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd');
    echo var_export($event->xpath('//ns2:author'));
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:57:40.543

你试过了`DOMDocument`吗？

```
$dom = new DOMDocument;
$dom->loadXML($xml);

$xpath = new DOMXPath($dom);
$xpath->registerNamespace('ns2', 'http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd');

$el = $xpath->query('//ns2:ItemAttributes/ns2:Author');
var_dump($el->item(0)->nodeValue);

//string(14) "Slimming World" 
```

# twitter - 使用 tweepy 查找关注者的数量

> ID：12755611
> 
> 赞同：2
> 
> 时间：2012-10-06T00:21:44.157
> 
> 标签：twitter, python-2.7

我有一个追随者名单：

`lof = [31536003, 15066760, 75862029]`

我可以获得列表中每个关注者的关注者数量：

`user = tweepy.api.get_user(31536003) print user.followers_count`

但是，我正在尝试编写一个可以在 python 中返回列表的列表理解。该列表应该是我的关注者数量的列表

lof = [31536003, 15066760, 75862029] 看起来像 [100,200,300]

这意味着用户 31536003 有 100 个关注者，用户 15066760 有 200 个关注者，依此类推。

如何使用列表理解来完成此任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T00:39:42.137

找到了答案......

`loc = [tweepy.api.get_user(friend).followers_count for friend in lof]`

# java - 将按下事件发送到 Android 中正在运行的应用程序的按钮

> ID：12755612
> 
> 赞同：0
> 
> 时间：2012-10-06T00:22:10.840
> 
> 标签：java, android, events, operating-system

嗨，如果我知道要按下的按钮名称，是否可以将按下事件发送到 android 中正在运行的应用程序？

例如，如果我的应用程序有一个文本框和一个名为 SAVE 的按钮，我可以将按下事件发送到 SAVE 按钮处理程序吗？

我的目标是自动将新闻事件发送到 GUI。Monkey 将新闻事件随机发送到屏幕上的随机位置。但我想具体一点。如果有按钮，则仅向该按钮发送 Press 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:11:23.523

Try this:

```
button.performClick(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:40:52.780

> 嗨，如果我知道要按下的按钮名称，是否可以将按下事件发送到 android 中正在运行的应用程序？

如果“正在运行的应用程序”是您的，并且您专门输入了代码来支持这一点，那么当然可以。

如果“正在运行的应用程序”不是您的，并且您正试图从另一个 Android 应用程序执行此操作，那么不，这是不可能的，出于明显的隐私和安全原因。

# javascript - 如何用 ExtJs ajax responseText 替换元素

> ID：12755613
> 
> 赞同：1
> 
> 时间：2012-10-06T00:22:15.983
> 
> 标签：javascript, jquery, dom, extjs, extjs4

我正在尝试将 jquery ajax 转换为 Extjs 并消除对 jquery 库的使用。

但问题来了……

使用 Ext.Ajax.request 加载 ajax 响应后，来自 ajax 页面的脚本不会触发。

jQuery Ajax 函数：

```
 $(document).ready(function () {
        $.ajax({
            type: 'POST',
            url: '@Url.Content("~/Test/Header/")',
            success: function (response) {
                $("#header").replaceWith(response);
            }
        });
    }); 
```

上面的代码与正确显示的 ajax 内容完美配合，并且所有 javascript 都能正确执行。

这是 ajax 请求的 Extjs 版本：

```
 Ext.onDocumentReady(function () {
        Ext.Ajax.request({
            method: 'POST',
            url: '@Url.Content("~/Test/Header/")',
            success: function (response) {
                Ext.get('header').dom.outerHTML = response.responseText;
            }
        });
    }); 
```

上面的代码在检索响应内容时工作正常，但是当我用 responseText 替换现有的“div”时，响应页面中的 javascripts 不会被触发。

我怀疑这是因为我没有正确更换元素。

因此，当我尝试使用元素替换的 jQuery 版本时，它工作正常。

**我的问题是，Extjs 替换“div”的正确方法是什么？**

我已经尝试了几种方法，但它们都不起作用......

**改写我的问题的更好方法是...... Extjs 相当于：**

```
$("#header").replaceWith(response); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:53:40.377

jQuery：

`$("#header").replaceWith(response);`

分机：

```
Ext.get('header').replaceWith(response);
//note: no pound sign 
```

资源：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-replaceWith](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-replaceWith)

API 文档在这里和那里遗漏了一些东西，但总的来说，这是一个惊人的参考。享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:27:37.110

我遇到了同样的问题。解决方案是：

```
var workspaceCenter = Ext.fly('workspaceCenter');
workspaceCenter.load({
    url     : url ,
    params  : params,
    scripts : true,            <------ this is the trick
    callback : function() {
        Ext.getBody().unmask();
    }
}); 
```

# syntax - Common Lisp：如何创建一个连接前缀宏，类似于'？

> ID：12755618
> 
> 赞同：2
> 
> 时间：2012-10-06T00:22:55.113
> 
> 标签：syntax, common-lisp, notation, prefix-operator

Common Lisp 宏通常使用包含前缀表示法：（运算符的东西......）

但是，特殊的引号宏 ' 使用连接前缀表示法： operator stuff 或 operator(stuff)。

我想在 SBCL Common Lisp 中创建一个自定义宏，我们称之为 !，它使用连接前缀语法对以下列表（甚至原子）进行操作，其方式类似于 ' 。因此，我可以在任何地方调用它，例如 (setq foo !(bar) )，而无需将其插入括号本身。

如何才能做到这一点？defmacro 语法是什么样的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:48:21.223

我看到了两种方法。

第一个简单的变体是合适的，如果您只需要它用于单个或非常有限数量的案例，并且您对仅使用单个符号作为前缀感到满意（如`!`示例案例中）。您可以创建一个读取宏，更具体地说，设置 a`macro-character`来替换此类运算符，例如加法：

```
(set-macro-character #\! (lambda (stream char)
                           (declare (ignore char))
                           (cons '+ (let ((next (read stream t nil t)))
                                 (if (consp next) next
                                     (list next)))))
CL-USER> !1
1
CL-USER> !(1 2)
3 
```

另一种更复杂、更灵活的方法是定义一个宏，在该宏中应用自定义转换，将连接前缀代码转换为包含前缀。这个技巧使用了这样一个事实，普通的 Lisp 阅读器将以相同的方式读取`foo(bar)`和`foo (bar)`，即它将它们分成 2 个元素。

这种宏的简单版本可能如下所示：

```
(defmacro with-prefix-syntax (&body body)
  `(progn ,@(loop :for tail :on body :while body
                  :collect (if (and (not (atom (second tail)))
                                    (fboundp (first tail)))
                               (prog1 (cons (first tail) (second tail)
                                 (setf tail (rest tail)))
                               (first tail))))) 
```

它只会转换顶级表单：

```
CL-USER> (macroexpand-1 '(with-prefix-syntax
                           print(1)))
(PROGN (PRINT 1))
CL-USER> (macroexpand-1 '(with-prefix-syntax
                           1))
(PROGN 1)
CL-USER> (macroexpand-1 '(with-prefix-syntax
                           print(1)
                           2))
(PROGN (PRINT 1) 2) 
```

但不适用于较低级别：

```
CL-USER> (macroexpand-1 '(with-prefix-syntax
                           print(1)
                           (+ print(2))))
(PROGN (PRINT 1) (+ PRINT (2))) 
```

虽然让它递归地转换所有层相当容易（这留给读者作为练习:)

# php - 修改表单以使页面在提交时不刷新

> ID：12755625
> 
> 赞同：0
> 
> 时间：2012-10-06T00:24:10.117
> 
> 标签：php, html

我有一个简单的表单，如果单击某个按钮，则输入字段会被赋予一个值。问题是重新加载页面需要很长时间，我想在不刷新页面的情况下提交它。我尝试过调整不同类型的某些 AJAX、JQuery 脚本，但它们没有奏效，任何人都可以建议一些简单的代码来使用。这是基本示例：

```
<html>
<form method='POST' action='test2.php'>
<input type='text' name='input_a' value='<?php if($_POST['submit_a'])
{
   echo "test1";
} ?>'>

<input type='submit' name='submit_a' value='a'>
<input type='text' name='input_b' value='<?php if($_POST['submit_b'])
{
    echo "test2";
}?>'>

<input type='submit' name='submit_b' value='b'>
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:43:13.320

这是使用 ajax 发布的示例（您必须针对响应调整代码）。我假设您需要发布，因为您概述的场景可以很容易地完全使用 javascript 完成。

```
$(function(){
    $('input[type="submit"]').click(function(){
         var form = $(this).parents('form');
         var postData = form.serialize();
         postData[$(this).attr('name')] = $(this).val(); // the value for the click won't be retrieved with serialize
         $.post(form.attr('action'), postData , function(data) {
             $('body').html(data);
         });
         return false;
    });
}; 
```

如果你可以在不发布的情况下做到这一点，它看起来像这样：

```
$(function(){
    $('input[name="submit_a"]').click(function(){
        $('input[name="input_a"]').val('test1');
    });
    $('input[name="submit_b"]').click(function(){
        $('input[name="input_b"]').val('test2');
    });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T00:42:04.377

如果用例真的是这个基本的，我只使用香草 javascript 来调整它。如果需要服务器端访问，此解决方案将无济于事，您将不得不了解有关 Ajax 工作原理的更多信息。

HTML：

```
<html>
<form>
   <input type='text' name='input_a' id="input_a"/><input type='submit' name='submit_a' value="a" onclick="setInput(this, 'test1'); return false;">
   <input type='text' name='input_b' id="input_b"/><input type='submit' name='submit_b' value="b" onclick="setInput(this, 'test2'); return false;">
</form>
</html>​ 
```

Javascript：

```
function setInput(button, setValue) {
    var buttonVal = button.value,
        textbox = document.getElementById('input_' + buttonVal);

    textbox.value = setValue;
}​ 
```

这是在 JSFiddle 中工作的示例：http: [//jsfiddle.net/6jpNf/1/](http://jsfiddle.net/6jpNf/1/)

# java - Maty Hall 先生打印：如果打印成功，我如何编码？

> ID：12755629
> 
> 赞同：-2
> 
> 时间：2012-10-06T00:24:53.923
> 
> 标签：java

这是可以打印表单的代码。由马蒂霍尔创建。我只是想问一下，每当我单击打印表单中的“确定”按钮时，我是否可以编码，您可以在其中设置要打印的表单的属性，我该怎么做？在这段代码的哪一部分？对不起，如果我不能让自己清楚。XD

```
package thesis;

import java.awt.*;
import javax.swing.*;
import java.awt.print.*;

/** A simple utility class that lets you very simply print
 *  an arbitrary component. Just pass the component to the
 *  PrintUtilities.printComponent. The component you want to
 *  print doesn't need a print method and doesn't have to
 *  implement any interface or do anything special at all.
 *  <P>
 *  If you are going to be printing many times, it is marginally more
 *  efficient to first do the following:
 *  <PRE>
 *    PrintUtilities printHelper = new PrintUtilities(theComponent);
 *  </PRE>
 *  then later do printHelper.print(). But this is a very tiny
 *  difference, so in most cases just do the simpler
 *  PrintUtilities.printComponent(componentToBePrinted).
 *
 *  7/99 Marty Hall, http://www.apl.jhu.edu/~hall/java/
 *  May be freely used or adapted.
 */

public class PrintUtilities implements Printable {
  private Component componentToBePrinted;

  public static void printComponent(Component c) {
    new PrintUtilities(c).print();
  }

  public PrintUtilities(Component componentToBePrinted) {
    this.componentToBePrinted = componentToBePrinted;
  }

  public void print() {
    PrinterJob printJob = PrinterJob.getPrinterJob();
    printJob.setPrintable(this);
    if (printJob.printDialog())
      try {
        printJob.print();
      } catch(PrinterException pe) {
        System.out.println("Error printing: " + pe);
      }
  }

  public int print(Graphics g, PageFormat pageFormat, int pageIndex) {
    if (pageIndex > 0) {
      return(NO_SUCH_PAGE);
    } else {
      Graphics2D g2d = (Graphics2D)g;
      g2d.translate(pageFormat.getImageableX(), pageFormat.getImageableY());
      disableDoubleBuffering(componentToBePrinted);
      componentToBePrinted.paint(g2d);
      enableDoubleBuffering(componentToBePrinted);
      return(PAGE_EXISTS);
    }
  }

  /** The speed and quality of printing suffers dramatically if
   *  any of the containers have double buffering turned on.
   *  So this turns if off globally.
   *  @see enableDoubleBuffering
   */
  public static void disableDoubleBuffering(Component c) {
    RepaintManager currentManager = RepaintManager.currentManager(c);
    currentManager.setDoubleBufferingEnabled(false);
  }

  /** Re-enables double buffering globally. */

  public static void enableDoubleBuffering(Component c) {
    RepaintManager currentManager = RepaintManager.currentManager(c);
    currentManager.setDoubleBufferingEnabled(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:39:21.170

我想我理解你的问题。您遇到的困难是因为 PrintUtilities 类没有公开用户是否决定打印或取消操作。如果您希望这样做，您需要进行一些修改：

```
public static Boolean printComponent(Component c) {
    return (new PrintUtilities(c)).print();
}

public Boolean print() {
    PrinterJob printJob = PrinterJob.getPrinterJob();
    printJob.setPrintable(this);
    if (printJob.printDialog()) { // i assume this is where the dialog is shown
        // user decided to print
        try {
            printJob.print();
        } catch(PrinterException pe) {
            System.out.println("Error printing: " + pe);
        }
        return true;
    }
    else {
        // user canceled
        return false;
    }
} 
```

现在，当您调用 printComponent 时，它将返回它是否实际打印。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T00:32:29.053

您需要附加一个`ActionListner`“打印”按钮

```
btnOkay.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
      PrintUtilities pu = new PrintUtilities(componentToBePrinted);
      pu.print();
    }
} 
```

您可能需要阅读[如何编写动作侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)以获取更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T01:05:09.770

```
public void print() {
    PrinterJob printJob = PrinterJob.getPrinterJob();
    printJob.setPrintable(this);
    if (printJob.printDialog())
      try {
          System.out.println("code here");
        printJob.print();
      } catch(PrinterException pe) {
        System.out.println("Error printing: " + pe);
      }
  } 
```

我找到了。抱歉发布这个。我不能删除这个问题，因为它说它有其他人的答案。我发现这是我可以编码的部分。

# php - codeigniter 2如何处理类和对象

> ID：12755630
> 
> 赞同：3
> 
> 时间：2012-10-06T00:25:19.777
> 
> 标签：php, codeigniter

我是 CodeIgniter 的新手，我想知道系统如何处理所有类和对象。如果我有很多模型、视图和控制器，系统会在不使用时释放它们还是我必须自己做？

一个例子：

```
class Myclass extends CI_Controller {

 public function __construct(){
      parent::_construct();
 }

 public function some_function(){
    $this->load->view("some_view");
 } 
```

}

我还有一个关于数据库部分的问题。CodeIgniter 是否保存查询结果，或者我是否必须释放每个查询，我不想被保存`$query->free_result()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T05:49:47.180

活动记录会自动完成。有关更多详细信息，请查看[http://codeigniter.com/user_guide/database/results.html](http://codeigniter.com/user_guide/database/results.html)

只是为了告诉你，codeigniter 有它自己的核心库的精彩文档。因此，如果您遵循他们的指导方针，那么您将成为 codeigniter 极客。

# php - 从 MySQL 查询构建 PHP 页面（新手）

> ID：12755631
> 
> 赞同：0
> 
> 时间：2012-10-06T00:25:42.760
> 
> 标签：php, mysql, webpage

我对 PHP 非常陌生，在 MySQL 和 HTML 和 ASP 方面的基础水平也差不多。简而言之，我有一个 MySQL 数据库，我已经构建了一个 SQL 查询，可以在 MySQL 中返回我想要的结果。

我正在尝试学习做的是构建一个网页，它将：

*   将所有已知的“organizations.name”从数据库中拉到下拉列表中以选择一个。（显示在我想将变量作为 VARIABLENAME 的查询中）
*   有一个下拉菜单，可选择 30 天、60 天、180 天等（在我的查询中显示需要作为 VARIABLEDAYS 去哪里）

基本上，我试图做一些看起来像这样的东西[http://i.imgur.com/dwwGl.jpg](http://i.imgur.com/dwwGl.jpg)

并且在输出上也有相关的外观（我正在努力让格式的消息部分转储到其他字段下方，而不是旁边）。

这是我的 MySQL 查询。

```
 SELECT tickets.ref AS `Ticket Number`
      , concat_ws(' ', people.first_name, people.last_name) AS `User Name`
      , DATE_FORMAT(tickets.date_created, get_format(DATE, 'EUR')) AS `Date/Time`
      , left(tickets.subject, 80) AS Subject
      , sec_to_time(tickets.total_to_first_reply) AS `Time 1st Response`
      , sec_to_time(tickets.total_user_waiting) AS `Total Wait`
      , mycleanup (left(tickets_messages.message, 250)) AS Message
    FROM
      tickets
    INNER JOIN organizations
      ON tickets.organization_id = organizations.id
    INNER JOIN people
      ON tickets.person_id = people.id AND people.organization_id = organizations.id
    INNER JOIN tickets_messages
      ON tickets_messages.ticket_id = tickets.id AND tickets_messages.person_id = people.id
    WHERE
      tickets.date_created > date_sub(now(), INTERVAL VARIABLEDAYS DAY)
      AND organizations.name = VARIABLENAME
    GROUP BY
      tickets.ref
    ORDER BY
     `Date/Time` 
```

正如我所说，这个有点混合，因为我需要帮助：

*   如何将我的查询更改为 PHP 语句，以及制作 VARIABLEDAYS 和 VARIABLENAME，从 Web 表单中提取的内容。
*   如何制作初始 Web 表单，具体而言，使其将数据拉入 VARIABLENAME 下拉框，使其成为下拉列表。
*   如何让我的 PHP 表单正确连接到 MySQL 数据库（到目前为止，我已经尝试过包含设计包的所有内容，可以连接以制作表单。但在服务器上时不做任何事情。我已经将连接更改为 LOCALHOST 和我知道 PHP 在服务器上运行良好）

因此，任何想要尝试帮助我解决这些问题的人，或者推荐一些我可以用来轻松生成这些内容的东西，而不必在每一点上都上一门课程……将不胜感激。

谢谢

将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:42:42.800

先生，这里的期望有点沉重。我能给你的最好的答案是一个基本的例子，并指向[php.net](http://php.net/)手册。

你说你是基础级别的mysql？好的，那么运行查询来提取数据就没有问题了。您只需要知道如何使用 PHP 与数据库进行通信，对吗？调查[PDO](http://php.net/manual/en/book.pdo.php)

话虽如此，对这个问题的简洁准确的答案是，你不能让某人在一组中解释全部内容。你应该从一些教程开始，或者检查一些现有的代码来了解它是如何工作的。Stack Overflow 是一个很好的细节资源，但不一定适用于这样的问题，除非碰巧有人非常无聊，在问题被投票结束之前有很多时间写一个巨大的教程。

**编辑**

显然，您在此处输入正确的数据库凭据...

```
<?php
$db = new PDO('mysql:dbname=your-database-name;host=localhost', $username, $password);
$sql = $db->execute("SELECT `name` FROM `organizations` ORDER BY `name` ASC");
?>
<form id="user_form" action="" method="get">
    <fieldset>
        <select name="name">
        <?php <?php while ($row = $sql->fetch(PDO::FETCH_OBJ)): ?>
            <option value="<?php echo $row->name; ?>"><?php echo $row->name; ?></option>
        <?php endwhile; ?>
        </select>
        <select name="days">
            <option value="30">30</option>
            <option value="60">60</option>
            <option value="90">90</option>
        </select>
        <input type="submit" name="submit" value="submit">
    </fieldset>
</form>

<?php 
if(isset($_GET['days']) && isset($_GET['name'])):
    $days = $_GET['days'];
        $name = $_GET['name'];

        $sql = $db->prepare('SELECT tickets.ref AS `ticket_number`
          , concat_ws(' ', people.first_name, people.last_name) AS `username`
          , DATE_FORMAT(tickets.date_created, get_format(DATE, 'EUR')) AS `datetime`
          , left(tickets.subject, 80) AS `subject`
          , sec_to_time(tickets.total_to_first_reply) AS `first_response`
          , sec_to_time(tickets.total_user_waiting) AS `total_wait`
          , mycleanup (left(tickets_messages.message, 250)) AS `message`
        FROM
          tickets
        INNER JOIN organizations
          ON tickets.organization_id = organizations.id
        INNER JOIN people
          ON tickets.person_id = people.id AND people.organization_id = organizations.id
        INNER JOIN tickets_messages
          ON tickets_messages.ticket_id = tickets.id AND tickets_messages.person_id = people.id
        WHERE
          tickets.date_created > date_sub(now(), INTERVAL :days DAY)
          AND organizations.name = :name
        GROUP BY
          tickets.ref
        ORDER BY
         `Date/Time`');

    $sql->bindParam('days', $days);
    $sql->bindParam('name', $name);
    $sql->execute();
    /*
    It looks like your data could be considered tabular, so we can make a table and drop the results in place...
    */
    ?>
    <table cellpadding="0" cellspacing="0">
        <tbody>
            <tr>
                <th>Ticket Number</th>
                <th>User Name</th>
                <th>Date/Time</th>
                <th>Subject</th>
                <th>Time 1st Response</th>
                <th>Total Wait</th>
                <th>Message</th>
            </tr>
            <?php while ($row = $sql->fetch(PDO::FETCH_OBJ)): ?>
            <tr>
                <td><?php echo $row->ticket_number; ?></td>
                <td><?php echo $row->username; ?></td>
                <td><?php echo $row->datetime; ?></td>
                <td><?php echo $row->subject; ?></td>
                <td><?php echo $row->first_response; ?></td>
                <td><?php echo $row->total_wait; ?></td>
                <td><?php echo $row->message; ?></td>
            </tr>
            <?php endwhile; ?>
        </tbody>
     </table>
<?php endif; ?> 
```

当然，所有这些都未经测试，最终是免费的帮助之手，所以我的保证是有限的。它应该为您指明程序补丁的可接受方向。请注意，我更改了您的查询结果名称，因为 - 尽管我实际上并不知道这一点 - 我认为在对象名称中使用空格或字符不是一个好主意。（例如：SELECT name AS`User Name`意味着您以 $row->User Name 的身份访问该对象...看到那里的问题了吗？）另外，您应该按 id 选择组织，而不是 name。由于我不知道该表的结构，因此我只使用您指出的名称。如果要切换到 id，请将组织选择更改为也包括 id 并在组织选择菜单的值部分中回显 id。

除此之外，我想我已经完成了。我需要考虑在某个时候真正拥有自己的生活。

还是祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T00:53:30.910

为此，请学习以下内容：

*   基本的 HTML
*   基本的 PHP
*   [如何使用mysql_query()](http://us2.php.net/mysql_query)遍历 PHP 中的 SQL 查询

一旦你学会了用 mysql_query() 来做这件事，出于安全原因，我建议你也学习如何在 PDO 中做这件事。

# php - Google Maps API - 标记 URL/ID

> ID：12755634
> 
> 赞同：1
> 
> 时间：2012-10-06T00:26:33.410
> 
> 标签：php, mysql, .htaccess, google-maps-api-3

当用户点击我地图上的标记时，我希望它有自己的 URL。

例如，如果用户单击标记 A，则 url 将更改为[http://example.com/m/132](http://example.com/m/132)。理想情况下，它将链接到 SQL 表中的标记 ID。

这个想法是每个标记，因此信息部分，可以共享。因此，用户可以分享他为标记 A 写的评论（每个标记都有一个评论系统）。如果他们共享它，则 URL 将是[http://example.com/m/132/review#1](http://example.com/m/132/review#1)例如。

我做了相当多的研究，但没有提出任何解决方案。

谁能指出我正确的方向？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:31:39.803

我只是将标记单击事件附加到您的每个标记。

```
google.maps.event.addListener(marker, 'click', function() {
                alert('trigger url associated with marker');
            }); 
```

通常，如果您在地图中有很多功能，您可以将标记本身存储在数组中，以便您可以参考它们。我当然会这样做，但除此之外，我还会有另一个数组直接与存储您的 url 的标记相关联。然后，您可以使用 jquery 触发单击隐藏的 html 链接，然后再触发您使用存储在标记 url 数组中的 url 填充该链接。如果您需要更多信息，请告诉我，因为没有代码可看，这有点困难，但我非常确定我提出的方法会奏效。

***这里更新是我会怎么做。：

```
html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
 <script>
  function marker_onClick() {
   $('#myMarkerUrl').click();
  }
</script>
</head>
<body>
 <a id='myMarkerUrl' href='http://www.google.com' onClick="a_onClick()"> aaa </a>
</body>
</html> 
</body>
</html> 
```

然后在 google maps addevent listener 代码部分的 url 中覆盖。

```
google.maps.event.addListener(marker, 'click', function() {
var myMarkersURL = myMarkersURLArray[i];
$("#myMarkerUrl").attr("href", myMarkersURL);                    
$('#myMarkerUrl').click();
                }); 
```

既然你已经有了上面的内容，请记住我没有测试过这个，但通常我会在你的鞋子里做。

# cocoa - 如何在不使用数组控制器的情况下创建实体实例？

> ID：12755635
> 
> 赞同：0
> 
> 时间：2012-10-06T00:27:00.010
> 
> 标签：cocoa, core-data

基本上，这是一个菜鸟问题。原谅。:(

我在书籍或网络上看到的每个示例都使用带有表格的添加删除按钮来创建托管对象的实例。我可以做这个。我已经做到了。但我宁愿不这样做。我更愿意使用 NSForm 并单击“添加”按钮来创建实例并将其添加到数据库中。

我确定这只是按钮本身的一种方法。它从表单中获取值，例如姓名、年龄……等等，然后当单击添加时，它会将其添加到表和数据库中。

我确实找到了一些材料，向我展示了如何“手动”创建 MO 实例，但是，我无法使用该实例设置属性/属性 `newStudent.firstName = [[form cellAtIndex:1] stringValue];`

我需要在那里创建一个类`Student`并设置属性吗？我只是错过了一些愚蠢的事情吗？我的菜鸟直觉告诉我这不是最好的方法。必须有更优雅的触感。

欢迎任何建议。我是 OS 编程的新手，甚至是 Core Data 的新手。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:56:07.417

您可以使用以下方法创建 MO 班学生的对象：

```
Student *newStudent = (Student *)[NSEntityDescription insertNewObjectForEntityForName:@"Student" inManagedObjectContext:self.managedObjectContext]; //assume that you have property NSManagedObjectContext *managedObjectContext; 
```

现在您可以使用：

```
newStudent.firstName = [[form cellAtIndex:1] stringValue]; 
```

# python - 在 NLTK 解析器语法中混合单词和 PoS 标签

> ID：12755638
> 
> 赞同：4
> 
> 时间：2012-10-06T00:27:44.000
> 
> 标签：python, python-2.7, nlp, nltk

我已经使用 NLTK 有一段时间了，现在正在为特殊分块定义自定义解析器语法。我遵循[http://nltk.googlecode.com/svn/trunk/doc/book/ch07.html](http://nltk.googlecode.com/svn/trunk/doc/book/ch07.html)中的描述，但我感兴趣的内容与本章中描述的内容略有不同。例如，在示例 7.10 中，将以下内容用于动词阶段： VP: {<VB.*><NP|PP|CLAUSE>+$} 我只想匹配使用一个特定动词而不是任何动词的句子。类似于：副总裁：{go<NP|PP|CLAUSE>+$}

换句话说，我想匹配实际单词而不是单词的 PoS 标签，并在正则表达式中混合匹配实际单词和 PoS 标签。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T17:26:30.753

不是由 nltk pos-tagger 生成的标准 PoS 标签。

如果您需要为不同的动词做语法，一个有用的技巧可能是预处理标签并将标记附加到所有动词的标签上。因此，您可以使用看起来像 VP: {+$} 的正则表达式字符串

# java - VariableDeclarationFragment 节点 resolveBindind() 在 eclipse/jdt/ast 中返回 null

> ID：12755640
> 
> 赞同：4
> 
> 时间：2012-10-06T00:28:06.560
> 
> 标签：java, eclipse, abstract-syntax-tree, eclipse-jdt

[我正在尝试在这篇文章](http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html)之后尝试 eclipse jdt/ast 。

这是作为输入的java代码：

```
class Hello
{
    int hello()
    {
        int a = 0, b = 3;
        /* hello */
        {
            b = a * 3;
        }
        return a;
    }
    public static void main(String[] args)
    {   
        int z = 0, i = 3;
        /* hello */
        {
            i = z * 3;
        }
    }
} 
```

用ASTView，它显示`VariableDeclarationFragment`有相应的绑定。 ![在此处输入图像描述](../Images/f45bf57bfd656bd4fe305f11ddf69f6b.png)

但是，在这个访问者代码中`VariableDeclarationFragment node`，我总是将 4 个局部变量 (a,b,z,i) 的空值作为`resolveBinding()`返回值。

这有什么问题？我使用日食靛蓝。

![在此处输入图像描述](../Images/ce89168e8f0f5c27cbd42142d8473255.png)

这是获取 AST 的代码

```
private static CompilationUnit createCompilationUnit(String sourceFile) {
    String source = readWithStringBuilder(sourceFile);
    ASTParser parser = ASTParser.newParser(AST.JLS3); 
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    parser.setSource(source.toCharArray()); // set source
    parser.setResolveBindings(true); // we need bindings later on
    return (CompilationUnit) parser.createAST(null /* IProgressMonitor */); // parse
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T00:01:03.107

发生这种情况是因为[setResolveBindings](http://help.eclipse.org/helios/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTParser.html#setResolveBindings%28boolean%29%20%22setResolveBindings%22%20docs)文档中的以下内容：

> 绑定信息是从 Java 模型中获得的。这意味着编译单元必须相对于 Java 模型定位。当源代码来自 setSource(ICompilationUnit) 或 setSource(IClassFile) 时，这会自动发生。**当源由 setSource(char[]) 提供时，必须通过使用 setProject(IJavaProject)**或*setEnvironment(String[], String[], String[], boolean) 和单元名称 setUnitName(字符串）*。请注意，影响文档注释检查的编译器选项也可能影响是否为文档注释中的节点解析任何绑定。

这意味着您可以使用类似的东西（来自您的链接）：

```
IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
IProject project = root.getProject("someJavaProject");
project.open(null /* IProgressMonitor */);

IJavaProject javaProject = JavaCore.create(project); 
```

并添加`setProject`调用：

```
private static CompilationUnit createCompilationUnit(String sourceFile,
        IJavaProject javaProject) {
    String source = readWithStringBuilder(sourceFile);
    ASTParser parser = ASTParser.newParser(AST.JLS3); 
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    parser.setSource(source.toCharArray()); // set source
    parser.setProject(javaProject);
    parser.setResolveBindings(true); // we need bindings later on
    return (CompilationUnit) parser.createAST(null /* IProgressMonitor */); // parse
} 
```

* * *

第二种方法（没有`setProject`）：

```
private static CompilationUnit createCompilationUnit(String sourceFile,
        String unitName) {
    String source = readWithStringBuilder(sourceFile);
    ASTParser parser = ASTParser.newParser(AST.JLS3); 
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    parser.setSource(source.toCharArray()); // set source
    String[] classpathEntries = ...;
    String[] sourcepathEntries = ...;
    parser.setEnvironment(classpathEntries, sourcepathEntries, null, true);
    parser.setUnitName(unitName);
    parser.setResolveBindings(true);
    // optional
    // parser.setBindingsRecovery(true);
    return (CompilationUnit) parser.createAST(null /* IProgressMonitor */); // parse
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T23:52:33.593

这是否意味着我必须在当前项目中导入要运行 ASTParser 的源代码？

现在我正在使用与 UIMA 框架结合的 ASTParser。在那个框架中，我只能在 char[] 中获得源代码。不知道如何获取它们对应的 IJavaProject 和 UnitName，如果我将 .setSource() 设置为 char[]，则需要这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T20:51:11.893

我尝试使用以下代码解决此问题

```
protected static CompilationUnit parseStatements(String source) {
    ASTParser parser = ASTParser.newParser(AST.JLS8);
       parser.setSource(source.toCharArray());
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    parser.setResolveBindings(true);

    parser.setEnvironment( // apply classpath
            new String[] { "//home//user//Projects//SmartCopy//ASTParser_Test//bin" }, //
            null, null, true);
    parser.setUnitName("any_name");
    final CompilationUnit cu = (CompilationUnit) parser.createAST(null);
    return cu;

}

static void newcheckVariableDeclaration(){
    String source ="package javaproject;" // package for all classes
            + "class Dummy {"
            + "int j;" //
            + "   public void add(){"
            + "int x=0,y=0;"
            + "j=x+y;\n" //
            + "   }" //
            + "}"; 

    final CompilationUnit root = parseStatements(source);
    root.accept(new ASTVisitor() {
        public boolean visit(SimpleName node) {
            System.out.println(node.toString());
            if(node.resolveBinding() == null){
                System.out.println(node.toString()+" is not declared");
            }
            else{
                System.out.println(node.toString() + " is declared");
            }
            System.out.println();
            return true;
        }
    }); 
```

# r - 在 R 中直观地检查数据

> ID：12755642
> 
> 赞同：5
> 
> 时间：2012-10-06T00:28:19.170
> 
> 标签：r

首先我想指出我是一个非常直观的人，所以我想在将其加载到 R 时查看单元格中的时间序列数据。我知道我可以使用 Fix(data) 命令来可视化检查数据在单元格中，但如果有一个数据向量。

如何让 R 在单元格中显示单个时间序列数据向量？每次我使用修复（单变量）时，它都会将其显示为 C（.....）。

如何以单元格视觉格式在 R 中显示两个或多个数据系列？我不能说修复（变量1，变量2）

帮助！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T00:39:27.150

要查看单个向量，您可以使用`View()`“在类似矩阵的 R 对象上调用电子表格样式的数据查看器”。

```
X <- 1:10
View(X) 
```

要并排查看两个同样长的向量，只需将它们放在一个 data.frame 中，然后使用、或进行查看*：*`View()``fix()``edit()`

```
X <- 1:10
Y <- rnorm(10)
XY <- data.frame(X, Y)
fix(XY)   ## or View(XY) or edit(XY) 
```

# jquery - 在选择旁边查找对象

> ID：12755644
> 
> 赞同：1
> 
> 时间：2012-10-06T00:28:21.973
> 
> 标签：jquery, jquery-mobile

我需要找到选择旁边的对象。这些对象是动态创建的，所以我需要返回元素的类型。在示例中，标签位于选择旁边，但它可能是输入、img 等。关闭滑块事件工作正常，但我无法确定选择器。

我努力了：

```
$( "#popupPadded" ).bind({
    popupafterclose: function (event, ui) {
        $(".flip_mini").val('off').slider('refresh');

        var $label = $(this).next();
        alert($label.text());

    }
}); 
```

这里是ul...

```
<ul data-role="listview" data-inset="true" >
        <li>
        <select class="flip_mini" id="flip-mini" data-role="slider" data-mini="true">
            <option value="off">close</option>
            <option value="on">open</option>
        </select>
        <label>First:</label>
        </li>

        <li>
        <select class="flip_mini" data-role="slider" data-mini="true">
            <option value="off">close</option>
            <option value="on">open</option>
        </select>
        <label>Last:</label>
        </li>

    </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:30:32.657

`Label`所以`next`使用`select with class flip_mini`它而不是使用 $(this) ，它具有调用方法的对象。

**[现场演示](http://jsfiddle.net/MJ4bW/)**

```
var $label = $(".flip_mini").next(); 
```

由于您有两个选择，因此您可以使用这样的索引获得所需的一个

**[现场演示](http://jsfiddle.net/MJ4bW/1/)**

```
var $label1 = $(".flip_mini").eq(0).next();

var $label2 = $(".flip_mini").eq(1).next(); 
```

# javascript - jQuery数据表使用实时函数多次调用事件处理程序

> ID：12755646
> 
> 赞同：2
> 
> 时间：2012-10-06T00:28:25.940
> 
> 标签：javascript, jquery, datatables, event-handling, jquery-events

我正在使用 jQuery 数据表来显示一些数据。每行都有一个编辑按钮，我用 注册了一个单击处理程序`live()`，以便它与分页一起使用。我是按班级做的，因为我必须为每一行做。类似于： [具有实时点击事件功能的数据表](https://stackoverflow.com/questions/6808446/datatables-with-live-click-event-function)

这很好用，但是当用户再次进行搜索并且我执行 ajax 请求以获取一组新结果时，就会出现问题。

我只是将 dom 中的现有表替换为新表。现在，当我单击第 1 行时，它会弹出第 1 行的编辑对话框。我单击第 2 行，它会弹出第 1 行的编辑对话框。我再次单击第 2 行，它会弹出第 2 行的编辑对话框。

然后我一次又一次地点击第 3 行。它在显示第 3 行的对话框之前三次弹出第 2 行的编辑对话框。

这不断增加。我不明白如果我用 jQuery 替换 div 中的整个 dataTable 为什么要注册多个事件？

万一这很重要，我在我的对话框初始化程序中将 autoopen 设置为 false 并且我明确地打开和关闭它。

**编辑（更多细节）**：

我很难创建一个示例......但是更多细节......我发现由于我使用`live()`函数来注册跨分页的调用，因此存在点击注册机制。因此，当我用相同的结构替换表时，由于第一次调用`live()`. 但是我默认情况下会再次调用`live()`，现在注册了两个点击事件。然后当我再次替换时，注册了三个事件点击。`click()`在检查单击事件是否已注册后，我尝试通过使用 jQuery 注册事件来克服这个问题。帮助处理多个事件部分，但不跨数据表页面注册事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:56:54.470

live和ajax有这个问题。我最终做的是在收到 ajax 响应后重新注册事件点击。如果没有示例，很难推荐解决方案，但想法是使用绑定/单击（用于默认/初始显示）在页面加载时附加单击事件，然后在成功的 ajax 响应时再次重新注册单击事件。当然，将事件绑定代码放在函数等可重用组件中，这样就可以轻松调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:04:13.897

修复了问题

问题是我不能只注册数据表行中元素的点击事件。这些事件不会跨数据表页面注册。

使用 live() 注册事件有帮助，在页面更改时，事件将自动注册。

但是对于我每次搜索都会导致另一个问题的用例，我会用新的数据表替换数据表。新的数据表将再次注册这些事件。所以这意味着要为同一个元素调用多个处理程序。因为 live() 函数在同一个类上被调用了两次，并且 jquery 不应该比较两个回调处理程序是否相同。

我转向不同的方向，并尝试使用页面事件（[http://datatables.net/docs/DataTables/1.9.beta.1/ #page_details](http://datatables.net/docs/DataTables/1.9.beta.1/#page_details)）。这没有帮助，因为在使用新页面上的事件刷新内容之前调用了页面更改事件。

我还尝试使用 click() 而不是 live() 并仅在尚未使用此处给出的示例注册时才绑定 click [https://stackoverflow.com/a/6361507/161628](https://stackoverflow.com/a/6361507/161628)。这种技术适用于表替换，但不适用于多个页面。

最终我找到了 .die() 函数。我在调用 live() 函数之前调用它。对 live() 的调用确保在页面更改时注册事件处理程序，而对 die() 的调用确保我取消注册之前在该类的元素上生成的 live() 事件。我避免以这种方式多次调用 live() 函数。

# haskell - 单子 m => a -> [a -> ma] -> ma

> ID：12755655
> 
> 赞同：13
> 
> 时间：2012-10-06T00:29:35.517
> 
> 标签：haskell

我是 Haskell 的新手，我想知道是否有比 Hoogle 更好的方法来确定一个库功能是否重复？

举个例子：我有许多`f :: Monad a => a -> m a`想要链接在一起的功能，比如

```
f1234 x = (return x) >>= f1 >>= f2 >>= f3 >>= f4 
```

但我宁愿写

```
chain :: Monad m => a -> [a -> m a] -> m a
chain = foldl (>>=) <$> return
f1234 = (flip chain) [f1, f2, f3, f4] 
```

看起来很基本，基本库是否提供了相当于`chain`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-06T00:43:01.137

Hoogle 对此很有用，而且绝对是查找具有相同类型的函数的正确工具。

鉴于它很简单，而且它没有出现在任何常见的地方，你不妨自己编写它，就像从某个不起眼的模块中导入它一样，部分原因是你不会导入一大堆其他东西。

*（另外：有些包似乎无法从 hoogle 中搜索到，因此，如果您知道您所追求的功能、模块或包名称而 hoogle 不知道，请使用 hayoo。）*

我想插

```
(>=>) :: Monad m => (a -> m b) -> (b -> m c) -> (a -> m c) 
```

从`Control.Monad`. 这是我一直想要的合成运算符，直到我找到它为止。`>>=`这是一种比我认为更自然的方式来处理 monad 。

你甚至可以直接使用它，它是如此清晰：

```
f1234 = f1 >=> f2 >=> f3 >=> f4 
```

如果您 hoogle for `(a -> m a) -> (a -> m a) -> (a -> m a)`，它就会显示出来，因此如果您正在寻找结合了某物列表的东西，那么未来的策略是搜索一个结合了两个功能并使用其中一个功能的`fold`功能。

因此

```
chain' :: Monad m => [a -> m a] -> a -> m a
chain' = foldr (>=>) return

f1234 = chain' [f1,f2,f3,f4] 
```

或者

```
chain'' :: Monad m => a -> [a -> m a] -> m a
chain'' = flip $ foldr (>=>) return 
```

如果你愿意，但无论如何你的都很好。

# python - 3D绘图线性回归pylab

> ID：12755657
> 
> 赞同：1
> 
> 时间：2012-10-06T00:29:54.287
> 
> 标签：python, 3d, matplotlib

我需要绘制具有 2 个特征的线性回归问题。所以我认为在这种情况下，我需要一个超平面而不是一条线来分离我的数据。我已经为一个功能做到了这一点，但对这种情况没有任何想法。

这是我为具有 300 个样本和 1 个特征的数据集绘制的图。

![在此处输入图像描述](../Images/ed1214cffaf9060ba95982134191f267.png)

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:06:47.533

检查 numpy [meshgrid](http://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html)和[plot_surface](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html)方法

尝试运行此示例代码并将其更改为您的喜好

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np

fig=plt.figure()
ax = Axes3D(fig)

x=[1,2,3,4,5]
y=[1,3,5,6,8]
z=[3,3,5,6,7]
x, y= np.meshgrid(x,y)

ax.plot_surface(x,y,z)

plt.show() 
```

我希望它有帮助

# c# - RootController 子视图不会全屏显示

> ID：12755659
> 
> 赞同：1
> 
> 时间：2012-10-06T00:30:13.717
> 
> 标签：c#, .net, ios, xamarin.ios

我有一个在运行时构建和更新的自定义启动画面。我们有一个添加子视图的 RootController。这个子视图包含一个 UIImageView 和标签。UIImageView 和它的父级都设置为缩放并设置为 1024x768。问题是子视图和图像似乎显示为 768x1024，因此图像的底部被切断，子视图的宽度不会占据整个屏幕。

我们的代码要点如下

```
window = new UIWindow (UIScreen.MainScreen.Bounds);
viewController = new RootViewController ();
window.RootViewController = viewController;
window.MakeKeyAndVisible (); 
```

然后在过渡期间，我们使用指向根控制器的公共属性来添加包含图像等的子视图......

```
RootViewController.View.AddSubview(controllers[view].View); 
```

黑匣子只是涵盖了一些我不想向世界展示的信息。灰色区域是根控制器视图中未被子视图覆盖的部分。

![在此处输入图像描述](../Images/0c970c85e12c2ae1bcdf38cb0ec96d7b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:37:49.707

我找到了解决方案。无论出于何种原因，以下陈述导致了我的问题。控制器[视图].View.Frame = new System.Drawing.RectangleF(0,0,1024,768); 在 AddSubview 语句之前调用。不知道为什么会这样。

# java - 在 lwjgl 中制作立方体贴图

> ID：12755661
> 
> 赞同：1
> 
> 时间：2012-10-06T00:30:54.953
> 
> 标签：java, png, textures, lwjgl

[这是我制作立方体贴图](http://en.wikipedia.org/wiki/Cube_mapping)的尝试。

```
glDisable(GL_TEXTURE_2D);
glEnable(GL_TEXTURE_CUBE_MAP);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
PNGDecoder pngDecoder = new PNGDecoder(ResourceLoader.getResourceAsStream("C:/desert_skymap_sample.png"));
ByteBuffer temp = ByteBuffer.allocateDirect(4*pngDecoder.getWidth() * pngDecoder.getHeight());
pngDecoder.decode(temp, pngDecoder.getWidth()*4, PNGDecoder.Format.RGBA);
temp.flip();
glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X,0,GL_RGBA,pngDecoder.getWidth(), pngDecoder.getHeight(),0,GL_RGBA,GL_UNSIGNED_BYTE,temp);
glTexImage2D(GL_TEXTURE_CUBE_MAP_NEGATIVE_X,0,GL_RGBA,pngDecoder.getWidth(), pngDecoder.getHeight(),0,GL_RGBA,GL_UNSIGNED_BYTE,temp);
glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_Y,0,GL_RGBA,pngDecoder.getWidth(), pngDecoder.getHeight(),0,GL_RGBA,GL_UNSIGNED_BYTE,temp);
glTexImage2D(GL_TEXTURE_CUBE_MAP_NEGATIVE_Y,0,GL_RGBA,pngDecoder.getWidth(), pngDecoder.getHeight(),0,GL_RGBA,GL_UNSIGNED_BYTE,temp);
glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_Z,0,GL_RGBA,pngDecoder.getWidth(), pngDecoder.getHeight(),0,GL_RGBA,GL_UNSIGNED_BYTE,temp);
glTexImage2D(GL_TEXTURE_CUBE_MAP_NEGATIVE_Z,0,GL_RGBA,pngDecoder.getWidth(), pngDecoder.getHeight(),0,GL_RGBA,GL_UNSIGNED_BYTE,temp);

    gluLookAt(0,0,0, xtrans+xpos,ytrans+walkbias,ztrans+zpos, 0,1,0);

    glPushAttrib(GL_ENABLE_BIT);
    glDisable(GL_DEPTH_TEST);

    glColor4f(1,1,1,1);

    glBindTexture(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_CUBE_MAP_POSITIVE_X);
    glBegin(GL_QUADS);
      glTexCoord2f(0, 0);
      glVertex3f(1f, -1f, -1f);
      glTexCoord2f(1, 0);
      glVertex3f(-1f, -1f, -1f);
      glTexCoord2f(1, 1);
      glVertex3f(-1f, 1f, -1f);
      glTexCoord2f(0, 1);
      glVertex3f(1f, 1f, -1f);
    glEnd();

    glBindTexture(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_CUBE_MAP_NEGETIVE_X);
    glBegin(GL_QUADS);
        glTexCoord2f(0, 0);
        glVertex3f(1f, -1f, 1f);
        glTexCoord2f(1, 0);
        glVertex3f(1f, -1f, -1f);
        glTexCoord2f(1, 1);
        glVertex3f(1f, 1f, -1f);
        glTexCoord2f(0, 1);
        glVertex3f(1f, 1f, 1f);
    glEnd(); 
```

我正在使用 TWL 的 PngDecoder。问题是我不知道如何获取纹理 id/retreve TexImage2D 或者我是否正确执行。

如何在 LWJGL 中制作立方体贴图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:52:01.857

我想你会想要`gluLookAt`在一开始的某个地方打电话来正确设置相机转换。

看一下：

*   [http://sidvind.com/wiki/Skybox_tutorial](http://sidvind.com/wiki/Skybox_tutorial)

上面示例中的`camera->x, camera->y, camera->z`元素应替换为描述相机正在看的方向的向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:15:38.660

您需要在代码中添加一些内容才能使其正常工作：

1.  正如 mikera 提到的，您需要使用 glLookAt 设置“相机”。
2.  您还需要定义几何图形来渲染纹理。最简单的方法是在二维空间中围绕相机定义一个框。不要忘记设置面部法线。

这里有相当广泛的关于使用 opengl 进行硬件立方体映射的文章（它是一个多供应商扩展）：[http ://www.nvidia.com/object/cube_map_ogl_tutorial.html](http://www.nvidia.com/object/cube_map_ogl_tutorial.html)

# ios - 推送新视图控制器 (tuneup.js) 后 UIAutomation 测试失败

> ID：12755662
> 
> 赞同：1
> 
> 时间：2012-10-06T00:31:02.500
> 
> 标签：ios, ui-automation, ios-ui-automation

我刚开始使用 tuneup.js 尝试 UIAutomation。我可以很好地测试我的第一个窗口，但第二个窗口失败 - 我的应用程序仍在查看第一个窗口并看到例如“使用 Facebook 登录”按钮。我试过增加延迟，但这似乎没有帮助。知道我做错了什么吗？

```
#import "tuneup.js"

target = UIATarget.localTarget();
application = target.frontMostApp();

test("Test first-run view controller", function(app, target) {
 assertWindow({
              buttons : [
                         { name : "Sign in with Facebook"},
                         { name : "Create account"},
                         { name : "Login"},
                         { name : "Try"}
              ], 
              onPass: function(window) {

                var createAccountButton = window.buttons()["Create account"]
                createAccountButton.tap();
              }

 });

});

test("Test Sign-in screen", function(app, target) {
 assertWindow({
    buttons : [
              { name : "Sign up"}
        ]
 });

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:45:40.650

啊，我发现了怎么回事。我没有意识到，但我的登录屏幕有一个包含其按钮的滚动视图。这段代码运行良好：

```
test("Test the account creation", function(app, target) {
 assertWindow({
              scrollViews: [
                    { buttons : [
                            {name :"Sign up"},
                            {name : "Terms and Conditions"}
                            ]

              }
                            ],
              onPass: function(window) {
                var signUpButton = window.scrollViews()[0].buttons()["Sign up"];
                signUpButton.tap()
              }
 });

 }); 
```

# sql-server - 如何使用动态 SQL 交换同一列中的两个值？

> ID：12755667
> 
> 赞同：1
> 
> 时间：2012-10-06T00:32:33.317
> 
> 标签：sql-server, sql-server-2008, stored-procedures, swap, dynamic-sql

我正在使用 SQL Server 2008。

我有很多表，每个表都包含**ID**字段和**TheOrder**字段。

我想创建一个**存储过程**，它可以交换**TheOrder**字段中两条记录的值。

我通过**ASP.NET**代码获取这些记录的**ID** ，并将它们传递给存储过程。

 **但是因为我想在很多表上执行这个**存储过程**，我必须使用动态 SQL 并从**ASP.NET**代码中传递表名。

我的**存储过程**代码是：

```
ALTER PROCEDURE [dbo].[SwapOrders]
    @TblName nvarchar(20)
    , @ID1 int
    , @ID2 int
AS
BEGIN
    DECLARE @ID1Str nvarchar(5)
    SET @ID1Str = CAST(@ID1 AS nvarchar)
    DECLARE @ID2Str nvarchar(5)
    SET @ID2Str = CAST(@ID2 AS nvarchar)
    DECLARE @Order1 nvarchar(5)
    DECLARE @Order2 nvarchar(5)
    DECLARE @Cmd nvarchar(100)
    /* Get orders */
    SET @Cmd = 'SELECT @Order1 = [TheOrder] FROM ' + @TblName + ' WHERE ID = ' + @ID1Str
    EXECUTE sp_executesql @Cmd, "@Order1 nvarchar(5) OUTPUT", @Order1 = [TheOrder]
    SET @Cmd = 'SELECT @Order2 = [TheOrder] FROM ' + @TblName + ' WHERE ID = ' + @ID2Str
    EXECUTE sp_executesql @Cmd, "@Order2 nvarchar(5) OUTPUT", @Order2 = [TheOrder]
    /* Update orders */
    SET @Cmd = 'UPDATE ' + @TblName + ' SET TheOrder = @Order2 WHERE ID = ' + @ID1Str
    EXECUTE sp_executesql @Cmd, "@Order2 nvarchar(5)", @Order2
    SET @Cmd = 'UPDATE ' + @TblName + ' SET TheOrder = @Order1 WHERE ID = ' + @ID2Str
    EXECUTE sp_executesql @Cmd, "@Order1 nvarchar(5)", @Order1
END
GO 
```

**当我测试这段代码时， TheOrder**字段的两个值变为**NULL**。

问题是什么？

非常感谢您的帮助，我很抱歉提出很长的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:58:35.147

[看到这个工作演示](http://sqlfiddle.com/#!6/5c763/2/1)

代码如下

```
CREATE PROCEDURE [dbo].[SwapOrders]
  @TblName nvarchar(20),
  @ID1 int,
  @ID2 int
AS
set nocount on
DECLARE @Cmd nvarchar(max) =
 'set nocount on;
  update t
  set TheOrder = u.TheOrder
  from ' + quotename(@tblname) + 't
  join ' + quotename(@tblname) + 'u on
  u.id=case when t.id=@id1 then @id2 else @id1 end
  where t.id in (@id1,@id2);';
exec sp_executesql @cmd, N'@id1 int,@id2 int', @id1, @id2;
GO 
```**

# ruby-on-rails - 懒惰的高图表格式

> ID：12755669
> 
> 赞同：0
> 
> 时间：2012-10-06T00:33:42.837
> 
> 标签：ruby-on-rails, highcharts, lazy-high-charts

如何摆脱图表底部的 y 轴范围？

[http://i.imgur.com/z2pBp.png](http://i.imgur.com/z2pBp.png)

我试过改变 minRange 和 title 但它没有做任何事情

```
 f.options[:chart][:defaultSeriesType] = "column"
  f.options[:title][:text] = "Book Catalog"
  f.options[:yAxis][:minRange] = 0;
  f.options[:yAxis][:title] = ""; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:42:32.877

我认为你需要这样的东西：

```
 f.options[:xAxis] = {
    :title => { :text => nil },
    :labels => { :enabled => false }
 } 
```

至于我不知道 RoR，我创建了一个 JS 演示：http: [//jsfiddle.net/Srv8Z/](http://jsfiddle.net/Srv8Z/)

# ruby - 如何使用 ruby /mechanize 在表单中选择下拉列表的值

> ID：12755670
> 
> 赞同：4
> 
> 时间：2012-10-06T00:33:52.150
> 
> 标签：ruby, mechanize

如何在此下拉列表中选择第二个选项？

```
<select name="size" onchange="...js...">
  <option value="OPTION_CHOOSE">Please Select an Option</option>                            
  <option value="123">ABC</option>
  <option value="456">DFG</option>
  <option value="789">HIJ</option>
</select> 
```

# 红宝石

```
require 'rubygems'
require 'mechanize'

url = "http://...."
agent = Mechanize.new
page = agent.get(url)

form = agent.page.forms.first

*select drop down* 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T02:39:16.003

```
form.field_with(:name => 'size').options[1].click 
```

# c# - 如何在 Windows8 应用程序中刷新页面和内容

> ID：12755676
> 
> 赞同：4
> 
> 时间：2012-10-06T00:34:41.480
> 
> 标签：c#, windows-8, page-refresh

所以我有一个 Windows 8 应用程序，其中我将一些数据设置为 defaultViewModel。我的问题是，创建页面后，我向数据中添加了一些内容，如何刷新页面并显示所做的更改？

```
 protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {            
        //inital load
        var DataGroups = SampleDataSource.GetGroups((String)navigationParameter);
        this.DefaultViewModel["Items"] = DataGroups;           
    }
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        //when the page is navigated back to after making changes to sampledatasource
        base.OnNavigatedTo(e);
        this.DefaultViewModel.Clear();
        var DataGroups = SampleDataSource.GetGroups("AllGroups");
        this.DefaultViewModel["Items"] = DataGroups;           
    } 
```

直到下次我打开应用程序并重新加载页面时，我所做的更改才会反映出来。这是视图模型：

```
 protected IObservableMap<String, Object> DefaultViewModel
    {
        get
        {
            return this.GetValue(DefaultViewModelProperty) as IObservableMap<String, Object>;
        }

        set
        {
            this.SetValue(DefaultViewModelProperty, value);
        }
    } 
```

这是我要更新的列表视图：

```
<ListView
    x:Name="itemListView"
    AutomationProperties.AutomationId="ItemsListView"
    AutomationProperties.Name="Items"
    TabIndex="1"
    Grid.Row="1"
    Visibility="Collapsed"
    Margin="0,-10,0,0"
    Padding="10,0,0,60"
    ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
    ItemTemplate="{StaticResource Standard80ItemTemplate}"
    SelectionMode="None"
    IsSwipeEnabled="false"
    IsItemClickEnabled="True"
    ItemClick="ItemView_ItemClick"/> 
```

绑定到这个：

```
<CollectionViewSource
    x:Name="itemsViewSource"
    Source="{Binding Items}"
    d:Source="{Binding AllGroups[0].Items, Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}"/> 
```

msdn 功能：

```
public void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this,
                    new PropertyChangedEventArgs(propertyName));
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T07:47:59.250

如果您使用模板（空白应用模板除外），请查看通常在 Windows 8 应用商店项目的 Common 文件夹中创建的 BindableBase 类代码。如果您的起点是一个空白应用模板，您可以创建一个新的 BasicPage，Visual Studio 会询问您是否要包含公用文件。

基本上，这个想法是这样的：

1.  您实现 INotifyPropertyChanged 接口
2.  创建自定义 PropertyChanged 事件
3.  在为属性设置新值之后，调用 this.OnPropertyChanged(propertyName) 它将为该属性发出更改事件。然后将通知控件该属性已更改，并将使用新值自动更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T22:04:19.077

这是我的方法：

```
public bool Reload()
{
    if (!this.Frame.BackStack.Any())
        return false;
    var current = this.Frame.BackStack.First();
    this.Frame.BackStack.Remove(current);
    return this.Frame.Navigate(current.SourcePageType, current.Parameter);
} 
```

祝你好运！

# mercurial - hg 为 subrepos 服务

> ID：12755678
> 
> 赞同：3
> 
> 时间：2012-10-06T00:34:56.923
> 
> 标签：mercurial, webserver, subrepos

我有一个带有 subrepos 的 repo，并且想做`hg serve`.

在另一台电脑上，我试过了

```
hg clone http://address:8000/ new_repo 
```

场景 1：当我的原始仓库在 .hgsub 中有以下形式的行时：

```
sub_repo_1 = sub_repo_1
sub_repo_2 = sub_repo_2 
```

我在另一台电脑上：

```
Requesting all changes
adding changesets
adding manifests
...
updating to branch default
abort: HTTP Error 404: Not Found 
```

（发球计算机只是在那之后等待）

（并且只有 new_repo 中的 sub_repo_1。我尝试过更新，拉...有错误）

我试图实际单独克隆 sub_repo_2，并不断收到错误 404（发送和接收计算机上的机器人）。

场景 2：当我将 .hgsub 中的行替换为

```
sub_repo_1 = http://address/sub_repo_1
sub_repo_2 = http://address/sub_repo_2 
```

hg serve 无法为 subrepos 提供服务吗？或者 - 我做错了什么？

注意：我每次都更新了 subrepos 中的 hgrc 文件以匹配 .hgsub 中的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:47:29.590

您可以使用 TortoiseHG 为具有子存储库的存储库托管一个 mercurial 服务器。TortoiseHG 实际上使用它创建的不同 web.config 文件调用 hg serve 。

要使用 TortoiseHG 托管，请转到 TortoiseHG Workbench 中的 Repository -> Web Server...。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T22:06:11.913

`hg serve`与子回购一起使用。问题是它`hg serve`不会自动识别您的回购包含子回购。

假设有以下文件夹结构

```
- repo
  - subrepo1
    + file1.txt
  - subrepo2
    + file2.txt
    + file3.txt 
```

其中*repo*是主存储库，*subrepo1*和*subrepo2*是*repo*的两个子存储库：

1.  *在repo*中创建一个 Web 配置文件。**不要将其添加**到版本控制中。我将其命名为 .hgwebconf，您可以根据需要更改名称。
2.  在此文件中配置子存储库的所有路径。添加以下内容：

    ```
    [paths]
    /repo = ./* #all repos will be known by the url /repo
    /repo/subrepo1 = subrepo1 #adding subrepo1 to be available in hg serve
    /repo/subrepo2 = subrepo2 #similar to above 
    ```

3.  执行`hg serve`using `--web-conf`property 以使用为路径创建的 Web 配置文件。这是一个例子：

    ```
    hg serve --web-conf .hgwebconf <other configurations you use ...> 
    ```

就是这样。现在您可以通过 http 访问您的服务器，克隆您的存储库或任何子存储库并使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-12T23:32:25.817

我`HgService`用来托管存储库，这是我发现工作的解决方案。

如果您正在使用`HgService`，则需要编辑`web.config`文件并重新启动服务。

如果`[paths]`是`web.config`这样设置的：

```
[paths]
remote_repo = "path/to/remote_repo" 
```

将双星 ( `**`) 添加到路径中，如下所示：

```
[paths]
remote_repo = "path/to/remote_repo/**" 
```

# c++ - 在另一个文件中使用函数时无法解析的外部符号

> ID：12755679
> 
> 赞同：1
> 
> 时间：2012-10-06T00:35:00.367
> 
> 标签：c++, visual-c++

我有一个头文件定义为：

```
A.h
class A
{
  void f1();
  void f2();
};

A.cpp
  void A::f1(){}
  void A::f2(){} 
```

现在我正在定义要使用此类函数的其他应用程序类，所以我创建了，

```
B.cpp
#include A.h

int main()
{
  A a1;
  a1.f1(); //linker error
} 
```

但是当我调用这个函数时，它会给出链接错误，比如未解析的外部符号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:41:00.980

首先，您应该复制并粘贴*确切的*错误，而不是说它是“类似”某某错误。您可以删除我们需要回答您的问题的重要细节。

在这种特殊情况下，解决方案相当简单。您需要在 Visual C++ 中创建一个项目并将所有 .cpp 文件添加到该项目中。当你编译时，链接器应该能够找到它需要的一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T00:48:45.837

链接器错误和编译器错误是非常不同的事情。#included 文件中的这些函数声明所做的只是告诉*编译器*如何调用这些函数。函数在别处定义。编译器不需要知道定义就知道如何调用它们。将所有这些不同的部分放在一起是*链接器*的工作。如果您不向链接器提供所需的部分，您将无法获得可执行文件。相反，您将收到链接器错误。

您需要编译 A.cpp 和 B.cpp，然后将它们提供给您的链接器。仅仅因为编译器和链接器经常被同一个工具调用并不意味着它们是同一个东西。他们不是。他们有完全不同的工作。

# sql-server-2008 - 批量加载数据转换错误（溢出）

> ID：12755680
> 
> 赞同：1
> 
> 时间：2012-10-06T00:35:13.860
> 
> 标签：sql-server-2008, tsql, bulkinsert, bcp

我一直在绞尽脑汁试图找出这个错误。我只是不明白。

SQL Server 数据库错误：第 1 行第 1 列 (CUR_CLM_UNIQ_ID) 的批量加载数据转换错误（溢出）。

这是我的代码：

```
SET DATEFORMAT ymd;
go
BULK INSERT 
aco.PartAClaimsHeader
FROM 'C:\Users\Derek\Documents\files\P.A1000.ACO.CCLF1.D120730.T1251070'
WITH
(
 --DATAFILETYPE ='CHAR',
  FORMATFILE='C:\Users\Derek\Documents\files\HeaderFileFormat.xml',
  --ERRORFILE='C:\Users\Derek\Documents\files\ERRORS.TXT',
  ROWTERMINATOR='\r\n',
  CODEPAGE='RAW',
 -- KEEPNULLS,
  TABLOCK
  )
  GO 
```

是固定宽度。这是一些示例数据

```
00190000777340000000000000109061100000924A 102012-01-182012-02-16323569   ~         0000000003522.44 12010000~1154529360~         1518945500~         
00158077735600000000000000100256140000646D 602011-07-222011-07-241141401  78650     0000000009238.12 12010247~1992759419159875707215987570721598757072
0022980857396000000000000010S191274000037A 602012-06-042012-06-08112988   2988      0000000002255.52 12010885~1760429880~         1831184316~ 
```

这是我的格式文件

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<RECORD>
    <FIELD ID="1" xsi:type="CharFixed" LENGTH="13"/>
    <FIELD ID="2" xsi:type="CharFixed" LENGTH="13"/>
    <FIELD ID="3" xsi:type="CharFixed" LENGTH="6"/>
    <FIELD ID="4" xsi:type="CharFixed" LENGTH="11"/>
    <FIELD ID="5" xsi:type="CharFixed" LENGTH="2"/>
    <FIELD ID="6" xsi:type="CharFixed" LENGTH="10"/>
    <FIELD ID="7" xsi:type="CharFixed" LENGTH="10"/>
    <FIELD ID="8" xsi:type="CharFixed" LENGTH="1"/>
    <FIELD ID="9" xsi:type="CharFixed" LENGTH="1"/>
    <FIELD ID="10" xsi:type="CharFixed" LENGTH="7"/>
    <FIELD ID="11" xsi:type="CharFixed" LENGTH="7"/>
    <FIELD ID="12" xsi:type="CharFixed" LENGTH="2"/>
    <FIELD ID="13" xsi:type="CharFixed" LENGTH="17"/>
    <FIELD ID="14" xsi:type="CharFixed" LENGTH="1"/>
    <FIELD ID="15" xsi:type="CharFixed" LENGTH="2"/>
    <FIELD ID="16" xsi:type="CharFixed" LENGTH="2"/>
    <FIELD ID="17" xsi:type="CharFixed" LENGTH="4"/>  
    <FIELD ID="18" xsi:type="CharFixed" LENGTH="1"/>
    <FIELD ID="19" xsi:type="CharFixed" LENGTH="10"/>
    <FIELD ID="20" xsi:type="CharFixed" LENGTH="10"/>
    <FIELD ID="21" xsi:type="CharFixed" LENGTH="10"/>
    <FIELD ID="22" xsi:type="CharFixed" LENGTH="10"/>
    <FIELD ID="23" xsi:type="CharTerm" TERMINATOR="\r\n"/>
</RECORD>
<ROW>
    <COLUMN SOURCE="1" NAME="c1" xsi:type="SQLINT"/>
    <COLUMN SOURCE="2" NAME="c2" xsi:type="SQLINT"/>
    <COLUMN SOURCE="3" NAME="c3" xsi:type="SQLVARYCHAR"/>
    <COLUMN SOURCE="4" NAME="c4" xsi:type="SQLVARYCHAR" />
    <COLUMN SOURCE="5" NAME="c5" xsi:type="SQLTINYINT" />
    <COLUMN SOURCE="6" NAME="c6" xsi:type="SQLDATE"/>
    <COLUMN SOURCE="7" NAME="c7" xsi:type="SQLDATE"/>
    <COLUMN SOURCE="8" NAME="c8" xsi:type="SQLCHAR" LENGTH="1"/>
    <COLUMN SOURCE="9" NAME="c9" xsi:type="SQLCHAR" LENGTH="1" />
    <COLUMN SOURCE="10" NAME="c10" xsi:type="SQLVARYCHAR" />
    <COLUMN SOURCE="11" NAME="c11" xsi:type="SQLVARYCHAR"/>
    <COLUMN SOURCE="12" NAME="c12" xsi:type="SQLCHAR" LENGTH="2"/>
    <COLUMN SOURCE="13" NAME="c13" xsi:type="SQLDECIMAL" SCALE="2" PRECISION="17"/>
    <COLUMN SOURCE="14" NAME="c14" xsi:type="SQLCHAR" LENGTH="1" />
    <COLUMN SOURCE="15" NAME="c15" xsi:type="SQLCHAR" LENGTH="2" />
    <COLUMN SOURCE="16" NAME="c16" xsi:type="SQLCHAR" LENGTH="2"/>
    <COLUMN SOURCE="17" NAME="c17" xsi:type="SQLVARYCHAR"/>
    <COLUMN SOURCE="18" NAME="c18" xsi:type="SQLCHAR" LENGTH="1"/>
    <COLUMN SOURCE="19" NAME="c19" xsi:type="SQLCHAR"  LENGTH="10"/>
    <COLUMN SOURCE="20" NAME="c20" xsi:type="SQLCHAR" LENGTH="10" />        
    <COLUMN SOURCE="21" NAME="c21" xsi:type="SQLCHAR"  LENGTH="10"/>        
    <COLUMN SOURCE="22" NAME="c22" xsi:type="SQLCHAR"  LENGTH="10"/>        
    <COLUMN SOURCE="23" NAME="c23" xsi:type="SQLCHAR" />                
</ROW>
</BCPFORMAT> 
```

**更新**：我在 db 和格式化文件中将前 2 个 INT 更改为 VARCHAR，它没有问题。想保留他们的INT。

# javascript - Knockoutjs 动态模板绑定与 Foreach 和 AfterAdd

> ID：12755682
> 
> 赞同：0
> 
> 时间：2012-10-06T00:35:28.727
> 
> 标签：javascript, templates, dynamic, binding, knockout.js

我想要做的是动态模板绑定到 observableArray 并带有指定“afterAdd”和“beforeRemove”的选项。通过查看我的代码可能更容易理解：

```
<div id="form_container" data-bind="template: {name: fnGetTemplate,
                                               foreach: OpenedForms(),
                                               beforeRemove: fnBeforeRemoveProcess(),
                                               afterAdd: fnAfterAddProcess()}"></div> 
```

（简化版）OpenedForms = ko.observableArray()[{Template: 'Template1'}, {Template: 'Template2}];

fnGetTemplate 几乎接受数组元素并返回模板名称，例如“Template1”。

数组中的所有内容都会被渲染；但是，问题是**fnAfterAddProcess** // **fnBeforeRemoveProcess在****fnGetTemplate**之前被调用。所以它实际上是在调用 afterAdd 和 afterRemove 之后渲染模板。我尝试用 afterRender 替换 afterAdd，但同样的事情发生了。由于某种原因，当我只向 observableArray 添加一个元素时，它实际上调用**了 fnBeforeRemoveProcess** -> **fnAfterAddProcess** -> **fnGetTemplate 。**

但是，这可以正常工作，只是它不支持“beforeRemove”：

```
<div id="form_container" data-bind="foreach: {data: OpenedForms, afterRender: AfterAddProcess}">
    <div data-bind="template: {name: Template, data: $data}"></div>
</div> 
```

也许我需要编写一个自定义绑定，但如果有人能指出我出错的地方或者可能是解决问题的更好方法。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:06:39.800

> 但是，问题是 fnAfterAddProcess//fnBeforeRemoveProcess 在 fnGetTemplate 之前被调用

那是因为您正在调用绑定中的函数，因此在解析绑定字符串时会运行它们。您只需在绑定中传递对函数的引用：

```
<div id="form_container" data-bind="template: {name: fnGetTemplate,
                                               foreach: OpenedForms(),
                                               beforeRemove: fnBeforeRemoveProcess,
                                               afterAdd: fnAfterAddProcess}"></div> 
```

# android - Android 2.2怎么知道4.0的版本号？

> ID：12755684
> 
> 赞同：2
> 
> 时间：2012-10-06T00:35:52.970
> 
> 标签：android

假设我有一个针对 4.0 的项目，但支持低至 2.2 的版本。在 2.2 设备上运行以下命令时，我得到了正确的值，即 14。

```
Integer version = Build.VERSION_CODES.ICE_CREAM_SANDWICH 
```

对我来说，这似乎很奇怪，我期待一个空值或错误，因为设备使用的是 2.2 API，并且根据 2.2 [Build.VERSION_CODES](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/os/Build.java?av=h#Build.VERSION_CODES)类，没有提到`int ICE_CREAM_SANDWHICH = 14`常量。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:01:54.677

我已经在评论中回答了这个问题，但我想我也可以把它写下来作为答案。

Build.VERSION_CODE 给你的值取决于你编译项目的 API 级别，所以如果你在 API 级别 10 上编译它，当你调用 Build.VERSION_CODES.ICE_CREAM_SANDWICH 时你当然不会得到任何返回值，但是如果你编译它在 API 级别 14 上，您将获得正确的值。

因此，如果编译级别低于您尝试调用的内部版本号，它将返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T05:09:53.917

正如 Ahmad 所说，您需要使用 API 级别 14 编译代码才能使用常量“ICE_CREAM_SANDWICH”。问题是在编译时这些常量被更改为它们各自的值。这意味着在运行时任何设备都不会看到“ICE_CREAM_SANDWICH”常量，而是值 14（即使它是安装了 Froyo 2.2 的设备）。

换句话说，在您的代码中：

```
Integer version = Build.VERSION_CODES.ICE_CREAM_SANDWICH; 
```

在设备中：

```
Integer version = 14; 
```

It is not exactly like that, but you get the idea.

# python-3.x - Python sys.stdout.flush() 不起作用

> ID：12755686
> 
> 赞同：8
> 
> 时间：2012-10-06T00:36:33.597
> 
> 标签：python-3.x, stdout, sleep

以下代码应该以 1 秒的间隔从 1 打印到 10，但是它在实际打印任何内容之前等待 10 秒，然后一次打印所有内容。如何取消缓冲输出？

```
import sys
import time
for count in range(10) :
   sys.stdout.write(str(count))
   sys.stdout.flush()
   time.sleep(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-07T20:24:40.903

发现问题

```
import sys
import time
for count in range(10) :
   sys.stdout.write("\b%s" % count)
   sys.stdout.flush()
   time.sleep(.1) 
```

不知道为什么 python 像这样奇怪，但显然它接受了这一点。您的代码应该可以正常工作，但我猜 python 只是不喜欢您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T00:43:52.887

Python 2.7、3.2 和 3.3 都不允许在您的 write 调用中使用关键字参数。那是正确的代码吗？print 函数当然允许 end 关键字并且不应该与 write 混淆。写入不添加换行符。

删除 'end' 关键字参数和测试表明代码工作正常。

# xcode - -mno-thumb 和 GCC_THUMB_SUPPORT = NO 有什么区别

> ID：12755688
> 
> 赞同：4
> 
> 时间：2012-10-06T00:37:44.050
> 
> 标签：xcode, llvm, thumb

似乎有两种方法可以在 Xcode 4.5 中关闭 Thumb 支持：

1.  在中指定`-mno-thumb`标志`Build Settings/Other C Flags`

2.  设置`GCC_THUMB_SUPPORT`为`NO`_`Build Settings/User-Defined`

这两种方法有区别吗？

# c - 更改函数中的变量无效

> ID：12755689
> 
> 赞同：1
> 
> 时间：2012-10-06T00:37:46.497
> 
> 标签：c, loops, while-loop

```
unsigned char xor4(unsigned char c1, unsigned char c2){
    int i = 0;
    while(i < 8){
        if((getBit(c1, i) ^ getBit(c2, i)))
             setBit(c1,i);
        else clearBit(c1, i);
        i+=2;
    }

    return c1;
} 
```

上面的代码应该是一个非常简单的函数，它根据与第二个字符中的每隔一个位进行异或的结果来设置一个字符中的每隔一个位。出于某种原因，这根本行不通。该程序似乎只是忽略了我的 while 循环并返回原始函数。

哦，这是我的 getBit、setBit 和 clearBit 函数。

```
unsigned char getBit(unsigned char c, int n){
  return (c & 1<<n) >> n;
}

unsigned char clearBit(unsigned char c, int n){
  c = c & (~(1<<n));
}

unsigned char setBit(unsigned char c, int n){
  `c = c | (1<<n);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:40:12.403

当您调用`setBit`and`clearBit`时，您正在将*副本*传递`c1`给这些函数。因此`c1`in的值`xor4`根本没有改变。

代替

```
 if((getBit(c1,i)^getBit(c2,i))) setBit(c1,i);
 else clearBit(c1,i); 
```

通过直接设置或清除操作，

```
 if((getBit(c1,i)^getBit(c2,i))) c1 |= (1 << i);
 else c1 &= ~(1 << i); 
```

（但是，[正如所指出的那样](https://stackoverflow.com/questions/12755689/c-while-loop-not-working-in-function/12755706#comment17234955_12755689)，仅用简单的函数替换该函数`c1 ^ c2`会更有效。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:43:07.190

您没有发布您的 setbit 和 clearbit 函数，但无论它们做什么，都无法更改调用函数中的 c1 。您需要传递 c1 的地址或返回 c1 的新值。或者您可以只使用 C 位运算符。而你的整个操作就相当于`c1 ^= c2`（假设一个 char 有 8 位）。

编辑：鉴于您的编辑，只需将函数的返回值分配给 c1 ...并修复您的 setbit 和 clear bit 函数...它们不返回值，如果您在编译器中使用正确的警告设置，它会告诉你。我做了一些风格上的改变：

```
/* your getbit works but is needlessly complex */
unsigned char getBit(unsigned char c, int n){
    return (c >> n) & 1; 

unsigned char clearBit(unsigned char c, int n){
    return c & ~(1 << n);
}

unsigned char setBit(unsigned char c, int n){
    return c | (1 << n);
} 

unsigned char xor4(unsigned char c1, unsigned char c2){
    for( int i = 0; i < 8; i += 2 )
        c1 = ( getBit(c1, i) ^ getBit(c2, i)
               ? setBit(c1, i);
               : clearBit(c1, i) );

    return c1;
} 
```

这是一个更快的解决方案：

```
unsigned char xor4(unsigned char c1, unsigned char c2){
    return (c1 & 0xAA) | ((c1 ^ c2) & 0x55);
} 
```

甚至更快：

```
unsigned char xor4(unsigned char c1, unsigned char c2){
    return (c2 & 0x55) ^ c1;
} 
```

# tcl - 将 .gif 数据从范围读取到 tcl 并写入本地文件

> ID：12755691
> 
> 赞同：2
> 
> 时间：2012-10-06T00:37:54.477
> 
> 标签：tcl

我通过向该范围发送查询来从 .gif 格式的范围中读取打印屏幕图像。返回的数据是二进制块形式。我正在通过套接字连接并使用 tcl 与此范围通信。我可以很好地读取数据，但是当我尝试将数据写入本地文件时，它似乎没有正确写入，因为创建的文件中没有任何信息。目标：将此数据保存或写入本地文件，以便以后访问。

这是尝试在 TCL 中完成任务的一段代码。

```
#reading .gif data(binary block form) and writing it to a local file

fconfigure $channelid -encoding binary -translation binary ; #converts the stdin to binary data input
fconfigure $fileId -encoding binary -translation binary ; #converts the stdout to binary data output
set image [getdata $channelid "some query?"] ;# getdata proc reads the query returned data 
puts stderr $image ;#to verify what data I am reading
set filename "C:/test.gif"
set fileId [open $filename "w"]
puts -nonewline $fileId $image
close $fileId 
```

任何想法或帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:50:45.380

GIF 数据基本上是二进制的；当写出来时，你需要把它写成二进制，否则 Tcl 会对它应用一些转换（例如，编码转换），这些转换对于文本数据是正确的，但对于二进制数据是错误的。最简单的方法是使用该`wb`模式打开，而不是`w`您使用的 Tcl 版本是否支持该模式——它是在 8.5 中引入的，以使事情更像 C stdio——但否则`fconfigure $fileId -translation binary`在打开之后和编写任何内容之前使用数据。

请注意，Tcl*总是*按照呈现的方式立即对事物进行操作；在打开它之前你不能`fconfigure`打开它。我猜你的第二个`fconfigure`真的太早了几行。将代码转换为过程以便它不处理全局变量可能是一个好主意；这可以帮助您更轻松地检测操作排序的各种问题：

```
proc copy_data {source_channel query_string target_file} {
    # -translation binary implies -encoding binary (and a few other things too)
    fconfigure $source_channel -translation binary
    set image [getdata $source_channel $query_string]
    set fileId [open $target_file "wb"]
    puts -nonewline $fileId $image
    close $fileId
}

# Invoke to do the operation from your example
copy_data $channelid "some query?" "C:/test.gif" 
```

# vb.net - VB.NET: Getting each item in a ListBox and finding its text & index

> ID：12755701
> 
> 赞同：0
> 
> 时间：2012-10-06T00:39:40.567
> 
> 标签：vb.net, for-loop, listbox

I am attempting 2 separate ListBoxes for listing Offline and Online servers. The box refreshes every 3 seconds, and I need to be able to go through each item and get its text and index.

What can I do for this?

I've tried creating a For loop based on ListBox.Items but was unsuccessful.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T04:10:43.310

You would probably want to use something along these lines:

```
For l_index As Integer = 0 To MyListBox.Items.Count - 1
    Dim l_text As String = CStr(MyListBox.Items(l_index))
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T14:46:47.410

Try this classic method:

```
 For i = 0 To ListBox1.Items.Count - 1
        ListBox1.SelectedIndex = i
        MsgBox("text: " & ListBox1.Text & "index: " & i)
    Next 
```

# html - Firefox 和 IE 以精确的像素换行

> ID：12755705
> 
> 赞同：2
> 
> 时间：2012-10-06T00:40:03.610
> 
> 标签：html, css, image, html-lists

所以，我有这样的事情：

![铬工作正常](../Images/a3c57afd2b962385ef9e6885e037ec3f.png)

在 320 像素的支架内有 4 个正好为 76x76 像素的对象。在 Chrome 中，您可以在上面看到，它工作得很好。但在 Firefox 和 IE9 中，我得到这样的结果：

![Firefox 无法正常工作](../Images/72d289a4d71466f42f9a730b48db7423.png)

大小相同`<ul>`

![在此处输入图像描述](../Images/d6e8be25c5664127a256613345d6d682.png)

如果我调整大小，我只会让它正确显示`<li>`

![在此处输入图像描述](../Images/c2fbcdd8db8a5a0685f24521bb152dbd.png)

这是为什么？图像大小实际上是 76x76，Chrome 可以正确渲染它。提前致谢！

- -编辑 - -

所以我正准备为你们提供一个 jsFiddle，我意识到简单的代码在那里适用于所有浏览器。所以在“删除所有代码直到我找到问题”之后，我找到了它！哈哈 是因为这两条样式线结合应用于所有的侧边栏造成的：

```
letter-spacing: 1.6px;
font-family: Verdana,Geneva,Arial,Helvetica,sans-serif; 
```

如果我只是删除其中一个，它就可以正常工作，两者的结合都出问题了。因此，只需设置`font-family: Arial;`（我知道，奇怪的解决方案，对吗？）就可以了`<ul>`！

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:23:09.617

所以我正准备为你们提供一个 jsFiddle，我意识到简单的代码在那里适用于所有浏览器。所以在“删除所有代码直到我找到问题”之后，我找到了它！哈哈 是因为这两条样式线结合应用于所有的侧边栏造成的：

```
letter-spacing: 1.6px;
font-family: Verdana,Geneva,Arial,Helvetica,sans-serif; 
```

如果我只是删除其中一个，它就可以正常工作，两者的结合都出问题了。因此，只需设置`font-family: Arial;`（我知道，奇怪的解决方案，对吗？）就可以了`<ul>`！

谢谢大家。

# ios - iOS 确定它会重叠多少子 UIView

> ID：12755711
> 
> 赞同：0
> 
> 时间：2012-10-06T00:41:24.663
> 
> 标签：ios

假设是否已将 2 个小的 UIView 添加到视图中。然后将第 3 个 UIView 添加到顶部，如何确定第 3 个 UIView 是否会与前 2 个 UIView 重叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:47:12.377

您可以在 UIView 子类（容器）上编写一个方法，该方法很容易为您计算：

```
-(NSArray*)getOverlappingViewsForSubview:(UIView*)mySubview {
    NSMutableArray* overlappedSubviews = [[[NSMutableArray alloc] init] autorelease];

    for(UIView* someSubview in self.subviews) {
        if(CGRectIntersectsRect(mySubview.frame, someSubview.frame)) {
            [overlappedSubviews addObject:someSubview];
        }
    }

    return overlappedSubviews;
} 
```

类似的东西应该可以工作 - 如果您只需要知道有多少视图相交（或重写该方法以返回计数而不是相交视图的数组），则可以对该方法的结果调用 count 。

# visual-studio-2010 - 如何从 msbuild 任务启动调试会话？

> ID：12755715
> 
> 赞同：1
> 
> 时间：2012-10-06T00:42:02.823
> 
> 标签：visual-studio-2010, msbuild

我正在构建的系统有 4 个独立的应用程序，它们在生产中是 4 个不同的 win32 服务。在开发过程中，我将它们作为 4 个单独的控制台应用程序运行。这些程序需要按特定顺序启动。

我通过右键单击每个项目并选择调试 > 启动新实例从 VS2010 执行此操作。这有效，但非常缓慢。

我尝试使用运行“多个启动项目”，但它们都同时启动。更改启动顺序无济于事。

所以，我想做的是使用 MSBuild 从构建脚本启动每个程序。我试图使用 Exec Task 但程序没有作为调试进程启动..

由于所有的 VS 都是基于 msbuild 的，我知道必须有一种方法来以这种方式启动项目..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:05:37.683

我没有找到解决方案..我在每个应用程序中添加了不同的硬编码延迟，并使用调试“多个启动项目”启动它..有点破解但简单更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:59:48.323

为此，您可以混合使用 Pre/Post 构建事件。`Project Properties -> Build Events`您可以在最后一个项目中修改它们。

**预建事件**

```
// Build is going to replace these files, they must not be in use  
taskkill /IM Foo.exe  
taskkill /IM Bar.exe 
```

**构建后事件**

```
// VsJITDebugger will ask for which debugger to attach, you can 
// choose currently active VS instance
VsJITDebugger.exe $(SolutionDir)\Foo\bin\Debug\Foo.exe  
VsJITDebugger.exe $(SolutionDir)\Bar\bin\Debug\Bar.exe 
```

在每个构建上启动调试器可能会有点烦人:) 最好为最后一个项目使用批处理脚本。你可以在`Project Properties -> Debug -> Start external program`.

# python - Matlibplot 阶跃函数索引 0

> ID：12755717
> 
> 赞同：1
> 
> 时间：2012-10-06T00:42:21.317
> 
> 标签：python, numpy, matplotlib

嗨，我正在尝试使用 matplotlib 的 step 函数来绘制它

```
from matplotlib.pyplot import step, show, xlim

time = [0.0, 0.0, 0.0, 25.3039, 25.5539, 25.8049, 45.8699, 46.1209, 46.3719, 46.6229, 63.1719, 63.4239, 63.6749, 79.9779, 80.2289, 80.4799, 80.7309]
value = ['0', '0', '0', '93', '940', '951', '940', '437', '422', '421', '423', '598', '605', '192', '3', '1', '0']

xlim(0, 145)
step(time,value)

show() 
```

我希望阶跃函数将显示绘图为 0，并从 25.3039 时间开始从 93 开始。相反，我从时间 0 看到值 93，如图所示。我需要保持时间线从 0 开始，所以我不能真正将我的 xlim 更改为从 25.3039 开始

我应该怎么做才能解决这个问题？任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T02:00:48.320

您需要设置 step 应该执行的位置（[doc](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.step)）。默认情况下，位置被解释为*右*边缘，您希望位置被解释为*左*边缘。

```
step(time,value,where='post') 
```

有关更长的解释/示例，请参阅[matplotlib 中的 Step 函数。](https://stackoverflow.com/questions/12841847/step-function-in-python)

# matlab - 关于matlab中的旋转轴标签

> ID：12755721
> 
> 赞同：4
> 
> 时间：2012-10-06T00:43:09.817
> 
> 标签：matlab

我正在用 matlab 的瀑布图绘制一些 3 维数据，我发现如果我使用内置 xlabel 或 ylabel 命令设置 x 或 y 标签，标签的方向将始终是水平的，而不是与轴对齐。有没有办法让它沿轴定向？我在帮助中发现我们可以使用命令

```
xlabel('label at 45 degree', 'rot', 45) 
```

指定方向的角度，但如果我手动旋转 3D 轴，标签不会相应改变，无论如何要解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:27:32.817

您不能自动执行此操作。您必须用文本对象替换 tic 标签/X 标签并自己旋转它（[请参阅此处了解如何操作](http://www.mathworks.se/support/solutions/en/data/1-15TK6/index.html?solution=1-15TK6)）。简单的解决方案如下所示：

```
plot(1:100);

% make the axis smaller
pos = get(gca, 'Position');
set(gca,'Position',[pos(1), .2, pos(3) 0.7]);

% place custom text instead of xlabel
% note that the position is relative to your X/Y axis values
t = text(50, -5, {'X-axis' 'label'}, 'FontSize', 14);
set(t,'HorizontalAlignment','right','VerticalAlignment','top', ...
'Rotation',45); 
```

也看看[这个 FEX 贡献](http://www.mathworks.com/matlabcentral/fileexchange/8722-rotate-tick-label)。

# html - 如何让 IE9 将网页识别为 IE9 标准？

> ID：12755725
> 
> 赞同：0
> 
> 时间：2012-10-06T00:43:25.380
> 
> 标签：html, internet-explorer-9

我有这个以 开头的网页，`<!-- DOCTYPE html -->`我相信它足以表明 HTML 5 并使 IE9 将其解释为“IE9 标准”。但是，当我导航到它时，IE9 将其显示为“浏览器模式：IE9 兼容视图”、“文档模式：IE7 标准”。

页面中的前两行是：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

结果，某些布局呈现不正确。例如，右对齐的表格单元格显示为左对齐。如果我手动将 IE 设置为“浏览器模式：IE9”、“文档模式：IE9 标准”，那么一切看起来都很完美。其他浏览器工作正常。

为了使 IE9 能够识别 HTML 5 并阻止它在兼容模式下工作，我需要进行哪些更改？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:28:01.973

我做的两件事：

```
<!doctype html> 
```

和

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" > 
```

并取出 XMLNS

使用： http: [//msdn.microsoft.com/en-us/library/cc288325 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)

# mysql - 如何将数据加载到mysql表中但忽略空行

> ID：12755726
> 
> 赞同：1
> 
> 时间：2012-10-06T00:43:27.453
> 
> 标签：mysql

我正在使用以下语句从文件中插入数据。

```
load data infile 'filename.csv'
ignore 
into table tbl (clo); 
```

我需要忽略文件中的空行。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-25T16:29:32.823

您不能跳过行，除非它们位于您可以使用该`IGNORE N LINES`选项的文件的开头。

导入前使用 sed：

`sed -i '/^\s*$/d' filename.csv`

更多详细信息： [使用 SED 删除空行](https://stackoverflow.com/questions/16414410/delete-empty-lines-using-sed)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T01:11:02.363

```
LOAD DATA INFILE 'filename.csv'
INTO TABLE your_table
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\r\n'; 
```

\r 在 Windows 文件上是必需的，如果您在 *nix 上运行它，则不需要它们。

# ios - UIViewController 在 iOS 6 中能否支持比其父级更多的界面方向？

> ID：12755727
> 
> 赞同：3
> 
> 时间：2012-10-06T00:43:34.400
> 
> 标签：ios, rotation, orientation, ios6

iOS 6 中对自动旋转的更改似乎使这变得异常困难或不可能。他们似乎在推动子视图控制器不应该覆盖其父视图控制器的自动旋转行为的理念。这使得我很难完成我想做的事情：

*   我有一个必须显示纵向的视图控制器。
*   它以模态方式推动另一个视图控制器，它是一个简单的图像查看器，但我希望这个视图控制器能够旋转到任何纵向或横向（原因很明显）
*   当子视图控制器被解除（不管其当前方向如何）时，父视图控制器应保持纵向

> ### UIViewController 类参考中的相关 Apple 文档
> 
> 在 iOS 6 中，您的应用支持在应用的 Info.plist 文件中定义的界面方向。视图控制器可以覆盖supportedInterfaceOrientations 方法来限制支持的方向列表。一般情况下，系统只会在窗口的根视图控制器或呈现为填满整个屏幕的视图控制器上调用该方法；子视图控制器使用其父视图控制器为它们提供的窗口部分，并且不再直接参与有关支持哪些旋转的决策。应用程序的方向掩码和视图控制器的方向掩码的交集用于确定视图控制器可以旋转到哪些方向。

我曾考虑过使用变换来模拟子视图控制器中的旋转，但老实说，我觉得应该有更好的方法，如果可能的话，我想避免这种*情况*。

似乎为了让任何子视图控制器支持界面方向，它的父视图控制器（以模态或其他方式呈现）现在也必须支持该界面方向。

我在这里错过了一些简单的东西吗？这是否像看起来那样荒谬？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:35:28.040

您可以继承导航控制器并覆盖该`(NSUInteger)supportedInterfaceOrientations`方法。因此，导航控制器将始终返回当前显示的视图控制器支持的任何内容。

如下所示（代码和想法未经测试）：

```
- (NSUInteger)supportedInterfaceOrientations {
    return [self.presentedViewController supportedInterfaceOrientations];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T00:47:03.417

我今天正在处理类似的问题并解决了这个问题：

在父视图中，我检查是否分配了孩子（因此在我的案例中显示）。如果是，则代码允许任何方向，如果不是，则仅横向。就像是：

在**父母**中：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    bool result;

    if (self.photoViewController)
    {
        result = YES;
    }
    else
    {
        result = (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
    }

    return result;
}

- (NSUInteger)supportedInterfaceOrientations
{
    NSUInteger result;

    if (self.photoViewController)
    {
        result = UIInterfaceOrientationMaskAll;
    }
    else
    {
        result = UIInterfaceOrientationMaskLandscapeLeft+UIInterfaceOrientationMaskLandscapeRight;
    }

    return result;
} 
```

在**孩子**这个功能看起来有点不同：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

[这让我遇到了您在对Robotic Cat 的回答](https://stackoverflow.com/a/12755942/653513)的评论中提到的同样的问题：当孩子被解雇时，父视图控制器可以发现它自己的方向错误。

此代码（感谢[Corey Floyd 的代码片段](http://coreyfloyd.tumblr.com/post/8212203583/2-ways-to-rotate)）强制父母重新定向。

```
UIViewController *c = [[UIViewController alloc]init];
[self presentViewController:c animated:NO completion:nil];
[self dismissViewControllerAnimated:NO completion:nil]; 
```

它应该放在子视图控制器被删除的位置之后。这是为 iOS 6.0 编写的，您也可以使用原始链接中的代码。

# java - 将升序更改为降序

> ID：12755736
> 
> 赞同：1
> 
> 时间：2012-10-06T00:45:00.263
> 
> 标签：java, sorting

我有以下代码对列表进行排序，但我需要使其降序排序，

```
List list = new LinkedList(thismap.entrySet());
Collections.sort(list, new Comparator() {
    public int compare(Object o1, Object o2) {
        return ((Comparable) ((Map.Entry) (o2)).getValue())
                .compareTo(((Map.Entry) (o1)).getValue());
    }
});

Map output = new LinkedHashMap();
for (Iterator it = list.iterator(); it.hasNext();) {
    Map.Entry entry = (Map.Entry) it.next();
    output.put(entry.getKey(), entry.getValue());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T00:57:26.837

一种常见的通用技术是通过简单地交换参数将比较器包装在反向比较器中。

```
class ReverseComparator<T> implements Comparator<T> {

    private final Comparator target;

    public ReverseComparator(Comparator<T> target) {
        super();
        this.target = target;
    }

    public int compare(T first, T second) {
        return target.compare(second, first);
    } 
} 
```

将它与我们的示例一起使用：

```
Comparator original = new Comparator() {
    public int compare(Object o1, Object o2) {
        return ((Comparable) ((Map.Entry) (o2)).getValue())
            .compareTo(((Map.Entry) (o1)).getValue());
    }
};

Collections.sort(list, new ReverseComparator(original)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T02:19:30.910

简单的通用答案是使用`java.util.Collections.reverseOrder(Comparator)`.

```
Comparator myComparator = new Comparator() {
    public int compare(Object o1, Object o2) {
    return ((Comparable) ((Map.Entry) (o2)).getValue())
        .compareTo(((Map.Entry) (o1)).getValue());
    }
}
// ... or whatever.

Comparator myReverseComparator = Collections.reverseOrder(myComparator); 
```

或者，一个特定的解决方案是翻转 compare 方法中的参数：

```
Comparator myReverseComparator = new Comparator() {
    public int compare(Object o2, Object o1) {  // <== NOTE - params reversed!!
    return ((Comparable) ((Map.Entry) (o2)).getValue())
        .compareTo(((Map.Entry) (o1)).getValue());
    }
} 
```

* * *

请注意，由于边缘情况 ，乘以`-1`是一个**不正确的解决方案。**是 ...`Integer.MIN_VALUE``Integer.MIN_VALUE * -1``Integer.MIN_VALUE`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T00:53:03.053

这都是关于更改以下方法的内容：

```
public int compare(Object o1, Object o2) 
{
    return ((Comparable) ((Map.Entry) (o2)).getValue())
           .compareTo(((Map.Entry) (o1)).getValue());
} 
```

返回与以下语句的值不同的结果：

```
((Comparable)((Map.Entry)(o2)).getValue()).compareTo(((Map.Entry)(o1)).getValue()); 
```

假设上面的语句分配给 x。那么你应该在 x < 0 时返回 1，如果 x > 0 则返回 -1，如果 x == 0 则返回 0，就在`compare()`方法内部。

因此，您的方法可能如下所示：

```
public int compare(Object o1, Object o2) 
{
   int x = ((Comparable)((Map.Entry)(o2)).getValue())
             .compareTo(((Map.Entry)(o1)).getValue());
   if(x > 0)
     return -1;
   else if (x < 0)
     return 1;

   return 0;
} 
```

# emacs - 跨帧的emacs跟随模式

> ID：12755737
> 
> 赞同：6
> 
> 时间：2012-10-06T00:45:01.700
> 
> 标签：emacs, frame

有没有办法获得像您在跟随模式中发现的行为但在单独的框架中跨多个窗口的行为？

我必须使用一些令人讨厌的遗留代码，这些代码有七页砖，八层深嵌套 for 循环，带有很多 goto，它有助于查看尽可能多的代码（以便充分理解和重写它不破坏其他一切）。

我一次能看到的代码越多越好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T20:32:10.317

此限制`follow-all-followers`在其对 的调用中明确设置`next-window`。

这是一个基本的解决方法。您很快就会注意到一些缺陷（例如，您可能需要手动排列框架），但它有助于利用所有框架的基本要求，并且您应该能够使其正常工作。

我还建议[FrameMove](http://www.emacswiki.org/emacs/FrameMove)和 WindMove 可能证明对这种安排非常有用。

```
(defmacro with-temporary-advice (function class name &rest body)
  "Enable the specified advice, evaluate BODY, then disable the advice."
  `(progn
     (ad-enable-advice ,function ,class ,name)
     (ad-activate ,function)
     ,@body
     (ad-disable-advice ,function ,class ,name)
     (ad-activate ,function)))

(defadvice next-window (before my-next-window-all-frames disable)
  "Enforce the ALL-FRAMES argument to `next-window'."
  (ad-set-arg 2 'visible))

(defadvice follow-all-followers (around my-follow-all-frames activate)
  "Allow `follow-mode' to span frames."
  (with-temporary-advice
   'next-window 'before 'my-next-window-all-frames
   ad-do-it)) 
```

相反，您可能更喜欢简单地重新定义`follow-all-followers`函数来做您想做的事情。

# javascript - CSV 下载框未出现在 rails 2.3.11

> ID：12755738
> 
> 赞同：1
> 
> 时间：2012-10-06T00:45:06.707
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ajax

我正在尝试导出包含一些数据的 csv 文件。在从视图表（jqGrid）中选择一些行并将其导出为 csv 格式后，我正在进行 ajax 调用。问题是在成功调用 ajax 后，过滤后的数据显示为警告消息而不是下载选项？有任何想法吗？？

查看代码：

```
 function x() {

 var obj = jQuery("input:checked").map(function() { return jQuery(this).parents('tr').attr('id'); });

 var arr = jQuery.makeArray(obj);
 var data = arr.join(',');

 $.ajax({
     url : '<%= url_for :action => "export_to_csv" %>',
     type : 'POST',
     data : {data:data},
     dataType : 'json',
         success : function(response) {
           alert("Details saved successfully!!!");
         },
         error : function (request, status, error) {
                alert(request.responseText);
            }       
    });     

      } 
```

控制器代码：

```
def export_to_csv
 require 'fastercsv'

 data = params['data'].split(',')
 @gos = GoSe.find(:all, :conditions => [ "id IN (?)", data])
 csv = FasterCSV.generate do |line|
 cols = ["ID","Details","PartnerCode","Sece","Date","Partner","Person","TaxName","TaxID"]
 line << cols
 @gos.each do |entry|                
 line << [entry.id, entry.description, entry.code, entry.ellipsis, entry.oDate, entry.name, entry.people_name, entry.tax_name, entry.tax_id ]
     end  
  end

send_data(csv, 
:type => 'text/csv; charset=iso-8859-1; header=present', 
:disposition => "attachment; filename=go_data_#{Time.now.strftime('%d-%m-%y--%H-%M')}.csv") 

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:20:25.763

随着代码中的以下更新..它的工作..试试看！

```
function x() {

var obj = jQuery("input:checked").map(function() { return jQuery(this).parents('tr').attr('id'); });

var myAjaxVariable = null;
var arr = jQuery.makeArray(obj);
var data = arr.join(',');

$.ajax({
 url : '<%= url_for :action => "export_to_csv" %>',
 type : 'POST',
 data : {data:data},
 dataType : 'json',
 async : false,
     success : function(response) {myAjaxVariable = response;},
     error : function (request, status, error) {
            alert(request.responseText);
        }       
  });   

window.open( "data:text/csv;charset=utf-8," + escape(myAjaxVariable))  

} 
```

# c# - 如何在 WPF 中绘制像素

> ID：12755740
> 
> 赞同：4
> 
> 时间：2012-10-06T00:45:22.757
> 
> 标签：c#, wpf, drawing

很抱歉问了这么简单的问题，但这让我发疯了。

我正在用 C#、WPF 编写，我需要做的就是在特定 RGB 值的 x,y 位置绘制一个像素。

我遇到的问题是要使用的命名空间、要引用的 dll 等。我发现的任何代码都会引发大量编译错误。

因此，只要在窗口中的特定 x,y 坐标处放置一个 RGB 值的点，就可以让我很开心。

请包括将在 Visual Studio 2010 中编译、链接和运行的整个示例代码。就像我说的那样，我发现的所有代码片段都会引发大量错误（从模棱两可的“刷”到……嗯，你的名字它）。而且，是的，我刚刚开始用 WPF 编写代码。

提前致谢！

* * *

这是给冲浪管家的：

这是一个示例（来自此处：http: [//msdn.microsoft.com/en-us/library/ms747393.aspx](http://msdn.microsoft.com/en-us/library/ms747393.aspx)）：

```
// Add a Line Element
myLine = new Line();
myLine.Stroke = System.Windows.Media.Brushes.LightSteelBlue;
myLine.X1 = 1;
myLine.X2 = 50;
myLine.Y1 = 1;
myLine.Y2 = 50;
myLine.HorizontalAlignment = HorizontalAlignment.Left;
myLine.VerticalAlignment = VerticalAlignment.Center;
myLine.StrokeThickness = 2;
myGrid.Children.Add(myLine); 
```

它会引发错误，不知道 Line() 是什么......或 myGrid（会在 XAML 中声明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:26:00.727

我找到了缺少的程序集 WindowsBase.dll！它被掩埋了，我不得不浏览它！

现在，我只剩下一个错误...... myGrid 在当前上下文中不存在。

这是在 XAML 窗口中声明的吗？我怀疑是这样。但那是在另一个项目中。如何在同一解决方案中存在的两个项目中引用它的 MainWindow？

# android - 文件 i/o 权限问题（Android 模拟器）

> ID：12755743
> 
> 赞同：0
> 
> 时间：2012-10-06T00:46:40.873
> 
> 标签：android, android-emulator

我在使用 ICS 模拟器将数据转储到文件（甚至创建文件）时遇到了一些麻烦。我已经构建了具有“rw”权限的模拟器，并验证了“adb push”确实有效（具有只读权限，这曾经失败）。模拟器似乎只是运行这段代码，但从不创建文件。我尝试在 /system/etc 和 /mnt/sdcard 中创建（并在引导命令中使用我自己的 sdcard.img 文件）。知道我怎么能克服这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:11:55.730

尝试：

```
f0.flush(); 
```

前

```
f0.close(); 
```

以确保缓冲的数据被写入文件。

在代码的 catch() 部分添加以下内容：

```
catch (IOException e){
  e.printStackTrace();
} 
```

这将在目录中打印出问题所在。

确认您已在 AVD Manager 中添加了 SD 卡。打开它并检查以下内容：

![AVD 管理器](../Images/ba1a649e0aef10db035325defb0e4fe0.png)

# python - PYTHON TkInter - 设置和访问条目小部件文本作为变量

> ID：12755749
> 
> 赞同：0
> 
> 时间：2012-10-06T00:47:26.163
> 
> 标签：python, tkinter

我已经尝试尽可能多地阅读有关此的文章，但找不到任何可以帮助我的文章。在我的代码中，我创建了一个 EntryWidget 类，其中包含一个条目小部件，并且在我的应用程序的主类 Controller 中，我创建了一个名为 self.entry 的类 EntryWidget 的实例。我正在尝试编写一个方法，该方法将成为 ok 按钮的命令，该方法主要从条目小部件中获取文本，然后对其进行操作。此代码来自主类 Controller：

```
 def ok(self):
         self.input = self.entry.get()
         self.command = "" 
```

错误：

```
 AttributeError: EntryWidget instance has no attribute 'get' 
```

这个想法是输入文本，然后点击调用此方法的确定按钮。抱歉，如果之前有人问过这个问题，但我已经阅读了其他回复，但他们没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:05:23.250

如果您的`EntryWidget`类没有子类`Tkinter.Entry`，则需要`get()`为您的类定义方法`EntryWidget`。错误说这`self.entry`是一个`EntryWidget`实例但不包含`get()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T10:11:22.977

我自己写了一个小函数，允许用户在 tkinter.Entry 中输入一个值，然后函数返回用户的输入。

```
def getInput(title, message):
    class inputGUI(tkinter.Tk):
        def __init__(self):
            tkinter.Tk.__init__(self)
            self.title(title)
            self.l=tkinter.Label(self,text=message, width = 30, pady = 10, padx = 5).pack()
            self.e=tkinter.Entry(self, width = 30)
            self.e.pack()
            self.e.focus()
            self.gap=tkinter.Label(self,text="", width = 50, pady = 0, padx = 5).pack()
            self.b=tkinter.Button(self,text='Submit',command=self.cleanup, width = 20, pady = 10, padx = 5).pack()
            self.gap=tkinter.Label(self,text="", width = 30, pady = 0, padx = 5).pack()
        def cleanup(self):
            self.userInput=self.e.get()
            self.destroy()
    root = inputGUI()
    root.focus()
    root.wait_window(root)
    valueOut = root.userInput
    return valueOut 
```

注意：我知道没有条目验证，但是这应该很容易添加。

# c++ - 希望在使用 boost 程序选项时允许多次指定选项。现在我多次出现

> ID：12755755
> 
> 赞同：12
> 
> 时间：2012-10-06T00:49:12.213
> 
> 标签：c++, boost, boost-program-options, custom-validators

我正在使用 boost program_options 1.50.0

我想为我的程序 foobar 允许以下内容 `foobar --debug 2 --debug 3`

在 boost program_options 代码中，有一个示例 regex.cpp，它显示了创建新类型并为该类型创建验证器。
我试过了，它可以工作，但现在我不能使用其他一些 add_options() typed_value 选项，比如 default_value、组合等。

这是我到目前为止所尝试的：

```
 #include <boost/program_options.hpp>

    using namespace boost;

    using namespace boost::program_options;

    #include <iostream>
    using namespace std;
    struct lastmultioccurrenceint {
        public:
         lastmultioccurrenceint(int n) : n(n) {}
         int n;
    };    

void validate(boost::any& v, 
                  const std::vector< std::string >& xs, 
                  //const std::vector< std::basic_string<charT> >& xs, 
                  lastmultioccurrenceint* , int)
    {
        using namespace boost::program_options;

        cerr << "IN VALIDATE" << endl;
        //validators::check_first_occurrence(v);
        string s = validators::get_single_string(xs);
        if (!v.empty()) {
            cerr << "\tPRINTTING MULTIOCCURENCE WARNING, allowing v to be overwritten" << endl;
            cerr << "\tEarlier value was: " <<  boost::any_cast<int>(v) << endl;
            cerr << "\tNew value is: " << s << endl;
        }
        try {
            //v = any(lastmultioccurrenceint(lexical_cast<int>(sx)));
            //v = any(lexical_cast<int>(sx)); // works
            v = any(lexical_cast<int>(s));
            //v = any(lexical_cast<lastmultioccurrenceint>(s));
            //v = any(4);
        //}
        /*catch(const bad_lexical_cast&) {
            boost::throw_exception(validation_error::invalid_option_value(s));
        } */
        }
        catch(const bad_lexical_cast&) {
            throw validation_error(validation_error::invalid_option_value);
        }
        cerr << "made it through" << endl;

        int main (int argc, char **argv) {

    variables_map m_varMap;
        // define style
        //  unix_style =  (allow_short | short_allow_adjacent | short_allow_next
        //            | allow_long | long_allow_adjacent | long_allow_next
        //            | allow_sticky | allow_guessing 
        //            | allow_dash_for_short), 
        // ... allows typical unix-style options
        // allow_long_disguise = can use "-" instead of "--"
        // Reference: http://www.boost.org/doc/libs/1_42_0/doc/html/boost/program_options/command_line_style/style_t.html
        //
    try {

    ProgOpts::command_line_style::style_t style = ProgOpts::command_line_style::style_t(
            ProgOpts::command_line_style::unix_style |
            //ProgOpts::command_line_style::case_insensitive |
            ProgOpts::command_line_style::allow_long_disguise );

    options_description options("YDD");

    //lastmultioccurrenceint debugOpt;

    options.add_options()
    ("debug", value<lastmultioccurrenceint>(), "debug value (0-4), default is 0 (performance mode)")
    //("debug", value<lastmultioccurrenceint>(&debugOpt)->default_value(0)->composing(), "debug value (0-4), default is 0 (performance mode)")
    ;

        //ProgOpts::parsed_options firstPreParsed = ProgOpts::command_line_parser(argc,argv).options(options).style(style).allow_unregistered().run();
        ProgOpts::parsed_options firstPreParsed = ProgOpts::command_line_parser(argc,argv).options(options).allow_unregistered().run();
    ProgOpts::store(firstPreParsed, m_varMap);

    ProgOpts::notify(m_varMap);
    } 
    /*catch (boost::program_options::multiple_occurrences &e) {
        cerr << "GOT MULTIPLES" << endl;
        cerr << "Option Name: " << e.get_option_name() << endl;
        cerr << e.what() << endl;
    }
    catch(boost::bad_any_cast& e) {
        cerr << "WRONG TYPE" << endl;
        cerr << e.what() << endl;
    } */
    catch(std::exception& e) {
        cerr << "SOMETHING ELSE" << endl;
        cerr << e.what() << endl;
    }
    catch(...) {
        cerr << "UNKNOWN ERROR" << endl;
    }

    cerr << "DEBUG OPT IS: " << m_varMap["debug"].as<int>() << endl;
} 
```

所以如果我这样做： foobar --debug 2 --debug 3

如果我注释掉当前的调试选项....

```
("debug", value<lastmultioccurrenceint>(), "debug value (0-4), default is 0 (performance mode)") 
```

...并取消注释以下两行：

```
lastmultioccurrenceint debugOpt;
("debug", value<lastmultioccurrenceint>(&debugOpt)->default_value(0)->composing(), "debug value (0-4), default is 0 (performance mode)") 
```

...然后它甚至不编译。

你知道如何做到这一点，以便它允许我使用 default_value 和作曲吗？它可能是从 typed_value 继承的，但我还没有找到这样做的好方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T22:04:28.447

我认为您不需要使用验证器定义自定义类型来获得所需的结果。它可以通过库现有的语义信息支持来完成。考虑这个例子

```
#include <boost/assign/list_of.hpp>
#include <boost/program_options.hpp>
#include <boost/version.hpp>

#include <iostream>

int
main( int argc, char** argv )
{
    namespace po = boost::program_options;

    po::options_description desc("Options");

    typedef std::vector<unsigned> DebugValues;
    DebugValues debug;
    desc.add_options()
        ("help,h", "produce help message")
        ("debug", po::value<DebugValues>(&debug)->default_value(boost::assign::list_of(0), "0")->composing(), "set debug level")

        ;

    po::variables_map vm;
    try {
        const po::positional_options_description p; // note empty positional options
        po::store(
                po::command_line_parser( argc, argv).
                          options( desc ).
                          positional( p ).
                          run(),
                          vm
                          );
        po::notify( vm );

        if ( vm.count("help") ) {
            std::cout << desc << "\n";
            std::cout << "boost version: " << BOOST_LIB_VERSION << std::endl;
            return 0;
        }
    } catch ( const boost::program_options::error& e ) {
        std::cerr << e.what() << std::endl;
    }

    std::cout << "got " << debug.size() << " debug values" << std::endl;
    if ( !debug.empty() ) {
        DebugValues::const_iterator value( debug.end() );
        std::advance( value, -1 );
        std::cout << "using last value of " << *value << std::endl;
    }
} 
```

和示例用法：

```
samm$ ./a.out -h
Options:
  -h [ --help ]         produce help message
  --debug arg (=0)      set debug level

boost version: 1_46_1
samm$ ./a.out --debug 1 --debug 2
got 2 debug values
using last value of 2
samm$ ./a.out --debug 4 --debug 1
got 2 debug values
using last value of 1
samm$ ./a.out --debug 4 --debug 1 --debug 9
got 3 debug values
using last value of 9
samm$ 
```

# java - 如何在 java 中绕过 InputMisMatchException

> ID：12755760
> 
> 赞同：1
> 
> 时间：2012-10-06T00:50:43.823
> 
> 标签：java, double

我有一个文件，我在其中放入了一些数字，但后来我决定要为每个数字标记一个名称，如下所示：

```
A = 1 2 3
B = 3 4 5
C = 6 7 8 
```

这导致抛出异常。我想知道如何解决这个问题，以便扫描仪“忽略”除数字之外的所有数字，除非我另有说明。

任何人都可以帮忙吗？

编辑：

另外，我已经知道是什么导致了异常。我正在使用 next.Double(); 选择文件中的数字。

```
public static void readFile() throws IOException, FileNotFoundException {

    String fileName = "vectors.txt";

    // Reference the file using the the BufferedReader object
    BufferedReader input = new BufferedReader(new FileReader(fileName));    

    //scanner to scan through file 
    Scanner token = new Scanner(input);

    double fileX = token.nextDouble();
    double fileY = token.nextDouble();
    double fileZ = token.nextDouble();

    vecA = new Vector3D(fileX,fileY,fileZ);

    fileX = token.nextDouble();
    fileY= token.nextDouble();
    fileZ = token.nextDouble();

    vecB = new Vector3D(fileX, fileY, fileZ);

    fileX = token.nextDouble();
    fileY= token.nextDouble();
    fileZ = token.nextDouble();

    //initialize vecC using double values from third line of file
    vecC = new Vector3D(fileX, fileY, fileZ);

    //close file 
    input.close();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:57:20.517

您不能让扫描仪自动忽略输入，但您可以编写代码自己跳过输入，直到看到双精度可用：

```
while (!scanner.hasNextDouble()) {
    scanner.next();
}
double d = scanner.nextDouble(); 
```

如果您需要将此代码放在多个位置，可以将其包装在一个函数中：

```
private static double skipAndGetDouble(Scanner scanner) {
    while (scanner.hasNext() && !scanner.hasNextDouble()) {
        scanner.next();
    }
    return scanner.hasNextDouble() ? scanner.nextDouble() : Double.NaN;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T00:59:37.947

如果您想非常花哨，并想出一个过度杀伤的解决方案，请尝试更改扫描仪的分隔符。在此处查看[API](http://docs.oracle.com/javase/7/docs/api/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T01:00:44.913

您需要解析对正在扫描的数据有意义的文本。因此，在您的情况下，您有重复所持有的基本信息类型的行 - 意味着使用循环 - 不要不必要地重复代码。在伪代码中

```
create a Scanner object read the file, say called fileScanner
while still lines to be read (fileScanner.hasNextLine())
  read line with fileScanner using .nextLine()
  Create a new Scanner object, lineScanner to get tokens in line.
  Use lineScanner to get `next` String via `.next()` and store
  Use lineScanner to get `next` String via `.next()` (the `=`) and ignore
  Use lineScanner to get 3 doubles.
  close line scanner
  Store all info in object and place in ArrayList or some other collection
end while
close fileScanner 
```

# javascript - Rails 在视图之间共享 javascript

> ID：12755762
> 
> 赞同：3
> 
> 时间：2012-10-06T00:50:53.503
> 
> 标签：javascript, ruby-on-rails-3, views, coffeescript, code-duplication

在我的 rails 应用程序中，我有一段 javascript 在我的 8 个视图中的 2 个之间完全重复。javascript的正确位置在哪里？

rails 应用程序结构将 javascript 放置`app/assets/javascripts`在每个模型的 js.coffee 文件和 application.js 文件的位置。我是将它放在 application.js 文件中还是有一种干净的方法可以在两个 .js 目录之间共享 javascript？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:34:06.300

**更新**：

我完全误读了这个问题，并认为它与backbone.js 视图有关，而不是rails 视图。下面的答案确实与所要求的不同......也许它与使用backbone.js的人有关，但它并没有真正回答这个问题。对于那个很抱歉！

**原始答案**：

我共享代码的做法是创建一个父类，在其中包含我想要共享的代码，然后让每个使用它的视图扩展该类（用 coffeescript 术语）。

所以像（再次在coffeescript中）：

**app/assets/javascripts/base_view.js.coffee**（或任何你想放的地方）

```
class App.BaseView
  sharedFunction: () ->
    ... 
```

然后让其他视图扩展`App.BaseView`（或任何你称之为父类的东西）：

**应用程序/资产/javascripts/views/view2.js.coffee**

```
class App.MyView1 extends App.BaseView
  ... sharedFunction() ... 
```

**应用程序/资产/javascripts/views/view2.js.coffee**

```
class App.MyView2 extends App.BaseView
  ... sharedFunction() ... 
```

只需确保`App.BaseView`在`application.rb`. （如果您使用的是 require.js，那么加载顺序当然无关紧要，但我假设您不是。）

另请注意，尽管您提到您只共享“一段 javascript”，但最好从一开始就考虑共享模块，这样如果以后您想扩展该“一段 javascript”，您有框架去做。这是一篇关于使用backbone.js 实现模块[的好文章](http://weblog.bocoup.com/organizing-your-backbone-js-application-with-modules/)。

FWIW，[这是我正在从事的项目](https://github.com/netalab/cojiro)，我在其中与公共视图类共享代码：[`App.Threads`](https://github.com/netalab/cojiro/blob/develop/app/assets/javascripts/views/threads/thread.js.coffee)extends [`App.TranslatableFieldsView`](https://github.com/netalab/cojiro/blob/develop/app/assets/javascripts/mixins/translatable_fields_view.js.coffee)which extends [`App.BaseView`](https://github.com/netalab/cojiro/blob/develop/app/assets/javascripts/base_classes/base_view.js.coffee)。请注意，这里我正在使用 coffeescript 共享初始化代码`super`。我对模型做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:37:32.660

我的观点是将该javascript保留在资产中并`javascript_include_tag`在需要的地方包含它例如您已将通用代码放入`assets/mycode.js.cofeee`

在需要的地方在你的 html 中使用它

```
javascript_include_tag('mycode') 
```

谢谢

# bash - 如何使用 shell script 命令在终端中启动 shell script？

> ID：12755764
> 
> 赞同：0
> 
> 时间：2012-10-06T00:51:07.423
> 
> 标签：bash

我想编写一个 shell 脚本，开始在单独的终端窗口中运行另一个 shell 脚本。我应该使用哪个命令在终端中运行以下 shell 脚本？

```
#!/bin/sh
#name of this script: install applications.sh
sudo apt-get update  # To get the latest package lists
sudo apt-get install docky -y
#etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:54:47.523

这取决于您要启动的终端模拟器。这里有两个例子：

```
xterm -e 'bash applications.sh'
gnome-terminal -e 'bash applications.sh' 
```

# css - 并排定位 2 个元素 - 与左侧元素静态水平和右侧元素宽度随页面扩展

> ID：12755773
> 
> 赞同：1
> 
> 时间：2012-10-06T00:53:09.773
> 
> 标签：css, html, positioning

好的，我拼命尝试定位 2 个元素，一个边和一个部分（我认为这些 HTML5 元素的使用与它们所持有的内容相关）。

对于下一页[单击此处](http://www.russfrancis.co.uk/asia.htm)，我​​试图使“位置”（旁边）元素保持静态并保持在容器 div 的左侧。至于“区域”（部分），我希望它保持在页面的右侧（与“位置”元素处于同一水平）但是当尺寸减小时，我需要它保持在右侧并缩小宽度，里面的内容显示我现在的样子。我似乎已经正确设置了它，其中包含的 div 在缩小时显示在哪里，但我无法将它定位在位置元素的下一个（在级别上）。

请参阅以下标记：

```
<div class="mainwrapper">
  <aside id="locations">
    <h4 style="border-bottom: 1px dotted #990000;">Locations</h4>
    <ul>
      <li>
        <a href="recentwork.htm">
          <span>Recent Work</span>
        </a>
      </li>
      <li>
        <a href="asia.htm">
          <span>Asia</span>
        </a>
      </li>
      <li>
        <a href="australia.htm">
          <span>Australia</span>
        </a>
      </li>
      <li>
        <a href="britisles.htm">
          <span>British Isles</span>
        </a>
      </li>
      <li>
        <a href="europe.htm">
          <span>Europe</span>
        </a>
      </li>
      <li>
        <a href="london.htm">
          <span>London</span>
        </a>
      </li>
      <li>
        <a href="morocco.htm">
          <span>Morocco</span>
        </a>
      </li>
    </ul>

  </aside>
  <section id="regions">
    <h4 style="text-align:left;">Asia</h4>
    <div class="thumbcontainer">
      <div class="thumb">
        <a href="india.htm">
          <img src="images/photo/tn/india.jpg" alt="India" width="310" height="207">
        </a>
        <h3>India</h3>
        <p>Country Description</p>
      </div>
      <div class="thumb">
        <a href="indonesia.htm">
          <img src="images/photo/tn/indonesia.jpg" alt="Indonesia" width="310" height="207">
        </a>
        <h3>Indonesia</h3>
        <p>Country Description</p>
      </div>
      <div class="thumb">
        <a href="malaysia.htm">
          <img src="images/photo/tn/malaysia.jpg" alt="Malaysia" width="310" height="207">
        </a>
        <h3>Malaysia</h3>
        <p>Country Description</p>
      </div>
      <div class="thumb">
        <a href="singapore.htm">
          <img src="images/photo/tn/singapore.jpg" alt="Singapore" width="310" height="207">
        </a>
        <h3>Singapore</h3>
        <p>Country Description</p>
      </div>
      <div class="thumb">
        <a href="thailand.htm">
          <img src="images/photo/tn/thailand.jpg" alt="Singapore" width="310" height="207">
        </a>
        <h3>Thailand</h3>
        <p>Country Description</p>
      </div>
    </div>
  </section>
</div> 
```

和CSS：

```
.mainwrapper {
width: 90%;
margin: 130px auto 0;
text-align:center;
}

.mainwrapper h4 {
text-align:center;
padding-bottom: 5px;
color: #FFF;
border-bottom: 1px solid rgba(153,0,0,1);
font-size:16px;
font-weight:200;
letter-spacing: 2px;
text-transform:uppercase;
font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif;
}

#locations {
background-color:rgba(26,26,26,0.8);
display:inline-block;
text-align:left;
width: 150px;
height:auto;
margin-top: 5px;
padding: 0 10px 0;
}

#locations ul {
list-style: none;
padding:0;
}

#locations li {
}

#locations li a {
text-align:left;
color:#FFF;
font-family:"Lucida Sans Unicode", "Lucida Grande", sans-serif;
font-size:12px;
font-weight:normal;
margin:0;
text-decoration:none;   
}

#regions {
background-color:rgba(26,26,26,0.8);
display:inline-block;
vertical-align:top;
width: 90%;
margin-left: 20px;
margin-top: 5px;
padding: 0 10px 0;
}

.thumbcontainer {
display:inline-block;
width:100%;
}

.thumb {
background-color:rgba(18,18,18,0.8);
border:1px solid rgba(0,0,0,1);
margin:10px 2px;
display:inline-block;
vertical-align:top;
width: 310px;
height:270px;
}

.thumb h3 {
color: #FFF;
border-bottom: 1px solid rgba(153,0,0,1);
font-size:14px;
font-weight:200;
letter-spacing: 2px;
text-transform:uppercase;
font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif;
margin:0 8px 0;
}

.thumb p {
color:#FFF;
font-family:"Lucida Sans Unicode", "Lucida Grande", sans-serif;
font-size:11px;
text-align:left;
padding-left:8px;

}

.thumb img {
border:0;
} 
```

[请在这里](http://www.russfrancis.co.uk/asia.htm)重新找到链接

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:37:06.430

尝试这个 ...

从 HEADER 中删除 position: fixed，从 #regions 中删除 width: 90% 并将 .mainwrapper CSS 声明替换为：

```
.mainwrapper {
    margin: 40px 2% 0;
    padding-left: 168px;
    position: relative;
    text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:55:55.833

正如您所说，您应该分别在您的 Locations 和 Regions 元素上使用`float:left`和`float:right`，以便它们处于同一级别。

我还会使用媒体查询来更改 Regions 元素的宽度，因为在 90% 的情况下，它并不总是能够将 Locations 元素放在左侧。我个人认为您应该摆脱 Regions 元素上的百分比宽度，并使用媒体查询有条件地设置它。

有关媒体查询的更多信息：[这里](http://css-tricks.com/css-media-queries/)。

例如，您的 Regions 元素需要大约 636px 宽才能显示两张照片。所以你可以有一个媒体查询来允许这个宽度，加上你的边距宽度、填充和 Locations 元素宽度，你会有这样的东西：

```
@media (min-width: 956px) { 
#regions {
width: 636px;
}
} 
```

它需要 956px 宽才能显示三个。所以你可以在它下面有另一个媒体查询，如下所示：

```
@media (min-width:1276px) { 
#regions {
width: 956px;
}
} 
```

你可以包括`max-width:955px`来解释一切。您可以使用这样的媒体查询，以便在调整页面时，它将在一行中显示尽可能多的照片，并显示 Locations 元素。

看看我做的 JSFiddle，[这里](http://jsfiddle.net/bozdoz/m3ChW/)，作为一个例子。[可能想在此处](http://fiddle.jshell.net/bozdoz/m3ChW/show/)查看全屏版本，以了解更改浏览器窗口宽度时它是如何工作的。

# jquery - $.post / $.ajax 代码在超时后完成，但仍执行来自服务器的调用

> ID：12755778
> 
> 赞同：1
> 
> 时间：2012-10-06T00:53:43.903
> 
> 标签：jquery, post

我按顺序创建了一系列 $.post，其中下一个 $.post 在加载完成时作为回调加载。

```
 $.post("test", function() {
      alert("success");
    })
    .complete(function() { 
         //LOAD NEXT SEQUENCE OF POST HERE
    }); 
```

我的问题是，如果我的第一个序列在 2 分钟内加载，那么我需要等待 2 分钟才能看到下一篇文章。我想要做的是即使第一个序列尚未完成，五秒钟后，将执行下一个加载。我已经阅读了有关 $.ajax 超时的信息，但我不希望它停止执行来自服务器的调用......我只想确保在 5 秒超时后加载下一个序列。

这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:57:14.207

您可以使用 setInterval 函数

```
function Yourfunction()
{
    //here you need to do post one after other 
    $.post("test", function() {
      alert("success");
    }).complete(function() { 
     //Here if your interval is not elapsed and completed triggered then your next post will be loaded.
     //LOAD NEXT SEQUENCE OF POST HERE/ 
    });
}
setInterval(Yourfunction, 5000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:59:31.593

您只需将该方法包装在 setTimeout 中，并在您想要开始下一次尝试时调用它。

```
var timer;
function attemptNext()
{
    timer = setTimeout(tryPost, 5000);
}

function tryPost()
{
    clearTimeout(timer);
    attemptNext('MY URL');
    $.post("test", function() {
        alert("success");
    })
    .complete(function() { 
        tryPost();
    });
} 
```

# jquery-mobile - 使用 jQuery Mobile 1.0。无法滚动到移动设备中的窗口顶部

> ID：12755779
> 
> 赞同：0
> 
> 时间：2012-10-06T00:53:47.697
> 
> 标签：jquery-mobile

我正在使用 jQuery Mobile 1.0 有一个包含 100 个项目的列表视图。

当我一直滚动到底部并导航回上一个屏幕时，现在回到带有 3 或 4 个项目的列表视图时，我会在滚动区域中看到一个空白区域。

我认为它记得我之前向下滚动的位置在哪里，然后它会保持它。对于包含较少项目的列表视图，我无法进入列表顶部。

我尝试了几件事，例如：

```
$.mobile.silentScroll and $(window).scroll(0,0) 
```

和

```
$(document).scrollTop(0,0) 
```

但没有成功。

你能给些建议么？

我在 DOM 中的内容是一个带有`data-content = scroller`--> 带有表单的 div --> 列表视图的 div。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:55:36.220

在**mobileinit**事件中，输入以下代码：

```
$('#uptotop').live('click', function() {
               $('body, html').animate({scrollTop: '0px'}, 1000, function(){
               $('body').clearQueue(); });
}); 
```

然后你可以像这样创建一个**按钮**：

```
<a id="uptotop" data-role="button" data-icon="arrow-u">Back to Top!</a> 
```

我已经在 IE8+、Firefox、Chrome、ipad 的 Safari 上进行了测试，它运行良好 :)

# sandbox - 自由储备沙盒

> ID：12755798
> 
> 赞同：-1
> 
> 时间：2012-10-06T00:59:13.960
> 
> 标签：sandbox, paypal-ipn

我正在尝试将 Liberty Reserve API 集成到我的网站中，以接受 Paypal 和 Payza IPN 等付款。是否有可供测试的沙箱，因为我似乎找不到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:30:36.827

好的，我已经解决了这个问题。是的，可以进行测试，但它不像 Paypal 和 Payza 沙盒。

# linux-kernel - 学习linux网络栈

> ID：12755801
> 
> 赞同：1
> 
> 时间：2012-10-06T01:00:02.363
> 
> 标签：linux-kernel

我正计划深入研究 Linux TCP/IP 堆栈。我应该研究哪个内核版本的源代码树——它在概念上应该更接近当前的内核代码，但更容易掌握和理解。或者我应该研究像 lwip 这样的其他项目。

我的目标是了解有关设备驱动程序级别以上网络的所有内容。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:39:31.687

`lwip`是一件好事。这是基本功能的一个非常简单的实现。此外，您可以轻松地在用户空间中创建两个“虚拟主机”以查看它的运行情况——例如，只需创建两个通过管道相互通信的进程。这样你就可以得到基本的了解。那么你绝对应该看看现代`linux`代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:22:32.410

我从一位网络程序员那里得到的一个建议是首先查看内核 1.0 源代码，然后逐渐使用最新的 3.X 内核源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T04:34:29.643

`uname -r`安装最近的 linux 发行版（例如 Ubuntu），并通过执行命令查看它使用的内核版本。下载此命令显示的版本。

linux内核编译的第一步是配置设置。通过下载与您的发行版安装的内核版本相同的内核版本，您将能够`make oldconfig`毫不费力地运行和导入所有这些配置，因此您可以专注于学习网络堆栈的实现。

# ember.js - ember-data 真的支持嵌套 url 吗？

> ID：12755802
> 
> 赞同：10
> 
> 时间：2012-10-06T01:00:18.567
> 
> 标签：ember.js, ember-data

我有一个顶级会话对象，它下面可以有许多发言者。

我的 REST ish 端点允许我像这样获取所有会话

/会话/

我可以像这样让给定会话的所有演讲者

/会话/1/演讲者/

使用当前版本的 ember-data，我可以看到它正在尝试使用此 url 查找所有发言者

/演讲者/

使用下面的数据模型

```
CodeCamp.Session = DS.Model.extend({
  id: DS.attr('number'),
  name: DS.attr('string'),
  speakers: DS.hasMany('CodeCamp.Speaker',{nested: true})                                                          
});

CodeCamp.Speaker = DS.Model.extend({
  id: DS.attr('number'),
  name: DS.attr('string'),
  session: DS.belongsTo('CodeCamp.Session',{nested: true})
}); 
```

我添加了“nested:true”部分，因为我希望 ember-data 构建所需的

/sessions/%@/演讲者/

但这并没有发生——

我知道我可以手动定义一个 url

```
CodeCamp.Speaker.reopenClass({
  url: 'sessions/%@/speakers/'
}); 
```

但是在这样做时，我需要在基本 REST 适配器中滚动我自己的“buildURL”方法，以便它寻找这样的格式并在必要时添加父 ID（如果可能的话，我宁愿不这样做）

ember-data 是否支持开箱即用的类似功能，还是我会被迫自己编写大量代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T01:30:48.873

`{nested: true}`还不是一个功能。[拉取请求仍处于打开状态。](https://github.com/emberjs/data/pull/257)

覆盖并使用适配器[`findQuery()`](https://github.com/emberjs/data#findquery)使用这样的 URL 发出 GET 请求。

此外，如果您的服务器是 Rails（也许这适用于其他框架），则可以通过将父 ID 作为查询字符串参数传递来保持请求 URL 单级：

```
/speakers?session_id=1 
```

# python - 没有名为 opengl.opengl 的模块

> ID：12755804
> 
> 赞同：0
> 
> 时间：2012-10-06T01:00:43.933
> 
> 标签：python, macos, import, pyopengl

我正在尝试在我的 mac 上运行 python 脚本。我收到错误消息：-

> ImportError：没有名为 opengl.opengl 的模块

我google了一下，发现我缺少pyopengl。我安装了pip。我转到目录pip-1.0然后说

> sudo pip install pyopengl

我相信它安装正确，因为我得到了这个

> 成功安装 pyopengl 清理...

在最后。我重新运行脚本，但仍然遇到同样的错误。有人可以告诉我我可能遗漏了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:45:46.750

它在 Python 路径中吗？也许尝试这样的事情：

```
import sys  
sys.path.append(opengl-dir)  
import opengl.opengl 
```

将 opengl-dir 替换为您安装的目录...也许试试 RocketDonkey 的建议...我不知道，真的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:48:29.350

多谢你们！我想通了。它实际上是一个单独的模块，我需要将它复制到“站点包”位置并且它工作正常。所以总而言之，路径没有问题，只是相应的模块不存在。

# php - 将ajax成功消息的结果拆分为2个div？

> ID：12755814
> 
> 赞同：0
> 
> 时间：2012-10-06T01:02:28.930
> 
> 标签：php, javascript, jquery

我使用此函数将发布请求发送到 PHP 文件

```
$.ajax({
                    url: "example.php",
                    type: "POST",     
                    data: { 
                        name: name,
                        address: adress
                    }, 
                    success: function(data) {
                         $("#name").html(data);

                    }          
                }); 
```

它工作得很好，并在名称 div 处显示所有成功消息（PHP 文件输出）

我需要的是拆分此消息，以便名称的成功消息出现在“#name”中，地址的成功消息出现在“#adress”中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:13:51.737

在这种情况下，我通常会做的不是得到我使用的一个答案

```
 json_encode(array()); 
```

在我的 php 文件中，所以我可以有某种数组，如：

```
 responseArray=array('name'    => 'the name',
                        'address' => 'the address'); 
```

而不是使用 $.ajax 在你的 js 文件中使用 $.getJSON

```
 $.getJSON('ajax/test.json', function(data) {
      var items = [];
      $.each(data, function(key, val) {
        if(key=='name'){
          $('#namesdiv').html(val);
        } else {
          $('#addressdiv'.html(val);
        }
       }
      });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:29:58.483

尝试这样的事情，我已经使用它并且它有效：

> $.ajax({
> 
> ```
>  url: "example.php",
> 
>                type: "POST",     
> 
>                data: { 
> 
>                    name: name,
> 
>                    address: adress
> 
>                }, 
> 
>                success: function(data) {
> 
>                     $("#name").html($(data).find('#your_element').html());
> 
>                }          
> 
>            }); 
> ```

# php - textarea(s)字符倒计时的javascript onload事件

> ID：12755817
> 
> 赞同：0
> 
> 时间：2012-10-06T01:03:10.707
> 
> 标签：php, javascript

我正在从数据库中提取数据并将其显示在文本区域中。我有一个字符倒计时javascript。正在为数据库/表中的每个条目重复文本区域。

```
<SCRIPT type="text/javascript">
<!-- Begin
    function textCounter(field,cntfield,maxlimit) {
        if (field.value.length > maxlimit) // if too long...trim it!
            field.value = field.value.substring(0, maxlimit);
// otherwise, update 'characters left' counter
        else
            cntfield.value = maxlimit - field.value.length;
}
//  End -->
</script> 
```

这是php：

```
echo "<b>$ID : $adname</b><br /><a href=\"?action=deletead&IDnum=$ID\">Delete Ad</a><br /><br />\n";
    echo "Preview :<br /><div class=\"adcode\">$adcode</div><br /> \n";
    echo "<br />\n";
    echo "<form action=\"displayads.php\" name=\"addAD$ID\" method=\"post\">\n";
    echo "AD code (can be any type of script) text link, javascript or banner :<br />\n";
    echo "Code :<br /><textarea name=\"adcode$ID\" wrap=\"physical\" cols=\"60\" rows=\"5\" onKeyDown=\"textCounter(document.addAD$ID.adcode$ID,document.addAD$ID.remLen$ID,5000)\" onKeyUp=\"textCounter(document.addAD$ID.adcode$ID,document.addAD$ID.remLen$ID,5000)\">$adcode</textarea>";
    echo "<br /><input readonly type=\"text\" name=\"remLen$ID\" size=\"3\" maxlength=\"3\" value=\"5000\">Characters Left \n";
    echo "<input type=\"submit\" name=\"editad$ID\" value=\"Edit AD Code\"></form>\n";
    echo "<br /><hr />"; 
```

问题是如何执行加载页面加载事件以使具有唯一名称 textarea name=\"adcode$ID\" 的所有 textarea(s) 反映正确的加载字符数。相反，现在它仅在您更改文本区域中的信息时才反映正确的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:13:37.287

一种快速而肮脏的方法是遍历文本区域并触发绑定到`onkeyup`事件的函数......

```
(function () {
    var textareas = document.getElementsByTagName('textarea'),
        i = 0;
    for (i = 0; i < textareas.length; i += 1) {
        textareas[i].onkeyup();
    }
}());​ 
```

**更新：**

是的，这应该在加载时运行，或者至少在文本区域渲染之后运行。

```
function addHandler(obj, evType, fn) {
    if (obj.addEventListener) {
        obj.addEventListener(evType, fn, false);
        return true;
    } else if (obj.attachEvent) {
        var r = obj.attachEvent("on" + evType, fn);
        return r;
    } else {
        return false;
    }
}
addHandler(window, 'load', function () {
    var textareas = document.getElementsByTagName('textarea'),
        i = 0;
    for (i = 0; i < textareas.length; i += 1) {
        //fire off the "onkeyup" handler.
        textareas[i].onkeyup();
    }
}); 
```

或者：

```
<!-- this script block should be inserted after all of the textareas. -->
<script type="text/javascript">
    (function () {
        var textareas = document.getElementsByTagName('textarea'),
            i = 0;
        for (i = 0; i < textareas.length; i += 1) {
            //fire off the "onkeyup" handler.
            textareas[i].onkeyup();
        }
    }());
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:25:15.707

或者你可以在 php 中处理它：

```
$adcode = substr($adcode,0,5000);

echo '<input readonly type="text" name="remLen' . $ID . '" ' .
         'size="3" maxlength="3" value="' . (5000 - strlen($adcode)) . '">' . 
         'Characters Left' . PHP_EOL; 
```

# jquery - 移动设备覆盖不适合屏幕

> ID：12755820
> 
> 赞同：-1
> 
> 时间：2012-10-06T01:03:53.483
> 
> 标签：jquery, html, css

我使用以下 CSS 创建了一个简单的 div 叠加层：

```
position:absolute;
top:0;
left:0;
display:none;
cursor:default;
z-index:101;
width:100%;
height:100%; 
```

jQuery 用于淡入。在所有浏览器上都运行良好，但在移动设备上查看时，div 不是 100% 高。我还尝试了以下方法：

将 div 的尺寸设置为`screen.width`和`screen.height...`相同的结果

将`<meta name="viewport" content="width=device-width,initial-scale=1" />` 标签添加到索引中......这搞砸了很多东西，并使覆盖层大约是手机宽度的 25%......

我以前从未遇到过这样的问题，而且似乎看不到 CSS 有任何问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:14:39.827

尝试更改`position:absolute`为`position:fixed`.

```
position:fixed;
top:0;
left:0;
bottom:0;
right:0;
opacity:.5;
cursor:default;
z-index:101;
width:100%;
height:100%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:24:00.010

尝试放弃高度，并将底部设置为 0

```
position:absolute;
top:0;
left:0;
bottom: 0;
right: 0;
display:none;
cursor:default;
z-index:101; 
```

但是，如果可能的话，屏幕会很好。

# fortran - 在 Fortran 2003 中测试空参数

> ID：12755824
> 
> 赞同：2
> 
> 时间：2012-10-06T01:04:58.040
> 
> 标签：fortran, fortran2003

我已经声明了一个递归类型：

```
type treeNode
private
  class(treeNode), pointer  :: left     => null()
  class(treeNode), pointer  :: right    => null()
contains 
 procedure, non_overridable    :: IsNull           ! Returns true if link is null
end type treeNode 
```

我现在希望实现“IsNull”功能。

```
! ----
pure function IsNull( theNode )
  logical(LGT)  :: IsNull
  class(treeNode), pointer, intent(IN)  :: theNode

  IsNull = .not. associated( theNode )

end function IsNull 
```

Gfortran 抱怨指针属性：“错误：'isnull' 在 (1) 处的传递对象虚拟参数不能是指针”

如果我删除指针属性，替换为目标属性（或什么都没有），我将无法使用关联的构造。gfortran 也不会让我测试与 null() 的等价性。

问题：如何测试实际参数是否为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T01:42:33.367

你不能，反正不是这样。请参阅 F2008 的 4.5.4.5 中描述的传递对象虚拟参数的特征。此外，如果用于引用过程的对象（object%IsNull() 中的对象）未关联，那么您的程序可能无论如何都会爆炸（您违反了 F2008 12.5.1p2）。

你真的需要 IsNull 过程来进行类型绑定吗？您可以只使用“常规”程序吗？

# c++ - 为什么stl不提供c样式列表？

> ID：12755837
> 
> 赞同：1
> 
> 时间：2012-10-06T01:08:14.840
> 
> 标签：c++, list

我想要提供的东西：

```
std::list head;
std::list::node node;
while (node = head->next) {
    do something with this node
}; 
```

列表没有下一个指针对我来说很奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T01:22:23.023

由于 C++11 stl 有一个单链表。它的使用类似于普通的双链表。

尤其：

```
std::forward_list<node> my_list;

for(auto iter = my_list.begin(); iter != my_list.end(); ++iter)
{
   node &curr_node = *iter;
   // Do something with curr_node.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T01:24:16.983

**确实如此**。只是界面发生了变化。

1.  `std::list`就像您的链表一样存储项目。如果您查找 GCC 4.6.1 标准库源代码文件`std_list.h`，您会发现：

    ```
    struct _List_node_base
    {
       _List_node_base* _M_next;
       _List_node_base* _M_prev;
       //...
    }; 
    ```

    一个双链表。

2.  `std::list<T>::iterator`让您以与使用“下一个”指针相同的方式浏览所有元素。同一个文件，第 151 行，内容如下：

    ```
    _Self&
    operator++()
    {
      _M_node = _M_node->_M_next;
      return *this;
    } 
    ```

3.  对程序员隐藏所有实现细节的原因之一是它可以让您轻松更改容器。如果出于性能原因，您想使用另一个容器或制作自己的容器，则只需更改类型即可。

    ```
    typedef std::list<MyItems> itemContainer;
    for (itemContainer::const_iterator it = allItems.begin(); it != allItems.end(); ++it) 
    {
         // do something
    } 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T01:27:39.327

列表的实际实现是隐藏的。由于标准规定元素在给定位置的插入和擦除应该可以在恒定时间内进行，我们可以假设将使用像节点这样的东西：

> ## 23.3.5 类模板列表[列表]
> 
> ### 23.3.5.1 类模板列表概述[list.overview]
> 
> A`list`是一个序列容器，它支持双向迭代器，并允许在序列中的任何位置进行恒定时间的插入和擦除操作，并自动处理存储管理。与向量 (23.3.6) 和双端队列 (23.3.3) 不同，不支持对列表元素的快速随机访问，但许多算法无论如何只需要顺序访问。

然而，关于 C++ 容器的重要一点是它们都提供了相同的接口来实际遍历内容：**迭代器**：

```
for(std::list<double>::iterator it = list.begin(); it != list.end(); ++it){
   *it += 3.0; // add 3.0 to each element
} 
```

如果您将列表视为 C 风格的对象

```
struct node{
    struct node * next;
    struct node * prev;
    double value;
};

struct list{
    struct node * first;
    struct node * last;
} 
```

上面的循环有点等价于

```
for(struct node * it = list.first; it != list.last + 1; it = it->next){
   *it += 3.0; // add 3.0 to each element
} 
```

但是，诸如此类`it = it->next`的东西隐藏在`std::list::iterator`. 由于它们为所有类提供了几乎*统一的接口，因此您应该学习使用它们。

* 有些确实提供了比其他更多的功能，例如`RandomAccessIterators`vs. `BidirectionalIterators`，但这是您稍后将了解的内容。

# php - 原则 2，删除关联 SET NULL 返回空对象而不是 NULL

> ID：12755841
> 
> 赞同：0
> 
> 时间：2012-10-06T01:08:48.083
> 
> 标签：php, symfony, doctrine-orm

使用 Doctrine，我有 2 个类它们之间的关系是 OneToMany/ManyToOne：

```
>> ZipGroup Class
/**
 * @ORM\OneToMany(targetEntity="License", mappedBy="zipGroup")
 */
protected $licenses;

>> License Class
/**
 * @ORM\ManyToOne(targetEntity="ZipGroup", inversedBy="licenses")
 * @ORM\JoinColumn(name="zipGroup_id", referencedColumnName="id", onDelete="SET NULL")
 */
protected $zipGroup; 
```

在我的单元测试期间，我验证当我删除一个 zipgroup 时，它在许可证中正确设置为 null。问题是，当我从存储库加载许可证时，似乎我得到了一个虚拟的空对象（没有 ID）而不是 NULL。也许它是一个缓存版本？

```
...
$this->_em->remove($zipGroup);
$this->_em->flush();

$zipGroup = $this->_em->getRepository("BarcodePhpBundle:ZipGroup")->findOneByName("ZipGroupName");
$this->assertEquals(NULL, $zipGroup);

// License is NOT removed
$license = $this->_em->getRepository("BarcodePhpBundle:License")->findOneByPrice(25);
$this->assertEquals(25, $license->getPrice());

// BUG HERE, that value is not null, but I get an dummy object
$this->assertEquals(NULL, $license->getZipGroup()); 
```

查看数据库，该行是 NULL，但 Doctrine 并没有说 NULL ......

任何的想法？

看起来像这个问题： [如何在 symfony 1.4 中正确处理相关的空对象](https://stackoverflow.com/questions/6993635/how-to-handle-related-null-objects-correctly-in-symfony-1-4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:06:33.357

实体经理被移除后没有被清除。为了清除身份映射，必须调用以下代码：

$this->_em->clear();

来自：[https ://groups.google.com/forum/#!msg/doctrine-user/73c6h4JgLRY/sQvBjSjzrWsJ](https://groups.google.com/forum/#!msg/doctrine-user/73c6h4JgLRY/sQvBjSjzrWsJ)

# c++ - 如何将QWidget的背景放在QGridLayout中的其他小部件下

> ID：12755842
> 
> 赞同：0
> 
> 时间：2012-10-06T01:09:30.257
> 
> 标签：c++, qt, background-image, qwidget, qlabel

我花了几个小时试图理解（谷歌搜索）为什么我的小部件没有显示在我用作 Windows 的 QWidget 子项中。

孩子大多是 QLabel 和一些 QSlider。布局是一个 QGridlayout

这是我的一些窗口代码：

```
FenPrincipale::FenPrincipale()
    {
        this->setWindowTitle("Premier Test");
        this->resize(400, 200);
        QPalette palette;
        palette.setBrush(this->backgroundRole(), QBrush(QImage("images/metal400x200.png")));

        this->setPalette(palette);
        /*
        this->setStyleSheet("background-image: url(images/metal400x200.png); "
                            "background-position: top left; "
                            "background-repeat: repeat-xy;"
                            );
        */

        buildChildren();
        buildLayout();

        this->setLayout(layout_principale);
    } 
```

**编辑：**

我的孩子是如何建造的

```
void FenPrincipale::buildChildren()
{
    m_title = new QLabel("MonTest");
    m_nextPageButton = new QLabel(">");

    m_line = new QLabel("Slide here");
    m_labelSlider = new QSlider;
    m_result = new QLabel("Result");

    /* 
     * Other children is set here...
    */
} 
```

瞧，结果：

![在此处输入图像描述](../Images/75d5bf8d66d494d250874576412b8fc9.png)

我尝试更改字体和其他方法来设置背景，但背景总是显示在其他小部件上。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:31:58.917

看起来您与样式表实现很接近。我得到以下正确的结果：

```
setStyleSheet("QMainWindow { background-image: url(:/images/metal400x200.png) } "); 
```

# asp.net - 可以从字符串中获取值

> ID：12755846
> 
> 赞同：0
> 
> 时间：2012-10-06T01:10:40.863
> 
> 标签：asp.net

所以我试图让用户输入点击按钮后显示的信息。我收到消息，但它不会显示输入到文本框中的值。我错过了什么？这是我的代码

```
private string _eyecolor;
    public string Eyecolor
    {
        get { return _eyecolor; }
        set
        {
            if (!string.IsNullOrEmpty(value))
            {
                _eyecolor = value.Substring(0, 1).ToUpper() + value.Substring(1);
            }
            else
            {
                _eyecolor = value;
            }
        }
    }

    public string getEyeColor()
    {
        return "You have " + _eyecolor + "eyes!!";
    } 
```

这是我的html代码：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:Label runat="server" ID="lbl_1" AssociatedControlID="txtb1" Text="what is your eyes color?" Autopostback="true" />
    <asp:TextBox ID="txtb1" runat="server" />
    <asp:Button ID="btn_submit" Text="Submit" runat="server" OnClick="subSubmit" />
    <asp:Label runat="server" ID="lbl_output" />
    </div>
    </form>
</body>
</html> 
```

和我的代码隐藏：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
   Profile P = new Profile();
    protected void Page_Load(object sender, EventArgs e)
    {

    }
protected void  subSubmit(object sender, EventArgs e)
{
   lbl_output.Text=P.getMsg();
   lbl_output.Text+=P.getEyeColor();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:13:12.543

您需要一些输入控件，并且已将其值分配给某些 gui 控件以使其显示。

**在 html 中**

```
<asp:TextBox id="txtInput" runat="server" Text="Blue" ></asp:TextBox>
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
<asp:Label id="lbl" runat="server" ></asp:Label> 
```

**在后面的代码中**

```
protected void Page_Load(object sender, EventArgs e)
{
    Eyecolor = "Blue";
    lbl.Text = getEyeColor();
}

protected void Button1_Click(object sender, EventArgs e)
{
      lbl.Text = txtInput.Text;
} 
```

**作为有问题的更新。**

您有来自用户的输入，但没有在输出中使用它。`You need to show txtb1 text in lbl_1 Text`. 这可以通过声明来完成

lbl.Text = txtInput.Text;

您正在使用 Profile 类对象，并且您没有为 Profile 类对象属性分配颜色，`if you do not want txtb1 color then you have to assign color to profile object before assigning to lbl_1 text`这没有多大意义，但为了理解您需要类似的东西。

```
protected void  subSubmit(object sender, EventArgs e)
{
   //lbl_output.Text=P.getMsg();
   P.Eyecolor = "Blue";
   lbl_output.Text+=P.getEyeColor();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:36:12.397

正如 Adil 非常正确地指出的那样，您需要从`<asp:TextBox>`输入中获取值并将其分配给您的 property `Eyecolor`。

由于`getEyeColor`是您发布的代码中`Profile`对象的函数`P`，请尝试将您的提交处理程序更改为以下内容：

```
protected void subSubmit(object sender, EventArgs e)
{
    P.Eyecolor = txtb1.Text.Trim; //Add this to set the Eyecolor to user input.
    lbl_output.Text = P.getMsg();
    lbl_output.Text += P.getEyeColor();
} 
```

# iphone - 图像超过 iPhone 5 上的整个屏幕

> ID：12755853
> 
> 赞同：0
> 
> 时间：2012-10-06T01:12:45.543
> 
> 标签：iphone, ios, xcode, autolayout

我正在创建一个以横向模式显示的应用程序。我遇到的是我有一个横跨屏幕的图形。我如何用这个来解释 iPhone 和 iPhone 5。我有一个 60px 高的 UIImageView，需要在屏幕上一直拉伸。根据我的阅读，没有命名约定表明我使用的是 iPhone 5 图形。我是否需要制作一张 1136X120（iPhone 5）的图形，一张 960X120（iPhone 4s）和一张 480X60（iPhone 4）的图形。我担心的是，如果我只为 iPhone 5 和 iPhone 4s 使用 1136X120，它会将 1136 压缩到 960，这是它的工作原理还是我可以做些什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:30:31.960

据我所知，iPhone 5 图像没有任何特定的命名约定。取而代之的是，使用与常规图像不同名称的 @2x 图像。然后，在您的应用程序中，检查当前设备是否是 iphone 5 屏幕，如果是，则使用其他图像。我建议将这样的函数添加到类中，然后将该类添加到预编译的头文件 (.pch) 中，以便在整个应用程序中都可以访问它。

```
BOOL iPhone5Screen()
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    return NO;
} else {
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        CGFloat scale = [UIScreen mainScreen].scale;
        result = CGSizeMake(result.width * scale, result.height * scale);
        //
        if(result.height >= 1136){
            return YES;
        } else {
            return NO;
        }
    } else {
        return NO;
    }
}

} 
```

# xcode - 在同一设备上同时测试多个项目。

> ID：12755855
> 
> 赞同：1
> 
> 时间：2012-10-06T01:13:04.887
> 
> 标签：xcode

我提前道歉，因为我只在 Xcode 中工作了几个星期……有没有办法在同一设备上测试多个项目，更重要的是，同时测试。每次我在设备上测试一个新项目时，之前的项目都会被删除/替换。我确信有一个简单的解决方案，我只是找不到它。

# mongoose - 人类可读的猫鼬错误

> ID：12755856
> 
> 赞同：2
> 
> 时间：2012-10-06T01:13:10.520
> 
> 标签：mongoose

是否有清理猫鼬返回的错误的最佳实践？例如，在保存时，我收到以下重复键错误：

`MongoError: E11000 duplicate key error index: dev.users.$username_1 dup key: { : "dweldon" }`

我想向用户返回一些有用的东西，但现在我正在解析控制器中的错误字符串，这闻起来像是一杯热腾腾的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:10:12.873

不要解析字符串，检查对象的数字`code`属性`MongoError`并根据指示的错误类型向用户提供合理的反馈。在您的示例中，代码值为`11000`.

# objective-c - 距离计算的错误是客观的 C

> ID：12755859
> 
> 赞同：0
> 
> 时间：2012-10-06T01:13:41.833
> 
> 标签：objective-c, ios, mongodb, distance

我正在尝试了解休斯顿德克萨斯州和旧金山（Apple 总部）之间的距离，并且得到了一些没有意义的疯狂结果。

我在德克萨斯州休斯顿和旧金山之间得到的距离是：217.52603273007 使用两个纬度/经度坐标之间的距离属性

然后我使用以下代码尝试通过乘以 3959 来获得以英里为单位的距离

```
 NSNumber * distanceMiles = [NSNumber numberWithInteger:[[classified valueForKeyPath:@"distance"]intValue] * 3959];

    cell.distance.text = [NSString stringWithFormat:@"%@ miles", distanceMiles]; 
```

我得到 859103 这没有任何意义！！！

我究竟做错了什么？

加利福尼亚州旧金山和德克萨斯州休斯顿之间的距离（乘飞机）约为 1651 英里（2658 公里）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:09:40.823

我不确定您输入的哪一部分可能是错误的，但这是我按照您[链接](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)的文档所做的。

```
db.geo.insert({city:"Houston",coord:[95.3631, 29.7631]})
db.geo.ensureIndex({coord:'2d'})
db.runCommand({ geoNear : "geo", near : [122.0311, 37.3231], spherical : true, maxDistance : 1})
{
    "ns" : "so.geo",
    "near" : "1110001101101100111000000110111000010111001101100110",
    "results" : [
        {
            "dis" : 0.4081109209840864,
            "obj" : {
                "_id" : ObjectId("506f9a035a6639f6e19a3dea"),
                "city" : "Houston",
                "coord" : [
                    95.3631,
                    29.7631
                ]
            }
        }
    ]
       ... 
```

# c# - 带有 WebBrowser (WinForms) 控件的 C# 应用程序导致 vshost 在一段时间后崩溃

> ID：12755863
> 
> 赞同：0
> 
> 时间：2012-10-06T01:14:22.513
> 
> 标签：c#, winforms, browser

下面是我的代码，当我运行这段代码时会发生什么，首先它自由运行了大约一个小时（消耗大量内存 - 从大约 400MB RAM 开始，上升到 1GB），但大约一个小时后 VSHOST 崩溃并且 Visual Studio 没有捕获任何异常。任何想法为什么会发生这种情况？tnx :)

```
 private void UpdateLastPosted()
    {
        WebClient wc = new WebClient();
        string html = wc.DownloadString("http://blogs.com/lastblogs.aspx");
        MatchCollection collection = Regex.Matches(html, @"blogs\.com/blogread\.asp\?blog=(\d+)");
        foreach (Match pend in collection)
        {
            pending.Enqueue(pend.Groups[1].Value);
        }
    }

    private void browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        if (((WebBrowser)sender).ReadyState == WebBrowserReadyState.Complete)
        {
            if (pending.Count > 0)
            {
                ((WebBrowser)sender).Stop();
                NavigateTo("http://blogs.com/blogread.asp?blog=" + pending.Dequeue());
            }
            else
            {
                UpdateLastPosted();
                UpdateMostActive();
                if (pending.Count > 0)
                {
                    ((WebBrowser)sender).Stop();
                    NavigateTo("http://blogs.com/blogread.asp?blog=" + pending.Dequeue());
                }
            }
        }
    }

    public void NavigateTo(string url)
    {
        browser.Navigate(url);
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-07T12:20:25.863

对于 html 页面中的每个元素，都会调用方法 browser_DocumentCompleted。尝试指定确切或相似的网址：

```
private void browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        if(e.Url.OriginalString.ToLower() == "http://www.myisite.com/contact.aspx")
        {
           ...... 
```

# node.js - 使用 node-http-proxy 重写响应头

> ID：12755865
> 
> 赞同：18
> 
> 时间：2012-10-06T01:15:08.210
> 
> 标签：node.js, node-http-proxy

我正在使用[node-http-proxy](https://github.com/nodejitsu/node-http-proxy/)并希望监视特定的响应标头并在必要时对其进行重写。这里有人有建议吗？

我的代理服务器位于几个不同的节点服务器以及一个 java webapp 前面。java 应用程序正在设置一个 cookie，但 cookie 有一个相对于 webapp 上下文的路径。我需要 cookie 是安全的，并且在不修改 Java 应用程序的情况下具有 root 路径。

换句话说，返回以下标头：

```
set-cookie: MYSPECIALCOOKIE=679b6291-d1cc-47be; Path=/app; HttpOnly 
```

我想将 Path 值重写为：

```
set-cookie: MYSPECIALCOOKIE=679b6291-d1cc-47be; Path=/; HttpOnly; Secure 
```

我不清楚如何使用 node-http-proxy 来做到这一点。建议？是否有中间件可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-23T14:13:33.930

您可以通过重载响应对象的 writeHead 函数来实现这一点。例如，此代码会将“foo”响应标头设置为值“bar”。我已经指出您可以在哪里添加自己的逻辑来更改标题值。

JavaScript 不是我的主要语言，因此可能有一种更惯用的方式来重载 writeHead 方法。

```
httpProxy = require('http-proxy');

httpProxy.createServer(function (req, res, proxy) {

  res.oldWriteHead = res.writeHead;
  res.writeHead = function(statusCode, headers) {
    /* add logic to change headers here */
    var contentType = res.getHeader('content-type');
    res.setHeader('content-type', 'text/plain');

    // old way: might not work now
    // as headers param is not always provided
    // https://github.com/nodejitsu/node-http-proxy/pull/260/files
    // headers['foo'] = 'bar';       

    res.oldWriteHead(statusCode, headers);
  }

  proxy.proxyRequest(req, res, {
    host: 'localhost',
    port: 3000
  });
}).listen(8000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-12T05:39:55.643

只需听`proxyRes`事件并输入您的逻辑即可。

```
proxy.on('proxyRes', (proxyRes, req, res) => {
    // modifying headers goes here
}); 
```

见[https://www.npmjs.com/package/http-proxy#listening-for-proxy-events](https://www.npmjs.com/package/http-proxy#listening-for-proxy-events)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-07T11:23:20.527

我没有测试此代码，但它应该允许您在发送请求之前编辑您的标头。让我知道它是否有效。

```
var httpProxy = require('http-proxy');

var server = httpProxy.createServer(function (req, res, proxy) {
  var buffer = httpProxy.buffer(req);
  req.headers['x-host'] = process.env.PROXY_URI;
  proxy.proxyRequest(req, res, {
    host: '127.0.0.1',
    port: 9000,
  });
}); 
```

# ruby-on-rails - Rails：常量未初始化

> ID：12755867
> 
> 赞同：0
> 
> 时间：2012-10-06T01:15:20.750
> 
> 标签：ruby-on-rails

我正在尝试使用不同的条带键（信用卡支付处理系统），具体取决于我是在测试/开发还是生产/根据我在 StackOverflow 上看到的建议，我做了以下操作：

在我的 /config/initializers/stripe.rb 文件中，我有以下内容：

```
STRIPE_CONFIG = begin
  config = YAML.load(File.open(Rails.root.join('config', 'stripe.yml')))
  config = config[Rails.env] || {}
  config.to_options
end 
```

在我的 /config/stripe.yml 文件中，我有以下内容：

```
default: &default
  Stripe.api_key:    "testapikeycode"
  STRIPE_PUBLIC_KEY: "testpublickeycode"

development:
  <<: *default

test:
  <<: *default

production:
  Stripe.api_key:    "productionapikeycode"
  STRIPE_PUBLIC_KEY: "productionpublickeycode" 
```

但是，当我进入控制台（rails 控制台）时，我输入

```
puts STRIPE_PUBLIC_KEY 
```

我收到以下错误消息：

```
NameError: uninitialized constant STRIPE_PUBLIC_KEY 
```

有任何想法吗？

# 替代方法

仅使用 stripe.rb，并在其中包含以下内容：

```
if Rails.env == 'production'
  Stripe.api_key:    "productionapikeycode"
  STRIPE_PUBLIC_KEY: "productionpublickeycode"
else
  Stripe.api_key:    "tesapikeycode"
  STRIPE_PUBLIC_KEY: "testpublickeycode"     
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:38:46.337

STRIPE_PUBLIC_KEY 是您的 yaml 配置文件中的一个键，您实际上从未将其初始化为常量。如果你键入`p STRIPE_CONFIG['STRIPE_PUBLIC_KEY']`，你应该得到你想要的结果。

撇开我想`YAML.load`应该是`YAML.load_file`。

# logging - 如何在 XAMMP 中启用错误报告

> ID：12755868
> 
> 赞同：0
> 
> 时间：2012-10-06T01:15:30.393
> 
> 标签：logging, error-handling, reporting

我正在本地处理一个 PHP 脚本，该脚本在某处存在错误。

我正在使用最新版本的 XAMPP 进行本地开发。每当脚本导致错误时，我只会得到一个白色的空白页。

有没有办法可以将错误打印到屏幕上？

我检查了 Apache 和 PHP，据我所知，我启用了错误报告。

当我收到白色错误屏幕时，没有任何内容记录到 Apache 或 PHP 日志文件中。

尝试调试脚本非常令人沮丧。

会是浏览器的事情吗？我正在使用火狐。

任何提示将非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:43:11.297

这听起来像是语法错误（例如缺少右括号）。在脚本的开头放置一个 print 语句，并确保它确实在运行。如果不是，请寻找语法错误。

添加一些简单的内容来通知您脚本是否正在执行，例如`print("Starting script example.php");`

您还可以将其添加到您的 php.ini 文件中，以确保错误报告已打开： `error_reporting = E_ALL`

# php - 如何优化这个类结构

> ID：12755869
> 
> 赞同：1
> 
> 时间：2012-10-06T01:15:58.973
> 
> 标签：php, oop, class

我有一个 Articles 类，它必须存储这些字段：

*   article_id
*   姓名
*   title_es
*   title_zh
*   alias_es（url 的文章 slug）
*   alias_zh
*   描述_es
*   描述_zh
*   日期_c
*   日期_m
*   date_p

正如您可能已经猜到的那样，我需要它们同时使用英语和西班牙语。在这一点上没有问题，因为只有两种语言。

如果我将来需要添加更多内容怎么办？这个班级会变成怪物。那么，您将如何实施呢？

我能想到的唯一好的解决方案是将每种语言的任何文章拆分为不同的文章，添加一个语言字段，以及某种关系“文章（英语）-文章（西班牙语）”，可能在一个附加表中。我相信 Joomla 会做这样的事情。

您如何看待这种方法？是否可以在不为每种语言拆分文章的情况下对此进行有效实现？有什么设计模式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T01:19:12.277

我将只保留每个字段中的 1 个并添加一个语言字段。然后您可以创建 2 个文章对象，一个用于英语，一个用于西班牙语。根据用户选择的语言显示您需要的任何内容。

# r - 如何在 R 中使用 while 循环生成具有特定数字的矩阵？

> ID：12755872
> 
> 赞同：1
> 
> 时间：2012-10-06T01:16:55.500
> 
> 标签：r, loops, while-loop

我使用以下*for*循环生成了一个矩阵。
现在我正在尝试使用*while*循环生成相同的矩阵，但不知道该怎么做。
有人能帮忙吗？非常感谢。

```
i<- 1
j<- 1
m1<- matrix(0, nrow=5, ncol=5)
for(i in 1:5) {
for(j in i:5) {
m1[i,j]<- (j-i)*2+1
}
}
m1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:55:35.520

```
i <- 1
j <- 1
m1 <- matrix(0, nrow = 5, ncol = 5)
while (i <= 5) {
    while (j <= 5) {
        m1[i, j] <- (j - i) * 2 + 1
        j <- j + 1
    }
    i <- i + 1
    j <- i
}
m1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T10:06:18.027

那这个呢：

```
> m       <- matrix(0, nrow=5, ncol=5)
> mu      <- upper.tri(m)
> m[mu]   <- apply(which(mu, arr.ind=TRUE), 1, function(x) (x[2] - x[1]) * 2 + 1)
> diag(m) <- 1
> m
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    3    5    7    9
[2,]    0    1    3    5    7
[3,]    0    0    1    3    5
[4,]    0    0    0    1    3
[5,]    0    0    0    0    1 
```

* * *

**编辑：**抱歉，刚刚意识到您不想对任务进行矢量化，而是重写代码以使用`while`而不是`for`. 虽然我不知道为什么:)

# c++ - CDT 无法识别 GTK+，但编译时没有错误

> ID：12755873
> 
> 赞同：0
> 
> 时间：2012-10-06T01:17:33.453
> 
> 标签：c++, eclipse, gtk, eclipse-cdt

我已经在我的 linux 系统上安装`CDT`并`Eclipse Indigo`安装了`gtk+`库。然后我尝试从该站点编译一个示例，它编译并运行良好，但在编辑器中，它说很多错误，但编译器没有显示错误。

![我的日食](../Images/ec06ad619c8788c52f0838b0953a6604.png)

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:09:47.940

Resolved this issue by setting the include paths

```
[Alt+Enter] --> Paths and Symbols 
```

Add these for all the languages which exists.

```
/usr/include/atk-1.0
/usr/lib/i386-linux-gnu/gtk-2.0/include
/usr/include/gtk-2.0
/usr/include/cairo
/usr/include/glib-2.0 
```

![A GTK Window](../Images/c6983d5aecc8ff726fd2498c8e57dc1c.png)

# c - 为什么野牛在第一个令牌之后期待 $end ？

> ID：12755874
> 
> 赞同：2
> 
> 时间：2012-10-06T01:17:43.680
> 
> 标签：c, bison

当我将文件传递给野牛（通常的方式）时，它可以正常工作，它会解析文件并检查语法。但是，当我通过以下方式传递相同的字符串时：

```
yy_scan_string(string);
yylex();
yyparse(); 
```

它在第一个令牌之后崩溃，它说它正在等待`$end`。我应该以某种方式重置一些东西吗？这里的例子什么也没说。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T12:01:45.667

您错误地使用了 Bison。使用 Bison 时，您只需调用 yyparse()。你不调用 yylex()——当它需要一个令牌时，yyparse() 将调用该函数。

您正在做的是将字符串设置为输入，调用 yylex 找到一个标记并推进输入流。然后调用 yyparse()。这个 yyparse() 调用期望在从当前点（在 yylex() 抓取的第一个标记之后）到输入结尾的输入中找到一些东西，这会简化为语法中的一个句子。

问题是由于您的 yylex() 调用，它已经错过了一个令牌。

# ruby - 如何保存 Nokogiri 的结果

> ID：12755877
> 
> 赞同：1
> 
> 时间：2012-10-06T01:18:28.777
> 
> 标签：ruby, nokogiri

这是 ruby​​ 脚本的一部分。我想将结果保存到文本文件中。我只想要这两个 DIVS 中指定的结果。

```
url = browser.html
doc = Nokogiri::HTML(open(url))

price = doc.css("#sectionPrice").text
ship = doc.css("#shippingCharges td").text 
```

如何保存抓取的结果？请注意，加载页面的脚本工作正常。我`SHELL`可以使用 XPATH 看到我的抓取值，如下所示。

```
page_html = Nokogiri::HTML.parse(browser.html)
shipping = puts page_html.xpath(".//*[@id='shippingCharges']").inner_text
price = puts page_html.xpath(".//*[@id='sectionPrice']").inner_text 
```

如何将此数据保存为 CSV 或 XML？

//附带问题：返回的数据是否`SHELL`保存在任何地方？我如何在外部访问它`SHELL`

```
url = browser.html
doc = Nokogiri::HTML(open(url))

price = doc.css("#sectionPrice").text
ship = doc.css("#shippingCharges td").text

CSV.open("/users/fabio/desktop/ruby/gp.csv", "wb") do |csv|
  csv << [price, ship]
end 
```

不创建`CSV`文件。`DIR`What give? 什么都没有出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:36:33.000

将其写入 csv 文件非常简单。

只需添加以下内容：

```
require 'csv'

CSV.open("file.csv", "wb") do |csv|
  csv << [price, ship]
end 
```

如果 shipping 和 price 是数组，那么您将需要遍历它们，但这就是您创建 csv 的方式。

希望这能让你上路。

干杯!

# javascript - CSS margin-left 在 Chrome 扩展中中断

> ID：12755878
> 
> 赞同：3
> 
> 时间：2012-10-06T01:18:55.407
> 
> 标签：javascript, html, css, google-chrome-extension

我的情况非常混乱，我一点也不知道发生了什么。我制作了一个 Firefox 插件来使用 jQuery 和 CSS 重新设计一个网站。当我尝试将插件迁移到 Chrome 时（这部分很简单，因为我在每个 SDK 中使用的功能非常相似），除了主要设计元素之一之外，一切都正常：

我有一个与`position: fixed;`页面左侧对齐的菜单，`margin-left: 150px;`位于主容器元素上。问题是`margin`当我在 Chrome 中打开它时它完全消失了。它在 Firefox 中运行良好。

然后我将所有的 HTML、CSS 和 JavaScript 复制到一个 jsFiddle 中，并且边距工作正常。一切都完全相同，所以我不知道为什么它可以在 jsFiddle 中工作，但不能在网站上工作。

使用`left: 150px`工作，但随后页面向右溢出 150 像素，并且出现了那些可怕的水平滚动条。

链接：

扩展文件 (CRX)：[https ://docs.google.com/open?id=0B3k3BjZD2YfiTWNzTlhsa0t5STg](https://docs.google.com/open?id=0B3k3BjZD2YfiTWNzTlhsa0t5STg)

演示网站：[http](http://demo.flvs.net) ://demo.flvs.net （用户名：demo，密码：demo）

jsFiddle（有些图片无法加载，但代码相同）：http: [//jsfiddle.net/CjSXA/](http://jsfiddle.net/CjSXA/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:53:21.263

我刚刚从#page_cont 中删除了margin-left 并将其添加到#content-cont。

这使得内容不再隐藏在菜单下，尽管页脚仍然被它部分覆盖。

# angularjs - angularjs和模板表

> ID：12755881
> 
> 赞同：1
> 
> 时间：2012-10-06T01:19:49.530
> 
> 标签：angularjs, html-table

我想基于模型构建一个 html 表。

我想做这样的事情：

```
Student         | competence 1                        |
                | subject 1                | subject 2|
                | exam 1 | exam2 | average |          |
xxxxx yyyyyyyyy |   10   | 20    |   15    | 45       | 
```

这就是我试图做到这一点的方式：

```
table(ng-controller="ExaminationListCtrl")
  tr
    th(ng-repeat="(competence, s) in competenceToSubjectSize", colspan="{{s.length}}")
      {{competence}}
  tr
    th(ng-repeat="subject in subjects")
      {{subject.subject}} 
```

我的问题是我不能使用`colspan="{{s.length}}"`，在我看来，`"competence"`并且`s`只绑定到 th 元素的子元素我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T05:06:26.280

我错了，因为我们可以访问标有 ng-repeat 的范围的顶部标签

# c - 使用 LLVM 通过参数传递结构

> ID：12755882
> 
> 赞同：4
> 
> 时间：2012-10-06T01:20:03.940
> 
> 标签：c, llvm

是否可以通过参数传递结构？

它与 C abi 兼容吗？

**[编辑]**

基本上，我想要一个 C++ POD，它包含两个成员（结构将是一个胖指针，带有一个指针和一个整数），并且能够在调用指令中将此结构作为函数参数传递（即使在调用 C代码）。

我现在不使用胖指针（指针和整数都在不同的函数参数中），我想知道在开始相当大的重构之前是否有可能！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T02:34:09.790

你可以这样做。

[您可以通过将 C 代码复制并粘贴到位于http://llvm.org/demo/index.cgi](http://llvm.org/demo/index.cgi)的 LLVM 在线演示中来找出示例 C 的 LLVM 代码是什么。

如果您复制并粘贴 codepad.org 中的代码，您将看到 LLVM 为 myFunction 生成以下内容：

```
define void @_Z10myFunction10MyStruct_t(i8* %myStructAsParam.coerce0, i32     %myStructAsParam.coerce1) nounwind uwtable {
  %1 = tail call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([23 x i8]* @.str, i64 0, i64 0), i8* %myStructAsParam.coerce0, i32 %myStructAsParam.coerce1)
  ret void
} 
```

当然，如果您查看电话，您会注意到没有复制。这取决于调用函数。如果我们写一个小的 C 函数：

```
void myCallingFunction(MyStruct_t *foobar)
{
  myFunction(*foobar);
} 
```

我们可以看到为 myCallingFunction 生成的 LLVM 位码是：

```
define void @_Z17myCallingFunctionP10MyStruct_t(%struct.MyStruct_t* nocapture %foobar)   nounwind uwtable {
  %foobar.0 = getelementptr inbounds %struct.MyStruct_t* %foobar, i64 0, i32 0
  %tmp = load i8** %foobar.0, align 8
  %foobar.1 = getelementptr inbounds %struct.MyStruct_t* %foobar, i64 0, i32 1
  %tmp1 = load i32* %foobar.1, align 8
  %1 = tail call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([23 x i8]* @.str, i64 0, i64 0), i8* %tmp, i32 %tmp1) nounwind
  ret void
} 
```

调用函数制作结构的副本，然后传入副本的地址。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-06T01:58:50.650

绝对可以。这是一个例子：

```
struct MyStruct_t {
    char *charPointer;
    int number;
};

void myFunction(MyStruct_t myStructAsParam) {

    printf("String: %s, Number: %i", myStructAsParam.charPointer, myStructAsParam.number);
    // Your stuff here.
} 
```

# algorithm - 将 3D 网格细分为矩形块

> ID：12755886
> 
> 赞同：0
> 
> 时间：2012-10-06T01:23:26.240
> 
> 标签：algorithm, hpc

这似乎应该是一个相对简单的解决问题，但我很难找到解决方案。我正在尝试将整数宽度的 3 维立方空间划分为给定数量的整数宽度矩形细分。块不必具有相同的大小（因为这并不总是可能的），但目标是最大细分的体积尽可能小（因此它尽可能分布均匀）。最重要的是，细分的表面积应尽可能小（也就是说，2x2x2 细分优于 1x2x4）。

这是用来划分分布式计算的空间，所以这两个要求的目的是为了公平分配负载，减少处理器之间所需的通信。无论如何，对于这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:49:33.790

您的问题的标题不是很清楚，但您似乎正在寻找[空间分区算法](http://en.wikipedia.org/wiki/Space_partitioning)或[空间填充曲线](http://en.wikipedia.org/wiki/Space-filling_curve)，可能两者兼而有之。

### 更多细节：

上述两个主题密切相关，但根据您的具体问题，其中一个可能没用。

空间划分算法和数据结构通常用于管理固定空间并需要查找哪些（可能是移动的）对象位于该空间的哪个部分的应用程序中。因此，您递归地拆分卷以允许快速检索（和更新）卷的一部分中的对象列表。您甚至可以找到尝试平衡每个分区的对象数量的算法。

空间填充曲线都是关于以某人扫描不可变的多维坐标列表的方式施加顺序。在这种情况下，订单的属性（例如位置）至关重要。一旦你有一个班轮订单，你可以通过将它分成任意多的块来分发，每个块仍然具有良好的特性。

*这两个问题在很多*科学应用中都会遇到，因此非常聪明的人已经对其进行了深入研究。我绝对*不是*这些主题的专家，这只是我理解它们的方式。希望能帮助到你。

# algorithm - 如何在“统一成本搜索”算法中获取路径？

> ID：12755893
> 
> 赞同：7
> 
> 时间：2012-10-06T01:25:47.690
> 
> 标签：algorithm, search, data-structures, artificial-intelligence

我一直在研究*统一成本搜索*算法，即使我能够理解整个优先级队列过程，我也无法理解算法的最后阶段。

如果我们看[这个图](http://en.wikipedia.org/wiki/Uniform_cost_search)，在应用算法之后，我将获得每个节点的最小距离，但假设我想知道 A 到 G 之间的路径（就像示例一样），我将如何计算呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-06T01:38:57.233

通常，您从尚未探索的每个节点的无限总成本开始。然后你可以稍微调整一下算法来保存前任：

```
for each of node's neighbours n
    if n is not in explored
        if n is not in frontier
            frontier.add(n)
            set n's predecessor to node
        elif n is in frontier with higher cost
            replace existing node with n
            set n's predecessor to node 
```

之后，您可以从目标开始检查前辈的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T13:46:26.623

访问以获取更多信息 [https://www.youtube.com/watch?v=9vNvrRP0ymw](https://www.youtube.com/watch?v=9vNvrRP0ymw)

```
Insert the root into the queue
While the queue is not empty
      Dequeue the maximum priority element from the queue
      (If priorities are same, alphabetically smaller path is chosen)
      If the path is ending in the goal state, print the path and exit
      Else
            Insert all the children of the dequeued element, with the cumulative costs as priority 
```

# python - ConnectionError：错误 2 连接到 Python/Django Redis 中的 unix 套接字

> ID：12755896
> 
> 赞同：0
> 
> 时间：2012-10-06T01:26:45.563
> 
> 标签：python, django, sockets, unix, redis

我正在尝试在全新的 Mac 上本地运行 django 项目。它一直工作到昨天，我不知道发生了什么，但突然间我开始收到 Redis 错误。

我可以加载不查询数据库的页面，但是一旦我尝试进行部分依赖于 Redis 的搜索，它就不起作用了。

有任何想法吗？这是回溯。

```
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "/Library/Python/2.7/site-packages/django/contrib/staticfiles/handlers.py", line 67, in __call__
    return self.application(environ, start_response)
  File "/Library/Python/2.7/site-packages/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/Library/Python/2.7/site-packages/django/core/handlers/base.py", line 179, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File "/Library/Python/2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/Users/dlitwak/mozio/dotcloud/demo/search/views.py", line 391, in results
    cache.setDistanceAndDuration(distance, time, request.user.username)
  File "/Users/dlitwak/mozio/dotcloud/demo/cache.py", line 305, in setDistanceAndDuration
    self.cache.set(key, value, 1800)
  File "/Library/Python/2.7/site-packages/redis_cache/cache.py", line 218, in set
    result = self._set(key, pickle.dumps(value), int(timeout), client, _add_only)
  File "/Library/Python/2.7/site-packages/redis_cache/cache.py", line 199, in _set
    return client.setex(key, value, timeout)
  File "/Library/Python/2.7/site-packages/redis/client.py", line 1221, in setex
    return self.execute_command('SETEX', name, time, value)
  File "/Library/Python/2.7/site-packages/redis/client.py", line 338, in execute_command
    connection.send_command(*args)
  File "/Library/Python/2.7/site-packages/redis/connection.py", line 287, in send_command
    self.send_packed_command(self.pack_command(*args))
  File "/Library/Python/2.7/site-packages/redis/connection.py", line 269, in send_packed_command
    self.connect()
  File "/Library/Python/2.7/site-packages/redis/connection.py", line 217, in connect
    raise ConnectionError(self._error_message(e))
ConnectionError: Error 2 connecting to unix socket: 127.0.0.1\. No such file or directory. 
```

我们正在运行 MYSQL。我可以通过终端访问数据库，所以我认为这不是数据库访问问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:43:41.367

好的，所以我们终于让它工作了。

由于某种原因，Redis 不再自动启动，也没有在后台运行。

我在 Mac 上工作，以前我在 Ubuntu 上运行时它会自动执行此操作。解决方案是在单独的终端窗口中运行“redis-server”。

我们仍在试图弄清楚如何让它自动启动，或者为什么它首先停止，但是是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T20:06:27.053

如果您使用的是 Mac，使用[Homebrew](http://brew.sh/)包管理器可能是安装和管理 Redis 的最佳方式。简单地安装 Homebrew 后，`brew install redis`在命令行上。

安装后，您可以将其设置为在启动时自动运行：

`ln -sfv /usr/local/opts/redis/*.plist ~/Library/LaunchAgents`

然后现在运行它：

`launchctl load ~/Library/LaunchAgents/homebrew.mxcl.redis.plist`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T01:43:13.847

有时这是因为 Django 无法连接到数据库，而 redis 正在抛出错误。而且由于您可以在没有 db 的情况下加载页面，因此似乎就是这样。

# ios - 确定核心数据模型何时有新版本

> ID：12755897
> 
> 赞同：12
> 
> 时间：2012-10-06T01:26:54.257
> 
> 标签：ios, database, core-data, model, version

简短的问题：

仅当我的核心数据模型已更改（新实体、新属性等）时，我才想在我的应用程序中运行某些代码。如何确定模型是否已更改？

只是一些伪代码：

```
 if (current_model_version != previous_model_version) {
    //do some code
    } else {
    // do some other code
    } 
```

我猜我可能会使用 versionHashes 来做到这一点，或者 isConfiguration:compatibleWithStoreMetadata:，但我不确定如何。

为清楚起见进行了一些编辑：“现在”中的“当前”和“上次启动应用程序”中的“以前”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T03:58:00.340

答案似乎是**isConfiguration:compatibleWithStoreMedia:**。

我在这里找到了一些有用的信息：

[http://mipostel.com/index.php/home/70-core-data-migration-standard-migration-part-2](http://mipostel.com/index.php/home/70-core-data-migration-standard-migration-part-2)

我是这样设置的：

```
- (BOOL)modelChanged
{
    NSError *error;
    NSURL * sourceURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"db.sqlite"];
    NSDictionary *sourceMetadata = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType URL:sourceURL error:&error];
    BOOL isCompatible = [[self managedObjectModel] isConfiguration:nil compatibleWithStoreMetadata:sourceMetadata];

    return isCompatible;

} 
```

'self' 是我的共享数据存储，而不是它必须去那里。

deanWombourne 指出，这真正做的是确定数据是否可以自动迁移，所以这并不是我提出的问题的完全解决方案。在这种情况下，它确实满足了我的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-12T14:14:29.473

`- (NSPersistentStoreCoordinator *)persistentStoreCoordinator`如果您在 XCode 中设置新项目时勾选 Core Data 框， 这是您获得的替换代码。

它尝试打开现有的 sqlite 文件（必要时使用轻量级迁移）。如果失败，它会删除并重新创建存储。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    NSError *error = nil;

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                            [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                            [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:self.storeURL options:options error:&error])
    {
        NSLog(@"Couldn't open the store. error %@, %@", error, [error userInfo]);

        [self deleteSqliteFilesForStore:self.storeURL];

        if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:self.storeURL options:options error:&error])
        {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);

            // or [NSException raise ...]
        }
        else
        {
            NSLog(@"Store deleted and recreated");

            // TEST DATA RE-INITIALIZATION CODE GOES HERE
        }
    }
    else
    {
        NSLog(@"Existing Store opened successfully");
    }

    return _persistentStoreCoordinator;
}

- (void)deleteSqliteFilesForStore:(NSURL *)storeURL
{
    NSURL *baseURL = [storeURL URLByDeletingPathExtension];

    // Delete the associated files as well as the sqlite file

    for (NSString *pathExtension in @[@"sqlite",@"sqlite-shm",@"sqlite-wal"])
    {
        NSURL *componentURL = [baseURL URLByAppendingPathExtension:pathExtension];

        BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:[componentURL path]];
        if(fileExists)
        {
            [[NSFileManager defaultManager] removeItemAtPath:[componentURL path] error:nil];
        }
    }
} 
```

# java - 用于决定调用哪个方法的 URL 参数的替代方案

> ID：12755899
> 
> 赞同：0
> 
> 时间：2012-10-06T01:27:11.007
> 
> 标签：java, jsp, url, design-patterns, servlets

现在基于 URL 参数中的站点名称，我们决定在 Java（标准 Jsp/Servlet Web 应用程序）中采取适当的操作（方法调用等）。例如，该请求类似于`www.oursite.com?site=Ohio` 想知道在不必提供 URL 参数的情况下这样做的替代方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T01:43:05.047

您可以使用*POST*而不是*GET*。

*GET*将请求参数附加到 URL 的末尾。

*POST*使用表单发送编码数据。

*   [http://www.tutorialspoint.com/jsp/jsp_form_processing.htm](http://www.tutorialspoint.com/jsp/jsp_form_processing.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T01:55:57.240

为什么不直接将其编码到路径中？

www.oursite.com/俄亥俄州

如果你只是使用直接的 servlet api，你可以做一些这样的事情：

```
String path = request.getPathInfo();
String site = path.split("/")[0]; 
```

话虽如此，大多数 Web 框架都有一些支持来帮助解决这个问题。例如在spring mvc中：

```
@RequestMapping(value="/{site}/blah/blah", method=RequestMethod.GET)
public ModelAndView blahBlah(HttpServletRequest req,
                             HttpServletResponse resp,
                             @PathVariable("site") String site) {
   // do stuff here
} 
```

当然，如果您的所有方法都需要这种映射，您也可以在控制器级别执行此操作：

```
@Controller
@RequestMapping(value="/{site}")
public class MyController {
  @RequestMapping(value="/blah/blah", method=RequestMethod.GET)
  public ModelAndView blahBlah(HttpServletRequest req,
                             HttpServletResponse resp,
                             @PathVariable("site") String site) {
     // do stuff here
  }
} 
```

我相信这比查询参数更干净，尽管它仍然显示在您的 URL 中。还有其他更复杂的方法，例如使用 apache 的反向代理和虚拟主机功能根据站点名称进行切换。您可以在登录时做一些事情，并将站点存储在会话中。这一切都取决于您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T01:57:51.977

您可以使用备用 URL，例如 ohio.oursite.com。这个过程可以通过让您的服务器响应 *.oursite.com 来自动化。我可能会设置一个过滤器来查看子域是什么，并将其与预定义的允许站点列表进行比较。如果它不存在，您可以重定向回主 (www) 站点。如果是这样，您可以设置一个请求属性，您可以以与您现在使用请求参数类似的方式使用该属性。

# php - php注册脚本不验证电子邮件

> ID：12755900
> 
> 赞同：-1
> 
> 时间：2012-10-06T01:27:34.770
> 
> 标签：php, validation, email

我有一个注册脚本，我想验证人们是否正确输入了他们的电子邮件，但这似乎不起作用？有什么想法吗？

```
if ($_POST){
$email=stripslashes($_POST['email']);
$valid=eregi('^([0-9a-z]+[-._+&])*[0-9a-z]+@([-0-9a-z]+[.])+[a-z]{2,6}$',$email);
if (!$email && !$valid){
    $_SESSION['error'] = "I'm sorry but the email you specified is not valid.     Please enter a valid email";
    unset($email);
    header("Location: register.php");
    exit;

}
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T01:30:35.397

在 PHP 中验证电子邮件的正确方法是使用[`filter_var()`](http://php.net/manual/en/function.filter-var.php)带有常量的函数`FILTER_VALIDATE_EMAIL`。

```
filter_var($email, FILTER_VALIDATE_EMAIL) 
```

`true`如果提交的邮件形状良好，这将返回，否则将返回`false`。[您可以在过滤器参考](http://www.php.net/manual/en/filter.filters.php)中阅读有关过滤器的更多信息。

# mysql - 删除返回的 SQL 结果

> ID：12755904
> 
> 赞同：0
> 
> 时间：2012-10-06T01:27:50.717
> 
> 标签：mysql, sql

如何删除以下查询返回的记录？

```
Select HL.User from "Hobby List" HL 
INNER JOIN (Select SUBSTRING(Code,1,10) Code,Count(SUBSTRING(CODE,1,10))
AS Occurances from Patient where length(Patient.Code) > 10
Group By SUBSTRING(Code,1,10)
Having COUNT(SUBSTRING(Code,1,10)) > 1) P
on SUBSTRING(HL.User,1,10) = P.Code
Group By HL.User 
```

我尝试使用“如果存在则删除”方法来删除记录，这要么是错误的，要么是我没有正确执行，因为它删除了表中的所有记录，而不仅仅是我的查询返回的记录。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T01:33:02.077

```
DELETE FROM "Hobby List" HL WHERE HL.User IN (your query here) 
```

这应该做得很好，我在其他场景中使用过很多次。

[http://www.w3schools.com/sql/sql_in.asp](http://www.w3schools.com/sql/sql_in.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T01:33:36.580

试试这个：

```
DELETE FROM 'Hobby List'
WHERE User  IN 
(

Select HL.User from "Hobby List" HL 
INNER JOIN (Select SUBSTRING(Code,1,10) Code,Count(SUBSTRING(CODE,1,10))
AS Occurances from Patient where length(Patient.Code) > 10
Group By SUBSTRING(Code,1,10)
Having COUNT(SUBSTRING(Code,1,10)) > 1) P
on SUBSTRING(HL.User,1,10) = P.Code
Group By HL.User

) 
```

# python - Python：多平台多处理 2.4

> ID：12755911
> 
> 赞同：0
> 
> 时间：2012-10-06T01:28:42.557
> 
> 标签：python, cross-platform, multiprocessing

我必须编写一个 python 应用程序，它必须在 Unix 上运行 python 2.4，在 Windows 上运行 2.7。此应用程序必须运行将同步的并行任务，并且必须在它们之间共享消息。

什么是最好、最简单、最可靠和轻量级的解决方案？

我找到了一个使用`os.fork()`但不幸`os.fork()`的是与 Windows 不兼容的库。该`multiprocess`软件包与 python 2.4 不兼容。

我认为剩下的唯一解决方案是`subprocess`，但我想知道是否有其他解决方案可以解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:45:04.237

如果您使用[线程](http://docs.python.org/library/threading.html)可能会更容易。[这里](http://www.ibm.com/developerworks/aix/library/au-threadingpython/)有一个实用指南。

该指南还提供了有关使用[Queue](http://docs.python.org/library/queue.html)与线程的示例。

使用队列，您可以在线程之间传递消息。

线程比创建新进程要轻量级，应该是跨平台的，貌似是python 2.4版本的。我认为本[指南](http://www.tutorialspoint.com/python/python_multithreading.htm)是为 2.4 编写的

# background - 具有部分透明背景的 UITabbar

> ID：12755921
> 
> 赞同：2
> 
> 时间：2012-10-06T01:30:38.027
> 
> 标签：background, uitabbar, transparent

长期读者，第一次海报。请温柔点：P

我正在开发一个应用程序，并且有一个 UITabbar 元素的背景图像，该元素在顶部对几个像素是透明的。我进行了广泛搜索，尝试了许多我可以找到的解决方案（设置色调、背景颜色为 clearColor、将 alpha 设置为 0.2 等），但我继续看到标签栏应该透明的黑线。我将背景设置如下（请参阅注释掉的行以了解我尝试过的一些无效的事情）

```
//[[UITabBar appearance] setBackgroundColor:[UIColor clearColor]];
//[self.view setBackgroundColor:[UIColor clearColor]];
//[super.view setBackgroundColor:[UIColor clearColor]];
//UITabBar.super.setBackgroundColor:[UIColor clearColor]];
[[UITabBar appearance] setBackgroundColor:[[UIColor alloc] initWithRed:0 green:0 blue:0 alpha:0.2]];
//[[UITabBar appearance] setTintColor:[UIColor blackColor]];
[[UITabBar appearance] setTintColor:[[UIColor alloc] initWithRed:0 green:0 blue:0 alpha:0.1]];
//[[UITabBar appearance] setAlpha:0.0];// setTintColor:[UIColor magentaColor]];
[[UITabBar appearance] setBackgroundImage:[UIImage imageNamed:@"tabbar.png"]]; 
```

截图可以在[http://i.imgur.com/m1tW5.png找到](http://i.imgur.com/m1tW5.png)

*   该应用程序使用标签栏控制器。
*   当我将背景颜色设置为白色或任何其他颜色时，黑线会成功更改颜色，但一旦我将颜色设置为 clearColor，黑线就会回来。
*   当我隐藏整个标签栏时，它背后没有什么疯狂的，我可以成功地看到我应该看到的奶油背景。
*   该图像是具有透明顶部的 png，其中黑线出现如前所述。

有人对我可能做错的事情有任何建议吗？

帮助将不胜感激。

编辑：我使用的是 iOS 5.0，并不关心支持以前的 iOS 版本（以防打开任何额外的潜在选择）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:31:19.523

我目前正在尝试解决类似的问题。

我相信黑色是：

1.  TabBars Superviews 背景在这种情况下，您可以尝试设置 tabBars superviews 背景颜色。我这里没有我的mac，所以我无法尝试，我在你的“尝试”代码中看不到它。

2.  或者是tabBar的边框，在里面可以改变tabBar的frame的bordercolor。

    ```
    tabbar.frame.borderColor = [UIColor whiteColor]; 
    ```

您将需要导入 QuartzCore 框架来操作 boderColor。

让我知道它是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:42:43.837

我决定采用我在其他地方遇到的“hack-ish”解决方案。

我在标签栏的背景图像区域使用与背景相同的颜色来创建透明的错觉。不是很透明，但这是我在花了无数小时后能想到的最好的。

也许这将是一个适用于未来类似职位的其他人的解决方案。

# mysql - UPDATE table1 SET column1 = (SUM(table2{& table3} WHERE table2_id1 = id1) WHERE id1 = table2_id1

> ID：12755925
> 
> 赞同：1
> 
> 时间：2012-10-06T01:31:50.760
> 
> 标签：mysql, sum, sql-update, where, multiple-tables

我想根据主要应用于 table2 但包括表 3 中的单个值的总和来更新 table1。

table2 有一列是对 table1 的 id 列的 FKd，并且总和基于它们的匹配。

```
UPDATE table1, table2 
SET table1.column1 = 
(SELECT SUM( (SELECT constant FROM table3) +
          (SELECT table2.sum_number 
           WHERE table2.table2_id1 = table1.id) ) ) 
WHERE table1.id = table2.table2_id1; 
```

这对我不起作用。

提前谢谢了！

**编辑：给定错误**

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds 
 to your MySQL server version for the right syntax to use near 
 'WHERE table2.table2_id1 = table1.id) ) ) WHERE table1.id = table2.table2_id1;' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T01:45:54.670

```
UPDATE table1, table2 
SET table1.column1 = 
(
    SELECT SUM( 
        (SELECT constant FROM table3) +
        (SELECT table2.sum_number *** WHERE table2.table2_id1 = table1.id) 
    ) 
) 
WHERE table1.id = table2.table2_id1; 
```

上面标有星号的区域没有“FROM table2,table1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:40:20.337

试试这个：

```
UPDATE 
    table1 t1
INNER JOIN
    table2 t2 ON t2.table2_id1 = t1.id
SET
    t1.column1 = (SELECT constant FROM table3) + t2.sum_number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T01:40:56.967

试试这个：

```
Update table1 t1 join table2 t2 on t1.id = t2.table2_id1
SET t1.column1 = (SELECT constant FROM table3) + t2.sum_number 
```

# php - 这个特定的 PDO (SQL) 语句有什么问题？

> ID：12755926
> 
> 赞同：0
> 
> 时间：2012-10-06T01:31:52.593
> 
> 标签：php, mysql, sql, pdo

很抱歉问这些问题之一，但过去一个小时我一直在努力解决这个问题，但我只是被卡住了。

我正在尝试同时更新很多列。我正在使用 PDO。

一些PHP代码：

```
$db=db_connect();
$wid=$_POST['wid'];
$time=time();
$username=$_SESSION['s_username'];
$arr=explode("|", $_POST['idata']);
array_push($arr, $time,$username,$wid );

$statement = $db->prepare("UPDATE widgets SET file_id=?,delay=?,title=?,instructions=?,width=?,height=?,bg_color=?,bg_image=?,border-radius=?,offer_table_border_width=?,offer_table_border_color=?,offer_table_link_color=?,offer_table_link_hover_color=?,offer_table_bg1=?,offer_table_bg2=?,head_font_size=?,head_font_color=?,instructions_font_size=?,instructions_font_color=?,time=? WHERE username=? AND wid=?");
$statement->execute($arr);

var_dump($arr); 
```

该代码来自格式为“var1|var2|var3...”等的 AJAX 请求。此信息由“|”分隔 分隔符，然后添加一些变量，然后应该更新表。

这是 var_dump 的结果（这就是 $arr 的含义）：

```
array(22) { [0]=> string(2) "40" [1]=> string(1) "0" [2]=> string(9) "My Title!" [3]=> string(16) "My Instructions!" [4]=> string(3) "700" [5]=> string(3) "500" [6]=> string(4) "#FFF" [7]=> string(27) "http://background-image.png" [8]=> string(1) "0" [9]=> string(1) "1" [10]=> string(7) "#81ABD6" [11]=> string(7) "#0588C6" [12]=> string(7) "#81ABD6" [13]=> string(4) "#FFF" [14]=> string(7) "#DDEEFF" [15]=> string(2) "24" [16]=> string(7) "#2779AA" [17]=> string(2) "18" [18]=> string(7) "#2779AA" [19]=> int(1349486490) [20]=> string(15) "myuser" [21]=> string(6) "2LvS4c" } 
```

再一次，PDO 声明：

```
$statement = $db->prepare("UPDATE widgets SET file_id=?,delay=?,title=?,instructions=?,width=?,height=?,bg_color=?,bg_image=?,border-radius=?,offer_table_border_width=?,offer_table_border_color=?,offer_table_link_color=?,offer_table_link_hover_color=?,offer_table_bg1=?,offer_table_bg2=?,head_font_size=?,head_font_color=?,instructions_font_size=?,instructions_font_color=?,time=? WHERE username=? AND wid=?"); 
```

结果：errorInfo() 没有返回任何错误。有一行 username="myuser" 和 wid="2LvS4c"，但它根本没有更新。一定有某种我看不到的语法错误，并且没有通过 errorInfo() 返回。

我尝试了一个更简单的查询：

```
$statement = $db->prepare("UPDATE widgets SET file_id=? WHERE username=? AND wid=?");
$statement->execute(array($arr[0], $username, $wid)); 
```

它就像一个魅力！那么大查询有什么问题呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:46:16.693

[此页面](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)列出了 MySQL 标识符中允许的字符，并且`-`（减号）似乎不是其中之一。

首先，您确定这`border-radius`是正确的列名吗？它使用减号，而其他所有使用下划线，`_`. 至少，您应该保持命名的一致性。

除此之外，开始从更新语句中一次删除一列，直到它起作用。如果这是特定列的问题（或者可能是命令长度，但不太可能），这种“改变一件事并重试”策略可以查明问题。

# iphone - 应用程序在 i0S 6 中崩溃，但在 iOS 5 中没有

> ID：12755927
> 
> 赞同：0
> 
> 时间：2012-10-06T01:31:53.700
> 
> 标签：iphone, logging, crash, cocos2d-iphone, ios6

所以我一直在准备理解崩溃日志，我相信我的崩溃日志符号化了，但我仍然不明白。

```
Thread 0 Crashed:
0   libobjc.A.dylib                 0x33c9a7f6 __sel_registerName
1   CoreFoundation                  0x359934ea ___forwarding___
2   CoreFoundation                  0x358eaf64 _CF_forwarding_prep_0 + 20
3   Texas42                         0x0012e132 -[HelloWorldLayer closeBidPicker] + 750
4   Texas42                         0x000e58f2 -[CCTimer update:] + 138
5   Texas42                         0x000e77e4 -[CCScheduler tick:] + 464
6   Texas42                         0x000f7e72 -[CCDirectorIOS drawScene] + 98
7   Texas42                         0x000f8ff0 -[CCDirectorDisplayLink mainLoop:] + 16
8   QuartzCore                      0x3360406c CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long)
9   QuartzCore                      0x33603fc4 CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*)
10  IOMobileFramebuffer             0x32dbefd4 IOMobileFramebufferVsyncNotifyFunc
11  IOKit                           0x392a9446 IODispatchCalloutFromCFMessage
12  CoreFoundation                  0x3595b5d8 __CFMachPortPerform
13  CoreFoundation                  0x35966170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__
14  CoreFoundation                  0x35966112 __CFRunLoopDoSource1
15  CoreFoundation                  0x35964f94 __CFRunLoopRun
16  CoreFoundation                  0x358d7eb8 CFRunLoopRunSpecific
17  CoreFoundation                  0x358d7d44 CFRunLoopRunInMode
18  GraphicsServices                0x35e142e6 GSEventRunModal
19  UIKit                           0x36cb62fc UIApplicationMain
20  Texas42                         0x000bba82 main + 70
21  Texas42                         0x000bba34 start + 36 
```

根据我的用户告诉我的情况，应用程序在调用“closebidpicker”方法时崩溃。这份崩溃报告到底在这条线上告诉我什么？我假设 750 指的是行偏移，但这种方法不是 750 行长。我彻底糊涂了。

我无法在手机或模拟器中重现此错误。如果我至少能查明它在哪条线上，那就太好了。

编辑：

我正在使用 ccTouchEnded 调用 closebidpicker：

```
- (void) ccTouchEnded:(UITouch *)touches withEvent:(UIEvent *)event 
{  

    if (bidpicker.startPage==bidpicker.endPage && bidpicker.visible==YES && bidpicker.boo_pickermoved==NO && bidpicker.wasTouching==YES
        && bidpicker.isWindow==YES && bidpicker.wasWindow==YES)
    {
        [self schedule: @selector(closeBidPicker) interval:0.];
    }
}

- (void) closeBidPicker
//(id)sender 
{
    NSLog(@"Entering CloseBidPicker");

    [self unscheduleAllSelectors]; 
    [self reorderChild:_label z:-1];

    int int_currentbid;
    bidpicker.bidpickeractive=false;
    bidpicker.visible=NO;
    bidPickerMenu.visible=NO;
    [self reorderChild:bidPickerMenu z:0];

    int int_pageindex;

    if(currentbid<=41){int_pageindex=45-currentbid;}
    if(currentbid>41){int_pageindex=1;}

    int_currentbid=currentbid;

    int int_currentpage;
    int int_bid;

    NSString *str;

    if ((int_player_counter==3 && currentbid>29)||int_player_counter!=3) 
    {
        int_currentbid=currentbid;
    }
    else 
    {  
        int_currentbid=currentbid+1;      
    }

    int int_pagevalues[int_pageindex];  
    int_currentpage=[[bidpicker valueForKey:@"currentPage"]intValue];

    if (30>int_currentbid) {int_pagevalues[30-int_currentbid]=30;}

    if (31>int_currentbid) {int_pagevalues[31-int_currentbid]=31;}

    if (32>int_currentbid) {int_pagevalues[32-int_currentbid]=32;}

    if (33>int_currentbid) {int_pagevalues[33-int_currentbid]=33;}

    if (34>int_currentbid) {int_pagevalues[34-int_currentbid]=34;}   

    if (35>int_currentbid) {int_pagevalues[35-int_currentbid]=35;}  

    if (36>int_currentbid) {int_pagevalues[36-int_currentbid]=36;}  

    if (37>int_currentbid) {int_pagevalues[37-int_currentbid]=37;}  

    if (38>int_currentbid) {int_pagevalues[38-int_currentbid]=38;}  

    if (39>int_currentbid) {int_pagevalues[39-int_currentbid]=39;}  

    if (40>int_currentbid) {int_pagevalues[40-int_currentbid]=40;}    

    if (41>int_currentbid) {int_pagevalues[41-int_currentbid]=41;}  

    if (42>int_currentbid) {int_pagevalues[42-int_currentbid]=42;}  

    if (42>int_currentbid) {int_pagevalues[43-int_currentbid]=84;}  

    else if (42*2>int_currentbid) {int_pagevalues[1]=42*2;}  

    else if (42*3>int_currentbid) {int_pagevalues[1]=42*3;}  

    else if (42*4>int_currentbid) {int_pagevalues[1]=42*4;}  

    else if (42*5>int_currentbid) {int_pagevalues[1]=42*5;}  

    if (currentbid<42)
    {
        if ((int_player_counter==3 && currentbid>29)||int_player_counter!=3) 
        {
            int_pagevalues[0]=0;
        }
        else
        {
            int_pagevalues[0]=30;
        }
        int_bid=int_pagevalues[int_currentpage];
    }

    else 
    {
        int_bid=int_currentpage*(int_currentbid+42);
    }

    if (int_bid<42 && int_bid>0)
    {
        int_currenthighbidder=1;
        str = [NSString stringWithFormat:@"%d!",int_bid];
        [_player1actionlabel setString:str];
    }
    else if (int_bid==42){
        int_currenthighbidder=1;
        str = [NSString stringWithFormat:@"1 Mark!"];
        [_player1actionlabel setString:str];    
    }
    else if (int_bid==42*2){
        int_currenthighbidder=1;
        str = [NSString stringWithFormat:@"2 Marks!"];
        [_player1actionlabel setString:str];    
    }
    else if (int_bid==42*3){
        int_currenthighbidder=1;
        str = [NSString stringWithFormat:@"3 Marks!"];
        NSLog(@"CloseBidPicker-14542");
        [_player1actionlabel setString:str];
    }
    else if (int_bid==42*4){
        int_currenthighbidder=1;
        str = [NSString stringWithFormat:@"4 Marks!"];
        [_player1actionlabel setString:str];    
    }
    else if (int_bid==42*5){
        int_currenthighbidder=1;
        str = [NSString stringWithFormat:@"5 Marks!"];
        [_player1actionlabel setString:str];    
    }

    else if (int_bid==0)
    {
        str = @"Passes!";
        [_player1actionlabel setString:str];    
    }

    if (int_bid>currentbid)
    {

        int_player1bid=int_bid;
        currentbid=int_player1bid;
    }

//Code is failing when I call reorderChild, but only when computer bid 42 or more.
        [self reorderChild:_player1actionlabel z:1];
        [self reorderChild:_player1actionlabelbackground z:0];

    int_player_counter=int_player_counter+1;
    if (int_array_currentmove_player[int_player_counter]==2)
        [self schedule: @selector(player2Bid) interval:1.5];

    if (int_array_currentmove_player[int_player_counter]==3)

        [self schedule: @selector(player3Bid) interval:1.5];

    if (int_array_currentmove_player[int_player_counter]==4)
        [self schedule: @selector(player4Bid) interval:1.5];

    if (int_player_counter==4)
    {
        int_player_counter=0;
        [self schedule: @selector(determineBidWinner) interval:1];
    }
} 
```

实际方法确实没有什么特别之处，我看不出它会在 iOS 6 而不是 5 中崩溃的任何原因。

我不明白的是这个...

如果我直接为我的设备构建它，它在我的设备上运行良好，但如果我通过 iTunes 安装 beta 版本，它会崩溃。

我能够找到导致我出现问题的代码。当我注释掉

```
[self reorderChild:_player1actionlabel z:2];
[self reorderChild:_player1actionlabelbackground z:1]; 
```

它工作正常。我完全不知道它为什么这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:09:36.680

我不明白为什么/如何，但移动

```
 [self reorderChild:_player1actionlabel z:1];
    [self reorderChild:_player1actionlabelbackground z:0]; 
```

最重要的是我的方法解决了崩溃。

# asp.net - 这些 <%$ %> asp.net 标记标签叫什么？

> ID：12755929
> 
> 赞同：6
> 
> 时间：2012-10-06T01:32:02.057
> 
> 标签：asp.net, syntax, markup

我正在阅读如何通过在标记中添加属性来处理 SqlDataSource 对象，对于 ConnectionString 属性，作者使用了类似的东西

```
<asp:SqlDataSource ... ConnectionString="<%$ ConnectionStrings:lyric %>" ... > 
```

<%$ %> 的使用对我来说是新的，作者并没有真正解释它。我的意思是，我可以很容易地看到它在这种情况下的作用。

但是，我想学习 <%$ %> 中的语法来访问 Web Config 中的其他内容。我不知道这种类型的标记叫什么，所以我不能用谷歌搜索它。我很难找到它。

<%@ %>、<%# %> 和 <%$ %> 之类的标签是否有特殊的总括名称？（所以我可以学习其他变体）<%$ %> 有特定的名称吗？（所以我可以查一下并学习语法）

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T01:34:24.717

它们被称为“ASP.NET 内联表达式”或“ASP.NET 内联代码块”。您可以在此处了解有关它们的更多信息：http: [//support.microsoft.com/kb/976112](http://support.microsoft.com/kb/976112)

<%$ ... %> 是表达式生成器的语法。

# jquery - 是否存在算法在拖放 UI 功能中更新数据库中的 Order 字段的模式？

> ID：12755935
> 
> 赞同：1
> 
> 时间：2012-10-06T01:34:26.220
> 
> 标签：jquery, algorithm, jquery-ui-sortable

我有一个带有拖放 JQuery 实现功能的 html 页面，请参见下面链接中的示例，我允许用户在其中对元素进行排序。

[可排序](http://jqueryui.com/demos/sortable/)

当 div 被释放时，将向服务器发送一个 JQuery Ajax 回调，以更新数据库中的整数 Order Field。我只有一个问题：我看不到这样做的方法，并且我拒绝更新整个数据库 Order 字段只是为了更新 2 个元素的顺序...

我相信这是一个非常普遍的问题，我想知道是否已经有算法可以解决它......

谢谢大家

# c - 登录 ISR、sprintf()、printk() 还是其他？

> ID：12755937
> 
> 赞同：2
> 
> 时间：2012-10-06T01:34:43.360
> 
> 标签：c, embedded, isr

在尝试记录/调试 ISR 时，我看到：

1)`sprintf()`在“O'Reilly Linux 设备驱动程序”中用作示例

```
irqreturn_t short_interrupt(int irq, void *dev_id, struct pt_regs *regs)

{

    struct timeval tv;
    int written;

    do_gettimeofday(&tv);

    /* Write a 16 byte record. Assume PAGE_SIZE is a multiple of 16 */

    written = sprintf((char *)short_head,"%08u.%06u\n",

            (int)(tv.tv_sec % 100000000), (int)(tv.tv_usec));

    BUG_ON(written != 16);

    short_incr_bp(&short_head, written);

    wake_up_interruptible(&short_queue); /* awake any reading process */

    return IRQ_HANDLED;

} 
```

与 printf() 不同，sprintf() 写入内存而不是控制台，并且似乎没有重入或阻塞问题，对吗？但我在其他论坛上看到了反对 sprintf() 的言论。我不确定这是否只是因为它的性能开销，或者其他？

2）`printk()`是另一个我见过人们使用但被指责的问题，再次是性能问题（也许没有别的？）

如今，在 Linux 中记录或调试 ISR 时，通常使用什么好的方法/功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:53:51.310

关于`sprintf()`. 在任何 LXR 站点中进行搜索，例如[这里](http://lxr.linux.no/linux+v3.6/+search?search=sprintf)：

```
Freetext search: sprintf (4096 estimated hits)
drivers/video/mbx/mbxdebugfs.c, line 100 (100%)
drivers/isdn/hisax/q931.c, line 1207 (100%)
drivers/scsi/aic7xxx_old/aic7xxx_proc.c, line 141 
```

我认为这消除了任何疑虑。

至于`printk()`，`printk.h`说：

> /* 如果您正在编写驱动程序，请改用 dev_dbg */

# objective-c - iOS 6 游戏中心

> ID：12755938
> 
> 赞同：1
> 
> 时间：2012-10-06T01:34:55.047
> 
> 标签：objective-c, ios, xcode

在我升级到 iOS 6 之前，我让游戏中心正常工作。现在我似乎无法将成就传递给游戏中心。成就发生时，会通过警报通知用户，但会在游戏中心显示“未实现”。我已经创建了一个沙盒帐户，该应用程序尚未审核。

这就是我之前向游戏中心发送成就的方式：

```
 [gameCenterManager submitAchievement:@"shareFacebook" percentComplete:100]; 
```

这不再正确了吗？我之前从[mobile.tutsplus.com的教程中实现了这一点](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-2/)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T04:12:13.707

这就是我的做法，并且似乎在 iOS 6 中运行良好：

```
- (void) reportAchievementIdentifier: (NSString*) identifier percentComplete: (float) percent
{
    GKAchievement *achievement = [[GKAchievement alloc] initWithIdentifier: identifier];
    if (achievement)
    {
        achievement.percentComplete = percent;
        [achievement reportAchievementWithCompletionHandler:^(NSError *error)
         {
             if (error != nil)
             {
                 NSLog(@"Error in reporting achievements: %@", error);
             }
         }];
    }
} 
```

希望这可以帮助！

# zend-studio - 如何在 Zend Studio 中更改 PROJECT_LOC

> ID：12755943
> 
> 赞同：2
> 
> 时间：2012-10-06T01:35:45.180
> 
> 标签：zend-studio

问题：我在安装 Zend 服务器并开始一个重要项目之前设置了 Zend Studio。现在`PROJECT_LOC`这个项目在`C:\Users\Username\Zend\workspaces\proejctname\projectname`.

所以这不是世界末日，但是当我必须将文件移动到 htdocs 进行测试时，它会减慢进度。

我在网上搜索没有运气没有如何改变它。

如果我右键单击项目并转到属性，然后单击资源/链接资源，我可以看到它。但是，如果我突出显示它，则编辑按钮不可点击。我搜索配置文件，但无法找到`PROJECT_LOC`.

我搜索了所有配置文件和互联网无济于事。我可以设置另一个项目并导入这些文件，从而在不知道如何更改的情况下做我需要的事情`PROJECT_LOC`。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:50:10.703

我在 Zend 上遇到过同样的问题，实际上有好几次。我永远无法弄清楚如何修复它，所以我不得不完全删除该项目并重新添加它。这有时会解决问题，有时不会，所以我只是认为这是安装或我的计算机上的错误。

# jquery - Jquery 和 HTML FormData 返回“未捕获的 TypeError：非法调用”

> ID：12755945
> 
> 赞同：86
> 
> 时间：2012-10-06T01:36:27.283
> 
> 标签：jquery, ajax, html, upload

我正在使用此脚本上传我的图像文件：http: [//jsfiddle.net/eHmSr/](http://jsfiddle.net/eHmSr/)

```
$('.uploader input:file').on('change', function() {
  $this = $(this);

  $('.alert').remove();

  $.each($this[0].files, function(key, file) {
    $('.files').append('<li>' + file.name + '</li>');

    data = new FormData();
    data.append(file.name, file);

    $.ajax({
      url: $('.uploader').attr('action'),
      type: 'POST',
      dataType: 'json',
      data: data
    });
  });
}); 
```

但是当我点击上传按钮时，JavaScript 控制台返回此错误：

```
Uncaught TypeError: Illegal invocation 
```

![jQuery 错误](../Images/27826ae554e836a102873973da397167.png)

你能帮助我吗？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-10-06T01:57:22.637

jQuery 处理`data`属性并将值转换为字符串。

[添加`processData: false`](http://api.jquery.com/jQuery.ajax/)到您的选项对象可以修复错误，但我不确定它是否可以解决问题。

**演示：http: [//jsfiddle.net/eHmSr/1/](http://jsfiddle.net/eHmSr/1/)**

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-03-31T10:54:38.283

我有同样的问题

我通过使用两个选项来解决这个问题

```
contentType: false
processData: false 
```

实际上我将这两个命令添加到我的 $.ajax({}) 函数中

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-08T05:33:50.007

添加`processData: false`到`$.ajax`选项将解决此问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-21T00:05:06.190

我的经验：

```
 var text = $('#myInputField');  
  var myObj = {title: 'Some title', content: text};  
  $.post(myUrl, myObj, callback); 
```

问题是我忘记将 .val() 添加到 $('#myInputField'); 的末尾。此操作让我浪费时间试图找出问题所在，***导致 Illegal Invocation Error***，因为 $('#myInputField') 与系统指出的代码不正确位于不同的文件中。希望这个答案能帮助犯同样错误的人避免浪费时间。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-02-13T09:24:17.083

就我而言，参数列表中存在错误，格式不正确。因此，请确保参数格式正确。例如正确的参数格式

```
data: {'reporter': reporter,'partner': partner,'product': product} 
```

# c++ - 为什么我们必须为具有默认参数的模板类指定 <>？

> ID：12755947
> 
> 赞同：7
> 
> 时间：2012-10-06T01:36:58.340
> 
> 标签：c++, class, templates, c++11, default-value

我在 C++ 中发现了一些烦人的东西，我不知道是否有一个技巧可以避免这种情况而没有开销。问题如下：

对于模板函数，我们可以有：

```
// Function declaration/definition
template<bool Option = false> void myFunction() 
{
    std::cout<<"Option = "<<Option<<std::endl;
}

// Then I can use :
myFunction<false>();
myFunction<true>();
myFunction(); // <- NO PROBLEM HERE 
```

现在对于模板类：

```
// Class definition/declaration
template<bool Option = false> class MyClass
{
};

// Then I can use :
myClass<false> x;
myClass<true> y;
myClass z; // <- PROBLEM HERE : only "MyClass<> z;" will compile ! 
```

为什么是这种行为的原因？有什么技巧可以避免这种情况吗？对于具有作为模板传递的可选参数的类，我发现这对最终用户来说并不方便：他应该能够将默认实现用作无模板类...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T02:07:59.043

> 为什么是这种行为的原因？

这是因为函数可以重载，而类型不能。

当您编写函数调用时，编译器会使用该名称填充它可以找到的所有函数的重载集，然后找出哪些与传递的参数匹配。现在，为了让它与函数模板一起干净地工作，它允许从参数中推断出模板参数类型。因为通常允许类型参数推断，所以即使参数是默认值，它也适用于您的情况。

但是，类型不会重载。While`myFunction<true>()`和`myFunction<false>()`都与它们参与同一重载集的程度相关，`myClass<true>`并且`myClass<false>`是独立*且不相关*的类型。由于没有等效于类型名称的重载，因此没有动机添加一个特殊情况来隐式命名一个完全专业化的模板类。参数永远不能被推断出来，所以只有在它们都被默认的情况下才会有特殊的语法。

> 有什么技巧可以避免这种情况吗？

一般来说，如果你想获得模板类的模板参数推导，你可以提供一个模板函数包装器（这最适合 C++11 auto）

```
template <bool Option=false> class MyClass {};
template <bool Option=false> MyClass<Option> make_my_class() {
    return MyClass<Option>();
}
// ...
auto z = make_my_class(); 
```

否则，我认为使用`typedef`（根据 Remy 的评论）是最好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T02:22:38.837

`myClass`是类模板，而不是类。只有`myClass<true>`, 或`myClass<>`, 是一个类。

同样，`myFunction`是一个函数模板，而不是一个函数。但是，当您*调用*模板化函数时，可能会为您推导出模板参数，如果可以推导出模板参数，则*无需*显式指定模板参数。因此函数调用表达式`myFunction();`是有效的，并且第一个参数被推导出为`false`。只是由于默认参数而不是与函数参数匹配而进行了推论。

# css - 旧浏览器的响应式 CSS

> ID：12755949
> 
> 赞同：0
> 
> 时间：2012-10-06T01:37:24.933
> 
> 标签：css, mobile, cross-browser

我正在使我的网站对各种设备（平板电脑/移动设备/等）的响应速度更快，我想知道如果最后一个样式表是有效的跨浏览器“包罗万象”，我是否使用以下内容作为各种布局宽度的指南，更具体地说是 IE5/6/7。有谁知道旧版浏览器是否会忽略所有工作表并仅包含最后一张？

```
<link media="only screen and (max-device-width: 480px)" href="small.css" type= "text/css" rel="stylesheet">
<link media="only screen and (min-device-width: 481px) and (max-device-width: 1024px)" href="medium.css" type="text/css" rel="stylesheet">
<link media="screen and (min-device-width: 1025px)" href="large.css" type="text/css" rel="stylesheet"> 
```

**或者**

```
@media only screen and (max-device-width: 480px) { /* CSS */ }
@media only screen and (min-device-width: 481px) and (max-device-width: 1024px) { /* CSS */ }
@media only screen and (min-device-width: 1025px) { /* CSS */ } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:42:37.833

如果您正在考虑使用 IE 特定样式表，请使用**Conditional Comments**。

在您的情况下，可以这样做：

```
<!--[if IE 5]><link media="only screen and (max-device-width: 480px)" href="small.css" type= "text/css" rel="stylesheet"><![endif]-->
<!--[if IE 6]><link media="only screen and (max-device-width: 480px)" href="small.css" type= "text/css" rel="stylesheet"><![endif]-->
<!--[if IE 7]><link media="only screen and (max-device-width: 480px)" href="medium.css" type= "text/css" rel="stylesheet"><![endif]-->
<!--[if GT IE 7]><link media="only screen and (max-device-width: 480px)" href="large.css" type= "text/css" rel="stylesheet"><![endif]--> 
```

如果你想`@media`为旧浏览器实现查询，有很多 JavaScript 的后备方案。

1.  **css3-mediaqueries-js**

    > Wouter van der Graaf 的 css3-mediaqueries.js 是一个 JavaScript 库，可以让 IE 5+、Firefox 1+ 和 Safari 2 透明地解析、测试和应用 CSS3 媒体查询。Firefox 3.5+、Opera 7+、Safari 3+ 和 Chrome 已经提供原生支持。

    [在谷歌代码](http://code.google.com/p/css3-mediaqueries-js/)上得到它。

2.  **Adapt.js - 自适应 CSS**

    > Adapt.js 是一个轻量级（848 字节缩小）JavaScript 文件，它决定在浏览器呈现页面之前要加载哪个 CSS 文件。如果浏览器倾斜或调整大小，Adapt.js 只会检查其宽度，并在需要时仅提供所需的 CSS。

    [在GitHub 上](https://github.com/nathansmith/adapt/blob/master/assets/js/adapt.js)获取它。

3.  **Enquire.js – JavaScript 中的媒体查询回调**

    > Enquire.js 是一个用于处理媒体查询的轻量级纯 JavaScript 库。GZIP 压缩后小于 1kb，绝对没有依赖关系。是的，你没看错——没有依赖，甚至没有 jQuery！如果您希望支持没有本机实现的浏览器，您最多需要做的是提供 matchMedia 填充。

    [在GitHub 上](https://github.com/WickyNilliams/enquire.js)获取它。

# javascript - 在 Google 闭包库中的对象上添加或删除事件侦听器时获取事件

> ID：12755953
> 
> 赞同：0
> 
> 时间：2012-10-06T01:39:26.367
> 
> 标签：javascript, events, dom-events, google-closure, google-closure-library

我正在开发一个 API，我希望能够知道何时添加或删除对象上的事件侦听器。原因是我正在触发的某些事件将要求我不断地轮询对象以获取更新，并且如果没有人在监听事件，我不想轮询对象。*我正在轮询 html5 媒体播放器和其他播放器以缓冲更新，因此不需要轮询不是一种选择。*我也不希望用户在添加或删除事件侦听器时必须调用函数来启动轮询。

我开发了一个解决方案，在将调用传递给闭包库之前拦截事件侦听器的添加，但这是一种非常hacky的做事方式，所以我想找到一种更好的方法。我将在下面发布我的方法，但我很想找到一种更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:43:21.000

正如我上面所说，我知道这是一种非常老套的做事方式，但这是我想出的唯一方法。随意删除`sometechie.`命名空间引用和/或在您正在处理的任何项目中使用任何或所有此代码。

```
/**
 * @fileoverview Adds the ability to get events when an event listener is added or removed.
 * @author Joshua Dwire
 * @requires goog.events
 */

goog.provide('sometechie.eventhack');
goog.provide('sometechie.eventhack.GotListenerEvent');
goog.provide('sometechie.eventhack.LostListenerEvent');
goog.require('goog.events');

/**
 * @class Provides a way to get events when an event listener is added or removed
 */
sometechie.eventhack={}
/**
 * Generates the type of event that will be fired when a listener of the given type is added.
 *
 * @example goog.events.listen([src], sometechie.eventhack.generateGotListenerEventType([type]), [listener], [opt_capt], [opt_handler]) 
 *
 * @param {string} type Event Type.
 * @returns {string} The type of event that will be fired when a listener of the given type is added.
 */
sometechie.eventhack.generateGotListenerEventType=function(type){
    return '$sometechie.eventhack.gotlistener@'+type;
}

/**
 * Generates the type of event that will be fired when the first listener of the given type is added.
 *
 * @example goog.events.listen([src], sometechie.eventhack.generateGotFirstListenerEventType([type]), [listener], [opt_capt], [opt_handler]) 
 *
 * @param {string} type Event Type.
 * @returns {string} The type of event that will be fired when the first listener of the given type is added.
 */
sometechie.eventhack.generateGotFirstListenerEventType=function(type){
    return '$sometechie.eventhack.gotfirstlistener@'+type;
}

/**
 * Generates the type of event that will be fired when a listener of the given type is removed.
 *
 * @example goog.events.listen([src], sometechie.eventhack.generateLostListenerEventType([type]), [listener], [opt_capt], [opt_handler]) 
 *
 * @param {string} type Event Type.
 * @returns {string} The type of event that will be fired when a listener of the given type is removed.
 */
sometechie.eventhack.generateLostListenerEventType=function(type){
    return '$sometechie.eventhack.lostlistener@'+type;
}

/**
 * Generates the type of event that will be fired when the last listener of the given type is removed.
 *
 * @example goog.events.listen([src], sometechie.eventhack.generateLostLastListenerEventType([type]), [listener], [opt_capt], [opt_handler]) 
 *
 * @param {string} type Event Type.
 * @returns {string} The type of event that will be fired when the last listener of the given type is removed.
 */
sometechie.eventhack.generateLostLastListenerEventType=function(type){
    return '$sometechie.eventhack.lostlastlistener@'+type;
}

/**
 * Object representing a eventhack GotListener event.
 *
 * @param {string} type Event type.
 * @param {Object} target
 * @param {string} eventType listener type added.
 * @param {boolean} gotFirst If this was the first listener added (there were no listeners before).
 * @extends {goog.events.Event}
 * @constructor
 */
sometechie.eventhack.GotListenerEvent = function(type, target, eventType, gotFirst) {
  goog.base(this, type, target);
  this.eventType = eventType;
  this.gotFirst = gotFirst;
};
goog.inherits(sometechie.eventhack.GotListenerEvent, goog.events.Event);
/**
 * The type of event that was added.
 * @type {string}
 */
sometechie.eventhack.GotListenerEvent.prototype.eventType='';
/**
 * If this was the first listener added (there were no listeners before).
 * @type {boolean}
 */
sometechie.eventhack.GotListenerEvent.prototype.gotFirst=false;

/**
 * Object representing a eventhack LostListener event.
 *
 * @param {string} type Event type.
 * @param {Object} target
 * @param {string} eventType listener type lost.
 * @param {boolean} lostLast If the last listener was removed (there are no listeners anymore).
 * @extends {goog.events.Event}
 * @constructor
 */
sometechie.eventhack.LostListenerEvent = function(type, target, eventType,lostLast) {
  goog.base(this, type, target);
  this.eventType = eventType;
  this.lostLast = lostLast;
};
goog.inherits(sometechie.eventhack.LostListenerEvent, goog.events.Event);
/**
 * The type of event that was removed.
 * @type {string}
 */
sometechie.eventhack.LostListenerEvent.prototype.eventType='';
/**
 * If the last listener was removed (there are no listeners anymore).
 * @type {boolean}
 */
sometechie.eventhack.LostListenerEvent.prototype.lostLast=false;

//Capture adding of event listeners
goog.events.$st_listen_overridden=goog.events.listen;
goog.events.listen=function(src, type, listener, opt_capt, opt_handler){
    var eventSrc = /** @type {goog.events.EventTarget} */ src;
    var hadListener=false;
    try{
        if(!goog.isArray(type) && !goog.isNull(type))hadListener=goog.events.hasListener(src,type);
    }catch(e){}
    var ret = goog.events.$st_listen_overridden.apply(this,arguments);
    try{
        if(!goog.isArray(type) && !goog.isNull(type)){
            var hasListener=goog.events.hasListener(src,type);
            var gotFirst=!hadListener&&hasListener;

            if(gotFirst){
                goog.events.dispatchEvent(eventSrc,
                    new sometechie.eventhack.GotListenerEvent(
                        sometechie.eventhack.generateGotFirstListenerEventType(type),
                        src,type,true));
            }

            goog.events.dispatchEvent(eventSrc,
                new sometechie.eventhack.GotListenerEvent(
                    sometechie.eventhack.generateGotListenerEventType(type),
                    src,type,gotFirst));
        }
    }catch(e){}
    return ret;
}

//Capture removing of event listeners
goog.events.$st_unlistenByKey_overridden=goog.events.unlistenByKey;
goog.events.unlistenByKey=function(key){
    var src=null,type=null;
    try{
        if (goog.events.listeners_[key]){
            var listener = goog.events.listeners_[key];
            if (!listener.removed) {
                src = /** @type {goog.events.EventTarget} */ listener.src;
                type = listener.type;
            }
        }
    }catch(e){}
    var ret = goog.events.$st_unlistenByKey_overridden.apply(this,arguments);
    try{
        if(src!=null&&type!=null){
            var lostLast=!goog.events.hasListener(src,type);

            if(lostLast){
                goog.events.dispatchEvent(src,
                    new sometechie.eventhack.LostListenerEvent(
                        sometechie.eventhack.generateLostLastListenerEventType(type),
                        src,type,true));
            }

            goog.events.dispatchEvent(src,
                new sometechie.eventhack.LostListenerEvent(
                    sometechie.eventhack.generateLostListenerEventType(type),
                    src,type,lostLast));
        }
    }catch(e){}
    return ret;
} 
```

# android - EdittText Android

> ID：12755957
> 
> 赞同：1
> 
> 时间：2012-10-06T01:39:37.373
> 
> 标签：android, android-edittext

我在android中使用EditText控件，我想知道是否有任何方法可以获得控件的默认字符串（我的意思是String.xml中的那个）。

当我想修改它的字符串时，我使用它。

```
e.setText( e.getText().toString + "something"). 
```

现在，问题是有时我会得到不必要的信息，例如：

```
" Name: JhonName: JhonName: JhonName: JhonName: Jhon " 
```

当我只想显示：“姓名：Jhon”

如果我没有正确解释，请告诉我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:31:23.750

`e.getText().toString()`是返回您的 EditText 的字符串.. 现在是第一次执行代码时.. 上述方法不会返回任何内容.. 这就是为什么您的 EditText 会喜欢“姓名：约翰”..好的

当此代码第二次执行时......上述方法将返回“姓名：约翰”，然后您添加“某事”，以便它发生......

只需用这个替换你的代码......

```
e.setText("something") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:09:17.530

我希望您了解编辑文本的 Tag 和 Hint 属性。您可以通过 XML 和 Java 两种方式设置标记和提示。因此，在提示中设置默认（前缀）值，每当您设置文本以编辑文本时附加该值。

例如：

```
 <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="Name : " />

e.setText(e.getHint() + "John"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T05:44:40.457

您不需要编写 editText.setText(editText.getText().toString()+"something")，这肯定会在前面的字符串中添加“something”。如果您只想打印“某物”，您应该只写 editText.setText("Something")。

# php - 使用 PHP 读取特定的远程行

> ID：12755958
> 
> 赞同：-2
> 
> 时间：2012-10-06T01:39:43.647
> 
> 标签：php, twitter, remote-server

我正在尝试找到一种方法来使用 PHP 加载我的最新推文。在这个 URL 上，我将“Twitter.xml”更改为我的用户名——“.xml”。 [https://twitter.com/users/show/Twitter.xml](https://twitter.com/users/show/Twitter.xml)

最新的推文显示在第 49 行，但我不认为 PHP 可以读取远程文件...我希望它显示第 49 行，但是如何将它与在远程服务器上查找文件结合起来？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T07:30:49.563

在 PHP 中，您可以使用它`file_get_contents()`来获取该 url 的内容。例如

`$xml = file_get_contents('https://twitter.com/users/show/Twitter.xml');`

这仅在配置设置为`allow_url_fopen`On时才有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:59:11.517

Use curl to fetch a remote resource.

[http://www.php.net/manual/en/curl.examples-basic.php](http://www.php.net/manual/en/curl.examples-basic.php) http://www.php.net/manual/en/function.curl-init.php

Then, since it's xml, I would convert it to a native PHP object, using SimpleXML

[http://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)

# sql - Node.JS 与 NoSQL 还是 SQL？

> ID：12755961
> 
> 赞同：13
> 
> 时间：2012-10-06T01:40:15.603
> 
> 标签：sql, node.js, nosql

有些我不太了解，我一直在为 Node.JS 的数据库做一些研究，几乎每个人都推荐 NoSQL 类型的数据库，如 MongoDB 或 CouchDB 与 Node 一起使用。

但进一步阅读，我发现 NoSQL 对于关系数据并不是那么好……但这就是我感到困惑的地方：大多数业务应用程序（或社交网络类型的应用程序）都有关系数据。

例如，假设我正在使用 Node.JS 为一所拥有学生、教师和班级的学校构建一个应用程序。你可以看到那里有很多关系。你还会推荐使用 NoSQL 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T01:57:40.497

MongoDB 通常与 Node.js 配对，因为它们具有共享的异步特性，并且因为 javascript JSON 对象与基于 JSON 的 mongoDB 文档结构很容易使用。也就是说，mongoDB 有其缺点，尤其是在必须完成复杂报告时。我发现的一个更好的解释是，在 mongo 中复制简单的数据访问需要在 mysql 中加入，但是如果你想以不同的方式加入数据，在 SQL 中会相当简单，但在蒙哥。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T05:29:57.610

看看节点的猫鼬。它允许您为快速应用程序定义模型。您可以使用 .populate() 有效地加入 RDBMS 系统上的外键。

[http://mongoosejs.com/docs/populate.html](http://mongoosejs.com/docs/populate.html)

```
var mongoose = require('mongoose')
  , Schema = mongoose.Schema

var PersonSchema = new Schema({
  name    : String,
  age     : Number,
  stories : [{ type: Schema.Types.ObjectId, ref: 'Story' }]
});

var StorySchema = new Schema({
  _creator : { type: Schema.Types.ObjectId, ref: 'Person' },
  title    : String,
  fans     : [{ type: Schema.Types.ObjectId, ref: 'Person' }]
});

var Story  = mongoose.model('Story', StorySchema);
var Person = mongoose.model('Person', PersonSchema); 
```

保存参考

将 refs 保存到其他文档的工作方式与通常保存 objectids 的方式相同，只需分配一个 ObjectId：

```
var aaron = new Person({ name: 'Aaron', age: 100 });

aaron.save(function (err) {
  if (err) return handleError(err);

  var story1 = new Story({
    title: "Once upon a timex.",
    _creator: aaron._id    // assign an ObjectId
  });

  story1.save(function (err) {
    if (err) return handleError(err);
    // thats it!
  });
}) 
```

人口

到目前为止，我们还没有做任何特别的事情。我们只是创建了一个 Person 和一个 Story。现在让我们看看填充我们故事的 _creator：

```
Story
.findOne({ title: /timex/ })
.populate('_creator')
.exec(function (err, story) {
  if (err) return handleError(err);
  console.log('The creator is %s', story._creator.name); // prints "The creator is Aaron"
}) 
```

# python - 将箭头键发送到 Popen

> ID：12755968
> 
> 赞同：6
> 
> 时间：2012-10-06T01:41:28.120
> 
> 标签：python, popen

我知道可以通过ing 向`subprocess`es发送可打印的输入`write``stdin`

```
from subprocess import, Popen, PIPE
proc = Popen([command, goes, here], stdin=PIPE)
proc.stdin.write("m") 
```

我将如何发送输入，例如箭头键按下、空格、返回或退格？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T02:09:52.780

I found someone who was trying to solve the opposite problem, create a program that could recognize the arrow keys: [Recognizing arrow keys with stdin](https://stackoverflow.com/questions/4130048/recognizing-arrow-keys-with-stdin)

I also found [http://compgroups.net/comp.unix.programmer/how-to-send-up-arrow-key-to-popen-child/537480](http://compgroups.net/comp.unix.programmer/how-to-send-up-arrow-key-to-popen-child/537480) which says:

```
"\x1B[A" for up
"\x1B[B" for down 
```

So if \x1B is the escape character than you just append [A for up, [B for down, [C for right and [D for left and so on.

Take a look at [http://en.wikipedia.org/wiki/ANSI_escape_sequences](http://en.wikipedia.org/wiki/ANSI_escape_sequences) for a list of the different codes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-26T14:47:55.633

尝试[pyautogui](https://stackoverflow.com/questions/48449895/how-to-pass-a-keystroke-alttab-using-popen-communicate-on-linux/48455097#48455097)库。例如：

```
pyautogui.hotkey('ctrl', 'c')  # ctrl-c to copy
pyautogui.press('enter')  # press the Enter key 
```

图书馆网页中的更多示例。对我来说它有效 - 见[这里](https://stackoverflow.com/questions/48449895/how-to-pass-a-keystroke-alttab-using-popen-communicate-on-linux/48455097#48455097)。

# sql - 带有 select_all 的 Rails 准备好的语句

> ID：12755969
> 
> 赞同：7
> 
> 时间：2012-10-06T01:41:38.327
> 
> 标签：sql, ruby-on-rails, prepared-statement

据我所知，应该可以在 Rails 中执行以下操作：

```
ActiveRecord::Base.connection.select_all("SELECT MONTH(created) AS month, YEAR(created) AS year FROM orders WHERE created>=$1 AND created<=$2 GROUP BY month ORDER BY month ASC",nil,[['created',1],['created',2]]) 
```

但可悲的是，这根本不起作用。无论我尝试使用什么格式，`$1`and`$2`都不会被绑定数组中的相应值替换。

我还有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-08T09:52:02.307

您应该`sanitize_sql_array`在模型中使用，如下所示：

```
r = self.sanitize_sql_array(["SELECT MONTH(created) AS month, YEAR(created) AS year FROM orders WHERE created>=? AND created<=? GROUP BY month ORDER BY month ASC", created1, created2])
self.connection.select_all r 
```

这可以保护您免受 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-29T01:37:52.247

由于您没有使用命名绑定，因此您可以这样做。这适用于 Rails 4.2。

```
ActiveRecord::Base.connection.select_all(
  "SELECT MONTH(created) AS month, YEAR(created) AS year FROM orders WHERE created>=$1 AND created<=$2 GROUP BY month ORDER BY month ASC",
  nil,
  [[nil,'2016-01-01 12:30'],[nil,'2016-01-01 15:30']]
) 
```

* * *

## 回答 #3

> 赞同：-14
> 
> 时间：2012-10-06T02:41:27.117

我不明白您是否尝试使用变量，但是使用变量很容易，您错误地使用了它们

像这样使用它：

```
ActiveRecord::Base.connection.select_all("SELECT MONTH(created) AS month, YEAR(created) AS year FROM orders WHERE created>=#{v1} AND created<=#{v2} GROUP BY month ORDER BY month ASC",nil,[['created',1],['created',2]]) 
```

其中 v1 和 v2 是变量。让我知道你是否正在尝试其他东西

谢谢

# c++ - 为什么这个模板类拥有的类的类型，使用模板类型，无法识别？

> ID：12755971
> 
> 赞同：1
> 
> 时间：2012-10-06T01:41:55.907
> 
> 标签：c++, list, templates, containers

我希望这在之前的某个问题中没有被提及。我尽我所能，但我认为问题的一部分首先是我不明白发生了什么，这可能阻止我找到以前的答案。如果是这样，我很抱歉，否则......

为了练习模板并更好地理解 C++ 和代码设计，我已经着手编写一个（目前非常简单的）链表实现，主要是为了模仿 std::list。我一直在努力正确地实现迭代器，以及逻辑上的其他组件，但我遇到了一个障碍。我猜它在某处使用模板语法，但我不确定。这可能只是一些愚蠢的错误。

这是该类的一般结构：

```
template <class T>
class LinkedList {
public:
    LinkedList();
    class Iterator;
    void push_front(const T&);
    void push_back(const T&);
    void pop_front();
    void pop_back();
    T& front();
    T& back();
    unsigned int size() const;
    bool empty() const;
    Iterator begin();
    Iterator end();
private:
    struct ListNode;
    ListNode* m_front;
    ListNode* m_back;
    unsigned int m_size;
};

template <class T>
class LinkedList<T>::Iterator {
public:
    Iterator();
    Iterator(const Iterator& rhs);
    Iterator(ListNode* const& node);
    Iterator operator=(const Iterator& rhs);
    T& operator*();
    bool operator==(const Iterator& rhs) const;
    bool operator!=(const Iterator& rhs) const;
    Iterator operator++();
private:
    ListNode* m_node;
};

template <class T>
struct LinkedList<T>::ListNode {
    T* m_data;
    ListNode* m_next;
}; 
```

这是有问题的功能：

```
template <class T>
void LinkedList<T>::push_front(const T&) {
    if (m_front == NULL) {
        m_front = new ListNode;
        *(m_front->m_data) = T;
        m_front->m_next = NULL;
        m_back = m_front;
    } else if (m_front == m_back) {
        m_front = new ListNode;
        *(m_front->m_data) = T;
        m_front->m_next = m_back;
    } else {
        ListNode* former_front(m_front);
        m_front = new ListNode;
        *(m_front->m_data) = T;
        m_front->m_next = former_front;
    }
} 
```

以及 GCC 4.6.3 给出的错误：

```
linkedlist.hpp: In member function ‘void pract::LinkedList<T>::push_front(const T&)’:
linkedlist.hpp:75:31: error: expected primary-expression before ‘;’ token
linkedlist.hpp:80:31: error: expected primary-expression before ‘;’ token
linkedlist.hpp:85:31: error: expected primary-expression before ‘;’ token 
```

我希望这一切都会有所帮助，但如果还有其他需要的话，请询问。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:46:01.487

问题在于这些方面：

```
*(m_front->m_data) = T; 
```

这是试图将类型分配给变量，这显然是不可能的。可能您想要一个命名参数并为此分配使用所述参数：

```
template <class T>
void LinkedList<T>::push_front(const T& t) {
    if (m_front == NULL) {
        m_front = new ListNode;
        *(m_front->m_data) = t;
        m_front->m_next = NULL;
        m_back = m_front;
    } else if (m_front == m_back) {
        m_front = new ListNode;
        *(m_front->m_data) = t;
        m_front->m_next = m_back;
    } else {
        ListNode* former_front(m_front);
        m_front = new ListNode;
        *(m_front->m_data) = t;
        m_front->m_next = former_front;
    }
} 
```

# c - 我的变量不断将其值更改为 3435973836

> ID：12755973
> 
> 赞同：4
> 
> 时间：2012-10-06T01:42:28.293
> 
> 标签：c

每当我运行我的代码时，变量 bookcost 都会自行更改为值： 3435973836 。

它在到达 processingData 函数后执行此操作。我不知道为什么它一直这样做！我已经写了这个没有函数的程序，它运行良好:(这是我的第二节编程课，它是在线的，几乎没有教授的支持。

```
#include <stdio.h>

void inputData(int* inputs,int* booknmbr, int* nmbrpurchased, int* bookcost);
void processingData(int bookcost, int nmbrpurchased, int totalpurch, int costaccu);
void outputInfo(int booknmbr, int nmbrpurchased, int bookcost, int* total);

    int bookcounter = 0;
    int totalpurch = 0;
    int costaccu = 0;
    int totalcostaccu = 0;

int main ()

{
    int booknmbr;
    int nmbrpurchased;
    int bookcost; 
    int bookcounter = 0;
    int cycleRun;
    int total;
    int inputs;

    printf("Run Program? 1 for Yes or -1 for No \n"); // ask user to input product name
    scanf("%d", &cycleRun);
    while (cycleRun != -1) 
    {

        inputData(&inputs, &booknmbr, &nmbrpurchased, &bookcost);
        processingData(bookcost, nmbrpurchased, totalpurch, costaccu);
        outputInfo(booknmbr, nmbrpurchased, bookcost, &total);

        printf("Run Program? 1 for Yes or -1 for No \n"); // ask user to input product name
        scanf("%d", &cycleRun);
    }
}

void inputData(int* inputs, int* booknmbr, int* nmbrpurchased, int* bookcost)
{
    printf( "\nEnter the Book Product Number?\n" );
    scanf("%d", &booknmbr);

    printf( "Enter the Number of Books Purchased?\n" );
    scanf("%d", &nmbrpurchased);

    printf( "Enter the Cost of the Book Purchased?\n");
    scanf("%d", &bookcost);

    printf( "TEST: %u\n", bookcost);

    return;
}

void processingData(int bookcost, int nmbrpurchased, int totalpurch, int costaccu)
{
    int total;

    printf( "TEST: %u\n", bookcost);

    total = bookcost * nmbrpurchased;
    totalpurch = totalpurch + nmbrpurchased;
    costaccu = costaccu + bookcost;
    totalcostaccu = totalcostaccu + (bookcost * nmbrpurchased);

    printf( "TEST: %u\n", bookcost);

    return;
}

void outputInfo(int booknmbr, int nmbrpurchased, int bookcost, int* total)
{
    printf( "\nBook Product number entered is: %u\n", booknmbr);
    printf( "Quantity of Book Purchased is: %u\n", nmbrpurchased);
    printf( "Cost of the Book Purchased is: %u\n", bookcost);
    printf( "Total cost of books is: $%u\n", total);

    return;
}

void outputSummary(int bookcounter, int totalpurch, int costaccu, int totalcostaccu)
{
    printf( "\n\nNumber of records processed = %u\n", bookcounter);
    printf( "Number of books purchased = %u\n", totalpurch);
    printf( "Cost of the books purchased = $%u\n", costaccu);
    printf( "Total cost for all book purchases = $%u\n", totalcostaccu);

    return;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T01:55:49.763

快速搜索显示 3435973836 是 Windows 在 x64 上提供未分配内存的值 - 这很能说明问题，因为它表明您有指向无处的指针。

让我们看看这里发生了什么。在`main()`中，您定义了一堆整数。当您说 时，您传递对这些整数的引用`inputData(&inputs, &booknmbr, &nmbrpurchased, &bookcost)`。该函数的签名为`void inputData(int* inputs, int* booknmbr, int* nmbrpurchased, int* bookcost)`- 到目前为止非常好。

……那你`scanf("%d", &booknmbr)`。想一想。

这是正确的。您正在传递`scanf()`对指向要填充的整数的指针的引用，而不仅仅是指针。这是一个容易掉入的陷阱，因为您可能总是以`scanf()`这种方式编写调用并且这已成为习惯。将其替换为 a`scanf("%d", booknmbr)`会使世界再次正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T01:50:41.997

您将变量的*地址*`inputData`传递给...试试这个：

```
/* not using inputs? */
void inputData(int* pinputs, int* pbooknmbr, int* pnmbrpurchased, int* pbookcost)  {
    printf( "\nEnter the Book Product Number?\n" );
    scanf("%d", pbooknmbr);
    printf( "Enter the Number of Books Purchased?\n" );
    scanf("%d", pnmbrpurchased);
    printf( "Enter the Cost of the Book Purchased?\n");
    scanf("%d", pbookcost);
    printf( "TEST: %u\n", *pbookcost);
} 
```

你有一个类似的问题`total`in `outputInfo`。您需要仔细阅读您的代码并注意细节，注意哪些变量是指针，哪些是标量值。就像我在这里所做的那样，以不同的方式命名指针会有所帮助。

# makefile - 如何在 GNU make 中使用命令行参数？

> ID：12755980
> 
> 赞同：0
> 
> 时间：2012-10-06T01:43:58.900
> 
> 标签：makefile

例如，我有 10 个名为`ex1.c`, `ex2.c`, `ex3.c`....`ex10.c`的源文件，将来可能还会更多。

是否可以在 GNU Make 中使用命令行参数作为变量，这样当我想编译时`ex1.c`，我可以输入`make 1`. 如果我想编译`ex10.c`，我可以输入`make 10`. `makefile`当我`ex100.c`稍后添加更多来源时，我不需要添加更多行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:49:30.937

我觉得这不是一个好主意，但是是的，你可以做到。

要构建目标文件（例如`ex3.o`）：

```
%: ex%.c
    $(CC) -c $< -o ex$*.o 
```

要构建可执行文件（例如`ex3`）：

```
%: ex%.c
    $(CC) $< -o ex$* 
```

# c# - 使用语句

> ID：12755982
> 
> 赞同：0
> 
> 时间：2012-10-06T01:44:37.583
> 
> 标签：c#, sqlconnection, using-statement

今天我注意到一段代码，如下所示：

```
public class Test
{
    SqlConnection connection1 = 
      new SqlConnection(ConfigurationManager.ConnectionStrings["c1"].ToString());
    SqlConnection connection2 = 
      new SqlConnection(ConfigurationManager.ConnectionStrings["c2"].ToString());

    public void Method1()
    {
        using (connection1)
        {
            connection1.Open();
            using (SqlCommand newSqlCommand = new SqlCommand("text",connection2))
            {
            // do something       
            }         
        }
    }

    public void Method2()
    {
        using (connection1)
        {
            // do something                
        }
    }
} 
```

我只是想知道为什么有人想在创建类而不是在类中调用相应方法时打开连接？

编辑：我应该可能已经发布了整个代码。所以我确实看到他们在哪里打开 connection1，但随后他们正在使用不同的 sql 连接（connection2）实例化一个 sqlcommand，该连接尚未在任何地方打开。我在这里想念什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:59:14.607

此行仅初始化一个连接对象，该对象稍后可用于打开与数据库服务器的连接。

```
SqlConnection connection1 = 
new SqlConnection(ConfigurationManager.ConnectionStrings["c1"].ToString()); 
```

我所知道的是，在其作用域之后使用对象的处置（在连接对象的情况下，它们会自动关闭），所以我不推荐这种用法，因为它可能与其他对象类型（除了连接）有问题，可以'在他们的 dispose 被调用后不被使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:47:36.597

`connection1 = new SqlConnection(...)`并没有真正打开连接。它只是创建连接对象。

你必须打电话`connection1.Open();`才能真正打开它。您可以在`using`语句块中执行此操作。

有关更多详细信息，请参阅此[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T04:39:05.330

代码很危险。如果您调用 Method1 然后 Method2（反之亦然），您将收到错误消息（连接字符串未初始化）。发生错误是因为该`using`语句将关闭连接并释放对象。我仔细检查了调用 dispose 时会发生什么......连接字符串被清除（可能还有一些我没有注意到的其他事情）。

> 您不想重复使用已处置的对象。

实例化一个新的连接对象的成本是微不足道的，所以我只需要在需要的地方创建对象，也许用一点工厂方法来减少代码重复，所以改为：-

```
 private static SqlConnection GetSqlConnection()
    {
        return new SqlConnection(ConfigurationManager.ConnectionStrings["c1"].ToString());
    }

    private void Method1()
    {
        using (var conn = GetSqlConnection())
        {
            conn.Open();
            // do stuff...
        }
    }
    private void Method2()
    {
        using (var conn = GetSqlConnection())
        {
            conn.Open();
            // do other stuff...
        }
    } 
```

当然，有许多不同的方法可以解决这个问题，这只是一种而且确实非常简单的方法......但这是一个很好的起点并且是安全的 :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T01:58:57.753

它要么

*   以这种方式编写以强制在类上只执行对方法的单个调用
*   如果您调用 2 个方法，则会因抛出 ObjectDisposed 异常而无意中造成混淆
*   在您省略的块中包含连接重新初始化代码。

# java - Spring Batch 项目处理器未执行

> ID：12755988
> 
> 赞同：4
> 
> 时间：2012-10-06T01:46:23.277
> 
> 标签：java, spring, spring-batch

我正在使用 STS 2.81 中包含的 Spring Batch 模板并使用 Manning 的 Spring Batch in Action 中的示例创建一个 Spring Batch 作业。我能够毫无问题地执行块读取器和写入器，但我的代码正在跳过处理器。我什至尝试在所有对象进入处理器时将其清空，但什么也没有，对象仍然设法被写入，就好像处理器被忽略了一样。我尝试在处理器中调用 System.out.println，但没有在终端中打印出来。我终于通过注释将配置从使用 XML bean 更改为组件，但它也不起作用。我不确定我是否遗漏了某些设置...我遵循了 Spring Batch in Action 和 SpringSource 网站中的示例，一切看起来都很好...帮助！

这是代码：

```
<batch:job id="job1">
    <batch:step id="step1"  >           
        <batch:tasklet transaction-manager="transactionManager" start-limit="100" >
            <batch:chunk reader="productFlatFileReader"
                         processor="productProcessor"
                         writer="productFlatFileWriter"
                         commit-interval="10" />
        </batch:tasklet>
    </batch:step>
</batch:job> 
```

这是处理器bean：

```
<bean id="productProcessor" class="com.test.training.processors.ProductProcessor" /> 
```

这是我试图执行但无济于事的处理器类：

```
package com.test.training.processors;

import org.springframework.batch.item.ItemProcessor;
import org.springframework.stereotype.Component;
import com.test.training.entities.Product;

public class ProductProcessor implements ItemProcessor<Product, Product> {

@Override
public Product process(Product product) throws Exception {
    product.setDescription("Processor is WORKING!");
    return product;
    //return this.validateProductByProductIdentifier(product) ? null : product;
}

private boolean validateProductByProductIdentifier(Product product) {
    return product.getProduct_identifier() == 5 ? true : false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T10:25:19.657

您的 bean 配置需要具有 scope="step" 才能让 Spring Batch 将 bean 识别为批处理 bean。

喜欢：

```
<bean id="productProcessor" scope="step" class="com.test.training.processors.ProductProcessor" /> 
```

# c - 输出作为一个倒置的问号和提示在 C 中的计算器程序中出现两次

> ID：12755993
> 
> 赞同：0
> 
> 时间：2012-10-06T01:48:05.917
> 
> 标签：c, getchar, putchar

我正在编写一个简单的计算程序，但我无法获得任何有效的输出。我得到的只是一个颠倒的问号。此外，我在程序末尾有一个提示，询问用户是否要输入另一个计算。但是，当我输入计算时，控制台中会出现两次提示。有谁知道为什么会发生这些事情？最后，我只能使用 getchar 和 putchar 来处理输入和输出。在此先感谢您的帮助。

```
int addFunction( int, int);
int subtractFunction(int, int);
int multiplyFunction(int, int);
int modulusFunction(int, int);
float divideFunction(float, float);

int main(int argc, const char * argv[])
{

int num1 = 0, num2 = 0, result = 0;
char  continuePrompt,  iochar = 0, operator = 0;

do {
    iochar = getchar();
    getchar();

    if ((iochar >= 0) && (iochar <= 20000)) {
        num1 = iochar; 
    }

    if ((iochar == '+') || (iochar == '-') || (iochar == '*') || (iochar == '/') || (iochar == '%')) {
        operator = iochar; 
    }

    if ((num1 >= 0) || ((iochar >= 0) && (iochar <= 20000))){
        num2 = iochar;
    }

    switch (operator) {

        case '+':
           iochar  = addFunction(num1, num2);
            break;

        case '-':
            iochar = subtractFunction(num1, num2);
            break;

        case '*':
            iochar = multiplyFunction(num1, num2);
            break;

        case '%':
            iochar = modulusFunction(num1, num2);
            break;

        case '/':
            iochar = divideFunction(num1, num2);
            break;

    }

    putchar(iochar);

    printf("Would you like to make another calulation? (y or n)");
    scanf("%c", &continuePrompt);

} while (continuePrompt != 'n');
return 0;
}

int addFunction(int x, int y){
    return x + y;
}

int subtractFunction(int x, int y){
     return x - y;
}

int multiplyFunction(int x, int y){
    return x * y;
}

int modulusFunction(int x, int y){
    return x % y;
}

float divideFunction(float x, float y){
    return x / y;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:11:33.117

The function `getchar` and gets a *character* from the console and `putchar` puts a *character* to the console. The are not general input/output functions. Your code reads like you expect `getchar` to read in decimal representations of integers and `putchar` to print decimal representation of integers, but they don't work that way. Since you can only use `getchar` and `putchar`, you are going to have to write your own input/output methods with them to parse your inputs and display them correctly. So, first, figure out how to parse and output integers. Then use those methods where you're expecting to read or write integers (and floats if you have to display the estimated values for division). It may help to have a helper method that actually grabs the "current" numerical string from wherever you are in the expression.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:19:36.970

一些基础...

字符值 '0' 不等于[ascii](http://www.asciitable.com)中的整数值 0，它的整数值是 48。如果每个数字只有 1 位，则类似于：

```
char c = getchar();
// Assuming the user only will input a number...
int number = c - '0'; 
```

对于仅使用 getchar() 读取整数，我会执行以下操作：

```
#include <stdio.h>
#include <math.h> // for pow

int getint()
{
    char c;
    char buffer[255]; // way larger than an integer will ever be I think...
    int numlen = 0;
    int number = 0;
    int x;
    int multfornegative = 1;

    while ((c = getchar()) != '\n') {
        buffer[numlen++] = c;
    }

    for (x = numlen - 1; x >= 0; x--) {
        c = buffer[(numlen - 1) - x];
        if (c == '-') {
            multfornegative *= -1;
        } else {
            number += (c - '0') * (int)pow(10, x);
        }
    }

    return number * multfornegative;
 } 
```

对于输出，你会做类似...

```
void putint(int number)
{
    char digit;
    int x;
    int start;

    if (number < 0) {
        putchar('-');
        number *= -1;
    }

    start = log(number) / log(10);

    for (x = start; x >= 0; x--) {
        digit = ((number / (int)pow(10, x)) % 10) + '0';
        putchar(digit);
    }
} 
```

此外，尝试分解您的输入，您在循环中的输入方式最终会令人困惑，这会扰乱您的逻辑。

```
int num1;
char op;
int num2;
int ans;

do {
    num1 = getint();
    op = getchar(); getchar();
    num2 = getint();

    switch(op) {
        case '+': ans = num1 + num2; break;
        case '-': ans = num1 - num2; break;
        // And so on...
    }
    putint(ans);
while (1); 
```

[C Programming Language](https://rads.stackoverflow.com/amzn/click/com/0131103628)是一本非常适合学习 C 的书，由 C 的发明者自己编写。

# javascript - 如何从 Node.Js 中的字符串创建流？

> ID：12755997
> 
> 赞同：225
> 
> 时间：2012-10-06T01:50:31.627
> 
> 标签：javascript, string, node.js, stream, inputstream

我正在使用一个库[ya-csv](https://github.com/koles/ya-csv)，它需要一个文件或一个流作为输入，但我有一个字符串。

如何将该字符串转换为 Node 中的流？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2014-02-28T03:54:36.453

正如[@substack在](https://stackoverflow.com/users/661591/substack)[#node](http://webchat.freenode.net/?channels=node.js)中纠正我的那样，Node v10 中的新[流 API](http://nodejs.org/api/stream.html)使这更容易：

```
const Readable = require('stream').Readable;
const s = new Readable();
s._read = () => {}; // redundant? see update below
s.push('your text here');
s.push(null); 
```

…之后，您可以自由地通过[管道](http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options)传输或以其他方式将其传递给您的目标消费者。

[它不像恢复器单线](https://github.com/substack/resumer)那样干净，但它确实避免了额外的依赖。

（*更新：*到目前为止，在 v0.10.26 到 v9.2.1 中，如果您没有设置，`push`直接从 REPL 提示符调用将崩溃并出现异常。它不会在函数或脚本中崩溃。如果不一致使您紧张，包括。）`not implemented``_read``noop`

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2014-09-03T17:17:36.220

不要使用 Jo Liss 的简历答案。它在大多数情况下都可以工作，但在我的情况下，它让我失去了 4 或 5 个小时的错误发现。不需要第三方模块来执行此操作。

**新答案**：

```
var Readable = require('stream').Readable

var s = new Readable()
s.push('beep')    // the string you want
s.push(null)      // indicates end-of-file basically - the end of the stream 
```

这应该是一个完全兼容的可读流。有关如何正确使用流的更多信息，[请参见此处。](https://github.com/substack/stream-handbook)

**旧答案**：只需使用本机 PassThrough 流：

```
var stream = require("stream")
var a = new stream.PassThrough()
a.write("your string")
a.end()

a.pipe(process.stdout) // piping will work as normal
/*stream.on('data', function(x) {
   // using the 'data' event works too
   console.log('data '+x)
})*/
/*setTimeout(function() {
   // you can even pipe after the scheduler has had time to do other things
   a.pipe(process.stdout) 
},100)*/

a.on('end', function() {
    console.log('ended') // the end event will be called properly
}) 
```

请注意，不会发出“关闭”事件（流接口不需要）。

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2020-01-08T01:02:35.450

从节点 10.17 开始，stream.Readable 有一种`from`方法可以轻松地从任何可迭代对象（包括数组文字）创建流：

```
const { Readable } = require("stream")

const readable = Readable.from(["input string"])

readable.on("data", (chunk) => {
  console.log(chunk) // will be called once with `"input string"`
}) 
```

请注意，至少在 10.17 和 12.3 之间，字符串本身是可迭代的，因此`Readable.from("input string")`可以工作，但每个字符都会发出一个事件。`Readable.from(["input string"])`将为数组中的每个项目发出一个事件（在本例中为一个项目）。

另请注意，在以后的节点中（可能是 12.3，因为文档说该函数当时已更改），不再需要将字符串包装在数组中。

[https://nodejs.org/api/stream.html#stream_stream_readable_from_iterable_options](https://nodejs.org/api/stream.html#stream_stream_readable_from_iterable_options)

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-10-10T18:27:40.420

只需创建`stream`模块的新实例并根据您的需要对其进行自定义：

```
var Stream = require('stream');
var stream = new Stream();

stream.pipe = function(dest) {
  dest.write('your string');
  return dest;
};

stream.pipe(process.stdout); // in this case the terminal, change to ya-csv 
```

或者

```
var Stream = require('stream');
var stream = new Stream();

stream.on('data', function(data) {
  process.stdout.write(data); // change process.stdout to ya-csv
});

stream.emit('data', 'this is my string'); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-05-09T05:56:53.097

**编辑：** [加思的答案](https://stackoverflow.com/questions/12755997/how-to-create-streams-from-string-in-node-js/22085851#22085851)可能更好。

我的旧答案文本保留在下面。

* * *

要将字符串转换为流，可以使用暂停的[直通](https://github.com/dominictarr/through)流：

```
through().pause().queue('your string').end() 
```

例子：

```
var through = require('through')

// Create a paused stream and buffer some data into it:
var stream = through().pause().queue('your string').end()

// Pass stream around:
callback(null, stream)

// Now that a consumer has attached, remember to resume the stream:
stream.resume() 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-08-30T23:44:48.007

有一个模块：[https ://www.npmjs.com/package/string-to-stream](https://www.npmjs.com/package/string-to-stream)

```
var str = require('string-to-stream')
str('hi there').pipe(process.stdout) // => 'hi there' 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-12-05T10:34:56.290

另一种解决方案是将读取函数传递给 Readable 的构造函数（cf doc [stream readeable options](https://nodejs.org/api/stream.html#stream_new_stream_readable_options)）

```
var s = new Readable({read(size) {
    this.push("your string here")
    this.push(null)
  }}); 
```

你可以在使用 s.pipe 之后

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-05-23T08:11:16.190

在咖啡脚本中：

```
class StringStream extends Readable
  constructor: (@str) ->
    super()

  _read: (size) ->
    @push @str
    @push null 
```

用它：

```
new StringStream('text here').pipe(stream1).pipe(stream2) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-08-16T01:07:37.777

我厌倦了每六个月重新学习一次，所以我刚刚发布了一个 npm 模块来抽象出实现细节：

[https://www.npmjs.com/package/streamify-string](https://www.npmjs.com/package/streamify-string)

这是模块的核心：

```
const Readable = require('stream').Readable;
const util     = require('util');

function Streamify(str, options) {

  if (! (this instanceof Streamify)) {
    return new Streamify(str, options);
  }

  Readable.call(this, options);
  this.str = str;
}

util.inherits(Streamify, Readable);

Streamify.prototype._read = function (size) {

  var chunk = this.str.slice(0, size);

  if (chunk) {
    this.str = this.str.slice(size);
    this.push(chunk);
  }

  else {
    this.push(null);
  }

};

module.exports = Streamify; 
```

`str`是`string`在调用时必须传递给构造函数的，并将由流作为数据输出。[根据文档](https://nodejs.org/api/stream.html#stream_new_stream_readable_options)`options`，是可以传递给流的典型选项。

根据 Travis CI，它应该与大多数版本的节点兼容。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-07-14T06:18:29.153

这是 TypeScript 中的一个整洁的解决方案：

```
import { Readable } from 'stream'

class ReadableString extends Readable {
    private sent = false

    constructor(
        private str: string
    ) {
        super();
    }

    _read() {
        if (!this.sent) {
            this.push(Buffer.from(this.str));
            this.sent = true
        }
        else {
            this.push(null)
        }
    }
}

const stringStream = new ReadableString('string to be streamed...') 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-06T02:04:57.467

JavaScript 是鸭子类型的，所以如果你只是复制[一个可读流的 API](http://nodejs.org/api/stream.html#stream_readable_stream)，它就可以正常工作。事实上，您可能无法实现大多数这些方法，或者只是将它们保留为存根；您需要实现的只是库使用的内容。您也可以使用 Node 的预构建[`EventEmitter`类](http://nodejs.org/api/events.html#events_class_events_eventemitter)来处理事件，因此您不必`addListener`自己实现等。

以下是在 CoffeeScript 中实现它的方法：

```
class StringStream extends require('events').EventEmitter
  constructor: (@string) -> super()

  readable: true
  writable: false

  setEncoding: -> throw 'not implemented'
  pause: ->    # nothing to do
  resume: ->   # nothing to do
  destroy: ->  # nothing to do
  pipe: -> throw 'not implemented'

  send: ->
    @emit 'data', @string
    @emit 'end' 
```

然后你可以像这样使用它：

```
stream = new StringStream someString
doSomethingWith stream
stream.send() 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-04T05:58:35.640

在 NodeJS 中，您可以通过以下几种方式创建可读流：

**解决方案 1**

你可以用`fs`模块来做。该功能`fs.createReadStream()`允许您打开一个可读的流，您所要做的就是传递文件的路径以开始流式传输。

```
const fs = require('fs');

const readable_stream = fs.createReadStream('file_path'); 
```

**解决方案 2**

如果您不想创建文件，则可以创建一个内存流并对其进行处理（例如，将其上传到某处）。您可以使用`stream`模块来做到这一点。`Readable`您可以从模块导入，`stream`并且可以创建可读流。创建对象时，您还可以实现`read()`用于从内部缓冲区中读取数据的方法。如果没有可读取的数据，`null`则返回。可选`size`参数指定要读取的特定字节数。如果`size`未指定参数，则将返回内部缓冲区中包含的所有数据。

```
const Readable = require('stream').Readable;

const readable_stream = new Readable({
  ​read(size) {
   ​// ...
​  }
}); 
```

**解决方案 3**

当您通过网络获取某些内容时，可以像流一样获取（例如，您正在从某个 API 获取 PDF 文档）。

```
const axios = require('axios');

const readable_stream = await axios({
  method: 'get',
  url: "pdf_resource_url",
  responseType: 'stream'
}).data; 
```

**解决方案 4**

第三方包可以支持创建流作为一项功能。这是`aws-sdk`通常用于将文件上传到`S3`.

```
const file = await s3.getObject(params).createReadStream(); 
```