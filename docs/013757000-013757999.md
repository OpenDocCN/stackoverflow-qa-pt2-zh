# StackOverflow 问答 13757000-13757999

# objective-c - 应用程序未加载 - applicationDidBecomeActive

> ID：13757001
> 
> 赞同：-1
> 
> 时间：2012-12-07T04:38:07.010
> 
> 标签：objective-c, ios, xcode

我有一个 iOS 应用程序，一些客户说它不会加载，他们会无限期地看到一个微调器。此微调器在应用程序委托中启动。

如果我在 applicationDidBecomeActive 委托中放置一个断点然后让 xcode 运行，我终于能够重现这一点。这里调用了一个 NSTimer。

我想知道这是否是其他人看到的，这个代表和 NSTimers 是否有冲突？

编辑：内存中的代码示例。稍后我将不得不在这里获取实际代码。

```
-(void)applicationDidBecomeActive:(UIApplication *)application {    
  [self toggleOpen];    
}

- (void)toggleOpen {      
  if (!self.timer) {
      self.timer = [NSTimer scheduledTimerWithTimeInterval:600 target:self selector:@selector(doWork) userInfo:nil repeats:YES];
  } else {
        [self.timer invalidate];
        self.timer = nil;
  }
}
- (void)doWork {
  //Under certain conditions calls a web service (rarely)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:14:49.880

如果应用程序根本无法加载并且只显示自启动以来的微调器，则不可能是因为计时器，因为它只是将`doWork`方法安排为在应用程序激活后 600 秒触发，然后继续下一个命令。

但是，如果应用程序加载正常，然后`doWork`在 600 秒后卡在方法中，则可能是因为调用 Web 服务的方式（同步调用与异步调用）。

因此，就像其他人所说的那样，除非您显示更多代码，否则无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:35:17.013

问题似乎与在 applicationDidBecomeActive 中触发的 NSTimer 有关。这可能在运行循环可用之前创建了一个 NSTimer。在 applicationDidBecomeActive 中注释掉要触发的 NSTimer 似乎已经修复了该应用程序从不启动的问题。

# ruby - “如果产量”与“如果块评估为真则产量”相同？

> ID：13757002
> 
> 赞同：3
> 
> 时间：2012-12-07T04:38:06.927
> 
> 标签：ruby

如果我对此代码运行下面的测试，它会返回

```
 ALERT: an event that always happens 
```

我希望它也能放

```
 ALERT: an event that never happens 
```

但事实并非如此。我认为差异的原因是各自测试中的“真”和“假”，但我不明白为什么“真”或“假”在这种情况下会有所不同。方法“事件”说

```
puts "ALERT: #{name}" if yield 
```

如果测试的结果可以解释为“真”在这种情况下等于“产量”，而“假”则不然，那么“假”如何否定“产量”？

问题：'if yield' 是否意味着'yield if block 评估为真'？

**代码**

```
def event(name)
  puts "ALERT: #{name}" if yield
end

Dir.glob('*events.rb').each {|file| load file } 
```

**测试**

```
event "an event that always happens" do
  true                     
end

event "an event that never happens" do
  false                       
end 
```

**输出**

```
ALERT: an event that always happens 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T04:49:16.670

这可能会有所帮助。

```
def event(name)
  val = yield
  puts val.inspect
  puts "ALERT: #{name}" if val == "donald"
end

event "an event that always happens" do
  "donald"
end

event "an event that never happens" do
  "duck"
end 
```

印刷

```
"donald"
ALERT: an event that always happens
"duck" 
```

基本上，yield 的返回值是块中最后评估的值。这就是 if 语句中用作标准的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:02:32.600

> 问题：'if yield' 是否意味着'yield if block 评估为真'？

不，`if yield`意思是if((执行块的结果))，也就是说块总是被求值，它的结果作为if语句的条件。

`puts "..." if yield`意思是“只有当真时才放”。它相当于

```
if yield
then
    puts "ALERT: #{name}" 
```

这就是为什么你只看到一个输出。在第二次事件调用中，由于`if false`. 试试这个 ：

```
def event(name)
    result = yield
    puts "the block is #{result}"
    puts "ALERT: #{name}" if result
end

$ ruby -w t.rb 
the block is true
ALERT: an event that always happens
the block is false
$ 
```

# linux - 性能计数器集合 - Linux

> ID：13757004
> 
> 赞同：0
> 
> 时间：2012-12-07T04:38:12.843
> 
> 标签：linux, intel, perfmon

```
model name  : Intel(R) Core(TM) i7 CPU       Q 720  @ 1.60GHz
perf version 3.2.33
python 2.7
OS: Linux. Distro: Ubuntu 12.10 
```

我正在尝试使用 perfmon 收集 PerThread 性能计数器。这些是我要收集的事件：`perf_events=['INSTRUCTIONS_RETIRED','L2_LINES_IN','LLC_MISSES']`

我有时能够收集数据 -`unpredictable.` 有时，我能够收集数据。我正在尝试运行`PARSEC - CANNEAL Benchmark thread.`

```
 File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 44, in apport_excepthook 
```

这是错误，我有时会遇到。我试着用谷歌搜索场景，如果人们有这种问题谷歌关键字：`"perfmon perthread session traces unpredictable"`|`perfmon events collection intel unpredictable`

如有必要，我还可以发布代码片段。

我注意到的一件更有趣的事情是，如果我运行同一个线程两次，而不杀死前一个线程。我每次都能收集。这是否意味着anychance？我没有足够的 IPS 来首先报告？不可能，因为 -`"top"`显示核心是 100% 谢谢

# ios - NSDate 格式未显示预期内容

> ID：13757008
> 
> 赞同：1
> 
> 时间：2012-12-07T04:38:57.150
> 
> 标签：ios, nsdate, xcode4.5, nsdateformatter

我在将日期打印为 NSString 时遇到问题。我以这种方式在我的应用程序生命周期的某些点存储了当前日期和时间：

```
NSDate *current = [NSDate date];
long currentTime = [current timeIntervalSince1970]; 
```

现在，我需要在 UILabels 中显示这些日期。我试过这样：

```
NSDate *date = [NSDate dateWithTimeIntervalSince1970:currentTime];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd/MM/yyyy - HH:mm:ss"];
NSString *stringFromDate = [formatter stringFromDate:date]; 
```

但我没有得到正确的日期和时间。我会错过什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:41:31.177

尝试这个，

NSString *stringFromDate=[NSDateFormatter 本地化StringFromDate:日期 dateStyle:NSDateFormatterMediumStyle timeStyle:NSDateFormatterMediumStyle];

您也可以更改日期样式和时间样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:45:43.863

您的`currentTime`变量是 a `long`，而不是`NSTimeInterval`(a `double`)。您不仅会丢失小数部分（不太重要），还会丢失时间间隔的上限。将其更改为：

```
NSTimeInterval currentTime = [current timeIntervalSince1970]; 
```

# javascript - 有条件地改变 fontFamily

> ID：13757011
> 
> 赞同：2
> 
> 时间：2012-12-07T04:39:15.583
> 
> 标签：javascript, css

我希望每 1 秒后连续更改段落的字体系列.. 这是我的非工作代码...

```
<!DOCTYPE html>
<html>
<head>
<script src = "jquery.js"> </script>
<script>

$(document).ready(function() {

    var idee = document.getElementById('p1');   

    changeFont();
}); 

    function changeFont()
    {
        if(idee.style.fontFamily == 'times')
        {
            idee.style.fontFamily = 'courier';
        }
        else if(idee.style.fontFamily == 'courier')
        {
            idee.style.fontFamily = 'times';
        }

        setTimeout(changeFont, 1000);

    }
</script>
</head>

<body>
<p id="p1">This is some text.</p>
</body>

</html> 
```

所以..我做错了什么？如何有条件地更改字体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T05:11:41.487

此代码工作正常..

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
    function changeFont()
    {
    var idee = document.getElementById("p1").style.fontFamily; 

        if( idee == 'times')
        {
   document.getElementById("p1").style.fontFamily = 'courier';
        }
        else if(idee == 'courier')
        {
   document.getElementById("p1").style.fontFamily = 'times';
        }

var int=setTimeout(function(){changeFont();},1000);

    }
</script>
</head>

<body onload="    changeFont();">
<p id="p1" style="font-family: times;">This is some text.</p>
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T04:49:43.547

您已经在文档内的匿名函数中设置了 var idee，但您没有将其传递给 changeFont，您只是调用 changeFont 并希望它在全局命名空间中。

先试试这个：

```
<!DOCTYPE html>
<html>
<head>
<script src = "jquery.js"> </script>
<script>

$(document).ready(function() {

    var idee = document.getElementById('p1');   

    changeFont(idee);
}); 

    function changeFont(idee)
    {
        if(idee.style.fontFamily == 'times')
        {
            idee.style.fontFamily = 'courier';
        }
        else if(idee.style.fontFamily == 'courier')
        {
            idee.style.fontFamily = 'times';
        }

        setTimeout(function() {changeFont(idee)}, 1000);

    }
</script>
</head>

<body>
<p id="p1">This is some text.</p>
</body>

</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T04:40:35.177

`idee`正在匿名函数中声明。

它在 changeFont 中不可见。

```
<script>
var idee;
$(document).ready(function() {

    idee = document.getElementById('p1');   

    changeFont();
}); 
```

和

`setTimeout('changeFont()',1000);`

# javascript - 访问另一个对象内的对象属性

> ID：13757012
> 
> 赞同：2
> 
> 时间：2012-12-07T04:39:15.433
> 
> 标签：javascript, object, syntax, properties

我在这里的 jsFiddle 中设置了这个问题：http: [//jsfiddle.net/GeekStocks/WHtCv/](http://jsfiddle.net/GeekStocks/WHtCv/)

我正在编写一个 jQuery 插件实例方法，但终其一生都找不到正确的语法来覆盖嵌套对象属性的值！这是代码（来自 jsFiddle）：

```
jQuery.fn.test = function(options) {
  var defaults = {
    settings: {
      height: 0, // must be computed
      width: 0,  // must be computed
      scale: 0.20 // percentage of the >> height <<
    },
    simpleVar: "Hola hombre." // default is masqualine
  };

  var opts = jQuery.extend(defaults, options); // override defaults

  this.val(opts.simpleVar + "\nScale: " + opts.settings.scale);
}; 
```

现在，如果我想覆盖“simpleVar”，这很容易：

```
$("#t1").test({simpleVar: "Hola senora."}); 
```

但是改变“设置”对象的“比例”属性让我望而却步......

```
$("#t2").test({"settings.scale": 0.86}); // uh, nope! 
```

任何人？可能很简单，对吧？：-） 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:41:23.410

使用[`deep`extend](http://api.jquery.com/jQuery.extend/)和嵌套对象：

```
jQuery.fn.test = function(options) {
    // snip...

    //                       ↓↓↓↓
    var opts = jQuery.extend(true, defaults, options);

    this.val(opts.simpleVar + "\nScale: " + opts.settings.scale);
};

// then

$("#t2").test({settings: {scale: 0.86}}); 
```

[http://jsfiddle.net/mattball/LXTAm](http://jsfiddle.net/mattball/LXTAm)

# web-config - VS2012 WebDeploy 发布破坏 Web.Config

> ID：13757013
> 
> 赞同：2
> 
> 时间：2012-12-07T04:39:18.560
> 
> 标签：web-config, visual-studio-2012, webdeploy

我有一个从 Visual Studio 2012 开发和发布的 MVC3 Web 应用程序项目。这是最近迁移的 VS2010 项目。

我的 web.config 是使用`<location inheritInChildApplications="false">`标签设置的，因此在虚拟目录中运行的子应用程序不会接受这些设置。

我已经设置了一个 WebDeploy 发布配置文件，它在 VS2010 中完美运行，但在从 VS2012 发布时破坏了我的应用程序。`<connectionStrings>`它在关闭上述标记之后添加一个节点`</location>`，即使我的`<connectionStrings>`节点内已经有一个`<location>`节点。由于配置文件无效，这会破坏应用程序。

我尝试从头开始重新创建配置文件，但没有解决问题。

根据我在这里阅读的内容， http: [//msdn.microsoft.com/en-us/library/dd465337.aspx](http://msdn.microsoft.com/en-us/library/dd465337.aspx)，取消选中“ `Use this connection string at runtime`”复选框应该指示发布过程**不**添加连接字符串，但无论如何它都会这样做。

我认为如果我不使用 ，这将不是问题`<location inheritInChildApplications="false">`，因为连接字符串会被添加到正确的位置。

另外，请注意，如果我发布到文件系统而不是使用 WebDeploy，则发布的 Web.Config 会正确创建，并且不会添加额外的连接字符串节点。

此问题是否有任何已知的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:12:19.683

正如我所怀疑的，这个问题与`inheritInChildApplications`属性有关。这可能是 Visual Studio 2012 Web 部署中的一个错误，即部署过程总是将连接字符串添加到配置文件中，即使您告诉它不要这样做。就我而言，它还添加了错误的位置，这破坏了我的应用程序。

[为了解决这个问题，我只是停止使用该属性并使用此处](http://blogs.iis.net/steveschofield/archive/2009/09/19/control-web-config-inheritance-with-iis-7-asp-net-options.aspx)列出的选项之一关闭配置继承。

我现在可以毫无错误地发布，但该过程仍将连接字符串添加到已部署的配置文件中。烦人但不是表演的终结者。

# php - wordpress 调用数据库查询的问题

> ID：13757016
> 
> 赞同：0
> 
> 时间：2012-12-07T04:40:02.547
> 
> 标签：php, mysql, wordpress

嘿，伙计们，所以我试图访问我在 wordpress 中的数据库以获取一些字段值，我尝试直接使用 PDO 样式，但它似乎不起作用，所以我进入 wordpress codex 并按照他们的方式调用东西，但仍然没有成功！

代码：

```
/***GET USERNAME***/
            global $current_user;
            get_currentuserinfo();
            $accusername = $current_user->user_login ;
            /******SEE IF FIRST TIME DISCOUNT CODE BEEN USED*******/
            $wpdb->query( 
                        $wpdb->prepare( 
                "
                        SELECT firsttime_discount
                        FROM $wpdb->users
                        WHERE user-login = %d

                ",
                    $accusername 
                                       )
                        );
                /******CHECK IT******/
                echo"working";
            $wpdb->query('query');
            echo"working";
            if ($checkFTDiscount->firsttimediscount != 1){
                    $validFTDiscount = 1;
            }
            else{
                $validFTDiscount = 0;
                echo"wori"; 
            } 
```

所以假设进去看看wp_user区域中折扣码的值是否设置为1，如果没有设置为0。

如果您还有其他问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:44:00.523

在你可以使用 $wpdb 之前，你必须声明`global $wpdb;`

```
 global $current_user, $wpdb; 
```

应该做的伎俩。

# android - 如何以编程方式获取 Android 中的所有 Sim 联系人？

> ID：13757022
> 
> 赞同：3
> 
> 时间：2012-12-07T04:40:27.920
> 
> 标签：android, android-contacts

如何以编程方式在 Android 中列出 sim 联系人？我在[这里](https://stackoverflow.com/questions/4133163/how-to-get-phone-contacts-in-android/13737976#comment18889423_13737976)获得了获取电话联系人的代码，但我也需要 SIM 卡联系人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T04:48:59.717

```
Uri simUri = Uri.parse("content://icc/adn");

  Cursor cursorSim = this.getContentResolver().query(simUri, null, null,null, null);

         while (cursorSim.moveToNext()) {           
             listName.add(cursorSim.getString(cursorSim.getColumnIndex("name")));
             listContactId.add(cursorSim.getString(cursorSim.getColumnIndex("_id")));      
             listMobileNo.add(cursorSim.getString(cursorSim.getColumnIndex("number")));
            } 
```

> 现在只需按照代码获取 simcard 详细信息..它工作正常

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T05:44:20.427

试试这个代码伙伴！

```
 import android.app.Activity;
    import android.content.ContentResolver;
    import android.database.Cursor;
    import android.os.Bundle;
    import android.provider.ContactsContract;

    public class GetContactsDemo extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            readContacts();
        }

        public void readContacts(){
             ContentResolver cr = getContentResolver();
             Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                    null, null, null, null);

             if (cur.getCount() > 0) {
                while (cur.moveToNext()) {
                    String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                    String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                        System.out.println("name : " + name + ", ID : " + id);

                        // get the phone number
                        Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                               ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                               new String[]{id}, null);
                        while (pCur.moveToNext()) {
                              String phone = pCur.getString(
                                     pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                              System.out.println("phone" + phone);
                        }
                        pCur.close();

                        // get email and type

                       Cursor emailCur = cr.query(
                                ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                                null,
                                ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?",
                                new String[]{id}, null);
                        while (emailCur.moveToNext()) {
                            // This would allow you get several email addresses
                                // if the email addresses were stored in an array
                            String email = emailCur.getString(
                                          emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                            String emailType = emailCur.getString(
                                          emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));

                          System.out.println("Email " + email + " Email Type : " + emailType);
                        }
                        emailCur.close();

                        // Get note.......
                        String noteWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                        String[] noteWhereParams = new String[]{id,
                        ContactsContract.CommonDataKinds.Note.CONTENT_ITEM_TYPE};
                                Cursor noteCur = cr.query(ContactsContract.Data.CONTENT_URI, null, noteWhere, noteWhereParams, null);
                        if (noteCur.moveToFirst()) {
                            String note = noteCur.getString(noteCur.getColumnIndex(ContactsContract.CommonDataKinds.Note.NOTE));
                          System.out.println("Note " + note);
                        }
                        noteCur.close();

                        //Get Postal Address....

                        String addrWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                        String[] addrWhereParams = new String[]{id,
                            ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
                        Cursor addrCur = cr.query(ContactsContract.Data.CONTENT_URI,
                                    null, null, null, null);
                        while(addrCur.moveToNext()) {
                            String poBox = addrCur.getString(
                                         addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POBOX));
                            String street = addrCur.getString(
                                         addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET));
                            String city = addrCur.getString(
                                         addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY));
                            String state = addrCur.getString(
                                         addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION));
                            String postalCode = addrCur.getString(
                                         addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.<span class="IL_AD" id="IL_AD3">POSTCODE</span>));
                            String country = addrCur.getString(
                                         addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY));
                            String type = addrCur.getString(
                                         addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.TYPE));

                            // Do something with these....

                        }
                        addrCur.close();

                        // Get Instant <span class="IL_AD" id="IL_AD12">Messenger</span>.........
                        String imWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                        String[] imWhereParams = new String[]{id,
                            ContactsContract.CommonDataKinds.Im.CONTENT_ITEM_TYPE};
                        Cursor imCur = cr.query(ContactsContract.Data.CONTENT_URI,
                                null, imWhere, imWhereParams, null);
                        if (imCur.moveToFirst()) {
                            String imName = imCur.getString(
                                     imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.DATA));
                            String imType;
                            imType = imCur.getString(
                                     imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.TYPE));
                        }
                        imCur.close();

                        // Get Organizations.........

                        String orgWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                        String[] orgWhereParams = new String[]{id,
                            ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE};
                        Cursor orgCur = cr.query(ContactsContract.Data.CONTENT_URI,
                                    null, orgWhere, orgWhereParams, null);
                        if (orgCur.moveToFirst()) {
                            String orgName = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.DATA));
                            String title = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.TITLE));
                        }
                        orgCur.close();
                    }
                }
           }
        }
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T13:19:13.577

尝试这个：：

```
import java.util.ArrayList;

import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.view.Menu;
import android.view.MenuItem;

public class MainActivity extends Activity {

    ArrayList<String>listName=new ArrayList<String>();
    ArrayList<String>listContactId=new ArrayList<String>();
    ArrayList<String>listMobileNo=new ArrayList<String>();
    ArrayList<String>idArr=new ArrayList<String>();
    ArrayList<String>nameArr=new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Uri simUri = Uri.parse("content://icc/adn");

        ContentResolver cr = getContentResolver();
        Cursor cursorSim = cr.query(ContactsContract.Contacts.CONTENT_URI,
               null, null, null, null);
       // Cursor cursorSim = this.getContentResolver().query(simUri, null, null,null, null);

               while (cursorSim.moveToNext()) {           
                //   listName.add(cursorSim.getString(cursorSim.getColumnIndex("name")));
                 //  listContactId.add(cursorSim.getString(cursorSim.getColumnIndex("_id")));      
                 //  listMobileNo.add(cursorSim.getString(cursorSim.getColumnIndex("number")));
                   String id = cursorSim.getString(cursorSim.getColumnIndex(ContactsContract.Contacts._ID));
                   String name = cursorSim.getString(cursorSim.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

                 //  String number=cursorSim.getString(cursorSim.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));
                   idArr.add(id);
                   nameArr.add(name);

                 //  listMobileNo.add(number);

                   if (Integer.parseInt(cursorSim.getString(cursorSim.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

                   System.out.println("name : " + name + ", ID : " + id);

                   // get the phone number
                   Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                          ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                          new String[]{id}, null);
                   while (pCur.moveToNext()) {
                         String phone = pCur.getString(
                                pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                         System.out.println("phone=" + phone);
                         listMobileNo.add(phone);
                   }
                   pCur.close();

                  }
               }
               System.out.println("idArr="+idArr);
               System.out.println("nameArr="+nameArr);

             //  System.out.println("listName="+listName);
              // System.out.println("listContactId="+listContactId);
               System.out.println("listMobileNo="+listMobileNo);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        int id = item.getItemId();
        if (id == R.id.action_settings) {
            return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

将此代码添加到您的 mainifest 文件中：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-07T04:48:14.080

你试过这个

```
TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
mPhoneNumber = tMgr.getLine1Number(); 
```

还要在清单文件中包含 READ_PHONE_STATE 权限。

# syntax - 使用动态 Blogger 主题显示编程语法突出显示？

> ID：13757025
> 
> 赞同：-2
> 
> 时间：2012-12-07T04:40:48.460
> 
> 标签：syntax, coding-style, themes, blogger, posts

我使用博客创建与某些编程语言相关的帖子。使用 blogger.com 中的简单主题，可以将编程语法设置为以各种样式显示，从而将其与文本的其余部分区分开来。

但是，对于动态主题，这些事情中的任何一个都不起作用。为此该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:43:26.537

您正在寻找的术语是“语法突出显示”，并且有许多 JavaScript 软件包可以做到这一点。我怀疑您可以将一些 JavaScript 集成到您的 Blogger 模板中，不是吗？

当我在“javascript syntax highlighting blogger”上搜索时，出现了无数的文章。去吧。

# java - 线程中的异常 - java.util.InputMismatchException

> ID：13757027
> 
> 赞同：-1
> 
> 时间：2012-12-07T04:41:14.043
> 
> 标签：java, string, sorting, polymorphism

我正在尝试读取字符串并对其进行排序，但出现错误。我按照第一个答案的说法修改了程序，我在运行中走得更远，但它不会完成。我是初学者，所以请清楚要更改的内容。

我收到此错误：

```
Exception in thread "main" java.util.InputMismatchException
    at java.util.Scanner.throwFor(Scanner.java:909)
    at java.util.Scanner.next(Scanner.java:1530)
    at java.util.Scanner.nextInt(Scanner.java:2160)
    at java.util.Scanner.nextInt(Scanner.java:2119)
    at hw05.Strings.main(Strings.java:32)
Java Result: 1

The line with error is starred.

package hw05;

/**
 *Demonstrates selectionSort on an array of strings.
 * 
 * @author Maggie Erwin
 */
import java.util.Scanner;

public class Strings {

    // --------------------------------------------
    // Reads in an array of integers, sorts them,
    // then prints them in sorted order.
    // --------------------------------------------
    public static void main(String[] args) {

        String[] stringList;
        Integer[] intList;
        int size;

        Scanner scan = new Scanner(System.in);

        System.out.print("\nHow many strings do you want to sort? ");
        size = scan.nextInt();
        int sizeInInt = Integer.valueOf(size);
        stringList = new String[sizeInInt];
        intList= new Integer[sizeInInt]; // Initialize intList

        System.out.println("\nEnter the strings...");
        for (int i = 0; i < size; i++) {
                intList[i] = scan.nextInt();
            }
        Sorting.selectionSort(stringList);

        System.out.println("\nYour strings in sorted order...");
        for (int i = 0; i < size; i++) {
                System.out.print(stringList[i] + " ");
            }
        System.out.println();

    **}** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:44:17.490

你还没有像你初始化的那样初始化`intList`变量`stringList`

```
String[] stringList;
Integer[] intList;
....
stringList = new String[sizeInInt];  //you initialized it in your code
intList = new Integer[sizeInInt];    // missing in your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:43:56.163

这个错误解释了一切。你需要先初始化`sizeInInt`。所以它看起来像这样：

```
public static void main(String[] args) {

        String[] stringList;
        Integer[] intList;
        int size;

        Scanner scan = new Scanner(System.in);

        System.out.print("\nHow many strings do you want to sort? ");
        size = scan.nextInt();
        int sizeInInt = Integer.valueOf(size);
        stringList = new String[sizeInInt];
        intList= new Integer[sizeInInt]; // Initialize intList

        System.out.println("\nEnter the strings...");
        for (int i = 0; i < size; i++) {
                **intList**[i] = scan.nextInt();
            }
        Sorting.selectionSort(stringList);

        System.out.println("\nYour strings in sorted order...");
        for (int i = 0; i < size; i++) {
                System.out.print(stringList[i] + " ");
            }
        System.out.println();

    } 
```

# sql - 为此使用什么类型的锁（表提示）？

> ID：13757034
> 
> 赞同：-1
> 
> 时间：2012-12-07T04:42:10.170
> 
> 标签：sql, concurrency, locking, rdbms

假设我有两列 CategoryId 和 SubcategoryId。对于每个 CategoryId，SubcategoryId 从 1 开始。插入新的子类别时，我需要为给定的 CategoryId 计算 MAX(SubcategoryId)+1。

以下是正确的吗？

```
BEGIN TRANSACTION
DECLARE @NextId bigint;
SELECT @NextId = ISNULL(MAX(SubcategoryId),0) + 1 
FROM Subcategory WITH (UPDLOCK, HOLDLOCK) 
WHERE CategoryId = @CategoryId;
INSERT INTO Subcategory
(
    CategoryId, 
    SubcategoryId
) 
VALUES
(
    @CategoryId, 
    @NextId
 );
COMMIT 
```

WITH(UPDLOCK, HOLDLOCK) 是否也防止同时插入具有相同 CategoryId 的新行，还是仅锁定在 SELECT 时匹配的现有行？如果是后者，我应该将其更改为 TABLOCK 吗？是否也需要某种排他锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:11:48.767

一般来说，除非您有非常特殊的要求，否则不建议搞乱锁定级别。据我了解，有一种方法可以让您的并发问题由 SQL 服务器引擎处理，而无需锁定提示。

所以你的表定义是：

```
CREATE TABLE Subcategory
(
   CategoryId bigint, 
   SubcategoryId bigint
 ) 
```

如果将表定义更改为：

```
CREATE TABLE Subcategory
(
   CategoryId bigint NOT NULL, 
   SubcategoryId bigint IDENTITY(1,1) NOT NULL
 ) ON [PRIMARY];
 ALTER TABLE Subcategory
 ADD CONSTRAINT pk_Subcategory PRIMARY KEY (CategoryId,SubcategoryId  ) 
```

SubcategoryID 将成为自动编号。这个数字将在每次插入时递增。因此，您不需要在插入过程中指定子类别 ID，这将允许 SQL Server 处理并发性。最好让SQL处理表的锁定和并发处理。

如果您将表结构更改为我建议的结构，您的查询也会变得更简单。

```
BEGIN TRAN
INSERT INTO Subcategory
(
    CategoryId, 

) 
VALUES
(
    @CategoryId, 

 );
 COMMIT TRAN 
```

这可能是您的解决方案。抱歉，我的语法可能是错误的，因为我已经好几个月没有接触过 SQL 服务器了。

# progress-4gl - 在 4GL 中复制数据库

> ID：13757036
> 
> 赞同：0
> 
> 时间：2012-12-07T04:42:13.123
> 
> 标签：progress-4gl, openedge

我正在使用 AppBuilder。如果我尝试连接到 Sports2000 数据库。即使有创建数据库的选项，它也会提示复制数据库。我知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:41:02.397

我不是应用程序构建器用户，但我想它是通过复制现有数据库来创建新数据库。标准候选人将是“sports”、“sports2000”或“empty”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:01:32.857

您可以使用工具 -> 数据库连接 -> 连接从 AppBuilder 连接数据库。

* * *

您无法连接到 OpenEdge 安装目录中的数据库。这些仅用作创建新数据库的模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T02:31:20.337

创建新数据库时，您可以选择从以下开始：

*   Empty - 创建一个新的空数据库
*   Copy from - 从其他 DB 复制 DB Schema，例如 sports、sports2000 或其他现有 DB。

# android - 如何在从 jQuery.validationEngine 沿 jquery mobile 的选择框中选择正确值后隐藏错误消息？

> ID：13757040
> 
> 赞同：-1
> 
> 时间：2012-12-07T04:43:04.040
> 
> 标签：android, validation, jquery-mobile, dropbox, jquery-validation-engine

我在我的移动页面中使用带有 jQ​​uery 移动插件的 jQuery 验证引擎，如果它具有空值，则验证下拉列表，一旦我设置了正确的值，错误消息不会进入隐藏三星银河 android 手机，但同样在索尼 xperia 和也在普通的网络浏览器（PC）中，有人可以帮助解决这个问题..

**规格，**

> jQuery 验证引擎 2.2、jquery-1.8.1.min、jquery.mobile-1.1.1.min，以及 symfony 1.1
> 
> 以上在 Android 4.0 中运行良好，但在 android 2.2 和 2.3 中无法运行

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:32:25.800

最后我得到了我的问题的解决方案......我在更改选择框时覆盖了这些字段上的validationEngine方法，

```
$('#day').change(function(){
    if( $(this).val()!= '日'){
         $("#day").validationEngine('hide');
    }
    else {
         $("#day").validationEngine('showPrompt', '* 半角数字でご入力して下さい。', 'red',"topLeft",true);
    }
    $("#confirm").validationEngine('detach');
    $("#confirm").validationEngine('attach',{promptPosition : "topLeft"});
}); 
```

# jquery - PHP / jQuery 重新加载 DOM

> ID：13757041
> 
> 赞同：0
> 
> 时间：2012-12-07T04:43:08.293
> 
> 标签：jquery, dom, refresh

新的和努力学习。

我在页面左侧有一个帐户名称表。当我单击其中一个帐户名称时，相关字段将显示在表单中。然后我可以更新任何字段并单击“更新”以更新基础 SQL 数据。

我还有一个文本字段和一个按钮来添加另一个帐户。这只是添加了一条新记录，其中帐户名称作为唯一填写的字段。现在我希望能够在上面提到的表格中单击该帐户，然后更新新帐户的信息。但是，单击表中的帐户不再导致其字段显示在表单中。

要添加帐户，我会在 PHP 页面上发布一个帖子，然后将该页面创建的 HTML 加载到包含该表的 div 中。到目前为止，一切都很好。

```
 $("button#new").click (function (){
     company = $("input#newaccount").val();

     $.post ('db_addaccount.php',
     {'company':company},showaccounts)
      return;
  }) 

  function showaccounts(data){
     $('div#table').html(data)
  } 
```

但是，我知道这个新加载的 HTML 破坏了 DOM，我不能再期望单击表中的一行并在我的表单中反映字段。

我知道 .on 功能，但无法弄清楚在这种特殊情况下是否/如何使用它。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:45:40.107

希望您为多个元素使用类，例如每个帐户，而不是相同的 ID 等。您需要`on()`用作委托事件处理程序，在下面的示例`tableID`中将是您的表的 ID（这不是动态的？）并且`.accounts`将是每个帐户（使用 $.post 函数动态插入）：

```
$('#tableID').on('click', '.accounts', function() {
    //do stuff
}); 
```

# python - python中的字符串解码方法错误

> ID：13757045
> 
> 赞同：1
> 
> 时间：2012-12-07T04:43:27.813
> 
> 标签：python, mysql, unicode, python-2.7, mysql-python

我有这样的功能：

```
def convert_to_unicode(data):
    row = {}
    if data == None:
        return data
    try:
        for key, val in data.items():
            if isinstance(val, str):
                row[key] = unicode(val.decode('utf8'))
            else:
                row[key] = val
        return row
    except Exception, ex:
        log.debug(ex) 
```

我`MySQLdb.cursors.DictCursor`逐行提供一个结果集（使用）以将所有字符串值转换为 unicode（示例`{'column_1':'XXX'}`变为`{'column_1':u'XXX'}`）。

问题是其中一行具有类似的值`{'column_1':'Gabriel García Márquez'}` 并且它没有被转换。它抛出这个错误：

```
'utf8' codec can't decode byte 0xed in position 12: invalid continuation byte 
```

当我搜索这个时，这似乎与 ascii 编码有关。

我尝试的解决方案是：

1.  在我的文件开头添加`# -*- coding: utf-8 -*-`......没有帮助

2.  按预期将行更改`row[key] = unicode(val.decode('utf8'))`为`row[key] = unicode(val.decode('utf8', 'ignore'))`... 它会忽略非 ascii 字符并返回`{'column_1':u'Gabriel Garca Mrquez'}`

3.  将行更改`row[key] = unicode(val.decode('utf8'))`为`row[key] = unicode(val.decode('latin-1'))`...可以完成工作，但恐怕它将仅支持西欧字符（根据[此处](http://docs.python.org/2/library/codecs.html#standard-encodings)）

谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T10:31:41.160

首先：

*   您在结果集中获得的数据已明确`latin-1`编码，否则您不会观察到这种行为。尝试解码 - 编码的字节字符串就像它是- 编码的一样在你的脸上炸毁是*完全正确的。*一旦你有一个-encoded byte string ，如果你想将它转换为 unicode 类型，是正确的做法。`latin-1``utf-8``latin-1``foo``foo.decode('latin1')`

*   我注意到`unicode(val.decode('utf8'))`您代码中的表达式。这等同于`val.decode('utf8')`; 调用`.decode`字节字符串的方法会将其转换为 unicode，因此您调用`unicode()`的是 unicode 字符串，它只返回 unicode 字符串。

第二：

*   你真正的问题 - 如果你希望能够处理不包含在编码支持的字符集中的字符`latin-1`- 不是 Python 的字符串类型本身，而是 MySQLdb 库。我不详细了解这个问题，但据我了解，在 MySQL 的古代版本中，MySQL 数据库使用的默认编码是`latin-1`，但现在是`utf-8`（并且已经很多年了）。然而，MySQLdb 库仍然默认建立`latin-1`与数据库的编码连接。确实有几十个与 MySQL、Python 和字符串编码相关的 StackOverflow 问题，虽然我并不完全理解它们，但似乎对人们有用的所有此类问题的一种易于使用的解决方案是： [http://www.dasprids.de/blog/2007/12/17/python-mysqldb-and-utf-8](http://www.dasprids.de/blog/2007/12/17/python-mysqldb-and-utf-8)

我希望我能给你一个关于 MySQLdb 问题的更全面和自信的答案，但我什至从未使用过 MySQL，我不想冒险发布任何不真实的东西。也许有人可以过来提供更多细节。尽管如此，我希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T08:32:45.123

您的第三个解决方案 - 将编码更改为`"latin-1"`- 是正确的。您的输入数据被编码为 Latin-1，因此您必须将其解码为。除非某个地方的某个人做了一些非常愚蠢的事情，否则该输入数据应该不可能包含该编码的无效字符。

# magento - 侧栏中的 Magento 类别和子类别

> ID：13757047
> 
> 赞同：-1
> 
> 时间：2012-12-07T04:43:50.727
> 
> 标签：magento, magento-1.7

我需要在左侧或右侧导航中显示类别和子类别，还需要在 Magento 中显示两个级别的类别。请给我提意见.....

例如：

```
categories
    ----sub1
        ---sub2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:59:57.980

在左侧栏中添加类别导航 -

在您的主题中创建新文件“categorymenu.phtml” - **template\catalog\navigation\categorymenu.phtml**

将以下代码放入其中 -

```
<div class="block block-category">
 <div class="inside-box">
 <div class="block-title block-category-title"><h2><?php echo $this->__('Categories') ?></h2></div>
 <div class="block-category-navigation">
 <ul id="category-nav"> 
 <?php foreach ($this->getStoreCategories() as $_category): ?>  
 <?php if($_category->name!=""):  ?>    
 <li><?php echo $this->drawItem($_category) ?></li> 
 <?php endif?>  
 <?php endforeach ?>    
 </ul>  
 </div> 
 </div> 
</div> 
```

然后在位于主题文件夹中的 catalog.xml 文件中调用它 -

主题\布局\catalog.xml。看起来像 ：

```
<reference name="left">

<block type="catalog/navigation" name="catalog.categorymenu" after="top.search" template="catalog/navigation/categorymenu.phtml"/> <-- this is new block added by us -->

 <block type="core/template" name="left.permanent.callout" template="callouts/left_col.phtml">

...
...
</reference> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:45:54.660

转到布局 xml 文件夹...

> /app/design/frontend/default/default/layout/catalog.xml

打开 catalog.xml 并粘贴它...

```
 <reference name="left">
            <block type="catalog/navigation" name="catalog.leftnav" template="catalog/navigation/left_nav.phtml" />
</reference> 
```

进一步修改了.phtml文件..

```
<?php
$obj = new Mage_Catalog_Block_Navigation();
$store_cats = $obj->getStoreCategories();
$current_cat    = $obj->getCurrentCategory();
$current_cat    = (is_object($current_cat) ? $current_cat->getName() : '');

foreach ($store_cats as $cat) {
    if ($cat->getName() == $current_cat) {
        echo '<li class="current"><a href="'.$this->getCategoryUrl($cat).'">'.$cat->getName()."</a>\n<ul>\n";
        foreach ($obj->getCurrentChildCategories() as $subcat) {
            echo '<li><a href="'.$this->getCategoryUrl($subcat).'">'.$subcat->getName()."</a></li>\n";
        }
        echo "</ul>\n</li>\n";
    } else {
        echo '<li><a href="'.$this->getCategoryUrl($cat).'">'.$cat->getName()."</a></li>\n";
    }
}
?> 
```

现在刷新缓存和重新索引过程......

# javascript - 如何在jQuery中显示所有子节点

> ID：13757051
> 
> 赞同：6
> 
> 时间：2012-12-07T04:44:07.317
> 
> 标签：javascript, jquery

```
<a href="javascript:(void);" id="lnkP">show all children</a>
<a href="javascript:(void);" id="lnkC1">hide child 1</a>
<a href="javascript:(void);" id="lnkC2">hide child 2</a>

<div id="p" style="display:none;">
<div id="c1">child 1</div>
<div id="c2">child 1</div>...
</div>​

$("#lnkP").click(function(){
    $("#p").children().show(); //seems there's a problem here...
});
$("#lnkC1").click(function(){
   $("#c1").hide(); 
});
$("#lnkC2").click(function(){
   $("#c2").hide(); 
});​ 
```

jsFiddle：http: [//jsfiddle.net/CBGsF/1/](http://jsfiddle.net/CBGsF/1/)

我想做的是：

1.  `p`是一个父容器
2.  点击`show all children`链接，显示 下**所有子div**`p`
3.  单击`lnkC1`或`lnkC2`隐藏单个子 div

但似乎我没有`.children()`正常工作。那么如何解决呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T04:50:05.053

由于父母（`#p`在你的情况下）有 a `display:none`，它的孩子将不可见。

你需要先给父母看，

```
$("#p")
.show()
.children().show(); 
```

（jQuery的链接，非常有帮助）

请尝试摆脱内联样式（一段时间后变得无法管理），尽可能使用类。

你可以在css中上课，

```
.displayNone
{
    display: none;
} 
.displayBlock
{
   display: block;
} 
```

然后使用 jquery 方法`.removeClass()`，`.addClass()`或`.toggleClass()`显示/隐藏您的元素。

这只是一个建议:)

测试链接：http: [//jsfiddle.net/CBGsF/8/](http://jsfiddle.net/CBGsF/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:48:17.450

`#p`您还需要显示

更新小提琴：http: [//jsfiddle.net/CBGsF/7/](http://jsfiddle.net/CBGsF/7/)

```
$("#lnkP").click(function(){
    $("#p").show().children().show(); //Add show() before children.show call
});
$("#lnkC1").click(function(){
   $("#c1").hide(); 
});
$("#lnkC2").click(function(){
   $("#c2").hide(); 
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T04:47:33.017

更新小提琴：http: [//jsfiddle.net/CBGsF/5/](http://jsfiddle.net/CBGsF/5/)

```
$("#lnkP").click(function(){
$("#p").show();
$("#p").children().show();
});
  $("#lnkC1").click(function(){
   $("#c1").hide(); 
});
$("#lnkC2").click(function(){
   $("#c2").hide(); 
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T04:47:34.123

父元素设置为 "display":"None" 就是这个问题

```
$("#p").css("display","block"); //is required in show all anchor click 
```

检查小提琴

[http://jsfiddle.net/CBGsF/6/](http://jsfiddle.net/CBGsF/6/)

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-13T18:06:29.567

*（代表问题作者发布解决方案）*。

我想`.children()`也会搜索不可见的节点。好吧，我错了。

# java - 计算 XML 文件转换所用的时间

> ID：13757056
> 
> 赞同：0
> 
> 时间：2012-12-07T04:45:28.387
> 
> 标签：java, xml, parsing

我正在为 XML 文件转换器创建一个工具。XML 文件的架构正在更改，该工具将采用格式 A 的 xml 文件并将其转换为格式 B。（架构结构发生了巨大变化）。

有什么方法可以计算文件转换所需的时间吗？有没有标准的方法/公式？（取决于文件的大小等）

（文件大小最高可达 4GB）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:55:28.143

您可以做的是在转换代码开始时以毫秒为单位存储系统时间

并在转换代码完成时再次以毫秒为单位获取系统时间并减去它们以获得转换所花费的时间（以毫秒为单位）

```
public void yourConversionMethod(){
      //start of method
      long start = System.currentTimeMillis();
      ....
      ....
      //your conversion code
      ...
      ...
      //end of method
      long end = System.currentTimeMillis();

      long conversionTime = end - start;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:03:23.067

确定几个尺寸等级，例如。

*   <100M
*   <1G
*   <4G

为每个大小类解析几个随机示例文件，计算每个类的总时间，然后除以文件数量以获得平均值。

现在，将您计算的数字乘以每个类中的文件数量，并将其应用于其余文件。

需要最少的控制并为您提供合理的估计。

通过对文档类型的一些了解，您还可以将它们分组，因为不同的文档结构往往需要不同的时间。

**实时进度**

这是您可以使用的一个非常巧妙的技巧，通过您自己的实现覆盖您将使用的任何读取器类，该实现在记录请求的数量时转发任何读取调用。鉴于您知道文件的大小，您现在有一种显示进度的方式（即百分比或占总数的一部分）。

由于解析通常是 xml 处理这个花费最多的时间，这应该可以很好地说明它的工作速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:25:11.690

首先，确保你的转换是线性的：也就是说，输入的大小加倍，时间长度加倍。（如果它不是线性的，那么处理 4Gb 文件就不容易了）。

然后测量速度：比如 10Mb/sec。您实现的速度在很大程度上取决于转换的性质、编码的效率以及您使用的技术。

然后从文件大小推断。

如果您需要处理高达 4GB 的大小，最大的问题是您需要使用流式转换（不会将整个文件保存在内存中），这 (a) 限制了您对技术的选择（很少有 XSLT 处理器提供流功能，以及那些确实需要花钱的功能），并且（b）使转换变得更加难以编码。

# r - R将复杂搜索存储为字符串

> ID：13757061
> 
> 赞同：0
> 
> 时间：2012-12-07T04:46:00.543
> 
> 标签：r, search

嗨，我正在使用一个大型数据框，我经常需要在不同的变量组合中进行子集化。我希望能够将搜索存储在一个字符串中，这样当我想查看一个子集时就可以引用该字符串。

```
x = read.table(textConnection("
                              cat1 cat2 value
                              A     Z    1
                              A     Y    2
                              A     X    3
                              B     N    2"),header=T,strip.white=T)
search_string="cat1== 'A' & cat2=='Z'"
with(x,subset(x,search)) 
```

不起作用。我要寻找的是类似于下面的搜索结果。

```
with(x,subset(x,cat1=='A' & cat2=='Z')) 
```

如果存在其他解决方案，我不希望一开始就创建多个子集数据框。

有没有一种简单的方法来做我正在尝试的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:51:55.230

您需要将字符串转换为表达式，然后评估此表达式

```
 subset(x, eval(parse(text=search_string)))

  cat1 cat2 value
1    A    Z     1 
```

永远记得

> ```
> fortune(106)
> 
> If the answer is parse() you should usually rethink the question.
>    -- Thomas Lumley
>       R-help (February 2005)
> 
> fortune(181)
> 
> Personally I have never regretted trying not to underestimate my own future stupidity.
>    -- Greg Snow (explaining why eval(parse(...)) is often suboptimal, answering a question triggered by the
>       infamous fortune(106))
>       R-help (January 2007) 
> ```

并注意在这种情况下，进入 eval(parse(text==))) 的输入要多得多

您也可以尝试使用`quote`来保存`call`

```
search <- quote(cat1== 'A' & cat2=='Z') 
```

然后就用

```
 subset(x, eval(search)) 
```

* * *

同样重要的是要记住它`subset`具有非标准评估，因此使用起来可能更安全``[``

```
x[eval(search,x),] 
```

或者

```
 x[eval(parse(text=search_string)), x),] 
```

# javascript - ajax重新加载链接图像

> ID：13757062
> 
> 赞同：0
> 
> 时间：2012-12-07T04:46:23.787
> 
> 标签：javascript, ajax, jquery-ui, firefox

```
function display_hist()
{   
    document.getElementById("display_area").innerHTML=''; 
    document.getElementById("display_area").innerHTML='<img id="hist" src="hist.jpg" width=480 height=480>';

} 
```

我有一个 ajax 函数，它在被其他代码调用时尝试重新加载具有相同 URL 的图像。但是，我一直在获取缓存的图像。如何强制浏览器重新加载图像？或者如何完全关闭firefox中的缓存功能（谁认为他通过缓存内容如此聪明，我受够了！我不需要任何缓存！！），那也很好。

# facebook - 获取最近的页面提要？Facebook 图形 API / FQL

> ID：13757063
> 
> 赞同：1
> 
> 时间：2012-12-07T04:46:27.793
> 
> 标签：facebook, facebook-graph-api, facebook-fql

有没有办法从 Graph Api 或 FQL 获取最近的页面提要？

例如：登录后，提要会显示在此 URL 上 - [https://www.facebook.com/pages/feed](https://www.facebook.com/pages/feed)

非常感谢，

雷诺琼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:37:00.337

经过一番研究，我发现这不太可能，可以获取提要，然后根据 type=page 对其进行过滤，然后相应地使用它或单独访问 {pageid}/feed 以获取单个提要页。希望它可以帮助别人。

问候，

雷诺琼斯

# burrows-wheeler-transform - 用于大弦的 Burrow Wheeler 实现

> ID：13757067
> 
> 赞同：1
> 
> 时间：2012-12-07T04:46:39.497
> 
> 标签：burrows-wheeler-transform

我尝试在 burrow Wheelers 循环字符串数组中旋转一个非常大的字符串。

但是我的输入大约是 200000 个字符，当输入这么大时，我无法运行代码，因为它用完了堆空间。

我的教授说实现它的唯一方法是线性内存占用。我不知道这意味着什么。

我能知道还有什么其他方法可以创建一个内存高效的循环字符串并在不耗尽内存的情况下使用它吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-01T12:49:19.217

减少内存使用的技巧是创建一个循环后缀数组，它可以使用快速排序的变体`n lg n`在平均情况下按比例完成（并且内存与 成比例`n`），它单独考虑字符串中的每个字符（又名 3 路字符串快速排序；它在概念上类似于基数排序）。

即使这需要太多内存，您也需要限制 burrows-wheeler 变换以对固定大小的块进行操作（对 X 个字符执行编码，然后是下一个 X 个字符，等等，直到您对整个字符串进行编码，反转解码过程）。

# photoshop - 如何将多个 psd 文件打开到单个烟花文件？

> ID：13757068
> 
> 赞同：0
> 
> 时间：2012-12-07T04:46:56.750
> 
> 标签：photoshop, fireworks

当我尝试将多个 psd 文件拖到 FireWorks 时，它会将每个 psd 文件作为单独的文档打开。我想在单个 FireWords 文档中打开多个 psd 文件，但页面不同。

或者至少将多个 FireWorks 文件合并到一个 FireWorks 文档中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T08:02:47.417

尝试将 PSD 文件拖到打开的文档顶部（在画布上）。它在 Fireworks CS5 中完美运行，我可以将任意数量的 PSD 文件导入到单个 Fireworks 文档中。不过，不确定旧版本。

# extjs4 - ExtJS 4.1：FocusManager.enable 导致网格列通过菜单隐藏以更改位置哈希

> ID：13757069
> 
> 赞同：1
> 
> 时间：2012-12-07T04:46:58.170
> 
> 标签：extjs4, extjs4.1

如果启用了 FocusManager，则通过菜单标题隐藏网格列会导致位置哈希发生变化。如果未启用 FocusManager，则不会发生这种情况。我尝试覆盖 Ext.menu.Item onClick 以停止事件，但这不起作用，因为看起来浏览器单击事件无法访问，因为 EventManager 正在包装侦听器并将其替换为 EventObject 焦点事件。

这是示例代码（也在[http://jsfiddle.net/jacobg/8X3qw/](http://jsfiddle.net/jacobg/8X3qw/)）。您可以查看位置哈希更改的控制台日志，并尝试将 FocusManager.enable 注释掉和取消注释：

```
window.onhashchange = function () {
    console.log('hash changed to: ' + location.hash);            
};

Ext.define('Company', {
    extend: 'Ext.data.Model',
    fields: [
       {name: 'company'},
       {name: 'price',      type: 'float', convert: null,     defaultValue: undefined},
       {name: 'change',     type: 'float', convert: null,     defaultValue: undefined},
       {name: 'pctChange',  type: 'float', convert: null,     defaultValue: undefined},
       {name: 'lastChange', type: 'date',  dateFormat: 'n/j h:ia', defaultValue: undefined}
    ],
    idProperty: 'company'
});

Ext.onReady(function() {

    //Ext.FocusManager.enable();

    // sample static data for the store
    var myData = [
        ['3m Co',                               71.72, 0.02,  0.03,  '9/1 12:00am'],
        ['Alcoa Inc',                           29.01, 0.42,  1.47,  '9/1 12:00am'],
        ['Altria Group Inc',                    83.81, 0.28,  0.34,  '9/1 12:00am']
    ];

    // create the data store
    var store = Ext.create('Ext.data.ArrayStore', {
        model: 'Company',
        data: myData
    });

    // create the Grid
    var grid = Ext.create('Ext.grid.Panel', {
        renderTo: Ext.getBody(),
        store: store,
        columns: [
            {
                text     : 'Company',
                flex     : 75,
                sortable : false,
                dataIndex: 'company'
            },
            {
                text     : 'Price',
                width    : 50,
                sortable : true,
                renderer : 'usMoney',
                dataIndex: 'price'
            },
            {
                text     : 'Change',
                width    : 50,
                sortable : true,
                dataIndex: 'change'
            }
        ],
        height: 200,
        width: 400,
        title: 'Array Grid'
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:29:03.207

在这种情况下，哈希确实正在发生变化。`onColumnCheckChange`要绕过这一点，您可以在类上创建方法覆盖`Ext.grid.header.Container`并防止那里的鼠标事件发生默认值。例如，您可以通过在`columns`网格的配置属性中提供标题容器的配置来做到这一点。例子：

```
var grid = Ext.create('Ext.grid.Panel', {
    columns: {
        items: [...],
        onColumnCheckChange: function(checkItem, checked) {
            Ext.grid.header.Container.prototype.
                onColumnCheckChange.apply(this, arguments);
            window.event.preventDefault();
        }
    }
}); 
```

工作样本：http: [//jsfiddle.net/VQN3H/5/](http://jsfiddle.net/VQN3H/5/)

# c# - 无法使用 c# 代理类读取 Web 服务响应中存在的 xml 数据

> ID：13757070
> 
> 赞同：0
> 
> 时间：2012-12-07T04:47:07.453
> 
> 标签：c#, web-services, xml-deserialization, proxy-classes

我需要在 C# 网站应用程序中使用 Web 服务。我使用 wsdl 命令生成了代理类，我可以使用它来调用 Web 服务并获得结果。

问题是我在响应 xml 中有 2 个字段，它们在 cdata 标记中提供数据。这 2 个字段的值作为空字符串返回。我尝试将 XMLText 属性添加到代理中的字段定义中，如下所示。

```
 [XmlText]       
   public string Title {
        get {
            return this.TitleField;
        }
        set {
            this.TitleField = value;
        }
    }

    [XmlText]
    public string Description {
        get {
            return this.descriptionField;
        }
        set {
            this.descriptionField = value;
        }
    } 
```

但是当上述代码更改完成时，我收到以下错误：

异常详细信息：System.InvalidOperationException：无法序列化类型为“WService.XXXXXXXXXX”的对象，因为它具有多个 XmlText 属性。考虑使用带有 XmlTextAttribute 的字符串数组来序列化混合复杂类型。

以下是值在响应中的显示方式：<Title><![CDATA[test title]]></Title> <Description><![CDATA[test description ]]></Description>

这两个元素的数据类型在 XSD 中指定为字符串。请让我知道这个问题需要如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T12:45:33.443

从[如何使用 XmlSerializer 将字符串序列化为 CDATA？](https://stackoverflow.com/questions/1379888/how-do-you-serialize-a-string-as-cdata-using-xmlserializer#answer-13801704)

```
[Serializable]
public class MyClass
{
    public MyClass() { }

    [XmlIgnore]
    public string MyString { get; set; }
    [XmlElement("MyString")]
    public System.Xml.XmlCDataSection MyStringCDATA
    {
        get
        {
            return new System.Xml.XmlDocument().CreateCDataSection(MyString);
        }
        set
        {
            MyString = value.Value;
        }
    }
} 
```

用法：

```
MyClass mc = new MyClass();
mc.MyString = "<test>Hello World</test>";
XmlSerializer serializer = new XmlSerializer(typeof(MyClass));
StringWriter writer = new StringWriter();
serializer.Serialize(writer, mc);
Console.WriteLine(writer.ToString()); 
```

输出：

```
<?xml version="1.0" encoding="utf-16"?>
<MyClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <MyString><![CDATA[<test>Hello World</test>]]></MyString>
</MyClass> 
```

# c# - HTTPHandler 不处理辅助请求

> ID：13757077
> 
> 赞同：1
> 
> 时间：2012-12-07T04:47:44.410
> 
> 标签：c#, http, iis, httphandler

我想通过 httphandler 运行我的个人网站（我在家里有一个 web 服务器和静态 ip。）
最终，我会将数据访问层和域路由器合并到处理程序中，但现在，我只是尝试使用它返回静态网页内容。

我将处理程序映射到所有动词和路径，在 Windows 7 上的 IIS 7 中没有访问限制。

我在进程请求的开头添加了一个小文件日志记录。因为它是处理程序中的第一件事，所以我使用日志记录来告诉我处理程序何时被击中。

目前，处理程序只返回一个我已经编写好的网页。处理程序本身主要是这样的：

```
 using (FileStream fs = new FileStream(Request.PhysicalApplicationPath + "index.htm",
            FileMode.Open))
        {
            fs.CopyTo(Response.OutputStream);
        } 
```

我知道这对除了一个文件之外的任何东西都不起作用。

所以我的问题是：HTML 文件中包含指向某些图像的链接。我希望浏览器会返回服务器以获取这些图像作为新请求。我希望这些请求会失败（因为它们会被映射到 index.htm）。但我希望看到日志记录至少命中两次（并且可能递归命中）。但是，我只看到一个请求。网页出现，图像是“X”。

当我刷新浏览器时，我看到另一个请求通过，但仅针对根页面。该页面是基本的 HTML，我没有 asp.net 应用程序（我也不需要，我喜欢 HTML/CSS/JS）。

除了从浏览器发送的第一个请求之外，我还需要做什么？我认为我完全偏离了标准，因为我首先编写了一个 HTTP 模块，但奇怪的是得到了完全相同的行为。我想我需要指定一些响应标头，但在任何示例中都看不到。

# html - 将默认类应用于所有类型的 *n*

> ID：13757083
> 
> 赞同：1
> 
> 时间：2012-12-07T04:48:33.410
> 
> 标签：html, css

有没有办法`class`默认将 a 应用于元素？例如，假设我想将该类`foo`应用于所有`input`元素：

```
.foo { ... } 
```

我有限的知识使我相信我需要每次都标记一下：

```
<input type='text' class='foo' />
<input type='password' class='foo' />
... 
```

但是，显然我希望我能以某种方式默认将该类应用于`input`CSS 中的所有元素。我期待着您的回答！

## 更新

为了澄清自己，我不想复制已经存在的 CSS，`foo`因为如果我需要更改`foo`. 此外，我将把它应用于不仅仅是所有`input`元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:51:26.183

您可以使用 jQuery 之类的框架轻松地将类添加到元素中：

```
$(document).ready(function() {
    $('input').addClass('foo');
}); 
```

**编辑**：为了解决您的最新更新...

如果您只想在某些条件下“扩展”一个类，您可以为这种情况添加第二个类......例如：

```
<input class="foo bar" />

<style type="text/css">
    .foo.bar {
        color: #123;
    }
</style> 
```

这只会应用同时是`.foo`and的元素`.bar`，并且不会影响全局`.foo`样式，它仍将应用于所有`.foo`元素（包括这些元素）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:54:16.783

如果您的意思是您想要获取`.foo`规则中的所有样式并将它们也应用到`input`s，只需选择它们：

```
.foo, input { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T04:53:57.073

你可以使用javascript的`document.getElementsByTagName(tag);`功能。

例子：

```
var tags = document.getElementsByTagName("input");
for(i = 0;i<tags.length;i++){
    tags[i].className = "foo";
} 
```

如果您想保留当前的课程，请确保执行`if(tags[i].className != ""){tags[i].className = tags[i].className + " foo";}`. 它将继承当前的课程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T04:56:09.593

您可以尝试查看样式表预处理器，如[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)。这些将允许您在这里和那里使用变量和其他技巧来帮助您避免重复 CSS。如果您想在将其提供给用户之前对其进行处理，则可以使用这些以及服务器端的 Javascript 实现。

当然，CSS 最终还是会出现重复的代码，但您不必自己编写相同的东西两次。

例如，在 LESS 中：

```
.foo {
   color: #222222;
   padding: 10px;
}

input {
   .foo;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T04:51:27.330

```
input[type=text]{
  color:#123;
} 
```

这是应用 css 的代码

# python - Pandas 列访问，列名包含空格

> ID：13757090
> 
> 赞同：64
> 
> 时间：2012-12-07T04:49:28.040
> 
> 标签：python, pandas, string, dataframe

如果我导入或创建一个不包含空格的 pandas 列，我可以这样访问它：

```
from pandas import DataFrame

df1 = DataFrame({'key': ['b', 'b', 'a', 'c', 'a', 'a', 'b'],
                 'data1': range(7)})

df1.data1 
```

这将为我返回该系列。但是，如果该列的名称中有空格，则无法通过该方法访问它：

```
from pandas import DataFrame

df2 = DataFrame({'key': ['a','b','d'],
                 'data 2': range(3)})

df2.data 2      # <--- not the droid I'm looking for. 
```

我知道我可以使用 .xs() 访问它：

```
df2.xs('data 2', axis=1) 
```

一定有*别的*办法。我疯狂地用谷歌搜索它，想不出任何其他方法来搜索它。我已经阅读了 SO 上包含“column”、“string”和“pandas”的所有 96 个条目，但找不到以前的答案。这是唯一的方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2015-05-28T18:42:30.483

旧帖子，但可能很有趣：一个想法（这是破坏性的，但如果你想要它快速而肮脏的话就可以完成这项工作）是使用下划线重命名列：

```
df1.columns = [c.replace(' ', '_') for c in df1.columns] 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-12-07T07:36:50.637

我认为默认方法*是*使用括号方法而不是点表示法。

```
import pandas as pd

df1 = pd.DataFrame({
    'key': ['b', 'b', 'a', 'c', 'a', 'a', 'b'],
    'dat a1': range(7)
})

df1['dat a1'] 
```

其他方法，例如将其作为属性公开，更多的是为了方便。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-05-14T08:45:03.930

如果您想为 pandas 方法（如分配）提供间隔列名称，您可以对输入进行字典化。

```
df.assign(**{'space column': (lambda x: x['space column2'])}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-15T13:27:27.897

虽然在使用字典或 []-selection 时接受的答案适用于列规范，但它并不能推广到需要引用列的其他情况，例如`assign`方法：

```
> df.assign("data 2" = lambda x: x.sum(axis=1)
SyntaxError: keyword can't be an expression 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-11T13:51:29.420

如果要应用过滤，也可以使用包含空格的列名，例如过滤 NULL 值或空字符串：

```
df_package[(df_package['Country_Region Code'].notnull()) | 
(df_package['Country_Region Code'] != u'')] 
```

多亏了[Rutger Kassies 的](https://stackoverflow.com/users/1755432/rutger-kassies) [回答](https://stackoverflow.com/a/13758846/7773582)，我才知道。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-11T18:56:49.743

你可以这样做`df['Column Name']`

# objective-c - 在运行时创建实例变量

> ID：13757096
> 
> 赞同：3
> 
> 时间：2012-12-07T04:49:52.333
> 
> 标签：objective-c, ios

我想在运行时动态创建实例变量，并且我想将这些变量添加到一个类别中。实例变量的数量可能会根据我用于定义它们的配置/属性文件而改变。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T04:56:13.103

使用[*关联引用*](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocAssociativeReferences.html)- 这很棘手，但这是专门为您的用例发明的机制。

这是上面链接中的一个示例：首先，您定义一个引用并将其添加到您的对象中，使用`objc_setAssociatedObject`; 然后您可以通过调用`objc_getAssociatedObject`.

```
static char overviewKey;

NSArray *array = [[NSArray alloc] initWithObjects:@ "One", @"Two", @"Three", nil];
NSString *overview = [[NSString alloc] initWithFormat:@"%@", @"First three numbers"];

objc_setAssociatedObject (
    array,
    &overviewKey,
    overview,
    OBJC_ASSOCIATION_RETAIN
);
[overview release];

NSString *associatedObject = (NSString *) objc_getAssociatedObject (array, &overviewKey);
NSLog(@"associatedObject: %@", associatedObject);

objc_setAssociatedObject (
    array,
    &overviewKey,
    nil,
    OBJC_ASSOCIATION_ASSIGN
);
[array release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:00:13.607

我倾向于只使用一个`NSMutableDictionary`（参见[NSMutableDictionary Class Reference](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)）。因此，您将拥有一个 ivar：

```
NSMutableDictionary *dictionary; 
```

然后你会初始化它：

```
dictionary = [NSMutableDictionary dictionary]; 
```

然后，您可以在代码中动态地将值保存到其中，例如：

```
dictionary[@"name"] = @"Rob";
dictionary[@"age"] = @29;

// etc. 
```

或者，如果您正在读取文件并且不知道键的名称将是什么，您可以通过编程方式执行此操作，例如：

```
NSString *key = ... // your app will read the name of the field from the text file
id value = ...      // your app will read the value of the field from the text file

dictionary[key] = value;  // this saves that value for that key in the dictionary 
```

如果您使用的是旧版本的 Xcode（4.5 之前），则语法为：

```
[dictionary setObject:value forKey:key]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:08:21.090

完全取决于你想要做什么，这个问题很模糊，但如果你想要几个对象或几个整数等等，数组是要走的路。假设您有一个包含 100 个数字的列表。你可以做这样的事情：

```
NSArray * array = [NSArray arrayWithContentsOfFile:filePath];
// filePath is the path to the plist file with all of the numbers stored in it as an array 
```

这会给你一个 NSNumbers 数组，然后你可以把它变成一个整数数组，如果你想要这样的话；

```
int intArray [[array count]];  
for (int i = 0; i < [array count]; i++) {
    intArray[i] = [((NSNumber *)[array objectAtIndex:i]) intValue];
} 
```

每当您想从某个位置获取整数时，假设您想查看第 5 个整数，您可以这样做：

```
int myNewInt = intArray[4];
// intArray[0] is the first position so [4] would be the fifth 
```

只需研究使用 plist 来提取数据，通过解析 plist 在代码中创建自定义对象或变量的数组将非常容易。

# vba - 从 Excel 导出到 Outlook

> ID：13757100
> 
> 赞同：0
> 
> 时间：2012-12-07T04:50:05.770
> 
> 标签：vba, excel, outlook

我的工作簿有 5 个不同的工作表，我需要复制这五个工作表并将其粘贴到 5 个不同的邮件中。最好是 HTML。

以下编写的代码仅将不同的工作表附加到 Outlook。我需要电子邮件正文下方的 HTML。请注意，我在工作表中的范围因工作簿而异，但工作表名称保持不变。

```
 Function BrowseForFolder(Optional OpenAt As Variant) As Variant
'Function purpose: To Browser for a user selected folder.
'If the "OpenAt" path is provided, open the browser at that directory
'NOTE: If invalid, it will open at the Desktop level
'BrowseForFolder was a code originally written by Ron De Bruin, I love this function!

Dim ShellApp As Object

'Create a file browser window at the default folder
Set ShellApp = CreateObject("Shell.Application"). _
BrowseForFolder(0, "Please choose a folder", 0, OpenAt)

'Set the folder to that selected. (On error in case cancelled)
On Error Resume Next
BrowseForFolder = ShellApp.self.Path
On Error GoTo 0

'Destroy the Shell Application
Set ShellApp = Nothing

'Check for invalid or non-entries and send to the Invalid error
'handler if found
'Valid selections can begin L: (where L is a letter) or
'\\ (as in \\servername\sharename. All others are invalid
Select Case Mid(BrowseForFolder, 2, 1)
Case Is = ":"
If Left(BrowseForFolder, 1) = ":" Then GoTo Invalid
Case Is = "\"
If Not Left(BrowseForFolder, 1) = "\" Then GoTo Invalid
Case Else
GoTo Invalid
End Select

Exit Function

Invalid:
'If it was determined that the selection was invalid, set to False
BrowseForFolder = False

End Function

Sub SaveWorksheets()
'saves each worksheet as a separate file in a specific folder.
Dim ThisFolder As String
Dim NameOfFile As String
Dim Period As String
Dim RecipName As String

ThisFolder = BrowseForFolder()

Application.ScreenUpdating = False

Dim ws As Worksheet
Dim wsName As String
For Each ws In ActiveWorkbook.Worksheets
wsName = ws.Name

If wsName <> "Data" Then

Period = ws.Cells(4, 1).Value 'put the row and column numbers of the report date here.
RecipName = ws.Cells(1, 29).Value 'put the row and column numbers of the email address here
NameOfFile = ThisFolder & "\" & "Termination Report " & wsName & " " & Period & ".xlsx"

ws.Select
ws.Copy
ActiveWorkbook.SaveAs Filename:= _
NameOfFile, FileFormat:= _
xlOpenXMLWorkbook, CreateBackup:=False
ActiveWindow.Close
Call EmailWorkbooks(RecipName, NameOfFile)
End If

Next ws
End Sub

Sub EmailWorkbooks(RecipName, NameOfFile)

Dim OutApp As Object
Dim OutMail As Object

Set OutApp = CreateObject("Outlook.Application")
Set OutMail = OutApp.createItem(0)

Msg = "Attached is the xyz report for your review. Please let me know if you have any questions" & vbCrLf & vbCrLf _
& "Thanks," & vbCrLf & vbCrLf _
& "Your Name Here" & vbCrLf _
& "Your Title" & vbCrLf _
& "Your contact info"

Subj = "XYZ Report" & " " & Period

On Error Resume Next
With OutMail
.To = RecipName
'.CC =
.Subject = Subj
.Body = Msg
.Attachments.Add (NameOfFile)
.Save
End With
On Error GoTo 0

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:15:13.950

你可以使用 PublishObjects 集合的 Add 方法，简短的例子：

```
Sub InsertSheetContent()
  Dim onePublishObject As PublishObject
  Dim oneSheet As Worksheet
  Dim scriptingObject As Object
  Dim outlookApplication As Object
  Dim outlookMail As Object
  Dim htmlBody As String
  Dim htmlFile As String
  Dim textStream

  Set scriptingObject = CreateObject("Scripting.FileSystemObject")
  Set outlookApplication = CreateObject("Outlook.Application")

  For Each oneSheet In ThisWorkbook.Worksheets
    htmlFile = ThisWorkbook.Path & "\" & ThisWorkbook.Name & "_" & oneSheet.Name & ".html"
    Set onePublishObject = ThisWorkbook.PublishObjects.Add(SourceType:=xlSourceRange, _
                                                            Filename:=htmlFile, _
                                                            Sheet:=oneSheet.Name, _
                                                            Source:=oneSheet.UsedRange.Address, _
                                                            HtmlType:=xlHtmlStatic, _
                                                            DivID:=oneSheet.Name)
    onePublishObject.Publish Create:=True

    Set textStream = scriptingObject.OpenTextFile(htmlFile)
    htmlBody = textStream.ReadAll

    Set outlookMail = outlookApplication.CreateItem(0)
    With outlookMail
        .htmlBody = htmlBody
        .Display
    End With
  Next oneSheet

End Sub 
```

# c# - 指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，或者无效

> ID：13757102
> 
> 赞同：1
> 
> 时间：2012-12-07T04:50:12.633
> 
> 标签：c#, entity-framework, wix, app-config

我正在编写一个 wpf 应用程序（EF、dot net 4、wix 3.6）。它编译得很好。我可以调试应用程序并且一切正常。我可以运行生成的可执行文件并且一切正常。我尝试将其与成功生成 .msi 文件的 Wix 打包，该文件将可执行文件复制到正确的位置。当我运行 msi-deployed .exe 时，出现上述错误。

我在这里检查了问题：[在配置中找不到指定的命名连接，不打算与 EntityClient 提供程序一起使用，或者无效](https://stackoverflow.com/questions/3491165/the-specified-named-connection-is-either-not-found-in-the-configuration-not-int)，并且在这里：[在配置中找不到指定的命名连接，不打算与 EntityClient 提供程序一起使用，或者无效](https://stackoverflow.com/questions/5450931/the-specified-named-connection-is-either-not-found-in-the-configuration-not-int)。第二个链接不是处理 web.config 的解决方案，我在 Windows 桌面环境中。

第一个解决方案涉及多个项目以及 EF 项目的配置需要在其他项目中复制。就我而言，仅有的两个项目是主应用程序（包括 EF 的东西）和 Wix 安装程序项目。

无论如何，我将它复制`App.config`到了 Wix 项目中，但这并没有什么不同。我在使用 wix 时遇到了很多麻烦，但我认为现在是时候了，但这可能是解决方案的一个指针。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:37:51.297

好的，正如 Gert Arnold 正确指出的那样，配置文件尚未复制到应用程序目录，因此无法找到连接字符串。创建的配置文件名为 MyAppName.exe.config，其中包含在 VS 和其他位（如 EF 配置详细信息）中创建的 App.config 文件中的内容。

（VS2010 安装程序和 Wix 安装程序的设置必须有所不同，因为 .msi 部署以前从未涉及过 .config 文件。）

无论如何，将 .exe.config 文件添加到 Product.wxs 文件作为包含在主要应用程序功能中的组件解决了这个问题。

新人笔记：

*   如果您复制并粘贴组件标签，请记住设置 KeyPath="no"。

*   正在部署的文件的路径相对于 .wxs 文件的位置

# php - 用于创建表单的 joomla 扩展

> ID：13757106
> 
> 赞同：0
> 
> 时间：2012-12-07T04:50:43.523
> 
> 标签：php, forms, html, plugins, joomla2.5

我想要一个动态表单，它能够以任何顺序添加文本字段或任何字段（作为网格，垂直，连续），并且用户（该表单的用户不是开发人员）应该能够添加文本字段的行。请向我推荐一些开源/免费插件。所以指导我如何创建这种类型的插件。我在谷歌搜索它，但找不到任何插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:10:27.760

试试 Fox 联系表。它是 Joomla 的免费表单创建插件。您可以自定义字段并更改顺序和布局。

它在表单的底部添加了一个非常小的“Made By ....”，但可以通过购买的许可证将其删除，尽管这不是必需的，因为它几乎不会被注意到。

您可以找到插件[http://www.fox.ra.it/joomla-extensions/fox-contact-form.html](http://www.fox.ra.it/joomla-extensions/fox-contact-form.html)

如果这对您有帮助，请标记为答案 - 这对我来说是一个很好的插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:41:33.753

试试 Chronoforms。它是高度可定制的插件和模块。查看演示并使用 [http://www.chronoengine.com/component/content/article/1-latest/2083-chronoforms-for-j16-is- out.html](http://www.chronoengine.com/component/content/article/1-latest/2083-chronoforms-for-j16-is-out.html)

# java - 如何在java中获取HttpURLConnection使用的套接字

> ID：13757107
> 
> 赞同：5
> 
> 时间：2012-12-07T04:50:46.927
> 
> 标签：java, sockets, httpconnection

HttpURLConnection 在内部使用一个套接字来发送数据。我知道它现在可以从外面看到，但我想知道是否有任何解决方法可以访问这个套接字（不改变 HttpURLConnection 的实现）？我需要这个 hack 来做一些检测。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T05:39:39.130

套接字由[Socket Factories](http://docs.oracle.com/javase/6/docs/api/javax/net/SocketFactory.html)创建。您可以编写自己的 SocketFactory，委托给原始套接字工厂。在您的 Socket Factory 中，您可以操作套接字。这是我能想到的让你访问套接字的一种方法，但我会提前警告你——它不会很漂亮。

# android - android旋转屏幕时，app自动加载数据

> ID：13757108
> 
> 赞同：2
> 
> 时间：2012-12-07T04:51:05.920
> 
> 标签：android

当我运行应用程序时，我的应用程序将自动加载数据。我的问题是当我的屏幕垂直应用程序将从服务器加载数据时，但是当屏幕旋转水平时，它会再次加载数据。这样做时旋转屏幕应用程序将再次加载数据。你能帮帮我吗？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nhabep); 
    new LoadData().execute();
}

 // Class load data
private class LoadData extends AsyncTask<Void, Void, Void> {
    private ProgressDialog progressDialog;
    private JSONArray jArray;
    private String result = null;
    private InputStream is = null;
    private StringBuilder sb = null;

    @Override
    protected void onPreExecute() {
        this.progressDialog = ProgressDialog.show(Nhabep.this, "",
                " Loading...");
    }

    @Override
    protected void onPostExecute(final Void unused) {
        this.progressDialog.dismiss();
        try {
            if (flag == false)
            {
                Toast.makeText(Nhabep.this, "Không có bàn nào được chọn!!", Toast.LENGTH_SHORT).show();
            }
            else
            {
                //Hiển thị thông tin các món ăn lên listview 
            listview = (ListView) findViewById(R.id.listView1);
            this.progressDialog.dismiss();
            listview.setAdapter(new DataAdapter(Nhabep.this, soban
                    .toArray(new String[soban.size()]), thoigian
                    .toArray(new String[thoigian.size()])));
            listview.setOnItemClickListener(new OnItemClickListener() {

                //xử lý khi chọn các item trên listview 
                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // TODO Auto-generated method stub
                    String soban2 = soban.get(position);
                    String cafesua2 = cafesua.get(position);
                    String cafeda2 = cafeda.get(position);
                    String cafeden2 = cafeden.get(position);
                    String duatuoi2 = duatuoi.get(position);
                    String nuocngot2 = nuocngot.get(position);
                    String cavienchien2 = cavienchien.get(position);
                    String goiga2 = goiga.get(position);
                    String bokho2 = bokho.get(position);
                    String bunbo2 = bunbo.get(position);
                    Intent i = new Intent(Nhabep.this, Show.class);
                    i.putExtra("soban", soban2);
                    i.putExtra("cafesua", cafesua2);
                    i.putExtra("cafeda", cafeda2);
                    i.putExtra("cafeden", cafeden2);
                    i.putExtra("duatuoi", duatuoi2);
                    i.putExtra("nuocngot", nuocngot2);
                    i.putExtra("cavienchien", cavienchien2);
                    i.putExtra("goiga", goiga2);
                    i.putExtra("bokho", bokho2);
                    i.putExtra("bunbo", bunbo2);
                    startActivity(i);
                }
            });
            Toast.makeText(Nhabep.this, "Thông tin bàn được tải thành công!!", Toast.LENGTH_SHORT).show();
            }
        } catch (Exception e) {

            Toast.makeText(getApplicationContext(), e.toString(),
                    Toast.LENGTH_LONG).show();
        }

    }

    //kết nối đến sererver và nhân thông tin trả về từ server 
    @Override
    protected Void doInBackground(Void... params) {
        try {

            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://longvansolution.tk/loadthongtin.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is, "iso-8859-1"), 80);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line = "0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();

            //Kiểm tra thông tin nhận được từ server
            //nếu null sẽ clear các textview 
            //nếu có thông tin thì đọc thông tin theo Json
            if (result.toString().equalsIgnoreCase("null\n"))
            {
                flag = false;
                soban.clear();
                thoigian.clear();
                cafesua.clear();
                cafeda.clear();
                cafeden.clear();
                duatuoi.clear();
                nuocngot.clear();
                cavienchien.clear();
                goiga.clear();
                bokho.clear();
                bunbo.clear();

            } else
            {
                //Lấy thông tin theo Json
                jArray = new JSONArray(result);
                if (jArray != null && jArray.length() > 0)
                {
                    JSONObject json_data = null;
                    soban.clear();
                    thoigian.clear();
                    cafesua.clear();
                    cafeda.clear();
                    cafeden.clear();
                    duatuoi.clear();
                    nuocngot.clear();
                    cavienchien.clear();
                    goiga.clear();
                    bokho.clear();
                    bunbo.clear();
                    for (int i = 0; i < jArray.length(); i++) {
                        json_data = jArray.getJSONObject(i);
                        thoigian1 = json_data.getString("date");
                        soban1 = json_data.getString("ban");
                        cafesua1 = json_data.getString("cafesua");
                        cafeda1 = json_data.getString("cafeda");
                        cafeden1 = json_data.getString("cafeden");
                        duatuoi1 = json_data.getString("duatuoi");
                        nuocngot1 = json_data.getString("nuocngot");
                        cavienchien1 = json_data.getString("cavienchien");
                        goiga1 = json_data.getString("goiga");
                        bokho1 = json_data.getString("bokho");
                        bunbo1 = json_data.getString("bunbo");
                        thoigian.add(thoigian1);
                        soban.add(soban1);
                        cafesua.add(cafesua1);
                        cafeden.add(cafeden1);
                        cafeda.add(cafeda1);
                        duatuoi.add(duatuoi1);
                        nuocngot.add(nuocngot1);
                        cavienchien.add(cavienchien1);
                        goiga.add(goiga1);
                        bokho.add(bokho1);
                        bunbo.add(bunbo1);
                    }
                }
                flag = true;
            }
        } catch (Exception e) {
            // Log.e("log_tag", "Error in http connection" + e.toString());
            Toast.makeText(getApplicationContext(), e.toString(),
                    Toast.LENGTH_LONG).show();
        }

        return null;

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:58:35.970

为了在您的应用程序中处理屏幕旋转，您应该`android:configChanges`在活动标签内添加以下属性：

```
<activity android:name=".Your_Activity"
    android:configChanges="orientation|keyboardHidden" > 
```

并在代码部分覆盖`onConfigurationChanged`以避免再次执行 AsyncTask 如果屏幕是否旋转，您将需要使用布尔标志：

```
public class Your_Activity extends ListActivity {
    public static boolean onrotaion=true; 
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(onrotaion){
        new LoadData().execute();
          }
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
          //Change flag  here 
          onrotaion=false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:11:42.173

您可以根据您的场景 1 执行以下操作 - 如果您不想更改应用程序的方向，即使您更改了设备的方向，那么在清单文件中设置屏幕方向

> 安卓：screenOrientation="人像"

或者

> 安卓：screenOrientation="风景"

2-如果你想用设备的方向改变你的应用程序方向，但不想在改变方向时加载数据，那么在你的活动清单文件中使用

> android:configChanges="方向"

3-如果您想以特定的时间间隔加载数据，将旧的与新的进行比较并执行您的任务，您可以为此使用 Asynk 任务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:04:46.880

将以下代码写入您的 Androidmanifest.xml 文件的 Activity 标记。

```
android:configChanges="orientation|keyboardHidden" 
```

更改后您的活动标签如下所示。

```
<activity android:name=".Main_Activity"
    android:configChanges="orientation|keyboardHidden" > 
```

有关更多信息，请参见下面的链接。

[活动元素](http://developer.android.com/guide/topics/manifest/activity-element.html)

它会解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T04:57:07.723

您可以做的是尝试将数据缓存到磁盘。然后，当您启动任务时，请检查数据的年龄。如果它太旧，那么实际上调用服务器。否则，只需使用缓存的数据。

另外，我建议您使用[加载](https://developer.android.com/guide/components/loaders.html)器而不是 AsyncTask。它们更加可靠，并且通常会使您的应用程序更加稳定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T04:58:30.877

```
 <activity   android:name=".MainActivity"
            android:label="@string/title_activity_main" 
            android:screenOrientation="portrait">
        </activity> 
```

将此设置为您的清单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T04:59:02.303

旋转屏幕确实会导致应用程序关闭并重新打开，这就是您的代码再次运行的原因。您可能需要检查自上次加载数据以来已经过了多长时间，并且只有在需要数据时才再次加载数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-07T05:12:45.580

[看这里](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

> 这将帮助您，并让您想到正确处理事情。[最佳实践]

# javascript - 对于 javascript 中的数组，三等号返回 false。为什么？

> ID：13757109
> 
> 赞同：18
> 
> 时间：2012-12-07T04:51:10.070
> 
> 标签：javascript

我知道这`===`通常被称为身份运算符。被比较的值必须是相同的类型并且值被认为是相等的。那么为什么下面的行返回false？

`Array("asdf") === Array("asdf")`

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-07T04:56:28.127

它们不相等，因为在每个语句中都创建了一个新数组，每个语句都是一个全新的数组对象，内容完全相同。如果您创建两个新对象：

```
var a = {};
var b = {};

a === b // false 
```

当您创建新对象、数组、函数等时，一个全新的对象会被放入内存中。创建一个与另一个对象具有相同内部结构的新对象不会神奇地导致该对象指向一个已经存在的对象。这些对象可能看起来相同，但它们并不指向同一个实例。现在，如果您的陈述是这样的：

```
var arr = ['asdf'];

arr === arr; // true 
```

这显然是真的。`===`是严格相等，而不是身份运算符。当对象通过严格的相等运算符运行时，会检查它们是否指向相同的引用。正如我之前解释的，每次你使用`new Array`或`[]`创建一个全新的对象时，每个对象都是一个新的和不同的引用。因此，除非**它们指向完全相同的数组，否则两个数组或****任何**对象都不可能为真。仅仅因为创建了具有相同内容的两个对象并不意味着它们指向同一个对象，只是两个相同但不同的对象。`===`

 **考虑构造函数：

```
var Car = function (color) {
    this.color = color;
};

var ford = new Car('green');
var chevy = new Car('green');
var toyota = ford;

ford === chevy // false 
```

仅仅因为您使用相同的构造函数并不意味着每次调用它时都会返回相同的对象。相反，每次都会返回一个新对象。仅仅因为两辆车都是绿色的并不意味着它是同一辆车。

```
ford === toyota // true 
```

现在这是正确的，因为两个变量都指向完全相同的`Car`引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T05:01:55.897

首先 === 是严格相等，而不是身份运算符，并且数组，就像对象一样是引用对象，而不是像数字和字符串那样的值对象......

因此，当您比较这两个数组时，您将在内存中创建两个不同的数组。就等于说...

```
var x = { a: 1 }; 
var y = { a: 1 };

x === y; //false 
```

您不能直接比较这样的数组或对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T04:57:48.443

因为如果它不是原始类型（字符串、数字、布尔值），如果它是数组或对象，那么比较运算符将检查它是否完全相同。所以

```
var a = ['as','ds'];
var b = a;
var c = ['as','ds'];
b == a; //will return true; (doesn't matter if it's == or === for non primitive types)
b == c; //will return false; 
```

所以基本上你需要定义自己的方法来比较数组并查看所有元素是否相同。这种函数通常不存在，因为它可能非常昂贵，而且通常还有另一种编写这种东西的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T05:02:14.390

虽然`array1==array2`似乎不起作用（对象身份平等），

最简单的选项，几乎适用于所有情况，`null!==undefined`但它们都被转换为 null 并被视为相等：

```
function arraysEqual(a1,a2) {
    return JSON.stringify(a1)==JSON.stringify(a2);
} 
```**

# ruby-on-rails - 如何在远程机器上用 ruby 连接 postgres

> ID：13757116
> 
> 赞同：0
> 
> 时间：2012-12-07T04:51:36.550
> 
> 标签：ruby-on-rails, postgresql, centos, remote-desktop, remote-access

我在带有 IP 的 CentOS 远程机器上，而我的 postgres 在不同的 IP 上。我想用我的 rails 服务器访问 postgres。我编辑了 database.yml 文件并安装了 gem pg 并在 database.yml 文件中包含了主机 IP。但是我无法运行 rake db:migrate 和 rails 服务器。它显示 PG ERROR 如下。帮我解决这个问题. 我正在尝试从过去 4 天连接到服务器..但我不能...当我运行 db:migrate 它显示以下错误。

```
[root@vdimc04 My_Postgres]# rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:migrate
rake aborted!
fe_sendauth: no password supplied
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `initialize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `new'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `connect'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:326:in `initialize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/migration.rb:662:in `initialize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/migration.rb:570:in `new'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/migration.rb:570:in `up'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/migration.rb:551:in `migrate'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:179:in `block (2 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:227:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:227:in `block in execute'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:222:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:222:in `execute'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:152:in `invoke'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:141:in `invoke_task'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:99:in `block (2 levels) in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:99:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:99:in `block in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:108:in `run_with_threads'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:93:in `top_level'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:71:in `block in run'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/bin/rake:37:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/bin/rake:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:migrate

   **my database.yml file**
development:
  adapter: postgresql
  encoding: unicode
  database: db_pchamara
  pool: 5
  username: db_test_user
  password: password
  host: 192.168.1.101
test:
  adapter: postgresql
  encoding: unicode
  database: db_pchamara_test
  pool: 5
  username: db_test_user
password: password

production:
  adapter: postgresql
  encoding: unicode
  database: db_pchamara_production
  pool: 5
  username: db_test_user
password: password 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:50:50.447

它清楚地在本地机器上寻找 PostgreSQL：

> 服务器是否在本地运行并接受 Unix 域套接字“/tmp/.s.PGSQL.5432”上的连接？

你`database.yml`应该包含这样的东西：

```
development:
  adapter: postgresql
  encoding: unicode
  database: blog_development
  pool: 5
  username: blog
  password: very_Secure12/
  host: 224.13.156.78
  port: 5432 
```

您可以`dbserver.myvompany.com`在该`host`行中使用 IP 或主机名。它不应包含以 . 开头的行`socket`。最后，PostgreSQL 必须接受来自该服务器的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:14:58.847

根据这个错误：

```
fe_sendauth: no password supplied 
```

您需要检查`pg_hba.conf`远程服务器上文件中设置的权限。很可能，您不允许远程连接连接到服务器。它应该看起来像这样，例如：

```
# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD

# "local" is for Unix domain socket connections only
local   all         all                               trust
# IPv4 local connections:
host    all         all         127.0.0.1/32          trust
# IPv6 local connections:
host    all         all         ::1/128               trust
# Remote connections
host    your_db     your_user   (Client IP ADDR)      md5 
```

您可以使用`0.0.0.0/0`，但这将允许来自任何主机的连接。

# php - 为什么这个长轮询不起作用？

> ID：13757121
> 
> 赞同：0
> 
> 时间：2012-12-07T04:52:21.923
> 
> 标签：php, jquery, long-polling

我只收到第一次消息，然后代码停止工作。

我正在学习长轮询（我知道，也会有很多错误和愚蠢）。请帮助。

Jquery 函数在这里。

```
var timestamp = null;

var last_msg_id = 1;
  function chat(id, name) {

$('#chatcom').show('fast');
$.ajax({
    type:"Post",

    url:"load.php",
    data:{
        timestamp:timestamp
    },
  dataType:"json",

    async:true,
    cache:false,
    success:function(data) {

        var json = data;
        $("#chatcom").html(json['msg']);

        last_msg_id = json['last_msg_id_db'];

        timestamp = json["timestamp"];
    },
    error:function(XMLhttprequest, textstatus, errorthrown) {
        alert("error:" + textstatus + "(" + errorthrown + ")");
    }

}); 
```

}

load.php 在这里

```
$filename='data.php';

$lastmodif=isset($_POST['timestamp'])?$_POST['timestamp']:0;
$currentmodif=filemtime($filename);
$last_msg_id=$_POST['last_msg_id'];
$session=new $session;

$sql=mysqli_query($db3->connection,"SELECT * FROM chat_com where id>'$last_msg_id' ORDER by id ASC");

$sql_m=mysqli_query($db3->connection,"SELECT max(id) as maxid  FROM chat_com");
$row_m=mysqli_fetch_array($sql_m);
$last_msg_id_db=$row_m['maxid'];
$final_response=array();
if($last_msg_id_db>$last_msg_id){

    while($row=mysqli_fetch_array($sql)){
        $text=$row['mesg'];
        $fro=$row['fro'];
        $tocomr=$row['tocom'];

        $handle = fopen('data.php', 'a');
        fwrite($handle, $text);
        fclose($handle);

    }
}

while($currentmodif<=$lastmodif){
    usleep(10000);
    clearstatcache();
    $currentmodif=filemtime($filename);
}

$response=array();
$response['msg']=file_get_contents($filename);
$response['last_msg_id_db']=$last_msg_id_db;

$response['timestamp']=$currentmodif;
echo json_encode($response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:30:20.533

你必须再次调用你的函数，所以在最后的成功子句中设置一个超时函数，

```
success: function(data) {
      // your code....
setTimeout('yourfunction()',1000); // in your case it will be chat() function
} 
```

# clojure - 有没有更好的方法来访问 Clojure 中的嵌套映射和向量？

> ID：13757122
> 
> 赞同：2
> 
> 时间：2012-12-07T04:52:25.827
> 
> 标签：clojure, clojure-core.logic

我在 freebase 上从[这里](http://api.freebase.com/api/service/mqlread?query=%7B%22query%22%3A+%5B%7B%0A++%22id%22%3A+++null%2C%0A++%22name%22%3A+null%2C%0A++%22type%22%3A+%22%2Flaw%2Flegal_case%22%2C%0A++%22court%22%3A+%5B%7B%0A++++%22id%22%3A+++++++null%2C%0A++++%22optional%22%3A+true%2C%0A++++%22name%22%3A+++++%5B%5D%0A++%7D%5D%2C%0A++%22subject%22%3A+%5B%7B%0A++++%22id%22%3A+++++++null%2C%0A++++%22optional%22%3A+true%2C%0A++++%22name%22%3A+++++%5B%5D%0A++%7D%5D%2C%0A++%22%2Fcommon%2Ftopic%2Farticle%22%3A+%5B%7B%0A++++%22id%22%3A+++++++++null%2C%0A++++%22optional%22%3A+++true%2C%0A++++%22source_uri%22%3A+%5B%5D%0A++%7D%5D%2C%0A++%22%2Flaw%2Flegal_case%2Fparties%22%3A+%5B%7B%0A++++%22id%22%3A+++++++null%2C%0A++++%22optional%22%3A+true%2C%0A++++%22parties%22%3A++%5B%5D%2C%0A++++%22role%22%3A+%5B%7B%0A++++++%22id%22%3A+%5B%5D%0A++++%7D%5D%0A++%7D%5D%0A%7D%5D%7D)获取了一些 json （小心，你只能请求几次而不使用`&key=your-key`）。

我想将响应转换为类似于此的内容：

```
 ({:case "Roe v. Wade", :plaintiffs ("Norma McCorvey"), :defendants ("Henry Wade"), :court "Supreme Court of the United States", :subjects ("Abortion" "Privacy"), :article "http://wp/en/68493"} ...) 
```

这是我在使用 clojure.data.json/read-string 后想出的代码：

```
 (defn extract-data [case]
      {:case (case "name")
       :plaintiffs (flatten (map #(get % "parties") (filter (fn [p] (some #(= (% "id") "/en/plaintiff") (p "role")))
                                                           (case "/law/legal_case/parties"))))
       :defendants (flatten (map #(get % "parties") (filter (fn [p] (some #(= (% "id") "/en/defendant") (p "role")))
                                                           (case "/law/legal_case/parties"))))
       :court (get-in case ["court" 0 "name"])
       :subjects (map #(% "name") (case "subject"))
       :article (get-in case ["/common/topic/article" 0 "source_uri" 0])})

    (def response (-> query-uri
                       java.net.URL.
                       slurp
                       json/read-str))
    (def case-data (map extract-data (response "result"))) 
```

提取数据似乎过于复杂，有没有更好的方法来做到这一点？这是可以使用 core.logic 的情况吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:38:04.490

您可能会查看不同的查询系统（zip-filters、core.logic、datomic 的集合数据日志等）。或者推出您自己的特别版：

```
(defn select [x path]
  (if-let [[p & ps] (seq path)]
    (if (fn? p)
      (mapcat #(select % ps) (filter p x))
      (recur (get x p) ps))
    x))

(def mapping
  {:case ["name"]
   :plaintiffs ["/law/legal_case/parties"
                #(= (get-in % ["role" 0 "id" 0]) "/en/plaintiff")
                "parties"]
   :defendants ["/law/legal_case/parties"
                #(= (get-in % ["role" 0 "id" 0]) "/en/defendant")
                "parties"]
   :court ["court" 0 "name" 0]
   :subjects ["subject" (constantly true) "name"]
   :article ["/common/topic/article" 0 "source_uri" 0]})

(defn extract-data [x mapping]
  (into {}
    (for [[k path] mapping]
      [k (if (some fn? path) (select x path) (get-in x path))]))) 
```

然后 (map #(extract-data % mapping) results) 应该可以解决问题

```
=> (extract-data (first result) mapping)
{:case "Roe v. Wade", :plaintiffs ("Norma McCorvey"), :defendants ("Henry Wade"), :court "Supreme Court of the United States", :subjects ("Abortion" "Privacy"), :article "http//wp/en/68493"} 
```

这种类型的代码（查询解释器）可能很脆弱，所以一定要有一个测试套件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-05T10:18:48.243

[幽灵](https://github.com/nathanmarz/specter)可以提供帮助。

```
(ns stackoverflow-answer.core
  (:require [com.rpl.specter :refer :all]))

; your example data
(def case {"name" "Roe v. Wade"
           "/law/legal_case/parties" [{"role" [{"id" "/en/plaintiff"}]
                                       "parties" ["Norma McCorvey"]}
                                      {"role" [{"id" "/en/defendant"}]
                                       "parties" ["Henry Wade"]}]
           "court" [{"name" "Supreme Court of the United States"}]
           "subject" [{"name" "Abortion"}
                      {"name" "Privacy"}]
           "/common/topic/article" [{"source_uri" ["http://wp/en/68493"]}]})

(defn specter-extract [case]
  {:case (case "name")
   :plaintiffs (select ["/law/legal_case/parties"
                        ALL
                        (selected? "role" ALL "id" (pred= "/en/plaintiff"))
                        "parties"
                        ALL]
                       case)
   ; etc
   }) 
```

用法：

```
stackoverflow-answers.core=> (specter-extract case)
{:case "Roe v. Wade", :plaintiffs ["Norma McCorvey"]} 
```

# php - MySQL；PHP循环错误

> ID：13757123
> 
> 赞同：0
> 
> 时间：2012-12-07T04:52:38.727
> 
> 标签：php, mysql, loops, while-loop

所以，我试图从 2 个表中提取名字、姓氏和捐赠者类型。基本上，一个人有一个主要的“供体类型”。这意味着如果它们是两种不同的捐赠者类型，那么在捐赠者表中，您将放置排名最高的捐赠者。在 DonorandType 表中放置所有剩余的。因此，如果他们是董事会成员、校友和家长，您会在捐赠者表中看到董事会成员，然后在另一张表中看到校友和家长。

我最终让所有的人都出现在捐助者和类型表中（我只放了 4 个人在那里测试每个人都有不同数量的类型）不断出现。但是，如果我选择 2011 年（上一财年），它们不会重复。但是，在 2012 年（本财年），他们做到了。如果您愿意，我可以展示我所有的代码，而不仅仅是关于 sql 语句和 while 循环的部分。但是，我不认为这是我的日期限制的问题。

我的 sql 语句中也有一些日期限制，但我认为这不会有所作为。它基本上只是检查财政年度，如果他们在那一年没有捐款，它不会显示他们。我已经尝试过使用和不使用 SQL 语句的那部分，它似乎没有任何区别。所以，我相信这部分可以忽略。

**供体表：**

*   捐助者 ID (PK)
*   名
*   姓
*   电子邮件
*   电话
*   捐助者类型 (FK)

**捐助者类型表：**

*   DonorTypeID (PK) -- 这是捐赠者类型的 2 个字母缩写，例如：AL 代表 Alumni
*   DonorType -- 这些是每个捐赠者的名字，总共 8 个
*   等级——基本等级1、2、3等重要

**捐助者类型表：**

*   捐助者 ID (FK)
*   捐助者类型(FK)

**捐款表：**

*   捐款编号 (PK)
*   捐款金额
*   限制
*   描述
*   接收日期
*   捐助者ID(FK)

好的，所以我想从捐赠者表中提取他们的名字和姓氏。然后从 DonorandType 表中提取他们所有的捐赠者类型。

```
// SQL query to interact with info from our database
$sql = mysql_query("
    SELECT donor.FirstName, donor.LastName, donorandtype.DonorType
    FROM donor, donortype, donorandtype, donations
    WHERE donor.DonorID = donorandtype.DonorID
      and donortype.DonorType = donorandtype.DonorType
      and donations.Date_Received BETWEEN '" . $startdate . "' and '" . $enddate . "'
") or die (mysql_error()); 

// Establish the output variable
echo "<table border=\"1\" cellpadding=\"10\" >
        <tr>
    <th id='name'>Donor Name</th>
    <th id'dontype'>Donor Type</th>
  </tr>";
while($row = mysql_fetch_array($sql)){ 

    $first_name = $row["FirstName"];
    $last_name = $row["LastName"];
    $donor_type = $row["DonorType"];

    echo "
    <tr>
    <td> $first_name $last_name </td>
    <td>$donor_type </td>
    </tr>";

}
echo '</table>'; 
```

这部分实际上显示在一个表格中……这需要说吗？我认为从上面的代码中可以清楚地看到，但无论如何。

```
DONOR'S TYPES
Donor Name  Donor Type
Henry Hunt  Alumni
Henry Hunt  Board member
Paul Gates  Past Parent
Winifred Gardner    Parent
....
</trim> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:20:28.340

```
<?php
// SQL query to interact with info from our database
$sqlTpl = 'SELECT `d`.`FirstName`, `d`.`LastName`, `t`.`DonorType`
           FROM
             `donorandtype` AS `j`
             LEFT JOIN `donor` AS `d` ON ( `j`.`DonorID` = `d`.`DonorID` )
             LEFT JOIN `donortype` AS `t` ON ( `j`.`DonorType` = `t`.`DonorTypeID` )
             LEFT JOIN `donations ` AS `m` ON ( `d`.`DonorID` = `m`.`DonorID` )
           WHERE
             `m`.`Date_Received` BETWEEN "%s" AND "%s"
           ORDER BY
             `d`.`DonorID` , `t`.`Rank`';
$sqlStr = sprintf( $sqlTpl ,
            date( 'Y-m-d h:i:s' , strtotime( $startdate ) ) ,
            date( 'Y-m-d h:i:s' , strtotime( $enddate ) ) );
$sqlRes = mysql_query( $sqlStr );

if( !$sqlRes ){
  echo 'SQL Error Occurred:';
  echo 'But I am not going to show the error messages publicly.';
}else{
?>
<table border="1" cellpadding="0">
  <thead>
    <tr>
      <th id="name">Donor Name</th>
      <th id="type">Donor Type</th>
    </tr>
  </thead>
  <tfoot>
    <tr>
      <th colspan="2"><?php echo mysql_num_rows( $sqlRes ); ?> Donors Found</th>
    </tr>
  </tfoot>
  <tbody>
<?php
  if( mysql_num_rows( $sqlRes ) ){
    while( $r = mysql_fetch_array( $sqlRes ) ){
?>
    <tr>
      <td><?php echo $r['FirstName'].' '.$r['LastName']; ?></td>
      <td><?php echo $r['DonorType']; ?></td>
    </tr>
<?php
    }
  }else{
?>
    <tr>
      <td colspan="2">No Records Returned</td>
    </tr>
<?php
  }
?>
  </tbody>
</table>
<?php
}
?> 
```

# asp.net - 在 Visual Studio 2010 中对齐 Gridview

> ID：13757125
> 
> 赞同：3
> 
> 时间：2012-12-07T04:53:01.937
> 
> 标签：asp.net, visual-studio-2010

我知道这真的很基本。我正在 Visual Studio 2010 中创建一个网格。我想居中对齐网格。不是数据，而是网格。它应该出现在页面的中间。谁能告诉我该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T04:58:20.837

使用GridView 的 Horizo [​​ntalAlign](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.horizontalalign.aspx)属性

> 获取或设置页面上 GridView 控件的水平对齐方式。

```
<asp:GridView ID="GridView1" runat="server" HorizontalAlign="Center" >
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T04:58:28.487

为您的 gridview 设置宽度，然后将 margin-left/right 设置为 auto

例子：

```
<style type="text/css">
    .CenteredGrid { width:640px; margin-left:auto; margin-right:auto; }
    </style>

    <asp:GridView ID="GridView1" runat="server" CssClass="CenteredGrid">
     ... Codes ...
    </asp:GridView> 
```

编辑：

这对您页面上的任何控件/元素都适用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T05:00:03.543

制作一个中心对齐的 div 并将您的网格视图放入其中

```
 <div align="center">
    // put your gridview here
    </div> 
```

# azure - Azure Worker Role 在 osFamily="2" (Server 2008R2) 上运行，但在 osFamily="3" (Server 2012) 上失败

> ID：13757127
> 
> 赞同：5
> 
> 时间：2012-12-07T04:53:34.263
> 
> 标签：azure

我们有一个 Azure 辅助角色 - .NET 4.0 - 在 osFamily="2" (Server 2008R2) 上部署到 Azure 时运行良好。但是，当我们使用 osFamily="3" (Server 2012) 进行部署并且**没有其他代码更改**时，worker 角色会不断回收，并在服务器事件日志中出现以下 2 个错误：

> 错误应用程序名称：WaWorkerHost.exe，版本：6.0.6002.18488，时间戳：0x505cf7ca 错误模块名称：KERNELBASE.dll，版本：6.2.9200.16384，时间戳：0x5010ab2d 异常代码：0xe0434352 错误偏移：0x00000000000189cc 错误进程 id：错误进程 id：应用程序启动时间：0x01cdd4318f76d221 错误应用程序路径：E:\base\x64\WaWorkerHost.exe 错误模块路径：D:\Windows\system32\KERNELBASE.dll 报告 ID：cf1810b0-4024-11e2-93ec-00155d4250e3 错误包全名：错误的包相关应用程序 ID：
> 
> 应用程序：WaWorkerHost.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.InvalidOperationException 堆栈：在 Microsoft.WindowsAzure.ServiceRuntime.Implementation.Loader.RoleRuntimeBridge.b__0() 在 System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean ) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System .Object) 在 System.Threading.ThreadHelper.ThreadStart()

有任何想法吗？

更新 ------------------ 发现第三个异常：

> 应用程序：WaWorkerHost.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.Security.Cryptography.CryptographicException 堆栈：在 Microsoft.WindowsAzure.ServiceRuntime.Implementation.Loader.RoleRuntimeBridge.b__0() 在 System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System .Object, Boolean) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading .ContextCallback, System.Object) 在 System.Threading.ThreadHelper.ThreadStart()

我们在 LocalComputer/My 中使用证书来解密连接字符串。证书成功部署到 OsFamily="2" (Server 2008R2)，并将 Worker 角色用户添加到私钥（在 RDP 会话中验证）。但是，对于 OsFamily="3" (Server 2012) - 未部署证书，因此出现加密错误。跟进 Azure 支持……哎呀。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:00:32.053

来自 Azure 支持工程师：

> 经过深入挖掘，发现了不同之处：在OS Family 2中，WaWorkerHost是由Role初始化过程生成的临时账户（带有GUID名称）运行的，该账户有权访问证书私钥；在 OS Family 3 中，WaWorkerHost 由“NETWORK SERVICE”帐户运行，该帐户没有私钥访问权限。
> 
> 我正在联系制作组，我们将深入调查这个问题。我会及时向大家发布。

# php - 从 TIME 函数中删除秒数？

> ID：13757128
> 
> 赞同：0
> 
> 时间：2012-12-07T04:53:50.630
> 
> 标签：php, html, mysql, database

好的，所以有一个数据库，它使用事件列表的时间函数，然后将数据显示为：

```
 echo "<b>Time Frame:";          
    echo "$time_start";  echo "&nbsp;-&nbsp;";    echo "$time_end"; 
```

尽管如果我希望时间为上午 11:00，则将时间显示为 11:00:00。有没有办法让这个时间显示为标准的“11:00”？并且如果在 mysql 数据库中将其输入为军事时间（例如 13:00）以使其显示为下午 1:00？

我已经尝试了很多东西。请帮忙。

[http://pastebin.com/kaTZzGrx](http://pastebin.com/kaTZzGrx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:59:53.967

```
echo date('G:i',strtotime($time_start)); //date('g:i a',strtotime($time_start));
or
$date = date_create($time_start);
echo date_format($date, 'G:i'); // echo date_format($date, 'g:i a');
or
$date = new DateTime($time_start);
echo $date->format('G:i'); // echo $date->format('g:i a'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:57:42.653

尝试使用[**date()**](http://php.net/manual/en/function.date.php)和[**strtotime()**](http://php.net/manual/en/function.strtotime.php)函数。

您可以按如下方式使用它。

```
date('h:i a', strtotime($time)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T04:57:54.810

PHP 的内置 DateTime 类将在这里提供帮助：

```
$time = new \DateTime("1:00:00");
echo $time->format("H:i");

// Output:
// 1:00 
```

更多信息在这里： http: [//php.net/manual/en/datetime.format.php](http://php.net/manual/en/datetime.format.php)

`format()`实际上，您可以在构造函数（创建对象）和方法（打印/显示对象）中定义自己的格式。有关支持的格式的信息在这里： http: [//php.net/manual/en/datetime.createfromformat.php](http://php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-12T11:54:30.997

要删除秒，您可以使用 MYSQL 或 php 方法：

MYSQL：

```
SELECT SUBSTRING(SEC_TO_TIME(seconds), 1, 5); 
```

PHP：

```
$cleantime=substr($time,0,5) 
```

两者都只会保留小时和分钟

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T05:31:56.980

将此用作您的查询..

```
$query = mysql_query("SELECT id,title,date_start,date_end,DATE_FORMAT(date_start, '%l:%i') as time_start, DATE_FORMAT(date_end, '%l:%i') as time_end,location,description,image,hyperlink FROM events3 WHERE date_end >= CURDATE() ORDER BY date_start LIMIT 5;"); 
```

# shell - 在shell中编写插入语句并将其存储在变量中

> ID：13757131
> 
> 赞同：0
> 
> 时间：2012-12-07T04:54:03.407
> 
> 标签：shell, unix

我必须在变量中插入查询，然后使用该变量，但由于选择 *.

我正在做的是：-

```
a=today_39012123
b=`echo "insert into mytable select * from $a"`
echo $b 
```

但在`echo $b`所有别名上都显示。

我在终端上检查了`echo *`打印的内容与 $b 中 * 打印的内容相同。

如何将该查询存储在变量中。

我也试过：- b=`echo "insert into mytable select \* from $a"` 但我得到了输出：- 插入 mytable select * from today_39012123。这不是真的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:06:52.827

尝试

```
a=today_39012123
set -o noglob 
b="insert into mytable select * from $a"
echo $b
set +o noglob 
```

# magento-1.7 - Magento：计费信息中的自定义字段

> ID：13757132
> 
> 赞同：0
> 
> 时间：2012-12-07T04:54:06.053
> 
> 标签：magento-1.7, magento

我正在 Magento 计费和结帐流程中添加自定义字段。至此，我已经成功的在前端添加了。但它不会保存到数据库中，所以我猜这就是错误所在。

我已经创建了一个模块，全部包含 xml 文件和 mysql 文件。

问题是...

当我在 phtml 文件中添加字段时，如下所示

```
<input type="text" id="billing:company" name="billing[company]" value="<?php echo $this->escapeHtml($this->getAddress()->getCompany()) ?>" title="<?php echo $this->__('Company') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('company') ?>" /> 
```

这到底是什么？

```
$this->getAddress()->getCompany() 
```

我将如何为我的自定义字段制作一个？例如，我添加了一个具有能力属性的字段。我应该有类似以下的东西吗？

```
$this->getAddress()->getAbility() 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:17:15.520

看一看 @

[在前端的结帐和客户地址编辑页面的帐单和送货地址中添加自定义字段，并在管理员中添加客户地址详细信息](http://www.magentocommerce.com/wiki/5_-_modules_and_development/how_to_add_custom_field_in_billing_and_shipping_address_in_frontend_and_backend)

# java - Java 矩阵和数字

> ID：13757136
> 
> 赞同：1
> 
> 时间：2012-12-07T04:54:20.600
> 
> 标签：java, numerics

所以我刚开始用 Java 做数值方法；

```
// I have a matrix class that has get, set methods for creating matrices; have used those in the method below.
// The method below computes a Matrix and prints as well returns it.

public Matrix computeA(){

    int nrows = A.getNumRows();
    int ncols = A.getNumCols();

    for(int i = 0; i < nrows; i++){
        double sum = 0.0;
        for (int j = 0; i< ncols; j++){
                         if (i!=j){
             A.setElement(i,j, aijCalc(i,j) );} // aijCalc is numeric method; setElement has parameters (i, j, value)
        }
    A.print();
    return A;
} 
```

现在，这是我不明白的地方：i = j 的对角线，矩阵条目为 1 -（该行中所有 aij 条目的总和（对于 i！=j））。如何在上述方法中对此进行编码？

我当前的输出（没有任何四舍五入看起来像这样）：

0.0 0.026055555555555554 0.0248125 0.050694444444444445 0.058722222222222222 0.030208333333333334

-0.0053750000000000004 0.0 0.00792361111111111 0.01813194444444444 0.0236111111111111 0.009874999999999998

-0.0013854166666666667 -0.005291666666666666 0.0 0.008680555555555556 0.009041666666666667 0.0

0.0 0.009041666666666667 0.008680555555555556 0.0 -0.005291666666666666 -0.0013854166666666667

0.009874999999999998 0.0236111111111111 0.01813194444444444 0.00792361111111111 0.0 -0.0053750000000000004

0.030208333333333334 0.05872222222222222 0.050694444444444445 0.0248125 0.026055555555555554 0.0

（它有 0，其中 i = j）

它应该看起来像这样：

0.810 0.026 0.025 0.051 0.059 0.030

-‐0.005 0.946 0.008 0.018 0.024 0.010

-‐0.001 -‐0.005 0.989 0.009 0.009 0.000

0.000 0.009 0.009 0.989 -‐0.005 -‐0.001

0.010 0.024 0.018 0.008 0.946 -‐0.005

0.030 0.059 0.051 0.025 0.026 0.810

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:56:14.850

那些额外的零实际上是“谎言”。

建议：只需将数字格式化为实际精度（例如四位或五位小数）。

例子：

`System.out.println (String.format ("%11.2f", x);`

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)

PS：

*几乎所有其他语言的浮点“printf”也是如此：包括 C# 和 C++ *。**

# php - 如何在一个声明之外组合此对象“属性列表”？

> ID：13757138
> 
> 赞同：1
> 
> 时间：2012-12-07T04:54:35.927
> 
> 标签：php, email, object

我正在使用 Eoghan 的 PHP Simple Mail 脚本来发送电子邮件。我有一个应用程序，它有两个文件字段，一个是可选的。我需要附上这两个文件，前提是两者都提供。

该对象的格式很奇怪：

```
$send   = $mailer->setTo('eoghan@example.com', 'John Smith')
         ->setSubject('Test Message')
         ->setFrom('no-reply@domain.com', 'Domain.com')
         ->send(); 
```

我不确定如何将其分解为多行。现在，这都是我不理解的面向对象的事情。

我假设它是这样的？

```
$send = $mailer->setTo($_TO_EMAIL, $_TO_NAME)
    ->setSubject($_SUBJECT)
    ->setFrom($_FROM_EMAIL, $_FROM_NAME);

// If true, send the mail
if ($my_var) $send .= $mailer->send(); 
```

编辑：另外，这种行为/语法叫什么，所以我可以学习它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:03:22.917

这是[方法链](http://en.wikipedia.org/wiki/Method_chaining)的一个例子。每个函数调用（除了`send()`返回对`$mailer`对象的引用。它在功能上等同于：

```
$mailer->setTo('john@example.com', 'John Smith');
$mailer->setSubject('Test Message');
$mailer->setFrom('no-reply@domain.com', 'Domain.com');
$send = $mailer->send(); 
```

要回答您的问题，最后一个应该如下所示：

```
if ($my_var) $send = $mailer->send(); 
```

# c# - .Net 文件写入和字符串拆分问题

> ID：13757140
> 
> 赞同：1
> 
> 时间：2012-12-07T04:54:55.777
> 
> 标签：c#, .net

我有一个要求，应该使用给定的字符拆分文件。默认拆分选项是 CRLF、LF 和 CR。

在这些情况下，我分别用 \r\n 和 \n 和 \r 分割线。

我还要求处理任何大小的文件。（处理基本上是将给定的字符串插入到给定位置的文件中）。

为此，我正在读取 1024 字节的文件。

然后我正在应用 string.Split() 方法。Split() 方法提供了忽略空格和无空格的选项。

我必须将这些换行符添加回该行。为此，我正在使用二进制写入器，并且正在将字节数组写入新文件。问题：-

1) 当换行符为 CRLF 且拆分选项为 NONE 时，拆分后的数组中也会添加空格。给出了第二个选项（忽略空格）CRLF 正常工作。

2）位忽略空白选项会产生其他问题，因为我正在逐字节读取文件，所以我不能忽略空白。

3)当换行符不是默认值时（例如'|'，一个空值被添加到结果行。

任何人都可以解决我的问题吗？

这是我写的方法

```
 private static void ProcessOriginalFile(string filePath, string destinationFilePath, int fromPosition, int toPosition, string lineBreakCharacter, string replaceString, long fileSize, bool ignoreHeader, bool ignoreFooter)
    {
        int chunkSize = fileSize < 1024 ? (int)fileSize : 1024;//bytes
        byte[] chunkData = new byte[chunkSize];
        char[] charactersSeparator=new char[1];

        charactersSeparator = CommonOperations.ResolveTheRecordBreak(lineBreakCharacter);           

        int totalLineBreakCharactersLength = 0;
        for (int i = 0; i < charactersSeparator.Length; i++)
        {
            if (charactersSeparator[i] == 0)
                break;
            totalLineBreakCharactersLength = totalLineBreakCharactersLength + BitConverter.GetBytes(charactersSeparator[i]).Length;
        }

            using (BinaryReader fileReader = new  BinaryReader(new FileStream(filePath, FileMode.Open)))
            {
                string lastChunk = string.Empty;
                string chunkcontents = string.Empty;
                IList<byte[]> dataToBeWritten = new List<byte[]>();

                while (fileSize > 0)
                {
                    chunkData = fileReader.ReadBytes(chunkSize);
                    byte[] chunkToBeWritten = new byte[chunkSize];
                    chunkcontents = chunkcontents + System.Text.ASCIIEncoding.UTF8.GetString(chunkData);

                    string[] splittedArray = new string[1];
                        splittedArray = chunkcontents.Split(charactersSeparator, StringSplitOptions.RemoveEmptyEntries);
                        if (ignoreHeader)
                        {
                            splittedArray = splittedArray.Skip(1).ToArray();
                            ignoreHeader = false;
                            if (splittedArray.Count() == 0)
                                continue;
                        }

                    int count = 0;
                    if (splittedArray != null || splittedArray.Count() > 0)
                    {
                        foreach (string str in splittedArray)
                        {
                            ++count;
                            if (count != splittedArray.Length)
                            {
                                string stringToBeEdited = string.Empty;
                                stringToBeEdited = str;
                                if (stringToBeEdited.Length < (toPosition + 1))
                                    throw new Exception("Position exceeds the string length. Line contents are : " + stringToBeEdited + " String length is : " + stringToBeEdited.Length + " To Position is : " + toPosition);
                                //replace the text between from and two positions with the replaced string
                                stringToBeEdited = stringToBeEdited.Remove(fromPosition, toPosition + 1 - fromPosition).Insert(fromPosition, replaceString);

                                //clear the array
                                dataToBeWritten.Clear();
                                AddLineBreakCharacter(lineBreakCharacter, charactersSeparator, totalLineBreakCharactersLength, dataToBeWritten, ref chunkToBeWritten, ref stringToBeEdited);

                                //write data using binary writer
                                WriteBinaryDataToFile(destinationFilePath, dataToBeWritten);
                                totalLinesProcessed++;
                            }
                            else
                            {
                                lastChunk = str;
                                chunkcontents = str;
                            }
                        }
                    }
                    fileSize = fileSize - chunkSize;

                    /*if file size is less than the chunksize*2, then chunk size should be the file size 
                     * and chunkdata array length should be that of the file size*/

                    if (fileSize < (chunkSize * 2))
                    {
                        chunkSize = (int)fileSize;
                        chunkData = new byte[chunkSize];
                    }
                }

                if (!string.IsNullOrEmpty(lastChunk))
                {
                    if (ignoreFooter == false)
                    {
                        if (lastChunk.Length >= toPosition + 1)
                            lastChunk = lastChunk.Remove(fromPosition, toPosition + 1 - fromPosition).Insert(fromPosition, replaceString);
                        else
                            throw new Exception("Position exceeds in the last line of the file. Line contents are : " + lastChunk + " String length is : " + lastChunk.Length + " To Position is : " + toPosition);
                        dataToBeWritten.Clear();
                        byte[] chunkToBeWritten = new byte[chunkSize];
                        AddLineBreakCharacter(lineBreakCharacter, charactersSeparator, totalLineBreakCharactersLength, dataToBeWritten, ref chunkToBeWritten, ref lastChunk);
                        WriteBinaryDataToFile(destinationFilePath, dataToBeWritten);
                        totalLinesProcessed++;
                    }
                }
            }
    }

    private static void WriteBinaryDataToFile(string destinationFilePath, IList<byte[]> chunkToBeWritten)
    {
            using (FileStream fileSream = new FileStream(destinationFilePath, FileMode.Append))
            {
                using (BinaryWriter outfile = new BinaryWriter(fileSream, Encoding.ASCII))
                {
                    foreach (byte[] item in chunkToBeWritten)
                    {
                        outfile.Write(item);
                    }
                }
            }
    }

    private static void AddLineBreakCharacter(string lineBreakCharacter, char[] charactersSeparator, int totalLineBreakCharactersLength, IList<byte[]> dataToBeWritten, ref byte[] chunkToBeWritten, ref string stringToBeEdited)
    {
        switch (lineBreakCharacter)
        {
            case CommonConstants.NEW_LINE:
                stringToBeEdited = stringToBeEdited + CommonConstants.CARRIAGE_RETURN_CHARACTER + CommonConstants.NEW_LINE_CHARACTER;
                chunkToBeWritten = System.Text.Encoding.UTF8.GetBytes(stringToBeEdited);
                //add modified line 
                dataToBeWritten.Add(chunkToBeWritten);
                break;

            case CommonConstants.LINE_FEED:
                stringToBeEdited = stringToBeEdited + CommonConstants.NEW_LINE_CHARACTER;
                chunkToBeWritten = System.Text.Encoding.UTF8.GetBytes(stringToBeEdited);
                //add modified line 
                dataToBeWritten.Add(chunkToBeWritten);

                break;
            case CommonConstants.CARRIAGE_RETURN:
                stringToBeEdited = stringToBeEdited + CommonConstants.CARRIAGE_RETURN_CHARACTER;
                chunkToBeWritten = System.Text.Encoding.UTF8.GetBytes(stringToBeEdited);
                //add modified line 
                dataToBeWritten.Add(chunkToBeWritten);

                break;
            default:
                chunkToBeWritten = System.Text.Encoding.UTF8.GetBytes(stringToBeEdited);
                //add modified line 
                dataToBeWritten.Add(chunkToBeWritten);

                byte[] seperatorCharArray = new byte[totalLineBreakCharactersLength];
                int destinationIndex = 0;
                foreach (char ch in charactersSeparator)
                {
                    if (ch == 0)
                        break;
                    //convert the character to byte array
                    byte[] charArr = BitConverter.GetBytes(ch);

                    //copy character bytes to seperator character array                        
                    Array.Copy(charArr, 0, seperatorCharArray, destinationIndex, charArr.Length);
                }
                //add line break characters array to list
                dataToBeWritten.Add(seperatorCharArray);
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:30:16.220

我已经解决了这个问题。我只是简单地转储了上面的代码并使用 TextReader 逐个字符地读取文件。同时我检查了换行符。我一拿到它，就处理了这条线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:01:21.877

您可以在拆分之前使用`string.Replace`和替换问题符号`""`

# linux - 无法在 shell 脚本中显示选项参数

> ID：13757156
> 
> 赞同：0
> 
> 时间：2012-12-07T04:57:10.120
> 
> 标签：linux, shell

这是我的shell脚本-

```
while getopts ":m" opt; do
  case "$opt" in
    m)
      echo "-m was triggered! $OPTARG was entered" >&2
      ;;
    j)
       echo "-j was triggered! $4 was entered" >&2
       ;;
    k)
       echo "-k was triggered! $6 was entered" >&2
       ;;
   \?)
      echo "Invalid option: -$OPTARG" >&2
      ;;
  esac
done
shift $(($OPTIND - 1)) 
```

当我运行shell脚本时-

```
./test.sh -m hello 
```

我以这种方式得到输出-

```
-m was triggered!  was entered 
```

我哪里错了？请耐心等待，因为我对 shell 脚本完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:03:14.440

它应该是 m: 而不是 :m

```
while getopts "m:" opt; do 
```

# oracle - 如何检查异常块是否可用于主 PLSQL 块或例程

> ID：13757158
> 
> 赞同：0
> 
> 时间：2012-12-07T04:57:18.367
> 
> 标签：oracle, plsql, oracle10g, oracle11g

我正在尝试考虑一个验证器来检查 PL/SQL 块中可用的异常块或主体的任何例程（以粗体突出显示）。

例如：

```
DECLARE
some data
      Procedure xyx IS
      BEGIN
      ....
      EXCEPTION
      ..
      END;  

BEGIN
some data
      BEGIN
      ....
      EXCEPTION
      ..
      END;  
**EXCEPTION**
some data
      BEGIN
      ....
      EXCEPTION
      ..
      END; 
END; 
```

这是一个简单的示例，可以有许多其他场景，但我需要 id 来发现异常块可用于 PL/SQL 代码的主块。

如果您有任何建议，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:07:58.087

如果你使用的是 Unix 机器并且有 GNU awk，你可以试试这个：

```
$ awk '/Procedure/ || p==1{if (/END/)p=0;else p=1;next}/BEGIN/{f++;next}/END/{f--;next}/EXCEPTION/ && f==1{print "Exception present"}' IGNORECASE=1 file.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:31:41.427

您确定**要**在每个程序单元中都有一个异常处理程序吗？

在我看来，最好只处理具有商业意义且经过某种计划的异常，并让**所有其他错误和问题冒泡**到应用程序中。

考虑使用

> 开始异常结束

块，以便计划异常的异常块具有较小的范围。还要避免大型程序单元末尾的大型异常块。

我在野外看到的大多数异常块都会做一些日志记录，要么引发异常，要么完全吞下它，从而破坏堆栈跟踪或问题本身的发生。

如果您认为必须记录技术异常，请使用 dbms_utility.FORMAT_ERROR_STACK 并写一些有用的东西。

# xades4j - 将 XAdES-T 生成分为两个工作

> ID：13757161
> 
> 赞同：0
> 
> 时间：2012-12-07T04:57:42.637
> 
> 标签：xades4j

我想问一下xades4j中是否有办法将XAdES-T生成分为两个工作。

job1：在内部网络中，生成不带时间戳的签名。

job2：连接到 TSA 并为之前生成的签名添加时间戳。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:28:09.940

检查这个[维基页面](https://code.google.com/p/xades4j/wiki/SignatureEnrichment)。

您可以生成 XAdES-BES 并稍后启动验证过程，使用[XadesVerifier](http://xades4j.googlecode.com/svn/release/1.3.0/javadoc/reference/xades4j/verification/XadesVerifier.html)上的重载将表单扩展为 XAdES-T，该重载将[格式扩展器](http://xades4j.googlecode.com/svn/release/1.3.0/javadoc/reference/xades4j/production/XadesSignatureFormatExtender.html)作为参数。

或者您也可以直接使用格式扩展器。

# java - 如果每个条的颜色不同，包含不同的值，如何使用 Achartengine 在条形图中创建空间

> ID：13757166
> 
> 赞同：10
> 
> 时间：2012-12-07T04:58:01.703
> 
> 标签：java, android, bar-chart, achartengine

我在条形图中显示 4 个值，其中每个条的颜色不同。当我显示图表时，每个条都相互重叠。我想`setBarSpacing()`通过放置不同的值来在我尝试过的条之间留出空间，但它仍然不起作用。有没有其他想法。

```
package com.example.barchartview;

import org.achartengine.ChartFactory;
import org.achartengine.GraphicalView;
import org.achartengine.chart.BarChart.Type;
import org.achartengine.model.CategorySeries;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.graphics.Color;
import android.view.View;
import android.widget.LinearLayout;

@SuppressLint("ParserError")
public class MainActivity extends Activity {
    private GraphicalView BarChartView;

    @SuppressLint("ParserError")
    @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        if (BarChartView==null )
        {

        XYMultipleSeriesRenderer renderer = buildBarRenderer();
        setChartSettings(renderer);
        BarChartView  = ChartFactory.getBarChartView(this, getBarDataset(), renderer, Type.DEFAULT);
        LinearLayout playout = (LinearLayout) findViewById(R.id.graph2);
        playout.addView(BarChartView);
        ;

        }
        else
        {
            BarChartView.repaint();
            BarChartView.setVisibility(View.GONE);
        }
    }

    private void setChartSettings(XYMultipleSeriesRenderer renderer)
    {
        renderer.setYTitle("Hits");
        renderer.setXAxisMin(0);
        renderer.setXAxisMax(7);
        renderer.setYAxisMin(0);
        renderer.setYAxisMax(900);
    }
    private XYMultipleSeriesDataset getBarDataset()
    {
        int[] y = {624,430,712,323};
        CategorySeries series1 = new CategorySeries("A");
        CategorySeries series2 = new CategorySeries("B");
        CategorySeries series3 = new CategorySeries("C");
        CategorySeries series4 = new CategorySeries("D");

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

        series1.add(y[0]);
        dataset.addSeries(series1.toXYSeries());

        series2.add(y[1]);
        dataset.addSeries(series2.toXYSeries());

        series3.add(y[2]);
        dataset.addSeries(series3.toXYSeries());

        series4.add(y[3]);
        dataset.addSeries(series4.toXYSeries());

        return dataset;
    }
    protected XYMultipleSeriesRenderer buildBarRenderer() {
        XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();

        double[] range = {0,5,0,5};

        mrenderer.setAxisTitleTextSize(16);
        mrenderer.setChartTitleTextSize(20);
        mrenderer.setLabelsTextSize(15);
        mrenderer.setLegendTextSize(15);
        mrenderer.setBarSpacing(0);
        mrenderer.setXLabels(1);
        mrenderer.addXTextLabel(2.5, "");
        mrenderer.setMargins(new int[] {20, 30, 15, 0});
        mrenderer.setAxesColor(Color.WHITE);
        mrenderer.setChartTitle("");
        mrenderer.setXTitle("");
        mrenderer.setInitialRange(range, 1);

        XYSeriesRenderer renderer1 = new XYSeriesRenderer();
        renderer1.setColor(Color.GREEN);
        XYSeriesRenderer renderer2 = new XYSeriesRenderer();
        renderer2.setColor(Color.RED);
        XYSeriesRenderer renderer3 = new XYSeriesRenderer();
        renderer3.setColor(Color.BLUE);
        XYSeriesRenderer renderer4 = new XYSeriesRenderer();
        renderer4.setColor(Color.CYAN);

        mrenderer.addSeriesRenderer(renderer1);
        mrenderer.addSeriesRenderer(renderer2);
        mrenderer.addSeriesRenderer(renderer3);
        mrenderer.addSeriesRenderer(renderer4);

        return mrenderer;
    }
} 
```

这是我的代码。

这是我的 activity_main.xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainActivity"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout android:id="@+id/graph2"
       android:layout_width="160dip"
        android:layout_height="200dip"
        android:scaleType="fitEnd"
        android:layout_marginTop="40dip"
        android:layout_marginLeft="790dip"/>

  </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:25:20.443

我将您的所有系列更改为`XYSeries`并将它们简单地添加到 中`dataset`，而无需调用额外的方法。

```
XYSeries series1 = new XYSeries("A");
dataset.addSeries(series1); 
```

然后，像这样在常规 XYChart 中添加数据：

```
series1.add(1, value);
series2.add(2, value); 
```

# programming-languages - 语音识别播放音频

> ID：13757174
> 
> 赞同：1
> 
> 时间：2012-12-07T04:58:53.003
> 
> 标签：programming-languages, speech-recognition

很抱歉，如果这已被涵盖，但我不知道如何找到我要查找的内容。我正在寻求建立一个“培训计划”，新员工可以向客户提出问题，客户根据问题做出回应。例如，如果员工询问客户的姓名，他们将用姓名进行回复。如果他们要求提供地址等。我希望音频已经被录制并保存在某个地方，如果您愿意按照员工的话，准备好在“激活”时播放。

1.  除了“语音识别”之外，我还应该使用哪些关键字在互联网或书籍中查找此类过程的帮助/文档，以及：
2.  我应该用什么编程语言来编程？

感谢您的帮助，我准备从广场 1 开始，然后从那里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:13:01.087

试试[cmusphinx](http://cmusphinx.sourceforge.net/)，[阅读他们的 wiki](http://cmusphinx.sourceforge.net/wiki/)，我建议你从头开始阅读他们关于[语音识别概念](http://cmusphinx.sourceforge.net/wiki/tutorialconcepts)的优秀指南。

这只是工具包，它不会为您提供广泛的参考声音或模型目录，这意味着您将合理地只能实现简单的命令，而且工作量很大。

请参阅他们的常见问题解答，专门针对[准确性问题](http://cmusphinx.sourceforge.net/wiki/faq#qwhy_my_accuracy_is_poor)。

**关键词**

“语音识别”没有任何问题，如果您想要别名，请从[Wikipedia](https://en.wikipedia.org/wiki/Speech_recognition)中选择以下选项之一。

> 在计算机科学中，语音识别 (SR) 是将口语翻译成文本。它也被称为“自动语音识别”、“ASR”、“计算机语音识别”、“语音转文本”，或者只是“STT”

# php - 使用服务器一段时间后如何更改列值

> ID：13757178
> 
> 赞同：0
> 
> 时间：2012-12-07T04:59:18.917
> 
> 标签：php, mysql

我有一个应用程序，我们可以进行模拟测试，当用户在数据库中开始考试时，调用的列`testStarted`将设置为**1**，当用户结束测试时，列的值将设置回**0**，我这样做是因为单用户不应同时参加一项以上的测试...

现在，当用户开始测试并且他不会结束它时，数据库中的值将是**1**并且他不能再进行测试了......所以我需要的是当测试时间完成时，值应该设置回**0**这应该发生在服务器而不是本地机器上怎么做？？？？

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:24:41.610

你应该看看 cronjobs。Cronjobs 可以执行在特定时间或定期执行的命令。最好的方法是创建一个 php 脚本，在假设 100 分钟后将列更改回 0。每分钟运行一次的 cronjob 可以验证 100 分钟前已经启动了哪些测试，并将列设置为 0。

您可以在此处找到有关 cronjobs 的更多信息[http://www.adminschoice.com/crontab-quick-reference](http://www.adminschoice.com/crontab-quick-reference)

询问您的托管公司如何为您的服务器设置 cronjobs。

要运行 cronjob，您可以使用

```
* * * * * wget -O /dev/null http://domain.com/link_to_script 
```

或类似的东西

```
* * * * * cd /var/www/html/folder && php cache_website_stats.php > /dev/null 
```

取决于您在服务器上可用的内容

# c++ - 涉及链表和指针的结构

> ID：13757181
> 
> 赞同：1
> 
> 时间：2012-12-07T04:59:29.923
> 
> 标签：c++, data-structures

我已经尝试了三天。我要做的是创建一个足球运动员的链接列表。每个足球运动员都有以下信息。

球员姓名（最多 15 个字符） 球员球衣号码（整数） 球员得分（整数）

我必须定义一个名为 Player 的结构来存储有关足球运动员的信息。除了上述数​​据成员之外，该结构还应该有另一个指针成员，可以指向另一个 Player 类型的结构。要创建链表，请遵循以下算法：

1.  声明头指针和前一个节点指针并将它们设置为 NULL。

2.  动态创建一个 Player 结构，如果这是第一个节点，则使 head 和 previous 指针指向新创建的结构。

3.  要求用户输入玩家信息并将其存储在结构中。将指针成员设置为 NULL。

4.  如果不是第一个节点，则将前一个节点指向的节点的指针成员指向新节点。

5.  询问用户是否要继续。

6.  如果是，如果没有完成链表创建，则转到步骤 2。

创建链接列表后，我的程序应该打印一个表格，列出每个玩家的号码、姓名和得分。程序必须使用函数名 displayPlayer 来打印表格。主程序应该将头节点指针传递给函数。该函数应在适当宽度的字段中以单行显示玩家的信息（使用 setw）。该函数的原型是void displayPlayer(Player *)。

我的程序不应该接受玩家数字或得分的负值。如果用户输入负数，我的程序应该显示适当的消息并要求用户再次输入。

```
#include <iostream>
#include <cctype>
using namespace std;

struct Player
{
    char name[16];
    int jersey;
    int points;

    // declare the required members of the structure here

    Player *next;
};

void displayPlayer(Player *); // prototype of the display function 

int main()
{
    Player *headptr;
    Player *lastptr;
    Player *newnode;
    headptr = NULL;
    lastptr = NULL;

    //declare three pointers of Player type
    //one pointer to point to head node; one to point to previous node
    //and one to point to new node

    do {
        Player info;
        cout << " Enter name then jersey, points ";
        cin >> info.name;
        cin >> info.jersey;
        cin >> info.points;
        newnode->
        //dynamically create a new node of Player type and make the  new node           pointer  point to it 
        //enter data in to the new node (name, jersy no, score)
        //set the next field of new node to NULL
        if ()
        {   
            //make head node and previous node pointers equal to the new node   pointer
        } else {    
            //set the next member of of the previous node eqal to ne node pointer
            //make previous node pointer point to the new new node
        }
    } while(user wants to continue);
    // Call displayPlayer function with headnode pointer
}

void displayPlayer(Player *h) 
{
    while( not end of the list) {
        //display node content
    } // set h to next node
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:32:58.973

好的，让我做笔和纸的布局，但是在电脑上而不是在真正的笔和纸上...

当列表为空时，您的头指针和尾指针都指向 NULL：

```
头---> NULL

尾---> NULL

```

现在让我们在空列表中插入一个节点 A：

```
头 --\ +------+
        }--> | 一个 |
尾 --/ | 下一个 | ---> 空
             +------+

```

head 和 tail 都指向唯一的节点，而 nodes 的 next 指针指向 NULL（意味着它是列表中的最后一个节点）。

如果我们现在在列表末尾插入一个新节点 B，它将如下所示：

```
          +------+
头---> | 一个 |
          | 下一个 | ---------\ +------+
          +------+ }--> | 乙|
                     尾 --/ | 下一个 | ---> 空
                                  +------+

```

现在 head 仍然指向 A，但 tail 指向 B，以及来自 A 的下一个链接。B 中的下一个链接指向 NULL，表示这是列表中的最后一个节点。

如果我们将节点 C 添加到列表的头部，它现在将如下所示：

```
          +------+
头---> | C | +------+
          | 下一个 | ---> | 一个 |
          +--------+ | 下一个 | ---------\ +------+
                        +------+ }--> | 乙|
                                   尾 --/ | 下一个 | ---> 空
                                                +------+

```

添加到head只需要更改head指针指向新节点，将C的next指针指向旧head。

希望这可以帮助您了解链接列表的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:11:44.893

这将需要几次迭代。

您拥有的 Player 结构非常适合作为开始：

```
struct Player
{
  char name[16];
  int jersey;
  int points;

  Player *next;
}; 
```

这涵盖了基础知识。现在这个结构只有数据成员，没有方法；它是一个不能*做*任何事情的数据容器——其他东西在它上面运行。稍后您可能会发现给它提供方法很方便。接下来是什么？

**编辑：**

在中声明指针`main`。同样，您已经拥有它：

```
int main()
{
  Player *headptr;
  Player *lastptr;
  Player *newnode;
  ...
} 
```

这可能不是最方便申报的地方`newnode`。在例程顶部声明所有变量的做法来自于堆栈内存是一种必须小心使用的资源的时代。现在更重要的是拥有易于阅读的代码，因此不应该在需要变量之前声明它们。但我们可以稍后再担心。接下来是什么？

**编辑：**

动态创建一个新的`Player`：

```
new Player; 
```

这会创建一个新玩家——但会立即失去它。当你给气球充气时，你应该抓住绳子：

```
newnode = new Player; 
```

`new`运算符返回一个指向新对象的指针，它是地址。现在我们已经将它保留在 中`newnode`，我们可以用它做一些事情：

```
newnode->jersey = 34;
cout << newnode->jersey << endl; 
```

怎么办？

**编辑：**

```
Now things get dangerous. Character arrays are a pain in the neck, always have been. And getting input by `cin >> ...` is dangerous, and should be avoided in Real Life. But for now we can get away with:

newnode = new Player;
cout << "Enter name, then jersey number, then number of points:" << endl;
cin >> newnode->name >> newnode->jersey >> newnode->points;
cout << newnode->name << " " << newnode->jersey << " scored " << newnode->points << endl; 
```

`Player`请注意，此代码可以作为方法进入结构；如果我们有时间，也许我们稍后会这样做。下一个？

# windows-8 - Webview 中 iframe 中的 YouTube 视频在导航后继续播放

> ID：13757186
> 
> 赞同：0
> 
> 时间：2012-12-07T04:59:53.750
> 
> 标签：windows-8

我不得不在我的一个 Windows 8 xaml 应用程序中嵌入一个 YouTube 视频。我在这样的 webView 中添加了一个[iframe](http://silverspoted.blogspot.com/2012/12/to-embed-youtube-videos-in-windows-8.html)。现在我的问题是，当我离开页面时，YouTube 视频会继续播放。由于导航后当前视图中不存在 WebView 的页面，因此我也无法访问 iframe。一旦我离开页面，有没有办法以某种方式停止视频？

谢谢和问候， 拉姆亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:01:03.107

你想暂停视频（并缓存页面），以便他们可以回到原来的位置吗？

如果不是，那么一个不太优雅（但有效）的选项：

> ```
>  protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
>     {
>         base.OnNavigatingFrom(e);
>         wv.NavigateToString("");
>     } 
> ```

如果您想暂停视频，我相信您应该能够通过在 YouTube IFrame API 中包含一些 JavaScript 以及[OnNavigatingFrom和对](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.page.onnavigatingfrom.aspx)[InvokeScript](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.invokescript.aspx)的调用来实现该目标。

# android - 当listView中有项目时如何使TextView不可见？

> ID：13757188
> 
> 赞同：0
> 
> 时间：2012-12-07T05:00:10.237
> 
> 标签：android, listview, textview

我喜欢在 listView 中没有项目时显示 textView，而当 listView 中有项目时 textView 不会显示。我的问题是即使listView中有项目，textView仍然会在短时间内显示，然后将项目加载到listView中。那么，当listView中有item时，如何让TextView不可见呢？

这是代码：

```
 public void onCreate(Bundle savedInstancesState){
    super.onCreate(savedInstancesState);
    setContentView(R.layout.list_screen);
    user = getIntent().getExtras().getString("user");
    Log.d("dg",user);
    getList();
    lv = (ListView) findViewById(android.R.id.list);
    emptyText = (TextView)findViewById(android.R.id.empty);
    lv.setEmptyView(emptyText);       
}

public void getList(){
    new Thread(){
        public void run(){
            try{
                 httpclient = new DefaultHttpClient();
                 httppost = new HttpPost("http://www.kryptoquest.com/tracker/friendlist.php");
                 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
                 nameValuePairs.add(new BasicNameValuePair("Username", user));
                 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                 response = httpclient.execute(httppost);
                 is = response.getEntity().getContent();
            }catch(Exception e){
                Log.e("log_tag", "Error:"+e.toString());
            }

            //convert response to string
            try{
                    reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                    sb = new StringBuilder();
                    line = null;
                    while ((line = reader.readLine()) != null) {

                            sb.append(line + "\n");

                    }
                    Log.d("test",sb.toString());
                    is.close();

                    result = sb.toString();

                    result = result.substring(0, result.length()-1);                    
                //    Log.d("result",result);
                    friend = new ArrayList<String>(Arrays.asList(result.split("[*]")));   
                  Log.d("size",String.valueOf(friend.size()));
                    runOnUiThread(new Runnable()
                    {
                        public void run(){
                            adapter = new ArrayAdapter<String>(ThirdActivity.this,android.R.layout.simple_list_item_1,friend);
                            setListAdapter(adapter); 
                        }
                    });

            }catch(Exception e){
                    Log.e("log_tag", "Error converting result "+e.toString());
            }
        }
    }.start();
} 
```

list_screen.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >

<ListView android:id="@+id/android:list"
      android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

<TextView   android:id="@+id/android:empty"
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
            android:text="@string/no_friend"
            android:gravity="center_vertical|center_horizontal"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:28:54.840

> 我的问题是即使listView中有项目，textView仍然会在短时间内显示，然后将项目加载到listView中。

不要`setEmptyView()`在 in 中使用`onCreate()`，而是在你的 XML 中添加`android:visibility="gone"`到 TextView 并`setEmptyView()` *在*调用后使用`setAdapter()`。

```
adapter = new ArrayAdapter<String>(ThirdActivity.this,android.R.layout.simple_list_item_1,friend);
setListAdapter(adapter); 
lv.setEmptyView(emptyText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:50:31.363

您可以使用`if`类似的语句来简单地做到这一点

```
if (listView.getSize() > 0){
    textView.setVisibility(View.GONE);
    //or use
    textView.setVisibility(View.INVISIBLE);
} else {
    //your list is empty
    textView.setVisibility(View.VISIBLE);
} 
```

诅咒你需要在添加`adapter`到你的之后调用它`ListView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T15:53:55.213

我在这里回答了一个类似的问题：

[使用 SimpleAdapter 时为列表视图项设置标签](https://stackoverflow.com/questions/12374226/setting-tag-for-listview-item-when-using-simpleadapter/17124755#17124755)

和这里

[使用 SimpleAdapter 更改 ListView 中项目的颜色](https://stackoverflow.com/questions/8212137/change-color-of-an-item-in-listview-with-simpleadapter/17124508#17124508)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-21T00:27:58.587

如果有一个有用方法的列表项，您可以隐藏 textView：AdapterView.setEmptyView (View emptyView)

这是一个例子： ListView listView; 文本视图文本视图；

listView.setEmptyView (textView); 这将在列表中有项目时自动隐藏 textView 并在 listView 为空时显示 textView！

# mysql - SQL如何将多个同名的列连接到一列

> ID：13757192
> 
> 赞同：1
> 
> 时间：2012-12-07T05:00:39.910
> 
> 标签：mysql, sql

有一个超级班

*   帐户{用户，类型}

和子类

*   储蓄{用户，ID，余额，类型，利息，货币_TYPE}
*   time{User,ID,balance,TYPE,interest,curency_TYPE,start_date,due_date,period}
*   前{User,ID,balance,interest,curency_TYPE}

User 和 TYPE 是账户的主键和三个子类的外键 ID 是三个子类的主键

如何制作一列显示所有ID的列表？也和balance和TYPE一样遇到问题

我考虑过`a.ID as saving, b.ID as time`，但它分别显示它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:29:28.707

如果我正确理解您的问题，`UNION ALL`您需要的是：

```
SELECT ID, balance, TYPE FROM saving
UNION ALL
SELECT ID, balance, TYPE FROM time
UNION ALL
SELECT ID, balance, TYPE FROM fore; 
```

# django - 按相关模型子集的最新实例对 django 查询集进行排序

> ID：13757195
> 
> 赞同：3
> 
> 时间：2012-12-07T05:01:29.287
> 
> 标签：django, django-queryset, django-aggregation, django-related-manager

我有一个 Order 模型和 order_event 模型。每个 order_event 都有一个要订购的外键。所以从一个订单实例我可以得到：`myorder.order_event_set`。我想获取所有订单的列表，但我希望它们按最后一个事件的日期排序。像这样的语句可以按最新事件日期排序：

```
queryset = Order.objects.all().annotate(
    latest_event_date=Max('order_event__event_datetime')
    ).order_by('latest_event_date') 
```

但是，我真正需要的是按 A SUBSET OF EVENTS 的最新日期排序的所有订单列表。例如，我的事件被分类为“调度”、“处理”等。所以我应该能够获得按最新调度事件排序的所有订单的列表。此 django 文档（https://docs.djangoproject.com/en/dev/topics/db/aggregation/#filter-and-exclude）显示了我如何使用过滤器获取最新的日程安排事件，但这不包括没有日程安排的订单事件。

我想我可以将过滤后的查询集与一个查询集结合起来，其中包括那些缺少调度事件的订单……但我不太确定如何做到这一点。我看到了与使用 python 列表相关的答案，但是拥有一个适当的 django 查询集会更有用（即，对于带有分页的视图等）

编辑回复：评论/建议

```
class Order(models.Model):
    desc = models.CharField(max_length=30)

class Order_event(models.Model):
    order = models.ForeignKey(Order)
    event_datetime = models.DateTimeField(auto_now_add = True) 
```

另外，我不介意在不止一个声明中这样做。此外，通过 python 而不是 orm 进行排序等是可以的，因为我不使用庞大的数据集。如果可能的话，出于您提到的原因，我宁愿远离 sql​​。组合单独的、排序的查询集似乎很有希望，但我被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:29:30.087

[好的，我认为您可以使用额外的](https://docs.djangoproject.com/en/1.0/ref/models/querysets/#extra-select-none-where-none-params-none-tables-none-order-by-none-select-params-none)方法来实现这一点，但据我所知，不能使用纯数据库无关的 orm。这意味着您必须确保您的 sql 适用于您正在使用的数据库后端，并且要警惕 django 为表名起别名，但这也意味着您可以通过一个查询完成所有操作。

这些方面的东西应该起作用：

```
latest_event_subquery = 'select max(event_datetime) ' \
                        'from appname_order_event ' \
                        'where appname_order_event.category="scheduling" and ' \
                              'appname_order_event.event_id=appname_order.id'
queryset = Order.objects.extra(select={'latest_event_date': latest_event_subquery}).order_by('latest_event_date') 
```

那有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-07T01:12:49.017

格雷格的回答很棒，我用了一段时间。但是，我想访问 latest_event 的其他字段。所以，我最终将 latest_event 存储为 Order 的一个字段：

```
# The latest event
latest_event = db.ForeignKey('whateverapp.Event', editable=False, null=True) 
```

然后我设置了一个信号以在保存时重新计算最新事件：

```
@receiver(post_save, sender=Event)
def visit_calculate_latest(sender, instance, **kwargs):
    """Recalculate latest event"""
    instance.parent.latest_event = instance.parent.get_latest_event() 
```

get_latest_event() 在哪里进行了查询：

```
def get_latest_event(self):
    """Return most recent event or None."""
    try:
        return Event.objects.filter(
            parent=self.id).order_by('-event_date', '-id')[0]
    except IndexError:
        return None 
```

现在我可以按 latest_event__whatever 过滤：

```
 return qs.filter(qobjs).order_by('-latest_event__event_date',
        '-latest_event__pk') 
```

# javascript - 添加谷歌字体api来选择菜单

> ID：13757196
> 
> 赞同：-1
> 
> 时间：2012-12-07T05:01:31.900
> 
> 标签：javascript, html, css, google-font-api

我正在制作一个包含谷歌字体 API 中所有字体的选择框。我已经参考了这个[https://developers.google.com/webfonts/docs/developer_api](https://developers.google.com/webfonts/docs/developer_api)链接以了解有关 API 的更多信息，但直到现在我无法做到。

我正在添加我为此制作的[小提琴](http://jsfiddle.net/vivekdx/pJHnD/2/)。

HTML

```
 <select id="styleFont">
          <option value="0">Myraid Pro</option>
          <option value="1">Sans ref</option>
          <option value="2">Times New Roman</option>
          <option value="3"> Arial</option>
       </select>
 <br>
  <textarea id="custom_text"></textarea> 
```

CSS

```
 #custom_text{ resize: none;}​ 
```

脚本

```
 $("#styleFont").change(function () {
     var id =$('#styleFont option' + ':selected').text();    
    $("#custom_text").css('font-family',id);
    });​ 
```

我的 API 密钥是[https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyB8Ua6XIfe-gqbkE8P3XL4spd0x8Ft7eWo](https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyB8Ua6XIfe-gqbkE8P3XL4spd0x8Ft7eWo)

如何将这些字体链接到小提琴中的选择框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-09-15T16:29:57.103

这是一个老问题，我没有找到任何我想要的东西，所以我开发了自己的选择器：

Github [https://github.com/maPer77/Select2-Google-Fonts](https://github.com/maPer77/Select2-Google-Fonts)

演示：[https ://maper77.github.io/Select2-Google-Fonts/](https://maper77.github.io/Select2-Google-Fonts/)

看到它工作：

```
selectGfont({
		key: 'AIzaSyDlD2NdRw4MDt-jDoTE_Hz3JqNpl154_qo', 
		containerFonte: '#selectGFont', 
		containerVariante: '#selectGFontVariante',
		sort: 'popularity',
		onSelectFonte: 'sGFselecionado'
	});

sGFselecionado = function(fonte, variante, json){
		console.log( 'fonte', fonte );
		console.log( 'variante', variante );
		console.log( 'json', json );
};
```

```
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet">
<link href="https://select2.github.io/select2-bootstrap-theme/css/select2-bootstrap.css" rel="stylesheet">
<link href="https://maper77.github.io/Select2-Google-Fonts/src/selectGfont.min.css" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>	
<script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.28/webfontloader.js"></script>
<script src="https://maper77.github.io/Select2-Google-Fonts/src/selectGfont.min.js"></script>

<div class="row justify-content-center">
	<!-- Fonte GOOGLE -->
	<div class="col-md-12 col-lg-10 col-xl-8">
		<label><span class="selectGFontTotal"></span> Google Fonts</label>
		<div class="input-group input-group-lg">
			<select id='selectGFont' data-default='Play' class="form-control invisible"></select>
			<div class="input-group-append">
				<select id='selectGFontVariante' data-default='regular' class="form-control invisible"></select>
			</div>
		</div>
	</div>
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:02:16.260

只需使用 jquery 获取字体列表，然后将每种字体添加到您的选择中：

```
$.getJSON("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyB8Ua6XIfe-gqbkE8P3XL4spd0x8Ft7eWo", function(fonts){
    for (var i = 0; i < fonts.items.length; i++) {      
     $('#styleFont')
         .append($("<option></option>")
         .attr("value", fonts.items[i].family)
         .text(fonts.items[i].family));
    }    
}); 
```

**编辑：这使用 JSONP**

```
function SetFonts(fonts) { 
    for (var i = 0; i < fonts.items.length; i++) {      
     $('#styleFont')
         .append($("<option></option>")
         .attr("value", fonts.items[i].family)
         .text(fonts.items[i].family));
    }    
}
var script = document.createElement('script');
script.src = 'https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyB8Ua6XIfe-gqbkE8P3XL4spd0x8Ft7eWo&callback=SetFonts';
document.body.appendChild(script); 
```

# android - android 4.1（API 级别 16）中的相机崩溃

> ID：13757198
> 
> 赞同：2
> 
> 时间：2012-12-07T05:01:35.827
> 
> 标签：android, camera, android-4.2-jelly-bean, android-2.3-gingerbread

我的应用程序具有相机功能。它在所有 Android 版本中都可以正常工作，但现在当我在 S3 中测试时它崩溃了。错误指向这一行：

```
Parameters parameters = mCamera.getParameters(); 
```

在：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // Log.e(TAG, "surfaceChanged");
    // XXX stopPreview() will crash if preview is not running
    if (mPreviewRunning) {
        mCamera.stopPreview();
    }

    /**
     * CODE TO RESOLVE CAMERA ORIENTATION PROBLEM START
     */

    Display display = ((WindowManager) getSystemService(WINDOW_SERVICE))
            .getDefaultDisplay();
    int flashStatus = session1.getFlashStatus();
    Parameters parameters = mCamera.getParameters();
    if (flashStatus == 0) {
        btnFlash.setBackgroundResource(R.drawable.flash);
        parameters.setFlashMode(Parameters.FLASH_MODE_AUTO);
        mCamera.setParameters(parameters);
    } else if (flashStatus == 1) {
        btnFlash.setBackgroundResource(R.drawable.flash_on);
        parameters.setFlashMode(Parameters.FLASH_MODE_ON);
        mCamera.setParameters(parameters);
    } else {
        btnFlash.setBackgroundResource(R.drawable.flash_off);
        parameters.setFlashMode(Parameters.FLASH_MODE_OFF);
        mCamera.setParameters(parameters);
    }
    int currentapiVersion = android.os.Build.VERSION.SDK_INT;

    if (currentapiVersion >= android.os.Build.VERSION_CODES.FROYO) {
        // Do something for froyo and above versions
        if (display.getRotation() == Surface.ROTATION_0) {
            // parameters.setPreviewSize(h, w);
            mCamera.setDisplayOrientation(90);
        }
        if (display.getRotation() == Surface.ROTATION_90) {
            // parameters.setPreviewSize(w, h);
        }
        if (display.getRotation() == Surface.ROTATION_180) {
            // parameters.setPreviewSize(h, w);
            mCamera.setDisplayOrientation(-90);
        }
        if (display.getRotation() == Surface.ROTATION_270) {
            // parameters.setPreviewSize(w, h);
            mCamera.setDisplayOrientation(90);
        }
    } else {
        // do something for phones running an SDK before level 9
        if (display.getOrientation() == Surface.ROTATION_0) {
            // parameters.setPreviewSize(h, w);
            mCamera.setDisplayOrientation(90);
        }
        if (display.getOrientation() == Surface.ROTATION_90) {
            mCamera.setDisplayOrientation(90);
            // parameters.setPreviewSize(w, h);
        }
        if (display.getOrientation() == Surface.ROTATION_180) {
            mCamera.setDisplayOrientation(90);
            // parameters.setPreviewSize(h, w);
        }
        if (display.getOrientation() == Surface.ROTATION_270) {
            mCamera.setDisplayOrientation(90);
            // parameters.setPreviewSize(w, h);
            // mCamera.setDisplayOrientation(180);
        }
    }

    mCamera.setParameters(parameters);
    /**
     * CODE TO RESOLVE CAMERA ORIENTATION PROBLEM END
     */
    try {
        mCamera.setPreviewDisplay(mSurfaceHolder);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    if (mPreviewRunning) {
        mCamera.stopPreview();
        mCamera.startPreview();
        mPreviewRunning = true;
    } else {
        mCamera.startPreview();
        mPreviewRunning = true;
    }

}

public void surfaceDestroyed(SurfaceHolder holder) {
    Log.e(TAG, "surfaceDestroyed");
    if (mPreviewRunning) {
        mCamera.stopPreview();
        mPreviewRunning = false;
        mCamera.release();
    }
} 
```

有人可以为此提供解决方案吗？日志如下：

```
?:??: W/?(?): java.lang.NullPointerException
?:??: W/?(?):   at com.stpl.snapshun.camera.CameraActivity.surfaceChanged(CameraActivity.java:313)
?:??: W/?(?):   at android.view.SurfaceView.updateWindow(SurfaceView.java:554)
?:??: W/?(?):   at android.view.SurfaceView.access$000(SurfaceView.java:81)
?:??: W/?(?):   at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
?:??: W/?(?):   at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:671)
?:??: W/?(?):   at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1818)
?:??: W/?(?):   at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
?:??: W/?(?):   at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
?:??: W/?(?):   at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
?:??: W/?(?):   at android.view.Choreographer.doCallbacks(Choreographer.java:555)
?:??: W/?(?):   at android.view.Choreographer.doFrame(Choreographer.java:525)
?:??: W/?(?):   at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
?:??: W/?(?):   at android.os.Handler.handleCallback(Handler.java:615)
?:??: W/?(?):   at android.os.Handler.dispatchMessage(Handler.java:92)
?:??: W/?(?):   at android.os.Looper.loop(Looper.java:137)
?:??: W/?(?):   at android.app.ActivityThread.main(ActivityThread.java:4745)
?:??: W/?(?):   at java.lang.reflect.Method.invokeNative(Native Method)
?:??: W/?(?):   at java.lang.reflect.Method.invoke(Method.java:511)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
?:??: W/?(?):   at dalvik.system.NativeStart.main(Native Method) 
```

我的问题是尝试访问相机参数返回 null。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:08:09.937

林西这是类相机视图的代码

```
 public void surfaceChanged(SurfaceHolder holder, int format, int width,
    int height) 
{   
    if(mPreviewRunning )
    {
        mCamera.stopPreview();
    }

    // Store width and height
    mWidth = width;
    mHeight = height;

    // Set camera parameters
    Camera.Parameters p = mCamera.getParameters();
    mCamera.setParameters(p);

    if(android.os.Build.VERSION.SDK_INT >= 8)
    {   // If API >= 8 -> rotate display...
        mCamera.setDisplayOrientation(90);
    }

    try
    {
        mCamera.setPreviewDisplay(holder);
    } catch(IOException e)
    {
        e.printStackTrace();
    }

    mCamera.startPreview();
    mPreviewRunning = true;

}
 public void surfaceCreated(final SurfaceHolder holder) 
{
    try {
        mCamera = Camera.open();
        mCamera.setPreviewDisplay(holder);
    } catch (IOException e) 
    {
        mCamera.release();
        mCamera = null;
        e.printStackTrace();
    }
}

public void surfaceDestroyed(SurfaceHolder holder) 
{
    if(mCamera != null)
    {
        mCamera.setPreviewCallback(null);
        mCamera.stopPreview();
        mCamera.setPreviewCallback(null);
        mPreviewRunning = false;
        mCamera.release();
        mCamera = null;
    }   
} 
```

还有一件事你实现了你的课程使用

> SurfaceHolder.Callback

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:40:50.100

我在 S3 中的相机活动也遇到了同样的问题，并且得到了修复。它对我很有用。

我不确定 。如果我说得对，您正在使用自己的相机代码使用surfaceview。

所以对于更高的android版本（<honeycomb）更好地启动默认相机。

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
```

特别是对于 S3（捕获的图像大小达到 4 Mb），如果您要上传到网络，最好调整它的大小并上传。因为您再次收到内存警告和崩溃，连续拍摄并上传超过 2-3 张图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:05:28.460

这可能是由于大文件大小尝试重新调整图像大小并检查是否可以调整图像大小试试这个

```
public static Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {

    int width = bm.getWidth();

    int height = bm.getHeight();

    float scaleWidth = ((float) newWidth) / width;

    float scaleHeight = ((float) newHeight) / height;

    // create a matrix for the manipulation

    Matrix matrix = new Matrix();

    // resize the bit map

    matrix.postScale(scaleWidth, scaleHeight);

    // recreate the new Bitmap

    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height,

            matrix, false);

    return resizedBitmap;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T11:08:58.287

抱歉更新晚了。问题是当设备没有自动对焦时。所以你需要先检查设备是否有自动对焦： boolean focus = getPackageManager().hasSystemFeature("android.hardware.camera.autofocus");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T05:27:35.787

德语，看看这是否有助于您理解：-

```
mCamera.autoFocus(myAutoFocusCallback);

/**
     * If camera having autofocus which is calling here
     */
    AutoFocusCallback myAutoFocusCallback = new AutoFocusCallback() {

        @Override
        public void onAutoFocus(boolean start, Camera arg1) {
            if (focus) {
                if (start) {
                    if (mPreviewRunning) {
                        mCamera.takePicture(myShutterCallback, mPicture,
                                mPicture);
                    }
                } else {
                    btnCamera.setEnabled(true);
                    side.setEnabled(true);
                    showToast("Could not get focus. Try again.");
                }
            } else {
                if (mPreviewRunning) {
                    mCamera.takePicture(myShutterCallback, mPicture, mPicture);
                }
            }
        }
    };

ShutterCallback myShutterCallback = new ShutterCallback() {

        @Override
        public void onShutter() {
            showToast("Picture taken!");
        }
    }; 
```

# magento - Magento - 按 store_id 过滤类别资源集合

> ID：13757202
> 
> 赞同：0
> 
> 时间：2012-12-07T05:02:32.117
> 
> 标签：magento

我正在尝试提取仅属于当前商店的类别，但它似乎不起作用。任何人都可以在我的代码中看到任何问题吗？

```
$categoryCollection = Mage::getResourceModel('catalog/category_collection')
  ->setStoreId(Mage::app()->getStore()->getId())
  ->addFieldToFilter('include_in_menu', array('eq' => 1))
  ->addFieldToFilter('is_active', array('eq' => 1))
  ->addFieldToFilter('level', array('eq' => 2))
  ->addAttributeToSelect(array('name','url_path','image','description'))
  ->setOrder('position', 'asc');

$categoryCollection->printLogQuery(true); 
```

这也是从 store_id 0 获取数据，但我只希望从 store_id 2

```
SELECT `e`.*, IF(at_include_in_menu.value_id > 0, at_include_in_menu.value, at_include_in_menu_default.value) AS `include_in_menu`, IF(at_is_active.value_id > 0, at_is_active.value, at_is_active_default.value) AS `is_active` FROM `catalog_category_entity` AS `e`
 INNER JOIN `catalog_category_entity_int` AS `at_include_in_menu_default` ON (`at_include_in_menu_default`.`entity_id` = `e`.`entity_id`) AND (`at_include_in_menu_default`.`attribute_id` = '67') AND `at_include_in_menu_default`.`store_id` = 0
 LEFT JOIN `catalog_category_entity_int` AS `at_include_in_menu` ON (`at_include_in_menu`.`entity_id` = `e`.`entity_id`) AND (`at_include_in_menu`.`attribute_id` = '67') AND (`at_include_in_menu`.`store_id` = 2)
 INNER JOIN `catalog_category_entity_int` AS `at_is_active_default` ON (`at_is_active_default`.`entity_id` = `e`.`entity_id`) AND (`at_is_active_default`.`attribute_id` = '42') AND `at_is_active_default`.`store_id` = 0
 LEFT JOIN `catalog_category_entity_int` AS `at_is_active` ON (`at_is_active`.`entity_id` = `e`.`entity_id`) AND (`at_is_active`.`attribute_id` = '42') AND (`at_is_active`.`store_id` = 2) WHERE (`e`.`entity_type_id` = '3') AND (IF(at_include_in_menu.value_id > 0, at_include_in_menu.value, at_include_in_menu_default.value) = 1) AND (IF(at_is_active.value_id > 0, at_is_active.value, at_is_active_default.value) = 1) AND (`e`.`level` = 2) 
```

**更新**

而不是存储过滤器，我只是添加了解决问题的路径过滤器，但仍然很想知道存储过滤器是否有效。

```
$storeId = Mage::app()->getStore()->getId();
$categoryRootId = Mage::app()->getStore($storeId)->getRootCategoryId();;

$categoryCollection = Mage::getResourceModel('catalog/category_collection')
    ->addFieldToFilter('path', array('like' => "%/{$categoryRootId}/%"))
    ->addFieldToFilter('include_in_menu', array('eq' => 1))
    ->addFieldToFilter('is_active', array('eq' => 1))
    ->addFieldToFilter('level', array('eq' => 2))
    ->addAttributeToSelect(array('name','url_path','image','description','store_id'))
    ->setOrder('position', 'asc')
    ->load(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-04T15:40:26.863

我知道这是一个老问题，但如果有人像我一样寻找答案：

```
->addStoreFilter( {storeID} ) 
```

为我做的...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T22:46:00.183

我花了很多时间……这对我来说是个例子……

```
$store = Mage::app()->getStore()->getId();
$rootCategoryId = Mage::app()->getStore()->getRootCategoryId();

$rootpath = Mage::getModel('catalog/category')
                    ->setStoreId($store)
                    ->load($rootCategoryId)
                    ->getPath();

$categories = Mage::getModel('catalog/category')->setStoreId($store)
                    ->getCollection()
                    ->addAttributeToSelect('*')
                    ->addAttributeToFilter('path', array("like"=>$rootpath."/"."%")); 
```

修复多商店:)

**setStoreId** - 不起作用，可以删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-21T07:41:46.377

**在 Magento 1.9 中**

```
$storeId=2;
    $rootCategoryId = Mage::app()->getStore($storeId)->getRootCategoryId();

                $categories = Mage::getModel('catalog/category')
                    ->getCollection()
                    ->setStoreId($storeId)
                    ->addFieldToFilter('is_active', 1)
                    ->addAttributeToFilter('path', array('like' => "1/{$rootCategoryId}/%"))
                    ->addAttributeToSelect('*');

                    foreach($categories as $categorie)
                    {
                        $catid=$cat->getId();                   
                        $catname=$categorie->getName();
                        $catp=catp$categorie->getParent_id();

                    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-08T10:54:33.807

既不`setStoreId()`也不`addAttributeToFielter('store_id', $storeId)`不工作，因为`store_id`类别表中没有。下面的代码完美运行：

```
$storeId = 21; // your store id
$rootCategoryId = Mage::app()->getStore($storeId)->getRootCategoryId();
$categories = Mage::getModel('catalog/category')->getCollection();
$categories->addAttributeToFilter('path', array('like' => "1/{$rootCategoryId}/%")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T09:58:09.050

尝试这个

```
$categoriesCollection = Mage::getModel('catalog/category')
->getCollection()
->setStoreId(1) 
->addFieldToFilter('include_in_menu', array('eq' => 1))
->addFieldToFilter('level', array('eq' => 2))
->addFieldToFilter('is_active', array('eq'=>'1'))
->setOrder('position', 'asc')
->addAttributeToSelect('*'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T05:28:50.657

您好检查以下代码可能对您有所帮助

```
->addFieldToFilter('store_id', Mage::app()->getStore()->getId()); 
```

或者

```
$storeId =Mage::app()->getStore()->getStoreId();

$collection->setStoreId($storeId);

$collection->addStoreFilter($storeId); 
```

# python - 找到数字并替换它

> ID：13757207
> 
> 赞同：0
> 
> 时间：2012-12-07T05:03:01.903
> 
> 标签：python, regex

我有一个这样的字符串：

```
This changes are related to book:id:pages:3000 location /file1/file2/file3/pages.000.zip
This changes are related to book:id:pages:30ab00e location /file1/file2/file3/pages.000.zip 
```

在这个我想用“my_doc”替换数字或数字（有时数字也是十六进制）我试过：

```
 match = re.findall("[\.0-9]*",text)
print match 
```

但它仅适用于数字或数字，它也应该适用于十六进制数字并将数字替换为“my_doc”并打印整行输出：

```
This changes are related to book:id:pages:my_doc location /file1/file2/file3/pages.my_doc.zip
This changes are related to book:id:pages:my_doc location /file1/file2/file3/pages.my_doc.zip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:10:57.820

你可以尝试这样的事情：

```
In [8]: import re

In [14]: strs="This changes are related to book:id:pages:3000 location /file1/file2/file3/pages.000.zip"

In [15]: re.findall(r"\d+[A-Ea-e]{0,}\d+[A-Ea-e]{0,}",strs)

Out[15]: ['3000', '000']

In [16]: strs1="This changes are related to book:id:pages:30ab00e location /file1/file2/file3/pages.000.zip"

In [17]: re.findall(r"\d+[A-Ea-e]{0,}\d+[A-Ea-e]{0,}",strs1)

Out[17]: ['30ab00e', '000'] 
```

用于`re.sub()`替换：

```
In [68]: strs="This changes are related to book:id:pages:3000 location /file1/file2/file3/pages.000.zip"

In [69]: re.sub(r"(\d+[A-Ea-e]*\d+[A-Ea-e]*)|(\d+)","my_doc",strs)

Out[69]: 'This changes are related to book:id:pages:my_doc location /filemy_doc/filemy_doc/filemy_doc/pages.my_doc.zip'

In [70]: strs1="This changes are related to book:id:pages:30ab00e location /file1/file2/file3/pages.000.zip"

In [71]: re.sub(r"(\d+[A-Ea-e]*\d+[A-Ea-e]*)|(\d+)","my_doc",strs1)
Out[71]: 'This changes are related to book:id:pages:my_doc location /filemy_doc/filemy_doc/filemy_doc/pages.my_doc.zip'

In [72]: foo=" number of pages completed, 2 still pending" 

In [73]: re.sub(r"(\d+[A-Ea-e]*\d+[A-Ea-e]*)|(\d+)","my_doc",foo)
Out[73]: ' number of pages completed, my_doc still pending' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:02:09.813

这太疯狂了（所以你的问题）和hackish！

十六进制字符 (az, AZ) 出现在字符串中的许多地方，因此那些将被替换（认为问题不反对 atm ;)）似乎不是预期的行为。

假设要删除的 blob/部分是十六进制字，并假设它的最小长度为 3，请考虑：

```
import re
from string import hexdigits

str_1 = "This changes are related to book:id:pages:3000 location /file1/file2/file3/pages.000.zip"

str_2 = "This changes are related to book:id:pages:30ab00e location /file1/file2/file3/pages.000.zip"

expression = '[%s]{3,}'%(string.hexdigits)  # = '[' + hexdigits + ']{3,}'
re.sub(exp, 'my_doc', str_1) 
```

*编辑：*好吧，少一点疯狂的正则表达式，使用下面的表达式

```
expression = ':[%s]+\S'%(hexdigits) 
```

这将仅匹配十六进制单词，因此十六进制+数字的长度不再是一个约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:09:34.637

在你的正则表达式中考虑条件：[http ://www.asiteaboutnothing.net/regex/regex-conditionals.html](http://www.asiteaboutnothing.net/regex/regex-conditionals.html)

# java - 瓦片网格问题

> ID：13757209
> 
> 赞同：1
> 
> 时间：2012-12-07T05:03:13.773
> 
> 标签：java, smartgwt

我使用 smartgwt 的 TileGrid。TileGrid 包含 300 条记录。例如，我选择 150 条记录并移至另一页。在这个TileGrid 中放置Canvas，并在模型中放置Canvas。当我回到上一页时，从模型中绘制 Canvas（和 TileGrid）。TileGrid 显示第一行，但如果您使用鼠标滚动，则 TileGrid 定位在之前选择的记录上。如何返回到旧页面立即定位在旧记录上

方法“getCentr(false)”包含抽象方法“getElement()”。方法“getShapka()”、“getPodval()”返回 Vlayout。NewHolst 类是模板视图。

```
public class VakansiSearchLayout extends NewHolst{
private List<ProfessiaBean> profBean = new ArrayList<ProfessiaBean>();
private List<ProfessiaBean> profBeanBufer = new ArrayList<ProfessiaBean>();
private VLayout content;
private TileGrid tileGrid;

public VakansiSearchLayout(MenuItem curentMenuItem, INotifier notifer)
{
    super(curentMenuItem, notifer);
    if (ModelVakansi.INST.getBuffer() == null)
        poluchitProf();
    else
    {
        content = (VLayout) ModelVakansi.INST.getBuffer();
        tileGrid = (TileGrid) content.getMember(0);
    }
    {
        addMember(getShapka());
        addMember(getCentr(false));
        addChild(getPodval());
    }
    if (ModelVakansi.INST.getBuffer() != null)
    {
        ModelVakansi.INST.setBuffer(null);
    }
}

private void poluchitProf()
{
    addDrawHandler(new DrawHandler()
    {
        @Override
        public void onDraw(DrawEvent event)
        {
            // TODO Auto-generated method stub
            SGWTRPCServletWithProgress.run(new Callback<List<ProfessiaBean>>()
            {
                @Override
                public void run(List<ProfessiaBean> result)
                {
                    if (result != null)
                    {
                        if (result.isEmpty())
                        {
                        }
                        else
                        {
                            profBean = result;
                            content.removeMembers(content.getMembers());
                            content.addMember(lookProf());
                        }
                    }
                    else
                    {
                        GuiContextInst.getInst().showWarn("Error");
                    }
                }

                @Override
                public void error(Throwable caught)
                {
                    check(caught);
                }

                private void check(Throwable caught)
                {
                    runError(caught);
                }
            }, "wait", Actions.PROF, "");

        }
    });

}

@Override
protected Canvas getElement()
{
    if (ModelVakansi.INST.getBuffer() != null)
    {
        // content = (VLayout) ModelVakansi.INST.getBuffer();
        return content;
    }
    else
    {
        content = new VLayout();
        content.setWidth100();
        content.setHeight(centrHght+20);
        content.setOverflow(Overflow.AUTO);
        content.addMember(lookProf());
        content.setScrollbarSize(0);
        return content;
    }
}

private Canvas lookProf()
{
    tileGrid = new TileGrid();
    tileGrid.setWidth(centrWdth + centrBlock);
    tileGrid.setHeight(centrHght+20);
    tileGrid.setTileWidth(370);
    tileGrid.setTileHeight(92);
    tileGrid.setStyleName("label_prof");
    tileGrid.setCanReorderTiles(true);
    tileGrid.setCanFocus(true);
    tileGrid.setShowAllRecords(false);
    tileGrid.setAutoFetchData(true);
    tileGrid.setAnimateTileChange(true);
    tileGrid.setData(getRecords());
    tileGrid.setWrapValues(true);
    tileGrid.setScrollbarSize(0);
    tileGrid.setBorder("0px");
    tileGrid.addClickHandler(new ClickHandler()
    {
        @Override
        public void onClick(ClickEvent event)
        {
            ModelVakansi.INST.setBuffer(content);
            notifer.notifyListeners(new Event(ru.my.web.client.Event.SELECT_PROF,
                    tileGrid.getSelectedRecord().getAttributeAsObject("code").toString()));
        }
    });

    DetailViewerField name = new DetailViewerField("name");
    tileGrid.setFields(name);
    tileGrid.sortByProperty("name", true);

    return tileGrid;
}

private ProfRecord[] getRecords()
{
    int i = 0;
    ProfRecord result[] = new ProfRecord[profBean.size()];
    for (ProfessiaBean oneProfe : profBean)
    {
        result[i] = new ProfRecord(oneProfe.getName().toUpperCase(), oneProfe.getCode());
        i++;
    }
    return result;
}

@Override
public void scrolToIframe(String id, int i)
{
    tileGrid.scrollBy(0, i);
}} 
```

# javascript - 使用尚未创建的 el 的主干？

> ID：13757210
> 
> 赞同：1
> 
> 时间：2012-12-07T05:03:14.977
> 
> 标签：javascript, dom, backbone.js

我正在使用 Backbone 构建单个网页应用程序。

我的主视图依赖于模板，该模板将根据 URL 替换我的页面的正文部分，但由于我必须为该视图提供一个“el”，我希望它是模板本身，它将插入到 DOM 中“渲染”或“初始化”方法。

但是当我调用 new MyMasterView 时，el 是未定义的，因为它在实例化时不存在于 DOM 中。

我能怎么做 ？

我发现的唯一解决方法是将 el 设置为我替换内容的现有 DOM，并`.remove().append(the_template)`在渲染中调用 a ，但我不确定这是最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:13:44.190

我们可以考虑一个场景，你在 DOM 中有以下 div

```
<div id="existing">

</div> 
```

此 div 可以是您想要插入视图生成的 html 的任何其他元素。

假设，您有以下模板，

```
<div id="inside_template">
  <!-- content of the template goes here -->
</div> 
```

您可以将视图指定`existing`为`el`视图，因为它已经存在于 div 中。您将遇到的唯一问题是，如果它是某个标签之类的`body`东西，那么如果您在清除视图时将其从视图中删除（以防止内存泄漏），它将从 dom 中删除可能不需要的标签。

一个解决方案可以是，指定`existing`为`el`，在其中渲染视图的 html，然后在将模板 html 附加到 DOM`el`之后立即调用，例如，[`setElement`](http://backbonejs.org/#View-setElement)

```
render : function() {
  this.$el.html(this.template());
  this.setElement("#inside_template");

  // another render method content
} 
```

这将做的是，它将`el`视图从`existing`（或任何其他 DOM 元素）更改为`inside_template`. 因此，在删除`el`,元素时，`inside_template`元素将被删除，保持`existing`元素在 DOM 中的原样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:18:11.783

您是否尝试过离开`el`null 而只是设置`tagName`？如果你这样做，[_ensureElement](http://documentcloud.github.com/backbone/docs/backbone.html#section-159)将为你的视图元素创建一个新的分离的 DOM 节点。您应该能够呈现与页面的 DOM 分离的 DOM 片段，然后外部代码可以使用`append`或者可能类似于 jQuery 的`replaceWith`.

# java - java - 如何在java中返回选定的日期结果？

> ID：13757215
> 
> 赞同：0
> 
> 时间：2012-12-07T05:03:26.023
> 
> 标签：java, date, datetime, calendar

实际上，在我的 java 程序中，User give `Start Date`and `end Date`ex:2012-12-01 和 2012-12-30 现在我们可以在开始日期和结束日期之间返回结果。

如果我们每天都想要，我们可以使用以下代码...

```
List<Date> dates = new ArrayList<Date>();
     DateFormat formatter = new SimpleDateFormat("yyyy-mm-dd");
    String str_date ="2012-12-03";
    String end_date ="2012-12-06";
    Date startDate = (Date) formatter.parse(str_date);
    Date endDate = (Date) formatter.parse(end_date);

    Calendar cal = Calendar.getInstance();
    Calendar cal1 = Calendar.getInstance();
    cal.setTime(startDate);
    cal1.setTime(endDate);
    int i=0; // use this for alternative date print
    while (!cal.equals(cal1)) {

        cal.add(Calendar.DATE, 1);
             System.out.println(cal.getTime()); 

        } 
```

但问题并非如此，问题是用户只想要`Monday,sunday`他的开始日期和结束日期中的日期，然后如何检查那个....

```
For Ex: String userWeeks="SUNDAY,MONDAY"; 
```

这是用户字符串，然后是如何将`Calendar`日期与此`userWeeks`字符串进行比较。

首先我们可以拆分字符串`userWeeks.split(",")`然后我们分开`SUNDAY MONDAY`

```
So How to compare This String into Calendar? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:25:28.960

在你的循环中添加 if 条件

```
 while (!cal.equals(cal1)) {
          cal.add(Calendar.DATE, 1);
          int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);
          if((Calendar.MONDAY==dayOfWeek)||(Calendar.SUNDAY==dayOfWeek)){
            System.out.println(cal.getTime());
          }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:28:25.167

像这样检查

```
int day=cal.get(Calendar.DAY_OF_WEEK);
if(day == Calendar.SUNDAY)
{
//it is sunday
} 
```

用于检查字符串

```
HashMap<String,Integer> daysOfWeeks=new HashMap<String,Integer>();
daysOfWeek.put("SUNDAY",new Integer(Calendar.SUNDAY));
//and the rest 
```

然后

```
String day=//user input;
Integer i=daysOfWeek.get(day)
if(i!=null)
{
if(i==Calendar.SUNDAY)
{
//it is sunday;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:05:51.293

最后我在想这样我的代码有什么问题请讨论我..

```
 import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

public class SimpleDateFormatClass 
{
    public static void main(String args[]) throws Exception
    {
         DateFormat formatter = new SimpleDateFormat("yyyy-mm-dd");
            String str_date ="2012-12-01";
            String end_date ="2012-12-10";
            Date startDate = (Date) formatter.parse(str_date);
            Date endDate = (Date) formatter.parse(end_date);
            Calendar cal = Calendar.getInstance();
            Calendar cal1 = Calendar.getInstance();
            cal.setTime(startDate);
            cal1.setTime(endDate);
    while (!cal.equals(cal1))
    {       
                cal.add(Calendar.DATE, 1);      

         String days="Fri,mon,tue";
          for (String retval: days.split(","))
            {
        SimpleDateFormat sdf= new SimpleDateFormat("EEEE");
        Date date1= sdf.parse(retval);

              if(date1.getDay()==cal.get(Calendar.DAY_OF_WEEK))
                  {
                       System.out.println(cal.getTime());
                  }
           // System.out.println(date1);
           }
    }//While
    }//Main
} 
```

# android - 不推荐使用的 REST API - 安卓

> ID：13757223
> 
> 赞同：1
> 
> 时间：2012-12-07T05:04:27.017
> 
> 标签：android, facebook-graph-api, deprecated

我创建了一个 android 应用程序来使用 facebook 登录，在 facebook 上创建事件，在 facebook 上创建事件。我认为我使用了已弃用的 API，但我认为我使用了最新的 API - 图形 API。在我的代码中，代码中的一些单词被截断，例如：AsyncFacebookRunner、Facebook、getAccessToken、setAccessToken、isSessionValid 等。

我的函数在旧 API 上运行良好，但昨天我的老板检查了我的代码，并要求我使用未弃用的 API 来完成整个应用程序。

我在不知道 API 已弃用的情况下完成了所有编码。

我真的很困惑，为了将程序转换为使用最新的 API 需要更改什么，我应该更改那些显示为被截断的关键字，还是有其他方法？

欢迎大家发表意见，我真的很困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:19:37.350

有升级指南：

[https://developers.facebook.com/docs/tutorials/androidsdk/3.0/upgrading-from-2.0-to-3.0/](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/upgrading-from-2.0-to-3.0/)

它提供了从 2.0 到 3.0 的高级别的变化。您可以使用它来帮助映射您的迁移。例如，您现在必须使用 Session 对象，而不是使用 Facebook 对象。

新 SDK 还提供了一些示例应用程序，可以指导您完成集成的各个部分，因此也可以查看这些示例应用程序。

# r - LaTeX 和 R 捆绑？

> ID：13757231
> 
> 赞同：6
> 
> 时间：2012-12-07T05:05:29.517
> 
> 标签：r, latex, tex, knitr

我正在使用 R 来分析统计数据并绘制直方图、散点图等。

然后我必须将所有绘图导出为 PDF 以手动将它们包含在 LaTeX 报告中。

我想知道是否有任何方法可以简化这个过程？

我很乐意写如下内容：

```
\chapter{One}
\begin{r}
    qplot(...)
\end{r} 
```

`\begin{r}`这样和之间的代码`\end{r}`将生成一个图，将其保存为 PDF 并生成`TeX`如下：

```
\begin{figure}[ht!]
    \includegraphics[width=1\textwidth,height=1\textheight]{/path/to/plot.pdf}
\end{figure} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T05:15:31.697

看看你能不能被主页上的 5 分钟[视频说服：http:](http://www.screenr.com/qcv8) [//yihui.name/knitr/](http://yihui.name/knitr/)如果你只关心 LaTeX，从 2:54 开始。`knitr`

您的源代码将是这样的：

```
\chapter{One}
<<plot, out.width='1\textwidth', out.height='1\textheight', fig.pos='!ht', fig.cap='your caption'>>=
    qplot(...)
@ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T05:09:37.290

你想要的是[`knitr`](http://yihui.name/knitr/).

该网站有[很多例子](http://yihui.name/knitr/demos)

在您的文档中，您可以执行类似的操作

```
<<boring-plots, fig.width=4, fig.height=4, out.width='.4\\linewidth'>>=
## two plots side by side (option fig.show='hold')
par(mar=c(4,4,.1,.1),cex.lab=.95,cex.axis=.9,mgp=c(2,.7,0),tcl=-.3,las=1)
boxplot(x)
hist(x,main='')
@ 
```

或者甚至设置它，以便您的

```
\begin{r}

\end{r} 
```

语法会起作用。

上面示例来自的[最小示例](https://github.com/yihui/knitr/blob/master/inst/examples/knitr-minimal.Rnw)的[pdf 输出](http://cloud.github.com/downloads/yihui/knitr/knitr-minimal.pdf)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-07T05:10:56.197

Rstudio +knitr 很棒

```
http://www.rstudio.com/ide/docs/authoring/overview 
```

# c# - 一种识别希伯来语标点符号的方法？C＃

> ID：13757232
> 
> 赞同：0
> 
> 时间：2012-12-07T05:05:35.010
> 
> 标签：c#, punctuation

最近我想到是否可以使用 C# 识别希伯来语单词的标点符号。希伯来语中有一些标点符号，例如：

```
יוּעָדוּ 
```

当然，通常我们不会标点单词，所以它应该看起来像：

```
יועדו 
```

有没有办法使用 C# 来识别诸如此类的单词的标点符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:55:24.733

在 Python 中，序列解析如下：

```
>>> a = unicode('יוּעָדוּ', 'utf-8')
>>> b = unicode('יועדו', 'utf-8')
>>> a
u'\u05d9\u05d5\u05bc\u05e2\u05b8\u05d3\u05d5\u05bc'
>>> b
u'\u05d9\u05d5      \u05e2      \u05d3\u05d5' 
```

（我添加了空格以使事情更清晰。）

您可以清楚地看到标点符号。寻找这些的 AC# 正则表达式可能是您想要的方向。

# php - 在插入前插入单引号

> ID：13757234
> 
> 赞同：2
> 
> 时间：2012-12-07T05:06:04.200
> 
> 标签：php, mysql, sql, string

我的 php 代码返回一些值，我正在尝试插入数据库。

```
$string =  '1,here,Skincare composition against free radicals'; //this is returned

'(insert into import (S.No,Name,Title)) values ($string)' 
```

需要以适当的格式转换该字符串以插入数据库

```
'1','here','Skincare composition against free radicals'  //This is expected 
```

内爆应该做吗？但我不知道怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T05:10:47.777

尝试，

```
$string =  "1,here,Skincare composition against free radicals";
$varList = explode(",", $string);
$newQuery = "INSERT INTO `import` (`S.No`,`Name`,`Title`) VALUES ('" . $varList[0] . "','" . $varList[1] . "','" . $varList[2] . "')"; 
```

但是查询很容易受到攻击`SQL Injection`，请阅读下面的文章了解如何学习保护它，

*   [**如何防止 PHP 中的 SQL 注入？**](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

其他来源

*   [PHP**爆炸**](http://php.net/manual/en/function.explode.php)

# php - php如何检测支持者是否登录

> ID：13757236
> 
> 赞同：0
> 
> 时间：2012-12-07T05:06:06.383
> 
> 标签：php, mysql, session

我正在寻找在线聊天支持.....任何人都可以通过聊天窗口与支持者聊天而无需登录.....我需要显示支持者在线或离线的指示....

**当支持者在线时，窗口必须显示为**

![在此处输入图像描述](../Images/6a64fe921cbfcfed82926a1f0d03b1be.png)

**当支持者处于离线状态时，窗口必须显示为**

![在此处输入图像描述](../Images/22de485e0a4d49599d5efe79d07483b0.png)

我怎样才能做到这一点..？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:22:04.100

您的支持者需要向服务器发送心跳，表明他们仍然“活着”。如果他们关闭窗口，他们将停止发出心跳，他们将被视为“离线”。

您所需要的只是一张桌子，上面有每个支持者的最后一次心跳。在设置心跳时间的 2 倍之前，所有支持者都应被视为“在线”。

例如，您定义应该每 15 秒发送一次心跳。如果 30 秒后没有发送心跳，则支持者处于离线状态。

您可以使用 jQuery 的[Ajax 函数](http://api.jquery.com/jQuery.ajax/)发送心跳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:13:46.273

您可以通过在数据库中添加一个额外的列来实现这一点。每当有人登录时，该值将设置为 1，如果他注销，则将其设置为 0。然后您可以检查哪个用户已登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:12:19.070

创建一个表，其中包含支持者登录和注销详细信息，以及是否被其他人占用。

当任何人请求支持者时，请检查同一张表中的条目。

如果有任何支持者在场……随心所欲地做同样的事……

# python - 合并DataFrame中的行

> ID：13757239
> 
> 赞同：0
> 
> 时间：2012-12-07T05:06:22.980
> 
> 标签：python, numpy, python-3.x, python-2.7, pandas

我有一个`DataFrame`有 18 列和大约 10000 行的熊猫。

我的前 3 列分别为`YEAR`、`MONTH`和`DAY`. 我需要合并这三列，并将所有行的整个日期放在一列中。

到目前为止，我的代码是：

```
df.merge('Year','/','Month') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T10:48:58.003

您正在寻找*（**就像数据库连接。）：*[`apply`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html?highlight=apply#pandas.DataFrame.apply) *[`merge`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html?highlight=merge#pandas.DataFrame.merge)*

```
In [1]: from pandas import DataFrame

In [2]: df = DataFrame([[1,11,2012],[1,10,2012]], columns=['day','month','year'])

In [3]: df
Out[3]: 
   day month  year
0    1    11  2012
1    1    10  2012

In [4]: df.apply(lambda row: str(row['day'])+'/'+str(row['month'])+'/'+str(row['year']), axis=1)
Out[4]: 
0    1/11/2012
1    1/10/2012 
```

*该`axis=1`部分意味着您正在选择列而不是行。*

如果你想给出一个具体的日期，你可以使用 datetime：

```
In [5]: import datetime

In [6]: df.apply(lambda row: datetime.datetime(row['year'],row['month'],row['day']), axis=1)
Out[6]: 
0    2012-11-01 00:00:00
1    2012-10-01 00:00:00 
```

您可以将这些添加为数据框中的列，如下所示：

```
In [7]: df['new_date'] = df.apply(lambda row: str(row['day'])+'/'+str(row['month'])+'/'+str(row['year']), axis=1)

In [8]: df
Out[8]: 
   day month  year   new_date
0    1    11  2012  1/11/2012
1    1    10  2012  1/10/2012 
```

.

*值得注意的是，pandas[`parse_dates`在读取为 csv 时](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)有一种简单的方法。*

# javascript - 在javascript中解析字符串中的浮点数

> ID：13757240
> 
> 赞同：-3
> 
> 时间：2012-12-07T05:06:24.540
> 
> 标签：javascript

说`str = 'translate(-100.93,50.88)'`，我怎样才能得到两个 float:`-100.93`和`50.88`JavaScript？我被困在这里了一段时间。我试过了

```
str.match(/[\-|\+|\d+|\.]/g) 
```

这给了我单个字符。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:19:49.977

使用正则表达式，例如：

```
var testString = 'translate(-100.93,50.88)'
var matches = testString.match(/translate\(([-.\d]+),([-.\d]+)/);

//(matches[0] is the first part of the string)
var num1 = matches[1]*1;
var num2 = matches[2]*1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:21:27.683

```
var str = 'translate(-100.93,50.88)'        
var arr = str.match(/\(([^\(\,]+)\,([^\)]+)\)/);
var firstVal = arr[1];
var secVal = arr[2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:16:05.430

```
var str = 'translate(-100.93,50.88)';
var result = str.split(/,|\(|\)/);

alert(parseFloat(result[1])); // -100.93
alert(parseFloat(result[2])); // 50.88 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T05:17:16.237

```
str = str.replace(/[a-zA-Z()]+/g, '').split(',');

var float1 = parseFloat(str[0]),
    float2 = parseFloat(str[1]); 
```

[**小提琴**](http://jsfiddle.net/sL6sV/1/)

# jaxb - 使用 JAXB 在 OSGi 独立框架中获取 ClassCastException

> ID：13757242
> 
> 赞同：4
> 
> 时间：2012-12-07T05:06:40.920
> 
> 标签：jaxb, osgi

我通过 CLI 运行 OSGi 框架，运行命令如下：

java -jar org.eclipse.osgi_3.6.2.R36x_v20110210.jar -console

我的插件运行良好，但是在运行需要系统库（JavaSE1.6.xx）的 JAXB 包来解析 xml 文件的插件时，我得到如下异常跟踪：

```
Exception in thread "DummyProgram" java.lang.ExceptionInInitializerError
        at javax.xml.bind.DatatypeConverter.<clinit>(DatatypeConverter.java:78)
        at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$3.run(JAXBContextImpl.java:262)
        at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$3.run(JAXBContextImpl.java:260)
        at java.security.AccessController.doPrivileged(Native Method)
        at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:260)
        at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1100)
        at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:143)
        at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:110)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
        at javax.xml.bind.ContextFinder.find(ContextFinder.java:376)
        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
        at com.entities.conf.JAXBMTSConfig.unmarshalApps(JAXBMTSConfig.java:113)
        20 more..
Caused by: java.lang.ClassCastException: org.apache.xerces.jaxp.datatype.DatatypeFactoryImpl cannot be cast to javax.xml.datatype.DatatypeFactory
        at javax.xml.datatype.DatatypeFactory.newInstance(Unknown Source)
        at javax.xml.bind.DatatypeConverterImpl.<clinit>(DatatypeConverterImpl.java:742) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:04:22.420

`javax.xml.bind.*`我认为与不同版本的软件包存在冲突。我猜它们是由系统库*和*xerces (?) jar 导出的？

因此，您需要找出哪些包导出了这些包，并解决冲突。

问候，弗兰克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:25:02.460

OSGi 中的类转换异常通常是由于每个包都有自己的类加载器这一事实引起的。两个包可能从其他来源加载相同的类（因为它们被导出两次）。因为每个包都有自己的类加载器，它们由两个不同的类加载器加载，所以 java 不接受它作为同一个类。

有两种解决方法： - 检查类是否被导出两次。如果是这种情况，请尝试通过仅导出一次来解决此问题。这可能是不可能的，因为 bundle a 可能需要 1.4 版本，而 bundle b 可能需要 1.7。

*   如果是这种情况，请在包中导入导出的类。因此，例如： Bundle A 导出 xyz-1.4 并导入 xyz-1.4 Bundle B 导出 xyz-1.7 并导入 xyz-1.7

现在框架可以决定使用哪个类。如果 bundle a 单独运行，将使用 1.4。否则，Bundle C 需要 Bundle A 和 B，将使用 1.7（如果它向下兼容到 1.4）

# android - 为什么 sdcard legacy getCanonicalPath not emulated/0 在 Android 4.2 OS 中？

> ID：13757248
> 
> 赞同：2
> 
> 时间：2012-12-07T05:07:06.057
> 
> 标签：android, sd-card

运行 adb shell，查找到 /mnt/shell/emulated/0 的旧链接但是 getCanonicalPath 无法获取 /mnt/shell/emulated/0？

shell@android:/storage/emulated $ ls -l lrwxrwxrwx root root 2012-12-07 12:01 legacy -> /mnt/shell/emulated/0

```
File file = new File("/storage/emulated/legacy");
String pachString = null;
try {
    pachString = file.getCanonicalPath();
        // prints /storage/emulated/legacy
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:04:59.907

**壳@安卓：**`/mnt $ ls -l /mnt/`

```
ls -l /mnt/ 
drwxr-xr-x root     system            2013-03-13 16:31 asec 
drwxr-xr-x root     system            2013-03-13 16:31 obb 
lrwxrwxrwx root     root              2013-03-13 16:31 sdcard -> /storage/emulated/legacy 
drwx------ root     root              2013-03-13 16:31 secure 
drwx------ shell    shell             2013-03-13 16:31 shell 
```

`'/mnt/shell'`目录仅接受**外壳**。

所以应用程序不能`read /mnt/shell`。

# android - 动画视图android的高度

> ID：13757249
> 
> 赞同：2
> 
> 时间：2012-12-07T05:07:17.140
> 
> 标签：android, android-animation

嗨，我正在尝试每隔 5 秒为 android 中的视图高度设置动画：-

1.  高度从 0 到 5
2.  高度从 5 到 10
3.  高度从 10 到 3 等

我正在使用下面的代码：-

```
 public class ShowAnimation extends Animation{
    float finalHeight;
    View imageview;

    public ShowAnimation(View view,float deltaheight){
        this.imageview=view;
        this.finalHeight=deltaheight;
    }

    protected void applyTransformation(float interpolatedtime,Transformation t){
        imageview.getLayoutParams().height=(int)(finalHeight*interpolatedtime);
        imageview.requestLayout();
    }
    @Override
    public void initialize(int width, int height, int parentWidth,
            int parentHeight) {
        super.initialize(width, height, parentWidth, parentHeight);
    }

    @Override
    public boolean willChangeBounds() {
        return true;
    }
    } 
```

并像这样初始化它：-

```
Animation anidelta = new ShowAnimation(delta, deltaheight);
anidelta.setDuration(500/* animation time */);
delta.startAnimation(anidelta); 
```

但是有了这个我得到以下信息： -

1.  高度从 0 到 5
2.  高度从 0 到 10
3.  高度从 0 到 3

我希望高度从以前的高度而不是每次都从 0 开始动画。有人可以在这里帮助我吗

编辑1：-我这样做了

```
Animation anidelta = new ShowAnimation(delta, deltaheight);
anidelta.setDuration(500/* animation time */);
anidelta.setFillAfter(true);
delta.startAnimation(anidelta); 
```

但它仍然从 0 动画到新高度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T17:24:44.403

好的，这就是我最终解决它的方法：-

```
 public class ResizeAnimation extends Animation 
{
   View view;
int startH;
int endH;
int diff;

public ResizeAnimation(View v, int newh)
{
    view = v;
    startH = v.getLayoutParams().height;
    endH = newh;
    diff = endH - startH;
}

@Override
protected void applyTransformation(float interpolatedTime, Transformation t) 
{
    view.getLayoutParams().height = startH + (int)(diff*interpolatedTime);
    view.requestLayout();
}

@Override
public void initialize(int width, int height, int parentWidth, int parentHeight) 
{
    super.initialize(width, height, parentWidth, parentHeight);
}

@Override
public boolean willChangeBounds() 
{
    return true;
}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-23T07:53:50.690

我知道这篇文章已经一年多没有活跃了，但我会发布我认为最简单的动画视图高度的方法。

您可以使用API 级别 11 提供的[View.setScaleY](https://developer.android.com/reference/android/view/View.html#setScaleY(float)) API ，而不是声明 Animation 类。

使用它，您可以在所需的秒内指定视图以在 0-1 的范围内缩放（0 表示没有高度，1 表示原始高度）。

在 XML 中，将视图的高度设置为最大高度，然后在膨胀视图时（例如在 Activity#onCreate() 或 Fragment#onViewCreated() 中），您可以

```
yourView.setScaleY(0); 
```

然后5秒后你可以设置

```
yourView.setScaleY(0.5f); 
```

这将立即缩放您的视图高度。如果要使用动画缩放视图，例如可以执行以下操作：

```
yourView.animate().scaleY(0.5f).setDuration(200).start(); 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:16:50.437

您需要一个额外的标志来告诉您的`applyTransformation`方法是要增加还是减少视图高度。

向构造函数添加一个标志并将该标志保存为实例变量，并使用该标志来决定是增加还是减少视图高度：

```
public class ShowAnimation {
    // other instance variables
    private boolean increaseHeight;

    public ShowAnimation(View view, float deltaheight, boolean increaseHeight) {
        // other initializations
        this.increaseHeight = increaseHeight;
    }

    protected void applyTransformation(float interpolatedTime, Transformation t) {
        if (increaseHeight)
            imageview.getLayoutParams().height = (int) (finalHeight * interpolatedTime);
        else {
            imageview.getLayoutParams().height = (int) (finalHeight * (1 - interpolatedTime));
        }
        imageview.requestLayout();
    }

} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-07T05:59:43.813

尝试动画集。我不确定这是否是你想要的。

动画 1：高度从 0 到 5
动画 2：高度从 0 到 10
动画 3：高度从 0 到 3

```
public void applyAnimation(ImageView ivDH) {
    System.out.println("Inside applyAnimation()");
    scaleAnim1 = new ScaleAnimation(0, 5, 0, 5);
    scaleAnim1.setDuration(5000);
    scaleAnim1.setRepeatCount(0);
    scaleAnim1.setInterpolator(new AccelerateDecelerateInterpolator());
    scaleAnim1.setFillAfter(true);

    scaleAnim2 = new ScaleAnimation(-5, 10, -5, 10);
    scaleAnim2.setDuration(5000);
    scaleAnim2.setRepeatCount(0);
    scaleAnim2.setInterpolator(new AccelerateDecelerateInterpolator());
    scaleAnim2.setFillAfter(true);

    scaleAnim3 = new ScaleAnimation(10, 3, 10, 3);
    scaleAnim3.setDuration(5000);
    scaleAnim3.setRepeatCount(0);
    scaleAnim3.setInterpolator(new AccelerateDecelerateInterpolator());
    scaleAnim3.setFillAfter(true);

    AnimationSet animationSet = new AnimationSet(true);
    animationSet.addAnimation(scaleAnim1);
    animationSet.addAnimation(scaleAnim2);
    animationSet.addAnimation(scaleAnim3);
    animationSet.setDuration(15000);
    animationSet.setFillAfter(true);

    ivDH.clearAnimation();
    ivDH.startAnimation(animationSet);
} 
```

# oracle - 打开新帐户时插入表的触发器

> ID：13757254
> 
> 赞同：1
> 
> 时间：2012-12-07T05:08:01.487
> 
> 标签：oracle, plsql

```
customers:
+------------+--------------+ 
| cid        | Name         | 
+------------+--------------+ 
| 1          | Bob          |
| 2          | John         | 
| 3          | Jane         | 
+------------+--------------+ 
accounts:
+------------+--------------+ 
| aid        | type         | 
+------------+--------------+ 
| 1          | Checking     |
| 2          | Saving       | 
| 3          | Checking     | 
+------------+--------------+ 
transactions:
+------------+--------------+--------------+--------------+ 
| tid        | cid          | aid          | type         |
+------------+--------------+--------------+--------------+ 
| 1          | 1            | 1            | Open         |
| 2          | 2            | 3            | Open         |
| 3          | 1            | 2            | Open         |
| 4          | 2            | 3            | Deposit      |
+------------+--------------+--------------+--------------+ 
```

我正在尝试编写一个触发器，当新帐户成功打开时写入日志表。

现在我有这个：

```
CREATE OR REPLACE TRIGGER acc_opened
BEFORE INSERT ON transactions
FOR EACH ROW
DECLARE
    c_name customers.name%TYPE;
BEGIN
    IF :new.type = 'Open' THEN
        SELECT name into c_name
        FROM customers c
        WHERE c.cid = :new.cid;

        INSERT INTO logs (who, what) VALUES (c_name, 'An account has been opened');
END;
/ 
```

我的代码不起作用，也不知道从哪里开始。

触发器完成，但是当它触发时，我收到以下错误消息：

PLS-00103：在预期以下情况之一时遇到符号“END”：（begin case declare exit for goto if loop mod null pragma raise return select update while with << continue close current delete fetch lock insert open rollback savepoint set sql execute提交 forall 合并管道清除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:18:03.960

和[上一个问题](https://stackoverflow.com/questions/13756110/trigger-that-inserts-row-into-log-table-on-insert-or-delete-in-a-persons-table-c)一样，如果要引用新数据行的特定列，则需要使用`:new`伪记录。所以，至少，

```
SELECT cid 
  INTO c_id
  FROM transactions t
 WHERE t.aid = aid; 
```

需要是

```
SELECT cid 
  INTO c_id
  FROM transactions t
 WHERE t.aid = :new.aid; 
```

`transactions`除此之外，在将行插入`accounts`故事之前，您确定该行存在于表中吗？假设您有正常的外键约束，我通常希望您先在表中插入一行，`accounts`然后再将行插入`transactions`表中。

这个名字`transactions`似乎也很奇怪。如果这真的只是将客户 ID 映射到帐户 ID，那`transactions`似乎是一个相当糟糕的名称。如果该表实际存储交易，我不确定它为什么会有客户 ID。但如果它确实存储交易，则必须有一些其他表将客户映射到帐户。

在您更新的触发器中，您缺少该`END IF`语句

```
CREATE OR REPLACE TRIGGER acc_opened
  BEFORE INSERT ON transactions
  FOR EACH ROW
DECLARE
  c_name customers.name%TYPE;
BEGIN
  IF :new.type = 'Open' 
  THEN
    SELECT name 
      into c_name
      FROM customers c
     WHERE c.cid = :new.cid;

     INSERT INTO logs (who, what) 
       VALUES (c_name, 'An account has been opened');
  END IF;
END; 
```

# windows - SCSI 端口与 Storport

> ID：13757255
> 
> 赞同：0
> 
> 时间：2012-12-07T05:08:05.120
> 
> 标签：windows, winapi, wdk

当我调用 IoBuildDeviceIoControlRequest(IOCTL_SCSI_MINIPORT,...) 从我的驱动程序设置 IRP 时，我怎么知道它将考虑哪个驱动程序（storport 或 scsiport），因为我的驱动程序文件夹中都有它们。我只有源代码，没有调试环境。有没有一种简单的方法来解决它？

# prolog - 使用 \==/2 或 diff/2

> ID：13757261
> 
> 赞同：17
> 
> 时间：2012-12-07T05:08:49.170
> 
> 标签：prolog, prolog-dif, logical-purity

如果我想确保两个变量不会实例化为同一个术语，那么首选的方法是什么？

假设我需要在图中找到有向边，并且节点不能对自身有边：

```
node(a, x, y). node(b, z, x). node(c, y, y). 
```

（这里的边是 a -> c，b -> a，但**不是**c -> c）

以下作品：

```
edge(A, B) :- node(A, _, X), node(B, X, _), A \== B. 
```

这也有效[swi-prolog]：

```
edge(A, B) :- dif(A, B), node(A, _, X), node(B, X, _). 
```

这显然不起作用（因为 A 和 B 都没有被实例化？）：

```
edge(A, B) :- A \== B, node(A, _, X), node(B, X, _). 
```

我想我对第一个解决方案的问题是，对于更复杂的谓词，在失败`node`之前可能会发生许多不必要的统一。另一方面，在一个库中，这表明它不适合在如此简单的情况下使用（尽管它具有我似乎正在寻找的确切功能）`edge`。`dif`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T08:20:45.550

仅出于优雅和教学的原因，`dif/2`在这里以及在绝大多数其他情况下显然更可取，因为您已经注意到“可能会发生很多不必要的统一”，而且还因为`dif/2`它是一个纯粹且很好的声明性谓词，可以与`(\==)/2`. `dif/2`也是 SWI-Prolog 中的自动加载谓词，这意味着您无需**显**式导入任何库即可使用它，并且`dif/2`像任何内置谓词一样可用。

如果您使用`dif/2`，您可以更轻松地推断您的代码。例如，在您的情况下，您从以下开始：

```
边缘（A，B）：-节点（A，_，X），节点（B，X，_），差异（A，B）。

```

然后，您知道这`dif/2`是一个完全纯谓词，您知道您也可以将其写为：

```
边缘（A，B）：-差异（A，B），节点（A，_，X），节点（B，X，_）。

```

此外，由于您知道`dif/2`始终终止，因此您知道此更改最多可以*改善*程序的终止属性。

像所有约束一样，`dif/2`旨在使用。我强烈推荐它而不是不可交换的不纯谓词。

如果您担心性能，这里有一个小比较，只是在两个谓词可以互换使用的用例中`dif/2`与非声明性进行比较：`(\==)/2`

```
?- N = 1_000_000，时间（（介于（1，N，_），dif（a，b），假））。
% 11,000,005 次推理，0.352 CPU 在0.353 秒内（100% CPU，31281029 唇）

?- N = 1_000_000，时间（（介于（1，N，_），a\==b，假））。
%@ % 3,000,001 次推理，0.107 秒内的 0.107 CPU （99% CPU，28167437 唇）

```

因此，使用`(\==)/2`. 然而，在使用这种低级谓词时也有更严重的缺点：它更难理解、更容易出错、并且不是声明性的。

因此，我建议简单地使用`dif/2`来表示两个术语是不同的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T19:47:57.353

首先，当两个论点都成立时`dif/2`，`(\==)/2`意思相同，即自由变量。因此，如果您可以确保论点是有根据的——或者更确切地说是充分实例化，使得进一步的实例化不会影响结果`(\==)/2`——那么它就不会产生影响。

在您的示例中，我们需要确定答案`node/3`总是包含一个基本的第一个论点。在这种情况下，`(\==)/2`程序很好。在极少数情况下，它的效率可能低于该`dif/2`版本。想想目标`edge(X, X)`。

在许多情况下，`(\==)/2`或什至`(\=)/2`明显更有效。另一方面，与正确性相比，效率有多重要？

看待这一点的另一种方式是从两个方面考虑`(\==)/2`和`(\=)/2`作为近似值：只有当双方都同意时，我们才会有一个安全的最终结果。

从历史上看，`dif/2`它是最古老的内置谓词之一。它出现在第一个 Prolog 系统中，有时称为 Prolog 0，以将其与下一个版本区分开来，后者通常被认为是第一个 Prolog——Marseille Prolog——Prolog 1。Prolog 1 不再有`dif/2`，它在这个Prolog 来到爱丁堡的形状。此外，`dif/2`它不是 ISO 标准的一部分（当前），因为它需要一些类似协程的机制。许多（相当旧的）Prolog 系统没有这样的机制。然而，即使在 ISO Prolog 中，也可以做得更好：

```
iso_dif(X, Y) :-
   X == Y,
   !,
   fail.
iso_dif(X, Y) :-
   X \= Y,
   !.
iso_dif(X, Y) :-
   throw(error(instantiation_error,iso_dif/2)). 
```

（这是[另一个可能更有效的实现](https://stackoverflow.com/a/20238931/772868)）

请注意有问题的情况如何被停止整个计算的错误所覆盖。

当前支持`dif/2`开箱即用的 Prolog 系统有 B、SICStus、SWI、YAP。它位于 IF、Ciao、XSB、Scryer 的库中。

另请参阅[此答案](https://stackoverflow.com/a/8523825/772868)。

* * *

为了支持我关于开销的说法，这里是在同一台机器上的各种 Prolog 中的测试。在 SWI 中，有 10 倍的开销，在 B 中，没有开销。正如@nfz 所指出的，编译时数字略有不同。所以你的里程可能会有所不同。

SWI 6.3.4-55

```
?- 1000=I,time(( dif(X,Y), between(1,I,X), between(1,I,Y), false ))。
% 22,999,020 次推理，5.162 CPU在 5.192 秒内（99% CPU，4455477 唇）
错误的。

?- 1000=I,time(( 介于(1,I,X),介于(1,I,Y), X \== Y, false ))。
% 2,000,001 推理，0.511 CPU在 0.521 秒内（98% CPU，3912566 唇）
错误的。

```

乙 7.8

```
| ?- 1000=I,time(( dif(X,Y), between(1,I,X), between(1,I,Y), false ))。
CPU时间0.364秒。
不
| ?- 1000=I,time(( 介于(1,I,X),介于(1,I,Y), X \== Y, false ))。   
CPU时间0.356秒。
不

```

雅普

```
?- 1000=I,time(( dif(X,Y), between(1,I,X), between(1,I,Y), false ))。
% 2.528 CPU在 2.566 秒 ( 98% CPU)
不
?- 1000=I,time(( 介于(1,I,X),介于(1,I,Y), X \== Y, false ))。
% 0.929 CPU在 0.963 秒内 (96% CPU)
不

```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-09T22:08:18.657

查询是元解释的，开销可能超过 和 的`dif(X,Y)`差异`X\==Y`。您应该比较这两个谓词：

```
t1:-
    1000=I,
    time(t1(I)).

t1(I):-
    dif(X,Y), 
    between(1,I,X), 
    between(1,I,Y), 
    false.

t2:-
    1000=I,
    time(t2(I)).

t2(I):-
    between(1,I,X), 
    between(1,I,Y), 
    X\==Y,
    false. 
```

在 B-Prolog 上，我得到以下结果：

```
| ?- cl(t)
Compiling::t.pl
compiled in 0 milliseconds
loading::t.out

yes
| ?- t1
CPU time 0.14 seconds.
no
| ?- t2
CPU time 0.078 seconds.
no
| ?- 1000=I,time(( dif(X,Y), between(1,I,X), between(1,I,Y), false )).
CPU time 0.234 seconds.
no
| ?- 1000=I,time(( between(1,I,X), between(1,I,Y), X \== Y, false )).
CPU time 0.218 seconds. 
```

# django-models - Tastypie - 排序嵌套数组

> ID：13757268
> 
> 赞同：0
> 
> 时间：2012-12-07T05:09:56.870
> 
> 标签：django-models, tastypie, django-orm

我正在调用包含嵌套数组的数据。

例子：

```
data = [
    'name':'John', 'likes': ['Women', 'Bars', 'Women_In_Bars', 'turtles'],
    'name': 'Steve', 'likes': ['Men', 'Clubs', 'Men_In_Clubs', 'cats']
    ] 
```

我已经`name`在我的查询集中进行排序，并且 Resource 已经根据 docs 正确映射`likeResource`到[另一个](http://django-tastypie.readthedocs.org/en/latest/fields.html)。

**我怎样才能`likes`按排序顺序返回嵌套？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:30:37.183

如果您不共享创建每个资源的代码等，真的很难说...

我想你可以尝试使用脱水功能：

```
def dehydrate(self, bundle):
    #bundle.data['data'] might contain the array you mention above
    for item in bundle.data['data']:
        sort_function(item['likes']) 
```

希望能帮助到你！

# ruby - 如何计算游戏中的可能成功率：x + random(12) => y

> ID：13757270
> 
> 赞同：1
> 
> 时间：2012-12-07T05:10:04.320
> 
> 标签：ruby, probability

我正在尝试编写一行 Ruby 代码来计算文本冒险游戏中简单技能测试的可能成功率。测试是“如果 x + random(12) => y then”。如何计算此语句在 Ruby 中为真的成功率？

在游戏中，玩家有一定的技能，偶尔需要测试这些技能加上一个随机数来获得大于或等于给定的难度数。我想计算能够赢得该技能测试的成功率百分比。

作为冒险游戏中的一个例子，你试图在丛林中追踪一些动物。为此，您必须测试您的跟踪技能。例如，如果您的跟踪技能为 3，并且您在其中添加了一个 1-12 之间的随机数，则您需要至少获得 9 或更高的分数才能成功。基本上：技能 + 随机（12）=> 难度数。我想在他们玩之前显示一个成功率百分比，看看他们成功的机会有多大。

那么在 Ruby 中，用我当前的技能分数计算成功机会的算法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:17:13.850

你可以这样做。

```
def success_rate(skill, success_level, random_range=12)
  delta = success_level - skill

  return [100 - (delta.to_f / random_range * 100), 100].min.round(2)
end 
```

# ruby-on-rails - 在 Rails 中编辑我的文本文件内容

> ID：13757272
> 
> 赞同：0
> 
> 时间：2012-12-07T05:10:25.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`"xyz.text.erb"`我的文件夹中有一个文件`view`。我想编辑该内容。就像我是管理员一样，`xyz.text.erb`当我单击保存然后更改文件内容时，我想在编辑器中编辑该文件内容`xyz.text.erb`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:53:51.990

您不能这样做，因为如果您在启动服务器 rails 后更改文件的内容，rails 不会重新加载文件，因此您必须将内容放入数据库中。

开发中的 Rails 每次都会重新加载所有文件，但在生产中，您可以删除所有文件夹应用程序，应用程序继续运行而不会出现任何问题。

# magento - 致命错误：在非对象上调用成员函数 setProductFilter()

> ID：13757279
> 
> 赞同：1
> 
> 时间：2012-12-07T05:11:20.020
> 
> 标签：magento, fatal-error, configurable-product

当我尝试从管理面板创建可配置产品时，出现以下错误。

致命错误：在非对象上调用成员函数 setProductFilter()

我没有尝试任何特别的东西。我刚刚转到“添加产品”并选择“默认”属性集并从下拉列表中选择“可配置产品”并点击继续。但我无法创建可配置的产品。

它在以下行中显示错误

\app\code\core\Mage\Catalog\Model\Product\Type\Configurable.php 在第 294 行

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T06:05:16.520

```
If your Problem  is - magento Call to a member function setProductFilter() on a non-object in app/code/core/Mage/Catalog/Model/Product/Type/Configurable.php on line 294

Go to -
app/code/core/Mage/Catalog/Model/Resource/Product/Type/Configurable/Attribute/

And see there are the Collection.php file exist or not.
I thing there are Collection.php file exist but the file extension is not correct format.

You can change the extension only, Make it Collection.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T16:18:07.677

差不多 2 年过去了，我刚刚在 Magento 1.9.0.1 中遇到了同样的（嗯，非常相似的）问题。我找到了原因，这让我感到非常惊讶。

*注意：我在文件路径中使用反斜杠，因为我使用的是 Windows。我看到OP也是。以防万一有人要指出我的“错误”。:o)*

第 294 行的 \app\code\core\Mage\Catalog\Model\Product\Type\Configurable.php 如下所示：

```
return Mage::getResourceModel('catalog/product_type_configurable_attribute_collection')->setProductFilter($this->getProduct($product)); 
```

这应该做以下三件事：

1.  使用加载产品对象`$this->getProduct($product)`
2.  使用生成资源对象`Mage::getResourceModel('catalog/product_type_configurable_attribute_collection')`
3.  调用该资源对象的`setProductFilter`方法，传入产品对象

它在第 2 步失败，因为`Mage::getResourceModel('catalog/product_type_configurable_attribute_collection')`尝试使用文件 \app\code\core\Mage\Catalog\Model\Resource\Product\Type\Configurable\Attribute\Collection.php，至少在我的情况下 - 没有存在。

确切地说，该文件存在，但扩展名错误 - .ph 而不是 .php。似乎 Magento CE 1.9.0.1 是这样发布的。也许其他版本也会受到同样的影响。

Magento CE 1.9.0.1 有 3 种格式：.zip、.tar.gz 和 .tar.bz2。我将 .tar.gz 版本下载到 Windows 8.1 系统上，并使用 GnuWin 的 gzip for Windows 和 tar for Windows（两个命令行实用程序）将其解压缩。可能由于我选择下载和提取的特定方式和/或由于我使用的操作系统而损坏了某些东西。或者这个文件可能只是在源头上命名错误。无论哪种方式，将其重命名为 .php 为我解决了这个问题。

希望这对某人有所帮助-因为我可以看到这是一个受欢迎的话题：oD

# xcode4 - xcodebuild / Jenkins 找不到 iOS 作业的 PROVISIONING_PROFILE

> ID：13757283
> 
> 赞同：5
> 
> 时间：2012-12-07T05:11:56.043
> 
> 标签：xcode4, jenkins, code-signing, xcodebuild

当项目选择了正确的配置文件时，我可以使用 Jenkins/xcodebuild 进行构建。

我们希望能够在 xcodebuild 中设置配置文件。

不幸的是，当 jenkins 用户运行时

`xcodebuild PROVISIONING_PROFILE="XXX"`

...*大量的构建输出*...

> `Check dependencies`
> 
> `Code Sign error: Provisioning profile 'XXX' can't be found`

我可以运行同一行并使其与普通用户帐户一起使用，访问 ~/Library/MobileDevice/Provisioning Profiles/ 中的文件

配置文件存储在`/Users/Shared/Jenkins/LibraryMobileDevice/Provisioning Profiles`

任何人都知道 Jenkins 用户还会在哪里寻找这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T03:47:50.550

要回答这个问题：配置文件**必须**以 UUID 命名。

如果您下载并且不重命名 .mobileprovision 文件，它将不会被`xcodebuild`

[这样做的脚本在另一个 StackOverflow 答案中](https://stackoverflow.com/a/11167851/389159 "用于安装配置文件以与 xcodebuild 一起使用的脚本")

# iphone - 增量后清除推送通知徽章

> ID：13757285
> 
> 赞同：5
> 
> 时间：2012-12-07T05:12:09.757
> 
> 标签：iphone, ios, push-notification, urbanairship.com

我正在处理 iphone 中的推送通知。当我收到推送通知时，它在我的应用程序图标上显示 1，下一次是 2、3、4。如果我打开应用程序它的 0。下次它应该是 1,2,3,4 ......但它显示最后一个数字和 +1。我想在打开应用程序后重置推送通知徽章。我从城市飞艇发送+1。

它不适合我。

```
 [[UIApplication sharedApplication] cancelAllLocalNotifications];
 [UIApplication sharedApplication].applicationIconBadgeNumber = 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T00:18:10.020

我在我的应用程序中使用此代码，因为 Urban Airship (UA) 文档说

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 0;
[[UAPush shared] resetBadge]; 
```

但它不起作用，应用程序图标上的徽章不断增加。我在UA的论坛上看到了一些关于这个问题的帖子，他们没有给出明确的答案。

**编辑＃1：**

我收到了 UA 支持技术人员的以下回复，其中包含以下建议，效果很好：

您想要做的是确保在您的**didFinishLaunchingWithOptions:(NSDictionary *)launchOptions**方法中，您正在调用以下内容：

```
[[UAPush shared] setAutobadgeEnabled:YES];
[[UAPush shared] resetBadge];//zero badge on startup 
```

并调用**[[UAPush shared] resetBadge];** 在以下方法中：

```
applicationDidBecomeActive:(UIApplication *)application 
```

和

```
didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

技术人员还提到给**applicationIconBadgeNumber**赋值 0不是必须的，所以我把它拿出来了。仍然很漂亮。

**编辑＃2：**

我最终不得不修改**application:didReceiveRemoteNotification:**以包含对 UA 的**handleNotification:applicationState:**方法的调用：

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    // Get application state for iOS4.x+ devices, otherwise assume active
    UIApplicationState appState = UIApplicationStateActive;
    if ([application respondsToSelector:@selector(applicationState)])
    {
        appState = application.applicationState;
    } 

    [[UAPush shared] handleNotification:userInfo applicationState:appState];
    [[UAPush shared] resetBadge];
} 
```

因为我在以下情况下遇到了问题：

1.  用户在应用程序中
2.  收到推送通知
3.  返回主屏幕时，应用程序图标上没有显示徽章（如预期的那样）
4.  收到另一个推送通知
5.  徽章显示的数字大于 1

通过上面的修改，处理了这种情况。我想你必须告诉 UA 收到通知并且应用程序在前台运行时处理通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:31:23.373

我用过Urban Airship，以前也遇到过这个问题。您没有显示代码，但我假设收到通知时，您将应用程序徽章编号设置为城市飞艇传递给您的编号，不要那样做。只要让应用程序自己处理这个，当远程通知进来时，让它自己自动递增。如果不是这种情况，则可能是在城市飞艇方面，您正在设置一个徽章编号以随推送发送。不要在推送通知中发送徽章编号，留下那部分，iOS 应该从当前徽章编号自动增加您的徽章。

# solr - 需要 solr 云输入

> ID：13757286
> 
> 赞同：3
> 
> 时间：2012-12-07T05:12:09.380
> 
> 标签：solr, solrj, solrcloud

我需要一些用于 Solr Cloud 与 java 集成的输入。我阅读了 wiki.apache.org/solr/SolrCloud 页面。我有一个基本的知识。但我需要的是用 solr cloud 实现一个非常基本的 java 应用程序，它带有分片、zookeeper 和分布式索引。我有谷歌它。但我一个都看不懂。请给我一些关于创建具有分布式索引的应用程序的输入。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T09:04:32.273

假设您正在谈论一个 Java 客户端（用于索引和搜索），您正在寻找的是 solrj，您可以在 SOLR dist 下找到它的 jar。API 使用起来非常简单，您可以[在此处找到一些示例](http://wiki.apache.org/solr/Solrj "这里")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T05:21:54.220

这是用于将文档索引到 solr 服务器的示例代码。我相信这很容易理解。要运行它，您需要在项目中拥有 solrj 库。对于 solr cloud，您可以使用 cloudserver 而不是 httpsolrserver。

我建议您阅读文档。它非常简单易懂。

```
SolrServer server = new HttpSolrServer("http://HOST:8983/solr/");
    SolrInputDocument doc1 = new SolrInputDocument();
    doc1.addField( "id", "id1", 1.0f );
    doc1.addField( "name", "doc1", 1.0f );
    doc1.addField( "price", 10 );
    SolrInputDocument doc2 = new SolrInputDocument();
    doc2.addField( "id", "id2", 1.0f );
    doc2.addField( "name", "doc2", 1.0f );
    doc2.addField( "price", 20 );
    Collection<SolrInputDocument> docs = new ArrayList<SolrInputDocument>();
    docs.add( doc1 );
    docs.add( doc2 );

    Add the documents to Solr 

    server.add( docs );

    Do a commit 

    server.commit(); 
```

# android - 将 3 张图像动态插入到水平滚动视图或 Viewpager

> ID：13757287
> 
> 赞同：3
> 
> 时间：2012-12-07T05:12:13.000
> 
> 标签：android, android-layout, android-intent, android-widget, android-scrollview

下面显示了我正在寻找的图像。目前我正在使用查看寻呼机和圆圈指示器。在视图页面中，它只显示一个图像。

我想在一个浏览器中显示三个图像，如图所示。当我滑动该页面时，三个不同的图像再次加载表单服务器，下面有文本。这该怎么做？关于这个或任何其他方式来实现这一点的任何想法？

我的代码如下所示。

我在这里添加了一些 xml 布局：homespizzaview.xml

```
 <LinearLayout
        android:id="@+id/linearLayoutbutton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dip" >

   <android.support.v4.view.ViewPager
    android:id="@+id/pagerMenu"
    android:layout_width="0dip"
    android:layout_height="100dip"
    android:layout_weight="1"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip">

          </android.support.v4.view.ViewPager>   
    </LinearLayout>

  <RelativeLayout
    android:id="@+id/relativeLayoutDot1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dip">
  <com.viewpagerindicator.CirclePageIndicator
   android:id="@+id/indicatorMenu"
   android:layout_width="fill_parent"
   android:layout_height="25dip"
   android:layout_marginLeft="10dip"
   android:layout_marginRight="10dip"
   android:padding="10dip" />

 </RelativeLayout> 
```

主视图.java

```
 public class HomeView extends Activity {

    adaptermenu = new MenuPagerAdapter();
    pagerMenu = (ViewPager)findViewById(R.id.pagerMenu);
    pagerMenu.setAdapter(adaptermenu);
    pagerMenu.setCurrentItem(0);
    pagerMenu.setOffscreenPageLimit(adapter.getCount());
    pagerMenu.getAdapter().notifyDataSetChanged();
    pagerMenu.setPageMargin(15);

    indicator  = (CirclePageIndicator)findViewById(R.id.indicatorMenu);
    indicator.setViewPager(pagerMenu);

    final float density1 = getResources().getDisplayMetrics().density;
    indicator.setRadius(5 * density1);
    indicator.setPageColor(0xFF000000);
    indicator.setFillColor(0xFF888888);
    indicator.setStrokeWidth(2 * density1);

    //We set this on the indicator, NOT the pager
    indicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {             
        @Override
        public void onPageSelected(int position) {
         //   Toast.makeText(HomeSpizzaView.this, "Changed to page " + position, Toast.LENGTH_SHORT).show();
            pagerMenu.setCurrentItem(position, false);            
        }
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }
        @Override
        public void onPageScrollStateChanged(int state) {               
        }
    });

    indicator.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            pagerMenu.setCurrentItem(0);  
          Log.i("", "getCurrentItem"+  mPager.getCurrentItem());
          pagerMenu.getAdapter().notifyDataSetChanged();
        }
    });

       }
    } 
```

MenuPagerAdapter.java

```
 public class MenuPagerAdapter extends PagerAdapter {

public int getCount() {
    return 3;
}

public Object instantiateItem(View collection, int position) {

    ImageView image = new ImageView(collection.getContext()); 
    image.setPadding(20, 0, 20, 0);     
    int resId = 0;
    switch (position) {
    case 0:
        resId = R.drawable.promotion1;
        break;
    case 1:
        resId = R.drawable.promotion2;
        break;
    case 2:
        resId = R.drawable.promotion3;
        break;
    }
    image.setImageResource(resId); 
    ((ViewPager) collection).addView(image, 0);

    return image;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);

}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

}

@Override
public Parcelable saveState() {
    return null;
}
} 
```

* * *

这是更新代码，它显示带有以下文本视图的单个图像视图。我正在寻找动态图像和文本.. 意味着在 1 个视图寻呼机中 3 个图像和 3 个文本.. 目前它显示 1 个图像视图和下面的文本.. 我正在单个视图寻呼机中寻找 3 个图像.. 如果我添加线性布局它显示 3 图像。但我添加了显示单个图像的相对布局.. 任何我弄错的想法。

```
 public Object instantiateItem(View collection, int position) {

    RelativeLayout  lLayout;      
    RelativeLayout.LayoutParams relativeLayout;

    lLayout = new RelativeLayout (collection.getContext());
      relativeLayout = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);

        for (int i = 0; i < 3; i++) {
            image = new ImageView(collection.getContext());
            image.setPadding(20, 0, 20, 0); 
            image.setId(1);
            int res = 0;
          switch (0) {
          case 0:
              res = R.drawable.menu_antipasti;          
              break;
          case 1:
              res = R.drawable.menu_combos;
              break;
          case 2:
              res = R.drawable.menu_drinks;
              break;
          }                  
            image.setImageResource(res);
            lLayout.addView(image);

            textview = new TextView(collection.getContext());
            textview.setTextColor(Color.BLACK);
            textview.setId(2);
            textview.setText("pizza");  
            textview.setPadding(60, 0, 20, 0);
            relativeLayout.addRule(RelativeLayout.BELOW, image.getId());
            lLayout.addView(textview, relativeLayout);
        }

        ((ViewPager) collection).addView(lLayout, 0);
        return lLayout;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:22:54.417

现在你`ImageView`从`instantiateItem`方法返回。如果你想在一页上有 3 张图片，你需要创建布局，在上面放置 3 张图片并返回它。例如：

```
public Object instantiateItem(View collection, int position) {
    LinearLayour images = new LinearLayout(collection.getContext());
    for (int i = 0; i < 3; i++) {
        ImageView image = new ImageView(collection.getContext());
        image.setPadding(20, 0, 20, 0);     
        images.addView(image);
        int res = someResource depending on i and position.
        image.setImageResource(res);
    }

    ((ViewPager) collection).addView(images, 0);
    return images;
} 
```

# r - R for 循环与 in 类型转换

> ID：13757289
> 
> 赞同：2
> 
> 时间：2012-12-07T05:12:24.003
> 
> 标签：r, for-loop

为什么下面的代码不是打印日期而是整数？

```
> for (t in seq(as.Date('20090101','%Y%m%d'),as.Date('20090105','%Y%m%d'),1 ))
+ {
+   print(t)
+ }
[1] 14245
[1] 14246
[1] 14247
[1] 14248
[1] 14249 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T05:15:14.610

正如@flodel 所建议的那样，for 循环保留类型而不是类：

```
h <- seq(as.Date('20090101','%Y%m%d'),as.Date('20090105','%Y%m%d'),1)
 class(h)
[1] "Date"
> typeof(h)
[1] "double" 
```

解决方法：

使用矢量化版本：

```
print(seq(as.Date('20090101','%Y%m%d'),as.Date('20090105','%Y%m%d'),1 )) 
```

或遍历序列索引并检索日期`[`：

```
for (i in seq_along(h)) {
    dt <- h[i]
    print(dt)
}

[1] "2009-01-01"
[1] "2009-01-02"
[1] "2009-01-03"
[1] "2009-01-04"
[1] "2009-01-05" 
```

# scala - 带有泛型参数的 Scala 方法调用似乎不是多态的 - 出了什么问题

> ID：13757294
> 
> 赞同：3
> 
> 时间：2012-12-07T05:12:57.327
> 
> 标签：scala, scala-2.9

无法弄清楚为什么这是错误的或如何解决它。这是重现问题的“蒸馏”代码。请帮忙，但我不会欣赏任何“为什么”问题 - 有非常真实和有效的答案，但它们是专有且不可更改的，因此与解决方案无关。

```
object Sandbox {

  // --- Following are really Java interfaces/classes ---
  trait R[X <: U[X,Y], Y <: E[X,Y]];
  class U[X <: U[X,Y], Y <: E[X,Y]] extends R[X,Y];
  class E[X <: U[X,Y], Y <: E[X,Y]] extends R[X,Y];

  trait R2 extends R[U2,E2];
  class U2 extends U[U2,E2] with R2;
  class E2 extends E[U2,E2] with R2;
  // --- End Java interfaces/classes ---

  def trouble[X <: U[X,Y], Y <: E[X,Y], Z <: R[X,Y]](r: Z) {}

  def main(args: Array[String]) {
    trouble(new U());  // Fine
    trouble(new E());  // Fine
    trouble(new U2()); // Not fine, reports:
    /*
     * inferred type arguments [Nothing,Nothing,Sandbox.U2]
     * do not conform to method trouble's type parameter bounds
     * [X <: Sandbox.U[X,Y],Y <: Sandbox.E[X,Y],Z <: Sandbox.R[X,Y]]
     */

    trouble(new E2()); // Not fine, reports:
    /*
     * inferred type arguments [Nothing,Nothing,Sandbox.E2]
     * do not conform to method trouble's type parameter bounds
     * [X <: Sandbox.U[X,Y],Y <: Sandbox.E[X,Y],Z <: Sandbox.R[X,Y]]
     */

    trouble[U2,E2,R2](new U2()); // Fine
    trouble[U2,E2,R2](new E2()); // Fine
  }
} 
```

编译器似乎无法仅基于指定的单个参数来推断“麻烦”方法的 X、Y 和 Z 类型参数。我明白这一点 - 当我指定类型时，没关系，但它很麻烦。有没有办法以某种方式轻推/帮助编译器，以使这不再是一个问题？

也许我对 Scala 的类型推断系统过于自信，但它可以使用所有信息。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:11:39.223

您对 Scala 的类型系统推断过于自信。您尝试使用这些更复杂（尤其是递归）类型定义的次数越多，您就越会发现这一点。我不知道我是否可以提供“为什么它不能解决这个问题”，但我可以提供一些有效的东西：

不要在类型上参数化 R，而是使它们成为必须在子类型中声明的抽象成员：

```
trait R {
    type X <: U[X,Y]
    type Y <: E[X,Y]
}

class U[X0 <: U[X0,Y0],Y0 <: E[X0,Y0]] extends R {
    type X = X0
    type Y = Y0
}
class E[X0 <: U[X0,Y0], Y0 <: E[X0,Y0]] extends R {
    type X = X0
    type Y = Y0
}

trait R2 extends R;
class U2 extends U[U2,E2] with R2
class E2 extends E[U2,E2] with R2

def trouble[X <: U[X,Y], Y <: E[X,Y], Z <: R](r: Z) {} 
```

那么我相信你会发现你的 main 方法编译没有改变。

顺便说一句，代码中的每个分号都可以在不改变含义的情况下被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:19:59.573

请参阅[此答案](https://stackoverflow.com/a/13536998/334519)（以及我在此处链接的答案），以讨论 Scala 类型推断的局限性，这些局限性在这里造成了混乱。

如果您不需要`X`and`Y`在 的主体（或返回类型）中`trouble`，则可以使用存在类型来完全避免引用它们：

```
def trouble[Z <: R[_, _]](r: Z) {} 
```

如果确实需要它们，可以使用视图绑定：

```
def trouble[X <: U[X, Y], Y <: E[X, Y], Z <% R[X, Y]](r: Z) {} 
```

请参阅上面链接的答案，了解为什么会这样。

# python - python 2.7 urllib2 和 json 中的脚本引发 unicode 错误

> ID：13757296
> 
> 赞同：1
> 
> 时间：2012-12-07T05:12:57.557
> 
> 标签：python, json, encoding, urllib2

```
import json
import urllib2
url='http://search.twitter.com/search.json?q=python'
open=urllib2.urlopen(url)
response=open.read().encode('utf8')
data=json.loads(response)
results=data['results']
for result in results:
  print result['from_user'] + ': ' + result['text'] + '\n' 
```

给出错误`UnicodeEncodeError: 'charmap' codec can't encode characters in position 16-24: character maps to <undefined>`。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T05:28:31.600

您要做的可能是**解码**而不是**编码**响应。

一个非常简短的解释是为什么 http 服务器不知道如何发送 unicode 字符，只是字节。因此，它使用像 utf-8 这样的*编码*将这些字符转换为字节。当您收到来自服务器的响应时，您会收到此字节块，如果您想将其转换回 unicode 字符列表（基本上是 python 中的*unicode*对象），则必须对其进行解码。

更令人困惑的是，使用 utf-8 时，较低频谱的 ascii 字符（代码点 < 127）与较低的 unicode 代码点完全相同。一种情况，其中 unicode 代码点既编码相同，又适合每个字符可以用单个字节表示的范围。

希望这会有所帮助。

# android - 如何在代理后面的模拟器中的 Android WebView 中加载远程 html 文件

> ID：13757302
> 
> 赞同：0
> 
> 时间：2012-12-07T05:13:37.093
> 
> 标签：android, webview, proxy

我正在尝试在代理后面的模拟器中的 Android Webview 中加载远程 html 文件。如果我尝试在 Android 模拟器浏览器中加载相同的远程 html 文件，它加载正常没有任何问题。所以在此之前我做了代理使用以下路径在模拟器中设置。Settings->Wireless&Networks->Mobile Networks->Access Point Names->Telkila 然后我配置了我的代理、端口、用户名和密码。这样 Android Emulator Browser 就可以使用我配置的代理设置，但不能使用 Android 应用程序在模拟器中运行的（.apk）。有帮助吗？

提前致谢。

文卡特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:19:48.963

在你的 android 活动 onCreate() 中尝试这样的事情

```
System.getProperties().put("proxySet", "true");
            System.getProperties().put("proxyHost", "127.0.0.1");
            System.getProperties().put("proxyPort", "8000"); 
```

只需根据您的情况输入代理主机和端口的值。

# pusher - 如何调试“4005 Path Not Found”错误？

> ID：13757303
> 
> 赞同：7
> 
> 时间：2012-12-07T05:13:42.960
> 
> 标签：pusher

我正在尝试将 Pusher 与使用backbone.js 的Web 应用程序集成。我正在关注 Pusher 文档中的 Pusher with Backbone 指南。

所以我在应用程序启动时看到这个错误在 Web 控制台中弹出

```
Pusher : Error : {"type":"PusherError","data":{"code":4005,"message":"Path not found"}} 
```

这条找不到的“路径”是什么？我在 Pusher 文档中一无所获。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-10T13:44:18.497

4005 错误通常意味着您使用的 WebSocket URL 没有识别要连接的应用程序。

就 Pusher JavaScript 库的使用而言，这意味着您可能提供了一个空字符串作为`app_key`构造`Pusher`函数。

```
var pusher = new Pusher(''); 
```

你可以在这里看到这个：http: [//jsbin.com/evulaj/1/edit](http://jsbin.com/evulaj/1/edit)

打开 JavaScript 控制台以查看错误。您还可以`app_key`通过检查来检查设置的值`pusher.key`。

*注意：我很欣赏这个错误有点神秘。我看看我们能不能解决这个问题*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-27T02:25:15.203

在我的情况下，`wsHost: process.env.MIX_PUSHER_WS_HOST`给出一个空值，并通过更改`.env`文件来修复它。

```
PUSHER_WS_HOST=my.host.com
MIX_PUSHER_WS_HOST="${PUSHER_WS_HOST}" 
```

或者你可以这样做：

```
wsHost: window.location.hostname 
```

# java - Scala 的 flatMap 的 Guava 等价物是什么？

> ID：13757306
> 
> 赞同：25
> 
> 时间：2012-12-07T05:14:03.843
> 
> 标签：java, scala, functional-programming, guava

浏览[https://github.com/google/guava/wiki/FunctionalExplained](https://github.com/google/guava/wiki/FunctionalExplained)我看到了像[transform](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/Lists.html#transform-java.util.List-com.google.common.base.Function-)这样的操作，它将转换一个列表但保持相同的基数。如何执行导致不同基数的转换？例如（伪代码）`List(1,2,3).transform(i => List(i, i))`->`List(1,1,2,2,3,3)`

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-07T05:51:57.950

从版本 13 开始，有[`transformAndConcat`](http://google.github.io/guava/releases/13.0/api/docs/com/google/common/collect/FluentIterable.html#transformAndConcat(com.google.common.base.Function)).[`FluentIterable`](http://google.github.io/guava/releases/13.0/api/docs/com/google/common/collect/FluentIterable.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T05:24:16.130

我认为没有直接翻译，但`transform`后面[`concat`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/Iterables.html#concat-java.lang.Iterable...-)应该是等效的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T17:52:54.673

在[Eclipse Collections](https://www.eclipse.org/collections/)中，`collect()`相当于 Scala 的`map()`，[`flatCollect()`](https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/RichIterable.html#flatCollect-org.eclipse.collections.api.block.function.Function-)相当于 Scala 的`flatMap()`.

这是 flatCollect[与 Java 8](https://github.com/eclipse/eclipse-collections-kata/blob/solutions/company-kata/src/test/java/org/eclipse/collections/companykata/Exercise6Test.java#L79) Lambdas 的示例用法。

注意：我是 Eclipse Collections 的提交者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-12T20:34:03.110

不过要注意一件事：Scala 的 map 方法返回新集合，而 Guava 中的 transform() 方法返回原始集合的转换视图。这是一个非常微妙的区别。您需要确定“查看原始集合”是否适合您的上下文。

# javascript - Web 应用程序中的数字本地化

> ID：13757310
> 
> 赞同：27
> 
> 时间：2012-12-07T05:14:24.853
> 
> 标签：javascript, html, css, localization, cross-browser

如何在不更改字符代码的情况下设置[阿拉伯数字的变体？](http://en.wikipedia.org/wiki/Eastern_Arabic_numerals)

```
Eastern Arabic      ۰   ۱   ۲   ۳   ٦   ٥   ٤   ۷   ۸   ۹
Persian variant     ۰   ۱   ۲   ۳   ۴   ۵   ۶   ۷   ۸   ۹
Western Arabic      0   1   2   3   4   5   6   7   8   9 
(And other numeral systems) 
```

这是一个示例代码：

```
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
</head>
<body>

<div lang="fa">0123456789</div>
<div lang="ar">0123456789</div>
<div lang="en">0123456789</div>

</body>
</html> 
```

如何仅使用客户端技术（、、、）来做到`HTML`这`CSS`一点`JS`？
该解决方案应该对页面的 SEO 分数没有负面影响。

请注意，在 Windows 文本框（例如运行）中，数字会根据周围文本的语言正确显示。

另请参阅：[桌面应用程序中的数字本地化](https://stackoverflow.com/q/13899793/752603)

**注意：使用这个 PHP 包**[https://github.com/salarmehr/cosmopolitan](https://github.com/salarmehr/cosmopolitan)在后端非常容易对数字进行本地化

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-09T11:35:36.383

这是一种代码转换的方法：

```
// Eastern Arabic (officially "Arabic-Indic digits")
"0123456789".replace(/\d/g, function(v) {
    return String.fromCharCode(v.charCodeAt(0) + 0x0630);
});  // "٠١٢٣٤٥٦٧٨٩"

// Persian variant (officially "Eastern Arabic-Indic digits (Persian and Urdu)")
"0123456789".replace(/\d/g, function(v) {
    return String.fromCharCode(v.charCodeAt(0) + 0x06C0);
});  // "۰۱۲۳۴۵۶۷۸۹" 
```

**演示：http:** [//jsfiddle.net/bKEbR/](http://jsfiddle.net/bKEbR/)

这里我们使用 Unicode 移位，因为任何 Unicode 组中的数字都按照与拉丁组中相同的顺序放置（即`[0x0030 ... 0x0039]`）。因此，例如，对于阿拉伯语-印度语组移位是`0x0630`。

*请注意，*我很难区分东方字符，所以如果我弄错了（Unicode 中有许多不同的东方字符组），您总是可以使用任何在线 Unicode 表来计算移位。您可以使用官方[Unicode 字符代码图表](http://www.unicode.org/charts/)或[Unicode Online Chartable](http://www.utf8-chartable.de/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-16T03:30:07.047

必须决定这是外观问题还是转变问题。还必须确定这是一个涉及字符级语义还是数字表示的问题。以下是我的想法：

* * *

如果我们遇到 Unicode 没有分离出数字字符的代码的情况，那么这个问题将具有完全不同的语义。然后，适当地显示不同的字形只需使用适当的字体即可。另一方面，如果不更改字体，就不可能像我在下面所做的那样简单地写出不同的字符。（这种情况并不完全完美，因为字体不一定涵盖 16 位 Unicode 集的整个范围，更不用说 32 位 Unicode 集了。）

```
9, ٩ (Arabic), ۹ (Urdu), &#29590; (Chinese, complex), ๙ (Thai), ௯ (Tamil) etc. 
```

现在，假设我们接受 Unicode 语义，即 '9' 、'٩' 和 '۹' 是*不同的*字符，我们可以得出结论，问题不在于外观（本应属于 CSS 的范围），而在于转换——稍后对此有一些想法，现在让我们假设是这种情况。当关注字符级语义时，情况与字母表和字母的情况并没有太大的不同。例如，希腊语“α”和拉丁语“a”被认为是不同的，尽管拉丁字母表与 Euboea 中使用的希腊字母表几乎相同。或许更引人注目的是，对应的大写变体“Α”（希腊语）和“A”（拉丁语）在几乎所有支持这两种脚本的字体中在视觉上都是相同的，

在陈述了基本规则之后，让我们看看如何通过忽略它们来回答问题，特别是忽略（字符级）Unicode 语义。

**（可怕、讨厌和不向后兼容） 解决方案：** 使用将“0”到“9”映射到所需字形的字体。我不知道有任何这样的字体。你必须使用@font-face 和一些被适当破解的字体来做你想做的事。

不用说，我不是特别喜欢这个解决方案。但是，这是我知道的唯一简单的解决方案，它可以在服务器或客户端“不更改字符代码”的情况下完成问题。（从技术上讲，我在下面提出的 Cufon 解决方案也不会更改字符代码，但它所做的是将文本绘制到画布中要复杂得多，并且还需要调整开源代码）。

* * *

**注意：** 任何转换解决方案，即任何更改 DOM 并将“0”到“9”范围内的字符替换为，例如，它们的阿拉伯等价物的解决方案都会破坏希望数字以原始形式出现在 DOM 中的代码。当然，在讨论表单和输入时，这个问题是最糟糕的。

采用转型方法的答案示例是：

```
 $("[lang='fa']").find("*").andSelf().contents().each(function() {
      if (this.nodeType === 3) 
     {
        this.nodeValue = this.nodeValue.replace(/\d/g, function(v) {
            return String.fromCharCode(v.charCodeAt(0) + 0x0630);
       });
    }
 }); 
```

注意：代码取自 VisioN 的第二个 jsFiddle。如果这是您喜欢此答案的唯一部分，请确保您支持 VisioN 的答案，而不是我的！！！！:-)

这有两个问题：

1.  它与 DOM 混淆，因此可能会破坏过去假设它会找到“标准”形式的数字（使用数字“0”到“9”）的代码。请参阅此处的问题：http: [//jsfiddle.net/bKEbR/10/](http://jsfiddle.net/bKEbR/10/) 例如，如果您有一个字段包含用户输入的一些整数的总和，那么当您尝试获取它的值时，您可能会感到惊讶。 ..
2.  `input`它没有解决(and `textarea`) 元素内部发生的事情的问题。如果输入字段初始化为“42”，它将零售该值。这可以很容易地解决，但随后存在实际输入的问题......人们可能会决定在字符出现时更改字符，在字符更改时转换值等等。如果进行了这样的转换，那么客户端和服务器端都需要准备好处理不同类型的数字。如果输入非标准格式的数字，Javascript、jQuery 甚至 Globalize（客户端）和 ASP.NET、PHP 等（服务器端）中开箱即用的内容将会中断......

一个稍微更全面的解决方案（还要注意 input/textarea 元素，包括它们的初始值和用户输入）可能是：

```
//before the DOM change, test1 holds a numeral parseInt can understand
alert("Before: test holds the value:" +parseInt($("#test1").text()));

function convertNumChar(c) {
   return String.fromCharCode(c.charCodeAt(0) + 0x0630);
}

function convertNumStr(s) {
    return s.replace(/\d/g, convertNumChar);
}

//the change in the DOM
$("[lang='fa']").find("*").andSelf().contents()
    .each(function() {
        if (this.nodeType === 3)        
           this.nodeValue = convertNumStr(this.nodeValue);      
    })
    .filter("input:text,textarea")
    .each(function() {
         this.value = convertNumStr(this.value)
     })
     .change(function () {this.value = convertNumStr(this.value)});      

//test1 now holds a numeral parseInt cannot understand
alert("After: test holds the value:" +parseInt($("#test1").text())) 
```

整个 jsFiddle 可以在这里找到：http: [//jsfiddle.net/bKEbR/13/](http://jsfiddle.net/bKEbR/13/)

不用说，这只是部分地解决了上述问题。客户端和/或服务器端代码必须识别非标准数字并将它们适当地转换为标准格式或它们的实际值。

这不是几行javascript就能解决的简单问题。这只是这种可能转换的最简单情况，因为需要应用简单的字符到字符映射才能从一种数字形式转换到另一种形式。

* * *

另一个基于外观的方法：

**基于 Cufon 的解决方案（Overkill、Non-Backwards Compatible（需要画布）等）：** 可以相对轻松地调整像 Cufon 这样的库来完成设想的工作。Cufon 可以做它的事情并在画布对象上绘制字形，除了调整将确保当元素具有特定属性时，将使用所需的字形而不是通常选择的字形。Cufon 和其他同类库倾向于将元素添加到 DOM 并更改现有元素的外观但不触及其文本，因此不应该应用转换方法的问题。事实上，有趣的是，虽然（经过调整的）Cufon 就整体 DOM 而言提供了一种明显的转型方法，但就其思维方式而言，它是一种基于外观的解决方案；我将其称为混合解决方案。

**替代混合解决方案：** 使用阿拉伯文内容创建新的 DOM 元素，隐藏旧元素但保持其 id 和内容不变。将阿拉伯语内容元素与其对应的隐藏元素同步。

* * *

让我们尝试跳出框框思考（框框是当前的网络标准）。

某些字符是独一无二的这一事实并不意味着它们是不相关的。而且，这并不一定意味着它们的区别是一种外观。例如，“a”和“A”是同一个字母；在某些情况下，它们被认为是相同的，而在另一些情况下则不同。有了，Unicode（以及之前的 ASCII 和 ISO-Latin-1 等）的区别意味着需要付出一些努力来克服它。CSS 提供了一种快速简便的方法来更改字母的大小写。例如，`body {text-transform:uppercase}`会将页面正文中的文本中的所有字母转换为大写。请注意，这也是外观更改而不是转换的情况：body 元素的 DOM 不会改变，只是呈现方式。

**注意：**如果 CSS 支持类似的东西`numerals-transform: 'ar'`，那么它可能是问题的理想答案。

但是，在我们急于告诉 CSS 委员会添加此功能之前，我们可能需要考虑一下这意味着什么。在这里，我们正在解决一个小问题，但他们必须处理大局。

输出：这个数字转换功能是否允许“10”（2 个字符）显示为十（中文，简单）、拾（中文，复杂）、X（拉丁文）（全 1 个字符）等等'ar'，给出了适当的论据？

输入：这个数字转换特征会将“十”（中文，简单）转换为对应的阿拉伯语，还是只是针对“10”？它会以某种方式巧妙地检测到“MMXI”（2012 年的拉丁数字）是一个数字而不是一个单词并相应地转换它吗？

数字表示的问题并不像人们想象的那么简单。

* * *

那么，这一切给我们留下了怎样的印象：

1.  没有简单的基于演示的解决方案。如果将来出现，它将无法向后兼容。
2.  现在可以有一个变革性的“解决方案”，但即使这也适用于我所做的表单元素（http://jsfiddle.net/bKEbR/13/），也需要服务器端和客户端对所使用的非标准格式的认识。
3.  可能有复杂的混合解决方案。它们很复杂，但在某些情况下提供了基于表示的方法的一些优点。

一个 CSS 解决方案会很好，但实际上当一个人看到涉及其他数字系统（与标准系统之间的简单转换较少）、小数点、符号等的大图时，问题是大而复杂的。

归根结底，我认为现实且向后兼容的解决方案将是 Globalize（和服务器端等效项）的扩展，可能带有一些额外的代码来处理用户输入。这个想法是，这在字符级别不是问题（因为一旦你考虑大局就不是问题）并且必须以与处理千位和小数分隔符的差异相同的方式处理它：作为格式化/解析问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T20:56:50.593

我一直在研究一种通用的网页本地化技术，它不仅仅是数字（它类似于 .po 文件）

本地化文件很简单（如果需要，字符串*可以*包含 html）

```
/* Localization file - save as document_url.lang.js ... index.html.en.js: */
items=[
{"id":"string1","value":"Localized text of string1 here."},
{"id":"string2", "value":"۰ ۱ ۲ ۳ ۴ ۵ ۶ ۷ ۸ ۹ "}
];
rtl=false; /* set to true for rtl languages */ 
```

这种格式对于翻译人员（或机械土耳其人）来说非常有用

和一个基本的页面模板

```
<html><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<head><title>My title</title>
<style>.txt{float:left;margin-left:10px}</style>
</head>
<body onload='setLang()'>
<div id="string1" class="txt">This is the default text of string1.</div>
<div id="string2" class="txt">0 1 2 3 4 5 6 7 8 9 </div>
</body></html>
<script>
   function setLang(){
      for(var i=0;i<items.length;i++){
         term=document.getElementById(items[i].id)
         if(term)term.innerHTML=items[i].value
         if(rtl){  /* for rtl languages */ 
            term.style.styleFloat="right"
            term.style.cssFloat="right"
            term.style.textAlign="right"
         }
      }
   }
   var lang=navigator.userLanguage || navigator.language;
   var script=document.createElement("script");
   script.src=document.URL+"-"+lang.substring(0,2)+".js"
   var head = document.getElementsByTagName('head')[0]
   head.insertBefore(script,head.firstChild)
</script> 
```

我试图保持它非常简单，但覆盖尽可能多的语言环境，因此可能需要额外的 css（我不得不承认缺乏对 rtl 语言的接触，因此可能需要设置更多样式）

如果您知道哪些字体可以很好地支持您的字符代码，我确实有字体检查代码会很有用

```
function hasFont(f){
    var s=document.createElement("span")
    s.style.fontSize="72px"
    s.innerHTML="MWMWM"
    s.style.visibility="hidden"
    s.style.fontFamily=[(f=="monospace")?'':'monospace','sans-serif','serif']
    document.body.appendChild(s)
    var w=s.offsetWidth
    s.style.fontFamily=[f,'monospace','sans-serif','serif']
    document.body.lastChild=s
    return s.offsetWidth!=w
} 
```

用法：`if(hasFont("myfont"))myelement.style.fontFamily="myfont"`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T09:16:04.723

我想最好的方法是使用 a**`regexp`**来搜索应该通过将 a 添加**`class name`**到需要不同数字集的 div 来更改哪些数字字符。

你可以很容易地使用 jQuery 来做到这一点。

[**jsfiddle 演示**](http://jsfiddle.net/YHbP8/)

* * *

**编辑：**如果您不想使用变量，请查看此修改后的演示：

[**jsfiddle 演示 2**](http://jsfiddle.net/8XUfW/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-09T10:16:10.650

你可以试试这个： 这是 CSS 源代码：

```
@font-face
 {
   font-family: A1Tahoma;
    src: url(yourfont.eot) format('eot')
    , url(yourfont.ttf) format('truetype')
   , url(yourfont.woff) format('woff')
    , url(yourfont.svg) format('svg');
}

p{font-family:A1Tahoma; font-size:30px;} 
```

这是 HTML 代码：

```
<p>سلام به همه</p>

<p>1234567890</p> 
```

最后你会看到你的结果。记住 4 种字体类型可用于任何浏览器，如 IE、FIREFOX 等。
“salam reza , to mituni in karo anjam bedi ta un fonte dekhaheto be site ezafe koni。”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-29T20:15:30.983

一个新的（迄今为止）和简单的 JS 解决方案是使用[Intl.NumberFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat)。它支持数字本地化、格式变化以及本地货币（有关更多示例，请参阅文档）。

使用与 MDN 自己的非常相似的示例：

```
const val = 1234567809;
console.log('Eastern Arabic (Arabic-Egyptian)', new Intl.NumberFormat('ar-EG').format(val));
console.log('Persian variant (Farsi)',new Intl.NumberFormat('fa').format(val));
console.log('English (US)',new Intl.NumberFormat('en-US').format(val));
```

Intl.NumberFormat 似乎也支持字符串数值，并指示它何时不是本地语言中的数字。

```
const val1 = '456';
const val2 = 'Numeric + string example, 123';
console.log('Eastern Arabic', new Intl.NumberFormat('ar-EG').format(val1));
console.log('Eastern Arabic', new Intl.NumberFormat('ar-EG').format(val2));
console.log('Persian variant',new Intl.NumberFormat('fa').format(val1));
console.log('Persian variant',new Intl.NumberFormat('fa').format(val2));
console.log('English',new Intl.NumberFormat('en-US').format(val1));
console.log('English', new Intl.NumberFormat('en-US').format(val2));
```

对于[语言环境标识符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/Locale)（传递给`NumberFormat`构造函数的指示语言环境的字符串），我尝试了上面的值，它们看起来很好。我尝试找到所有可能值的列表，并通过 MDN 找到了[这个文档](https://www.unicode.org/reports/tr35/#unicode_language_subtag_validity)和[这个](https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry)可能有用的列表。

我不熟悉 SEO，因此不确定这如何回答这部分问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-09T15:51:37.840

I have created a jquery plugin that can convert Western Arabic numbers to Eastern ones (Persian only). But it can be extended to convert a number to any desired numeral system. My jQuery plugin has two advantages:

1.  Detect and convert numbers properly in child nodes.
2.  Detect and convert point characters appropriately.

You can clone this plugin from [github](https://github.com/aghaomid/persianumber). My plugin code:

```
(function( $ ){
  $.fn.persiaNumber = function() {
      var groupSelection = this;
      for(i=0; i< groupSelection.length ; i++){
          var htmlTxt = $(groupSelection[i]).html();
          var trueTxt = convertDecimalPoint(htmlTxt);
          trueTxt = convertToPersianNum(trueTxt);
          $(groupSelection[i]).html(trueTxt);
      }
function convertToPersianNum(htmlTxt){
          var otIndex = htmlTxt.indexOf("<");
          var ctIndex = htmlTxt.indexOf(">");
          if(otIndex == -1 && ctIndex == -1 && htmlTxt.length > 0){
            var trueTxt = htmlTxt.replace(/1/gi, "۱").replace(/2/gi, "۲").replace(/3/gi, "۳").replace(/4/gi, "۴").replace(/5/gi, "۵").replace(/6/gi, "۶").replace(/7/gi, "۷").replace(/8/gi, "۸").replace(/9/gi, "۹").replace(/0/gi, "۰");
            return trueTxt;
          }
              var tag = htmlTxt.substring(otIndex,ctIndex + 1);
              var str = htmlTxt.substring(0,otIndex);
              str = convertDecimalPoint(str);
              str = str.replace(/1/gi, "۱").replace(/2/gi, "۲").replace(/3/gi, "۳").replace(/4/gi, "۴").replace(/5/gi, "۵").replace(/6/gi, "۶").replace(/7/gi, "۷").replace(/8/gi, "۸").replace(/9/gi, "۹").replace(/0/gi, "۰");
              var refinedHtmlTxt = str + tag;
              var htmlTxt = htmlTxt.substring(ctIndex + 1, htmlTxt.length);
              if(htmlTxt.length > 0 && otIndex != -1 || ctIndex != -1){
                  var trueTxt = refinedHtmlTxt;
                  var trueTxt =  trueTxt + convertToPersianNum(htmlTxt); 
              }else{
                    return refinedHtmlTxt+ htmlTxt;
              }
              return trueTxt;         

    }
function convertDecimalPoint(str){
    for(j=1;j<str.length - 1; j++){
        if(str.charCodeAt(j-1) > 47 &&  str.charCodeAt(j-1) < 58 && str.charCodeAt(j+1) > 47 &&  str.charCodeAt(j+1) < 58 && str.charCodeAt(j) == 46)
            str = str.substring(0,j) + '٫' + str.substring(j+1,str.length);
    }
    return str;
}
};
})( jQuery ); 
```

[http://jsfiddle.net/VPWmq/2/](http://jsfiddle.net/VPWmq/2/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-13T12:22:16.830

如果有人正在寻找使用[此](https://stackoverflow.com/a/13787021/8607640)代码转换方法本地化为孟加拉数字的人：

```
 $("[lang='bang']").text(function(i, val) {
        return val.replace(/\d/g, function(v) {
            return String.fromCharCode(v.charCodeAt(0) + 0x09B6);
        });
    }); 
```

您也可以访问[这里](http://codeinclude.blogspot.com/2012/09/bangla-ascii-code.html)查看孟加拉语的 ASCII 十六进制代码的 UNICODE

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-21T07:58:33.233

您可以通过这种方式转换数字：

```
const persianDigits = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
const number = 44653420;

convertedNumber = String(number).replace(/\d/g, function(digit) {
    return persianDigits[digit]
})
console.log(convertedNumber) // ۴۴۶۵۳۴۲۰ 
```

# c# - 如何将哈希密码存储在数据库中

> ID：13757312
> 
> 赞同：1
> 
> 时间：2012-12-07T05:14:50.637
> 
> 标签：c#, sql, hash, passwords, sha1

我正在尝试将散列密码存储在 sql express 数据库中。但我无法做到这一点。这是我的代码：

```
SHA1CryptoServiceProvider sha = new SHA1CryptoServiceProvider();

byte[] encode = sha.ComputeHash(Encoding.ASCII.GetBytes(pass));

string cmd = "insert into tblLogin (username,password,email,state,active) values ('"+name+"',"+encode+",'"+email+"','"+state +"',"+ active + ")" ; 
```

在数据库中，我将密码保存为 varbinary。

在这里我的问题是我将编码的值作为 System.Byte[] 但不是散列值。我该怎么做，我试图找到并且我得到了如何散列密码而不是如何存储密码。

这里我的主要问题是如何构造插入查询并将 Byte[] 存储到数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T05:17:32.883

将其保存为 varchar，而不是 varbinary。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:01:06.517

```
var provider = new SHA1CryptoServiceProvider(salt);
byte[] bytes = Encoding.UTF8.GetBytes(input);
string result = Convert.ToBase64String(provider.ComputeHash(bytes)); // store it 
```

# resize - ZOOMOOZ：有没有办法将窗口调整大小绑定到 zoomTarget？

> ID：13757313
> 
> 赞同：1
> 
> 时间：2012-12-07T05:14:52.260
> 
> 标签：resize, window, bind, zoomooz

使用 zoomooz.js 脚本时，要启用对目标的缩放，我们只需添加 zoomTarget 类：

前任。`<div id="container" class="zoomTarget"></div>`

但是，缩放只会在单击“容器”时发生。调整浏览器窗口大小后，有没有办法自动缩放到目标“容器”？

可能是什么`$(window).resize(function(){ $("#container").zoomTarget(); });`？

# excel - Excel VBA：从左侧返回第一个未隐藏的列？

> ID：13757314
> 
> 赞同：1
> 
> 时间：2012-12-07T05:15:02.543
> 
> 标签：excel, vba

有没有办法获取第一个未隐藏列的列号？

> 因此，如果 A 列被隐藏，则返回 2。
> 如果 A 和 B 列被隐藏，则返回 3。
> 如果 A 和 C 被隐藏，则返回 2，以此类推。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T05:48:21.900

没有循环

*更新：没有处理最左边的列被隐藏的情况。如果无细胞测试是多余的，那么 Tmdean 的较短解决方案是优越的*

```
 Sub FirstNonHidden()
Dim rng1 As Range
Set rng1 = Cells.SpecialCells(xlCellTypeVisible)
If rng1.Column <> 1 Then
MsgBox rng1.Areas(1).Column
Else
MsgBox "No hidden cells"
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T05:34:16.463

```
Sub test()

    Dim ColCounter As Integer

    ColCounter = 1
    Do While ColCounter > 0 And ColCounter < 66536
      If Sheet1.Columns(ColCounter).Hidden = False Then
           MsgBox (ColCounter)
           Exit Do
      End If
      ColCounter = ColCounter + 1
    Loop

End Sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T05:55:23.203

最简单的方法可能是

```
Dim column_num As Long
column_num = ActiveSheet.UsedRange.SpecialCells(xlCellTypeVisible).Cells(1).Column 
```

不过，使用循环会更有效，就像 bhuang3 的解决方案一样，但它可以变得更简单一些。

```
Dim cursor As Range, column_num As Long
Set cursor = Range("A1")
Do Until cursor.ColumnWidth > 0
    Set cursor = cursor.Offset(0, 1)
Loop

column_num = cursor.Column 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T05:30:58.237

试试这个

```
ActiveSheet.Cells.SpecialCells(xlCellTypeLastCell).Offset(1, 0).End(xlToLeft).Column 
```

编辑

证明确实有效 ![在此处输入图像描述](../Images/1682f39e19de44062e231911d961b9ec.png)

# titanium - 在 tableview 行上打开一个新窗口单击钛

> ID：13757315
> 
> 赞同：1
> 
> 时间：2012-12-07T05:15:07.317
> 
> 标签：titanium, tableview

我正在尝试通过单击钛表视图中的一行来打开一个新窗口。

这是我的代码，

```
function listpage(){

   var tabgroup=Ti.UI.createTabGroup();

   var win = Ti.UI.createWindow({
      title:'Listpage',
      backgroundColor:'#fff'    
   });

   var dataArray = [{
            title:'Sunday',
            hasChild:true,
            test:'detail'}];

   for(var i=0;i<dataArray.length;i++){
        dataArray[i].color = '#000';
        dataArray[i].font  = {fontWeight:'bold',fontSize:20};
   }     

   var tableview=Ti.UI.createTableView({
       data:dataArray   
   });

    tableview.addEventListener('click',function(e){
       if(e.rowData){
           Ti.API.info(e.rowData.title);    

           var winEvent = Titanium.UI.createWindow({
               backgroundColor:'#fff',  
               url:e.rowData.test
           });
          winEvent.open({animation:true});

       }    
   });

   win.add(tableview);

   win.open();

} 
```

detail.js 代码：

```
var self = Ti.UI.createWindow({
    title:'Detail',
    color:'#000',
    backgroundColor:'white'
});

var label = Ti.UI.createLabel({
    text:'Hai',
    color:'#000'
});
self.add(label); 
```

如何通过单击 tableview 行打开 detail.js 窗口。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:16:28.120

Surendra，这与您的问题相似。当您单击每一行时，它会打开一个窗口。

代码是

```
var wndHome = Ti.UI.createWindow({
     backgroundColor : 'white'
});

var tableView = Ti.UI.createTableView({
     top : 0
});

var tabledata = [];
for(var i = 0 ; i < 10; i++){
    var row = Ti.UI.createTableViewRow({
        title : 'Title of window',
        url   : 'details.js'
    });
    tabledata.push(row);
}
tableView.data = tabledata;
wndHome.add(tableView);
wndHome.open();

tableView.addEventListener('click', function(e){
    var wndNewWindow = Ti.UI.createWindow({
        backgroundColor : '#999966',
        url             : e.rowData.url
    });

    wndNewWindow.open();
}); 
```

**详细信息.js 文件**

```
var self = Ti.UI.currentWindow;

var label = Ti.UI.createLabel({
    text:'Hai',
    color:'#000'
});
self.add(label); 
```

这里我给出了 details.js 的 url。如果要使用不同的窗口，请将文件名保存在数组中，并在创建 tableViewRow 时，只需将数组元素添加为 url（例如：）`fileArray = ['file1.js', 'file2.js','file3.js'];`。

*试试这个并根据您的要求更改您的代码。*

# android - 如何使用 AsyncTask 从类中返回视图

> ID：13757318
> 
> 赞同：0
> 
> 时间：2012-12-07T05:15:33.027
> 
> 标签：android, android-asynctask, android-fragments, android-view

我有一个扩展 Fragment 的类（如下所示）。现在，当我创建对象时，我需要我的类将视图返回给 Other 类。一切正常，但我需要这个类在后台线程中做这些事情。我也使用了 ASYNC 任务，但我无法创建 ASYNC 任务来返回视图。任何人都可以帮忙吗？？

MapFragment.java

```
public class MapsFragment extends Fragment 
{  
    MapView map;
    LayoutInflater inflater_;
    ViewGroup container_;
    View layout;

    @Override 
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {  
        inflater_=inflater;
        container_=container;
        super.onCreate(savedInstanceState);
        layout = inflater.inflate(R.layout.fragment_maps, container, false);
        map = (MapView) layout.findViewById(R.id.mapView);
        return (LinearLayout) layout;  
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:56:56.827

我不具体知道为什么要将视图传递给 AsyncTask，但这是一种基本方法：

```
public class MyAsync extends AsyncTask<Void, Void, Void> {
    private View view;

    public MyAsync(View view) {
        this.view = view;
    }

    @Override
    protected Void doInBackground(Void... params) {
        // Do something, but not with view
        return null;
    }

    @Override
    protected void onPostExecute(Void v) {
        // You can alter view here or in the other methods with UI access
        view.setVisibility(View.GONE);
    }
} 
```

如果这种方法不适用于您想要做的事情，您也可以使用自己的回调。

# facebook - 在开发 Facebook 应用程序之前要确保什么？

> ID：13757319
> 
> 赞同：0
> 
> 时间：2012-12-07T05:15:39.627
> 
> 标签：facebook, facebook-graph-api, permissions

我正在开发 facebook 应用程序（游戏）。谁能告诉我在开发 facebook 应用程序之前要确保什么。喜欢：

*   我们是否需要为 facebook 应用程序存储访问令牌。
*   基本的 Facebook 应用程序需要多少权限。

以及我们必须做的任何其他事情。我很困惑，所以我只想在启动 facebook 应用程序之前清除。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:59:58.840

首先，您需要获得一个 facebook 开发者帐户，您将从那里获得您的访问令牌和应用程序 ID，所有您需要的，我会建议您好好看看[FacebbokDeveloperWebSite](https://developers.facebook.com/)

希望这是有道理的

问候

# java - 如何在 Java 中使用匿名类重载方法？

> ID：13757320
> 
> 赞同：2
> 
> 时间：2012-12-07T05:15:44.947
> 
> 标签：java, overriding, overloading, anonymous-class

我有一个类 Action，它有一个名为 doAction() 的方法。此方法的存在只是为了覆盖我添加到名为 allActions 的操作列表中的每个新操作。

```
public void doAction() {
    System.out.println("Overload this method.");
} 
```

操作列表存储在以下列表中：

```
public static List<Action> allActions = new ArrayList<Action>(); 
```

并通过如下调用添加到此列表中：

```
allActions.add(
    new Action(id){
        public void doAction(Word w1, Word w2) {
            //perform some action
        }
    }
); 
```

但是这段代码对我不起作用。当我尝试从 allActions 列表中访问覆盖的 doAction() 方法时，它只执行默认方法。

我怀疑问题在于 allActions 是 Action 对象的列表，所以当匿名类被添加到列表时，类型可能会从匿名类中更改，并恢复为默认方法。

关于如何维护 Action 类的不同匿名版本列表的任何想法？我希望能够根据赋予操作的 id 调用这些不同的 doAction() 方法。

顺便说一句，这是我第一次遇到匿名类。我*想*我理解这个概念，但实际使用它们是另一回事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T05:17:46.560

你正在使用`public void doAction(Word w1, Word w2)`，但你有`public void doAction()`父母。所以父方法不会被覆盖。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T05:25:41.347

您实际上**正在**重载方法`doAction()`。但我怀疑您可能混淆了*超载*和*覆盖*这两个词。

要重载方法，请使用不同数量或类型的参数。这允许相同的方法根据您**如何**调用它（即使用什么参数）来做不同的事情。

[超载信息](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

`super`要覆盖一个方法，您需要使用相同数量和类型的参数，并且您需要返回与被覆盖的 ( ) 方法相同的类型。这允许相同的方法根据**您**调用它的位置（即从超类或子类）执行不同的操作。

[覆盖信息](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-07T05:50:07.570

```
public class Anonymous {
    static class Action {
        int id;
        Action(int id) {
            this.id = id;
        }
        void doAction(){
            System.out.println("Overload this method..."+ id);
        }
    }

    public static void main(String[] args) {
        ArrayList<Action> actions = new ArrayList<Action>();
        actions.add(new Action(0));
        actions.add(new Action(1){void doAction() {System.out.println("Overloading..."+ this.id);}});
        actions.add(new Action(2){void doAction() {System.out.println("Overloading..."+ this.id);}});
        for (Action a: actions) {
            a.doAction();
        }
    }
} 
```

该代码是关于如何维护 Action 类的不同匿名版本的列表的简单演示。它有效。

您遇到的问题是您实际上并没有覆盖该`doAction()`方法。相反，您重载了它。

> 当我尝试从 allActions 列表中访问覆盖的 doAction() 方法时，它只执行默认方法。

这是因为匿名类的所有对象都使用了`doAction()`从 Action 类继承的`doAction(Word w1, Word w2)`方法，而不是您错误地认为覆盖了原始方法的方法。

提示：当您覆盖某些方法时，请确保方法签名保持一致。一个例外是覆盖方法的返回类型可能是被覆盖方法的子类型的返回类型。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-07T05:36:11.273

您需要阅读覆盖方法和重载方法之间的区别。在重载中，您可以使用相同的方法名称但不同的参数列表和返回值，如果您愿意，可以将它们全部放在同一个类中。在覆盖时，您的子类具有完全相同的方法名称，而不是基类中的方法。

您可能正在寻找的是所有实现相同接口的类的列表。例如，使用一个名为 Action 的接口，该接口包含一个没有参数的方法和一个名为 execute() 的 void 返回类型。然后创建每个类并让它实现这个接口。在调用方法之前，使用构造函数或 getter 和 setter 设置对象的内部状态。execute 方法只是触发您想要针对您已经提供的状态发生的任何活动。然后将这些 Action 对象添加到接口类型列表中。

现在您所要做的就是遍历列表，为您从列表中检索到的每个 Action 引用调用 execute() 方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T06:15:31.240

> 但是这段代码对我不起作用。当我尝试从 allActions 列表中访问覆盖的 doAction() 方法时，它只执行默认方法。

实际上，您还没有覆盖该方法。您已经重载了它......并且调用该方法的代码显然使用了旧的方法签名。

仅当您将签名保留为您尝试覆盖的方法时才会发生覆盖；例如

```
new Action(id){
    public void doAction() {
        System.out.println("you just called the overload method");
    }
} 
```

* * *

（问题不在于您对匿名类的理解。而在于您对覆盖和重载之间的区别的理解......以及在这种情况下应该使用的理解。）

# svn - 如何找出 SVN 中新创建的 Tag 是否已更改或未更改？

> ID：13757325
> 
> 赞同：0
> 
> 时间：2012-12-07T05:16:45.077
> 
> 标签：svn

对于我的产品，我有几个组件。但是所有组件都不会一直变化。对于新版本，我从工作主干或分支（即使组件已更改或未更改）创建一个标签到 SVN。并在标签上进行构建。现在我想看看新创建的标签是否有代码更改。是否有任何 SVN 属性或有用的东西可以轻松找到？比较两个标签的修订号是一种解决方案，但这很难找出要使用哪个先前的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:23:21.533

如果您的组件是产品目录中的子目录，并且您始终标记产品的根目录，您可以区分两个标签 - 新标签和旧标签

`svn diff OLD-TAG-URL NEW-TAG-URL`*差异的任何输出的事实*将是变化的迹象，差异内容 - 实际的聚合变化

# android - 如何在android中使用第三方推送woosh发送推送通知

> ID：13757327
> 
> 赞同：3
> 
> 时间：2012-12-07T05:16:49.860
> 
> 标签：android

在我的应用程序中，我想使用第三方推送 woosh 发送推送通知。我正在使用 jar 文件。当我运行应用程序时，它显示注册状态和注册 ID，但如果我推送消息，它们不会显示在手机中。

```
 public class MainActivity extends FragmentActivity implements          SendTagsCallBack
          {
    private static final String SEND_TAGS_STATUS_FRAGMENT_TAG ="send_tags_status_fragment_tag";

    private static final String APP_ID = "554B5-9B410";
    private static final String SENDER_ID = "944240090087";

    private TextView mTagsStatus;
    private EditText mIntTags;
    private EditText mStringTags;
    private Button mSubmitTagsButton;
    private TextView mGeneralStatus;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        //NetworkUtils.useSSL = true;

        PushManager pushManager = new PushManager(this, APP_ID, SENDER_ID);
        pushManager.onStartup(this);

        mGeneralStatus = (TextView) findViewById(R.id.general_status);
        mTagsStatus = (TextView) findViewById(R.id.status);
        mIntTags = (EditText) findViewById(R.id.tag_int);
        mStringTags = (EditText) findViewById(R.id.tag_string);

        checkMessage(getIntent());

        mSubmitTagsButton = (Button) findViewById(R.id.submit_tags);
        mSubmitTagsButton.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                checkAndSendTagsIfWeCan();

            }
        });

        SendTagsFragment sendTagsFragment = getSendTagsFragment();
        mTagsStatus.setText(sendTagsFragment.getSendTagsStatus());
        mSubmitTagsButton.setEnabled(sendTagsFragment.canSendTags());
    }

    /**
     * Called when the activity receives a new intent.
     */
    public void onNewIntent(Intent intent)
    {
        super.onNewIntent(intent);

        checkMessage(intent);
    }

    @Override
    public void onStatusChange(int sendTagsStatus)
    {
        mTagsStatus.setText(sendTagsStatus);
    }

    @Override
    public void onTaskEnds()
    {
        mSubmitTagsButton.setEnabled(true);
    }

    @Override
    public void onTaskStarts()
    {
        mSubmitTagsButton.setEnabled(false);
    }

    private void checkAndSendTagsIfWeCan()
    {
        SendTagsFragment sendTagsFragment = getSendTagsFragment();

        if (sendTagsFragment.canSendTags())
        {
            sendTagsFragment
                    .submitTags(this, mIntTags.getText().toString().trim(), mStringTags.getText().toString().trim());
        }
    }

    /**
     * Will check PushWoosh extras in this intent, and fire actual method
     *
     * @param intent activity intent
     */
    private void checkMessage(Intent intent)
    {
        if (null != intent)
        {
            if (intent.hasExtra(PushManager.PUSH_RECEIVE_EVENT))
            {
                doOnMessageReceive(intent.getExtras().getString(PushManager.PUSH_RECEIVE_EVENT));
            }
            else if (intent.hasExtra(PushManager.REGISTER_EVENT))
            {
                doOnRegistered(intent.getExtras().getString(PushManager.REGISTER_EVENT));
            }
            else if (intent.hasExtra(PushManager.UNREGISTER_EVENT))
            {
                doOnUnregisteredError(intent.getExtras().getString(PushManager.UNREGISTER_EVENT));
            }
            else if (intent.hasExtra(PushManager.REGISTER_ERROR_EVENT))
            {
                doOnRegisteredError(intent.getExtras().getString(PushManager.REGISTER_ERROR_EVENT));
            }
            else if (intent.hasExtra(PushManager.UNREGISTER_ERROR_EVENT))
            {
                doOnUnregistered(intent.getExtras().getString(PushManager.UNREGISTER_ERROR_EVENT));
            }

            resetIntentValues();
        }
    }

    public void doOnRegistered(String registrationId)
    {
        mGeneralStatus.setText(getString(R.string.registered, registrationId));
    }

    public void doOnRegisteredError(String errorId)
    {
        mGeneralStatus.setText(getString(R.string.registered_error, errorId));
    }

    public void doOnUnregistered(String registrationId)
    {
        mGeneralStatus.setText(getString(R.string.unregistered, registrationId));
    }

    public void doOnUnregisteredError(String errorId)
    {
        mGeneralStatus.setText(getString(R.string.unregistered_error, errorId));
    }

    public void doOnMessageReceive(String message)
    {
        mGeneralStatus.setText(getString(R.string.on_message, message));

    }

    /**
     * Will check main Activity intent and if it contains any PushWoosh data, will clear it
     */
    private void resetIntentValues()
    {
        Intent mainAppIntent = getIntent();

        if (mainAppIntent.hasExtra(PushManager.PUSH_RECEIVE_EVENT))
        {
            mainAppIntent.putExtra(PushManager.PUSH_RECEIVE_EVENT, (String) null);
        }
        else if (mainAppIntent.hasExtra(PushManager.REGISTER_EVENT))
        {
            mainAppIntent.putExtra(PushManager.REGISTER_EVENT, (String) null);
        }
        else if (mainAppIntent.hasExtra(PushManager.UNREGISTER_EVENT))
        {
            mainAppIntent.putExtra(PushManager.UNREGISTER_EVENT, (String) null);
        }
        else if (mainAppIntent.hasExtra(PushManager.REGISTER_ERROR_EVENT))
        {
            mainAppIntent.putExtra(PushManager.REGISTER_ERROR_EVENT, (String) null);
        }
        else if (mainAppIntent.hasExtra(PushManager.UNREGISTER_ERROR_EVENT))
        {
            mainAppIntent.putExtra(PushManager.UNREGISTER_ERROR_EVENT, (String) null);
        }

        setIntent(mainAppIntent);
    }

    private SendTagsFragment getSendTagsFragment()
    {
        FragmentManager fragmentManager = getSupportFragmentManager();
        SendTagsFragment sendTagsFragment =
                (SendTagsFragment) fragmentManager.findFragmentByTag(SEND_TAGS_STATUS_FRAGMENT_TAG);

        if (null == sendTagsFragment)
        {
            sendTagsFragment = new SendTagsFragment();
            sendTagsFragment.setRetainInstance(true);
            fragmentManager.beginTransaction().add(sendTagsFragment, SEND_TAGS_STATUS_FRAGMENT_TAG).commit();
            fragmentManager.executePendingTransactions();
        }

        return sendTagsFragment;
    }

    @Override
    protected void onDestroy()
    {
        super.onDestroy();

        mIntTags = null;
        mStringTags = null;
        mTagsStatus = null;
        mSubmitTagsButton = null;
    }
}

     /*SendTagsFragment*/

          public class SendTagsFragment extends Fragment implements SendPushTagsCallBack
          {
    private final Object mSyncObject = new Object();

    private int mSendTagsStatus = R.string.status_ready;
    private AsyncTask<Void, Void, Void> mTask;

    public SendTagsFragment()
    {
    }

    public boolean canSendTags()
    {
        synchronized (mSyncObject)
        {
            return mTask == null;
        }
    }

    public void submitTags(final Context context, String tagInt, String tagString)
    {
        synchronized (mSyncObject)
        {
            if (!canSendTags())
            {
                return;
            }

            if (!goodAllInputData(tagInt, tagString))
            {
                return;
            }

            mSendTagsStatus = R.string.status_started;
            transfareTaskStartsToActivity();

            final Map<String, Object> tags = generateTags(tagInt, tagString);

            mTask = new AsyncTask<Void, Void, Void>()
            {
                @Override
                protected Void doInBackground(Void... params)
                {
                    PushManager.sendTags(context, tags, SendTagsFragment.this);

                    return null;
                }
            };
            mTask.execute((Void) null);
        }
    }

    public int getSendTagsStatus()
    {
        synchronized (mSyncObject)
        {
            return mSendTagsStatus;
        }
    }

    @Override
    public void taskStarted()
    {
        synchronized (mSyncObject)
        {
            mSendTagsStatus = R.string.status_started;
            transfareStatusToActivity();
        }
    }

    @Override
    public void onSentTagsSuccess(Map<String, String> stringStringMap)
    {
        synchronized (mSyncObject)
        {
            mSendTagsStatus = R.string.status_success;
            mTask = null;
            transfareStatusToActivity();
            transfareTaskEndsToActivity();
        }
    }

    @Override
    public void onSentTagsError(PushWooshException e)
    {
        synchronized (mSyncObject)
        {
            mSendTagsStatus = R.string.status_error;
            if (null != e)
            {
                e.printStackTrace();
            }
            mTask = null;
            transfareStatusToActivity();
            transfareTaskEndsToActivity();
        }
    }

    private boolean goodAllInputData(String tagInt, String tagString)
    {
        if (tagInt.length() == 0 && tagString.length() == 0)
        {
            mSendTagsStatus = R.string.status_init_error;
            transfareStatusToActivity();
            transfareTaskEndsToActivity();
            return false;
        }
        if (tagInt.length() != 0)
        {
            try
            {
                Integer.parseInt(tagInt);
            }
            catch (Exception e)
            {
                mSendTagsStatus = R.string.status_int_parse_error;
                transfareStatusToActivity();
                transfareTaskEndsToActivity();
                return false;
            }
        }
        return true;
    }

    private void transfareTaskStartsToActivity()
    {
        SendTagsCallBack sendTagsCallBack = (SendTagsCallBack) getActivity();
        if (null != sendTagsCallBack)
        {
            sendTagsCallBack.onTaskStarts();
        }
    }

    private void transfareTaskEndsToActivity()
    {
        SendTagsCallBack sendTagsCallBack = (SendTagsCallBack) getActivity();
        if (null != sendTagsCallBack)
        {
            sendTagsCallBack.onTaskEnds();
        }
    }

    private void transfareStatusToActivity()
    {
        SendTagsCallBack sendTagsCallBack = (SendTagsCallBack) getActivity();
        if (null != sendTagsCallBack)
        {
            sendTagsCallBack.onStatusChange(mSendTagsStatus);
        }
    }

    private Map<String, Object> generateTags(String tagInt, String tagString)
    {
        Map<String, Object> tags = new HashMap<String, Object>();

        if (tagInt.length() != 0)
        {
            tags.put("FavNumber", Integer.parseInt(tagInt));
        }
        if (tagString.length() != 0)
        {
            tags.put("Alias", tagString);
        }

        return tags;
    }
   }

I gave these permissions in Manifest file

 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.VIBRATE"/>

 <!--library-->
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET"/>

    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS"/>

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK"/>

    <!--
     Creates a custom permission so only this app can receive its messages.

     NOTE: the permission *must* be called PACKAGE.permission.C2D_MESSAGE,
           where PACKAGE is the application's package name.
    -->
    <permission
            android:name="com.pushwoosh.test.tags.sample.app.permission.C2D_MESSAGE"
            android:protectionLevel="signature"/>
    <uses-permission
            android:name="com.pushwoosh.test.tags.sample.app.permission.C2D_MESSAGE"/>

    <!-- This app has permission to register and receive data message. -->
    <uses-permission
            android:name="com.google.android.c2dm.permission.RECEIVE"/>

       <intent-filter>
                <action android:name="com.pushwoosh.test.tags.sample.app.MESSAGE"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>

        </activity>

        <activity android:name="com.arellomobile.android.push.PushWebview"/>

        <activity android:name="com.arellomobile.android.push.MessageActivity"/>

        <activity android:name="com.arellomobile.android.push.PushHandlerActivity"/>

        <!--
          BroadcastReceiver that will receive intents from GCM
          services and handle them to the custom IntentService.

          The com.google.android.c2dm.permission.SEND permission is necessary
          so only GCM services can send data messages for the app.
        -->
        <receiver
                android:name="com.google.android.gcm.GCMBroadcastReceiver"
                android:permission="com.google.android.c2dm.permission.SEND"
                >
            <intent-filter>
                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE"/>
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION"/>
                <category android:name="com.pushwoosh.test.tags.sample.app"/>
            </intent-filter>
        </receiver>

        <!--
          Application-specific subclass of PushGCMIntentService that will
          handle received messages.
        -->
        <service android:name="com.arellomobile.android.push.PushGCMIntentService"/>

        <!--
          Service for sending location updates
        -->
        <service android:name="com.arellomobile.android.push.GeoLocationService"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:04:51.383

在 1]Sender_Id 中输入您的“GCM App ID”，在 2]在 APP ID 中正确输入您的“PushWoosh APP KEY”，然后登录后进入 PushWoosh 网站，进入应用程序部分，然后输入您的消息。

# markdown - Gitlab Wiki 同页链接

> ID：13757329
> 
> 赞同：10
> 
> 时间：2012-12-07T05:16:52.050
> 
> 标签：markdown, gitlab

如何在 Gitlab wiki 中使用相同的页面链接？例如：

```
Contents

 - heading1 ---> this should move the page to heading 1
 - heading2
 - heading3
 - heading4

HEADING 1 
```

基本上，我正在尝试创建一个像 Wikipedia 这样的页面，您可以在其中使用目录导航单个页面。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T06:36:32.537

这已添加到此[拉取请求](https://github.com/gitlabhq/gitlabhq/pull/1147)中。

它生成`toc_x`锚点，x 为每个新标头递增。

如果您定义如下链接：

```
 [My link to third header](#toc_3) 
```

它会将您链接到当前页面的第三个标题（无论该标题是什么级别）。

# xcode - 如何在phonegap ios中将设备令牌从Xcode抓取到javascript？

> ID：13757330
> 
> 赞同：0
> 
> 时间：2012-12-07T05:16:52.097
> 
> 标签：xcode, cordova, apple-push-notifications

我正在使用 phonegap 为用户开发 IOS 应用程序，并且我为应用程序做一个推送通知，请按照此处的教程进行操作：

[http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/](http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/)

而且我在注册设备令牌时遇到问题。我想将 deviceToken 从 xcode 代码存储在 javascript 中，但我不知道为什么我使用 phonegap 开发应用程序的任何 Objective-C 语言。我尝试研究如何在 Xcode 中找到 deviceToken。然后示例显示在这里

```
 - (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
  {
    NSLog(@"My token is: %@", deviceToken);
  } 
```

我如何将 deviceToken 字符串变量转换为 javascript？可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:23:25.583

我编写了您正在使用的教程，其中有一个指向[github](https://github.com/hollyschinsky/PGPushNotificationSample/tree/master/platforms/ios)上的示例的链接，该示例实际上使用了带有 PhoneGap 的通用 PushNotification 插件。在示例代码中，您可以看到它使用插件传回设备令牌，以便您可以从 JavaScript 中存储它。

这是您在使用插件的示例中在 Objective-c 中引用的方法：

```
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    NSLog(@"Calling push notification next, my registered token is: %@", deviceToken);
    // Code for phonegap communication - calls this method in PushNotification.m
    PushNotification* pushHandler = [self.viewController getCommandInstance:@"PushNotification"];
    [pushHandler didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];
} 
```

它在以下调用 PushNotification 插件代码：

```
- (void)didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
    NSLog(@"didRegisterForRemoteNotificationsWithDeviceToken:%@", deviceToken);
    DLog(@"didRegisterForRemoteNotificationsWithDeviceToken:%@", deviceToken);

    NSString *token = [[[[deviceToken description] stringByReplacingOccurrencesOfString:@"   <"withString:@""]
                    stringByReplacingOccurrencesOfString:@">" withString:@""]
                   stringByReplacingOccurrencesOfString: @" " withString: @""];

    NSMutableDictionary *results = [PushNotification getRemoteNotificationStatus];
    [results setValue:token forKey:@"deviceToken"];   
    CDVPluginResult* pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsDictionary:results];
    [self writeJavascript:[pluginResult toSuccessCallbackString:[self.callbackIds valueForKey:@"registerDevice"]]];

} 
```

然后在 JavaScript 中，您可以从回调中引用它：

```
register: function() {
    var pushNotification = window.plugins.pushNotification;
    pushNotification.registerDevice({alert:true, badge:true, sound:true}, function(status) {
        app.myLog.value+=JSON.stringify(['registerDevice status: ', status])+"\n";
        app.storeToken(status.deviceToken);
    });
},
storeToken: function(token) {
    console.log("Token is " + token);
    ...
} 
```

查看完整的示例代码和[我的教程](http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/)以获取更多详细信息...

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T14:30:10.890

将以下两行代码放入您`didRegisterForRemoteNotificationsWithDeviceToken`的`AppDelegate.m`

```
NSString* jsString = [NSString stringWithFormat:@"var deviceToken = \"%@\";", deviceToken];
    [self.viewController.webView stringByEvaluatingJavaScriptFromString:jsString]; 
```

在 JS 文件中访问 DeviceToken 为

```
DeviceToken = (typeof deviceToken !== "undefined") ? deviceToken : ""; 
```

并根据您的要求使用 DeviceToken。

# iphone - 在 iPhone 中将 DateTime 从英语转换为西班牙语？

> ID：13757335
> 
> 赞同：1
> 
> 时间：2012-12-07T05:17:15.917
> 
> 标签：iphone, date, time, nslocale

有人知道如何将日期时间从英语转换为西班牙语吗？

例如转换：

```
December 07, 10:42AM 
```

进入

```
Diciembre 07, 10:42AM 
```

请帮我。如何转换这个？

提前致谢。

我试过这个：

```
 NSLocale *frLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"es"] autorelease];
 NSLog(@"%@", [frLocale displayNameForKey:NSLocaleIdentifier value:@"December 07, 10:42AM"]);
 // Value comes Null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T05:53:55.297

**像下面这样尝试它会有所帮助**

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]];
    [dateFormatter setDateFormat:@"MMMM dd',' hh:mma"];
    NSDate *dateTmp  = [dateFormatter dateFromString:@"December 07, 10:42AM"]; // getting date from string with english locale
    [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"es"]];
    [dateFormatter setAMSymbol:@"AM"]; // default AM symbol for spanish is a.m.
    [dateFormatter setPMSymbol:@"PM"]; // default PM symbol for spanish is p.m.
    NSString *strDate = [dateFormatter stringFromDate:dateTmp]; // getting string from date with spanish locale
    NSLog(@"%@",strDate); 
```

# php - 调试器不适用于 netbeans + wampserver

> ID：13757337
> 
> 赞同：2
> 
> 时间：2012-12-07T05:17:32.473
> 
> 标签：php, netbeans, windows-7, wamp, xdebug

我已经在 wamp+netbeans 中配置了 xdebug。它正确安装并在`phpinfo()`其中显示 xdebug 配置信息。但我仍然无法用它调试我的应用程序。

有时它会显示`waiting for connection`错误。有时它不会显示它，但也不会在给定的断点处停止。

```
Following is my configuration :

PHP Version 5.3.9

PHP Extension Build API20090626, TS, VC9

In D:\wamp\bin\php\php5.3.9\ext\php_xdebug-2.2.1-5.3-vc9.dll

xdebug version: (in phpinfo)
Version     2.2.1
IDE Key     netbeans-xdebug

In php.ini file

[xdebug]

zend_extension = "D:/wamp/php/ext/php_xdebug-2.2.1-5.3-vc9.dll"

xdebug.profiler_output_dir = "D:/wamp/tmp/xdebug"
xdebug.profiler_output_name = "cachegrind.out.%p"
xdebug.profiler_enable = 0
xdebug.profiler_append = 0
xdebug.extended_info = 1
xdebug.remote_enable = 1
xdebug.remote_handler = dbgp
xdebug.remote_mode = req
xdebug.remote_host = 127.0.0.1
xdebug.remote_port = 9000
xdebug.idekey = xdebug
xdebug.remote_log = "D:/wamp/tmp/xdebug/xdebug_remot.log"
xdebug.show_exception_trace = 0
xdebug.show_local_vars = 9
xdebug.show_mem_delta = 0
xdebug.trace_format = 0 
```

我几乎遵循了谷歌上的所有教程（也在 stackoverflow 上），我认为配置似乎是正确的。那么会是什么问题呢？

如果您想了解有关配置的更多信息，请告诉我。

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T14:26:41.017

我遇到了同样的问题，但是我在[这里](http://www.devside.net/wamp-server/netbeans-waiting-for-connection-netbeans-xdebug-issue)`waiting for connection`找到了一个非常好的分步教程，它解决了我的问题。希望这个链接对你也有帮助。

# javascript - google javascript api客户端和多个帐户

> ID：13757341
> 
> 赞同：3
> 
> 时间：2012-12-07T05:17:49.193
> 
> 标签：javascript, google-api, google-api-java-client

我正在尝试将 google apis 用于多个用户。有谁知道如何做到这一点。我希望允许用户添加不同的帐户并获取每个不同帐户的信息。google js 库似乎总是使用相同的登录用户。

# ruby-on-rails - 管理员使用设计创建/邀请新用户

> ID：13757352
> 
> 赞同：0
> 
> 时间：2012-12-07T05:18:36.873
> 
> 标签：ruby-on-rails, class, inheritance, methods

我有一个使用设计的简单 Rails 应用程序——因此（并且是一个新的 Rails 人），其中一些方法是超类和继承的，我认为......

如何在我的全新管理控制器中创建一些方法来 1）创建新用户和 2）编辑当前用户？

我觉得典型的 CRUD 操作会产生很多冗余代码，我想使用一些 rails 最佳实践来简单地允许管理员编辑多个配置文件（用户只能编辑他们自己的配置文件）并添加......

再说一次，我是 Rails 新手，所以慢慢说。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:29:08.023

设计 wiki 拥有配置/自定义设计所需的一切[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)，我知道这不是确切的答案，但它是一个很好的起点。

你看过活跃的管理员吗？[http://activeadmin.info/](http://activeadmin.info/) 与设计配合得很好，让您快速启动并运行管理框架

# jquery - ajax调用时以静态方法访问页面控件

> ID：13757356
> 
> 赞同：0
> 
> 时间：2012-12-07T05:18:49.620
> 
> 标签：jquery, asp.net, ajax, static, findcontrol

我通过 jquery 调用我的服务器端方法，并从该方法中我试图访问页面控制但给出错误。这是我的示例代码

```
 [WebMethod]
    public static findEvents(string PID)
    {
        Page page = HttpContext.Current.Handler as Page;
        Panel pn=(Panel)page.FindControl("hdContainer");
    }

but find control gives null error. please give any solution to find control in static method. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:34:22.100

我搜索过这样的东西。

静态方法不能引用实例引用。您需要从类中的其他实例方法传入对 HttpContext 或页面本身的引用。我认为您需要使用如下参数调用静态 Web 服务：

```
[WebMethod]
public static findEvents(string PID, System.Web.UI.Page page)
{        
    Panel pn=(Panel)page.FindControl("hdContainer");
} 
```

它可能会帮助你。

# html - 使用 Kendo UI HTML5 文本框搜索和过滤网格视图中的值

> ID：13757357
> 
> 赞同：8
> 
> 时间：2012-12-07T05:18:52.707
> 
> 标签：html, kendo-ui

如何根据我们在文本框中输入的值过滤网格过滤。

我在网格外面有一个文本框，我想根据我在文本框中输入的值搜索整个网格。第1步：

```
<input id="btnSearch" type="button" value="search" />
<div id="grid"> 
```

step2：从源绑定网格值

```
var gridResult = $("#grid").kendoGrid({
    dataSource: { data: database },
    scrollable: true,
    sortable: true,
    filterable: true,
    pageable: {
        input: true,
        numeric: false
    },
    columns: [
        {
            field: "id",
            title: "ID"
        },
        {
            field: "x",
            title: "x"
        },
        {
            field: "y"
        },
        {
            field: "z"
        },
        {
            field: "p"
        }
    ]
}); 
```

step3：文本框脚本。如果值在网格中匹配，那么我在文本框中输入的值应该显示在网格中。

```
$("#btnSearch").click(function () {
    $filter = new Array();
    $x = $("#txtSearch").val();
    if ($x) {
        $filter.push({ field:"x", operator:"contains", value:$x});
    }
    gridResult.datasource.filter($filter);
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T08:45:37.017

你在哪里：

```
gridResult.datasource.filter($filter); 
```

它应该是：

```
gridResult.data("kendoGrid").dataSource.filter($filter); 
```

1.  dataSource 中的**s**是大写的
2.  您必须在`data("kendoGrid")`此处添加或在声明时添加`var gridResult`.

# javascript - 在数组/对象中查找项目的最快方法

> ID：13757360
> 
> 赞同：3
> 
> 时间：2012-12-07T05:19:35.480
> 
> 标签：javascript, arrays, actionscript-3

在Javascript / AS3中查找列表或对象中项目索引的最快方法是什么？我问这两种语言是因为这两种语言的语法相似。

假设：

```
myArray = ["one", "two", "three"];
myObject = {one:1, two:2, three:3}; 
```

哪个是最快的，在哪种情况下你想要还是不想要？

*   Array.indexOf(x)
*   我的对象 [x] ！= null
*   我的对象中的 x
*   别的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:08:07.337

使用对象听起来不是一个好主意，因为重新建立索引将是一项繁重的操作，并且会消除访问性能的提升（如果有的话）。Array.indexOf(x) 似乎是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:51:31.657

对象是使用高效的哈希表实现的，因此查找键将是 O(1)。如果您要“查找”的值是字符串并且它们的位置是静态的，那么这将非常快。可以使用 来检查布尔值是否存在`key in obj`，获取存储的索引将是`obj[key] || -1`。

如果您正在搜索更复杂的对象（不容易序列化为字符串），则需要使用 Array. `Array.indexOf`使用 O(n) 进行搜索，如果您不经常这样做也可以。检查是否存在`arr.indexOf(item) != -1`，只是获取索引`arr.indexOf(item)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-01T11:44:16.180

我已经对本机 indexOf 和所需索引的二进制搜索进行了一些测试。这是 10 000 个项目数组的结果。

*   价值 | 索引 | 二分查找
*   1 | 0.003 | 0.013
*   5000 | 1.546 | 0.016
*   9990 | 3.105 | 0.015

测试是在节点 v8 环境中完成的，但似乎本机 indexOf 正在使用循环来查找所需的索引。这是二进制搜索的链接[http://oli.me.uk/2013/06/08/searching-javascript-arrays-with-a-binary-search/](http://oli.me.uk/2013/06/08/searching-javascript-arrays-with-a-binary-search/)

# android - Google Maps Android v2 授权失败

> ID：13757362
> 
> 赞同：3
> 
> 时间：2012-12-07T05:19:46.560
> 
> 标签：android, authorization, google-maps-api-2

我正在具有 2.3.6 的实际设备上测试示例谷歌代码。我认为这可能是密钥的问题，所以我通过谷歌的 API 控制台在不同的帐户上创建了不同的密钥。仍然是同样的问题“谷歌地图 Android API - 授权失败”。这是日志：

```
12-07 10:31:30.476: D/dalvikvm(17791): DexOpt: couldn't find field Landroid/content/res/Configuration;.smallestScreenWidthDp
12-07 10:31:30.484: W/dalvikvm(17791): VFY: unable to resolve instance field 24
12-07 10:31:30.484: D/dalvikvm(17791): VFY: replacing opcode 0x52 at 0x0012
12-07 10:31:30.484: D/dalvikvm(17791): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
12-07 10:31:30.718: D/dalvikvm(17791): GC_CONCURRENT freed 197K, 46% free 3063K/5639K, external 408K/517K, paused 3ms+4ms
12-07 10:31:30.789: W/dalvikvm(17791): Unable to resolve superclass of Lmaps/a/du; (411)
12-07 10:31:30.789: W/dalvikvm(17791): Link of class 'Lmaps/a/du;' failed
12-07 10:31:30.789: W/dalvikvm(17791): Unable to resolve superclass of Lmaps/a/ej; (2363)
12-07 10:31:30.789: W/dalvikvm(17791): Link of class 'Lmaps/a/ej;' failed
12-07 10:31:30.789: W/dalvikvm(17791): Unable to resolve superclass of Lmaps/j/k; (2379)
12-07 10:31:30.789: W/dalvikvm(17791): Link of class 'Lmaps/j/k;' failed
12-07 10:31:30.789: E/dalvikvm(17791): Could not find class 'maps.j.k', referenced from method maps.y.ae.a
12-07 10:31:30.789: W/dalvikvm(17791): VFY: unable to resolve new-instance 3571 (Lmaps/j/k;) in Lmaps/y/ae;
12-07 10:31:30.789: D/dalvikvm(17791): VFY: replacing opcode 0x22 at 0x007d
12-07 10:31:30.820: D/dalvikvm(17791): VFY: dead code 0x007f-008f in Lmaps/y/ae;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;Z)Lmaps/y/ae;
12-07 10:31:31.281: D/dalvikvm(17791): GC_CONCURRENT freed 297K, 46% free 3222K/5959K, external 408K/517K, paused 3ms+4ms
12-07 10:31:31.523: D/dalvikvm(17791): GC_EXTERNAL_ALLOC freed 227K, 45% free 3397K/6087K, external 431K/517K, paused 52ms
12-07 10:31:31.648: I/System.out(17791): 0
12-07 10:31:31.734: D/dalvikvm(17791): GC_CONCURRENT freed 188K, 43% free 3531K/6151K, external 544K/1029K, paused 5ms+4ms
12-07 10:31:32.125: D/libEGL(17791): loaded /system/lib/egl/libGLES_hgl.so
12-07 10:31:32.132: D/BRCM_EGL(17791): eglCreateContext() context: 0xd7090, VC context 1, Thread 17810
12-07 10:31:32.148: D/BRCM_EGL(17791): eglCreateWindowSurface() surface: 0xd70d0, VC surface: 1, Thread: 17810
12-07 10:31:32.148: D/BRCM_EGL(17791): eglMakeCurrent(0xd7090, 0xd70d0, 0xd70d0) Thread: 17810
12-07 10:31:32.859: E/Google Maps Android API(17791): Authorization failure. 
```

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.smartapps4u.googlemapslib"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
    <uses-feature android:glEsVersion="0x00020000" android:required="true"/>
    <permission
         android:name="com.smartapps4u.googlemapslib.permission.MAPS_RECEIVE"
         android:protectionLevel="signature"/>
<uses-permission  android:name="com.smartapps4u.googlemapslib.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-library android:name="com.google.android.maps" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
    <meta-data
      android:name="com.google.android.maps.v2.API_KEY"
      android:value="My API key"/>

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T17:11:32.850

解决了。​​我犯了一个非常愚蠢的错误。使用了错误的 api 密钥。将 api 密钥用于签名的应用程序。用 api 密钥替换它以进行调试密钥库并解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T06:13:16.350

有同样的问题，@Sunkenglory 的答案是正确的，只是在我寻找解决方案时为像我这样的新手添加一些信息。

在 mac osX 上，我的调试密钥库位于此处：

```
~/.android/debug.keystore 
```

转到该文件夹​​并运行以下命令

```
keytool -list -v -keystore debug.keystore 
```

这给了我在谷歌控制台中输入的正确 sha1，现在它可以工作了。

# grails - Grails Spring Security：使用目标 URL 登录会跳过身份验证后的工作流程

> ID：13757368
> 
> 赞同：3
> 
> 时间：2012-12-07T05:20:23.217
> 
> 标签：grails, spring-security

在我的 grails 应用程序中，我通过编写自定义身份验证成功处理程序（在 resources.groovy 中）自定义了授权后工作流程，如下所示。

```
authenticationSuccessHandler (MyAuthSuccessHandler) {
    def conf = SpringSecurityUtils.securityConfig
    requestCache = ref('requestCache')
    defaultTargetUrl = conf.successHandler.defaultTargetUrl
    alwaysUseDefaultTargetUrl = conf.successHandler.alwaysUseDefault
    targetUrlParameter = conf.successHandler.targetUrlParameter
    useReferer = conf.successHandler.useReferer
    redirectStrategy = ref('redirectStrategy')
    superAdminUrl = "/admin/processSuperAdminLogin"
    adminUrl = "/admin/processAdminLogin"
    userUrl = "/admin/processUserLogin"
} 
```

正如您可以从上面闭包的最后三行中看到的那样，根据授予登录用户的角色，我将她重定向到**AdminController**中的单独操作，其中创建自定义 UserSessionBean 并将其存储在会话中。

它适用于我的应用程序中的常规登录案例，如下所示：

1.  用户通过`http://localhost:8080/my-app/`OR进入应用程序`http://localhost:8080/my-app/login/auth`
2.  她输入她的有效登录 ID 和密码并继续。
3.  应用程序在内部访问 MyAuthSuccessHandler，考虑到授予此用户的角色，该处理程序重定向到 AdminController。
4.  创建 UserSessionBean 并将其存储在会话中
5.  用户被带到应用主页

我还`MyUserDetailsService`通过扩展编写了一个自定义，`GormUserDetailsService`在上述流程中可以正确访问该自定义。

**问题场景：**
考虑用户直接访问应用程序内的受保护资源（在这种情况下，控制器通过`@Secured`注释保护）。

1.  用户点击`http://localhost:8080/my-app/inbox/index`
2.  应用程序将她重定向到`http://localhost:8080/my-app/login/auth`
3.  用户输入她的有效登录 ID 和密码
4.  用户被带到`http://localhost:8080/my-app/inbox/index`

在这个`MyAuthSuccessHandler`过程中完全跳过了，因此我的**UserSessionBean没有被创建，导致在访问****UserSessionBean**的地方进一步使用时出错。

**问题：**

1.  在问题场景中，应用程序是否跳过了，`MyAuthSuccessHandler`因为有一个目标 URL 可以在登录时重定向到？
2.  `MyAuthSuccessHandler`即使存在目标 URL，我们是否可以强制该过程始终通过？
3.  如果对 2 的回答是否定的，那么关于如何以及在何处仍然可以创建**UserSessionBean是否有替代方法？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T05:44:34.390

您可以实现自定义的 eventListener 来处理登录后过程，而不会破坏原始用户请求的 url。

在 config.groovy 中，插入一个配置项：

```
grails.plugins.springsecurity.useSecurityEventListener = true 
```

在你的 resources.groovy 中，添加一个像这样的 bean：

```
import com.yourapp.auth.LoginEventListener
beans = {
    loginEventListener(LoginEventListener)
} 
```

并在 src/groovy 中创建一个 eventListener，如下所示：

```
package com.yourapp.auth
import org.springframework.context.ApplicationListener;
import org.springframework.security.authentication.event.InteractiveAuthenticationSuccessEvent
import org.springframework.web.context.request.RequestContextHolder as RCH

class LoginEventListener implements
    ApplicationListener<InteractiveAuthenticationSuccessEvent> {    

    //deal with successful login    
    void onApplicationEvent(InteractiveAuthenticationSuccessEvent event) {
        User.withTransaction { 
            def user = User.findByUsername(event.authentication.principal.username)
                    def adminRole = Role.findByAuthority('ROLE_ADMIN')
                    def userRole = Role.findByAuthority('ROLE_USER')
                    def session = RCH.currentRequestAttributes().session      //get httpSession
                    session.user = user
                    if(user.authorities.contains(adminRole)){
                        processAdminLogin()
                    }
                    else if(user.authorities.contains(userRole)){
                        processUserLogin()
                    }
        }
    }

    private void processAdminLogin(){    //move admin/processAdminLogin here
          .....
    }

    private void processUserLogin(){    //move admin/processUserLogin here
          .....
    }
} 
```

完毕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T06:25:55.217

1) 是的，因为它是“按需”登录。

2）是的，您可以将其设置为始终使用默认值。Spring 安全插件有一个设置“ [successHandler.alwaysUseDefault](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/13%20URL%20Properties.html) ”，将其更改为 true，默认为 false。

此外，如果您需要更多详细信息，请查看 spring[文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html)以查找*设置默认登录后目标*部分。

3) 如果您仍想创建用户会话 bean，然后重定向到原始 URL，您有两个选项在较早的过滤器中创建 bean 或通过自定义[UserDetailsS​​ervice](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsService.html)公开所需的数据。我个人会走自定义详细信息服务的路线。

# c# - 从数组列表中获取字典

> ID：13757370
> 
> 赞同：4
> 
> 时间：2012-12-07T05:20:28.447
> 
> 标签：c#, asp.net, dictionary, arraylist

```
protected Dictionary<string , string> xmlList = new Dictionary<string , string>();
protected System.Collections.ArrayList list = new System.Collections.ArrayList(); 
```

我已将字典存储在这样的数组列表中..

```
 xmlList.Add( "image" , "images/piece1.png" );
    xmlList.Add( "description" , " Experience why entertainment is more amazing with Xbox."            );
    xmlList.Add( "title" , "Downloads" );
    list.Add( xmlList );
    xmlList.Clear();
    xmlList.Add( "image" , "images/piece2.png" );
    xmlList.Add( "description" , "Limited-time offer: Buy Office now, get the next version free.*" );
    xmlList.Add( "title" , "Security & Updates" );
    list.Add( xmlList ); 
```

如何从 arraylist 访问字典的每个元素？

```
<% for (int i = 0; i < list.Count; i++)
    {
    foreach(Dictionary<string , string> itemList in list)
        {
        Response.Write( itemList["image"] );
        }
   } 
%> 
```

这给了我两次相同的结果'images/piece2.png'..

我做不到

```
foreach(Dictionary<string , string> itemList in list[i])
    {
    Response.Write( itemList["image"] );
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:28:34.970

```
 protected Dictionary<string, string> xmlList;
    protected System.Collections.ArrayList list = new System.Collections.ArrayList();

 xmlList = new Dictionary<string, string>();
        xmlList.Add("image", "images/piece1.png");
        xmlList.Add("description", " Experience why entertainment is more amazing with Xbox.");
        xmlList.Add("title", "Downloads");
        list.Add(xmlList);
        xmlList = new Dictionary<string, string>();
        xmlList.Add("image", "images/piece2.png");
        xmlList.Add("description", "Limited-time offer: Buy Office now, get the next version free.*");
        xmlList.Add("title", "Security & Updates");
        list.Add(xmlList);

        foreach (Dictionary<string, string> itemList in list)
        {
            Response.Write(itemList["image"]);
            Response.Write("<br>");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:19:07.787

1）使用通用[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)而不是`ArrayList`：

```
 Dictionary<string, string> xmlList = new Dictionary<string, string>();
 List<Dictionary<string, string>> list = new List<Dictionary<string, string>>(); 
```

2）如果你想在列表中有两个单独的字典，你需要创建其中两个，否则你有两个对同一个字典的引用。所以：

```
 list.Add(xmlList);
 xmlList = new Dictionary<string, string>(); //instead of xmlList.Clear();
 //...
 list.Add(xmlList); 
```

3) 现在您可以执行以下操作来遍历字典列表：

```
 foreach (Dictionary<string, string> d in list)
 {
     //...
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:29:25.773

我感觉您两次使用相同的对象 xmllist。这就是您两次获得图像的原因。请尝试 xmllist1 和 xmllist2。遍历字典和数组列表的所有其他答案对我来说都是正确的。这是可以的原因。所以请试试这个。

```
 xmlList1.Add( "image" , "images/piece1.png" );
    xmlList1.Add( "description" , " Experience why entertainment is more amazing with Xbox."            );
    xmlList1.Add( "title" , "Downloads" );
    list.Add( xmlList1 );

    xmlList2.Add( "image" , "images/piece2.png" );
    xmlList2.Add( "description" , "Limited-time offer: Buy Office now, get the next version free.*" );
    xmlList2.Add( "title" , "Security & Updates" );
    list.Add( xmlList2 ); 
```

然后使用 CodeIgnoto 的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T05:28:43.263

您可以使用此代码段遍历列表中的每个字典并获取字典中的每个元素。

```
foreach(Dictionary<string,string> xdict in list)
{
    foreach(var xkey in xdict.Keys)
    {
       Response.Write(xdict[xkey]);
    }
} 
```

# ios - Clang 错误：即使在重命名符号后也会出现重复的符号

> ID：13757379
> 
> 赞同：0
> 
> 时间：2012-12-07T05:22:06.590
> 
> 标签：ios, linker, clang, linker-errors

当我构建我的项目时，我从 clang 中得到一个重复的符号错误。

```
 duplicate symbol _server in:
    /Users/ashwinjeyakumar/Library/Developer/Xcode/DerivedData/Hikes-emzsxfmokzerjhevoirupbsrobpm/Build/Intermediates/Hikes.build/Release-iphonesimulator/Hikes.build/Objects-normal/i386/HikeViewController.o
    /Users/ashwinjeyakumar/Library/Developer/Xcode/DerivedData/Hikes-emzsxfmokzerjhevoirupbsrobpm/Build/Intermediates/Hikes.build/Release-iphonesimulator/Hikes.build/Objects-normal/i386/HikeSearchResultsViewController.o
ld: 1 duplicate symbol for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

为了调试它，我找到了我定义服务器的位置（它是一个属性）并将其删除，用 info.plist 条目替换它。错误不会消失。我试过了：

*   重命名 Info.Plist 中的服务器条目
*   /Users/[myusername]/Library/Developer/Xcode/DerivedData 下的“rm -rf”

对我的 xcode 项目的 Shift+cmd+F 搜索未找到“服务器”的任何结果，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:32:57.337

我的项目中有一个导入“Constants.h”。Constants.h 有以下内容：

```
#ifndef Hikes_Constants_h
#define Hikes_Constants_h

#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)
NSString *server = @"http://192.168.56.101:3000/";

#endif 
```

问题是 Constants.h 不再在我的 XCode 项目中，因此搜索该符号从未给出结果。我终于注意到我正在导入一个不在项目中的标题。

# java - 如何使用 ChromeDriver 运行 Selenium Webdriver 测试用例？

> ID：13757384
> 
> 赞同：0
> 
> 时间：2012-12-07T05:23:15.013
> 
> 标签：java, selenium-webdriver, selenium-chromedriver

我已经做到了

```
File file = new File("path\\to\\chrome driver");
System.setProperty("webdriver.chrome.driver", file.getAbsolutePath());
WebDriver driver = new ChromeDriver(); 
```

我总共有 5 个测试用例要测试。但是在测试时只有 2 或 3 个测试用例在运行，而其余的则没有。然后我得到错误，

`[1207/104351:ERROR:ipc_sync_channel.cc(378)] Canceling pending sends [1207/104351:ERROR:automation_proxy.cc(319)] Channel error in AutomationProxy.`

我的测试用例在**java**中，我正在尝试这是**Windiws OS** 这是什么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:43:43.710

这是 Chromedriver 的问题。请参阅此链接[Chromedriver 问题](http://code.google.com/p/chromedriver/issues/detail?id=159)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T04:04:29.177

System.setProperty("webdriver.chrome.driver", "D:/chromedriver.exe"); WebDriver driver = new ChromeDriver();

从 Internet 下载 chromedriver.exe。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T08:54:12.883

设置 chrome.exe 的路径。

# excel - 用于永久启用 MACROS 的 QTP 代码

> ID：13757386
> 
> 赞同：2
> 
> 时间：2012-12-07T05:23:28.473
> 
> 标签：excel, qtp, vba

我有一个 QTP 脚本，它打开一个 excel 工作表并更新我在 excel 工作簿中的一些结果，但是 excel 有宏，所以每次我运行时，都会弹出询问是否启用宏的警报框。所以我需要一个可以预先启用宏的 QTP 脚本。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:05:26.003

您不能使用 QTP 脚本永久启用宏。另一种解决方法是在 Excel 中进行信任中心设置。在这里，您可以选择启用或启用宏，也可以在不通知的情况下禁用宏。完成此操作后，excel 将不会显示任何启用宏的通知。您可能需要检查“信任访问 VBA 项目对象模型”

假设您使用的是 Excel 2007：要访问信任中心设置，请单击 office 按钮 >> Excel 选项 >> 信任中心 >> 信任中心设置 >> 宏设置

注意：不建议永久启用宏，因为它可能会危及您的安全。

此外，您可以使用 QTP 在后台打开 excel 文件。尝试这样做并检查启用宏弹出是否产生问题。

# sql - 获取 SQL Server 跨数据库依赖项

> ID：13757387
> 
> 赞同：20
> 
> 时间：2012-12-07T05:23:28.800
> 
> 标签：sql, sql-server, sql-server-2008, tsql

SQL Server 版本 - 2008 R2

我正在评估 DMS 解决方案，目标是接管维护。最初的解决方案有一个中央数据库，其中包含与制造商有关的数据。它还为每个经销商提供一个数据库，这意味着有很多跨数据库依赖关系。

问题：

*   没有数据库文档
*   没有代码注释
*   很多堆
*   没有标准的对象命名约定
*   除其他对象外，中央数据库还有 460 多个表和 900 多个 SProcs
*   除了其他对象外，每个经销商数据库都有 370 多个表和 2350 多个 SProcs

作为第一步，我建议对数据库进行全面清理，这对了解对象依赖关系至关重要，包括跨数据库依赖关系。我尝试使用 Red Gate 的解决方案，但输出量太大。我想要的只是数据库中没有任何依赖关系的对象列表——它们既不依赖于其他对象，也没有任何依赖于它们的对象。

这是我用来获取依赖项列表的脚本：

```
SELECT
DB_NAME() referencing_database_name,
OBJECT_NAME (referencing_id) referencing_entity_name,
ISNULL(referenced_schema_name,'dbo') referenced_schema_name,
referenced_entity_name,
ao.type_desc referenced_entity_type,
ISNULL(referenced_database_name,DB_NAME()) referenced_database_name
FROM sys.sql_expression_dependencies sed
JOIN sys.all_objects ao
ON sed.referenced_entity_name = ao.name 
```

我将创建一个表 - 依赖项 - 我将从每个数据库中插入这个结果集。作为下一步，我还将创建另一个表 - AllObjects - 它将包含数据库中所有对象的列表。这是执行此操作的脚本：

```
SELECT
DB_NAME() DBName,
name,
type_desc
FROM sys.all_objects
WHERE type_desc IN
(
'VIEW',
'SQL_TABLE_VALUED_FUNCTION',
'SQL_STORED_PROCEDURE',
'SQL_INLINE_TABLE_VALUED_FUNCTION',
'USER_TABLE',
'SQL_SCALAR_FUNCTION'
) 
```

现在，此表中未出现在依赖项表的 referenced_entity_name 列中的名称列表应该给出我正在寻找的对象列表。

```
SELECT
AO.DBName,
AO.name,
AO.type_desc
FROM AllObjects AO
LEFT OUTER JOIN Dependencies D ON
D.referenced_database_name = AO.DBName AND
D.referenced_entity_name = AO.name AND
D.referenced_entity_type = AO.type_desc
WHERE 
D.referenced_database_name IS NULL AND
D.referenced_entity_name IS NULL AND
D.referenced_entity_type IS NULL 
```

现在的问题：

1.  输出中似乎缺少一些对象依赖项。我错过了什么？
2.  如何验证我的发现是否正确？
3.  我的意思是有不同的方法可以做到这一点，所以我可以比较结果并仔细检查？

提前致谢，

拉吉

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-03-29T15:54:50.007

您可以将结果与以下脚本找到的结果进行比较。这是完整的[文章](https://zakird.com/mssql/2011/06/07/finding-cross-database-dependencies)

```
CREATE PROCEDURE [dbo].[get_crossdatabase_dependencies] AS

SET NOCOUNT ON;

CREATE TABLE #databases(
    database_id int, 
    database_name sysname
);

INSERT INTO #databases(database_id, database_name)
SELECT database_id, [name]
FROM sys.databases
WHERE 1 = 1
    AND [state] <> 6 /* ignore offline DBs */
    AND database_id > 4; /* ignore system DBs */

DECLARE 
    @database_id int, 
    @database_name sysname, 
    @sql varchar(max);

CREATE TABLE #dependencies(
    referencing_database varchar(max),
    referencing_schema varchar(max),
    referencing_object_name varchar(max),
    referenced_server varchar(max),
    referenced_database varchar(max),
    referenced_schema varchar(max),
    referenced_object_name varchar(max)
);

WHILE (SELECT COUNT(*) FROM #databases) > 0 BEGIN
    SELECT TOP 1 @database_id = database_id, 
                 @database_name = database_name 
    FROM #databases;

    SET @sql = 'INSERT INTO #dependencies select 
        DB_NAME(' + convert(varchar,@database_id) + '), 
        OBJECT_SCHEMA_NAME(referencing_id,' 
            + convert(varchar,@database_id) +'), 
        OBJECT_NAME(referencing_id,' + convert(varchar,@database_id) + '), 
        referenced_server_name,
        ISNULL(referenced_database_name, db_name(' 
             + convert(varchar,@database_id) + ')),
        referenced_schema_name,
        referenced_entity_name
    FROM ' + quotename(@database_name) + '.sys.sql_expression_dependencies';

    EXEC(@sql);

    DELETE FROM #databases WHERE database_id = @database_id;
END;

SET NOCOUNT OFF;

SELECT * FROM #dependencies; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T03:36:41.457

哦，MS 在使用 sys.sql_expression_dependencies 检测跨数据库依赖方面做出了很大的努力，但我以前见过它遗漏了一些东西。在您的情况下，我会找到一个缺少依赖项的示例，然后开始回溯：您是否以某种方式从查询中删除了它？如果是这样，请修复您的查询。sys.sql_expression_dependencies 是否省略了某类依赖项？在什么条件下？动态SQL是罪魁祸首吗？等等

您还应该`sp_refreshsqlmodule`为 sys.sql_modules 中的每个对象运行，然后重新运行您的代码。它强制 SQL Server 刷新依赖信息（尽其所能）。

现在，为了进行验证，设置跟踪并侦听事件 114，“审核架构对象访问事件”，以及存储过程和/或 RPC 调用的启动和完成事件。包括列`DatabaseName`、`ParentName`、`ObjectName`、`ServerName`和`SPID`（`RequestID`对于启用 MARS 的连接）。也许其他一些人也是。“Audit Schema Object Access Event”会在任何时候访问对象时发生，因此请在运行此跟踪时运行应用程序，然后使用 SPID + RequestId 整理数据并使用 sys.sql_expression_dependencies 将其与您的结果进行比较。如果跟踪数据中有任何未出现在您的依赖项数据中的内容，那么您错过了一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-30T15:28:47.553

如果您必须处理链接服务器，我将@MilicaMedic 的答案改编为适用于跨服务器依赖项。我还输出依赖项中可用的列名。

你可以像这样使用它：

```
create table #dependencies (
    referencing_server nvarchar(128),
    referencing_database nvarchar(128),
    referencing_schema nvarchar(128),
    referencing_object_name nvarchar(128),
    referencing_column nvarchar(128),
    referenced_server nvarchar(128),
    referenced_database nvarchar(128),
    referenced_schema nvarchar(128),
    referenced_object_name nvarchar(128),
    referenced_column nvarchar(128)
);

insert @dependencies
exec crossServerDependencies 
    'ThisServerName, LinkedServerName, LinkedServerName2, etc' 
```

如您在答案中所述，从那里将其加入您的 AllObjects 表。

我的代码需要两个外部函数：“splitString”和“AddBracketsWhenNecessary”。您可以根据需要简化前者并完全消除后者。但是我将它们用于其他事情，因此它们会成为我的实现。两者的代码都在底部。

以下是主要程序：

```
create procedure crossServerDependencies
    @server_names_csv nvarchar(500) = null -- csv list of server names you want to pull dependencies for
as

-- Create output table

    if object_id('tempdb..#dependencies') is not null 
        drop table #dependencies;

    create table #dependencies (
        referencing_server nvarchar(128),
        referencing_database nvarchar(128),
        referencing_schema nvarchar(128),
        referencing_object_name nvarchar(128),
        referencing_column nvarchar(128),
        referenced_server nvarchar(128),
        referenced_database nvarchar(128),
        referenced_schema nvarchar(128),
        referenced_object_name nvarchar(128),
        referenced_column nvarchar(128)
    );

-- Split server csv into table

    set @server_names_csv = isnull(@server_names_csv, @@servername);

    declare @server_names table (
        server_row int,
        server_name nvarchar(128),
        actuallyExists bit
    );

    insert      @server_names
    select      server_row = id, 
                server_name,
                actuallyExists = case when sv.name is not null then 1 else 0 end
    from        dbo.splitString(@server_names_csv, ',') sp
    cross apply (select server_name = dbo.AddBracketsWhenNecessary(val)) ap
    left join   sys.servers sv on sp.val = dbo.AddBracketsWhenNecessary(sv.name); 

-- Loop servers

    declare 
        @server_row int = 0,
        @server_name nvarchar(50),
        @server_exists bit = 0,
        @server_is_local bit = 0,
        @server_had_some_inserts bit = 0;

    while @server_row <= (select max(server_row) from @server_names)
    begin

        -- Server loop initializations

            set @server_row += 1;
            set @server_had_some_inserts = 0;

            select      @server_name = server_name,
                        @server_exists = actuallyExists
            from        @server_names 
            where       server_row = @server_row;

            set @server_is_local = 
                case when @server_name = dbo.AddBracketsWhenNecessary(@@servername) then 1 else 0 end;

        -- Handle non-existent server (and prevent sql injection)

            if @server_exists = 0
            begin
                print 
                    '"' + @server_name + '" does not exist.  ' + 
                    'Please check your spelling and/or access to view the linked server ' +
                    '(running under ' + user_name() + ').';
                continue;
            end

        -- Get database list

            if object_id('tempdb..#databases') is not null 
                drop table #databases;

            create table #databases (
                rownum int identity(1,1),
                database_id int, 
                database_name nvarchar(128)
            );

            declare @sql nvarchar(max) = '

                select      database_id, [name]
                from        master.sys.databases
                where       state <> 6 -- ignore offline dbs 
                and         database_id > 4 -- ignore system dbs
                and         has_dbaccess([name]) = 1
                and         [name] not in (''ReportServer'', ''ReportServerTempDB'')

            ';

            if @server_is_local = 0
            begin
                set @sql = replace(@sql, '''', '''''');
                set @sql = 'select * from openquery( @server_name, ''' + @sql + ''')';
            end 

            set @sql = 'insert #databases (database_id, database_name)' + @sql; 
            set @sql = replace(@sql, '@server_name', @server_name);
            exec (@sql);

            delete #databases
            where database_name = 'ReportServer';

        -- Loop databases 

            declare @rowNum int = 0;

            while @rowNum <= (select max(rownum) from #databases)
            begin

                -- Database loop initializations

                    set @rowNum += 1;

                    declare 
                        @database_id nvarchar(max), 
                        @database_name nvarchar(max);

                    select      @database_id = database_id, 
                                @database_name = dbo.AddBracketsWhenNecessary(database_name)
                    from        #databases
                    where       rownum = @rowNum;

                -- Get object dependency info

                    set @sql = '

                        with

                            getTableColumnIds as (

                                select      table_id = o.object_id,
                                            table_name = o.name, 
                                            column_id = c.column_id,
                                            column_name = c.name
                                from        @database_name.sys.objects o
                                join        @database_name.sys.all_columns c on o.object_id = c.object_id

                            )

                            @insertStatement
                            select      ''@server_name'',
                                        db_name(@database_id), 
                                        object_schema_name(referencing_id, @database_id), 
                                        object_name(referencing_id, @database_id), 
                                        referencing_column = ringTCs.column_name,
                                        isnull(referenced_server_name, ''@server_name''),
                                        isnull(referenced_database_name, db_name(@database_id)),
                                        isnull(referenced_schema_name, ''dbo''),
                                        referenced_entity_name,
                                        referenced_column = redTCs.column_name
                            from        @database_name.sys.sql_expression_dependencies d
                            left join   getTableColumnIds ringTCs 
                                            on d.referencing_id = ringTCs.table_id 
                                            and d.referencing_minor_id = ringTCs.column_id
                            left join   getTableColumnIds redTCs 
                                            on d.referenced_id = redTCs.table_id 
                                            and d.referenced_minor_id = redTCs.column_id

                    ';

                    set @sql = replace(@sql, '@database_id', @database_id);
                    set @sql = replace(@sql, '@database_name', @database_name);

                    if @server_is_local = 0
                    begin
                        set @sql = replace(@sql, '''', '''''');
                        set @sql = replace(@sql, '@insertStatement', '');
                        set @sql = 'select * from openquery(@server_name, ''' + @sql + ''')';
                    end

                    set @sql = replace(@sql, '@insertStatement', 'insert #dependencies '); 
                    set @sql = replace(@sql, '@server_name', @server_name);
                    exec (@sql);

                -- Database loop terminations

                    if @@rowcount > 0
                        set @server_had_some_inserts = 1;

            end -- database loop 

        -- server loop terminations

            if @server_had_some_inserts = 0
            begin

                declare @remote_user_name nvarchar(255);

                select  @remote_user_name = remote_name
                from    sys.linked_logins li
                join    sys.servers s on li.server_id = s.server_id
                where   remote_name is not null
                and     s.name = 'sisag'

                print (
                    'No dependencies found for ' + @server_name + '.  ' + 
                    'If this is unexpected, you may need to run "grant view any definition to ' + 
                    '[' + isnull(@remote_user_name, '?') + ']" ' + 
                    'on the remote server.'
                );

            end

    end -- server loop 

-- Terminate

    select * from #dependencies 
```

AddBracketsWhenNecessary 的代码：

```
create function AddBracketsWhenNecessary (
    @objectName nvarchar(250)
)
returns nvarchar(250) as
begin

    if left(@objectName, 1) = '[' and right(@objectName, 1) = ']'
        return @objectName;

    declare @hasInvalidCharacter bit;

    select      @hasInvalidCharacter = max(isInvalid)
    from        dbo.splitString(@objectName, null) chars
    cross apply (select 
                    isLetter = patindex('[a-z,_]', val),
                    isNumber = PATINDEX('[0-9]', val)
                ) getCharType
    cross apply (select 
                    isInvalid =
                        case 
                        when isLetter = 1 then 0
                        when isNumber = 1 and not chars.id = 1 then 0
                        else 1
                        end
                ) getValidity

    return 
            case when @hasInvalidCharacter = 1 then '[' else '' end 
        +   @objectName
        +   case when @hasInvalidCharacter = 1 then ']' else '' end;

end 
```

最后，我的拆分器功能（但如果您想要更简单的版本，请参阅 Arnold Fribble [，](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=50648)如果您有 SqlServer 2016 或更高版本，请使用内置功能）：

```
create function splitString ( 
    @stringToSplit nvarchar(max), 
    @delimiter nvarchar(50)
)
returns table as
return 

    with

        split_by_delimiter as ( 

            select      id      = 1, 
                        start   = 1, 
                        stop    = convert(int, 
                                    charindex(@delimiter, @stringToSplit)
                                  )

            union all
            select      id      = id + 1, 
                        start   = newStart, 
                        stop    = convert(int, 
                                    charindex(@delimiter, @stringToSplit, newStart)
                                  )
            from        split_by_delimiter
            cross apply (select newStart = stop + len(@delimiter)) ap
            where       Stop > 0

        ),

        split_into_characters as (  

            select      id      = 1,    
                        chr     = left(@stringToSplit,1)
            union all
            select      id      = id + 1,       
                        chr     = substring(@stringToSplit, ID + 1, 1) 
            from        split_into_characters 
            where       id < len(@stringToSplit)

        )

        select      id, 
                    val = 
                        ltrim(rtrim(substring(
                            @stringToSplit, 
                            start, 
                            case 
                                when stop > 0 then stop - start 
                                else len(@stringtosplit) 
                                end
                        ))) 
        from        split_by_delimiter
        where       len(@delimiter) > 0

        union all
        select      id, 
                    val = chr
        from        split_into_characters
        where       @delimiter = ''
        or          @delimiter is null 
```

我必须对我使用的真实代码进行一些小改动，所以如果有任何参考错误，请在评论中告诉我，我会编辑。

# javascript - 谷歌地图 containsLocations 抛出 Uncaught TypeError

> ID：13757388
> 
> 赞同：1
> 
> 时间：2012-12-07T05:23:31.593
> 
> 标签：javascript, google-maps-api-3

我有我认为非常简单的代码。我画了一个多边形，一个标记，然后如果我硬编码的点在多边形内，就会发出警报。然而，当我运行它时，我`Uncaught TypeError: Cannot call method 'lng' of undefined`在控制台中得到一个“”错误。

我的代码如下：

```
 function initialize() {

        var mapOptions = {
          center: new google.maps.LatLng(38.990842,-76.93625),
          zoom: 17,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

      var box = [new google.maps.LatLng(38.9913160,-76.937079),
      new google.maps.LatLng(38.991333,-76.936119),
      new google.maps.LatLng(38.990287, -76.936108),
      new google.maps.LatLng(38.990278,-76.937057),
      new google.maps.LatLng(38.990495,-76.937052),
      new google.maps.LatLng(38.990499,-76.936424),
      new google.maps.LatLng(38.991091,-76.93643),
      new google.maps.LatLng(38.991104,-76.937079)
      ];

        var mPoint = [new google.maps.LatLng(38.991300,-76.936165)];
  var marker = new google.maps.Marker({
    map: map, 
    position: new google.maps.LatLng(38.991300,-76.936165),
    //position: new google.maps.LatLng(mPoint),
    draggable: true
  });

        var AVpoly = new google.maps.Polygon({path:box,
  strokeColor:"#0000FF",
  strokeOpacity:0.8,
  strokeWeight:2,
  fillColor:"#0000FF",
  fillOpacity:0.4});

      AVpoly.setMap(map);
marker.setMap(map);
if(google.maps.geometry.poly.containsLocation(google.maps.LatLng(38.990842,-76.93625), box) == true) {
 alert("yes");
}

      } 
```

我看不出这有什么问题，也看不出为什么不触发警报。我什至把它改成了假，因为我的几何形状是错误的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:29:45.323

Box 不是 google.maps.Polygon；它是 google.maps.LatLng 对象的数组。改用 AVpoly （[文档](https://developers.google.com/maps/documentation/javascript/reference#poly)指定第二个参数是[Polygon](https://developers.google.com/maps/documentation/javascript/reference#Polygon)）。

这不起作用，您还缺少 google.maps.LatLng 构造函数的“新”。这确实有效（使用返回 google.maps.LatLng 的 marker.getPosition 方法）：

```
var marker = new google.maps.Marker({
    map: map, 
    position: new google.maps.LatLng(38.991300,-76.936165),
    draggable: true
  });

var AVpoly = new google.maps.Polygon({path:box,
    map: map, 
  strokeColor:"#0000FF",
  strokeOpacity:0.8,
  strokeWeight:2,
  fillColor:"#0000FF",
  fillOpacity:0.4});

  if(google.maps.geometry.poly.containsLocation(marker.getPosition(), AVpoly) == true) {
    alert("yes");
 } 
```

[工作（如果烦人）示例](http://www.geocodezip.com/v3_simpleMap_containsLocation.html)

# c# - 如何在 C# 中清空数组？

> ID：13757390
> 
> 赞同：9
> 
> 时间：2012-12-07T05:23:40.163
> 
> 标签：c#, arrays

我正在使用该函数`Array.Clear()`清空数组，但它会产生错误。这是我使用的代码：

```
private int[] activeFielderNumber = new int[10];
private string[] activeFielderAction = new string[10];  
....
...
....
Array.Clear(activeFielderNumber, 0, activeFielderNumber.Length);
Array.Clear(activeFielderAction, "", activeFielderAction.Length); 
```

错误是：

```
error CS0103: The name `Array' does not exist in the current context 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T05:29:40.243

你用过吗

```
using System; 
```

还有一点要纠正：

```
Array.Clear(activeFielderAction, "", activeFielderAction.Length); 
```

它应该是

```
Array.Clear(activeFielderAction, 0, activeFielderAction.Length); 
```

最后两个参数是要清除的索引范围。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-10T07:38:47.877

尝试这个

```
Array.Clear(yourArray, 0, yourArray.Length); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T05:29:51.353

> 我正在使用 Array.Clear() 函数来清空数组。但它抛出错误

不，我不是。Clear 函数没有抛出错误，COMPILER 是。

> 错误 CS0103：当前上下文中不存在名称“数组”

当我们寻找 CS0103 时，Google 会这样说：

[MSDN 上的编译器错误 CS0103 (C#)](http://msdn.microsoft.com/en-us/library/t8zbaa6f%28v=vs.80%29.aspx)

> 试图使用类、命名空间或范围中不存在的名称。检查名称的拼写并检查您的 using 语句和程序集引用，以确保您尝试使用的名称可用。一个常见的错误是在循环或 try 块中声明变量，然后尝试从封闭代码块或另一个代码块访问它，如下例所示。

翻译为：在上下文中找不到数组。您是否缺少“使用”语句？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T05:27:57.433

以下代码有效：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace ConsoleApplication3
{
    class Program
    {
        static void Main(string[] args)
        {
            int[] activeFielderNumber = new int[10];
string[] activeFielderAction = new string[10];  

Array.Clear(activeFielderNumber, 0, activeFielderNumber.Length);
Array.Clear(activeFielderAction, 0, activeFielderAction.Length);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-10T07:33:20.713

不幸的是，我没有足够的分数来发表评论，所以必须在这里提供一个“答案”......对于那里的任何“速度迷”，有很多方法可以清除数组（不仅仅是[Array.Clear](http://msdn.microsoft.com/en-us/library/system.array.clear%28v=vs.110%29.aspx)）[如此处所示](http://cc.davelozinski.com/c-sharp/fastest-way-to-clear-collections)，但通常[Array.Clear](http://msdn.microsoft.com/en-us/library/system.array.clear%28v=vs.110%29.aspx)是最简单和最快的。

以下是经过测试的 3 种方法来清除数组（[直接从站点](http://cc.davelozinski.com/c-sharp/fastest-way-to-clear-collections)），其中“o1”是对象数组：

```
for (int x = 0; x < MAX; x++)
{
    o1[x] = null;
}

Array.Clear(o1, 0, o1.Length);

Parallel.For(0, MAX, x =>
{   //arrays are thread safe if only one thread is writing to an index
    o1[x] = null;
}); 
```

[我认为阅读起来很有趣，因为我从未考虑过尝试除Array.Clear](http://msdn.microsoft.com/en-us/library/system.array.clear%28v=vs.110%29.aspx)之外的另一种方式（尤其是使用并行循环）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-07T05:33:12.577

`Array.Clear()`方法仅将数组重置为其默认状态。

根据声明

`Array.Clear(activeFielderAction, "", activeFielderAction.Length);`我们可能会得到一个错误。

实际的陈述应该是

`Array.Clear(activeFielderAction, 0, activeFielderAction.Length);`

还要检查你是否是`importing Using.System;`命名空间。

试试下面的代码。

```
int[] activeFielderNumber = new int[10];
activeFielderNumber[1] = 10;
activeFielderNumber[2] = 20;

string[] activeFielderAction = new string[10];
Array.Clear(activeFielderNumber, 0, activeFielderNumber.Length);
Array.Clear(activeFielderAction, 0, activeFielderAction.Length); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-07T05:30:07.963

线

```
Array.Clear(activeFielderAction, "", activeFielderAction.Length); 
```

不是[Array.Clear()](http://msdn.microsoft.com/en-us/library/system.array.clear.aspx)的有效使用- 中间参数必须是 int，就像您在上一行中所做的那样。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-19T10:42:31.567

您只需将 Array 对象引用设置为 null 示例

字符串 url = " [http://localhost/RestWebService/employee](http://localhost/RestWebService/employee) ?" 姓名+“，”+身份证；String[] arr = url.Split('?');

```
 arr = null;
        arr = url.Split('?'); 
```

就这样

# android - 在android中找到磁铁

> ID：13757391
> 
> 赞同：3
> 
> 时间：2012-12-07T05:23:50.253
> 
> 标签：android, sensors

**我正在尝试什么：-** 我想使用我的 android 设备找到磁铁。

**我已经做了什么：-** 我正在注册我的磁场类型传感器，如下所示

```
Sensor magnetometer = mSensorManager
            .getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD); 
```

在`onSensorChanged(SensorEvent event)`方法中，如果类型是磁场，我将从 event.value 获取 x,y,z。

到目前为止一切都很好，然后我从这三个值中
`Math.sqrt((x*x)+(y*y)+(z*z))`得到绝对值，我得到一个绝对值。
但我认为这仅与设备有关，因为当我将一块磁铁靠近我的设备时，什么都不会发生（绝对值和它的 (x,y,z) 都不会改变。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:15:46.900

我也是 Android 开发的新手，并且有兴趣创建一个类似的应用程序，当磁铁足够靠近我的手机时，我会收到通知。

我使用相同的公式来计算净磁场，如果您在[此处](http://developer.android.com/reference/android/hardware/SensorManager.html)参考传感器管理器上的此 Android 文档，您会发现地球磁场的 MAX 和 MIN 值。

我的应用程序使用相同的范围来检测磁铁，并且工作正常。根据您需要的“混合度”，您可以根据需要调整值。

以防万一，我认为将磁铁靠近时，您没有注意到磁场值有任何显着差异，这是一些硬件问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:56:38.517

我猜你的设备测量的不是你的磁铁，而是地球的磁场。当您以这种方式连接值时，与设备的方向无关，您始终可以返回相同的值。除了返回值始终为 0 外，您只需测量任何内容，这可能是硬件故障。

# db2 - 降低 db2 中 count(*) 成本的方法

> ID：13757392
> 
> 赞同：1
> 
> 时间：2012-12-07T05:23:59.663
> 
> 标签：db2, query-optimization

嗨，我有一个 DB2 查询，如下所示

```
select count(*) as count from 
table_a,
table_b,
table c

where
b.xxx=234 AND
b.yyy=c.wedf 
```

结果集：

## 数数

618543562

对于上述查询，我​​什至尝试使用 Count(1)，但是当我采用访问计划时，成本是相同的。

```
select count(1) as count from 
    table_a,
    table_b,
    table c

    where
    b.xxx=234 AND
    b.yyy=c.wedf 
```

结果集：

## 数数

618543562

有没有其他方法可以降低成本。

PS: **b.xxx,b.yyy, c.wedf 被索引**..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:07:11.203

我认为问题之一是表格上的统计信息。你执行了**Runstats**吗？可能数据分布或必须读取的行数很多，DB2 得出结论最好读取整个表，而不是处理索引，然后从表中获取行。

似乎这两个查询都采用相同的**访问计划**，我认为他们正在执行**表扫描**。

三列是否属于同一个索引？或者它们被单独索引？如果它们是不同索引的一部分，访问计划中的索引之间是否有任何**ANDing ？**如果没有不同索引的 ANDing，则必须从表中读取列才能处理谓词。

count(1) 和 count(*) 给出相同成本的原因是因为两者都必须执行 TableScan。

请看一下访问计划，不仅是timerons的结果，还有步骤。访问计划是否采用索引？执行了多少种？

尝试更改**优化级别**，您会看到访问计划发生了变化。我认为您正在使用默认的 (5)

如果要强制查询考虑索引，可以创建[**优化配置文件**](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.perf.doc/doc/c0060612.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:22:14.260

（B，C）表和A表之间的关系是什么。在您的查询中，您只需在 A 和 (B,C) 之间使用[CROSS JOIN 。](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)所以这是主要的性能问题。

如果你真的需要这个计数，只需将 A 和 (B,C) 的计数相乘：

```
select
     (select count(*) from a) 
      * 
     (select count(*) from b, c where b.xxx=234 AND b.yyy=c.wedf ) 
```

对于 DB2，请使用：

```
 select a1.cnt*
            (select count(*) as cnt2 from b, c where b.xxx=234 AND b.yyy=c.wedf )
     from 
        (select count(*) as cnt1  from a) a1 
```

# bash - 让用户在 bash 中选择输出文件的名称

> ID：13757394
> 
> 赞同：0
> 
> 时间：2012-12-07T05:24:18.643
> 
> 标签：bash, grep, filenames

我有这个脚本，它对一些文件执行几个操作，然后在最后创建一个名为 flashable.zip 的输出文件。我想实现，当用户运行脚本时，它首先要求最后输出文件名。文件名预定义如下：1.22.33_DA.zip，用户可以在其中选择 1.22.33 部分 - 就像命名文件的版本一样。而且它必须严格，所以用户不要使用字母在 1.22.33 部分..

我确定我可以为此使用 grep 之类的东西，但我完全不知道该怎么做:(而且我对 bash 脚本还很陌生，所以我还在学习，我得到的脚本可能看起来很漂亮凌乱，可能可以清理一下:)

我认为它只是在操作完成后重命名创建的 zipfile 的东西，但我不确定..

这是我的脚本：

```
#!/bin/bash

echo ""
echo "[--- Creating flashable zip ---]"
echo ""

tlock=/home/dan/buildtool/flashable/template/system/media/theme/default
dst=/home/dan/buildtool/flashable/system/media/theme/default
src=/home/dan/buildtool/translations/ma-xml-4.0-danish/extras/lockscreen
parent=/home/dan/buildtool/flashable
src2=/home/dan/buildtool/apk_out
home=/home/dan/buildtool

cd $parent
mkdir system
cd system
mkdir app
mkdir framework
mkdir media
cd media
mkdir theme
mkdir audio
cd theme
mkdir default
cd $parent/system/media/audio
mkdir ringtones
mkdir alarms
mkdir notifications
cd $home

for apk in $(<$home/translation_list.txt); do cp -r -f "$src2/$apk" $parent/system/app; done

mv -f $parent/system/app/framework-miui-res.apk $parent/system/framework
cp -f $parent/template.zip $parent/flashable.zip
cp -f -r $parent/template/system/media/audio $parent/system/media

7za u -tzip $tlock/lockscreen.zip $src/advance
cp -f $tlock/lockscreen.zip $tlock/lockscreen
cp -f $tlock/lockscreen $dst
7za a -tzip $parent/flashable.zip $parent/system -mx3

rm -r $parent/system
cd /home/dan/buildtool 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:14:33.703

这将读入用户输入并通过正则表达式验证版本。

```
#!/bin/bash
echo -n "Enter version and press [ENTER]: "
read ver
[[ "$ver" =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]] && echo "${ver}_DA.zip" || echo "Invalid" 
```

**输出**

```
Enter version and press [ENTER]: 111.222.333
111.222.333_DA.zip

Enter version and press [ENTER]: 1.2222.33
Invalid

Enter version and press [ENTER]: 1.222.3333
Invalid 
```

**解释**

*   `read ver`将用户输入读入`ver`变量。
*   `^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$`

    1)`^`字符串的开始

    2) `[0-9]`0 到 9 之间的任意数字

    3)`{1,3}`匹配至少 1 到 3 个字符

    4）`\.`匹配一个点

    5）`\.[0-9]{1,3}`重复模式两次

    7)`$`匹配字符串结尾

# .net - 随着时间的推移，随着索引和文档数量的增加，elasticsearch 批量索引会变慢

> ID：13757398
> 
> 赞同：4
> 
> 时间：2012-12-07T05:24:41.613
> 
> 标签：.net, lucene, amazon-ec2, elasticsearch, nest

我正在体验使用 .NET NEST 客户端和 ElasticSearch 的批量索引性能随着时间的推移而降低，索引数量和文档数量都是恒定的。

我们`ElasticSearch Version: 0.19.11, JVM: 23.5-b02`在一个 m1.large Amazon 实例上运行，它带有 Ubuntu Server 12.04.1 LTS 64 位和 Sun Java 7。除了 Ubuntu 安装附带的东西之外，这个实例上没有运行其他任何东西。

**Amazon M1 大型实例**：来自[http://aws.amazon.com/ec2/instance-types/](http://aws.amazon.com/ec2/instance-types/)

```
7.5 GiB memory
4 EC2 Compute Units (2 virtual cores with 2 EC2 Compute Units each)
850 GB instance storage
64-bit platform
I/O Performance: High
EBS-Optimized Available: 500 Mbps
API name: m1.large 
```

ES_MAX_MEM 设置为 4g，ES_MIN_MEM 设置为 2g

每天晚上，我们在 .NET 应用程序中使用 NEST 索引/重新索引约 15000 个文档。在任何给定时间，只有一个索引包含 <= 15000 个文档。

首次安装服务器时，最初几天的索引和搜索速度很快，然后索引开始变得越来越慢。批量索引一次索引 100 个文档，一段时间后，完成批量操作最多需要 15 秒。在那之后，我们开始看到很多以下异常，并且索引停止了。

```
System.Net.WebException: The request was aborted: The request was canceled.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization) : 
```

构建索引实现看起来像这样

```
private ElasticClient GetElasticClient()
{
    var setting = new ConnectionSettings(ConfigurationManager.AppSettings["elasticSearchHost"], 9200);
    setting.SetDefaultIndex("products");
    var elastic = new ElasticClient(setting);
    return elastic;
}

private void DisableRefreshInterval()
{
    var elasticClient = GetElasticClient();
    var s = elasticClient.GetIndexSettings("products");
    var settings = s != null && s.Settings != null ? s.Settings : new IndexSettings();
    settings["refresh_interval"] = "-1";
    var result = elasticClient.UpdateSettings(settings);
    if (!result.OK)
        _logger.Warn("unable to set refresh_interval to -1, {0}", result.ConnectionStatus == null || result.ConnectionStatus.Error == null ? "" : result.ConnectionStatus.Error.ExceptionMessage);
}

private void EnableRefreshInterval()
{
    var elasticClient = GetElasticClient();
    var s = elasticClient.GetIndexSettings("products");
    var settings = s != null && s.Settings != null ? s.Settings : new IndexSettings();
    settings["refresh_interval"] = "1s";
    var result = elasticClient.UpdateSettings(settings);
    if (!result.OK)
        _logger.Warn("unable to set refresh_interval to 1s, {0}", result.ConnectionStatus == null || result.ConnectionStatus.Error == null ? "" : result.ConnectionStatus.Error.ExceptionMessage);
}

public void Index(IEnumerable<Product> products)
{
    var enumerable = products as Product[] ?? products.ToArray();
    var elasticClient = GetElasticClient();
    try
    {
        DisableRefreshInterval();

        _logger.Info("Indexing {0} products", enumerable.Count());
        var status = elasticClient.IndexMany(enumerable as IEnumerable<Product>, "products");

        if (status.Items != null)
            _logger.Info("Done, Indexing {0} products, duration: {1}", status.Items.Count(), status.Took);

        if (status.ConnectionStatus.Error != null)
        {
            _logger.Error(status.ConnectionStatus.Error.OriginalException);
        }
    }
    catch(Exception ex)
    {
        _logger.Error(ex);
    }
    finally
    {
        EnableRefreshInterval();
    }
} 
```

重新启动 elasticsearch 守护进程似乎没有任何区别，但删除索引并重新索引所有内容。但是几天后，我们将遇到同样的索引缓慢问题。

我刚刚删除了索引并在每次批量索引操作后重新启用刷新间隔后添加了优化，希望这可以防止索引降级。

```
...
...
finally
{
    EnableRefreshInterval();
    elasticClient.Optimize("products");
} 
```

我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T11:28:56.790

抱歉 - 刚刚开始写另一条很长的评论，并认为我会把它全部放在答案中，以防它对其他人有益......

**ES_HEAP_SIZE**

我在这里注意到的第一件事是您说您将弹性搜索的最大和最小堆值设置为不同的值。这些应该是一样的。在配置/init.d 脚本中应该有一个可以设置的 EX_HEAP_SIZE。请务必仅设置此值（而不是最小值和最大值），因为它将最小值和最大值设置为您想要的相同值。如果你不这样做，当你开始需要更多内存时，JVM 会阻塞 Java 进程 -[请参阅最近在 github 上关于中断的这篇精彩文章](https://github.com/blog/1397-recent-code-search-outages)（这里有一个引用）：

> 设置 ES_HEAP_SIZE 环境变量，以便 JVM 对最小和最大内存使用相同的值。将 JVM 配置为具有不同的最小值和最大值意味着每次 JVM 需要额外的内存（达到最大值）时，它都会阻塞 Java 进程来分配它。结合旧的 Java 版本，这解释了我们的节点在向公共搜索开放时引入更高负载和连续内存分配时表现出的暂停。elasticsearch 团队建议设置为系统 RAM 的 50%。

还可以查看[这篇很棒的帖子](http://asquera.de/opensource/2012/11/25/elasticsearch-pre-flight-checklist/)，了解更多来自战壕的 elasticsearch 配置。

**锁定内存以停止交换**

根据我的研究，我发现您还应该锁定 Java 进程可用的内存量以避免内存交换。我不是这个领域的专家，但有人告诉我这也会影响性能。您可以在 elasticsearch.yml 配置文件中找到 bootstrap.mlockall。

**升级**

Elasticsearch 还是很新的。计划相当频繁地升级，因为在您使用的版本 (0.19.11) 和当前版本 (0.20.4) 之间引入的错误修复非常重要。有关详细信息，请参阅[ES 站点](http://www.elasticsearch.org/download/)。您使用的是 Java 7，这绝对是正确的方法，我从 Java 6 开始并很快意识到它还不够好，尤其是对于批量插入。

**插件**

最后，对于遇到类似问题的其他人，请安装一个不错的插件，以了解您的节点和 JVM。我推荐[bigdesk](https://github.com/lukas-vlcek/bigdesk) - 运行 bigdesk，然后使用一些批量插入来点击 elasticsearch，并注意奇怪的堆内存模式、大量线程等，一切都在那里！

希望有人觉得这很有用！

干杯，詹姆斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:37:58.637

只是冒险猜测：

随着索引性能下降，您是否注意到索引占用了更多磁盘空间？

可能是这样的，而不是在重新索引时替换旧索引或旧文档，而是添加一堆新文档，有效地使文档数量增加一倍，并且可能使用大量重复的数据。可能值得抓住一个陈旧、缓慢的索引并将其加载到一些查看器中进行调试（例如[Luke](http://www.getopt.org/luke/)）。如果您看到的文档比您预期的要多得多，那么您可能会考虑让您的重建创建一个新索引来替换旧索引。

由于重新启动守护程序并不能解决问题，我想可以排除打开文件句柄、正在运行的进程、连接等，但我想检查这些统计信息，并确定我是否在服务器。

此外，关于优化，您可能会看到一些性能增强，当然，但这是一项非常昂贵的操作。我建议仅在完全重建完成后运行优化，而不是在每次增量批量索引操作后运行。

# python - 无法使用 flask.g 访问其他函数中的变量

> ID：13757399
> 
> 赞同：10
> 
> 时间：2012-12-07T05:24:49.100
> 
> 标签：python, flask

我试图用来`flask.g`存储可以在其他函数中访问的变量，但我似乎没有正确地做某事。当我尝试访问时，应用程序会生成以下错误`g.name`： `AttributeError: '_RequestGlobals' object has no attribute 'name'`。

的[文档](http://flask.pocoo.org/docs/api/#flask.g)`flask.g`说：

> 只需存储您想要的任何东西。例如数据库连接或当前登录的用户。

这是一个完整的最小示例，说明了我在尝试访问创建它的函数之外的变量时收到的错误。任何帮助将不胜感激。

```
#!/usr/bin/env python

from flask import Flask, render_template_string, request, redirect, url_for, g
from wtforms import Form, TextField

application = app = Flask('wsgi')

@app.route('/', methods=['GET', 'POST'])
def index():
    form = LoginForm(request.form)

    if request.method == 'POST' and form.validate():
        name =  form.name.data
        g.name = name

        # Need to create an instance of a class and access that in another route
        #g.api = CustomApi(name)

        return redirect(url_for('get_posts'))

    else:

        return render_template_string(template_form, form=form)

@app.route('/posts', methods=['GET'])
def get_posts():
    # Need to access the instance of CustomApi here
    #api = g.api
    name = g.name
    return render_template_string(name_template, name=name)

class LoginForm(Form):
    name = TextField('Name')

template_form = """
{% block content %}
<h1>Enter your name</h1>

<form method="POST" action="/">
    <div>{{ form.name.label }} {{ form.name() }}</div><br>
    <button type="submit" class="btn">Submit</button>    
</form>
{% endblock %}

"""

name_template = """
{% block content %}

    <div>"Hello {{ name }}"</div><br>

{% endblock %}

"""

if __name__ == '__main__':
    app.run(debug=True) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-07T05:33:26.990

该`g`对象是基于请求的对象，不会在请求之间持续存在，即在您的请求和您的请求`g`之间重新创建。`index``get_posts`

[Flask 中的应用程序全局变量](http://flask.pocoo.org/docs/api/#application-globals)：

> Flask 为您提供了一个特殊的对象，确保它只**对活动请求有效，并且将为每个请求返回不同的值**。简而言之：它做正确的事，就像它对请求和会话所做的那样。

对于请求之间微小数据的持久存储，请[`sessions`](http://flask.pocoo.org/docs/api/#sessions)改用。您可以（但不应该）将数据直接存储在`app`对象中以获得全局（所有会话）应用程序状态，类似于这样`config`做，如果您找到一个非常好的理由这样做。

对于更复杂的数据，请使用数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T06:26:08.147

如果您需要跟踪身份验证信息，我建议您使用 Flask 插件之一，例如[Flask-Login](http://packages.python.org/Flask-Login/)或[Flask-Principal](http://packages.python.org/Flask-Principal/)。

例如，我们使用 Flask-Principal。当有人进行身份验证（或检测到身份验证 cookie）时，它会发出身份加载信号。然后，我们将他们的登录身份映射到我们数据库中的用户。像这样的东西：

```
# not actual code
@identity_loaded.connect_via(app)
def on_identity_loaded(sender, identity):
  user = Person.query.filter(Person.username==identity.person.username).one()
  g.user = user 
```

然后我们可以在任何控制器或模板中使用 g.user 。（实际上，我们已经删除了很多内容，这是一个简单、懒惰的 hack，但带来的麻烦多于其价值。）

如果您不想使用模块，则可以在每个请求开始时挂接一个内置信号：

[http://flask.pocoo.org/docs/tutorial/dbcon/](http://flask.pocoo.org/docs/tutorial/dbcon/)

```
# This runs before every request
@app.before_request
def before_request():
    g.user = your_magic_user_function() 
```

然后 g.user 将神奇地随处可用。

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T16:24:09.310

只需在烧瓶中使用会话。在您的情况下，您只想在请求中保存用户/名称，最简单的方法是使用会话。

```
from flask import session
app.secret_key = 'some key for session' 
```

然后，您的功能可以更改如下：

```
@app.route('/', methods=['GET', 'POST'])
def index():
    form = LoginForm(request.form)
    if request.method == 'POST' and form.validate():
        session['name'] =  form.name.data
        return redirect(url_for('get_posts'))
    else:
        return render_template_string(template_form, form=form)

@app.route('/posts', methods=['GET'])
def get_posts():
    if 'name' in session:
        name = session['name']
    else:
        name = "Unknown"
    return render_template_string(name_template, name=name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-11T15:59:57.563

我想更深入地了解 g global 在存储数据中的使用。g 仅存储带有请求的数据，当重定向到另一个路由时，g 全局设置回 null，即重置为空。这意味着在一个请求中设置为 g 的任何内容都不能在另一个请求中访问。使用会话存储将跨请求访问的数据。

使用 g global 的一个好处是在连接到数据库以获取用户时。例如，可能是数据库中的管理员。管理员可以使用以下方法存储在 g 全局中。

```
from flask import Flask, g
app = Flask(__name__)

@app.before_request
def text():
    g.a = User.query.filter_by(email='admin@gmail.com')

@app.route("/getTrue", methods=['GET', 'POST'])
def getTrue():
    form = UserForm()
    if form.validate_on_submit():
        if g.a == form.email.data:
              return "Admin is logged in"
        else:
              return "User is logged in"
    return render_template('login.html', form=form) 
```

在上面的示例中， g 可用于保存将在另一个请求中使用的数据。我希望这会有所帮助。谢谢

# sql - SQL - 从两个表中查询

> ID：13757402
> 
> 赞同：0
> 
> 时间：2012-12-07T05:25:12.363
> 
> 标签：sql, postgresql

对于一个项目，我必须编写两个表并对它们进行查询。我已经编写了表格，但在查询部分需要一些指导。

这是第一张桌子。

```
CREATE TABLE Country
(Name VARCHAR(35) NOT NULL UNIQUE,
Code VARCHAR(4) CONSTRAINT CountryKey PRIMARY KEY,
Capital VARCHAR(35),
Province VARCHAR(35),
Area NUMERIC CONSTRAINT CountryArea
    CHECK (Area >= 0),
Population NUMERIC CONSTRAINT CountryPop
    CHECK (Population >= 0)); 
```

这是第二张桌子。

```
CREATE TABLE City
(Name VARCHAR(35),
Country VARCHAR(4),
Province VARCHAR(35),
Population NUMERIC CONSTRAINT CityPop
    CHECK (Population >= 0),
Longitude NUMERIC CONSTRAINT CityLon
    CHECK ((Longitude >= -180) AND (Longitude <= 180)) ,
Latitude NUMERIC CONSTRAINT CityLat
    CHECK ((Latitude >= -90) AND (Latitude <= 90)) ,
CONSTRAINT CityKey PRIMARY KEY (Name, Country, Province)); 
```

我的查询必须执行以下操作：

```
Return the min, max, and average latitude of all cities for all the countries in the table. 
And should be ordered by continent first and country second. 
```

这是在 PostgreSQL 中。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:33:36.493

您没有在问题中披露 RDBMS：是 MySQL*还是*PostgreSQL？

但是，这应该适用于以下两种情况：

```
SELECT 
      continent -- not quite sure what this refers to
    , ctr.Code AS country_code
    , avg(city.latitude) AS avg_population
    , min(city.latitude) AS min_population
    , max(city.latitude) AS max_population
FROM
    country ctr
    JOIN city ON ctr.Code = city.Country
GROUP BY 
      continent
    , ctr.Code
ORDER BY 
      continent
    , ctr.Code
; 
```

该`GROUP BY`子句使计算值引用 ctr.Code。

# c# - ASP.Net 平台是否独立？

> ID：13757404
> 
> 赞同：5
> 
> 时间：2012-12-07T05:25:20.860
> 
> 标签：c#, asp.net, .net, silverlight

在最近一次关于 Silverlight 和 SilverLight 优于 ASP.NET 的讨论中，有人提出 ASP.NET 不是平台独立的，但 Silverlight 是。这到底是什么意思呢 ？是/不是 ASP.NET 平台独立的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:37:41.417

ASP.NET 本身不是独立于平台的——它在 IIS 上运行，IIS 是在 Windows 上运行的 Web 服务器。ASP.NET的*输出***与**平台无关，因为它是原始 HTML/JavaScript/等。

Silverlight 可以被认为是平台独立的，因为它几乎可以由任何类型的 Web 服务器提供服务*，因为它不在服务器上执行*- 它只是传递给浏览器并在浏览器中执行的另一种类型的文件。但它并不是普遍独立于平台的，因为 Silverlight 组件无法在某些平台上运行（如 iPad），而 ASP.NET 的输出应该在这些设备上运行良好。

## 编辑：

从技术上讲（正如 Tom Tom 所指出的），如果您对使用相当于 v2.0 的 .Net 框架（来源[此处](http://www.mono-project.com/Mod_mono)）感到满意，您可以使用 Mono 框架在 Linux 上运行 ASP.NET。Mono 本身相当于框架的 v4.0，但 ASP.NET 相当滞后，*这意味着它不是一个真正可行的选择*，除非你真的决心免费做事（在这种情况下，为什么要使用 ASP.NET 2？改用 PHP 或类似的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:34:23.997

这是我在搜索时从网站得到的

> ASP.NET 本身并不是一种语言，而是一种使用 .NET 编程语言来构建动态网站和 Web 应用程序的 Web 技术。我想问题是.NET 是否独立于平台？
> 
> 我的回答是“目前，不”。.NET 正在慢慢迎头赶上，但要实现独立于平台还有很长的路要走。该框架目前仅适用于WINDOWS，不适用于其他操作系统。我会说它与语言无关。也就是说，任何针对 CLR 的语言都可以用来为应用程序编写代码。
> 
> 一个名为 MONO 的新项目正在进行中，它将允许在 LINUX 上安装 .NET 框架，但到目前为止，MS 还没有对此提供官方支持。

# android - 如何以加密格式保存传入的消息

> ID：13757405
> 
> 赞同：0
> 
> 时间：2012-12-07T05:25:21.997
> 
> 标签：android

我需要从这个特定号码接收短信，对其进行加密，然后在收件箱中发送。这样，我的信息就不会被处理我手机的任何人阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T05:35:33.993

尝试这样的事情

```
ContentValues values = new ContentValues();
values.put("address", "123456789");
values.put("body", "foo bar");
getContentResolver().insert(Uri.parse("content://sms/inbox"), values); 
```

我希望这有帮助

# javascript - 推特引导轮播标题与照片宽度不匹配

> ID：13757407
> 
> 赞同：0
> 
> 时间：2012-12-07T05:25:36.757
> 
> 标签：javascript, html, css, twitter-bootstrap, slider

我的 Twitter Bootstrap 轮播在大多数情况下工作得很好，但我的照片宽度不同，底部的标题与最宽的宽度相匹配，所以当我有宽度较小的照片时，标题在之前的宽度上保持黑色，看起来有点不专业。我的代码如下，我想知道是否有任何方法可以解决这个问题，所以宽度总是与照片匹配。

```
<div class="row">
    <div class="span8 offset2">
            <div id="myCarousel" class="carousel slide">

                  <div class="carousel-inner">

                 <!-- here I loop through and add a bunch of photos -->
                  {% for photo in record_photos %}

                    <div class="active item">
                        <a href="/url"><img src="some-src"></a>
                        <div class="carousel-caption">
                            <h3 class="center-it">some caption</h3>
                        </div>
                    </div>

                   {% endfor %}

                  </div>

                  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>

            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:34:09.837

我建议选择一个跨度尺寸，该尺寸将是您拥有的照片宽度的最佳尺寸，因为跨度将决定轮播宽度。较大的图像将缩小到跨度宽度。您可以通过将较小的图像放置在具有纯色（或透明）背景的较大图像中来“放大”它们。

Carousel 旨在显示其所在范围内的图像 - 可以想象，您可以动态更改宽度，但我个人认为图像之间的更改会在视觉上有些不协调，并且还会有后退/下一个按钮位置需要处理。

顺便说一句，请注意，在上面的模板代码中，每个项目都是活动的。您需要将一些逻辑放入循环中，以便只有第一个循环迭代产生具有活动类的项目

# php - 为什么数组 === 数组在 PHP 中等于 true？

> ID：13757410
> 
> 赞同：4
> 
> 时间：2012-12-07T05:26:04.903
> 
> 标签：php

在 php`===`中是相同的比较运算符，即检查两个变量是否具有相同的值并且属于相同的类型。但是为什么`array("asdf") === array("asdf")`返回真呢？我猜这两个都创建了具有相同内容的新数组（如果我错了，请纠正我）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T05:28:31.247

简单的答案：`array("asdf") === array("asdf")`返回 true，因为要比较的两个数组：

1.  具有相同的键/值对，
2.  每个相同的类型，和
3.  以完全相同的顺序。

就是这个`array() === array()`意思。

**好读**

[**数组运算符**](http://php.net/manual/en/language.operators.array.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T05:31:21.640

Equal `$a == $b`TRUE if `$a`is equal to `$b`after type juggling。

> 2 == "2"

相同的`$a === $b`TRUE 如果`$a`等于`$b`，并且它们是相同的类型。

> 数组（“asdf”）===数组（“asdf”）

不等于`$a != $b`TRUE 如果在类型杂耍之后`$a`不等于。`$b`

> 2 != "3"

不等于`$a <> $b`TRUE 如果在类型杂耍之后`$a`不等于。`$b`

> 2 <> "3"

不相等`$a !== $b`TRUE 如果`$a`不等于`$b`，或者它们不是同一类型。

> 数组（“asdf”）！==“asdf”

如果严格小于 ，则小于`$a < $b`TRUE 。`$a``$b`

> 99 < 100

大于`$a > $b`TRUE 如果`$a`严格大于`$b`。

> 100 > 99

如果小于或等于 ，则小于或等于`$a <= $b`TRUE 。`$a``$b`

> 0.32 <= 0.54

大于或等于`$a >= $b`TRUE 如果`$a`大于或等于`$b`。

> 2 >= 2

阅读本[手册](http://php.net/manual/en/language.operators.comparison.php)，了解 PHP 中的比较运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T05:29:30.563

这是你的答案

> $a === $b 标识 如果 $a 和 $b 具有相同的键/值对且顺序相同且类型相同，则为 TRUE。

[PHP 手动操作符](http://php.net/manual/en/language.operators.array.php)

# windows - 该进程无法访问该文件，因为在运行多线程 Maven 构建时它正被另一个进程使用

> ID：13757411
> 
> 赞同：-1
> 
> 时间：2012-12-07T05:26:47.477
> 
> 标签：windows, maven, maven-3

运行多线程 Maven 构建时遇到问题。问题很简单，两个线程试图访问同一个文件以复制它、传输它等。问题是我找不到一种方法来告诉 maven 告诉线程要么*等到*文件再次可访问，要么干脆解决这个问题。

多线程构建对我们来说是必要的，所以想知道这是否可以解决。提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2020-08-26T12:42:03.820

重新启动系统，它将关闭所有进程并解决问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-09-26T05:07:26.477

手动删除目标文件夹，因为 Windows 可能无法自行删除它们。然后尝试 mvn clean install

# java - 二叉搜索树中的下一个最大元素

> ID：13757413
> 
> 赞同：-3
> 
> 时间：2012-12-07T05:27:16.977
> 
> 标签：java, data-structures, binary-search-tree

我正在寻找一种简单的算法来查找二叉搜索树中的下一个最大元素（键），有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T05:37:51.000

假设通过“下一个最大”，您的意思是，当前节点所在位置的下一个最大节点......

从当前节点，向右走一次。你去了一个更高价值的节点。然后，尽可能多地向左走。您已在价值最低的节点处结束，该节点仍高于您开始的地方。

[![在此处输入图像描述](../Images/c9e53f2c7f0574dc39a8375986fe3ce2.png)](https://i.stack.imgur.com/kU8Ys.png)
[（来源：[ray at cs.lmu.edu](http://cs.lmu.edu/~ray/images/bstexample.png)）]

例子。从 60 岁开始，向右走一次，尽可能多地向左走。你最终到了 62 岁。

为 41 尝试同样的事情。你最终会在 42 岁。

编辑：

这应该有助于您的第二种情况。伪代码：

```
If (current.hasNoRightChild)
    testParent = current
    nextLargest = maxValueInTree
    While (testParent.hasParent)
        testParent = current.Parent
        If (testParent > current  && testParent < nextLargest)
            nextLargest = testParent
            While (testParent.hasLeftChild)
                testLeftChild = testParent.testLeftChild
                If (testLeftChild > current && testLeftChild < nextLargest)
                    nextLargest = testLeftChild
                End if
            End while
        End if
    End while
End if 
```

不能保证没有错误，但一般的想法是你检查每个父母，慢慢地工作到树的顶部。在每个节点处，您停下来看看它是否是“下一个最大”的候选者（即它大于您开始的节点并且小于当前猜测的下一个最大节点）。在这些站点中的每一个站点，如果节点大于您开始的位置，则您必须仅沿着左侧分支上该节点的子树向下探索，并沿途检查每个值。我认为应该这样做，但是您可能应该使用随机值对其进行大量测试，以确保没有我们忽略的任何其他情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:42:44.557

情况 1：右 (x) 是非空的后继 (x) = 右 (x) 中的最小值 情况 2：右 (x) 是空的 上树直到当前节点是左孩子：后继 (x) 是如果你不能走得更远（并且你到达了根），则为当前节点的父节点：x 是最大的元素

# php - 数据库查询 php MySQL - 不显示搜索结果

> ID：13757416
> 
> 赞同：2
> 
> 时间：2012-12-07T05:27:27.507
> 
> 标签：php, mysql, forms, form-submit

（问题非常详细，因为太久没有阅读：“我的猜测是我使用的 MYSQL_FETCH_ARRAY 错误。”）

你好！以下代码的目的是在数据库中进行基本搜索。数据通过表单传递。我使用的教程是由“Frost of Slunked.com”编写的，它是一个基本的注册/登录 php MySQL 教程，效果很好。我设法编写了一个 woking table-updater 函数和 form-submit 以向选定的对象添加新数据（这样可以按预期工作。

config.php - 连接到 MySQL 服务器，选择数据库，启动会话，需要 functions.php（包括作者评论）

```
<?php
/*****************************
    File: includes/config.php
    Written by: Frost of Slunked.com
    Tutorial: User Registration and Login System
******************************/
// start the session before any output.
session_start();

// Set the folder for our includes
$sFolder = ''; 

/***************
    Database Connection 
        You will need to change the user (user) 
        and password (password) to what your database information uses. 
        Same with the database name if you used something else.
****************/
mysql_connect('localhost', 'myusername', 'mypassword') or trigger_error("Unable to connect to the database: " . mysql_error());
mysql_select_db('tormex') or trigger_error("Unable to switch to the database: " . mysql_error());

/***************
    password salts are used to ensure a secure password
    hash and make your passwords much harder to be broken into
    Change these to be whatever you want, just try and limit them to
    10-20 characters each to avoid collisions. 
****************/
define('SALT1', '24859f@#$#@$');
define('SALT2', '^&@#_-=+Afda$#%');

// require the function file
require_once 'functions.php';

// default the error variable to empty.
$_SESSION['error'] = "";

// declare $sOutput so we do not have to do this on each page.
$sOutput="";
?> 
```

functions.php - 具有多种功能（登录、createRide、注册等）。大多数函数的目的是从提交的 HTML 表单中获取值，然后维护所需的操作 - 我只会提到我的 searchRide 函数（在我的猜测中它有错误或至少，必须对其进行处理）和 createRide功能，它工作正常。

```
<?php ...

unction searchRide($pWhen_min, $pWhen_max, $pFrom, $pTo){
    if (!empty($pWhen_min) && !empty($pWhen_max) && !empty($pFrom) && !empty($pTo)) {
        global $sql2, $query2;
        $sql2 = "SELECT * FROM ride WHERE `from` ='$pFrom' AND `to` = '$pTo' AND `when` >= '$pWhen_min' AND `when` <= '$pWhen_max' ";
        $query2 = mysql_query($sql2) or trigger_error("Query Failed: " . mysql_error());
    }
}
function createRide($pFrom, $pTo, $pWhen, $pSeats, $pPrice, $pCar){
    if (!empty($pFrom) && !empty($pTo) && !empty($pWhen) && !empty($pSeats) && !empty($pPrice) && !empty($pCar)){
        $sql = "SELECT id FROM users WHERE username= '" . $username . "' LIMIT 1";
        $result = mysql_query($sql);
        if(!$result) {
            trigger_error("ELKURTAD " . mysql_error());
        }
        $row = mysql_fetch_array($result);
        $sql = "INSERT INTO ride (`from`, `to`, `when`, `seats`, `price`, `car`, `u_id`)
        VALUES ('" . $pFrom . "', '" . $pTo . "', '" . $pWhen . "', 
        '" . $pSeats . "', '" . $pPrice . "', '" . $pCar . "', '" . $result . "');";

        $query = mysql_query($sql) or trigger_error("Query Failed: " . mysql_error());

        if ($query) {
            return TRUE;
        } 
    }
    return FALSE;
}

...?> 
```

searchRide.php - 检查专用于获取搜索过滤器值的变量是否具有任何值；（在 else 语句中）如果没有值，则表单未提交并显示 searchRide 表单，结果传递了 searchRide.php 的变量（ $_SERVER['PHP_SELF'] ）

```
<?php
require_once 'config.php';

$sOutput .= '<div id="searchRide-body">';

if (isset($_GET['action'])) {
    switch (strtolower($_GET['action'])) {
        case 'searchride':
        if (isset($_POST['when_min']) && isset($_POST['when_max']) && isset($_POST['from']) && isset($_POST['to'])) {
            if (searchRide($_POST['when_min'], $_POST['when_max'], $_POST['from'], $_POST['to'])) {
                while($row = mysql_fetch_array($query2)){
                    $sOutput .= "' ID: '" .$row['id'] . "' <br />
                    When: '" . $row['when'] . "' <br />
                    From: '" . $row['from'] . "' <br />
                    To: '" . $row['to'] . "' <br />
                    Seats left: '" . $row['seats'];

                }
            }
        }
    }
}else{
    if (isset($_SESSION['error'])) {
        $sError = '<span id="error">' . $_SESSION['error'] . '</span><br />';
    }

    $sOutput .= '<h2>Search for rides</h2>
        ' . $sError . '
        <form name="searchride" method="post" action="' . $_SERVER['PHP_SELF'] . '?action=searchride">
            From: <input type="text" name="from" value=* /><br />
            To: <input type="text" name="to" value=* />
            When_min: <input type="text" name="when_min" value=* />
            When_max: <input type="text" name="when_max" value=* />
            <br /><br />
            <input type="submit" name="submit" value="Search" />
        </form>
        <br />
        <h4>Would you like to <a href="index.php">Go back?</a></h4>';
}   
echo $sOutput . "<br />";

echo "TEST string" . "<br />";
echo $query2 . " query2<br /> ";
echo $sql2 . " sql2<br />";
echo $row . "<br />";
?> 
```

在这段代码的最后你可以看到一些打印出来的变量，这些变量用于在提交 searRide 表单后检查它们的值。我用以下数据更新了我的数据库，并使用 phpMyAdmin 检查了确切的值，以便我可以使用现有数据测试搜索：

从：TEST01 到：TEST02 时间：500 座位：5 价格：7 汽车：沃尔沃

使用 searchRide 表单提交的测试数据： From: TEST01 To: Test02 When_min: 1 Whn_max: 3000

按下 searchRide 表单上的 Search 按钮后，这些是以下结果（浏览器显示的内容）：

（s输出变量

测试写文本

资源 ID #5（query2 变量

SELECT * FROM Ride WHERE `from`='TEST01' AND `to`= 'TEST02' AND `when`>= '1' AND `when`<= '5000' （sql2 变量

（行变量

在此之后，我在 phpMyAdmin SQL 命令行中插入了 SQL 查询，并得到了我正在搜索的数据。

根据我自己的知识和在 google、php.net 和 w3chools.com 上的各种搜索，我多次尝试找出问题所在。我的猜测是我使用错误的 MYSQL_FETCH_ARRAY。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:56:21.987

以下条件将不起作用

```
if (searchRide($_POST['when_min'], $_POST['when_max'], $_POST['from'], $_POST['to'])) { 
```

由于您没有从 searchRide 函数返回任何值，因此您需要返回 true 才能进入条件。

# sql - 数据库是否应该验证用户是否有权执行操作

> ID：13757417
> 
> 赞同：0
> 
> 时间：2012-12-07T05:27:31.360
> 
> 标签：sql, database

数据库是否应该验证用户是否有权执行某些操作？

两个例子：

1）用户最多注册30支球队，只能看到这些球队的成绩单。我将 userid 和 teamid 传递给存储过程并仅在用户被授权查看记分表时才获取记分表。只传入 teamid 并事先检查所有团队用户注册的内容是否更合适？我应该两者都做吗？

2）目前我正在传递海报的用户标识和要删除的评论的评论标识，并且只有在满足两个条件时我才会删除评论 - 用户标识与海报标识匹配，评论标识与评论标识匹配 - 只是为了确定用户正在删除他自己的评论，而不是其他人的评论。是不是矫枉过正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:57:49.517

您的前端是一个更加友好（库、框架、最佳实践）的环境，可以实现您可能想到的任何访问限制或授权。在数据库中添加另一层只会增加很多复杂性并重复实现访问限制。

如果客户端直接针对数据库连接并执行命令，我只会考虑这样做。

因此，依靠应用程序提供的 id 并将您的精力花在清理用户输入和实施健全的身份验证模型上。你会需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:55:46.867

安全专家会告诉你，*再多的安全也不够*！但与此同时，您必须找到**平衡**黑白*安全性*和必然会影响应用程序*性能*的不必要的保护层。

首先回答您的**第二个**问题：最好同时传递*userid*和*commentid*并匹配两者，这样您就不会意外删除特定用户的所有评论。

现在来回答您的**第一个**问题：据我了解，您希望只有团队中的一部分用户能够查看团队的记分表，对吗？为此，仅传递用户所属的所有团队的*teamid 即可。*我不知道你这里的*授权*是什么意思！

**注意：** 我从理论角度回答了您的问题，不知道您的*表结构*或您的*存储过程*中写的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:49:35.220

多层验证是最佳实践，您的方法似乎不会导致额外的开销。只要确保限制连接到数据库一次，我发现运行数据库查询最昂贵的部分是连接和游标。

[http://msdn.microsoft.com/en-us/library/aa174437%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa174437%28v=sql.80%29.aspx)

# css - Firefox 中的 SVG 过滤器转换

> ID：13757420
> 
> 赞同：5
> 
> 时间：2012-12-07T05:27:46.427
> 
> 标签：css, firefox, svg, css-transitions, svg-filters

我试图在悬停时将图像从 50% 灰度滤镜转换为无滤镜状态。

然而，过渡在 Firefox 中不起作用。是否可以仅使用 css 在 Firefox 中运行转换？

```
img {
    filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'saturate\' values=\'0.5\'/></filter></svg>#grayscale"); /* Firefox 3.5+ */
    filter: gray alpha(opacity=50); /* IE6-9 */
    -webkit-filter: grayscale(50%); /* Chrome 19+ & Safari 6+ */
    -webkit-transition: all .6s ease; /* Fade to color for Chrome and Safari */
    -moz-transition: all .6s ease; 
    -ms-transition: all .6s ease; 
    transition: all .6s ease;
    -webkit-backface-visibility: hidden; /* Fix for transition flickering */
}
img:hover {
    filter: none;
    -webkit-filter: grayscale(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:56:14.903

因为标准过滤器语法是一个 url，所以它不适合转换。Gecko 必须实现正在构建的[过滤器效果](http://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html)规范的[简写](http://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html#ShorthandEquivalents)部分才能使其工作。

与此同时，您可以使用 SVG 动画来做到这一点，但不能仅通过 CSS。

# objective-c - Amazon S3 分段上传 iOS- 异常处理

> ID：13757421
> 
> 赞同：1
> 
> 时间：2012-12-07T05:27:54.883
> 
> 标签：objective-c, ios, amazon-s3, amazon-web-services, amazon

我有一个应用程序，我通过分段上传将大型视频上传到 S3 存储桶。虽然我已经能够成功地将超过 1 GB 的视频上传到存储桶，但我目前坚持异常处理过程。我尝试了不同的错误处理和重试逻辑方法，但亚马逊服务列表上没有明确的信息异常和处理它们的方法，至少对于 iOS 而言。这是一个问题，因为我已经看到人们关于奇怪异常的帖子。

是否有任何明确的 S3 异常处理方法。也许 SDK 的维护者之一可以提供帮助。

# debugging - matlab调试时如何记录日志？

> ID：13757423
> 
> 赞同：5
> 
> 时间：2012-12-07T05:27:55.137
> 
> 标签：debugging, matlab, logging

我想记录我的 matlab 代码输出的日志。因为我的matlab代码有点复杂，所以想通过日志来检查一下我的代码是对是错。

它可能与java中的“log4j”相同。

我在matlab中找不到记录日志的方法。如果有人可以给我一些建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T05:31:58.427

你是说[DIARY](http://www.mathworks.com/help/matlab/ref/diary.html)命令吗？

```
diary on 
```

将所有命令窗口的输入和输出记录到一个日志文件中。

# php - 无法在 pagodabox 上为 smarty 项目写入缓存文件夹

> ID：13757426
> 
> 赞同：1
> 
> 时间：2012-12-07T05:28:03.470
> 
> 标签：php, smarty3, server-configuration

我已经在 smarty 中创建了项目，现在我正在尝试将它托管在[pagodabox.com](http://www.pagodabox.com)上。我在 pagodabox.com 上创建了应用程序并将所有代码上传到此应用程序，但问题是现在我无法在 pagodabox.com 中配置缓存和编译器目录，这就是它输出胎儿错误的原因，因为缓存和编译器目录是只读模式。我尝试使用 Boxfile 解决此问题，但未能解决。我不知道如何使这些目录可写。请帮我。这是项目的网址，`http://moviestock.pagodabox.com/`以下是我的 Boxfile 配置

```
web1: #component type & number
  name: blog            #component settings
  shared_writable_dirs:
    - var/secured/cache
    - var/secured/compiler
    - var/sessions
  document_root: app
  php_version: 5.3.8 
```

我收到以下错误：

```
Fatal error: Uncaught exception 'SmartyException' with message 'unable to write file   
shared/secured/compiler/wrt50c17dfaca2932.90478039' in 
/var/www/libs/sysplugins/smarty_internal_write_file.php:44 Stack trace: #0 
/var/www/libs/sysplugins/smarty_internal_template.php(201): 
Smarty_Internal_Write_File::writeFile('shared/secured/...', 'compileTemplateSource() #2  
/var/www/libs/sysplugins/smarty_internal_templatebase.php(374): 
Smarty_Internal_TemplateBase->fetch('extends:layout....', '6666cd76f969564...', NULL, 
NULL, true) #3 /var/www/classes/BaseController.php(22): Smarty_Internal_TemplateBase-
>display('extends:layout....', '6666cd76f969564...') #4 
/var/www/secured/controllers/HomeController.php(6): BaseController->render('home') #5 
[internal function]: HomeController->indexAction('') #6 
/var/www/classes/Router.php(26): call_user_func_array(Array, Array) #7 
/var/www/index.php(10): Router::run() #8 in 
/var/www/libs/sysplugins/smarty_internal_write_file.php on line 44 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:12:34.350

我认为这与 smarty 试图写入的文件路径有关。在错误中，文件路径是`shared/secured/compiler/wrt50c17dfaca2932.90478039`. 它应该是`var/secured/compiler/wrt50c17dfaca2932.90478039`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:36:34.290

不确定，但也许`@chmod(PATH,0770);`会成功？

# c - 用于解析的 Sscanf 分隔符？

> ID：13757430
> 
> 赞同：7
> 
> 时间：2012-12-07T05:28:28.113
> 
> 标签：c, parsing, scanf

我正在尝试使用 sscanf 解析以下字符串：

```
query=testword&diskimg=simple.img 
```

如何使用 sscanf 解析出“testword”和“simple.img”？sscanf 的分隔符参数真的让我很困惑：/

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T05:39:00.900

如果你知道 "testword" 的长度总是 8 个字符，你可以这样做：

```
char str[] = "query=testword&diskimg=simple.img";
char buf1[100];
char buf2[100];

sscanf(str, "query=%8s&diskimg=%s", buf1, buf2); 
```

buf1 现在将包含“testword”，而 buf2 将包含“simple.img”。

或者，如果您知道 testword 将始终以 = 开头，后跟 &，并且 simple.img 将始终以 = 开头，您可以使用以下命令：

```
sscanf(str, "%*[^=]%*c%[^&]%*[^=]%*c%s", buf1, buf2); 
```

它非常神秘，所以总结一下：每个 % 表示一段文本的开头。如果在 % 之后有一个 *，这意味着我们忽略该块并且不将其存储在我们的缓冲区之一中。括号内的 ^ 表示该块包含任意数量的不是括号内字符的字符（^ 本身除外）。%s 读取任意长度的字符串，%c 读取单个字符。

所以总结一下：

*   如果字符不是 =，我们会继续读取和忽略字符。
*   我们读取并忽略另一个字符（等号）。
*   现在我们在 testword，所以我们继续读取字符并将其存储到 buf1 中，直到遇到 & 字符。
*   更多字符可供阅读和忽略；我们继续前进，直到我们再次点击=。
*   我们读取并忽略单个字符（同样是等号）。
*   最后，我们将剩下的内容（“simple.img”）存储到 buf2 中。

# optimization - DAG：最小化分组节点中条目之间的距离

> ID：13757435
> 
> 赞同：1
> 
> 时间：2012-12-07T05:28:37.057
> 
> 标签：optimization, directed-acyclic-graphs

我有一个有向无环图，其中的节点是连接到其他节点中条目的条目列表。有点像这样：

```
entry     ]
entry--|  ] node 1
entry  |  ]
-----  |
entry<-|  ] node 2
entry  |  ]
-----  |
entry  |  ] node 3
entry--|  ] 
```

节点内条目的顺序是固定的。这些条目存储在一个数组中，该数组具有它们链接到的条目的绝对索引。每个条目最多有 1 个链接，每个节点至少有 1 个链接。（换句话说，这是一个高度连通的图）。该图包含大约 100,000 个条目，分组在 40,000 个节点中。

我需要做的是通过重新排序节点来最小化条目之间的最大距离，以便我可以使用链接的相对索引并压缩底层数据结构。

因为压缩和性能是目标，所以添加外部数据（跳转表、列表中的特殊跳转元素）的解决方案是不可接受的。我真的需要一种算法来重新排序节点，以最小化条目之间的最大距离。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:26:51.290

您描述的问题是如何最小化最大距离。我认为这是 NP 难的，所以一个简单的解决方案不会很好。但是，您可以将其建模为 ILP 问题并为此使用一些求解器。

然后，您将最小化 M 作为目标。

约束将`M>= abs(s_i-e_i)`适用于所有链接`l_i`。`s_i`并`e_i`表示链接开始和结束条目的绝对索引。

这些条目可以根据它们所属的节点被重写，就像节点所属`s_i=n_i+c_i`的`n_i`索引和该节点内的固定偏移量（在其他条目中）一样。同样被重写。然后您就可以使用求解器进行优化了`s_i``c_i``e_i``n_i`

# javascript - 将 PHP 数组传递给 Google Maps API JavaScript 函数

> ID：13757442
> 
> 赞同：0
> 
> 时间：2012-12-07T05:29:17.047
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试创建一种方法来遍历一堆地址并输出与另一个地址在设定距离内的地址列表。所以在 WordPress 中，我有一个自定义的帖子类型，我正在循环并创建一个这样的地址数组，

```
<?php
$args = array( 'post_type' => 'friday_location', 'posts_per_page' => '-1' );
$arr = array();
$i=0;
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();

$meta = get_post_meta( $post->ID);

$string = $meta['_cmb_address'][0] . '+' . $meta['_cmb_city'][0] . '+' .$meta['_cmb_state'][0] . '+' .$meta['_cmb_zip'][0];
$string = str_replace(' ', '+', $string);

$arr[$i] = $string;
$i++;

endwhile; 
wp_reset_postdata();
?> 
```

在此之后，在脚本标签内部，我正在像这样转换数组

```
var locations = <?php echo json_encode($arr ); ?>; 
```

现在我有一个地址的 JS 数组，我想将此数组传递给 Google Maps API 距离矩阵，[https://developers.google.com/maps/documentation/javascript/distancematrix#distance_matrix_requests](https://developers.google.com/maps/documentation/javascript/distancematrix#distance_matrix_requests)

相关的代码看起来像，

```
function calculateDistances() {
    var opts = {
    center: new google.maps.LatLng(38.6,-98),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map'), opts);
    geocoder = new google.maps.Geocoder();

    var service = new google.maps.DistanceMatrixService();
    service.getDistanceMatrix(
    {
    origins: [origin2],
    destinations: locations,
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.IMPERIAL,
    avoidHighways: false,
    avoidTolls: false
    }, callback);
} 
```

我知道目的地可以带一个数组，所以我试图给它一个动态制作的，但是我不确定为什么它不工作，因为我在脑海中看到它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:42:13.033

这个：

```
var locations = <?php echo json_encode($arr ); ?>; 
```

应该是：

```
var locations = '<?php echo json_encode($arr ); ?>'; 
```

但这只是一个字符串，要获得一个数组：

```
var locations = '<?php echo json_encode($arr ); ?>',
         JSON = JSON.parse(locations),
    loc_array = [];

for(var key in JSON) {
    if(JSON.hasOwnProperty(key)) {
        loc_array.push(JSON[key]);
    }
} 
```

现在将该数组传递给 Google 函数：

```
service.getDistanceMatrix( 
{
   origins: loc_array,
...... 
```

# c# - 将日志文件存储在云端

> ID：13757446
> 
> 赞同：0
> 
> 时间：2012-12-07T05:29:30.177
> 
> 标签：c#, .net-2.0, cloud-storage

我开发了一个桌面应用程序，无需我在场即可使用。因此，我的程序可能会注册不同的事件——输入、执行的操作、工作时间。是否可以修改应用程序以将日志发送到任何云以远程查看报告？

我在 Wuala 和 Google Drive 上有帐户，但在其他地方注册没有问题（DropBox？SkyDrive？我不知道在这种情况下哪种云更容易工作）。

或者您可以提出另一个更优雅的解决方案。

我正在使用 C#、.Net 2.0。日志是简单的 .txt 文件。

# macos - 如何删除 NSTableView 的单元格之间的空间？

> ID：13757447
> 
> 赞同：10
> 
> 时间：2012-12-07T05:29:33.983
> 
> 标签：macos, cocoa, nstableview

我通过发送将 NSTableView 中的单元间距设置为 0：

```
[self.tableView setIntercellSpacing:NSMakeSize(0, 0)]; 
```

在窗口控制器中，`awakeFromNib`但行之间仍然有一个（可能是 1 像素宽）空白空间，我认为这是绘制网格线的地方，尽管我没有使用网格线。我怎样才能摆脱行之间的这个空间？

更新：

[NSTableView 文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40004125)似乎说，当单元间分隔设置为 0、0 时，这个 1 像素分隔应该消失。在我的情况下，它不是。也许这是一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T08:33:13.720

正如 trudyscousin 所建议的，我将发布我如何解决我的问题：

事实证明，当您像我一样将单元间距设置为 0 时，空白空间实际上会消失。我的问题是我的`NSTableCellView`子类中的绘图代码没有一直绘制到视图的边缘。我看到的差距不是小区间的分离，而是我的`NSTableCellView`子类的边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-21T04:35:25.137

就我而言，任务是使用**0.5 pt**（Retina 显示屏上 1 px）分隔符。似乎即使`intercellSpacing`设置为`.zero`（或在我的情况下为 0.5 pt）AppKit 在绘制选择时仍保留行之间的 1 pt 空间。

我最终通过子类化`NSTableRowView`。使用自定义行，我可以将分隔符设置为任何高度。这是一个 Swift 4.2 示例：

```
class WelcomeRecentDocumentsView: View {

   private lazy var tableView = TableView().autolayoutView()
   private lazy var scrollView = ScrollView(tableView: tableView).autolayoutView()

   override var intrinsicContentSize: NSSize {
      return CGSize(width: 240, height: 400)
   }

   private var recentDocumentsURLs = (0 ..< 10).map { $0 }
}

extension WelcomeRecentDocumentsView: NSTableViewDataSource {

   func numberOfRows(in tableView: NSTableView) -> Int {
      return recentDocumentsURLs.count
   }

   func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -> NSView? {
      return tableView.makeView(ItemView.self)
   }

}

extension WelcomeRecentDocumentsView: NSTableViewDelegate {

   func tableView(_ tableView: NSTableView, rowViewForRow row: Int) -> NSTableRowView? {
      // Returning custom RowView.
      return RowView(separatorHeight: separatorHeight, separatorColor: tableView.gridColor)
   }
}

extension WelcomeRecentDocumentsView {

   private var separatorHeight: CGFloat {
      return convertFromBacking(1)
   }

   override func setupUI() {
      addSubview(scrollView)

      let column = NSTableColumn(identifier: "com.example.column", resizingMask: .autoresizingMask)
      tableView.addTableColumn(column)
      tableView.columnAutoresizingStyle = .uniformColumnAutoresizingStyle
      tableView.headerView = nil
      tableView.setAutomaticRowHeight(estimatedHeight: ItemView.defaultHeight)
      tableView.intercellSpacing = CGSize(height: separatorHeight)
      tableView.gridStyleMask = .solidHorizontalGridLineMask
   }

   override func setupHandlers() {
      tableView.delegate = self
      tableView.dataSource = self
   }

   override func setupLayout() {
      LayoutConstraint.pin(to: .bounds, scrollView).activate()
   }

   override func setupDefaults() {
      tableView.sizeLastColumnToFit()
   }
}

extension WelcomeRecentDocumentsView {

   class RowView: NSTableRowView {

      let separatorHeight: CGFloat
      let separatorColor: NSColor

      init(separatorHeight: CGFloat = 1, separatorColor: NSColor = .gridColor) {
         self.separatorHeight = separatorHeight
         self.separatorColor = separatorColor
         super.init(frame: .zero)
      }

      required init?(coder decoder: NSCoder) {
         fatalError()
      }

      override func drawSelection(in dirtyRect: NSRect) {
         let rect = bounds.insetBottom(by: -separatorHeight)
         NSColor.alternateSelectedControlColor.setFill()
         rect.fill()
      }

      override func drawSeparator(in dirtyRect: NSRect) {
         let rect = bounds.insetTop(by: bounds.height - separatorHeight)
         separatorColor.setFill()
         rect.fill()
      }

   }

   class ItemView: View {

      static let defaultHeight: CGFloat = 52

      override var intrinsicContentSize: NSSize {
         return CGSize(intrinsicHeight: type(of: self).defaultHeight)
      }
   }
} 
```

# java - 根据出现次数在mongo中排序

> ID：13757449
> 
> 赞同：0
> 
> 时间：2012-12-07T05:29:37.640
> 
> 标签：java, mongodb, mongodb-query

我需要在我的网络应用程序中实现“流行关键字”，以便大多数搜索到的关键字将显示在那里。为此，我在 mongo 中创建了一个数据库。我需要从 mongo 检索数据，以便大多数出现的关键字应该排序并返回到我的页面。在 sql 中它就像， `select names,count(names) from keyword_db group by names order by names;`

需要java代码和mongo shell查询..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:02:09.983

您可能想尝试 mongo shell 查询（我按降序排序：

```
db.keyword_db.aggregate ( [ 
   { $group: { _id: "$names", count: { $sum: 1 } } }, 
   { $sort: { count: -1 } }  ] ) 
```

对于 Java 版本：

```
 DBCollection myColl = db.getCollection("keyword_db"); 

    // for the $group operator
    DBObject groupFields = new BasicDBObject( "_id", "$names");
    groupFields.put("count", new BasicDBObject( "$sum", 1));

    DBObject group = new BasicDBObject("$group", groupFields );

    // for the $sort operator

    DBObject sortFields = new BasicDBObject("count", -1);

    DBObject sort = new BasicDBObject("$sort", sortFields );

    // run the aggregation

    AggregationOutput output = myColl.aggregate(group, sort);

    System.out.println( output.getCommandResult() ); 
```

以下页面也可以帮助您：http:
[//docs.mongodb.org/manual/reference/sql-aggregation-comparison/](http://docs.mongodb.org/manual/reference/sql-aggregation-comparison/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:56:40.687

对于排序，您可以使用 following..1 升序和 -1 降序。

```
db.keyword_db.find( { names: "A" } ).sort( { user_id: 1 } ) 
```

而对于 groupBy 你可以使用聚合框架..

[http://docs.mongodb.org/manual/reference/method/db.collection.group/](http://docs.mongodb.org/manual/reference/method/db.collection.group/)

# jquery - visualforce 示例中的 jquery 选项卡不起作用

> ID：13757453
> 
> 赞同：0
> 
> 时间：2012-12-07T05:29:55.673
> 
> 标签：jquery, jquery-ui, salesforce, visualforce

嗨，我正在编写一个简单的 visualforce 页面源代码是

```
<apex:page >
  <!-- Begin Default Content REMOVE THIS -->

  <head>
   <apex:includeScript value="{!URLFOR($Resource.UIJQuery1822, 'js/jquery-1.7.2.min.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.Bootstrap, 'bootstrap/js/bootstrap.min.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.Bootstrap, 'bootstrap/js/bootstrap.js')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.Bootstrap, 'bootstrap/css/bootstrap.min.css')}"/> 
    <apex:stylesheet value="{!URLFOR($Resource.Bootstrap, 'bootstrap/css/bootstrap.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.Bootstrap, 'bootstrap/css/bootstrap-responsive.min.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.Bootstrap, 'bootstrap/css/bootstrap-responsive.css')}"/>

    <script type="text/javascript">
   $(function() {
        $( "#tabset" ).tabs();
    });
    </script>
  <Title>Hello World</Title></head>
  <Body>
  <div id="tabset">
  <ul>
  <li><a href="#panel1">Tab One</a></li>
  <li><a href="#panel2">Tab Two</a></li>
  <li><a href="#panel3">Tab Three</a></li>
  </ul>
  <div id="panel1"> Hello World1</div>
  <div id="panel2">Hello World2</div>
  <div id="panel3">Hello World3 </div>

  </div>
  </Body>

</apex:page> 
```

我正在尝试创建一组三个选项卡，但它显示一个无序列表和三个 div 元素没有选项卡，这意味着 jquery 代码不起作用。谁能告诉我为什么它不起作用，并给我建议如何让它起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:28:44.980

JQuery 文件是执行某些操作所必需的，而 jquery ui 是选项卡所必需的，请检查以下链接 jqueryui.com /tabs/ 带有 jquery code.jquery.com/ui/1.9.2/jquery-ui.js 的选项卡的必要文件code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css

# c - 使用 fwrite() 将结构写入文件

> ID：13757457
> 
> 赞同：6
> 
> 时间：2012-12-07T05:30:19.697
> 
> 标签：c, file, struct, fwrite

我有以下程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAXLEN 100

typedef struct {int key; char data[MAXLEN];} record;

main(int argc, char *argv[])
{
    int n, i;
    record x;
    FILE *fp;
    fp = fopen(argv[1], "w+");
    printf("How many records will be entered? \n");
    scanf("%d", &n);
    for (i=0; i<n; i++)
    {
        printf("Enter record: \n");
        scanf("%d", &x.key);
        scanf("%s", &x.data);
        fwrite(&x, sizeof(record), 1, fp);
    }
} 
```

我正在做的是从用户输入创建记录，然后将这些“记录”存储到文件中。但是，当我使用 fwrite() 时，创建的文件中写入了很多奇怪的字符，而不是简单地让每条记录都包含其键和数据。谁能告诉我为什么要写所有这些奇怪的字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T05:38:29.480

几个原因：

1.  当您使用 scanf 时，它会将人类可读的形式 (%d) 转换为计算机直接使用的形式 (int)。然后，您将计算机可读的表格写入文件。现在，当您查看文件时，您使用的不是计算机到人类可读的逆格式，而是更低级别的东西。这会给你一些看起来不对的东西。
2.  您正在写出整个 x.data，即使您可能已将部分数据读入其中（例如，读取长度为 10 的字符串）。x.data 的其余部分是“未初始化的”，并且包含调用 main() 时留在内存中的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T17:09:58.117

从软盘映像中读取 BIOS 参数块结构时，我也遇到了同样的问题。我通过使用`#pragma pack(1)`指令解决了它。示例代码如下：

```
#pragma pack(1)
struct bpb
{
    unsigned char jmpinstruction[3];
    unsigned char oem[8];
    short bytespersector;
    ....
};
#pragma pack() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:38:49.403

它将数据存储为二进制记录，而不是纯文本。

您将无法使用记事本查看它。

要查看记录，您必须编写另一个程序，将文件中的记录读取到相同的结构中。

# c# - 如何将 TableLayoutPanel 中的第一个控件集中在新按钮单击上

> ID：13757465
> 
> 赞同：0
> 
> 时间：2012-12-07T05:30:56.863
> 
> 标签：c#, winforms

我已经从基本表单继承了新的保存关闭按钮到所有表单。我在基本表单中编写代码以在单击新按钮时清除所有控件。

```
foreach (Control ctrl in cc)
{
    if (ctrl.GetType() == typeof(TextBox))
        ctrl.Text = "";

    else if (ctrl.GetType() == typeof(ComboBox))
    {
        ComboBox cb = ctrl as ComboBox;
        cb.SelectedIndex = -1;
        cb.Text = "";
    }
} 
```

此代码将清除所有文本框和组合框。现在我想在单击新按钮后关注第一个 TextBox。代码必须以基本形式编写，以便首先控制所有继承的形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:32:53.703

`TextBox`您可以使用 LINQ FirstOrDefault 从基本表单上的控件集合中获取第一个。稍后您可以调用它的[Focus](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.focus.aspx)方法。

```
TextBox firstTextBox = this.Controls.OfType<TextBox>().FirstOrDefault();
if(firstTextBox != null)
    firstTextBox.Focus(); 
```

# android - 每天报警不工作？

> ID：13757468
> 
> 赞同：0
> 
> 时间：2012-12-07T05:31:37.277
> 
> 标签：android, alarmmanager, alarm

好吧，我有一个应该每天都拨打的警报，但它不起作用。如果我每分钟设置一次它就可以工作，每小时都一样。这是我的报警电话：

```
 try {
         Calendar cal = Calendar.getInstance();
         cal.add(Calendar.MILLISECOND, 1);
         Intent intent = new Intent(this, AlarmReceiver.class);
         intent.putExtra("alarm_toast", "Working");
         PendingIntent sender = PendingIntent.getBroadcast(this, 092809, intent, PendingIntent.FLAG_UPDATE_CURRENT);

         AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
         am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 3600000*3, sender);
    } catch (Exception e1) {
        e1.printStackTrace();
    } 
```

我什至硬编码了启动时间，（目前测试它为 3600000*3 = 3 小时），但它也不是每天都有效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:48:57.320

请检查[这个](https://stackoverflow.com/questions/7342492/how-to-set-alarm-to-fire-everyday-at-800am)线程。你可能会得到解决方案。

# android - 当用户断开呼叫时如何显示选项屏幕？

> ID：13757471
> 
> 赞同：0
> 
> 时间：2012-12-07T05:31:55.513
> 
> 标签：android

当用户断开呼叫时如何显示选项屏幕？

![在此处输入图像描述](../Images/2576e998460d8df58909869b42751791.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:37:42.760

在此处检查 PhoneStateListener

[http://developer.android.com/reference/android/telephony/PhoneStateListener.html](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)

你也可以试试这些教程：

[http://www.botskool.com/geeks/how-listen-phone-events-android](http://www.botskool.com/geeks/how-listen-phone-events-android)

[http://www.tutorialforandroid.com/2009/01/get-phone-state-when-someone-is-calling_22.html](http://www.tutorialforandroid.com/2009/01/get-phone-state-when-someone-is-calling_22.html)

只需记录所有状态更改以检查挂断时触发的状态。

希望有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:41:18.033

它检测挂断按钮键事件。

```
 @Override
  public boolean dispatchKeyEvent(KeyEvent event) {
  int keyCode = event.getKeyCode();
  if (event.getAction() == KeyEvent.ACTION_DOWN) {
     if (keyCode == KeyEvent.KEYCODE_ENDCALL) {
        //do your work here
        return true;
     } else {
        return super.dispatchKeyEvent(event);
     }
  }
} 
```

# sencha-touch-2 - 双击应用程序内的按钮可能会导致 UI 损坏

> ID：13757472
> 
> 赞同：0
> 
> 时间：2012-12-07T05:31:55.290
> 
> 标签：sencha-touch-2

在Sencha Touch 2中有导航视图时双击快速按钮会在某些Android设备上将新视图推送到视图堆栈上两次，如何解决？不会发生在 iPhone 上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:58:24.790

如果您在单击时遇到问题，则将事件函数包装在延迟任务中......例如：

```
tap: function(button, e, eOpts) {
    if(this.delayedTask == null){            
        this.delayedTask = Ext.create('Ext.util.DelayedTask', function() {
            this.myFunctionToCall();
            this.delayedTask = null;
        }, this);
        this.delayedTask.delay(500);
    }
} 
```

所以在上面的例子中，如果另一个点击被注册并且 this.delayedTask 还没有为空，那么它不会创建新的延迟任务，它最终会在 500 毫秒后调用你需要的任何函数......希望这是有道理的，它也是一种在按钮上创建双击事件的方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T11:35:49.787

这个问题有点老了，但我在公司正在开发的应用程序中遇到了同样的问题。当按钮绑定到 Ajax 调用时，这尤其令人沮丧。

我收回了 Jeff Wooden 的解决方案来覆盖我的应用程序中的每个按钮：

```
Ext.define('MyApp.override.CustomButton', {
   override : 'Ext.Button',

   doTap: function(me, e) {

       if(this.delayedTask == null){      
           this.callOverridden(arguments); 

           this.delayedTask = Ext.create('Ext.util.DelayedTask', function() {
               this.delayedTask = null;
           }, this);
           this.delayedTask.delay(500);

       } else {
           console.log("Preventing double tap"); 
       }
   }
}); 
```

它是如何工作的？

*   每个按钮操作都会触发一个延迟任务，它将拦截按钮操作 500 毫秒，**从而防止双击**
*   这适用于“tap”和“handler:”，它们都通过“doTap”方法
*   这链接到当前按钮，因此它不会在其他按钮上回响

要使用它，只需将其添加到您的 app.js 'requires' 块中

```
 Ext.application({
        requires: [
            ...
            'MyApp.override.CustomButton',
            ...
             ], 
```

有用的来源：

*   [https://www.sencha.com/forum/showthread.php?173374-Ext-override()-on-Ext-components-in-ExtJS-4-x](https://www.sencha.com/forum/showthread.php?173374-Ext-override()-on-Ext-components-in-ExtJS-4-x)
*   [在 ExtJS 中覆盖类/属性的最佳实践？](https://stackoverflow.com/questions/14254321/best-practice-for-overriding-classes-properties-in-extjs)
*   这个帖子

# html - 如何使用 HTML 和 CSS 在 Blackberry OS6 Torch 设备中提供背景图像以覆盖整个页面

> ID：13757477
> 
> 赞同：0
> 
> 时间：2012-12-07T05:32:06.083
> 
> 标签：html, css, blackberry, blackberry-webworks

我正在使用 phonegap 在黑莓中开发一个应用程序。我正在使用 jquery mobile1.2.0 进行 UI 设计。问题是，在哪里提供背景图像以使其覆盖整个页面。发生的事情是，图像没有覆盖到应用程序中的整个页面，但我在浏览器中的整个页面上得到了相同的结果。为什么会发生这种情况或任何其他方式我可以获取页面的图像？我为背景图像编写的 CSS 是：

```
 .ui-mobile, .ui-mobile .ui-page {
    background-image: url("images/img_bg.jpg") !important;
    background-repeat: no-repeat !important;
    background-size: 100% 100% !important;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:12:25.720

你可以使用它，它使用
CSS3 - 黑莓浏览器可以使用 CSS3 支持 - [http://caniuse.com/#feat=background-img-opts](http://caniuse.com/#feat=background-img-opts)

```
.ui-mobile, .ui-mobile .ui-page  { 
       background: url('"images/img_bg.jpg"') no-repeat center center fixed;
       background-size: cover;
} 
```

**或者**

您可以使用 - [http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

# javascript - Three.js 看起来好像被翻转了

> ID：13757483
> 
> 赞同：3
> 
> 时间：2012-12-07T05:33:03.777
> 
> 标签：javascript, webgl, three.js

我在这里有一个演示：[测试站点](http://www.myuplay.com/game/test.html)或（[备份](http://direct.myuplay.com/game/test.html)）

出于某种原因，即使鼠标矢量正确，我的对象也总是旋转 90 度以支持正 Y 轴。据我所知，唯一可能出错的调用是 call: `ship.mesh.lookAt(mouse);`，每次屏幕动画时我都会调用它。

谁能告诉我该怎么做才能解决这个问题以及为什么要这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:33:27.370

`object.lookAt( position )`定向对象，使对象的局部正*z 轴*指向所需位置。

您的“船”前部指向本地正*y-axis 的方向*。

编辑：

要重新定位几何图形，请在创建几何图形后立即应用矩阵，如下所示：

```
geometry.applyMatrix( new THREE.Matrix4().makeRotationX( Math.PI / 2 ) ); 
```

# recommendation-engine - 如何使用矩阵分解生成推荐

> ID：13757489
> 
> 赞同：1
> 
> 时间：2012-12-07T05:33:36.057
> 
> 标签：recommendation-engine, latent-semantic-analysis

我已经阅读了推荐系统中的矩阵分解（潜在因子模型）的一些论文，我可以实现该算法。我可以得到与 MovieLens 数据集上的论文类似的 RMSE 结果。

但是我发现，如果我尝试通过对预测评分进行排名来为每个用户生成一个 top-K（例如 K=10）推荐电影列表，似乎被认为是所有用户评分最高的电影是相同。

这只是它的工作原理还是我有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:30:27.693

这是推荐中的一个已知问题。

它有时被称为“哈利波特”效应——（几乎）每个人都喜欢哈利波特。因此，大多数自动化程序会找出哪些项目通常很受欢迎，并将这些项目推荐给用户。

您可以过滤掉非常受欢迎的项目，或者将预测评分乘以一个越低全球受欢迎的项目的因子。

# facebook - Facebook 开放图形 API 自定义操作隐私

> ID：13757491
> 
> 赞同：1
> 
> 时间：2012-12-07T05:34:00.037
> 
> 标签：facebook, facebook-graph-api

我正在尝试更改自定义操作的隐私值。在我的个人资料中，我允许该应用程序公开，但我希望能够让用户在执行自定义操作时更改此设置。无论我为隐私传递什么，我的自定义操作的隐私级别始终是每个人......我如何让调用尊重我传递的隐私值？我知道我不能让它的私密性低于用户的最大设置，但我应该能够让它更加私密。

# ios - Facebook 照片 ios 上的多个标签

> ID：13757502
> 
> 赞同：1
> 
> 时间：2012-12-07T05:35:18.447
> 
> 标签：ios, facebook-graph-api, ios5, ios6, fb-graph

我正在使用 FB graph api 来标记多个朋友。我只能标记一个朋友。但没有与多个朋友一起取得成功。

对于单个用户：-

```
 NSString *photoID=@"23451245";
 [FB_Graph doGraphPost:[NSString stringWithFormat:@"%@/tags/%@?access_token=%@", photoID, @"1235234",[[NSUserDefaults standardUserDefaults]objectForKey:@"fb_accesstoken"]] withPostVars:nil]; 
```

对于多个用户：-

```
[FB_Graph doGraphPost:[NSString stringWithFormat:@"406435626092354/tags?tags=[{\"id\":\"100000947629523\"}, {\"id\":\"100000106756234\"}]?access_token=%@",[[NSUserDefaults standardUserDefaults]objectForKey:@"fb_accesstoken"]] withPostVars:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:30:12.873

标签

**创造：**

您可以通过向**标签**连接**PHOTO_ID/tags**发出**HTTP POST**请求来在**照片上创建****标签**。

 ********注意：**此功能旨在帮助用户在真实照片中标记他们的朋友。如果他们的朋友实际上不在该照片中，则不应使用此功能来鼓励用户标记他们的朋友，或者在合成照片中标记朋友。如果发现您的应用程序鼓励这种行为，您可能会禁用此功能。

您可以使用两种方法指定要标记的用户：在**URL**路径中作为**PHOTO_ID/tags/USER_ID**或在**URL**参数中作为**PHOTO_ID/tags?to=USER_ID**。要一次添加多个标签，您可以指定包含标签数组的 tags 属性，例如**PHOTO_ID/tags?tags=[{"id":"1234"}, {"id":"12345"}]**。目前，您无法使用此 API 在照片中标记[页面。](http://developers.facebook.com/docs/reference/api/page/)

标记照片需要**user_photos**和**publish_stream** [权限](http://developers.facebook.com/docs/reference/api/permissions/)，**publish_stream**是可选的 - 如果不存在，如果她/他启用了此隐私设置，则标记将通过标记人的标记审查。标记照片支持以下参数。

![在此处输入图像描述](../Images/cb34843bc2ab73176eff67954f8b396b.png) **有关更多详细信息，请访问[Facebook 开发者网站](http://developers.facebook.com/docs/reference/api/photo/)。********

# compiler-errors - 免费的基本编译器错误 23：找不到文件，libsupc++.a

> ID：13757506
> 
> 赞同：0
> 
> 时间：2012-12-07T05:36:05.353
> 
> 标签：compiler-errors, ubuntu-12.04, qbasic, freebasic

我正在尝试在 ubutu 12.04 中编译一个简单的 hello world QBASIC 程序。按照此处的说明下载并安装编译器。[http://www.freebasic.net/get](http://www.freebasic.net/get)

我也将它发布在 askubuntu.com [https://askubuntu.com/questions/226084/free-basic-compiler-error-23-file-not-found-libsupc-a#comment279100_226084](https://askubuntu.com/questions/226084/free-basic-compiler-error-23-file-not-found-libsupc-a#comment279100_226084)但报告在这里发布。这是我的简单 QBASIC 程序和编译细节。

```
print "hello word" 
```

我用它编译了

```
fbc hello.bas 
```

但我收到以下错误。

```
hello.bas() error 23: File not found, libsupc++.a

ld: cannot find -lncurses ld: cannot find -lsupc++ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:27:50.887

您的系统缺少`fbc`. 至少缺少一个包裹。`libsupc++`是`libstdc++`安装时安装的一部分`g++`。

查看[http://www.freebasic.net/wiki/wikka.php?wakka=CompilerInstalling上的列表](http://www.freebasic.net/wiki/wikka.php?wakka=CompilerInstalling)

在 Ubuntu 上，您至少需要以下软件包：

*   gcc, g++
*   libncurses5-dev
*   libx11-dev、libxext-dev、libxrender-dev、libxrandr-dev、libxpm-dev
*   libffi开发

`apt-get`您可以使用或`aptitude`或您选择的 GUI 包管理工具安装它们。

# html - 浏览器分裂 并嵌套 blocks that contain nested blocks. Why?

> ID：13757508
> 
> 赞同：3
> 
> 时间：2012-12-07T05:36:24.493
> 
> 标签：html, browser, html-parsing

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T05:38:17.983

HTML places certain restrictions on which elements can be nested in which other elements. Sometimes browsers will happily construct a nonsensical DOM out of certain nesting scenarios, such as a `<div>` directly in a `<ul>`. Other times, they absolutely can't because of other written or unwritten parsing rules, such as `<p>` elements never containing any other block elements, not even other `<p>` elements (this is [implied by the spec](http://www.w3.org/TR/html401/struct/text.html#h-9.3.1)), so they have to work around it by changing the DOM to something that they *can* work with, resulting in the behavior you observe.

Because you cannot nest `<p>` elements within one another at all, what's happening here is that this element:

```
 <p> Some line of code </p> 
```

is causing this other element to be terminated:

```
<p>
    This is a sample paragraph with a code block:
    <code> 
```

Since there's an empty `<code>` tag in there, it's closed, and the containing `<p>` closed as well, because a subsequent `<p>` start tag will automatically close a preceding `<p>` start tag:

```
<p>
    This is a sample paragraph with a code block:
    <code> </code>
</p> 
```

At this point a browser has to deal with the fact that the `<code>` and `<p>` tags are now effectively in the wrong order, but still nested. To compensate for the restructuring of the first "outer" `<p>` element, and the fact that there was going to be a `<code>` tag before the second "inner" `<p>`, it inserts `<code>` tags into the second `<p>`, turning its contents into code:

```
<p>
    <code> Some line of code </code>
</p> 
```

Since browsers do seem to allow `<p>` within `<code>` for whatever reason (note that at this point the `<code>` is still not yet *explicitly terminated* with a `</code>`), the browser builds the rest of the DOM as follows, before continuing on its way:

```
<code>
    <p> Another line of code </p>
</code> 
```

This is probably consistent across browsers for legacy and cross-browser compatibility reasons; some of these legacy parsing rules have been [retconned into sections of the HTML5 spec](http://www.w3.org/TR/html5/tokenization.html#tree-construction) as well. Unfortunately, I'm not a browser implementer so I can't list out all possible scenarios; on the other hand, it's unwise to rely on such details considering the markup you're writing is invalid in the first place.

And, finally, [today's highly relevant xkcd](https://xkcd.com/1144) (of course):

![Tags](../Images/7ab188c628ad8aa49e984c75ceffd950.png "<A>: Like </a>this.&nbsp;")

# javascript - 如何在选择标签中选择选项

> ID：13757515
> 
> 赞同：1
> 
> 时间：2012-12-07T05:37:16.083
> 
> 标签：javascript, jquery-ui, codeigniter

我需要添加 javascript 或 jquery 代码才能从组合框中选择选项。有 25 个组合框，并且有从数据库中读取的值。请在下面找到代码片段

需要选择用户选择的选项。它必须从数据库中读取。

```
<div class="control-group">
      <label class="control-label">A. Nails are Clean *</label>
      <div class="controls">
        <select name="obs_chart_nails_clean" >
            <option value="Always">Always</option>
            <option value="Sometimes">Sometimes</option>    
            <option value="Rarely">Rarely</option>               
        </select>
      </div>      
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:40:50.017

如果您将`id`属性添加到`select`

```
<select name="obs_chart_nails_clean" id="obs_chart_nails_clean"> 
```

并将**jquery**添加到您的页面，然后

```
$(document).read(function(){
    $("#obs_chart_nails_clean").val("Rarely");
}); 
```

将选择第三个选项。

你有什么服务器端？您应该能够生成已选择正确选项的 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:14:07.307

除了现有的答案之外，必须注意明显的 no-javascript 解决方案：

```
<select name="obs_chart_nails_clean" >
    <option value="Always">Always</option>
    <option value="Sometimes">Sometimes</option>    
    <option value="Rarely" selected>Rarely</option>               
</select> 
```

只需将`selected`属性添加到`option`s 之一。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T05:39:28.640

```
$(document).ready(function(){
    $('#obs_chart_nails_clean').val("Sometimes");
}); 
```

# android - 如何通过 TTS 获得时间说文本

> ID：13757516
> 
> 赞同：2
> 
> 时间：2012-12-07T05:37:16.783
> 
> 标签：android, multithreading, time, text-to-speech

我正在开发一个使用多个线程和 tts 的应用程序。线程的执行取决于 tts 说出文本所花费的时间，所以我的问题是，

***在 tts 开始说话之前，我们可以在几秒钟内得到时间来通过 tts 说出完整的文本吗？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-01T18:04:53.820

我还没有找到一种方法来找出说出特定话语需要多长时间。但是，如果您的意图只是想知道一个话语何时*完成*，则有回调。

[https://developer.android.com/reference/android/speech/tts/UtteranceProgressListener.html#onDone(java.lang.String)](https://developer.android.com/reference/android/speech/tts/UtteranceProgressListener.html#onDone(java.lang.String))

根据您的用例，这实际上可能会更好。我这么说是因为发言请求会排队，可能不会立即发言。更不用说 TTS 引擎是在另一个进程中运行的服务，并且请求朗读文本会产生一些开销。因此，即使您知道某个字符串需要 5 秒才能说出，也不一定会在调用 5 秒后说出`speak()`。

# ruby-on-rails - 用于静态类型 JIT 语言的 html 中的嵌入代码可能吗？

> ID：13757517
> 
> 赞同：0
> 
> 时间：2012-12-07T05:37:18.043
> 
> 标签：ruby-on-rails, jit, eruby

是否有可能设计一种静态类型的 JIT 语言来构建像 Ruby on Rails 这样的 Web 框架，以尝试获得静态类型语言的速度？

html 中的嵌入式 Ruby (eRuby) 是 Ruby on Rails 的一项功能，我看不到在静态类型的 JIT 或编译语言中实现的明显方法。

我不熟悉 Ruby on Rails 实现的内部结构，但更一般地说，Ruby on Rails 是否还有其他功能很难用静态类型的 JIT 或编译语言实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:46:54.590

当然。它不一定能实现您想要的（动态类型只是使优化更难的许多事情之一，您所知道的“快速”语言在静态类型之外进行了许多权衡以实现该性能），但这是完全可能的。事实上，它正在完成。ASP.NET MVC 拥有 Razor 视图引擎已经有一段时间了，它具有静态类型的模板语言。与 C#/VB.NET 相比，少数限制（例如，我认为您不能声明类）是设计决策，而不是技术问题。基本上，您需要做的就是解析模板，从代码中分离（例如）HTML，并生成输出应根据模板输出的字符串的代码。

现在，Ruby on Rails 专门大量使用了 Ruby 的动态特性。虽然许多“静态类型”语言确实具有反射功能，可以实现类似的东西（尽管更冗长），并且其他元编程结构可以很好地输入，但我怀疑你可以简单地将 RoR 移植到运行静态类型语言，尤其是如果您希望最终结果在任何地方都方便。受现有框架的启发，创建一个新框架可能会更好。这已经完成了。一千次。按语言。

# javascript - 向导的Backbonejs条件路由

> ID：13757527
> 
> 赞同：0
> 
> 时间：2012-12-07T05:38:06.563
> 
> 标签：javascript, backbone.js, wizard

我正在尝试使用backbonejs 创建一个小向导，其中某些问题的答案决定了通过向导的路径。在backbonejs中有没有办法评估模型的当前状态并相应地导航到下一页？或者是否有另一种以骨干网方式实现最佳效果的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:45:26.267

您可以让您的路由器订阅模型的“更改”或“更改：[属性]”事件，然后相应地更改路由和页面

或者当你想去一个新页面时调用路由器的导航功能

```
router.navigate("question1/option1", {trigger: true}); 
```

这将更改 url 并触发您为“question1/option1”设置的路由

因此，如果您的路由器是：

```
router = Backbone.Router.extend({
    routes:  {
       "question1/option1": "answer1"
    },
    answer1: function() {
        //change the page / or take whatever other action you want.
    } 
```

将调用 answer1 函数来设置您的下一页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:34:24.940

我认为最好的方法是将每个答案视为不同的路线。这样，当用户选择答案时，路线就会改变，您可以在路由器中相应地加载/更改视图。请务必在路线中使用变量，例如

```
routes: {
        ":question/:answer": "checkAnswer"
    } 
```

问题和答案是变量

希望这可以帮助

# javascript - 如何将文本节点拆分为每个 3 个单词的跨度？

> ID：13757531
> 
> 赞同：3
> 
> 时间：2012-12-07T05:38:21.213
> 
> 标签：javascript, jquery, string, performance

假设我有这个 div：

```
<div> Let's say these are the words in my div </div> 
```

我知道我可以通过这种方式将 div 中的每个单词包装成一个跨度

```
$("div").contents().wrap('<span class="wrapper"/>');
//output:  <div><span class="wrapper"> Let's say these are the words in my div</span> </div> 
```

但是，我想实现这一目标：

```
<div>
    <span class="wrapper">Let's say these</span>
    <span class="wrapper">are the words</span>
    <span class="wrapper">in my div</span>
</div> 
```

***每个特定数量的单词（本例：每 3 个单词）将被分成一组，并且每组单词要单独包装。***

* * *

这些是我首先想到的：

1）我认为可以通过使用`text()`获取字符串并`split(' ')`形成一个数组来实现，每个元素包含一个单词，编写一个while循环来操作数组：

```
var a = 0;
var b = array.length;
while (a<b) {
    array[a] = "<span class="wrapper>" +  array[a]";
    a +=2;
    if (a>b) {
        a = b-1;
    }
    array[a] = array[a] + "</span>";
    a++;
} 
```

然后只需简单地`.join('')`将数组组成一个字符串和`$("div").html(string)`;

* * *

2）或者我可以在获得 with 后简单地使用正则表达式`text()`：

对包含的表达式进行全局搜索`a word + a space + a word + a space + another word`

> `/(\w+\s+\w+\s+\w+)/g`

将其替换为包裹在跨度中

> `<span>$1</span>`

如果有的话，在执行奇数输出`html()`之前的输出。`$("div").contents().eq(2).wrap('<span class="wrapper"/>')`

* * *

这些是我想出的，我想知道，除了这些还有更好的方法吗？

实现它的最佳方法是什么（最快且需要最少的内存）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T05:42:34.110

这应该做你想要的：

在这里演示：http: [//jsfiddle.net/UQk7r/](http://jsfiddle.net/UQk7r/)

```
$("div").each(function() {
    var out = [];
    var words = $(this).text()..trim().split(' ');
    for (var i = 0; i < words.length; i += 3) {
        out.push('<span class="wrapper">' + words.slice(i, i+3).join(' ') + '</span>');
    }
    $(this).html(out.join(' '));
}); 
```

这是 DOM 版本（没有 jQuery）：

演示在这里：http: [//jsfiddle.net/cCege/2/](http://jsfiddle.net/cCege/2/)

```
var divs = document.getElementsByTagName('div');
for (var i = 0; i < divs.length; i++) {
    var out = [];
    var words = divs[i].innerText.trim().split(' ');
    for (var j = 0; j < words.length; j += 3) {
        out.push('<span class="wrapper">' + words.slice(j, j+3).join(' ') + '</span>');
    }
    divs[i].innerHTML = out.join(' ');
} 
```

最后，这是一个 DOM + RegEx 版本......这应该是你的最佳表现：

演示：http: [//jsfiddle.net/Xgm5q/1/](http://jsfiddle.net/Xgm5q/1/)

```
var divs = document.getElementsByTagName('div');
for (var i = 0; i < divs.length; i++) {
    divs[i].innerHTML = '<span class="wrapper">' 
            + divs[i].innerText.trim().replace(/(([^\s]+\s+){2}[^\s]+)\s+/g, '$1</span> <span class="wrapper">')
            + '</span>';
}​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T06:18:20.953

对于性能：

```
var elems = document.getElementsByTagName('div');

for (var j=elems.length; j--;) {
    var txtArr = elems[j].textContent.replace(/([a-zA-Z]+)\s([a-zA-Z]+)\s([a-zA-Z]+)/g, '$1 $2 $3* ').split('*'),
        txtElm = document.createDocumentFragment(),
        span   = document.createElement('span');

    for (i=0; i<txtArr.length; i++) {
        if (/\S/.test(txtArr[i])) {
            var sp   = span.cloneNode(true),
                text = document.createTextNode(txtArr[i]);

            sp.appendChild(text);
            txtElm.appendChild(sp);
        }
    }

    elems[j].innerHTML = '';
    elems[j].appendChild(txtElm)
}
​ 
```

[**小提琴**](http://jsfiddle.net/x2vfZ/)

# spring - spring web flow：使用父名称在子视图上动态设置下拉列表

> ID：13757534
> 
> 赞同：1
> 
> 时间：2012-12-07T05:38:38.187
> 
> 标签：spring, jquery, web, workflow

我是春季网络流的新手。我正在尝试根据前一个（父）视图中设置的值/值动态地在视图（子）上加载下拉列表。

因此，从视图中选择代理列表，然后单击“下一步”，将为每个代理加载玩家下拉列表。因此，如果有三个代理，则会显示下拉框，并填充与这三个代理对应的玩家列表。我的服务方法接受一个字符串并返回一个包含玩家姓名的数组列表

public List getPlayersForAgent(String agentName);

所以我想做的是当子（玩家）视图被加载（即用户在代理视图上单击下一步）时，将填充玩家下拉列表（即，服务方法将使用不同的代理名称调用 3 次） . 如何在 Spring Web Flow 中传递参数并动态加载下拉列表。这可能使用 jquery ajax 调用吗？

# web-services - SOAP Web 服务基础知识

> ID：13757535
> 
> 赞同：0
> 
> 时间：2012-12-07T05:38:42.057
> 
> 标签：web-services, soap, soapui

我是 WS 的新手。我心中有一些简单的问题，请尝试解决。

1.  我在calculator() 上为*Calculator*做了一个演示WS ，它有一个UI，我在其中输入值，在内部将其传递给WS。好的，我得到了答案/输出。但如果我只想创建获取/提供 xml 数据或只提供 xml 数据的 web 服务。我该如何创建它。

2.  我发现了一些关于一些名气公司*的 WS URL 。*是否通过打开连接使用。他们如何定义这个 URL？当我去创建新的 WS 时，我正在使用 MyEclipse10，需要使用 Java Bean 类来创建它。好的，如果我创建 myWS url 那么它将如何被调用？因为它是JavaBean？

3.  如果只是想创建 WS 那么我不需要创建*新的 WS 客户端*？

我不知道这很简单或可能是愚蠢的问题，当我走在 WS 上时，我停在这里。我觉得，没有基本知识就开始构建它。

请清除它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:44:47.897

MyEclipse（以及 Eclipse、IBM D Developer 等）允许您通过以下两种方式之一创建 Java Web 服务服务器：

*   自底向上 Java Bean：你提供一个 bean，它把它变成一个 WSDL（并生成相应的存根代码）

*   自顶向下 WSDL：您提供一个 WSDL，它会生成相应的存根代码

当一家公司创建一个网页时，他们会设置一个 Web 服务器并在其上发布一些 HTML 页面。

当一家公司发布 WSDL 时，他们*还*设置了一个 Web 服务器……并在其上发布一个 XML WSDL。

为了读取 WSDL 而访问的 URL 只是一个普通的 HTTP Web 服务器，它恰好在该位置提供 XML WSDL。

WSDL 指定服务的*位置*，以及*服务*使用的操作和数据类型。您创建的 WSDL，或由其他公司发布的 WSDL。

'希望有帮助

# php - jQuery动态下拉框ajax

> ID：13757539
> 
> 赞同：4
> 
> 时间：2012-12-07T05:38:53.927
> 
> 标签：php, jquery, ajax

我目前有两个下拉框和一个文本框。

我正在使用数据库查询来填充第一个下拉框，并使用 ajax 来填充第二个下拉框，具体取决于在第一个下拉列表中选择的值。一旦从第二个下拉列表中选择了一个选项，我也会使用 ajax 来填写输入文本框。

我的问题是，使用我当前的代码，当我从第一个下拉列表中选择一个选项时，虽然它确实使用从 ajax 返回的数据填充了第二个下拉框，但我也希望它也可以 ajax 输入框并返回该值在第二个下拉值更新的同时。

```
 $( "#manufacturerOpts" ).change(function(){
            val1 = $(this).attr("value");
            $.ajax({
               url: "inc/class/data.php",
               type: "POST", 
               data: "manu="+val1,
               cache: false,
               success: function (html1) {   

               $('#modelOpts').html(html1);

               val2 = $("#modelOpts option").attr("value");

              $.ajax({
               url: "inc/class/data.php",
               type: "POST", 
               data: "mod="+val2,
               cache: false,
               success: function (html2) {  
               $('#powerOpts').html(html2);    
               }
              });
                }
              });

    });

    $( "#modelOpts" ).change(function(){
            val1 = $(this).attr("value");
            $.ajax({
               url: "inc/class/data.php",
               type: "POST", 
               data: "mod="+val1,
               cache: false,
               success: function (html1) {  $('#powerOpts').attr("value",html1);  }
              });

            // $("#modelOpts").selectmenu('refresh', true);
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T05:56:04.457

您可以修改您的请求以发送文本框的值以及下拉菜单选项

```
$.ajax({
    url: "inc/class/data.php",
    type: "POST", 
    data: "manu="+val1,
    dataType: 'json',
    success: function (data) {
        $('#modelOpts').html(data.modelOpts);
        $('#powerOpts').html(data.powerOpts);    
    }
}); 
```

在您的服务器端代码中，您可以轻松找出`modelOpts`下拉列表的第一个选项的值并将其发送

```
$data = array('modelOpts' => modelOptsHtml, 'powerOpts' => powerOptsHtml);
echo json_encode($data); 
```

# c++ - clang_complete vim 扩展不适用于 STL

> ID：13757544
> 
> 赞同：1
> 
> 时间：2012-12-07T05:39:52.837
> 
> 标签：c++, vim, editor, clang, clang-complete

我在 Linux 系统上安装了 clang 和 clang_complete。我将以下几行添加到我的`.vimrc`：

```
let g:clang_user_options='|| exit 0'
set completeopt-=preview 
```

自动完成适用于我自己的代码。但是，它不适用于 STL 容器。即使我只是键入`std::`，我也会在屏幕底部看到“用户定义的完成 - 未找到模式”。问题是什么？

我使用 Vim 7.3 和 clang_complete 1.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:33:52.027

解决方法是告诉 clang_complete 使用 clang 库（而不是二进制）进行解析。这是通过将以下行添加到`.vimrc`：

`let g:clang_use_library=1`

# android - webview detuct html标签如何android

> ID：13757547
> 
> 赞同：-2
> 
> 时间：2012-12-07T05:40:29.327
> 
> 标签：android, html, webview, tags

```
articleText.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    WebView.HitTestResult hr = ((WebView)v).getHitTestResult();

                   Logger.logInfo(tag, "getExtra = "+ hr.getExtra() + "\t\t Type=" + hr.getType()); 
```

// 我用视频 url 构建 html 文件，如何在 webview 中获取视频类型和 url？

//我仍然在苦苦挣扎如何获得视频类型和网址........请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:51:42.067

您可以将 WebView onTouch 中的 HTML TAG 检测为：

```
articleText.setOnTouchListener(new OnTouchListener() {

@Override
public boolean onTouch(View v, MotionEvent event) {
WebView.HitTestResult hr = ((WebView)v).getHitTestResult();

Logger.logInfo(tag, "getExtra = "+ hr.getExtra() + 
          "\t\t Type=" + hr.getType());

int resultType = result.getType();

switch (resultType){  
  case HitTestResult.ANCHOR_TYPE:
    Log.v("HitTestResult.ANCHOR_TYPE");
  break;
  case HitTestResult.IMAGE_ANCHOR_TYPE:
    Log.v("HitTestResult.IMAGE_ANCHOR_TYPE");
  break;
  case HitTestResult.SRC_ANCHOR_TYPE:
    Log.v("HitTestResult.SRC_ANCHOR_TYPE");
  break;
  case HitTestResult.SRC_IMAGE_ANCHOR_TYPE:
    Log.v("HitTestResult.SRC_IMAGE_ANCHOR_TYPE");
  break;
  default:
    Log.v("Invalid");

  }
} 
```

# python - 使用自定义函数在视图中获取 django 错误

> ID：13757551
> 
> 赞同：0
> 
> 时间：2012-12-07T05:41:01.810
> 
> 标签：python, django

我正在使用基于 django 类的视图

```
class MyView(TemplateView):
    def return_JSON(self, object_id):
        parent = models.UserForm.objects.get(pk=object_id)

url(r'^return/(?P<object_id>\d+)/json/', views.MyView().return_JSON, name="return_json") 
```

我收到这个错误

```
return_JSON() got multiple values for keyword argument 'object_id' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:49:17.567

你在这里做的很奇怪。

您正在使用 CBV，但将函数作为视图函数传递。请记住，CBV 的正常签名是传入`MyCBV.as_view()`. `as_view()`没有 CBV 机器在不通过或运行的情况下运行`dispatch()`。

但如果你坚持，你只需要为你的函数添加一个新参数......

```
def return_JSON(self, request, object_id):
    #                 ^^^^^^^ this
    return http.HttpResponse("Foo!") 
```

# mysql - Mysql排名查询赋值

> ID：13757552
> 
> 赞同：3
> 
> 时间：2012-12-07T05:41:03.040
> 
> 标签：mysql

我想要一张这样的桌子

显示我们拥有的书籍，按页数排列。我们希望使用 50 页范围来对页数进行排名。这意味着任何页数为 500-549 的书都具有相同的排名；页数 550-599 具有相同的排名；页数 600-649 具有相同的排名；页数 650-699 具有相同的排名，等等。在示例显示中，我们有四本书都在排名 3。请注意，我们没有跳过排名数字 - 检查前两个示例行。不要对最大页数值做出假设。在设计查询的逻辑时。不要使用表中的当前数据集来决定逻辑。

```
+---------+------------+------+
| Book_ID | Page_count | Rank |
+---------+------------+------+
| 1001 | 2000 | 1 |
| 1587 | 1300 | 2 |
| 8546 | 982 | 3 |
| 8415 | 980 | 3 |
| 1474 | 976 | 3 |
| 1444 | 970 | 3 |
| 1524 | 918 | 4 |
| 2005 | 894 | 5 |
| 200 | 879 | 5 |
| 201 | 850 | 5 |
| 4574 | 825 | 6 |
| 6584 | 825 | 6 | 
```

编辑：现在我有

```
SELECT b.book_id AS Book_ID, b.page_count as Page_Count, (
SELECT COUNT(DISTINCT page_count)
FROM a_bkinfo.books as b2
WHERE b2.page_count >= b.page_count
) as Rank
FROM a_bkinfo.books as b
ORDER BY Page_Count DESC 
```

现在我得到了这个结果

```
Book_ID  Page_Count Rank
1448    3192    1
1306    2895    2
1979    1368    3
1678    1002    4
1677    982     5
1689    980     6 
```

我需要弄清楚如何做 50 页范围

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:46:57.447

我想你正在寻找这样的东西：

```
select
  book_id,
  page_count,
  (select count(distinct b2.page_count DIV 50)
   from books b2
   where b2.page_count DIV 50 >= books.page_count DIV 50) as page_rank
from books
order by page_count desc 
```

# php - 为什么其他人在我的网站上收到 404？（使用PHP就可以了）

> ID：13757556
> 
> 赞同：1
> 
> 时间：2012-12-07T05:41:33.307
> 
> 标签：php, html, apache, .htaccess, web

所以我可以访问我学校域名上 /www 文件夹上的主机，问题是只有学校网络上的人才能访问该文件夹（这不应该发生，除非他们将其限制为仅限 VPN 访问）。

如果是这种情况，我将如何修改我的 .htaccess 文件以让外人访问我的网站或禁用 VPN 要求？我记得摆弄我的 htaccess 文件，这可能已经破坏了它，但我不知道发生了什么。. . 有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:51:28.183

除非限制最初在 .htaccess 文件中，否则您将无法直接添加外部访问权限。

要求 VPN 访问是在网络级别（而不是文件夹或用户级别，这是您尝试做的）上完成的。这意味着您必须要求管理员为您执行此操作。我怀疑你是否有权修改学校设置的任何防火墙、代理或路由表。此外，这样做可能是非法的。

为了快速解决问题，如果您有权访问公用文件夹，则可以尝试将符号链接添加到您的 www 目录。这不太可能起作用，因为（a）我怀疑您可以访问公共目录，并且（b）学校通常`FollowSymLinks`在 Apache 中禁用

# mysql - 范围分区上的 Mysql 分区表行为

> ID：13757561
> 
> 赞同：1
> 
> 时间：2012-12-07T05:42:02.043
> 
> 标签：mysql

我已经使用范围创建了一个使用 mysql 分区的表，并插入了数百万条数据。

```
CREATE TABLE `PART_SAMPLE ` (
  `TRANSACTION_ID` bigint(25) NOT NULL AUTO_INCREMENT,
  `TASK_ID` int(11) DEFAULT NULL,
  `STATUS_CODE` int(10) DEFAULT NULL,
  `FIELD10` int(5) DEFAULT NULL,
  KEY `TXN_ID` (`TRANSACTION_ID`),
  KEY `TASK_IDX` (`TASK_ID`),
  KEY `id_idx_task_status` (`TASK_ID`,`STATUS_CODE`),
  KEY `IDX_STATUS` (`STATUS_CODE`),
  KEY `Fld_idx` (`FIELD10`)
) ENGINE=MyISAM AUTO_INCREMENT=12249932 DEFAULT CHARSET=latin1
/*!50100 PARTITION BY RANGE (FIELD10)
(PARTITION p0 VALUES LESS THAN (0) ENGINE = MyISAM,
 PARTITION p1 VALUES LESS THAN (1) ENGINE = MyISAM,
 PARTITION p2 VALUES LESS THAN (2) ENGINE = MyISAM,
 ........
 PARTITION p9 VALUES LESS THAN (9) ENGINE = MyISAM,
 PARTITION p10 VALUES LESS THAN MAXVALUE ENGINE = MyISAM) */ 
```

**每个 Field10(0-10) 值都有 300 万个数据**。

但是当我像这样执行选择查询时

```
select TASK_ID,STATUS_CODE,count(*) from PART_SAMPLE where FIELD10=X group by TASK_ID,STATUS_CODE; 
```

x 可以是分区中的任何值

对于 x 值 0,2,5,8，它只需要 10 秒来检索结果，但对于休息，它需要大约 50 秒来重新检索结果。根据我的理解，因为所有字段的数据都是相同的，对于任何 Field10 值几乎都必须采用相同的时间。为什么这个时差来了

# java - decodeyuv420sp单像素版

> ID：13757562
> 
> 赞同：1
> 
> 时间：2012-12-07T05:42:03.073
> 
> 标签：java, android, image, rgb, yuv

我正在尝试将几个像素从 YUV（nv21）图像格式转换为 RGB 格式（是的，只是一些像素，而不是整个图像，因为运行时间限制）目前我正在使用来自互联网的 decodeyuv420SP 函数：

```
static public void decodeYUV420SP(int[] rgb, byte[] yuv420sp, int width, int height) {
        final int frameSize = width * height;

        for (int j = 0, yp = 0; j < height; j++) {
        int uvp = frameSize + (j >> 1) * width, u = 0, v = 0;
        for (int i = 0; i < width; i++, yp++) {
            int y = (0xff & ((int) yuv420sp[yp])) - 16;
            if (y < 0) y = 0;
            if ((i & 1) == 0) {
                v = (0xff & yuv420sp[uvp++]) - 128;
                u = (0xff & yuv420sp[uvp++]) - 128;
            }

            int y1192 = 1192 * y;
            int r = (y1192 + 1634 * v);
            int g = (y1192 - 833 * v - 400 * u);
            int b = (y1192 + 2066 * u);

            if (r < 0) r = 0; else if (r > 262143) r = 262143;
            if (g < 0) g = 0; else if (g > 262143) g = 262143;
            if (b < 0) b = 0; else if (b > 262143) b = 262143;

            rgb[yp] = 0xff000000 | ((r << 6) & 0xff0000) | ((g >> 2) & 0xff00) | ((b >> 10) & 0xff);
        }
    }
    } 
```

现在我想做一些修改，它可以返回特定像素（X，Y）的 R、G、B 值，但我不明白它到底做了什么，看起来一个 YUV 像素对应多个 RGB像素。有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:58:17.367

这既快又脏，但我认为它会起作用。我所做的只是删除循环并用给定的 X,Y 替换它们（这里表示为“行”和“列”，因为我们使用“y”来表示其他东西）。

```
 int uvp = frameSize + (row >> 1) * width, u = 0, v = 0;
    int yp = row*width + column;
    int y = (0xff & ((int) yuv420sp[yp])) - 16;
    if (y < 0) y = 0;
    if ((column & 1) == 0) {
        v = (0xff & yuv420sp[uvp++]) - 128;
        u = (0xff & yuv420sp[uvp++]) - 128;
    }

    int y1192 = 1192 * y;
    int r = (y1192 + 1634 * v);
    int g = (y1192 - 833 * v - 400 * u);
    int b = (y1192 + 2066 * u);

    if (r < 0) r = 0; else if (r > 262143) r = 262143;
    if (g < 0) g = 0; else if (g > 262143) g = 262143;
    if (b < 0) b = 0; else if (b > 262143) b = 262143;

    result = 0xff000000 | ((r << 6) & 0xff0000) | ((g >> 2) & 0xff00) | ((b >> 10) & 0xff); 
```

希望能帮助到你。

# lua - 电晕：图像裁剪

> ID：13757563
> 
> 赞同：2
> 
> 时间：2012-12-07T05:42:10.173
> 
> 标签：lua, coronasdk, crop, masking

如何裁剪从 corona sdk 中的相机胶卷中选择的图像？

我已尝试[按照本教程](http://developer.coronalabs.com/code/useful-crop-library)进行遮罩 ，但这为我提供了带有裁剪图像的彩色背景。我需要单独裁剪的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:02:41.190

```
local localGroup = display.newGroup()

local backGround = display.newImage(localGroup,"backGround.png")
local imageForCrop = display.newImage(localGroup,"path.png")

local mask = graphics.newMask("mask.png")

localGroup:setMask(mask.png)

--then Capture , or if you don't need to capture circle you can use easy the display.captureBounds(boundsData) 
```

# iphone - 通过图形 api 向@facebook.com 发送私人/收件箱消息

> ID：13757570
> 
> 赞同：0
> 
> 时间：2012-12-07T05:42:52.543
> 
> 标签：iphone, ios, facebook-graph-api

如果有办法通过使用他的用户 ID 将邮件发送到@facbook.com 来向朋友发送私人消息？如果有请提供所需的权限和发送所需的http参数

# xaml - 为什么禁用数据网格删除命令按钮？

> ID：13757571
> 
> 赞同：0
> 
> 时间：2012-12-07T05:42:59.253
> 
> 标签：xaml, binding, datagrid, command

我有一个 DataGrid，其中每一行都有一个删除按钮。如果我`Command="Delete"`在 XAML 中的 Delete button 元素上设置属性，则该按钮在运行时被禁用。为什么？？

XAML：

```
<Page x:Class="AxureExport.TargetPage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:AxureExport"
  mc:Ignorable="d" 
  d:DesignHeight="300" d:DesignWidth="400"
  Title="Define Export Targets"
  Loaded="Page_Loaded">

<Page.Resources>
    <Style TargetType="{x:Type DataGridCell}">
        <EventSetter Event="PreviewMouseLeftButtonDown"
                     Handler="DataGridCell_PreviewMouseLeftButtonDown" />
    </Style>
</Page.Resources>

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="7" />
        <ColumnDefinition Width="65" />
        <ColumnDefinition Width="458*" />
        <ColumnDefinition Width="47" />
        <ColumnDefinition Width="10" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="7" />
        <RowDefinition Height="63*" />
    </Grid.RowDefinitions>
    <!-- target file -->
    <TextBlock Name="textBlock3"
               Text="2\. Select the location where you want to save the string files:"
               Height="23"
               HorizontalAlignment="Left"
               Margin="5,0,0,0"
               VerticalAlignment="Top"
               Grid.Row="2"
               Grid.Column="1"
               Grid.ColumnSpan="4"
               Width="441" />
    <TextBlock Name="textBlock4"
               Text="(Warning: This tool overwrites files in the target folder.)"
               Height="16"
               HorizontalAlignment="Left"
               Margin="54,15,0,0"
               VerticalAlignment="Top"
               Width="256"
               FontStyle="Italic"
               FontWeight="Light"
               FontSize="10"
               Grid.Row="2"
               Grid.Column="1"
               Grid.ColumnSpan="2" />
    <TextBlock Name="textBlock5"
               Text="Target:"
               Height="23"
               HorizontalAlignment="Left"
               Margin="22,30,0,238"
               VerticalAlignment="Center"
               Grid.Row="1"
               Grid.Column="1" />
    <!-- ExportTargets Datagrid -->
    <DataGrid Name="ExportTargets"
              AutoGenerateColumns="False"
              Grid.Column="2"
              Grid.Row="1"
              Margin="0,71,0,63"
              ItemsSource="{Binding Path=., Mode=TwoWay}"
              SelectionUnit="Cell"
              GridLinesVisibility="None"
              RowDetailsVisibilityMode="Collapsed"
              CanUserReorderColumns="False"
              CanUserResizeColumns="False"
              CanUserResizeRows="False"
              RowHeaderWidth="40"
              IsSynchronizedWithCurrentItem="True"
              HorizontalScrollBarVisibility="Disabled"
              CanUserAddRows="True"
              CanUserDeleteRows="True">
        <DataGrid.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                             Color="Transparent" />
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                             Color="Transparent" />
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}"
                             Color="Black" />
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}"
                             Color="Black" />
        </DataGrid.Resources>
        <DataGrid.Columns>
            <DataGridCheckBoxColumn Binding="{Binding IsXML, Mode=TwoWay}"
                                Header="XML"
                                CanUserSort="False"
                                CanUserReorder="False" />
            <DataGridCheckBoxColumn Binding="{Binding IsProperty, Mode=TwoWay}"
                                    Header="Property"
                                    CanUserSort="False"
                                    CanUserReorder="False" />
            <DataGridTextColumn Binding="{Binding FolderName, Mode=TwoWay}"
                                Header="Folder"
                                Width="*"
                                CanUserReorder="False"
                                IsReadOnly="False" />
            <DataGridTemplateColumn Header="Browse">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Name="Browse"
                                Command="{Binding BrowseCommand}"
                                HorizontalAlignment="Center"
                                Width="20">...</Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Header="Delete" IsReadOnly="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Name="Delete"
                                Command="{x:Static DataGrid.DeleteCommand}"
                                HorizontalAlignment="Center"
                                Width="20"
                                IsEnabled="True">X</Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
    <Button Name="NextButton"
            Content="Next"
            Grid.Column="2"
            Grid.ColumnSpan="2"
            Grid.Row="1"
            Margin="0,0,2,12"
            Width="100"
            Height="40"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Click="NextButton_Click" />
</Grid>
</Page> 
```

代码隐藏：

```
// DataTable
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;

namespace AxureExport {

/// <summary>
/// Interaction logic for TargetPage.xaml
/// </summary>
public partial class TargetPage : Page {

    FrameWindow _frame;
    //ExportTargetInfos _eti;

    public TargetPage(FrameWindow frame) {
        InitializeComponent();

        _frame = frame;
        _frame.ExportTargets = new ExportTargetInfos(Properties.Settings.Default.ExportTargetHistory);
        this.DataContext = _frame.ExportTargets;
    }

    //
    // enable editing on single-click
    private void DataGridCell_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e) {
        DataGridCell cell = sender as DataGridCell;

        if (!cell.IsEditing) {
            if (!cell.IsFocused)
                cell.Focus();

            if (!cell.IsSelected)
                cell.IsSelected = true;
        }
    }

    private void Page_Loaded(object sender, RoutedEventArgs e) {
    }

    private void NextButton_Click(object sender, RoutedEventArgs e) {
        Properties.Settings.Default.ExportTargetHistory = _frame.ExportTargets.GetExportTargets();
        _frame.NavigateTo(typeof(ExportPage));
    }
}
} 
```

视图模型：

```
using System;
using System.Collections.ObjectModel;       // ObservibleCollection<>
using System.Collections.Specialized;       // StringCollection
using System.ComponentModel;                // INotifyPropertyChanged

namespace AxureExport {
public class ExportTargetInfos : ObservableCollection<ExportTargetInfo> {

    const char _SEP = '|';      // field seperator character

    // default constructor
    public ExportTargetInfos() : base() {
    }

    // copy constructors
    public ExportTargetInfos(ExportTargetInfos etis) : base() {
        if (etis == null) return;
        foreach (ExportTargetInfo eti in etis) {
            this.Add(new ExportTargetInfo(eti.FolderName, eti.IsXML, eti.IsProperty));
        }
    }

    public ExportTargetInfos(StringCollection sc) : base() {
        if (sc == null) return;
        foreach (string s in sc)
            Add(ParseExportTarget(s));
    }

    public StringCollection GetExportTargets() {
        StringCollection sc = new StringCollection();

        foreach (ExportTargetInfo et in this)
            sc.Add(BuildExportTarget(et));

        return sc;
    }

    // create a string from an ExportTarget (for persistance)
    private static string BuildExportTarget(ExportTargetInfo et) {
        return et.FolderName + _SEP + et.IsXML.ToString() + _SEP + et.IsProperty.ToString();
    }

    // create an ExportTarget from an unparsed string (for persistance)
    private static ExportTargetInfo ParseExportTarget(string s) {
        int count = s.Split(_SEP).Length - 1;
        string[] items = s.Split(new[] { _SEP }, StringSplitOptions.None);
        string name = (count < 1 ? String.Empty : items[0]);
        bool isXML = (count > 0 ? Convert.ToBoolean(items[1]) : false);
        bool isProp = (count > 1 ? Convert.ToBoolean(items[2]) : false);
        return new ExportTargetInfo(name, isXML, isProp);
    }
}

//
// represents an export target (folder plus options) in it's parsed form
public class ExportTargetInfo : INotifyPropertyChanged {

    public event PropertyChangedEventHandler PropertyChanged;

    public IDelegateCommand BrowseCommand { protected set; get; }

    // default constructor is needed to enable datagrid to add rows
    public ExportTargetInfo() {
        _folderName = String.Empty;
        _isXML = false;
        _isProperty = false;
        this.BrowseCommand = new DelegateCommand(ExecuteBrowse, CanExecuteBrowse);
    }

    public ExportTargetInfo(string targetFolderName, bool isXML, bool isProperties) {
        _folderName = targetFolderName;
        _isXML = isXML;
        _isProperty = isProperties;
        this.BrowseCommand = new DelegateCommand(ExecuteBrowse, CanExecuteBrowse);
    }

    private string _folderName;
    public string FolderName {
        get { return _folderName; }
        set { SetProperty<string>(ref _folderName, value, @"FolderName"); }
    }

    private bool _isXML;
    public bool IsXML {
        get { return _isXML; }
        set { SetProperty<bool>(ref _isXML, value, @"IsXML"); }
    }

    private bool _isProperty;
    public bool IsProperty {
        get { return _isProperty; }
        set { SetProperty<bool>(ref _isProperty, value, @"IsProperty"); }
    }

    // browse button for selected row clicked
    void ExecuteBrowse(object param) {
        // use WPF-WinForms interop (:-p)
        var folderDialog = new System.Windows.Forms.FolderBrowserDialog();
        folderDialog.Description = "Please designate the target folder";
        folderDialog.SelectedPath = FolderName;
        folderDialog.ShowNewFolderButton = true;
        if (folderDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            FolderName = folderDialog.SelectedPath;
    }

    bool CanExecuteBrowse(object param) {
        return true;
    }

    protected bool SetProperty<T>(ref T storage, T value, string propertyName = null) {
        if (object.Equals(storage, value))
            return false;

        storage = value;
        OnPropertyChanged(propertyName);
        return true;
    }

    protected void OnPropertyChanged(string propertyName) {
        if (PropertyChanged != null)
            PropertyChanged( this, new PropertyChangedEventArgs(propertyName));
    }
}
} 
```

有没有人知道原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:39:23.867

这不是解决方案，但通过反复试验，我发现禁用的删除按钮行为是由`SelectionUnit="Cell"`DataGrid 中的设置引起的。将其设置为`FullRow`启用删除行按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:57:29.590

```
<Button Name="NextButton" isEnable = "true" /> 
```

# ruby-on-rails - 如何在rails3中以正确格式显示存储在字符串变量中的html数据？

> ID：13757572
> 
> 赞同：-1
> 
> 时间：2012-12-07T05:42:58.377
> 
> 标签：ruby-on-rails

**这是用于测试我的应用程序**如何在 rails3 中以正确的格式显示存储在字符串变量中的 html 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:34:56.557

To prevent Rails from escaping your output, you can use

```
'<div>something</div>'.html_safe 
```

or, even better (because it automatically handles nil values)

```
raw '<div>something</div>' 
```

# c - 在 C/C++ 中使用计数器变量访问字符串

> ID：13757574
> 
> 赞同：1
> 
> 时间：2012-12-07T05:43:03.903
> 
> 标签：c, string, pointers

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

在 C++ 参考书中，我找到了一个访问字符串的示例，如下所示：

```
void main()
{
    char *str = "Test";
    int len, i;

    clrscr();

    len = strlen(str);
    for(i=0 ; i<len ; i++)
    {
        printf("%c", i[str]);
    }

    getch();
} 
```

为什么`i[str]`有效？`i`是一个变量，而不是一个数组。

如果字符串被声明为`str[]`而不是`*str`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:45:33.147

它之所以有效，是因为在 C 中`i[str]`和`str[i]`是等价的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:45:41.703

`i[str]`并`str[i]`以相同的方式评估（如`*(str+i)`）

声明时`str[]`，`str`是指向数组第一个元素的指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:46:16.490

字符指针指向字符串开头的内存位置，数组索引（例如，`str[i]`）基本上`i`是在字符串开头添加迭代。

所以，`str + i`= `str[i]`= `i[str]`=`i + str`

使用 this inside `printf`，就像你正在做的那样，所有这些都将评估相同：

```
printf("%c", str[i]);
printf("%c", i[str]);
printf("%c", *(str+i));
printf("%c", *(i+str)); 
```

另请参阅：[对于数组，为什么 a[5] == 5[a]？](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

# apache - Apache Mod 用 URL 中的句点重写

> ID：13757582
> 
> 赞同：1
> 
> 时间：2012-12-07T05:44:23.043
> 
> 标签：apache, mod-rewrite, period

行，

所以我正在使用（或尝试使用）两个主要的 mod_rewrite 规则，它们似乎相互冲突

```
RewriteRule ^/?help$ index.php?page=help [L] 
```

和

```
RewriteRule ^/?([a-zA-Z0-9._-]+)$ index.php?user=$1 [L] 
```

如果我摆脱了句号->。在第二条规则中，显示了我的帮助页面，并且我也可以显示用户页面，但是当我添加句点时，我的帮助页面不会显示，而是（我认为）被作为用户页面处理。

有人有任何指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:51:43.603

首先，如果您在 .htaccess 中执行此操作，mod_rewrite 不会停止处理，而是执行内部重定向。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/286005/991314)。

您需要在第二个重写规则中转义句点。如果没有转义，句点（或点）将匹配任何字符。

固定规则：

```
RewriteRule ^/([a-zA-Z0-9\._-]+)$ /index.php?user=$1 [L] 
```

**编辑3：**

根据您的评论和自己的答案，这是一个更新的解决方案。在 Apache 中的工作方式`RewriteCond %{REQUEST_FILENAME}`取决于您所处的上下文。您也可以`?`从匹配模式中省略 。

```
RewriteRule ^/help$ /index.php?page=help [L]
# If you are inside <VirtualHost> context
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteRule ^/([a-zA-Z0-9\._-]+)$ /index.php?user=$1 [L]
# If you are inside <Directory> or .htaccesscontext
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/([a-zA-Z0-9\._-]+)$ /index.php?user=$1 [L] 
```

请记住，如果存在与您服务器上的任何文件或目录同名的用户，则此解决方案会导致冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:42:17.930

我查看了另一个用户在这里遇到的东西 - [Apache / mod_rewrite / Periods messing with pattern](https://stackoverflow.com/questions/2077304/apache-mod-rewrite-periods-messing-with-pattern?rq=1)，并修改了他的规则，它正在工作 -

```
RewriteRule ^/?help$ index.php?page=help [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([a-zA-Z0-9\[\]\.()+|_-]+)$ index.php?user=$1 [L] 
```

感谢您的答复。

# command-line-tool - 如何在 vifm 版本 > 0.4 的单独屏幕窗口中编辑文件

> ID：13757585
> 
> 赞同：3
> 
> 时间：2012-12-07T05:45:12.000
> 
> 标签：command-line-tool

我刚刚安装了 vifm-0.7.4。它包含比 0.4 版更多的功能。但是，我在旧版本中缺少一种行为。也就是说，如果您启用`screen`in `vifm`：

```
:screen 
```

在文本文件上按`l`或`Enter`后，该文件将`vi`在新`screen`窗口中打开。但是，在新版本中，文件是在与界面相同的窗口中打开的`vifm`。我可以使用以下命令在新`screen`窗口中打开文件`edit`：

```
:e 
```

但它不如单一的方便`l`。是否有可能在新版本中回到旧行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:39:09.947

这是一种回归，直到现在才注意到。我将在下一个版本中修复该错误（应该很容易），但您可以通过电子邮件或其中一个错误跟踪器向我询问此类行为。

这是您现在可以尝试使用的东西（将其放入您的`~/.vifm/vifmrc`文件中）：

```
nnoremap l : if filetype('.') == 'reg'
          \|     edit
          \| else
          \|     execute 'normal! l'
          \| endif<cr>

nmap <cr> l
nmap <right> l 
```

但这不会运行与文件关联的程序。

# spring - 创建将在显示中使用的局部变量的最佳位置在哪里（使用 MVC 原则）？

> ID：13757586
> 
> 赞同：1
> 
> 时间：2012-12-07T05:45:13.867
> 
> 标签：spring, jsp, spring-mvc

我正在考虑在控制器中创建它们并将变量传递给 JSP，但不确定这是否是要走的路。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:54:28.117

控制器通过模型将数据传递给视图 - 请参阅[Spring MVC 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-controller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:03:58.677

**基本上， MVC**架构本身所做的隔离层表明，您应该从**Controller**中的后端数据**[从 Model Bean 获取它之后]**进行处理。

 **> 在您的问题中，您已经明确提到您想知道声明变量的正确位置？-> 所以你会想要对它们进行一些处理，例如根据一些数据或计算来改变值！

**所以在控制器中制作变量，显然必须注意私有数据，所以在控制器或类文件本身中这样做。****

# javascript - 第一次单击jquery选项卡时函数不调用？

> ID：13757592
> 
> 赞同：0
> 
> 时间：2012-12-07T05:45:48.920
> 
> 标签：javascript, jquery

我使用选项卡创建 UI。选项卡都包含单独的表单。如果我单击选项卡，则会调用所有表单保存功能。例如，假设我填写第一个选项卡表单，然后单击第二个选项卡。然后我刷新页面然后我单击第一个选项卡。数据未保存。但是在**我填写第一个选项卡后，然后连续单击第二个和第三个选项卡并刷新第三个选项卡表单上的页面，然后单击第一个选项卡，现在数据已保存。**我的问题是功能不是立即调用单击吗？

```
 $(".tab").tabs({
                selected: 0,
                select: function(e, ui) {

                        Firsttabvalue(arraytest);
                        Secondtabvalue(arraytest);
                        Thirdtabvalue(arraytest);

                        return true;

                }

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:15:29.823

我假设您在应用程序中使用 jQueryUI 选项卡（因为您没有指定您使用的确切插件）。如果这是真的，那么如果您查看[jQueryUI API](http://api.jqueryui.com/tabs/)页面，您会发现选项卡没有事件“选择”，只有事件“激活”。

编辑：您可以使用该事件初始化选项卡：

```
$( ".selector" ).tabs({
   activate: function( event, ui ) {}
}); 
```

或者稍后绑定事件：

```
$( ".selector" ).on( "tabsactivate", function( event, ui ) {} ); 
```

更多编辑：我为您创建了简单的 JSFiddle：http: [//jsfiddle.net/Bqkst/](http://jsfiddle.net/Bqkst/)。和这里的代码：

HTML

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
</ul>
<div id="tabs-1">
    <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
</div>
<div id="tabs-2">
    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
</div>
<div id="tabs-3">
    <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
    <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
</div> 
```

​</p>

JS：

```
$( "#tabs" ).tabs({
   activate: function( event, ui ) {
       alert( "tab changed" )
   }
});​ 
```

每次单击选项卡时都会触发警报！

# java - Hibernate注解中两个表之间的一对一映射

> ID：13757594
> 
> 赞同：0
> 
> 时间：2012-12-07T05:46:02.280
> 
> 标签：java, hibernate, annotations, aop, one-to-one

我有两张桌子

```
 CREATE TABLE `cb_jobs` (
    `JOB_IDENTIFIER` INT(11) NOT NULL,
    `CB_CREDENTIAL_TYPE_IDENTIFIER` INT(11) NOT NULL
    `IS_DELETED` TINYINT(1) NULL DEFAULT '0',
    PRIMARY KEY (`JOB_IDENTIFIER`),
    INDEX `FK_cb_jobs_cb_credential_type` (`CB_CREDENTIAL_TYPE_IDENTIFIER`)
    CONSTRAINT `FK_cb_jobs_cb_credential_type` FOREIGN KEY (`CB_CREDENTIAL_TYPE_IDENTIFIER`) REFERENCES `cb_credential_type` (`CB_CREDENTIAL_TYPE_IDENTIFIER`) ON UPDATE CASCADE ON DELETECASCADE)COLLATE='latin1_swedish_ci'
    ENGINE=InnoDB;    
    CREATE TABLE `cb_credential_type` (
    `CB_CREDENTIAL_TYPE_IDENTIFIER` INT(11) NOT NULL AUTO_INCREMENT,
    `CB_CREDENTIAL_CODE` VARCHAR(50) NULL DEFAULT NULL,
    `CB_CREDENTIAL_TYPE_NAME` VARCHAR(1000) NULL DEFAULT NULL,
    `CREATED_DATE` DATETIME NULL DEFAULT NULL,
    `CREATED_BY_USER` INT(11) NULL DEFAULT NULL,
    `UPDATED_DATE` DATETIME NULL DEFAULT NULL,
    `UPDATED_BY_USER` INT(11) NULL DEFAULT NULL,
    `IS_DELETED` TINYINT(1) NULL DEFAULT '0',
    PRIMARY KEY (`CB_CREDENTIAL_TYPE_IDENTIFIER`)
    )COLLATE='latin1_swedish_ci'
    ENGINE=InnoDB
    AUTO_INCREMENT=8; 
```

我想根据凭证类型 id 获取第二张表的详细信息。如何使用休眠注释编写具有一对一关系的休眠映射类。任何人请帮助我.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:50:15.293

查看本教程，这可能会对您有所帮助

[http://www.dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-one-to-one-1.html](http://www.dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-one-to-one-1.html)

查看hibernate一对一注释教程

[http://www.dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-one-to-one-using-annotations-1.html](http://www.dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-one-to-one-using-annotations-1.html)

# git - Qt Creator 的差异查看器中的绿色矩形是什么意思？

> ID：13757602
> 
> 赞同：1
> 
> 时间：2012-12-07T05:47:20.783
> 
> 标签：git, qt-creator, git-diff

当我在提交到 git 之前预览更改时（下面的快照），有时差异查看器中会显示实心绿色矩形。我想知道它们的含义是什么？

![在此处输入图像描述](../Images/5115d6b88de44b83bfe398a93c676b37.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:05:21.313

这意味着空格会发生变化。为了差异的可读性，我们应该避免更改空格。应该在单独的提交中更改。

# c++ - Vector.size() 产生一个意外的大数字

> ID：13757605
> 
> 赞同：2
> 
> 时间：2012-12-07T05:47:24.573
> 
> 标签：c++, vector

我有这个程序用浮点值填充向量，确保当浮点值总计时每个向量（bin）的总和小于 1.0。我通过调试发现程序在尝试将向量的值添加到浮点数时正在停止。原因是 for 循环比向量中存在的元素运行的次数更多。我插入了一个 cout 来检查大小的值，并且得到了一个非常大的数字（9500 万左右）

```
//Bin packing algorithm
//Takes float values which are <1 and packs them into bins.

#include <iostream>
#include <vector>
#include <list>
#include <cassert>

using namespace std;
typedef unsigned int uint;

bool gt( float a, float b )
{
   return b < a;
}

int main()
{
   list< float > S; 
   while( ! cin.eof() )
   {
      float value;
      if( cin >> value && ! cin.eof() )
      {
      assert( value > 0.0 && value <= 1.0 );
         S.push_back( value );
      }
   }

   uint n = S.size();
   uint operations = 0;

   vector< vector< float > > bins;
   S.sort( gt );

   float currentitem;
   float binsum; 

   uint totalbins = 0; 
   uint currentbin; 

   vector<float> tempbin;
   while(S.size() != 0)
   {
      currentitem = S.front();
      S.pop_front();
      currentbin = 0;
      while(currentitem != 0 && totalbins > currentbin)
      {
         currentbin++;
         bintotal = 0;
         for(uint i=0; i < bins[currentbin].size(); i++) 
         {
            cout << "i=" << i <<" bins[currentbin].size()=" << bins[currentbin].size() <<  endl;
            binsum += bins[currentbin][i]; //THIS IS WHERE THE DEBUGGER POINTS. bins[currentbin].size() is producing the 95 million garbage value.
         }
         if((binsum + currentitem) <= 1)
         {
            currentitem = 0;
            bins[currentbin].push_back(currentitem);
         }
      }
      if(currentitem != 0)
      {
         totalbins++;
         tempbin.push_back(currentitem);
         bins.push_back(tempbin);
         tempbin.clear();
      }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T05:53:02.783

`bins[currentbin]`在`for`循环访问无效的 bin 作为`currentbin`变量已经增加。你需要`currentbin++`在`for`循环之后。

# android - 在android中使用getfragmentmanager（）时“没有这样的方法错误”

> ID：13757611
> 
> 赞同：1
> 
> 时间：2012-12-07T05:48:19.120
> 
> 标签：android, android-fragments, android-dialogfragment

在我的应用程序中，我使用对话框片段作为启动画面。因此它将在应用程序启动时显示启动画面。当我在 android 版本 3 以下的设备上运行该应用程序时，它会显示类似“ `No such method error:getFragmentManager`”的错误。我已经看到可以通过使用来解决它`getSupportFragmentManager()`。但是当我使用它时，没有显示 Splash 对话框。请有人帮助我..提前致谢...

主要活动=>

```
 ft = getFragmentManager().beginTransaction(); //Here I am using getFragmentManager
    newFragment = SplashDialogFragment.newInstance();
    newFragment.show(MainActivity.ft, "dialog"); 
```

这是我的启动画面片段=>

```
public class SplashDialogFragment extends DialogFragment {

    private EditText mEditText;

    static SplashDialogFragment newInstance() {
        SplashDialogFragment f = new SplashDialogFragment();
        return f;
    }
    public void EditNameDialog() {
        // Empty constructor required for DialogFragment
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);    
        setStyle(DialogFragment.STYLE_NO_TITLE, android.R.style.Theme);        
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.splash_fragment, container);

        return view;
    }

    public void show(FragmentManager supportFragmentManager, String string) {
        // TODO Auto-generated method stub

    }

} 
```

和错误日志=>

```
 > 12-07 11:09:09.330: E/AndroidRuntime(628): FATAL EXCEPTION: main
    12-07 11:09:09.330: E/AndroidRuntime(628): java.lang.NoSuchMethodError: com.myapp.mlm.MainActivity.getFragmentManager
    12-07 11:09:09.330: E/AndroidRuntime(628):  at com.madhyamam.malayalam2.MainActivity.onCreate(MainActivity.java:103)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at android.os.Handler.dispatchMessage(Handler.java:99)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at android.os.Looper.loop(Looper.java:123)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at java.lang.reflect.Method.invokeNative(Native Method)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at java.lang.reflect.Method.invoke(Method.java:507)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    12-07 11:09:09.330: E/AndroidRuntime(628):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T11:13:31.037

我通过将 MainActivity 扩展到 FragmentActivity 解决了这个问题。以前它是扩展 Activity。之后我使用 getSupportFragmentManager 没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:05:40.173

android.support.v4.app.Fragment；因为片段在 API 级别 11 中可用。请参阅此链接：- [http://developer.android.com/reference/android/support/v4/app/package-summary.html](http://developer.android.com/reference/android/support/v4/app/package-summary.html)

这个链接： -

[将 getFragmentManager() 与 actionbarsherlock 库一起使用时出现 java.lang.NoSuchMethodError](https://stackoverflow.com/questions/9196400/java-lang-nosuchmethoderror-when-use-getfragmentmanager-with-actionbarsherlock)

将支持 jar 文件放入 libs 添加构建路径文件夹并像 android.support.v4.app.Fragment 一样导入，而不是以前的。希望这会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:11:10.283

很明显，它会在低于 3 的版本上失败。请查看 [http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html) 您可以尝试使用兼容性 jar。

这可能会帮助你 [http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/](http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/)

# iphone - 使用数组索引对数组进行排序

> ID：13757613
> 
> 赞同：1
> 
> 时间：2012-12-07T05:48:23.000
> 
> 标签：iphone, ios, ios4, sorting

我被困在这里......我有两个数组 Arr_title 和 Arr_distance 我使用这种方法对 Arr_distance 进行了排序

```
NSSortDescriptor *sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"self" ascending:YES]autorelease];

sortedFloats = [appDel.Arr_distance sortedArrayUsingDescriptors:
                             [NSArray arrayWithObject:sortDescriptor]]; 
```

但问题是我想根据 sortedFloats 数组的索引对 Arr_title 进行排序...

thx 提前帮助我.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:16:24.857

尝试这个，

```
NSDictionary *dict = [NSDictionary dictionaryWithObjects:Arr_title forKeys:Arr_distance];

NSSortDescriptor *sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"self" ascending:YES] autorelease];
sortedFloats = [appDel.Arr_distance sortedArrayUsingDescriptors:
                         [NSArray arrayWithObject:sortDescriptor]];

NSMutableArray *sortedTitles = [NSMutableArray array];

for (NSString *key in sortedFloats) {//or just use sortedTitles = [dict objectsForKeys:sortedFloats notFoundMarker:[NSNull null]];
    [sortedTitles addObject:[dict valueForKey:key]]; 
}

NSLog(@"%@",sortedValues); 
```

`sortedTitles`应该为您提供按相同顺序排序的数组`sortedFloats`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:54:28.490

嘿，而不是采用两个不同的数组，而是用 1 个带*键* `title,distance`的字典将该字典保存在数组中，然后对该数组进行排序所以你已经组合在一起了，所以由于任何排序的映射（按标题和按距离）都没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:44:52.893

我得到了解决方案，请参见以下代码......

```
NSSortDescriptor *sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"self" ascending:YES]autorelease];

sortedFloats = [appDel.Arr_distance sortedArrayUsingDescriptors:
                             [NSArray arrayWithObject:sortDescriptor]];

 NSLog(@" Sorted Array : %@", sortedFloats);

 NSDictionary *dictTitle = [NSDictionary dictionaryWithObjects:Arr_title   forKeys:appDel.Arr_distance];

// Sort the second array based on the sorted first array
sortedTitle = [dictTitle objectsForKeys:sortedFloats notFoundMarker:[NSNull null]];

NSLog(@" Sorted Title : %@",sortedTitle);

// Put the two arrays into a dictionary as keys and values
NSDictionary *dictAddress = [NSDictionary dictionaryWithObjects:Arr_address   forKeys:appDel.Arr_distance];

// Sort the second array based on the sorted first array
sortedAddress = [dictAddress objectsForKeys:sortedFloats notFoundMarker:[NSNull null]];

NSLog(@" Sorted Address : %@",sortedAddress); 
```

如果在其他方法中使用，请不要忘记保留您的数组....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T06:56:32.160

如果我理解你的问题是正确的，你可以使用 NSDictionary 来完成同样的任务

```
NSMutableArray *array = [NSMutableArray arrayWithArray:@[ @{@"title" : @"City1",@"dist" : @5},

                             @ {@"title" : @"City2",@"dist" : @2.3 },
                             @{@"title" : @"City3",@"dist" : @11.0 },
                             @{@"title" : @"City4",@"dist" : @1.0},
                             @{@"title" : @"City5",@"dist" : @.5},
                             @{@"title" : @"City6",@"dist" : @13 }]];

NSLog(@"dict<%@>",array);

NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"dist" ascending:YES];

NSArray *sortarray = [array sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort]];

NSLog(@"sort array = <%@>",sortarray); 
```

# java - 堆排序算法

> ID：13757617
> 
> 赞同：0
> 
> 时间：2012-12-07T05:48:53.753
> 
> 标签：java, heap, heapsort

所以我有一个执行堆排序的程序，并且我有一个删除元素功能。我通过将最后一个元素一直放在右侧，然后用它替换第 n 个元素来做到这一点。为了保持排序，然后我将元素冒泡到堆中的正确位置。我的朋友似乎不认为这会奏效。会吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:16:17.287

Heapsort使用的是max-heap，每次都需要将最大的根节点与第`n`th元素进行切换，然后将最大的元素从右到左放入结果列表中。

然后，将元素冒泡到适当的位置，并将堆的大小从 n 减小到 n-1。

那么，新堆的新根节点就是剩余n-1个元素中的最大元素。只需递归切换根元素与第`n-1`th 元素，并再次将最大元素放入结果列表，将堆的大小减 1，直到堆的大小为 0

# android - 强制更新我的 android 应用程序

> ID：13757619
> 
> 赞同：3
> 
> 时间：2012-12-07T05:49:04.427
> 
> 标签：android

如果有可用的更新版本，我正在尝试在登录前强制更新我的应用程序。我可以检查更新并能够在设备中安装应用程序，我用更新的版本替换我的旧版本，在所有这些过程结束时我想自动打开/调用我的应用程序而不是手动，（我可以手动打开我的应用程序），我不能使用 sqlite 数据库来维护来自应用程序或任何其他 APK 的一些数据，这将强制调用我的应用程序。

任何建议都是非常值得赞赏的。

谢谢。

* * *

正如我在我的问题中提到的，我可以通过从我的服务器安装新的 apk 文件来更新应用程序，即使我知道 android market 会处理安装并会要求调用应用程序，但在我的情况下，我必须在我的登台服务器上做同样的事情按流程测试我的应用程序。我能够从我的登台服务器检查更新和安装应用程序，更新的 apk 安装我的旧版本得到卸载，我没有办法调用我的新版本应用程序。

任何建议都将是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:00:15.990

您可以轻松地从您的应用程序调用网络服务，以了解是否有更新的版本可用，并指导用户通过 Android 浏览器下载它。这种方法的一个优点是对升级速率的一些控制，而不是市场支持的“大爆炸”方法。

就像是

> [http://example.com/update.jsp?versionCode=3](http://example.com/update.jsp?versionCode=3)

其中 versionCode 来自清单版本。然后我会让服务返回空白（无更新）或用户应该被引导到的 URL 以获取新的 apk。

您可以从

```
 getPackageManager().getPackageInfo(getPackageName(), 0).versionCode 
```

请触发访问 URL 的新意图。然后用户被发送到下载apk的浏览器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-03T13:29:00.620

首先你需要有一个 api 如何跟踪用户版本是否过时..

例如，您将应用当前版本发送到这样的 API：

```
String version = String.valueOf(BuildConfig.VERSION_CODE); 
```

如果 response.body().isUpdateRequired() 为真，那么您需要在下面调用此警报：

```
AlertDialog.Builder alertDialog = new AlertDialog.Builder(SplashActivity.this);
                alertDialog.setTitle("Please update your app");
                alertDialog.setMessage("This app version is not supported any longer. Please update your app from the Play Store.");
                alertDialog.setPositiveButton("UPDATE NOW", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        final String appPackageName = getPackageName();
                        try {
                            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + appPackageName)));
                        } catch (android.content.ActivityNotFoundException anfe) {
                            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://play.google.com/store/apps/details?id=" + appPackageName)));
                        }
                    }
                });
                alertDialog.show(); 
```

# redis - 共享 Redis 数据库？

> ID：13757620
> 
> 赞同：1
> 
> 时间：2012-12-07T05:49:04.380
> 
> 标签：redis, redistogo

我在我的应用程序中使用 Redis 作为会话存储。我可以为我的作业队列使用相同的 Redis 实例（和数据库）吗？如果它有任何意义，它由 redistogo 托管。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-28T07:08:00.383

对多个操作使用同一个 redis 是完全可以的。我们有一个类似的用例，我们使用 Redis 作为键值存储和作业队列。但是，您可能需要考虑其他方面，例如应用程序的性能要求。理想情况下，Redis 每秒可以处理大约 70k 次操作，如果在未来某个时候您认为您可能会达到这些基准，那么根据您执行的操作类型将您的操作拆分为多个 redis 实例会更好。这将允许您根据要求在更精细的级别上做出有关可用性和复制的决策。作为一个简单的用例，一旦您的密钥大小增加，您就可以使用 redis 集群刷新会话应用程序 redis 或对密钥进行分片，而不会影响作业队列基础设施。

# windows - Windows 7 上的 XAMPP 1.7.4 默认为启动页面

> ID：13757622
> 
> 赞同：0
> 
> 时间：2012-12-07T05:49:08.683
> 
> 标签：windows, xampp, virtualhost

我设置了运行 apache 的 XAMPP 并尝试设置虚拟主机，但它不起作用，我一直被路由到 XAMPP 启动页面。`http://localhost/index.html`说“它有效！” 我取消了它所说的 vhost_alias 模块、httpd-vhosts 和 rewrite_module 的注释。

我还在我的 httpd-vhosts.conf 和 httpd.conf 文件中添加了以下内容：

```
<Directory "C:/Sites/test.dev-web">
Allow From All
AllowOverride FileInfo
Options +FollowSymLinks
</Directory>
<VirtualHost *:80>
        ServerName "test.dev-web"
        DocumentRoot "C:/Sites/test.dev-web"
</VirtualHost> 
```

我还将它添加到我的 system32\drivers\etc 中的主机文件中：

```
127.0.0.1     test.dev 
```

我也有`127.0.0.1 localhost`那个文件

但是，每当我在 chrome 中输入 test.dev 时，它都会将我带到 xampp 启动页面 (test.dev/xampp)。

运行 Windows 7 和 XAMPP 1.7.4

XAMPP 说 apache 正在控制面板上运行。我关闭了所有可能运行端口 80 的程序（Skype）

关于有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:52:04.920

按照此处提到的步骤进行操作 -

[http://foundationphp.com/tutorials/apache22_vhosts.php](http://foundationphp.com/tutorials/apache22_vhosts.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:35:04.513

简单的解决方案：删除 XAMPP 的本地测试站点（xampp/htdocs）并替换为您自己的站点。

正确的解决方案：设置适当的虚拟主机。[在windows上设置多个虚拟主机](http://ailoo.net/2008/07/set-up-multiple-virtual-hosts-on-xampp-for-windows/)

或者维奈分享的链接会给你一个很好的指导。

# html - 重定向到给定表单提交的页面

> ID：13757628
> 
> 赞同：0
> 
> 时间：2012-12-07T05:49:37.717
> 
> 标签：html, ruby-on-rails, forms

我有一个下面显示在 /parties 上的表单，并希望获取用户在此表单中输入的任何内容并将其添加到 url。即，如果他们搜索“hello”，他们将被重定向到party/hello

```
 <h1>Search for a Party</h1><br>
    <%= form_tag({:action => "search"}, {:method => "get"}) do %>
        <%= label_tag :q, "Enter Playlist Code:" %>
        <%= text_field_tag(:q) %>
        <%= submit_tag("Find Playlist", :name => "submit") %>
    <% end %> 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:17:20.637

逻辑将进入 PartyController。

像这样的东西（语法可能有点不对）：

**派对控制器.rb**

```
def search
    result = params[:q]
    redirect_to '/parties/' + result
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:33:38.657

yenow123 给了你一个正确的方法，我只是想澄清一些观点。

"parties/hello" 会将路由与party/:id (show action) 混淆有 params[:id] 是您的搜索键，并继续努力。

# javascript - 如何防止访问尚不存在的对象属性

> ID：13757631
> 
> 赞同：2
> 
> 时间：2012-12-07T05:50:17.083
> 
> 标签：javascript

我经常有这样的情况：

`var obj = { field: 2 };`

并在代码中：

`do_something( obj.fiel ); // note: field spelt wrong`

ie 属性输入错误。我想尽早发现这些错误。

我想密封对象，即 `obj = Object.seal(obj);`

但这似乎只能防止错误`obj.fiel = 2;`，并且在简单读取字段时不会引发错误。

有什么方法可以锁定对象，以便检测并抛出对缺失属性的任何读取访问？

谢谢，保罗

编辑：有关情况的更多信息

1.  纯javascript，没有编译器。
2.  没有经验的程序员用于数学计算的库。我想限制他们的错误。我可以发现一个拼写错误的变量，但他们不能。
3.  希望尽可能早地检测到尽可能多的错误。即在编译时（最好），在运行时一旦遇到拼写错误（ok）就会抛出错误，或者在分析结果并发现不正确的计算输出时（非常非常糟糕）。
4.  单元测试并不是一个真正的选择，因为数学的目的是发现新知识，因此数学的答案通常是事先不知道的。再一次，没有经验的程序员很难教他们单元测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:56:53.007

我不认为这将在 Javascript 中起作用，因为对象是像 JSON 一样编写的，因此属性将是未定义的或 null 但不会引发错误。

解决方案将是编写本机 getter/setter。

```
var obj = {
    vars: {},

    set: function(index, value) {
        obj.vars[index] = value;
    },

    get: function(index) {
        if (typeof(vars[index]) == "undefined") {
            throw "Undefined property " + index;
        }

        return vars[index];
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:19:54.740

现在 javascript 中没有可靠的 getter/setter。您必须手动检查它。这是一种方法：

```
if (!('key' in object)) {
    // throw exception
} 
```

# css - CSS 还是 JavaScript？

> ID：13757638
> 
> 赞同：1
> 
> 时间：2012-12-07T05:50:43.823
> 
> 标签：css, menu

我很难在此处集中我的大型菜单下拉菜单：http: [//drupal.scienceworld.ca](http://drupal.scienceworld.ca)

悬停时展开的下拉菜单：我应该使用 CSS 定位，还是应该调整一些 JS 行为？如果 CSS 是问题所在，随着浏览器大小的变化，我应该如何最好地将下拉菜单保持在浏览器的中心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:16:01.253

仔细查看您的网站后，我看到您的插件正在为隐藏的 div（访问子菜单）设置一些样式：
例如，在我的 1366x780 浏览器大小中，我得到：

```
position: absolute;
width: 960px;
display: none;
top: 158px;
left: 580.5px; 
```

**这是怎么回事：**
插件计算隐藏元素的绝对位置（我认为您正在使用 qTip 插件），并且此计算基于菜单悬停项（访问本例）。

**可能的解决方案**：
您可以编写一个简单的 jquery 插件代码，以根据父 div 宽度水平居中 div，而不是使用该 qTip：

```
jQuery.fn.center = function () {
   this.css("position","absolute");
   this.css("display", "visible"
   this.css("top", "158px");
   this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) + $(window).scrollLeft()) + "px");
   return this;
} 
```

像这样使用它：

$(元素).center();

**注意：**您应该在菜单项中的悬停事件上使用它。

# java - 分析调用 Runtime.freeMemory() 的 java 代码

> ID：13757641
> 
> 赞同：1
> 
> 时间：2012-12-07T05:51:13.310
> 
> 标签：java, profiling

我有一些描述 Runtime.freeMemory 的代码。这是我的代码：

```
package misc;
import java.util.ArrayList;
import java.util.Random;
public class FreeMemoryTest {
private final ArrayList<Double> l;
private final Random r;
public FreeMemoryTest(){
    this.r = new Random();
    this.l = new ArrayList<Double>();
}
public static boolean memoryCheck() {
    double freeMem = Runtime.getRuntime().freeMemory();
    double totalMem = Runtime.getRuntime().totalMemory();
    double fptm = totalMem * 0.05;
    boolean toReturn = fptm > freeMem;
    return toReturn;
}
public void freeMemWorkout(int max){
    for(int i = 0; i < max; i++){
        memoryCheck();
        l.add(r.nextDouble());
    }
}
public void workout(int max){
    for(int i = 0; i < max; i++){
        l.add(r.nextDouble());
    }
}
public static void main(String[] args){
    FreeMemoryTest f = new FreeMemoryTest();
    int count = Integer.parseInt(args[1]);
    long startTime = System.currentTimeMillis();
    if(args[0].equals("f")){
        f.freeMemWorkout(count);
    } else {
        f.workout(count);
    }
    long endTime = System.currentTimeMillis();
    System.out.println(endTime - startTime);
}
} 
```

当我使用 -Xrunhprof:cpu=samples 运行分析器时，绝大多数调用都是针对 Runtime.freeMemory() 的，如下所示：

```
CPU SAMPLES BEGIN (total = 531) Fri Dec  7 00:17:20 2012
rank   self  accum   count trace method
 1 83.62% 83.62%     444 300274 java.lang.Runtime.freeMemory
 2  9.04% 92.66%      48 300276 java.lang.Runtime.totalMemory 
```

当我使用 -Xrunhprof:cpu=time 运行分析器时，我根本看不到对 Runtime.freeMemory 的任何调用，前五个调用如下：

```
CPU TIME (ms) BEGIN (total = 10042) Fri Dec  7 00:29:51 2012
rank   self  accum   count trace method
1 13.39% 13.39%  200000 307547 java.util.Random.next
2  9.69% 23.08%       1 307852 misc.FreeMemoryTest.freeMemWorkout
3  7.41% 30.49%  100000 307544 misc.FreeMemoryTest.memoryCheck
4  7.39% 37.88%  100000 307548 java.util.Random.nextDouble
5  4.35% 42.23%  100000 307561 java.util.ArrayList.add 
```

这两个配置文件彼此如此不同。我认为样本应该至少大致近似于时代的结果，但在这里我们看到了一个非常根本的差异，消耗超过 80% 的样本的东西甚至没有出现在时代概况中。这对我来说没有任何意义，有谁知道为什么会这样？

更多关于这个：

```
$ java -Xmx1000m -Xms1000m -jar memtest.jar a 20000000 5524
//does not have the calls to Runtime.freeMemory()
$ java -Xmx1000m -Xms1000m -jar memtest.jar f 20000000 9442
//has the calls to Runtime.freeMemory() 
```

使用 freemem 运行所需的时间大约是不使用它运行的时间的两倍。如果 80% 的 CPU 时间花在 java.Runtime.freeMemory() 中，并且我删除了该调用，我希望程序加速大约 5 倍。正如我们在上面看到的，程序加速约 2 的因数。

5 倍的减速比经验上观察到的 2 倍的减速要糟糕得多，所以我不明白采样分析器与现实的距离如此之远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:26:08.840

运行时 freeMemory() 和 totalMemory() 是本机调用。

见[http://www.docjar.com/html/api/java/lang/Runtime.java.html](http://www.docjar.com/html/api/java/lang/Runtime.java.html)

计时器无法为它们计时，但采样器可以。

# php - PHP 使用 cURL 登录网站

> ID：13757643
> 
> 赞同：2
> 
> 时间：2012-12-07T05:51:20.317
> 
> 标签：php, curl

我正在尝试使用 cURL 登录网站我已经阅读了该网站上的许多答案，但仍然无法获得它。请有人可以帮我找到解决方案

```
$url = 'https://secure.chess.com/login';

$postfields = "c1=USERNAME&loginpassword=PASSWORD&rememberme=";

$cookie = "cookie.txt";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie);
$response = curl_exec($ch);

echo $response; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:25:31.347

您似乎缺少很多发布变量，其中一个重要的状态散列必须在发布之前获取：

```
c1:USERNAME
loginpassword:PASSWORD
Qform__FormControl:btnLogin
Qform__FormEvent:QClickEvent
Qform__FormParameter:
Qform__FormCallType:Server
Qform__FormUpdates:
Qform__FormCheckableControls:rememberme
Qform__FormState:9661e98ced2596072a3ca5d70cd57ff5
Qform__FormId:LoginForm 
```

不正确的`Qform_FormState`绝对不会产生错误消息，这被证明是令人困惑的。您必须首先获取页面，`Qform_FormState`从 HTML 中提取哈希并提交。还有一个偶尔的`c4`验证码字段。

我能够毫不费力地做到这一点：

```
curl https://secure.chess.com/login -v | grep -Po '(?<=Qform__FormState" value=").*(?=")'
# 9b6b7d849c1d4fa16ed25b7b886cf88b
# note Set-Cookie: PHPSESSID=vvtk4stb22e34ac7jhg7m6i142; path=/; domain=.chess.com

curl \
    --header "Cookie: PHPSESSID=vvtk4stb22e34ac7jhg7m6i142" \
    --data="c1=USERNAME&loginpassword=PASSWORD... *snip* ...&Qform__FormState=9b6b7d849c1d4fa16ed25b7b886cf88b ..." \
    https://secure.chess.com/login -v 
```

# magento - Magento-一些给出404错误的产品

> ID：13757647
> 
> 赞同：0
> 
> 时间：2012-12-07T05:51:42.130
> 
> 标签：magento, http-status-code-404

这真的很奇怪。目录中的某些产品即使直接定位也会出现 404 错误。

该产品可以在管理员中看到，并通过库存集启用。我检查了 URL 重写部分，但找不到任何东西。此外，尝试重新索引所有内容，但无法解决问题。即使刷新缓存仍然没有。

搜索问题后，我找到了一个解决方案，说运行 SQL 命令。我这样做了，但它说该条目已经存在。

即使我在目录中搜索产品，也没有任何返回。该项目在那里，但它只是多余的并且没有显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:47:30.940

您可以检查产品是否...

1.  **分配给网站**
2.  库存水平高于 0 且状态为有货
3.  启用
4.  在目录/搜索中可见

我强调了第 1 点，因为它确实倾向于在多商店环境中吸引人们。

此外，您可能需要重新索引/清除缓存等。

最后，仔细检查您是否使用了正确的后缀（如果相关），即您可能必须将 .html 添加到 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T06:28:06.047

重新索引可能会帮助您解决问题。

转到管理面板系统 > 索引管理。在这里全选并重新索引。重新建立索引后，尝试清除您的 magento 缓存并检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T10:02:43.830

确保您的产品**状态**为**'Enabled'**。

# c# - 在 ASP.Net 中部分更新后 JavaScript 未加载

> ID：13757652
> 
> 赞同：0
> 
> 时间：2012-12-07T05:52:08.870
> 
> 标签：c#, javascript, asp.net, updatepanel, postback

当更新面板回发到服务器时，我遇到了 Javascript 未加载到 asp.net 的问题，问题是 javascript 代码不在更新面板所在的同一页面中，因此我可以将其放入 pageLoad() 函数中，就像这样：

```
<script src="js/keyboard.js" type="text/javascript"></script> 
```

我使用 ASP.Net 4 和 c#，这是我的代码：

```
<link href="css/keyboard.css" rel="stylesheet" />
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <div style="text-align: left; padding-right: 140px">
            <dx:aspxcombobox id="comboBoxLangauge" clientinstancename="comboboxLang"
                cssclass="combo" runat="server" width="140px" clientidmode="Static">
                <Items>
                    <dx:ListEditItem Text="English to Kurdish" Value="1" Selected="true" />
                    <dx:ListEditItem Text="Kurdish to English" Value="2" />
                </Items>
                <ClientSideEvents SelectedIndexChanged="IndexChanged" />            
            </dx:aspxcombobox>
        </div>
        <br />
        <br />
        <asp:Button ID="btnTranslate" runat="server" Text="Search" ClientIDMode="Static"
            CssClass="Search" OnClick="btnTranslate_Click" />
        <asp:TextBox ID="txtBoxWord" runat="server" ClientIDMode="Static"
            class="keyboardInput Search" Style="width: 260px; direction: ltr"></asp:TextBox>

        <asp:AutoCompleteExtender ID="autocom" ClientIDMode="Static" runat="server" CompletionSetCount="10"
            EnableCaching="true" MinimumPrefixLength="1" TargetControlID="txtBoxWord" ServicePath="~/translator/AutoComplete.asmx" ServiceMethod="GetCompletionList">
        </asp:AutoCompleteExtender>

        <asp:RoundedCornersExtender ID="RoundedCornersExtender1" runat="server" TargetControlID="OutPanel"
            Corners="All" Radius="5" BorderColor="Silver">
        </asp:RoundedCornersExtender>
        <br />
        <br />
        <div id="OutPanel" runat="server" clientidmode="Static" style="width: 440px; height: 200px; overflow: auto; margin-left: auto; margin-right: auto; padding-top: 10px;" visible="false">
        </div>
    </ContentTemplate>
</asp:UpdatePanel>
<div id="OutPanel" runat="server" clientidmode="Static" style="width:440px;height:200px;overflow:auto;margin-left:auto;margin-right:auto;padding-top:10px;" visible="false">

</div>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:02:31.767

> *“问题是javascript代码不在更新面板所在的同一页面中”*

而确保您的*JavaScript*在页面上可用`UpdatePanel`以正确加载它。

# java - 如何在 oracle 中创建数据库及其 url？

> ID：13757653
> 
> 赞同：-1
> 
> 时间：2012-12-07T05:52:15.263
> 
> 标签：java, mysql, oracle10g

我在我的应用程序中使用 MySQL。我在我的spring mvc应用程序中使用了hibernate。

所以所有的表都是在我的数据库中自动创建的`(MyApp)`。

我写了一个命令

`create database Myapp`

在 Mysql 命令提示符下。

当我运行我的应用程序时，所有的表都是在里面自动创建的`Myapp`。

在我的休眠配置文件中，要连接到 Mysql，我使用了以下 url

```
jdbc:mysql://localhost:3306/Myapp 
```

但现在我想将我的数据库客户端更改为 Oracle。

但是我在 oracle 中看到了 URL 的给出

```
jdbc:oracle:thin:@localhost:1521:xe 
```

那么URL中没有提到数据库？

而且我写的在 Mysql 中创建数据库的命令在 oracle 中也不起作用。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:02:07.223

下表列出了流行的 JDBC 驱动程序名称和数据库 URL。

```
RDBMS   JDBC driver name                   URL format

MySQL   com.mysql.jdbc.Driver                  jdbc:mysql://hostname/ databaseName
ORACLE  oracle.jdbc.driver.OracleDriver        jdbc:oracle:thin:@hostname:portNumber:databaseName
DB2    COM.ibm.db2.jdbc.net.DB2Driver         jdbc:db2:hostname:port Number/databaseName
Sybase  com.sybase.jdbc.SybDriver              jdbc:sybase:Tds:hostname: port Number/databaseNam 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:56:13.727

> 那么URL中没有提到数据库？

它被提及。在您的示例`jdbc:oracle:thin:@localhost:1521:xe`中，`**xe**`是类似于您的示例中的数据库服务`Myapp`名称`MySQL`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T06:06:13.060

尝试阅读以下链接

[http://www.mkyong.com/jdbc/connect-to-oracle-db-via-jdbc-driver-java/](http://www.mkyong.com/jdbc/connect-to-oracle-db-via-jdbc-driver-java/)

[http://www.rgagnon.com/javadetails/java-0112.html](http://www.rgagnon.com/javadetails/java-0112.html)

并在此处下载驱动程序，我认为它包含一些示例

[http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html](http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html)

并且要创建数据库，请观看本教程视频

[http://www.youtube.com/watch?v=3ZQ9ihJYRyM](http://www.youtube.com/watch?v=3ZQ9ihJYRyM)

# c# - Response.Redirect 只发送了 1 条消息

> ID：13757655
> 
> 赞同：0
> 
> 时间：2012-12-07T05:52:46.060
> 
> 标签：c#, c#-4.0

我正在为我们的应用程序编写一个 SMS 功能。没有错误，但它不符合我的期望。使用数据集我得到多个手机号码，然后我需要将消息传递给所有这些手机号码。

1.使用 Response.Redirect 仅发送 1 条消息，其他不发送。（发送第 1 条消息后，它转到该页面）

下面部分编码

```
DataSet DistDs = _distsms.GetAllDistributionList(UnitId, isShot, gameId, animalTypeId);
if(DistDs.Tables[0].Rows.Count > 0)
{   
    ContactNo = Convert.ToInt32(DistDs.Tables[0].Rows[0]["ContactNumber"]);
    foreach (DataRow row in DistDs.Tables[0].Rows)
    {
        if (row["ContactNumber"].ToString() != "")
        {
            try
            {
                Response.Redirect("http://sms.gatewaysite.com/api/mt?msisdn=" + row["ContactNumber"].ToString() +
                                  "&body=" + msgOut + "&sender=" + shortcode +
                                  "&key=ertyertyer&product_id=4563456&operator=" + oppp + "&country=aaaaa");
            }
            catch(Exception ee)
            {
                string a = ee.Message;
                //continue;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:55:33.533

`Response.Redirect`这样做 - 它重定向整个响应。

对于您要尝试做的事情，请使用`HttpWebRequest`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:56:18.360

将数据发送到远程服务器是一种不好的方式。尝试使用 Web 服务调用或 Web Api 调用。您可以在其中以 JSON 格式发送数据。AFIK 您正在结束响应流。

或者，您可以通过调用 WebRequest[`HTTP WebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)

来自 MSDN

```
WebRequest request = WebRequest.Create ("http://www.contoso.com/PostAccepter.aspx ");
            // Set the Method property of the request to POST.
            request.Method = "POST";
            // Create POST data and convert it to a byte array.
            string postData = "This is a test that posts this string to a Web server.";
            byte[] byteArray = Encoding.UTF8.GetBytes (postData);
            // Set the ContentType property of the WebRequest.
            request.ContentType = "application/x-www-form-urlencoded";
            // Set the ContentLength property of the WebRequest.
            request.ContentLength = byteArray.Length;
            // Get the request stream.
            Stream dataStream = request.GetRequestStream ();
            // Write the data to the request stream.
            dataStream.Write (byteArray, 0, byteArray.Length);
            // Close the Stream object.
            dataStream.Close ();
            // Get the response.
            WebResponse response = request.GetResponse ();
            // Display the status.
            Console.WriteLine (((HttpWebResponse)response).StatusDescription);
            // Get the stream containing content returned by the server.
            dataStream = response.GetResponseStream ();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader (dataStream);
            // Read the content.
            string responseFromServer = reader.ReadToEnd ();
            // Display the content.
            Console.WriteLine (responseFromServer);
            // Clean up the streams.
            reader.Close ();
            dataStream.Close ();
            response.Close (); 
```

# javascript - KineticJs - 动态创建矩形时，其后面的矩形自行拖动

> ID：13757659
> 
> 赞同：0
> 
> 时间：2012-12-07T05:53:13.593
> 
> 标签：javascript, kineticjs

在 kineticjs 中，我正在创建可拖动的动态矩形。但是，当我创建一个新矩形时，它后面的矩形会自动拖动。我不希望这种情况发生。

您可以在[http://jsfiddle.net/sandeepy02/8kGVD/12/看到演示中的行为](http://jsfiddle.net/sandeepy02/8kGVD/12/)

第 1 步：选择“创建矩形”并创建矩形。第2步：选择“移动矩形”并移动矩形。第三步：选择“创建矩形”并创建矩形。这会导致先前创建的矩形也移动。这是不希望的。

```
<html>
    <head>
        <script>
function valButton(radios) {
    var btn = document.getElementsByName(radios);
    var cnt = -1;
    for (var i = btn.length - 1; i > -1; i--) {
        if (btn[i].checked) {
            cnt = i;
            i = -1;
        }
    }
    if (cnt > -1) return btn[cnt].value;
    else return null;
}

window.onload = function() {
    layer = new Kinetic.Layer();
    stage = new Kinetic.Stage({
        container: "container",
        width: 320,
        height: 320
    });
    background = new Kinetic.Rect({
        x: 0,
        y: 0,
        width: stage.getWidth(),
        height: stage.getHeight(),
        fill: "white"
    });

    layer.add(background);
    stage.add(layer);

    moving = false;

    stage.on("mousedown touchstart", function() {
        var btnName = valButton("group2");
        if (btnName == "1") {
            if (moving) {
                moving = false;
                layer.draw();
            } else {
                var mousePos = stage.getMousePosition();
                rect = new Kinetic.Rect({
                    x: 22,
                    y: 7,
                    width: 0,
                    height: 0,
                    fill: 'red',
                    stroke: 'black',
                    strokeWidth: 4,
                    draggable: true
                });
                layer.add(rect);
                //start point and end point are the same
                rect.setX(mousePos.x);
                rect.setY(mousePos.y);
                rect.setWidth(0);
                rect.setHeight(0);
                moving = true;
                layer.drawScene();
            }
        }
        document.all.text.innerText = btnName +" "+moving;

    }); //end of mousedown
    stage.on("mousemove touchmove", function() {
        var btnName = valButton("group2");
        if (btnName == "1") {
            if (moving) {
                var mousePos = stage.getMousePosition();
                var x = mousePos.x;
                var y = mousePos.y;
                rect.setWidth(mousePos.x - rect.getX());
                rect.setHeight(mousePos.y - rect.getY());
                moving = true;
                layer.drawScene();
            }
        }
        else if (btnName == "3") {
            layer.draw();
        }
        document.all.text.innerText = btnName +" "+moving;
    }); //end of mousemove
    stage.on("mouseup touchend", function() {
        var btnName = valButton("group2");
        if (btnName == "1") {
            moving = false;
        }
        document.all.text.innerText = btnName +" "+moving;
    }); //end of mouseup
};
        </script>
    </head>
    <body>

        <h2>Toggle buttons</h2>
<div class="toggle-btn-grp">
    <label onclick="" class="toggle-btn"><input type="radio" value="1" name="group2"/> Create Rectangle</label>
    <label onclick="" class="toggle-btn"><input type="radio" value="3" name="group2"/>Move Rectangle</label>
</div>

        <div id="container" ></div>
                <div id="text" >abc</div>

    </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:13:09.357

这是解决问题的更新功能-

```
 stage.on("mousedown touchstart", function() {
    var btnName = valButton("group2");
    if (btnName == "Create") {
        if (moving) {
            moving = false;
            layer.draw();
        } else {
            var mousePos = stage.getMousePosition();
            rect = new Kinetic.Rect({
                x: 0,
                y: 0,
                width: 0,
                height: 0,
                fill: 'red',
                stroke: 'black',
                strokeWidth: 4,
                draggable: true
            });
            layer.add(rect);
            //start point and end point are the same
            rect.setX(mousePos.x);
            rect.setY(mousePos.y);
            rect.setWidth(0);
            rect.setHeight(0);
            moving = true;
            rect.on("mousemove touchmove", function() {
                var btnName = valButton("group2");
                if (btnName == "Create") {
                    this.setDraggable(false);
                }
                else if (btnName == "Move") {
                    this.setDraggable(true);
                }
                document.all.text.innerText = btnName +" rect move MovingFlag: "+moving;
            }); //end of rect mousemove
            layer.drawScene();
        }
    }
    document.all.text.innerText = btnName +" MovingFlag: "+moving;

}); //end of mousedown 
```

# sharepoint - 从人员选择器收集数据

> ID：13757660
> 
> 赞同：1
> 
> 时间：2012-12-07T05:53:18.603
> 
> 标签：sharepoint

我想收集在 PeoplePicker 中添加的用户名，并在单击自定义 aspx 页面的“添加”按钮时将它们显示在文本框中。

我尝试了很多代码，但它不起作用。

这是我的代码：

```
protected void btnpicker_Click(object sender, EventArgs e)
        {
 for (int i = 0; i < userPicker.ResolvedEntities.Count; i++)
            {
                PickerEntity picker = (PickerEntity)userPicker.ResolvedEntities[i];
                Hashtable hstEntityData = picker.EntityData;
                string accountName = Convert.ToString(hstEntityData["AccountName"]);
                txtPicker.Text = "Count" + hstEntityData.Count.ToString();
                txtPicker.TextMode = TextBoxMode.MultiLine;
            }
  } 
```

帮助高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:50:10.023

试试下面的代码。

```
protected void btnpicker_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < userPicker.ResolvedEntities.Count; i++)
        {
            PickerEntity picker = (PickerEntity)userPicker.ResolvedEntities[i];
            yourTextBox.Text = "Count: " + new SPFieldUserValue(yourSPWebObject, Convert.ToInt32(picker.EntityData["SPUserID"]), picker.Key).User.Name;
        }
    } 
```

此代码将在您的文本框中提供所有用户的名称。

# javascript - JavaScript + JSF

> ID：13757661
> 
> 赞同：0
> 
> 时间：2012-12-07T05:53:23.033
> 
> 标签：javascript, ajax, jsf

我正在开发一个在 javascript 中使用 google maps api 的应用程序，并且不知道如何将我的 bean 中的数组返回到我的数组到 javascript 中。任何建议都有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:11:19.083

在您的`managed bean`返回值中，以逗号分隔`String`。

```
public String getNames() {
  return "Thomson,John,William";
} 
```

在您的`javascript`中，使用它访问它`EL`并将其再次转换为数组，如下所示。

```
var str = "#{myBean.text}";
var jsArray = str.split(","); //This is what you need 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:03:27.200

您使用的是什么 JSF 框架？你见过素面吗？查看 gMap [http://www.primefaces.org/showcase-labs/ui/gmapHome.jsf](http://www.primefaces.org/showcase-labs/ui/gmapHome.jsf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:18:05.503

您可以简单地在您的 bean 中生成 JavaScript 并从变量示例中输出它：

```
@ManagedBean
@RequestScoped
public class Bean
{
    public String getMyJavaScriptArray()
    {
        // Your business logic to generate the array
        return "var mycars = new Array(); mycars[0] = \"Saab\"; mycars[1] = \"Volvo\"; mycars[2] = \"BMW\";";
    }
}

<script>
    <h:outputText value="#{bean.myJavaScriptArray}" escape="false" />
</script> 
```

或者你可以使用这个 JSF GMap 组件：

[http://code.google.com/p/gmaps4jsf/](http://code.google.com/p/gmaps4jsf/)

# python - 将 __getstate__/__setstate__ 与 pickle 一起使用会失败，并显示“ValueError: size need to be (int width, int height)”

> ID：13757662
> 
> 赞同：0
> 
> 时间：2012-12-07T05:53:25.810
> 
> 标签：python, pygame, pickle, getstate

我正在尝试腌制`pygame.Surface`对象，默认情况下不可腌制。我所做的是将经典的picklability 函数添加到类并覆盖它。这样它将与我的其余代码一起使用。

```
class TemporarySurface(pygame.Surface):
    def __getstate__(self):
        print '__getstate__ executed'
        return (pygame.image.tostring(self,IMAGE_TO_STRING_FORMAT),self.get_size())

    def __setstate__(self,state):
        print '__setstate__ executed'
        tempsurf = pygame.image.frombuffer(state[0],state[1],IMAGE_TO_STRING_FORMAT)
        pygame.Surface.__init__(self,tempsurf)

pygame.Surface = TemporarySurface 
```

这是我尝试腌制一些递归对象时的回溯示例：

```
Traceback (most recent call last):
  File "dibujar.py", line 981, in save_project
    pickler.dump((key,value))
  File "/usr/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 562, in save_tuple
    save(element)
  File "/usr/lib/python2.7/pickle.py", line 306, in save
    rv = reduce(self.proto)
  File "/usr/lib/python2.7/copy_reg.py", line 71, in _reduce_ex
    state = base(self)
ValueError: size needs to be (int width, int height) 
```

令我困惑的部分是打印语句没有被执行。`__getstate__`甚至被调用？我在这里很困惑，我不确定要提供什么信息。让我知道是否有任何额外的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:47:00.387

正如[文档所说](http://docs.python.org/2/library/pickle#pickling-and-unpickling-extension-types)，腌制扩展类型的主要入口点是`__reduce__`or`__reduce_ex__`方法。鉴于该错误，默认实现似乎与' 的构造函数`__reduce__`不兼容。`pygame.Surface`

所以你最好提供一种`__reduce__`方法`Surface`，或者通过模块在外部注册一个`copy_reg`。我建议后者，因为它不涉及猴子修补。你可能想要这样的东西：

```
import copy_reg

def pickle_surface(surface):
    return construct_surface, (pygame.image.tostring(surface, IMAGE_TO_STRING_FORMAT), surface.get_size())

def construct_surface(data, size):
    return pygame.image.frombuffer(data, size, IMAGE_TO_STRING_FORMAT)

construct_surface.__safe_for_unpickling__ = True
copy_reg.pickle(pygame.Surface, pickle_surface) 
```

这应该就是你所需要的。但请确保该`construct_surface`函数在模块的顶层可用：解酸过程需要能够定位该函数才能执行解酸过程（这可能发生在不同的解释器实例中）。

# javascript - 无法从 jQuery.ajax 成功函数返回值

> ID：13757664
> 
> 赞同：1
> 
> 时间：2012-12-07T05:53:35.203
> 
> 标签：javascript, jquery, jquery-validate

当用户注册时，我想使用 jQuery Validator 来检查服务器是否已经使用了他们想要的用户名。PHP 脚本`untaken.php`完成这项工作，返回`ok`用户名是否可用，或者`taken`是否被使用。

我的整个来源如下，但是有问题的行是这样的：

```
return data != "taken"; 
```

目前永久显示“用户名已被占用”消息。但是，如果我将其更改为：

```
console.log( data != "taken" ); 
```

并输入我在控制台中看到的文本框`true`和`false`我期望的消息。这就是我知道设计本身不应该受到责备的原因，只是我无法从`success`jQuery.ajax 中的子句返回任何内容。

```
$.validator.addMethod("userCannotBeTaken", function(value, element){

        var check;

        check = $.ajax({
            type: "GET",
            url: "untaken.php",
            data: ({ "user" : value }),
            dataType: "text",

            success: function(data){
                return data != "taken"; //return false if taken or true if not, based on response
            }
        });

    }, "Username already taken"); 
```

我怎样才能从内部返回一些东西`jQuery.ajax`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:41:46.073

原来我对整个事情想得太多了，可以使用 jQuery Validator 的内置`remote`方法轻松完成。如果对某人有帮助，这是我的代码：

验证器脚本中的规则：

```
remote: "untaken.php" 
```

PHP：

```
<?php

//mysql info
[snip]

//connect to database
$sql = new mysqli($mysql_host, $mysql_user, $mysql_password, $mysql_database);

//Populate variable
$newun = $sql->real_escape_string( $_GET['newuser'] );

//Do the actual checks

$un_already_taken = $sql->query("
    SELECT username FROM logins WHERE username = '$newun'
"); //check if UN already in DB

if($un_already_taken->num_rows > 0) //un taken already
    print "false"; //tell jQuery to not submit form
else
    print "true"; //tell jQuery all is good 
```

就像打印“真”或“假”一样简单。请注意，它使用 GET（即 URL 参数）而不是 POST，并且 GET 变量是`name`它正在验证的字段（在我的情况下`newuser`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:55:57.093

要将数据返回给`ajax`函数，您需要在`untaken.php`页面中打印或回显结果。

像：

```
echo $result;exit; 
```

然后尝试提醒`success`函数内部的数据并调试结果

```
alert(data);return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:16:27.017

您为成功操作定义的函数是回调。

当您进行 ajax 调用时，它是异步完成的，（意味着脚本在浏览器连接到服务器时继续执行。在处理回调时不能使用 return，因为它们稍后执行，而不是作为典型函数立即执行。

这可能更有意义：[http ://recurial.com/programming/understanding-callback-functions-in-javascript/](http://recurial.com/programming/understanding-callback-functions-in-javascript/)

在您将数据返回服务器后，成功函数应该执行您希望发生的任何操作，即：提醒用户用户名已被使用。

# meteor - 在用户登录过程中显示加载器

> ID：13757665
> 
> 赞同：0
> 
> 时间：2012-12-07T05:53:41.240
> 
> 标签：meteor

我正在使用 Accounts API 来管理用户。我的应用程序首先尝试使用他们的凭据登录用户，如果导致错误，它会使用输入凭据创建一个新的用户帐户。

```
// Log the user in
Meteor.loginWithPassword(username, token, function(error) {
    if(error) { // create a new user account, log them in and show the page
        Accounts.createUser({
            username: username,
            email: username + '@example.com',
            password: token,
            profile: {name: username}
        }, showThePage);
    }
    else { // show the page
        //showThePage();
        window.location.reload();
    }
}); 
```

但是这个代码块只有在用户之前从浏览器中注销时才会执行，如果是这种情况，Meteor 需要 2-3 秒才能让用户使用`loginWithPassword`. 由于我使用的是 v0.5.0，所以没有`Meteor.loggingIn()`.，而我唯一拥有的是`Meteor.userLoaded()`. 出于某种原因，Meteor 执行了两次登录操作——一次通过加载占位符用户（仅设置了其 userId 属性），另一次通过加载实际用户。这使得 userLoaded() 返回`true`两次，因此我的加载器图像无法按预期工作。

另请注意，在 loginWithPassword 内的 else 块中，我正在重新加载窗口。我有一个`showThePage()`包含所有模板数据和事件绑定代码的函数。该函数使用登录用户的用户名检索数据。现在因为当 else 块中的函数执行时没有真正的用户登录（记住流星需要时间来登录用户），所以没有数据被获取。

有解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:22:29.140

首先 Meteor.userLoaded 在你升级到 0.5.0 之后就会消失。您应该检查 Meteor.userId() === null 以了解用户登录是否已完成，这适用于 0.5.0 及更高版本。正如您所指出的，它可能会被多次调用，但只有当它具有实际值时才会完成登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:00:59.897

如果您确实无法更新到 0.5.1，`loggingIn`请在调用`loginWithPassword`和回调之间使用会话变量来存储。

```
Session.set('loggingIn',true);
Meteor.loginWithPassword(...
  Session.set('loggingIn',false);
}); 
```

然后，`Session.get('loggingIn')`在适当的地方使用调用。

想要适应`userLoaded()`吗？

```
var userLoadedTimes = 0; // can't use session variable because it would mess up reactive context on increments
Session.set('loggingIn',false);
Meteor.autorun(function () {
  var userLoaded = Meteor.userLoaded(); // reactive.
  if (userLoaded)
    userLoadedTimes++;
  if ((userLoadedTimes % 2 == 0) && (userLoadedTimes != 0))
    Session.set('loggingIn',true);
  else
    Session.set('loggingIn',false);
}); 
```

那个模在那里做什么？好吧，如果`userLoaded`由于某种原因两次调用了响应式上下文，那么您实际上已经登录了。所以我们检查是否`userLoadedTimes`是 2 的倍数/偶数。所有其他时间，即`userLoadedTimes`奇数（`userLoadedTimes % 2 == 1`）时，我们正在查看假用户......这意味着我们仍在加载真实用户！

如果这不起作用，请使用回调上的会话变量更改将偶数/奇数逻辑应用于第一个解决方案，以防 Meteor 调用`loginWithPassword`回调两次。

# css - CSS - 一个 Div 容器内的 2 个 Div，一个在另一个之上浮动

> ID：13757669
> 
> 赞同：0
> 
> 时间：2012-12-07T05:54:02.033
> 
> 标签：css

我有一个应用程序可以在用户旋转平板电脑时在样式表之间切换。有一个容器 div 可以容纳一切。在容器 div 内有 2 个 div。一个 div 包含数学问题，另一个 div 包含一个黑板。

在横向模式下，数学问题和黑板都在旁边。这行得通。

示例：（[数学问题] [黑板]）---并排

在纵向模式下，数学问题应该在黑板上方。现在，它们只是堆叠在一起。

示例： ([Math Problem] [Chalkboard]) --- 黑板位于数学问题下方

我的 HTML：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>quiz</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <link href="quiz.css" rel="stylesheet" />
    <script src="quiz.js"></script>
</head>
<body>
   <div class="container">
      <div class="mathSide">
      <!-- QUIZ STATS -->
         <div id="quizStats">
            <p class="alignLeft" id="statQuestionDiv"></p>
            <p class="alignCenter" id="statTimerDiv"></p>
            <p class="alignRight" id="statScoreDiv"></p>
         </div>
         <div style="clear: both;"></div>
         <!-- QUIZ STATS -->

         <!-- MATH EQUATION -->
         <div class="mathEquation">
            <div class="line1Num" id="line1NumDiv"></div>
            <div class="line2">
               <div class="line2Ope" id="line2OpeDiv"></div>
               <div class="line2Num" id="line2NumDiv"></div>
            </div>
            <div class="line">
               <div class="result"></div>
            </div>
         </div>
         <!-- MATH EQUATION -->

         <!-- ANSWERS -->
         <!-- Multiple choice -->
         <div class="center">
            <div id="multipleChoiceDiv">
               <button class="multipleChoice" id="btnChoice1"></button><br />
               <button class="multipleChoice" id="btnChoice2"></button><br />
               <button class="multipleChoice" id="btnChoice3"></button><br />
               <button class="multipleChoice" id="btnChoice4"></button>
            </div>
         </div>
         <!-- Multiple choice -->

         <!-- Fill in the blank -->
         <div class="center">
           <div id="fillBlankDiv">
              <input class="textBox2" id="userAnswer" type="text" />
              <button class="fillBlank" id="btn7">7</button>
              <button class="fillBlank" id="btn8">8</button>
              <button class="fillBlank" id="btn9">9</button><br />
              <button class="fillBlank" id="btn4">4</button>
              <button class="fillBlank" id="btn5">5</button>
              <button class="fillBlank" id="btn6">6</button><br />
              <button class="fillBlank" id="btn1">1</button>
              <button class="fillBlank" id="btn2">2</button>
              <button class="fillBlank" id="btn3">3</button><br />
              <button class="fillBlank" id="btn0">0</button>
              <button class="fillBlank" id="btnNeg">+/-</button>
              <button class="fillBlank" id="btnOk">OK</button>            
           </div>
         </div>
         <!-- Fill in the blank -->
         <!-- ANSWERS -->

         <!-- (IN)CORRECT -->
         <div class="center2">
            <div id="checkDiv"></div>
         </div>
         <!-- (IN)CORRECT -->
      </div>

      <!-- CANVAS -->
      <div class="canvasSide">
         <canvas id="can1" width="500" height="600" style="border:2px solid #fff; background-color: #026236;"></canvas>
      </div>
      <!-- CANVAS -->
   </div>

   <div id="appbar" data-win-control="WinJS.UI.AppBar">
       <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'abErase', label:'Erase', icon:'&#xE0A4;'}" type="button"></button>
       <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'abPause', label:'Pause', icon:'&#xE103;'}" type="button"></button>
       <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'abHome', label:'Home', icon:'&#xE10F;'}" type="button"></button>
   </div>
</body>
</html> 
```

我的 CSS：

```
body {
    background-color: #00522c;
}

.container {
    width: 820px;
    margin-top: 100px;
    margin-left: auto;
    margin-right: auto;
}

.center {
    text-align: center ;

}

.mathSide {
    width: 300px;
    float: left;
}

.canvasSide {
    width: 500px;
    float: left;
    margin-left: 20px;
}

/* QUIZ STATS */
.alignLeft {
    float: left;
    width: 33%;
    text-align: left;
    font-size: 125%;
    font-weight: bold;
}

.alignCenter {
    float: left;
    width: 33%;
    text-align: center;
    font-size: 125%;
    font-weight: bold;
}

.alignRight {
    float: left;
    width: 33%;
    text-align: right;
    font-size: 125%;
    font-weight: bold;
}​
/* QUIZ STATS */

/* MATH EQUATION */
.mathEquation {
    width: 300px;
}​

.line1Num, .line2 {
    width: 100%;
    text-align: right;
    display: table;
    font-size: 400%;
}

.line1Num {
    float: right;
    font-size: 400%;
}

.line2Ope {
    width: auto;
    float: left;
}

.line2Num {
    width: auto;
    float: right;
}

.line {
    width: 100%;
    text-align: right;
    border-top: 4px solid black;
    border-color: white;
}
/* MATH EQUATION */

/* ANSWERS */
.multipleChoice {
    width: 300px;
    padding-top: 15px;
    padding-bottom: 15px;
    margin-top: 20px;
    font-size: 150%;
}

.multipleChoiceRed {
    width: 300px;
    padding-top: 15px;
    padding-bottom: 15px;
    margin-top: 20px;
    font-size: 150%;
    background-color: red;
}

.multipleChoiceGreen {
    width: 300px;
    padding-top: 15px;
    padding-bottom: 15px;
    margin-top: 20px;
    font-size: 150%;
    background-color: green;
}

.textBox {
}

.fillBlank {
    padding-top: 8px;
    padding-bottom: 8px;
    margin-top: 10px;
    font-size: 150%;
}
/* ANSWERS */

/* (IN)CORRECT */
.center2 {
    text-align: center ;
    font-size: 300%;
}
/* (IN)CORRECT */

.textBox2[type="text"]
 {
font-size: 200%;
    text-align: right;
    color: #fff;
    background-color: #026236;

 }

.textBox2A[type="text"]
 {
font-size: 200%;
    text-align: right;
    color: #fff;
    background-color: red;

 }

.textBox2B[type="text"]
 {
font-size: 200%;
    text-align: right;
    color: #fff;
    background-color: green;

 }

@media screen and (-ms-view-state: snapped) {

}

@media screen and (-ms-view-state: fullscreen-portrait) {

    .mathSide {
    width: 300px;
    position: absolute;
}

.canvasSide {
    width: 500px;
    position: absolute;

}
} 
```

# post - 我无法在安全页面中的 Joomla 2.5 中发布到表单所在的同一页面

> ID：13757670
> 
> 赞同：0
> 
> 时间：2012-12-07T05:54:05.747
> 
> 标签：post, joomla, joomla2.5

我有一组用户。

我有一个表格，他们必须登录才能访问。

每个用户都有他们以相同形式输入的数据。

问题是当我将表单 METHOD 设置为 POST 时，我收到此错误：

```
You don't have permission to access /index.php/[path to page here] 
```

我正在使用 Joomla 2.5 和一个插件，可以让我将 php 写入文章页面。关于我做错了什么的任何想法？

编辑：我应该补充一点，ACTION 具有表单所在页面的 URL。我还尝试了 SEF URL 并使用 JRoute 获得了相同的结果。

编辑 2：我已登录。

# ruby-on-rails - Carrierwave 雾 Amazon S3 图像未显示

> ID：13757671
> 
> 赞同：20
> 
> 时间：2012-12-07T05:54:09.713
> 
> 标签：ruby-on-rails, ruby, amazon-s3, carrierwave, fog

我已经安装了carrierwave和fog，已经成功上传了图像并第一次查看了它们，但现在它不再显示图像了。

**这是我的配置文件**app/config/initializers/carrierwave.rb

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',                                       # required
    :aws_access_key_id      => 'AKIAJKOHTE4WTXCCXAMA',                      # required
    :aws_secret_access_key  => 'some secret key here',                      # required
    :region                 => 'eu-east-1',                                 # optional, defaults to 'us-east-1'
    :host                   => 'https://s3.amazonaws.com',                  # optional, defaults to nil
    :endpoint               => 'https://s3.amazonaws.com:8080'              # optional, defaults to nil
  }
  config.fog_directory  = 'createmysite.co.za'                    # required
  config.fog_public     = false                                   # optional, defaults to true
  #config.fog_attributes = {'Cache-Control'=>'max-age=315576000'} # optional, defaults to {}
end 
```

**这就是应该显示的图像的 url 的样子**

```
<img alt="Normal_selection_003" src="https://createmysite.co.za.s3.amazonaws.com/uploads/portfolio/image/3/normal_Selection_003.png?AWSAccessKeyId=AKIAJKOHTE4WTXCCXAMA&amp;Signature=8PLq8WCkfrkthmfVGfXX9K6s5fc%3D&amp;Expires=1354859553"> 
```

**当我打开图片网址时，这是来自亚马逊的输出** [https://createmysite.co.za.s3.amazonaws.com/uploads/portfolio/image/3/normal_Selection_003.png?AWSAccessKeyId=AKIAJKOHTE4WTXCCXAMA&Signature=8PLq8WCkfrkthmfVGfXX9K6s5fc%3D&Expires=1354859553](https://createmysite.co.za.s3.amazonaws.com/uploads/portfolio/image/3/normal_Selection_003.png?AWSAccessKeyId=AKIAJKOHTE4WTXCCXAMA&Signature=8PLq8WCkfrkthmfVGfXX9K6s5fc%3D&Expires=1354859553)

```
<Error>
<Code>AccessDenied</Code>
<Message>Access Denied</Message>
<RequestId>3F179B7CE417BC12</RequestId>
<HostId>
zgh46a+G7UDdpIHEEIT0C/rmijShOKAzhPSbLpEeVgUre1iDc9f7TSOwaJdQpR65
</HostId>
</Error> 
```

## 更新

新配置文件（添加雾 url 到期）*app/config/initializers/carrierwave.rb*

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',                                       # required
    :aws_access_key_id      => 'AKIAJKOHTE4WTXCCXAMA',                      # required
    :aws_secret_access_key  => 'chuck norris',  # required
  }
  config.fog_directory  = 'createmysite.co.za'                              # required
  config.fog_public     = false                                             # optional, defaults to true
  config.fog_authenticated_url_expiration = 600                             # (in seconds) => 10 minutes
end 
```

奇迹般有效！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-07T06:08:54.623

您已设置`config.fog_public`并`false`正在使用 Amazon S3 进行存储。通过 S3 的私有文件的 URL 是临时的（它们已签名并且有期限）。具体来说，您问题中发布的 URL 有一个`Expires=1354859553`参数。

`1354859553`is `Fri, 07 Dec 2012 05:52:33 GMT`，这是从当前时间过去的时间，因此链接实际上已过期，这就是您收到`Access Denied`错误的原因。

您可以通过设置进一步调整到期时间（默认为`600`秒）

```
config.fog_authenticated_url_expiration = ... # some integer here 
```

如果您想要没有过期的链接

*   设置`config.fog_public`为`true`
*   让您的应用程序充当中间人，通过`send_file`. **[这](https://stackoverflow.com/questions/8089933/showing-images-with-carrierwave-in-rails-3-1-in-a-private-store-folder)**是至少一个关于 SO 的问题

# java - 如何在 java 中设置日期 1/1/1753

> ID：13757675
> 
> 赞同：-1
> 
> 时间：2012-12-07T05:54:34.793
> 
> 标签：java, calendar

我正在使用以下代码设置当前日期-

```
session.getCurrentDate().getTime() 
```

现在我想设置最小日期，即 1/1/1753，除了显式硬编码之外，是否有任何常量或函数可以做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T06:00:26.590

做这个

```
Calendar c1 = GregorianCalendar.getInstance();
  c1.set(1753, Calendar.JANUARY, 01);  //January 1st 1753 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:03:38.853

我认为您希望设置默认日期。

我会创建一个字符串，然后简单地解析它以获得所需的日期。

```
SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy");
Date myDefaultDate = format.parse("1/1/1753"); 
```

现在`myDefaultDate`将包含日期“1/1/1753”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T09:35:39.867

默认是当前时间 - 请参阅无参数构造函数。

切换到公历发生在不同的日期。GregorianCalendar 类使用 1582 年 10 月 4 日，即第一组国家更改的日期，作为默认更改日期。

您可以使用 获取默认更改日期`new GregorianCalendar().getGregorianChange()`。

这不是最早可能的日期，因为 GregorianCalendar 在转换之前使用儒略历。无论如何，日历既被投射到过去，甚至在儒略历创建之前，也被投射到未来。

# javascript - 样式化外部小部件

> ID：13757677
> 
> 赞同：0
> 
> 时间：2012-12-07T05:54:48.993
> 
> 标签：javascript, jquery

我的网站有一个显示表格的外部小部件。

该小部件带有一些内联 CSS。有没有办法在将小部件附加到我的页面之前删除此 CSS，以便仅应用我的 css 文件规则？

标记如下所示：

```
<div id="widgetContainer">
    <script language='javascript' src='http://www.esake.gr/scripts/create_widget.php?pw=1&maw=242&fof=Verdana&tifs=14&tic=3A3A3A&tibc=FFFFFF&dafs=12&dac=3A3A3A&dabc=FFFFFF&ces=0&cep=1&langid=gr'></script>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:00:38.547

你最好的选择是覆盖css。例如

```
td { background: #f00!important;} 
```

看[这里](http://jsfiddle.net/aKsXZ/)的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:08:16.713

你可以使用 jQuery 来做到这一点，

假设您的小部件有一个父容器，您可以执行以下操作，

```
$("#parentContainer").children().removeAttr("style"); 
```

刚刚在这里创建了一个快速模型：http: [//jsfiddle.net/j3GPL/](http://jsfiddle.net/j3GPL/)

# android - 尝试使用 HttpPost 登录，但它返回初始页面？

> ID：13757685
> 
> 赞同：0
> 
> 时间：2012-12-07T05:55:45.340
> 
> 标签：android, http-post, httpclient

我正在尝试登录此页面：[https ://eas.admin.uillinois.edu/eas/servlet/EasLogin?redirect=https://webprod.admin.uillinois.edu/ssa/servlet/SelfServiceLogin?appName=edu .uillinois.aits.SelfServiceLogin&dad=BANPROD1](https://eas.admin.uillinois.edu/eas/servlet/EasLogin?redirect=https://webprod.admin.uillinois.edu/ssa/servlet/SelfServiceLogin?appName=edu.uillinois.aits.SelfServiceLogin&dad=BANPROD1)

在 Android 上使用 HttpPost。我在网上查看并尝试了httpclient并执行了httppost。但是响应是相同的 URL。这是我的代码，我需要什么？谢谢。

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_check_balance);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 

    String username = getIntent().getExtras().getString("username");
    String password = getIntent().getExtras().getString("password");

    //Building post parameters, key and value pair
    List<NameValuePair> accountInfo = new ArrayList<NameValuePair>(2);
    accountInfo.add(new BasicNameValuePair("inputEnterpriseId", username));
    accountInfo.add(new BasicNameValuePair("password", password));

    //Creating HTTP client
    HttpClient httpClient = new DefaultHttpClient();

    //Creating HTTP Post
    HttpPost httpPost = new HttpPost(LOGIN_URL);

    /* Not needed?
    BasicHttpParams params = new BasicHttpParams();
    params.setParameter("ENT_ID", username);
    params.setParameter("PASSWORD", password);
    httpPost.setParams(params);
    */

    //Url Encoding the POST parameters   
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(accountInfo));
    }
    catch (UnsupportedEncodingException e) {
        // writing error to Log
        e.printStackTrace();
        startActivity(new Intent(this, InputAccountActivity.class));
    }

    HttpResponse response = null;
    InputStreamReader iSR = null;
    String source = null;

 // Making HTTP Request
    try {
        response = httpClient.execute(httpPost);
        source = inputStreamToString(response.getEntity().getContent()).toString(); //gets website source

        // writing response to log
        Log.d("Http Response:", response.toString());
        Log.d("hi", source);
        /*
        iSR = new InputStreamReader(response.getEntity().getContent());

        HttpEntity resEntity = response.getEntity();
        if (resEntity != null) {    
            Log.d("RESPONSE",resEntity.toString());
        }

        BufferedReader br = new BufferedReader(iSR);   
        source = "";

        while((source = br.readLine()) != null)
        {
            source += br.readLine();
            Log.d(TAG,source.trim());
        }
        */

    } catch (ClientProtocolException e) {
        // writing exception to log
        e.printStackTrace();

    } catch (IOException e) {
        // writing exception to log
        e.printStackTrace();
        startActivity(new Intent(this, InputAccountActivity.class));
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:07:00.790

我只是猜测，尝试改变

```
accountInfo.add(new BasicNameValuePair("inputEnterpriseID", username)); 
```

到下面给定的代码。

```
accountInfo.add(new BasicNameValuePair("inputEnterpriseId", username)); 
```

我认为您的 ID 不正确。希望这会有所帮助

# objective-c - 令人困惑的 Objective-C 类结构

> ID：13757687
> 
> 赞同：0
> 
> 时间：2012-12-07T05:55:47.213
> 
> 标签：objective-c

这是来自苹果开发人员示例的（简化的）类声明：

```
@interface myController : UITableViewController {

    NSArray *samples;
}

@property (nonatomic, retain) NSArray *samples 
```

声明的目的是什么

```
{

    NSArray *samples;
} 
```

当您再次将其声明为财产时？如果您遗漏：

```
{

    NSArray *samples;
} 
```

您仍然可以`@synthesize`在您的 .m 中使用并获得对它的引用！

我对第一次声明的目的有点困惑。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:03:11.820

属性只是为您的数据声明访问器的一种便捷方式。它通常会导致一些成员变量，但不一定。并且该成员 var 可以具有不同的名称：

```
@interface myController : UITableViewController {

    NSArray *mSamples;
}

@property (nonatomic, retain) NSArray *samples
@end

@implementation
@synthesize samples = mSamples;
@end 
```

或者您可以使用完全没有 var 的属性：

```
@interface myController : UITableViewController {

}

@property (nonatomic, retain) NSArray *samples
@end

@implementation
   -(NSArray*) samples {
    //you can for example read some array from file and return it
   }

   -(void) setSamples:(NSArray*) arr {
     //write that array to file or whatever you want
    }
@end 
```

使用新的编译器，您可以使用完全没有 ivars 的属性，编译器会为您隐式生成它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:02:04.080

使用属性声明，显式声明支持实例变量没有任何目的或好处。这只是习惯的残余。

编辑：对于 iOS 或 Mac 64 位 Intel，属性永远不需要显式声明 ivars。但它们是其他 Mac 工作所需要的——因此是示例。

另外，我确实发现了不同之处。当显式声明 ivar 时，除非您另有说明，否则它是受保护的 ivar，可用于子类。但是当为属性隐式创建 ivar 时，子类无权访问 ivar。

# javascript - 如何防止其他网站将我的网页放在他们的 iframe 中？

> ID：13757690
> 
> 赞同：1
> 
> 时间：2012-12-07T05:56:01.350
> 
> 标签：javascript, html, iframe

> **可能重复：**
> [如何防止我的网站页面通过 iFrame 的第 3 方网站框架加载](https://stackoverflow.com/questions/2896623/how-to-prevent-my-site-page-to-be-loaded-via-3rd-party-site-frame-of-iframe)
> [如何阻止 iframe 调用](https://stackoverflow.com/questions/5881139/how-to-block-iframe-call)

我不希望其他网站通过 iframe 使用我的网站内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T05:58:30.260

使用[X-Frame-Options](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)响应头，这将告诉浏览器它是否应该在框架中显示网页。例如

```
X-Frame-Options: SAMEORIGIN 
```

# android - android中的画廊视图

> ID：13757696
> 
> 赞同：0
> 
> 时间：2012-12-07T05:56:31.727
> 
> 标签：android, gallery

嗨，我对这个 android 很陌生..实际上我正在尝试在屏幕上显示 1 个标题和描述。我已经使用 Galleryview 完成了。我不知道这是否是正确的方法。

我的实际想法是..在galleryview中，如果我滑动屏幕下一个（标题和描述应该出现）但我不能这样做..所以我试图保留下一个和上一个选项来执行此操作..但这也是我不能做..我知道我做错了。请给我一些好办法。

我的活动代码：

```
public class NewsDescription extends Activity
{
//   private String url = "http://m.indiatoday.in/xml/stories/"+(String)context.getInstance().getAppVariable("storyurl");
     public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.newsdesgallery);            
 Gallery gl=(Gallery)findViewById(R.id.GalleryNewsDesc);
            NewsDescriptionAdapter adapter =new NewsDescriptionAdapter(this);
            gl.setAdapter(adapter);   
}
} 
```

我的适配器类：

```
public class NewsDescriptionAdapter extends  BaseAdapter
{
    private static Context contxt;

    String[] body= {};//new String[30];
    String[] heading= {};//new String[30];
    NewsDescriptionAdapter(Context conxt)
    {
//      System.out.println("inside cons");
        this.contxt=conxt;
        getelement();
    }

    public void getelement()
    {
//      System.out.println("Inside getElement");
        String[] url=context.getInstance().getselectedUrl();
//      System.out.println("After url");
//      System.out.println("count="+(String)context.getInstance().getAppVariable("count"));
        int count = Integer.parseInt((String)context.getInstance().getAppVariable("count"));
//      System.out.println("count="+count);
//      System.out.println("after count="+url[count]);
        String URL = "http://xxxx.in/xml/stories/"+url[count];  
//      System.out.println("url="+URL);
         TaplistingParser parser = new TaplistingParser();
//          try {
//              url=URLEncoder.encode(url, "UTF-8");
//          } catch (UnsupportedEncodingException e1) {
//              // TODO Auto-generated catch block
//              e1.printStackTrace();
//          }
            URL=URL.replace(" ","");
//          System.out.println("url="+url);
            String xml= parser.getXmlFromUrl(URL);
            Document doc=parser.getDomElement(xml);                 
            NodeList n1 = doc.getElementsByTagName("item");
            body = new String[n1.getLength()];
            heading = new String[n1.getLength()];
            for( int i = 0 ; i < n1.getLength(); i++ )
            {
//              HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) n1.item(i);
                body[i]=parser.getValue(e, "body");
                heading[i]=parser.getValue(e, "headline");
//              map.put("Body", parser.getValue(e,"body"));             
//              menuItems.add(map);
            }
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return body.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return body[position];
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        // TODO Auto-generated method stub
//      System.out.println("body="+body[position]);
         if (convertView   == null) 
            {
                //this should only ever run if you do not get a view back            
             LayoutInflater  inflater = (LayoutInflater) contxt
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             convertView  = inflater.inflate(R.layout.newsdescriptionrow, null); 
            }        
         TextView next =(TextView)convertView.findViewById(R.id.nextnews);
//       final Gallery gal=(Gallery)convertView.findViewById(R.id.GalleryNewsDesc);

         next.setOnClickListener(new View.OnClickListener() 
         {          
            @Override
            public void onClick(View arg0) 
            {
                // TODO Auto-generated method stub
                System.out.println("Inside next");
                int count = Integer.parseInt((String)context.getInstance().getAppVariable("count"));
                count++;
                context.getInstance().setAppVariable("count", Integer.toString(count));     

            }
        });     

         TextView textViewhead = (TextView) convertView
                    .findViewById(R.id.name_DescHeading);
         textViewhead.setText(heading[position]);

             TextView textView = (TextView) convertView
                    .findViewById(R.id.name_Desclabel);
            textView.setText(body[position]);
        return convertView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:34:40.550

您不应再使用图库小部件，因为它在较新版本的 android 中已被**弃用。**相反，您可以使用来自 android 支持 jar 的 ViewPager。

你可以在这里找到一个例子： [https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

在上面的代码中寻找 ImagePagerActivity。您可以创建一个带有 imageview 和 textview 的自定义单元格进行描述（修改 item_pager_image xml）。让我知道事情的后续。

# mysql - mysql按key分组返回结果

> ID：13757701
> 
> 赞同：0
> 
> 时间：2012-12-07T05:56:56.067
> 
> 标签：mysql, sql, pdo

我有这个**League_table**：

```
+--------+----------+-------------+
|   id   |   star   |   section   |
+--------+----------+-------------+
|   1    |    1     |      A      |
|   2    |    0     |      A      |
|   3    |    1     |      B      |
|   4    |    1     |      B      |
|   5    |    0     |      C      |
|   6    |    1     |      C      |
|   7    |    0     |      D      |
|   8    |    1     |      D      |
+--------+----------+-------------+ 
```

我想知道这是否可能，我可以返回分组返回吗？

说如果我做这个简单的查询`SELECT id, star FROM league_table WHERE star = 1"`然后使用`PDO FETCH ALL`

我可以有这个输出：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [star] => 1
        )

    [1] => Array
        (
            [id] => 3
            [star] => 1
        )

    [2] => Array
        (
            [id] => 4
            [star] => 1
        )

    [3] => Array
        (
            [id] => 6
            [star] => 1
        )
    [4] => Array
        (
            [id] => 8
            [star] => 1
        )
) 
```

但是，我可以让这个输出更有条理吗？

```
Array
(
    [A] => Array
        (
            [0] => Array 
                (
                  [id] => 1
                  [star] => 1
                )
        )

    [B] => Array
        (
            [0] => Array
                (
                   [id] => 3
                   [star] => 1
                )
            [1] => Array
                (
                   [id] => 4
                   [star] => 1
        )

    [C] => Array
        (
            [0] => Array 
                (
                  [id] => 6
                  [star] => 1
                )
        )

    [D] => Array
        (
            [0] => Array 
                (
                  [id] => 8
                  [star] => 1
                )
        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:14:39.057

这是一个简单的解决方案，但不是您需要的

```
SELECT 
    group_concat(id) as IDs,
    star,
    group_concat(section) as Sections
FROM
     league_table
WHERE star = 1 
```

这将为您提供以下输出

```
IDs        star    Sections
1,3,4,6,8  1       A,B,B,C,D 
```

如您所见，ID 和 Sections 的编号相同，因此如果您将逗号分隔的字段（IDs，Sections）转换为数组，则可以使用 for 循环并访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:09:34.787

您必须像在代码中那样组织它。 `SELECT id, star, section FROM league_table WHERE star = 1 order by section asc`会让你更简单。

如果您使用的是 php，它可能看起来像这样

```
foreach ($result as $key=>$row){
    $output[$row['section']][]=$row;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:26:17.177

使用可以使用以下SQL。

```
select group_concat(id), star, section from league_table where star = 1' group by section

//you will get the following result

+--------+----------+-------------+
|   id   |   star   |   section   |
+--------+----------+-------------+
|   1    |    1     |      A      |
|   3,4  |    1     |      B      |
|   6    |    1     |      C      |
|   8    |    1     |      D      |
+--------+----------+-------------+ 
```

现在，您可以在遍历每一行时explode(',', id)。星号并不重要，因为所有值都等于 1

# android - 如何在水平滚动视图android中获取滚动方向？

> ID：13757706
> 
> 赞同：1
> 
> 时间：2012-12-07T05:57:46.080
> 
> 标签：android, horizontalscrollview

我想知道如何在水平滚动视图中获取滚动方向，比如是向左还是向右滚动，我应该立即知道这一点，就像有类似**onScrollChnageListener 之**类的东西，并且有**onLeftScroll**或**onRightScroll方法**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:11:28.710

你可以像下面这样找到它：

```
private GestureDetector.SimpleOnGestureListener simpleOnGestureListener = new GestureDetector.SimpleOnGestureListener() {

        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {

            if(e1.getX() > e2.getX())
                isScrollingTowardsLeft = true;
            else
                isScrollingTowardsLeft = false;
            return false;
        };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T10:46:47.563

一点点逻辑对我有用。您可以简单地获取两个指针`[firstPointerCurrentValue,firstPointerLastValue]`（......不要惊慌 firstPointer 是始终指向列表中第一个可见项的变量）并将它们匹配为新的和更新的值。

```
int firstPointerCurrentValue = 0;
int firstPointerLastValue = 0; 
```

...........

```
lv.setOnScrollListener(new OnScrollListener() {
        @Override
        public void onScrollStateChanged(AbsListView alv, int scrollState) {

            checkValue(firstPointerCurrentValue, firstPointerLastValue);
            firstPointerLastValue = firstPointerCurrentValue;
        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {

            firstPointerCurrentValue = firstVisibleItem;

        }
    }); 
```

……

```
boolean checkValue(int firstPointerCurrentValue, int firstPointerLastValue) {

    if (firstPointerCurrentValue > firstPointerLastValue) {
        Toast.makeText(getBaseContext(), "DOWN ", Toast.LENGTH_SHORT)
         .show();
        ab.hide();
    } else if (firstPointerCurrentValue < firstPointerLastValue) {
         Toast.makeText(getBaseContext(), "UP ",
         Toast.LENGTH_SHORT).show();

    } else {
        // Toast.makeText(getBaseContext(), "No Move ", Toast.LENGTH_SHORT)
        // .show();
    }

    return false;
} 
```

# jquery - 使用 Jquery 进行 AJAX 验证

> ID：13757709
> 
> 赞同：1
> 
> 时间：2012-12-07T05:57:52.190
> 
> 标签：jquery, forms, validation

我正在使用 jquery 在我的表单上设置我的错误消息，当我去查看它时，它不会要求输入姓名字段，而只是要求电子邮件，即使我已经包含了它。这是我的代码：

```
<form method="post" action="" id="contactform">
            <fieldset class="first">

            <div id="response"></div>  

            <div class="name_input">                
            <input name="name" id="name" class="required" type="text" onfocus="if(this.value == 'Name'){this.value = '';}" onblur="if(this.value == ''){this.value='Name';}" value="Name" maxlength="128" />                
            </div>

            <div id="email_input">              
            <input id="email" name="email" onfocus="if(this.value == 'Email'){this.value = '';}"  onblur="if(this.value == ''){this.value='Email';}" class="required" type="text" value="Email" maxlength="128" />         
            </div>

            <div id="button">
            <input type="submit" class="button" name="Submit" value="" />
            </div>

            </fieldset>

        </form> 
```

和我的 JS：

```
$(document).ready(function() {

$('form #response').hide();

$('#button').click(function(e) {

    e.preventDefault();

    var valid = '';
    var required = ' is required.';
    var name = $('form #name').val();
    var email = $('form #email').val();

    if (name == '' || name.length < 2) {
        valid = '<p>Your name' + required +'</p>';  
    }

    if (!email.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z]{2,4}$)/i)) {
        valid += '<p>Your email' + required +'</p>';                                                  
    }

    if (valid != '') {

        $('form #response').removeClass().addClass('error')
            .html('<strong>Please correct the errors below.</strong>' +valid).fadeIn('fast');           

    }

    else {

        $('form #response').removeClass().addClass('processing').html('Processing...').fadeIn('fast');                                      

        var formData = $('form').serialize();
        submitForm(formData);           
    }           

  });
}); 
```

我的姓名标签在其他任何地方都没有任何冲突，所以我不知道会发生什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:04:26.757

这条线是罪魁祸首

```
if (name == '' || name.length < 2) { 
```

当该字段有 1 个字符时，它将评估为`false`，并且不会费心检查下一个条件`name.length`

你可以通过这个来简化代码

```
if (name.length < 2) { 
```

如果`name=''`.

此外，要修剪前导和尾随空格，您可能希望获得这样的名称字段：

```
var name = $.trim( $('form #name').val() ); 
```

这样，字段中只有两个或更多空格也会触发验证。

**更新：**

问题是您已经在该`input`字段中有一个值。您正在使用焦点/模糊事件根据需要删除/添加它。当您验证它时，这将算作长度 = 4 的值。

有几种方法可以解决它。

1.  使用`placeholder`. 所有现代浏览器都支持它，如下所示：

    `<input type="text" id="name" placeholder="Name">`

2.  在名称验证中添加进一步的条件，如下所示：

    `if (name === 'Name' || name.length < 2 ) {`

这应该有望解决您的问题

# iphone - ASIHTTPRequest 多个下载控制，如暂停、恢复

> ID：13757710
> 
> 赞同：0
> 
> 时间：2012-12-07T05:58:01.613
> 
> 标签：iphone, objective-c, ios, asihttprequest, download-manager

我正在使用 ASIHTTPRequest 在后台从 URL 下载视频文件。

我正在显示带有进度条和百分比的下载，我希望用户可以控制下载，例如暂停和恢复。

下面是代码：

```
 -(void)Initiate_Download:(NSString*)urlStr contentID:(NSString*)cid progressBar:(UIProgressView*)progressBar
 {
     NSLog(@"Initiate_Download for cid:%@",cid);

    urlStr = [urlStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:urlStr]];

    NSString *fileName = [NSString stringWithFormat:@"%@.mp4",cid];
    NSString *destinationPath = [[self VideoDownloadFolderPath]stringByAppendingPathComponent:fileName];

    [request setDownloadDestinationPath:destinationPath];   
    [request setTemporaryFileDownloadPath:[NSString stringWithFormat:@"%@-part",destinationPath]];
    [request setDelegate:self];

    NSDictionary *rqstDict = [NSDictionary dictionaryWithObjectsAndKeys:cid,@"cid",urlStr,@"url", nil];
    [request setUserInfo:rqstDict];
    [request setAllowResumeForFileDownloads:YES];
    [request startAsynchronous];
}

 //Delegate
- (void)requestStarted:(ASIHTTPRequest *)request1
{
    //some code
}
- (void)request:(ASIHTTPRequest *)request1 didReceiveResponseHeaders:(NSDictionary *)responseHeaders
{
   //some code
}
- (void)requestFinished:(ASIHTTPRequest *)request1
{
   //some code
}
- (void)requestFailed:(ASIHTTPRequest *)request1
{
  //some code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:42:29.190

您需要为每个请求保存请求的 URL 和目标路径并暂停请求使用代码：-

> [请求取消]；

要恢复请求，您需要创建另一个具有相同 URL 和目标路径的请求。例如 ：-

```
 ASIHTTPRequest *requestToResume = [ASIHTTPRequest requestWithURL:url];
    [requestToResume setTemporaryFileDownloadPath:tempfilePath];
    [requestToResume setDownloadDestinationPath:filePath]; 
    [requestToResume setDelegate:self];
    [requestToResume setDownloadProgressDelegate:self];
    [requestToResume setUserInfo:dictInfo];

    // This file has part of the download in it already
    [requestToResume setAllowResumeForFileDownloads:YES];
    [requestToResume setDidFinishSelector:@selector(requestDone:)];
    [requestToResume setDidFailSelector:@selector(requestWentWrong:)];
    [requestToResume startAsynchronous]; 
```

在上面的代码中，我们从字典中获取歌曲的 url，该字典被设置为请求的 userInfo，现在我们获取这些详细信息以恢复请求。当我们恢复请求时，文件将从暂停点开始下载，从而解决了恢复文件下载的目的。

# java - 适用于所有浏览器的数据可视化库

> ID：13757711
> 
> 赞同：5
> 
> 时间：2012-12-07T05:58:14.690
> 
> 标签：java, javascript, ios, flash, data-visualization

请推荐一个符合以下要求的数据可视化库：
1\. 适用于所有流行浏览器（包括 ios safari）
2\. java 兼容
3\. 开源（首选）

到目前为止，我使用过 BirdEye（Adobe Flex 的一个全面的开源信息可视化和可视化分析库）[http://code.google.com/p/birdeye/](http://code.google.com/p/birdeye/)
BirdEye 的优点：BirdEye 的开源
缺点：在 ios 上不起作用浏览器（它是基于 Flash 的）

我不想为 iOS 编写本机应用程序。因此，我需要类似 BirdEye 的东西，它也可以在 iOS 上运行。

该应用程序的主要目标是为战略地图绘制图表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:49:15.950

我从事谷歌可视化 API 的工作。我发现它易于使用并支持多种选项。他们的网站也有很好的示例代码，所以学习曲线很平滑。

我已经为 iOS Safari 完成了它。但我认为，它支持所有主流浏览器，因为它是一个基于 Javascript 的库。

[谷歌可视化API](https://developers.google.com/chart/interactive/docs/reference)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T22:25:17.637

它需要有多复杂？

*   如果您只需要**标准图表**，如交互式折线图、条形图、堆积条形图、饼图、点图等，请使用**[gRaphael](http://g.raphaeljs.com/)**。它建立在[Raphael](http://raphaeljs.com/)之上，它酌情使用 SVG 或 VML（IE6-8 的怪异 SVG 克隆）。它适用于 IE6+、所有主要桌面浏览器、iOS Safari 和现代 Android 库存浏览器。我知道它在哪里不起作用的唯一浏览器是 Android 版本 1 和 2 中的库存 Android 浏览器 - 即 2011 年中期或更早的旧 Android 手机（不是使用 v3 的平板电脑），用户没有t 更换股票浏览器或更新。

![在此处输入图像描述](../Images/0610a7bc68598750cb8e15f657b6f616.png) ![在此处输入图像描述](../Images/c69ab6bec24149e60977b95a71aaca83.png)

*   如果您需要**认真的东西**，请考虑从**[D3.js](http://d3js.org/)**（一个很棒的 SVG 数据可视化库，用于网络上许多最复杂的数据可视化，包括大多数纽约时报的[获奖交互式可视化](http://blog.visual.ly/10-things-you-can-learn-from-the-new-york-times-data-visualizations/)）的输出，例如）并将其通过 Raphael 管道以使其跨浏览器。D3 输出 SVG 路径和形状，Raphael 将 SVG 路径字符串和形状坐标作为输入......让两个库一起工作实际上从来没有那么简单，但这也不是什么大问题 - 这是[一篇关于如何做](http://dataist.wordpress.com/2012/03/11/combining-d3-and-raphael-to-make-a-network-graph/)以力有向图为例。当然，虽然这对于跨浏览器的兼容性非常有用，但它使用了大量的处理能力。优化性能，并考虑使用一些加载动画旋转 gif :-)

![在此处输入图像描述](../Images/96ce3eeca88120dc71417546ef052427.png) ![在此处输入图像描述](../Images/b7dc8c9a07832d70f5ae6e2d5d75d970.png)

* * *

**提示：**如果您对 Raphael 做任何严肃的事情，涉及使用或查看边界框尺寸来操纵路径或形状，并且最新版本或您正在使用的版本是 2.1 或更早版本（在撰写本文时） )，[应用此错误修复](https://github.com/DmitryBaranovskiy/raphael/issues/543)以避免奇怪的不可预测的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T22:47:28.063

我喜欢使用（经过一些研究）：
[YUI](http://developer.yahoo.com/yui/2/)
[InfoVis](http://philogb.github.com/jit/)
[highcharts](http://www.highcharts.com/)

享受！

# mongodb - 如果我们使用分片，mongodb 中的唯一索引

> ID：13757712
> 
> 赞同：4
> 
> 时间：2012-12-07T05:58:26.083
> 
> 标签：mongodb, sharding

在分片环境中，数据根据分片键的范围存储在不同的分片中。在我看来，在这种情况下 mongodb 不能保证索引的唯一性（至少如果它不是分片键）。我们可以为分片键使用唯一索引吗？我们可以在分片键以外的字段上使用索引吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T06:41:46.243

你是对的，mongodb 不能保证跨分片集群的索引的唯一性，因为每个分片不能报告它是否包含要插入的键在它们的上下文中是唯一的。

[文档](http://docs.mongodb.org/manual/reference/limits/#limit-sharding-unique-indexes)中对此进行了介绍，并且针对这种情况有[许多](http://docs.mongodb.org/manual/faq/sharding/#how-does-mongodb-ensure-unique-id-field-values-when-using-a-shard-key-other-than-id)[策略](http://docs.mongodb.org/manual/tutorial/enforce-unique-keys-for-sharded-collections/)。

结果是，如果为分片键选择这样的键，您将需要您的应用程序层来强制分片键的唯一性。

我不是 100% 清楚你的第二个问题指的是什么。除了分片键之外，您可以在集合上创建索引，这些可用于提高查询性能，但任何不使用分片键的查询都将是分散/聚集的（因此会命中每个分片）。他们命中每个分片时的性能将取决于索引的好坏，这是拥有除分片键之外的索引的好处。

# javascript - 以下两种在java脚本中禁用元素的方法有什么区别

> ID：13757713
> 
> 赞同：2
> 
> 时间：2012-12-07T05:58:26.107
> 
> 标签：javascript

我必须禁用我的 Java 脚本代码中的一些元素，哪个更适合通过 Java 脚本禁用元素：

```
 1\.   document.getElementById("eleId").disabled = true;

 2\.   document.getElementById("eleId").disabled = "disabled"; 
```

请任何人描述这些功能，它们之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:05:54.070

两种情况都有效。

在情况 1 中，您将属性“禁用”设置为布尔值“真”。在情况 2 中，您将属性“禁用”设置为字符串值“禁用”。

如果您打算通过 HTML 设置此值，通常您可以只在列出的标签上设置“禁用”属性即可。但是为了符合 XHTML/XML 样式，您将使用格式正确的属性 disabled="disabled"。

基本上，如果浏览器检测到存在“禁用”属性，（我认为）它将禁用该元素。

**编辑** 另一个 SO 用户（RobG）指出，这会设置相关元素的“DOM 属性”而不是“属性”。

在处理“getElementById”的结果时，您正在处理文档结构的表示。当您进行修改时，您是在“对象模型”上设置属性。用 Java 编程了这么久，我通常会互换术语属性和属性。在说“它设置属性”的情况下，我是不正确的。说我要设置“属性”意味着我会修改文档（HTML）以更改实际源中“禁用”的值。这实际上是在修改对象树，设置代表对象的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:05:35.937

在 XHTML 中，属性最小化是被禁止的，disabled 属性必须定义为**disabled="disabled"**

在普通的 HTML 中，我们可以像**disabled=true**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T06:06:38.067

从技术上讲，如果属性只有一个禁用属性，它应该禁用它。虽然对于 XHTML，它必须是 disabled="disabled"

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T06:30:59.670

HTML [disabled 属性](http://dev.w3.org/html5/spec/single-page.html#attr-fe-disabled)是布尔值，它的存在将相关的 DOM 属性设置为`true`并用[HTML 4.01](http://www.w3.org/TR/html4/interact/forms.html#adef-disabled)和[HTML5](http://dev.w3.org/html5/spec/single-page.html#a-quick-introduction-to-html)编写：

```
<... disabled ...> 
```

在 XML 中，属性必须有值，所以对于[XHTML](http://www.w3.org/TR/xhtml1/#C_10)，它是这样写的：

```
<... disabled="disabled" ...> 
```

但是实际值无关紧要，它仍然可以用作布尔属性。

在 DOM 中，元素属性通常反映相关的属性值，但并非总是如此。`setAttribute`在工作方式和工作方式上也存在不一致`getAttribute`，因此在 javascript 中最好使用 DOM 属性，除非有充分的理由使用属性（例如 data-attribute）。

要禁用元素，`disabled`应将 DOM 属性设置为 boolean `true`，要“取消禁用”元素，应将属性设置为`false`。将任何字符串分配给该值将导致`true`通过类型转换将其设置为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T06:09:01.700

人们往往会对 xhtml 属性值感到困惑：

```
<input id="test" disabled="disabled"/> 
```

和 javascript DOM api：

```
inputElement.disabled = true; 
```

并将 javascript 值设置为字符串。它在技术上不正确，但它工作正常。

# ios - 什么是 XCode 界面生成器“文档”部分

> ID：13757715
> 
> 赞同：9
> 
> 时间：2012-12-07T05:58:38.230
> 
> 标签：ios, xcode, interface-builder

我了解“Xcode 特定标签”部分。

我**不**明白的是“注释”部分。我玩过它，看不到任何明显的效果。

*谁能解释一下？*

![在此处输入图像描述](../Images/1baf5c7d8f8e0cbb75c9e7979f64d10b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:22:36.357

它将带有键的属性字符串保存`userComments`到情节提要文件中。

```
<attributedString key="userComments">
    <fragment content="These are the comments I entered in the notes section of Interface Builder">
        <attributes>
            <font key="NSFont" size="11" name="LucidaGrande"/>
            <paragraphStyle key="NSParagraphStyle" alignment="left" lineBreakMode="wordWrapping" baseWritingDirection="natural"/>
        </attributes>
    </fragment>
</attributedString> 
```

不过，我不知道这个有什么实际用途。不过，能够以编程方式检索它会很好。

# ios - Facebook iOS SDK FBProfilePictureView 未获取或显示图像

> ID：13757717
> 
> 赞同：0
> 
> 时间：2012-12-07T05:58:54.103
> 
> 标签：ios, xcode, facebook-ios-sdk, ios6

我的视图控制器中有以下代码

```
if (FBSession.activeSession.isOpen) {
    [[FBRequest requestForMe] startWithCompletionHandler:
     ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
         if (!error) {
             self.nameString = user.name;
             self.profileImage.profileID = [user objectForKey:@"id"];
             [self.tableView reloadData];
         }
     }];
} 
```

我遇到了两个问题。首先是配置文件图像永远不会被获取和显示。第二个是我必须`[self.tableView reloadData]`为了名字出现。这会导致丑陋的滞后。我该如何解决这两个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T23:46:56.283

我不知道为什么没有获取您的个人资料图片，但我遇到了一些个人资料图片未显示的问题，这导致我编写了 FBProfilePictureView 的修改版本，它位于[此处](https://github.com/combinatorial/DBFBProfilePictureView)。这有一个完成处理程序，如果下载失败，则会调用错误详细信息。（就我而言，我认为问题在于我在短时间内发送了太多请求，而我的防火墙阻止了其中一些）。

至于必须重新加载整个表格，这取决于您在哪里显示它。我假设在一个牢房里？如果是这样，那么当您创建单元格时，请执行以下操作：

```
 CustomCell *cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    if (FBSession.activeSession.isOpen) {
        [[FBRequest requestForMe] startWithCompletionHandler:
            ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
                   if (!error) {
                         cell.profileImage.profileID = user.id;
                   }
             }];
    } 
```

另外，请注意您可以使用`user.id`和`user.name`访问`requestForMe`查询的结果。

# php - 从多维数组中获取“唯一 ID”的信息

> ID：13757718
> 
> 赞同：0
> 
> 时间：2012-12-07T05:58:57.993
> 
> 标签：php, arrays

我有一个具有这种结构的数组：

```
Array
(
    [mysite] => Array
        (
            [0] => Array
                (
                    [0] => uniqueid
                    [1] => brand
                    [2] => horsepower
                    [3] => topspeed
                )

            [1] => Array
                (
                    [0] => uniqueid
                    [1] => brand
                    [2] => horsepower
                    [3] => topspeed
                )

            [2] => Array
                (
                    [0] => uniqueid
                    [1] => brand
                    [2] => horsepower
                    [3] => topspeed
                )
        )
) 
```

每辆车都有一个“独特的”，然后是品牌、马力等。

如果我想获取**随机汽车**的信息，我会这样做：

```
$rkey = array_rand($sites['mysite'], 1); // get a random key
$car_info = $myarray['mysite'][$rkey]; 
```

**您对如何使用某个“唯一标识”获取信息有任何想法吗？**

```
$car_info = "get the information of a car with a certain uniqueid"; 
```

泰！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:19:10.713

尝试，

在 for 循环中传递唯一的 id 你会得到想要的结果它可能会帮助你，

```
$array = array(

  0   => Array
            (
                0 => 'uniqueid0',
                1 => 'brand',
                2 => 'horsepower',
                3 => 'topspeed',
            ),
  1   => Array
            (
                0 => 'uniqueid1',
                1 => 'brand',
                2 => 'horsepower',
                3 => 'topspeed',
            ),
  2  => Array
            (
                0 => 'uniqueid2',
                1 => 'brand',
                2 => 'horsepower',
                3 => 'topspeed',
            ),
  3  => Array
            (
                0 => 'uniqueid3',
                1 => 'brand',
                2 => 'horsepower',
                3 => 'topspeed',
            ),
);

  foreach($array as $arr){
    if($arr[0] == 'uniqueid2'){
      $result = $arr;
      break;
    }
  } 
```

print_r($result);

输出：

数组（[0] => uniqueid2 [1] => 品牌 [2] => 马力 [3] => 最高速度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:20:00.340

```
$uniqueid = 12345;

foreach ($myarray['mysite'] as $car) {
    if($car[0] == $uniqueid) {
        $car_info = $car;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:35:11.737

如果 uniqueid 在汽车中是唯一的，那么您可以尝试按如下方式重组数组

如果可能的话

```
Array (
    [mysite] => Array
    (
        [uniqueid1] => Array
            (
                [0] => uniqueid1
                [1] => brand
                [2] => horsepower
                [3] => topspeed
            )

        [uniqueid2] => Array
            (
                [0] => uniqueid2
                [1] => brand
                [2] => horsepower
                [3] => topspeed
            )

        [uniqueid3] => Array
            (
                [0] => uniqueid3
                [1] => brand
                [2] => horsepower
                [3] => topspeed
            )
    )
) 
```

这样，您可以直接访问汽车以获取唯一 ID，也可以应用随机逻辑

如果不是@Jevgeni Bogatyrjov 解决方案效果很好

```
foreach ($myarray['mysite'] as $car) {
    if($car[0] == $uniqueid) {
        $car_info = $car;
        break;
    }
} 
```

# silverlight - 在 Bing 地图 (XAML) 中创建可选图钉

> ID：13757719
> 
> 赞同：1
> 
> 时间：2012-12-07T05:59:06.197
> 
> 标签：silverlight, xaml, bing-maps

这是 Silverlight 的更多 XAML 问题。

```
<Mobile:DevicePushpinTemplateSelector 
                            m:MapLayer.Position="{Binding Location}" 
                            ZoomLevel="{Binding ZoomLevel, ElementName=MainMap}" 
                            Content="{Binding}">
                            <Mobile:DevicePushpinTemplateSelector.DotTemplate>
                                <DataTemplate>
                                    <Ellipse Width="8" Height="8" Stroke="Black" Fill="{Binding IsGPSDataRecent, Converter={StaticResource BoolToGreenRedBrushConverter}}" StrokeThickness="1">
                                        <ToolTipService.ToolTip>
                                            <TextBlock Text="{Binding DisplayId}" />
                                        </ToolTipService.ToolTip>
                                    </Ellipse>
                                </DataTemplate>
                            </Mobile:DevicePushpinTemplateSelector.DotTemplate>
                            <Mobile:DevicePushpinTemplateSelector.NumberedTemplate>
                                <DataTemplate>
                                    <Border x:Name="border" Background="{Binding IsGPSDataRecent, Converter={StaticResource BoolToGreenRedBrushConverter}}" BorderBrush="Black" BorderThickness="2" Padding="2" Height="20" CornerRadius="8">
                                        <TextBlock  VerticalAlignment="Center" Text="{Binding DisplayId}" />
                                    </Border>
                                </DataTemplate>
                            </Mobile:DevicePushpinTemplateSelector.NumberedTemplate>
                        </Mobile:DevicePushpinTemplateSelector> 
```

在上面的 XAML 上，我有 2 个基于地图缩放级别的不同模板。当它被缩小时 - 它显示更小的椭圆，当用户放大时 - 我增加了图钉的大小。

2个问题：

1.  有很多图钉它变得非常慢，我相信这是由于模板选择。

2.  我希望它与众不同。我想创建“IsSelected”属性，以便所有图钉在所有缩放级别上都是相同的，但是当用户单击图钉时 - 它的大小会扩大。

我想知道如何编码“选择”部分。我希望一次只选择一个图钉。我可以绑定到属性并使图钉部分可见/不可见，但我不确定如何编写“选择”部分。应该是按钮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:53:21.903

在做一个 Windows 手机应用程序时，我遇到了许多引脚导致“滞后”的问题，最简单的解决方法是仅在地图中心的某个半径内显示引脚，并移除其他引脚，直到它们进入半径。

干杯马克

# eclipse-plugin - 强制 Eclipse (Helios) 在应用程序运行时使用更新版本的 SWT

> ID：13757722
> 
> 赞同：2
> 
> 时间：2012-12-07T05:59:19.803
> 
> 标签：eclipse-plugin, swt, eclipse-rcp, helios

我正在使用 Eclipse-Helios 开发一个 RCP 项目。

安装的 SWT 版本（在 plugins 目录中）是 [org.eclipse.swt-win32-3.6.2, & org.eclipse.swt.jar]

我需要仅在 swt-3.8 中提供的新 API 功能。（具体来说，我希望在打开之前为 SWT 颜色对话框设置自定义颜色。）

我已经从 SWT/Eclipse 下载站点 [ [http://download.eclipse.org/eclipse/downloads/drops/R-3.8-201206081200/#SWT](http://download.eclipse.org/eclipse/downloads/drops/R-3.8-201206081200/#SWT) ]下载了 3.8.1

*   SWT 下载不是一个插件（几个 jar、src.zip 和一些自述文件），所以我无法将它添加到我的“目标平台”（即使在添加包含目录后它也不会显示为可用 jar在“位置”中）
*   我无法找到 SWT 的更新站点（或任何我可以获得更新版本插件的站点）

如果我将 swt.3.8.jar 添加到我的类路径中（然后在项目构建路径中增加它的顺序优先级），我可以从我的代码中访问更新的 api 功能（以及查看源代码）。然而，当我运行应用程序时，运行时似乎仍在使用旧的 SWT jar，因为在尝试访问新功能时出现未知方法错误。

问题：

1.  是否有 SWT 存储库位置可用于使用 eclipse 安装管理器下载更新版本的 SWT？
2.  如果没有，有没有办法可以强制运行时忽略旧版本（我假设通过 plugin.xml）？
3.  有没有更好的方法来实现我想要做的事情？
4.  目前在 helios plugins 目录下的两个 SWT jar 有什么区别（因为 3.8 下载只包含 win-32 版本）？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:24:25.637

SWT 可在此处作为单独的插件下载：http:
[//download.eclipse.org/eclipse/downloads/drops/R-3.8-201206081200/#SWT](http://download.eclipse.org/eclipse/downloads/drops/R-3.8-201206081200/#SWT)

Eclipse 3.8 包含常规插件，包括 SWT（win32 特定的以及通用的“org.eclipse.swt_.jar”）。我目前使用的是 3.8 版本，它们显示为插件。

我也有 Eclipse 3.6 (Helios)，我能够使用“文件->导入->插件开发->插件和片段”向导导入 swt 插件。我刚刚指定了 eclipse 3.8 目录并可以将它们导入我的工作区。一旦导入，我当然可以将它们包含在运行时环境中。Eclipse 应该自动使用最新版本。

# python - 如何区分类、函数和方法

> ID：13757724
> 
> 赞同：2
> 
> 时间：2012-12-07T05:59:44.107
> 
> 标签：python, class, function, methods, attributes

在 Python 中，`dir()`函数用于显示传递给它的参数的属性、类、方法的列表，对吗？

例如`email`python中有一个模块

```
import email
dir(email) 
```

**结果：**

```
['Charset', 'Encoders', 'Errors', 'FeedParser', 'Generator', 'Header', 'Iterators', 'LazyImporter', 'MIMEAudio', 'MIMEBase', 'MIMEImage', 'MIMEMessage', 'MIMEMultipart', 'MIMENonMultipart', 'MIMEText', 'Message', 'Parser', 'Utils', '_LOWERNAMES', '_MIMENAMES', '__all__', '__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', '__version__', '_name', 'base64MIME', 'email', 'importer', 'message_from_file', 'message_from_string', 'mime', 'quopriMIME', 'sys'] 
```

所以我想知道的是如何判断上面列表中的给定对象是属性、方法、类还是函数。

从上面的列表中，我们可以预期 , `__all__`,`__builtins__`等`__doc__`是属性，但是我们如何仅通过查看列表来区分所有/剩余的这些类型呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:06:15.890

它们*都是*属性，其中一些属性可能引用函数、某些类或对象。类似`__this__`的通常称为[魔术方法](https://stackoverflow.com/q/1090620/674039)。

你可以看看：

```
[type(getattr(email, x)) for x in dir(email)] 
```

但最好的答案是：“我在乎什么？”

您需要了解的有关接口的任何信息都可以在模块的文档中找到。各种属性的类型用处不大，重要性不高（`dir`也可能不完整）。

所以不要打扰类型检查。不过，值得了解（和使用）python 命名约定（参见[pep8](http://www.python.org/dev/peps/pep-0008/)）：

*   `CamelCase`上课
*   `snake_case`对于函数和方法
*   `SHOUTY_CASE`对于常数
*   `_leading`“私人”事物的下划线（即未记录的实现细节，不打算成为公共接口的一部分）
*   `__double`用于启用[名称修饰](https://en.wikipedia.org/wiki/Name_mangling)的前导下划线，这是一种在复杂继承情况下处理可能的命名空间冲突的方法（一个非常晦涩的功能，您几乎可以肯定在正常使用中不需要）
*   `__dunder__`前面提到的魔术方法的“双下划线”，这些是 Python 本身的数据模型钩子。你可以重新定义现有的钩子来自定义你的类和模块中的行为，但不要仅仅为了你自己的目的发明新的魔法名称，而是使用普通属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:06:51.943

这是你要找的吗？

`[type(getattr(email, x)) for x in dir(email)]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:04:47.650

您不能，而不是“仅通过查看列表”。它们都是属性。其中一些也可能是方法，或函数，或类等，但您无法通过查看列表来判断。您必须查看实际对象。例如，您可以使用`callable(email.Encoders)`来决定是否`email.Encoders`可调用。您可以使用它`type(email.Encoders)`来找出它是什么类型。或者，更有可能的是，您什么都不做，因为您知道需要使用哪些方法/类/函数，并且根本不使用它们就使用它们`dir`。

你实际上想用你的代码来完成什么？

# linux - Linux 命令 df 提取“名称”和“可用空间”

> ID：13757727
> 
> 赞同：0
> 
> 时间：2012-12-07T06:00:06.963
> 
> 标签：linux, shell, command, diskspace

如何从 df linux 命令中仅提取“名称”和“可用空间”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:06:33.200

您可以使用...

```
df | tail -n +2 |  awk '{ print $1, $4 }' 
```

...假设您也不想要标题。如果这样做，请删除`tail`.

我们将`df`' 的输出通过管道传输到`tail`，我们将第一行（标题）切断，然后将其通过管道传输到`awk`，使用它来打印第一列和第四列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:04:23.757

假设名称和可用空间是第 1 列和第 4 列：

```
 df | awk '{print $1, $4}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T06:05:05.993

传统的方法是

```
df | awk '{printf "%-15s%-8s\n",$1,$5}' 
```

# android - 从 Activity 启动 FragmentActivity

> ID：13757730
> 
> 赞同：6
> 
> 时间：2012-12-07T06:00:19.380
> 
> 标签：android, android-fragmentactivity

如何从 Activity 启动 FragmentActivity？

我的 MainActivity 是一个闪屏，接下来我想为 FragmentActivity 加注星标。

我需要一些东西而不是，例如：

```
 startActivity(new Intent("com.example.manager.MyFragmentActivity")); 
```

TIA。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T06:02:22.910

从您的第一个 Activity 电话开始：

```
 startActivity(new Intent(this, MyFragmentActivity.class)); 
```

注意：确保`MyFragmentActivity`在您的`AndroidManifest.xml`.

**编辑：**这篇关于[开始另一个活动](http://developer.android.com/training/basics/firstapp/starting-activity.html#BuildIntent)的培训文章应该对您有所帮助。

# python - 同时在不同的目录（os.chdir）中工作（并行线程）

> ID：13757734
> 
> 赞同：4
> 
> 时间：2012-12-07T06:00:27.773
> 
> 标签：python, multithreading, parallel-processing, directory, multiprocessing

我想并行同步我所有的 vcs 目录。我将进入目录并运行特殊的命令行脚本来同步 git 或 mercurial 存储库。这是一个缓慢的过程，所以我想尝试使其并行。

但是我的并行线程为“当前目录”而战存在麻烦，所以我需要一些技巧来同时在不同的目录中工作。

当前解决方案：

```
def syncrepos(repos):
  for r in repos.split("\n"):
    if r:
      print("------ repository: ", r)
      thrd = ThreadingSync(r)
      thrd.setDaemon(True)
      thrd.start() 
```

ThreadingSync 在哪里

```
class ThreadingSync(threading.Thread):
  def __init__(self, repo):
    threading.Thread.__init__(self)
    self.repo = repo
  def run(self):
    r = self.repo.split("-t")
    path = (r[0]).strip()
    if len(r) < 2:
      vcs = VCS.git
    else:
      vcs = {
    'git'       : VCS.git,
    'git git'   : VCS.git_git,
    'git hg'    : VCS.git_mercurial,
    'git svn'   : VCS.git_subversion,
    'git vv'    : VCS.git_veracity,
    'hg hg'     : VCS.hg_hg}[(r[1]).strip()]
    os.chdir(path)
    if vcs == VCS.git:
      checkGitModifications()
      gitSync()
    ... etc 
```

并且`gitSync`是

```
def gitSync(): 
  pretty(cmd("git pull origin master"))
  pretty(cmd("git fetch upstream master"))
  pretty(cmd("git pull --rebase upstream master"))
  pretty(cmd("git push -f origin master")) 
```

当然这并不完美，但它完成了我的工作，我想加快速度。

如何为每个存储库/目录生成一个子进程（os.chdir 的安全实现）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T06:45:00.457

创建一个工人池来运行您的子例程：

[http://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers](http://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers)

在您的情况下，可能类似于：

```
from multiprocessing import Pool
import os

def gitSync(repo):
    print "I am", repo, "and my cwd is:", os.getcwd()
    os.chdir(repo)
    print "I am", repo, "and my cwd is:", os.getcwd()

if __name__ == '__main__':
    dir = os.getcwd()
    repos = [item for item in os.listdir(dir) if os.path.isdir(os.path.join(dir, item))]
    print repos
    pool = Pool(maxtasksperchild=1)
    pool.map(gitSync, repos)
    pool.close()
    pool.join() 
```

请注意，池可能会使调试变得有点困难，因为父级通常不会透露更多信息——我的一个孩子死了——所以首先让它在单线程中工作。

编辑：这很有趣 - 请注意 Pool 的新论点`maxtasksperchild=1`。该进程不在`rebooted`调用之间，因此当您在一次调用中更改目录时，当进程被重用时，您仍在该目录中。在这里，我通过告诉池在每次调用后终止进程来解决它。

```
john:captcrunch john$ python foo.py 
['.git', '.idea', 'fixtures', 'lib', 'obj', 'raw', 'tests']
I am .git and my cwd is: /Users/john/code/linz/src/captcrunch
I am .git and my cwd is: /Users/john/code/linz/src/captcrunch/.git
I am .idea and my cwd is: /Users/john/code/linz/src/captcrunch
I am .idea and my cwd is: /Users/john/code/linz/src/captcrunch/.idea
I am fixtures and my cwd is: /Users/john/code/linz/src/captcrunch
I am fixtures and my cwd is: /Users/john/code/linz/src/captcrunch/fixtures
I am lib and my cwd is: /Users/john/code/linz/src/captcrunch
I am lib and my cwd is: /Users/john/code/linz/src/captcrunch/lib
I am obj and my cwd is: /Users/john/code/linz/src/captcrunch
I am obj and my cwd is: /Users/john/code/linz/src/captcrunch/obj
I am raw and my cwd is: /Users/john/code/linz/src/captcrunch
I am raw and my cwd is: /Users/john/code/linz/src/captcrunch/raw
I am tests and my cwd is: /Users/john/code/linz/src/captcrunch
I am tests and my cwd is: /Users/john/code/linz/src/captcrunch/tests 
```

# ios - 如何为设置包的文本字段提供占位符（Root.plist）

> ID：13757735
> 
> 赞同：6
> 
> 时间：2012-12-07T06:00:27.250
> 
> 标签：ios, uitextfield, placeholder, settings.bundle, root.plist

我想为设置包（Root.plist）的文本字段提供占位符是否可能？如果是的话如何？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:08:10.933

恐怕目前这是不可能的——我也试图这样做，但似乎找不到任何可行的解决方案。如果这有帮助，应该放置它的官方文档在[这里](https://developer.apple.com/library/ios/#documentation/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference/Articles/PSTextFieldSpecifier.html)。

# python - Python deg2num 语法错误

> ID：13757736
> 
> 赞同：0
> 
> 时间：2012-12-07T06:00:33.110
> 
> 标签：python, syntax-error, cloudmade

在编程方面，我是一个新手，我正在尝试将坐标转换为我正在使用 Python 开发的地图应用程序的图块编号。我得到的代码是这样的：

```
import math
def deg2num(lat_deg, lon_deg, zoom):
lat_rad = math.radians(lat_deg)
n = 2.0 ** zoom
xtile = int((lon_deg + 180.0)/360.0*n)
ytile = int((1.0 - math.log(math.tan(lat_rad)+(1/math.cos(lat_rad)))/math.pi)/2.0*n)
return (xtile, ytile) 
```

当我将 lat_deg、lon_deg 和 zoom 值传入函数参数时，我在运行代码时不断收到语法错误。

有人可以帮忙吗。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:46:53.913

除非您粘贴错误，否则您的错误就是缩进。

```
import math
def deg2num(lat_deg, lon_deg, zoom):
    lat_rad = math.radians(lat_deg)
    n = 2.0 ** zoom
    xtile = int((lon_deg + 180.0)/360.0*n)
    ytile = int((1.0 - math.log(math.tan(lat_rad)+(1/math.cos(lat_rad)))/math.pi)/2.0*n)
    return (xtile, ytile) 
```

试试看。]

仍然没有看到您的问题，我运行了您的代码：

```
import math
def deg2num(lat_deg, lon_deg, zoom):
    lat_rad = math.radians(lat_deg)
    n = 2.0 ** zoom
    xtile = int((lon_deg + 180.0)/360.0*n)
    ytile = int((1.0 - math.log(math.tan(lat_rad)+(1/math.cos(lat_rad)))/math.pi)/2.0*n)
    return (xtile, ytile) 
```

使用您所说的相同数字：

```
>>> print deg2num(40.22621608040184, 21.402665376663208, 10)
(572, 386)
>>> 
```

# html - 将 Word 格式化为等效的 HTML

> ID：13757739
> 
> 赞同：0
> 
> 时间：2012-12-07T06:00:47.727
> 
> 标签：html, vba, ms-word

很抱歉第一次没有说清楚。这是我的需要。

我正在尝试编写一个 VBA 脚本来将简单的单词文本格式转换为 HTML。现在我知道 Word 已经可以将文档转换为 HTML，但它添加了很多垃圾代码，最终结果对我有用。

基本上我所需要的只是非常简单的文本格式转换。我有几个 Word 文档需要上传到我的网站，我的文档中唯一的文本格式是“粗体”“下划线”和“斜体”。

我只想要一个 VBA 脚本，它将贯穿文档并将所有具有这种格式的文本（单词或句子）转换为 HTML。

例如

**猫困**了....改成....猫困了

*猫困*了....改成....猫困了

我希望将最终结果保存为纯文本文件。

PS我是VBA编程的新手。

我想在 MS Word 2007 中执行此操作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-10T08:07:58.590

话题发起者显然对总是由自己的微软转换器插入的额外不必要标签的数量皱眉。要编写宏，您只需要学习文档对象模型 (DOM) 的相应功能。DOM在内置帮助系统中描述，可以从MS Office自带的VBA编辑器中调用。但这个任务比第一眼看的要难，因为在处理一些文档时，难免会遇到一些 MS Word 的陌生感。因此，更好的解决方案是使用第三方工具来完成这项任务。

# python - '==' 运算符在 python 中无法正常工作

> ID：13757740
> 
> 赞同：2
> 
> 时间：2012-12-07T06:00:56.187
> 
> 标签：python, python-2.7

以下代码在我的脚本中行为不正确：

```
from ctypes import *
base_addr = c_uint64(0)
base_addr_temp = c_uint64(0)
print base_addr
print base_addr_temp
if(base_addr == base_addr_temp):
    print "val" 
```

我得到的输出：

> c_ulong(0L)
> 
> c_ulong(0L)

我正在使用 python 2.7.3 版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T06:04:19.550

我认为因为这些是对象，所以您必须按值比较它们：

```
base_addr.value == base_addr_temp.value 
```

自从我完成任何 Python 以来已经有一段时间了，但是在许多语言中，只有当两个对象实际上引用同一个对象（即引用内存中的相同位置）时，它们才被认为是“相等的”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:09:47.380

您的比较是在两个对象的地址之间（“base_addr”和“base_addr_temp”），而不是在两个对象的值之间（都是 0L）

Weirdly, on windows 2.7.3 base_addr.**str**() returns 'c_ulonglong(0L)' which is different from what you saw -- but that doesn't change the fact that you were comparing data locations rather than values.

# c++ - i5-2500k 上的 cpuid 指令：未设置 MMX、SSE、SSE2 位

> ID：13757742
> 
> 赞同：6
> 
> 时间：2012-12-07T06:01:08.383
> 
> 标签：c++, cpu, intel, instruction-set, cpuid

这是预期的吗？我希望我的 Sandy Bridge CPU 报告它可以处理 MMX、SSE 和 SSE2 指令。这些位是否没有设置，因为这些“旧”指令集已被一些新指令集“取代”？

我[在这里使用此代码](https://stackoverflow.com/a/4823889/340947)将 CPU 检测放入我的代码中。

```
#include "CPUID.h"
int main(int argc, char *argv[]) {
    CPUID cpuid;
    cpuid.load(0);
    printf("CPU: %.4s%.4s%.4s", 
        (const char*)&cpuid.EBX(),
        (const char*)&cpuid.EDX(),
        (const char*)&cpuid.ECX()
    );
    char brand[0x30];
    cpuid.load(0x80000002); memcpy(brand,&cpuid.EAX(),16);
    cpuid.load(0x80000003); memcpy(brand+16,&cpuid.EAX(),16);
    cpuid.load(0x80000004); memcpy(brand+32,&cpuid.EAX(),16);
    printf("%.48s\n",brand);
    cpuid.load(1);
    // tests bit 23 of ECX for popcnt instruction support
    printf("MMX - %s\n", cpuid.EAX() & (1 << 23) ? "yes" : "no");
    printf("SSE - %s\n", cpuid.EAX() & (1 << 25) ? "yes" : "no"); 
    printf("SSE2 - %s\n", cpuid.EAX() & (1 << 26) ? "yes" : "no"); 
    printf("SSE3 - %s\n", cpuid.ECX() & (1 << 0) ? "yes" : "no"); 
    printf("SSSE3 - %s\n", cpuid.ECX() & (1 << 9) ? "yes" : "no"); 
    printf("SSE4.1 - %s\n", cpuid.ECX() & (1 << 19) ? "yes" : "no"); 
    printf("SSE4.2 - %s\n", cpuid.ECX() & (1 << 20) ? "yes" : "no"); 
    printf("AES - %s\n", cpuid.ECX() & (1 << 25) ? "yes" : "no"); 
    printf("AVX - %s\n", cpuid.ECX() & (1 << 28) ? "yes" : "no"); 
    printf("HT - %s\n", cpuid.EAX() & (1 << 28) ? "yes" : "no"); 
    printf("IA64 (emulating x86) - %s\n", cpuid.EAX() & (1 << 30) ? "yes" : "no"); 
    printf("Hypervisor? - %s\n", cpuid.ECX() & (1 << 31) ? "yes" : "no"); 
    printf("popcnt - %s\n", cpuid.ECX() & (1 << 23) ? "yes" : "no");
    return 0;
} 
```

输出：

```
CPU: GenuineIntel       Intel(R) Core(TM) i5-2500K CPU @ 3.30GHz
MMX - no
SSE - no
SSE2 - no
SSE3 - yes
SSSE3 - yes
SSE4.1 - yes
SSE4.2 - yes
AES - yes
AVX - yes
HT - no
IA64 (emulating x86) - no
Hypervisor? - no
popcnt - yes 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T06:09:54.623

愚蠢的错误。我假设表中的第一行是 EAX，但它是 EDX。

产生正确的结果。嗯，这个芯片不支持HT，但也许那个总是设置的。

更新：原来“HT”表示封装上>1个逻辑线程（该芯片有4个）。

```
CPU: GenuineIntel       Intel(R) Core(TM) i5-2500K CPU @ 3.30GHz
MMX - yes
SSE - yes
SSE2 - yes
SSE3 - yes
SSSE3 - yes
SSE4.1 - yes
SSE4.2 - yes
AES - yes
AVX - yes
HT - yes
IA64 (emulating x86) - no
Hypervisor? - no
popcnt - yes 
```

# hibernate - 使用 Hibernate 和 JPA 的多列复合键映射

> ID：13757743
> 
> 赞同：1
> 
> 时间：2012-12-07T06:01:09.220
> 
> 标签：hibernate, jpa, hibernate-mapping, composite-key

几天来，我一直在尝试让复合键工作，查看网络上的许多示例，但由于它不起作用，仍然缺少一些东西。

在下面的代码中 FMX.modelRiskMitigant 和 FMX.modelFacility 被正确设置，但休眠试图在 DB 列中设置 null ！

```
@Entity
@Table(name="FACILITY_MITIGANT_XREF")
@IdClass(FMXPK.class)
public class FMX implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@Column(name="FACILITY_ID")
private Long facilityId;

@Id
@Column(name="RISK_MITIGANT_ID")
private Long riskMitigantId;

@ManyToOne
@JoinColumn(name="FACILITY_ID", insertable=false, updatable=false)
private Facility modelFacility;

@ManyToOne
@JoinColumn(name="RISK_MITIGANT_ID", insertable=false, updatable=false)
private RiskMitigant modelRiskMitigant;

}

public class FMXPK implements Serializable {
private static final long serialVersionUID = 1L;

private Long facilityId;

private Long riskMitigantId;
}

@Entity
@Table(name="MODEL_FACILITY")
public class Fac implements Serializable {
private static final long serialVersionUID = 1L;

@OneToMany(mappedBy="modelFacility", fetch=FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval=true)
private Set<FMX> facilityMitigantXrefs;

 } 

@Entity
@Table(name="MODEL_RISK_MITIGANT")
public class RiskMitigant implements Serializable {
private static final long serialVersionUID = 1L;

@OneToMany(mappedBy="modelRiskMitigant", fetch=FetchType.EAGER, cascade = CascadeType.ALL)
private Set<FMX> facilityMitigantXrefs;

} 
```

# javascript - javascript 中的 document.poppedLayer 是什么？

> ID：13757745
> 
> 赞同：0
> 
> 时间：2012-12-07T06:01:24.743
> 
> 标签：javascript

```
if (browserType == "gecko" )
document.poppedLayer =
eval('document.getElementById("realtooltip")');
else if (browserType == "ie")
document.poppedLayer =
eval('document.getElementById("realtooltip")');
else
document.poppedLayer =
eval('document.layers["realtooltip"]');
document.poppedLayer.style.visibility = "hidden"; 
```

上面代码中用到了poppedLayer，我想了解一下什么是poppedLayer？如果有人可以给我有关它的文档的参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:07:26.730

它只是一个自定义变量，放置在文档对象上（不推荐做法）。

它被用作指向此“realtooltip”元素的指针。

# python - 在 Python 中使用 .join()

> ID：13757746
> 
> 赞同：3
> 
> 时间：2012-12-07T06:01:28.337
> 
> 标签：python

非常简单和快速的问题。以这个列表为例：

```
a = ['hello1', 'hello2', 'hello3']
','.join(a) 
```

我想在列表的最后一个元素之前使用“和”而不是逗号。所以我会得到：

> 你好 1、你好 2 和你好 3

代替....

> 你好 1 你好 2 你好 3

有没有办法做到这一点`.join()`？我知道我可以在列表中输入这样的简单示例，但我在实际程序中需要的列表来自用户输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T06:05:45.047

本质上，您想分别操作列表的两部分，第一部分由除最后一个字符串之外的所有内容组成，另一部分仅由最后一个组成。

```
def my_func(lst):
    return ', '.join(lst[:-1])+' and '+lst[-1] 
```

或使用 lambda：

```
f = lambda x: ', '.join(x[:-1]) + ' and '+x[-1] 
```

或者如果你只想让它运行一次：

```
result = ', '.join(a[:-1]) + ' and ' + a[-1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T06:53:55.827

您需要将小列表作为特殊情况处理：

```
def my_function(a):
    if a == []:
        return ""
    elif len(a) == 1:
        return a[0]
    else:
        return ', '.join(a[:-1])+' and '+ a[-1] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T06:09:11.753

SnakesAndCoffee 有最好的方法。另一种（不太有用）的方法：

```
>>> a = ['hello1', 'hello2', 'hello3']
>>> ' and '.join((', '.join(a[:-1]), a[-1]))
'hello1, hello2 and hello3' 
```

在这里您使用两个`joins`- 内部`join`将每个元素连接起来，直到倒数第二个元素用逗号。`a[-1]`该字符串然后使用外部连接到最后一个元素 ( ) `join`，即`and`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-01T00:36:10.830

```
list=[] for i in range(no):   for j in range(no-i):
      list.append(j+1);   if(i!=0):
      for a in range(2*i-1):
          list.append(" ");   for k in range(no-i,0,-1):
      if(i==0 and k==no):
          pass;
      else:
          list.append(k);   list.append("\n"); 
```

# backbone.js - Backbone.js 和 Fat-Free-Framework：移动数据

> ID：13757748
> 
> 赞同：2
> 
> 时间：2012-12-07T06:01:51.330
> 
> 标签：backbone.js, fat-free-framework

我对 F3 很满意，但对主干.js 来说完全是新手。我正在尝试在获取请求中侦听一些参数，然后通过主干模板在主干视图中使用它们，并以“正确”的方式进行操作......

到目前为止，这是我正在做的事情的简化版本：

请求的网址：

```
http://myserver.com/route/?foo=12345 
```

这是我的 F3 路由处理代码：

```
F3::route('GET /route', 'start');
function start() {
    F3::set('foo', pg_escape_string($_REQUEST["foo"]) );
    echo Template::serve('page.html');
} 
```

我设置了`foo`F3 变量，以便可以在 page.html 模板中使用它。以下是 page.html 的内容：

```
<script>
var foo = '{{@foo}}';
</script> 
```

所以现在我将 foo 参数作为 javascript 中的全局变量，我想将它放入主干视图，其内容由主干模板填充。

这是主干视图中的内容：

```
var fooView = Backbone.View.extend({
    el: '#foo-container',
    template: _.template(templates.foo),
    initialize: function() {
        this.render();
    },
    render: function() {
        this.$el.html(this.template( {foo:foo}  ));
    },
}); 
```

这是主干模板中的内容：

```
templates.foo = '\
Here is the value of foo in my template: <%= foo %>  \
'; 
```

最后，你瞧，#foo-container div 获取了其中的数据（`initialize`当然是在我执行之后）。

问：有没有更好的方法？必须有更好的方法来做到这一点，数据通过两种不同的模板语言！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:13:18.343

是的，有更好的方法。Backbone 专为从服务器加载单个 HTML 页面的单页应用程序而设计，然后所有后续数据都通过带有 JSON 响应主体的 AJAX 加载。`Backbone.Model`使用正确的 URL将您的服务器端请求建模为 a 。将您的视图渲染绑定到模型的`change`事件。调用`model.fetch()`模型，它将`GET`为您发出 AJAX 请求。更改您的服务器端代码以发送 JSON 数据而不是带有嵌入 JavaScript 的 HTML，然后模型将接收 JSON 并将其解析为 javascript 属性，触发一个`change`事件，这将导致视图被呈现。

# java - 如果我将一些小部件制作成单个通用 GWT 模块，GWT 是否有助于提高速度？

> ID：13757754
> 
> 赞同：1
> 
> 时间：2012-12-07T06:02:22.963
> 
> 标签：java, google-app-engine, gwt, objectify

我正在使用**GWT**和 Google App-engine 使用*Java*运行应用程序。我有一些常见的小部件是“ *MultiSuggestBoxWidget* ”、“ *TextBoxWithHelpTextWidget* ”、“ *DateBoxWithHelpTextWidget* ”等。

我将它们放在单独的文件和单独的包中。我在我的应用程序的许多模块中使用这些小部件。***如果我将所有这些小部件制作成单个 GWT 通用模块，有什么好处吗？***我认为这可能有助于提高处理速度。

这意味着如果我将所有小部件制作成单个 GWT 模块，它不会多次 生成*JavaScript代码。*

如果有人有这方面的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:44:53.283

它没有提供优化。GWT 编译器非常聪明，可以从小部件、包或实用程序类中排除任何未使用的代码。您可以在屏幕级别使用其他 gwt 功能获得更多好处。 [https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)

您还可以尝试在不同级别优化小部件

1) 预编译相关的 css 和 i18n 字符串-

```
a) https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle
b) http://code.google.com/p/google-web-toolkit/wiki/CssResource 
```

2) 另外请使用[Chromes 开发工具](https://developers.google.com/chrome-developer-tools/docs/overview)来研究您的屏幕的网络资源使用情况和内存分析，以便更好地了解要调整的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:01:56.290

不，它没有。GWT 编译器获取您自己项目和所有其他库中的所有源代码，并将它们一起编译为一个大型单体应用程序。它对生成的代码进行了许多优化。因此，源位于不同的库或单个库中并不重要。此外，任何未使用的来源甚至方法都将被删除。

GWT 可以生成报告，让您深入了解班级的规模。请参阅 GWT 文档以了解如何使用它们以及报告是什么：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideCompileReport](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompileReport)

# python - 是否有将 Python 添加到 PATH 的替代方法

> ID：13757759
> 
> 赞同：2
> 
> 时间：2012-12-07T06:02:53.480
> 
> 标签：python

我主要有几个问题；一些关于`PATH`变量和一些关于分发模块。

*   是否可以使用仅包含运行程序所需模块的代码分发 Python 解释器？

*   是否可以创建我自己的 python 发行版，它只安装了我需要安装的模块？

*   是否可以在不使用`PATH`变量启动 Python（在 Windows 上）的情况下获取 Python 安装的位置？

*   为什么 Python 的安装程序不包含将 Python 添加到`PATH`?

我问这些问题的原因是因为我在考虑如何与某人共享脚本，而无需他们手动将 Python 添加到`PATH`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:27:05.617

Python 应用程序可以是包装器自包含安装。

在 Microsoft Windows 上执行此操作的一种建议方法是 py2exe [http://www.py2exe.org/](http://www.py2exe.org/)

py2exe 应该能够处理模块依赖关系，以便您仅分发应用程序所需的 Python 包（鸡蛋）。我不确定它如何减少 Python 发行版本身。

如果目标机器不包含 Python 解释器或者对于最终用户来说安装太困难，这是建议的方法。

如果您出于某种原因需要戳它，默认的 Python 位置也会写入 Windows 注册表[http://opensourcehacker.com/2011/02/22/sharing-the-active-python-interpreter-on-windows/](http://opensourcehacker.com/2011/02/22/changing-the-active-python-interpreter-on-windows/)（声明：我的博客）

# c# - 从远程 XML 文件中检索数据并添加到数据网格

> ID：13757760
> 
> 赞同：0
> 
> 时间：2012-12-07T06:02:55.993
> 
> 标签：c#, xml

我有一个没有写入权限的 XML 文件。我在线检索它。

我有下面的代码，它工作正常，但我无法前进..

```
using System.Data;
using System.Xml.Linq;

try
{
    XDocument XMLFile = XDocument.Load(@"http://Domain/path/to/file.xml");
    MessageBox.Show("Remote File Loaded Successfully ...");
    var items = XMLFile.Descendants("item");
    int i = 0;
    foreach (var item in items)
    {
        i++;
        //var title = item.Descendants("title");
        //MessageBox.Show(title.ToString());
    }
    MessageBox.Show("Items Found: " + i);
}
catch(exception ex)
{
    MessageBox.Show("Error: " + ex.Message.ToString());
    MessageBox.Show("Error: " + ex.InnerException.ToString());
} 
```

我面临的问题是在`foreach`循环中。每个根元素项都有一些子元素。我不知道如何检索这些元素！

另外，我有一个网格视图，我想将结果添加到其中，我该如何实现？

感谢。

***编辑***

XML 示例：

```
<item>
    <title>Title</title>
    <link>http://domain/link</link>
    <description>Some Text</description>
    <pubDate>Wed, 05 Dec 2012 01:29:37 -0500</pubDate>
    <guid isPermaLink="false">Domain_text_INTEGER</guid>
    <category domain="http://domain/link">A</category>
    <category domain="http://domain/link">B</category>
    <category domain="http://domain/link">C</category>
    <category domain="http://domain/link">D</category>
    <category domain="http://domain/link">E</category>
    <coop:keyword>A</coop:keyword>
    <coop:keyword>B</coop:keyword>
    <coop:keyword>C</coop:keyword>
    <coop:keyword>D</coop:keyword>
    <coop:keyword>E</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>Text</coop:keyword>
    <coop:keyword>text integer</coop:keyword>
    <coop:keyword>Text</coop:keyword>
</item> 
```

我需要什么：

*   标题
*   关联
*   描述
*   发布日期
*   Guid (INTEGER) <= 我可以从字符串或文本整数中获取整数

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:32:42.317

这个[MSDN 主题](http://social.msdn.microsoft.com/Forums/en/xmlandnetfx/thread/ceb3b540-2b91-4699-a5c7-16a13b674305)可以帮助你。在 MSDN 上，他们发布了您的问题的[演练](http://msdn.microsoft.com/en-us/library/ekw4dh3f%28v=vs.71%29.aspx)。两个链接都建议为此使用数据集：

```
DataSet dsAuthors = new DataSet("authors");
string filePath = "Complete path where you saved the XML file";
dsAuthors.ReadXml(filePath);
dataGrid1.DataSource = dsAuthors;
dataGrid1.DataMember = "authors";
dataGrid1.CaptionText = dataGrid1.DataMember; 
```

我只是复制/粘贴一个例子。您需要根据您的目的对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:15:33.660

因此，在您的 XMLfile XDocument 上，您有后代。

还创建一个集合

```
List<someobject> list = new List<someobject>(); 
```

所以在你的循环中

```
foreach (var item in items)
{
    var someObject = new SomeObject()
    {
        Title = item.Element("title").Value
    }
} 
```

然后将您的集合绑定到网格

# ios - 获取按钮操作：UICollectionView Cell

> ID：13757762
> 
> 赞同：23
> 
> 时间：2012-12-07T06:03:09.020
> 
> 标签：ios, ipad, uicollectionview, uicollectionviewcell

我创建了一个`UICollectionViewCell`by nib 并在其中添加了一个按钮，并创建了一个 .h 和 .m 文件，将类添加到了 nib中。然后`file's owner`在通过插座连接它的 .m 中编写了一个按钮操作。

集合视图填充正常，但无法触发按钮操作。我认为收集单元的代表被调用。

我怎样才能获得按钮动作？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-07-15T19:30:39.793

我也有这个问题。没有子视图会接收触摸事件。虽然 Scott K 的解决方法确实有效，但我仍然觉得有问题。所以我又看了看我的笔尖，注意到我用来创建 UICollectionViewCell 的原始子视图是 UIView。即使我将类更改为 UICollectionViewCell 的子类，XCode 仍然认为它是 UIView，因此您看到的 contentView 问题没有捕捉到触摸事件。

为了解决这个问题，我通过确保拖动 UICollectionViewCell 对象并将所有子视图移动到该对象来重做笔尖。之后，触摸事件开始在我的单元格的子视图上起作用。

可以指示您的 nib 是否配置为 UICollectionViewCell 是查看您的高级视图的图标。

![在此处输入图像描述](../Images/2c056eb8c1d81298aaa771ed7909903f.png)

如果它看起来不像这样，那么它可能会错误地解释触摸事件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-31T22:25:55.237

当您通过 nib 创建`UICollectionViewCell`nib 时，nib 的内容不会添加到单元格的 contentView 中——所有内容都会直接添加到`UICollectionViewCell`. 似乎没有办法让 Interface Builder 将 nib 中的顶级视图识别为`UICollectionViewCell`，因此“自动”内的所有内容都会添加到 contentView 中。

正如 sunkehappy 所指出的，您想要接收触摸事件的任何内容都需要进入 contentView。它已经为您创建好了，所以您能做的最好的事情就是`UIButton`在 awakeFromNib 时间以编程方式将您的内容移到 contentView 中。

```
-(void)awakeFromNib {
    [self.contentView addSubview:self.myButton];
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-07T07:19:30.330

[UICollectionViewCell 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UICollectionViewCell_class/Reference/Reference.html)

> 要配置单元格的外观，请将数据项内容显示为子视图所需的视图添加到 contentView 属性中的视图。不要直接将子视图添加到单元格本身。单元管理多层内容，内容视图只是其中的一层。除了内容视图之外，单元格还管理两个背景视图，这些视图以选定和未选定状态显示单元格。

您可以`awakeFromNib`像这样添加按钮：

```
- (void)awakeFromNib
{
    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];
    [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [self.contentView addSubview:button];
}

- (void)buttonClicked:(id)sender
{
    NSLog(@"button clicked");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-08T14:37:46.023

我刚刚通过添加解决了它

```
[self bringSubviewToFront:myButton]; 
```

进入`awakeFromNib`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-07T20:53:30.353

我有一个类似的问题，单元格底部的子视图没有收到触摸事件，但顶部工作正常。于是我开始调查，得到以下结果：

*   界面构建器会将您在其中创建的单元格的任何子视图添加到单元格的 contentView 中，即使 contentView 本身在界面构建器中不可见
*   我的代码扩展了单元格以适应内容的大小，因此集合视图中的大多数单元格的高度都大于 Interface Builder 中的蓝图
*   由于某种原因，单元格本身的“自动调整子视图”属性设置为 NO。这导致神秘且不可见的界面构建器 contentView 保持与界面构建器中单元格最初的大小相同，因此任何超出 contentView 范围的子视图都不会收到触摸并且无响应

将 Interface Builder 中单元格的“自动调整子视图”设置为“是”解决了我的问题！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-05T11:02:13.957

我觉得很难理解 Accepted 的答案，我会尽量给出一个简单的答案。

在 UICollectionViewCell 中有两种类型。

1.  集合视图单元格
2.  集合可重用视图

我使用了 Collection Reusable View，因为按钮操作不起作用。

然后根据接受的答案，我尝试使用集合视图单元，因为只有按钮操作在工作。使用图像中的第二个对象。它会正常工作。

[![在此处输入图像描述](../Images/986d2e9cca5417a21002002f2f8e8e4c.png)](https://i.stack.imgur.com/izKTf.png)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-03-08T05:04:59.323

在 UICollectionViewCell 中为 CollectionView 创建一个句柄

在 UICollectionViewCell 的 .h 文件中

```
@property (nonataomic, retain) UICollectionView *collView; 
```

在 UICollectionViewCell 的 .m 文件中

```
@synthesize *collView; 
```

然后在Controller的实现File中的foll Method中设置Collection View

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
  YourCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:homePageCollViewCellIdentifier forIndexPath:indexPath];
    //NSString *str = [NSString stringWithFormat:@"HP item %d", indexPath.row+1];
    cell.collView = self.theCollectionView;
} 
```

现在在你的 UICollectionViewCell 的实现中

```
- (void)awakeFromNib
{
    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];
    [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [self.contentView addSubview:button];
} 
```

现在在您的按钮单击方法中

```
-(void)buttonClicked:(id)sender
{
    NSLog(@"button clicked");
    NSIndexPath *indPath = [collVw indexPathForCell:self];    
    [collVw.delegate collectionView:self.collVw didSelectItemAtIndexPath:indPath];
} 
```

# php - PHP字符串到整数不能很好，编码问题？

> ID：13757765
> 
> 赞同：2
> 
> 时间：2012-12-07T06:03:14.783
> 
> 标签：php, casting, integer

我正在读取 CSV 文件（采用 UTF-8 编码）。其中一个值是数字，当我尝试将其转换为整数以便进行一些计算时，它只是被设置为零。我究竟做错了什么？

```
var_dump ( $row3[_MM_Impressions] );
//writes: string(5) "59"

$imps = (int)$row3[_MM_Impressions];
var_dump($imps);
//writes: int(0) 

$imps = $row3[_MM_Impressions]*1;
var_dump($imps);
//writes: int(0) 

$imps = intval($row3[_MM_Impressions]);
var_dump($imps);
//writes: int(0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:23:32.997

你的变量中有 HEX 字符串编号......那你为什么不使用[hexdec](http://php.net/manual/ru/function.hexdec.php)呢？

> 返回由 hex_string 参数表示的十六进制数的十进制等效值。hexdec() 将十六进制字符串转换为十进制数。
> 
> hexdec() 将忽略它遇到的任何非十六进制字符。

# python-2.7 - 如何在python中编辑和更新目录中的xml文件

> ID：13757767
> 
> 赞同：2
> 
> 时间：2012-12-07T06:03:24.827
> 
> 标签：python-2.7

一个名为“ini”的文件夹中有很多文件，我必须搜索一个具有属性名称的文件并编辑它的值，我试过这个代码： -

```
import os, glob
from lxml import etree

for filename in glob.glob("./ini/*.xml"):

    xmlData = etree.parse(filename)

    for msg in xmlData.findall("//Value"):
        name = msg.attrib["name"]
        init = msg.attrib["initValue"]
        if name == "attribute name" :
            msg.set("initValue", "0")
            print msg.get('name'), msg.get('initValue')
            print msg.attrib
            print name, init
            print filename 
```

该值仅在“msg”中更新，而不是在原始文件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:14:24.837

至此，您已经*阅读*、*解析*和*修改*了 xml 文件。缺少最后一步是*保存*文件，因为修改后的版本只存在于正在运行的进程的内存中。

```
with open("outfile.xml", "w") as f:
    f.write(etree.tostring(xmlData)) 
```

这将以漂亮的打印（缩进）格式将修改后的 xml 写入*outfile.xml*。您将能够通过将*“outfile.xml”*替换为包含原始文件名的变量来覆盖原始文件。

# php - mysql 向 node.js 推送通知

> ID：13757770
> 
> 赞同：0
> 
> 时间：2012-12-07T06:03:39.807
> 
> 标签：php, mysql, node.js, socket.io

我想构建一个应用程序，它将使用 node.js、socket.IO 和 mysql 和 php 技术 该应用程序将包括一个使用 php 和 mysql 的管理系统 该应用程序还将包括一个使用 html 和 node.js 的前端页面

我想知道mysql是否有可能自动向node.js服务器发送通知，然后服务器将味精拉到前端？

我知道，可以从管理系统发送味精，但我只想让前端监听 mysql 服务器，任何查询更新都会通知前端，而不是使用管理系统将味精推送到node.js 然后推送到前端

我知道 mssql 有这个功能，但是不要 mysql hv 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:09:45.857

在第一个视图中，它可能看起来很酷 - 你更新数据库，MySQL 通知生成器然后更新你明显静态的、预先生成的 HTML 前端文件......

**但：**

想想你的堆栈的哪一部分实际上最了解你将哪些数据拉入不同的页面以及何时必须触发更新。数据库没有也不应该。

不要仅仅因为您改变了堆栈的工作方式而使事情变得过于复杂：) 您的管理软件是堆栈中*触发*重新缓存或更新输出文件的正确部分。那么你就有了一个清晰的责任链：

*   管理员：数据和页面管理
*   数据库：数据持久层
*   Frontpage 生成（通常在大多数情况下使用 php 按需完成 - 但当然你可以在任何时间和任何时间进行此操作 :)）
*   输出持久性（缓存或只是将静态文件写入磁盘）

# r - 使用 ggplot2 在美国专题地图上重新定位阿拉斯加和夏威夷

> ID：13757771
> 
> 赞同：27
> 
> 时间：2012-12-07T06:03:41.703
> 
> 标签：r, ggplot2

我正在尝试创建一张显示美国所有 50 个州的专题地图，但我无法以可靠的方式重新定位阿拉斯加和夏威夷。我有几个想法，但没有一个能很好地工作。我现在将展示它们。

首先我们需要导入数据；使用`maps`包中的数据是不够的，因为它不包括夏威夷和阿拉斯加。

```
setwd(tempdir())
download.file("https://dl.dropbox.com/s/wl0z5rpygtowqbf/states_21basic.zip?dl=1", 
              "usmapdata.zip", 
              method = "curl")
# This is a mirror of http://www.arcgis.com/home/item.html?
# id=f7f805eb65eb4ab787a0a3e1116ca7e5
unzip("usmapdata.zip")

require(rgdal)
all_states <- readOGR("states_21basic/", "states")

require(ggplot2); require(maptools); require(rgeos); require(mapproj);
all_states <- fortify(all_states, region = "STATE_NAME") 
```

现在我们定义一些情节美学：

```
p <- ggplot() + geom_polygon( 
  aes(x=long, y=lat, group = group, fill = as.numeric(as.factor(id))), 
  colour="white", size = 0.25
) + coord_map(projection="azequalarea") + 
scale_fill_gradient(limits = c(1,50)) 
```

现在我们删除所有背景等，这样当我们重叠非连续状态时它们不会发生冲突：

```
p <-   p + theme(axis.line=element_blank(),
            axis.text.x=element_blank(),
            axis.text.y=element_blank(),
            axis.ticks=element_blank(),
            axis.title.x=element_blank(),
            axis.title.y=element_blank(),
            panel.background=element_blank(),
            panel.border=element_blank(),
            panel.grid.major=element_blank(),
            panel.grid.minor=element_blank(),
            plot.background=element_blank()) 
```

## 使用视口

我的第一个想法是使用视口：

```
AK <- p %+% subset(all_states, id == "Alaska") + theme(legend.position = "none")
HI <- p %+% subset(all_states, id == "Hawaii") + theme(legend.position = "none")
contiguous <- p %+% subset(all_states, id != "Alaska" & id != "Hawaii")

grid.newpage()
vp <- viewport(width = 1, height = 1)
print(contiguous, vp = vp)
subvp1 <- viewport(width = 0.25, height = 0.25, x = 0.18, y = 0.33)
print(AK, vp = subvp1)
subvp2 <- viewport(width = 0.12, height = 0.12, x = 0.32, y = 0.27)
print(HI, vp = subvp2) 
```

![在此处输入图像描述](../Images/a3d42fba7c12517b6870d4f38aa34651.png)

这看起来不错，但并不令人满意，因为它对图形的细微变化非常敏感，例如调整大小或更改图例的大小和形状。

## 手动移动阿拉斯加和夏威夷

```
all_states_AKHImoved <- within(all_states, {
  lat[id == "Alaska"] <- lat[id == "Alaska"] - 45
  long[id == "Alaska"] <- long[id == "Alaska"] + 40
  lat[id == "Hawaii"] <- lat[id == "Hawaii"] + 0
  long[id == "Hawaii"] <- long[id == "Hawaii"] + 70
})
p %+% all_states_AKHImoved 
```

![在此处输入图像描述](../Images/b1209ba70fdc2d7f2287912d6cb17845.png)

这并不令人满意，因为阿拉斯加在大多数美国地图上通常不会按比例缩放，因此它看起来非常大。重新定位阿拉斯加和夏威夷也改变了地图投影引入的失真。

## 问题

有没有人有更好的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T17:23:17.567

以下是如何通过投影和转换来做到这一点。你会需要：

```
require(maptools)
require(rgdal)

fixup <- function(usa,alaskaFix,hawaiiFix){

  alaska=usa[usa$STATE_NAME=="Alaska",]
  alaska = fix1(alaska,alaskaFix)
  proj4string(alaska) <- proj4string(usa)

  hawaii = usa[usa$STATE_NAME=="Hawaii",]
  hawaii = fix1(hawaii,hawaiiFix)
  proj4string(hawaii) <- proj4string(usa)

  usa = usa[! usa$STATE_NAME %in% c("Alaska","Hawaii"),]
  usa = rbind(usa,alaska,hawaii)

  return(usa)

}

fix1 <- function(object,params){
  r=params[1];scale=params[2];shift=params[3:4]
  object = elide(object,rotate=r)
  size = max(apply(bbox(object),1,diff))/scale
  object = elide(object,scale=size)
  object = elide(object,shift=shift)
  object
} 
```

然后读入你的shapefile。使用`rgdal`：

```
us = readOGR(dsn = "states_21basic",layer="states") 
```

现在转换为等面积，并运行 fixup 函数：

```
usAEA = spTransform(us,CRS("+init=epsg:2163"))
usfix = fixup(usAEA,c(-35,1.5,-2800000,-2600000),c(-35,1,6800000,-1600000))
plot(usfix) 
```

这些参数分别是阿拉斯加和夏威夷的旋转、缩放、x 和 y 位移，是通过反复试验获得的。仔细调整它们。甚至将夏威夷的比例参数更改为 0.99999 也将其从地球上发射出去，因为涉及的人数众多。

如果您想将其转回经纬度：

```
usfixLL = spTransform(usfix,CRS("+init=epsg:4326"))
plot(usfixLL) 
```

但我不确定您是否需要使用转换，`ggplot`因为我们已经使用`spTransform`.

您现在可以跳过`ggplot2`强化业务。我不确定这对您是否重要，但请注意`usfix`版本中的州顺序不同 - 阿拉斯加和夏威夷现在是最后两个州。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-07-06T02:49:18.437

我`fiftystater`在 GitHub ( `devtools::install_github("wmurphyrd/fiftystater")`) 上发布了 R 包以提供一个简单的解决方案。它基于 Spacedman 的答案中的步骤（将链接但代表不足），并作为一个`ggplot2::geom_map`现成的形状数据框发布，命名`fifty_states`为消除安装依赖项、追踪源形状文件或调整省略值的需要。

```
library(ggplot2)
library(mapproj)
library(fiftystater)

crimes <- data.frame(state = tolower(rownames(USArrests)), USArrests)

p <- ggplot(crimes, aes(map_id = state)) + 
  geom_map(aes(fill = Assault), map = fifty_states) + 
  expand_limits(x = fifty_states$long, y = fifty_states$lat) +
  coord_map()
p 
```

[![五十州地图](../Images/89c6f11b44f42279270bbbe1201e2228.png)](https://i.stack.imgur.com/jq5Ma.png) ^(*五十州地图*)

可以按通常的方式清理绘图噪声，并且`fifty_states_inset_boxes`包中还有添加插入框的功能：

```
p + scale_x_continuous(breaks = NULL) + 
  scale_y_continuous(breaks = NULL) +
  labs(x = "", y = "") +
  theme(panel.background = element_blank()) +
  fifty_states_inset_boxes() 
```

[![五十个州的清洁工，带插盒](../Images/c10b1c3ab6d24883d76245f3af0c5333.png)](https://i.stack.imgur.com/IFBpx.png) ^(*五十个带有插图框的州*)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T08:32:27.303

一旦你开始像这样改变事物，你不妨将阿拉斯加和夏威夷表示为墨西哥湾某处的方盒。它还有一个额外的好处，那就是可以分辨夏威夷是什么颜色。

然后你可能会一直走下去，使用一个扭曲的系统，每个州都有相等的面积，然后你就可以看到罗德岛了。

[谷歌图像上的美国制图示例](https://www.google.co.uk/search?q=usa%20map%20cartogram&hl=en&client=firefox-a&hs=myZ&tbo=d&rls=org.mozilla%3aen-GB%3aofficial&channel=fflb&source=lnms&tbm=isch&sa=X&ei=BKnBUPfaGaur0AXw5ICgCg&ved=0CAcQ_AUoAA&biw=1184&bih=902 "美国制图示例")显示了这种情况。不知道他们中有多少人有 shapefile 或数据。

你真的对状态的相对大小感兴趣，或者你想要一个让人们看到一个状态的价值的表示吗？

# python - sha256sum 可执行文件和 PyCrypto 库之间的差异

> ID：13757779
> 
> 赞同：2
> 
> 时间：2012-12-07T06:04:22.423
> 
> 标签：python, command-line, sha256

我正在尝试获取 ASCII 编码字符串的 SHA256 和。首先，我尝试了`sha256sum`可执行文件：

```
$ echo foo | sha256sum
b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b878ae4944c 
```

但是当我使用这个`PyCrypto`库时，我得到了一些不同的东西：

```
from Crypto.Hash import SHA256
h = SHA256.new();
h.update('foo');
print(h.hexdigest()); 
```

我得到以下信息：

```
c5aac592460a9ac7845e341090f6f9c81f201b63e5338ee8948a6fe6830c55dc 
```

我怀疑我错过了第一个的一些东西，也就是说，`echo foo`可能有一个分隔符或其他东西，但我无法弄清楚是什么。

这两种情况有什么不同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T06:42:35.027

该命令`echo foo`在输出末尾添加换行符，您应该使用以下`-n`选项：

```
$ echo -n foo | sha256sum
2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7ae  -
$ python
Python 2.7.3 (default, Sep 26 2012, 21:53:58) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import hashlib
>>> hashlib.sha256('foo').hexdigest()
'2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7ae' 
```

# java - 用于读取网站内容的 Java 代码

> ID：13757782
> 
> 赞同：1
> 
> 时间：2012-12-07T06:04:34.533
> 
> 标签：java, web-crawler

Java中有什么方法可以读取网页的内容吗？

网页不是一个简单的 HTML 页面，它包含一个 ajax 调用、图像、PDF 和 Flash。我需要阅读/下载页面的所有内容（在执行 ajax 调用之后）。

请为此建议我任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:13:28.587

为此目的，存在各种 html 解析器。您可以使用其中一个

[http://ccil.org/~cowan/XML/tagsoup/](http://ccil.org/~cowan/XML/tagsoup/)

[http://jsoup.org/](http://jsoup.org/)

[http://jericho.htmlparser.net/docs/index.html](http://jericho.htmlparser.net/docs/index.html)

这些解决方案提取包含图像的 html 标签。对于 css 提取，您可以使用 css 解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:19:52.370

您正在寻找爬虫和处理工具。

列出了许多 [开源爬虫](http://java-source.net/open-source/crawlers)。您可以将它与搜索服务器[Solr一起使用](http://lucene.apache.org/solr/)

# html - 在 ` 中居中` `

> ID：13757783
> 
> 赞同：0
> 
> 时间：2012-12-07T06:04:37.943
> 
> 标签：html, css, margin, vertical-alignment

如何`<img>`在包含中居中`<div>`？

平时`margin-left: auto; margin-right: auto;`不行。

图像可以比容器大，并由`max-width`和水平或垂直缩放`max-height`。

带有以下代码的 jsfiddle：http: [//jsfiddle.net/9ShGj/1/](http://jsfiddle.net/9ShGj/1/)

HTML：

```
<div class="container">
   <img src="http://www.yensa.com/fat/fat-dude10.jpg" />
</div>
<div class="container">
   <img src="http://oi43.tinypic.com/bje2wn.jpg" />
</div> 
```

CSS：

```
.container {
 width: 200px;
 height: 200px;
 background: rgb(120, 120, 120);
 border: 1px solid red;
 margin: 5px;
}

.container img {
 max-width: 200px;
 max-height: 200px;
 margin-left: auto;
 margin-right: auto;
 vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T06:09:58.080

你可以这样写：

**CSS**

```
div{
    width:200px;
    height:200px;
    border:1px solid red;
    text-align:center;
    line-height:200px;
}

img{
    vertical-align:middle;
} 
```

**HTML**

```
<div>
    <img src="http://dummyimage.com/150x150/000/fff&text=dummy" >
</div> 
```

检查这个[http://jsfiddle.net/dP89y/](http://jsfiddle.net/dP89y/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:11:44.037

图像不是块级元素，因此需要将其转换为块级元素

所以在你的css中添加

```
.container img {
 display:block                /*ADD this line*/
 max-width: 200px;
 max-height: 200px;
 margin-left: auto;
 margin-right: auto;
 vertical-align: middle;
} 
```

您还需要考虑以下几点

```
Doctype : check whether it is not in quirks mode.

Width of inner div or image must me less that width of parent div. 
```

做检查这些事情你会得到你的答案......一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:11:22.233

除非您使 img 成为块级元素，否则您应该能够将其居中：

```
.container { text-align: center; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T06:14:07.807

更新以下 CSS...`vertical-align:middle; text-align:center`

```
 .container {
        width: 200px;
        height: 200px;
        background: rgb(120, 120, 120);
        border: 1px solid red;
        margin: 5px;
        vertical-align:middle; text-align:center //add this
    } 
```

# php - MSSQL Multi SELECT FROM 4 table (HOW?)

> ID：13757784
> 
> 赞同：1
> 
> 时间：2012-12-07T06:04:41.040
> 
> 标签：php, sql-server-2008

当我获取 aasoc 时，我需要从其他表中进行 4 次选择。它非常糟糕并且停止了驱动页面（。请告诉我是否可以提出一个请求而不是四个请求？

```
$sql_id_city = "SELECT * FROM City WHERE id_city='$id_city'";
$get_id_city = sqlsrv_query($conn, $sql_id_city);
$info_id_city = sqlsrv_fetch_array($get_id_city, SQLSRV_FETCH_ASSOC); 
$name_city=$info_id_city['name'];

$id_producer_country=($i['id_producer_country']!='')? $i['id_producer_country']:'0';

$sql_id_producer_country = "SELECT * FROM Producer_country WHERE id_producer_country='$id_producer_country'";
$get_id_producer_country = sqlsrv_query($conn, $sql_id_producer_country);
$info_producer_country = sqlsrv_fetch_array($get_id_producer_country, SQLSRV_FETCH_ASSOC);
$name_producer_country=$info_producer_country['name'];

$id_firm=($i['id_firm']!='')? $i['id_firm']:'0';

$sql_id_firm = "SELECT * FROM Firm WHERE id_firm='$id_firm'";
$get_id_firm = sqlsrv_query($conn, $sql_id_firm);
$info_film = sqlsrv_fetch_array($get_id_firm, SQLSRV_FETCH_ASSOC);
$name_firm=$info_film['name'];
$phone_firm=$info_film['phone'];

$id_price=($i['id_price']!='')? $i['id_price']:'0';

$sql_id_cost = "SELECT * FROM Cost WHERE id_price='$id_price'";
$get_id_cost = sqlsrv_query($conn, $sql_id_cost);
$info_cost = sqlsrv_fetch_array($get_id_cost, SQLSRV_FETCH_ASSOC);
$cost=$info_cost['cost'];
$id_currency=$info_cost['id_currency'];
$id_sale=$info_cost['id_sale']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:16:47.393

```
 "SELECT * FROM City , Producer_country , Firm , Cost WHERE City.id_city='$id_city'
 AND Producer_country.id_producer_country=City.'$id_producer_country(country id as field in city table)' 
AND Firm.id_firm='$id_firm(fiels name as u in Producer_country table )' AND
 Cost.id_price='$id_price(fiels name as u in firm table)'"

if u have same as fiels in other table so u can use the as keyword for avoid the ambiguity 
```

# jquery - WP_Head 不工作

> ID：13757788
> 
> 赞同：0
> 
> 时间：2012-12-07T06:04:50.747
> 
> 标签：jquery, wordpress, header, nextgen-gallery

[wp_head()](http://codex.wordpress.org/Function_Reference/wp_head)函数几天后就不能工作了。Jquery 现在没有在主站点上加载，nextgen 库也没有检测到这个函数，但是这个函数目前存在于我的头文件中。

我试过重新安装 wordpress、nextgen 画廊和主题。有什么办法可以在不重新安装网站的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:14:57.680

您是否添加了多个可能导致冲突的 jquery 版本。你可以添加无冲突的js吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:44:36.153

我看了你的`header.php`，有几个问题：

**1\. [wp_enqueue_script()](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)**

你没有像推荐的那样使用它。它应该在你的`functions.php`. 下面是 Codex 的一个例子：

```
<?php
function my_scripts_method() {
    wp_enqueue_script('scriptaculous');            
}    

add_action('wp_enqueue_scripts', 'my_scripts_method'); // For use on the Front end (ie. Theme)
?> 
```

**2\. [wp_head()的放置](http://codex.wordpress.org/Function_Reference/wp_head)**

建议在您的标签`wp_head()`之前使用。`</head>`

**3.包括jQuery 1.4.4**

检查您的控制台是否有错误，并检查您的图库插件是否支持您正在使用的当前版本的 jQuery。它还与`wp_enqueue_script("jquery")`您使用的上述内容“冲突”。`wp_head()`加载您的页面并查看源代码以查看`get_theme_option("head")`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-01T10:20:03.840

我在开发项目时遇到了同样的问题。

在我的问题中，我需要从插件中添加自定义样式以添加到头部。

```
function custom_style(){
    ?>
    <style>
    .search_page_outer_wrapper{
        background:red;
    }
    </style>
    <?php
}
add_action('wp_head','custom_style'); 
```

所以在尝试了很多解决方案之后，我找到了解决方案。

**1) 在“get_header()”函数上方添加 wp_head 钩子函数。像这样 ：**

```
<?php

function custom_style(){
    ?>
    <style>
    .search_page_outer_wrapper{
        background:red;
    }
    </style>
    <?php
}
add_action('wp_head','custom_style');

get_header(); 
```

**2）第二种解决方案：检查是否在header.php中添加了wp_head（），如果没有，请添加**

# c# - 对象引用未设置为带有数组的对象的实例

> ID：13757790
> 
> 赞同：0
> 
> 时间：2012-12-07T06:05:03.567
> 
> 标签：c#

> **可能重复：**
> [在运行时向表单添加 C# 标签](https://stackoverflow.com/questions/13736884/adding-c-sharp-labels-to-a-form-at-runtime)

我不知道是什么导致了这个错误

> 你调用的对象是空的。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

代码：

```
Line[] myLine = new Line[10];
int lineCount = 0;
private void Form1_MouseClick(object sender, MouseEventArgs e)
{
    if (checkBox1.CheckState == CheckState.Checked)
    {
        myLine[lineCount].setPoint(new Point(e.X, e.Y));
        ++pointCount;
        if (pointCount == 2)
        {
            pointCount = 0;
            ++lineCount;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:07:12.060

问题就在这里

```
myLine[lineCount].setPoint(new Point(e.X, e.Y)); 
```

在使用它之前，您需要实例化一个新的`Line`类型元素。

做：

```
if (checkBox1.CheckState == CheckState.Checked)
    {
        myLine[lineCount] = new Line(); //instantiate the array element
        myLine[lineCount].setPoint(new Point(e.X, e.Y));
        ++pointCount;
        if (pointCount == 2)
        {
            pointCount = 0;
            ++lineCount;
        }
} 
```

看起来 Line 是一个类，（引用类型）如果你创建一个引用类型的数组，那么数组的所有元素都会得到默认值`null`，你不能在`null`对象上调用实例方法。

[来自 MSDN 的示例 - 单维数组](http://msdn.microsoft.com/en-us/library/0a7fscd0%28v=vs.80%29.aspx)

```
SomeType[] array4 = new SomeType[10]; 
```

> 此语句的结果取决于 SomeType 是值类型还是引用类型。如果它是值类型，则该语句将创建一个包含 10 个 SomeType 类型实例的数组。如果 SomeType 是引用类型，则该语句创建一个包含 10 个元素的数组，每个元素都初始化为一个空引用。

# iphone - 如何在 iPhone 应用程序中使用 Web 服务？

> ID：13757792
> 
> 赞同：0
> 
> 时间：2012-12-07T06:05:07.353
> 
> 标签：iphone, web-services

我刚刚开始在 iphone 应用程序中使用 webService。首先我想在我的应用程序中添加 Facebook 登录。因为我已经下载了新的副本`Facebook SDK`但我无法安装它，最后它每次都说“安装失败”。任何人都可以采取良好的步骤来使用网络服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:33:33.013

从此链接安装 Facebook SDK：  [https ://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

如果您只想通过 Twitter 或 Facebook 集成共享：请查看本教程： http: [//www.appcoda.com/ios-programming-101-integrate-twitter-and-facebook-sharing-in-ios-6 /](http://www.appcoda.com/ios-programming-101-integrate-twitter-and-facebook-sharing-in-ios-6/)

有很多方法可以连接到 Web 服务，您必须更加具体，以便我们帮助您完成您想要完成的事情。但是看看这个链接： 

[http://www.icodeblog.com/2008/11/03/iphone-programming-tutorial-intro-to-soap-web-services/](http://www.icodeblog.com/2008/11/03/iphone-programming-tutorial-intro-to-soap-web-services/)和 [http://mobile.tutsplus.com/tutorials/iphone/iphone-json -twitter-api/](http://mobile.tutsplus.com/tutorials/iphone/iphone-json-twitter-api/)

# ruby-on-rails - Rails after_find 回调用法

> ID：13757795
> 
> 赞同：2
> 
> 时间：2012-12-07T06:05:13.700
> 
> 标签：ruby-on-rails, postgresql

我试图在我的模型中使用回调`after_find`，我在试图让它实际更新它在`after_find`方法中找到的行时遇到了问题。它抛出一个无方法错误

**错误**

```
Completed 500 Internal Server Error in 299ms

ActionView::Template::Error (undefined method `+' for nil:NilClass):
    1: <div id="hashtags" class="twitter-hashtag-voting-block-v1">
    2: <% @random_hashtag_pull.each do |hashtag| %>
    3: <div class="span4 twitter-spans-v1" id="<%= hashtag.id %>">
    4:      <div id="tweet-block-v1" class="hashtag-tweet-database-container">
    5:      <div class="tweet-block-border-v1">
  app/models/hashtag.rb:46:in `update_view_count'
  app/views/shared/_vote_tweets.html.erb:2:in `_app_views_shared__vote_tweets_html_erb__2738953379660121418_70243350609340'
  app/views/hashtags/create.js.erb:2:in `_app_views_hashtags_create_js_erb___1440072038737667206_70243345272440'
  app/controllers/hashtags_controller.rb:23:in `create' 
```

**hashtag_controller**

```
class HashtagsController < ApplicationController
  def home 
  end
  def vote
    @random_hashtags = Hashtag.order("RANDOM()").limit(4)
  end
  def show
  end
  def index
  end
  def create 
    Hashtag.pull_hashtag(params[:hashtag])
    @random_hashtag_pull = Hashtag.random_hashtags_pull
    respond_to do |format|
      format.html { redirect_to vote_path }
      format.js
    end
  end
end 
```

**标签.rb**

```
class Hashtag < ActiveRecord::Base

attr_accessible :text, :profile_image_url, :from_user, :created_at, :tweet_id, :hashtag, :from_user_name, :view_count

after_find :update_view_count

def self.pull_hashtag(hashtag)
  dash = "#"
  @hashtag_scrubbed = [dash, hashtag].join
  Twitter.search("%#{@hashtag_scrubbed}", :lang => "en", :count => 100, :result_type => "mixed").results.map do |tweet|
    unless exists?(tweet_id: tweet.id)
      create!(
        tweet_id: tweet.id,
        text: tweet.text,
        profile_image_url: tweet.user.profile_image_url,
        from_user: tweet.from_user,
        from_user_name: tweet.user.name, 
        created_at: tweet.created_at,
        hashtag: @hashtag_scrubbed
      ) 
      end       
    end
  end

  def self.random_hashtags_pull
    Hashtag.where{ |hashtag| hashtag.hashtag =~ @hashtag_scrubbed}.order{"RANDOM()"}.limit(4)
  end

  def update_view_count
    count = (view_count + 1)
    view_count = count
    save!
  end

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T06:27:38.557

这里有两个问题，一个是你知道的，一个是你可能不知道的。

第一个问题是它`view_count`没有默认值，所以它以`nil`. 因此，当您第一次尝试更新 时`view_count`，您最终会这样做：

```
count = nil + 1 
```

而且`nil`不知道是什么`+`意思。调用`nil.to_i`给你零，所以你可以这样做：

```
count = view_count.to_i + 1 
```

另一个问题是你有一个竞争条件。如果两个进程最终同时查看同一事物，那么您可能会遇到以下事件序列：

1.  进程一 ( **P1** )`view_count`从数据库中拉出。
2.  进程二 ( **P2** )`view_count`从数据库中拉出。
3.  **P1**发送`view_count+1`回数据库。
4.  **P2**发送`view_count+1`回数据库，但它不包括来自**3**的增量。

解决此问题的最简单方法是使用[`increment_counter`](http://api.rubyonrails.org/classes/ActiveRecord/CounterCache.html#method-i-increment_counter)：

```
def update_view_count
  Hashtag.increment_counter(:view_count, self.id)
end 
```

这将做一个直接

```
update hashtags set view_count = coalesce(view_count, 0) + 1 
```

在数据库中，因此竞争条件和问题一样消失`nil`。[`reload`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-reload)如果您想要一个最新的`view_count`或者只是添加一个并且不保存修改后的 Hashtag，您还可以包括：

```
def update_view_count
  Hashtag.increment_counter(:view_count, self.id)
  self.reload
end
# or
def update_view_count
  Hashtag.increment_counter(:view_count, self.id)
  self.view_count += 1 # And don't save it or you'll overwrite the "safe" value!
end 
```

第一个（带`self.reload`）在绑定到`after_find`回调时会导致问题：`self.reload`可能会触发`after_find`回调，这将触发另一个`self.reload`将触发回调的回调......直到 Ruby 开始对无限递归感到不安。但是，如果您手动调用`update_view_count`而不是将其绑定到回调，它应该可以正常工作（见下文）。

该`self.view_count += 1`版本可以省略一些增量，但这可能不是什么大问题，因为您总是有空间丢失增量（当然，除非您对视图计数进行实时更新）。

我不认为使用回调对于这类事情是一个好主意。有时您会`Hashtag`从数据库中加载 a 但您不希望`view_count`增加 a。你最好要求一个显式的方法调用来增加计数器，这样你就不会意外地增加东西。要求显式调用将允许您使用上面的第一个版本（带有`self.reload`），`update_view_count`因为您不会让回调触发无限递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:22:10.387

尝试这个：

```
def update_view_count
  count = ( view_count || 0 ) + 1
  view_count = count
  save!
end 
```

甚至可能是这样：

```
def update_view_count
  update_attribute :view_count , ( view_count || 0 ) + 1
end 
```

错误的原因是没有值（nil），因此尝试添加错误。运算符所做的`||`是首先尝试左边的表达式，然后返回它，除非它是`nil`or `false`。如果是`nil`or `false`，它会返回右边的值，即使是`nil`or `false`。您也可以对分配执行相同的操作，如下所示：

```
false || true # returns true
nil || 'asdf' # returns asdf
false || nil # returns nil
aaa ||= 1 # assigns 1 to aaa, unless aaa has a value 
```

正如您所发现的，可以通过设置默认值来实现类似的效果，以防止`nil`.

# spring - Spring Data Neo4j 存储库缺少 PagingAndSortingRepository

> ID：13757797
> 
> 赞同：1
> 
> 时间：2012-12-07T06:05:19.773
> 
> 标签：spring, neo4j, spring-data-neo4j

我已经实现了一个小用例来评估 Spring Data Neo4j。我有一个`PublicRepository`扩展的接口`GraphRepository`。

界面如下所示：

```
public interface PublicRepository extends GraphRepository<Tweet> {} 
```

这给了我 Error `"The hierarchy of the type PublicRepository is inconsistent"`。

> 出现这种类型的错误是因为当前类扩展/实现的类/接口之一不存在，而当前类又扩展/实现了另一个类/接口。

查看核心库的包后`org.springframework.data.repository`，我发现库中没有`PagingAndSortingRepository`扩展接口`CRUDRepository`。[我在Neo4j 数据](https://github.com/SpringSource/spring-data-neo4j/tree/GA)的 Github 存储库中搜索了相同的内容。但是那里也没有这个接口。

我在谷歌上搜索了相同但没有找到解决这个问题的方法，甚至没有进入 Neo4j Data 的问题队列。因此提交了一份，请参阅[此](https://github.com/SpringSource/spring-data-neo4j/issues/92)。

*   有没有人遇到过这个问题？
*   有没有其他方法可以将 Neo4j 数据库与 spring 应用程序集成？
*   哪里可以找到这个接口的spring-data-neo4j jar文件？
*   如果没有，我在哪里可以找到可以与当前编译的 jar 集成的接口定义文件？相同的环境设置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:32:40.577

这个问题在[github问题中得到了解决](https://github.com/SpringSource/spring-data-neo4j/issues/92#issuecomment-11123411)

# java - 在 JSP 中显示具有许多子列表的父级

> ID：13757799
> 
> 赞同：1
> 
> 时间：2012-12-07T06:05:34.247
> 
> 标签：java, json, web-services, jsp, spring-mvc

我必须从 Spring MVC/Spring Maven 项目中调用 Rest API，该项目的响应 JSON 如下：

```
Content-Type: application/wrml
{
    parent-repository: {parent-repositoryId}
    type: {repository-type}
    object-types: {object-typeId-list}
    children
    {
         {repositoryId1} 
         {
             type: {repository-type1}
             object-types: {object-typeId-list}
             children
             {
              …
             }
         }
…
         {repositoryIdN} 
         {
             type: {repository-typeN}
             object-types: {object-typeId-list}
             children
             {
              …
             }
         }

    }  
} 
```

响应是搜索存储库。如何在 JSP 中显示 Parent 和它的 Children 响应？我需要列出它们以供显示吗？

# css - css 中的不透明度仅对 li 而不是里面的文本

> ID：13757803
> 
> 赞同：1
> 
> 时间：2012-12-07T06:05:40.663
> 
> 标签：css, html-lists, opacity

我希望将不透明度应用于 li 标签。我这样做了，但随后不透明度也被应用于该 li 内的文本和图像。以下是我的 CSS 代码：

```
.ui-btn-up-d {
border: 1px solid #2E1C1C /*{d-bup-border}*/;
background: #F8EAEA /*{d-bup-background-color}*/;
font-weight: bold;
color: #BDACAC /*{d-bup-color}*/;
text-shadow: 0 /*{d-bup-shadow-x}*/ 0 /*{d-bup-shadow-y}*/ 0 /*{d-bup-shadow-radius}*/ white /*{d-bup-shadow-color}*/ !important;
background-image: -webkit-gradient(linear, left top, left bottom, from( #FAFAFA), to( #F6F6F6 /*{d-bup-background-end}*/));
opacity: 0.7;
background-image: -webkit-linear-gradient( #1D1616 /*{d-bup-background-start}*/, #292525 /*{d-bup-background-end}*/) !important;
background-image: -moz-linear-gradient( #FAFAFA /*{d-bup-background-start}*/, #F6F6F6 /*{d-bup-background-end}*/);
background-image: -ms-linear-gradient( #FAFAFA /*{d-bup-background-start}*/, #F6F6F6 /*{d-bup-background-end}*/);
background-image: -o-linear-gradient( #FAFAFA /*{d-bup-background-start}*/, #F6F6F6 /*{d-bup-background-end}*/);
background-image: linear-gradient( #FAFAFA /*{d-bup-background-start}*/, #F6F6F6 /*{d-bup-background-end}*/); 
```

}

html:

```
 <li class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-d">
    <div class="ui-btn-inner ui-li">
    <div class="ui-btn-text"> <a href="#event/event_id:131" id="event_131" class="ui-link-inherit"> <img class="load_image ui-li-thumb" height="80" width="80" src="img.jpg"> 
<h3 class="ui-li-heading">fghf</h3>
<p class="event_date ui-li-desc">05-12-2018 at 07:54 AM</p>
</a> </div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:29:23.530

我注意到您正在使用 css 渐变。您将需要使用 RGBA 颜色并为此使用不透明度。这是另一个可以帮助您执行此操作的答案：

[CSS3 透明度 + 渐变](https://stackoverflow.com/questions/2293910/css3-transparency-gradient)

所以你可以得到你正在使用的颜色的RGBA，这是一个颜色计算器。

[http://hex2rgba.devoth.com/](http://hex2rgba.devoth.com/)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:18:51.337

看看这个[问题](https://stackoverflow.com/questions/2373410/override-opaque-text-in-a-transparent-div-with-css)，看看大卫托马斯的回答。诀窍是将透明度应用于`background-color`.

```
background: #F8EAEA; /* for browsers that don't understand the following rgba rule */
background-color: rgba(248,234,234,0.7); 
```

使用您要使用的特定 css。

```
border: 1px solid #2E1C1C /*{d-bup-border}*/;
background: #F8EAEA; /* for browsers that don't understand the following rgba rule */
background-color: rgba(248,234,234,0.7);
font-weight: bold;
color: #BDACAC /*{d-bup-color}*/;
text-shadow: 0 /*{d-bup-shadow-x}*/ 0 /*{d-bup-shadow-y}*/ 0 /*{d-bup-shadow-radius}*/ white /*{d-bup-shadow-color}*/ !important;
background-image: -webkit-gradient(linear, left top, left bottom, from( rgba(248,234,234,0.7)), to(rgba(246,246,246,0.7) /*{d-bup-background-end}*/));
background-image: -webkit-linear-gradient(rgba(29,22,22,0.7) /*{d-bup-background-start}*/, rgba(41,37,37,0.7)/*{d-bup-background-end}*/) !important;
background-image: -moz-linear-gradient(rgba(250,250,250,0.7) /*{d-bup-background-start}*/, rgba(246,246,246,0.7) /*{d-bup-background-end}*/);
background-image: -ms-linear-gradient( rgba(250,250,250,0.7) /*{d-bup-background-start}*/, rgba(246,246,246,0.7) /*{d-bup-background-end}*/);
background-image: -o-linear-gradient( rgba(250,250,250,0.7) /*{d-bup-background-start}*/, rgba(246,246,246,0.7) /*{d-bup-background-end}*/);
background-image: linear-gradient( rgba(250,250,250,0.7) /*{d-bup-background-start}*/, rgba(246,246,246,0.7) /*{d-bup-background-end}*/); 
```

这是[小提琴的链接](http://jsfiddle.net/vKcJv/1/)

# javascript - 如何获取 javascript 对象的主要属性？

> ID：13757811
> 
> 赞同：1
> 
> 时间：2012-12-07T06:06:42.220
> 
> 标签：javascript, jquery, arrays, json, object

我正在从第三方站点提取数据的站点上工作。我的 PHP 提取数据并用一个非常好的 JSON 对象进行响应。然后，我使用 $.each 来遍历对象并对效果很好的数据进行排序。问题是我不知道如何提取主要属性。

示例 JSON 响应：

```
{
    "1234": {
        "all_sales": {"11/12/2012":"1211.33","11/13/2012":"2012.45"},
        "sales_total":"323.78",
        "store_number":"1234",
    },
     "5678": {
        "all_sales": {"11/12/2012":"1211.33","11/13/2012":"2012.45"},
        "sales_total":"323.78",
        "store_number":"5678",
    },

} 
```

1234 和 5678 是商店编号。我想要的是不需要 store_number 属性，只知道它是什么。在 PHP 中会是这样的：

```
for ($data as $store_number => $store_data){
    //do whatever
} 
```

我这样做是出于各种原因，但主要是因为我可以简单地调用 data.1234 或为前 10 名建立一个销售数组。现在 store_number 属性允许我这样做，但不需要它的额外数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:09:55.577

我想你想使用`$.each`回调函数的第一个参数：

```
var a = { "1234": { ... }, "5678": { ... } };

$.each(a, function(main, val) {
    console.log(main); // prints "1234" and "5678"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:14:17.200

for x in 循环是这里工作的正确工具。我喜欢 jQuery，但当 JavaScript 覆盖它时，不要甩掉 JQ-hammer。

```
var myObj = {
    "1234": {
        "all_sales": {"11/12/2012":"1211.33","11/13/2012":"2012.45"},
        "sales_total":"323.78",
        "store_number":"1234",
    },
     "5678": {
        "all_sales": {"11/12/2012":"1211.33","11/13/2012":"2012.45"},
        "sales_total":"323.78",
        "store_number":"5678",
    },

}

for (var x in myObj) {
    alert('property:' + x);
    alert('property.sales_total:' + myObj[x].sales_total); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T06:20:09.733

如果我理解正确，您需要一个值为“1234”、“5678”等的数组：

```
myArray=$.map(myJSON,function(value,key){return key;}); 
```

[编辑]再想一想，这可能更接近你所追求的：

```
myArray=$.map(myJSON,function(value,key){
// do whatever
}); 
```

正如@Ian 在评论中所说，您可能希望将所有处理分组在一个循环中（如我的示例中的 $.each 或 $.map ）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T06:14:15.280

```
for (var key in object) {
    console.log(key);
} 
```

# php - CRE 加载的 6.2 安装上不存在表

> ID：13757815
> 
> 赞同：-1
> 
> 时间：2012-12-07T06:06:57.320
> 
> 标签：php, xampp, oscommerce

我想在运行 XAMPP 服务器的本地计算机上安装 CRE Loaded 6.2，但它显示以下错误：

> 1146 - 表 'creloader.configuration' 不存在
> 从配置 TEP_DB_ERROR 中选择 configuration_key 作为 cfgKey，configuration_value 作为
> cfgValue

这是什么意思？我还创建了名为`creloader`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:07:06.577

我不知道creloded6.2是什么，但是在所有的安装包中都有一个你必须在你的数据库中运行的sql文件，看来你还没有这样做。

# sql - 使用 JSTL 访问数据库

> ID：13757823
> 
> 赞同：2
> 
> 时间：2012-12-07T06:07:31.430
> 
> 标签：sql, ms-access, jstl

您好我正在尝试使用 JSTL 连接到一个简单的 Access 数据库我有一个系统 DSN 设置指向名为“book dB”的数据库

每次尝试打开站点时，我都会收到错误 Unable to get connection, DataSource invalid: "java.lang.NullPointerException"

这是我的代码

```
<sql :setDataSource var="dataSource" 
  driver="sun.jdbc.odbc.JdbcOdbcDriver"
  url="jdbc:odbc:book dB"   
/>

<sql:query var ="RS" >
  dataSource ="${dataSource}"
  SELECT * FROM Books
  WHERE BookTitle = 'Cooking for children'
</sql:query> 
```

我宁愿不使用 Access 或 JSTL，但它们是大学作业所必需的，但我只是看不出我的代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:37:58.457

正如 HansUp 所说，我通过在 32 位中运行 tomcat 解决了这个问题，为此我必须更改 JAVA_HOME 和 JRE_HOME 环境变量以指向 Java 的 32 位安装而不是 64 位版本。

由于问题也是由于 Access 驱动程序是 32 位的，我相信所引用的 ACE Access 驱动程序也将解决问题并允许我继续以 64 位运行 Java。

# c++ - 我的代码中实际上是否存在无效的内存访问？

> ID：13757824
> 
> 赞同：2
> 
> 时间：2012-12-07T06:07:49.050
> 
> 标签：c++, memory, destructor, inspector

我最近在我的代码中遇到了崩溃，我不确定它是如何以及为什么崩溃并开始使用静态分析器，然后我开始使用 Intel Inspector XE 2013。我一直在我的代码中遇到相同的“无效内存访问”所以我开始将我的代码减少到尽可能小的形式以使其重现，在那里我终于达到了我的代码中似乎存在“无效内存访问”的地步，但前提是我的类有析构函数。有趣的是，我的“无效内存访问”发生在它试图删除的地址之前的地址上。最终出现“无效内存访问”的代码实际上并没有使我的代码崩溃，但我想我会解决这个潜在的问题，以防它产生滚雪球影响。我有问题的代码是

```
class Group {
public:
    Group() {}
    ~Group() {} // When this line is not here, there will not be an "Invalid memory access"
};

int main() {
    Group** groups = new Group*[3];

    groups[0] = new Group();
    groups[1] = new Group();
    groups[2] = new Group();

    for(unsigned int i = 0; i < 3; ++i)
        delete [] groups[i];

    delete [] groups;

    return 0;
} 
```

“无效内存访问”问题将在第一次尝试“删除 [] 组 [i]”时被标记（因此 i 将等于 0）。它被标记的内存地址是“0x003e30ec”，其中 group[0] 实际上是“0x003e30f0”，即提前 0x4。每当我运行此测试时，它始终保持 0x4 的差异。

我的问题是，在我不正确地读取或写入内存的情况下，我的代码实际上是否有任何问题，或者这个人只是 Intel Inspector XE 2013 的不良结果（我在 Visual Studio 2012 Update 1 上）？

对于那些对我上面的例子的内存表感到好奇的人，它如下

```
groups == 0x003e30b8
groups[0] == 0x003e30f0
groups[1] == 0x003e3120
groups[2] == 0x003e3150 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T06:10:27.957

```
for(unsigned int i = 0; i < 3; ++i)
        delete [] groups[i]; 
```

应该

```
for(unsigned int i = 0; i < 3; ++i)
        delete  groups[i]; 
```

`new/delete`,`new [] /delete []`应始终匹配。在您的情况下，使用`std::vector<std::shared_ptr<Group> > groups;`将是一种更好的方法。

> 我终于到了一个地步，我的代码中似乎存在“无效的内存访问”，但前提是我的类有析构函数。

using`wrong delete[]`是您的应用程序崩溃的原因，在这种情况下，它与您的析构函数无关，除非您的析构函数中隐藏了一些东西，但这将是另一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:11:53.120

我相信你的问题是你使用的是 array-style `delete []`，你应该只使用常规的`delete`. 这是因为其中的每个元素`groups`都是一个`Group`对象，而不是它们的数组。

但是，您确实需要使用`delete []`内存`groups`。

# wordpress - 在 WordPress 中自定义 Mflat 主题

> ID：13757825
> 
> 赞同：0
> 
> 时间：2012-12-07T06:07:57.430
> 
> 标签：wordpress, wordpress-theming

我在这个 URL [www.richintellects.com](http://www.richintellects.com)上托管了一个 WordPress 博客我的网站有三个选项卡，[主页](http://www.richintellects.com/)、[广告](http://www.richintellects.com/advertise/)和[关于 RICHINTELLECTS](http://www.richintellects.com/about/)。主页显示所有博客文章，从那里，可以单击文章标题以查看该页面的单个文章。

我想做的事。我想将帖子发布到[广告](http://www.richintellects.com/advertise/)选项卡（不一定是广告，只是帖子）。我不希望发布到[广告](http://www.richintellects.com/advertise/)选项卡的帖子出现在[主页](http://www.richintellects.com/)选项卡下。所以我希望有一个插件可以让你指定你希望你的帖子出现在哪个页面上。其次，我希望[广告](http://www.richintellects.com/advertise/)页面的行为方式与主页完全相同，因为单击“[广告](http://www.richintellects.com/advertise/)”选项卡后，计划出现在该页面上的所有帖子都会按照主页显示并单击每个标题到帖子打开该帖子的单个帖子页面。

我知道我必须做一些硬核来解决这个问题，我只需要了解主题的框架就可以发挥魔力，但我再次认为如果有一个插件可以帮我省去麻烦，那就太好了。我想干净利落地完成这项工作，因为我不想弄乱将我的网站与谷歌分析和其他分析工具联系起来的配置。

非常感谢所有建议和帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:13:06.293

**你有两个选择：**

**[选项 1]** 创建自定义模板并将其分配给*广告*页面。进一步复制自定义模板中的 index.php 代码。请参阅 WordPress Codex：[创建自定义页面模板](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)

**[选项 2]**聘请开发人员。;)

# numpy - NumPy 与 Theano？

> ID：13757826
> 
> 赞同：3
> 
> 时间：2012-12-07T06:07:58.497
> 
> 标签：numpy, pypy, theano

我想知道：这两个项目是否基本上具有相同的目标——加快 Python 中的数值工作？

有哪些相同点和不同点？

我知道 Theano 并不打算像 NumPyPy 那样重新实现所有 NumPy，但从我所读到的，Theano 已经可以带来一些非常令人印象深刻的加速结果。那么，如果我们可以为 Theano 编写运行速度很快的代码，为什么还需要 NumPyPy？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:01:37.330

一方面是好的：数百万行代码使用 numpy，因此将 Numpy 移植到 pypy 将是许多其他（科学和其他）库移植到 Pypy 的一大进步。

在 pypy 中重新实现所有 Numpy 可能听起来像是一件苦差事，但确实如此，但另一种选择是疯狂的：重新实现数百个或库以改用 XXX。

顺便说一句，我不太了解 theano，但我知道它不能替代 Numpy。它们是不同的项目，具有不同的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-17T02:34:11.297

Theano，旨在改进 NumPy，NumPy 是 Theano 的先决条件。

Theano 的一大特点是在可能的情况下透明地使用 CUDA GPU。

# tsql - 将 UDDT 定义从 SQL Server 6.5 导出到 XML

> ID：13757827
> 
> 赞同：1
> 
> 时间：2012-12-07T06:07:58.133
> 
> 标签：tsql

我正在尝试编写一个脚本来从旧的 MS SQL 6.5 中提取数据库，我偶然发现了检索用户类型

我有以下自定义类型：

![在此处输入图像描述](../Images/47568f4c5426bf9d87b3ce7656b81e36.png)

我写了一个简单的脚本，其中一个基本名称从同一张表中查找：

```
select t1.name as name, t2.name as base_name, t1.length as length 
from systypes t1, systypes t2 
where t1.usertype > 100 and t2.usertype <= 100 and t1.type = t2.type 
```

它返回我以下结果：

```
name                           base_name                      length 
------------------------------ ------------------------------ ------ 
bitZ                           bit                            1      
tinyintZ                       tinyint                        1      
smallintZ                      smallint                       2      
intZ                           int                            4      
smalldatetimeZ                 smalldatetime                  4      
charZ_254                      sysname                        254    
charZ_254                      varchar                        254    
charZ_80                       sysname                        80     
charZ_80                       varchar                        80     
charZ_50                       sysname                        50     
charZ_50                       varchar                        50     
charZ_40                       sysname                        40     
charZ_40                       varchar                        40     
charZ_35                       sysname                        35     
charZ_35                       varchar                        35     
charZ_30                       sysname                        30     
charZ_30                       varchar                        30     
charZ_20                       sysname                        20     
charZ_20                       varchar                        20     
charZ_16                       sysname                        16     
charZ_16                       varchar                        16     
charZ_14                       sysname                        14     
charZ_14                       varchar                        14     
charZ_12                       sysname                        12     
charZ_12                       varchar                        12     
charZ_10                       sysname                        10     
charZ_10                       varchar                        10     
charZ_8                        sysname                        8      
charZ_8                        varchar                        8      
charZ_5                        sysname                        5      
charZ_5                        varchar                        5      
charZ_4                        sysname                        4      
charZ_4                        varchar                        4      
charZ_1                        sysname                        1      
charZ_1                        varchar                        1      
charZ_120                      sysname                        120    
charZ_120                      varchar                        120    
binZ_10                        binary                         10     
binZ_10                        timestamp                      10 
```

这里有2个问题：

1.  varchar 解析为两种类型，sysname 和 varchar，因为它们具有相同的基本类型。binZ_10 同样的问题
2.  非 var char 作为非零长度返回

我可以使用哪个脚本来获得正确的 MS 输出？

这是原始表的片段：

select type, name from systypes order by type

```
type name                           
---- ------------------------------ 
. . .                  
39   charZ_80                       
39   sysname                        
39   varchar                        
45   binary                         
45   binZ_10                        
45   timestamp                      
47   char     
. . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:29:07.093

我使用了跟踪，结果由 sp_MShelptype 返回。

我需要一个字段子集，所以我将结果推送到临时表中：

```
create table #Result
(
    UserDatatypeName varchar(92), owner varchar(20), basetypename varchar(92), defaultname varchar(61), rulename varchar(61) null, tid int, length int, nullable int, dt_prec int null, dt_scale int null, dt_flags int, allowidentity int
)

insert #Result exec sp_MShelptype null, 'uddt'

select UserDatatypeName name, basetypename base_type, length, defaultname default from #Result

drop table #Result 
```

# jquery - 在 Jquery AutoComplete Ui 中搜索文本

> ID：13757832
> 
> 赞同：0
> 
> 时间：2012-12-07T06:08:20.220
> 
> 标签：jquery, jquery-autocomplete

我有一个自动完成用户界面，其中有一个预定义的用户列表作为源。当用户从列表中选择一个用户时，它的 id 被保存在一个隐藏字段中。到这里为止还好。现在，如果用户写的用户名不在自动完成列表中，那么我需要将隐藏字段的值更改为 0 并执行其他任务。但我无法做到这一点......

我尝试使用 .change 事件，但它不起作用。这是代码。

```
$.ajax({
                type: "POST",
                url: "CHService.asmx/GetClient",
                dataType: "json",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $('#txtName').autocomplete({
                        minLength: 0,
                        source: function (req, responseFn) {
                            var re = $.ui.autocomplete.escapeRegex(req.term);
                            var matcher = new RegExp("^" + re, "i");
                            var a = $.grep(data.d, function (item, index) {
                                return matcher.test(item.value);
                            });
                            responseFn(a);
                        }, //Searches user input with first letter of ...//data.d
                        select: function (event, ui) {
                            $('#txtName').val(ui.item.value);
                            $('#HFuser').val(ui.item.Name);

                            alert('Select' + ui.item.Name);
                            //return false;
                        },
                        change: function (event, ui) {
                            alert('Change' + ui.item.Name);
                            if (ui.item == null) {
                                $('#HFuser').val(0);

                                //return false;
                            }
                        }
                    }); 
```

所以，基本上我需要的是，`UserId`在用户从自动完成中选择值时设置，或者`userid=0`在用户输入新值时设置。

```
UPDATE 
```

忘记添加，.change 事件不起作用，因为每次值`ui.item==null is true`和警报都会因此而出现异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:37:05.200

如果您想在 autosuggest 在您定义的用户列表中找不到当前输入字符串的情况下操作隐藏的输入，您可能需要使用 autosuggest.close 方法。如果输入字符串没有匹配项，建议菜单将关闭。以下是有关“关闭”方法的更多信息：

> **关闭（事件，用户界面）类型：自动完成关闭**

隐藏菜单时触发。并非每个关闭事件都会伴随着更改事件。事件类型：事件 ui 类型：对象

**代码示例：**

*使用指定的关闭回调初始化自动完成：* $( ".selector" ).autocomplete({ close: function( event, ui ) {} });

*将事件侦听器绑定到 autocompleteclose 事件*：

$( ".selector" ).on( "autocompleteclose", function( event, ui ) {} );

来源：[在此处输入链接描述](http://api.jqueryui.com/autocomplete/#event-search)

所以改变这个：

```
 change: function (event, ui) {
                        alert('Change' + ui.item.Name);
                        if (ui.item == null) {
                            $('#HFuser').val(0);

                            //return false;
                        }
                    } 
```

到：

```
 close: function (event, ui) {
       $('#HFuser').val(0)
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:00:00.803

你猜怎么着，一点点调整，我在朋友的帮助下自己做了。

这是代码。它在`.change`活动中。

```
 var found = false;
                        for (var i = 0; i < data.d.length; i++) {
                            if ($("#txtName").val() == data.d[i].value) {
                                found = true;
                                break;
                            }
                        }
                        if (found == false) {
                            $('#HFUserID').val(0);

                        } 
```

我做了`data`一个一个的搜索，当没有找到时清除用户ID。

# android - 路标回调适用于具有 API 10 但不适用于 API 15 或 16 的 Android 模拟器

> ID：13757833
> 
> 赞同：3
> 
> 时间：2012-12-07T06:08:22.157
> 
> 标签：android, callback, signpost

我相信我已经正确编码并设置了对 Twitter 的 Signpost 调用。在 API 10 上运行时（通过模拟器和实际手机），一切都运行良好。但是当我在 API 15 或 16 上尝试完全相同的 apk 时，回调根本不起作用。它没有将我返回到我的应用程序，而是将我发送到另一个网页，该网页显示该页面不可用并标识了我的回调 URL + oauth 令牌。我有

*   为活动设置 android:launchMode="singleInstance"
*   设置 android:scheme 和 android:host 以匹配传递给 retrieveRequestToken 的回调 URL
*   覆盖 onNewIntent

    ```
    <activity
        android:name=".TimelineActivity"
        android:label="@string/app_name"
        android:launchMode="singleInstance">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <!-- Used for OAuth callback -->
        <intent-filter >
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE"/>
            <data
                android:scheme="x-AbcdEfg41-oauth-twitter"
                android:host="callback" />
        </intent-filter>
    </activity> 
    ```

onNewIntent 看起来像这样：

```
 super.onNewIntent(intent);
    Log.d(TAG, "intent:  " + intent);

    //check if this is a callback from OAuth
    Uri uri = intent.getData();
    if (uri != null && uri.getScheme().equals(OAUTH_CALLBACK_SCHEME)) {
        Log.d(TAG, "callback:  " + uri.getPath());
        String verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);
        Log.d(TAG, "verifier:  " + verifier);

        new RetrieveAccessTokenTask().execute(verifier);
    } 
```

我的身份验证调用如下所示：

```
try {
      authUrl = this.mProvider.retrieveRequestToken(this.mConsumer, OAUTH_CALLBACK_URL);
      Log.d(TAG, authUrl);
      Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl));
      intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      startActivity(intent);
    } 
```

虽然我对“没有检测到 GPU 仿真的模拟器”有点怀疑，但我的 logcat 看起来还不错，只是因为我在 API 10 上运行时没有看到：

```
12-07 04:48:31.428: I/TimelineApplication(754): onCreate
12-07 04:48:31.598: I/TimelineActivity(754): onCreate(). Starting authorizaion.
12-07 04:48:31.658: I/dalvikvm(754): threadid=3: reacting to signal 3
12-07 04:48:31.678: I/dalvikvm(754): Wrote stack traces to '/data/anr/traces.txt'
12-07 04:48:31.758: D/TimelineActivity(754): OAuthAuthorizeTask.doInBackground()
12-07 04:48:31.857: D/gralloc_goldfish(754): Emulator without GPU emulation detected.
12-07 04:48:32.968: D/dalvikvm(754): GC_CONCURRENT freed 206K, 3% free 12797K/13063K, paused 7ms+6ms
12-07 04:48:33.907: D/TimelineApplication(754): https://api.twitter.com/oauth/authorize?oauth_token=QepbZdXy2uiDFt7vrwvwq72Wl1S2IzsZywCPHwx8jTk
12-07 04:48:33.968: D/TimelineApplication(754): oAuthAuthorize() has finished
12-07 04:48:34.139: D/TimelineActivity(754): OAuthAuthorizeTask.onPostExecute()
12-07 04:48:34.368: D/TimelineActivity(754): the result is NULL 
```

# c# - 从 (n)varchar 列中搜索数值

> ID：13757834
> 
> 赞同：0
> 
> 时间：2012-12-07T06:08:22.697
> 
> 标签：c#, sql-server, solr

我正在使用 solr 实现全文搜索，如果有人能为我提供一些帮助解决我面临的一些问题，我将不胜感激。

我的 schema.xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<schema name="products" version="1.2">
    <types>
        <fieldType name="long" class="solr.TrieLongField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
            <fieldType name="concatenated" class="solr.TextField" positionIncrementGap="100" >
                <analyzer>
                <tokenizer class="solr.LowerCaseTokenizerFactory"/>
                <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="15" side="front"/>
                <filter class="solr.WordDelimiterFilterFactory"
                    splitOnCaseChange="0"
                    splitOnNumerics="1"
                            catenateWords="1"
                            catenateNumbers="1"
                            catenateAll="1"
                            preserveOriginal="1"
                    />
                </analyzer>
            </fieldType>
    </types>
    <fields>
        <field name="keyid" type="long" indexed="true" stored="false" required="true"/>
        <field name="combined" type="concatenated" indexed="true" stored="false"/>
    </fields>
    <uniqueKey>keyid</uniqueKey>
    <defaultSearchField>combined</defaultSearchField> 
    <copyField source="keyid" dest="keyid"/>  
    <solrQueryParser defaultOperator="OR"/>
</schema> 
```

我的 data-config.xml 文件如下所示：

```
<dataConfig>
    <document name="products">
        <entity name="product" query="SELECT ProductId AS keyid, CONVERT(VARCHAR(18), ProductId) + ' ' + ProductName AS combined FROM Products"
            <field column="keyid" name="keyid"/>
            <field column="combined" name="combined"/>
        </entity>
    </document>
</dataConfig> 
```

我的 Products 表中有如下记录

**产品 ID|产品名称**

**239289231|Windows 7**

假设设置和索引成功（使用`localhost:8089/sorl/dataimport?command=full-import`），为什么我在运行此查询时不会得到结果：

**场景一：**`localhost:8089/solr/select?q=combined:239289233`

然而，下面的查询确实给了我结果（一个从**keyid**字段搜索，另一个从**组合**字段搜索）：

**场景二：**`localhost:8089/solr/select?q=combined:Windows`

**场景 3：**`localhost:8089/solr/select?q=keyid:239289233`

问题是这里使用的 TokenizerFactory 或 FilterFactory 吗？Solr 不应该`ProductId`在将其转换为并连接之后将其视为字符串`VARCHAR`- 因此可以按照我正在做的方式调用它`Scenario 1`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:28:04.060

是的，这里的问题是标记器。您的第一个标记器，`LowerCaseTokenizerFactory`完全去掉了数字，这就是为什么您找不到搜索并找到任何具有您的 ProductId 值的值的原因。在您的示例中，它仅索引单词 Windows。

我假设您可能希望将值小写，因此您希望将`StandardTokenizerFactory`用作标记器，并`LowerCaseFilterFactory`用作过滤器以小写值。`239289231`这将包括 ProductId 值作为要索引的标记，并根据以下标记构建 NGrams -`Windows`和`7`.

这是建议修改的 fieldType

```
 <fieldType name="concatenated" class="solr.TextField" positionIncrementGap="100" >
     <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" 
            maxGramSize="15" side="front"/>
        <filter class="solr.WordDelimiterFilterFactory"
             splitOnCaseChange="0"
             splitOnNumerics="1"
             catenateWords="1"
             catenateNumbers="1"
             catenateAll="1"
             preserveOriginal="1"
             />
      </analyzer>
   </fieldType> 
```

此外，我建议您查看 Solr Wiki 上的[Analyzers、Tokenizers 和 Token Filters](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)页面，了解各种工作方式的示例（如果您还没有的话）。在这种情况下，我相信它只是标记器和过滤器之间的混合。

# python - 使 Python 列表在功能上独一无二（map/reduce/filter）

> ID：13757835
> 
> 赞同：4
> 
> 时间：2012-12-07T06:08:29.190
> 
> 标签：python, map, filter, functional-programming

Python 中有没有办法通过功能范式使 List 独一无二？

输入 ：`[1,2,2,3,3,3,4]`

输出：（`[1,2,3,4]`以保持顺序的方式）

我知道还有[其他方法](http://www.peterbe.com/plog/uniqifiers-benchmark)，但没有一种方法是功能性的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T06:21:24.037

如果您只需要删除相邻的匹配项，请尝试以下操作：

```
reduce(lambda x,y: x+[y] if x==[] or x[-1] != y else x, your_list,[]) 
```

如果您需要删除除一次之外的所有内容，请尝试以下操作：

```
reduce(lambda x,y: x+[y] if not y in x else x, your_list,[]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T06:31:05.350

你可以试试：

```
In [29]: a = [1,2,2,3,3,3,4]

In [30]: reduce(lambda ac, v: ac + [v] if v not in ac else ac, a, [])
Out[30]: [1, 2, 3, 4] 
```

这使用列表累加器 ( `ac`) 并检查当前值 ( `v`) 是否已经在列表中；如果没有，添加新元素；如果是这样，只需返回列表。

此外，这个完全没有价值/丑陋/被误导，更多的是出于好奇（当然可以做得更好）：

```
In [11]: a = [1,2,2,3,3,3,4]

In [12]: n = [None] * len(a)

In [13]: map(lambda b, c:(lambda i=n.__setitem__:(i(c,b)))() if b not in n else None, a, range(len(a)))
Out[13]: [None, None, None, None, None, None, None]

In [14]: filter(lambda x: x, n)
Out[14]: [1, 2, 3, 4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T06:34:23.363

Python 没有有序集，但您可以使用`OrderedDict`. 好吧，它不是纯粹的功能，但确实在紧要关头。

```
>>> from collections import OrderedDict
>>> from itertools import repeat
>>> x = [1,2,2,3,3,3,4]
>>> OrderedDict(zip(x, repeat(None))).keys()
[1, 2, 3, 4] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-21T14:21:29.053

> 通过功能范式使列表独一无二

非常简单：您需要一个实体，它是一个集合，但也按照与初始列表中相同的顺序进行排序。

```
sorted(set(input), key=lambda element: input.index(element)) 
```

额外功能：当初始数组具有重复元素时，不保证存在排序（`[1,2,2,1]`以防万一）。提供的代码的行为与此相同`.index()`。此外，1 次排序可能比 n 次查找更快（尽管需要对实际数据进行计时）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-07T06:20:53.490

```
try this one
list(set([1,2,2,3,3,3,4])) will definitely return [1,2,3,4]

as set contains unique elements

Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> list(set([1,2,2,3,3,3,4]))
[1, 2, 3, 4]
>>> 
```

# javascript - 任何可以显示 Windows 8 动态磁贴效果的 jQuery 插件？

> ID：13757836
> 
> 赞同：4
> 
> 时间：2012-12-07T06:08:35.743
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我只是想知道如何在瓷砖上从下到上滑动图片并具有缓动效果（正如您在 win8 中看到的那样，滑动速度不是恒定的。）任何代码和演示都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:19:16.310

就在这里。看看[Metro-JS](http://www.drewgreenwell.com/projects/metrojs)。它具有“动态磁贴”和许多其他 Metro UI 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T14:40:09.100

[windows8-animations](https://github.com/SaraSoueidan/windows8-animations)是另一个不错的选择。

# codeigniter - 如何将我自己的值从codeigniter中的控制器传递给视图

> ID：13757839
> 
> 赞同：-2
> 
> 时间：2012-12-07T06:08:45.930
> 
> 标签：codeigniter

我有一个视图文件`update.php`并包含以下代码：

```
php foreach ($record as $my_records)

$val1=$my_records['name'];

$val2=$my_records['faculty'];

$val3=$my_records['level'];

$val4=$my_records['year'];

?>

php endforeach 
```

我有一个带有函数的控制器`update`，这个控制器从模型中获取记录，如下所示：

```
$data['record']=$this->myproject_model->get_all_values($rollno); 
```

然后将这些记录传递给视图，如下所示

```
$this->load->view('iproject/update',$data); 
```

但是，我需要将自己的值从控制器发送到视图。也就是说，在某些情况下，我需要清除从模型中获得的数据并将我自己的值发送到视图。那么，如何将我自己的数据放入数组中并以与上述代码`$data['record']`相同的方式在视图中获取这些数据？`update.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:11:58.820

`$data['record']`从模型中获取控制器后，您始终可以在控制器中进行修改。

但是 MVC 方式是从模型本身发送正确的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:13:13.957

您可以像这样发送静态数据：

```
$data = array(
     'x' =>'hello',
     'y' =>'how are',
    ); 
```

您可以将此`$data`数组发送到视图，就像您`$data`之前发送的方式一样，您可以访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:13:31.100

```
$records = $this->myproject_model->get_all_values($rollno);

$reults = $this->prepare_records($records); // Below.

$data['results'] = $results;
$this->load->view('iproject/update', $data); 
```

并且您需要使用逻辑编写的函数（最简单但不是最好的放置函数的位置是在控制器中。）：

```
private function prepare_records($records)
{
  $results = array();
  // Fill up $results
  return $results;
} 
```

一个更好的策略是将函数放在 myproject_model 中，以保持控制器的清洁和围绕模型中数据的逻辑。

您将替换：

```
$reults = $this->prepare_records($records); 
```

和

```
$reults = $this->myproject_model->prepare_records($records); 
```

并将功能移动到模型中。如果它在您的模型中，您需要将声明更改为 public（这很酷，因为现在您可以从任何您想要的控制器调用它）。

```
public function prepare_records($records) { } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T15:22:46.117

在这种情况下，我会在你的 foreach 循环中使用一个指针。然后您可以检查该条目是否需要修改，然后进行更改。

在下面的示例中，我检查用户是否在他们的第四年/最后一年 - 如果是，我们在他们的教师姓名之前添加“Final Year Student -”。与其创建一个新数组并在那里填充，这是一种更智能的代码正确准备结果以供显示的方式。

```
foreach($records as &$record){
    if($record['year'] == '4'){
        $record['faculty'] = 'Final Year Student - ' . $record['faculty'];
    }
} 
```

现在，一旦循环完成， $records 将包含修改后的条目。

# c++ - 如何从标准向量前面读取并删除读取变量？

> ID：13757853
> 
> 赞同：3
> 
> 时间：2012-12-07T06:09:48.363
> 
> 标签：c++, stl, std

如何从标准向量前面读取并删除读取变量？

是吗：

```
v.front();
v.erase(v.begin()); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T06:23:48.903

看起来不错，但考虑切换到具有 pop_front 函数的 std::deque （不必移动容器中的所有元素）

# android - Android获取位置和设置文本空指针异常

> ID：13757857
> 
> 赞同：0
> 
> 时间：2012-12-07T06:10:02.940
> 
> 标签：android, nullpointerexception

我正在使用 SO 上的一个很棒的位置类来通过网络或 gps 获取我的位置。它可以工作并为我提供 Log.i() 输出中的位置，但是，当我尝试将这些变量添加到 textView 时，我得到一个空指针异常。

这是我的紧急课程：

```
 public class EmergencyActivity extends NavigationActivity {
    private TextView tvYourLocation;
    public String wxUrl;
    public String latlon;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //show no back arrow
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        setContentView(R.layout.activity_emergency);

        LocationResult locationResult = new LocationResult(){
            @Override
            public void gotLocation(Location location){
                //Got the location!
                latlon = "Latitude: " + location.getLatitude() + "<br/> Longitude: " + location.getLongitude();
                Log.i("URL",latlon);
                tvYourLocation = (TextView) findViewById(R.id.todaysReport);
                tvYourLocation.setText(Html.fromHtml("<strong>Your current location is: <br/>" + latlon +"</strong>"));
            }
        };
        MyLocation myLocation = new MyLocation();
        myLocation.getLocation(this, locationResult);

    }
} 
```

我将此类用于 myLocation：

```
public class MyLocation {
    Timer timer1;
    LocationManager lm;
    LocationResult locationResult;
    boolean gps_enabled=false;
    boolean network_enabled=false;

    public boolean getLocation(Context context, LocationResult result)
    {
        //I use LocationResult callback class to pass location value from MyLocation to user code.
        locationResult=result;
        if(lm==null)
            lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        //exceptions will be thrown if provider is not permitted.
        try{gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){}
        try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){}

        //don't start listeners if no provider is enabled
        if(!gps_enabled && !network_enabled)
            return false;

        if(gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
        if(network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        timer1=new Timer();
        timer1.schedule(new GetLastLocation(), 20000);
        return true;
    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
             lm.removeUpdates(locationListenerGps);
             lm.removeUpdates(locationListenerNetwork);

             Location net_loc=null, gps_loc=null;
             if(gps_enabled)
                 gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
             if(network_enabled)
                 net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

             //if there are both values use the latest one
             if(gps_loc!=null && net_loc!=null){
                 if(gps_loc.getTime()>net_loc.getTime())
                     locationResult.gotLocation(gps_loc);
                 else
                     locationResult.gotLocation(net_loc);
                 return;
             }

             if(gps_loc!=null){
                 locationResult.gotLocation(gps_loc);
                 return;
             }
             if(net_loc!=null){
                 locationResult.gotLocation(net_loc);
                 return;
             }
             locationResult.gotLocation(null);
        }
    }

    public static abstract class LocationResult{
        public abstract void gotLocation(Location location);
    }

} 
```

...在这里找到：[在 Android 上获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a)

我如何找到这个 Null？

这是我的日志输出：

```
12-06 22:00:52.151: E/AndroidRuntime(19936): FATAL EXCEPTION: main
12-06 22:00:52.151: E/AndroidRuntime(19936): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.backcountryskiers.avalanche.conditions/com.backcountryskiers.avalanche.conditions.EmergencyActivity}: java.lang.NullPointerException
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.os.Looper.loop(Looper.java:137)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at java.lang.reflect.Method.invokeNative(Native Method)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at java.lang.reflect.Method.invoke(Method.java:511)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at dalvik.system.NativeStart.main(Native Method)
12-06 22:00:52.151: E/AndroidRuntime(19936): Caused by: java.lang.NullPointerException
12-06 22:00:52.151: E/AndroidRuntime(19936):    at com.backcountryskiers.avalanche.conditions.EmergencyActivity.onCreate(EmergencyActivity.java:43)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.app.Activity.performCreate(Activity.java:5104)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-06 22:00:52.151: E/AndroidRuntime(19936):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-06 22:00:52.151: E/AndroidRuntime(19936):    ... 11 more 
```

# android - 一起控制两个 ViewPager

> ID：13757859
> 
> 赞同：7
> 
> 时间：2012-12-07T06:10:21.560
> 
> 标签：android, android-layout, android-viewpager, android-scrollview, android-scroll

我需要将两个 ViewPager 同步在一起。要求类似于滚动 ViewPager-1 和 ViewPager-2 也应该滚动一定量。下面显示的图像将使您对我的问题更加清楚。

![在此处输入图像描述](../Images/176c019e43895e670b54100787247ac0.png)

您还可以通过一些教程链接帮助我。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T12:26:37.930

我认为这是你需要的：

```
 viewpager1.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                viewpager2.onTouchEvent(event);
                return false;
            }
        });

        viewpager2.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                viewpager1.onTouchEvent(event);
                return false;
            }
        }); 
```

我有同样的问题，但首先我尝试使用 fakeDragBy 方法，这是死路一条。（如果您有超过两页）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:54:54.910

您可以通过以下方式扩展 ViewPager 以创建自定义视图并覆盖 onTouchEvent()：

```
 @Override
        public boolean onTouchEvent(MotionEvent event) {

          if(mDependentView != null){
            mDependentView.onTouchEvent(event);
          }
          return super.onTouchEvent(event);
        } 
```

还要在您的自定义类中创建一个 setter 以设置dependentView

```
public void setDependentView(View view){
   mDependentView = view;
} 
```

然后，您应该将第二个 viewpager 设置为活动中第一个 viewpager 的依赖视图。

# android - 如何使用 aChart Engine for android 创建拨号图表？

> ID：13757862
> 
> 赞同：1
> 
> 时间：2012-12-07T06:10:27.667
> 
> 标签：android, achartengine

现在我正在使用 aChart 引擎在 android 中做图表应用程序。我也可以创建条形图、折线图、双折线图、饼图和组合图。现在我想为我的应用程序创建拨号图表。我需要创建拨号图表。我搜索了很多，但我无法得到正确的解决方案。任何机构都可以告诉我该怎么做吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:42:54.777

AChartEngine中有一个表盘图。

请看一下[这个](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/WeightDialChart.java)例子以获得一些想法。

# javascript - 分页和字母过滤器问题

> ID：13757863
> 
> 赞同：3
> 
> 时间：2012-12-07T06:10:30.000
> 
> 标签：javascript, jquery, html, css

我在 jQuery 中使用分页和字母过滤器。它工作正常，但我想再添加一个链接（全部），当用户单击该链接时，它将显示所有数据。

JS代码在这里：

```
$(window).load(function () {
    $('div.filter').delegate('a', 'click', function (event) {
        $('ul.items li').hide().filter('.' + this.href.slice(this.href.indexOf("#") + 1)).show();
        event.preventDefault();
    });

    var itemsNumber = 10;
    var min = 0;
    var max = itemsNumber;

    function pagination(action) {
        var totalItems = $("#item-wrapper").find("li").length;
        if (max < totalItems) { //Stop action if max reaches more than total items 
            if (action == "next") {
                min = min + itemsNumber;
                max = max + itemsNumber;
            }
        }

        if (min > 0) { //Stop action if min reaches less than 0
            if (action == "prev") {
                min = min - itemsNumber;
                max = max - itemsNumber;
            }
        }
        else {
        }
        $("#item-wrapper").find("li").hide();
        $("#item-wrapper").find("li").slice(min, max).show();

        if (action == "next"){
         if (max < totalItems)
             {
               $("#prev").removeClass("previous_link_gray");
               $("#prev").addClass("previous_link");
             }
             else
             {
                $("#next").removeClass("next_link");
                $("#next").addClass("next_link_gray");
             }
        }

        if (action == "prev"){
                 if (min>0)
                     {
                       $("#next").removeClass("next_link_gray");
                       $("#next").addClass("next_link");
                     }
                     else
                     {
                       $("#prev").removeClass("previous_link");
                       $("#prev").addClass("previous_link_gray");
                     }
                }
                var mymax = max;
                if(parseInt(max) > parseInt(totalItems)) {
                    mymax = totalItems;
                }

                var pagelbl = (parseInt(min) + 1) + ' to ' + mymax + ' of ' + totalItems;
                $("#spnpage").html(pagelbl);
            }

    pagination();

    //Next
    $("#next").click(function () {
        action = "next";
        pagination(action);

    })

    //Previous
    $("#prev").click(function () {
        action = "prev";
        pagination(action);
    })
});   //]]>  

function getSelected(Alphabet)  {
    $(".filter").find('a').removeClass('Selected');
    $("#" + Alphabet).addClass('Selected');
    $("#prev").removeClass("previous_link_gray");
    $("#next").removeClass("next_link_gray");
    $("#prev").addClass("previous_link");
    $("#next").addClass("next_link");
} 
```

HTML：

```
<li><a href="#category-a11" id="all" onclick="getSelected('All')" class="Selected">All</a></li>
<li><a href="#category-A" id="A" onclick="getSelected('A')">A</a></li>
<li><a href="#category-B" id="B" onclick="getSelected('B')">B</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:17:47.330

您可能需要提供更多的 html，但似乎您需要做的就是您的例如`show()`中的每个列表项。`#item-wrapper`

```
$("#item-wrapper").find("li").show();

// A slightly more process efficient way of selecting would be
$("#item-wrapper li").show(); 
```

所以你的`getSelected`功能会变成：

```
function getSelected(Alphabet){
    if(Alphabet == "all"){
        // Hide prev/next btns as they wont make sense to user
        $("#prev, #next").hide();
        // Show the items
        $("#item-wrapper li").show();
    }else{
        $(".filter").find('a').removeClass('Selected');
        $("#" + Alphabet).addClass('Selected');
        $("#prev").show().removeClass("previous_link_gray");
        $("#next").show().removeClass("next_link_gray");
        $("#prev").addClass("previous_link");
        $("#next").addClass("next_link");
    }
} 
```

这对您当前的标记有意义吗？

# .htaccess - .htaccess 重写 URL - 更改 WordPress URL

> ID：13757866
> 
> 赞同：1
> 
> 时间：2012-12-07T06:10:54.787
> 
> 标签：.htaccess, mod-rewrite

我正在尝试重写我的 WordPress 帖子的 URL，该 URL 当前是：

```
http://example.com/posts/titleofpost 
```

至

```
http://example.com/titleofpost 
```

我偶然做错了什么？

```
RewriteEngine On
RewriteRule   ^posts/(.+)$   title=$1   [L] 
```

我有一种感觉`title=$1`是不对的，应该是一些不同的表达方式？这种表达方式可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:13:44.437

```
RewriteEngine On
RewriteBase /
RewriteRule   ^posts/(.+)$   $1   [R=301,L] 
```

# c# - 如何使用密码转移应用程序角色？

> ID：13757871
> 
> 赞同：1
> 
> 时间：2012-12-07T06:11:30.260
> 
> 标签：c#, sql-server, smo

我需要从现有数据库（MS SQL 2012）制作某种模板。模板必须具有相同的架构（表、索引、角色等），但不能包含来自源数据库的数据。

为此，我使用`Transfer`了 SMO 的课程。我当前的传输设置是：

```
 transfer.CopyAllObjects = true;
        transfer.CopyAllSynonyms = true;
        transfer.CopyData = false;

        transfer.Options.WithDependencies = true;
        transfer.Options.DriAll = true;
        transfer.Options.Triggers = true;
        transfer.Options.Permissions = true;
        transfer.Options.Indexes = true;
        transfer.Options.ContinueScriptingOnError = true;
        transfer.Options.SchemaQualifyForeignKeysReferences = true;
        transfer.Options.ExtendedProperties = true; 
```

源数据库中的对象之一是应用程序角色。为该角色生成的传输脚本如下所示：

```
/* To avoid disclosure of passwords, the password is generated in script. */
declare @idx as int
declare @randomPwd as nvarchar(64)
declare @rnd as float
select @idx = 0
select @randomPwd = N''
select @rnd = rand((@@CPU_BUSY % 100) + ((@@IDLE % 100) * 100) + 
       (DATEPART(ss, GETDATE()) * 10000) + ((cast(DATEPART(ms, GETDATE()) as int) % 100) * 1000000))
while @idx < 64
begin
   select @randomPwd = @randomPwd + char((cast((@rnd * 83) as int) + 43))
   select @idx = @idx + 1
select @rnd = rand()
end
declare @statement nvarchar(4000)
select @statement = N'CREATE APPLICATION ROLE [MyRole] WITH DEFAULT_SCHEMA = [dbo], ' + N'PASSWORD = N' + QUOTENAME(@randomPwd,'''')
EXEC dbo.sp_executesql @statement 
```

问题：如何使用源数据库中的密码转移此角色？我在这里不需要这种“安全性”。我找不到合适的转移选项。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:20:50.080

没有办法做到这一点，因为 SQL Server 不允许在元数据中查看密码。因此，在转移应用程序角色时，您需要为其指定新密码。登录以及对称和非对称密钥的各种属性也是如此。

# android - getChildFragmentManager() 以编程方式（动态）添加片段？

> ID：13757875
> 
> 赞同：29
> 
> 时间：2012-12-07T06:11:41.977
> 
> 标签：android, android-fragments, android-nested-fragment

如何在以`getChildFragmentManager()`编程方式（动态）添加`Fragment`的 s 上使用（或“我们可以使用”）？

**这是我的例子。**

我有一个`MainActivity`，一个`OuterFrag`，还有一个`InnerFrag`。我将`OuterFrag`通过. 而且，我将通过. 但我想完全添加为 的孩子，而不是替换并成为.`MainActivity``FragmentManager``InnerFrag``OuterFrag``FragmentManager``InnerFrag``OuterFrag``OuterFrag``MainActivity`

**我想保持这个层次结构：`MainActivity -> OuterFrag -> InnerFrag`. 所以MainActivity总是可以调用OuterFrag。**

但不要从这个层次结构改变：`MainActivity -> OuterFrag`到这个层次结构：`MainActivity -> InnerFrag`这`MainActivity`将丢失`OuterFrag`.

**这是我的示例代码。**

**MainActivity.java**

```
package com.example.frag;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        getSupportFragmentManager().beginTransaction().add(R.id.frameLayout, new OuterFrag()).commit();
        getSupportFragmentManager().executePendingTransactions();

        System.out.println("Before: "
                + getSupportFragmentManager().findFragmentById(R.id.frameLayout));

        ((OuterFrag) getSupportFragmentManager().findFragmentById(R.id.frameLayout))
                .addInnerFrag();

        System.out.println("After: "
                + getSupportFragmentManager().findFragmentById(R.id.frameLayout));
    }
} 
```

**activity_main.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frameLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</FrameLayout> 
```

**OuterFrag.java**

```
package com.example.frag;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class OuterFrag extends Fragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.outer_frag, container, false);
    }

    public void addInnerFrag() {

        getFragmentManager().beginTransaction().replace(this.getId(), new InnerFrag()).commit();
        getFragmentManager().executePendingTransactions();

//        getChildFragmentManager().beginTransaction().add(this.getId(), new InnerFrag()).commit();
//        getChildFragmentManager().executePendingTransactions();
    }
} 
```

**外部碎片.xml**

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="i am the OUTER frag" /> 
```

**InnerFrag.java**

```
package com.example.frag;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class InnerFrag extends Fragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.inner_frag, container, false);
    }
} 
```

**inner_frag.xml**

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="i am the INNER frag" /> 
```

目前，上述代码可以正常运行。但它实际上正在改变`InnerFrag`为新的孩子`MainActivity`。这可以通过两个系统打印输出语句来验证之前：对象和之后：对象已更改。在 中`OuterFrag.java`，如果`getChildFragmentManager()`运行语句而不是`getFragmentManager()`语句，我们将得到以下运行时错误：

```
12-07 02:29:38.406: E/AndroidRuntime(12051): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.frag/com.example.frag.MainActivity}: java.lang.IllegalArgumentException: No view found for id 0x7f070000 (com.example.frag:id/frameLayout) for fragment InnerFrag{46e32748 #0 id=0x7f070000} 
```

使用`getChildFragmentManager()`在理论上是正确的。它可以用于非编程方式添加的片段（这意味着将`activity_main.xml`'s更改`<FrameLayout>`为`<fragment>`、添加属性`android:name="com.example.frag.OuterFrag"`并删除 中的第一条`getSupportFragmentManager()`语句`MainActivity.java`）。它保持正确的层次结构：`MainActivity -> OuterFrag -> InnerFrag`. 但原片断（`outer_frag.xml`）的文字是永远不能被带走的。

总之，我想总是参考`OuterFrag`。`MainActivity`我想`OuterFrag`充当一个占位符来加载不同`InnerFrag`的s。简而言之，当它以编程方式（动态）添加时`getChildFragmentManager()`，我想调用它。`OuterFrag`

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-07T06:29:55.800

> 总之，我想总是在 MainActivity 中引用 OuterFrag。我希望 OuterFrag 作为一个占位符来加载不同的 InnerFrags。简而言之，当以编程方式（动态）添加时，我想在 OuterFrag 中调用 getChildFragmentManager()。

如果你想要这个，那么让你`OuterFrag`有一个容器布局作为它的内容并将任何内容添加`InnerFrag`到该容器中。将的布局文件`OuterFrag`是：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fragContainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
/> 
```

当然，`OuterFrag`如果需要，您可以在布局中使用其他视图。那么你的`addInnerFrag`方法将是：

```
public void addInnerFrag() {
        getChildFragmentManager().beginTransaction().add(R.id.fragContainer, new InnerFrag()).commit();
        getChildFragmentManager().executePendingTransactions();
} 
```

添加`OuterFrag`到主要活动的代码仍然有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-09T13:33:45.603

如果你想`addInnerFrag()`在你的`OuterFrag.java`代码中调用，你可以这样做：

**OuterFrag.java：**

```
@Override
public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    addInnerFrag();
} 
```

# matlab - 返回大量变量的matlab函数是否需要更长的时间来执行

> ID：13757879
> 
> 赞同：1
> 
> 时间：2012-12-07T06:11:51.910
> 
> 标签：matlab

我只是好奇
如果一个函数需要返回大量变量，执行是否需要更长的时间？我有一个计算值并将它们存储在数组中的函数。每次调用它都会计算这些值，并且调用的次数没有改变。但是现在我已经添加了一些返回值（每个都是一个包含大约 1500 个双元素的大数组，该函数返回 8~10 个这样的数组，而不是仅仅计算它们）该函数似乎需要更长的时间来执行（之前使用 tic 检查函数调用和函数调用后的toc。这是否会导致总执行时间更多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:15:26.237

事实上，如果你让函数输出更多的争论，它确实需要更长的时间。我想这与存储结果有关。

这是我的测试功能：

```
function [q, w, e, r, t, y, u, i, o, p] = tests

q = rand(100);
w = rand(100);
e = rand(100);
r = rand(100);
t = rand(100);
y = rand(100);
u = rand(100); 
i = rand(100); 
o = rand(100); 
p = rand(100); 
```

这些是我用来测试速度的设置：

```
clear
tic
for i = 1:100
   %q = tests; %Only one output argument
   [q w e r t y u i o p] = tests; %Several output arguments
end
toc 
```

差异不是很大，但我运行了几次，结果看起来确实很重要：

```
Only one output argument: 0.1354 average +- 0.0001
Several output arguments: 0.1367 average +- 0.0001 
```

所以这需要更长的时间，但我怀疑这种差异是否足够有趣，足以胜过其他考虑。

# haskell - 你能在 Haskell 中部分约束一个类型吗？

> ID：13757883
> 
> 赞同：4
> 
> 时间：2012-12-07T06:12:04.663
> 
> 标签：haskell, type-inference

是否可以为包含“空白”的 Haskell 值提供类型签名以供类型推断算法填充？

非常人为的上下文示例：

```
m = return ('I', (("don't", "really"), "care", ["what", "this"], "type"), "is") 

b = isJust m 
```

这行得通。`isJust m`in的使用`b`限制了`m`to be的类型`Maybe <something>`，而`m`'s 的定义限制了`m`to be的类型`<something> (Char, ((String, String), String, [String], String), String)`，编译器将这两条信息放在一起计算出精确的类型`m`。

但是假设我没有对 应用任何`Maybe`特定函数`m`，所以我需要一个手动类型签名来停止`return`多态。我不能这样说：

```
m :: Maybe a
m = return ('I', (("don't", "really"), "care", ["what", "this"], "type"), "is") 
```

因为那是不正确的。类型并不`Maybe a`适用于所有`a`，它`Maybe a`适用于`a`我希望编译器推断的一些；程序中有足够的信息供编译器执行此操作，从我的第一个示例中我们可以看到，编译器*能够*将多个约束放在一起，其中没有单独的约束足以确定类型是什么，但是它们一起完全指定了类型。

我想要的是能够给出类似的类型`m :: Maybe _`，其中的`_`意思是“你弄清楚这里发生了什么”，而不是像`m :: Maybe a`.

有什么办法可以说这样的话吗？我可以看到的替代方案是明确给出完整类型：

```
m :: Maybe (Char, ((String, String), String, [String], String), String)
m = return ('I', (("don't", "really"), "care", ["what", "this"], "type"), "is") 
```

或者给表达式的一部分一个类型签名，它具有约束`Maybe`类型签名的一部分而不是约束的效果`a`，例如：

```
m = (return :: a -> Maybe a) ('I', (("don't", "really"), "care", ["what", "this"], "type"), "is") 
```

或者在`m`没有显式类型签名的情况下离开并引入未使用的额外定义来约束`m`：

```
m = return ('I', (("don't", "really"), "care", ["what", "this"], "type"), "is") 

b = isJust m 
```

或者直接使用单态函数：

```
m = Just ('I', (("don't", "really"), "care", ["what", "this"], "type"), "is") 
```

显然，这不是特定于`Maybe`，也不是`* -> *`类型构造函数的参数；我可以想象想说“这个值是一个单子，对于`Int`某些单子”而不想说“这个值是*任何*单子的单子”，或者“这是一个来自其他类型的函数”而不是说“这是一个功能从任何*其他*类型`。`Int`*`Int``Int`*

 **我最感兴趣的是是否有什么东西可以让我相当直接地声明像上面关于值的声明，出于可读性目的，而不是难以阅读的变通方法（比如为`return`. 我知道，如果我的目标是简单地将额外的类型信息输入编译器以将其关闭关于模棱两可的类型变量，那么有无数种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T07:31:08.183

不幸的是，GHC 不允许您直接指定部分签名，尽管这样会很棒。

在这种情况下，做你想做的事情的一种方法是`m = return ... `asTypeOf` (undefined :: Maybe a)`，其中`asTypeOf`是一个 Prelude 函数`:: a -> a -> a`，它返回它的第一个参数但强制它与第二个参数统一。

* * *

这是你在评论中提出的一个很好的观点——`undefined :: SomeType`让我也很难过。这是另一个解决方案：

```
import Data.Proxy

proxiedAs :: a -> Proxy a -> a
proxiedAs = const 
```

现在你可以说`m = return ... `proxiedAs` (Proxy :: Proxy (Maybe a))`，并且看不到 ⊥。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T07:28:59.307

你可以这样写：

```
asMaybe :: Maybe a -> Maybe a
asMaybe = id

m = asMaybe $ return ('I', (("don't", "really"), "care", ["what", "this"], "type"), "is") 
```

[我在classy-prelude](http://hackage.haskell.org/packages/archive/classy-prelude/0.4.1/doc/html/ClassyPrelude.html#v:asByteString)、提供`asByteString`、`asSet`、`asList`等中使用了这种技巧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-09T10:32:41.067

在 GHC 7.10 中，现在[有了 PartialTypeSignatures](https://downloads.haskell.org/~ghc/7.10.3/docs/html/users_guide/partial-type-signatures.html)扩展，它完全启用了我在问题中编写的假设下划线语法。来自上面链接的文档页面的示例：

```
not' :: Bool -> _
not' x = not x
-- Inferred: Bool -> Bool

maybools :: _
maybools = Just [True]
-- Inferred: Maybe [Bool]

just1 :: _ Int
just1 = Just 1
-- Inferred: Maybe Int

filterInt :: _ -> _ -> [Int]
filterInt = filter -- has type forall a. (a -> Bool) -> [a] -> [a]
-- Inferred: (Int -> Bool) -> [Int] -> [Int] 
```

仅使用`PartialTypeSignatures`扩展名，编译器就会发出带有推断类型的警告，以防它们只是您打算在最终版本之前填写的占位符。通过添加`-fno-warn-partial-type-signatures`标志，您可以告诉它您打算保留部分签名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T07:49:07.223

从 Michael Snoyman 的建议中综合一下，如果我：

1.  不想为我想做的每个类型断言定义一个特定的函数
2.  想要真正写出接近我所做类型断言的类型
3.  不想写两次类型

我可以做类似的事情：

```
type Assert a = a -> a

m = (id :: Assert (Maybe a)) $ return ('I', (("don't", "really"), "care", ["what", "this"], "type"), "is") 
```**

# sql-server - 计算具有 2 个重复/匹配列的行

> ID：13757884
> 
> 赞同：2
> 
> 时间：2012-12-07T06:12:17.000
> 
> 标签：sql-server, sql-server-2008, tsql

我在这里尝试了最佳答案：[选择计数/重复](https://stackoverflow.com/questions/2516546/select-count-duplicates) 并没有得到准确的结果，可能是因为这个例子是针对一个字段的？

我最初尝试过这个，但似乎也没有工作：

```
 SELECT T.STATE, T.CITY, COUNT(T2.CITY)
     FROM (SELECT DISTINCT T.STATE, T.CITY 
             FROM TABLE ) T
LEFT JOIN TABLE T2 ON T2.STATE = T.STATE 
                  AND T2.CITY = T.CITY
 GROUP BY T.STATE, T.CITY 
```

这也会给出不准确的结果。我正在尝试获取表中 2 个字段的重复值的计数。

样本数据：

```
 Los Angeles, CA, Bob
 New York, NY, Bill
 Los Angeles, CA, Jim
 Los Angeles, CA, Joe
 New York, NY, Gary
 Los Angeles, CA, Roger 
```

应该返回：

```
 Los Angeles, CA, 4
 New York, NY, 2 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:53:42.587

```
DECLARE @TABLE TABLE(
    CITY VARCHAR(100),
    [STATE] CHAR(2),
    NAME VARCHAR(50)
)

INSERT INTO @TABLE VALUES
 ('Los Angeles', 'CA', 'Bob'),
 ('New York', 'NY', 'Bill'),
 ('Los Angeles', 'CA', 'Jim'),
 ('Los Angeles', 'CA', 'Joe'),
 ('New York', 'NY', 'Gary'),
 ('Los Angeles', 'CA', 'Roger')

 SELECT CITY,[STATE],COUNT(*) [COUNT]
 FROM @TABLE
 GROUP BY CITY,[STATE]
 HAVING COUNT(*) > 1

 --if there are erroneous white spaces and inconsistant case, and collation is case sensitive use this
 DELETE FROM @TABLE
 INSERT INTO @TABLE VALUES
 ('  Los Angeles', 'CA', 'Bob'),
 ('New York', 'NY', 'Bill'),
 ('Los ANgeles   ', 'CA', 'Jim'),
 ('LOS Angeles', 'CA', 'Joe'),
 ('New YorK  ', 'NY', 'Gary'),
 ('  Los Angeles ', 'CA', 'Roger')

 SELECT RTRIM(LTRIM(UPPER(CITY))) [CITY] ,RTRIM(LTRIM(UPPER([STATE]))) [STATE],COUNT(*) [COUNT]
 FROM @TABLE
 GROUP BY RTRIM(LTRIM(UPPER(CITY))),RTRIM(LTRIM(UPPER([STATE])))
 HAVING COUNT(*) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:16:21.040

据我了解，您希望获取计数 > 1 的所有记录。

```
select T.State, T.City, COUNT(1)
FROM TABLE T
GROUP BY T.State, T.City
HAVING COUNT(1) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:16:44.027

```
SELECT T.STATE, T.CITY, COUNT(*) as cnt
FROM Table X T
GROUP BY T.STATE, T.CITY
HAVING COUNT(*)>1 
```

如果输入不准确，你可以试试

```
SELECT RTRIM(LTRIM(T.STATE)), LTRIM(RTRIM(T.CITY)), COUNT(*) as cnt
FROM Table X T
GROUP BY RTRIM(LTRIM(T.STATE)), LTRIM(RTRIM(T.CITY))
HAVING COUNT(*)>1 
```

# json - 如何为以下json字符串生成pojo类

> ID：13757890
> 
> 赞同：0
> 
> 时间：2012-12-07T06:12:47.950
> 
> 标签：json, rest, mapping, jackson, pojo

我有一个 json 字符串

```
{
"user": [
    {
        "actor": "ashok"
    },
    {
        "actor": {
            "name": "ashok",
            "mail": "ashok@gmail.com"
        }
    },
    {
        "actor": [
            "ashok",
            "kumar"
        ]
    }
]
} 
```

如何生成 POJO 类。这是为了让杰克逊映射器自动映射 bean 类中的以下 json。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:06:34.800

```
public class MainBean
{
   private List<UserBean> user = new ArrayList<UserBean>();

   // getter/ setter
}  

public class UserBean 
{
   private String actor; // this for "actor": "ashok" 

   private Map<String, String> actorMap; // this for second case

   private List<String> actors; // this for third case

   @JsonAnySetter
   public void set(String name, Object value)
   {
      if (value instanceof String)
      {
         actor = (String) value;   
      }
      else if (value instanceof Map)
      {
         actorMap = (Map<String, String>) value;   
      }
      else if (value instanceof List)
      {
         actors =  (List<String>) value; 
      }
   }
} 
```

第二种情况，您可以创建带有两个字符串字段的简单类，`name`然后`mail`在其上创建新实例`if (value instanceof Map)`

# java - 在 Android 中查看证书的详细信息

> ID：13757891
> 
> 赞同：1
> 
> 时间：2012-12-07T06:12:50.163
> 
> 标签：java, android, security, certificate

如何在 java 的证书（DER 格式，即 .cer 文件）中显示主题的详细信息？例如：电子邮件、国家、姓名或单独的 OID 等。

可以从上面的代码中读取证书。也可以在 Android 中使用。谢谢 GreyBeardedGeek。但为了更详细地说明它（如好奇的要求），如果您使用方法 getSubjectDN() 或 cert.getSubjectX500Principal().getname() 显示主题详细信息，它将显示整个详细信息。有些可能被编码。我相信它是 ASN1。（不确定）。我需要的是只提取我需要的信息。有关示例，请参阅我创建的示例证书的代码输出。using method - cert.getSubjectX500Principal().getname() Subject Name 2.5.4.5=#130d4e2d61626c652f49542f303130,2.5.4.72=#1308456e67696e656572,2.5.4.41=#13104e7577616e20446520416c6d65696461,1.2.840.113549.1.9.1=#16106e7577616e406e2d61626c652e62697a,OU=Information Technology ,O=N-able Pvt Ltd\ ,ST=西方,C=LK

2.5.4.5 是经过编码的 OID（对象标识符）。

使用方法——getSubjectDN()

OID.2.5.4.5=N-able/IT/010, OID.2.5.4.72=工程师, OID.2.5.4.41=努万德阿尔梅达, OID.1.2.840.113549.1.9.1=#16106E7577616E406E2D61626C652E62697A, OU=信息技术, O="N-able Pvt Ltd"，ST=西方，C=LK

这里还对一些信息进行了编码，例如：电子邮件地址。

所以回到我的问题，我们如何根据 OID 分别提取信息（未编码）。此外，如果您在 windows 操作系统中安装证书，您可以正确查看主题信息。我需要的是一个代码来获取通过 java 中的 OID 的 OID 值信息，以单独提取主题详细信息。

再次提前感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:40:09.677

查看 Bouncy Castle ASN.1 解析库，尤其是`X500Name`. 它可以将专有名称 (DN) 解析为其部分（CN、O 等）。

[http://www.bouncycastle.org/docs/docs1.5on/index.html](http://www.bouncycastle.org/docs/docs1.5on/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:26:57.337

以下代码（不包括错误处理）将从 .cer 文件中生成 X509Certificate 的实例。然后，您可以使用该对象的方法来检查证书的属性。该代码是通用 java，但应该在 Android 中工作。

```
X509Certificate cert = null;

FileInputStream fis = null;
ByteArrayInputStream bais = null;

String source = "certificate.cer";
String certType = "X.509"

fis = new FileInputStream(source);
byte[] value = new byte[fis.available()];
fis.read(value);

bais = new ByteArrayInputStream(value);

java.security.cert.CertificateFactory cf = java.security.cert.CertificateFactory.getInstance(certType);
cert = (X509Certificate)cf.generateCertificate(bais); 
```

# shell - 计算每个目录中文件数的脚本

> ID：13757896
> 
> 赞同：10
> 
> 时间：2012-12-07T06:13:24.843
> 
> 标签：shell

我需要计算大量目录上的文件数。有没有一种简单的方法可以使用 shell 脚本（使用 find、wc、sed、awk 或类似的）来做到这一点？只是为了避免必须在 python 中编写适当的脚本。

输出将是这样的：

```
$ <magic_command>
dir1  2
dir2 12
dir3  5 
```

目录名称后面的数字将是文件的数量。一个加号将能够打开和关闭点/隐藏文件的计数。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T06:19:40.870

试试下面的一个：

```
du -a | cut -d/ -f2 | sort | uniq -c | sort -nr 
```

来自[http://www.linuxquestions.org/questions/linux-newbie-8/how-to-find-the-total-number-of-files-in-a-folder-510009/#post3466477](http://www.linuxquestions.org/questions/linux-newbie-8/how-to-find-the-total-number-of-files-in-a-folder-510009/#post3466477)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T06:17:00.190

```
find <dir> -type f | wc -l 
```

*find -type f*将在每一行列出指定目录中的所有文件，*wc -l*计算从标准输入中看到的换行符的数量。

也供将来参考：像这样的答案是谷歌。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T06:31:47.670

或多或少我在寻找什么：

```
find . -type d -exec sh -c 'echo "{}" `ls "{}" |wc -l`' \; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-07T06:16:44.980

尝试 `ls | wc`列出您目录中的文件并将文件输出列表作为输入提供给 wc

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-07T06:29:21.307

像这样的一种方式：

```
$ for dir in $(find . -type d  )
> do
>  echo $dir $(ls -A $dir | wc -l )
> done 
```

如果您不希望隐藏文件计数，只需删除 -A 选项

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-07T07:20:44.170

```
find . -type d | xargs ls -1 | perl -lne 'if(/^\./ || eof){print $a." ".$count;$a=$_;$count=-1}else{$count++}' 
```

下面是测试：

```
> find . -type d
.
./SunWS_cache
./wicked
./wicked/segvhandler
./test
./test/test2
./test/tempdir.
./signal_handlers
./signal_handlers/part2
> find . -type d | xargs ls -1 | perl -lne 'if(/^\./ || eof){print $a." ".$count;$a=$_;$count=-1}else{$count++}'

.: 79
./SunWS_cache: 4
./signal_handlers: 6
./signal_handlers/part2: 5
./test: 6
./test/tempdir.: 0
./test/test2: 0
./wicked: 4
./wicked/segvhandler: 9 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-29T12:32:21.330

Mehdi Karamosly 解决方案的**通用版本，***用于在不更改当前目录的情况下列出任何目录的文件夹*

```
DIR=~/test/ sh -c 'cd $DIR; du -a | cut -d/ -f2 | sort | uniq -c | sort -nr' 
```

**解释：**

1.  将目录提取到变量中
2.  启动新外壳
3.  更改该 shell 中的目录，以便当前 shell 的目录保持不变
4.  过程

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-15T15:08:43.307

我使用这些功能：

```
nf()(for d;do echo $(ls -A -- "$d"|wc -l) "$d";done)
nfr()(for d;do echo $(find "$d" -mindepth 1|wc -l) "$d";done) 
```

两者都假设文件名不包含换行符。

这是仅限 bash 的版本：

```
nf()(shopt -s nullglob dotglob;for d;do a=("$d"/*);echo "${#a[@]} $d";done)
nfr()(shopt -s nullglob dotglob globstar;for d;do a=("$d"/**);echo "${#a[@]} $d";done) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-21T13:41:32.540

我喜欢基于 du 的答案的输出，但是当我查看大型文件系统时，它需要很长时间，所以我整理了一个基于 ls 的小脚本，它提供了相同的输出，但速度更快：

```
for dir in `ls -1A ~/test/`;
do
  echo "$dir `ls -R1Ap ~/test/$dir | grep -Ev "[/:]|^\s*$" | wc -l`"
done 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-10T19:10:21.983

您可以尝试将 ls 命令的输出复制到文本文件中，然后计算该文件中的行数。

`ls $LOCATION > outText.txt; NUM_FILES=$(wc -w outText.txt); echo $NUM_FILES`

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-12-29T14:05:54.393

`find -type f -printf '%h\n' | sort | uniq -c | sort -n`

# iphone - 使用 Openears 框架进行语音识别？

> ID：13757897
> 
> 赞同：1
> 
> 时间：2012-12-07T06:13:27.237
> 
> 标签：iphone, ios, speech, openears

Operears：iPhone（iOS 设备）的语音识别（语音到文本）框架，我在我的 iPhone 设备上安装了 openears 演示应用程序，它运行良好，但仅适用于 GO、CHANGE、MODEL 等单词列表。我们能否让语音识别更通用，以实现实时语音识别，即不限于几个单词。它应该是通用的。

开耳： [http ://www.politepix.com/openears/](http://www.politepix.com/openears/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:24:23.573

您必须使用新的**语言模型**而不是他们的默认语言模型。

语言模型是您希望 OpenEars 理解的词汇，采用其语音识别引擎可以理解的格式。

语言模型越小，越能适应用户的实际用例，准确度就越高。

PocketsphinxController 的理想语言模型少于 200 个单词。

您可以通过 LanguageModelGenerator 类动态创建新的语言模型。

在此处查看**[有关 LangaugeModelGenerator 和 Openears 基本概念的详细信息](http://www.politepix.com/openears/#LanguageModelGenerator_Class_Reference)**

**笔记：**

[请仅在他们的论坛](http://www.politepix.com/forums/forum/openearsforum/)中发布有关 Openears 的查询

[您可以在此处](https://stackoverflow.com/questions/9202583/what-is-the-current-best-speech-recognition-api-for-ios-to-match-few-keywords)查看更多 Speech-To-Text SDK

# android - 在哪个地方放置一个嵌套内部类的变量，android

> ID：13757902
> 
> 赞同：0
> 
> 时间：2012-12-07T06:13:59.540
> 
> 标签：android, variables, scope, nested, nested-class

在这两种选择中，在下面的示例中，放置 View 类的变量的最佳位置是哪个？在这个 android 应用程序代码中，最好将其作为扩展活动的类的全局变量，还是在名为 ImageAdapter 的嵌套内部类中声明扩展 BaseAdapter 的变量更好？

哪个更好？

2个代码示例如下所示。

在第一个示例中，View 类的视图变量在范围内被声明为更具全局性。如此处所示，它出现在 Main 类中。

```
public class Main extends Activity {
     View view；  // <--- PLACEMENT IN A MORE GLOBAL POSITION
     Cursor imageCursor;

public class ImageAdapter extends BaseAdapter {

    private Context context;

   @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if(convertView == null){
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.adapterview, null);
        }else{
            view = convertView;
        } 
```

在第二个示例中，视图视图被声明为 ImageAdapter 类的局部变量，在该类的 getView 方法内。

```
 public class Main extends Activity {
Cursor imageCursor;

public class ImageAdapter extends BaseAdapter {

    private Context context;

   @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view；  // <--- PLACEMENT AS LOCAL VARIABLE
        if(convertView == null){
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.adapterview, null);
        }else{
            view = convertView;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:16:45.870

没有理由制作`view`成员字段。它的使用是方法的局部变量，因此将其设为方法的局部变量。

事实上，对于这种用途，您绝对不想将视图暴露给您的类中的其他代码。它应该返回到框架（调用`getView`），然后由您的代码单独处理。如果您无意中对返回的视图进行了带外更改`getView`，则行为将是不可预测的。

# kendo-ui - KendoUI Grid：通过 jquery 选择行

> ID：13757909
> 
> 赞同：2
> 
> 时间：2012-12-07T06:14:36.723
> 
> 标签：kendo-ui

我想在页面加载时切换页面并在网格上选择一行。在 $(document).ready(function()) 我这样写：

`$("#myGrid").data("kendoGrid").dataSource.page(17);`

它正在工作：网格页面切换到 17。但在那之后我写道：

`$("#myGrid").data("kendoGrid").select($("#myGrid").data("kendoGrid").tbody.find('>tr').find('>td').filter(function () {return $(this).text() == "@Model.ActionId";}).parent('tr:first'));`

它不工作。但是当我从浏览器的控制台运行这个命令时，该行被选中。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T07:45:53.673

可能您的网格绑定到远程服务。在这种情况下，分页不会立即发生。网格的数据源向远程服务发出异步请求，并在收到响应时重新启动网格。

要使其工作，您需要在收到响应*后调用选择代码。*网格的[dataBound](http://docs.kendoui.com/api/web/grid#databound)事件是调用该代码的适当位置。这是一个例子：

```
$("#myGrid").kendoGrid({
   /* other configuration */
   dataBound: function() {
      this.select(this.tbody.find('>tr').find('>td').filter(function () {return $(this).text() == "@Model.ActionId";}).parent('tr:first'));
   }
}); 
```

# c# - 从 c++ dll 到 c# 的编组结构数组

> ID：13757914
> 
> 赞同：2
> 
> 时间：2012-12-07T06:14:44.533
> 
> 标签：c#

我想将结构数组从 C++ dll 返回到 c#。我正在尝试如下：

在 C++ 代码中：

```
 Vertex*
GetVertices(Vertex* vertices, float aPos, int& vSize) {
     if ( !plane ) {
        plane = new ClipPlane;
        plane->type = PlaneType;
    }
     Vertex* v = plane->mesh->vertex;
     vSize = plane->mesh->size*3;
     vertices = v;

     return vertices;
} 
```

并将其导出为 c++`Some_API Vertex* GetVertices(Vertex*, float, int &);`

在 C# 方面：

```
[DllImport("some.dll", CallingConvention = CallingConvention.Winapi)]
        public static extern IntPtr GetVertices(Vertex[] vertices, float aPos, ref int vSize); 
```

并称它为：

```
GetMeshSize(x_value, ref vSize);
            Vertex[] vertices = new Vertex[vSize];
            GetVertices(vertices, x_value, ref vSize); 
```

暂时忘记 vSize 和 x_value。我的问题是我无法在 c# 中获取顶点的值，我只想知道如何在 c# 中编组 struct Vertex 的数组。请注意，我对元帅一无所知。

# iphone - TableView 单元格 0 索引错误

> ID：13757917
> 
> 赞同：1
> 
> 时间：2012-12-07T06:15:07.123
> 
> 标签：iphone, uitableview, button

我在索引为 0 的 UITableViewCell 上有四个按钮。我为 0、1、2、3 之类的按钮设置了标签。当我在 0 标签的按钮上将 selected 属性设置为 NO 时，它显示以下错误：

```
-[UITableView set Selected:]: unrecognized selector sent to instance 
```

但是其他按钮没有错误：

代码在这里：

```
 UIButton *button1 = (UIButton *)[tableView viewWithTag:0];
    [button1 setSelected:NO];
    UIButton *button2 = (UIButton *)[tableView viewWithTag:2];
    [button2 setSelected:NO];
    UIButton *button3 = (UIButton *)[tableView viewWithTag:3];
    [button3 setSelected:NO];
    [button1 setBackgroundColor:[UIColor whiteColor]];
    [button2 setBackgroundColor:[UIColor whiteColor]];
    [button3 setBackgroundColor:[UIColor whiteColor]]; 
```

编辑代码：

```
- (IBAction)click:(id)sender
{
     UIButton *theButton = (UIButton *)sender;
    UITableViewCell *clickedCell = (UITableViewCell *)[[sender superview] superview];
    NSIndexPath *clickedButtonPath = [tableView indexPathForCell:clickedCell];
     NSLog(@"hi...%d",clickedButtonPath.row);
    if(theButton.tag==0)
    {
        theButton.selected=YES;
        [theButton setBackgroundColor:[UIColor redColor]];
         UIButton *button1 = (UIButton *)[clickedCell viewWithTag:1];
        [button1 setSelected:NO];
        UIButton *button2 = (UIButton *)[clickedCell viewWithTag:2];
        [button2 setSelected:NO];
        UIButton *button3 = (UIButton *)[clickedCell viewWithTag:3];
        [button3 setSelected:NO];
        [button1 setBackgroundColor:[UIColor whiteColor]];
        [button2 setBackgroundColor:[UIColor whiteColor]];
        [button3 setBackgroundColor:[UIColor whiteColor]];

    }
    else if(theButton.tag==1)
    {
        theButton.selected=YES;
        [theButton setBackgroundColor:[UIColor redColor]];
        UIButton *button1 = (UIButton *)[clickedCell viewWithTag:0];
        [button1 setSelected:NO];
        UIButton *button2 = (UIButton *)[clickedCell viewWithTag:2];
        [button2 setSelected:NO];
        UIButton *button3 = (UIButton *)[clickedCell viewWithTag:3];
        [button3 setSelected:NO];
        [button1 setBackgroundColor:[UIColor whiteColor]];
        [button2 setBackgroundColor:[UIColor whiteColor]];
        [button3 setBackgroundColor:[UIColor whiteColor]];
    }
    else if(theButton.tag==2)
    {
        theButton.selected=YES;
        [theButton setBackgroundColor:[UIColor redColor]];
        UIButton *button1 = (UIButton *)[clickedCell viewWithTag:0];
        [button1 setSelected:NO];
        UIButton *button2 = (UIButton *)[clickedCell viewWithTag:1];
        [button2 setSelected:NO];
        UIButton *button3 = (UIButton *)[clickedCell viewWithTag:3];
        [button3 setSelected:NO];
        [button1 setBackgroundColor:[UIColor whiteColor]];
        [button2 setBackgroundColor:[UIColor whiteColor]];
        [button3 setBackgroundColor:[UIColor whiteColor]];
    }

    else if(theButton.tag==3)
    {
        theButton.selected=YES;
        [theButton setBackgroundColor:[UIColor redColor]];
        UIButton *button1 = (UIButton *)[clickedCell viewWithTag:0];
        [button1 setSelected:NO];
        UIButton *button2 = (UIButton *)[clickedCell viewWithTag:2];
        [button2 setSelected:NO];
        UIButton *button3 = (UIButton *)[clickedCell viewWithTag:1];
        [button3 setSelected:NO];
        [button1 setBackgroundColor:[UIColor whiteColor]];
        [button2 setBackgroundColor:[UIColor whiteColor]];
        [button3 setBackgroundColor:[UIColor whiteColor]];
    }
} 
```

错误：

```
[UITableViewCellContentView setSelected():] unrecognized selector sent to instance 0x6828f20 
```

完整代码：

```
- (UITableViewCell *)tableView:(UITableView *)tablView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";
    subviewArray=[[NSMutableArray alloc]init];

    UITableViewCell *cell = [tablView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    for(UIView *eachView in [cell.contentView subviews])
        [eachView removeFromSuperview];

    //cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    [cell.contentView setBackgroundColor:[[[UIColor alloc]initWithRed:187.0/255.0 green:184.0/255.0 blue:229.0/255.0 alpha:1] autorelease]];
   // [cell setUserInteractionEnabled:NO];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    if(indexPath.row==0)
    {
        UILabel *lbldoorwidth=[[UILabel alloc]init];
        [lbldoorwidth setText:@"Door Width"];
        [lbldoorwidth setBackgroundColor:[UIColor clearColor]];
        [lbldoorwidth setTextColor:[UIColor blackColor]];
        [lbldoorwidth setFrame:CGRectMake(100, 0, 200, 50)];
        UIView *underline=[[UIView alloc]init];
        [underline setBackgroundColor:[UIColor blackColor]];
        [underline setFrame:CGRectMake(100,40,88, 2)];

        UIButton *option1=[UIButton buttonWithType:UIButtonTypeCustom];
        [option1 setFrame:CGRectMake(8,50,20,20)];
        [option1 setTag:0];
        [option1 setUserInteractionEnabled:YES];
        [option1 setBackgroundColor:[UIColor whiteColor]];
        [option1 addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside];

        // UIImage *img1 = [UIImage imageNamed:@"radio-off.png"];
        //[option1 setImage:img1 forState:UIControlStateNormal];
        // UIImage *img = [UIImage imageNamed:@"radio-on.png"];
        //[option1 setImage:img forState:UIControlStateSelected];

        UILabel *option1Label=[[UILabel alloc]init];
        [option1Label setFrame:CGRectMake(38,45,30,30)];
        [option1Label setText:@"30\""];
        [option1Label setBackgroundColor:[UIColor clearColor]];

        UIButton *option2=[UIButton buttonWithType:UIButtonTypeCustom];
        [option2 setFrame:CGRectMake(78,50,20,20)];
        [option2 setTag:1];
        [option2 setUserInteractionEnabled:YES];
        [option2 setBackgroundColor:[UIColor whiteColor]];
        [option2 addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside];

        UILabel *option2Label=[[UILabel alloc]init];
        [option2Label setFrame:CGRectMake(108,45,30,30)];
        [option2Label setText:@"32\""];
        [option2Label setBackgroundColor:[UIColor clearColor]];

        UIButton *option3=[UIButton buttonWithType:UIButtonTypeCustom];
        [option3 setFrame:CGRectMake(148,50,20,20)];
        [option3 setTag:2];
        [option3 setUserInteractionEnabled:YES];
        [option3 setBackgroundColor:[UIColor whiteColor]];
        [option3 addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside];

        UILabel *option3Label=[[UILabel alloc]init];
        [option3Label setFrame:CGRectMake(178,45,30,30)];
        [option3Label setText:@"34\""];
        [option3Label setBackgroundColor:[UIColor clearColor]];

        UIButton *option4=[UIButton buttonWithType:UIButtonTypeCustom];
        [option4 setFrame:CGRectMake(218,50,20,20)];
        [option4 setTag:3];
        [option4 setUserInteractionEnabled:YES];
        [option4 setBackgroundColor:[UIColor whiteColor]];
        [option4 addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside];

        UILabel *option4Label=[[UILabel alloc]init];
        [option4Label setFrame:CGRectMake(248,45,30,30)];
        [option4Label setText:@"36\""];
        [option4Label setBackgroundColor:[UIColor clearColor]];

        [cell.contentView addSubview:lbldoorwidth];
        [cell.contentView addSubview:underline];
        [cell.contentView addSubview:option1];
        [cell.contentView addSubview:option1Label];
        [cell.contentView addSubview:option2];
        [cell.contentView addSubview:option2Label];
        [cell.contentView addSubview:option3];
        [cell.contentView addSubview:option3Label];
        [cell.contentView addSubview:option4];
        [cell.contentView addSubview:option4Label];

}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:16:38.013

像这样访问您的按钮

```
 UIButton *button1 = (UIButton *)[cell viewWithTag:0];  

UITableViewCell *clickedCell = (UITableViewCell *)sender; 
```

# algorithm - neo4j - 构建 XML 的遍历结构

> ID：13757919
> 
> 赞同：0
> 
> 时间：2012-12-07T06:15:28.340
> 
> 标签：algorithm, graph, neo4j, graph-theory, graph-algorithm

我有一个由活动目录生成的组织的 neo4j 图。

唯一存在的关系是 MANAGE，节点 1 是根节点（组织的顶部），所有其他成员最终通过 MANAGE 关系向节点 1 报告。

我还没有接触过 Neo4j 遍历，但我想提供一个以逗号分隔的用户名列表，并生成一个由以下内容组成的树结构

根节点 <- 子节点到 LCA 和 LCA <- 子节点

我已经可以在 Neo4j 中获得 LCA，我只需要弄清楚从那里去哪里。

```
 String users = "tom,sarah,liam";
    List<Node> nodeSet = new ArrayList<Node>();
    String usernames[] = users.split(",");
    for (String user : usernames) { 
        Node found = nodeIndex.get("username", user).getSingle();
        if (found != null) nodeSet.add(found);
    }

    Node lca = getLCA(nodeSet);

private Node getLCA(List<Node> nodes) { 
    RelationshipExpander expander = Traversal.expanderForTypes(RelTypes.MANAGE, Direction.INCOMING);

    return AncestorsUtil.lowestCommonAncestor(nodes, expander);
} 
```

因此，如果我提供列表“sarah,tom,liam”，将创建以下结构：

```
 Root
           |
           | 
           |
           John
           |
           Jane
         /      \ 
   Sarah       Jerome
               /    \ 
             Liam    Tom 
```

我想像这样在 XML 或 JSON 中执行此操作：（下面的 XML 示例）

```
<user>
    <name>Root</name>
    <children>
        <user>
            <name>John</name>
            <children>
                <user>
                    <name>Jane</name>
                    <children>
                        <user>
                            <name>Sarah</name>
                        </user>
                        <user>
                            <name>Jerome</name>
                            <children>
                                        <user>
                                            <name>Liam</name>
                                        </user>
                                <user>
                                    <name>Tom</name>
                                </user>
                            </children>
                        </user>
                    </children>
                </user>
            </children>
        </user>
    </children>
</user> 
```

有人可以指出我从哪里开始的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:31:58.743

类似的东西：[http ://console.neo4j.org/r/canhtg](http://console.neo4j.org/r/canhtg)

```
start n=node(0) 
match path=n-[:MANAGE*]-m 
with nodes(path) as nodes, length(path) as l 
return head(nodes), head(tail(nodes)),tail(tail(nodes)),l 
```

它的作用是：

*   您将起始节点的路径匹配到任意长度，最后触及（子）图中的所有节点
*   您将路径的节点聚合到一个名为节点的集合中
*   您分别返回该集合中的第一个、第二个、第三个等元素

# java - 骆驼 cxf 代理不适用于 http 端点

> ID：13757921
> 
> 赞同：4
> 
> 时间：2012-12-07T06:15:33.273
> 
> 标签：java, http, cxf, apache-camel

我的要求是有一个代理网络服务，它将接收来自客户端的请求，然后通过骆驼路由，丰富它并将其转发到其他客户端位置的真实网络服务，获得响应并将其发送回原始请求者。

我基本上看了骆驼分布中的camel-cxf-proxy示例（http://camel.apache.org/cxf-proxy-example.html）和camel-cxf-example。它与camel-cxf-proxy完全相似并且出现了这条路线

```
<from uri="cxf:bean:soapMessageEndpoint?dataFormat=MESSAGE" />
<camel:convertBodyTo type="java.lang.String"></camel:convertBodyTo>
<to ref="XService"></to> 
```

端点在哪里

```
<endpoint id="XService" uri="http://xx.xx.xxx.xx:8080/X_Service" />

<cxf:cxfEndpoint id="soapMessageEndpoint" address="http://localhost:8181/ProviderInformationDirectoryService"  wsdlURL="wsdl/HPD_ProviderInformationDirectory.wsdl" endpointName="s:ProviderInformationDirectory_Port_Soap" serviceName="s:ProviderInformationDirectory_Service" xmlns:s="urn:ihe:iti:hpd:2010"/> 
```

如您所见，第二个服务是http端点。首先是camel-cxf代理。我只有wsdl，此时不需要impl。数据格式是MESSAGE，因为我需要发送整个soap信封到第二个 Web 服务，并且客户端的请求中有一些有用的标头。但是当我使用示例肥皂信封运行这条路线时，它总是会出现 500 响应。我认为发送到真实 Web 服务的消息不是它所期望的。

我尝试跟踪骆驼路线，但没有显示太多。我希望它会显示对 http 端点的真实请求。我尝试配置拦截器，但也没有用。跟踪只显示以下

```
 Failed delivery for (MessageId: ID-ALHCAN0437-63941-1354828653539-45-2 on ExchangeId: ID-ALHCAN0437-63941-1354828653539-45-1). Exhausted after delivery attempt: 1 caught: org.apache.camel.component.http.HttpOperationFailedException: HTTP operation failed invoking http://X:8080/X_Service with statusCode: 500 
```

我还尝试了以下似乎有效的方法。

```
<from uri="cxf:bean:soapMessageEndpoint?dataFormat=MESSAGE" />
<camel:convertBodyTo type="java.lang.String"></camel:convertBodyTo>
<to uri="bean:callRemoteWS"></to> 
```

callRemoteWS (callRemoteMethod) 将soapenvelope 作为字符串获取，并向上面的端点发出HTTPPost 请求，返回响应。

```
public String callRemoteMethod(String request) throws Exception{

            HttpClient client = new HttpClient();

            BufferedReader br = null;

            PostMethod method = new PostMethod("http://x.x.x.x:8080/X_Service");

            RequestEntity entity =new StringRequestEntity(request); 

            method.setRequestEntity(entity);

            try{
              int returnCode = client.executeMethod(method);

              if (returnCode != HttpStatus.SC_OK) {
                  System.err.println("Method failed: " + method.getStatusLine());
                  return "Error";
                }

                // Read the response body.
                byte[] responseBody = method.getResponseBody();

                System.out.println(new String(responseBody));

                // Deal with the response.
                // Use caution: ensure correct character encoding and is not binary data
               return new String(responseBody);
            } finally {
              method.releaseConnection();
              if(br != null) try { br.close(); } catch (Exception fe) {}
            }

          } 
```

我很困惑为什么带有http webservice的简单camel-cxf代理不起作用而第二个起作用（它应该并且确实有效：P）。我的代码是否正常。对我来说似乎不对。我很确定一些交流属性设置错误或发送到真实Web服务的内容错误。从代理获取的内容用于在第二个路由中进行Httppost调用。因此从代理获取的内容不能错误。当它从交换获取并发送到真实Web服务时出了点问题。任何人都可以对此有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:48:16.067

我认为这是我的一个愚蠢的错误。Soap 操作标头有不同的操作，有效负载用于不同的方法。我使用有效负载调用了错误的操作

# iphone - 如何在iphone应用程序中随机移动一组图像

> ID：13757925
> 
> 赞同：1
> 
> 时间：2012-12-07T06:16:16.400
> 
> 标签：iphone, ios, animation, uiimageview

如何在 iPhone 应用程序中随机移动一组图像。

波纹管代码用于移动一张图像。我必须使用一组图像。

```
- (void)moveImage:(UIImageView *)image duration:(NSTimeInterval)duration
        curve:(int)curve x:(CGFloat)x y:(CGFloat)y
{
    [UIView beginAnimations:nil context:NULL];

    [UIView setAnimationDuration:duration];

    [UIView setAnimationCurve:curve];

    [UIView setAnimationBeginsFromCurrentState:YES];

    // The transform matrix
    CGAffineTransform transform = CGAffineTransformMakeTranslation(x, y);
    image.transform = transform;

    // Commit the changes
    [UIView commitAnimations];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImageView *imageToMove =
    [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"fish.png"]];

    imageToMove.frame = CGRectMake(70, 120, 100, 100);

    [self.view addSubview:imageToMove];

    [self moveImage:imageToMove duration:1.0
              curve:UIViewAnimationCurveLinear x:0.0 y:110.0];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:52:06.937

您可以使用它，它可能会帮助您：

```
NSArray *animationArray=[NSArray arrayWithObjects:
                                  [UIImage imageNamed:@"img1.png"],
                                      [UIImage imageNamed:@"img2.png"],
                                      [UIImage imageNamed:@"img3.png"],
                                   [UIImage imageNamed:@"img4.png"],
                    nil];
UIImageView *animationView=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0,320, 460)];
    animationView.backgroundColor=[UIColor purpleColor];
    animationView.animationImages=animationArray;
    animationView.animationDuration=1.5;
animationView.animationRepeatCount=0;
    [animationView startAnimating]; 
    [self.view addSubview:animationView];       
    [animationView release]; 
```

这只是一个概念代码，因此请根据您的需要进行更改。

# session - 快速连接会话到期未按预期工作

> ID：13757929
> 
> 赞同：3
> 
> 时间：2012-12-07T06:16:34.597
> 
> 标签：session, express, connect

在使用 express.js 开发的 Web 应用程序中，当用户超过 10 分钟未处于活动状态时，会出现会话过期问题。我使用 connect-couchdb 作为会话存储。

我尝试设置 req.session.cookie.maxAge = 600000。但这会导致会话在登录后 10 分钟过期，而与用户活动无关。我对文档的理解是 req.session.touch() 将由连接中间件自动调用，因此 maxAge （和到期日期）应该被刷新，因此它会再持续 10 分钟，但它没有发生！

我还尝试在每个请求上将 maxAge 设置为 600000 并调用 req.session.save() 但即使这样也没有效果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T04:44:41.013

你没有做错任何事——这是 Connect 中的一个错误。会话 cookie 会在服务器中更新，但不会推送到客户端，因此客户端会继续尝试使用旧 cookie，它会比您想要的更早过期。

更多细节和讨论[在这里](https://github.com/senchalabs/connect/issues/670)。

# php - 更改 mySQL DATE 函数的输出

> ID：13757930
> 
> 赞同：0
> 
> 时间：2012-12-07T06:16:35.270
> 
> 标签：php, html, mysql, database

我正在一个显示来自 mySQL 数据库的日期的网站上工作。我目前在数据库中有这些列：`id`, `title`, `date_start`, `date_stop`, `time_start`, `time_stop`, `image`, 和`hyperlink`.

我希望`date_start`并`date_end`显示为 12 月 24 日，而不是 2012-12-24。

我目前的代码是这样的：

```
<html>
<style>
html{
font-family: arial;
}
</style>
<h1>Local Events</h1>
<?php
//mysql connection
mysql_connect('localhost', 'root', '') OR DIE ("Unable to connect to database! Please try again later.");

//selecting the table
mysql_select_db('local');

//query
$query = mysql_query("SELECT * FROM events3 WHERE date_end >= CURDATE() ORDER BY date_start LIMIT 5;");

//http://stackoverflow.com/questions/2597098/get-the-last-n-rows-in-the-database-in-order
//SELECT * FROM events ORDER BY date_start DESC LIMIT 5 ::Works but still need to reverse order
//SELECT * FROM events ORDER BY id DESC LIMIT 5;
//SELECT * FROM events ORDER BY id DESC LIMIT 5;
//WHERE year = '2012'

//fetch results

        WHILE($rows= mysql_fetch_array($query)):

                $id =                   $rows['id'];   
                $title =                $rows['title'];

                $date_start =       $rows['date_start'];
                $date_end =             $rows['date_end'];

                $time_start =           $rows['time_start'];
                $time_end =             $rows['time_end'];

                $location =             $rows['location'];
                $description =          $rows['description'];
                $image =                $rows['image'];
                $hyperlink =            $rows['hyperlink'];                    
?>
<?php
        //ID/ Title Display
        echo "<b>ID:</b>&nbsp;&nbsp;&nbsp;";                                    echo "$id<br>";
        echo "<b>Title:</b>&nbsp;&nbsp;&nbsp;";                                 echo "$title<br>";

        //Date Display
        echo "<b>Date Start:</b>&nbsp;&nbsp;&nbsp;";                   
        echo "$date_start"; echo '&nbsp;-&nbsp';         echo "$date_end<br>";

        //Time Display
        echo "<b>Time Frame:</b>&nbsp;&nbsp;&nbsp;";                   
        echo date('g:i a',strtotime($time_start)); echo"&nbsp;-&nbsp;"; echo date('g:i a',strtotime($time_end)); echo"<br>";
        //      echo "$time_start";     echo "&nbsp;-&nbsp;";           echo "$time_end<br>";

        echo "<b>Location:</b>&nbsp;&nbsp;&nbsp;";              echo "$location<br>";
        echo "<b>Description:</b>&nbsp;&nbsp;&nbsp;";   echo "$description<br><br><br>";

        endwhile;
// SELECT * FROM events ORDER BY id DESC LIMIT 10;
?>

</html> 
```

该代码使网站看起来像：

```
ID:   8
Title:   Christmas
Date Start:   2012-12-44 - 2012-12-25
Time Frame:   9:00 am - 1:00 pm
Location:   Everywhere
Description:   Test event 
```

我希望日期开始区域为 12 月 24 日至 25 日。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:21:21.243

使用此查询

```
SELECT 
    id, title , 
    DATE_FORMAT(date_start, '%M/%d') as `Date Start`,
    other_columns
FROM
    mytable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:27:11.363

```
SELECT CONCAT(DATE_FORMAT(date_start, '%M %d'), ' - ', DAY(date_end)) newDate
FROM table1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/bfa3d/3)

*后续问题：如果你有这个日期怎么样？`2012-12-25 until 2013-02-15`?*

# java - 从文本文件导入对话并将其显示在绘图面板上 - Java

> ID：13757940
> 
> 赞同：0
> 
> 时间：2012-12-07T06:17:07.820
> 
> 标签：java

我遇到了一些问题，我试图缩短我的游戏代码，我想到了从文本文件中导入所有对话而不是将其硬编码到代码本身中的想法。但是，如果每个屏幕只有一行要显示，但有些屏幕有不止一行，它会起作用

```
if (screenCount==1)
   g.drawString("Hi there!", 25,515);
if (screenCount==2)
   g.drawString("Welcome to the world of Pok\u00E9mon!", 25,515);
if (screenCount==3){
   g.drawString("My name is Professor BLANK!", 25,515);
   g.drawString("Everyone calls me the Pok\u00E9mon Professor!", 25,540);
  } 
```

正如您在屏幕一和二中看到的那样，我可以轻松地将对话放入文本文件中，如下所示：

```
1:Hi there!

2:Welcome to the world of Pok\u00E9mon! 
```

但是对于第三个屏幕，我无法弄清楚如何导入它/将其写入文本文件并导入它

```
3:My name is Professor Shinwa!
  Everyone calls me the Pok\u00E9mon Professor! 
```

更多信息：游戏一次只显示两条线

```
 g.drawString("", 25,515); //the first line x and y values
   g.drawString("", 25,540); // the second line x and y values 
```

我有大约 37 个屏幕，大约一半或更多是两行。感谢您的帮助，非常感谢：D

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T06:23:09.900

您可以使用[JavaDocs](http://docs.oracle.com/javase/tutorial/java/data/characters.html)`\n`中指出的 String 中的转义序列：

> 此时在文本中插入换行符。

您的字符串可能如下所示：

```
3:My name is Professor Shinwa!\nEveryone calls me the Pok\u00E9mon Professor! 
```

**但**我认为更好的解决方案是将每个屏幕文本放在单独的文本文件中。然后，您可以读取该文件，直到没有剩余的行，然后将它们打印在屏幕上。文本文件应该用 命名`screen#`，例如 screen1, screen2 ... 所以你的代码中不需要这么多的`if-blocks`。只需将屏幕与您当前的屏幕编号连接并阅读此文件，完成。如果您需要与用户响应的对话怎么办？你会如何处理这个案子？

# actionscript-3 - 是否有可能增加 Flex 4 中火花标签截断提示的字体大小？

> ID：13757941
> 
> 赞同：2
> 
> 时间：2012-12-07T06:17:17.320
> 
> 标签：actionscript-3, apache-flex, label, flash-builder, flex-spark

我在我的项目中使用 Spark Label (Flex 4.6 SDK) 在表单上显示一些文本，如果文本不适合一行，则会显示截断提示（使用 maxDisplayedLines="1" 和 showTruncationTip="true" 属性）。但是提示中的字体非常小，我想增加它，但实际上我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:59:03.710

有一个更简单的答案。看到这个链接

[http://blog.flexexamples.com/2008/05/22/changeing-the-background-color-of-an-error-tip-in-flex/](http://blog.flexexamples.com/2008/05/22/changing-the-background-color-of-an-error-tip-in-flex/)

并观察他们如何使用`<mx:Style>`标签来修改`.errorTip`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:54:16.973

好的，所以这是可行的，但一开始并不那么容易看到。

当鼠标悬停在 isTruncated 为真时，showTruncationTip 告诉标签创建一个工具提示。因此，有了这些知识，我们就可以监听关于正在创建的工具提示的触发事件，并对工具提示进行一些替换或样式化。

```
private var myTip:IToolTip;

// somewhere in your code
label.addEventListener(ToolTipEvent.TOOL_TIP_SHOWN, createCustomTip);

private function createCustomTip(event:ToolTipEvent):void {
    myTip = event.toolTip;
    // do stuff to the existing toolTip or replace it with a custom one
} 
```

这里有关于如何创建和替换自定义工具提示的完整文档[创建自定义工具提示](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf60d65-7ff6.html)

# javascript - 从父级访问 iframe 的变量

> ID：13757943
> 
> 赞同：65
> 
> 时间：2012-12-07T06:17:23.567
> 
> 标签：javascript, jquery, html, css

iframe 脚本

```
<script type="text/javascript" >
var a=5;
</script> 
```

父窗口脚本

```
<script type="text/javascript" >
function close()
{
var check=document.getElementById("iframeid").contentDocument.a;
alert(check)
}
</script> 
```

我想从父级访问在 iframe 中定义的变量。但是上面的代码不能正常工作，任何人都可以给出实现这个的想法。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-07T06:44:56.037

使用`contentWindow`代替`contentDocument`对我有用：

```
var check = document.getElementById("iframeid").contentWindow.a; 
```

此外，确保域匹配并且您正在使用网络服务器进行测试（我在从文件系统进行测试时收到协议警告）。

**更新**：你几乎肯定会更好地使用`postMessage`API。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-08-22T22:05:37.713

对我来说一直可靠的一种方法是 iFrame 在首次加载时为其父级提供对其自己窗口的引用。然后，父级可以通过该引用访问所有变量。这确实需要在 iFrame 之前加载父级，但对我来说通常是这种情况。

所以在父

```
var iFrameWin; 
```

然后在 iFrame 加载并稳定下来后的某个时间点

```
parent.iFrameWin = window;  //parent now has a ref to the iframe's window 
```

然后，在父级中，当它想要来自 iFrame 的全局 var 内容时

```
alert(iFrameWin.ivar);  // shows value if the global 'ivar' in the iFrame 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-07T06:50:50.623

iframe 脚本：

```
var a = 5;
window.parent.postMessage(['varA', a], '*'); // put this in some sort of function, ready, or whatever - you can call it multiple times if you need to as the code in the parent is an eventListener 
```

父窗口脚本：

```
var b;
// you might want to write these into if statements to make sure that e.data[0] is varA if you have multiple messages coming across
if (typeof window.addEventListener != 'undefined') {
    window.addEventListener('message', function(e) {
        b = e.data[1];
    }, false);
} else if (typeof window.attachEvent != 'undefined') { // this part is for IE8
    window.attachEvent('onmessage', function(e) {
        b = e.data; // you'll probably have to play around with this part as I can't remember exactly how it comes across in IE8 -- i think it will involve slice() iirc
    });
} 
```

我对这个主题的大部分知识来自[Ben Vinegar 关于无缝 iFrames 的演讲](http://benvinegar.github.com/seamless-talk/#/33)

这是处理这些东西的跨域“好的”方法。我确信存在一些安全漏洞，就像网络上的任何东西一样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-07T07:15:51.497

看看这是否适合你：

我创建了这个`parent.html`页面并在其中放置了一个 iframe，其中包含一个文本输入，它将显示从 iframe 窗口传递的值：

```
 <html>
     <head>
     <title>IFrame Example</title>
     <script language="javascript">
          function hello(string){
               var name=string
               document.getElementById('myAnchor').value=name;
           }
     </script>
     </head>
     <body>
         <iframe namne="iframe" id="iframe_id" src="inputForm.html" height="150" >
         </iframe>
         Name: <input type="text" id="myAnchor" >
         </body>
</html> 
```

这个`iframe content`页面：

```
<html>
   <head>
   <title>IFrame Child Example</title>
   </head>
   <body>
   <form name="frm2" >
      <h1><font color="#000099">Input Form</font></h1>
      <p>Name : </p><input type="text" name="resp" id="input" value=""/>
      <input type="button" onclick="parent.hello(this.form.resp.value);" value="Submit" />
   </form>
 </body>
</html> 
```

单击按钮我在父窗口中获取值。

如果您对此有所了解，请与它一起玩。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T06:20:31.120

`document.getElementById('ID_OF_IFRAME').document.getElementById('f1')`

请注意，跨域限制仍然适用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-09T02:13:37.390

这就是 SharePoint 在将参数值从父窗口传递到 iframe 时的做法。这很简单，但它有效。

```
<html>
<body>
  <iframe id="iframe1"></iframe>
  <script type="text/javascript">
    var ifr = window.document.getElementById("iframe1");
    ifr.dialogArgs = "Hello from the other side.";
    ifr.src = "iframeContent.html"
  </script>
</body>
</html> 
```

在**iframeContent.html**里面：

```
<html>
<body>
    <input type="button" value="Click Me!" onclick="alert(window.frameElement.dialogArgs);" />
</body>
</html> 
```

另一种方法（在 iframe 文档修改其值后从父窗口访问**ifr.dialogArgs ）也可以。**

# facebook - 如何使用 fql 过滤 null？

> ID：13757945
> 
> 赞同：0
> 
> 时间：2012-12-07T06:17:53.343
> 
> 标签：facebook, facebook-fql

```
select name, birthday 
from user 
where uid in (SELECT uid2 FROM friend WHERE uid1 = me()) 
    and birthday != null; 
```

结果是

```
{
  "error": {
    "message": "(#602) NULL is not a member of the user table.", 
    "type": "OAuthException", 
    "code": 602
  }
} 
```

我可以以某种方式过滤掉空值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T21:09:37.217

这应该会消除它在一年中的几个月中用于获取常见字母的所有空值

`SELECT name, birthday, email, uid FROM user WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me()) AND (strpos(lower(birthday),"a") >=0 OR strpos(lower(birthday),"e") >=0 OR strpos(lower(birthday),"u") >=0) ORDER BY birthday_date`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T08:04:44.187

无需使用 str* 函数...只需使用 'where *field* ' 排除空值，或使用 'where not *field* ' 排除非空值。对于这个特定的例子：

从生日和 uid 所在的用户中选择姓名、生日（SELECT uid2 FROM friend WHERE uid1 = me()）

# c# - 我试图捕捉刷卡的输入，但我被困在使用 C# Windows 窗体

> ID：13757948
> 
> 赞同：0
> 
> 时间：2012-12-07T06:18:05.707
> 
> 标签：c#, winforms, events, credit-card

我用的是测试卡，这是刷卡后的输出，没问题

![在此处输入图像描述](../Images/719ee745a7c8b3eeb620440c51f7c772.png)

但是当我试图通过提示它到消息框来获取刷卡的数据时，这将是输出

![在此处输入图像描述](../Images/de7863bf3c506bd067640421e0ae8550.png)

我怎样才能解决这个问题？我期望输出与第一张图像相同，它也将是消息框的消息

这是我的代码：

```
private void CreditCardProcessor_Load(object sender, EventArgs e)
        {
            KeyPreview = true;
            KeyPress += CreditCardProcessor_KeyPress;
        }
    private bool inputToLabel = true;
        private void CreditCardProcessor_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (inputToLabel)
            {
                label13.Text = label13.Text + e.KeyChar;
                e.Handled = true;

            }
            else
            {
                e.Handled = false;
            }

            MessageBox.Show(label13.Text);
        } 
```

简而言之，我想在刷卡后运行一个函数，并使用它的数据在我的函数中使用。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:04:18.417

您需要更具体地回答您的问题。从外观上看，您的卡片扫描仪正在通过键盘缓冲区进行操作。（许多卡片扫描仪以这种方式操作）这意味着条带的每个字符都作为一个字符接收，这就是您可以捕获它的原因`OnKeyPress`。

如果您想知道为什么一次只能看到一个字符，那正是因为您在收到每个字符时都会弹出一个消息框。如果您想知道何时可以使用该代码调用包含整个卡信息的函数，您需要的是：

```
private bool inputToLabel = true;
private StringBuilder cardData = new StringBuilder();
private void CreditCardProcessor_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!inputToLabel)
            return;

        if (e.KeyChar == '\r')
        {
            MessageBox.Show(cardData.ToString()); // Call your method here.
        }
        else
        {
            cardData.Append(e.KeyChar);
            //label13.Text = label13.Text + e.KeyChar;
        }
        e.Handled = true;
    } 
```

警告：这是假设读卡器库配置为使用回车终止读卡。(\r) 您需要阅读或尝试设置它是否可以/确实发送终止字符以了解卡读取何时完成。如果您无法查看输出字符串的模式。（即当捕获的字符串以“??”结尾时）虽然这不是最佳的。

# iphone - 导入一个 Image 并用 COCOS2D 中已有的 Image 替换它

> ID：13757950
> 
> 赞同：3
> 
> 时间：2012-12-07T06:18:16.600
> 
> 标签：iphone, ios, cocos2d-iphone

我是 cocos2d 的新手，我正在使用 cocos2d 制作游戏。

我导入一个 png 图像并将其用作精灵。它工作得很好。但是当我用另一个同名的图像替换图像并在模拟器上运行它时。它工作得很好。但是当我在我的 iPhone 上运行它进行测试时，它会显示旧图像（不是替换图像）。虽然我已经删除了它。

谁能告诉我我将如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:05:49.217

将图像的名称更改为另一个，重建项目：它应该引发错误并在内部清除所有指向图像的链接。重命名图像并编译。希望 iPhone 会向您展示新图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:21:11.057

尝试从 xcode 中清理应用程序，然后重新安装。让我知道它是否不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T10:08:26.257

建造前清洁项目（按`Shift+Command+K`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T06:54:23.640

清理项目，转到项目然后清理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T14:29:07.903

1.  确保旧图像完全从项目文件夹的内部和附近的任何地方消失。（基本上把它扔进垃圾桶然后清空）。
2.  重新启动 Xcode。
3.  从您的设备上卸载该应用程序。
4.  重新启动您的设备。
5.  像其他人所说的那样清理你的 Xcode 项目。
6.  尝试运行您的应用程序。

希望所有这些（可能是过多的）步骤都能为您做点什么。

# c - C中的字符串比较器

> ID：13757952
> 
> 赞同：0
> 
> 时间：2012-12-07T06:18:19.813
> 
> 标签：c, comparator, cstring, qsort

好的，所以我需要在 C 中处理几个相当长的字符串。所以我对自己说“为什么，你最好使用那个方便的花花公子 qsort 函数！最好给自己写一个 string_comarator ！”

所以我当然愿意，她在这里：

```
int string_comparator(const void* el1, const void* el2) {

char* x = (char*) el1;
char* y = (char*) el2;

int str_len = strlen(x);
int i = 0;
for (; i < str_len; i++) {

    //when there are non-equal chars
    if (x[i] != y[i]) {
        break;
    }
}

return x[i] - y[i];
} 
```

所以当然我将我方便的花花公子 string_comarator 函数传递给 C qsort 函数，如下所示：

```
qsort(list.words, list.num_words, sizeof(char*), string_comparator); 
```

list 是一个结构，它包含一个 char** (words) 和 ints，它指代它所持有的单词数 (例如 num_words)

现在我遇到的问题是我的列表没有像我希望的那样按字母顺序排序！我在比较器中放了一堆 printf 语句，它每次都打印出字符串的垃圾值，所以我很确定这是问题所在。但是为什么会出现这个问题？？我以前使用过 qsort （从不对单词进行排序..只是对字符进行排序），据我所知，这应该可以工作......这里出了什么问题？

我很感激任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:19:42.620

这是使用时的常见错误`qsort()`。以下是更正：

```
char *x = *(char **) el1;
char *y = *(char **) el2; 
```

因为`list.words`有 type `char **`，而不是 type `char *`，对吧？

## 另一个例子`qsort()`

`int`以下是对with数组进行排序的方法`qsort()`：

```
int int_comparator(const void *el1, const void *el2)
{
    int x = *(int *) el1;
    int y = *(int *) el2;
    return x - y;
}

void sort_ints(int *a, size_t n)
{
    // these two lines are both "correct"
    // the second line is more "obviously correct"

    // qsort(a, n, sizeof(int), int_comparator);
    qsort(a, n, sizeof(*a), int_comparator);
} 
```

现在，如果您通过并替换`int`为`char *`，则必须替换`int *`为`char **`。

# php - 无法设置 symfony 项目在 app.php 上出现错误

> ID：13757954
> 
> 赞同：1
> 
> 时间：2012-12-07T06:18:24.733
> 
> 标签：php, symfony

我已经设置了 symfony 的新项目。`app_dev.php/register`工作正常，但是当我切换到`app.php/register`然后出现错误

```
Oops! An Error Occurred

The server returned a "404 Not Found".

Something is broken. Please e-mail us at [email] and let us know what you were doing when 
this error occurred. We will fix it as soon as possible. Sorry for any inconvenience caused. 
```

我也有清除缓存，但仍然收到此错误。请给我解决方案我很着急，因为我的项目已经完成但现在我被困在这里无法在实时服务器上发布它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:34:56.323

如果您通过 app.php 访问它并收到该错误。您应该尝试设置 app.php 文件的调试方式。为此，您更改文件 web/app.php 中的以下行

```
$kernel = new AppKernel('prod', false); 
```

到

```
$kernel = new AppKernel('prod', true); 
```

这样 symfony 会告诉你问题出在哪里，我猜它与路由有关......

# linux - 想要为两个接口之间的 RTP 流量修改/MiTM

> ID：13757958
> 
> 赞同：2
> 
> 时间：2012-12-07T06:18:35.717
> 
> 标签：linux, routing, rtp, iptables, sniffing

我在两个带有两个 NIC 卡的 IP 电话之间运行 linux 机器。eth0 和 eth1 之间的所有流量通道都应该通过 TCP/IP 堆栈。目前，IP 转发在 linux 中启用，流量路由直接在内核级别。如果我使用 IPtables 进行端口转发，我可以在 TCP/IP 堆栈中获取流量，但我不想执行端口转发。每次流量都有不同的端口时，很难再次将端口与其原始端口映射。

是否有任何其他机制，我可以在 tcp/IP 堆栈中获取每个数据包，而无需使用某些路由或创建虚拟接口/环回接口进行端口转发？

# jquery - 在 li 标签内包装锚链接和文本节点（不包括 ul 标签）？

> ID：13757960
> 
> 赞同：0
> 
> 时间：2012-12-07T06:18:39.987
> 
> 标签：jquery

我有这样的事情：

```
<li>
  <a></a>
  "(1)"
  <ul></ul>
</li> 
```

我希望它最终是这样的：

```
<li>
  <span>
    <a></a>
    "(1)"
  </span>
  <ul></ul>
</li> 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:29:13.870

```
$ul = $('li ul');
$('li ul').remove();
$('li').wrapInner('<span>');
$('li').append($ul); 
```

作品。请参阅[http://jsfiddle.net/Lhg32/](http://jsfiddle.net/Lhg32/)（感谢您的评论！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:45:32.050

```
var content = $('li').clone(true),
         ul = content.children('ul').remove();

$('li').html($('<span />').append(content.contents()).append(ul)); 
```

[**小提琴**](http://jsfiddle.net/G3AKg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T18:49:58.730

[http://jsfiddle.net/lamarant/XjQek/](http://jsfiddle.net/lamarant/XjQek/)

**HTML**

```
<ul>
    <li>This is Item 1
        <ul>
            <li>Item 1 Sub 1</li>
            <li>Item 1 Sub 2</li>
            <li>Item 1 Sub 3</li>
        </ul>
    </li>
    <li>This is Item 2
        <ul>
            <li>Item 2 Sub 1</li>
            <li>Item 2 Sub 2</li>
            <li>Item 2 Sub 3</li>
            <li>Item 2 Sub 4</li>
        </ul>
    </li>
</ul> 
```

**Javascript**

```
$('ul li').not('ul ul li').each(function () {
        var $clone = $(this).clone(true);
        var $origUL = $('ul', $(this)).first();
        var $newUL = $('<ul></ul>');
        $newUL.html($origUL.html());
        $clone.children('ul').remove();
        $(this).html('').append($('<span>' + $clone.html().trim() + '</span>')).append($newUL);
    }); 
```

**结果**

```
<ul>
    <li><span>This is Item 1</span>
        <ul>
            <li>Item 1 Sub 1</li>
            <li>Item 1 Sub 2</li>
            <li>Item 1 Sub 3</li>
        </ul>
    </li>
    <li><span>This is Item 2</span>
        <ul>
            <li>Item 2 Sub 1</li>
            <li>Item 2 Sub 2</li>
            <li>Item 2 Sub 3</li>
            <li>Item 2 Sub 4</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-07T06:27:21.937

尝试这个

```
$('li a').before('&lt;span&gt;');
$('li ul').before('&lt;/span&gt;'); 
```

希望这可以帮助！

# python - 从 Maya 场景文件中获取相机列表或渲染全局变量，而无需在 Maya 中打开场景

> ID：13757962
> 
> 赞同：1
> 
> 时间：2012-12-07T06:18:50.530
> 
> 标签：python, maya, autodesk

python是否可以在不打开并获取相机列表或渲染全局设置或对其执行一些操作的情况下读取maya场景文件。我需要这个，以便如果它们是多个场景文件，我不必打开每个 Maya 场景，只需从 python 脚本调整它，如果有人能展示如何开始休息，我将不胜感激，我会自己做......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:36:02.547

它可能，可能只是不实用。Maya ASCII 文件的解析非常简单。Maya 二进制文件没有那么多。讨论这些问题可能为时过早。

第一件事。Maya 确实提供了批处理模式，批处理模式不会用完完整的许可证。它仍然会打开一个完整的 Maya 环境，但没有 GUI。这是注入脚本的完美平台。它并没有真正满足您不打开 Maya 的要求，但它满足了所有其他要求。有几种方法可以使用这种批处理模式。但主要归结为两种通用方法。

方法 1，使用*mayabatch*：mayaXX/bin/ 目录包含一个名为*mayabatch*的命令。您可以简单地从 cmd/shell 批处理文件/shellscript 调用它。这是调用现有脚本的一种极其简单的方法。假设*mayabatch*在您的环境路径中，并且您的脚本在 Maya 脚本路径中。为简单起见，我们假设您的脚本如下所示（demo.py）：

```
import maya.cmds as cmd

def func():
    print cmd.ls()

# we want this to execute on import
func() 
```

现在在 windows 下为一个文件调用它会如下所示：

```
mayabatch -command "python(""import demo"") " -file filename.ma 
```

对当前文件夹文件中的所有 Maya 调用它会很简单：

```
for %i in (*.ma) do mayabatch -command "python(""import demo"") " -file %i 
```

mac 和 Linux 上的引用规则有点不同，但应该很容易找到。冷藏到您的外壳手册。

方法2，使用*mayapy*和standalone：

现在也可以直接用mayapy调用python脚本了。它与 mayabtach 位于同一目录中。如果您在系统路径中包含 Maya 模块，也可以从其他 python 解释器调用 Tough 独立的。现在必须对脚本进行一些更改，以便它执行相同的操作（demo_direct.py）：

```
#init maya
import maya.standalone
maya.standalone.initialize( name='python' )
import maya.cmds as cmd
import glob

def func():
    print cmd.ls(shapes=True)

for file in glob.glob('*.m[ab]'):
    cmd.file( file, o=True )
    func() 
```

使用以下命令调用此表单命令行：

```
mayapy demo_driect.py 
```

这些方法都不会加载 Mayas 图形用户界面。所以你不能调用playblast之类的东西。因为它们依赖于GUI，因此是完整的Maya许可证。没有什么说你不能像上面那样在 GUI 中执行类似的加载循环。

然后是没有实际加载 Maya 的方法。这有点棘手。这样做不一定值得，因为批处理节点非常快，因为它们不会最终加载所有内容。为帧范围解析 Maya ASCII 文件的示例脚本。你可能会发现它很有用。请参阅以下[帖子](http://www.creativecrash.com/forums/python/topics/findout-playrange-from-a-bunch-of-maya-asci-files--2#discussion_post_306288)。对于 Maya 二进制文件，[cgKit](http://cgkit.sourceforge.net/doc2/index.html)中有一个 python 模块可以帮助您读取 Maya 二进制块。不幸的是，它对理解数据没有任何帮助。

# javascript - 使用 JavaScript 在视口中将 DIV 居中

> ID：13757977
> 
> 赞同：2
> 
> 时间：2012-12-07T06:19:51.367
> 
> 标签：javascript, css

我正在尝试使用以下代码将 DIV 在屏幕中居中，但它对我不起作用。有人请建议我让它工作

```
 var hnw = {};
            hnw.w = 0;
            hnw.h = 0;
            if (!window.innerWidth) {
                if (!(document.documentElement.clientWidth == 0)) {
                    hnw.w = document.documentElement.clientWidth;
                    hnw.h = document.documentElement.clientHeight;
                }
                else {
                    hnw.w = document.body.clientWidth;
                    hnw.h = document.body.clientHeight;
                }
            }
            else {
                hnw.w = window.innerWidth;
                hnw.h = window.innerHeight;
            }
            var midEle = document.createElement('div');
            var _x = 0;
            var _y = 0;
            var offsetX = 0;
            var offsetY = 0;
            if (!window.pageYOffset) {
                if (!(document.documentElement.scrollTop == 0)) {
                    offsetY = document.documentElement.scrollTop;
                    offsetX = document.documentElement.scrollLeft;
                }
                else {
                    offsetY = document.body.scrollTop;
                    offsetX = document.body.scrollLeft;
                }
            }
            else {
                offsetX = window.pageXOffset;
                offsetY = window.pageYOffset;
            }
            midEle.style.width = "300px";
            midEle.style.height = "300px";
            midEle.innerHTML = "Some Text";
            midEle.style.display = "block";
            var _x_w = parseInt(midEle.style.width, 10), _y_h = parseInt(midEle.style.height, 10);
            _x = ((hnw.w - _x_w) / 2) + offsetX;
            _y = ((hnw.h - _y_h) / 2) + offsetY;
            console.log(_x, " ", _y);
            midEle.style.position = "absolute";

            midEle.style.left = _x;
            midEle.style.top = _y;
            document.body.appendChild(midEle); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T06:46:52.007

这不能用CSS来完成吗？

Javascript：

```
var midEle = document.createElement('div');
midEle.className = 'centered';
document.body.appendChild(midEle); 
```

​CSS：

```
​.centered{ 
    background-color: red;
    height: 300px;
    width: 300px;
    margin: -150px 0 0 -150px;
    top: 50%;
    left: 50%;
    position: fixed;
}​ 
```

[http://jsfiddle.net/FkEyy/3/](http://jsfiddle.net/FkEyy/3/)

通过将边距设置为元素高度和宽度的负一半，并将顶部和左侧值设置为 50%，您将居中元素。这是使用 CSS 使内容居中的常用方法 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T06:27:36.997

缺少for`left`和`top`样式属性。`px`值必须是`px`或`%`

改变

```
 midEle.style.left = _x;
  midEle.style.top = _y; 
```

到

```
 midEle.style.left = _x+"px";
  midEle.style.top = _y+"px"; 
```

演示：http: [//jsfiddle.net/muthkum/AFkKt/](http://jsfiddle.net/muthkum/AFkKt/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T07:13:31.313

如果您想使用 vanilla JavaScript 在浏览器视口中居中显示某些内容，这里有一个演示。

[http://jsfiddle.net/CDtGR/5/](http://jsfiddle.net/CDtGR/5/)

```
<html>
<!--measure size of elements, 
   get absolute position of elements, 
   get viewport size and scrollposition-->
<script>
var mesr =
{
    Metrics: {
        px: 1,
        measureUnits: function(target) {
            if(typeof(target) == 'undefined')
                target = document.getElementsByTagName('body')[0];
            mesr.Metrics.measureUnit("em", target);
            mesr.Metrics.measureUnit("pt", target);
            mesr.Metrics.measureUnit("%", target);
        },
        measureUnit: function(unit, target) {
            if(typeof(target.Metrics) == 'undefined')
                target.Metrics = {};
            var measureTarget = target;
            if(target.tagName == 'IMG' && typeof(target.parentNode) != 'undefined')
                measureTarget = target.parentNode;
            var measureElement = document.createElement("div");
            measureElement.style.width = "1"+unit;
            measureElement.style.cssFloat = "left";
            measureElement.style.styleFloat = "left";
            measureElement.style.margin = "0px";
            measureElement.style.padding = "0px";            
            measureTarget.appendChild(measureElement);
            target.Metrics[unit] = measureElement.offsetWidth;
            measureElement.parentNode.removeChild(measureElement);
            return target.Metrics[unit];
        },
        getUnitPixels: function(unitString, target) {
            if(typeof(target) == 'undefined')
                target = document.getElementsByTagName('body')[0];
            if(typeof(target.Metrics) == 'undefined')
                mesr.Metrics.measureUnits(target);
            var unit = unitString.replace(/[0-9\s]+/ig,'').toLowerCase();
            var size = Number(unitString.replace(/[^0-9]+/ig,''));            
            if(typeof(target.Metrics[unit]) == 'undefined')
                return 0;
            var metricSize = target.Metrics[unit];
            var pixels = Math.floor(Number(metricSize * size));
            return pixels;
        }
    },    
    getElementOffset: function(target) {
        var pos = [target.offsetLeft,target.offsetTop];
        if(target.offsetParent != null) {
            var offsetPos = mesr.getElementOffset(target.offsetParent);
            pos =     [
                    pos[0] + offsetPos[0],
                    pos[1] + offsetPos[1]
                    ];
        }
        return pos;
    },
    getElementPosition: function(target) {

        var offset = mesr.getElementOffset(target);
        var x = offset[0] +
        mesr.Metrics.getUnitPixels(target.style.paddingLeft, target) +
        mesr.Metrics.getUnitPixels(target.style.borderLeftWidth, target);
        var y = offset[1] +
        mesr.Metrics.getUnitPixels(target.style.paddingTop, target) +
        mesr.Metrics.getUnitPixels(target.style.borderTopWidth, target);
        return [x,y];
    },    
    getElementSize: function(target) {
        var size = [target.offsetWidth, target.offsetHeight];
        size[0] -=     mesr.Metrics.getUnitPixels(target.style.paddingLeft, target) +
                    mesr.Metrics.getUnitPixels(target.style.paddingRight, target) +
                    mesr.Metrics.getUnitPixels(target.style.borderLeftWidth, target) +
                    mesr.Metrics.getUnitPixels(target.style.borderRightWidth, target);
        size[1] -=     mesr.Metrics.getUnitPixels(target.style.paddingTop, target) +
                    mesr.Metrics.getUnitPixels(target.style.paddingBottom, target) +
                    mesr.Metrics.getUnitPixels(target.style.borderTopWidth, target) +
                    mesr.Metrics.getUnitPixels(target.style.borderBottomWidth, target);
        return size;
    },
    getViewPortSize: function () {
          var myWidth = 0, myHeight = 0;
          if( typeof( window.innerWidth ) == 'number' ) {
            myWidth = window.innerWidth;
            myHeight = window.innerHeight;
          } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
            myWidth = document.documentElement.clientWidth;
            myHeight = document.documentElement.clientHeight;
          } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
            myWidth = document.body.clientWidth;
            myHeight = document.body.clientHeight;
          }
        return [myWidth, myHeight];
    },
    getViewPortScrollPosition: function () {
      var scrOfX = 0, scrOfY = 0;
      if( typeof( window.pageYOffset ) == 'number' ) {
        scrOfY = window.pageYOffset;
        scrOfX = window.pageXOffset;
      } else if( document.body && ( document.body.scrollLeft || document.body.scrollTop ) ) {
        scrOfY = document.body.scrollTop;
        scrOfX = document.body.scrollLeft;
      } else if( document.documentElement && ( document.documentElement.scrollLeft || document.documentElement.scrollTop ) ) {
        scrOfY = document.documentElement.scrollTop;
        scrOfX = document.documentElement.scrollLeft;
      }
      return [ scrOfX, scrOfY ];
    },
    attachEvent : function(target, eventList, func) {
        if(typeof (target) == "undefined" || target == null)
            return;
        var events = eventList.split(",");
        for(var i=0;i<events.length;i++) {
            var event = events[i];
            if(typeof(target.addEventListener) != 'undefined') {
                target.addEventListener(event, func);
            } else if(typeof(target.attachEvent) != 'undefined') {
                target.attachEvent('on'+event,func);
            } else {
                console.log("unable to attach event listener");
            }
        }
    }
}
</script>

<!--positioning-->
<script>
function position(){
    var viewPortSize = mesr.getViewPortSize();
    var viewPortScrollPos = mesr.getViewPortScrollPosition();
    var size = mesr.getElementSize(document.getElementById('apa'));
    document.getElementById('apa').style.left = Math.floor((viewPortSize[0]/2)-(size[0]/2)+viewPortScrollPos[0])+"px";
    document.getElementById('apa').style.top = Math.floor((viewPortSize[1]/2)-(size[1]/2)+viewPortScrollPos[1])+"px";
}    

mesr.attachEvent(window,"resize,scroll,load",position);    
mesr.attachEvent(document,"load",position); 
</script>

<body>

<div id="apa" style="position:absolute;">some text</div>

</body>

</html> 
```

# macos - Mac 架构问题

> ID：13757981
> 
> 赞同：0
> 
> 时间：2012-12-07T06:20:05.520
> 
> 标签：macos, osx-lion, osx-snow-leopard, 32bit-64bit

大家好 :) 是为 Mac 开发应用程序的新手。我的问题是针对 Mac 中不同的操作系统架构，对此我感到非常困惑。如果我的问题很便宜，请多多包涵。谢谢大家:)

1.  我知道 10.6(SnowLeopard) 支持 32 位。我想知道 10.7(Lion) 是否支持 32 位？？

2.  我有一台 64 位的机器。我想要一个 32 位的 10.7。我该怎么做？？

3.  我有一个 32 位 iMac，里面有 10.6.8。我已经在其上构建了一个应用程序；该应用程序使用用户开发的库，它也是 32 位的。现在我将这个应用程序运行到另一台具有 64 位处理器和 10.7(Lion) 的 Mac 机器上。我能否在 10.7(Lion) 中执行相同的应用程序？？我无法这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:01:29.620

1.  OS X 使用二进制格式，可以在单个可执行文件或库中支持多种架构（例如 32 位和 64 位 Intel，以及 PowerPC 等）。Lion 中的大多数二进制文件和库都是双架构 32 位和 64 位英特尔。所以，是的，Lion 支持 32 位。

2.  没有 32 位 Lion 这样的东西；这是一个双架构操作系统。它可以以 32 位或 64 位模式启动内核，并以 32 位或 64 位模式运行程序。与大多数其他操作系统不同，它甚至可以在 32 位内核下以 64 位模式运行程序。每当您在 Lion 中运行程序时，它都会检查程序包含的架构以及 CPU 的能力，并选择“最佳”模式来运行该程序。

3.  没有明显的理由这不应该起作用。如果您尝试使用运行在 64 位模式下的程序中的仅 32 位库，或者尝试使用运行在 32 位中的程序中的仅 64 位库，则会失败。但是如果程序只有 32 位，它显然会在该模式下运行，您的用户开发的库是 32 位的，并且操作系统提供的所有库都是 32+64 位的。

    有几件事可能会导致您的 32 位程序在 Lion 下失败。首先，它是否依赖于您提到的库和操作系统提供的库（例如，由 MacPorts、Fink 或 Homebrew 等本地编译的库）*之外的任何库？*如果是这样，这些库可能只编译为 64 位。应始终为所有相关架构编译 IMO 库以避免此类问题，但这不是默认设置。

    另一个可能的问题来源是如果您的程序不是真正的程序，而是加载到另一个程序中的东西（例如某种插件、屏幕保护程序等）。在这种情况下，您的插件需要支持将加载它的程序正在运行的任何模式。您实际上可以使用 Java 程序解决这个问题，因为 Java 运行时将以 64 位模式启动（当 CPU 支持它时）在狮子。

    告诉我们更多关于您的程序以及您遇到的具体错误可能会有很大帮助......

# php - 如何将值从 php 传递给 c 之类的参数

> ID：13757982
> 
> 赞同：1
> 
> 时间：2012-12-07T06:20:04.333
> 
> 标签：php, c

大家好，我想通过使用 php 值作为参数来将值从 php 传递给 c 以运行 c 程序，但是 c 程序无法从 php 中看到任何值

这段 php 代码：

```
 enter code here
<form action="create.php" method="post">
Create VM on website <br>
VM Name 
    <input type="text" name="vm_n" value="" />
VM Ram
    <input type="text" name="vm_r" value="" />
VM Virtual CPU
    <input type="text" name="vm_c" value="" />
VM File size 
    <input type="text" name="vm_fs" value="" />
VM File OS
    <input type="text" name="vm_b" value="" />
    <input type="submit" name="button1" value="Submit" />
</form>
<?php
 //Check wihch Submit was clicked and pass from php
$vm_n[10]=$_POST['vm_n'];                                
$vm_r[5]=$_POST['vm_r'];
$vm_c[3]=$_POST['vm_c'];
$vm_fs[5]=$_POST['vm_fs'];
$vm_b=[8]$_POST['vm_b'];
if ($_POST['button1']) {
    echo "Creating VM.......";
    $last_line = system('/var/local/vmweb/create_vm install -n $vm_n -r $vm_r -c $vm_c -fs $vm_fs -b $vm_b', $retval);
    echo '
    </pre>
    <hr />Status Output: ' . $last_line . '
    <hr />Status Output: ' . $vm_n . '
    <hr />Status Output: ' . $vm_r . '
    <hr />Status Output: ' . $vm_c . '
    <hr />Status Output: ' . $vm_fs . '
    <hr />Status Output: ' . $vm_b . '
    <hr />Return value: ' . $retval;

} 
?>
and this code of C program : 
if (!(initsetuid())){
        exit(1);
    }
    // Check what command is asked
    if (argc==1)
    {       
        fprintf (stderr, "Missing Agument to Create VM command!\n");
        return 1;
    }
    if (argc==12 && strcmp(argv[1], OP_INSTALL)==0) {
        if (argc==12 && strcmp(argv[2], "-n")==0)   {
    printf("Argument is : %s Parameter is: %s \n", argv[2],argv[3]);        
    sprintf (vm_name,argv[3]);  
    //printf("vm_name is : %s \n",vm_name);
    } 
```

我用 if else 来捕捉字符串上的一些参数

需要你帮助我吗！！谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:23:16.077

在这一行

```
system('/var/local/vmweb/create_vm install -n $vm_n -r $vm_r -c $vm_c -fs $vm_fs -b $vm_b', $retval); 
```

您使用单引号将字符串中的变量括起来，PHP 不能那样工作。请改用双引号。

```
system("/var/local/vmweb/create_vm install -n $vm_n -r $vm_r -c $vm_c -fs $vm_fs -b $vm_b", $retval); 
```

另外~~我认为你在这里错过了一个'='：~~你把'='放在了错误的地方：

```
$vm_b=[8]$_POST['vm_b']; 
```

应该：

```
$vm_b[8] = $_POST['vm_b']; 
```

**等一下！**

我认为这一切都是错误的！

```
$vm_n[10]=$_POST['vm_n'];                                
$vm_r[5]=$_POST['vm_r'];
$vm_c[3]=$_POST['vm_c'];
$vm_fs[5]=$_POST['vm_fs'];
$vm_b=[8]$_POST['vm_b']; 
```

您正在使用上面的代码创建数组，我不相信这真的是您想要的..

试试这个：

```
$vm_n = $_POST['vm_n'];                                
$vm_r = $_POST['vm_r'];
$vm_c = $_POST['vm_c'];
$vm_fs = $_POST['vm_fs'];
$vm_b = $_POST['vm_b']; 
```

# arrays - SWI Prolog Array Retrive [索引和元素]

> ID：13757983
> 
> 赞同：0
> 
> 时间：2012-12-07T06:20:06.923
> 
> 标签：arrays, indexing, prolog, element

我正在尝试在 swi-prolog 中对数组检索进行编程。使用下面打印的当前代码，我可以检索给定索引处的元素，但我也希望能够检索给定元素的索引[es]。

```
aget([_|X],Y,Z) :- Y \= 0, Y2 is (Y-1), aget(X,Y2,Z).
aget([W|_],Y,Z) :- Y = 0, Z is W. 
```

示例 1：aget([9,8,7,6,5],1,N) {检索索引 1 处的元素 8} 输出：N = 9。{正确}

示例 2：aget([9,8,7,6,5],N,7) {检索元素 7 的索引 2} 输出：false {不正确}

我理解它的方式是 swi-prolog 将以这种方式工作，几乎不需要额外的编程。很明显我做错了什么。如果您能指出我正确的方向或告诉我我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:20:52.047

您的代码过于程序化，第二个子句显然是错误的，仅适用于数字。

您正在寻找的功能由[nth0](http://www.swi-prolog.org/pldoc/doc_for?object=nth0/3) /3 实现。在 SWI-Prolog 中，您可以看到优化的源代码`?- edit(nth0).`此处已在 SO 上讨论了另一种实现（[此处](https://stackoverflow.com/a/9803727/874024)为我的答案）。

请注意，Prolog*没有*数组，而是列表。当可以改写算法以避免索引时，我们应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T18:13:37.257

如果将数组表示为化合物，还可以使用 ISO 标准谓词 arg/3 来访问数组元素。这是一个示例运行：

```
?- X = array(11,33,44,77), arg(2,X,Y).
X = array(11, 33, 44, 77),
Y = 33. 
```

优于列表的优点是复合访问需要 O(1) 时间，而列表访问需要 O(n) 时间，其中 n 是数组的长度。

# wcf - 具有数据库的多个客户端的 WCF 服务（每个客户端）

> ID：13757987
> 
> 赞同：1
> 
> 时间：2012-12-07T06:20:24.987
> 
> 标签：wcf

我们有一个 WCF 服务来从数据库中获取数据，它可以在单个客户端上正常工作。

现在我们想将我们的应用程序移动到云上，并与不同的客户端和数据库共享相同的 WCF 服务（数据库对于每个客户端都是唯一的，并且托管在 X 服务器上）。

我们将服务行为设置为`ConcurrencyMode.Single`和`InstanceContextMode.PerSession`

有一个私有对象与业务层连接并调用不同的 WCF 调用。我们希望这个对象对每个 WCF 服务客户端都是唯一的。

我们想在控制台应用程序上托管它。

任何人都请帮助我们缩短这个问题或任何其他方式来解决这个问题。

谢谢你。

# x86 - 像 CLR 和 JVM 这样的运行时是否能够使用 Haswell TSX 指令？

> ID：13757997
> 
> 赞同：16
> 
> 时间：2012-12-07T06:21:28.203
> 
> 标签：x86, clr, intel, transactional-memory, intel-tsx

在阅读[Anandtech 关于“Haswell TSX”（事务性内存屏障）](http://www.anandtech.com/show/6290/making-sense-of-intel-haswell-transactional-synchronization-extensions/4)后，我立即想知道 CLR/JVM 是否能够在 C#/Java/Scala/F# 中将这些用于高度并行的应用程序（C# Rx/TPL/TFD）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-17T21:02:20.807

老问题，但我想我会用至少一个具体的指针添加一个新的答案

英特尔已经使用他们的 TSX 系统进行了实验来消除 Java 中的锁，发布[在这里](http://transact2014.cse.lehigh.edu/yoo.pdf)。尽管标准基准（例如 SpecJVM2008）的典型结果只有 2-3%，但一项基准确实看到了 18% 的改进。综合基准​​测试的结果要好得多，但结果是……综合的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T14:24:55.527

HLE（硬件锁省略）可以很容易地集成到任何使用锁的现有代码库中。例如，已经存在 pthreads 的实现。另外，请注意 JVM 已经执行了锁省略优化，我认为他们可以在可能的情况下轻松切换到硬件锁省略。

但是交易变得更加复杂。您无法启动事务并推送 1Mb 的更新，您的事务将被中止。正因为如此，硬件事务内存是有限的，它不像软件事务内存那样可组合和模块化。这是一个非常低级的东西。另外，请注意，并非每个函数都可以从事务中安全地调用。这种功能必须没有副作用。

因此，我预计 TSX 将以编译器内在函数的形式在 CLR 中可用，框架开发人员将使用它来创建更好的并发集合和同步原语。它不会像 Haskell 或 Clojure 的事务内存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T13:04:29.317

我希望高性能 JVM 人员会首先使用它。例如[http://www.azulsystems.com/products/zing/virtual-machine](http://www.azulsystems.com/products/zing/virtual-machine)

我看到 TSX 在高性能集合实现中最有用。我看不出为什么我们不能使用 TSX 实现一组本机代码集合，并使用常规本机调用技术将其投影到 .Net 或 Java。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-05T22:54:53.780

添加最新答案：

似乎从 Java 8u25 开始使用 Intel-TSX 指令。见[https://bugs.openjdk.java.net/browse/JDK-8031320](https://bugs.openjdk.java.net/browse/JDK-8031320)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-14T14:04:41.853

我们看到的问题是，在 TSX 模式下，退休操作的比率较低，从而呈现了锁省略的优势。那就是说，如果任何运行时都可以从 TSX 中受益 - 它是像 JVM 这样的自适应运行时，可以跟踪特定调用站点的盈利能力，并在需要时进行反优化/重新编译。