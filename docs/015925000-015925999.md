# StackOverflow 问答 15925000-15925999

# java - 从 c/c++ 定义/实例化一个 java 对象

> ID：15925000
> 
> 赞同：3
> 
> 时间：2013-04-10T11:49:30.620
> 
> 标签：java, c++, c, dll, parameter-passing

我在 java 中的代码如下所示：

```
class MyClass
{
public void MyFunc(ISomeListener listener);
} 
```

我想从 C++ 程序中调用这个方法并将所需的参数传递给它。请注意，参数是接口的实现。因此，我需要从 c++*定义* **并** *创建*java 对象并将其传递给方法。我怎样才能做到这一点？

**PS** 如果有帮助，最初的问题是java程序是硬件的接口（如驱动程序）。我正在尝试从这个 java 代码创建一个 DLL，以便它可以用于任何语言。所以我想我会使用 C/C++ 包装代码，然后用它制作一个 DLL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:44:50.243

我设法通过在 java 中定义 Listener 类来解决这个问题。侦听器具有带有所需回调签名的本机方法。

```
public class MyImpl implements MyInterface
{
  @override
  public native int callback(int i);
} 
```

使用 javac 编译。然后使用 javah 生成要与 JNI 一起使用的函数声明。在 C 程序中，我定义了函数并使用[RegisterNatives](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp5833)加载了 Impl 类并将回调注册到其中。

**PS**如何使用 JNI 实际定义一个类的问题仍未得到解答。

**编辑：**
使用这种方法有一个缺点。我将不得不在类范围而不是对象范围内注册回调。

# c# - 数据集中的 Excel 日期格式更改？

> ID：15925006
> 
> 赞同：1
> 
> 时间：2013-04-10T11:49:45.027
> 
> 标签：c#, visual-studio-2010, excel

当我从 excel 导入数据集时，我的日期格式发生了变化

我的代码如下：

```
DataSet ds = new DataSet();
string myConnStr = "";

if (ds != null)
{
    myConnStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FilePath + "; " + "Extended Properties=\"Excel 12.0;HDR=YES\"";
}
else
{
    myConnStr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + FilePath + ";Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=1\"";
}

OleDbConnection myConn = new OleDbConnection(myConnStr);
try
{
    OleDbCommand cmd = new OleDbCommand("select * from [Sheet1$] ",myConn);
    OleDbDataAdapter adapter = new OleDbDataAdapter();
    adapter.SelectCommand = cmd;
    myConn.Open();
    adapter.Fill(ds);
 }
catch
{ }
finally
{
    myConn.Close();
} 
```

如果我从 excel 中逐行读取，那么我可以使用**DateTime.FromOADate** 在这里我不能这样做。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:59:34.640

一种解决方案是将您的 Integer 转换回 Datetime

示例代码就像

```
public DateTime ExcelSerialDateToDT(int nSerialDate)
{

int l = nSerialDate + 68569 + 2415019;
int n = ((4 * l) / 146097);
l = l - ((146097 * n + 3) / 4);
int i = ((4000 * (l + 1)) / 1461001);
l = l - ((1461 * i) / 4) + 31;
int j = ((80 * l) / 2447);
int nDay = l - ((2447 * j) / 80);
l = (j / 11);
int nMonth = j + 2 - (12 * l);
int nYear = 100 * (n - 49) + i + l;

return DateTime.Parse(nMonth + "/" + nDay + "/" + nYear);

 } 
```

为我工作......

# c - 将文本文件的内容复制到缓冲区（win32api）

> ID：15925007
> 
> 赞同：0
> 
> 时间：2013-04-10T11:49:49.237
> 
> 标签：c, windows, winapi, text-files

我在文本文件中有一些数据。现在我想将此数据复制到字符缓冲区，以便我可以通过 udp 套接字发送它。如何将文本文件中的数据复制到缓冲区？我为此尝试了 fread ，但它也复制了一些冗余数据，尽管我只指定了等于要读取的文件大小的字节数，但它仍在读取一些冗余数据。下面是我正在尝试的代码片段：

```
 char file_buffer[1000];
    fpSend = fopen("sendclInformation.txt", "w+");
    WriteFile(sendFile,"Data in File",strlen("Data in File"),&dwWritten,0);
    fseek(fpSend, 0, SEEK_END);
    size_t file_size = ftell(fpSend); // The size calculated here is 12 so fread must display only 12 bytes but it is displaying large redundant data appended to actual data.
    fseek(fpSend, 0, SEEK_SET);                         
    if(file_size>0)   //if file size>0
    {  
    int bytes_read=0;                               
if((bytes_read=fread(file_buffer, file_size, 1, fpSend))<=0)
    {                                                                                        "Unable to copy file into buffer",
    }
    else
    {
    MessageBox( NULL,file_buffer,"File copied in Buffer",MB_ICONEXCLAMATION|MB_OK);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:43:36.490

# 问题

你写了字符串，但似乎没有写结尾 \0 来标记字符串的结尾，当你从文件中读取时，你似乎认为它是一个正确的终止字符串，你得到了

## 改变

```
WriteFile(sendFile,"Data in File",strlen("Data in File"),&dwWritten,0); 
```

至

```
WriteFile(sendFile,"Data in File",strlen("Data in File") + 1,&dwWritten,0); 
```

# 其他

使用它以 r/w 二进制模式打开文件`"wb+"`将确保您从/向文件读取/写入的内容是原始字节，无需任何换行符转换。如果您以文本模式打开文件，`fseek`则会`ftell`给出错误的（出于您的目的）结果。

您的 if 语句似乎有点奇怪，也许您的意思是

```
if((bytes_read=fread(file_buffer, file_size, 1, fpSend))<=0)
{
  "Unable to copy file into buffer",
}
else
{
  MessageBox( NULL,file_buffer,"File copied in Buffer",MB_ICONEXCLAMATION|MB_OK);
} 
```

像这样的东西（*还要注意我改变了 fread 参数*）

```
if((bytes_read=fread(file_buffer, 1, file_size, fpSend))<file_size)
{
  MessageBox( NULL,"error","Unable to copy file into buffer",MB_ICONEXCLAMATION|MB_OK);
}
else
{
  MessageBox( NULL,file_buffer,"File copied in Buffer",MB_ICONEXCLAMATION|MB_OK);
} 
```

还建议您检查

# javascript - 在不刷新页面的情况下停止 getUserMedia 的网络摄像头流式传输

> ID：15925010
> 
> 赞同：16
> 
> 时间：2013-04-10T11:49:51.243
> 
> 标签：javascript, webrtc, getusermedia

我正在尝试使用 javascript 函数关闭网络摄像头（它必须在收到一些 Ajax 响应后关闭），但如果不刷新页面似乎无法关闭。关闭它的所有方法，如 video.src = null、video.pause...等，在任何浏览器中都不起作用。唯一的方法是关闭作为参数传递给成功函数的流，那么有什么方法可以在函数成功之外使用这个对象来关闭网络摄像头？

我知道之前有人问过这个问题（[使用 getUserMedia 和 RTCPeerConnection Chrome 25 停止/关闭网络摄像头](https://stackoverflow.com/questions/15137069/stop-close-webcam-using-getusermedia-and-rtcpeerconnection-chrome-25)），但我的需求不同，所以我需要一些帮助来解决这个问题

谢谢！

编辑：我的工作代码试图关闭网络摄像头：

```
navigator.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia ||  navigator.webkitGetUserMedia || navigator.msGetUserMedia;
if(navigator.getUserMedia){
  var video_constraints = {
    mandatory: {
       maxHeight: 480,
       maxWidth: 640 
    },
    optional: []
  };
  var self = this;
  self.navigator.getUserMedia({
      audio: false,
      video: video_constraints
  }, self.onSuccess, onError);
}
else{
  alert('An error has occurred starting the webcam stream, please revise the instructions to fix the problem');
}

function onSuccess(stream) {
  var video = document.getElementById('webcam');

  if(navigator.webkitGetUserMedia || navigator.mozGetUserMedia){
      video.src = window.URL.createObjectURL(stream);
  }
  else if(navigator.msGetUserMedia){
      //future implementation over internet explorer
  }
  else{
      video.src = stream;
  }
  self.localStream = stream;
  video.play();
}
function onError() {
  alert('There has been a problem retrieving the streams - did you allow access?');
}

function closeWebcamConnection(){
  this.localStream.stop();
} 
```

uff..在这里发布代码真的很复杂XD

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-12-11T20:31:38.150

保存对`LocalMediaStream`asgoth 建议的引用是正确的，但在 Chrome 47 中对我来说。`localStream.stop();`给了我一个错误：

> 未捕获的类型错误：localStream.stop 不是函数

我通过调用它来工作：

```
localStream.getVideoTracks()[0].stop(); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-10T12:23:16.747

您需要`LocalMediaStream`通过执行其`stop()`方法来停止对象。我有类似的问题。你需要做的是：

`LocalMediaStream`在执行的 onSuccess 回调函数中保留一个引用`getUserMedia()`：

```
var localStream;

onUserMediaSuccess = function(stream) {
   // attach to a video element
   ...
   // keep a reference
   localStream = stream;
}; 
```

在需要的地方停止 LocalMediaStream：

```
localStream.stop(); 
```

在我自己的[问题](https://stackoverflow.com/questions/14365904/html5-camera-does-not-switch-off-after-route-change-in-angularjs)（和[答案](https://stackoverflow.com/a/14366623/1916258)）中有更多信息。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-01-06T14:25:28.160

除了[asgoth 的答案](https://stackoverflow.com/a/15925714/2135281)

> localStream.stop() 在 Chrome 45 中已弃用，在 Chrome 47 中已删除

如果你从多个地方调用 .stop() ，你可以使用以下帮助函数的 stop 函数来将逻辑保持在一个地方。

```
var localStream;

onUserMediaSuccess = function(stream) {

  // re-add the stop function
  if(!stream.stop && stream.getTracks) {
    stream.stop = function(){         
      this.getTracks().forEach(function (track) {
         track.stop();
      });
    };
  }

  // attach to a video element
  ...
  // keep a reference
  localStream = stream;
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T12:34:14.127

这似乎是 Chrome 中的一个错误区域，并且行为在不断变化。这似乎有效，只有当您通过 http（不是 https）连接时：

```
var myStream;
function successCallback( stream ) {
    ...
    myStream = stream; // used to close the stream later
}

function closeStream(){
   myStream.stop(); 
   myStream = null;
} 
```

由于某些奇怪的原因，这在 SSL (https) 上不起作用（在 Chrome for Linux，Ver 27 Dev 上检查）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-11T18:56:26.690

我在 Chrome 49 中关闭视频流轨道（前置摄像头）和打开备用轨道（后置摄像头）时遇到问题。我发现`MediaStream.stop()`自版本 45 以来已弃用，并已替换为`MediaStreamTrack.stop()`. 您可以从Sam Dutton 在 Google 开发者网站上的[帖子中了解更多信息。](https://developers.google.com/web/updates/2015/07/mediastream-deprecations?hl=en)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-30T13:48:03.740

为了摆脱浏览器选项卡上的红色符号并禁用两者，在收到这些错误之一时**视频**和**音频流**

```
Uncaught TypeError: localStream.stop is not a function
Uncaught TypeError: _webRTCStream.stop is not a function // TokBox, OpenTok 
```

遍历找到的轨道并停止它们。

```
if (_webRTCStream.stop) {
  _webRTCStream.stop() // idk what this does, left here for legacy reasons..?
} else {
  _webRTCStream.getTracks().forEach(function(track) { track.stop() })
} 
```

*注意：`_webRTCStream`equals `localStream`，取决于您使用的库。*

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-24T09:13:31.713

```
if (sourcevid.mozSrcObject) {
  sourcevid.mozSrcObject.stop();
  sourcevid.src = null;
} else {
  sourcevid.src = "";
  localStream.stop();
} 
```

# java - 我可以只使用一张表进行所有休眠环境审计吗？

> ID：15925012
> 
> 赞同：7
> 
> 时间：2013-04-10T11:50:04.940
> 
> 标签：java, database, hibernate, playframework, hibernate-envers

我最近发现了一个名为“hibernate envers”的漂亮库，它是一种非常棒且简单的审计日志方法，它解决了我在玩游戏网络应用程序时遇到的最大问题之一。现在，我知道 Envers 为每个被审计实体使用一张表，并且想知道是否可以为每件事使用一张表？（例如，使用 varchar 放置所有数据并将实体模型放在单独的列中）

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:03:20.200

不，那是不可能的。目前只有每个实体的表策略可用（Default 和 ValidityAuditStrategy）。

参见手册：[http ://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html](http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html)

# sql-server - Microsoft SQL 中的新行

> ID：15925024
> 
> 赞同：2
> 
> 时间：2013-04-10T11:50:41.850
> 
> 标签：sql-server

我的 java 代码中有以下 SQL 字符串：

```
"Started: "+billingDBTime+" FIRST\n"+"Category:Content\n"+"\n" + ";"+"$Value:599\n"+"\n" ; 
```

我想将此字符串插入数据库并从数据库中获取。

众所周知`'\n'`，表示一个新行，当我将这个字符串插入数据库时​​，如何在数据库中表示一个新行？

将其插入数据库后如何检查？

为了更清楚，字符串应该如下所示：

开始时间：2013-04-10 11:43:21 FIRST 分类：内容

;$价值:599

什么是替换 Sql 中的 "\n" ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:34:12.827

您可以在 TSQL 中通过直接在字符串中插入字符代码来执行此操作。我通常将它放在一个变量中以使其更易于使用。

```
DECLARE @crlf char(2) = Char(13) + Char(10)

SELECT  'Started: ' + billingDBTime + ' FIRST' + @crlf + 'Category:Content' + @crlf + @crlf + ';' + '$Value:599' + @crlf + @crlf; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:00:53.647

您插入数据库的每一“行”都称为`row`. 在您的情况下，您必须在数据库中插入 3 行。您可以使用`INSERT INTO`&`SELECT`方法从数据库中插入/获取行。

由于您没有显示您的表结构，因此我无法就如何精确地编写自己的 SQL 给您进一步的建议。

阅读[http://www.w3schools.com/sql/sql_quickref.asp](http://www.w3schools.com/sql/sql_quickref.asp)以获取快速 SQL 参考。

# sift - vl_sift 为什么两帧位置相同

> ID：15925025
> 
> 赞同：0
> 
> 时间：2013-04-10T11:50:42.470
> 
> 标签：sift, vlfeat

我是 vl_sift 的大一新生。当我从[网站](http://www.vlfeat.org/overview/sift.html)运行代码时，我发现了一个我不明白的问题。执行后`[f,d] = vl_sift(I) ;`我检查了`f`.

```
col   11                      12       

15.6534681320190    15.6534681320190
315.868621826172    315.868621826172
1.75902485847473    1.75902485847473
0.729515715938409   -2.98263351880919 
```

两列具有相同的值`X,Y`但方向不同。什么意思？有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:07:34.820

计算给定关键点方向的函数确实可以计算**多个**方向。在实践中 vlfeat 最多可以为同一关键点返回 4 个方向：

*   [SIFT vlfeat 文档](http://www.vlfeat.org/api/sift.html#sift-tech-detector-orientation)
*   [vl_sift_calc_keypoint_orientations](http://www.vlfeat.org/api/sift_8c.html#a2e409d464f81582dc3e839bf0fece66e)

更多详细信息，请参阅第5 节。[原论文](http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf)的*方向分配*：

> 方向直方图中的峰值对应于局部梯度的主要方向 [...] 对于具有相似幅度的多个峰值的位置，将在相同的位置和尺度但方向不同的位置创建多个关键点。

# titanium - 钛构建错误：Android

> ID：15925028
> 
> 赞同：2
> 
> 时间：2013-04-10T11:50:49.140
> 
> 标签：titanium

从最近几天开始一直面临一个问题。每当我构建任何东西以查看 Emulator 中的内容低于错误时：

> [错误][CheckinTask(169)] 签入失败：[https](https://android.clients.google.com/checkin) ://android.clients.google.com/checkin (request #0) [ERROR][CheckinTask(169)] java.net.UnknownHostException: android.clients.google .com

在日志模拟器中出现此错误后，无法正确响应。我的旧代码甚至厨房水槽演示都无法正常工作，尽管它之前工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:32:03.110

我觉得我一直在与试图部署和调试的 Android 模拟器作斗争。当事情发生故障并且我无法弄清楚原因时，我会清理我的项目。然后我尝试两次将其调试到模拟器。我不知道为什么，但第一次尝试似乎经常失败。如果仍然无法连接，请关闭模拟器，然后再次清理项目。然后我尝试编译和调试。如果这仍然不起作用，我关闭所有内容并重新启动系统。

一旦我让它工作，我通常可以让它继续运行一段时间。

# java - 使用 Bouncy Castle 提供程序进行 AES 加密/解密

> ID：15925029
> 
> 赞同：10
> 
> 时间：2013-04-10T11:50:51.540
> 
> 标签：java, cryptography, aes, bouncycastle

这是我使用 JDK 5 的本机库开发的 AES 256 加密和解密的实现：

```
public static String encrypt(String key, String toEncrypt) throws Exception {
    Key skeySpec = generateKeySpec(key);
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(toEncrypt.getBytes());
    byte[] encryptedValue = Base64.encodeBase64(encrypted);
    return new String(encryptedValue);
}

public static String decrypt(String key, String encrypted) throws Exception {
    Key skeySpec = generateKeySpec(key);
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
    byte[] decodedBytes = Base64.decodeBase64(encrypted.getBytes());
    byte[] original = cipher.doFinal(decodedBytes);
    return new String(original);
} 
```

我想用 Boucy Castle API (Java) 实现相同的方法：我搜索了很多，测试了很多，但没有结果......有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-10T13:12:30.987

你要么使用

```
Security.addProvider(new BouncyCastleProvider());
Cipher cipher = Cipher.getInstance("AES", "BC"); 
```

要不然

```
Cipher cipher = Cipher.getInstance("AES", new BouncyCastleProvider()); 
```

也就是说，`Cipher.getInstance("AES")`使用不安全的[电子密码本。](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)您要么需要密码块链接 ( `Cipher.getInstance("AES/CBC/PKCS5Padding")`) 或计数器 ( `Cipher.getInstance("AES/CTR/NoPadding")`) 模式；它们都是安全的，主要区别在于 CBC 需要填充，而 CTR 不需要。

# java - 如何在单击按钮时重置 Android 应用程序？

> ID：15925030
> 
> 赞同：0
> 
> 时间：2013-04-10T11:50:53.287
> 
> 标签：java, android

我是 Android 编程新手。我有一个按钮，上面写着

> “你想重新开始游戏吗”？

单击此按钮时，我希望游戏重置，以便它返回到初始状态，即当用户第一次打开游戏时。我应该通过调用该`onCreate()`方法来做到这一点，如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:57:51.253

你不应该`onCreate`手动调用。从头开始当前活动的一种非常简单的方法是：

```
finish();
startActivity(MyActivity.class, getIntent()); 
```

# sas - 如何在 SAS 中进行双转置

> ID：15925033
> 
> 赞同：2
> 
> 时间：2013-04-10T11:50:57.703
> 
> 标签：sas, transpose

请你能帮我从中获取我的数据：

```
Name   + Class   + Teacher
-------+---------+-----------
Fred   + Chem    + Mr Blond
Fred   + Chem    + Mr Pink
Fred   + Maths   + Mr Blond
Barney + Chem    + Mr Brown
Barney + French  + Mr Black
Barney + French  + Mr Blond 
```

对此：

```
Name   + Class1  + Teacher1_1 + Teacher1_2 + Class2  + Teacher2_1 + Teacher2_2
-------+---------+------------+------------+---------+------------+------------
Fred   + Chem    + Mr Blond   + Mr Pink    + Maths   + Mr Blond   +
Barney + Chem    + Mr Brown   +            + French  + Mr Black   + Mr Blond 
```

所以基本上每个学生一次观察，每个学生的班级调换，每个学生班级的教师调换，但与班级交错。

我不确定这是双 PROC TRANSPOSE 操作还是其他操作。我遇到了一些使用 PROC Summary 的东西，但我对此不太熟悉。这可能是手动数据步骤的事情，但我真的很茫然。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:50:06.183

我相信其他人可以提出更优雅的解决方案，但这应该可行....

```
 proc sort
        data=dataset;
        by name;
    run;

    proc transpose 
        data=dataset
        out=dataset;
        var Class Teacher;
        by Name;
    run;

    DATA teacher_dataset class_dataset;
        set dataset;
        if  _NAME_ = "Teacher"  then  output teacher_dataset;
        else if _NAME_ = "Class"    then  output class_dataset;

    run;

    PROC SQL;
        create table final_dataset as
        select 
                a.Name,
                b.Col1 as Class1,
                a.Col1 as Teacher1,
                b.Col2 as Class2,
                a.Col2 as Teacher2,
                b.Col3 as Class3,
                a.Col3 as Teacher3

        from        teacher_dataset as a
        left join   class_dataset   as b
            on a.Name=b.Name;
    quit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:06:03.477

非常简单。首先输出为垂直格式，然后转置。与正常的双重转置相比，唯​​一棘手的部分是您的班级/教师组合不是唯一的，因此您必须添加一些额外的逻辑 - 通常一个数组会更好地工作，但在这种情况下不是。

```
data have;
input Name  $  Class  $  Teacher $;
datalines;
Fred    Chem     MrBlond
Fred    Chem     MrPink
Fred    Maths    MrBlond
Barney  Chem     MrBrown
Barney  French   MrBlack
Barney  French   MrBlond
;;;;
run;

data have_pret;
set have;
array transvars[2] class teacher;
by name class notsorted;
if first.name then counter=0;
if first.class then do;
    class_counter=0;
    counter+1;
    id=cats('Class',counter);
    value=class;
    output;
end;
class_counter+1;
id=cats('Teacher',counter,'_',class_counter);
value=teacher;
output;
run;

proc transpose data=have_pret out=want;
by name notsorted;
id id;
var value;
run; 
```

# blackberry - 黑莓 BES 和 BIS 之间的混淆

> ID：15925034
> 
> 赞同：0
> 
> 时间：2013-04-10T11:51:04.117
> 
> 标签：blackberry, push-notification

我正在尝试开发一个简单的 BB OS < 7.X 应用程序，它唯一要做的就是启用推送通知。我以前处理过推送通知（android、wp7、iOS），但 BB 的实现确实很重要。

我知道为了让设备能够获得推送通知，必须启用 BIS 或 BES。到目前为止一切顺利，只需一个简单的调用，您就可以启用它。

然而究竟有什么区别呢？我应该为大多数使用 BIS 的用户开发一个应用程序。但是，我被允许开发的手机启用了 BES。

这会影响我在开发中的所有“代码”吗？我认为当然不是，但我已经看到了实现推送的代码示例，例如使用 BES，您不需要在代码中提供推送端口等。

我引用：

```
In the case of BIS, your carrier operates the server. Everything from BIS to your handheld
is encrypted, but that’s about the extent of the security features. The
carrier can decide what applications run on your phone,and how applications
communicate with the Internet.

For BES, your company operates the server, and usually has it sitting somewhere
within the corporate network. The IT department controls all  aspect of the BES
server, and it’s likely sitting in a nice and secure location. 
```

他们在谈论什么“服务器”？我知道“我的服务器”，因为我已经写了它，它会联系 BIS 发送推送通知，它会注册我的用户令牌等等。那么我公司的这个“新服务器”是什么？据我所知，我的公司没有任何类型的服务器。我们只有一部启用了 BES 的手机……

我不明白服务器端如何连接到客户端。通过 BES 开发 push 和通过 BIS 开发 push 有区别吗？如果服务器是 BES 但客户端有 BIS？如果有人可以向我澄清一下这些事情，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:40:08.803

看看这些链接： http:
[//developer.blackberry.com/java/documentation/push_service_overview.html](http://developer.blackberry.com/java/documentation/push_service_overview.html) [http://devblog.blackberry.com/2010/03/introducing-blackberry-push-services-to-developers/](http://devblog.blackberry.com/2010/03/introducing-blackberry-push-services-to-developers/)

简而言之，BIS是RIM管理的代理服务，BES就像是公司管理的企业BIS服务器。

至于推送，您可以在[注册表中选择只需要 BIS 或 BIS+BES 进行评估](https://www.blackberry.com/profile/?eventId=8121)（有“推送的传输”组合）。当您要[注册生产](https://www.blackberry.com/profile/?eventId=8207)时，您可以选择推送服务类型（加号或必要）。

# c# - 如何获取我的 Web 应用程序的基本 URL？

> ID：15925036
> 
> 赞同：7
> 
> 时间：2013-04-10T11:51:12.060
> 
> 标签：c#, iis-7

是否可以使用 IIS 7 获取托管在 IIS 7 中的网站的基本 URL `Microsoft.Web.Administration.ServerManager`？

在最简单的情况下，这将是：

```
http://localhost 
```

但我需要以编程方式获取它。

如果我不能使用`ServerManager`什么是最好的选择？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-28T01:11:25.927

对于那些对 Microsoft.Web.Administration.ServerManager 的使用感兴趣的人，这里有一些代码。考虑一个 IIS 应用程序可能有多个绑定，导致每个 Web 应用程序有多个 URL。

```
var siteName = "Default Web Site";
var appPath = "MyWebApplication";

var serverManager = new ServerManager();
var site = serverManager.Sites[siteName];
appPath = appPath.StartsWith("/") ? appPath : "/" + appPath;
var app = site.Applications[appPath];

var urls = new List<string>();

foreach (var binding in site.Bindings)
{
    var sb = new StringBuilder();
    sb.Append(binding.Protocol);
    sb.Append("://");
    if (!string.IsNullOrWhiteSpace(binding.Host))
    {
        sb.Append(binding.Host);
    }
    else
    {
        if (Equals(binding.EndPoint.Address, IPAddress.Any))
        {
            sb.Append("localhost");
        }
        else
        {
            sb.Append(binding.EndPoint.Address);
        }
    }

    if (binding.EndPoint.Port != 80)
    {
        sb.Append(":");
        sb.Append(binding.EndPoint.Port);
    }

    sb.Append(app.Path);
    urls.Add(sb.ToString());
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-10T12:20:58.617

您可以使用`string baseURL = HttpContext.Current.Request.Url.Host`.

# c# - 如何使用反射使用 Linq 表达式？

> ID：15925040
> 
> 赞同：1
> 
> 时间：2013-04-10T11:51:28.350
> 
> 标签：c#, asp.net, .net, linq, entity-framework

我目前有一种情况，我正在使用 Linq to Entities 执行搜索。

如果我想通过客户的参考代码进行搜索，我将使用这种方法：`GetClientByReference("A01")`

```
public IQueryable<DataLayer.Client> GetClientByReference(String reference)
{
    return new DataLayer.DlClient(this.Entities).GetClientByReference(reference);
} 
```

如果我想按客户姓名搜索，我将使用以下方法：`GetClientByName("Joe")`

```
public IQueryable<DataLayer.Client> GetClientByName(String name)
{
    return new DataLayer.DlClient(this.Entities).GetClientByName(name);
} 
```

显然，就可扩展性而言，这非常糟糕，因为我需要将方法组合在一起，并为每个可搜索字段编写一个（`GetClientByDateAndReferenceAndName`？？）有没有办法让它更通用？

理想情况下，我希望能够执行以下操作：

*   `GetClient("Reference", "A01")`
*   `GetClient("Name", "Joe")`
*   `GetClient("Reference", "A01", "Name", "Joe")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:55:07.650

我假设你的`DataLayer.DlClient(this.Entities)`回报`IQueryable<Client>`：

```
public IQueryable<DataLayer.Client> GetClientBy(Expression<Func<Client, bool>> filter)
{
    return new DataLayer.DlClient(this.Entities).Where(filter);
} 
```

现在你可以

```
var clients = GetClientBy(client => client.Name == "Joe");

var clients = GetClientBy(client => client.Reference == "A01");

var clients = GetClientBy(client => client.Reference == "A01" &&  
                                    client.Name == "Joe"); 
```

# sql - Oracle SQL & scriptella：如何根据选择标准进行条件插入或更新？

> ID：15925041
> 
> 赞同：1
> 
> 时间：2013-04-10T11:51:28.900
> 
> 标签：sql, oracle, scriptella

我在 Scriptella 中面临一个关于 Oracle Sql 查询的问题。

我的意图是 - 我必须从 PRODUCT_PRICE 表中为从 PRODUCT_PRICE 获取的每一行（使用 where 子句确定）获取一些列数据，然后如果从 PRODUCT_PRICE 获取的数据不包含任何内容或为空，那么我必须为将产品和商店 id 对应的价格值放入表中，否则如果存在与产品和商店 id 对应的行，则我必须更新价格。

以下代码应该清除我正在描述的逻辑 -

```
<query connection-id="db">
select PRODUCT_ID as "product_id1", STORE_ID as "store_id1" from PRODUCT
  <query connection-id="db">
  select REGULAR_PRICE, PRODUCT_ID as "product_id2", STORE_ID as "store_id2" from PRODUCT_PRICE where PRODUCT_ID=?product_id1 and STORE_ID=?store_id1
    <script connection-id="db" if="rownum==0">
    insert into PRODUCT_PRICE(REGULAR_PRICE, PRODUCT_ID, STORE_ID) values(?price, product_id1, store_id1)
    </script>
    <script connection-id="db" if="rownum gt 0">
    update REGULAR_PRICE=?price where PRODUCT_ID=?product_id2 and STORE_ID=?store_id2
    </script>
  </query>
<query> 
```

我的问题是 - 这不起作用！如您所见，如果没有与产品和商店 ID 对应的数据，我必须将 product_id、store_id 以及“价格”插入到 PRODUCT_PRICE 表中。此外，如果存在一行相同的产品和 store_id，我必须只更新价格。但是，当第二个查询中获取的结果集不包含任何内容时，条件为“rownum==0”的脚本就不起作用了。那么如何在 Oracle 中实现这一点？

在 MySQL 或 SyBase 数据库中，我知道有一种语法称为“if exists(select ....) / then something / else something”，但我在 Oracle 数据库中找不到任何东西。由于我们的项目是基于Oracle的，如何根据Oracle数据库中的选择标准来实现这种有条件的插入或更新？

PS - 在第一次查询之前已经找到“价格”变量。我只放了代码的相关部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:04:19.007

您可以使用 count() 函数来实现它：

```
<query connection-id="db">
   select PRODUCT_ID as "product_id1", STORE_ID as "store_id1" from PRODUCT
   <query connection-id="db">
       select COUNT(*) as Price_Count from PRODUCT_PRICE where PRODUCT_ID=?product_id1 and STORE_ID=?store_id1
       <script connection-id="db" if="Price_Count==0">
           insert into PRODUCT_PRICE(REGULAR_PRICE, PRODUCT_ID, STORE_ID) values(?price, product_id1, store_id1)
       </script>
       <script connection-id="db" if="Price_Count gt 0">
           update REGULAR_PRICE=?price where PRODUCT_ID=?product_id1 and STORE_ID=?store_id1
      </script>
  </query>
<query> 
```

尽管此解决方案应该可以工作，但您可以利用 SQL 联接的强大功能。以下解决方案只需要单个查询即可完成此任务。我将使用左外连接。这个想法是您通过 product_id、store_id 加入 2 个表。当 product_price 表中没有匹配项时，对应的 price 属性将为空。假设您有以下输入：

```
select * from product;
PRODUCT_ID      STORE_ID  
1               1
2               1
3               1

select * from product_price;
PRODUCT_ID      STORE_ID    PRICE  
2               1           100
2               1           150
3               1           200 
```

这 2 个表的左外连接如下所示：

```
select p.product_id, p.store_id , pp.price   from product p LEFT OUTER JOIN product_price pp ON p.product_id =pp.product_id  and p.store_id =pp.store_id;

PRODUCT_ID      STORE_ID    PRICE  
1   1   null
2   1   100
2   1   150
3   1   200 
```

然后你需要申请 group by 并按价格计算：

```
select p.product_id, p.store_id , count(pp.price) as Prices_Count   from product p LEFT OUTER JOIN product_price pp ON p.product_id =pp.product_id  and p.store_id =pp.store_id group by (p.product_id, p.store_id)
PRODUCT_ID      STORE_ID    Prices_Count  
1   1   0
3   1   1
2   1   2 
```

然后 XML 变得微不足道，更重要的是它应该更快，因为数据库连接比任何外部客户端进行的连接更有效。

```
 <query connection-id="db">
       select p.product_id, p.store_id , count(pp.REGULAR_PRICE) as Prices_Count   from product p LEFT OUTER JOIN product_price pp ON p.product_id =pp.product_id  and p.store_id =pp.store_id group by (p.product_id, p.store_id)

       <script connection-id="db" if="Prices_Count==0">
         insert into PRODUCT_PRICE(REGULAR_PRICE, PRODUCT_ID, STORE_ID) values(?price, product_id, store_id)
       </script>
       <script connection-id="db" if="Prices_Count gt 0">
          update REGULAR_PRICE=?price where PRODUCT_ID=?product_id and STORE_ID=?store_id
        </script>
  </query> 
```

我认为可以通过使用 MERGE INTO 进一步优化该方法，因此所有事情都可以在单个 Oracle 语句中完成，但我将把它留给饥饿的头脑。

# html - 当内容很少时，获取整页 div 列以适应页面内部

> ID：15925043
> 
> 赞同：0
> 
> 时间：2013-04-10T11:51:42.807
> 
> 标签：html, css

我在使用 html 布局时遇到了一些问题。
基本的想法是在页眉和页脚之间有 3 列。
中间的列是固定的，两边是剩下的。双方必须有不同的图像背景。您可以在这里看到我的意思-> [http://assets.nbn-studio.com/3cols.html](http://assets.nbn-studio.com/3cols.html)。
问题是内容有时比窗口小，但由于我已将列设置为 100%，因此页脚始终位于页面底部下方。我尝试了不同的东西，但似乎无法做到正确。
不要介意这些图像，但我必须表现出一些含义。此外，所有这些都必须在 IE7 及更高版本中工作。
侧面也没有内容，只有背景图像。我会很感激任何想法。

更新：这就是我所说的：

![问题的演示](https://i.stack.imgur.com/wKvNR.jpg)

图片链接：http: [//i49.tinypic.com/1zeju2t.jpg](http://i49.tinypic.com/1zeju2t.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:57:58.240

我有一个解决方案，它有一些小的限制，但对于比 IE6/7 更新的浏览器可以很好地工作。

您可以在以下位置查看工作页面：http: [//jsfiddle.net/audetwebdesign/6jnWE/show/](http://jsfiddle.net/audetwebdesign/6jnWE/show/)

并在以下位置查看代码和 CSS：http: [//jsfiddle.net/audetwebdesign/6jnWE](http://jsfiddle.net/audetwebdesign/6jnWE)

CSS看起来像：

```
* {
    margin: 0;
    padding: 0;
}
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
}
#header {
    background: url(http://assets.nbn-studio.com/apache_pb.gif) #CC0;
    height: 10%;
    min-height: 50px;
    width: 100%;
}
#wrap-outer {
    width: 100%;
    height: 80%;
    display: table;
}
#side-left {
    display: table-cell;
    vertical-align: top;
    background: url(http://assets.nbn-studio.com/arrow-left-2.png) right top repeat;
    height: inherit;
}
#left-content {
    float: right;
    background: url(http://assets.nbn-studio.com/arrow-left.png) repeat-y;
    width: 150px;
    height: 100%;
}
#content {
    display: table-cell;
    vertical-align: top;
    width: 800px;
    background: url(http://assets.nbn-studio.com/knot.png) repeat;
}
#side-right {
    display: table-cell;
    vertical-align: top;
    background: url(http://assets.nbn-studio.com/arrow-right-2.png) left top repeat;
    height: inherit;
}
#right-content {
    float: left;
    background: url(http://assets.nbn-studio.com/arrow-right.png) repeat-y;
    width: 150px;
    height: 100%;
}
#footer {
    background: #6C9;
    height: 10%;
    min-height: 50px;
    width: 100%;
    clear: both;
} 
```

在这种方法中，我声明`display: table`了 for`#wrap-outer`和`display: table-cell`for `#side-left`、`#content`和`#side-right`。我可能已经使用了一些绝对定位的元素来达到类似的效果。

关键是分别将 和 的相对高度设置为10% `#header`、80% 和 10%。现实情况是，如果没有看到足够小的窗口大小的垂直滚动条，您就无法混合使用 % 和 px 的高度单位。我的妥协是为页眉和页脚设置一个值，并设计任何艺术品以具有一定的灵活性。如果垂直滚动出现在小屏幕上，则可以忍受。`#wrap-outer``#footer``min-height`

另外，请注意`height: inherit`for`#side-left`和的使用`#side-right`。

**使用多个背景图像**

如果您专注于支持 CSS3 的较新浏览器，您可以通过使用多个图像来简化标记，并`#wrap-outer`消除所有元素中的背景图像（与右侧类似）。`#side-left``#left-content`

**使用表格单元格**

`table-cell`IE6/7 不支持该属性，这对某些用户来说可能是个问题。

**修复 IE7**

我想出了一个不使用的替代布局`table-cell`。

您可以在以下位置查看：http: [//jsfiddle.net/audetwebdesign/c7vTL/](http://jsfiddle.net/audetwebdesign/c7vTL/)

我使用 . 定位侧面板`position: absolute`。

我做了一些修改以允许这个版本工作：

1.  中心背景图像固定到包装器而不是内容元素。这需要为侧边栏设置背景颜色（白色）。

2.  包装器上的溢出被隐藏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T12:06:51.957

我不完全确定问题是什么，但这可能会对您有所帮助：

[HTML / CSS，在每侧获得 2 个背景以使用包装器进行调整](https://stackoverflow.com/questions/13748450/html-css-getting-2-backgrounds-in-each-side-to-adjust-with-the-wrapper)

# azure - Azure 网站生命周期管理是否有任何管理 API？

> ID：15925045
> 
> 赞同：1
> 
> 时间：2013-04-10T11:51:47.840
> 
> 标签：azure, azure-web-app-service

Azure 网站生命周期管理有 PowerShell cmdlet。但是有任何管理 API 吗？微软是否计划在不久的将来为此发布管理 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:43:28.647

**肯定**有管理 API。否则也不会有 PowerShell cmdlet。

微软很可能会为此发布管理 API。我敢肯定，当服务成为 GA（或普遍可用）时，文档最迟会发布。在此之前，您可以使用 PowerShell。

或者，如果你真的很想探索 Azure 网站的管理 API，我建议你开始看[这里](https://github.com/WindowsAzure/azure-sdk-tools/tree/master/WindowsAzurePowershell/src/Management.WebSites/Cmdlets)并进行逆向工程。

# c# - ServiceStack/Razor - 如何在提交表单上获取 POST 数据？

> ID：15925046
> 
> 赞同：3
> 
> 时间：2013-04-10T11:51:53.020
> 
> 标签：c#, razor, model, servicestack, html-post

我正在尝试学习一些 ServiceStack 的东西。目前，我已经成功完成了本教程（几乎完成）：[http ://www.ienablemuch.com/2012/12/self-hosting-servicestack-serving.html](http://www.ienablemuch.com/2012/12/self-hosting-servicestack-serving.html)

我要执行的下一步是创建带有提交按钮的 html 表单并捕获输入的数据，例如 C# 代码中的变量。

我知道如何在 cshtml 文件中创建 html 表单，但我不知道在这种情况下如何使用 ServiceStack 获取输入的 POST 数据。您能否提供任何提示/代码示例。

另外，本教程中有一些我不明白的地方：

> 19\. 要为剃刀页面使用强类型模型，请使用继承指令。首先创建一个模型，它必须是公共的，并且它的复制到输出目录属性必须设置为复制，如果更新太

这个“模型”到底是什么以及如何创建它？并且，第 20 节，在 cshtml 代码中：

> @inherits 视图页面

那么，什么是“ViewPage”，这个语句究竟是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:58:58.050

解决了。所以，需要做的是：

*   创建内部具有公共属性的公共类。属性名称应与我的表单中的 post/get 值匹配

*   添加这个：`@inherits ViewPage<BillionaireServiceStackRazorSelfHosting.MyClass>`到cshtml

表单提交后，设置相应的属性。我不知道这是否是好方法（如果不是，请纠正我），但我已经在 MyClass 属性内的“设置”处理程序中添加了一些代码，而不是向使用捕获值的 cshtml 添加代码。

一切似乎都按我的意愿工作。

# python - RabbitMQ - pika - rabbit.js - node.js

> ID：15925050
> 
> 赞同：0
> 
> 时间：2013-04-10T11:52:04.007
> 
> 标签：python, node.js, rabbitmq, pika

我正在使用 Python、rabbitmq、pika、rabbit.js 和 node.js。

这个想法是向客户发送消息并采取相应的行动。有多种类型的消息正在发送。

所以，在服务器端，我有一个方法可以接收消息和交换将消息发送到：

```
import pika
def send(exchange, message):
    connection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost'))
    channel = connection.channel()
    channel.exchange_declare(exchange=exchange, type='fanout',)
    channel.basic_publish(exchange=exchange,
                          routing_key='',
                          body=message) 
```

仍然在服务器端，使用 node.js，我有多个上下文，我相信交换会根据名称调用它们：（注意：“客户端”是指连接到服务器的客户端列表。）

```
var context = require('rabbit.js').createContext();

context.on('ready', function() {

    var consumer_1 = context.socket('SUB');
    var consumer_2 = context.socket('SUB');

    consumer_1.setEncoding('utf8');
    consumer_1.connect('consumer_1', function (){
    consumer_1.on('data', function(data){
        try {
            io.sockets.emit("client_method_1", data);
        }catch(err){
            console.log("[CONSUMER 1 ERROR] " + err);
        }

    });

    consumer_2.setEncoding('utf8');
    consumer_2.connect('client_method_2', function (){
    consumer_2.on('data', function(data){
        try {
            clients[data.client].emit('client_method_2', data.action );
        }
        catch(err) {
            console.log("[CONSUMER 2 ERROR]: " + err);
        }
    });

}); 
```

这里发生的是 consumer_1 正在向所有客户端发送消息，而 consumer_2 正在向特定客户端发送消息，并且该部分运行良好。

问题是所有消费者都在接收来自所有交易所的消息。如果我尝试向 consumer_1 发送消息，consumer_2 也会收到该消息。

在实际方面，如果我打电话：

```
send('consumer_1', data) 
```

结果将是：

*   节点将发射到“client_method_1”；
*   并且还将尝试发送到“client_method_2”。

我如何打电话给特定的消费者而不打电话给其他人？

或者，我应该只声明一个消费者并过滤数据以调用不同的方法吗？

**编辑：**

按照 TokenMacGuy 的建议，我尝试将交换类型更改为“*主题*”或“*直接*”。那应该正是我想要的。

但是总有一个但是，不知何故我无法重新声明交换。当我重新启动节点时，我不断收到此错误：

```
[(406, "PRECONDITION_FAILED - cannot redeclare exchange 'consumer_1' in vhost '/' with different type, durable, internal or autodelete value")] 
```

好的，所以我检查了 rabbitmq 上的 list_exchanged 并且消费者仍然使用“ *fanout* ”。

```
 direct
amq.direct  direct
amq.fanout  fanout
amq.headers headers
amq.match   headers
amq.rabbitmq.log    topic
amq.rabbitmq.trace  topic
amq.topic   topic
celery  direct
celery.pidbox   fanout
consumer_1    fanout
consumer_2    fanout
consumer_3    fanout 
```

下一步是通过停止、重置（然后强制重置）和启动来重置 rabbitmq。

我已向 consumer_1 发送消息

现在 consumer_1 被列为“*直接*”：

```
 direct
amq.direct  direct
amq.fanout  fanout
amq.headers headers
amq.match   headers
amq.rabbitmq.log    topic
amq.rabbitmq.trace  topic
amq.topic   topic
celery  direct
celery.pidbox   fanout
consumer_1    direct
consumer_2    fanout
consumer_3    fanout 
```

好的，因为我只调用了 consumer_1 并且所有其他都出现在列表中，所以必须有一个包含该信息的文件。在哪里？我不知道！！

无论如何，consumer_1 上会发生相同的 PRECONDITION_FAILED 错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:30:31.653

`fanout`交换类型只有一种行为，将消息传递到绑定到它的每个队列。其他交换类型可以传递具有更窄标准的消息。最方便的可能是`topic`交换类型，它采用由通配符组成的绑定键，并导致所有匹配该通配符的消息被传递到那些特定的队列。（这里有一个详细的链接：[http](http://www.rabbitmq.com/tutorials/tutorial-five-python.html) ://www.rabbitmq.com/tutorials/tutorial-five-python.html ）

# python - python父目录

> ID：15925052
> 
> 赞同：2
> 
> 时间：2013-04-10T11:52:06.747
> 
> 标签：python, directory, parent

我想获取文件的父目录。此代码不起作用：

```
projectRoot = os.path.dirname(os.pardir(os.path.abspath(__file__))) 
```

怎么了？

（我正在开发一个 django 应用程序，并在我的应用程序的设置文件中使用此变量）

谢谢。

罗曼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:54:12.280

您可以使用访问父目录`..`

```
import os
os.path.join(os.path.dirname(__file__), os.pardir) 
```

或者：

```
import os
split_limit = 1 if os.path.isdir(__file__) else 0
parent_dir = os.path.abspath(__file__).rsplit(os.path.sep, split_limit)[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:55:36.333

就这么简单：

```
import os
def get_parent_dir(file_path):
    return os.path.dirname(file_path) 
```

要获取正在运行的脚本的 file_path，您可以这样做：

```
import sys
file_path = sys.argv[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:06:01.883

在我们的 django 项目中，我们使用下一个结构：我们有 prodaction_settings.py，其中放置了 prodaction 服务器和所有变量的设置。在文件 settings.py 中的本地计算机上

```
from os.path import dirname, abspath, join
TEST_DIR = dirname(abspath(__file__))
from production_settings import * 
```

使用模板添加本地文件夹：

```
TEMPLATE_DIRS = (
    join(TEST_DIR, 'tmpl'), 
) 
```

# c++ - C++ 中向量与列表的图形表示

> ID：15925053
> 
> 赞同：0
> 
> 时间：2013-04-10T11:52:09.413
> 
> 标签：c++, list, vector, stl

所以我遇到了一个编程竞赛问题，涉及在不同的图表上运行大量 DFS。

起初，我将我的图（邻接表表示）表示为一个集合向量：

```
vector< set<int> > graph; 
```

每次我使用空集时，还要根据给定的节点数初始化图形：

```
set<int> tmpSet; 
```

我像这样初始化它：

```
for(int j=0;j<N;j++)//N was the number of nodes needed for the graph
   graph.push_back(tmpSet); 
```

我用过

```
graph.clear(); 
```

每次清空图表。

为了在之后插入边，我使用了 std::set 的插入功能。

```
//Insert directed edge from u to v
graph[u].insert(v);
graph[v].insert(u); 
```

结果是程序消耗了太多内存并且速度太慢而无法通过测试。使用 push_back 函数的 std::list 也发生了同样的事情，这是一个**恒定**时间操作。然后，当我更改为 std::vector 时，内存消耗变得最小，我在 3 秒内通过了测试，而 std::set 和 std::list 即使在 20 秒内也无法通过测试。

我的问题是它与释放内部集合和列表的空间有关，但是向量的行为如何不同呢？

所以我的问题是，是否有人可以解释为什么会发生这种情况，以便我可以更好地理解 stl 容器在诸如您在另一个容器中有一个容器的情况下如何表现。

编辑：一些额外的信息：节点数约为 N=3000，测试次数超过 1000。这意味着我必须创建 1000 多个图表，这些图表都保存在变量“图表”中。我也知道 set 在 O(lgn) 时间内插入，而 vector 和 list 在 O(1) 中，所以我理解为什么 set只需要比向量长*一点的时间。*但是为什么 std::list 也失败了？还要让我提一下，set 和 list 以 100Mb 的内存使用完成，而 vector 以 3Mb 完成

好的最终编辑，这是我的代码，以准确显示我如何使用图表（列表版本）。程序中的其他任何地方都不会发生任何内存释放或更改图形数据。

```
vector< list<int> > graph;
list<int> tmpList;
int T; //num of test cases
int N; //num of nodes
int M; //num of edges
int main ()
{
    int u,v;
    scanf("%d",&T);//Read test cases
    for(int i=0;i<T;i++){

        scanf("%d %d",&N,&M);//Read number of nodes and number of edges
        for(int j=0;j<N;j++)
            graph.push_back(tmpList);

        for(int j=0;j<M;j++){
            scanf("%d %d",&u,&v);//Read edge from u to v
            graph[u].push_back(v);
            graph[v].push_back(u);
        }
        dfs();
        graph.clear();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:03:56.283

当您使用`std::set`保存相邻节点编号时，您插入并以对数时间获取一个很慢的元素。但是当您使用`std::vector` insert(push_back) 并获取一个元素时，是在恒定时间内完成的，因此存在时间差异。所以`std::vector`当你不需要在集合中找到某个元素时应该使用，`std::set`否则使用。

`std::list` 和之间的区别`std::vector`可能是因为`clear`功能。因为`list`它是线性的，但`vector`它是原子化的常数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:09:46.627

订购了一套。根据您提供的函子，它保证保持特定的顺序。无论您添加或删除什么元素（除非您添加重复项，这在集合中是不允许的），它始终是有序的。

向量具有完全且仅具有您明确给出的顺序。向量中的项目是您放置它们的位置。如果你把它们乱序，那么它们就是乱序的；您现在需要对容器进行分类以将它们按顺序放回原处。

诚然，set 的用途相对有限。通过适当的纪律，可以将项目插入向量并保持有序。但是，如果您不断地在容器中插入和删除项目，vector 会遇到很多问题。它将进行大量元素的复制/移动等，因为它实际上只是一个数组。

将项目插入向量所需的时间与向量中已有项目的数量成正比。将一个项目插入一个集合所花费的时间与项目数量的对数成正比。如果项目的数量很大，那将是一个巨大的差异。对数（100,000）为 5；这是一个重大的速度改进。移除也是如此。

但是，如果您在初始化时一次完成所有插入，则没有问题。您可以将所有内容插入向量中，对其进行排序（支付一次费用），然后使用标准算法对已排序的向量进行查找元素并遍历已排序的列表。虽然对集合元素的迭代并不是很慢，但对向量的迭代更快。

因此，在某些情况下，已排序的向量胜过一组。话虽如此，除非您知道有必要，否则您真的不应该为这种优化的费用而烦恼。因此，除非您对正在编写的系统有经验（因此知道您需要那种性能）或手头有分析数据告诉您需要向量而不是集合，否则请使用集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:06:30.517

像往常一样，性能问题的最佳答案是为您的用例分析两种实现，看看哪个更快。

一般来说，如果您在数据结构中插入（除了末尾之外），那么向量可能会更慢，否则在大多数情况下，如果仅针对数据局部性问题，向量预计会比列表执行得更好，这意味着如果两个元素在数据集中是相邻的 在内存中是相邻的，那么下一个元素将已经在处理器的缓存中，并且不必将内存页面错误地放入缓存中。

还要记住，向量的空间开销是恒定的（3 个指针），而列表的空间开销是为每个元素支付的，这也减少了可以驻留在缓存中的完整元素的数量（数据加上开销）任何时候。

# javascript - 使用 Javascript - 如何单击没有 ID、值或名称的提交按钮

> ID：15925057
> 
> 赞同：4
> 
> 时间：2013-04-10T11:52:23.367
> 
> 标签：javascript

如何使用 javascript “单击”没有 id、值、类或名称的按钮？

按钮的相关代码是：

```
<div class="classname anotherclassname" title="">
    <div>
        <button type="submit"><i class="anotherclass anotherclassname"></i>ImAButton</button>
    </div>
</div> 
```

我会举一个到目前为止的例子，因为我知道这在 stackoverflow 上只是很好的礼仪，但我什至不知道从哪里开始。我目前知道如何使用 javascript 单击按钮的唯一方法是使用以下方法：

```
document.getElementById("myButtonId").click(); 
```

这不适用于这里。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T11:58:03.073

如果您只支持现代浏览器和 IE8 及更高版本没问题，那么您可以使用[`document.querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)选择元素。鉴于该按钮是页面上唯一的提交类型按钮，您可以执行以下操作：

```
document.querySelectorAll("button[type='submit']")[0].click(); 
```

querySelectorAll 采用任何有效的 CSS 选择器（IE8 仅支持 CSS2 选择器）。因此，如果您需要使选择更具体，您可以像使用任何 CSS 选择器一样使选择器更具体。例如这样的事情：

```
document.querySelectorAll(".classname button[type='submit'"])[0].click(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:59:36.813

您可以使用页面上的所有按钮

```
buttons = document.getElementsByTagName('button');

document.getElementsByTagName('button')[0].click(); 
```

可能会触发单击第一个按钮。

# wcf - 如何将 [DataMember] 用于 IEnumerable 用于 WCF 中的财产

> ID：15925060
> 
> 赞同：0
> 
> 时间：2013-04-10T11:52:38.740
> 
> 标签：wcf

我正在尝试将 [DataContract] 和 [DataMember] 用于以下课程。

```
[DataContract]
public abstract class TestClass
{
    #region Public Contructors        
    protected TestClass()
    {
    }
    #endregion

    #region Public Properties   

    [DataMember]
    public IEnumerable<string> Subjects { get; set; }

    #endregion      

} 
```

**我收到以下错误**

> 无法序列化 System.Collections.Generic.IEnumerable`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]] 类型的成员 TestClass.Subjects，因为它是一个接口

请问我应该怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:54:57.017

正如错误消息所说，您不能序列化像`IEnumerable`. 尝试使用具体的集合，`List<string>`例如`string[]`.

请记住，`serialized`您通过 WCF 发送的类可能最好是代理类或 DTO，这样您就不会弄乱您的业务模型。

希望这可以帮助

# list - Spring MVC：列表 需要作为命令对象传递

> ID：15925063
> 
> 赞同：0
> 
> 时间：2013-04-10T11:52:47.867
> 
> 标签：list, jsp, spring-mvc

我需要将 List 作为 commandObject 传递。

**我的代码**

```
public class Employee 
{       
List<Dept> dlist = new ArrayList<Dept>();    
public List<Dept> getDlist()
    {
return dlist;
}    
public void setDlist(List<Dept> dlList)
    {
this.dlist = dlist;
}       
} 
```

**我的jsp页面**

```
<c:forEach var="d" items="${dlist}">
<spring:bind path="dlist[0].projectId">
<input type="text" name="projectId" value='<c:out value="${d.projectId}" />' />
</spring:bind>
</c:forEach> 
```

但它没有通过，我犯了错误，可以提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:56:11.863

您将不得不将列表包装在一个类中，这看起来就像您对 Employee 所做的那样？

它应该看起来像这样：

```
<form:form id="frmEmployee" commandName="myEmployee" action="/Whatever/" method="POST">
    <c:forEach items="${myEmployee.dlist}" var="dept" varStatus="status"><tr>
      <tr><td>
        <form:input path="dlist[status.index].projectId" id="title"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:56:29.850

您的 forEach 循环已损坏，您应该遍历命令对象列表中的元素。

使用*表单标签*而不是*spring:bind 标签*

像这样试试

```
<c:forEach var="d" items="${command.dlist}" varStatus="status">
  <form:input path="dlist[status.index].projectId" />
</c:forEach> 
```

# android - 一个按钮“窃取”另一个按钮的块？

> ID：15925066
> 
> 赞同：0
> 
> 时间：2013-04-10T11:52:51.870
> 
> 标签：android, button

如果我在我的应用程序中按下按钮 3，他首先执行他的“任务”，然后他执行，按钮 4 应该做什么。按钮 4 什么也不做。你能在我的代码中找到错误吗？

```
public boolean onTouch(View v, MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN){
    if(v == button1) 
    {MediaPlayer mediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.1);
     mediaPlayer.start();}
    if(v == button2)
    {MediaPlayer mediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.2);
     mediaPlayer.start();}  
    if(v == button3) 
    {MediaPlayer mediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.3);
     mediaPlayer.start();}
    if(v == button4)
    {MediaPlayer mediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.4);
     mediaPlayer.start();   
    }

    }
    return false;
}} 
```

（ ACTION_DOWN 正在“抓住”整个方法，这很好）

在我制作的另一个应用程序中，这种结构有效。

更新：我还添加了按钮 5 6 7 8 9 的功能。按钮 3 现在执行从 3 到 9 的所有操作。

我错过了一个括号或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:09:25.070

抱歉，我在分配按钮时出错了。

# android - 如何为水平图像滚动列表分配背景容器

> ID：15925068
> 
> 赞同：2
> 
> 时间：2013-04-10T11:52:54.923
> 
> 标签：android, android-layout, horizontalscrollview

我想显示水平图像滚动列表，所以我在谷歌上搜索，发现非常好的教程，但没有一个解释为该水平列表实现动态容器的想法。

我想在水平列表的开头显示一个图像，在列表的末尾显示一个图像。（如箭头图像）并且我想为我的图像滚动列表设置图像容器，它非常令人困惑，而且像我一样特别新鲜。我被困在这一点上，以解释我到底想要什么，我附上了一张图片和我当前的代码。

任何帮助表示赞赏。请指导我。感谢您宝贵的时间。

这是主要活动代码

```
MyHorizontalLayout myHorizontalLayout;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myHorizontalLayout = (MyHorizontalLayout)findViewById(R.id.mygallery);
    String ExternalStorageDirectoryPath = Environment
            .getExternalStorageDirectory()
            .getAbsolutePath();
    String targetPath = ExternalStorageDirectoryPath + "/test/";
    Toast.makeText(getApplicationContext(), targetPath, Toast.LENGTH_LONG).show();
    File targetDirector = new File(targetPath);
     File[] files = targetDirector.listFiles();
    for (File file : files){
    myHorizontalLayout.add(file.getAbsolutePath());
    }    
} 
```

这是我的 Horizo​​ntalLayout 代码

```
public class MyHorizontalLayout extends LinearLayout {
Context myContext;
ArrayList<String> itemList = new ArrayList<String>();
public MyHorizontalLayout(Context context) {
    super(context);
    myContext = context;
}
public MyHorizontalLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    myContext = context;
}
public MyHorizontalLayout(Context context, AttributeSet attrs,
        int defStyle) {
    super(context, attrs, defStyle);
    myContext = context;
}
void add(String path){
    int newIdx = itemList.size();
    itemList.add(path);
    addView(getImageView(newIdx));  
}
ImageView getImageView(final int i){
    ImageView imageView = new ImageView(myContext);
    imageView.setLayoutParams(new LayoutParams(150, 150));
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    Bitmap bm = null;
    if (i < itemList.size()){
        bm = decodeSampledBitmapFromUri(itemList.get(i), 150, 150);
    }
    imageView.setImageBitmap(bm);
    imageView.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            Toast.makeText(myContext, 
                    "Clicked - " + itemList.get(i), 
                    Toast.LENGTH_LONG).show();
        }});

    return imageView;
}
public Bitmap decodeSampledBitmapFromUri(String path, int reqWidth, int reqHeight) {
    Bitmap bm = null;
    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);
    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);
    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    bm = BitmapFactory.decodeFile(path, options); 
    return bm;  
}
public int calculateInSampleSize(
    BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;
    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);    
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);      
        }   
    }
    return inSampleSize;    
} 
```

这是XML文件

```
<HorizontalScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="200dp" >
    <com.example.test.MyHorizontalLayout
        android:id="@+id/mygallery"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" /> 
```

![水平列表](https://i.stack.imgur.com/Wihx2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:36:31.590

使用相对布局作为基础放置背景（滚动视图背景），在其中添加您的水平布局和使用框架布局的两个箭头。祝你好运！

# rubymotion - 什么是 UIPageViewController#initWithTransitionStyle 选项键？

> ID：15925073
> 
> 赞同：1
> 
> 时间：2013-04-10T11:53:02.687
> 
> 标签：rubymotion

rubymotion[文档](http://www.rubymotion.com/developer-center/api/UIPageViewController.html#initWithTransitionStyle%3anavigationOrientation%3aoptions%3a-instance_method)说：

> options (Hash) — 选项字典。有关键，请参阅“选项键”。</p>

但是哪里？看哪里？

[原始ios 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)中有键，但是 ruby​​motion 类似物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:45:27.457

密钥将与您引用的 iOS 文档中的相同

```
UIPageViewControllerOptionSpineLocationKey
UIPageViewControllerOptionInterPageSpacingKey 
```

> **`UIPageViewControllerOptionSpineLocationKey`**
> 脊柱的位置。
> 有关可能的值，请参阅“<a href="http://developer.apple.com/library/ios/documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html#//apple_ref/c/tdef/UIPageViewControllerSpineLocation" rel=" nofollow">脊柱位置。” 仅当过渡样式为 时，脊椎位置才有效`UIPageViewControllerTransitionStylePageCurl`。
> 如果过渡样式为`UIPageViewControllerTransitionStylePageCurl`，则此属性的默认值为，`UIPageViewControllerSpineLocationMin`否则，默认值为 UIPageViewControllerSpineLocationNone。
> 
> **`UIPageViewControllerOptionInterPageSpacingKey`**
> 页面之间的空间，以磅为单位。该值应该是包裹在 NSNumber 实例中的 CGFloat。默认值为零。仅当过渡样式为 时，页间距才有效 `UIPageViewControllerTransitionStyleScroll`。

如果您的问题是关于文档，这可能是维护者提出的问题，因为其他常量有页面，例如[UIInterfaceOrientation](http://www.rubymotion.com/developer-center/api/UIInterfaceOrientation.html)

# c# - Umbraco，按名称和数据类型获取节点

> ID：15925076
> 
> 赞同：3
> 
> 时间：2013-04-10T11:53:11.133
> 
> 标签：c#, select, umbraco, nodes

我有一个名为“Demo”的数据类型我还有一个名为“Test”的页面/节点。如果我不在任何类型的上下文中，我将如何选择这个页面/节点？

我尝试过使用新节点（-1）并选择我的方式，但我真的无法弄清楚这个..

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T18:01:44.223

最简单的方法可能是使用以下[uQuery](http://our.umbraco.org/documentation/Reference/Querying/uQuery/)扩展之一：

*   [GetNodesByName(字符串)](http://our.umbraco.org/documentation/Reference/Querying/uQuery/Content/Nodes#GetNodesByName%28string%29)
*   [GetNodesByType（字符串或整数）](http://our.umbraco.org/documentation/Reference/Querying/uQuery/Content/Nodes#GetNodesByType%28stringorint%29)

这里有几个例子：

**GetNodesByName（字符串）：**

```
umbraco.NodeFactory.Node node = uQuery.GetNodesByName("Page Name")
    .Where(n => n.NodeTypeAlias == "NodeTypeAlias").FirstOrDefault();

if (node != null)
{
    //...
} 
```

**GetNodesByType（字符串或整数）：**

```
umbraco.NodeFactory.Node node = uQuery.GetNodesByType("NodeTypeAlias")
    .Where(n => n.Name == "Page Name").FirstOrDefault();

if (node != null)
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-06T14:17:18.570

使用 Umbraco 6+，我认为这会更好......

```
public static IPublishedContent GetNodeByAlias(string alias)
{
    var umbracoHelper = new UmbracoHelper(UmbracoContext.Current);
    var contentNode = umbracoHelper.TypedContentSingleAtXPath(String.Format("//{0}", alias));

    return contentNode;
} 
```

这仅采用文档类型别名并使用当前 Umbraco 上下文将您的节点查找为 IPublishedContent。UmbracoHelper 也为您提供了很多选择。

# git - 为什么 git ls-files --ignore 需要排除模式？

> ID：15925079
> 
> 赞同：17
> 
> 时间：2013-04-10T11:53:20.490
> 
> 标签：git

在命令中使用排除模式的要求背后的逻辑是什么`git ls-files --ignored`？

来自`git help ls-files`：

> `-i, --ignored`
> 
> 在输出中仅显示被忽略的文件。在索引中显示文件时，仅打印与排除模式匹配的文件。显示“其他”文件时，仅显示那些与排除模式匹配的文件。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-10T13:47:42.323

首先让我确保你不会`--ignored`混淆`--other`.

`--other`是列出未跟踪文件的选项。从`git-ls-files`（强调我的）手​​册中：

> `-o, --others`
> 
> 在输出中显示其他**（即未跟踪的）**文件

就是说，让我们看看有什么`--ignored`作用。无论您列出什么，无论是跟踪文件、未跟踪文件、修改文件等，您都可以从输出中排除一些文件。把它想象成一个免费的`grep -v`自动完成的输出。例如：

```
git ls-files --other --exclude=*.o 
```

将列出所有不匹配的未跟踪文件`*.o`。排除模式与`.gitignore`. 实际上，`.gitignore`确定在列表完成后过滤`--other`输出时会输出`--exclude`什么（或者至少这是观察到的行为）¹。

现在`--ignored`简单地还原输出。因此，被排除的`exclude=`内容将被打印出来，而未被排除的内容将被省略。因此，例如：

```
git ls-files --other --exclude=*.o --ignored 
```

将打印所有匹配的未跟踪文件**。**`*.o`

¹不完全一样，`--exclude`只过滤未跟踪的文件，因此如果您列出跟踪的文件，则`--exclude`不会排除任何内容。但是，`--ignored`它会列出应该被排除的文件。这有点奇怪。

**结论：** `--ignored`基本上会恢复命令行中给出的排除模式。默认情况下，排除模式为空（您可以看到所有内容），因此`--ignored`没有任何排除模式会导致*所有内容都*被忽略。这永远不会有用，这就是为什么需要排除模式`--ignored`才能工作。

* * *

既然`--exclude-standard`提到了，我也想对此进行扩展。`--exclude-standard`也会在列表中添加被忽略的模式（例如 write in `.gitignore`）作为排除模式。所以想想下面的命令：

```
git ls-files --ignored --exclude-standard 
```

首先，此命令列出所有跟踪的文件。然后给出`--ignored`命令，它只会打印那些与排除模式匹配的文件。给定，将打印`--exclude-standard`与模式匹配的有效文件。`.gitignore`但这些是您未跟踪的文件。如此有效，您将什么也看不到。*您会*看到的唯一情况是，如果您正在跟踪您也提到在`.gitignore`.

换句话说，如果该命令输出任何内容，则意味着您已经告诉 git 忽略某些文件，但是您违反了自己的规则并将它们添加到存储库中。

* * *

其他有趣的命令可能是：

```
git ls-files --other --exclude-standard 
```

显示您未在 中指定的所有未跟踪文件`.gitignore`。您还会在`git status`.

```
git ls-files --other --ignored --exclude-standard 
```

显示您成功忽略的所有未跟踪文件`.gitignore`。换句话说，（假设先前的查询是空的，即没有未忽略的未跟踪文件）这显示了当前目录中不属于存储库的所有文件。这对于检查不应被忽略且必须放入存储库中的文件很有用。

# c++ - 从 IplImage* 到 cv::MAT 的转换

> ID：15925084
> 
> 赞同：25
> 
> 时间：2013-04-10T11:53:33.330
> 
> 标签：c++, opencv, iplimage, mat

我搜索了将 IplImage* 转换为 Mat，但所有答案都是关于转换为 cvMat。

我该怎么做？Mat 和 cvMat 有什么区别？

提前致谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-06-15T16:01:18.713

作为记录：查看 core/src/matrix.cpp 似乎构造函数确实`cv::Mat(IplImage*)`消失了。

但我找到了这个替代方案：

```
IplImage * ipl = ...;
cv::Mat m = cv::cvarrToMat(ipl);  // default additional arguments: don't copy data. 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-22T09:44:43.250

这是一个很好的解决方案

```
Mat(const IplImage* img, bool copyData=false); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-10T11:56:15.450

推荐的方式是[`cv::cvarrToMat`](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#cvarrtomat)函数

`cv::Mat`- 是 OpenCV 2.x 的基础数据结构

`CvMat`- 是旧的 C 类比`cv::Mat`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-10T11:57:28.380

查看[Mat 文档](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)。

```
// converts old-style IplImage to the new matrix; the data is not copied by default
Mat(const IplImage* img, bool copyData=false); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-12T04:05:10.323

*   cv::Mat 或 Mat，两者都是一样的。

*   Mat 有一个操作符 CvMat() 所以简单的赋值就可以了

**将 Mat 转换为 CvMat**

```
Mat mat = ---------;
CvMat cvmat = mat; 
```

**将 CVMat 转换为 Mat**

```
Mat dst = Mat(cvmat, true); 
```

**将 Mat 转换为 IplImage***

**> 对于单通道**

```
IplImage* image = cvCloneImage(&(IplImage)mat); 
```

**> 三通道**

```
IplImage* image = cvCreateImage(cvSize(mat.cols, mat.rows), 8, 3);
IplImage ipltemp = mat;
cvCopy(&ipltemp, image); 
```

希望这对您有所帮助。干杯:)

# android - 在 google maps api v2 for android 中使用多个标记

> ID：15925087
> 
> 赞同：0
> 
> 时间：2013-04-10T11:53:37.550
> 
> 标签：android, google-maps-api-2

我正在使用 google maps api v2 for android 在 infoWindow 中显示业务详细信息来实现这一点，我使用 asynctask 从服务器加载交易详细信息。当用户单击标记时，需要显示信息窗口。

我的问题是我为所有标记获得相同的信息窗口（相同的数据）我应该怎么做才能在信息窗口中显示标记信息？

另一个问题是由于某种原因， onMarkerClick() 回调不起作用。

我很乐意编写示例代码或告诉我如何使用 infoWindowAdapter 以及为什么 onMarkerClick 不起作用？

```
public class GetDealsNearbyTask extends AsyncTask<String, Integer, List<Deal>>{
Context context;
Editor editor;
SharedPreferences settings;
Editor settingsEditor;
private FragmentActivity activity;
private UserUtil user;
private GoogleMap map;

HashMap<Marker, Deal> dealMarker;

public GetDealsNearbyTask(Context context, FragmentActivity activity) {
    this.context = context;
    this.activity = activity;
    settings = context.getSharedPreferences(Constants.SETTINGS_FILE_NAME,Context.MODE_PRIVATE);
    settingsEditor = settings.edit();
    user = new UserUtil(activity);

}

@Override
protected void onPreExecute() {
}

@Override
protected List<Deal> doInBackground(String... urls) {
    HttpConnection httpConnection = new HttpConnection(urls[0]);
    String currentSecurityToken = settings.getString(Constants.SECURITY_TOKEN, null);
    JSONObject json = new JSONObject();
    double lat = user.getSelfLocation().getLatitude();
    double lon = user.getSelfLocation().getLongitude();

    // JSON data:
    try {
        json.put(Constants.SECURITY_TOKEN, currentSecurityToken);
        json.put(Constants.Latitude, lat);
        json.put(Constants.Longitude, lon);

    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    // Set HTTP parameters
    StringEntity se = null;
    try {
        se = new StringEntity(json.toString());
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    httpConnection.AddParam(se);
    httpConnection.AddHeader("Content-type", "application/json");

    try {
        httpConnection.Execute(RequestMethod.POST);
    } catch (Exception e) {
        e.printStackTrace();
    }

    String response = httpConnection.getResponse();
    String errorMessage = httpConnection.getErrorMessage();
    if (errorMessage.equalsIgnoreCase("OK")){
        return saveToPreferences(response);
    }else{
        return null;
    }
}

private List<Deal> saveToPreferences(String response) {
    List<Deal> deals = null;
    try {
        JSONObject responseObject = new JSONObject(response);
        String securityToken = (String)responseObject.get(Constants.SECURITY_TOKEN);
        settingsEditor.putString(Constants.SECURITY_TOKEN, securityToken).commit();
        String status = (String)responseObject.get("Status");

        JSONArray results = responseObject.getJSONArray("Results");
        deals = new ArrayList<Deal>();
        for (int i = 0; i < results.length(); i++) { 
            JSONObject jDeal = results.getJSONObject(i);
            String branchAdress = jDeal.getString(Constants.BranchAdress);
            String branchName = jDeal.getString(Constants.BranchName);
            String currency = jDeal.getString(Constants.Currency);
            int actualPrice = jDeal.getInt(Constants.ActualPrice);
            int dealCode = jDeal.getInt(Constants.DealCode);
            String discount = jDeal.getString(Constants.Discount);
            int distance = jDeal.getInt(Constants.Distance);
            String endDateTime = jDeal.getJSONObject(Constants.Ending).getString(Constants.ExpirationDateTime);
            int interestCode = jDeal.getInt(Constants.InterestCode);
            double lat = jDeal.getDouble(Constants.Latitude);
            double lon = jDeal.getDouble(Constants.Longitude);
            int ourPick = jDeal.getInt(Constants.OurPick);
            int rating = jDeal.getInt(Constants.Rating);
            String title = jDeal.getString(Constants.Title);
            String smallImageUrl = jDeal.getString("SmallPhoto");
            deals.add(new Deal(interestCode, dealCode, rating, title, branchName, smallImageUrl, branchAdress, endDateTime, lat, lon));

        }
    }catch (JSONException e) {
        e.printStackTrace();
    }
    return deals;

}
@Override
protected void onPostExecute(final List<Deal> data) {
    // get reference to GoogleMap
    this.map = null;
    SupportMapFragment mapFragment = (SupportMapFragment) activity.getSupportFragmentManager().findFragmentById(R.id.map);
    this.map = mapFragment.getMap();

    // move camera to self location
    LatLng selfLocation = new LatLng(user.getSelfLocation().getLatitude(), user.getSelfLocation().getLongitude());
    map.animateCamera(CameraUpdateFactory.newCameraPosition(new CameraPosition(selfLocation, 10, 0, 0)));

    // set self location marker configuration
    MarkerOptions markerOptions = new MarkerOptions();
    markerOptions.position(selfLocation );
    markerOptions.icon(BitmapDescriptorFactory.fromResource(R.drawable.logo));
    markerOptions.title("this is you!");
    map.addMarker(markerOptions);

    // add deals markers
    for (final Deal deal : data) {
        int markerIcon = R.drawable.ic_menu_preferences;
        switch (deal.getInterestCode()) {
        case 2:
            markerIcon =  (R.drawable.books_blue);
            break;
        case 3:
            markerIcon =  (R.drawable.rest_blue);
            break;
        case 4:
            markerIcon =  (R.drawable.bar_blue);
            break;
        case 5:
            markerIcon =  ( R.drawable.electronic_blue);
            break;
        case 6:
            markerIcon =  (R.drawable.spa_blue);
            break;
        case 7:
            markerIcon =  (R.drawable.sports_blue);
            break;
        case 8:
            markerIcon =  (R.drawable.cloth_blue);
            break;
        case 9:
            markerIcon =  (R.drawable.coffee_blue);
            break;

        default:
            break;
        }
        try {
            Marker marker = map.addMarker(new MarkerOptions().position(new LatLng(deal.getLat(), deal.getLon())).title("Marker").icon(BitmapDescriptorFactory.fromResource(markerIcon)));
            dealMarker.put(marker, deal);

        } catch (Exception e) {
            Log.e("MAP", "faild adding marker in " + deal.getLat() + " , " + deal.getLon() + " interestCode: " + deal.getInterestCode() + "message: " + e.getMessage());
        }

    }

    // handle click event for the markers
    map.setOnMarkerClickListener(new OnMarkerClickListener() {

        @Override
        public boolean onMarkerClick(Marker marker) {
            Deal deal = dealMarker.get(marker);
            Toast.makeText(context, "the title is: " + deal.getTitle(), Toast.LENGTH_SHORT).show();
            GoozInfoWindowAdapter adapter = new GoozInfoWindowAdapter(activity.getLayoutInflater(), deal);
            map.setInfoWindowAdapter(adapter);
            marker.showInfoWindow();
            return false;
        }
    });

}

private Marker placeMarker(Deal deal) {
      Marker m  = map.addMarker(new MarkerOptions()
       .position(new LatLng(deal.getLat(),deal.getLon()))
       .title(deal.getTitle()));
    return m;
}

@Override
protected void onProgressUpdate(Integer... progress) {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:56:25.793

看看这段代码`InfoWindowAdapter`，有注释解释了几乎每一行都做了什么。

```
 // Defines the contents of the InfoWindow
            @Override
            public View getInfoContents(Marker args) {

                // Getting view from the layout file info_window_layout
                View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);

                // Getting the position from the marker
                clickMarkerLatLng = args.getPosition();

                TextView title = (TextView) v.findViewById(R.id.tvTitle);
                title.setText(args.getTitle());

                //Setting the click listener
                map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {          
                    public void onInfoWindowClick(Marker marker) 
                    {
                        //Check if the clicked marker is my location
                        if (SGTasksListAppObj.getInstance().currentUserLocation!=null)
                        {   
                            if (String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) &&
                                    String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLongitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                            {
                                Toast.makeText(getApplicationContext(), "This your current location, navigation is not needed.",  Toast.LENGTH_SHORT).show();
                            }
                            else
                            {
                                FlurryAgent.onEvent("Start navigation window was clicked from daily map");
                                tasksRepository = SGTasksListAppObj.getInstance().tasksRepository.getTasksRepository();
                                for (Task tmptask : tasksRepository)
                                {
                                    String tempTaskLat = String.valueOf(tmptask.getLatitude());
                                    String tempTaskLng = String.valueOf(tmptask.getLongtitude());

                                    Log.d(TAG, String.valueOf(tmptask.getLatitude())+","+String.valueOf(clickMarkerLatLng.latitude).substring(0, 8));

                                    if (tempTaskLat.contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) && tempTaskLng.contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                                    {  
                                        task = tmptask;
                                        break;
                                    }
                                }
                                Intent intent = new Intent(getApplicationContext() ,RoadDirectionsActivity.class);
                                intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                                startActivity(intent);

                            }
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Your current location could not be found,\nNavigation is not possible.",  Toast.LENGTH_SHORT).show();
                        }
                    }
                });

                // Returning the view containing InfoWindow contents
                return v;

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T20:39:25.333

我在使用 map.setInfoWindowAdapter 时遇到了相同的行为（相同的信息窗口，所有标记的数据都相同），这就是为我解决的问题：经过一些调试，我发现当用户单击时完成了对 setInfoWindowAdapter() 的调用标记。对我来说，我用来在视图中设置属性的对象不再在范围内。我更改了代码，以便在运行时获取对象，然后在视图中设置属性。

```
map.setInfoWindowAdapter(new InfoWindowAdapter() {

    @Override
    public View getInfoContents(Marker marker) {

        View view = instance.getLayoutInflater(getArguments()).inflate(R.layout.my_infowindow, null);

        TextView row1 = (TextView)view.findViewById(R.id.row1);
        TextView row2 = (TextView)view.findViewById(R.id.row2);

        // Get the object so you can use it to set properties in the view
        // In my case I have an ArrayList of Objects. One of the properties of the object is a String that is the same as marker.getTitle() but whatever you need to do, get your runtime data:
        Object myObj = getMyObject(marker.getTitle);

        row1.setText(myObj.getPropertyOne());
        row2.setText(myObj.getPropertyTwo());

        return view;
    }

    @Override
    public View getInfoWindow(Marker marker) {
        return null;
    }

}); 
```

# linux-kernel - TCP 不适用于自定义网络设备驱动程序

> ID：15925088
> 
> 赞同：0
> 
> 时间：2013-04-10T11:53:39.577
> 
> 标签：linux-kernel, linux-device-driver, kernel-module

我们已经为电力线通信开发了一个 ASIC，并且正在为此开发一个以太网设备驱动程序。该芯片通过串行外设接口连接到我们的主处理器（iMX233 ARM9）。我们开发的内核模块在加载时注册了一个以太网设备“gvspi”。接收时。我们通过 SPI 从 ASIC 获取以太网帧并将其存储在一个字节数组中，然后分配一个 sk_buff，将数组中的数据处理到这个 sk_buff 并将其传递给 TCP/IP 层。在传输过程中，我们通过 SPI 将以太网帧（通过 sk_buff->data 检索到的字节数组）发送到 ASIC，然后将其输出到电源线上。

我们有这样的设置：

**ARM Board1** --SPI--> **ASIC** ---电源线---> **ASIC** --SPI--> **ARM Board2**

两个运行 Linux 内核版本 2.6.31 的 ARM 板

我们能够使用我们的驱动程序相互 ping（使用 ping）ARM 板。我们能够在 ARM 板之间双向交换 UDP 数据包（使用 iperf）。但是我们无法在两块板之间建立 TCP 连接（使用 telnet/telnetd 或 iperf）。

似乎只有包含 TCP 的帧没有被 TCP/IP 层处理。会是这样吗？我们是否在将 sk_buff 传递给上层之前正确填充了它？

这是驱动程序代码的适当部分，它创建、填充并将 sk_buff 传递到上层（u32 rx_data 和 u8 rx_len 存储刚刚接收到的以太网帧）：

```
skb1 = alloc_skb((rx_len + NET_IP_ALIGN), GFP_ATOMIC);
skb_reserve(skb1, NET_IP_ALIGN);
skb_put(skb1, rx_len);
memcpy(skb1->data, rx_data, rx_len );               
skb1->protocol = eth_type_trans(skb1,gvspi_dev);
skb_reset_network_header(skb1);
skb_reset_transport_header(skb1);

gvspi_dev->stats.rx_bytes += skb1->len;
gvspi_dev->stats.rx_packets++; 

printk("Frame sent to TCP/IP layer...");

if (netif_rx_ni (skb1) != NET_RX_SUCCESS) {
    kfree_skb (skb1);
    gvspi_dev->stats.rx_dropped++;      
    return ERROR;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:30:37.077

所以我们能够找出问题 - RTFM 类别问题。我们为自定义以太网驱动程序分配了 MAC 地址为 11:22:33:44:55:66，这当然是一个多播地址（请参见[此处](http://en.wikipedia.org/wiki/MAC_address#Address_details)的图表）

对于那些想要了解详细信息的人：查看内核源代码的 tcp_ipv4.c 中 tcp_v4_rcv() 的第[1615行。](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/net/ipv4/tcp_ipv4.c?v=2.6.25.8#L1615)

每当我们使用多播 MAC 地址时，发送到这个 TCPv4 接收函数的 sk_buff 都会预先设置为来自低层的[PACKET_MULTICAST 。](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/include/linux/if_packet.h?v=2.6.25.8#L28)因此，此时 sk_buff 被拒绝，因为接收到的帧没有按照 TCP 的要求专门定向到我们的主机。多播仅在 UDP 等无连接协议中有效。

# c# - C# 通用 Linq 查询

> ID：15925091
> 
> 赞同：6
> 
> 时间：2013-04-10T11:53:41.987
> 
> 标签：c#, linq

我需要编写一些像这样的通用搜索方法：

```
public List<T> Search<T>(SearchParamsBase searchParams)
{
    using (var context = new TestEntities())
    {
        var dataType = TypeMap.Get(typeof (T));
        var dataSet = context.Set(dataType);

        var searchQuery = CreateQuery((IEnumerable<object>) dataSet), searchParams)

        return searchQuery.ToList()
    }
} 
```

我有一个`CreateQuery()`应该过滤`IEnumerable`对象的函数。这个函数对于所有类都是不同的。例如：

```
CreateQuery(IEnumerable<object> collection, SearchParamsBase searchParams)
{
    var search = (SomeSearchImplementation)searchParams;
    // filter 
    collection = collection.Where(x => x.Name == search.Name);
    // select page
    collection = collection.Skip(search.Page * search.CountPerPage);
    collection = collection.Take(search.CountPerPage);
    // order by and so on
    // ...
    return collection;
} 
```

我怎样才能正确地实现这个想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T12:16:56.423

您基本上想要在这里做的是动态构造一个 LINQ 查询。为此，您需要在运行时修改/构建表达式树。如果您不熟悉表达式树和`Expression<T>`我推荐本文的类型以及“另请参阅”部分中的参考页面：

[http://msdn.microsoft.com/en-us/library/bb397951.aspx](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

现在您已经了解了基本概念，让我们来实现动态排序。下面的方法是一个扩展，`IQueryable<T>`这意味着它不仅适用于列表，而且适用于每个 LINQ 数据源，因此您也可以直接针对数据库使用它（在分页和排序方面比在内存操作中更有效）。该方法采用您要排序的属性名称和排序方向（升序/降序）：

```
public static IQueryable<T> OrderByDynamic<T>(this IQueryable<T> query, string sortColumn, bool descending) 
{
    // Dynamically creates a call like this: query.OrderBy(p => p.SortColumn)
    var parameter = Expression.Parameter(typeof(T), "p");

    string command = "OrderBy";

    if (descending)
    {
        command = "OrderByDescending";
    }

    Expression resultExpression = null;    

    var property = typeof(T).GetProperty(sortColumn);
    // this is the part p.SortColumn
    var propertyAccess = Expression.MakeMemberAccess(parameter, property);

    // this is the part p => p.SortColumn
    var orderByExpression = Expression.Lambda(propertyAccess, parameter);

    // finally, call the "OrderBy" / "OrderByDescending" method with the order by lamba expression
    resultExpression = Expression.Call(typeof(Queryable), command, new Type[] { typeof(T), property.PropertyType },
       query.Expression, Expression.Quote(orderByExpression));

    return query.Provider.CreateQuery<T>(resultExpression);
} 
```

现在您可以编写此代码以按属性对数据集进行`Name`排序`ascending`：

```
dataSet.OrderByDynamic("Name", false) 
```

为动态过滤创建扩展方法遵循相同的模式。如果你理解了上面的代码，那对你来说就不是问题了。

# c# - PerformanceCounterCategory.GetCategories 与 Perfmon 不一致

> ID：15925092
> 
> 赞同：15
> 
> 时间：2013-04-10T11:53:48.913
> 
> 标签：c#, .net, performancecounter, perfmon

好的，所以我基本上是在尝试创建一个已安装性能计数器类别的列表，就像您在 PerfMon 中获得的那样。为此，我正在使用

```
System.Diagnostics.PerformanceCounterCategory.GetCategories() 
```

这似乎有效，直到您检查列表并发现其中一些丢失。我发现的第一个缺失是 ReadyBoost Cache。这是因为项目设置为在“x86”上编译。将其更改为“任何 CPU”可以解决该问题。

但是仍然缺少一些，例如，其中一台测试机器具有“授权管理器应用程序”类别（我的没有，而且似乎没有人知道为什么，或者它来自哪里）但是，在那台机器上，该性能计数器类别显示在 PerfMon 中，但在`GetCategories()`从 C# 调用该方法时不显示。

有谁知道为什么？有没有更靠谱的获取方式`PerformanceCounterCategories`？这是因为我使用的是.Net吗？我可以使用一些本机 API 吗？

**编辑**

对不起，我还是不明白。我编写了这段代码也许可以更好地说明它：

```
using System;
using System.Diagnostics;
using System.Linq;
using System.Text.RegularExpressions;
using Microsoft.Win32;

namespace PccHack
{
    class Program
    {
        private static readonly Regex Numeric = new Regex(@"^\d+$");
        static void Main(string[] args)
        {
            var pcc1 = PerformanceCounterCategory.GetCategories();
            Console.Out.WriteLine("Getting automatically from the microsoft framework gave {0} results.", pcc1.Count());
            string[] counters;
            using (var regKey = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\009"))
            {
                counters = regKey.GetValue("Counter") as string[];
            }
            var pcc2 = counters.Where(counter => !Numeric.IsMatch(counter)).ToList();
            pcc2.Sort();
            Console.Out.WriteLine("Getting manually from the registry gave {0} results.", pcc2.Count());
            Console.In.ReadLine();
        }
    }
} 
```

这现在给了我 3236 个结果。因为它获取系统中的所有性能计数器。所以我想我需要做的就是过滤掉那些实际上是性能计数器的，只剩下类别。然而，似乎没有一个只接受名称的 PerformanceCounter 构造函数（因为这不是唯一的），似乎也没有一个接受索引值的构造函数。我发现了一个名为 Performance Data Helper 的 Win32 API，但这似乎也没有我想要的功能。所以。如果我有一个性能计数器索引，我如何在 C# 中获取该索引的 PerformanceCounterCategory？PerfMon 做到了，所以它一定是可能的。有没有办法解析索引“幻数”以确定哪个是哪个？

**编辑 2**

好的。所以这是我的想法。使用建议的三种不同方法（.Net / Registry / PowerShell）的最新版本代码：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Reflection;
using Microsoft.Win32;
using System.Management.Automation;

namespace PccHack
{
    internal class Program
    {
        private static void Main()
        {
            var counterMap = new Dictionary<string, string>();
            using (var regKey = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\009"))
            {
                var counter = regKey.GetValue("Counter") as string[];
                for (var i = 0; i < counter.Count() - 1; i += 2)
                {
                    counterMap.Add(counter[i], counter[i + 1]);
                }
            }

            var pcc1 = PerformanceCounterCategory.GetCategories().Select(o => o.CategoryName).ToList();
            var pcc2 = new List<string>();
            // Get v1 providers
            using (var regKey = Registry.LocalMachine.OpenSubKey(@"SYSTEM\CurrentControlSet\services"))
            {
                foreach (var subKeyName in regKey.GetSubKeyNames())
                {
                    using (var subKey = regKey.OpenSubKey(subKeyName))
                    {
                        if (!subKey.GetSubKeyNames().Contains("Performance")) continue;
                        using (var perfKey = subKey.OpenSubKey("Performance"))
                        {
                            var blah = (string) perfKey.GetValue("Object List");
                            if (blah != null)
                            {
                                pcc2.AddRange(blah.Split(' ').Select(b => counterMap[b]));
                            }
                        }
                    }
                }
            }
            // Get v2 providers
            using (var regKey = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\_V2Providers"))
            {
                foreach (var subKeyName in regKey.GetSubKeyNames())
                {
                    using (var subKey = regKey.OpenSubKey(subKeyName))
                    {
                        foreach (var perfKeyName in subKey.GetSubKeyNames())
                        {
                            using (var perfKey = subKey.OpenSubKey(perfKeyName))
                            {
                                var blah = (string) perfKey.GetValue("NeutralName");
                                if (blah != null)
                                {
                                    pcc2.Add(blah);
                                }
                            }
                        }
                    }
                }
            }
            var ps = PowerShell.Create();

            ps.AddCommand("Get-Counter").AddParameter("listSet", "*");
            var pcc3 = ps.Invoke().Select(result => result.Members["CounterSetName"].Value.ToString()).ToList();

            pcc1.Sort();
            pcc2.Sort();
            pcc3.Sort();
            Console.Out.WriteLine("Getting automatically from the microsoft framework gave {0} results.", pcc1.Count());
            Console.Out.WriteLine("Getting manually from the registry gave {0} results.", pcc2.Count());
            Console.Out.WriteLine("Getting from PowerShell gave {0} results.", pcc3.Count());
            Console.In.ReadLine();
        }
    }
} 
```

在我的机器上，使用 .Net 框架得到 138，通过解析注册表得到 117，使用 PowerShell 得到 157（这是正确答案）。

但是，根据安装了 PowerShell/Windows SDK 的用户，这并不是一个真正的选择。

有人有什么想法吗？是否有一些隐藏在注册表中其他地方的绝密版本 3 性能计数器类别需要我追踪？我不仅没有尝试的想法，而且也没有尝试的坏想法。我可以在 perfmon 上使用任何秘密命令行开关，让它列出所有类别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-31T13:08:28.883

我认为您遇到了我认为是由 Perflib v2 计数器引起的 .NET Framework 错误。

在幕后，`PerformanceCounterCategory`使用[注册表函数](https://msdn.microsoft.com/en-us/library/windows/desktop/aa373219(v=vs.85).aspx)来获取有关当前在性能子系统中注册的类别（也称为对象）、实例和计数器的信息。您可以通过查看`PerformanceCounterCategory`ILSpy 的代码来验证这一点。

计数器可以通过两种类型的提供者注册：“核心”提供者和“可扩展性”提供者。这些名字是我发明的，因为没有更好的选择。

Core-provider 内置在 Windows 深处，并与 Performance 子系统紧密连接，以提供诸如 Process、System 等的计数器。如果您无法通过 看到此类计数器`PerformanceCounterCategory`，则很可能您有一些深层次的问题与您的 Windows 安装以及事件日志中的至少一些[错误有关。](https://technet.microsoft.com/en-us/library/dd315595(v=ws.10).aspx)我认为这不是你的情况。

[Extensibility-providers 通过记录在案的Perflib 接口](https://msdn.microsoft.com/en-us/library/windows/desktop/aa373165(v=vs.85).aspx)与 Performance 子系统接口，以提供所有其他计数器。需要注意的是，某些 Windows 功能的计数器是通过可扩展性提供程序注册的，主要 MS 产品（如 SQL Server、.NET Framework 等）的计数器也是如此。因此，核心提供程序并不是针对 MS 和可扩展性所做的一切- 第 3 方的供应商。

如果您无法查看`PerformanceCounterCategory`通过 Perflib 注册的计数器，首先可能是它们的提供程序在系统中配置不正确或配置已损坏。在这种情况下，您应该在事件日志中包含[这些文档](https://technet.microsoft.com/en-us/library/dd315570(v=ws.10).aspx)中性能计数器加载或性能库可用性部分中定义的一些错误。我认为这不是你的情况。

第二个原因与 Perflib 提供程序如何在幕后工作有关。注册柜台需要两个主要步骤。第一步是使用`LodCtr.exe`. 我假设这已由您感兴趣的计数器的安装程序自动为您完成，并且配置是正确的，特别是因为如果此配置存在问题，您可能会在事件中遇到一些上述错误日志。第二步是向性能子系统实际注册 Perflib 提供程序。

现在我们正在接近这个问题。Perflib v1 和 v2 提供程序的注册方式非常不同。对于 v1，提供程序的代码是用 DLL 编写的，这些 DLL 引用自在第一步编写的注册表配置并由系统本身加载。因此，当系统从注册表读取配置信息并加载 DLL 时，Perflib v1 提供程序注册会自动发生。对于 Perflib v2 提供程序，情况有所不同。提供者的代码不再由系统直接执行，而是由与提供者关联的应用程序/服务执行。因此，如果您编写一个使用 Perflib v2 创建自定义提供程序/计数器的应用程序，您的应用程序还将运行用于为这些提供程序收集数据的代码，并且它将以记录的方式与性能子系统交互。麻烦的是，现在，在系统中注册 Perflib v2 提供程序的代码必须由托管提供程序代码的应用程序触发（而不是像 Perflib v1 那样由系统自动触发）。因此，例如，如果应用程序是 Windows 服务并且该服务尚未启动，则提供程序将不会在性能子系统中注册，并且它们的计数器将不会（还）通过注册表功能可见 /`PerformanceCounterCategory`.

[这](https://msdn.microsoft.com/en-us/library/windows/desktop/aa965334(v=vs.85).aspx)是描述 Perflib v2 提供者的这种自我注册的文档的相关部分：

> 您的提供者必须调用 CounterInitialize 和 CounterCleanup 函数。CounterInitialize 调用 PerfStartProvider 函数来注册提供程序，并调用 PerfSetCounterSetInfo 函数来初始化计数器集。CounterCleanup 调用 PerfStopProvider 函数来删除提供者的注册。

**总之**，列出类别有两种不同的方式，实例和计数器。一是查询Registry Functions并列出查询时注册的所有项目。另一种是查看注册表中描述提供程序的配置信息，无论它们是否在查询时向性能子系统注册。

在实践中，您需要结合使用这两种方式，因为您只能通过查询注册表函数来获取类别的实例，而您只能通过查询注册表中编写的配置来获取尚未注册的提供者的类别和计数器.

不幸`PerformanceCounterCategory`的是，仅查询注册表功能，因此无法获取有关尚未注册的 Perflib v2 提供程序的信息。您可以通过其他方式查看这些提供程序，例如通过 Performance Monitor MMC（在幕后使用 PDH API，它能够显示已注册和尚未注册的计数器的组合）或`typeperf.exe -qx`.

您可以测试以上适用于您的`BranchCache`类别。下面的示例在 Win 7 上进行了测试。

1.  确保已启动具有显示名称的 Windows 服务，`BranchCache`然后运行此 C# 代码：

    ```
    Debug.WriteLine((new PerformanceCounterCategory("BranchCache")).ReadCategory().Keys.Count); 
    ```

    您应该没有错误并`21`写入调试输出。

2.  现在停止`BranchCache`服务并再次运行 C# 代码。您将收到一个异常，因为该类别不再向 Performance 子系统注册，因此`PerformanceCounterCategory`无法找到它。

为确保我所描述的内容适用于您通过 缺少的`PerformanceCounterCategory.GetCategories()`计数器，请检查缺少的计数器是否显示`typeperf -qx`在类别中，其名称与注册表中配置的提供程序相关联`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\_V2Providers`。

解决方案是为[PDH API](https://msdn.microsoft.com/en-us/library/windows/desktop/aa373214(v=vs.85).aspx)编写一个 C# 包装器并以这种方式获取您的信息。这很重要，尤其是在您不习惯处理原生交互的情况下。`WMI`也似乎是一个有效的选项（我尝试通过 PowerShell 快速列出性能对象，并且似乎返回了所有提供程序的计数器）但是虽然您不需要知道如何与您需要知道的本机代码交互`WMI`，但这是也不平凡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:39:24.760

性能计数器（和类别）按语言环境注册。也就是说，您可以根据语言为它们取不同的名称。

所有可用的性能类别及其计数器都在 Windows 注册表中注册`HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib`。您将找到每种可用语言的子键（例如`009`英语）。

内部工作的`PerformanceCounterCategory.GetCategories()`方法是首先检查“不变文化”类别。如果它找到*任何*它会返回这个集合。因此，如果由于某些错误或供应商的疏忽，某个类别仅适用于一种语言，则根据您当前的语言设置（操作系统或应用程序或两者），您将无法获得它。

我会首先检查`HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\<langcode>\Counter`键的内容，看看丢失的类别是否仅在其中一个中。一个相关的问题可能是[这个（谷歌搜索）](https://www.google.de/search?q=performance+counter+registry+key+format)，但我没有进一步检查。

坦率地说，我不知道有任何“更好”的方法来获取可用计数器列表。如果您的问题是上述（或相关）问题，我宁愿尝试解决问题。

# javascript - js 强制转换和类型强制 - 为什么 !!{}[true] 不正确？

> ID：15925094
> 
> 赞同：3
> 
> 时间：2013-04-10T11:53:59.717
> 
> 标签：javascript, casting, console

在 Chrome 控制台中输入：

```
{}[true]  // [true] (object)
!!{}[true] // false (boolean) 
```

当 {}[true] 为真时，为什么 !!{}[true] 不为真？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T11:55:46.807

你是如何评价的`{}[true]`？实际上是`undefined`因为空对象没有名为的属性`'true'`。很明显`undefined`不是`true`。

**UPD**：我已经在 Google Chrome 开发者工具中检查过它并且...

```
{}[true] // [true]
!!{}[true] // false
console.log({}[true]) // undefined 
```

第一行是`[true]`因为涉及到 2 个语句。第一个是空块 ( `{}`)，第二个是具有一个元素的数组 (true)。相反，第二行计算为表达式（以及第三行中的参数），`{}`这里不再是一个块，而是一个空对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T11:58:25.270

假设这些陈述是独立的：

`{}[true]`被解释为

```
{} // empty block
[true] // array literal expression 
```

因此，如果您在控制台中键入它，则会打印最后一条语句的结果，它是一个包含一个元素的数组，即 boolean value `true`。

`!!{}[true]`另一方面被解释为访问`'true'`空对象的属性。这将返回`undefined`并在转换为`false`布尔值时转换为。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T11:58:47.013

这取决于上下文。当 JavaScript 解析器`{}`一开始看到它时，它认为它是一个代码块，而不是对象，因此实际上与控制台中的实际上`{}[true]`是相同的：`[true]`

```
> {}[true]
[true] 
```

但

```
> x = {}[true];
undefined 
```

因为`{}`不是在开始或

```
> ({}[true])
undefined 
```

因为`()`强制 JS 将其视为表达式。

如果 JavaScript 解析器看到它前面的`{}`东西被解释`{}`为对象，那么在控制台中：

```
> !!{}[true]
true 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-10T11:59:45.643

> ```
> {}[true]  =>   true  (object) 
> ```

不是真正的布尔对象。如果有的话，它会返回一个包含一项的数组 - 布尔值 true。当`{}`被解释为（空）块时会发生这种情况（请参阅[为什么 {} != ( {} ) in JavaScript?](https://stackoverflow.com/q/14115902/1048572)），并且第二个语句`[true]`是数组文字。如果你试过

```
({}[true])
// or
({})[true] 
```

（或以其他方式强制它被评估为表达式）您访问`"true"`一个空对象的属性，即`undefined`. 这也发生在您的第二种情况下：

> ```
> !!{}[true]  =>   false  (boolean) 
> ```

因为`!!`强制`{}`被解释为对象字面量。并且`!undefined`是`true`，所以`!!undefined`会屈服`false`。

# java - 没有标记的 Servlet 之类的 Wicket 页面

> ID：15925095
> 
> 赞同：-4
> 
> 时间：2013-04-10T11:54:04.700
> 
> 标签：java, wicket

我需要 wicket 1.4 中的一个类，它像 Servlet 一样工作，但需要访问 wicket 的会话。我可以使用普通的网页，但我更喜欢更合适的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:40:00.183

如果您参考几周前提出的问题[Wicket Session 和 Jersey REST webservice](https://stackoverflow.com/questions/15764286/wicket-session-and-jersey-rest-webservice)，您将了解如何从另一个 Servlet（在同一应用程序中）访问 Wicket 会话。

# c# - 如何比较泛型参数类型？

> ID：15925099
> 
> 赞同：1
> 
> 时间：2013-04-10T11:54:16.247
> 
> 标签：c#, generics, type-parameter

我有一个包含泛型类型的类：

```
class MyClass<T>
{
} 
```

T 类型可以是任何类型，包括`MyClass<AnotherType>`. 是的，这有点递归，可以有类似`MyClass<MyClass<MyClass<T>>>`.

在某些时候，在 MyClass 中，我想知道`T`is`MyClass<AnyOtherType>`或任何类型派生自`MyClass<AnyOtherType>`. （AnyOtherType 是什么无关紧要，只需要知道 T 是否为 MyClass）。

那么，如何比较 T 型与`MyClass<anything>`？

* * *

为了避免参数出现问题，我想出的另一件事是进行`MyClass<T>`继承`MyClass`（不带参数），以使比较更容易。

```
class MyClass<T> : MyClass 
```

但问题仍然存在：

```
How can I compare T with MyClass to know if it's some type that inherits MyClass?? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:00:46.710

您将不得不检查反射 - 递归地解释“派生自”：

```
static bool IsMyClass(object obj)
{
    return obj == null ? false : IsMyClass(obj.GetType());
}
static bool IsMyClass(Type type)
{
    while (type != null)
    {
        if (type.IsGenericType &&
            type.GetGenericTypeDefinition() == typeof(MyClass<>))
        {
            return true;
        }
        type = type.BaseType;
    }
    return false;
} 
```

# asp.net-mvc-3 - ASP.NET MVC 3 Razor 视图分页

> ID：15925102
> 
> 赞同：0
> 
> 时间：2013-04-10T11:54:19.873
> 
> 标签：asp.net-mvc-3, pagination

我正在使用带有以下代码的 MVC 3.0 开发分页。一切都很好，除了当用户选择 5 然后单击下一步按钮时如何填充重新生成分页编号：

1 2 3 4 **5**下一个

当用户单击 Next 时，分页应如下所示：

上一页 2 3 4 5 6 下一页

代码如下所示

```
<ul class="pagination-clean">
    <% if (ViewData.HasPreviousPage)
        { %>
          <li class="previous"><a href="<%=ViewData.PageActionLink.Replace("%7Bpage%7D", (ViewData.PageIndex - 1).ToString())%>">Â« Previous</a></li>
     <% }
       else
        { %>
          <li class="previous-off">Â« Previous</li>
     <% } %>

     <%for (**int page = 1; page <= ViewData.TotalPages; page++**)
        {
        if (page == ViewData.PageIndex)
            { %>
              <li class="active"><%=page.ToString()%></li>
         <% }
        else
            { %>
              <li><a href="<%=ViewData.PageActionLink.Replace("%7Bpage%7D", page.ToString())%>"><%=page.ToString()%></a></li>
         <% }
        } 

       if (ViewData.HasNextPage)
            { %>
              <li class="next"><a href="<%=ViewData.PageActionLink.Replace("%7Bpage%7D", (ViewData.PageIndex + 1).ToString())%>">Next Â»</a></li>
         <% }
       else
            { %>
               <li class="next-off">Next Â»</li>
         <% } %>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:11:48.800

这是您开发的自定义分页吗？你试过使用`jqGrid`吗？它与控制器操作直接绑定以检索数据和它自己的寻呼机控件。你可以探索一下。页码等参数会自动更新

# c# - 从 MEF 容器中移除

> ID：15925106
> 
> 赞同：5
> 
> 时间：2013-04-10T11:54:28.087
> 
> 标签：c#, mef

这个问题似乎已经被问过好几次了，但我还没有找到任何真正有效的答案。很简单，我如何从 MEF 容器中删除一些东西。

甚至这里显示的代码[https://mef.codeplex.com/wikipage?title=Parts%20Lifetime](https://mef.codeplex.com/wikipage?title=Parts%20Lifetime)在 AddPart/RemovePart 下也不起作用，因为它不会像列出的那样编译。代码显示了这一点：

```
 var catalog = new AssemblyCatalog(typeof(Program).Assembly);
    var container = new CompositionContainer(catalog);
    var root = new Root();

    // add external part
    container.ComposeParts(root);

    // ... use the composed root instance

    // removes external part
    batch = new CompositionBatch();
    batch.RemovePart(root);
    container.Compose(batch); 
```

这不会编译，因为对 RemovePart 的调用需要一个 ComposablePart，而 root 显然不是。其他简单示例显示了如何创建部件和移除部件，但会记住对已创建部件（作为 ComposablePart）的引用，因此移除时只使用该引用。我不想在创建容器时保留对容器中每个部分的引用，我只想在我的应用程序的任意点从容器中删除一个部分，而不必在整个过程中保留对它的引用。

这是我尝试使用上面链接的文档中列出的完全相同的模式来做的事情：

```
public class Program
{
    [Import]
    private IClass myClass;

    public Program()
    {
        var container = new CompositionContainer(new AssemblyCatalog(Assembly.GetExecutingAssembly()));
        container.ComposeParts(this);

        var partToRemove = container.GetExport<IClass>();

        var batch = new CompositionBatch();
        batch.RemovePart(partToRemove);
        container.Compose(batch);
    }

    public static void Main(string[] args)
    {
        var program = new Program();
    }
} 
```

但这给了我以下编译错误：

> 参数 1：无法从 'System.Lazy' 转换为 'System.ComponentModel.Composition.Primitives.ComposablePart' C:\Users\irbldr.CORP\Documents\Visual Studio 2012\Projects\ConsoleApplication4\Program.cs

如果我直接使用上面链接的文档中的代码，这与我得到的错误完全相同。

有没有办法简单地从 MEF 容器中删除一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T08:10:02.837

此链接可能会有所帮助：[更改零件时如何让 MEF 重新组合？](https://stackoverflow.com/questions/3785801/how-do-i-get-mef-to-recompose-when-i-change-a-part)

但长话短说：您可以从 MEF 中删除一个实例，但您不能删除导出定义而不删除完整的目录、重组和过滤它（只是不添加一些东西）。

# php - socket_bind() [function.socket-bind]：无法绑定地址 [13]：权限被拒绝

> ID：15925107
> 
> 赞同：0
> 
> 时间：2013-04-10T11:54:32.667
> 
> 标签：php, sockets, binding, port, phpwebsocket

我正在构建一个基于 websocket 协议的聊天应用程序。我正在将其上传到 apache 服务器上，但出现此错误：

“警告：socket_bind() [function.socket-bind]：无法绑定地址 [98]：地址已在使用中”

我正在使用端口号。12346。当我检查此端口的状态时，我得到“12346 没有响应”。

我检查了我的远程服务器上的许多端口，它们都没有响应。所以请告诉我如何检查是否有可以使用的可用端口？

我也使用了端口 80 和 443，但出现错误：

```
Permission Denied 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T22:30:35.370

我看到您正在使用 apache - 这很可能是问题所在。您需要将脚本作为守护程序运行或至少从 shell 运行，并且除非您在 Windows 主机上，否则您将需要对 1024 下的端口具有 root 权限。

# r - 以正确的方式加载文件

> ID：15925109
> 
> 赞同：0
> 
> 时间：2013-04-10T11:54:43.050
> 
> 标签：r

我是使用 R 的新手。我尝试处理 .xls 文件并且数据具有以下格式：

```
num                         day
 1                 2011-1-1 00:00:01
 2                 2011-1-2 00:00:02
 3                 2011-1-3 00:00:03 
```

我尝试加载文件：

```
 example <- read.xls(/path/exam.xls) 
```

但它给了我但这个错误

```
Error in findPerl(verbose = verbose) : 
  perl executable not found. Use perl= argument to specify the correct path.
Error in file.exists(tfn) : invalid 'file' argument 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:00:18.427

尝试

```
library(xlsx)

read.xlsx("/path/exam.xls",1) 
```

# visual-studio-2010 - 格式化css样式

> ID：15925112
> 
> 赞同：3
> 
> 时间：2013-04-10T11:54:47.590
> 
> 标签：visual-studio-2010, visual-studio, css, formatting

我有一个包含 css 规则格式的大型 css 文件，如下所示：

```
.rounded-block
{
   border: 1px solid #c0c0c0;
   width: 500px;
   margin: 15px 0 15px 0;
} 
```

我需要像这样格式化这个文件

```
.rounded-block{border: 1px solid #c0c0c0;width: 500px;margin: 15px 0 15px 0;} 
```

我该怎么做？我可以在 Visual Studio 中做到这一点？

编辑：我需要另一条规则在另一行

```
.rounded-block{border: 1px solid #c0c0c0;width: 500px;margin: 15px 0 15px 0;}
.anotherrule{margin: 15px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:59:51.423

检查这些 URL 以获取 CSS 美化器并进行优化：

[cssbeautify](http://cssbeautify.com/)
[fwpolice](http://html.fwpolice.com/css/)

在那里你可以定义你自己的规则：

[代码美化器](http://www.codebeautifier.com/)。

# java - 安卓动态壁纸视差滚动效果

> ID：15925114
> 
> 赞同：0
> 
> 时间：2013-04-10T11:54:48.380
> 
> 标签：java, android, android-canvas, live-wallpaper, animationdrawable

当我们滚动时，主屏幕的前景（图标、小部件等）向左或向右移动整个屏幕宽度，但背景图像（或动态壁纸）仅移动该宽度的一小部分。我的问题是如何获得这种效果。到现在为止已经做到了。

```
 SurfaceHolder holder = getSurfaceHolder();
        Canvas canvas = null;
        try {
            canvas = holder.lockCanvas();
            if (canvas != null) {

                drawCircles(canvas);
            }
        } finally {
            if (canvas != null)
                holder.unlockCanvasAndPost(canvas);
        } 
```

绘图功能是

```
{
    private void draw(Canvas canvas) {
        Paint paint = new Paint();
        DisplayMetrics metdisplayMatrics = new DisplayMetrics();
        Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
        display.getMetrics(metdisplayMatrics);

            canvas.save();
            canvas.drawColor(0xff000000);
            mRecscreenRectangleFrame = new Rect(0, 0,  (int) (metdisplayMatrics.widthPixels*2.0), metdisplayMatrics.heightPixels);
            photo1= BitmapFactory.decodeResource(getResources(), R.drawable.img1);
            canvas.drawBitmap(photo1, null,mRecscreenRectangleFrame, paint);
            photo1.recycle();
            System.gc();
} 
```

现在如何把动态壁纸视差滚动效果。

```
 @Override
    public void onOffsetsChanged(float xOffset, float yOffset,
            float xOffsetStep, float yOffsetStep, int xPixelOffset,
            int yPixelOffset) {

        super.onOffsetsChanged(xOffset, yOffset, xOffsetStep, yOffsetStep,
                xPixelOffset, yPixelOffset);

        WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());
        View view=new View(getBaseContext());

        myWallpaperManager.setWallpaperOffsets(view.getWindowToken(),xOffset, 0f);

    } 
```

***还没有工作......***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:02:23.027

调用`WallpaperManager.setWallpaperOffsets`以指示墙纸滚动。

[文档](http://developer.android.com/reference/android/app/WallpaperManager.html#setWallpaperOffsets%28android.os.IBinder,%20float,%20float%29 "文档")

所以这应该使墙纸居中：

```
WallpaperManager.setWallpaperOffsets(getWindowToken(), 0.5f, 0f); 
```

这应该将其滚动到一边：

```
WallpaperManager.setWallpaperOffsets(getWindowToken(), 0f, 0f); 
```

这应该将其滚动到另一侧：

```
WallpaperManager.setWallpaperOffsets(getWindowToken(), 1f, 0f); 
```

如果你打算这样做，你应该确保你知道壁纸实际上可以滚动，或者用户已经要求你启用滚动。许多设备都配置了与屏幕大小相同且不滚动的壁纸。

# php - Ajax 代码加载很慢

> ID：15925120
> 
> 赞同：0
> 
> 时间：2013-04-10T11:54:57.583
> 
> 标签：php, jquery, html, ajax, imagemagick

下面是我的 Ajax 代码，加载时间为 3 分 15 秒。可能是什么问题呢？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <Script type="text/javascript">
    function im()
    {
    alert('iam in');
            var Name=document.getElementById("Name").value;
            var pointsize=document.getElementById("pointsize").value;
            var bckclr=document.getElementById("bckclr").value;
            var color=document.getElementById("color").value;
            var bcolor=document.getElementById("bcolor").value;
    var url='Name='+Name+'&pointsize='+pointsize+'&bckclr='+bckclr+'&color='+color+'&bcolor='+bcolor;
    alert("srihost.com/2.php?"+ url);
    alert(url);
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("Div_Im").innerHTML=xmlhttp.responseText;
        document.getElementById("Div_Im").style.border="2px solid #A5ACB2";
        }

      }
    xmlhttp.open("GET","2.php?"+ url,true);
    xmlhttp.send();
    }
    </script>
    </head>
    <body>
    Enter Name: <input type="text" id="Name" onchange="im()" value="yourname"  name="Name" />
    pointsize: <input type="text" id="pointsize" onchange="im()"
    value="50" name="pointsize" />
    BackGround Color: <input type="text" id="bckclr" value="red"
    onchange="im()" name="bckclr" />
    FontColor: <input type="text" id="color" value="white"
    onchange="im()" name="color" />
    Border Color: <input type="text" id="bcolor" value="blue"
    onchange="im()" name="bcolor" />
    <div id="Div_Im">
    replace me
    </div>
    </body>
    </html> 
```

这是我的服务器页面代码

```
$Name=$_GET["Name"];
$pointsize=$_GET["pointsize"];
$bckclr=$_GET["bckclr"];
$color=$_GET["color"];
$bcolor=$_GET["bcolor"];
$filename = 'im.png';
$font='Times-Roman';

$cmd = " -background $bckclr -pointsize $pointsize -font $font -fill $color ".
                " -strokewidth 1 -stroke $bcolor label:\"$Name\" ";

  exec("convert $cmd $filename");
  echo('<img src="'.$filename.'">'); 
```

它基本上是 Image Magick 代码，通过创建图像可以正常工作，但是当我使用 Ajax 时，加载需要很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:19:01.463

有两个原因可以实现。首先，您在文本框更改上执行 ajax。一次又一次地发送ajax请求。您应该仅在单击某些按钮/链接/提交时才调用 ajax，以便只发送一个 ajax 调用。同样在 php 方面，您使用 exec 和 convert 函数，如果第一种情况也是如此，这可能会很重。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:58:57.323

在服务器端，执行可能非常慢。运行像 Firebug 这样的浏览器调试器，让您观察网络请求。验证问题是 HTTP 请求发送到您的服务器和收到响应之间的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T12:03:02.427

我假设您自己尝试了相同的命令，并且速度更快。

因此，请确保每当您在命令行上进行测试时，始终使用相同的用户“su www-data”用于 Debian。

然后总是有一个调试日志，这样你就可以确保参数都设置好了。

[编辑] 你在什么平台上运行？什么版本的php？什么版本的图像魔术师？

您应该添加更多详细信息，以便人们帮助您！

# c - 如何使用套接字检查打开的端口

> ID：15925121
> 
> 赞同：1
> 
> 时间：2013-04-10T11:54:58.100
> 
> 标签：c, sockets, port

```
#include<stdio.h>
#include<stdlib.h>// for exit
#include<string.h>
#include<unistd.h> //for close(),read()
#include<sys/types.h>//
#include<sys/socket.h> //for socket api's
#include<netinet/in.h>//for struct sockaddr_in
#include<arpa/inet.h>// for inet_pton

#define MAX 30

int ssfd;   //listenfd
int res; //connfd
int serverlen;
struct sockaddr_in serveraddr;

void main()
{
    int i=0,res;
    int startPortRange=0;  
    int stopPortRange=65536; 

    for(i=startPortRange; i<stopPortRange; i++)  
    {  
        ssfd=socket(AF_INET,SOCK_STREAM,0);
        if(ssfd==-1)
        {
            printf("\nSocket Creation Failed....");
        }

        serveraddr.sin_family=AF_INET;
        serveraddr.sin_addr.s_addr=inet_addr("127.0.0.1"); // inet_addr converts an IPV4 from dotted decimal string
        //to e.g(127.0.0.1) to its 32-bit network byte ordered binary value.    

        serveraddr.sin_port=i;

        serverlen=sizeof(serveraddr);

        res = bind(ssfd,(struct sockaddr*)&serveraddr,serverlen);

        if(res==-1)
        {
            printf("\nPort in Use : %d",i);
        }
        else
        {
            printf("\nPort not in use: %d",i); 
        }

        close(ssfd);
    }
} 
```

我正在尝试读取计算机上的开放端口（某些程序使用）。该程序运行良好。但它没有给出正确的结果。例如，我的计算机上的 mysql 使用了端口 3306，但我的程序输出它没有被使用。请帮我试试这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:57:20.483

代替

```
serveraddr.sin_port=i; 
```

你需要使用

```
serveraddr.sin_port=htons(i); 
```

因为inetaddr结构中的端口地址必须有网络字节序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:18:36.480

您应该绑定到 0.0.0.0，而不是 127.0.0.1，否则您只能找出可以绑定到 17.0.0.1 的端口，而这不是您想要找出的。但是当 netstat 已经存在时为什么要这样做是一个谜。

# php - 自动添加图像尺寸

> ID：15925126
> 
> 赞同：0
> 
> 时间：2013-04-10T11:55:19.263
> 
> 标签：php, jquery, image, frontend, dimensions

我在 gtmetrix.com 上为我的网站评分。

它建议为我的所有图像添加图像尺寸。问题是，我需要一些自动添加这些的方法，所以如果图像发生变化，尺寸也会更新。

我有的

```
<img src="bla.png"> 
```

我想拥有什么

```
<img src="bla.png" width="{width of image}" height="{height of img}"> 
```

有没有 php 方式或 jquery 方式来做到这一点？对于 wordpress 网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:59:52.130

PHP：

```
<?php
list($width, $height) = getimagesize("bla.png");
echo "<img src='bla.png' width='$width' height='$height'>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:57:53.443

您可以使用`image onload`事件来计算图像的尺寸。纯 javascript 方法，例如；

```
var image = new Image();

image.onload = function()
{
  //after load complete you will get the image dimensions here from 
  //image.width and image.height
}

image.src = 'image url'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:58:38.213

在 php 中，`getimagesize($file)`如果您正在动态输出图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:18:19.960

你应该用 PHP 而不是 javascript 来做。如果使用 jQuery / javascript 添加，加载后会添加宽度和高度。指定宽度和高度的主要原因是为了让引擎更快地渲染页面。如果在加载后添加它不会有任何帮助。

`getimagesize()`您可以直接在图像标签中使用返回数组的索引 3 。它包含一个带有 height="yyy" width="xxx" 的字符串，可以直接在 IMG 标签中使用。

```
<?php
    list($width, $height, $type, $attr) = getimagesize("file.png");
    echo "<img src='file.png' $attr />";
?> 
```

您可以访问[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)了解有关此功能的更多详细信息。

# hadoop - 在 hive 中动态删除分区

> ID：15925134
> 
> 赞同：2
> 
> 时间：2013-04-10T11:55:48.903
> 
> 标签：hadoop, hive, hiveql

我在 hive 中有两个表，都由表示时间戳的字符串分区（我使用字符串而不是时间戳，因为我使用的是 Cloudera Impala 中的表，它不支持按时间戳分区的表）。

这些表用于在特定时间片中存储大量数据。第一个表包含较高时间粒度的最新数据，比如 1 分钟时间片，第二个表包含较低粒度的旧数据，比如 1 小时时间片。

所以我有一个查询，它总结了早于 1 分钟时间片的特定时间量的数据，以便我拥有 1 小时时间片的数据并将其与 1 小时时间片一起插入我的表中。

创建 1 小时时间片后，我想删除新的 1 小时时间片中包含的所有 1 分钟时间片。而且由于该表是由代表时间的字符串分区的，所以我可以删除相应的分区。

并知道我的实际问题：

是否有可能在蜂巢中以某种方式删除分区

```
 ALTER TABLE oneMinSlices DROP IF EXISTS PARTITION(time < 'YYYY-MM-DD HH:MM:SS') 
```

在此先感谢您的帮助。

ps：如果你想知道我为什么这样做：数据在持续增长，如果我们不删除 1 分钟的时间片，包含它们的表会变得非常大，导致我们的查询变慢并且需要很多的空间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-01T22:37:38.350

从 Hive 0.9.0 开始，您可以在 ALTER TABLE .. DROP PARTITION 语句中使用所有比较器。这意味着您的原始陈述应该有效。请参阅：[https](https://issues.apache.org/jira/browse/HIVE-2908) ://issues.apache.org/jira/browse/HIVE-2908 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:20:53.330

您必须为此编写一个 shell 脚本。

在 .hql 文件中写下面的查询

```
ALTER TABLE oneMinSlices DROP IF EXISTS PARTITION(time = '${hiveconf:timestamp}') 
```

现在将分区作为命令行参数动态传递。

```
hive -hiveconf timestamp=2013-04-22\ 05:12:20 -f hqlfilepath.hql 
```

最后一步是从 shell 中动态获取时间戳。

运行上面的命令，直到满足您的条件。

# jquery - 将提交按钮的值获取到对话框窗口中

> ID：15925135
> 
> 赞同：0
> 
> 时间：2013-04-10T11:55:53.057
> 
> 标签：jquery

我在 JqueryUI 中使用手风琴功能。在每个项目中都有一个带有名称的提交按钮。名称是我在对话窗口中需要的 id。当我单击提交按钮时，使用此功能

```
$( ".opener" ).click(function() {
        console.log( $(this).attr("name"));
      $( "#dialog-confirm" ).dialog( "open" );
    }); 
```

在我的控制台日志中，我现在看到了正确的 ID。但是在对话框窗口中我无法获取此 ID。这是对话窗口

```
 $(function() {
  $( "#dialog-confirm" ).dialog({
      autoOpen: false,
  show: {
    effect: "fade",
    duration: 500
  },
  hide: {
    effect: "fade",
    duration: 200
  },
  resizable: false,
  height:180,
  modal: true,
  buttons: {
    "Aannemen": function() {
      $( this ).dialog( "close" );
      alert('ID IS');       << this is where i want the id
    },
    Cancel: function() {
      $( this ).dialog( "close" );
    }
  }
}); 
```

那么我怎样才能在脚本的这个位置获得 id： **alert('ID IS');**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:00:15.630

```
var name;
$( ".opener" ).click(function() {
        name =$(this).attr("name");
      $( "#dialog-confirm" ).dialog( "open" );
});

$(function() {
  $( "#dialog-confirm" ).dialog({
      autoOpen: false,
  show: {
    effect: "fade",
    duration: 500
  },
  hide: {
    effect: "fade",
    duration: 200
  },
  resizable: false,
  height:180,
  modal: true,
  buttons: {
    "Aannemen": function() {
      $( this ).dialog( "close" );
      alert(name);       << this is where you get the id
    },
    Cancel: function() {
      $( this ).dialog( "close" );
    }
  }
}); 
```

# entity-framework - 使用 manager.createEntity 创建包含导航属性的 Breeze 实体会引发异常

> ID：15925136
> 
> 赞同：1
> 
> 时间：2013-04-10T11:55:55.587
> 
> 标签：entity-framework, asp.net-web-api, breeze

设想：

我在我们的 SPA 中使用微风进行查询，在 POST PUT DELETE 方法中使用原始 http 方法。资源上的 POST 方法返回创建的资源，包括它创建的子对象。

我想将此创建的资源附加到 beeeze 实体管理器。

我尝试使用添加实体

```
manager.createEntity('Driver', data, breeze.EntityState.Unchanged); 
```

其中数据对象包含驱动程序资源和相关子实体的数组。

但是遇到一个例外：**“可能未设置集合导航属性。”**

我必须手动创建本地实体并附加子实体还是微风支持这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:07:24.670

此异常的原因是“createEntity”方法创建实体，然后将您的“数据”分配给它，但对于任何集合导航属性，该集合已经存在，Breeze 不允许您替换它。对于应用程序的其他部分可能持有对集合的引用的现有实体来说，这是一个深思熟虑的选择，但在这种情况下，您是“第一个”访问该集合的人就显得过分了。目前，解决方法是更新任何导航集合而不是替换它们。

因此，最简单的方法是调用 createEntity 方法而不使用任何集合数据属性，然后将数据推送到您的集合中

```
var driver = manager.createEntity('Driver', dataWithoutCollections, EntityState.Unchanged)
// then update collection properties by pushing into them.
trafficFines.forEach(function(trafficFine) {  
   driver.trafficFines.push(trafficFine);      // or use push.apply
}; 
```

请注意，添加到实体的集合属性不会导致 EntityState 更改，因此这应该足够了。

基于此问题，我将添加一个功能请求以在您调用“createEntity”方法的情况下抑制此异常，因为应用程序的其他部分已经可以访问新实体并没有危险。

# r - R 中的 optim 函数用于 D 最优性

> ID：15925141
> 
> 赞同：3
> 
> 时间：2013-04-10T11:56:14.857
> 
> 标签：r, mathematical-optimization

我做了一个函数，它返回 (X'X)^-1 的确定项。我需要在我创建的函数上使用 optim 函数，以便为我提供 X 矩阵的最佳值。我在让 optim 工作时遇到问题，但我的功能运行良好。

```
fr <- function(x,nc,nr) {
Xd <- matrix(c(rep(1,nr),x),nrow=nr,ncol=nc) #### Design matrix
det(solve((t(Xd)%*%Xd))) #### det(FIM)
} 
```

我试过 x 作为向量和矩阵；

```
x <-
matrix(c(0.1,0.2,0.3,0.2,0.1,0,0.1,0.2,0.1,0.2,0.1,0.2,0.1,0.2,0.1,0.2,0.1,0.2,0.1,0.2),nro    w = 10, ncol = 2)
x <- c(0.1,0.2,0.3,0.2,0.1,0,0.1,0.2,0.1,0.2,0.1,0.2,0.1,0.2,0.1,0.2,0.1,0.2,0.1,0.2) 
```

这些是我用 optim 尝试过的一些变体，但都没有成功；

```
optim((x, 3, 10), fr)
optim(fn = fr, par = c(x=x, nc=3, nr=10))
optim(c(x,3,10), fr) 
```

我收到不同的错误，有时是因为 optim 中的 x 后面有一个逗号，有时是 .Internal 关于 nrow 丢失的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:06:05.613

您可以将参数传递给`fr`to `optim`：

`opt <- optim(fn=fr, x, nc=3, nr=10)`

这给了

```
> opt$par
         [,1]       [,2]
 [1,]  0.06933853 -1.0888672
 [2,]  0.07796119  1.8288789
 [3,]  2.09366322 -1.3050871
 [4,]  1.40676030  3.3006266
 [5,]  1.04102733 -1.1048119
 [6,] -5.84413537  1.6741804
 [7,] -4.75578972 -0.6484606
 [8,]  1.23037198  2.4842715
 [9,]  0.10477158  1.4135113
 [10,]  2.14145939 -1.4333241 
```

`fr`比较优化前后的函数值：

```
> fr(x,3,10)
[1] 62.5
> fr(opt$par, 3, 10)
[1] 4.963814e-05 
```

这有帮助吗？

您可能需要检查`?optim`是否要设置上限和下限。

# android - 如何在 PreferenceScreen 中设置 xmlns 路径 - 修改 ListPreferenceMultiSelect

> ID：15925146
> 
> 赞同：1
> 
> 时间：2013-04-10T11:56:20.383
> 
> 标签：android, preferences, listpreference

我有从网站下载的代码：http: [//blog.350nice.com/wp/archives/240](http://blog.350nice.com/wp/archives/240)

但是就行了：

```
<com.threefiftynice.android.preference.ListPreferenceMultiSelect 
```

是错误代码：

```
Multiple annotations found at this line:
    - error: No resource identifier found for attribute 'checkAll' in package 
     'com.threefiftynice.android'
    - error: No resource identifier found for attribute 'separator' in package 
     'com.threefiftynice.android' 
```

这是带有错误的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen android:key="prefKey"
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:threefiftyprefs="http://schemas.android.com/apk/res/com.threefiftynice.android">  
    <com.threefiftynice.android.preference.ListPreferenceMultiSelect 
        threefiftyprefs:checkAll="check" threefiftyprefs:separator="|"
        android:defaultValue="#ALL#"
        android:key="key"
        android:title="Image folders to monitor" android:dialogTitle="Image folders to monitor"
        android:summary="Specify which folders should be monitored for images"
        android:entries="@array/typeOfPoints"
        android:entryValues="@array/typeOfPointsID"/>
</PreferenceScreen> 
```

我知道 xmlns 和 ListPreferenceMultiselect 的路径很糟糕 - 但我尝试了很多可能的路径，但问题出在所有路径上（这是来自带有原始包的站点的原始路径）。这是我的代码结构

： ![在此处输入图像描述](https://i.stack.imgur.com/n7fiXl.png)

我应该如何设置路径以使其工作？非常感谢。

**编辑：** 将其更改为`xmlns:threefiftyprefs="schemas.android.com/apk/res-auto"`它后不会在 xml 中写入错误，但会在运行时引发错误：

> 未捕获的处理程序：线程主因未捕获的异常而退出
> java.lang.RuntimeException：无法启动活动 ComponentInfo{goandknow.proximityalerts/goandknow.proximityalerts.EditPreferences}：android.view.InflateException：二进制 XML 文件第 24 行：膨胀类 com 时出错.threefiftynice.android.preference.ListPreferenceMultiSelect 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2268) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2284) 在 android.app.ActivityThread.access$1800(ActivityThread. java:112)
> 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1692)
> 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:123) 在 android.app.ActivityThread.main(ActivityThread.java:3948) 在 java.lang。 reflect.Method.invokeNative(Native Method) at java.lang.reflect.Method.invoke(Method.java:521) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:782) at com. dalvik.system.NativeStart.main(Native Method) 的 android.internal.os.ZygoteInit.main(ZygoteInit.java:540) 原因：android.view.InflateException：二进制 XML 文件第 24 行：膨胀类 com.threefiftynice 时出错.android.preference.ListPreferenceMultiSelect 在 android.preference.GenericInflater.createItemFromTag(GenericInflater.java:441) 在 android.preference.GenericInflater.rInflate(GenericInflater.java:481) 在 android.preference.GenericInflater.rInflate(GenericInflater.java:493) 在 android.preference.GenericInflater.inflate(GenericInflater.java:326)
> 在 android.preference.GenericInflater.inflate(GenericInflater.java:263)
> 在 android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:250) 在 android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:253) 在 goandknow.proximityalerts。 EditPreferences.onCreate(EditPreferences.java:24) at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123) at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2231) ... 11 更多

这是第 24 行：

> com.threefiftynice.android.preference.ListPreferenceMultiSelect

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:54:34.573

换行

`xmlns:threefiftyprefs="http://schemas.android.com/apk/res/com.threefiftynice.android"`

至

`xmlns:threefiftyprefs="http://schemas.android.com/apk/res-auto"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:55:22.837

应该是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen android:key="prefKey"
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:threefiftyprefs="schemas.android.com/apk/res-auto">  
    <goandknow.models.ListPreferenceMultiSelect 
    threefiftyprefs:checkAll="check" threefiftyprefs:separator="|"
    android:defaultValue="#ALL#"
    android:key="key"
    android:title="Image folders to monitor" android:dialogTitle="Image folders"
    android:summary="Specify which folders should be monitored for images"
    android:entries="@array/typeOfPoints"
    android:entryValues="@array/typeOfPointsID"/>
</PreferenceScreen> 
```

重要的：

**xmlns:threefiftyprefs="schemas.android.com/apk/res-auto" goandknow.models.ListPreferenceMultiSelect**感谢 Sankar V.

# web - 在本地网络上发布网站

> ID：15925153
> 
> 赞同：1
> 
> 时间：2013-04-10T11:56:34.750
> 
> 标签：web, publish

伙计们，我已经建立了一个网站并在 localhost 上使用**ubuntu上的****LAMP**对其进行了测试。现在我想在我的**本地网络上发布这个网站。**我该怎么做。？请帮忙。谢谢。

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:02:17.327

1.  在本地网络的某处安装网络服务器（如果您不想拥有单独的开发和实时环境，这可能是您一直用于测试的服务器……尽管这通常不是一个好主意）。
2.  将站点发布到该网络服务器（以与开发服务器相同的方式）。
3.  给出该站点的 URL****

# ios - 停止陀螺仪更新

> ID：15925155
> 
> 赞同：0
> 
> 时间：2013-04-10T11:56:45.677
> 
> 标签：ios, xcode, cocos2d-iphone, core-motion

我无法在我的 Cocos2D 游戏中停止 Gyro 更新，

我的 init 中有以下代码：` //gyro motionManager = [[CMMotionManager alloc] init]; 参考态度=无；

```
 [motionManager startGyroUpdates];
    timer = [NSTimer scheduledTimerWithTimeInterval:0.2
                                             target:self
                                           selector:@selector(doGyroUpdate)
                                           userInfo:nil
                                            repeats:YES]; 
```

然后在陀螺仪更新本身中，我检查进度何时超过 100%`if (progress > 100) { [self pauseSchedulerAndActions]; [self stopGyroUpdates];`

然后：

```
- (void)stopGyroUpdates{
NSLog(@"Stop gyro update"); 
```

}

但它一直在检查......所以 if 语句中的代码不断被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:06:27.653

我找到了以下代码的解决方案：`

```
 -(void) callgyro:(int)gyroprocess {

NSLog(@"%i", gyroprocess);

if (gyroprocess < 100 ) {
    motionManager = [[CMMotionManager alloc] init];
    referenceAttitude = nil;
    [motionManager startGyroUpdates];
    timertwee = [NSTimer scheduledTimerWithTimeInterval:0.2
                                             target:self
                                           selector:@selector(doGyroUpdate)

                                           userInfo:nil
                                            repeats:YES];
}
else {
    [motionManager stopGyroUpdates];
    [timertwee invalidate];

    NSLog(@"Gyro moet stoppen!");

}` 
```

并在陀螺仪更新本身内：

```
 if (progress > 100) {

        [self callgyro:progress];

        [self.timer invalidate];
        self.timer = nil;
        [Blikje setImage:[UIImage imageNamed:@"pop3.png"]];
        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        [prefs setFloat:numhundreds forKey:@"score"];
        progress = 0;

        [self stopGyroUpdates];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:05:37.047

就像rickster 说的，你需要在CMMotionManager 实例上调用stopGyroUpdates。所以你需要在接口实现中创建一个实例变量或属性。

在您声明接口的 .m 文件中：

```
@interface ViewController ()
@property (strong, nonatomic) CMMotionManager  *motionManager;
@end 
```

然后根据需要初始化它

```
motionManager = [[CMMotionManager alloc] init]; 
```

然后，当您需要停止更新时，您调用

```
[self.motionManager stopGyroUpdates] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:12:25.587

您需要在您的 CMMotionManager 实例上调用 stopGyroUpdates，而不是（或除了）self。（这意味着如果您调用 startGyroUpdates 的方法（例如，在属性或 ivar 中），如果它还没有，则该实例需要持续超出范围。）

# google-apps-script - Apps 脚本中的 onOpen 触发器中的 SQL 语句不起作用

> ID：15925156
> 
> 赞同：0
> 
> 时间：2013-04-10T11:56:46.063
> 
> 标签：google-apps-script, google-cloud-sql

我使用 Google Apps 脚本编写了一个逻辑，它将验证登录用户的电子邮件 ID 与数据库中存在的电子邮件 ID。如果电子邮件存在于数据库中，则在其中一个单元格中填充登录用户的电子邮件 ID。这应该是在没有人工干预和电子表格的 onOpen 事件的情况下完成，如果有人试图复制同一个电子表格，也应该可以工作。

如果方法**不包含 SQL 语句**，则 onOpen() 将在两者中执行

1.  在原始表中
2.  当有人复制它时，

如果方法**包含 SQL 语句，则****仅**执行 onOpen()

 **1.  在原始表格中（如果有人甚至我自己复制它，将不会执行）。

请确认，

1.  如果我的理解是正确的，并且当有人复制工作表时 SQL 语句在 onOpen() 触发器中不起作用。
2.  实现在原始工作表和副本中执行的此功能的替代方法是什么（使用“制作副本”选项制作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:46:55.070

不要将其命名为 onOpen，请使用其他名称，以便它在您的 userId 下运行，而不是在每个用户下运行。这样做会破坏副本，因为您需要手动安装 onOpenTrigger**

# c++ - C++ Winsock recv() 缓冲区垃圾

> ID：15925158
> 
> 赞同：0
> 
> 时间：2013-04-10T11:56:54.823
> 
> 标签：c++, string, sockets, winsock, recv

我正在 cpp 中编写一个控制台应用程序，它通过 TCP 从文件向主机发送控制命令并接收响应。所有这些信息都显示在屏幕上并记录到文件中，这是实际问题。输出字符串似乎出于任何原因存储垃圾，即使我尝试设置固定长度。

**编辑：**清理代码并处理 recv() 的返回值。我唯一还没有得到的是我的日志文件中的*第二个*recv 行充满了垃圾。也许你们中的一个人能够发现问题。

```
 string cmd="";
        char *sendstr=(char*)cmd.c_str();
        fflush(stdin);
        int n = 1, total = 0;
        char temp[1024];
        string inStr;
        if(cmdin.is_open())
        {           
            while(!cmdin.eof())
            {
                total=0;
                cmd=fread();
                send(serverPC, sendstr, (int)strlen(sendstr),0);
                n=recv(serverPC,&temp[total],sizeof(temp)-total-1,0); // FIX THIS
                total+=n;
                temp[total]='\0';
                inStr=temp;
                fwrite(inStr,cmd);
            }
            cout << "Data successfully sent!\n";
        }
        else{
            cerr<<"can't find 'cmd.cfg' file"<<endl;
        } 
```

**我期望的输出：**

```
<11:40:00> INIT
received: VELO=0.00km/h  DOT=FORW  
---- 
```

**这就是我得到的：**

```
<10:05:56> INIT
received: VELO=0.00km/h  DOT=FORW  
----
<10:05:56> VELO=50.00
received: VELO=0.00km/h  DOT=FORW  VELO=0.00km/h  DOT=FORW  VELO=0.00km/h
DOT=FORW  VELO=0.00km/h  DOT=FORW  VELO=0.00km/h  DOT=FORW  VELO=0.00km/h  DOT=FORW  
VELO=0.00km/h  DOT=FORW  
----
<10:05:56> VELO=100.00
received: VELO=50.00km/h  DOT=FORW  
----
<10:05:56> DOT=BACK
received: VELO=50.00km/h  DOT=FORW 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:52:56.430

编写 TCP 接收器时要记住的关键点是 TCP 被视为数据流。这意味着当您从发送 N 字节数据包的东西执行接收时，您可以接收：

*   N字节数据
*   少于 N 字节的数据
*   超过 N 个字节的数据

假设没有断开连接、缓冲区溢出或其他错误，您将始终按照服务器发送的顺序接收服务器发送的内容，但消息可能在接收端被截断或连接。这是需要大量 [*引用的原因之一？*] 的自定义 TCP 协议包括一个长度字段（因此您知道需要接收多少数据），或者某种表示数据结尾的方式。这样，您的接收器可以循环直到它接收到正确的数量，将其余的留在 TCP 缓冲区中以供下一次接收。

当你说你看到“垃圾”时，对我来说它看起来不像垃圾，它看起来像几个数据包连接在一起。

# c - 动态规划递归给出错误的结果

> ID：15925162
> 
> 赞同：1
> 
> 时间：2013-04-10T11:57:03.373
> 
> 标签：c, algorithm, dynamic-programming

我正在尝试解决背包问题的一个变体，并为它编写了一个递归解决方案。但我的解决方案是返回错误的值。我想我的算法有缺陷。你能帮我找出故障吗？

这是我的代码。

```
int calc_budget(int b, int i){
    // If we have reached the end
    if(i >= nParty){
            tbl[b][i] = 0;
            return tbl[b][i];
    }

    //If remaining capacity is not able to hold the ith capacity, move on to next element
    if(budget[i] > b){
            if(tbl[b][i+1] == 0){
                    tbl[b][i+1] = calc_budget(b,i+1);
            }
            return tbl[b][i+1];
    }
    else{   //If the ith capacity can be accomodated
            //Do not include this item
            if(tbl[b][i+1] == 0){
                    tbl[b][i] = calc_budget(b,i+1);
            }

            // Include this item and consider the next item
            if(tbl[b-budget[i]][i+1] == 0){
                    tbl[b-budget[i]][i] = fun[i] + calc_budget(b-budget[i], i+1);
            }

            // We have the results for includinng ith item as well as excluding ith item. Return the best ( max here )
            return max(tbl[b][i], tbl[b-budget[i]][i]);
    }

} 
```

`Objective of the problem: To find the maximum fun by optimally using the given max budget`

以下是我的输入。

```
budget[3] = {19,12,19}
fun[3] = {2,4,5}
calc_budget(30,0)
allowed budget: 30 
```

该程序的正确答案应该是 5。我的返回 7。我已经绘制了递归树以尝试调试。我的发现：在选择项目 0（右子树）时，val = 2 + (11,1)。这 (11,1) 将导致最大值（ (11,2) 和 0 ）。(11,2) 是 5，所以最终结果是 2+5 = 7。在这种 DP 技术中，我的算法不应该选择 11,2，因为预算总和超过了给定的。但这是我为递归 DP 找到的基本框架。这个算法有缺陷还是我弄错了。

谢谢

奇丹巴拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:46:01.360

首先，我认为 0 不足以表示以前计算过一个子问题，因为有一些子问题的答案实际上是 0。其次，您的代码中有错误，您应该将值设置为tbl[b][i] 在返回值之前。尝试这个：

```
// We have the results for includinng ith item as well as excluding ith item. Return the best ( max here )    
tbl[b][i]=max(tbl[b][i], tbl[b-budget[i]][i]);
return tbl[b][i]; 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:53:05.577

问题是，在通话期间，您为其他索引`calc_budget(b, i)`编写字段而不是. 我将尝试使用递归定义来解释这个问题。`tbl``[b][i]``calc_budget(b, i)`

我们首先定义递归关系。让`F(b, i)`您在聚会中获得最大的乐趣`i, ..., n`和最大的预算`b`。然后，

```
F(b, n+1) = 0
F(b, i)   = F(b, i+1) // if budget[i] > b
          = max( F(b, i+1), fun[i] + F(b - budget[i], i+1) ) // otherwise 
```

到目前为止，一切都很好。`calc_budget(b, i)`应该精确计算这个数字，并且它应该`tbl`用作已经计算值的缓存。换句话说，在第一次调用之后`calc_budget(b, i)`，`tbl[b][i] == F(b, i)`必须是真的。

这是实现此目的的一些伪代码：

```
initialize tbl[b][i] = -1 for all b, i.

def calc_budget(b, i):
    if tbl[b][i] != -1: return tbl[b][i]

    if i == n + 1:
        tbl[b][n+1] = 0
    else:
        if budget[i] > b:
            tbl[b][i] = calc_budget(b, i+1)
        else:
            tbl[b][i] = max( 
                            calc_budget(b, i+1), 
                            fun[i] + calc_budget(b - budget[i], i+1)
                           )

    return tbl[b][i] 
```

我希望你现在同意，因为`tbl`它实际上只是一个已经计算过的值的缓存，所以`tbl[b-budget[i]][i]`在调用`calc_budget(b, i)`.

# facebook - 有谁知道为什么 API 错误显示为“未知”？

> ID：15925163
> 
> 赞同：1
> 
> 时间：2013-04-10T11:57:03.957
> 
> 标签：facebook, facebook-graph-api, label, facebook-insights

当我转到 Insights --> Developer --> Activity & Errors 并尝试查看“API Activity and Errors”部分时，错误都被标记为“未知”：

![在此处输入图像描述](https://i.stack.imgur.com/lIR0J.png)

有谁知道我如何才能看到有关正在记录的错误的更多详细信息，甚至为什么它们被标记为“未知”？

# php - 对 Restful 架构进行分组

> ID：15925169
> 
> 赞同：1
> 
> 时间：2013-04-10T11:57:23.367
> 
> 标签：php, mysql, json, api, rest

假设我有一个照片库，有一个类似这样的数据库（Word ^_^ 中的匆忙模型）：

![在此处输入图像描述](https://i.stack.imgur.com/Uu734.png)

我已经为它写了一个rest API。但是我对如何映射某个场景感到困惑……</p>

```
/api/galleries - Lists all of the categories available
/api/galleries/:categoryID – Lists all of the galleries for this category
/api/galleries/:categoryID/:galleryID – Returns all of the info for a gallery
/api/galleries/:categoryID/:galleryID/images – Returns all images for a gallery 
```

现在，我的问题是，**如果我想在一个页面上列出所有画廊和所有图像怎么办？**就目前而言，我必须为每个画廊调用**/api/galleries/:categoryID/:galleryID/images/ 。**

您认为这样做的最佳做法是什么？也许**完全删除图像资源**并将图像合并到**/api/galleries/:categoryID/:galleryID**查询的结果中？或者也许创建一个名为“show-all”或其他东西的单独资源？即**/api/galleries/:categoryID/all/show-all**并返回与图像结合的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:11:44.370

为什么不这样使用。

```
/api/galleries - Lists all of the categories available
/api/galleries/:categoryID – Lists all of the galleries for this category
/api/galleries/:categoryID/info/:galleryID – Returns all of the info for a gallery
/api/galleries/:categoryID/images/:galleryID – Returns all images for a gallery
/api/galleries/:categoryID/images – Returns all images for a all galleries 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:32:15.403

我绝不是该主题的专家，但对我来说，您的 api 似乎有缺陷。

## 怎么了

例如，这个位置在说谎。

```
/api/galleries - Lists all of the categories available 
```

我希望它返回一个画廊列表。

```
/api/galleries/:categoryID 
```

在这里，我希望通过画廊 ID。

## 我的建议

有一个更干净的api。

```
/api/galleries                     // get all galleries
/api/galleries?expand=images       // get all galleries with the images
/api/galleries/:id                 // get a specific gallery
/api/galleries/:id?expand=images   // get a specific gallery with the images

/api/galleries/categories          // get all galleries categories
/api/galleries/categories/:cat     // get all galleries in a category

.... 
```

通过使用参数，API 不会因为您可能拥有的各种选项而变得混乱。保持干净和简单。

这是一个关于 REST api 设计的非常好的视频的链接[http://www.stormpath.com/blog/designing-rest-json-apis](http://www.stormpath.com/blog/designing-rest-json-apis)

## 还

我认为不需要单独的`info`表。`gallery`如果您将该信息添加到表中，它将使数据库更简单。

# php - mysql在一个字段中插入多个值

> ID：15925171
> 
> 赞同：2
> 
> 时间：2013-04-10T11:57:24.200
> 
> 标签：php, mysql

我在编程中有一个小问题，首先我像这张图片一样在文本区域添加了一些患者测试，文本区域的数量可以根据测试元素增加，![在此处输入图像描述](https://i.stack.imgur.com/zaVXs.png)

所以我想在一个字段中插入这些但只有一部分在表中更新这是我存储测试的记录表`![enter code here][2]`

![在此处输入图像描述](https://i.stack.imgur.com/gFZn5.png)

提交结果后，我的报告表中只有一个结果![在此处输入图像描述](https://i.stack.imgur.com/Fru9I.png)

这是我的文本区号

```
<div style="border:solid 2px #000; margin:2px;">
 <span style="padding:5px; font-size:14px; color:#FF0000;">{title}</span>
<textarea name="rep_result_" cols="75">{title}{txt}</textarea>
</div> 
```

我用这段代码插入它

```
gri("records","WHERE payment_id='$R[payment_id]' ","",$records);

    $dt = time();
    foreach($R as $k=>$v)
    {
        $test_id = str_replace('rep_result_', '', $k);

        if(strstr($k, 'rep_result_'))
        {
            $content = $v;
            $SQL = "INSERT INTO report SET
                   rep_te_id   = '$records[test_id]',
                   rep_result  = '$content',
                   record_id = '$records[id]',
                   rep_date    = '$dt'";
            ei($SQL);
        }
    } 
```

所以我只想在一个字段中插入所有元素测试，希望你能理解糟糕的英语我原谅，任何想法都会受到高度赞赏......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:05:54.670

尝试更换

```
<textarea name="rep_result_" cols="75">{title}{txt}</textarea> 
```

和

```
<textarea name="rep_result[]" cols="75">{title}{txt}</textarea> 
```

因为您对不同的区域使用相同的名称，所以 php 只采用最后一个 textarea.. 所以您需要将名称作为数组..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:05:11.163

您可以将 [] 添加到您的文本区域名称中，例如

```
<textarea name="rep_result_[]" cols="75">{title}{txt}</textarea> 
```

所以你将有一个带有 $_POST['rep_result_'] 的输入值数组，然后遍历它们并插入表。

# android - 在后退按钮单击时显示上一个活动

> ID：15925176
> 
> 赞同：0
> 
> 时间：2013-04-10T11:57:43.423
> 
> 标签：android, android-intent, android-activity, back

我有两个活动：`ActivityA`和`ActivityB`

`Activity A`包含**三个线性布局**。单击每个线性布局正在调用`showReport`正在启动的方法`ActivityB`。

在 Back Button click in 上`ActivityB`，我`ActivityA`在一个函数中得到结果`onActivityResult`并尝试刷新`ActivityA`.

但问题是——

当我单击任何线性布局时，将`onActivityResult`调用 并且 my`resultCode`变为等于`0`，因此条件为**真**并`Activity A`再次调用。

只有当我按下**后退按钮**时，如何调用`Activity A`或如何获得条件。`resultCode``0`

 **我的代码示例-

**活动一：**

```
int REQUEST_CODE = 2;

public void showReport(View v) 
    {
            tag = v.getTag().toString();
        Intent intent = new Intent(this, ActivityB.class);
        intent.putExtra("name", tag);
        this.setResult(RESULT_OK, intent);
        startActivityForResult(intent, REQUEST_CODE); 
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);

        if (resultCode == 0) {
            Intent in = new Intent(this, ActivityA.class);
            startActivity(in);  
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:52:41.187

尝试使用一些全局变量`ApplicationClass`（安装应用程序时将首次调用）

```
public  boolean  check =false; 
```

*   检查布尔值的真实值`check`（ `onActivityResult`第 `ActivityA`一次`check`是`false`这样，它不会走得更远）
*   当按回`ActivityB`然后设置值`check=true`
*   当你再次打电话时使`false`价值`check``ActivityB`

所以`activityA`只有当它出现时你才会打电话`ActivityB`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:01:34.050

> **活动一：**

```
Intent in = new Intent(this, ActivityA.class);
        startActivity(in); 
```

如果您在activityA中，那么为什么要再次启动相同的Activity？
无论如何，您可以使用此检查后退按钮 ->

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
if (resultCode == RESULT_CANCELED) {
//means back button was pressed in ActivityB
 }
} 
```

**编辑** 从`showReport`

```
 this.setResult(RESULT_OK, intent); 
```**

# php - 如何对依赖于常量的工厂类进行单元测试？

> ID：15925178
> 
> 赞同：3
> 
> 时间：2013-04-10T11:57:52.123
> 
> 标签：php, phpunit, zend-framework2

所以我有这个实现 Zend\ServiceManager\FactoryInterface 的工厂类：

```
class GatewayFactory implements FactoryInterface
{

    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $config = new Config($serviceLocator->get('ApplicationConfig'));
        if ('phpunit' === APPLICATION_ENV) {
            return new Gateway($config, new Mock());
        }
        return new Gateway($config);
    }

} 
```

它总是返回网关实例，但当 APPLICATION_ENV 常量为“phpunit”时添加一个模拟适配器作为第二个参数。

我正在使用此配置运行我的单元测试：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit bootstrap="tests/unit/Bootstrap.php" colors="true" backupGlobals="false" backupStaticAttributes="false" syntaxCheck="false">
    <testsuites>
        <testsuite name="mysuite">
            <directory suffix="Test.php">tests/unit</directory>
        </testsuite>
    </testsuites>
    <php>
        <const name="APPLICATION_ENV" value="phpunit"/>
    </php>
</phpunit> 
```

因此 APPLICATION_ENV 设置为“phpunit”。当常数不同时，如何为案例编写测试？

我可以测试 if 条件，但我不知道如何测试一个不在 if 条件内的案例：

```
class GatewayFactoryTest extends PHPUnit_Framework_TestCase
{

    public function testCreateServiceReturnsGatewayWithMockAdapterWhenApplicationEnvIsPhpunit()
    {
        $factory = new GatewayFactory();
        $gateway = $factory->createService(Bootstrap::getServiceManager());
        $this->assertInstanceOf('Mock', $gateway->getAdapter());
    }

    public function testCreateServiceReturnsGatewayWithSockerAdapterWhenApplicationEnvIsNotPhpunit()
    {
        // TODO HOW TO DO THIS?
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:03:48.493

您不应该编写仅用于测试的代码。您应该编写可以测试的代码。

你可以做这样的事情。

```
public function createService(ServiceLocatorInterface $serviceLocator, $mock = null)
{
    $config = new Config($serviceLocator->get('ApplicationConfig'));

    return new Gateway($config, $mock);
} 
```

不过，我也想看看这`Gateway`门课。为什么它有时需要一个额外的对象？

# c# - 观看文件的最佳方式

> ID：15925184
> 
> 赞同：0
> 
> 时间：2013-04-10T11:58:04.593
> 
> 标签：c#, .net, file-io

好的，我有一个应用程序可以根据另一个应用程序创建的文件生成一些合同。

我已经实现了一个文件监视程序来监视正在创建的文件，然后它会启动一个`backgroundworker`基于文件名创建合同的过程。

我遇到的问题是，在后台工作进程中，我设置`EnableRaisingEvents`为 false 以便应用程序在第一个合同运行时不会开始处理不同的合同集（这也是在后台工作进程运行时停止调用它不能一次运行两件事！）。

一切正常，其他应用程序创建一个文件，filewatcher 将其拾取并开始处理，问题是处理完成后，filewatcher 被重新启用，但我认为它不会拾取任何在`EnableRaisingEvents`为 false 时创建的文件 - 并且因此，如果创建初始文件以生成合同的应用程序碰巧在我的应用程序处理时创建了另一个文件，它将被留下。那有意义吗？最好的解决方法是什么？

我曾想过有另一个过程，当初始合同创建完成后，将在目录中查找在禁用文件观察器之间创建的其他文件，如果没有，它将重新启用文件观察器，但我想知道如果有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:02:59.740

您可以将流程拆分为任务。一项任务是 FileRegistrator ，它拾取新文件，将它们注册到数据库中。它一直在运行，无需将 EnableRaisingEvents 设置为 false。

下一个任务是 ProcessorTask（或任何名称），它将查询数据库，找到第一个并处理它。它将定期查询数据库以查看是否注册了新文件。

您可以在 Windows 服务中使用 Quartz.NET 调度程序来实现这个小处理器。

（前段时间我也做了同样的事情，但我没有使用 FileSystemWatcher）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:12:00.390

BlockingCollection 可以做到这一点。
保持 FileWatcher 热并让它添加到阻塞集合中。
消费者一次只处理一个集合。

[BlockingCollection 类](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

```
class AddTakeDemo
{
    // Demonstrates: 
    //      BlockingCollection<T>.Add() 
    //      BlockingCollection<T>.Take() 
    //      BlockingCollection<T>.CompleteAdding() 
    public static void BC_AddTakeCompleteAdding()
    {
        // here you need to synch as it would have missed any 
        // new files while the application was down 
        // yes L-Three and any files that were not yet processed 
        // clearly the existing program is an end to end synch 
        // or no synch at all as it could be nothing else 
        using (BlockingCollection<int> bc = new BlockingCollection<int>())
        {

            // Spin up a Task to populate the BlockingCollection  
            using (Task t1 = Task.Factory.StartNew(() =>
            {
                //  FielSystem watcher                    
                bc.Add(fille);

            }))
            {

                // Spin up a Task to consume the BlockingCollection 
                using (Task t2 = Task.Factory.StartNew(() =>
                {
                    try
                    {
                        // Consume consume the BlockingCollection 
                        while (true) Console.WriteLine(bc.Take());
                        // process the file
                    }
                    catch (InvalidOperationException)
                    {
                        // An InvalidOperationException means that Take() was called on a completed collection
                        Console.WriteLine("That's All!");
                    }
                }))

                    Task.WaitAll(t1, t2);
            }
        }
    }
} 
```

# angularjs - AngularJS - 在子指令中包含和访问 ng-repeat 过滤列表，

> ID：15925186
> 
> 赞同：1
> 
> 时间：2013-04-10T11:58:11.120
> 
> 标签：angularjs, angularjs-directive, angularjs-scope, angularjs-ng-repeat

我想平铺进入的元素（根据过滤列表`ng-repeat`设置它们）`css`

理想情况下，我想像这样使用 html 标记：

```
<ul>
  <li ng-repeat="row in rows">
     <h6>{{row.name}}</h6>
     <ul>
        <li ng-repeat="item in items|filter:row" tile>{{ item.name }}</li>
     </ul>
  </li>
</ul> 
```

1.  我是否可以访问正在传递给的列表`ng-repeat`？（AngularJS 以外的任何其他方式[- 如何获取 ngRepeat 过滤结果参考](https://stackoverflow.com/questions/11721863/angularjs-how-to-get-an-ngrepeat-filtered-result-reference)）
2.  我可以以某种方式`transclude`处理这些项目，因此该`tile`指令实际上会应用 css（我想抽象`ng-style="{top:getTop(item),left:getLeft(item)}"`等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:47:08.203

> 我可以访问传递给 ng-repeat 的列表吗？（AngularJS 以外的任何其他方式 - 如何获取 ngRepeat 过滤结果参考）

我认为您需要执行您在引用的链接中看到的操作：

```
ng-repeat="item in (filteredItems = (items|filter:row))" tile> 
```

假设您的`tile`指令没有创建新范围，它将共享 ng-repeat 创建的范围（每个项目一个范围）。因此，该`filteredItems`属性将可用于您的指令。

> 我可以以某种方式转换项目，因此 tile 指令实际上会应用 CSS（我想抽象 ng-style="{top:getTop(item),left:getLeft(item)}" 等）

您的`tile`指令可以访问`li`定义它的元素。所以你可以简单地调用，例如，`element.addClass(...)`。

# r - 有序排列

> ID：15925187
> 
> 赞同：1
> 
> 时间：2013-04-10T11:58:13.983
> 
> 标签：r, permutation

我希望为大数生成有序排列，即 37P10（大小为 10 的 37 的排列）。我正在为此目的使用`combinat`包，`permn()`函数，但它不适用于超过 10 个数字。同样通过这个，我无法生成如上面示例中描述的不同大小的排列。

此外，我正在使用`do.call(rbind,)`函数将这些排列组合成一个矩阵。请问有任何其他 R 语言中的包可以用于此目的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T13:00:04.923

你所要求的根本无法完成。您要求生成和存储 10 个数字的 1.22e15（或 4.81e15 替换）排列。即使每个数字只有一个字节，您也需要**1000 万 GB**的 RAM。

在我的[LSPM](http://r-forge.r-project.org/projects/lspm)包中，我使用该函数`LSPM:::.nPri`根据其词法排序索引生成特定排列。您无法在合理的时间内迭代*每个*排列，因此我建议您对所有可能的排列进行抽样。

请注意，由于如此大的数字的精度问题，上述代码不适用于 nPr(37,10)，但它应该作为一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T12:42:49.207

在普通计算机上生成这么多排列几乎是不可能的。

快速计算显示`(37 P 10)`是`1264020397516800`。要存储这么多整数本身，您需要`1264020397516800 x 64`位。即`8.09×10^7 Gb (gigabits)`或`10^7 Gigabytes`。然后要存储实际的排列信息，您将需要更多的“内存”在 RAM 或硬盘中。

我认为最好的策略是编写置换函数，按顺序创建有序置换，并迭代地进行分析而不生成所有可能的置换。

# c# - 使用 GroupBy 和 Sum 作为键/值创建字典

> ID：15925189
> 
> 赞同：1
> 
> 时间：2013-04-10T11:58:20.613
> 
> 标签：c#, .net, linq

我有消息类，例如

```
public class Message
{
  public int Id {get;set;}
  public string Name {get;set;}
  public ICollection<MessageProperty> Properties {get;set;}
}

public class MessageProperty
{
  public string Key {get;set;}
  public string Value {get;set;}
} 
```

我想要一个`Dictionary<string, int>`键为“语言”的键，以及语言匹配的所有消息的总和值。

所以我最终得到`Key:"en-GB", Value:123`

我目前有一个`IEnumerable<Message>`工作来获取信息。

我知道我将不得不做一个 GroupBy 和一个 Sum，但我尝试过的所有事情都没有奏效。

你能告诉我如何得到这本词典吗？谢谢

**更新：**我的 Enumerable 中的每条消息都希望

```
{
   "id":1,
   "name":"test",
   "properties":[
      {
         "Key":"language",
         "Value":"en-gb"
      },
      {
         "Key":"gender",
         "Value":"male"
      },
      {
         "Key":"klout",
         "Value":10
      }
   ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:01:51.473

这将从所有消息中选择所有属性，然后根据键创建字典并计算每个键出现的次数

```
messages.SelectMany(message => message.Properties)
        .Where(prop => prop.Key == "language")
        .GroupBy(prop => prop.Value)
        .ToDictionary(grp => grp.Key,
                      grp => grp.Count()); 
```

# hadoop - Hadoop 中的并行 Map Reduce 作业

> ID：15925196
> 
> 赞同：0
> 
> 时间：2013-04-10T11:58:35.910
> 
> 标签：hadoop, mapreduce

我必须在 hadoop 1.0.4 中运行许多（可能是 12 个）作业。我希望首先并行运行 5 个，然后在全部完成后并行运行 4 个其他作业，最后再次运行最后 3 个以并行运行。我如何在 hadoop 1.0.4 中设置它，因为我看到所有作业都相互运行而不是并行运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:24:02.947

[JobControl](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapreduce/lib/jobcontrol/JobControl.html) API 可用于 MR 作业依赖。对于复杂的工作流程，推荐使用[Oozie](http://oozie.apache.org/)或[Azkaban](https://github.com/azkaban/azkaban)。[这](http://www.crobak.org/2012/07/workflow-engines-for-hadoop/)是Oozie vs Azkaban，

# java - 在模拟器之间发送通知

> ID：15925200
> 
> 赞同：0
> 
> 时间：2013-04-10T11:58:51.907
> 
> 标签：java, android, eclipse

正如我想知道的一个人已经问过的那样，是否有人可以帮助我们在 2 个模拟器之间发送和接收通知。例如，有一个函数可以发送通知，但不是发送到同一个模拟器（比如 5554），而是发送到另一个模拟器（比如 5556），以便接收者可以检查通知并触发`onClick listener`接受或拒绝通知

```
NotificationManager manager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
Notification notification = new Notification(R.drawable.ic_launcher,msg,System.currentTimeMillis());
notification.setLatestEventInfo(this, msg, details, null);
int num = 0;
manager.notify(num, notification); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:31:36.990

通知不能发送到其他设备，您只能通过您的应用程序通知您自己的设备。如果您想在另一台设备上显示任何通知，您必须在您的应用程序中为它编写代码，该应用程序在另一台设备上运行并使用短信或某些网络服务或推送消息系统触发通知。

如果您想与其他设备进行通信以获取通知.. 使用 PUSHMESSAGE.. 检查 GCM [http://developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

# perl - 合并多个 HTML 文件

> ID：15925203
> 
> 赞同：1
> 
> 时间：2013-04-10T11:59:12.770
> 
> 标签：perl

我将目录/子目录中的多个 html 文件合并到同一目录中的单个 html 中。我浏览了一些网站并尝试了以下代码：

```
#!/usr/bin/perl -w
use strict;
use File::Slurp;
my $basedir = 'c:/test';

opendir(DIR, $basedir) or die $!;
my @files = readdir(DIR); # name arrays plural, hashes singular
closedir DIR;

my $outfilename = 'final.htm';
my $outfilesrc = undef; 

foreach (sort @files){ 
  $outfilesrc.= File::Slurp::slurp("$basedir/$_");
}

open(OUT, "> $basedir/$outfilename") or die ("Can't open for writing: $basedir/$outfilename : $!");
print OUT $outfilesrc;
close OUT;

exit; 
```

但我收到以下错误，无法合并文件。

```
read_file 'c:/test.' - sysopen: Permission denied at mergehtml.pl line 15 
```

谁能帮我！有没有办法在 Perl 中将 HTML 文件合并为单个文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:08:09.687

您的错误很可能来自尝试打开“当前目录”`c:\test\.`进行阅读。这来自`readdir`用于列出文件：`readdir`包括*所有*文件。

如果您要做的只是连接文件，那么如果您在 linux 中，它就相当简单：`cat test/* > final.htm`. 不幸的是，在 Windows 中它有点棘手。

```
perl -pe"BEGIN { @ARGV = map glob, @ARGV }" "C:/test/*" > final.htm 
```

解释：

我们使用该`-p`选项来读取和打印参数文件名的内容。在这种情况下，这些参数是一个 glob，并且 windows 命令 shell 不会自动执行这些 glob，所以我们必须让 perl 使用内置`glob`命令来执行它。我们在 BEGIN 块中执行此操作，以将其与其余代码分开。在这种情况下，“其余代码”只是（基本上）一个`while (<>) { print }`读取和打印文件内容的块。在该行的末尾，我们将所有输出重定向到文件`final.htm`。

为什么要使用`glob`over `readdir`？好吧，一方面，`readdir`包括目录`.`（当前目录）和`..`（父目录），这会弄乱你的代码，就像我在顶部提到的那样。您需要过滤掉目录。并且`glob`毫无问题地顺利完成。

如果你想要这个脚本的更长版本，你可以做

```
use strict;
use warnings;

@ARGV = map glob, @ARGV;
while (<>) {
    print;
} 
```

请注意，我怀疑您只想合并 html 文件。因此，将您的 glob 从更改`*`为类似的东西可能是一个好主意

```
*.htm *.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:08:39.507

过滤掉文件“。” 和 @files 列表中的“..”。

# django - 跳过forloop Django中的特定步骤

> ID：15925208
> 
> 赞同：0
> 
> 时间：2013-04-10T11:59:21.453
> 
> 标签：django, for-loop, skip

嗨，我在 django 模板中使用了 forloop

```
{% for image in images %}
{% endfor %} 
```

> 执行 10 个步骤

但我想跳过第 5 步并执行剩下的我该怎么做请建议...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:59:56.033

```
{% for image in images %}
   {% if forloop.counter != 5 %}
    ...
   {% endif %}
{% endfor %} 
```

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:31:26.893

```
{% for image in images %}
   {% if forloop.counter0 != 5 %}
    ...
   {% endif %}
{% endfor %} 
```

这对我有用

# wpf - 使用 ControlTemplate 将 RadioButton 添加到 XAML 中的 WPF ListItem

> ID：15925211
> 
> 赞同：0
> 
> 时间：2013-04-10T11:59:31.027
> 
> 标签：wpf, xaml, listview, radio-button, controltemplate

按照[gehho对“MVVM Group Radio Button”的回答，](https://stackoverflow.com/a/2713623/575530)我正在尝试向列表项添加一个单选按钮，以便在选择列表项时选中单选按钮，当未选择列表项时，未选中单选按钮. Kelly 对他或她的“将 RadioButton IsChecked 绑定到 ListBoxItem IsSelected 和 ListBox IsFocused”问题有[一个很好的回答](https://stackoverflow.com/a/1427790/575530)，看起来它应该可以满足我的需要。然而，我对 Kelly 的 XAML 的简单转换不起作用 - 单选按钮仍未选中。这是我的全部 MainWindow.xaml

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:SampleData="clr-namespace:Expression.Blend.SampleData.SampleDataSource" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Class="RadioButton.MainWindow"
    x:Name="Window"
    Title="MainWindow"
    Width="640" Height="480">

    <Window.Resources>
        <SampleData:SampleDataSource x:Key="SampleDataSource" d:IsDataSource="True"/>
        <ControlTemplate x:Key="LBItemControlTemplate" TargetType="{x:Type ListBoxItem}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock TextWrapping="Wrap" Text="{Binding Property1}" Grid.Column="1"/>
                <RadioButton x:Name="rbIsSelected" IsChecked="False" IsEnabled="False"/>
            </Grid>
            <ControlTemplate.Triggers>
                <MultiTrigger>
                    <MultiTrigger.Conditions>
                        <Condition Property="IsSelected" Value="True"/>
                        <Condition Property="Selector.IsSelectionActive" Value="True"/>
                    </MultiTrigger.Conditions>
                    <Setter Property="IsChecked" TargetName="rbIsSelected" Value="True"/>
                </MultiTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <DataTemplate x:Key="ListBoxItemTemplate">
            <ListBoxItem Template="{StaticResource LBItemControlTemplate}"/>
        </DataTemplate>
    </Window.Resources>

    <Grid x:Name="LayoutRoot" DataContext="{Binding Source={StaticResource SampleDataSource}}">
        <ListBox ItemsSource="{Binding Collection}" ItemTemplate="{DynamicResource ListBoxItemTemplate}" SelectionMode="Single"/>
    </Grid>
</Window> 
```

任何人都可以看到为什么这不起作用并建议修复或不​​同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:15:20.643

你知道这`ItemsControls`将为找到的每个数据项自动创建一个容器项吗？您`DataTemplate`包含一个`ListBoxItem`永远不正确的内容。你基本上说“当你在 ListBoxItem 中显示我的内容时，创建一个新的 ListBoxItem”。因此，您的代码依赖于您的 detached `ListBoxItem`，它永远无法被选择，因为它不是 an 中的容器项`ItemsControl`，因此它无法工作。您`DataTemplate`只是容器内的内容，在这种情况下，DataTemplate 应该定义您的数据在`ListBoxItem`.

这是一个小但不一定是好的实践示例，但它表明您不必创建 a `ListBoxItem`，它会自动存在：

作为资源的某处，例如 Window.Resources 或 app.xaml：

```
<DataTemplate x:Key="myTemplate">
    <StackPanel Orientation="Horizontal">
        <CheckBox IsChecked="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}}, Path=IsSelected}"/>
        <TextBlock Text="{Binding}"/>
    </StackPanel>
</DataTemplate> 
```

以及使用本身

```
<ListBox x:Name="test" ItemTemplate="{StaticResource myTemplate}"/> 
```

在这种情况下，列表框需要在后面的代码中设置一个 ItemsSource。

# c# - 修改继承控件的外观

> ID：15925218
> 
> 赞同：1
> 
> 时间：2013-04-10T11:59:41.453
> 
> 标签：c#, winforms, telerik, radgridview

我有一个来自 Telerik 的专有组件，称为 RadGridView。这是一个带有一些扩展功能的简单 GridView。没什么好说的，就是一个控制。
我很想给它添加分页支持，所以我创建了这个复合控件：

![在此处输入图像描述](https://i.stack.imgur.com/fUC8X.png)

它没有太多内容，只是一个带有 Fill 停靠属性的 RadGridView，上面有一个带有 Top 停靠属性的工具栏。

这种方法的问题在于它与 RadGridView 的界面不匹配。我需要用这个替换每次出现的 RadGridView，这可能会很成问题。

我需要通过从 RadGridView 继承来找到一种方法来做同样的事情。它是一个可继承的控件，它的所有方法都是虚拟的。我不知道该怎么做，是如何修改它的外观，使工具条栏出现停靠在 RadGridView 的正上方。我读过我应该修改 OnPaint 事件，但我对从那里去哪里感到困惑。从 RadGridView 继承时，Visual Studio 上的设计器也不允许我修改其外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:11:52.147

一种简单的方法是：

```
class CustomButton : Button
{
    protected override void OnPaint(PaintEventArgs pevent)
    {
        TextBox tb = new TextBox();
        tb.Width = 100;
        tb.Height = 20;
        tb.Top = this.Top - 20;
        tb.Left = this.Left;

        this.Parent.Controls.Add(tb);
        base.OnPaint(pevent);
    }
} 
```

编译后，您将在工具箱中看到可用的控件。当然，您可以使用属性，但这是基本的。因此，创建一个表示分页的自定义控件并以这种方式添加它。

解决方案 2：创建一个复合控件（就像您所做的那样）并将 RadGridView 公开为该控件的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:24:42.883

这里已经有一个演示分页的示例：[Gridview paging using CommandBar](http://www.telerik.com/support/pits.aspx#/details/Issue=14050) 和一个演示如何在此处向 RadGridView 添加元素的示例：[向 RadGridView 添加元素](http://admin.telerik.com/?Context=Support&Control=~/UserControls/Support/ThreadReply.ascx&ST=589548&SM=0)

# ant - 用 ant 重新组织 jar 中的文件

> ID：15925222
> 
> 赞同：0
> 
> 时间：2013-04-10T11:59:49.970
> 
> 标签：ant, jar, oracle-adf

我目前正在使用`ojdeploy`. 不幸的是，罐子的包装不像它应该的那样。

所以我在路径中有图像

```
lookAndFeel.jar/skins/lightsOff/images
lookAndFeel.jar/skins/lightsOn/images 
```

我需要与之合并

```
lookAndFeel.jar/META-INF/adf/skins/lightsOff/images
lookAndFeel.jar/META-INF/adf/skins/lightsOn/images 
```

有没有办法用蚂蚁做到这一点？

**编辑**

我阅读了[15 大 Ant 最佳实践](http://www.onjava.com/pub/a/onjava/2003/12/17/ant_bestpractices.html)第 13 点，他们指出，我应该使用`zipfileset`. 但我无法这样做，因为我需要的文件已经在 jar 中。最初的 jar 创建是通过它完成的，`ojdeploy`因此我对 jar 的初始结构没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:41:09.457

我试图了解问题所在：

*   你创造了这个罐子吗？
*   您是*合并*新数据还是移动它？

正如其他人所说，您需要解压缩，调整结果，然后将其重新压缩。没什么大不了的：

```
<property name="target.dir"   value="${basedir}/target"/>
<property name="work.dir"     value="${target.dir}/work"/>
<property name="munge.dir"    value="${work.dir}/munge"/>

<target name="munge.jar">
    <unjar src="${jar.file}"
        dest="${munge.dir}"/>

    <here be dragons.../>

    <delete file="${jar.file}"/>

    <jar destfile="${jar.file}
       basedir="${munge.dir}"/>
</target> 
```

不是 100% 确定您想要什么，您必须填写该`<here be dragons.../>`部分。您将移动、重命名、随机播放、删除并添加到您心中的内容。

另一种可能性是使用`<mapper/>`子实体在您解压时重新格式化您的 jar。

```
<target name="munge.jar">
    <unjar src="${jar.file}"
        dest="${munge.dir}">
        <mapper type="glob"
            from="skins/**/*"
            to="META-INF/adf/skins/**/*"/>
    </unjar>

    <delete file="${jar.file}"/>

    <jar destfile="${jar.file}
       basedir="${munge.dir}"/>
</target> 
```

我没有测试上述内容，但它会给你一个想法。

# jquery - 从客户端向 html 表添加行并将 html 表导出到客户端机器（浏览器）上的 excel

> ID：15925227
> 
> 赞同：1
> 
> 时间：2013-04-10T11:59:59.090
> 
> 标签：jquery, asp.net, html

```
<table summary="merhaba" class="datagrid" id="tablo1" runat="server">
        <thead><tr>
            <th id="Th1" style="border:solid 1px #000000" runat="server">ad</th>
            <th id="Th2" runat="server">Soyad</th>
            <th id="Th3" runat="server">TC</th>
               </tr>
        </thead>
        <tbody>
            <tr>
                <td>ebrar</td>
                <td>bayburt</td>
                <td>999</td>
            </tr>
        </tbody>
    </table> 
```

我可以添加行：

```
$('#button').click(function () {//tabloya veri ekleme
             $('#tablo1 > tbody:last')
               .append('<tr><td class="A">' +
               $('#ad_').val()
               + '</td><td class="K">' +
               $('#soyad_').val()
               + '</td><td class="A">' +
               $('#tc_').val()
               + '</td></tr>');

}); 
```

我可以使用以下代码将表格导出到 excel：

```
protected void Button1_Click2(object sender, EventArgs e)
        {
           Response.Clear();
            Response.AddHeader("content-disposition", "attachment;filename=myexcel.xls");
            Response.ContentType = "application/ms-excel";
            System.IO.StringWriter sw = new System.IO.StringWriter();
            System.Web.UI.HtmlTextWriter hw = new HtmlTextWriter(sw);
            tablo1.RenderControl(hw);
            Response.Write(sw.ToString());
            Response.End();
         } 
```

但是当打开 excel 文件时，我看不到从客户端添加的添加行，我只能看到我在代码中添加的那一行：

```
<tbody>
            <tr>
                <td>ebrar</td>
                <td>bayburt</td>
                <td>999</td>
            </tr>
        </tbody> 
```

我曾经问过这个问题

[我将 html 表导出到 Excel 的第一个问题](https://stackoverflow.com/questions/15920633/adding-rows-to-html-table-with-jquery-and-exporting-html-table-to-excel-file-wit)

但是我必须用jquery添加行，添加后我必须将html表导出到excel中，里面装满了添加的行，有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:50:00.773

这是因为您的 c# 代码是后端，并且不知道您已经操作了 DOM。您需要在 jQuery 而不是 c# 中创建您的 excel 文件。

这可能会帮助你。 [http://forum.jquery.com/topic/jquery-create-excel-file-from-table-data](http://forum.jquery.com/topic/jquery-create-excel-file-from-table-data)

# android - 屏幕解锁后视频在部分屏幕上播放

> ID：15925237
> 
> 赞同：4
> 
> 时间：2013-04-10T12:00:27.613
> 
> 标签：android, android-videoview, android-orientation

我正在使用**VideoView**播放具有给定 URL 的视频。我想要视频全屏。一切运作良好。但我面临着奇怪的问题。**当您关闭屏幕然后解锁它时，视频会在屏幕的一部分播放**..大约屏幕的 3/4 区域..我搜索了很多但仍然找不到解决方案。

仅供参考，我的整个应用程序只能在纵向模式下运行，并且只能在横向模式下播放视频。不知道是不是这个原因。但这不应该。

请帮我。提前致谢。

# c# - 指数超出范围。必须是非负数且小于集合的大小

> ID：15925239
> 
> 赞同：0
> 
> 时间：2013-04-10T12:00:40.743
> 
> 标签：c#, asp.net

任何人都可以建议将多个选定值从列表框存储到asp.net c#中的数据库的代码

```
 string day = dataGridView1.Rows[0].Cells[0].Value.ToString();
 //DateTime.Now.DayOfWeek.ToString();
 dataGridView1.Rows[0].Cells[1].Value = 
                Convert.ToDateTime(day.ToString())).DayOfWeek.ToString();
 for (int i = 1; i < 10; i++)
 {
     DateTime dtd = Convert.ToDateTime(day).Date;
     dtd = dtd.AddDays(7);
     dataGridView1.Rows[i].Cells[0].Value = dtd;
     DateTime date = dtd;
    dataGridView1.Rows[i ].Cells[1].Value = 
                   (Convert.ToDateTime(date.ToString())).DayOfWeek.ToString();
  }
} 
```

**错误**

```
Index was out of range. Must be non-negative and less than the size of the collection. 
Parameter name: index. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:06:35.267

请注意，对于 X 的大小，索引是 0 到 (x-1)。

所以也许你想使用：

```
for (int i = 0; i < 9; i++) 
```

或`i<dataGridView1.Rows.Count()`用作循环停止条件语句而不是 i<9 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:32:23.183

在您开始访问行或单元格之前，您应该创建一个！！！我希望这段代码对你有帮助

```
dataGridView1.Columns.Add("date", "Date");
        dataGridView1.Columns.Add("day", "Day");

        var day = DateTime.Now;
        DataGridViewRow row = new DataGridViewRow();
        DataGridViewCell cell = new DataGridViewTextBoxCell();
        cell.Value = (Convert.ToDateTime(day.ToString())).DayOfWeek.ToString();
        row.Cells.Add(cell);
        dataGridView1.Rows.Add(row);
        for (int i = 1; i < 10; i++)
        {
            DateTime dtd = Convert.ToDateTime(day).Date;
            dtd = dtd.AddDays(7);
            row = new DataGridViewRow();
            cell = new DataGridViewTextBoxCell();
            cell.Value = dtd.ToString();
            row.Cells.Add(cell);
            DateTime date = dtd;
            cell = new DataGridViewTextBoxCell();
            cell.Value = (Convert.ToDateTime(date.ToString())).DayOfWeek.ToString();
            row.Cells.Add(cell);
            dataGridView1.Rows.Add(row);
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-28T17:54:36.650

确保 dataGridView 可见属性为“visible=true”

# php - 这个 URL 缩短器有什么问题？

> ID：15925246
> 
> 赞同：0
> 
> 时间：2013-04-10T12:00:51.420
> 
> 标签：php, url

为什么以下代码不缩短此 URL？为什么不把它变成一个实际的可点击 URL？此功能似乎在除此之外的所有其他情况下都有效。

网址：

`strongatheism.net/library/atheology/argument_from_noncognitivism/`

代码：

```
function urlfixer($text){

   $pattern  = '#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
   $callback = create_function('$matches', '
       $url       = array_shift($matches);      
       $url_parts = parse_url($url);

       $text = parse_url($url, PHP_URL_HOST) . parse_url($url, PHP_URL_PATH);
       $text = preg_replace("/^www./", "", $text);

       $last = -(strlen(strrchr($text, "/"))) + 1;
       if ($last < 0) {
           $text = substr($text, 0, $last) . "&hellip;";
       }

        $url = "http://" . str_replace("http://","",$url);
       return sprintf(\'<a rel="nofollow" target="_blank" href="%s">%s</a>\', $url, $text);
   ');

   return preg_replace_callback($pattern, $callback, $text);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:07:11.257

我有问题要回答您的问题，因为根据您的要求，我会看到两个答案：

1.  因为正则表达式没有捕获它。
2.  因为它在函数上下文中不被视为有效 URL。

为了使其正常工作，您需要正确定义 URL 的构成（此处以正则表达式模式的形式），或者您需要在自己的规范中定义它（问题中缺少该规范）。

具有复杂正则表达式的好的代码总是包含正则表达式的确切作用的描述，因为它们往往变得晦涩难懂。这样的注释也可以很好地用作限定有效输入的小规范。代码可能类似于（[取自 youtube 视频 ID 的示例](https://stackoverflow.com/a/6556662/2261774)）：

```
$pattern = 
    '%^# Match any youtube URL
    (?:https?://)?  # Optional scheme. Either http or https
    (?:www\.)?      # Optional www subdomain
    (?:             # Group host alternatives
      youtu\.be/    # Either youtu.be,
    | youtube\.com  # or youtube.com
      (?:           # Group path alternatives
        /embed/     # Either /embed/
      | /v/         # or /v/
      | /watch\?v=  # or /watch\?v=
      )             # End path alternatives.
    )               # End host alternatives.
    ([\w-]{10,12})  # Allow 10-12 for 11 char youtube id.
    $%x'
    ; 
```

由于您的问题缺乏构成有效 URL 的内容（仍未指定），因此除了添加规范或修复模式（或两者兼而有之）之外，没有什么要回答的了。

然而，第二个问题更容易回答：

> 为什么不把它变成一个实际的可点击 URL？

因为它没有被捕获。

# sql - 避免使用 sql_variant 但使用什么？

> ID：15925250
> 
> 赞同：0
> 
> 时间：2013-04-10T12:00:59.103
> 
> 标签：sql, database, sql-variant

我的数据库包含具有值的模板表单和真实表单。用户将能够创建具有不同类型字段的自定义模板表单。我会将值保存在单独的表中。

表格：

```
Id | Name | TemplateId 
```

表单字段表：

```
Id | FormId | Name | ValueType (nvchar) 
```

值表

```
FieldId | Value 
```

当用户设计表单时，它会保存到具有 TemplateId 的表单表中`NULL`。FormFields 表还存储将用于此表单的字段。稍后当用户使用该模板创建*真实*表单时，该表单的真实值（从 FormFields 派生）将存储在 Values 表中。现在，值表中的值列似乎是`sql_variant`类型。如果我不使用`sql_variant`如何解决这个问题？

Ps：为每种值创建不同的表怎么样？TableIntValues、TableBoolValues 等？

[http://www.jotform.com/](http://www.jotform.com/)可以作为我项目的一个很好的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:11:24.123

我建议按照以下方式对单独的数据类型使用单独的列：

```
FieldId | StringValue | IntegerValue  |  DateTimeValue 
```

这样，您就可以合理地对数据进行查询，并确保其类型安全。您显然需要确保数据正确填充的逻辑，以及确保仅填充一列而不是全部为 NULL 的约束。

# javascript - 当用户离开时触发事件

> ID：15925251
> 
> 赞同：32
> 
> 时间：2013-04-10T12:01:11.750
> 
> 标签：javascript, jquery, events

当用户关闭他的窗口/选项卡或通过单击链接导航离开时，我需要在 PHP 页面上调用其中包含几行代码的 JavaScript/jQuery 函数。我已经尝试过该`onbeforeunload`功能，但只有`return "blah blah blah;"`部分执行，其他所有内容都被忽略。我也尝试过`.unload`jQuery 的方法，但由于某种原因，这段代码没有运行。

```
$(window).unload(function() {
    alert('blah blah blah');
}); 
```

请提出替代方案。谢谢..

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-10T12:05:20.500

这是一个简单的工作示例。`return`回调中的任何内容`unload`都将显示在浏览器弹出确认中。

**卸载前发送 Ajax 请求的工作示例** [http://jsfiddle.net/alexflav23/hujQs/7/](http://jsfiddle.net/alexflav23/hujQs/7/)

最简单的方法是：

```
window.onbeforeunload = function(event) {
    // do stuff here
    return "you have unsaved changes. Are you sure you want to navigate away?";
}; 
```

在 jQuery 中：

```
$(window).on("beforeunload", function() {
    $.ajax("someURL", {
        async: false,
        data: "test",
        success: function(event) {
             console.log("Ajax request executed");
        }
    });
    return "This is a jQuery version";
}); 
```

查看浏览器的“网络”选项卡。您将看到请求是如何按照您的意愿发送的。只需发送适当的数据。

请记住，所有触发的操作都必须是同步的，因此您只能发出同步的 ajax 请求。但是，以上内容对于任何目的都不是完全可靠的。

选择定期将用户数据备份到`localStorage`服务器并自动与服务器同步。保留`window.onbeforeunload`只是作为一种额外的预防措施，而不是作为主要机制。众所周知，它会导致问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-07T22:19:12.703

这是一个老问题，但我想分享一种替代方法，该方法具有高一致性的好处：

与服务器建立 WebSocket 连接，当客户端离开时，WebSocket 连接将关闭。在服务器端，您可以在回调中检测关闭的连接并在服务器上运行您需要的任何代码。

在页面卸载时执行 Javascript 通常是不可靠的（如另一个答案中所述），因为它本质上与用户的意图不一致。这种方法总是有效的，尽管实施起来确实有点麻烦。

这确实将“离开前运行”代码的上下文从客户端更改为服务器端，但我想在大多数情况下，差异是无关紧要的。在客户端离开您的页面之前您想在客户端运行的任何内容都可能不会改变客户端看到的任何内容，因此在服务器端运行它可能没问题。如果您需要来自客户端的特定数据，您可以通过 WebSocket 将其发送到服务器。

我能想到的唯一可能导致意外行为的情况是，如果用户在没有实际导航的情况下丢失了 WS 连接，例如他们失去了互联网或让他们的计算机进入睡眠状态。这是否重要可能在很大程度上取决于您尝试执行的代码类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-22T14:19:38.813

在我的许多项目中，**这里提到的方法是不稳定的**。唯一对我有用的是将事件绑定为**body****元素上的原始属性**。

```
<body onunload="my_function_unload()"> 
```

jQuery方法：

```
$('body').attr('onunload', 'my_function_unload()'); 
```

从 iframe：

```
<body onunload="window.parent.my_function_unload()"> 
```

jQuery方法：

```
$('<iframe />').load(function(){
    $body = $(this).contents().find('body');
    $body.attr('onunload', 'window.parent.my_function_unload()');
} 
```

此外，**重要**的是，属性中没有参数，并且函数必须在全局窗口范围内，否则不会发生任何事情。

例如，常见错误如果您`my_function_unload()`被包裹在`;( function( $ ) {...`OR `$(document).ready(function(){...`AS中，则`my_function_unload()`必须**在该私有范围之外**。然后不要忘记使用`jQuery`而不是`$`前缀。（例如使用 Wordpress）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-16T21:16:16.523

这是一种痛苦，因为至少在 92.0.4515.131 版中，Chrome 似乎正在将安全螺丝固定在您可以在`beforeunload`. 例如，我无法发出同步 ajax 请求。

`beforeunload`如果用户有任何机会返回您的站点，您可以等到那时处理他们关闭窗口（这在我的用例中确实有效），请知道在活动期间设置 cookie 目前似乎是公平的游戏. 甚至在我关闭浏览器时也可以使用。它似乎涵盖了除重启计算机之外的大多数内容。

这是一个参考示例（从[这个 SO question](https://stackoverflow.com/a/25490531/1028230)`getCookie`中被盗）：

```
function setCookie(name, value) {
    document.cookie =
        '{0}={1};expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;SameSite=Lax'
            .replace("{0}", name)
            .replace("{1}", value);
}

// https://stackoverflow.com/a/25490531/1028230
function getCookie(cookieName) {
    var b = document.cookie.match('(^|;)\\s*' + cookieName + '\\s*=\\s*([^;]+)');
    return b ? b.pop() : '';
}

window.addEventListener('beforeunload', function (e) {
    console.log('cookie value before reset: ' + getCookie('whenItHappened'));

    var now = +new Date();
    console.log("value to be set: " + now);
    setCookie('whenItHappened', now);

    return "some string if you want the 'are you sure you want to leave' dialog to appear";
}); 
```

# c++ - 将 2 个字符串连接在一起

> ID：15925257
> 
> 赞同：-2
> 
> 时间：2013-04-10T12:01:29.377
> 
> 标签：c++, string

我有两个字符串：

```
string word;
string alphabet; 
```

`word`有一些我传递给的输入；比方说`"XYZ"`。

`alphabet`有字母 except `XYZ`，所以它是`"ABCDEFGHIJKLMNOPQRSTUVW"`

当我试图用“+=”连接它们时，我得到的只是`word`（即`"XYZ"`）。我想让它看起来像这样：

```
XYZABCDEFGHIJKLMNOPQRSTUVW 
```

我究竟做错了什么？代码基本就是这个vvvv

============================encryption.cpp==================== ==============================

```
#include <cstdlib>
#include <iostream>
#include "encryption.h"
#include <string>

encryption::encryption()
{
alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

}

string encryption::removeletter(string word,char letter)
{
    //remove letter
    string temp;
    int indis=0;
    for(int i = 0; word[i] != '\0'; i++)
    {
        if(word[i] != letter)
            {
                temp[indis]=word[i] ;
                indis++;
            }

    }

    word=temp;

    return word;
}

This is the function i have proplems with :

    void encryption::encrypt(string word)//main.cpp is just calling this atm
    {
        string temp;
        int pos;
         //getting rid of the repeating letters
        for(int i = 0; i < word.length(); i++)
        {
            if( (pos = temp.find(kelime[i])) < 0)
                temp += word[i];
        }
        word=temp;//that ends here
        //taking words letters out of the alphabet
        for(int i = 0; i < word.length(); i++)
        {
            alfabet=removeletter(alfabe,word[i]);

        }
        for(int i = 0; i < word.length()-1; i++)
        {
            for(int j=0;alfabet[j] !='\0'; j++)
                if(alfabet[j+1] =='\0') alfabet[j]='\0';
        }

        /* I tried += here */
    } 
```

============================加密.h==================== =================================

```
#ifndef encryption_h
#define encryption_h
#include<string>

    class encryption

    {
    public:
        encryption();

        void encrypt(string word);
        string removeletter(string word,char letter);
        //some other functions,i deleted them atm

    public:
            string alphabet;
            string encryptedalphabet;
            //staff that not in use atm(deleted)

    };

#endif 
```

============================main.cpp==================== ====================================

```
#include <cstdlib>
#include <iostream>
#include "encryption.h"
#include <string>

string word;
encryption encrypted;
cin>>word;
encrypted.encrypt( word); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:10:12.090

`+=`是你怎么做的，你一定是在做别的事情。

```
string word = "XYZ";
string alphabet = "ABCDEFGHIJKLMNOPQRSTUVW";
alphabet += word;
cout << alphabet << "\n"; 
```

输出

ABCDEFGHIJKLMNOPQRSTUVWXYZ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:04:28.120

利用

单词。[附加](http://www.cplusplus.com/reference/string/string/append/)（字母）；

请注意，当您想要连接许多字符串时，使用字符串流来避免不必要的字符串复制会更[有效](http://www.cplusplus.com/reference/sstream/stringstream/?kw=stringstream)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:11:35.747

```
string word = "XYZ";

string alphabet = "ABCDEFGHIJKLMNOPQRSTUVW";

word += alphabet; 
```

现在您可以打印“word”，您将找到答案。

# jasper-reports - 与 JasperReports 结合使用时的 JFreeChart 图表外观

> ID：15925258
> 
> 赞同：1
> 
> 时间：2013-04-10T12:01:29.683
> 
> 标签：jasper-reports, jfreechart, appearance

我在我的 java 应用程序中使用 JFreeChart 来显示这样的图表： ![在此处输入图像描述](https://i.stack.imgur.com/GBlEn.png)

但是在使用 JasperReports 创建报告后，该图表现在看起来像这样： ![在此处输入图像描述](https://i.stack.imgur.com/iVHxT.png)

这还不是全部，这是应用程序生成的第一个 PDF 报告中图表的样子： [![第一次报告](https://i.stack.imgur.com/klgk9.png)](https://i.stack.imgur.com/klgk9.png)

这就是我生成第二份报告时的样子，没有改变任何东西，只是再次生成它： [![第二次报告](https://i.stack.imgur.com/5QmKJ.png)](https://i.stack.imgur.com/5QmKJ.png)

每次我重新启动应用程序时，都会一次又一次地发生这种情况。在我创建报告之前，图表还可以。发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:55:12.847

看起来它[`JasperReports`](https://stackoverflow.com/tags/jasper-reports/info)使用了更平淡无奇`BarPainter`的方式[`ChartTheme`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartTheme.html)，可能是为了适应处理渐变效果不佳的目的地。

该[论坛主题](http://www.jfree.org/forum/viewtopic.php?f=3&t=115125&p=173754)建议将所需主题直接应用于图表。该[`createLegacyTheme()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/StandardChartTheme.html#createLegacyTheme%28%29)方法“返回一个`ChartTheme`不会对`JFreeChart`默认值进行任何更改的方法。它或类似的东西可能值得一试：

```
StandardChartTheme.createLegacyTheme().apply(chart) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T12:25:19.380

我已将编辑移至此处作为答案：

### 主题问题

感谢@trashgod，我尝试了以下行：

```
ChartFactory.setChartTheme(StandardChartTheme.createJFreeTheme()); 
```

如果我在应用程序中创建图表之前使用此行，报告将不再影响它们的外观。我认为在报告创建后只放置一次这条线就足够了。

所以现在我只有一个问题：第一份报告与后续报告不同：图表不同，字体更粗且没有抗锯齿......

### 第二次报告的问题

pdf 问题不是由 jasper 报告或 jfreechart 引起的。这是 Adob​​e Reader 的问题。当您运行多个 Adob​​e Reader 实例时会发生这种情况（例如，当您打开两个不同的文件时）。
问题示例： ![在此处输入图像描述](https://i.stack.imgur.com/33GqC.jpg) 类似问题：

*   [http://forums.adobe.com/message/4192938](http://forums.adobe.com/message/4192938)
*   [http://forums.adobe.com/thread/902298](http://forums.adobe.com/thread/902298)

# android - Android重新生成优化的dex文件

> ID：15925265
> 
> 赞同：2
> 
> 时间：2013-04-10T12:01:42.463
> 
> 标签：android, dex, dex-limit

我试图了解有关 dex 文件如何由 android 处理的一些事情。

我所知道的是 APK 提供了一个 dex 文件，系统获取它，在安装时对其进行优化，并将生成的 ODEX 文件（优化的 dex）存储在 /data/dalvik-cache/myOdexfile 中，然后从那里运行应用程序.

真的是这样吗？

当 dex 文件从 Internet 下载并打开新的 dex 文件时会发生什么？那也优化了吗？

另外 - 系统，afaik，保留原始 APK，对吗？我认为它保存在 /data/app/myAPK-1.apk 中。系统是否以任何方式使用它？什么时候？

您能否在安装后以某种方式手动强制从存储的 APK 文件中重新生成 odex 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:16:58.983

是的，Android 在安装时从 DEX 创建 ODEX。

是的，APK 已保存。DEX 和 ODEX 只包含代码。APK 是您所有资源和资产的来源——您的标签、图标、布局等。

据我了解，DEX 优化纯粹是一个安装时过程，不会在任何不属于已安装 APK 的 DEX 上执行。并且由于作为 APK 一部分的 DEX 在不安装新 APK 的情况下无法更改，因此无需在正常安装过程之外重新生成 ODEX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:13:27.690

动态加载 dex 文件时，dalvik 会在第一次加载时对其进行优化。您必须传递应用程序可以写入的目录，以便将缓存的 odex 放置在其中，通常在应用程序的数据目录中。

# c++ - 如何使用 SDL 在两个单独的声卡上播放声音？

> ID：15925267
> 
> 赞同：1
> 
> 时间：2013-04-10T12:01:45.010
> 
> 标签：c++, windows, audio, sdl, sdl-mixer

我的机器上有两张声卡，我正在开发一个通过 SDL_mixer 播放声音的应用程序。我希望在第一张牌上播放其中一些声音，而在其他牌上播放一些声音。如何在 Windows 中实现这一点？

它甚至不必是单个实例。我有两个在 Linux 中运行不同环境（AUDIODEV）的实例，它对我来说很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T07:47:04.683

此功能在当前（2013 年 6 月）候选版本 SDL 2.0的[路线图中。](http://wiki.libsdl.org/moin.fcg/Roadmap)

# android - if语句的条件是什么

> ID：15925270
> 
> 赞同：-2
> 
> 时间：2013-04-10T12:02:00.463
> 
> 标签：android

嗨，我有两个不同的活动向第三个活动发送一个数字，其中一个数字将显示并对其进行一些计算，具体取决于通过的数字

当我有活动 1 到活动 3 时它工作正常，但现在我有第二个活动去活动 3，我不知道该怎么做

我想要做的是，如果数字来自活动 1，我想显示该数字对其进行一些计算并显示答案，如果数字来自活动 2，则执行相同操作

对不起，如果标题没有意义，不知道我在说什么

`

```
`Intent sender = getIntent();
    `   
  if (sender != null)
    {
    int result = sender.getExtras().getInt("Result");
    answer.setText(result+"");

    a = Integer.parseInt (answer.getText().toString());
    total1 = (float) (a *0.0024); 
    sd.setText(String.format("%.1f" ,total1));

    b = Float.parseFloat (sd.getText().toString());
    total2 = (int)Math.ceil (b*8);
    cet.setText(Integer.toString(total2));

    }

    else
{
 int resultB = sender.getExtras().getInt("BResult");
     answer.setText(resultB+"");

     a = Integer.parseInt (answer.getText().toString());
     total1 = (float) (a *0.001); 
     sd.setText(String.format("%.1f" ,total1));

     b = Float.parseFloat (sd.getText().toString());
     total2 = (int)Math.ceil (b*8);
     cet.setText(Integer.toString(total2));

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:26:01.540

试试这个

来电表格`Activity - A`

```
Intent i = new Intent(A.this,C.class);
i.putExtra("CALLING_FROM_A", "AResult"); 
```

来电表格`Activity - B`

```
Intent i = new Intent(B.this,C.class);
i.putExtra("CALLING_FROM_B", "BResult"); 
```

现在`Read that Intent value`就像

```
if(getIntent().hasExtra("CALLING_FROM_A")) {
    // your code here
}

else if(getIntent().hasExtra("CALLING_FROM_B")) {
// your code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:17:39.757

试试这样：

```
if(getIntent().hasExtra("Result")) {
    // your code here
}

else if(getIntent().hasExtra("BResult")) {
// your code here
} 
```

# iphone - 像 0xD2691E 这样的十六进制值的数据类型是什么？

> ID：15925276
> 
> 赞同：10
> 
> 时间：2013-04-10T12:02:18.060
> 
> 标签：iphone, ios, objective-c, c

我正在尝试编写一个接收十六进制值的方法，例如`0xD2691E`为了返回 UIColor 对象。

我[找到了这个要转换为方法的宏](https://stackoverflow.com/questions/3805177/how-to-convert-hex-rgb-color-codes-to-uicolor)，但我不知道如何指定除`void *`.

```
#define UIColorFromRGB(rgbValue) [UIColor \
       colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 \
       green:((float)((rgbValue & 0xFF00) >> 8))/255.0 \
       blue:((float)(rgbValue & 0xFF))/255.0 alpha:1.0]

  //Then use any Hex value

 self.view.backgroundColor = UIColorFromRGB(0xD2691E); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T12:07:45.477

> 十六进制值的数据类型是`0xD2691E`什么？

根据 C 标准，十六进制常量的类型是该列表中可以表示其值的第一个：

> ### C11 (n1570), § 6.4.4.1 整数常数
> 
> ```
> int
> unsigned int
> long int
> unsigned long int
> long long int
> unsigned long long int 
> ```

由于`D2691E`(b16) 等于`13789470`(b10)，因此常量的类型取决于您的实现。

C 标准只保证这一点`INT_MAX >= +32767`，而`LONG_MAX >= +2147483647`.

> ### C11 (n1570), 5.2.4.2.1 整数类型的大小
> 
> *   `INT_MAX +32767`
> *   `LONG_MAX +2147483647`

因此，`(unsigned) long int`可能是一个合适的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:04:38.423

据我所知，它们类似于 int 或 unsigned int。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T12:05:33.080

请尝试使用这个......

```
 unsigned long long 
    unsigned long int 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:11:28.030

在这种方法中，它们执行按位`AND`运算，所以它必须是`unsigned of int OR long`

# jquery - 将 jQuery 验证错误消息传递到单个框 (div)

> ID：15925278
> 
> 赞同：1
> 
> 时间：2013-04-10T12:02:19.287
> 
> 标签：jquery, jquery-validate

我进行了很多搜索，但仍然没有弄清楚...如何将各种错误消息传递给单个框（div），而不是在相关字段附近突出显示它们。比方说，我有 4 个必填字段并为它们提供自定义消息：

```
<script>
// validation
(function($,W,D)
{
    var JQUERY4U = {};
    JQUERY4U.UTIL =
    {
        setupFormValidation: function()
        {
            //form validation rules
            $("#register-form").validate({
                validClass: "valid",
                errorContainer: $("#error-note"),
                errorLabelContainer: $([]),
                rules: {
                    name: "required",
                    email: {
                        required: true,
                        email: true
                    },
                    birthdate: "required",
                    eua: "required"
                },
                messages: {
                    name: "Name is required",
                    email: "Please, enter your email",
                    birthdate: "We need to know your date of birth",
                    eua: "Please check the checkbox..."
                },
                submitHandler: function(form) {
                    form.submit();
                }
            });
        }
    }
    //when the dom has loaded setup form validation rules
    $(D).ready(function($) {
        JQUERY4U.UTIL.setupFormValidation();
    });
})(jQuery, window, document);
</script> 
```

`#error-note`是我需要获取所有/任何错误消息输出（打印）的所有字段之前的 div。但是现在错误消息在相关字段中“内置”（我不需要）。有没有办法实现它？

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T15:55:02.900

为了 SO 读者的利益而发布的答案。

[根据文档中的示例代码，](http://docs.jquery.com/Plugins/Validation/validate#toptions)它真的很简单，

```
$(document).ready(function () {

    $('#myform').validate({ 
        // rules and other options,
        errorLabelContainer: "#error-note",
        wrapper: "li"
    });

}); 
```

`<div id="error-note"></div>`也必须放在 HTML 布局中。

**工作演示：http: [//jsfiddle.net/6kxSp/](http://jsfiddle.net/6kxSp/)**

* * *

**注意事项**：

1）OP只是把他的容器弄混了。 `errorContainer:`是第二个可选容器。 `errorLabelContainer`对于包含错误列表的单个框来说已经足够了。

* * *

2）这没有意义：`errorLabelContainer: $([])`。如果 OP 阅读了[docs 中的示例代码](http://docs.jquery.com/Plugins/Validation/validate#toptions)，他会看到他刚刚击败了他想要实现的目标。 `$([])`甚至不是一个有效的 jQuery 选择器。

* * *

3）这是不必要的和多余的。

```
submitHandler: function(form) {
   form.submit();
} 
```

[根据 docs](http://docs.jquery.com/Plugins/Validation/validate#toptions)，`submitHandler`回调函数在验证后自动提交表单。不用`submit()`在这里打电话。

* * *

4） [根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，这是默认设置，无需声明...

```
validClass: "valid" 
```

* * *

5) 像这样总结一切是多余的、不必要的、冗长的和神秘的......

```
(function($,W,D)
{
    var JQUERY4U = {};
    JQUERY4U.UTIL =
    {
        setupFormValidation: function()
        {
            $("#register-form").validate({ .... });
        }
    }

    $(D).ready(function($) {
        JQUERY4U.UTIL.setupFormValidation();
    });

})(jQuery, window, document); 
```

除了给寻求指导的人造成更多混乱之外，它没有任何用处。 *它来自[Sam Deering 的一个流行但解释不清的在线演示/教程](http://www.sitepoint.com/basic-jquery-form-validation-tutorial/)，该演示/教程链接到/来自许多地方。IMO，如果你想把自己伪装成 jQuery/JavaScript 专家，至少使用 JavaScript 中更常见的代码格式化风格，而不是 PHP (Allman) 使用的那种。无论选择哪种代码格式样式，至少要始终如一地使用它。*

**与任何其他 jQuery 插件完全一样**，只需将方法包装`.validate()`在 DOM 就绪事件处理程序中就足以正确初始化此插件。

```
$(document).ready(function() {

    $("#register-form").validate({
        // any rules, options and callbacks
    })

}); 
```

* * *

# css - 如何在悬停/焦点上“反弹”社交导航图标？

> ID：15925280
> 
> 赞同：0
> 
> 时间：2013-04-10T12:02:23.027
> 
> 标签：css

嗨友好的偷看堆栈，

任何人都知道以下 CSS 悬停效果是如何产生的：

[http://seanwes.com/](http://seanwes.com/)

还有一些关于堆栈溢出的其他教程，用于用替换图像（一般彩色）翻转样式替换社交导航图标 - 我只是希望它反弹并保持图像相同。认为这可能与：

```
-webkit-transition: all .2s linear;
-o-transition: all .2s linear;
-moz-transition: all .2s linear;
transition: all .2s linear; 
```

想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:22:11.553

你的问题的答案很简单

当您将鼠标悬停时，`<li>`它们会应用负边距。这是该栏的 html 代码

```
<ul id="social" class="msixcol mlast mright">
    <li id="twitter" class="fade"><a href="http://twitter.com/seanwes/" class="r">twitter</a></li>
    <li id="facebook" class="fade"><a href="http://www.facebook.com/seanwes" class="r">facebook</a></li>
    <li id="dribbble" class="fade"><a href="http://dribbble.com/seanwes" class="r">dribbble</a></li>
    <li id="instagram" class="fade"><a href="http://instagram.com/seanwes" class="r">instagram</a></li>
</ul> 
```

这是具有魔术作用的css行：

```
#social li:hover { margin-top: -3px; } 
```

过渡只是给出了平滑的效果：

```
a,.fade,input,textarea { -webkit-transition: all .2s linear; -o-transition: all .2s linear; -moz-transition: all .2s linear; transition: all .2s linear; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:09:37.043

嗨，这很简单，这里有一些基础代码：

CSS：

```
.image{
    width:200px;
    height:200px;
    background:red;
    margin:0 auto;
}

.transition{
    -webkit-transition: all .2s linear;
    -o-transition: all .2s linear;
    -moz-transition: all .2s linear;
    transition: all .2s linear;
}

.image:hover{
    box-shadow:0px 0px 15px 0px black;
} 
```

HTML：

```
<div class="image transition"></div> 
```

通过这种方式，您可以将转换作为一个类应用于您想要的任何元素，并记住转换应用于您在 :hover 中编写的每一件事。

[这是一个工作小提琴](http://jsfiddle.net/GQVyH/)

这是一些在列表中应用它的代码：

CSS：

```
ul{list-style:none; float:left;}
ul li{margin:15px;}
.image{
    width:200px;
    height:200px;
    background:red;
}

.transition{
    -webkit-transition: all .2s linear;
    -o-transition: all .2s linear;
    -moz-transition: all .2s linear;
    transition: all .2s linear;
}

.image:hover{
    box-shadow:0px 0px 15px 0px black;
} 
```

HTML：

```
<ul>
    <li class="image transition"></li>
    <li class="image transition"></li>
    <li class="image transition"></li>
</ul>
<ul>
    <li class="image transition"></li>
    <li class="image transition"></li>
    <li class="image transition"></li>
</ul> 
```

和[小提琴](http://jsfiddle.net/GQVyH/1/)一样

现在你只需要更换`background:red;`属性
`background-image:url(yourimagepath.ext);`，你应该准备好了。

# html - CSS 动画打字

> ID：15925283
> 
> 赞同：2
> 
> 时间：2013-04-10T12:02:35.733
> 
> 标签：html, css, animation

我正在尝试制作动画，就好像我在打字一样。为了实现这一点，我使用了 CSS 动画“步骤”。

动画本身工作得很好。但是，如果我想为多行文本设置动画，它们都会同时开始播放。这并没有给我想要的效果。*（尝试`<br>`在单个 中使用`<h1>`，它切断了文本，但又同时开始了动画。）*

为了解决这个问题，我将下一行文本放入 an 中`<h2>`，并为每一行文本设置一个动画延迟。哪个有效，但在动画开始之前文本是可见的。

我希望在动画开始播放之前隐藏文本，以真正获得“实时打字”效果。

有人对我如何实现这一目标有任何想法吗？

HTML

```
<div class="content"> 
    <h1>Hi there! My name is Jeff.</h1>
    <h2>And I create cool stuff.</h2>
</div> 
```

CSS

```
.content h1 {
    background:white;
    opacity:0.7;
    white-space:nowrap;
    overflow:hidden;
    border-right: 3px solid black;
    -webkit-animation: typing 2s steps(26, end), 
                        blink-caret 1s step-end 2s;
}
.content h2 {
    background:white;
    opacity:0.7;
    white-space:nowrap;
    overflow:hidden;
    border-right: 3px solid black;
    -webkit-animation: typing 2s steps(26, end), 
                        blink-caret 1s step-end infinite;
    -webkit-animation-delay:3s;
}

@-webkit-keyframes typing {
    from { width: 0; }
    to { width:400px; }
}

@-webkit-keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: black }
} 
```

[jsFiddle](http://jsfiddle.net/E3uD3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:28:24.853

最简单的解决方案是添加：

```
animation-fill-mode:both; 
```

到您的`h2`（带有必要的前缀）。这样，您不会在动画之外将其设置为零宽度，因此不支持此 CSS 的浏览器将显示标题（我猜这就是您所追求的）。看到[这个小提琴](http://jsfiddle.net/cherryflavourpez/qs7rL/)。

[动画填充](https://developer.mozilla.org/en-US/docs/CSS/animation-fill-mode)模式：

> 指定 CSS 动画在执行前后应如何将样式应用于其目标

在这种情况下将其设置为`both`意味着您`h2`将在它开始执行`0` *之前*有一个宽度，并且在它开始执行`400px`之后有一个宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:21:17.407

由于评论已经包含一个解决方案，也许这可能是另一种方法 - 通过使用超时并`visibility: hidden`在开始时设置（为了简化，我只是使用 jQuery 来设置可见性）。

包括以下 CSS 规则：

```
.content {
    visibility: hidden;
} 
```

作为 JavaScript，您将拥有：

```
window.setTimeout(function() {
    $('#contentdiv h1').css('visibility', 'visible');
}, 100);

window.setTimeout(function() {
    $('#contentdiv h2').css('visibility', 'visible');
}, 3100); 
```

见[jsFiddle](http://jsfiddle.net/E3uD3/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T12:50:19.357

```
p
{
  font:500 22px consolas;    
  width:20ch;
  white-space:nowrap;
  overflow:hidden;
  animation:type 5s steps(20) infinite;
}
@keyframes type
{
  0%{ width:0; } 
}
```

```
<p>Text Type Animation</p>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-18T10:56:49.080

不完全是OP的问题，但如果其他人觉得这很有用：

我希望能够对文本*段落*进行键入动画，单个`<p>`标签可能包含会换行的文本，并产生未知数量的实际行。对标签本身应用一个简单的线性动画是`p`行不通的，所以相反，我采用了几个“隐藏”元素的方法，这些元素将覆盖文本段落，每一行高，然后我会对每个元素进行动画处理，这样他们会收缩，从他们下面的文本行中露出字符。

HTML 如下所示：

```
<div class="container">
<!-- container div is required to set absolute positions within it, so that .typing and .hiders exactly overlap -->

  <p class="typing">
    This paragraph of text will be animated 
    with a "typewriter" style effect, and it 
    will continue to work even if it splits across 
    multiple lines.  Well, in this case, up to a 
    maximum of 5 lines, but you get the picture.
  </p>

  <div class="hiders">
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
  </div>

</div> 
```

您需要一个容器，并将`.typing`元素和`.hiders`using`absolute`放置在彼此之上：

```
.container {
  position: relative;
  font-family: Consolas, monospace;  
}
.typing {
  position: absolute;
  top: 0;
  margin: 0;
  z-index: -1;
}
.hiders {
  margin: 0;
  position: absolute;
  top: 0;
  width: 100%;
} 
```

并且动画被应用于每个`p`内部`.hiders`：

```
.hiders p {
  position: relative; 
  clear: both; 
  margin: 0;
  float: right; /* makes animation go left-to-right */
  width:0; /* graceful degradation: if animation doesn't work, these are invisible by default */
  background: white; /* same as page background */
  animation: typing 2s steps(30, end);
  animation-fill-mode: both;  /* load first keyframe on page load, leave on last frame at end */
}

.hiders p:nth-child(2) {
  animation-delay: 2s;
}
.hiders p:nth-child(3) {
  animation-delay: 4s;
  /* etc */ 
```

这是最后的小提琴：

[https://jsfiddle.net/hjwp/514cLzxn/](https://jsfiddle.net/hjwp/514cLzxn/)

灵感来源：[Lea Verou](http://lea.verou.me/2011/09/pure-css3-typing-animation-with-steps/)

# extjs - Sencha Touch 2 Load store crashs

> ID：15925285
> 
> 赞同：0
> 
> 时间：2013-04-10T12:02:37.587
> 
> 标签：extjs, sencha-touch-2

Hello i have the following problem:

1.  After i generate the AP and install it on my phone the requisition store.load breaks in this specific store called CHAMADOS, but when i close the app and restart, it does not crash and bring me all the informations in the list...

2.  It seems that the .load requires bring me the informations in the first time.

3.  When i close and open it again the cache informations required before is add to the list, but the load required on the restart APP does not work.

4.  It crashs and dont add the items to the LIST, but the store has data because on restart it appears, i have others store in this app and they work fine!

5.  On brownser its fine, the problem is in the APK

Here is the view

```
{
  height: '60%',
  ui:'round',
  style:'padding:18px 0; background:#FFF;',
  xtype: 'dataview',
  id: 'feedListagemChamados',
  store: 'Chamados',
  itemTpl: '<span>{nom_chamado}</span>  '
} 
```

Here is the store

```
Ext.define('WE3Chamados.store.Chamados', {
extend: 'Ext.data.Store',
config: {
    model: 'WE3Chamados.model.Chamado',
    autoLoad: true,
    proxy: {
        type: 'jsonp',
        url: 'http://LINK?cod_usuario='+localStorage.getItem("usuarioId"),
        callbackKey: 'callback',
        reader: {
            type: 'json',
            rootProperty : 'chamados',
            successProperty: 'success'
        }
    }
}}); 
```

Here is where i call the store to load (CONTROLLER)

```
showListaChamados: function (direcao) {
    this.cleanApp();
    store = Ext.getStore('Chamados').load();

    store.load({
        scope : this,
        callback : function(records, operation, success) {
            ***IT BREAKS HERE ON RETURN*** 
            Ext.Msg.alert('Opps', records[0].data.nom_usuario, this);
            Ext.Viewport.animateActiveItem(this.getChamadoView(), this.getSlideTransition(direcao));
        }
    });
    Ext.Msg.alert('Opps', store.data, this);

} 
```

Here is the model

```
Ext.define('WE3Chamados.model.Chamado', {
extend: 'Ext.data.Model',
config: {
    fields: [
         {
            name: 'cod_chamado'
         },
         {
            name: 'nom_chamado'
         },
         {
            name: 'des_chamado'
         },
         {
            name: 'cod_equipe'
         },
         {
            name: 'dat_cadastro'
         },
         {
            name: 'dat_previsao'
         },
         {
            name: 'dat_necessaria'
         },
         {
            name: 'num_prioridade'
         },
         {
            name: 'cod_projeto'
         },
         {
            name: 'nom_usuario'
         },
         {
            name: 'cod_status'
         },
         {
            name: 'nom_projeto'
         },
         {
            name: 'des_equipe'
         },
         {
            name: 'nom_status'
         },
         {
            name: 'nom_cliente'
         },
         {
            name: 'cod_usuario'
         },
         {
            name: 'cod_usuario_responsavel'
         }
    ]
}}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:11:25.803

I found the problem, it was in the localStorage.getItem("usuarioId") its not sendind it by the get, because it is after login, i think there is a bug in the js or its so fast that the comand to send the link cant get the localStorage.getItem.

Im trying using php SESSION now.

# iphone - EXC_ARM_DA_ALIGN 崩溃

> ID：15925287
> 
> 赞同：5
> 
> 时间：2013-04-10T12:02:41.673
> 
> 标签：iphone, objective-c, crash, memory-alignment

我的应用程序出现 EXC_ARM_DA_ALIGN 崩溃。这是 Xcode 标记为“恶性”的代码。在模拟器上我没有这个崩溃，只有在设备上，所以我认为这是一个内存对齐问题。有谁知道如何修复此代码？非常感谢。

```
-(int) Save:(void*) pBuf {

int nNeedSize = sizeof(fType) + sizeof(sizeBrush) + sizeof(nBrushType) + sizeof(rcImage) + sizeof(count) + sizeof(data[0]) * count;

if (pBuf == nil)
return nNeedSize;

*(NSInteger*)pBuf = count; pBuf += sizeof(count);
*(BOOL*)pBuf = fType; pBuf += sizeof(fType);
(*(CGSize*)pBuf).width = sizeBrush.width;
(*(CGSize*)pBuf).height = sizeBrush.height;
pBuf += sizeof(sizeBrush);
*(NSInteger*)pBuf = nBrushType; pBuf += sizeof(nBrushType);
(*(CGRect*)pBuf).size.width = rcImage.size.width; 
(*(CGRect*)pBuf).size.height = rcImage.size.height; 
(*(CGRect*)pBuf).origin.x = rcImage.origin.x; 
(*(CGRect*)pBuf).origin.y = rcImage.origin.y; 
pBuf += sizeof(rcImage);

for (int i = 0; i < count; i++)
{
    (*(CGPoint*)pBuf).x = data[i].x;
    (*(CGPoint*)pBuf).y = data[i].y;
    pBuf += sizeof(data[0]);
}

return nNeedSize;} 
```

这是另一个标记为恶性的部分：

```
int i;
int nTotalSize = 0;
for (i = 0; i < m_Data.count; i++)
{
    maskStroke* one = [m_Data objectAtIndex:i];
    nTotalSize += [one Save:NULL];
}

unsigned char* buf = (unsigned char*)malloc(nTotalSize+100);
unsigned char* cur_ptr = buf;
for (i = 0; i < m_Data.count; i++)
{
    maskStroke* one = [m_Data objectAtIndex:i];
    cur_ptr += [one Save:cur_ptr];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:54:06.617

您应该使用结构或其他合理的东西进行序列化......如果您不能这样做，至少要确保您的 32 位和 16 位指针与 16 位或 32 位内存地址对齐。

*(int *foo)0x800002（或 1）可能会以糟糕的方式结束。一些处理器具有拧开未对齐内存地址的功能，但这是浪费周期，而当您尝试执行此操作时，其他处理器（正确地）会崩溃。如果它没有崩溃，它会进行多次内存访问，然后将它们组合起来以创建未对齐的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-09T03:45:30.147

您必须确保您的 pBuf 指针与 sizeof(CGPoint) 对齐，**这意味着 pointers%sizeof(CGPoint) == 0**

# ffmpeg - 在 android(FFMPEG) 上构建编码器

> ID：15925289
> 
> 赞同：0
> 
> 时间：2013-04-10T12:02:43.220
> 
> 标签：ffmpeg, h.264

我需要在android上构建一个编码器。尝试将相机捕获的视频流编码为`h.264`.
我有`libffmpeg.so`文件，但我不知道如何使用它。

我是新来的。任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:16:07.073

要`FFMPEG`在 Android 上使用这些库，您必须集成与`OMX`组件相同的库。

`ffmpeg`编译和生成可以`OMX`参考这个链接：[FFmpeg on Android](https://stackoverflow.com/questions/4725773/ffmpeg-on-android)

准备好组件后，您必须`OMX`将其集成到 Android 中，方法是将其包含在`media_codecs.xml`. 如果您希望始终调用您的特定编码器，请确保您的编解码器是列表中注册的第一个编解码器。

对于编码器，您需要考虑几个要点。

**一，**如果您希望优化您的系统，那么您可能希望避免将帧从源（相机、表面或其他源）复制到`OMX`编码器组件的输入端口。因此，您的编解码器必须支持通过元数据传递缓冲区（参考：[http](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libmediaplayerservice/StagefrightRecorder.cpp#1413) ://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libmediaplayerservice/StagefrightRecorder.cpp#1413 ）。如果您需要有关此主题的更多信息，请提出单独的问题。

**二，**编码器必须支持标准`OMX`索引和一些新的索引。例如 for `Miracast`，引入了一个新的索引`prependSPSPPStoIDRFrames`，通过 支持`getExtensionIndex`。作为参考，您可以参考[http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/ACodec.cpp#891](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/ACodec.cpp#891)。

除了上述索引之外，编码器还将获得一个`enableGraphicBuffers`带有`FALSE`布尔值的新请求。这两个索引**最重要**的一点是确保`OMX`调用这两个索引时组件不会失败。

通过这些修改，您应该能够将编码器集成到`Stagefright`框架中。

# raphael - g.Raphael 隐藏 y 轴标签

> ID：15925290
> 
> 赞同：0
> 
> 时间：2013-04-10T12:02:45.083
> 
> 标签：raphael, linechart, graphael

我用 g.Raphael.js 添加了一个折线图，如下所示：

```
var tl = paper.linechart(x, y, w, h, [[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]], [trendline], { axis: "0 0 0 1", colors:['#fff'] }); 
```

有时，“趋势线”将是一个空数组，这会导致 Y 轴标签为“NaN”和“Infinity”。在这些情况下如何隐藏这些标签？我试过玩axisystep，但这并没有什么不同。也许折线图可以像点图一样使用“axisylabels”设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T15:00:17.060

我认为您可以在这种情况下执行以下操作来隐藏标签：

```
var chart = paper.linechart(x, y, w, h,
    [[1,2,3,4,5,6,7,8,9,10]], [trendline],
    { axis: "0 0 0 1", colors:['#fff'] });

// hide labels if there is no data
if (trendline.length == 0) {
    var y_labels = chart.axis[0].text.items;
    for (var i in y_labels) {
        y_labels[i].attr({'text': ""});
    };
} 
```

# python - 需要基本的 Python 编程帮助：数组和随机位置

> ID：15925291
> 
> 赞同：2
> 
> 时间：2013-04-10T12:02:51.080
> 
> 标签：python, python-2.7, numpy

考虑一个 100X100 阵列。

i) 在这样的数组中生成一个包含数千个随机位置的数组，例如 (3,75) 和 (56, 34)。

ii) 计算您的一个随机位置在任何（直）边缘的 15 像素范围内的频率。

我正在尝试做上述问题以帮助我学习编程语言 Python，我是编程新手。

这是我到目前为止所得到的：

```
from __future__ import division
from pylab import *
import math as m
from numpy import *
from random import randrange

N = 3000
coords_array = array([randrange(100) for _ in range(2 * N)]).reshape(N, 2) 
```

这将创建 N 个随机位置的数组，并且不，我正在尝试创建一个循环，如果 x>85 或 y>85 或 x<15 或 y<15，则将 1 附加到空列表，然后将零附加到如果 x 或 y 是其他任何东西，则相同的空列表。然后我会找到列表的总和，这将是我对有多少随机位置落在边缘内的计数。

这是我想做的事情：

```
coordinate=coords_array[x,y]
b=[]
def location(x,y):
    if x>85 or y>85:
        b.appnend(1)
    if x<15 or y<15:
        b.append(1)
    else:
        b.append(0)

print b
print x 
```

但我无法将数组分配为 x 和 y 变量。我希望能够将随机坐标集的每一行分配为 x,y 对，以便我可以在循环中使用它。

但我不知道该怎么做！

请问有人可以告诉我怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:28:36.820

好的，这个问题的答案：

> 但我无法将数组分配为 x 和 y 变量。我希望能够将随机坐标集的每一行分配为 x,y 对，以便我可以在循环中使用它

会是这样的：

```
for pair in coords_array:
    # Do something with the pair 
```

NumPy 数组通过`for`迭代其主轴表现为常规 Python 序列，这意味着`pair`将包含（在您的情况下）两个元素的数组：x 和 y。你也可以这样做：

```
for x, y in coords_array:
    # Do something with the pair 
```

注意：我想你想写这样的函数：

```
def location(x,y):
    if x>85 or y>85:
        b.append(1)
    elif x<15 or y<15:
        b.append(1)
    else:
        b.append(0) 
```

或者

```
def location(x,y):
    if x>85 or y>85 or x<15 or y<15:
        b.append(1)
    else:
        b.append(0) 
```

甚至

```
def location(x,y):
    if not (15 <= x <= 85) or not (15 <= y <= 85):
        b.append(1)
    else:
        b.append(0) 
```

否则，正如@TokenMacGuy 指出的那样，在某些情况下您将插入两个值。

注意：根据您的问题，我了解到您想专门编写此代码来学习 Python，但是您可以通过仅使用 NumPy 功能以更直接（和有效）的方式做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:16:41.080

您可以让 numpy 为您执行循环：

```
n = 3000
coords = np.random.randint(100, size=(n, 2))
x, y = coords.T
is_close_to_edge = (x < 15) | (x >= 85) | (y < 15) | (y >= 85)
count_close_to_edge = np.sum(is_close_to_edge) 
```

请注意，100 个元素数组的第一个索引是 0，最后一个索引是 99，因此边缘 15 个位置内的项目是 0...14 和 85...99，因此`>=`在比较中。在上面的代码中，`is_close_to_edge`是您的列表，带有布尔值。

# django - 是否可以将请求数据访问到 django 通用列表视图中？

> ID：15925296
> 
> 赞同：0
> 
> 时间：2013-04-10T12:03:02.597
> 
> 标签：django, list, generics, view, request

我需要访问通用列表视图中使用的模板中的一些请求数据（用户名）。我搜索了 django[文档](https://docs.djangoproject.com/en/1.3/ref/class-based-views/)，但乍一看（对我来说）这个主题并不那么清楚。

我的情况是这样的：

```
**urls.py:**

from django.conf.urls.defaults import patterns
from django.views.generic.base import TemplateView

...

urlpatterns = patterns('',
    ...
    (r'^pattern.html', TemplateView.as_view(template_name="template_name.html")),
    ...
)

** template_name.html **

{% extends "base.html" %}
{% block title %}My title{% endblock %}
{% block content %}
    <h2>My heading</h2>
<a href="{% url path.to.my.view.view_name_1 %}">link text 1</a> | 
<a href="{% url path.to.my.view.view_name_2 %}">link text 2</a> | 
<a href="{% url path.to.my.view.view_name_3 request.username  %}">link for {{username}}</a> | 
{% endblock %} 
```

这里 (template_name.html) 是我要使用请求数据的地方。编写指向另一个视图的链接，作为参数 request.user

[这篇](https://stackoverflow.com/questions/1539697/can-i-filter-on-request-user-when-using-django-generic-views)文章说的是关于泛型的电话，但它并不完全是我所需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:08:52.107

`{{ user.username }}``auth`由于上下文处理器，它始终在通用视图中可用。如果您需要请求中的任何其他内容，则需要添加[`request`](https://docs.djangoproject.com/en/1.5/ref/templates/api/#django-core-context-processors-request)上下文处理器。

# android - Android 解析 JSON：http 连接中的错误 java.lang.IllegalArgumentException

> ID：15925299
> 
> 赞同：-2
> 
> 时间：2013-04-10T12:03:06.687
> 
> 标签：android, json

大家好，我在解析这个 JSON 文件时遇到问题[http://ammantimes.net/android/ammantimes.php?at_mod=news](http://ammantimes.net/android/ammantimes.php?at_mod=news) 请帮我解决问题：

这是我用来解析它的代码：

```
public String getJSONTextFromUrl(String url) {
        // initialize
        InputStream is = null;
        String result = "";

        // http post
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = URLDecoder.decode(sb.toString(), "UTF-8");
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        System.out.println("JSON: = " + result);
        System.out.println("JSON SIZE: = " + result.length());

        // return result.replace(result.charAt(0), ' ');
        return result;
    }

public JSONObject getJSONFromScript(String jsonText) {

        JSONObject jObject = null;
        String result = getJSONTextFromUrl(jsonText);

        // try parse the string to a JSON object
        try {
            jObject = new JSONObject(result);
        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
            e.printStackTrace();
        }

        return jObject;

    } 
```

这是我得到的 logcat 输出和错误：

```
04-10 14:48:25.070: I/System.out(28470): JSON: = {"news":[{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"}]}
04-10 14:48:25.070: I/System.out(28470): JSON SIZE: = 755

04-10 14:48:25.070: I/APACHE HTTP (thCr=11) - NafHttpAuthStrategyDefault(28470): (thUse=11) NafHttpAuthStrategyDefault()
04-10 14:48:25.070: E/log_tag(28470): Error in http connection java.lang.IllegalArgumentException: Illegal character in scheme at index 0: {"news":[{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"}]}
04-10 14:48:25.070: E/log_tag(28470): Error converting result java.lang.NullPointerException

04-10 14:48:25.070: I/System.out(28470): JSON Text: = 
04-10 14:48:25.070: I/System.out(28470): JSON Text SIZE: = 0

04-10 14:48:25.070: E/log_tag(28470): Error parsing data org.json.JSONException: End of input at character 0 of 
04-10 14:48:25.070: W/dalvikvm(28470): threadid=9: thread exiting with uncaught exception (group=0x4001e578)
04-10 14:48:25.070: E/AndroidRuntime(28470): FATAL EXCEPTION: Thread-11
04-10 14:48:25.070: E/AndroidRuntime(28470): java.lang.NullPointerException
04-10 14:48:25.070: E/AndroidRuntime(28470):    at com.jordaneaucation.json.JSONParser.getNewsMap(JSONParser.java:59)
04-10 14:48:25.070: E/AndroidRuntime(28470):    at com.jordaneaucation.ui.NewsTab$1.run(NewsTab.java:72)
04-10 14:48:25.070: E/AndroidRuntime(28470):    at java.lang.Thread.run(Thread.java:1019)
04-10 14:48:31.570: E/WindowManager(28470): Activity com.jordaneaucation.ui.NewsTab has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40530778 that was originally added here
04-10 14:48:31.570: E/WindowManager(28470): android.view.WindowLeaked: Activity com.jordaneaucation.ui.NewsTab has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40530778 that was originally added here
04-10 14:48:31.570: E/WindowManager(28470):     at android.view.ViewRoot.<init>(ViewRoot.java:273)
04-10 14:48:31.570: E/WindowManager(28470):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:174)
04-10 14:48:31.570: E/WindowManager(28470):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:117)
04-10 14:48:31.570: E/WindowManager(28470):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
04-10 14:48:31.570: E/WindowManager(28470):     at android.app.Dialog.show(Dialog.java:241)
04-10 14:48:31.570: E/WindowManager(28470):     at com.jordaneaucation.ui.NewsTab.onCreate(NewsTab.java:44)
04-10 14:48:31.570: E/WindowManager(28470):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
04-10 14:48:31.570: E/WindowManager(28470):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-10 14:48:31.570: E/WindowManager(28470):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-10 14:48:31.570: E/WindowManager(28470):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-10 14:48:31.570: E/WindowManager(28470):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-10 14:48:31.570: E/WindowManager(28470):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 14:48:31.570: E/WindowManager(28470):     at android.os.Looper.loop(Looper.java:130)
04-10 14:48:31.570: E/WindowManager(28470):     at android.app.ActivityThread.main(ActivityThread.java:3691)
04-10 14:48:31.570: E/WindowManager(28470):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 14:48:31.570: E/WindowManager(28470):     at java.lang.reflect.Method.invoke(Method.java:507)
04-10 14:48:31.570: E/WindowManager(28470):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
04-10 14:48:31.570: E/WindowManager(28470):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
04-10 14:48:31.570: E/WindowManager(28470):     at dalvik.system.NativeStart.main(Native Method) 
```

这是 printStackTrace()

```
04-10 15:09:58.189: W/System.err(28947): org.json.JSONException: End of input at character 0 of 
04-10 15:09:58.189: W/System.err(28947):    at org.json.JSONTokener.syntaxError(JSONTokener.java:446)
04-10 15:09:58.189: W/System.err(28947):    at org.json.JSONTokener.nextValue(JSONTokener.java:93)
04-10 15:09:58.189: W/System.err(28947):    at org.json.JSONObject.<init>(JSONObject.java:154)
04-10 15:09:58.189: W/System.err(28947):    at org.json.JSONObject.<init>(JSONObject.java:171)
04-10 15:09:58.189: W/System.err(28947):    at com.jordaneaucation.json.JSONParser.getJSONFromScript(JSONParser.java:131)
04-10 15:09:58.189: W/System.err(28947):    at com.jordaneaucation.json.JSONParser.getNewsMap(JSONParser.java:54)
04-10 15:09:58.189: W/System.err(28947):    at com.jordaneaucation.ui.NewsTab$1.run(NewsTab.java:72)
04-10 15:09:58.189: W/System.err(28947):    at java.lang.Thread.run(Thread.java:1019)
04-10 15:09:58.189: W/dalvikvm(28947): threadid=9: thread exiting with uncaught exception (group=0x4001e578) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:14:24.100

我通常使用 GSON 来解析 JSON 数据..

您可以 [在 java 中引用 gson 中的解析数组](https://stackoverflow.com/questions/15301882/parsing-array-in-gson-in-java)

您可以从 [https://code.google.com/p/google-gson/获得 GSON 库](https://code.google.com/p/google-gson/)

在您的项目中添加这些 google jar 文件

要解析 JSON，请使用如下代码：

```
connection = (HttpURLConnection) url.openConnection();
connection.connect();
reader = new InputStreamReader(connection.getInputStream(), charset);

WebsiteResults results = new Gson().fromJson(reader, WebsiteResults.class); 
```

WebsiteResults 是您将创建的用于解析 JSON 的类，如链接中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:57:03.160

阅读您的日志。

这是你的错误：

`04-10 14:48:25.070: E/log_tag(28470): Error in http connection java.lang.IllegalArgumentException: Illegal character in scheme at index 0: {"news":[{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"},{"NewsID":"aa","StatusID":"aa","NewsSubject":"aa","NewsTitle":"aa","NewsPhoto":"aa","IsDeleted":"aa","SubmitDateTime":"aa"}]}`

您弄错了 url 和 post 参数。在 new HttpPost(url) 中，你的 url 实际上就是这个长的 json 字符串。（`jsonText`来自调用方法）。

您的其余错误来自您没有对第一个错误采取行动的事实。您的请求未执行，`is`保持为空，因此之后的 NPE，结果保持为空，您的 JSONObject 对空参数不满意，结果保持为空，因此是最终的 NPE。

这是“我不关心异常”的典型案例，导致错误传播远离其起源。不要忽视异常。如果连接失败（！），请不要继续处理来自 Http 连接的结果

# mediawiki - 在类别 wiki 页面的一列中显示数据

> ID：15925301
> 
> 赞同：2
> 
> 时间：2013-04-10T12:03:10.887
> 
> 标签：mediawiki, wiki

是否可以在 wiki 上格式化类别页面（我正在研究 MediaWiki，但我想它对所有人都是一样的）所以它在一列而不是[默认的 3 列](http://en.wikipedia.org/wiki/Category%3aPresidents_of_the_United_States)中显示所有类别？

如果没有，有没有办法创建另一种页面，像类别页面一样动态更新其内容？我在维基百科上找不到示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:22:33.033

[Extension:Semantic Mediawiki](http://www.mediawiki.org/wiki/Semantic_Mediawiki)和[Extension:Dynamic Page List](http://www.mediawiki.org/wiki/Extension%3aDynamicPageList_%28third-party%29)都是非常强大的工具，允许创建具有动态列表和表格等的页面。

# android - How to save default action chosen by user in chooserActivity

> ID：15925306
> 
> 赞同：0
> 
> 时间：2013-04-10T12:03:43.010
> 
> 标签：android

I want to save default action chosen by user on clicking checkbox after launching available applications using ResolverActivity.java. I have gone through ResolverActivity.java, below chunk of code does get execute but still the default action is not saved. And next time i need to choose action/application all over again.

Code :

```
getPackageManager().addPreferredActivity(filter, bestMatch, set,
                     intent.getComponent()); 
```

Can anybody tell me whats the reason behind this code not working.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:07:11.507

Third party apps cannot control the default apps for any action due to security reasons. Only the system may alter these settings.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:10:12.087

Android security policy will prohibit you from changing preferred activities, except that if your activity has been set as default you may unset that default.

If you just need a default for your own app, you'll have to write all the code to handle this yourself. Create your own dialog with a list of options to choose from, your own checkbox to remember the setting, your own code to save & load that default, etc.

# silverlight - 数据透视查看器模板刷新

> ID：15925308
> 
> 赞同：0
> 
> 时间：2013-04-10T12:03:50.313
> 
> 标签：silverlight, data-binding, pivotviewer

我有一个 Silverlight 5 应用程序，其中有一个 PivotViewer。这与数据源正确绑定，但我需要强制重新绑定模板而不替换数据源并重新设置整个控件。结果……很有趣。

我们使用 ValueConverter 来确定平铺应该是什么颜色，并且可以根据外部选择来调整此值转换器。此时，所有记录的 INotifyPropertyChange 都被触发并发生重新绑定，但仅在当前可见的模板上。这会导致图块在放大和缩小时改变颜色，因为其他视图尚未刷新。

谁能告诉我是否有可能以影响所有缩放级别的方式实现这一点？是否可以在不触发 INotifyPropertyChange 的情况下触发重新绑定？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:12:04.853

经过大量调查，我在 microsoft bug tracker 中遇到了这个问题：

[http://connect.microsoft.com/VisualStudio/feedback/details/768779/silverlight-forum-issue-with-sharing-items-background-color-for-sl5-pivotviewer](http://connect.microsoft.com/VisualStudio/feedback/details/768779/silverlight-forum-issue-with-changing-items-background-color-for-sl5-pivotviewer)

说明：

创建一个实现 INotifyPropertyChanged 的​​简单数据类，每 5 秒更改一次所有项目的颜色，但有些项目具有不同的背景颜色和不同的缩放级别。Silverlight 论坛报告了此问题：[http ://forums.silverlight.net/p/262082/654612.aspx/1?Re+PivotViewer+SL5+Dynamic+Collection+to+change+item+background+color](http://forums.silverlight.net/p/262082/654612.aspx/1?Re+PivotViewer+SL5+Dynamic+Collection+to+change+item+background+color)

所以我想这解释了问题所在。现在只等修复。

# sql - SQL：统计每个项目中属于一个用户的所有任务

> ID：15925312
> 
> 赞同：0
> 
> 时间：2013-04-10T12:04:18.090
> 
> 标签：sql

我需要获取系统上每个项目中属于用户的任务数。这些表是：

项目：ID、名称

任务：ID、ProjectID、Assignee（用户）

现在我正在做这个查询：

```
SELECT Projects.ID, Projects.Name, COUNT(*) 
FROM Tasks JOIN Projects ON Tasks.ProjectID = Projects.ID 
WHERE Assignee=1 GROUP BY Projects.ID; 
```

仅部分有效。IT 返回任务的数量，但仅针对已分配给用户的任务的项目。我希望查询返回系统中的所有项目，即使没有分配任务。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:06:18.300

改为使用`LEFT JOIN`。

`LEFT JOIN`操作不同于`INNER JOIN`. 它的作用是返回*左侧表中的所有记录，即右侧表**中*是否有`Projects`匹配项。*`Tasks`*

 *```
SELECT  Projects.ID, Projects.Name, COUNT(Tasks.ProjectID) 
FROM    Projects  
        LEFT JOIN Tasks 
            ON Tasks.ProjectID = Projects.ID AND
                Assignee=1
GROUP   BY Projects.ID; 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:06:02.893

如果您需要所有需要的项目，`RIGHT OUTER JOIN`而不是`JOIN`：

```
SELECT Projects.ID, Projects.Name, COUNT(Projects.ID) 
FROM Tasks RIGHT OUTER JOIN Projects 
ON Tasks.ProjectID = Projects.ID 
AND Assignee=1 GROUP BY Projects.ID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:09:50.370

试试这个

```
SELECT Projects.ID, Projects.Name, COUNT(*) 
FROM Projects JOIN Tasks ON Tasks.ProjectID = Projects.ID 
WHERE Assignee=1 GROUP BY Projects.ID; 
```*

# grep - Grep 喜欢来自 ElasticSearch 的附近线路

> ID：15925314
> 
> 赞同：1
> 
> 时间：2013-04-10T12:04:24.590
> 
> 标签：grep, elasticsearch, logstash

我正在调试的应用程序创建日志文件，其中许多 API 调用记录为两个事件：

```
timestamp1 request_ip-->{$URL}
timestamp2 response_ip<--{$DATA} 
```

我最近开始使用 LogStash（将 Kibana 作为 Web Front）将日志倒入 ElasticSearch。

有没有办法进行包括附近线路的搜索？假设请求和响应总是连续的，如果这有帮助的话。

使用 grep 我会这样做：

```
grep -A 1 "-->{$URL}" 
```

如何对现有的 LogStash+ElasticSearch 部署执行相同的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:06:39.503

我认为这是[LogStash 中的多行过滤器的情况](http://logstash.net/docs/1.1.0/filters/multiline)。虽然我不确定确切的细节，所以我不会为您构建 RegEx，但您的模式将围绕 request_ip 而连接多行的“what”将围绕 response_ip 进行正则表达式。我不确定我所说的是否足够清楚，但文档链接应该为您提供线索。希望这可以帮助。

# sybase - sybase 查询中有什么不正确的地方

> ID：15925317
> 
> 赞同：0
> 
> 时间：2013-04-10T12:04:32.197
> 
> 标签：sybase

我必须添加一个`field1`in`table1`作为新列，而这`field1`已经是`table2`. 我写了下面的查询：

```
alter table1 a
add field1 smallint,
default 5 not null 
```

上面的查询有什么问题？它在sybase数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:15:41.507

你的语法有点错误。它应该是：

```
alter table table1
add field1 smallint
default 5 not null 
```

在此处查看文档：http: //infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sqlug/html/sqlug/ [sqlug354.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sqlug/html/sqlug/sqlug354.htm)

# php - 使用 php 从备用选择标签中获取数据

> ID：15925318
> 
> 赞同：0
> 
> 时间：2013-04-10T12:04:34.787
> 
> 标签：php, html

假设我在表单中有 3 个选择标签和一个输入标签。我希望用户在任何给定时间选择第一个选择选项和其他一个。

```
<select name= "scholl">
    <option class="red" value="1"> 2013</option>
    <option class="blue" value="2">2014</option>
    <option class="green" value="3">2015</option>
</select>
<select name="depart">
   <option>Select Depart</option>
   <option class="red" value="one"> Aline</option>
   <option class="blue" value="two"> Bline</option>
   <option class="green" value="three"> Fline</option>
    </select>
 <h2>Or</h2>
<select name="coins">
 <option>Select Course code</option>
 <option class="red" value="1"> A</option>
 <option class="blue" value="2"> B</option>
 <option class="green" value="3"> C</option>
</select>

<h2>Or</h2>
<label>ID
 <span class="small">Enter Id</span>
</label>
<input type="text" name="id" id="id" /> 
```

例子：

> 选项“2013”​​和选项“Aline”或选项“2013”​​和选项“A”或选项“2013”​​和“ID”

我怎么能用 PHP 写这个？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:11:04.503

你不能在 PHP 中做到这一点，这必须在 Javascript 中在客户端完成。现在，它可以用纯 Javascript 完成，但是，我建议使用[jQuery](http://jquery.com)之类的东西，它会让你更容易使用纯 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:08:03.877

由于这是客户端的事情，你必须通过 JavaScript 来完成。

您可以将 javascript 代码附加到`onselect`您选择的属性中，您可以在其中检查是否满足所需条件！

# android - 如何禁用android地图标记点击自动中心

> ID：15925319
> 
> 赞同：36
> 
> 时间：2013-04-10T12:04:35.887
> 
> 标签：android, android-fragments, google-maps-api-2

我正在寻找一种方法来禁用我的地图片段在选定标记功能上的自动居中。我仍然希望标记 InfoWindow 显示出来，但只是不将整个地图集中在我选择的标记上。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-10T12:08:44.403

看看下面的帖子：

[在android map v2中单击后不要捕捉到标记](https://stackoverflow.com/questions/14497734/dont-snap-to-marker-after-click-in-android-map-v2)

**@DMan**提供了一个方法，基本上你需要使用`OnMarkerClick`事件并覆盖默认行为：

```
// Since we are consuming the event this is necessary to
// manage closing openned markers before openning new ones
Marker lastOpenned = null;

mMap.setOnMarkerClickListener(new OnMarkerClickListener() {
public boolean onMarkerClick(Marker marker) {
    // Check if there is an open info window
    if (lastOpenned != null) {
        // Close the info window
        lastOpenned.hideInfoWindow();

        // Is the marker the same marker that was already open
        if (lastOpenned.equals(marker)) {
            // Nullify the lastOpenned object
            lastOpenned = null;
            // Return so that the info window isn't openned again
            return true;
        } 
    }

    // Open the info window for the marker
    marker.showInfoWindow();
    // Re-assign the last openned such that we can close it later
    lastOpenned = marker;

    // Event was handled by our code do not launch default behaviour.
    return true;
}
}); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-05-29T18:48:46.807

简单的方法：

1.  实现 setOnMarkerClickListener()
2.  返回 '​​TRUE' 以防止 GoogleMap 默认将地图中心移动到标记处。

例子：

```
map.setOnMarkerClickListener(
    new OnMarkerClickListener() {
        boolean doNotMoveCameraToCenterMarker = true;
        public boolean onMarkerClick(Marker marker) {
            //Do whatever you need to do here ....
            return doNotMoveCameraToCenterMarker;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-06-30T08:53:34.590

非常简单：

使用下面的代码来实现 setOnMarkerClickListener()。

```
@Override
public boolean onMarkerClick(Marker marker) {

    marker.showInfoWindow(); // show info window

    return true; // can't move map by this
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-28T07:03:44.093

简单的。添加`moveOnMarkerPress`道具`MapView`并将其设置为false。

```
 <MapView
      moveOnMarkerPress={false}
> 
```

# data-binding - WPF 列表框绑定到列表视图

> ID：15925322
> 
> 赞同：0
> 
> 时间：2013-04-10T12:04:39.260
> 
> 标签：data-binding

我有以下课程：

```
public class BusinessFunction
{
    private string str_Id;
    public string id
    {
        get { return str_Id; }
        set { str_Id = value; }
    }

    private List<Function> str_FunctionList;

    public BusinessFunction() { }

    public List<Function> functionList
    {
        get { return str_FunctionList; }
        set { str_FunctionList = value; }
    }

}

public class Function
{
    private string str_FunctionType;
    public string functionType
    {
        get { return str_FunctionType; }
        set { str_FunctionType = value; }
    }

    private string str_FunctionName;
    public string functionName
    {
        get { return str_FunctionName; }
        set { str_FunctionName = value; }
    }

    private string str_Value;
    public string value
    {
        get { return str_Value; }
        set { str_Value = value; }
    }
} 
```

我必须将上述数据绑定到 Listbox 和 Listview 中。“id”应显示在列表框中，“functionList”应显示在列表视图中。当用户更改列表框中的选择时，它应该将关联的“functionList”带入列表视图。

如何实现这个场景？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T15:16:19.613

Listview Itemsource={Binding functionList} 成功了。

# c++ - 对部分已排序的 std::vector 进行排序（由已排序向量的串联形成）

> ID：15925326
> 
> 赞同：3
> 
> 时间：2013-04-10T12:04:54.840
> 
> 标签：c++, algorithm, sorting, vector, std

我有一个 std::vector 作为我要公开的 API 的输入之一。我知道这个 API 的用户可以发送一个巨大的向量，但是这个向量是由排序向量的串联形成的。这意味着我得到的向量是由许多排序的向量组成的。

我需要对这个向量进行排序。我想知道哪种排序算法最适合。我更喜欢像合并或快速这样的就地排序算法，因为我不想占用更多内存（向量已经很大了）。

将API接口更改为接受N个排序向量然后自己进行N路合并会更好吗？除非节省的资金真的很大，否则我不想这样做。另外，在进行 N 路合并时，如果可能的话，我想就地进行。

所以理想情况下，我更喜欢在大向量上使用一些现成的排序算法的方法（因为我觉得这会更简单）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:08:26.780

看看[std::inplace_merge](http://www.cplusplus.com/reference/algorithm/inplace_merge/)。您可以使用合并排序思想并合并每一对，然后合并下一对，然后下一个……以此类推，直到只剩下一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:18:13.177

您可以搜索向量以查找较小向量的连接点。然后通过使用这些迭代器，您可以一个一个地进行合并。

要查找连接点，您可以查找从一开始就违反排序标准的第一个元素。然后从那个位置到下一个位置，依此类推..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:16:48.197

[Timsort](http://en.wikipedia.org/wiki/Timsort)看起来正是您所需要的——它是一种自适应排序，可以在数据中查找预排序的运行，并在运行时将它们合并。它具有最坏情况下的 O(nlog n) 性能，我希望它会比运行（预排序的子数组）很长的情况好得多。

# html - 在 Firebug 中调试 css

> ID：15925331
> 
> 赞同：0
> 
> 时间：2013-04-10T12:05:23.653
> 
> 标签：html, css, firebug

在使用 Firebug 1.11.2 时，我无法确定哪个 css 实际应用于元素。我从我自己的 css 文件 ( `d.css`) 中设置段落字体，这意味着覆盖 3 个系统 css 文件 ( `a.css`, `b.css`, `c.css`)。

1.  我单击 html 选项卡，然后单击`<p>`要调试的元素。
2.  右侧的样式窗口现在显示来自`a.css`、`b.css`和的应用样式`c.css`，但不显示`d.css`。没有显示段落字体，但我可以更改段落`line-height`，例如从`a.css`.
3.  如果我单击`css`选项卡并找到，我可以手动更改字体和字体大小，并在主窗口中`d.css`查看应用于元素的更改。`<p>`但是，右侧的样式窗口仍然没有显示字体。

显示所有应用的样式有什么魔力吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:42:11.910

有点愚蠢，但可能值得回答而不是撤回问题......

事实证明，在选择 html 元素时，您必须比我想象的更加小心。我的文字实际上是一个跨度：

```
<p>
<span class="foo">bar</span>
</p> 
```

问题只是选择`<p>`元素或`bar`文本不会显示应用的样式- 您实际上必须通过单击单词`bar`来选择整个元素。`span``span`

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:23:08.240

尝试使用另一个插件来查看您的 CSS 代码，例如：

[https://addons.mozilla.org/en-US/firefox/addon/web-developer](https://addons.mozilla.org/en-US/firefox/addon/web-developer)

您可以尝试其他插件。

# javascript - JQuery - 自动更改图像的功能

> ID：15925336
> 
> 赞同：0
> 
> 时间：2013-04-10T12:05:33.327
> 
> 标签：javascript, jquery, html, css

我需要，背景上的一些图像（例如随机 5 - 8 个）会自动更改为另一张图像（例如 10 秒后，类似于[示例链接](http://jsfiddle.net/Xm2Be/2/)但自动，而不是悬停）。

```
 $('.fader').hover(function() {
    $(this).find("img").fadeToggle();
  }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:44:21.703

我做了一个[**JSFiddle DEMO**](http://jsfiddle.net/fernandosavio/Xm2Be/394/) .. 也许它可以帮助你。

这很简单，这就是我执行的功能`setInterval`

```
var $imgs = $(".fader").find("img"),
    i = 0;

function changeImage(){
    var next = (++i % $imgs.length);
    $($imgs.get(next - 1)).fadeOut(500);
    $($imgs.get(next)).fadeIn(500);
}
var interval = setInterval(changeImage, 2000); 
```

希望有帮助..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:16:21.813

您可以使用`setInterval`它经常运行一个功能，然后在其中有您的图像更改功能

```
//global variable
var bgImg = 1;

//runs every second
window.setInterval(function(){
    yourFunction();
}, 10000);

//changes background image
function   yourFunction () {
  ++bgImg;

  if(bgImg === 4){
    bgImg = 1;
  }

  if(bgImg === 1){
    $('#element').css("background-image","URL('imgs/image1.jpg')");
  }

  if(bgImg === 2){
    $('#element').css("background-image","URL('imgs/image3.jpg')");
  }

  if(bgImg === 3){
    $('#element').css("background-image","URL('imgs/image3.jpg')");
  }        
} 
```

您总是可以添加更多的 jquery 来淡出图像或比普通开关更平滑的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:16:47.127

这是你想要的吗？使用 BX 滑块。

[http://jsfiddle.net/writetobhuwan/Xm2Be/393/](http://jsfiddle.net/writetobhuwan/Xm2Be/393/)

JS就是这么简单..

```
$(document).ready(function(){
  $('.bxslider').bxSlider();
}); 
```

# ruby-on-rails - 测试方法的参数

> ID：15925344
> 
> 赞同：0
> 
> 时间：2013-04-10T12:06:01.250
> 
> 标签：ruby-on-rails, ruby, minitest

如何测试方法的参数？

```
 def create_person child

 end 
```

上面的代码是我的方法。它接受一个名为“child”的参数。我尝试测试这个参数。所以，如果方法不带参数，测试会给我错误。我使用 minitest 和 Ruby on Rails。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:15:07.150

您可以使用[`assert_raises`](http://bfts.rubyforge.org/minitest/MiniTest/Assertions.html#method-i-assert_raises)来测试是否`ArgumentError`引发了 an

```
assert_raises ArgumentError do
  YourClass.create_person
end 
```

# cuda - Cuda 和 Nsight - 发布

> ID：15925350
> 
> 赞同：2
> 
> 时间：2013-04-10T12:06:13.707
> 
> 标签：cuda, launch, nsight

我已经成功安装了 Cuda SDK 并使用 HelloWorld 测试了编译器然后我打开了 Nsight 并尝试使用相同的代码。我得到了这个答案“启动失败。找不到二进制文件。” 这是 Nsight 中涉及的编译器的问题吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:46:28.807

这是一个已知的错误。我们已经意识到这一点，并将尝试在我们未来的一个版本中修复它。

您需要在开始调试之前至少手动构建一次项目 - 这是调试器能够检测可执行文件并设置所有设置所必需的。请注意，调试器将在后续运行时自动触发构建 - 当它已经知道您正在使用的可执行文件和构建配置时。

# javascript - 由于放置不当，JS 代码无法正常工作

> ID：15925354
> 
> 赞同：-4
> 
> 时间：2013-04-10T12:06:18.910
> 
> 标签：javascript, html

我是 JavaScript 新手。

我知道全局变量应该在整个页面上可见，但似乎并非如此。

在 HTML 头中，我有标签，我在其中定义了一个全局变量，但这个变量在 HTML 正文`<script>`的标签中不存在。`<script>`我检查了`alert(varname==null)`。

我不明白。

代码没有放在一起的原因是文档完成“加载”，以便脚本能够访问它正在处理的内容。有没有标准的方法来做到这一点？

荒谬的是，我的代码不能在任何一个地方工作 - 因为`<div>`尚未加载，所以不能在 中工作，`<body>`因为全局变量不可见，所以不能在 中工作！

*编辑*

我使用“var varname;”定义了我的全局变量 没有给他们一个价值，显然这不算是定义他们。将其更改为 var "varname = [];" 现在它可以工作了。启动为 null 也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:29:16.373

如果您想在完成加载时运行 javascript 代码，最佳做法是创建一个在 onload 方法中调用的函数。

HTML 代码

```
<body onload="changediv('2');">
    <div id="1">11111111111 1111111111111 111111111</div>
    <div id="2">222222c   2222222222222 22222222</div>
    <div id="3">23333333 3 333 3 3 3 3 3 33333 3</div>
    <div id="4">4444 4  4 44444 4 4 4 4444 </div>
</body> 
```

Javascript函数

```
function changediv(id){
    var d = document.getElementById(id);
        d.style.color = "#ccc";
} 
```

这里有一个关于 JSBIN 的例子

[http://jsbin.com/ajawic/1/edit](http://jsbin.com/ajawic/1/edit)

通过这种方式，您可以确保对象在使用前存在。

# c++ - 确定是否存在动态库的多平台方法

> ID：15925361
> 
> 赞同：6
> 
> 时间：2013-04-10T12:06:44.527
> 
> 标签：c++, visual-c++, g++, dynamic-library

我需要检查是否存在动态库，以便以后可以安全地调用使用该库的函数。

有没有多平台的方法来检查这个？我的目标是 MS Windows 7 (VC++11) 和 Linux (g++)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:17:22.003

要动态“使用”共享库中的函数，需要该库不是可执行文件的一部分，因此您需要编写代码来加载该库，然后使用该函数。很可能有办法以可移植的方式做到这一点，但我不知道有任何代码可以做到这一点。

这不是很难编写的代码。作为“步骤”，它涉及以下内容：

1.  加载给定文件名的库（例如“xx”，然后在体系结构特定代码中将其转换为“xx.so”或“xx.dll”）。
2.  根据索引（“函数编号 1”）或名称（“函数 blah”）查找函数，并返回地址。
3.  对所有相关功能重复步骤 2。
4.  当不再需要库时，用提供的把手将其关闭。

如果第 1 步失败，那么您的库不存在（或者“无法正常工作”），因此您无法调用其中的函数...

显然，有很多方法可以设计一个界面来提供这种类型的功能，而你具体如何去做这将取决于你的实际问题设置是什么。

编辑：

澄清直接使用 DLL 和使用代码中动态加载的区别：

想象这是我们的“shared.h”，它定义了共享库的函数（在真正的头文件中可能有一些`declspec(...)`或`exportsymbol`其他这样的东西，但我现在完全忽略它）。

```
 int func1();
 char *func2(int x); 
```

在直接使用 DLL 的一段代码中，您只需执行以下操作：

```
 #include <shared.h>

 int main()
 {
     int x = func1();
     char *str = func2(42);

     cout << "x=" << x << " str=" << str << endl;
     return 0;
 } 
```

很直截了当，对吧？

当我们使用由代码动态加载的共享库时，它会变得相当复杂：

```
 #include <shared.h>

 typedef int (*ptrfunc1)();
 typedef char * (*ptrfunc2)(int x);

 int main()
 {
     SOMETYPE handle = loadlibrary("shared");
     if (handle == ERROR_INDICATOR)
     {
         cerr << "Error: Couldn't load shared library 'shared'";
         return 1;
     }
     ptrfunc1 pf1 = reinterpret_cast<ptrfunc1>(findfunc("func1"));
     ptrfunc2 pf2 = reinterpret_cast<ptrfunc2>(findfunc("func2"));

     int x = pf1();
     char *str = pf2(42);

     cout << "x=" << x << " str=" << str << endl;
     return 0;
 } 
```

如您所见，代码突然变得更加“混乱”。没关系你必须跳过什么箍才能找到 a 的构造函数`QObject`，或者更糟的是，从 a 继承`QObject`。换句话说，如果您在代码中使用 Qt，您可能会被直接链接到“qt.lib”所困，如果计算机上未安装 Qt 环境，您的应用程序将崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:16:32.930

LoadLibrary 调用应该失败，然后您可以知道动态库是否存在。同样通过动态加载，您可以从动态库中获取函数指针，如果指针为空，则平台不支持该平台上的该函数。

在 Windows 上，您有`LoadLibrary`API 来加载动态库。以及`GetProcAddress`用于在该库中查找所需函数的 API。如果`GetProcAddress`为您正在寻找的特定功能返回 NULL，则该平台不存在该功能。然后您可以登录并决定回退。

# python - 如何在 Python 中刷新网络驱动器映射

> ID：15925368
> 
> 赞同：5
> 
> 时间：2013-04-10T12:07:13.383
> 
> 标签：python, windows

我有一个驱动器已经映射到指定的字母“R:\”。如果我在登录或解锁计算机时运行 python 脚本来访问这个空间，它工作正常。当我将任务计划程序设置为一大早在我进来之前运行脚本时，就会出现问题。基本上我保持登录状态并锁定机器，但在某些时候它看起来我的网络驱动器映射超时（但是当我解锁时重新连接早上的机器），这就是脚本无法找到它们的原因。

尝试执行 os.path.exists() 以检查此驱动器上的文件夹并在它们尚不存在时创建它们时出现错误。从 'try/except' 循环我得到异常“系统找不到指定的路径：'R:\'。

我的问题：有没有办法通过 python 强制刷新？我看过其他关于映射网络驱动器的帖子......但不确定这是否适用于我的情况，因为我已经映射了驱动器。它使用的字母需要保持不变，因为不同的应用程序对它有绝对引用。想知道映射同一个驱动器是否会导致问题或无法正常工作，但又不想使用脚本临时映射到另一个字母并在完成后取消映射……这似乎是一种低效的方法？

使用 python 2.6（另一个程序需要什么）。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:47:37.110

最好的解决方案是通过其 UNC 路径名来引用“驱动器”，即形式为 的路径`\\hostname\sharename`，但不幸的是，Python 的基本库对处理 UNC 路径的支持很差。

选项 #1 是找到一个可以安装的 Python 扩展模块，以获得对 UNC 路径的更好支持。尝试谷歌搜索“python unc”。

选项 #2 是使用 Python[子进程](http://docs.python.org/2/library/subprocess.html)模块来执行`net use`命令，并解析结果输出。例如，在 DOS 提示符下，运行`net use`将输出类似这样的内容...

```
Status       Local     Remote                    Network
-------------------------------------------------------------------------------
OK           R:        \\hostname\sharename      Microsoft Windows Network 
```

...您可以使用它来判断驱动器是否已经映射，如果没有，您可以执行`net use R: \\hostname\sharename`映射它。如果映射已“超时”，则没有参数的调用`net use`实际上足以“刷新”映射，但我不确定。

选项 #3 将研究使用 Python [ctypes](http://docs.python.org/2/library/ctypes.html)模块直接调用底层 Windows 库以模拟调用`net use`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:06:09.910

我对这个问题的解决方案是只使用引用机器的 IP 地址。像魅力一样工作，映射驱动器没有问题......感谢您的回复。

# regex - 如何使用正则表达式从文本文档中删除超链接、电子邮件 ID 等？

> ID：15925369
> 
> 赞同：0
> 
> 时间：2013-04-10T12:07:15.007
> 
> 标签：regex, string, r, character, data-cleaning

我有一些文本文档，其中包含：

*   不同类型的电子邮件地址：我指的是公共域，例如**gmail、yahoo**等，以及私人电子邮件，例如**abc@mycompany.org** ...
*   不同的超链接，例如**abc.com、[http](http://abc.com) ://abc.com、www.abc.org、** ...

所以，我想知道我是否可以编写一个正则表达式命令来从我的文档中删除所有此类条目以进行进一步处理，如果可以，请分享一些链接、文档或任何有用的东西。**我希望使用 regex 函数从文档中删除任何类型的电子邮件 ID 或超链接**。我将在 R 中实现正则表达式代码。因为，我是这个领域的新手，所以任何详细的解释都将受到高度赞赏。

所以，如果我输入如下：

> “abc@mycompany.org aasd234bc.com 将保留[http://abc.com](http://abc.com) www.abc.org org com .com comm in sahgo234@flkja23.in”

然后我应该得到输出：

> “被保留 org com comm in”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:19:45.637

你可以尝试这样的事情：

```
x <- c("abc@mycompany.org", "abc.com", "http://abc.com", "www.abc.org")
gsub("(@.+$|\\..{1,3}$|(^http://)?(w{3}\\.)?)", "", x, perl=T) 
```

如果我更好地理解您的问题，并且它是您需要删除的第一个电子邮件地址：

```
 gsub("(^\\b\\S+\\@\\S+\\..{1,3}(\\s)?\\b)", "", x, perl=T) 
```

否则：

```
gsub("(\\b\\S+\\@\\S+\\..{1,3}(\\s)?\\b)", "", x, perl=T) 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:52:49.617

我不会称之为真正的正则表达式，它可能会更慢但是......

```
x <- c("abc@mycompany.org aasd234bc.com to be retained abc.com www.abc.org org com .com comm in sahgo234@flkja23.in")

y <- unlist(strsplit(x, "\\s+"))
paste(y[!grepl("@|\\.com|\\.org|www\\.|\\.org|\\.in", y)], collapse=" ")

## [1] "to be retained org com comm in" 
```

编辑：对于多行向量，将其包装为一个函数，`lapply`它...

```
x <- c("abc@mycompany.org aasd234bc.com to be retained abc.com www.abc.org org com .com comm in sahgo234@flkja23.in", 
    "abc@mycompany.org aasd234bc.com to be retained abc.com www.abc.org org com .com comm in sahgo234@flkja23.in")

FUN <- function(x) {
    y <- unlist(strsplit(x, "\\s+"))
    paste(y[!grepl("@|\\.com|\\.org|www\\.|\\.org|\\.in", y)], collapse=" ")
}
unlist(lapply(x, FUN))

## > unlist(lapply(x, FUN))
## [1] "to be retained org com comm in" "to be retained org com comm in" 
```

# javascript - jQuery：如何返回附加元素

> ID：15925370
> 
> 赞同：8
> 
> 时间：2013-04-10T12:07:20.397
> 
> 标签：javascript, jquery

我使用 jQuery API`append()`添加一个新元素：

`$(selector).append('<div class="test"></div>')`

我希望表达式返回刚刚附加的元素以供我进一步使用，但是它返回`$(selector)`. 那么，如何让 jQuery 返回刚刚添加的元素以避免重新选择它呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T12:11:39.997

我相信这样做的方法是使用`appendTo()`

然后你可以做

```
$('<div class="test"></div>').appendTo(selector).css('background','blue'); 
```

或者你想做的任何事情。

这将导致`div`您刚刚附加的具有蓝色背景。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T12:09:25.880

您可以只存储对它的引用。请记住，您应该先完成所有操作，`$div`然后再将其附加到作为一部分的元素`DOM`以避免多次重排。

```
var $div = $('<div class="test"></div>');

$(selector).append($div); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T12:13:01.893

`append`您可以通过将 html 字符串传递给[`jQuery`函数](http://api.jquery.com/jQuery/#jQuery2)来独立创建元素：

```
$('<div class="test"></div>'); 
```

您可以在[`append`](http://api.jquery.com/append/)

```
$(selector).append(/* $div = */$('<div class="test"></div>').… ); 
```

或与[`appendTo`](http://api.jquery.com/appendTo/)

```
/* $div = */$('<div class="test"></div>').appendTo(selector).… ; 
```

或者你只是将它们分成两个语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:16:35.210

这也可以。

```
<div class="inner">hellworld</div>
$('.inner').append('<p>paragraph</p>'); 
```

这将插入两个新的和一个现有的作为主体的最后三个子节点

```
var $newdiv1 = $('<div id="object1"/>'),
newdiv2 = document.createElement('div'),
existingdiv1 = document.getElementById('foo');
$('body').append($newdiv1, [newdiv2, existingdiv1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:26:05.390

请试试这个

```
$(selector).append('<div class="test"></div>').find('div.test:last-child') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T12:26:08.633

您可以通过添加`childern`jQuery 函数来返回它，如本示例[jsfiddle](http://jsfiddle.net/mido_rizk007/PpHLj/)

```
$(selector).append('<div class="test"></div>').children('.test'); 
```

或者您可以使用`prependTO`本示例[jsfiddle](http://jsfiddle.net/mido_rizk007/PpHLj/1/)中的 jQuery 函数：

```
$('<div class="test"></div>').prependTo(selector); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-10T12:17:22.920

也许你可以尝试

```
var elt = $('<div class="test"></div>');
$(selector).append(elt); 
```

或者使用 appendTo 而不是 append，然后链接您需要的任何内容（以下示例中的*show() ）*

```
$('<div class="test"></div>').appendTo($(selector)).show() 
```

# html5-canvas - 无法切换回画笔工具以在画布上素描

> ID：15925378
> 
> 赞同：0
> 
> 时间：2013-04-10T12:07:53.650
> 
> 标签：html5-canvas

所以我有我的画笔和橡皮擦工具。我遇到的问题是起初我可以在画布上素描，但在我切换到橡皮擦后，如果我再次选择画笔，它会停留在橡皮擦工具上。我尝试使用 if else 但无法使其工作。

```
tool = new brushTool();
$('#brushTool').click(brushTool);
function brushTool() {
    var tool = this;
    this.mouseStart = false;

$('#eraserTool').click(eraserTool);
function eraserTool() {
    context.globalCompositeOperation = "destination-out";
    context.strokeStyle = "rgba(0,0,0,1)";
}

    this.mousedown = function (e) {
        tool.mouseStart = true;
        context.beginPath();
        context.moveTo(x, y);
        context.lineTo(x,y);
        context.lineCap = 'round';
        context.lineWidth = document.getElementById('brush_size').value;
        context.strokeStyle = document.getElementById('color').value;
        context.stroke();
    };

    this.mousemove = function (e) {
      if (tool.mouseStart) {
        context.lineTo(x, y);
        context.stroke();
      }
    };

    this.mouseup = function (e) {
      if (tool.mouseStart) {
        tool.mousemove(e);
        tool.mouseStart = false;
      }
    };
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:12:39.777

感谢您使用 javascript“类”！

这是制作工具类的方法。

看起来您希望工具充当画笔或橡皮擦，因此您的工具类需要一个“类型”变量来了解它的当前模式（画笔/橡皮擦）

```
 // create your Tool “class”
    function Tool(){

        // this is your tool’s current mode: none, brush, eraser
        var type="none";

    } 
```

下面介绍如何向 Tool 类添加功能（通常称为方法，但它们实际上是 javascript 函数）。

您可以使用原型在“function Tool()”定义**之外**声明类方法。这样，每个 Tool 对象都不会被它自己的方法副本所拖累。如果您创建 10 个工具，它们都将能够使用您在原型上定义的常用方法。

```
 // this is where you define what you want the tool to do now (brush/eraser)
    Tool.prototype.activate=function(newType){ … };

    // start a new line (called by tool.mousedown)
    Tool.prototype.startLine=function(){ … };

    // draw a new line segment (called by tool.mousemove)
    Tool.prototype.drawLineTo=function(){ … }

    // called by jQuery when the user presses down the mousebutton
    Tool.prototype.mousedown=function(e){ … }

    // called by jQuery when the user moves the mouse
    Tool.prototype.mouseup=function(e){ … } 
```

此时，您的 Tool 类只是一个蓝图。要创建一个实际的工具，请使用“new”。这个实际的工具称为对象。

```
 var myTool=new Tool(); 
```

然后您可以使用 myTool 上的任何方法（功能）

```
 // call the “activate” method/function on your new myTool object.
    myTool.activate("brush"); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/sTAve/](http://jsfiddle.net/m1erickson/sTAve/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
    #brush_size,#color{ width:30px;}
</style>

<script>
$(function(){

    // Note: every "this" refers to the tool

    // make a generic tool that can work as either a brush or eraser

    // first, set the properties that your tool has
    function Tool(){
        var type="none";
        var mouseStart=false;
        var x;
        var y;
        var lastX;
        var lastY;
    }

    // second, add the methods (functions) that your tool
    // these methods actually do the work

    // tool.activate()
    Tool.prototype.activate=function(newType){

        this.type=newType;
        this.mouseStart=false;

        // set your brush properties here
        if(this.type=="brush"){
          context.globalCompositeOperation = "source-over";
        }

        // set your eraser properties here
        if(this.type=="eraser"){
          context.globalCompositeOperation = "destination-out";
          context.strokeStyle = "rgba(0,0,0,1)";
        }

        console.log(this.type+": "+context.globalCompositeOperation);
    }

    //tool.startLine()
    Tool.prototype.startLine=function(){
        this.lastX=this.x;
        this.lastY=this.y;
        context.lineCap = 'round';
        context.lineWidth = document.getElementById("brush_size").value;
        if(this.type=="brush"){
            context.strokeStyle = document.getElementById('color').value;
        }
    console.log(context.strokeStyle);
    }

    // tool.drawLineTo()
    Tool.prototype.drawLineTo=function(){
        context.beginPath();
        context.moveTo(this.lastX,this.lastY);
        context.lineTo(this.x,this.y);
        context.stroke();     
        this.lastX=this.x;
        this.lastY=this.y;
    //console.log(this.x+"/"+this.y+": "+this.mouseStart);
    }

    // tool.mousedown(e)
    Tool.prototype.mousedown=function(e){
        this.setXY(e);
        this.mouseStart = true;
        this.startLine(this.x,this.y);
    }

    // tool.mousemove(e)
    Tool.prototype.mousemove=function(e){
        if (this.mouseStart) {
          this.setXY(e);
          this.drawLineTo(this.x,this.y);
        }
    }

    // tool.mouseup(e)
    Tool.prototype.mouseup=function(e){
        if (this.mouseStart) {
          this.setXY(e);
          this.drawLine;
          this.mouseStart = false;
        }
    }

    // tool.setXY(e)
    Tool.prototype.setXY=function(e){
        this.x=parseInt(e.clientX-offsetX);
        this.y=parseInt(e.clientY-offsetY);
    }

    // get references to the canvas and it's context
    var canvas=document.getElementById("canvas");
    var context=canvas.getContext("2d");

    // get the position of the canvas on the page
    // (needed to calculate mouse position later)
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    // make a new tool
    var myTool=new Tool();
    myTool.activate("brush");

    // set some defaults
    document.getElementById("brush_size").value=15;
    document.getElementById('color').value="green";

    // listen for events

    $("#canvas").mousedown(function(e){myTool.mousedown(e);});
    $("#canvas").mousemove(function(e){myTool.mousemove(e);});
    $("#canvas").mouseup(function(e){myTool.mouseup(e);});

    $('#eraserTool').click(function(e){ myTool.activate("eraser"); });
    $('#brushTool').click(function(e){ myTool.activate("brush"); });

}); // end $(function(){});
</script>

</head>

<body>
    <button id="brushTool">Brush</button>
    <button id="eraserTool">Eraser</button>
    <input id="brush_size" type="text" width=10>
    <input id="color" type="text" width=10><br/>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

# freemarker - 删除 Lithium/Freemarker 中的重复项

> ID：15925379
> 
> 赞同：4
> 
> 时间：2013-04-10T12:07:57.323
> 
> 标签：freemarker, duplicate-removal

我正在使用 Lithium 自定义组件来创建撰写博客文章最多的用户列表。我有一个写过博客文章的用户列表，然后打了个电话来获取每个用户写的博客文章的数量。

```
<#assign authors = rest("blogs/id/audiofile/posts")>

<#list authors.node_message_context.message.author as t>
<#assign count = rest("${t.@href}/posts/style/blog/count")>
<#assign orderedCount = count.value>
<#list orderedCount as c>
<ul>
<li>Blog posts ${c} userid ${t.@href}
</ul>
</#list>
</#list> 
```

给出一个输出

```
Blog posts 4 userid /users/id/2477

Blog posts 4 userid /users/id/2477

Blog posts 4 userid /users/id/2477 
```

我的问题是如何删除此列表中的重复作者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-11T13:46:25.003

@Wolfgang Fahl 希望我们可以修改 Lithium REST API =)！

不幸的是，情况并非如此，所以我们必须处理我们得到的东西，这可能会做这样的事情：

```
<#-- this variable we need to store unique author ids -->
<#assign authorids = [] />
<#-- I'd use API v2 here, think for such stuff it's more powerful than v1 -->
<#assign query = 'SELECT author FROM messages WHERE conversation.style = "blog" AND board.id = "audiofiles"'?url />
<#assign response = rest("2.0", "/search?q=" + query) />

<#-- the response object will contain a list of blog post authors,
     we loop trough them to get uniqe ids of every user that has written
     a blog post, we need them later -->
<#list response.data.items as author>
    <#-- make sure each author just gets added once -->
    <#if !authorids?seq_contains(author.id)>
        <#assign authorids = authorids + [author.id] />
    </#if>
</#list>

<#-- now we loop trough the unique author ids and ask for the amount of
     blog posts they have written -->
<ul>
<#list authorids as id>
    <#assign query = 'SELECT count(*) FROM messages WHERE author.id = id AND board.id = "audiofiles"'?url />
    <#assign response = rest("2.0", "/search?q=" + query) />

    <li>User with ID ${id} has written ${response.data.count} blog posts</li>
</#list>
</ul> 
```

代码未经测试，所以不能 100% 确定它是否有效，但我希望我选择的方法在上面的代码中变得清晰......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T03:18:38.973

常见问题解答文章 [http://freemarker.org/docs/app_faq.html#faq_modify_seq_and_map](http://freemarker.org/docs/app_faq.html#faq_modify_seq_and_map) 概述了为什么这很棘手。基本上，它需要修改您的 restful 界面来为您完成工作：

```
<#assign authors = rest("blogs/id/audiofile/uniquauthors")> 
```

将是一个新的 restful 接口的示例，然后在服务器端完成工作。

# typescript - 打字稿window.devicePixelRatio

> ID：15925383
> 
> 赞同：1
> 
> 时间：2013-04-10T12:08:08.360
> 
> 标签：typescript

我正在尝试在打字稿文件中使用 window.devicePixelRatio 但这无法编译并显示消息“属性'devicePixelRatio'不存在于类型'Window'的值”

是否有修复或我必须只使用打字稿之外的功能？

皮特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:34:41.970

`Window`您可以使用您需要的功能扩展界面 - 只要有新的（ish）没有进入`lib.d.ts`. 您可能需要稍后删除您的扩展，`lib.d.ts`但编译器会在那时警告您。

```
interface Window {
    devicePixelRatio: number;
}

var x = 1;

if (window.devicePixelRatio) {
    x = window.devicePixelRatio
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T06:40:00.667

如果它适合你，我会选择史蒂夫的解决方案。有时 Visual Studio 会变得古怪并开始抱怨已经定义的变量。或者，您可以随时执行以下操作：

```
var x = 1;
var win:any = window;

if (win.devicePixelRatio) {
    x = win.devicePixelRatio
} 
```

或者

```
var x = 1;

if ((<any>window).devicePixelRatio) {
    x = (<any>window).devicePixelRatio
} 
```

# jquery - 为什么我的正则表达式在 IE7 中不起作用？

> ID：15925386
> 
> 赞同：0
> 
> 时间：2013-04-10T12:08:21.373
> 
> 标签：jquery, regex

我有以下代码来检查文本框中的特殊字符。

```
var partial = /[*!@#$%^&*~]/;
var check = function (string) {
    for (i = 0; i < string.length; i++) {
        if (partial.test(string[i])) {
            return true
        }
    }
    return false;
} 
```

//onclick 我正在调用下面的

```
$('input[type="text"]').each(function () {
    if (check($(this).val()) == true || $(this).val().length <= 2) {
        //displayerrormessage
        noerror += 1;
    }
}); 
```

它适用于所有浏览器，但不适用于 IE7。
我不确定我需要改变什么。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:49:46.693

Internet Explorer 7 不支持按索引访问字符串。

您必须使用`charAt`与IE7兼容的方法：

```
partial.test(string.charAt(i)) 
```

# performance - scrollTop 跳转到元素，如何减速？

> ID：15925387
> 
> 赞同：0
> 
> 时间：2013-04-10T12:08:24.700
> 
> 标签：performance, animation, window, scrolltop

好的，所以我现在有了这个：

```
$(function(toContact){
    $('#contact').click(function(){
        $(window).scrollTop($('footer').offset().top);
    });
}); 
```

但是现在屏幕只是跳转到元素（页脚）。如何控制此功能的速度？我希望它走得更慢更轻松。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:16:42.727

当我想完全控制我的滚动时，我使用了一个 jquery 插件：localScroll。看看它，你可能会喜欢。

# html - 我是如何构建 SQL 数据库连接字符串的？

> ID：15925390
> 
> 赞同：0
> 
> 时间：2013-04-10T12:08:30.343
> 
> 标签：html, sql, database, connection-string, sqldatasource

我对 html 文件中的连接字符串有疑问...此连接字符串形式是否为假？

objConnection.Open "提供者=SQLOLEDB；数据源=xxxx\WINCCFLEXEXPRESS；UID=test；PWD=test；数据库=master"

我需要帮助

# ios - iOS 6 中的应用内地图方向

> ID：15925396
> 
> 赞同：0
> 
> 时间：2013-04-10T12:08:44.700
> 
> 标签：ios, xamarin.ios, maps, directions

当我需要向用户显示到给定位置的行车路线时，我的 iOS 应用程序当前会启动地图应用程序。这很好用，但是......

我的客户现在要求我在应用程序内提供此功能（即它不会退出应用程序并启动地图应用程序）。

有没有人在 iOS 6 中这样做过？可以做到吗？

各种 Map Kit 类（MKMapItem、MKDirectionsRequest 等）的 Mono 文档不存在（“尚未输入本节的文档。”），所以我真的很挣扎。

我正在使用 Xamarin.iOS，但我可以使用 obj-c。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:27:50.100

MapKit API 当前不支持您要完成的任务。使用未记录的 API 可能会导致您的应用被拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:15:04.207

`MKMapView`不提供任何方向。因此，如果你想在你的应用程序中使用它，你将不得不自己构建它。

# xml - 如何使用选择字符串在 xml 文件中查找产品 guid？

> ID：15925397
> 
> 赞同：0
> 
> 时间：2013-04-10T12:08:49.810
> 
> 标签：xml, powershell, powershell-2.0

我们有一个 xml 文件，我们在其中存储了产品 guid 的几个属性。

我正在尝试使用 powershell select-string cmdlet 查找 guid，但它没有返回任何值。

```
GEt-content rules.xml | Select-String "5351BABA-40C2-477B-8111-DA54A48CD8EB" 
```

guid 在文件中，我手动验证。

为什么选择字符串无法找到产品指南？有没有其他方法可以找到它是否可用？

来自 xml 文件的示例内容

```
<Component Id="M_PostConfig" Name="Post-Configuration" StsDisplayEntry="Database Server Post-Configuration" StsDisplayText="Please wait while Post-Configuration is installed" UninstallCommand="&quot;%pTxtFoldrSystem32%\msiexec.exe&quot;" Version="2.30.1.3" UninstallParameters="/i {85bb61a2-e0d8-4c3b-83a7-d978dcd4b3d2} REMOVE=DBSERVER /L*V+ &quot;%pFoldrInstallPath%\Foundation\Install\MSI_Uninstall.log&quot; /qn msifeatwise" SupportUninstall="Yes"> </Component> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:54:49.503

试试`([String](Get-Content rules.xml)) | Select-String "5351BABA-40C2-477B-8111-DA54A48CD8EB"`。

# .net - 到期通知

> ID：15925403
> 
> 赞同：1
> 
> 时间：2013-04-10T12:09:08.477
> 
> 标签：.net, asp.net-mvc, web-applications, windows-server-2008

自购买之日起 12 个月后向客户发送通知电子邮件的最直接方式是什么？

我们的 Web 服务器运行一个连接到 SQL Server 的 ASP.NET MVC 3 网站。目前我们每周一手动运行一个通知过期用户的网页。

到目前为止，这是我想到的选项：

1.  每天使用任务计划程序运行网页
2.  构建一个控制台应用程序，不断检查计时器并最终发送通知
3.  构建一个像 2) 这样的 windows 服务，在失败的情况下可以自动重启

我错过了一些更容易的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:13:26.317

我在以前的公司也遇到过同样的问题。最后，我们选择了任务计划程序。主要原因是**任务计划程序是在 Windows 中处理重复性任务的标准机制，**因此在未来比其他选项更易于维护。

我们的控制台应用程序每天由任务计划程序运行，它被设计为“智能”。我的意思是聪明。

*   控制台应用程序是一个调用 WCF 服务的虚拟应用程序。所有逻辑都在 WCF 服务内部。这样做的原因是将所有代码保存在同一个地方。
*   如果运行失败会在我们的系统日志中写入警报（每天检查一次，它是一个数据库表）。如果发生灾难性故障（无法访问数据库），我们会写入控制台应用程序目录中的文件。
*   如果它已经在处理中，则不允许运行第二个实例（某种单例）
*   它会在数据库中跟踪发送了哪些电子邮件，因此，如果同一天执行两次，则仅第一次发送电子邮件。
*   它有一个**/whatif**参数
*   如果电子邮件失败，则会记录下来并继续该过程。
*   如果它不得不发送几封电子邮件并且在某个时刻失败了，那么下一次执行将从它停止的点开始。

在内部，代码类似于

```
Linq to get all the users that deserved an email
For each user
  Send the email, mark it as sent in DB and close transaction
  If email fails Write to log.
Next
Write log with stats 
```

这种方式更慢但更安全。如果它必须向 4000 个用户发送电子邮件并且在用户 1337 中失败，那么我们会记录发生的事情，并且下次执行时它将从 1338 恢复。

在我们的**系统登录**一个文件夹中，我们通常每天都有一个条目，内容如下：

> 电子邮件进程由调度程序于 ​​02:00 开始。已发送 4000 封电子邮件，0 封失败。

如果某事失败：

> 电子邮件进程由调度程序于 ​​02:00 开始。已发送 3999 封电子邮件，其中 1 封失败。发送给用户 xxxxx 的电子邮件失败。原因：电子邮件地址“joeBlogs@@gmail.com”不正确。

# sql-server-2008 - 如何在 sql 2008 中计算以前的余额

> ID：15925404
> 
> 赞同：-1
> 
> 时间：2013-04-10T12:09:11.343
> 
> 标签：sql-server-2008

我想要一个 sql 2008 中的代码，它将添加下表的先前余额。喜欢

```
Balance= + Debit
Balance= -Credit

AccountReceivable
+----+------------+----------+----------+----------+---------+-------+--------+---------+-----+
| ID |  AR_Date   |  Ref_No  | Acc_Code | Acc_Name | Details | Debit | Credit |Balance |     |
+----+------------+----------+----------+----------+---------+-------+--------+---------+-----+
|  1 | 2013-04-10 |          |      101 | A/R      |  Kofi  | 500   | |   0   |      |
|  2 | 2013-04-10 |          |      101 | A/R      |  AMA   |0      | |   250 |      |
|  3 | 2013-04-11 | CH552778 |      101 | A/R      |  Boss  | 0     | |   50  |      |
+----+------------+----------+----------+----------+---------+-------+--------+---------+-----+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:15:50.050

将 CTE 与 ROW_NUMBER() 结合使用。在此之后，您可以查询 CTE 并将当前行号与前一个连接。

例如

```
;
WITH CTE as (
SELECT
    ac.*,
         RN = ROW_NUMBER() OVER (ORDER BY ID)
FROM
    AccountsReceivable ac

)

SELECT
cur.Balance + prev.Balance AS NewBalance
FROM
CTE cur 
LEFT OUTER JOIN CTE prev ON cur.RN = prev.RN + 1 
```

# python - 如何在列表中创建和存储类的对象

> ID：15925409
> 
> 赞同：0
> 
> 时间：2013-04-10T12:09:13.203
> 
> 标签：python, list, class

我需要从单个类创建实例并将名称存储在列表中。

```
robot_list = []
for i in range (num_robots):
    robot_list.append('robot%s' %i) 
```

这将创建一个我想用作单个类实例的名称列表`Robot`。但它们是`str`迄今为止的类型。所以我写了这个来改变它们的类型并将类的实例分配给名称：

```
for i in robot_list:
    i = Robot() 
```

稍后当我想使用列表中的任何元素时，程序会返回一个`AttributeError`说对象仍然是字符串的说法。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T12:10:03.297

```
robot_list = [Robot() for i in xrange(num_robots)] 
```

创建类`num_robots`的实例`Robot`并将它们存储到`robot_list`.

如果您想“命名”它们，即构造函数获取一个字符串作为参数，请使用以下命令：

```
robot_list = [Robot('robot{}'.format(i)) for i in xrange(num_robots)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:19:17.520

添加到其他答案：您的作业没有按照您期望的方式工作。

```
for i in robots_list:
    i = Robot() 
```

不会将机器人对象保存到列表中的每个索引。它将创建对象，但不会将其保存到您希望的索引，而是会覆盖临时变量`i`。因此列表中的所有项目都保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:13:20.653

您将需要您的机器人类在初始化时获取一个字符串（作为其名称）。请注意，当使用机器人列表时，您将作用于机器人对象，而不是其名称。然而，机器人现在将其名称存储在对象中。

```
class Robot():
    def __init__(roboName = ''):
        self.name = roboName

    # all other class methods after this

if __name__ == '__main__'
    robot_list = []
    for i in xrange (num_robots):
        robo_name = 'robot%s' % i
        robot_list.append(Robot(robo_name)) 
```

# javascript - Internet Explorer 7-10 删除 xhr/activex 中的 Content-Length

> ID：15925417
> 
> 赞同：3
> 
> 时间：2013-04-10T12:09:31.780
> 
> 标签：javascript, internet-explorer, xmlhttprequest

我有一个与以下问题非常相似的问题： [发送 Content-Encoded 时 IE's XMLhttpRequest's getResponseHeader("Content-Length") 不存在](https://stackoverflow.com/questions/3688871/ies-xmlhttprequests-getresponseheadercontent-length-absent-when-content-en)

我正在尝试获取特定 JS 文件的文件大小，它看起来像这样：

```
var req = this.window.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : new XMLHttpRequest();
if (!req) {
    throw new Error('XMLHttpRequest not supported');
}
req.open('HEAD', urlToScript, false);
req.send(null);
var size = req.getResponseHeader('Content-Length'); 
```

size 变量是 ie < 10 和`null`ie 10 中的空字符串。该代码在 FF 或 Chrome 等其他浏览器上运行良好。

这个问题似乎只有在请求的内容被压缩时才会出现。

在 IE 中，如果我用以下方式打印标题，则标题缺少“Content-Length”和“Content-Encoding” `req.getAllResponseHeaders()`：

```
Server: Apache-Coyote/1.1
Last-Modified: Wed, 03 Mar 2010 07:01:40 GMT
Expires: Thu, 10 Apr 2014 12:03:27 GMT
Cache-Control: public, max-age=31536000
Content-Type: text/javascript;charset=utf-8
Date: Wed, 10 Apr 2013 12:03:26 GMT 
```

Firefox 20 打印更多信息的地方：

```
Server: Apache-Coyote/1.1
Content-Encoding: gzip
Vary: Accept-Encoding
Last-Modified: Wed, 03 Mar 2010 07:01:40 GMT
Expires: Thu, 10 Apr 2014 12:05:24 GMT
Cache-Control: public, max-age=31536000
Content-Type: text/javascript;charset=utf-8
Content-Length: 17669
Date: Wed, 10 Apr 2013 12:05:24 GMT
X-Cache: MISS from somewhere.com
Via: 1.1 somewhere.com:8001 (squid/2.7.STABLE9)
Connection: keep-alive
Proxy-Connection: keep-alive 
```

我还尝试将“Content-Type”设置为“application/javascript”并手动设置“Accept-Encoding”请求标头。没有任何效果。有任何想法吗？

# css - IE 8/9 不呈现标题背景图像

> ID：15925424
> 
> 赞同：0
> 
> 时间：2013-04-10T12:09:45.613
> 
> 标签：css, internet-explorer, twitter-bootstrap

我使用了引导主题，在 IE 8/9 中没有显示标题背景图像（显示为黑色），但所有其他浏览器都正确显示

CSS：

```
.navbar-fixed-top { 
   background: url(http://i47.tinypic.com/15ed8ub.jpg) repeat-x;
}
.navbar-fixed-top .nav { 
   margin:12px 0 0 0; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:12:05.030

问题（如果尝试将图像放入`.brand`容器中）是您需要为 IE 设置图像的尺寸。

例如：

```
.brand img{
  width:238px;
  height:50px;
  display:block;
} 
```

# emacs - 使用 .Rnw 文件在 emacs 中突出显示语法

> ID：15925428
> 
> 赞同：0
> 
> 时间：2013-04-10T12:10:02.770
> 
> 标签：emacs, latex, sweave, ess

使用 .Rnw 文件时，带有 ess 的 emacs 会以紫色突出显示 R 代码块。这很好，但我遇到的问题是在 R 代码之后，一切仍然是紫色的！

有人说，一旦您稍后输入更多 R 代码，它就会消失，但这对我不起作用。

例如，

```
This is some text
<<>>=
This is some R-code, its in purple
@
This is some more text, but its still in purple! 
```

这是我的 .emacs 文件

```
(setq TeX-auto-save t)
(setq TeX-parse-self t)
(setq TeX-PDF-mode t)

(add-hook 'LaTeX-mode-hook 'flyspell-mode)

(require 'ess-site)
(require 'whitespace)
(setq whitespace-style '(face lines-tail))

(setq backup-by-copying t
      backup-directory-alist '(("." . "~/.emacsBkups"))
      delete-old-versions t
      kept-new-versions 5
      kept-old-versions 2
      version-control t)

;; does not use white-space mode in latex-mode
(define-global-minor-mode white-space-no-latex-mode whitespace-mode
  (lambda ()
    (when (not (memq major-mode
             (list 'latex-mode)))
      (whitespace-mode))))

(white-space-no-latex-mode)
(ess-toggle-underscore nil)

(setq TeX-view-program-list '(("Evince" "evince --page-index=%(outpage) %o")))
(setq TeX-view-program-selection '((output-pdf "Evince")))

;; Make TeX and RefTex aware of Snw and Rnw files
(setq reftex-file-extensions
      '(("Snw" "Rnw" "nw" "tex" ".tex" ".ltx") ("bib" ".bib")))
(setq TeX-file-extensions
      '("Snw" "Rnw" "nw" "tex" "sty" "cls" "ltx" "texi" "texinfo"))

;; Lets you do 'C-c C-c Sweave' from your Rnw file
(defun emacsmate-add-Sweave ()
  (add-to-list 'TeX-command-list
           '("Sweave" "R CMD Sweave %s"
         TeX-run-command nil (latex-mode) :help "Run Sweave") t)
  (add-to-list 'TeX-command-list
           '("LatexSweave" "%l %(mode) %s"
         TeX-run-TeX nil (latex-mode) :help "Run Latex after Sweave") t)
  (setq TeX-command-default "Sweave"))

(add-hook 'Rnw-mode-hook 'emacsmate-add-Sweave) 
```

我想这与我的 .emacs 文件有关。但我对 lisp 的了解还不够，无法弄清楚冲突发生在哪里......

**编辑**我找到了罪魁祸首......只有当我在 R 代码块中使用下划线时才会出现问题。我收到错误“缺少 $ 已插入”，它指向 R 代码中的“_”。我如何告诉 emacs 这是 R 代码，应该忽略它？

# dart - 异步代码的 UnitTest 示例

> ID：15925431
> 
> 赞同：5
> 
> 时间：2013-04-10T12:10:03.293
> 
> 标签：dart, dart-async, dart-unittest

在以某种方式阅读了[Dart 单元测试](http://www.dartlang.org/articles/dart-unit-tests/#asynchronous-tests)后，我仍然无法理解如何将它与`Future`s 一起使用。

**例如：**

```
void main()
{
    group('database group',(){
    setUp( () {
                // Setup
           });

    tearDown((){
                // TearDown
           });

    test('open connection to local database', (){
        DatabaseBase database = null;

        expect(database = new MongoDatabase("127.0.0.8", "simplechat-db"), isNotNull);

        database.AddMessage(null).then(
            (e) {
                  expectAsync1(e) 
                  {
                     // All ok
                  }
                },
            onError: (err)
                     {
                        expectAsync1(bb)
                        {
                          fail('error !');
                        }
                     }
         );

});

// Add more tests here 
```

}); }

因此，在测试中，我创建了一个基本抽象类的实例，`DatabaseBase`其中包含一些实际[MongoDb](https://github.com/vadimtsushko/mongo_dart)类的参数，并立即检查它是否已创建。然后我只运行一些非常简单的函数：`AddMessage`. 这个函数定义为：

```
Future AddMessage(String message); 
```

并返回`completer.future`。

如果传递`message`为空，则该函数将失败完成者：`.completeError('Message can not be null');`

在实际测试中，我想测试是否`Future`成功完成或有错误。所以以上是我尝试了解如何测试`Future`返回 - 问题是这个测试**没有失败** :(

您能否在答案中写一个小代码示例如何测试返回的函数`Future`？在测试中我的意思是-有时我想测试返回（成功时）值，如果成功值不正确，则测试失败，而另一个测试应该失败，那么函数将失败`Future`并进入`onError:`阻塞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:51:37.510

我刚刚重新阅读了你的问题，我意识到我在回答错误的问题......

我相信你使用`expectAsync`不正确。`expectAsync`用于包装带有 N 个参数的回调并确保它运行`count`时间（默认为 1）。

`expectAsync`将确保任何异常都被测试本身捕获并返回。它本身实际上并没有任何期望（错误的命名法。）

你想要的只是：

```
database.AddMessage(null).then(
  (value) { /* Don't do anything! No expectations = success! */ },
  onError: (err) { 
    // It's enough to just fail!
    fail('error !');
  }
); 
```

或者如果您需要确保测试完成到某个特定值：

```
database.AddMessage(null).then(
  expectAsync1((value) { /* Check the value in here if you want. */ }),
  onError: (err) { 
    // It's enough to just fail!
    fail('error !');
  }
); 
```

* * *

另一种方法是使用`completes`匹配器。

```
// This will register an asynchronous expectation that will pass if the
// Future completes to a value.
expect(database.AddMessage(null), completes); 
```

或测试异常：

```
// Likewise, but this will only pass if the Future completes to an exception.
expect(database.AddMessage(null), throws); 
```

如果要检查完成的值，可以执行以下操作：

```
expect(database.AddMessage(null).then((value) {
  expect(value, isNotNull);
}), completes); 
```

看：

*   [http://api.dartlang.org/docs/bleeding_edge/matcher.html#completes](http://api.dartlang.org/docs/bleeding_edge/matcher.html#completes)
*   [http://api.dartlang.org/docs/bleeding_edge/unittest.html#expectAsync0](http://api.dartlang.org/docs/bleeding_edge/unittest.html#expectAsync0)
*   [http://www.dartlang.org/articles/dart-unit-tests/#asynchronous-tests](http://www.dartlang.org/articles/dart-unit-tests/#asynchronous-tests)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-07T09:22:02.040

A`Future`可以从`test()`方法返回 - 这将导致单元测试等待`Future`完成。

我通常把我的`expect()`电话放在`then()`回调中。例如：

```
test('foo', () {
  return asyncBar().then(() => expect(value, isTrue));
}); 
```

# asp.net-mvc-3 - 部分视图覆盖主视图

> ID：15925433
> 
> 赞同：1
> 
> 时间：2013-04-10T12:10:08.457
> 
> 标签：asp.net-mvc-3

我正在学习 ASP.NET MVC，并试图了解部分视图。我正在尝试一个非常简单的事情，这是我的源代码。

_Layout.cshtml

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body>
</html> 
```

_ViewStart.cshtml

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

家庭控制器.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcApplication4.Controllers
{
        public class HomeController : Controller
        {
                public ActionResult Index()
                {
                        return View();
                }

                public PartialViewResult UpdateDate()
                {
                    return PartialView("Partial1");
                }
        }
} 
```

索引.cshtml

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
@DateTime.Now
<br />
@{Html.RenderPartial("Partial1");}
<br />
@Html.ActionLink("Render Partial", "UpdateDate") 
```

Partial1.cshtml

```
@DateTime.Now 
```

现在，当我单击 Render Partial 链接时，会调用 UpdateDate 操作方法，但渲染局部视图会覆盖主要内容，我只看到局部视图的内容。为什么我会丢失 Index.cshtml 的内容？

我需要做什么才能按原样显示 Index.cshtml 的内容并且只刷新部分视图内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:28:28.050

> 为什么我会丢失 Index.cshtml 的内容？

因为您需要使用 AJAX 调用。现在，您所拥有的只是一个常规链接，它被呈现为标准`<a>`元素，并且您知道，当您单击任何网页中的锚点时，浏览器只会重定向到该`href`属性指向的 url。这被称为超链接，万维网充满了它们。

因此，您可以首先为您的链接提供一个唯一的 ID，该 ID 可以稍后在自定义脚本中使用：

```
@Html.ActionLink("Render Partial", "UpdateDate", null, null, new { id = "myLink" }) 
```

还将您的部分放入容器中：

```
<div id="myPartial">
    @{Html.RenderPartial("Partial1");}
</div> 
```

最后订阅`.click()`此链接的事件并发送 AJAX 调用而不是常规重定向：

```
@section scripts {
    <script type="text/javascript">
        $('#myLink').click(function() {
            $.ajax({
                url: this.href,
                type: 'GET',
                cache: false,
                success: function(result) {
                    $('#myPartial').html(result);
                }
            });
            return false;
        });
    </script>
} 
```

在此示例中，我已覆盖视图中的自定义脚本部分以编写 javascript。但当然，这仅用于演示目的。良好的实践要求 javascript 代码应该放在单独的 javascript 文件中，而不是与标记混合。所以在现实世界的应用程序中，这应该被重构为：

```
@section scripts {
    @Scripts.Render("~/bundles/mybundle")
} 
```

`~/bundles/mybundle`显然，您将在指向外部 js 的文件中定义一个自定义包`~/App_Start/BundleConfig.cs`。

* * *

或者，您可以使用 an`Ajax.ActionLink`而不是常规`Html.ActionLink`：

```
@Ajax.ActionLink("Render Partial", "UpdateDate", new AjaxOptions { UpdateTargetId = "myPartial" }) 
```

但要使其正常工作，您需要将`jquery.unobtrusive-ajax.js`脚本包含到您的页面中。由于您使用的是 ASP.NET MVC 4 和捆绑包，因此您可以`~/bundles/jqueryval`在 _Layout 中包含捆绑包：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval")
@RenderSection("scripts", required: false) 
```

# twitter-bootstrap - 可使用引导程序排序

> ID：15925447
> 
> 赞同：0
> 
> 时间：2013-04-10T12:10:42.983
> 
> 标签：twitter-bootstrap, jquery-ui-sortable

我正在使用以下代码使我的 div 可排序

```
$('.outersortable').sortable({ 
    handle: ".drag", 
    cursor: "e-size",
    placeholder: "ui-state-highlight", 
    axis: "y" }); 
```

我想运行 ajax 调用并保存更改（div 的顺序），而且它只是使 div 可拖动但不能替换 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:25:43.553

`update`当用户停止排序并且 DOM 位置发生变化时，您应该使用可排序的事件。

`$('.outersortable').sortable("toArray");`您使用 jQuery函数获取当前元素的顺序`ajax`并将其发送到后端。

**完整示例：**

```
$('.surEdOuterSortable').sortable({ 
    handle: ".spritesHandlerIcon", 
    cursor: "e-size",
    placeholder: "ui-state-highlight", 
    axis: "y" 
    update: function(event, ui) {
        order = $('.outersortable').sortable("toArray");

        $.ajax({
            url: 'controller/action',
            data: {order:order},                        
        });
    }
}); 
```

# .net - 为什么在这个 XNA 项目中无法识别 Xml 文件？

> ID：15925453
> 
> 赞同：0
> 
> 时间：2013-04-10T12:10:59.803
> 
> 标签：.net, xml, windows-phone-7, xna, xna-4.0

为什么在这个 XNA 项目中无法识别 Xml 文件？它显示错误，因为 XML 不是中间格式。我是否将此 XML 文件放置在正确的路径中？![在此处输入图像描述](https://i.stack.imgur.com/o4wsr.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:49:52.000

默认情况下，XNA 尝试使用其[Intermediate Serializer](http://blogs.msdn.com/b/shawnhar/archive/2008/08/12/everything-you-ever-wanted-to-know-about-intermediateserializer.aspx)将 XML 内容文件处理为对象。这要求 XML 文件遵循特定格式，如该文章中所述。

如果要手动处理 XML 文件，请将构建操作设置为**None**并告诉它**Copy if newer**。这会将 XML 文件直接输出到输出目录，而不对其执行任何内容管道处理。`TitleContainer`然后，您可以使用该类将其作为流打开。

或者，您可以编写自己的内容导入器来处理这种格式的 XML 文件，然后像往常一样通过`ContentManager`. [本文](http://msdn.microsoft.com/en-us/library/bb447754.aspx)介绍了如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:16:12.313

XML 文件的**Build Action**设置为 Sprite Vortex 需要的其他内容（很可能是“内容”）

![在此处输入图像描述](https://i.stack.imgur.com/Xd8vH.png)

右键单击 XML 文件，选择属性，然后选中“构建操作”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:14:57.550

您的屏幕截图显示“缺少 XnaContent 根元素”。XNA 是否有可能需要这个根元素而您的文件没有提供它？

```
<?xml version="1.0" encoding="utf-8" ?>
<XnaContent xmlns:Graphics="Microsoft.Xna.Framework.Content.Pipeline.Graphics" xmlns:Framework="Microsoft.Xna.Framework">

...

</XnaContent> 
```

[http://msdn.microsoft.com/en-us/library/ff604979.aspx](http://msdn.microsoft.com/en-us/library/ff604979.aspx)

# ios - 如何在 iPAD 本身中下载 .ipa 文件作为电子邮件附件

> ID：15925455
> 
> 赞同：3
> 
> 时间：2013-04-10T12:11:19.033
> 
> 标签：ios, ipad, ipa

我想将我的 .ipa 文件作为电子邮件附件发送并使用 Internet（Safari）将其下载到 iPAD 本身以进行测试。我的设备 UDID 已在配置文件中注册。这可能吗？如果可能的话，应该我可以将它安装在我的 iPAD 中或将它移动到 iTunes 中吗？

我对iOS原生应用程序开发非常陌生。请指导我实现这一目标？感谢您提前提供的任何帮助......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:14:28.583

您可以将 .ipa 文件上传到[testflightapp.com](http://testflightapp.com)，也可以使用该网站。

[http://www.diawi.com](http://www.diawi.com)

这两个站点都将帮助您立即获取 IPA 文件。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:15:18.353

是的你可以。

首先在 iTunesconnect 中，您必须注册您的设备。我想你已经做到了。

现在，通过在配置门户中选择您的设备来创建临时分发密钥和证书。现在使用上述临时证书创建 .app 文件。这个应用程序文件你可以邮寄，然后将应用程序文件复制到iTunes。它将自动安装到您的 iPad。

# java - ISO-8859-1 编码和二进制数据保存

> ID：15925458
> 
> 赞同：8
> 
> 时间：2013-04-10T12:11:27.900
> 
> 标签：java, character-encoding, iso-8859-1

我在[评论](https://stackoverflow.com/questions/12913264/eclipse-vs-tomcat-deployment-exported-war-partially-fails-while-the-project#comment22524058_15745520)中读到@Esailija 对我的一个问题的回答

> ISO-8859-1 是唯一完全保留原始二进制数据的编码，具有精确的字节<->代码点匹配

我还在@AaronDigulla 的[回答中读到：](https://stackoverflow.com/a/520954/281545)

> 在 Java 中，ISO-8859-1（又名 ISO-Latin1）是 1:1 映射

我需要对此有所了解。[这将失败（如此处](https://stackoverflow.com/q/14720995/281545)所示）：

```
// \u00F6 is ö
System.out.println(Arrays.toString("\u00F6".getBytes("utf-8")));
// prints [-61, -74]
System.out.println(Arrays.toString("\u00F6".getBytes("ISO-8859-1")));
// prints [-10] 
```

### 问题

1.  我承认我不太明白 -*为什么它没有得到上面代码中的字节*？
2.  最重要的***是，这个***（*字节保留行为* `ISO-8859-1`）在哪里***指定***- 到源的链接，或者 JSL 会很好。它是具有此属性的唯一编码吗？
3.  它与`ISO-8859-1`成为[默认默认值](https://stackoverflow.com/a/12659567/281545)有关吗？

另请参阅[此问题](https://stackoverflow.com/questions/2544965/why-new-stringbytes-enc-getbytesenc-does-not-return-the-original-byte-array)以获取其他字符集的很好的反例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T13:22:54.760

`"\u00F6"`不是字节数组。它是一个包含单个字符的字符串。改为执行以下测试：

```
public static void main(String[] args) throws Exception {
    byte[] b = new byte[] {(byte) 0x00, (byte) 0xf6};
    String s = new String(b, "ISO-8859-1"); // decoding
    byte[] b2 = s.getBytes("ISO-8859-1"); // encoding
    System.out.println("Are the bytes equal : " + Arrays.equals(b, b2)); // true
} 
```

要检查这是否适用于任何字节，只需改进代码循环遍历所有字节：

```
public static void main(String[] args) throws Exception {
    byte[] b = new byte[256];
    for (int i = 0; i < b.length; i++) {
        b[i] = (byte) i;
    }
    String s = new String(b, "ISO-8859-1");
    byte[] b2 = s.getBytes("ISO-8859-1");
    System.out.println("Are the bytes equal : " + Arrays.equals(b, b2));
} 
```

ISO-8859-1 是一种标准编码。所以使用的语言（Java、C# 或其他）并不重要。

这是一个[Wikipedia 参考](http://en.wikipedia.org/wiki/ISO-8859-1)，声称涵盖了每个字节：

> 1992 年，IANA 注册了字符映射 ISO_8859-1:1987，通常以其首选的 MIME 名称 ISO-8859-1（注意 ISO 8859-1 上的额外连字符）作为 ISO 8859-1 的超集而闻名，用于在互联网上使用。此映射将 C0 和 C1 控制字符分配给未分配的代码值**，因此通过每个可能的 8 位值提供 256 个字符。**

（强调我的）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T23:01:24.523

对于保留原始二进制数据的编码，它需要将每个唯一的字节序列映射到唯一的字符序列。

这排除了所有多字节编码（UTF-8/16/32、Shift-Jis、Big5 等），因为并非每个字节序列在它们中都是有效的，因此会解码为一些替换字符（通常是 ? 或 �）。无法从字符串中看出是什么导致了解码后的替换字符。

另一种选择是忽略无效字节，但这也意味着无限不同的字节序列解码为相同的字符串。您可以用字符串中的十六进制编码替换无效字节，例如`"0xFF"`. 无法判断原始字节是否被合法解码，`"0xFF"`因此这也不起作用。

这留下了 8 位编码，其中每个序列只是一个字节。如果存在映射，则单个字节有效。但是许多 8 位编码有漏洞，不能编码 256 个不同的字符。

要保留原始二进制数据，您需要对 256 个不同字符进行编码的 8 位编码。ISO-8859-1 在这方面并不是唯一的。但它的独特之处在于，解码后的代码点的值也是解码后的字节值。

所以你有解码的字符串和编码的字节，那么它总是

```
(byte)str.charAt(i) == bytes[i] 
```

对于任意二进制数据，其中`str`is`new String(bytes, "ISO-8859-1")`和`bytes` is a `byte[]`。

* * *

它也与Java无关。我不知道他的评论是什么意思，这些是字符编码而不是编程语言的属性。

# mysql - 两个日期之间的输出mysql

> ID：15925462
> 
> 赞同：-2
> 
> 时间：2013-04-10T12:11:43.183
> 
> 标签：mysql, sql

我需要这样的MYSQL。

记录 ：

```
start_date |  to_date
2013-01-01 | 2013-12-31
2013-02-01 | 2013-05-04
2013-01-30 | 2013-04-02
2013-04-30 | 2013-07-06
2013-06-30 | 2013-06-09
2013-08-30 | 2013-10-03 
```

我的输入是 from_date 2013-04-01 和 to_date 2013-06-10

我的输出应该是这样的：

```
start_date | to_date
2013-01-01 | 2013-12-31
2013-02-01 | 2013-05-04
2013-01-30 | 2013-04-02
2013-04-30 | 2013-07-06
2013-06-30 | 2013-06-09 
```

任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:18:09.327

似乎您想找到与给定范围重叠的范围；

```
SELECT * FROM date_table 
WHERE start_date < '2013-06-10'
  AND to_date   > '2013-04-01' 
```

也就是说，您将 from_date 与 column 进行比较`to_date`，将 to_date 与 column进行比较`start_date`。

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/eeb58/2)。

# python - 您尚未定义默认连接

> ID：15925463
> 
> 赞同：3
> 
> 时间：2013-04-10T12:11:43.893
> 
> 标签：python, flask, mongoengine

我该如何解决这个错误？

```
File "/usr/local/lib/python2.7/dist-packages/mongoengine/connection.py", line 95, in get_connection
    raise ConnectionError(msg)
mongoengine.connection.ConnectionError: You have not defined a default connection 
```

模型.py：

```
from flask.ext.mongoengine import MongoEngine

db = MongoEngine()

class Currencies(db.Document):
    # meta = {"db_alias": "currencies"}
    name = db.StringField(max_length=40, min_length=3)
    def __unicode__(self):
        return self.name 
```

app.py 中的 MongoEngine 配置：

```
from models import db

app = Flask(__name__)
app.config['MONGODB_SETTINGS'] = {'DB':'testing'}
db.init_app(app) 
```

视图.py：

```
from models import Currencies

print Currencies.objects.find() 
```

Flask-Admin 正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:41:21.837

通过将值为“默认”的“别名”字段添加到配置来解决我的问题：

```
app.config['MONGODB_SETTINGS'] = {'db':'testing', 'alias':'default'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-07T12:06:12.057

您可以通过在配置文件中设置 DEFAULT_CONNECTION_NAME 来解决此问题，如下所示：

`from mongoengine import connect`

`DEFAULT_CONNECTION_NAME = connect('blog')`

# php - Codeigniter 灯箱不显示联系页面

> ID：15925466
> 
> 赞同：0
> 
> 时间：2013-04-10T12:11:53.320
> 
> 标签：php, jquery, codeigniter

我在我的 codeigniter 项目中使用灯箱脚本。我在我的注册页面中输入了以下代码。

```
_BASE_URL="<?php echo base_url();?>";

jQuery(function ($) {

    var contact = {
        message: null,
        init: function () {

            $('#contact-form input.contact, #contact-form a.contact').click(function (e) {

                e.preventDefault();

                // load the contact form using ajax
                $.get(_BASE_URL+"index.php/register/lightcontact", function(data){
                    // create a modal dialog with the data
                    $(data).modal({
                        closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
                        position: ["10px", null],
                        overlayId: 'contact-overlay',
                        containerId: 'contact-container',
                        onOpen: contact.open,
                        onShow: contact.show,
                        onClose: contact.close

                    });
                });
            });
        }, 
```

当点击链接“联系”时，它应该会显示弹出的灯箱。但它没有显示。在查看页面源时，包含文件正确包含。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:59:53.250

在您的注册页面顶部，包括您的联系人视图，如下所示：

```
<?php include("lightcontact.php"); ?> 
```

在 lightcontact.php 中，你的 div 应该看起来像这样：

```
<div id="contactmodal">
...
</div> 
```

现在将您的 JQuery 更改为：

```
$("#contactmodal").modal({
                    closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
                    position: ["10px", null],
                    overlayId: 'contact-overlay',
                    containerId: 'contact-container',
                    onOpen: contact.open,
                    onShow: contact.show,
                    onClose: contact.close

                }); 
```

希望这会有所帮助，不要犹豫再问更多问题

# ruby-on-rails - Rspec - 检查数组是否具有与其他元素相同的元素，无论顺序如何

> ID：15925467
> 
> 赞同：9
> 
> 时间：2013-04-10T12:12:00.767
> 
> 标签：ruby-on-rails, ruby, rspec, ruby-on-rails-2

我不确定它是否是 Rspec 问题，但我只在 Rspec 测试中遇到了这个问题。

我想检查一个数组是否等于另一个数组，无论元素顺序如何：

```
[:b, :a, :c] =?= [:a, :b, :c] 
```

我当前的版本：

```
my_array.length.should == 3
my_array.should include(:a)
my_array.should include(:b)
my_array.should include(:c) 
```

Rspec、ruby 或 Rails 上是否有任何方法可以执行以下操作：

```
my_array.should have_same_elements_than([:a, :b, :c]) 
```

问候

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-10T12:19:07.897

`match_array`RSpec 中有一个匹配器可以做到这一点：

[http://rubydoc.info/github/rspec/rspec-expectations/RSpec/Matchers:match_array](http://rubydoc.info/github/rspec/rspec-expectations/RSpec/Matchers:match_array)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-10T12:54:45.630

您可以使用`=~`运算符：

```
[:b, :a, :c].should =~ [:a, :b, :c] # pass 
```

从[文档](http://rubydoc.info/gems/rspec-expectations/RSpec/Matchers:match_array)：

> 如果实际包含所有预期，则不管顺序如何，则通过。这适用于收藏。传入多个参数，只有在集合中找到所有参数时才会通过。

对于 RSpec 的*期望*语法有`match_array`：

```
expect([:b, :a, :c]).to match_array([:a, :b, :c]) # pass 
```

或者`contain_exactly`如果您要传递单个元素：

```
expect([:b, :a, :c]).to contain_exactly(:a, :b, :c) # pass 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T12:16:40.887

这应该有效。

```
[:b, :a, :c].sort == [:a, :b, :c].sort 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-11T11:37:50.847

我认为所有答案似乎都已经很老了。最新匹配器是`contain_exactly`.

你可以简单地做 -

```
expect([:b, :a, :c]).to contain_exactly(:a, :b, :c) 
```

请注意，`contain_exactly`我们不传递整个数组，而是传递`separate`元素。

参考 - [Rspec 指南](https://relishapp.com/rspec/rspec-expectations/v/3-6/docs/built-in-matchers/contain-exactly-matcher)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T12:14:58.163

这***是***我的***错误***匹配器（感谢@steenslag）：

```
RSpec::Matchers.define :be_same_array_as do |expected_array|
  match do |actual_array|
    (actual_array | expected_array) - (actual_array & expected_array) == []
  end
end 
```

其他解决方案：

*   使用内置匹配器，最佳解决方案

*   使用`Set`：

就像是：

```
require 'set'
RSpec::Matchers.define :be_same_array_as do |expected_array|
  match do |actual_array|
    Set.new(actual_array) == Set.new(expected_array)
  end
end 
```

# facebook - 如何在电子邮件模板中嵌入 facebook like 按钮

> ID：15925470
> 
> 赞同：0
> 
> 时间：2013-04-10T12:12:08.617
> 
> 标签：facebook, facebook-like, html-email

以前，我使用以下 url 嵌入了 facebook like 按钮。

```
<a href=
"http://www.facebook.com/plugin/like.php?href=http%253A%252F%252Fwww.prudentiallocations.com%252Fnews%252Finvestments%252Fhow-to-choose-investment property.aspx&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;color scheme=light&amp;height=427" >Like</a> 
```

但是，现在它不起作用了，谁能告诉我如何在电子邮件中使用类似 facebook 的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:57:45.670

我认为它仍然有效，但您的 href 必须以： http: [//www.facebook.com/plugins/like.php](http://www.facebook.com/plugins/like.php)

你忘记了插件后的 s

# django - django 覆盖 request.build_absolute_uri

> ID：15925476
> 
> 赞同：0
> 
> 时间：2013-04-10T12:12:32.763
> 
> 标签：django

我有一个 EC2 站点，它同时具有弹性 ip 和域名。有些人使用弹性ip访问网站，有些人使用域名。

我使用 request.build_absolute_uri() 来构造指向站点中生成的页面的链接，但是，我希望它始终返回带有域名而不是 ip 的链接。

有没有办法覆盖它或者我应该只实现类似于 build_absolute_uri 的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:26:30.697

`request.build_abosolute_uri`依赖`request.get_host()`，所以它需要域名或ip来自`request.META`。

您可以在中间件或其他地方重写这些值`request.META`，但我认为这不是一个好的解决方案。最好创建一个自定义函数，该函数将构建一个绝对 uri，但使用域名作为参数。

# ios - 如何在没有任何图标的情况下使用 NSAlert？

> ID：15925478
> 
> 赞同：4
> 
> 时间：2013-04-10T12:12:33.697
> 
> 标签：ios, macos, cocoa, nsalert

我想在`NSAlert`, , ?`beginSheetModalForWindow``NSWarningAlertStyle``NSInformationalAlertStyle``NSCriticalAlertStyle`

此外，如果我使用功能性 API，如`NSBeginAlertSheet`, `NSBeginCriticalAlertSheet`，如何从中删除图标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:22:42.650

**你可以做一些hack。**

![在此处输入图像描述](https://i.stack.imgur.com/WD8nJ.png)

这里使用了[透明图片（点击下载）](http://www.keepandshare.com/doc/6143821/transparent-image-2k?da=y)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:16:49.077

你不能！NSAlert 始终显示应用程序图标：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAlert_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAlert_Class/Reference/Reference.html)

> 图标：警报图标。nil 恢复应用程序图标。
> 
> 讨论：默认情况下，图像是应用程序图标，通过应用程序包的 NSApplicationIcon 属性访问。

考虑子类 NSAlert 或创建自己的对话框。

# c# - 只需单击即可获取列表视图的行值

> ID：15925480
> 
> 赞同：1
> 
> 时间：2013-04-10T12:12:40.837
> 
> 标签：c#, asp.net

有没有人可以给我关于如何在单击列表视图时获取行值的确切代码。我不想将我的列表视图控件与更新或删除按钮等按钮放在一起。我想要的只是一个带有显示数据的普通列表视图控件，当您单击任何行时，它将显示在我的文本框上。我已经在我的 winform 应用程序中完成了此操作，我也想在我的 asp.net 应用程序中使用它。我不确定我可以在 asp.net 中使用什么事件处理程序来通过单击行来获取 listview 控件的值，无论是它`ListView1_SelectedIndexChanged`还是`ListView1_ItemCommand` 因为在 winform 应用程序中你甚至可以直接使用`ListView1_Click()`事件处理程序只需将其属性设置为 fullrowselect 和 mousehover。我希望我在 asp.net 中的列表视图的行为方式与单击行之前的行为完全相同这是正确的，因为它什么都不做。下面是我的代码。请指教。谢谢。

```
protected void ListView1_SelectedIndexChanged(object sender, EventArgs e)
{

    TextBox1.Text = ListView1.Items[0].ToString();
    TextBox2.Text = ListView1.Items[1].ToString();
    TextBox3.Text = ListView1.Items[2].ToString();
    TextBox4.Text = ListView1.Items[3].ToString();
    TextBox5.Text = ListView1.Items[4].ToString();
    TextBox6.Text = ListView1.Items[5].ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:27:55.663

```
protected void ListView1_SelectedIndexChanged(object sender, EventArgs e)
{

    TextBox1.Text = ListView1.SelectedItems[0].ExtractValues(values);
    TextBox2.Text = ListView1.SelectedItems[1].ExtractValues(values);

} 
```

试试这个代码......

# java - 为什么 Runtime.getRuntime().exec 在 Tomcat 中以 root 身份分叉一个进程？

> ID：15925481
> 
> 赞同：2
> 
> 时间：2013-04-10T12:12:43.873
> 
> 标签：java, python, tomcat, debian, exec

我正在使用 Runtime.getRuntime().exec(...) 从 Tomcat webapp 中执行 python 脚本。当我在我的开发环境中时一切都很好（Eclipse 通过 Sysdeo-Plugin 运行我的本地 Tomcat（位于 /home/me/opt/tomcat））。当我在生产环境（= Debian Squeeze）中运行我的 web 应用程序时会出现此问题。

我正在使用官方 debian 软件包中的 tomcat6。它通过 /etc/init.d 使用用户“tomcat6”自动启动（通过“ps aux | grep tomcat6”验证）。我正在执行我的简单 python 脚本：

```
Process p = Runtime.getRuntime().exec("python /home/me/exec-test.py")
p.waitFor();
//read the stdout and stderr 
```

python脚本很简单：

```
#!/usr/bin/python
import sys, os, getpass

def main(argv):
    print "Working dir: " +os.getcwd()
    userShell = os.environ.get('SHELL')
    print "$SHELL set to: " +userShell
    print "Executing as user: "+getpass.getuser()

if __name__ == "__main__":
    main(sys.argv[1:]) 
```

如果从 eclipse 运行 tomcat 的输出是：

```
Working dir: /home/me/opt/tomcat
$SHELL set to: /bin/bash
Executing as user: me 
```

使用 debian 软件包中的 tomcat6 运行时：

```
Working dir: /var/lib/tomcat6
$SHELL set to: /bin/bash
Executing as user: root 
```

为什么 python 脚本的分叉执行以“root”身份运行？拥有tomcat6进程（=运行JVM）的用户不应该是同一个用户吗？我是否遗漏了什么，或者获取进程用户的 python 调用不正确？

我也尝试过使用[Apache Commons Exec](http://commons.apache.org/proper/commons-exec/)获得相同的结果。

结果是，当我使用调用本地应用程序（/usr/local/bin/local-app）的更复杂的 python 脚本时，它在生产环境中失败。它以某种方式无法访问本地应用程序。同样，在我的开发环境中一切正常。这与我的观察有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:27:21.640

`getpass.getuser()`在尝试其他任何事情之前首先查看环境变量`'LOGNAME', 'USER', 'LNAME', 'USERNAME'`（按该顺序），也许其中一个设置不正确。

尝试使用`os.getuid()`or `pwd.getpwuid(os.getuid())`- 这应该会给你另一个结果。

我发现该进程不太可能以某种方式获得 root 权限。

# c++ - 如何将多个文件描述符合并为一个？

> ID：15925483
> 
> 赞同：0
> 
> 时间：2013-04-10T12:12:45.143
> 
> 标签：c++, c, file, parent-child

在我的 C++ 应用程序中，我使用一些调用 3rd 方库来创建一个新的子进程。我将 2 个变量传递给它，它们由子进程的指针和处理程序`FILE**`填充。但实际上我不需要在单独的线程中分别读取它们，我只需要将它们合并到一个线程中并从那里读取。我该怎么做（Linux和Windows）？`stdout``stderr`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:07:21.340

使用`dup2`（[手册页](http://linux.die.net/man/2/dup2)）。

```
#include <stdio.h>
#include <unistd.h>

dup2(fileno(stdout), fileno(stderr)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:16:00.803

文件描述符由系统链接到物理文件。将两个文件描述符合并为一个将导致仅获得一个文件。

如果您总是将这两个文件描述符放在一起，则可以简单地创建一个结构，该结构将仅在一个变量指针中处理这两个文件描述符。

# android - appWidgetManager.updateAppWidget 没有效果

> ID：15925484
> 
> 赞同：1
> 
> 时间：2013-04-10T12:12:46.643
> 
> 标签：android, widget

我只是想在 Jelly Bean 中调整大小时更新我的​​小部件。

所以我使用这段代码：

```
@TargetApi(Build.VERSION_CODES.JELLY_BEAN)
@Override
public void onAppWidgetOptionsChanged(Context context,
        AppWidgetManager appWidgetManager, int appWidgetId,
        Bundle newOptions) {
    Log.d("DEBUG_TAG", "I want to update Widget: "+appWidgetId);
    appWidgetManager.updateAppWidget(appWidgetId,
            getRemoteViews(context, minWidth, minHeight));
    Log.d("DEBUG_TAG", "Widget "+appWidgetId+"should have been updated");
    super.onAppWidgetOptionsChanged(context, appWidgetManager, appWidgetId,
            newOptions);
} 
```

不幸的是，什么也没发生。

我的 logcat 清楚地说应该更新小部件，正如预期的那样，但永远不会调用 onUpdate！

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    final int N = appWidgetIds.length;
    Log.i("", "***Update "+N+" Widget*** ");
    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];
        Log.i("", "***Widget*** "+appWidgetId ); 
```

但什么也没有发生。

我检查了当我创建我的小部件时，ID 是否正确（在我的情况下，id 是 29） 29 在调用 onAppWidgetOptionsChanged 时显示在日志中 29 在创建小部件时显示在日志中

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:48:34.773

关于 Commonsware 的答案，我可能做错了什么，但我需要在 onAppWidgetOptionsChanged 方法中手动调用 onUpdate 。

updateAppWidget 完全没有效果（我仔细检查了小部件 ID 和远程视图）

我很高兴听到更好的解决方案，但这是我可以让小部件刷新的唯一方法！

```
 int[] ids = {appWidgetId};
    onUpdate(context, AppWidgetManager.getInstance(context), ids); 
```

# ios - 如何从格式文件在单元格表视图中添加图像

> ID：15925485
> 
> 赞同：0
> 
> 时间：2013-04-10T12:12:47.593
> 
> 标签：ios, objective-c, uitableview

我创建了具有许多单元格的表格视图。

我想为格式文件中此图像定义的任何单元格设置图像。（例如，我想为许多格式文件添加许多图像（例如，当我的文件是 .mp4 时使用 mp4 等图像））

我怎样才能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:30:53.217

试试看....
Crete 图像数组并使用下面的代码。

```
cell.imageView.image =  [UIImage imageNamed:[myImageArray objectAtIndex:indexPath.row]]; 
```

它是根据 indexPath.row 在你的单元格中设置图像
希望这有帮助

# c# - 如何将使用母版页的网页转换为没有母版页的网页

> ID：15925487
> 
> 赞同：0
> 
> 时间：2013-04-10T12:12:49.643
> 
> 标签：c#, asp.net, master-pages

我有一个使用母版页的网页 1 号，现在我想通过另一个页号 2 上的链接显示它，它也使用相同的母版页。我想从母版页中删除第一名。我是否必须为此创建一个新网页，或者我可以更改已经存在的页面，如果可以的话如何？什么是最简单和最有效的方法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:21:43.337

那么在这种情况下，最简单的事情就是创建一个没有链接和导航的空白母版页。在初始化阶段的第二页中，您可以将母版页设置为

```
void Page_PreInit(Object sender, EventArgs e)
{
this.MasterPageFile = "~/NewMaster.master";
} 
```

因为 newmaster 是空白的，你不会得到任何链接和其他垃圾。只需在 preinit 事件中创建您的逻辑以何时更改主页面（即当页面在 i 框架中时，您可以通过查询字符串调用它），并且此查询字符串可用于检查它是否在 iframe 中。如果它在 iframe 中，您可以设置空白母版页，否则保留它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:28:36.457

如果您想制作第 1 页，使其不再使用 MasterPage，请对第 1 页执行以下操作：

*   `MasterPageFile`从其删除属性`<@ Page ...>`指令中
*   删除可能（可选）`<%@ MasterType ... %>`指令。
*   删除任何`<asp:Content></asp:content>`标签（但可能不是他们的，呃，内容）。
*   添加一个`<!DOCTYPE html>`标签
*   添加`<html>`,`<body>`和`<form runat="server">`标签

# android - 移除 ActionBar 图标 API < 11

> ID：15925488
> 
> 赞同：1
> 
> 时间：2013-04-10T12:12:51.593
> 
> 标签：android, icons, android-actionbar, title

我正在开发一个应与上述 8 中的 API 兼容的应用程序。对于 API>=11 的版本，我在 ActionBar 标题中显示一些文本，而对于 API<11，文本显示在 TitleBar 中。这是由 Android 自动处理的。

如果 API 是 11 或更高版本，我想去掉 ActionBar 图标，以便为文本腾出更多空间。但是，Eclipse 不会让我打电话`getActionBar()`说我的最低 API (8) 太低。

我怎样才能绕过它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T12:14:00.817

您可以将所有 ActionBar 调用包装在：

```
if (android.os.Build.VERSION.SDK_INT>=android.os.Build.VERSION_CODES.HONEYCOMB) {
  // call something for API Level 11+
} 
```

您收到的错误可能是 Lint 警告，您应该能够进入首选项并将其级别降低为警告，以便您的代码仍然可以编译。

此外，您可以考虑使用[ActionBarSherlock](http://actionbarsherlock.com/)在低于 API 11 的设备上获取 ActionBar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:24:27.360

您可以通过以下方式查看您的安卓版本

```
 if (android.os.Build.VERSION.SDK_INT < 11) 
 {
      //your code
 } 
```

但我实际上建议您使用谷歌本身的这个[android 支持包](http://developer.android.com/tools/extras/support-library.html)来支持较低版本的功能。一探究竟

# apache - htaccess mod重写文件夹隐藏

> ID：15925491
> 
> 赞同：0
> 
> 时间：2013-04-10T12:13:04.847
> 
> 标签：apache, .htaccess, mod-rewrite, directory

我一直在努力处理我的 htaccess 文件。我有以下 URL：

[http://www.mysite.com/folder1/system/folder2/file.php](http://www.mysite.com/folder1/system/folder2/file.php)

我设法隐藏了 .php 扩展名，但现在我试图隐藏 /system/。我现在有以下内容：（[Mod 重写隐藏文件夹](https://stackoverflow.com/questions/2618326/mod-rewrite-hide-folder)）

```
RewriteEngine on 
RewriteRule ^/(.*)$   /system/$1 
```

然而这行不通。

谢谢。

编辑：

通过测试所有没有工作的解决方案，我有一种强烈的感觉，我的 .htaccess 位于错误的目录中。目前.htaccess在folder1目录中..不在root中，不在系统中，不在folder2中..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:18:15.140

试试这个 htaccess 代码

```
RewriteEngine on
RewriteBase /folder1
RewriteRule ^folder2/(.*).php$ system/folder2/$1.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:33:55.457

请记住，您需要将`.htaccess`-file 放在 folder1-directory 中！我认为您可能已将其放置在您网站的根目录中。

另外，请注意不要使用前导 /。

尝试这个：

```
RewriteEngine on
RewriteRule ^/(.*) system/$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:18:18.347

尝试这个

```
RewriteEngine on

RewriteRule ^/([^/]+)/(.*)$   $1/system/$2 [QSA,L] 
```

编辑：

```
RewriteCond %{REQUEST_URI} ^/folder1/system/(.*)$ 
RewriteRule ^ - [S=1,L]
RewriteCond %{REQUEST_URI} ^/folder1/(.*)$ 
RewriteRule ^ /folder1/system/%1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:18:46.543

用这个替换你的规则：

```
RewriteCond %{REQUEST_URI} !/system/ [NC]
RewriteRule ^([^/]+)/(.*)$ /$1/system/$2 [L] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:20:14.373

```
RewriteEngine On
RewriteRule ^(.*)$ %{REQUEST_URI}/system/$1 [R,NC,L] 
```

尝试这个。

# c# - 使用 Textwriter 从 ComboBox 编写 URL

> ID：15925494
> 
> 赞同：0
> 
> 时间：2013-04-10T12:13:21.520
> 
> 标签：c#, file, combobox, outlook, save

我目前正在尝试将输入`ComboBox`（从 Outlook 插件）中的 URL 写入 txt 文件，但作为我的初学者，我真的不知道如何去做。

无论如何，我没有任何可以帮助您的代码片段，所以我想我会保持简单，向您询问我可以在这件事上使用的一般方法。感谢您的所有帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:21:21.203

这是你想要的 ？

```
string path=@"C:\Hello.txt";
TextWriter tsw = new StreamWriter(path,true);

    //Writing selected item of combobox to the file.
    tsw.WriteLine(comboBox1.Items[this.comboBox1.SelectedIndex].ToString());

    //Close the file.
    tsw.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:24:26.587

尝试这个：

将组合项目添加到 a`List`并将它们写入文件使用`File`

```
List<string> lst = new List<string>();
foreach (var text in comboBox1.Items)
{
     lst.Add((string)text);
}
File.WriteAllLines(@"c:\file.txt", lst.ToArray()); 
```

使用`TextWriter`

```
 using (TextWriter TW = new StreamWriter(@"c:\file.txt", true))
            {
                foreach (var text in comboBox1.Items)
                {
                    TW.WriteLine();
                }
            } 
```

# salesforce - Salesforce SOQL 查询返回所有值，包括 NULL

> ID：15925496
> 
> 赞同：0
> 
> 时间：2013-04-10T12:13:27.107
> 
> 标签：salesforce, soql

我有一个简单的 SOQL 查询：

```
选择计数 (ID)、CampaignId、Campaign.Name
来自活动成员
其中 CampaignId 在 ('701U0000000MVoQ', '701U0000000MLFR', '701U0000000MVoL')
按 CampaignId、Campaign.Name 分组

```

查询结果带回 2 条记录，因为其中两个活动成员列表中有联系人。

我还想带回计数为 0 的第三条记录。在 SOQL 中有没有办法做到这一点，我不相信有可以在选择上使用的 ISNULL() 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:46:31.757

您需要聚合查询的任何特殊原因？一种方法是使用关系，如下所示：

```
SELECT Id, Name, (SELECT Id FROM CampaignMembers)
FROM Campaign
WHERE Id IN ('701U0000000MVoQ', '701U0000000MLFR', '701U0000000MVoL') 
```

稍后在代码中可以像这样访问它

```
List<Campaign> campaigns = [Id, Name, (SELECT Id FROM CampaignMembers)
FROM Campaign
WHERE Id IN ('701U0000000MVoQ', '701U0000000MLFR', '701U0000000MVoL')];

for(Campaign c : campaigns){
    System.debug(c.Name + ': ' + c.CampaignMembers.size());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:31:09.830

您必须在您的 soql 查询中添加一个名为“Having”的附加部分。拥有就像一个 Where 子句

```
select Count(ID), CampaignId, Campaign.Name 
from CampaignMember 
where CampaignId in ('701U0000000MVoQ', '701U0000000MLFR', '701U0000000MVoL')
group by CampaignId, Campaign.Name 
HAVING COUNT(ID) >0 
```

拥有类似于 Where 子句，但 HAVING 子句仅适用于也出现在 GROUP BY 中的列。

# database - 具有 15m 行性能的 SQL 表

> ID：15925497
> 
> 赞同：3
> 
> 时间：2013-04-10T12:13:28.317
> 
> 标签：database, sql-server-2008-r2

我有一个用于管理患者文件夹的多层网络应用程序。每个文件夹都有许多模块。我想要做的是跟踪每个模块、每个患者、每个用户的变化。

所以我要为此设计一个数据库表，我估计它会升级到 1500 万行。该表将包含一个主键（int），它将是 id，三个外键和模块的 id，患者的文件夹和用户（都是 int），以及一个具有 0/1 值的简单字段.

然后，登录的用户在应用程序中导航时，将经常收到有关文件夹和模块上某些颜色代码的任何更新的通知。因此，我将经常查询（使用简单的选择查询）数据库，并且我希望速度非常快，以使用户体验保持标准（响应时间~1 秒或更低）。

我需要对性能有任何顾虑吗？我在具有 4gb RAM 的四核 XEON 上使用 MS SQL Server 2008 R2。

提前致谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:47:07.027

无论如何，15M 行表的扫描通常不会超过一秒钟。因此，如果您的问题是关于单个独立请求，我认为您在这种情况下不会遇到问题。

但是为了将来的需要和更好的性能，您可以考虑**在 "fk_user_id"、"fk_mod_id"、"fk_folder_id" 列上添加非聚集索引**。我想它会显着提高 select 语句的性能（以降低更新性能为代价）。

# c# - 如何在 C# 中使用正则表达式删除 < 和 > 之间的字符？

> ID：15925498
> 
> 赞同：5
> 
> 时间：2013-04-10T12:13:30.117
> 
> 标签：c#, regex, string

我有一个字符串`str="<u>rag</u>"`。现在，我只想获取字符串`"rag"`。如何使用正则表达式获得它？

我的代码在这里..

我得到了输出=“”

提前致谢..

C#代码：

```
string input="<u>ragu</u>";
string regex = "(\\<.*\\>)";
string output = Regex.Replace(input, regex, ""); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:16:04.013

```
const string HTML_TAG_PATTERN = "<.*?>";
Regex.Replace (str, HTML_TAG_PATTERN, string.Empty); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T12:19:56.407

`regex`不推荐用于解析html

`regex`用于定期出现的模式。`html`它的格式不规则（除了`xhtml`）。例如`html`，即使您**没有**`closing tag`! 这可能会破坏您的代码，文件也是有效的。

使用像[htmlagilitypack这样的 html 解析器](http://html-agility-pack.net/?z=codeplex)

* * *

**警告**{不要在你的代码中尝试这个}

解决您的正则表达式问题！

`<.*>`替换`<`后跟 0 到多个字符（即`u>rag</u`）直到**最后**>

你应该用这个正则表达式替换它

```
<.*?> 
```

`.*`是**贪婪**的，即它会吃尽可能多的字符

`.*?`是**懒惰**的，即它会吃尽可能少的字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:16:59.947

你当然可以：

```
 string input = "<u>ragu</u>";
    string regex = "(\\<[/]?[a-z]\\>)";
    string output = Regex.Replace(input, regex, ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:17:25.483

您不需要为此使用正则表达式。

```
string input = "<u>rag</u>".Replace("<u>", "").Replace("</u>", "");
Console.WriteLine(input); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:18:07.140

你的代码几乎是正确的，一个小的修改使它工作：

```
 string input = "<u>ragu</u>";
 string regex = @"<.*?\>";
 string output = Regex.Replace(input, regex, string.empty); 
```

输出是'ragu'。

**编辑**：这个解决方案可能不是最好的。来自用户 the-land-of-devils-srilanka 的有趣评论：不要使用正则表达式来解析 HTML。实际上，另请参阅[RegEx 匹配开放标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

# javascript - Typescript 中 this 的子范围问题

> ID：15925500
> 
> 赞同：3
> 
> 时间：2013-04-10T12:13:48.400
> 
> 标签：javascript, knockout.js, this, typescript, scoping

这与我迄今为止读过的所有其他范围界定问题几乎相同，除了一个细微的差异，这使得提出这个问题具有相关性（imo *）*。`this`

现在最初我的问题是`this`使用 Knockout 和 Typescript 确定范围，因此给出以下内容：

```
class ViewModel
{
    public SomeObservableArray = new ko.observableArray();

    public AddToTheObservableArray(someJsonData: any) 
    {
        this.SomeObservableArray.push(new SomePojo(someJsonData));
    }
} 
```

所以`this`上面代码中的那一点会爆炸，因为 Typescript 让你认为那`this`是类实例，但实际上它是因为 ajax 回调或视图元素，无论覆盖`this`关键字的场景如何。

因此，为了解决这个问题，大多数解决方案是将代码移到类的构造函数中，我个人觉得这很可怕，但是考虑到我从使用 TypeScript 获得的其他好处，这种少量的恐惧是可以接受的。所以我们都在同一个页面上，下面的代码解决了上述问题：

```
class ViewModel
{
    public SomeObservableArray = new ko.observableArray();
    public AddToTheObservableArray = (someJsonData: any) => Void;

    constructor
    {
        this.AddToTheObservableArray = (someJsonData: any) => {
            this.SomeObservableArray.push(new SomePojo(someJsonData));
        };
    }
} 
```

我只是在脑海中写下这个示例代码，所以我为任何拼写错误等道歉，但它突出了面临的常见问题和常见的解决方案/解决方法。

**现在！**我遇到的问题是从这里开始的下一步，我有这样的代码：

```
class ViewModel
{
    public SomeObservableArray = new ko.observableArray();
    public AddToTheObservableArray = (someJsonData: any) => Void;

    constructor
    {
        this.PopulateObservableArray = (someJsonArrayData: any) => {
            this.SomeObservableArray.removeAll();
            someJsonArrayData.forEach(function(someJsonData) {
                this.SomeObservableArray.push(new SomePojo(someJsonData));
            });
        };
    }
} 
```

输出的代码如下所示：

```
var ViewModel = (function(){
    function ViewModel(){
        var _this = this;

        this.SomeObservableArray = new ko.observableArray();

        this.AddMultipleEntitiesToObservableArray = function(someJsonArrayData) {
            _this.SomeObservableArray.removeAll();
            someJsonArrayData.forEach(function(someJsonData) {
                this.SomeObservableArray.push(new SomePojo(someJsonData));
            });
        }
    };
    return ViewModel;
})(); 
```

我再次为任何拼写错误道歉，因为我只是简化了较大的项目输出，但是这里主要看到的是 forEach 方法子`this`仍然存在，所以我得到了错误`this.SomeObservableArray is undefined`。

我确信一种可能的解决方案是将 foreach 提取出来并使其成为自己的方法，但是这感觉就像在 blutack 上粘贴纤维胶带，所以我想知道是否有一些更优雅的解决方案或我的一些错误行为可以改变至少不必让它更难读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T12:32:40.573

是的，它实际上很容易。只需在您希望将范围限定为更高函数范围的**任何**方法上使用 lambda 表达式。在您的情况下，您需要将示例重写为：

```
class ViewModel
{
    public SomeObservableArray = new ko.observableArray();
    public AddToTheObservableArray = (someJsonData: any) => Void;

    constructor()
    {
        this.PopulateObservableArray = (someJsonArrayData: any) => {
            this.SomeObservableArray.removeAll();
            someJsonArrayData.forEach((someJsonData) => {
                this.SomeObservableArray.push(new SomePojo(someJsonData));
            });
        };
    }
} 
```

*PS：最好不要在 a for each 中操作可观察数组，因为每次更改都会通知该数组的订阅者。只需将您的数据推送到一个临时数组，然后将此数组设置为您的可观察数组的值（只是我的 2cts。）*

# java - 如何在以下代码的日志中附加一些字符串

> ID：15925502
> 
> 赞同：0
> 
> 时间：2013-04-10T12:13:50.590
> 
> 标签：java, logging, buffer

我想在java代码中记录。而且，整个过程需要几个小时才能完成。但是我的代码在执行结束时记录了所有日志，因为缓冲区在最后关闭。

有什么方法可以附加到日志文件中吗？

请查看我的代码，并提出一些必要的更改。提前致谢。

**我的代码**，

```
public class test {

    public static void func(String url1, String url2, BufferedWriter bw) throws  InterruptedException, IOException {
        long loading_time = 10878;
        long parsing_time = 120;
        long processing_time = 329;
        Thread.sleep(100000000);  // Here is some process that performs recursively
        bw.write( url1 + "\n" + url2 + "\n"+ ((double)loading_time)/((double)1000)+ " seconds   " + ((double)parsing_time)/((double)1000) +  " seconds   "  + ((double)processing_time)/((double)1000) + " seconds\n\n\n\n" );
    }

    public static void main(String[] args) throws IOException, InterruptedException{
        try {
            FileWriter fw = new FileWriter("C:\\Users\\jhamb\\Desktop\\log.txt");
            BufferedWriter bw = new BufferedWriter(fw);
            for(int i = 0; i < 5; i++) { func("hitesh", "jhamb", bw);  }
            bw.close();
        } catch (Exception e) {
            System.out.println("Sorry some problem");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:09:30.503

`log4j`首先在 POM 中添加对以下行的副本的依赖项，

```
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>
</dependency> 
```

然后，制作一个文件`log.properties`并将这些行复制到该位置`<PROJECT FOLDER>\src\main\resources\`

```
# Define the root logger with appender file
log4j.rootLogger = INFO, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=C:/Users/jhamb/Desktop/log.txt

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%m%n 
```

然后，在主类中添加一行，

```
static Logger log = Logger.getLogger( Scroll_down.class.getName() ); 
```

在这里，Scroll_down 是我项目中的类名。

现在您可以使用

`log.info( <PUT STRING HERE> )`

在我上面的例子中，

```
log.info( url1 + "\n" + url2 + "\n"+ ((double)loading_time)/((double)1000)+ " seconds   " + ((double)parsing_time)/((double)1000) +  " seconds   "  + ((double)processing_time)/((double)1000) + " seconds\n\n\n\n" ); 
```

这些是我为满足上述问题的要求而遵循的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:20:41.387

您应该使用日志框架来记录而不是编写自己的文件 看看[SL4J](http://www.slf4j.org/)

这是来自他们网站的 Hello World 示例：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class HelloWorld {
  public static void main(String[] args) {
    Logger logger = LoggerFactory.getLogger(HelloWorld.class);
    logger.info("Hello World");
  }
} 
```

无论你在哪里调用 bw.write()，都可以根据具体情况替换为 logger.info()、logger.warn() logger.error() 等。

这将输出到控制台。您将不得不使用配置来表明您需要这是一个文件。我把它留给你:-)

编辑：

你的代码，一旦你使用 sl4j 将是：

```
public class Test {
    Logger logger = LoggerFactory.getLogger(Test.class);
    public static void func(String url1, String url2, BufferedWriter bw) throws  InterruptedException, IOException {
        //your code
        logger.info(" {} \n {} \n  {} seconds   {} seconds   {}  seconds\n\n\n\n",url1,url2 ,((double)loading_time)/((double)1000),((double)parsing_time)/((double)1000), ((double)processing_time)/((double)1000) );

    }

    public static void main(String[] args) throws IOException, InterruptedException{
        try {
               //
        } catch (Exception e) {
                logger.error("Sorry some problem",e);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:23:47.047

我建议您使用阻塞队列来存储您的日志任务。只要您有要记录的内容，就创建一个日志对象并存储在队列中。（简单的字符串也足够了）

一个单独的线程应该同时处理您的队列。

有关实施细节，请查看：[http ://www.javamex.com/tutorials/blockingqueue_example.shtml](http://www.javamex.com/tutorials/blockingqueue_example.shtml)

无论您的过程（递归或其他方式）运行多长时间，您的队列都将同时处理，您无需等待整个过程结束即可开始记录。

# c++ - Qt C++ 中对库方法的未定义引用

> ID：15925503
> 
> 赞同：1
> 
> 时间：2013-04-10T12:13:59.543
> 
> 标签：c++, c, qt, linker

我正在尝试在 C++ 程序中使用 C 库。我想将库 libcoap.a 链接到我的程序。我已经在 Qt 中制作了一个庞大的程序，因此无法通过使用 make 而不是 qmake 来解决。

作为一个简单的例子，我制作了以下代码。

连接.h：

```
#include <string>
#include "coap.h"
void sendData(std::string); 
```

连接.cpp：

```
#include "connection.h"
#include "coap.h"
coap_uri_t uri;

void sendData(std::string ip){
    coap_split_uri((unsigned char *)ip.c_str(), strlen(ip.c_str()), &uri );
} 
```

主.cpp：

```
#include "connection.h"

using namespace std;

int main()
{
    sendData("[aaaa::c30c:0:0:2]/sen/lt");
    return 0;
} 
```

coaptester.pro：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

unix:!macx:!symbian: LIBS += -L$$PWD/../commTest/commTest/libcoap-4.0.1/ -lcoap

INCLUDEPATH += $$PWD/../commTest/commTest/libcoap-4.0.1
DEPENDPATH += $$PWD/../commTest/commTest/libcoap-4.0.1

unix:!macx:!symbian: PRE_TARGETDEPS += $$PWD/../commTest/commTest/libcoap-4.0.1/libcoap.a

SOURCES += main.cpp \
    connection.cpp
HEADERS += \
    connection.h 
```

我总是遇到同样的错误：

```
undefined reference to `coap_split_uri(unsigned char*, unsigned int, coap_uri_t*)'
collect2: ld returned 1 exit status 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:32:04.707

尝试使用（在connection.h中）

```
extern "C" {
    #include "coap.h"
} 
```

此外，包含`coap.h` in`connection.h`和 in是多余的`connection.cpp`（如果`coap.h`没有包含检查，则可执行文件的维度将无用地更大），因此将其从 .cpp 中删除。

# .net - 如何删除 XmlElement 的所有子节点，但保留所有属性？

> ID：15925505
> 
> 赞同：18
> 
> 时间：2013-04-10T12:14:03.613
> 
> 标签：.net, xmldocument, xmldom

如何删除 an 的所有子节点`XmlElement`，但保留所有属性？

请注意，[XmlElement.RemoveAll](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.removeall.aspx)也会删除所有属性。什么是删除所有子节点的干净、优雅且性能良好的方法？换句话说，这里的最佳实践是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-03-27T09:24:45.050

对于真正有效的解决方案：

```
e.IsEmpty = true; 
```

是您最快和最简单的选择。它完全符合您的要求：所有内部文本和嵌套元素都被丢弃，而属性被保留。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-05T13:04:05.550

这个解决方案不会更简单吗？

```
while(e.FirstChild != null)
    e.RemoveChild(e.FirstChild); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T12:32:59.797

**选项 1**`elem.InnerXml = "";`如果需要， 请使用完整的工作代码：

```
 var doc = new XmlDocument();
    doc.LoadXml("<x a1='a' a2='b'><child1/><child2/></x>");
    var elem = doc.DocumentElement;

    Console.WriteLine(elem.OuterXml);
    Console.WriteLine("HasAttributes " + elem.HasAttributes);
    Console.WriteLine("HasChildNodes " + elem.HasChildNodes);

    elem.InnerXml = "";
    Console.WriteLine(elem.OuterXml);
    Console.WriteLine("HasAttributes " + elem.HasAttributes);
    Console.WriteLine("HasChildNodes " + elem.HasChildNodes);
    Console.ReadLine(); 
```

InnerXml 所做的详细信息：

```
 public override string InnerXml
    {
      get
      {
        return base.InnerXml;
      }
      set
      {
        this.RemoveAllChildren();
        new XmlLoader().LoadInnerXmlElement(this, value);
      }
    } 
```

LoadInnerXmlElement 可能存在性能问题，但因为我们有空字符串，所以它不应该很大，因为大多数时间会采用这种方法：

```
internal XmlNamespaceManager ParsePartialContent(XmlNode parentNode, string innerxmltext, XmlNodeType nt)
    {
      this.doc = parentNode.OwnerDocument;
      XmlParserContext context = this.GetContext(parentNode);
      this.reader = this.CreateInnerXmlReader(innerxmltext, nt, context, this.doc);
      try
      {
        this.preserveWhitespace = true;
        bool isLoading = this.doc.IsLoading;
        this.doc.IsLoading = true;
        if (nt == XmlNodeType.Entity)
        {
          XmlNode newChild;
          while (this.reader.Read() && (newChild = this.LoadNodeDirect()) != null)
            parentNode.AppendChildForLoad(newChild, this.doc);
        }
        else
        {
          XmlNode newChild;
          while (this.reader.Read() && (newChild = this.LoadNode(true)) != null)
            parentNode.AppendChildForLoad(newChild, this.doc);
        }
        this.doc.IsLoading = isLoading;
      }
      finally
      {
        this.reader.Close();
      }
      return context.NamespaceManager;
    } 
```

**选项 2** 以下代码：

```
 XmlNode todelete = elem.FirstChild;
    while (todelete != null)
    {
        elem.RemoveChild(elem.FirstChild);
        todelete = elem.FirstChild;
    } 
```

关于性能。让我们看看 XmlElement.RemoveAll() 它是：

```
public override void RemoveAll()
{
  base.RemoveAll();
  this.RemoveAllAttributes();
} 
```

其中 base.RemoveAll() 正是：

```
[TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
public virtual void RemoveAll()
{
  XmlNode oldChild = this.FirstChild;
  for (; oldChild != null; {
    XmlNode nextSibling;
    oldChild = nextSibling;
  }
  )
  {
    nextSibling = oldChild.NextSibling;
    this.RemoveChild(oldChild);
  }
} 
```

所以和我上面写的一样

# c# - 抛出异常：未为命令对象设置 C# 命令文本

> ID：15925508
> 
> 赞同：1
> 
> 时间：2013-04-10T12:14:07.007
> 
> 标签：c#, runtime-error

我是 C# 的新手，只学了几个星期。我正在编写一个带有 Windows 窗体的应用程序，后面是 Access 数据库。我希望将用户插入的详细信息添加到访问数据库中。我已经浏览了其他论坛（包括在 stackoverflow 上）以达到这一点，但我一直在运行时抛出一个错误，指出“没有为命令对象设置命令文本”（我突出显示了它出现在下面的行）我不明白，也无法摆脱。任何帮助将非常感激。谢谢K

```
private void btnOkay_Click(object sender, EventArgs e)
        {
            string connectionString = 
                "provider=Microsoft.ACE.Oledb.12.0;" +
                "data source=C:\\Users\\Documents\\StudentRegistrationDatabase.accdb";

        OleDbConnection myOleDbConnection = new OleDbConnection(connectionString);
        OleDbCommand myOleDbCommand = myOleDbConnection.CreateCommand();

        string strSql = @"INSERT INTO StudentDetails ([Forename],[Surname],[CourseName],[DOB],)" + 

            "VALUES('"+txtFirstName.Text +"','" +txtLastName.Text +"','" +txtCourseName.Text +"','"+ txtDOB.Text +"')";

        myOleDbConnection.Open();
        OleDbCommand cmd = new OleDbCommand(strSql, myOleDbConnection);
        cmd.Parameters.AddWithValue("@Forename", txtFirstName);
        cmd.Parameters.AddWithValue("@Surname", txtLastName);
        cmd.Parameters.AddWithValue("@CourseName", txtCourseName);
        cmd.Parameters.AddWithValue("@DOB", txtDOB);

        **myOleDbCommand.ExecuteNonQuery();**   } 
```

编辑：谢谢大家的回复。当我第一次开始编写这段代码时，我使用了以下代码行：

```
'   {
            string connectionString = 
                "provider=Microsoft.ACE.Oledb.12.0;" +
                "data source=C:\\Users\\Botterill\\Documents\\StudentRegistrationDatabase.accdb";

            OleDbConnection myOleDbConnection = new OleDbConnection(connectionString);
            OleDbCommand myOleDbCommand = myOleDbConnection.CreateCommand();
myOleDbConnection.Open();
            myOleDbCommand.CommandText = "INSERT INTO StudentDetails ([Forename],[Surname],[CourseName],[DOB],)" +

             "VALUES('" + txtFirstName.Text + "','" + txtLastName.Text + "','" + txtCourseName.Text + "','" + txtDOB.Text + "')";'
**myOleDbCommand.ExecuteNonQuery();** 
```

但是，在粗体行中，我收到一个运行时错误，说“INSERT INTO 语句中存在语法错误”。我认为这将在我发布的第一个问题中所做的更改中得到纠正。任何帮助将不胜感激。谢谢凯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:17:40.957

您`myOleDbCommand`从连接创建，然后继续使用查询文本设置`cmd`实例，然后执行`myOleDbCommand`没有附加任何命令文本的实例。

`OleDbCommand`你真的想使用哪个实例？

此外，正如@thorarin 所指出的，您应该使用命名参数（如`cmd`示例）而不是连接字符串来创建命令文本，因为您打开应用程序以进行 SQL 注入攻击。

# java - java比较两个日期

> ID：15925509
> 
> 赞同：6
> 
> 时间：2013-04-10T12:14:11.287
> 
> 标签：java, date

我想比较两个日期并检查日期是否已过期。

这是我使用的代码：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd hh:ss:ii");
Date date1 = sdf.parse("20012-10-4 10:15:25");
Date date2 = sdf.parse("2013-10-4 10:15:25");

if(date1.equals(date12)){
    System.out.println("Both are equals");
} 
```

我想检查这两个日期但没有成功。

我也试过这样检查：

```
if(date1 >= date2){
    System.out.println("Both are not equals");
} 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-10T12:17:18.680

java.util.Date 类具有比较日期的 before 和 after 方法。

```
Date date1 = new Date();
Date date2 = new Date();

if(date1.before(date2)){
    //Do Something
}

if(date1.after(date2)){
    //Do Something else
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T12:25:28.240

尝试使用此功能。它将帮助您：-

```
public class Main {   
public static void main(String args[]) 
 {        
  Date today=new Date();                     
  Date myDate=new Date(today.getYear(),today.getMonth()-1,today.getDay());
  System.out.println("My Date is"+myDate);    
  System.out.println("Today Date is"+today);
  if(today.compareTo(myDate)<0)
     System.out.println("Today Date is Lesser than my Date");
  else if(today.compareTo(myDate)>0)
     System.out.println("Today Date is Greater than my date"); 
  else
     System.out.println("Both Dates are equal");      
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T12:15:57.490

阅读`JavaDocs`。

使用方法：

```
 Date.compareTo() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T12:17:23.533

您应该查看 Date 类的 compareTo 函数。

[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#compareTo%28java.util.Date%29)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T12:16:49.347

您可以使用：

```
date1.before(date2); 
```

或者：

```
date1.after(date2); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-10T12:17:16.900

你[equals(Object o)](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#equals%28java.lang.Object%29)比较是正确的。

但是，您应该使用[after(Date d)](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#after%28java.util.Date%29)和[before(Date d)](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#before%28java.util.Date%29)进行日期比较。

# c - 指针程序的输出

> ID：15925510
> 
> 赞同：3
> 
> 时间：2013-04-10T12:14:11.870
> 
> 标签：c, pointers

我对指针知之甚少。

我遇到了以下程序。输出看起来很正常，但实际上发生了什么我无法弄清楚。

```
#include<stdio.h>
#include<conio.h>
void main()
{
     int k;
     int a[] = {1,2,3}; int *b[3] ; int **c[3];
     int ***d[3]; int ****e[3]; int*****f[3];
     for (k = 0 ; k <3; k++)
     {
         b[k] = a + k; c[k] = b + k ; d[k] = c + k;
         e[k] = d + k ; f[k] = e + k;

     }
     for (k = 0 ; k <3; k++)
     {
        printf("%3d", *b[k]); printf("%3d", **c[k]);
        printf("%3d", ***d[k]); printf("%3d", ****e[k]);
        printf("%3d\n", *****f[k]);
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:40:00.387

第一个`for`循环只是基本的指针运算。`a[]`持有`int`s，之后的每个数组都持有一个指针。
`b[]`是指向`int`
`c[]`的指针 是指向`int`
等的指针的指针

所以它在内存中是这样的：

```
Memory Address:      0x00441234 <---+   0x00441238 <----+     0x0044123C <---+
                     **********     |   **********      |     **********     |
var name:            * a (+0) *     |   * a (+1) *      |     * a (+2) *     |
                     **********     |   **********      |     **********     |
value:               *   1    *     |   *   2    *      |     *   3    *     |
                     **********     |   **********      |     **********     |
                                    |                   |                    |
                                    |                   |                    |
                  +-> 0x00442345    | +->0x00442349     | +->0x0044234D      |
                  |   ************  | |  ************   | |  ************    |
                  |   *  b (+0)  *  | |  *  b (+1)  *   | |  * b  (+2)  *    |
                  |   ************  | |  ************   | |  ************    |
                  |   *0x00441234* -+ |  *0x00441238* --+ |  *0x0044123C*  --+
                  |   ************    |  ************     |  ************     
                  |                   |                   |
                  |                   |                   |
                  |   0x00443345      | 0x00443349        | 0x0044334D      
                  |   ************    | ************      | ************    
                  |   *  c (+0)  *    | *  c (+1)  *      | * c  (+2)  *    
                  |   ************    | ************      | ************    
                  +-- *0x00442345*    +-*0x00442349*      +-*0x0044234D* 
                      ************      ************        ************ 
```

并且每个元素`D`指向 的每个元素`C`，以此类推。最终结果是您将每个数组中的每个元素（通过一些指针链）设置回`a`. 然后在第二个`for`循环中，你`a[]`一遍又一遍地打印元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:24:33.463

```
 int k;
     int a[] = {1,2,3}; //array of 3 ints
     int *b[3] ; //array of 3 integer pointers
     int **c[3]; //array of 3 integer double pointers
     int ***d[3]; //array of 3 pointers to integer double pointers
     int ****e[3]; //array of 3 pointers to pointers to integer double pointers
     int*****f[3]; //array of 3 pointers to  pointers to pointers to integer double    pointers
     for (k = 0 ; k <3; k++)
     {
         b[k] = a + k; 
          //a gives base address to array a 
          //Add k to it and store it in b[k]. Note, this isn't normal arithmetic its 
          //pointer aritmetic 
         c[k] = b + k ; 
         d[k] = c + k;
         e[k] = d + k ; 
         f[k] = e + k;
     }
     for (k = 0 ; k <3; k++)
     {
        printf("%3d", *b[k]); //dereference single level pointer
        printf("%3d", **c[k]); //dereference second level pointer 
        printf("%3d", ***d[k]); printf("%3d", ****e[k]);
        printf("%3d\n", *****f[k]);
     } 
```

您可以拥有任意数量的指针级别。即指向 (pointer to (pointer ...)) 的指针等[达到标准定义的限制]

对于一个有趣的阅读，也看到[这个](http://c2.com/cgi/wiki?ThreeStarProgrammer)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:22:57.137

这是发生的事情：

您定义一个`k` 数据类型的变量`int`

你定义一个数组，`a`有值，`1, 2, 3`

你定义了一个指针数组，`b`

你定义了一个指针数组，`c`

.................................和类似的`f`

您从 0 迭代到 2，并将值分配给`b`, `c`, `d`, .... upto`f`

您再次从 0 迭代到 2 并打印：

`b`, `c`, ..... upto中的每个元素所指向的值`f`

**编辑**：发生了什么 b[k] = a + k，你在内存中前进了 k 个块，其地址被分配给 b[k]，所以，b[k] 指向你内存中的那个块，（这可能是任何值）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:26:59.467

首先尝试了解正在`b[k] = a + k`做什么。其余的都是一样的。

`a[]`是一个包含 3 个元素的数组，`1, 2, and 3`它`a`本身引用数组的`0th`元素，即数组`a`第一个元素的地址。

现在`a + k`，在指针算术中，表示`kth`名为 的数组的元素`a`。

因此，考虑循环的第 1 遍，并且 k = 0。

您的第一条语句变为`b[0] = a + 0`. Notice`a + 0`是一个地址，它包含在 的元素中`b`。所以，`b`应该是类型`int *`，并且在你的代码中它被声明为`int *b[3]`.

而对于`c[0] = b + 0`，你正在存储一个`address of address of int`，所以`c`被声明为双指针`int **c[3]`。

现在这些事情发生在你使用的每个数组上，只是多了一层指针。这意味着，您持有前一个数组元素的地址。

# android - 如何让android按钮切换不同的XML布局？

> ID：15925516
> 
> 赞同：1
> 
> 时间：2013-04-10T12:14:32.087
> 
> 标签：android, xml, button, layout

我最近刚开始一些 android 编程，我正在创建一个小型项目应用程序。我有几个不同的 XML 布局文件，并希望我的按钮转到那个布局。但是，当我按下模拟器上的按钮时，我收到此消息“不幸的是，“MyApp”已停止”。

这是我的主要活动课程：

```
 import android.os.Bundle;
  import android.app.Activity; 
  import android.content.Intent;
  import android.view.Menu;
  import android.view.View;
  import android.view.View.OnClickListener;
  import android.widget.Button;

  public class MainActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Shows the Activities screen.

    Button Button1=(Button)findViewById(R.id.Button1);
    Button1.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             Intent i = new Intent(MainActivity.this,ActivityList.class);
             startActivity(i);

         }
     }); 
```

}

这是我的按钮 XML 代码：

```
 android:id="@+id/Button1"
    android:layout_width="300dp"
    android:layout_height="55dp"
    android:layout_alignLeft="@+id/Menutxt"
    android:layout_below="@+id/Menutxt"
    android:layout_marginTop="20dp"
    android:gravity="center"
    android:text="@string/Choose_Activity"
    android:textColor="#ffffffff"
    android:textSize="25sp"
    android:typeface="serif" 
```

我想知道是否有人可以在这里帮助我，已经尝试了几个小时并且无法通过它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T03:45:48.647

您没有向我们展示您的 ActivityList.class ，也许您已经创建并扩展了 Activity，但请确保您的 AndroidManifest.xml 中有以下代码：

活动 android:name=".ActivityList"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:20:37.403

将此添加到您要打开的活动的布局中。它应该在顶部：`tools:context=".activity" >`

例如 `<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="horizontal" tools:context=".activity" >`

将“活动”替换为您的活动名称

# asp.net-mvc - 访问asp.net mvc控制器ActionResult

> ID：15925517
> 
> 赞同：0
> 
> 时间：2013-04-10T12:14:33.030
> 
> 标签：asp.net-mvc, asp.net-mvc-3, compiler-errors, asp.net-mvc-routing

我想访问控制器中的操作结果（我的控制器是 HotelController 操作是索引）

( `http://localhost:9001/Hotel/Index`) 它给出以下错误

无法找到该资源。

说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的网址：/Hotel/Index

酒店控制器

```
public class HotelController : Base.BoxyController
    {
        protected override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            base.OnActionExecuting(filterContext);

            ViewBag.Title = "SonDakka - Otel";
        }

        public ActionResult Index(string culture)
        { 
```

…………

BoxyController

```
 public class BoxyController : MainController
    {
        protected override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            base.OnActionExecuting(filterContext); 
```

…………

主控制器

```
 public class MainController : SiteController
    {
        protected override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            base.OnActionExecuting(filterContext); 
```

……

站点控制器

```
 [ExitHttpsIfNotRequired]
    public class SiteController : Controller
    {
        public Account Me { get; set; }

        protected override void OnActionExecuting(ActionExecutingContext filterContext)
        { 
```

…………

这是我的 global.asax

```
using System;
using System.Data.Entity;
using System.IO;
using System.Linq;
using System.Web.Mvc;
using System.Web.Routing;
using Tourism.Data;
using Tourism.Data.Mvc.Authorization;
using Tourism.Data.Mvc.Routing;

namespace Tourism
{
    public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(TourismContext db, RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            var cultures = db.Cultures.Select(c => c.Code).ToArray();

            routes.MapRoute
                (
                    "Ajax",
                    "{culture}/{controller}/{action}/{id}",
                    new { id = UrlParameter.Optional },
                    new { culture = new ArrayRouteConstraint(true, cultures), controller = new ArrayRouteConstraint(true, "Ajax") }
                ).RouteHandler = new GlobalizedRouteHandler();

            routes.Add
                (
                    "Page",
                    new GlobalizedPageRoute
                        (
                            "{culture}/{path}",
                            null,
                            new RouteValueDictionary { { "culture", new ArrayRouteConstraint(true, cultures) } },
                            new GlobalizedRouteHandler()
                        )
                );

            routes.Add
                (
                    "Route",
                    new GlobalizedRoute
                        (
                            "{culture}/{path}/{slug}/{id}",
                            new RouteValueDictionary { { "culture", UrlParameter.Optional }, { "path", UrlParameter.Optional }, { "slug", UrlParameter.Optional }, { "id", UrlParameter.Optional } }, 
                            new RouteValueDictionary { { "culture", new ArrayRouteConstraint(false, cultures) } },
                            new GlobalizedRouteHandler()
                        )
                );
        }

        protected void Application_Start()
        {
            Database.SetInitializer<TourismContext>(null);

            using (var db = new TourismContext())
            {
                #if !DEBUG

                if (!db.Database.CompatibleWithModel(true))
                {
                    System.Web.HttpRuntime.UnloadAppDomain();

                    throw new Exception("Veritabanı değişikliği tespit edildi.");
                }

                #endif

                AreaRegistration.RegisterAllAreas();

                RegisterGlobalFilters(GlobalFilters.Filters);

                RegisterRoutes(db, RouteTable.Routes);
            }
        }

        protected void Application_PostAuthenticateRequest()
        {
            if (Request.IsAuthenticated)
            {
                Context.User = System.Threading.Thread.CurrentPrincipal =
                    new AuthorizationPrincipal(Context.User.Identity);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:20:40.890

因为这是由于 Razor 引擎无法在酒店控制器中找到Thanks 操作。您需要在 Hotel 控制器中执行Thanks 操作，如下所示：

```
public class HotelController : Base.BoxyController
{

 public ActionResult Thanks(string culture)
 {
    return View();
 }

} 
```

并确保使用您的 html 代码在 Hotel 文件夹中创建一个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:49:01.893

根据您发布的路由配置，您的 URL 应带有`culture`，例如：

```
http://localhost:9001/en/Hotel/Index 
```

注意**`en`**前面的`Hotel`。它可以是在您的数据库中有效的任何值。

# maven - 模块中的 Maven 插件管理

> ID：15925521
> 
> 赞同：1
> 
> 时间：2013-04-10T12:14:49.800
> 
> 标签：maven

我偶然发现了一个带有一个父 P 的 maven 项目，它有模块 A 和 B。在这个项目中，模块 A 和 B 包括一个插件管理部分？现在我想知道：这有意义吗？这可能是什么意图？

马蒂亚斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:21:08.500

放置 PluginManagement 部分以便子元素可以使用相同的插件和版本。孩子们仍然必须参考插件，但可能会省略插件版本。

我认为在模块 A 和 B 中使用 PluginManagement 没有多大意义，除非它的创建者计划扩展它，然后再决定。它应该被替换为

```
<plugins>
    <!-- your modules -->
<plugins> 
```

# javascript - 在 jQuery AJAX 调用中是否有任何类似于“终于”的类比？

> ID：15925522
> 
> 赞同：95
> 
> 时间：2013-04-10T12:14:54.680
> 
> 标签：javascript, jquery, ajax, promise

jQuery AJAX 调用中是否存在 Java“终于”类似物？我这里有这段代码。我**总是**抛出一个异常，但是我总是希望它转到**then()**方法。

```
 call.xmlHttpReq = $.ajax({
        url : url,
        dataType : 'json',
        type : 'GET'
    }).always(function(processedDataOrXHRWrapper, textStatus, xhrWrapperOrErrorThrown) {

       throw "something";

    }).then(function() {

        alert("i want to always run no matter what");
    }); 
```

我曾尝试使用**done()**、**complete()**和另一个**always()**，但似乎没有任何效果。

这是 JSFiddle ：

[http://jsfiddle.net/qv3t3L0m/](http://jsfiddle.net/qv3t3L0m/)

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2014-02-12T01:05:58.663

看这个例子：

```
$.ajax({
        type: "GET",
        dataType: dataType,
        contentType: contentType,
        async: TRUE,
        url: $('html form:nth-child(1)').attr('action') + "?" $('html form:nth-child(1)').serialize(),
        success: function(data) {
            console.log("FUNFOU!");
        },
        error: function(data) {
            console.log("NÃO FUNFOU!");
        },
        complete: function(data) {
            console.log("SEMPRE FUNFA!"); 
            //A function to be called when the request finishes 
            // (after success and error callbacks are executed). 
        }
    }); 
```

> 欲了解更多信息：[http ://api.jquery.com/jquery.ajax/](http://api.jquery.com/jquery.ajax/)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-04-10T12:18:20.410

`.always()`应该管用。请参阅[http://api.jquery.com/jQuery.ajax/上](http://api.jquery.com/jQuery.ajax/)**的 jqXHR 对象**部分。

> jqXHR.always(函数(数据|jqXHR, textStatus, jqXHR|errorThrown) { }); 完成回调选项的替代构造，.always() 方法替换了已弃用的 .complete() 方法。
> 
> 响应成功的请求，该函数的参数与 .done() 的参数相同：data、textStatus 和 jqXHR 对象。对于失败的请求，参数与 .fail() 的参数相同：jqXHR 对象、textStatus 和 errorThrown。有关实现细节，请参阅 deferred.always()。

另请参阅[http://api.jquery.com/deferred.always/](http://api.jquery.com/deferred.always/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-10T12:32:49.917

以下建议在 jQuery 中不起作用，因为 jQuery 的 promise 实现不处理传递给 then 的方法中抛出的错误。我只是将它们留在这里作为说明如果 jQuery 符合 promises/A+ 可能会发生什么。正如 Bergi 正确指出的那样，您必须手动将代码包装在自己的 try catch 块中。

```
call.xmlHttpReq = $.ajax({
    url : url,
    dataType : 'json',
    type : 'GET'
}).then(function(processedDataOrXHRWrapper, textStatus, xhrWrapperOrErrorThrown) {

   throw "something";

}).always(function() {

    alert("i want to always run no matter what");
}); 
```

虽然我不确定jquery的promise是否总是支持，但另一种方法是使用then（再次）并传递与successHandler和errorHandler相同的函数，如下所示：

```
call.xmlHttpReq = $.ajax({
    url : url,
    dataType : 'json',
    type : 'GET'
}).then(function(processedDataOrXHRWrapper, textStatus, xhrWrapperOrErrorThrown) {

   throw "something";

}).then(function() {

    alert("i want to always run no matter what");
},
function() {

    alert("i want to always run no matter what");
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-23T05:34:07.047

给那些使用 jQuery 3.0 及更高版本的人的注意事项

> 弃用通知：jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调从 jQuery 3.0 开始被删除。您可以改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

[如官方文档](http://api.jquery.com/jquery.ajax/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-06T13:29:14.350

ajax有一个bug是依赖服务器的，需要检查状态用“完成”是最好的，一种“成功”、“错误”等不是100%的PUT、POST和GET……看看举个例子

```
$.ajax({
    url: '/api/v2/tickets/123456.json',
    ....
    ....
    ....
    complete: function(data) { 
        if (data.statusText == "success") { 
            console.log("Sent successfully");
        } else { 
            console.log("Not Sent");
        }
    }
}); 
```

对不起英语不好！欢呼;-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-20T21:40:51.137

如果您想要所有 ajax 请求的一个代码定义，您可以这样做

```
$(document).ajaxComplete(function () {
    console.log('ajax complete on doc');
}) 
```

# android - 我可以在 Android 中为可绘制的位图创建别名吗？

> ID：15925524
> 
> 赞同：1
> 
> 时间：2013-04-10T12:14:58.803
> 
> 标签：android, android-layout, android-drawable

我已经这样定义了一个位图`/drawable/app_background_raw`：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/actual_png_file"
    android:tileMode="repeat" /> 
```

现在我想要这个定义的两份副本——一份没有改变，另一份旋转了 90 度，以便我可以在纵向模式下使用它。我可以这样创建旋转的：

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="90"
    android:toDegrees="90"
    android:pivotX="0%"
    android:pivotY="0%"
    android:drawable="@drawable/app_background_raw">
</rotate> 
```

..但是我如何以最少的开销创建 app_background_raw 的未更改副本？我显然可以创建另一个`RotationDrawable`旋转 0 度，但这感觉有点傻。建议？

**更新**

这对于这种情况来说是个坏主意，因为 Android 似乎在我可以旋转之前为肖像模式缩放位图，但无论如何我都想知道为可绘制对象创建别名的最简单方法是什么。

# c# - C# Xml 节点数据类型

> ID：15925527
> 
> 赞同：0
> 
> 时间：2013-04-10T12:15:10.257
> 
> 标签：c#, xml, chartfx

我正在为 ChartFX 使用以下 XML：http: [//pastebin.com/sR1N61Ss](http://pastebin.com/sR1N61Ss)

以下行导致问题：

```
ProductCode="1234568" 
```

如果我碰巧在字符串中添加了任何字母字符，例如“1235678a”，那么它很好并且可以工作。

所以我的问题是，如何管理节点被解析为哪些数据类型？

感谢您的阅读，任何建议/解决方案都会很棒。

# java - 我可以一次在窗口构建器中放置多个控件吗？

> ID：15925530
> 
> 赞同：0
> 
> 时间：2013-04-10T12:15:18.160
> 
> 标签：java, swt, windowbuilder

是否可以在窗口构建器中一次删除多个控件？

我尝试了鼠标拖放与`ctrl`,的明显组合`alt`，`shift`但目前还找不到。

![窗口生成器拖放](https://i.stack.imgur.com/6cf6D.png)

（不幸的是，当我拖动“新标签”时，鼠标光标没有被捕获。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:43:02.580

从工具箱中选择控件的同时按下 `ctrl`可多次放下控件。

# jquery - 如何使用正则表达式从javascript中的最后一个数字和空格之前获取数据

> ID：15925533
> 
> 赞同：0
> 
> 时间：2013-04-10T12:15:26.723
> 
> 标签：jquery, regex

这是我下面的问题

```
var id = "10101-Building and Construction  21"; 
```

基本上，我已经从其他计算中得到了 id 的数据，我想分开到 21。

这里的结果将是 21；

我如何在没有 21 的情况下删除 id 的值。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:25:27.920

也许结合 substring 和 lastindexOf，类似于：

```
var result = id.substring(id.lastIndexOf(' ')+1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:04:36.953

**根据您的问题做出的假设：**

**- 你想从字符串中提取的 id 总是在最后**
**- id 总是一个数字**

*   如果上述假设成立：
*   然后您可以编写一个javascript函数并执行以下功能。

    1.  从最后一个循环并检查数字，直到找到一个字符串

    2.  一旦遇到一个字符，它就会停止，你会得到所需的 id

javascript中的函数

```
function express()
{
var str="10101-Building and Construction  21";
var temp,id;
for(var t2=1;t2<=str.length;t2++)
{
    temp = str.substring(str.length-t2);

    var condition = isNaN(temp);
    if(condition == true)
    {
        break;
    }
    id=temp;
}
document.write("<br>"+id);
} 
```

这将提取 id

和`result:`

编号 = 12

[**单击此处**：根据您的价值观，小提琴是一个活生生的例子](http://jsfiddle.net/q9Q6M/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:30:49.310

```
$(document).ready(function(){
var id = 10101-Building and Construction  21;
var result=id.substring(id.Length-2,id.Length)
}); 
```

# ios - iOS 白点/白平衡调整示例/建议

> ID：15925534
> 
> 赞同：4
> 
> 时间：2013-04-10T12:15:31.807
> 
> 标签：ios, objective-c, core-image

我正在尝试以编程方式更改白点/白平衡。这就是我想要完成的：
- 从图像中选择一个（随机）像素
- 获取该像素的颜色
- 转换图像，以便该颜色的所有像素都将转换为白色，并且所有其他颜色都将转换为匹配

我已经完成了前两个步骤，但第三步并没有真正奏效。

起初，我认为，根据 Apple 的文档[CIWhitePointAdjust](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIWhitePointAdjust)应该可以完全做到这一点，但是，尽管它确实改变了图像，但它并没有做我想要/期望它做的事情。

然后似乎[CIColorMatrix](http://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIColorMatrix)应该可以帮助我改变颜色，但我（现在仍然）不知道用那些讨厌的向量输入什么。我已经尝试了几乎所有的东西（所有向量上的 RGB 值相同，每个向量上的对应值（R 表示 R 等），1 - 对应值，1 + 对应值，1/对应值。RGB 值和不同的（1 - x , 1 + x, 1 / x)。

我也遇到过[CITemperatureAndTint](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CITemperatureAndTint)，根据 Apples 文档也应该有所帮助，但我还没有弄清楚如何从 RGB 转换为温度和色调。我已经看到了关于从 RGB 转换为 Temperatur 的算法和公式，但没有看到关于色调的内容。不过，我将继续对此进行一些试验。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T13:11:40.683

经过大量的实验和数学运算，我终于让我的应用程序几乎可以按照我想要的方式工作。
如果其他人会发现自己面临类似的问题，那么这就是我所做的。
我最终使用**CITemperatureAndTint**过滤器提供开尔文颜色，该颜色是根据所选像素 RGB 值和用户提供的色调值计算得出的。
要达到 Kelvins I：
- 首先使用 D65 光源（即日光）将 RGB 转换为 XYZ。
- 然后从 XYZ 转换为 Yxy。这两种转换都是使用从[EasyRGB](http://www.easyrgb.com/index.php?X=MATH)中找到的算法进行的。[- 然后我使用我在这里](https://docs.google.com/viewer?a=v&q=cache:91X1cgfBH88J%3awww.ams.com/eng/content/download/251586/993227/version/2%20&hl=et&pid=bl&srcid=ADGEEShvDYqV5UusZpXBejCo4ngiOSNkHtp_uPI4VD45w4G5U9ei2jVKTSv6iSKEFbnkhehcM2rN-LpB2EM0VBfUtJAgthzF9WU5orQximkpfwhQ9ZBxQ9HZ1tqSlf4XUiF5ErDopyJe&sig=AHIEtbS7qtnK8_2iNf4xlceZZiqZpr_1Gg)
的一篇论文中找到的 McCamry 公式从 Yxy 计算开尔文。

这些步骤得到了大致上的图像，但并不完全在那里，所以我添加了一个`UISlider`供用户提供从 -100 到 100 的色调值。

通过选择一个应该是白色的点并从色调刻度的正侧选择值（我手机上的所有图像都倾向于更黄），现在可以将图像转换为（更多）中性色。耶！

我提供了计算出的温度和用户选择的色调作为`inputNeutral`矢量值。
6500（D65 日光）和 0 作为**CITTemperatureAndTint**过滤器的`inputTargetNeutral`向量值。

# php - 如何使用plupload在mysql中保存文件名

> ID：15925537
> 
> 赞同：0
> 
> 时间：2013-04-10T12:15:39.370
> 
> 标签：php, mysql, plupload

我想知道如何保存`image`in `mysql`with的名称`plupload`？

文件`upload.php`中有很多变量，我不知道哪个存储了`filename`，已经尝试了所有方法，但我不想保存创建的`image name`，`plupload`不是`original name` 有人可以帮助我吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:31:17.770

像这样获取文件名。

```
$filename = $_FILES["file"]["name"]; 
```

并将 $filename 传递给 insert 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:34:53.880

试试这个插件从github[上传](https://github.com/moxiecode/plupload/blob/master/examples/upload.php)`upload file`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T10:21:41.543

可以直接使用$fileName变量，这里举个例子，比如$sSQL = "INSERT INTO eletz_multiimage (image_name) VALUES ('$fileName')"; $result = mysql_query($sSQL);

# php - 数组的组合

> ID：15925545
> 
> 赞同：3
> 
> 时间：2013-04-10T12:16:05.647
> 
> 标签：php, arrays

我试图让下面的代码工作几个小时，但没有成功。

我有这个日期数组：

```
Array ( [0] => Array ( [0] => 2007 ) 
        [1] => Array ( [0] => 2008 ) 
        [2] => Array ( [0] => 2009 )
        ...
      ) 
```

而这个加减一：

```
Array ( [0] => Array ( [plus] => 2 [date] => 2007 ) 
        [1] => Array ( [minus] => 1 [date] => 2008 ) 
        [2] => Array ( [minus] => 1 [date] => ) 
        [3] => Array ( [plus] => 1 [date] => 2010 [minus] => 1 )
      ) 
```

我一直在尝试将它们组合成这样：

```
Array ( [0] => Array ( [date] => 2007 [plus]=> 2)
        [1] => Array ( [date] => 2008 [minus]=> 1)
        [2] => Array ( [date] => 2009 [plusMinus]=> 0)
        [3] => Array ( [date] => 2010 [plus] => 1 [minus]=>1 )
      ...
      ) 
```

所以基本上我想检查加减数组中是否存在日期数组的值。如果为真，则 plusMinus 数组中的日期和值将替换日期数组中的条目。如果为 false，则原始日期数组条目由 [plusMinus] => 0 键值对补充。

我尝试这样做的方式是这样的：

```
foreach ($filler as $key1 => $value1) 
       {
            foreach ($plusMinus as $key2 => $value2)
                {
                    if ($value1['0'] !== $value2['date'])
                        {
                            $value1['plusMinus'] = '0';
                            $result2[$key1][] = $value1;
                        }
                        elseif ($value1['0'] == $value2['date'])
                        { 
                            if (array_key_exists('plus',$value2))
                            {
                                $value1['plus'] = $value2['plus'];
                                $result2[$key1][]=$value1;
                            }

                            elseif(array_key_exists('minus',$value2))
                            {
                                $value1['minus'] = $value2['minus'];
                                $result2[$key1][]=$value1;
                            } 

                            elseif(array_key_exists('minus',$value2) &&
                                   array_key_exists('plus',$value2))
                            {

                            }
                        }
                } 
       }

$valuesComplete = array();
            foreach ($result2 as $value) {
                $result2 = $value['0'];
                array_push($valuesIncomplete, $result2);
            }
 return $valuesComplete; 
```

我得到的不是上面描述的预期结果：

```
Array ( [0] => Array 
              ( [0] => 2007 [plus] => 2 ) 
                [1] => Array ( [0] => 2008 [plusMinus => 0 ) 
                [2] => Array ( [0] => 2009 [plusMinus] => 0 ) 
                [3] => Array ( [0] => 2010 [plusMinus] => 0 ) 
                [4] => Array ( [0] => 2011 [plusMinus] => 0 ) 
                [5] => Array ( [0] => 2012 [plusMinus] => 0 ) 
                [6] => Array ( [0] => 2013 [plusMinus] => 0 ) 
              ) 
```

我错过了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:30:53.783

不幸的是，由于输入数据格式，我看不到任何不涉及[`O(n + m + p)`](http://en.wikipedia.org/wiki/Big_O_notation "n = $plusMinus 中的元素数，m = $filler 中的元素数，p 是可变的，取决于 $temp 产品数组的顺序，但它至少是 $temp 的大小，有关 p 的更多信息，请参见 Quicksort")操作的方法。但没关系，你必须做你必须做的。

首先，我将从过滤`PlusMinus`数组中无用的元素开始。由于它已经非常接近所需的输出格式，因此将其用作结果的基础是有意义的。

```
$temp = array();
foreach ($plusMinus as $item) {
    if (!empty($item['date'])) {
        $temp[$item['date']] = $item;
    }
} 
```

请注意，我将`date`用作我们用于构建结果的临时数组的索引。这是为了让您轻松确保结果数组的顺序正确，并快速检查是否需要从`Filler`数组中添加项目。

接下来，我们需要从`Filler`数组中添加任何缺失的元素：

```
foreach ($filler as $item) {
    if (!isset($temp[$item[0]])) {
        $temp[$item[0]] = array(
            'date' => $item[0],
            'plusMinus' => 0
        );
    }
} 
```

现在所有数据都以正确的格式保存在数组中，我们只需要对其进行[排序](http://php.net/ksort)：

```
ksort($temp); 
```

...并将其转换回索引数组：

```
return array_values($temp); 
```

无需性能扼杀的嵌套循环或复杂的流控制。

[看到它工作](http://codepad.viper-7.com/nVizfW)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:47:35.487

这就是我想出的：

为了不创建两个数组的乘积（foreach 内的 foreach），我首先使用*date*`$plusMinus`索引数组。这将允许快速测试是否存在一年：

 *```
$years = array_combine(array_column($plusMinus, 'date'), $plusMinus); 
```

这使用了[`array_column()`](http://php.net/array_column)PHP 5.5 的功能，如果您没有它，您可以[轻松创建自己的](https://stackoverflow.com/q/1494953/2261774).

这样做之后，这*正是*你用自己的话写的：

```
foreach($date as &$entry)
{
    list($year) = $entry;
    $entry = array('date' => $year);
    // check if a value of the date array exists in the plusMinus array.
    if (isset($years[$year])) {
        // If true the date and values from the plusMinus array shall replace the entry in the date array
        $entry += $years[$year];
    } else {
        //  If false, the original date array entry is complemented by a [plusMinus] => 0 key-value pair.
        $entry += array('plusMinus' => 0);
    }
}
unset($entry); 
```

[看我行动](http://codepad.org/pz220Vvh)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:30:38.177

据我了解，您需要在第二个数组中而不是在第一个数组中添加年份？

在这种情况下，您可以这样做：

```
foreach ($filler as $key1 => $value1)
{
    $ok = false;
    foreach ($plusMinus as $key2 => $value2)
    {
        if($value2['date']==$value1[0])
        {
            $ok = true;
            break;
        }
    }

    if(!$ok)
    {
        $plusMinus[$value1[0]]=array('date'=>$value1[0], 'plusMinus'=>0);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:30:39.293

```
<?php

$a1 = array(array( 2007 ),
            array( 2008 )
           );
$a2 = array(array('plus'=>1, 'date'=>2007),
            array('minus'=>1,'date'=>2008),
            array('plus'=>1, 'minus'=>1, 'date'=>2008)
         );

$r = array();

foreach($a1 as $k1=>$d1) {
   $year = $d1[0];
   foreach( $a2 as $k2=>$d2 ) {
      if( $d2['date'] == $year ) {
         $r[$year]['date'] = $year;
         if(isset($d2['plus'])) {
            $r[$year]['plus'] = $d2['plus'];
         }
         if(isset($d2['minus'])) {
            $r[$year]['minus'] = $d2['minus'];
         }
      }
   }
}

print_r($r); 
```

和结果

```
Array
(
    [2007] => Array
        (
            [date] => 2007
            [plus] => 1
        )

    [2008] => Array
        (
            [date] => 2008
            [minus] => 1
            [plus] => 1
        )

) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:31:01.473

```
$ar1 = array( array(2007), array(2008), array(2009), array(2010) );

$ar2 = array(
    array("date"=>2007, "plus"=>2),
    array("date"=>2008, "minus"=>1),
    array("date"=>"", "minus"=>1),
    array("date"=>2010, "plus"=>1, "minus"=>1)
);

foreach($ar2 as $key=>$val){
    if(isset($ar1[$key][0]))
        $val["date"] = $ar1[$key][0];
    $ar2[$key] = $val;
} 
```

我不确定我是否理解正确，但这很好用......

仅当您确定两个数组“日期”彼此相等时，它才会起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T12:36:50.030

**这将工作得很好。**

我根本不明白你的问题，但如果我明白了，就是这样：首先让你的 $datearray 更容易理解，如下所示：

```
$dateArray = array(2007,2008,2009,2010);
$plusMinus = array(
                    array( 'plus' => 2 ,'date' => 2007),
                    array( 'minus' => 1 ,'date' => 2008),
                    array ( 'minus' => 1 , 'date' => '' ),
                    array ( 'plus' => 1 , 'date' => 2010 , 'minus' => 1 )
              ); 
```

您可以稍后将其变为多维；在那之后：

```
foreach($dateArray as $k=>$v)
{
    if(in_array($v,$plusMinus[$k]))
    {
        $filler[$k] = $plusMinus[$k];
    }
    else{
        if(empty($plusMinus[$k]['date']))
        {
            $filler[$k]['date']= $v;
            $filler[$k]['plusMinus'] = 0;
        }
    }
} 
```

如果您的数组始终具有您描述的结构，这是一种简单、干净、易于理解的方式，只需很少的代码，这意味着 2007 的 plusMinus 值在单元格 [0] 中，而 dateArrays 中的 2007 也在单元格 [0] 中就像你展示的那样。我希望我能帮上忙。*

# cassandra - 配置多个目录时，cassandra如何拆分keyspace数据？

> ID：15925549
> 
> 赞同：9
> 
> 时间：2013-04-10T12:16:23.447
> 
> 标签：cassandra

我在 cassandra.yaml 文件中配置了三个单独的数据目录，如下所示：

```
数据文件目录：
    -E:/Cassandra/data/var/lib/cassandra/data
    -K:/Cassandra/data/var/lib/cassandra/data

```

当我创建键空间并插入数据时，我的键空间在两个目录中都创建了，数据分散了。我想知道的是 cassandra 如何在多个目录之间拆分数据？这背后的规则是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-08T18:40:28.723

当您在 data_file_directories 下添加多个条目时，您正在使用 Cassandra 的 JBOD 功能。数据按其可用空间均匀分布在已配置的驱动器上。

这也让您可以利用 disk_failure_policy 设置。您可以在此处阅读详细信息： [http ://www.datastax.com/dev/blog/handling-disk-failures-in-cassandra-1-2](http://www.datastax.com/dev/blog/handling-disk-failures-in-cassandra-1-2)

简而言之，您可以将 Cassandra 配置为继续运行，在磁盘已满或完全失败时尽其所能。这比 RAID0（您实际上拥有与 JBOD 相同的容量）具有优势，因为您不必从备份（或完全修复）中替换整个数据集，而只需对丢失的数据运行修复。另一方面，RAID0 提供更高的吞吐量（取决于您对如何调整 RAID 阵列以匹配文件系统和驱动器几何结构的了解程度）。

如果您有容错/更高性能的 RAID 设置的资源（例如 RAID10），您可能只想使用单个目录来简单起见。大多数部署开始倾向于密度路线，尽管使用 JBOD 而不是系统级容差。

您可以在此处阅读有关此问题开发背后的思考过程： [https ://issues.apache.org/jira/browse/CASSANDRA-4292](https://issues.apache.org/jira/browse/CASSANDRA-4292)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:03:01.117

        一些我能够猜到键空间是如何在多个数据目录之间分割的。根据**目录的最大可用空间和负载**，将同一列族的 SSTables 写入不同的数据目录。

# maven - Maven surefire 在安装时失败，但在包阶段没有 NoClassDefFoundError

> ID：15925551
> 
> 赞同：0
> 
> 时间：2013-04-10T12:16:25.813
> 
> 标签：maven, surefire

我有一个奇怪的问题。
当我像这样构建我的 Maven 项目时：
`mvn clean package` *它编译并成功运行单元测试*，但是当我这样做时
`mvn clean install` *它仍然编译，报告构建成功但显示这个奇怪的错误：*

```
java.lang.NoClassDefFoundError: com/foo/BarClass
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at com.foo.BarTest.shouldTestSomething(BarTest.java:35) 
```

我有 maven 3.0.4、surefire-plugin-version 2.14、junit 4.11 这是我的代表性部分`pom.xml`

```
<build>
        <pluginManagement>
            <plugins>               
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>2.14</version>
                </plugin>
         </pluginManagement>
</build>
<dependencies>
<dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>
</dependencies> 
```

我也尝试过更改surefire / junit版本以及surefire，`<useSystemClassLoader>false</useSystemClassLoader>`但仍然遇到问题。
我真的不明白`NoClassDefFound`错误的原因......你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:03:55.413

所以最后我解决了这个混乱的问题：
我还`cobertura`运行了插件（就像任何高质量的软件项目一样:)，它检测了类从而触发了重新编译，因此重新运行了单元测试，因此奇怪的`NoClassDefError`
Huh，多么忙碌的一天！

# sql - Sql：从两个表中选择数据而不重复第一个表值？

> ID：15925556
> 
> 赞同：2
> 
> 时间：2013-04-10T12:16:40.763
> 
> 标签：sql, sql-server, model-view-controller, linq-to-sql, foreign-key-relationship

```
CREATE TABLE [dbo].[test](
[id] [bigint] IDENTITY(1,1) NOT NULL,
[ctext] [varchar](12) NOT NULL,
 CONSTRAINT [PK_test] PRIMARY KEY CLUSTERED 
(
[id] ASC
))

CREATE TABLE [dbo].[Comments](
[id] [bigint] IDENTITY(1,1) NOT NULL,
[cComments] [varchar](250) NOT NULL,
[fk_test] [bigint] NOT NULL)
GO

ALTER TABLE [dbo].[Comments]  WITH CHECK ADD  CONSTRAINT [FK_Comments_test] FOREIGN KEY([fk_test])
REFERENCES [dbo].[test] ([id])
ON DELETE CASCADE 
```

两个表以正常的一对多关系链接。

我想要一个返回列表列表的 Select：

```
-----------------------------------------------------
|test.id|test.cnumber|comments.id|comments.cComments|
|-------|------------|-----------|------------------|
| 1     | mytest1    |     1     |   comment1       |
|       |            |     2     |   comment2       |
|       |            |     3     |   comment3       |
|       |            |     4     |   comment4       |
|       |            |     5     |   comment5       |
|       |            |     6     |   comment6       |
| 2     | mytest2    |     7     |   comment7       |
|       |            |     8     |   comment8       |
| 3     | mytest3    |     7     |   comment9       |
----------------------------------------------------- 
```

有什么办法吗？

我试图用 sql 存储过程替换 linq。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:31:25.417

试试这个解决方案 -

```
DECLARE @test TABLE 
(
  [id] [bigint] IDENTITY(1,1) NOT NULL
, [ctext] [varchar](12) NOT NULL
)

DECLARE @Comments TABLE
(
[id] [bigint] IDENTITY(1,1) NOT NULL,
[cComments] [varchar](250) NOT NULL,
[fk_test] [bigint] NOT NULL
)

INSERT INTO @test (ctext)
VALUES ('1'), ('2')

INSERT INTO @Comments (cComments, fk_test)
VALUES ('123', 1), ('123', 1), ('123', 2), ('123', 2)

SELECT  id = CASE WHEN d.rcount = 1 THEN d.id END
, cnumber = CASE WHEN d.rcount = 1 THEN d.cnumber  END
, d.commentid
, d.cComments
FROM (
SELECT 
   t.id
 , cnumber = t.ctext
 , commentid = c.id
 , c.cComments
 , rcount = ROW_NUMBER() OVER (PARTITION BY t.[id] ORDER BY t.[id] DESC)
FROM @test t
JOIN @Comments c ON t.id = c.fk_test
) d 
```

# frameworks - 支持 DDD 的企业应用框架

> ID：15925584
> 
> 赞同：1
> 
> 时间：2013-04-10T12:17:38.027
> 
> 标签：frameworks, domain-driven-design, habanero

我花了很短的时间研究[Habanero](http://www.habanerolabs.com/)，我发现它是在很短的时间内制作企业应用程序的好方法。正如开发人员所说，Habanero 使用的模式是“Active Record”。我的问题是：

1.  有任何类似的应用程序，如 Habanero，通过确定聚合根、实体和值对象来完全支持领域驱动设计
2.  在大型组织中使用此类工具是否正确的决定
3.  是否值得在这样的工具上培训我们的团队

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T13:13:08.397

对领域驱动设计的框架支持与支持数据驱动应用程序的框架完全不同。这样的框架应该可以提高开发人员的生产力，这些开发人员使用一种随业务发展**并由领域专家学习**的无处不在的语言。

他们不应该面对聚合、根、值对象等概念，因为它们只是建模概念、**概念工具**，而是简化开发过程的方法。`AggregateRoot`因此，暴露名为`Entity`或`ValueObject`的抽象类或接口的框架从根本上被破坏了。它没有为应用程序提供任何真正的价值，只是无用的间接。

然而：

1.  [这里列出](http://en.wikipedia.org/wiki/Domain_driven_design#Software_tools_to_support_domain-driven_design)了一些旨在支持领域驱动设计的框架。此外，我正在[根据](http://epic.tesio.it/)以前运行良好的经验自行开发
2.  显然，这取决于。例如，我们成功地使用了 Epic 的所有建模模式。
    我们也使用了一些“自制”框架，其中一些被证明确实提高了生产力。然而，这样的框架（如果有用的话）总是有陡峭的学习曲线，这在很大程度上取决于软件的[可靠性](http://epic.tesio.it/2012/12/05/exceptions-are-the-norm.html)以及开发人员的技能。
3.  这取决于框架、业务的复杂性（如果您不需要领域专家来理解它，那么您就不需要 DDD）以及开发人员。我在不同的背景下使用不同的框架面临成功的故事和巨大的失败。我还召开了一个讨论该主题的会议（您可以在[此处](http://www.slideshare.net/giacomotesio/epicnet-processes-patterns-and-architectures)查看幻灯片）。

# java - 找不到 bean 定义，我也应该注释一个接口吗？

> ID：15925588
> 
> 赞同：0
> 
> 时间：2013-04-10T12:17:42.017
> 
> 标签：java, spring, spring-mvc, spring-3

我有一个如下所示的界面

```
 public interface UserManager {

      void insertUser(User user);
   ....... 
```

现在我有一个实现类如下

```
@Service
public class UserManagerImpl implements UserManager {

    @Autowired
    private UserDAO userDAO; 
```

在我的控制器中

```
@Controller
public class ExampleGizmoController {

    @Autowired
    private UserManager userManager; 
```

UserDAOImpl 是

```
@Service
public class UserDAOImpl implements UserDAO {

    @Autowired
    private SessionFactory sessionFactory; 
```

我的 application-context.xml

```
<context:annotation-config/>
<context:component-scan base-package="com.foo" /> 
```

它扫描我所有的包。我已经将它部署为war文件，当部署发生时，userManager属性没有自动连接到ExampleGizmoController，并在tomcat中显示错误，如下所示

```
Spring-MVC threw load() exception: org.springframework.beans.factory.NoSuchBeanDefinitionException:
No qualifying bean of type [com.foo.UserManager] found for dependency: expected at least 1 bean
which qualifies as autowire candidate for this dependency. Dependency annotations:
{@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

我能够确定自动装配没有发生，即使它是注释驱动的并且组件扫描已打开。为了自动装配工作，我还应该做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:51:25.193

```
 <mvc:annotation-driven/> 
```

您的配置文件中也需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:29:39.327

也许这很愚蠢......但尝试从 UserManager Impl 中删除实现 UserManager ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:45:35.463

你应该使用`@Service("userManager")`. 它是一种告诉 Spring 你想`UserManagerImpl`用“userManager”命名你的 bean 实例的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-16T13:17:07.503

我遇到了同样的错误，但我还有一个检索用户管理器信息的 dao 类。您应该将 @Repository 注释添加到 dao 类。你的另一个道类看起来是这样的；

```
@Repository("userManagerDao")
public class UserManagerDAOImpl implements UserManagerDao{
    public UserManagerDTO createNewUserManager() {
        UserManagerDTO userManager = new UserManagerDTO();
        userManager.setId(1);
        userManager.setFirstName("First Name");
        userManager.setLastName("Last Name");
        return userManager;
    }
} 
```

# tcp - /usr/include/netinet/in.h:138：注意：候选人是：in_addr& in_addr::operator=(const in_addr&)

> ID：15925589
> 
> 赞同：0
> 
> 时间：2013-04-10T12:17:43.443
> 
> 标签：tcp, client-server

我写了一个简单的 TCP/IP 网络应用程序（服务器和客户端）。在客户端应用程序的代码中，我这样做了，然后在 Linux 下使用**'g++ -o client client.cpp'构建。**

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <errno.h>
#include <unistd.h>
#include <netdb.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <arpa/inet.h>

int main(int argc, char* argv[])
{
    struct sockaddr_in server_addr;
    struct hostent* host;

    ....
    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(nPort);
    server_addr.sin_addr = *((struct in_ddr*)host->h_addr); /*It complains as below while building*/
    ....
} 
```

client.cpp：在函数'int main（int，char**）'中：client.cpp：56：错误：'server_addr.sockaddr_in :: sin_addr = *（in_ddr *）（*主机中的'operator ='不匹配->hostent::h_addr_list)' /usr/include/netinet/in.h:138：注意：候选者是：in_addr& in_addr::operator=(const in_addr&) ***错误代码 1 clearmake：错误：“客户端的构建脚本失败” "

我的实施发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T05:18:29.110

您正在尝试将地址列表设置为单个地址。您需要使用方括号来引用您想要的地址。`host->h_addr_list[0]`

至少这是我从你的错误中得到的。

[**参考来源**](http://www.cs.tufts.edu/comp/112/examples/Names_and_Numbers/gethostbyname.c)

# database - Postgres - 在应用程序之间共享数据集

> ID：15925591
> 
> 赞同：1
> 
> 时间：2013-04-10T12:17:45.030
> 
> 标签：database, postgresql

我有两个 Web 应用程序，一个是管理的，一个是公共的。虽然两者都有相当多的单独数据，但两者都使用了某个部分，我们称之为项目。更准确地说，项目在管理应用程序中创建和编辑，然后在公共应用程序中显示。

由于两者都使用 PostgreSQL 作为数据库后端，我认为它们可以在数据库级别加入 - 我将在公共数据库中创建视图，通过 dblink 将数据获取到管理数据库。

考虑到以下限制，这是一个好的解决方案吗？

*   项目挺多的，
*   公共应用程序将对数据集进行广泛搜索，
*   数据在公共方面有点陈旧是可以的，
*   目前应用程序使用相同的物理数据库服务器，但将来可能会拆分；

如果没有，你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:33:18.747

与其将数据放在单独的数据库中，不如将所有内容放在一个数据库中，然后使用[模式](http://www.postgresql.org/docs/current/interactive/ddl-schemas.html)和[访问权限](http://www.postgresql.org/docs/current/interactive/user-manag.html)将它们分开。

具体来说：

*   公共站点和管理站点应使用不同的“登录角色”（用户）进行连接。
*   仅由管理站点使用的表可能位于`admin`模式中，并且公共用户不会`USAGE`授予该模式。
*   数据的其他部分可以放入命名模式中，其中一些可以由两个站点完全访问，其中一些可以混合使用。（如果你很好地划分你的模式，你可以使用`GRANT ... ON ALL TABLES IN SCHEMA`和。）[`ALTER DEFAULT PRIVILEGES`](http://www.postgresql.org/docs/current/interactive/sql-alterdefaultprivileges.html)
*   正如您所说，公共应该具有某些只读访问权限的表可以在视图中引用。公共用户可以`GRANT`访问这些视图而不是基础表。视图可以引用另一个模式中的表，甚至可以跨多个模式引用，如果这有助于您管理事物的话。
*   `INSERT`或者，可以通过简单地不授予该表的公共用户和`UPDATE`权限来授予对整个表的只读访问权限。

您甚至可能会发现将 public 和 admin 视为不同的应用程序很有用，而是将其视为同一应用程序的不同前端接口 - 例如，可能存在应该在它们之间共享而不是复制和粘贴的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:34:02.500

让公共`admin`直接访问数据库并使用角色控制权限。

[数据库角色](http://www.postgresql.org/docs/current/interactive/user-manag.html)

# java - 2个系列的区别？（collection1 中的元素，但 collection2 中没有）

> ID：15925592
> 
> 赞同：9
> 
> 时间：2013-04-10T12:17:46.303
> 
> 标签：java, list, collections, set, guava

在 Java 中（也许使用 Guava？），是否提供了一些方法来获取两个`Collection`s 的差异，例如 a`List`和 a`Set` *而无需*修改其中一个`Collection`（否则会有`collection1.removeAll(collection2)`?

在 Guava 中有`Sets.difference(set1,set2)`，但它仅适用于`Set`s，不适用于任意集合。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T12:24:50.567

`Collection`您可以使用内置的s过滤第一个`Predicate`：

```
Collections2.filter(c1, Predicates.not(Predicates.in(c2)) 
```

它适用于任何类型的`Collection`s，但显然如果`c2`是 a更好`Set`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T12:27:13.190

ApacheCommons CollectionUtils 有一个名为[disjuction](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#disjunction(java.lang.Iterable,%20java.lang.Iterable))的方法

> 返回包含给定 Iterables 的唯一析取（对称差）的 Collection

# android - Android：始终以纵向启动 Activity 但识别方向变化

> ID：15925594
> 
> 赞同：0
> 
> 时间：2013-04-10T12:17:48.650
> 
> 标签：android, android-activity, orientation, screen-orientation, landscape-portrait

我想开始一个新的活动/意图总是纵向（即使设备是横向的）

如果我使用`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);` Activity 被锁定为纵向，但我想识别方向变化。

所以我想我必须`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);`在第一次启动时调用，当活动创建时，需要一个监听器来移除这个限制。

但是我应该用哪些方法来做呢？在构造函数中，或在`onCreate()`或其他地方？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:21:11.070

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
        // TODO Auto-generated method stub
        super.onConfigurationChanged(newConfig);

        System.out.println("on config change method called.");

        if(Configuration.ORIENTATION_LANDSCAPE==newConfig.orientation)
        {

                    //Portatrate to landscape...
            System.out.println("on config change method called portraite mode.");
        }
        else if(Configuration.ORIENTATION_PORTRAIT==newConfig.orientation)
        {
            //Landscape to portraite....
            System.out.println("on config change method called landscape mode.");
        }
        } 
```

# dynamics-crm-2011 - 如何读取导出的 Excel 文件？

> ID：15925595
> 
> 赞同：-1
> 
> 时间：2013-04-10T12:17:53.800
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

我已经导出实体记录`Export to Excel`，并将其保存在本地驱动器中。如何以表格格式制作这些数据。当我在记事本中打开它时，我显示它有数据。我只`OpenOffice 3.3`安装在我的机器上。我没有没有 MS Office Excel。`OpenOffice`但它没有显示任何内容。

仅供参考，我想添加新/更新数据，然后将其导入 CRM。我的目标是添加新数据并创建一个`CSV`文件。

请给我一个方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:10:05.483

功能生成的文件`Export to Excel`实际上是`XML`文档。

当你选择`Static Worksheet with records from this page`不选择时`Make this data available for re-importing by including required column headings`，你会得到一个带有`XLS`扩展名的文件，但文件格式仍然是`XML`.

当您选择其他选项来导出数据时，您将获得一个带有`XML`扩展名的文件。

在这两种情况下，文件都不兼容`OpenOffice`，`LibreOffice`或其他在线编辑器（据我所知），如果您将文件上传到 SkyDrive 并尝试打开`Excel Web App`将返回错误。

您需要使用`Microsoft Excel`来查看或修改这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:26:37.743

最好的办法是购买 Microsoft Office 2013 或 Microsoft Office 365，但您可以：

*   将 xls 文件上传到 Google Drive，进行更改，然后下载为 csv
*   免费安装 Microsoft Office Starter
*   免费安装 Libre Office 4

导出是一个 xls 文件，旨在导出到 Micosoft Office Excel。

# javascript - 如果元素没有 name 和 id 属性，如何处理它？

> ID：15925596
> 
> 赞同：0
> 
> 时间：2013-04-10T12:17:56.513
> 
> 标签：javascript

我正在使用一些元素（`input`，`select`等`textarea`）通过 XHR（ajax）将数据从客户端输入发送到服务器。

在处理数据和发送过程中，我通过模态对话框向用户提供信息并阻止他的屏幕。

发送成功且一切正常后，提供“成功信息”并解锁他的屏幕。

我还必须清理（重置）输入文件。我没有使用表单，所以我不能使用`reset()`.

我尝试使用以下 JavaScript 执行此操作：

```
function hedefiSifirla(anacElementID) {
    var anacElement = (nY(anacElementID) ? nY(anacElementID) : anacElementID);

    for (xi, xiLen = anacElement.children.length; xi < xiLen; xi++) {
        var elm = anacElement.children[xi];

        if (elm.hasChildNodes()) {
            hedefiSifirla(elm)
        }

        if ((elm.tagName == 'input' && elm.type != 'checkbox') || elm.tagName == 'textarea') {
            alert(elm.id);
            elm.value = '';
        }

        if (elm.tagName == 'input' && elm.type == 'checkbox') {
            elm.checked = false;
            alert(elm.id);
        }

        if (elm.tagName == 'select') {
            elm.options.length = 0;
            alert(elm.id);
        }
    }
} 
```

这不适用于任何错误日志。我哪里做错了？

# asp.net-mvc - 在asp.net MVC4中动态加载css文件

> ID：15925598
> 
> 赞同：0
> 
> 时间：2013-04-10T12:18:05.503
> 
> 标签：asp.net-mvc, css

**我想知道这是一种正确的方法吗？** 我有一个用于针对移动设备、平板电脑和浏览器的应用程序。在我正在使用的javascript中。这是在 html 页面中工作的。现在我已经在 asp.net mvc 4 中迁移了这个应用程序并正常工作，我定义了**rootpath**变量并将其分配给**"../"**。并将其连接起来，如下图所示，项目结构如图所示。我想在 index.cshtml 视图中使用它，这也是我的默认视图。

```
 var userAgent = window.navigator.userAgent;
        var rootpath ="../";
        if (userAgent.indexOf("iPhone") >= 0 || userAgent.indexOf("iPad") >= 0) {
            isiOS = true;
        }
        if (userAgent.indexOf("Android") >= 0 || userAgent.indexOf("iPhone") >= 0) {
            isMobileDevice = true;
            dojo.byId('dynamicStyleSheet').href = rootpath + "styles/mobile.css";

        }
        else if (userAgent.indexOf("iPad") >= 0) {
            isTablet = true;
            dojo.byId('dynamicStyleSheet').href = rootpath + "styles/tablet.css";

        }
        else {
            isBrowser = true;

            dojo.byId('dynamicStyleSheet').href = rootpath + "styles/browser.css";

        } 
```

![在此处输入图像描述](https://i.stack.imgur.com/r0sIN.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:22:20.957

对于样式，您可以这样做。从 Razor 视图中，它应该能够加载您想要的所有样式元素。

```
<link href="../../AppStyles/templatemo_style.css" rel="stylesheet" type="text/css" /> 
```

# javascript - 使用 jquery 在链接中包装匹配的单词

> ID：15925602
> 
> 赞同：0
> 
> 时间：2013-04-10T12:18:13.447
> 
> 标签：javascript, jquery, regex

我正在开发一种功能，它将匹配`tags`或`keywords`转换为特定`DIV`标签内的链接。

背景：我将文章正文和与文章相关的关键字存储在数据库中，同时在网页中显示文章时，我将关键字 as 和数组传递给 jQuery 函数，然后搜索内部文本 `<div id ="article-detail-desc" > ...</div>`并将每个匹配元素转换为链接。

我的代码工作正常，但它有流程。

1.  它不会搜索任何匹配的单词，即使它是破坏我的 HTML 代码的单词或 HTML 元素的一部分。

如何修改此函数以便它也搜索匹配的单词

```
function HighlightKeywords(keywords)
{        
    var el = $("#article-detail-desc");
    var language = "en-US";
    var pid = 100;
    var issueID = 10; 

    $(keywords).each(function()
    {
        var pattern = new RegExp("("+this+")", ["gi"]);
         var rs = "<a class='ad-keyword-selected' href='en/search.aspx?Language="+language+"&PageId="+pid+"&issue="+issueID+"&search=$1' title='Seach website for:  $1'><span style='color:#990044; tex-decoration:none;'>$1</span></a>";
        el.html(el.html().replace(pattern, rs));
    });
}   

HighlightKeywords(["Amazon","Google","Starbucks","UK","US","tax havens","Singapore","Hong Kong","Dubai","New Jersey"]); 
```

小提琴上的链接[http://jsfiddle.net/Dgysc/25/](http://jsfiddle.net/Dgysc/25/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:46:18.227

我认为最简单的方法是使用[单词边界](http://www.regular-expressions.info/wordboundaries.html)。所以你会有这样的：

```
var pattern = new RegExp("(\\b"+this+"\\b)", ["gi"]); 
```

**编辑：**
快速破解以确保它`US`与 html 元素内部不匹配：

```
var pattern = new RegExp("(\\b"+this+"\\b)(?![^<]*?>)", ["gi"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:56:56.673

由于我们使用的是直接词匹配，因此在关键字前后添加空格可能会对您有所帮助，

```
var pattern = new RegExp("( "+this+" )", ["gi"]); 
```

[http://jsfiddle.net/Dgysc/28/](http://jsfiddle.net/Dgysc/28/)

# web-services - wsdl 在 SoapUI 中工作正常，但在通过客户端访问时收到异常

> ID：15925609
> 
> 赞同：1
> 
> 时间：2013-04-10T12:18:34.193
> 
> 标签：web-services, jax-ws, jax-rs

我有运行良好的客户端 wsdl，当尝试通过soap-UI调用时，我需要通过Web服务客户端代码调用它，因此我使用'wsimport'生成了源代码并尝试再次调用它，但它返回以下错误：

```
17:28:20,594 ERROR [CommonClient] Exception caught while (preparing for) performing the invocation: 
javax.xml.ws.soap.SOAPFaultException: Unprocessed 'mustUnderstand' header element: {http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd}Security
    at org.jboss.ws.core.jaxws.SOAPFaultHelperJAXWS.getSOAPFaultException(SOAPFaultHelperJAXWS.java:85)
    at org.jboss.ws.core.jaxws.binding.SOAP11BindingJAXWS.throwFaultException(SOAP11BindingJAXWS.java:107)
    at org.jboss.ws.core.CommonSOAP11Binding.verifyUnderstoodHeader(CommonSOAP11Binding.java:86)
    at org.jboss.ws.core.CommonSOAPBinding.checkMustUnderstand(CommonSOAPBinding.java:994)
    at org.jboss.ws.core.CommonClient.invoke(CommonClient.java:385)
    at org.jboss.ws.core.jaxws.client.ClientImpl.invoke(ClientImpl.java:232)
    at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:171)
    at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:157)
    at com.sun.proxy.$Proxy866.getAllowableActions(Unknown Source)
    at com.test.web.services.User.getUsrData(UserResource.java:82)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:140)
    at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:252)
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:217)
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:206)
    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:514)
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:491)
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:120)
    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:200)
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:48)
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:43)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:183)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:95)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:599)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:451) 
```

请帮助我。源代码是：

```
@Path("/users")

@Produces(MediaType.TEXT_XML)
public class User {

    @GET
    @Path("/getdata/{param1}/{param2}")
    public Response getUsrData(@PathParam("param1") String param1,@PathParam("param2") String param2) {

        try {           
             <calling api from wsimport generated code and passing parameters to it.> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:37:52.533

知道了。实际上我需要添加带有登录凭据的标题。

```
<wsse:Security>
        <wsse:UsernameToken>
            <wsse:Username>Joe</wsse:Username>
            <wsse:Password>Java</wsse:Password>
        </wsse:UsernameToken>
    </wsse:Security> 
```

# c# - 如何合并多个pdf文件（在运行时生成）？

> ID：15925616
> 
> 赞同：19
> 
> 时间：2013-04-10T12:18:51.973
> 
> 标签：c#, asp.net, pdf, itextsharp, rdlc

如何合并多个 pdf 文件（在运行时生成）`ItextSharp`然后打印它们。

我找到了以下[链接](https://stackoverflow.com/questions/6029142/merging-multiple-pdfs-using-itextsharp-in-c-net)，但考虑到存储的 pdf 文件，该方法需要 pdf 名称，这不是我的情况。

* * *

我有多个报告，我将`pdf files`通过此方法将它们转换为：

```
private void AddReportToResponse(LocalReport followsReport)
{
    string mimeType;
    string encoding;
    string extension;
    string[] streams = new string[100];
    Warning[] warnings = new Warning[100];
    byte[] pdfStream = followsReport.Render("PDF", "", out mimeType, out encoding, out extension, out streams, out warnings);
  //Response.Clear();
  //Response.ContentType = mimeType;
  //Response.AddHeader("content-disposition", "attachment; filename=Application." + extension);
  //Response.BinaryWrite(pdfStream);
  //Response.End();
} 
```

现在我想将所有这些生成的文件（`Bytes`）合并到一个 pdf 文件中以打印它

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-11T09:39:24.110

如果要使用 iText(Sharp) 合并源文档，有两种基本情况：

1.  您真的想合并文档，以原始格式获取页面，尽可能多地传输其内容和交互式注释。在这种情况下，您应该使用基于`Pdf*Copy*`类家族成员的解决方案。

2.  您实际上希望将源文档中的页面集成到新文档中，但希望新文档控制一般格式并且不关心原始文档中的交互功能（注释......）（甚至想要摆脱其中）。在这种情况下，您应该使用基于`PdfWriter`类的解决方案。

[您可以在iText in Action - 2nd Edition的](http://itextpdf.com/book/)[第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)（尤其是第 6.4 节）中找到详细信息。Java 示例代码可在[此处](http://itextpdf.com/book/chapter.php?id=6)访问，C# 化版本可[在此处访问](http://kuujinbo.info/iTextInAction2Ed/index.aspx)。

一个简单的使用示例`PdfCopy`是[Concatenate.java](http://itextpdf.com/examples/iia.php?id=123) / [Concatenate.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=Concatenate)。核心代码是：

```
byte[] mergedPdf = null;
using (MemoryStream ms = new MemoryStream())
{
    using (Document document = new Document())
    {
        using (PdfCopy copy = new PdfCopy(document, ms))
        {
            document.Open();

            for (int i = 0; i < pdf.Count; ++i)
            {
                PdfReader reader = new PdfReader(pdf[i]);
                // loop over the pages in that document
                int n = reader.NumberOfPages;
                for (int page = 0; page < n; )
                {
                    copy.AddPage(copy.GetImportedPage(reader, ++page));
                }
            }
        }
    }
    mergedPdf = ms.ToArray();
} 
```

这里`pdf`可以定义为`List<byte[]>`立即包含源文档（适用于合并中间内存文档的用例）或`List<String>`包含源文档文件的名称（适用于从磁盘合并文档）。

参考章节末尾的概述总结了提到的类的用法：

*   `PdfCopy`：从一个或多个现有 PDF 文档复制页面。主要缺点：`PdfCopy`不检测冗余内容，并且在连接表单时失败。

*   `PdfCopyFields`：将不同表单的字段放在一个表单中。可用于避免使用`PdfCopy`. 内存使用可能是一个问题。

*   `PdfSmartCopy`：从一个或多个现有 PDF 文档复制页面。`PdfSmartCopy`能够检测冗余内容，但它需要比`PdfCopy`.

*   `PdfWriter`：从头开始生成 PDF 文档。可以从其他 PDF 文档导入页面。主要缺点是导入页面的所有交互功能（注释、书签、字段等）都会在此过程中丢失。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-02T02:45:07.643

我使用 iTextsharp 和 c# 来组合 pdf 文件。这是我使用的代码。

```
string[] lstFiles=new string[3];
    lstFiles[0]=@"C:/pdf/1.pdf";
    lstFiles[1]=@"C:/pdf/2.pdf";
    lstFiles[2]=@"C:/pdf/3.pdf";

    PdfReader reader = null;
    Document sourceDocument = null;
    PdfCopy pdfCopyProvider = null;
    PdfImportedPage importedPage;
    string outputPdfPath=@"C:/pdf/new.pdf";

    sourceDocument = new Document();
    pdfCopyProvider = new PdfCopy(sourceDocument, new System.IO.FileStream(outputPdfPath, System.IO.FileMode.Create));

    //Open the output file
    sourceDocument.Open();

    try
    {
        //Loop through the files list
        for (int f = 0; f < lstFiles.Length-1; f++)
        {
            int pages =get_pageCcount(lstFiles[f]);

            reader = new PdfReader(lstFiles[f]);
            //Add pages of current file
            for (int i = 1; i <= pages; i++)
            {
                importedPage = pdfCopyProvider.GetImportedPage(reader, i);
                pdfCopyProvider.AddPage(importedPage);
            }

            reader.Close();
         }
        //At the end save the output file
        sourceDocument.Close();
    }
    catch (Exception ex)
    {
        throw ex;
    }

private int get_pageCcount(string file)
{
    using (StreamReader sr = new StreamReader(File.OpenRead(file)))
    {
        Regex regex = new Regex(@"/Type\s*/Page[^s]");
        MatchCollection matches = regex.Matches(sr.ReadToEnd());

        return matches.Count;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-10T19:08:18.673

这是我从一个旧项目中提取的一些代码。这是一个网络应用程序，但我使用 iTextSharp 合并 pdf 文件然后打印它们。

```
public static class PdfMerger
    {
        /// <summary>
        /// Merge pdf files.
        /// </summary>
        /// <param name="sourceFiles">PDF files being merged.</param>
        /// <returns></returns>
        public static byte[] MergeFiles(List<Stream> sourceFiles)
        {
            Document document = new Document();
            MemoryStream output = new MemoryStream();

            try
            {
                // Initialize pdf writer
                PdfWriter writer = PdfWriter.GetInstance(document, output);
                writer.PageEvent = new PdfPageEvents();

                // Open document to write
                document.Open();
                PdfContentByte content = writer.DirectContent;

                // Iterate through all pdf documents
                for (int fileCounter = 0; fileCounter < sourceFiles.Count; fileCounter++)
                {
                    // Create pdf reader
                    PdfReader reader = new PdfReader(sourceFiles[fileCounter]);
                    int numberOfPages = reader.NumberOfPages;

                    // Iterate through all pages
                    for (int currentPageIndex = 1; currentPageIndex <=
                                        numberOfPages; currentPageIndex++)
                    {
                        // Determine page size for the current page
                        document.SetPageSize(
                            reader.GetPageSizeWithRotation(currentPageIndex));

                        // Create page
                        document.NewPage();
                        PdfImportedPage importedPage =
                            writer.GetImportedPage(reader, currentPageIndex);

                        // Determine page orientation
                        int pageOrientation = reader.GetPageRotation(currentPageIndex);
                        if ((pageOrientation == 90) || (pageOrientation == 270))
                        {
                            content.AddTemplate(importedPage, 0, -1f, 1f, 0, 0,
                                reader.GetPageSizeWithRotation(currentPageIndex).Height);
                        }
                        else
                        {
                            content.AddTemplate(importedPage, 1f, 0, 0, 1f, 0, 0);
                        }
                    }
                }
            }
            catch (Exception exception)
            {
                throw new Exception("There has an unexpected exception" +
                        " occured during the pdf merging process.", exception);
            }
            finally
            {
                document.Close();
            }
            return output.GetBuffer();
        }
    }

    /// <summary>
    /// Implements custom page events.
    /// </summary>
    internal class PdfPageEvents : IPdfPageEvent
    {
        #region members
        private BaseFont _baseFont = null;
        private PdfContentByte _content;
        #endregion

        #region IPdfPageEvent Members
        public void OnOpenDocument(PdfWriter writer, Document document)
        {
            _baseFont = BaseFont.CreateFont(BaseFont.HELVETICA,
                                BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
            _content = writer.DirectContent;
        }

        public void OnStartPage(PdfWriter writer, Document document)
        { }

        public void OnEndPage(PdfWriter writer, Document document)
        { }

        public void OnCloseDocument(PdfWriter writer, Document document)
        { }

        public void OnParagraph(PdfWriter writer,
                    Document document, float paragraphPosition)
        { }

        public void OnParagraphEnd(PdfWriter writer,
                    Document document, float paragraphPosition)
        { }

        public void OnChapter(PdfWriter writer, Document document,
                                float paragraphPosition, Paragraph title)
        { }

        public void OnChapterEnd(PdfWriter writer,
                    Document document, float paragraphPosition)
        { }

        public void OnSection(PdfWriter writer, Document document,
                    float paragraphPosition, int depth, Paragraph title)
        { }

        public void OnSectionEnd(PdfWriter writer,
                    Document document, float paragraphPosition)
        { }

        public void OnGenericTag(PdfWriter writer, Document document,
                                    Rectangle rect, string text)
        { }
        #endregion

        private float GetCenterTextPosition(string text, PdfWriter writer)
        {
            return writer.PageSize.Width / 2 - _baseFont.GetWidthPoint(text, 8) / 2;
        }
    } 
```

这不是我写的，而是做了一些修改。我不记得我在哪里找到的。合并 PDF 后，我会调用此方法插入 javascript，以便在打开 PDF 时打开打印对话框。如果您将 bSilent 更改为 true，那么它应该以静默方式打印到其默认打印机。

```
public Stream addPrintJStoPDF(Stream thePDF)
{
    MemoryStream outPutStream = null;
    PRStream finalStream = null;
    PdfDictionary page = null;
    string content = null;

    //Open the stream with iTextSharp
    var reader = new PdfReader(thePDF);

    outPutStream = new MemoryStream(finalStream.GetBytes());
    var stamper = new PdfStamper(reader, (MemoryStream)outPutStream);
    var jsText = "var res = app.setTimeOut('this.print({bUI: true, bSilent: false, bShrinkToFit: false});', 200);";
    //Add the javascript to the PDF
    stamper.JavaScript = jsText;

    stamper.FormFlattening = true;
    stamper.Writer.CloseStream = false;
    stamper.Close();

    //Set the stream to the beginning
    outPutStream.Position = 0;

    return outPutStream;
} 
```

不确定上面的代码写得有多好，因为我是从其他地方拉出来的，而且我根本没有深入使用 iTextSharp，但我知道它确实可以合并我在运行时生成的 PDF。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-06T13:25:31.000

使用[iTextSharp-LGPL](https://www.nuget.org/packages/iTextSharp-LGPL/) 4.1.6 测试：

```
 public static byte[] ConcatenatePdfs(IEnumerable<byte[]> documents)
    {
        using (var ms = new MemoryStream())
        {
            var outputDocument = new Document();
            var writer = new PdfCopy(outputDocument, ms);
            outputDocument.Open();

            foreach (var doc in documents)
            {
                var reader = new PdfReader(doc);
                for (var i = 1; i <= reader.NumberOfPages; i++)
                {
                    writer.AddPage(writer.GetImportedPage(reader, i));
                }
                writer.FreeReader(reader);
                reader.Close();
            }

            writer.Close();
            outputDocument.Close();
            var allPagesContent = ms.GetBuffer();
            ms.Flush();

            return allPagesContent;
        }
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-23T09:28:28.850

为了避免提到的内存问题，我使用文件流而不是内存流（在[ITextSharp Out of memory exception merging multiple pdf](https://stackoverflow.com/questions/29415008/itextsharp-out-of-memory-exception-merging-multiple-pdf)中提到）来合并 pdf 文件：

```
 var parentDirectory = Directory.GetParent(SelectedDocuments[0].FilePath);
        var savePath = parentDirectory + "\\MergedDocument.pdf";

        using (var fs = new FileStream(savePath, FileMode.Create))
        {
            using (var document = new Document())
            {
                using (var pdfCopy = new PdfCopy(document, fs))
                {
                    document.Open();
                    for (var i = 0; i < SelectedDocuments.Count; i++)
                    {
                        using (var pdfReader = new PdfReader(SelectedDocuments[i].FilePath))
                        {
                            for (var page = 0; page < pdfReader.NumberOfPages;)
                            {
                                pdfCopy.AddPage(pdfCopy.GetImportedPage(pdfReader, ++page));
                            }
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-27T11:12:55.497

```
****/*For Multiple PDF Print..!!*/****

<button type="button" id="btnPrintMultiplePdf" runat="server" class="btn btn-primary btn-border btn-sm"
                                                                onserverclick="btnPrintMultiplePdf_click">
                                                                <i class="fa fa-file-pdf-o"></i>Print Multiple pdf</button>

protected void btnPrintMultiplePdf_click(object sender, EventArgs e)
    {
        if (ValidateForMultiplePDF() == true)
        {
            #region Declare Temp Variables..!!
            CheckBox chkList = new CheckBox();
            HiddenField HidNo = new HiddenField();

            string Multi_fofile, Multi_listfile;
            Multi_fofile = Multi_listfile = "";
            Multi_fofile = Server.MapPath("PDFRNew");
            #endregion

            for (int i = 0; i < grdRnew.Rows.Count; i++)
            {
                #region Find Grd Controls..!!
                CheckBox Chk_One = (CheckBox)grdRnew.Rows[i].FindControl("chkOne");
                Label lbl_Year = (Label)grdRnew.Rows[i].FindControl("lblYear");
                Label lbl_No = (Label)grdRnew.Rows[i].FindControl("lblCode");
                #endregion

                if (Chk_One.Checked == true)
                {
                    HidNo .Value = llbl_No .Text.Trim()+ lbl_Year .Text;

                    if (File.Exists(Multi_fofile + "\\" + HidNo.Value.ToString() + ".pdf"))
                    {
                        #region Get Multiple Files Name And Paths..!!
                        if (Multi_listfile != "")
                        {
                            Multi_listfile = Multi_listfile + ",";
                        }
                        Multi_listfile = Multi_listfile + Multi_fofile + "\\" + HidNo.Value.ToString() + ".pdf";

                        #endregion
                    }
                }
            }

            #region For Generate Multiple Pdf..!!
            if (Multi_listfile != "")
            {
                String[] Multifiles = Multi_listfile.Split(',');
                string DestinationFile = Server.MapPath("PDFRNew") + "\\Multiple.Pdf";
                MergeFiles(DestinationFile, Multifiles);

                Response.ContentType = "pdf";
                Response.AddHeader("Content-Disposition", "attachment;filename=\"" + DestinationFile + "\"");
                Response.TransmitFile(DestinationFile);
                Response.End();
            }
            else
            {

            }
            #endregion
        }
    }

    private void MergeFiles(string DestinationFile, string[] SourceFiles)
    {
        try
        {
            int f = 0;
            /**we create a reader for a certain Document**/
            PdfReader reader = new PdfReader(SourceFiles[f]);
            /**we retrieve the total number of pages**/
            int n = reader.NumberOfPages;
            /**Console.WriteLine("There are " + n + " pages in the original file.")**/
            /**Step 1: creation of a document-object**/
            Document document = new Document(reader.GetPageSizeWithRotation(1));
            /**Step 2: we create a writer that listens to the Document**/
            PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(DestinationFile, FileMode.Create));
            /**Step 3: we open the Document**/
            document.Open();
            PdfContentByte cb = writer.DirectContent;
            PdfImportedPage page;
            int rotation;
            /**Step 4: We Add Content**/
            while (f < SourceFiles.Length)
            {
                int i = 0;
                while (i < n)
                {
                    i++;
                    document.SetPageSize(reader.GetPageSizeWithRotation(i));
                    document.NewPage();
                    page = writer.GetImportedPage(reader, i);
                    rotation = reader.GetPageRotation(i);
                    if (rotation == 90 || rotation == 270)
                    {
                        cb.AddTemplate(page, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(i).Height);
                    }
                    else
                    {
                        cb.AddTemplate(page, 1f, 0, 0, 1f, 0, 0);
                    }
                    /**Console.WriteLine("Processed page " + i)**/
                }
                f++;
                if (f < SourceFiles.Length)
                {
                    reader = new PdfReader(SourceFiles[f]);
                    /**we retrieve the total number of pages**/
                    n = reader.NumberOfPages;
                    /**Console.WriteLine("There are"+n+"pages in the original file.")**/
                }
            }
            /**Step 5: we Close the Document**/
            document.Close();
        }
        catch (Exception e)
        {
            string strOb = e.Message;
        }
    }

    private bool ValidateForMultiplePDF()
    {
        bool chkList = false;

        foreach (GridViewRow gvr in grdRnew.Rows)
        {
            CheckBox Chk_One = (CheckBox)gvr.FindControl("ChkSelectOne");
            if (Chk_One.Checked == true)
            {
                chkList = true;
            }
        }
        if (chkList == false)
        {
            divStatusMsg.Style.Add("display", "");
            divStatusMsg.Attributes.Add("class", "alert alert-danger alert-dismissable");
            divStatusMsg.InnerText = "ERROR !!...Please Check At Least On CheckBox.";
            grdRnew.Focus();
            set_timeout();
            return false;
        }
        return true;
    } 
```

# jsf-2 - JSF2 生命周期和内置验证

> ID：15925617
> 
> 赞同：0
> 
> 时间：2013-04-10T12:18:53.520
> 
> 标签：jsf-2

在 JSF2 应用程序中，内置验证将在哪个阶段执行？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:28:54.050

这是一个[流程验证](http://www.java-tutorial.ch/java-server-faces/jsf-2-lifecycle#process_validations)阶段。它发生在恢复视图和应用请求之后，因此 JSF 可以处理所有附加的验证器并检查组件的值。

# linux - Linux 中的 TIPC 套接字类型

> ID：15925618
> 
> 赞同：0
> 
> 时间：2013-04-10T12:18:53.867
> 
> 标签：linux, sockets, tipc

在 Linux 中使用 TIPC 套接字时，我应该什么时候使用 TIPC_ADDR_ID、TIPC_ADDR_NAME、TIPC_ADDR_NAMESEQ。有人能说出他们之间有什么不同吗？每个地址有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:27:33.333

在此补丁中添加的评论中似乎解释得相当清楚：http: [//blitiri.com.ar/git/r/pytipc/c/15cae2455c1774400949069e98b3abf5ea20e311/](http://blitiri.com.ar/git/r/pytipc/c/15cae2455c1774400949069e98b3abf5ea20e311/)

即：

```
+Addresses are expressed as (addr_type, v1, v2, v3 [, scope]);
+where addr_type can be one of:
+   TIPC_ADDR_NAMESEQ, TIPC_ADDR_MCAST, TIPC_ADDR_NAME, and TIPC_ADDR_ID;
+and scope can be one of:
+   TIPC_ZONE_SCOPE, TIPC_CLUSTER_SCOPE, and TIPC_NODE_SCOPE.
+
+
+The meaning of v1, v2 and v3 depend on the value of addr_type:
+
+   if addr_type is TIPC_ADDR_NAME:
+       v1 is the server type
+       v2 is the port identifier
+       v3 is ignored
+   if addr_type is TIPC_ADDR_NAMESEQ or TIPC_ADDR_MCAST:
+       v1 is the server type
+       v2 is the lower port number
+       v3 is the upper port number
+   if addr_type is TIPC_ADDR_ID:
+       v1 is the node
+       v2 is the ref
+       v3 is ignored
+
+Even when ignored, v3 must be present and be an integer. 
```

# ruby-on-rails - 错误 - 模板丢失，无法为同一帖子提供 2 个显示视图

> ID：15925620
> 
> 赞同：0
> 
> 时间：2013-04-10T12:19:02.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, controller, views

这是一个后续问题：[在一个动作中呈现不同的视图](https://stackoverflow.com/questions/15923664/two-separate-show-views-for-the-same-database-in-rails/15923870)

我得到的错误是：

```
Template is missing

Missing template items/show, application/show with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. 
```

应该注意的是，我将`show.html.erb`文件复制到两个文件`show_with_edit.html.erb`和`show_with_star.erb`，并删除`show.html.erb`以避免重复。

我的代码`posts_controller.rb`

```
def show
  if signed_in?
    show_signed_in
  else
    show_not_signed_in
  end
end  

def show_signed_in
  #add methods here
  @post = Post.find(params[:id])

  respond_to do |format|
    format.html # show_with_edit.html.erb
    format.json { render json: @post }
  end
  render 'show_with_edit'
end

def show_not_signed_in
  #add methods here
  @post = Post.find(params[:id])

  respond_to do |format|
    format.html # show_with_star.html.erb
    format.json { render json: @post }
  end
  render 'show_with_star'
end 
```

我知道现在这两种不同的观点是相同的，我现在只是放了不同的文字。一旦我确定了这一点，我将为每个视图添加它自己的方法和内容等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:22:54.417

你把渲染放在错误的地方。

```
def show_signed_in
  #add methods here
  @post = Post.find(params[:id])

  respond_to do |format|
    format.html # show_with_edit.html.erb
    format.json { render json: @post }
  end
  render 'show_with_edit'
end 
```

应该

```
def show_signed_in
  #add methods here
  @post = Post.find(params[:id])

  respond_to do |format|
    format.html { render 'show_with_edit' }
    format.json { render json: @post }
  end
end 
```

请注意，`render`它已移至 format.html 块。

这同样适用于 show_not_signed_in。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:42:15.823

请检查您的 route.rb 文件是否正确编写，例如：考虑以下

```
 resources :posts
     collection 
       get :show_not_signed_in
       get :show_signed_in
    end 
```

收集你写的方法是 get 或 post

# blackberry-10 - 获取 Black Berry 10 通话记录

> ID：15925628
> 
> 赞同：0
> 
> 时间：2013-04-10T12:19:29.883
> 
> 标签：blackberry-10

我想编写一个应用程序来从黑莓 10 中获取通话历史记录。任何人都可以指导我使用哪个 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T08:06:00.780

从上面的链接我们只能显示默认的通话记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:14:11.840

使用调用框架是否适用于您正在尝试做的事情？似乎有一种方法可以获取通话记录。

[https://developer.blackberry.com/cascades/documentation/device_platform/invocation/phone.html](https://developer.blackberry.com/cascades/documentation/device_platform/invocation/phone.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T13:07:16.800

这可以使用 OS 10.3.0 中提供的[CallHistoryService](https://developer.blackberry.com/native/reference/cascades/bb__pim__phone__callhistoryservice.html) API来完成

这是一些示例代码，用于获取所有调用并将数字输出到日志：

```
 CallHistoryService callHistoryService;

    // The ID of a valid account is required
    bb::pim::account::Account defaultAccount =
                              callHistoryService.defaultAccount();

    // The default filter will return all calls
    CallHistoryFilter defaultFilter;

    // Contact search can be used to identify the contacts
    CallHistoryParam callHistoryParams;
    callHistoryParams.setContactSearchEnabled(false);

    QList<CallEntryResult> callHistoryResults =
                           callHistoryService.callHistory(
                               defaultAccount.id(),
                               defaultFilter,
                               callHistoryParams);

    foreach (const CallEntryResult &callEntryResult, callHistoryResults) {
        CallEntry callEntry = callEntryResult.call();
        qDebug << "Phone number: " << callEntry.phoneNumber();
    } 
```

# javascript - 在javascript中将字符串转换为日期时间对象

> ID：15925629
> 
> 赞同：1
> 
> 时间：2013-04-10T12:19:34.127
> 
> 标签：javascript

我必须`Date`从 javascript 将当前日期的对象发送到我的后端

我正在做的是

```
var currentDate = new Date();
var dateString = currentDate.getMonth() + "-"
  + currentDate.getDate() + "-" + currentDate.getFullYear() + " "
  + currentDate.getHours() + ":" + currentDate.getMinutes() + ":"
  + currentDate.getSeconds();
var newDate = new Date(Date.parse(dateString)); 
```

但它说*无效*`newDate`日期。

我必须将 3-10-2013 6:10:25 PM 作为日期时间对象发送到后端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:27:35.613

```
var currentDate = new Date(),
    utcYear = currentDate.getUTCFullYear(),
    utcMonth = ('0' + currenctDate.getUTCMonth()).slice(-2),
    utcDay = ('0' + currentDate.getUTCDate()).slice(-2),
    fullDateString = utcMonth.toString() + '/' + utcDay.toString() + '/' + utcYear.toString(); 
```

如果您也想获得时间部分，则同样的原则。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T12:28:21.260

不要`-`在月/日和日期/年之间输入，只需输入空格即可。

```
var currentDate = new Date(),
    dateString = currentDate.getMonth() + " " + 
                  currentDate.getDate() + " " + 
              currentDate.getFullYear() + " " + 
                 currentDate.getHours() + ":" + 
               currentDate.getMinutes() + ":" + 
               currentDate.getSeconds(),
    newDate = new Date(dateString);

console.log(newDate) 
```

# actionscript-3 - Away3d - 用骨骼加载模型

> ID：15925635
> 
> 赞同：0
> 
> 时间：2013-04-10T12:19:48.920
> 
> 标签：actionscript-3, 3dsmax, away3d

我正在尝试在 3dsmax 中创建简单的模型。我的模型只是一个有两块骨头的正方形。

我想知道如何导出它（无论格式），导入到 Away3d 并控制骨骼。

我知道它必须加载骨骼并通过名称获取骨骼。我试图使用 Prefab，但它没有用。

任何想法或例子都会非常有用。

谢谢！

# search - Lucene Search for SiteCore 从结果中获取字段内容

> ID：15925638
> 
> 赞同：-1
> 
> 时间：2013-04-10T12:19:54.247
> 
> 标签：search, lucene, sitecore

海。我遇到了一个小问题。我正在使用 Lucene 搜索，我正在尝试从返回结果中的字段中获取内容。到目前为止，我已经得到了该领域的 ID。现在我得到了该字段的ID'。

```
foreach (var i in hit.Template.InnerItem.InnerData.Fields)
        {
            hitParagraph = hitParagraph + i.ToString();
        } 
```

这给了我该模板内字段的ID，如下所示

[{25BED78C-4957-4165-998A-CA1B52F67497}, 20130307T051813][{5DD74568-4D4B-44C1-B513-0AF5F4CDA34F}, vh\branea1][{8CDC337E-A112-42FB-BBB4-4143751E123F}, 51885b42-bf8b-4f26 -8259-125d352457f3][{D9CF14B1-FA16-4BA6-9288-E8A174D4D522}，......

请帮忙。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:42:57.953

我不完全确定你在追求什么。如果它是特定字段的内容，您可以直接使用`hit["fieldname"]`（假设 hit 是 Sitecore 项目）。或者`hit.Template.InnerItem["fieldname"]`会工作，我想。

我认为您不需要 InnerData 位-如果您想要一个 foreach 循环，我认为您可以这样做：

```
foreach (Field i in hit.Template.InnerItem.Fields)
{
    hitParagraph += i.Value.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:52:18.587

根据我从您的代码中了解到的情况，这`hit`是一个 Sitecore`Item`类实例。要从中获取所有字段，请使用：

```
hit.Fields.ReadAll();
foreach (Field field in hit.Fields)
{
    hitParagraph = hitParagraph + field.Key + ": " + item[field.Key] + "\n";
} 
```

# doctrine-orm - 教义 2 在 where 子句中的日期（querybuilder）

> ID：15925643
> 
> 赞同：2
> 
> 时间：2013-04-10T12:20:06.440
> 
> 标签：doctrine-orm, zend-framework2, dql, query-builder

我有以下问题：我想要一个 where 子句来检查用户是否处于活动状态以及他是否有正确的日期。

用户包含以下内容：

*   状态
*   开始日期
*   结束日期

因此，State 应该保持在 1，然后他应该寻找 state = 1 并且当前日期介于开始日期和结束日期之间。我现在有以下，它工作正常。但开始和结束日期不是必需的。所以它可能是NULL。我怎样才能得到这样的查询：

```
SELECT * 
FROM user/entity/user 
WHERE 
  state = 1 
  AND (
    (startdate <= CURRENT_DATE AND enddate >= CURRENT_DATE) 
    OR startdate == NULL 
    OR enddate == NULL
  ) 
```

，所以我得到了我所有的活跃用户，而不仅仅是临时用户。

我现在设置了以下代码：存储库：

```
 public function searchUser($columns, $order_by, $order)
        {
            //Create a Querybuilder
            $qb = $this->_em->createQueryBuilder();

            //andx is used to build a WHERE clause like (expression 1 AND expression 2)
            $or = $qb->expr()->andx();

            //Select all from the User-Entity
            $qb->select('u')
               ->from('User\Entity\User', 'u');

            foreach($columns as $column => $name) 
            {                        
                if($column == 'state') 
                {
                    if($columns['state']['value'] == '1') {
                        $or = $this->betweenDate($qb, $or);
                        $or = $this->like($columns, $qb, $or);
                    } elseif($columns['state']['value'] == '2') {
                        $or = $this->like($columns, $qb, $or);
                    } elseif($columns['state']['value'] == '3') {
                        $or = $this->outOfDate($qb, $or);
                    }
                } else {
                    //Get a where clause from the like function
                    $or = $this->like($columns, $qb, $or);
                }
            }

            //Set the where-clause
            $qb->where($or);

            //When there is a order_by, set it with the given parameters
            if(isset($order_by)) {
                $qb->orderBy("u.$order_by", $order);
            }

            //Make the query
            $query = $qb->getQuery();

            /*echo('<pre>');
            print_r($query->getResult());
            echo('</pre>');*/

            //Return the result
            return $query->getResult();

        }

        public function betweenDate($qb, $or)
            {
                $or->add($qb->expr()->lte("u.startdate", ":currentDate"));
                $or->add($qb->expr()->gte("u.enddate", ":currentDate"));
                //$or->add($qb->expr()->orx($qb->expr()->eq("u.startdate", null)));
                $qb->setParameter('currentDate', new \DateTime('midnight'));

                return $or;
            }

    //This one works perfect
        public function like($columns, $qb, $or)
            {
                //Foreach column, get the value from the inputfield/dropdown and check if the value
                //is in the given label. 
                foreach($columns as $label=>$column){
                    $value = $column['value'];
                    $or->add($qb->expr()->like("u.$label", ":$label"));
                    $qb->setParameter($label, '%' . $value . '%');
                }

                return $or;
            } 
```

我也将此“用户搜索”用于其他领域。所以它应该从数据库中挑选出所有数据，只有状态不同，因为“过期”不在数据库中。所以它必须以不同的方式检查。希望有人可以提供帮助。

## 问题解决了

```
 $startdate = $qb->expr()->gt("u.startdate", ":currentDate");
        $enddate = $qb->expr()->lt("u.enddate", ":currentDate");

        $or->add($qb->expr()->orX($startdate, $enddate)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:05:41.920

这就是我构建 where 子句的方式：

```
 //CONDITION 1 -> STATE = 1
    $state = $qb->expr()->eq( 'state', ':state' );

    //CONDITION 2 -> startdate <= CURRENT_DATE AND enddate >= CURRENT_DATE
    $betweenDates = $qb->expr()->andX( 
        $qb->expr()->lte("u.startdate", ":currentDate"),
        $qb->expr()->gte("u.enddate", ":currentDate")
    );

    //CONDITION 3 -> startdate == NULL
    $startDateNull = $qb->expr()->isNull( 'startdate' );

    //CONDITION 4 -> enddate == NULL
    $endDateNull = $qb->expr()->isNull( 'enddate' );

    //CONDITION 5 -> <CONDITION 2> OR <CONDITION 3> OR <CONDITION 4>
    $dates = $qb->expr()->orX( $betweenDates, $startDateNull, $endDateNull );

    //CONDITION 6 -> <CONDITION 1> AND <CONDITION 5>
    $whereClause = $qb->expr()->andX( $state, $dates ); 
```

# ios - libBlocksKit.a 中无法识别的选择器

> ID：15925645
> 
> 赞同：0
> 
> 时间：2013-04-10T12:20:09.413
> 
> 标签：ios, objective-c

如果我在项目的 UIActionSheet+BlocksKit.h 类别文件中使用了 actionsheet 函数，那么它会崩溃（例如：+[UIActionsheet actionSheetWithTitle:] 无法识别的选择器）。libBlockKit.a 库中的 UIActionSheet+BlocksKit.h。我正在使用[这个库](https://bitbucket.org/nwoolls/simpledrawing/wiki/Home) 请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:30:40.773

在构建设置中添加`-ObjC`到`Other Linker Flags`(OTHER_LDFLAGS)。

请参阅[http://developer.apple.com/library/mac/#qa/qa1490/_index.html](http://developer.apple.com/library/mac/#qa/qa1490/_index.html)

# asp.net - 页面加载后 ASP.NET 开始下载

> ID：15925648
> 
> 赞同：0
> 
> 时间：2013-04-10T12:20:13.930
> 
> 标签：asp.net, redirect, onload

在向用户显示页面后，我有此代码开始下载：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Response.Redirect("http://myserver.com/myfile.zip", false);   
    } 
```

但是重定向是在页面加载之前完成的，并且页面永远不会加载。

如何开始下载并完成向客户端显示页面？

我不能使用 Transmit.File，因为该文件位于不同的服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:23:05.333

```
protected void Page_Load(object sender, EventArgs e)
{
  Page.ClientScript.RegisterStartupScript(this.Page.GetType(), "java", "setTimeout(Redirect, 9000);", true);
} 
```

在aspx页面中制作一个javascript函数

```
<script language="javascript" type="text/javascript">
    function Redirect() {
        window.location = 'http://myserver.com/myfile.zip';
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:25:06.160

我使用以下代码弹出一个对话框来下载 CSV 文件。也许这样的事情对你有用？

```
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.ClearHeaders();
HttpContext.Current.Response.ClearContent();
HttpContext.Current.Response.AddHeader("content-disposition", "filename=export.csv");
HttpContext.Current.Response.ContentType = "text/csv";
HttpContext.Current.Response.Write(sb.ToString()); // In my case, the StringBuilder object was the file to be written.  I don't know exactly what you'd for a non dynamic file.
HttpContext.Current.Response.End(); 
```

# coldfusion - Apple Push Notification using Coldfusion

> ID：15925650
> 
> 赞同：1
> 
> 时间：2013-04-10T12:20:14.983
> 
> 标签：coldfusion, push-notification, apple-push-notifications, coldfusion-10

I want to send Push notification using Coldfusion. I couldn't find much help on google. I could find only one [article](http://www.raymondcamden.com/index.cfm/2010/9/13/Guest-Post-Apple-Push-Notifications-From-ColdFusion-in-Ten-Minutes-or-Less#c843ED990-C791-2A3E-1E9FD9B78ECADFF7) that discusses this topic. But unfortunately I am getting exceptions while following that method. As that method uses a JAR file, I am not able to debug the exception. Even I cannot see the exceptions.

I just want to know is there a simple way to send Push Notifications? Like there is one for Android. In Android you just have to send an http request and you're done. But I can see things are so complicated in case of Apple.

But I am sure that someone would have definitely achieved this. Can anyone please help me on this?

Finally from suggestions, I implemented onError in my Application.cfc and got the following error:

```
Could not initialize class com.rsa.jcm.c.br
ava.lang.NoClassDefFoundError: Could not initialize class com.rsa.jcm.c.br at
com.rsa.jcm.c.ch.g(Unknown Source) at com.rsa.jcm.c.ch.h(Unknown Source) at
com.rsa.jcm.c.ch.f(Unknown Source) at com.rsa.jcm.c.jt.newSymmetricCipher(Unknown Source) at
com.rsa.cryptoj.o.mu.newSymmetricCipher(Unknown Source) at com.rsa.cryptoj.o.an.d(Unknown Source) at com.rsa.cryptoj.o.li.<init>(Unknown Source) at com.rsa.cryptoj.o.hh.<init>(Unknown Source) at com.rsa.cryptoj.o.gu.<init>(Unknown Source) at com.rsa.cryptoj.o.cc$240.a(Unknown Source) at com.rsa.cryptoj.o.da.a(Unknown Source) at com.rsa.cryptoj.o.da.a(Unknown Source) at
com.rsa.cryptoj.o.gx.b(Unknown Source) at com.rsa.cryptoj.o.gx.a(Unknown Source) at
com.rsa.cryptoj.o.gx.a(Unknown Source) at com.rsa.cryptoj.o.gx.a(Unknown Source) at
com.rsa.cryptoj.o.gx.a(Unknown Source) at com.rsa.cryptoj.o.gx.engineLoad(Unknown Source) at java.security.KeyStore.load(KeyStore.java:1185) at
com.notnoop.apns.internal.Utilities.newSSLContext(Utilities.java:87) at
com.notnoop.apns.ApnsServiceBuilder.withCert(ApnsServiceBuilder.java:139) at
com.notnoop.apns.ApnsServiceBuilder.withCert(ApnsServiceBuilder.java:114) at
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at
java.lang.reflect.Method.invoke(Method.java:597) at
coldfusion.runtime.StructBean.invoke(StructBean.java:508) at
coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2465) at 
```

## Edit:

CF Code:

```
<cfset APNSService = createObject( "java", "com.notnoop.apns.APNS" ).newService()
    .withCert("E:\WEB\mysite.com\login\JAR\DevPushCertificates.p12", "")
    .withSandboxDestination()
    .build() />

<!--- I get the exception here and the code bellow is not executed --->        

<cfset payload = createObject( "java", "com.notnoop.apns.APNS" ).newPayload()
    .badge(3)
    .alertBody("Hello, world.")
    .sound("PushNotification.caf")
    .build()/>

<cfset APNSService.push('#deviceToken#', payload) /> 
```

I am using this JAR file: [https://github.com/notnoop/java-apns/downloads](https://github.com/notnoop/java-apns/downloads)

I got it from this blog: [http://www.raymondcamden.com/index.cfm/2010/9/13/Guest-Post-Apple-Push-Notifications-From-ColdFusion-in-Ten-Minutes-or-Less#c843ED990-C791-2A3E-1E9FD9B78ECADFF7](http://www.raymondcamden.com/index.cfm/2010/9/13/Guest-Post-Apple-Push-Notifications-From-ColdFusion-in-Ten-Minutes-or-Less#c843ED990-C791-2A3E-1E9FD9B78ECADFF7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:58:40.003

如果您在多个位置发布该问题，请添加指向其他问题副本的链接。

[在 github 上](https://github.com/notnoop/java-apns/issues/99#issuecomment-16225633)查看我对您的 java-apns 问题的回答。

**（更新了来自链接的响应）**

> 这看起来像是 ColdFusion 的问题。在上面的堆栈转储中，您会看到：
> 
> ```
>  com.notnoop.apns.internal.Utilities.newSSLContext(Utilities.java:87) 
> ```
> 
> 调用
> 
> ```
>  java.security.KeyStore.load(KeyStore.java:1185) 
> ```
> 
> `com.rsa.cryptoj` 在图书馆经过一番思考后，这又失败了。所以很明显，有些东西在访问 ColdFusion 中的 java 密钥库时是行不通的。
> 
> [谷歌搜索](http://bit.ly/10NNaDq)错误中的一个类会产生一些有趣的结果：
> 
> *   [诊断 CFHTTP 问题 - 未通过身份验证的对等点](http://www.raymondcamden.com/index.cfm/2011/1/12/Diagnosing-a-CFHTTP-issue--peer-not-authenticated)依次链接到
> *   [OpenID 和 ColdFusion](http://www.mischefamily.com/nathan/index.cfm/2010/4/16/OpenID-And-ColdFusion)列出了您可以尝试的一些事情（在 Cold Fusion 中禁用 Crypto-J）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T14:12:56.127

因为我的服务器在共享主机上。因此，对于每一次更改，我都必须向托管站点提交一张票。它引起了头痛。最后，我让 php 服务器设置将推送通知代码（在 google 上的 PHP 中很容易获得）放在 PHP 服务器上。然后我从 Coldfusion 代码中调用了那个 php 文件。这对我有用。

# asp.net - Launch custom EXE from Chrome link

> ID：15925654
> 
> 赞同：0
> 
> 时间：2013-04-10T12:20:22.853
> 
> 标签：asp.net, windows, google-chrome

For an intranet app running on Windows 7, we need to create links that launch an EXE from Chrome. The link will look like this:

```
myapp://filename.xyz?param1=abcd&param2=efgh 
```

This would launch myapp.exe and let it receive the parameters and launch the another custom app associated with the file on the user's machine.

In other words, how can we build something like the iTunes app that is launched from the browser? We're using C# 4.5 to build this. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:23:29.773

将您的应用程序注册为协议处理程序：http: [//msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)

# c# - Editing in Propertygrid not enabled from Expander

> ID：15925658
> 
> 赞同：0
> 
> 时间：2013-04-10T12:20:24.317
> 
> 标签：c#, collections, editor, propertygrid, expander

I have a list in Propertygrid that opens by expander. I created it using the following site: **[Customized display of collection data in a PropertyGrid.](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert)**

I added this Editor Type to cancel the `Collection Editor`:

```
class MyEditor: UITypeEditor
{
    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.None;
    }
}

[TypeConverter(typeof(ExpandableObjectConverter))]
[Editor(typeof(MyEditor), typeof(UITypeEditor))]
public class MyCollection : CollectionBase, ICustomTypeDescriptor
{...} 
```

The problem is you can not edit the values ​​in the collection via the Expander.

I have two questions:

1.  Why the Expander appears as disable editing?

2.  How can I allow the user to edit via Expander?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:03:24.447

我找到了无法编辑的原因，

因为列表中的每个值都是`object`您无法编辑的，

即使我`GetValue`从对象中输入了一个值。

# php - KCFinder 无法正确显示

> ID：15925661
> 
> 赞同：0
> 
> 时间：2013-04-10T12:20:31.147
> 
> 标签：php, ckeditor, kohana, kohana-3.3

我正在为我的问题寻找解决方案，但找不到任何可行的方法。

问题：我使用 KOHANA 框架并尝试将 KCFinder 与我的 CKEditor 集成。起初它没有工作，因为一些路由问题。在浏览了kcfinder中的几乎所有文件以替换所有“require”以及需要将其他文件调用到正确路径的所有函数之后。最后，kcfinder 窗口会加载所有文件。

但现在我遇到了另一个问题，现在窗口看起来像

![KCFinder 窗口](https://i.stack.imgur.com/3ejmm.png)

这是此页面的控制台：

![KCFinder 控制台](https://i.stack.imgur.com/6nvtU.png)

有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:04:11.553

这看起来像一个 HTML 问题......所以基本上做一个查看源代码并找到丢失的 CSS 文件并确保被抽出的 HTML 正确地提取 CSS 文件......与 PHP 或 Kohana 完全无关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:04:09.060

这是我的browse.php

```
$base = APPPATH.'includes/kcfinder/';
require $base.'core/uploader.php';
require $base.'core/browser.php';
require $base.'core/autoload.php';
require $base.'core/types/type_img.php';
require $base.'core/types/type_mime.php';
require $base.'lib/class_gd.php';
require $base.'lib/class_input.php';
require $base.'lib/class_zipFolder.php';
require $base.'lib/helper_dir.php';
require $base.'lib/helper_file.php';
require $base.'lib/helper_httpCache.php';
require $base.'lib/helper_path.php';
require $base.'lib/helper_text.php';
$browser = new browser();
$browser->action(); 
```

这是我的joiner.php

```
$base = APPPATH.'includes/kcfinder/';
require $base.'core/uploader.php';
require $base.'core/browser.php';
require $base.'core/autoload.php';

require $base.'core/types/type_img.php';
require $base.'core/types/type_mime.php';

require $base.'lib/class_gd.php';
require $base.'lib/class_input.php';
require $base.'lib/class_zipFolder.php';
require $base.'lib/helper_dir.php';
require $base.'lib/helper_file.php';
require $base.'lib/helper_httpCache.php';
require $base.'lib/helper_path.php';
require $base.'lib/helper_text.php';
$files = glob(dirname(__FILE__).'/*.js');
sort($files); 
```

……

# c - c中“const char **p”的含义

> ID：15925667
> 
> 赞同：0
> 
> 时间：2013-04-10T12:20:52.077
> 
> 标签：c, constants

如果我从今以后首先为 10 个字符指针分配内存，然后为每个要指向的字符指针分配内存，那么 p 应该使 10 个字符指针只读还是应该使字符串本身读取-只要？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:22:39.793

`const char **p`声明一个指向指针的指针`const char`。

> ```
> cdecl> declare p as pointer to pointer to const char  
> const char **p 
> ```

因此，修改一个字符`p[i][j]`是不正确的，而修改一个指针`p[i]`是正确的。

> ### C11 (n1570)，第 6.3.2.1 节左值、数组和函数指示符
> 
> 可修改的左值是没有数组类型，没有不完整类型，**没有 const 限定类型**，并且如果它是结构或联合，则没有任何成员（包括递归地，任何成员或所有包含的聚合或联合的元素）具有 const 限定类型。

而且，要使用`=`or等​​运算符`++`，操作数必须是可修改的左值。

此外，像这样的代码：

```
char **q = (char **)p;
q[i][j] = c; 
```

导致未定义的行为：

> ### C11 (n1570)，§ 6.7.3 类型限定符
> 
> 如果尝试通过使用具有非 const 限定类型的左值来修改使用 const 限定类型定义的对象，则行为未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:22:41.850

`const`绑定到，因此这`char`意味着您有 10 个指向无法修改字符的字符串的指针（无论如何，通过这些指针！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:23:56.193

在这种情况下，p 是一个指向 const char 的指针。也许更简单的写法是

```
 char const **p 
```

（此代码等同于您编写的代码）。如果你从右到左阅读它，你会看到 p 代表什么。

在这种情况下，不能使用 *p 修改指向的字符。但是，您可以更改 p 或​​ *p 指向的内容。

# java - 同步锁和分离线程：Android

> ID：15925677
> 
> 赞同：0
> 
> 时间：2013-04-10T12:21:18.180
> 
> 标签：java, android, multithreading, synchronized

我有一个回调函数，我在其中收到一个字符串。由于处理需要时间，因此该字符串将被传递给单独的线程进行处理。此外，由于多个回调可以同时出现，我希望有一个同步锁，直到我将字符串传递到新线程中。但我不希望新线程（正在处理的地方）也被锁定。

有人可以帮我弄清楚这个设计吗？

我已经编写了以下代码，但在此我认为在单独线程的整个处理也完成之前无法接收回调，从而破坏了这个新线程的全部目的。

```
String sLine;
onClick(String line){
synchronized (lock) {
                sLine = line;
                new Thread(new Runnable() {
                    @Override
                    public void run() {
                    doProcessing(Sline);    

                }).start(); 
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-25T03:32:21.170

> 此外，由于多个回调可以同时出现，我希望有一个同步锁，直到我将字符串传递到新线程中。

A：我认为你不需要在这里加锁。该字符串不被多线程访问。

> 但我不希望新线程（正在处理的地方）也被锁定。

答：我看到这里没有任何东西被锁定:) 我认为如果你这样做会更好：

*   创建一个类Runner实现Runnable，这个类会做处理
*   每次你得到回调，使用 ThreadPoolExecutor 来执行这个 Runner。这有助于您重用 Thread 实例。
*   注意：这些行代码不需要同步，如果需要，将同步放在处理方法中。

```
// Implement class Runner

public class Runner implements Runnable {
    private String mLine;

    public Runner(String line) {
        mLine = line;
    }

    @Override
    public void run() {
        process();
    }

    public void process() {
        // Do processing with mLine
        // Put synchronized if you need, it bases on your context
    }
}

// Initialize thread pool

private ThreadPoolExecutor executor = new ThreadPoolExecutor(10, 100, 1000, TimeUnit.SECONDS, new LinkedBlockingDeque<Runnable>());

// Execute runner when receiving callback

onClick(String s) {
        Runner runner = new Runner(s);
        executor.execute(runner);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:30:48.553

尝试改变如下

```
String sLine;
onClick(final String line){
                sLine = line;
                new Thread(new Runnable() {
                    @Override
                    public void run() {
                    doProcessing(line);    

                }).start();     
} 
```

# unit-testing - 使用 Jacoco 和 Sonar 进行单独的单元和集成测试

> ID：15925681
> 
> 赞同：0
> 
> 时间：2013-04-10T12:21:33.363
> 
> 标签：unit-testing, integration-testing, sonarqube, jacoco

我从. `combined-ut-it-multimodule-maven-jacoco` [_](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/combined%20ut-it/combined-ut-it-multimodule-maven-jacoco) `Sonar github`基本上，该示例有一个带有单元测试的模块，以及另一个带有集成测试的模块。覆盖率结果为 40%（UT）和 50%（IT），总体覆盖率为 80%。

然后我为模块中未覆盖的代码添加了一个新的单元测试`app`：

```
package example;

import org.junit.Test;

public class HelloWorldAnotherUnitTest {

    @Test
    public void test() {
        new HelloWorld().notCovered();
    }

} 
```

覆盖率结果为 60%（UT），50%（IT），整体覆盖率为 100%。到目前为止，一切都很好。

我将该测试从模块切换`app`到`app-it`UT 的覆盖率结果为 40%，IT 为 70%，整体覆盖率为 100%。在这里，我期待与之前的报道相同的结果。

因此，特定模块的覆盖范围似乎可以是单元或集成。那是一个错误吗？

# android - 如何测量子可扩展列表的高度和宽度

> ID：15925682
> 
> 赞同：0
> 
> 时间：2013-04-10T12:21:39.593
> 
> 标签：android, android-layout, expandablelistview

我正在使用可扩展列表视图来制作 3 级层次结构，想知道如何设置内部列表的高度和宽度。我知道我们为此目的有 onMeasure，但在我的情况下，它不允许我捕获父列表视图的整个空间。

可能是我给它错误的值，这是我用来设置子可扩展列表的高度和宽度的代码。

 `````
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
    {

        widthMeasureSpec = MeasureSpec.makeMeasureSpec(960,MeasureSpec.AT_MOST);
        heightMeasureSpec = MeasureSpec.makeMeasureSpec(800,MeasureSpec.AT_MOST);
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    } 
````  `目前它显示如下

 `````
<ParentGroup1                >
<ChildParentGroup>
<Child1>
<Child2>
<child3>
<ParentGroup2                > 
````  `它应该如下所示。

 `````
<ParentGroup1                >
<ChildParentGroup            >
<Child1                      >
<Child2                      >
<child3                      >
<ParentGroup2                > 
````  `请同样建议/建议。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T16:58:19.730

不确定您是否仍在寻找答案，但我就是这样做的：在构造函数中传递对父视图的引用和高度度量（在这种情况下，我使用子列表的大小）来创建子自定义列表。

```
public CustomExpandableList(Context context, View the_parentView, int the_heightMeasure)
{ 
    super(context);
    WIDTH = the_parentView!=null?the_parentView.getWidth():LayoutParams.MATCH_PARENT;
    HEIGHT = the_heightMeasure * 500;
} 
```

编辑：或者为了使代码更加一致，您可以将 parentView 的宽度和高度度量传递给构造函数，而不是传递父视图本身。CustomExpandableList(上下文 the_context, int the_width, int the_heightMeasure)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-29T09:22:55.803

使用此代码动态计算可扩展列表视图：

```
 // calculate the height of expandable listView without expanded
      private void setListViewHeight(ExpandableListView expListView) {
    ListAdapter listAdapter = expListView.getAdapter();
    int totalHeight = 0;

    for (int i = 0; i < listAdapter.getCount(); i++) {
        View listItem = listAdapter.getView(i, null, expListView);
        listItem.measure(0, 0);
        totalHeight += listItem.getMeasuredHeight();
        System.out.println("i  " + i);
    }

    ViewGroup.LayoutParams params = expListView.getLayoutParams();
    params.height = totalHeight
            + (expListView.getDividerHeight() * (listAdapter.getCount() - 1));
    System.out.println("params.height =  " + params.height);

    expListView.setLayoutParams(params);
    expListView.requestLayout();
}

// calculate the height of expandable listview dynamically
private void setListViewHeight(ExpandableListView expListView, int group) {

    ExpandableListAdapter listAdapter = expListView
            .getExpandableListAdapter();
    int totalHeight = 0;
    int desiredWidth = MeasureSpec.makeMeasureSpec(expListView.getWidth(),
            MeasureSpec.UNSPECIFIED);
    for (int i = 0; i < listAdapter.getGroupCount(); i++) {
        View groupItem = listAdapter.getGroupView(i, false, null,
                expListView);
        groupItem.measure(desiredWidth, MeasureSpec.UNSPECIFIED);

        totalHeight += groupItem.getMeasuredHeight();

        if (((expListView.isGroupExpanded(i)) && (i == group))
                || ((!expListView.isGroupExpanded(i)) && (i == group))) {

            for (int j = 0; j < listAdapter.getChildrenCount(i); j++) {

                View listItem = listAdapter.getChildView(i, j, false, null,
                        expListView);

                Log.e("Count", listAdapter.getChildrenCount(i) + "");

                listItem.setLayoutParams(new ViewGroup.LayoutParams(
                        desiredWidth, MeasureSpec.UNSPECIFIED));
                // listItem.measure(desiredWidth, MeasureSpec.UNSPECIFIED);
                listItem.measure(MeasureSpec.makeMeasureSpec(0,
                        MeasureSpec.UNSPECIFIED), MeasureSpec
                        .makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
                totalHeight += listItem.getMeasuredHeight();

                System.out.println("totalHeight" + totalHeight);
                Log.e("TEST", "gshdkfmjfy,");

            }
        }
    }

    ViewGroup.LayoutParams params = expListView.getLayoutParams();
    int height = totalHeight
            + (expListView.getDividerHeight() * (listAdapter
                    .getGroupCount() - 1));

    if (height < 10) {
        height = 100;
    }
    params.height = height;
    expListView.setLayoutParams(params);
    expListView.requestLayout();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T20:40:59.490

几天前，我通过这样做成功了。它更紧凑一点，没有任何附加参数，而且效果很好。

```
public static void setExpandableListViewHeightBasedOnChildren(ExpandableListView expandableListView){
    ExpandableNotesListAdapter adapter = (ExpandableNotesListAdapter) expandableListView.getExpandableListAdapter();
    if (adapter == null){
        return;
    }
    int totalHeight = expandableListView.getPaddingTop() + expandableListView.getPaddingBottom();
    for (int i = 0 ; i < adapter.getGroupCount() ; i++){
        View groupItem = adapter.getGroupView(i, false, null, expandableListView);
        groupItem.measure(View.MeasureSpec.UNSPECIFIED,View.MeasureSpec.UNSPECIFIED);
        totalHeight += groupItem.getMeasuredHeight();

        if (expandableListView.isGroupExpanded(i) ){
            for( int j = 0 ; j < adapter.getChildrenCount(i) ; j++) {
                View listItem = adapter.getChildView(i, j, false, null, expandableListView);
                listItem.setLayoutParams(new LayoutParams(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED));
                listItem.measure(View.MeasureSpec.makeMeasureSpec(0,
                        View.MeasureSpec.UNSPECIFIED), View.MeasureSpec
                        .makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
                totalHeight += listItem.getMeasuredHeight();

            }
        }
    }

    ViewGroup.LayoutParams params = expandableListView.getLayoutParams();
    int height = totalHeight + expandableListView.getDividerHeight() * (adapter.getGroupCount() - 1);

    if (height < 10)
        height = 100;
    params.height = height;
    expandableListView.setLayoutParams(params);
    expandableListView.requestLayout();
} 
```

在初始化视图、设置适配器等时不要忘记添加它：

```
Functions.setExpandableListViewHeightBasedOnChildren(listView);
listView.setOnGroupExpandListener(new ExpandableListView.OnGroupExpandListener() {
    @Override
    public void onGroupExpand(int groupPosition) {
        Functions.setExpandableListViewHeightBasedOnChildren(listView);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:47:28.973

为 ParentGroup 和 ChildParentGroup 创建一个布局 xml 文件，为 Child 创建另一个布局 xml 文件。现在你的问题被简化为两级层次结构。然后在可扩展列表视图中，我们有父视图和子视图方法来膨胀和使用父和子布局。所以在那种方法中，你可以做任何你想做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-26T07:52:00.597

我知道它已经晚了，但如果有人有同样的问题。您可以通过创建自定义 ExpandableListView 并使用“MeasureSpec.EXACTLY”来解决它：

```
public class CustomExpListView extends ExpandableListView{
    public CustomExpListView(Context context){
        super(context);
    }
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
        widthMeasureSpec = MeasureSpec.makeMeasureSpec(960, MeasureSpec.EXACTLY);
        heightMeasureSpec = MeasureSpec.makeMeasureSpec(20000, MeasureSpec.AT_MOST);
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

希望这对任何人都有帮助。对我来说它的工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-29T09:44:20.887

添加到[muhammadSalem](https://stackoverflow.com/users/1887380/mohammed-saleem)的答案。这就是我通过计算 expandableListView 的孩子的总高度来解决我的问题的方法。

```
 private fun getSubItemTotalHeight(groupPosition: Int): Int {
    val children: Int = mAdapter.getChildrenCount(groupPosition)

    val desiredWidth: Int = View.MeasureSpec.makeMeasureSpec(mExpandableListView.width,
            View.MeasureSpec.UNSPECIFIED)
    var subItemTotalHeight = 0
    repeat(children) {
        val child = mAdapter.getChildView(groupPosition, it, true, null, null)
        child.layoutParams = ViewGroup.LayoutParams(
                desiredWidth, View.MeasureSpec.UNSPECIFIED)
        child.measure(View.MeasureSpec.makeMeasureSpec(0,
                View.MeasureSpec.UNSPECIFIED), View.MeasureSpec
                .makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED))
        subItemTotalHeight += child.measuredHeight
    }

    val dividerCount = children - 1
    val dividerTotalCount = (dividerCount * mExpandableListView.dividerHeight).toFloat()
    showToast(mExpandableListView.dividerHeight.toString())
    val totalDividerPixels = TypedValue.applyDimension(
            TypedValue.COMPLEX_UNIT_DIP,
            dividerTotalCount,
            resources.displayMetrics
    )
    return subItemTotalHeight + totalDividerPixels.toInt()
} 
```

需要注意的一件事是，如果您为 expandableListview 添加了分隔线高度，则应该包括它的计算。我所做的是将 dp 中的总分隔线高度转换为像素并将其添加到 totalHeight 中。这解决了我遇到的剪辑问题。

然后使用它只是：

```
 mExpandableListView.setOnGroupExpandListener { groupPosition ->
            mExpandableListView.layoutParams.height += getSubItemTotalHeight(groupPosition)
            mExpandableListView.requestLayout()
        }
        mExpandableListView.setOnGroupCollapseListener { groupPosition ->
            mExpandableListView.layoutParams.height -= getSubItemTotalHeight(groupPosition)
            mExpandableListView.requestLayout()
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-09T10:29:58.347

只需删除宽度代码，它应该可以正常工作。

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    heightMeasureSpec = MeasureSpec.makeMeasureSpec(999999, MeasureSpec.AT_MOST);
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
} 
`````````

# c# - Webpage has expired

> ID：15925684
> 
> 赞同：1
> 
> 时间：2013-04-10T12:21:48.550
> 
> 标签：c#, asp.net, caching, browser, webpage

Code to forces the page to load when the browser back and forward button are used.

```
 Response.Buffer = true;
        Response.ExpiresAbsolute = DateTime.Now.Subtract(TimeSpan.FromMilliseconds(1));
        Response.Expires = 0;
        Response.CacheControl = "no-cache";
        Response.Cache.SetNoStore();
        Response.AppendHeader("Pragma", "no-cache"); 
```

Using this piece of code I remove the copy of page from cache and reload page again when (browser)back button click from the next page but I found "Webpage has expired" with detail note "The local copy of this webpage is out of date, and the website requires that you download it again".

here i am looking to recreate the previous page.

Javascript can help here or not.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:27:15.327

**Change:**

```
 Response.Buffer = true;
    Response.ExpiresAbsolute = DateTime.Now.Subtract(TimeSpan.FromMilliseconds(1));
    Response.Expires = 0;
    Response.CacheControl = "no-store";
    Response.Cache.SetNoStore();
    Response.AppendHeader("Pragma", "no-cache");
    Response.post-check=0;
    Response.pre-check=0; 
```

Go through [http://blogs.msdn.com/b/ie/archive/2010/07/14/caching-improvements-in-internet-explorer-9.aspx](http://blogs.msdn.com/b/ie/archive/2010/07/14/caching-improvements-in-internet-explorer-9.aspx) for further information about caching.

# android - Android VideoView 缓冲区大小

> ID：15925685
> 
> 赞同：4
> 
> 时间：2013-04-10T12:21:48.860
> 
> 标签：android, android-videoview, http-live-streaming

我有一个使用 VideoView 播放 HLS（Http Live Streaming）视频的 android 应用程序。

我正在使用本地 http 代理将 http 请求从 VideoView 转发到主 HLS 服务器，因为我的流（传输段）已加密。

`Flow of my application:`
0\. 使用本地代理 url 准备 VideoView。前任。"http:// localhost :9878/index.m3u8"
1\. VideoView 向我的代理发送 M3U8 和 ts 段的请求。
2\. Proxy 将 VideoView 对 M3u8 和 ts 的请求转发到 HLS 服务器。
3\. 代理检查传输流请求并在向 VideoView 发送响应之前解密传输流并将其发送到 VideoView。
4\. VideoView 播放视频流。

这工作正常，但有时我会收到以下错误：
`output buffer is smaller than decoded data size Out Length`

当我在 logcat 中收到此错误时，我的视频变成垃圾（绿色视频）
我通常会在视频流比特率大小增加时看到此问题，是否有解决此问题的方法？

# vb.net - 从列表框中获取 if 函数的值

> ID：15925688
> 
> 赞同：1
> 
> 时间：2013-04-10T12:22:01.763
> 
> 标签：vb.net, listbox

嘿伙计们，这里很新。

有一个使用此命令行从特定游戏服务器获取帐户名称的列表框

```
Dim apikeyinfo As APIKeyInfo = api.getApiKeyInfo()
lstbxCharacters.DataSource = apikeyinfo.Characters 
```

此代码通过在列表框中显示它来获取单个帐户中的所有字符。

现在我想从 lisbox 中引用一个字符，但不确定如何

任何方法，如 Listbox.Get 来获取值并将其与其他内容进行比较？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:30:40.383

你可以尝试类似的东西

```
lstbxCharacters.SelectedItem 
```

**更新**

要从列表框中读取数据，我认为有多种方法（假设它是可读的）。

-> 通常列表框显示字符串，因此它应该可以读取字符串变量

```
Dim a_string as Strin = lstbxCharacters.SelectedItem 
```

您也可能想在之前添加一个小检查，以确保当前选择了一个项目：

```
If lstbxCharacters.SelectedIndex < 0 then return 
```

如果未选择任何项目，则会跳出当前子项

最后，要阅读第一个条目，您也可以这样做：

```
a_string = lstbxCharacters.Items(0) 
```

如果它返回对象，则不是直接访问对象，而是可以做

```
a_string = lstbxCharacters.Items(0).ToString 
```

（大多数对象允许 .ToString() 函数）

**这里有两种不同解决方案的想法：**

1.  正如用户评论的那样，您可以直接访问 DataSource + 选择 listIndex 的信息。但是，如果您这样做，那么可能会更容易（如果您仍然需要访问它，请使用解决方案 2）
2.  创建一个 list(Of some_object) 类型的变量，并用数据源中的数据填充它。这样做需要一些时间，但如果你为类 some_object 定义了一个函数 ToString，那么你可以通过 CType(lstbxCharacters.SelectedItem, some_object) 将所有对象直接填充到 lstbxCharacters 中，并且无需担心地访问它们

**更新 2** 如果`reference`您的意思是从数据源访问更多信息，那么您需要构建某种查询，或者将列表框的内容设置为与另一个显示数据库内容的控件相关（这样列表框 lstbxCharacters 将起作用像过滤器）

# php - 将 .jpg、.jpeg 或 .gif 转换为 .png，而不将它们保存在机器上

> ID：15925695
> 
> 赞同：4
> 
> 时间：2013-04-10T12:22:30.103
> 
> 标签：php, image, png, gd, transform

是否可以在 php 中将 .jpg、.jpeg 或 .gif 图像转换为 .png 而无需将图像保存在计算机中？就像是：

```
function read_image($filename, $extension) {
    switch($extension) {
        case '.png':
            $image = imagecreatefrompng($filename);
            break;
        case '.jpg': case '.jpeg':
            $unTransformed = imagecreatefromjpeg($filename);
            $image = transform($unTransformed);
            break;
        case '.gif':
            $unTransformed = imagecreatefromgif($filename);
            $image = transform($unTransformed);
            break;
        return $image;
    }
}
function transform($unTransformed) {

    // Some magic here without actually saving the image to your machine when transforming

    return $transformed;
} 
```

老实说，我找不到答案。另请注意，GD 是强制性的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:29:03.147

使用输出缓冲和捕获 imagepng 的输出应该可以工作，如下所示：

```
function transform($unTransformed) {
    ob_start();
    imagepng($unTransformed);
    $transformed = ob_get_clean();
    return $transformed;
} 
```

当然，这是假设您实际上想要一个包含图像文件的 png 字节流的变量。如果唯一的目的是无论如何输出它，请不要打扰并按照 Marty McVry 的建议进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:28:29.493

直接来自 PHP 手册：（[`imagepng()`](http://www.php.net/manual/en/function.imagepng.php)-function，将 PNG 图像输出到浏览器或文件）

```
header('Content-Type: image/png');
$transformed = imagepng($untransformed); 
```

您可能会在发送标头时遇到问题，因此可能需要将标头输出到其他地方或将创建的流转换`imagepng`为 base64 字符串并像这样显示图像，具体取决于您的代码的其余部分。

# c# - 无法从 URl 检索 QueryString 值

> ID：15925697
> 
> 赞同：0
> 
> 时间：2013-04-10T12:22:36.547
> 
> 标签：c#, asp.net

我已经在锚标签上传递了 Url，如下所示：

```
mail.Body += string.Format("<a href=\"http://www.abc.co.in/Download.aspx?period={0}&ProductName={1}\">Demo Download</a>", DateTime.Now, productName); 
```

并试图在 download.aspx 页面的页面加载上检索此值，但它显示`null`了它的值。我的代码是：

```
 string PName = Request.QueryString["ProductName"] as string; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:13:37.257

我认为您的整个网址格式不正确。尝试转义这样的值...

```
string queryString = string.Format("period={0}&ProductName={1}", System.Web.HttpUtility.UrlEncode(DateTime.Now.ToString()), System.Web.HttpUtility.UrlEncode("any product name"));
string body = string.Format("<a href=\"http://www.abc.co.in/Download.aspx?{0}\">Demo Download</a>", (queryString)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:39:32.700

可能是由于您传递的格式化日期中的斜杠 (/) 导致的问题`10/04/2013 6:03:56`

将此日期格式化为 10-04-2013 6:03:56 使用

```
DateTime.Now.ToString("dd-MM-yyyy hh mm") 
```

然后您可以通过以下方式检索查询字符串：

```
string PName = Request.QueryString["ProductName"] as string; 
string Period = Request.QueryString["period"] as string; 
```

希望这有帮助。

# objective-c - 如何在某个点停止滚动视图？

> ID：15925707
> 
> 赞同：-2
> 
> 时间：2013-04-10T12:23:01.747
> 
> 标签：objective-c, scrollview

我在垂直滚动视图中有大图像。我希望滚动视图在每个图像处停止，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:25:05.913

您可以启用分页。如果您正确设置滚动视图内容的大小，则效果很好。

# matlab - 使用 subplot 在 matlab 中绘制多个图形

> ID：15925709
> 
> 赞同：0
> 
> 时间：2013-04-10T12:23:05.303
> 
> 标签：matlab, subplot

我不明白出现以下错误的原因是什么？这里给出了代码

```
for i=1:20 
      x(i) = i-10; 
      squared(i) = x(i) ^ 2; 
      cube(i) = x(i) ^ 3; 
      linear(i) = x(i); 
      log_of(i) = log(x(i)); 
      sqrt_of(i) = sqrt(x(i)); 
    end 
    subplot(2,3,1); 
    plot(x,squared); 
    title('square'); 

        subplot(2,3,4); 
    plot(sqrt_of,cube); 
    title('sqrt'); 

    subplot(2,3,5); 
    plot(linear,cube); 
    title('linear'); 

    subplot(2,3,6); 
    plot(log_of,cube); 
    title('log'); 

    subplot(2,3,3); 
    plot(x,cube); 
    title('cube'); 
```

错误说

```
subplot1
Attempt to execute SCRIPT subplot as a function:
C:\Users\D.Datuashvili\Desktop\subplot.m

Error in subplot1 (line 9)
    subplot(2,3,1); 
```

代码中似乎一切正常，但为什么会出现以下错误？你能帮我吗？编辑：

```
for i=1:20 
      x(i) = i-10; 
      squared(i) = x(i).^ 2; 
      cube(i) = x(i).^ 3; 
      linear(i) = x(i); 
      log_of(i) = log(x(i)); 
      sqrt_of(i) = sqrt(x(i)); 
    end 
    subplot(2,3,1); 
    plot(x,squared); 
    title('square'); 

        subplot(2,3,4); 
    plot(sqrt_of,cube); 
    title('sqrt'); 

    subplot(2,3,5); 
    plot(linear,cube); 
    title('linear'); 

    subplot(2,3,6); 
    plot(log_of,cube); 
    title('log'); 

    subplot(2,3,3); 
    plot(x,cube); 
    title('cube'); 
```

错误：

```
 subplot1
Error using plot
Vectors must be the same lengths.

Error in subplot1 (line 10)
    plot(x,squared); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:27:57.720

您的工作区中可能有一个名为 subplot 的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T12:03:55.240

如上所述，第一个错误大部分来自您的文件 C:\Users\D.Datuashvili\Desktop\subplot.m，它掩盖了 Matlab 的默认设置。

第二个错误来自数组长度`squared`较长的事实，可能是因为您之前更改了它。

只需在脚本之前添加以下行就可以了

```
 clear squared cube linear log-of sqrt_of 
```

# c# - 网络矩阵重置密码

> ID：15925710
> 
> 赞同：1
> 
> 时间：2013-04-10T12:23:07.083
> 
> 标签：c#, asp.net-mvc-4, membership-provider, simplemembership

我想知道如何在不知道旧密码的情况下使用 mvc4 提供程序设置密码？

我想做一个忘记密码的功能，用户通过电子邮件收到一个安全链接，然后单击该链接，被定向到我的应用程序，然后只需填写新密码，不需要安全问题。

使用 mvc3 附带的成员资格提供程序很容易做到这一点。我现在正在使用 mvc4 附带的简单会员提供程序，但无法使其正常工作。

到目前为止的代码看起来很简单：

```
MembershipUser user = Membership.GetUser( cust.Email );
                String pass = user.GetPassword();

                Boolean success = WebSecurity.ChangePassword( cust.Email, pass, model.Password ); 
```

它目前在上面调用 GetPassword() 的行上给出错误，错误为：

> 不支持指定的方法。

我也会在这里显示 web.config 中的相关部分：

```
<system.web>
      <roleManager enabled="true" defaultProvider="SimpleRoleProvider">
          <providers>
              <clear/>
              <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
          </providers>
      </roleManager>
      <membership defaultProvider="SimpleMembershipProvider">
          <providers>
              <clear/>
              <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData"
       enablePasswordRetrieval="true" enablePasswordReset="true" passwordFormat="Encrypted" requiresQuestionAndAnswer="false"
       requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="5" minRequiredNonalphanumericCharacters="0"
       passwordAttemptWindow="10" />
          </providers>
      </membership> 
```

上面我尝试在 mvc3 中添加您用于提供程序的属性，但它似乎不适用于此处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:48:50.060

`WebSecurity.GeneratePasswordResetToken`生成并返回一个唯一的字符串。

`WebSecurity.ResetPassword`使用该令牌更改密码。

给用户一个以令牌作为参数的操作链接，然后给他们一个简单的表单来更改他们的密码。

# phantomjs - windows上的casperjs.bat失败，找不到模块cli.js错误

> ID：15925712
> 
> 赞同：2
> 
> 时间：2013-04-10T12:23:08.353
> 
> 标签：phantomjs, casperjs

我正在尝试使用 casperJS 来运行一些自动化测试。在窗户上。我遵循了这个[安装指南](http://casperjs.org/installation.html#windows)，但被卡住了。

当我尝试从命令行运行一个简单的测试时，如下所示：

```
casperjs.bat smoketest.js 
```

我收到以下错误：

```
Error: Cannot find module 'C:/code/base/main/Shared/casperjs\modules\cli.js' 
```

我检查了，文件 cli.js 确实存在于指定路径下。

我认为问题可能是路径中正斜杠和反斜杠的混合，但我编辑了 bootstrap.js casper 代码以对路径进行硬编码，它没有任何区别 - 它仍然是找不到模块。

我已经尝试过使用 phantomJS 版本 1.9.0 和 1.8.2。有人知道我在做什么错吗？

有没有人在 Windows 上成功运行 casper？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:28:05.757

这是由于[PhantomJS 1.9.0](https://github.com/ariya/phantomjs/issues/11165)中的一个错误，它不允许在 Windows 中加载绝对路径。Afaik，这只有在您使用 CasperJS (v1.1) 的主版本时才会明显。

此错误已修复，但尚未在 Windows 二进制文件中。如果您愿意，您可以自己编译它，但这可能需要相当长的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:39:50.180

我正在使用casper的主版本。使用最新发布的版本 1.0.2，它可以正常工作。

# sql - Oracle中日期减法的问题

> ID：15925717
> 
> 赞同：1
> 
> 时间：2013-04-10T12:23:44.640
> 
> 标签：sql, oracle, datetime, date-arithmetic

我在 Oracle 数据库上进行日期减法时遇到了一些麻烦。

我有一个查询：

```
select 
status,
id, 
to_char(creationdatetime,'yyyy/mm/dd hh24:mm:ss') as Creation_Time,
to_char(lastmodificationdatetime,'yyyy/mm/dd hh24:mm:ss') as Last_Mod_Time,
substr(lastmodificationdatetime - creationdatetime,1,30)*24 as Time_Between,
--trunc((((86400*(lastmodificationdatetime - creationdatetime))/60)/60)/24) "Days",
--trunc(((86400*(lastmodificationdatetime - creationdatetime))/60)/60)-24*(trunc((((86400*(lastmodificationdatetime - creationdatetime))/60)/60)/24)) "Hrs",
--trunc((86400*(lastmodificationdatetime - creationdatetime))/60)-60*(trunc(((86400*(lastmodificationdatetime - creationdatetime))/60)/60)) "Min",
--trunc(86400*(lastmodificationdatetime - creationdatetime))-60*(trunc((86400*(lastmodificationdatetime - creationdatetime))/60)) "Sec"
from 
table
where
Status='Completed' or Status='Cancelled'; 
```

（trunc是检查其他计数日期的方式）

然后我得到结果：

```
Status       ID CreationDate    Lastmodificationdate    Time_Between                     Days   Hours   Minutes Seconds

Completed   id1 2013/03/25 12:03:14 2013/03/25 13:03:17 1,78416666666666666666666666648    0    1   47  3
Completed   id2 2013/03/26 09:03:22 2013/03/26 09:03:28 0,45166666666666666666666666656    0    0   27  5
Cancelled   is3 2012/12/19 17:12:50 2012/12/19 19:12:10 1,52222222222222222222222222208    0    1   31  19
Cancelled   id4 2012/12/19 18:12:13 2012/12/19 19:12:23 0,65277777777777777777777777768    0    0   39  10 
```

我们可以看到日期被错误地减去，当我复制日期并使用双重减去它们时：

```
select (to_date('2013/03/25 13:03:17', 'yyyy/MM/dd HH24:MI:SS') - 
to_date('2013/03/25 12:03:14', 'yyyy/MM/dd HH24:MI:SS'))
from dual; 
```

我得到正确的结果...我不知道发生了什么...不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T12:31:13.040

您显示的日期格式不正确。

`mm`是月份，不是分钟。因此，您在时间显示中重复月份。

你想要：（`'yyyy/mm/dd hh24:mi:ss'`注意`mi`格式掩码中的）

# javascript - 加载时，页面位于其底部

> ID：15925725
> 
> 赞同：2
> 
> 时间：2013-04-10T12:24:10.590
> 
> 标签：javascript, scroll

我的[网站](http://www.ondinevermenot.fr)有问题。我的页面在 Firefox 中正常加载，但是当我使用 Chrome 或 Safari 时，它会转到页面底部，我不明白为什么。我尝试将以下代码段放在页面的开头，但没有运气。

```
<script>

$(document).ready(function() {
    $(document).scrollTop(0);
});

</script> 
```

为什么页面加载到底部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:27:26.927

访问您的网站时，我会被重定向到[http://www.ondinevermenot.fr/#start](http://www.ondinevermenot.fr/#start)。这意味着页面将尝试跳转到该`start`元素。

但是，`start`元素是绝对定位的。因此，当页面试图向下跳转时，`start`元素会随之向下移动。因此页面尝试再次向下跳转。然后`start`元素向下移动更多。他们继续向下直到页面底部，此时没有更多空间。

要修复它，请不要重定向到`#start`页面加载时间。

由于跳转到绝对定位的东西的奇怪之处，它可能在不同的浏览器中以不同的方式处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:31:46.537

尝试将您的图像和其他内容放入 div 并将 div 的 box 属性设置为 margin:auto。适用于 HTML5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T08:17:30.430

我为您准备了一个替代工作，以防您需要到达页面顶部 - 您可以使用此 javascript 作为替代：

```
((IJavaScriptExecutor)webapplication).ExecuteScript("window.scrollTo(0, document.body.scrollHeight 0)"); 
```

但是，另一种选择是设置启动属性：例如 document.start("body.height = 0") 类似的东西可能会起作用。

最好使用选项一作为代码以在设定的高度启动浏览器可能不适用于每个浏览器。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-09T06:54:46.303

我的页脚中有 2 个指向主页的链接。当我从页脚中删除链接时，问题就消失了。

# html - 达到最小宽度时防止css中的列表溢出

> ID：15925727
> 
> 赞同：0
> 
> 时间：2013-04-10T12:24:17.237
> 
> 标签：html, css, fluid-layout

我在使用 html 的导航栏时遇到问题。我希望它能够适应大小的变化，但是当屏幕变得非常小时，导航栏就会溢出并向上排列（我不知道我是否使用了正确的术语）。我希望这样当浏览器变得非常小时，它会简单地离开屏幕而不是平铺。

我仍然希望它有点流畅，但是一旦达到这个导航栏限制，只需防止它变小。

我试过应用一个`min-width`属性，但是当我缩小屏幕时，`<li>`元素会在彩色背景之外流动。

这是jsfiddler：

[http://jsfiddle.net/zP4jm/12/](http://jsfiddle.net/zP4jm/12/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:30:21.333

在您的 jsfiddle 上添加了 min-width 并且工作正常。

```
.navmenu{
    height: 45px;
    width: 92%;
    margin: auto;
    margin-bottom: 20px;
    background-color:#C60;
    min-width:700px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:31:50.617

您需要添加“溢出：隐藏；” 到 .navmenu 类，这样任何超出范围的东西都会被剪掉。

如果您希望在窗口变得太小时时显示滚动条，则使用 min-width 属性将起作用。

# jquery - jQueryMobile 删除输入字段

> ID：15925733
> 
> 赞同：4
> 
> 时间：2013-04-10T12:24:34.980
> 
> 标签：jquery, jquery-mobile

当使用 jQuery 发生某些事件时，我想删除输入字段：

```
$('#myInputId').remove(); 
```

但是如果我尝试一下，jQueryMobile 自动添加的周围 div 不会被删除。所以用户仍然会看到一个 div，它看起来像一个输入字段，但显然不可用，因为内部输入不再存在。

jQueryMobile 是否提供了在下一次升级出现时保证不会中断的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:39:48.317

删除`Text-input`字段使用`.closest();`，因为父级`DIV`是由 jQuery Mobile 添加的，并且不能有`ID`.

> [**演示**](http://jsfiddle.net/Palestinian/PbFg4/)

* * *

```
$('.selector').closest('div').remove(); 
```

删除它的'`label`

```
$('.selector').closest('div').prev('label').remove(); 
```

jQuery Mobile 以这种方式呈现文本输入。它用 div 包裹它，并将标签放在它之前，没有任何增强。`input`它通过添加`<a>`和`<span>`样式文本框来增强。

```
<label>Text Input</label>

<div>
 <input type="text" />
  <a href="#">
   <span>
    <span>&nbsp;
    </span>
   </span>
  </a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:25:57.107

如果 div 是直接父级，请尝试删除其父级..

```
$('#myInputId').parent().remove() 
```

[http://jsfiddle.net/F45Mg/](http://jsfiddle.net/F45Mg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:34:01.253

```
 $('#myInputId').parent().remove(); 
```

# apache - 日志未加载到新的 catalina.out 文件中

> ID：15925735
> 
> 赞同：0
> 
> 时间：2013-04-10T12:24:39.307
> 
> 标签：apache, tomcat, fedora, pentaho

我们在我们的应用程序中使用 tomcat 服务器。这里有很多日志创建到 catalina.out 。我们要制作 catalina.out 的存档。然后删除旧的 catalina.out 文件。并创建了一个新的 catalina.out 文件并授予权限。

但是新日志没有加载到 catalina.out 文件中。

重启tomcat服务器后，开始加载登录到catalina.out文件。

但是，我们希望在没有停机时间的情况下实现这一目标。

谢谢， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:57:38.213

您可以使用 JULI 或 Log4j 配置 Tomcat 日志记录。看一些配置[示例](http://www.mulesoft.com/tomcat-logging)。

如果你选择在 Tomcat 中使用 log4j，请注意这些配置属性

```
#  Max file size, after which the logfile is rolled and indexed
log4j.appender.R.MaxFileSize=10MB

# Number of backup indexed log files.
log4j.appender.R.MaxBackupIndex=10 
```

在[Apache Log4j Extras](http://logging.apache.org/log4j/companions/extras/index.html)中，您可以找到支持归档的日志文件附加程序。

# c# - 否则，如果错误地评估 bool

> ID：15925737
> 
> 赞同：-3
> 
> 时间：2013-04-10T12:24:41.910
> 
> 标签：c#, boolean, if-statement

这是我的代码：

```
if (addNewRecord == false)
        { MessageBox.Show("No action selected. \nSave cancelled."); }
else if (editCurrentRecord == false)
        { MessageBox.Show("No action selected. \nSave cancelled."); }
else{.....} 
```

`addNewRecord`并且`editCurrentRecord`我检查过的两个布尔值都有`true`值。当我像上面那样做时，消息框仍会显示为 bools `false`。但是，如果我只注释掉`ELSE IF`它，它将`ELSE`按预期继续。我在这里错过了一些基本的东西吗？感谢您的任何意见。

编辑：两个消息框不只显示一个。我在使用 MessageBox.Show(addNewRecord.ToString()); 的 IF 语句之前检查两个布尔值的值；对于另一个布尔值也是如此。他们正在按预期工作。仅当我尝试使用 else if 或 OR 语句评估这两个布尔值时，才会出现问题。

以下是所有相关代码：

```
namespace E_Z_Rent
{
public partial class Bookings : Form
{
    bool addNewRecord = false;
    bool editCurrentRecord = false;

    public Bookings()
    {
        InitializeComponent();
    }

    private void bookingsBindingNavigatorSaveItem_Click(object sender, EventArgs e)
    {
        MessageBox.Show(addNewRecord.ToString());
        MessageBox.Show(editCurrentRecord.ToString());
        if (addNewRecord == false)
        { MessageBox.Show("No action selected. \nSave cancelled."); }
        else if (editCurrentRecord == false)
        { MessageBox.Show("No action selected. \nSave cancelled."); }
        else
        {
            MessageBox.Show("OK");
        }
    }

    private void EditFieldsCheckBox_CheckedChanged(object sender, EventArgs e)
    {
        if (EditFieldsCheckBox.Checked == true)
        {
            editCurrentRecord = true;
        }
        else 
        {
            editCurrentRecord = false;
        }
    }

    private void bindingNavigatorAddNewItem_Click(object sender, EventArgs e)
    {
        addNewRecord = true;
    }
}
} 
```

我通过以下方式使其按预期工作：

```
 if (addNewRecord == true || editCurrentRecord == true){
          MessageBox.Show("OK");
      }
      else
      {
          MessageBox.Show("No action selected. \nSave cancelled.");
      } 
```

我仍然对此感到困惑，所以如果其他人能说出为什么会发生这种情况，我会回来查看。感谢大家的所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:30:56.863

看来您想这样做；

```
if (addNewRecord == false || editCurrentRecord == false)
        { MessageBox.Show("No action selected. \nSave cancelled."); }
else{.....} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:17:51.217

你的算法是错误的。只有当 addNewRecord 和 editCurrentRecord 都为真时，您才会进入最后的 else 案例。如果有任何一个错误，您将弹出“未选择任何操作”消息。

# licensing - 注册 SQL Server Express 重新分发

> ID：15925740
> 
> 赞同：3
> 
> 时间：2013-04-10T12:24:53.493
> 
> 标签：licensing, sql-server-express, redistributable

我们想在我们的应用程序中重新分发 SQL Server Express，并根据以下链接： [MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/01dbc5c3-b5fe-42d4-9eb9-91683cf8285b?referrer=http://social.msdn.microsoft.com/Profile/u/create?referrer=http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/01dbc5c3-b5fe-42d4-9eb9-91683cf8285b)， 所以[讨论](https://stackoverflow.com/questions/2442635/can-i-deploy-sql-server-express-with-my-desktop-application-just-like-builtin-da/2442660#2442660) 之前必须在 Microsoft 注册。不幸的是，上述[注册表](http://www.microsoft.com/sqlserver/2008/en/in/express/redistregister.aspx)的链接已损坏，我在 MS 网站上找不到注册表。最近有没有人完成注册并且可以帮助我提供工作链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:19:36.870

从 SQL Server 2012 开始，再分发权限内置于 SQL Server Express 许可证中，并且不再需要注册来重新分发此版本的 SQL Server Express。

# xslt-1.0 - how to provide variable dynamic value from other template?

> ID：15925751
> 
> 赞同：0
> 
> 时间：2013-04-10T12:25:13.390
> 
> 标签：xslt-1.0

```
 <xsl:template name="split">
    <xsl:param name="list"/>
        <xsl:variable name="first">
                         <xsl:value-of select="substring-before($list,' ')"/>
                    </xsl:variable>
        <xsl:copy-of select="$first"/>
</xsl:template> 
```

```
 <xsl:variable name="test">c0 c1 c2 c3 c4</xsl:variable>
                <xsl:variable name="var2>
                  <xsl:call-template name="split">
                        <xsl:with-param name="returnvalue">
                             <xsl:value-of select="$test"></xsl:with-param>
                  </xsl:call-template>
              </xsl:variable> 
```

// processing done

i want to return value from template as c0 then back to template match do processing then again go to split template again return c1 done same processing then back to split template then again processing in match template; depending upon the value of test variable...

How could i retreive these values one by one and process the code..??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:17:10.277

此样式表将向前扫描您的输入字符串：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:output method="text"/>

    <xsl:variable name="string" select="'c0 c1 c2 c3 c4'"/>
    <xsl:variable name="delim" select="' '"/>

    <xsl:template match="/">
        <xsl:call-template name="wrapper">
            <xsl:with-param name="string" select="$string"/>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="wrapper">
        <xsl:param name="string"/>
        <xsl:choose>
            <!-- handle empty input -->
            <xsl:when test=" $string = '' "/>

            <!-- handle next token -->
            <xsl:when test="contains($string, $delim)">
                <xsl:call-template name="process">
                    <xsl:with-param name="substring" select="substring-before($string,$delim)"/>
                </xsl:call-template>
                <xsl:call-template name="wrapper">
                    <xsl:with-param name="string" select="substring-after($string,$delim)"/>
                </xsl:call-template>
            </xsl:when>

            <!-- handle last token -->
            <xsl:otherwise>
                <xsl:call-template name="process">
                    <xsl:with-param name="substring" select="$string"/>
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="process">
        <xsl:param name="substring"/>
        <xsl:text>RECEIVED SUBSTRING: </xsl:text>
        <xsl:value-of select="$substring"/>
        <xsl:text>&#x000A;</xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

产生以下输出：

```
RECEIVED SUBSTRING: c0
RECEIVED SUBSTRING: c1
RECEIVED SUBSTRING: c2
RECEIVED SUBSTRING: c3
RECEIVED SUBSTRING: c4 
```

# java - Play framework for Java? version 1.x.x or 2.x.x

> ID：15925753
> 
> 赞同：3
> 
> 时间：2013-04-10T12:25:14.887
> 
> 标签：java, playframework, playframework-2.0

I just want to know if the application is going to be developed in Java, is it better to go for Play 1.x.x or 2.x.x?

and How long the version 1.x.x will be supported? Is it an active fork?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:41:12.373

从 Play 2+ 开始原因很简单，Play 1.x 不再由 Zenexity 官方开发。它现在仅处于维护模式。

几个月前出现了一个分支：[Yalp 框架](https://github.com/yalpframework/yalp)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T12:41:12.433

基本上 1.xx 仍然存在，因为它与 2.xx 确实不同

将 Play1 项目转换为 Play2 几乎是对所有内容进行重新编码，因此 Play 必须继续支持 Play1，以留住已经在使用 1.xx 进行生产的“客户”

如果您现在开始一个项目，无论是 Java 还是 Scala，我建议您使用 Play 2.1.x，因为它具有最新和最棒的功能。它也适用于最新版本的 scala（我知道这与您的问题无关）。

TLDR：1.xx 已过时但仍受支持，因为很多人仍在生产中使用，因为将 1.x 项目移植到 2.x 并不容易

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:10:33.360

首先，我认为您应该阅读[Play Framework 1.0 和 2.0 之间的主要区别是什么？](https://stackoverflow.com/questions/8189893/what-are-the-major-differences-between-play-framework-1-0-and-2-0/8193355#8193355). 2.x 正在积极开发中，但是如果您遇到问题，您必须阅读核心代码，即 scala 并且您必须使用 SBT 处理，它更像是 Scala 构建工具而不是简单构建工具。

对于 play 1.x，有一个 fork yalp，但它在开始时会与旧的 api 中断，但它是纯 java 的。

如果您需要 play2.x 的某些功能（响应式 Web 是指具有良好响应能力的服务器，与网页设计无关。）我认为玩 scala 是最好的选择。如果您有一个简单的应用程序，play1.x 可以满足您的一切需求。

因此，请查看教程以感受一下。

# iphone - 如何有条件地在 IOS 项目中包含图像 - 所以我可以多次出现同一个图像？

> ID：15925754
> 
> 赞同：0
> 
> 时间：2013-04-10T12:25:19.540
> 
> 标签：iphone, ios, ios6, ios5

在我的 IOS 项目中，我有一个图像（称为 x.png），在某些情况下我从一个文件夹复制到项目 x.png，然后在不同的条件下我从另一个文件夹复制。然后我构建了项目，所以我最终得到了项目的 2 个版本，每个版本都有自己的图像版本。

我可以自动化这个阶段吗？即如果设置了一些标志，项目将从一个地方获取文件，否则从另一个地方获取它？

# c++ - 如何在 C++ 中查找字符串中子字符串的出现次数和位置

> ID：15925756
> 
> 赞同：2
> 
> 时间：2013-04-10T12:25:25.543
> 
> 标签：c++, string

我正在努力寻找一个子串在一个stings中的位置数。下面的代码只为我提供了字符串中子字符串的起始位置。请帮我。

```
void Search(std::string SubString, vector<string> index)
{
    vector<string>::const_iterator cii;
    string temp;
    bool found = false;
    unsigned find = 0;
    for(cii = index.begin(); cii != index.end(); cii++)
    {
        temp = *cii;
        find = temp.find(SubString);
        if(find != std::string::npos)//running.find()
        {
            cout << find << endl;
            cout << *cii << endl;
            found = true;
        }
        else
        {
            if((cii == index.end()) && found)
            {
                cout << "Not found\n";
                found = false;
            }
        }
    }
}

int main()
{
    vector<string> index;
    ifstream myReadFile;
    string str, running;
    myReadFile.open("example.txt");
    char output[100];
    if (myReadFile.is_open()) 
    {
        while (!myReadFile.eof()) 
        {
            while( std::getline( myReadFile, str ) ) 
            {

                index.push_back(str);
            }
        }
    }

    while(running != "END")
    {
        cout << "To Quit type:- END\n";
        cin >> running;
        if(running == "END")
        {break;}
        else
        {
            Search(running, index);
        }

    }

    myReadFile.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:42:20.120

看看[std::string::find 参考](http://www.cplusplus.com/reference/string/string/find/)。Find 有第二个参数，即搜索开始的位置。因此，只需将 find 放入循环中，将前一个 find 的结果作为第二个参数，直到 find 返回 std::string::npos。类似于以下内容：

```
int startpos = 0;
int finds = 0;
while ((startpos = yourstring.find(substring, startpos)) != std::string::npos)
  ++finds; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:08:01.317

最后我做到了。我对我的`Search()`功能做了一些小改动。找到下面的代码。

```
void Search(std::string SubString, vector<string> index)
{
    vector<string>::const_iterator cii;
    string temp;
    bool found = false;
    unsigned find = 0;
    static int n = 0;
    for(cii = index.begin(); cii != index.end(); cii++)
    {
        temp = *cii;
        std::string ::size_type pos = 0;
        while( (pos = temp.find( SubString, pos )) 
                 != std::string::npos ) 
        {
            n++;
            pos += SubString.size();
            cout << pos << " ";
        }
        if(n)
        {
        cout << " \n ";
        cout << *cii << endl;
        found = true;
        }
        else
        {
            if((cii == index.end() - 1) && !found)
            {
                cout << "Not found\n";
                found = false;
            }
        }
        n = 0;
    }

} 
```

# django - 将聚合结果转换为字符串

> ID：15925759
> 
> 赞同：0
> 
> 时间：2013-04-10T12:25:28.777
> 
> 标签：django

我使用聚合和总和来确定我每个月工作的小时数。我有它的工作，但“小时”变量总是有额外的内容！

我应该补充一下，我是 django 的新手，我从这里获得了大部分代码（[Django 初学者：如何在 django ORM 中查询以根据日期计算字段](https://stackoverflow.com/questions/4548638/django-beginner-how-to-query-in-django-orm-to-calculate-fields-based-on-dates)）。

我的代码：

```
hours = ""
work_data = ""
month_data = ""

for month in range(1,13):
  entries_per_month = Mydata.objects.filter(myTimePeriod__month=month).filter(myResource="James")
  hours = str(entries_per_month.aggregate(value=Sum('myHoursLogged')))
  month_data = month_data + "'" + str(month) + "',"
  work_data = work_data + hours + "," 
```

我看一下work_data的结果：

```
work_data 
```

这给了我一个结果`{'value': Decimal('136.80')},{'value': Decimal('146.40')}`，

我需要它的格式：（`136.80, 146.40` 这是图表库所需的格式）。我试过用`str()`它来转换它，但在这种情况下它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:30:16.937

`str`在这里没有用，因为您的数据是字典列表。你只需要处理它并得到结果：

```
hours = ','.join(str(v['value']) for v in entries_per_month) 
```

# java - Why would I use one JVM over another?

> ID：15925761
> 
> 赞同：1
> 
> 时间：2013-04-10T12:25:48.780
> 
> 标签：java, jvm

I strongly suspect that this question will not be a good fit for the Q&A format, but I'm struggling to find the correct words - feel free to reedit the question.

So I'm looking at [Wikipedia's long list of java virtual machines](http://en.wikipedia.org/wiki/List_of_Java_virtual_machines) and I find myself wondering, given that Java is a portable language why someone would choose one JVM over the other? Is it a performance thing? Are some more secure?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T12:31:29.783

第一个原因是 JVM 本身不是用 Java 编写的，并且不能跨操作系统移植。因此，如果您的操作系统是 Windows，则最好选择 Windows VM，如果您在 Linux 上运行，则最好选择 Linux VM。

第二个原因是新版本的语言需要新版本的 JVM。例如，Java 7 VM 将无法运行使用 Java 8 Lambda 编写的程序。

然后像往常一样使用所有产品：有些产品在某些领域比其他产品更有效。有些是开源的，有些不是。有些专门针对给定类型的问题，有些则更通用，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:32:54.297

我会提出一个反问。

所有的汽车都提供了一种交通工具，为什么选择一辆车而不是另一辆车？

Sun/Oracle 只是提供了一个所有 JVM 实现者都需要遵循的规范。

您可以将 JVM 视为产品。不同的 JVM 供应商提供额外的功能/增强功能，同时遵守底层规范，这是一种最低公分母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:32:59.337

较新的版本对错误、安全问题等进行了修复，在语法（我知道，语法糖是正确的词）和性能方面进行了许多增强。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T12:29:09.190

在较新的版本中，性能得到了更多的增强。垃圾收集算法比以前的算法更有效。因此，为了获得更好的性能，最好迁移到新的算法。

# r - R accessing text in GRID.text

> ID：15925763
> 
> 赞同：1
> 
> 时间：2013-04-10T12:25:54.753
> 
> 标签：r, plot

Is there any way to access the actual text stored in the GRID.text reference?

I now i can modify it by using grid.edit()

but say the GRID.text is a number - and I want to normalise that number after the plot is made (since the function that creates the plot does a lot of calculations).

A small example of what I want to do:

```
library('grid')
grid.newpage()
grid.text("100",name='t1') 
```

In this example I would like to extract the number 100 - so i can modify it (say devide it by 5) and then use edit to modify the plot:

```
grid.edit(gPath='t1',label='the modified number') 
```

Any help is appreciated

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:28:57.960

这应该做

```
grid.get('t1')$label 
```

# asp.net-mvc - How do I maintain a specific query string across all requests?

> ID：15925765
> 
> 赞同：0
> 
> 时间：2013-04-10T12:25:57.553
> 
> 标签：asp.net-mvc, request.querystring

If someone goes to our website with a query string key of ref (for example mysite.com/AboutUs?ref=Test), is it possible to maintain that query string on all future links/form posts?

So for example, I may have a link on our website to go to mysite.com/Products. I would want this to be translated into mysite.com/Products?ref=Test.

Ideally I want to know if this is possible to do by inspecting the previous URL and adding it to the current URL when the request for the page is made, maybe by intercepting the route and appending the key (if it doesn't exist already).

The project is an MVC 4 application.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:48:07.057

实际上，您可以通过将其添加到每个 URL 来传递它，但这需要手动添加到`Html.ActionLink`等的每次使用中（或者我想您可以创建一个自定义 HTML Helper 来为您执行此操作，但是每个工作的开发人员在您的项目中需要记住始终使用自定义帮助程序），以及控制器操作中的所有重定向等。总而言之，这将非常耗时且非常脆弱。

您最好的选择是简单地使用查询字符串参数拦截初始请求，然后设置会话变量。然后，您可以简单地检查是否存在会话 var 而不是查询字符串参数。

要处理所有这些逻辑，最好的办法是创建一个全局操作过滤器。[MSDN 上](http://msdn.microsoft.com/en-us/library/gg416513%28v=vs.98%29.aspx)有关于过滤器的大量文档。创建过滤器后，您只需在 FilterConfig.cs（在 App_Start 中）注册它以使其成为全局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:32:18.523

在 cookie 中设置 URL 参数，然后在您的代码中根据 cookie 或 URL 中是否存在该值执行您想做的任何事情。

```
if(parameter set in cookie OR URL)
    // do stuff
if(parameter set in URL)
    // set the cookie so that future actions are also tagged with that parameter 
```

或者，如果您希望仅对会话进行此类标记，请设置会话变量。

按照您建议的方式进行 - 您可以根据此标签重写页面上的所有链接，但这将是一种迂回且昂贵的方式。大多数语言都允许一个钩子，允许您的代码在将 HTML 输出发送到浏览器之前对其进行处理；只需运行适当的正则表达式搜索和替换即可获得您想要的。例如，PHP 具有 ob 缓冲和相关功能。您可以使用 .Net 的等价物。

# javascript - Backbone.js 和全局实例

> ID：15925769
> 
> 赞同：0
> 
> 时间：2013-04-10T12:26:13.980
> 
> 标签：javascript, backbone.js, design-patterns

我们对骨干网很陌生，并用它构建了一个新的应用程序。我们使用的是标准命名空间，即：

```
(function($) {
   window.Lara = {
     Models: {},
      Collections: {},
     Views: {},
     Events: {},
     Templates: {}
   };
   var vent = _.extend({}, Backbone.Events);
}(jQuery)); 
```

我们需要保持某些视图的状态，以便它们可以在不同的模型和视图中访问，我的问题是应该在哪里保存所有模型和视图等的实例......我发现很难将事情保持在范围内在所有事件和不同视图之间，所以我可以将所有需要的全局实例放在 App 命名空间中的某个位置......这是正确的方法吗？

我觉得定义的 Lara.Models、Lara.Views 等应该保持干净并作为实例的模板......我应该创建一个 Lara.Instances 并将它们全部转储到那里吗？

任何建议在这里都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:43:50.960

不太确定您的问题，您需要对现有视图/模型的参考吗？

我会在 Application 范围内保留对 UserSession 等重要模型的参考，对于您的情况，它类似于

```
Lara.currentUser = new Lara.Models.UserSession() # Set it when user logs in 
```

这是你要找的东西吗？把评论留给我

# powershell - 远程计算机上的活动登录用户

> ID：15925771
> 
> 赞同：0
> 
> 时间：2013-04-10T12:26:15.593
> 
> 标签：powershell

我正在使用下面的脚本来登录远程机器上的用户。它工作正常，但我需要让用户那些状态“活跃”

如何在远程机器上获取那些活跃的登录用户？

```
function Global:Get-LoggedOnUser {
    #Requires -Version 2.0            
    [CmdletBinding()]            
     Param             
       (                       
        [Parameter(Mandatory=$false,
                   Position=0,                          
                   ValueFromPipeline=$true,            
                   ValueFromPipelineByPropertyName=$true)]            
        [String[]]$ComputerName = $env:COMPUTERNAME
       )#End Param

    Begin            
    {            
     Write-Host "`n Checking Users . . . "
     $i = 0
     $MyParams = @{
         Class       = "Win32_process" 
         Filter      = "Name='Explorer.exe'" 
         ErrorAction = "Stop"
        }
    }#Begin          
    Process            
    {
        $ComputerName | Foreach-object {
        $Computer = $_

        $MyParams["ComputerName"] = $Computer
        try
            {
                $processinfo = @(Get-WmiObject @MyParams)
                if ($Processinfo)
                    {    
                        $Processinfo | ForEach-Object { 
                            New-Object PSObject -Property @{
                                ComputerName=$Computer
                                LoggedOn    =$_.GetOwner().User
                                SID         =$_.GetOwnerSid().sid} } | 
                        Select-Object ComputerName,LoggedOn,SID
                    }#If
            }
        catch
            {
                "Cannot find any processes running on $computer" | Out-Host
            }
         }#Forech-object(ComputerName)       

    }#Process
    End
    {

    }#End

    }#Get-LoggedOnUsers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T18:04:50.353

为 Win32_ComputerSystem 类添加查询：

```
Get-WMIObject -Class Win32_ComputerSystem -Computername $Computer | Select UserName 
```

这将抓住“活动”用户，然后您可以使用“活动”布尔值构建一个对象。

这是我的实现：

```
function Get-LoggedOnUser
{
    [CmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$true,
                   Position=0,
                   ValueFromPipeline=$true,
                   ValueFromPipelineByPropertyName=$true)]
        [String[]]$ComputerName
    )
    Begin            
    {            
        $users = $null
        $return = @()
    }
    Process
    {
        ForEach($Computer in $ComputerName)
        {
            $activeUser = Get-WMIObject -class Win32_ComputerSystem -ComputerName $Computer -EA stop | select UserName
            Try
            {
                $processinfo = @(Get-WmiObject -class win32_process -ComputerName $Computer -EA "Stop")
                If ($processinfo)
                {    
                    ForEach($process in $processinfo)
                    {
                        [string[]]$users += $process.GetOwner().user| Where{($_ -ne "NETWORK SERVICE") -and ($_ -ne "LOCAL SERVICE") -and ($_ -ne "SYSTEM")}
                    }
                    If($Users)
                    { 
                        ForEach($user in ($Users | Select -unique))
                        {
                            If($ActiveUser.username -like "*$user")
                            {
                                $Return += New-Object PSObject -Property @{
                                            "User" = $user
                                            "Active" = $true
                                            "Computer" = $Computer
                                }
                            }
                            Else
                            {
                                $Return += New-Object PSObject -Property @{
                                            "User" = $user
                                            "Active" = $false
                                            "Computer" = $Computer
                                }
                            }
                        }
                    }
                    Else
                    {
                        "There are no users logged onto $computer" | Out-Host
                    }
                }
            }
            Catch
            {
                "Cannot find any processes running on $computer" | Out-Host
            }
        }
    }
    End
    {
        $Return
    }
} 
```

值得指出的是，仅当用户在本地登录时才会填充 Win32_ComputerSystem 用户名，因此通过远程桌面登录的任何人都不会显示为“活动”。

# jquery - 是否可以向 .slideUp 和 .slideDown jQuery 函数添加淡入淡出

> ID：15925772
> 
> 赞同：1
> 
> 时间：2013-04-10T12:26:16.510
> 
> 标签：jquery, fadein, fadeout, slidedown, slideup

是否可以对 .slideUp 和 .slideDown 进行轻微的淡入淡出，使其随着淡入淡出向上滑动？

```
options.trickerPanel.slideUp(function() {
        $(this).html(value).slideDown(); 
```

这是完整的代码，例如[http://jsfiddle.net/LtpHv/1/](http://jsfiddle.net/LtpHv/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:38:49.193

简单的顺序淡入淡出+幻灯片有什么问题？

```
$('#a').fadeOut();
$('#a').slideUp(); 
```

这两个动作将同时发生，给你一个很好的淡入淡出+滑动效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:33:28.667

尝试在 SlideDown 函数中添加一个数字，这是动画发生所需的时间（以毫秒为单位）。

```
slideDown("Enter number here")
slideUp("Enter number here", function(){ } 
```

我已经在你的小提琴中做出了改变

示例代码[http://jsfiddle.net/LtpHv/5/](http://jsfiddle.net/LtpHv/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:38:19.817

尝试这个

```
$(this).html(value).css('opacity', 0)
  .slideDown('slow')
  .animate(
    { opacity: 1 },
    { queue: false, duration: 'slow' }
); 
```

**[小提琴](http://jsfiddle.net/mohammadAdil/LtpHv/6/)**

# c# - Combine TrimStart and TrimEnd for a String

> ID：15925778
> 
> 赞同：4
> 
> 时间：2013-04-10T12:26:36.777
> 
> 标签：c#, regex, string, c#-4.0, trim

I have a string with some letters and numbers. here an exemple :

```
OG000134W4.11 
```

I have to trim all the first letters and the first zeros to get this :

```
134W4.11 
```

I also need to cut the character from the first letter he will encounter to finally retreive :

```
134 
```

I know I can do this with more than one "trim" but I want to know if there was an efficient way to do that.

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:37:12.123

如果您不想使用正则表达式 .. 那么 Linq 是您的朋友

```
 [Test]
    public void TrimTest()
    {
        var str = "OG000134W4.11";
        var ret = str.SkipWhile(x => char.IsLetter(x) || x == '0').TakeWhile(x => !char.IsLetter(x));
        Assert.AreEqual("134", ret);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:41:00.380

```
using System;
using System.Text.RegularExpressions;

namespace regex
{
class MainClass
{
    public static void Main (string[] args)
    {
        string result = matchTest("OG000134W4.11");
        Console.WriteLine(result);
    }

    public static string matchTest (string input)
    {
        Regex rx = new Regex(@"([1-9][0-9]+)\w*[0-9]*\.[0-9]*");
        Match match = rx.Match(input);

        if (match.Success){
            return match.Groups[1].Value;
        }else{
            return string.Empty;
        }
    }
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T12:34:20.090

这是我将使用的正则表达式

```
([1-9][0-9]*)[^1-9].* 
```

这是您可以尝试的一些 C# 代码

```
var input = "OG000134W4.11";
var result = new Regex(@"([1-9][0-9]*)[^1-9].*").Replace(input, "$1"); 
```

# c# - Is calling into other code a (SOLID) Single Responsibility Principles (SRP) violation?

> ID：15925786
> 
> 赞同：4
> 
> 时间：2013-04-10T12:27:08.793
> 
> 标签：c#, oop, design-patterns, design-principles

Considering this class with business logic:

```
public static class OrderShipper
{
    public static void ShipOrder(Order order) {
        AuthorizationHelper.AuthorizedUser();

        using (new PerformanceProfiler()) {
            OperationRetryHelper.HandleWithRetries(() => ShipOrderInTransaction(order));
        }
    }

    private static void ShipOrderInTransaction(Order order) {
        using (var transaction = new TransactionHelper()) {
            ShipOrderInternal(order);

            transaction.Commit();
        }            
    }

    private static void ShipOrderInternal(order) {
        // lots of business logic
    }
} 
```

The class contains some business logic, and executes some crosscutting concerns as well. Although there is no doubt about that this class violates the [Open/Closed Principle](http://en.wikipedia.org/wiki/Open/closed_principle), **does this class violate the [Single Responsibility Principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)?**

I'm in doubt, since the class itself is not responsible for authorizing the user, for profiling the performance and for handling the transaction.

There is no question about this that this is poor design, since the class is still (statically) depending on those crosscutting concerns, but still: Is it violating the SRP. If so, why is this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:56:38.917

这是一个很好的问题，标题有点误导（你不可能在不“调用其他代码”的情况下构建应用程序）。请记住，SOLID 原则更多的是指导而不是必须遵守的绝对规则；如果您将 SRP 得出其合乎逻辑的结论，那么您最终将得到每个类一个方法。最小化横切关注点影响的方法是创建一个尽可能易于使用的外观。在您的示例中，您做得很好-每个横切关注点仅使用一行。

另一种实现这一点的方法是通过[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)，这可以在 C# 中使用[PostSharp](http://www.postsharp.net/)或通过[IoC 拦截](http://msdn.microsoft.com/en-us/library/ff647107.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:37:53.707

让我们通过将类转换为命令来使其更加可见：

```
// Command pattern
public class ShipOrder
{
    ITransactionFactory _transactionFactory;

    public OrderShipper(ITransactionFactory factory)
    {
        if (factory == null) throw new ArgumentNullException("factory");

        _transactionFactory = factory;
    }

    [PrincipalPermission(Roles = "User")]
    public void Execute(Order order) 
    {
        if (order == null) throw new ArgumentNullException("order");

        using (new PerformanceProfiler()) 
        {
            HandleWithRetries(() => ShipOrderInTransaction(order));
        }
    }

    private void ShipOrderInTransaction(Order order) 
    {
        using (var transaction = _transactionFactory.Create()) 
        {
            ShipOrderInternal(order);

            transaction.Commit();
        }            
    }

    protected void ShipOrderInternal(order) 
    {
        // bussiness logic which is divided into different protected methods.
    }
} 
```

因此，您可以使用以下方法调用它：

```
var cmd = new ShipOrder(transactionFactory);
cmd.Execute(order); 
```

这很扎实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T12:56:12.247

是的，它确实破坏了 SRP，至少根据类名。

> 类本身不负责授权用户、分析性能和处理事务。

您正在回答自己，它应该只包含运输订单逻辑。而且它不应该是静态的（为什么它是静态的？！）。

@jgauffin 提供的解决方案是一种可能性，尽管我不完全相信 OrderShipper 应该知道交易或者它应该只是交易的一部分。此外，性能分析器 IMO 在此类中也没有位置。但是只有这些信息我不能提出解决方案。虽然分析是一个横切的关注点，在这个类之外处理可能会更好，也许有一个属性。

顺便说一句，使用消息驱动的方法（如 jgauffin 所建议的）它应该允许基础设施提供分析和可靠性（HandleWithRetries）支持

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T12:30:49.777

协调一些其他类活动的类方法没有错，这并没有破坏 SRP。如果这些类的逻辑是`OrderShipper`.

我不确定是什么`PerformanceProfiler`，但它是唯一看起来很奇怪的组件。

# javascript - 使用 new 和正确使用 apply 有哪些区别？

> ID：15925787
> 
> 赞同：2
> 
> 时间：2013-04-10T12:27:09.390
> 
> 标签：javascript

这之间有哪些区别：

```
foo = new Bar(someArgs); 
```

和这个：

```
Bar.apply(foo = {}, [someArgs]); 
```

作为`Bar`构造函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:30:25.577

`new Bar`创建一个继承自 的新对象`Bar.prototype`，而`{}`文字只是一个直接继承自 的空对象`Object.prototype`。然后`Bar`在两种情况下都将函数应用于对象。此外，如果函数应该显式返回一个对象，`new Bar`则语义几乎没有什么不同。`Bar`

查看[关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new#Description)[的详细描述`new`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new#Description)。

# c# - Visual Studio，C#如何将doc文件添加为资源

> ID：15925801
> 
> 赞同：4
> 
> 时间：2013-04-10T12:27:39.187
> 
> 标签：c#, ms-office

我正在尝试将 word 文档 (.doc) 作为资源添加到我的项目中，以便我可以使用按钮打开它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:33:00.710

您可以采取以下步骤将 doc 文件作为资源添加到项目中：

1.  右键单击您的项目并选择“属性”选项。
2.  然后单击“资源”选项卡，它将显示对话框供您在设计时添加资源。
3.  默认页面为添加字符串资源，您可以选择右上角的组合框选择“文件”项。
4.  然后单击“添加资源”按钮以选择 doc 文件并单击确定。
5.  最后，文档文件将显示在空白区域。这意味着您已成功添加它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T12:32:11.237

1.  使用项目的 Add->Existing Item... 添加您的文档。
2.  在解决方案资源管理器中右键单击文档项
3.  从上下文菜单中选择属性
4.  将构建操作从编译更改为嵌入式资源
5.  ...
6.  利润！！！

# java - 处理双向关系时，neo4j 模板的持久性很慢

> ID：15925802
> 
> 赞同：0
> 
> 时间：2013-04-10T12:27:41.267
> 
> 标签：java, performance, neo4j

给定以下两个对象：

```
@NodeEntity  
class Foo  
{
   @GraphId   
   long id;  
   @RelatedTo(Bar.class,direction=Direction.BOTH, type="BAR")  
   Set<Bar> bars= new HashSet<Bar>();    
   @Indexed  
   String name;
} 
```

和

```
@NodeEntity  
class Bar
{
   @GraphId   
   long id;  
   @RelatedTo(Foo.class,direction=Direction.BOTH, type="Foo")  
   Set<Foo> foos= new HashSet<Foo>();    
   @Indexed  
   String name;
} 
```

以下持久性级别代码非常慢（每个持久性慢 5-20 秒）

```
@Service  
class Persister  
{  
   @Autowired  
   Neo4JTemplate template;    
   @Autowired  
   FooRepository fooRepo;    
   @Autowired  
   BarRepository barRepo;  
void go()  
{  
    Bar bar = barRepo.findByName("myBar");  
    if(null != bar)  
    {    
        bar.getFoos().addAll(fooRepo.readAll());    
        return bar;  
    }
     template.save(bar);  
 }    
}

interface BarRepository extends Repository<Bar>  
{  
     Bar findByName(String name);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:48:29.460

你在使用 Neo4j REST 接口吗？如果是这样，我的这篇文章可能会提供一个线索 - [Spring-data-neo4j 中 @MapResult 的性能](https://stackoverflow.com/questions/15609074/performance-with-mapresult-in-spring-data-neo4j)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:16:19.893

您要添加多少个 foo `bar`？

您使用的是简单映射还是高级映射？

您应该有一个`@Transactional`围绕您的`go()`方法，否则将为每个添加的实体创建数以千计的小交易。（在高级模式下，在简单模式下，代码不会保存更改。）

# javascript - 按 Placemarker 名称搜索 Google Earth API

> ID：15925803
> 
> 赞同：1
> 
> 时间：2013-04-10T12:27:45.270
> 
> 标签：javascript, google-earth, google-earth-plugin

我正在尝试`Google Earth API`为 javascript 插件创建搜索框我能够`KMLFile`在 GE API 中解析和加载，现在我必须通过 KML 加载的 Placemarker 名称嵌入搜索

使用纬度和经度的代码

```
var lookAt = ge.createLookAt('');
lookAt.set(point.y, point.x, 600, ge.ALTITUDE_RELATIVE_TO_GROUND, 0, 00, 0);
ge.getView().setAbstractView(lookAt); 
```

除了使用 LAT、LONG 之外，是否有`LookAt`使用 Placemarker Name 的可能性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T11:50:37.633

是的，有很多方法可以查看地标。最简单的方法是如果地标已定义抽象视图。例如

```
if (placemark.getAbstractView()) {
   ge.getView().setAbstractView(placemark.getAbstractView());
} 
```

您还可以使用各种访问器来引用地标。例如，如果地标有 ID，您可以使用 getElementById。

```
var placemark = ge.getElementById('MyPlacemark');
if (placemark.getAbstractView()) {
   ge.getView().setAbstractView(placemark.getAbstractView());
} 
```

或者，如果您通过其 URL 加载 KML，例如

```
// loaded via KML
var placemark = ge.getElementByUrl('http://site.com/foo.kml#MyPlacemark');
if (placemark.getAbstractView()) {
   ge.getView().setAbstractView(placemark.getAbstractView());
} 
```

如果地标没有抽象视图，您仍然可以使用访问器找到正确的地标，然后从中提取几何图形以创建外观。

```
var placemark = ge.getElementByUrl('http://site.com/foo.kml#MyPlacemark');
var point = placemark.getGeometry();
var lat = point.getLatitude();
var lng = point.getLongitude(); 
```

# fxcop - FxCop - TFS 集成：如果 FxCop 失败，需要创建 TFS 错误到最后亲自检查

> ID：15925807
> 
> 赞同：1
> 
> 时间：2013-04-10T12:27:53.913
> 
> 标签：fxcop, tfsintegrationplatform

我们有关于 FxCop 与 TFS2010 集成的特定要求。要求如下。- 执行 build.in 特定间隔（已经有一个方法） - 每次构建后运行 FxCop。（这太简单了） - 如果有任何失败，需要创建一个 TFS 错误项并分配给上次签入文件的人。

我们知道“门禁值机”是最好的方式。但由于某些原因，我们不能采用它。我们面临的挑战是针对每个文件的最后一次亲自检查来创建错误。

以前有人做过这种解决方案吗？有没有公​​开的代码可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:22:46.983

它是通过对整个部分进行编码来完成的。基本思路如下

1.  获取最新版本并运行生成 pdb 的现有构建脚本 ()
2.  在构建脚本结束时使用 FxCopCmd 启动 FxCops 并将输出获取到 xml 文件
3.  解析 xml 并找出包含失败评论的 xml 消息节点
4.  从上面的xml节点中提取代码文件路径
5.  将文件路径映射到 TFS 路径（即 c:\code 到以 $\code 开头的 tfs 路径）
6.  查找最后签入人员的详细信息
7.  创建错误并将其分配给该人。

这是特定于我们的项目的，由于大代码库和高频代码签入，我们无法实现门控签入。但必须实施自动审查。

这个可以关闭

# python - 如何检查工作是否正确完成（Python mechanize）

> ID：15925816
> 
> 赞同：0
> 
> 时间：2013-04-10T12:28:01.017
> 
> 标签：python, mechanize, html-post

我有这样的代码： 1\. 检查一些复选框 2\. 删除我选择的内容

```
resp = mechanize.Request('http://some_url/manager.php', data)
cj.add_cookie_header(resp)
res = mechanize.urlopen(resp)
time.sleep(2) 
```

数据如下所示：

```
data = {'checkbox[]': '1', 'checkbox[]': '3', 'checkbox[]': '6', 'id': '1', 'submit': 'Delete'} 
```

我如何检查工作是否正确完成，如果没有，再试一次？一个很棒的示例代码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:17:15.797

这取决于工作是什么。你能不能不这样做`res.read()`，如果身体中有一些指标表明它按照你的意图工作，你可以检查它在那里吗？如果相关信息在响应 url 或 headers 中，则使用: `res.info()`for headers and `res.geturl()`for the url。

你是这个意思吗？

```
resp = mechanize.Request('http://some_url/manager.php', data)
cj.add_cookie_header(resp)
res = mechanize.urlopen(resp)
while res.read() == None:
    time.sleep(2)
    res = mechanize.urlopen(resp) 
```

# css - 我的导航栏 CSS 覆盖了我在 Opera 上的其他链接 CSS

> ID：15925818
> 
> 赞同：0
> 
> 时间：2013-04-10T12:28:07.227
> 
> 标签：css, opera

我为导航栏设置样式的方式如下：

```
nav a:link,a:visited {
    display:block;
    width: 125px;
    color:#000000;
    background-color:#FFFFFF;
    text-decoration:none;
    font-family: Arial,Helvetica,sans-serif;
    font-variant:small-caps;
    padding: 5px;
    font-size: 18px;
} 
```

我的其余链接的样式如下：

```
footer a:link {
    color:#7A7A7A;
}

footer a:visited {
    color:#7A7A7A;
} 

footer a:hover {
    color:#383838;
}   

footer a:active {
    color:#000000;
} 
```

问题是 Opera 无法识别 a:link,a:visited 之前的 #nav 或 #footer，因此，我页面上的每个链接看起来都像 Opera 中的导航栏。谁能想到解决这个问题？

HTML

```
<ul id="nav">
    <li>
        <a href="#home">Home</a>
    </li>

    <li>
        <a href="#news">About Us</a>
    </li>

    <li>
        <a href="#contact">Portfolio</a>
    </li>

    <li>
        <a href="#about">Services</a>
    </li>

    <li>
        <a href="#about">Contact Us</a>
    </li>
</ul> 
```

这是被覆盖的 HTML：

```
<div id="footer">
    Copyright 2013, <a href="http:">Link 1 </a> and <a href="http:">Link 2 </a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:40:45.837

您的导航链接的第二个选择器不太正确，应该是：

```
nav a:link,
nav a:visited {
    // styles
} 
```

而不是`nav a:link, a:visited`这样，样式会应用于每个访问过的锚点。

也像其他答案中提到的那样，由于您已经发布了 HTML，因此您必须使用`#nav`or选择索引 (id) 元素`#footer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:51:45.950

您正在尝试定位一个 ID，您的 CSS 选择器应该是`#nav`并且`#footer`

例如

```
#footer {
  blah
}
#nav {
  blah
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:53:39.157

正如[Simons](https://stackoverflow.com/a/15926131/2224246)的回答中提到的，它是需要`nav`添加的第二个选择器，`nav a:visited`而不是`a:visited`.

[这是一个工作示例](http://jsfiddle.net/KTPcH/2/)（在 Win7 上的 Opera 12 和 Chrome 26 中测试）

也从更改`nav`为`#nav`（页脚相同）以使其与您的 html 一起使用

# android - 从 userid 获取 google 用户名

> ID：15925820
> 
> 赞同：0
> 
> 时间：2013-04-10T12:28:11.087
> 
> 标签：android, oauth, gmail

我使用[Android market api](http://code.google.com/p/android-market-api/) 来从 google playstore 获取信息。该 api 返回与应用程序的每个审阅者对应的用户 ID。api 返回的示例用户 ID 如下所示：

```
cid-lg:AOqpTOGMFCTbFodkU6yTr_DttkugfrgfI0-q6a008jeD67cKE1xoDv_bT8gjjILcPcxOOZ0m3atfEDl9O0RLiYM
cid-gp:AOqpTOGCrH6yXqvnrDmTZ6C1gJrLBYioEemkZq4nflx-e1c7Eg6coh1c8q_mhtJB07-fUBps0a-AxTHMBLuDOGA
cid-gp:AOqpTOHUIW7EByEinUUKXzZeHRKC3UvbAXnGtuaVE2i4rIUXMw-zfD3WsXr4Hl25fCPSKx4ix6GXT-gt9NM_9P0 
```

这些是单个应用程序的 3 个不同审阅者的用户 ID。

有没有办法获得与这些用户 ID 对应的谷歌用户名？

# r - 在excel的同一张表中添加R输出

> ID：15925822
> 
> 赞同：0
> 
> 时间：2013-04-10T12:28:21.643
> 
> 标签：r

我一直在使用以下函数将我的输出放在 R 中的不同工作表中，但是如果我希望我的输出如下面的示例所示，该怎么办

```
data<-loadWorkbook("trial.xls",create=TRUE)
createSheet(data,name="tr1")
writeWorksheet(data,rows,sheet="tr1")
saveWorkbook(data) 
```

所以我希望我的电子表格看起来像这样

```
Values Median STD Length
3       5      6   7
6       7      7   8
Values Median STD Length
4      7      8   1
6       9      0   3 
```

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:34:11.350

您可以在 Excel 工作表中设置位置`starRow=`。`writeWorksheet()`这是我在一张纸上写数据`iris`和`cars`. 我将位置设置在`startRow=(nrow(iris)+2)`上一个表的下方（+2 用作第一个表还包含不计入的列名`nrow()`）。要删除第二个表的标题，请进行第二`header=FALSE`次`writeWorksheet()`调用。

```
library(XLConnect)    
data(iris)
data(cars)
wb<-loadWorkbook("trial.xls",create=TRUE)
createSheet(wb,name="tr1")
writeWorksheet(wb,iris,sheet="tr1")
writeWorksheet(wb,cars,sheet="tr1",startRow=(nrow(iris)+2),header=FALSE)
saveWorkbook(wb) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:14:24.223

您可能还想看看`appendWorksheet`. 有关`help(appendWorksheet)`更多信息，请参阅。

示例代码：

```
需要（XLConnect）
wb = loadWorkbook("test.xlsx", create = TRUE)
createSheet(wb, name = "mtcars")
writeWorksheet(wb, mtcars, sheet = "mtcars")
for(i in 1:5) appendWorksheet (wb, mtcars, sheet = "mtcars", header = FALSE)
保存工作簿（wb）

```

# excel - Excel VLookup 和列表

> ID：15925827
> 
> 赞同：0
> 
> 时间：2013-04-10T12:28:28.180
> 
> 标签：excel, formula

我试图列出表格上一个单元格的所有唯一出现，然后列出它们。

```
TABLE 1

PLACES      WEEK
| Place 1 | Week 2 |
| Place 1 | Week 2 |
| Place 1 | Week 2 |
| Place 1 | Week 3 |
| Place 2 | Week 2 | 
| Place 2 | Week 3 |
| Place 3 | Week 2 |
| Place 4 | Week 3 |
| Place 4 | Week 3 |
| Place 4 | Week 3 | 
```

所以在另一张纸上，我想要一个第 2 周的所有地方的列表，但我只想要每个地方出现一次。结果就是我会得到的。

```
| Place 1 |
| Place 2 |
| Place 3 | 
```

但不要把 4 放在我的名单上。

这可以用公式吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:40:32.383

如果你对空格没问题，这是首先想到的

```
=IF(AND(Sheet1!B1= 2,$A$1:A1 <>Sheet1!A1),Sheet1!A1, "") 
```

当你输入它时，作为数组输入（Ctrl + Shift + Enter），确保你得到“{}”包围公式然后向下拖动。并确保从列的第二行开始。

# html - 使用 PhoneGap 缩放和适应内容（使用视口）

> ID：15925836
> 
> 赞同：7
> 
> 时间：2013-04-10T12:28:38.063
> 
> 标签：html, css, cordova, viewport, metatag

我正在尝试将旧项目改编并移植到 PhoneGap。

到目前为止，该项目在 Android 浏览器下可以正常运行，但它不适用于 PhoneGap，因为它不会调整内容以适应整个屏幕。它总是留下一个空白，这不是我想要的。PhoneGap 似乎没有注意我正在使用的元标记中的视口属性。

我一直在做一些测试以找出问题，但没有任何结果。

例如，下面的测试只包含两个文件：index.html 和 config.xml

它包含一个宽度为 276 像素的 DIV，我希望 PhoneGap 能够像 Android 浏览器一样使其适合整个页面。

顺便说一句，我正在使用 PhoneGap Build 网站在线构建这个测试。

这是 index.html 文件的内容（我没有使用 DOCTYPE 来简化它，但即使使用它也无法正常工作）：

```
<html>
    <head>
        <meta name="viewport" content="width=276, user-scalable=yes" />
        <title>Title</title>
    </head>
    <body>
        <div style="width:276px; background-color:orange;">I want to make this div fit to the page</div>
    </body>
</html> 
```

这是 config.xml 文件的内容（注意首选项 EnableViewportScale 设置为“true”，但即使设置为“yes”也不起作用）：

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.phonegap.example"
        versionCode="10" 
        version   = "1.0.0">

    <!-- versionCode is optional and Android only -->

    <name>PhoneGap Example</name>

    <description>
        An example for phonegap build docs. 
    </description>

    <author href="https://build.phonegap.com" email="support@phonegap.com">
        Hardeep Shoker 
    </author>

    <preference name="EnableViewportScale" value="true" />
</widget> 
```

就是这样。有什么我做错了吗？我怎样才能归档我正在尝试做的事情？我确信它应该有一个非常简单的解决方案，但我现在找不到它。

非常感谢您，对我的英语感到抱歉，这不是我的母语。

干杯，琼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-27T00:58:49.580

当我偶然发现这篇文章时，我几乎放弃了：http: [//antonylees.blogspot.com/2012/06/phonegap-viewport-size-is-too-small-on.html](http://antonylees.blogspot.com/2012/06/phonegap-viewport-size-is-too-small-on.html)

基本上我修改了我的默认 AndroidManifest.xml 条目：

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="19" /> 
```

至

```
<uses-sdk android:minSdkVersion="7" /> 
```

你可以稍微玩一下这个版本。我猜只是不要针对版本 19。另外，您可以添加

```
target-densitydpi=device-dpi
target-densitydpi=medium-dpi
... 
```

到您的元视口标签，具体取决于您要执行的操作。

* * *

编辑：好的，这是一个exploanation： http: [//developer.android.com/guide/webapps/migrating.html](http://developer.android.com/guide/webapps/migrating.html) 自Android 4.4（KitKat）以来，WebView 已经更改为基于铬的新版本。通过将目标版本设置为低于 19，webview 设置为 quirks 模式。

> 注意：如果您的 targetSdkVersion 设置为“18”或更低，WebView 将在“怪癖模式”下运行，以尽可能避免下面描述的一些行为变化——同时仍为您的应用程序提供性能和 Web 标准升级。**但请注意，Android 4.4 根本不支持单列布局和窄列布局以及默认缩放级别**，并且可能存在尚未确定的其他行为差异，因此请务必在 Android 4.4 或更高版本上测试您的应用程序，即使您将 targetSdkVersion 设置为“18”或更低。

PP：使用 LG L70 手机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T12:46:33.603

尝试

```
<meta name="viewport" content="width=276, user-scalable=1" /> 
```

**或者** 如果您将以下行添加到您的**onCreate() 方法**：

```
WebSettings settings = this.appView.getSettings();
settings.setSupportZoom(true);
settings.setBuiltInZoomControls(true); 
```

**或** 尝试使用 iScroll 4 ( [http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4) ) ***捏/缩放***

# javascript - javascript内存泄漏和分析？

> ID：15925838
> 
> 赞同：0
> 
> 时间：2013-04-10T12:28:45.187
> 
> 标签：javascript, jquery, performance, google-chrome-devtools

我是javascript开发的新手。我构建了一个巨大的 JavaScript 应用程序。测试我使用 chrome 开发工具的应用程序，但我不知道分析。我拍了一个堆快照，我得到了 32mb 的快照。

它是什么（32mb）以及如何知道 javascript 中的内存泄漏？

如何使用分析来衡量我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:38:26.247

您只需按 F12，您将在那里获得配置文件选项。如果要检查完成按钮单击操作所需的时间，只需选择`Collect Javascript CPU`配置文件并说开始。然后单击所需的按钮，然后停止。您将在那里获得点击的详细分析。您可以稍后检查可以减少操作总时间的地方。即优化它。你也可以在 IE 中使用开发者工具来达到同样的目的。

为了优化，您可以避免不必要的循环，将元素存储在变量中，然后使用代码中经常需要的元素。等

您还可以在chrome的右下角查看错误（如果有），并可以解决这些错误以进行优化。

配置文件将为您提供父函数和在父函数中单独调用的其他函数所花费的时间，这有助于独立优化每个函数。

当您为单击按钮等任何操作启动和停止分析器时，您将在 Chrome 配置文件中获得该操作的总时间（以秒或毫秒为单位）。如果时间超过该操作的用户接受时间，您可以修改/优化您的 JavaScript 代码。如果任何操作花费的时间超过用户接受时间，则意味着您的网站性能不佳，需要优化。用户接受时间完全取决于操作类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:36:39.843

DevTools 能够向您展示看起来像泄漏的对象。[这里](https://stackoverflow.com/questions/11969062/tool-to-track-down-javascript-memory-leak)描述的最简单和有用的技术

在它的帮助下，组成 gmail 团队的人设法[修复了 gmail 页面中的漏洞](https://docs.google.com/presentation/d/1wUVmf78gG-ra5aOxvTfYdiLkdGaR9OhXRnOlIcEmu2s/pub?start=false&loop=false&delayms=3000#slide=id.g1d65bdf6_0_0)。

# signal-processing - 尝试在labview中实现一个8点一维DCT-II；只能在我的输出数组中放一个值

> ID：15925841
> 
> 赞同：0
> 
> 时间：2013-04-10T12:28:51.947
> 
> 标签：signal-processing, labview

我正在尝试在 Labview 中实现一维 DCT II 型滤波器。这个公式可以在[这里看到](http://upload.wikimedia.org/math/e/0/1/e0186125d4115a3883a6a20871bd8eda.png)

如您所见，xk = 涉及 n 次迭代的 sum 函数的总和。

![这是我尝试的框图](https://i.stack.imgur.com/nNYh2.png)

据我所知，嵌套的 for 循环应该使用移位寄存器处理函数，保持输出的总和。我的问题在于矩阵 xk 的输出。矩阵只有一个输出，或者由于没有 indexig，每个输出都会覆盖最后一个输出。试图将矩阵放在 for 循环中会导致移位寄存器和矩阵之间出现错误：

```
You have connected two terminals of different types. 
The source is a double and the sink is a 1D array of double 
```

有人知道我如何将输出索引到数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:23:34.670

我相信这应该有效。请检查数学。

![在此处输入图像描述](https://i.stack.imgur.com/atlW5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:34:41.797

内部 for 循环将运行 8 次，或者数组 xn 中有许多元素。LabVIEW使用较小的数字来确定迭代次数。因此，如果 xn 为空，则 for 循环根本不会运行。如果是 20，for 循环将运行 8 次。

无论如何，外部循环总是运行 8 次，所以 xk 总共有 8 个元素。

此外，在 for 或 while 循环开始时未初始化值的移位寄存器可能会导致问题，除非您打算这样做。第一次运行后存储在移位寄存器中的值可能在第二次运行时出现问题。

# ios - GPUImage大PNG文件

> ID：15925843
> 
> 赞同：0
> 
> 时间：2013-04-10T12:28:56.783
> 
> 标签：ios, gpuimage

我可以使用 capturePhotoAsPNGProcessedUpToFilter 使用裁剪过滤器（以 8x10 的比例，大小为 2420x1936 像素 = 4.68 兆字节）在带有 GPUImage 的 iPad Retina 显示器上捕获静止图像。生成的 PNG 为 10mb，几乎是未压缩图像大小的两倍。

是否有我缺少用于 PNG 处理的设置？是否有另一种方法可以在捕获过程中减小 PNG 文件的大小？

这么大的文件确实会减慢下游的速度。

感谢您的任何建议或帮助！

# c# - 如何在 C# 中每隔几秒调用一次特定方法？

> ID：15925844
> 
> 赞同：8
> 
> 时间：2013-04-10T12:28:57.433
> 
> 标签：c#, timer, facebook-c#-sdk

《机器人游戏》是我开发的第一款基础游戏。洋红色'#'角色是一个敌人，它应该在这张地图中随机移动，但它的随机移动太快了，我尝试使用线程，但它会影响所有角色的速度。现在，我需要每 100 毫秒调用一次“敌人”方法。

机器人游戏图片： ![在此处输入图像描述](https://i.stack.imgur.com/jfk4W.jpg)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T12:31:56.603

您可以使用[System.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)。但是，请注意，这些计时器可能不像您希望的那样准确。在 Windows 等非实时操作系统上，您永远不会轻易获得完全准确的计时器，但如果您想要更好的计时器准确性，[多媒体计时器](http://www.codeproject.com/Articles/5501/The-Multimedia-Timer-for-the-NET-Framework)可能会有所帮助。

来自 MSDN 的 System.Timer 示例：

```
public class Timer1
{
    private static System.Timers.Timer aTimer;

    public static void Main()
    {
        // Normally, the timer is declared at the class level, 
        // so that it stays in scope as long as it is needed. 
        // If the timer is declared in a long-running method,   
        // KeepAlive must be used to prevent the JIT compiler  
        // from allowing aggressive garbage collection to occur  
        // before the method ends. You can experiment with this 
        // by commenting out the class-level declaration and  
        // uncommenting the declaration below; then uncomment 
        // the GC.KeepAlive(aTimer) at the end of the method. 
        //System.Timers.Timer aTimer; 

        // Create a timer with a ten second interval.
        aTimer = new System.Timers.Timer(10000);

        // Hook up the Elapsed event for the timer.
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

        // Set the Interval to 2 seconds (2000 milliseconds).
        aTimer.Interval = 2000;
        aTimer.Enabled = true;

        Console.WriteLine("Press the Enter key to exit the program.");
        Console.ReadLine();

        // If the timer is declared in a long-running method, use 
        // KeepAlive to prevent garbage collection from occurring 
        // before the method ends. 
        //GC.KeepAlive(aTimer);
    }

    // Specify what you want to happen when the Elapsed event is  
    // raised. 
    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime);
    }
} 
```

# c# - How to immediately remove cookies from browser

> ID：15925849
> 
> 赞同：0
> 
> 时间：2013-04-10T12:29:09.043
> 
> 标签：c#, asp.net, cookies

I am using cookies for my website. I need to remove cookies immediately from browser for that i use this Code in C#

## Code for removal of cookie

```
Response.Cookies["OptDepth"].Expires = DateTime.Now.AddYears(-30); 
```

after execution of this code if i use this code

## Code to check value of deleted cookie

```
Request.Cookies["OptDepth"].value; 
```

then it gives me the value of specified cookie. I need to remove cookies immediately from browser. How can i do this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:56:11.467

如果我们用 null 更改该 cookie 的名称，那么它就可以工作。

## 代码

```
Request.Cookies["OptDepth"].Name = null; 
```

现在问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:49:59.807

使用简单代码将 cookie 替换为过期日期：

```
if (Request.Cookies["OptDepth"] != null)
{
    HttpCookie myCookie = new HttpCookie("OptDepth");
    myCookie.Expires = DateTime.Now.AddDays(-1d);
    Response.Cookies.Add(myCookie);
} 
```

这是一个 msdn 详细链接。[饼干](http://msdn.microsoft.com/en-us/library/ms178195%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:51:43.877

添加 cookie 时；

```
HttpCookie cookie = new HttpCookie("try");

                cookie.Values["foo"] = "foo";
                DateTime date = DateTime.Now.AddSeconds(-30);
                cookie.Expires = date;
                Response.Cookies.Add(cookie); 
```

读取 cookie 时；

```
HttpCookie cookie = Request.Cookies["try"]; 
```

您将看到 cookie 为空。

# java - 将捏合和缩放应用于每个页面 android 应用程序

> ID：15925854
> 
> 赞同：0
> 
> 时间：2013-04-10T12:29:22.190
> 
> 标签：java, android, eclipse, android-layout, android-intent

大家好，我有一个供老年人使用的安卓医疗应用程序。问题是当他们使用应用程序时，他们很难看到打印。所以我希望将捏合和缩放技术应用于整个应用程序，以便可以放大查看的每个页面以使字体更清晰。谁能指出我正确的方向。我查看了捏合和缩放示例，甚至下载了一些，但它们专门针对图像。我希望每个页面上的内容仍然以它们的方式运行。即按钮等。但我希望每个页面都允许其用户放大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:52:06.520

整个“捏和缩放”的东西并不是真的那么有用，因为它需要使用非常高的 API 我认为你应该废弃它并尝试使用与`SeekBar`文本大小相关的东西，这更容易，而且我已经设法从非常低的 API 级别很容易地在我的应用程序中实现。您可以查看我的应用程序快照的此图像。

[https://lh4.ggpht.com/9LDEkoV-QotFPHEa9SDpIHZ1OtgMgSDFdcrTsR1DZuBjpwonlAmREhhJQc3znVQ_LEo](https://lh4.ggpht.com/9LDEkOV-QotFPHEa9SDpIHZ1OtgMgSDFdcrTsR1DZuBjpwonlAmREhhJQc3znVQ_LEo)

如果您想要一些代码，如果您愿意，我可以发布它

# php - 加载内容时首先显示 iframe

> ID：15925857
> 
> 赞同：0
> 
> 时间：2013-04-10T12:29:33.093
> 
> 标签：php, javascript, jquery, html, ajax

我有个问题。我不知道如何使用 jQuery 或 Ajax 加载 iframe，以及当内容加载到 iframe 中时，然后将其输出到页面。

问题是，我正在我的网站上加载一个外部页面，有时外部页面很慢或无法加载。如果发生这种情况，我不希望浏览器继续尝试在我的网站上加载 iframe，并且我不想要大的空白区域。

因此，我需要在 iframe 中加载外部页面，而无需加载浏览器，并且首先在加载内容时或如果加载内容，则 iframe 会显示在网站上。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:33:43.853

尝试使用“加载”之类的

```
$('#my_iframe').on('load', function(){
    $(this).show(); 
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:37:33.260

将 iframe 放入页面中：

```
<div id="theIframeContainer" style="display:none">
  <iframe src="theSite"></iframe>
<div> 
```

然后，jQuery代码

```
$(function() {
  $("#theIframeContainer").show();
} 
```

# caching - Symfony2 ESI 缓存 + 最后修改

> ID：15925859
> 
> 赞同：0
> 
> 时间：2013-04-10T12:29:45.953
> 
> 标签：caching, symfony, esi

我正在一个 symfony2 网站上工作，我需要缓存几个页面，但有些部分必须保持未缓存（如用户菜单等）。我检查了文档，ESI 似乎正是为此而构建的。

我开始在我的项目中为我的博客文章页面实现缓存。我按照 Symfony2 文档中的建议使用 last modified 和 Etag 设置缓存验证。

我所有页面的标题中都有一个用户菜单。它使用 ESI 渲染，我确保它不会缓存。据我所见，它不起作用。我的整个博客文章页面每次都被完全缓存，连同用户菜单。它保存在浏览器缓存中，并且仅在我实际更新博客文章时才更新（这是正确的）。

这是我的博客文章控制器代码：

```
public function showAction($slug)
{
$response = new Response();
$response->setETag(md5($response->getContent()));
$date = $article->getModifiedAt();
$response->setLastModified($date);
$response->setPublic();
$response->headers->addCacheControlDirective('must-revalidate', true);
// Check that the Response is not modified for the given Request
if ($response->isNotModified($this->getRequest())) {
    // return the 304 Response immediately
        return $response;
    } else {
    //do stuff
    return  $this->render('NewsBundle:News:show.html.twig', array(
            'article' => $article,
        ),$response); 
} 
```

我的用户菜单控制器：

```
public function userMenuAction()
{
$response = new Response();
$response->setSharedMaxAge(0);

return $this->render('MainBundle:Views:userMenu.html.twig', array(
             'user' => $user,
      ),$response);
} 
```

我的 ESI 路由

```
ESI_userMenu:
pattern:  user-menu
defaults: { _locale: en, _controller: MainBundle:Default:userMenu } 
```

ESI 渲染：

```
{% render url('ESI_userMenu') with {}, {'standalone': true} %} 
```

当我加载我的博客文章页面时，我注意到用户菜单也被缓存了。我进行了更多测试，发现如果我不使用“isNotModified”，而是设置一个过期时间，ESI 确实可以工作。

有什么方法可以让 ESI 使用我在博客文章中使用的“isNotModified”结构？

谢谢

编辑：

ESI 似乎不适用于验证缓存...

请参阅此处： [使用 Symfony2 为什么会忽略缓存响应中的 ESI 标记？](https://stackoverflow.com/questions/15163121/with-symfony2-why-are-esi-tags-inside-cached-responses-ignored/15939573#15939573)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T09:23:55.953

ESI 似乎不适用于验证缓存，但只能用于过期缓存。注意我是在2.0.23中测试的，也许以后的版本解决了这个问题。

[为什么使用 Symfony2 缓存响应中的 ESI 标签会被忽略？](https://stackoverflow.com/questions/15163121/with-symfony2-why-are-esi-tags-inside-cached-responses-ignored/15939573#15939573)

# hadoop - 运行 Pig 作业时，加载 Snappy 本机库后显示延迟

> ID：15925863
> 
> 赞同：1
> 
> 时间：2013-04-10T12:29:53.373
> 
> 标签：hadoop

在下面的日志中，您将看到加载 Snappy 本机库后，大约需要 20 分钟才能继续。

谁能告诉我问题和解决方案？
是不是因为网络问题？

```
2013-04-09 06:29:42,639 INFO org.apache.hadoop.metrics.jvm.JvmMetrics: Initializing JVM Metrics with processName=MAP, sessionId=
2013-04-09 06:29:43,947 INFO org.apache.hadoop.mapred.MapTask: io.sort.mb = 1024
2013-04-09 06:29:44,434 INFO org.apache.hadoop.mapred.MapTask: data buffer = 816043776/1020054736
2013-04-09 06:29:44,435 INFO org.apache.hadoop.mapred.MapTask: record buffer = 2684354/3355443
2013-04-09 06:29:44,448 WARN org.apache.hadoop.io.compress.snappy.LoadSnappy: Snappy native library is available
2013-04-09 06:29:44,448 INFO org.apache.hadoop.io.compress.snappy.LoadSnappy: Snappy native library loaded
2013-04-09 06:48:29,783 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: record full = true
2013-04-09 06:48:29,783 INFO org.apache.hadoop.mapred.MapTask: bufstart = 0; bufend = 423372603; bufvoid = 1020054736
2013-04-09 06:48:29,783 INFO org.apache.hadoop.mapred.MapTask: kvstart = 0; kvend = 2684354; length = 3355443
2013-04-09 06:49:32,969 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new compressor 
```

# symfony - 使用 facebook 登录后返回索引页面导致 DBALException

> ID：15925864
> 
> 赞同：1
> 
> 时间：2013-04-10T12:30:03.667
> 
> 标签：symfony, doctrine-orm, fosuserbundle, sonata-user-bundle

我正在尝试集成`FOSUserBundle`.`SonataUserBundle`和捆绑包，`HWIOauth`我*已将*.`SonataUserBundle`*`FOSUserBundle`*

 *使用[本指南](https://gist.github.com/danvbe/4476697 "本指南")作为基础，我设法设置了 OAuth 集成：在使用 facebook 帐户进行身份验证后成功创建了一个用户。

身份验证后，用户会自动重定向到我的索引页面，之后会立即抛出 DBALException

```
DEBUG - Read SecurityContext from the session 
DEBUG - Reloading user from user provider. 
```

`WHERE`由于子句中的表引用无效：

```
An exception occurred while executing 'SELECT t1.username AS username2, [more t1 references] FROM fos_user t1 WHERE t0.id = ? LIMIT 1' with params {"1":1}:
SQLSTATE[42S22]: Column not found: 1054 Unknown column 't0.id' in 'where clause' 
```

我了解`t0`引用无效，因为它未包含在`FROM`子句中，但**不知道**为什么引用它`t0.id`而不是`t1.id`

* * *

（希望）相关代码
如果我理解正确，我的用户实体扩展了`Sonata`用户实体，而后者又扩展了`FOS`用户实体？

**应用程序\奏鸣曲\用户捆绑\实体\用户.php**

```
<?php

/**
 * This file is part of the <name> project.
 *
 * (c) <yourname> <youremail>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

namespace Application\Sonata\UserBundle\Entity;

use Sonata\UserBundle\Entity\BaseUser as BaseUser;

/**
 * This file has been generated by the Sonata EasyExtends bundle ( http://sonata-project.org/bundles/easy-extends )
 *
 * References :
 *   working with object : http://www.doctrine-project.org/projects/orm/2.0/docs/reference/working-with-objects/en
 *
 * @author <yourname> <youremail>
 */
class User extends BaseUser
{
    /**
     * @var integer $id
     */
    protected $id;

    /**
     * Get id
     *
     * @return integer $id
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

**站点\SiteBundle\Entity\User.php**

```
<?php
namespace Sites\SiteBundle\Entity;

use Application\Sonata\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /** @ORM\Column(name="facebook_id", type="string", length=255, nullable=true) */
    private $facebook_id;

    /** @ORM\Column(name="facebook_access_token", type="string", length=255, nullable=true) */
    private $facebook_access_token;

    /** @ORM\Column(name="google_id", type="string", length=255, nullable=true) */
    private $google_id;

    /** @ORM\Column(name="google_access_token", type="string", length=255, nullable=true) */
    private $google_access_token;

    public function __construct()
    {
        parent::__construct();
        // your code here
    } 
```

**config.yml**的相关部分

 **```
fos_user:
    db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
    firewall_name: main
    user_class: Sites\SiteBundle\Entity\User
sonata_user:
    security_acl: false # was true
    manager_type: orm
    class:
        user:         Sites\SiteBundle\Entity\User 
```***

# jakarta-ee - 在 Java Web 应用程序中集成条码扫描器

> ID：15925865
> 
> 赞同：1
> 
> 时间：2013-04-10T12:30:05.530
> 
> 标签：jakarta-ee

我们有一个 Java Web 应用程序，我们需要在其中扫描图书的条形码并检索图书的 ISBN 号。是否有任何开源插件或库可用于集成到我的应用程序中，从而扫描条形码。任何想法都会非常可观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:55:17.687

当您正确安装条形码扫描仪并扫描代码时，它通常会充当键盘（键盘楔）。因此，您只需要一个输入字段来捕获代码。扫描仪将在最后发送一个“输入”，因此可以自动提交表单。

# qt - OpenGL ARB_framebuffer_object 扩展不可用

> ID：15925866
> 
> 赞同：1
> 
> 时间：2013-04-10T12:30:07.610
> 
> 标签：qt, opengl, 3d

我有一个处理一些 DSL 并绘制页面的应用程序。该应用程序是基于 qt 的。我需要使用 DSL 而不是 QT。处理该 DSL 时，应用程序会引发以下错误

```
OpenGL ARB_framebuffer_object extension is not available 
```

我的笔记本电脑比较旧。我正在运行 Windows Vista，我的 gfx 卡是 ATI Radeon HD 3200 Graphics。我尝试为 Vista 安装`ATI Radeon HD 4850 X2 Catalyst Driver 9.1 WHQL Vista`和`Hydravision`打包，但没有帮助。

有人可以告诉我是否可以解决笔记本电脑上的问题以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:36:28.167

错误消息非常简单：您的硬件不支持所需的扩展。

[众所周知，软件开发人员讨厌硬件问题 :)]

# ios - 转换层上的 UIGestureRecognizer

> ID：15925867
> 
> 赞同：3
> 
> 时间：2013-04-10T12:30:12.827
> 
> 标签：ios, uigesturerecognizer, cabasicanimation

我正在开发 iPhone 应用程序，但手势识别器有问题。

我在视图上添加了一个 UITapGestureRecognizer，然后我使用 CABasicAnimation 转换与该视图相关的图层。经过这个变换后，手势识别器只在变换前的视图占据的区域内工作。

希望我的问题的这个小描述是可以理解的..

这是一些代码：

```
UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myViewTapped:)];
[self.myView addGestureRecognizer:tapGestureRecognizer];

CABasicAnimation * animation = [CABasicAnimation animationWithKeyPath:@"position.y"];
[animation setFromValue:[NSNumber numberWithFloat:0]];
[animation setToValue:[NSNumber numberWithFloat: - 100]];
[animation setDuration:.3];
[animation setTimingFunction:[CAMediaTimingFunction functionWithControlPoints:.55 :-0.25 :.30 :1.4]];
animation.additive = YES;
animation.removedOnCompletion = NO;
animation.fillMode = kCAFillModeForwards;
[self.myView.layer addAnimation:animation forKey:nil]; 
```

我该如何处理这个问题？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:50:01.333

您只动画视图的图形部分（CALayer），而不是负责用户交互的部分（UIView 本身）。您的代码移动图层并使其在其他地方被淹没，但不要更改框架（或边界+中心）。

你有 3 个选项（也许更多，只是我能想到这 3 个）：

1) 使用基于 UIView 的动画`[UIView animation...]`

2）用你的代码构建结构，但在动画发生后重新定位视图（但这可能会引起问题，因为你的图层也会被移动）。

3）使用您的动画，但将手势识别器放在父（更大）视图上，然后检查那里的事件......

# ruby-on-rails - 耙顺序任务

> ID：15925874
> 
> 赞同：0
> 
> 时间：2013-04-10T12:30:20.903
> 
> 标签：ruby-on-rails, rake

我遇到了一个非常奇怪的问题。我有一个重置我的数据库的任务：

```
task :reset => [:drop, :create, :migrate, :seed] 
```

问题是，我在播种时收到错误，因为缺少在后期迁移文件中添加的列。一个例子：

```
undefined method new_attr= for User 
```

然而，此属性已在迁移中添加。奇怪的是，如果我单独运行上述任务，我不会收到**任何错误。**任何人都可以解释一下吗？当然，这些任务不能异步运行。

避免错误的另一种方法是使用新属性修改我之前的迁移 create_。然后运行 ​​:reset 不会触发这些属性的错误。

迁移显然很好，因为我可以单独运行上述任务，而不是捆绑在单个任务下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:24:43.927

可能你的问题已经用这个解决了：

```
rake db:reset 
```

rake db:reset 任务将删除数据库，重新创建它并将当前模式加载到其中。

您是否尝试过命名空间？

> 任务：reset => [db:drop, db:create, db:migrate, db:seed]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:53:47.693

也许你想让你的重置任务更明确？

```
namespace :db_tasks do
  desc "Rebuild development db"
  task :rebuild_database, [] => :environment do
    raise "Only run in development or staging" if Rails.env.production?

    Rake::Task['db:drop'].execute
    Rake::Task['db:create'].execute
    Rake::Task['db:migrate'].execute
    Rake::Task['db:seed'].execute
    Rake::Task['db:test:prepare'].execute
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T09:49:58.770

如果这些 rake 任务在生产模式下执行，模型属性会被缓存。即使迁移工作完美，它也不适用于缓存。这将破坏您的后续种子，因为缓存中将缺少新添加的列。一种可能的解决方案是在播种之前重新加载您的 Rails 环境。

# javascript - jQuery 不适用于 Internet Explorer 8

> ID：15925883
> 
> 赞同：-1
> 
> 时间：2013-04-10T12:30:40.283
> 
> 标签：javascript, jquery, internet-explorer-8

我在网上找到了一个时钟插件，但它不适用于 IE8。为什么？

代码：http: [//solutionsbr.uphero.com/projeto/](http://solutionsbr.uphero.com/projeto/)

***JavaScript 代码***

```
 $(function() {                                         

            if ($("#sec").length > 0) {
                setInterval(function() {
                    var seconds = new Date().getSeconds();
                    var sdegree = seconds * 6;
                    var srotate = "rotate(" + sdegree + "deg)";
                    $("#sec").css("transform", srotate);

                }, 1000);
            }

            if ($("#hour").length > 0) {
                setInterval(function() {
                    var hours = new Date().getHours();
                    var mins = new Date().getMinutes();
                    var hdegree = hours * 30 + (mins / 2);
                    var hrotate = "rotate(" + hdegree + "deg)";
                    $("#hour").css("transform", hrotate);

                }, 1000);
            }

            if ($("#min").length > 0) {
                setInterval(function() {
                    var mins = new Date().getMinutes();
                    var mdegree = mins * 6;
                    var mrotate = "rotate(" + mdegree + "deg)";
                    $("#min").css("transform", mrotate);
                }, 1000);
            }
        }); 
```

***解决方案***

使用另一个WebBrowser，IE8的rotate属性很烂。如果有人需要更多信息，请查看此处[Internet Explorer 8 Rotate](http://coding.smashingmagazine.com/2010/04/28/css3-solutions-for-internet-explorer/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:38:09.403

似乎对 9 以下的 IE 版本不支持的变换 css 属性使用旋转值

# c# - XXX.exe 中发生了“System.ExecutionEngineException”类型的未处理异常

> ID：15925884
> 
> 赞同：3
> 
> 时间：2013-04-10T12:30:40.393
> 
> 标签：c#, c++, dll, unhandled-exception, executionengineexception

我有一个用 C++ 编写的 DLL 文件。我尝试在我的 c# 代码中使用 C++ DLL。C++ 方法被正确调用，但它在处理完成后给出错误。

**异常详情：**

> 已完成.System.ExecutionEngineException 未处理 消息=抛出“System.ExecutionEngineException”类型的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T15:14:12.590

这段代码我遇到了同样的问题：

```
 [DllImport("camapi.dll", CharSet = CharSet.Unicode)]
private static extern CSTATUS_T CWRAPPER_GetFriendlyName(IntPtr pCameraBus, string sCamID, out StringBuilder sFriendlyName, 
                                                         uint uBufferSizeInWords);

public static string CWRAPPER_GetFriendlyName(IntPtr pCameraBus, string sCamID)
{
    var sFriendlyName = new StringBuilder(256);
    var status = CWRAPPER_GetFriendlyName(pCameraBus, sCamID, out sFriendlyName, (uint)s.Capacity + 1);
    return (status == CSTATUS_T.CSTATUS_SUCCESS) ? sFriendlyName.ToString() : "";
} 
```

问题是“out”关键字。MSDN 上的示例没有“输出”。

希望对某人有所帮助......西蒙

# c# - C#：VS 2008 调试器执行属性代码

> ID：15925886
> 
> 赞同：5
> 
> 时间：2013-04-10T12:30:40.367
> 
> 标签：c#, debugging, visual-studio-2008

我有以下两行代码：

```
lstvbWerteC.Clear ();
if (...) 
```

lstvbWerteC 是具有类范围的 List<T> 的字段。如果在 VS 2008 调试器中我在 if 语句上设置断点，我希望 lstvbWerteC.Count 为 0，但实际上它为 1。我的类有一些确实填满了列表的属性。为了防止调试器中的副作用，所有属性都具有属性`[DebuggerBrowsable (DebuggerBrowsableState.Never)]`。然而，只要本地窗口可见，调试器似乎就会执行填充列表的代码。在本地窗口隐藏的情况下，列表在到达 if 断点时始终为空。任何有关此类问题的调试器详细信息的信息将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:41:03.463

Visual Studio 菜单：工具 - 选项 - 调试 - 常规。取消选中“启用属性评估”选项。

这是来自 Visual Studio 2010。V​​isual Studio 2008 应该有相同的选项或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:46:14.243

我想您描述的行为在大多数文档中都是未定义的。当然，没有任何调试器（包括 VS！）应该尊重该属性的*要求。*`DebuggerBrowsable`此外，在调试窗口中不*显示*项目并不一定保证调试器不会*评估*该项目。

在调试选项下有一个名为“启用属性评估”的选项可能会或可能不会帮助您的特定情况，但总的来说我会说您不能依赖它。

有一条经常被重复的建议：“财产获取者不应该有[可见的]副作用。” 您的属性 getter*确实*有副作用，这会导致您的调试体验出现问题，但它也可能使您的类作为一个整体对其他开发人员来说不太容易理解。我的建议是考虑重新设计，以便获取属性值不会改变列表的内容。

# java - 用 Java 编写简单的 RTF 文件

> ID：15925888
> 
> 赞同：0
> 
> 时间：2013-04-10T12:30:46.390
> 
> 标签：java, swing, file-io, rtf, jeditorpane

我正在使用 Java 6、Windows XP、Eclipce Java EE IDE Juno、Swing。我正在寻找最简单的解决方案而不添加任何新库。为了描述我的问题，我将首先描述我的目标。

我的想法是按以下格式打印：

* * *

## 标题

**副标题**

东西 东西 东西 东西 东西 东西

* * *

我想通过使用 RTF 文件格式来实现这个目标。我得出的结论是，我可能应该使用 JEditorPane 以及如何将逐行格式化的文本添加到编辑器中。完成后，我想将 JEditorPane 写入文件并保存。

所以，就这么说了。这里有一些问号，我似乎不明白。

我可以使用什么“标准”类来创建 RTF 格式的字符串行？JEdi​​torPane 是 RTF 文档的最佳容器吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:39:17.297

该文档包含您需要的一切。( [http://goo.gl/EJSpx](http://goo.gl/EJSpx) )

*   通过调用 createEditorKitForContentType 创建 javax.swing.text.rtf.RTFEditorKit
*   通过调用 registerEditorKitForContentType 将新创建的编辑器工具包添加到 JEditorPane（注意对 RTF 的支持是有限的）

希望这能让你走上正确的道路。

也看到这个线程[谁能推荐一个Java富文本编辑器？](https://stackoverflow.com/questions/196980/can-anyone-recommend-a-java-rich-text-editor)

# c# - C# Decimal Division (Extremely strange behavior)

> ID：15925893
> 
> 赞同：0
> 
> 时间：2013-04-10T12:30:48.963
> 
> 标签：c#, decimal, division

Can anyone explain this?

```
Decimal leftSide = 13.0M;
Decimal rightSide = 1.0M;
Decimal tmpDec = 39.0M;

tmpDec * (rightSide / leftSide) = 2.9999999999999999999999999991

tmpDec * rightSide / leftSide = 3 
```

Am I losing significant digits on the first's (rightSide / leftSide)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:37:25.667

Decimal 类型仅精确到 29 位有效数字。

`2.9999999999999999999999999991`

^ 有超过 29 位有效数字。

如果您需要更高的精度，您可以使用[System.Numerics.BigInteger](http://msdn.microsoft.com/en-gb/library/system.numerics.biginteger.aspx)（将其修改为定点小数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:32:33.460

这是四舍五入（失去精度）的问题。

第一种情况首先执行除法并裁剪最后一位数字（小数点后第 28 位之后，因为浮点数（或双精度或小数或任何其他固定精度数据类型）无法存储无限长值），然后执行裁剪值的乘法，增加了3900万倍的损失。这已经变得很重要（现在不是第 28 位问题，坚果 20-22）并且不能四舍五入到 3.0。

第二种情况首先执行不丢失精度的乘法并存储每 8 位，然后执行精度较低的除法（小数点后 6 位）。所以四舍五入已经四舍五入到 3.0 而不是 2.999999999999999999999 就像第一种情况一样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T12:37:31.003

将无限多个实数压缩为有限位数需要近似表示。尽管整数有无限多，但在大多数程序中，整数计算的结果可以存储在 32 位中。相反，给定任何固定位数，大多数实数计算将产生无法使用那么多位精确表示的量。因此，浮点计算的结果必须经常四舍五入以适应其有限表示。这种舍入误差是浮点计算的特征

# xml - WPF：xmldataprovider访问数据库

> ID：15925895
> 
> 赞同：1
> 
> 时间：2013-04-10T12:30:50.933
> 
> 标签：xml, database, vb.net, ms-access, data-binding

是否可以在这里绑定我的访问数据库？

```
<XmlDataProvider x:Key="DeviceListData" XPath="Root">
        <x:XData>
            <Root xmlns="">

                <Entry Name="{Binding}" Image="{Binding}" />     
            </Root>
        </x:XData>
    </XmlDataProvider> 
```

如果是。如何？我曾经使用 ItemSource 进行控件，但在这里，我不知道如何。请帮我。谢谢。

# javascript - Why 0010 in javascript is equal to 8?

> ID：15925896
> 
> 赞同：5
> 
> 时间：2013-04-10T12:30:52.663
> 
> 标签：javascript, google-chrome

i wrote from 001 to 0010 and much more digit like this that started with "00" in chrome console and Fire Fox even in IE and get this result.

![](https://i.stack.imgur.com/ynyqB.png)

why 0010 is not equal to 10 ? or why 0020 is not equal to 20 ? and it is "16".

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:32:48.850

前导零表示应将数字解释为八进制。

因此`10`解释为八进制等于`8`十进制。

有关更多信息，请参阅[关于数字文字的 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Integers)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T12:34:26.163

“如果数字常量前面有零，则将其视为八进制，如果前面有零和 x (0x)，则将其视为十六进制。” （如此[处](http://www.hunlock.com/blogs/The_Complete_Javascript_Number_Reference)所述）

008 不被视为八进制，因为它包含不是八进制数的“8”。0010 实际上是一个八进制数，等于 8。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T12:34:25.473

Javascript 中的数字文字可以以不同的基数输入 -

前导零表示该数字是八进制基数（仅数字 0-7），因此 010 等于：一次 8 + 零

文字 0x10 是十六进制（以 16 为底），因此等于：一乘以 16 + 零）= 16

见这里[https://developer.mozilla.org/en/docs/JavaScript/Guide/Values,_variables,_and_literals](https://developer.mozilla.org/en/docs/JavaScript/Guide/Values,_variables,_and_literals)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-10T12:35:13.823

因为前导 0 代表[八进制](http://en.wikipedia.org/wiki/Octal)数系统。同样，如果您输入了 0x010，它将等于 16，因为 0x 是[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)数字系统的前缀。

# caching - TYPO3: Calculate Cache identifier hash value?

> ID：15925900
> 
> 赞同：1
> 
> 时间：2013-04-10T12:30:56.850
> 
> 标签：caching, typo3, typo3-4.5

In TYPO3 I want to remove a single page from the cache table with some GET values. I haven't found an extension, that will handle that or a TYPO3 method.

1.  Is there a function, that I can hand over a URL or similar, that produces the cache hash identifier or removes the specific data from the caching tables?
2.  If not, does anybody know, what the algorithm is, that calculates the hash identifier or in which file I might find it?

So any help will be appreciated.

My TYPO3 version: 4.5.x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T14:34:50.960

It's like this:

You need a proper TSFE object `$GLOBALS['TSFE']`
then you need the encryption key from the localconf `$TYPO3_CONF_VARS['SYS']['encryptionKey']` and the URL parameters e.g. `tx_ttnews[tt_news]

then these steps

1.  create an (sorted) array with the encryption key and the url parameters
2.  Hand over this array to the property cHash_array of the TSFE object
3.  Get the cHash value from the TSFE's getHash method

* * *

```
$arr = array(
    'encryptionKey' => $TYPO3_CONF_VARS['SYS']['encryptionKey'],
    'tx_ttnews[tt_news]' => $newsid,
    // ...
)
ksort($array);
$GLOBALS['TSFE']->cHash_array = $array;
$chash = $GLOBALS['TSFE']->getHash(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:53:42.160

您可以创建一个清除指定页面缓存的函数，需要以下代码：

TYPO3 6.0

```
public function clearCache($cacheCmd) {
    /** @var $tce \TYPO3\CMS\Core\DataHandling\DataHandler */
    $tce = \TYPO3\CMS\Core\Utility\GeneralUtility::makeInstance("TYPO3\\CMS\\Core\\DataHandling\\DataHandler");
    $tce->stripslashes_values = 0;
    $tce->start(array(), array());

    switch($cacheCmd) {
        case 'pages':
        case 'all':
            $tce->admin = 1;
    }

    $tce->clear_cacheCmd($cacheCmd);
    unset($tce);
} 
```

TYPO3 4.x

```
public function clearCache($cacheCmd) {
    /** @var $tce t3lib_TCEmain */
    $tce = t3lib_div::makeInstance("t3lib_TCEmain");
    $tce->stripslashes_values = 0;
    $tce->start(array(), array());

    switch($cacheCmd) {
        case 'pages':
        case 'all':
            $tce->admin = 1;
    }

    $tce->clear_cacheCmd($cacheCmd);
    unset($tce);
} 
```

并且`$cacheCmd`可以具有以下值： `/typo3/sysext/core/Classes/DataHandling/DataHandler.php:clear_cacheCmd`(> 6.0) 或`/t3lib/class.t3lib_tcemain.php`(4.x)

```
/**
 * Clears the cache based on the command $cacheCmd.
 *
 * $cacheCmd='pages':   Clears cache for all pages. Requires admin-flag to
 * be set for BE_USER.
 *
 * $cacheCmd='all':     Clears all cache_tables. This is necessary if
 * templates are updated. Requires admin-flag to be set for BE_USER.
 *
 * $cacheCmd=[integer]: Clears cache for the page pointed to by $cacheCmd
 * (an integer).
 *
 * $cacheCmd='cacheTag:[string]':  Flush page and pagesection cache by given tag
 *
 * $cacheCmd='cacheId:[string]':  Removes cache identifier from page and page section cache
 *
 * Can call a list of post processing functions as defined in
 * $GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['t3lib/class.t3lib_tcemain.php']['clearCachePostProc']
 * (numeric array with values being the function references, called by
 * \TYPO3\CMS\Core\Utility\GeneralUtility::callUserFunction()).
 *
 * Note: The following cache_* are intentionally not cleared by
 * $cacheCmd='all':
 *
 * - cache_md5params:   RDCT redirects.
 * - cache_imagesizes:  Clearing this table would cause a lot of unneeded
 * Imagemagick calls because the size informations have
 * to be fetched again after clearing.
 *
 * @param string $cacheCmd The cache command, see above description
 * @return void
 */ 
```

如果在打字稿中设置了给定的参数，或者您自己创建一个简单的扩展，请使用 userFunc 调用它。

# django - get and set the values at the same time django

> ID：15925906
> 
> 赞同：0
> 
> 时间：2013-04-10T12:31:10.800
> 
> 标签：django, django-views

How can i do both these things at the same time(same instance)?

```
entity = payment_detail( payment_status='Paid', payment_date=datetime.datetime.now())
a=payment_detail.objects.get(job_post_id=num) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:52:13.003

你是这个意思吗？

```
a=payment_detail.objects.get(job_post_id=num)
a.payment_status = 'Paid'
a.payment_date = datetime.datetime.now()
a.save() 
```

# postgresql - How to remove postgres database from heroku

> ID：15925908
> 
> 赞同：8
> 
> 时间：2013-04-10T12:31:15.383
> 
> 标签：postgresql, heroku

How to remove postgres database from heroku, which was created using the dev free plan. [https://postgres.heroku.com/databases](https://postgres.heroku.com/databases)

I tried using **heroku addons:remove --confirm --app salty-river-24** but it says app not found. Is this the correct syntax.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:59:24.773

如果您使用 postgres.heroku.com 上的 Web UI 创建了数据库，则需要从[https://postgres.heroku.com/databases](https://postgres.heroku.com/databases)导航到它，然后单击右侧的齿轮图标。应该有一个**破坏**链接。如果您没有看到破坏链接，那么您可能不是所有者并且缺乏权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:08:51.033

看起来您缺少附加组件的名称。例子：

```
$ heroku addons:remove heroku-postgresql:dev --app salty-river-24 
```

用于`heroku addons --help`查看帮助或`heroku addons`列出您的应用程序的附加组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-04T04:42:00.583

首先，通过运行检查您拥有的所有插件：

```
$ heroku addons 
```

这列出了所有可用的插件（详细名称、计划、价格和状态）。在这里，请注意插件旁边提供的详细信息。例如，您可能会看到如下内容：

`heroku-postgresql (postgresql-cubic-88094) hobby-dev free created └─ as DATABASE`

要删除此特定插件，请运行：

```
$ heroku addons:destroy postgresql-asymmetrical-03894 
```

`postgresql-cubic-88094`在列出的插件中的括号中。

您将被要求输入您的应用程序的名称或使用重新运行命令`--confirm <name-of-your-app>`。这样做，插件将被删除。

通过运行确认插件已删除：

```
$ heroku addons 
```

# c++ - C++ macro and template with multiple arguments error

> ID：15925911
> 
> 赞同：1
> 
> 时间：2013-04-10T12:31:24.487
> 
> 标签：c++

I have this simple (useless) code to demonstrate the problem:

```
template<typename _Tx, typename _Ty>
struct foo{};

#define TO_STRING(Type) #Type

int main()
{
    std::string sInt = TO_STRING(int);
    std::string sfoo1 = TO_STRING(foo<int, float>); //warning and unexpected value - "foo<int"
    std::string sfoo2 = TO_STRING((foo<int, float>)); //no warning, still unexpected value "(foo<int, float>)"
} 
```

Is there a way to pass templates with multiple arguments to macros without using `()` ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:04:11.767

这可能并不理想，但我认为它几乎可以在任何编译器上工作（如果你找到一个不适合的编译器，很容易在不改变接口的情况下变笨）：

```
#define TO_STRING1(_a_) #_a_
#define TO_STRING2(_a_, ...) #_a_ ", " TO_STRING1(__VA_ARGS__)
#define TO_STRING3(_a_, ...) #_a_ ", " TO_STRING2(__VA_ARGS__)
#define TO_STRING4(_a_, ...) #_a_ ", " TO_STRING3(__VA_ARGS__) 
```

唯一的缺点是您必须自己计算逗号，例如：

```
std::string sInt = TO_STRING1(int);
std::string sfoo = TO_STRING2(foo<int, float>); 
```

# graph - 用于图形的大型数据集

> ID：15925921
> 
> 赞同：0
> 
> 时间：2013-04-10T12:31:43.587
> 
> 标签：graph, dataset

我正在研究 K 最短路径算法，我需要**节点数**在**2000 或 3000**左右的图形数据集来测试算法的运行时间。我进行了很多搜索，但找不到完全符合我要求的数据集。

谷歌搜索时，我在社交网络、维基百科等上发现了很多由数字和字符串组成的数据集。我不需要那些数据集。

我需要它们如下：

```
6
1 2 12
1 4 14
2 3 23
3 4 34
3 0 30 
4 5 45
5 0 50 
```

第一行说不。节点数，第一两列表示两个节点之间的边，第三列是该边的权重。

如果有人有这样的**数据集**，请提供，或者即使您知道任何**`datafile generator tools`**使用图表，那就太好了？

# c# - 数字角色的模拟器

> ID：15925925
> 
> 赞同：0
> 
> 时间：2013-04-10T12:31:51.807
> 
> 标签：c#, .net

我必须从指纹读取器读取数据并转换为字节数组。我没有设备来测试我的应用程序。是否有任何模拟器可以传递一些模拟数据并测试功能？

# jquery - 带有哈希链接的导航栏（jQuery 移动版）

> ID：15925931
> 
> 赞同：2
> 
> 时间：2013-04-10T12:32:02.497
> 
> 标签：jquery, jquery-mobile

如何添加带有哈希的使用链接与没有哈希的链接相同？（例如：mySubpage* *#test* *）。

我仍然想为 naviagion 使用 jQuery 移动功能，只需对链接进行哈希处理！

示例 (HTML)

```
<div data-role="navbar" data-grid="d">
    <ul>
        <li><a href="http://orf.at">Google</a>
        </li>
        <li><a href="http://google.com#test">Google with hash (not working)</a>
        </li>
    </ul>
</div> 
```

[提琴手](http://fiddle.jshell.net/mNmXf/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:33:20.247

像这样添加它：

```
 <li><a href="http://google.com#test" rel="external">Google with hash (not working)</a> 
```

基本上你需要添加**rel="external"**属性。将这个链接作为外部页面打开是 jQuery Mobile 的标志。

官方文档：**[链接页面](http://jquerymobile.com/demos/1.2.1/docs/pages/page-links.html)**

# ios - uiviewcontroller 中的 NSUnknownKeyException

> ID：15925936
> 
> 赞同：0
> 
> 时间：2013-04-10T12:32:13.913
> 
> 标签：ios, mpmovieplayercontroller

我正在尝试从我的应用程序的资源文件夹（即本地视频）播放视频文件（m4v）。但我无法播放视频。我提到了苹果的 MPMoviePlayer 示例项目。

此外，当我为我的movieplayercontroller 对象提供背景颜色时，它出现在一些黑色视图的后面，而前面的黑色视图显示某些东西正在加载几秒钟但没有加载，它只会导致黑屏。

有人可以帮我解决它。请告诉我我做错了什么。

另外，我已经截取了有问题的屏幕截图，以便你们都能理解我想说的，但我不知道如何在这里发布。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:00:40.567

```
NSString *urlString = [[NSBundle mainBundle] pathForResource:@"Movie" ofType:@"m4v"];
NSURL *urlObj = [NSURL fileURLWithPath:urlString];

UIGraphicsBeginImageContext(CGSizeMake(1,1));
MPMoviePlayerViewController *player = [[MPMoviePlayerViewController alloc] initWithContentURL:urlObj];
UIGraphicsEndImageContext();

[player.view setBounds:self.view.bounds];
// when playing from server source type shoud be MPMovieSourceTypeStreaming
[player.moviePlayer setMovieSourceType:MPMovieSourceTypeStreaming]; // I was missing this line therefore video was not playing
[player.moviePlayer setScalingMode:MPMovieScalingModeAspectFill];

[self.view addSubview:player.view];
[player.moviePlayer play]; 
```

# php - 使用javascript访问php文件中的会话变量？

> ID：15925938
> 
> 赞同：0
> 
> 时间：2013-04-10T12:32:17.117
> 
> 标签：php, javascript

我想知道是否有一种方法可以使用 java-script 访问 php 设置的变量，以便在一个页面上设置 php 变量。然后在下一页，我可以使用 java-script 来查询 PHP 文件以提取变量，以便它们可以显示在另一个页面上？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:34:52.337

不确定这是否适用于我的 get 和 post 变量

```
var mySessionVariable = "<?php echo $_SESSION['sessionVariable']; ?>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:36:57.653

你要做的唯一方法是从 PHP（或 Javascript）设置 cookie，并访问这些。你可以通过 PHP 使用 cookie`$_COOKIE['var']`和通过 Js 访问 cookie，`document.cookie("var")`

# javascript - 如何使 Google Maps V3 折线从给定点捕捉到道路？

> ID：15925947
> 
> 赞同：4
> 
> 时间：2013-04-10T12:32:42.260
> 
> 标签：javascript, google-maps, google-maps-api-3

我尝试从给定的标记点将折线捕捉到道路。我的问题是，相同的代码有时会产生好的结果，就像这张图片一样![在此处输入图像描述](https://i.stack.imgur.com/X8Jpz.jpg)

有时会产生不好的结果，例如： ![在此处输入图像描述](https://i.stack.imgur.com/02YXI.jpg)

任何想法为什么会发生这种情况？而且，折线捕捉到道路是否有限制？

我的地图ini代码：

```
var myLatlng = new google.maps.LatLng(47.6557, 23.5833);
var mapOptions = {
    zoom: 14,
    minZoom: 13,
    maxZoom: 19,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    disableDefaultUI:   true,
    overviewMapControl: false,
    streetViewControl:  false,
    scaleControl:       false,
    mapTypeControl:     false,
    panControl:         true,
    panControlOptions:{
        position: google.maps.ControlPosition.TOP_RIGHT
    },
    zoomControl: true,
    zoomControlOptions: {
        style: google.maps.ZoomControlStyle.LARGE,
        position: google.maps.ControlPosition.TOP_RIGHT
    }
}
var map = new google.maps.Map(document.getElementById("map"), mapOptions); 
```

我的折线路线捕捉代码：

```
var polys = new google.maps.Polyline({
                map: map,
                strokeColor: "#5555FF"
            });
    myCoord = [
                        new google.maps.LatLng(47.663383463156144, 23.58100461977301),
                        new google.maps.LatLng(47.659221287827435, 23.586240291770082),
                        new google.maps.LatLng(47.65534785438211, 23.576713085349184),
                        new google.maps.LatLng(47.66020405359421, 23.572249889548402)
            ]; 

    // BEGIN: Snap to road
    var service = new google.maps.DirectionsService(),polys,snap_path=[];               
    polys.setMap(map);
    placeMarker(myCoord[0], map);
    for(j=0;j<myCoord.length-1;j++){            
            service.route({origin: myCoord[j],destination: myCoord[j+1],travelMode: google.maps.DirectionsTravelMode.DRIVING},function(result, status) {                
                if(status == google.maps.DirectionsStatus.OK) {                 
                      snap_path = snap_path.concat(result.routes[0].overview_path);
                      polys.setPath(snap_path);
                }        
            });
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T14:44:20.327

如果您只想要带有航点的方向，您应该使用这些航点调用一次[方向服务，如下所示（未测试）：](https://developers.google.com/maps/documentation/javascript/reference#DirectionsService)

```
var service = new google.maps.DirectionsService();
var directionsDisplay = new google.maps.DirectionsRenderer();    
directionsDisplay.setMap(map);

var waypts = [];
for(j=1;j<myCoord.length-1;j++){            
      waypts.push({location: myCoord[j],
                   stopover: true});
}

var request = {
    origin: myCoord[0],
    destination: myCoord[myCoord.length-1],
    waypoints: waypts,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

service.route(request,function(result, status) {                
    if(status == google.maps.DirectionsStatus.OK) {                 
          directionsDisplay.setDirections(result);
    } else { alert("Directions request failed:" +status); }
}); 
```

注意：免费 API 最多有 8 个航点。

# asp.net-mvc-3 - 如何通过mvc3将浮点数转换为整数？

> ID：15925951
> 
> 赞同：1
> 
> 时间：2013-04-10T12:32:50.883
> 
> 标签：asp.net-mvc-3

如何将浮点数转换为 mvc3 中形式的整数？

```
@Html.EditorFor(model => model.CODE)
@Html.ValidationMessageFor(model => model.CODE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:42:15.510

您可以使用属性装饰`CODE`视图模型上的[`[DisplayFormat]`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.aspx)属性，该属性允许您定义浮点数在视图中显示时的格式：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:0}")]
public float CODE { get; set; } 
```

# ember.js - Ember 路由器：如何使用 transitionTo

> ID：15925953
> 
> 赞同：3
> 
> 时间：2013-04-10T12:32:55.843
> 
> 标签：ember.js, ember-router

我有一个看起来像这样的链接

```
index.html#/calendar/year/month 
```

这就是我设置路线的方式：

```
App.Router.map(function() {
    this.resource('calendar', {path: 'calendar/:currentYear/:currentMonth'});
});

App.CalendarRoute = Ember.Route.extend({
  model: function (params) {
    var obj = {
       weeks: calendar.getDaysInMonth(params.currentMonth, params.currentYear),
       currentMonth: params.currentMonth,
       currentYear: params.currentYear
    };
    return obj;
  },
  setUpController: function(controller, model) {
      controller.set('content', model);
  }
}); 
```

我可以这样做：

```
var currentMonth = this.get('content.currentMonth');
var nextMonth = parseInt(currentMonth)+1;
var route = '#/calendar/'
var year = this.get('content.currentYear');
window.location.href= route + year + '/' + nextMonth; 
```

但我想改用路由器。

我试过了：

```
var router = this.get('target');
router.transitionTo('#calendar/'+year + '/' + nextMonth); 
```

但我得到这个错误：

> 未捕获的错误：断言失败：找不到路由#calendar/2013/5

我也试过：

```
var router = this.get('target');
router.transitionTo('calendar/'+year + '/' + nextMonth); 
```

但这也给了我一个错误：

> 未捕获的错误：断言失败：找不到路由 calendar/2013/5

编辑：在上面显示我的路由

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T00:45:51.853

与我在评论中所说的相反，这实际上可以在不需要嵌套路由的情况下使用[`Route#serialize`](http://emberjs.com/api/classes/Ember.Route.html#method_serialize).

我用类似于你描述的场景制作了[**这个小提琴**](http://jsfiddle.net/schawaska/dWpS9/)（[这里是演示）：](http://jsfiddle.net/schawaska/dWpS9/show)

在应用程序中，我存储月份和年份参数

```
window.App = Ember.Application.create({
    title: 'Cool App',
    calendar: { 
        month: new Date().getMonth()+1, 
        year: new Date().getFullYear() 
    }
}); 
```

定义路线

```
App.Router.map(function() {
    this.route("home");
    this.resource('calendar', { path: 'calendar/:year/:month'});
}); 
```

在日历路由中，我添加了`serialize`将属性转换`obj`为应用程序的方法，然后我连接了第 3 方库`setupController`以获取`days`属性并设置其内容。

```
App.CalendarRoute = Em.Route.extend({
    activate: function() {
        $(document).attr('title','Events')
    },
    serialize: function(obj) {
        return {
            year: obj.year, month: obj.month
        }
    },
    setupController: function(controller, model) {
        var obj = {
            days: calendar.getDaysInMonth(model.month, model.year),
            year: model.year,
            month: model.month
        };
        controller.set('content', obj);
    }
}); 
```

在 Handlebars 中，使用`{{linkTo}}`助手，我将类中`calendar`定义的属性`App`作为参数传递：

```
{{#linkTo calendar App.calendar tagName="li"}}
    <a {{bindAttr href="view.href"}}>
        Calendar
    </a>
{{/linkTo}} 
```

这将生成一个链接到`~/#/calendar/2013/4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:51:44.930

路由器不仅仅是一个 url 管理器。它管理整个应用程序的状态。为了充分帮助您，最好查看更多代码。您是否创建了路线？您是否只是想访问 ember 应用程序无法处理的“网址”？

`this.transistionTo(routeName)`据我所知，预计会收到一条命名路线。然后它将为该路由生成正确的 url。如果您还没有设置任何路线，那么我认为您无法使用它。

# javascript - PhoneGap 游戏、画布和慢速 javascript

> ID：15925958
> 
> 赞同：6
> 
> 时间：2013-04-10T12:33:02.760
> 
> 标签：javascript, html, performance, google-chrome, cordova

所以我构建了一个我希望成为一个简单的安卓游戏的东西。我首先构建了一个网络版本以使其正常工作 ( [http://scolvin.com/ballgame](http://scolvin.com/ballgame) )，然后将其移至 PhoneGap 并使用加速度计来控制游戏。唯一的问题（这是一个节目停止问题）是结果非常慢（我猜大约每秒更新一次，而不是 20 毫秒）。

在没有当前解决方案的情况下，这就是 phonegap 有多慢吗？还是我缺少一些金子弹？

游戏使用easeljs和box2d-web。

奇怪的是，它似乎在 android chrome 上以合理的速度运行，但在 android 的“浏览器”（我似乎记得它是基于 firefox 的？）和可能使用相同的 html 渲染器/js 中断器的 phonegap 上却非常慢。

我尝试过简化游戏，尽可能多地摆脱，使用`setInterval`而不是`accelerometer.watchAcceleration`全部无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T13:44:35.830

而不是使用 setInterval() 来处理 FPS 的事情，你必须使用 requestAnimationFrame() 效率更高

iOS 5+ 和 Android 3+ 使用 Canvas 的硬件加速，因此您至少需要这些设备才能获得稳定的性能。iOS 5.0 和 Android 3.0 之前的任何东西都将使用软件渲染来使用 CPU。

所以需要记住这一点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-27T13:49:52.603

是安卓浏览器的问题

请参阅以下答案：

[Sencha Touch 2 - 安卓性能](https://stackoverflow.com/questions/11450370/sencha-touch-2-android-performance)

（这是给煎茶触摸的，但我认为答案的要点是相同的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T12:50:18.250

渲染或读取加速度计是否存在性能问题？也许您可以创建一个演示模式来检查它在没有用户输入的情况下的行为。

# php - DOMDocument remove script tags from HTML source

> ID：15925961
> 
> 赞同：15
> 
> 时间：2013-04-10T12:33:17.667
> 
> 标签：php, html-parsing, xss, domdocument, script-tag

I used [@Alex's approach here](https://stackoverflow.com/questions/7130867/remove-script-tag-from-html-content) to remove script tags from a HTML document using the built in DOMDocument. The problem is if I have a script tag with Javascript content and then another script tag that links to an external Javascript source file, not all script tags are removed from the HTML.

```
$result = '
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>
            hey
        </title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>
            alert("hello");
        </script>
    </head>
    <body>hey</body>
</html>
';

$dom = new DOMDocument();
if($dom->loadHTML($result))
{
    $script_tags = $dom->getElementsByTagName('script');

    $length = $script_tags->length;

    for ($i = 0; $i < $length; $i++) {
        if(is_object($script_tags->item($i)->parentNode)) {
            $script_tags->item($i)->parentNode->removeChild($script_tags->item($i));
        }
    }

    echo $dom->saveHTML();
} 
```

The above code outputs:

```
<html>
    <head>
        <meta charset="utf-8">
        <title>hey</title>
        <script>
        alert("hello");
        </script>
    </head>
    <body>
        hey
    </body>
</html> 
```

As you can see from the output, only the external script tag was removed. Is there anything I can do to ensure all script tags are removed?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-10T12:44:25.387

你的错误实际上是微不足道的。一个`DOMNode`对象（及其所有后代 -`DOMElement`和`DOMNodeList`其他一些！）在其父元素更改时自动更新，尤其是在其子元素数量更改时。这写在 PHP 文档中的几行上，但大部分都被扫到了地毯下。

如果您使用 循环`($k instanceof DOMNode)->length`，然后从节点中删除元素，您会注意到`length`属性实际上发生了变化！我不得不编写自己的库来抵消这个和其他一些怪癖。

解决方案：

```
if($dom->loadHTML($result))
{
    while (($r = $dom->getElementsByTagName("script")) && $r->length) {
            $r->item(0)->parentNode->removeChild($r->item(0));
    }
echo $dom->saveHTML(); 
```

我实际上并没有循环 - 只是一次弹出第一个元素。结果：[http ://sebrenauld.co.uk/domremovescript.php](http://sebrenauld.co.uk/domremovescript.php)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-06-10T23:07:15.843

为了避免你得到一个*活动*节点列表的惊喜——当你删除节点时它会变短——你可以使用一个副本到一个数组中`iterator_to_array`：

```
foreach(iterator_to_array($dom->getElementsByTagName($tag)) as $node) {
    $node->parentNode->removeChild($node);
}; 
```

# django - Django 自动内联表单集，用于 onetomany / manytomany 字段的表单

> ID：15925964
> 
> 赞同：2
> 
> 时间：2013-04-10T12:33:26.140
> 
> 标签：django, django-forms, django-views

我想了解是否有简单的（DRY）方法可以直接从具有简单视图的模板中的 django 表单显示内联表单集。接受使用 floppyform 或其他 3rd 方应用程序。

假设我们有 2 个（或更多）简单模型，例如：

```
class ModelA(models.Model):
    field_a_one = models.CharField()
    field_a_two = models.CharField()

class ModelB(models.Model):
    field_rel_a = models.ForeignKey(ModelA)
    field_b_one = models.CharField() 
```

除了 OneToMany 关系，我们还可以使用 ManyToMany 关系。

我想要的最简单的形式是能够在我的模板中执行以下操作：

```
{{ model_a_form }} 
```

并得到类似的东西：

```
field_a_one [  input  ]
field_a_two [  input  ]

    field_b_one [   input   ]
    [Delete]

    [ add one more ] 
```

...类似于管理员中发生的事情。

然后，我想，在视图中，只需要做：

类模型视图（更新视图）：

```
 model = ModelA 
```

并有一个 ModelAForm 来自定义行为，例如。要包括哪些字段，哪个顺序等 - 与 django Forms 一样 - 但包括内联关系及其自定义（例如，默认的 html 模板，如表格或非表格等）。我想这与管理员所做的非常相似。

我在 SO 上找到的最接近的 q/a 是[使用模型表单中的 Generic_inlineformset_factory 创建表单，](https://stackoverflow.com/questions/4304148/creating-form-using-generic-inlineformset-factory-from-the-model-form)但这并没有提供一体化解决方案。

还有这个：[http](http://haineault.com/blog/155/) : //haineault.com/blog/155/ 博客，但是您必须自己在视图中配置表单集。这对我来说似乎并不“干燥”！有更好的解决方案吗？

关于更相关的问题，该问题指向该博客，但对该方法的评论不是很积极：[django class-based views with inline model-form or formset](https://stackoverflow.com/questions/4497684/django-class-based-views-with-inline-model-form-or-formset)

# matlab - Matlab User Input/While Loop

> ID：15925966
> 
> 赞同：0
> 
> 时间：2013-04-10T12:33:30.153
> 
> 标签：matlab, while-loop

I'm writing a function in Matlab that prompts the user to select an Instrument (.wav file) to be read in using the `wavread` function.

I'm trying to include some sort of error handling/deal with incorrect inputs from the user.

So far my function looks like this:

```
prompt = 'Select Instrument, Piano: [P], Fork: [F], Violin: [V], Gameboy: [G]';
str = input(prompt,'s');
if isempty(str)
    str = 't';
end

while(str ~= 'P') || (str ~= 'F') || (str ~= 'V') || (str ~= 'G')
    prompt = 'Invalid Selection! Choose, Piano: [P], Fork: [F], Violin: [V], Gameboy: [G]';
    str = input(prompt,'s');
    if isempty(str)
        str = 't';
    elseif (str == 'P') || (str == 'F') || (str == 'V') || (str == 'G')
        break
    end
end 
```

If prompted during the while loop, it successfully prompts the user and reads in the `.wav`, but if the user presses `P`,`F`,`V`, or `G` on the first prompt, the while loop is still used and `"Invalid Sel... "` is still displayed...

I'm not sure how I should be implementing this....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:41:03.057

那是因为你的逻辑是错误的

```
(str ~= 'P') || (str ~= 'F') || (str ~= 'V') || (str ~= 'G') 
```

总是正确的，因为 str 总是与 P、F、V 或 G 不同。它不能与您所要求的所有这些相同。

它应该是

```
str ~= 'P' && str ~= 'F' && str ~= 'V' && str ~= 'G' 
```

或者

```
~(str == 'P' || str == 'F' || str == 'V' || str == 'G') 
```

或在理智的matlab中

```
~any('PFVG' == str) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:43:51.113

如何使用`strcmp`？

```
str = input(prompt,'s');
if isempty(str)
    str = 't';
end

while ~any(strcmp(str,{'P' 'F' 'V' 'G'})) %|| (str ~= 'F') || (str ~= 'V') || (str ~= 'G')
    prompt = 'Invalid Selection! Choose, Piano: [P], Fork: [F], Violin: [V], Gameboy: [G]';
    str = input(prompt,'s');
    if isempty(str)
        str = 't';
    elseif (str == 'P') || (str == 'F') || (str == 'V') || (str == 'G')
        break
    end
end 
```

# java - 根据对象的日历对象在 LinkedList 中插入对象

> ID：15925967
> 
> 赞同：-1
> 
> 时间：2013-04-10T12:33:35.187
> 
> 标签：java, date, linked-list

我正在制作一个交易列表，每个交易都有一组数据字段，包括一个日历对象。我想根据交易日历对象中的日期将这些交易对象插入到 LinkedList 中。换句话说，按日期排序。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:02:57.133

我只给你：

```
Collections.sort(list, new Comparator<MyClass>() {
    public int compareTo(MyClass a, MyClass b) {
        return a.getDate().compareTo(b.getDate());
    }
} 
```

# android - android AdMob unit id

> ID：15925969
> 
> 赞同：3
> 
> 时间：2013-04-10T12:33:38.753
> 
> 标签：android, admob

I want to show Google AdMob interstitial ads in my app. The documentation tells:

```
interstitial = new InterstitialAd(this, MY_INTERSTITIAL_UNIT_ID); 
```

What is `MY_INTERSTITIAL_UNIT_ID` here?

In AdMob developer console I only can see "Publisher ID". Is Publisher ID the same as `MY_INTERSTITIAL_UNIT_ID`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T12:04:55.817

是的。它是您的 PublisherID 或 MediationId（如果您使用的是中介）。

# vba - 运行时错误 1004 无法运行工作表类的粘贴方法

> ID：15925973
> 
> 赞同：1
> 
> 时间：2013-04-10T12:33:47.643
> 
> 标签：vba, excel

您好，我制作的宏有问题。它工作得很好，直到他开始给出这个错误。然后当我进入调试时。在以下字段中显示错误：我将在此处发布所有代码。

```
Sub Terca()
'
' Terca Macro
'
' Atalho do teclado: Ctrl+q
'
Range("I55").Select
ActiveWindow.SmallScroll Down:=-33
Range("E17").Select
Selection.ClearContents
Range("E18").Select
Selection.ClearContents
Range("F17").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-6]C[-2]:R[10]C[-2],Dados!R[-12]C[-2])"
Range("E17").Select
ActiveSheet.Paste   !!!! <-- ERROR ---> !!!!
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-7]C[-1],Dados!R[-12]C[-1])"
Range("F18").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-7]C[-1]:R[9]C[-1],Dados!R[-13]C[-1])"
Range("E18").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-8]C,Dados!R[-13]C)"
Range("F17").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-7]C[-2]:R[10]C[-2],Dados!R[-12]C[-2])"
Range("F18").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-8]C[-1]:R[9]C[-1],Dados!R[-13]C[-1])"
Range("E21").Select
Selection.ClearContents
Range("E22").Select
Selection.ClearContents
Range("F21").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-10]C[4]:R[6]C[4],Dados!R[-16]C[4])"
Range("E21").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-11]C[5],Dados!R[-16]C[5])"
Range("F22").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-11]C[1]:R[5]C[1],Dados!R[-17]C[1])"
Range("E22").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-12]C[2],Dados!R[-17]C[2])"
Range("F21").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-11]C[4]:R[6]C[4],Dados!R[-16]C[4])"
Range("F22").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-12]C[1]:R[5]C[1],Dados!R[-17]C[1])"
Range("F23").Select
ActiveWindow.SmallScroll Down:=12
Range("E25:E26").Select
Selection.ClearContents
Range("F25").Select
ActiveCell.FormulaR1C1 = "=AVERAGE(Dados!R[-14]C[7]:R[2]C[7],Dados!R[-20]C[7])"
Range("E25").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=AVERAGE(Dados!R[-15]C[8],Dados!R[-20]C[8])"
Range("F26").Select
ActiveCell.FormulaR1C1 = "=AVERAGE(Dados!R[-15]C[8]:R[1]C[8],Dados!R[-21]C[8])"
Range("E26").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=AVERAGE(Dados!R[-16]C[9],Dados!R[-21]C[9])"
Range("F25").Select
ActiveCell.FormulaR1C1 = "=AVERAGE(Dados!R[-15]C[7]:R[2]C[7],Dados!R[-20]C[7])"
Range("F26").Select
ActiveCell.FormulaR1C1 = "=AVERAGE(Dados!R[-16]C[8]:R[1]C[8],Dados!R[-21]C[8])"
Range("F31").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-20]C[11]:R[-4]C[11],Dados!R[-26]C[11])"
Range("E31").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-21]C[12],Dados!R[-26]C[12])"
Range("F32").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-21]C[12]:R[-5]C[12],Dados!R[-27]C[12])"
Range("E32").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-22]C[13],Dados!R[-27]C[13])"
Range("F32").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-22]C[12]:R[-5]C[12],Dados!R[-27]C[12])"
Range("F31").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-21]C[11]:R[-4]C[11],Dados!R[-26]C[11])"
Range("F32").Select
ActiveWindow.SmallScroll Down:=12
Range("F35").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-24]C[13]:R[-8]C[13],Dados!R[-30]C[13])"
Range("E35").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-25]C[14],Dados!R[-30]C[14])"
Range("F36").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-25]C[14]:R[-9]C[14],Dados!R[-31]C[14])"
Range("E36").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-26]C[15],Dados!R[-31]C[15])"
Range("F35").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-25]C[13]:R[-8]C[13],Dados!R[-30]C[13])"
Range("F36").Select
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-26]C[14]:R[-9]C[14],Dados!R[-31]C[14])"
Range("F37").Select
ActiveWindow.SmallScroll Down:=6
Range("E42:E43").Select
Selection.ClearContents
Range("F42").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-31]C[17]:R[-15]C[17],Dados!R[-37]C[17])"
Range("E42").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-32]C[18],Dados!R[-37]C[18])"
Range("F43").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-32]C[18]:R[-16]C[18],Dados!R[-38]C[18])"
Range("E43").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-33]C[19],Dados!R[-38]C[19])"
Range("F43").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-33]C[18]:R[-16]C[18],Dados!R[-38]C[18])"
Range("F42").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-32]C[17]:R[-15]C[17],Dados!R[-37]C[17])"
Range("E46:E47").Select
Selection.ClearContents
Range("F46").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-35]C[21]:R[-19]C[21],Dados!R[-41]C[21])"
Range("E46").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-36]C[22],Dados!R[-41]C[22])"
Range("F47").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-36]C[22]:R[-20]C[22],Dados!R[-42]C[22])"
Range("E47").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-37]C[23],Dados!R[-42]C[23])"
Range("F46").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-36]C[21]:R[-19]C[21],Dados!R[-41]C[21])"
Range("F47").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-37]C[22]:R[-20]C[22],Dados!R[-42]C[22])"
Range("L42").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-31]C[13]:R[-15]C[13],Dados!R[-37]C[13])"
Range("K42").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-32]C[14],Dados!R[-37]C[14])"
Range("L43").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-32]C[14]:R[-16]C[14],Dados!R[-38]C[14])"
Range("K43").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-33]C[15],Dados!R[-38]C[15])"
Range("L46").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-35]C[17]:R[-19]C[17],Dados!R[-41]C[17])"
Range("K46").Select
Application.CutCopyMode = False
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-35]C[17]:R[-19]C[17],Dados!R[-41]C[17])"
Range("K46").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-36]C[18],Dados!R[-41]C[18])"
Range("L47").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-36]C[18]:R[-20]C[18],Dados!R[-42]C[18])"
Range("K47").Select
ActiveSheet.Paste
ActiveCell.FormulaR1C1 = "=SUM(Dados!R[-37]C[19],Dados!R[-42]C[19])"
Range("L47").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-37]C[18]:R[-20]C[18],Dados!R[-42]C[18])"
Range("L46").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-36]C[17]:R[-19]C[17],Dados!R[-41]C[17])"
Range("L43").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-33]C[14]:R[-16]C[14],Dados!R[-38]C[14])"
Range("L42").Select
ActiveCell.FormulaR1C1 = _
    "=SUM(Dados!R[-32]C[13]:R[-15]C[13],Dados!R[-37]C[13])"
Range("P48").Select
ActiveWindow.SmallScroll Down:=-9
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:01:05.920

我可以建议对您的（记录的？）代码进行以下改进：

```
Sub Terca()
'
' Terca Macro
'
' Atalho do teclado: Ctrl+q
'
Range("E17:E18,E21:E22,E25:E26,E46:E47,E42:E43").ClearContents
Range("F17").FormulaR1C1 = "=SUM(Dados!R[-6]C[-2]:R[10]C[-2],Dados!R[-12]C[-2])"
Range("E17").FormulaR1C1 = "=SUM(Dados!R[-7]C[-1],Dados!R[-12]C[-1])"
Range("F18").FormulaR1C1 = "=SUM(Dados!R[-7]C[-1]:R[9]C[-1],Dados!R[-13]C[-1])"
Range("E18").FormulaR1C1 = "=SUM(Dados!R[-8]C,Dados!R[-13]C)"
Range("F17").FormulaR1C1 = "=SUM(Dados!R[-7]C[-2]:R[10]C[-2],Dados!R[-12]C[-2])"
Range("F18").FormulaR1C1 = "=SUM(Dados!R[-8]C[-1]:R[9]C[-1],Dados!R[-13]C[-1])"
Range("E21").FormulaR1C1 = "=SUM(Dados!R[-10]C[4]:R[6]C[4],Dados!R[-16]C[4])"
Range("E21").FormulaR1C1 = "=SUM(Dados!R[-11]C[5],Dados!R[-16]C[5])"
Range("F22").FormulaR1C1 = "=SUM(Dados!R[-11]C[1]:R[5]C[1],Dados!R[-17]C[1])"
Range("E22").FormulaR1C1 = "=SUM(Dados!R[-12]C[2],Dados!R[-17]C[2])"
Range("F21").FormulaR1C1 = "=SUM(Dados!R[-11]C[4]:R[6]C[4],Dados!R[-16]C[4])"
Range("F22").FormulaR1C1 = "=SUM(Dados!R[-12]C[1]:R[5]C[1],Dados!R[-17]C[1])"
Range("F25").FormulaR1C1 = "=AVERAGE(Dados!R[-14]C[7]:R[2]C[7],Dados!R[-20]C[7])"
Range("E25").FormulaR1C1 = "=AVERAGE(Dados!R[-15]C[8],Dados!R[-20]C[8])"
Range("F26").FormulaR1C1 = "=AVERAGE(Dados!R[-15]C[8]:R[1]C[8],Dados!R[-21]C[8])"
Range("E26").FormulaR1C1 = "=AVERAGE(Dados!R[-16]C[9],Dados!R[-21]C[9])"
Range("F25").FormulaR1C1 = "=AVERAGE(Dados!R[-15]C[7]:R[2]C[7],Dados!R[-20]C[7])"
Range("F26").FormulaR1C1 = "=AVERAGE(Dados!R[-16]C[8]:R[1]C[8],Dados!R[-21]C[8])"
Range("F31").FormulaR1C1 = "=SUM(Dados!R[-20]C[11]:R[-4]C[11],Dados!R[-26]C[11])"
Range("E31").FormulaR1C1 = "=SUM(Dados!R[-21]C[12],Dados!R[-26]C[12])"
Range("F32").FormulaR1C1 = "=SUM(Dados!R[-21]C[12]:R[-5]C[12],Dados!R[-27]C[12])"
Range("E32").FormulaR1C1 = "=SUM(Dados!R[-22]C[13],Dados!R[-27]C[13])"
Range("F32").FormulaR1C1 = "=SUM(Dados!R[-22]C[12]:R[-5]C[12],Dados!R[-27]C[12])"
Range("F31").FormulaR1C1 = "=SUM(Dados!R[-21]C[11]:R[-4]C[11],Dados!R[-26]C[11])"
Range("F35").FormulaR1C1 = "=SUM(Dados!R[-24]C[13]:R[-8]C[13],Dados!R[-30]C[13])"
Range("E35").FormulaR1C1 = "=SUM(Dados!R[-25]C[14],Dados!R[-30]C[14])"
Range("F36").FormulaR1C1 = "=SUM(Dados!R[-25]C[14]:R[-9]C[14],Dados!R[-31]C[14])"
Range("E36").FormulaR1C1 = "=SUM(Dados!R[-26]C[15],Dados!R[-31]C[15])"
Range("F35").FormulaR1C1 = "=SUM(Dados!R[-25]C[13]:R[-8]C[13],Dados!R[-30]C[13])"
Range("F36").FormulaR1C1 = "=SUM(Dados!R[-26]C[14]:R[-9]C[14],Dados!R[-31]C[14])"
Range("F42").FormulaR1C1 = "=SUM(Dados!R[-31]C[17]:R[-15]C[17],Dados!R[-37]C[17])"
Range("E42").FormulaR1C1 = "=SUM(Dados!R[-32]C[18],Dados!R[-37]C[18])"
Range("F43").FormulaR1C1 = "=SUM(Dados!R[-32]C[18]:R[-16]C[18],Dados!R[-38]C[18])"
Range("E43").FormulaR1C1 = "=SUM(Dados!R[-33]C[19],Dados!R[-38]C[19])"
Range("F43").FormulaR1C1 = "=SUM(Dados!R[-33]C[18]:R[-16]C[18],Dados!R[-38]C[18])"
Range("F42").FormulaR1C1 = "=SUM(Dados!R[-32]C[17]:R[-15]C[17],Dados!R[-37]C[17])"
Range("F46").FormulaR1C1 = "=SUM(Dados!R[-35]C[21]:R[-19]C[21],Dados!R[-41]C[21])"
Range("E46").FormulaR1C1 = "=SUM(Dados!R[-36]C[22],Dados!R[-41]C[22])"
Range("F47").FormulaR1C1 = "=SUM(Dados!R[-36]C[22]:R[-20]C[22],Dados!R[-42]C[22])"
Range("E47").FormulaR1C1 = "=SUM(Dados!R[-37]C[23],Dados!R[-42]C[23])"
Range("F46").FormulaR1C1 = "=SUM(Dados!R[-36]C[21]:R[-19]C[21],Dados!R[-41]C[21])"
Range("F47").FormulaR1C1 = "=SUM(Dados!R[-37]C[22]:R[-20]C[22],Dados!R[-42]C[22])"
Range("L42").FormulaR1C1 = "=SUM(Dados!R[-31]C[13]:R[-15]C[13],Dados!R[-37]C[13])"
Range("K42").FormulaR1C1 = "=SUM(Dados!R[-32]C[14],Dados!R[-37]C[14])"
Range("L43").FormulaR1C1 = "=SUM(Dados!R[-32]C[14]:R[-16]C[14],Dados!R[-38]C[14])"
Range("K43").FormulaR1C1 = "=SUM(Dados!R[-33]C[15],Dados!R[-38]C[15])"
Range("L46").FormulaR1C1 = "=SUM(Dados!R[-35]C[17]:R[-19]C[17],Dados!R[-41]C[17])"
Range("K46").FormulaR1C1 = "=SUM(Dados!R[-35]C[17]:R[-19]C[17],Dados!R[-41]C[17])"
Range("K46").FormulaR1C1 = "=SUM(Dados!R[-36]C[18],Dados!R[-41]C[18])"
Range("L47").FormulaR1C1 = "=SUM(Dados!R[-36]C[18]:R[-20]C[18],Dados!R[-42]C[18])"
Range("K47").FormulaR1C1 = "=SUM(Dados!R[-37]C[19],Dados!R[-42]C[19])"
Range("L47").FormulaR1C1 = "=SUM(Dados!R[-37]C[18]:R[-20]C[18],Dados!R[-42]C[18])"
Range("L46").FormulaR1C1 = "=SUM(Dados!R[-36]C[17]:R[-19]C[17],Dados!R[-41]C[17])"
Range("L43").FormulaR1C1 = "=SUM(Dados!R[-33]C[14]:R[-16]C[14],Dados!R[-38]C[14])"
Range("L42").FormulaR1C1 = "=SUM(Dados!R[-32]C[13]:R[-15]C[13],Dados!R[-37]C[13])"

End Sub 
```

在分配值之前无需选择单元格。如果剪贴板中没有适合粘贴的内容，请勿尝试粘贴

高温高压

菲利普

# rest - 在父级中公开子级导航属性

> ID：15925975
> 
> 赞同：0
> 
> 时间：2013-04-10T12:33:52.200
> 
> 标签：rest, wcf-data-services, odata

是否可以使用 OData 在其父实体中公开子导航属性？

假设我们有以下模型：

![http://yuml.me/e0a3284c](https://i.stack.imgur.com/UMFB6.png)

[也在这里查看模型图像](http://yuml.me/e0a3284c)

我想访问加载了类别属性的所有车辆的列表。

我试过`/Vehicles/?$expand=category`了，但服务无法识别该属性。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:12:24.743

你应该试试，

`/Vehicles?$expand=NS.Motorcycle/Category,NS.Car/Category`

NS 将分别是 Motorcycle 和 Car 类型的命名空间。

您可以扩展您尝试扩展的类型上存在的属性，在本例中为 Vehicle。如果要扩展派生类型中存在的导航属性，则必须先进行强制转换，然后再扩展。

# c++ - 为什么 sort() 函数用于类对象集时会导致编译错误

> ID：15925976
> 
> 赞同：-3
> 
> 时间：2013-04-10T12:33:54.300
> 
> 标签：c++, sorting, stl

我尝试`<`为类重载运算符并按如下方式调用该函数：

```
bool Edge::operator<(Edge const & e) const {
    return this->GetCost() < e.GetCost();
} 
```

在主（）

```
sort(edge_set.begin(),edge_set.end()); 
```

此外，我还尝试为 main.cpp 中定义的对象编写一个简单的比较器函数并尝试调用`sort()`，但再次失败：

```
bool edge_comparator(Edge& e1, Edge& e2){
    return (e1.GetCost() < e2.GetCost());
} 
```

在主（）

```
sort(edge_set.begin(),edge_set.end(), edge_comparator); 
```

对于我尝试过的那些，我得到一个编译错误。我在这里做错了什么？如何对对象集进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:35:59.073

`std::set`是已排序的关联容器，因此无法重新排序。排序标准应用于构造和元素插入。

**编辑**：你有一组`Edge`指针。如果您希望根据您自己的标准对其进行排序，您可以使用仿函数的类型实例化 an ，该仿函数在一对指针[`std::set`](http://en.cppreference.com/w/cpp/container/set)之间执行小于比较作为第二个模板参数：`Edge`

```
struct EdgePtrCmp
{
  bool operator()(const Edge* lhs, const Edge* rhs) const
  {
    return lhs->GetCost() < rhs->GetCost();
  }
} 
```

然后

```
std::set<Edge*, EdgePtrCmp> s; 
```

**编辑 2**：问题已再次更改，因此尚不清楚它是否处理一组指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:38:04.033

两个问题。首先，您不能对集合中的元素重新排序。它们的排序标准是在构造时确定的，它是对象的基本部分。为了实现 O(log n) 的查找、插入和删除，这是必要的，这是`std::set`. 默认情况下，它将使用`std::less<Edge>`，它应该调用你的`operator<`. 但是你也可以使用你的`edge_comparator`函数，像这样：

```
std::set<Edge, bool(*)(Edge&,Edge&)> edge_set(edge_comparator); 
```

其次，`std::sort`只能用于随机访问迭代器或更好的迭代器，并且`std::set`迭代器是双向的。

# testing - Unitils 数据集和修改日期

> ID：15925979
> 
> 赞同：2
> 
> 时间：2013-04-10T12:33:58.830
> 
> 标签：testing, dataset, dbunit, unitils

有什么想法可以用 Unitils dbunit 完成吗？ [DBUnit 数据集中相对于当前的日期](https://stackoverflow.com/questions/2856840/date-relative-to-current-in-the-dbunit-dataset)

问题是 @Dataset 中无法识别 [create_date]-placeholder。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T12:26:49.847

一个简单的解决方案可能是在您的 xml 数据集中使用占位符，例如。

<?xml version='1.0' encoding='UTF-8'?> <dataset> <user userName="jdoe" name="doe" firstname="john" lastLogin="{YESTERDAY}" /> <user userName= "jdoe" name="doe" firstname="jane" lastLogin="{A_WEEK_AGO}" /> </dataset>

并在运行测试之前进行一些后处理（用计算值替换占位符）。当您使用 Maven 时，您可以在执行任何测试之前先执行后处理（填写 xml-template-dataset 中的值，将填充的 xml-dataset 复制到正确的文件夹）。

# javascript - 在 Google Maps API 中使用地址而不是经度和纬度

> ID：15925980
> 
> 赞同：59
> 
> 时间：2013-04-10T12:34:00.493
> 
> 标签：javascript, google-maps, google-maps-api-3, latitude-longitude, street-address

我听说可以提交地址而不是经度和纬度，这对我的系统来说更可行。用户在创建他们的个人资料时必须输入他们的地址，然后他们的个人资料将显示他们家的谷歌地图。我目前有 Google Maps API 与经度和纬度完美配合：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link rel="stylesheet" type="text/css" href="css.css" />
    <title>Login Page</title>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map-canvas { height: 100% }
</style>
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=MYKEY&sensor=false">
</script>
<script type="text/javascript">
  function initialize() {
    var mapOptions = {
  center: new google.maps.LatLng(52.640143,1.28685),
      zoom: 15,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map"),
        mapOptions);

var marker = new google.maps.Marker({
    position: new google.maps.LatLng(52.640143,1.28685),
    map: map,
    title: "Mark On Map"
});
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script>

</head> 
```

请有人可以帮助我更改我的代码，以便它使 Google Maps API 能够在其位置请求地址，因为我想直接从 mySQL 数据库中读取用户的地址。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-04-10T14:15:13.317

请参阅[此示例，](http://www.geocodezip.com/GMapsExampleV3b.html)将地图初始化为“San Diego, CA”。

使用 Google Maps Javascript API v3 [Geocoder](https://developers.google.com/maps/documentation/javascript/geocoding)将地址转换为可在地图上显示的坐标。

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Geocoding Simple</title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
  var geocoder;
  var map;
  var address ="San Diego, CA";
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var myOptions = {
      zoom: 8,
      center: latlng,
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    if (geocoder) {
      geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
          if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
          map.setCenter(results[0].geometry.location);

            var infowindow = new google.maps.InfoWindow(
                { content: '<b>'+address+'</b>',
                  size: new google.maps.Size(150,50)
                });

            var marker = new google.maps.Marker({
                position: results[0].geometry.location,
                map: map, 
                title:address
            }); 
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map,marker);
            });

          } else {
            alert("No results found");
          }
        } else {
          alert("Geocode was not successful for the following reason: " + status);
        }
      });
    }
  }
</script>
</head>
<body style="margin:0px; padding:0px;" onload="initialize()">
 <div id="map_canvas" style="width:100%; height:100%">
</body>
</html> 
```

工作代码片段：

```
var geocoder;
var map;
var address = "San Diego, CA";

function initialize() {
  geocoder = new google.maps.Geocoder();
  var latlng = new google.maps.LatLng(-34.397, 150.644);
  var myOptions = {
    zoom: 8,
    center: latlng,
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  if (geocoder) {
    geocoder.geocode({
      'address': address
    }, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
          map.setCenter(results[0].geometry.location);

          var infowindow = new google.maps.InfoWindow({
            content: '<b>' + address + '</b>',
            size: new google.maps.Size(150, 50)
          });

          var marker = new google.maps.Marker({
            position: results[0].geometry.location,
            map: map,
            title: address
          });
          google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map, marker);
          });

        } else {
          alert("No results found");
        }
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
}
```

```
<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas" ></div>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-09T11:39:40.797

您可以通过地址解析地理位置。使用 jquery 创建一个数组，如下所示：

```
//follow this structure
var addressesArray = [
  'Address Str.No, Postal Area/city'
]

//loop all the addresses and call a marker for each one
for (var x = 0; x < addressesArray.length; x++) {
  $.getJSON('http://maps.googleapis.com/maps/api/geocode/json?address='+addressesArray[x]+'&sensor=false', null, function (data) {
    var p = data.results[0].geometry.location
    var latlng = new google.maps.LatLng(p.lat, p.lng);
    //it will place marker based on the addresses, which they will be translated as geolocations.
    var aMarker= new google.maps.Marker({
      position: latlng,
      map: map
    });
  });
} 
```

另请注意，如果您没有企业帐户，Google 会限制您的搜索结果，如果您使用的地址过多，您会收到错误消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T12:38:32.243

**地理编码**是将地址（如“1600 Amphitheatre Parkway, Mountain View, CA”）转换为地理坐标（如纬度 37.423021 和经度 -122.083739）的过程，您可以使用它来放置标记或定位地图。

这是否是您要查找的内容：包含示例代码
[https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingRequests](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingRequests)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-20T09:14:46.967

以为我会分享我以前使用过的这段代码片段，这会通过**地理编码**添加多个地址并将这些地址添加为**标记**...

```
var addressesArray = [
  'Address Str.No, Postal Area/city',
  //follow this structure
]
var map = new google.maps.Map(document.getElementById('map'), {
  center: {
    lat: 12.7826,
    lng: 105.0282
  },
  zoom: 6,
  gestureHandling: 'cooperative'
});
var geocoder = new google.maps.Geocoder();
for (i = 0; i < addressArray.length; i++) {
  var address = addressArray[i];
  geocoder.geocode({
    'address': address
  }, function(results, status) {
    if (status === 'OK') {
      var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location,
        center: {
          lat: 12.7826,
          lng: 105.0282
        },
      });
    } else {
      alert('Geocode was not successful for the following reason: ' + status);
    }
  });
}
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-13T10:46:01.077

```
var geocoder;
var map;
function initialize() {
geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(-34.397, 150.644);
var mapOptions = {
  zoom: 8,
  center: latlng
}
map = new google.maps.Map(document.getElementById('map'), mapOptions);
}

function codeAddress() {
var address = document.getElementById('address').value;
geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == 'OK') {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
    });
  } else {
    alert('Geocode was not successful for the following reason: ' + status);
  }
});
}

<body onload="initialize()">
 <div id="map" style="width: 320px; height: 480px;"></div>
 <div>
   <input id="address" type="textbox" value="Sydney, NSW">
   <input type="button" value="Encode" onclick="codeAddress()">
 </div>
</body> 
```

或参考文档[https://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)

# ios - 多个 UILabel 之间的固定边距

> ID：15925991
> 
> 赞同：0
> 
> 时间：2013-04-10T12:34:16.433
> 
> 标签：ios, interface-builder, uilabel, uistoryboard

我在一个简单的 UIViewController 中有 7 个 UILabel，我在 Interface Builder 中手动调整了这些标签，它们之间的边距相同。然而，当在模拟器中执行它时，我在标签之间有不同的边距，而不是有序的，这与我在 Interface Builder 中的相反。我错过了什么？有没有更清洁的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:14:29.510

下图显示了您的尺寸检查器的外观。如果您使用的是低于 iOS 6 的版本，那么您可以在此处配置 @Jeepston 提到的那些自动调整大小的约束。当然，除非您以编程方式进行。

如果您只针对 iOS 6，那么我建议您在[此处](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)学习自动布局。这个新功能应该让你很容易

![尺寸检查器](https://i.stack.imgur.com/TMDpD.png)

# perl - Perl 安装 PAR:Packer 问题

> ID：15925992
> 
> 赞同：6
> 
> 时间：2013-04-10T12:34:16.473
> 
> 标签：perl, installation, perl-module, par, packer

在我的 Windows 7 64 位上，我的 perl 版本是 5.16.2，我无法安装 PAR:Packer。我尝试了 active perl 和草莓 perl ，都得到了同样的错误。你能给我一些建议吗？以下是我的经验：

我试过`ppm install PAR:Packer`了，版本 1.013，但是当我使用 pp 时，我得到了错误：

```
Perl lib version (5.16.2) doesn't match executable version (v5.16.0). 
```

我也试过`cpan install PAR:Packer`了，版本 1.014。但是我在安装过程中遇到了错误。弹出窗口说：`par.exe has stopped working`。然后命令提示符出现错误：

```
C:\Perl64\bin\perl.exe -Mblib run_with_inc.pl par.exe -q -B -Oparldyn.exe
system(par.exe -I C:\Users\PAR-Packer-1.014\blib\arch -I C:\Users\PAR-Packer-1.014\blib\lib -     IC:/Perl64/site/lib -IC:/Perl64/lib -I. -q -B -Oparldyn.exe) failed:
dmake.exe:  Error code 255, while making 'parldyn.exe'
dmake.exe:  Error code 255, while making 'subdirs' 
```

google了很多，但是一直没有找到解决办法，不胜感激，万分感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-29T11:14:45.343

我只是将 .../perl64/Config.pm 中的第 60 行从

```
`$^V eq 5.16.3` 
```

至

```
`$^V eq 5.16.3 or $^V eq 5.16.0` 
```

瞧！我通过 ppm (ActiveState Perl 5.16.3) 安装的 par-packer 模块 1.013 工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:27:46.457

我将从我自己的环境开始：

*   Windows 7 x64 zh_CN
*   草莓 Perl v5.16.2 32bit

我刚刚确认我确实有 PAR::Packer 在我的环境中工作。我正在运行 PAR::Packer 版本 1.014。

记录了一个关于 PAR::Packer 1.013 无法在某些环境中构建的错误。该错误在此处记录在 CPAN 上：[https ://rt.cpan.org/Public/Bug/Display.html?id=77408](https://rt.cpan.org/Public/Bug/Display.html?id=77408)

我建议尝试以下路径之一（根据您的构建版本要求）：

1.  安装 PAR::Packer 1.0.14。
2.  安装 PAR::Packer 1.013 的修补版本，可在[http://strawberryperl.com/package/kmx/perl-modules-patched/PAR-Packer-1.013_patched.tar.gz获得](http://strawberryperl.com/package/kmx/perl-modules-patched/PAR-Packer-1.013_patched.tar.gz)

要构建，您还需要任何依赖项。希望这些通过 CPAN 工作得很好。

从 CPAN 站点下载上面列出的修补版本或最新版本，然后执行：

```
perl Makefile.pl
dmake
dmake test
dmake install 
```

请记住，PAR::Packer 需要 C/C++ 编译器来构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T19:00:48.800

我在 Windows 7 64 位机器上使用 Perl 5.16.3 遇到了完全相同的错误场景。我开始使用 ActiveState 修改 Perl，后来安装了其他相关程序，如 Komodo Edit，最后安装了 StrawberryPerl。在阅读了相当多的这些在线帖子后，我尝试了手动 dmake 方法以及我能找到的任何其他建议。然后我尝试卸载 ActiveState。那也没有帮助。最后，我进行了一次卸载狂欢，发现在卸载所有 ActiveState 和 Komodo 应用程序（以及我不再使用的其他一些东西）后，我能够通过两个简单的步骤成功安装和使用 pp cpan 提示：

安装 CPAN

安装pp

接下来我将卸载并重新安装 StrawberryPerl，但不必这样做。安装 CPAN 可能不是必需的，但在我之前失败的一次尝试中的日志输出中建议了它，所以我想我会先尝试一下。希望这可以节省我作为初学者的所有麻烦。

# c# - 如何使用 WPF（或互操作）在不给它焦点的情况下恢复窗口

> ID：15925994
> 
> 赞同：9
> 
> 时间：2013-04-10T12:34:23.480
> 
> 标签：c#, wpf, winapi

我需要**恢复**（“取消最小化”）一个已创建的 WPF 窗口，但当前位于顶部的窗口（不一定是 WPF）**不能失去焦点或激活**。我已经尝试使用我能找到的所有 WIN32 功能，但无济于事。现在变得非常沮丧，非常感谢任何指示和提示。

显然，只是在 WPF 中更改为`WindowState.Normal`不会削减它，因为这会使窗口也接收焦点和激活。`Hidden`我还尝试了设置和`IsEnabled`恢复时的各种组合。

我已经`SetWindowPos`用 HWND_TOP、HWND_TOPMOST 等尝试了 WIN32，但是这个功能不是为了恢复窗口，只会改变已经“显示”的窗口的位置。

尝试了WIN32 `ShowWindow`，`SetWindowPlacement`但也没有运气。尝试绝望地尝试添加 HwndHook 以尝试侦听`WM_SETFOCUS`并将焦点恢复到原始窗口，但对于最后一个聚焦的窗口句柄，我只得到零。

**编辑 - 来自 Joel Lucsy 的提示后带有窗口扩展的解决方案：**

```
public static class RestoreWindowNoActivateExtension
{        
    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool ShowWindow(IntPtr hWnd, UInt32 nCmdShow);

    private const int SW_SHOWNOACTIVATE = 4;

    public static void RestoreNoActivate(this Window win)
    {
        WindowInteropHelper winHelper = new WindowInteropHelper(win);
        ShowWindow(winHelper.Handle, SW_SHOWNOACTIVATE); 
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T13:04:50.003

打电话`ShowWindow`传`SW_SHOWNOACTIVATE`旗。

# php - 如何使用 codeigniter 将 CSV 导入 mysql

> ID：15925997
> 
> 赞同：3
> 
> 时间：2013-04-10T12:34:39.953
> 
> 标签：php, codeigniter

我有一个 csv 文件列表，我想使用 codeigniter 将其导入 mysql db。

我尝试`$this->load->library('getcsv');`了库，但是如何在不将 CSV 文件上传到服务器的情况下导入 csv，我的意思只是将文件上传到临时位置，就像纯编码 PHP 所做的那样。

任何想法？

**例子：**

我想要这样的东西。

**HTML：**`<input type="file" name="csv" />`

到一个临时字符串

**代码点火器：** `$this->input->upload['tmp_name']`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:42:51.400

我对此给出了确切的答案。看看我的这个答案来解决你的问题。

这将生成 CSV 格式的报告。

[Codeigniter 中的报告](https://stackoverflow.com/questions/11189021/reports-in-codeigniter/11189368#11189368)

这将告诉您如何读取和转储 csv 文件。

[Codeigniter REST CSV 导入到 mysql](https://stackoverflow.com/questions/11337221/codeigniter-rest-csv-import-to-mysql/11339125#11339125)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T06:19:59.460

尝试这个：

数据库：

```
SET FOREIGN_KEY_CHECKS=0;
DROP TABLE IF EXISTS `contacts`;
CREATE TABLE `contacts` (
  `contact_id` int(11) NOT NULL auto_increment,
  `contact_first` varchar(255) character set latin1 default NULL,
  `contact_last` varchar(255) character set latin1 default NULL,
  `contact_email` varchar(255) character set latin1 default NULL,
  PRIMARY KEY  (`contact_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

导入.php::

```
<?php  

//connect to the database 
$connect = mysql_connect("localhost","username","password"); 
mysql_select_db("mydatabase",$connect); //select the table 
// 

if ($_FILES[csv][size] > 0) { 

    //get the csv file 
    $file = $_FILES[csv][tmp_name]; 
    $handle = fopen($file,"r"); 

    //loop through the csv file and insert into database 
    do { 
        if ($data[0]) { 
            mysql_query("INSERT INTO contacts (contact_first, contact_last, contact_email) VALUES 
                ( 
                    '".addslashes($data[0])."', 
                    '".addslashes($data[1])."', 
                    '".addslashes($data[2])."' 
                ) 
            "); 
        } 
    } while ($data = fgetcsv($handle,1000,",","'")); 
    // 

    //redirect 
    header('Location: import.php?success=1'); die; 

} 

?> 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<title>Import a CSV File with PHP & MySQL</title> 
</head> 

<body> 

<?php if (!empty($_GET[success])) { echo "<b>Your file has been imported.</b><br><br>"; } //generic success notice ?> 

<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1"> 
  Choose your file: <br /> 
  <input name="csv" type="file" id="csv" /> 
  <input type="submit" name="Submit" value="Submit" /> 
</form> 

</body> 
</html> 

//get the csv file
    $file = $_FILES[csv][tmp_name];
    $handle = fopen($file,"r");

    //loop through the csv file and insert into database
    do {
        if ($data[0]) {
            mysql_query("INSERT INTO contacts_tmp (contact_first, contact_last, contact_email) VALUES
                (
                    '".addslashes($data[0])."',
                    '".addslashes($data[1])."',
                    '".addslashes($data[2])."'
                )
            ");
        }
    } while ($data = fgetcsv($handle,1000,",","'"));
    // 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T09:01:18.850

首先更改位于 config 文件夹内的 route.php 中的 default_controller 值。

$route['default_controller'] = "csv";

创建一个控制器作为**csv.php**

```
<?php
class csv extends CI_Controller
{
    public $data;
    public function __construct()
    {
        parent::__construct();
        $this->load->model('csv_model');
    }
    function index()
    {
        $this->load->view('uploadCsvView',$data);
    }
    function uploadData()
    {
        $this->csv_model->uploadData();
        redirect('csv');
    }
}
?> 
```

并创建一个模型作为**csv_model.php**

```
<?php
class csv_model extends CI_Model
{
    function __construct()
    {
        parent::__construct();
    }
    function uploadData()
    {
        $count=0;
        $fp = fopen($_FILES['userfile']['tmp_name'],'r') or die("can't open file");
        while($csv_line = fgetcsv($fp,1024))
        {
            $count++;
            if($count == 1)
            {
                continue;
            }//keep this if condition if you want to remove the first row
            for($i = 0, $j = count($csv_line); $i < $j; $i++)
            {
                $insert_csv = array();
                $insert_csv['id'] = $csv_line[0];//remove if you want to have primary key,
                $insert_csv['empName'] = $csv_line[1];
                $insert_csv['empAddress'] = $csv_line[2];

            }
            $i++;
            $data = array(
                'id' => $insert_csv['id'] ,
                'empName' => $insert_csv['empName'],
                'empAddress' => $insert_csv['empAddress'],
            $data['crane_features']=$this->db->insert('tableName', $data);
        }
        fclose($fp) or die("can't close file");
        $data['success']="success";
        return $data;
    }
} 
```

最后创建一个视图作为**uploadCsvView.php**

```
<form action="<?php echo site_url();?>csv/uploadData" method="post" enctype="multipart/form-data" name="form1" id="form1"> 
    <table>
        <tr>
            <td> Choose your file: </td>
            <td>
                <input type="file" class="form-control" name="userfile" id="userfile"  align="center"/>
            </td>
            <td>
                <div class="col-lg-offset-3 col-lg-9">
                    <button type="submit" name="submit" class="btn btn-info">Save</button>
                </div>
            </td>
        </tr>
    </table> 
</form> 
```

并创建要插入数据的mysql表：

```
CREATE TABLE tableName(
    id INT,
    empName VARCHAR( 100 ) ,
    empAddress VARCHAR( 100 ),
    PRIMARY KEY (id)
) 
```

还有最重要的一点：

> MySql 和 Csv 文件应该都相同

示例 csv 数据位于以下链接中：

[https://drive.google.com/file/d/0B-OuLrage4PpUmtKNkhuS1JrSkE/view?usp=sharing](https://drive.google.com/file/d/0B-OuLrage4PpUmtKNkhuS1JrSkE/view?usp=sharing)