# StackOverflow 问答 15372000-15372999

# sql - pyodbc - 插入选定的行（访问 mdb）

> ID：15372002
> 
> 赞同：2
> 
> 时间：2013-03-12T20:59:18.447
> 
> 标签：sql, ms-access, pyodbc

从 Access .mdb 表中插入选定的记录/行时，我`Syntax error in INSERT INTO statement. (-3502)`在此代码块的第 23 行找到了一个“”。

我想要发生的是

1.  创建一个表'65001'
2.  从表“LMR_Combined”中选择前 65000 行
3.  将这些选定的行插入到新创建的“65001”表中。

这个 INSERT INTO 语句中有什么语法错误阻止了成功执行？

```
import pyodbc
DBFile = r'C:\Python27\FCC_Processing\LMR Combined.mdb'
conn = pyodbc.connect('DRIVER={Microsoft Access Driver (*.mdb, *.accdb)};DBQ='+DBFile)

cursor = conn.cursor()

# Creates a table "65001" in the MDB that matches the schema of table "LMR_Combined"
string = "CREATE TABLE 65001(OBJECTID integer, Unique_ID varchar(255), LICENSEE_NAME varchar(255))"

cursor.execute(string)

# Selects 65000 records from table "LMR_Combined"
cursor.execute('select OBJECTID, Unique_ID, LICENSEE_NAME from LMR_Combined where OBJECTID > 0 and OBJECTID < 65001')

row = cursor.fetchone()

# For debugging, print a line
if row:
    print row

# Inserts the 65000 rows into the new table "65001"
cursor.execute('insert OBJECTID, Unique_ID, LICENSEE_NAME into 65001')

conn.commit() 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:05:52.707

你的语法是错误的。

在表中插入数据的正确方法是：

```
insert into table1 (field1, field2, ...)
select ... 
```

或者：

```
insert into table1(field1, field2, ...)
values (value1, value2, ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:29:47.310

[考虑使用SELECT...INTO 语句创建和填充](http://msdn.microsoft.com/en-us/library/office/bb208934%28v=office.12%29.aspx)*65001*表是否足够：

```
SELECT OBJECTID, Unique_ID, LICENSEE_NAME
INTO [65001]
FROM LMR_Combined
WHERE OBJECTID > 0 AND OBJECTID < 65001; 
```

如果您需要的数据类型与`SELECT...INTO`提供的不同，请执行您的`CREATE TABLE`然后执行以下操作`INSERT`：

```
INSERT INTO [65001] (OBJECTID, Unique_ID, LICENSEE_NAME)
SELECT OBJECTID, Unique_ID, LICENSEE_NAME
FROM LMR_Combined
WHERE OBJECTID > 0 AND OBJECTID < 65001; 
```

# ios - 使用 iOS Reachability 显示 UIAlertView

> ID：15372005
> 
> 赞同：1
> 
> 时间：2013-03-12T20:59:27.460
> 
> 标签：ios, ios5, uialertview, reachability

我正在尝试设置可达性以在与 Internet 的连接丢失时显示警报视图。

我正在努力理解可达性实际上是如何工作的。我已阅读[文档](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/ReadMe_txt.html#//apple_ref/doc/uid/DTS40007324-ReadMe_txt-DontLinkElementID_7)并设置示例应用程序以从 Apple 审查，但我想更好地理解代码及其工作方式。

在我的设置中，我正在寻找两件事：1\. 告诉我何时失去与 Internet 的连接 2\. 告诉我何时失去与主机地址的连接

该代码是在我的应用程序委托中设置的，因为我希望 UIAlertView 在连接丢失时出现在应用程序内的任何位置。

对于场景 1，我希望显示一个 UIAlertView 来向用户发送消息说连接丢失。单击时将出现一个“重试”按钮，然后再次测试连接以查看互联网连接是否已恢复，如果没有再次显示警报视图。

代码：App Delegate imp 文件：

```
//Called by Reachability whenever status changes.
- (void)reachabilityChanged:(NSNotification* )note {
Reachability *curReach = (Reachability *)[note object];
NSParameterAssert([curReach isKindOfClass: [Reachability class]]);
NSLog(@"Reachability changed: %@", curReach);
networkStatus = [curReach currentReachabilityStatus];

if (networkStatus == NotReachable) {
    NSLog(@"NOT REACHABLE");\
    UIAlertView *connectionNotReachable = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"connectionNotReachableTitle", @"Title for alert view - connection Not Reachable") message:NSLocalizedString(@"connectionNotReachableMessage", @"Message for alert view - connection Not Reachable") delegate:self cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"connectionNotReachableTryAgain", @"Try again button for alert view - connection Not Reachable"), nil];

    [connectionNotReachable show]; 
    return;
} else {
    NSLog(@"REACHABLE");
}
}

- (void)monitorReachability {
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:ReachabilityChangedNotification object:nil];

self.hostReach = [Reachability reachabilityWithHostName: @"api.parse.com"];
[self.hostReach startNotifier];

self.internetReach = [Reachability reachabilityForInternetConnection];
[self.internetReach startNotifier];

} 
```

困惑：我不明白这段代码是如何工作的。所以在我的`application didFinishLaunchingWithOptions:`我叫`[self monitorReachability]`。

我猜这设置了 hostReach 和 internetReach 的通知程序。但是在该`reachabilityChanged`方法中，我如何确定这是 hostReach == NotReachable 还是 internetReach == Not Reachable 之间的区别。

理想情况下，对于无法访问的 hostReach，我目前不想做太多事情，因为这可能是当时无法访问这个特定的 api。所以我不想在那段时间完全使应用程序无法访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:03:57.213

每当网络状态发生变化时，您的应用程序都会监听`kReachabilityChangedNotification`并提示您。您注册这样的通知

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityHasChanged:) name:kReachabilityChangedNotification object:nil];

    self.internetReachable = [[Reachability reachabilityForInternetConnection] retain];
    [self.internetReachable startNotifier];

// check if a host is reachable
self.hostReachable= [Reachability reachabilityWithHostname:@"www.google.com"];
[self.hostReachable startNotifier]; 
```

基本上，您可以设置一个全局标志，例如`BOOL isReachable`在开关盒内，并根据网络可达性状态进行更新。在您的应用程序中，无论您身在何处，都可以检查全局标志`if(!isReachable)`然后显示警报

```
-(void) reachabilityHasChanged:(NSNotification *)notice
{
    // called after network status changes
    NetworkStatus internetStatus = [self.internetReachable currentReachabilityStatus];
    switch (internetStatus)
    {
        case NotReachable:
        {
          UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Errot" message:@"internet not reachable" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
         [alert show];
         isReachable=NO;

            break;
        }
        case ReachableViaWiFi:
        {
          NSLog(@"The internet is working via WIFI.");
          UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Info" message:@"WIFI reachable" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
          [alert show];
          isReachable=YES;

            break;
        }
        case ReachableViaWWAN:
        {
          NSLog(@"The internet is working via WWAN.");
          UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Info" message:@"WWAN/3G" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
          [alert show];
          isReachable=YES;
           break;
        }
    }

  NetworkStatus hostStatus = [self.hostReachable currentReachabilityStatus];

switch (hostStatus)
{
    case ReachableViaWWAN:
    {
      //NSLog(@"3G");

      hostActive=YES;
      break;
    }
    case ReachableViaWiFi:
    {

      // NSLog(@"WIFI");

      hostActive=YES;
      break;
    }
    case NotReachable:
    {

      hostActive=NO;

      break;
    }

  }

 } 
```

如果您在开始使用 Reachability 时遇到问题，那么只需[下载 Reachability 的示例代码](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。

如果您查看课堂上的方法`reachabilityForInternetConnection`，`Reachability`您会发现它通常检查互联网连接，而不关注特定主机，它仅检查互联网网关是否可访问。

```
 + (Reachability*) reachabilityForInternetConnection;

    {

        struct sockaddr_in zeroAddress;

        bzero(&zeroAddress, sizeof(zeroAddress));

        zeroAddress.sin_len = sizeof(zeroAddress);

        zeroAddress.sin_family = AF_INET;

        return [self reachabilityWithAddress: &zeroAddress];

    } 
```

# insert - 顺序文件

> ID：15372007
> 
> 赞同：-2
> 
> 时间：2013-03-12T20:59:42.463
> 
> 标签：insert, logic, pseudocode, saving-data

好的，所以我还在学习编程的基础知识。还在学习使用伪代码。我已经阅读并练习过编写伪代码操作。我仍然很困惑，当我向老师提问时，我觉得我打扰了她。也许情况并非如此，但每当我有问题时，我总是会有这种感觉，但我正在努力打破这个障碍。所以我将举一个我书中的例子，我会提出一些问题，看看是否有人可以帮助我理解。

该示例是关于将记录插入到顺序文件中。我的教科书说：

“让我们假设成绩文件的内容按照学生姓名的字母顺序列出了记录。假设一个新学生加入了班级。现在我们需要插入一条新记录。我们必须在该记录的每个字段中放置数据。在这个例子中， Grades 有两个字段——一个用于学生的姓名，一个用于学生的分数。所以我们要插入存储在名为 NewName 和 NewScore 的变量中的值。这些值将由用户输入，并将插入到此文件中适当的地方，保持字母顺序。”

然后，它表达了伪代码：

```
1  Declare NewName As String
2  Declare NewScore As Integer
3  Open “grades” For Input As GivenFile
4  Open “scratch” For Output As TempFile
5  Write “Enter name and score for the new student:” 
6  Input NewName, NewScore
7  Set Inserted == 0
8  While (NOT EOF(GivenFile)) AND (Inserted == 0)
9    Read GivenFile, Student, Score 
10    If NewName < Student Then
11       Write TempFile, NewName, NewScore
12      Set Inserted = 1
13     End If
14   Write TempFile, Student, Score 
15 End While
16 If Inserted == 0 Then
17   Write TempFile, NewName, NewScore 
18 End If
19 While NOT EOF(GivenFile)
20   Read GivenFile, Student, Score 
21   Write TempFile, Student, Score
22 End While
23 Close GivenFile, TempFile 
24 Copy scratch onto grades 
```

我不明白第 3 行和第 4 行，为什么一个是输入，另一个是输出？我认为 Input 是要插入程序的内容，而 output 是插入程序的结果。

另外，我只使用了数字的关系运算符，所以现在我在第 10 行看到它们时感到很困惑。它想告诉我什么？(NewName < Student) 是否告诉我是否有新学生要编写 TempFile、Student 和 Score？

在第一个 While 循环中给出一个 Inserted = 1，然后它结束循环。然后重复 Inserted == 0（第 16 行），这是否意味着万一有另一个新学生重复 while 循环？我真的迷路了。

最后，为什么我们必须从头开始复制到成绩上？

对于所有的问题，我很抱歉，我很困惑，我正在网上上课，我必须自学，我没有人可以讨论这个问题。

注意：这与赋值无关，只是想更好地理解编程的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:05:56.010

您可能会尝试开发一种算法来将新记录写入文件中的正确位置，但我们遇到了问题：

```
while (more lines to read) {
   if new name comes after name in file {
       this might be the right place but I can't tell - depends what the 
       next name is but I have't read that yet - don't know what to do!
   } else {
       now it's too late, should have written new record earlier!
   }
} 
```

相反，我们使用第二个文件，从中复制记录，在正确的时间插入新记录：

```
while (more lines to read) {
    if name in file comes after new name, and I have not yet written new name {
        write new name and score to temp file
    }
    copy name and score from input file to temp file
} 
```

之后，临时文件包含与输入文件相同的所有记录，但在正确的位置添加了新记录。

其余的伪代码只是将新文件复制回原始文件。

# javascript - 将 jquery 对话框定位在单击事件的正下方

> ID：15372008
> 
> 赞同：5
> 
> 时间：2013-03-12T20:59:42.453
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我试图在单击的按钮正下方放置一个对话框。以下：

```
$(document).on('click', '.my_buttons', function(e){
    $('#my_dialog').dialog("option", "position", [e.pageX, e.pageY]);
    $('#my_dialog').dialog('open');
}); 
```

当页面上存在具有该类名称的多个按钮时，无法正常工作。它在最后一个按钮下方显示对话框，而不是单击的那个。有什么方法可以解决这个问题，而不必在每个按钮上添加 ID 属性？

此外，当只有 1 个按钮时，上面的工作正常，它显示在该按钮下方，但这取决于我单击按钮的哪个部分。如果我单击按钮的顶角，对话框会与该按钮重叠一点。我如何使它不与单击的按钮重叠？

感谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T21:02:42.013

使用偏移量而不是事件页面，因为它们是鼠标的位置

```
$(document).on('click', '.my_buttons', function(e){
    var offest = $(this).offset();
    var height = $(this).height();
    $('#my_dialog').dialog("option", "position", [offest.left, offest.top+height]);
    $('#my_dialog').dialog('open');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:06:01.120

我也通过更换来修复它

```
e.pageX, e.pageY 
```

和

```
e.clientX, e.clientY 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-24T16:01:09.193

接受的答案对我不起作用。我正在使用 jQuery 2.2.0 和 jQuery UI - v1.11.4

```
$(document).on('click', '.my_buttons', function(e){
    $('#my_dialog').dialog("option", "position", {my: "center top+5", of: e});
    $('#my_dialog').dialog('open');
}); 
```

有关“我的”选项，请参见[.position()](http://api.jqueryui.com/position/#position-options)

# linux - 配置 ARP 年龄超时

> ID：15372011
> 
> 赞同：37
> 
> 时间：2013-03-12T20:59:52.297
> 
> 标签：linux, linux-kernel, arp

我正在尝试配置 ARP 年龄超时。我想我应该设置`/proc/sys/net/ipv4/neigh/default/base_reachable_time_ms`为所需的超时。但是，尽管我将其设置为 30000 毫秒（30 秒），但从 ARP 缓存中删除一个条目仍需要将近 10 分钟。在阅读了几篇文章后，我发现还有一些设置会影响超时：

```
/proc/sys/net/ipv4/neigh/default/gc_interval
/proc/sys/net/ipv4/neigh/default/gc_stale_time
/proc/sys/net/ipv4/route/gc_interval
/proc/sys/net/ipv4/route/gc_timeout 
```

我不确定要为这些编程什么。在 Linux中`gc_timeout`默认为 5 分钟。我将其更改为 30 秒，但我仍然没有看到该条目在`base_reachable_time/2`or中被删除`3*base_reachable_time/2`。

如何设置 ARP 缓存的过期时间？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-03-19T21:47:06.873

Linux 内核中的邻居缓存并不像人们想象的那么简单。我将尝试解释它的一些怪癖。

邻居缓存条目实际上完全从缓存中掉出来或只是被标记为陈旧/无效之间存在细微的差异。在**base_reachable_time** /2 和 3* **base_reachable_time** /2 之间的某个时间点，该条目仍将在缓存中，但它会被标记为 STALE 状态。您应该可以使用“ip -s neighbor show”查看状态，

```
pherricoxide@midigaurd:~$ ip -s neighbor list
192.168.42.1 dev eth0 lladdr 00:25:90:7d:7e:cd ref 2 used 184/184/139 probes 4 STALE
192.168.10.2 dev eth0 lladdr 00:1c:23:cf:0b:6a ref 3 used 33/28/0 probes 1 REACHABLE
192.168.10.1 dev eth0 lladdr 00:17:c5:d8:90:a4 ref 219 used 275/4/121 probes 1 REACHABLE 
```

当处于 STALE 状态时，如果我 ping 192.168.42.1，它将立即将数据包发送到 00:25:90:7d:7e:cd。大约一秒钟后，它通常会向拥有 192.168.42.1 的人发送 ARP 请求，以便将其缓存更新回 REACHABLE 状态。但是，为了让事情更加混乱，内核有时会根据来自更高级别协议的积极反馈来更改超时值。这意味着如果我 ping 192.168.42.1 并且它回复了，那么内核可能不会打扰发送 ARP 请求，因为它假设 pong 意味着它的 ARP 缓存条目是有效的。如果条目处于 STALE 状态，它也将被它碰巧看到的未经请求的 ARP 回复更新。

**现在，对于大多数情况，您只需要担心处于 STALE 状态的条目。**为什么需要将条目从缓存中完全删除？内核通过仅仅改变缓存条目的状态而不是实际删除它们并将它们添加到缓存中来付出很多努力来不破坏内存。

如果你真的坚持它不仅会被标记为 STALE，而且实际上会从邻居缓存使用的 hashmap 中删除，那么你必须注意一些事情。首先，如果条目没有被使用并且在**gc_stale_time**秒内是陈旧的，它应该有资格被删除。如果**gc_stale_time**已通过并将条目标记为可以删除，则它将在垃圾收集器运行时删除（通常在**gc_interval**秒之后）。

现在的问题是，如果**邻居条目被引用，它不会被删除**。您将遇到的主要问题是来自[ipv4 路由表](http://vincent.bernat.im/en/blog/2011-ipv4-route-cache-linux.html)的引用。有很多复杂的垃圾收集东西，但需要注意的重要一点是，路由缓存的垃圾收集器仅在很多内核上每 5 分钟（ **/proc/sys/net/ipv4/route/gc_timeout**秒）使条目过期. 这意味着必须将邻居条目标记为过时（可能需要 30 秒，具体取决于**base_reachable_time**），然后在路由缓存停止引用该条目之前必须经过 5 分钟（如果幸运的话），然后是某种组合**gc_stale_time**和_**gc_interval**在它实际被清理之前通过（因此，总的来说，5-10 分钟之间的某个地方会过去）。

总结：您可以尝试将**/proc/sys/net/ipv4/route/gc_timeout 减小**到更短的值，但是变量很多，很难全部控制。通过不过早地删除缓存中的条目（而只是将它们标记为 STALE 甚至 FAILED），我们付出了很多努力来使事情表现良好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-21T23:03:36.107

```
ip link set arp off dev eth0; ip link set arp on dev eth0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-03T02:20:15.943

这是我设置的：

```
sudo -s then enter:

echo 30 > /proc/sys/net/ipv4/neigh/default/gc_stale_time
echo 175 > /proc/sys/net/ipv4/route/gc_timeout
echo 20000 > /proc/sys/net/ipv4/neigh/default/base_reachable_time_ms
echo 30 > /proc/sys/net/ipv4/route/gc_interval 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-23T08:26:24.100

彻底清除 arp 缓存的最简单方法是关闭接口，然后再启动。显然，这有更多的含义，例如，可能会中断正在进行的 TCP 连接，暂时无法访问等。但这似乎是真正从最新内核中的 arp 缓存中删除条目的唯一方法:(

# ruby-on-rails - 如何在路由中设置自己的参数？

> ID：15372016
> 
> 赞同：0
> 
> 时间：2013-03-12T21:00:11.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在我的文件中运行一个脚本，该脚本从数据库生成内容并通过 javascript 显示它，具体取决于拉出的内容，如下所示

`<% Route.find(params[:plant_site]) do |route| %>`

但是当我输入 localhost/findme/search 单词时，我只会让它返回一个，当我检查 rails 服务器时，它会显示 LIMIT 1 我如何将它们全部拉出然后遍历它们？

好像只拉第一个

在我的路线中，我有

`match '/findme/:plant_site' => 'Locates#show'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:05:14.973

```
Route.find(params[:plant_site]) 
```

将返回它找到的第一个项目。试试这个，

```
# /app/controllers/the_controller.rb

def the_action
  @routes = Route.where(id: params[:plant_site]).all
end

# /app/views/the_controller/the_action.html.erb

<% @routes.each do |route| %>
  <%= ... %>
<% end %> 
```

**编辑：**

尽管该`id`列通常是主键列，但上述内容仍将仅返回 1 个结果。试试`Route.where(plant_site: params[:plant_site])`吧。我猜这个专栏是`:plant_site`。

**编辑：**

添加了文件名以指示代码应从 beck03076 的注释中转到何处。

# python - 当协程引发异常时会发生什么？

> ID：15372018
> 
> 赞同：1
> 
> 时间：2013-03-12T21:00:16.543
> 
> 标签：python, coroutine

我不确定以下代码中到底发生了什么：

```
def coroutine():
    lst = []
    try:
        while True:
            item = (yield lst)
            if item == 3:
                raise ValueError
            print('append {}'.format(item))
            lst.append(item)
    except GeneratorExit:
        print('GeneratorExit')

crt = coroutine()

next(crt)
print(crt.send(1))
print(crt.send(2))

try:
    print(crt.send(3))
except ValueError:
    pass

print(crt.send(4)) 
```

这输出：

```
append 1
[1]
append 2
[1, 2]

Traceback (most recent call last):
  File "D:\Documents and Settings\Brecht\Desktop\crt.py", line 25, in <module>
    print(crt.send(4))
StopIteration 
```

当使用调试器单步执行代码时， on `raise ValueError`，执行跳转到`except GeneratorExit:`，但不执行此 except 子句的主体（不打印“GeneratorExit”）。为什么不？

除此之外，我不认为我可以在协程引发异常后以任何方式恢复协程？有什么特别的理由不允许这样做吗？这至少在我的特定用例中很有用:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:03:13.320

当你抛出异常时，代码流*总是*被打断。一旦在其中抛出异常，就无法恢复中断的生成器。

来自[PEP 342（通过增强生成器的协程）](http://www.python.org/dev/peps/pep-0342/)：

> 与该`next()`方法一样，该`send()`方法返回生成器迭代器产生的下一个值，或者`StopIteration`在生成器正常退出或已经退出时引发。如果生成器引发未捕获的异常，则将其传播给`send()`'s 调用者。

至于调试器跳转到该`except`行：您只是抛出了一个异常，而解释器正在测试该异常是否被该行捕获。因为它只会捕获 a `GeneratorExit`，所以生成器会在此时退出。

# c# - 为什么我的数据表不会填充

> ID：15372022
> 
> 赞同：0
> 
> 时间：2013-03-12T21:00:21.747
> 
> 标签：c#, excel, gridview, import

我已经搜索了很长时间，但我找不到我做错了什么。

我有一个上传电子表格的网络应用程序（已验证它有效），并且应该解析电子表格并填充 GridView。看起来很简单，但它不会显示数据。

我正在测试的电子表格（作为上传；上传按预期工作）是一个简单的单选项卡电子表格，其中包含所有无聊的香草......三列，列名和一行数据（总共两行填充，注定要一旦这件事起作用，就会扩大）。选项卡名称`CRPRList`在`OleDbDataAdapter`下面使用。

我在页面上没有收到任何错误，只是没有填充 GridView。

这是 ASP.net 中的 GridView：

```
<asp:GridView ID="TopicsTbl" runat="server" 
     AllowSorting="False" 
     AllowPaging="False" 
     AutoGenerateColumns="False">
     <Columns>
         <asp:BoundField HeaderText="CR" DataField="CR" />
         <asp:BoundField HeaderText="PR" DataField="PR" />
         <asp:BoundField HeaderText="Summary" DataField="Summary" />
     </Columns>
</asp:GridView> 
```

我已经把它归结为以下代码。我的意思是我已经测试了一切。没有错误，事情似乎按预期工作......除了 GridView 不会填充：

```
 OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM [CRPRList$]", XLSConnect);
    DataSet ds = new DataSet();

    adapter.Fill(ds, "CRPRList");

    DataTable data = ds.Tables["CRPRList"];
    TopicsTbl.DataSource = data; 
```

该`XLSConnect`字符串将取决于文件是 xls 还是 xlsx：

```
 string strConn;
    if (fileType.ToLower() == "xls" || fileType.ToLower() == "xlsx") {
        strConn = (fileType == "xlsx") ? string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0\"", filePath) : string.Format("Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=\"Excel 8.0\"", filePath);

        XLSConnect = new OleDbConnection(strConn);
        return true;
    } else return false; //throw new Exception("file extension is not registering"); 
```

我错过了什么？还是我做错了什么？

我猜我的 GridView 设置不正确，或者我的电子表格解析理解不完整......不过可能还有一段路要走！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:07:56.733

你可以试试像 Jimmy 这样简单的东西

```
using (var data = new OleDbDataAdapter("SELECT * FROM [CRPRList$]", XLSConnect))
{
    var table = new DataTable();
    data.Fill(table);
    TopicsTbl.DataSource = data;
    TopicsTbl.DataBind();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:11:34.943

您必须绑定数据：

```
DataTable data = ds.Tables[0];
TopicsTbl.DataSource = data;
TopicsTbl.DataBind(); 
```

# java - Eclipse 无法启动，我没有更改任何内容

> ID：15372023
> 
> 赞同：112
> 
> 时间：2013-03-12T21:00:21.937
> 
> 标签：java, eclipse

我至少有一个月没有更新任何东西了。我刚刚正常工作，突然菜单都是空白的，所以我决定重新启动eclipse。我单击“关闭”和“确定”保存所有内容，但什么也没发生，所以我再次单击关闭并关闭了 Eclipse。我点击了eclipse，加载屏幕只闪烁并消失，然后有一条消息告诉我检查`.log`文件。从那以后，我多次重新启动电脑，尝试在安全模式下运行它并运行`eclipse.exe -clean`，但没有任何效果。

有任何想法吗？

```
!SESSION 2013-03-12 13:46:10.078 -----------------------------------------------
eclipse.buildId=I20120608-1400
java.version=1.7.0_07
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product -clean

!ENTRY org.eclipse.ui 4 4 2013-03-12 13:46:55.800
!MESSAGE An internal error has occurred.
!STACK 0
java.lang.NullPointerException
    at org.eclipse.ui.internal.Workbench.createWorkbenchWindow(Workbench.java:1228)
    ...
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.ui.workbench 4 0 2013-03-12 13:46:55.803
!MESSAGE An unexpected exception was thrown.
!STACK 0
java.lang.NullPointerException
    at org.eclipse.ui.internal.Workbench.createWorkbenchWindow(Workbench.java:1228)
    ...
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.ui 4 4 2013-03-12 13:46:55.811
!MESSAGE An internal error has occurred.
!STACK 0
java.lang.NullPointerException
    at org.eclipse.ui.internal.Workbench.createWorkbenchWindow(Workbench.java:1228)
    ...
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.osgi 2 0 2013-03-12 13:47:01.331
!MESSAGE While loading class "org.eclipse.team.svn.ui.SVNTeamUIPlugin", thread "Thread[main,6,main]" timed out waiting (5003ms) for thread "Thread[Worker-1,5,main]" to finish starting bundle "org.eclipse.team.svn.ui_1.0.0.I20120803-1700 [691]". To avoid deadlock, thread "Thread[main,6,main]" is proceeding but "org.eclipse.team.svn.ui.SVNTeamUIPlugin" may not be fully initialized.
!STACK 0
org.osgi.framework.BundleException: State change in progress for bundle "reference:file:plugins/org.eclipse.team.svn.ui_1.0.0.I20120803-1700.jar" by thread "Worker-1".
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1088)
    ...
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException
    ... 38 more
Root exception:
org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1088)
    ...
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.osgi 4 0 2013-03-12 13:47:02.259
!MESSAGE Application error
!STACK 1
org.eclipse.swt.SWTException: Failed to execute runnable (java.lang.NullPointerException)
    at org.eclipse.swt.SWT.error(SWT.java:4361)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    ... 18 more

!ENTRY org.eclipse.ui.workbench 4 2 2013-03-12 13:47:02.519
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 0
java.lang.NullPointerException
    at org.springframework.ide.eclipse.maven.internal.legacyconversion.LegacyProjectChecker.earlyStartup(LegacyProjectChecker.java:36)
    ...
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

!ENTRY org.eclipse.ui 4 4 2013-03-12 13:47:02.521
!MESSAGE Unhandled Exception

!ENTRY org.springframework.ide.eclipse.maven 4 0 2013-03-12 13:47:02.523
!MESSAGE Unable to execute early startup code for an extension
!STACK 0
java.lang.NullPointerException
    at org.springframework.ide.eclipse.maven.internal.legacyconversion.LegacyProjectChecker.earlyStartup(LegacyProjectChecker.java:36)
    ...
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

!ENTRY org.eclipse.ui.workbench 4 2 2013-03-12 13:47:02.529
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 0
java.lang.NullPointerException
    at org.springframework.ide.eclipse.osgi.targetdefinition.TargetStartup.earlyStartup(TargetStartup.java:58)
    ...
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

!ENTRY org.eclipse.ui 4 4 2013-03-12 13:47:02.531
!MESSAGE Unhandled Exception

!ENTRY org.springframework.ide.eclipse.osgi.targetdefinition 4 0 2013-03-12 13:47:02.534
!MESSAGE Unable to execute early startup code for an extension
!STACK 0
java.lang.NullPointerException
    at org.springframework.ide.eclipse.osgi.targetdefinition.TargetStartup.earlyStartup(TargetStartup.java:58)
    ...
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

!ENTRY org.eclipse.ui.workbench 4 2 2013-03-12 13:47:02.550
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in "org.springsource.ide.eclipse.commons.frameworks.ui" was unable to instantiate class "org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker".
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
    ...
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    ... 11 more
Caused by: java.lang.NullPointerException
    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.<clinit>(LegacySTSChecker.java:44)
    ... 18 more
!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-03-12 13:47:02.551
!MESSAGE Plug-in "org.springsource.ide.eclipse.commons.frameworks.ui" was unable to instantiate class "org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker".
!STACK 0
java.lang.ExceptionInInitializerError
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    ...
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.lang.NullPointerException
    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.<clinit>(LegacySTSChecker.java:44)
    ... 18 more
!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-03-12 13:47:02.551
!MESSAGE Plug-in "org.springsource.ide.eclipse.commons.frameworks.ui" was unable to instantiate class "org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker".
!STACK 0
java.lang.ExceptionInInitializerError
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    ...
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.lang.NullPointerException
    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.<clinit>(LegacySTSChecker.java:44)
    ... 18 more

!ENTRY org.eclipse.mylyn.monitor.ui 4 0 2013-03-12 13:47:02.552
!MESSAGE Monitor UI stop failed
!STACK 0
java.lang.NullPointerException
    at org.eclipse.mylyn.internal.monitor.ui.ActivityContextManager.stop(ActivityContextManager.java:150)
    ...
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.ui 4 4 2013-03-12 13:47:02.553
!MESSAGE Unhandled Exception

!ENTRY org.springsource.ide.eclipse.commons.frameworks.ui 4 0 2013-03-12 13:47:02.555
!MESSAGE Unable to execute early startup code for an extension
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in "org.springsource.ide.eclipse.commons.frameworks.ui" was unable to instantiate class "org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker".
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:188)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.lang.ExceptionInInitializerError
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    ... 11 more
Caused by: java.lang.NullPointerException
    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.<clinit>(LegacySTSChecker.java:44)
    ... 18 more
!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-03-12 13:47:02.555
!MESSAGE Plug-in "org.springsource.ide.eclipse.commons.frameworks.ui" was unable to instantiate class "org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker".
!STACK 0
java.lang.ExceptionInInitializerError
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.lang.NullPointerException
    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.<clinit>(LegacySTSChecker.java:44)
    ... 18 more

!ENTRY org.eclipse.ui.workbench 4 2 2013-03-12 13:47:02.562
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 0
java.lang.NullPointerException
    at org.springsource.ide.eclipse.commons.internal.configurator.ConfiguratorImporter.lazyStartup(ConfiguratorImporter.java:369)
    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.runStartupExtension(StartupExtensionPointReader.java:64)
    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.runStartupExtensions(StartupExtensionPointReader.java:47)
    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.earlyStartup(StartupExtensionPointReader.java:73)
    at org.eclipse.ui.internal.EarlyStartupRunnable.runEarlyStartup(EarlyStartupRunnable.java:87)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

!ENTRY org.eclipse.ui 4 4 2013-03-12 13:47:02.563
!MESSAGE Unhandled Exception

!ENTRY org.springsource.ide.eclipse.commons.ui 4 0 2013-03-12 13:47:02.565
!MESSAGE Unable to execute early startup code for an extension
!STACK 0
java.lang.NullPointerException
    at org.springsource.ide.eclipse.commons.internal.configurator.ConfiguratorImporter.lazyStartup(ConfiguratorImporter.java:369)
    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.runStartupExtension(StartupExtensionPointReader.java:64)
    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.runStartupExtensions(StartupExtensionPointReader.java:47)
    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.earlyStartup(StartupExtensionPointReader.java:73)
    at org.eclipse.ui.internal.EarlyStartupRunnable.runEarlyStartup(EarlyStartupRunnable.java:87)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

!ENTRY org.eclipse.osgi 4 0 2013-03-12 13:47:02.671
!MESSAGE An unexpected runtime error has occurred.
!STACK 0
java.lang.NullPointerException
    at org.eclipse.ui.internal.progress.BlockedJobsDialog.createBlockedDialog(BlockedJobsDialog.java:218)
    at org.eclipse.ui.internal.dialogs.WorkbenchDialogBlockedHandler.showBlocked(WorkbenchDialogBlockedHandler.java:73)
    at org.eclipse.ui.internal.dialogs.WorkbenchDialogBlockedHandler.showBlocked(WorkbenchDialogBlockedHandler.java:87)
    at org.eclipse.ui.internal.dialogs.EventLoopProgressMonitor.setBlocked(EventLoopProgressMonitor.java:144)
    at org.eclipse.core.internal.jobs.JobManager.reportBlocked(JobManager.java:1032)
    at org.eclipse.core.internal.jobs.JobManager.join(JobManager.java:907)
    at org.eclipse.equinox.internal.p2.engine.SimpleProfileRegistry.stop(SimpleProfileRegistry.java:870)
    at org.eclipse.equinox.internal.p2.core.ProvisioningAgent.unregisterService(ProvisioningAgent.java:122)
    at org.eclipse.equinox.internal.p2.core.ProvisioningAgent.removedService(ProvisioningAgent.java:183)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:956)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1)
    at org.osgi.util.tracker.AbstractTracked.untrack(AbstractTracked.java:341)
    at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:902)
    at org.eclipse.osgi.internal.serviceregistry.FilteredServiceListener.serviceChanged(FilteredServiceListener.java:107)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:861)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEventPrivileged(ServiceRegistry.java:819)
    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEvent(ServiceRegistry.java:771)
    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:225)
    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:356)
    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:306)
    at org.eclipse.equinox.internal.ds.Resolver.disposeComponentConfigs(Resolver.java:717)
    at org.eclipse.equinox.internal.ds.Resolver.disableComponents(Resolver.java:693)
    at org.eclipse.equinox.internal.ds.SCRManager.stoppingBundle(SCRManager.java:554)
    at org.eclipse.equinox.internal.ds.SCRManager.bundleChanged(SCRManager.java:233)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:847)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEventPrivileged(Framework.java:1569)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1505)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1500)
    at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:506)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:566)
    at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1207)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:592)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:257)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:215)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.suspend(InternalSystemBundle.java:284)
    at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:693)
    at org.eclipse.osgi.framework.internal.core.Framework.close(Framework.java:600)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.shutdown(EclipseStarter.java:399)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:199)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.equinox.p2.core 4 0 2013-03-12 13:47:02.673
!MESSAGE FrameworkEvent ERROR
!STACK 0
java.lang.NullPointerException
    at org.eclipse.ui.internal.progress.BlockedJobsDialog.createBlockedDialog(BlockedJobsDialog.java:218)
    at org.eclipse.ui.internal.dialogs.WorkbenchDialogBlockedHandler.showBlocked(WorkbenchDialogBlockedHandler.java:73)
    at org.eclipse.ui.internal.dialogs.WorkbenchDialogBlockedHandler.showBlocked(WorkbenchDialogBlockedHandler.java:87)
    at org.eclipse.ui.internal.dialogs.EventLoopProgressMonitor.setBlocked(EventLoopProgressMonitor.java:144)
    at org.eclipse.core.internal.jobs.JobManager.reportBlocked(JobManager.java:1032)
    at org.eclipse.core.internal.jobs.JobManager.join(JobManager.java:907)
    at org.eclipse.equinox.internal.p2.engine.SimpleProfileRegistry.stop(SimpleProfileRegistry.java:870)
    at org.eclipse.equinox.internal.p2.core.ProvisioningAgent.unregisterService(ProvisioningAgent.java:122)
    at org.eclipse.equinox.internal.p2.core.ProvisioningAgent.removedService(ProvisioningAgent.java:183)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:956)
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1)
    at org.osgi.util.tracker.AbstractTracked.untrack(AbstractTracked.java:341)
    at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:902)
    at org.eclipse.osgi.internal.serviceregistry.FilteredServiceListener.serviceChanged(FilteredServiceListener.java:107)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:861)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEventPrivileged(ServiceRegistry.java:819)
    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEvent(ServiceRegistry.java:771)
    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:225)
    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:356)
    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:306)
    at org.eclipse.equinox.internal.ds.Resolver.disposeComponentConfigs(Resolver.java:717)
    at org.eclipse.equinox.internal.ds.Resolver.disableComponents(Resolver.java:693)
    at org.eclipse.equinox.internal.ds.SCRManager.stoppingBundle(SCRManager.java:554)
    at org.eclipse.equinox.internal.ds.SCRManager.bundleChanged(SCRManager.java:233)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:847)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEventPrivileged(Framework.java:1569)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1505)
    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1500)
    at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:506)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:566)
    at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1207)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:592)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:257)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:215)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.suspend(InternalSystemBundle.java:284)
    at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:693)
    at org.eclipse.osgi.framework.internal.core.Framework.close(Framework.java:600)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.shutdown(EclipseStarter.java:399)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:199)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.270
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.273
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.274
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.276
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.277
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.279
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.280
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.282
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.283
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9

!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.284
!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.m2e.core.internal.repository.RepositoryRegistryUpdateJob 
```

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2013-06-03T16:49:50.737

我用过`eclipse -clean -clearPersistedState`，这对我有用。您将丢失窗口布局配置，但这对我来说似乎微不足道。

对于 Linux 系统，请尝试：`./eclipse -clean -clearPersistedState`

看到[Eclipse JUNO 没有启动](https://stackoverflow.com/questions/11310970/eclipse-juno-doesnt-start?rq=1)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-03-12T21:19:14.807

好的，所以我想通了。转到 yourWorkspace/.metadata/.plugins 并删除其中的所有内容。Eclipse 将启动并重新填充该文件夹。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2013-08-16T21:57:39.990

删除 workspace/.metadata/.plugins/org.eclipse.e4.workbench/ 下的 workbench.xmi 对我有用。它没有删除现有项目。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2014-04-22T19:33:36.260

这就像 mac os 或 windows 上的冠军一样。

删除位于*workspace/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi 的 workbench.xmi*。然后启动 Eclipse 或 ADT。这不会删除您的工作区或存储库。

**删除 workbench.xmi cmd：**

> rm 工作区/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-05-17T15:02:13.760

尝试：

```
$ rm YOUR_PROJECT_DIR/.metadata/.plugins/org.eclipse.core.resources/.snap 
```

原始来源：[发现平台关闭eclipse后作业仍在运行](http://www.metod.si/job-found-still-running-after-platform-shutdown-eclipse/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-12-04T18:45:57.210

我删除了文件夹workspace/.metadata/.plugins/org.eclipse.e4.workbench/中的workbench.xmi。

我收到此错误是因为构建挂起，然后我尝试退出。但是，我有未保存的更改。这会在日志文件中提示以下有关未保存的更改和未完成的作业的错误。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-12-18T13:06:56.220

今天，我遇到了同样的问题。我的日食拒绝开始。当我双击 Eclipse 图标时，我能够看到闪屏一秒钟，然后什么也没有发生。在这里尝试了大多数解决方案：删除锁定文件，重命名工作区，尝试使用不同的干净参数启动 Eclipse。我什至放了一份 Eclispe 的新副本，并尝试从一个新的工作区开始。没有！

当我的工作站在 17:45 重新启动时，我的日志显示了昨天的一堆错误。

```
!ENTRY org.eclipse.ui.workbench 4 2 2014-12-17 17:45:12.178
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 0
java.lang.NullPointerException 
```

最后，这个非常简单的更改（如下所示）将我的 Eclipse 和我的工作区一起保存了！

**解决方案：**

我编辑`eclipse.ini`并添加了以下行：

```
-vm
C:\Program Files\Java\jdk1.6.0_26\bin\javaw.exe 
```

Eclipse 又开始了，里面有我所有的项目！我希望这会有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-07-09T16:04:39.937

也许值得一提的是，当我遇到这个问题时，我遵循了 bia.migueis 的建议 - 将所有内容移出插件文件夹 - 工作区将再次打开，减去我的很多配置。但在那之后，我将所有原始文件复制/覆盖回插件文件夹并再次打开工作区：它仍然有效，我之前的设置似乎完好无损。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-14T21:18:14.127

我将位于 workspace/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi 的 workbench.xmi 移动到备份文件夹。然后启动eclipse并等待所有后台进程完成。然后我关闭了 eclipse 并将我的 workbench.xmi 的备份副本移回（覆盖了上次启动时创建的副本）。Eclipse 启动良好，我恢复了所有设置。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-06-11T17:37:22.613

如果您删除了 .metadata 目录中的所有数据。有一种快速的方法可以再次导入您的所有项目。试试这个：

文件 --> 导入 --> 常规：选择现有项目到工作区 --> 选择根目录：浏览到旧工作区文件夹（与当前工作区文件夹相同即可） --> 完成。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-08-15T18:16:00.440

我尝试了本文中发布的几个选项，但在 eclipse.ini 中使用此选项对我有用：

-Dorg.eclipse.swt.browser.DefaultType=mozilla

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-20T09:17:05.660

我尝试了上面移动插件的选项，但它不起作用。我的解决方案是删除整个 .metadata 文件夹。这意味着我失去了默认设置，不得不再次导入我的项目。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-01-29T05:24:52.590

*如果您最近一直在使用 VPN 连接，请阅读我的回答。*

今天我遇到了同样的问题，并学会了如何在不删除任何插件的情况下修复它。所以我想也许我会分享我自己的经验。

**我的问题肯定与 Spring Framework 有关**

我在互联网连接上使用 VPN 连接。 **一旦我断开了我的 VPN，一切都立即恢复正常。**

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-05-13T00:36:40.820

绝对是网络/代理的事情。我通过 wifi 和公司网关连接。删除工作区，重新安装 GGTS - 仍然挂起。关闭网络 - 启动正常。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-02-07T07:56:21.963

我有同样的问题，但我通过添加环境变量（运行->运行配置->环境变量）来解决它

```
variable : java_ipv6
value : -Djava.net.preferIPv4Stack=true 
```

# windows-runtime - 使用 GetItemsAsync 检索所有文件，而无需指定文件类型

> ID：15372027
> 
> 赞同：0
> 
> 时间：2013-03-12T21:00:39.820
> 
> 标签：windows-runtime

我正在尝试使用以下代码从我的 WinRT 设备获取文件列表：

var 文件夹 = KnownFolders.DocumentsLibrary;

var items = await folder.GetItemsAsync();

这将返回文件夹和文件的列表。问题是文件列表仅包含我已添加到 Package.appxmanifest 的扩展名的文件

有没有办法检索所有文件？喜欢 * 。* ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:17:31.263

我认为没有直接的方法可以做到这一点。根据[这篇文章](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)，它可以用图片、音乐和视频库来完成，但不能用文档库来完成

> 您必须将文件类型关联添加到您的应用清单，以声明您的应用可以在此位置访问的特定文件类型。

如果您让用户选择带有 的文件夹`FolderPicker`，您将可以访问所有项目，但是：

```
var picker = new FolderPicker();
picker.FileTypeFilter.Add(".txt");
var folder = await picker.PickSingleFolderAsync();
var items = await folder.GetItemsAsync(); 
```

用户只需执行一次就足够了。然后，您可以将文件夹添加到[`FutureAccessList`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.accesscache.storageapplicationpermissions.futureaccesslist.aspx)并存储它返回的令牌：

```
var token = StorageApplicationPermissions.FutureAccessList.Add(folder); 
```

当用户下次运行应用程序时，您可以使用令牌再次访问该文件夹：

```
folder = await StorageApplicationPermissions.FutureAccessList.GetFolderAsync(token);
var items = await folder.GetItemsAsync(); 
```

# perl - Perl 在运行时以编程方式修改 POD

> ID：15372028
> 
> 赞同：2
> 
> 时间：2013-03-12T21:00:41.640
> 
> 标签：perl, perl-pod

我为我正在处理的一些脚本编写了一个便利库。`Getopt::Long`除了提供强制性参数外，它还包含一些更简单的东西。因此，该库将许多参数添加到脚本的必需/可能的命令行参数列表中。

由于脚本还在`--help`标志上调用 pod2usage，我希望库以某种方式提供它提供给单个脚本的每个标志的定义，因此可以在调用 pod2usage 时呈现它。

例如，`--dosomething`我的库添加了一个标志，无论如何，当我运行时`a.pl --help`，它将包括由 提供的帮助定义`a.pl`，以及由库提供的定义，就像那些`--dosomething`可能`a.pl`不知道的定义一样？

有没有办法做到这一点——让一个库在运行时修改脚本的 POD？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:32:49.907

不幸`pod2usage`的是，对于这个目的来说太静态了。您可能会查看[App::Cmd](https://metacpan.org/module/App%3a%3aCmd)或[Getopt::Long::Descriptive](https://metacpan.org/module/Getopt%3a%3aLong%3a%3aDescriptive)（由 App::Cmd 使用）以获得更接近此的一些功能。

也就是说，您不需要使用 pod2usage 来打印使用语句，它只是转储脚本自己的 pod 的一种有用方法。

# php - 如何在 wordpress 的受密码保护的页面中更改登录时间 cookie？

> ID：15372031
> 
> 赞同：0
> 
> 时间：2013-03-12T21:00:54.137
> 
> 标签：php, wordpress, cookies

我知道它通常设置为 10 天，并希望它大约为 15 分钟。我在互联网上看到了很多关于某个 wp-pass 文件的答案，但似乎该文件在 wordpress 3.5 中不再存在

有谁知道如何改变这个？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:06:23.867

如果您使用最新的 wordpress，您可以使用`auth_cookie_expiration`过滤器。这样的事情会做到：

```
add_filter('auth_cookie_expiration', function($expiration){
    return 900; /*15 minutes*/
}); 
```

您必须将其添加到插件中。

# ssas - 将特定的外键字段指定为 SSAS 数据源中两个表之间的链接

> ID：15372033
> 
> 赞同：2
> 
> 时间：2013-03-12T21:00:58.997
> 
> 标签：ssas, olap, sql-server-data-tools

我对 SQL Server Analysis Services 很陌生，现在尝试构建我的第一个多维数据集（第一个除了 Adventure Works 教程）

**问题**是当存在多个选项（指向同一个第二个表的几个键）时，如何指定表中的特定字段作为到另一个表的链接。

在我的数据源中，我有一个部门表：（省略了不相关的字段）

```
| department_key (PK) | ... 
```

和这样的纪律表：

```
| discipline_key (PK) | title | department_for_key (FK) | department_of_key (FK) | ... 
```

Discipline 表中的两个外键都指向 Department 表，并且这两个约束都在 DB 中指定。它们的含义仍然完全不同。

在 SQL Server Data Tools 中构建 Discipline 维度时，我想指定哪些外键应用作维度（或整个维度）中特定层次结构的级别之间的链接，但我没有找到一种*明确地*做到这一点的方法。

有趣的是，SSDT（或 SSAS）恰好使用我现在想要的列（`department_of_key`）来关联级别。尽管如此，将来我很可能想在单独的维度（或同一维度的新层次结构）中使用第二个键，因此最好知道如何控制该过程。

虽然，我认为这个问题很简单，但到目前为止我还没有找到任何解决方案。我也有一种感觉，在专门针对 SSAS 的教程中有一些相关的东西，但我在那里找不到任何帮助。

感谢您的任何回复！

（我也将不胜感激有关更好的问题标题的任何建议=））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:00:13.100

为此，我会避免依赖 SSAS 中的关系定义 - 结果太模糊且难以调试参考您的帖子。

我将构建一个涵盖每个维度的整个范围的 SQL 视图（理想情况下仅适用于 SSAS）。这可以独立测试并以可预测的结果输入 SSAS。

使用 SQL 视图还具有使您的多维数据集免受模式更改和数据问题（例如空值）的影响。

# java - 如何将 SQLite 表行保存到数组中？

> ID：15372040
> 
> 赞同：1
> 
> 时间：2013-03-12T21:01:26.373
> 
> 标签：java, android, sqlite

我尝试了许多不同的方法来做到这一点，但基本上当我从数据库中获取所有数据时，我想将它存储在一个数组中，但我不知道如何在从数据库中读取数据时遍历索引。这是我获取数据并将其添加到数组中的方式：

```
public void makeObjects(){
    i =0;
    db.open();
    for(int j = 0; j< amount; j++)
    {
        objarray.add(o); 
    }

    Cursor c = db.fetchAllNotes();
    if (c.moveToFirst())
    {

        do {      

            objarray.get(i).setid(c.getString(0));
            objarray.get(i).settitle(c.getString(1));
            objarray.get(i).setinfo(c.getString(2));
            objarray.get(i).setlat(c.getString(3));
            objarray.get(i).setlon(c.getString(4));
            objarray.get(i).setmc(c.getString(5));

            i++;
        } while (c.moveToNext());
    }

    db.close();

} 
```

为了测试和简单，我的数据库中有两行，我有一个 for 循环，它向数组添加两个新索引，但是当我将数组的内容打印到 时`logcat`，我看到两个索引都有最后一个数据从数据库中读取，第二行两次。如何确保第一行进入索引 0，第二行进入索引 1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:05:06.987

您需要为要引用的数组的每个元素创建一个新对象，而不是让它们都引用同一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:17:39.993

> 我尝试了许多不同的方法来做到这一点，但基本上当我从数据库中获取所有数据时，我想将它存储在一个数组中

如何创建**自己的对象**来在您的数据库中显示表？该对象将具有一些属性，这些属性将显示表中的列。

这是如何将数据库中的每一行保存到对象列表中的算法：

1.  将所有行提取到`Cursor`
2.  循环`Cursor`并为每一行创建新对象并将其保存到对象列表中。

## 例子：

```
public class Foo {

   private int id;
   private String name;

   // getters and setters
} 
```

现在实现方法：

```
public List<Foo> getAll() {
   List<Foo> foos = new ArrayList<Foo>();
   Foo member = null;
   Cursor c = null;
   try {
      c = db.rawQuery("Select * from Table", null);
      if (c.moveToFirst()) {
         do {
            member = new Foo();
            member.setId(c.getInt(c.getColumnIndex("id")));
            member.setName(c.getString(c.getColumnIndex("name")));
            foos.add(member);
         } while (c.moveToNext());
      }
      return foos;
   }
   finally {
      if (c != null) {
         c.close();
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:25:11.970

我希望这可以帮助你。此函数读取数据库并将行作为对象返回。这个函数写在一个扩展 SQLiteOpenHelper 的类中。

```
ParamsBMI getTemplate(String strPersonName)
{
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.query(TABLE_BMI_PARAMS, new String[] { KEY_PERSON_NAME, KEY_GENDER_MALE, KEY_DOB_YEAR, KEY_DOB_MOY, KEY_DOB_DOM, KEY_HEIGHT_UNIT, KEY_WEIGHT_UNIT, KEY_HEIGHT_CMS, KEY_HEIGHT_FT, KEY_HEIGHT_INCHES, KEY_WEIGHT_KGS,
            KEY_WEIGHT_POUNDS }, KEY_PERSON_NAME + "=?", new String[] { strPersonName }, null, null, null, null);

    if (cursor != null)
        cursor.moveToFirst();

    ParamsBMI paramsBMI = new ParamsBMI();

    paramsBMI.setPersonName(cursor.getString(0));

    boolean bGenderMale = (cursor.getInt(1) == 1) ? true : false;
    paramsBMI.setGenderMale(bGenderMale);

    paramsBMI.setDOBYear(Integer.parseInt(cursor.getString(2)));
    paramsBMI.setDOBMonthOfYear(Integer.parseInt(cursor.getString(3)));
    paramsBMI.setDOBDayOfMonth(Integer.parseInt(cursor.getString(4)));

    paramsBMI.setHeightUnit(Integer.parseInt(cursor.getString(5)));
    paramsBMI.setWeightUnit(Integer.parseInt(cursor.getString(6)));

    paramsBMI.setHeightCms(Float.parseFloat(cursor.getString(7)));
    paramsBMI.setHeightFt(Float.parseFloat(cursor.getString(8)));
    paramsBMI.setHeightInches(Float.parseFloat(cursor.getString(9)));

    paramsBMI.setWeightKgs(Float.parseFloat(cursor.getString(10)));
    paramsBMI.setWeightPounds(Float.parseFloat(cursor.getString(11)));

    return paramsBMI;
} 
```

# django - Django storage s3 media url 是 https:// 而不是 http://

> ID：15372041
> 
> 赞同：11
> 
> 时间：2013-03-12T21:01:27.207
> 
> 标签：django, amazon-s3, django-storage

当使用 django-storage s3 提供媒体时，正在生成的媒体 url 是这样的：

```
https://mybucket.s3.amazonaws.com/myimage.jpg?Signature=5ifoyLqzmtfVNS1ovfzVvN92RH0%3D&Expires=1363124819&AWSAccessKeyId=AKIAJ7ZTU7K4SPYKGOFA 
```

由于https导致图像不显示：

```
 You attempted to reach mybucket.s3.amazonaws.com,
 but instead you actually reached a server identifying itself as *.s3.amazonaws.com.
 This may be caused by a misconfiguration on the server or by something more serious. An attacker on your network could be trying to get you to visit a fake (and potentially harmful) version of mybucket.s3.amazonaws.com. 
```

**我需要将图像作为 HTTP 而不是 HTTPS**

我的设置是：

```
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
AWS_ACCESS_KEY_ID = "AKIAJ....K4SPYKGOFA"
AWS_SECRET_ACCESS_KEY = "2Y7G98JoCRzAEp....rPoCjWZuwDaQ"
AWS_STORAGE_BUCKET_NAME = "mybucket" 
```

我尝试将 media_url 和 s3_url 设置为正常的 http，但它没有改变任何东西。

我正在使用 django 1.5

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T21:16:39.213

我会尝试将此属性添加到您的设置中：

```
AWS_S3_SECURE_URLS = False 
```

简要浏览一下 django-storages 文档后，它看起来并没有被记录，但是这个博客更多地讨论了它。 [http://www.eliotk.net/05/30/force-http-with-django-storages-and-s3boto/](http://www.eliotk.net/05/30/force-http-with-django-storages-and-s3boto/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-12T21:31:21.087

你可能可以用一个`AWS_S3_SECURE_URLS = False`. 然而，这些设置在当前版本**1.1.6**中不断变化，因此这里有一些有关相关设置的详细信息：

```
AWS_S3_SECURE_URLS = False
AWS_S3_URL_PROTOCOL = 'http'
AWS_STORAGE_BUCKET_NAME = 'mybucket'
AWS_S3_CUSTOM_DOMAIN = '%s.s3.amazonaws.com' % AWS_STORAGE_BUCKET_NAME 
```

AWS_S3_URL_PROTOCOL 是*新*方法，如果设置为空字符串，则允许协议相对 URL。为了向后兼容，您仍然需要 AWS_S3_SECURE_URLS。如果您使用的是 AWS_S3_URL_PROTOCOL，目前 AWS_S3_CUSTOM_DOMAIN 是[必需的。](http://code.larlet.fr/django-storages/src/235946fdb10d2d8dbbc0f6ac2c5bb430dc86de0b/storages/backends/s3boto.py?at=default#cl-339)这是一些关于使用 S3Boto 后端实现协议相关 URL 的开发人员[讨论](http://code.larlet.fr/django-storages/src/235946fdb10d2d8dbbc0f6ac2c5bb430dc86de0b/storages/backends/s3boto.py?at=default#cl-339)。

还值得注意的是 Django-storages 提供了一个 S3 后端以及一个不同的 S3Boto 后端。尽管您的代码确实如此，但您的问题并没有使您正在使用的问题清晰。

# android - AsyncTask 中的 ProgressDialog.show 停止执行我的程序

> ID：15372042
> 
> 赞同：1
> 
> 时间：2013-03-12T21:01:33.340
> 
> 标签：android, android-asynctask

这是我的代码原型：-

```
class something extends Activity
{
    protected void onCreate(Bundle savedInstanceState)
    {
        String str = objectofanotherthing.execute("").get();
    }

    class anotherthing extends AsyncTask
    {
        ProgressDialog Dialog;
        protected void onPreExecute()
        {
            Dialog = ProgressDialog.show(context, "Progressing", "Working on it,");
        }

        protected String doInBackground(String... params) 
        {
            ...
        }

        protected void onPostExecute(Integer result)
        { 
            Dialog.dismiss();
        }
    }
} 
```

当我执行我的代码时，我的程序似乎在 ProgressDialog.show 处停止，没有崩溃也没有错误。当我评论这部分时，程序执行得很好。我不确定可以做什么。谁能帮我这个。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:33:00.603

如果您使用 调用 AsyncTask `get()`，则会阻塞 UI 线程，并且您的应用可能会停止响应。把它`get()`叫出来`execute()`。

```
objectofanotherthing.execute(""); 
```

这意味着现在您的执行是独立于 UI 线程完成的，因此您不能期望您的 String 包含任何有用的东西。要解决这个问题，请将 AsyncTask 设置为 Activity 中的嵌套类（您的代码片段已经这样做了），`doInBackground()`返回一些有用的内容，然后`onPostExecute()`关闭对话框并设置您需要设置的任何内容。

嵌套类的替代方法是将 Activity 传递给 AsyncTask 或定义接口，但如果 Task 用于一个 Activity，则嵌套更容易。

# python - 强制 Python 函数返回类型“元组”

> ID：15372044
> 
> 赞同：-2
> 
> 时间：2013-03-12T21:01:44.370
> 
> 标签：python, django, tuples

我遇到了一个我似乎无法解决的有趣问题。我有一个非常复杂的系统，它调用格式化工具，它被定义为我们支持的每种格式的类。类名是动态确定的，值是根据我们客户的 API POST 文档格式化的。

我遇到的问题是有些值需要一个键/值对`(key, value)`，而有些需要多个对，我将它们放入一个 tuples 列表中`[(key1, value1), (key2, value2)]`。

我需要做的是获取键/值并创建一个元组并将其传递以进行交付。我不能使用字典，因为以后顺序可能很重要。

这段代码的整体结构非常庞大，因此我将尝试将其分解为小块以提高可读性。

调用函数：

```
def map_lead(self, lead):
    mapto_data = tuple()
    for offer_field in self.offerfield_set.all():
        field_name = offer_field.field.name
        if field_name not in lead.data:
            raise LeadMissingField(lead, field_name)

        formatted_list = format_value(offer_field.mapto, lead.data[field_name])

        if type(formatted_list).__name__ == 'list':
            for item in formatted_list:
                mapto_data += (item,)

        elif type(formatted_list).__name__ == 'tuple':
            mapto_data += (formatted_list)
        return mapto_data 
```

example_format_type1：

```
@staticmethod
def do_format(key, value):
    area_code, exchange, number = PhoneFormat.format_phone(value)
        return [
            (PhoneFormat.AREA_CODE_MAPTO, area_code),
            (PhoneFormat.PHONE_EXCHANGE_MAPTO, exchange),
            (PhoneFormat.VANTAGE_MEDIA_HOME_PHONE_NUMBER_MAPTO, number)
        ] 
```

example_format_type2：

```
@staticmethod
def do_format(key, value):
    if len(value) > 3:
        value = value[:3] + '-' + value[3:]
        if len(value) > 7:
            value = value[:7] + '-' + value[7:]
    return key, value 
```

我试图明确地将返回值定义`example_format_type2`为一个元组：

```
@staticmethod
def do_format(key, value):
    if len(value) > 3:
        value = value[:3] + '-' + value[3:]
        if len(value) > 7:
            value = value[:7] + '-' + value[7:]
    formatted_value = tuple()
    formatted_value += (key, value)
    return formatted_value 
```

但似乎无论我做什么，它都会被解释为`calling_function`.

所以，我总是得到`type(formatted_list).__name__ == 'list'`. 因此，如果它是一个元组，我将返回`for`循环遍历元组中的每个项目并将其作为单个值添加到`mapto_data`元组中。

有没有办法强制 Python 返回值`example_format_type2`，以便将其解释`calling_function`为元组？

编辑1：

事实证明问题出在`map_lead`我添加到`mapto_data`元组的位置。我错过了那里的尾随逗号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:06:52.263

我相信你可以只返回一个元组文字（idk，如果它被称为）？

```
>>> def test():
...     return (1, 2)
... 
>>> thing = test()
>>> thing
(1, 2)
>>> type(thing)
<type 'tuple'>
>>> type(thing).__name__
'tuple' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:20:54.753

`example_format_type2`确实返回一个元组，我很确定错误在其他地方。就像在`format_value`函数中一样。请注意，如果您使用 += 将元组添加到列表中，则结果将是一个列表：

```
>>> a = [1, 2]
>>> a += (3, 4)
>>> print a
[1, 2, 3, 4] 
```

还可以考虑检查`formatted_list`使用此语法的类型：

```
if type(formatted_list) is tuple:
  ... 
```

# c# - JSON 将对象解析为字符串 - 保留元素的顺序

> ID：15372045
> 
> 赞同：1
> 
> 时间：2013-03-12T21:01:44.757
> 
> 标签：c#, json, serialization, json.net

我有这个需要序列化为json的类：

```
[DataContract]
public class InfoRequest
{
    [DataMember]
    public string folder_id { get; set; }

    [DataMember]
    public string file_type_id { get; set; }

    [DataMember]
    public string prefix { get; set; }

    [DataMember] 
    public fileInfo[] files;

    [DataMember] 
    public termInfo[] terms;
}

[DataContract]
public class fileInfo
{
    [DataMember] 
    public string name { get; set; }
    [DataMember] 
    public string size { get; set; }
}

[DataContract]
public class termInfo
{
    [DataMember] 
    public string term_id { get; set; }
    [DataMember] 
    public string value { get; set; }
} 
```

我已经尝试过 ServiceStack.Text、NewtonSoft.Json 和 DataContractJsonSerializer。我从每个库中得到不同的结果，它们都没有保留 DataMembers 的顺序。（ServiceStack 甚至不序列化所有 DataMembers。）将相同的 InfoRequest 对象传递给每个库，我得到这些字符串：
JsonConvert：

```
{
   "files":[
      {
         "name":"Blip.txt",
         "size":"448"
      },
      {
         "name":"blip.jpg",
         "size":"71535"
      }
   ],
   "terms":[
      {
         "term_id":"1000",
         "value":"Copyright"
      },
      {
         "term_id":"1000",
         "value":"Copyright"
      }
   ],
   "folder_id":"11245",
   "file_type_id":"234",
   "prefix":"",
   "ServiceStack":{
      "folder_id":"11245",
      "file_type_id":"234",
      "prefix":""
   },
   "MS":{
      "file_type_id":"234",
      "files":[
         {
            "name":"Blip.txt",
            "size":"448"
         },
         {
            "name":"blip.jpg",
            "size":"71535"
         }
      ],
      "folder_id":"11245",
      "prefix":"",
      "terms":[
         {
            "term_id":"1000",
            "value":"Copyright"
         },
         {
            "term_id":"1000",
            "value":"Copyright"
         }
      ]
   }
} 
```

我怀疑 DataMembers 的顺序*无关紧要*，但我从服务器收到错误，并认为这可能是问题所在。
任何见解将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:29:23.853

注意[ServiceStack 的 JSON 序列](https://github.com/ServiceStack/ServiceStack.Text)化器默认只序列化**公共属性**，如果你想包括公共字段（例如它序列化“文件”和“条款”），你需要包括：

```
ServiceStack.Text.JsConfig.IncludePublicFields = true; 
```

[DataMembers 确实会影响 ServiceStack 中的序列化，](https://stackoverflow.com/a/14859968/85785)这会使所有字段都选择加入，`IgnoreDataMember`如果您想选择退出，请使用。

# asp.net-mvc-4 - ASP.NET MVC4 应用程序无法在生产环境中编译 Bootstrap.LESS，而它在开发环境中工作

> ID：15372047
> 
> 赞同：11
> 
> 时间：2013-03-12T21:01:48.953
> 
> 标签：asp.net-mvc-4, less, bundling-and-minification

我现在感觉有点卡住了。首先我用nuget

> 安装包 Bootstrap.less

也

> 安装包无点

然后，如[Rick Anderson 的博客文章中关于](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)在 asp.net mvc 中捆绑和缩小所示，我创建了一个 LessTransform-Class。我设置了 2 个几乎为空的 .less 文件并创建了一个新的捆绑包来打包它们......

```
 var lessBundle = new Bundle("~/MyLess").IncludeDirectory("~/Content/MyLess", "*.less", true);
    lessBundle.Transforms.Add(new LessTransformer());
    lessBundle.Transforms.Add(new CssMinify());
    bundles.Add(lessBundle); 
```

效果很好。然后我在主 bootstrap.less 文件中添加了一个新的 StyleBundle（它基本上使用 @import 来包含 bootstrap.less 提供的所有其他 .less 文件）......

```
 bundles.Add(new StyleBundle("~/Bootstrap").Include("~/Content/Bootstrap/less/bootstrap.less")); 
```

和引导 JavaScript 的 ScriptBundle ......

```
 bundles.Add(new ScriptBundle("~/bundles/Bootstrap").Include("~/Scripts/bootstrap/js/bootstrap-*")); 
```

包括所有已发布的 bootstrap-*.js 文件和 TADAA 一切正常。CSS 已编译，包括所有导入的 JavaScript 文件均已正确加载。

但是......所有这些只适用于开发模式

```
 <compilation debug="true" targetFramework="4.5"/> 
```

一旦我禁用调试以查看捆绑到一个文件中并且缩小是否正常工作，我就会遇到问题。

捆绑过程似乎无法将所有这些 .less 文件导入 bootstrap.less

```
/* Minification failed. Returning unminified contents.
(11,1): run-time error CSS1019: Unexpected token, found '/'
(11,2): run-time error CSS1019: Unexpected token, found '/'
(12,1): run-time error CSS1031: Expected selector, found '@import'
(12,1): run-time error CSS1025: Expected comma or open brace, found '@import'
(12,27): run-time error CSS1019: Unexpected token, found '/'
(12,28): run-time error CSS1019: Unexpected token, found '/'

 ... here go many many lines like these 

(60,25): run-time error CSS1019: Unexpected token, found ';'
(62,1): run-time error CSS1019: Unexpected token, found '/'
(62,2): run-time error CSS1019: Unexpected token, found '/'
(63,1): run-time error CSS1031: Expected selector, found '@import'
(63,1): run-time error CSS1025: Expected comma or open brace, found '@import'
(63,27): run-time error CSS1019: Unexpected token, found '/'
(63,28): run-time error CSS1019: Unexpected token, found '/'
: run-time error CSS1067: Unexpected end of file encountered
 */
/*!
 * Bootstrap v2.3.1 
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat.
 */

// Core variables and mixins
@import "variables.less"; // Modify this for custom colors, font-sizes, etc
@import "mixins.less";

... and the rest of the original bootstrap.less... no style definitions 
```

看看缩小的 bootstrap.javascript 包也让我感到困惑。在开发中加载页面后没有问题，现在在谷歌中捆绑和缩小 bootstrap.javascript 后，JavaScript 控制台状态

```
Uncaught TypeError: Cannot read property 'Constructor' of undefined 
```

我查看了几个似乎与我的问题密切相关的主题，我尝试了一些事情，但到目前为止没有成功。

非常感谢任何可以了解我的情况并指出我遗漏或做错了什么的人。最好的问候，英戈

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T00:02:23.477

如果您想将引导程序用作较少文件，并且不想再担心在您的开发机器和生产机器上捆绑和缩小，您可以考虑使用以下方法。

> 注意：如果您只在启用调试的情况下使用 Less-Files，则不需要所有这些；但是，只要您希望您的应用程序在 Windows Azure 这样的生产服务器上运行，并且仍然希望只修改较少的文件而不必关心捆绑和缩小过程......那么......那么这种方法将工作

因此，为了解决我觉得有点卡住的问题，我不得不以不同的方式解决问题，并且不得不修改（参见后面的修改 2）我想拥有的“BundleSource”。

***所以不要忘记阅读靠近这个答案底部的第二个修改/警告！***

* * *

***修改 1)***

因此，工作的第一个也是更大的部分是让无引导文件的捆绑工作。为了做到这一点，我冒昧地分叉了我在网上找到的一段代码（如果你只需要一个更少的文件包）本身就解决了我的问题......除非你可能想要使用或能够使用具有多个基本目录的多个较少捆绑...所以我实际上找到了对我有很大帮助的方法...

> ... 因此，我非常感谢[Kristof Claes 的博客条目](http://www.kristofclaes.be/blog/2012/09/03/using-asp-net-bundling-and-minification-with-less-files/)“使用 ASP.NET 捆绑和压缩 LESS 文件”，我偶然而高兴地偶然发现。
> 
> 像我一样，他尝试使用 Scott Hanselman 在演讲中展示的 LessMinify.cs 来处理 1 个 LESS 文件，而不是仅仅将每个文件捆绑在一个充满 LESS 文件的目录中。
> 
> 但正如他在博客条目中所展示的那样，他必须稍微扩展整个捆绑程序。这样，他提出的解决方案可以捆绑 1 个更少的文件，该文件使用导入来加载其他更少的文件。但是当他静态实现添加到源目录的路径时，可以在其中找到较少的文件......无论您定义哪个较少的捆绑包，都必须在同一目录中选择一个较少的文件......

这就是我冒昧地进一步扩展他的解决方案的地方。我创建了一个文件 LessBundling.cs，内容如下：

```
using dotless.Core.configuration;
using dotless.Core.Input;
using MvcApplication2.Utils;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Runtime.CompilerServices;
using System.Web;
using System.Web.Hosting;
using System.Web.Optimization;

namespace MvcApplication2.Extensions
{
    // create Less-Minifier (use Type to define source directory of less files [see below at BootstrapFileReader])
    public class LessMinify<TFileReader> : CssMinify
        where TFileReader : IFileReader
    {
        public LessMinify() {}

        public override void Process(BundleContext context, BundleResponse response)
        {
            var config = new DotlessConfiguration()
            { 
                MinifyOutput = true,
                ImportAllFilesAsLess = true,
                CacheEnabled = false,
                LessSource = typeof(TFileReader)
            };

            response.Content = dotless.Core.Less.Parse(response.Content, config);
            base.Process(context, response);
        }
    }

    // create a LessStyleBundler to allow initializing LessBundle with a single less file that uses imports
    public class LessStyleBundle<TFileReader> : Bundle
        where TFileReader : IFileReader
    {
        public LessStyleBundle(string virtualPath)
            : base(virtualPath, new LessMinify<TFileReader>()) {}

        public LessStyleBundle(string virtualPath, string cdnPath)
            : base(virtualPath, cdnPath, new LessMinify<TFileReader>()) { }
    }

    // create abstract VirtualFileReader from dotless-IFileReader as a Base for localized 
    internal abstract class VirtualFileReader : IFileReader
    {
        public byte[] GetBinaryFileContents(string fileName)
        {
            fileName = GetFullPath(fileName);
            return File.ReadAllBytes(fileName);
        }

        public string GetFileContents(string fileName)
        {
            fileName = GetFullPath(fileName);
            return File.ReadAllText(fileName);
        }

        public bool DoesFileExist(string fileName)
        {
            fileName = GetFullPath(fileName);
            return File.Exists(fileName);
        }

        public string GetFullPath(string path)
        {
            return  HostingEnvironment.MapPath(SourceDirectory + path);
        }

        public abstract string SourceDirectory {get;}
        // implement to return Path to location of less files
        // e. g. return "~/Content/bootstrap/less/";
    }

    // create BootstrapFileReader overwriting the Path where to find the Bootstrap-Less-Files
    internal sealed class BootstrapFileReader : VirtualFileReader
    {
        public override string SourceDirectory 
        {
            get { return "~/Content/bootstrap/less/"; }
        }
    }

} 
```

那么这实际上是做什么的呢？

1.  LessMinify 扩展了 CssMinify 类，因此带来了缩小 css 文件所需的一切
    *   与“通常”捆绑的重要区别在于，您创建了一个新的 Dotless-Configuration，其 LessSource 定义为 typeof(TFileReader) ...
    *   通过使用 <TFileReader> 您可以定义一个包含源目录的类，bundler/minifier 将在其中查找要考虑的较少文件
2.  LessStyleBundle 扩展了 Bundle，因此带来了捆绑文件所需的一切
    *   在这个类中，我再次使用 TFileReader，因为这是 LessMinify(er) 将被实例化的地方
3.  VirtualFileReader 实现了 IFileReader，它是一个无点接口，定义了解析较少文件所需的所有方法，并提供在何处查找要导入的文件的信息
    *   为了扩展 Kristof 对问题的解决方案，我添加了抽象属性 SourceDirectory... 要求我还创建 VirtualFileReader 抽象类

现在通过该设置，您可以根据需要创建任意数量的 LessFileReader。你只需要扩展抽象的 VirtualFileReader 就可以了

1.  BootstrapFileReader 扩展 VirtualFileReader
    *   BootstrapFileReader 的唯一目的是为 SourceDirectory 提供一个属性获取器，bundler/minifier 将在其中找到要导入的较少文件

好吧，就我而言，Bootstraps Less-Files 位于 ~/Content/bootstrap/less 中，如果您安装“twitter.bootstrap.less”-nugget，这应该是默认位置。

如果您的应用程序中有另一个目录，其中包含一个较少的文件，该文件又具有多个导入，您只需创建一个扩展 VirtualFileReader 的新类并为 SourceDirectory 定义属性获取器以返回相应的路径

如果您想在生产环境中使用此捆绑方法实际捆绑和缩小文件，您只需将 LessStyleBundle 实例添加到 BundlerConfig.cs：

```
bundles.Add(new LessStyleBundle<BootstrapFileReader>("~/bundles/BootstrapCSS")
    .Include("~/Content/bootstrap/less/bootstrap.less")); 
```

当然，您的 _Layout.cshtml 也应该知道准备好的捆绑包

```
@Styles.Render("~/bundles/BootstrapCSS") 
```

* * *

***修改 2)***

现在我还必须添加小修改才能使其正常工作

在我第一次尝试捆绑 bootstrap.less 时，我使用了这个

```
bundles.Add(new LessStyleBundle<BootstrapFileReader>("~/Content/BootstrapCSS")
    .Include("~/Content/bootstrap/less/bootstrap.less")); 
```

我想我会在 CSS/Less 的路由中使用 Content，在 Javascript 的路由中使用 Bundles。

但这不是开箱即用的。ASP.net 不允许创建以**~/Content**开头的 Bundle 。您将收到 403 授权失败。因此，最简单的解决方案是使用**~/bundles**代替：

```
bundles.Add(new LessStyleBundle<BootstrapFileReader>("~/bundles/BootstrapCSS")
    .Include("~/Content/bootstrap/less/bootstrap.less")); 
```

由于这个问题没有很多真正的解决方案，如果您打算将 twitter bootstrap 集成到您的 asp.net mvc4 应用程序中，我希望这至少对你们中的一些人有所帮助。

最好的问候，英戈

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-25T12:26:28.947

我已经修改了 Ingo 解决方法以摆脱每个目录的自定义类。此外，我添加了适当的异常输出（因为否则所有异常都是静默的，并且在出现错误时您只会得到空文件）。

```
public class LessTransform : IItemTransform
{
    [ThreadStatic]
    internal static string CurrentParsedFileDirectory;

    public string Process (string includedVirtualPath, string input)
    {
        CurrentParsedFileDirectory = Path.GetDirectoryName (includedVirtualPath);

        var config = new DotlessConfiguration
        {
            MinifyOutput = false,
            CacheEnabled = false,
            MapPathsToWeb = true,
            ImportAllFilesAsLess = true,
            LessSource = typeof (VirtualFileReader),
            Logger = typeof (ThrowExceptionLogger)
        };

        return Less.Parse (input, config);
    }
}

internal class VirtualFileReader : IFileReader
{
    public bool UseCacheDependencies
    {
        get { return false; }
    }

    public byte[] GetBinaryFileContents (string fileName)
    {
        return File.ReadAllBytes (GetFullPath (fileName));
    }

    public string GetFileContents (string fileName)
    {
        return File.ReadAllText (GetFullPath (fileName));
    }

    public bool DoesFileExist (string fileName)
    {
        return File.Exists (GetFullPath (fileName));
    }

    public string GetFullPath (string path)
    {
        if (string.IsNullOrEmpty (path))
            return string.Empty;

        return HostingEnvironment.MapPath (path[0] != '~' && path[0] != '/'
                                               ? Path.Combine (LessTransform.CurrentParsedFileDirectory, path)
                                               : path);
    }
}

public class ThrowExceptionLogger : Logger
{
    public ThrowExceptionLogger (LogLevel level) : base (level)
    {
    }

    protected override void Log (string message)
    {
        if (string.IsNullOrEmpty (message))
            return;

        if (message.Length > 100)
            message = message.Substring (0, 100) + "...";

        throw new LessTransformException (message);
    }
}

[Serializable]
public sealed class LessTransformException : Exception
{
    public LessTransformException (string message) : base (message)
    {
    }
} 
```

用法：

```
bundles.Add (new StyleBundle ("~/styles-bundle/common")
    .Include ("~/content/bootstrap/bootstrap.less", new LessTransform ())); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T08:04:53.397

我今天遇到了同样的问题，我找到了解决方法，但我也想要一个更好的解决方案。我还尝试使用 dotless 和自定义转换，就像你所拥有的那样。

解决方法：

**预建事件：**

```
"$(SolutionDir)packages\dotless.1.3.1.0\tool\dotless.compiler.exe" "$(ProjectDir)Content\less\bootstrap.less" 
```

这将创建一个`bootstrap.css`文件，然后您可以将其包含为常规文件`CSS`而不是`LESS`.

这个解决方案并不理想，因为每次更新 dotless 时都必须更新构建事件，并且让包处理它也更干净。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T08:46:15.200

我真的非常推荐安装[WebEssentials 2012](http://vswebessentials.com/)。

它将从您的 .less 生成一个 css 文件和一个缩小的 css 文件，您可以改为引用 css。每次您对 .less 进行更改时，它都会自动更新 css，因此无需记住任何预构建步骤或任何东西......

安装 WebEssentials 时，您还将获得其他甜蜜的功能，例如 CoffeeScript、TypeScript 和 LESS 的预览。JSHint，自动缩小和更多“好东西”！

# windows-ribbon-framework - 图像透明度不起作用

> ID：15372048
> 
> 赞同：0
> 
> 时间：2013-03-12T21:01:50.720
> 
> 标签：windows-ribbon-framework

我正在为 Windows 桌面使用 Windows 8 RTM 和 Visual Studio Express 2012。我正在尝试编写一个`UIRibbon`在 Visual C++ 中使用的应用程序。（因为我只有 Express 版本，所以我无法访问 MFC；请不要在您的回答中使用它。）

问题与我在功能区中使用的图标有关。因为这个项目需要 Windows 7 兼容性，所以我不能使用 PNG 图像；我被老式的 BMP 卡住了。问题是，虽然一些 BMP 显示正确，但大多数图像周围都有黑色边界框。我怀疑问题与 BMP 文件有关，不在功能区 XML 文件或代码中。

我从 Internet 下载的正确显示的 BMP 作为我改编的示例的一部分。无法正确显示的 BMP 我从 ICO 文件中提取，然后使用`System.Drawing.Bitmap`.NET API 转换为 32 位图像。（这个转换过程是在一个单独的程序中作为我的构建过程的一部分完成的，而不是在运行时。）

我的问题是：以这种方式更改 BMP 的位深度会影响图像中的颜色吗？而且，如果是这样，任何人都可以指出一个可以将 PNG 文件转换为在 Windows 中正常工作的 32 位 BMP 文件的**免费**`UIRibbon`工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T17:39:16.123

您在这里说的是[Windows 功能区框架](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371191%28v=vs.85%29.aspx)吗？如果是这样，您将无法使用 PNG，因为该框架仅支持 Windows 7 的 BMP。在 Windows 8 中，您也可以使用 PNG。有关详细信息，请参阅有关 M [SDN 的文章](http://msdn.microsoft.com/en-us/library/windows/desktop/dd316921%28v=vs.85%29.aspx)。

对于将您的 PNG 转换为兼容的 BMP 文件的免费工具，您应该查看“ [Windows Ribbon Framework for Delphi](http://www.bilsen.com/windowsribbon/index.shtml) ”附带的可视化设计器。

您可以简单地将 XML 标记加载到编辑器中并添加图片。如果需要，编辑器随后会将添加的文件转换为 BMP。您还可以使用编辑器检查您的功能区定义是否正确。它生成有效的“Windows Ribbon Framework”XML 标记，因此您可以使用任何其他语言（例如 C++、C# 或 Delphi）的标记文件进行进一步的应用程序开发。

# c# - 为什么按钮的事件处理程序没有触发？

> ID：15372049
> 
> 赞同：0
> 
> 时间：2013-03-12T21:01:52.993
> 
> 标签：c#, event-handling, windows-ce

我有一个带有事件处理程序的按钮；在设计器中单击 2 次会将我带到代码。处理程序无处被脱钩/分离。

我期望运行的一些代码显然不是，所以我在处理程序中放了一堆 MessageBox.Show()，即使是在最开始时，但它们都没有显示（注意：我无法单步执行代码；我必须这样做（arggghhhh））。

这是一些代码：

```
private void btnFind_Click(object sender, System.EventArgs e) // Find and list Records
{
    MessageBox.Show("Made it into btnFind_Click 0"); //TODO: Remove after debugging
    try
    {
        if (barcodeScanner != null)
        {
            // Turn off the listening
            barcodeScanner.BarcodeScan -= new BarcodeScanner.BarcodeScanEventHandler(barcodeScanner_BarcodeScan);
        }
            MessageBox.Show("Made it into btnFind_Click 1"); //TODO: Remove after debugging . . . 
```

是什么阻止了这段代码被执行？

## 更新

基于 Mike C 的想法，我在 button_close 处理程序中添加了一个 MessageBox。当我点击它时，它会触发，但*只有在其他代码首先运行之后*；在这种情况下，其他代码不会阻止 Close_Click （最终）触发；但是，使用“查找”按钮，它完全抢占了它...... IOW，当我单击它时，我在最后看到来自“关闭”按钮的消息，但是当我单击它时，我从未在“查找”按钮处理程序中看到任何消息。 ..

## 更新 2

哦，我的兰达/说不是这样，乔！发生的事情是在表单的重载构造函数中启动了一个事件，并且不知何故，这个事件总是在那个时候被触发（在单击查找按钮之后）。我看到的消息抢占了按钮事件处理程序中的所有内容，发生在由 processBarcode() 调用的方法中，该方法由 processBarcode1() 调用，该方法由barcodeScanner_BarcodeScan1() 调用，barcodeScanner_BarcodeScan( )，这是在 frmEntry 的重载构造函数中设置的。如果以前的编码员*打算*让我发疯，他就不会做得更好了。

我想“那里”或“这里”有如此多的维护工作是有原因的：因为有太多坏的代码，而且因为那些把它弄得一团糟的猫在上面抓了一堆沙子然后走开了。

这段代码充满了“嗯？！？@#$%^？！？” 那些奇怪的旋转根本没有被评论的时刻，但是有*这样*的评论：

```
// Check connection
checkConnection(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:07:00.897

问题可能是`Click`按钮的事件未正确订阅。如果没有类似的线

```
this.btnFind.Click += new System.EventHandler(this.btnFind_Click); 
```

在表单的设计器文件中，就是这样。

# javascript - 如何正确使用 Backbone.js 的后端 RESTFUL API？

> ID：15372056
> 
> 赞同：0
> 
> 时间：2013-03-12T21:02:22.140
> 
> 标签：javascript, asp.net, rest, backbone.js

在过去的 2 个月里，我一直在使用 Backbone.js，并且我已经成功完成了大部分示例应用程序。现在，我遇到了一个我似乎不太容易掌握的话题。每当我开始构建应用程序时，整理我的 Backbone.js 代码时都没有问题，但是当涉及到 REST API 时，我就迷失了。我已经阅读了许多文章、教程等。我还尝试按照指南和教程（使用 mongodb、node.js、express 和backbone.js）构建了几个应用程序，但这些都没有启发我。我的主要目标是开发中小型数据驱动的单页应用程序。所以，切入正题，我最近遇到了 ASP.NET Web API，我觉得它很有趣。但我找不到任何关于 Backbone.js + WEB API 的有用集成。我的骨干在哪里。

谢谢！

此致，

# desire2learn - 学生角色无法访问 D2L 等级类别路线

> ID：15372058
> 
> 赞同：1
> 
> 时间：2013-03-12T21:02:33.380
> 
> 标签：desire2learn

以学生身份访问 D2L Valence API 时，`/d2l/api/le/1.1/(D2LID: orgUnitId)/grades/categories/`相关`GET`请求返回一个`HTTP 404`错误，其中`orgUnitId`是一个类。

该路线`GET /d2l/api/le/1.1/(D2LID: orgUnitId)/grades/values/myGradeValues/`有效，但是类别和成绩在 JSON 层次结构中显示在同一级别，并且成绩类别和成绩之间没有任何关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:46:12.367

关于您问题的第一部分：拨打电话以获取成绩类别信息的用户必须以有权查看成绩类别数据的角色注册课程提供。查看成绩类别数据所需的角色权限可能与获取自己的成绩值所需的权限不同。但是，返回的 '404' 很奇怪，并且表明`orgUnitId`您传入的 没有找到：如果用户没有检索类别的权限，那么您会期望返回 '403' 错误，而不是一个'404'。

在您问题的第二部分，获取我的成绩值的调用返回一个平面`GradeObject`结构数组。您可以通过检查属性来区分等级对象类型`GradeObjectTypeName`：对于等级类别，它应该说`Category`; 对于其他成绩对象类型，它将具有该成绩对象的类型名称（即`Numeric`、`PassFail`等）。

# sql - T-SQL Move From Test To Production Dynamically

> ID：15372063
> 
> 赞同：0
> 
> 时间：2013-03-12T21:02:56.617
> 
> 标签：sql, sql-server, tsql

GOAL: Pass in two parameters (a task and a primary key) to generate a list of tables. Take the list, and then dynamically construct insert statements with the aim to copy data from a production environment to a test environment. In other words, do programmatically what 'EDIT TOP 200' does...but a lot faster.

PROBLEM: The query spins and runs indefinitely. There should only be about 20-30 tables that the query will need to construct insert statements for...so I let it go for about 2 minutes before concluding that I probably have an infinite loop somewhere. Note that I'm not even inserting anything into the test database at this point.

At the moment I'm just trying to display the VALUES portion of the insert statements using the RAISERROR call. While the endgame isn't implemented, I'm hoping someone can help me figure out the problem.

Thus far:

```
USE MAINDB
DECLARE @PK int = 1000,
 @TaskName nvarchar(50) = 'TASK', 
 @curTable nvarchar(75),
 @curRow nvarchar(75),
 @tmpStatement nvarchar(500),
 @tmpInsert nvarchar(500)

RAISERROR('Retrieving Tables',0,1) WITH NOWAIT
 DECLARE TableCursor CURSOR LOCAL FOR 

    SELECT DISTINCT TOP 2 PRMPTTBL.tTable as PromptTable
       FROM THING1 TK INNER JOIN THING2 SC ON TK.tkNo=SC.tkNo
              INNER JOIN Component EL on EL.scNo=SC.scNo             
              LEFT OUTER JOIN Field FLD1 on FLD1.cfNo=EL.cfNoPrompt1            
              LEFT OUTER JOIN MyTableTable MTTTBL on MTTTBL.tbNo=FLD1.tbNo

       WHERE EL.CustNo=@Custno
              AND (MTTTBL.tTable is not NULL AND MTTTBL.tTable not in('OneTableIDontWant'))
              AND MTTTBL.tTable not like '%[_]d%' --eliminate any tables that are actually views
              AND EL.cfNo > 0  
              AND TK.Description like @TaskName

RAISERROR('Table',0,1) WITH NOWAIT
OPEN TableCursor
FETCH NEXT FROM TableCursor INTO @curTable
WHILE @@FETCH_STATUS = 0
BEGIN
   SET @tmpStatement = 'SELECT TOP 5 * FROM [MYCONN].TEST_MYDB.dbo.' + @curTable + ' where PK=' + Cast(@PK as nvarchar(10))
   EXEC (@tmpStatement)

   IF @@ROWCOUNT = 0 
   BEGIN
        DECLARE RowCursor CURSOR LOCAL FOR
        SELECT COLUMN_NAME
        FROM REALDB.INFORMATION_SCHEMA.COLUMNS
        WHERE TABLE_NAME = @curTable

        RAISERROR('Row',0,1) WITH NOWAIT
        OPEN RowCursor
        FETCH NEXT FROM RowCursor INTO @curRow
        WHILE @@FETCH_STATUS = 0
        BEGIN
          SET @tmpInsert = @tmpInsert + ',' + @curRow
        END

        IF RIGHT(@tmpInsert,1) = ',' SET @tmpInsert = LEFT(@tmpInsert,LEN(@tmpInsert) -1)
        RAISERROR(@tmpInsert,0,1) WITH NOWAIT

        CLOSE RowCursor
        DEALLOCATE RowCursor
        SET @tmpInsert = ''
        FETCH NEXT FROM RowCursor INTO @curRow
   END

   FETCH NEXT FROM TableCursor INTO @curTable
END

CLOSE TableCursor
DEALLOCATE TableCursor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:36:14.410

```
 WHILE @@FETCH_STATUS = 0
    BEGIN
      SET @tmpInsert = @tmpInsert + ',' + @curRow
    END 
```

is an infinite loop, because you don't `FETCH NEXT` inside it.

# css - 隐藏在背景后面的css元素

> ID：15372069
> 
> 赞同：2
> 
> 时间：2013-03-12T21:03:25.400
> 
> 标签：css

我在没有显示 div 的地方遇到了这个问题。代码很简单，仅在测试：

```
<html>
<head>
    <title>Main</title>

    <style>
        .simple-div {
            -moz-border-radius: 15px;
            border-radius: 15px;
            height: 200px;
            width: 200px;
        }
    </style>
</head>
<body style="background:url('backgrounds/cupcakeBG.jpg') 50% -105px repeat;">
    <div style="background: #C8BBBE; top:0px; left:0px; width:100%; height:70px; position: fixed; -moz-border-radius: 15px; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">

    </div>

    <div style="-moz-border-radius: 15px; border-radius: 15px; height: 200px; width: 200px;">

    </div>

</body>
</html> 
```

如何将第二个 div 保持在背景图像上方？它目前没有显示在屏幕上，但我可以通过 chrome 使用 Inspect 元素看到它在后面突出显示。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:06:47.800

将`position: relative`和添加`z-index: 9999;`到您希望在顶部看到的 div 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:07:29.933

我会使用 position:relative 或 position:absolute，在两个 div 上都有一个 z-index。

```
<div style="background: #C8BBBE; top:0px; left:0px; width:100%; height:70px; position: fixed; z-index: 0; -moz-border-radius: 15px; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
</div>

<div style="-moz-border-radius: 15px; border-radius: 15px; height: 200px; width: 200px; position: relative; top: 0; left: 0; z-index: 15; background-color:#ff0000;">
    test
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:08:54.647

您的第二个 div 不包含任何内容，也不包含背景、边框等，因此屏幕上没有任何可见的显示。它就在那里，它在你的身体背景之上。

如果您还打算将它显示在上面的固定元素之上，则需要它`z-index`更高。你需要给它一个`position`不`static`让它使用的`z-index`（在这里，我们将使用`relative`）：

```
<body style="background:url('backgrounds/cupcakeBG.jpg') 50% -105px repeat;">
    <div style="background: #C8BBBE; top:0px; left:0px; width:100%; height:70px; position: fixed; z-index:1; -moz-border-radius: 15px; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">

    </div>

    <div style="background:#F00; position:relative; z-index:2; -moz-border-radius: 15px; border-radius: 15px; height: 200px; width: 200px;">

    </div>

</body> 
```

请注意，在这个特定示例中，`z-index`可以相等，因为它们在同一个堆叠父级中，并且固定 div 是第一个。但是，我发现最好更明确一些，并给第二个 div 一个实际更高的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T21:12:53.420

一个选项取决于您的目标是添加`position:absolute`到第二个 div 的样式属性。

# algorithm - 在 0-1 数组中找到所有 1“在左侧”的 1 的数量？

> ID：15372070
> 
> 赞同：1
> 
> 时间：2013-03-12T21:03:35.220
> 
> 标签：algorithm, math, binary-search

一个数组由 N 个许多 1 和 0 组成，所有 1 都在任何 0 之前。在数组中查找没有 1。很明显，二分查找是 O(log N)。是否有算法在 O(log(number of 1's)) 时间内执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T21:09:57.650

你其实可以及时做到，1s的个数`O(lg m)`在哪里。`m`我不会给出整个算法，因为这看起来像家庭作业，但这里有一个提示：尝试“反转”二分搜索，以便扩大搜索区域而不是缩小搜索区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:06:22.133

如果你只是迭代这个数组，你计算所有的 1，最后找到 0 你做了 N+1 步，所以在我看来它是 O(n+1) 算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:46:18.273

```
class OneZero
{

    public static int binary_search (byte[] array, int start, int end, int value)
    {

        if (end <= start) return -1;

        if (Math.floor((start+end)/2) == value) return Math.floor((start+end)/2);

        return binary_search (array, start, Math.floor((start+end)/2)-1, value);

    }

    public static int nbOfOnes (byte[] array, int value)
    {

        return (binary_search(array, 0, array.length,value)+1);

    }

    public static void main ()
    {

        byte[] arr = { 1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0 };

        System.out.println(" number of 1s is: "+nbOfOnes(arr,1));

    }

} 
```

# c# - Treeview 实现子节点丢失

> ID：15372071
> 
> 赞同：0
> 
> 时间：2013-03-12T21:03:39.017
> 
> 标签：c#, asp.net, treeview, xmldocument

```
private void AddNode(XmlNode inXmlNode, TreeNode inTreeNode)
 {
    XmlNode xNode;
    TreeNode tNode;
    XmlNodeList nodeList;
    int i = 0;
    if (inXmlNode.HasChildNodes)
    {
        nodeList = inXmlNode.ChildNodes;
        for (i = 0; i <= (nodeList.Count - 1); i++)
        {
            xNode = inXmlNode.ChildNodes[i];
            if (null != xNode)
            { 
                inTreeNode.ChildNodes.Add(new TreeNode(xNode.Attributes[0].Value));                        
                tNode = inTreeNode.ChildNodes[i];  
                AddNode(xNode, tNode);
            }
        }
    }
    else
    {
        inTreeNode.Text = inXmlNode.InnerText.ToString();
    }
} 
```

但是我只得到父节点并且没有添加子节点。在浏览了各个站点后，我了解到这是错误

```
inTreeNode.Nodes.Add(new TreeNode(xNode.Attributes[0].Value));                        
                        tNode = inTreeNode.Nodes[i]; 
```

但我没有得到 inTreeNode.Nodes 选项。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:15:08.270

节点集合处于树视图级别并尝试在[此处查看实现](https://stackoverflow.com/questions/7640376/adding-parent-and-child-nodes-in-treeview-from-sql-server-2008?rq=1)

# c# - 异步操作后如何返回UI线程

> ID：15372072
> 
> 赞同：1
> 
> 时间：2013-03-12T21:03:41.563
> 
> 标签：c#, windows-8, windows-phone-8, task-parallel-library, portable-class-library

我正在使用 MVVM 模式为 Windows Store 和 Windows Phone 8 开发同一个应用程序的两个版本。每个应用程序都有自己的视图。Model 和 ViewModel 在 Portable Class Libraray 中共享。我正在使用 TPL 任务在模型中执行异步操作。由于 Portable Class Library 的限制，我不能使用 async 和 await 关键字。

任务完成后，我想回到 UI 线程并更新一些属性（这将导致 ViewModel 和 View 也更新）。

在我看来，这似乎是一个很常见的情况，所以我有点困惑为什么它会变得如此困难。

我尝试了两种不同的方法：

**一个**（不起作用）

在开始操作之前保存对调度程序的引用

```
TaskScheduler scheduler = TaskScheduler.FromCurrentSynchronizationContext(); 
```

然后将其传递给`ContinueWith`方法。

```
myTask.ContinueWith(t => myTaskCompleted(t.Result), scheduler); 
```

在我看来，这似乎是一个很好的解决方案，但不起作用。myTaskCompleted 仍然在不同的线程中执行。

**第二**

现在我尝试使用

```
Dispatcher.RunAsync(CoreDispatcherPriority.Normal, handler); 
```

因为我不能直接使用 PCL 中的 Dispatcher，所以我将对它的引用（隐藏在包装器中）传递给模型中的几乎每个对象。（就像在这个[答案](https://stackoverflow.com/questions/14427340/update-ui-thread-from-portable-class-library)中一样）这终于奏效了，但它非常复杂和丑陋。

所以我的问题是：

1.  哪种方法可以返回到 Portable Class Libraray 中的 UI 线程？
2.  我在尝试**一**中的错误是什么？

我知道这个话题已经有很多问题了，但不幸的是，没有什么能真正解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T11:42:20.713

TPL 将使用线程池中的一个线程，而 UI 线程是“主线程”，它不在线程池中，并且永远无法在其上运行任务。使用*ContinueWith*函数将从线程池中获取另一个线程来执行您的代码。您面临的问题的核心在于 Windows Phone 不会对属性更改进行排队，而是会直接尝试更新视图。在您的代码中的某处，您应该有一个*Changed*函数来广播属性更改。我会用我的：

```
public void Changed(string Key) {
    // Check if the property changed has subscribers.
    if (PropertyChanged != null) {
        // Invoke the property changed.
        PropertyChanged(this, new PropertyChangedEventArgs(Key));
    }
} 
```

这个*Changed*函数在 WPF 应用程序下可以正常工作，因为 WPF 会将属性更改排队并在下一次 UI 框架更新时处理它们。由于 Windows Phone 没有，我们需要建立一个模式来在运行时改变这种行为。我创建了一个名为*Dispatcher*的属性，我允许在运行时设置它。我所有的广播现在都从*Changed 更改*为*Dispatcher*。

```
private Action<string> _Dispatcher;
public Action<string> Dispatcher {
    get {
        if (_Dispatcher == null) {
            return Changed;
        }
        return _Dispatcher;
    }
    set {
        _Dispatcher = value;
    }
} 
```

所以现在我们可以在运行时在我们的 Windows Phone 应用程序中更改*Dispatcher 。*我们需要编写一个函数来推迟更改，直到 UI 线程处于活动状态以广播更改。我在一个扩展中这样做了，所以在 ViewModel 上附加 UI 线程安全会更容易一些。运行时更改将简单地使用 Windows Phone *Dispatcher*在 UI 线程上安排广播。实现如下：

```
public static void Attach(this ViewModelStore ViewModelStore, DependencyObject DependencyObject) {
    // Set the changed event dispatcher.
    ViewModelStore.Dispatcher = (Key) => {
        // Begin invoking of an action on the UI dispatcher.
        DependencyObject.Dispatcher.BeginInvoke(() => {
            // Raise the changed event.
            ViewModelStore.Changed(Key);
        });
    };
} 
```

*ViewModelStore*是我一直用于所有视图模型的通用类，因此该函数允许我将线程安全广播机制附加到所有视图模型。*DependencyObject*是一个 UI 组件，例如视图。现在，您真正需要做的就是在视图模型上调用*attach 。*

```
ProviderViewModel.Attach(this); // This is inside a Page. 
```

所有广播都没有委托给 UI 线程，而是调用 UI 进入的下一帧并相应地更新所有内容。您不必像这样担心线程安全，但您需要记住在您的 Windows Phone 应用程序中*附加*视图模型的新实例。如果还有其他问题，请告诉我，祝您好运！

# groovy - Geb Reporter / Extension 以检索测试状态

> ID：15372076
> 
> 赞同：2
> 
> 时间：2013-03-12T21:04:00.683
> 
> 标签：groovy, junit, webdriver, spock, geb

我正在尝试通过利用[geb](http://www.gebish.org/)替换一些自定义的 java selenium 扩展。当我尝试在云中使用网格（即[SauceLabs](https://saucelabs.com)）时，我遇到了一些障碍。当我的测试完成时，最好发回更新以指示测试是失败还是成功。要利用它，我需要 RemoteWebDriver 实例中的 sessionId。这可以在自定义[Reporter](http://www.gebish.org/manual/current/api/geb/report/Reporter.html)中获得，但是我无法确定此界面是否成功。由于我正在扩展[GebReportingSpec](http://www.gebish.org/manual/current/api/geb/spock/GebReportingSpec.html)，因此我尝试创建自己的自定义版本，该版本具有自定义 Junit 规则来跟踪成功或失败：

```
public class TestSuccess extends TestWatcher {
  boolean success;
  String message;

  @Override
  protected void starting(Description d) {
    message = d.getMethodName();
  }

  @Override
  protected void succeeded(final Description description) {
    System.out.println("Test Success [succeeded] " + description);
    this.success = true;
  }

  @Override
  protected void failed(final Throwable e, final Description description) {
    System.out.println("Test Success [failed] " + description);
    this.success = false;
  }

  public boolean isSuccess() {
    return success;
  }

  @Override
  public String toString() {
    return message + " success: <" + success + ">.";
  }
} 
```

然后我将其添加到我的 CustomReportingSpec：

```
class CustomReportingSpec extends GebReportingSpec {
  /* I also tried creating this as a RuleChain with:
   * @Rule TestRule chain = RuleChain.outerRule(
             super._gebReportingSpecTestName).around(new TestSuccess());
   * however, this results in a NPE.  Placing the super rule in the around 
   * still results in a NPE.
   */
  @Rule public TestSuccess _gebTestSuccesswatcher = new TestSuccess();

  // I never see this called
  void report() {
    System.out.println("Custom Reporting Spec: " + _gebTestSuccesswatcher + "\t")
    super.report()
  }
} 
```

我还尝试在自定义记者中进行设置：

```
public CustomReporter extends ScreenshotAndPageSourceReporter implements Reporter {
  @Rule
  public TestSuccess _gebTestSuccesswatcher = new TestSuccess();

  @Override
  public void writeReport(Browser browser, String label, File outputDir) {
    System.out.println("Custom Reporter: " + _gebTestSuccesswatcher);
    super.writeReport(browser, label, outputDir)
  }
} 
```

但是，无论我的测试是否失败，似乎都会调用观察者上的成功方法。这是我的示例测试：

```
class OneOff extends CustomReportingSpec {
  def "Check One off"() {
    when:
      go "http://www.google.com"
    then:
      1 == 2
  }
} 
```

和输出：

```
Custom Reporter: null success: <false>.
Test Success [succeeded] Check One off(OneOff) 
```

如您所见，成功方法在此失败测试完成后被调用。如果我修改测试以通过（即 1 == 1），这是我的输出：

```
Custom Reporter: null success: <false>.
Test Success [succeeded] Check One off(OneOff) 
```

我有什么方法可以让这条规则在自定义报告器中正常工作？或者有没有办法在扩展中获取浏览器实例？我已按照[本指南](http://ldaley.com/post/971946675/annotation-driven-extensions-with-spock)创建自定义注释和侦听器，但我无法访问 Browser 对象。我试图在浏览器的声明中添加一个@Shared，但它并没有在 Geb 配置中拉取那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:00:18.933

由于 Spock 支持的已知限制，您的`TestSuccess`课程无法正常工作`TestRule`。由于 Spock 和 JUnit 的测试执行模型之间存在细微差别，即使测试失败，`base.evaluate()`从 a调用也不会在 Spock 中引发异常。`TestRule`在许多情况下，这不会产生影响，但`TestWatcher`它会产生影响。

这是 Spock 规则支持中唯一已知的限制，希望我们能在某个时候找到克服它的方法。使用`MethodRule`.

如果您想在 JUnit 规则的帮助下实现您的要求（我认为这很好），`MethodRule`无论如何可能是更好的选择。相反`TestRule`，`MethodRule`提供对测试实例的访问，这将允许您使用 获取会话 ID `browser.driver.sessionId`。

# visual-studio - Visual Studio 项目中的 If 语句

> ID：15372077
> 
> 赞同：4
> 
> 时间：2013-03-12T21:04:10.857
> 
> 标签：visual-studio, visual-studio-2012, msbuild

我的 Visual Studio 项目中有这个

```
<Target Name="BeforeBuild">
    <Message Text="Compiling TypeScript files" />
    <Message Text="Executing tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
    <Exec Command="tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" />
  </Target> 
```

`<Target Name="BeforeBuild"></Target>`如果配置是调试并且平台是 AnyCPU，我想在其中执行这些东西。这是可能的吗？如果可以，它是如何完成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T21:07:53.803

尝试以下

```
<Target Name="BeforeBuild" Condition="'$(Configuration)' == 'Debug' And '$(Platform)' == 'AnyCPU'"> 
```

稍微花哨的版本

```
<Target Name="BeforeBuild" Condition="'$(Configuration)|$(Platform)' == 'Debug|AnyCPU'"> 
```

# iphone - 如何在第一张图片启动时删除状态栏

> ID：15372078
> 
> 赞同：0
> 
> 时间：2013-03-12T21:04:16.573
> 
> 标签：iphone, ios, launching-application

我想知道在启动应用程序时启动第一张图像时如何删除状态栏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:05:30.453

您只需在 Xcode > 摘要 > 状态栏中选中相应的框。

![在此处输入图像描述](../Images/ac1fdea837d82ecb7dd201e84f8ebd5f.png)

# xml - Scala XML 节点（带有命名空间）属性不可访问

> ID：15372082
> 
> 赞同：1
> 
> 时间：2013-03-12T21:04:28.763
> 
> 标签：xml, scala, namespaces

嗨，

我正在尝试从此 XML Node/Elem 获取 attrID。

```
scala> (desc(0) \ "_")(0)
res81: scala.xml.Node = <cor:attribute cor:attrDataType="int" cor:attrID="singleEventID"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cor="http://rdm.campusonline.at/">883819995</cor:attribute>

scala> (desc(0) \ "_")(0).attributes
res82: scala.xml.MetaData =  cor:attrDataType="int" cor:attrID="singleEventID"

scala> (desc(0) \ "_")(0).attribute("cor:attrID")
res83: Option[Seq[scala.xml.Node]] = None

scala> (desc(0) \ "_")(0).attribute("""attrID""")
res85: Option[Seq[scala.xml.Node]] = None 
```

如果我手动删除命名空间，它工作得很好。

```
scala> val test4 = <attribute attrDataType="int" attrID="singleEventID" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cor="http://rdm.campusonline.at/">883819995</attribute>
test4: scala.xml.Elem = <attribute attrID="singleEventID" attrDataType="int" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cor="http://rdm.campusonline.at/">883819995</attribute>

scala> test4.attributes
res96: scala.xml.MetaData =  attrID="singleEventID" attrDataType="int"

scala> test4.attribute("attrID")
res98: Option[Seq[scala.xml.Node]] = Some(singleEventID) 
```

我如何在不手动删除命名空间的情况下使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:26:33.097

您需要`attribute`像这样使用其他方法

```
(desc(0) \ "_")(0).attribute("http://rdm.campusonline.at/", "attrID") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T17:47:20.197

此解决方案将为您提供字符串形式的属性

```
val CoreNs = http://rdm.campusonline.at
(desc(0) \ "_") \@ s"{$CoreNs}:attrID" 
```

# matlab - 八度反向传播实现问题

> ID：15372089
> 
> 赞同：4
> 
> 时间：2013-03-12T21:04:51.263
> 
> 标签：matlab, neural-network, octave, backpropagation

我编写了一个代码来实现我遇到问题的最速下降反向传播。我正在使用[机器 CPU 数据集](http://www.dcc.fc.up.pt/~ltorgo//Regression/DataSets.html)并将输入和输出缩放到范围 [0 1]

matlab/octave中的代码如下：

### 最速下降反向传播

```
%SGD = Steepest Gradient Decent

function weights = nnSGDTrain (X, y, nhid_units, gamma, max_epoch, X_test, y_test)

  iput_units = columns (X);
  oput_units = columns (y);
  n = rows (X);

  W2 = rand (nhid_units + 1, oput_units);
  W1 = rand (iput_units + 1, nhid_units);

  train_rmse = zeros (1, max_epoch);
  test_rmse  = zeros (1, max_epoch);

  for (epoch = 1:max_epoch)

    delW2 = zeros (nhid_units + 1, oput_units)'; 
    delW1 = zeros (iput_units + 1, nhid_units)';

    for (i = 1:rows(X))

      o1 = sigmoid ([X(i,:), 1] * W1); %1xn+1 * n+1xk = 1xk
      o2 = sigmoid ([o1, 1] * W2); %1xk+1 * k+1xm = 1xm

      D2 = o2 .* (1 - o2);
      D1 = o1 .* (1 - o1);
      e = (y_test(i,:) - o2)';

      delta2 = diag (D2) * e; %mxm * mx1 = mx1
      delta1 = diag (D1) * W2(1:(end-1),:) * delta2;  %kxm * mx1 = kx1

      delW2 = delW2 + (delta2 * [o1 1]); %mx1 * 1xk+1 = mxk+1  %already transposed
      delW1 = delW1 + (delta1 * [X(i, :) 1]); %kx1 * 1xn+1 = k*n+1  %already transposed

    end

    delW2 = gamma .* delW2 ./ n;
    delW1 = gamma .* delW1 ./ n;

    W2 = W2 + delW2';
    W1 = W1 + delW1';

    [dummy train_rmse(epoch)] = nnPredict (X, y, nhid_units, [W1(:);W2(:)]);
    [dummy test_rmse(epoch)] = nnPredict (X_test, y_test, nhid_units, [W1(:);W2(:)]);
    printf ('Epoch: %d\tTrain Error: %f\tTest Error: %f\n', epoch, train_rmse(epoch), test_rmse(epoch));
    fflush (stdout);

  end

  weights = [W1(:);W2(:)];
%    plot (1:max_epoch, test_rmse, 1);
%    hold on;
  plot (1:max_epoch, train_rmse(1:end), 2);
%    hold off;
end 
```

### 预测

```
%Now SFNN Only

function [o1 rmse] = nnPredict (X, y, nhid_units, weights)

  iput_units = columns (X);
  oput_units = columns (y);
  n = rows (X);

  W1 = reshape (weights(1:((iput_units + 1) * nhid_units),1), iput_units + 1, nhid_units);
  W2 = reshape (weights((((iput_units + 1) * nhid_units) + 1):end,1), nhid_units + 1, oput_units);

  o1 = sigmoid ([X ones(n,1)] * W1); %nxiput_units+1 * iput_units+1xnhid_units = nxnhid_units
  o2 = sigmoid ([o1 ones(n,1)] * W2); %nxnhid_units+1 * nhid_units+1xoput_units = nxoput_units

  rmse = RMSE (y, o2);
end 
```

### 均方根函数

```
function rmse = RMSE (a1, a2)
  rmse = sqrt (sum (sum ((a1 - a2).^2))/rows(a1));
end 
```

我还使用 R RSNNS 包训练了相同的数据集`mlp`，训练集（前 100 个示例）的 RMSE 约为 0.03 。但在我的实现中，我无法达到低于 0.14 的 RMSE。有时错误会随着更高的学习率而增长，并且没有任何学习率能让我的 RMSE 低于 0.14。另外我提到的一篇论文报告了火车组的 RMSE 约为 0.03

我想知道代码的问题在哪里。我遵循了 Raul Rojas 的书，并确认一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:44:09.323

在反向检测代码中的行

```
 e = (y_test(i,:) - o2)'; 
```

是不正确的，因为这`o2`是训练集的输出，我发现与测试集的一个示例不同`y_test`。该行应该如下所示：

```
 e = (y(i,:) - o2)'; 
```

它正确地找到了当前模型的预测输出与相应示例的目标输出之间的差异。

我花了 3 天时间才找到这个，我很幸运地找到了这个阻止我进行进一步修改的该死的错误。

# javascript - 简单的新闻提要：没有服务器端语言

> ID：15372099
> 
> 赞同：0
> 
> 时间：2013-03-12T21:05:35.320
> 
> 标签：javascript, jquery, css

我有一个定期更新的新闻提要。我目前让网站使用 Python 根据仅包含该新闻更新的标题和文本的文本文件重新生成页面。例子：

> 1.这是一个标题
> 
> 这是一些代表今天新闻的文本，等等。我现在只是在输入一些东西，使它看起来像一个段落。
> 
> 2.这也是一个标题
> 
> 这是一些代表今天新闻的文本，等等。我现在只是在输入一些东西，使它看起来像一个段落。

有没有更优雅的方法可以用一些非 PHP/服务器端语言来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:21:04.093

看看@xml-parsing：

[http://www.w3schools.com/xml/xml_parser.asp](http://www.w3schools.com/xml/xml_parser.asp)

思路如下：

*   您首先创建一个 XML 文件，它是您的“新闻提要”
*   然后创建一个使用 javascript 解析 xmlfile 并将其加载到 DOM 的 html 页面
*   你输出文件的内容

但是，如果您已经在使用 python，为什么不使用 python 创建/读取 xml 文件？还是用python动态生成文件？

# php - 我在 sql 中使用来自两个不同表的两个 sql 字段来填充选择框

> ID：15372100
> 
> 赞同：-1
> 
> 时间：2013-03-12T21:05:42.760
> 
> 标签：php, html, sql

这是我的 sql 查询：

```
select count(b.code) as count_pt, a.id from event.dbo.dxcode a

left outer join event.dbo.patient_dg() b on a.id = b.diagcode

group by a.id 
order by count_pt desc 
```

第二个字段“id”是我需要用来填充选择框的排序数据的字段。

有没有办法隐藏正在返回的第一个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:07:03.133

只是不要选择它：

```
SELECT a.id
FROM ...
ORDER BY count(b.code) 
```

或者只是在您获取 PHP 代码中的行时不要使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:18:12.800

通过您的 PHP 代码控制哪些数据进入您的`select`. 让我们假设数据库中的所有行都在关联数组中`$rows`：

```
$h = '<select name="myselect" id="myselect">';

foreach ($rows as $row) {

    $h.="<option value=\"{$row['id']}\">{$row['somenameorsomething']}</option>";

}

$h.='</select>';

echo $h; 
```

# pharo - 在 UI 外使用形态步法

> ID：15372103
> 
> 赞同：2
> 
> 时间：2013-03-12T21:05:52.930
> 
> 标签：pharo

我想让一个类响应形态“步骤”消息 - 但该类不需要（直接）显示......所以它不是一个 Morph

有没有办法在变形之外使用此消息，或者是否有没有显示 UI 的变形？

感谢

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:43:50.727

World doOneCycle 可能会有所帮助。

UI 进程反复调用 World doOneCycle。你也可以那样做。只需确保您在主线程中执行此操作即可。

# apache - .htaccess 重定向但并非总是如此

> ID：15372107
> 
> 赞同：0
> 
> 时间：2013-03-12T21:06:16.003
> 
> 标签：apache, .htaccess, redirect

我在制作工作的 .htaccess 文件时遇到了一些问题。我将图像和 .css 文件存储在 /inc/ 文件夹中，例如[http://example.com/inc/style.css](http://example.com/inc/style.css)

现在，我希望所有不以[http://example.com/inc/](http://example.com/inc/)开头的 URL “重定向”到[http://example.com/](http://example.com/)，所以如果你调用[http://example.com/hello/fire/](http://example.com/hello/fire/)，该 URL 应该仍在您的地址栏中，但它会加载[http://example.com/](http://example.com/)。因此，地址栏中的 URL 不得更改。

有人知道这是如何工作的吗？

马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:05:28.987

尝试：

```
RewriteEngine On

# This prevents the rewrite engine from looping
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

# If URI starts with "/inc/" do nothing (passthrough)
RewriteRule ^/?inc/ - [L]

# Otherwise if URI is at least 1 character (not "/"), rewrite to "/"
RewriteRule . / [L] 
```

# jquery - ASP.NET MVC 4：无法修改 jQuery Unobtrusive Ajax

> ID：15372108
> 
> 赞同：14
> 
> 时间：2013-03-12T21:06:18.400
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, visual-studio-2012, unobtrusive-ajax

使用`ASP.NET MVC 4`和`NuGet`管理包。

升级到`jQuery 1.9.1`via后，`NuGet`我开始收到`JavaScript`有关删除`live()`.`jQuery 1.9.x`

我在 VS.NET 中按 F5 以调试模式运行，进入登录页面，得到以下信息：

![错误 Microsoft JScript](../Images/0e6f7108535d2ed0da4cbba60bb0a0e4.png)

找到这个 StackOverflow 答案：[https](https://stackoverflow.com/a/14512797) ://stackoverflow.com/a/14512797并对`~\Scripts\jquery.unobtrusive-ajax.js`.

我的**`~\Scripts\jquery.unobtrusive-ajax.js`**：

```
 $(document).on("click", "a[data-ajax=true]", function (evt) {
       ...
    });
    $(document).on("click", "form[data-ajax=true] input[type=image]", function (evt) {
       ...
    });
    $(document).on("click", "form[data-ajax=true] :submit", function (evt) {
       ...
    });
    $(document).on("submit", "form[data-ajax=true]", function (evt) {
       ...
    }); 
```

我还物理删除**`jquery.unobtrusive-ajax.min.js`**并用于`WebGrease 1.3.0`从我更新**`~\Scripts\jquery.unobtrusive-ajax.js`**的 .

但是，由于某种原因，我不使用该`.live()`功能的更改并没有坚持。我尝试停止 VS.NET 在其下运行 MVC 应用程序的 IIS Express 8.0 网站 (localhost:63798)。

还尝试在按 F5 再次以调试模式运行之前执行 Build->Clean Solution、Build->Rebuild Solution。

如果有人以前经历过这种情况并有任何见解，我将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T22:07:33.123

[Microsoft jQuery Unobtrusive Ajax](https://www.nuget.org/packages/Microsoft.jQuery.Unobtrusive.Ajax/)包已在版本 2.0.30116.0 中修复以解决此问题。调用`.live()`更改为使用`.on()`。

尝试升级 NuGet 包以获取最新版本。

但是，使用 jQuery Migrate 包的建议是一个很好的方法，可以在其他插件或您自己的代码中发现与 jQuery 1.9+ 中的更改不兼容的问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-12T21:19:42.520

`live()`已在 jQuery 1.9 中与其他一些功能一起被删除。

如果您需要支持已删除的功能，您还需要添加包含已删除功能的 jQuery 迁移文件。

添加类似于下面的参考应该包括您需要的所有功能：

```
<script src="http://code.jquery.com/jquery-migrate-1.1.1.js"></script> 
```

调试模式下的迁移文件还会向您的控制台添加警告，在您使用任何已删除的功能时通知您。这将帮助您在进行过程中慢慢替换它们，最终您可以仅使用 jQuery 1.9 及更高版本来删除迁移文件引用。

有关迁移到 jQuery 1.9 的所有详细信息，请参阅以下 jQuery 博客文章。

*   [**jQuery Core 1.9 升级指南**](http://jquery.com/upgrade-guide/1.9/)
*   [**jQuery 1.9 和 2.0 — TL；DR 版**](http://blog.jquery.com/2012/07/01/jquery-1-9-and-2-0-tldr-edition/)
*   [**jQuery 1.9.1 发布**](http://blog.jquery.com/2013/02/04/jquery-1-9-1-released/)
*   [**jQuery Migrate 1.1.1 发布**](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)
*   [**在 GitHub 上迁移：将旧的 jQuery 代码迁移到 jQuery 1.9+**](https://github.com/jquery/jquery-migrate/#readme)

# eclipse - BB10如何生成config.pri文件

> ID：15372113
> 
> 赞同：3
> 
> 时间：2013-03-12T21:06:31.307
> 
> 标签：eclipse, blackberry-10, qnx

是否有脚本或工具可以为 BB10 项目生成 config.pri 文件？每当刷新项目或更改目录时，Momentics IDE 都会自动为您执行此操作。不幸的是，我正在通过命令行工具进行部署和编译（它是一个运行测试的自动化脚本）。

没有 config.pri 文件，我无法“制作”。一个简单的解决方案是跟踪 github 上的文件以及项目的源代码，但由于文件上有时间戳，它会导致许多烦人的合并冲突。

有任何想法吗？我宁愿自己不编写脚本来解析所有目录并自己积累头文件和源文件。由于 Momentics IDE 执行此操作，因此必须有一个它调用或使用的脚本。Momentics 基于 Eclipse，有什么方法可以查看 IDE 正在调用哪些命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:38:56.790

`config.pri`只是项目主文件中包含的一个附加`.pro`文件。因此，如果您能够控制`.pro`文件，您可能根本不需要`config.pri`，并且可以安全地从`.pro`文件中删除此包含。例如，在早期的 BB10 SDK 版本中`config.pri`根本不存在，后来被添加。

`.pro`文件是生成平台和环境依赖的主要文件，`Makefiles`用于构建项目，所以我不确定是否有一些工具可以自动管理它。它*最初*可以通过调用生成，`qmake -project`但我不确定是否有任何控制台工具允许您在之后自动管理它。

从技术上讲，只有当您的项目结构或构建系统选项发生更改时，您才应该修改此文件，所有其他内容都以独立于平台的方式完成。

# javascript - Backbone - 在 jsfiddle 控制台中访问

> ID：15372114
> 
> 赞同：1
> 
> 时间：2013-03-12T21:06:33.690
> 
> 标签：javascript, backbone.js, jsfiddle

我正在使用事件系统，我想在控制台中运行一些快速命令。

我注意到全局变量 Backbone 在 www.jsfiddle.net 的 JavaScript 窗口中可用，但在控制台中不可用。

[这是小提琴。](http://jsfiddle.net/ezj2r/1/)

```
console.log('hello');
console.log(Backbone); 
```

这与我习惯的行为不同。

当我在控制台中输入 Backbone （我在 FF 14 中）时，我得到：

`ReferenceError: Backbone is not defined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:10:34.677

这就是 iframe（或一般的框架）的乐趣所在。您拥有的控制台面板很可能附加到父站点而不是包含您的代码（以及`Backbone`对象）的 iframe

# php - PHP - 在用户输入的时间执行命令

> ID：15372116
> 
> 赞同：0
> 
> 时间：2013-03-12T21:06:34.520
> 
> 标签：php, time

我想要达到的目标如下：

用户在文本字段中输入时间，例如：“13:45”，该时间将保存在一个变量中，当达到这个时间时，它应该执行一个命令。（每天在输入的时间！）

这可能吗？如果是：如何？:-)

我读过“Cronjob”，但如果我理解正确，这只会提供输入执行任何东西的修复时间的可能性。

提前致谢。

# c#-4.0 - 如何返回空向导

> ID：15372117
> 
> 赞同：2
> 
> 时间：2013-03-12T21:06:34.960
> 
> 标签：c#-4.0

我如何在 guid 中返回 null 而不是返回 Guid.empty。这是代码：

```
ConsumerID = (subList == null ? Guid.Empty : subList.ConsumerID) 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T21:07:32.113

[`Guid`](http://msdn.microsoft.com/en-us/library/system.guid.aspx)类型是 a ，`struct`所以它不能有`Null`值。

改为使用[`System.Nullable<Guid>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)，甚至更好，`Guid?`.

```
var guid = (Guid?)null; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-18T11:30:22.813

return new Guid[0] 将返回 uuid 类型的新空数组

# gcc - 使用新编译器时应更新的环境变量

> ID：15372120
> 
> 赞同：2
> 
> 时间：2013-03-12T21:06:47.593
> 
> 标签：gcc, environment-variables

假设系统管理员在我构建软件的机器上提供了新版本的 gcc 编译器`/some/path`（所有类型的软件，包括开源、第三方工具、我自己的程序等）：

我通常更新以下三个环境变量`$PATH`，`$LD_LIBRARY_PATH`并且`$MANPATH`根据我的理解是与通用构建工具（例如，等）或脚本接口的标准`autoconf`做法`cmake`。

```
setenv MY_GCC /some/path

setenv PATH $MY_GCC/bin:$PATH
setenv LD_LIBRARY_PATH $MY_GCC/lib64:$LD_LIBRARY_PATH
setenv MANPATH $MY_GCC/share/man:$MANPATH 
```

在这里我有一个快速的问题：真的有理由更新`LD_LIBRARY_PATH`（为什么程序会链接到编译器？）。

但更一般地说，**在安装新编译器时应该更新哪些环境变量以保证正确的构建环境**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:07:40.343

这取决于。

通常，您不需要设置任何环境变量，除了`PATH`有一个适当的构建环境（如果您使用 IDE，甚至可能没有必要，尽管您可能必须告诉 IDE 在哪里可以找到编译器，如果它住在一个意想不到的非标准位置）。

如果您使用类似（或 CMAKE，或任何类似的东西），特别是如果您在系统上有多个编译器版本（或`autoconf`交叉编译器），您可能希望将变量设置为合理的默认值，以确保（和如果您想要其他东西，请相应地修改它们）。 尽管如果您的编译器将其目标附加到其名称（如在大多数构建中），这可能不是必需的。至少，它对我来说非常好，没有做任何特别的事情。`CC``CXX`

如果英语不是您的母语并且您的 GCC 是在语言环境支持下构建的（如果您问我，这是有史以来最愚蠢的想法），您可能希望设置`LC_ALL`为“C”。否则，如果您在论坛上询问编译器问题，您会注意到您的“不可读”错误消息不会为您提供太多帮助。

如果除了普通硬盘之外您还有一个 ramdisk（或 SSD），但您的项目位于普通硬盘上，您可能需要设置`TMPDIR`（即使您总是使用 编译`-pipe`，因为这有时似乎会出于某种原因创建临时文件我不明白）。

如果您有要使用的库的非标准位置，*则可以*设置`LIBRARY_PATH`，但我不建议这样做。最好有您的构建脚本（或 IDE 中的项目设置），以便将这些位置提供给命令行上的链接器（或通过`configure`类似的东西传递`--with-foo-path=...`）。这保证了您的项目*可以在任何地方和任何地方*构建，而无需其他人使用一些未知的、晦涩的环境变量来表演魔术。也是如此`C_INCLUDE_PATH`。

# ruby-on-rails - Rails 中的 has_many，belongs_to 问题

> ID：15372125
> 
> 赞同：0
> 
> 时间：2013-03-12T21:06:57.817
> 
> 标签：ruby-on-rails, has-many, belongs-to

我正在尝试创建一个包含许多电影的导演列表（每部电影属于一个导演）：

```
class Director < ActiveRecord::Base
  attr_accessible :director

  has_many :movies
end 
```

* * *

```
class Movies < ActiveRecord::Base
  attr_accessible :director_id, :title, :rating, :boxoffice

  belongs_to :director
end 
```

* * *

我的架构如下所示：

```
ActiveRecord::Schema.define(:version => 20130312174246) do

  create_table "directors", :force => true do |t|
    t.string   "director"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "movies", :force => true do |t|
    t.integer  "director_id"
    t.string   "title"
    t.string   "rating"
    t.integer  "boxoffice"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end

end 
```

* * *

在 director 控制器中显示：

```
 def show
    @director = Director.find(params[:director_id])
    @movies = @director.movies
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @director }
    end
  end 
```

* * *

我最终想点击一位导演并查看他或她导演的所有电影，以及电影各自的收视率和票房收入。目前我收到此错误：找不到没有 ID 的 Director

Rails 的新手，所以我不确定如何解决这个问题。这是我想做的正确设置吗？如果没有，我应该如何改变它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:08:04.620

您应该让导演使用`params[:id]`，而不是使用`params[:director_id]` 试试这个：

```
@director = Director.find(params[:id]) 
```

要查看导演制作的所有电影，请执行嵌套路由：

```
resources :directors do
  resources :movies
end 
```

要使所有操作在 中起作用，`MovieController`您必须遵循嵌套路由语法。在这里找到它：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)或在网络上找到僵尸 2 教程幻灯片的导轨，在那里也得到了很好的解释。

# html - CSS，容器高度比预期的太小，有什么解决办法吗？

> ID：15372126
> 
> 赞同：1
> 
> 时间：2013-03-12T21:06:59.657
> 
> 标签：html, css, positioning

我正在制作一个教育页面，我遇到了一个我无法真正弄清楚如何解决的问题。正如您在此处看到的：[jsFiddle](http://jsfiddle.net/akazui/aYDwN/1/)黄色框比左侧的蓝色边框大得多，我需要蓝色边框与黄色框（邮件示例）一直向下，就像左侧的橙色虚线边框一样。有没有办法用`CSS`, 和解决它`HTML`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:47:02.777

您的代码中有大量错误。

您不能为超过 1 个元素提供相同的 ID: `#col-2`。

你给了一个 div 类`.example`，然后你给了它的子段落相同的类，所以你给了每个段落一个高度，所以父级取了那个高度，这就是为什么边框没有拉伸，因为这个元素只有`32px height`.

所以...

```
.example {
    /* background-image: url(../images/note_bg-line.jpg) repeat-y; */
    background-color: yellow;
} 
```

然后给段落另一个具有`32px height`.

您指定了这样的段落...

```
<p class="p example"></p> 
```

删除它`p example`并在 CSS 中使用它：

```
.example p {
        padding-top: 19px;
    padding-left: 70px;
    margin: -19px 0 0 0;
        height:32px;
} 
```

你会得到**[想要的效果...](http://jsfiddle.net/6pXvt/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:20:02.643

使用示例容器类的高度就可以了。当您希望它像橙色边框一样一直向下移动时，它可以`height: 295px;`工作。 [http://jsfiddle.net/xbcBz/1/](http://jsfiddle.net/xbcBz/1/)

```
.example-container {
    border-left: dotted 5px #2491F5;
    padding:5px;
    height: 295px;
} 
```

# google-app-engine - GAE App.yaml - src 和构建静态文件的单独目录

> ID：15372130
> 
> 赞同：0
> 
> 时间：2013-03-12T21:07:14.550
> 
> 标签：google-app-engine, backbone.js, r.js

如果存在另一个目录，是否可以选择性地覆盖 Google App Engine [app.yaml文件中的静态文件目录？](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Pattern_Handlers)我有一个源目录（未缩小）和一个构建目录（缩小并连接）。如果存在，我希望 Google App Engine 自动使用 build 目录而不是 src 目录。这样我就可以使用 src 目录进行开发，然后创建一个构建并部署它。然后，如果我删除构建目录，GAE 会返回从 src 目录提供我的静态文件。

我需要这样做的原因是因为我正在构建一个使用 Backbone.js 和 Require.js 作为模块的应用程序。我需要能够[优化](http://requirejs.org/docs/optimization.html#wholeproject)我的代码和部署，而无需每次都更改我的 app.yaml 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:27:25.127

我对我当前的系统非常满意，我的框架在模板中使用不同的路径指向源 javascript 文件。然后在启动时，通过检查 os.environ 和 get_application_id() 的组合，我会自动检测我是在本地 dev_appserver 上运行，还是在 GAE 上的测试 appid 或生产 appid 下运行。

进入下一步，您很可能希望积极缓存您的缩小 JS，在这种情况下，您将无法强制客户端更新新版本。典型的解决方法是在缩小的 js 文件名更新时附加一个哈希或日期字符串。这也是您需要在框架/模板层而不是 app.yaml 中执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:24:28.563

我会在模板层执行此操作 - 当您渲染包含资产链接的模板时，请检查是否存在缩小版本。如果是，则链接到那个 - 否则，链接到未缩小的版本。

如果您在未创建构建的情况下意外部署，这也会有所帮助——您将只提供未优化的资产。

# c# - WinRT c#从文件夹资产加载一个sqlite数据库

> ID：15372132
> 
> 赞同：0
> 
> 时间：2013-03-12T21:07:25.767
> 
> 标签：c#, database, sqlite, windows-8, windows-runtime

我想在启动时从文件夹 Assets 加载一个预制 sqlite 数据库，并将其复制到应用程序的本地状态中。

我尝试了很多事情，每次遇到“拒绝访问”或“找不到文件”时。

你知道怎么做吗？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:12:43.310

这是 Win 8 RT 的一个奇怪的怪癖。我可能猜想您的 Sqlite 数据库有一个特殊的扩展名，例如“.db”……我使用的一种解决方法是对资产中的数据库使用“.txt”扩展名。

这适用于我的系统而不会损坏文件。我在 Sqlite 数据库浏览器中检查了数据库。

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///Assets/db_in_assets.txt"));

await file.CopyAsync(ApplicationData.Current.LocalFolder, "db_in_local.db"); 
```

# facebook - 如何验证 Facebook 帖子 ID

> ID：15372134
> 
> 赞同：1
> 
> 时间：2013-03-12T21:07:29.637
> 
> 标签：facebook, validation, facebook-graph-api, social, facebook-wall

假设一个 facebook 游戏奖励用户在游戏中使用的虚拟货币，用于在他们的墙上发布来自游戏的事件。

使用 IFrame 方法，`{ post_id: 'some id' }`当用户成功完成帖子时，我在客户端上获得了一个 JavaScript 回调，并且生活很好。

当帖子发生在客户端时，我必须向服务器发送地址并为用户提交奖励，向服务器提供 post-id，这是使用某种形式的 JSONP HTTP 请求完成的。

剥离防止滥用的防御机制，以确保用户不会过度发布帖子并在游戏中惹恼他们所有的朋友，让我们专注于这个问题：

*   因为服务器调用可以很容易地使用类似`curl`or的工具`fiddler`来模拟，在签署请求和所有之后，我仍然需要确保这个请求中的 post-id 确实`post_id`来自 facebook，并且这篇文章是**确实**在用户的墙上可见 - 至少对他的朋友来说......

（因为，不，发布为只有您可以看到的私人帖子不应该用虚拟货币奖励您）

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:05:59.900

@CBroe 是绝对正确的：[Facebook 政策](https://developers.facebook.com/policy/)（特别是第 IV 节第 1 项）禁止您描述的功能。

打破政策和规避限制（这是违反政策的另一个项目......）从来都不是做任何事情的“最佳方式”。但是……你描述的是可能的。我会解释如何，但这样做也可能违反[Stack Exchange 政策](https://stackexchange.com/legal)：

> 3 订阅者内容
> 
> [...]
> 
> 订阅者声明、保证并同意不会提供任何 [...] (c) 侵犯他人的任何知识产权或侵犯他人隐私权或公开权的任何订阅者内容[.]

只要知道这是可能的，也许想办法让自己满意，然后继续前进而不执行你的要求。

# xml - 使用 Xquery 将数据插入 XML 节点

> ID：15372137
> 
> 赞同：0
> 
> 时间：2013-03-12T21:07:31.783
> 
> 标签：xml, insert, xquery

我有一个示例 XML 文件并想使用 Xquery 将数据插入节点

```
<Employees>
<ID>1</ID>
<Company>Northwind Traders</Company>
<Last_x0020_Name>Freehafer</Last_x0020_Name>
<First_x0020_Name>Nancy</First_x0020_Name>
<E-mail_x0020_Address>nancy@northwindtraders.com</E-mail_x0020_Address>
<Job_x0020_Title>Sales Representative</Job_x0020_Title>
<Business_x0020_Phone>(123)555-0100</Business_x0020_Phone>
<Home_x0020_Phone>(123)555-0102</Home_x0020_Phone>
<Fax_x0020_Number>(123)555-0103</Fax_x0020_Number>
<Address>123 1st Avenue</Address>
<City>Seattle</City>
<State_x002F_Province>WA</State_x002F_Province>
<ZIP_x002F_Postal_x0020_Code>99999</ZIP_x002F_Postal_x0020_Code>
<Country_x002F_Region>USA</Country_x002F_Region>
<Web_x0020_Page>#http://northwindtraders.com#</Web_x0020_Page>
</Employees> 
```

我如何能够在当前文件下方插入更多 XML，例如：

```
<Employees>
<ID>2</ID>
<Company>Another Company</Company>
</Employees 
```

我已经尝试了以下但无法弄清楚。

```
insert nodes <ID>2</ID> after 
doc("Employees.xml")//Employees 
```

# java - 使用 Powershell 卸载 Java 6 并重新安装 Java 7

> ID：15372140
> 
> 赞同：-1
> 
> 时间：2013-03-12T21:07:43.320
> 
> 标签：java, powershell, installation, uninstallation

我正在使用以下 Powershell 脚本。前半部分（卸载）完美无缺。后半部分（安装）仅在我允许用户输入时才有效。任何人都可以提供一些帮助吗？这是脚本：（抱歉格式不正确）

```
#uninstall
$java = Get-WmiObject -Class win32_product | where { $_.Name -like "*Java*"}
$msiexec = "C:\Windows\system32\msiexec.exe";
$msiexecargs = '/x "$($app.IdentifyingNumber)" /qn /norestart'

if ($java -ne $null)
{
    foreach ($app in $java)
    {
        write-host $app.LocalPackage
        write-host $app.IdentifyingNumber
        C:\Windows\system32\cmd.exe /c "C:\Windows\system32\msiexec.exe /x $($app.IdentifyingNumber) /qn"
        Start-Process -FilePath $msiexec -Arg $msiexecargs -Wait -Passthru
        [Diagnostics.Process]::Start($msiexec, $msiexecargs);
    }
}
if ($java -ne $null)
{
    foreach ($app in $java)

{
        write-host $app.LocalPackage
        write-host $app.IdentifyingNumber

C:\Windows\system32\cmd.exe /c 

"C:\Windows\system32\msiexec.exe /x $($app.IdentifyingNumber) /qn"

        Start-Process -FilePath $msiexec -Arg $msiexecargs -Wait -Passthru
        [Diagnostics.Process]::Start($msiexec, $msiexecargs);
    }
}

function Get-ScriptDirectory{
    $Invocation = (Get-Variable MyInvocation -Scope 1).Value

try {
        Split-Path $Invocation.MyCommand.Path -ea 0
    }

catch {
    Write-Warning 'You need to call this function from within a saved script.'
    }
}

function Get-Architecture{
    return $(gwmi win32_operatingsystem).OSArchitecture
}

$Path = Get-ScriptDirectory

#Close all instances of IE, Firefox, & Chrome
Get-Process | where {$_.ProcessName -match "iexplore"} | Stop-Process -Force
Get-Process | where {$_.ProcessName -match "chrome"} | Stop-Process -Force
Get-Process | where {$_.ProcessName -match "firefox"} | Stop-Process -Force

#Install
Start-Process -FilePath "msiexec.exe" -ArgumentList "/i "C:\temp\jre1.7.0_17.msi" ""/log "c:\temp\javainst.log " -Credential $cred -wait

#Also Install the 64-bit JRE if on a 64 workstation

if(Get-Architecture -match "64")
{
    $cred = Get-Credential
    Start-Process -FilePath "msiexec.exe" -ArgumentList "/i "C:\temp\jre1.7.0_17 (x64).msi" ""/log c:\temp\javainst.log " -Credential $cred -wait
}

#Import reg keys to disable auto updating
reg import "C:\temp\JavaUpdate.reg"{ 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:42:30.780

```
#uninstall everything Java
Get-WmiObject -Class win32_product | ? {$_.Name -like "*Java*"} | % {msiexec /x "$($_.IdentifyingNumber)" /qn | Out-Null}
#The Out-Null waits for the command to finish

#If you have made a Java MSI use this
msiexec /i $pathtomsi /qn

#If you only have the exe you'll need to look up the Command Line Interface (CLI) for Java
$cmd = "$pathtoexe /s"
cmd /c $cmd 
```

至于您的脚本，将 #Install 行更改为：

```
Start-Process -FilePath 'msiexec.exe' -ArgumentList '/i "C:\temp\jre1.7.0_17.msi" /log "c:\temp\javainst.log" /qn' -Credential $cred -wait 
```

[最佳实践主要使用单引号](http://www.windowsitpro.com/blog/powershell-with-a-purpose-blog-36/windows-powershell/powershell-part-7-139515)

# ms-access - 如何将每组重复项减少到一个条目？

> ID：15372151
> 
> 赞同：0
> 
> 时间：2013-03-12T21:08:22.680
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

下面是我的一个 MS Access 表的示例。

2001-7501 有 4 行/记录。我希望这简单地减少到一个条目。

我尝试了 Group By First 选项，但它不起作用。

更好的其他选择是将“制造商”和“制造商零件编号”条目“连接”到以“;”分隔的单个记录中。这两列导致所有重复。

```
DEVICE      Description                        Manufacturer   Manufacturer Part Number   Std Material Cost    OnHandQty   RoHS
2001-7500   CAP,1UF,10%,X7R,16V,SMD,1206       AVX            1206YC105KAT2A             0.018  9104          ROHS6       E0
2001-7501   CAP,470PF,20%,X7R,2000V,SMD,1206   AVX            1206GC471KAT1A             0.0266 7178          ROH6        E0
2001-7501   CAP,470PF,20%,X7R,2000V,SMD,1206   AVX            1206GC471MAT1A             0.0266 7178          ROHS6       E0
2001-7501   CAP,470PF,20%,X7R,2000V,SMD,1206   VENKEL         C1206X7R202-471KNE         0.0266 7178          ROHS6       E0
2001-7501   CAP,470PF,20%,X7R,2000V,SMD,1206   VENKEL         C1206X7R202-471MNE         0.0266 7178          ROHS6       E0
2001-7502   CAP,0.1UF,20%,X7R,16V,SMD,0603     AVX            0603YC104KAT2A             0.0021 4185          ROHS6       E0
2001-7502   CAP,0.1UF,20%,X7R,16V,SMD,0603     AVX            0603YC104MAT2A             0.0021 4185          ROHS6       E0
2001-7502   CAP,0.1UF,20%,X7R,16V,SMD,0603     KEMET          C0603C104M4RACTU           0.0021 4185          ROHS6       E0
2001-7504   CAP,10NF,10%,X7R,100V,SMD 0603     AVX            06031C103KAT2A             0.0039 0             ROHS6       E0
2001-7504   CAP,10NF,10%,X7R,100V,SMD 0603     KEMET          C0603C103K1RACTU           0.0039 0             ROHS6       E0
2001-7505   CAP,1NF,10%,X7R,100V,SMD           AVX            06031C102KAT2A             0.0043 6373          ROHS6       E0
2001-7505   CAP,1NF,10%,X7R,100V,SMD           KEMET          C0603C102K1RACTU           0.0043 6373          ROHS6       E0
2001-7506   CAP,100PF,20%,NPO,10V,SMD,0603     AVX            0603ZC101MAT2A             0.025  5044          ROHS6       E0 
```

# ruby-on-rails-3 - 限制急切加载对象的数量

> ID：15372152
> 
> 赞同：0
> 
> 时间：2013-03-12T21:08:23.350
> 
> 标签：ruby-on-rails-3, activerecord

有没有办法通过关联来限制急切加载的对象的数量？

考虑以下示例：

```
class Person < ActiveRecord::Base
  has_many :apples      
end

class Apple < ActiveRecord::Base
  belongs_to :person
end 
```

我想让所有的人，加载他们的苹果...

```
Person.includes(:apples).limit(10) 
```

...但我想将`apple`每人加载的对象数量限制为 5 个，这会加载**所有** `apples`.

我尝试了以下方法：

1.  在 Person 模型上定义新关系

    ```
    class Person < ActiveRecord::Base
      has_many :apples
      has_many :limited_apples, class_name: 'Apple', limit: 5
    end 
    ```

2.  利用`ActiveRecord::Associations::Preloader`

    ```
    people = Person.limit(50)
    ActiveRecord::Associations::Preloader.new(people, :limited_apples, limit: 5).run 
    ```

两种方法都无法限制通过`:apples`关联加载的对象数量。我是在把自己引向一个兔子洞，还是错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:03:39.990

似乎这是不可能的。

> 如果您使用指定的 :limit 选项急切加载关联，它将被忽略，并返回所有关联的对象。[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

# c++ - 如何将元素添加到指针向量中？

> ID：15372160
> 
> 赞同：4
> 
> 时间：2013-03-12T21:09:03.157
> 
> 标签：c++, pointers, vector

我有这个：

> `std::vector <BinaryTree*> children;`

在哪里`BinaryTree`上课。如何将元素添加到此向量中？

我试过`children.push_back(X)`where`X`是类的一个实例，但它给了我这个错误：

> 无法将参数 1 从“BinaryTree”转换为“BinaryTree *&&”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T21:11:27.157

只需使用`push_back()`并传递一个*指向*的实例的指针`BinaryTree`：

```
std::vector <BinaryTree*> children;
BinaryTree* pTree = new BinaryTree();
children.push_back(pTree);
...
delete pTree; 
```

为了避免手动内存管理，如果您需要引用语义，请使用智能指针而不是原始指针：

```
#include <memory> // For std::shared_ptr

std::vector <std::shared_ptr<BinaryTree>> children;
std::shared_ptr<BinaryTree> pTree = std::make_shared<BinaryTree>();
children.push_back(pTree);
...
// No need to delete pTree 
```

`std::shared_ptr<>`类模板是 C++11 标准库的一部分。在 C++03 中，您可以使用（几乎）等价的`boost::shared_ptr<>`：

```
#include <boost/shared_ptr.hpp> // For std::shared_ptr

std::vector <boost::shared_ptr<BinaryTree>> children;
boost::shared_ptr<BinaryTree> pTree = boost::make_shared<BinaryTree>();
children.push_back(pTree);
...
// No need to delete pTree 
```

最后，如果您根本不需要引用语义并希望将二叉树视为值，您甚至可以考虑定义 a `std::vector<BinaryTree>`：

```
std::vector<BinaryTree> children;
BinaryTree tree;
children.push_back(tree); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:11:29.873

`*`从模板参数中省略星号：

```
std::vector<BinaryTree> children; 
```

您希望孩子保存数据，而无需像`new BinaryTree`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T21:11:42.790

这实际上取决于谁应该拥有指针。在最简单的情况下，向量不拥有它们，那么您传递`BinaryTree`对象的地址。

```
BinaryTree b = ...;
children.push_back(&b); 
```

但你必须确保`b`至少能活得一样长`children`。

如果向量拥有指针，那么您可能应该存储智能指针以避免不得不处理内存管理：

```
std::vector<std::unique_ptr<BinaryTree>> children;
children.push_back(std::unique_ptr<BinaryTree>(new BinaryTree(args))); 
```

如果您不知道所有这些“所有权”业务的含义，那么使用简单的对象向量很可能会更好：

```
std::vector<BinaryTree> children; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T21:11:19.247

```
std::vector<SomeObject*> objectVector;
objectVector.push_back(new SomeObject()); 
```

我是怎么做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T21:11:36.430

你有指针向量：

```
std::vector <BinaryTree*> children; 
```

所以添加元素的正确方法是：

```
BinaryTree* child = new BinaryTree();
children.push_back(child); 
```

在做这样的事情时要小心：

```
{
    BinaryTree child;
    children.push_back(&child);
} 
```

因为这样一个元素的生命周期可能比向量的生命周期短，并且您最终可能会尝试访问一个不再存在的元素（悬空指针），这会产生*未定义的行为*。完成后也不要忘记`delete`这些元素。

但是首先考虑使用对象向量（即`std::vector<BinaryTree>`）总是好的，因为这会为您处理丑陋的内存管理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T21:11:57.703

```
children.push_back(&X); 
```

这将起作用，但请记住，一旦您的对象离开范围，它的删除器将被调用，您将得到一个无效的指针。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T21:12:44.367

```
children.push_back(&X); 
```

传递地址，就好像您将其用作指针一样。但是问题是如果该实例超出范围，那么最好这样做

```
BinaryTree* X = new BinaryTree;
children.push_back(X); 
```

这将确保 X 永远不会超出范围，但是您必须在完成后手动删除它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T21:16:01.147

`vector`包含*指向*类型对象的指针`BinaryTree`。你需要

```
BinaryTree bt;
children.push_back( &bt ); 
```

但是您必须确保`bt`对象的生命周期至少与`vector`.

你可能想要这个

```
children.push_back( new BinaryTree ); 
```

但在这种情况下，您必须调用`delete`包含在 中的指针`vector`以防止内存泄漏。

显然，这两种选择都不容易管理。一个简单的更改是让您的容器按值存储元素。

```
std::vector<BinaryTree> children;
BinaryTree bt;
children.push_back( bt ); 
```

如果您必须存储指针，请改用智能指针来保存它们。

```
std::vector<std::unique_ptr<BinaryTree>> children;
children.push_back( new BinaryTree ); 
```

现在您无需担心在清空向量之前删除对象。

# ruby-on-rails - 导轨目录

> ID：15372163
> 
> 赞同：0
> 
> 时间：2013-03-12T21:09:24.130
> 
> 标签：ruby-on-rails, io

我有 rails 项目，想从目录中加载所有文件。我像“”rails c一样开始它，但它说

```
No such file or directory 
```

这是我的代码示例：

```
class ParserPlugin < ApplicationController
  def self.loadPlugins
    a = File.new("1234")
    Dir.foreach("/plugins") do |f|
      if f != '.' and f != '..'
        load("/plugins" + f.to_s)
      end
    end
  end

  def self.createplugin
    @@plugins << self.new
  end
end 
```

文件结构是

```
 /home/andrii/LV-081/app/controllers/admin/plugins 
```

你能给我什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:23:12.420

您从目录中读取文件`/plugins`，而不是从. 试试这个：`plugins``app/controllers/admin`

```
Dir.foreach(Rails.root.join("app", "controllers", "admin", "plugins")) do |f|
  if f != '.' and f != '..'
    load(Rails.root.join("app", "controllers", "admin", "plugins", f.to_s))
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:23:28.233

您的文件可能位于此处：/app/controllers/ParserPlugin.rb

您要打印的目录在这里：/app/controllers/admin/plugins

通过这样说：

```
Dir.foreach("/plugins") 
```

Rails 认为当前工作目录中有一个 /plugins 文件夹（/app/controllers/plugins）

我会尝试记录`Dir.getwd`（获取当前工作目录）之类的内容，以查看 Rails 认为您在哪里，然后从那里访问您的文件。

您应该尝试使用 Rails.root：`Dir.foreach(Rails.root.join('app', 'controllers', 'admin', 'plugins'))`

# ios - 样式化控制器的基本视图以显示背景图像

> ID：15372164
> 
> 赞同：0
> 
> 时间：2013-03-12T21:09:24.110
> 
> 标签：ios

我正在使用 iOS 6，我想为我的所有视图创建一个背景图像。我是否应该考虑从视图控制器的基类继承并在那里设置视图样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:32:54.207

最好的解决方案可能是子类`UIViewController`化并让所有其他视图控制器从这个子类继承。在`viewDidLoad`子类中，您可以以编程方式创建一个`UIImageView`跨越整个屏幕的图像，并将其图像属性设置为您想要作为背景的图像。

**更新**
另一个更容易实施的解决方案是将其添加到`application:didFinishLaunchingWithOptions:`

```
[[self window] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]]]; 
```

然后确保每个视图控制器的主视图都有清晰的背景。

# git - 如何使用 master 的更改更新远程分支

> ID：15372173
> 
> 赞同：1
> 
> 时间：2013-03-12T21:09:59.747
> 
> 标签：git, git-branch

我已经对重新定位和合并我们的远程分支进行了相当多的研究/实践，但我无法找到最终不会导致重复提交或远程分支的非快速转发的解决方案。这就是我想要做的。

我们有两个分支，`master`（tracking `origin/master`）和`hebe`（tracking `origin/hebe`）。一个月前适当地`hebe`分支了。`master`每天都有几个开发人员在这两个分支上工作。

`master`正在继续维护，并且在公共代码中有几个错误修复，应该在`hebe`分支中反映/更新。然而，新代码中的任何一个都不`hebe`应该进入`master`

我试过了：

```
git rebase master hebe 
```

从日志来看，这似乎正是我们想要的，`hebe`提交位于最新的.`master``hebe``origin/hebe`

或者也许我们是从错误的方向来解决这个问题，而子模块将是合适的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:41:33.953

您应该只在非常非常非常罕见的情况下重新设置分支，因为您重写了历史记录并因此更改了提交的 sha，这些分支已经被推送并与其他人共享。这会导致您提到的重复提交，因为不同的 sha 意味着 git 的不同提交。
在您的情况下，最好将 master 与

```
$ git checkout hebe
$ git merge master
$ git push origin hebe 
```

有了这个，您将所有更改从 master 合并到`hebe`但没有任何东西回到 master 并且所有 shas 保持不变。合并将创建一个所谓的合并提交（如果没有快进合并是可能的）。

因为它是如此重要并导致如此多的混乱，所以我不得不在最后再说一遍：除非您绝对确定自己在做什么，否则永远不要重新设置已经共享的分支。

我强烈建议阅读以下（免费在线提供）书籍[http://git-scm.com/book](http://git-scm.com/book)的第三章，以更好地了解合并/变基的工作原理

# php - PHP Mysql - 如何使用 javascript 创建动态下拉列表？

> ID：15372174
> 
> 赞同：-1
> 
> 时间：2013-03-12T21:10:10.013
> 
> 标签：php, javascript, mysql

我对脚本完全陌生，基本上我必须尝试完成一个关于辅导旅游项目的学校项目。这个想法是允许客户注册和预订旅游。

我遇到的问题是，我不知道如何创建一个动态下拉列表，其中预订表格将从 mysql 数据库中获取数据。

比如说：

1.  客户需要从第一个下拉列表中选择旅游，即（工业、文化、军事）。

2.  选择旅游后，下一个下拉列表应列出目的地，即（英国、法国、德国等），具体取决于上述（旅游）选择。

3.  然后第三个列表应显示取决于上述（目的地）选择的开始日期。

下拉列表中的所有数据都应来自数据库。此外，当客户提交表单时，所有这些数据都应进入数据库中的客户预订表。

有人告诉我 javascript 应该是答案，但我搜索了很多论坛并查看了所有令人困惑的教程。所以特地来这里问问！非常感谢有关如何执行此操作的任何帮助。谢谢！

以下是我只知道如何执行此操作的代码：

```
 <h2><center>PLEASE PLACE YOUR BOOKING</center></h2>

<form action="booking.php" method="post">
<table width="700 border="0" align="center" cellpadding="0" cellspacing="0">
    <tr><td width="210" height="45">Tour Type:</td><td>
            <select name="tour_type">
            <option value="Cultural">Cultural</option>
            <option value="Industrial">Industrial</option>
            <option value="Military">Military</option>
     </select></td></tr>

    <tr><td width="210" height="45">Duration:</td><td>
            <select name="duration" >
            <option value="1_Day">1_Day</option>
            <option value="7_Days">7_Days</option>
            <option value="14_Days">14_Days</option>
        </select></td></tr>      

    <tr><td width="210" height="45">Destination:</td><td>
            <select name="destination" >
            <option value="England">England</option>
            <option value="Wales">Wales</option>
            <option value="Scotland">Scotland</option>
            <option value="France">France</option>
            <option value="Belgium">Belgium</option>
            <option value="Germany">Germany</option>
        </select></td></tr>

    <tr><td width="210" height="45">No. of Passengers:</td><td>
            <select name="no_of_passengers" >
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
        </select></td></tr>

    <tr><td width="210" height="45">Depature:</td><td>
            <select name="departure" >
            <option value="13 May 2013">13 May 2013</option>
            <option value="28 May 2013">28 May 2013</option>
            <option value="11 June 2013">11 June 2013</option>
            <option value="26 June 2013">26 June 2013</option>
            <option value="14 July 2013">14 July 2013</option>
            <option value="27 July 2013">27 July 2013</option>
        </select></td></tr>

    <tr><td width="210" height="45"><input type="checkbox" name="accomodation" 
     value="YES"/>Accomodation</td></tr>
    <tr><td width="210" height="45"><input type="checkbox" name="mailshot" 
    value="YES"/>Mailshot</td></tr>
    <tr><td width="210" height="45"><input type="submit" name="submit" value="submit"></td></tr>
    </table>
    </form>
</html>

    <?php
//When submit button is pressed.
if (isset($_POST['submit'])) {

//Include the server and database connection. 
include('cn.php');

session_start();

//retrieve data input from booking form and make it equal to the variable ($)
$tour_type = $_POST['tour_type'];
$duration = $_POST['duration'];
$destination = $_POST['destination'];
$no_of_passengers = $_POST['no_of_passengers'];
$departure = $_POST['departure'];

// accomodation confirmation
if (isset($_POST['accomodation'] ))
{$accom = $_POST["accomodation"];
} else {
$accom = "NO";
}

// mailshot confirmation
if (isset($_POST['mailshot'] ))
{$mail = $_POST["mailshot"];
} else {
$mail = "NO";
}

$userUsername = $_SESSION['loggedInUser'];

// Build the SQL query to retreive the variables ($) and input the data into the database.
$sql = "INSERT INTO booking 
      (user_id,tour_type,duration,destination,no_of_passengers,departure,accomodation,mailshot) 
VALUES ((SELECT user_id FROM user WHERE user_username = '" . 
       $userUsername . "'),'$tour_type','$duration','$destination',
       '$no_of_passengers','$departure','$accom' ,'$mail')";

// test the sql statement.
if(!mysql_query($sql,$cn)) {
die(mysql_error($cn));

}
// direct to this page when booking is successful.
header('Location: booking_success.php');
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:15:04.743

我有一个类似的问题。我找到了一个真正有效的指南，他在哪里解释了他的工作。阅读它时应该记住的一件事是，它使用的 Jquery 版本与最新版本不同，因此语法上存在一些差异。这些差异虽然很小，但可以在评论中找到。

[http://www.ssdtutorials.com/tutorials/series/dependable-dropdown.html](http://www.ssdtutorials.com/tutorials/series/dependable-dropdown.html)

在您的情况下，它看起来像这样：

# SQL

创建三个表，一个名为 id(Integer)，一个名为 master_id(Integer)，一个名为 names(varchar)。

**Id**将从 1->x 开始（意味着最后一行是数字 x）。 **对于第一个下拉军事等中的项目， master_id**将为 0。您想要进入军事类别的所有项目都将具有与军事作为 id 相同的 master_id 值，例如 1。您遵循此原则以及所有子类别和日期。**名字**只是一个标签...

# 主站 php/HTML

Html 看起来像这样，您将脚本放在站点头部的 php 中。

```
?php
try {

 $objDb = new PDO('mysql:host=localhost;dbname=tour', 'root', 'root');
 $objDb->exec('SET CHARACTER SET utf8');

 $sql = "SELECT * 
  FROM `region`
  WHERE `master_id` = 0";
 $statement = $objDb->query($sql);
 $list = $statement->fetchAll(PDO::FETCH_ASSOC);

 } catch(PDOException $e) {
 echo 'There was a problem';
 }

 ?> 
```

这是表格。

```
 <select name="tour" id="tour" class="update">
        <option value="">Select one</option>
        <?php if (!empty($list)) { ?>
            <?php foreach($list as $row) { ?>
                <option value="<?php echo $row['id']; ?>">
                    <?php echo $row['name']; ?>
                </option>
            <?php } ?>
        <?php } ?>
    </select>

    <select name="location" id="location" class="update"
        disabled="disabled">
        <option value="">----</option>
    </select>

    <select name="date" id="date" class="update"
        disabled="disabled">
        <option value="">----</option>
    </select>

</form> 
```

记得将 jquery 和 corect 路径添加到 ajax 脚本中。

# PHP 函数

```
 <?php
  if (!empty($_GET['id']) && !empty($_GET['value'])) {

$id = $_GET['id'];
$value = $_GET['value'];

try {

    $objDb = new PDO('mysql:host=localhost;dbname=tour', 'root', 'password');
    $objDb->exec('SET CHARACTER SET utf8');

    $sql = "SELECT * 
            FROM `categories`
            WHERE `master` = ?";
    $statement = $objDb->prepare($sql);
    $statement->execute(array($value));
    $list = $statement->fetchAll(PDO::FETCH_ASSOC);

    if (!empty($list)) {

        $out = array('<option value="">Select one</option>');

        foreach($list as $row) {
            $out[] = '<option value="'.$row['id'].'">'.$row['name'].'</option>';
        }

        echo json_encode(array('error' => false, 'list' => implode('', $out)));

    } else {
        echo json_encode(array('error' => true));
    }

} catch(PDOException $e) {
    echo json_encode(array('error' => true));
}

   } else {
echo json_encode(array('error' => true));
  } 
```

# ajax.js - 脚本

```
 var formObject = {
run : function(obj) {
    if (obj.val() === '') {
        obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
    } else {
        var id = obj.attr('id');
        var v = obj.val();
        jQuery.getJSON('func/tour_function.php', { id : id, value : v }, function(data) {
            if (!data.error) {
                obj.next('.update').html(data.list).removeAttr('disabled');
            } else {
                obj.nextAll('.update').html('<option value="">----   </option>').attr('disabled', true);
            }
        });
    }
}
  };
  $(function() {

$('.update').on('change', function() {
    formObject.run($(this));
});

 }); 
```

只要记住正确的路径并包含 Jquery 1.9.1，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:35:21.103

指出此站点上已有的答案 [Ajax 方法根据第一个中的选择填充第二个动态下拉列表](https://stackoverflow.com/questions/4723564/ajax-approach-to-populating-a-second-dynamic-dropdown-based-on-the-selection-in)

本质上，简短版本将是一个从您的服务器加载数据的 onchange 事件

```
<select name="first_dropdown" onchange="$('#dropdown2_container').load('your_script.php?nid='+this.value);">
    <option....
</select>
...
<div id="dropdown2_container" style="display:none"> </div> 
```

我不是像这样突兀的 javascript 的忠实粉丝，但这对你来说是一个开始。如果您想要更优雅的东西，请尝试以下链接。

[http://www.99points.info/2010/12/n-level-dynamic-loading-of-dropdowns-using-ajax-and-php/](http://www.99points.info/2010/12/n-level-dynamic-loading-of-dropdowns-using-ajax-and-php/)

至少有一点应该让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:15:07.660

您可以采取几种方法。由于您是脚本新手，我建议此时避免使用 AJAX。您需要以下内容：

1.  在服务器端 (PHP)，将数据输出到您可以使用的 JavaScript 变量中。例如，您可以将数据存储在数组中。

    例子：`var tours = [{ id:1, name:"Tour#1" }, { id:2, name:"Tour#2" }, etc.]`

2.  您需要将所有旅游数据、目的地数据和开始日期加载到脚本中，并包含足够的信息来链接哪些子记录属于哪些父记录。

3.  当页面第一次加载时，旅游数据应该填充到第一个下拉列表中，但是第二个和第三个应该是空白的，因为它们是基于前面的填充的。
4.  当用户对下拉列表值（`onchange`事件）进行更改时，然后应用逻辑以根据上一个下拉列表中的选择将条目加载到下一个下拉列表。

    例子：`<select id='tours' onchange='changetour();'></select>`

5.  您还需要处理用户清除选择的情况（在这种情况下清除所有子选择），或者用户返回第一个下拉列表并在他们已经选择了某些内容后更改他们的选择第二和第三。

这应该让您对开始使用的算法有一个粗略的了解。我建议您在上面的每个项目上尽最大努力，并在您尝试编写解决方案并遇到特定问题后返回特定问题。

# regex - 这个符号在正则表达式中是什么意思？

> ID：15372175
> 
> 赞同：2
> 
> 时间：2013-03-12T21:10:11.447
> 
> 标签：regex, pattern-matching

我从 RegexLib 中找到了以下正则表达式。

```
^(?:(?:(?:0?[13578]|1[02])(\/|-|\.)31)\1|(?:(?:0?[13-9]|1[0-2])(\/|-|\.)(?:29|30)\2))(?:
(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:0?2(\/|-|\.)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468]
[048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))
(\/|-|\.)(?:0?[1-9]|1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$ 
```

它来自[http://regexlib.com/REDetails.aspx?regexp_id=113](http://regexlib.com/REDetails.aspx?regexp_id=113)

我不明白这个正则表达式中多次使用的符号“？：”。似乎“：”不在[图表中](http://regexlib.com/CheatSheet.aspx)

我对正则表达式很熟悉。任何人都可以举一个例子，用正则表达式和输入吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T21:11:58.880

`(?:...)`只是一个非捕获组，表示与该组匹配的字符串部分不存储并且不能被访问`$1`或访问`\1`

捕获组由左括号编号，因此

对于示例文本“Foobar 测试”

1.  这是两个捕获组

    ```
    ^(\w+)\s*(\w+)
     1       2 
    ```

    这将导致：

    ```
    $1 = "Foobar"

    $2 = "test" 
    ```

2.  这里只有一个捕获组：

    ```
    ^(?:\w+)\s*(\w+)
               1 
    ```

    这将导致：

    ```
    $1 = "test" 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:12:06.243

`(?:...)`是一个非捕获组，也就是说，它控制运算符优先级，但不会创建匹配组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T21:23:38.447

```
(?:) 
```

代表*非捕获组*。请参阅[perldoc perlre](http://perldoc.perl.org/perlre.html#Extended-Patterns)（恕我直言， [perl](/questions/tagged/perl "显示标记为“perl”的问题")是使用 REGEX 的最高级语言：例如[pcre](/questions/tagged/pcre "显示标记为“pcre”的问题")，表示*Perl 兼容正则表达式*，是`PHP`,`pcregrep`或 with的默认值`grep -P`）

perl doc 的相关部分：

> (?:pattern)
> (?adluimsx-imsx:pattern)
> (?^aluimsx:pattern)
> 
> 这是用于聚类，而不是捕获；它对像“()”这样的子表达式进行分组，但不像“()”那样进行反向引用。

请参阅使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")的示例：

```
$ echo 'azfoobar' | perl -lne 'print $1 if /^(?:az)(.*)/'
foobar 
```

如您所见，第一个匹配的捕获组 ( `$1`) 不是`az`该行的其余部分。这与其他语言（如[python](/questions/tagged/python "显示标记为“python”的问题")等）相同。

# python - BadValueError: 属性 X 是必需的

> ID：15372179
> 
> 赞同：1
> 
> 时间：2013-03-12T21:10:23.953
> 
> 标签：python, google-app-engine

我已将列表属性添加到具有大量现有实例的实体模型中。

```
class MyModel(db.Model):

    new_property = db.ListProperty(item_type=str, default=None) 
```

部署到实时环境后，应用程序会在短时间内正常运行，然后在尝试从数据存储区检索记录时开始抛出 BadValueError 错误。

抛出错误的代码只是对数据存储的直接调用：

```
app_item = db.get(app_item_key) 
```

我正在使用 1.7.5。Python 2.7 运行时。

关于我可以做些什么来防止这种情况的任何想法，或者至少捕获它以便我可以从商店获取数据？

```
Traceback (most recent call last):
  File "/base/data/home/apps/app/4-15.365909351579418812/app.py", line 1739, in app_get
    app_item = db.get(app_item_key)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 1533, in get
    return get_async(keys, **kwargs).get_result()
  File "/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1459, in __get_hook
    entities = rpc.user_data(entities)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 600, in local_extra_hook
    return extra_hook(result)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 1503, in extra_hook
    model = cls1.from_entity(entity)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 1438, in from_entity
    return cls(None, _from_entity=entity, **entity_values)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 970, in __init__
    prop.__set__(self, value)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 614, in __set__
    value = self.validate(value)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 3460, in validate
    value = super(ListProperty, self).validate(value)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 641, in validate
    raise BadValueError('Property %s is required' % self.name)
BadValueError: Property new_property is required 
```

**对于以下人员：**

根据 Aaron D 的建议，将默认值更改为空列表可以解决此问题，因此：

```
new_property = db.ListProperty(item_type=str, default=None) 
```

应该读：

```
new_property = db.ListProperty(item_type=str, default=[]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:34:39.030

查看回溯中引用的 Google App Engine 的源代码`__init__.py`，您可以在 ListProperty 文档注释（第 3428 行）中看到一条注释：

> 请注意，“必需”的唯一允许值为 True。

因此，即使您没有提供它，看起来第 3442 行正在自动设置它： `self._require_parameter(kwds, 'required', True)`

如果您进一步查看源代码（第 3500 行），您可以看到`empty()`for a的定义`ListProperty`：

```
def empty(self, value):
    """Is list property empty.

    [] is not an empty value.

    Returns:
      True if value is None, else false.
    """
    return value is None 
```

我可以想到两个可能导致错误的问题，但我还没有通过测试验证。

1）如果由于某种原因，您已经在该字段中有数据（也许您正在重用`new_property`名称？）并且它是空的，那么它似乎可能会产生您遇到的错误。我不知道如何解决这个问题，除了建议您使用一个唯一的名称来`new_property`代替。[我在评论中引用](https://stackoverflow.com/a/10012905/399704)的帖子解释了如何“修复”数据。

2）由于您已经有记录，您的代码正在尝试使用您的默认值填充这些记录`None`，该值与测试匹配`empty()`，然后引发异常。在这种情况下，如果您只提供默认值`[]`，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:16:46.817

我很确定您在这里的示例代码不是您使用的。我敢打赌你`required=True`在新房子里。然后，您将检索没有所需属性值的旧记录。只需删除 'required=True' 将使这些错误消失。如果您需要该值，则需要在强制执行约束之前将默认值添加到该字段。

*** 删除了一些关于`None`不是 ListProperty 的有效默认值的完整垃圾 ***

因此，我尝试根据您提供的信息复制这种情况，并且我有答案。我可以通过首先创建一个名称`new_property`为 StringProperty 类型且默认值为 None 的模型来生成问题。put() ListProperty` 没有值的记录`new_property getting the default of None written, then change the model definition of new_property to`，然后获取记录。我们得到相同的堆栈跟踪。请参阅下面的 shell 日志。

```
s~lightning-catfish> class MyModel(db.Model):
...   pass
... 
s~lightning-catfish> x = MyModel()
s~lightning-catfish> x.put()
datastore_types.Key.from_path(u'MyModel', 1001L, _app=u's~lightning-catfish')
s~lightning-catfish> class MyModel(db.Model):
...    new_property = db.ListProperty(item_type=str,default=None)
... 
s~lightning-catfish> y = db.get(x.key())
s~lightning-catfish> y
<MyModel object at 0x9e09dcc>
s~lightning-catfish> y.new_property
[]
s~lightning-catfish>    new_property = db.StringProperty(defaul
KeyboardInterrupt
s~lightning-catfish> class MyModel(db.Model):
...    new_property = db.StringProperty(default=None)
... 
s~lightning-catfish> z = MyModel()
s~lightning-catfish> z.put()
datastore_types.Key.from_path(u'MyModel', 2001L, _app=u's~lightning-catfish')
s~lightning-catfish> class MyModel(db.Model):
...    new_property = db.ListProperty(item_type=str,default=None)
... 
s~lightning-catfish> a1 = db.get(z.key())
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/timh/google_appengine/google/appengine/ext/db/__init__.py", line 1533, in get
    return get_async(keys, **kwargs).get_result()
  File "/home/timh/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/home/timh/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1459, in __get_hook
    entities = rpc.user_data(entities)
  File "/home/timh/google_appengine/google/appengine/api/datastore.py", line 600, in local_extra_hook
    return extra_hook(result)
  File "/home/timh/google_appengine/google/appengine/ext/db/__init__.py", line 1503, in extra_hook
    model = cls1.from_entity(entity)
  File "/home/timh/google_appengine/google/appengine/ext/db/__init__.py", line 1438, in from_entity
    return cls(None, _from_entity=entity, **entity_values)
  File "/home/timh/google_appengine/google/appengine/ext/db/__init__.py", line 970, in __init__
    prop.__set__(self, value)
  File "/home/timh/google_appengine/google/appengine/ext/db/__init__.py", line 614, in __set__
    value = self.validate(value)
  File "/home/timh/google_appengine/google/appengine/ext/db/__init__.py", line 3460, in validate
    value = super(ListProperty, self).validate(value)
  File "/home/timh/google_appengine/google/appengine/ext/db/__init__.py", line 641, in validate
    raise BadValueError('Property %s is required' % self.name)
BadValueError: Property new_property is required
s~lightning-catfish> 
```

要修复数据，您需要在低级别访问它并更改存储在记录中的数据类型。

如果您需要，我有用于在不使用模型的情况下获取和放置实体的代码。

***你应该尝试的最后一件事***

尝试使用以下代码或类似代码在不使用模型的情况下获取对象。您可以在 dicts 中获取基础数据，包括类型等。这将向您展示数据存储中的内容。

```
from google.appengine.api import datastore
from google.appengine.api import datastore_errors

def get_entities(keys):
    rpc = datastore.GetRpcFromKwargs({})
    keys, multiple = datastore.NormalizeAndTypeCheckKeys(keys)
    entities = None
    try:
        entities = datastore.Get(keys, rpc=rpc)
    except datastore_errors.EntityNotFoundError:
        assert not multiple

    return entities

x = get_entities([some_key]) 
```

# azure-sql-database - 如何为 Dapper 实现 SQL Azure 瞬态故障处理框架？

> ID：15372188
> 
> 赞同：6
> 
> 时间：2013-03-12T21:10:53.083
> 
> 标签：azure-sql-database, dapper

我是一个 vb.net 人，阅读 C# 有困难。我将 C# Dapper 编译为 DLL 并在我的应用程序中使用它。我主要担心的是我认为我需要修改源以在每个 SQL 查询中默认集成 SQL Azure 的瞬态故障处理框架。

我可以在连接级别添加重试逻辑，因为它位于 dapper 之上，但不是在嵌入在 drapper 类中的执行查询级别。

有人做过吗？

*** 更新 ***

在 Dapper 调用之上仅使用 ReliableSqlConnection 会处理执行非查询的重试逻辑吗？

这是使用瞬态故障处理从 MS 重试的示例代码

```
using Microsoft.Practices.EnterpriseLibrary.WindowsAzure.TransientFaultHandling;
using Microsoft.Practices.EnterpriseLibrary.WindowsAzure.TransientFaultHandling.AzureStorage;
using Microsoft.Practices.EnterpriseLibrary.WindowsAzure.TransientFaultHandling.SqlAzure;
using System.Data;

...

using (ReliableSqlConnection conn = new ReliableSqlConnection(connString, retryPolicy))
{
conn.Open();

IDbCommand selectCommand = conn.CreateCommand();
selectCommand.CommandText = 
  "UPDATE Application SET [DateUpdated] = getdate()";

// Execute the above query using a retry-aware ExecuteCommand method which 
// will automatically retry if the query has failed (or connection was 
// dropped).
int recordsAffected = conn.ExecuteCommand(selectCommand, retryPolicy);

} 
```

这是 Dapper 代码的执行部分，使用了相同的名称，但我猜它是自定义执行函数

```
 private static int ExecuteCommand(IDbConnection cnn, IDbTransaction transaction, string sql, Action<IDbCommand, object> paramReader, object obj, int? commandTimeout, CommandType? commandType)
    {
        IDbCommand cmd = null;
        bool wasClosed = cnn.State == ConnectionState.Closed;
        try
        {
            cmd = SetupCommand(cnn, transaction, sql, paramReader, obj, commandTimeout, commandType);
            if (wasClosed) cnn.Open();
            return cmd.ExecuteNonQuery();
        }
        finally
        {
            if (wasClosed) cnn.Close();
            if (cmd != null) cmd.Dispose();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-21T22:39:34.510

我建议将重试包装在 Dapper*周围*，最好使用 RetryPolicy.ExecuteAction 方法。这样，对连接的 OPEN 调用和命令本身都将使用 TFH 重试策略进行重试：

例如：

```
 SqlRetryPolicy.ExecuteAction(() =>
        {
            // Place Dapper ExecuteCommand here: e.g.
            ExecuteCommand(conn,  trans, ... )
        }); 
```

# animation - 如何使用 UIPageControl 从左到右为 UIImageView 设置动画？

> ID：15372190
> 
> 赞同：0
> 
> 时间：2013-03-12T21:10:58.913
> 
> 标签：animation, uiimageview

我想用 UIPageControl 从左到右为 UIImageView 设置动画。我有这段代码，但它似乎有点奇怪......特别是因为当我到达图像 3 时我会做什么？我将不得不返回，这会按照我设置的方式弄乱 pageControl 数组中视图的数学计算：

```
 -(void)createUIViews{
        UIImage *image1 = [UIImage imageNamed:@"GiftCard.png"];
        firstView = [[UIImageView alloc] initWithImage:image1];
        firstView.backgroundColor = [UIColor grayColor];
        firstView.tag = 1;
        firstView.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin);
        [self.view addSubview:firstView];
        CGRect newFrame = firstView.frame;
        newFrame.origin.x += 40;    // shift right by 50pts
        newFrame.origin.y += 40;

        [UIView animateWithDuration:1.0
                         animations:^{
                             firstView.frame = newFrame;
                         }];

        UIImage *image2 = [UIImage imageNamed:@"MyCard.png"];
        secondView = [[UIImageView alloc] initWithImage:image2];
        secondView.backgroundColor = [UIColor grayColor];
        secondView.tag = 1;
        secondView.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin);

        UIImage *image3 = [UIImage imageNamed:@"GiftCard.png"];
        thirdView = [[UIImageView alloc] initWithImage:image3];
        thirdView.backgroundColor = [UIColor grayColor];
        thirdView.tag = 1;
        thirdView.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin);

    }

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self createUIViews];
    // Set up the views array with 3 UIImageViews
    views = [[NSArray alloc] initWithObjects:firstView, secondView, thirdView, nil];
    // Set pageControl's numberOfPages to 3
    self.pageControl.numberOfPages = [views count];
    // Set pageControl's currentPage to 0
    self.pageControl.currentPage = 0;

    // Call changePage each time value of pageControl changes
    [self.pageControl addTarget:self action:@selector(changePage:) forControlEvents:UIControlEventValueChanged];
}

- (IBAction) changePage:(id)sender {
    NSLog(@"pageControl position %d", [self.pageControl currentPage]);
    int oldPageControlPosition = [self.pageControl currentPage] - 1;
    NSLog(@"old pageControl position %d", oldPageControlPosition);

    //0 Get the currentview as referenced by pageControl
    UIImageView *oldView = [views objectAtIndex:oldPageControlPosition];
    //NSLog(@"views objectAtIndex = %@",[views objectAtIndex:[self.pageControl currentPage]]);

    //1 Animate out the old view
    CGRect oldViewFrame = oldView.frame;
    oldViewFrame.origin.x -= 300;

    [UIView animateWithDuration:2.0
                          delay: 0.5
                        options: UIViewAnimationOptionCurveEaseIn
                     animations:^{
                         oldView.frame = oldViewFrame;
                     }

                     completion:nil];

    //3 Get next view from array
    UIImageView *nextView = [views objectAtIndex:[self.pageControl currentPage]];

    //4 Add it to mainview
    [self.view addSubview:nextView];

    //5 Animate in
    CGRect nextViewFrame = nextView.frame;
    nextViewFrame.origin.x += 40;    // shift right by 50pts
    nextViewFrame.origin.y += 40;

    [UIView animateWithDuration:1.0
                     animations:^{
                         nextView.frame = nextViewFrame;
                     }];
} 
```

当我到达终点时，我尝试返回，最后一个位置是 2，当时的 oldPosition 是 1。这是正确的，数组从 0 到 1 到 2，总共 3 个位置。但是当我返回时，日志将位置显示为 1 而不是 2，这很好，因为我颠倒了……但旧位置显示的是 0 而不是 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:41:34.340

我无法让它确定方向，所以我最终使用了向左滑动和向右滑动实例的手势识别器。这是代码：

```
//Help determine direction of swipe
    UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeNext:)];
    swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
    [self.scrollView addGestureRecognizer:swipeLeft];

    UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipePrev:)];
    swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
    [self.scrollView addGestureRecognizer:swipeRight]; 
```

# sql - CASE 语句中的 SQL 参数

> ID：15372204
> 
> 赞同：0
> 
> 时间：2013-03-12T21:11:48.620
> 
> 标签：sql, sql-server-2008, stored-procedures

请在下面查看我的存储过程。我试图从 CASE 语句中的参数传递值 1 或 0。

我得到的错误是在 SELECT 语句中调用 CASE 语句中的参数 @payment_status ：

> 消息 102，级别 15，状态 1，第 17 行 '=' 附近的语法不正确。
> 
> 消息 102，级别 15，状态 1，第 21 行 '=' 附近的语法不正确。

这是脚本：

```
ALTER PROC ash_ap_cash_req_sp (@End_Date     NVARCHAR(12),
                               @Payment_Hold NVARCHAR(32))
AS
    SET NOCOUNT ON

    DECLARE @debug           INT,
            @julian_end_date VARCHAR(7),
            @ap_cash_req     NVARCHAR(4000),
            @payment_status  VARCHAR(400)

    SET @End_Date = RIGHT('00' + CONVERT(VARCHAR(2), datepart(mm, @End_Date)), 2) + '/' + RIGHT('00' + CONVERT(VARCHAR(2), datepart(dd, @End_Date)), 2) + '/' + RIGHT('0000' + CONVERT(VARCHAR(4), datepart(yyyy, @End_Date)), 4)
    SET @julian_end_date = (SELECT datediff(dd, '1/1/1753', @End_Date) + 639906)

    IF @Payment_Hold = 'All'
      BEGIN
          SET @payment_status = '
    SELECT payment_hold_flag 
    FROM dbase.dbo.apvchr 
    WHERE payment_hold_flag in (0,1)'
      END
    ELSE IF @Payment_Hold = 'Yes'
      BEGIN
          SET @payment_status = '
    SELECT payment_hold_flag 
    FROM dbase.dbo.apvchr 
    WHERE payment_hold_flag = 1'
      END
    ELSE IF @Payment_Hold = 'No'
      BEGIN
          SET @payment_status = '
    SELECT payment_hold_flag 
    FROM dbase.dbo.apvchr 
    WHERE payment_hold_flag = 0'
      END

    SET @debug = 0
    SET @ap_cash_req = '
IF OBJECT_ID(''temp.dbo.##ash_ap_cash_req_sp'') is NOT NULL
DROP TABLE ##ash_ap_cash_req_sp;  

CREATE TABLE ##ash_ap_cash_req_sp
(vendor varchar(12)
, pay_to varchar(12)
, vendor_name varchar(32)
, voucher_no varchar(12)
, invoice_no varchar(32)
, date_doc varchar(12)
--, date_doc_jd varchar(12)
, date_due  varchar(12)
--, date_due_jd  varchar(12)
, date_applied  varchar(12)
--, date_applied_jd  varchar(12)
, paid_status varchar(8)
--, payment_status varchar(12)
, payment_hold_status varchar(8)
, amount_open decimal(20,2)
, days_diff float
, days_0_to_30 decimal(20,2)
, days_31_to_60 decimal(20,2)
, days_61_to_90 decimal(20,2)
, days_91_to_120 decimal(20,2)
, days_121_to_150 decimal(20,2)
, total_over_90 decimal(20,2)
, total_over_150 decimal(20,2)
, payment_code varchar(8)
)'

    IF @debug = 1
      BEGIN
          PRINT @ap_cash_req

          PRINT ''
      END
    ELSE
      BEGIN
          EXEC sp_executesql @ap_cash_req
      END

    SET @ap_cash_req = '
SELECT
m.vendor
, m.pay_to
, m.address_name as vendor_name
, h.trx_ctrl_num as voucher_no
, h.doc_ctrl_num as invoice_no
, CONVERT(varchar(12),dateadd(dd,(h.date_doc- 639906),''1/1/1753''),101) as date_doc
--, h.date_doc as date_doc_jd
, CONVERT(varchar(12),dateadd(dd,(h.date_due- 639906),''1/1/1753''),101) as date_due
--, h.date_due as date_due_jd
, CONVERT(varchar(12),dateadd(dd,(h.date_applied- 639906),''1/1/1753''),101) as date_applied
--, h.date_applied as date_applied_jd
, paid_status = CASE WHEN h.paid_flag = 1 
    THEN ''Paid''
    ELSE ''Not Paid'' END 
, h.payment_hold_flag = CASE 
    WHEN ' + @payment_status + ' = 1 THEN ''On Hold''
    ELSE ''Not On Hold''
    END as payment_hold_status
, amount_open = (amt_net-amt_paid_to_date)
, h.payment_code
, days_dif = (' + @julian_end_date + ' - h.date_applied)
, days_0_to_30 = CASE WHEN h.date_applied >= ' + @julian_end_date + '-30
            THEN h.amt_net  --(h.amt_net-h.amt_paid_to_date)
            ELSE 0 END
, days_31_to_60 = CASE WHEN h.date_applied >= ' + @julian_end_date + '-60 
            AND h.date_applied <= ' + @julian_end_date + '-31
            THEN h.amt_net
            ELSE 0 END
, days_61_to_90 = CASE WHEN h.date_applied >= ' + @julian_end_date + '-90
            AND h.date_applied <= ' + @julian_end_date + '-61
            THEN h.amt_net
            ELSE 0 END
, days_91_to_120 = CASE WHEN h.date_applied >= ' + @julian_end_date + '-120
            AND h.date_applied <= ' + @julian_end_date + '-91
            THEN h.amt_net
            ELSE 0 END
, days_121_to_150 = CASE WHEN h.date_applied >= ' + @julian_end_date + '-150
            AND h.date_applied <= ' + @julian_end_date + '-121
            THEN h.amt_net
            ELSE 0 END
, total_over_90 = CASE WHEN h.date_applied <= ' + @julian_end_date + '-91
            THEN h.amt_net
            ELSE 0 END      
, total_over_150 = CASE WHEN h.date_applied <= ' + @julian_end_date + '-151
            THEN h.amt_net
            ELSE 0 END
FROM dbase.dbo.apvchr h
JOIN dbase.dbo.apvdet d
ON h.trx_ctrl_num = d.trx_ctrl_num
JOIN dbase.dbo.master m
ON h.vendor = m.vendor
AND h.pay_to = m.pay_to
GROUP BY m.vendor, m.pay_to, m.address_name
, h.trx_ctrl_num, h.doc_ctrl_num, h.date_doc, h.date_due, h.date_applied, h.paid_flag, h.payment_hold_flag
, h.amt_net, h.amt_paid_to_date, h.payment_code, h.payment_hold_flag 
--ORDER BY NEWID()
'

    IF @debug = 1
      BEGIN
          PRINT @ap_cash_req

          PRINT ''
      END
    ELSE
      BEGIN
          EXEC sp_executesql @ap_cash_req
      END

    SET @ap_cash_req = '
SELECT * FROM ##ash_ap_cash_req_sp
';
    SET @ap_cash_req = '
DROP TABLE ##ash_ap_cash_req_sp
';

    IF @debug = 1
      BEGIN
          PRINT @ap_cash_req

          PRINT ''
      END
    ELSE
      BEGIN
          EXEC sp_executesql @ap_cash_req
      END 

EXEC dbase.dbo.ash_ap_cash_req_sp;1 '03/11/2013','Yes' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:32:54.417

因为@payment_status 是一个“SELECT ...”，所以您需要用大括号将其包裹起来

```
h.payment_hold_flag = CASE 
  WHEN ('+@payment_status+') = 1 THEN ''On Hold''
  ELSE ''Not On Hold''
END as payment_hold_status 
```

但是，除此之外，我会质疑语法：
`, amount_open = (amt_net-amt_paid_to_date)`
- 你的意思是
`, (amt_net-amt_paid_to_date) as amount_open`？

# magento - 在 Adminhtml 的布局句柄中设置模板

> ID：15372215
> 
> 赞同：1
> 
> 时间：2013-03-12T21:12:18.527
> 
> 标签：magento, layout, handle, adminhtml

在我的 Magento Webshop 的后端，我想为 System-> Config 的块设置一个模板。因此我使用了我认为的布局`Mage_Adminhtml_System_ConfigController`句柄`adminhtml_system_config_index`。问题是，什么也没有发生。即使要删除块，也不会发生任何事情：

```
<adminhtml_system_config_index>
    <reference name="left">
        <action method="setTemplate">
            <template>myModule/template.phtml</template>
        </action>   
    </reference>
</adminhtml_system_config_index> 
```

或删除块：

```
<adminhtml_system_config_index>
    <remove name="left" />
</adminhtml_system_config_index> 
```

我究竟做错了什么？我什至尝试过`system_config_index`作为布局句柄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:29:39.947

你在这里做错了三件事。

**第一个提示**：您正在编辑正确的 XML 文件吗？

许多常见的布局问题来自您正在编辑的 XML 文件，而不是系统加载的 XML 文件。在您的站点中打开开发人员模式，设置`display_errors`为`1`，然后故意在您的 XML 文件中引入格式不正确的错误并尝试加载页面。

```
<!-- note the trailing greater than sign at the end -->
<adminhtml_system_config_index>
    ...
</adminhtml_system_config_index> > 
```

如果页面加载没有错误，那么您没有加载您认为的 XML 文件。

**第二个提示**：您是否使用了正确的布局句柄？

我不确定你是。尽管默认系统配置页面使用该`index`操作，但该操作实际上将页面转发到该`edit`操作。

```
#File: app/code/core/Mage/Adminhtml/controllers/System/ConfigController.php
public function indexAction()
{
    $this->_forward('edit');
} 
```

转发意味着有一个内部重新调度，但没有 http 重定向。这意味着您的实际手柄是

```
`adminhtml_system_config_edit` 
```

这就是我使用（免责声明：并建造和销售）[Commerce Bug](http://store.pulsestorm.net/products/commerce-bug-2)的原因。布局选项卡始终显示当前句柄，我可以避免做出让我走错路的假设。

![显示 Commerce Bug 句柄的布局表的图像](../Images/f59479e4a267933160ab886d6b73dd51.png)

第三个提示：您是否混淆了`left`左侧列命名的块？

通常，Magento 的容器块（`left`、`content`、`right`等）**不是**模板块。相反，它们是包含`text/list`多个模板块的容器块（准确地说是块）。

这是我使用 Commerce Bug 的另一个地方，[特别是新的 Graphviz 功能](http://alanstorm.com/find_magento_block_name)。这将向您显示任何特定页面的块结构。在出厂默认系统中，您会在“系统配置”页面看到类似的内容

![在此处输入图像描述](../Images/c7738e9ca506da2baba24f71be010b50.png)

如您所见，左侧块没有模板，因此更改其模板将无效。您可能想要的块是`left.child1`.

**第四个提示**：您尝试修改的块是否由布局 XML 添加。

无需深入了解布局渲染（这[需要一本书](http://store.pulsestorm.net/products/no-frills-magento-layout)），在布局生成所有块**之后**添加一些块。如果是这种情况，您的块在布局 XML 文件中将不可用。

如果查看`editAction`方法，您可以看到在调用（查找）**之后** 添加了 tabs 块。这意味着它在布局 xml 文件中不可用。 `loadLayout``adminhtml/system_config_tabs`

```
public function editAction()
{
    //...    

    //the `loadLayout` method call creates blocks based on layout XML files
    $this->loadLayout();

    $this->_setActiveMenu('system/config');
    $this->getLayout()->getBlock('menu')->setAdditionalCacheKeyInfo(array($current));

    $this->_addBreadcrumb(Mage::helper('adminhtml')->__('System'), Mage::helper('adminhtml')->__('System'),
        $this->getUrl('*/system'));

    //this line add the `child1` block to the layout. (child one is the 
    //name chosen since the block has no explicit name
    $this->getLayout()->getBlock('left')
        ->append($this->getLayout()->createBlock('adminhtml/system_config_tabs')->initTabs());

    //... 
```

这意味着您不能从布局 XML 文件修改此块的模板。您需要使用一个自定义模块来侦听适当的事件，然后通过 PHP 进行更改。我会尝试这个事件`controller_action_layout_render_before`或`controller_action_layout_render_before_adminhtml_system_config_edit`使用看起来像这样的 PHP 代码

```
$block = Mage::getSingleton('core/layout')->getBlock('child1');
if($block)
{
    $block->setTemplate('foo.phtml');
} 
```

# vb.net - 使用 linq 查询 ebay odata

> ID：15372217
> 
> 赞同：0
> 
> 时间：2013-03-12T21:12:20.300
> 
> 标签：vb.net, linq, odata

我正在使用他们的 odata 提要从 eBay 提取信息。我正在尝试使用 linq 来提取我们所追求的特定信息。使用 linq，我可以深入了解包含我们想要的信息的特定元素。我不能做的是弄清楚如何查询元素数据以获取我想要的特定子元素。我可以解析它，但真的很想学习 linq。我使用 vb.net 作为语言。要获得我在使用以下内容后的元素：

```
Sub Main
dim ns = "http://ebayodata.cloudapp.net/"
dim url as string = "http://ebayodata.cloudapp.net/Items?search=1756-L65"
    Using reader As XmlReader = XmlReader.Create(url)
    While reader.Read()
        If reader.NodeType = XmlNodeType.Element AndAlso reader.Name =    "entry" Then
            GetChildContentElements(reader)
        End If

    End While
End Using
 End Sub

  Private Sub GetChildContentElements(reader As XmlReader)
' move to first child
While reader.Read()
    If reader.NodeType = XmlNodeType.Element AndAlso reader.Name = "m:properties" Then
        Exit While
    End If
End While
Dim bookXml As XElement = DirectCast(XNode.ReadFrom(reader), XElement)
Console.WriteLine(bookXml)

   End Sub 
```

此返回的元素之一如下所示：

```
<m:properties xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"  xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices">
  <d:Id>160917851201</d:Id>
  <d:UserId>baltisales</d:UserId>
  <d:Title>Allen Bradley 1756-L65 /B ControlLogix Processor 32MB Memory *60 DAYS WARRANTY!*</d:Title>
  <d:Subtitle m:null="true"></d:Subtitle>
  <d:SellingState>Active</d:SellingState>
  <d:TimeLeft>P24DT2H25M33S</d:TimeLeft>
  <d:Currency>USD</d:Currency>
  <d:CurrentPrice m:type="Edm.Double">6446.14</d:CurrentPrice>
  <d:MinimumToBid m:type="Edm.Double">6446.14</d:MinimumToBid>
  <d:BidCount m:type="Edm.Int32">0</d:BidCount>
  <d:Description m:null="true"></d:Description>
  <d:QuantitySold m:type="Edm.Int32">0</d:QuantitySold>
  <d:AutoPay m:type="Edm.Boolean">false</d:AutoPay>
  <d:CharityId m:null="true"></d:CharityId>
  <d:Country>US</d:Country>
  <d:Compatibility m:null="true"></d:Compatibility>
  <d:GalleryUrl>http://thumbs2.ebaystatic.com/m/m3Y01PfuyFhctnJiEet95Gw/140.jpg</d:GalleryUrl>
  <d:GlobalId>EBAY-US</d:GlobalId>
  <d:PostalCode>21209</d:PostalCode>
  <d:ReturnsAccepted m:type="Edm.Boolean">true</d:ReturnsAccepted>
  <d:PrimaryCategoryId>97184</d:PrimaryCategoryId>
  <d:SecondaryCategoryId m:null="true"></d:SecondaryCategoryId>
  <d:ViewItemUrl>http://www.ebay.com/itm/Allen-Bradley-1756-L65-B-ControlLogix-Processor-32MB-Memory-60-DAYS-WARRANTY-/160917851201?pt=BI_Control_Systems_PLCs</d:ViewItemUrl>
  <d:PaymentMethods>PayPal ,VisaMC ,AmEx</d:PaymentMethods>
  <d:Condition m:type="eBay.Model.Entities.Condition">
    <d:Id m:type="Edm.Int32">3000</d:Id>
    <d:Name>Used</d:Name>
  </d:Condition>
  <d:ListingInfo m:type="eBay.Model.Entities.ListingInfo">
    <d:BestOfferEnabled m:type="Edm.Boolean">true</d:BestOfferEnabled>
    <d:BuyItNowAvailable m:type="Edm.Boolean">false</d:BuyItNowAvailable>
    <d:BuyItNowPrice m:type="Edm.Double" m:null="true"></d:BuyItNowPrice>
    <d:ConvertedBuyItNowPrice m:type="Edm.Double" m:null="true">  </d:ConvertedBuyItNowPrice>
    <d:Gift m:type="Edm.Boolean">false</d:Gift>
    <d:ListingType>StoreInventory</d:ListingType>
    <d:StartTime m:type="Edm.DateTime">2012-11-06T23:08:18Z</d:StartTime>
    <d:EndTime m:type="Edm.DateTime">2013-04-05T23:13:18Z</d:EndTime>
  </d:ListingInfo>
  <d:Distance m:type="eBay.Model.Entities.Distance" m:null="true"></d:Distance>
  <d:ShippingInformation m:type="eBay.Model.Entities.ShippingInformation">
    <d:Delimiter m:null="true"></d:Delimiter>
    <d:ExpeditedShipping m:type="Edm.Boolean">true</d:ExpeditedShipping>
    <d:HandlingTime m:type="Edm.Int32">1</d:HandlingTime>
    <d:OneDayShippingAvailable m:type="Edm.Boolean">true</d:OneDayShippingAvailable>
    <d:ShippingServiceCost m:type="Edm.Double">0</d:ShippingServiceCost>
    <d:ShippingType>FlatDomesticCalculatedInternational</d:ShippingType>
  </d:ShippingInformation>
</m:properties> 
```

我正在努力查询上述内容以获取我们需要使用的特定子元素。标签中的“：”似乎使用命名空间令人困惑。我想做的是能够查询元素以获取 d:Id、d:UserId、d:Currentprice 等的值。欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:01:39.123

尝试使用 WCF 数据服务客户端。它可以为您生成可以简化事情的代理类。[请参阅此处](http://msdn.microsoft.com/en-us/library/dd673930.aspx)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:32:30.113

使用生成的 WCF DS 客户端执行自定义 url 的示例代码，

```
const string baseAddress = "http://ebayodata.cloudapp.net/";
EBayData ebay = new EBayData(new Uri(baseAddress));

var items = ebay.Execute<Item>(new Uri(baseAddress + "Items?search=1756-L65"));
foreach (var item in items)
{
    Console.WriteLine(item.Title);
} 
```

# html - 是否可以将外部 SVG 填充加载到 inline-svg 元素中？

> ID：15372218
> 
> 赞同：2
> 
> 时间：2013-03-12T21:12:21.383
> 
> 标签：html, svg

我想创建一个 inline-svg 文本元素，其`fill`属性加载在外部 svg 文档中定义的渐变。

### 内联 SVG

```
<svg>
    <text fill="url(/path/to/svg.svg#gradient)">Mask this text</text>
</svg> 
```

### /path/to/svg.svg

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:#ffeab4; stop-opacity:1" />
            <stop offset="30%" style="stop-color:#ed9f3b; stop-opacity:1" />
            <stop offset="40%" style="stop-color:#ed9f3b; stop-opacity:1" />
            <stop offset="70%" style="stop-color:#ffeab4; stop-opacity:1" />
            <stop offset="100%" style="stop-color:#ed9f3b; stop-opacity:1" />
        </linearGradient>
    </defs>
</svg> 
```

这是一个[jsfiddle 测试用例](http://jsfiddle.net/jsRrE/)，这是我尝试加载[的 SVG 渐变的要点。](https://gist.github.com/potench/5146989#file-gradient-svg)

### 问题

*   是否可以将外部加载`fill`到 inline-svg 元素中？
*   我刚刚错误地定义了我的外部渐变还是错误地引用了它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:30:47.177

SVG 规范允许使用外部填充和描边，但并非所有浏览器都实现了该部分。Opera 和 Firefox 可以，但 Chrome 不可以。

一个活生生的[例子](http://xn--dahlstrm-t4a.net/svg/usingExternalGradient.svg)。

您描述的语法是正确的。例如`fill="url(example.svg#gradient)"`，将获取外部 example.svg 并使用该文件中指定的渐变。

# java - 尝试打印没有框架的图像

> ID：15372219
> 
> 赞同：0
> 
> 时间：2013-03-12T21:12:22.417
> 
> 标签：java, image, file, file-io, rendering

```
public class Main{
    public static void main(String []args){
        JLabel c=new JLabel();
        c.setIcon(new ImageIcon("picture.png"));
        JFrame frame = new JFrame();
        frame.setBackground(Color.WHITE);
        frame.setUndecorated(true);
        frame.getContentPane().add(c);
        frame.pack();
        BufferedImage bi = new BufferedImage(c.getWidth(), c.getHeight(), BufferedImage.TYPE_INT_ARGB);
        Graphics2D graphics = bi.createGraphics();
        c.print(graphics);
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        graphics.dispose();
        frame.dispose();
    }
} 
```

大家好！我只是想在屏幕上打印没有任何框架的图像。我认为这段代码应该将图像打印到屏幕上；等待两秒钟，然后将其丢弃。我究竟做错了什么？

顺便说一句，我没有收到任何错误，程序只存活了 2 秒钟然后就死了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:15:04.460

您的图像在您的 JLabel 中。如果没有显示 JLabel 的框架，为什么要在屏幕上打印它？

您已经将框架设置为未装饰。设置在框架上可见，将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:32:12.277

> 最后你不需要 Graphics 部分，你也忘了调用 setVisible(true);

```
public class Main{
    public static void main(String []args){
        JLabel c=new JLabel();
        c.setIcon(new ImageIcon("picture.png"));
        JFrame frame = new JFrame();
        frame.setBackground(Color.WHITE);
        frame.setUndecorated(true);
        frame.getContentPane().add(c);
        frame.pack();
        frame.setVisible(true);
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        frame.dispose();
    }
} 
```

# c++ - Windows XP SP3 的清单？

> ID：15372221
> 
> 赞同：-3
> 
> 时间：2013-03-12T21:12:29.403
> 
> 标签：c++, xml, windows, manifest, exe

我正在为themida 寻找一个清单文件，以使可执行文件以管理员身份和Windows XP SP3 兼容性方式打开。找不到这个清单，有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:37:24.770

您没有在清单中指定兼容模式。这是通过注册表完成的。一些有用的资源进一步描述了这一点：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/bb756937.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756937.aspx)
*   [http://blogs.technet.com/b/askperf/archive/2007/10/05/the-program-compatibility-assistant-part-two.aspx](http://blogs.technet.com/b/askperf/archive/2007/10/05/the-program-compatibility-assistant-part-two.aspx)
*   [https://superuser.com/questions/379375/how-can-i-set-the-compatibility-mode-for-an-executable-from-the-command-line](https://superuser.com/questions/379375/how-can-i-set-the-compatibility-mode-for-an-executable-from-the-command-line)
*   [http://www.verboon.info/index.php/2011/03/running-an-application-as-administrator-or-in-compatibility-mode/](http://www.verboon.info/index.php/2011/03/running-an-application-as-administrator-or-in-compatibility-mode/)

# php - PHP按类别重新排列数组中的项目

> ID：15372223
> 
> 赞同：0
> 
> 时间：2013-03-12T21:12:32.553
> 
> 标签：php, arrays, organization

我有一个看起来像这样的文件，它从 JSON 文件中获取数据并输出：

```
<?php
$game = "Test";
$itemsArray = json_decode(file_get_contents("http://test.com/stamps.json"), true);

echo "<table>";
echo "<tr><th>Image</th><th>Name</th><th>Difficulty</th><th>Description</th></tr>";

foreach ($itemsArray as $item) {
    $name = $item['name'];
    $stamps = $item['stamps'];

    if ($name == $game) {
        foreach ($stamps as $stampData) {

            $stampID = $stampData['stamp_id'];
            $stampName = $stampData['name'];
            $stampLevel = $stampData['rank_token'];
            $stampDescription = $stampData['description'];
            $stampMember = $stampData['is_member'];
            $stampID = $stampData['stamp_id'];

            if ($stampMember == "true") {
                $stampMember = "Yes";
            } else {
                $stampMember = "No";
            }

            echo "<tr>";

            echo "<td>";
            echo "Coming soon";
            echo "</td>";

            echo "<td>";
            print_r($stampName);
            echo "</td>";

            echo "<td>";
            print_r(ucwords($stampLevel));
            echo "</td>";

            echo "<td>";
            print_r($stampDescription.".");
            echo "</td>";

            echo "</tr>";

        }
    }
}

echo "</table>";
?> 
```

但是，它会按照 JSON 文件中的顺序输出数据。这一切都混在一起了。

我想知道是否有一种方法可以按 $stampData['rank_token'] 持有的类别对输出进行排序。

$stampData['rank_token'] 包含简单、中等、困难和极端的类别。有没有办法让这个脚本按以下顺序输出类别：简单、中等、困难、极端？

JSON解码后数组的小例子：

```
Array
(
[13] => Array
        (
            [name] => Blah blah
            [description] => Blah blah blah
            [parent_group_id] => 8
            [display] => Blah : Blah
            [stamps] => Array
                (
                    [73] => Array
                        (
                            [stamp_id] => 73
                            [name] => Blah
                            [is_member] => 
                            [rank] => 1
                            [description] => Blah blah blah
                            [rank_token] => easy
                        )

                    [80] => Array
                        (
                            [stamp_id] => 80
                            [name] => Blah
                            [is_member] => 
                            [rank] => 2
                            [description] => Blah blah blah
                            [rank_token] => medium
                        )

                 )
          )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:15:36.097

查看 PHP 的 usort

```
function my_compare($a, $b) {
  if ($a["rank_token"] > $b["rank_token"]) return 1;
  if ($a["rank_token"] < $b["rank_token"]) return -1;
  return 0;
}

usort($stampData, "my_compare"); 
```

# java - AWS Java 删除使用 CreateImage 创建的快照

> ID：15372224
> 
> 赞同：1
> 
> 时间：2013-03-12T21:12:42.720
> 
> 标签：java, amazon-web-services, amazon-ec2

我已经使用 AWS 的 Java API 有一段时间了，但不知何故，我找不到如何删除使用 CreateImage 请求创建的快照。

此请求将为您提供包含图像 ID 的图像。当您想删除图像时，您可以在给定此 ID 的情况下取消注册它。但我找不到如何删除该图像正在使用的快照。

我在这里错过了什么吗？

提前致谢，

吉列尔

PS：一些代码来说明我的意思：

```
final CreateImageResult createAMIResult =  AWS.ec2.createImage(new CreateImageRequest().withInstanceId(instanceID).withName(amiName).withNoReboot(noReboot));
final String imageId = createAMIResult.getImageId();

//After a while I want to remove it again

AWS.ec2.deregisterImage(new DeregisterImageRequest(imageId));
//TODO: How to remove the snapshot?? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:16:33.467

在搜索了 AWS 开发人员论坛后，我发现该解决方案非常令人失望。

您必须检查所有快照的描述并删除与您的图像 ID 匹配的快照。

使用 CreateImage 时的描述格式如下： `Created by CreateImage(i-xxxxxxxx) for ami-xxxxxxxx from vol-xxxxxxxx`

因此，只需将 ami-xxxxxxx 部分与您自己的图像 ID 匹配即可。

**编辑**

当您使用 AWS 提供的复制功能时，此解决方案不起作用。我的新解决方案基于将 EBS 卷作为阻塞设备添加到 ami 并且可以访问快照 ID 的事实！一些代码作为说明：

```
/**
 * Removes an ami and its snapshot.
 * @param amiID
 * @param snapshotID
 */
public static void removeImage(final String amiID, final AmazonEC2 ec2) {
    if (amiID != null) {
        DescribeImagesResult result = ec2.describeImages(new DescribeImagesRequest().withImageIds(amiID).withOwners(owner));
        if (!result.getImages().isEmpty()) {
            ec2.deregisterImage(new DeregisterImageRequest(amiID));
            for (BlockDeviceMapping blockingDevice : result.getImages().get(0).getBlockDeviceMappings()) {
                if (blockingDevice.getEbs() != null) {
                    ec2.deleteSnapshot(new DeleteSnapshotRequest().withSnapshotId(blockingDevice.getEbs().getSnapshotId()));
                }
            }
        }
    }
} 
```

# c# - Moq It.Is<> 不匹配

> ID：15372226
> 
> 赞同：9
> 
> 时间：2013-03-12T21:12:52.577
> 
> 标签：c#, unit-testing, mocking, moq

这段代码：

```
hub.MockedUserRepository.Setup(r => r.Update(It.IsAny<ControllUser>()))
                        .Callback((ControllUser usr) => Console.WriteLine("NULL = " + (usr.Zombies[0].ConnectionId == null)))
                        .Verifiable(); 
```

将打印

> 空=真

所以我想使用这种匹配会抓住它：

```
var zombieDisconnectParameterMatcher = It.Is<ControllUser>(x => x.Zombies[0].ConnectionId == null);
hub.MockedUserRepository.Setup(r => r.Update(zombieDisconnectParameterMatcher))
                        .Callback((ControllUser usr) => Console.WriteLine("NULL = " + (usr.Zombies[0].ConnectionId == null)))
                        .Verifiable(); 
```

但事实并非如此。

为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T22:21:18.743

通过查看 的[源代码`It`](https://github.com/Moq/moq4/blob/05e55d7430b6b7d7f1b186f89d0b51dbadc267f6/Source/It.cs#L73)，它与表达式树有关。我喜欢这个问题；他们可能非常令人费解。如果您看一下以下方法定义：

```
public static TValue It.Is<TValue>(Expression<Func<TValue, bool>> match)
{
        return Match<TValue>.Create(
                value => match.Compile().Invoke(value),
                () => It.Is<TValue>(match));
}

public static T Match.Create<T>(Predicate<T> condition, Expression<Func<T>> renderExpression)
{
        // ...
        return default(T);
} 
```

如果您要执行以下行：

```
var zombieDisconnectParameterMatcher = It.Is<ControllUser>(x => x.Zombies[0].ConnectionId == null); 
```

然后`It.Is<ControllUser>()`会尝试调用一个名为 的方法`Match.Create<ControllUser>()`，该方法返回默认的`ControllUser`. 我假设`ControllUser`是一个类，因此`zombieDisconnectParameterMatcher`将是`null`. 您应该能够使用调试器看到这一点。所以实际上你打电话的是：

```
hub.MockedUserRepository.Setup(r => r.Update(null))
    .Callback((ControllUser usr) => Console.WriteLine("NULL = " + (usr.Zombies[0].ConnectionId == null)))
    .Verifiable(); 
```

当`Update`使用非 null 执行方法时`ControllUser`（例如来自正在测试的方法），回调将不会触发。它根本不符合条件，因为它不为空。您也会看到验证失败。

要解决此问题，请内联`zombieDisconnectParameterMatcher`变量，或使其成为表达式类型变量（例如。`Expression<Func<...>>`）。后者将确保不执行代码，而是将其视为模拟框架可以推断的表达式（'`Update`正在使用？调用`Zombies[0].ConnectionId == null`'）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:10:19.877

这取决于`ControllUser`实例是如何实例化的。如果您在模拟中引用的实例不是被测代码中引用的实际实例，`Setup`则将失败。您需要确保`ControllUser`被测代码中引用的实例与测试代码中的对象是**同一对象**。如果不是，您必须使用`It.IsAny<ControllUser>()`回调来测试它，如您的第一个示例所示。如果没有看到更多您正在测试的代码，很难确定地说。

# multithreading - C++ 中对象的 volatile 关键字

> ID：15372228
> 
> 赞同：1
> 
> 时间：2013-03-12T21:12:55.150
> 
> 标签：multithreading, thread-safety, volatile, stdatomic

我有一个线程安全的计数器对象（它是一个使用 std::atomic load() 和 store() 的类）作为类成员之一。线程 1 递增计数器，线程 2 读取计数器。

通常，由不同线程共享的原始类型（ int 等）被声明为 volatile 以防止任何编译器优化。我是否必须将这个由 2 个不同线程共享的线程安全计数器对象声明为 volatile ？

有人可以对此提供更多见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:29:51.517

不，如果对象被声明为原子的，则没有必要。

AC 或 C++ 编译器不能对易失性内存位置的读取和写入重新排序，也不能省略对易失性内存位置的读取或写入。

通过使用`atomic`，它已经达到了`volatile`预期的目的，所以不需要声明`volatile`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:27:08.117

看看：[volatile (C++) msdn文章](http://msdn.microsoft.com/en-us/library/vstudio/12a04hfd.aspx)

你不必因为

*   “C++11 ISO 标准代码中的 volatile 关键字仅用于硬件访问；请勿将其用于线程间通信。对于线程间通信，请使用 C++ 标准模板中的 std::atomic 等机制图书馆。”

# android - 获取活动的执行时间

> ID：15372229
> 
> 赞同：2
> 
> 时间：2013-03-12T21:13:00.253
> 
> 标签：android, time, android-activity, launch

我会得到前台活动的执行时间（见图）和后台的执行时间。

![应用程序执行时间的屏幕截图。 在安卓 4.2.2](../Images/afff6237a78286852745c965d4488354.png)

我在 Android 4.1.2 源代码中搜索了“ [PackageInfo](http://developer.android.com/reference/android/content/pm/PackageInfo.html) ”和“ [PackageStats](http://developer.android.com/reference/android/content/pm/PackageStats.html) ”等类，但没有找到。

你能帮助我吗？我会使用一项服务来检索所有已启动活动的持续时间。谢谢 ！

编辑：

我发现了 Android 如何搜索这些信息，但它很复杂。

于是我发现Android显示xml“power_usage_details.xml”中的信息。

然后我发现活动 com.android.settings.fuelgauge.PowerUsageDetail 使用这个 xml 文件。

然后 PowerUsageDetail 在传递的意图中查找信息以启动此活动。

启动 PowerUsageDetail 的活动是 PowerUsageSummary。

PowerUsageSummary 从 com.android.internal.os.BatteryStatsImpl 中查找信息。

BatteryStatsImpl 扩展自抽象类 BatteryStats ...

总而言之，信息很难找到，如果有人有更好的主意，那将对我有很大帮助。谢谢你 ！

# java - 用 Ant 编译

> ID：15372230
> 
> 赞同：0
> 
> 时间：2013-03-12T21:13:08.233
> 
> 标签：java, eclipse, ant, junit

我有两个应该进行黑盒测试的 .class 文件。这些都在一个包中`one.two.three`。我的测试也在同一个包中。在同一个包中有第三个 .class 文件，其目的是为`Orders`我应该测试的类保存一个枚举变量。在eclipse中，我可以`Orders`通过直接导入枚举来让junit测试工作，例如

```
import one.two.three.Orders.ShippingMethod; 
```

如果我尝试使用 Ant 或通过命令行执行此操作，我会收到错误“包 one.two.three.Orders 不存在”。如果我将导入语句更改为

```
import one.two.three.*; 
```

Ant、Eclipse 和终端找不到我拥有的任何类。我需要用 Ant 编译和运行测试用例。课程在`bin/one/two/three`任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:40:14.083

Import `Orders`，因为它是类，并假设它是该类`ShippingMethod`中的枚举，引用其类型的正确方法是`Orders.ShippingMethod`.

尝试导入类的内部类型有时在 Eclipse 中会很奇怪。这可能是由于 Eclipse 没有使用`javac`打包在你的 jdk 中的编译器，而 Ant 使用了（它必须这样做，因为 Ant 没有提供嵌入式编译器）。

```
 import one.two.three.Orders;

 public class Whatever {

    private Orders.ShippingMethod shipMethod;

 } 
```

这应该适用于所有事情，因为这是正确的方法。

```
 import one.two.three.Orders.ShippingMethod; 
```

很容易混淆*大多数*编译器，因为没有

```
 one/two/three/Orders/ShippingMethod.class 
```

文件，这意味着类加载器在运行时找不到它。

我敢打赌，这是 Eclipse 嵌入式编译器中的一个错误，因为我见过不少。从好的方面来说，Eclipse 嵌入式编译器的存在是为了在代码编辑和 Eclipse 之间提供更快、更紧密的集成。在黑暗的一面，这意味着有时 Eclipse 编译器和`javac`编译器会有所不同。如有疑问，`javac`编译器可能是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:38:28.980

您需要设置类路径。

我不完全了解 Eclipse（我使用 NetBeans），但我点击了`Libraries -> add JAR/Folder`.

对于命令行，您需要指定类路径

`java -cp path/to/my/files (...)`

# android - Android 处理程序线程

> ID：15372231
> 
> 赞同：0
> 
> 时间：2013-03-12T21:13:13.343
> 
> 标签：android

我可以为带有 looper 的线程创建多个处理程序对象吗？假设我创建了两个新`Handler`对象`h1`并`h2`与 UIThread 的`Looper`. `h1`正在发布`Message` `m1`并`h2`正在发布`m2`到 UIThread 的`Looper`.does`h1.handleMessage()`并`h2.handleMessage()`分别处理 m1 和 m2，以便其他 UI 相关事件（例如触摸）由它们各自的处理程序处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:19:35.513

[HandlerThread](https://developer.android.com/reference/android/os/HandlerThread.html)的目的是创建一个带有*自己*Looper 的 Thread。

> 我可以为带有 looper 的线程创建多个处理程序对象吗？

是的，多个处理程序可以使用相同的 Looper 和[MessageQueue](https://developer.android.com/reference/android/os/MessageQueue.html)。

> 以便其他与 UI 相关的事件（例如触摸）由它们各自的处理程序处理？

虽然我对您在这里要问的内容感到困惑，但我知道只有主线程才能访问 UI 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T07:57:03.157

我认为山姆的答案没有得到它。

问题是：如果我有 2 个或更多处理程序，它们是在同一个线程中创建的，或者使用相同的循环器作为构造函数参数，如下代码：

`Handler h1 = new Handler(Looper.mylooper()) {//override handleMessage, if receiving messageA then do actionA};`

`Handler h2 = new Handler(Looper.mylooper()) {//override handleMessage, if receiving messageA then do actionB}`

然后我这样做：`h2.sendMsg(messageA)`，哪个处理程序将处理消息？

**我的答案是 Handler h2，每条消息只会由`target` 消息属性选择的处理程序处理一次，默认是谁发送谁处理**。在您的问题中，`h1.handleMessage()`请`h2.handleMessage()`分别处理 m1 和 m2 ，以便其他与 UI 相关的事件（例如触摸）由它们各自的处理程序处理。

我们可以深入[Handler](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/os/Handler.java#Handler.enqueueMessage%28android.os.MessageQueue%2Candroid.os.Message%2Clong%29)的源码，发现所有的`sendMessage`方法都会跳转到如下：

```
 private boolean enqueueMessage(MessageQueue queue, Message msg, long uptimeMillis) {
    msg.target = this; // Note this!
    ...
    return queue.enqueueMessage(msg, uptimeMillis);
} 
```

当这个线程`Looper`要从队列中取出消息时，它会根据`Message`的属性来调度消息`target`：

```
 msg.target.dispatchMessage(msg);//decides which handler to process. This code is in Looper.loop() 
```

通常，我们将在用于发送消息的同一处理程序中接收消息

# java - 二维数组跳过值

> ID：15372236
> 
> 赞同：-1
> 
> 时间：2013-03-12T21:13:36.020
> 
> 标签：java

我正在尝试逐个字符地将文件读入二维数组，并且我有一个代码可以做到这一点，但是在读取第一行字符后，它不会对数组中的下一个空格设置任何内容，然后设置字符那应该是在那个空间前面一个空间。我如何解决它？

```
 for(int x = 0; ((c = br.read()) != -1) && x < w.length*w.length; x++) {
     w.currentChar = (char) c;
     w.row = x/w.length;
     w.column = x%w.length;
     w.wumpusGrid[w.row][w.column] = w.currentChar;
     System.out.print(w.currentChar);
     System.out.print(w.row);
     System.out.print(w.column);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:19:26.220

您的问题是正在读取行尾的 '\n' 并将其分配给您的数组，您需要跳过该字符并保留跳过的计数，以便您可以偏移跳过的字符：

```
int offset = 0;
for(int x = 0; ((c = br.read()) != -1) && x < w.length*w.length; x++) {
  if (c == '\n') {
    offset++;
    continue;
  }
  int pos = x - offset;
  w.currentChar = (char) c;
  w.row = pos/w.length;
  w.column = pos%w.length;
  w.wumpusGrid[w.row][w.column] = w.currentChar;
  System.out.print(w.currentChar);
  System.out.print(w.row);
  System.out.print(w.column);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:39:43.120

您的问题在于行尾（`'\n'`（linux/mac）或`'\r\n'`（win））并将它们视为您的字符。`x`尽管读取了 char，但您仍在增加。取出定义`x++`中的最后一部分`for`并将其移动到循环体的末尾。在循环的开头`continue`if `c == '\n' || c == '\r'`（我猜你对这两个字符都不感兴趣）

# php - SimpleXML 多维节点

> ID：15372238
> 
> 赞同：0
> 
> 时间：2013-03-12T21:13:49.307
> 
> 标签：php, xml, simplexml

我有一个这样的 XML：

```
<properties>
  <property>name</property><value>john</value>
  <property>surname</property><value>wayne</value>
  <property>age</property><value>33</value>
  <property>blaaa</property><value>blaa</value>
</properties> 
```

我必须解析这个，我使用了这样的东西：

```
$xle = simplexml_load_file('xml.xml');
foreach ($xle->properties as $properties) {
    foreach ($properties->property as $property) {
        echo $property, "<br />\n";
    }
    foreach ($properties->value as $value) {
        echo $value, "<br />\n";
    }
} 
```

到目前为止，我来到这里，我需要类似的东西

“属性 = 价值” “名称 = 约翰”

我的代码输出如下：

```
name
surname
age
blaa
john
wayne
33
blaa 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:47:19.940

每个值都是属性元素的*后续兄弟。*你可以很容易地用 xpath 来表达：

```
following-sibling::value[1] 
```

`<value>`如果`<property>`元素是上下文节点，将为您提供元素。

使用 SimpleXML 获取上下文节点相当简单，因此这里是示例 PHP 代码：

```
$properties = simplexml_load_file('xml.xml');

foreach($properties->property as $property)
{
    list($value) = $property->xpath('following-sibling::value[1]');
    echo $property, " = ", $value, "\n";
} 
```

示例 XML 的输出为：

```
name = john
surname = wayne
age = 33
blaaa = blaa 
```

[在线演示](http://eval.in/12537)

这看起来类似于我从内存中知道的相关问答的属性文件（plist），所以它可能对你来说也很有趣：

*   [在 PHP 中更改 manifest.plist 值](https://stackoverflow.com/q/15291969/367456)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:31:04.987

我同意，一种奇怪的格式，但有效。鉴于 every`<property>`后面跟着它的`<value>`，去...

```
$xml = simplexml_load_file('xmlfile.xml');

$prop = $xml->xpath('//property');
$value = $xml->xpath('//value');

$count=count($prop)-1;

for ($i=0;$i<=$count;$i++) {
    echo $prop[$i].": ".$value[$i]."<br />";;
} 
```

---> 现场演示：http: [//3v4l.org/0CS73](http://3v4l.org/0CS73)

# php - Wordpress IF 语句不起作用

> ID：15372240
> 
> 赞同：0
> 
> 时间：2013-03-12T21:13:53.463
> 
> 标签：php, html, wordpress, if-statement

我有一个 IF 声明，说明以下内容......

```
 <?php

                    if (empty($data['footer_text'])) {

                        echo'<p>&copy;&nbsp;';
                            print(Date("Y"));
                        echo'<span class="sep"> | </span><a href="';
                            echo get_settings('home');
                        echo'" title="';
                            bloginfo( 'name' );
                        echo'" rel="home">';
                            bloginfo( 'name' );
                        echo'</a></p>';
                    }

                    else{
                        echo'<p>';
                            global $data; 
                        echo $data['footer_text']; 
                        echo'</p>';
                    }

                ?> 
```

我遇到的问题是当我这样称呼它时。

```
 <p><?php global $data; echo $data['footer_text']; ?>;</p> 
```

它正确显示我的文本。但是当我使用 IF 语句时，它总是默认显示站点名称，即使我知道它正确显示了文本。

我的语法搞砸了吗？我不明白为什么它认为什么都没有，但当我在 ap 标签中显示时仍然出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:15:45.470

在进入 if() 之前，您不会将 $data 声明为全局的，这意味着 $data 在您执行的时候是未定义的

```
if (empty($data[...])) { 
```

你可能想要

```
global $data;
if (empty($data[...])) { 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:17:26.353

尝试调试变量`$data['footer_text']`：

```
<?php var_dump($data['footer_text']); ?> 
```

就在 IF 语句之前。请记住，何时`empty()`返回 true。

# java - 我将如何做“Box entends Cube”

> ID：15372241
> 
> 赞同：0
> 
> 时间：2013-03-12T21:14:00.013
> 
> 标签：java

我想从 Box 扩展一个 Cube。我的程序有三个部分，首先我做一个矩形类，然后我用它来扩展一个 Box 类，然后我扩展一个 Cube。我被困在立方体部分。这就是我的指示：

评估说明 a. Cube 是长、宽和高都具有相同值的 Box。湾。您不必添加任何额外的实例变量或方法，但您必须设置 Cube 的构造函数以确保长度、宽度和高度都具有相同的值。

长方形：

```
 public class Rectangle
    {
        // instance variables 
        private int length;
        private int width;

        /**
         * Constructor for objects of class rectangle
         */
        public Rectangle(int l, int w)
        {
            // initialise instance variables
            length = l;
            width = w;
        }

        // return the height
        public int getLength()
        {
            return length;
        }
        public int getWidth()
        {
            return width;
        }

    } 
```

盒子：

```
public class Box extends Rectangle
{
    // instance variables 
    private int height;

    /**
     * Constructor for objects of class box
     */
    public Box(int l, int w, int h)
    {
        // call superclass
        super(l, w);
        // initialise instance variables
        height = h;
    }

    // return the height
    public int getHeight()
    {
        return height;
    }

} 
```

和主要的一个立方体：

```
class Cube extends Box{
    // instance variables 
    private int height;
        private int length;
    private int width;

    public Cube(int h,int w,int l){
        super(h,w,l);

    }

    public double getheight(){
        return height;

               }
        public double getlength() {
            return length;
        }

        public double getwidth() {
            return width;
        }
} 
```

我需要知道我是否做对了 Cube 之一。如果我做的不对，请帮我解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T21:18:27.233

立方体是所有边相等的盒子。所以将相同的长度参数传递给盒子的所有 3 个维度。

```
public class Cube extends Box{
    public Cube(int length)
    {
        super(length, length, length);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:15:32.177

`public class Box extends Cube {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:15:00.873

rgettman 已经有了正确的解决方案，但只是详细说明一下：Cube 扩展自 Box，因此它继承了所有（非私有）方法和所有成员。从技术上讲，它具有所有成员，但“私人”成员不会被孩子看到或修改。除非您想更改其实现的行为，否则您无需重新声明子类中的方法。

如果打算扩展一个类，则通常使用“受保护”类型，因为子类将能够继承变量并对其可见。这取决于子类是否需要直接修改成员变量。

# c++ - c++ 中的内存泄漏示例（通过使用异常）

> ID：15372242
> 
> 赞同：5
> 
> 时间：2013-03-12T21:14:05.267
> 
> 标签：c++, memory-leaks, dynamic-memory-allocation, unique-ptr

在 C [++ How to program](https://rads.stackoverflow.com/amzn/click/com/0132662361)中有一段说：

> 一种常见的编程实践是分配动态内存，将该内存的地址分配给一个指针，使用指针来操作内存，并在不再需要内存时使用 delete 释放内存。如果在成功分配内存之后但在 delete 语句执行之前发生异常，则可能发生内存泄漏。C++ 标准在 header 中提供了类模板 unique_ptr 来处理这种情况。

任何人都可以向我介绍一个发生异常并且内存会[像这篇文章那样](https://stackoverflow.com/questions/7242493/how-to-create-a-memory-leak-in-c)泄漏的真实例子吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T21:26:27.650

一个更微妙的例子。

采用一个包含两个动态分配数组的类的简单实现：

```
struct Foo {
private:
    int* first;
    int* second;
public:
    Foo()
        : first(new int[10000])
        , second(new int[10000])
    { }

    void Bar() { throw 42; }

    ~Foo()
    {
        delete [] first;
        delete [] second;
    }
};

int main()
{
    Foo f;
    /* more code */
} 
```

现在，如果我们因为在某处调用方法而得到异常，那么一切都很好 - 调用了析构函数`Bar`的堆栈展开保证。`f`

但是如果我们`bad_alloc`在初始化时得到一个，我们就会泄露指向`second`的内存。`first`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T21:22:29.980

```
class MyClass
{
public:
    char* buffer;
    MyClass(bool throwException)
    {
        buffer = new char[1024];
        if(throwException)
            throw std::runtime_error("MyClass::MyClass() failed");
    }

    ~MyClass()
    {
        delete[] buffer;
    }
}; 
```

* * *

```
int main()
{
    // Memory leak, if an exception is thrown before a delete
    MyClass* ptr = new MyClass(false);
    throw std::runtime_error("<any error>");
    delete ptr;
} 
```

* * *

```
int main()
{
    // Memory leak due to a missing call to MyClass()::~MyClass()
    // in case MyClass()::MyClass() throws an exception.
    MyClass instance = MyClass(true);
} 
```

另请参阅：[C++：如果构造函数可能抛出异常，则处理资源（参考 FAQ 17.4]](https://stackoverflow.com/q/1230423/1175253)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-12T21:16:26.327

```
void func()
{
    char *p = new char[10];
    some_function_which_may_throw(p);
    delete [] p;
} 
```

如果调用`some_function_which_may_throw(p)`抛出异常，我们会泄漏 . 指向的内存`p`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-12T21:16:47.607

简单的例子

```
try { 
  int* pValue = new int();
  if (someCondition) { 
    throw 42;
  }
  delete pValue;
} catch (int&) { 

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T21:35:47.937

举一个不那么做作的例子，我最近在使用给定的分配器对象分配节点时在我的代码中发现了这种潜在的泄漏。

```
std::unique_ptr<node,alloc_aware> allocate_new_node(allocator& al, const value_type^ v) {
    char* buffer = al.allocate(sizeof(node)); //allocate memory
    return std::unique_ptr<node>(al.construct(buffer, v),{al})); //construct
} 
```

由于缓冲区的原因，如何解决这个问题不太明显，但在帮助下我得到了它：

```
struct only_deallocate {
    allocator* a;    
    size_type s;
    only_deallocate(allocator& alloc, size_type size):a(&alloc), s(size) {}
    template<class T> void operator()(T* ptr) {a->deallocate(ptr, s);}
    operator alloc_aware() const {return alloc_aware(*a, s);}
};

std::unique_ptr<node,alloc_aware> allocate_new_node(allocator& al, const value_type& v) {
    std::unique_ptr<node, only_deallocate> buf(alloc.allocate(sizeof(node)),{alloc, sizeof(node)});//allocate memory
    alloc.construct(buf.get(), value);
    return std::unique_ptr<node,alloc_aware>(std::move(buf));
} 
```

[在这里编译代码](http://stacked-crooked.com/view?id=aee47dfc09550055593a80e5a0ed7f88-18aa934a8d82d638dde2147aa94cac94)

# sql-server - 插入存储过程T-SQL里面的除法

> ID：15372243
> 
> 赞同：0
> 
> 时间：2013-03-12T21:14:06.553
> 
> 标签：sql-server, tsql, stored-procedures, odbc, sql-server-2008-express

我是 T-SQL 的新手，我想知道是否可以做这样的事情

```
CREATE PROCEDURE [SISACT].[new_activo_fijo]
  @activo VARCHAR(8) ,
  @descripcion VARCHAR(60) ,
  @utiliza_serial BIT,
  *@serial VARCHAR(20) = NULL,*
  @fecha_adquisicion DATE,
  @referencia VARCHAR(10),
  @costo_adquisicion FLOAT,
  @vida_util INT,
  **@saldo_a_depreciar FLOAT = @costo_adquisicion / @vida_util,**
  @ultimo_periodo CHAR(6),
  *@periodo_saldo_cero CHAR(6) = NULL,*
  @fecha_incorporacion DATE,
  @fecha_desincorporacion DATE,
  @proveedor VARCHAR(8),
  @situacion INT
AS
INSERT INTO [SISACT].[ACTIVOS_FIJOS] (
activo, descripcion, utiliza_serial, serial, fecha_adquisicion, 
referencia, costo_adquisicion, vida_util, saldo_a_depreciar,
ultimo_periodo, periodo_saldo_cero, fecha_incorporacion,
fecha_desincorporacion, proveedor, situacion
)
VALUES(
  @activo, @descripcion, @utiliza_serial, @serial, @fecha_adquisicion,
  @referencia, @costo_adquisicion, @vida_util, @saldo_a_depreciar, 
  @ultimo_periodo, @periodo_saldo_cero,  @fecha_incorporacion,
  @fecha_desincorporacion, @proveedor, @situacion
) 
```

此外，是否可以像我一样将参数初始化为 NULL，以防万一没有从表单发送，或者我应该在发送参数时这样做？

很抱歉，如果我问的是一些非常基本的问题，我将不胜感激。

以防万一，我使用的是 PHP 和 ODBC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:40:22.803

根据实验，这是我发现的：

1.  你能做到吗：`@saldo_a_depreciar FLOAT = @costo_adquisicion / @vida_util`。答：**不**，SQL Server（在我的例子中是 2012）说`Incorrect syntax near '/'`。用括号括起来（绝望的最后手段:-)也无济于事。

2.  你能做到吗：`@periodo_saldo_cero CHAR(6) = NULL`。答：**是**的，如果`@periodo_saldo_cero`没有通过，则默认为 NULL。

至于您的`@saldo_a_depreciar`专栏：它是否总是定义为`@costo_adquisicion / @vida_util`？如果是这样，您应该根据需要计算它而不是存储它。

如果`@saldo_a_depreciar`确实是一个应该存储而不是计算的值，则只需将计算推送到过程代码而不是参数列表中：

```
CREATE PROCEDURE [SISACT].[new_activo_fijo]
  @activo VARCHAR(8) ,
  @descripcion VARCHAR(60) ,
  @utiliza_serial BIT,
  @serial VARCHAR(20) = NULL,
  @fecha_adquisicion DATE,
  @referencia VARCHAR(10),
  @costo_adquisicion FLOAT,
  @vida_util INT,
  @saldo_a_depreciar FLOAT = NULL
  @ultimo_periodo CHAR(6),
  @periodo_saldo_cero CHAR(6) = NULL,
  @fecha_incorporacion DATE,
  @fecha_desincorporacion DATE,
  @proveedor VARCHAR(8),
  @situacion INT
AS
  IF @saldo_a_depreciar IS NULL SET @saldo_a_depreciar = @costo_adquisicion / @vida_util
  INSERT INTO ... (and the rest of your procedure) 
```

这将在两种情况下计算@saldo_a_depreciar：(1) 如果您不传递参数，以及 (2) 如果您将参数作为 null 传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:39:53.217

您绝对可以将单个参数初始化为`NULL`默认值 - 但我认为您不能在参数列表中执行此操作。

我会做以下事情：

*   如果传入了一个值`@saldo_a_depreciar`- 然后就按原样使用该值
*   if`NULL`传入 for `@saldo_a_depreciar`- 然后作为存储过程中的第一个命令进行计算

所以我会写这样的代码：

```
CREATE PROCEDURE [SISACT].[new_activo_fijo]
  @activo VARCHAR(8) ,
  @descripcion VARCHAR(60) ,
  @utiliza_serial BIT,
  @serial VARCHAR(20) = NULL,
  @fecha_adquisicion DATE,
  @referencia VARCHAR(10),
  @costo_adquisicion FLOAT,
  @vida_util INT,
  @saldo_a_depreciar FLOAT = NULL,
  @ultimo_periodo CHAR(6),
  @periodo_saldo_cero CHAR(6) = NULL,
  @fecha_incorporacion DATE,
  @fecha_desincorporacion DATE,
  @proveedor VARCHAR(8),
  @situacion INT
AS
   IF @saldo_a_depreciar IS NULL
      SET @saldo_a_depreciar = @costo_adquisicion / @vida_util

   INSERT INTO [SISACT].[ACTIVOS_FIJOS] (
      activo, descripcion, utiliza_serial, serial, fecha_adquisicion, 
      referencia, costo_adquisicion, vida_util, saldo_a_depreciar,
      ultimo_periodo, periodo_saldo_cero, fecha_incorporacion,
      fecha_desincorporacion, proveedor, situacion)
  VALUES(
       @activo, @descripcion, @utiliza_serial, @serial, @fecha_adquisicion,
       @referencia, @costo_adquisicion, @vida_util, @saldo_a_depreciar, 
       @ultimo_periodo, @periodo_saldo_cero,  @fecha_incorporacion,
       @fecha_desincorporacion, @proveedor, @situacion) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:40:44.617

MS SQL Server 确实支持存储过程的默认值，但是您需要将@saldo_a_depreciar 的计算移到“AS”之后的过程代码中。

```
DECLARE @saldo_a_depreciar FLOAT;
SET @saldo_a_depreciar = @costo_adquisicion / @vida_util; 
```

# java - Java 字符串引用与 new 不同，与 new 相同

> ID：15372247
> 
> 赞同：3
> 
> 时间：2013-03-12T21:14:18.793
> 
> 标签：java, string

以前从未使用过 Java，我正在自学泛型语法。我正在用一些字符串测试简单的泛型函数，并注意到一些奇怪的东西：

```
public class Main {

    public static <T> boolean areSameReference(T lhs, T rhs) {
        return lhs == rhs;
    }

    public static void main(String[] args) {
        String s = new String("test1");
        String t = s;
        String u = new String("test1");

        System.out.println(areSameReference(s, t)); //true
        System.out.println(areSameReference(s, u)); //false

        String v = "test2";
        String w = "test2";
        System.out.println(areSameReference(v, w)); //true
    }
} 
```

为什么 [s] 和 [u] 是不同的引用，而 [v] 和 [w] 是相同的引用？我原以为无论有没有“新”，字符串文字都会导致它们在两种情况下始终相同或不同。

我错过了这里发生的其他事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:22:28.947

> 为什么 [s] 和 [u] 是不同的引用，

因为你告诉编译器你想要**新**的字符串，不是吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:18:55.643

根据[JLS 3.10.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)

> 字符串字面量总是引用 String 类的同一个实例。这是因为字符串字面量 - 或者更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用 String.intern 方法共享唯一实例。

```
 String v = "test2";
     String w = "test2"; 
```

将被视为字符串文字。

当您使用**new**运算符构造`String`对象时，它会分配新的 String 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:22:12.227

JVM 保留一个字符串池，这样它就不会因为重复的字符串而浪费内存。因此，`v`和`w`应该是一样的。我猜您遇到的行为是由于`new String(String original)`构造函数中隐含的合同，这表明它创建了一个新对象（请参阅[http://docs.oracle.com/javase/1.5.0/docs/ api/java/lang/String.html#String(java.lang.String)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#String(java.lang.String))）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T21:30:47.900

字符串对象是不可变的，其中字符串引用是可变的。当您定义“s”和“u”时，将为每个创建新对象。这里的值无关紧要，因为您调用构造函数，但是当您将相同的值分配给不同的 String 对象时，它们将成为对内存中相同“test2”对象的引用。

我建议阅读更多关于 Java 中不可变对象的信息，这里有一篇好文章：http: [//javarevisited.blogspot.com/2010/10/why-string-is-immutable-in-java.html](http://javarevisited.blogspot.com/2010/10/why-string-is-immutable-in-java.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T21:20:48.623

使用 new，您可以调用内存管理系统并获取一个新对象。

如果没有 new，编译器会将字符串内容优化为“.class”常量表中的一个条目，从而导致对“.class”常量表中的同一条目进行两次访问。

Java 中的`=`比较运算符是参考比较操作，因此您会看到两种技术之间的差异。您可以通过充分使用`String.intern(otherString)`.

这里要带回家的教训是，除非在极端情况下，否则**总是使用`.equals(...)`to compare to objects**。

# ios - 如何制作像 Instagram 一样的导航栏

> ID：15372248
> 
> 赞同：9
> 
> 时间：2013-03-12T21:14:25.300
> 
> 标签：ios, objective-c, uitableview, uiscrollview, instagram

我需要实现这样的事情：

![NavBar 保持在顶部，tableView 弹跳](../Images/1e19c1a95b23c5ae842245108884ce70.png)

**tableView 必须反弹，但导航栏不能。**

我尝试了一堆不同的变体。像这样的东西：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGRect imageViewFrame = self.imageView.frame;
    CGRect tableViewFrame = self.tableView.frame;
    //ImageView - is top view(instead of NavBar)
    //defaultHeight - is default height of tableView
    imageViewFrame.origin.y = MIN(0, MAX(-scrollView.contentOffset.y, -100));
    tableViewFrame.origin.y = imageViewFrame.origin.y + 100;
    tableViewFrame.size.height = defaultHeight - imageViewFrame.origin.y;

    self.imageView.frame = imageViewFrame;
    self.tableView.frame = tableViewFrame;
} 
```

得到这个：

![1](../Images/b91f65b6d54bb8b35170b1c57c34e8d8.png) ![2](../Images/3992e8b9792ebe4a67795df9dab4b0cd.png)

它不适合，因为在 Instagram 中 tableView 的大小不会改变（只需查看滚动指示器，如果 tableView 的大小发生变化，它们也会发生变化）

![请查看滚动指示器](../Images/b87262bbe1e4a65b8333faa0dc9694e4.png) ![请查看滚动指示器](../Images/cf140c5c6d6878f13a90a865cd59c36c.png)

我还尝试将 View 作为 subView 添加到 tableView 中，它可以工作，但不完全是我需要的。在tableView之外的Instagram导航栏中，也不适合。

在 facebook 应用程序搜索栏的行为完全相同

![在此处输入图像描述](../Images/d0b1560238601464259c921133f7ad01.png)

谁能帮我？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:17:23.497

如果您的目标是 iOS 5+，那么您可以轻松自定义导航栏，如下所示：

1-在 UINavigationController 中添加您的 TableViewController

2-自定义导航栏：

**为导航栏设置背景图像**

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"bar_background"] 
                                   forBarMetrics:UIBarMetricsDefault]; 
```

**在右侧添加刷新按钮**

```
UIImage *img = [UIImage imageNamed:@"refresh.png"];
UIButton *rButton = [UIButton buttonWithType:UIButtonTypeCustom];
[rButton setImage:img forState:UIControlStateNormal];
[rButton addTarget:vc action:@selector(didTapRefreshButton:) forControlEvents:UIControlEventTouchUpInside];
rButton.frame = CGRectMake(0.0f, 0.0f, img.size.width, img.size.height);
UIBarButtonItem *rButtonItem = [[UIBarButtonItem alloc] initWithCustomView:rButton];

self.navigationItem.rightBarButtonItem = rButtonItem;
[rButtonItem release]; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:35:36.960

Instagram 的“导航栏”不是导航栏。这是一个表格部分的标题。您会注意到，当您点击照片时，整个导航栏会滑开。那是因为它是表格视图控制器的一部分，而不是“真正的”导航栏。

您可以通过使用 UINavigationController 但隐藏导航栏 (setNavigationBarHidden:YES) 来实现此目的。您只需在要推送时手动调用 pushViewController:animated: 即可。

有趣的是，Instagram 的其他标签看起来只是使用普通的导航栏，并没有做任何花哨的事情。我猜他们真的想把这 44 分重新放在主屏幕上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T22:28:59.440

在示例代码中采用相同的方法，但不是增加 tableview 的高度，而是预先加载了额外的（不可见高度），然后通过减小框架的 y 将其向上移动。额外的高度将在屏幕外。如果内容高度不够大而无法离屏，那么您不需要离屏高度。

在开始时添加一个 height = 0 的标题，向下滚动时它会增加大小，最多为 100（空标题现在将不在屏幕上）。这样，滚动时内容就不会被截断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T13:33:57.970

您可以在您想要在导航栏上添加效果的课程中使用下面提到的方法，就像在 Instagram 中一样。

```
 - (void)scrollViewDidScroll:(UIScrollView *)sender {
//Initializing the views and the new frame sizes.
UINavigationBar *navbar =self.navigationController.navigationBar;
UIView *tableView = self.view;
CGRect navBarFrame = self.navigationController.navigationBar.frame;

CGRect tableFrame = self.view.frame;

//changing the origin.y based on the current scroll view.
//Adding +20 for the Status Bar since the offset is tied into that.

if (isiOS7) {
     navBarFrame.origin.y = MIN(0, MAX(-44, (sender.contentOffset.y * -1)))  +20 ;
     tableFrame.origin.y = navBarFrame.origin.y + navBarFrame.size.height;
}else{
    navBarFrame.origin.y = MIN(0, (sender.contentOffset.y * -1)) +20;
    tableFrame.origin.y = MIN(0,MAX(-44,(sender.contentOffset.y * -1))) ;
}

navbar.frame = navBarFrame;
tableView.frame = tableFrame;

} 
```

# django - Django - 在一个项目中一起使用不同的应用程序

> ID：15372251
> 
> 赞同：1
> 
> 时间：2013-03-12T21:14:29.237
> 
> 标签：django, django-templates, django-views, django-apps

在到目前为止我发现的基本 Django 教程和文档中，应用程序被视为项目的一些独立部分。不过，我还没有找到在复杂项目中一起使用它们的解决方案。

我们可以在某个 url 上注册`domain/signup`，它由`users.views.signup`.

*   对于 GET 请求`signup`呈现`signup.html`.
*   对于 POST 请求，在评估发布的数据后，它要么呈现`signup.html` 一些消息，要么注册一个新用户，将他/她登录并重定向到某个地方。

我们可以在`domain/new_post`（或`domain/user/new_post`）创建一个新帖子，由 处理`posts.views.new_post`。它的行为类似于`signup`处理程序：

*   对于 GET 请求，它呈现`new_post.html`.
*   对于 POST 请求，它评估发布数据，然后 `new_post.html`使用消息呈现或注册新帖子并重定向到某个地方。

一个一般的网站是由几个应用程序组成的，在某些 url 上显示的请求的网页提供了几个应用程序的功能。
例如，登录一些流行的社交网站后，我们可以在我们的墙上创建新条目，搜索用户（通常是更广泛的搜索，但为了简单起见，我们只处理用户），广告和我们的朋友也可能是在侧边栏中列出。

**这些部分是如何从不同应用程序的不同视图和模板构建的？**
为了使问题更具体：

*   对于在某个 url 收到的 GET 请求，我们如何将 user-search-form、new-post-form 和 friends-list 一起显示？
    如果我们通过一些项目级别的通用视图来做到这一点，那么应用级别的视图呢？
    我已经读到该`{% include %}`标签对于从几个“子模板”构建模板很方便，但是包含的模板所采用的不同变量呢？
*   我们如何处理与用户搜索相关的 GET 请求，以及可能从同一 url 发送的与新帖子相关的 POST 请求？
    （“从 url 发送的请求”的表述可能不恰当，但用户可以通过对显示在一个特定 url 的页面进行操作来发送不同的请求。）
*   此外，不同的组件应该保持解耦。

*注意：这个问题对于 SO 来说可能太笼统了，所以除了详细的答案之外，我还希望得到资源，可能会提供“实际”使用不同应用程序的示例。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:44:56.860

> 对于在某个 url 收到的 GET 请求，我们如何将 user-search-form、new-post-form 和 friends-list 一起显示？

您可以请求从任何视图呈现任何模板。Django 将在每个注册的应用程序中搜索模板以查找`template`目录。或者您可以使用 指定您自己的模板目录`TEMPLATE_DIR`，但您似乎已经从下一个问题中知道了这一点......

> 如果我们通过一些项目级别的通用视图来做到这一点，那么应用级别的视图呢？

您能否尝试更深入地解释这个问题？

> 我已经读到 {% include %} 标签对于从几个“子模板”构建模板很方便，但是包含的模板所采用的不同变量呢？

从[文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)：

> 包含的模板是使用包含它的模板的上下文呈现的。

如果您有一个部分模板，旨在包括，例如：

```
# hello.html
<h2>Hello {{ person.name }}</h2> 
```

另一个模板包括它：

```
# greeting.html
{% include 'hello.html' %}

render_to_response('greeting.html', {}) 
```

输出将是`Hello`因为您`person`在模板上下文中没有

我不太明白你的第二个要点。你的 django 包只是一个 python 包。如果您有两个应用程序，您可以选择任何方式导入代码，从两个不同的应用程序中导入模块。

例如，在大多数项目中，我最终都会拥有一个`common`应用程序。这通常包含整个 django 项目中使用的实用程序。它通常包含我的基本测试类。

在您的应用程序中，您只需导入

`from yourproject.common.utils import a_function`

为了帮助解耦，django 提供了一个[信号](https://docs.djangoproject.com/en/dev/topics/signals/)框架。您的应用程序可以发出和接收信号。

> Django 包含一个“信号调度器”，当框架中的其他地方发生动作时，它可以帮助解耦的应用程序得到通知。简而言之，信号允许某些发送者通知一组接收者某些动作已经发生。当许多代码段可能对相同的事件感兴趣时，它们特别有用。

# bash - 网页监控脚本返回误报

> ID：15372252
> 
> 赞同：0
> 
> 时间：2013-03-12T21:14:32.927
> 
> 标签：bash, if-statement, webpage, crontab, monitor

我正在尝试自动化一个以前需要全职工作的过程：监控一系列网站的新帖子。这似乎是一个相对简单的脚本问题，所以我解决了它，编写了一个 bash 脚本，并将其设置为在 crontab 中每分钟运行一次。它工作得很好，但是在页面更改后，它会在一个小时左右的时间里不断返回误报，我终生无法弄清楚为什么。一段时间后它会自行解决，但我不想部署脚本，直到我了解发生了什么。这是我的代码：

```
#!/bin/bash

SITENAME=example

wget http://web.site.url/apache/folder/$(date +%Y)/$(date +%m)-$(date +%B) -O $SITENAME.backend.new --no-cache 
touch $SITENAME.backend.old
diff $SITENAME.backend.new $SITENAME.backend.old > $SITENAME.backend.diff

if [ -s $SITENAME.backend.diff ]
then  sendemail -xu myaddress@mydomain.com -xp password -f myaddress@mydomain.com -t myaddress@mydomain.com -s smtpout.secureserver.net -u $SITENAME -m backend \
&& cp $SITENAME.backend.new $SITENAME.backend.old \
&& echo true

fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:39:08.790

如果差异之间的唯一区别是*绝对*链接或非*绝对*链接，请考虑使用`--convert-links`开关 for `wget`，就像那个人说的：

> ```
>  -k
>   --convert-links 
> ```
> 
> 下载完成后，将文档中的链接进行转换，使其适合本地查看。这不仅影响可见的超链接，还影响链接到外部内容的文档的任何部分，例如嵌入的图像、到样式表的链接、到非 HTML 内容的超链接等。

这会将链接转换为*绝对*链接。

# php - mysql_num_rows 抛出警告并且不继续

> ID：15372255
> 
> 赞同：0
> 
> 时间：2013-03-12T21:14:39.233
> 
> 标签：php, mysql, warnings

我的代码引发了搜索代码的警告。警告是 SCREAM：错误抑制忽略 (!) 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 15 行的 C:\wamp\www\test\search.php 中给出

代码是

```
<html>
    <head>
    </head>
<body>  
<?php
    mysql_connect("localhost","root","") or die (mysql_error());
    mysql_select_db("list") or die (mysql_error());

    if(empty($_POST) === false)
    {
        $data=$_POST['criteria'];

        $get=mysql_query('SELECT SRNO, fname, lname, phone, email, address, comments from names where fname='.$data);
        if (mysql_num_rows($get)==0) 
            {
                echo 'There are no search results!!';
            }
                else
            {
                echo '<table border=0 cellspacing=25 cellpadding=1>';
                echo'<tr><th>Sr. No</th><th>First Name</th><th>Last Name</th><th>Phone No</th><th>E-mail</th><th>Address</th><th>Comments!!</th><th>Modify</th><th>Delete!</th></tr>';      
                while($get_row=mysql_fetch_assoc($get))
                    {
                        echo '<tr><td>'.$get_row['SRNO'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['email'].'</td><td>'.$get_row['address'].'</td><td>'.$get_row['comments'].'</td><td><a href="index.php?edit='.$get_row['SRNO'].'">Edit</a></td><td><a href="index.php?delete='.$get_row['SRNO'].'">Delete</a></td></tr>';

                    }
                echo '</table>';
            }
        /*
        if(mysql_num_rows($getf) == 0)
        {
            $getel=mysql_query('SELECT SRNO, fname, lname, phone, email, address, comments from names where lname='.$_GET['$data']));

        }*/
    }
        echo '<form action="" method="post">';  
        echo '<input type="text" name=criteria>';
        echo '<input type="submit" value="search" name="submit">';
        echo '</form>';

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:17:24.260

您的查询有问题。尝试：

```
$get = mysql_query("SELECT SRNO, fname, lname, phone, email, address, comments from names where fname = '" . mysql_real_escape_string($data) . "'"); 
```

需要`fname`用引号括起来，因为它是一个字符串。

此外，您的脚本对 sql 注入开放。您应该考虑使用[PDO](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:17:24.083

那是因为您的 sql 失败并且`$get`是错误的。尝试这个：

```
$get=mysql_query("SELECT SRNO, fname, lname, phone, email, address, comments from names where fname='" . mysql_real_escape_string($data) . "'"); 
```

请注意，`mysql_real_escape_string`当有人决定使用 sql 注入攻击您的站点时，我还添加了它可以防止您哭泣。此外，您应该考虑不使用 mysql_* 函数并切换到准备好的语句，因为这些函数已被弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:17:34.780

函数`mysql_query`在错误尝试时返回 FALSE

```
 if ($get) {
    if (mysql_num_rows($get)==0) {
       ...
 } else {
    echo mysql_error();
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T21:18:11.777

假设这`$get`是一个布尔值并且它是假的，那么`mysql_query()`很可能返回假。

来自手册： http: [//php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。
> 
> 返回的结果资源应该传递给 mysql_fetch_array() 和其他处理结果表的函数，以访问返回的数据。
> 
> 使用 mysql_num_rows() 找出 SELECT 语句返回了多少行，或使用 mysql_affected_rows() 找出有多少行受到 DELETE、INSERT、REPLACE 或 UPDATE 语句的影响。
> 
> 如果用户无权访问查询引用的表，mysql_query() 也会失败并返回 FALSE。

# xcode - 如何根据 iPhone 屏幕的大小更改图像？请帮助我

> ID：15372256
> 
> 赞同：0
> 
> 时间：2013-03-12T21:14:42.293
> 
> 标签：xcode, uiimageview, size, screen

在我的应用程序的首页上，我有两个图像，它们位于两个按钮的一部分上。按钮会自动重新缩放（通过取决于 iPhone 屏幕的大小。不幸的是，当图像重新缩放时，它最终会变得非常难看。

我可以根据 iphone 屏幕的大小指定两个图像的大小和位置（通过代码）吗？如果是这样，我将如何去做？

感谢您帮助新手！

2013 年 3 月 13 日更新

这是我之前尝试过的代码。它不会导致错误，但页面上不会出现图像！

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        UIImageView *myImageView = [[UIImageView alloc]initWithFrame: CGRectMake(220, 2.5, 95, 75)];
        myImageView.image = [UIImage imageNamed:@"BFS.png"];
        UIImageView *myImageViewtwo = [[UIImageView alloc]initWithFrame: CGRectMake(300, 100, 95, 75)];
        myImageViewtwo.image = [UIImage imageNamed:@"RMS.png"];

    }
    if(result.height == 568)
    {
        UIImageView *myImageView = [[UIImageView alloc]initWithFrame: CGRectMake(100, 400, 95, 75)];
        myImageView.image = [UIImage imageNamed:@"BFS.png"];
        UIImageView *myImageViewtwo = [[UIImageView alloc]initWithFrame: CGRectMake(100, 300, 95, 75)];
        myImageViewtwo.image = [UIImage imageNamed:@"RMS.png"];

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:03:33.953

您可以在透明按钮后面使用 2 个不同的图像和 UIImageViews，并根据屏幕大小设置它们的大小。

获取屏幕大小的代码：

```
int h = [[UIScreen mainScreen] bounds].size.height; 
```

然后，检查

```
if([[UIScreen mainScreen] bounds].size.height == 480) { 

  imgVw1.frame = CGRectMake(x, y, w, h);
  imgVw1.image = [UIImage imagenamed:@"....png"];
} //iPhone-4

if([[UIScreen mainScreen] bounds].size.height == 568) {

  imgVw1.frame = CGRectMake(x, y, w, h);
  imgVw1.image = [UIImage imagenamed:@"...@2x.png"];
} //iPhone-5 
```

你可以为它拍两张照片。

1.  imgButton.png ->**正常**

2.  imgButton@2x.png ->**视网膜显示**

* * *

**编辑代码**

在 .h 文件中，

```
@property(nonatomic, retain) IBOutlet UIButton *btn; 
```

在。m 文件，

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;

    if(result.height == 480)
    {
        [btn setFrame:CGRectMake(75, 20, 175, 100)];
        [btn setImage:[UIImage imageNamed:@"Img_Circle.png"] forState:UIControlStateNormal];
    }
    if(result.height == 568)
    {
        [btn setFrame:CGRectMake(65, 60, 200, 120)];
        [btn setImage:[UIImage imageNamed:@"Img_Circle@2x.png"] forState:UIControlStateNormal];
    }
} 
```

因为我们已经在 .h 文件中声明了属性，所以这里不需要再次分配。
只需简单地为它设置框架。

希望这对您有所帮助。
谢谢。

# canvas - 从 getImageData (Javascript) 创建纹理

> ID：15372257
> 
> 赞同：1
> 
> 时间：2013-03-12T21:14:42.527
> 
> 标签：canvas, webgl, textures, texture-mapping, getimagedata

是否可以从另一个画布的 getImageData 数组（在同一个 html 页面中）创建纹理（用于画布中的元素）？也许没有three.js？非常感谢，

珍妮弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:46:59.803

WebGL`texImage2D`方法最酷的地方在于它的最后一个参数可以是 DOM 元素而不是 ArrayBuffer，在这种情况下，它会将渲染的内容复制到您的纹理对象中。

例如：

```
var canvas2d = document.getElementById('canvas2d');
gl.bindTexture(gl.TEXTURE_2D, myTexture);
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas2d); 
```

[这里](http://webglfactory.blogspot.com/2011/06/render-text-with-canvas-2d.html)有一个关于这个功能的小教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:38:18.083

这就是 getImageData 的重点，获取图像来操作它，然后在任何画布上绘制。

```
imageData = someContext.getImageData(0, 0, canvasWidth, canvasHeight);
anotherContext.putImageData(imageData, 0, 0); 
```

做这样的事情：http: [//jsfiddle.net/jaibuu/myRGr/](http://jsfiddle.net/jaibuu/myRGr/)

如果你不打算进行像素操作，你应该只使用 drawImage()，而不使用 getImageData/putImageData，虽然速度较慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:08:52.560

是的，texImage2D 可以采用 ImageData。

```
var imageData = some2DCanvasContext.getImageData(...);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, imageData); 
```

这是测试此功能的 WebGL 一致性测试之一

[https://www.khronos.org/registry/webgl/sdk/tests/conformance/textures/tex-image-and-sub-image-2d-with-image-data.html](https://www.khronos.org/registry/webgl/sdk/tests/conformance/textures/tex-image-and-sub-image-2d-with-image-data.html)

# jquery - Joomla！在本地加载 jQuery 库（无需 Internet 连接）

> ID：15372259
> 
> 赞同：0
> 
> 时间：2013-03-12T21:14:51.433
> 
> 标签：jquery, joomla, joomla2.5

我有一个 Joomla！使用 jQuery 的模板。在连接到 Internet 的本地计算机上工作时，该网站运行良好。

如果没有 Internet，页面将显示一个空白页面，页面中心有一个进程栏。

jQuery 在我的模板中包含在哪里？如何在本地加载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:21:38.633

脚步：

1.  确定您正在使用的模板的名称（检查后端）
2.  转到 /templates/YOURTEMPLATEFOLDER/index.php
3.  搜索 jQuery

你会发现类似的东西（也许）：

`$doc->addScript('http://www.example.com/jquery.js', 'text/javascript');`

1.  将 jQuery 复制到本地模板文件夹中（在 js 或 javascript 文件夹下）

2.  在 index.php 中替换为该行（在需要的地方调整！！！）：

`$doc->addScript($this->baseurl.'/templates/'.$this->template.'/js/jquery.js', 'text/javascript');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:28:06.073

这是我们用来确保只导入 1 个 jQuery 副本的代码，如果不是，则应从特定位置加载：

```
<?php
  // load jQuery, if not loaded before
  if(!JFactory::getApplication()->get('jquery')){
     JFactory::getApplication()->set('jquery',true);
     $doc = JFactory::getDocument();
     $doc->addScript(JUru::root() . 'templates/TEMPLATE_NAME/js/jquery.js');
  }
?> 
```

希望这可以帮助

# c# - 将 ASCII 转换为 HEX 保留换行符

> ID：15372265
> 
> 赞同：-1
> 
> 时间：2013-03-12T21:14:56.037
> 
> 标签：c#, .net, hex, ascii

好的，所以我正在制作一个 ASCII 到 HEX 转换器，它工作正常，但是当我插入换行符时，它会用这个字符替换它们 -> Ú

即
转这个

> 1
> 2
> 3

对此

> 1Ú2Ú3

命令按钮下的代码

```
 private void asciiToHex_Click(object sender, EventArgs e)
    {
        HexConverter HexConvert =new HexConverter();
        string sData=textBox1.Text;
        textBox2.Text = HexConvert.StringToHexadecimal(sData);
    }

    private void hexToAscii_Click(object sender, EventArgs e)
    {
        HexConverter HexConvert = new HexConverter();
        string sData = textBox1.Text;
        textBox2.Text = HexConvert.HexadecimalToString(sData);
    } 
```

HexConverter.cs 下的代码

```
public class HexConverter
{
    public string HexadecimalToString(string Data)
    {
        string Data1 = "";
        string sData = "";

        while (Data.Length > 0)
        //first take two hex value using substring.
        //then  convert Hex value into ascii.
        //then convert ascii value into character.
        {
            Data1 = System.Convert.ToChar(System.Convert.ToUInt32(Data.Substring(0, 2), 16)).ToString();
            sData = sData + Data1;
            Data = Data.Substring(2, Data.Length - 2);
        }
        return sData;
    }
    public string StringToHexadecimal(string Data)
    {
        //first take each charcter using substring.
        //then  convert character into ascii.
        //then convert ascii value into Hex Format

        string sValue;
        string sHex = "";
        foreach (char c in Data.ToCharArray())
        {
            sValue = String.Format("{0:X}", Convert.ToUInt32(c));
            sHex = sHex + sValue;
        }
        return sHex;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:29:56.977

问题是`String.Format("{0:X}", Convert.ToUInt32(c))`它的输出没有补零到两位数，所以`\r\n`变成`DA`了`0D0A`. 你会遇到类似的问题，但更糟糕的是，使用`\t`(它变成`9`而不是`09`，这也会导致后续字符不对齐)。

要将零填充到两位数，您可以使用`X2`代替 bare `X`; 或者，更一般地说，您可以使用零填充到*n*位。（请参阅[MSDN 上的“标准数字格式字符串”页面](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)。）`X*n*`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:24:59.153

代替

`System.Convert.ToUInt32(hexString)`， 利用

`uint.Parse(hexString, System.Globalization.NumberStyles.AllowHexSpecifier);`

MSDN 说[“AllowHexSpecifier 标志表示要解析的字符串总是被解释为十六进制值”](http://msdn.microsoft.com/en-us/library/system.globalization.numberstyles%28v=vs.100%29.aspx)

[如何：在十六进制字符串和数字类型之间进行转换](http://msdn.microsoft.com/en-us/library/bb311038.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T21:22:10.213

你能做的最懒惰的事情就是`string.replace("Ú","\r\n")`对结果做 a 。除非有令人信服的理由不这样做，否则我会从这里开始。

否则，在您的 Char 循环中，查找 NewLine 字符并将其按原样添加到您的字符串中。*

# ios - 导航栏中的背景图像 转到屏幕顶部

> ID：15372268
> 
> 赞同：0
> 
> 时间：2013-03-12T21:15:02.697
> 
> 标签：ios, objective-c, xcode, navigationbar

为什么背景图片出现在顶行下方，在这里我可以看到时间、电池电量和其他信息。其他应用程序中的这条线是黑色的。我是说接下来

![在此处输入图像描述](../Images/4067aa2c6e6796fcaa858e7ef3b17e54.png)

所以我在情节提要中创建导航控制器

![在此处输入图像描述](../Images/75395c7dff17da0c9763e950a15d5d3c.png)

所以我有下一个代码，首先是在 viewDidLoad

![在此处输入图像描述](../Images/9556b4405fcb1c7e826e50d1645640a9.png)

我的backGroundLayer是320x44

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:25:26.650

状态栏（接收、时间、电池电量等）和导航栏（标题、返回按钮等）是应用程序中两个完全不同的区域。[self.navigationBar setBackgroundImage] 只控制导航栏的外观。如果您想更改状态栏的外观，请单击您的 Xcode 项目并转到 iPhone/iPod 部署信息 > 状态栏。在那里，您可以更改状态栏的外观，包括颜色、背景和可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:23:07.057

状态栏会更改以匹配背景图像集的颜色。如果您不希望这种情况发生，您可以使用下面的代码将状态栏样式设置为黑色半透明，或者在您的 Xcode 项目中的 iPhone/iPod 部署信息 -> 状态栏下更改它。

```
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:NO]; 
```

# ember.js - 如何在多个 ember 视图及其关联对象之间建立关联？

> ID：15372274
> 
> 赞同：0
> 
> 时间：2013-03-12T21:15:19.793
> 
> 标签：ember.js, views, controllers

我对模板、视图和模型之间的关系感到困惑。

我知道视图的主要作用之一是将原始事件转换为语义事件，但我不清楚我应该如何为视图提供必要的数据。

我有一个 calendar_month 模板。关联`CalendarMonth`对象有一个`CalendarWeek`对象数组，每个对象都有一个对象数组`CalendarDay`。（这些不是模型，因为它们不会持久存在——它们是对象，在 中生成`CalendarMonthRoute`）。

所以我的模板看起来像这样：

```
<table>
  {{#each week in weeks}}
    <tr>
      {{#each day in week.days}}
        <td>
          {{#view App.CalendarDayView}}
            {{ day.monthDay }}
          {{/view}}
        </td>
      {{/each}}
    </tr>
  {{/each}}
</table> 
```

我希望每个`CalendarDayView`响应点击，但我不知道如何访问特定的日历日对象，该对象应该与每个对应`CalendarDayView`的 .

```
App.CalendarDayView = Ember.View.extend({
  click: function(evt) {
    // do something here... but how do I know which day was clicked?
  }
}); 
```

我认为我可能没有正确设置它。每个`CalendarDay`视图是否应该有它自己的关联实例 a ，提供对相应对象`CalendarDayController`的代理访问？`CalendarDay`如果是这样，那不是需要多个实例`CalendarDayController`吗？（我的理解是控制器是单例的——每种类型只应该存在一个。）

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:21:48.130

这可以通过使用操作助手轻松实现，您可以使用它轻松地将上下文对象传递给处理程序方法：

```
<table>
  {{#each week in weeks}}
    <tr>
      {{#each day in week.days}}
        <td>
          {{#view App.CalendarDayView}}
            <a {{action yourAction day target="view"> {{ day.monthDay }} </a>
          {{/view}}
        </td>
      {{/each}}
    </tr>
  {{/each}}
</table> 
```

以及相应的视图：

```
Vollipop.CalendarDayView = Ember.View.extend({
  yourAction : function(day){
    // perform your work on the day
  }
}); 
```

# javascript - 日期为 2013 年 4 月 1 日，而不是 2013 年 3 月 31 日

> ID：15372275
> 
> 赞同：3
> 
> 时间：2013-03-12T21:15:20.413
> 
> 标签：javascript, date

`mm-dd-yyyy`我有这两个函数以`31-03-2013`正确`04-01-2013`的格式创建一个新字符串（一个月后……

下面是两个函数：

```
Date.prototype.sqlDate = Date.prototype.sqlDate || function () {
    return this.getMonth() + "-" + this.getDate() + "-" + this.getFullYear();
};

String.prototype.sqlDate = String.prototype.sqlDate || function () {
    var date = new Date(0);
    var s = this.split("-");
    //If i log "s" here its output is: 
    //    ["31", "03", "2013", max: function, min: function]
    date.setDate(s[0]);
    date.setMonth(s[1]);
    date.setYear(s[2]);
    return date.sqlDate();
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T21:17:32.623

Month of Date 是介于 0-Jan 和 11-Dec 之间的数字，

所以3是4月...

这非常烦人，因为：

*   **天**- 1 到 31\. 基于一个的索引
*   **月**- 0 到 11。基于零的索引。

嗯... javascript 的规范... 继续。

[**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

您可以使用它来设置它：

```
date.setMonth(parseInt(s[1], 10) - 1); 
```

你可以在这里看到它的工作原理：

![例子](../Images/e15bf5ec506cb92208cf2f853b58a622.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:20:20.137

试试这个：

```
String.prototype.sqlDate = String.prototype.sqlDate || function () {
    var date = new Date(0);
    var s = this.split("-");
    //If i log "s" here its output is: 
    //    ["31", "03", "2013", max: function, min: function]
    date.setDate(s[0]);
    date.setMonth(parseInt(s[1],10)-1);
    date.setYear(s[2]);
    return date.sqlDate();
}; 
```

# c++ - C++11 类型检查代码的奇怪编译器警告

> ID：15372276
> 
> 赞同：0
> 
> 时间：2013-03-12T21:15:23.977
> 
> 标签：c++, templates, c++11, gcc-warning, typetraits

我正在编写一个带有进位/溢出检查的通用加法器，并且大量使用了 c++11 类型检查功能。

这是我的代码：

```
#include <iostream>
using namespace std;
#define MIN_OF(TYPE) ( (std::is_signed<decltype(res)>::value) ? \
                                (1 << ( ( sizeof(decltype(res)) * 8 ) - 1)) : \
                                0 )

#define MAX_OF(TYPE) (~MIN_OF(TYPE))

#define ABS(x)  (x < 0 ? -x : x)

class Flags
{
public:
    void setSign(bool x)
    {
        cout << boolalpha;
        cout << "setSign: " << x << endl;
    }
    void setOverflow(bool x)
    {
        cout << boolalpha;
        cout << "setOverflow: " << x << endl;
    }
    void setCarry(bool x)
    {
        cout << boolalpha;
        cout << "setCarry: " << x << endl;
    }
    void setZero(bool x)
    {
        cout << boolalpha;
        cout << "setZero: " << x << endl;
    }
};

template <typename TYPE, TYPE def>
class Value
{
public:
static inline TYPE get()
{
    return def;
}
static inline void set(TYPE x)
{
    cout << "value: " << hex << x << endl;
}
};

template <class A, class B, class RES>
struct ADD
{
static void Do(Flags* _flags)
{
    if (std::is_convertible<decltype(A::get()),decltype(RES::get())>::value)
    {
        decltype(A::get()) _a = A::get();
        decltype(B::get()) _b = B::get();

        decltype(RES::get()) res = _a;

        if (_b != 0)
        {
            res = res + _b;

            if (std::is_signed<decltype(res)>::value)
            {
                unsigned char highestbit_a = static_cast<unsigned char>(0x1 & (_a >> (( sizeof(decltype(_a)) * 8 ) - 1)));
                unsigned char highestbit_b = static_cast<unsigned char>(0x1 & (_b >> (( sizeof(decltype(_b)) * 8 ) - 1)));
                unsigned char highestbit_res = static_cast<unsigned char>(0x1 & (res >> (( sizeof(decltype(res)) * 8 ) - 1)));

                _flags->setSign( (res < 0) );
                _flags->setOverflow( ((highestbit_a & highestbit_b) != highestbit_res) );
            }
            else
            {
                _flags->setSign( false );
                _flags->setOverflow( false );
            }

            bool setCarryFlag = false;

            if (std::is_signed<decltype(_b)>::value)
            {
                if(_b < 0)
                {
                    /* as _b is negative, we add _b to lowest_res, if the result
                     *  is greater as _a, _a + _b (with _b as negative number) would
                     * result in an carry out
                     */
                    setCarryFlag = (static_cast<decltype(_a)>(ABS((MIN_OF(decltype(res)) - _b))) > _a);
                }
                else
                {
                    setCarryFlag = (static_cast<decltype(_a)>((MAX_OF(decltype(res)) - _b)) < _a);
                }
            }
            else
            {
                //get difference of one summand to results highest until carry
                /* MARKED LINE: this branch gets wrongly checked */
                setCarryFlag = ((MAX_OF(decltype(res)) - _b) < _a);
            }

            _flags->setCarry( setCarryFlag );
        }
        else
        {
            if (std::is_signed<decltype(res)>::value)
            {
                _flags->setSign( (res < 0) );
            }
        }

        _flags->setZero( (res == 0) );

        //store result
        RES::set(res);
    }
}
};

int main()
{
Flags* f = new Flags();
ADD<Value<unsigned int, 1>, Value<signed int, 6>, Value<unsigned int, 1>>::Do(f);

return 0;
} 
```

问题出现在“MARKED LINE:”。通常，我会理解编译器不会使用这个分支，因为 _b 是有符号 int 的类型，所以 is_signed 应该是真的，所以编译器应该只使用 if-branch 中的 whats 并丢弃 else 分支。但它似乎没有这样做，因为我收到警告：

```
 warning: comparison between signed and unsigned integer expressions [-Wsign-compare]| 
```

指向这条线。但这不是我想要的。任何想法如何告诉编译器做正确的事情？

编译器是：x86-64 上的 gcc 4.7.2，debian

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:20:56.400

这是一个警告，而不是错误。警告用于警告您可能不想做但合法的事情。在这种情况下你想这样做，所以忽略它。您可以使用编译指示忽略该警告，但我建议记录您如何知道它对未来的开发人员是安全的。

用于禁用此警告的 GCC 特定编译指示是：

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wsign-compare"
setCarryFlag = ((MAX_OF(decltype(res)) - _b) < _a);
#pragma GCC diagnostic pop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:28:36.890

这里的问题是编译器正在编译所有代码，即使是那些将成为死代码的代码，因为它不知道更好。

我相信，经典的解决方案是~~提供另一个默认值为 的模板参数，`std::is_signed<B::get()>::value`然后专门处理该参数~~*. 但是由于您正在测试两个参数的签名性，这将变得复杂。

另一种选择可能只是在 if 条件内创建一个有符号变量并使用它。这将简单地绕过警告。

```
if (std::is_signed<decltype(res)>::value) {
    typename std::make_signed<decltype(res)>::type sres = res;
    // now use sres
} 
```

* * *

^(*Xeo 提醒我，你不能部分专门化函数模板，所以经典的解决方案实际上是标签调度。)

# uiscrollview - 如何连接 UIPageControl 使其与其他控件一起向上滚动？

> ID：15372280
> 
> 赞同：1
> 
> 时间：2013-03-12T21:15:45.340
> 
> 标签：uiscrollview, uipagecontrol

我在视图控制器的主 UIView 中放置了一个 UIScrollView。

然后我在视图底部添加了一些控件，并在顶部附近添加了一个 UIPageControl。

当我滚动视图时，底部控件滚动正常，但 UIPageControl 保持在原位，因此它最终阻止了底部的按钮和标签。

如何使 UIPageControl 及其视图随其余部分向上或向下滚动？

这是它的样子

![故事板场景](../Images/0b4dd551130df02cb44a8f8c3412b838.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T17:49:20.483

我让它工作：

1) 将所有视图/控件放入 containerView 并将其声明为属性。

2）添加此代码：

```
-(void)viewDidLayoutSubviews{
    [super viewDidLayoutSubviews];
    self.scrollView.contentSize = self.containerView.bounds.size;
}

- (void)viewDidLoad{
    [super viewDidLoad];

    //added with containerview from g8productions
    self.containerView =  [[UIView alloc] initWithFrame:CGRectMake(36, 59, 900, 1200)];
    self.scrollView.translatesAutoresizingMaskIntoConstraints = NO;
    [self.scrollView addSubview:self.containerView];
    [self.scrollView setContentSize:self.containerView.bounds.size];
} 
```

现在它滚动了！:)

# delphi - 如何将 SO_KEEPALIVE 与 TServerSocket 一起使用？

> ID：15372281
> 
> 赞同：0
> 
> 时间：2013-03-12T21:15:45.517
> 
> 标签：delphi, sockets, winsock

该组件是否具有设置选项属性或者我需要使用 setsockopt 功能？

我想启用内置在 Keep-alive 中的操作系统，而不是我自己编写它...... -.-”

所以，我的问题是，在我创建 TServerSocket 实例的构造函数中，我该如何启用这个 SO_KEEPALIVE 选项？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:13:35.083

您可以使用 setsockopt 设置 SO_KEEPALIVE

```
implementation

uses
  WinSock;

{$R *.dfm}

procedure TForm2.ClientConnect(Sender: TObject; Socket: TCustomWinSocket);
var
  OptVal: DWORD;
begin
  OptVal := 1;
  if setsockopt(Socket.SocketHandle, SOL_SOCKET, SO_KEEPALIVE, PAnsiChar(@OptVal), SizeOf(OptVal)) = SOCKET_ERROR then
    raise Exception.Create(Format('WinSock Error %d', [WSAGetLastError()]));
end;

procedure TForm2.FormCreate(Sender: TObject);
begin
 s := TServersocket.Create(Self);
 s.Port := 8090;
 s.OnClientConnect := ClientConnect;
 s.Open;
end; 
```

# java - Guice 中具有间接依赖关系的多个实现

> ID：15372284
> 
> 赞同：3
> 
> 时间：2013-03-12T21:15:49.093
> 
> 标签：java, dependency-injection, guice

我的 Java 代码使用接口的多个实现（下例中的 BugTemplate），其中绑定的实现取决于上下文。

在 Guice 中，我相信实现这一点的正确方法是使用 BindingAnnotations。但是，我的用例与规范示例不同，因为上下文从接口的实现中移除了一层。

总结可能的依赖关系：

> FooBugFinder -> BugFiler -> FooBugTemplate
> 
> BarBugFinder -> BugFiler -> BarBugTemplate
> 
> 等等

示例代码：

```
class FooBugFinder {
  // ...
  public findBugsAndFileThem() {
    List<Bug> bugs = findBugs();
    bugFiler.fileBugs(bugs);
  }
  @Inject
  FooBugFinder(BugFiler bugFiler) {
    // BugFiler should have been instantiated with a FooBugTemplate.
    this.bugFiler = bugFiler;
  }
}

class BugFiler {
  // ...
  public fileBugs(List<Bug> bugs) {
    List<FormattedBugReport> bugReports = bugTemplate.formatBugs(bugs);
    fileBugReports(bugReports);
  }
  @Inject
  BugFiler(BugTemplate bugTemplate) {
    // The specific implementation of BugTemplate is context-dependent.
    this.bugTemplate = bugTemplate;
  }
}

interface BugTemplate {
  List<FormattedBugReport> formatBugs(List<Bug> bugs);
}

class FooBugTemplate implements BugTemplate {
  @Overrides
  List<FormattedBugReport> formatBugs(List<Bug> bugs) {
    // ...
  }
} 
```

我的第一个想法是对 ctor 进行如下注释：

```
FooBugFinder(@Foo BugFiler bugFiler) { } 
```

但是，当向 BugFiler 的构造函数注入参数时，Guice 怎么知道应用该注释呢？

换句话说，FooBugFinder 需要一个使用 FooBugTemplate 实例化的 BugFiler 实例。BarBugFinder 需要一个使用 BarBugTemplate 实例化的 BugFiler 实例。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:33:56.583

您可以通过创建一个公开注释`BugFiler`对象的私有模块来做到这一点：

```
abstract class BugFilerModule extends PrivateModule {
  private final Class<? extends Annotation> annotation;

  BugFilerModule(Class<? extends Annotation> annotation) {
    this.annotation = annotation;
  }

  @Override protected void configure() {
    bind(BugFiler.class).annotatedWith(annotation).to(BugFiler.class);
    expose(BugFiler.class).annotatedWith(annotation);
    bindBugTemplate();
  }

  abstract void bindBugTemplate();
} 
```

然后，当您创建注入器时：

```
 Injector injector = Guice.createInjector(
        new BugFilerModule(Foo.class) {
          @Override void bindBugTemplate() {
            bind(BugTemplate.class).to(FooBugTemplate.class);
          }
        },
        new BugFilerModule(Bar.class) {
          @Override void bindBugTemplate() {
            bind(BugTemplate.class).to(BarBugTemplate.class);
          }
        },
        /* other modules */); 
```

`FooBugFinder`你可以按照你建议的方式创建一个：

```
public class FooBugFinder {
  @Inject
  public FooBugFinder(@Foo BugFiler fooBugFiler) {
    ...
  }
} 
```

# linq - 使用 AND/OR 动态创建谓词？

> ID：15372288
> 
> 赞同：0
> 
> 时间：2013-03-12T21:16:21.593
> 
> 标签：linq

我有一种方法可以根据多个字段的数据创建谓词。这些字段可以包含逗号分隔的值。我可以创建一个谓词来*OR*字段中的值，但我需要将字段*AND*在一起。

```
 if (model.MICA != null)
        {
            List<string> ids = ParseCSVList(model.MICA); 
            foreach (var id in ids)
            {
                predicate = predicate.Or(m =>  m.idtype == "MICA" && m.idnumber.Contains(id));
            }
        }
** I need to AND these two records together**
        if (model.FRID != null)
        {
            List<string> ids = ParseCSVList(model.FRID);
            foreach (var id in ids)
            {
                predicate = predicate.Or(e => e.idtype == "FRID" && e.idnumber.Contains(id));
            }
        } 
```

在构建谓词时，是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:09:58.897

使用谓词有什么问题。和？

# iphone - 自定义 UIView 在 layoutSubviews 中导致 EXC_BAD_ACCESS 代码 = 1

> ID：15372290
> 
> 赞同：2
> 
> 时间：2013-03-12T21:16:26.060
> 
> 标签：iphone, uiview, ios6, exc-bad-access, layoutsubviews

我创建了一个自定义 UIView，它从 UIViewController 实例化了 3 次。从`viewDidLoad`那个 UIViewController 的方法：

```
self.remainingDays = [[RemainingTileView alloc] initWithFrame:CGRectMake(20, 49, 80, 75)];
self.remainingHours = [[RemainingTileView alloc] initWithFrame:CGRectMake(120, 49, 80, 75)];
self.remainingMinutes = [[RemainingTileView alloc] initWithFrame:CGRectMake(220, 49, 80, 75)];

[self.view addSubview:self.remainingDays];
[self.view addSubview:self.remainingHours];
[self.view addSubview:self.remainingMinutes]; 
```

在 RemainingTileView 类中，我有这个 layoutSubviews 方法：

```
- (void)layoutSubviews {
    [super layoutSubviews];

    if (self.number)    // This is an NSNumber property
        self.numberLabel = [self labelForNumber:[self.number intValue]];
    else
        self.numberLabel = [self labelForNumber:0];

    if (self.unit)    // This is an NSString property
        self.unitLabel = [self labelForUnit:self.unit];
    else
        self.unitLabel = [self labelForUnit:@""];

    [self configView];
} 
```

创建视图时，它`if (self.number)`与堆栈帧一起崩溃：

```
* thread #1: tid = 0x2403, 0x39f6c526 libobjc.A.dylib`objc_retain + 6, stop reason = EXC_BAD_ACCESS (code=1, address=0x10000010)
frame #0: 0x39f6c526 libobjc.A.dylib`objc_retain + 6
frame #1: 0x000dc742 myProject`-[RemainingTileView layoutSubviews](self=0x1e892b80, _cmd=0x344cde51) + 106 at RemainingTileView.m:63
frame #2: 0x3405d802 UIKit`-[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 258
frame #3: 0x33e07d8a QuartzCore`-[CALayer layoutSublayers] + 214
frame #4: 0x33e07928 QuartzCore`CA::Layer::layout_if_needed(CA::Transaction*) + 460
frame #5: 0x33e0885c QuartzCore`CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 16
frame #6: 0x33e08242 QuartzCore`CA::Context::commit_transaction(CA::Transaction*) + 238
frame #7: 0x33e08050 QuartzCore`CA::Transaction::commit() + 316
frame #8: 0x33e07eb0 QuartzCore`CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 60
frame #9: 0x322276cc CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 20
frame #10: 0x322259c0 CoreFoundation`__CFRunLoopDoObservers + 276
frame #11: 0x32225d16 CoreFoundation`__CFRunLoopRun + 742
frame #12: 0x32198ebc CoreFoundation`CFRunLoopRunSpecific + 356
frame #13: 0x32198d48 CoreFoundation`CFRunLoopRunInMode + 104
frame #14: 0x35d6f2ea GraphicsServices`GSEventRunModal + 74
frame #15: 0x340ae300 UIKit`UIApplicationMain + 1120
frame #16: 0x000d3448 Project Countdown`main(argc=1, argv=0x2fd2ecf8) + 116 at main.m:17 
```

`self.number`是 NSNumber 的一个实例。正在从主线程修改 UI。我在 stackoverflow 上寻找了现有的解决方案，但没有任何效果。

我错过了什么？我应该寻找什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T04:03:18.510

看起来您的属性有不正确的声明。可能`assign`或`weak`代替`retain`, `copy`, 或`strong`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:37:55.113

看起来该属性正在返回一些无效对象，而 ARC 试图保留它，然后失败。看起来您最好将检查 nil 值移动到自定义属性访问器中，类似于：

```
- (NSNumber *)number {
    if (_number == nil) {
        _number = [NSNumber numberWithInt:0];
    }
    return _number;
} 
```

然后，您可以简单地将 numberLabel 值设置为 number，而无需在此处检查。你也可以做类似的事情`unit`。

# ruby - 使用 Watir 自动扩展树并选择复选框

> ID：15372292
> 
> 赞同：1
> 
> 时间：2013-03-12T21:16:36.050
> 
> 标签：ruby, checkbox, tree, watir, treenode

在站点上，有一个节点树，每个节点都与一个复选框相关联。然后这些节点进一步扩展为更多复选框。它看起来类似于下面的 where`[]`代表一个复选框：

```
+ [] All
   + [] Fruit
   + [] Vegetables 
```

然后展开看起来像这样：

```
+ [] All
   - [] Fruit
        [] apple
   - [] Vegetables
        [] potato
        [] cucumber 
```

然后在屏幕底部有一个按钮，当按下该按钮时，将为您提供所选商品的价格。

我想在 Watir 中编写一个执行以下事件序列的脚本：

```
1) Expands the node Fruit
2) Checks apple
3) Clicks the run button
4) Unchecks apple
5) Expands the node Vegetables
6) Checks potato
7) Clicks the run button
8) Unchecks potato
etc.. for all checkboxes and nodes 
```

苹果复选框的标签如下所示：

```
<td onmouseover="TreeView_HoverNode(ContentPlaceHolder1_tvPartners_Data, this)" onmouseout="TreeView_UnhoverNode(this)" style="white-space:nowrap;" class="">
  <input type="checkbox" name="ContentPlaceHolder1_tvPartnersn2CheckBox" id="ContentPlaceHolder1_tvPartnersn2CheckBox">
  <a class="ContentPlaceHolder1_tvPartners_0" href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$tvPartners','s0\\0\\189')" onclick="TreeView_SelectNode(ContentPlaceHolder1_tvPartners_Data, this,'ContentPlaceHolder1_tvPartnerst2');" id="ContentPlaceHolder1_tvPartnerst2">
  <font style="color:#FF0000;">apple</font>
</td> 
```

此外，还有更多节点和项目稍后将添加到列表中，因此我需要脚本将其考虑在内并按顺序遍历复选框，而不调用复选框的特定 ID。

解决此问题的任何帮助将不胜感激。非常感谢！

更新：我想出了这段代码，但我想检查最后一个复选框/节点，而不是硬编码 for 循环。我还想跳过水果和蔬菜等节点的复选框。

```
for n in (1...250)
  nodename = "ContentPlaceHolder1_tvPartnersn" + n.to_s
  if ie.a(:id => nodename).exists?
    ie.link(:id, nodename).click
  end
end

ie.checkbox(:id => "ContentPlaceHolder1_tvPartnersn0CheckBox").clear

x = 1
for r in (1...250)
  checkboxname = "ContentPlaceHolder1_tvPartnersn" + x.to_s + "CheckBox"
  nodename = "ContentPlaceHolder1_tvPartnersn" + r.to_s

  if ie.a(:id => nodename).exists?
    x = x+1
    checkboxname = "ContentPlaceHolder1_tvPartnersn" + x.to_s + "CheckBox"
  end

  if ie.checkbox(:id => checkboxname).exists?
    ie.checkbox(:id => checkboxname).set
    puts x
    ie.checkbox(:id => checkboxname).clear    
  end

  x = x + 1
end 
```

更新：这里有更多的 HTML。我实际上有一个哈希设置为 itemlist[[n,"item"]]=item，例如 itemlist[[1,"item"]] = apple，它包含我需要检查价格的所有项目。有没有办法/是否更容易查看每个复选框的文本是什么，然后如果 itemlist.has_value?(checkbox_text) 然后选中该框并将该文本分配给另一个哈希？基本上，有没有办法根据文本而不是复选框的ID来检查框？

```
<td><a id="ContentPlaceHolder1_tvPartnersn0" href="javascript:TreeView_ToggleNode(ContentPlaceHolder1_tvPartners_Data,0,document.getElementById(&#39;ContentPlaceHolder1_tvPartnersn0&#39;),&#39;-&#39;,document.getElementById(&#39;ContentPlaceHolder1_tvPartnersn0Nodes&#39;))"><img src="/WebResource.axd?d=VNrMPzAA2o87avzl3UgiY8OisS6wrOp46COe6QqNhDQHCsy9zX-GTuzHAKk7njulOEns3hNoLIxbv9x1bv530iY_Shsd9ZHlF3pm4jNQi6u0zB6atkT0-K9kirzHDQNHYxlY8Q2&amp;t=634963835619397560" alt="Collapse All (133,060)" style="border-width:0;" /></a></td><td onmouseover="TreeView_HoverNode(ContentPlaceHolder1_tvPartners_Data, this)" onmouseout="TreeView_UnhoverNode(this)" style="white-space:nowrap;"><input type="checkbox" name="ContentPlaceHolder1_tvPartnersn0CheckBox" id="ContentPlaceHolder1_tvPartnersn0CheckBox" /><a class="ContentPlaceHolder1_tvPartners_0" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$tvPartners&#39;,&#39;s0&#39;)" onclick="TreeView_SelectNode(ContentPlaceHolder1_tvPartners_Data, this,&#39;ContentPlaceHolder1_tvPartnerst0&#39;);" id="ContentPlaceHolder1_tvPartnerst0">All (133,060)</a></td>
                </tr>
            </table><div id="ContentPlaceHolder1_tvPartnersn0Nodes" style="display:block;">
                <table cellpadding="0" cellspacing="0" style="border-width:0;">
                    <tr>
                        <td><div style="width:20px;height:1px"></div></td><td><a id="ContentPlaceHolder1_tvPartnersn1" href="javascript:TreeView_ToggleNode(ContentPlaceHolder1_tvPartners_Data,1,document.getElementById(&#39;ContentPlaceHolder1_tvPartnersn1&#39;),&#39;t&#39;,document.getElementById(&#39;ContentPlaceHolder1_tvPartnersn1Nodes&#39;))"><img src="/WebResource.axd?d=D2aGfOHUjBmg4quHNr-mKkyc5juoGHdurzZqtoCU3qo2d457eKX9x0d2AS3LrrQULzPjC-9wC6hLlMxSFEvU6c9r8LmzgOeKWAi6ouEEkShvclKr0&amp;t=634963835619397560" alt="Expand Ace Communications Group (0) &lt;img src=&#39;images/emergency.png&#39; alt=&#39;alert&#39; />" style="border-width:0;" /></a></td><td onmouseover="TreeView_HoverNode(ContentPlaceHolder1_tvPartners_Data, this)" onmouseout="TreeView_UnhoverNode(this)" style="white-space:nowrap;"><input type="checkbox" name="ContentPlaceHolder1_tvPartnersn1CheckBox" id="ContentPlaceHolder1_tvPartnersn1CheckBox" /><a class="ContentPlaceHolder1_tvPartners_0" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$tvPartners&#39;,&#39;s0\\0&#39;)" onclick="TreeView_SelectNode(ContentPlaceHolder1_tvPartners_Data, this,&#39;ContentPlaceHolder1_tvPartnerst1&#39;);" id="ContentPlaceHolder1_tvPartnerst1">Fruit </a></td>
                    </tr>
                </table><div id="ContentPlaceHolder1_tvPartnersn1Nodes" style="display:none;">
                    <table cellpadding="0" cellspacing="0" style="border-width:0;">
                        <tr>
                            <td><div style="width:20px;height:1px"></div></td><td><div style="width:20px;height:1px"><img src="/WebResource.axd?d=UZyrk961AUQRa1Dg14aXeNUU3AZcfF9PiakU0o_cO8MfbyWz58k50vr47p2ICDOjgAqF5UX_lVIhbj_y2BqKRU5Xwhic3cBNooK1CBd_cGP6COn60&amp;t=634963835619397560" alt="" /></div></td><td><img src="/WebResource.axd?d=OftTkmJCEf6tGohvvdo_cbMxdnyHMLxScANk1YxbAhfKKp3_gvqoKFAIbK4gGFAKMagH78cKVSIS61WrK5fGcCaHWVUMPjXLTtDZIJISdqqtXFNI0&amp;t=634963835619397560" alt="" /></td><td onmouseover="TreeView_HoverNode(ContentPlaceHolder1_tvPartners_Data, this)" onmouseout="TreeView_UnhoverNode(this)" style="white-space:nowrap;"><input type="checkbox" name="ContentPlaceHolder1_tvPartnersn2CheckBox" id="ContentPlaceHolder1_tvPartnersn2CheckBox" /><a class="ContentPlaceHolder1_tvPartners_0" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$tvPartners&#39;,&#39;s0\\0\\189&#39;)" onclick="TreeView_SelectNode(ContentPlaceHolder1_tvPartners_Data, this,&#39;ContentPlaceHolder1_tvPartnerst2&#39;);" id="ContentPlaceHolder1_tvPartnerst2"><font style='color:#FF0000;'>apple</font>  </a></td>
                        </tr>
                    </table>
                </div><table cellpadding="0" cellspacing="0" style="border-width:0;">
                    <tr>
                        <td><div style="width:20px;height:1px"></div></td><td><a id="ContentPlaceHolder1_tvPartnersn3" href="javascript:TreeView_ToggleNode(ContentPlaceHolder1_tvPartners_Data,3,document.getElementById(&#39;ContentPlaceHolder1_tvPartnersn3&#39;),&#39;t&#39;,document.getElementById(&#39;ContentPlaceHolder1_tvPartnersn3Nodes&#39;))"><img src="/WebResource.axd?d=D2aGfOHUjBmg4quHNr-mKkyc5juoGHdurzZqtoCU3qo2d457eKX9x0d2AS3LrrQULzPjC-9wC6hLlMxSFEvU6c9r8LmzgOeKWAi6ouEEkShvclKr0&amp;t=634963835619397560" alt="Expand Advantage (0)" style="border-width:0;" /></a></td><td onmouseover="TreeView_HoverNode(ContentPlaceHolder1_tvPartners_Data, this)" onmouseout="TreeView_UnhoverNode(this)" style="white-space:nowrap;"><input type="checkbox" name="ContentPlaceHolder1_tvPartnersn3CheckBox" id="ContentPlaceHolder1_tvPartnersn3CheckBox" /><a class="ContentPlaceHolder1_tvPartners_0" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$tvPartners&#39;,&#39;s0\\0&#39;)" onclick="TreeView_SelectNode(ContentPlaceHolder1_tvPartners_Data, this,&#39;ContentPlaceHolder1_tvPartnerst3&#39;);" id="ContentPlaceHolder1_tvPartnerst3">Vegetable</a></td>
                    </tr>
                </table><div id="ContentPlaceHolder1_tvPartnersn3Nodes" style="display:none;">
                    <table cellpadding="0" cellspacing="0" style="border-width:0;">
                        <tr>
                            <td><div style="width:20px;height:1px"></div></td><td><div style="width:20px;height:1px"><img src="/WebResource.axd?d=UZyrk961AUQRa1Dg14aXeNUU3AZcfF9PiakU0o_cO8MfbyWz58k50vr47p2ICDOjgAqF5UX_lVIhbj_y2BqKRU5Xwhic3cBNooK1CBd_cGP6COn60&amp;t=634963835619397560" alt="" /></div></td><td><img src="/WebResource.axd?d=yCq0KCcfK0lqwrgCU1UxuFJ0bJHMKjxD6S5t8OvIWXwTUBOYh1ZiQA4lD3ZpRuMNI-itrPIn3_rFzvZtrMP5g7PyyensT-Z003WldrY9pIgMSY5p0&amp;t=634963835619397560" alt="" /></td><td onmouseover="TreeView_HoverNode(ContentPlaceHolder1_tvPartners_Data, this)" onmouseout="TreeView_UnhoverNode(this)" style="white-space:nowrap;"><input type="checkbox" name="ContentPlaceHolder1_tvPartnersn4CheckBox" id="ContentPlaceHolder1_tvPartnersn4CheckBox" /><a class="ContentPlaceHolder1_tvPartners_0" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$tvPartners&#39;,&#39;s0\\0\\119&#39;)" onclick="TreeView_SelectNode(ContentPlaceHolder1_tvPartners_Data, this,&#39;ContentPlaceHolder1_tvPartnerst4&#39;);" id="ContentPlaceHolder1_tvPartnerst4">potato</a></td>
                        </tr>
                    </table><table cellpadding="0" cellspacing="0" style="border-width:0;">
                        <tr>
                            <td><div style="width:20px;height:1px"></div></td><td><div style="width:20px;height:1px"><img src="/WebResource.axd?d=UZyrk961AUQRa1Dg14aXeNUU3AZcfF9PiakU0o_cO8MfbyWz58k50vr47p2ICDOjgAqF5UX_lVIhbj_y2BqKRU5Xwhic3cBNooK1CBd_cGP6COn60&amp;t=634963835619397560" alt="" /></div></td><td><img src="/WebResource.axd?d=yCq0KCcfK0lqwrgCU1UxuFJ0bJHMKjxD6S5t8OvIWXwTUBOYh1ZiQA4lD3ZpRuMNI-itrPIn3_rFzvZtrMP5g7PyyensT-Z003WldrY9pIgMSY5p0&amp;t=634963835619397560" alt="" /></td><td onmouseover="TreeView_HoverNode(ContentPlaceHolder1_tvPartners_Data, this)" onmouseout="TreeView_UnhoverNode(this)" style="white-space:nowrap;"><input type="checkbox" name="ContentPlaceHolder1_tvPartnersn5CheckBox" id="ContentPlaceHolder1_tvPartnersn5CheckBox" /><a class="ContentPlaceHolder1_tvPartners_0" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$tvPartners&#39;,&#39;s0\\0\\1&#39;)" onclick="TreeView_SelectNode(ContentPlaceHolder1_tvPartners_Data, this,&#39;ContentPlaceHolder1_tvPartnerst5&#39;);" id="ContentPlaceHolder1_tvPartnerst5">cucumber</a></td>
                        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:24:09.360

您应该使用集合来查找与特定条件匹配的所有元素，而不是对 1 到 250 的循环进行硬编码。

所以而不是

```
for n in (1...250)
  nodename = "ContentPlaceHolder1_tvPartnersn" + n.to_s
  if ie.a(:id => nodename).exists?
    ie.link(:id, nodename).click
  end
end 
```

它应该是

```
ie.links(:id => /ContentPlaceHolder1_tvPartnersn/).each do |link|
  link.click
end 
```

也可以写成

```
ie.links(:id => /ContentPlaceHolder1_tvPartnersn/).each(&:click) 
```

这里的关键是`ie.links(:id => /ContentPlaceHolder1_tvPartnersn/)`返回与条件或定位器匹配的所有链接。正则表达式 (regex) 用于检查 id，因为这允许部分匹配 id（即任何包含 text 的链接 id `ContentPlaceHolder1_tvPartnersn`）。

可以将相同的逻辑应用于脚本的其余部分（请注意，如果没有完整的 html 示例，我猜测您的代码做了什么）：

```
#Expand the entire tree
ie.links(:id => /ContentPlaceHolder1_tvPartnersn/).each(&:click)

#Clear the first checkbox
ie.checkbox(:id => "ContentPlaceHolder1_tvPartnersn0CheckBox").clear

#Set and clear each checkbox
checkbox_id = /ContentPlaceHolder1_tvPartnersn/
ie.checkboxes(:id => checkbox_id).each do |checkbox|
  checkbox.set
  puts checkbox.id
  checkbox.clear
end 
```

根据 'fruit' 和 'vegetable' 节点的 html，它们可能已经被此代码忽略。否则，您可能需要更改 checkbox_id 或添加条件检查。

**更新**

如果要根据文本设置复选框，可以执行以下操作：

```
ie.td(:text => 'apple').checkbox.set 
```

# heroku - Heroku 和欧洲安全港合规性？

> ID：15372294
> 
> 赞同：4
> 
> 时间：2013-03-12T21:16:39.140
> 
> 标签：heroku

我们正在与希望在欧洲推出的客户合作，并且担心 Heroku 是否符合欧洲的安全港规则。我做了一些谷歌搜索，但大多数问题似乎来自 2011 年，没有任何明确的答案。

有人知道这是否有更新吗？我们可以在 Heroku 上为欧洲客户托管网站吗？

# asp.net - 带有 ValidationSummary 的RequiredFieldValidator 不能在空文本框中使用输入键

> ID：15372295
> 
> 赞同：0
> 
> 时间：2013-03-12T21:16:43.350
> 
> 标签：asp.net, .net, asp.net-4.0, requiredfieldvalidator, validationsummary

考虑以下 ASPX：

```
<asp:ValidationSummary ID="vSummary" runat="server" CssClass="error-message" HeaderText="<p>Please correct the following errors with your profile.</p>" ShowMessageBox="false" DisplayMode="BulletList" ShowSummary="true" />

<asp:TextBox ID="txtTest" runat="server" ClientIDMode="Static"></asp:TextBox>
<asp:RequiredFieldValidator ID="rfv" runat="server" Display="None" ErrorMessage="Enter a value in the textbox." ControlToValidate="txtTest"></asp:RequiredFieldValidator>

<asp:Button ID="btn1" runat="server" Text="Button 1" OnClick="btn1Click" ClientIDMode="Static" /> 
```

在文本框中输入文本后，一切都按预期运行。

单击按钮提交表单/在文本框内按“Enter”提交表单。

但是，当文本框为空时，按“回车”不会执行任何操作。单击按钮将按预期显示验证摘要，但按“输入”不会。

在空文本框中按下“Enter”键后，如何显示验证摘要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:35:55.160

由于某种原因，当您按 Enter 时，ValidationSummary 控件不会显示错误。但是，如果您将RequiredFieldValidator 显示更改为“动态”，您将看到错误消息。

**更新：**要克服此问题，请尝试按照本文中的说明进行[操作](http://weblogs.asp.net/sahannet/archive/2011/01/22/asp-net-validation-summary-control-and-enter-key-submit.aspx)。

对于懒惰的人：

```
protected void Page_Load(object sender, EventArgs e)
{
     if (!Page.IsPostBack)
     {
          // Add new attribute to form1 event to fire when enter key submit button click event

          form1.Attributes.Add("onkeydown", "javascript: return WebForm_FireDefaultButton (event, '" + ButtonName.ClientID + "')");

          // Allow you to use enter key for sumbit data
          ClientScript.RegisterHiddenField("__EVENTTARGET", "ButtonName");
     }
} 
```

最后：

```
// Add this code to div section on the form1 ASPX page.

<div id="inputArea" onkeypress="javascript:return WebForm_FireDefaultButton(event,'ButtonName')"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:44:55.997

该行为是因为您的文本框正在被验证，但验证消息未显示，因为您使用`Display = "none"`. 它在客户端进行验证，因此，由于文本为空，没有发生回发。

如果您从页面中删除验证控件（这不是您想要的），您的文本框将开始回发。我猜您不希望仅在验证摘要中显示每个控件的消息，否则，这是最简单的方法

# scala - 映射转换 i.text.toInt 与 toInt(i.text)

> ID：15372297
> 
> 赞同：4
> 
> 时间：2013-03-12T21:16:50.653
> 
> 标签：scala

我正在阅读Beginning Scala 并尝试使用REPL 中的示例。我创建了一个 xml 和一个 toInt 函数，如下所示

```
val x = <x>{(1 to 3).map(i => <i>{i}</i>)}</x>

def toInt(in : String) : Option[Int] = {
    try { 
      Some(Integer.parseInt(in)) 
    }
    catch {
      case e : Exception => None
    } 
  } 
```

我尝试了以下

```
(x \\ "i").map(i => i.text.toInt) // returns Seq[Int]

(x \\ "i").map(i => toInt(i.text)) // returns Sep[Option[Int]] 
```

为什么第一个版本返回 Seq[Int] 而第二个版本返回 Seq[Option[Int]] ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:21:38.873

第一个是内置方法，定义在[`StringLike`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.StringLike)

```
def toInt: Int = java.lang.Integer.parseInt(toString) 
```

如果找不到整数，这个会抛出异常

# objective-c - 如何使用 OCMock 在不同的线程上正确存根方法？

> ID：15372298
> 
> 赞同：2
> 
> 时间：2013-03-12T21:16:53.100
> 
> 标签：objective-c, unit-testing, ocmock

我有以下失败的单元测试。我认为这是因为`OCMock`在多个线程中不能很好地工作，但我可能是错的。`mockTestMethodA`永远不会被调用。如果我修改代码以`testMethodA`在同一线程上调用 （不带`NSThread`），则存根似乎可以工作。这是一个已知的限制`OCMock`还是我错过了什么？

示例代码：

```
- (void) testCallMethodUsingNSThreadFromADifferentClass
{
   mockTestClassA = [OCMockObject partialMockForObject:testClassA];

   [[[mockTestClassA expect] andCall:@selector(mockTestMethodA) onObject:self] testMethodA];

   [testClassC threadedRequestToCallMethodA];

   [self waitForCompletion:5.0];

   [mockTestClassA verify];
} 
```

`threadedRequestToCallMethodA`和`callMethodAFromTestClassC`in`TestClassC`定义如下：

```
- (void) threadedRequestToCallMethodA
{
    [NSThread detachNewThreadSelector:@selector(callMethodAFromTestClassC) toTarget:self withObject:nil];
}

- (void) callMethodAFromTestClassC
{
    [[[TestClassA alloc] init] testMethodA];
} 
```

`testMethodA`in`TestClassA`定义为：

```
- (void) testMethodA
{
    NSLog(@"testMethodA");
} 
```

存根方法定义如下：

```
- (void) mockTestMethodA
{
   NSLog(@"mockTestMethodA");
} 
```

最后`waitForCompletion`：

```
- (BOOL) waitForCompletion:(NSTimeInterval)timeoutSecs
{
    NSDate  *timeoutDate = [NSDate dateWithTimeIntervalSinceNow:timeoutSecs];
    do {
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:timeoutDate];
        if([timeoutDate timeIntervalSinceNow] < 0.0)
        break;
    } while (!done);

   return done;
 } 
```

感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:26:30.900

您的问题是您没有在部分模拟的对象上调用测试方法，而是在`callMethodAFromTestClassC`. 如果你在正确的对象上调用它，它工作正常。见下文（注意我实际上并没有创建单独的C类，但效果是一样的）。作为旁注，我认为积木和 GCD 让生活更轻松，但每个人都有自己的风格。

```
//
//  TestClassTest.m
//  TestApp
//
//  Created by Benjamin Flynn on 11/20/12.
//

#import <SenTestingKit/SenTestingKit.h>
#import "OCMock.h"
#import "TestClassA.h"

@interface TestClassTest : SenTestCase

@property (nonatomic, retain) TestClassA *testClassA;
@property (atomic, assign) BOOL done;
@end

@implementation TestClassTest

- (void) testCallMethodUsingNSThreadFromADifferentClass
{
    self.testClassA = [[TestClassA alloc] init];
    id mockTestClassA = [OCMockObject partialMockForObject:self.testClassA];
    [[[mockTestClassA expect] andCall:@selector(mockTestMethodA) onObject:self] testMethodA];
    [self threadedRequestToCallMethodA];
    [self waitForCompletion:5.0];    
    [mockTestClassA verify];
}

- (void)threadedRequestToCallMethodA
{
    [NSThread detachNewThreadSelector:@selector(callMethodAFromTestClassC) toTarget:self withObject:nil];
}

- (void)callMethodAFromTestClassC
{
    [self.testClassA testMethodA];
}

- (void)mockTestMethodA
{
    NSLog(@"Mock test method A");
    self.done = YES;
}

- (BOOL)waitForCompletion:(NSTimeInterval)timeoutSecs
{
    NSDate  *timeoutDate = [NSDate dateWithTimeIntervalSinceNow:timeoutSecs];
    NSLog(@"Starting timer");
    do {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:timeoutDate];
        if([timeoutDate timeIntervalSinceNow] < 0.0)
            break;
    } while (!self.done);
    NSLog(@"Ending timer");

    return self.done;
}

@end 
```

# java - 如何从 Java 访问 Windows 设备管理器中的信息？

> ID：15372303
> 
> 赞同：10
> 
> 时间：2013-03-12T21:17:17.917
> 
> 标签：java, windows, winapi

我有一个串口转 USB 设备，其中一个以上可以连接到计算机。我需要查询和检索设备连接到的 COM 端口列表。在 Windows 设备管理器中，您可以获得当前连接的设备的 COM 端口 + 友好名称。此列表是动态的。

从注册表读取[*不起作用*](https://stackoverflow.com/questions/6362775/getting-device-driver-information-related-to-a-com-port/15348278#15348278)，因为存储的信息是陈旧的和静态的，而不是动态的。

Devcon（来自 Microsoft）确实列出了设备连接到的端口，但它不能在我的应用程序中使用，因为它不可重新分发。

任何想法或最好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:26:04.060

几周前我不得不解决一个类似的问题。我遇到了[**Jawin-Project**](http://jawinproject.sourceforge.net/)，它提供了使用 WMI 查询所需的一切。它已经很老了，但如果你遵循文档，它就像一个魅力。可以在[codegods 博客](http://codegods.de/2008/03/26/windows-management-instrumentation-wmi-und-java/)中找到一个不错的德语演练。

对我来说，它并没有解决所有问题（我有一些关于目标设备的非常具体的事情要找出来），我最终用 C 语言创建了一个自己的[**JNI（Java 本地接口）**](http://www.ibm.com/developerworks/java/tutorials/j-jni/)类和 DLL，并结合了 windows API。

我希望这是您搜索的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:46:08.603

你试过这个[jUSB API](http://www.ibm.com/developerworks/library/j-usb/index.html)还是[这个例子](https://stackoverflow.com/a/2980584/1091256)？

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-19T10:26:16.823

使用 JNA ( [https://github.com/twall/jna](https://github.com/twall/jna) ) 并查看以下页面。这可能是一个有用的起点。

[http://www.digitalinferno.com/wiki/Wiki.jsp?page=JNAPrintDevices](http://www.digitalinferno.com/wiki/Wiki.jsp?page=JNAPrintDevices)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T14:47:41.133

我正在研究[Java Native Access](https://github.com/twall/jna)，因为它提供了从纯 Java 代码访问 Windows API 的权限——无需处理 JNI。我担心 LGPL 许可证；它是否可以包含在商业产品中，但根据新闻组中的一些帖子所说，它可以。在接下来的几周内尝试后，我将回到这里。

# c - 获取 NULL 错误

> ID：15372309
> 
> 赞同：0
> 
> 时间：2013-03-12T21:17:26.580
> 
> 标签：c, null

这是我的代码：

```
void printlist(struct node *st) { 
  while(st != NULL); {
    printnode(st);
    st=st->next;
  }
  return;
} 
```

但是，运行 prog 时出现错误：`parse error before;`
我不明白错误在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:21:58.620

这个：

```
while(st != NULL); { 
```

需要是这样的：

```
while(st != NULL) { 
```

分号是问题所在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:23:18.450

```
 while(st != NULL); {
    printnode(st);
    st=st->next;
  } 
```

实际上并没有做你认为它做的事情。让我为你格式化

```
 while (st != NULL) ;

  {
    printnode(st);
    st=st->next;
  } 
```

这意味着当 st 不为空时，你什么都不做，然后你无条件地运行下一个块。

# c - 程序需要优化以实现最低成本

> ID：15372310
> 
> 赞同：-3
> 
> 时间：2013-03-12T21:17:29.257
> 
> 标签：c

**这是问题所在：**

成本分析是工程的重要组成部分。在实践中，可能会要求您编写程序来确定许多不同潜在情况的最低成本。您的程序可以用作项目的决策工具。

考虑在垃圾填埋场上建造跑道的机场。承包商有两辆自卸车，一辆8吨，另一辆12吨。承包商使用卡车将填充物从偏远地点运送到机场。8 吨和 12 吨卡车每次行程的运营成本分别为 14.57 美元和 16.26 美元。一辆卡车不能超过总行程的 60%。

编写一个程序，得出给定吨数的最低成本。提示用户输入总吨数。显示每辆卡车所需的行程次数和总成本。对该程序使用模块化设计。

**这是我的尝试：**

```
#include <stdio.h>

int main (void)
{
    double mass, sixtyPercentMass;
    int eightCount = 0, twelveCount = 0;

    printf("Enter the number of tons: ");
    scanf("%lf", &mass);
    sixtyPercentMass = 0.6 * mass;

    while((twelveCount*12) < sixtyPercentMass) {
        twelveCount++;
    }
    while((eightCount*8) < (mass - sixtyPercentMass)) {
        eightCount++;
    }

    printf("Total trips required: %d\n", (twelveCount+eightCount));
    printf("Number of 12-ton trucks required: %d\n", twelveCount);
    printf("Number of 8-ton trucks required: %d\n", eightCount);
    printf("Total cost: $%lf", (twelveCount*16.26 + eightCount*14.57));
    return 0;
} 
```

**问题：**

1.  我将如何解释浪费卡车空间的原因？
    目前，如果您还剩 1 辆，那就浪费了一整辆卡车。使用与所需质量完全匹配的卡车实际上会更便宜。

2.  我将如何正确设置总行程的 60% 阈值？
    它目前只占质量的 60%。

对于所需的逻辑，伪代码或朝着正确方向迈出的一步会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:32:49.853

首先，您需要将问题与程序分开。尝试一步解决这两个问题会让您在处理将问题作为软件运行所需的内容时发现您的问题需要什么。

为了优化卡车的最小数量，您应该想出一种方法来确保不使用不需要的卡车。一种方法是尝试使用最大数量的最小卡车，并通过将较小的卡车换成较大的卡车来“减少”解决方案。另一种方法是使用可用的最大卡车，然后检查可以用较小卡车代替的部分满载卡车。

无论您如何解决问题，它都不需要计算机来解决。一旦您可以在没有计算机的情况下在某种程度上解决问题（即使该方案只是在您的脑海中），那么您就可以着手编写一个程序来执行实现您的解决方案所需的任务。

从写作作为第一步开始，这很像建造房子，开始切割和锤击木头，然后想知道如果没有外门、厨房、墙上的电源线等，你将如何吃饭。

# jquery - 如何动画浮动：左div？

> ID：15372315
> 
> 赞同：2
> 
> 时间：2013-03-12T21:17:34.773
> 
> 标签：jquery, css, jquery-animate

所以我的网络应用程序的工具栏中有一系列 float:left div 元素。其中一个在单击时会通过 jQuery 滑动动画向右展开。这个 div 右侧的所有 div 都应该滑过来为其增加的大小腾出空间，但是它们会跳到新位置以腾出空间，然后在我再次缩小它时跳回来。如何将其修复为平滑的幻灯片？

我想我需要 .animate()，但如果不更改为 position: absolute，我不知道该怎么做，我不想使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T21:50:37.573

我不确定我是否完全理解你，但我的猜测是：

[http://jsfiddle.net/QvCyx/](http://jsfiddle.net/QvCyx/)

```
 $('#contrast').click(function () {
     var w = $('#contrastSlider').width();
     $('#contrastSlider').toggle("slide", 300);
     $('#about').animate({
         'margin-left': -w
     }, 300, function () {
         this.style.marginLeft = 0;
     });
 }); 
```

**更新**

这是整个事情：http: [//jsfiddle.net/CPR7R/](http://jsfiddle.net/CPR7R/)

```
 $('#contrast').click(function () {
     var cs = $('#contrastSlider'),
         w = cs.width();
     if (!cs.is(':visible')) {
         $('#about').css('margin-left',-w);
         w = 0;
     }
     cs.toggle("slide", 300);
     $('#about').animate({
         'margin-left': -w
     }, 300, function () {
         this.style.marginLeft = 0;
     });
 }); 
```

**第二次更新**

检查这个例子：http: [//jsfiddle.net/EpCpr/](http://jsfiddle.net/EpCpr/)

```
$('#container').on('click', '.slideTriggerer', function () {
    var that = $(this),
        sliderA = that.siblings('.slideA'),
        sliderB = that.siblings('.slideB'),
        defml = parseInt( sliderB.css('margin-left') ),
        w = sliderA.outerWidth();
    if (!sliderA.is(':visible')) {
        sliderB.css('margin-left', -w+defml);
        w = defml;
    }

    sliderB.animate({
        'margin-left': -w+defml
    }, 300, function () {
        sliderB.css('margin-left', defml);
    });
    sliderA.toggle("slide", 300);
}); 
```

# android - 我可以将地址传递给 Android 版 Google 地图 API 以使用请求的地址打开 Google 地图吗？

> ID：15372317
> 
> 赞同：2
> 
> 时间：2013-03-12T21:17:39.087
> 
> 标签：android, google-maps

我是 Android 世界的新手，

我想为 Android 编写一个应用程序，它将从中央服务器接收目的地地址，打开谷歌地图，显示从当前位置到请求目的地的路线。会有很多客户端（手机）。

我想问 1) 是否可以使用 Google 地图 API 来做到这一点？

2）关于谷歌地图许可，我在这个论坛上阅读了不同的答案，我不确定我是否理解，是否需要谷歌地图许可？

3) 如果有人使用过 OpenGts，是否推荐它作为服务器？它可以将数据保存到本地数据库（例如 MYSQL）吗 谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:15:52.523

1）是的，这是可能的。当我在一个谷歌地图项目上工作时，我的做法是：

首先，使用 Google Maps for Android API，将地图放入您的应用程序中。

使用 GPS，检测您的位置。然后，只需向 Google Maps 在线 API 发送请求，即可为您生成两个位置之间的路径。

然后谷歌地图会用加密的路径回答你（使用这个算法来解密路径[http://jeffreysambells.com/2010/05/27/decoding-polylines-from-google-maps-direction-api-with-爪哇](http://jeffreysambells.com/2010/05/27/decoding-polylines-from-google-maps-direction-api-with-java)）。

完成后，对路径做任何你想做的事情。知道最简单的事情是根据路径创建一条折线，然后将其显示在地图上。如果你想做一个真正的 GPS，最简单的方法是在谷歌导航应用和你的信息之间使用意图（[Android - 从应用启动谷歌导航](https://stackoverflow.com/questions/8559540/android-launching-google-navigation-from-an-app)）

2）为了在您的应用程序中集成地图，您必须请求一个 Goole Maps for Android API 密钥，您可以在 Google Api 控制台中找到该密钥：[https](https://code.google.com/apis/console) ://code.google.com/apis/console 对于 Google地图网络服务 API，不需要密钥。

我让别人回答你的3）。

更多信息：

谷歌地图 API 网络服务：[https ://developers.google.com/maps/documentation/webservices/?hl=fr](https://developers.google.com/maps/documentation/webservices/?hl=fr)

Google Maps Android API v2 简介[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

适用于 Android API 的 Google 地图[http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:27:01.263

1）当然。您可以使用 Google Maps API 网络服务：[这里](https://developers.google.com/maps/documentation/webservices/)。Web 服务会为您提供以 json 格式描述的路径，因此您必须解析结果并在地图上绘制路径。您可以使用 MapView 显示从源到目的地的路径。[这](https://developers.google.com/maps/documentation/android/v1/hello-mapview)是来自 android 开发者网站的教程。

2）如果你想知道你是否可以将谷歌地图用于商业应用，答案是谷歌地图可以用于一些商业应用。“并非所有商业用途都被允许。如果您的网站符合以下任何条件，您必须使用 Google Maps API Premier”更多详细信息请[点击此处](http://productforums.google.com/forum/#!topic/maps/f0KajhPKQ9Y)

3) 是的，OpenGts 支持谷歌地图，你可以[在这里看到](http://opengts.sourceforge.net/)

# linux - 编写 Linux 网络驱动程序以支持关闭 TCP 校验和卸载

> ID：15372321
> 
> 赞同：3
> 
> 时间：2013-03-12T21:17:44.203
> 
> 标签：linux, tcp, linux-device-driver

我正在编写一个 linux 网络驱动程序。快完成了。当我在两台电脑之间 ping 时，一切都很完美。然后我尝试使用一些 TCP/UDP 协议，接收者从不回复。我用wireshark查看那里发生了什么，我发现所有的TCP数据包都有不正确的校验和。据说错误的校验和是由TCP校验和卸载引起的。我试图用 ethtool 将其关闭。当我使用`sudo ethtool -K uwn0 tx off`时，它会回复我

```
Cannot get device rx-checksumming settings: Operation not supported
Cannot get device tx-checksumming settings: Operation not supported
Cannot get device scatter-gather settings: Operation not supported
Cannot get device tcp-segmentation-offload settings: Operation not supported
Cannot get device udp-fragmentation-offload settings: Operation not supported
Cannot get device generic-segmentation-offload settings: Operation not supported
Cannot get device generic-receive-offload settings: Operation not supported
Cannot get device flags: Operation not supported 
```

有没有办法让我的驱动程序支持 tcp checksum offload？或者只是在软件中计算校验和？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T08:45:01.120

在驱动程序中设置设备接口时，应取消设置标志`NETIF_F_HW_CSUM`以`netdev->hw_features`强制 TCP 在软件中计算校验和。

有关设置硬件功能标志的示例，请查看
[**`lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c`**](http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c#L6638).

# c - 缓冲区溢出出现在预期之前

> ID：15372324
> 
> 赞同：11
> 
> 时间：2013-03-12T21:18:02.713
> 
> 标签：c, assembly, gdb, reverse-engineering

我正在尝试控制堆栈溢出。`gcc -fno-stack-protector -ggdb -o first first.c`首先，这是我在 x32 VM Linux ( )上编译的 C 代码示例，

```
#include "stdio.h"

int CanNeverExecute()
{
    printf("I can never execute\n");
    return(0);
}

void GetInput()
{
    char buffer[8];

    gets(buffer);
    puts(buffer);
}

int main()
{
    GetInput();
    return(0);
} 
```

然后调试器（英特尔风味）：转储函数的汇编代码`GetInput`：

```
0x08048455 <+0>:    push   ebp
0x08048456 <+1>:    mov    ebp,esp
0x08048458 <+3>:    sub    esp,0x28
0x0804845b <+6>:    lea    eax,[ebp-0x10] 
```

在这里我们可以看到 sub esp, 0x28 为缓冲区变量保留了 40 个字节（对吗？）。 `CanNeverExecute`函数位于地址`0x0804843c`。因此，为了运行`CanNeverExecute`函数，我需要将 40 个字节放入缓冲区变量，然后将 8 个字节用于存储的基本指针，然后将 8 个字节的返回指针放入我想要更改的。

所以，我需要一串 48 个 ASCII 符号加上`\x3c\x84\x04\x08`最后（`CanNeverExecute`函数的地址）。那是理论上的。但实际上我只需要在返回指针的地址前 20 个字节：

```
~/hacktest $ printf "12345678901234567890\x3c\x84\x04\x08" | ./first
12345678901234567890..
I can never execute
Illegal instruction (core dumped) 
```

为什么它只需要 20 个字节而不是 48 个字节？我的错误在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T21:38:40.040

首先，您的程序集是 32 位的。保存的 EBP 和返回地址各为 4 个字节。

其次，`buffer`变量不是从栈顶（ESP）开始——它从 ebp-0x10 开始。距离返回地址 20 个字节。0x10 是 16 个字节，然后是 4 个用于保存的 EBP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T22:03:29.793

如果你采取更大的拆卸部分你会看到：

```
08048445 <GetInput>:
8048445:    55                      push   %ebp
8048446:    89 e5                   mov    %esp,%ebp
8048448:    83 ec 28                sub    $0x28,%esp
804844b:    8d 45 f0                lea    -0x10(%ebp),%eax
804844e:    89 04 24                mov    %eax,(%esp)
8048451:    e8 9a fe ff ff          call   80482f0 <gets@plt>
8048456:    8d 45 f0                lea    -0x10(%ebp),%eax
8048459:    89 04 24                mov    %eax,(%esp)
804845c:    e8 9f fe ff ff          call   8048300 <puts@plt>
8048461:    c9                      leave  
8048462:    c3                      ret 
```

ebp 被保存，esp 被移动到 ebp，然后从 esp 中减去 40（堆栈帧，如你所写），但指向缓冲区的指针通过 eax 寄存器传递给 get，并且 eax 加载了 ebp-0x10！

```
lea    -0x10(%ebp),%eax 
```

所以你只需要 20 个字节来溢出缓冲区（16 个保留 + 4 个用于存储在 32 位系统上的基指针）

# c# - 如何从表中获取最近的日期

> ID：15372325
> 
> 赞同：4
> 
> 时间：2013-03-12T21:18:05.233
> 
> 标签：c#, date

我有代码，我正在从我的表中查询一些东西，该表有一个名为`CreateDate`. 我只想获取最近日期的对象。这就是我所拥有的：

```
var post = UnitOfWork.TableName.Query(postFilter); 
```

我尝试使用这样的 Max 函数：

```
var post = UnitOfWork.TableName.Query(postFilter).Max(x => x.CreatedDate); 
```

但这仅返回日期。

如何返回最新的整个对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T21:19:43.440

您必须按日期订购并取一份：

```
var post = UnitOfWork.TableName.Query(postFilter)
    .OrderByDescending(x => x.CreatedDate)
    .FirstOrDefault(); 
```

# javascript - 如何使用 jquery 或 javascript 获取 tabcontainer ID？

> ID：15372333
> 
> 赞同：0
> 
> 时间：2013-03-12T21:18:35.837
> 
> 标签：javascript, jquery, asp.net, ajax

我在更新面板中有一个 tabcontainer，我想在 tabcontainer 下方显示 gridview。在选项卡容器内部，当我按下每个选项卡时可以更改，但是当单击选项卡时我无法在网格视图中进行更改。

目前我可以看到下面的 javascript 正在工作，正如我使用警报确认的那样。

```
<script type="text/javascript" src="Scripts/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="Scripts/jquery-ui-1.8.13.custom.min.js">
</script>
<script type="text/javascript">
function tabClick() {

    var selected_tab = $("#TabContainer1").tabs();

    alert(selected_tab);
    return;
} 
```

我有一个标签容器如下

```
<asp:UpdatePanel ID="EmployeeInfoUpdatePanel" runat="server">
    <ContentTemplate>
    <div style="padding-left:205px">
        <asp:TabContainer ID="TabContainer1" runat="server" Width="955px" 
            Height="350px"  CssClass="fancy fancy-green" ActiveTabIndex="0" OnClientActiveTabChanged="tabClick">
            <asp:TabPanel ID="companyTab" HeaderText="Company" runat="server"  ForeColor="Black">  
                <ContentTemplate>
                       codes.... 
```

我已经搜索并找到了一些代码，例如 tab.get_activetab 但是它不起作用。如果我输入 selected_tab。和 Visual Studio 提出了我可以选择的选项，但是 get_activetab 或 _activeTabIndex 没有选项

我想获得一个活动选项卡 ID 并将参数传递给 C# 代码。

可能吗？？

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:35:46.087

首先，您可以像这样从 jquery 对象或本机 javascript 对象中获取任何元素的 id

```
 // jquery get id of html element
   $(myJquerySelector)[0].id
   $(myJquerySelector).attr('id');

   // native js get id of html element
   document.querySelector(myNativeSelector).id;
   document.getElementById(theID).id; 
```

但你的问题不止于此。要获取活动选项卡的 ID，您只需获取该选项卡

```
 $('.ui-tabs-active')[0].id // will give you the id of the active tab 
```

然后将其传递给您的服务器，您将需要[AJAX](http://api.jquery.com/jQuery.post/)。所以像：

```
 $.post('/my/server/path', { id : $('.ui-tabs-active')[0].id }); 
```

这会将活动选项卡的 id 发布到您的服务器和 c#。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:55:40.323

对于一个直接的 javascript 函数，我在下面使用它来获取活动选项卡：

```
 var tab = document.getElementById('tabContainer');
 var currentTabIndex = tab.control.get_activeTabIndex();
 var currentTabId = tab.control._tabs[currentTabIndex]._tab.id; 
```

然后，使用一些 AJAX 将 id 返回到服务器。

# jquery - input[data-field=""] 可以通过 JQuery 访问吗？

> ID：15372334
> 
> 赞同：0
> 
> 时间：2013-03-12T21:18:40.413
> 
> 标签：jquery

我有一个看起来像这样的 HTML 按钮：

```
<input type="button" name="btn_recommend" data-postid="127" value="Recommend (4)" onclick="a2m.recommend.add();"> 
```

是否可以通过 JQuery 访问此按钮，如下所示？

`$('input[data-postid="127"]').val()`;

? 这目前不起作用...

谢谢！

# json - 使用 CodeIgniter 提交 AngularJS 表单

> ID：15372346
> 
> 赞同：2
> 
> 时间：2013-03-12T21:19:22.290
> 
> 标签：json, codeigniter, angularjs

让我先说我是 AngularJS 和 CodeIgniter 的新手。尝试创建单页应用程序。在中心，它显示新闻故事。旁边是提交新故事的表格。我已经到了数据库中的故事显示良好的地步。但是当我尝试从侧面的表单创建新故事时，它会在数据库中输入 0。我假设我在模型中的功能存在问题。它可能与没有正确编码的信息在 MVC 之间传递一样基本。

索引.php

```
<div class="span2" ng-controller="NewStoryCtrl">
  <h4>New Story</h4>
  <form name="newStory">
      <label for="title">Title: </label>
      <input type="text" name ="title" ng-model="news.title" required>
      <label for="text">Text: </label>
      <textarea type="text" name="text" ng-model="news.text"required></textarea>
      <button ng-click="createNews()">Submit</button>
</form> 
```

控制器.js

```
function NewStoryCtrl($scope, $http) {
$scope.news = {title:$scope.title, text:$scope.text};
$scope.createNews = function(){
    $http.post('/ci/index.php/news/create/',$scope.news);
};} 
```

news.php（控制器）

```
public function create() {
    $this->news_model->set_news();
} 
```

news_model.php（模型）

```
public function set_news() {
$this->load->helper('url');

$slug = url_title($this->input->post('title'), 'dash', TRUE);

$data = array(
    'title' => $this->input->post('title'),
    'slug' => $slug,
    'time' => time(),
    'text' => $this->input->post('text')
);

return $this->db->insert('news', $data);
} 
```

模型中的内容是我最初的 CI 新闻教程中遗留下来的。这就是为什么我认为错误在这里。将信息从 controllers.js 传递到模型的最佳方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T22:13:14.893

正如预期的那样，我的问题是没有获得正确类型的数据。控制器期待一个变量，但在 Angular 控制器中，我将它作为 JSON 传递。我从来没有经历过解码。

*news.php*（控制器）

```
public function create() {
   $data = json_decode(file_get_contents('php://input'), TRUE);
   $this->news_model->set_news($data);
} 
```

然后在模型中，我只需要将它作为参数传递给 set_news()。我最终更改了一些变量名称，只是为了个人澄清。

*news_model.php*

```
public function set_news($data) {
    $this->load->helper('url');
    $slug = url_title($data['title'], 'dash', TRUE);

    $retval = array(
        'title' => $data['title'],
        'slug' => $slug,
        'time' => time(),
        'text' => $data['text']
    );

    return $this->db->insert('news', $retval);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:37:12.900

我没有使用**Angular.js**，但您的数据格式可能是正确的。例如，**Backbone**发送一个名为 model 的单个`$_POST`变量，其中包含**json**编码数据，正如我所使用的那样。

当您尝试像这样进行**AJAX**工作时，您必须使用**Firebug**、**Webdev或其他工具来查看发生了什么；**否则你会发疯的。查看发送到后端的变量 - 它可能已被描述为您需要收集的编码单、json_decode、CLEAN & VALIDATE，然后使用。**`var`**

# python - 如何在 Python 中基于 polyon 对栅格文件进行区域统计？

> ID：15372347
> 
> 赞同：0
> 
> 时间：2013-03-12T21:19:22.723
> 
> 标签：python, statistics, raster, gdal

我有一个光栅文件和一个多边形 shapefile。我想获得多边形覆盖区域的栅格文件的平均值。我喜欢在 python 独立脚本中执行此操作。所以 QGIS 和 Starspan 不起作用。Arcpy 也不可用。我喜欢使用GDAL。什么 Python 包？你能推荐这样做的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:26:02.300

有一个 gdal.RasterizeLayer 函数可以让您栅格化矢量图层。它有一些缺点，您需要有一个栅格化的输出数据集。此外，如果您有重叠的几何图形，您希望首先在单独的矢量图层上隔离每个几何图形，这意味着您必须遍历所有几何图形。

使用 gdal，您可以使用 MEM 驱动程序创建内存中的文件，这使它更容易一些，但仍然存在大量数据集创建开销。

对于每个几何图形，步骤或多或少类似于：

```
driver = gdal.GetDriverByName('MEM')
outds = driver.Create('', pixelxsize, pixelysize, 1, GDT_Byte)
outds.SetProjection(target_proj)
outds.SetGeoTransform(target_gt)

gdal.RasterizeLayer(outds, [1], vectorlayer, burn_values=[1]) 
```

现在 outds 包含几何图形的掩码，例如将其与 np.masked_where 一起使用，您可以隔离几何图形中的像素。

它不如它好，但一旦你有一个多边形的掩码数组，它很容易通过使用 numpy/scipy 获得统计数据。

编辑：有关更详细的示例，请参阅此脚本：http: [//svn.osgeo.org/gdal/trunk/autotest/alg/rasterize.py](http://svn.osgeo.org/gdal/trunk/autotest/alg/rasterize.py)

# excel - 如何在 VBA 中获取单元格的格式

> ID：15372349
> 
> 赞同：3
> 
> 时间：2013-03-12T21:19:28.900
> 
> 标签：excel, vba

遍历工作表中的单元格时，如何获取单元格上的格式设置是什么？因为基于此，我想构建一个 SQL 语句来添加单个刻度或不添加到检索的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:25:27.173

听起来您需要[VarType()](http://office.microsoft.com/en-us/access-help/vartype-function-HA001228932.aspx)函数。 `Vartype(Range("A1"))`

* * *

好的，所以您**不想**知道单元格的格式设置，而是该值是否为数字。如果可以的话，你可以打电话`IsNumeric(Range("A1"))`报价`False`吗？

* * *

根据您对某些数字作为文本存储在数据库中的评论，您不会通过一个简单的公式来解决这个问题。您不能在构建 SQL 语句时引用这些值吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-13T01:31:13.890

尝试在 VBA 中使用以下内容：

```
Range("A1").NumberFormat = "0.00" 'Sets cell formatting to numeric with 2 decimals.
Range("A1").Formula = "=Text(6, " & """0.00""" & ")" 'Looks like a number _
                                                     ' but is really text.
Debug.Print WorksheetFunction.IsNumber(Range("A1")) 'Prints False

Range("A1").Value = 6 'Puts number into the cell, which also looks like 6.00

Debug.Print WorksheetFunction.IsNumber(Range("A1")) 'Prints True 
```

这应该告诉您该值是真正的文本还是真正的数字，无论单元格的格式属性如何。

关键是 Excel 的固有 IsNumber() 函数比 VBA 函数 IsNumeric 更适用于此目的。IsNumber() 告诉您单元格的值是否为数字，而 IsNumeric 仅告诉您单元格是否已格式化为数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:25:48.503

我不认为单元格的任何属性可以指示单元格是否实际包含数值，尽管`VarType()` *可能会*有所帮助，但它会变得很棘手，因为 Excel 将允许数字格式的单元格包含字符串，而文本格式的单元格包含数字值，而不覆盖`NumberFormat`属性。

在任何情况下，您都可能需要一些独立的测试来确定单元格是否为 IsNumeric（或其他标准）以及它`NumberFormat`是否在您可以定义的枚举列表中。

```
 Sub numFormat()
 Dim cl As Range
 Dim numFormat As String
 Dim isNumber As Boolean

 For Each cl In Range("A1")
    numFormat = cl.NumberFormat
    isNumber = IsNumeric(Trim(cl.Value))

    Select Case numFormat
        Case "General", "0", "0.0", "0.00" ' <--- modify as needed to account for other formats, etc.
            If isNumber Then
                Debug.Print cl.Address & " formatted as " & numFormat
            End If
        Case Else
            'ignore all other cases
    End Select
 Next

 End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:47:50.767

我不认为单元格的格式是重要的。相反，它是数据库中字段的数据类型。如果您在单元格中有字符串“foobar”，并且您创建了一个 INSERT INTO sql 语句，该语句试图将其放入 Long Integer 字段中，那么无论刻度线如何，它都会失败。

相反，如果单元格包含需要进入 VARCHAR 字段的数值（如 100），则需要标记（如“100”）。

如果您使用的是 ADO，请检查 Field 对象的 Type 属性以确定数据类型。使用此列表[http://support.microsoft.com/kb/193947](http://support.microsoft.com/kb/193947)查看类型是什么。然后根据字段类型设置SQL语句。

# html - 如何将按钮/图像 onclick 更改为活动状态？

> ID：15372354
> 
> 赞同：2
> 
> 时间：2013-03-12T21:19:50.313
> 
> 标签：html, css, image

这是我想要的： ![例子](../Images/d713011160b818c46fef332ce8257c45.png)

现在更详细地说：

我有 2 个 iframe，一个在另一个之上。上面的一个有 4 个按钮/图像，下面的一个是单击这些按钮/图像之一时将显示 url/链接的位置。我得到了这个工作......

我现在想要的是让这些按钮在单击它们时将图像从非活动（即浅粉色）变为活动（即红色）状态。此外，当我单击 4 个按钮中的另一个时，它会变为红色，并且之前的活动（红色）按钮/图像必须返回到其非活动状态（浅粉色）。所以我想要 2 张图片：（1）active.png 和（2）inactive.png。

另外，当我将鼠标悬停在按钮上时，我希望按钮更改为 active.png。这我可以通过 onmouseover 和 onmouseout 效果进行管理。它只是活动部分是我无法弄清楚的。

我需要javascript吗？如果某些用户禁用了它，我可以不用它吗？

我也在考虑可能使用单选按钮，然后使用我的 active.png 和 inactive.png 使用 css 或其他东西对它们进行蒙皮，但我也不知道该怎么做：P 我不知道什么是最好和最简单的方法?

- - - - - - 更新 - - - - - -

好的，我得到了一些工作，但我还没有走到那一步。它甚至可能不是要走的路，但我所做的是创建 4 个链接并给它们一个 id (ie.button1, button2 ..)

然后在css中我为每个做了这个：

button1 { 宽度：66px; 高度：70px；显示：块；背景图像：url（图像/inactive1.png）；} button1:hover { 宽度: 66px; 高度：70px；显示：块；背景图像：url（图像/active1.png）；} button1:focus{ 宽度：66px; 高度：70px；显示：块；背景图像：url（图像/active1.png）；}

但我不希望它失去焦点，除非单击另一个按钮。因为如果我单击页面上的任何位置，现在它会失去焦点:(我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:14:21.913

没有 JS 的唯一方法是创建四个静态页面，如对原始帖子的评论中所述。

您的身体标记将如下所示：

```
<ul id="nav">
    <li class="active"><a href="site1.htm"></a></li>
    <li><a href="site2.htm"></a></li>
    <li><a href="site3.htm"></a></li>
    <li><a href="site4.htm"></a></li>
</ul>
<iframe src="www.url.com">
</iframe> 
```

上面的列表是您的导航。您不需要单独的`iframe`，因为您有四个静态页面。在每个静态页面中，`li`包含指向活动静态页面的链接的 - 元素会获得一个名为“活动”的类。

`iframe`存储网址，您希望在其中显示。

在您的 css 文件中，您可以像这样设置导航样式：

```
#nav a {background: url('images/inactive.png');}

#nav a:hover,
#nav li.active a{
    background: url('images/active1.png');
} 
```

这应该可行，但使用 JS 的解决方案会更加优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:01:20.247

我制作了这两个文件，涵盖了所有内容：

```
<!DOCTYPE html>

<html>
<head runat="server">
    <title>Deep East Music</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <style type="text/css">
        .buttons { float:left; width:60px; height:25px; margin:10px 0 0 5px; cursor:pointer; }
        .buttons[isselected = "true"] { background-color:#ff7373; }
        .buttons[isselected = "false"] { background-color:#cccccc; }
    </style>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#button1").click(function () {
                $(".buttons").attr("isselected", "false");
                $(this).attr("isselected", "true");

                $("#myiframe").attr("src", "https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F38593173");
            });

            $("#button2").click(function () {
                $(".buttons").attr("isselected", "false");
                $(this).attr("isselected", "true");
                $("#myiframe").attr("src", "https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F37674430");

                ////Use one of these if you need to reload the iframe
                //$('#myiframe').contentWindow.location.reload(true);
                //$("#myiframe").attr("src", $("#myiframe").attr("src"));
            });

            $("#button3").click(function () {
                $(".buttons").attr("isselected", "false");
                $(this).attr("isselected", "true");
                $("#myiframe").attr("src", "https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F3442336");
            });

            $("#button4").click(function () {
                $(".buttons").attr("isselected", "false");
                $(this).attr("isselected", "true");
                $("#myiframe").attr("src", "https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F38359257");
            });

        });

        function ClickedButton1 () {
            $("#myiframe").attr("src", "https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F38593173");
            return false;
        };

        function ClickedButton2 () {
            $("#myiframe").attr("src", "https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F37674430");
            return false;
        };

        function ClickedButton3 () {
            $("#myiframe").attr("src", "https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F3442336");
            return false;
        };

        function ClickedButton4 () {
            $("#myiframe").attr("src", "https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F38359257");
            return false;
        };

    </script>
</head>
<body>

    <div>
        <div id="button1" class="buttons" isselected="true">button1</div>
        <div id="button2" class="buttons" isselected="false">button2</div>
        <div id="button3" class="buttons" isselected="false">button3</div>
        <div id="button4" class="buttons" isselected="false">button4</div>

        <iframe id="mybuttonsiframe" width="100%" height="60" scrolling="no" frameborder="no" src="buttons.htm"></iframe>

        <iframe id="myiframe" width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F38593173"></iframe>
    </div>
</body>
</html> 
```

而且buttons.htm 看起来像：

```
<!DOCTYPE html>

<html>
<head runat="server">
    <title>Deep East Music</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <style type="text/css">
        /* CSS Here */
        .iframebuttons { float:left; width:100px; height:25px; margin:10px 0 0 5px; cursor:pointer; }
        .iframebuttons[isselected = "true"] { background-color:#ff7373; }
        .iframebuttons[isselected = "false"] { background-color:#cccccc; }
    </style>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#iframebutton1").click(function () {
                $(".iframebuttons").attr("isselected", "false");
                $(this).attr("isselected", "true");
                parent.ClickedButton1();
            });

            $("#iframebutton2").click(function () {
                $(".iframebuttons").attr("isselected", "false");
                $(this).attr("isselected", "true");
                parent.ClickedButton2();
            });

            $("#iframebutton3").click(function () {
                $(".iframebuttons").attr("isselected", "false");
                $(this).attr("isselected", "true");
                parent.ClickedButton3();
            });

            $("#iframebutton4").click(function () {
                $(".iframebuttons").attr("isselected", "false");
                $(this).attr("isselected", "true");
                parent.ClickedButton4();
            });

        });
    </script>
</head>
<body>
        <input type="button" id="iframebutton1" class="iframebuttons" isselected="true" value="iframebutton1" />
        <input type="button" id="iframebutton2" class="iframebuttons" isselected="false" value="iframebutton2" />
        <input type="button" id="iframebutton3" class="iframebuttons" isselected="false" value="iframebutton3" />
        <input type="button" id="iframebutton4" class="iframebuttons" isselected="false" value="iframebutton4" />
</body>
</html> 
```

# java - 在 Java 中设置 Selenium ChromeDriver 以在 Mac 上进行远程测试

> ID：15372357
> 
> 赞同：0
> 
> 时间：2013-03-12T21:20:01.233
> 
> 标签：java, google-chrome, webdriver, testng, selenium-grid

我正在尝试在 eclipse/java 中创建一个项目以进行硒测试。

我在 Windows 机器上执行此操作，这也是我的硒网格中心。

我想在远程机器上运行我的测试，它是 mac。

在我的项目中，当我像这样设置 webdriver 时：

```
System.setProperty("webdriver.chromeDriver.driver",
                    "C:\\SeleniumGrid\\chromeDriver\\chromedriver.exe" 
```

该路径应该指向我的遥控器/mac上的chromedriver，对吧？

mac已经安装了chrome。我在这里找到了那台机器上的 chromedriver：`/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome`

但是当我这样设置时：

```
 System.setProperty("webdriver.chromeDriver.driver",
            "/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome");
    ChromeOptions options = new ChromeOptions();
    cap.setCapability(ChromeOptions.CAPABILITY, options);
    cap = DesiredCapabilities.chrome();
    cap.setBrowserName("chrome");
    cap.setPlatform(Platform.MAC);
    cap.setJavascriptEnabled(true);
    newDriver = new RemoteWebDriver(new URL(
            "http://999.999.9.99:9999/wd/hub"), cap); 
```

我在这一行得到一个空指针异常：

```
cap.setCapability(ChromeOptions.CAPABILITY, options); 
```

不知道我在这里做错了什么。对不起，我是硒的新手。任何想法将不胜感激。

编辑：这是堆栈跟踪

```
[TestNG] Running:

[ThreadUtil] Starting executor timeOut:2147483647ms workers:1 threadPoolSize:3
FAILED CONFIGURATION: @BeforeClass setUp("chrome")
java.lang.NullPointerException
    at selenium.helper.WebUtils.setUpRemoteDriver(WebUtils.java:74)
    at selenium.testNG.TestNikeCareerSearch.setUp(TestNikeCareerSearch.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:564)
    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)
    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:138)
    at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:175)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:107)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.access$0(SuiteRunner.java:333)
    at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:368)
    at org.testng.internal.thread.ThreadUtil$2.call(ThreadUtil.java:64)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

SKIPPED CONFIGURATION: @AfterClass tearDown 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:45:45.597

该声明

```
System.setProperty("webdriver.chromeDriver.driver",
"C:\\SeleniumGrid\\chromeDriver\\chromedriver.exe") 
```

将在您的集线器或您的代码所在的机器上运行。因此，该属性将在该机器上而不是在遥控器上设置。

`-Dwebdriver.chrome.driver="pathtochromedriverinnode"`您可以在 mac 机器中启动 webdriver 节点时添加语句。像这样的东西：

```
java -jar seleniumserver.jar -role wd -hub http://hubip:port/grid/register -Dwebdriver.chrome.driver="pathtochromedriverinnode" 
```

# java - apache sshd 公钥认证

> ID：15372360
> 
> 赞同：1
> 
> 时间：2013-03-12T21:20:09.907
> 
> 标签：java, authorization, public-key, sshd, mina

我正在尝试使用 apache mina sshd 设置 ssh 服务器。我想使用公钥认证，基本上我想知道如何实现

```
package org.apache.sshd.server;
import java.security.PublicKey;
import org.apache.sshd.server.session.ServerSession;

public interface PublickeyAuthenticator {

boolean authenticate(String username, PublicKey key, ServerSession session);

} 
```

我看到传递的是另一个公钥。所以我假设您应该将参数中给出的公钥与服务器拥有的公钥进行比较。但我不知道该怎么做。

我发现的一件事是[这个](http://maven.apache.org/wagon/xref/org/apache/maven/wagon/providers/ssh/TestPublickeyAuthenticator.html)实现。这似乎毫无意义，因为它似乎将公钥的模数与自身进行了比较。假设这个实现有一个错误，并且应该比较每个公钥的模数，这足以进行身份​​验证 - 模数同意吗？当然，如果我只是将我的公开可用公钥提供给这个函数，那么我会获得身份验证吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T17:42:58.307

我想我在源代码中找到了答案`org.apache.sshd.server.auth.UserAuthPublicKey#auth`。此类使用密钥进行实际身份验证。我认为让我感到困惑的是方法的名称 - `authenticate()`。实际情况如下：

*   服务器请求客户端的公钥

*   公钥被传递给`PublickeyAuthenticator#authenticate`

*   您应该做的`authenticate()`就是检查这是您要允许的公钥

*   如果`authenticate()`返回 true，`UserAuthPublicKey#auth`则将检查消息是否已使用私钥签名。如果是，则验证已验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-03T16:49:48.547

下面的代码是如何使用 Apache MINA SSHD 执行公钥认证的示例，示例代码创建了一个 SFTP 服务器。

```
import java.io.File;
import java.io.IOException;
import java.util.Collections;

@Service
public class MySftpServer {

    private Log log = LogFactory.getLog(MySftpServer.class);

    @PostConstruct
    public void startServer() throws IOException {
        start();
    }

    private void start() throws IOException {
        SshServer sshd = SshServer.setUpDefaultServer();
        sshd.setHost("localhost");
        sshd.setPort(2222);
        sshd.setKeyPairProvider(new SimpleGeneratorHostKeyProvider(new File("host.ser")));
        sshd.setSubsystemFactories(Collections.singletonList(new SftpSubsystemFactory()));
        sshd.setPasswordAuthenticator((username, password, session) -> username.equals("test") && password.equals("password"));
        sshd.setPublickeyAuthenticator(new AuthorizedKeysAuthenticator(new File("<Location of authorized_keys file>")));
        sshd.start();
        log.info("SFTP server started");
    }
} 
```

与@northshorefiend 在他的回答中提到的类似，在这种情况下`AuthorizedKeysAuthenticator`，将公钥传递给服务器并根据 authorized_keys 文件对其进行验证`new AuthorizedKeysAuthenticator(new File("<Location of authorized_keys file>")`。如果指定的公钥存在于文件中，则认证通过。

您可以[在此处](https://programmingtechie.com/2019/08/18/how-to-implement-an-sftp-server-in-java-spring-boot-using-apache-mina-sshd-part-2-using-public-key-authentication/)和[此处阅读有关此内容的更多详细信息](https://programmingtechie.com/2019/02/23/how-to-implement-an-sftp-server-in-java-spring-boot-using-apache-mina-sshd/)

# python - 如何在 django cms 中为同一页面的不同语言添加不同的基本模板

> ID：15372361
> 
> 赞同：0
> 
> 时间：2013-03-12T21:20:10.110
> 
> 标签：python, django, content-management-system, django-cms

如何在 django cms 中为同一页面的不同语言添加不同的基本模板？

我正在尝试设置一个页面并以不同的语言显示它。对于所有语言，我需要使用不同的基本模板。

我是全新的 django cms。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:40:31.537

您需要为每种语言创建不同的页面树。

每个页面只有一个模板。使用`{% trans %}`and`{% blocktrans %}`来翻译其中的字符串。或`{% if request.LANGUAGE == "en" %}`。

如果模板真的有那么大的不同：不要在页面中添加其他语言……而是只用一种语言创建不同的页面树。

# sockets - 使用 write() 时出现 SIGPIPE 错误

> ID：15372363
> 
> 赞同：1
> 
> 时间：2013-03-12T21:20:11.633
> 
> 标签：sockets, usb, pthreads, hid, sigpipe

当我尝试写入打开 USB 设备时返回的文件描述符时，出现 SIGPIPE 错误。我可以整天读它，但我不能写它。下面是代码：

```
#include <fcntl.h>
#include <unistd.h>
#include <iostream>
#include <sys/socket.h>
#include <string>
#include <stdio.h>
#include <sstream>
#include <pthread.h>
#include <string.h>
#include <signal.h>
#include <errno.h>

void* Thread(void*);
int fd = -1;
std::string masterName;
std::string slavename;

int main() {

    char buf[1024];
    fd = open("/dev/usbdevice", O_RDWR | O_NOCTTY);

    pthread_t thread;
    pthread_create(&thread, NULL, Thread, (void*)NULL);

    while(1) {
        int returnVal = read(fd, buf, sizeof(buf));
        if(returnVal <= 0) {
                 std::cout << "Read() returned 0 bytes." << std::endl;
                 break;
        }
        std::cout << "Buffer Data: " << byteChars << std::endl;
    }
    close(fd);
    return 0;
}

void* Thread(void*) {
    char buffer[2];
    while(1) {
        memset(buffer, 0, 2);
        std::cout << "Write to device: " << std::endl;
        std::cin >> buffer;
        ssize_t ret = write(fd, buffer, 2);
        if(ret == -1) {
            std::cout << "errno: " << errno << std::endl;
        }
        else {
                std::cout << "Successful write" << std::endl;
        }
    }
    return NULL;
} 
```

基本上我设置了一个线程，以便能够写入文件描述符“fd”，该文件描述符在一开始是从“open()”函数返回的。每次尝试写入时都会出错。但正如我之前所说，我可以毫无问题地阅读一整天。

*旁注* 我已经检查了 fd 以确保我写的是正确的，而且我肯定是。

当我研究 SIGPIPE 错误时，我看到每个人都说当 fd 在远程端关闭时会发生这种情况。那么＃1该文件描述符怎么可能关闭？＃2如果关闭，我如何仍然能够从同一个文件描述符上的设备读取？

# android - 将不同的任务分配给不同的列表项

> ID：15372367
> 
> 赞同：1
> 
> 时间：2013-03-12T21:20:22.123
> 
> 标签：android, eclipse

我有一个列表项，其中有 3 个项目。我想做以下事情：当我点击其中一个时，我被重定向到谷歌，当我点击另一个时，我去 Facebook 等等。在我的代码中，当我单击 3 个列表项中的任何一个时，我会转到相同的地址：google。如何为不同的列表项分配不同的链接？这是我的代码。

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Listimizde kaç tane eleman olduğunu bulmak için bunu kullanıyoruz
    ListView listView = (ListView) findViewById(R.id.linkList);

    String[] links = new String[] { "http://www.facebook.com",
            "http://www.twitter.com", "http://www.hurriyet.com.tr" };

    // ArrayAdapter, bu listviewin nasıl görüneceğini belirtir. ilk argument
    // this, yani bu list
    // 2\. argument list viewin şekli, yani simple dropdown şeklinde olsun,
    // 3\. argument de links
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, links);

    listView.setAdapter(adapter); // start the adapter for the list view
    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapter, View view, int pos,
                long id) {
            // SO listener
            Intent myWebLink = new Intent(
                    android.content.Intent.ACTION_VIEW);
            myWebLink.setData(Uri.parse("http://www.google.com"));
            startActivity(myWebLink);
        }
    });

    // OR listener

} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:24:34.373

您可以通过职位 ID 实现这一目标

```
switch (pos){

case 1:
//go to google
break;
case 2:
//go to facebook
break;
default:
//where ever you want
break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:30:38.393

如果你有一个固定的顺序，你可以评估`pos`参数

```
switch (pos) {
  case 1 :  myWebLink.setData(Uri.parse("http://www.google.com")); break;
  case 2 :  myWebLink.setData(Uri.parse("http://www.facebook.com")); break;
  case 3 :  // do something totally different
} 
```

如果您不能依赖该位置或者您只有链接（并且可能有很多链接），您可以使用 AdapterView：

```
String url = (String) adapter.getItemAtPosition(pos);
myWebLink.setData(Uri.parse(url)); 
```

希望这可以帮助！

# html - 可以在 Chrome 浏览器的 iFrame 中显示 Qt

> ID：15372368
> 
> 赞同：0
> 
> 时间：2013-03-12T21:20:27.707
> 
> 标签：html, qt, google-chrome, iframe

不确定这是否适合 Stack 的问题，但我有一个在 QT（KDE System Guard）中运行的应用程序。我希望它与我的许多其他监控系统聚合到一个浏览器窗口中。我知道通常我会为以下内容扔掉一个 iFrame：

```
 <iframe src="http://pathToMyNetworkMonitors.com"></iframe> 
```

但是由于 QT 在它自己的浏览器中运行，我不确定我是否可以做到这一点。我想知道是否有人尝试过这个或其他一些解决方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:40:58.230

Qt 应用程序不会“在浏览器中”运行，它和其他任何应用程序一样都是本机应用程序。它（通常）没有网络服务器，也没有（通常）与网络服务器集成的方法，因此它的输出不是网络浏览器可以访问的。

您可能会感到困惑，因为某些 Qt 应用程序使用 Webkit (qtwebkit) 将网页作为其 ui 的一部分呈现，但并非所有 Qt 应用程序都是如此。

有 emscripten-qt 项目，它将 Qt 工具包移植到 emscripten，允许编译许多 Qt 应用程序以在浏览器中运行。但是，我怀疑 ksysguard 是否可以完全发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:10:30.127

你可以去寻找有问题的 Qt 应用程序的源代码，然后用另一个渠道重建它以获取信息。例如，去添加一个 QUdpServer...

[http://qt-project.org/doc/qt-4.8/qudpsocket.html#details](http://qt-project.org/doc/qt-4.8/qudpsocket.html#details)

[http://qt-project.org/doc/qt-4.8/network-broadcastsender.html](http://qt-project.org/doc/qt-4.8/network-broadcastsender.html)

让这个 UdpServer 发布您想要查看的信息，并针对您的网页进行格式化。最初，您可能只是让它打印当前统计信息，或最后一分钟统计信息的历史记录。稍后您可以使用 Html 5 Canvas 或其他工具生成绘图。

确保端口和 IP 地址在您希望能够访问的计算机上可见。

现在，您可以在远程浏览器中看到您的系统监控。

一旦你完成了所有这些，一定要为 KDE 社区发布你的编辑。

希望有帮助。

# cakephp - CakePHP ACL 中的拒绝导致内存耗尽

> ID：15372375
> 
> 赞同：0
> 
> 时间：2013-03-12T21:20:56.953
> 
> 标签：cakephp, cakephp-2.0, acl

运行 CakePHP 2.2 并有一个在控制器上拒绝的组，然后在其他几个控制器上允许。如果我以该组的用户身份登录并尝试访问我没有明确权限的控制器，则会收到以下错误：

> 致命错误：第 672 行 /var/www/project/lib/Cake/Network/CakeResponse.php 中允许的内存大小为 134217728 字节已用尽（尝试分配 32 字节）

并且：

> 致命错误：第 155 行 /var/www/project/lib/Cake/Event/CakeEventManager.php 中允许的内存大小为 134217728 字节已用尽（尝试分配 80 字节）

这仅在用户无权访问控制器时发生。任何想法为什么会发生这种情况？AppController 配置为：

```
public $components = array(
    'Acl',
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers'),
        ),
        'Form' => array(
            'userModel' => 'User',
            'fields' => array(
                'username' => 'username',
                'password' => 'password'
            )
        ),
        'loginAction' => array(
            'controller' => 'users',
            'action' => 'login',
        ),
        'loginRedirect' => '/users/dashboard', //'/admin/customers/index',//'/admin/tread_designs', // '/shopfloor/build/app.html',
        'logoutRedirect' => '/users/login', //'/shopfloor/build/app.html'
    )
); 
```

和之前过滤器：

```
public function beforeFilter() {
    parent::beforeFilter();

    if($this->RequestHandler->responseType() == 'json'){
        $this->RequestHandler->setContent('json', 'application/json' );
    }

    $this->Auth->ajaxLogin = '/users/session_expired';
    $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
    $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
} 
```

对此感到困惑，感谢您的帮助。此外，如果我将内存限制提高到 1024MB，它就会超时。有什么蠢事发生了。

**更新** 当我tail -f mysql查询日志时，我可以看到生成此错误的请求一遍又一遍地尝试相同的3个查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:30:11.810

解决了。需要在 AppController 中设置 'unauthorizedRedirect' => false

例子：

```
 public $components = array(
    'Acl',
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers'),
        ),
        'Form' => array(
            'userModel' => 'User',
            'fields' => array(
                'username' => 'username',
                'password' => 'password'
            )
        ),
        'loginAction' => array(
            'controller' => 'users',
            'action' => 'login',
        ),
        'loginRedirect' => '/users/dashboard', 
        'logoutRedirect' => '/users/login', 
        'unauthorizedRedirect' => false 
    )); 
```

# javascript - 焦点在文本框时显示弹出框，在模糊时隐藏它，但如果单击弹出框则不显示

> ID：15372376
> 
> 赞同：2
> 
> 时间：2013-03-12T21:20:58.150
> 
> 标签：javascript, jquery, twitter-bootstrap, popover

我的问题简单来说：

*   我有一个文本输入。
*   当它获得焦点时，将通过 jquery 的`.on('focus',...)`
*   弹出框包含一个带有单选框的表单

我希望弹出框隐藏模糊，但不是在弹出框本身内部单击某些内容时（否则单击它会使文本框失去焦点并且弹出框消失，使其无用）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:34:41.560

是的 HTML 类、.data()、布尔标志……任何适合你的东西

```
.on('click',...){ 
```

1.  `popover.addClass('oak');`
2.  `popover.data('oak',true);`
3.  `var oak = true;`

然后

```
.on('click',...,function(){
   //oak = popover.hasClass('oak');
   //oak = popover.data('oak');
   if(oak) return;
   popover.hide();
}); 
```

# orchardcms - orchard cmds 中的菜单和菜单项

> ID：15372377
> 
> 赞同：4
> 
> 时间：2013-03-12T21:21:01.877
> 
> 标签：orchardcms

我正在尝试在 Orchard CMS 中设置一个网站，它有一个包含项目的菜单。如果用户未登录，我不想显示某些菜单项。如果用户已登录，他应该会看到更多菜单项。我怎样才能实现这个 Orchard CMS。我没有看到任何限制用户使用某些导航项目的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T21:31:40.283

这是使用仪表板的快速指南：

*   转到导航。单击 *添加新菜单*...。称之为明显的东西。

    ![添加认证菜单](../Images/8796292863c1ee82c712a24867a793a3.png)

*   单击*保存*。导航页面应重新加载并选择菜单。

*   单击*添加内容项*。添加您的仅身份验证页面。

    ![在此处输入图像描述](../Images/63a97598aaece9939e56a91d3a4ebcce.png)

*   *保存*。

*   现在前往小部件。将顶部的当前图层更改为“已验证”。然后，在导航部分中单击*添加*以添加小部件。使其成为菜单小部件。

*   区域应为“导航”。 **层应该是 'Authenticated'**。如果您希望它从当前菜单继续，请设置位置 2。不显示菜单标题。并将*For Menu*更改为您最近创建的**Authenticated Menu**。

    ![在此处输入图像描述](../Images/062210c6f83c062c8197b7dbb1f98dc8.png)

*   现在检查您的网站。你应该有额外的菜单项！

    ![在此处输入图像描述](../Images/290e6e44b02e9103148f976e2297e375.png)

**注意：**除了所有用户将看到的现有菜单之外，这还会添加一个额外的菜单，这意味着您的页面源将有一个新的`<article>`和`<ul>`标签等。根据主题，这可能会或可能不会按您想要的方式显示。如果您希望为匿名和经过身份验证的用户显示一组项目，然后为经过身份验证的用户显示额外的项目，您可以执行上述操作，或重新创建完整菜单，并将其显示给经过身份验证的用户。这意味着您需要将主菜单小部件移​​动到匿名层。

# c++ - 运算符 < 重载错误，操作数无效

> ID：15372380
> 
> 赞同：0
> 
> 时间：2013-03-12T21:21:07.107
> 
> 标签：c++, templates, operator-overloading

当我尝试使用这样的代码时：

```
namespace
{
    typedef boost::shared_ptr< float >  sharedFloat;
}

static bool operator<( const sharedFloat& inOne, float inTwo )
{
    return *inOne < inTwo;
}

static void foo()
{
    std::vector< sharedFloat > theVec;
    std::vector< sharedFloat >::iterator i =
        std::lower_bound( theVec.begin(), theVec.end(), 3.4f );
} 
```

我收到一个错误：

```
error: invalid operands to binary expression ('boost::shared_ptr<float>' and 'float') 
```

（在 的实现中有一个指向 < 比较的指针`lower_bound`。）那么，当我提供这些操作数时，为什么它们无效`operator<`？

如果我改为使用比较函子，

```
namespace
{
    typedef boost::shared_ptr< float >  sharedFloat;

    struct Comp
    {
        bool operator()( const sharedFloat& inOne, float inTwo )
        {
            return *inOne < inTwo;
        }
    };
}

static void foo()
{
    std::vector< sharedFloat > theVec;
    std::vector< sharedFloat >::iterator i =
        std::lower_bound( theVec.begin(), theVec.end(), 3.4f, Comp() );
} 
```

然后它编译。我可以那样做，但我想知道为什么第一次尝试失败了。

**解决方案后添加： Herb Sutter 的** [Namespaces & Interface Principle](http://www.gotw.ca/publications/mill08.htm)帮助我更清楚地了解了这些内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:31:50.500

您`operator<`将不会被 找到`lower_bound`，因为它不在与您使用的类型关联的任何命名空间中。

编译器将在命名空间`std`和中查找`boost`，但不会在全局命名空间中查找，因为那里没有涉及任何内容。

当您通过`Comp`显式时，它会起作用，因为编译器不必搜索匹配的运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:24:13.780

调用`operator <`在命名空间内执行`std`。`operator <`因此，编译器将在`std`命名空间及其参数 (ADL) 的命名空间中寻找适当的重载。如果找到一个运算符（*即使它不可行！），则***不会**搜索封闭的命名空间。

由于您`operator <`是在全局命名空间中定义的，因此编译器不会考虑它（因为命名空间`operator <`中存在另一个重载`std`并且在名称查找之前发现可能会考虑封闭命名空间）。

最后，由于`std::operator <`不可行，编译器会发出错误。

当将您自己的仿函数作为最后一个参数传递时，情况显然有所不同：不是寻找可行`operator <`的，而是调用参数本身，并且一切都可以正常编译。

# android - 如果它是一个形状，Seekbar 拇指不显示

> ID：15372381
> 
> 赞同：0
> 
> 时间：2013-03-12T21:21:08.907
> 
> 标签：android, drawable, shape, seekbar

搜索栏：

```
<SeekBar
    android:id="@+id/seekBar"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:paddingLeft="20dip"
    android:paddingRight="20dip"
    android:progressDrawable="@drawable/bg"
    android:thumb="@drawable/thumb"
    android:thumbOffset="0px" /> 
```

问题：如果拇指可绘制它是位图，但形状像

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
    <solid android:color="#ffff0000" />
</shape> 
```

大拇指不显示。

我尝试过这样的事情：

```
Drawable thumb = getResources().getDrawable(R.drawable.thumb);
thumb.setBounds(0,0,20,20);
seekBar.setThumb(thumb); 
```

但仍然是同样的问题。可绘制对象在“那里”，可以拖动，并且在正确的位置，但不可见。有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T21:40:40.040

尝试为您的形状添加大小：

```
 <shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
    <solid android:color="#ffff0000" />
<size
        android:width="20dp"
        android:height="20dp" />
</shape> 
```

# command - Redis 命令队列大小

> ID：15372382
> 
> 赞同：7
> 
> 时间：2013-03-12T21:21:14.243
> 
> 标签：command, redis, queue

如何记录/测量 Redis 命令队列的大小。

Redis 是单线程的，所以它顺序运行命令，因为我猜那里有命令队列，传入的命令被存储并一一执行。SLOWLOG 命令只显示执行时间，所以问题是，有没有办法在开始执行之前获取命令在队列中的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T09:41:14.073

AFAIK，Redis 中没有命令队列。

当套接字上有要读取的内容时，会通知事件循环。Redis 读取套接字，解析输入缓冲区并在从输入缓冲区解码时执行命令。如果同时接收到多个命令（在不同的套接字上），它们只是作为同一事件循环迭代的一部分按顺序处理。

无法评估待处理命令的确切数量。[但是，有一种方法可以使用CLIENT LIST](http://redis.io/commands/client-list)命令来评估输入缓冲区中仍待处理的数据量。它对应于 qbuf 统计量。

您还可以评估套接字缓冲区中仍待处理的数据量（Redis 尚未读取的数据）。在 Linux 上，您可以为此使用 /proc/net/tcp 中的统计信息。这是使用此策略的 Python 脚本示例。

[https://gist.github.com/dspezia/2344181](https://gist.github.com/dspezia/2344181)

您可能必须使脚本适应您的系统。

# r - R比较所有列对的每个值

> ID：15372383
> 
> 赞同：3
> 
> 时间：2013-03-12T21:21:19.297
> 
> 标签：r

我有一个 18x18 的数据框，我想将所有可能的列对相互比较，以便对于每对两列，将 18 行中的值相互比较。

由于我的数据太大而无法放在这里，所以我写了一个小例子来说明我到目前为止的想法：

```
> a <- c(1:18)
> b <- c(18:1)
> c <- c(1:9,18:10)
data <- as.data.frame(matrix(c(a,b,c), ncol = 3, nrow = 18))
> data
   V1 V2 V3
1   1 18  1
2   2 17  2
3   3 16  3
4   4 15  4
5   5 14  5
6   6 13  6
7   7 12  7
8   8 11  8
9   9 10  9
10 10  9 18
11 11  8 17
12 12  7 16
13 13  6 15
14 14  5 14
15 15  4 13
16 16  3 12
17 17  2 11
18 18  1 10 
```

说，我想将 col V1 与 V3 进行比较，并且当第一个 col (V1) 的值大于时，将两列（V1 和 V3）中的相等值分配为 1，并且当第二个 col (V3) 更大，分配一个 2。我可以使用以下代码为每一对手动执行此操作，将结果转换为新的数据帧 freqcomp：

```
> freqcomp <- as.data.frame(table(ifelse(data[,1]==data[,3],0,ifelse(data[,1]>data[,3],1,ifelse(data[,1]<data[,3],2,NA)))))
> 
> freqcomp
  Var1 Freq
1    0   10
2    1    4
3    2    4 
```

我怎样才能为我拥有的所有列自动进行这种比较？是否有一个很好的 for 循环来运行所有列或我可以使用的任何其他函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:48:22.120

您需要使用`combn()`和`apply()`：

```
apply(combn(1:length(data), 2), 2, function(x) {
    as.data.frame(table(
        factor(sign(data[,x[1]] - data[,x[2]]), levels=c(0,1,-1), labels=c(0,1,2))
    ))
}) 
```

（为了便于阅读，分成多行）。

它给了我：

```
[[1]]
  Var1 Freq
1    0    0
2    1    9
3    2    9

[[2]]
  Var1 Freq
1    0   10
2    1    4
3    2    4

[[3]]
  Var1 Freq
1    0    0
2    1    9
3    2    9 
```

**编辑**：为每个 data.frame 命名列很容易：

```
apply(combn(1:length(data), 2), 2, function(x) {
    result <- as.data.frame(table(
        factor(sign(data[,x[1]] - data[,x[2]]), levels=c(0,1,-1), labels=c(0,1,2))
    ))
    colnames(result)[1] <- paste(x, collapse="|")
    return(result)
}) 
```

# node.js - 如何在 express.js 中退出路由？

> ID：15372385
> 
> 赞同：5
> 
> 时间：2013-03-12T21:21:38.087
> 
> 标签：node.js

是的，因为我有多个 res.render 函数，所以我将它全部包装在一个大的 if else 语句中。

我怎么能做这样的事情，这应该会阻止其余的路线被执行：

```
if(req.params.url === undefined){
    res.render('layout');
    return;
} 
```

或者：

```
if(req.params.url === undefined){
    res.render('layout');
    next();
} 
```

但是两者都执行它们下面的其余代码，这导致标头已经发送。

现在我的代码如下所示：

```
exports.activate = function(req, res){
    var hash = req.params.hash;

    if(hash === undefined){
        res.render('activation');
        next();
    } else {
           // Do stuff with hash
           res.render('activateOne', {hash: hash});
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:35:04.617

我不是 100% 确定这一点，但是如果您只想在 res.render() 之后退出该功能，我认为您可以使用`return`. 这应该会阻止当前函数的其余部分执行。

一个简单的 AJAX 示例（我知道它的客户端，但它是一个异步函数，应该表现类似）：

```
$.ajax({
   url: 'www.google.com',
   type: 'POST',
   error: function () {
      console.log('failure');
      return 0;
      console.log('after return');
   }
}) 
```

如果您尝试在浏览器控制台中执行此操作，您会注意到“失败”日志，但是它将在“返回后”消息之前停止。

# asp.net-mvc-4 - 有没有办法在 MVC4 中使用 Scripts.Url 获取文件的未缩小版本？

> ID：15372386
> 
> 赞同：3
> 
> 时间：2013-03-12T21:21:38.333
> 
> 标签：asp.net-mvc-4, bundling-and-minification

在这里查看概述：[http ://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

看起来你可以`Scripts.Url`在脚本标签内使用，以防你想装饰脚本标签：

```
<script src='@Scripts.Url("~/bundles/modernizr")' async> </script> 
```

问题是无论程序是否在调试模式下运行，您总是得到缩小版本。

有没有办法获得与 相同的缩小/未缩小`Scripts.Render`功能`Scripts.Url`？

**更新**
看起来您可以从每个捆绑包中删除转换，以防止它实际缩小捆绑包。所以我在声明每个捆绑包后添加了这个：

```
// If optimizations aren't enabled
if (!BundleTable.EnableOptimizations)
{
    // Iterate over each bundle
    foreach (var b in bundles)
    {
        // And strip out any transformations (minify)
        b.Transforms.Clear();
    }
} 
```

不是最漂亮的东西，但现在有效。如果有更简单的方法，我很想知道。

# .net - 将文本附加到文本文件的顶部

> ID：15372387
> 
> 赞同：0
> 
> 时间：2013-03-12T21:21:37.907
> 
> 标签：.net, vb.net, vb.net-2010

我有一个类似于日记的表格。我希望用户做笔记，表单会将文本框中的笔记保存到文本文件中。数据附加到文本文件，但我希望它附加到顶部，所以当它加载时，它是用户能够看到的第一行文本。

```
IO.File.AppendAllText("name.txt", vbCrLf + Date.Today + vbCrLf + TextBox9.Text) 
```

有没有办法将文本插入到文本文件的顶部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:18:43.193

获取 name.txt 的内容并将其放入变量中，然后在其前面附加新文本。
像这样的东西：

```
Dim mytext as String 
mytext = Read(name.txt)  
mytext = Date.today & vbCrlf & Textbox9.text & vbCrlf & name.txt  
IO.File.WriteAllText("name.txt", mytext) 
```

这种方法的缺点是，只要您的文本增加，写入时间就会增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:20:51.060

读取现有日志，添加新条目，写入日志。

不能很好地扩展，但应该可以正常工作一段时间。可能会根据新条目的数量按日/月/年切换日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-12T16:55:32.607

将文件放入变量中，然后只需将旧文本添加到末尾即可。像这样的东西：

```
Dim TextFileReader as String
TextFileReader = My.Computer.FileSystem.ReadAllText("path")
IO.File.WriteAllText("path", "Our text to go at the top" & vbnewline & TextFileReader) 
```

# java - Hiveserver2 Java API

> ID：15372388
> 
> 赞同：2
> 
> 时间：2013-03-12T21:21:38.833
> 
> 标签：java, hadoop, hive, thrift, hortonworks-data-platform

我已经能够连接到使用创建的 hiveserver (1)

```
hive --service hiveserver -v -p 10001 
```

使用以下java：

```
TSocket transport = new TSocket("hive.example.com", 10001);     
transport.setTimeout(999999999);
TBinaryProtocol protocol = new TBinaryProtocol(transport);
Client client = new ThriftHive.Client(protocol); 

transport.open();        
client.execute("SHOW TABLES");     
System.out.println(client.fetchOne());
transport.close(); 
```

hiveserver2 是否存在等价物，如果存在，它是什么？我找到的最好的是一个[设计提案](https://cwiki.apache.org/Hive/hiveserver2-thrift-api.html)，我还没有找到任何文档。看起来 Cloudera 在[这里为 python 设置了一些东西](https://github.com/cloudera/hue/blob/master/apps/beeswax/src/beeswax/server/hive_server2_lib.py)

或者，从 Java 运行任意 Hive 查询的最佳方法是什么？如果相关，我在 Hortonworks Data Platform 1.2 上运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T05:13:04.040

服务器进程期待来自客户端的 SASL 握手（这就是您可以在堆栈跟踪中看到 TSaslServerTransport 的原因）。使用 TSaslClientTransport 作为 TSocket 连接的包装器 - 您还需要将适当的配置 SaslClient 实例传递给构造函数。或者，您可以修改 hive-site.xml 以关闭 SASL 身份验证。

```
<property><name>hive.server2.authentication</name><value>NOSASL</value></property> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:28:50.313

您是否考虑过使用[HiveClient JDBC 接口？](https://cwiki.apache.org/confluence/display/Hive/HiveClient)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:18:22.353

经过一番搜索后，我设法使用 Hortonworks Data Platform 1.2 中的 cli_service.thrift 为 hiveserver 2 生成了 Java thrift 服务器和客户端。如果有人感兴趣，你可以在[这个 tarball](http://public-repo-1.hortonworks.com/HDP-1.2.0/repos/centos6/tars/hive-0.10.0.21.tar.gz)中找到它。一旦我这样做并导入了结果文件，我的 IDE 就会让我知道 Hiveserver2 客户端 API 在我一直拥有的 jar 中。不幸的是，我无法在 Apache hive jar 中找到它，所以在 Maven 中，将它添加到 pom.xml 并不能完全消除它。

```
<dependency>
  <groupId>org.apache.hive</groupId>
  <artifactId>hive-service</artifactId>
  <version>0.10.0</version>
</dependency> 
```

我将 HDP 1.2 版本的 0.10.0.21 版本的 hive-server 添加到我的存储库中，并改为引用它。然后我手动将它的所有依赖项添加到我的 pom.xml 中，包括来自 HDP 的其他几个 0.10.0.21 hive jar。由于这个过程与我的回答有些相切，除非有人要求，否则我不会对此进行更详细的说明。

实际上让 API 工作完全是另一回事。通过查看 thrift 生成的数十个文件、查看 cli_service.thrift 和查看[Apache JDBC 实现](https://github.com/apache/hive/tree/trunk/jdbc/src/java/org/apache/hive/jdbc)（这是我所知道的针对 Hiveserver2 thrift API 编写的唯一示例），我想出了以下代码几乎是 Hiveserver (1) 示例的直接翻译：

```
TSocket transport = new TSocket("hive.example.com", 10002);

transport.setTimeout(999999999);
TBinaryProtocol protocol = new TBinaryProtocol(transport);
TCLIService.Client client = new TCLIService.Client(protocol);  

transport.open();
TOpenSessionReq openReq = new TOpenSessionReq();
TOpenSessionResp openResp = client.OpenSession(openReq);
TSessionHandle sessHandle = openResp.getSessionHandle();

TExecuteStatementReq execReq = new TExecuteStatementReq(sessHandle, "SHOW TABLES");
TExecuteStatementResp execResp = client.ExecuteStatement(execReq);
TOperationHandle stmtHandle = execResp.getOperationHandle();

TFetchResultsReq fetchReq = new TFetchResultsReq(stmtHandle, TFetchOrientation.FETCH_FIRST, 1);
TFetchResultsResp resultsResp = client.FetchResults(fetchReq);

TRowSet resultsSet = resultsResp.getResults();
List<TRow> resultRows = resultsSet.getRows();
for(TRow resultRow : resultRows){
    resultRow.toString();
}

TCloseOperationReq closeReq = new TCloseOperationReq();
closeReq.setOperationHandle(stmtHandle);
client.CloseOperation(closeReq);
TCloseSessionReq closeConnectionReq = new TCloseSessionReq(sessHandle);
client.CloseSession(closeConnectionReq);

transport.close(); 
```

这是针对使用以下命令启动的 Hiveserver2 服务器运行的：

```
export HIVE_SERVER2_THRIFT_PORT=10002;hive --service hiveserver2 
```

不幸的是，当我尝试针对 Hiveserver2 运行 Hiveserver (1) 客户端时，我得到了相同的行为。`transport.open()`工作，但第一个请求（在 hiverserver2 的情况下`client.OpenSession()`，而不是 hiveserver 的 (1) `client.execute()`）挂起。Wireshark 显示 TCP 段已确认。在我杀死我的客户端或请求超时之前，没有控制台输出或任何写入日志的内容，然后我得到：

```
13/03/14 11:15:33 ERROR server.TThreadPoolServer: Error occurred during processing of message.
java.lang.RuntimeException: org.apache.thrift.transport.TTransportException: java.net.SocketException: Connection reset
    at org.apache.thrift.transport.TSaslServerTransport$Factory.getTransport(TSaslServerTransport.java:219)
    at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:189)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.thrift.transport.TTransportException: java.net.SocketException: Connection reset
    at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:129)
    at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)
    at org.apache.thrift.transport.TSaslTransport.receiveSaslMessage(TSaslTransport.java:182)
    at org.apache.thrift.transport.TSaslServerTransport.handleSaslStartMessage(TSaslServerTransport.java:125)
    at org.apache.thrift.transport.TSaslTransport.open(TSaslTransport.java:253)
    at org.apache.thrift.transport.TSaslServerTransport.open(TSaslServerTransport.java:41)
    at org.apache.thrift.transport.TSaslServerTransport$Factory.getTransport(TSaslServerTransport.java:216)
    ... 4 more
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:127)
    ... 10 more 
```

似乎有人在 Python 客户端上遇到了类似的问题。我缺乏发布链接的声誉，所以如果你想查看他们（未解决的）问题谷歌`hiveserver2 thrift client python grokbase`

由于它不起作用，这只是我问题的部分答案。但是，现在我有了 API，我将提出一个新问题来让它工作。我也无法链接到该链接，因此如果您想在我的用户历史记录中查看后续内容。

# javascript - javascript函数可以删除包含它的html元素吗？

> ID：15372390
> 
> 赞同：-3
> 
> 时间：2013-03-12T21:21:40.273
> 
> 标签：javascript, jquery, html

例如：

```
<div class='blah'>
    <script>
        $('.blah').remove();
    </script>
</div> 
```

**编辑：**

好吧，我对此投了很多反对票。我宁愿知道这是否是一个好主意，但既然这是主观的，让我问：javascript如何处理一个删除自身的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:27:14.177

是的，你可以 -> [http://jsbin.com/ososuh/1](http://jsbin.com/ososuh/1)

更重要的是，您可以定义函数，稍后您将调用该函数。我想它是在解析时间到内存时添加的，以后可以调用它。以前没有尝试过，但必须承认这很有趣;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:24:20.043

首先，你永远不应该像这样将你的 javascript 内联。对于网络优化来说，这是不好的做法和糟糕的做法。其次，当然，为什么不呢？

如果您以某种方式绑定到元素，您仍然可以删除 HTML，尽管它不会删除实际的脚本函数本身。

```
$('.blah').bind('click', function () {
    $(this).remove();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:52:17.653

查看[Do browsers parse javascript on each page load 的答案？](https://stackoverflow.com/questions/1096907/do-browsers-parse-javascript-on-every-page-load)

例如：

> **铬：V8 引擎**
> 
> V8 有一个编译缓存。这使用源的哈希存储已编译的 JavaScript，最多可用于 5 个垃圾收集。这意味着两个相同的源代码将在内存中共享一个缓存条目，无论它们是如何包含的。重新加载页面时不会清除此缓存。

因此，如果您在 Chrome 中按 F5，它将检测（通过脚本标记内容的文本散列）它已经将这段 JavaScript 代码解析并编译为本机代码。所以它只会执行它。

由于这段已经编译的 JS 代码与 DOM 分离（在内存的不同部分），它还可以操作代表自身的 DOM 元素。至少我是这样理解工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T21:23:35.663

是的。如果函数在此之后并不意味着它们将是未定义的，但是您可以非常自由地从 JavaScript 修改 DOM。

# haskell - 是否有从纯 HTML 转换为 Hamlet 结构的函数？

> ID：15372395
> 
> 赞同：5
> 
> 时间：2013-03-12T21:22:02.673
> 
> 标签：haskell, yesod, hamlet

我开始使用 Yesod Web 框架。我有一些已经存在的模板 HTML 代码，我想将其自动转换为 Hamlet 代码结构。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T16:40:22.363

这是一个可能完成大部分工作的解决方案

```
perl -pe 'chomp' test.html | xmllint --format --encode UTF-8 - | perl -pe 's#</[^>]+>##g' 
```

来自[https://github.com/yesodweb/yesod/wiki/Hamlet](https://github.com/yesodweb/yesod/wiki/Hamlet)

# ssis - SSIS 查找转换在日期列上失败

> ID：15372396
> 
> 赞同：3
> 
> 时间：2013-03-12T21:22:09.450
> 
> 标签：ssis, sql-server-2012

我们有一个查找转换来进行日期查找。输入列的数据类型是 DT_DBDATE，匹配的查找列也是如此。两者都是 SQL Server 2012 中的 DATE 数据类型。这是一个 SSIS 2012 包。

查找在 BIDS（设计器）中运行良好。通过 SSISDB UI 或我们的自定义存储过程部署和运行时，此查找失败并出现以下错误：

> 错误：查找状态 Key.Inputs[Lookup Input].Columns[status_dt] 和名为“status_dt”的引用列具有不兼容的数据类型。

我们还会在所有 DATE 列周围看到同步警告，这些警告不会导致失败。

有没有其他人看到过这种行为？

更新：解决方法是将列转换为 DATETIME（SSIS 中的 DT_DBTIMESTAMP）或将基础列更改为 DATETIME。两者都解决了这个问题。两者都很烦人。

我的猜测是问题的根源在于 OLE DB 提供程序。对仅日期数据类型的支持可能有限或不稳定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:29:51.703

我有一个答案。问题是我没有在我的连接字符串上指定提供者。当我添加**Provider=SQLNCLI11.1;** ，问题解决了。

# hex - 我如何在 arduino 上数到 f

> ID：15372400
> 
> 赞同：0
> 
> 时间：2013-03-12T21:22:18.340
> 
> 标签：hex, arduino, counting

假设您想为您的 Arduino 设置 16 个不同的数字而不是 10 个。

0 1 2 3 4 5 6 7 8 9 abcdef

看起来熟悉？是的，我想为 Arduino 制作一个十六进制计数脚本。也许它可以计算多达 40 个字符的滚动和随机文本，可以在 LCD 屏幕上查看（我已经将 LCD 部分放下了）。

我几乎到处都在寻找这个，但我没有找到任何东西。好吧，我确实做到了，但这对这个问题没有任何帮助。你可以在这里找到链接：[http ://arduino.cc/forum/index.php?topic=40555.0](http://arduino.cc/forum/index.php?topic=40555.0)

我希望输出从 0 计数到（40 f's）。

我有一个 Arduino Uno 和一个 LCD 屏幕（16x2），我意识到我可能需要一个更大的屏幕。

感谢您花时间阅读本文，我希望这个问题得到解决！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:26:05.780

如果您使用[LiquidCrystal](http://arduino.cc/en/Reference/LiquidCrystalPrint)库，您可以指定在什么基础上打印您的号码

```
a = 15;
lcd.print(a,HEX); //print E 
```

顺便说一句，它也可以应用于 Serial 对象，例如

```
b = 14;
Serial.println(b,HEX) //prints D 
```

循环播放

```
for( int i = 0 ; i < 100 ; i++)
   lcd.print(i,HEX); 
```

这将打印：

```
0 1 2 3 .... 9 A B C D E F 10 11 ... 1E 1F 20 21 22 ..... 2E 2F 30 ... 
```

# jquery - 在 jQueryMobile AJAX 页面加载上加载和执行 audio.js

> ID：15372403
> 
> 赞同：4
> 
> 时间：2013-03-12T21:22:28.837
> 
> 标签：jquery, ajax, jquery-mobile

我有一个通过 jQuery Mobile 显示的页面，上面有一个 audio.js 播放器。

但是，当页面通过 jQuery Mobile 的单击处理程序的 AJAX 劫持加载时，audio.js 代码不会被执行，因此没有音频播放器。

有没有一种方法可以让我在通过 AJAX 加载页面时执行 Javascript 代码，例如 audio.js 代码？

[您可以通过访问http://media.urbansermons.net/m/audio-list/term/6711](http://media.urbansermons.net/m/audio-list/term/6711)并单击其中列出的任何音频来查看问题示例。请注意，这是一个测试站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T08:58:42.423

由于用户必须单击一个项目，如果不是在浏览器中加载新链接，而是使用 DIV 从列表切换到详细信息页面，因此无需打开新 URL，您可以使用相同的单击来启动播放器（因为移动设备要求在播放音频/视频之前点击事件。

同样在您发送的所有 mp3 链接上作为空文件返回。

# google-sheets - 如何为测验评分？

> ID：15372404
> 
> 赞同：0
> 
> 时间：2013-03-12T21:22:29.833
> 
> 标签：google-sheets, google-sheets-formula

假设我在电子表格中有这样的数据：

```
Correct     Bob    Alice
   True    True    False
   True    True     True
  False   False    False
   True   False    False
            XXX      YYY 
```

如您所见，鲍勃答对了三个问题，而爱丽丝答对了两个。

我可以在位置 XXX 和 YYY 中输入什么公式让电子表格为我计算这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:56:10.317

假设您的示例从单元格 A1 开始，请将其放在单元格 B6 中以替换 XXX：

```
=ArrayFormula(sum(if(B2:B5=$A2:$A5,1,0))) 
```

# r - 回归汇总输出 R 中未出现的定性预测变量

> ID：15372406
> 
> 赞同：0
> 
> 时间：2013-03-12T21:22:30.497
> 
> 标签：r, linear-regression

我有一个大数据集，用于运行带有一些定性预测变量的线性回归模型。我将数据集称为 WN，定性变量是 OState 和 DState（美国的州）。在这里，您将看到 WN 中的 OState 和 DState 有 62 个唯一值：

```
> unique(WN$OState)
[1] NY MA PA DE DC VA MD WV NC RI SC NH GA FL AL TN MS ME KY OH IN MI VT IA WI MN SD ND MT CT IL MO KS NE NJ LA AR OK TX CO WY ID UT AZ NM NV CA OR WA
62 Levels: AA AE AK AL AP AR AS AZ CA CO CT DC DE FL FM GA GU HI IA ID IL IN KS KY LA MA MD ME MH MI MN MO MP MS MT NC ND NE NH NJ NM NV NY OH OK OR PA PR PW RI SC SD TN TX UT VA VI VT WA ... WY
> unique(WN$DState)
[1] MA RI NH ME VT CT NY NJ PA DE DC VA MD WV NC SC GA FL AL TN MS KY OH IN MI IA WI MN SD ND MT IL MO KS NE LA AR OK TX CO WY ID UT AZ NM NV CA OR WA
62 Levels: AA AE AK AL AP AR AS AZ CA CO CT DC DE FL FM GA GU HI IA ID IL IN KS KY LA MA MD ME MH MI MN MO MP MS MT NC ND NE NH NJ NM NV NY OH OK OR PA PR PW RI SC SD TN TX UT VA VI VT WA ... WY 
```

现在我正在运行回归模型来预测带有距离、OState 和 DState 的速率，如下所示：

```
> WN.LR = lm(WN$Rate~WN$Distance+WN$OState+WN$DState) 
```

当我检查回归摘要时，我看到仅填充了 48 个 OState 和 DState 预测变量，其余 14 个缺失。下面给出了摘要输出的一小部分。例如，您会看到输出中缺少 OStateAL：

```
> summary(WN.LR)

Call:
lm(formula = WN$Rate ~ WN$Distance + WN$OState + WN$DState)

Residuals:
    Min      1Q  Median      3Q     Max 
-2370.3  -218.4   -18.9   170.8  9105.7 

Coefficients:
              Estimate Std. Error t value Pr(>|t|)    
(Intercept)  1.208e+03  6.632e+00 182.171  < 2e-16 ***
WN$Distance  1.626e+00  3.111e-03 522.722  < 2e-16 ***
WN$OStateAR  2.000e+02  7.294e+00  27.419  < 2e-16 ***
WN$OStateAZ  1.981e+02  8.372e+00  23.667  < 2e-16 ***
WN$OStateCA  1.056e+02  7.919e+00  13.340  < 2e-16 ***
WN$OStateCO  1.323e+02  7.332e+00  18.043  < 2e-16 ***
WN$OStateCT -2.019e+02  1.827e+01 -11.048  < 2e-16 ***
WN$OStateDC  5.711e+02  2.178e+01  26.223  < 2e-16 *** 
```

另一方面，当我检查具有 OState = "AL" 的实体时，我看到有超过 6000 行：

```
> WNnew<-subset(WN,OState=="AL")
> nrow(WNnew)
[1] 6213 
```

对此有何解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:31:04.403

这很可能是因为混叠（即您的模型被过度识别）。例如，马萨诸塞州在你`DState`和`OState`变量中都是一个水平，所以我认为它在两种治疗中的影响是不能分开的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:56:54.960

构建模型时，您没有阅读警告，即系数列表中的所有 NA。运行时将列出别名术语：

```
WN.LR  # always look at the output of `lm` as well as that of `summary.lm` 
```

...而您只是未能读取输出。您可能会考虑在说 OState 中创建一个“相同”级别，其中 DState 与 OState 相同，然后允许它捕获没有差异的所有状态。

# python - 在 Python 中从 Google API 获取文件元数据

> ID：15372408
> 
> 赞同：0
> 
> 时间：2013-03-12T21:22:42.427
> 
> 标签：python, google-api, google-drive-api

我目前正在尝试研究如何使用 python 从谷歌驱动器下载文件元数据。我几乎只是从谷歌提供的文档中复制/粘贴，到目前为止一切都很好。当我尝试打电话时：

```
drive_file = drive_service.files().get(id=file_id).execute() 
```

我收到以下错误：

```
drive_file = drive_service.files().get(id=file_id).execute()
File "build\bdist.win-amd64\egg\apiclient\discovery.py", line 452, in method
TypeError: Got an unexpected keyword argument "id" 
```

但是，在谷歌文档中有一个示例（[在](https://developers.google.com/drive/v1/reference/files/get#examples)Python 选项卡下），它显示了与我所拥有的几乎完全相同的东西。我的代码是否因为我缺乏 Python 经验或其他原因而无法工作？完整程序显示如下：

```
import httplib2

from apiclient.discovery import build
from oauth2client.client import OAuth2WebServerFlow

def getDriveService():
    ClientID = <MY_CLIENT_ID>
    ClientSecret = <MY_CLIENT_SECRET>
    OAUTH_SCOPE = 'https://www.googleapis.com/auth/drive'
    REDIRECT_URI = <MY_REDIRECT_URI>

    flow = OAuth2WebServerFlow(ClientID, ClientSecret, OAUTH_SCOPE, REDIRECT_URI)
    flow.redirect_uri = REDIRECT_URI
    authorize_url = flow.step1_get_authorize_url()
    print authorize_url
    code = raw_input('Enter verification code: ').strip()

    credentials = flow.step2_exchange(code)          
    http = httplib2.Http()
    http = credentials.authorize(http)

    return build('drive', 'v2', http=http)

drive_service = getDriveService()
files = drive_service.files().list().execute()

file_id = files['items'][0]['id']

#Error occurs here
drive_file = drive_service.files().get(id=file_id).execute()

print 'Title: %s' % drive_file['title']
print 'Description: %s' % drive_file['description']
print 'MIME type: %s' % drive_file['mimeType'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-30T09:43:42.753

我解决它。您可以修改代码

```
drive_file=drive_service.files().get(id=file_id).execute() 
```

至

```
drive_file = drive_service.files().get(fileId=file_id).execute() 
```

# c++ - opencv undistortPoints 返回 NaN ios

> ID：15372422
> 
> 赞同：2
> 
> 时间：2013-03-12T21:23:25.883
> 
> 标签：c++, ios, opencv, image-processing, computer-vision

我一直在使用 opencv，但似乎无法让 undistortPoints 工作。它返回的矩阵只有 NaN 值。

```
 //newKeyPoints is std::vector<cv::KeyPoint>, and it's values are valid
    cv::Mat src = cv::Mat(1,newKeyPoints.size(),CV_32FC2); 
    int i = 0;
    for (std::vector<cv::KeyPoint>::iterator it = newKeyPoints.begin(); it != newKeyPoints.end(); it++){
        src.at<cv::Vec2f>(0,i)[0] = (*it).pt.x;
        src.at<cv::Vec2f>(0,i)[1] = (*it).pt.y;
        i++;
    }

    cv::Mat norm = cv::Mat(1,newKeyPoints.size(),CV_32FC2);

    //Note: fx, fy, cx, cy... k3 are all global constants declared when initialized
    cv::Mat cameraMatrix = cv::Mat(3, 3, CV_32F);
    cameraMatrix.at<double>(0,0) = fx; //double fx = 354.65 
    cameraMatrix.at<double>(1,0) = 0;
    cameraMatrix.at<double>(2,0) = 0;
    cameraMatrix.at<double>(0,1) = 0;
    cameraMatrix.at<double>(1,1) = fy; //double fy = 355.66
    cameraMatrix.at<double>(2,1) = 0;
    cameraMatrix.at<double>(0,2) = cx; //double cx = 143.2
    cameraMatrix.at<double>(1,2) = cy; //double cy = 173.6
    cameraMatrix.at<double>(2,2) = 1;

    cv::Mat distCo = cv::Mat(1, 5, CV_32F);
    distCo.at<double>(0,0) = k1; //double k1 = .005
    distCo.at<double>(0,1) = k2; //double k2 = .002
    distCo.at<double>(0,2) = p1; //double p1 = -.009
    distCo.at<double>(0,3) = p2; //double p2 = -.008
    distCo.at<double>(0,4) = k3; //double k3 = -.03

    cv::undistortPoints(src, norm, cameraMatrix, distCo);

    for (int p = 0; p<newKeyPoints.size(); p++){
       printf("%f, %f \n",norm.at<Vec2f>(0,p)[0], norm.at<Vec2f>(0,p)[1]);
    } 
```

打印的值始终是“nan, nan”。我也尝试使用 norm 作为 std::vector，但返回的结果相同。调用方法后 src、cameraMatrix 和 distCo 的值也保持不变（我通过打印出它们的值进行了测试），所以我确信我给 undistortPoints 提供了所有正确的信息。我是否错误地使用了 cv::Mat，使用了糟糕的形式，或者这是 opencv 的错误。任何有关从这里做什么的见解将不胜感激。

艾萨克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:29:43.477

如果您希望矩阵存储双精度值，则需要使用

```
cv::Mat your_matrix(rows,cols,CV_64FC1); 
```

您还没有对 cameraMatrix 和 distCo 矩阵执行此操作。目前，您正在尝试使用 64 位访问器访问这些数组的 32 位元素。

# ios - 如何比较数组中的三个对象？

> ID：15372424
> 
> 赞同：2
> 
> 时间：2013-03-12T21:23:28.420
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, nsarray

在我的纸牌匹配游戏中（遵循斯坦福课程），我需要创建一个`UISwitch`将匹配两张牌的游戏模式更改为三张牌匹配的游戏模式，现在我已经有了一个如下所示的匹配方法：

```
-(int)match:(NSArray *)cardToMatch {

    int score = 0;

    if (cardToMatch.count == 1) {
        PlayingCards *aCard = [cardToMatch lastObject];

        if ([aCard.suit isEqualToString: self.suit]) {
            score = 1;
        } else if (aCard.rank == self.rank) {
            score = 4;
        }

    }

    return score;
} 
```

它已经是一个数组，但我只在两张卡之间进行检查。我怎样才能改进这种方法来检查三个，或者创建一个单独的？

这也是检查已翻转卡片的方法：

```
-(Card *) cardAtIndex:(NSUInteger)index {

    return (index < self.cards.count) ? self.cards[index] : nil;
}

#define FLIP_COST 1
#define MISMATCH_PENALTY 2
#define BONUS 4

-(void) flipCardAtIndex:(NSUInteger)index {

    Card *card = [self cardAtIndex:index];

    if (!card.isUnplayable) {

        if (!card.isFaceUp) {

            for (Card *otherCard in self.cards) {

                if (otherCard.isFaceUp && !otherCard.isUnplayable) {

                   int matchScore = [card match:@[otherCard]];

                    if (matchScore) {

                        otherCard.unplayble = YES;
                        card.unplayble = YES;

                        self.notification = [NSString stringWithFormat:@"%@ & %@  match!", card.contents, otherCard.contents];

                        self.score += matchScore * BONUS;
                    } else {
                        otherCard.faceUp = NO;
                        self.score -= MISMATCH_PENALTY;
                        self.notification = [NSString stringWithFormat:@"%@ did not matched to %@", card.contents, otherCard.contents];
                    }
                    break;
                }

            }
            self.score -= FLIP_COST;
        }
        card.faceUp = !card.isFaceUp;

    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:09:42.863

我假设您已经知道要匹配的卡片的索引。因此，如果您有三个索引，则使您的匹配函数返回一个布尔值。然后您可以使用嵌套的 if 来测试第三张卡。它看起来像这样。

```
if([self match:index1 card2:index2]){
    if(self match:index1 card2:index3){
        NSLog(@"You have a match");
    }
}
else NSLog@"No match"; 
```

您的匹配函数如下所示：

```
-(BOOL)match:(int)index1 card2:(int)index2{
    //Do your matching here and return if YES or NO accordingly
} 
```

# javascript - JavaScript 负前瞻正则表达式产生错误结果

> ID：15372428
> 
> 赞同：1
> 
> 时间：2013-03-12T21:23:52.213
> 
> 标签：javascript, regex

假设以下 URL：`http://a2.mzstatic.com/us/ryoyo0/078/Purple100x100/v4/38/e3/b4/38e3b4a2-b422-8d1e-69f2-593fc035c9d4/mzl.vqhwzhhc.100x100-75.jpg`

我们想用 256x256 替换最后出现的 100x100。URL 应为：

```
http://a2.mzstatic.com/us/ryoyo0/078/Purple100x100/v4/38/e3/b4/38e3b4a2-b422-8d1e-69f2-593fc035c9d4/mzl.vqhwzhhc.256x256-75.jpg 
```

这是我们的 JavaScript 替换方法：

```
replace( /100x100(?!100x100)/, '256x256' ) 
```

不幸的是，我们总是替换第一个，而不是最后一个。

我们做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:28:09.480

试试这个：`replace( /100x100(?!.*100x100)/, '256x256' )`

`.*`在 . 的第一次出现和最后一次出现之间添加额外字符的帐户`100x100`。

**注意**- 虽然我的回答描述了您在模式中做错了什么以及如何解决它，但 Billy Moon 提供的答案可能是您似乎正在尝试做的更好的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:33:45.317

另一种方法...

```
replace( /(.*)100x100/, '$1256x256' ) 
```

作品由...

1.  `100x100`用 , 尽可能贪婪地捕获所有内容到第`(.*)`1 组
2.  匹配的`100x100`
3.  将其替换为捕获的组 1，通过使用`$1`然后添加`256x256`代替未捕获的匹配

*注意*此方法仅适用于最后一场比赛（或者如果您通过`?`在`.*`

出于性能原因、为了与各种正则表达式实现的兼容性以及我相信为了可读性，避免使用环视断言通常是好的。

## 编辑：测试脚本

```
var url = "http://a2.mzstatic.com/us/ryoyo0/078/Purple100x100/v4/38/e3/b4/38e3b4a2-b422-8d1e-69f2-593fc035c9d4/mzl.vqhwzhhc.100x100-75.jpg"

console.log(url.replace(/(.*)100x100/, '$1256x256'))

// OUTPUT:
// http://a2.mzstatic.com/us/ryoyo0/078/Purple100x100/v4/38/e3/b4/38e3b4a2-b422-8d1e-69f2-593fc035c9d4/mzl.vqhwzhhc.256x256-75.jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:30:53.863

你也可以改变你的负前瞻来寻找斜线。由于第二次出现以句点而不是斜线结尾，应该可以解决它。

```
/100x100(?!\/)/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:50:59.133

另一种方法，由于可能被误解的意图，它只替换`100x100`s 出现在 url 的文件名部分（没有`/`出现在字符串之后）中。

```
replace(/100x100([^\/]*)$/, '256x256$1') 
```

作品由...

1.  匹配`100x100`
2.  ...然后捕获到第 1 组，零个或多个，而不是正斜杠，与`([^\/]*)`
3.  ...后跟字符串的结尾，`$`
4.  替换`256x256`为第一个捕获组，`$1`

如果字符串中最后一个之后没有匹配`/`项，则不进行替换。

*注意*我检查了这个答案、我的另一个答案和@Daedalus 的答案的速度，虽然我通常希望避免断言来加速正则表达式，但在这种情况下，我发现它们的速度都是相同的，并且非常快，在我的电脑上每秒运行几十万次。

# html - 为什么项目不显示内联？

> ID：15372431
> 
> 赞同：4
> 
> 时间：2013-03-12T21:24:01.257
> 
> 标签：html, css

发生了一些奇怪的事情......我`display: inline-block`用来显示内联元素。一切都好，直到添加添加了一些新元素。这是一个例子：

![上帝](../Images/6e24ad7eb8e9a632fce5a523be782100.png) ![坏的](../Images/8184ca1a24ff55a22ac6f1e2e539c8ff.png)

CSS：

```
section#main{
    width: 960px;
    margin: 7% auto 0;
    background: #000;
    opacity: 0.86;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    padding: 5px;
}

div#video{
    border: 1px solid red;
    width: 640px;
    height: 360px;
    margin: 10px;
    display: inline-block; 
}

nav{
    margin: 10px;
    border: 1px solid yellow;
    display: inline-block;
    height: 360px;
    width: 270px;
} 
```

HTML：

```
<section id="main">
        <div id="video"></div>
        <nav>
            <ul>
            <li>Keliaujame ?... JAV: ?ikaga / Chicago S01E03</li>           
            </ul>
        </nav>
        <div id="comments"></div>
    </section> 
```

[http://jsfiddle.net/nonamez/PfeP5/2/](http://jsfiddle.net/nonamez/PfeP5/2/)

有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:29:10.517

这是一个垂直对齐问题，只需将两个元素垂直对齐设置为顶部

```
div#video{
    vertical-align:top;
}

nav{
    vertical-align:top;
} 
```

[http://jsfiddle.net/xHNJm/](http://jsfiddle.net/xHNJm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:30:24.340

`display: inline-block;`从两者中删除

添加`float: left;`到两者

`<div style="clear: both"></div>`在下面添加一个`<div id="comments">`

如这个小提琴所示：http: [//jsfiddle.net/9BsS3/](http://jsfiddle.net/9BsS3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:33:42.463

就个人而言，我总是尽量避免使用 inline-block，只是因为跨浏览器的绳索行为。

我将使用以下 CSS（删除 display:inline-block; 并在其位置使用 float:left（确保父元素也浮动以确保清除子浮动元素）：

```
section#main{
    width: 960px;
    margin: 7% auto 0;
    float:left;
    background: #000;
    opacity: 0.86;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    padding: 5px;
}

div#video{
    border: 1px solid red;
    width: 640px;
    height: 360px;
    margin: 10px;
    float:left;
}

nav{
    margin: 10px;
    border: 1px solid yellow;
    float:left;
    height: 360px;
    width: 270px;
}
nav ul {
    margin:0;
    padding:0;
    list-style:none;
}
nav li {
    color:#fff;
} 
```

# algorithm - 如何估计将中缀表达式转换为后缀表达式所需的堆栈空间

> ID：15372432
> 
> 赞同：1
> 
> 时间：2013-03-12T21:24:00.983
> 
> 标签：algorithm, stack, estimation, shunting-yard

有著名的[调车码算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)可用于将中缀表达式（例如`1 + 2 * 3`）转换为后缀表达式（例如`1 2 2 * +`）。调车场算法需要一个堆栈来存储即将被移动的元素。

是否可以预先估计在线性时间和恒定内存中将特定输入转换为其后缀形式所需的堆栈长度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:41:14.160

当然。[分流场算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)仅将运算符（包括括号）压入堆栈，因此一阶近似值是表达式中运算符的数量。有了更多的智能，您可以扫描表达式并寻找关联性和分组。但是当你完成时，你可能已经编写了一个基于堆栈的算法来确定表达式所需的堆栈大小的最佳估计，并且会使你的执行成本翻倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:52:42.647

在旧的 HP-45 计算器上，我们总是扫描嵌套最深的括号，然后从那里开始计算。这应该是输入中 N 个标记的快速 O(N) 算法。

在实践中，要创建一个能够炸毁 HP-45 的 4 高堆栈的表达式是一项挑战。

# issue-tracking - 扫描仪无法从带有数字的文本文件中读取 (int) 数据 - Java Highscore System (LWJGL)

> ID：15372441
> 
> 赞同：-1
> 
> 时间：2013-03-12T21:24:24.050
> 
> 标签：issue-tracking

找不到问题，正如您在“readFile”方法中看到的那样，我试图查看问题是否是扫描仪读取了一个字符串，但是当我编译程序时它会说文本文件的名称，scores.txt ，而不是内容。已经为此工作了大约3个小时，dayum。

```
package pointSystem;

import java.io.*;
import java.lang.*;
import java.util.*;

import main.Gooftw;

public class HighscoreManager {

    private int currentHighScores[] = new int[5];
    private int newScore = Gooftw.getScore();
    private int temp;

    //private Formatter formatter;
    private Scanner sc;
    private String file = "scores.txt";
    File outfile;
    FileOutputStream fop = null;

    public HighscoreManager () {
        System.out.println("Hello World!");
        try {
            //formatter = new Formatter(file);

            sc = new Scanner(file);

        } catch(Exception e){
            System.out.println("you have an error");
        }

        //Read current highscores to game

    }

    public void readFile(){
        int i = 0;
        String values [] = new String [5];
        while(sc.hasNext()) {
            values[i] = sc.next();
            System.out.println(values[i]);
            /*System.out.println(sc.nextInt());
            currentHighScores[i] = sc.nextInt();
            System.out.println(currentHighScores[i]);*/
            i++;
        }

        this.closeFile();

        /*for(i=0;i<5;i++) {
            System.out.println(currentHighScores[i]);       
        }
        /*while(sc.hasNext()){
            String a = sc.next();
            String b = sc.next();
            String c = sc.next();

            System.out.printf(a,b,c);
        }*/
    }

    public void addRecords(){

        try{
        outfile = new File(file);
        fop = new FileOutputStream(outfile);

        if(!outfile.exists()){
            outfile.createNewFile();
        }
        for(int i = 0; i<5; i++){
            //formatter.format("%s \n", currentHighScores[i] );
            fop.write(currentHighScores[i] );

        }
        //fop.flush();
        fop.close();

        }catch(IOException e){
            e.printStackTrace();
        } finally {
            try{
                if(fop!=null){
                    fop.close();
                }

                }catch (IOException e){
                    e.printStackTrace();
                }
            }
        }

        //formatter.close();

    public void compareScores(){

        if(newScore > currentHighScores[0]){
            temp = currentHighScores[0];
            currentHighScores[0] = newScore;
        }
        for(int y = 1 ; y<5 ; y++){
            if(temp < currentHighScores[y]){

                temp = temp + currentHighScores[y];
                currentHighScores[y] = temp - currentHighScores[y];
                temp = temp - currentHighScores[y];
            }
        }

    }

    public void closeFile(){
        sc.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:07:54.777

您得到的是文件名而不是文件名，因为您传递了作为文件名的字符串。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#Scanner(java.lang.String)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#Scanner(java.lang.String))

*public Sc​​anner(String source) 构造一个新的 Scanner，它产生从指定字符串扫描的值。参数： source - 要扫描的字符串*

你想要这个构造函数：

*public Sc​​anner(InputStream source, String charsetName) 构造一个新的 Scanner，生成从指定输入流扫描的值。流中的字节使用指定的字符集转换为字符。*

使用此构造函数创建文件输入流：

*public FileInputStream(String name) throws FileNotFoundException 通过打开与实际文件的连接来创建 FileInputStream，该文件由文件系统中的路径名 name 命名。*

并将其传递给扫描仪。

我们今天学到了什么？如果您没有阅读过它的文档，请不要假设方法或构造函数会做什么。遵循这个简单的规则将为您节省大量时间。

# php - 使用php替换pdf

> ID：15372446
> 
> 赞同：1
> 
> 时间：2013-03-12T21:24:43.667
> 
> 标签：php, ftp

我有以下问题：我需要在我的服务器上的某个目录中有 2 个 pdf 文件。这些 Pdf 文件需要不断（或通过用户交互）与来自我无法控制的外部网站的原始文件同步。到目前为止，我已经尝试在 php 中使用 ftp_connect 函数，但 godaddy 似乎阻止了它。还有其他方法可以实现我想要实现的目标吗？

问候

会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:38:43.353

像这样的东西怎么样：

```
$inFile = fopen("ftp://ftp.ams.org/pub/tex/doc/amsmath/short-math-guide.pdf", "r");
$outFile = fopen('/tmp/short-math-guide.pdf', 'w');

if (!$inFile) {
    echo "Unable to open remote file.\n";
    exit;
}

while (!feof($inFile)) {
    fputs($outFile, fgets($inFile, 1024), 1024);
}

fclose($inFile);
fclose($outFile); 
```

这也适用于 http:// URL。唯一的要求是在您的 php.ini 中启用了[allow_url_fopen 。](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)它可能是。

要创建一个 cron 作业，您必须编辑您的 crontab`crontab -e`并添加如下内容以每 10 分钟运行一次：

```
*/10 * * * * /usr/bin/php /path/to/yourphpscript.php 
```

要了解有关 cron 作业的更多信息，请查看[此](https://help.ubuntu.com/community/CronHowto)内容。这是谷歌最早的热门歌曲之一。

# c# - 使用实体框架 T4 生成的扩展的奇怪的模棱两可的调用错误

> ID：15372447
> 
> 赞同：0
> 
> 时间：2013-03-12T21:24:45.670
> 
> 标签：c#, .net, linq, entity-framework, ef-code-first

想知道是否有人可以阐明为什么我会收到此错误。

我目前正在编写一些代码来与实体对象交互（使用 T4 模板来生成 DB 上下文），虽然该`IQueryable<T> Include<T>`方法只在此特定 DB 上下文的命名空间中定义了一次（现在，我们将调用它`Context A`），每当我尝试在 LINQ 查询中使用 include 扩展方法时，都会收到“不明确的调用”错误[，如下所示](http://www.screencast.com/t/7KGkqmVbfEO)。

在包含上`RemoveDataFromTestRun()`图链接的方法的类中，我还在`Context B`代码和`using Path.To.ContextB.Namespace;`声明中引用了另一个 DB Context ()。 `Context B`位于同一个解决方案外壳内的完全不同的命名空间和项目中`Context A`。

奇怪的部分是如果我`Context B`在这个类中完全删除我的引用，我不再被大喊大叫，因为编译器/重新清晰认为我正在调用一个它声称定义不明确的方法。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:28:41.843

尝试使用 Visual Studio 的定义工具（我假设这就是您使用的工具）；如果这确实是名称冲突，那么您将有两种选择作为首选目标。如果你有的话，Resharper 对导航也有很大帮助。如果您似乎无法获得两个不同的目标，则程序集可能已加载两次（可能是稍旧的版本，或其他一些奇怪的东西）......除此之外，我恐怕没有任何其他想法。

# wpf - 如何将 TabControl 标头中的关闭按钮绑定到窗口 ViewModel 中的命令？

> ID：15372456
> 
> 赞同：1
> 
> 时间：2013-03-12T21:25:37.603
> 
> 标签：wpf

我正在开发一个工具，并希望在 TabControl 中的选项卡中添加一个关闭按钮。我不知道如何使按钮的 Command 属性绑定到我窗口的 ViewModel 上的适当属性。

虚拟机很简单。只是 INPC 实现和一个名为 CloseSelectedFileCommand 的 ICommand 属性。

TabControl 的 XAML 省略了其他部分，没有什么漂亮的，因为漂亮是在“它有效”之后：

```
<TabControl ItemsSource="{Binding Results}" 
            SelectedItem="{Binding SelectedFile}">
    <TabControl.ItemTemplate>
        <!-- Type is ResultInfo -->
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding FileName}" />
                <Button Grid.Column="1" Command="{Binding Path=CloseSelectedFileCommand}">X</Button>
            </Grid>
        </DataTemplate>
    </TabControl.ItemTemplate>
    <TabControl.ContentTemplate>
        <DataTemplate>
          ...
        </DataTemplate>
    </TabControl.ContentTemplate>
</TabControl> 
```

我明白发生了什么。从按钮的角度来看，当前项目是我收藏的项目之一。他们没有 DataContext，如果他们这样做了，肯定不会是我的 Window 的 ViewModel。我不知道如何使这项工作。我想也许寻找 Window 祖先的 RelativeSource 会有所帮助，但它没有。

我看过一些谷歌搜索。他们似乎建议我的数据项本身应该是一个 ViewModel 并且上面有这个命令。这......有点奇怪，因为项目集合属于窗口。类似的 StackOverflow 帖子似乎建议自己制作绑定项目 ViewModel 并给它们一个命令，该命令引发一个由窗口处理的事件。我不明白“按钮在单击时引发事件”之上的额外间接层对我有什么作用。我想这是唯一的方法？我想不出一种将 Window 的 DataContext 传送到这个 XAML 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:31:54.883

也许这对你有用，一直在这些方面......
绑定按钮的数据上下文（或你可能需要的任何其他地方）......

```
DataContext="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext}" 
```

这为您提供了一个“上方”某处的窗口。

或者，如果您有特定的`Name`，您可以使用`ElementName`类似于`RelativeSource`.

希望这可以帮助

# php - 修改此 JS Focus 函数以使用动态设置 Select 选项的 PHP 函数

> ID：15372457
> 
> 赞同：2
> 
> 时间：2013-03-12T21:25:43.550
> 
> 标签：php, javascript, focus

这个`focus`函数允许我在 Javascript 中操作 Select 元素选项的值，我需要创建一个类似的函数来与下面的 PHP 函数一起使用。

在*表格 1*中，我为 300 多个 Select 元素预先选择了最常用的选项，并且该函数（JS 和 jQuery 的组合）允许我区分这些值何时仍处于其初始预选/默认状态与何时处于初始状态。当用户通过单击表单元素主动选择该值时（表明他们做出了将其设置为该值的主动决定）。我在这里发布了一个带有此工作示例的小提琴：http: [//jsfiddle.net/chayacooper/JHAPp/4/](http://jsfiddle.net/chayacooper/JHAPp/4/)

我无法在 PHP 中创建一个类似的函数以在客户帐户页面上使用（它允许用户编辑他们的信息）。下面的代码允许我正确地预先选择与数据库中的信息匹配的值，但我不知道如何修改代码，以便在用户没有关注元素时提交默认值。与第一种形式不同，我无法手动更改 $options 数组中的实际值，因为他们可能已经为该字段选择了一个值。（目前我只是删除“_default”以使其正常工作）。

我猜我可能需要类似于原始函数的东西，但使用获取的值而不是 $options 数组值，这样如果元素没有被聚焦，我可以发布那个。

**表格 1 - HTML & JS 函数**

```
<select name="jeans">
    <option value="$0">$0</option>
    <option value="$50_default" selected="selected">$50</option>
    <option value="$100">$100</option>
    <option value="$150">$150</option>
</select>

$('select').focus(function () {
    var option = $(this).find("option[value*=default]");
    option.attr('value', option.attr('value').replace(/_default/g, ''));
}); 
```

**表格 2 - HTML & PHP**

```
<?php
    try {  
        $stmt = $conn->prepare("SELECT * FROM price WHERE user_id = :user_id");  
        $stmt->bindValue(':user_id', $user_id); 
        $stmt->execute();
    }  catch(PDOException $e) {echo $e->getMessage();}
    $row = $stmt->fetch();
    $search_default = array('_default');
    $replace_default = array('');
    $row_default = str_replace($search_default, $replace_default, $row);
    // Pre-selects the option matching the db information
    function printSelectOptions($dataArray, $currentSelection) {
        foreach ($dataArray as $key => $value) {
            echo '<option ' . (($key == $currentSelection) ? 'selected="selected"' : '') . ' value="' . $key . '">' . $value . '</option>';
        }
    }
?>
<select name="jeans">
<?php
    // Generates a `Select` element 
    $options = array("Null"=>"", "$0"=>"$0", "$50"=>"$50", "$100"=>"$100", "$150"=>"$150");
    $selected = $row_default['jeans'];
    // Pre-selects the option matching the db information
    echo printSelectOptions($options, $selected); 
?> 
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:08:02.733

这是答案，感谢@JohnS :-)

```
// This is a helper function that replaces a key while maintaining the entry's
// position in the array. It does not modify the given array, but returns a
// new array.
function replaceKey($array, $oldKey, $newKey) {
    $newArray = array();
    foreach ($array as $key => $value) {
        $newArray[($key === $oldKey) ? $newKey : $key] = $value;
    }
    return $newArray;
}

$options = array("Null"=>"", "$0"=>"$0", "$50"=>"$50", "$100"=>"$100", "$150"=>"$150");

// We will change the key for the entry in $options so it includes "_default" if
// the value from the database includes "_default". We need to do this only if
// $row['jeans'] ends with "_default". That will be the case if these two are
// different.
if ($row_default['jeans'] !== $row['jeans']) {
    $options = replaceKey($options, $row_default['jeans'], $row['jeans']);
}

// Now we can use the value from the db for setting the selected value, rather
// than the value that had "_default" removed. 
$selected = $row['jeans'];

// Pre-selects the option matching the db information.
echo printSelectOptions($options, $selected); 
```

我了解到这不适用于我用于样式`<select>`元素的两个 jQuery 插件*（[jQuery UI MultiSelect Widget](http://erichynds.com/jquery/jquery-ui-multiselect-widget)和[Dropkick](http://jamielottering.github.com/DropKick)）*，因为这两个插件都不支持`focus`事件或标准`click`事件。

我修改了 JS 函数以使用[MultiSelect Widget](http://erichynds.com/jquery/jquery-ui-multiselect-widget)的自定义`open`事件，并在这里发布了一个新函数的小提琴[http://jsfiddle.net/chayacooper/dFyMq/](http://jsfiddle.net/chayacooper/dFyMq/)

```
$(select).multiselect({ 
    open: function (event, ui) {
        var option = $(this).find("option[value*=default]");
        option.attr('value', option.attr('value').replace(/_default/g, ''));
        $(select).multiselect("refresh")
    }
}); 
```

将它与[Dropkick](http://jamielottering.github.com/DropKick)一起使用要复杂得多，我已经发布了我在这里使用的方法的小提琴：http: [//jsfiddle.net/john_s/yhAX5/4/](http://jsfiddle.net/john_s/yhAX5/4/)。此解决方法需要创建 2 组`<select>`元素 - 一组使用标准元素并且是隐藏的*( `display:none`)*，另一组使用 Dropkick 并且对用户可见。它也使用该`change()`方法，因此如果用户单击下拉框然后有意识地决定保留“默认”值，则不会修改该值。

# python - Python有条件地创建字典的元素

> ID：15372459
> 
> 赞同：1
> 
> 时间：2013-03-12T21:25:55.700
> 
> 标签：python

请问有人可以帮我吗？我正在尝试使用简短版本的检查 b 是否不存在，然后分配 '' 或无，但我遗漏了一些东西

```
>test = dict(s = b if b else '')
>NameError: name 'b' is not defined 
```

编辑：我知道 b 没有定义，相反我想找到一种方法来创建一个带有值的字典（如果存在）或 '' 如果不存在，我想在短时间内做到这一点..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:30:23.257

你应该使用**字典理解**

```
d = {key: value for (key, value) in sequence if condition} 
```

BlackVegetable 的评论也是正确的，你还没有定义`b`，所以 python 不能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:26:52.917

您尚未定义任何名为`b`. 不过，这看起来可能是 XY 问题。你到底想做什么？插入字典？只用一个元素创建一个新的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:32:14.167

有人早些时候发布了这个，然后删除了它，但我测试了它并且它有效：

```
dict(s=b) if b else dict(s='')` 
```

如果`b`是`None`，则上述行将起作用。这就是我从问题中了解到的，您想检查 b 是否存在。然后，如果是这样，您希望将密钥设置为这样，否则设置为''。

# hadoop - hadoop中如何让每个mapper类读取同一个文件

> ID：15372460
> 
> 赞同：2
> 
> 时间：2013-03-12T21:25:56.533
> 
> 标签：hadoop, mapper

在我的 hadoop 工作中，除了我的输入数据文件之外，我希望每个映射器类（map 方法）读取我放入 hdfs 的公共文件。该文件将被读入每个映射器，并将内容保存在每个映射器中。那么该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:57:51.973

根据您的需求，有不同的方法：

*   在每个映射器中直接[从 HDFS](https://sites.google.com/site/hadoopandhive/home/hadoop-how-to-read-a-file-from-hdfs)读取文件。仅当公共文件非常小时才建议这样做。
*   在执行所谓的 map-side-join 时，使用[CompositeInputFormat在每个映射器中一次读取多个文件。](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/join/CompositeInputFormat.html)这两个文件将以相同的方式进行拆分和分区。
*   在作业设置期间将文件添加到[DistributedCache 。](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/filecache/DistributedCache.html)该文件将存储在所有映射器都可以访问的每个节点上。

# java - 有关 checkstyle SUN 约定的派生异常的最简单的 javadoc 文档？

> ID：15372461
> 
> 赞同：2
> 
> 时间：2013-03-12T21:26:00.990
> 
> 标签：java, eclipse, javadoc, checkstyle

我创建了很多异常类，扩展了“异常”并创建了与超类“异常”的构造函数匹配的所有构造函数。Eclipse 生成这个：

```
/**
 * 
 */
package pone.interfaces;

/**
 * @author wnck
 *
 */
public class FancyException extends Exception {

/**
 * 
 */
public FancyException() {
    // TODO Auto-generated constructor stub
}

/**
 * @param message
 */
public FancyException(String message) {
    super(message);
    // TODO Auto-generated constructor stub
}

/**
 * @param cause
 */
public FancyException(Throwable cause) {
    super(cause);
    // TODO Auto-generated constructor stub
}

/**
 * @param message
 * @param cause
 */
public FancyException(String message, Throwable cause) {
    super(message, cause);
    // TODO Auto-generated constructor stub
}

/**
 * @param message
 * @param cause
 * @param enableSuppression
 * @param writableStackTrace
 */
public FancyException(String message, Throwable cause,
        boolean enableSuppression, boolean writableStackTrace) {
    super(message, cause, enableSuppression, writableStackTrace);
    // TODO Auto-generated constructor stub
}
} 
```

我不想记录所有参数标签，因为构造函数只是在语义上匹配基类的构造函数。

如何使用 javadoc 并匹配 SUN checkstyle 规则以快速、干净和简单的方式记录这一事实？

问候 wnck

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:19:38.197

好吧，恐怕使用 Javadoc 并匹配 Sun Checkstyle 规则可能是不可能的。

这是因为[`@inheritDoc`](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#inheritDoc)Javadoc 标记不能可靠地与构造函数一起使用（它们不可继承）。此外，Checkstyle 无法识别`@inheritDoc`构造函数。相反，最好的办法是使用 Checkstyle 配置从*JavadocMethod要求中排除异常类的构造函数。*

后者可以通过将*[JavadocMethod](http://checkstyle.sourceforge.net/config_javadoc.html#JavadocMethod)*检查的`tokens`属性设置为 just并省略来实现。[对于异常类，完全禁止](http://checkstyle.sourceforge.net/config.html#SuppressionFilter)*JavadocMethod*检查也可能有意义，因为异常可能不包含任何真正需要解释的方法。`METHOD_DEF``CTOR_DEF`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:15:04.960

我想你正在寻找这样的东西：

```
/**
 * {@inheritDoc}
 */ 
```

您可以在这里阅读：http: [//docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html#@inheritDoc](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html#@inheritDoc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:36:41.800

我的建议是：不要，并考虑在 checkstyle 中至少为那些构造函数禁用该规则。每个人都知道他们在做什么，或者可以很容易地查到这一点。努力提供真正有用的文档。*

# php - 用十六进制替换正则表达式到 rgba() 转换

> ID：15372463
> 
> 赞同：4
> 
> 时间：2013-03-12T21:26:02.853
> 
> 标签：php, regex

下面的函数接受输入文件流并将 $color 值替换为数据库中存储的值（color1=ffffff、color2=aaaaaa、color3=cccccc 等）

目前它只对 6 位十六进制值进行直接查找/替换。是否可以将正则表达式添加到 my_colorReplace 函数中，以便根据输入流模式返回 6 位十六进制或 9 位 rgb？

```
function my_colorReplace($buffer) {

 /* NEED REGEX HERE TO DETERMINE WHETHER TO CALL CONVERTHEXTORGB() */

    $buffer = str_replace(array('$color1'), '#'.get_option("my_theme_header_color").'', $buffer);
    $buffer = str_replace(array('$color2'), '#'.get_option("my_theme_sidebar_color").'', $buffer);
    $buffer = str_replace(array('$color3'), '#'.get_option("my_theme_spot_color_alt").'', $buffer);
    $buffer = str_replace(array('$color4'), '#'.get_option("my_theme_spot_color_alt2").'', $buffer);
return $buffer;
} 
```

将十六进制值转换为 rgb 的实用函数

```
function convertHexToRGB($hexColor){
    if( preg_match( '/^#?([a-h0-9]{2})([a-h0-9]{2})([a-h0-9]{2})$/i', $hexColor, $matches ) )
    {
    return array('red' => hexdec( $matches[1] ),'green' => hexdec( $matches[2] ),'blue' => hexdec( $matches[3] ));
    }
    else
    {
        return array( 120, 120, 120 );
    }
} 
```

输入流（$buffer）：

```
.sidebar{
    background:$color1;
    color:$color2;
    }

.header{
    background: 
        linear-gradient(to bottom, rgba($color1,.5) 0%, 
        rgba(255,255,255,0.96) 100px, 
        rgba(255,255,255,0.95) 150px); /* W3C */

    color:rgb($color3); 
} 
```

$buffer return 的预期输出（其中 color1=ffffff，color2=aaaaaa，color3=cccccc

```
.sidebar{
    background:#fffff;
    color:#aaaaaa;
    }

.header{
    background: 
        linear-gradient(to bottom, rgba(255,255,255,.5) 0%, 
        rgba(255,255,255,0.96) 100px, 
        rgba(255,255,255,0.95) 150px); /* W3C */

    color:rgb(204,204,204); 
} 
```

# jquery - 使用 jQuery-One-Page-Nav 引导固定标题

> ID：15372467
> 
> 赞同：1
> 
> 时间：2013-03-12T21:26:13.577
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用推特引导程序。

我已将此添加到我的页面中，以使导航栏与滚动一起使用。 `<div class="nav-collapse collapse **navbar-fixed-top**">`

但我似乎无法用 css 再次将其放置到位。您可以通过删除来查看我想要的位置`position:fixed`。

第二个问题是，当滚动页面时，链接应该是活跃的，我在哪个部分。这不知何故不再起作用。

我正在使用 jQuery One Page Nav 插件和 Twitter Bootstrap。

[链接到直播网站](http://posterlikes.com/page)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:04:44.567

默认情况下，Bootstrap 会移除平板电脑和手机的固定位置。如果您想覆盖它，请尝试：

**编辑**

```
@media (max-width: 979px){

    .navbar-fixed-top, .navbar-fixed-bottom {
    position: fixed;
    }  

} 
```

对于您的菜单链接，目前您有：

```
<a href="#section-2">Cv</a> 
```

链接到

```
 <div class="full-2">
 <div class="container-narrow">
 <div class="section" id="section-2">
 <section>
 .... 
```

尝试将其更改为：

如果这不起作用，请将部分 div 移动如下：

```
 <section id="section-2">
 <div class="full-2">
 <div class="container-narrow">

 .... 
```

**更新**

@media css 中的语法不太正确（我之前的错误），你想要的是：

```
/*By default, Bootstrap removes the fixed position for tablets and phones*/
@media (max-width: 979px){

.navbar-fixed-top, .navbar-fixed-bottom {
position: fixed;
    }
} 
```

然后在您的 html 中，您需要向导航栏添加一个额外的类，以指定您想要附加它：

```
<div id="top-nav" class="navbar navbar-fixed-top"> 
```

完成后，一切正常，您只需要使用下拉导航链接的样式即可。

现场观看：http: [//jsfiddle.net/panchroma/KbMvX/](http://jsfiddle.net/panchroma/KbMvX/) 和[http://fiddle.jshell.net/panchroma/KbMvX/show/](http://fiddle.jshell.net/panchroma/KbMvX/show/)

# exception - 使用线程池时出现 Hadoop“文件系统关闭”异常

> ID：15372468
> 
> 赞同：1
> 
> 时间：2013-03-12T21:26:14.543
> 
> 标签：exception, hadoop, filesystems, mapreduce, threadpool

我对 hadoop 相当陌生，我在 5 节点集群上运行多个 mapReduce 作业。运行多个线程时，我已经开始出现“文件系统关闭”异常。一次运行一个作业时工作正常。错误出现在映射之后，就在减少之前。它看起来像这样：

```
java.lang.Exception: java.io.IOException: Filesystem closed
at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:399)
Caused by: java.io.IOException: Filesystem closed
at org.apache.hadoop.hdfs.DFSClient.checkOpen(DFSClient.java:552)
at org.apache.hadoop.hdfs.DFSInputStream.readWithStrategy(DFSInputStream.java:648)
at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:706)
at java.io.DataInputStream.read(Unknown Source)
at org.apache.hadoop.util.LineReader.readDefaultLine(LineReader.java:209)
at org.apache.hadoop.util.LineReader.readLine(LineReader.java:173)
at org.apache.hadoop.mapreduce.lib.input.LineRecordReader.nextKeyValue(LineRecordReader.java:167)
at org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:526)
at org.apache.hadoop.mapreduce.task.MapContextImpl.nextKeyValue(MapContextImpl.java:80)
at org.apache.hadoop.mapreduce.lib.map.WrappedMapper$Context.nextKeyValue(WrappedMapper.java:91)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:143)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:756)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:338)
at org.apache.hadoop.mapred.LocalJobRunner$Job$MapTaskRunnable.run(LocalJobRunner.java:231)
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

这不会一直发生，如果我重新执行失败的作业，它会运行良好。不幸的是，这会占用太多时间。我假设这与访问同一个输入文件的多个任务有关，当一个任务完成时，它会关闭所有任务的输入文件。如果这是我想知道的问题是如何覆盖它。我尝试在映射器中覆盖清理以重新打开路径，但这似乎很愚蠢并且不起作用。

```
@Override 
public void cleanup(Context context){
        Job tempJob;
        try {
            tempJob = new Job();
            Path fs = ((FileSplit) context.getInputSplit()).getPath();
            FileInputFormat.addInputPath(tempJob, fs);
            System.out.println("Finished map task for " + context.getJobName());
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

我还想知道这是否是使用线程池执行 hadoop mapReduce 作业的基本问题。感谢您的任何想法。

编辑：当我提到工作和任务时，我可能有点不清楚。我实际上正在使用他们自己的映射器和减速器运行多个作业。这些作业中的每一个都会为我正在创建的特定表生成一列。说一个总和或一个计数。每个作业都有自己的线程，它们都在访问同一个输入文件。我遇到的问题是，当一些工作完成时，他们会抛出“文件系统关闭异常”。如果这可能会有所作为，我也在使用 Yarn。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:51:58.220

作为一般规则，除非您有一个 CPU 密集型工作，否则我不建议在同一任务中使用多个线程，这会增加 JVM 出现问题的可能性，并且重新运行任务的成本会高得多。您可能应该考虑增加映射任务的数量，当然每个任务都将在单独的 JVM 中运行，但这样会更干净。

如果您**真的**想采用多线程方式，那么我怀疑您使用了错误类型的映射器，对于多线程应用程序，您应该使用 a`MultithreadedMapper`具有不同的`run`方法实现并且应该是线程安全的。你可以像这样使用它：

```
job.setMapperClass(MultithreadedMapper.class); 
```

您可以像这样指定线程数：

```
int numThreads = 42;
MultithreadedMapper.setNumberOfThreads(numThreads); 
```

# excel - 在excel中将一行拆分为2行

> ID：15372470
> 
> 赞同：0
> 
> 时间：2013-03-12T21:26:28.467
> 
> 标签：excel, vba

我需要根据行中一个标志的值将单行拆分为 2 行。结构如下：-

```
Exp_id  Flag_1 guar_percent
aaaa    Y   20
bbbb    N   0
cccc    Y   100
dddd    Y   90 
```

在上述所有行中，所有 Flag_1 为 'Y' 且 guar_percent >0、<100 的行都将被拆分为以下行：-（我可以在拆分发生后填充 guar_percent 列）

```
Exp_id  Flag_1 guar_percent
aaaa_G  Y   100
aaaa_NG Y   0
dddd_G  Y   100
dddd_NG Y   0 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:59:27.560

这就是我所做的，并且奏效了。欢迎任何优化它的建议。谢谢大家。

```
Sub SplitRec()
    Dim getRow As Long
    Dim LR As Long
    Dim RowCount As Integer

    For getRow = 1 To Worksheets("Sheet1").UsedRange.Rows.Count Step 1

         If (Worksheets("Sheet1").Cells(getRow, 111).Value) > 0 And (Worksheets("Sheet1").Cells(getRow, 111).Value) < 1 Then

            Worksheets("Sheet1").Rows(getRow).Copy Worksheets("Sheet2").Rows(Worksheets("Sheet2").Cells(Worksheets("Sheet2").Rows.Count, 2).End(xlUp).Row + 1)
            Worksheets("Sheet2").Range("A" & Rows.Count).End(xlUp).Value = Worksheets("Sheet1").Range("A" & getRow).Value + "_G"

            Worksheets("Sheet1").Rows(getRow).Copy Worksheets("Sheet2").Rows(Worksheets("Sheet2").Cells(Worksheets("Sheet2").Rows.Count, 2).End(xlUp).Row + 1)
            Worksheets("Sheet2").Range("A" & Rows.Count).End(xlUp).Value = Worksheets("Sheet1").Range("A" & getRow).Value + "_NG"

        Else
            RowCount = RowCount + 1

            Worksheets("Sheet1").Rows(getRow).Copy Worksheets("Sheet2").Rows(Worksheets("Sheet2").Cells(Worksheets("Sheet2").Rows.Count, 2).End(xlUp).Row + 1)
            Worksheets("Sheet2").Range("A" & Rows.Count).End(xlUp).Value = Worksheets("Sheet1").Range("A" & getRow).Value

        End If
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:30:32.517

如果您将输入范围设置为一个数组并处理它应该是一个相对轻松的练习。以下代码已被彻底注释，但如果没有意义，请告诉我。

```
Option Explicit

Sub SortData()
    Dim vInData As Variant, vOutData As Variant
    Dim ii As Long, lCounter As Long
    Dim wkOut As Worksheet

    'Read in your data, you could set this as a function and pass it any range
    vInData = ActiveSheet.Range("A1:C8").Value2

    'Double up the output array just in case every record is valid, we can redim after processing
    'Also not we've transposed the array because you can only redim preserve the second bound
    ReDim vOutData(LBound(vInData, 2) To UBound(vInData, 2), LBound(vInData, 1) To 2 * UBound(vInData, 1))

    'Loop through the input
    For ii = LBound(vInData, 1) To UBound(vInData, 1)
        'Check for the yes flag first
        If vInData(ii, 2) = "Y" Then
            'Then check the percentage bounds
            If vInData(ii, 3) > 0 And vInData(ii, 3) < 100 Then
                'Increase the counter by two since we're adding two lines.
                lCounter = lCounter + 2
                vOutData(1, lCounter - 1) = vInData(ii, 1) & "_G"
                vOutData(2, lCounter - 1) = "Y"
                vOutData(3, lCounter - 1) = 100
                vOutData(1, lCounter) = vInData(ii, 1) & "_NG"
                vOutData(2, lCounter) = "Y"
                vOutData(3, lCounter) = 0
            End If
        End If
    Next ii

    'Now we have all the outputs redim the array to remove empty elements
    ReDim Preserve vOutData(LBound(vOutData, 1) To UBound(vOutData, 1), LBound(vOutData, 2) To lCounter)

    'I've just dumped the output onto a fresh sheet, you can set the output array to any range on any worksheet you like
    Set wkOut = ThisWorkbook.Worksheets.Add
    With wkOut
        .Name = "Output"
        .Range(.Cells(1, 1), .Cells(UBound(vOutData, 2), UBound(vOutData, 1))).Value2 = Application.WorksheetFunction.Transpose(vOutData)
    End With
End Sub 
```

# objective-c - 将预加载的 .sqlite 数据库添加到 XCode 项目

> ID：15372472
> 
> 赞同：1
> 
> 时间：2013-03-12T21:26:35.787
> 
> 标签：objective-c, xcode, sqlite, core-data

抱歉，这可能是个愚蠢的问题，但我正在尝试了解 Core Data 的工作原理。我几乎没有用于测试的 .sqlite 数据库，仅预装了字符串。我有一个为初学者学习核心数据的示例项目，它可以很好地与它的内部 .sqlite 数据库配合使用，并且数据库在结构上与我的相同。我想用我的数据库替换它进行测试，但我真的无法在 Xcode Navigator 窗口中找到现有的数据库文件以及它如何链接到项目的 .xcdatamodeld 。我是否理解正确，我需要将我的数据库添加到项目中，然后以某种方式将其链接到 .xcdatamodeld，如果没有，它存储在项目中的什么位置以及如何切换到使用我的数据库而不是示例数据库？

非常感谢任何提前！

# php - 如何在 Laravel 中急切加载，同时查找特定条目

> ID：15372473
> 
> 赞同：3
> 
> 时间：2013-03-12T21:26:37.960
> 
> 标签：php, laravel, eloquent, laravel-3

我想用他们的用户配置文件急切地加载一个特定的用户。我的表和类分别称为用户和用户。我的 Profiles 表和类是 user_profiles 和 UserProfile。

这是我正在尝试的，但它似乎不起作用

```
return User::with('user_profiles')->find(1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:33:52.167

您还需要在您的类中定义一个[关系方法。](http://laravel.com/docs/database/eloquent#eager)`User`就像是：

```
public function profile()
{
   return $this->belongs_to('UserProfile');
} 
```

然后引用关系方法的名称：

```
User::with('profile')->get() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T08:19:02.427

我发现以下代码对于从一个模型实例中检索所有属性很有用。

```
User::with('posts')->get()->find(1); 
```

返回这样的数组

```
id: 1,
name: 'john',
posts: [
  {
    id: 1,
    title: 'something',
  }
] 
```

添加：

这会很慢，因为`->get()`从数据库中检索所有数据。

所以

`User::with('posts')->find(1)`

# ruby - `Module#autoload` 和 `Module#autoload?` 如何在 ruby 中工作？

> ID：15372476
> 
> 赞同：0
> 
> 时间：2013-03-12T21:26:59.893
> 
> 标签：ruby

仅通过阅读以下内容无法理解如何工作`Module#autolad`和工作：`Module#autoload?`

> ***Module#autoload：***在 mod 的命名空间中第一次访问模块（可能是字符串或符号）时注册要加载的文件名（使用 Kernel::require）。
> 
> ***模块#自动加载？***- 如果名称在 mod 的命名空间中注册为自动加载，则返回要加载的文件名。c**有人通过一些小代码示例帮助我理解这个概念吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:43:10.760

例子：

```
$ echo 'class AutoloadDemo; end' > autoload_demo.rb
$ ruby -e "
> p autoload? :AutoloadDemo
> p defined?(AutoloadDemo)
> autoload :AutoloadDemo, './autoload_demo'
> p autoload? :AutoloadDemo
> p defined?(AutoloadDemo)
> p AutoloadDemo
> "
nil
nil
"./autoload_demo"
"constant"
AutoloadDemo 
```

解释：`autoload`为一个常量注册一个“延迟加载”（即方法的参数符号`autoload`）；当在脚本中遇到该符号（在示例中`AutoloadDemo`）表示的常数时，Ruby 需要与该常量（的第二个参数`autoload`）关联的文件。`autoload?`只不过是对“这个常量是否为自动加载而注册？”这个问题的答案。

* * *

### 不断注册

在 Ruby 中，常量是在程序执行期间应该相同的值；它必须以大写字符开头。

*持续注册*是 Ruby 解释器在您调用时所做的：`autoload`它说

> 好的，当我在下一次执行中遇到这个常量时，如果它没有定义，而不是引发 NameError 我需要这个文件并查看它是否定义了常量；如果是这样，我继续执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:37:23.537

基本上，自动加载是第一次使用常量时加载 ruby​​ 文件的一种方式。这对于第一次使用常量时的“延迟加载”或“及时加载”很有用。有关详细信息，请参阅[http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html](http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html)。

# java - 为什么我的 java 应用程序不能在另一台计算机上运行？

> ID：15372478
> 
> 赞同：2
> 
> 时间：2013-03-12T21:27:06.493
> 
> 标签：java

我在 Netbeans 上编写了一个游戏（使用 java），完成后我点击了“清理并构建”（这使它成为一个编译的 java 应用程序）。我首先在我的计算机上对其进行了测试，它运行良好，但是当我尝试在其他计算机上运行它时，它说它找不到具有 main 方法的类文件。有谁知道为什么会发生这种情况以及我该如何解决？请有人帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:53:44.860

转到 Netbeans，右键单击您的项目，然后单击配置。单击“更多选项”，中间有一行显示“主类”更改，然后重试您的清理和构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:38:09.230

在运行应用程序时，在命令行上使用 main 方法指定类：

```
java -cp jarfile.jar org.comp.MainClass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:59:14.800

运行干净构建时，请检查构建过程的输出日志。它应该说明如下内容：

> 要在没有 Ant 的情况下从命令行运行此应用程序，请尝试：
> 
> java -jar Example.jar

使用该指定的命令，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T22:01:25.763

他们有相同的 Java 版本吗？

有lib文件夹吗？如果是这样也需要

你能把罐子贴出来吗？

# c# - 在另一个对象集合中对对象集合进行排序

> ID：15372481
> 
> 赞同：3
> 
> 时间：2013-03-12T21:27:12.320
> 
> 标签：c#, sorting, collections

首先我有2节课

```
class Student
{
    int StudentID
    string Name
    Fee fee
}
class Fees
{
    int FeeID
    string FeeName
    DateTime FeeDueDate
} 
```

假设有 10 个学生对象 Student[] stud = new Student[10]

如果 stud[0] 有 4 笔费用（ Fee[4] ），他们是

```
FeeID=1, FeeName="Books", FeeDueDate="2014/06/25"
FeeID=2, FeeName="Tuition", FeeDueDate="2013/03/21"
FeeID=3, FeeName="Sports Equipment", FeeDueDate="2013/03/18"
FeeID=4, FeeName="School Dorm", FeeDueDate="2013/07/26" 
```

而 stud[1] 有 2 项费用（ Fee[2] ），它们是

```
FeeID=2, FeeName="Books", FeeDueDate="2014/06/20"
FeeID=4, FeeName="School Dorm", FeeDueDate="2013/03/26" 
```

和螺柱 [2] 有......

我需要对第二个集合进行排序，即按 FeeDueDate 递增的费用，同时保持学生的相同顺序

所以排序后会是

```
stud[0] =>

FeeID=3, FeeName="Sports Equipment", FeeDueDate="2013/03/18"
FeeID=2, FeeName="Tuition", FeeDueDate="2013/03/21"
FeeID=4, FeeName="School Dorm", FeeDueDate="2013/07/26"
FeeID=1, FeeName="Books", FeeDueDate="2014/06/25"

stud[1] =>

FeeID=4, FeeName="School Dorm", FeeDueDate="2013/03/26"
FeeID=2, FeeName="Books", FeeDueDate="2014/06/20" 
```

如何才能做到这一点？谢谢

此图像还显示了我的对象集合 [http://oi50.tinypic.com/wuq9o3.jpg](http://oi50.tinypic.com/wuq9o3.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:39:08.237

假设您的课程如下所示：

```
 public class Student
    {
        public int StudentID { get; set;}
        public string Name { get; set;}
        public List<Fee> Fees {get;set;}
    }

    public class Fee
    {
        public int FeeID { get; set;}
        public string FeeName { get; set;}
        public DateTime FeeDueDate { get; set; }
    } 
```

你可以这样做：

```
 Student[] studs = new Student[10]

        //somehow fill the array

        foreach (var student in studs)
        {
            student.Fees = student.Fees.OrderBy(c => c.FeeDueDate).ToList()
        } 
```

**编辑** 要确保`Fees`列表不为空，您可以像这样初始化它：

```
 public class Student
   {
       public Student()
       {
         Fees = new List<Fees>();
       }

        public int StudentID { get; set;}
        public string Name { get; set;}
        public List<Fee> Fees {get;set;}
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:53:39.643

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var students = new[] {
                new Student()   
                    { StudentID = 0, Name = "Mark", fees =
                        new List<Fee>() {
                            new Fee() { FeeID=1, FeeName="Books", FeeDueDate=new DateTime(2014,06,25) },
                            new Fee() { FeeID=2, FeeName="Tuition", FeeDueDate=new DateTime(2013,03,21) },
                            new Fee() { FeeID=3, FeeName="Sports Equipment", FeeDueDate=new DateTime(2013,03,18) },
                            new Fee() { FeeID=4, FeeName="School Dorm", FeeDueDate=new DateTime(2013,07,26)}
                        }
                    },
                new Student()
                    { StudentID = 1, Name = "Tom", fees =
                        new List<Fee>() {
                            new Fee() { FeeID=2, FeeName="Books", FeeDueDate=new DateTime(2014,06,20) },
                            new Fee() { FeeID=4, FeeName="School Dorm", FeeDueDate=new DateTime(2013,03,26) }
                        }
                    }
                };

            var sorted = from student in students
                         orderby student.StudentID
                         select new
                         {
                             stud = student.StudentID,
                             fees =
                                 from fee in student.fees
                                 orderby fee.FeeDueDate ascending
                                 select fee
                         };

            foreach (var item in sorted)
            {
                Console.WriteLine("stud[{0}] => ", item.stud);
                foreach (var f in item.fees)
                {
                    Console.WriteLine(f.ToString());
                }
                Console.WriteLine();
            }
        }
    }

    public class Student
    {
        public int StudentID {get; set;}
        public string Name {get; set;}
        public List<Fee> fees {get; set;}
    }

    public class Fee
    {
        public int FeeID {get; set;}
        public string FeeName {get; set;}
        public DateTime FeeDueDate { get; set; }

        public override string ToString()
        {
             return String.Format("FeeID={0,2}, FeeName={1,20}, FeeDueDate={2}", FeeID, FeeName, FeeDueDate);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T22:20:35.213

好吧，这将解决您的第二个问题。努力去理解它……否则你的老师会知道答案不是你自己的……

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var students = new[] {
                new Student()   
                    { StudentID = 0, Name = "Mark", fees =
                        new List<Fee>() {
                            new Fee() { FeeID=1, FeeName="Books", FeeDueDate=new DateTime(2014,06,25), FeeAmount = 1.30 },
                            new Fee() { FeeID=2, FeeName="Tuition", FeeDueDate=new DateTime(2013,03,21), FeeAmount = .30 },
                            new Fee() { FeeID=3, FeeName="Sports Equipment", FeeDueDate=new DateTime(2013,03,18), FeeAmount = .80 },
                            new Fee() { FeeID=4, FeeName="School Dorm", FeeDueDate=new DateTime(2013,07,26), FeeAmount = 0}
                        }
                    },
                new Student()
                    { StudentID = 1, Name = "Tom", fees =
                        new List<Fee>() {
                            new Fee() { FeeID=2, FeeName="Books", FeeDueDate=new DateTime(2014,06,20), FeeAmount = 1.50 },
                            new Fee() { FeeID=4, FeeName="School Dorm", FeeDueDate=new DateTime(2013,03,26), FeeAmount = 4.00 }
                        }
                    }
                };

            var sorted = (from student in students
                         select new
                         {
                             stud = student.StudentID,
                             name = student.Name,
                             feesum = student.fees.Sum(x => x.FeeAmount),
                             fees =
                                 from fee in student.fees
                                 orderby fee.FeeDueDate ascending
                                 select fee
                         }).OrderByDescending(s => s.feesum);

            foreach (var item in sorted)
            {
                Console.WriteLine("stud[{0}] => {1}, Fees: {2}", item.stud, item.name, item.feesum);
                foreach (var f in item.fees)
                {
                    Console.WriteLine(f.ToString());
                }
                Console.WriteLine();
            }
        }
    }

    public class Student
    {
        public int StudentID {get; set;}
        public string Name {get; set;}
        public List<Fee> fees {get; set;}
    }

    public class Fee
    {
        public int FeeID {get; set;}
        public string FeeName {get; set;}
        public DateTime FeeDueDate { get; set; }
        public double FeeAmount { get; set; }

        public override string ToString()
        {
             return String.Format("FeeID={0,2}, FeeName={1,20}, FeeDueDate={2}", FeeID, FeeName, FeeDueDate);
        }
    }
} 
```

# wordpress - Wordpress 硬编码主页（在管理面板中不可见）

> ID：15372485
> 
> 赞同：-2
> 
> 时间：2013-03-12T21:27:25.543
> 
> 标签：wordpress, e-commerce

我正在使用自定义主题的 WP 安装。主页似乎以这样的方式进行了自定义，即使设置>阅读设置为“您的最新帖子”，它实际上也会显示其他内容（不是帖子）作为主页。

安装和使用电子商务插件后，添加产品类别后，主页实际上已成为“您的最新帖子”。我在哪里可以找到可能覆盖该设置的代码（在代码中，或在数据库中；不在设置中）并将其实际指向一个 php 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:24:50.890

您可以制作自己的页面模板创建帖子，选择自定义类型帖子不要填写内容，因为您已经对其进行了硬编码。

然后将其设置为主页槽设置读取并选择静态页面

更多信息：[http](http://codex.wordpress.org/Pages) ://codex.wordpress.org/Pages （查看创建您自己的页面模板）

# rename - 为什么要重命名元通用量化变量以及如何防止它？

> ID：15372486
> 
> 赞同：3
> 
> 时间：2013-03-12T21:27:26.887
> 
> 标签：rename, isabelle

考虑以下愚蠢的例子

```
theory meta_all
imports Main
begin

lemma strict_subset: "⟦ A ⊂ B ⟧ ⟹ ∃a ∈ B. a ∉ A"
apply(blast)
done

lemma strict_subset2: "∀A B. A ⊂ B ⟶ (∃a ∈ B. a ∉ A)"
apply(blast)
done

lemma "¬ (∃A. A ⊂ A)"
apply(rule notI)
apply(erule exE) 
```

接下来我想使用`strict_subset`引理并替换`A`两者`A`，`B`它会这样做，但是它将现有的重命名`A`为`Aa`，完全违背了引入引理的目的。

```
apply(insert strict_subset [where A="A" and B="A"]) 
```

如果我使用派生引理`strict_subset2`，一切都会很好，所以我相信我的推理是合理的。

```
apply(insert strict_subset2)
apply(erule_tac x="A" in allE, erule_tac x="A" in allE)
apply(drule mp, assumption)
apply(erule bexE, erule notE, assumption)
done

end 
```

关键是大多数标准引理都是形式`strict_subset`而不是形式`strict_subset2`，伊莎贝尔的制造者不可能让我`strict_subset2`先自己制作，所以，我一定做错了什么。

我想明白为什么`A`要改名？我认为这与打字系统有关，因为我认为我还看到了只要类型完全正确，元通用量化就不是问题的例子。

另一个问题是我是否可以以`A`某种方式阻止重命名？

当然，很可能这两个问题实际上都与真正正确的答案无关，因为我对伊莎贝尔还是很陌生。

PS。是否也可以从 Isabelle 那里获得漂亮的符号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T22:19:38.603

这只是一个狭隘的技术答案，并没有提出这种实验路径是否有意义的问题。

在你的情况下

```
apply(insert strict_subset [where A="A" and B="A"]) 
```

有问题的子目标是：

```
⋀A. A ⊂ A ⟹ False 
```

但是局部边界（绿色）`A`是子目标的所谓“参数”，这意味着它隐藏在目标上下文中。使用是`strict_subset [where A="A" and B="A"]`指*证明文本*的上下文，而不是*证明目标*。所以你会得到不同的 (free, undeclared) `A`，这也通过证明者输出中的特殊突出显示来表示。

有一组特殊的（非常老式的）策略允许潜入隐式目标上下文并进行一些实例化。这是一个例子：

```
apply(cut_tac A = A and B = A in strict_subset) 
```

现在您在目标状态中拥有了绿色实例`A`，但由于规则的形式以及这种奇怪的工作方式，它也被分成了太多的子目标`cut_tac`。

请注意，基本上有以下类别的 Isabelle/Isar 证明方法：

*   结构化 Isar 证明步骤：特别是`rule`

*   带有推理方向指示的弱结构化步骤：`erule`, `drule`,`frule`

*   允许使用参数进入隐含目标上下文的旧式策略模拟：`rule_tac`, `erule_tac`, `drule_tac`,`frule_tac`

PS：您可以将 Isabelle/jEdit 中的 unicode 输出复制粘贴到此文本编辑器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:37:42.890

我认为您应该更改`apply (insert strict_subset)`为`apply (drule strict_subset)`. 那么你的证明可以通过 完成`apply simp`。

（该`insert foo`方法`foo`作为附加假设添加，并带有它带来的元量词。您想要的是该`drule foo`方法，它根据蕴涵削弱了您的一个假设`foo`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T09:04:22.637

结构化证明避免了所描述的命名问题，还允许您执行单步推理：

```
lemma  "¬ (∃A :: 'a set. A ⊂ A)"
proof
   assume "∃A :: 'a set. A ⊂ A"
   then obtain A :: "'a set" where "A ⊂ A" ..          (* by (rule exE) *)
   then have "∃a ∈ A. a ∉ A" by (rule strict_subset)
   then obtain a where "a ∉ A" "a ∈ A" ..              (* by (rule bexE) *)
   then show False ..                                  (* by (rule notE) *)
qed 
```

`..`是一样的`by rule`。您可以`using [[rule_trace]]`在证明步骤之前使用（和 find_theorems）来确定正在使用哪个规则`rule`。

这种结构使证明中发生的事情更加明显。当然，apply 风格肯定具有更多的探索性（这就是为什么我在尝试*寻找*证明时经常更喜欢它的原因），但结构化证明给你更多的控制权。

# android - 如何制作一个 android 选项卡？

> ID：15372492
> 
> 赞同：-1
> 
> 时间：2013-03-12T21:27:39.333
> 
> 标签：android

我想在此链接中制作一个标签菜单[https://www.justinmind.com/usernote/tests/10582408/10582411/10582413/index.html#/screens/74bd08d4-2de1-4149-b45e-c648c36ccdd5](https://www.justinmind.com/usernote/tests/10582408/10582411/10582413/index.html#/screens/74bd08d4-2de1-4149-b45e-c648c36ccdd5) 我已经迷惑了在没有任何有用答案的情况下搜索不同站点中的每个类似问题，我无法删除选项卡的底线并使用或更改其颜色并使边框围绕其他选项卡并使其背景为白色，如上面链接中所设计

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:06:00.897

你应该看看这个答案：

[https://stackoverflow.com/a/3904011/2140191](https://stackoverflow.com/a/3904011/2140191)

在您的 /res/layout 文件夹中应该是一个包含选项卡布局（自定义外观）的文件。

该网站提供了有关自定义选项卡的教程：

[http://joshclemm.com/blog/?p=136](http://joshclemm.com/blog/?p=136)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:48:38.450

链接中的那个似乎不是标签。我认为这是一个定制的布局。解决此问题的一种方法是使用带有白色背景的三个标签字段，并且在两者之间绘制线条可能是使用背景灰色的视图。点击后，您甚至可以制作动画并更改内容。

# scala - 如何在 Slick 中定义可选外键？

> ID：15372495
> 
> 赞同：8
> 
> 时间：2013-03-12T21:28:03.230
> 
> 标签：scala, slick

我有一张这样的桌子：

```
object Addresses extends Table[AddressRow]("address") {
   def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
  def street = column[String]("street")
  def number = column[String]("number")
  def zipcode = column[String]("zipcode")
  def city = column[String]("city")
  def country = column[String]("country")
  def geoLocationId = column[Int]("geo_location_id", O.Nullable)

 // Foreign keys.
 def geoLocation = foreignKey("fk_geo_location", geoLocationId, GeoLocations)(_.id)

 // Rest of my code.
 ...
} 
```

我的案例类是：

```
case class AddressRow(
  id: Option[Int] = None,
  street: String,
  number: String,
  zipcode: String,
  city: String,
  country: String,
  geoLocationId: Option[Int]) 
```

如您所见， geoLocation 是一个可选的外键....

我在我的外键定义中找不到任何方法来描述这个“可选”。

我试过像：

```
 def geoLocation = foreignKey("fk_geo_location", geoLocationId.asColumnOf[Option[Int]], GeoLocations)(_.id) 
```

但我收到：

> 引起：scala.slick.SlickException：不能在外键约束中使用列应用函数转换（只允许命名列）

有人有建议吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-24T13:03:55.343

尝试以下操作：

```
def geoLocationId = column[Option[Int]]("geo_location_id")
//Foreign Key
def geoLocation = foreignKey("fk_geo_location", geoLocationId, GeoLocations)(_.id.?) 
```

`geoLocationId`现在是一个列，`Option[Int]`因此`O.Nullable`不再需要 `(_.id.?)`返回`GeoLocation`作为选项，或者`None`如果它为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:57:22.530

我认为您尝试做的事情不能通过使用外键来完成。从 Slick 文档中查看 [加入](http://slick.typesafe.com/doc/1.0.0/lifted-embedding.html#joining-and-zipping)和[用户定义的类型。](http://slick.typesafe.com/doc/1.0.0/lifted-embedding.html#user-defined-functions-and-types)

请注意以下示例`leftJoin`：

```
val explicitLeftOuterJoin = for {
  (c, s) <- Coffees leftJoin Suppliers on (_.supID === _.id)
} yield (c.name, s.name.?) 
```

因此，如果您想查询所有的，则`Addresses`需要从类似的内容开始

```
val addressGeolocQuery = for {
  (addr, loc) <- Addresses leftJoin GeoLocations on (_.geoLocationId === _.id)
} yield addr.id ~ loc.prop1.? ~ loc.prop2.? /*and so on*/ 
```

然后，您可以映射该查询的结果，以便返回一个实际`Address`实例，并带有`Option[GeoLocation]`. 这就是我在文档中链接“用户定义类型”的原因......这对我来说是一个新功能（我熟悉 ScalaQuery，它是 Slick 的前身），但它看起来很有希望。

# ruby-on-rails - Ruby 在数组中对哈希进行排序时遇到问题

> ID：15372503
> 
> 赞同：1
> 
> 时间：2013-03-12T21:28:33.300
> 
> 标签：ruby-on-rails, ruby, arrays, hashtable

我有一个返回以下数组的数据模型：

`[[54993, {:posted_at=>1363066554, :item_id=>55007,..}],..]`

是`54993`post_id。我正在尝试获取此数组并按`posted_at`. 该数组按正确排序`posted_at`。这是我当前的代码：

```
 post_ids = UserFeed.new(current_user.id).posts.collect{|x| x[0]}
  posts = Post.where(:id => post_ids) 
```

这排序它`post_id`，而不是`posted_at`。我试图弄清楚如何排序`posted_at`，并想知道为什么数组使用`post_id`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:49:59.183

如果您确实需要在内存中使用该数组而不是使用 DB 查询对数据进行排序，请尝试以下操作：

```
method_that_returns_array.sort{ |a, b| a[1][:posted_at] <=> b[1][:posted_at]} 
```

但是使用查询订购是首选方式：

```
Post.order(:posted_at) 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T22:02:25.083

`where(ids)`不设置顺序，它使用 SQL `IN (id1, id2, ...)`。使用 ActiveRecord：

```
post_ids = UserFeed.new(current_user.id).posts.map(&:first)
posts = Post.where(:id => post_ids).order("posted_at ASC") 
```

如果没有属性`posts.posted_at`，则解决方案1：

```
posts = post_ids.map { |post_id| Post.find(post_id) } 
```

解决方案 2：这执行单个查询，然后排序：

```
indexes = Hash[post_ids.map.with_index.to_a]
posts = Post.where(:id => post_ids).sort_by { |p| indexes[p.id] } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:32:04.123

问题中有一个错字确实改变了问题，所以如果 post_ids 排序正确，我首先想到的是：

```
posts = []

post_ids.each do |post_id|
    posts << Post.find(post_id)
end 
```

# android - FFmpeg：调用 Runnable 类时出现 java.lang.UnsatisfiedLinkError

> ID：15372512
> 
> 赞同：0
> 
> 时间：2013-03-12T21:29:07.947
> 
> 标签：android, ffmpeg, java-native-interface, executable, jniwrapper

我需要拍摄图片文件和音频文件并创建视频。我知道有可能在

```
Runtime.getRuntime().exec("ffmpeg -i image.jpeg -i audio.mp3 out.avi") 
```

但仅适用于有根设备，因此我尝试从 ffmpeg.c 为 main() 创建 JNI 包装器，并从我的 Activity 中调用它，如下所示：http: [//demo860.blogspot.com/2010/07/android-ffmpeg-动态模块-jni.html](http://demo860.blogspot.com/2010/07/android-ffmpeg-dynamic-module-jni.html)

1.此代码在 ffmpeg.c 中：

```
int m_argc = 0;
char *m_pargv [30];

int dynamic_ffpmeg_main (int argc, char **argv);
jint JNICALL Java_com_ccmedia_codec_ffmpeg_mod_1run ( JNIEnv *, jclass, jstring,     jstring );

jint JNICALL Java_com_ccmedia_codec_ffmpeg_mod_1run ( JNIEnv *env, jclass class, jstring pj1, jstring pj2)
{
    // as in http://demo860.blogspot.com/2010/07/android-ffmpeg-dynamic-module-jni.html
}

int dynamic_ffpmeg_main(int argc, char **argv)
{
// as in http://demo860.blogspot.com/2010/07/android-ffmpeg-dynamic-module-jni.html
}

int main(int argc, char **argv)
{
    dynamic_ffpmeg_main ( argc, argv );
    return 0;
} 
```

2.这段代码在我的.java中：

```
public class FFmpegCreator implements Runnable {

    static boolean m_bret = false;
static String m_szconfig = " -i /sdcard/file.mpg -vcodec mpeg4 aaa.mpg";

//public native String unimplementedStringFromJNI();

static {
    try {

        System.out.println("[AdDBCache] Module load try ffmpeg : "
                + System.getProperty("java.library.path"));

        // System.load("/sdcard/arm_and/bin/libffmpeg.so");

        System.loadLibrary("ffmpeg");

        System.out.println("[AdDBCache] Module load success");

    }

    catch (Exception e) {

        System.out.println("[AdDBCache] Module load err : "
                + System.getProperty("java.library.path"));

    }

}

private static synchronized final native int Java_com_ccmedia_codec_ffmpeg_mod_1run(String name, String sztoken);

public void set_config(String sz_config) {

    m_szconfig = sz_config;

}

public void run_core(String sz_file, String sz_token) {

    int n_stat;
    m_bret = false;
    n_stat = Java_com_ccmedia_codec_ffmpeg_mod_1run(m_szconfig, sz_token);
    m_bret = true;

}

public void run() {

    run_core("", "");

}
} 
```

3.这在我的活动中：

```
FFmpegCreator f = new FFmpegCreator ();
new Thread(f).start(); 
```

但是我有

```
E/AndroidRuntime(25682): java.lang.UnsatisfiedLinkError: Java_com_ccmedia_codec_ffmpeg_mod_1run . 
```

而且我不明白为什么... FFmpeg 构建成功... 有人可以帮我吗？如果您能帮助我，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:10:09.113

`Java_com_ccmedia_codec_ffmpeg_mod_1run`问题在于Java 端的本地方法的命名。您应该只给它一个普通的方法名称，而不是所有 Java_package... 部分。然后要将其与 C 函数匹配，您需要使用该方法所属的包和类。最简单的方法是先更新Java端：

```
public class FFmpegCreator implements Runnable {
    // ...

    private static synchronized final native int mod_1run(String name, String sztoken);

    //...
} 
```

然后在类上运行[javah](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javah.html)：

```
$ javah -o FFmpegCreator.h -classpath bin/classes com.yourpackage.FFmpegCreator 
```

（替换`bin/classes`为编译 .class 文件的目录以及`com.yourpackage`其中的包`FFmpegCreator`）。如果您查看`FFmpegCreator.h`它生成的内容，它将包含您本机方法的正确签名。

# jquery - 仅当大于 960 像素时才显示粘性导航

> ID：15372523
> 
> 赞同：1
> 
> 时间：2013-03-12T21:29:40.053
> 
> 标签：jquery, navigation, sticky

我有一个关于 jquery 的问题。仅当窗口大小大于 960 像素时，我才尝试应用粘性导航。所以我需要检查是否有窗口调整大小或滚动事件......我想不通......

有人可以帮我修理那些东西吗？

这是我尝试调整的代码

```
$(function() {

    var sticky_navigation_offset_top = $('#nav').offset().top;

    var sticky_navigation = function(){
        var scroll_top = $(window).scrollTop(); // our current vertical position from the top

        if (scroll_top > sticky_navigation_offset_top) { 
            $('#nav').css({ 'position': 'fixed', 'top':0, 'left':0 });

        } else {
            $('#nav').css({ 'position': 'relative' }); 
        }   
    };

    sticky_navigation();

    $(window).resize(function() {
  if ($(window).width() > 960) {
        $(window).scroll(function() {
         sticky_navigation();
    });
  }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:42:45.353

`**[LIVE DEMO](http://jsbin.com/iwasew/2/edit)**`

```
function stickNav() { 
    var setPosition = $(window).width() > 960 ? 'fixed' : 'relative';
    $('#nav').css({position:setPosition, left:0, top:0});
}

$(function() {
    stickNav();  // Do it on DOM ready
});

$(window).resize(function() {
    stickNav();  // Do in on Resize
}); 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:05:02.253

roXon 没有考虑导航偏移，并且必须在调整大小和滚动时进行计算。

这是我的解决方案：http: [//jsfiddle.net/victmo/SZV6m/](http://jsfiddle.net/victmo/SZV6m/)

我使用 jquery 的 1.8`on`功能：`win.on('resize scroll', function(){...`

**Javascript**

```
var minWidthToStick = 300;

var nav = $('#nav'); // caching nav
var offset = nav.offset().top; // getting offset
var win = $(window); // caching window

win.on('resize scroll', function(){
    if(
        win.width() >= minWidthToStick && 
        win.scrollTop() >= offset
    ){
        nav.css('position', 'fixed');
    }else{
        nav.css('position', 'relative');
    }
}).resize(); 
```

不要忘记将该代码放入您的`$(document).ready(function(){ ... })`函数中:)

# mysql - 使用 INNER JOIN 返回第二个表的最后一个条目

> ID：15372526
> 
> 赞同：0
> 
> 时间：2013-03-12T21:29:43.660
> 
> 标签：mysql, group-by, sql-order-by, inner-join, max

这是我在这里的第一个问题，所以我会尽量保持简单。

我的“Pendencies System”上有两个表：

**第 1** - 主要信息（例如 id、发件人、优先级...）
**第 2** - 第一个表的日志（用户更改的所有内容，例如标题、期间...）

我需要显示与第二张表的最后一个日志相关联的每一个挂起，以获取更新的信息。

我怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:36:02.233

您需要创建一个子查询来从日志表中收集 ID 和最大值。像下面这样的东西就足够了。

```
SELECT m.id, m.sender, m.priority, l2.*
FROM maininfo m
    INNER JOIN (SELECT id, MAX(PrimaryKey) AS Max
                FROM logs
                GROUP BY id) l ON m.id = l.id
    INNER JOIN logs l2 ON m.id = l2.id AND l.Max = l2.PrimaryKey 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:40:15.793

```
SELECT * FROM 
  Main JOIN
  (SELECT * FROM
     Logs where Logs.Id in 
        (SELECT MAX(Id) from Logs GROUP BY Logs.Main_Id)
  ) as newestLogs
  ON newestLogs.Main_Id = Main.Id 
```

这应该大约工作

见[http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

分析如何最快地进行子表查询。

# java - Struts - 如果选择列表为空，我如何获取它的值？

> ID：15372527
> 
> 赞同：3
> 
> 时间：2013-03-12T21:29:48.910
> 
> 标签：java, html, struts

我对 ActionForm 中的数组对象有疑问，该对象在 HTML 中显示为“Select”元素，用户可以添加和删除选项，然后在提交时添加或删除数据库中的值，一切正常，我全选提交时的选项，因此所有值都将映射到表单的数组中，依此类推。

但是，当用户提交一个空选择时，我没有看到表单对象有任何变化，表单没有识别出该数组的值为空。

我正在使用 struts 1.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T23:16:55.583

如果未选择任何内容，则数组将保持在实例化表单 bean 时的状态。所以如果你把它初始化为一个空数组，你就会得到你想要的。

我的猜测是您正在为表单 bean 使用（不幸的）默认会话范围。这是一个不好的做法。您应该更喜欢请求范围的表单 bean。如果你真的想继续使用会话范围的表单 bean，那么它们应该覆盖 reset() 方法，以便在从请求参数填充之前将属性重置为其默认值。

# php - PHP preg_replace() 正则表达式

> ID：15372528
> 
> 赞同：0
> 
> 时间：2013-03-12T21:29:49.080
> 
> 标签：php

我得到以下格式的动态值，谁能帮助我如何使用 preg_replace() 去除多余的字符？

```
case1)  $string='""14""';  
case2)  $string='""string1""';  
case3)  $string='"[\"string1\", \"string2\"]"';  
case4) $string='"[\"string1\", \"string21\", \"string3\"]"'; 
```

在这里，我只想摆脱“ [ \ ] 而不是逗号'，'，所以如果它是一个字符串，我只会得到双引号，但如果它不止一个，我会在农场逗号分隔。

我需要以下输出。
case1 ) 14
case2) string1
case3) string1,string2
case4) string1,string21,string3

在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:35:48.900

正如其他人所提到的，这看起来像损坏的 JSON。但是仅仅调用 json_decode 是行不通的，因为字符串周围有额外的引号。尝试像这样剥离它们：

```
$str = substr($str, 1, -1);
$vals = json_decode($str);
print_r($vals); 
```

如果您真的希望它的格式与您在问题中提到的完全一样，您可以继续

```
$str = implode(',', $vals);
print_r($str); 
```

# android - 如何在列表片段或片段中转换它？

> ID：15372529
> 
> 赞同：0
> 
> 时间：2013-03-12T21:29:49.497
> 
> 标签：android, xml, parsing, fragment, android-listfragment

如何将此**ListActivity**代码转换为**Fragment**或**ListFragment**。我不会将 xml 代码解析为片段以在自定义列表视图上显示解析的文档。

xml文件的网址：http: [//apeiron.comyr.com/fit.xml](http://apeiron.comyr.com/fit.xml)

申请代码：

```
import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class AndroidXMLParsingActivity extends ListActivity {

    // All static variables
    //static final String URL = "http://api.androidhive.info/pizza/?format=xml";
    static final String URL = "http://apeiron.comyr.com/fit.xml";
    // XML node keys
    static final String KEY_ITEM = "novost"; // parent node
    //static final String KEY_ID = "id";
    static final String KEY_NAME = "naslov";
    static final String KEY_COST = "datum";
    static final String KEY_DESC = "text";
    static final String KEY_LINK = "link";
    static final String KEY_LINK1 = "link1";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        final XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value

            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_COST, "Datum: " + parser.getValue(e, KEY_COST));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
            map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
            map.put(KEY_LINK1, parser.getValue(e, KEY_LINK1));

            // adding HashList to ArrayList
            menuItems.add(map);

        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_row,
                new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                        R.id.naslov, R.id.novost, R.id.datum });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.naslov)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.datum)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.novost)).getText().toString();
                String link=KEY_LINK;
                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_NAME, name);
                in.putExtra(KEY_COST, cost);
                in.putExtra(KEY_DESC, description);
                in.putExtra(KEY_LINK, link);
                in.putExtra("link1", KEY_LINK1);
                startActivity(in);

            }
        });
    }
} 
```

我需要做什么 ？

我尝试了这段代码......但应用程序被破坏了：

```
import android.app.ListFragment;

import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

/** This is a listfragment class */
public class AndroidFragment extends ListFragment {

    // All static variables
    //static final String URL = "http://api.androidhive.info/pizza/?format=xml";
    static final String URL = "http://apeiron.comyr.com/fit.xml";

    static final String KEY_ITEM = "novost";
    static final String KEY_NAME = "naslov";
    static final String KEY_COST = "datum";
    static final String KEY_DESC = "text";
    static final String KEY_LINK = "link";
    static final String KEY_LINK1 = "link1";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        /** Creating array adapter to set data in listview */
        //ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_list_item_multiple_choice, android_versions);
        //setListAdapter(adapter);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        final XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value

            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_COST, "Datum: " + parser.getValue(e, KEY_COST));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
            map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
            map.put(KEY_LINK1, parser.getValue(e, KEY_LINK1));

            // adding HashList to ArrayList
            menuItems.add(map);

        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(getActivity().getBaseContext(), menuItems,
                R.layout.list_row,
                new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                        R.id.naslov, R.id.novost, R.id.datum });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.naslov)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.datum)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.novost)).getText().toString();

                // Starting new intent
                /*Intent in = new Intent(getActivity().getBaseContext(), Asd.class);
                in.putExtra(KEY_NAME, name);
                in.putExtra(KEY_COST, cost);
                in.putExtra(KEY_DESC, description);
                in.putExtra(KEY_LINK, link);
                in.putExtra("link1", KEY_LINK1);
                startActivity(in);*/

            }
        });

        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public void onStart() {
        super.onStart();

        /** Setting the multiselect choice mode for the listview */
    //  getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);     
    }

} 
```

日志猫：

```
03-12 23:13:44.300: E/AndroidRuntime(3922): FATAL EXCEPTION: main
03-12 23:13:44.300: E/AndroidRuntime(3922): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.actionbarnavtab/in.wptrafficanalyzer.actionbarnavtab.MainActivity}: android.os.NetworkOnMainThreadException
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2309)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2359)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.ActivityThread.access$600(ActivityThread.java:153)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.os.Looper.loop(Looper.java:137)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.ActivityThread.main(ActivityThread.java:5204)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at java.lang.reflect.Method.invokeNative(Native Method)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at java.lang.reflect.Method.invoke(Method.java:511)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at dalvik.system.NativeStart.main(Native Method)
03-12 23:13:44.300: E/AndroidRuntime(3922): Caused by: android.os.NetworkOnMainThreadException
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at in.wptrafficanalyzer.actionbarnavtab.XMLParser.getXmlFromUrl(XMLParser.java:46)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at in.wptrafficanalyzer.actionbarnavtab.AndroidFragment.onCreateView(AndroidFragment.java:50)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.Fragment.performCreateView(Fragment.java:1695)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:885)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.BackStackRecord.run(BackStackRecord.java:682)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.Activity.performStart(Activity.java:5117)
03-12 23:13:44.300: E/AndroidRuntime(3922):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2272)
03-12 23:13:44.300: E/AndroidRuntime(3922):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:40:49.063

首先，您应该学习如何创建片段并将其添加到您的活动[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)。然后您将能够理解它是如何工作的，并将您的代码移动到扩展 ListFragment 的新类上。

如果需要兼容<4.0，看一下兼容库[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

# c# - C# 在 BackgroundWorker RunWorkerCompleted 完成后立即执行某些操作

> ID：15372537
> 
> 赞同：0
> 
> 时间：2013-03-12T21:30:06.340
> 
> 标签：c#, multithreading, backgroundworker

我有一个 C# 项目（.NET 3.5），它使用 a`BackgroundWorker`来做一些事情。这个东西为它执行的所有操作写了一个日志文件。完成`BackgroundWorker` 后，我需要检索日志文件中的一些信息。问题是当`RunWorkerCompleted`事件被触发时，日志文件仍然是空的。因此，如果我执行以下操作：

```
private void BackProgress_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
      LoadLog();

} 
```

该`LoadLog`方法将找到一个空日志。

我一直在调试应用程序，发现在最后一个大括号`RunWorkerCompleted`被命中的那一刻，日志文件不再为空。我不知道如何在适当的时候加载日志文件，因为我在调用后立即执行的任何操作`RunWorkerAsync()`都会立即执行，并且`BackgroundWorker`' 的工作仍然不会完成（再次，一个空日志）。

基本上我需要能够在方法结束`LoadLog`后立即调用。`RunWorkerCompleted`

你有什么想法可以帮助我解决这个问题吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:40:56.080

您可以尝试使用 Control/Form [BeginInvoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)方法异步调用 LoadLog。

此方法使用 PostMessage 将已注册的消息放入 Windows 消息队列并立即返回 - 这就是它进行异步调用的方式。

像这样：

```
BeginInvoke(new MethodInvoker(LoadLog)); 
```

# ember.js - 遍历复杂的 RESTful 输出（版本 12）

> ID：15372540
> 
> 赞同：0
> 
> 时间：2013-03-12T21:30:25.147
> 
> 标签：ember.js

我从 RESTful API 得到以下（简化的）输出：

```
{products: [{
    product: { 
        id: 1, name: "T-Shirt red"
    },
    images: [{
        id: 1, size: 'm', url: 'http://db.co/t-shirt-red_m.jpg'
    }, {
        id: 2, size: 'xl', url: 'http://db.co/t-shirt-red_xl.jpg'
    }]
}, {
    product: {
        id: 2, name: "T-Shirt blue"
    },
    images: [{
        id: 3, size: 'm', url: 'http://db.co/t-shirt-blue_m.jpg'
    }, {
        id: 4, size: 'xl', url: 'http://db.co/t-shirt-blue_xl.jpg'
    }]
}]} 
```

使用 Ember 版本 12，Product 模型的声明应该如何，如何遍历结果？在那个方向上找不到任何例子。

以下访问数据不起作用（我只是找不到正确的语法）：

```
var products = App.Product.find();                  // seems to work
var prodNames = products.getEach('product.name');   // doesn't work
var secondProd = products.getObject(1).get('name'); // doesn't work 
```

提前非常感谢！克劳迪奥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:31:18.377

DS.hasMany 和 REST 适配器的一些选项可能会对您有所帮助。

我在 MongoDB 嵌入式模型中使用了类似的设置。我在下面附上了一些例子。

我不想尝试保存到嵌入式数组，所以我使用了嵌入式：加载，但是您可以使用嵌入式：'always' 将整个对象持久化回服务器（尽管它的工作原理并不像我预计）如果您保存父对象，则使用“始终”。

```
DS.RESTAdapter.map 'App.Check',
  line_items: { embedded: 'load' }
  parties: { embedded: 'load' }

App.Check = DS.Model.extend
  description: DS.attr("string")
  modified_date: DS.attr("date")
  parties: DS.hasMany('App.Party')

App.Party = DS.Model.extend
  name: DS.attr("string")
  check: DS.belongsTo('App.Party') 
```

然后，您可以引用该项目。在一个视图中，我从内容设置为 DS.Check 实例的 ArrayController 访问它，如下所示。

```
{{#each party in content.parties }} 
```

# jquery - JQMigrate 到 jQuery 1.9，如何找到违规行？

> ID：15372545
> 
> 赞同：3
> 
> 时间：2013-03-12T21:30:40.850
> 
> 标签：jquery, html, mediaelement.js, jqmigrate

我正在迁移到 jQuery 1.9.1，并使用[发行说明中提到的 JQMigrate 工具](http://blog.jquery.com/2013/02/04/jquery-1-9-1-released/)。

我收到以下警告：

```
JQMIGRATE: $(html) HTML strings must start with '<' character 
```

jQuery人的[解释很清楚](https://github.com/jquery/jquery-migrate/blob/master/warnings.md#jqmigrate-html-html-strings-must-start-with--character)，**但是如何找到违规行呢？**

问题似乎隐藏在第 3 方库（[mediaelementjs](http://mediaelementjs.com/)）或使用它的某个地方。我通过注释掉电话发现了这一点。但是发生了很多事情，我被困住了。

* * *

**更新：**在 Kevin BI 的帮助下，发现了违规行，它确实在 mediaelementJS 中。我`mediaelement-and-player.js`是第 3176 行（注意外部空格）

```
timeAndDurationSeparator: ' <span> | </span> ' 
```

现在是

```
timeAndDurationSeparator: '<span> | </span>' 
```

现在可以完美运行。

如果有人遇到同样的问题，这里是修改后的文件：

*   未压缩 [https://quirli.svn.codeplex.com/svn/webroot/mediaelement/mediaelement-and-player.js](https://quirli.svn.codeplex.com/svn/webroot/mediaelement/mediaelement-and-player.js)
*   缩小版 [https://quirli.svn.codeplex.com/svn/webroot/mediaelement/mediaelement-and-player.min.js](https://quirli.svn.codeplex.com/svn/webroot/mediaelement/mediaelement-and-player.min.js)

我将通知原作者[John Dyer](http://j.hn/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:36:27.407

查看控制台右侧的堆栈跟踪下方。没有说 jQuery Migrate 或 jquery.js 的那一行可能是有问题的那一行。

例如，在[这个 fiddle](http://jsfiddle.net/nrdkF/1/)上，违规行是第 24 行，列为`(anonymous function)`

# crystal-reports - 想要在 Crystal Reports 上创建一个覆盖所有部分的“侧边栏”

> ID：15372546
> 
> 赞同：2
> 
> 时间：2013-03-12T21:30:45.253
> 
> 标签：crystal-reports

我正在尝试在我的报告中添加一个可以与所有其他部分重叠的“侧边栏”。有没有办法做到这一点？我找不到那样的东西。此外，此侧边栏将只有静态文本。因此，使用详细信息部分中的重叠错误/功能将不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:44:21.917

如果您使用的是 CR2008 或更高版本，您可以为一个部分添加底图：

添加一个新的报告标题（右键单击报告标题和“在下面插入部分”）在部分专家中，选择新的报告标题部分并选择“覆盖以下部分”这将使报告标题 2 溢出任何组、详细信息和报告页脚所以你可能需要注意尺寸。

设计将如下所示：

![设计形象](../Images/dc3d51c3b5b2ae71b5d6927db4fdc8d4.png)

预览时将如下所示：

![预览图](../Images/a14d3daf244c2ac434caccb3c136856e.png)

# api - 在 Adob e Sitecatalyst 的 RankedReport 中检索流量变量

> ID：15372558
> 
> 赞同：0
> 
> 时间：2013-03-12T21:31:24.603
> 
> 标签：api, adobe, report, analytics, adobe-analytics

发出排名报告的 GetReport 请求时，是否可以获取流量变量 sProp1 以及 PageName 和 Url？

假设我通过 Java 脚本将以下内容传递给了 SiteCatalyst (Omniture)。

```
s.pageName = o_title; // Page Name
s.channel = o_structure; // SiteSection
s.prop1 = o_inode // Traffic variable also the Primary Key Id of the PageName 
```

现在，如果我运行 RankedReport，我将得到以下信息

PageName PageViews 网址

除了这些信息，我还将对获取 s.prop1 值感兴趣。我将需要 s.prop1 值在我的数据库上使用它来从数据库（和其他元数据）查询文章的第一句话，并在显示最受欢迎页面的结果页面上显示结果。这可以实现吗？我的意思是可以获得与 pageName 关联的流量变量吗？

谢谢， 拉格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:16:31.807

好的。我想如果我添加另一个元素（prop1），我就会崩溃。{ "reportDescription":{ "reportSuiteID":" ******* ", "dateFrom":"2013-03-06", "dateTo":"2013-03-15", "metrics":[ { "id":"pageviews ", "name":"页面浏览量", "type":"number" } ], "sortBy":"pageviews", "elements":[ { "id":"siteSection" }, { "id":"页“}，{“id”：“prop1”}]，“语言环境”：

# parsing - 检查输入语法并确定结果

> ID：15372560
> 
> 赞同：0
> 
> 时间：2013-03-12T21:31:32.637
> 
> 标签：parsing, language-agnostic, grammar

假设我有一个字符串“abacabacabadcdcdcd”，我想应用一组简单的规则：

蕉麻->a

dcd->d

从左到右，字符串最终是“abad”。此输出将用于做出决定。应用规则后，如果输出字符串与“abad”等预设字符串不匹配，则丢弃原始字符串。前任。每个字符串都应该蒸馏到“abad”，如果没有，就踢。

我现在将这个硬编码为正则表达式，但是这些小规则集有很多实例。我正在寻找可以采用一组简单规则并将其编译（或只是一个函数？）的东西，我可以将字符串输入并检索结果。规则集彼此独立。

输入受到严格控制，使用的规则也很简单。速度是最重要的方面。

我看过 Bison 和 ANTLR，但我认为我不需要任何强大的东西......

我在找什么？

编辑：应该提到字符串由几个字母组成。通常为 5，即“abcde”。没有空格等。只有字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:04:01.070

如果要快速运行，您可以从一个映射开始，其中包含您的规则作为字符串的键值对。然后，您可以将此映射编译为一种状态机，即具有 char 键的树，其中关联的值是替换字符串或另一棵树。

然后，您逐个字符地遍历您的字符串。在树中查找当前字符。如果您找到另一棵树，请查找该树中的下一个字符，依此类推。在某些时候，可以：

1.  查找将失败，然后您知道到目前为止您看到的字符串不是任何规则的前缀。您可以跳过当前字符并继续下一个字符。
2.  或者你得到一个替换字符串。在这种情况下，您可以用替换字符串替换当前字符和您查找的最后一个字符之间的字符。

唯一的困难是替换本身是否可以成为替换模式的一部分。例子：

```
ab -> e
cd -> b 
```

输入：

```
acd -> ab (by rule 2)
ab   -> e (by rule 1) ???? 
```

现在的问题是，如果你想重新考虑 ab 给 e？

如果是这样，您必须在每次更换后从头开始。此外，很难判断替换是否结束，除非您拥有的所有规则都使得右手边比左手边短。因为在这种情况下，有限的字符串将在有限的时间内减少。

但是如果我们不需要重新考虑，上面的算法会直接遍历字符串。

# ruby-on-rails - Rails：显示 state_machine 验证错误

> ID：15372563
> 
> 赞同：0
> 
> 时间：2013-03-12T21:31:42.523
> 
> 标签：ruby-on-rails, validation, error-handling, state-machine

我在 Ruby on Rails 中使用[state_machine](https://github.com/pluginaweek/state_machine)进行在线购买过程。其中一种状态包括用户填写带有计费信息的表格。此表单是必需的，因此我在转换到下一个状态时验证它，如下所示：

```
state :confirm do
  validates_presence_of :name, :email
end 
```

表格在哪里，`:info`下一个是`:confirm`。

这很好用：如果缺少任何字段，state_machine 将不会转换到下一个状态。但是，我找不到有关在验证返回 false 时如何显示错误通知的信息。我想在此验证失败时显示一条消息，并重定向到表单状态。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T13:49:46.630

*（我假设你早就解决了这个问题，但是......）* 我认为这个答案与 state_machine 无关。这就是问题：

> 我想在此验证失败时显示一条消息，并**重定向**到表单状态。

如果你**redirect**，对象会被重新加载，所有未保存的属性都会丢失，任何验证错误也会丢失。

处理失败验证的标准方法是（重新）**呈现**编辑视图，而不是重定向到编辑操作。这将保留未保存的属性和验证错误。

# performance - 插入和不使用索引的性能

> ID：15372564
> 
> 赞同：5
> 
> 时间：2013-03-12T21:31:44.103
> 
> 标签：performance, neo4j

正在做几个测试。

基于 Wes 等的一些很好的建议，我调整了一些没有缓存的 neo4j 属性，以便在多线程环境中进行大规模插入，性能还不错。

但是，当我引入索引（在节点上）时，性能会下降很多。差异很容易达到5倍。是否有配置设置可以让它变得更好？

提前致谢，

萨钦

Neo4j 版本 - 1.8.1；JVM - 1.6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T23:04:03.897

将节点（或关系）插入 Lucene 索引的成本很高。Lucene 是一个功能强大但复杂的工具，专为全文/关键字搜索而设计。与裸数据库相比，速度比较慢。

这就是为什么大多数批量插入工具异步执行索引的原因，例如 Michael 的批量插入器：

[http://jexp.de/blog/2012/10/parallel-batch-inserter-with-neo4j/](http://jexp.de/blog/2012/10/parallel-batch-inserter-with-neo4j/)

有些甚至绕过事务，或者直接写存储文件：

[http://blog.xebia.com/2012/11/13/combining-neo4j-and-hadoop-part-i/](http://blog.xebia.com/2012/11/13/combining-neo4j-and-hadoop-part-i/)

为了提高性能，使用 SSD 磁盘可能会有所帮助。但是由于 Neo4j 是一个完全 ACID 事务数据库，并且 Lucene 索引与事务紧密耦合（这是一件好事），除了优化基础架构以获得最佳写入性能之外，您无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T01:11:35.910

以防万一这个额外的答案仍然对在 Linux 下的 ext4 文件系统上运行 Neo4j 的任何人有用：

通过交易一些交易安全性（在 USV/电池缓冲系统或笔记本电脑上可以忽略不计），写入性能可以提高 10-15 倍！

在最近的博客文章中阅读更多内容：http: [//structr.org/blog/neo4j-performance-on-ext4](http://structr.org/blog/neo4j-performance-on-ext4)

# html - word-wrap：断词；不破坏标签

> ID：15372568
> 
> 赞同：3
> 
> 时间：2013-03-12T21:31:54.600
> 
> 标签：html, css

我的 word-wrap break-word 属性有问题，它应该会破坏代码标记，当它到达边界时

```
<div>class="link alert clearfix"</div> 
```

但它并没有破坏这个词，而是跳到下一行，在“投票”div旁边

这是问题：

[http://meetthemes.com/post/?post=Mooncraft+-+Themeforest+Premium+Theme](http://meetthemes.com/post/?post=Mooncraft+-+Themeforest+Premium+Theme)

向下滚动到第三个下载链接，就是跳下来的那个

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T21:43:57.243

如果你将它设置为`display: inline-block`并给它一个`max-width`，它会为你打破这个词。您还需要删除`white-space: nowrap`CSS 中的 code 元素，或`code.link`通过添加`white-space: normal`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-03-07T18:11:47.083

约翰的建议根本不起作用，为了工作，您还必须使用这篇文章中授权的属性：

所以使用下面的示例代码：

```
<code style="display: inline-block;white-space: normal;max-width:100%; word-break:break-all; word-wrap:break-word;">anyyyyyyyylonnnnnngggggggggstringggggggggwillllbetrunnncateeeeeddddddd</code> 
```

您可以以整数 PX、EM 或百分比设置任何最大宽度，也可以不设置最大宽度，因为它不是强制性的

# ubuntu - 设置启动板 ppa：“bzr builddeb”失败

> ID：15372569
> 
> 赞同：0
> 
> 时间：2013-03-12T21:31:59.043
> 
> 标签：ubuntu, bazaar, launchpad

我正在尝试为我正在编写的库设置 ppa。我已经花了几天时间慢慢地前进，但现在我似乎遇到了一个错误，因为“bzr builddeb”找不到 debian/changelog 文件。

我的 debian 控制文件位于以下目录中：

```
foo-ppa/trunk/foo/debian 
```

当我运行“dpkg-buildpackage -rfakeroot -d -us -uc -S”时，一切正常。但是当我运行“bzr builddep -S”时，我得到以下错误：

```
Building using working tree
bzr: ERROR: Could not find changelog at /home/chris/prj/foo-ppa/trunk/debian/changelog in tree. 
```

我知道我的目录结构是“错误的”（trunk/foo/debian 而不是trunk/debian）。但是当我更改目录结构（使用trunk/debian）时，“bzr builddep -- -nc -us -uc”会抱怨新路径并返回以下错误：

```
bzr: ERROR: [Errno 2] No such file or directory: '/home/chris/prj/foo-ppa/trunk/foo/debian/README.Debian' 
```

该文件存在，但它位于trunk/debian 而不是trunk/foo/debian 中。

我必须如何设置目录才能使 bzr 和 dpkg-buildpackage 正常工作？

谢谢克里斯托夫

- - - - - - - 编辑：

我设法通过删除构建区域目录并重试几次来解决此问题。我不知道究竟是什么问题，但它现在正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T00:55:57.497

尝试第二个命令，但首先运行“bzr rm”（无参数）。这会将所有已消失的文件标记为在 bazaar 中删除，并防止 bzr-builddeb 打印该错误。

# ios - iOS Safari 限制图片上传

> ID：15372585
> 
> 赞同：3
> 
> 时间：2013-03-12T21:32:56.647
> 
> 标签：ios, forms, safari

我知道苹果提供了一些在 HTML 中使用的属性，以使您的 Web 应用程序在 iOS 上与 Safari 一起更好地工作。我想知道现在 iOS 6 支持使用文件输入进行媒体上传，目前如果您选择它，您会得到两个选项：

```
"Take Photo or Video"
"Choose Existing" 
```

我想知道是否可以将浏览器设置为仅显示“拍照或录像”？我知道在我想知道 Apple 是否给你这么多控制权之前，我已经看到了一些花哨的 Safari 选项？让我知道你们是否在这方面看到了什么。我很想删除选择现有的只是因为我想提供的功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-10T00:42:23.140

您可以禁用视频，以便仅在以下选项之间进行选择：

```
"Take Photo"
"Choose Existing" 
```

通过将 /* 添加到您的 html 中的接受属性：

```
<input type="file" accept="image/*" capture="camera" /> 
```

因此，至少在浏览器中可以进行自定义。如果我发现更多，我会更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:21:11.883

如果您在应用程序中询问如何执行此操作，答案是不可能的。应用程序保存在自己的沙箱中，不会干扰其他应用程序的运行。

我还假设这也不可能通过网站中的代码实现。对于 Safari，网站需要一张图片。我不相信有任何方法可以指定它获取该图像的位置。

# linker-errors - LNK2019：未解析的外部符号 _main 在函数 __tmainCRTStartup 中引用

> ID：15372589
> 
> 赞同：0
> 
> 时间：2013-03-12T21:33:25.790
> 
> 标签：linker-errors, managed-c++

我在博客中经常看到这个错误，并且有点慌张，因为我无法弄清楚为什么我会收到这个（问题标题）错误。链接器子系统设置为此控制台应用程序的控制台。

这是我的主要方法：

```
// HashTable.cpp : main project file.

#include "stdafx.h"
#include "HashTable.h"
#include <stdio.h>
#include <iostream>

using namespace System;
using namespace std;

namespace HashTable
{
int main(array<System::String ^> ^args)
{
    Hashtable<String^, int>^ table = gcnew Hashtable<String^, int>(100);

    // create dictionary with random keys and values to insert into the hashtable

    table->Insert("one", 1);
    table->Insert("two", 2);

    // print hashtable keys and values
    table->PrintKeyValuePairs();

    Console::ReadLine();
    return 0;
}
} 
```

这是它正在调用的 Hashtable 类：

```
#pragma once

#include "stdafx.h"
#include <iostream>

using namespace System;
using namespace System::Collections;
using namespace System::Collections::Generic;
using namespace System::Text;
using namespace std;

namespace HashTable
{
generic <typename T1, typename T2>
public ref class Hashtable
{

public: 
    // Property to monitor size of table
    int Size;

    // public members
    array<Dictionary<T1, T2>^>^ table;

public:
    Hashtable(int tableSize)
    {
        table = gcnew array<Dictionary<T1, T2>^>(tableSize);
    }

    void Insert(T1 key, T2 value)
    {
        Dictionary<T1, T2>^ newList;
        unsigned int slot = getHashValue(key, table->Length);
        if (table[slot] == nullptr)
        {
            newList = gcnew Dictionary<T1, T2>();
            newList->Add(key, (T2)value);
            table[slot] = newList;
            Size ++;
        }
        else 
        {
            if (!table[slot]->ContainsKey(key))
            {
                table[slot]->Add((T1)key, (T2)value);
            }

            else
                Console::WriteLine(L"Key " + key + " was not added to the HashTable: Duplicate keys are not permtted.");
        }
    }

    T2 GetValue(T1 key)
    { 
        int slot = getHashValue(key, table->Length);
        if (table[slot]->ContainsKey(key))
            return table[slot][key];
        else
            return (T2)"The item requested could not be found.";
    }

private:

    unsigned int getHashValue(T1 key, int m)
    {
        // convert string to arrayo of bytes
        array<Byte>^ byteArray = gcnew array<Byte>(key->ToString()->Length);
        int i = 0;
        for each ( char c in key->ToString()->ToCharArray(0, key->ToString()->Length))
        {
            byteArray[i] = (Byte)c;
            i++;
        }

        // get the unsigned int value of the bytes
        unsigned int byteTotal = 0;
        for (int i = 0; i < byteArray->Length; i++)
            byteTotal += byteArray[i];
        return byteTotal % m;
    }

    // method to retrieve a list of key value pairs in hashtable
public:
    void PrintKeyValuePairs()
    {
        for (int i = 0; i < table->Length; i++)
        {
            if(table[i] != nullptr)
            {
                for each(KeyValuePair<T1, T2> kvp in table[i])
                {
                    T1 key = kvp.Key;
                    T2 value = kvp.Value;
                    Console::WriteLine("Key = {0}, Value = {1}", key, value);
                }
            }
        }
    }
};
} 
```

添加了许多包含以尝试解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:41:55.980

请看一下[这个](http://msdn.microsoft.com/en-us/library/47ta3zst.aspx)，你的 main() 函数必须包含*本机*类型，我猜“经典”`int main(int argc, char* argv[])`会起作用。

# android - 将相机位图保存到存储中，并使用位图设置图像

> ID：15372591
> 
> 赞同：0
> 
> 时间：2013-03-12T21:33:35.350
> 
> 标签：android, imageview, android-camera

我知道如何拍照并将其设置为 ImageView 的基础知识。

```
photo = (Bitmap) data.getExtras().get("data");
imageView.setImageBitmap(photo); 
```

我想做的远不止这些。

我将它保存到 SD 卡上的文件夹中。我已经成功地做到了这一点：

```
// intent
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
startActivityForResult(intent, CAMERA_REQUEST); 
```

这是我的下一个问题：

不知道该怎么做：接下来我想做什么：下次我来 this`Activity`时，我想检查该图像是否存在并将其分配给 that `imageView`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:42:06.360

您必须使用某种持久性存储来引用文件以检查它是否存在。我只是将它作为字符串存储在首选项中并读取它，然后检查它是否存在等等。从`onCreate()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:43:30.073

最近几天，我在我的一个应用程序中遇到了这个问题。

我会在这里尝试解释一下我所做的事情。

1.  尝试将图片完整路径保存到存储区域或共享首选项。
2.  下次如果您调用您的活动，请检查图片是否已经存在以及是否可以使用它。
3.  在您的 xml 布局中准备一个具有 visibility="gone" 的 ImageView，如果点 (2.) 为真，那么您可以将可见性更改为可见并在视图中设置图像。
4.  如果点 (2.) 为假，则切换到相机视图 (SurfaceView) 以拍摄新照片

# r - ggplot2 分组图例

> ID：15372597
> 
> 赞同：3
> 
> 时间：2013-03-12T21:33:47.233
> 
> 标签：r, ggplot2

我有一个`trajectory_df`具有以下结构的数据框：

![桌子](../Images/82acffb45e78ea0a0e74577477d6c437.png)

该`uid`行有 6 个不同的可能值，每个值代表一个特定的用户。所以我想在同一个图上绘制 6 条线，我目前正在这样做：

```
ggplot(trajectory_df, aes(Month, Pagerank, colour=uid, group=uid)) + geom_line() + geom_point() + scale_x_discrete(breaks=month_ticks) 
```

这给了我这张照片：

![图表](../Images/3ac3d02b822c83f41762e557252b7567.png)

这正是我想要的，除了传说。我希望图例中有 6 个不同的条目，而不是丰富多彩的值范围。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T21:37:22.757

试试这个：

```
ggplot(trajectory_df, aes(Month, Pagerank, colour=factor(uid), group=uid)) + 
   geom_line() + 
   geom_point() + 
   scale_x_discrete(breaks=month_ticks) 
```

# c++ - 嵌入文件作为字符数组的编译器问题

> ID：15372603
> 
> 赞同：0
> 
> 时间：2013-03-12T21:34:14.117
> 
> 标签：c++, c, char, opencl

我正在尝试将文件（OpenCL 内核）嵌入为 char 数组，主要问题是它给我任何包含的行的错误`#`

例子：

```
char mykernel[] =
"stuff ---"
"#if(1)"
"    stuff"
"#else"
"    another stuff"
"#define ASD 15";

void* clh = clsopen(cp,mykernel,CLLD_NOW); 
```

所有这些事情都给我带来了严重的错误（编译器错误，好像它看不到它们）

编辑：分号是发布问题的错误。

错误如下：

```
#define ASD 15 
```

在整个代码中使用这个 ASD，得到像未声明的标识符这样的错误

采用`#if` `#else`

在中使用一些功能`#if`和相同的名称`#else`

得到错误，比如函数被声明了 2 次同名......等等

编辑2：

```
"#if(1)" //char number 26123: error: note: previous definition is here
"    inline functionA ...with output A"
"#else" //char number 28700: error: redefinition of functionA
"    inline functionA ...with output B" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:52:13.740

所有以 开头的行`#`也是开头没有任何前导空格的行。问题在于，在自然源文件中，每一行都将以`\n`编译器视为空格的结尾。添加`\n`到每一行的末尾。

# android - Android应用：背景拉伸

> ID：15372606
> 
> 赞同：1
> 
> 时间：2013-03-12T21:34:17.123
> 
> 标签：android, eclipse, background, scrollview

在我的日食中，当我同时设置一个滚动视图和一个背景图像时，我的背景图像会垂直拉伸。我希望它不要拉伸，而是在 ScrollView 中一直重复。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:42:23.283

在可绘制对象中创建一个 XML 文件：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/my_image" 
        android:tileMode="repeat" /> 
```

比你可以使用这个文件作为你的drawable，它会被重复

请注意，有一个与重复相关的错误（android 3.0 和以下版本），当在列表视图中使用时，请参阅[XML 可绘制位图 tileMode 错误？](https://stackoverflow.com/questions/7586209/xml-drawable-bitmap-tilemode-bug)

# actionscript-3 - 设备方向更改后垂直和水平中心属性不更新

> ID：15372612
> 
> 赞同：0
> 
> 时间：2013-03-12T21:34:48.767
> 
> 标签：actionscript-3, orientation, centering, flex4.6, flex-mobile

我有一个想要居中的按钮/图像。下面的代码在垂直模式下按预期工作：

```
pauseButton.source = pause; // embedded image
pauseButton.verticalCenter = 0;
pauseButton.horizontalCenter = 0;
pauseButton.addEventListener(MouseEvent.CLICK, playVideo); 
```

将方向设置为横向模式后，图像保持在同一位置，因此不再居中：

```
stage.setOrientation(StageOrientation.ROTATED_RIGHT); 
```

改变方向后再次设置verticalCenter/horizo​​ntalCenter 并没有什么不同。我怎样才能强迫它居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:38:59.803

我知道对于桌面酒吧，中心可以动态变换......我刚试过

```
for (var i:int = 0; i < 100 ; i++){ 
sq.x=stage.stageWidth / 2; 
sq.y=stage.stageHeight / 2; } 
```

它会随着窗口的大小动态地改变位置，没有延迟。我不确定把它放在一个循环中是否会对你有所帮助，但我只是想确保它会在我的最后准确更新。工作正常！

# python - 连接来自不同文件夹的fasta文件

> ID：15372613
> 
> 赞同：1
> 
> 时间：2013-03-12T21:34:50.170
> 
> 标签：python, loops, concatenation

我在不同的子文件夹中有大量 fasta 文件（这些只是文本文件）。我需要的是一种在目录中搜索具有相同名称的文件并将它们连接到具有输入文件名称的文件中的方法。我无法手动执行此操作，因为我有 10000 多个基因需要为此执行此操作。

到目前为止，我有以下 Python 代码查看其中一个目录，然后使用这些文件名搜索其他目录。这将返回一个列表，其中包含每个文件的完整路径。

```
 import os
    from os.path import join, abspath

    path = '/directoryforfilelist/'    #Directory for source list
    listing = os.listdir(path)

    for x in listing:
        for root, dirs, files in os.walk('/rootdirectorytosearch/'):
            if x in files:
            pathlist = abspath(join(root,x)) 
```

我卡住的地方是如何连接它返回的同名文件。此脚本的结果如下所示。

```
 /directory1/file1.fasta
    /directory2/file1.fasta
    /directory3/file1.fasta
    /directory1/file2.fasta
    /directory2/file2.fasta
    /directory3/file2.fasta 
```

在这种情况下，我需要最终结果是两个名为 file1.fasta 和 file2.fasta 的文件，其中包含来自每个相同命名文件的文本。

任何有关从这里去哪里的线索将不胜感激。虽然我在 Python 中完成了这部分工作，但完成工作对我来说很好。如果这很重要，这将在 Mac 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:39:23.200

对于列表中的每个文件，以附加模式分配目标文件，读取源文件的每一行并将其写入目标文件。

假设目标文件夹一开始是空的，并且不在 /rootdirectorytosearch 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:40:53.540

未经测试，但大致是我要做的：

```
from itertools import groupby
import os

def conc_by_name(names):
    for tail, group in groupby(names, key=os.path.split):
        with open(tail, 'w') as out:
           for name in group:
              with open(name) as f:
                  out.writelines(f) 
```

这将在当前文件夹中创建文件（`file1.fasta`在`file2.fasta`您的示例中）。

# perl - 避免正则表达式匹配变量被重用

> ID：15372614
> 
> 赞同：0
> 
> 时间：2013-03-12T21:34:56.493
> 
> 标签：perl

基本上，我正在遍历 html 文件并寻找几个正则表达式。它们匹配很好，但我不希望每个文件都包含匹配项，但是当循环运行时，每次迭代都包含相同的匹配项（尽管它不在该文件中）。我假设通过使用 $1 它在每次迭代中都保持不变。

我试过在每次真正的比赛后直接使用任意正则表达式来重置它，但这似乎不起作用。我从中得到这个想法的线程似乎有很多关于最佳实践和原始问题问题的争论等，所以我认为值得向我的代码寻求具体建议。它也可能写得不好：

```
# array of diff filenames
opendir(TDIR, "$folder/diff/$today") || die "can't opendir $today: $!";
@diffList = grep !/^\.\.?$/, readdir(TDIR);
closedir TDIR;

# List of diff files
print "List of Diff files:\n" . join("\n", @diffList) . "\n\n";

for($counter = 0; $counter < scalar(@diffList); $counter++) {
    # Open diff file, read in to string
    $filename = $diffList[$counter];
    open FILE, "<", "$folder/diff/$today/$filename";
    while(<FILE>)   {
        $lines .= $_;
    }
    close FILE or warn "$0: close today/$filename: $!";

    # Use regular expressions to extract the found differences
    if($lines =~ m/$plus1(.*?)$span/s) {
        $plus = $1;
        "a" =~ m/a/;
    } else {$plus = "0";}
    if($lines =~ m/$minus1(.*?)$span/s) {
        $minus = $1;
        "a" =~ m/.*/;
    } else {$minus = "0";}

    # If changes were found, send them to the database
    if($plus ne "0" && $minus ne "0") {
        # Do stuff
    }
    $plus = "0";
    $minus = "0";
} 
```

如果我在“do stuff”中放置一个打印件，它总是正确的，并且总是显示在其中一个文件中找到的相同的两个值。希望我已经很好地解释了我的情况。任何建议表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:45:04.037

可能是您的代码将新读取文件中的行附加到`$lines`. 您是否尝试在每次迭代后明确清除它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:02:48.703

已经回答了，但您也可以考虑使用不同的语法来读取文件。它可以明显更快，并帮助您避免这样的小错误。

只需添加这个来读取打开/关闭之间的文件：

```
local $/ = undef;
$lines = <FILE>; 
```

这将暂时取消设置行分隔符，以便一次读取整个文件。如果您需要读取同一范围内的另一个文件，只需将其包含在 { } 块中。

# angularjs - 角度输入限制为 1 个字符

> ID：15372616
> 
> 赞同：2
> 
> 时间：2013-03-12T21:34:59.643
> 
> 标签：angularjs

我想知道为什么在此示例中每次输入不能输入多个字符：

[http://jsfiddle.net/R3uY4/2/](http://jsfiddle.net/R3uY4/2/)

```
<div ng-app>
  <div ng-controller="ctrl">
     <table>
            <tr>
                <td ng-repeat="f in foo">
                    <input ng-model="foo[$index]" style="width:60px" ></input>
                </td>
            </tr>
        </table>
  </div>
</div> 
```

js：

```
function ctrl($scope) {
  $scope.foo = [];
    for (var i=0; i<5; i++) {
        $scope.foo.push('');
    }  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:58:39.867

您正在将模型绑定到原语。它不能那样工作。[此github issue](https://github.com/angular/angular.js/issues/1267)中的完整说明。此外，每次更改输入值时，您的 ng-repeat 都会刷新。这就是你失去焦点的原因。

始终绑定到对象：

HTML：

```
<td ng-repeat="f in foo">
  <input ng-model="f.value" style="width:60px" />
</td> 
```

控制器：

```
function ctrl($scope) {
  $scope.foo = [];
    for (var i=0; i<5; i++) {
        $scope.foo.push({value: ''});
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:52:53.927

如果您不介意使用 HTML5，您可以使用该`autofocus`属性。只需将其添加到`input`字段中。

```
<li ng-repeat="i in items">{{i.name}} <input ng-model="i.description" autofocus></li> 
```

这是[您的 jsFiddle 的一个分支](http://jsfiddle.net/brettdewoody/Ex3vk/)。

# linux - 输入文件没有被正确读取脚本 awk

> ID：15372619
> 
> 赞同：0
> 
> 时间：2013-03-12T21:35:03.947
> 
> 标签：linux, unix, scripting, awk

嗨，我有两个输入文件。

输入1.txt：

```
id above
id below
id still
id getting 
```

输入2.txt

```
id above
value above the sky

id below
value under the chair 
```

我正在尝试执行 awk 命令，但它显示为空。

```
 awk -f find.awk input1.txt input2.txt 
```

我知道我的 awk 有效，因为我输入了 2 个不同的 txt 文件，并且所有输出都是正确且可见的。

不同的 input2.txt 文件之间的区别是......

当我在 Windows 机器上使用记事本时，整个文件变成了一个字符串，而如果你使用任何 txt 编辑器，它会用单独的行格式化。

记事本上的示例 input2.txt。

```
 id above value above the sky id below value under the chair 
```

我不能只通过 id 重新解析这个输入，因为我的真实 txt 文件有更多数据......这是不一致的，所以我不能只搜索字符串或 reg 表达式。

查找.awk

```
 FNR==NR  { id[$0]; next }  
 $0 in id { f=1 }           
 f                          
 NF==0    { f=0 } 
```

以及为什么我的 awk 不起作用的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:23:33.537

在对输入文件运行 awk 之前，对输入文件运行“dos2unix”。男人dos2unix。

# sed - sed 命令在模式之后打印段落

> ID：15372620
> 
> 赞同：1
> 
> 时间：2013-03-12T21:35:04.987
> 
> 标签：sed, paragraphs

我有一个日志文件，其中数据条目如下： 每个条目以`time:` 现在我想只打印特定时间后的条目。例如，在 之后`time : 20130309235926`，我想打印所有记录，所以在我的情况下，它应该打印最后 2 条记录。

是否有执行此操作的 sed 命令？

```
time: 20130309235926
dn: 
changetype: modify
-
replace: modifiersname
modifiersname: 
 dc=
-
replace: modifytimestamp
modifytimestamp: 20130310045926Z
-

time: 20130309235959
dn:
changetype: modify
-
replace: modifiersname
modifiersname: 
 dc=
-
replace: modifytimestamp
modifytimestamp: 20130310045926Z
-

time: 20130308025010
dn: 
changetype: modify
-
replace: modifiersname
modifiersname: 
 dc=
-
replace: modifytimestamp
modifytimestamp: 20130310045926Z
- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:50:41.790

这取决于找到精确匹配的时间是否准确，因为进行算术运算`sed`很困难。例如，对于完全匹配，此命令使用`-n`switch 禁用自动打印并使用范围从与您的时间匹配的行开始打印，直到文件结束 ( `$`)：

```
sed -n '/time:[ ]*20130309235926/,$ p' infile 
```

* * *

**编辑**以修复先前的命令：

```
sed -n '

  ## When found a blank line between a line with your time and end of file,
  ## jump to label "a".
  /time:[ ]*20130309235926/,$ { 
    /^[ ]*$/ ba
  };

  ## Skip all lines until previous condition be true.
  b;

  ## Label "a".
  :a;

  ## Save all content from next entry until end of file.
  $! { 
    N; 
    ba 
  }; 

  ## Remove extra newline and print.
  s/^\n//; 
  p

' infile 
```

* * *

**编辑**以将上一个命令添加为单行：

```
sed -n '/time:[ ]*20130309235926/,$ { /^[ ]*$/ ba }; b; :a; $! { N; ba }; s/^\n//; p' infile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:56:39.193

我喜欢 perl 做段落-y 的事情：

```
perl -00 -ne '$t = (/time: (\d+)/)[0]; print if $t gt "20130309235926"' 
```

该`-00`标志在段落中提供输入（由空行分隔）

# android - 中文字符在 strings.xml 中未正确显示

> ID：15372622
> 
> 赞同：1
> 
> 时间：2013-03-12T21:35:13.977
> 
> 标签：android, eclipse, localization, character, chinese-locale

我已经创建了一个 android 应用程序，并且我的 strings.xml 有一个中文版本。我复制到新的 string.xml 文件中的汉字没有正确显示。当语言未正确呈现时，它们显示为您看到的“方形”字符。如何在我的应用程序中显示中文字符。

当我使用中文设置在模拟器中运行应用程序时，它可以正常显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:53:22.053

对于 Eclipse IDE。

在项目资源管理器 > 右键单击`string.xml`​​ > 属性 > 资源 > 文本文件编码。应该是 UTF-8。

如果不是，我建议通过 Notepad++ 将相关文件转换为 UTF-8，并更改洞 Eclipse 设置以支持/使用 UTF-8。

如果我没有记错更改 Eclipse 设置，请转到 Window > Preferences > General > Workspace > Text file Encoding > UTF-8

**编辑：** eclipse编码参考：http: [//www.chasingdaydreams.com/2010/04/using-eclipse-with-chinese-or-other-foreign-characters/](http://www.chasingdaydreams.com/2010/04/using-eclipse-with-chinese-or-other-foreign-characters/)

# javascript - 用于日期选择器的 jquery 时间选择器插件

> ID：15372627
> 
> 赞同：1
> 
> 时间：2013-03-12T21:35:38.717
> 
> 标签：javascript, jquery, datetimepicker, timepicker

我正在尝试使用 Time Picker 插件（[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)）实现 jQuery UI 日期选择器。

我将 js 和 css 分别作为 timpicker.js 和 picker.css 保存在与我的脚本相同的目录中。

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Datepicker - Select a Date Range</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<link rel="stylesheet" href="picker.css" />
<script src="timepicker.js"></script>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$('#from').datetimepicker();
</script>
</head>
<body>
<label for="from">From</label>
<input type="text" id="from" name="from" />
</body>
</html> 
```

Firebug 不断给我这些错误：

```
ReferenceError: jQuery is not defined
[Break On This Error]   

})(jQuery);

datetimepicker.js (line 1919)

TypeError: $(...).datetimepicker is not a function
[Break On This Error]   

$('#from').datetimepicker(); 
```

有没有其他人遇到过这个问题。我确定我错过了一些简单的东西，但我一直无法找到有同样问题的人。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T21:38:18.427

在加载 jQuery 之前加载 timepicker.js。您的页面正在尝试运行 timepicker.js，但对 jQuery 一无所知。重新排列你的脚本，如：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script src="timepicker.js"></script> 
```

# asp.net-mvc-3 - 作为字符串数组的字段名称列表 - LINQ 表达式

> ID：15372632
> 
> 赞同：0
> 
> 时间：2013-03-12T21:35:47.423
> 
> 标签：asp.net-mvc-3, linq, asp.net-mvc-4, linq-expressions, asp.net-mvc-validation

您好 MVC 和 LINQ 专家，

我有一个看起来像这样的模型：

```
 public class SomeClass : IValidatableObject
 {
    public string SomeString { get; set; }
    public string SomeString2 { get; set; }
    public int SomeInteger { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
       //... IF there is some error...THEN
       yield return new ValidationResult("Some Error Message.", GetFieldNames(() => new []{ this.SomeString }));
    }

 } 
```

如您所见，我正在调用 GetFieldNames，它接受一个表达式，并将表达式成员作为字符串数组返回给您。根据我最近阅读的一本书，将错误链接到字段的方法是将其作为字符串传递，如下所示：

```
 yield return new ValidationResult("Some Error Message.", new []{ "SomeString" })); 
```

但我想成为强类型，所以这是我写的方法：

```
 public static string[] GetFieldNames(Expression<Func<object[]>> exp)
    {
        //Build a string that will in the end look like this: field1,field2,field3
        //Then we split(',') it into an array and return that string array. 
        string fieldnames = "";

        MemberExpression body = exp.Body as MemberExpression;

        if (body == null)
        {   
            NewArrayExpression ubody = (NewArrayExpression)exp.Body;
            foreach(MemberExpression exp2 in ubody.Expressions)
            {
                fieldnames += exp2.Member.Name + ",";
            }
            fieldnames = fieldnames.TrimEnd(',');

        }
        if(fieldnames.Length > 0)
            return fieldnames.Split(',');
        else
            return new string[]{};
    } 
```

当前使用情况：

`GetFieldNames(() => new[] { this.SomeString , this.SomeString2 });`

输出：

`{ "SomeString" , "SomeString2" }`

这工作正常。

问题是，如果我按如下方式使用它，它会给我一个错误（编译时）：

`GetFieldNames(() => new[] { this.SomeString , this.SomeInteger });`

错误： `No best type found for implicitly-typed array`

我想要的输出：

`{ "SomeString" , "SomeInteger" }`

我不能传入对象数组，因为 int 不是复杂类型。

如何使用`int`and向函数传递表达式数组`string`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:57:07.090

您可以尝试传递一个对象数组（这是您的表达式所期望的），而不是尝试使用数组初始值设定项语法：

```
GetFieldNames(() => new object[] { this.SomeString, this.SomeInteger }); 
```

这允许您传递任意对象类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:17:43.320

在 Darin Dimitri 的帮助下（传递 a`new object[]`而不是`new []` 以下代码的想法将确保您`IValidatableObject`现在可以进行强类型化，而不仅仅是一个字符串数组。

```
 public static string[] GetFieldNames(Expression<Func<object[]>> exp)
    {
        string fieldnames = "";

        MemberExpression body = exp.Body as MemberExpression;

        if (body == null)
        {
            NewArrayExpression ubody = (NewArrayExpression)exp.Body;
            foreach (Expression exp2 in ubody.Expressions)
            {
                if (exp2 is MemberExpression) {
                    fieldnames += ((MemberExpression)exp2).Member.Name + ",";
                }
                else {
                    var op = ((UnaryExpression)exp2).Operand;
                    fieldnames += ((MemberExpression)op).Member.Name + ",";
                } 
            }
            fieldnames = fieldnames.TrimEnd(',');

        }

        if(fieldnames.Length > 0)
            return fieldnames.Split(',');
        else
            return new string[]{};
    } 
```

用法：

`GetFieldNames(() => new object[] { this.SomeString, this.SomeInteger }));`

MVC 验证的用法：

`yield return new ValidationResult("Some Error.", GetFieldNames(() => new object[] { this.SomeString, this.SomeInteger }));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:02:46.143

您可以定义一个接口 IFieldName 以在您的列表中使用，然后在不同的类（int、error、string 等）中为您处理中出现的实际类型实现它。

这大致相当于定义一个对象数组，但恢复了类型安全。

# php - codeigniter 下拉选择的问题

> ID：15372633
> 
> 赞同：0
> 
> 时间：2013-03-12T21:35:52.317
> 
> 标签：php, codeigniter, drop-down-menu

```
<?php
    $options = array();
    $options[0] = "Kies het kampioenschap";
    foreach ($kampioenschappen as $kampioenschap) {
        $options[$kampioenschap->kampioenschapsId] = $kampioenschap->naam;
    }
    $js = 'id="kampioenschap" style="width: 600px';
    echo form_dropdown('kampioenschap', $options, '0', $js) . "\n";
?> 
```

我想创建一个下拉表单，以便用户可以选择他想要查看的锦标赛。

这一切都有效，但我在显示 $options 数组中的第一个值时遇到了问题。在 CodeIgniter 文档中，他们说：

```
echo form_dropdown('name', $options, 'selectedvalue', $js); 
```

如果我在浏览器中查看源输出，这就是我所看到的：

```
 <select name="kampioenschap" id="kampioenschap" style="width: 600px>
    <option value="0" selected="selected">Kies het kampioenschap</option>
    <option value="2">Nationaal kampioenschap</option>
    <option value="3">Waals kampioenschap</option>
    <option value="5">Vlaams kampioenschap</option>
    </select> 
```

对我来说，这看起来像是有效的 xhtml 代码。但是当我用 Firebug 或 DragonFly 打开页面时，我得到了这个：

```
<select id="kampioenschap" 
selected="selected" 0"="" style="width:    600px> 
```

这对我来说毫无意义，我的应用程序中有其他下拉菜单可以正常工作。

有人可以指出我犯的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:42:28.823

你忘了这里的最后一句话：

```
$js = 'id="kampioenschap" style="width: 600px'; 
```

用这个替换它：

```
$js = 'id="kampioenschap" style="width: 600px"'; 
```

# html - IE风格完全搞砸了

> ID：15372635
> 
> 赞同：0
> 
> 时间：2013-03-12T21:35:56.247
> 
> 标签：html, css, internet-explorer, layout

我知道 IE 有时很难像 css 等样式一样。但现在我遇到了一个问题！我什至不知道从哪里开始。

这是铬。它的完美：（Firefox 完全一样）

![铬完美的喜悦](../Images/adc1349d5b90777f7a97417ee404623c.png)

看一下IE：

![IE一团糟](../Images/338dd583e8e9746f29cd3bab64f0db11.png)

最重要的是。在 IE 中我什至无法登录，但我认为那是另一个问题。

有没有人有提示或什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:42:31.397

添加`<!DOCTYPE html>`到文档的顶部。确保在此之前没有任何内容。

如果 IE 没有找到文档类型，则默认为 Quirks 模式，这相当于 Internet Explorer 的旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:11:14.163

我解决了我的问题。我验证了 HTML 并且有一些无效的标签。太愚蠢了，我没有早点这样做。

感谢所有的答案。我仍然有登录问题，但我稍后会处理。

# c++ - 为类中的动态数组重载 cout 运算符

> ID：15372636
> 
> 赞同：0
> 
> 时间：2013-03-12T21:35:56.367
> 
> 标签：c++, class, matrix, dynamic-arrays

我正在尝试为类中的动态数组重载运算`<<`符`cout`。我的类和成员函数如下：

```
class Matrix{
private:
    int rows;
    int columns;
    double* matrix;
public:
    Matrix();
    explicit Matrix(int N);
    Matrix(int M, int N);
    void setValue(int M, int N, double value);
    double getValue(int M, int N);
    bool isValid() const;
    int getRows();
    int getColumns();
    ~Matrix();
    friend ostream& operator<<(ostream &out, const Matrix&matrix1); 
```

};

```
 Matrix::Matrix(){
    matrix = NULL;
}

Matrix::Matrix(int N){
    matrix = new double[N * N];
    rows = N;
    columns = N;

    for(int i = 0; i < N; i++){
        for(int j = 0; j < N; j++){
            if(i==j)
                matrix[i * N + j] = 1;
            else
                matrix[i * N + j] = 0;
        }
    }
}

Matrix::Matrix(int M, int N){
    matrix = new double[M * N];
    rows = M;
    columns = N;

    for(int i = 0; i < M; i++){
        for(int j = 0; j < N; j++)
            matrix[i * N + j] =  0;
    }
}

Matrix::~Matrix(){
    delete [] matrix;
}

void Matrix::setValue(int M, int N, double value){
    matrix[M * columns + N] = value;
}

double Matrix::getValue(int M, int N){
    return matrix[M * columns + N];
}

bool Matrix::isValid() const{
    if(matrix==NULL)
        return false;
    else
        return true;
}

int Matrix::getRows(){
    return rows;
}

int Matrix::getColumns(){
    return columns;
} 
```

我尝试按如下方式实现 << 运算符：

```
ostream& operator<<(ostream &out, const Matrix&matrix1){
Matrix mat1;
int C = mat1.getColumns();
int R = mat1.getRows();

for(int i = 0; i < R; i++){
    for(int j = 0; j < C; j++)
        out << mat1.getValue(i,j) << "\t";
    out << endl;
}
return out; 
```

}

并从函数中调用它：

```
void test(){
Matrix mat1(3,4);
cout << mat1 << endl; 
```

}

但这根本不打印任何东西。似乎重载函数没有得到 and 的任何值`C`，`R`但我可能错了。有人有什么想法吗？

假设在表单上打印动态矩阵

```
a11     a12     a13    . . .
a21     a22     a23    . . .
.        .       .     . . .
.        .       .     . . .
.        .       .     . . . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:37:32.787

您需要打印`matrix1`. 您正在创建一个本地空矩阵`mat1`并打印其内容。

```
ostream& operator<<(ostream &out, const Matrix& matrix1) 
{
  int C = matrix1.getColumns();
  int R = matrix1.getRows();

  for(int i = 0; i < R; i++){
    for(int j = 0; j < C; j++)
        out << matrix1.getValue(i,j) << "\t";
    out << endl;
  }
  return out;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:37:52.653

你打印的是空的`mat1`，没有给出`matrix1`。

```
ostream& operator<<(ostream &out, const Matrix& matrix1)
{
    //Matrix mat1;   // <- Comment ythis
    int C = matrix1.getColumns(); // <<- matrix1
    int R = matrix1.getRows(); // <<- matrix1

    for (int i = 0; i < R; i++)
    {
        for (int j = 0; j < C; j++)
            out << matrix1.getValue(i, j) << "\t"; // <<- matrix1
        out << endl;
    }
    return out;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T21:38:05.157

我看对了吗， Matrix1 是 operator<< 的参数，但您正在创建一个新的 mat1 并输出它？

# nullpointerexception - android asynctaskloader上的空指针异常

> ID：15372637
> 
> 赞同：0
> 
> 时间：2013-03-12T21:36:00.747
> 
> 标签：nullpointerexception, asynctaskloader

我正在尝试做一个 twitter android 应用程序。我仍在处理登录。所以我在朋友建议我使用 asynctaskloader 之后使用它。我相信我在这一行得到了一个空指针异常：

```
this.consumer = (OAuthConsumer) new getCommonsHttpOAuthConsumer(context); 
```

这是我的 asynctaskloader 类：

```
class getCommonsHttpOAuthConsumer extends AsyncTaskLoader{

public getCommonsHttpOAuthConsumer(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

@Override
public OAuthConsumer loadInBackground() {
    // TODO Auto-generated method stub

    return new CommonsHttpOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
}

} 
```

我究竟做错了什么？你们需要查看更多代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:57:48.693

您没有正确使用加载器类。

您需要使用以下行调用 LoaderManager：

```
 getLoaderManager().initLoader(ID_FOR_THIS_LOADER, DATA_BUNDLE, CALLBACK); 
```

如果你在一个 Fragment 中你需要在开头添加 getActivity()，如果你使用的是 android.support.v4.jar，你将调用 getSupportLoaderManager()。

将此行放在 onCreate 或 onResume 方法中。它只会通知您的活动您要启动新的加载程序。

之后，您需要实现通知您的加载程序已创建/完成的回调。此回调由您指定为第三个参数 (CALLBACK) 的对象实现。它可以是一个活动，一个片段......你会在网上找到语法。

这是它的样子：

```
 // Callback called by your Activity
    @Override
    public Loader<OAuthConsumer> onCreateLoader(int id, Bundle arg1) {
        loader = new getCommonsHttpOAuthConsumer();
        return loader;
            // After this method you're going in loadInBackground()
    }

    @Override
    public void onLoadFinished(Loader<OAuthConsumer> loader, OAuthConsumer pl) {
           // After loadInBackground() you arrive here, with your new object OAuthConsumer
           this.consumer = pl;
    } 
```

它应该像这样工作，希望它有帮助！

# php - 添加购物车错误以防止进入结帐

> ID：15372639
> 
> 赞同：0
> 
> 时间：2013-03-12T21:36:02.590
> 
> 标签：php, magento, shopping-cart, checkout

我一直在努力创建一个编辑订单系统，当订单低于给定状态时，客户可以编辑订单

现在我通过添加一个类似重新订购的链接来完成所有工作，该链接与重新订购完全相同，但会创建一个会话来识别您正在编辑订单，为了对缺货产品执行此操作，我必须打开缺货订单

但是我发现了一个小故障，如果客户要在购物车中添加 5 顶帽子并注销，如果他们回来时商品的库存数量现在是 0，他们仍然可以进入购物车，这自然是因为延期交货启用。

我已经制作了一个 CartController 来获取购物车的添加/更新，并手动检查库存是否少于购物车中的库存，但是如果客户在库存充足时拥有该物品，则在它现在用完时离开并返回库存，他们绕过这些检查

一所大学提出的一个建议是，我们可以缩短注册客户的购物车会话的生命周期，虽然我们可以这样做，但在销售期间存在更多问题

最初，在开启延期交货之前，如果发生同样的情况，“继续结帐”按钮将丢失，您会收到一条错误消息

现在我已经尝试修复一个新的 IndexController 并使用`$this->_getSession()->addError('Some products in your cart have gone out of stock');`，但我没有得到相同的结果

那么我如何创建一条错误消息，以防止客户在修好购物车之前进入结帐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:52:31.300

我建议你制作一个专门的页面，我们称之为edit_cart。当您重定向到结帐时，请检查所有产品并在 magento 中验证它们的数量。将他们推送到 edit_cart 并让他们从购物车中删除缺货产品。在此之后将他们重定向到结帐。

# ruby - Ruby <<（双小于）与实例变量

> ID：15372642
> 
> 赞同：5
> 
> 时间：2013-03-12T21:36:10.620
> 
> 标签：ruby

我不确定这是如何有效的代码：

```
class Library
  def initialize(games)
    @games = games
  end

  def add_game(game)
    games << game
  end

  def games()
    @games
  end
end

games = ['WoW','SC2','D3']
lib = Library.new(games)
puts lib.games
lib.add_game('Titan')
puts lib.games 
```

这将打印出：

魔兽世界 SC2 D3 泰坦

我认为它应该打印出来

魔兽世界 SC2 D3

add_game 方法不使用实例变量。作为 Ruby 的新手，我不明白它是如何工作的。不应该是：

```
def add_games(game)
  @games << game
end 
```

我正在从教程中阅读此内容，但我无法找到有关 << 如何专门用于实例变量的任何信息。我认为在处理要“附加到数组”的数组时，“<<”只是重载了。这实际上是在做单例类的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T21:41:21.957

这段代码有点混乱。该行：

```
games << game 
```

实际上是调用方法`games`，它返回`@games`。然后对该`<<`结果调用该方法。Ruby 解析器中有一些语法糖可以将`<<`运算符转换为对左操作数的方法调用，并且在此之前对左操作数进行求值。

**编辑更清楚：**

该行可以这样写：

```
(games).<< game 
```

或这个：

```
(self.games).<< game 
```

或者：

```
(self.games) << game 
```

所有这些都执行该`games`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:57:42.870

它使用类实例变量，看看你的代码：

```
class Library
  def initialize(manygames)
    @games = manygames
  end

  def add_game(game)
    imlookingforclassinstancevariable << game
  end

  def imlookingforclassinstancevariable
    @games #i'm the final storage of your array
  end
end
games = ['WoW','SC2','D3']
lib = Library.new(games)
puts lib.imlookingforclassinstancevariable
lib.add_game('Titan')
puts lib.imlookingforclassinstancevariable 
```

# file - awk 在写入时使用 getline 从文件中读取数据

> ID：15372646
> 
> 赞同：1
> 
> 时间：2013-03-12T21:36:20.837
> 
> 标签：file, awk, parallel-processing, getline

我有一个运行两个命令的脚本。第一个命令是将数据写入临时文件。第二个命令是管道到 awk，而第一个命令在后台运行。在第二个命令中，awk 需要从临时文件中读取数据，但它解析自己的数据的速度比将数据写入临时文件的速度要快。

这是一个例子：

```
#!/bin/bash

command1 > /tmp/data.txt &
# command1 takes several minutes to run, so start command 2 while it runs in the background
command2 | awk '
    /SEARCH/ {
        #Matched input so pull next line from temp file
        getline temp_line < "/tmp/data.txt"
    }
' 
```

这行得通，除非 awk 如此快地解析来自 command2 的数据，以至于 command1 跟不上它。即 awk 在 command1 完成写入之前从 /tmp/data.txt 获取 EOF。

我还尝试在 getline 周围进行一些检查，例如：

```
while ((getline temp_line < "/tmp/data.txt") < 0) {
    system("sleep 1") # let command1 write more to the temp file
}
# Keep processing now that we have read the next line 
```

但我认为一旦它在临时文件中遇到 EOF，它就会停止尝试从中读取。或类似的东西。

只要 command1 写入临时文件的速度快于 awk 尝试从中读取的速度，整个脚本就可以工作。如果我在两个命令之间放置一个 sleep 10 命令，那么临时文件会构建足够的缓冲区，并且脚本会生成我需要的输出。但是我可能正在解析比我测试过的文件大得多的文件，或者命令可能在不同的系统上以不同的速度运行，等等，所以我想要一个安全机制来等待文件，直到数据被写入它.

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:18:17.833

我认为您需要在迭代之间关闭文件并从头开始再次将其读取到您之前读取过的位置，就像这样（未经测试）；

```
sleepTime = 0
while ((getline temp_line < "/tmp/data.txt") <= 0) {
    close("/tmp/data.txt")
    system("sleep " ++sleepTime) # let command1 write more to the temp file
    numLines = 0
    while (++numLines < prevLines) {
        if ( (getline temp_line < "/tmp/data.txt") <= 0 ) {
             print "Aaargghhh, my file is gone!" | "cat>&2"
             exit
        }
    }
}
++prevLines 
```

请注意，我内置了一个变量“sleepTime”，以使您的命令每次通过循环都睡得更久，因此如果您的 tmp 文件需要很长时间才能填满您的第二个命令，则每次迭代都会等待更长的时间。随心所欲地使用或不使用。

在带有 system() 命令的嵌套循环中使用 getline 似乎有点笨拙且容易出错 - 我不禁想到可能有更好的方法，但我不知道我脑子里想的是什么。

# java - android拼写检查器 - 可以改进吗？

> ID：15372648
> 
> 赞同：1
> 
> 时间：2013-03-12T21:36:32.687
> 
> 标签：java, android, string, spell-checking, prediction

我一直在查看 sdk 示例中的 android 拼写检查器示例。hellospellchecker 正在工作，但似乎完全没用。

大多数字符串不返回任何建议，而其他字符串则无济于事。

例如 "tihs" 返回 1 个建议 "this" "helo" 返回 3 个建议 "he'll" "help "believe" "tabble" 不返回任何建议

SampleSpellChecker 示例似乎完全没有做任何事情。

有没有办法让检查器变得更好？还有什么办法可以提供拼写检查器（我基本上想要输入一个单词时返回的可能单词列表）？

我已经看到拼写检查器框架提供的功能与在 Android 手机上发送文本时使用的相同，但它的工作效果几乎没有。

[http://developer.android.com/guide/topics/text/spell-checker-framework.html](http://developer.android.com/guide/topics/text/spell-checker-framework.html)描述了框架，但我觉得它不是很有帮助而且很难理解

整天都在这，任何帮助都非常感谢

# php - 获取mysql查询中的当前url

> ID：15372649
> 
> 赞同：0
> 
> 时间：2013-03-12T21:36:42.820
> 
> 标签：php, mysql

如何在下面的 mysql 查询中获取完整的当前 URL，无论是 https 还是 https ？

```
AND `url` = 'http://.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];' 
```

由于上述部分不起作用

完整的字符串，我想在末尾加上 AND：

```
$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "customer_online WHERE `customer_id` != '0' AND date_added > DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 1 HOUR) "); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T21:40:50.587

```
public function getRegisteredUsersOnline(){ 
 $url = "http".(!empty($_SERVER['HTTPS'])?"s":"")."//".
        $_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];

   $query = $this->db->prepare("SELECT COUNT(*) as `num` FROM " . DB_PREFIX . "customer_online WHERE customer_id != '0' AND `date_added` > DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 1 HOUR) 
   AND `url` = ?");
   $query->execute( array( $url ) );
   $count = $query->fetch(2);
   return $count['num'];

} 
```

# unix - Unix删除重复，排序并显示最大计数

> ID：15372653
> 
> 赞同：-4
> 
> 时间：2013-03-12T21:36:48.047
> 
> 标签：unix

```
3/12/2013 12:00 639 Count
3/12/2013 12:06 693 Count
3/12/2013 12:12 636 Count
3/12/2013 12:18 649 Count
3/12/2013 12:24 658 Count
3/12/2013 12:30 926 Count
3/12/2013 12:36 721 Count
3/12/2013 12:42 797 Count
3/12/2013 12:48 717 Count
3/12/2013 12:00 639 Count
3/12/2013 12:06 700 Count
3/12/2013 12:12 636 Count
3/12/2013 12:18 649 Count
3/12/2013 12:24 658 Count
3/12/2013 12:30 726 Count
3/12/2013 12:36 721 Count
3/12/2013 12:42 850 Count
3/12/2013 12:48 900 Count
3/12/2013 12:00 639 Count
3/12/2013 12:06 693 Count
3/12/2013 12:12 636 Count
3/12/2013 12:18 649 Count
3/12/2013 12:24 658 Count
3/12/2013 12:30 926 Count
3/12/2013 12:36 721 Count
3/12/2013 12:42 797 Count
3/12/2013 12:48 950 Count 
```

输出应如下所示：

```
3/12/2013 12:00 639 Count
3/12/2013 12:12 636 Count
3/12/2013 12:18 649 Count
3/12/2013 12:24 658 Count
3/12/2013 12:30 926 Count
3/12/2013 12:36 721 Count
3/12/2013 12:06 700 Count
3/12/2013 12:30 726 Count
3/12/2013 12:42 850 Count
3/12/2013 12:48 900 Count 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:57:38.273

尝试这样做：

```
sort -u -n -k 3 file.txt 
```

## 笔记

*   `-u`代表*独特的*
*   `-n`代表*数字排序*
*   `-k 3`代表*排序第三列*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:55:34.260

如果此数据在 file 中`foo`，并且您有 GNU `sort`，则可以执行以下操作：

```
sort -n -k 3 foo | uniq 
```

这将对第三个字段 ( ) 进行数字排序 ( `-n`)，升序（默认`-k 3`）。然后整个事情通过管道`uniq`删除重复的行。

**编辑：添加了 uniq。**

# java - @UniqueConstraint 和 @Column(unique = true) 在休眠注释中

> ID：15372654
> 
> 赞同：118
> 
> 时间：2013-03-12T21:36:49.730
> 
> 标签：java, hibernate, hibernate-annotations

**@UniqueConstraint**和**@Column(unique = true)**有什么区别？

例如：

```
@Table(
   name = "product_serial_group_mask", 
   uniqueConstraints = {@UniqueConstraint(columnNames = {"mask", "group"})}
) 
```

和

```
@Column(unique = true)
@ManyToOne(optional = false, fetch = FetchType.EAGER)
private ProductSerialMask mask;

@Column(unique = true)
@ManyToOne(optional = false, fetch = FetchType.EAGER)
private Group group; 
```

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2016-04-29T18:23:59.593

如前所述，当它只有一个字段时，它是`@Column(unique = true)`一种快捷方式。`UniqueConstraint`

从您给出的示例中，两者之间存在巨大差异。

```
@Column(unique = true)
@ManyToOne(optional = false, fetch = FetchType.EAGER)
private ProductSerialMask mask;

@Column(unique = true)
@ManyToOne(optional = false, fetch = FetchType.EAGER)
private Group group; 
```

此代码意味着两者`mask`和`group`都必须是唯一的，但要分开。这意味着，例如，如果您有一条带有**mask.id = 1**的记录并尝试插入另一条带有**mask.id = 1**的记录，您将收到错误，因为该列应该具有唯一值。这同样适用于团体。

另一方面，

```
@Table(
   name = "product_serial_group_mask", 
   uniqueConstraints = {@UniqueConstraint(columnNames = {"mask", "group"})}
) 
```

意味着 mask + group 组合的值应该是唯一的。这意味着您可以拥有例如具有**mask.id = 1**和**group.id = 1**的记录，如果您尝试插入另一个具有**mask.id = 1**和**group.id = 2**的记录，它将被插入成功，而在第一种情况下它不会。

如果您希望掩码和组分别是唯一的并且在类级别是唯一的，则必须编写如下代码：

```
@Table(
        name = "product_serial_group_mask",
        uniqueConstraints = {
                @UniqueConstraint(columnNames = "mask"),
                @UniqueConstraint(columnNames = "group")
        }
) 
```

这与第一个代码块具有相同的效果。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-12T21:39:19.120

来自 Java EE 文档：

> ```
> public abstract boolean unique 
> ```
> 
> （可选）该属性是否是唯一键。这是在表级别使用 UniqueConstraint 注释的快捷方式，当唯一键约束只有一个字段时很有用。除了主键映射所需的任何约束以及在表级别指定的约束之外，此约束也适用。

见[文档](http://docs.oracle.com/javaee/5/api/javax/persistence/Column.html#unique%28%29)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-12-03T17:46:28.820

除了波阿斯的回答....

`@UniqueConstraint`允许您**命名约束**，同时`@Column(unique = true)`生成一个随机名称（例如`UK_3u5h7y36qqa13y3mauc5xxayq`）。

有时，了解约束与哪个表相关联会很有帮助。例如：

```
@Table(
   name = "product_serial_group_mask", 
   uniqueConstraints = {
      @UniqueConstraint(
          columnNames = {"mask", "group"},
          name="uk_product_serial_group_mask"
      )
   }
) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-27T20:05:37.567

除了@Boaz 和@vegemite4me 的答案......

通过实现`ImplicitNamingStrategy`，您可以创建自动命名约束的规则。请注意，您`metadataBuilder`在 Hibernate 初始化期间将命名策略添加到：

```
metadataBuilder.applyImplicitNamingStrategy(new MyImplicitNamingStrategy()); 
```

它适用于`@UniqueConstraint`，但不适用于`@Column(unique = true)`，它总是生成一个随机名称（例如 UK_3u5h7y36qqa13y3mauc5xxayq）。

有一个错误报告来解决这个问题，所以**如果可以的话，请在那里投票以实现这个。**这里： [https ://hibernate.atlassian.net/browse/HHH-11586](https://hibernate.atlassian.net/browse/HHH-11586)

谢谢。

# map - 在 pig map 中查找变量键

> ID：15372657
> 
> 赞同：1
> 
> 时间：2013-03-12T21:36:57.367
> 
> 标签：map, apache-pig

我正在尝试使用 pig 将文本分解为小写单词，然后在地图中查找每个单词。这是我在 map.txt 中的示例地图（只有 1 行长）：

```
[this#1.9,is#2.5my#3.3,vocabulary#4.1] 
```

我这样加载：

```
M = LOAD 'mapping.txt' USING PigStorage AS (mp: map[float]); 
```

效果很好。然后我执行以下操作来加载文本并将其分解为小写单词：

```
LINES = LOAD 'test.txt' USING TextLoader() AS (line:chararray);
TOKENS = FOREACH LINES GENERATE FLATTEN(TOKENIZE(LOWER(line))) as (word:chararray); 
```

现在，我想做这样的事情：

```
RESULTS = FOREACH TOKENS GENERATE M.mp#word; 
```

因此，如果我有像“这是我的词汇表”这样的行，我会得到以下输出： 1 3 3 4 ，但我不断收到各种错误。如何在地图中查找变量值？

我看过[如何在 Apache Pig 中使用地图数据类型？](https://stackoverflow.com/questions/4069589/how-can-i-use-the-map-datatype-in-apache-pig)和[http://pig.apache.org/docs/r0.10.0/basic.html#map-schema](http://pig.apache.org/docs/r0.10.0/basic.html#map-schema)，但这些仅在我在地图中查找*固定*值时才有帮助，例如 M.mp#'this '，这不是我想在这里做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:58:35.583

您还可以 FLATTEN M 然后根据 Token/word JOIN M 和 LINES（您可以在 M 上进行“复制”连接，以便将其复制到每个映射器

# facebook - 申请权限

> ID：15372659
> 
> 赞同：1
> 
> 时间：2013-03-12T21:36:59.970
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我设置`User & Friend Permissions`了我的应用程序，以在网站上获取用户电子邮件。当我点击时我得到这个信息`Preview Login Dialog`：

> 这个应用程序将收到：
> 
> ```
> Your basic info
> Your email address (xyz@xyz.com)
> Your birthday
> Your relationship details
> Your photos 
> ```

当我尝试登录我的网站时，应用程序只需要以下信息：

> 这个应用程序将收到：
> 
> ```
> Your basic info 
> ```

为什么？为什么主应用没有和预览一样的权限？

问候

编辑：

我正在使用本教程中的 Auth：[http](http://www.asp.net/mvc/tutorials/mvc-4/using-oauth-providers-with-mvc) ://www.asp.net/mvc/tutorials/mvc-4/using-oauth-providers-with-mvc - 我的项目中的代码没有改变。
老实说，我不想改变授权方式，因为我也想提供 Twitter 登录，这个机制对我来说是完美的。
我只想为 Facebook 添加“scope=email,publish_stream”。

我发现，当我的网站将我重定向到 facebook 应用程序 ( `&scope=email,publish_stream`) 时手动输入此查询时，一切正常。是否有任何解决方案可以在后台代码上执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:56:21.850

> 应用中心的应用详情页面显示新用户所需的权限。它可以被视为此功能的登录对话框版本，使新用户可以轻松地直接从应用中心安装您的应用。您可以在“设置”>“权限”选项卡中配置应用所需的权限集。

*来源：[https ://developers.facebook.com/docs/guides/appcenter/#authorization](https://developers.facebook.com/docs/guides/appcenter/#authorization)*

因此，这些权限设置仅适用于您在 App Center 中有一个要配置的应用程序，在这种情况下，它有助于：

*   显示在用户决定使用应用程序*之前*将询问用户的权限，
*   避免任何额外的登录对话框。

因为您的应用程序（我猜）没有出现在应用程序中心中，所以您必须使用通常的方式请求权限：从代码中。为此，请阅读：[如何通过 Facebook C# SDK 使用用户权限](https://stackoverflow.com/questions/10690067/how-to-use-user-permissions-with-facebook-c-sharp-sdk)

**编辑：** 暂时忘记应用中心。这是您应该做的最后一步。应用中心只收集伟大和著名的应用程序，这些应用程序都可以完美运行，Facebook 员工需要接受：

> 并非所有应用都会出现在应用中心，我们保留删除不符合高质量标准的应用的权利。创建应用详细信息页面后，我们将对其和您的应用进行审核，以确保其符合我们的资格、提交和质量指南。

因此，要求您的应用出现在应用中心确实是您最不应该考虑的事情**。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:37:14.780

问题解决了！

如果您正在使用本教程：[http](http://www.asp.net/mvc/tutorials/mvc-4/using-oauth-providers-with-mvc)

://www.asp.net/mvc/tutorials/mvc-4/using-oauth-providers-with-mvc 在您的 `Package manager console` 此命令中插入`update-package DotNetOpenAuth.Core`

**现在您的应用程序将自动询问用户电子邮件- 你不必改变任何东西**。
在这里你会发现结果——`result.UserName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:03:14.730

Stéphane Bruckert 是对的，您在应用设置页面中添加的权限仅适用于用户通过应用中心访问您的网站时。

要在您的站点内请求许可，您必须`scope`在`Login URL`.

```
fb = new FacebookClient();

    var loginUrl = fb.GetLoginUrl(new
    {

        client_id = "app_id",

        redirect_uri = "http://www.example.com/Facebook.aspx",

        response_type = "code",

        scope = "email,publish_stream" // Add other permissions as needed

    });
Response.Redirect(loginUrl.AbsoluteUri); 
```

[这是使用Facebook C# SDK](http://www.thepcwizard.in/2013/02/working-with-facebook-c--sharp-sdk.html)的好教程。

对于评论中的问题，您可以在应用中心发布您的应用，方法是在应用详情页面填写所有详细信息，最后提交审核。

# objective-c - NSString 中的 NSDecimalNumber 不相等？

> ID：15372661
> 
> 赞同：0
> 
> 时间：2013-03-12T21:37:08.987
> 
> 标签：objective-c, xcode

我遇到了最奇怪的事情。

代码：

```
NSString *input = @"357835487953487345879345897345897345897534";
NSLog(@"%@", input);
NSDecimalNumber *number = [NSDecimalNumber decimalNumberWithString:input];
NSLog(@"%@", number); 
```

输出：

```
 357835487953487345879345897345897345897534
 357835487953487345879345897345897345890000 
```

所以数字不一样，我这与浮点数的准确性有关。那么我能做些什么来让它们相等呢？为什么用零替换最后几位数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:44:24.630

检查[NSDecimalNumber的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html)

> NSDecimalNumber 是 NSNumber 的不可变子类，它提供了一个面向对象的包装器，用于进行 base-10 算术。实例可以表示可以表示为尾数 x 10^exponent 的任何数字，其中尾数是最多 38 位长的十进制整数，指数是从 –128 到 127 的整数。

当我运行您的代码时，它们在第 38 位之前都是相同的：

357835487953487345879345897345897345897534 357835487953487345879345897345897345890000

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:44:41.440

因为 NSDecimal 数字的精度有限，所以它用零替换了数字的结尾……所有数字都是。所以在内部，

`357835487953487345879345897345897345897534`

存储为

`35783548795348734587934589734589734589 * 1E4`

*使用较短*的数字（即具有较少重要数字的数字）不会出现此问题。

从文档：

> NSDecimalNumber 是 NSNumber 的不可变子类，它提供了一个面向对象的包装器，用于进行 base-10 算术。实例可以表示可以表示为尾数 x 10^exponent 的任何数字，其中尾数是最多 38 位长的十进制整数，指数是从 –128 到 127 的整数。

简而言之，您可能需要其他存储解决方案来保存具有更多重要数字（非零的数字）的数字。

您可能想查找[任意精度的算术](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)。看看：[GMP](http://gmplib.org)。也许它可以帮助你。

# matlab - 分离然后堆叠 3D mat 文件

> ID：15372662
> 
> 赞同：0
> 
> 时间：2013-03-12T21:37:11.370
> 
> 标签：matlab, while-loop

所以我有大量需要堆叠的主要是 2D mat 文件，但是有些文件以 3d 格式保存，即它们是 1024*1024*2。我正在努力编写一个 while 循环，它将分离 3d 文件并堆叠它们，同时也堆叠普通的 2d 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:51:31.673

函数[ndims(matrix)](http://www.mathworks.com/help/matlab/ref/ndims.html)为您提供矩阵的维度，因此，对于 3 维维度，您可以执行以下操作：

```
if ndims(A)==3
   A=[A(:,:,1);A(:,:,2)] % stack the 2 layers of matrix A vertically
end 
```

# python - Python url 字符串匹配

> ID：15372665
> 
> 赞同：0
> 
> 时间：2013-03-12T21:37:15.960
> 
> 标签：python, string-matching, url-parsing

我的问题如下。我有一长串 URL，例如：

```
www.foo.com/davidbobmike1joe
www.foo.com/mikejoe2bobkarl
www.foo.com/joemikebob
www.foo.com/bobjoe 
```

我需要将该列表中的所有条目（URL）相互比较，提取这些 URL 的子域中的关键字（在本例中：david、joe、bob、mike、karl）并按频率排序。我一直在阅读有关 nltk 等几个库的信息。然而，这里的问题是没有空格来独立标记每个单词。关于如何完成工作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:41:09.220

# 概述

您可以使用此代码提取名称，传入 [david, bob, etc.] 列表：

[有没有一种简单的方法从python中的无空格句子生成一个可能的单词列表？](https://stackoverflow.com/questions/15364975/is-there-an-easy-way-generate-a-probable-list-of-words-from-an-unspaced-sentence/15367466#15367466)

然后用于`collections.Counter`获取频率。

# 编码

```
from Bio import trie
import string
from collections import Counter

def get_trie(words):
    tr = trie.trie()
    for word in words:
        tr[word] = len(word)
    return tr

def get_trie_word(tr, s):
    for end in reversed(range(len(s))):
        word = s[:end + 1]
        if tr.has_key(word): 
            return word, s[end + 1: ]
    return None, s

def get_trie_words(s):
    names = ['david', 'bob', 'karl', 'joe', 'mike']
    tr = get_trie(names)
    while s:
        word, s = get_trie_word(tr, s)
        yield word

def main(urls):
    d = Counter()
    for url in urls:
        url = "".join(a for a in url if a in string.lowercase)
        for word in get_trie_words(url):
            d[word] += 1
    return d

if __name__ == '__main__':
    urls = [
        "davidbobmike1joe",
        "mikejoe2bobkarl",
        "joemikebob",
        "bobjoe",
    ]
    print main(urls) 
```

# 结果

```
Counter({'bob': 4, 'joe': 4, 'mike': 3, 'karl': 1, 'david': 1}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:42:08.807

# 限制

如果您拒绝使用字典，您的算法将需要大量计算。除此之外，不可能将只出现一次的关键字（例如：“karl”）与糟糕的序列（例如：“e2bo”）区分开来。我的解决方案将尽最大努力，并且仅当您的 URL 列表多次包含关键字时才有效。

# 基本思想

我假设一个单词是至少 3 个字符的频繁出现的字符序列。这可以防止字母“o”成为最流行的单词。

基本思路如下。

*   计算所有 n 个字母序列并选择出现多次的一个。
*   剪切属于较大序列的所有序列。
*   按受欢迎程度对它们进行排序，您就有了一个接近解决问题的解决方案。（留给读者作为练习）

# 在代码中

```
import operator

sentences = ["davidbobmike1joe" , "mikejoe2bobkarl", "joemikebob", "bobjoe", "bobbyisawesome", "david", "bobbyjoe"];
dict = {}

def countWords(n):
    """Count all possible character sequences/words of length n occuring in all given sentences"""
    for sentence in sentences:
        countWordsSentence(sentence, n);

def countWordsSentence(sentence, n):
    """Count all possible character sequence/words of length n occuring in a sentence"""
    for i in range(0,len(sentence)-n+1):
        word = sentence[i:i+n]
        if word not in dict:
            dict[word] = 1;
        else:
            dict[word] = dict[word] +1;

def cropDictionary():
    """Removes all words that occur only once."""
    for key in dict.keys():
        if(dict[key]==1):
            dict.pop(key);

def removePartials(word):
    """Removes all the partial occurences of a given word from the dictionary."""
    for i in range(3,len(word)):
        for j in range(0,len(word)-i+1):
            for key in dict.keys():
               if key==word[j:j+i] and dict[key]==dict[word]:
                   dict.pop(key);

def removeAllPartials():
    """Removes all partial words in the dictionary"""
    for word in dict.keys():
        removePartials(word);

for i in range(3,max(map(lambda x: len(x), sentences))):
    countWords(i);
    cropDictionary();
    removeAllPartials();

print dict; 
```

# 输出

```
>>> print dict;
{'mike': 3, 'bobby': 2, 'david': 2, 'joe': 5, 'bob': 6} 
```

# 对读者的一些挑战

*   在打印之前按值对字典进行排序。（[按值对 Python 字典进行排序](https://stackoverflow.com/questions/613183/python-sort-a-dictionary-by-value)）
*   在这个例子中，“bob”出现了 6 次，其中 2 次是“bobby”的部分词。确定这是否有问题并在必要时进行修复。
*   考虑大小写。

# windows - 在 TideSDK 中安装 python 模块

> ID：15372667
> 
> 赞同：3
> 
> 时间：2013-03-12T21:37:19.497
> 
> 标签：windows, tidesdk

我正在尝试为 TideSDK 将外部依赖项安装到 Python 中。我正在尝试安装的当前模块是[redis-py](https://github.com/andymccurdy/redis-py)。

要安装它，我尝试了以下步骤：

1.  以常规管理模式打开命令提示符
2.  切换目录到下载的redis-py模块
3.  提供 TideSDK 使用的 python 模块的路径，然后从源命令提示符进行标准编译和安装。我使用的命令：`"C:\Program Files (x8 6)\TideSDK Developer\modules\python\1.3.1-beta\python.exe" setup.py install`

设置看起来很有希望。安装程序确认安装了带有 egg 文件的 redis-py 模块，并且安装程序没有错误地退出，并且对目录进行了目视检查。

那么给了什么？正确的文件安装在`Lib/site-packages`. TideSDK 给了我`ImportError: No module named redis`. 有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T19:10:07.613

我为另一个模块解决了这个问题：[simplejson](http://pypi.python.org/pypi/simplejson)。我想解决方法应该适用于任何此类模块。

顺便说一句，simplejson 可能用于支持 json，因为实际版本（TideSDK 1.3.1-beta）带有不支持标准 json 模块的 Python 2.5，它带有 Python 2.6（或更高版本）。

* * *

首先，您使用的路径是“TideSDK Developer”，即启动和构建应用程序的程序。碰巧“TideSDK Developer”是使用TideSDK搭建的，所以结构是一样的。

> C:\Program Files (x8 6)\TideSDK Developer\modules\python\1.3.1-beta\python.exe

TideSDK 实际用于启动和编译应用程序的路径在“C:\ProgramData”内

就我而言，它是：

> C:\ProgramData\TideSDK\modules\win32\python\1.3.1-beta\python.exe

所以，这就是我所做的，我跑了：

> C:\ProgramData\TideSDK\modules\win32\python\1.3.1-beta\python.exe setup.py install

即“安装”模块，但将其安装在“站点包”中。因此，当我启动应用程序时，我遇到了同样的错误（“没有名为 simplejson 的模块”），然后我将模块从“站点包”内部复制到外部。

我复制自：

> C:\ProgramData\TideSDK\modules\win32\python\1.3.1-beta\Lib\site-packages\simplejson

至：

> C:\ProgramData\TideSDK\modules\win32\python\1.3.1-beta\Lib\simplejson

就是这样。这对我有用。

总结：转到 ProgramData，使用 python 安装并复制安装在 site-packages 中的文件夹。

# sql - SQL中的IF ELSE错误

> ID：15372672
> 
> 赞同：-3
> 
> 时间：2013-03-12T21:37:32.183
> 
> 标签：sql, sql-server, sql-server-2008, if-statement

这是我的代码；它应该打印'BUY'，但打印'NONE'。不给出任何想法。

该怎么办？

```
DECLARE @avg8 as decimal(18,4)
DECLARE @avg3 as decimal(18,4)
SET @avg8=32.4
SET @avg3=31.5

    IF @avg3 >= @avg8
        BEGIN
        PRINT N'BUY';
        END
    ELSE
    BEGIN
        IF @avg3<@avg8
            BEGIN       
            PRINT N'SELL';
            END
        ELSE
            BEGIN
            PRINT N'none';
            END
    END 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:39:27.740

会怎样？`@avg3`小于`@avg8`

```
DECLARE @avg8 as decimal(18,4)
DECLARE @avg3 as decimal(18,4)
SET @avg8=32.4
SET @avg3=31.5

IF @avg3 <= @avg8
    BEGIN
    PRINT N'BUY';
    END
ELSE
BEGIN
    IF @avg3>@avg8
        BEGIN       
        PRINT N'SELL';
        END
    ELSE
        BEGIN
        PRINT N'none';
        END
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:40:41.510

为什么要打印购买 - 你有这个：SET @avg8=32.4 SET @avg3=31.5

```
IF @avg3 >= @avg8
    BEGIN
    PRINT N'BUY'; 
```

其中@avg3 显然不大于@avg8

# perl - 以字节/位的形式查看 Perl 变量

> ID：15372674
> 
> 赞同：5
> 
> 时间：2013-03-12T21:37:34.740
> 
> 标签：perl, binary

免责声明：自从我做任何 perl 以来已经有很多年了，所以如果我问/说一些愚蠢的事情，请纠正我。

是否可以查看 perl 变量的字节/位表示？也就是说，如果我说类似

```
my $foo = 'a'; 
```

我知道（想想？）计算机看起来`$foo`像

```
0b1100010 
```

有没有办法让 perl 打印出变量的二进制表示？

（不求任何实际目的，只是和一位老朋友胡闹，并试图比我在 1997 年更深入地理解它）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T21:42:02.910

当然，使用[unpack](http://perldoc.perl.org/functions/unpack.html)：

```
print unpack "B*", $foo; 
```

例子：

```
% perl -e 'print unpack "B*", "bar";'
011000100110000101110010 
```

[pack](http://perldoc.perl.org/functions/pack.html)和[perlpacktut](http://perldoc.perl.org/perlpacktut.html)的 perldoc 页面很好地概述了不同表示之间的转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T01:59:01.350

还有一种方法：

```
printf "%v08b\n", 'abc'; 
```

输出：

```
01100001.01100010.0110001 
```

（v 标志是仅 perl 的 printf/sprintf 功能，也适用于 . 以外的数字格式`b`。）

这与解包建议不同，其中字符大于`"\xff"`：解包将仅返回 8 个低位（带有警告），`printf '%v...'`将显示所有位：

```
$ perl -we'printf "%vX\n", "\cA\13P\x{1337}"'
1.B.50.1337 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T21:59:30.797

如果您想要实际的内部结构，可以从名为“perlguts”的文档开始。或者`perldoc perlguts`在这里阅读：http: [//perldoc.perl.org/perlguts.html](http://perldoc.perl.org/perlguts.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T23:05:44.380

在看到安迪解释你的问题的方式之后，我可以接着说[Devel::Peek](http://metacpan.org/module/Devel%3a%3aPeek)有一个`Dump`函数可以显示变量的内部表示。它不会把它带到二进制级别，但如果你对内部感兴趣，你可以看看这个。

```
$ perl -MDevel::Peek -e 'my $foo="a";Dump $foo';
SV = PV(0x7fa8a3004e78) at 0x7fa8a3031150
  REFCNT = 1
  FLAGS = (PADMY,POK,pPOK)
  PV = 0x7fa8a2c06190 "a"\0
  CUR = 1
  LEN = 16

$ perl -MDevel::Peek -e 'my %bar=(x=>"y",a=>"b");Dump \%bar'
SV = IV(0x7fbc5182d6e8) at 0x7fbc5182d6f0
  REFCNT = 1
  FLAGS = (TEMP,ROK)
  RV = 0x7fbc51831168
  SV = PVHV(0x7fbc5180c268) at 0x7fbc51831168
    REFCNT = 2
    FLAGS = (PADMY,SHAREKEYS)
    ARRAY = 0x7fbc5140f9f0  (0:6, 1:2)
    hash quality = 125.0%
    KEYS = 2
    FILL = 2
    MAX = 7
    RITER = -1
    EITER = 0x0
    Elt "a" HASH = 0xca2e9442
    SV = PV(0x7fbc51804f78) at 0x7fbc51807340
      REFCNT = 1
      FLAGS = (POK,pPOK)
      PV = 0x7fbc5140fa60 "b"\0
      CUR = 1
      LEN = 16
    Elt "x" HASH = 0x9303a5e5
    SV = PV(0x7fbc51804e78) at 0x7fbc518070d0
      REFCNT = 1
      FLAGS = (POK,pPOK)
      PV = 0x7fbc514061a0 "y"\0
      CUR = 1
      LEN = 16 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T23:04:11.507

您可以使用`ord`返回一个字符的数值，并`printf`以`%b`二进制格式显示该值。

```
print "%08b\n”, ord 'a' 
```

**输出**

```
01100010 
```

# c# - 检查另一个子域中的文件

> ID：15372675
> 
> 赞同：0
> 
> 时间：2013-03-12T21:37:37.520
> 
> 标签：c#, asp.net, subdomain

我想在另一个子域的子域中检查文件，在 sub1 中的文件，我想在 sub2 中检查此文件。

sub1 中的地址文件：*sub1.mysite.com/img/10.jpg*和

```
 Server.MapPath(@"~/img/10.jpg"); 
```

我已经在 sub2 中检查了这个文件，所以我使用了这个代码：一些代码在这里

```
if (System.IO.File.Exists(Server.MapPath(@"~/img/10.jpg")))
{
   ...             
}

if (System.IO.File.Exists("http://sub1.mysite.com/img/10.jpg"))
{
   ...             
} 
```

但它不工作。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:43:10.070

使用 HttpWebRequest 发送资源请求并检查响应。

就像是：

```
bool fileExists = false;
try
 {
      HttpWebRequest request = (HttpWebRequest)System.Net.WebRequest.Create("http://sub1.mysite.com/img/10.jpg");
      using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
      {
           fileExists = (response.StatusCode == HttpStatusCode.OK);
      }
 }
 catch
 {
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:44:29.013

您必须使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.110%29.aspx)通过 HTTP 访问它。您可以创建一个实用方法来执行此操作，例如：

```
public static bool CheckExists(string url)
{
   Uri uri = new Uri(url);
   if (uri.IsFile) // File is local
      return System.IO.File.Exists(uri.LocalPath);

   try
   {
      HttpWebRequest request = WebRequest.Create(uri) as HttpWebRequest;
      request.Method = "HEAD"; // No need to download the whole thing
      HttpWebResponse response = request.GetResponse() as HttpWebResponse;
      return (response.StatusCode == HttpStatusCode.OK); // Return true if the file exists
   }
   catch
   {
      return false; // URL does not exist
   }
} 
```

然后这样称呼它：

```
if(CheckExists("http://sub1.mysite.com/img/10.jpg"))
{
   ...
} 
```

# objective-c - 检查现有的多个实例

> ID：15372679
> 
> 赞同：0
> 
> 时间：2013-03-12T21:37:50.977
> 
> 标签：objective-c, macos, multiple-instances, nswindowcontroller

如何检查`NSWindowController`已经存在多少个 do 实例？我想打开同一个窗口控制器的多个窗口，显示不同的内容。

窗口以这种方式打开：

```
....
hwc = [[HistogrammWindowController alloc] init];
.... 
```

我知道要检查一个已经存在的控制器：

```
if (!hwc)
... 
```

但我需要知道多个打开的窗口控制器的数量。那会是什么样子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:42:53.143

您可以在 中跟踪每个窗口实例`NSSet`，除非您需要访问它们的创建顺序，在这种情况下使用`NSArray`. 当一个窗口出现时，将其添加到给定的集合中，当它关闭时，将其删除。作为一个额外的好处，您可以在应用程序退出时通过遍历集合来关闭每个打开的窗口。

也许有点像这样：

```
- (IBAction)openNewWindow:(id)sender {
    HistogrammWindowController *hwc = [[HistogrammWindowController alloc] init];
    hwc.uniqueIdentifier = self.uniqueIdentifier;

    //To distinguish the instances from each other, keep track of
    //a dictionary of window controllers for UUID keys.  You can also
    //store the UUID generated in an array if you want to close a window 
    //created at a specific order.
    self.windowControllers[hwc.uniqueIdentifier] = hwc;
}

- (NSString*)uniqueIdentifier {
    CFUUIDRef uuidObject = CFUUIDCreate(kCFAllocatorDefault);
    NSString *uuidStr = (__bridge_transfer NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidObject);
    CFRelease(uuidObject);
    return uuidStr;
}

- (IBAction)removeWindowControllerWithUUID:(NSString*)uuid {
    NSWindowController *ctr = self.windowControllers[uuid];
    [ctr close];
    [self.windowControllers removeObjectForKey:uuid];
}

- (NSUInteger)countOfOpenControllers {
    return [self.windowControllers count];
} 
```

# jquery - 验证不会使用 ajax 检查提交表单

> ID：15372682
> 
> 赞同：6
> 
> 时间：2013-03-12T21:37:56.540
> 
> 标签：jquery, ajax, jquery-validate, form-submit

我正在使用[jQuery Validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)通过发出 ajax 请求来验证表单中的电子邮件字段，以确保电子邮件尚未被其他用户接收。我通过添加这样的规则来做到这一点：

```
//make sure email field is on form before adding rule
if ($(".unique_email").is("*")) {
    //remote validation
    $(".unique_email").rules("add", {
        remote: "http://test.nethop.com/test.cgi",
        messages: {
            remote: "This email is already in use"
        }
    });
} 
```

但是，每当我在表单上点击“提交”时，它首先会发出一个 ajax 请求以确保电子邮件未被接收，然后即使电子邮件验证正常，它也不会提交。您必须再点击一次提交，然后它将提交。有人知道为什么是这样吗？

我已经设置了一个[jsfiddle 来](http://jsfiddle.net/42TK4/4/)演示这个问题。如果您使用 chrome 开发人员工具或 firebug，您可以看到 ajax 请求正在发出、返回`true`，但仍未提交。

的HTML

```
<form id="listing" method="post">
    <ul>
        <li>
            <label for="username">Email *</label>
            <input type="text" name="username" id="username" autocomplete="off"
            class="email required unique_email" value="test@test.com" />
        </li>
        <li>
            <input type="submit" name="submit" id="submit" class="btn" value="Save"
            />
        </li>
    </ul>
</form> 
```

完整脚本：

```
$(document).ready(function () {
    var validator = $("form").validate({
        onkeyup: false,
        onblur: true,
    });

    if ($(".unique_email").is("*")) {
        //remote validation
        $(".unique_email").rules("add", {
            remote: "http://test.nethop.com/test.cgi",
            messages: {
                remote: "This email is already in use"
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T22:06:34.593

好吧，这个有点奇怪，所以请耐心等待。

`input`您拥有名称/ ID的事实`submit`导致了问题。我*认为*这是因为在后台，jQuery validate 正在调用`form.submit`. 在你的情况下，`form.submit`是一个表单元素，所以这什么都不做。

如果重命名`submit`按钮，一切正常。

**示例：http:** [//jsfiddle.net/42TK4/7/](http://jsfiddle.net/42TK4/7/)

# java - Java：JButton 数组不会改变大小

> ID：15372683
> 
> 赞同：1
> 
> 时间：2013-03-12T21:37:59.073
> 
> 标签：java, swing, size

嘿，我做了 3 个 for 循环来创建 3 个不同的 JButtons 数组。然后我将其放入Gridlayout。左侧和右侧都很好，但中心只会填满面板。

这是我右侧的代码：

```
 rightPanel = new JPanel();
    rightPanel.setLayout(new GridLayout(12, 4, 5, 5));
    rightPanel.setBorder(new EmptyBorder(10 ,10 ,10 ,10));

    for (int a = 0; a < 12; a++) {
        for (int b = 0; b < 4; b++) {
            battons[b][a] = new feedbackKnop.RechterKnop();
            battons[b][a].setPreferredSize(new Dimension(50, 50));
            rightPanel.add(battons[b][a]);
            battons[b][a].setEnabled(false);
        }
    } 
```

这是我的中心代码：

```
 btnPanel = new JPanel();
    btnPanel.setLayout(new GridLayout(12, 4, 5, 5));
    btnPanel.setBorder(new EmptyBorder(10 ,10 ,10 ,10));

    for (int i = 0; i < 12; i++) {
        for (int j = 0; j < 4; j++) {
            buttons[j][i] = new KleurenButton("");
            buttons[j][i].setPreferredSize(new Dimension (50, 50));
            btnPanel.add(buttons[j][i]);
            buttons[j][i].setEnabled(false);

        }

    } 
```

我希望它的大小像右侧的圆圈

结果：

![结果](../Images/f1d90461369bf17509eb94381112ce56.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:48:49.623

GridLayout 使所有网格大小相同，BorderLayout 扩展中心以填充窗口。要解决此问题，您需要强制固定窗口大小（或以特定纵横比），或者选择不会自动扩展其组件的不同布局。 [GroupLayout](http://docs.oracle.com/javase/6/docs/api/javax/swing/GroupLayout.html)非常流行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:59:30.750

正如评论者所建议的，这是 BorderLayout 的问题。BorderLayout 有一个“贪婪”的 CENTER 面板，这意味着默认情况下它会将其中的任何 JComponent 拉伸到整个大小。这与将使用preferredSize 的边界（NORTH、SOUTH 等）不同。这就是为什么您的左右面板没有拉伸的原因。

一个简单的解决方案（不对布局进行重大更改）可能是将 JPanel 添加到中心，给它一个 FlowLayout，然后将您的中心网格面板添加到其中。这并不理想，但可能是一种快速制作视图原型的方法。

# hadoop - hbase-master 无法启动

> ID：15372686
> 
> 赞同：0
> 
> 时间：2013-03-12T21:38:06.523
> 
> 标签：hadoop, hbase

我正在尝试建立一个 Hadoop 开发环境。我正在使用 CDH4 并按照他们网站[https://ccp.cloudera.com/display/CDH4DOC/](https://ccp.cloudera.com/display/CDH4DOC/)中的安装说明进行操作。

我已经到了能够以伪分布式模式安装 CDH4 的程度，并且我正在关注关于“需要额外配置的组件”的部分。

我已经安装了 HBase-master 包，但是当我尝试启动该服务时，我收到以下错误：

```
$ sudo /sbin/service hbase-master start
starting master, logging to /var/log/hbase/hbase-hbase-master-slc01euu.out
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hadoop/util/PlatformName
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.PlatformName
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: org.apache.hadoop.util.PlatformName. Program will exit.
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hadoop/io/Writable 
```

我想它与一些环境变量有关（我相信 HADOOP_HOME）。但我不知道在哪里看，因为所有以前的进程（名称节点、数据节点、作业跟踪器、任务跟踪器）都没有问题。

当我搜索 HADOOP_HOME 变量时，它说它是未定义的。

你们对我如何解决这个问题有任何想法吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-08T17:46:48.407

请将 HADOOP_HOME 设置为您的 hadoop 安装目录，例如：export HADOOP_HOME=/usr/hadoop

将指向 HADOOP_CONF_DIR 的指针添加到 hbase-env.sh 中的 HBASE_CLASSPATH 环境变量。

在 ${HBASE_HOME}/conf 文件夹下添加 hdfs-site.xml（和 core-site.xml）的副本

# mongodb - 查询自定义客户数据的最佳方法是什么。MongoDB / 弹性搜索

> ID：15372698
> 
> 赞同：0
> 
> 时间：2013-03-12T21:38:38.367
> 
> 标签：mongodb, full-text-search, elasticsearch

我正在做一个客户可以发送自定义数据的应用程序，并且这个自定义数据应该是“可查询的”，我的意思是客户可以搜索这些字段。

为以下用户发送的数据：

```
data = {
  name: "Thiago",
  id: 2093  
  country: "Portugal",
  custom_data: {
    company: "foo",
     plan: "pro",
     department: "it",
     sessions: 203 
  }
} 
```

由于应用程序无方案的要求，我们使用 mongoDB 来持久化数据。

但是，我想知道如何查询这些自定义数据？我们没有这些字段的索引，并且有很多文档 ~ 1.3M。

我认为使用elasticsearch我们可以处理这个要求，但是有没有不使用它的好方法？只使用 mongodb 吗？

一个查询示例可能是：

> 查找所有来自葡萄牙的信息，并拥有 100 多个登录名。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:56:54.973

您可以将要动态查询的数据存储为“类型化”键值对数组，如下所示：

```
 query_data: [
    { type: "company", value: "foo" },
    { type: "plan", value: "pro" },
    ... 
  ] 
```

然后索引 .type 和 .value

鉴于您的示例，这将如下所示：

```
> db.xx.findOne()
{
    "_id" : ObjectId("515ca2bc57a0887a97cc8d14"),
    "name" : "Thiago",
    "id" : 2093,
    "country" : "Portugal",
    "custom_data" : [
        {
            "type" : "company",
            "value" : "foo"
        },
        {
            "type" : "plan",
            "value" : "pro"
        },
        {
            "type" : "department",
            "value" : "it"
        },
        {
            "type" : "sessions",
            "value" : 203
        }
    ]
}
> db.xx.ensureIndex({country:1,"custom_data.type":1,"custom_data.value":1})
> db.xx.find({country:"Portugal","custom_data.type":"sessions","custom_data.value":{$gt:100}}).explain()
{
    "cursor" : "BtreeCursor country_1_custom_data.type_1_custom_data.value_1",
    "isMultiKey" : true,
    "n" : 1,
    "nscannedObjects" : 1,
    "nscanned" : 1,
    "nscannedObjectsAllPlans" : 1,
    "nscannedAllPlans" : 1,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    "indexBounds" : {
        "country" : [
            [
                "Portugal",
                "Portugal"
            ]
        ],
        "custom_data.type" : [
            [
                "sessions",
                "sessions"
            ]
        ],
        "custom_data.value" : [
            [
                {
                    "$minElement" : 1
                },
                {
                    "$maxElement" : 1
                }
            ]
        ]
    },
    "server" : "Aspire-5750:27017"
} 
```

# java - 用经度和纬度计算半径

> ID：15372705
> 
> 赞同：6
> 
> 时间：2013-03-12T21:39:11.197
> 
> 标签：java, gis, geospatial

我正在尝试确定两个位置（每个位置都有自己的纬度和经度值）是否在一定距离内，例如 3 英里半径。我有双值来表示每个位置的纬度和经度。

```
//Location 1
Double lattitude1 = 40.7143528;
Double longitude1 = -74.0059731;

//Location 2
Double lattitude2 = 33.325;
Double longitude2 = 44.422000000000025; 
```

我想知道如何确定这两个位置是否在彼此的半径内，因为我不完全确定如何使用这种类型的值来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T21:51:03.597

见[大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)

```
double CoordDistance(double latitude1, double longitude1, double latitude2, double longitude2)
{
    return 6371 * Math.acos(
        Math.sin(latitude1) * Math.sin(latitude2)
        + Math.cos(latitude1) * Math.cos(latitude2) * Math.cos(longitude2 - longitude1));
} 
```

如果您的纬度和经度以度为单位，请将它们转换为弧度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:48:31.287

要获得两点之间的距离，您只需要使用这段代码即可。

```
Point2D p1 = new Point2D(lattitude1, longitude2);
Point2D p2 = new Point2D(lattitude2, longitude2);

double distanceBetweenTwoPoints = (double)Math.sqrt((double)Math.pow((p1.x - p2.x), 2.0) + (double)Math.pow((p1.y - p2.y), 2.0)); 
```

**--- 已编辑 ---**

请检查两个坐标（不是二维）解决方案的评论。

# database - Sitecore 6 - 无法删除内容交付服务器上的主数据库

> ID：15372714
> 
> 赞同：2
> 
> 时间：2013-03-12T21:39:43.170
> 
> 标签：database, connection-string, sitecore, sitecore6, master

大家好，我的 Content Delivery 服务器有点问题。我们无法删除主数据库而不使其崩溃。我们目前的信息如下：

```
Sitecore.NET 6.5.0 (rev. 111230)
December 30, 2011
.NET Framework 4.0.30319.239
Database version: 500 
```

我们收到的错误和堆栈跟踪是：

```
[InvalidOperationException: Unknown connection string. Name: 'master']
   Sitecore.Configuration.Settings.GetConnectionString(String connectionStringName) +364
   Sitecore.Configuration.Factory.CreateFromConnectionStringName(XmlNode configNode, String[] parameters, Boolean assert) +106
   Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper) +164
   Sitecore.Configuration.Factory.GetInnerObject(XmlNode paramNode, String[] parameters, Boolean assert) +110
   Sitecore.Configuration.Factory.GetConstructorParameters(XmlNode configNode, String[] parameters, Boolean assert) +209
   Sitecore.Configuration.Factory.CreateFromTypeName(XmlNode configNode, String[] parameters, Boolean assert) +94
   Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper) +141
   Sitecore.Configuration.Factory.CreateObject(String configPath, String[] parameters, Boolean assert) +424
   Sitecore.Configuration.Factory.CreateFromReference(XmlNode configNode, String[] parameters, Boolean assert) +194
   Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper) +118
   Sitecore.Configuration.Factory.GetInnerObject(XmlNode paramNode, String[] parameters, Boolean assert) +930
   Sitecore.Configuration.Factory.AssignProperties(XmlNode configNode, String[] parameters, Object obj, Boolean assert, Boolean deferred, IFactoryHelper helper) +581
   Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper) +296
   Sitecore.Configuration.Factory.CreateObject(String configPath, String[] parameters, Boolean assert) +424
   Sitecore.Configuration.Factory.GetDatabase(String name, Boolean assert) +185
   Sitecore.Configuration.Factory.GetDatabases() +152
   Sitecore.Data.Managers.HistoryManager.InitializeEventHandlers() +49
   Sitecore.Pipelines.Loader.InitializeManagers.Process(PipelineArgs args) +14
   (Object , Object[] ) +80
   Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args) +191
   Sitecore.Nexus.Web.HttpModule.Application_Start() +146
   Sitecore.Nexus.Web.HttpModule.Init(HttpApplication app) +603
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +575
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +352
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +407
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +375

[HttpException (0x80004005): Unknown connection string. Name: 'master']
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11700608
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4868805 
```

似乎当历史管理器正在初始化时，它在某个时候从主数据库请求信息。谁能帮我找出这个问题发生在哪里？

提前致谢，

-汤姆

# 更新#1

将 SwitchMasterToWeb.config 添加到 app_config/include 文件夹后，我现在收到以下消息：

```
[InvalidOperationException: Could not find configuration node: databases/database[@id='master']]
   Sitecore.Diagnostics.Assert.IsTrue(Boolean condition, String message) +57
   Sitecore.Configuration.Factory.GetConfigNode(String xpath, Boolean assert) +279
   Sitecore.Configuration.Factory.CreateObject(String configPath, String[] parameters, Boolean assert) +144
   Sitecore.Configuration.Factory.GetDatabase(String name) +169
   LuceneSearch.LuceneSearch.LuceneSearchBox.Page_Load(Object sender, EventArgs e) in C:\xyz\Website\sitecore modules\LuceneSearch\LuceneSearchBox.ascx.cs:29
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25
   System.Web.UI.Control.LoadRecursive() +71
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T22:07:11.983

您的搜索索引配置可能包含对主数据库和 Web 数据库的引用。您需要在 CD 服务器上修补或替换它，以仅包含一个 Web 数据库位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T00:01:46.323

`LuceneSearch.LuceneSearch.LuceneSearchBox.Page_Load()`具有对**主**数据库的硬编码引用。在没有这个的情况下重新编译或不部署此代码隐藏所在的 DLL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T21:50:25.710

如果您在 app_config\include 中复制 SwitchMasterToWeb.Config，则应删除对主数据库的引用。如果您已经复制了它，请检查您在配置历史引擎时是否犯了复制粘贴错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T21:46:44.293

如果要删除生产环境的**主**数据库，您还需要记住更新环境的配置（将每个站点重新指向**Web**数据库、删除**主**数据库索引和档案等）。

这是解释如何配置**Sitecore**生产环境的文档。它是为 Sitecore 6.0 编写的，但在较新版本中的工作方式相同。第 1.2.1 章解释了删除**master**数据库需要做什么：

[http://sdn.sitecore.net/upload/sdn5/developer/configuring%20production%20environments/configuring%20production%20environments.pdf](http://sdn.sitecore.net/upload/sdn5/developer/configuring%20production%20environments/configuring%20production%20environments.pdf)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T22:24:23.150

转到 www.yoursite.com/sitecore/admin/showconfig.aspx 查看您当前的配置。对“master”进行文本搜索或检查部分

```
<indexes> 
```

和

```
<Engines.HistoryEngine.Storage> 
```

您可能有一个仍然指向主数据库的设置。它可能包含在 /App_Config/ 中的包含文件之一中

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-11T00:37:43.890

我从 App_Config 目录中删除了文件“Sitecore.ContentSearch.Lucene.Index.Master.config”，这为我解决了。我试图设置 LaunchSitecore 端，使用 CM 和 CD 环境。

# spring - Spring + xstream：未按正确顺序显示的字段

> ID：15372723
> 
> 赞同：1
> 
> 时间：2013-03-12T21:40:13.280
> 
> 标签：spring, rest, xstream

所以我使用 XStream 来创建我的 xml 休息响应，我在字段顺序方面遇到了一些麻烦。它与转换后的类中定义的顺序不匹配，也不与作为 1.2.2 版本（我使用的是 1.4.4 版本）的问题之一提到的相反声明顺序不匹配。

所以如果我的课看起来像：

```
person:
    name
    age
    gender 
```

输出中的顺序是

```
age gender name 
```

有人对如何订购这些有任何建议吗？我能找到的大多数帖子都提到了 setter 的顺序，但我只是使用 Person 构造函数并让 spring + XStream 自动处理转换。

编辑：配置部分：

```
<bean
        class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="order" value="1" />
        <property name="mediaTypes">
            <map>
                <entry key="xml" value="application/xml"/>

    </map>
        </property>

        <property name="defaultViews">
            <list>
                <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />

                <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
                    <constructor-arg>
                        <bean class="org.springframework.oxm.xstream.XStreamMarshaller">
                            <property name="autodetectAnnotations" value="true" />
                            <property name="supportedClasses">
                                <list>
                                    <value>com.jackdans.model.InterestingPeople</value>
                                </list>
                            </property>
                        </bean>
                    </constructor-arg>
                </bean>
            </list>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:57:31.440

从[常见问题](http://xstream.codehaus.org/faq.html#Serialization_sort_fields)...

```
SortableFieldKeySorter sorter = new SortableFieldKeySorter();
sorter.registerFieldOrder(Person.class, new String[] { "name", "age", "gender" });
xstream = new XStream(new Sun14ReflectionProvider(new FieldDictionary(sorter))); 
```

如果您想将其与 Spring 集成，那是另一回事。您可能必须创建一个 XStream 工厂或提供与上述代码类似的自定义实现。

# python - 限制 matplotlib 热图中的列

> ID：15372726
> 
> 赞同：1
> 
> 时间：2013-03-12T21:40:16.133
> 
> 标签：python, matplotlib, heatmap

我正在尝试在 matplotlib 中绘制热图并将其用作基础：[将 x 轴移动到 matplotlib 中的绘图顶部](https://stackoverflow.com/questions/14406214/moving-x-axis-to-the-top-of-a-plot-in-matplotlib)

问题是我只有三列但有 70 行，但是当我使用示例时，该图始终有 70 行和 70 列。有人知道如何限制列的数量，它们适合我的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:02:42.673

你在我的代码中发现了一个错误。我将索引 (for `data.shape`) 颠倒了。

```
import matplotlib.pyplot as plt
import numpy as np
column_labels = list('ABC')
row_labels = range(7)
data = np.random.rand(7,3)
fig, ax = plt.subplots()
heatmap = ax.pcolor(data, cmap=plt.cm.Blues)

# put the major ticks at the middle of each cell
ax.set_xticks(np.arange(data.shape[1])+0.5, minor=False)
ax.set_yticks(np.arange(data.shape[0])+0.5, minor=False)

# want a more natural, table-like display
ax.invert_yaxis()
ax.xaxis.tick_top()

ax.set_xticklabels(column_labels, minor=False)
ax.set_yticklabels(row_labels, minor=False)
plt.show() 
```

产量

![在此处输入图像描述](../Images/25cd5d35c5a058e12bb938754d413aa4.png)

# sql - 访问查询：太复杂

> ID：15372729
> 
> 赞同：0
> 
> 时间：2013-03-12T21:40:24.967
> 
> 标签：sql, ms-access

我正在尝试将查询作为报告的一部分运行，以确定是否需要发生事件。有很多组合，因为后续事件取决于第一个和第二个事件中的观察结果，这些组合因鱼的大小而异，并按物种分组。希望这提供了一些背景信息。我已经搜索了这里的问题，但还没有找到任何解决方案。这是代码片段。代码大约 160 行左右，其中大部分包含在 Switch 函数中。谢谢你的任何想法！

```
SELECT headerid, species, ageclass, P1, P2, P3, P4, P5,
switch(ageclass in ('Subyearling', 'Yearling') and P3 is null and P1<4 and P2<1,    
'SHOCK',
ageclass in ('Subyearling', 'Yearling') and P3 is null and P1 between 4 and 5 and 
P2<2, 'SHOCK',
ageclass in ('Subyearling', 'Yearling') and P3 is null and P1 between 6 and 7 and   
P2<3, 'SHOCK',
ageclass in ('Subyearling', 'Yearling') and P3 is null and P1 between 8 and 9 and 
P2<4, 'SHOCK',

   ageclass like 'Subadult' and P3 is null and P1<5 and P2<1, 'SHOCK',
   ageclass like 'Subadult' and P3 is null and P1 between 5 and 8 and P2<2, 'SHOCK',
   ageclass like 'Subadult' and P3 is null and P1 between 9 and 11 and P2<3, 'SHOCK',
   ageclass like 'Subadult' and P3 is null and P1 between 12 and 13 and P2<4, 'SHOCK',
   ageclass like 'Subadult' and P3 is null and P1 between 14 and 16 and P2<5, 'SHOCK'

   as Event from data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:49:15.187

对于“and”，您可以分阶段进行这些查询。按第一个属性过滤，并根据第二个属性过滤结果。

对于“或”，您可以单独执行这些查询并加入结果。

编程逻辑是将问题分解为更小的问题的艺术。因此，您需要将查询分解为更小的步骤并按顺序应用它们。它可能具有很高的复杂性，像这样的查询会根据先前的信息进行不同的分支，并且您应该在算法逻辑中进行分支，而不是在您的 select 语句中。

# java - 按钮 OnClick 侦听器不会调用警报对话框

> ID：15372732
> 
> 赞同：0
> 
> 时间：2013-03-12T21:40:39.877
> 
> 标签：java, android, eclipse, onclicklistener

我试图在`AlertDialog`按下按钮时提示一个按钮，但是我只能在`AlertDialog`三个按钮中的第一个上成功实现（使用教程）成功。

一旦我添加：

```
button = (Button) findViewById(R.id.button2);
button = (Button) findViewById(R.id.button3); 
```

所有按钮都不再起作用并且应用程序关闭我知道我忽略了一些简单的东西或者根本没有正确编码。

（任何帮助是极大的赞赏！）

* * *

## 爪哇：

```
package com.example.linkingmanager;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AppActivity extends Activity {

public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);
    return true;
}

 public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.newdevicebtn:
        startActivity(new Intent(this, App2Activity.class));
        return true;
        default:
        return super.onOptionsItemSelected(item);
        }   
     }

final Context context = this;
private Button button;
@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.main);

button = (Button) findViewById(R.id.button1);
button = (Button) findViewById(R.id.button2);
button = (Button) findViewById(R.id.button3);

// add button listener
button.setOnClickListener(new OnClickListener(){

@Override
public void onClick(View arg0) {

    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
        context);

    // set title
    alertDialogBuilder.setTitle("Settings Menu");

    // set dialog message
    alertDialogBuilder
        .setMessage("Delete Edit or Link?")
        .setCancelable(false)
         .setNeutralButton("Edit", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog,int id) {
        //start new activity
     Intent intentApp2Activity = new Intent(AppActivity.this, User1Settings.class);
     startActivity(intentApp2Activity);

}
  })
        .setPositiveButton("Link",new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,int id) {
        //start new activity

        Intent intentApp2Activity = new Intent(AppActivity.this, User1.class);
        startActivity(intentApp2Activity);

        // if this button is clicked, close
        // current activity
        AppActivity.this.finish();
    }
  })    
        .setNegativeButton("Delete",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                // if this button is clicked, just close
                // the dialog box and do nothing
                dialog.cancel();
            }
        });

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
    }
});
}} 
```

* * *

## XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/link_devices"
android:orientation="vertical" >

 <TextView android:textAppearance="?android:textAppearanceLarge" android:id="@+id/textView1"    android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="" />
<Button android:id="@+id/button1" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="Core Device 1" android:onClick="onPopupBtClick" />
 <Button android:id="@+id/button2" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="Core Device 2" android:onClick="onPopupBtClick" />
<Button android:id="@+id/button3" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="Core Device 3" android:onClick="onPopupBtClick" />
</LinearLayout> 
```

* * *

## 日志猫：

```
03-12 21:22:28.194: E/Trace(1648): error opening trace file: No such file or directory (2)
03-12 21:22:28.714: D/dalvikvm(1648): GC_FOR_ALLOC freed 64K, 8% free 2467K/2676K, paused 83ms, total 86ms
03-12 21:22:28.794: I/dalvikvm-heap(1648): Grow heap (frag case) to 6.062MB for 3686416-byte allocation
03-12 21:22:28.854: D/dalvikvm(1648): GC_FOR_ALLOC freed 2K, 4% free 6065K/6280K, paused 53ms, total 53ms
03-12 21:22:28.971: D/dalvikvm(1648): GC_CONCURRENT freed <1K, 4% free 6065K/6280K, paused 8ms+7ms, total 118ms
03-12 21:22:30.784: D/libEGL(1648): loaded /system/lib/egl/libEGL_emulation.so
03-12 21:22:30.793: D/(1648): HostConnection::get() New Host Connection established 0x2a1a5180, tid 1648
03-12 21:22:30.885: D/libEGL(1648): loaded /system/lib/egl/libGLESv1_CM_emulation.so
03-12 21:22:30.904: D/libEGL(1648): loaded /system/lib/egl/libGLESv2_emulation.so
03-12 21:22:31.024: W/EGL_emulation(1648): eglSurfaceAttrib not implemented
03-12 21:22:31.055: D/OpenGLRenderer(1648): Enabling debug mode 0
03-12 21:22:32.973: D/dalvikvm(1648): GC_FOR_ALLOC freed 12K, 3% free 6125K/6280K, paused 84ms, total 99ms
03-12 21:22:33.063: I/dalvikvm-heap(1648): Grow heap (frag case) to 9.634MB for 3686416-byte allocation
03-12 21:22:33.333: D/dalvikvm(1648): GC_CONCURRENT freed 2K, 2% free 9722K/9884K, paused 110ms+8ms, total    261ms
03-12 21:22:35.783: W/EGL_emulation(1648): eglSurfaceAttrib not implemented
03-12 21:25:49.243: D/AndroidRuntime(1648): Shutting down VM
03-12 21:25:49.243: W/dalvikvm(1648): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-12 21:25:49.393: E/AndroidRuntime(1648): FATAL EXCEPTION: main
03-12 21:25:49.393: E/AndroidRuntime(1648): java.lang.IllegalStateException: Could not find a method    onPopupBtClick(View) in the activity class com.example.linkingmanager.AppActivity for onClick handler on view class   android.widget.Button with id 'button1'
03-12 21:25:49.393: E/AndroidRuntime(1648):     at android.view.View$1.onClick(View.java:3586)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at android.view.View.performClick(View.java:4204)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at android.view.View$PerformClick.run(View.java:17355)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at android.os.Handler.handleCallback(Handler.java:725)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at android.os.Looper.loop(Looper.java:137)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at  android.app.ActivityThread.main(ActivityThread.java:5041)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at java.lang.reflect.Method.invokeNative(Native Method)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at java.lang.reflect.Method.invoke(Method.java:511)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at dalvik.system.NativeStart.main(Native Method)
03-12 21:25:49.393: E/AndroidRuntime(1648): Caused by: java.lang.NoSuchMethodException: onPopupBtClick [class android.view.View]
03-12 21:25:49.393: E/AndroidRuntime(1648):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at java.lang.Class.getMethod(Class.java:915)
03-12 21:25:49.393: E/AndroidRuntime(1648):     at android.view.View$1.onClick(View.java:3579)
03-12 21:25:49.393: E/AndroidRuntime(1648):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:43:25.607

通过一个接一个地调用它们：

```
button = (Button) findViewById(R.id.button1);
button = (Button) findViewById(R.id.button2); // This obliterates the previous value of button
button = (Button) findViewById(R.id.button3); // This obliterates the previous value of button 
```

您正在*覆盖*先前的变量。要么使用不同的变量，要么在覆盖它的值之前做你想做的工作：

```
button = (Button) findViewById(R.id.button1);
button.setOnClickListener(mOnClickListener);
//etc.

button = (Button) findViewById(R.id.button2);
button.setOnClickListener(mOnClickListener);
//etc. 
```

* * *

就您看到的错误而言，您已经在 XML 中定义了一个 OnClickListener：

```
android:onClick="onPopupBtClick" 
```

但未能在您的活动中编写此方法...

```
public void onPopupBtClick(View view) {
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:50:20.193

从 xml 视图中移除 onPopupBtClick。它在您的活动中找不到名为 onPopupBtClick 的方法，因此崩溃

此外，您不能将 3 个不同的视图分配给同一个 Button 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:34:54.313

```
public class MainActivity extends Activity {
private Button button1,button2,button3;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    button1 = (Button) findViewById(R.id.button1);
    button2 = (Button) findViewById(R.id.button2);
    button3 = (Button) findViewById(R.id.button3);

    /*
     * Implementation for dynamic OnClicklisteners
     */
//      button1.setOnClickListener(new OnClickListener(){
//          @Override
//          public void onClick(View v) {
//              openDialog(v);
//          }
//      });
//      button2.setOnClickListener(new OnClickListener(){
//          @Override
//          public void onClick(View v) {
//              openDialog(v);
//          }
//      });
//      button3.setOnClickListener(new OnClickListener(){
//          @Override
//          public void onClick(View v) {
//              openDialog(v);
//          }
//      });

}
public void openDialog(View v){
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(MainActivity.this)
    .setTitle("Settings Menu")
    .setMessage("Delete Edit or Link?")
    .setCancelable(false)
    .setNeutralButton("Edit", new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog,int id) {
             Toast.makeText(MainActivity.this, "Clicked Edit",Toast.LENGTH_LONG).show();
         }
    })
    .setPositiveButton("Link",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            Toast.makeText(MainActivity.this, "Clicked Link",Toast.LENGTH_LONG).show();
        }
    })    
    .setNegativeButton("Delete",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {

            dialog.cancel();
        }
     });

    AlertDialog alertDialog = alertDialogBuilder.create();

    alertDialog.show();
}        

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFF"
android:orientation="vertical" >

<TextView 
    android:textAppearance="?android:textAppearanceLarge" 
    android:id="@+id/textView1"    
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="" />
<Button android:id="@+id/button1" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="Core Device 1" 
    android:onClick="openDialog" />
<Button android:id="@+id/button2" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="Core Device 2" 
    android:onClick="openDialog" />
<Button android:id="@+id/button3" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="Core Device 3" 
    android:onClick="openDialog" />
</LinearLayout> 
```

[您可以在https://github.com/darussian/SimpleAndroidDialogExample](https://github.com/darussian/SimpleAndroidDialogExample)查看源代码

# java - Grails - 扩展实例

> ID：15372744
> 
> 赞同：0
> 
> 时间：2013-03-12T21:41:02.343
> 
> 标签：java, grails, groovy

我已经和 Grails 一起工作了几个月，我偶然发现了一些东西......

所以我有一个安装了 Spring Security 的小应用程序并创建了用户等。

谢谢大家

**- - - -编辑 - - - -**

为了使问题更简单直接，请忘记类名。

```
class ABC extends XYZ{...}

class XYZ{...} 
```

问题：XYZ的多个对象可以扩展ABC的同一个对象吗？**所以如果我已经有扩展 XYZ1 的对象 ABC1，我可以创建 XYZ2 并让它也扩展 ABC1 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:16:56.240

似乎用户应该有一个组。根据您的模型，他们可能有一个或多个组。所以我的建议：

```
class Group {
  String name
} 
```

关联`User`：

```
class User {
  Group userGroup
} 
```

或者

```
class User {
  static hasMany = [groups: Group]
} 
```

在您创建类的方式中，一个组似乎**是一个用户**，我认为这不是您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:34:21.730

您可能需要[分层角色](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/14%20Hierarchical%20Roles.html)而不是一组用户来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:42:46.797

抱歉，我可能错过了您的观点，但听起来您正在寻找行级（或实例级）访问控制。例如，您似乎只希望某些用户（特定组内的用户）能够访问（查看、编辑等）对象（例如，同一个组对象）。

如果这是您的意图，那么我建议您查看 shiro 插件——在我看来，它比 Spring Secuity 更好地执行实例级 ACL。

[http://grails.org/plugin/shiro](http://grails.org/plugin/shiro)

还有一个新插件通过 Spring Security 集成了 shiro ACL。我自己还没有测试过，但如果你已经将 Spring Security 集成到你的应用程序中，它看起来可能是要走的路。

[http://grails.org/plugin/spring-security-shiro](http://grails.org/plugin/spring-security-shiro)

# javascript - Zurb Foundation 下拉按钮菜单掉落太多

> ID：15372745
> 
> 赞同：0
> 
> 时间：2013-03-12T21:41:07.933
> 
> 标签：javascript, css, zurb-foundation

我想将 Foundation 中的下拉按钮（例如： http: [//foundation.zurb.com/docs/components/dropdown-buttons.html](http://foundation.zurb.com/docs/components/dropdown-buttons.html)）添加到我的网站，使用“data-dropdown”属性将其链接到列表，如底部的文档页面中所述。下拉菜单有效 - 但是，当我单击按钮时（例如按钮下方 300 像素），列表会以某种方式下降太多。

我什至试图在空白页上隔离按钮，或者没有我所有的自定义设置和样式，但没有运气。我将最新的 Foundation 4.0.5 作为 gem 安装。有人对这个版本的 Foundation 有同样的问题吗？或者文档示例中是否存在语法错误？我复制+粘贴了这个代码片段：

```
<a href="#" data-dropdown="drop1" class="button dropdown">Dropdown Button</a><br>

<ul id="drop1" class="f-dropdown">
  <li><a href="#">This is a link</a></li>
  <li><a href="#">This is another</a></li>
  <li><a href="#">Yet another</a></li>
</ul> 
```

谢谢您的帮助！

*   彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:24:36.783

几天前我遇到了同样的问题。在我看来，Foundation 4 中的新下拉类在 div.columns 元素中不能很好地发挥作用。考虑以下：

```
<div class="row">
  <div class="large-6 columns">
    <ul class="inline-list">
      <li>
        <a href="#" class="button dropdown" data-dropdown="drop1">No Good</a>
        <ul id="drop1" class="f-dropdown">
          <li><a href="#">Item 1</a></li>
          <li><a href="#">Item 2</a></li>
          <li><a href="#">Item 3</a></li>
        </ul>
      </li>
      <li><a href="#" class="button dropdown" data-dropdown="drop2">Much Better</a></li>
    </ul>
  </div>
</div>
<ul id="drop2" class="f-dropdown">
  <li><a href="#">Item 1</a></li>
  <li><a href="#">Item 2</a></li>
  <li><a href="#">Item 3</a></li>
</ul> 
```

在这个例子中，'drop1' 被定义在'large-6 columns' div 中，当点击相应的按钮时，它会显示在按钮的下方，就像你描述的那样。相反，'drop2' 是在 div.columns 之外定义的，它会正确显示。

根据我的实验，下拉列表可以在一行内定义而不会出现问题。似乎是导致问题的列。

# java - 检查 GPS 状态时无法停止活动

> ID：15372756
> 
> 赞同：2
> 
> 时间：2013-03-12T21:41:44.507
> 
> 标签：java, android

在我简单地创建了一个新的模拟器以在 Google 地图 API 上运行之后，以前工作的代码上出现了非常令人沮丧的错误。

**代码背景：**

当用户点击按钮时，我的代码会检查设备以查看我当前是否激活了 GPS。如果不是，则提示用户进入设置页面。如果是，则将它们的 Lat ang Long 值发送到 AsyncTask。

从我可以看到我的 GPS 正在返回一个值（无论是真还是假），但我收到以下错误：

```
03-12 21:33:18.317: E/AndroidRuntime(364): java.lang.RuntimeException: Unable to stop activity {com.example.flybaseapp/com.example.flybaseapp.ShoppingList}: java.lang.NullPointerException 
```

通行证：

```
package com.example.flybaseapp;

import android.R.string;
import android.app.Activity;
import android.location.Location;
import android.os.Bundle;

public class PassLatLong extends Activity{

double latt;
double longg;
String conLatt = "";
String conLongg = "";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle extras = getIntent().getExtras(); 
    if (extras != null) {
        latt = extras.getDouble("passedLat"); 
        longg = extras.getDouble("passedLong"); 
    }

    conLatt = Double.toString(latt);
    conLongg = Double.toString(longg);
    GoogleAsync task = new GoogleAsync(this);
    task.execute(conLatt, conLongg);

    }

 } 
```

ShoppingList.Java 调用意图对象来启动 CheckGPS 类：

```
package com.example.flybaseapp;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.text.Editable;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;

public class ShoppingList extends ListActivity implements OnClickListener {

    Button AddItem;
    Button showShop;
    ListView showItems;
    SimpleCursorAdapter cursorAdapter;
    Long itemId;
    EditText totalPrice;
    String itemDescription;
    int itemAmount;
    int itemPrice;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.shoppinglistlayout);

        AddItem = (Button) findViewById(R.id.btnAddItem);
        showShop = (Button) findViewById(R.id.btnSearchShops);

        showItems = (ListView) findViewById(android.R.id.list);

        totalPrice = (EditText) findViewById(R.id.totalListPrice);

        AddItem.setOnClickListener(this);
        showShop.setOnClickListener(this);

        setList();

        int setPrice = updateTotal();
        totalPrice.setText(Integer.toString(setPrice));

    }

    @Override
    public void onClick(View clickedAdd) {

        switch (clickedAdd.getId()) {

        case (R.id.btnAddItem):

            show();

            break;

        case (R.id.btnSearchShops):

            Intent checkGPS = new Intent("com.example.flybaseapp.CheckGPS");
            startActivity(checkGPS);

            break;

        }

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long idd) {
        super.onListItemClick(l, v, position, idd);

        itemId = idd;

        final CharSequence[] items = { "Edit Item", "Delete Item",
                "Show Most Purchased Item" };

        Builder alertDialogBuilder = new AlertDialog.Builder(ShoppingList.this);

        alertDialogBuilder.setTitle("Item Options:");

        alertDialogBuilder.setItems(items,
                new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int item) {

                        if (items[item].equals("Edit Item")) {

                            AlertDialog.Builder builder = new AlertDialog.Builder(
                                    ShoppingList.this);

                            builder.setTitle("Edit Item");

                            DBHandlerShop setEdit = new DBHandlerShop(
                                    ShoppingList.this, null, null);

                            setEdit.open();
                            String itemName = setEdit.getItem(itemId);
                            int itemAmount = setEdit.getItemQuan(itemId);
                            int itemPrice = setEdit.getItemCost(itemId);
                            setEdit.close();
                            LinearLayout layout = new LinearLayout(
                                    ShoppingList.this);
                            layout.setOrientation(LinearLayout.VERTICAL);

                            final EditText titleBox = new EditText(
                                    ShoppingList.this);
                            titleBox.setText(itemName);
                            titleBox.setHint("Item Name:");
                            layout.addView(titleBox);

                            final EditText quantityBox = new EditText(
                                    ShoppingList.this);
                            quantityBox.setText(Integer.toString(itemAmount));
                            quantityBox.setHint("Item Quantity");
                            layout.addView(quantityBox);

                            final EditText priceBox = new EditText(
                                    ShoppingList.this);
                            priceBox.setText(Integer.toString(itemPrice));
                            priceBox.setHint("Item Price.");
                            layout.addView(priceBox);

                            builder.setView(layout);

                            builder.setPositiveButton("Ok",
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(
                                                DialogInterface dialog,
                                                int whichButton) {

                                            Editable valueItem = titleBox
                                                    .getText();
                                            Editable valueAmount = quantityBox
                                                    .getText();
                                            Editable valuePrice = priceBox
                                                    .getText();

                                            String itemDescription = valueItem
                                                    .toString();
                                            String s = valueAmount.toString();
                                            int itemAmount = Integer
                                                    .parseInt(s);
                                                String a = valuePrice.toString();
                                            int itemPrice = Integer.parseInt(a);

                                            try {
                                                DBHandlerShop update = new DBHandlerShop(
                                                        ShoppingList.this,
                                                        null, null);
                                                update.open();
                                                update.updateItem(itemId,
                                                        itemDescription,
                                                        itemAmount, itemPrice);
                                                update.close();
                                            } catch (Exception e) {
                                                Dialog e1 = new Dialog(
                                                        ShoppingList.this);
                                                e1.setTitle("Item unsuccesfully updated");
                                                TextView txt = new TextView(
                                                        ShoppingList.this);
                                                txt.setText("Success");
                                                e1.setContentView(txt);
                                                e1.show();
                                            }    finally {
                                                Dialog e1 = new Dialog(
                                                        ShoppingList.this);
                                                e1.setTitle("Item succesfully updated");
                                                TextView txt = new TextView(
                                                        ShoppingList.this);
                                                txt.setText("Success");
                                                e1.setContentView(txt);
                                                e1.show();

                                                setList();

                                                int cost = updateTotal();
                                                totalPrice.setText(Integer
                                                        .toString(cost));
                                            }

                                        }

                                    });

                            builder.setNegativeButton("Cancel",
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(
                                                DialogInterface dialog,
                                                int whichButton) {

                                        }
                                    });

                            builder.show();

                        }

                        else if (items[item].equals("Delete Item")) {

                            DBHandlerShop delete = new DBHandlerShop(
                                    ShoppingList.this, null, null);

                            delete.open();
                            delete.deleteItem(itemId);
                            delete.close();

                            DBHandlerShop findPrice = new DBHandlerShop(
                                    ShoppingList.this, null, null);

                            findPrice.open();
                            int returnedCost = findPrice.getItemCost(itemId);

                            int cost = updateTotal();

                            int newTotal = cost - returnedCost;
                            totalPrice.setText(Integer.toString(newTotal));

                            setList();

                        }

                        else if (items[item].equals("Show Most Purchased Item")) {

                            Dialog e1 = new Dialog(ShoppingList.this);
                            e1.setTitle("Item unsuccesfully updated");
                            TextView txt = new  TextView(ShoppingList.this);
                            txt.setText("Success");
                            e1.setContentView(txt);
                            e1.show();

                        }

                    }

                });

        alertDialogBuilder.show();

    }

    private void setList() {

        DBHandlerShop DBShop = new DBHandlerShop(this, null, null);

        DBHandlerShop searchItems = new DBHandlerShop(this, null, null);

        searchItems.open();

        Cursor cursor = searchItems.getItems();

        startManagingCursor(cursor);

        String[] from = new String[] { DBShop.KEY_ITEMSHOP, DBShop.KEY_ITEMNUM,
                DBShop.KEY_ITEMPRICE };
        int[] to = new int[] { R.id.txtSetItem, R.id.txtSetAmount,
                R.id.txtSetPrice };

        cursorAdapter = new SimpleCursorAdapter(this, R.layout.setshoppinglist,
                cursor, from, to);
        showItems.setAdapter(cursorAdapter);

    }

    private int updateTotal() {

        DBHandlerShop total = new DBHandlerShop(this, null, null);

        int totalPrice = 0;
        total.open();
        Cursor totalPrices = total.getTotals();
        total.close();

        if (totalPrices != null) {

            startManagingCursor(totalPrices);
            if (totalPrices.moveToFirst()) {

                do {
                    int cost = totalPrices.getInt(3);
                    totalPrice += cost;

                } while (totalPrices.moveToNext());

                return totalPrice;
            }

        }

        else {

            return totalPrice;

        }

        return 0;

    }

    private void show() {

        AlertDialog.Builder builder = new AlertDialog.Builder(ShoppingList.this);

        builder.setTitle("Enter Item Details:");

        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.VERTICAL);

        final EditText titleBox = new EditText(this);

        titleBox.setHint("Item Name:");
        layout.addView(titleBox);

        final EditText quantityBox = new EditText(this);

        quantityBox.setHint("Item Quantity");
        layout.addView(quantityBox);

        final EditText priceBox = new EditText(this);

        priceBox.setHint("Item Price.");
        layout.addView(priceBox);

        builder.setView(layout);

        builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                try {

                    Editable valueItem = titleBox.getText();
                    Editable valueAmount = quantityBox.getText();
                    Editable valuePrice = priceBox.getText();

                    itemDescription = valueItem.toString();
                    String s = valueAmount.toString();
                    itemAmount = Integer.parseInt(s);
                    String a = valuePrice.toString();
                    itemPrice = Integer.parseInt(a);

                    int totalCombined = itemAmount * itemPrice;

                    DBHandlerShop addItem = new DBHandlerShop(
                            ShoppingList.this, null, null);
                    addItem.open();
                    addItem.insertItems(itemDescription, itemAmount,
                            totalCombined);
                    addItem.close();

                } catch (Exception e) {
                    Dialog e1 = new Dialog(ShoppingList.this);
                    e1.setTitle("Item unsuccesfully added");
                    TextView txt = new TextView(ShoppingList.this);
                    txt.setText("Success");
                    e1.setContentView(txt);
                    e1.show();

                } finally {
                    Dialog e = new Dialog(ShoppingList.this);
                    e.setTitle("Item succesfully added.");
                    TextView txt = new TextView(ShoppingList.this);
                    txt.setText("Success");
                    e.setContentView(txt);
                    e.show();

                    int cost = updateTotal();
                    totalPrice.setText(Integer.toString(cost));

                    setList();

                }

            }

        });

        builder.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                    }
                });

        builder.show();

    }
    } 
```

这是调用检查的类：

```
package com.example.flybaseapp;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.provider.Settings;
import android.widget.Toast;

public class CheckGPS extends Activity {

    boolean check;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        GPSYesOrNo g = new GPSYesOrNo(this);

        check = g.checkStatus();

        if (check == true) {

            Intent Appoint = new Intent("com.example.flybaseapp.CurrentLatLong");
            startActivity(Appoint);

        }

        else {

            alert();
        }
    }

    private void alert() {

        AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);

        // Setting Dialog Title
        alertDialog.setTitle("GPS is settings");

        // Setting Dialog Message
        alertDialog
                .setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // Setting Icon to Dialog
        // alertDialog.setIcon(R.drawable.delete);

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        Intent intent = new Intent(
                                Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                        startActivity(intent);
                    }
                });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
    }

    } 
```

和 GPSYesOrNo 类：

```
public class GPSYesOrNo{

Context cc;
private LocationManager locationManager;
boolean enable;

public GPSYesOrNo(Context c)
{
this.cc = c;
checkStatus();

}

public boolean checkStatus()
{

locationManager = (LocationManager) cc.getSystemService(Context.LOCATION_SERVICE);
  boolean enabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER); 

           if(enabled){
               return true;
           }else{

               return false;

           }

} 
```

异步类：

```
 package com.example.flybaseapp;

import java.util.List;

import com.google.android.maps.MapActivity;

import android.content.Context;
import android.os.AsyncTask;
import android.widget.ListView; 
```

公共类 GoogleAsync 扩展 AsyncTask> {

```
private Context context = null;

public GoogleAsync(Context ctx) {
    context = ctx;
}

@Override
protected List<JSON> doInBackground(String... arg0) {
    return new JSONResponse().searchPostalCode(arg0[0], arg0[1]);
}

@Override
protected void onPostExecute(List<JSON> result) {
    this.populateActivity(result);
}

void populateActivity(List<JSON> result) {

    // Associate Adapter to ListView for matching locations
    MapActivity mapAct = (MapActivity) context;
    ListView list = (ListView) mapAct.findViewById(R.id.list);

    ShopMapDisplay adapter = new ShopMapDisplay(context, result);
    list.setAdapter(adapter);

}

} 
```

完整的 LogCat：

```
03-12 22:38:56.994: E/AndroidRuntime(372): FATAL EXCEPTION: main
03-12 22:38:56.994: E/AndroidRuntime(372): java.lang.ClassCastException: com.example.flybaseapp.PassLatLong
03-12 22:38:56.994: E/AndroidRuntime(372):  at com.example.flybaseapp.GoogleAsync.populateActivity(GoogleAsync.java:32)
03-12 22:38:56.994: E/AndroidRuntime(372):  at com.example.flybaseapp.GoogleAsync.onPostExecute(GoogleAsync.java:26)
03-12 22:38:56.994: E/AndroidRuntime(372):  at com.example.flybaseapp.GoogleAsync.onPostExecute(GoogleAsync.java:1)
03-12 22:38:56.994: E/AndroidRuntime(372):  at android.os.AsyncTask.finish(AsyncTask.java:417)
03-12 22:38:56.994: E/AndroidRuntime(372):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-12 22:38:56.994: E/AndroidRuntime(372):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-12 22:38:56.994: E/AndroidRuntime(372):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 22:38:56.994: E/AndroidRuntime(372):  at android.os.Looper.loop(Looper.java:123)
03-12 22:38:56.994: E/AndroidRuntime(372):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-12 22:38:56.994: E/AndroidRuntime(372):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 22:38:56.994: E/AndroidRuntime(372):  at java.lang.reflect.Method.invoke(Method.java:521)
03-12 22:38:56.994: E/AndroidRuntime(372):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-12 22:38:56.994: E/AndroidRuntime(372):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-12 22:38:56.994: E/AndroidRuntime(372):  at dalvik.system.NativeStart.main(Native Method) 
```

目前我的模拟器设置为 GoogleApi 2.2。我真的很困惑这个错误，因为它以前工作过。在尝试实现 onStop() 覆盖后，这也没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:54:02.650

您的错误是**com.example.flybaseapp.ShoppingList** 您是否使用其他项目的代码片段？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:25:56.350

您没有关闭数据库`findPrice.open();`。没有`findPrice.close();`。

我建议你只打开 db`onCreate()`并在`onDestroy()`. 这样你就不必一直打开和关闭然后忘记。

# arcobjects - VBA 6.0，在选择每个组合框时更改 3 个组合框的代码！称为选择更改！

> ID：15372763
> 
> 赞同：1
> 
> 时间：2013-03-12T19:53:54.160
> 
> 标签：arcobjects, vba

我正在尝试编写代码以在选择每个组合框时更改 3 个组合框。例如：在组合框 1 中，他们选择 Urban，它用 2010 和 2011 填充组合框 2，然后用 houston、austin 等填充组合框 3。我正在尝试使用 If then 循环，但我得到了“无效的限定符”的错误，我不明白，因为它是有效的，它已在整个脚本中使用。任何帮助都会很棒！

```
 Private Sub UserForm_Initialize()

    cboStations.Value = "Annual"
    cboYear.Value = "2012"

    Dim WorkDB As DAO.Database
    Dim workRecSetA As DAO.RecordSet
    Dim workRecSetB As DAO.RecordSet
    Dim x As Integer

    Set WorkDB = DBEngine.OpenDatabase("K:\TASS\2 - GEO-DATA PROCESSING SUPPORT\MICHELLE'S WORK_ENTER NOT!!\Work Folder\Map Automation Project\Access Tables\Map_Automation.mdb")
    Set workRecSetA = WorkDB.OpenRecordset(Name:="select * from Districts order by District_Name", Type:=dbOpenDynaset)
    Do Until workRecSetA.EOF
        cboDistrict.AddItem workRecSetA("District_Name")
        workRecSetA.MoveNext
    Loop
    Set workRecSetB = WorkDB.OpenRecordset(Name:="select * from Stations order by Station_Name", Type:=dbOpenDynaset)
    Do Until workRecSetB.EOF
        cboStations.AddItem workRecSetB("Station_Name")
        workRecSetB.MoveNext
    Loop

    For x = 2010 To 2015
        cboYear.AddItem x
    Next

End Sub

Private Sub cmdCancel_Click()

    frmMapSetUp.Hide

End Sub

Private Sub cboStations_Change()

    Dim cboYear As String

    If cboStations.Text = "Urban" Then
      cboYear.AddItem "2010", "2011", "2012"  > Here is where I am receiving the error!!

    End If

End Sub

Private Sub cboYear_Change()

    Dim cboDistrict As String

    If cboYear.Text = "2010" Then
        cboDistrict.AddItem "Abilene", "Amarillo", "Austin", "San_Antonio", "Waco", "Wichita_Falls"
    Else
        cboYear.Text = "2011"
        cboDistrict.AddItem "Beaumont", "Houston"

    Else
        cboYear.Text = "2012"                                  cboDistrict.AddItem "Brownwood", "Bryan", "Childress", "Corpus_Christi", "El_Paso", Lubbock, "Odessa", "Yoakum"
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:12:53.873

你的线

```
cboYear.AddItem "2010", "2011", "2012" 
```

无效。查看用于操作组合框的[MSDN 文档。](http://msdn.microsoft.com/en-au/library/aa240832(v=vs.60).aspx)

`.AddItem`接受一个或两个参数 - 第一个是项目，第二个是指示在哪里插入项目的数字。我会冒险猜测它正在将 '2011' 转换为一个数字，试图将其插入到 2011 的位置（这当然不存在，因为你的组合框中没有 2000 多个项目！）并抛出一个不稳定的.

尝试拆分它：

```
cboYear.AddItem "2010"
cboYear.AddItem "2011"
cboYear.AddItem "2012" 
```

# bash - Unix text parsing

> ID：15372766
> 
> 赞同：0
> 
> 时间：2013-03-12T21:42:15.750
> 
> 标签：bash, parsing, unix, grep

I have a text file in which may have multiple lines of text. Exactly one line of text will have the following sequence:

```
XMLcpLINK: ######## 
```

where the sequence of #'s can be any character or symbol.

What I need to do is read each line until I find `XMLcpLINK:` and save the sequence after it into a variable. Can anyone point me to sufficient UNIX references to do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:47:06.000

Something like

```
my_var=$(sed -n 's/XMLcpLINK: //p' file.txt) 
```

should do it.

Here's a decent [`sed` reference](http://www.grymoire.com/Unix/Sed.html).

Or if you have `GNU grep`:

```
my_var=$(grep -oP '(?<=XMLcpLINK: ).*' file.txt) 
```

Adding `-m 1` to `grep` is a good idea **ajozwik** has there, it should speed it up a little.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:51:01.790

`grep -m 1 'XMLcpLINK' file.txt | awk '{ print $2}'` - only first occurency

`grep 'XMLcpLINK' file.txt | awk '{ print $2}'` - all matching

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:57:46.507

# POSIX sh

No external commands or subshells

```
while IFS=': ' read name value; do
    case "$name" in
        XMLcpLINK) result="$value"
    esac
done < input_file
echo "$result" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T00:33:40.710

You got some good answers already but there is room for some improvement.

All the following print value of `XMLcpLINK` and then quit:

With `awk`:

```
$ awk '/^XMLcpLINK: /{print $2;exit}' file
######## 
```

With `grep`:

```
$ grep -Pom1 '(?<=^XMLcpLINK: ).*' file
######## 
```

With `sed`:

```
$ sed -n '/^XMLcpLINK: /{s/XMLcpLINK: //p;q}' file
######## 
```

Pick your favorite and use command substitution to store the result into a variable:

```
$ var=$(awk '/^XMLcpLINK: /{print $2;exit}' file)

$ echo $var
######## 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T21:48:30.707

```
#!/bin/bash
VAR=$(grep "XMLcpLINK: " test.txt | awk '{ print $2 }')
echo $VAR 
```

test.txt being the file to analyse.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T22:06:59.320

Two ways to achieve this:

With bash and dash, the following should work, with your testfile named 'myfile.txt'

```
while read i; do if [ "$i" != "${i#XMLcpLink: }" ]; then variable="${i#XMLcpLink: }"; break; fi; done <myfile.txt ; echo variable == "${variable}" 
```

For explanation of the "${var#something}" see the 'Parameter Expansion' section in the bash man page.

Or a little shorter, perhaps faster (unless the file has many nonmatching lines after the match), and if you don't mind a space prefixed to the variable, using the external grep and cut utilities:

```
variable="`grep -e '^XMLcpLink: ' myfile|cut -d':' -f2-`" ; echo variable == "${variable}" 
```

There are probably many more ways, possibly some bettery ways to do it.

# javascript - 如何逐步增加由 jQuery UI 滑块呈现的图表中的输出？

> ID：15372772
> 
> 赞同：0
> 
> 时间：2013-03-12T21:42:34.720
> 
> 标签：javascript, json, jquery-ui

我正在寻找一种基于 jQuery UI 滑块确定的值动态更新 Highcharts 的方法。假设价格为 100 美元/月，每月售出 5 个单位。每个月的数据点将通过前几个月的总和加上（单位*价格）来计算，单位数量将每月增加 5 个。例如第 1 个月：(100*5) = 500 第 2 个月：500 + (100*10) = 1500 第 3 个月：1500 + (100*15) = 3000 第 4 个月：3000 + (100*20) = 5000 等等。 ..所以图表应该看起来更像一条曲线。我该怎么做呢？这是我的jsFiddle。 [http://jsfiddle.net/nlem33/eyGMu/2/](http://jsfiddle.net/nlem33/eyGMu/2/)

```
slide: function(event, ui) {
$('#slider2_value').html('$' + ui.value);
var newdata = [];
for (var i=0 ; i<6 ; i++) {
    newdata.push(ui.value * i);
}
chart.series[0].setData (newdata); 
```

},

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:53:16.000

那是你想要的吗？:-)

```
var sliderHandler = function (event, ui) {
    var newdata = [],
        data = [],
        sum = 0;

    if (this.id === 'slider1') {
        $('#slider1_value').html(ui.value);
        units = ui.value;
    } else {
        $('#slider2_value').html('$' + ui.value);
        price = ui.value;
    }

    for (var i = 0; i < 13; i++) {
        data.push(units * price);

        for (var j = 0; j < i; j++)
            sum += data[j];

        newdata.push(sum + units * price);
    }

    chart.series[0].setData(newdata);
    chart.series[1].setData(newdata);
}

$('#slider1').slider({

    min: min_value,
    max: max_value,
    step: 5,

    slide: sliderHandler,
    stop: function (event, ui) {

    }
}); 
```

滑块2相同

这是您修改后的曲线示例-> [http://jsfiddle.net/eyGMu/5/](http://jsfiddle.net/eyGMu/5/)

![在此处输入图像描述](../Images/adb5e218bb3385a71c262b67fe22f411.png)

# python - Python Scapy 不嗅探

> ID：15372773
> 
> 赞同：0
> 
> 时间：2013-03-12T21:42:39.023
> 
> 标签：python, scapy

当我运行脚本时，`scapy`不监听界面，它只是打印出这个错误：

> 回溯（最近一次调用最后）：文件“keylogger.py”，第 91 行，在 sniff_packets(scapy_expression, target_site) 文件“keylogger.py”，第 15 行，在 sniff_packets sniff(filter=scapy_expression, prn=sniffer_callback(target_site), store=0, iface="eth0") TypeError: sniffer_callback() 正好需要 2 个参数（1 个给定）

发生错误的代码如下（嗅探的表达式）

```
def sniff_packets(scapy_expression, target_site):
    sniff(filter=scapy_expression, prn=sniffer_callback(target_site), store=0, iface="eth0") 
```

这是回调函数：

```
 def sniffer_callback(packet, target_site):

            print "[*] Got a packet" 
```

我不知道为什么`scapy`不听电线。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:19:42.247

问题是：`prn=sniffer_callback(target_site)`。你`sniffer_callback`用一个参数打电话，这是错误的。

应该是：`prn=sniffer_callback`. 因为它是一个回调函数，所以`sniffer_callback`应该从 function 内部的某个地方调用`sniff`。因此，您将函数本身作为参数，而不是它计算的值。

# image - Monotouch 的异步图像下载器/缓存

> ID：15372775
> 
> 赞同：4
> 
> 时间：2013-03-12T21:42:39.677
> 
> 标签：image, caching, asynchronous, xamarin.ios

在谷歌搜索了一段时间后，我找不到在我当前的 Monotouch 应用程序中使用的库。

我想知道是否有一些 Monotouch 库能够执行以下功能：

*   异步图片下载器；
*   异步内存/磁盘映像缓存；
*   取消图片下载支持；

在使用 Objective-C 进行开发时，我习惯于使用众所周知的[SDWebImage](https://github.com/rs/SDWebImage/)库。

如果可能的话，我想使用一个部分支持 Xamarin 跨平台的库，以便也将它用于我当前应用程序的 Mono For Android 版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T23:08:46.893

我们总是使用`ImageLoader`in `MonoTouch.Dialog`。它具有缓存和异步下载。但是，要取消，您必须自己处理。

见这里：[https ://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Utilities/ImageLoader.cs](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Utilities/ImageLoader.cs)

它现在是 Xamarin.iOS 中的内置引用，您应该能够在“添加引用”对话框中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T22:52:35.797

同样来自 Xamarin：[https](https://github.com/xamarin/prebuilt-apps/blob/master/EmployeeDirectory/EmployeeDirectory/Utilities/ImageDownloader.cs) ://github.com/xamarin/prebuilt-apps/blob/master/EmployeeDirectory/EmployeeDirectory/Utilities/ImageDownloader.cs 。

虽然这在我看来还远未完成，但它是跨平台解决方案的更好方法。

# python - Python真的是强类型的吗？

> ID：15372778
> 
> 赞同：0
> 
> 时间：2013-03-12T21:42:53.197
> 
> 标签：python, type-systems

我很清楚 Python 是动态类型的，动态类型与静态类型独立于强类型与弱类型。（只是为了消除可能的混乱。）

维基百科给出了一个字符串和一个整数的相加作为例子：你不能在强类型语言中做到这一点。但是在 Python 中你可以这样做： "string"*3 这显然也不是鸭子类型。这只是一般规则的一个例外，还是 Python 不是真正的强类型？还是我对弱与强的定义不够了解？请赐教。

编辑：当我被提示给出我对强类型意味着什么的定义时，我理解它被定义为不能在操作中混合数据类型。让我感到困惑的是，维基百科给出了不可能添加字符串和 int 的例子，为什么 python 是强类型的，它们的乘法是可能的，这在我的解释中构成了一个为什么它是弱类型的例子。我只提到了鸭子类型，因为它似乎创建了一个例外，因为您可以混合数据类型，只要它们看起来和行为相同。（哪些字符串和整数显然不行。）

edit2：我也认为这不是重复的，因为另一个问题实际上是关于静态/动态类型的。

# javascript - Gallerific：多个画廊？

> ID：15372787
> 
> 赞同：0
> 
> 时间：2013-03-12T21:43:31.393
> 
> 标签：javascript, jquery, gallery, galleriffic

我正在一个网站上工作，该网站在同一页面上需要多个 jQuery 库，并且我**[使用 Trent Foley 的工作模型 Gallerific](http://www.twospy.com/galleriffic/)**。对于一些网站，我已经成功地轻松地使用了[缩略图翻转效果和幻灯片交叉淡入淡出版本](http://www.twospy.com/galleriffic/example-2.html)，但是我很难在*每页上实现多个画廊画廊*。

一些论坛建议为每个画廊使用不同的 id - 我了解它是如何工作的，并且玩了几个小时但没有成功。我想知道如何将所有这些结合在一起以包含 CSS 和 jQ。

是否有任何工作模型可以成功完成？

这是文章......对于那些熟悉插件的人来说，你会看到很多这样的东西：

**HTML**

```
<!-- Start Advanced Gallery Html Containers -->
            <div id="gallery" class="content" style="margin-left: -100px;">
                <div id="controls" class="controls"></div>
                <div class="slideshow-container" style="margin-left: -100px;">
                    <div id="loading" class="loader"></div>
                    <div id="slideshow" class="slideshow"></div>
                </div>
                <div id="caption" class="caption-container"></div>
            </div>
                <div id="thumbs" class="navigation">
                <ul class="thumbs noscript">
<li>
<a class="thumb" name="001" href="images/jim_tattoos/001.JPG" title="001">
<img src="images/jim_thumbs/001.jpg" alt="001" />
</a>
<div class="caption">
<div class="image-title">Alex Cuban Crest</div>
<div class="image-desc"></div>
</div>
</li>
<li>
<a class="thumb" name="001" href="images/jim_tattoos/001.JPG" title="001">
<img src="images/jim_thumbs/001.jpg" alt="001" />
</a>
<div class="caption">
<div class="image-title">Alex Cuban Crest</div>
<div class="image-desc"></div>
</div>
</li>
.....
.....
.....
</ul>
</div> 
```

**jQuery**

```
 jQuery(document).ready(function($) {
            // We only want these styles applied when javascript is enabled
            $('div.navigation').css({'width' : '300px', 'float' : 'left'});
            $('div.content').css('display', 'block');

            // Initially set opacity on thumbs and add
            // additional styling for hover effect on thumbs
            var onMouseOutOpacity = 0.67;
            $('#thumbs ul.thumbs li').opacityrollover({
                mouseOutOpacity:   onMouseOutOpacity,
                mouseOverOpacity:  1.0,
                fadeSpeed:         'fast',
                exemptionSelector: '.selected'
            });

            // Initialize Advanced Galleriffic Gallery
            var gallery = $('#thumbs').galleriffic({
                delay:                     2500,
                numThumbs:                 18,
                preloadAhead:              9,
                enableTopPager:            true,
                enableBottomPager:         true,
                maxPagesToShow:            7,
                imageContainerSel:         '#slideshow',
                controlsContainerSel:      '#controls',
                captionContainerSel:       '#caption',
                loadingContainerSel:       '#loading',
                renderSSControls:          true,
                renderNavControls:         true,
                playLinkText:              'Play Slideshow',
                pauseLinkText:             'Pause Slideshow',
                prevLinkText:              '&lsaquo; Previous Photo',
                nextLinkText:              'Next Photo &rsaquo;',
                nextPageLinkText:          'Next &rsaquo;',
                prevPageLinkText:          '&lsaquo; Prev',
                enableHistory:             false,
                autoStart:                 false,
                syncTransitions:           true,
                defaultTransitionDuration: 900,
                onSlideChange:             function(prevIndex, nextIndex) {
                    // 'this' refers to the gallery, which is an extension of $('#thumbs')
                    this.find('ul.thumbs').children()
                        .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
                        .eq(nextIndex).fadeTo('fast', 1.0);
                },
                onPageTransitionOut:       function(callback) {
                    this.fadeTo('fast', 0.0, callback);
                },
                onPageTransitionIn:        function() {
                    this.fadeTo('fast', 1.0);
                }
            });
        }); 
```

**CSS**

```
 div.content {
    /* The display of content is enabled using jQuery so that the slideshow content won't display unless javascript is enabled. */
    display: none;
    float: right;
    width: 630px; 
}

div.content a, div.navigation a {
    text-decoration: none;
    color: #777;
}
div.content a:focus, div.content a:hover, div.content a:active {
    text-decoration: underline;
}

div.controls  {
    margin: 15px 0 0 -80px;
    height: 23px;
}
div.controls a {
    padding: 5px;
    color: black; 
    font-size: large; 
}
div.ss-controls {
    float: left;
}
div.nav-controls {
    float: right;
    margin-right: 110px;
}
div.slideshow-container {
    position: relative;
    clear: both;
    width: 700px;
    height: 700px; /* This should be set to be at least the height of the largest image in the slideshow */
}
div.loader {
    position: absolute;
    top: 0;
    left: 0;
    background-image: url('loader.gif');
    background-repeat: no-repeat;
    background-position: center;
    width: 700px;
    height: 701px; /* This should be set to be at least the height of the largest image in the slideshow */
}

div.slideshow span.image-wrapper  {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
}
div.slideshow a.advance-link  {
    display: block;
    width: 700px;
    height: 701px; /* This should be set to be at least the height of the largest image in the slideshow */
    line-height: 701px; /* This should be set to be at least the height of the largest image in the slideshow */
    text-align: center;
}
div.slideshow a.advance-link:hover, div.slideshow a.advance-link:active, div.slideshow a.advance-link:visited {
    text-decoration: none;
}
div.slideshow img {
    margin: 12px 0 0 0;
    padding: 0;
    border: 1px solid #ccc;
}
div.download {
    float: right;
}
div.caption-container {
    clear:left;
    position: relative;
    height: 75px;
    margin: 0 0 0 -300px; /*ADDED STYLING */
}
span.image-caption {
    display: block;
    position: absolute;
    width: 550px;
    top: 0;
    left: 0;
}
div.caption  {
    padding: 12px;
    margin-left: -50px;
}
div.image-title  {
    font-weight: bold;
    font-size: 1.4em;
    margin: -102px 0 0 -25px; /*ADDED STYLING */
}
div.image-desc {
    line-height: 1.3em;
    padding-top: 12px;
}

#thumbs.navigation  { /*ADDED STYLING */
 margin-left: 30px;
}

div.navigation  {
    /* The navigation style is set using jQuery so that the javascript specific styles won't be applied unless javascript is enabled. */
}
ul.thumbs {
    clear: both;
    padding: 0;

}
ul.thumbs li {
    float: left;
    padding: 0;
    margin: 10px 10px 5px 0;
    list-style: none;
}
a.thumb  {
    padding: 2px;
    display: block;
    border: 1px solid #ccc;
}
ul.thumbs li.selected a.thumb {
    background: #000;
}
a.thumb:focus {
    outline: none;
}
ul.thumbs img  {
    border: none;
    display: block;
}
div.pagination {
    clear: both;

}
div.navigation div.top {
    margin: 10px 10px 10px 0; /* ADDED STYLING */
    height: 11px;
}
div.navigation div.bottom {
    margin-top: -2px; 
}

div.pagination a, div.pagination span.current, div.pagination span.ellipsis {
    display: block;
    float: left;
    margin: 0 3px 6px 0;
    padding: 0 5px 0 5px;
    border: 2px solid #6e3b48;
    border-radius: 5px;
     -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    -o-border-radius: 4px;
    -ms-border-radius: 4px;
    background: -moz-linear-gradient(19% 75% 90deg,#f0d967, #FDF0D1, #fff 100%);
    background: -webkit-gradient(linear, 0% 25%, 50% 100%, from(#FFFFFF), to(#f0d967), color-stop(.3,#FDF0D1));
}

div.pagination a:hover {
    cursor: pointer;
    background: -moz-linear-gradient(19% 75% 90deg,#f0bf52, #f0bf52, #F5F5F5 100%);
    background: -webkit-gradient(linear, 0% 25%, 50% 100%, from(#F5F5F5), to(#f0bf52), color-stop(.3,#F2E6C8));
}
div.pagination span.current {
    font-weight: bold;
    background-color: #000;
    border-color: #000;
    color: #6e3b48;
}
div.pagination span.ellipsis {
    border: none;
    padding: 5px 0 3px 2px;
} 
```

*有两个独立的文件，可以从顶部列出的网站获得：*

**jquery.galleriffic.js**和**js/jquery.opacityrollover.js**

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:49:41.633

好的，所以经过更多挖掘后，我能够通过[Gallerific 的 Google 代码论坛](https://code.google.com/p/galleriffic/issues/list)找到答案。

它实际上归结为重命名每个画廊的#ID 集，将画廊包装在一个名为“每个画廊”的类中，然后通过 for 循环运行它

```
$(".each-gallery").each(function(i) 
```

通过用户名“hiphop...@gmail.com”在[第 76 期页面](https://code.google.com/p/galleriffic/issues/detail?id=76)上下载 HTML/JQ 文件，然后从[Galleriffic](http://www.twospy.com/galleriffic/index.html)主页复制 CSS 文件。然后插入您的图像和样式，效果很好。

# php - 停止 .htaccess 阻止 cron 作业

> ID：15372788
> 
> 赞同：1
> 
> 时间：2013-03-12T21:43:35.440
> 
> 标签：php, security

我的网站上有一个 php 脚本，它在运行时会更改我主页上的“今日之狗”。我有一个 cron 作业设置为每天运行一次脚本，并且一切正常。

我已经用 .htaccess 文件保护了我的“脚本”目录，因为如果有人偶然发现了 php 脚本，它将运行，从而更新“今日之狗”。

```
ErrorDocument 404 /404.php

order deny,allow
deny from all
allow from 127.0.0.1 
```

我将 cron 作业更改为每分钟运行一次，但 .htaccess 阻止了它，尽管 127.0.0.1 被列入白名单。我把127.0.0.1改成自己的ip，可以访问了，所以语法没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:46:41.437

将脚本移出 DocumentRoot 并移至 /opt/sitename 或其他地方。允许它修改 DocumentRoot 中的文件，根本不用担心人们会绊倒它。

# css - 尝试在 Safari 中添加边框时，Twitter 引导 img-circle

> ID：15372790
> 
> 赞同：1
> 
> 时间：2013-03-12T21:43:38.857
> 
> 标签：css, twitter-bootstrap

正如您可能猜到的那样，img-circle 类创建了一个圆形图像。现在，当您尝试为该类添加边框时，它的行为很奇怪：它使图像变成正方形，并带有截止边缘。顺便说一句，它在 Firefox 和 Chrome 上运行良好。

请参阅附件以查看差异以及代码！

![苹果浏览器](../Images/b627fdb1504abe198ba5c2fab6b96d14.png) ![铬和火狐](../Images/3f52559d6acb053afd8161ab242dd381.png)

```
div#face-wrapper .face {
 position: absolute;
 z-index: 1;
 border: 15px solid #e8e6e6;
}
.img-circle {
-webkit-border-radius: 500px;
-moz-border-radius: 500px;
border-radius: 500px;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T00:14:50.707

似乎边框总是在图像的后面，所以一旦你使用css3作为border-radius，为什么不使用box-shadow作为边框呢？前任。：

[**演示**](http://cssdeck.com/labs/po5ftvcb)

`.box-shadow{ -moz-box-shadow: 0px 0px 0px 15px #e8e6e6; /* Firefox */
-webkit-box-shadow: 0px 0px 0px 15px #e8e6e6; /* Safari, Chrome */
box-shadow: 0px 0px 0px 15px #e8e6e6; /* CSS3 */ }`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T05:39:57.750

这是一个[更简单](http://jsfiddle.net/brettdewoody/yqpg5/)的方法，使用 'shrink-wrap' `span`。

## HTML

```
<span id="face-wrapper">
  <img class="img-circle face" src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcSdlzsBNiqrnes9kVJ3zTReXHfgca2qkDD1kgvCR82OxzYsPaTz" width="200"/>
</span> 
```

## CSS

```
#face-wrapper {
  display: inline-block;
  background-color:#e8e6e6; 
}

.face {
  position: relative;
  border: 20px solid #e8e6e6;
} 
```

和完整的[jsFiddle](http://jsfiddle.net/brettdewoody/yqpg5/)。

# primefaces - Primefaces Block UI 在生成 jasperreports 报告时不起作用。

> ID：15372791
> 
> 赞同：1
> 
> 时间：2013-03-12T21:43:44.623
> 
> 标签：primefaces, jasper-reports, blockui

问候来自南美洲。我正在生成一个报告（使用 jasper 报告），所以当这个过程发生时，我想阻止显示适当消息的页面。该报告使用以下代码行**完美地触发了该操作：**

```
<p:commandButton id="pago" actionListener="#{transaccionBncController.reporteGeneral}" value="Reporte General " ajax="false"/> 
```

**注意**：必须使用 ajax="false" 属性，否则一切都会变糟，并且无法生成报告！

现在，当我尝试添加 Primefaces blockUI 组件以阻止页面并显示适当的消息（生成报告时）时，我正在使用以下代码：

```
<p:blockUI block="panelGrid" trigger="pago">
 Generando Reporte...<br />  
 <h:graphicImage library="images" name="ajaxloading.gif"/> 
</p:blockUI> 
```

blockUI 组件运行良好，但报告不再起作用。我已经尝试了一切，关于 ajax="false" 属性和阻止页面的问题总是相同的。

以下是我正在研究的整个来源：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org    /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:p="http://primefaces.org/ui">

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/template.xhtml">

    <ui:define name="content" >
        <fieldset id="fieldsetgenerico" >
            <legend> Reporte General </legend>
            <h:form id="formreporte">
                <p:growl autoUpdate="true" life="3000"  id="growl" />  
                <h:panelGrid columns="3" id="panelGrid" >

                    <h:outputLabel value="Fecha inicial: " for="fechaInicial" /> 
                    <p:calendar id="fechaInicial" value="#   {transaccionBncController.fechaInicial}" pattern="dd/MM/yyyy"  locale="es" required="true" requiredMessage="Fecha Inicial Requerida" navigator="true" effect="fadeIn" effectDuration="100"/>

                    <h:outputLabel value="" /> 

                    <h:outputLabel value="Fecha Final: " for="fechaFinal"/>
                    <p:calendar id="fechaFinal" value="# {transaccionBncController.fechaFinal}" pattern="dd/MM/yyyy" locale="es" required="true" requiredMessage="Fecha Final Requerida" navigator="true" effect="fadeIn" effectDuration="300"/>

                    <p:tooltip for="fechaFinal" value="Campo Requerido. No puede ser anterior a la Fecha Inicial" showEffect="clip" hideEffect="clip" />

                    <h:outputLabel value="Estado: " for="estado"  />     
                    <h:selectOneMenu id="estado" value="#{transaccionBncController.estTra}"  >                                       
                        <f:selectItems value="#{estadoTransaccionBncController.itemsAvailableSelectOne}"  />                                    
                    </h:selectOneMenu>
                    <h:outputLabel value="" />

                    <h:outputLabel value="Tipo Transaccion: " for="tipoTransaccion"/>
                    <h:selectOneMenu id="tipoTransaccion" value="#{transaccionBncController.tipTra}"  
                                     valueChangeListener="#{transaccionBncController.defineTipoTransaccion}"  >
                        <f:selectItems value="#{tipoTransaccionBncController.itemsAvailableSelectOne}"/>
                        <f:ajax  execute="@all" render="panelGrid1" immediate="true"></f:ajax>     
                    </h:selectOneMenu>
                    <h:outputLabel value="" />

                    <h:outputLabel value="Entidad Financiera: " for="entidadFinanciera"  />                               
                    <h:selectOneMenu id="entidadFinanciera" value="#{transaccionBncController.cliente}" 
                                     valueChangeListener="#{transaccionBncController.actualizaAgencias}" >  
                        <f:selectItems value="#{clienteBncController.itemsAvailableSelectOne}"/>  
                        <f:ajax  execute="@form" render="panelGrid" ></f:ajax> 
                    </h:selectOneMenu>
                    <h:outputLabel value="" /> 

                    <h:outputLabel value="Agencia: " for="agencia"  />
                    <h:selectOneMenu id="agencia" value="#{transaccionBncController.ag}"  >
                        <f:selectItems value="#{transaccionBncController.itemsAvailableSelectOneAgencia}"/>                 
                    </h:selectOneMenu>
                    <h:outputLabel value="" /> 

                    <h:outputLabel value="Código Financiero: " for="codFinanciero"  />
                    <h:selectOneMenu id="codFinanciero" value="#{transaccionBncController.codigoFinanciero}"   >
                        <f:selectItems value="#{productoBncController.itemsAvailableSelectOneC}"/>
                    </h:selectOneMenu>
                    <h:outputLabel value="" />

                </h:panelGrid>           
                <br/>               
                <h:panelGrid columns="2" id="panelGrid1">   
                    <p:commandButton id="pago" icon="ui-icon-check"  actionListener="#{transaccionBncController.reporteGeneral}" value="Reporte General " rendered="#{transaccionBncController.tipTransaccion != 'ANULACION' }" update="growl" style="margin:0" /> 
                    <p:blockUI block="panelGrid" trigger="pago"  >
                        Generando Reporte<br />  
                        <h:graphicImage library="images" name="ajaxloading.gif"/> 
                    </p:blockUI>    
                </h:panelGrid>      
            </h:form>
        </fieldset>
    </ui:define>
</ui:composition>

</html> 
```

我认为这个问题的根本原因是 ajax 交互，因为生成报告（没有 blockui 代码）效果惊人。这是我从中获取报告的源代码：

```
public void reporteGeneral(ActionEvent actionEvent) throws JRException, IOException, SQLException {

        DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
        Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@170.25.18.38:1521:xxx", "xxx", "xxx");

        Map<String, Object> parametros = new HashMap<String, Object>();
        parametros.put("fechaInicial", fInicial);
        parametros.put("fechaFinal", fFinal);
        parametros.put("query", query);

        String reportPath = FacesContext.getCurrentInstance().getExternalContext().getRealPath("/reportes/report4.jasper");
        jasperPrint = JasperFillManager.fillReport(reportPath, parametros, conn);

        //jasperPrint=JasperFillManager.fillReport(reportPath, new HashMap(),conn); 

        HttpServletResponse httpServletResponse = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();

        java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat("dd-MM-yyyy");
        String fi = sdf.format(fInicial);
        String ff = sdf.format(fFinal);

        String fecha = fi.toString() + "_" + ff.toString();

        httpServletResponse.addHeader("Content-disposition", "attachment; filename=reporte_" + fecha + ".pdf");
        ServletOutputStream servletOutputStream = httpServletResponse.getOutputStream();

        JasperExportManager.exportReportToPdfStream(jasperPrint, servletOutputStream);

        FacesContext.getCurrentInstance().responseComplete();
} 
```

十分感谢大家。对不起，如果这个问题是新手，但我认为这是一个很好的学习机会，因为我在互联网上没有找到关于这个话题的东西。再次，非常感谢您的帮助。圣地亚哥

# c# - “应用程序安装失败。出现运行时错误。修复 WMAppManifest.xml 文件中的功能。”

> ID：15372792
> 
> 赞同：7
> 
> 时间：2013-03-12T21:43:50.487
> 
> 标签：c#, windows-phone-8

我正在为 WP8 构建这个简单的应用程序。一切正常，直到今天我不得不在清单文件中添加一个新功能以允许访问传感器。我只是用图形编辑器打勾`ID_CAP_SENSORS`。现在每次我尝试部署我的应用程序时，我都会得到：

```
Installation of the application failed. Run time error has eccured. Fix the capabilities in WMAppManifest.xml file. 
```

这是我的整个清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Deployment xmlns="http://schemas.microsoft.com/windowsphone/2012/deployment" AppPlatformVersion="8.0">
  <DefaultLanguage xmlns="" code="en-US" />
  <App xmlns="" ProductID="{445cf5dd-14ec-4542-a44b-3d5600c1a6e5}" Title="BitCoinTile" RuntimeType="Silverlight" Version="1.0.0.1" Genre="apps.normal" Author="Wiktor Zdziechowski" Description="This very simple application helps you to keep track of BitCoin price." Publisher="XXX" PublisherID="{38b628a8-f9ec-4f05-a22e-5eba9ffe686e}">
    <IconPath IsRelative="true" IsResource="false">Assets\Tiles\FlipCycleTileMedium.png</IconPath>
    <Capabilities>
      <Capability Name="ID_CAP_NETWORKING" />
      <Capability Name="ID_CAP_WEBBROWSERCOMPONENT" />
      <Capability Name="ID_CAP_SENSORS" />
    </Capabilities>
    <Tasks>
      <DefaultTask Name="_default" NavigationPage="MainPage.xaml" />
    </Tasks>
    <Tokens>
      <PrimaryToken TokenID="BitCoinTailToken" TaskName="_default">
        <TemplateFlip>
          <SmallImageURI IsRelative="true" IsResource="false">Assets\Tiles\FlipCycleTileMedium.png</SmallImageURI>
          <Count>0</Count>
          <BackgroundImageURI IsRelative="true" IsResource="false">Assets\Tiles\FlipCycleTileMedium.png</BackgroundImageURI>
          <Title>BitCoinTile</Title>
          <BackContent>
          </BackContent>
          <BackBackgroundImageURI>
          </BackBackgroundImageURI>
          <BackTitle>
          </BackTitle>
          <DeviceLockImageURI>
          </DeviceLockImageURI>
          <HasLarge>
          </HasLarge>
        </TemplateFlip>
      </PrimaryToken>
    </Tokens>
    <Extensions>
      <Extension ExtensionName="LockScreen_Notification_TextField" ConsumerID="{111DFF24-AA15-4A96-8006-2BFF8122084F}" TaskID="_default" />
    </Extensions>
    <ScreenResolutions>
      <ScreenResolution Name="ID_RESOLUTION_WVGA" />
      <ScreenResolution Name="ID_RESOLUTION_WXGA" />
      <ScreenResolution Name="ID_RESOLUTION_HD720P" />
    </ScreenResolutions>
    <Requirements>
      <Requirement Name="ID_REQ_GYROSCOPE" />
    </Requirements>
  </App>
</Deployment> 
```

我的清单文件对我来说似乎没问题。我不知道如何调试它。编译器甚至没有显示正是我有问题。我会很高兴任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:48:43.933

HTC 8S**没有**陀螺仪（我刚试过）。如果您指定，这就是您得到的错误：

```
<Requirements>
  <Requirement Name="ID_REQ_GYROSCOPE" />
</Requirements> 
```

并尝试在没有陀螺仪的开发手机上运行该应用程序。

当然，App Store 会隐藏任何此类应用程序，因此 HTC 8S 将无法下载它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T16:07:27.990

哇！在浪费了一些时间试图解决这个问题之后，我最终通过只保留我实际使用的那些功能来解决它**​​，**不多也不少！就我而言，我只需要互联网许可，所以这就是我的 WMAppManifest.xml 的功能部分现在的样子

```
<Capabilities>
      <Capability Name="ID_CAP_NETWORKING" />
</Capabilities> 
```

# sql - 简单的 t-sql 而不是触发器

> ID：15372794
> 
> 赞同：0
> 
> 时间：2013-03-12T21:44:03.717
> 
> 标签：sql, sql-server, tsql

任何人都可以通过板载触发器帮助解决简单的 t-sql 脚本问题吗？我使用非常简单的触发器将数据从一个表复制到另一个表（这些表之间没有关系）。当我尝试在触发器创建后（从同一个脚本）第一次直接插入数据时，我得到了想要的结果，但是所有下一次尝试都失败了，下一个提示：' `The current transaction cannot be committed and cannot support operations that write to the log file. Roll back the transaction.`'我很困惑这是什么意思。看看下面的触发器：

```
CREATE TRIGGER AuthorInsert ON Author
INSTEAD OF INSERT
AS
BEGIN -- //- 1 -//
--***************** if insert was correct ********************
    IF (SELECT COUNT(*) FROM INSERTED) > 0
    BEGIN --//- 2 -//
        DECLARE @id int, @roleId int;
        DECLARE @nameId int, @reestrCodeId int, @passportDataId int, @addressId int, @phoneId int;
        SET @nameId = (SELECT INSERTED.NameID FROM INSERTED);
        SET @reestrCodeId = (SELECT INSERTED.ReestrCodeID FROM INSERTED);
        SET @passportDataId = (SELECT INSERTED.PassportDataID FROM INSERTED);
        SET @addressId = (SELECT INSERTED.AddressID FROM INSERTED);
        SET @phoneId = (SELECT INSERTED.PhoneID FROM INSERTED);
        BEGIN TRY
            INSERT INTO Role(RoleName) VALUES('Author');
        END TRY
        BEGIN CATCH
        END CATCH
        SET @roleId = (SELECT Role.RoleID FROM Role WHERE Role.RoleName = 'Author');
        INSERT INTO Employee(NameID, ReestrCodeID, RoleID, PassportDataID, AddressID, PhoneID)VALUES
                            (@nameId, @reestrCodeId, @roleId, @passportDataId, @addressId, @phoneId);
        SET @id = (SELECT Employee.EmployeID FROM Employee WHERE Employee.EmployeID = @@IDENTITY) + 1;
        INSERT INTO Author VALUES(@id, @nameId, @reestrCodeId, @passportDataId, @addressId, @phoneId);
    END -- //- 2 -//
END -- //- 1 -// 
```

没有理由发布表格的图表，因为它非常原始（正如我在上面提到的那样，这些表格之间没有直接关系）显而易见。我的脚本有什么问题，这个奇怪的错误到底是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T22:40:18.227

我不确定该`BEGIN TRY`块的意义是什么。很明显，您想确保有一个`Role`命名`Author`- 但您真的需要每次都在触发器中检查它吗？你不能现在填充它，并且永远不必再次检查吗？

*   [在创建/更改/引用对象时，](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)请始终使用模式前缀。
*   我在模块主体周围添加了适当的`BEGIN/END`包装器，并添加了`SET NOCOUNT ON;`
*   我`COUNT(*) from inserted`改为`IF EXISTS`. 当您真的不在乎它是 1、10 还是 6000 时，没有理由费心检索实际计数。
*   我从`inserted`. 正如@marc_s 指出的那样，您不能依赖它，因为触发器是按*语句*触发的，而不是按*行*触发的。因此，如果您有一个多行插入，您现有的触发器将只处理一个任意行。
*   我删除了`TRY/CATCH`块。[在大多数情况下，自己检查违规行为比让 SQL Server 为您检查更有效，](http://www.sqlperformance.com/2012/08/t-sql-queries/error-handling)尤其是在触发器中，因为它不仅对触发器代码有影响，而且对外部事务也有影响（如您所见） . 特别是在您的情况下，在第一次运行此触发器后可能每次都会引发异常。
*   我不得不猜测`Author`. [请始终在和](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)[声明](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)[中包含您的列列表`SELECT``INSERT`](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)。除了该帖子中所述的原因之外，它还使其他人更容易帮助您重新编写代码。

```
CREATE TRIGGER dbo.AuthorInsert ON dbo.Author INSTEAD OF INSERT
AS
BEGIN
  SET NOCOUNT ON;
  IF EXISTS (SELECT 1 FROM inserted)
  BEGIN
    DECLARE @emps TABLE(id INT, NameID INT);
    DECLARE @RoleID INT;    
    SELECT @RoleID = RoleID FROM dbo.Roles WHERE RoleName = 'Author';

    IF @RoleID IS NULL
    BEGIN
      -- probably not necessary to do this over and over again
      -- unless someone is sabotaging your Roles table.
      INSERT dbo.Roles(RoleName) SELECT 'Author';
      SELECT @RoleID = SCOPE_IDENTITY();
    END

    INSERT dbo.Employee(NameID, ReestrCodeID, RoleID, PassportDataID, 
      AddressID, PhoneID) OUTPUT inserted.EmployeeID, inserted.NameID 
      INTO @emps SELECT NameID, ReestrCodeID, @RoleID, PassportDataID, 
       AddressID, PhoneID FROM inserted;

    -- this seems redundant. If an author is linked to an employee, 
    -- why do we need to store all of this information again?
    INSERT dbo.Author(EmployeeID, NameID, ReestrCodeID, RoleID, 
      PassportDataID, AddressID, PhoneID)
      SELECT e.id, i.NameID, i.ReestrCodeID, @RoleID, 
        i.PassportDataID, i.AddressID, i.PhoneID FROM @emps AS e
        INNER JOIN inserted AS i ON e.NameID = i.NameID;
  END
END
GO 
```

# ruby-on-rails - update_attributes 未插入所有属性

> ID：15372795
> 
> 赞同：1
> 
> 时间：2013-03-12T21:44:05.497
> 
> 标签：ruby-on-rails, nested-attributes

我正在尝试使用 update_attributes 和 accept_nested_attributes_for 从父母（位置）控制器更新一些子对象（days_events）。

params hash 中的一切看起来都不错，但是当我尝试使用 assign_attributes 或 update_attributes 时，实际日期没有得到更新。第一天的事件记录在数据库中成功创建，因为它应该使用 event_id 和 location_id 但 start_date 和 end_date 字段为空.

日期字段也没有任何模型限制。

这是我的位置（父）控制器中的代码：

```
def update
    logger.debug('PARAMS HASH********'+params.to_s)

    @total_forms=params[:total_forms].to_i
    @current_form=params[:current_form].to_i

    @location = Location.find(params[:id])       

    @location.update_attributes(params[:location])
  end 
```

这是我的参数哈希：

```
{
"utf8"=>"Γ£ô", 
"_method"=>"put", 
"authenticity_token"=>"Mz2GzRmqxrygy01d2LdkE6ZZY+fJK1PSlVhFKlVUme8=", 
"location"=>{
    days_events_attributes"
=>{
    "0"=>{
        "start_date"=>"03/14/2013", 
        "end_date"=>"03/14/2013", 
        "_destroy"=>"false", 
        "event_id"=>"588"
        }, "
    1"=>{"
        start_date"=>"", 
        "end_date"=>"", 
        "_destroy"=>"1",
        "event_id"=>"588"
        },
    "2"=>{
        "start_date"=>"",
        "end_date"=>"", 
        "_destroy"=>"1", 
        "event_id"=>"588"
        }
    }
 }, 
 "total_forms"=>"2", 
 "current_form"=>"0", 
 "commit"=>"Add Date s for Next Location", 
 "action"=>"update", 
 "controller"=>"locations", 
 "id"=>"871"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:24:51.830

检查日期格式，例如 MySQL 使用 YYYY-MM-DD 格式，如果您输入的格式无效，它将直接拒绝它。

如果您想规范化日期格式而不管您得到什么作为输入，我建议`before_validation`在您的模型中添加一个钩子并在那里执行。检查[这个问题](https://stackoverflow.com/questions/4349254/rails-way-formatting-value-before-setting-it-in-the-model)的答案以获得建议，它不处理日期（它显示如何格式化价格属性），但它应该让您了解您需要做什么。

如果您需要帮助格式化日期，请在此处发表评论，我会尽快处理。

希望能帮助到你 ：）

# objective-c - 将 ivars 放入 init

> ID：15372796
> 
> 赞同：0
> 
> 时间：2013-03-12T21:44:14.750
> 
> 标签：objective-c, ivar

我有两个视图控制器：`BSViewController`其中包含源 ivars`number`和`array`，以及`BSotherViewController`作为目标需要接收 ivars 。[这个问题提供了一种产生所需结果的方法。](https://stackoverflow.com/questions/15360290/receive-ivar-in-other-class)建议是计算 和 的值，并`self.number`覆盖指定的值，如此处所示。`self.array``init``init`

```
- (id)init {

    if (self = [super init]) {
        //Set values
        NSArray*  _array = [NSArray arrayWithObjects: @"manny",@"moe",nil];
        self.array = _array;
        self.number = 25;
    }
    return self;
} 
```

但我不知道这个解决方案如何使原始方法（ ）的计算成为`self.number`可能；使用我尝试过的任何方法，我只能为它们的两个值获取 0 和 null 。`self.array``viewDidLoad``viewDidLoad`

此外，以下行会产生一个警告问题，`view`即未使用的变量。

```
BSViewController *view = [[BSViewController alloc] init]; 
```

所以我正在寻找一种方法，它首先计算我的 ivars `number`，`array`然后执行，`init(WithNumber)`以便可以在目标类中使用相同的变量`BSotherViewController`。

我认为更直接的方法是不使用`init`，而是使用类似以下的方法`initWithNumber`，但我似乎无法满足使用下划线的所有 ARC 要求，以及我对objective-c 的有限理解。

```
- (id)initWithNumber:(NSInteger)number array:(NSArray *)array
{
    self = [super init];
    if (self) {
        _number = number;
        _array = array;
        return self;
    }
    return nil;
} 
```

为了完整起见，我将在下面重现上一个问题的答案中生成的大部分代码。

BSViewController.h

```
#import <UIKit/UIKit.h>

@interface BSViewController : UIViewController{
   // NSInteger number;
}

@property (nonatomic) NSInteger number;
@property (nonatomic, weak) NSArray * array;
// - (id)initWithNumber:(NSInteger)number array:(NSArray *)array;
@end 
```

BSViewController.m

```
#import "BSViewController.h"
@interface BSViewController ()
@end
@implementation BSViewController
@synthesize number;
@synthesize array;
/*
- (id)initWithNumber:(NSInteger)number array:(NSArray *)array
{
    self = [super init];
    if (self) {
        _number = number;
        _array = array;
        return self;
    }
    return nil;
}
*/
- (id)init {
    if (self = [super init]) {
        NSArray*  _array = [NSArray arrayWithObjects: @"manny",@"moe",nil];
        self.array = _array;
        self.number = 25;
    }
    return self;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"self: %@", self);
    BSViewController *view = [[BSViewController alloc] init];  //Warning issued: unused variable
    NSLog(@"self number: %d", self.number);
    NSLog(@"self array: %@", self.array);
}
@end 
```

BSotherViewController.h

```
#import <UIKit/UIKit.h>
@class BSViewController;
@interface BSotherViewController : UIViewController
@property (strong, nonatomic) BSViewController *aview;
@end 
```

BSotherViewController.m

```
#import "BSotherViewController.h"
#include "BSViewController.h"
@interface BSotherViewController ()
@end

@implementation BSotherViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    BSViewController *aview = [[BSViewController alloc] init];
    NSLog(@"other view: %@", self.aview);
    NSLog(@"other number: %d", aview.number);
    NSLog(@"other array: %@", aview.array);
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:06:40.500

您正在使用故事板转场。segue 将通过从情节提要加载它来创建目标视图控制器。创建方法没有意义`-[BSotherViewController initWithNumber:array:]`，因为 segue 不会使用它。

当用户通过点击按钮触发 segue 时，系统会创建一个`UIStoryboardSegue`. 这个 segue 对象有一个`destinationViewController`属性，它将（在你的情况下）`BSotherViewController`是即将出现的实例。系统向`prepareForSegue:sender:`源视图控制器（您的`BSViewController`）发送一条消息，并将 segue 对象作为第一个参数传递。

您需要`prepareForSegue:sender:`在`BSViewController`. 在该方法中，您可以同时访问源视图控制器 ( `self`) 和目标视图控制器 ( `segue.destinationViewController`)，因此您可以将数据从一个视图控制器传递到另一个视图控制器。

首先，将`number`和`array`属性添加到`BSotherViewController`. 然后，将这样的方法添加到`BSViewController`：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // The identifier here must match the one you assigned to the segue in the storyboard.
    if ([segue.identifier isEqualToString:@"GoingToOtherViewController"]) {
        BSotherViewController *destination = segue.destinationViewController;
        destination.number = self.number;
        destination.array = self.array;
    }
} 
```

最后，在 中`-[BSotherViewController viewDidLoad]`，使用 new`number`和`array`properties 的值来设置视图的内容。

# c# - 多个字段并非全部为空

> ID：15372802
> 
> 赞同：1
> 
> 时间：2013-03-12T21:44:30.210
> 
> 标签：c#, .net, asp.net-mvc-3, validation

我有三个字段，用于启动搜索，其中任何两个都可以为空，但我需要检查以确保用户填写了*一些*内容。

所以，我有名字、姓氏和身份证号码。用户应该能够通过这些字段中的任何一个、两个或三个进行搜索，但是如果他们单击提交而不输入任何内容，我想捕获它。

我对 .NET 相当陌生，但据我所知，这意味着编写自定义验证。验证属性本身似乎还不够。

这是要走的路吗？如果是这样，或者如果其他方法更好，有人可以提供一些指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:52:29.260

您可以在搜索模型上实现 IValidatableObject 接口。

例子：

```
public class SearchModel: IValidatableObject
{
    public string Field1 { get; set; }
    public string Field2 { get; set; }
    public string Field3 { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (string.IsNullOrWhitespace(Field1) && string.IsNullOrWhitespace(Field2) && string.IsNullOrWhitespace(Field3))
            yield return new ValidationResult(("At least one field required.", new[] { "Field1", "Field2", "Field3" })

    }
} 
```

然后在你的控制器中：

```
[HttpPost]
public ActionResult Search(SearchModel searchModel)
{
   if (ModelState.IsValid)
   {
      //Search
   }
   else
   {
       return View(searchModel);
   }
} 
```

那么在你看来：

```
@model SearchModel

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>

        <div class="editor-label">
            @Html.LabelFor(model => model.Field1)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Field1)
            @Html.ValidationMessageFor(model => model.Field1)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Field2)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Field2)
            @Html.ValidationMessageFor(model => model.Field2)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Field3)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Field3)
            @Html.ValidationMessageFor(model => model.Field3)
        </div>

        <p>
            <input type="submit" value="Search" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:52:16.593

您基本上试图在提交之前验证字段是否有效，这是很有可能的。您可以构建自己的`Event Handler`来处理对这些组件的更改，您可以`Notifier`在按钮上处理一个。

有很多方法可以实现这样的壮举。让您熟悉概念概念的一种非常简单且基本的方法是*Error Provider*。

该组件可以在您的工具箱中找到，您只需将其拖到您的表单中即可。一旦它在那里，您可以对`textbox`.

```
if(textbox1.text == String.EmptyOrNull)
{
    errorProvider1.SetError(textbox1, "Please enter valid field.");
}
else
{
    errorProvider1.Dispose();
    MessageBox.Show(textbox1.text);
} 
```

显然，这是一种基本方法，需要重构，但这应该可以完成您的任务，并让您更加熟悉 C# 及其实现。

希望这会有所帮助。

* * *

**更新：**

我没有看到一个字段可以为空或为空。但是您需要其他两个字段；您可以像往常一样简单地进行字段验证，但您希望连接这些结果。

你会想要使用`&&`操作数。好像两个变量都为真；然后它将执行任务。哪里有`||`遗嘱允许一个人是假的来验证。

```
if(textbox1.text == String.EmptyOrNull) && 
        (textbox2.text == String.EmptyOrNull) && 
        (textbox3.text == String.EmptyOrNull))
{
    // One field is Null or Empty, do something.
} 
```

正如我所说，这是一种基本方法。有更有效的方法来处理此类验证，但我会从简单的开始，因为您是 C# 和 Microsoft .Net 的新手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:45:50.193

另一种选择是使用[Fluent Validation](http://www.deliveron.com/blog/post/A-Quick-Introduction-to-Fluentvalidation-in-aspnet-mvc.aspx)

# java - 发送 Gmail 错误

> ID：15372803
> 
> 赞同：0
> 
> 时间：2013-03-12T21:44:40.160
> 
> 标签：java, gmail, send

我在发送电子邮件时遇到问题。我有良好的 SMTP 和端口，但由于此错误而无法发送消息：

```
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 465, response: -1 
```

这是代码：

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        final String username = "stefanrafaa@gmail.com";
        final String password = "my password";
        Properties props = System.getProperties();
        props.put("mail.smtp.auth.", "true");
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.port", "465");
        Session session;
        session = Session.getInstance(props,
                new javax.mail.Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(username, password);
            }
        });
        try {
            // Create a default MimeMessage object.
            MimeMessage message = new MimeMessage(session);
            // Set From: header field of the header.
            message.setFrom(new InternetAddress("stefanrafa0@gmail.com"));
            // Set To: header field of the header.
            message.setRecipient(Message.RecipientType.TO,
                    new InternetAddress("stefanrafaa@gmail.com"));
            //subject message
            message.setSubject("Help Needed");
            // Now set the actual message
            message.setText("I need help please help me with this program");
            message.setContent("<h:body style=background-color :white;font-family:verdana;color:#0066CC;>"
                    + "If you are seeing this its OK !!!<br/><br/>"
                    + "</body>", "text/html; charset=utf-8");
            // Send message
            Transport.send(message);
            System.out.println("Sent message successfully...");
        } catch (MessagingException e) {
            throw new RuntimeException(e);
            //System.out.println("MessagingException: "+mex.getMessage());
            //JOptionPane.showMessageDialog(null, "[!]Cant connect to the database.");
        }
    } 
```

如果您知道我在 daniweb 中问过但没有快速回复，请回复...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:45:27.823

我也遇到了这个问题，解决了禁用问题`avast`并对我的代码进行了一些更改，如下所示：

```
public void simpleEmail2(String to, String subject, String message){
        Properties props = new Properties();
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.port", "587");

        Session session = Session.getInstance(props,
          new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(username, password);
            }
          });

        try {

            Message mmessage = new MimeMessage(session);
            mmessage.setFrom(new InternetAddress(username));
            mmessage.setRecipients(Message.RecipientType.TO, InternetAddress.parse(to));
            mmessage.setSubject("Testing Subject");
            mmessage.setText("Dear Mail Crawler,"
                + "\n\n No spam to my email, please!");

            Transport.send(mmessage);

            System.out.println("Done");

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:23:46.610

您可能想要这样做：

```
Properties props = new Properties();
props.put("mail.smtp.auth", "true"); 
```

代替：

```
Properties props = System.getProperties();
props.put("mail.smtp.auth.", "true"); 
```

您在末尾有一个点，`mail.smtp.auth`并且使用所有系统属性似乎是个坏主意。

这是一个例子[http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)

# php - 如何创建一个显示 sql 查询结果的表

> ID：15372806
> 
> 赞同：0
> 
> 时间：2013-03-12T21:44:50.347
> 
> 标签：php, sql

我正在寻找在 php 中创建一个显示以下查询结果的表：

```
SELECT users.id, SUM(votes.vote) AS TotalVotes
FROM users
LEFT JOIN nodes
INNER JOIN votes
ON nodes.id = votes.node_id
ON users.id = nodes.user_id
GROUP BY users.username
ORDER BY TotalVotes DESC 
```

我已经使用该站点的其他区域来组合上述查询，并且我已经在 PHP My Admin 中检查了它以查看它抛出的结果，它可以按照我的意愿工作。但是因为我以前从未使用过 sql，所以我不知道如何将此查询转换为将在网页上以 php 显示的结果表。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:51:06.983

我推荐： [http](http://php.net/manual/en/mysqli.query.php) ://php.net/manual/en/mysqli.query.php 在这里你会找到你需要的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:04:09.613

有很多关于使用 php 语句从 mysql 数据创建表的教程和资源；环顾四周，试一试。如果您遇到特定问题，请告诉我们是什么问题，我们会尽力提供帮助。以下是谷歌上弹出的一对：

[http://sudobash.net/web-dev-populate-phphtml-table-from-mysql-database/](http://sudobash.net/web-dev-populate-phphtml-table-from-mysql-database/)

[http://davidwalsh.name/html-mysql-php](http://davidwalsh.name/html-mysql-php)

[http://www.kavoir.com/2009/06/mysql-php-display-mysql-table-fields-and-data.html](http://www.kavoir.com/2009/06/mysql-php-display-mysql-table-fields-and-data.html)

# matlab - 图像局部区域的对比度拉伸

> ID：15372807
> 
> 赞同：2
> 
> 时间：2013-03-12T21:44:50.987
> 
> 标签：matlab, opencv, image-processing, contrast

我想对图像执行对比度拉伸。图像如图所示（数据提示由我在 MATLAB 中创建，以提供有关图像的更多信息，图像上已经存在时间戳）。

![在此处输入图像描述](../Images/8199193fa3ff2814b4d1c6c7ef84b6ca.png)

[现在，这里](https://stackoverflow.com/questions/8680593/how-can-i-change-the-contrast-of-an-image-using-opencv)已经描述了如何执行对比度拉伸。但是这个公式在这里不起作用，因为`imgMin=0`和`imgMax=255`。所以图像将保持不变。所以我的解决方法是局部对比度拉伸。我不确定如何做到这一点（而且相对较快，即我应该能够对比视频的拉伸帧并仍然实时播放视频。我尝试了直方图均衡，虽然它在 OpenCV 中产生实时结果，但对比度拉伸不是感人的）。要了解该算法是否有效，我也愿意使用 MATLAB。

我还展示了数据提示，您可以在其中看到像素值。我首先将我的彩色图像转换为灰度。简而言之，目标是白色车道应该变得更亮，尽管图像的最亮部分取值为 255（即太阳）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T22:39:22.760

使用较大的过滤器半径，您可能会通过**细节增强**过滤器获得您正在寻找的结果。一个流行的细节增强示例是 Adob​​e Lightroom 中的“清晰”效果。这些算法所做的实际上相当于增加局部对比度。

[引导过滤器](http://research.microsoft.com/en-us/um/people/jiansun/papers/guidedfilter_eccv10.pdf)可用于细节增强（参见链接论文的第 10 页），与更广为人知的双边过滤器相比，它对于视频来说可能足够快。它也相对容易实现，至少对于灰度图像或每通道操作。用于实验的 Matlab 代码在[这里](http://research.microsoft.com/en-us/um/people/kahe/eccv10/index.html)，如果我没记错的话，它包含一个细节增强示例。

**理论：**粗略地说，这个想法是将图像的高通滤波版本添加到原始图像中。如果您使用小的高通内核执行此操作，您会进行锐化，如果您使用大内核（让更多频率通过），您会进行细节增强。当您使用简单的高通滤波器解决问题时，引导滤波器是一种避免在明暗边界处出现光晕伪影的巧妙方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:31:38.800

如果您拥有整个颜色范围，我建议您决定您愿意“牺牲”多少像素，因为会有一些饱和度。您仍然可以使用对比方程（来自您的链接）

```
newValue = 255 * (oldValue - minValue)/(maxValue - minValue) 
```

唯一的区别是您手动决定`minValue`和`maxValue`。这样下面的一切`minValue`都会`0`; 类似的`255`。

升级 - 只需决定您愿意使用的百分比并自动设置界限。

编辑——那个“本地”让我想到了一个“高级”版本。也许你可以看看直方图（有 256 个 bin），看看是否有一些“洞”。假设您只有从 0 到 50 和从 205 到 255 的值。然后您可以将较低的值拉伸到 100，将较高的值拉伸到 155。唯一的问题是较低值和较高值之间的对比度更差。

# sql - 单个表的多个左连接

> ID：15372812
> 
> 赞同：0
> 
> 时间：2013-03-12T21:45:10.737
> 
> 标签：sql, outer-join

我有一大堆桌子：

```
Table1: PersonID, A1, A2, A3, ...

Table2: PersonID, B1, B2, B3, ...

Table3: PersonID, C1, C2, C3, ...

Table4: PersonID, D1, D2, D3, ...

... 
```

表 1 很特别，因为它实际上包含*所有*个人（姓名和个人信息），但所有其他表几乎可以肯定缺少行（一个人根本没有参与该事件）。

我想做的是将所有表连接在一起（通过公共 PersonID），这样任何缺少的属性都将被简单地留空。所以，当然，我想使用外连接。这是我尝试过的：

```
SELECT * 

FROM Table1, Table2, Table3, Table4, Table5, Table6

LEFT OUTER JOIN Table2 ON Table1.PersonID = Table2.PersonID
LEFT OUTER JOIN Table3 ON Table1.PersonID = Table3.PersonID
LEFT OUTER JOIN Table4 ON Table1.PersonID = Table4.PersonID
LEFT OUTER JOIN Table5 ON Table1.PersonID = Table5.PersonID
LEFT OUTER JOIN Table6 ON Table1.PersonID = Table6.PersonID 
```

所有这一切都让我记忆力超负荷。我想我以某种方式把我所有桌子的笛卡尔积都拿走了，这让一切都窒息了。有没有好的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:46:52.617

用这个：

```
SELECT * 
FROM Table1
LEFT OUTER JOIN Table2 ON Table1.PersonID = Table2.PersonID
LEFT OUTER JOIN Table3 ON Table1.PersonID = Table3.PersonID
LEFT OUTER JOIN Table4 ON Table1.PersonID = Table4.PersonID
LEFT OUTER JOIN Table5 ON Table1.PersonID = Table5.PersonID
LEFT OUTER JOIN Table6 ON Table1.PersonID = Table6.PersonID 
```

查看**[SQL 连接](http://www.w3schools.com/sql/sql_join.asp)**表单的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:48:14.947

改变这个：

```
SELECT * 

FROM Table1, Table2, Table3, Table4, Table5, Table6

LEFT OUTER JOIN Table2 ON Table1.PersonID = Table2.PersonID
LEFT OUTER JOIN Table3 ON Table1.PersonID = Table3.PersonID
LEFT OUTER JOIN Table4 ON Table1.PersonID = Table4.PersonID
LEFT OUTER JOIN Table5 ON Table1.PersonID = Table5.PersonID
LEFT OUTER JOIN Table6 ON Table1.PersonID = Table6.PersonID 
```

对此：

```
SELECT * 

FROM Table1
LEFT OUTER JOIN Table2 ON Table1.PersonID = Table2.PersonID
LEFT OUTER JOIN Table3 ON Table1.PersonID = Table3.PersonID
LEFT OUTER JOIN Table4 ON Table1.PersonID = Table4.PersonID
LEFT OUTER JOIN Table5 ON Table1.PersonID = Table5.PersonID
LEFT OUTER JOIN Table6 ON Table1.PersonID = Table6.PersonID 
```

是的，你正在使用所有表格的笛卡尔积，然后将其加入其他表格

# pinch - hammer.js 滚动不适用于捏合和捏合事件

> ID：15372816
> 
> 赞同：2
> 
> 时间：2013-03-12T21:45:27.260
> 
> 标签：pinch, hammer.js

我正在使用hammer.js 来捕捉pinchin 和pinchout 事件并更改页面的字体大小。所以，我写了以下代码：

```
 var touch_area = document.getElementById('touch-area');
        var hammertime = Hammer(touch_area).on("pinchin pinchout", function (ev) {
            //alert(ev.type);
            if(ev.type=="pinchin")
                decreaseFontSize();
            else
                increaseFontSize();

        }); 
```

它可以工作，但会禁用垂直滚动。我该如何解决？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-30T15:11:49.223

Ashish Maradiya 的作品对我来说很好，但只在安卓上。

经过大量研究后，我仅使用以下代码就可以在 android 和 iphone 中做到这一点：

```
 var mc = new Hammer.Manager(myElement, {
        touchAction: 'manipulation'
    });
    mc.add([new Hammer.Pinch()]);

    mc.on("pinchin", function (ev) {
        //code
    });
    mc.on("pinchout", function (ev) {
        //code
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T12:23:47.747

将 css 属性应用于您的 (#touch-area) div

```
#touch-area{
touch-action: pan-x pan-y !important;
}
```

hammer.js pinch, pincin, pinchout 事件总是添加 touch-action:none 属性而不是我们的滚动属性不起作用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-12T15:15:01.673

尝试添加这个 CSS：

```
body {overflow-y:scroll;} 
```

如果稍后，您希望同时启用垂直和水平滚动条，请使用此

```
body{ overflow: scroll; } 
```

# arduino - Arduino F() 宏的实现

> ID：15372821
> 
> 赞同：4
> 
> 时间：2013-03-12T21:45:50.863
> 
> 标签：arduino

我试图了解 Arduino 中的 F() 宏对 PGMEM 和 RAM 的实际作用以及运行时的影响。有人可以指出定义此宏的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:19:08.603

这可能是一个较旧的版本，但定义它的地方`Wstring.h`是[这里](http://andybrown.me.uk/wk/wp-content/images//avr-gcc-4.7.0/WString.h)。

您可以自己找到它：如果您安装了 Arduino，您可以搜索安装目录。`WString.h`应该在`hardware\arduino\cores\arduino\`

# git - Git：显示分支之间的差异，忽略合并的提交

> ID：15372825
> 
> 赞同：8
> 
> 时间：2013-03-12T21:46:03.177
> 
> 标签：git

我的存储库历史看起来像这样：

```
 x---y-+-z-+-branch
        /     /   /
---a---b---c-+-d-+-e---master 
```

我想获得'branch'完整历史的单个差异（即，像'git diff'输出-我不想要像'git log -p'产生的一大堆差异），而不包括任何从“主”合并到“分支”的更改。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T01:10:58.863

您正在寻找的命令是：

```
git diff master...branch 
```

来自`git help diff`：

> ```
> git diff [--options] <commit>...<commit> 
> ```
> 
> 此表单用于查看包含和直到第二个的分支上的更改

# android - 在eclipse的图形布局中显示一个android软键盘

> ID：15372826
> 
> 赞同：6
> 
> 时间：2013-03-12T21:46:05.283
> 
> 标签：android, eclipse, layout, android-softkeyboard

我用谷歌搜索了这个，但甚至没有关于它的话题。所以我在这里问。是否可以在 Eclipse 的图形布局编辑器中显示我用于活动的键盘类型？

我正在使用键盘始终打开并且无法通过用户输入消失的活动。该功能可以很好地为此设置布局。在键盘和东西的上边缘设置视图。

# ruby-on-rails - Rails Excel 2007 导出：将字节顺序标记添加到 .erb 模板

> ID：15372827
> 
> 赞同：1
> 
> 时间：2013-03-12T21:46:22.523
> 
> 标签：ruby-on-rails, excel, excel-2007

我通过为 xls 文件制作 erb 模板将数据导出到 Excel。这是遵循[Railscast 362](http://railscasts.com/episodes/362-exporting-csv-and-excel?view=asciicast)中推荐的用于正确编码导出的过程。

输出在 Excel for Mac 2011 中打开良好，但在 Excel 2007 中，像 é 这样的字符显示为 Ã©，因为 Excel 将 UTF-8 编码文件解释为 Latin1。

根据[这个答案](https://stackoverflow.com/a/155176/1450420)，如果 UTF-8 文件以正确的字节顺序标记 (BOM) 开头，Excel 2007 将正确解释它。

看看输出的十六进制版本，它似乎确实没有 BOM。

有许多来源（例如[此 Plataformatec 博客文章](http://blog.plataformatec.com.br/2009/09/exporting-data-to-csv-and-excel-in-your-rails-app/)）解释了如何在控制器中内联呈现数据时添加 BOM：

```
BOM = "\377\376"
BOM + Iconv.conv('utf-16le', 'utf8', data) 
```

我的问题是——有没有办法让 Excel 2007 正确解释模板？或者我应该回到在控制器中呈现数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T07:27:55.697

我不知道为什么 Excel 让这变得如此困难，但确实如此。

当我遇到此编码问题时，我自己尝试使用该代码。我不知道如何将它应用到我正在使用的东西上。所以我做了一个解决方法。

我按照 Railscast 中的说明下载了 CSV 文件。然后我用 TextWrangler 打开了文件，它正确地对其进行了编码。然后，我将内容复制并粘贴到一个空白 Excel 文档中（将其作为文本读取，因此不会弄乱编码）。之后，我选择了所有数据所属的列，然后在菜单栏中选择“数据->文本到列”。然后我选择了一个分隔列表并输入一个逗号作为分隔符（默认为制表符）。然后我完成了它，瞧，有一个格式正确的 Excel 文档。

# mysql - 无法连接到系统总线：无法连接到套接字 /var/run/dbus/system_bus_socket

> ID：15372828
> 
> 赞同：11
> 
> 时间：2013-03-12T21:46:28.263
> 
> 标签：mysql, ubuntu, vps

我开始使用带有 ubuntu 12.04 的新 VPS 系统

[按照这里](http://ubuntuforums.org/showthread.php?t=1977769)的命令后，我安装了 php、mysql、apache2

PHP 和 apache 运行良好，但是当我运行时：

```
service mysql start 
```

我得到：`unable to connect to system bus: failed to connect to socket /var/run/dbus/system_bus_socket: No such file or directory.`

我用谷歌搜索但没有找到足够的帮助。

*没有 /var/run/dbus/ 目录，我不知道我需要创建一个目录，或者即使这是 mysql 的问题。*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-08T06:25:36.543

我收到此错误消息并发现这是一个迹象，表明`initctl`（' [init daemon control tool](http://manpages.ubuntu.com/manpages/precise/en/man8/initctl.8.html) '）正在（间接）被调用而没有必要的权限。

换句话说：

它失败了，因为：

*   我没有以`root`用户身份登录，
*   我也没有在我的“守护进程控制”命令前加上`sudo`.

任何一个都可以解决这个问题。

这有点令人困惑，因为您会认为“特权问题”会触发一条有关“特权问题”的错误消息。但不是。它谈到“无法连接到系统总线”。

**所以，我可以建议：**

尝试通过在命令前加上 . 来临时提升您的权限`sudo`。

假设井号 ( `#`) 表示您的命令提示符，请改为运行以下命令：

```
# sudo service mysql start 
```

然后，根据提示输入您的用户密码。

**或者**

如果您`root`在安装 Ubuntu 时为用户设置了密码，则可以通过键入以下命令提升到该超级用户：

```
# su 
```

然后，`root`根据提示输入密码。

然后，在**这种情况下**，您的原始命令现在应该可以工作：

```
# service mysql start 
```

* * *

有关与服务、、、和命令的连接的更多信息，请参见它的[手册页说明。](http://manpages.ubuntu.com/manpages/precise/en/man8/initctl.8.html)`initctl``start``stop``restart``reload``status`

# php - 解析错误 - 语法错误，意外的 T_STRING

> ID：15372829
> 
> 赞同：0
> 
> 时间：2013-03-12T21:46:32.380
> 
> 标签：php

我试过自己诊断，但我不是程序员，真的希望你们能帮助我。从`functions.php`文件中，我被告知问题出在这`add_filter('excerpt_more', 'new_excerpt_more');`条线上，但我想包含大部分代码供大家查看。非常感谢所有帮助！

```
function new_excerpt_more($more) {
    global $post;
    return '...<br><a href="'.get_permalink($post->ID).'">Read More <img class="read-more" src="'.get_bloginfo('template_url').'/images/read-more-arrow.jpg" alt="Read More" /></a>';
}
add_filter('excerpt_more', 'new_excerpt_more');

// Custom excerpt length to show for like homepage small excerpts
function custom_excerpt_length($length) {
    return 100;
}
add_filter('excerpt_length', 'custom_excerpt_length', 999); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:51:04.547

问题出在上面的 return 语句行中。在分号之前，行尾缺少一个撇号。
该行应如下所示：
`return '...<br><a href="'. get_permalink($post->ID) . '">Read More <img class="read-more" src="'.get_bloginfo('template_url') . '/images/read-more-arrow.jpg" alt="Read More" /></a>';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:48:04.780

试试这个（在 return 语句的末尾添加单引号）：

```
function new_excerpt_more($more) {
    global $post;
    return '...<br><a href="'. get_permalink($post->ID) . '">Read More <img class="read-more" src="'.get_bloginfo('template_url') . '/images/read-more-arrow.jpg" alt="Read More" /></a>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:48:49.233

您是否在 StackOverflow 上看到错误的突出显示？您没有在以 开头的行关闭字符串`return`：

这个

```
return '...<br><a href="'. get_permalink($post->ID) . '">Read More <img class="read-more" src="'.get_bloginfo('template_url') . '/images/read-more-arrow.jpg" alt="Read More" /></a>; 
```

应该是这个

```
return '...<br><a href="'. get_permalink($post->ID) . '">Read More <img class="read-more" src="'.get_bloginfo('template_url') . '/images/read-more-arrow.jpg" alt="Read More" /></a>'; 
```

# paypal - 让 Paypal 结帐按钮重定向到带有“使用借记卡或信用卡付款”标题的付款页面

> ID：15372833
> 
> 赞同：2
> 
> 时间：2013-03-12T21:46:41.697
> 
> 标签：paypal

在网上找不到明确的答案。

现在，当点击我网站上的“使用 Paypal 结帐”标准付款按钮时，用户会被重定向到具有两个选项的登录页面：“使用我的 Paypal 帐户付款”或“没有 Paypal 帐户” ![在此处输入图像描述](../Images/bc9840bdb249c91c8325a99cec2839d5.png)

我的问题是如何获得“没有贝宝帐户？” 文本改为说“使用借记卡或信用卡付款”，就像我在一些屏幕截图中看到的那样（见下文）。 ![在此处输入图像描述](../Images/28913b69c73787a9b4eedbc4d9171d2e.png) 我知道登录页面会根据用户的 cookie 显示不同，但我尝试了不同的 cookie 组合，但仍然无法获得“没有贝宝帐户？” 要更改的文本。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-13T10:34:04.120

是的！很简单，只需在这个隐藏的输入字段中添加您的 Paypal 付款表单

```
<input type="hidden" name="landing_page" value="billing"> 
```

开发人员的完整 Paypal 付款表格

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="yourbusinesspaypalaccountemail@mail.com">
<input type="hidden" name="lc" value="US">
<input type="hidden" name="item_name" value="Your Item Name">
<input type="hidden" name="amount" value="YOUR TOTAL AMOUNT">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="button_subtype" value="services">
<input type="hidden" name="no_note" value="0">
<input type="hidden" name="cn" value="Add special instructions to the seller:">
<input type="hidden" name="no_shipping" value="2">
<input type="hidden" name="rm" value="1">
<input type="hidden" name="landing_page" value="billing"> <!-- This filed redirect to Billing Page -->
<input type="hidden" name="return" value="Your Success URL">
<input type="hidden" name="cancel_return" value="Your Cancel Return URL">
<input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHostedGuest">
<input type="image" src="https://www.yourdomain.com/images/paypalpaynowbtn.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.yourdomain.com/images/paypalpaynowbtn.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:45:14.893

确保在您的帐户中启用了可选的 PayPal 帐户。这可以在您的个人资料下找到，然后在网站付款偏好下找到。请记住，并非所有国家都支持这一点。如果您的帐户能够打开此功能，则打开后，您应该会在结帐页面上看到上面提到的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:34:30.997

如果这是 Express Checkout，您可能正在寻找将 SOLUTIONTYPE=Sole 添加到初始 SetExpressCheckout API 请求中

但是，从您的屏幕截图中，我认为底部接受带有访客结帐/帐户可选的信用卡，因为加入 Paypal 看起来是“（可选）”。当您单击展开该部分时，您会得到什么？

请记住，对于没有 PayPal 帐户电子邮件存储在浏览器 cookie 中的客户，它将自动扩展。（例如，如果这是一台全新的计算机，或者他们以前从未使用过 PayPal）。要测试这种情况，请使用 Chrome 的隐身模式或 Firefox 隐私浏览模式，您将看到 cookie 中没有 PayPal 电子邮件的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-11T08:09:58.787

您需要在您的商家帐户中打开“PayPal Account Optional”，以更改“使用借记卡或信用卡付款”中的文本并使用 SOLUTIONTYPE=Sole 使其成为登陆选项

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-05T04:23:51.597

我不确定这是否有帮助，但我注意到当您使用手机或 iPad 等移动设备并想通过 PayPal 付款时，它不会让您选择使用信用卡或借记卡付款，而是使用按钮选择“通过借记卡或信用卡付款”有“创建帐户”按钮。在 Windows 笔记本电脑或个人电脑上，我没有注意到这个问题，所以我认为这与设备屏幕上的分辨率有关。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-12T21:54:33.190

您需要[Website Payments Pro](https://www.paypal.com/webapps/mpp/paypal-payments-pro)才能使用信用卡（以及您银行的商户账户）。

# java - TransformGroup 的正确使用

> ID：15372838
> 
> 赞同：3
> 
> 时间：2013-03-12T21:46:52.520
> 
> 标签：java, graphics, 3d, java-3d

我刚刚开始了一项图形作业，这是我第一次使用 Java3D。我开始尝试建造一把椅子（不要嘲笑以下内容：P）。

我只是想知道是否有人可以告诉我正确的使用模式，因为我很确定我有点不对劲。

这是我画的：

![椅子尝试第一](../Images/92db024c843ae37ba8bab71dacfa9e32.png)

如您所见，它是一个用于座椅的盒子和 4 个用于腿部的气缸。

这是我用来绘制它的代码：

```
public class Chair {

    public Chair() {

        SimpleUniverse universe = new SimpleUniverse();

        BranchGroup group = new BranchGroup();

        // Main seat component

        Box box = new Box(.39f,.03f,.37f, new Appearance());

        TransformGroup seatGroup = new TransformGroup();

        Transform3D transform = new Transform3D();

        Vector3f vector = new Vector3f(.0f, .0f, .0f);
        transform.setTranslation(vector);
        seatGroup.setTransform(transform);
        seatGroup.addChild(box);

        // Legs of chair
        Cylinder leg1 = new Cylinder(.07f, .45f);
        Cylinder leg2 = new Cylinder(.07f, .45f);
        Cylinder leg3 = new Cylinder(.07f, .45f);
        Cylinder leg4 = new Cylinder(.07f, .45f);

            //Create new TransformGroup, vector position for each leg
        TransformGroup leg1Group = new TransformGroup();
        Transform3D legTransform = new Transform3D();
        Vector3f leg1Position = new Vector3f(-.37f, -0.225f, -.35f);
        legTransform.setTranslation(leg1Position);
        leg1Group.setTransform(legTransform);
        leg1Group.addChild(leg1);

        seatGroup.addChild(leg1Group);

        TransformGroup leg2Group = new TransformGroup();
        Transform3D leg2Transform = new Transform3D();
        Vector3f leg2Position = new Vector3f(.37f, -0.225f, .35f);
        leg2Transform.setTranslation(leg2Position);
        leg2Group.setTransform(leg2Transform);
        leg2Group.addChild(leg2);

        seatGroup.addChild(leg2Group);

        TransformGroup leg3Group = new TransformGroup();
        Transform3D leg3Transform = new Transform3D();
        Vector3f leg3Position = new Vector3f(.37f, -0.225f, -.35f);
        leg3Transform.setTranslation(leg3Position);
        leg3Group.setTransform(leg3Transform);
        leg3Group.addChild(leg3);

        seatGroup.addChild(leg3Group);

        TransformGroup leg4Group = new TransformGroup();
        Transform3D leg4Transform = new Transform3D();
        Vector3f leg4Position = new Vector3f(-.37f, -0.225f, .35f);
        leg4Transform.setTranslation(leg4Position);
        leg4Group.setTransform(leg4Transform);
        leg4Group.addChild(leg4);

        seatGroup.addChild(leg4Group);

            //Add seat group to main object group
        group.addChild(seatGroup);

            //Stuff to see the universe//

        Color3f light1Color = new Color3f(.1f, 1.4f, .1f); // green light

        BoundingSphere bounds =

        new BoundingSphere(new Point3d(0.0, 0.0, 0.0), 100.0);

        Vector3f light1Direction = new Vector3f(4.0f, -7.0f, -12.0f);

        DirectionalLight light1

        = new DirectionalLight(light1Color, light1Direction);

        light1.setInfluencingBounds(bounds);

        group.addChild(light1);

        universe.getViewingPlatform().setNominalViewingTransform();

        // add the group of objects to the Universe

        universe.addBranchGraph(group);

        Canvas3D canvas = new Canvas3D(SimpleUniverse.getPreferredConfiguration());
        ViewingPlatform viewPlatform = universe.getViewingPlatform();
        BoundingSphere boundingSphere = new BoundingSphere(new Point3d(0f, 0f, 0f), 100f);
        // Add a behaviour to viewPlatform, allowing the user to rotate, zoom, and straff the scene
        OrbitBehavior orbitBehaviour = new OrbitBehavior(canvas, OrbitBehavior.REVERSE_ALL | OrbitBehavior.STOP_ZOOM);
        orbitBehaviour.setSchedulingBounds(boundingSphere);
        viewPlatform.setViewPlatformBehavior(orbitBehaviour);

    }

    public static void main(String[] args) {

        new Chair();

    }

} 
```

我只是想知道这是否是组的正确用法，因为似乎有很多重复...如果有人能对此有所了解，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:10:03.897

这是学习 java3d 的良好一步。使用自制甚至按制作的脚本，并能够阅读、理解和记忆代码，这样你就可以成为一个更快、更好的程序员。但是要更好地定义是把经验强加给你。学习是好的，但为了真正掌握这一点，你需要遵循自己的方法。因为每个人在某些方面都是不同的。跟随你的脚步，但不要直接踏入缩进。

# java - Android项目中的JSON问题

> ID：15372845
> 
> 赞同：1
> 
> 时间：2013-03-12T21:47:37.390
> 
> 标签：java, android, json, http

我正在处理本教程中的代码：http: [//mobisys.in/blog/2012/01/parsing-json-from-url-in-android/](http://mobisys.in/blog/2012/01/parsing-json-from-url-in-android/)

我下载了源代码并在我的项目中成功设置了所有内容。我启动了我的应用程序并按下“获取 JSON”按钮，一切正常。

他们教程中使用的 URL 是[http://mobisys.in/quicknotify/get_departments.php?company_id=1](http://mobisys.in/quicknotify/get_departments.php?company_id=1)。

来自该页面的 JSON 如下所示：

```
[{"dept":"Mobile","dept_id":"1"},{"dept":"Web","dept_id":"2"}] 
```

我想使用我自己的 URL，所以我将他们提供的 URL 更改为我自己的。我还更改了选择器以匹配新链接。

新的 URL 是[http://football.myfantasyleague.com/2007/export?TYPE=topAdds&W=12&JSON=1](http://football.myfantasyleague.com/2007/export?TYPE=topAdds&W=12&JSON=1)这就是它在浏览器中返回的内容：

```
{"version":"1.0","topAdds":{"week":"12","player":[{"percent":"41.65","id":"8827"},{"percent":"36.89","id":"8752"},{"percent":"25.60","id":"0519"},{"percent":"16.35","id":"5730"},{"percent":"14.14","id":"6562"},{"percent":"13.56","id":"7547"},{"percent":"10.34","id":"3869"},{"percent":"9.87","id":"5660"},{"percent":"8.75","id":"7553"},{"percent":"8.36","id":"7084"},{"percent":"8.12","id":"7480"},{"percent":"8.05","id":"4907"},{"percent":"7.10","id":"6616"},{"percent":"6.85","id":"7625"},{"percent":"6.66","id":"3494"},{"percent":"6.56","id":"8117"},{"percent":"6.11","id":"7071"},{"percent":"5.91","id":"4092"},{"percent":"5.86","id":"7399"},{"percent":"5.78","id":"6715"},{"percent":"4.68","id":"4932"},{"percent":"4.49","id":"3969"},{"percent":"4.46","id":"7837"},{"percent":"4.38","id":"7895"},{"percent":"4.24","id":"7021"},{"percent":"4.13","id":"0525"},{"percent":"4.05","id":"5666"},{"percent":"3.86","id":"6528"},{"percent":"3.81","id":"0512"},{"percent":"3.70","id":"3875"},{"percent":"3.68","id":"4984"},{"percent":"3.67","id":"8135"},{"percent":"3.48","id":"5482"},{"percent":"3.32","id":"1653"},{"percent":"3.29","id":"8244"},{"percent":"3.20","id":"0511"},{"percent":"2.76","id":"3369"},{"percent":"2.73","id":"5065"},{"percent":"2.72","id":"6786"},{"percent":"2.70","id":"8326"},{"percent":"2.66","id":"7150"},{"percent":"2.65","id":"7034"},{"percent":"2.64","id":"3336"},{"percent":"2.59","id":"6950"},{"percent":"2.54","id":"8685"},{"percent":"2.48","id":"8500"},{"percent":"2.44","id":"8339"},{"percent":"2.38","id":"0507"},{"percent":"2.35","id":"8074"},{"percent":"2.34","id":"7883"},{"percent":"2.27","id":"8667"},{"percent":"2.21","id":"8742"},{"percent":"2.18","id":"0502"},{"percent":"2.15","id":"7740"},{"percent":"2.12","id":"7472"},{"percent":"2.11","id":"3298"},{"percent":"2.02","id":"9008"},{"percent":"2.01","id":"6743"},{"percent":"2.01","id":"6643"}]},"encoding":"ISO-8859-1"} 
```

现在，当我启动应用程序并单击“获取 JSON”按钮时，我得到的是“Success []”而不是“Success -Ex: Data...-”，并且没有像以前一样出现数据列表。

我应该怎么做才能使新 URL 起作用？

这是我正在使用的代码：

**MyFantasyLeagueActivity.java**

```
public final static String BaseUrl="http://football.myfantasyleague.com/"; 

ArrayList<DEPT_HOLD> deptList=new ArrayList<DEPT_HOLD>();

private class GetDeptAyncTask extends AsyncTask<Hashtable<String,String>,Void,String>{

      @Override
      protected String doInBackground(Hashtable<String,String>... params) {
       Hashtable ht=params[0];

       String json=HelperHttp.getJSONResponseFromURL(BaseUrl+"2007/export?TYPE=topAdds&W=12&JSON=1", ht);
       if(json!=null) parseJsonString(deptList,json);
       else{
        return "Invalid Company Id";
       }
       return "SUCCESS";
      }

      protected void parseJsonString(ArrayList<DEPT_HOLD> deptList,String json){
          try {
               JSONArray array=new JSONArray(json);
               for(int i=0;i<array.length();i++){
                JSONObject j=array.getJSONObject(i);
                DEPT_HOLD d=new DEPT_HOLD();
                d.one=j.optString("percent","");
                d.two=j.optString("id","");
                deptList.add(d);
               }

              } catch (JSONException e) {
               e.printStackTrace();
              }

      } 

      @Override
      protected void onPostExecute(String result){

          if(result=="SUCCESS")
          {
           Toast.makeText(MyFantasyLeagueActivity.this, "Success"+deptList, Toast.LENGTH_SHORT).show();
           DeptArrayAdapter adapter=new DeptArrayAdapter(MyFantasyLeagueActivity.this,R.id.text1,deptList);
           ListView listv=(ListView)findViewById(R.id.lv);
           listv.setAdapter(adapter);
          }
          else{}
      }

} 
```

我确信解决方案是显而易见的，我会觉得自己很愚蠢，但我花了太多时间看这个。我需要一双新的眼睛来帮助我弄清楚发生了什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:59:18.867

原始 JSON 在顶层有一个数组，但您的新 JSON 是一个对象。所以在你的`parseJsonString`方法中，你首先需要创建`JSONObject`出数据。然后，您需要深入研究`topAdds`and`player`属性以获取百分比/id 对数组。没有错误检查：

```
protected void parseJsonString(ArrayList<DEPT_HOLD> deptList,String json){
    try {
        JSONObject top = new JSONObject(json);
        JSONObject topAdds = (JSONObject) top.get("topAdds");
        JSONArray array = (JSONArray) topAdds.get("player");

        for(int i = 0; i < array.length(); i++) {
            JSONObject j = array.getJSONObject(i);
            DEPT_HOLD d = new DEPT_HOLD();
            d.one = j.optString("percent","");
            d.two = j.optString("id","");
            deptList.add(d);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

# database - 如何破坏数据库备份文件？

> ID：15372847
> 
> 赞同：0
> 
> 时间：2013-03-12T21:47:41.273
> 
> 标签：database, file, upload, break

我创建了一个数据库备份，现在我正在尝试上传它，但它说数据库文件太大，因此我无法上传它。

那么有没有办法将sql（数据库备份文件）分解成片段或表格，以便我可以单独上传它们。

或者有没有其他方法可以做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:54:04.593

这听起来像您正在使用 phpMyAdmin 来执行此操作，对吗？

在这种情况下，您有两个选择：

1.) 通过一次选择几个表来进行较小的备份

但是在管理索引等方面可能会很复杂。更好的选择是：

2.) 使用 SQLYog 等数据库 GUI 工具恢复备份。为此，您需要确保您可以远程访问数据库 - 这将取决于托管情况，但即使是大多数共享主机也将允许通过 cPanel 中的 RemoteSQL 进行访问。

准确地说，需要更多细节。

# clojure - #^ 有什么作用？

> ID：15372848
> 
> 赞同：0
> 
> 时间：2013-03-12T20:36:34.380
> 
> 标签：clojure

我查看了 Clojure 文档和源代码，但是我找不到`#^`.

下面做什么，`#^`它在哪里记录？

```
(defn- parse-headers [#^HttpResponse http-resp]
  (into {} (map (fn [#^Header h] [(.toLowerCase (.getName h)) (.getValue h)])
            (iterator-seq (.headerIterator http-resp))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:07:48.147

它只是一个类型提示，通常由函数参数列表中的参数名称之前的 ^TypeName 表示。我不确定^和#^之间有什么区别；也许它是较旧的语法？

# c# - AssociationType 'Committee_Member_Contact' 具有参照完整性约束，无法映射

> ID：15372851
> 
> 赞同：5
> 
> 时间：2013-03-12T21:47:53.903
> 
> 标签：c#, entity-framework

我得到 AssociationType 'Committee_Member_Contact' 具有参照完整性约束，无法映射到 EDMX 文件中。在我的数据库中，PK和FK之间没有关系。`Committee_Member`表可以有多个`Contact's. I have created`参照约束`as 'Contact`是主要的和`Committee_Member`从属的。

```
public partial class Committee_Member
{
    public byte[] Committee_Member_Id { get; set; }          
    public byte[] Contact_Id { get; set; }           
    public string Committee_Code { get; set; }
    public string External_Source_Name { get; set; }
    public Nullable<System.DateTime> External_Last_Update { get; set; }         

    public virtual Contact Contact { get; set; }
}
public partial class Contact
{
   public Contact()
   {
        this.Committee_Member_SPE = new HashSet<Committee_Member_SPE>();
   }
   public byte[] Contact_Id { get; set; }
   public string First_Name { get; set; }
   public string Last_Name { get; set; }
   ....
   public virtual ICollection<Committee_Member_SPE> Committee_Member_SPE { get; set; }
} 
```

有什么解决办法吗？

# php - $_SESSION 的参数无效

> ID：15372852
> 
> 赞同：0
> 
> 时间：2013-03-12T21:48:02.873
> 
> 标签：php, wordpress, session-variables

我正在测试我为我的客户创建的一个小型 wordpress 插件，但我正在测试的其中一台计算机上出现问题。我在想它可能没有保存`$_SESSION`数据...

它给了我一个无效的论据`foreach()`

```
foreach ($_SESSION['page-1'] as $key => $value) {
    $score += $value * 2;
} 
```

奇怪的是，它适用于我的台式机和笔记本电脑，但不适用于我正在测试的第二台台式机。

基本上，它所做的是从前一页`foreach()`获取信息，然后将其转换为当前页的新变量。`$_SESSION`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:50:06.617

看来您的会话变量`$_SESSION['page-1']`不是数组。只需在进入 foreach 之前检查它：

```
if (is_array($_SESSION['page-1'])) {
    foreach (...) {
        ...
    }
} 
```

它是以下之一：

*   您不是`$_SESSION['page-1']`在任何地方设置为数组，而是与任何其他类型一样。
*   您忘记启动会话（使用`session_start`），或者您的脚本中存在逻辑错误，导致`$_SESSION['page-1']`在某些时候无法设置或取消设置，从而导致`foreach (NULL as ...)`触发错误。

请记住：您必须以以下方式开始会话：

```
session_start(); 
```

**每次**您尝试获取或设置会话变量时。否则，您只是在设置或检索未定义的变量。

# r - 如何将数据框中的调查答案转换为数字以平均结果

> ID：15372853
> 
> 赞同：0
> 
> 时间：2013-03-12T21:48:03.993
> 
> 标签：r

我有一个包含如下调查结果的数据框：

```
 Q1         Q2       Q3
1      Agree No opinion Disagree
2 No opinion No opinion Disagree
3      Agree            Disagree 
```

如何将调查回复转换为数字，以便获得每个问题的平均回复？我可以使用 gsub 为每列中的每个文本答案替换数值，但必须有更好的方法。

```
> str(x)
'data.frame':   3 obs. of  3 variables:
 $ Q1: Factor w/ 2 levels "Agree","No opinion": 1 2 1
 $ Q2: Factor w/ 2 levels "","No opinion": 2 2 1
 $ Q3: Factor w/ 1 level "Disagree": 1 1 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T22:10:49.973

好的，现在很清楚了。

我会将每一列转换为字符，然后转换为因子（具有公共级别），然后转换为整数：

```
sapply(data, function(x) as.integer(factor(as.character(x), levels=c("Agree", "No opinion", "Disagree")))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:26:36.130

我一定是误解了你想要什么，但既然你在 a 中有分类变量，`data.frame`你就不能用`summary`它吗？

```
#Example
q1 <- sample( c("Agree" , "No opinion" ) , 10 , replace = TRUE )
q2 <- sample( c(" " , "No opinion" ) , 10 , replace = TRUE )
q3 <- sample( c("Agree" , "Disagree" ) , 10 , replace = TRUE )

x <- data.frame( q1 , q2 , q3 )

summary(x)
  q1             q2           q3   
  Agree     :4   ,         :4   Agree   :5  
  No opinion:6   No opinion:6   Disagree:5 
```

# java - Dalvik JIT 编译做了哪些优化？

> ID：15372860
> 
> 赞同：3
> 
> 时间：2013-03-12T21:48:17.543
> 
> 标签：java, android, compiler-optimization, dalvik

这类似于[这个问题](https://stackoverflow.com/q/4912695/567555)，但在两年后被问到，Dalvik JIT 编译已经存在很长时间了。

我想知道 Dalvik 将为我做哪些优化，例如，函数内联、公共子表达式消除、优化数组边界检查等。我可以期望 Dalvik 的优化与 HotSpot 等桌面 JVM 大致相当吗？

# asp.net - 在 SQL Server 的 nvarchar 列中删除前导零

> ID：15372864
> 
> 赞同：-1
> 
> 时间：2013-03-12T21:48:23.650
> 
> 标签：asp.net, sql, sql-server, tsql

如何从`nvarchar`SQL Server 的数据类型列中删除所有前导零？

例子：

```
0000000000245
0000000001270 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T21:49:36.800

用于[`CAST`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)_`int`

```
SELECT CAST('0000000000245' AS int),
       CAST('0000000001270' AS int) 
```

[**演示**](http://sqlfiddle.com/#!6/e2488/1/0)

但是你为什么一开始不使用`int`呢？显示前导零是前端的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:53:09.940

您也可以使用隐式转换——减少输入:-)

```
SELECT '0000000000245' + 0 
```

但是，如果这个 nvarchar 并不*总是*包含数字，这会变得更加复杂（在这种情况下，@Tim 上面的答案也会有问题。）。那么......为什么这是一个nvarchar？您可以更改表格以使其成为整数列吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-09T15:41:54.033

我发现这个解决方案在 MS SQL Server（2008 版）上运行良好，没有任何问题并保持列类型。

```
CAST(CAST(nvarcharCOL AS int) AS nvarchar) 
```

# c# - 反序列化列表 在 ApplicationSettingsBase 类中

> ID：15372867
> 
> 赞同：1
> 
> 时间：2013-03-12T21:48:38.750
> 
> 标签：c#, xml-serialization

我正在尝试使用`ApplicationSettingsBase`. 它将看似正确的信息保存到 XML 文件中，但在恢复时，列表对象为空。这是`ApplicationSettingsBase`类和属性的片段。

```
public class AppData: ApplicationSettingsBase
{
   ...

   [UserScopedSettings()]
   public List<Guid> LibrarySortOrder
   {
      get {
         return (List<Guid>)this["LibrarySortOrder"]);
      }
      set {
         this["LibrarySortOrder"] = value;
      }
    }

    ...
 } 
```

当我将设置保存到文件时，我得到以下 XML（片段）

```
<?xml version="1.0" encoding="utf-8"?>
<Settings>
    ...

    <LibrarySortOrder>
      <guid>4b11c0e0-6bf2-463a-b71c-b4704e4a67a6</guid>
    </LibrarySortOrder>
    ...
</Settings> 
```

我尝试为属性定义`[XmlArrayAttribute("LibrarySortOrder")]`, 和，但加载时它始终为空。我在这里想念什么？`[XmlArrayItem("guid")]``LibrarySortOrder`

# php - PHP排序多维数组

> ID：15372876
> 
> 赞同：0
> 
> 时间：2013-03-12T21:49:16.547
> 
> 标签：php, arrays, organization, usort

我有一个看起来像这样的数组：

```
Array
(
[13] => Array
        (
            [name] => Blah blah
            [description] => Blah blah blah
            [parent_group_id] => 8
            [display] => Blah : Blah
            [stamps] => Array
                (
                    [73] => Array
                        (
                            [stamp_id] => 73
                            [name] => Blah
                            [is_member] => 
                            [rank] => 2          <--
                            [description] => Blah blah blah
                            [rank_token] => easy
                        )
                    [80] => Array
                        (
                            [stamp_id] => 80
                            [name] => Blah
                            [is_member] => 
                            [rank] => 1          <--
                            [description] => Blah blah blah
                            [rank_token] => medium
                        )
                    [73] => Array
                        (
                            [stamp_id] => 73
                            [name] => Blah
                            [is_member] => 
                            [rank] => 4          <--
                            [description] => Blah blah blah
                            [rank_token] => easy
                        )

                    [80] => Array
                        (
                            [stamp_id] => 80
                            [name] => Blah
                            [is_member] => 
                            [rank] => 3          <--
                            [description] => Blah blah blah
                            [rank_token] => medium
                        )
                 )
          )
) 
```

但是，我想通过 ['rank'] 持有的数字对这个数组中的对象进行排序，分别是 1、2、3 和 4。（我在代码示例中添加了箭头）所以在使用 usort 之后，我希望一切都按数字顺序排序。所以我希望它看起来像这样：

```
Array
(
[13] => Array
        (
            [name] => Blah blah
            [description] => Blah blah blah
            [parent_group_id] => 8
            [display] => Blah : Blah
            [stamps] => Array
                (
                    [80] => Array
                        (
                            [stamp_id] => 80
                            [name] => Blah
                            [is_member] => 
                            [rank] => 1          <--
                            [description] => Blah blah blah
                            [rank_token] => medium
                        )
                    [73] => Array
                        (
                            [stamp_id] => 73
                            [name] => Blah
                            [is_member] => 
                            [rank] => 2          <--
                            [description] => Blah blah blah
                            [rank_token] => easy
                        )
                    [80] => Array
                        (
                            [stamp_id] => 80
                            [name] => Blah
                            [is_member] => 
                            [rank] => 3          <--
                            [description] => Blah blah blah
                            [rank_token] => medium
                        )
                    [73] => Array
                        (
                            [stamp_id] => 73
                            [name] => Blah
                            [is_member] => 
                            [rank] => 4          <--
                            [description] => Blah blah blah
                            [rank_token] => easy
                        )
                 )
          )
) 
```

我的实际数组要大得多，但它仍然遵循这种模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:12:29.873

如果我正确理解了您的问题，这应该可行：

```
function cmp($a, $b)
{
    if ($a['rank'] == $b['rank']) {
        return 0;
    }
    return ($a['rank'] < $b['rank']) ? -1 : 1;
}
foreach($yourArray as &$entry) {
    uasort($entry['stamps'], "cmp");
}
unset($entry);

print_r($yourArray); 
```

请注意，cmp 功能与手册中的几乎相同。foreach 中的 & 表示创建的变量是数组成员的别名，而不是副本（就像 PHP 通常做的那样）。unset() 存在是因为如果您稍后尝试使用名为 $entry 的变量，您实际上将操作数组中的最后一个条目。

如果您对此不满意，还有其他方法可以剥皮；例如，您可以创建第二个函数并将其 array_map 映射到您的原始函数，因此：

```
function cmp($a, $b)
{
    if ($a['rank'] == $b['rank']) {
        return 0;
    }
    return ($a['rank'] < $b['rank']) ? -1 : 1;
}
function sort_entry($entry)
{
    uasort($entry['stamps'], "cmp");
    return $entry;
}
array_map('sort_entry', $yourArray);    
print_r($yourArray); 
```

# php - php 检查文件是否在文件夹中

> ID：15372877
> 
> 赞同：0
> 
> 时间：2013-03-12T21:49:27.993
> 
> 标签：php, file-upload, file-io, directory

我正在编写一个要保存徽标图像的脚本。我为每个用户创建一个“logo”文件夹，例如 user-data/user_1/logo/img007.png

如果用户决定在一段时间后上传不同的图像，我想自动删除旧图像，以免不必要地浪费网络空间。

到目前为止，我决定在上传过程中不重命名文件，因此我不能在文件夹中使用 file_exists()，因为脚本不知道文件名。

我的问题是，如果 PHP 中有一种方法可以检查任何文件是否在特定文件夹中，如果是，则将其删除。

如果您认为我对此采取了错误的方法并且应该例如将所有文件重命名为相同的（我认为这是一个问题，因为我允许 4 种不同的常见图像格式）或保存“现有”文件的文件名并让脚本检查它，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:58:07.327

我会创建一个文件夹`user_logos/`并将每个徽标存储为`[user name]_logo.png`. 您显然可以决定延期。但我宁愿没有数千个目录，每个目录只包含一个文件。

如果您可以为每个徽标创建一个随机 ID，那就更好了，例如`[random_id]_logo.png`并将 ID 存储到用户表（在数据库中）：

```
 User ID     |     User Name     |    Logo ID 
```

然后从那里加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:55:02.947

您可以使用[readdir](http://php.net/manual/en/function.readdir.php)或[scandir](http://www.php.net/manual/en/function.scandir.php)。

# angularjs - 在 AngularJS 中渲染嵌套对象时更改范围

> ID：15372879
> 
> 赞同：2
> 
> 时间：2013-03-12T21:49:34.460
> 
> 标签：angularjs

在 Handlebars 中，您可以更改当前范围，因此如果您有一个对象：

```
walrus: {
  bubbles: 7,
  zombies[
    {name: 'Jim', hobby: 'pinocle'},
    {name: 'Cassandra', hobby: 'privateering'},
    {name: 'Ke$ha', hobby: 'yelling'}
  ],
  address: {
    city: 'Fresno',
    state: 'CA'
  }
} 
```

然后我可以将该上下文发送到这样的模板：

```
<article class='walrus'>
  <h2>I have {{ bubbles }} bubbles!</h2>
  <ul>
    {{#each zombies}}
      <li>{{ name }} likes {{ hobby }}
    {{/each }}
  </ul>
  <div class='address'>
    {{#with address}}
      <p>{{city}}, {{state}}</p>
    {{/with}}
  </div>
</article> 
```

但在 Angular 中，如果我设置 $scope.walrus = walrus，我会得到以下结果：

```
<article class='walrus'>
  <h2>I have {{ walrus.bubbles }} bubbles!</h2>
  <ul>
      <li ng-repeat="zombie in walrus.zombies">{{ zombie.name }} likes {{ zombie.hobby }}
  </ul>
  <div class='address'>
    <p>{{walrus.address.city}}, {{walrus.address.state}}</p>
  </div>
</article> 
```

有没有办法让 Angular 识别它所在的范围，而不需要额外的`walrus.`, `zombie.`, or (worst of all) `walrus.address.`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:15:10.580

> 有没有办法让 Angular 识别它所在的范围，而不需要额外的`walrus.`, `zombie.`, or (worst of all) `walrus.address.`？

我不知道有什么方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T13:22:48.597

对于未嵌套的“海象”，您可以这样做：

```
angular.extend($scope, $scope.walrus);
```

这将使用海象对象扩展 $scope，现在您可以在模板中使用 {{ bubbles }}！

我使用了扩展，但我真的不知道这是否是做你想做的事情的正确方法！

# filesystems - Opendedup 不会减少存储空间

> ID：15372881
> 
> 赞同：0
> 
> 时间：2013-03-12T21:49:37.580
> 
> 标签：filesystems, deduplication

我正在测试[Opendedup](http://opendedup.org/index.php)，它似乎运行正确，但是我放入去重分区的文件的实际大小几乎与该分区所占用的有效大小相同。

在配置文件中，激活了重复数据删除（dedup-files="true"），并且在[文档](http://opendedup.org/administrators-guide#inline)中指出它是默认激活的，但我只有 130ko 的重复字节。

数据是视频文件，我想我可以获得更多的存储空间。

**编辑**

我用一个填充零的文件进行了测试，增益更好：1Mo 为 262ko。但是如果我压缩这个文件，我会得到 10ko，所以我想知道我是否可以选择获得更好的压缩系数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:23:19.983

除非它们完全相同，否则视频和压缩文件不能很好地进行重复数据删除。这是因为在这些文件中，数据是非常随机的，并且对于所讨论文件的视频数据来说是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T11:30:13.207

SDFS 不支持可变大小的分块。所以在这种情况下，如果我们在挂载的 SDFS 卷上复制相同的文件，那么我们可以获得高达 100% 的重复数据删除率。但是如果在同一个文件的开头只添加一个字节，那么重复数据删除率将为 0%。

# java - 否定中的正则表达式

> ID：15372882
> 
> 赞同：2
> 
> 时间：2013-03-12T21:49:41.190
> 
> 标签：java, regex

我希望这个正则表达式只产生 string `acl`。我怎么做 ？我不断得到`2013-`，即使我有一个否定运算符。

```
void testPattern()
     {
        Pattern pattern =
        Pattern.compile("^.*-");

        Matcher matcher =
        pattern.matcher("2013-acl");

        boolean found = false;
        while (matcher.find())
        {
            println matcher.group();

        }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:54:29.803

您的模式`"^.*-"`仅在连字符之前匹配输入。

将其更改为`"^.*-(.*)$"`and 而不是`matcher.group()`use `matcher.group(1)`。

因此，使用此修改后的模式并使用相同的输入：

1.  `^`匹配输入的开头
2.  第一`.*`场比赛`2013`
3.  `-`匹配一个`-`
4.  第二`.*`场比赛`acl`
5.  `$`匹配输入的结尾

second 周围的括号`.*`构成一个捕获组。捕获的模式变得可用`matcher.group(1)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:52:17.623

## 没有正则表达式的解决方案：

使用 a`StringBuilder`删除`-`.

```
String string1 = "2013-acl";
StringBuilder b = new StringBuilder(string1);
b.delete(0, defaultBrowser.lastIndexOf('-') + 1);
string1 = b.toString();
System.out.println(string1); 
```

该程序应该打印出来`acl`。不需要正则表达式。

## 如果您*需要*正则表达式的解决方案：

```
String string1 = "2013-acl";
Matcher matcher = Pattern.compile("(?<=-).*$").matcher(string1);
if (matcher.find()) System.out.println(matcher.group()); 
```

该程序应该打印出来`acl`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:54:34.257

您可以使用它来获取以下内容之后的所有内容`-`：`(?<=-).*$`

但是，正如已经指出的那样……简单地拆分`-`会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T21:51:13.757

`^`是字符串运算符的开头而不是否定运算符。

如果您只想匹配我建议使用的结尾：

```
"-(\w+)" 
```

（不要忘记在 Java 中转义反斜杠。）

然后检索`$1`变量中匹配的内容。

您可以使用[Matcher.group()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#group%28int%29)函数来执行此操作。

```
Pattern pattern =
Pattern.compile("-(\\w+)");

Matcher matcher =
pattern.matcher("2013-acl");

matcher.find();
println matcher.group(1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T21:55:32.503

为什么不只是做`acl`正则表达式？或者`acl$`如果您只希望它在字符串末尾匹配 acl

# wpf - WPF Datagrid - RowDetails 绑定到可选属性？

> ID：15372883
> 
> 赞同：1
> 
> 时间：2013-03-12T21:49:42.853
> 
> 标签：wpf, binding, datagrid, rowdetails

我正在尝试设计一个 WPF Datagrid，其中 RowDetails （一个文本块）将绑定到`Details`网格的 ItemSource 元素的字符串属性。

```
 <DataGrid.RowDetailsTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Details}" .....
            </DataTemplate>
        </DataGrid.RowDetailsTemplate> 
```

诀窍是，绑定集合中的元素可能没有`Details`属性，在这种情况下，RowDetails 应该是空的。有没有办法让 WPF 绑定到在运行时甚至可能不存在的属性，而不会引发异常？（需要明确的是，绑定集合中的项目要么都具有`Details`属性，要么都没有。我不是在谈论包含多个对象类型的集合。）

我想一个答案是强制此网格的用户提供始终具有 Details 属性（IDetails 接口或其他）的对象，但我认为不必这样做会很好 - 我希望网格是它可以显示的对象非常灵活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:18:33.880

环顾四周后，我发现了 PriorityBindings，它可以完成工作。在这里，我绑定到 RowDetailsTemplate 中的 TextBlock，如果未找到绑定的属性，则将 Fallbackvalue 设置为空字符串：

```
<TextBlock.Text>
    <PriorityBinding FallbackValue="">
           <Binding Path="Details" IsAsync="True"/>
    </PriorityBinding>
</TextBlock.Text> 
```

# ios - iOS 在视图周围绘制边框 - 转换为图像时模糊

> ID：15372884
> 
> 赞同：0
> 
> 时间：2013-03-12T21:49:44.447
> 
> 标签：ios, quartz-graphics

我的应用程序中有一个二维表，我希望每个单元格周围有一个 1 像素厚的边框。每个单元格都是不同的`UIView`，我发现我可以用以下方式绘制这样的边界：

```
dataCell.layer.borderWidth = 0.5; // repeat for each cell
tableContainer.layer.borderWidth = 1.0; // do once for the entire table 
```

这对视网膜和非视网膜设备都有好处。但是现在我想在显示之前先将我的表格渲染成图像，并且在非视网膜设备上，结果如下所示：

![模糊的细胞分裂](../Images/23a9305b27584585f7a0b74e9ec08fe2.png)

表格的边界很好，但各个单元格的边界变得模糊。我用于将整个事物转换为图像的方法是：

```
- (UIImage *)getImage {
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, [[UIScreen mainScreen]scale]);
    [[self layer] renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return viewImage;
} 
```

那是上的一个类别`UIView`。我想将其显示为图像的原因是，当设备旋转时，当整个表格是单个静态对象时，生成的动画看起来要好得多，否则所有子视图都会彼此分离并沿着不同的轨迹进行动画处理进入他们的最终位置。

我能做些什么来解决这种模糊？

**编辑：**

虽然您确实无法真正显示小于 1 像素的线条，但实际上有两件事可以使这项工作发挥作用。首先，在视网膜屏幕上，0.5 个“逻辑”像素正好是 1 个真实像素，在这种情况下，iOS 渲染非常好。

在非视网膜设备上，iOS 做了一些不同的事情：当我要求在视图周围设置 0.5 像素的边框时，它会在视图的左侧和底部绘制 1 像素的边框。当我将许多这样的视图并排放置在一个网格中时，结果实际上是非常合理的——我在视图之间得到了 1px 的边框。

这是一个在白色单元格周围有 0.5px 边框的非视网膜再现的屏幕截图，右侧缺失（我通常只是在整个容器周围添加一个 1px 边框来解决这个问题）。这是没有把它变成图像的。

![0.5px 边框](../Images/c24db0aa460820bcc32de4ecc1aa888b.png)

我认为这`UIGraphicsGetCurrentContext()`会进行所见即所得的渲染，并给我一个与屏幕上渲染的图像完全相同的图像。有什么办法可以欺骗它吗？

# c - If 语句与 C 中的比较 SSE

> ID：15372885
> 
> 赞同：6
> 
> 时间：2013-03-12T21:49:53.380
> 
> 标签：c, sse

我想实现这一点：

```
for (int i=0;i<n,i++){
  if (x[i] > 2.0f || x[i] < -2.0f) 
     a[i] += x[i]; 
} 
```

我已经走了这么远，但不知道下一步该怎么做：

```
__m128 P2f = _mm_set1_ps(2.0f);
__m128 M2f = _mm_set1_ps(-2.0f);
for(int i=0;i<n,i+=4){
__m128 xv = _mm_load_ps(x+i);
__m128 av = _mm_load_ps(a+i);

__m128 c1 = _mm_cmpgt_ps(xv, P2f);
__m128 c2 = _mm_cmplt_ps(xv, M2f);

__m128 or = _mm_or_ps(c1,c2);
    =???==
av = _mm_add_ps(av, xv);
_mm_store_ps(a+i, av);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:52:57.513

你很接近：

```
const __m128 P2f = _mm_set1_ps(2.0f);
const __m128 M2f = _mm_set1_ps(-2.0f);
for (int i = 0; i < n; i += 4)
{
    __m128 xv = _mm_load_ps(x + i);
    __m128 av = _mm_load_ps(a + i);

    __m128 c1v = _mm_cmpgt_ps(xv, P2f);
    __m128 c2v = _mm_cmplt_ps(xv, M2f);

    __m128 cv = _mm_or_ps(c1v, c2v);

    xv = _mm_and_ps(xv, cv);

    av = _mm_add_ps(av, xv);

    _mm_store_ps(a + i, av);
} 
```

诀窍是`OR`两个比较结果，然后使用这个组合结果作为掩码，使用按位`AND`运算将未通过测试的 X 值清零。然后添加掩码 X 向量，这将根据掩码将 0 或原始 X 值添加到 A 的每个元素。

* * *

对于您在下面的评论中提到的替代版本，您可以这样做：

```
const __m128 P2f = _mm_set1_ps(2.0f);
const __m128 M2f = _mm_set1_ps(-2.0f);
for (int i = 0; i < n; i += 4)
{
    __m128 xv = _mm_load_ps(x + i);
    __m128 av = _mm_load_ps(a + i);

    __m128 c1v = _mm_cmpgt_ps(xv, P2f);
    __m128 c2v = _mm_cmplt_ps(xv, M2f);

    __m128 cv = _mm_or_ps(c1v, c2v);

    xv = _mm_and_ps(P2f, cv); // <<< change this line to get a[i] += 2.0f
                              //     instead of a[i] += x[i]

    av = _mm_add_ps(av, xv);

    _mm_store_ps(a + i, av);
} 
```

* * *

对于您在下面 ( ) 后面的评论中提到的第三个版本，`a[i] *= 2.0`它有点棘手，但您可以通过将表达式视为`a[i] += a[i]`：

```
const __m128 P2f = _mm_set1_ps(2.0f);
const __m128 M2f = _mm_set1_ps(-2.0f);
for (int i = 0; i < n; i += 4)
{
    __m128 xv = _mm_load_ps(x + i);
    __m128 av = _mm_load_ps(a + i);

    __m128 c1v = _mm_cmpgt_ps(xv, P2f);
    __m128 c2v = _mm_cmplt_ps(xv, M2f);

    __m128 cv = _mm_or_ps(c1v, c2v);

    xv = _mm_and_ps(av, cv)); // <<< change this line to get a[i] *= 2.0f (a[i] += a[i])
                              //     instead of a[i] += x[i]

    av = _mm_add_ps(av, xv);

    _mm_store_ps(a + i, av);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:04:34.680

我只会通过利用关于零的对称性来补充 Paul 的出色答案，即您只需要进行一次比较：

```
const __m128 absMask = (__m128)_mm_set1_epi32(0x7fffffff);
const __m128 two = _mm_set1_ps(2.0f);

for (int i = 0; i < n; i += 4) {
    __m128 xv = _mm_load_ps(x + i);
    __m128 av = _mm_load_ps(a + i);
    __m128 absxv = _mm_and_ps(xv, absMask); // |x|
    __m128 mask = _mm_cmpgt_ps(absxv, two); // |x| > 2 ?
    xv = _mm_and_ps(xv, cv);                // |x| > 2 ? x : 0
    av = _mm_add_ps(av, xv);                // |x| > 2 ? a + x : a + 0
    _mm_store_ps(a + i, av);
} 
```

# javascript - 使用 jQuery UI，如何检查工具提示是否已为元素启用或禁用？

> ID：15372888
> 
> 赞同：0
> 
> 时间：2013-03-12T21:50:02.130
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tooltip

使用 jQuery UI，我知道您可以为所有具有相同类的元素启用工具提示，如下所示：

```
$('.someClass').tooltip('enable'); 
```

并像这样禁用它们：

```
$('.someClass').tooltip('disable'); 
```

如何检查“someClass”元素的工具提示的当前状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:52:20.697

你有没有尝试过`$( ".someClass" ).tooltip( "option", "disabled" );`

# c# - 在连接打开的情况下尝试 if 语句

> ID：15372889
> 
> 赞同：0
> 
> 时间：2013-03-12T21:50:05.427
> 
> 标签：c#, sql, if-statement

我正在尝试创建一个 if 语句，以防我无法打开与 SQL Server 的连接，以显示标签，或者显示另一个表单。代码如下：

```
private void button1_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection("Data Source=xxx.ac.uk;Initial Catalog=XXXX;User ID=xxxx;Password=xxxxx");

    try
    {
       // string sql = "SELECT * FROM datatable";
        SqlCommand mycommand = new SqlCommand("SELECT * FROM datatable", conn);
        try
        {
            conn.Open();
            mycommand.ExecuteNonQuery();
        }
        finally
        {
                if (mycommand != null)
                label1.Visible = true;
                label1.Text = "Failed to Access Database! Please log into VPN Using The Link Below.";
        }
    }
    finally
    {
        if (conn != null)

            this.Hide();
        Form1 form = new Form1();
        form.Show();

    }

    }

}

} 
```

每当我脱机运行文件时，都会遇到超时问题，并且由于出现异常而无法使用该应用程序。我想要一个 if 语句来检查是否存在连接，然后转到表单，如果没有，则显示标签。

问候，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:54:05.593

我认为你的方法试图做的太多了。您不必查询表。只需打开连接就足够了。

```
var canAccessDB = false;

try
{
    conn.Open();
    canAccessDB = true; // Will only get here if Open() is successful
}
catch
{
    // nothing needed here
}
finally
{
    if (conn != null)
        conn.Dispose(); // Safely clean up conn
}

if (!canAccessDB)
{
    label1.Visible = true;
    label1.Text = "Failed to Access Database! Please log into VPN Using The Link Below.";
}
else
{
    this.Hide();
}

Form1 form = new Form1();
form.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:53:50.820

每次都会运行一个 finally 块。你需要一个带有代码的 catch 块来执行，以防 try 块中的内容出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:01:24.207

如果连接失败，您可以捕获 SqlException 并向用户显示消息

```
using (SqlCommand mycommand = new SqlCommand("SELECT * FROM datatable", conn))
{
    try
    {
        conn.Open();
        mycommand.ExecuteNonQuery();
    }
    catch (SqlException ex)
    {
        label1.Visible = true;
        label1.Text = string.Format("Failed to Access Database! Please log into VPN Using The Link Below.\r\n\r\nError: {0}", ex.Message);
        return;
    }

    if (conn != null)
    {
        this.Hide();
        Form1 form = new Form1();
        form.Show();
    }
} 
```

# jquery - JQuery 迭代地扫描嵌套元素

> ID：15372892
> 
> 赞同：1
> 
> 时间：2013-03-12T21:50:14.610
> 
> 标签：jquery, xml, recursion

我正在尝试使用 JQuery 遍历我已读入并转换为 JQuery 对象的 XML 文档中的嵌套节点。在 XML 形式中，它看起来像：

```
<Nodes>
  <Node attrib="tree">
    <Node attrib="tree" att2="something">
      <Node attrib="leaf" att2="somethingelse"></Node>
    </Node>
  <Node attrib="leaf" att2="somethingmore"></Node>
   </Node>
<Nodes> 
```

我实际上想使用 attrib="leaf" 为每个节点执行一个功能。节点元素可以嵌套在任何级别，最多可能为 10。

我发现了各种使用 .each 的递归方法，但无法让它们迭代。在没有选择特定属性的情况下，我根据这里的一些很好的例子尝试了这种事情，但看不到它。ViewData.nodeTree 是上述 XML 加载的 XML JQquery 对象。

```
 $.each(ViewData.nodeTree, function (key, val) {
        recursiveFunction(key, val);
    });
    function recursiveFunction(key, val) {
        actualFunction(key, val);
        var value = val['Node'];
        if(value instanceof Object) {
            $.each(value, function (key, val) {
                recursiveFunction(key, val);
            });
        }
    }
    function actualFunction(key, val) {
        alert(key + " " + val);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:54:40.913

我不明白为什么这种方法不起作用：

```
$(ViewData.nodeTree).find('Node[attrib="leaf"]').each(function () {
    // do something on the node
}); 
```

[http://jsfiddle.net/mattball/B25vF/](http://jsfiddle.net/mattball/B25vF/)

不需要递归。

# jquery - 通过jquery更新Yandex坐标

> ID：15372896
> 
> 赞同：0
> 
> 时间：2013-03-12T21:50:34.413
> 
> 标签：jquery, api, map, yandex

我不了解 jquery，我想更改 Yandex 地图位置。javascript函数如下：

```
 function fid_0000(ymaps) 
    {
         var map = new ymaps.Map("ymaps-map-id_0000", {center: [11.111111,22.222222], zoom: 17, type: "yandex#map"});
    }; 
```

和 HTML 是：

```
<div id="ymaps-map-id_0000" style="width: 450px; height: 450px;"></div> 
```

如何在不重新加载页面的情况下更改其坐标（可能使用选择标签）？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:59:16.420

我建议您查看[Yandex API 示例](http://api.yandex.com/maps/doc/jsapi/2.x/examples/)

特别是，查看[更改地图中心](http://api.yandex.com/maps/doc/jsapi/2.x/examples/mappanto.html)的代码示例将是最有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T17:15:09.273

您可以使用`map.setCenter([lat, lng]);`

# php - php mysql 上传图片到数据库

> ID：15372900
> 
> 赞同：0
> 
> 时间：2013-03-12T21:50:52.070
> 
> 标签：php, mysql, image-uploading

在网上找到了几个关于如何将图像上传到 mysql 数据库表的示例，二进制而不是服务器中的链接或文件夹。

当我尝试打印时，图像不可见

当我检查数据库表时，它以奇怪的格式显示了一堆数据，我假设图像数据

这是代码

```
if(!empty($_FILES['image']) && $_FILES['image']['size'] > 0 && !empty($_POST['name']))
{
    // Temporary file name stored on the server
       $tmpName = $_FILES['image']['tmp_name'];

// Read the file
$fp = fopen($tmpName, 'r');
$data = fread($fp, filesize($tmpName));
$data = addslashes($data);
fclose($fp); 
```

显示图像的代码

```
$sql = "SELECT * FROM `photos` WHERE userName = '$currentUser'";
    $result = mysqli_query($con,$sql);
    while($row = mysqli_fetch_array($result)) 
    {
        $content = $row['image'];
        echo $content;
        echo '<p id="caption">'.$row['caption'].' </p>';
    } 
```

当我尝试显示图像时，我没有得到任何输出，我通过腻子检查数据库，我看到大量奇怪的字符，我假设图像的项目。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:58:47.680

您最终可以尝试将这两行替换
`$content = $row['image']; echo $content;`
为：
`echo '<img src="data:image/jpeg;base64,' . base64_encode( $row['image'] ) . '" />';`

# javascript - 弹出使其居中

> ID：15372907
> 
> 赞同：0
> 
> 时间：2013-03-12T21:51:14.220
> 
> 标签：javascript, jquery, css, jquery-ui, javascript-events

当我单击注册按钮时，弹出窗口打开......它在桌面上工作正常但是当我缩小浏览器窗口时，弹出窗口移动到浏览器的左角.....\在iphone中弹出到中心....如何修复它....

在下面提供我的代码....

```
<div class="modal hide fade" id="signup-modal">
    <a class="close" data-dismiss="modal">&times;</a>
    <h1>Sign up </h1>
    <form method="POST" autocomplete="off" id="id_registerForm">
        <input type="hidden" name="usertype" value="3" readonly />
        <fieldset>      
        <input type="text" placeholder="Name" name="fullname" maxlength="30" required="required" id="id_username" />
        <input type="text" placeholder="Company" name="company" maxlength="30" required="required" id="id_company" />       
        <input type="email" placeholder="Email" name="email" maxlength="75" required="required" id="id_email" />
        <input type="password" placeholder="Password" name="password" required="required" id="id_password" />
        <input type="password" placeholder="Retype Password" name="repassword" required="required" id="id_repassword" />
        <textarea name="inquiry" placeholder="Inquiry" rows="3" required="required" id="id_inquiryForm" style="width:290px;"></textarea>
        <input id="id_signUp" type="button" value="Sign Up" class="btn">
        </fieldset>
        <!-- <a href="#myModal" role="button" data-toggle="modal"><span>Already have an account?</span> Log in</a> -->
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:22:36.957

您的模态窗口将需要不同的样式

我在我的项目中使用它

```
@media screen and (max-width: 650px){
   /* my styles goes here */
} 
```

现在你有了模态的这种样式：

```
#signup-modal, #login-modal {
width: 300px;
padding: 0 40px;
background: #fff;
border: 5px solid rgba(0,0,0,0.2);
margin-left: -190px;
border-radius: 10px;
overflow: hidden;
margin-bottom: 40px;
box-shadow: 0 1px 0 white inset;
margin-top: -306px;} 
```

这就是为什么它走出窗外，你必须`styles`为`smaller screens`.

我尝试删除并将`margins`其设置为`margin: auto`，我在 chrome 中的检查元素中进行了此操作，但在调整大小时效果不佳，但如果您将在本地计算机上执行此操作，也可以尝试此操作。如果没有，请转到@media 屏幕。

这是一个很好的链接

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:30:05.633

我知道这一直是通过使用来关注的，`@media-screen`但是当你在问题中标记 jQuery 时，我想我会给出一个替代解决方案。对于你所追求的可能有点OTT......但嘿，我喜欢它并且它有效。此外，它还不必为屏幕尺寸添加多个媒体查询。

```
var sBox = $('#signup-modal');
var uPos = function(){
   //Get sign-up box height and width
   sBoxHeight = parseInt(sBox.css('height'));
   sBoxWidth = parseInt(sBox.css('width'));

   //Get window height and width
   wHeight = window.innerHeight;
   wWidth = window.innerWidth;

   //Work out the position for the sign-up box
   sBoxTop = (wHeight/2) - (sBoxHeight/2);
   sBoxLeft = (wWidth/2) - (sBoxWidth/2);

   //Apply to the sign-up box
   sBox.css({
      margin:'0px',
      left:sBoxLeft - 55,
      top:sBoxTop
   });
}

//Apply on page load
uPos();

//Apply when window is resized
$(window).resize(function(){
   uPos();
}); 
```

# struts2 - Struts 2 sessionToken 拦截器总是重定向到错误

> ID：15372909
> 
> 赞同：1
> 
> 时间：2013-03-12T21:51:21.340
> 
> 标签：struts2, double-submit-prevention

我一直试图让 tokenSession 拦截器工作（Struts 2.0.14），但总是收到警告：

```
2013-03-13 08:32:09,395 [17] DEBUG Intercepting invocation to check for valid transaction token. | org.apache.struts2.interceptor.TokenSessionStoreInterceptor.doIntercept(128)
2013-03-13 08:32:09,395 [17] WARN  Could not find token name in params. | org.apache.struts2.util.TokenHelper.getTokenName(124)
2013-03-13 08:32:09,396 [17] DEBUG no token name found -> Invalid token  | org.apache.struts2.util.TokenHelper.validToken(154)
2013-03-13 08:32:09,397 [17] WARN  Could not find token name in params. | org.apache.struts2.util.TokenHelper.getTokenName(124)
2013-03-13 08:32:09,397 [17] WARN  Could not find token mapped to token name null | org.apache.struts2.util.TokenHelper.getToken(105)
2013-03-13 08:32:09,398 [17] DEBUG Forwarding to location /WEB-INF/view/support/TokenError.jsp | org.apache.struts2.dispatcher.ServletDispatcherResult.doExecute(113) 
```

struts.xml 具有以下拦截器配置：

```
 <package name="survey" extends="struts-default">
        <result-types>
            <result-type name="csv"
                     class="webapp.CsvResultType"/>
            </result-types>

        <interceptors>
            <interceptor name="log"
                class="struts.LoggingInterceptor"/>
            <interceptor name="formAuthentication"
                class="security.FormAuthenticationInterceptor"/>
            <interceptor-stack name="default">
                <interceptor-ref name="log"/>
                <interceptor-ref name="servletConfig"/>
                <interceptor-ref name="formAuthentication"/>
                <!--interceptor-ref name="chain"/>-->
                <interceptor-ref name="fileUpload"/>
                <interceptor-ref name="checkbox"/>
                <interceptor-ref name="params"/>
            </interceptor-stack>
            <interceptor-stack name="defaultTokenStack">
                <interceptor-ref name="tokenSession"/>
                <interceptor-ref name="default"/>
            </interceptor-stack>

        </interceptors>

        <default-interceptor-ref name="default"/>

        <!--  -->

        <global-results>
             <result name="blank">/WEB-INF/view/support/Blank.jsp</result>
             <result name="error">/WEB-INF/view/support/Error.jsp</result>
             <result name="insufficientPrivileges">/WEB-INF/view/support/InsufficientPrivileges.jsp</result>
             <!--result name="file" type="file"></result-->
        </global-results>

    </package> 
```

使用动作定义：

```
<package name="respondent" namespace="/respondent" extends="survey">
    <action name="*" class="controller.respondent.{1}Action">
        <interceptor-ref name="defaultTokenStack"/>
        <result name="list">/WEB-INF/view/respondent/{1}List.jsp</result>
        <result name="edit">/WEB-INF/view/respondent/{1}Edit.jsp</result>
        <result name="view">/WEB-INF/view/respondent/{1}View.jsp</result>
        <result name="success">/WEB-INF/view/respondent/{1}.jsp</result>
        <result name="invalid.token">/WEB-INF/view/support/TokenError.jsp</result>
    </action>
</package> 
```

该 jsp 具有令牌标记：

```
<s:form action="FunctionSummary.action" method="post">
<s:token/>

    <table class="buttons">
        <tr>
            <s:if test="surveyStarted">
                <td><s:submit value="Resume Survey"/></td>
            </s:if>
            <s:else>
                <td><s:submit value="Start Survey"/></td>
            </s:else>

        </tr>
    </table>

</s:form> 
```

对该页面的任何访问都会导致重定向到 invalid.token 结果和上述警告。

我已经验证，如果没有配置拦截器，页面源确实有令牌，但我无法让 sessionToken 拦截器看到它。

非常感激任何的帮助...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T15:26:53.763

尝试将您的`<s:token/>`标签放入您的`<table>`标签中。我遇到了和你一样的问题。在我放入`<s:token/>`标签后`<table>`问题就解决了。

```
<s:form action="" id = "" theme="simple" method = "post">
<table id = "" border="1" width="200">
    <s:token/>  <!-- In the table tag -->

</table>
</s:form> 
```

# python - python底图drawgreatcircle有奇怪的行为

> ID：15372911
> 
> 赞同：0
> 
> 时间：2013-03-12T21:51:26.237
> 
> 标签：python, matplotlib-basemap

我试图在一组点的平均值和第二个点之间绘制一个大圆圈。然而，当我使用平均值时，大圆路径是不正确的，但如果我使用与平均值相同的预定义变量，则它是正确的。下面是一个例子。

```
from mpl_toolkits.basemap import Basemap
import pyproj
from pylab import *

# setup basemap.
lat_1 = 49.5
lat_2 = 55.5
lat_0 = 52.5
lon_1 = -16.5
lon_2 = -1.0
lon_0 = -5.25

m = Basemap(llcrnrlon=lon_1,llcrnrlat=lat_1,urcrnrlon=lon_2,urcrnrlat=lat_2,
        resolution='i',projection='lcc',lon_0=lon_0,lat_0=lat_0)        
m.drawcoastlines()

lon1 = -8.2395881636363644
lat1 = 54.876441136363631

lons = [-8.3771698, -8.177818, -8.2758546, -8.2197834, -8.3409037, -8.247925, -8.3208079, -8.3288984, -8.1521259, -8.0139167, -8.1802664]
lats = [54.9846137, 54.8639587, 54.8730255, 54.89845, 54.9096928, 54.9390132, 54.7620135, 54.8300078, 54.8883947, 54.8743167, 54.8173659]

clon = mean(lons)
clat = mean(lats)

g = pyproj.Geod(ellps='WGS84')
az = 261.0
lon2, lat2, baz1 = g.fwd(lon1, lat1, az, 1000000)

m.drawgreatcircle(lon1, lat1, lon2, lat2, del_s=0.1)
m.drawgreatcircle(clon, clat, lon2, lat2, del_s=0.1)

clon==lon1
clat==lat1 
```

有谁知道是什么问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:08:48.440

```
>>> type(clon)
<type 'numpy.float64'>
>>> type(lon1)
<type 'float'> 
```

可能`drawgreatcircle()`不知道该怎么做`numpy.float64`，所以将其转换为常规浮点数

```
>>> clon = float(clon)
>>> type(clon)
<type 'float'> 
```

# ruby - Ruby (Sinatra) JSON.parse 不适用于 json 数据

> ID：15372917
> 
> 赞同：2
> 
> 时间：2013-03-12T21:51:47.343
> 
> 标签：ruby, json, knockout.js, sinatra

我使用 ko.toJSON 从 knockout.js 获取 json 对象

```
self.cmaterials = ko.observableArray([]); 
```

……

```
 ko.computed(function() {
    $.ajax({
         url: "/editcmat1",
         type: "PUT",
         data: ko.toJSON(
            self.cmaterials
         )
     });
}); 
```

红宝石代码

```
puts params 
```

> {"id":34,"name":"混凝土","material_id":3}

当我尝试转换它时

```
puts JSON.parse(js) 
```

> TypeError - 无法将 Hash 转换为 String：

我怎样才能使它成为一个可用的 Ruby 哈希。

```
puts parse.keys
  {"id":34,"name":"Concrete","material_id":3} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:59:28.757

要对代码执行您尝试执行的操作，您将执行以下操作：

```
 puts JSON.parse(js).to_s 
```

使用该`JSON.parse`方法使其成为可用的哈希。您正在尝试输出该哈希`puts`，这意味着您必须将其转换为字符串。如果您想访问该哈希，只需执行以下操作：

```
hash = JSON.parse(js)
puts hash["id"] #34
puts hash["name"] #concrete
etc... 
```

# sql - 如何在单个存储过程调用中插入 N 条记录

> ID：15372921
> 
> 赞同：1
> 
> 时间：2013-03-12T21:52:15.747
> 
> 标签：sql, sql-server, tsql, stored-procedures, bulkinsert

我将如何使用单个存储过程调用将未知数量的记录插入数据库？

假设我有这个表定义：

```
CREATE TABLE PHONE(
    PhoneID int identity(1,1),
    PhoneNumber varchar(20),
    PersonID int
) 
```

我有以下插入存储过程：

```
CREATE PROCEDURE dbo.usp_Phone_Insert
    @PhoneNumber varchar(20),
    @PersonID int
AS

INSERT 
    PHONE 
VALUES
    (@PhoneNumber, @PersonID) 
```

我如何能够将其转换为在对该存储过程的一次调用中插入任意数量的记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:57:17.943

我有一些博客文章，其中包含解决此主题的代码示例。

Singleton、XML 和 TVP 插入的性能比较 [http://sqlfool.com/2008/11/performance-comparison-of-singleton-xml-and-tvp-inserts/](http://sqlfool.com/2008/11/performance-comparison-of-singleton-xml-and-tvp-inserts/)

使用 XML 批量插入 [http://sqlfool.com/2008/11/bulk-inserts-with-xml/](http://sqlfool.com/2008/11/bulk-inserts-with-xml/)

具有表值参数的一对多插入 [http://sqlfool.com/2008/11/one-to-many-inserts-with-table-valued-parameters/](http://sqlfool.com/2008/11/one-to-many-inserts-with-table-valued-parameters/)

HTH。

# vertical-alignment - 内联块最后一个子元素问题

> ID：15372926
> 
> 赞同：2
> 
> 时间：2013-03-12T21:52:20.650
> 
> 标签：vertical-alignment, css, css-selectors

我在定位内联块水平滚动站点的最后一个子节点时遇到问题。在 Firefox 中一切看起来都不错，但在 Chrome 中，文章的最后一个子项以某种方式被向下推了大约 18 像素。当然，我尝试将“vertical-align:top”单独分配给最后一个元素，但仍然没有 {good} 结果......

这是我的网站：[http ://rup.fiser.biz/braunova/category/scenography/](http://rup.fiser.biz/braunova/category/scenography/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:02:15.397

```
.post {
  height: 351px;
  float: left;
  display: inline-block;
} 
```

删除`float: left;`你有`display: inline-block`（`float`或`display`，据我所知不能同时拥有）

```
.site-content article {
  margin: 0 20px 0 0;
  padding: 0;
} 
```

`margin`如果要将 las 元素移到其他元素旁边，请删除

# c# - 获取只出现一次的所有元素

> ID：15372930
> 
> 赞同：1
> 
> 时间：2013-03-12T21:52:34.080
> 
> 标签：c#, linq, list, element, distinct

使用 LINQ，我可以获得只出现一次的所有 int 元素的列表吗？

例如

```
{1,2,4,8,6,3,4,8,8,2} 
```

会成为

```
{1,6,3} 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T21:55:01.350

```
var result =
    from x in xs
    group xs by x into grp
    where grp.Count() == 1
    select grp.Key; 
```

像那样？

50秒太晚了......：/

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-12T21:54:11.887

```
list.GroupBy(i => i)
    .Where(g => g.Count() == 1)
    .Select(g => g.First()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T15:28:44.600

您可以使用的各种扩展方法：

```
public static IEnumerable<T> WhereUnique<T>(this IEnumerable<T> items)
{
    return items.GroupBy(x => x).Where(x => x.Count() ==1).Select(x => x.First());
} 
```

性能可能稍高一些，具体取决于您的数据分布：

```
public static IEnumerable<T> WhereUnique<T>(this IEnumerable<T> items)
{
    return items.GroupBy(x => x).Where(x => !x.Skip(1).Any()).Select(x => x.First());
} 
```

还有 WhereUniqueBy，它的工作原理与 MoreLinqs 类似`DistinctBy()`：

```
public static IEnumerable<T> WhereUniqueBy<T, TSelector>(this IEnumerable<T> items, Func<T, TSelector> func)
{
    return items.GroupBy(func).Where(x => x.Count() ==1).Select(x => x.First());
} 
```

# delphi - 强制带有 nVidia Optimus 的系统为我的应用程序使用真正的 GPU？

> ID：15372931
> 
> 赞同：7
> 
> 时间：2013-03-12T21:52:36.453
> 
> 标签：delphi, opengl, nvidia

我希望我的应用程序始终在 nVidia Optimus 笔记本电脑上使用真正的 gpu 运行。

来自“在 Optimus 系统上启用高性能图形渲染”，（[http://developer.download.nvidia.com/devzone/devcenter/gamegraphics/files/OptimusRenderingPolicies.pdf](http://developer.download.nvidia.com/devzone/devcenter/gamegraphics/files/OptimusRenderingPolicies.pdf)）：

> 全局变量 NvOptimusEnablement（驱动程序版本 302 中的新功能） 从版本 302 驱动程序开始，应用程序开发人员可以在运行时指示 Optimus 驱动程序使用高性能图形渲染任何应用程序——即使是那些没有现有应用程序配置文件的应用程序。他们可以通过导出一个名为 NvOptimusEnablement 的全局变量来做到这一点。Optimus 驱动程序查找导出的存在和值。此时只有 DWORD 的 LSB 很重要。值 0x00000001 表示应使用高性能图形执行渲染。值 0x00000000 表示应忽略此方法。示例用法：

```
extern "C" {   _declspec(dllexport) DWORD NvOptimusEnablement = 0x00000001; } 
```

问题是我想使用 Delphi 来做到这一点。从我读过的内容来看，即使存在一些 hack，Delphi 也不支持变量的导出。我确实尝试了其中一些，但无法使其工作。

在同一个 nvidia 文档中，我读到强制正确的 GPU 可以通过静态链接到少数列出的 dll 之一来完成。但我不想链接到我不使用的 dll。（为什么 opengl.dll 不是其中之一，我无法理解。）一个简单的导出变量似乎更清晰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:52:29.073

> 从我读过的内容来看，Delphi 不支持变量的导出。

这种说法是不正确的。下面是一个最简单的例子，展示了如何从 Delphi DLL 中导出一个全局变量：

```
library GlobalVarExport;

uses
  Windows;

var
  NvOptimusEnablement: DWORD;

exports
  NvOptimusEnablement;

begin
  NvOptimusEnablement := 1;
end. 
```

我认为你的问题是你这样写的：

```
library GlobalVarExport;

uses
  Windows;

var
  NvOptimusEnablement: DWORD=1;

exports
  NvOptimusEnablement;

begin
end. 
```

并且无法编译并出现此错误：

```
E2276 标识符“NvOptimusEnablement”无法导出

```

我不明白为什么编译器不喜欢第二个版本。这可能是一个错误。但是第一个版本中的解决方法很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:10:37.807

我不是 Delphi 专家，但 AFAIK 可以从 Delphi 链接到用 C 实现的静态库。所以我只需创建一个小的存根库，只提供这个导出，它静态链接到你的 Delphi 程序。这增加了您需要的出口。

# jdbc - JDBC 连接在 Win8、Oracle 11g XE 上因 ORA-12505 失败

> ID：15372933
> 
> 赞同：2
> 
> 时间：2013-03-12T21:52:46.080
> 
> 标签：jdbc, oracle-xe, tns

我遇到的错误超出了我在[TNS-12505 中看到的错误：TNS:listener 目前不知道连接描述符中给出的 SID](https://stackoverflow.com/questions/5661610/tns-12505-tnslistener-does-not-currently-know-of-sid-given-in-connect-descript)

我正在使用 Windows 8、Oracle 11.2 XE、java 1.7.15 和 Eclipse Juno SR2。

我收到的错误是：

*java.sql.SQLException：侦听器拒绝连接并出现以下错误：ORA-12505，TNS：侦听器当前不知道连接描述符中给出的 SID*

我已经正确注册了驱动程序，并且我已经编辑了 listener.ora 以使服务明确，在我所看到的两种方式中都给出了示例 - 在 SID_LIST_LISTENER 下，我添加了：

```
(SID_DESC =
   (SID_NAME = XE)
   (ORACLE_HOME = C:\oraclexe\app\oracle\product\11.2.0\server)
) 
```

在 LISTENER = (DESCRIPTION_LIST 我添加了

```
(DESCRIPTION =
 (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
 (CONNECT_DATA =
   (SERVER = DEDICATED)
   (SERVICE_NAME = XE)
 ) 
```

tnsnames.ora 包含，作为它的第一个条目：

```
XE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = XE)
    )
  ) 
```

进行调用的源代码是：

```
Class.forName(JDBC_DRIVER);
String connectionString = "jdbc:oracle:thin:localhost:1521/XE";
myConnection = DriverManager.getConnection(connectionString, "myuser", "myuserpw"); 
```

我还对connectionString进行了以下排列。结果在这里注明：

```
jdbc:oracle:thin:@localhost:1521:XE // java.sql.SQLException: ORA-01017: invalid username/password; logon denied
jdbc:oracle:thin:localhost:1521:XE  // error ORA 12505
jdbc:oracle:thin:@//localhost:1521:XE // error java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection
jdbc:oracle:thin:@localhost:1521/XE // error ORA-01017
jdbc:oracle:thin:@//localhost:1521/XE // error ORA-01017 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:13:43.667

我有一个答案！（我猜，血腥的固执是它自己的回报）我改变了我所做的连接调用并重组了连接字符串，如下所示：

```
String connectionString = "jdbc:oracle:thin:myuser/mypw@localhost:1521:XE"; 
myConnection = DriverManager.getConnection(connectionString); 
```

这样可行！现在下一个人可以谷歌它。每次我尝试使用三个参数的调用版本都会爆炸，但是嵌入用户名/密码的相同基本字符串在单参数调用中有效。

我相信这是 XE 数据库提供的驱动程序中的一个错误 - 哦 Oracle，你能告诉我们吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T15:08:15.437

打开`cmd`

执行`lsnrctl`命令。

输入提示`start`。`LSNRCTL>`

# c# - 如何更新绑定到列表的预格式化 DataGridView？

> ID：15372939
> 
> 赞同：1
> 
> 时间：2013-03-12T21:53:03.433
> 
> 标签：c#, asp.net, winforms, datagridview

我有一个绑定到字典的 Values 集合的 DataGridView。在表单的构造函数中，我可以创建字典并将 DataGridView 的列绑定到将包含在字典中的结构中的字段：

```
 m_tasks = new Dictionary<int,OperationsTaskLabeledData>();
        var taskArray = from task in m_tasks.Values select new {
        StartDate = task.m_start_task_date.ToString("M/dd H:mm"),
        EndDate = task.m_task_date.ToString("M/dd H:mm"),
        Description = task.m_short_desc,
        Object = task.m_device_id,
        InitialLocation = task.m_initial_location,
        FinalLocation = task.m_final_location };
        dgvFutureTasks.DataSource = taskArray.ToArray(); 
```

我希望在表单的构造函数中使用此代码，以便可以格式化列，并且每次更新网格中的数据时我都不必重新格式化它们。

当我实际上有数据要显示在这个 datagridview 中时，我该怎么办？我将调用此函数：

```
private void DisplayFutureTasks(IEnumerable<OperationsTaskLabeledData> tasks) 
```

但我不知道在这个函数里面做什么。

每次更新控件时，我都可以重新绑定 datagridview 控件并重新格式化所有列，但这似乎非常浪费。我确信有更好的方法可以做到这一点，我宁愿以某种合理的方式做到这一点，而不是使用丑陋的蛮力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:16:07.163

我现在已经弄清楚了如何做我想做的事情。

我知道我在设计时需要的列，所以在 IDE 中我将列添加到我的 datagridview 并根据需要设置它们的格式。然后我将网格视图的 AutoGenerateColumns 属性设置为 false。由于某些未知原因，该属性在设计器中不可用，必须在代码中设置。最后，我可以将每列的 DataPropertyName 设置为我将链接到的结构中相应字段的名称。例如，这里是我将用来生成数据源的 LINQ 代码：

```
taskArray = from task in tasks select new {
                                StartDate = task.m_start_task_date.ToString("M/dd H:mm"),
                                EndDate = task.m_task_date.ToString("M/dd H:mm"),
                                Description = task.m_short_desc,
                                Object = task.m_device_id,
                                InitialLocation = task.m_initial_location,
                            FinalLocation = task.m_final_location };
.DataSource = taskArray.ToArray(); 
```

这是我的表单构造函数中设置 DataPropertyName 属性的代码：

```
dgvFutureTasks.AutoGenerateColumns = false;
dgvFutureTasks.Columns["colStartTime"].DataPropertyName = "StartDate";
dgvFutureTasks.Columns["colFinishTime"].DataPropertyName = "EndDate";
dgvFutureTasks.Columns["colDescription"].DataPropertyName = "Description";
dgvFutureTasks.Columns["colObject"].DataPropertyName = "Object";
dgvFutureTasks.Columns["colInitialLocation"].DataPropertyName = "InitialLocation";
dgvFutureTasks.Columns["colFinalLocation"].DataPropertyName = "FinalLocation"; 
```

此时，DataGridView 按预期显示了数据。

罗伯

# iphone - iOS UICollectionView 每个部分的单元格选择

> ID：15372940
> 
> 赞同：3
> 
> 时间：2013-03-12T21:53:08.267
> 
> 标签：iphone, ios, uicollectionview, uicollectionviewcell

我想知道如何设置我的`UICollectionView`，以便每个部分最多可以选择 1 个单元格。我看到有`allowsMultipleSelection`UICollectionView 的属性，但我想知道如何防止在同一部分中选择多个单元格。

我需要在`– collectionView:shouldSelectItemAtIndexPath:`and`collectionView:shouldDeselectItemAtIndexPath:`方法中实现逻辑还是有更简单的方法？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T21:57:54.250

在您的 didSelectRowAtIndexPath 中，您可以执行以下操作：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    NSArray * selectedRows = self.tableView.indexPathsForSelectedRows;

    for (NSIndexPath * selectedRow in selectedRows) {
        if ((selectedRow.section == indexPath.section) && (selectedRow.row != indexPath.row)) {
            [self.tableView deselectRowAtIndexPath:selectedRow animated:NO];
        }
    }
} 
```

allowMultipleSelection 应设置为 YES。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-12T13:40:41.887

在 Swift 2.0 中：

```
override func viewDidLoad() {
    super.viewDidLoad()

    self.collectionView.allowsMultipleSelection = true
}

func collectionView(collectionView: UICollectionView, didSelectItemAtIndexPath indexPath: NSIndexPath) {

    let selectedRows: [NSIndexPath] = self.collectionView.indexPathsForSelectedItems()!
    for selectedRow: NSIndexPath in selectedRows {
        if (selectedRow.section == indexPath.section) && (selectedRow.row != indexPath.row) {
            self.collectionView.deselectItemAtIndexPath(selectedRow, animated: false)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-29T16:36:28.677

在 Swift 5.0 中：

```
override func viewDidLoad() {
    super.viewDidLoad()
    self.collectionView.allowsMultipleSelection = true
}

func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {
    (collectionView.indexPathsForSelectedItems ?? [])
        .filter { $0.section == indexPath.section && $0.item != indexPath.item && $0.row != indexPath.row }
        .forEach { self.collectionView.deselectItem(at: $0, animated: false) }
} 
```

如果您希望它在部分中的项目之间切换，请使用：

```
override func viewDidLoad() {
    super.viewDidLoad()
    self.collectionView.allowsMultipleSelection = true
}

func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {
    (collectionView.indexPathsForSelectedItems ?? [])
        .filter { $0.section == indexPath.section && $0.item }
        .forEach { self.collectionView.deselectItem(at: $0, animated: false) }
} 
```

我认为这会带来更好的用户体验，但这是你的决定

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T22:02:11.647

您可能需要在`-shouldSelect`and中执行逻辑`-shouldDeselect`。也许保留**每个部分选择的单元格数量的字典**？

```
NSMutableDictionary *dict;

- (BOOL)collectionView:(UICollectionView *)view shouldSelectItemAtIndexPath:(NSIndexPath *)path
{
    NSInteger *section = path.section;
    if (!dict)
    {
        dict = [[NSMutableDictionary alloc] init];
    }
    NSNumber *numberSelected = [dict objectForKey:[NSNumber numberWithInteger:section]];
    if (numberSelected > 0)
    {
        return NO;
    }
    else
    {
        [dict setObject:[NSNumber numberWithDouble:numberSelected.doubleValue - 1] forKey:[NSNumber numberWithInteger:section]];
        return YES;
    }
}
- (BOOL)collectionView:(UICollectionView *)view shouldDeselectItemAtIndexPath:(NSIndexPath *)path
{
    NSInteger *section = path.section;
    if (!dict)
    {
        dict = [[NSMutableDictionary alloc] init];
    }
    NSNumber *numberSelected = [dict objectForKey:[NSNumber numberWithInteger:section]];

    numberSelected = [NSNumber numberWithDouble:numberSelected.doubleValue - 1];

    [dict setObject:numberSelected forKey:[NSNumber numberWithInteger:section]];

    return YES;
} 
```

那应该行得通。

# html - Word 文档中的 XML 问题

> ID：15372942
> 
> 赞同：0
> 
> 时间：2013-03-12T21:53:14.580
> 
> 标签：html, xml, xml-parsing, ms-word

我有一个从 Word 插入的 XML 文档。来自用户的细节有点粗略，但我相信 XML 是通过从 Word 复制插入的。所需的功能是将复制的 MS Word 格式的文本插入 xml 文档，将其存储在数据库中以供以后导出。最初的 XML 看起来不错，除了一个奇怪的标签。

```
 <?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /> 
```

此标记具有不允许在 Visual Studio 2010 和 IE 8 中解析 XML 的效果。删除此标记后会出现另一个错误。

```
End tag 'FONT' does not match the start tag 'P'. Error processing resource 
```

似乎微软在 XML 标记内生成的 HTML 存在问题。我不是 XML 专家……MS 从 Word 生成的 HTML 有问题吗？为什么删除标签有帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:58:40.113

MS Word 会产生糟糕的标记——在 XML 中存储是最糟糕的方法。如果您必须保留错误的格式数据，关系数据库将是更好的解决方案，否则将需要删除格式或手动更正它。

# graphite - 根据计数绘制计时器

> ID：15372947
> 
> 赞同：0
> 
> 时间：2013-03-12T21:53:30.070
> 
> 标签：graphite

我正在向 Graphite 发送计时器指标，并希望根据时间创建计数图，但我不能这样做或基于该值的折线图。尝试使用 Graphite 网络应用程序，但没有运气。

示例指标 timer1 200 timer1 300 timer1 200

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:08:37.337

我试图理解你想要什么。给定以下以 [metric] [data] [timestamp] 格式记录的数据

```
timer1 200 1s
timer1 300 50s
timer1 200 100s 
```

（我知道我的时间戳是假的非 posix 时间，只是想保持简单）

你想看类似的东西吗

**(A)** timer1 的值按分钟求和，所以 (x, y) 坐标为 (0, 500) 和 (1, 200)

**(B)** timer1 的值像一个计数器一样随着时间不断累加，所以 (x, y) 坐标为 (0, 200), (50, 500), (100, 700)

对于**(A)**：

```
summarize(timer1, "1min") 
```

对于**(B)**：

```
integral(timer1) 
```

您可以通过将原始系列数据放入图形中来将函数应用于石墨 webapp 中的数据，然后单击图形数据 -> 选择您的系列 -> 应用函数

另请阅读不同功能的[文档](http://graphite.readthedocs.org/en/1.0/functions.html)

# function - Matlab - 程序的内存使用情况

> ID：15372948
> 
> 赞同：1
> 
> 时间：2013-03-12T21:53:30.373
> 
> 标签：function, matlab, memory-management

我目前正在 MATLAB 中实现不同的信号处理算法，以便稍后在 C++ 中实现其中一种。为了在这些之间进行选择，我将执行一些测试，其中一个是内存使用情况检查。也就是说，我想看看不同算法使用了多少内存。由于实现分为子功能，因此我在收集有关实际内存使用情况的信息时遇到了问题。

这是我迄今为止尝试过的：

1.  我使用分析器检查每个函数的内存使用情况。问题：它只显示分配的内存使用情况。它没有显示例如每个函数中变量的内存使用情况。

2.  我在每个函数的末尾都使用了 whos 来收集有关函数工作区中所有变量的信息。然后我将这些添加到全局变量中。问题：即使执行完成，全局变量也会不断增加，而且似乎永远不会停止。

现在我的问题。如何以一种相当简单的方式获取有关我的程序的内存使用情况的信息，包括所有功能？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:07:52.783

我认为您`whos`在每个函数结束时（就在它返回之前）调用的策略是一个很好的策略；但也许您想将结果打印到屏幕而不是全局。如果它“不断增加”，那么也许你有一个回调函数被你不知道地调用，其中包括你的一个`whos`调用。通过打印到屏幕上（也许`disp('**** memory usage at the end of <function name> ***')`在它之前包括一个，你会发现它为什么“继续”。

using 的替代方法`memory`有些帮助，但它提供了有关“可用”内存的信息，以及 Matlab 使用的所有内存（不仅仅是变量）。

当然，内存使用的任何快照都不一定能达到峰值 - 有可能这样的语句

```
x = sum(repmat(A, [1000 1])); 
```

将需要相当大的峰值内存使用量（当您复制矩阵`A`1000 次时），但之前或之后的内存快照（或正在运行`whos`）不会告诉您刚刚发生了什么......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-17T02:35:42.293

监视内存使用情况的最佳方法是使用分析器，并打开内存选项：

profile -memory on % 运行你的代码 profreport

分析器返回内存使用和函数调用统计信息。请注意，内存选项会影响您的执行速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:58:14.403

可以使用[记忆功能](http://www.mathworks.com/help/matlab/ref/memory.html)。另请参阅[内存管理功能](http://www.mathworks.com/help/matlab/matlab_prog/memory-management-functions.html)。看看[matlab 内存使用情况](http://undocumentedmatlab.com/blog/profiling-matlab-memory-usage/)。

# python - 将两个列表合并到一个字典中时保留顺序

> ID：15372949
> 
> 赞同：9
> 
> 时间：2013-03-12T21:53:35.500
> 
> 标签：python, list, dictionary, tuples, mysql-python

我正在使用 mysqldb 连接到 mysql 数据库，我在一个变量中获取元数据/列，在另一个变量中获取数据/行。现在我必须将列表和元组合并到一个字典中并保留顺序。我知道 dicts 是无序的，但是有什么替代方法吗？

```
cursor.description = ['userid', 'cid', 'mid', 'did', 'msid']
data = (29L, 35L, None, '', None)

result = {}
for i in data:
    result.update = dict(zip(cols, i)) 
```

预期结果

```
result = {'userid': 29L, 'cid': 35L, 'mid': None, 'did': '', 'msid': None} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T21:55:36.823

使用[*`OrderedDict`*](http://docs.python.org/2/library/collections.html#collections.OrderedDict)：

```
from collections import OrderedDict

result = OrderedDict(zip(cursor.description, data)) 
```

例子：

```
>>> from collections import OrderedDict
>>> cols = ['userid', 'cid', 'mid', 'did', 'msid']
>>> data = (29L, 35L, None, '', None)
>>> result = OrderedDict(zip(cols, data))
>>> result
OrderedDict([('userid', 29L), ('cid', 35L), ('mid', None), ('did', ''), ('msid', None)])
>>> result['userid']
29L
>>> result['cid']
35L
>>> list(result)
['userid', 'cid', 'mid', 'did', 'msid'] 
```

从 CPython 3.6 和 Python 3.7 开始，常规`dict`s 按插入顺序排序，因此如果您知道您的代码将在合适的版本下运行，则可以`dict`在此处使用。`OrderedDict`

仅限 Python 3.7+（或 CPython 下的 Python 3.6）：

```
>>> cols = ['userid', 'cid', 'mid', 'did', 'msid']
>>> data = (29, 35, None, '', None)
>>> result = dict(zip(cols, data))
>>> result
{'userid': 29, 'cid': 35, 'mid': None, 'did': '', 'msid': None}
>>> result['userid']
29
>>> result['cid']
35
>>> list(result)
['userid', 'cid', 'mid', 'did', 'msid'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:00:58.907

忘记听写

```
>>> cols=['userid', 'cid', 'mid', 'did', 'msid']
>>> data = (29L, 35L, None, '', None)
>>> zip(cols,data)
[('userid', 29L), ('cid', 35L), ('mid', None), ('did', ''), ('msid', None)] 
```

`append`如果你有很多结果集，那么首先设置一个数组

```
>>> myarray.append(zip(cols,data)) 
```

# java - 具有日期范围的 HashMap

> ID：15372954
> 
> 赞同：3
> 
> 时间：2013-03-12T21:53:54.220
> 
> 标签：java, data-structures, hashmap

我需要基于多键**快速找到一些值。**键由：组成， `< Int userId, String measureName, Date startDate, Date endDate >` 值是双精度。

问题是我必须要求指示一天的值，而不是日期范围。因此，如果我要求 a `userId`、 a`measureName`和 a ，数据结构必须回答日期介于`startDate`和之间的值`endDate`（日期范围之间没有重叠）。

我不明白哪个是更好的数据结构来实现这一点。哈希表？树图？多键映射？范围地图？帮助！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:58:01.717

我认为您应该使用 TreeMap 和以下方法： http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#floorEntry( [K)](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#floorEntry(K)) [http://docs.oracle.com/ javase/6/docs/api/java/util/TreeMap.html#higherEntry(K)](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#higherEntry(K)) 但在比较函数中仅使用一个日期 - startDate 或 endDate。由于这些范围不重叠，这应该不是问题，并使 TreeMap 中提到的方法可用。

例如：如果您决定使用比较`endDate`（以及除其他日期以外的其他字段），则应使用方法`floorEntry`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:15:10.013

我推荐一些 Map 作为 User/Measurement 部分键。该值将是一个排序的元组数组（日期范围，floatval）。在此数组中，您对包含日期的日期范围执行二进制搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:03:21.173

最好使用带有自定义键对象的 TreeMap。你会有类似的东西：

```
...
TreeMap<MyMultiKey,Double> map = ...

class MyMultiKey implements Comparable<MyMultiKey>{
...
} 
```

假设`MyMultiKey`'s 的`compareTo`方法被实施以正确订购您的多键，您可以在`MyMultiKey`每次想要搜索特定日期时创建一个新实例，`map.floorKey(MyMultiKey m)`并`map.higherKey(MyMultiKey m)`确保您找到一个包含该日期的开始和结束时间的键您在新的密钥实例中指定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T22:49:54.443

`Map`和 order的组合`List`呢？该地图有一个复合键`userId`and `measureName`，值是日期范围和 double 的排序列表`value`：

```
Map<Key,List<Entry>> data = new HashMap<>();
List<Entry> entries = data.get(new Key(userId, measureName));
int i = Collections.binarySearch(entries, new Entry(searchDate,searchDate, 0.0));
double value = i < 0 ? 0.0 : entries.get(i).value; 
```

`Key`必须实现`hashCode()`和`equals()`使用其成员`userId`和`measureName`. `Entry`如果一个范围是另一个范围的一部分，则必须实现`Comparable<Entry>`where`compareTo()`必须返回 0（startDate 比较 <= 0 并且 endDate 比较 >= 0 或 0 如果 startDate 比较 >= 0 并且 endDate 比较 <= 0）否则比较 startDate+ (endDate-startDate)/2 （范围的中间）与 double 无关`value`。

如果您主要阅读而不修改此结构，它应该很快。如果使用较多，比较将被编译为本机。如果该功能仅适用于单个用户并进行度量，则可以仅使用排序列表，如果仅适用于单个用户，则可以创建 `Map<UserId<Map<MeasureName,List<Entry>>>>`类似的结构。

首先尝试一个简单的解决方案，前后测量，仅在需要时进行性能优化。

# c++ - 在 SetUnhandledExceptionFilter 的处理程序中如何打印堆栈跟踪？

> ID：15372962
> 
> 赞同：2
> 
> 时间：2013-03-12T21:54:26.937
> 
> 标签：c++, winapi

当发生未处理的异常时，我想打印一个堆栈跟踪而不是仅仅终止。我尝试使用`SetUnhandledExceptionFilter`：

```
SetUnhandledExceptionFilter(UnhandledException);
    ...
LONG WINAPI UnhandledException(LPEXCEPTION_POINTERS exceptionInfo)  
{  
    printf("An exception occurred which wasn't handled!\nCode: 0x%08X\nAddress: 0x%08X",   
        exceptionInfo->ExceptionRecord->ExceptionCode,  
        exceptionInfo->ExceptionRecord->ExceptionAddress);
    return EXCEPTION_EXECUTE_HANDLER;  
} 
```

我发现这段代码可以正常工作。但是没有附加信息，因为`ExceptionCode`和`ExceptionAddress`无论如何都打印在系统“事件查看器”中。如果可以打印完整的堆栈跟踪，以便我可以确定发生异常的确切点？

我找到了这段代码[https://code.google.com/p/m0d-s0beit-sa/source/browse/src/main.cpp?r=9ceb4fec21d647b169c72851d7882bef2b9c5a8a](https://code.google.com/p/m0d-s0beit-sa/source/browse/src/main.cpp?r=9ceb4fec21d647b169c72851d7882bef2b9c5a8a)它部分解决了我的问题。仅打印发生异常的方法。但不打印异常类型和行号。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T22:24:26.497

这是我几年前为 Windows 编写的一些堆栈遍历代码。这是它产生的输出类型：

```
Walking stack.
0       DebugBreak
1       ThreadFunc2     e:\c\source\stackwalk2a.cpp(72)
2       ThreadFunc1     e:\c\source\stackwalk2a.cpp(79)
3       TargetThread    e:\c\source\stackwalk2a.cpp(86)
4       BaseThreadInitThunk
5       RtlUserThreadStart
End of stack walk. 
```

缺少的主要内容是有关异常类型的任何内容。如果您谈论的是本机结构化/矢量异常，我很确定它也应该是可检索的。检索 C++ 异常的类型可能有点困难（但我不太确定——它可能很容易）。

```
#include <windows.h>
#include <winnt.h>

#include <string>
#include <vector>
#include <Psapi.h>
#include <algorithm>
#include <iomanip>
#include <iostream>
#include <stdexcept>
#include <iterator>

#pragma comment(lib, "psapi.lib")
#pragma comment(lib, "dbghelp.lib")

// Some versions of imagehlp.dll lack the proper packing directives themselves
// so we need to do it.
#pragma pack( push, before_imagehlp, 8 )
#include <imagehlp.h>
#pragma pack( pop, before_imagehlp )

struct module_data {
    std::string image_name;
    std::string module_name;
    void *base_address;
    DWORD load_size;
};
typedef std::vector<module_data> ModuleList;

HANDLE thread_ready;

bool show_stack(std::ostream &, HANDLE hThread, CONTEXT& c);
DWORD __stdcall TargetThread( void *arg );
void ThreadFunc1();
void ThreadFunc2();
DWORD Filter( EXCEPTION_POINTERS *ep );
void *load_modules_symbols( HANDLE hProcess, DWORD pid );

int main( void ) {
    DWORD thread_id;

    thread_ready = CreateEvent( NULL, false, false, NULL );

    HANDLE thread = CreateThread( NULL, 0, TargetThread, NULL, 0, &thread_id );

    WaitForSingleObject( thread_ready, INFINITE );
    CloseHandle(thread_ready);
    return 0;
}

// if you use C++ exception handling: install a translator function
// with set_se_translator(). In the context of that function (but *not*
// afterwards), you can either do your stack dump, or save the CONTEXT
// record as a local copy. Note that you must do the stack dump at the
// earliest opportunity, to avoid the interesting stack-frames being gone
// by the time you do the dump.
DWORD Filter(EXCEPTION_POINTERS *ep) {
    HANDLE thread;

    DuplicateHandle(GetCurrentProcess(), GetCurrentThread(),
        GetCurrentProcess(), &thread, 0, false, DUPLICATE_SAME_ACCESS);
    std::cout << "Walking stack.";
    show_stack(std::cout, thread, *(ep->ContextRecord));
    std::cout << "\nEnd of stack walk.\n";
    CloseHandle(thread);

    return EXCEPTION_EXECUTE_HANDLER;
}

void ThreadFunc2() {
    __try { DebugBreak(); }
    __except (Filter(GetExceptionInformation())) {  }
    SetEvent(thread_ready);
}

void ThreadFunc1(void (*f)()) {
    f();
}

// We'll do a few levels of calls from our thread function so 
//     there's something on the stack to walk...
//
DWORD __stdcall TargetThread(void *) {
    ThreadFunc1(ThreadFunc2);
    return 0;
}

class SymHandler { 
    HANDLE p;
public:
    SymHandler(HANDLE process, char const *path=NULL, bool intrude = false) : p(process) { 
        if (!SymInitialize(p, path, intrude)) 
            throw(std::logic_error("Unable to initialize symbol handler"));
    }
    ~SymHandler() { SymCleanup(p); }
};

#ifdef _M_X64
STACKFRAME64 init_stack_frame(CONTEXT c) {
    STACKFRAME64 s;
    s.AddrPC.Offset = c.Rip;
    s.AddrPC.Mode = AddrModeFlat;
    s.AddrStack.Offset = c.Rsp;
    s.AddrStack.Mode = AddrModeFlat;    
    s.AddrFrame.Offset = c.Rbp;
    s.AddrFrame.Mode = AddrModeFlat;
    return s;
}
#else
STACKFRAME64 init_stack_frame(CONTEXT c) {
    STACKFRAME64 s;
    s.AddrPC.Offset = c.Eip;
    s.AddrPC.Mode = AddrModeFlat;
    s.AddrStack.Offset = c.Esp;
    s.AddrStack.Mode = AddrModeFlat;    
    s.AddrFrame.Offset = c.Ebp;
    s.AddrFrame.Mode = AddrModeFlat;
    return s;
}
#endif

void sym_options(DWORD add, DWORD remove=0) {
    DWORD symOptions = SymGetOptions();
    symOptions |= add;
    symOptions &= ~remove;
    SymSetOptions(symOptions);
}

class symbol { 
    typedef IMAGEHLP_SYMBOL64 sym_type;
    sym_type *sym;
    static const int max_name_len = 1024;
public:
    symbol(HANDLE process, DWORD64 address) : sym((sym_type *)::operator new(sizeof(*sym) + max_name_len)) {
        memset(sym, '\0', sizeof(*sym) + max_name_len);
        sym->SizeOfStruct = sizeof(*sym);
        sym->MaxNameLength = max_name_len;
        DWORD64 displacement;

        if (!SymGetSymFromAddr64(process, address, &displacement, sym))
            throw(std::logic_error("Bad symbol"));
    }

    std::string name() { return std::string(sym->Name); }
    std::string undecorated_name() { 
        std::vector<char> und_name(max_name_len);
        UnDecorateSymbolName(sym->Name, &und_name[0], max_name_len, UNDNAME_COMPLETE);
        return std::string(&und_name[0], strlen(&und_name[0]));
    }
};

bool show_stack(std::ostream &os, HANDLE hThread, CONTEXT& c) {
    HANDLE process = GetCurrentProcess();
    int frame_number=0;
    DWORD offset_from_symbol=0;
    IMAGEHLP_LINE64 line = {0};

    SymHandler handler(process);

    sym_options(SYMOPT_LOAD_LINES | SYMOPT_UNDNAME);

    void *base = load_modules_symbols(process, GetCurrentProcessId());

    STACKFRAME64 s = init_stack_frame(c);

    line.SizeOfStruct = sizeof line;

    IMAGE_NT_HEADERS *h = ImageNtHeader(base);
    DWORD image_type = h->FileHeader.Machine;

    do {
        if (!StackWalk64(image_type, process, hThread, &s, &c, NULL, SymFunctionTableAccess64, SymGetModuleBase64, NULL))
            return false;

        os << std::setw(3) << "\n" << frame_number << "\t";
        if ( s.AddrPC.Offset != 0 ) {
            std::cout << symbol(process, s.AddrPC.Offset).undecorated_name();

            if (SymGetLineFromAddr64( process, s.AddrPC.Offset, &offset_from_symbol, &line ) ) 
                    os << "\t" << line.FileName << "(" << line.LineNumber << ")";
        }
        else
            os << "(No Symbols: PC == 0)";
        ++frame_number;
    } while (s.AddrReturn.Offset != 0);
    return true;
}

class get_mod_info {
    HANDLE process;
    static const int buffer_length = 4096;
public:
    get_mod_info(HANDLE h) : process(h) {}

    module_data operator()(HMODULE module) { 
        module_data ret;
        char temp[buffer_length];
        MODULEINFO mi;

        GetModuleInformation(process, module, &mi, sizeof(mi));
        ret.base_address = mi.lpBaseOfDll;
        ret.load_size = mi.SizeOfImage;

        GetModuleFileNameEx(process, module, temp, sizeof(temp));
        ret.image_name = temp;
        GetModuleBaseName(process, module, temp, sizeof(temp));
        ret.module_name = temp;
        std::vector<char> img(ret.image_name.begin(), ret.image_name.end());
        std::vector<char> mod(ret.module_name.begin(), ret.module_name.end());
        SymLoadModule64(process, 0, &img[0], &mod[0], (DWORD64)ret.base_address, ret.load_size);
        return ret;
    }
};

void *load_modules_symbols(HANDLE process, DWORD pid) {
    ModuleList modules;

    DWORD cbNeeded;
    std::vector<HMODULE> module_handles(1);

    EnumProcessModules(process, &module_handles[0], module_handles.size() * sizeof(HMODULE), &cbNeeded);
    module_handles.resize(cbNeeded/sizeof(HMODULE));
    EnumProcessModules(process, &module_handles[0], module_handles.size() * sizeof(HMODULE), &cbNeeded);

    std::transform(module_handles.begin(), module_handles.end(), std::back_inserter(modules), get_mod_info(process));
    return modules[0].base_address;
} 
```

# java - 在 Android 中，如何在一个选项卡中显示文本视图，但在其他选项卡中不显示？

> ID：15372963
> 
> 赞同：0
> 
> 时间：2013-03-12T21:54:29.010
> 
> 标签：java, android, tabs

我希望能够显示一个按钮，然后单击该按钮以使键入的字符串出现在列表视图中。我已经完成了，但我不希望它适用于每个选项卡。我只希望它在某个选项卡中显示发送按钮和文本框。我做了一些研究，发现我可能必须为每个选项卡创建一个不同的片段类，但我不知道我应该怎么做。

Java 代码

```
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ListView list = (ListView)findViewById(R.id.messageList);
    adapter = new MyAdapter(this);
    list.setAdapter(adapter);
    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding
    // tab. We can also use ActionBar.Tab#select() to do this if we have
    // a reference to the Tab.
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
        }
    });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by
        // the adapter. Also specify this Activity object, which implements
        // the TabListener interface, as the callback (listener) for when
        // this tab is selected.
        actionBar.addTab(
                actionBar.newTab()
                        .setText(mSectionsPagerAdapter.getPageTitle(i))
                        .setTabListener(this));
    }
}

private void newGame() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Developed by");
    builder.setMessage("Shirwa Mohamed @Team_Shirwa");
    builder.setPositiveButton( "ok", null);
    builder.create().show();

}

@Override
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in
    // the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        Locale l = Locale.getDefault();
        switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase(l);
            case 1:
                return getString(R.string.title_section2).toUpperCase(l);
            case 2:
                return getString(R.string.title_section3).toUpperCase(l);
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply
 * displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_main_dummy, container, false);
        TextView dummyTextView = (TextView) rootView.findViewById(R.id.section_label);
        dummyTextView.setText(Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER)));
        return rootView;
    }
}

} 
```

活动 XML：

```
 <TabHost
        android1:id="@android:id/tabhost"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent"
        android1:layout_alignParentLeft="true"
        android1:layout_alignParentTop="true" >

        <LinearLayout
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:orientation="vertical" >

            <TabWidget
                android1:id="@android:id/tabs"
                android1:layout_width="match_parent"
                android1:layout_height="wrap_content" >
            </TabWidget>

            <FrameLayout
                android1:id="@android:id/tabcontent"
                android1:layout_width="match_parent"
                android1:layout_height="match_parent" >

                <LinearLayout
                    android1:id="@+id/tab1"
                    android1:layout_width="match_parent"
                    android1:layout_height="match_parent" >
                </LinearLayout>

                <LinearLayout
                    android1:id="@+id/tab2"
                    android1:layout_width="match_parent"
                    android1:layout_height="match_parent"
                     >

                </LinearLayout>

                <LinearLayout
                    android1:id="@+id/tab3"
                    android1:layout_width="match_parent"
                    android1:layout_height="match_parent" >
                </LinearLayout>
            </FrameLayout>
        </LinearLayout>
    </TabHost>

</RelativeLayout> 
```

片段类？

```
 <TextView
        android:id="@+id/section_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:59:32.730

没错，您需要为每个选项卡创建一个片段。查看此链接[http://developer.android.com/guide/topics/ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)它将帮助您了解它的工作原理以及如何实现它。

# objective-c - 在属性上设置属性会调用第一个属性的设置器吗？

> ID：15372968
> 
> 赞同：0
> 
> 时间：2013-03-12T21:54:35.420
> 
> 标签：objective-c, accessor, declared-property

如果一个类有一个属性的自定义设置器：

```
@interface OuterClass : NSObject
@property InnerClass *obj;
-(void)setObj:(InnerClass *)obj; 
```

并且`InnerClass`本身有一个属性：

```
@property NSString *text; 
```

然后我会这样做：`obj.text = @"Hello";`这会激活`OuterClass`对象的`setObj:`方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T22:03:26.987

不，`setObj:`不会被调用，因为您没有设置属性。您正在*获取*该属性，然后设置结果的属性之一。这相当于`[[something obj] setText:@"Hello"]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:55:27.137

抱歉，我误解了您原始问题的上下文。

调用`someObject.obj.text = @"Hello"`不会调用`-setObj`外部类。

@properties 生成简单的 setter 和 getter，并且不观察对 ivars 成员所做的更改。

但是它会调用`-obj`.`someObject`

像这样想。给定`someObject.obj.text =`，该`someObject.obj`部分使用 getter`someObject`来返回`obj`。然后该`obj.text =`部分发送`-setText`到`obj`getter 的结果。

**编辑前：**

是的，@property 会自动为 ivar 生成 setter 和 getter。

设置`obj.text = @"hello"`调用`-setText`: 方法。

并访问该属性`x = obj.text`调用该`-text`方法。

确保您是否覆盖了方法与属性完全匹配的 setter 或 getter。

# stored-procedures - 将变量从 SQL Server 2008 R2 传递到批处理文件

> ID：15372969
> 
> 赞同：0
> 
> 时间：2013-03-12T21:54:38.663
> 
> 标签：stored-procedures, batch-file, sql-server-2008-r2

我在 SQL Server 中有一个存储过程，它需要一些数据并且必须将其发送到批处理文件，它将像变量一样将这些数据发送到 jar 文件。BAT 和 JAR 都可以。但我的问题是让存储过程成为可能......这是我正在使用的代码，但出于某种原因，它告诉我“系统找不到指定的路径”。

```
 ALTER PROCEDURE [dbo].[_testeCarimbadorPDF](
        @Path VARCHAR(1000),
        @numCarimb int 
     )
   AS

   BEGIN
   DECLARE @CMDSQL VARCHAR(1000)
   DECLARE @NUMERO VARCHAR(10)
   SELECT @NUMERO = CONVERT(varchar(10),@numCarimb)

   SET @CMDSQL = 'C:\TESTE\CarimbadorPDF.bat' + ' ' + @Path + ' ' + @NUMERO
   exec master..xp_cmdshell @CMDSQL
   waitfor delay '00:00:02'
   end 
```

哪一个是我的错误？我需要将这些变量发送到批处理文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:58:45.227

您提供的路径是 SQL Server 相关路径，而不是您的本地路径。在`exec master..xp_cmdshell @CMDSQL`sql server 机器上执行命令，而不是在本地机器上。只有当您的 SQL 服务器在您的本地计算机上运行时，它才能工作。

# python - 在 django cms 中以多种语言提供页面的最佳方法

> ID：15372971
> 
> 赞同：2
> 
> 时间：2013-03-12T21:54:49.023
> 
> 标签：python, django, content-management-system, django-cms

在 Django 中使页面以多种语言可用的最佳方法是什么？我已按照文档使用并使用`LANGUAGES`，但看不到翻译页面。

我被困住了。我应该自己管理`/en`, `/de`, etc 网址吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:56:37.480

使用 Django Internationalization ，首先在 django 项目中创建一个“locale”文件夹，然后在 settings.py 中包含文件夹路径。例如-LOCALE_PATHS="projectpath/locale"

将此添加到您的中间件 - 'django.middleware.locale.LocaleMiddleware'，在 settings.py 中并在 settings.py 中设置 USE_I18N = True

之后在 settings.py 中包含这个“django.core.context_processors.i18n”，在模板上下文处理器中

对于 html 文件 - ：首先你必须包含 Internationalization 的模板标签，然后你可以在 html 文件的所有静态元素中使用模板标签 例如 - {% load i18n %} 把它放在你的 html 文件的顶部并试试这个

*{% trans "put your static text here" %}*该页面中的任何静态文本

如果是 Django 中的模板变量，您可以使用它 - {% blocktrans %}这是您翻译的 {{ object }}{% endblocktrans %}

现在对于 django 视图，您必须遵循以下步骤：

从 django.utils.translation 导入 ugettext 作为 _

> def view(request): output = _("这是翻译文本") return HttpResponse(output)

# workflow-foundation-4 - 有没有办法在 WF4 中将 SqlTrackingService 添加到 WorkflowApplication？

> ID：15372972
> 
> 赞同：3
> 
> 时间：2013-03-12T21:54:53.627
> 
> 标签：workflow-foundation-4

我一直在寻找一种将 SqlTrackingService 添加到 WF4 中的 WorkflowApplication 的方法，类似于在 WF3 中可以完成的方式，如下所示：

```
WorkflowRuntime wr = new WorkflowRuntime();
SqlTrackingService ts = new SqlTrackingService("Initial Catalog=Tracking;Data 
Source=localhost;Integrated Security=SSPI;");
ts.UseDefaultProfile = true;
wr.AddService(ts);
wr.StartRuntime(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:47:16.960

WF4 有[TrackingParticipant](http://msdn.microsoft.com/en-us/library/ee513993%28v=vs.100%29.aspx)的概念。您可以*将*跟踪参与者附加到您的工作流执行中，它将接收其事件。

您可以实现 SQLTrackingParticipant。检查这些[WF 示例](http://www.microsoft.com/en-us/download/details.aspx?id=21459)，您可以在*\WF\Basic\Tracking\SqlTracking*文件夹中找到自定义 SQLTrackingParticipant 的示例。

# c - C while循环未执行

> ID：15372978
> 
> 赞同：0
> 
> 时间：2013-03-12T21:55:21.617
> 
> 标签：c, loops, while-loop

我正在学习 c，但我无法弄清楚这段代码的问题：

```
#include <stdio.h>

int main(){
int i = 0;
while(i > 10){
    printf("hello");
    i++;
}
getch();
return 0;
} 
```

我没有收到任何错误，并尝试在代码块和 wxdev c++ 上运行它。那么我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:57:07.907

你设置

```
i = 0; 
```

然后测试

```
i > 10 
```

这总是错误的。

你可能想要

```
while (i < 10) 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:56:28.350

i不大于10所以不符合进入while循环的要求

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T21:56:32.593

```
while(i > 10){ 
```

...但是`i`是 0 所以它是错误的并且会跳过。

您可能打算改写；

```
while(i < 10) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T21:56:47.420

原因：`i`不大于10。

# c++ - 获取二叉搜索树中的节点数

> ID：15372979
> 
> 赞同：1
> 
> 时间：2013-03-12T21:55:24.093
> 
> 标签：c++, tree, nodes

所以我正在研究一种获取二叉搜索树中节点数的方法，当我有 3 个节点时，它给了我 3，但是如果我做 5，它给了我 4，我需要改变什么？

```
int BinaryTree::size(int count, Node *leaf) const
{
    if(leaf != NULL)//if we are not at a leaf
    {
        size(count + 1, leaf->getLeft());//recurisvly call the function and increment the count
        size(count + 1, leaf->getRight());
    }
    else
    {
        return count;//return the count
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T22:00:28.180

```
int BinaryTree::size(Node *leaf) const 
{
    if(leaf == NULL) { //This node doesn't exist. Therefore there are no nodes in this 'subtree'
        return 0;
    } else { //Add the size of the left and right trees, then add 1 (which is the current node)
        return size(leaf->getLeft()) + size(leaf->getRight()) + 1;
    }
} 
```

虽然这是一种不同的方法，但我发现它比你所拥有的更容易阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T22:14:39.597

其他人已经提出了正确的算法。我只是要解释为什么你的算法不起作用。

您的算法背后的逻辑似乎是：保持运行计数值。如果叶子为空，则它没有子节点，因此返回计数，如果叶子不为空，则向下递归子节点。

虽然这是倒退。因为您将需要通过引用而不是值来传递您的 int，如果它为空则不递增，如果它不为空则递增，然后递归。

因此，您最初的想法可以进行一些修改，但 Nick Mitchinson 和箭头有更好的方法。这是您的算法已修复，因此可以正常工作：

```
int BinaryTree::size(Node *leaf, int& count=0) const
{
    if(leaf != NULL)//if we are not at a leaf
    {
        count++;
        size(leaf->getLeft(), count);//recurisvly call the function and increment the count
        size(leaf->getRight(), count);
    }

    return count;//return the count
} 
```

但同样，有更好的方法来写这个。其他答案显示了它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T22:02:55.063

```
int BinaryTree::size(Node *n) const
{
    if(!n) 
        return 0;
    else
        return size(n->getLeft()) + 1 + size(n->getRight()); 
} 
```

# c++ - C++ 中的内存错误 - free() 下一个大小无效（正常）

> ID：15372991
> 
> 赞同：0
> 
> 时间：2013-03-12T21:55:57.870
> 
> 标签：c++, free, dynamic-memory-allocation

有我的 Integrator_Cauchy 课程：

```
template <typename T_out,typename T_contour ,typename T_in> class C_Integrator_Cauchy: public C_Integrator{
protected:      
T_out (C_Integrator_Cauchy::*Integrator_ref)(T_contour * Contour,T_in * Point);

C_Integrator_Cauchy(int _NumPoints, double _LimDown, double _LimUp, int _NumAps, Integrator_ID id):C_Integrator(_NumPoints, _LimDown, _LimUp, _NumAps, id){}

public:
static C_Integrator_Cauchy * createIntegrator(int _NumPoints, double _LimDown, double _LimUp, int _NumAps, Integrator_ID id ){
    C_Integrator_Cauchy * p = 0; 
    switch (id)
    {
        case qcauchyleg_lin_ID:
            p = new C_Integrator_Cauchy(_NumPoints, _LimDown, _LimUp, _NumAps, id); 
            p->Integrator_ref=&C_Integrator_Cauchy::qcauchyleg_lin;
            p->setNodes(id);
            break;       
        default:
        cout << "Integrator_ID Error" << endl;
            assert( false);
    }
    return p;
}

T_out getResult(T_contour * Contour,T_in * Point){
    return (this->*Integrator_ref)(Contour,Point);
}

T_out qcauchyleg_lin(T_contour * Contour,T_in * Point)
{
    T_out result(NumAps);
    T_out F(NumAps),resF(NumAps),sumF(NumAps);
    T_in N,temp,sumN,resN;
    T_in z_i,dz_i,coordin;
    for (int i = 0; i < NumAps ; i++){sumF[i] = T_in(0.0,0.0);}
    sumN = T_in(0.0,0.0);

    for (int j=1;j<=NumPoints;j++) 
    {
        temp = w[j];
        z_i=(*Contour)[0][j-1];
        dz_i=(*Contour)[1][j-1];
        coordin=(*Point);
        for (int i = 0; i < NumAps ; i++){F[i]=conj(z_i-coordin)/norm(z_i-coordin)*dz_i*(*Contour)[i+2][j-1];}
        N=conj(z_i-coordin)/norm(z_i-coordin)*dz_i;
        for (int i = 0; i < NumAps ; i++){sumF[i] += temp*F[i];}
        sumN += temp*N;
    }   
    for (int i = 0; i < NumAps ; i++){  result[i]=(sumF[i]/sumN); }
    return result;
} }; 
```

还有最简单的 main.cpp

```
typedef complex<double> dcx;

typedef vector<vector<vector<double> > > dArray3D; 
typedef vector<vector<double> > dArray2D; 
typedef vector<double> dArray1D; 

typedef vector<vector<vector<dcx> > > dcxArray3D;
typedef vector<vector<dcx> > dcxArray2D;
typedef vector<dcx> dcxArray1D;

int main(int __argc,char *__argv[]){
    C_Integrator_Cauchy<dcxArray1D,dcxArray2D,dcx> * integ_cauchy=C_Integrator_Cauchy<dcxArray1D,dcxArray2D,dcx>::createIntegrator(2000, 0.0, 6.2831, 1, qcauchyleg_lin_ID);

    cout << "Start allocate something" << endl;
    dcxArray2D temp;
    temp.resize(1,dcxArray1D());
    for (int i = 0; i < 8000; i++){
        temp[0].push_back(1.0);
        cout << i << endl;
    }
    cin.get();

 return 0;
} 
```

问题是 - 在 main.cpp 中创建 Integrator_Cauchy 后，不可能分配大向量（比如 i > 4000）。它抛出：

```
*** glibc detected *** ./main_test: free(): invalid next size (normal): 0x0a01acc8 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x75ee2)[0xb74f3ee2]
/usr/lib/i386-linux-gnu/libstdc++.so.6(_ZdlPv+0x1f)[0xb76d6adf]
./main_test[0x804eb95]
./main_test[0x804d337]
./main_test[0x804d4ee]
./main_test[0x804c278]
./main_test[0x8051e4a]
./main_test[0x80515e0]
./main_test[0x804ffe7]
./main_test[0x804e710]
./main_test[0x804cf27]
./main_test[0x80498d3]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb74974d3]
./main_test[0x8049141] 
```

尽管我在 RAM 中有足够多的内存空间，而且 Integrator_Cauchy 本身并不占用大量内存。

我正在 Ubuntu 12.10 上编译；g++ 4.7.2；

有任何想法吗？

# sitecore - Sitecore 查询语言：更新 + 位置

> ID：15372993
> 
> 赞同：0
> 
> 时间：2013-03-12T21:56:04.780
> 
> 标签：sitecore, query-analyzer, sitecore-workflow

我正在尝试通过 Sitecore Rocks 查询分析器使用 Sitecore 查询语言将一堆项目更新到新的工作流，同时保持当前状态。我目前有这个：

```
update set @#__Workflow state# = "--GUID of the workflow state--" from //*[@@id='--GUID of the parent Item--']/* 
```

这行得通。我想要做的是包含一个*where*语句，这样我就可以在切换工作流的同时保持草稿/等待批准/批准状态。

```
update set @#__Workflow state# = "--GUID of the DRAFT workflow state--" from //*[@@id='--GUID of the parent Item--']/* where @#__Workflow state# = "--GUID of the original DRAFT workflow state--";
update set @#__Workflow state# = "--GUID of the APPROVED workflow state--" from //*[@@id='--GUID of the parent Item--']/* where @#__Workflow state# = "--GUID of the original APPROVED workflow state--"; 
```

然而这不起作用。我的*where*子句是否存在语法问题，或者不能在 Sitecore 查询语言中将*where*与*update结合使用。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:39:37.680

“Where 子句”在查询语言中不起作用。

您应该使用 /*[@fieldName = "value"] 来选择项目，如下所示：

```
update set @#__Workflow state# = "--GUID of the DRAFT workflow state--" from //*[@@id='--GUID of the parent Item--']/*[@#__Workflow state# = "--GUID of the original DRAFT workflow state--"];

update set @#__Workflow state# = "--GUID of the APPROVED workflow state--" from //*[@@id='--GUID of the parent Item--']/*[@#__Workflow state# = "--GUID of the original APPROVED workflow state--"]; 
```

# c++ - 虚拟功能不工作

> ID：15372995
> 
> 赞同：2
> 
> 时间：2013-03-12T21:56:09.600
> 
> 标签：c++, virtual-functions

第一类是：

```
class SistemPornire{
protected:
    Motor &_motor;
    Electromotor &_electromotor;

public:
    SistemPornire(Motor&,Electromotor&);
    virtual void pornire_motor();
    void opreste_motor();
}; 
```

虚函数的实现是：

```
SistemPornire::SistemPornire(Motor &motor, Electromotor &electromotor)
    :_motor(motor), _electromotor(electromotor)
{
}

void SistemPornire::pornire_motor()
{
     std::cout << "Sistemul de pornire a trimis comanda porneste_motor electromotorului." << std::endl;
    this->_electromotor.start(_motor);
} 
```

第二类：

```
class SistemPornireCuPreincalzire:public SistemPornire {
public:
    SistemPornireCuPreincalzire(Motor&,Electromotor&);
    void pornire_motor();
}; 
```

它的实现：

```
SistemPornireCuPreincalzire::SistemPornireCuPreincalzire(Motor&motor, Electromotor&electromotor)
    : SistemPornire(motor, electromotor)
{

}

void SistemPornireCuPreincalzire::pornire_motor()
{
    std::cout << "A inceput preincalzirea" <<std::endl<< "Preincalzirea incheiata" << std::endl;

    std::cout << "Sistemul de pornire a trimis comanda porneste_motor electromotorului." << std::endl;
    this->_electromotor.start(_motor);
} 
```

在主函数中，我试图为`pornire_motor()`类型对象调用函数，`SistemPornireCuPreincalzire`但它会从函数中打印出消息`SistemPornire::pornire_motor()`。

你能告诉我我做错了什么吗？我提供的信息是否足够？

```
class Autoturism {

private:
    Electromotor electromotor;
    Motor motor;
    SistemPornire sistem_pornire;
    SistemDirectie sistem_directie;
    CutieViteze cutieviteze;

public:
    Autoturism(SistemPornire&, Electromotor&, Motor&, SistemDirectie&);
    void porneste_autoturism();
    void condu_la_destinatie();
    void parcheaza_autoturism();
};

Autoturism::Autoturism(SistemPornire &sp, Electromotor&e, Motor&m, SistemDirectie&sd): sistem_pornire(sp), electromotor(e), motor(m), sistem_directie(sd)
{

}

void Autoturism::porneste_autoturism()
{
    std::cout <<  "Comanda porneste_autoturism a fost trimisa catre sistemul de pornire." << std::endl;
    this->sistem_pornire.pornire_motor();
}

void Autoturism::condu_la_destinatie()
{
    this->porneste_autoturism();
    std::cout << "Odata ce masina a pornit, soferul o poate conduce la destinatie." << std::endl;

    this->cutieviteze.gearUp();
    this->sistem_directie.stanga(0);
    this->cutieviteze.gearUp();
    this->cutieviteze.gearUp();
    this->cutieviteze.gearDown();
    this->sistem_directie.stanga(90);
    this->cutieviteze.gearUp();
    this->sistem_directie.stanga(0);
    this->cutieviteze.gearDown();
    this->sistem_directie.dreapta(30);
    this->sistem_directie.dreapta(0);
    this->sistem_directie.dreapta(10);

    std::cout << "Odata ce s-a ajuns la destinatie masina e gata de a fi parcata." << std::endl;
    this->parcheaza_autoturism();
    std::cout << "Soferul a ajuns la destinatie." << std::endl;
}

void Autoturism::parcheaza_autoturism()
{
    std::cout <<  "Comanda parcheaza_autoturism a fost trimisa catre sistemul de pornire." << std::endl;
    this->sistem_pornire.opreste_motor();
} 
```

主功能：

```
int main()
{
    Motor motor;
    Electromotor electromotor;
    SistemPornire sistempornire(motor, electromotor);
    SistemDirectie sistemdirectie;
    SistemPornireCuPreincalzire sistempornireINC(motor, electromotor);

    Autoturism masina(sistempornireINC, electromotor, motor,sistemdirectie);

    std::cout << "Porneste autoturism:" << std::endl;
    masina.porneste_autoturism();

    std::cout << "Parcheaza autoturism:" << std::endl;
    masina.parcheaza_autoturism();

    std::cout << "Condu la destinatie:" << std::endl;
    masina.condu_la_destinatie();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T22:30:48.150

让我们看一下代码的某些部分并分析发生了什么。这是您的代码`main`：

```
Motor motor;
Electromotor electromotor;
SistemPornire sistempornire(motor, electromotor);
SistemDirectie sistemdirectie;
SistemPornireCuPreincalzire sistempornireINC(motor, electromotor); 
```

请注意如何创建一个`SistemPornireCuPreincalzire`here 的实例，然后将其传递给 的构造函数`Autoturism`：

```
Autoturism masina(sistempornireINC, electromotor, motor,sistemdirectie); 
```

让我们看一下 的构造函数，`Autoturism`好吗？

```
Autoturism(SistemPornire&, Electromotor&, Motor&, SistemDirectie&); 
```

嗯，它需要对 a 的*引用*，`SistemPornire`而我们正在传递对 的引用`SistemPornireCuPreincalzire`。这不一定是错误，但足以让您思考。那么让我们看看`Autoturism`构造函数做了什么：

```
Autoturism::Autoturism(SistemPornire &sp, Electromotor&e, 
                       Motor&m, SistemDirectie&sd)
    : sistem_pornire(sp), electromotor(e), motor(m), sistem_directie(sd)
{

} 
```

嗯……是什么类型的`sistem_pornire`？查看代码，我们看到它被声明为：

```
SistemPornire sistem_pornire; 
```

仅仅看到这一点就足以解释*为什么*虚函数不起作用。的类型`sistem_pornire`在编译时是已知的，并且没有虚拟调度。*请记住，只有当您通过指针*调用虚函数时才会发生虚函数（即*必须*使用`->`运算符）。

但是，让我们再深入一点……

所以构造函数获取一个`SistemPornire`实例的引用，并用它来初始化`sistem_pornire`成员的实例`Autoturism`。换句话说，您使用您在中声明的部分复制构造`sistem_pornire`对象。`SistemPornire``SistemPornireCuPreincalzire``main`

from 的对象`main`永远不会被调用，也永远不会被使用。

您应该仔细阅读有关[切片问题](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)和C++ 中的[虚函数调度的信息。](http://www.parashift.com/c++-faq/virtual-functions.html)

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T22:02:31.817

*编辑*

正如@Roddy 指出的那样，在更新的问题中，切片发生在`Autoturism`构造函数中。

您通过将派生对象分配给基础对象来对对象进行切片。

```
SistemPornireCuPreincalzire derived = SistemPornireCuPreincalzire();

SistemPornire base = derived; // sliced 
```

您需要通过引用来引用派生类：

```
SistemPornireCuPreincalzire derived = SistemPornireCuPreincalzire();

SistemPornire& base = derived; // no slicing 
```

看：

*   [C++ 中的切片问题是什么？](https://stackoverflow.com/q/274626/1084416).
*   [为什么 C++ 中需要“对象切片”？为什么允许？更多错误？](https://stackoverflow.com/q/7516545/1084416).