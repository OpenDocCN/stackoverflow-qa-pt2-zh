# StackOverflow 问答 12758000-12758999

# winapi - Windows 事件日志：事件模板 - 输出类型：win:Xml

> ID：12758000
> 
> 赞同：1
> 
> 时间：2012-10-06T08:09:12.790
> 
> 标签：winapi

我正在为支持 Vista 及更高版本的应用程序制作 Windows 事件日志。我为每个事件创建了一个清单，但是我遇到了 win:Xml 的输出类型的问题。以下是我为事件模板中的数据指定的内容。

```
<data name="StackTrace" inType="win:UnicodeString" outType="win:Xml">
</data> 
```

我想将 StackTrace 设置为在事件日志中显示为 XML 格式。StackTrace 必须使用格式正确的 XML 输入。但是，我仍然看到它在事件日志查看器中显示为 string(xs:string)。

你知道我做错了什么吗？我怎样才能正确地做到这一点？

下面如果更新我的代码：

```
const int NUM_OF_DATADESC = 6;
EVENT_DATA_DESCRIPTOR eventDataDesc[NUM_OF_DATADESC];
evDesc.Level = uLevel;
evDesc.Channel = nChannel;
evDesc.Keyword |= uKeyword;
for (int i = 0; i < NUM_OF_DATADESC; i++)
{
if (strings[i] != NULL)
    EventDataDescCreate(&eventDataDesc[i], strings[i],    ((ULONG)wcslen(strings[i])+1)*sizeof(WCHAR));
else
    EventDataDescCreate(&eventDataDesc[i], L"", sizeof(WCHAR));
}
BOOL s = WriteEvent(evDesc,NUM_OF_DATADESC,&eventDataDesc[0]);

BOOL WriteEvent(EVENT_DESCRIPTOR eventID,DWORD userDataCount,PEVENT_DATA_DESCRIPTOR     userData)
{
REGHANDLE hPub = NULL;
ULONG res = EventRegister(&MYCOMPANE_MYAPP_MYCOMPONENT, NULL, NULL, &hPub);    
if (ERROR_SUCCESS != res){
    return FALSE;
}

res = EventWrite(hPub, &eventID, userDataCount, userData);
if (ERROR_SUCCESS != res){
 return FALSE;
}
EventUnregister(hPub);

return TRUE;
} 
```

代码工作正常，但只有输出类型 = win:Xml 的问题。

# java - 任何关于 Android 优化的文档 - JAVAC vs JIT vs Dalvik

> ID：12758006
> 
> 赞同：1
> 
> 时间：2012-10-06T08:10:19.897
> 
> 标签：java, android, dalvik

我第一次不得不认真考虑如何优化 Android 应用程序。

我已经搜索过，但是我搜索的越多，我就越困惑。有谁知道好的文档来描述每个 Java 和 JVM 组件如何优化 WRT JAVAC 字节码和 Dalvik 字节码？大部分是由 Dalvik 完成的，因此对我来说是“黑盒”吗？值得一看吗？

一些琐碎的例子。

```
SharedPreferences settings = getSharedPreferences(MY_PREFERENCES, MODE_PRIVATE);
SharedPreferences.Editor prefEditor = settings.edit();
prefeditor.putString("FOO", "BAR"); 
prefEditor.commit(); 
```

对比

```
getSharedPreferences(MY_PREFERENCES, MODE_PRIVATE).settings.edit().putString("FOO","BAR").commit(); 
```

或者

```
int a, b, c;

a = 2;
b = 3;

c = sum(a,b);

int sum(int x, int y){return x + y;} 
```

对比

```
c = a + b; 
```

我问的原因是了解可读性、可维护性和性能之间的权衡。我知道标准答案是“衡量它”，但我正试图超越这一点，提前思考我可以在哪里获得性能，而不是不得不回到复杂的代码中并根据指标进行重构。无论如何，我当然会测量和描述，但我的问题是关于理解。

我很开放，可以接受“甚至不要去那里，写，测量和被诅咒”！

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:28:48.470

对于 android 应用程序，您的代码经过 2 次编译/优化。第一个由 javac 执行，当您将 java 代码编译为 java 字节码时。当您将 java 字节码转换为 dalvik 字节码时，第二个由 dx 执行。

我不熟悉任何描述两者执行的优化的文档。但两者都是开源的（通过 openjdk，用于 javac），所以理论上您可以检查两者以了解它们所做的优化。

但是，您的示例实际上与编译器级别的优化无关。我不认为知道例如 dx 如何优化分配寄存器将帮助您了解如何编写高性能的 java 代码。

对于您提到的两组示例，我建议在两组示例上尝试 2 件事。

* * *

**1、拆机**

第一件事是反汇编 dalvik 字节码，并查看任何差异。简单地计算指令不一定能告诉你任何事情，但在某些情况下，很明显一个比另一个快。

例如，在您的第一组示例中，两个片段的字节码几乎相同，只是第二个片段包含附加指令。因此，第一个代码段显然性能更高，尽管这将是一个非常小的性能差异。

```
invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences$Editor;->putString(Ljava/lang/String;Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;
invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->commit()Z 
```

对比

```
invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences$Editor;->putString(Ljava/lang/String;Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;
move-result-object v0
invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->commit()Z 
```

如果您仔细查看两个 java 代码片段，那么这个额外的指令是有意义的。首先，putString 的返回值被忽略，commit 调用的值与调用 putString 的值相同。在第二个片段中，对 putString() 返回的值调用 clone()，这需要在 dalvik 字节码中进行额外操作以保存返回值。即，您在那里看到的额外移动结果对象指令。

作为程序员，我们知道 putString 方法的返回值是被调用的同一个对象。但是，编译器无法知道或假设这一点。

* * *

**2\. 测量**

正如您所提到的，您可以做的第二件事是实际分析它们并衡量性能。一段时间后，您应该开始了解可以采取哪些措施来提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:21:44.580

您的程序中是否有任何需要优化的特定瓶颈？如果没有，那就什么都不做。

# dropbox - 使用 REST API 的 Dropbox 差异/增量上传

> ID：12758013
> 
> 赞同：16
> 
> 时间：2012-10-06T08:11:29.497
> 
> 标签：dropbox, dropbox-api

我们知道 Dropbox 桌面客户端使用二进制差异算法将所有文件分解成块，并且只上传它在云中还没有的块 ( [https://serverfault.com/questions/52861/how-does- dropbox-version-upload-large-files](https://serverfault.com/questions/52861/how-does-dropbox-version-upload-large-files)）。

尽管如此，据我所知，Dropbox API 只能在需要同步时上传整个文件（ [/files_put](https://www.dropbox.com/developers/reference/api#files_put)，[/files (POST) ）。](https://www.dropbox.com/developers/reference/api#files-POST)

有没有办法使用 Dropbox API 进行差分/增量同步，即像桌面客户端一样只上传文件的更改部分？

如果这是不可能的，那么使用 Dropbox API 定期同步具有小更改的大文件的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T12:22:50.130

不幸的是，这是不可能的，我怀疑它可能永远不可用。

在做了一些研究之后，我发现了一个将 delta-syncing 集成到 API[*] 中的功能请求。Dropbox 没有回应，社区也没有支持这个请求。

我会做出一个有根据的猜测，Dropbox 之所以没有提供这个功能，而且很可能永远不会提供，是因为这在未知的开发人员手中是一个危险的功能。

考虑您编写的应用程序使用这种增量更改更新系统来更新大文件的情况。您彻底测试您的应用程序并将其发布到应用程序商店。在您首次发布和大量下载后几周，您开始收到差评和投诉，因为您设法错过了一个非常具体的测试用例。

在这个特定的、有问题的情况下，您错误地计算了 1 个字节的差分偏移量。不好了！您现在已经损坏了数百个用户的数千个文件！

考虑到这种可能性，我想我个人会要求 Dropbox 永远不要提供这样的开发功能。如果他们将这样的功能集成到 API 中，他们将打破他们的第一个目的——为您的重要文件提供一致、安全和可靠的云备份。

[*]：这是原来的参考位置，但现在是死链接。

（[https://www.dropbox.com/votebox/1515/delta-sync-api-for-mobile-applications](https://www.dropbox.com/votebox/1515/delta-sync-api-for-mobile-applications)）

# jquery - 无法扩展移动站点

> ID：12758014
> 
> 赞同：1
> 
> 时间：2012-10-06T08:11:31.660
> 
> 标签：jquery, mobile

这是我在此的头一篇博文。我有一个网站，可以在[www.justg.co.uk/stephSite](http://www.justg.co.uk/stephSite)找到， 它只是不适用于移动设备。由于某些未知原因，具有固定宽度和 0px 自动边距的容器 div 向左对齐，而不是页面中心。任何人都可以帮我解决这个问题。

提前致谢

G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:25:36.550

您的导航/标题上没有固定宽度，请尝试修复它

还可以查看媒体查询以检测显示宽度

看起来您使用的是 css 网格，为什么是固定宽度，您也应该对其应用网格类

# c# - 如何使用 C# 在计算器中创建类似的按钮动画

> ID：12758015
> 
> 赞同：1
> 
> 时间：2012-10-06T08:11:32.883
> 
> 标签：c#, winforms, animation

当您将鼠标悬停在按钮上时，有人可以帮助创建像 Win7 Calculator 中的 winform 动画，目前我使用一堆图像然后在 backgroundworker 中循环它，但我认为它错了，这是我的代码：

当鼠标进入时会发生这种情况，

```
private void bgTurnOn_DoWork(object sender, DoWorkEventArgs e)
{
    Label labelSender = (Label)e.Argument;
    int ii = labelSender.ImageIndex;
    for (int i = ii + 4; i <= 11; i++)
    {
        if (labelSender.AllowDrop)
        {
            labelSender.ImageIndex = i;
            Thread.Sleep(40);
        }
    }
} 
```

当鼠标离开时

```
private void bgTurnOff_DoWork(object sender, DoWorkEventArgs e)
{
    Label labelSender = (Label)e.Argument;
    int ii = labelSender.ImageIndex;
    for (int i = ii; i >= 0; i--)
    {
        if (!labelSender.AllowDrop)
        {
            labelSender.ImageIndex = i;
            Thread.Sleep(80);
        }
    }
} 
```

注意：我只是使用 AllowDrop，所以我不想声明新变量，我有 42 个按钮，所以我认为我需要更有效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:54:00.260

看来你想要一个发光效果，所以你可以使用下一个想法：

*   制作一个`OpacityPictureBox : PictureBox`支持不透明度的（在 1-100 或双 0-1 级别）。有关更多信息，请参阅[此](http://www.codeproject.com/Articles/26878/Making-Transparent-Controls-No-Flickering)。
*   `MaxOpacity`将和的两个 public const int 值添加`MinOpacity`到`OpacityPictureBox`类中，以便从外部轻松安全地检查范围。这些值可能是 0、100 或 0、1 或其他值，具体取决于您对不透明度的实现。
*   制作一个`AnimatedPictureBox : UserControl`包含 1 个`PictureBox`named`pbNormal`和 1 个`OpacityPictureBox`named`opbHover`的东西`Dock = DockStyle.Fill`，以及一个名为 的计时器`timer`。确保`pbNormal`在下面`opbHover`。
*   拥有三个公共属性：
    *   `Normal``Image`委托给的类型`pbNormal.Image`
    *   `Hover``Image`委托给的类型`opbHover.Image`
    *   `AnimationInterval`类型`int`的代入`timer.Interval`
*   在 的构造函数中`AnimatedPictureBox`，调用后`InitializeComponents`，做`opbHover.Opacity = 0;`. `this.Cursor = Cursors.Hand;`如果您希望光标在悬停在它上面时变成一只手，您也可以这样做。
*   有一个私有成员：`_animationDirection`类型`int`为 -1 或 1。
*   有一个在给定方向启动动画的私有方法：

代码：

```
private void Animate(int animationDirection)
{
    this._animationDirection = animationDirection;
    this.timer.Start();
} 
```

*   覆盖`OnMouseEnter`和`OnMouseLeave`：

代码：

```
 protected override void OnMouseEnter(EventArgs e)
 {
     this.Animate(1);
     base.OnMouseEnter(e);
 }

 protected override void OnMouseLeave(EventArgs e)
 {
     this.Animate(-1);
     base.OnMouseEnter(e);
 } 
```

*   听`timer.Tick`事件和这个：

代码：

```
private void timer_Tick(object sender, EventArgs e)
{
    var hoverOpacity = this.opbHover.Opacity + this._animationDirection;

    if (hoverOpacity < OpacityPictureBox.MinOpacity ||
        hoverOpacity > OpacityPictureBox.MaxOpacity)
    {
        this.timer.Stop();
        return;
    }

    this.opbHover.Opacity = hoverOpacity;
} 
```

# c# - 在 c# .Net Windows App 中备份 Microsoft Access 数据库

> ID：12758020
> 
> 赞同：2
> 
> 时间：2012-10-06T08:13:21.340
> 
> 标签：c#, sql, database, ms-access, oledb

我正在开发一个 c# .NET 应用程序。

我正在使用 Microsoft Access(OLEDB) 的数据库。

我想不时（以编程方式）备份数据库。

（或者我可以在 sqlserver2008 r2 中创建 .bak 文件）

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T08:18:28.333

Access 数据库通常是一个文件。
要进行编程备份，您只需使用

```
File.Copy(sourceDbName, destDbName, true); 
```

当然，您可以添加一个简单的例程，将输入数据库压缩并存储在备份目录中，可选择传递密码，如下所示：

```
using Ionic.Zip;
......

private void BackupToZip(string sourceDBName, string destZipFile, string password)
{
    using (ZipFile zip = new ZipFile(destZipFile))
    {
        if (bkpPass.Length > 0) zip.Password = password;
        ZipEntry e = zip.UpdateFile(sourceDbName, string.Empty);
        e.Comment = "Working copy stored in date: " + DateTime.Today.ToShortDateString();
        zip.Comment = "This zip archive has been created by ......";
        zip.Save();
    }
} 
```

此代码片段需要[DotNetZip 库](http://dotnetzip.codeplex.com/)

# javascript - 防止页面在焦点切换时滚动

> ID：12758021
> 
> 赞同：21
> 
> 时间：2012-10-06T08:13:49.513
> 
> 标签：javascript, html, cordova, jquery-mobile, webview

我是移动网络/开发的新手。我的应用程序正在使用 jquery-mobile、phonegap 和 Compass (scss)。

我的登录页面有问题：

徽标和字段包含在标准的“div”容器中（data-role="content" data-type="vertical"）。背景是彩色的。

当焦点从登录字段切换到密码字段时，页面向上滑动，这是我不希望发生的。我希望我的徽标和字段保持不变，就像 Skype iOS 应用程序登录页面一样。

这是发生的事情：

![错误描述](../Images/54a6b8faf02ca9f0443bfba33f2ed489.png)

我尝试了几种技巧，试图阻止滚动事件，或强制页面滚动到 0,0，但没有成功。

我现在正在考虑一种新策略，可能对徽标和字段使用顶部相对定位，并在键盘向上滑动时捕获焦点事件以自己滚动页面（通过动画顶部相对定位坐标）。

虽然这似乎可行，但我想知道这是否是 Skype iOS 应用程序团队使用的那种工作......

欢迎任何有关此特定案例中使用的技术的建议！

干杯，

弗雷德

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2018-06-08T21:44:05.110

我认为您想直接将焦点放在元素上并使用“preventScroll”选项。

`el.focus({preventScroll: true});`

```
$('#el').focus((e) => {
  e.preventDefault();
  e.target.focus({preventScroll: true});
}) 
```

[https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T17:07:41.923

我还没有对此进行测试，但是 e.preventDefault() 是否停止了这个问题？通常，您使用 e.preventDefault() 来停止默认滚动/拖动行为。

```
$(document).bind('focus', function(e){
  e.preventDefault();
}); 
```

或更好

```
$(element).bind('focus', function(e){
  e.preventDefault();
}); 
```

或者

```
$(document).bind('touchstart', function(e){
  e.preventDefault();
}); 
```

输入字段会更好吗？

```
$(":input").live({
  focus: function(e) {
    e.preventDefault();
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T15:59:42.180

我最终没有成功地找到任何编码解决方案来处理我的问题，但我注意到一个整脊定位让我在字段之间切换时可以固定屏幕。

整个登录屏幕的可用空间不得超过键盘可见后的可用空间，即 200 像素。此外，为防止在切换字段时滚动，最后输入字段中心位置不得超过 100 像素。使用 CSS 可以在 padding 和 margin 上播放以获得所需的结果。

通过删除键盘“字段导航栏”应该可以获得额外的垂直空间，但我也不知道该怎么做：/

![在此处输入图像描述](../Images/313bae57cb046fba608248487fd981d1.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-02T15:12:41.750

我有一个类似的问题（页面在点击/焦点上滚动），我花了一段时间才找到解决方案，所以我在这里记录它。

我有一个自定义表单字段，单击该字段会将页面滚动到顶部。结果是输入被隐藏了`position: absolute; top: -99999999px;`（因为如果你正确隐藏它，那么焦点事件就不起作用）。这将隐藏的输入放置在页面顶部。然后当我们点击标签并且输入被聚焦时，页面被滚动到顶部。

我正在寻找诸如“在焦点/点击时滚动到顶部”之类的东西，但我找不到任何像样的东西。解决方案是`right: -99999999px`改用。我避免使用典型的`left: -9999999px`，因为显然这会在使用时影响网站`direction: rtl;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-13T09:20:22.277

`preventScroll`focus()有一个选项：
`el.focus({preventScroll: true});`

如果您必须支持不支持焦点选项的浏览器（ **IE11、Safari<14 ？），请使用以下****polyfill**：

```
!function(){

    let supported = false;
    document.createElement('i').focus({
        get preventScroll() {
            supported = true;
        },
    });
    if (!supported) {
        let original = HTMLElement.prototype.focus;
        Element.prototype.focus = HTMLElement.prototype.focus = function(options){
            if (options.preventScroll) {
                const map = new Map();
                let p = this;
                while (p = p.parentNode) map.set(p, [p.scrollLeft, p.scrollTop]);
                original.apply(this, arguments);
                map.forEach(function(pos, el){
                    // todo: test: only if changed? does it trigger scroll?
                    // IE flickers
                    el.scrollLeft = pos[0]
                    el.scrollTop  = pos[1]
                });
            } else {
                original.apply(this, arguments);
            }
        }
    }

}(); 
```

# actionscript-3 - 如何在 flashdevelop 中使用 Always Compile

> ID：12758022
> 
> 赞同：0
> 
> 时间：2012-10-06T08:14:01.123
> 
> 标签：actionscript-3, debugging, flashdevelop

这个选项在哪里？如何将 Main.as 设置为始终编译？断点和逐步功能对我不起作用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:05:23.513

打开“项目”面板（如果隐藏，请查看“查看”菜单），选择所需的主类，然后：

*   **FD3**：右键单击>始终编译
*   **FD4**：右键单击>设置文档类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:02:43.653

在“项目属性”中，您有选项卡：“编译器选项”，首先将文本放入“链接报告”选项并编译，它将生成带有已编译类的 XML，然后在文件中写入额外的类并将文件放入“加载外部”中。现在编译器将包含 XML 中的所有类。

# java - 在java swing中输入文本字段后自动选项卡？

> ID：12758025
> 
> 赞同：2
> 
> 时间：2012-10-06T08:14:30.480
> 
> 标签：java, swing, jtextfield

我尝试了一些东西，但没有得到结果

```
private void txtNameKeyPressed(java.awt.event.KeyEvent evt) {                                   
    String value = txtName.getText();
    digitcheck = value;
    if ((evt.getKeyCode() >= KeyEvent.VK_1 && evt.getKeyCode() <= KeyEvent.VK_2)) 
        {
            txtName.setEditable(true);

            //If the Digit in JTextField exceeds two digits JTextField is deactivated
            if(maxDigit(1))
            {
                try {
                    txtName.setEditable(true);
                    txtAdd.setEnabled(true);
                    Robot robot = new Robot();
                    robot.keyRelease(KeyEvent.VK_TAB);
                } catch (AWTException ex) {
                    Logger.getLogger(Demo.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
            else
            {
                txtAdd.setEnabled(false);
            }
        }
        else 
        {
            txtAdd.setEnabled(false);

        }  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:52:39.103

我的第一个是“为什么”，我的第二个是“为什么不使用复选框？”

但我的任务是做而不是质疑：P

第一的。我不会使用`KeyListener`. 这不是过滤文本组件的合适方法，您最好使用 a `DocumentFilter`，这样您可以自动限制添加到文本字段的字符的数量和类型。

其次，我可能不会`Robot`在这种情况下使用，但这只是我。

我可能只会使用内置[`transferFocus`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#transferFocus%28%29)方法。它更简单，并考虑了密钥传输 API ...

```
((AbstractDocument)field1.getDocument()).setDocumentFilter(new DocumentFilter() {

    @Override
    public void insertString(FilterBypass fb, int offset, String string, AttributeSet attr) throws BadLocationException {
        super.insertString(fb, offset, string, attr);
    }

    @Override
    public void remove(FilterBypass fb, int offset, int length) throws BadLocationException {
        super.remove(fb, offset, length);
    }

    @Override
    public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {
        if (text.startsWith("1") || text.startsWith("2")) {

            field1.transferFocus();

        }
        super.replace(fb, offset, length, text, attrs);
    }

}); 
```

在[这里](http://www.jroller.com/dpmihai/entry/documentfilter)查看一些优秀的例子`DocumentFilter`

# java - file.getTotalSpace() 返回两倍的实际值

> ID：12758026
> 
> 赞同：1
> 
> 时间：2012-10-06T08:14:34.567
> 
> 标签：java, android, file

所以我有一个植根的 android 4.0.3 设备。每当我将某些东西安装到实际上是内部的“sd 卡”时，它也会创建这个 /mnt/secure/asec 分区。以下是 df 的部分输出。

```
 /mnt/sdcard              1G    65M     1G   4096
    /mnt/secure/asec         1G    65M     1G   4096 
```

现在，如果我尝试执行以下代码。

```
 File f = new File("/mnt/sdcard");
    long div = (1024*1024);
    long d = f.getTotalSpace()/div;
            Log.i("Capacity",String.valueOf(d)); 
```

它显示给我的值是 2Gb。这里发生了什么？为什么 android 4.0.3 会为这些安装在“sd 卡”上的 apk 创建一个安全挂载点？这不是 JellyBean 独有的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:36:35.983

> 这里发生了什么？

尝试使用[`StatFs`](http://developer.android.com/reference/android/os/StatFs.html)代替，`getTotalSpace()`看看你是否能得到更好的结果。

> 为什么 android 4.0.3 会为这些安装在“sd 卡”上的 apk 创建一个安全挂载点？

因为自从 API 级别 8 中引入该功能以来，这一直是 Android 中安装到 SD 的一部分。

# uiimage - 图像裁剪 AVCaptureSession 图像

> ID：12758028
> 
> 赞同：1
> 
> 时间：2012-10-06T08:14:43.413
> 
> 标签：uiimage, crop, avcapturesession

所以我一整天都没有运气，不用说非常令人沮丧，我查找了许多示例和可下载的类别，它们都吹捧能够完美地裁剪图像。他们这样做了，但是当我尝试从通过 AVCaptureSession 生成的图像中执行此操作时，它就无法正常工作。我咨询了这两个来源

[http://codefuel.wordpress.com/2011/04/22/image-cropping-from-a-uiscrollview/](http://codefuel.wordpress.com/2011/04/22/image-cropping-from-a-uiscrollview/)

[http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)

并且第一个链接中的项目似乎可以直接像宣传的那样工作，但是一旦我破解它以在 av 捕获图像上做同样的魔法......不......

有人对此有见识吗？这里也是我的代码供参考。

```
- (IBAction)TakePhotoPressed:(id)sender 
{
     AVCaptureConnection *videoConnection = nil;
     for (AVCaptureConnection *connection in stillImageOutput.connections)
     {
     for (AVCaptureInputPort *port in [connection inputPorts])
     {
     if ([[port mediaType] isEqual:AVMediaTypeVideo] )
     {
     videoConnection = connection;
     break;
     }
     }
     if (videoConnection) { break; }
     }

     //NSLog(@"about to request a capture from: %@", stillImageOutput);
     [stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
     {
         CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
         if (exifAttachments)
         {
             // Do something with the attachments.
             //NSLog(@"attachements: %@", exifAttachments);
         }
         else

         NSLog(@"no attachments");

         NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
         UIImage *image = [[UIImage alloc] initWithData:imageData];

         NSLog(@"%f",image.size.width);
         NSLog(@"%f",image.size.height);

         float scale = 1.0f/_scrollView.zoomScale;

         CGRect visibleRect;
         visibleRect.origin.x = _scrollView.contentOffset.x * scale;
         visibleRect.origin.y = _scrollView.contentOffset.x * scale;
         visibleRect.size.width = _scrollView.bounds.size.width * scale;
         visibleRect.size.height = _scrollView.bounds.size.height * scale;

         UIImage* cropped = [self cropImage:image withRect:visibleRect];

         [croppedImage setImage:cropped];         

         [image release];
     }
      ];

    [croppedImage setHidden:NO];

} 
```

上面使用的cropImage 函数。

```
-(UIImage*)cropImage :(UIImage*)originalImage withRect :(CGRect) rect
{

    CGRect transformedRect=rect;
    if(originalImage.imageOrientation==UIImageOrientationRight) 
    {
        transformedRect.origin.x = rect.origin.y;
        transformedRect.origin.y = originalImage.size.width-(rect.origin.x+rect.size.width);
        transformedRect.size.width = rect.size.height;
        transformedRect.size.height = rect.size.width;
    }

    CGImageRef cr = CGImageCreateWithImageInRect(originalImage.CGImage, transformedRect);
    UIImage* cropped = [UIImage imageWithCGImage:cr scale:originalImage.scale orientation:originalImage.imageOrientation];
    [croppedImage setFrame:CGRectMake(croppedImage.frame.origin.x, 
                                      croppedImage.frame.origin.y, 
                                      cropped.size.width, 
                                      cropped.size.height)];

    CGImageRelease(cr);
    return cropped;
} 
```

我也很想冗长，并为任何可能帮助我解决困境的人提供尽可能多的信息，以发布我的 scrollView 和 avcapture 会话的初始化。然而，这可能有点太多了，所以如果你想看到它就问吧。

现在至于代码实际执行的结果？...

我拍照前的样子

![拍摄前](../Images/9579d23b0af919a0e5d64b91451345ec.png)

之后...

![射击后](../Images/314447cb213c27a01b58c8c774c64ddb.png)

**编辑：**

好吧，我现在有一些意见，没有评论，所以要么没有人想通，要么他们认为我会再次想通它是如此简单......无论如何，我没有取得任何进展。因此，对于任何对此感兴趣的人来说，这里有一个小示例应用程序，所有代码都已设置好，您可以看到我在做什么

[https://docs.google.com/open?id=0Bxr4V3a9QFM_NnoxMkhzZTVNVEE](https://docs.google.com/open?id=0Bxr4V3a9QFM_NnoxMkhzZTVNVEE)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:36:21.437

似乎这个小难题不仅让我在将近一周后难住了，而且几乎没有几个看过我问题的人也没有任何建议。我必须说，对于这个特殊的问题，我无法让它以这种方式工作，我思考、修补和沉思了一段时间，但无济于事。直到我这样做

```
[self HideElements];

UIGraphicsBeginImageContext(chosenPhotoView.frame.size);
[chosenPhotoView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[self ShowElements]; 
```

就是这样，更少的代码，它几乎可以立即工作。因此，我当时没有尝试通过滚动视图裁剪图像，而是截取屏幕截图，然后使用滚动视图框架变量裁剪图像。隐藏/显示元素功能隐藏了我想要的图片上的任何重叠元素。

# iphone - 停止视频后如何关闭 MPMoviePlayerController

> ID：12758037
> 
> 赞同：1
> 
> 时间：2012-10-06T08:16:28.920
> 
> 标签：iphone, objective-c, nstimer, nsurl, mpmoviewcontroller

我在 30 秒内成功停止了视频。但我无法关闭 `MP MovieViewController`，我想停止缓冲活动。我用过这段代码......

视频播放代码：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Pungi" ofType:@"mp4"]];

self.movie = [[MPMoviePlayerController alloc] initWithContentURL:url];
self.movie .controlStyle = MPMovieControlStyleEmbedded;
[  self.movie  play];
[self.view addSubview:self.movie.view];
[self.movie setFullscreen:YES animated:YES];
self.movie.initialPlaybackTime = 0.5;
[NSTimer scheduledTimerWithTimeInterval:15.0
                                 target:self
                               selector:@selector(stopVideo)
                               userInfo:nil
                                repeats:NO]; 
```

停止视频：

```
[self.movie stop];
[self.movie.view removeFromSuperview];
[self.movie release]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T11:48:03.443

把你`MPMoviePlayerController`放在一个单独的类中并加载它：

MoviePlayerViewController.h

```
#import <MediaPlayer/MediaPlayer.h> 

@interface MoviePlayerViewController : UIViewController

@end 
```

MoviePlayerViewController.m

```
#import "MoviePlayerViewController.h"

MPMoviePlayerViewController *movieController;

@interface MoviePlayerViewController ()

@end

@implementation MoviePlayerViewController

- (void)willEnterFullscreen:(NSNotification*)notification {
    NSLog(@"willEnterFullscreen");
}

- (void)enteredFullscreen:(NSNotification*)notification {
    NSLog(@"enteredFullscreen");
}

- (void)willExitFullscreen:(NSNotification*)notification {
    NSLog(@"willExitFullscreen");
}

- (void)exitedFullscreen:(NSNotification*)notification {
    NSLog(@"exitedFullscreen");

    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (void)playbackFinished:(NSNotification*)notification {
    NSNumber* reason = [[notification userInfo] objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];
    switch ([reason intValue]) {
        case MPMovieFinishReasonPlaybackEnded:
            [self dismissModalViewControllerAnimated:YES];
            break;
        case MPMovieFinishReasonPlaybackError:
            break;
        case MPMovieFinishReasonUserExited:
            [self dismissModalViewControllerAnimated:YES];
            break;
        default:
            break;
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willEnterFullscreen:) name:MPMoviePlayerWillEnterFullscreenNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willExitFullscreen:) name:MPMoviePlayerWillExitFullscreenNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(enteredFullscreen:) name:MPMoviePlayerDidEnterFullscreenNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(exitedFullscreen:) name:MPMoviePlayerDidExitFullscreenNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playbackFinished:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil];

    NSString *videoName = @"Videoname";

    NSString *filepath   =   [[NSBundle mainBundle] pathForResource:videoName @"movietype"];
    NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
    movieController = [[MPMoviePlayerViewController alloc] initWithContentURL:fileURL];

    [movieController.view setFrame:CGRectMake(0, -20, 320, 480)];
    [self.view addSubview:movieController.view];

    [movieController.moviePlayer play];

} 
```

视图控制器.m

```
 MoviePlayerViewController *player = [[MoviePlayerViewController alloc] initWithNibName:nil bundle:nil];
 [self presentModalViewController:player animated:YES]; 
```

它能做什么：

`MoviePlayerViewController`是一个自定义类，它加载`MPMoviePlayerController`一个视频。在`viewDidLoad`方法中（或任何你想要的地方）你加载`MoviePlayerViewController`. ( `[self presentModalViewController:animated]`).... 这样做的好处是，您的主类不会因moviecrap/定义而重载，并且您可以`MoviePlayerViewController`在完成时轻松关闭它，使用通知来检查它是否已停止。如果它已停止：

```
[self dismissModalViewControllerAnimated:YES]; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T09:12:56.867

如下面的代码所示，您应该在实际停止之前暂停并将 initialPlaybackTime 设置为 -1。这是 MPMoviePlayerController 提供的棘手的事情之一。

```
 [_moviePlayerController pause];

    if ([_moviePlayerController isKindOfClass:[MPMoviePlayerController class]]) {
        ((MPMoviePlayerController*)_moviePlayerController).initialPlaybackTime = -1;
    }

    [_moviePlayerController stop];
    if ([_moviePlayerController isKindOfClass:[MPMoviePlayerController class]]) {
        ((MPMoviePlayerController*)_moviePlayerController).initialPlaybackTime = -1;
    }
    [_moviePlayerController.view removeFromSuperview]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-16T06:56:46.503

您需要在 viewDidLoad 中添加通知观察者：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerPlaybackDidFinishNotification:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil]; 
```

然后添加方法：

```
 - (void)moviePlayerPlaybackDidFinishNotification:(NSNotification*)notification 
 {
    [self dismissMoviePlayerViewControllerAnimated];
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T08:27:10.230

尝试这个.......

```
self.movie.initialPlaybackTime = -1; 
[self.movie stop]; 
[self.movie release]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T08:28:00.573

在您的标头中导入一些标头：

```
 #import <MediaPlayer/MediaPlayer.h>
 #import <MediaPlayer/MPMoviePlayerViewController.h> 
```

您可能还需要平衡您的“presentMoviePlayer”呼叫与某处的解雇：

```
[self dismissMoviePlayerViewControllerAnimated]; 
```

如果您提前完成了资源，您可以通过使用 NotificationManager 来监视 MPMoviePlayerPlaybackDidFinishNotification 来更快地释放它。

并且

```
- (void)dealloc {
   [movie release], 
   movie = nil;
   [super dealloc];
} 
```

# c# - 带有单选按钮的 C# 选项卡顺序

> ID：12758038
> 
> 赞同：2
> 
> 时间：2012-10-06T08:16:42.817
> 
> 标签：c#, tab-ordering

所以我有一个 Windows 窗体应用程序，有一个文本框告诉你要选择什么杂货。您可以从中选择 3 个单选按钮答案和一个提交该答案的按钮。我想要的是能够使用 tab 浏览这些单选按钮。我已经尝试过标签顺序的事情，但它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:41:59.220

Windws Forms 只允许您通过 Tab 进入组。解决它的一种方法是通过在每个按钮周围放置组框来将所有按钮放在单独的组中。

尽管这允许您在它们之间切换，但它们现在是脱节的并且不会自动取消选择。为此，请注册在选择时触发的事件并以编程方式取消选择其他事件。

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

        private List<RadioButton> allMyButtons;

        public Form1()
        {
            InitializeComponent();
            allMyButtons = new List<RadioButton>
            {
                radioButton1,
                radioButton2
            };
        }

        private void radioButton_CheckedChanged(object sender, EventArgs e)
        {
            RadioButton sendingRadio = (sender as RadioButton);
            if(sendingRadio == null) return;
            if(sendingRadio.Checked == true){
                foreach(var rb in (from b in allMyButtons where b != sendingRadio select b))
                {
                    rb.Checked = false;
                }
            }
        }

    }
} 
```

我测试了这种方法，它似乎可以完成这项工作。

表单不是现代的做事方式。考虑为新项目迁移到 WPF。

# java - 从 internet2 解析 xml 数据

> ID：12758039
> 
> 赞同：0
> 
> 时间：2012-10-06T08:16:52.523
> 
> 标签：java, android, xml-parsing

大家好，我开发了一个简单的应用程序，该应用程序使用 SAX 从 Internet 读取 XML 文件，但我在 logcat 上收到此错误任何帮助可能会有所帮助

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.reaf.xml"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET" />
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/AppTheme" >
<activity
    android:name="com.read.xml.DataHandler"
    android:label="@string/title_activity_main" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity android:name=".MainActivity" >
</activity>
</application>
</manifest> 
```

日志猫

```
 10-06 08:29:52.204: D/AndroidRuntime(614): Shutting down VM
      10-06 08:29:52.204: W/dalvikvm(614): threadid=1: thread exiting with uncaught  exception (group=0x40015560)
      10-06 08:29:52.254: E/AndroidRuntime(614): FATAL EXCEPTION: main
      10-06 08:29:52.254: E/AndroidRuntime(614): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.read.xml/com.read.xml.DataHandler}:  java.lang.ClassCastException: com.read.xml.DataHandler
     10-06 08:29:52.254: E/AndroidRuntime(614):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
      10-06 08:29:52.254: E/AndroidRuntime(614):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
       10-06 08:29:52.254: E/AndroidRuntime(614):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
     10-06 08:29:52.254: E/AndroidRuntime(614):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
       10-06 08:29:52.254: E/AndroidRuntime(614):   at android.os.Handler.dispatchMessage(Handler.java:99)
      10-06 08:29:52.254: E/AndroidRuntime(614):    at android.os.Looper.loop(Looper.java:123)
     10-06 08:29:52.254: E/AndroidRuntime(614):     at android.app.ActivityThread.main(ActivityThread.java:3683)
    10-06 08:29:52.254: E/AndroidRuntime(614):  at java.lang.reflect.Method.invokeNative(Native Method)
    10-06 08:29:52.254: E/AndroidRuntime(614):  at java.lang.reflect.Method.invoke(Method.java:507)
   10-06 08:29:52.254: E/AndroidRuntime(614):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    10-06 08:29:52.254: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
```

10-06 08:29:52.254: E/AndroidRuntime(614): at dalvik.system.NativeStart.main(Native Method) 10-06 08:29:52.254: E/AndroidRuntime(614): Caused by: java.lang .ClassCastException: com.read.xml.DataHandler 10-06 08:29:52.254: E/AndroidRuntime(614): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 10-06 08:29:52.254: E/AndroidRuntime(614): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561) 10-06 08:29:52.254: E/AndroidRuntime(614): ... 11 更多 10-06 08:29: 54.514：I/Process(614)：发送信号。PID：614 SIG：9

这是 Datahandler 类

```
 package com.read.xml;

  import java.io.BufferedReader;
  import java.io.IOException;
   import java.io.InputStreamReader;
    import java.net.URL;
    import java.net.URLConnection;
     import java.util.ArrayList;

  import javax.xml.parsers.SAXParser;
   import javax.xml.parsers.SAXParserFactory;

   import org.xml.sax.Attributes;
   import org.xml.sax.InputSource;
   import org.xml.sax.SAXException;
  import org.xml.sax.XMLReader;
  import org.xml.sax.helpers.DefaultHandler;

  import android.content.Context;
  import android.graphics.Color;
 import android.util.Log;
 import android.widget.TextView;

   public class DataHandler extends DefaultHandler {

//list for imported product data
private ArrayList<TextView> theViews;
//string to track each entry
private String currBrand = "";
//flag to keep track of XML processing
private boolean isProduct = false;
//context for user interface
private Context theContext;
//constructor
public DataHandler(Context cont) {
    super();
    theViews = new ArrayList<TextView>();
    theContext = cont;
 }
//start of the XML document
public void startDocument ()
{ Log.i("DataHandler", "Start of XML document"); }

//end of the XML document
public void endDocument ()
{ Log.i("DataHandler", "End of XML document"); }

//opening element tag
public void startElement (String uri, String name, String qName, Attributes atts)
{
    //find out if the element is a brand
    if(qName.equals("brand"))
    {
        //set product tag to false
        isProduct = false;
        //create View item for brand display
        TextView brandView = new TextView(theContext);
        brandView.setTextColor(Color.rgb(73, 136, 83));
        //add the attribute value to the displayed text
        String viewText = "Items from " + atts.getValue("name") + ":";
        brandView.setText(viewText);
        //add the new view to the list
        theViews.add(brandView);
    }
    //the element is a product
    else if(qName.equals("product"))
        isProduct = true;
}

//closing element tag
public void endElement (String uri, String name, String qName)
{
    if(qName.equals("brand"))
    {
        //create a View item for the products
        TextView productView = new TextView(theContext);
        productView.setTextColor(Color.rgb(192, 199, 95));
        //display the compiled items
        productView.setText(currBrand);
        //add to the list
        theViews.add(productView);
        //reset the variable for future items
        currBrand = "";
    }
}

//element content
public void characters (char ch[], int start, int length)
{
    //string to store the character content
    String currText = "";
    //loop through the character array
    for (int i=start; i<start+length; i++)
    {
        switch (ch[i]) {
        case '\\':
            break;
        case '"':
            break;
        case '\n':
            break;
        case '\r':
            break;
        case '\t':
            break;
        default:
            currText += ch[i];
            break;
        }
    }
    //prepare for the next item
    if(isProduct && currText.length()>0)
        currBrand += currText+"\n";
}

public ArrayList<TextView> getData()
{
    //take care of SAX, input and parsing errors
    try
    {
            //set the parsing driver
        System.setProperty("org.xml.sax.driver","org.xmlpull.v1.sax2.Driver");
            //create a parser
        SAXParserFactory parseFactory = SAXParserFactory.newInstance();
        SAXParser xmlParser = parseFactory.newSAXParser();
            //get an XML reader
        XMLReader xmlIn = xmlParser.getXMLReader();
            //instruct the app to use this object as the handler
        xmlIn.setContentHandler(this);
            //provide the name and location of the XML file
        URL xmlURL = new URL("www.data-online.bugs3.com/public_html/test.xml");
            //open the connection and get an input stream
        URLConnection xmlConn = xmlURL.openConnection();
        InputStreamReader xmlStream = new    
           InputStreamReader(xmlConn.getInputStream());
            //build a buffered reader
        BufferedReader xmlBuff = new BufferedReader(xmlStream);
            //parse the data
        xmlIn.parse(new InputSource(xmlBuff));
    }
    catch(SAXException se) { Log.e("AndroidTestsActivity", 
            "SAX Error " + se.getMessage()); }
    catch(IOException ie) { Log.e("AndroidTestsActivity", 
            "Input Error " + ie.getMessage()); }
    catch(Exception oe) { Log.e("AndroidTestsActivity", 
            "Unspecified Error " + oe.getMessage()); }
        //return the parsed product list
    return theViews;
}

 } 
```

我不知道错误是什么

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:23:19.340

你在哪里调用 DataHandler.getData？如果这是在活动构造函数中或在创建调用中，这将导致 NetworkOnMainThreadException。

如果是这种情况，请查看 AsyncTask：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

您需要在 doInBackground 中调用 getData。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T08:26:41.400

你没有一个 nullary 构造函数 Jiji。您应该有一个空的构造函数，以便使用我在上一个问题本身中提到的 newInstance 方法。就像是

```
public DataHandler() {
} 
```

# c# - 托管类型 C++

> ID：12758051
> 
> 赞同：3
> 
> 时间：2012-10-06T08:19:09.293
> 
> 标签：c#, c++, .net, c++-cli

> **可能重复：**
> [非托管类型和托管类型有什么区别？](https://stackoverflow.com/questions/9941320/whats-the-difference-between-a-non-unmanaged-type-and-a-managed-type)

我最近在使用 C++ 开发一个应用程序，遇到了一些叫做托管类型、本机类型、封送处理等的东西。我不太清楚这些术语的含义。从我一直在阅读的内容来看，似乎我们已经在 c++ 中托管类型以允许访问某些 .Net 功能（.Net 本机类型），并且我们使用编组将托管类型转换为本机类型（反之亦然）。我对么？谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:07:07.010

托管 C++ 曾经是/现在是 Microsoft 的创作。使用托管 C++ 框架开发的应用程序在虚拟机环境中的运行方式与 .NET 应用程序相同。这提供了更多的运行时检查、内存分配等便利。此外，VM 提供垃圾收集，就像 .NET 为 C# 提供的一样。托管框架的限制是 VM 不支持多重继承（C# 不支持多重继承）。因此，托管 C++ 开发受到限制。编组也称为序列化，其中对象被转换为其他“简单”类型，以便通过 RPC 传输到其他进程或机器。

# java - Android 应用程序单击按钮调用不正确的 OnClick 侦听器

> ID：12758052
> 
> 赞同：4
> 
> 时间：2012-10-06T08:19:29.887
> 
> 标签：java, android

我昨天将我的应用程序上传到了 Google Play，今天早上我只想进行布局调整，因为一些文本在较小的屏幕上与按钮重叠，基本上我只想将按钮移到屏幕下方。我认为这就像使用 eclipse 的图形编辑器一样简单……不。

我不知道为什么，但是我对“view_fact”布局上按钮位置所做的小编辑已将按钮注册到错误的 OnClick 侦听器中，视图上只有两个按钮，它们正在使用 eachothers 事件侦听器我不知道为什么。我没有触及在旧布局上完美运行的事件侦听器代码。

**这是我的`view_fact`布局：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/viewFactTitleText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="18dp"
    android:text="@string/factTitleText"
    android:textSize="22dp"
    tools:context=".MainActivity" />

<ImageView
    android:id="@+id/randomFactImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/viewFactTitleText"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="18dp"
    android:contentDescription="Fact Image"
    android:src="@drawable/canadaflag" />

<TextView
    android:id="@+id/factData"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/randomFactImage"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="14dp"
    android:text="TextView" />

<Button
    android:id="@+id/anotherFactButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/backToHomeButton"
    android:layout_alignLeft="@+id/backToHomeButton"
    android:layout_alignRight="@+id/backToHomeButton"
    android:text="@string/anotherFactButtonText" />

<Button
    android:id="@+id/backToHomeButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/factData"
    android:layout_alignParentBottom="true"
    android:layout_alignRight="@+id/factData"
    android:text="@string/backToHomeButtonText" />

</RelativeLayout> 
```

**监听器和启动代码：**

```
public class MainActivity extends Activity {
/* Declaration of global variables */
private boolean debugMode = true; // Whether debugging is enabled or not 

private static String logtag = "CanadianFacts"; // For use as the tag when logging 
private TextView factData;
private int totalFacts = 72;
private String[][] facts = new String[totalFacts][5];
private int lastFact = 0;

/* Buttons */
/* Home page */
private Button randomFactButton;

/* View Fact page */
private Button anotherRandomFactButton;
private Button backToHomeButton;

/* About page */
private Button backToHomeFromAboutButton;

/* Image Views */
private ImageView randomFactImage;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    /* Home Page Objects */
    randomFactButton = (Button)findViewById(R.id.randomFactButton);
    randomFactButton.setOnClickListener(randomFactListener); // Register the onClick listener with the implementation above

    /* View Fact Page Objects */

    /* Build Up Fact Array */
    buildFactArray();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_about:
            loadAboutPage(); // Call the loadAboutPage method
            return true;
     }

    return false;
}

public void loadAboutPage() {
    setContentView(R.layout.about);

    /* Set up home page button listener */
    backToHomeFromAboutButton = (Button)findViewById(R.id.backToHomeFromAboutButton); 
    backToHomeFromAboutButton.setOnClickListener(backToHomeListener); // We can reuse the backToHomeListener

}

/* Home Page Listeners */
//Create an anonymous implementation of OnClickListener, this needs to be done for each button, a new listener is created with an onClick method
private OnClickListener randomFactListener = new OnClickListener() {
    public void onClick(View v) {
        if (debugMode) {
            Log.d(logtag,"onClick() called - randomFact button");              
            Toast.makeText(MainActivity.this, "The random fact button was clicked.", Toast.LENGTH_LONG).show();
        }

      setContentView(R.layout.view_fact); // Load the view fact page

      /* We're now on the View Fact page, so elements on the page are now in our scope, instantiate them */

      /* Another Random Fact Button */
      anotherRandomFactButton = (Button)findViewById(R.id.anotherFactButton);
      anotherRandomFactButton.setOnClickListener(anotherRandomFactListener); // Register the onClick listener with the implementation above

      /* Back to Home Button */
      backToHomeButton = (Button)findViewById(R.id.backToHomeButton);
      backToHomeButton.setOnClickListener(backToHomeListener); // Register the onClick listener with the implementation above

      // Get a random fact
      String[] fact = getRandomFact();

      if (fact[2] == null) { // If this fact doesn't have an image associated with it
          fact[2] = getRandomImage();
      }

      int imageID = getDrawable(MainActivity.this, fact[2]);

      /* See if this fact has an image available, if it doesn't select a random generic image */
      randomFactImage = (ImageView) findViewById(R.id.randomFactImage);
      randomFactImage.setImageResource(imageID);

      factData = (TextView) findViewById(R.id.factData);
      factData.setText(fact[1]);

        if (debugMode) {
            Log.d(logtag,"onClick() ended - randomFact button");
        }
      }
};

/* View Fact Page Listeners */
private OnClickListener anotherRandomFactListener = new OnClickListener() {
    public void onClick(View v) {
        if (debugMode) {
            Log.d(logtag,"onClick() called - anotherRandomFact button");              
            Toast.makeText(MainActivity.this, "The another random fact button was clicked.", Toast.LENGTH_LONG).show();
        }

          // Get a random fact
          String[] fact = getRandomFact();

          if (fact[2] == null) { // If this fact doesn't have an image associated with it
              fact[2] = getRandomImage();
          }

          int imageID = getDrawable(MainActivity.this, fact[2]); // Get the ID of the image

          /* See if this fact has an image available, if it doesn't select a random generic image */
          randomFactImage = (ImageView) findViewById(R.id.randomFactImage);
          randomFactImage.setImageResource(imageID);

          factData = (TextView) findViewById(R.id.factData);
          factData.setText(fact[1]);

          if (debugMode) {
              Log.d(logtag,"onClick() ended - anotherRandomFact button");
          }
    }
};

private OnClickListener backToHomeListener = new OnClickListener() {
    public void onClick(View v) {
        if (debugMode) {
            Log.d(logtag,"onClick() called - backToHome button");              
            Toast.makeText(MainActivity.this, "The back to home button was clicked.", Toast.LENGTH_LONG).show();
        }

          // Set content view back to the home page
          setContentView(R.layout.main); // Load the home page

          /* Reinstantiate home page buttons and listeners */
          randomFactButton = (Button)findViewById(R.id.randomFactButton);
          randomFactButton.setOnClickListener(randomFactListener); // Register the onClick listener with the implementation above

          if (debugMode) {
              Log.d(logtag,"onClick() ended - backToHome button");
          }
    }
}; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:14:06.797

我已经设法解决了这个问题，方法是移动按钮，更改 ID 几次，然后将它们改回来。并删除所有对齐设置并重置其位置。

一个很奇怪的问题，可能是由于eclipse的图形编辑器。

# php - 教义 2 + 西里尔文

> ID：12758056
> 
> 赞同：0
> 
> 时间：2012-10-06T08:20:19.587
> 
> 标签：php, doctrine, doctrine-orm

我正在尝试使用 Doctrine2 ORM 从数据库中读取 utf8（西里尔文）数据，但它总是返回不可读的符号。

我在 utf8-general-ci 中的数据库、表格和文本字段。连接如下所示：

```
$em = EntityManager::create(array(
  'driver' => 'pdo_mysql',
  'unix_socket' => '/var/lib/mysql/mysql.sock',
  'charset' => 'utf8',
  'host' => DB_HOST,
  'user' => DB_USER,
  'password' => DB_PASS,
  'dbname' => DB_NAME
  ), $config); 
```

但仍然没有成功。我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:40:34.720

这是我找到的解决方案，它有效：

```
$em = EntityManager::create(array(
  'driver' => 'pdo_mysql',
  'unix_socket' => '/var/lib/mysql/mysql.sock',
  'charset' => 'utf8',
  'host' => DB_HOST,
  'user' => DB_USER,
  'password' => DB_PASS,
  'dbname' => DB_NAME
  ), $config);
$em->getEventManager()->addEventSubscriber(new MysqlSessionInit('utf8', 'utf8_unicode_ci')); 
```

# c# - 如何知道 Action 是否是匿名方法？

> ID：12758066
> 
> 赞同：7
> 
> 时间：2012-10-06T08:21:55.770
> 
> 标签：c#, delegates, anonymous-methods

这是 C# 4.0。

我有一个类将 s 存储在这样`WeakReference`的一些`Action`s 上：

```
public class LoremIpsum
{
    private Dictionary<Type, List<WeakReference>> references = new Dictionary<Type, List<WeakReference>>();

    public void KeepReference<T>(Action<T> action)
    {
        if (this.references.ContainsKey(typeof(T)))
        {
            this.references[typeof(T)].Add(new WeakReference(action));
        }
        else
        {
            this.references.Add(typeof(T), new List<WeakReference> { new WeakReference(action) });
        }
    }
} 
```

这个类有另一个方法允许执行`Action`稍后传递给它的 s ，但它在这个问题中并不重要。

我以这种方式消费这个类：

```
public class Foobar
{
    public Bar Bar { get; set; }

    public void Foo(LoremIpsum ipsum)
    {
        ipsum.KeepReference<Bar>((b) => { this.Bar = b; });
        ipsum.KeepReference<Bar>(this.Whatever);
    }

    public void Whatever(Bar bar)
    {
        // Do anything, for example...:
        this.Bar = bar
    }
} 
```

`Bar`在我的申请中是第三类。

**我的问题：**

在`KeepReference`方法中，如何知道`Action`传入的参数是指匿名方法（`this.Bar = b;`）还是*具体*方法（`this.Whatever`）？

我检查了`action`. `action`我在(like `IsAbstract`)上找不到任何属性`IsAnonymous`。底层类型是`MethodInfo`有意义的，因为编译后我可以在 ildasm 中看到匿名方法“成为” `Foobar`. 在 ildasm 中，我还可以看到匿名方法不是一个完整的粉红色方块，而是一个被粉红色包围的白色方块，并且在其定义中调用了一些 CompilerServices 类，但我不知道如何在 C# 中利用这一点。我相信有可能了解`action`. 我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T17:41:38.483

为了对这个问题有一个“接受”的答案，我按照 Michael Kjörling 在他对我的问题的第一条评论中给出的链接进行了操作。

```
if (action.Target.GetType().GetMethods().Where(method => method.GetCustomAttributes(typeof(CompilerGeneratedAttribute), false).Any()).Contains(action.Method))
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T09:09:28.480

编译器生成的方法的名称总是带有尖括号，如下所示

```
Void <Main>b__0() 
```

那么为什么不直接获取名称并查看它是否包含尖括号。

```
Action someaction = () => Console.Write("test");
string methodName= RuntimeReflectionExtensions.GetMethodInfo(someaction).ToString();

if(methodName.Contains("<"))
  Console.write("anonymous"); 
```

或者你可以使用更好的模式匹配正则表达式

# sql-server - 如何保护加密的 SQL Server Compact 数据库的密码？

> ID：12758067
> 
> 赞同：1
> 
> 时间：2012-10-06T08:22:14.970
> 
> 标签：sql-server, security, sql-server-ce, database-connection

我发现一些资源告诉我，使 SQL Compact DB 被加密就像在连接字符串中指定密码一样简单。但是，我不愿意将密码留在我的 web.config 文件中。我知道我可以在运行时动态地为 DbContext 提供连接字符串，但即使在那里，我仍然在连接字符串中包含纯文本密码。如何最大限度地减少代码中此密码易受攻击的点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:34:39.730

显然，如果托管公司可以访问服务器，您就无法获胜。如果他们真的想，你不能阻止他们学习密码。

所以你所能做的就是混淆密码。我认为一个很好的权衡是在源代码中硬编码密码，如下所示：

```
var plainPassword = Enconding.UTF8.GetString(Convert.FromBase64("encoded-pw-here")) 
```

应该保护的是简单的字符串搜索等。我认为你不能或不应该做更多的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:50:17.830

为什么你害怕在服务器上有密码？大多数系统，例如database.yml 文件中的Rails，将它们的连接存储在某个地方。

但是你可以做的保护它是创建一个加密.dat 文件来保存你的连接。在您的 web.config 文件中，您只需放置连接的“名称”，然后您需要一个可以加密/解密您的连接字符串并在运行时将其放置到位的类。

您可以在这里找到一个示例项目：http: [//www.codeproject.com/Articles/14150/Encrypt-and-Decrypt-Data-with-C](http://www.codeproject.com/Articles/14150/Encrypt-and-Decrypt-Data-with-C)

但这不会为您提供 100% 的安全性，我怀疑这是否值得。最好确保您的 Windows 保护程序得到正确保护，这样任何人都无法在未经许可的情况下访问它。

# mysql - 如何通过 ADDTIME() 更新 mysql 中的时间？

> ID：12758068
> 
> 赞同：2
> 
> 时间：2012-10-06T08:22:29.103
> 
> 标签：mysql

我有表：测试和名为：id 的字段。我想要更新时间（例如添加 2 小时），其中 id=1000。这该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T08:23:58.883

```
UPDATE test SET time = time + INTERVAL 2 HOUR WHERE id = 1000 
```

使用[`ADDTIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_addtime)：

```
UPDATE test SET time = ADDTIME(time, '02:00:00') WHERE id = 1000 
```

# cocoa - NSUndoManager 是否保留其参数？

> ID：12758069
> 
> 赞同：1
> 
> 时间：2012-10-06T08:22:31.740
> 
> 标签：cocoa, memory-management, nsundomanager

以下是 Aaron Hillegas 的书 cocoa programming for OS X 中启用撤消的代码：

```
-(void)removeObjectFromEmployeesAtIndex:(NSUInteger)index
{
Person *p = [employees objectAtIndex:index];
NSLog(@"removing %@ from %@", p, employees);
// Add the inverse of this operation to the undo stack 
NSUndoManager *undo = [self undoManager]; [[undo prepareWithInvocationTarget:self]  insertObject:p inEmployeesAtIndex:index]; 

if (![undo isUndoing]) { 
  [undo setActionName:@"Remove Person"];
} 
[employees removeObjectAtIndex:index];
} 
```

在删除员工时，我们将命令推送到撤消堆栈以将该员工重新插入到数组中。但是有什么保证 p 在调用 undo 时不会被释放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:19:02.257

当 NSInvocation 由 "[[undo prepareWithInvocationTarget:self] insertObject:p inEmployeesAtIndex:index]" 创建时，'p' 将被保留

# magento - Magento Iphone Mobile 主题主页问题

> ID：12758072
> 
> 赞同：0
> 
> 时间：2012-10-06T08:22:48.103
> 
> 标签：magento

你好

我正在尝试为我的 magento 商店设置 iphone 主题。

以下是我的商店设置：

1\. 对于我的商店，我选择了一个 CMS 页面作为我的默认主页

2.我已经使用了默认的iphone主题并将其上传到我的主题文件夹

3\. 在系统 > 配置 > 设计 > 主题 > 模板下，我将以下内容放在匹配表达式下：

iPhone|iPod|黑莓|Palm|Googlebot-Mobile|Mobile|mobile|mobi|Windows Mobile|Safari Mobile|Android|Opera Mini

同样也是Skin / Layout / Default

当通过任何移动设备查看网站时，这应该会调用 iphone 主题。

请注意：我希望我的 CMS 页面设置为主页始终对我的网站可见。只有当通过移动设备查看我的网站时，我才希望类别页面的显示符合 iphone 的宽度和高度显示。

.

问题：

1、iphone主题首页显示CMS页面：我要直接显示分类。我如何做到这一点？

2\. 主页还显示与主网站一致的宽度和高度....它没有以有利于 iphone/移动设备的尺寸显示...页面左右滚动，因为宽度是默认宽度。

这可能是因为即使通过移动设备查看网站，也会显示设置为主页的默认 CMS 页面。此 cms 页面的宽度与普通笔记本电脑的查看屏幕一致。它有一个宽度为 960 像素的横幅图像。所以，这里的解决方案可能是调用一个符合 iphone 屏幕的类别页面......因此需要上面的 1。

我确定这不是 iphone 网站应该显示的方式。

关于我可能会出错的任何建议。

期待大家的意见和建议

谢谢大家

穆迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T16:13:00.080

添加

```
<block type="cms/page" name="cms_page"/> 
```

进入`<cms_index_index><reference name="content">`标签

看这个例子：

```
<cms_index_index translate="label">
    <label>CMS Home Page</label>
    <reference name="root">
        <block type="page/html_wrapper" name="homepage.banner" translate="label">
            <label>Home Page Banner(Mobile)</label>
            <action method="setElementClass"><value>front-banner</value></action>
        </block>
    </reference>
    <reference name="content">
        <block type="catalog/navigation" name="hp_nav" template="catalog/navigation/top.phtml" />
        <block type="cms/page" name="cms_page"/>
    </reference>
</cms_index_index> 
```

# xcode - 如何在 iPad 中自动旋转？

> ID：12758073
> 
> 赞同：0
> 
> 时间：2012-10-06T08:22:53.160
> 
> 标签：xcode, uiviewcontroller, uinavigationcontroller, uitabbarcontroller

在我的应用程序中，我添加了 UITabBarController *rootController;

在**didFinishLaunchingWithOptions**我完成了这段代码。为此我写了

```
 WaylistController *waylistNavigationControllerTemp = [[WaylistNavigationController alloc] initWithNibName:@"WaylistNavigationController" bundle:nil];
      self.waylisyViewController = waylistNavigationControllerTemp;
      UINavigationController * waylistNavigationController = [[UINavigationController alloc] initWithRootViewController:waylisyViewController];
      [waylistNavigationControllerTemp release];

WayRoomController *wayRoomNavigationControllerrTemp = [[WayRoomNavigationController alloc] initWithNibName:@"WayRoomNavigationController" bundle:nil];
      self.WayRoomViewController = wayRoomNavigationControllerrTemp;
      UINavigationController * wayRoomNavigationController = [[UINavigationController alloc] initWithRootViewController:WayRoomViewController];
      [wayRoomNavigationControllerrTemp release];

rootController.viewControllers = [NSArray arrayWithObjects: WaylistNavigationController,//0
                                    WayRoomNavigationController,//1                       
                                     nil]
[rootController setSelectedIndex:0]; 
```

为此，我没有得到汽车东方总是只得到爱国者。有人请帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:50:19.963

检查 .plist 文件中的设置以获取支持的界面方向..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:34:32.063

把它放在你需要方向的控制器类中。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
 // Return YES for supported orientations
  if((interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) || (interfaceOrientation == UIInterfaceOrientationLanscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight))
    return YES;

} 
```

还要确保在您的项目设置中启用了所有方向。在您的 .xib 文件中，使用自动调整大小来缩放两个方向。

# r - 如何创建虚拟变量？

> ID：12758075
> 
> 赞同：5
> 
> 时间：2012-10-06T08:23:01.537
> 
> 标签：r

我有一个变量是一个因素：

```
 $ year           : Factor w/ 8 levels "2003","2004",..: 4 6 4 2 4 1 3 3 7 2 ... 
```

我想创建 8 个虚拟变量，命名为“2003”、“2004”等，根据变量“year”的值取值 0 或 1。我能想到的最接近的是

```
dt1 <- cbind (dt1, model.matrix(~dt1$year - 1) ) 
```

但这会带来不幸的后果

1.  虚拟变量命名为 dt1$year2003，而不仅仅是“2003”、“2004”等
2.  似乎 NA 行被完全省略`model.matrix`（因此当变量中存在 NA 时，上述命令由于长度不同而失败`year`）。

当然，我可以用更多代码解决这些问题，但我希望我的代码尽可能简洁（在合理范围内），所以如果有人能提出更好的方法来制作虚拟变量，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:54:18.450

这是我能得到的最简洁的。该`na.action`选项负责处理`NA`值（我宁愿使用参数而不是全局选项设置，但我不知道如何）。列的命名是相当深刻的硬编码，看不到任何方法来覆盖它`model.matrix`...

```
options(na.action=na.pass)
dt1 <- data.frame(year=factor(c(NA,2003:2005)))
dt2 <- setNames(cbind(dt1,model.matrix(~year-1,data=dt1)),
              c("year",levels(dt1$year))) 
```

如上所述，在某些情况下，列名不是合法的 R 变量名，您可能会遇到麻烦。

```
 year 2003 2004 2005
1 <NA>   NA   NA   NA
2 2003    1    0    0
3 2004    0    1    0
4 2005    0    0    1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T10:37:20.833

您可以使用`ifelse()`which 不会省略`na`行（但我猜您可能不会将其视为“尽可能简洁”）：

```
dt1 <- data.frame(year=factor(rep(2003:2010, 10)))  # example data

dt1 <- within(dt1, yr2003<-ifelse(year=="2003", 1, 0))
dt1 <- within(dt1, yr2004<-ifelse(year=="2004", 1, 0))
dt1 <- within(dt1, yr2005<-ifelse(year=="2005", 1, 0))
# ...    

head(dt1)
#   year yr2003 yr2004 yr2005
# 1 2003      1      0      0
# 2 2004      0      1      0
# 3 2005      0      0      1
# 4 2006      0      0      0
# 5 2007      0      0      0
# 6 2008      0      0      0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T09:06:43.837

`library(caret)` 提供了一个非常简单的函数 ( `dummyVars`) 来创建虚拟变量，尤其是当您有多个因子变量时。但是您必须确保目标变量是因素。例如，如果您`Sales$year`是数字，则必须将它们转换为因子：`as.factor(Sales$year)`

假设我们有原始数据集“销售”，如下所示：

```
 year    Sales       Region
1   2010    3695.543    North
2   2010    9873.037    West
3   2008    3579.458    West
4   2005    2788.857    North
5   2005    2952.183    North
6   2008    7255.337    West
7   2005    5237.081    West
8   2010    8987.096    North
9   2008    5545.343    North
10  2008    1809.446    West 
```

现在我们可以同时创建两个虚拟变量：

```
>library(lattice)
>library(ggplot2)
>library(caret)
>Salesdummy <- dummyVars(~., data = Sales, levelsOnly = TRUE)
>Sdummy <- predict(Salesdummy, Sales) 
```

结果将是：

```
 2005 2008 2010   Sales    RegionNorth    RegionWest
1   0    0    1   3695.543       1              0
2   0    0    1   9873.037       0              1
3   0    1    0   3579.458       0              1
4   1    0    0   2788.857       1              0
5   1    0    0   2952.183       1              0
6   0    1    0   7255.337       0              1
7   1    0    0   5237.081       0              1
8   0    0    1   8987.096       1              0
9   0    1    0   5545.343       1              0 
10  0    1    0   1809.446       0              1 
```

# php - 查询语法错误

> ID：12758077
> 
> 赞同：-2
> 
> 时间：2012-10-06T08:23:32.003
> 
> 标签：php, mysql

我在 mysql SELECT 查询中使用 ORDER BY，但我不知道 ots 没有对数据进行排序。如果我使用此查询，它会显示表格但不按升序对数据进行排序

```
$result = mysql_query("SELECT *FROM learningmaterial ORDER BY 'order' ASC")or   die(mysql_error()); 
```

但如果我使用

```
$result = mysql_query("SELECT *FROM learningmaterial ORDER BY order ASC")or die(mysql_error()); 
```

然后它给出查询的语法不正确的错误...我在各个网站上都看到过，但我在我的代码中找不到任何独特的东西...我认为它是正确的，...请检查查询并修改解决方案。提前谢谢 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T08:24:27.870

您需要*反引号，*而不是单引号^((a))：

```
... SELECT * FROM learningmaterial ORDER BY `order` ASC ... 
```

通过使用单引号，您可以按*常数*对行进行排序（每行都获得相同的常数），因此根本不会对它们进行排序。

通过使用 的“裸”列名`order`，您会混淆 SQL 解析器，因为`order`它是一个保留字。

* * *

^((a)：)当然，如果您停止使用保留字作为列名，这个问题就会消失，但我认为您这样做是有原因的（例如，程序的桶负载*已经*取决于该列被调用的事实`order`）。

我自己，我倾向于不对列使用通用名称（例如`order`or `date`），而是更喜欢与语言不冲突的东西（例如`order_num`or `start_date`）。这样我就不用担心逃跑了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:26:10.167

您正在使用 SQL 保留关键字`order`作为列名，所以使用反引号来转义......就像这样

```
SELECT * FROM learningmaterial ORDER BY `order` ASC 
```

**我建议您更改列名称**

[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)列表参考

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T08:28:42.023

`ORDER`是一个保留的 sql 语法关键字。你不能直接使用它

```
SELECT *FROM learningmaterial ORDER BY `order` ASC
-------------------------------^--------- 
```

在第二种情况下

```
SELECT *FROM learningmaterial ORDER BY order ASC
---------------------------------^-------^--
//this is a sql error 
```

这没有任何意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T08:31:46.303

Since `Order` is a reserved word, you need to wrap them using backticks not single quotes.

```
SELECT * FROM `learningmaterial` ORDER BY `order` ASC 
```

# java - android: WebView canGoBack() 错误

> ID：12758078
> 
> 赞同：0
> 
> 时间：2012-10-06T08:23:34.610
> 
> 标签：java, android

我正在关注（[在 WebView 中构建 Web 应用程序](http://developer.android.com/guide/webapps/webview.html)）教程，但是我遇到了（导航网页历史记录）问题，我在我的设备上运行它并点击了一个链接，但是当我点击后退按钮时，应用程序关闭：

那是我的活动：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    WebView myWebView = (WebView) findViewById(R.id.webView1);
    myWebView.setWebViewClient(new MyWebViewClient());
    myWebView.setWebViewClient(new WebViewClient());
    WebSettings webSettings = myWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    myWebView.loadUrl("http://www.google.com");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getHost().equals("www.example.com")) {
            // This is my web site, so do not override; let my WebView load the page
            return false;
        }
        // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
        return true;
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    WebView myWebView = null;
    // Check if the key event was the Back button and if there's history
    if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
        myWebView.goBack();
        return true;
    }
    // If it wasn't the Back key or there's no web page history, bubble up to the default
    // system behavior (probably exit the activity)
    return super.onKeyDown(keyCode, event);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:28:56.750

```
public class MainActivity extends Activity {
WebView myWebView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myWebView = (WebView) findViewById(R.id.webView1);
    myWebView.setWebViewClient(new MyWebViewClient());
    myWebView.setWebViewClient(new WebViewClient());
    WebSettings webSettings = myWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    myWebView.loadUrl("http://www.google.com");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getHost().equals("www.example.com")) {
            // This is my web site, so do not override; let my WebView load the page
            return false;
        }
        // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
        return true;
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // Check if the key event was the Back button and if there's history
    if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
        myWebView.goBack();
        return true;
    }
    // If it wasn't the Back key or there's no web page history, bubble up to the default
    // system behavior (probably exit the activity)
    return super.onKeyDown(keyCode, event);
} 
```

# android - Android 动态壁纸 onOffsetsChanged

> ID：12758087
> 
> 赞同：1
> 
> 时间：2012-10-06T08:25:04.610
> 
> 标签：android, live-wallpaper

我正在尝试制作动态壁纸。我了解 onOffsetsChanged 方法用于获取屏幕的当前位置。我无法正确理解如何实现此方法来获取动态壁纸，甚至是标准壁纸随着用户滑动而横向移动。我尝试查看一些示例，但我仍然不清楚。有人可以给我一个想法并建议一些很好的动态壁纸教程，可以通过用户滑动在屏幕上移动。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-17T13:52:36.447

你需要做

```
public float mmPixel; 
```

接着

```
 public void onOffsetsChanged(float xOffset, float yOffset, float xStep,
            float yStep, int xPixels, int yPixels) {

        mmPixel = xPixels;

    } 
```

并在 Canvas c 上像这样绘制您的位图

```
 c.drawBitmap(Bitmap bitmap, mmPixel, 0, null); 
```

# python - python 桌面应用程序的安装程序和更新程序

> ID：12758088
> 
> 赞同：37
> 
> 时间：2012-10-06T08:25:06.157
> 
> 标签：python, windows, nsis, auto-update, pyinstaller

我正在用 python 构建一个桌面应用程序，并用 Pyinstaller 将它打包到一个 exe 中。我想用安装程序来发布我的应用程序，并为软件提供自动和静默更新，如 Windows 版 Google Chrome、Dropbox 或 Github。

我发现以下软件可以做到这一点：

*   [Google Omaha](http://code.google.com/p/omaha/) - 不提供服务器
*   [Github Shimmer](https://github.com/github/Shimmer) - 完美的解决方案，但 Paul 告诉我它还不能处理非 .Net 应用程序
*   [WinSparkle](http://winsparkle.org/) - 仅限更新程序。
*   [NetSparkle](http://netsparkle.codeplex.com/) - 顾名思义，非常专注于 .Net
*   [NSIS](http://nsis.sourceforge.net/Main_Page) - 安装程序。
*   [ClickOnce](http://msdn.microsoft.com/en-us/library/142dbbz4(v=vs.80).aspx) - 仅限 .NET

我正在尝试找到解决问题的最简单方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-10T16:19:49.270

cloudmatrix 公司有一套工具可以解决这个问题。

[esky](http://pypi.python.org/pypi/esky)是一个用于冻结应用程序的自动更新框架，它与常见的 python“打包”框架兼容。[signedimp](http://pypi.python.org/pypi/signedimp/0.3.2)尝试确保应用程序在签名后不被修改，并尽量减少侵入性 Windows UAC 对话框。[myppy](http://pypi.python.org/pypi/myppy/0.1.0)旨在使您免受 Linux 上的基本库不兼容问题的影响，例如安装在具有不同 gcc 和 libc 版本的发行版上。整套可以在 github 上[看到](https://github.com/cloudmatrix/)。

The video and slides from this year's PyCon are here: [http://lanyrd.com/2012/pycon/spckh/](http://lanyrd.com/2012/pycon/spckh/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T20:13:45.013

[WiX](http://wixtoolset.org/)（Windows Installer XML 工具集）是 MSI 创作工具的开源项目。
该项目的一部分是[ClickThrough](http://wix.sourceforge.net/ctvision.html)，这是一组附加工具，包括自动检测可用更新（通过 RSS 提要）、通知用户和安装更新的工具。
你可以[在这里](http://www.installsite.org/pages/en/msi/authoring.htm#WiX)阅读：

> Windows Installer Xml (WiX) 工具集由编译器、链接器、lib 工具和反编译器组成。它从 XML 输入生成 MSI 和 MSM 文件。它不包括用于创建项目文件的 GUI 前端，但有几个项目计划填补这一空白。Votive 是 WiX 项目的一部分，是一个 Visual Studio 扩展。它允许您创建与 VS 解决方案中的任何其他项目类似的“WiX 项目”。WiX 是由 Microsoft 员工和前 MSI 团队成员 Rob Mensching 在空闲时间创建的，并以开源形式发布。Microsoft 内部的多个团队使用它来创建他们的设置。

另请参阅[如何使用 WIX 创建简单的 MSI 安装程序](http://themech.net/2008/08/how-to-create-a-simple-msi-installer-using-wix/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-18T03:41:21.073

I'm working on a project that you may find useful.

[PyUpdater](https://www.github.com/JMSwag/PyUpdater)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:59:10.707

我推荐谷歌奥马哈。如果唯一阻碍您的是服务器/间接费用，那么您现在可以以相当便宜的价格获得托管服务器。

# groovy - 有没有办法在 Groovy 中对 mixin 进行参数化？

> ID：12758089
> 
> 赞同：2
> 
> 时间：2012-10-06T08:25:06.793
> 
> 标签：groovy, mixins

我可以以某种方式将一个类与参数化构造函数混合在一起吗？

像这样的东西：

```
class RenderedWithTemplates {
   def templates = []

   RenderedWithTemplates(templates) { ... }

   ...

}

@Mixin(RenderedWithTemplates(show: "showAddress.gsp", add: "addAddress.gsp")
class Address { ... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:51:49.473

我从 2007 [0] 中找到了 mixin 提案，但是 GroovyDefaultMethods#mixin [1] 方法不支持参数化 mixin，@Mixin 也不支持。

据我从上面的代码示例中可以看出，您需要找到一种方法来混合与您的（域）类相关的 GSP 视图信息。对于这种情况，另一种（并且稍微更时髦；））方法是`RenderedWithTemplates`使用一个包含 GSP 视图信息的闭包参数实现注释：

```
import java.lang.annotation.*

@Retention(RetentionPolicy.RUNTIME)
@interface RenderedWithTemplates {
    Class value()
}

@RenderedWithTemplates({ [show: "showAddress.gsp", add: "addAddress.gsp"] }) 
class Address {}

// shows how to read the map with all the GSP infos

def templateInfo = Address.getAnnotation(RenderedWithTemplates)
def gspMap = templateInfo.value().newInstance(this, this).call() 
```

[0] [http://docs.codehaus.org/display/GroovyJSR/Mixins](http://docs.codehaus.org/display/GroovyJSR/Mixins)

[1] [http://groovy.codehaus.org/api/org/codehaus/groovy/runtime/DefaultGroovyMethods.html](http://groovy.codehaus.org/api/org/codehaus/groovy/runtime/DefaultGroovyMethods.html)

# android - 如何提高android中的listview加载速度？

> ID：12758092
> 
> 赞同：0
> 
> 时间：2012-10-06T08:26:05.543
> 
> 标签：android, performance, android-listview

我的列表视图中有 2000 个列表项。但是加载需要很长时间。由于我的应用程序变得非常缓慢。如果有人遇到同样的问题并得到了解决方案，请您分享您的想法来解决相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:46:20.280

您可以使用屏幕末尾的加载更多按钮。为此，请参阅[带有加载更多按钮的 Android Listview](http://www.androidhive.info/2012/03/android-listview-with-load-more-button/)。在哪里可以找到相同的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:36:21.097

您应该尝试“Loaders API”：http: [//developer.android.com/guide/components/loaders.html](http://developer.android.com/guide/components/loaders.html)

为了异步加载列表的适配器。

# gstreamer - 使用 Gstreamer 压缩 H264 流

> ID：12758098
> 
> 赞同：2
> 
> 时间：2012-10-06T08:27:45.970
> 
> 标签：gstreamer

我正在尝试创建一个 GStreamer 管道 ( **v 1.0** ) 以记录和播放特殊文件格式。

出于记录目的，我使用以下管道：

```
gst-launch-1.0 videotestsrc ! video/x-raw-yuv, format=\(fourcc\)I420,  width=640, height=480 ! videoconvert ! x264enc byte-stream=1 ! queue ! appsink 
```

在*appsink*（使用 new_sample() 回调）中，我使用一种压缩方法来压缩 H264 流并最终存储在输出文件中。

我使用以下管道播放录制的文件：

```
gst-launch-1.0 appsrc ! video/x-h264 ! avdec_h264 ! autovideosink 
```

在*appsrc 中*，我解压缩H264 流并将其发送到appsrc 缓冲区（使用push-buffer）。每个缓冲区的大小为 4095。

不幸的是，GStreamer 在推送 2 个缓冲区后会打印以下调试消息：

*错误：内部数据流错误。*

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T08:37:31.743

1.  在解码器之前添加 legacyh264parse 或 h264parse（取决于您的 gst 组件版本）。您需要能够将完整帧发送到解码器。

2.  发布 avdec_h264 最好有一个 ffmpegcolorspace 能够将视频格式转换为您的显示要求。

# java - 我的用户输入代码有什么问题？

> ID：12758099
> 
> 赞同：2
> 
> 时间：2012-10-06T08:27:58.687
> 
> 标签：java

每次我使用此代码时：

```
import java.util.*;

public class Main{

public static void main (String args []){
System.out.println("What is your name?");
Scanner name = new Scanner (System.in);
System.out.println("Hello," + name);
}
} 
```

它只是给我随机的字母，例如：

你好，java.util.Scanner[delimiters=\p{javaWhitespace}+][position=0][match valid=false][需要输入=false]

请有人帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:30:05.347

因为您所做的实际上只是打印出 Scanner 的`toString`方法，因为在您的代码中，对象名称实际上是 Scanner 的一个实例，而不是字符串。

您需要调用该方法来实际读取用户输入。

你需要做的是做这样的事情

```
import java.util.*;

public class Main{

public static void main (String args []){
System.out.println("What is your name?");
Scanner scanner = new Scanner (System.in);
String name = scanner.next();
System.out.println("Hello," + name);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:30:32.713

```
Scanner name = new Scanner (System.in); 
```

使用它，您已经创建了一个扫描参考。使用它来读取名称，例如

```
String str = name.next(); 
```

阅读有关[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)类的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T11:59:11.297

您正在打印扫描仪的参考。如果你想输入一个整数，写

```
Scanner in = new Scanner(System.in); 
int n = in.nextInt(); 
```

如果你想输入一个字符串，写

```
Scanner in = new Scanner(System.in); 
    String n = in.next(); 
```

# android - newChooseAccountIntent 返回一个名称，但 getToken 需要一个电子邮件

> ID：12758101
> 
> 赞同：2
> 
> 时间：2012-10-06T08:28:08.717
> 
> 标签：android, google-play-services

我从新的 Google Play 服务开始，并尝试使用我在[博客](http://android-developers.blogspot.de/2012/09/google-play-services-and-oauth-identity.html)和参考示例中找到的信息来创建一个完整的工作应用程序。恕我直言，这些示例中缺少一些东西。

新标准 AccountPicker.newChooseAccountIntent 可用于选择在设备上注册的 Google 帐户。使用该对话框会在返回时返回帐户的名称。

现在这些示例展示了如何获取令牌。新的 GoogleAuthUtil.getToken 方法需要一封电子邮件来获取令牌。

有什么东西不见了。如何从给定的帐户名获取电子邮件？

提前谢谢了。

```
public class MyActivity extends Activity {

    public static final String AUTHTOKENSCOPE_DRIVE = "oauth2:https://www.googleapis.com/auth/drive";

    String accountName = "";

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        switch (requestCode) {
            case 1:
                if (resultCode == RESULT_OK) {
                    accountName = intent.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
                    // Need to fetch token with email
                    // String token = GoogleAuthUtil.getToken(this, <???email???>,  
                           AUTHTOKENSCOPE_DRIVE);
                } else {
                }

                break;
            default:
                super.onActivityResult(requestCode, resultCode, intent);
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        int rc = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
        switch (rc) {
            case ConnectionResult.SUCCESS:
                Intent intent = AccountPicker.newChooseAccountIntent(null, null, new String[] {
                        "com.google"
                },
                        true, null, AUTHTOKENSCOPE_DRIVE, new String[] {
                            "Just a text"
                        }, null);
                startActivityForResult(intent, 1);
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T10:44:53.467

对于 Google 帐户，电子邮件地址**是**帐户名称。

所以这应该适合你：

```
String token = GoogleAuthUtil.getToken(this, accountName, AUTHTOKENSCOPE_DRIVE); 
```

要重新检查，是否有`Account`可用的对象，`accountName`您也可以调用

```
GoogleAccountManager accountManager = new GoogleAccountManager(context);
Account account = accountManager.getAccountByName(accountName); 
```

**证明**

从您已经引用的[博客文章中：](http://android-developers.blogspot.de/2012/09/google-play-services-and-oauth-identity.html)

> 其次，您不需要 android.accounts.Account 对象，您只需使用唯一标识它的电子邮件地址字符串（**在 account.name 中可用）。**

来自 Google 的[Android 日历 API 示例应用程序](https://code.google.com/p/google-api-java-client/source/browse/calendar-preview-android-sample/src/main/java/com/google/api/services/samples/calendar/android/CalendarSampleActivity.java?repo=samples&r=549a58c4b30b111c5f868b73e877a679be48e897)，该[`GoogleAccountCredential.getAccountName()`](https://code.google.com/p/google-api-java-client/source/browse/calendar-preview-android-sample/src/main/java/com/google/api/services/samples/calendar/android/GoogleAccountCredential.java?repo=samples&r=549a58c4b30b111c5f868b73e877a679be48e897)方法：

```
/**
 * Returns the selected Google account name (e-mail address), for example
 * {@code "johndoe@gmail.com"}, or {@code null} for none.
 */
public String getAccountName() {
    return accountName;
} 
```

他们还在那里使用：

```
GoogleAuthUtil.getToken(context, accountName, scope); 
```

# python - 这个使用 wxpython 的程序不运行

> ID：12758102
> 
> 赞同：0
> 
> 时间：2012-10-06T08:28:14.053
> 
> 标签：python, wxpython

该程序是 wx.textctrl 在单击按钮时写为“单击”。

它不运行。

```
import wx

class Mainwindow(wx.Frame):

    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(300, 300))
        panel = wx.Panel(self, -1)

        vbox = wx.BoxSizer(wx.VERTICAL)

        hbox1 = wx.BoxSizer(wx.HORIZONTAL)
        btn = wx.Button(panel, -1, 'OK', size=(70, 30))
        button = Click_btn()
        btn.Bind(wx.EVT_BUTTON, button.click_btn)
        hbox1.Add(btn, 0)
        vbox.Add(hbox1, 0)

        hbox2 = wx.BoxSizer(wx.HORIZONTAL) 
        self.tc = wx.TextCtrl(panel, -1, style=wx.TE_MULTILINE)
        hbox2.Add(self.tc, 1, wx.EXPAND) 
        vbox.Add(hbox2, 1, wx.EXPAND)

        panel.SetSizer(vbox)

        self.Centre()
        self.Show(True)

class Click_btn(Mainwindow):
    def click_btn(self, event):
        Mainwindow.tc.WriteText("clicked\n")

if __name__=="__main__":
    app = wx.App()
    Mainwindow(None, -1, u"sample")
    app.MainLoop() 
```

错误面板立即消失。

也许 Click_btn 类是错误的。

我应该在哪里改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:48:57.613

您在代码中弄乱了几个概念：

*   `Click_btn`可能不应该来自`MainWindow`，而是来自`wx.Button`。
*   `click_btn`不应访问`MainWindow`，但应访问`MainWindow`.
*   最简单的解决方案是将事件处理程序实现为方法`MainWindow`并将其绑定到按钮。

我建议阅读[http://wiki.wxpython.org/Getting%20Started](http://wiki.wxpython.org/Getting%20Started)和[http://www.diveintopython.net/object_orient_framework/index.html](http://www.diveintopython.net/object_oriented_framework/index.html)然后再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:51:22.213

您的 Click_btn 类是您的 Mainwindow 类的子类，它需要 3 个参数到**init**以及它自己。当你创建一个新的 Click_btn 时，你没有传入任何参数。

在自己的类中拥有 click_btn 并没有什么意义。将其移至 Mainwindow 类。以下应该有效：

```
import wx

class Mainwindow(wx.Frame):

    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(300, 300))
        panel = wx.Panel(self, -1)

        vbox = wx.BoxSizer(wx.VERTICAL)

        hbox1 = wx.BoxSizer(wx.HORIZONTAL)
        btn = wx.Button(panel, -1, 'OK', size=(70, 30))
        btn.Bind(wx.EVT_BUTTON, self.click_btn)
        hbox1.Add(btn, 0)
        vbox.Add(hbox1, 0)

        hbox2 = wx.BoxSizer(wx.HORIZONTAL) 
        self.tc = wx.TextCtrl(panel, -1, style=wx.TE_MULTILINE)
        hbox2.Add(self.tc, 1, wx.EXPAND) 
        vbox.Add(hbox2, 1, wx.EXPAND)

        panel.SetSizer(vbox)

        self.Centre()
        self.Show(True)

    def click_btn(self, event):
        self.tc.WriteText("clicked\n")

if __name__=="__main__":
    app = wx.App()
    Mainwindow(None, -1, u"sample")
    app.MainLoop() 
```

# c++ - 使用 const 指针的 C 样式字符返回不正确的结果

> ID：12758105
> 
> 赞同：0
> 
> 时间：2012-10-06T08:28:38.897
> 
> 标签：c++

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

我已经使用指针声明了一个 C 风格的数组，并为其分配了一个函数返回的值。

1.`const char* str = chArr->readString();`

在上面之后，我想按如下方式计算 str ：

2.`cout << "pointer to char is = " << str <<endl;`

是`readString`：

```
char* CharArray::readString()
{
    std::cout << "Insert a string of max 19 length:" <<std::endl;
    char string[20];
    std::cin.getline(string,20,'\n');
    return string;
} 
```

当我在第 2 行设置断点时，我可以看到正确的结果为`str`. 但是控制台窗口什么也没有显示，在通过第 2 步后，当我查看`str`值时，它显示类似“ `P÷7`”或“ `äû:`”，..

也许值得一提的是，对于长度为 4,5 的 str I 字符串。尽管 str 的长度不是 19。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T08:30:57.880

您正在返回一个指向局部变量的指针。函数结束后，系统再次使该变量的内存地址可用。因此，其他一些代码可能会用一些随机数据覆盖它，这就是您看到乱码的原因。

为了安全地执行此操作，请使用：

`char* string = new char[20];`

以后记住`delete []`了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T08:51:22.660

您正在返回一个局部变量的地址，该内存将在退出函数后被其他东西重用。你最好返回一个 std::string ，而不是像这样：

```
std::string CharArray::readString()
{
    std::cout << "Type a string and hit enter:" << std::endl;
    std::string str;
    std::getline(std::cin, str);
    return str;
} 
```

这也意味着您无需担心最大长度（至少此时您无需担心，您可能希望在其他地方施加其他限制）并且内存分配将自动为您管理.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T08:31:51.037

您在 readString 的范围内创建字符串。当您返回时，您的字符串将被销毁。`char *string = new char[20];`如果你想避免这种行为，你必须在你的函数中分配你的字符串。

# java - stringbuilder 可以容纳的最大字符数

> ID：12758106
> 
> 赞同：11
> 
> 时间：2012-10-06T08:28:39.990
> 
> 标签：java, stringbuilder, max

我需要写 10,000 x 30,000 个字符。单个字符串构建器能够容纳所有字符还是我应该考虑一个字符串构建器数组？我无权访问测试用例，因此我无法亲自验证它。希望我能在这里找到答案。

提前致谢。

编辑：

我尝试使用循环添加 10000 x 30000 个字符。我得到以下例外。

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOf(Arrays.java:2367)
at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:130)
at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:114)
at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:415)
at java.lang.StringBuilder.append(StringBuilder.java:132)
at Test.main(Test.java:19) 
```

这个“java堆空间”怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-06T08:33:51.233

长度是一个 int，因此假设您有内存，它应该最多容纳 2GChar (4GB)。您将“仅”使用 600MB（3 亿 @ 每个字符 2 个字节）。只是要小心你最终制作了多少份......即toString（）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T08:34:37.827

您需要担心的是最大堆大小。无论您使用单个还是多个 StringBuilder 对象，都不会有任何区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T08:34:43.587

只要字符串构建器中包含的字符序列的长度不超过容量，就不需要分配新的内部缓冲区。如果内部缓冲区溢出，它会自动变大。它为您提供了这个 StringBuilder 实例内存此时可以容纳的最大字符数。

# search - 启用使用自定义内容项搜索投影

> ID：12758108
> 
> 赞同：0
> 
> 时间：2012-10-06T08:28:49.447
> 
> 标签：search, orchardcms

我创建了一个自定义内容项。我还有一个过滤内容项的投影（例如在标签或其他东西上）。

我已经安装了模块：搜索、索引和 Lucene，但是当我搜索一篇文章时，我似乎没有找到任何我的自定义内容项。

如何才能做到这一点？

我正在使用果园 1.5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:55:52.807

没关系。安装搜索后，“索引此内容类型以供搜索”在我的自定义内容项上不直接可见。当我将另一个字段添加到我的内容项并保存时，该字段出现。这就是我找不到或选择它的原因:-)

# php - 为什么我不能遍历这个 SimpleXML 对象？

> ID：12758111
> 
> 赞同：0
> 
> 时间：2012-10-06T08:29:20.417
> 
> 标签：php, foreach, simplexml

我一直在拉我的头发，我真的希望我能得到一些帮助。提前致谢！

我有一个 SimpleXML 对象，它是这样的：

```
Object
(
|    SomeStuff Object
|    (
|    )
|    Entries Object
|    (
|    |    Entry Object
|    |    (
|    |    |    SomeMoreStuff Object
|    |    |    (
|    |    |    )
|    |    |    ImportantStuff Object
|    |    |    (
|    |    |    |    W1 Object
|    |    |    |    (
|    |    |    |    |    D1 Object
|    |    |    |    |    (
|    |    |    |    |    )
|    |    |    |    |    D2 Object
|    |    |    |    W2 Object
|    |    |    |    (
|    |    |    |    |    D1 Object
|    |    |    |    |    (
|    |    |    |    |    )
|    |    |    |    |    D2 Object 
```

...等。出于某种原因，使用以下代码会产生意想不到的结果：

```
foreach($xml->Entries->Entry->ImportantStuff as $key => $value) {
   echo "$key, $value";
} 
```

只是输出`ImportantStuff,`而不是每个`D#`. 在另一种情况下，我有一个对象，其中 ImportantStuff 的每个成员都有相同的名称，在这种情况下，我使用`$xml->ImportantStuff->ImportantThing`，它返回*所有*ImportantThings。在重要事物具有不同名称的情况下，我该如何模拟呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:33:21.650

使用 simplexml 你需要像这样进行 foreach

`foreach($xml->Entries->Entry->ImportantStuff->children() as $key => $value) { echo "$key, $value"; }`

# php - 在 CodeIgniter 中修改 URL

> ID：12758112
> 
> 赞同：0
> 
> 时间：2012-10-06T08:29:26.200
> 
> 标签：php, codeigniter, hook

我的应用程序根据产品的类别和名称生成各种 url。例如，按类别浏览产品的 url 将是

```
localhost/category/Memory Cards 
```

问题是空格被转换为`%20`s。如果 I`urlencode`或`rawurlencode`空格被转换为`+`符号，但`/`也被转换为`%xx`等价物，这会导致 url 到控制器的无效映射。

`+`我需要用符号而不是对我的所有网址进行编码`spaces`。我可以使用助手。但是，我需要在任何地方调用辅助方法。

我可以`hooks`用来修改 HTML、扫描所有 url 并`spaces`用`+`符号替换吗？

我还需要将网址解码回`spaces`from`+`标志。我怎么能那样做？

如果您认为我的方法都是错误的，那么合适的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:05:34.487

这样做的首选方法是在表中添加一个字段（我通常使用“slug”作为字段名称），它是名称的 url 友好版本（小写，并用破折号/下划线替换空格和奇怪的字符/whatever），只要确保它保持唯一，然后使用它来生成产品的 url 并识别请求的产品。

所以你的网址看起来像`localhost/category/memory-cards`。

你可以[`url_title()`](http://codeigniter.com/user_guide/helpers/url_helper.html)用来生成蛞蝓

# ruby-on-rails - 如何使用 ruby on rails 2.3.9 和 ruby 1.8.7 从文件系统中删除文件

> ID：12758117
> 
> 赞同：2
> 
> 时间：2012-10-06T08:29:52.187
> 
> 标签：ruby-on-rails, file-io

使用以下命令将文件保存到公共/数据：

```
def upload_vault_data        
    if params[:dump][:file]
        uploaded_io = params[:dump][:file]
        File.open(Rails.root.join('public', 'data', "data_#{session[:campaign_id]}_#{uploaded_io.original_filename}"), 'w') do |file|
            file.write(uploaded_io.read)
        end
    end
end 
```

这按预期工作，但是如何让用户在文件上传后删除文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T08:46:56.100

Rails 允许您使用称为“系统”的方法执行系统命令。

例如。

```
system 'ls' 
```

更多信息：[使用 Ruby on Rails 执行脚本？](https://stackoverflow.com/questions/2947180/execute-script-with-ruby-on-rails)

在你的情况下，你可能会做一个

```
system "rm #{path-to-my-file}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T08:45:45.427

我建议考虑使用诸如[蜻蜓](https://github.com/markevans/dragonfly)、[回形针](https://github.com/thoughtbot/paperclip)或载[波波](https://github.com/jnicklas/carrierwave)之类的东西来处理应用程序中的文件上传，而不是手动编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T10:22:28.983

要使用 rails 删除文件，请使用

File.delete("文件路径").

# oracle11g - 对 informatica 映射逻辑的简单说明

> ID：12758118
> 
> 赞同：0
> 
> 时间：2012-10-06T08:30:00.927
> 
> 标签：oracle11g, data-warehouse, informatica-powercenter

我必须进行转换 任何人都可以帮助我为以下转换编写查询

```
Source Column name (from lookup) 
Source table        (local_usr_tbl)

Lookup_1:(rpt_user_tbl)

INPUT              CON_NUM,ML_SYMBL
MATCH CONDITION     NBR = CON_NUM AND SYMBL = ML_SYMBL1
Output              SYMBL

TRANSFORMATION LOGIC::

IIF(ISNULL(SYMBL), IIF(ISNULL(SYMBL1), ML_SYMBL1,  SYMBL1), SYMBL )

Target Column name     ML_SYMBL1(rpt_remote_table) 
```

请解释一下如何进行这种转换。我将所有其他列作为直接移动。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:41:42.243

此查询可能会帮助您进行测试：

```
select rpt_remote_table.ML_SYMBL1,local_usr_tbl.ML_SYMBL from local_usr_tbl, rpt_remote_table where local_usr_tbl.SYMBL is null and local_usr_tbl.SYMBL1 is null 
```

# java - 尝试为我的 java 应用程序创建一个包

> ID：12758122
> 
> 赞同：1
> 
> 时间：2012-10-06T08:30:46.197
> 
> 标签：java, linux, packaging, openjdk

我正在用java组合一个简单的RPG游戏引擎。此时一切正常，而我的所有课程都在一个目录中。基本上，我知道我最终会得到一堆文件，并希望将它们组织成一个包结构。我按照[http://www.jarticles.com/package/package_eng.html](http://www.jarticles.com/package/package_eng.html)上的说明进行操作，但似乎无法让魔法发生。发布的两个类是最不依赖的，我想如果我能让这些工作，那么剩下的就不应该是戏剧了。作为记录，我在 Leeenux 中使用 openJDK（Ubuntu netbook Remix 的混音）

头等舱

```
package adventure.engine;

import java.util.*;

public class Inventory
{
ArrayList itemList = new ArrayList();

public Inventory()
{

}

public void addItem()
{

}

public void removeItem()
{

}
} 
```

第二个：

```
package adventure.engine;

import adventure.engine.*;

public class PlayerCharacter

{

private String name = "Player";

private String race;

private String plrClass;

private int level;

private int xp;

private int levelXp;

private Inventory inventory = new Inventory();

//---------

//Abilities

//---------

private static final String[] abilitiesList = {"Strength",

                    "Dexterity",

                    "Constitution",

                    "Intelligence",

                    "Wisdom",

                    "Charisma"};

private int[] abilitiesValues = new int[abilitiesList.length];

//------

//Skills

//------

private static final String[] skillsList    = {"Acrobatics"     , "Insight",

                    "Arcana"            , "Intimidate",

                    "Athletics"         , "Nature",

                    "Bluff"         , "Perception",

                    "Diplomacy"     , "Religion",

                    "Dungeoneering"     , "Stealth",

                    "Endurance"     , "Streetwise",

                    "Heal"          , "Thievery",

                    "History"};

private int[] skillsValues = new int[skillsList.length];

//***********

//Constructor

//***********

public PlayerCharacter()

{

    level = 1;

    xp = 0;

    levelXp = 1000;

    setAbility("Strength", 8);

    setAbility("Dexterity", 10);

    setAbility("Constitution", 10);

    setAbility("Intelligence", 10);

    setAbility("Wisdom", 10);

    setAbility("Charisma", 10);

}       //public PlayerSheet()

//*************

//Class Methods

//*************

public void addXp(int val)

{

    xp += val;

    if (xp >= levelXp)

    {

        level++;

        xp -= levelXp;

        //levelXp += ;

    }

}       //public void addXp(int val)

public void updateSkills()

{

}

//Mutators

public void setName(String n)

{

    name = n;

}

public void setLevel(int l)

{

    level = l;

}

public void setRace(String r)

{

    race = r;

}

public void setXP(int x)

{

    xp = x;

}

public void setClass(String c)

{

    plrClass = c;

}

//set ability value by name

public void setAbility(String a, int val)

{

    for(int i = 0; i < abilitiesList.length; i++)

    {

        if(abilitiesList[i].compareTo(a) == 0)

        {

            abilitiesValues[i] = val;

        }

    }

}

//set ability by index

public void setAbility(int index, int val)

{

    abilitiesValues[index] = val;

}

//set skill by name

public void setSkill(String name, int val)

{

    for(int i = 0; i < skillsList.length; i++)

    {

        if(skillsList[i].compareTo(name) == 0)

        {

            skillsValues[i] = val;

        }

    }

}

//set skill by index

public void setSkill(int index, int val)

{

    skillsValues[index] = val;

}

//Accessors

public static String[] getAbilityList()

{

    return abilitiesList;

}

public static String[] getSkillsList()

{

    return skillsList;

}

//retrieve an ability value by name

public int getAbility(String a)

{

    int val = 0;

    for(int i = 0; i < abilitiesList.length; i++)

    {

        if(abilitiesList[i].compareTo(a) == 0)

        {

            val = abilitiesValues[i];

            break;

        }

    }

    return val;

}

//retrieve an ability value by index number

public int getAbility(int i)

{

    return abilitiesValues[i];

}

public int getSkill(String s)

{

    int val = 0;

    for(int i = 0; i < skillsList.length; i++)

    {

        if(skillsList[i].compareTo(s) == 0)

        {

            val = skillsValues[i];

            break;

        }

    }

    return val;

}

public int getSkill(int i)

{

    return skillsValues[i];

}

public String getName()

{

    return name;

}

public String getRace()

{

    return race;

}

public String getPlrClass()

{

    return plrClass;

}

public int getLevel()

{

    return level;

}

public int getXP()

{

    return xp;

}

public int getLevelXP()

{

    return levelXp;

}

}       //public class PlayerCharacter 
```

类驻留在 /home/user/Java/adventure/engine

echo $classpath 的输出是 /home/james/Java:/.:

当我尝试编译第二个类时，出现以下错误：

```
PlayerCharacter.java:18: cannot find symbol
symbol  : class Inventory
location: class adventure.engine.PlayerCharacter
    private Inventory inventory = new Inventory();
            ^
PlayerCharacter.java:18: cannot find symbol
symbol  : class Inventory
location: class adventure.engine.PlayerCharacter
private Inventory inventory = new Inventory(); 
```

对此的任何反馈将不胜感激。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T08:49:23.853

两件事情。

> 1) 你可能没有编译 Inventory
> 2) PlayerCharacter 和 Inventory 在同一个包中。所以不需要导入。

您应该将它们编译为

> javac冒险/引擎/Inventory.java
> 
> javac冒险/引擎/PlayerCharacter.java

# linux - sh: 0: getcwd() failed: 在引用的驱动器上没有这样的文件或目录

> ID：12758125
> 
> 赞同：266
> 
> 时间：2012-10-06T08:31:07.867
> 
> 标签：linux, ubuntu, ubuntu-12.04, getcwd

我正在尝试在[Ubuntu 12.04](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_12.04_LTS_.28Precise_Pangolin.29) (Precise Pangolin) 上编译 ARM 代码。

当我将代码放在本地目录中时，一切正常。

但是当我将代码放在引用的挂载目录中时，会出现错误：

```
making testXmlFiles
sh: 0: getcwd() failed: No such file or directory
ARM Compiling xxxxx.c
sh: 0: getcwd() failed: No such file or directory 
```

这是我在[fstab](https://en.wikipedia.org/wiki/Fstab)中的设置：

```
//10.0.0.1/data /mnt/data   cifs    auto,noserverino,credentials=/root/.smbcredentials,file_mode=0777,dir_mode=0777,uid=user,gid=users,noperm 0 0 
```

这里发生了什么？什么可能导致此错误？

* * *

## 回答 #1

> 赞同：712
> 
> 时间：2014-02-06T03:24:53.900

此错误通常是由于从不再存在的目录运行命令引起的。

尝试更改您的目录并重新运行该命令。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-11-07T10:20:31.017

这也发生在我重新创建的目录上。目录是相同的，但要让它再次工作，只需运行：

```
cd . 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-06-19T16:46:17.253

试试下面的命令。它对我有用。

```
cd; cd - 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-06-25T17:44:23.653

[有时，符号链接](https://en.wikipedia.org/wiki/Symbolic_link)可能会发生这种情况。如果您遇到此问题并且您知道您在现有目录中，但您的符号链接可能已更改，您可以使用以下命令：

```
cd $(pwd) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-06T03:41:29.403

在[Ubuntu 16.04.3](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_16.04_LTS_.28Xenial_Xerus.29) LTS (Xenial Xerus) 中，以下命令适用于我：

```
exit 
```

然后我又登录了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-30T13:51:53.160

请检查目录路径是否存在。如果您运行命令的位置不存在该文件夹，则会出现此错误。

可能您已经从命令行上的同一路径执行了删除命令。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-23T19:14:46.087

如果某个目录/文件夹不存在，但您以某种方式导航到该目录，在这种情况下您会看到此错误。

例如：

*   当前，您位于“mno”目录中（路径 = abc/def/ghi/jkl/mno
*   运行“sudo su”并删除 mno
*   转到“ghi”目录并删除“jkl”目录
*   现在您在“ghi”目录中（路径 abc/def/ghi）
*   运行“退出”
*   运行“退出”后，您将收到该错误
*   现在您将位于“mno”（路径 = abc/def/ghi/jkl/mno）文件夹中。那是不存在的。

因此，通常当目录不存在时会显示此错误。

要解决这个问题，只需运行“cd;” 或者您可以移动到任何其他存在的目录。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-22T05:34:39.250

就我而言，以前的答案都没有奏效。

在将头撞到墙上一段时间后，我发现，我已经`/etc/passwd`通过运行以前运行良好的定制-linux-server-setup-bash-script 破坏了条目，但这次是内部的正则表达式“ [sed](https://en.wikipedia.org/wiki/Sed) ”命令删除了所有现有条目：D

从另一台工作的 Linux 服务器复制粘贴默认条目后，我终于可以重新启动 sshd。

所以不要忘记在应用任何正则表达式替换之前备份原始*/etc/passwd文件:)*

# asp.net-mvc - 为什么我的 MVC 应用程序中有两个 web.config 文件

> ID：12758126
> 
> 赞同：4
> 
> 时间：2012-10-06T08:31:10.620
> 
> 标签：asp.net-mvc, model-view-controller, iis-7, httphandler

Views 文件夹中有一个。

该应用程序的根目录中还有另一个。

我想注册一个自定义处理程序，但我不明白代码应该去哪里。我在集成模式下运行 IIS7，所以我必须添加一个`<handlers>`标签，`<system.webServer>`但是当我查看 Views 文件夹中的 web.config 时，我发现它使用了一个`<httpHandlers>`under`<system.web>`标签。

所以两个问题：1.为什么一个mvc应用程序中有两个web.config文件？2\. 我应该在哪里以及以什么方式注册我的自定义 HTTP 处理程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T08:53:03.507

您应该在根配置中注册它。Views config 用于配置视图，例如：为所有视图添加命名空间等。

*   [ASP.NET MVC 和两个 Web.config 文件](https://stackoverflow.com/questions/517086/asp-net-mvc-and-two-web-config-files)
*   [为什么有 2 个 web.config 文件](https://stackoverflow.com/questions/1355353/why-are-there-2-web-config-files)

# php - Wordpress 复选框数组

> ID：12758127
> 
> 赞同：0
> 
> 时间：2012-10-06T08:31:11.040
> 
> 标签：php, wordpress

所以我有一个元框......有一个这样的复选框数组：

```
name="my_field[]" value="1"
name="my_field[]" value="2"
name="my_field[]" value="3"
name="my_field[]" value="4"
name="my_field[]" value="5" 
```

当我检查帖子时，它会向我发送所有复选框，而不仅仅是选定的复选框，这就是我需要的，有人鼓励这样做吗？

//LE

wp-content/uploads/2012/10/Abstract_Brush-51610.jpeg

```
 <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/10/Abstract_Wallpapers_35.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/10/Abstract_Wallpapers_35.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/10/Abstract-Desktop-Wallpapers-Mac-Apple-Pictures.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/10/Abstract-Desktop-Wallpapers-Mac-Apple-Pictures.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/09/7.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/09/7.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/09/6.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/09/6.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/09/5.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/09/5.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/09/a6057e6bac44bc179398ed2e2d5d3a2c.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/09/a6057e6bac44bc179398ed2e2d5d3a2c.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/09/2535f67307340667d7e7228115fa517d.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/09/2535f67307340667d7e7228115fa517d.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/09/1680x1050.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/09/1680x1050.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/09/5cf4ba58c8c20201cfaac290fd247d75.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/09/5cf4ba58c8c20201cfaac290fd247d75.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/08/Gibraltar.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/08/Gibraltar.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/08/background_01.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/08/background_01.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/08/bg1.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/08/bg1.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/08/bg_21.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/08/bg_21.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/08/bg.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/08/bg.jpg'  />                            </p>

                        <p>

                                                        </p>

                        <p>
                            <label>wp-content/uploads/2012/08/bg_2.jpg</label>
                            <input type='checkbox' name='choose_from_library[]' value='wp-content/uploads/2012/08/bg_2.jpg'  />                            </p> 
```

//LE $_POST var_dump

```
 array(52) { ["_wpnonce"]=> string(10) "924c761932" ["_wp_http_referer"]=> string(53) "/scai/wp-admin/post-new.php?post_type=backgroundslide" ["user_ID"]=> string(1) "1" ["action"]=> string(8) "editpost" ["originalaction"]=> string(8) "editpost" ["post_author"]=> int(1) ["post_type"]=> string(15) "backgroundslide" ["original_post_status"]=> string(10) "auto-draft" ["referredby"]=> string(84) "wp-admin/post-new.php?post_type=backgroundslide" ["_wp_original_http_referer"]=> string(84) "wp-admin/post-new.php?post_type=backgroundslide" ["auto_draft"]=> string(1) "0" ["post_ID"]=> string(3) "167" ["autosavenonce"]=> string(10) "98077d6315" ["meta-box-order-nonce"]=> string(10) "2d068e8263" ["closedpostboxesnonce"]=> string(10) "552f6efbaa" ["post_title"]=> string(16) "dasdadadadadadad" ["samplepermalinknonce"]=> string(10) "8f1ffd40fb" ["content"]=> string(0) "" ["wp-preview"]=> string(0) "" ["hidden_post_status"]=> string(5) "draft" ["post_status"]=> string(7) "publish" ["hidden_post_password"]=> string(0) "" ["hidden_post_visibility"]=> string(6) "public" ["visibility"]=> string(6) "public" ["post_password"]=> string(0) "" ["mm"]=> string(2) "10" ["jj"]=> string(2) "06" ["aa"]=> string(4) "2012" ["hh"]=> string(2) "08" ["mn"]=> string(2) "40" ["ss"]=> string(2) "43" ["hidden_mm"]=> string(2) "10" ["cur_mm"]=> string(2) "10" ["hidden_jj"]=> string(2) "06" ["cur_jj"]=> string(2) "06" ["hidden_aa"]=> string(4) "2012" ["cur_aa"]=> string(4) "2012" ["hidden_hh"]=> string(2) "08" ["cur_hh"]=> string(2) "08" ["hidden_mn"]=> string(2) "40" ["cur_mn"]=> string(2) "40" ["original_publish"]=> string(7) "Publish" ["publish"]=> string(7) "Publish" ["post_name"]=> string(0) "" ["jw_nonce"]=> string(10) "d9cc45b5e2" ["set_for_page"]=> string(7) "Contact" ["choose_from_library"]=> array(3) { [0]=> string(89) "wp-content/uploads/2012/10/Abstract_Brush-51610.jpeg" [1]=> string(90) "wp-content/uploads/2012/10/Abstract_Wallpapers_35.jpg" [2]=> string(114) "wp-content/uploads/2012/10/Abstract-Desktop-Wallpapers-Mac-Apple-Pictures.jpg" } ["post_mime_type"]=> string(0) "" ["ID"]=> int(167) ["post_content"]=> string(0) "" ["comment_status"]=> string(6) "closed" ["ping_status"]=> string(6) "closed" }
    array(68) { ["_wpnonce"]=> string(10) "924c761932" ["_wp_http_referer"]=> string(53) "/scai/wp-admin/post-new.php?post_type=backgroundslide" ["user_ID"]=> string(1) "1" ["action"]=> string(8) "editpost" ["originalaction"]=> string(8) "editpost" ["post_author"]=> int(1) ["post_type"]=> string(15) "backgroundslide" ["original_post_status"]=> string(10) "auto-draft" ["referredby"]=> string(84) "wp-admin/post-new.php?post_type=backgroundslide" ["_wp_original_http_referer"]=> string(84) "wp-admin/post-new.php?post_type=backgroundslide" ["auto_draft"]=> string(1) "0" ["post_ID"]=> string(3) "167" ["autosavenonce"]=> string(10) "98077d6315" ["meta-box-order-nonce"]=> string(10) "2d068e8263" ["closedpostboxesnonce"]=> string(10) "552f6efbaa" ["post_title"]=> string(16) "dasdadadadadadad" ["samplepermalinknonce"]=> string(10) "8f1ffd40fb" ["content"]=> string(0) "" ["wp-preview"]=> string(0) "" ["hidden_post_status"]=> string(5) "draft" ["post_status"]=> string(7) "publish" ["hidden_post_password"]=> string(0) "" ["hidden_post_visibility"]=> string(6) "public" ["visibility"]=> string(6) "public" ["post_password"]=> string(0) "" ["mm"]=> string(2) "10" ["jj"]=> string(2) "06" ["aa"]=> string(4) "2012" ["hh"]=> string(2) "08" ["mn"]=> string(2) "40" ["ss"]=> string(2) "43" ["hidden_mm"]=> string(2) "10" ["cur_mm"]=> string(2) "10" ["hidden_jj"]=> string(2) "06" ["cur_jj"]=> string(2) "06" ["hidden_aa"]=> string(4) "2012" ["cur_aa"]=> string(4) "2012" ["hidden_hh"]=> string(2) "08" ["cur_hh"]=> string(2) "08" ["hidden_mn"]=> string(2) "40" ["cur_mn"]=> string(2) "40" ["original_publish"]=> string(7) "Publish" ["publish"]=> string(7) "Publish" ["post_name"]=> string(0) "" ["jw_nonce"]=> string(10) "d9cc45b5e2" ["set_for_page"]=> string(7) "Contact" ["choose_from_library"]=> array(3) { [0]=> string(89) "wp-content/uploads/2012/10/Abstract_Brush-51610.jpeg" [1]=> string(90) "wp-content/uploads/2012/10/Abstract_Wallpapers_35.jpg" [2]=> string(114) "wp-content/uploads/2012/10/Abstract-Desktop-Wallpapers-Mac-Apple-Pictures.jpg" } ["post_mime_type"]=> string(0) "" ["ID"]=> int(167) ["post_content"]=> string(0) "" ["comment_status"]=> string(6) "closed" ["ping_status"]=> string(6) "closed" ["choose_from_library_wp-content/uploads/2012/10/abstract_brush-51610.jpeg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/10/abstract_wallpapers_35.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/10/abstract-desktop-wallpapers-mac-apple-pictures.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/09/7.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/09/6.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/09/5.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/09/a6057e6bac44bc179398ed2e2d5d3a2c.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/09/2535f67307340667d7e7228115fa517d.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/09/1680x1050.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/09/5cf4ba58c8c20201cfaac290fd247d75.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/08/gibraltar.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/08/background_01.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/08/bg1.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/08/bg_21.jpg"]=> string(0) "" ["choose_from_library_wp-content/uploads/2012/08/bg.jpg"]=> string(0) "" 

["choose_from_library_wp-content/uploads/2012/08/bg_2.jpg"]=> string(0) "" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:47:29.343

它们都被命名为choose_from_library[]，所以是的，除非您指定只向您发送选中的那些，否则您将收到所有这些。在 jquery 中使用类似这样的内容过滤在发布之前选中的框：

```
$('input[name="choose_from_library"]').is(':checked'); 
```

或者使用您选择的后端语言过滤它的服务器端。

# php - 网站的查看部分加载时间过长

> ID：12758129
> 
> 赞同：1
> 
> 时间：2012-10-06T08:31:21.297
> 
> 标签：php, javascript, performance, smarty

我正在使用 PHP、Smarty 和 MySQL 开发一个网站。加载网站的视图部分需要很长时间。我可以快速获取并查看数据库中的数据，问题出在显示部分。

```
http://jobsgang.com/c0b0dfc2379f0379d546b727/Kerala_jobs/Kozhikode_jobs/Other_Places_in_Kozhikode_jobs/Engineering_Projects_jobs/Engineer_jobs/btech_be_jobs/experienced_jobs/permanent_jobs/We_are_looking_for_Fresh_Talented__Project_Management_Tranies.html 
```

你可以在这里看到来自 php 的数据。它会很快加载，但网站的显示部分需要很长时间。

请帮我解决它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T08:39:47.653

这与 PHP 无关，您在该页面上有一些疯狂的 ajax 调用，就像每秒调用一个不存在的页面一样。

![在此处输入图像描述](../Images/682c7d8e47980226d320852696b728bb.png)

删除以下脚本

```
 <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=xa-506aa6a401ec5bef"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:32:08.633

这是 chrome 的结果，也是它的建议，

```
**Combine external JavaScript (6)**
There are multiple resources served from same domain. Consider combining them into as  
few files as possible.
6 JavaScript resources served from epbkomalpdcfielganbfombgchcdebfg.

**Enable gzip compression (13)**
Compressing the following resources with gzip could reduce their transfer size by about    
two thirds (~638.28KB):
css could save ~188B
container.html could save ~4.37KB
container.css could save ~23.98KB
jquery.js could save ~66.14KB
jsonStringify.js could save ~3.96KB
jquery-ui.custom.js could save ~304.30KB
jquery.additions.js could save ~2.05KB
jquery.batchImageLoad.js could save ~1.44KB
container.js could save ~196.65KB
chrome-extension://epbkomalpdcfielganbfombgchcdebfg/initData.json could save ~1.29KB
xd_arbiter.php could save ~16.80KB
xd_arbiter.php could save ~16.80KB
about.css could save ~305B

**Leverage browser caching (18)**
The following resources are explicitly non-cacheable. Consider making them cacheable if    
possible:
We_are_looking_for_Fresh_Talented__Project_Management_Tranies.html
container.html
container.css
jquery.js
jsonStringify.js
jquery-ui.custom.js
jquery.additions.js
jquery.batchImageLoad.js
container.js
chrome-extension://epbkomalpdcfielganbfombgchcdebfg/initData.json
endSeperator.gif
expend.png
arrow_down.png
addApp.png
seperator.png
xd_arbiter.php
xd_arbiter.php
about.css

**Leverage proxy caching (5)**
The following publicly cacheable resources contain a Set-Cookie header. This security   
vulnerability can cause cookies to be shared by multiple users.
style.css
pagination.css
jquery-1.4.2.min.js
ajaxSignUp.js
all.js

**Minimize cookie size**
The average cookie size for all requests on this page is 27B

**Specify image dimensions (1)**
A width and height should be specified for all images in order to speed up page   
display. The following image(s) are missing a width and/or height:
lock.png (5 uses)
Web Page Performance
**Optimize the order of styles and scripts (4)**
The following external CSS files were included after an external JavaScript file in the   
document head. To ensure CSS files are downloaded in parallel, always include external   
CSS before external JavaScript.
about.css
3 inline script blocks were found in the head between an external CSS file and another   
resource. To allow parallel downloading, move the inline script before the external CSS   
file, or after the next resource.

**Remove unused CSS rules (510)**
78.97KB (88%) of CSS is not used by the current page.
style.css: 17.28KB (78%) is not used by the current page.
pagination.css: 692B (76%) is not used by the current page.
Inline block #1: 3.63KB (88%) is not used by the current page.
Inline block #2: 11.95KB (85%) is not used by the current page.
about.css: 447B (100%) is not used by the current page.
container.css: 31.69KB (92%) is not used by the current page.
Inline block #3: 28B (11%) is not used by the current page.
Inline block #4: 13.28KB (98%) is not used by the current page.

**Use normal CSS property names instead of vendor-prefixed ones (6)**
We_are_looking_for_Fresh_Talented__Project_Management_Tranies.html
about.css
data:text/html,chro…
__________________________  chrome-   
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12120
|         02:05:57         | chrome-
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12121
Init chrome extension communication chrome-  
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12124
__________________________  chrome-  
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12120
|         02:05:57         | chrome-
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12121
Init chrome extension communication chrome-  
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12124
__________________________  container.js:569
|         02:05:59         | container.js:570
Init chrome extension communication container.js:573
__________________________  container.js:569
|         02:05:59         | container.js:570 
Initializing main toolbar container container.js:573
FB.getLoginStatus() called before calling FB.init(). all.js:54
__________________________  chrome-   
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12120
|         02:06:00         | chrome-   
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12121
Init chrome extension communication chrome-   
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12124
__________________________  chrome-  
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12120
|         02:06:00         | chrome-  
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12121
Init chrome extension communication chrome-  
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12124
__________________________  chrome- 
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12120
|         02:06:00         | chrome-  
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12121
Init chrome extension communication chrome-
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12124
__________________________  chrome-
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12120
|         02:06:00         | chrome-  
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12121
Init chrome extension communication chrome-  
extension://epbkomalpdcfielganbfombgchcdebfg/js/contentScript.js:12124 
```

看看红色的文字，

![在此处输入图像描述](../Images/cb24b380121daa4af6b6fab97a103bec.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T08:37:38.610

由于视图部分需要很长时间才能呈现，因此您应该调试：

如果您使用 Smarty 并且有许多要渲染的模板 - 这可能是一个原因。尝试在 smarty 中打开缓存。

还要打开 smarty 调试控制台并检查渲染是否需要大量时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T09:10:03.417

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

这是你的根本问题 all.js 是在弗里茨

# javascript - jQuery event.preventDefault 的 Javascript 本机等效项

> ID：12758139
> 
> 赞同：8
> 
> 时间：2012-10-06T08:32:55.563
> 
> 标签：javascript, jquery

> **可能重复：**
> [event.preventDefault() 与 return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

我不确定，但据我所知，`event.preventDefault`来自`jQuery`. 如果是，我想知道 Javascript 中是否有任何本机等效项做同样的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T08:51:55.593

`preventDefault`是一种 DOM 方法。[请参阅此处](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-cancelation)的 W3C 规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:34:04.107

jQuery 环绕原生 JavaScript 事件对象。 `preventDefault`是 JavaScript 方法。你可以`preventDefault`通过 jQuery 在 jQuery中实现`return false;`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T08:35:47.203

`return false`从*jQuery 事件处理程序*`e.preventDefault`中调用和调用`e.stopPropagation`传递的[jQuery.Event 对象](http://api.jquery.com/category/events/event-object/)实际上是相同 的。

`e.preventDefault()`将防止默认事件发生，`e.stopPropagation()`将防止事件冒泡，`return false`并将两者兼而有之。请注意，此行为与*普通*（非 jQuery）事件处理程序不同，其中，值得注意的是，`return false` [不会*阻止*事件冒泡](http://jsfiddle.net/APQk6/)。

来源：[https ://stackoverflow.com/a/1357151](https://stackoverflow.com/a/1357151)

# c++ - 3D 刚体物理 (OpenGL)

> ID：12758143
> 
> 赞同：0
> 
> 时间：2012-10-06T08:33:25.653
> 
> 标签：c++, physics, rigid-bodies

我正在尝试构建刚体物理引擎。我使用 glm 库作为我的标准数学库。

我面临的问题如下，

*   当我计算相对于力的扭矩时（参见函数calculateTorque()），身体会扭曲和倾斜到一定程度，它会旋转并增大尺寸并且不再可见。但是，当我从扭矩方程中移除力时，我只是随机化（参见 calculateForces()）扭矩值，它工作正常。
*   旋转时，我认为对于四元数和矩阵来说，身体会发生倾斜并且尺寸会略微增加。（不确定惯性计算是否正确，body是立方体）
*   我的碰撞响应也有问题，身体逐渐穿透表面，并且相对于 epsilon 的值没有适当的反应。

PS：AABB - 平面碰撞是借助 Christer Ericson 的 Real Time Collision Detection 一书实现的，刚体物理是借助 Braff 的实现实现的。

这是我的代码。

```
RigidBody::RigidBody(void)
{
}

RigidBody::RigidBody(float height, float width, float depth, int n)
    : height(height), width(width), depth(depth), nrb(n)
{
    objPos = new glm::vec3[n];
    worldPos = new glm::vec3[n];
    initRB();
}

RigidBody::~RigidBody(void)
{
}

void RigidBody::initRB()
{
    dt = 0.01;

    // Mass
    m = 0.5;
    float m_inverse = 1/m;

    // Inertia
    IBody = glm::mat3();
    IWorld = glm::mat3();

    IBody[0][0] = 1.0 / 12.0 * (m * ((height * height) + (depth * depth)));
    IBody[1][1] = 1.0 / 12.0 * (m * ((width * width) + (depth * depth)));
    IBody[2][2] = 1.0 / 12.0 * (m * ((width * width) + (height * height)));

    IBody_inverse = glm::inverse(IBody);

    // CG
    x = glm::vec3(0.0, 0.0, 0.0);

    // Linear Momentum
    P = glm::vec3(0.0, 0.0, 0.0);

    // Linear Velocity
    v = P * m_inverse;

    // Orientation (Matrix)
    R = glm::mat3();

    // Orientation (Quaternion)
    QR = glm::fquat();

    // Use Quaternion Flag
    useQuat = true;

    // Angular Velocity
    w = glm::vec3(1.0, 0.0, 1.0);

    // Angular Momentum
    L = IBody * w;

    // Forces
    rbPhys.gravitational = 9.81;
    rbPhys.viscousdrag = 0.1;
    f = glm::vec3(0.0, -m * rbPhys.gravitational, 0.0);

    // Torque
    t = glm::vec3(0.0, 0.0, 0.0);

    // Collision Flag
    collided = false;
}

void RigidBody::setBodyPos(glm::vec3 *verts)
{
    for(int i=0; i<nrb; i++)
    {
        objPos[i] = verts[i];
    }
}

void RigidBody::calculateBodyToWorld()
{
    for(int i=0; i<nrb; i++){
        worldPos[i] = R * objPos[i] + x;
    }
}

void RigidBody::calculateAABB()
{
    aabb.FindMaxMin(worldPos, nrb);
    max = aabb.GetMaxVertices();
    min = aabb.GetMinVertices();
}

glm::mat3 RigidBody::makeSkewSymmetric(glm::vec3 v)
{
    glm::mat3 result;

    result = glm::mat3(0.0, -v.z, v.y,
                       v.z, 0.0, -v.x,
                       -v.y, v.x, 0.0);

    return result;
}

glm::mat3 RigidBody::orthonormalize(glm::mat3 r)
{
    glm::mat3 result;

    glm::vec3 v1 = glm::vec3(r[0][0], r[1][0], r[2][0]);
    glm::vec3 v2 = glm::vec3(r[0][1], r[1][1], r[2][1]);
    glm::vec3 v3 = glm::vec3(r[0][2], r[1][2], r[2][2]);

    glm::normalize(v1);
    v2 = glm::cross(v3, v1);
    glm::normalize(v2);
    v3 = glm::cross(v1, v2);
    glm::normalize(v3);

    result[0][0] = v1.x;    result[0][1] = v2.x;    result[0][2] = v3.x;
    result[1][0] = v1.y;    result[1][1] = v2.y;    result[1][2] = v3.y;
    result[2][0] = v1.z;    result[2][1] = v2.z;    result[2][2] = v3.z;

    return result;
}

void RigidBody::computeAuxillary()
{
    // Linear Velocity
    float m_inverse = 1/m;
    v = P * m_inverse;

    // Inertia Tensor (World)
    IWorld = R * IBody * glm::transpose(R);
    IWorld_inverse = R * IBody_inverse * glm::transpose(R);     

    // Angular Velocity
    w = IWorld_inverse * L; 

    if(useQuat)
    {
        // Store quaternion in Rotation Matrix
        R = glm::mat3_cast(QR);
    }
}

void RigidBody::calculateForces()
{
    // sine torque to get some spinning action

    t.x = 1.0 * sin(dt*0.9 + 0.5);
    t.y = 1.1 * sin(dt*0.5 + 0.4);
    t.z = 1.2 * sin(dt*0.7 + 0.9);

    // damping torque so we dont spin too fast

    t.x -= 0.2 * w.x;
    t.y -= 0.2 * w.y;
    t.z -= 0.2 * w.z;
}

void RigidBody::calculateTorque()
{
    // Torque about a point p acted on by a force f
    // r = cg + R * p, here p is taken for granted as the center of the cube
    glm::vec3 r = glm::vec3(0.0, 0.0, 0.0);
    glm::vec3 p = glm::vec3(0.0, 0.5 * height, 0.0);
    r = x + (R * p);
    t = glm::cross((r - x),f);
}

void RigidBody::resetForces()
{
    f = glm::vec3(0.0, -m * rbPhys.gravitational, 0.0);
    t = glm::vec3(0.0, 0.0, 0.0);
}

void RigidBody::calculateDerivatives()
{
    rbDerivative.dvdt.x = v.x;
    rbDerivative.dvdt.y = v.y;
    rbDerivative.dvdt.z = v.z;

    if(useQuat)
    {
        glm::fquat wQ;
        wQ.w = 0;
        wQ.x = w.x;
        wQ.y = w.y;
        wQ.z = w.z;
        rbDerivative.dQRdt = glm::normalize(wQ * QR);
    }
    else
    {
        glm::mat3 wR = makeSkewSymmetric(w);
        rbDerivative.dRdt = wR * R;
    }

    rbDerivative.dPdt.x = f.x;
    rbDerivative.dPdt.y = f.y;
    rbDerivative.dPdt.z = f.z;

    rbDerivative.dLdt.x = t.x;
    rbDerivative.dLdt.y = t.y;
    rbDerivative.dLdt.z = t.z;
}

void RigidBody::updateRB()
{
    calculateForces();
    calculateDerivatives();

    x.x += rbDerivative.dvdt.x * dt;
    x.y += rbDerivative.dvdt.y * dt;
    x.z += rbDerivative.dvdt.z * dt;

    if(useQuat)
    {
        QR = QR + rbDerivative.dQRdt * dt;
    }
    else
    {
        R += rbDerivative.dRdt * dt;
        //R = orthonormalize(R); orthornormalize wrong
    }

    P.x += rbDerivative.dPdt.x * dt;
    P.y += rbDerivative.dPdt.y * dt;
    P.z += rbDerivative.dPdt.z * dt;

    L.x += rbDerivative.dLdt.x * dt;
    L.y += rbDerivative.dLdt.y * dt;
    L.z += rbDerivative.dLdt.z * dt;

    computeAuxillary();

    calculateAABB();
}

void RigidBody::renderRB()
{
    calculateBodyToWorld();

    glPushMatrix();
        glColor3f(0.0, 0.0, 0.0);
        glBegin(GL_LINES);
            glVertex3f(max[0], max[1], max[2]);
            glVertex3f(max[0], min[1], max[2]);

            glVertex3f(max[0], max[1], max[2]);
            glVertex3f(min[0], max[1], max[2]); 

            glVertex3f(max[0], max[1], max[2]);
            glVertex3f(max[0], max[1], min[2]);

            glVertex3f(max[0], min[1], max[2]);
            glVertex3f(max[0], min[1], min[2]);

            glVertex3f(max[0], min[1], min[2]);
            glVertex3f(max[0], max[1], min[2]);

            glVertex3f(max[0], min[1], max[2]);
            glVertex3f(min[0], min[1], max[2]);

            glVertex3f(min[0], min[1], max[2]);
            glVertex3f(min[0], max[1], max[2]);

            glVertex3f(min[0], min[1], min[2]);
            glVertex3f(min[0], max[1], min[2]);

            glVertex3f(min[0], min[1], min[2]);
            glVertex3f(min[0], min[1], max[2]); 

            glVertex3f(min[0], min[1], min[2]);
            glVertex3f(max[0], min[1], min[2]);

            glVertex3f(min[0], max[1], min[2]);
            glVertex3f(max[0], max[1], min[2]);

            glVertex3f(min[0], max[1], min[2]);
            glVertex3f(min[0], max[1], max[2]);
        glEnd();

        if(isColliding())
            glColor3f(1.0, 0.0, 0.0);
        else
            glColor3f(0.0, 0.0, 1.0);

        glBegin(GL_QUADS);
            for(int i=0; i<nrb; i++)
            {
                glVertex3f(worldPos[i].x, worldPos[i].y, worldPos[i].z);
            }
        glEnd();
    glPopMatrix();
}

void RigidBody::printDebug()
{
    std::cout<<" "<<std::endl;
    std::cout<<"RIGID BODY DEBUG:"<<std::endl;
    std::cout<<"Height :"<<height<<" "<<"Width :"<<width<<" "<<"Depth :"<<depth<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Mass :"<<m<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Inverse Mass :"<<1/m<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"CG :"<<x.x<<" "<<x.y<<" "<<x.z<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Linear Velocity :"<<v.x<<" "<<v.y<<" "<<v.z<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Linear Momentum :"<<P.x<<" "<<P.y<<" "<<P.z<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Angular Momentum :"<<L.x<<" "<<L.y<<" "<<L.z<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Angular Velocity :"<<w.x<<" "<<w.y<<" "<<w.z<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Torque :"<<t.x<<" "<<t.y<<" "<<t.z<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Force :"<<f.x<<" "<<f.y<<" "<<f.z<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Inertia Body:"<<IBody[0][0]<<" "<<IBody[0][1]<<" "<<IBody[0][2]<<std::endl;
    std::cout<<"             "<<IBody[1][0]<<" "<<IBody[1][1]<<" "<<IBody[1][2]<<std::endl;
    std::cout<<"             "<<IBody[2][0]<<" "<<IBody[2][1]<<" "<<IBody[2][2]<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Inertia Body (Inverse):"<<IBody_inverse[0][0]<<" "<<IBody_inverse[0][1]<<" "<<IBody_inverse[0][2]<<std::endl;
    std::cout<<"                       "<<IBody_inverse[1][0]<<" "<<IBody_inverse[1][1]<<" "<<IBody_inverse[1][2]<<std::endl;
    std::cout<<"                       "<<IBody_inverse[2][0]<<" "<<IBody_inverse[2][1]<<" "<<IBody_inverse[2][2]<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Inertia World:"<<IWorld[0][0]<<" "<<IWorld[0][1]<<" "<<IWorld[0][2]<<std::endl;
    std::cout<<"              "<<IWorld[1][0]<<" "<<IWorld[1][1]<<" "<<IWorld[1][2]<<std::endl;
    std::cout<<"              "<<IWorld[2][0]<<" "<<IWorld[2][1]<<" "<<IWorld[2][2]<<std::endl;
    std::cout<<" "<<std::endl;
    std::cout<<"Inertia World (Inverse):"<<IWorld_inverse[0][0]<<" "<<IWorld_inverse[0][1]<<" "<<IWorld_inverse[0][2]<<std::endl;
    std::cout<<"                        "<<IWorld_inverse[1][0]<<" "<<IWorld_inverse[1][1]<<" "<<IWorld_inverse[1][2]<<std::endl;
    std::cout<<"                        "<<IWorld_inverse[2][0]<<" "<<IWorld_inverse[2][1]<<" "<<IWorld_inverse[2][2]<<std::endl;
    std::cout<<" "<<std::endl;  
    std::cout<<"Rotation (Matrix) :"<<R[0][0]<<" "<<R[0][1]<<" "<<R[0][2]<<std::endl;
    std::cout<<"                 "<<R[1][0]<<" "<<R[1][1]<<" "<<R[1][2]<<std::endl;
    std::cout<<"                 "<<R[2][0]<<" "<<R[2][1]<<" "<<R[2][2]<<std::endl;
    std::cout<<" "<<std::endl;
    if(useQuat)
    {
        std::cout<<"Rotation (Quaternion) :"<<QR.w<<" "<<QR.x<<" "<<QR.y<<" "<<QR.z<<std::endl;
    }
}   

bool AABB::IntersectsPlane(Plane p)
{
    glm::vec3 q;
    float t = 0.0;

    center = max + min;
    center /= 2.0;

    extents = max - center;

    glm::vec3 N = p.getPlaneNormal();

    float r = extents.x * abs(N.x) + extents.y * abs(N.y) + extents.z * abs(N.z);

    float d = glm::dot(N,center) - glm::dot(N,p.getVertex());

    if(abs(d) <= r)
    {
        t = 0.0;
        collisionPoint = center - r * N;
        return true;
    }
    else
    {
        if(glm::dot(N,p.getVertex()) >= 0.0)
        {
            return false;
        }
        else
        {
            float tempR = d > 0.0 ? r : -r;
            t = (tempR + d) - glm::dot(N,center) / glm::dot(N,p.getVertex());
            collisionPoint = center + t * p.getVertex()  - r * N;
            return true;
        }
    }
}

void CollisionManager::CheckPlaneRBCollision(RigidBody *rb, Plane *p, int n) 
{
    AABB aabb;
    glm::vec3 N;

    aabb = rb->aabb;

    for(int j=0; j<6; j++)
    {
        N = p[j].getPlaneNormal();

        if(aabb.IntersectsPlane(p[j]))
        {
            std::cout<<"Collision - Plane "<<j<<std::endl;
            rb->setCollisionFlag(true);
            rb->setCollisionPoint(aabb.GetAABBCollisionPoint());
            rb->setCollisionNormal(glm::normalize(rb->getCollisionPoint()));
            ApplyPlaneRBImpulse(rb);
        }
        else
        {
            rb->setCollisionFlag(false);
        }
    }
}

void CollisionManager::ApplyPlaneRBImpulse(RigidBody *rb)
{
    glm::vec3 j;
    glm::vec3 JN;

    float m_inverse = 1 / rb->getMass();
    glm::vec3 x = rb->getCG();
    glm::mat3 I_inv = rb->getInvInertiaWorldMat();
    glm::vec3 collP = rb->getCollisionPoint();
    glm::vec3 N = rb->getCollisionNormal(); 

    glm::vec3 pa = getCollisionPointVelocity(rb);
    glm::vec3 ra = collP - x;
    glm::vec3 vrel = N * pa;
    glm::vec3 numerator = -(1 + epsilon) * vrel;

    glm::vec3 term1 = glm::vec3(m_inverse, m_inverse, m_inverse);
    glm::vec3 term2 = N * (glm::cross(I_inv * glm::cross(ra,N),ra));
    glm::vec3 denominator = term1 + term2;

    j = numerator / denominator;

    JN = j * N;

    //std::cout<<"Impulse Vector "<<JN.x<<" "<<JN.y<<" "<<JN.z<<std::endl;

    // Apply Impulse
    glm::vec3 P = rb->getLMomentum();
    glm::vec3 L = rb->getAMomentum();

    P += JN;
    L += glm::cross(ra,JN);

    rb->setLMomentum(P);
    rb->setAMomentum(L);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:21:15.420

根据您对问题的描述，听起来您没有对表示刚体旋转的任何矩阵或四元数进行归一化。您`orthonormalize()`定义了一个函数，但我看到您注释掉了调用它的代码。您将需要调用该函数并且您需要使其工作，否则小的数值错误会累积并导致您的对象随着矩阵变得越来越远离正常而增长。

我不知道规范化矩阵的最佳方法是什么，但我的方法（使用 Eigen C++ 库）过去工作得很好。它是这样的：

```
matrix normalize(const matrix & matrix)
{
    matrix result;
    result.row(0) = matrix.row(0) + matrix.row(1).cross(matrix.row(2))/10;
    result.row(1) = matrix.row(1) + matrix.row(2).cross(matrix.row(0))/10;
    result.row(2) = matrix.row(2) + matrix.row(0).cross(matrix.row(1))/10;
    result.row(0).normalize();
    result.row(1).normalize();
    result.row(2).normalize();
    return result;
} 
```

因此，如果您的正交归一化函数不起作用，您可以将其转换为 GLM 并尝试。我的好处是它平等地对待所有轴，但蹩脚的是它有这个没有数学依据的任意数字“10”。此外，结果只会是近似正交的，但如果您的增量旋转足够小并且您在每次旋转后调用此函数，这应该不是问题。

（在我的项目中，我改用四元数并去掉了这个函数。）

# ios - APNS - 一个文件中的多个证书（开发和生产）

> ID：12758146
> 
> 赞同：1
> 
> 时间：2012-10-06T08:33:39.547
> 
> 标签：ios, push-notification, apple-push-notifications

我们正在开发一个**iPhone**应用程序以及一个**iPad**应用程序。它们都有不同的捆绑标识符，但应该接收推送通知。证书的生成方式与苹果编程指南中记录的一样。因此，由于我们确实有四个证书（APNS-Dev-iPhone、APNS-Prod-iPhone、APNS-Dev-iPad、APNS-Prod-iPad），我想知道如何**将这些证书**合并到一个文件中？

问题是，在后端我们只存储用户的设备令牌。决定我们是否在开发模式下工作很容易，但我应该如何**决定使用哪个证书**- ipad 还是 iphone ？

由于我们只有设备令牌，我们不知道用户使用的是 iPad 应用程序还是 iPhone 应用程序，因此**我们无法假设连接到 apns 苹果服务器时使用哪个证书**。

有关如何处理此问题的任何建议？我们是否应该存储更多信息——例如用户发送设备令牌的设备？或者有没有更简单的方法将所有证书合并到一个文件中并将其发送到 apns 苹果服务器？

在此先感谢，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:29:10.290

我有一个类似的问题，并没有找到我认为满意的解决方案。

我们处理它的方式与 tGilani 所描述的类似。我们必须存储某种标识符，以区分通过哪个证书发送特定设备令牌的通知。

我们的问题更进一步，我们可能不得不向不同的应用程序发送通知。这些应用程序可能基于每个租户。因此，创建一个通用应用程序和一个证书对我们不起作用。

如果我能找到一种方法将多个 p12 文件合并到一个 jks 中并继续使用 Java PNS 或 Java APNS 项目之一来发送通知，那将非常方便。

# .net - 与存储库和实体框架分组

> ID：12758147
> 
> 赞同：0
> 
> 时间：2012-10-06T08:33:50.720
> 
> 标签：.net, vb.net, linq, entity-framework-4, repository

我有这个实体框架代码：

```
repository.GetObjectQuery(Of COUNL1)().
     Where(Function(a) a.CDATE >= '2012/01/01' And 
           a.CDATE <= '2012/12/01' And 
           COID = 88 ).
     GroupBy(Function(m) m.CDATE).
     Select(Function(n) New PointXY With {
        .Y = n.Sum(Function(k) k.TOTALVH), 
        .X = n.First().CDATE}).
     ToList() 
```

出现此错误：

```
Only parameterless constructors and initializers are supported in LINQ to Entities. 
```

描述：我想按 CDATE 和 TOTALVH 的总和进行分组，并将其放在 PointXY 类中，像这样

```
PointXY {.Y = Sum(TOTALVH), .X = CDATE}) 
```

sql查询：

```
SELECT        SUM(TOTALVH) AS EXPR1, CDATE
FROM            COUNL1
WHERE        (CDATE >= '2012/01/01') AND (CDATE <= '2012/12/01') AND   (COID  = 88)
GROUP BY CDATE 
```

请帮助我，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:41:46.317

错误信息是：

> LINQ to Entities 仅支持无参数构造函数和初始化程序。

所以去检查你的`PointXY`班级。

如果它没有无参数构造函数......只需添加一个！

```
Public Sub New()
End Sub 
```

# ios - Facebook 断言在 iOS 3.1 sdk 中崩溃

> ID：12758151
> 
> 赞同：1
> 
> 时间：2012-10-06T08:34:07.473
> 
> 标签：ios, facebook, ios5

Facebook 新的 sdk 崩溃

-[FBSession urlSchemeSuffix] 中的断言失败，/Users/clang/tmp/ios-sdk/src/FBSession.m:508 ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“FBSession：只能从单个使用线'

有谁知道为什么会崩溃...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:52:14.613

听起来您正在`FBSession`从多个线程访问您的实例。检查您是否没有从后台线程调用`[FBSession activeSession]`或任何类似的东西（或者您总是从同一个后台线程调用它）。

# c# - 在名称中必须指定过程的所有者 - sql

> ID：12758152
> 
> 赞同：2
> 
> 时间：2012-10-06T08:34:15.527
> 
> 标签：c#, sql, stored-procedures

我编写了 C# 代码，它返回一个`DataTable`. 所有参数，即`Connection, sQuery`具有适当的值。

我仍然收到一个错误：

> *在名称中必须指定过程的所有者，这样可以提高性能*

我用谷歌搜索但一无所获。

这是我的代码：

```
public static DataTable getATM(ref SqlConnection Connection)
{
            DataTable dtReturn;
            string sQuery = "";
            try
            {
                sQuery = "Select ATM From ATM Where Bank=1";
                using (SqlStoredProcedure sspObj = new SqlStoredProcedure(sQuery, Connection, CommandType.Text))
                {
                    dtReturn = sspObj.ExecuteDataTable();

                    sspObj.Dispose();
                }
            }
            catch (Exception xObj)
            {
                dtReturn = new DataTable();
            }

            return dtReturn;
} 
```

`SqlStoredProcedure.cs`：

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Xml;
using System.Diagnostics;

namespace ReflectionIT.Common.Data.SqlClient {

    public class SqlStoredProcedure : IDisposable {
        public static readonly TraceSource TraceSource = new TraceSource("SqlStoredProcedure");
        private static int _eventId = 0;

        private const string _returnValue = "ReturnValue";
        private SqlCommand _command;
        private bool _connectionOpened = false;

        public SqlStoredProcedure(string name, SqlConnection connection, CommandType comtype)
            : this(name, connection, null, comtype) {
        }

        public SqlStoredProcedure(string name, SqlConnection connection, SqlTransaction transaction, CommandType comtype) {
            if (name.IndexOf('.') == -1) {
                throw new ArithmeticException("In the name the owner of a procedure must be specified, this improves performance");
            }
            _command = new SqlCommand(name, connection, transaction);
            _command.CommandTimeout = 0;
            _command.CommandType = comtype;
            AddReturnValue();
        }

        public void Dispose() {
            if (_command != null) {
                _command.Dispose();
                _command = null;
            }
        }

        virtual public string Name {
            get { return _command.CommandText; }
            set { _command.CommandText = value; }
        }

               virtual public int Timeout {
            get { return _command.CommandTimeout; }
            set { _command.CommandTimeout = value; }
        }
        virtual public SqlCommand Command {
            get { return _command; }
        }

        virtual public SqlConnection Connection {
            get { return _command.Connection; }
            set { _command.Connection = value; }
        }

        virtual public SqlTransaction Transaction {
            get { return _command.Transaction; }
            set { _command.Transaction = value; }
        }

        virtual public SqlParameterCollection Parameters {
            get { return _command.Parameters; }
        }

        virtual public int ReturnValue {
            get { return (int)_command.Parameters[_returnValue].Value; }
        }

        virtual public SqlParameter AddParameter(string parameterName,
            SqlDbType dbType,
            int size,
            ParameterDirection direction) {
            SqlParameter p;

            if (size > 0) {
                p = new SqlParameter(parameterName, dbType, size);
            } else {
                // size is automacally detected using dbType
                p = new SqlParameter(parameterName, dbType);
            }

            p.Direction = direction;

            Parameters.Add(p);
            return p;
        }

        virtual public SqlParameter AddParameterWithValue(string parameterName,
            SqlDbType dbType,
            int size,
            ParameterDirection direction,
            object value) {

            SqlParameter p = this.AddParameter(parameterName, dbType, size, direction);

            if (value == null) {
                value = DBNull.Value;
            }

            p.Value = value;

            return p;
        }

        virtual public SqlParameter AddParameterWithStringValue(string parameterName,
            SqlDbType dbType,
            int size,
            ParameterDirection direction,
            string value,
            bool emptyIsDBNull) {

            SqlParameter p = this.AddParameter(parameterName, dbType, size, direction);

            if (value == null) {
                p.Value = DBNull.Value;
            } else {
                value = value.TrimEnd(' ');
                if (emptyIsDBNull && value.Length == 0) {
                    p.Value = DBNull.Value;
                } else {
                    p.Value = value;
                }
            }

            return p;
        }

        virtual protected SqlParameter AddReturnValue() {
            SqlParameter p = Parameters.Add(
                new SqlParameter(_returnValue,
                    SqlDbType.Int,
                /* int size */ 4,
                    ParameterDirection.ReturnValue,
                /* bool isNullable */ false,
                /* byte precision */ 0,
                /* byte scale */ 0,
                /* string srcColumn */ string.Empty,
                    DataRowVersion.Default,
                /* value */ null));

            return p;
        }

        virtual public int ExecuteNonQuery() {
            int rowsAffected = -1;

            try {
                Prepare("ExecuteNonQuery");

                rowsAffected = _command.ExecuteNonQuery();

                TraceResult("RowsAffected = " + rowsAffected.ToString());
            } catch (SqlException e) {
                throw TranslateException(e);
            } finally {
                CloseOpenedConnection();
            }
            return rowsAffected;
        }

        virtual public SqlDataReader ExecuteReader() {
            SqlDataReader reader;
            try {
                Prepare("ExecuteReader");

                reader = _command.ExecuteReader();

                TraceResult(null);
            } catch (SqlException e) {
                throw TranslateException(e);
            } finally {
                CloseOpenedConnection();
            }
            return reader;
        }

        virtual public SqlDataReader ExecuteReader(CommandBehavior behavior) {
            SqlDataReader reader;
            try {
                Prepare("ExecuteReader");

                reader = _command.ExecuteReader(behavior);

                TraceResult(null);
            } catch (SqlException e) {
                throw TranslateException(e);
            } finally {
                CloseOpenedConnection();
            }
            return reader;
        }

        virtual public object ExecuteScalar() {
            object val = null;

            try {
                Prepare("ExecuteScalar");

                val = _command.ExecuteScalar();

                TraceResult("Scalar Value = " + Convert.ToString(val));
            } catch (SqlException e) {
                throw TranslateException(e);
            } finally {
                CloseOpenedConnection();
            }
            return val;
        }

        virtual public XmlReader ExecuteXmlReader() {
            XmlReader reader;

            try {
                Prepare("ExecuteXmlReader");

                reader = _command.ExecuteXmlReader();

                TraceResult(null);
            } catch (SqlException e) {
                throw TranslateException(e);
            } finally {
                CloseOpenedConnection();
            }
            return reader;
        }

        virtual public DataSet ExecuteDataSet() {
            DataSet dataset = new DataSet();

            this.ExecuteDataSet(dataset);

            return dataset;
        }

        virtual public DataSet ExecuteDataSet(DataSet dataSet) {
            try {
                Prepare("ExecuteDataSet");

                SqlDataAdapter a = new SqlDataAdapter(this.Command);
                a.Fill(dataSet);

                TraceResult("# Tables in DataSet = " + dataSet.Tables.Count);
            } catch (SqlException e) {
                throw TranslateException(e);
            } finally {
                CloseOpenedConnection();
            }
            return dataSet;
        }

        virtual public DataTable ExecuteDataTable() {
            DataTable dt = null;
            try {
                Prepare("ExecuteDataTable");

                SqlDataAdapter a = new SqlDataAdapter(this.Command);
                dt = new DataTable();
                a.Fill(dt);

                TraceResult("# Rows in DataTable = " + dt.Rows.Count);
            } catch (SqlException e) {
                throw TranslateException(e);
            } finally {
                CloseOpenedConnection();
            }

            return dt;
        }

        protected Exception TranslateException(SqlException ex) {
            Exception dalException = null;

            SqlStoredProcedure.TraceSource.TraceEvent(TraceEventType.Error, _eventId, "{0} throwed exception: {1}", this.Name, ex.ToString());

            foreach (SqlError error in ex.Errors) {
                if (error.Number >= 50000) {
                    dalException = new DalException(error.Message, ex);
                }
            }

            if (dalException == null) {
                switch (ex.Number) {
                    case 17:                    
                    case 4060:                    
                    case 18456:              
                        dalException = new DalLoginException(ex.Message, ex);
                        break;
                    case 547:                      
                        dalException = new DalForeignKeyException(ex.Message, ex);
                        break;
                    case 1205:                  
                        dalException = new DalDeadLockException(ex.Message, ex);
                        break;
                    case 2627:
                    case 2601:                        
                        dalException = new DalUniqueConstraintException(ex.Message, ex);
                        break;
                    default:                  
                        dalException = new DalException(ex.Message, ex);
                        break;
                }
            }         
            return dalException;
        }

        protected void Prepare(string executeType) {
            _eventId++;
            if (_eventId > ushort.MaxValue) {
                _eventId = 0;
            }

            SqlStoredProcedure.TraceSource.TraceEvent(TraceEventType.Information, _eventId, "{0}: {1}", executeType, this.Name);

            TraceParameters(true);

            if (_command.Connection.State != ConnectionState.Open) {
                _command.Connection.Open();
                _connectionOpened = true;
            }
        }

        private void TraceParameters(bool input) {
            if (SqlStoredProcedure.TraceSource.Switch.ShouldTrace(TraceEventType.Verbose) && this.Parameters.Count > 0) {
                foreach (SqlParameter p in this.Parameters) {
                    bool isInput = p.Direction != ParameterDirection.ReturnValue && p.Direction != ParameterDirection.Output;
                    bool isOutput = p.Direction != ParameterDirection.Input;
                    if ((input && isInput) || (!input && isOutput)) {
                        SqlStoredProcedure.TraceSource.TraceEvent(TraceEventType.Verbose, _eventId, "SqlParamter: Name = {0}, Value = '{1}', Type = {2}, Size = {3}", p.ParameterName, p.Value, p.DbType, p.Size);
                    }
                }
            }
        }

        protected void CloseOpenedConnection() {
            if ((_command.Connection.State == ConnectionState.Open) & _connectionOpened)
                _command.Connection.Close();
        }

        protected void TraceResult(string result) {
            if (result != null) {
                SqlStoredProcedure.TraceSource.TraceEvent(TraceEventType.Verbose, _eventId, "Result: {0}", result);
            }

            TraceParameters(false);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:19:54.163

`SqlStoredProcedure()`正在检查您的存储过程名称中是否有一个点，如果没有抛出该异常，请在您的存储过程名称前加上“dbo”。或者不管它是什么，例如：

```
dbo.myProcedureName 
```

从某种意义上说，它提高了性能，因为 SQL 不必首先搜索所有用户来查找 proc。

# javascript - 如何在控制器中动态注入依赖

> ID：12758157
> 
> 赞同：44
> 
> 时间：2012-10-06T08:34:40.057
> 
> 标签：javascript, angularjs, dependency-injection

我仍然是 Angularjs 的新手。我想在我的控制器中动态注入服务（我创建的）的依赖项。

但是，当我编写具有依赖项的服务时，我得到了这个错误：

*错误：未知提供程序：$windowProvider <- $window <- base64*

这是控制器的代码。

```
var base64 = angular.injector(['servicesModule']).get('base64');
console.log("base64", base64.encode("my text will be encoded")); 
```

此代码有效：

```
var servicesModule = angular.module('servicesModule', []);
servicesModule.factory('base64', function() {
    return {

        name: 'base64',
        readonly: false,

        encode: function(input) {
            return window.btoa(input);
        },

        decode: function(input) {
            return window.atob(input);
        }

    };

}); 
```

此代码不起作用：

```
var extModule = angular.module('ext', []);
extModule.factory('base64', ['$window', function($window) {
    return {

        name: 'base64',
        readonly: false,

        encode: function(input) {
            return $window.btoa(input);
        },

        decode: function(input) {
            return $window.atob(input);
        }

    };

}]); 
```

另一个问题是当服务与控制器在同一个模块中时。如果模块有依赖项，我就不起作用（我的模块配置中有 $routeProvider 依赖项）：

*错误：未知提供者：来自 mainModule 的 $routeProvider*

```
var mainModule = angular.module('main', [],
    function($routeProvider, $locationProvider) {
        //Some routing code
    }
); 
```

**JS小提琴**

具有依赖项的相同模块（控制器 + 服务）：http: [//jsfiddle.net/yrezgui/YedT2/](http://jsfiddle.net/yrezgui/YedT2/)

具有依赖关系的不同模块：http: [//jsfiddle.net/yrezgui/YedT2/4/](http://jsfiddle.net/yrezgui/YedT2/4/)

没有依赖关系的不同模块：http: [//jsfiddle.net/yrezgui/YedT2/5/](http://jsfiddle.net/yrezgui/YedT2/5/)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-07T04:27:14.497

不要调用 angular.injector() - 这会创建一个新的注入器。相反，将已经创建的`$injector`注入控制器并使用它：

所以而不是：

```
var algoController = function($scope) {
    $scope.base64 = angular.injector(['main']).get('base64');
}; 
```

做这个：

```
var algoController = function($scope, $injector) {
    $scope.base64 = $injector.get('base64');
}; 
```

但大多数时候你应该直接注入你的服务，而不是像这样动态注入：

```
var algoController = function($scope, base64) {
    $scope.base64 = base64;
}; 
```

另请参阅[AngularJS 动态注入范围或控制器](https://stackoverflow.com/questions/14415845/angularjs-dynamically-inject-scope-or-controller)

# javascript - 如何获取当前日期和提供的jquery日期之间的天数

> ID：12758159
> 
> 赞同：1
> 
> 时间：2012-10-06T08:34:54.037
> 
> 标签：javascript

我想计算提供的日期和当前日期之间的天数。我正在使用以下 javascript，但我得到了错误的结果。

```
function getcabin(saildates) {
    var d = new Date();

    var month = d.getMonth()+1;
    var day = d.getDate();

    var output = d.getFullYear() + '-' + month + '-' + day;
    alert(daydiff(parseDate(output), parseDate(saildates)));
}
function parseDate(str) {
    var mdy = str.split('-')
    return new Date(mdy[2], mdy[0]-1, mdy[1]);
}

function daydiff(first, second) {
    return (second-first)/(1000*60*60*24)
} 
```

谁能指出错误或如何做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:52:58.213

新日期的语法是

> 新日期（年，月，日[，小时，分钟，秒，毫秒]）

另一方面，您在 getcabin 中将月份添加 1，但在 parseDate 中将 -1 添加到年份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:01:22.923

在您的代码中，在新的 Date 函数中传递参数时出错。

语法是：

```
 new Date(year,month,day[,hour,minute,second,millisecond]); 
```

修改后的代码：

```
function getcabin(saildates)
{
    var d = new Date();
    var month = d.getMonth()+1;
    var day = d.getDate();

    var output = d.getFullYear() + '-' + month + '-' + day;
    alert(daydiff(parseDate(output), parseDate(saildates)));
}
function parseDate(str)
{
    var mdy = str.split('-')
    return new Date(mdy[0], mdy[1]-1, mdy[2]);
}

function daydiff(first, second) {
    return (second-first)/(1000*60*60*24)
}
getcabin("2012-10-8")
​ 
```

这将提醒正确的日期值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:04:16.763

在这里，您使用的是格式`yyyy-mm-dd`：

```
var output = d.getFullYear() + '-' + month + '-' + day; 
```

在这里，您将其解析为`mm-dd-yyyy`：

```
return new Date(mdy[2], mdy[0]-1, mdy[1]); 
```

要格式化日期以使其适合解析器：

```
var output = month + '-' + day + '-' d.getFullYear(); 
```

如果要将其解析为`yyyy-mm-dd`：

```
return new Date(mdy[0], mdy[1]-1, mdy[2]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T09:50:28.077

你可以试试这个功能

```
function getDayDiff(date) {
     return parseInt(((new Date()) - date)/(1000*60*60*24))
} 
```

因此，如果您尝试找出与一年中的第一天的日差

```
getDayDiff(new Date(2012,0,1)) 
```

你得到的结果是`279`天

# asp.net - 使用唯一信息保护会话

> ID：12758168
> 
> 赞同：0
> 
> 时间：2012-10-06T08:35:47.500
> 
> 标签：asp.net, session, security, owasp, session-hijacking

为了避免用户登录后的会话劫持，我可以在登录过程中**依靠哪些信息**来验证确实是合法用户。这样拦截会话中继的人就会失效

他们的 IP 地址和浏览器信息是否足够好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T04:16:17.077

> 他们的 IP 地址和浏览器信息是否足够好？

绝对**不是**。IP 地址可以被[欺骗](http://untraceableman.blogspot.com/2009/01/how-to-spoof-your-ip-address-and-how-it.html)，浏览器可以改装成穷人的 metasploit 工具包。请参阅[海报](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB8QFjAA&url=http%3A%2F%2Fcode.google.com%2Fp%2Fchrome-poster%2F&ei=KAFxUJyrEKjr0gHdv4DgBw&usg=AFQjCNFAkRpDLuPnHteXWh47us4rVyyI_g&sig2=Fv1Dy4rJe-VIW1bnrHzXnA)工具。

[OWASP](http://www.owasp.org)项目对保护会话令牌和其他与一般 Web 应用程序安全相关的好东西有[很好](https://www.owasp.org/index.php/Session_Management_Cheat_Sheet#Cookies)的指导。

不信任**任何**不是从您的 Web 应用程序服务器的安装文件夹中开始的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:48:20.737

您可以要求用户在执行重要操作（例如更改电子邮件地址）之前重新进行身份验证（再次输入密码）。没有针对会话劫持的万无一失的保护，您需要选择以安全的名义准备牺牲多少可用性。

# php - 查询所有wordpress帖子标题

> ID：12758173
> 
> 赞同：1
> 
> 时间：2012-10-06T08:36:43.433
> 
> 标签：php, javascript, mysql, ajax, wordpress

我正在使用 Wordpress 自动建议使用[这段](http://www.cssjockey.com/web-design-tutorials/enable-auto-complete-search-in-wordpress-blog)代码

目前它正在搜索所有标签，我希望它只搜索帖子标题。任何帮助表示赞赏。

这是调用所有帖子需要修改的所有标签的 sql 查询。

```
 <?php global $wpdb;
 $search_tags = $wpdb->get_results("SELECT name from wp_terms WHERE name LIKE '$search%'");
 foreach ($search_tags as $mytag)
   {
     echo $mytag->name. " "; 
   }
  ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T00:33:41.763

这些天我不得不在 wordpress 主题中做一些请求。在您的情况下（获取标题比获取标签更容易，如您的示例链接中所示），这些事情可以更容易完成（我猜）。

首先，您必须创建一个 php 页面来获取帖子。你可能知道你不能在独立的 php 文件中使用 wp 的东西，所以你的文件（让我们称之为**get_posts.php**）看起来像

```
<?php
  // Include the file above for being able to use php stuff
  // In my case this file was in a folder inside my theme ( my_theme/custom_stuff/get_posts.php ).
  // According to this file position you can modify below path to achieve wp-blog-header.php from wp root folder
  include( '../../../../wp-blog-header.php' ); 

  // Get all published posts. 
  $list_posts = get_posts( array( 'numberposts' => -1 ) );

  // Get "q" parameter from plugin
  $typing = strtolower( $_GET["q"] );

  //Save all titles
  $list_titles = array();
  foreach( $list_posts as $post ) { $list_titles[] = $post->post_title; }

  // To see more about this part check search.php from example
  foreach( $list_titles as $title ) {
    if( strpos( strtolower( $title ), $typing ) ){
      echo $title;
    }
  }

?> 
```

我添加了一些评论，试图更好地帮助你。

现在事情变得简单了，你只需要通过 jQuery 插件调用你的页面，比如

```
$('#yourInput').autocomplete( "path_to/get_posts.php" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T08:44:53.960

您可以直接使用 wordpress 内置功能来获取所有帖子标题

```
// The Query
query_posts( 'posts_per_page=-1' );

// The Loop
while ( have_posts() ) : the_post();
    echo '<li>';
    the_title();
    echo '</li>';
endwhile; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-17T09:10:16.537

这里的答案都没有回答你真正的问题：

# 如何查询 JUST 帖子标题

## “原始 SQL”方式：

几个重要的事情：

*   **逃避对 SQL 的搜索！**（对于标签搜索也这样做！）使用`$GLOBALS['wpdb']->esc_like()`
*   如果您只需要 1 列，则可以使用`$GLOBALS['wpdb']->get_col()`
    `$GLOBALS['wpdb']->get_results()`is 如果您想在一行中获取更多列
*   用于`$GLOBALS['wpdb']->tableBaseName`使您的代码可移植 - 处理**前缀**
    ，例如`$GLOBALS['wpdb']->posts`
*   查询帖子时，您还必须考虑要查询的**post_type**和**post_status**
    => 通常`post_status`您想要的是`publish`，但`post_type`可能会因您想要的内容而异
*   WordPress 表“帖子”包含所有帖子类型 - 帖子、页面、自定义，**还包括导航、联系表格等！**=> 我强烈建议`post_type`在 WHERE 中使用显式条件！:)

...`$GLOBALS`与全球化变量相同-今天的性能差异很小

```
<?php
  // to get ALL published post titles of ALL post types (posts, pages, custom post types, ...
  $search_post_titles = $GLOBALS['wpdb']->get_col(
    "SELECT post_title from {$GLOBALS['wpdb']->posts}
     WHERE (
       (post_status = 'publish')
       AND
       (post_title LIKE '{$GLOBALS['wpdb']->esc_like($search)}%') 
     )
     ORDER BY post_title ASC
  "); // I also added ordering by title (ascending)
  // to only get post titles of Posts(Blog)
  // you would add this to conditions inside the WHERE()
  // AND (post_type = 'post')
  // for Posts&Pages
  // AND ((post_type = 'post') OR (post_type = 'page'))

  // test output:
  foreach ($search_post_titles as $my_title) {
   echo $my_title . " "; 
  }

?> 
```

## WP_Query 方式

这是更多的 wordpress，但有一点开销，因为虽然/有一个`fields`参数，但它只有选项： 'all' - 所有字段（也是默认值），'ids' - 只是 ids，'id=>parent' - 。 ..如果你通过其他任何东西，*你仍然会得到 all*，所以你仍然需要添加“all”**但是**- WP 但是有用于更改 SELECT 中的字段的过滤器。`new WP_Query()``get_posts()`

 ***我试图使它与原始 SQL 版本相同，**但这取决于 WP 如何进行“搜索”** ——我认为这是`%search%`1 个单词 + 如果有更多单词，则需要更多逻辑。您可以**利用`$clauses`用于`fields`添加自定义的过滤器来代替添加到*`'s'``$args`****的位置（请记住附加到不丢失现有的 WHEREs ***）***`$clauses['where' .= "AND ...;`。在`post_type => 'any'` *导航、联系表格等情况下，也不总是产生与原始查询相同的结果......**

 *WP_Query 还清理输入变量，所以实际上不要逃避`$args`！

```
<?php
  $args = [
      'fields' => 'all', // must give all here and filter SELECT(fields) clause later! 
      'posts_per_page'   => -1, // -1 == get all
      'post_status'      => 'publish',
      's'                => $search,
      // I also added ordering by title (ascending):
      'orderby'          => 'title',
      'order'            => 'ASC',
      'post_type'        => 'any', // all "normal" post types
      // 'post_type'     => 'post', // only "blog" Posts
      // 'post_type'     => ['post', 'page'], // only blog Posts & Pages   
  ];

  $onlyTitlesFilter = function($clauses, $query) {
        // "fields" overrides the column list after "SELECT" in query
        $clauses['fields'] = "{$GLOBALS['wpdb']->posts}.post_title";

        return $clauses; // !FILTER! MUST RETURN!
  };
  $onlyTitlesFilterPriority = 999;

  // add filter only for this query
  add_filter('posts_clauses', $onlyTitlesFilter, $onlyTitlesFilterPriority, 2);
  // Pro-tip: don't use variable names like $post, $posts - they conflict with WP globals!
  $my_posts = (new WP_Query($args))->get_posts();

  // !IMPORTANT!
  // !remove the filter right after so we don't affect other queries!
  remove_filter('posts_clauses', $onlyTitlesFilter, $onlyTitlesFilterPriority);

  // test output:
  // note that I used "my"_post NOT just $post (that's a global!)
  foreach($my_posts as $my_post) {
    echo $my_post->post_title . " ";
  }

?> 
```

不要混淆 - 你仍然会得到数组`WP_Posts`- WP 会向其中抛出一些默认属性和值，但实际上它只会查询和填写你在过滤器中指定的字段的真实值。

PS：我已经测试过这些 - 它们是工作代码（至少在 WP 5.4 和 PHP7 上 :)）****

# ruby-on-rails - 如何更新 Rails 应用程序并避免浏览器的旧缓存？

> ID：12758175
> 
> 赞同：0
> 
> 时间：2012-10-06T08:37:34.627
> 
> 标签：ruby-on-rails

在开发我的 chess rails 应用程序期间，我遇到过几次在下次访问时更新我的​​ Rails 应用程序后，Chrome 浏览器显示棋盘损坏，并且在浏览器中点击刷新并没有解决问题。我不得不手动禁用 Chrome 中的缓存并刷新以修复问题。也许关于棋盘div的css的东西被搞砸了，我不知道。抱歉，我没有更详细的问题报告。

如果这在开发过程中发生在我身上，那么我网站的用户肯定会遇到这个旧的缓存问题并看到一个损坏的网站。有谁知道发生了什么以及如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:33:43.580

在 Rails 3.2 中，资产管道负责 CSS 和 JS 的缓存。

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

请查看上面的链接以进行检查。如果您不使用 Rails 3.2，请使用某种指纹技术撤消缓存。

# asp.net-mvc - 为什么我的网址显示所有索引操作？

> ID：12758177
> 
> 赞同：0
> 
> 时间：2012-10-06T08:37:40.480
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-routing

在我的 asp.net mvc 项目中，所有链接都显示索引操作，例如：

> localhost:1559/Home/Index
> localhost:1559/about-us/Index
> localhost:1559/contact-us/Index
> localhost:1559/portfolio/Index

为什么它不隐藏索引操作？

我想这样展示：

> localhost:1559/首页
> localhost:1559/about-us
> localhost:1559/contact-us
> localhost:1559/portfolio

这是我的全局文件代码：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.Add(
            new Route("{controller}/{action}/{Q1}/{Q2}",
                new RouteValueDictionary(
                    new { controller = "Home", action = "Index", Q1 = UrlParameter.Optional, Q2 = UrlParameter.Optional }),
                    new HyphenatedRouteHandler())
            );
            routes.Add(
            new Route("{controller}/{action}/{Q1}",
                new RouteValueDictionary(
                    new { controller = "Home", action = "Index", Q1 = UrlParameter.Optional }),
                    new HyphenatedRouteHandler())
            );
            routes.Add(
            new Route("{controller}/{action}",
                new RouteValueDictionary(
                    new { controller = "Home", action = "Index"}),
                    new HyphenatedRouteHandler())
            );
        } 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:45:58.573

代替

```
new Route("{controller}/{action}/{Q1}", 
```

利用

```
new Route("{controller}/{Q1}", 
```

对于每一个（您必须进行调整以适应参数）。

发生这种情况的原因是因为您的操作称为“索引”。因此，您的路线使用“索引”操作的名称填充占位符 {action}。

# c - 中断处理程序是否像这样运行，运行多长时间？

> ID：12758182
> 
> 赞同：3
> 
> 时间：2012-10-06T08:39:06.130
> 
> 标签：c, embed, interrupt, interrupt-handling

在查看中断处理程序（ISR）的运行方式时，我有些困惑。在 Wiki [http://en.wikipedia.org/wiki/Context_switch](http://en.wikipedia.org/wiki/Context_switch)中，它通过 2 个步骤描述了中断处理：

1）上下文切换

```
When an interrupt occurs, the hardware automatically switches a part of the 
context (at least enough to allow the handler to return to the interrupted code).
The handler may save additional context, depending on details of the particular
hardware and software designs. 
```

2）运行处理程序

```
The kernel does not spawn or schedule a special process to handle interrupts, 
but instead the handler executes in the (often partial) context established at 
the beginning of interrupt handling. Once interrupt servicing is complete, the 
context in effect before the interrupt occurred is restored so that the 
interrupted process can resume execution in its proper state. 
```

假设中断处理程序是上半部分，用于内核空间设备驱动程序（我假设用户空间设备驱动程序中断遵循相同的逻辑）。

当中断发生时：

1) 当前内核进程被挂起。但`context`这里的情况如何？根据 Wiki 的描述，内核不会产生新的进程来运行 ISR，而且`context established at the beginning of interrupt handling`, 听起来很像被中断进程中的另一个函数调用。那么中断处理程序是否使用`interrupted process`'s stack(context) 来运行？或者内核会分配一些其他内存空间/资源来运行它？

2) 因为这里的 ISR 不是可以被调度程序置于睡眠状态的“进程”类型。无论如何都必须完成？甚至不受任何时间片的限制？如果 ISR 挂了怎么办，系统如何处理？

对不起，如果这个问题是基本的。我对这个主题的研究时间还不够长。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:59:52.070

> 那么中断处理程序是否使用被中断进程的堆栈（上下文）来运行？或者内核会分配一些其他内存空间/资源来运行它？

这取决于 CPU 和内核。一些 CPU 使用当前堆栈执行 ISR。其他人会自动切换到特殊的 ISR 堆栈或内核堆栈。如果需要，内核也可以切换堆栈。

> 因为这里的 ISR 不是可以被调度程序置于睡眠状态的“进程”类型。无论如何都必须完成？

是的，否则你冒着挂起电脑的风险。你看，中断中断进程和线程。事实上，大多数 CPU 没有线程或进程的概念，对它们来说，中断/抢占什么并不重要（它甚至可以是另一个 ISR！），它只是在 ISR 完成之前不会再次执行。

> 甚至不受任何时间片的限制？如果 ISR 挂了怎么办，系统如何处理？

它挂起，特别是如果它是单 CPU 系统。它可能会报告错误，然后挂起/重新启动。事实上，在 Windows 中（从 Vista 开始？）挂起或执行延迟过程太慢`DPCs`（ . 操作系统监视 DPC 的执行，它可以在多个 CPU 上同时执行此操作。

无论如何，这不是正常情况，通常除了系统重置之外别无他法。抬头看`watchdog timers`。它们有助于发现此类不良挂起并执行重置。许多电子设备都有它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:47:41.500

1.  将中断处理程序视为在其自己的线程中以高优先级运行的函数。当设备设置中断时，任何其他优先级最低的活动都将暂停，并执行 ISR。这就像线程上下文切换。

2.  当 ISR 挂起时（例如，在无限循环中），整个计算机都会挂起 - 假设我们正在谈论 PC 驱动程序中的 ISR。不允许任何具有低于该 ISR 优先级的活动，因此计算机看起来已死机。但是，如果附加了硬件远程调试器命令，它仍然会对硬件远程调试器命令作出反应。

# regex - vb.net 简单的正则表达式查询

> ID：12758186
> 
> 赞同：0
> 
> 时间：2012-10-06T08:40:09.410
> 
> 标签：regex, vb.net

我正在尝试学习如何使用正则表达式从字符串中删除除字母数字和 : 之外的所有乱码。和换行符，不管它是什么。

我正在使用这个

```
TextBox1.Text = Regex.Replace(TextBox1.Text, "[^:.0-9a-zA-Z ]+?", "") 
```

但是我的结果似乎也删除了所有换行符，我认为这是什么？在正则表达式查询的末尾，告诉它从替换中排除换行符？

感谢您的输入家伙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:44:49.173

它应该是

```
[^:.0-9a-zA-Z\r\n]+ 
```

`?`不需要

# http - cookie 的域属性是否发送回服务器？

> ID：12758187
> 
> 赞同：3
> 
> 时间：2012-10-06T08:40:09.307
> 
> 标签：http, cookies, browser, security

如果 evil.example.com 设置了一个域属性设置为 .example.com 的 cookie，浏览器将在对 foo.example.com 的请求中包含此 cookie。

[The Tangled Web](http://lcamtuf.coredump.cx/tangled/)指出，对于 foo.example.com，此类 cookie 在很大程度上与 foo.example.com 设置的 cookie 没有区别。但是根据[RFC](https://www.ietf.org/rfc/rfc2109.txt)，cookie 的域属性应该被发送到服务器，这将使 foo.example.com 可以区分和拒绝由 evil.example.com 设置的 cookie。

当前浏览器实现的状态是什么？域是否与 cookie 一起发回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T13:48:06.807

RFC 2109 和 RFC 2965 是标准化 cookie 处理的历史尝试。不幸的是，它们与浏览器实际所做的没有相似之处，应该完全忽略。

真实世界的行为主要是由最初的 Netscape cookie_spec 定义的，但这作为一个规范是非常有缺陷的，这导致了一系列浏览器的差异，大约 -

*   接受哪些日期格式；
*   当多个匹配项时如何处理同名 cookie；
*   非 ASCII 字符如何工作（或不工作）；
*   引用/转义；
*   域匹配是如何完成的。

RFC 6265 试图清理这些混乱并明确规定浏览器应该做什么。它并没有说浏览器应该发送`domain`or `path`，因为历史上没有浏览器这样做过。

因为您无法检测到 cookie 来自父级`domain`(*)，所以如果您想将 cookie 分开，您必须注意主机名以避免重叠域 - 特别是对于 IE，即使您不这样做set `domain`，设置的 cookie`example.com`将始终继承到`foo.example.com`.

所以：如果您认为将来可能想要一个带有单独 cookie 的子域（不应该能够从其父级读取敏感 cookie），请不要为您的站点使用“无 www”主机名；如果您确实需要一个完全独立的 cookie 上下文，以防止`evil.example.com`将 cookie 值注入其他`example.com`站点，那么您别无选择，只能使用完全独立的域名。

可能对某些攻击模型有效的替代方法是对您生成的每个 cookie 值进行签名，例如使用[HMAC](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)。

*：有一种方法。尝试*删除*与您想要的 cookie 具有相同`domain`和`path`设置的 cookie。如果你这样做时 cookie 消失了，那么它一定有这些`domain`和`path`设置，所以原来的 cookie 是可以的。如果那里还有一个 cookie，它来自其他地方，你可以忽略它。如果没有 JavaScript，这样做很不方便，不切实际，而且不是无懈可击的，因为原则上攻击者可能会同时删除他们注入的 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:13:45.313

cookie 的当前标准是[RFC 6265](https://www.rfc-editor.org/rfc/rfc6265)。这个版本简化了`Cookie:`标题。浏览器只发送 cookie`name=value`对，而不是域等属性。有关此标头的规范，请参阅 RFC 的第 4.2 节。此外，请参阅第 8.6 节，**弱完整性**，其中讨论了 foo.example.com 可以为 .example.com 设置 cookie 的事实，而 bar.example.com 将无法判断它不是它设置的 cookie本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T07:44:33.767

我会相信 Zalewski 的书和他的[https://code.google.com/p/browsersec/wiki/Main](https://code.google.com/p/browsersec/wiki/Main)超过任何 RFC。浏览器对许多 HTTP 特性的实现是出了名的混乱和不标准。

# opengl - 几何着色器中的宽线表现异常

> ID：12758192
> 
> 赞同：5
> 
> 时间：2012-10-06T08:41:32.110
> 
> 标签：opengl, glsl, geometry-shader

我正在尝试使用几何着色器渲染任意宽线（在屏幕空间中）。起初看起来一切都很好，但在某些视图位置，线条渲染不正确：

![正确渲染](../Images/7eec2a143cc4a038f6ce6dbad7dc093c.png) ![不正确的渲染](../Images/90c527fc4299e53023243ea1fb0e0ea9.png)

左边的图像呈现了正确的渲染（X、Y 和 Z 轴上的三条线，2 像素宽）。

当相机在原点附近移动时（实际上是在线条附近），线条就像正确的图像一样被渲染。着色器看起来很简单，我不明白我的 GPU 上发生了什么：

```
--- Vertex Shader

#version 410 core

// Modelview-projection matrix
uniform mat4 ds_ModelViewProjection;
// Vertex position
in vec4 ds_Position;
// Vertex color
in vec4 ds_Color;

// Processed vertex color
out vec4 ds_VertexColor;

void main()
{    
    gl_Position = ds_ModelViewProjection * ds_Position;

    ds_VertexColor = ds_Color;
}

--- Geometry Shader

    #version 410 core

    // Viewport size, in pixels
uniform vec2 ds_Viewport;
// Line width, in pixels
uniform float ds_LineWidth = 2.0;
// Processed vertex color (from VS, in clip space)
in vec4 ds_VertexColor[2];
// Processed primitive vertex color
out vec4 ds_GeoColor;

layout (lines) in;
layout (triangle_strip, max_vertices = 4) out;

void main()
{
    vec3 ndc0 = gl_in[0].gl_Position.xyz / gl_in[0].gl_Position.w;
    vec3 ndc1 = gl_in[1].gl_Position.xyz / gl_in[1].gl_Position.w;

    vec2 lineScreenForward = normalize(ndc1.xy - ndc0.xy);
    vec2 lineScreenRight = vec2(-lineScreenForward.y, lineScreenForward.x);
    vec2 lineScreenOffset = (vec2(ds_LineWidth) / ds_ViewportSize) * lineScreenRight;

    gl_Position = vec4(ndc0.xy + lineScreenOffset, ndc0.z, 1.0);
    ds_GeoColor = ds_VertexColor[0];
    EmitVertex();

    gl_Position = vec4(ndc0.xy - lineScreenOffset, ndc0.z, 1.0);
    ds_GeoColor = ds_VertexColor[0];
    EmitVertex();

    gl_Position = vec4(ndc1.xy + lineScreenOffset, ndc1.z, 1.0);
    ds_GeoColor = ds_VertexColor[1];
    EmitVertex();

    gl_Position = vec4(ndc1.xy - lineScreenOffset, ndc1.z, 1.0);
    ds_GeoColor = ds_VertexColor[1];
    EmitVertex();

    EndPrimitive();
}

--- Fragment Shader

// Processed primitive vertex color
in vec4 ds_GeoColor;

// The fragment color.
out vec4 ds_FragColor;

void main()
{
        ds_FragColor = ds_GeoColor;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-26T03:19:28.580

你的错误在于：

```
gl_Position = vec4(ndc0.xy + lineScreenOffset, ndc0.z, 1.0 /* WRONG */); 
```

要解决这个问题：

```
vec4 cpos = gl_in[0].gl_Position;
gl_Position = vec4(cpos.xy + lineScreenOffset*cpos.w, cpos.z, cpos.w); 
```

您所做的是：丢失有关 W 的信息，从而使硬件剪辑器失谐，将其从 3D 剪辑器降级为 2D 剪辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:13:49.710

今天我自己找到了答案。我不完全理解它，但这解决了这个问题。

当线顶点超出为场景定义的投影矩阵的近平面（在我的情况下，三线的所有结束顶点）时，就会出现问题。解决方案是手动裁剪视锥内的线顶点（这样顶点就不能超出近平面！）。

当他们离开视锥体时`ndc0`会发生什么？`ndc1`查看图像，似乎 XY 分量的符号发生了变化（在它们在剪辑空间中变换之后！）：这意味着 W 坐标与正常坐标相反，不是吗？

如果没有几何着色器，光栅化器将负责在视锥体之外裁剪这些图元，但是由于我已经引入了几何着色器，所以我需要自己计算这些结果。任何人都可以建议我一些关于这个问题的链接？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T04:58:18.503

我遇到了类似的问题，我试图将顶点的法线绘制为彩色线条。我画法线的方式是把所有的顶点都画成点，然后用GS把每个顶点展开成一条线。GS 很简单，我发现有随机的不正确的线条贯穿整个屏幕。然后我将此行添加到 GS 中（由下面的注释标记），问题已解决。似乎问题是因为线路的一端在截锥体内，而另一端在截锥体外，所以我最终会在整个屏幕上运行线路。

```
// Draw normal of a vertex by expanding a vertex into a line
[maxvertexcount(2)]
void GSExpand2( point PointVertex points[ 1 ], inout LineStream< PointInterpolants > stream )
{
    PointInterpolants v;

    float4 pos0 = mul(float4(points[0].pos, 1), g_viewproj);
    pos0 /= pos0.w;

    float4 pos1 = mul(float4(points[0].pos + points[0].normal * 0.1f, 1), g_viewproj);
    pos1 /= pos1.w;

    // seems like I need to manually clip the lines, otherwise I end up with incorrect lines running across the entire screen
    if ( pos0.z < 0 || pos1.z < 0 || pos0.z > 1 || pos1.z > 1 ) 
        return;

    v.color = float3( 0, 0, 1 );
    v.pos = pos0;
    stream.Append( v );

    v.color = float3( 1, 0, 0 );
    v.pos = pos1;
    stream.Append( v );

    stream.RestartStrip();
} 
```

# python - 在 Python 中对数据进行分组

> ID：12758193
> 
> 赞同：1
> 
> 时间：2012-10-06T08:41:40.953
> 
> 标签：python, grouping

我有以下（空格分隔）输入：

```
2012-10-05 PETER 6  
2012-10-05 PETER 4  
2012-10-06 PETER 60
2012-10-06 TOM 10  
2012-10-08 SOMNATH 80 
```

我想实现以下以管道分隔的输出：（其中列是 [DATE AND NAME, NUM ENTRIES, SUM OF LAST COL]）

```
2012-10-05 PETER|2|10  
2012-10-06 PETER|1|60  
2012-10-06 TOM|1|10  
2012-10-08 SOMNATH|1|80 
```

到目前为止，这是我的代码：

```
s = open("output.txt","r")
fn=s.readlines()
d = {}
for line in fn:
 parts = line.split()
 if parts[0] in d:
   d[parts[0]][1] += int(parts[2])
   d[parts[0]][2] += 1
 else:
d[parts[0]] = [parts[1], int(parts[2]), 1]
for date in sorted(d):
   print "%s %s|%d|%d" % (date, d[date][0], d[date][2], d[date][1]) 
```

我得到的输出为：

```
2012-10-06 PETER|2|70 
```

代替

```
2012-10-06 PETER|1|60 
```

并且`TOM`没有显示在列表中。

我需要做什么来更正我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:12:49.800

```
d = collections.defaultdict(list)
with open('output.txt', 'r') as f:
    for line in f:
        date, name, val = line.split()
        d[date, name].append(int(val))

for (date, name), vals in sorted(d.items()):
    print '%s %s|%d|%d' % (date, name, len(vals), sum(vals)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:51:28.720

<3`itertools`

```
import itertools
with open('output.txt', 'r') as f:
    splitlines = (line.split() for line in f if line.strip())
    for (date, name), bits in itertools.groupby(splitlines, key=lambda bits: bits[:2]):
        total = 0
        count = 0
        for _, _, val in bits:
            total += int(val)
            count += 1
        print '%s %s|%d|%d' % (date, name, count, total) 
```

如果您不想使用`groupby`（它不可用，或者您的输入数据不能保证被排序），这是一个传统的解决方案（实际上只是您代码的固定版本）：

```
d = {}
with open('output.txt', 'r') as f:
    for line in f:
        date, name, val = line.split()
        key = (date, name)
        if key not in d:
            d[key] = [0, 0]
        d[key][0] += int(val)
        d[key][1] += 1

for key in sorted(d):
    date, name = key
    total, count = d[key]
    print '%s %s|%d|%d' % (date, name, count, total) 
```

请注意，我们使用`(date, name)`as 键而不是仅使用`date`.

# image - 来自先前函数的图像不在背景中绘制（画布）

> ID：12758200
> 
> 赞同：0
> 
> 时间：2012-10-06T08:43:30.520
> 
> 标签：image, html, canvas

我的问题是关于在 HTML Canvas 中使用函数进行绘制的。我尝试用 Canvas 绘制“交易卡”来创建游戏。所以我决定编写一个函数来获取所有必要的信息来绘制不同的卡片。对于一张卡 - 没问题。但是如果我尝试在第一张牌上画另一张牌，第一张牌的图像可以通过第二张牌看到。

这是源代码：

```
function RoundRect(x,y,scale,lvl,mage,headline,text,HP,MP,AtckP,DefP,MDefP){
            //Kartenumriss zeichnen
            context.strokeStyle="rgb(0,0,0)";
            context.fillStyle="rgb(180,180,180)";
            context.lineWidth=2*scale;
            context.beginPath();
            context.moveTo(x+10*scale,y+0*scale);
            context.lineTo(x+90*scale,y+0*scale);
            context.arcTo(x+100*scale,y+0*scale,x+100*scale,y+10*scale,10*scale);
            context.lineTo(x+100*scale,y+110*scale);
            context.arcTo(x+100*scale,y+120*scale,x+90*scale,y+120*scale,10*scale);
            context.lineTo(x+10*scale,y+120*scale);
            context.arcTo(x+0*scale,y+120*scale,x+0*scale,y+110*scale,10*scale);
            context.lineTo(x+0*scale,y+10*scale);
            context.arcTo(x+0*scale,y+0*scale,x+10*scale,y+0*scale,10*scale);
            context.fill();
            context.stroke();
            //innerer Kartenumriss zeichnen
            context.strokeStyle="rgb(0,0,0)";
            context.lineWidth=2*scale;
            context.beginPath();
            context.moveTo(x+20*scale,y+10*scale)
            context.lineTo(x+80*scale,y+10*scale);
            context.arcTo(x+80*scale,y+20*scale,x+90*scale,y+20*scale,10*scale);
            context.lineTo(x+90*scale,y+100*scale);
            context.arcTo(x+80*scale,y+100*scale,x+80*scale,y+110*scale,10*scale);
            context.lineTo(x+20*scale,y+110*scale);
            context.arcTo(x+20*scale,y+100*scale,x+10*scale,y+100*scale,10*scale);
            context.lineTo(x+10*scale,y+20*scale);
            context.arcTo(x+20*scale,y+20*scale,x+20*scale,y+10*scale,10*scale);
            context.lineCap="square";
            context.stroke();
            //Textfeld zeichnen
            context.strokeStyle="rgb(0,0,0)";
            context.fillStyle="rgb(0,0,0)";
            context.lineWidth=2*scale;
            context.beginPath();
            context.moveTo(x+90*scale,y+65*scale);
            context.lineTo(x+90*scale,y+100*scale);
            context.arcTo(x+80*scale,y+100*scale,x+80*scale,y+110*scale,10*scale);
            context.lineTo(x+20*scale,y+110*scale);
            context.arcTo(x+20*scale,y+100*scale,x+10*scale,y+100*scale,10*scale);
            context.lineTo(x+10*scale,y+65*scale);
            context.arcTo(x+20*scale,y+65*scale,x+20*scale,y+75*scale,10*scale);
            context.lineTo(x+80*scale,y+75*scale)
            context.arcTo(x+80*scale,y+65*scale,x+90*scale,y+65*scale,10*scale)
            context.lineCap="square";
            context.fill();
            context.stroke();
            //lvl zeichnen
            shift=0;
            for(var greystar=0;greystar<=4; greystar++){
                context.strokeStyle="rgb(100,100,100)";
                context.fillStyle="rgb(100,100,100)";
                context.beginPath();
                context.moveTo(shift+x+23.33*scale,y+112*scale);
                context.lineTo(shift+x+25.33*scale,y+118.66*scale);
                context.lineTo(shift+x+20*scale,y+114.53*scale);
                context.lineTo(shift+x+26.66*scale,y+114.53*scale);
                context.lineTo(shift+x+21.26*scale,y+118.66*scale);
                context.lineTo(shift+x+23.33*scale,y+112*scale);
                context.fill();
                shift+=13.5*scale;
            }
            shift=0;
            while(lvl>0){
                context.strokeStyle="yellow";
                context.fillStyle="yellow";
                context.beginPath();
                context.moveTo(shift+x+23.33*scale,y+112*scale);
                context.lineTo(shift+x+25.33*scale,y+118.66*scale);
                context.lineTo(shift+x+20*scale,y+114.53*scale);
                context.lineTo(shift+x+26.66*scale,y+114.53*scale);
                context.lineTo(shift+x+21.26*scale,y+118.66*scale);
                context.lineTo(shift+x+23.33*scale,y+112*scale);
                context.fill();
                shift+=13.5*scale;
                lvl--;
            }
            //Bild einbinden
            var chucknorris = new Image();
            chucknorris.onload = function() {
                context.drawImage(chucknorris,x+18*scale,y+18*scale,64*scale,49*scale);
            };
            chucknorris.src="pics/chucknorris.png";
            //Symbole einbinden
            //life
            var life = new Image();
            life.onload = function() {
                context.drawImage(life,x+87*scale,y+11*scale,7*scale,7*scale);
            };
            life.src="pics/heart_small.png";
            //magic
            var magic = new Image();
            magic.onload = function() {
                context.drawImage(magic,x+6*scale,y+11*scale,7*scale,7*scale);
            };
            magic.src="pics/magic_small.png";
            if(mage==true){
                //wand
                var wand = new Image();
                wand.onload = function() {
                    context.drawImage(wand,x+6*scale,y+102*scale,7*scale,7*scale);
                };
                wand.src="pics/wand_small.png";
            }
            else{
                //sword
                var sword = new Image();
                sword.onload = function() {
                    context.drawImage(sword,x+6*scale,y+102*scale,7*scale,7*scale);
                };
                sword.src="pics/sword_crossed_small.png";
            }
            //shield
            var shield = new Image();
            shield.onload = function() {
                context.drawImage(shield,x+85*scale,y+102*scale,7*scale,7*scale);
            };
            shield.src="pics/shield_small.png";
            //magic_shield
            var magic_shield = new Image();
            magic_shield.onload = function() {
                context.drawImage(magic_shield,x+91*scale,y+102*scale,7*scale,7*scale);
            };
            magic_shield.src="pics/magic_shield_small.png";
            //Text einfügen
            context.font = 'bold '+4*scale+'px Calibri';
            context.fillStyle = 'rgb(255,255,255)';
            context.fillText(headline,x+20*scale, y+80*scale);
            context.font = 'normal '+3*scale+'px Calibri';
            context.fillStyle = 'rgb(255,255,255)';
            wrapText(context, text, x+20*scale, y+85*scale, maxWidth, lineHeight, scale);
            //HP anzeigen
            context.font = 'bold 20pt Calibri';
            context.fillStyle = 'rgb(255,0,0)';
            var textmetric = context.measureText(HP);
            var textwidth = textmetric.width/2;
            context.fillText(HP,x-textwidth+90.25*scale, y+10*scale);
            //MP anzeigen
            context.fillStyle = 'rgb(0,0,255)';
            textmetric = context.measureText(MP);
            textwidth = textmetric.width/2;
            context.fillText(MP,x-textwidth+9.5*scale, y+10*scale);
            //AtckP anzeigen
            context.fillStyle = 'rgb(0,0,0)';
            textmetric = context.measureText(AtckP);
            textwidth = textmetric.width/2;
            context.fillText(AtckP,x-textwidth+9.5*scale, y+115*scale);
            //DefP und MDefP anzeigen
            context.fillStyle = 'rgb(0,0,0)';
            var DefAll = DefP+'/'+MDefP;
            textmetric = context.measureText(DefAll);
            textwidth = textmetric.width;
            context.fillText(DefAll,x-textwidth+98*scale, y+115*scale);
        }; 
```

我认为重要的部分在“//Bild einbinden”和“//Text einfügen”之间，但我不确定。

该函数稍后在测试代码中使用，如下所示：

```
RoundRect(0,0,4,5,false,'Chuck Norris','Wenn Chuck Norris spricht, hört Gott zu!!! Chuck Norris` Tränen können Krebs heilen. Nur schade dass er niemals weint!!! Chuck Norris geht manchmal Blut spenden. Nur nie sein eigenes. Und wenn doch, dann mit ner Knarre und nem Eimer!!!','100','0','120','20','60');
RoundRect(100,120,4,2,false,'Chuck Norris Vers 0.3','Wenn Chuck Norris spricht, hört Gott zu!!! Chuck Norris` Tränen können Krebs heilen. Nur schade dass er niemals weint!!! Chuck Norris geht manchmal Blut spenden. Nur nie sein eigenes. Und wenn doch, dann mit ner Knarre und nem Eimer!!!','50','100','60','10','30'); 
```

结果如下：

[结果](http://img4web.com/view/16RZTP)

我希望有人可以帮助我。提前谢谢您（<-希望 Google-Tranlator 就在这里-对我来说听起来不对...）。

编辑：我发现了问题的一部分，但我仍然需要一个解决方案：我试图在代码中设置一些“alert();”。结果很有趣：首先，第一张牌的背景被绘制出来。然后是第二张卡片的背景。之后，第一张牌的图像被抽出，然后是第二张牌的其他图像。因此，在绘制其他所有内容之后绘制的图像。所以问题是如何告诉 Canvas 立即绘制图像，或者至少在函数内绘制图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:48:33.993

You get the images drawn after everything because they are drawn in the callback of Image.onLoad().

This means that the function will first render the background of the first card, register a listener for your Image.onLoad events, then return, so that you can make the seconde call, which will render the background, and register another listener for the new Image.onLoad events. Then the first listener is triggered when the first image is loaded, so it will draw the picture, and a last the second listener will be triggered. Hence your result.

As for a way to resolve this issue, either you can load your images before drawing any card, and draw it directly in your function, avoiding to wait for the loading, or you hav to make your design Asynchronous-proof. You can get information about asynchronous programming here: [http://www.html5rocks.com/en/tutorials/async/deferred/?redirect_from_locale=why](http://www.html5rocks.com/en/tutorials/async/deferred/?redirect_from_locale=why)

Edit: The second solution can help with the first one (which corresponds to the answer of enzhflep). The article recommands the use of jquery to deal with asynchronous events such as loading multiple images. But if you don't need jQuery, you can also code a small javascript object that can register images to be loaded, and trigger a listener when all images are loaded. [This ressource](http://www.webreference.com/programming/javascript/gr/column3/index.html) seems to offer that specific object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:50:16.637

不是问题。你的英语很好。（你提到的翻译有点奇怪'提前谢谢你）

正如您似乎开始识别的那样，问题是由于加载图像所花费的时间..

每次抽卡时，都会加载其中的每个图像。一旦加载了每个图像，它的 onload 处理程序就会触发并将其绘制到画布上。现在，问题是有时当您绘制第二张卡片时，第一张卡片中的图像仍在加载。这意味着第二张卡片的部分内容在卡片 1 的图像加载之前已被绘制。当它们最终加载时，它们被绘制在 card2 的顶部。

您可以通过在页面的 init 函数中加载图像来解决此问题。

这是我使用的解决方案：

```
var canvas, context;

var chucknorris = new Image();
var life = new Image();
var magic = new Image();
var wand = new Image();
var sword = new Image();
var shield = new Image();
var magic_shield = new Image();

function myInit()
{
    chucknorris.src="img/girl.png"; //"pics/chucknorris.png";
    life.src="img/heartSmall.jpg"; //"pics/heart_small.png";
    magic.src="img/magicSmall.jpg"; //"pics/magic_small.png";
    wand.src="img/magicSmall.jpg"; //"pics/wand_small.png";
    sword.src="img/magicSmall.jpg"; //"pics/sword_crossed_small.png";
    shield.src="img/close.png"; //pics/shield_small.png";
    magic_shield.src="img/magicSmall.jpg"; //"pics/magic_shield_small.png";

    canvas = document.createElement('canvas');
    canvas.setAttribute('width', '400');
    canvas.setAttribute('height', '800');
    context = canvas.getContext('2d');
    document.body.appendChild(canvas);

    RoundRect(0,0,2,5,false,'Chuck Norris','Wenn Chuck Norris spricht, hört Gott zu!!! Chuck Norris` Tränen können Krebs heilen. Nur schade dass er niemals weint!!! Chuck Norris geht manchmal Blut spenden. Nur nie sein eigenes. Und wenn doch, dann mit ner Knarre und nem Eimer!!!','100','0','120','20','60');

    RoundRect(128,0,2,5,false,'Pussy Galore','She loves Austin Powers','100','0','120','20','60');
}

function RoundRect(x,y,scale,lvl,mage,headline,text,HP,MP,AtckP,DefP,MDefP)
{
    var mImages

    //Kartenumriss zeichnen
    context.globalCompositeOperation = "src-over";

    context.strokeStyle="rgb(0,0,0)";
    context.fillStyle="rgb(180,180,180)";
    context.lineWidth=2*scale;
    context.beginPath();
    context.moveTo(x+10*scale,y+0*scale);
    context.lineTo(x+90*scale,y+0*scale);
    context.arcTo(x+100*scale,y+0*scale,x+100*scale,y+10*scale,10*scale);
    context.lineTo(x+100*scale,y+110*scale);
    context.arcTo(x+100*scale,y+120*scale,x+90*scale,y+120*scale,10*scale);
    context.lineTo(x+10*scale,y+120*scale);
    context.arcTo(x+0*scale,y+120*scale,x+0*scale,y+110*scale,10*scale);
    context.lineTo(x+0*scale,y+10*scale);
    context.arcTo(x+0*scale,y+0*scale,x+10*scale,y+0*scale,10*scale);
    context.fill();
    context.stroke();
    //innerer Kartenumriss zeichnen
    context.strokeStyle="rgb(0,0,0)";
    context.lineWidth=2*scale;
    context.beginPath();
    context.moveTo(x+20*scale,y+10*scale)
    context.lineTo(x+80*scale,y+10*scale);
    context.arcTo(x+80*scale,y+20*scale,x+90*scale,y+20*scale,10*scale);
    context.lineTo(x+90*scale,y+100*scale);
    context.arcTo(x+80*scale,y+100*scale,x+80*scale,y+110*scale,10*scale);
    context.lineTo(x+20*scale,y+110*scale);
    context.arcTo(x+20*scale,y+100*scale,x+10*scale,y+100*scale,10*scale);
    context.lineTo(x+10*scale,y+20*scale);
    context.arcTo(x+20*scale,y+20*scale,x+20*scale,y+10*scale,10*scale);
    context.lineCap="square";
    context.stroke();
    //Textfeld zeichnen
    context.strokeStyle="rgb(0,0,0)";
    context.fillStyle="rgb(0,0,0)";
    context.lineWidth=2*scale;
    context.beginPath();
    context.moveTo(x+90*scale,y+65*scale);
    context.lineTo(x+90*scale,y+100*scale);
    context.arcTo(x+80*scale,y+100*scale,x+80*scale,y+110*scale,10*scale);
    context.lineTo(x+20*scale,y+110*scale);
    context.arcTo(x+20*scale,y+100*scale,x+10*scale,y+100*scale,10*scale);
    context.lineTo(x+10*scale,y+65*scale);
    context.arcTo(x+20*scale,y+65*scale,x+20*scale,y+75*scale,10*scale);
    context.lineTo(x+80*scale,y+75*scale)
    context.arcTo(x+80*scale,y+65*scale,x+90*scale,y+65*scale,10*scale)
    context.lineCap="square";
    context.fill();
    context.stroke();
    //lvl zeichnen
    shift=0;
    for(var greystar=0;greystar<=4; greystar++)
    {
        context.strokeStyle="rgb(100,100,100)";
        context.fillStyle="rgb(100,100,100)";
        context.beginPath();
        context.moveTo(shift+x+23.33*scale,y+112*scale);
        context.lineTo(shift+x+25.33*scale,y+118.66*scale);
        context.lineTo(shift+x+20*scale,y+114.53*scale);
        context.lineTo(shift+x+26.66*scale,y+114.53*scale);
        context.lineTo(shift+x+21.26*scale,y+118.66*scale);
        context.lineTo(shift+x+23.33*scale,y+112*scale);
        context.fill();
        shift+=13.5*scale;
    }
    shift=0;
    while(lvl>0)
    {
        context.strokeStyle="yellow";
        context.fillStyle="yellow";
        context.beginPath();
        context.moveTo(shift+x+23.33*scale,y+112*scale);
        context.lineTo(shift+x+25.33*scale,y+118.66*scale);
        context.lineTo(shift+x+20*scale,y+114.53*scale);
        context.lineTo(shift+x+26.66*scale,y+114.53*scale);
        context.lineTo(shift+x+21.26*scale,y+118.66*scale);
        context.lineTo(shift+x+23.33*scale,y+112*scale);
        context.fill();
        shift+=13.5*scale;
        lvl--;
    }
    //Bild einbinden
    context.drawImage(chucknorris,x+18*scale,y+18*scale,64*scale,49*scale);

    //Symbole einbinden
    //life
    context.drawImage(life,x+87*scale,y+11*scale,7*scale,7*scale);

    //magic
        context.drawImage(magic,x+6*scale,y+11*scale,7*scale,7*scale);
    if(mage==true)
    {
        context.drawImage(wand,x+6*scale,y+102*scale,7*scale,7*scale);
    }
    else{
            context.drawImage(sword,x+6*scale,y+102*scale,7*scale,7*scale);
    }
    //shield
        context.drawImage(shield,x+85*scale,y+102*scale,7*scale,7*scale);

        //magic_shield
//  magic_shield.onload = function() {
        context.drawImage(magic_shield,x+91*scale,y+102*scale,7*scale,7*scale);
//  };

    //Text einfügen
    context.font = 'bold '+4*scale+'px Calibri';
    context.fillStyle = 'rgb(255,255,255)';
    context.fillText(headline,x+20*scale, y+80*scale);
    context.font = 'normal '+3*scale+'px Calibri';
    context.fillStyle = 'rgb(255,255,255)';
    wrapText(context, text, x+20*scale, y+85*scale, maxWidth, lineHeight, scale);
    //HP anzeigen
    context.font = 'bold 20pt Calibri';
    context.fillStyle = 'rgb(255,0,0)';
    var textmetric = context.measureText(HP);
    var textwidth = textmetric.width/2;
    context.fillText(HP,x-textwidth+90.25*scale, y+10*scale);
    //MP anzeigen
    context.fillStyle = 'rgb(0,0,255)';
    textmetric = context.measureText(MP);
    textwidth = textmetric.width/2;
    context.fillText(MP,x-textwidth+9.5*scale, y+10*scale);
    //AtckP anzeigen
    context.fillStyle = 'rgb(0,0,0)';
    textmetric = context.measureText(AtckP);
    textwidth = textmetric.width/2;
    context.fillText(AtckP,x-textwidth+9.5*scale, y+115*scale);
    //DefP und MDefP anzeigen
    context.fillStyle = 'rgb(0,0,0)';
    var DefAll = DefP+'/'+MDefP;
    textmetric = context.measureText(DefAll);
    textwidth = textmetric.width;
    context.fillText(DefAll,x-textwidth+98*scale, y+115*scale);
}; 
```

# liferay - 如何在eclipse中使用jsp创建一个登录liferay portlet

> ID：12758201
> 
> 赞同：0
> 
> 时间：2012-10-06T08:43:34.013
> 
> 标签：liferay

我是 liferay 的新手，正在尝试使用 liferay protlets 创建网络应用程序。我正在尝试创建一个自定义登录 portlet。在 html 文件中，使用表单操作方法我试图调用一个 jsp 文件，这给出了错误。帮帮我。你能给我一些建议吗，这样我就可以学习如何设计动态liferay protlets并在liferay门户服务器中部署。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T04:39:16.937

您可以通过以下方式登录liferay

1.  自动登录挂钩[http://www.liferay.com/community/wiki/-/wiki/Main/Portal+Hook+Plugins#section-Portal+Hook+Plugins-Portal+Properties](http://www.liferay.com/community/wiki/-/wiki/Main/Portal+Hook+Plugins#section-Portal+Hook+Plugins-Portal+Properties)
2.  扩展身份验证管道[http://www.liferay.com/community/wiki/-/wiki/Main/Developing+a+CAS#section-Developing+a+CAS-Authenticaton+Pipeline](http://www.liferay.com/community/wiki/-/wiki/Main/Developing+a+CAS#section-Developing+a+CAS-Authenticaton+Pipeline)
3.  通过您的自定义实施[http://www.liferay.com/it/community/forums/-/message_boards/message/16008439](http://www.liferay.com/it/community/forums/-/message_boards/message/16008439)
4.  扩展 Liferay 本身（通过 EXT 插件）[https://www.liferay.com/community/wiki/-/wiki/Main/Ext+Plugin](https://www.liferay.com/community/wiki/-/wiki/Main/Ext+Plugin)

我建议按照我指定的顺序执行它们，因为它们会增加复杂性。请让我知道这些中的任何具体查询。

# c - 我需要将数据从文件“Mus icLibrary.txt”复制到结构中。但是当我使用我的代码时，它不会返回任何东西

> ID：12758203
> 
> 赞同：1
> 
> 时间：2012-10-06T08:43:44.560
> 
> 标签：c

这是我复制文件的代码。

```
song_t *ReadFile(song_t *head){
FILE *input;
input = fopen("MusicLibrary.txt", "r");
song_t *temp = head;
string title;
string artist;
string album;
string genre;
string store;
string buffer;

while(fgets(buffer, MAXSIZE, input) != NULL){
    temp = (song_t *)malloc(sizeof(song_t));
    fgets(temp->title, MAXSIZE, input);
    fgets(temp->artist, MAXSIZE, input);
    fgets(temp->album, MAXSIZE, input);
    fgets(temp->genre, MAXSIZE, input);
    fgets(store, MAXSIZE, input);
    temp->rating = atof(store);
    temp->next == NULL;
    temp = temp->next;
}

fclose(input);
return head;
} 
```

这是我的结构的代码：

```
typedef struct song{
string title;
string artist;
string album;
string genre;
float rating;
struct song *next;
}song_t; 
```

另外，typedef char string[30];

我似乎无法将数据从文件复制到 main 中的结构。谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T08:50:39.387

```
while(fgets(buffer, MAXSIZE, input) != NULL){
    temp = (song_t *)malloc(sizeof(song_t));
    fgets(temp->title, MAXSIZE, input);
    fgets(temp->artist, MAXSIZE, input);
    fgets(temp->album, MAXSIZE, input);
    fgets(temp->genre, MAXSIZE, input);
    fgets(store, MAXSIZE, input);
    temp->rating = atof(store);
    temp->next == NULL;
    temp = temp->next;
} 
```

上面的代码有一些问题，根据你输入的文件格式可能*不是问题，但是这里有：*

* * *

首先，您`while`使用 a 来控制循环，该循环`fgets`会抛出一条线。你确定那是你想要的。

* * *

其次，您应该始终检查返回值`malloc`，以防万一失败。

* * *

第三，您假设每个字段都在自己的行上。你应该确认一下。

* * *

第四，您并没有真正正确地插入到链表中。如果您的意图是在列表的开头插入新项目，请更改：

```
temp->next == NULL;
temp = temp->next; 
```

进入：

```
temp->next == head;
head = temp; 
```

并确保您将其称为：

```
actualHead = ReadFile (actualHead); 
```

正确更新`head`指针。

* * *

# c - 打印 GDB 中寄存器指向的字符串

> ID：12758217
> 
> 赞同：18
> 
> 时间：2012-10-06T08:46:05.043
> 
> 标签：c, gdb

我有一个正在移动的字符串，我想根据寄存器打印它。

我做了以下事情：

```
gdb x $esp
0xbffff110:  "\274\205\004\b\324\361\377\277\334\361\377\277]\257\344\267\304s\374\267"

{then I copied the address}

>> x *0xbffff110
0x80485bc <__dso_handle+12>:     "test1" 
```

有什么方法可以一步完成吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-06T14:08:14.063

> 有什么方法可以一步完成吗？

```
 (gdb) print *(char**)$esp 
```

# web-services - 纯粹的 HATEOAS 与进行过多的服务调用

> ID：12758219
> 
> 赞同：6
> 
> 时间：2012-10-06T08:46:22.870
> 
> 标签：web-services, rest, api-design, hateoas

我正在尝试构建一个应该为我的 UI 提供动力的 RESTful Web 服务。如果我遵循纯粹的 HATEOAS 原则，我应该只在集合中公开单个资源的 URI。现在，假设我有一个父子关系，每个父级可以有大约 50 个子级，并且 UI 需要在单击父级时也显示所有子级的部分数据。

如果我只向父级公开子 URI，那么 UI 将必须进行 50 次 Web 服务调用才能完成此操作。另一种方法是拥有一个单独的 API，它将给出父级以及有关子级的部分信息，而不仅仅是 URI。我确信这是一个很常见的问题。这里的正确平衡是什么？有哪些陷阱？从设计的角度来看，“唯一的 URI”方法更简洁，但由于所有这些服务调用，它可能会使 UI 变得非常慢并给服务器带来大量负载。因此，另一种方法可能更实用。根据您的经验，哪个更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T01:14:11.447

您被超媒体约束要求的内容误导了。没有什么说您不能在父对象的表示中包含来自子对象的信息。事实上，这正是[Hal](http://stateless.co/hal_specification.html)（一种超媒体类型）旨在实现的。

# android - 每 n 毫秒在地图上生成一个叠加层以模拟动画

> ID：12758220
> 
> 赞同：0
> 
> 时间：2012-10-06T08:46:27.767
> 
> 标签：android, iterator, overlay, android-mapview

这是我的问题，我有一个列表 0...n-1。在这个列表中，我有 n 个叠加层。我需要在地图上模拟一辆移动的汽车，它由覆盖层表示。我尝试做一个 AsyncTask，它在主线程上生成覆盖，但是当我拖动 mapview 时，它会因 currentmodificationexception 而崩溃。这是一个迭代器的问题，因为我无法管理来自其他线程的任何覆盖。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:28:06.460

除了使用 n 个叠加层，您可以只使用一个叠加层并覆盖 draw 方法以将汽车绘制在正确的位置。

您仍然可以使用异步任务来定义汽车位置 (x,y)，并在叠加绘制中使用此 X,Y 坐标来定位汽车。

```
doInBackground(){
  //..
  carOverlay.set(x,y);
  //..
}

public class CarOverlay extends Overlay {
//..
set(intx, int y){
  this.x = x;
  this.y = y;
}

@Override
public void draw(Canvas canvas, MapView mapview, boolean shadow) {
  //..
  darwCar(x,y); //you need to create your darwCar method ...
} 
```

祝你好运。

# bit-fields - 我们能否以独立于语言的方式表示数据结构（涉及位域）？

> ID：12758222
> 
> 赞同：1
> 
> 时间：2012-10-06T08:47:11.240
> 
> 标签：bit-fields, bson, data-interchange

我们有十几个模拟器在 UDP 上相互通信。接口定义在数据库中进行管理。模拟器是用不同的语言编写的；主要是 C++，一些是 Java 和 C#。目前，当系统工程师对接口定义数据库进行更改时，模拟器开发人员会手动更新其代码中的通信数据结构。消息的长度大多为 2-5 个字节，每个信号都有位字段。我想做的是从描述字节和位字段定义的接口定义数据库生成一个文件，并让每个开发人员毫不费力地将其添加到他的模拟器代码中。

[编辑] 在 Barmar 的回答之后，我从标题中删除了 JSON/BSON。

谢谢

祖拜尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:34:31.653

JSON 是一种高级数据表示，它只关心传输值，而不是它们在内存中的表示方式。J 代表`Javascript`——它只处理 Javascript 数据类型，不包括位字段（事实上，JSON 只是 Javascript 文字语法的一个子集）。

# android - 在android中使用final变量

> ID：12758226
> 
> 赞同：-1
> 
> 时间：2012-10-06T08:47:45.803
> 
> 标签：android, android-spinner

当我给这个函数中的**标志**变量赋值时出现错误。实际上我希望我的意图代码将第二次运行。如何解决这个问题呢

```
 final boolean flag = false;
    final Spinner spnrContacts = (Spinner) findViewById(R.id.spnrContacts);
    ArrayAdapter<String> contactsAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, SelectContacts);
    contactsAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spnrContacts.setAdapter(contactsAdapter);

    spnrContacts
            .setOnItemSelectedListener(new AdapterView.OnItemSelectedListener()
            {
                public void onItemSelected(AdapterView<?> adapterView,
                        View view, int i, long l)
                {
                    // Your code 

                    if (flag)
                    {
                        Intent intent = new Intent(NewScheduleOptions.this,
                                TestActivity.class);
                        intent.putExtra("selectedType", i);
                        startActivity(intent);
                    }
                    flag = true;
                }

                public void onNothingSelected(AdapterView<?> adapterView)
                {
                    return;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:50:19.837

你可以让 flag 成为班级的成员。它不必是最终的，它可以在匿名类中访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:50:53.513

```
boolean flag = false; 
```

将标志声明为**全局**变量

例如：

```
public class MainActivity extends Activity
{
   boolean flag;  <---------------
   oncreate(saved.....)
   {
       flag= false;
       //your code here
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T08:55:55.547

你想让它第二次运行什么？如果您的意思是第二次启动此活动，那么您的代码将失败，因为每次启动此活动时 flag 都会初始化为 false。

您需要将标志值存储在共享首选项中。第一次运行时，在共享首选项中将其保存为 true。下一次，从共享首选项中读取标志并检查标志，如果它是真的，那么这意味着它是第二次运行活动并且你的代码将运行良好

# google-app-engine - GAE 中通过 FTP 的数据

> ID：12758227
> 
> 赞同：3
> 
> 时间：2012-10-06T08:47:50.717
> 
> 标签：google-app-engine, ftp

在 Google App Engine 中，有没有办法通过 FTP 获取文件或将文件通过 FTP 传输到应用程序？我希望能够向仅支持 FTP 的供应商发送数据。

有什么建议吗？我感谢任何人的任何帮助和/或想法

谢谢阿比吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T04:39:39.400

这个限制曾经让我发疯，但截至[今年 4 月 9 日（SDK 1.7.7）](http://googleappengine.blogspot.se/2013/04/app-engine-177-released.html)，这不再是问题。出站套接字（例如 FTP）通常可用于所有支持计费的应用程序。

概述（Python）：[https ://developers.google.com/appengine/docs/python/sockets/](https://developers.google.com/appengine/docs/python/sockets/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T04:27:25.530

编写一个 ftp 代理并在 Google Cloud Engine 上运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T02:33:39.140

这是我在 GAE 上测试过的 FTP 代码（启用计费）

[Python](https://stackoverflow.com/a/26283142/4058484)

```
#!/usr/bin/env python
from google.appengine.ext import webapp
from ftplib import FTP

class HwHandler(webapp.RequestHandler):
    def get(self):
        self.response.out.write('FTP Starting...<br>')
        ftp = FTP('ftp_site.com') 
        ftp.login('login', 'password')
        ftp.set_pasv(False) 
        ftp.retrlines('LIST')  # list directory contents
        self.response.out.write('FTP opened')
        ftp.quit()

app = webapp.WSGIApplication([
    ('/', HwHandler)
 ], debug=True) 
```

[php](http://php.net/manual/en/function.file-put-contents.php#96217)

```
<?php 
/* set the FTP hostname */ 
$user = "test"; 
$pass = "myFTP"; 
$host = "example.com"; 
$file = "test.txt"; 
$hostname = $user . ":" . $pass . "@" . $host . "/" . $file; 

/* the file content */ 
$content = "this is just a test."; 

/* create a stream context telling PHP to overwrite the file */ 
$options = array('ftp' => array('overwrite' => true)); 
$stream = stream_context_create($options); 

/* and finally, put the contents */ 
file_put_contents($hostname, $content, 0, $stream); 
?> 
```

我稍后会更新 Java 和 Go。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T17:03:34.883

FTP 不是 AppEngine 现在可用的，但您可以使用复杂的解决方案。

1.  将您的数据作为文件导出到 Google Cloud Storage。使用 Appengine FileService 很容易。您可以使用 AppEngine Pipelines 库来管理此过程。
2.  创建谷歌计算引擎实例。它是一个虚拟机，您可以在其中创建套接字并使用您需要的软件。
3.  在您的计算引擎实例上设置 FTP 服务器。
4.  Compute Engine 可以访问云存储，因此您可以通过 FTP 将文件提供给第三方客户端。

这是一个复杂的过程，但它仍然可以帮助解决您的问题。

# npm - 无法使用 tsc 节点模块编译打字稿

> ID：12758228
> 
> 赞同：3
> 
> 时间：2012-10-06T08:48:11.570
> 
> 标签：npm, typescript, tsc

我正在尝试使用 tsc 节点包模块将打字稿编译成 JavaScript。首先，我已经使用`npm install -g typescript`. 在我的本地目录中，我创建了一个名为 classes.js 的文件，其中包含有效的打字稿代码。运行时`tsc classes.js`出现以下错误：`Error reading file "./classes.js": File not found`

该错误没有多大意义，因为该文件存在。使用绝对文件路径时显示相同的错误。我想知道 tsc 模块是否有问题或者我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:01:58.287

typescript 编译器专门寻找扩展名`.str`和`.ts`. 这是解析输入文件名的代码：

```
if(!TypeScript.isSTRFile(normalizedPath) && !TypeScript.isTSFile(normalizedPath)) {
    normalizedPath += ".ts";
} 
```

然后，编译器会查找名称为 的文件`normalizedPath`，在您的情况下，该文件对应于`classes.js.ts`不存在的文件。在我看来，编译器应该在这里输出更好的错误信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:52:38.340

显然 tsc 节点模块仅在编译的打字稿文件具有**ts**扩展名时才起作用。我相信这是一个临时限制，可以在未来版本的 tsc 中修复。

# android - sqlite 在创建表时抛出异常

> ID：12758230
> 
> 赞同：0
> 
> 时间：2012-10-06T08:48:49.797
> 
> 标签：android, android-sqlite

我正在创建一个简单的表，但在执行该表时会引发如下错误：

```
 10-06 09:15:28.606: E/AndroidRuntime(595): 
    android.database.sqlite.SQLiteException: near  "item": error: 
    create table item (_id integer primary key autoincrement,
    item_id text not null,  
    item_name text not null); 

```

我的 dbhelper 类是：-

```
<code> 
```

公共类 DbHelper 扩展 SQLiteOpenHelper {

```
private static final String CREATE_ITEM_TABLE = String.format("CREATE TABLE %s ( %s INTEGER PRIMARY KEY   AUTOINCREMENT, %s TEXT NOT NULL, %s TEXT NOT NULL);",
                "item","_id", "item_id", "item_name");
private static final String DATABASE_NAME = "applicationdata";
private static final int DATABASE_VERSION = 1;

public DbHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Method is called during creation of the database
@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(CREATE_ITEM_TABLE);
}

// Method is called during an upgrade of the database,
// e.g. if you increase the database version
@Override
public void onUpgrade(SQLiteDatabase database, int oldVersion,
        int newVersion) {
    Log.w(DbHelper.class.getName(), "Upgrading database from version "
            + oldVersion + " to " + newVersion
            + ", which will destroy all old data");
    database.execSQL("DROP TABLE IF EXISTS item");
    onCreate(database);
} 
```

}

```
</code> 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:42:04.390

好吧，“item”不在 SQLite 的[关键字列表](http://www.sqlite.org/lang_keywords.html)中，但那是我之前看到过类似错误的时候......

尝试将您的表名更改为其他名称，看看是否能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:53:51.057

```
db.execSQL("CREATE TABLE if not exists item(id INTEGER PRIMARY KEY AUTOINCREMENT,"
            + "item_id TEXT NOT NULL,"
            + "item_name TEXT NOT NULL)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-29T17:15:15.293

也许一些空格问题（在AUTOINCREMENT之前）和语法：

```
private static final String CREATE_ITEM_TABLE = String.format("CREATE TABLE %s ( %s INTEGER PRIMARY KEY AUTOINCREMENT, %s TEXT NOT NULL, %s TEXT NOT NULL);",
            "item","_id", "item_id", "item_name"); 
```

要不就：

```
private static final String CREATE_ITEM_TABLE = String.format("CREATE TABLE %s ( %s INTEGER PRIMARY KEY, %s TEXT NOT NULL, %s TEXT NOT NULL);",
            "item","_id", "item_id", "item_name"); 
```

[因为 AUTOINCREMENT 关键字和Sqlite](https://www.sqlite.org/faq.html#q1)中的“INTEGER PRIMARY KEY”不是必需的

# php - PHP preg_match 与 html 标签

> ID：12758235
> 
> 赞同：1
> 
> 时间：2012-10-06T08:49:30.457
> 
> 标签：php, string, preg-match

我正在尝试在模式中提取一些字符串。

字符串是

```
<br /><br /><br />Text i want here
<br /></div> 
```

我想要：“我想要的文字”

我的尝试是

```
preg_match('!<br /><br /><br />(.*?)<br /></div>!xi', $homepage, $matches); 
```

但是失败了。

**我使用 x 是因为它们之间可能
有一些空格或 \n。

```
<br />
<br />
<br />Text u want here
<br /></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:50:52.927

使用`strip_tags("<br /><br /><br />Text i want here<br /></div>")`.

[`strip_tags`](http://php.net/manual/en/function.strip-tags.php)将从字符串中删除所有 HTML 和 PHP 标记。

# apache - Apache lucene 更新存储字段

> ID：12758236
> 
> 赞同：0
> 
> 时间：2012-10-06T08:49:42.357
> 
> 标签：apache, lucene, indexing, field

> **可能重复：**
> [为什么 Lucene 不支持对现有文档进行任何类型的更新](https://stackoverflow.com/questions/12185406/why-lucene-doesnt-support-any-type-of-update-to-an-existing-document)

是否可以在文档被索引后更新存储的字段值（无需重新索引）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:09:31.847

简短的回答：没有。

您需要删除并重新添加文档，它是存储字段和索引字段。请参阅[IndexWriter.updateDocument() Javadoc](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/IndexWriter.html)：

> “通过首先删除包含术语的文档然后添加新文档来更新文档。删除然后添加是原子的，正如读者在同一索引上看到的那样（刷新可能仅在添加之后发生）。”

另一种选择是在 Lucene 之外存储任何需要更新的数据（比如在关系数据库中）。

正在进行各种[工作](http://mail-archives.apache.org/mod_mbox/lucene-dev/201207.mbox/%3C646949197.107669.1343332355563.JavaMail.jiratomcat@issues-vm%3E)以允许就地更新、存储或索引字段，但对于 Lucene V4 或更早版本没有任何具体内容。

# math - 表达式编程

> ID：12758237
> 
> 赞同：0
> 
> 时间：2012-10-06T08:49:46.067
> 
> 标签：math, expression, formula, equation, simplify

我已经构建了一个完整的工作计算器，可以评估任何表达式并绘制它。我还构建了一个**符号微分**器，可以正确区分公式 wrt x，但我对如何以编程方式简化任何通用方程有点迷茫，因为此时答案是很多倍的。我意识到 a*1 很容易简化，但我需要一个全面的简化器来涵盖任何情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:39:33.353

我认为简化是规范化的一种形式。您可能想要实现的第一件事是简化多项式：

*   计算任何不包含变量的子表达式
*   为您的变量定义一个顺序，除非*x*是您唯一有效的变量
*   根据变量对单项式中的项进行排序
*   基于此变量顺序，定义单项式的顺序，其中将变量及其度数考虑在内
*   根据多项式的单项式对多项式进行排序
*   识别重复的单项式并组合它们的系数
*   删除所有结果为零的单项式

如果您还想简化包含函数的表达式，事情可能会变得任意复杂。一般来说，我会尝试定义一些方法来衡量一个术语的简单性，即给定两个术语，决定两者中哪一个更简单。然后，您可以考虑规则并检查您是否可以保证它们只会使您的条款更简单。您可能还想检查终止（即，对于无限数量的步骤，您的条款不可能变得更简单）和汇合（即，当有两种可能的简化时，您下一步做什么都没有关系，因为最终结果将是相同的）。

您可能想阅读一些关于[术语重写](http://en.wikipedia.org/wiki/Rewriting#Term_rewriting_systems)、[重写系统](http://en.wikipedia.org/wiki/Rewriting)和相关主题的文献。

# javascript - 是否有一种工具可以根据 HTML 和 CSS 中的使用情况自动生成代码以预加载图像？

> ID：12758238
> 
> 赞同：3
> 
> 时间：2012-10-06T08:49:57.720
> 
> 标签：javascript, html, image, preload

我有一个相对较大的 Javascript Web 应用程序，其中包含许多图像，来自 HTML 或 CSS 的引用（但不是来自 Javascript 的动态引用）。是否有一个工具可以扫描我所有的 CSS 和 HTML 文件，收集所有检测到的图像的 URL:s 并生成预加载所有图像所需的代码，以便我只有在所有内容都下载后才能启动应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:03:19.410

也许您可以在 body 的 onload 处理程序中启动您的应用程序？它应该在获取所有内容时触发，然后您不需要遍历所有元素。

# java - 使用 MAC 地址/或其他硬件标识符唯一标识计算机

> ID：12758242
> 
> 赞同：0
> 
> 时间：2012-10-06T08:50:25.223
> 
> 标签：java, licensing

首先，我想说的是，我已经经历了很多在 stackoverflow 和其他地方发布的类似问题，但他们似乎没有回答我的确切问题。

我知道没有办法万无一失的软件注册等，这只是我试图弄清楚的一种方式，这样每个人都很难破解我正在制作的软件。

我一直在寻找使用 Mac 地址唯一标识用户（用于软件注册目的）。我正在开发的平台是 Java。现在，从 InetAddress 获取 Mac 地址对我来说有点冒险——当计算机有多个 MAC 地址（多个 NIC）时，就会有多个连接选项——通过 Wifi、以太网电缆、3G 加密狗等。不同的连接选项返回不同的 InetAddress以及与它们关联的不同 Mac - 因此我无法根据 Mac 地址的这个变化值验证用户的软件许可证。

还有另一种方法可以唯一地识别计算机吗？可以通过 Java 完成的任何其他硬件身份验证（即独立于平台 - 适用于 Windows、Mac 和 Linux）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:18:01.753

首先，在设计此类解决方案时应该非常小心。没有一种方法是万无一失的，您可能可以设计一个更简单的解决方案来停止随意复制。

无论如何，如果您打算检查硬件身份，我建议您检查系统中的许多设备（即网络适配器、[硬盘驱动器序列号](https://stackoverflow.com/questions/5482947/how-to-get-hard-disk-serial-number-using-java)、cpu 类型等），然后留出很大的余地以避免用户升级时出现问题。系统。

# python - 使用缓存限制 django 模型可以做什么：这是一个好主意还是坏主意？

> ID：12758253
> 
> 赞同：0
> 
> 时间：2012-10-06T08:51:36.000
> 
> 标签：python, django

我的 django 项目有一个用户模型，它具有在网站上执行操作的功能，例如发布内容、评论、编辑等。我在想办法限制每天的操作次数以防止垃圾邮件，而不是陷入烦人的状态与日期时间相关的东西我决定只将数据存储到缓存（memcached）中，为此创建一个功能。

编辑：找到解决方案：

我正在使用旧的实现，每天缓存帖子的数量，并将一天设置为超时。但是还有一个 celery 异步 cron 作业，它每天检查和擦除一次选定的缓存键。

所以我使用下面的原始代码，加上这个：

```
from django.core.cache import cache
from lib.cache_keys import daily_count_key
from django.contrib.auth.models import User

@periodic_task(run_every=crontab(hour='*/24')) # AKA run once a day
def wipeDailyLimits():
users = User.objects.all()
for user in users:
    cache.delete(daily_count_key("modelone", user))
    cache.delete(daily_count_key("modeltwo", user))
    cache.delete(daily_count_key("modelthree", user)) 
```

例子：

```
def post_entry(request):
   # post the entry
   daily_post_count = cache.get(request.user.id + "entrycount")

   if daily_post_count >= 5:
       return error

   if daily_post_count is None:
       daily_post_count  = 1

   if daily_post_count < 5:  # 5 posts per day
       daily_post_count += 1

   cache.set(request.user.id + "entrycount", daily_post_count , 86400)
                                               # Unix one day time out
   # return regular 
```

到目前为止，这个策略看起来不错，一切正常，但我想知道用户是否可以使用任何漏洞或技巧来破坏这个系统？如果是这样，大多数人如何处理 django 的限制？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:57:04.390

两件事情;

*   如果用户一次发布多个帖子，他们可能会通过，因为多个进程可以读取计数，都增加他们的 daily_post_count 并且都存储旧值 + 1（如果它们相互运行，它们会存储旧值+ 2 最后）不太可能成为问题。

*   您的计数不会完全按照您的意愿重置，因为您每次保存帖子时总是重置超时。如果我发一个帖子，然后 23 小时后又发一个，然后 23 小时后又发一个，计数将是 3，但 46 小时会过去。将计数器设置为 0 的唯一方法是等待 24 小时不发布，否则它永远不会减少。如果他们应该能够发帖却不能发帖，很可能会惹恼用户:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:44:23.683

我建议使用不同的方法。您当前的方法意味着即使在非垃圾邮件之后，用户也不知道他的帖子是否被传达。相反，如果您想限制，在呈现页面/站点之前，添加[中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs)来执行`count()`您想要约束的任何操作，并向您的`HTTPResponse`that states添加一个标志`daily_limt_exceeeded=True`。这样，您可以显示适当的基于标志的警告消息，并在达到限制后禁止用户发布。

如果您愿意，可以使用[Django 评论框架](https://docs.djangoproject.com/en/dev/ref/contrib/comments)在您的网站上发表评论，它带有一些垃圾邮件保护：

**评论表的注意事项**

*评论系统使用的表单具有一些您应该了解的重要反垃圾邮件属性：它包含许多隐藏字段，其中包含时间戳、有关评论应附加到的对象的信息以及用于验证此信息。如果有人篡改了这些数据——评论垃圾邮件发送者会尝试——评论提交将失败。如果您要呈现自定义评论表单，则需要确保将这些值原封不动地传递。时间戳用于确保“回复攻击”不会持续很长时间。在请求表单和发表评论之间等待太久的用户将被拒绝提交。*

评论表单包括一个“蜜罐”字段。这是一个陷阱：如果在该字段中输入了任何数据，评论将被视为垃圾邮件（垃圾邮件发送者通常会自动填写所有字段以尝试进行有效提交）。

默认表单用一段 CSS 隐藏这个字段，并用警告字段进一步标记它；如果您将评论表单与自定义模板一起使用，您应该确保这样做。评论应用程序还依赖于 Django 附带的更通用的跨站点请求伪造保护。如文档中所述，最好使用 CsrfViewMiddleware。但是，如果您不使用它，则需要在包含评论表单的任何视图上使用 csrf_protect 装饰器，以便这些视图能够输出 CSRF 令牌和 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T02:04:29.647

找到了一个具有双方优势但更易于实施的解决方案。我正在使用旧的实现，每天缓存帖子的数量，并将一天设置为超时。但是还有一个 celery 异步 cron 作业，它每天检查和擦除一次选定的缓存键。

用户会知道他们受到了限制，因为只是将变量传递到模板中。

无论如何感谢你们的帮助！

# php - 如何删除字符串前后的空格？

> ID：12758259
> 
> 赞同：32
> 
> 时间：2012-10-06T08:52:46.837
> 
> 标签：php, regex

我当然有两个以空格为主题的单词，并且前后有很多空格，我需要做的是删除前后空格而没有中间的一次。

如何删除它之前和之后的空格？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-06T08:53:36.110

你不需要正则表达式，使用[trim()](http://php.net/trim)：

```
$words = '      my words     ';
$words = trim($words);
var_dump($words);
// string(8) "my words" 
```

*此函数返回一个字符串，其中从 str 的开头和结尾去除了空格。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T09:05:00.180

为了完整起见（因为这个问题被标记`regex`），这里是`trim()`正则表达式的重新实现：

```
function preg_trim($subject) {
    $regex = "/\s*(\.*)\s*/s";
    if (preg_match ($regex, $subject, $matches)) {
        $subject = $matches[1];
    }
    return $subject;
}
$words = '      my words     ';
$words = preg_trim($words);
var_dump($words);
// string(8) "my words" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-18T11:15:28.070

由于某种原因，上面的两个解决方案对我不起作用，所以我想出了这个解决方案。

```
function cleanSpaces($string) {
    while(substr($string, 0,1)==" ") 
    {
        $string = substr($string, 1);
        cleanSpaces($string);
    }
    while(substr($string, -1)==" ")
    {
        $string = substr($string, 0, -1);
        cleanSpaces($string);
    }
    return $string;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-26T14:58:16.303

问题是关于如何使用正则表达式来做到这一点，所以：

```
$str1=~ s/^\s+|\s+$//g; 
```

也就是说`^`，在开头`\s+`（空白）`|`或`\s+$`（结尾的空白）`//g`重复删除。同样的概念适用于 'ed' (vi/vim)

有时最好只回答提出的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-06-18T17:00:22.013

如果修剪也不适合你，试试这个。您只需要将其写入不同的变量即可；

```
$str = ' hello world ';
echo strlen($str);

$trim_str = trim($str);
echo strlen($trim_str); 
```

# yql - YQL - 从 YMail 收件箱返回未读邮件

> ID：12758262
> 
> 赞同：1
> 
> 时间：2012-10-06T08:53:24.433
> 
> 标签：yql, yahoo-api, yahoo-mail

我正在尝试从 Yahoo Mail 的收件箱文件夹中返回仅未读邮件的列表。

我正在使用这个 YQL `SELECT * FROM ymail.search WHERE read="0"`- 这会返回所有未读消息。

但是这个 YQL`SELECT * FROM ymail.search WHERE fid="Inbox"`没有返回任何结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:53:38.593

尝试这样的事情

```
SELECT *
FROM ymail.messages
WHERE messageInfo.flags.isRead=0 
AND numMid=100 
```

其中 numMid = 您要检索的总数。

# c# - 在 C# 中循环访问多个 URL

> ID：12758270
> 
> 赞同：1
> 
> 时间：2012-10-06T08:54:33.407
> 
> 标签：c#, asp.net

我正在集成第三方 SMS 应用程序。**要求是单击**我网站上的网页上的按钮，将 SMS 发送到十个手机号码。

我们已经获得了一个 URL，我们必须在其中添加要发送的电话号码和消息。该 URL 一次只接受**一个**电话号码。

我有一个电话号码列表，我必须一一发送相同的消息。在遍历 list 时，我将电话号码添加到 url 并**`Response.Redirect(url)`**在每次迭代中执行。

但这只会在第一次**`Response.Redirect()`**发生时将 SMS 发送到列表中的第一个电话号码，它将浏览器带到给定 Url 指定的外部站点，并且不执行其余的 for 循环，即其余的电话号码未嵌入 url。

```
string[] phNos = { "91999999998", "91999999996" ,"91999999995"}; // Sample Mobile nos.

for(int i=0;i<phNos.Length;i++)
{

url = "baseurl/PushURL.fcgi?0&mobileno=" + phNos[i] + "&message="+ masg;

Response.Redirect(url);

} 
```

我读过，**`Server.Transfer()`**但这不能用于发送到外部站点。我的要求可行吗？请帮助我如何实现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T08:57:28.497

如您所见， Response.Redirect 将*用户*浏览器重定向到给定的 URL。

您要做的是让您的服务器使用服务器到服务器的通信访问所需的 URL。您可以使用 WebClient 轻松完成此操作。

```
var cli = new System.Net.WebClient();
for(int i=0;i<phNos.Length;i++)
{
    url = "baseurl/PushURL.fcgi?0&mobileno=" + phNos[i] + "&message="+ masg;
    cli.DownloadString(url);
} 
```

请注意，这将检索 url，有效地调用 API，*顺序*和*同步*，这可能不是您想要的。如果您想并行执行，可以`DownloadStringAsync`在 WebClient 上使用，但您需要编写一种机制，让您等到所有请求完成。这取决于您想要什么、可能有多少个数字以及您的性能限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T09:03:23.500

我建议使用 HttpWebRequest 或 WebClient

例如

```
for(int i=0;i<phNos.Length;i++)
{
  try
  {
    url = "baseurl/PushURL.fcgi?0&mobileno=" + phNos[i] + "&message="+ masg;

    Uri targetUri = new Uri(url);
    System.Net.HttpWebRequest hwb;
    hwb = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(targetUri);
    hwb.GetResponse();
  }
  catch (...)
  { // error handling
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T09:25:30.807

这种过程应该由 webservice / WCF（在应用程序服务器上）执行，因此使用上面的 webclient 但是 asp.net 页面应该调用 WCF 服务来执行您需要的操作。

网页并不真正适合这种事情，即使它是可能的。

# jenkins - CloudBees 的 Jenkins for FOSS 上的多配置项目

> ID：12758272
> 
> 赞同：0
> 
> 时间：2012-10-06T08:54:56.233
> 
> 标签：jenkins, cloudbees

FOSS（免费）用户可以在 CloudBees 的 Jenkins 中使用多配置项目吗？FOSS（免费）用户只有一个可用的执行器，但多配置项目至少需要两个：

*   启动每个配置的控制器
*   控制器调用的特定配置

控制器是一个一个调用所有配置的作业（调度程序）。请看一下我的多配置项目的日志：[Simple Spring Memcached](https://ragnor.ci.cloudbees.com/job/SSM%20%28integration%20tests%29/2/)。当控制器触发第一个配置时，它不会释放作业执行器。

有什么解决方法吗？

我认为使其工作的唯一方法是将多配置项目拆分为几个单个（maven）项目，但我想避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:44:10.627

我能想到的唯一解决方法是用另一个工作触发你的多配置工作。这个“无所事事”的工作将提供从属设备，什么都不做，然后作为构建后操作触发矩阵构建。然后，矩阵工作将能够运行矩阵父构建和所有配置的子构建。

# security - 用户登录安全 - 本地 cookie 与会话

> ID：12758277
> 
> 赞同：2
> 
> 时间：2012-10-06T08:56:12.607
> 
> 标签：security, cookies, login

我在这里阅读了一些关于这个主题的答案，人们说使用会话比只使用 cookie 更安全，但我不明白这怎么可能是真的。

假设您正在使用会话，并且在客户端的计算机上仅存储会话 ID。如果黑客获得了对客户计算机的访问权并窃取了会话 ID cookie，那么他实际上获得了对我网站上客户帐户的访问权，对吗？

现在，如果您只使用本地 cookie，并像客户端密码的散列部分 + 结合只有您的服务器知道的盐一样存储，黑客仍然可以通过从他的 PC 窃取他的 cookie 来访问他的帐户。

所以最终这两种方法没有区别，对吧？还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:09:24.370

没错，如果黑客获得了对您计算机的完全访问权限，那么无论哪种方式，您都会被塞满，直到会话在服务器端失效。

如果您只依赖 cookie 进行会话，那么使用会话 ID 或用户凭据的哈希值以及该用户唯一的盐值并不重要。它们是等效的，只要您可以调整服务器上的 salt 以使 cookie 值无效。通常您会应用两种盐：一种为每个用户定义，另一种适用于所有用户。这样，您可以根据需要使所有用户的所有会话无效，或者仅使选定的用户无效。

但是，有一个很好的理由不使用 cookie 进行会话：防止跨站点请求伪造 (XSRF)。例如，当您访问攻击者的网站时，它会调用您银行网站上的一个页面并将资金从您的帐户中转出。如果您的银行网站使用 cookie 进行会话，它将成功登录，因为浏览器会自动将会话 cookie 传递给站点。

避免这种情况的方法是在请求的有效负载中传递会话 ID 而不是作为 cookie 传递，并且在服务器端，只查看有效负载中的会话令牌来确定会话，而不是 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:07:34.870

您缺少的是必须有一个`team play`在 cookie、数据库和会话中的点。

要获得相当多的安全性，请执行以下步骤：

1.  当用户在选中记住我的情况下成功登录时，除了标准会话管理 cookie 之外，还会发出一个登录 cookie。

2.  登录 cookie 包含用户的用户名和一个来自适当大空间的随机数（从这里开始的“令牌”）。用户名和令牌作为一对存储在数据库表中。

3.  当未登录用户访问该站点并显示登录 cookie 时，会在数据库中查找用户名和令牌。

    *   如果该对存在，则认为用户已通过身份验证。使用的令牌将从数据库中删除。生成一个新令牌，与用户名一起存储在数据库中，并通过新的登录 cookie 发给用户。
    *   如果该对不存在，则忽略登录 cookie。
4.  仅通过此机制进行身份验证的用户不得访问某些受保护的信息或功能，例如更改密码、查看个人身份信息或花钱。要执行这些操作，用户必须首先成功提交正常的用户名/密码登录表单。

5.  由于这种方法允许用户从不同的浏览器或计算机中获得多个记住的登录信息，因此为用户提供了一种机制，可以在一次操作中清除所有记住的登录信息。

这来自 Charles Miller 的[文章](http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/)《持久登录 Cookie 最佳实践》

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T09:16:27.017

只是为了回答您的问题，仅此而已，会话更安全，因为存储在客户端（会话 ID）中的数据只能被黑客使用一段时间，然后自动过期。但是，如果您将登录信息的任何部分保留在客户端（作为 cookie），只要用户不更改它们，它们就会有效。您甚至可以通过每个请求重新生成会话 ID，以尽可能缩短会话 ID 的生命周期。

[编辑]

让我们调用存储在 client 中的信息`The Key`。它可以是会话 ID 或散列登录信息。使用此密钥用户可以验证他的请求。现在如果别人偷了`The Key`，他可以做任何用户可以做的事情。冒名顶替者不需要解密`The Key`就可以使用它，只要他可以复制它就可以了。阻止冒名顶替者的唯一方法是使`The Key`. 所以不管你的密钥是什么，只要它可以被复制。重要的是您何时以及如何使其无效。

# ruby-on-rails - 如何在rails url页面中显示控制器和视图的每个回溯

> ID：12758279
> 
> 赞同：0
> 
> 时间：2012-10-06T08:56:19.010
> 
> 标签：ruby-on-rails

# 例如：

```
#app/controllers/page_controller.rb:

def page
  title
end

def title
  nil
end

#app/views/page/page.html.erb:

<%= render :partial => 'head', 
```

所以如果我们点击 [http://example.com/page](http://example.com/page)

这个 url 将触发`page`和`title`控制。并渲染 `page.html.erb`和`head.html.erb`

有没有办法在每一页的某个地方打印这些信息？

这有点像回溯信息。

# opengl - 函数读取的深度数据是什么意思： glReadPixels of glut ？

> ID：12758280
> 
> 赞同：1
> 
> 时间：2012-10-06T08:56:33.703
> 
> 标签：opengl, glut

我使用 glut 来显示我的 3D 场景

```
glReadPixels(300,//xPos
             300,//yPos
             1,1,//size
             GL_DEPTH_COMPONENT,//type is depth
             GL_FLOAT,//return type is  float
             &point); 
```

我想用这个函数来获取像素的深度。但是返回的数据总是在范围内`[0,1]`，比如`0.999872, 0.999921.....` How can I convert it to real depth (from an object to camera)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:06:54.530

glReadPixels 手册：

```
 Depth values are read from the depth buffer.
                    Each component is converted to floating point such that the minimum depth
                    value maps to 0 and the maximum value maps to 1.
                    Each component is then multiplied by GL_DEPTH_SCALE,
                    added to GL_DEPTH_BIAS,
                    and finally clamped to the range [0, 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:55:45.887

> 我想用这个函数来获取像素的深度。但是返回的数据总是在[0,1]范围内，比如0.999872、0.999921.....

这些值在 glDepthRange 设置的范围内。默认值为 [0, 1]。

> 如何将其转换为真实深度（从物体到相机）

通过将屏幕空间坐标（您拥有的）投影回世界空间。您可以为此使用[gluUnProject](http://www.opengl.org/sdk/docs/man/xhtml/gluUnProject.xml)。它接受的`model`矩阵取决于您想要 ptoject 的空间。**OpenGL 没有摄像头**，因此这完全取决于您定义的查看矩阵。你没有显示你的绘图代码，所以我不能告诉你在什么时候复制模型视图矩阵来保存你需要的视图矩阵。

# python - 为从持久性中快速检索的事件建模

> ID：12758281
> 
> 赞同：1
> 
> 时间：2012-10-06T08:56:35.077
> 
> 标签：python, django, tastypie

嗨，我正在从事一个涉及建模事件的项目。

例如，PersonA 与 PersonB 约会，PersonB 与 PersonC 约会

并且想知道保存此数据的最佳方法是允许快速检索 Django 中给定人员的所有日期，因为在上面的示例中默认检索所有 PersonB 的日期我需要一个 OR 查询 where dater1 = PersonB 或 dater2 =人B？

我的一个想法是双向存储事件，所以在上面的例子中我会有

人A 日期人B 人B 日期人A 人B 日期人C 人C 日期人B

这样我就可以索引 dater1 列并快速检索所有 PersonBs 日期。

我的问题是。

a）有没有比将所有事件存储两次更好的方法来做到这一点

b）如果不是，我将如何修改 ORM 以双向存储事件。

我还将使用 Tastypie 或类似工具来提供 api。

非常感谢，埃德

# qt - QML 中 QString::arg() 的等价物是什么

> ID：12758282
> 
> 赞同：23
> 
> 时间：2012-10-06T08:56:38.557
> 
> 标签：qt, qml, qstring

我想知道如何在 QML 中有一个将被一些参数占用的字符串？Qt中的一些类似的东西：

```
QString str("%1 %2");
str = str.arg("Number").arg(12);//str = "Number 12" 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-01T14:49:00.327

在 QML 环境中，arg() 函数已经添加到字符串原型中，所以基本上你可以像 C++ 一样在 QML 中使用 string.arg()。

关于此的文档较少，但我确信它适用于 Qt 4.7 + QtQuick 1.1

看看 Qt 5 文档：http: [//qt-project.org/doc/qt-5.0/qtqml/qml-string.html](http://qt-project.org/doc/qt-5.0/qtqml/qml-string.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-14T14:59:21.487

只需使用：

```
"foo%1".arg("bar"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-08T11:35:49.667

如果您想要多个参数替换：

```
"foo%1 bar%2".arg("bar").arg("foo"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T14:03:22.377

您可以使用 jQuery 插件来做到这一点：

[http://docs.jquery.com/Plugins/Validation/jQuery.format](http://docs.jquery.com/Plugins/Validation/jQuery.format)

```
import "jQuery.js" as JQuery

    Page {

        property string labelStub: "hello {0}"

        Label {
            text: JQuery.validator.format(labelStub, "world")
        }
     } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-06T19:38:04.730

在这个例子中，参数是完全没有必要的。在 JS 中，我们有简单的字符串连接，它也支持中间的数字，所以你可以用一个简单的方法来实现

```
var str = 'Number' + ' ' + 12 
```

如果你真的想要非文字字符串中的参数，你可以用`%1`替换替换。`QString::arg`（有一个论点）无非如下：

```
function stringArg(str, arg)
{
    for(var i = 1; i <= 9; ++i)
        if(str.indexOf('%'+i) !== -1)
            return str.replace('%'+i, arg);
    return str;
} 
```

所以你的代码变成：

```
var str = "%1 %2"
str = stringArg(str, "Number")
str = stringArg(str, 12) 
```

（请注意，此函数只能处理`%1`.. `%9`，而`QString::arg`最多可以处理`%99`。这需要更多的逻辑，因为在我的代码中`%10`被视为 a `%1`。所以这与 不完全相同`QString::arg`，但在大多数情况下就足够了. 你也可以编写一个带有`stringArg`多个替换参数的函数，但为了简单起见，我在这里只写了这个。）

# c# - 更改未保存在 SQL Server Compact 3.5 数据库中

> ID：12758283
> 
> 赞同：2
> 
> 时间：2012-10-06T08:56:46.180
> 
> 标签：c#, data-binding, sql-server-ce, database-connection

我使用 C# 2010 创建了一个 Windows 应用程序，并且我使用的是 SQL Server Compact Edition 3.5。

我还使用 a`DataSet`来更改数据库`TabelAdapter`，并使用 bindingnavigat 来添加/编辑/删除。

问题是：我可以在执行期间执行所有这些命令，我​​可以看到在 a 中添加和编辑的行`DataGridView`，但是当我去服务器数据库解决方案并验证我的数据时，没有完成任何事件！没有添加行！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:18:53.927

您的数据库可能会从某处/项目名称复制到某处/项目名称/bin/Debug/。检查项目树中数据库文件的属性。应该将“复制到输出目录”属性设置为“始终复制”。如果存在“始终复制” - 您的应用程序正在处理数据库副本。

阅读帮助中的“复制到输出目录”。

这个问题有更详细的解释：[link to MSDN social](http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/25a093d2-8520-4727-8c6b-f5c3aefb3c2b)

（关于VB的问题，但它也适用于C#）

# android - Android：如何发送带有 URL 图像的 HTML 电子邮件

> ID：12758284
> 
> 赞同：-1
> 
> 时间：2012-10-06T08:56:52.600
> 
> 标签：android, email

我想在应用程序内发送带有 URL 图像的 html 内容电子邮件。HTML内容是这样的

我尝试以下代码但不工作

```
 Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "TITLE");
    emailIntent.setType("text/html");
    String sharingContent="<html><body><img src='http://www.XXXX.asdasd.png?_t=1341552822'><p><bold>HAHAHHAHAHAA</bold></p></body></html>";
    emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(more_cover_image_thumbnail)); 
    emailIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(sharingContent)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:19:31.713

您的答案：

```
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(sharingContent));
                     ^^^^^^^^^^^^^^^ 
```

# c - Process Scheduler Simulation 解析输入

> ID：12758287
> 
> 赞同：0
> 
> 时间：2012-10-06T08:57:12.300
> 
> 标签：c, io, scheduler

我目前正在使用 FCFS 和循环算法来模拟进程调度程序。

首先，我想让输入的解析尽可能简单......

我有一些结构来保存特定信息。该程序的工作原理如下：

```
my_project FCFS in.file
OR
my_project RR 2 in.file 
```

in.file 如下所示：

```
./Job1.txt
./Job2.txt
./Job3.txt
./Job4.txt 
```

所以我想处理这个输入文件并订购作业。

文本文件如下所示。

```
10
1fi
if i < 3 i=i+1 goto 8
3sdkfj
4ksdkk
5kdkfk
6kdkjf
7dkjkfd
if k < 2 k=k+1 goto 2
9dkkf
10dku
if j < 2 j=j+1 goto 2 
```

除了第一行（表示此作业的开始时间）和以 if 开头的行之外，所有行都是无意义的。即如果 i < 3 i = i+1 goto 4 表示只要 i 小于 3 就跳转到第 4 行。

所以基本上目前我想通过上面的命令行解析输入文件，并按开始时间（第一行）对作业进行排序。我真的很想尽可能高效地完成这一步。到目前为止，我已经编写了以下代码：

```
/* I/O Files */ 
static char *inputFile;
static FILE *input;

/*Scheduled jobs indexed by PID*/
struct job list[20];

/* the next job to schedule */
static struct job *job_next = NULL;

/* Time */
time clock;

/*Initialises job list* /
static void initialise_list(void) {
     for(int i = 0; i < sizeof(job_list); i++) {
        job_list[i].params.pid = -1;
    }
} 
```

/** 从输入文件读取并解析输入 */ static void parse_input(void) {

```
char buffer[BUFSIZ];
unsigned int jobs;

struct job *current;

jobs = 0;

initialise_list();

/** Read input file **/
while( fgets(buffer, sizeof(buffer), input)) {
    time start, finish;
    pid job;        

    //if(buffer[0] == '#') {
    //  continue;
    //}

    sscanf(buffer, "Job%d%ld", &job, &start);

        if(start < 0) {
            fprintf(stderr, "Job start time must be greater than or equal to 0,     found %ld.\n", start);
            exit(EXIT_FAILURE);
        }

        if(finish <= 0) {
            fprintf(stderr, "Job finish time must be greater than 0, found %ld.      \n", arrival);
            exit(EXIT_FAILURE);
        }

        current = &list[job];

        current->parameters.pid = job;
        current->parameters.start = start;

        jobs++;

}    

 int main(int argc, char **argv) {

    /* Open input and output files */
    for(int i = 0; i < argc; i++) {
        if(strcmp(argv[i], "in.file") {
            inputFile = argv[i];    
            input = fopen(inputFile,"r");
        }
    }
    if(!inputFile) {
        exit(EXIT_FAILURE);
    }
    parse_input();
    fclose;
    return EXIT_SUCCESS;
} 
```

我目前使用的结构。

```
/**
 * Simulation of a process scheduler
*/

#ifndef SCHEDULER_H_
#define SCHEDULER_H_

#include <stddef.h>

/* types */
/** units of time */
typedef long time;
/** process identifier */
typedef int pid;

/** Information about a job of interest to the task scheduler */
struct job_data {

/* pid of this process */
    pid pid;
    /* time process starts */
    time start;
    /* time needed to finish */
    time finish;
    /* time spent processing so far */
    time scheduled;
    /* size of the process */
    size_t size;

};

struct job {

    /* Various parameters used by the scheduler */
    struct job_data parameters;
    /* next job to be scheduled */
    struct job *next;

}; 
```

最后，我希望能够按开始时间的顺序对作业进行排序，以便它们准备好由特定算法安排。

所以我需要有关如何传递输入文件 in.file 的帮助，读取作业并获取开始时间和顺序，然后通过启动“滴答”时间，即文本文件的第一行。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:18:48.207

我不知道你的问题是什么（你似乎已经发布了你正在做的事情的描述而没有提出任何问题）。因此，我的答案不能成为答案，所以我将以一种“希望有用”的方式漫谈。

在真实系统中；不同的任务在不同的时间开始运行，在不同的时间阻塞以等待不同的事情（并且在它们等待的任何事情发生时被解除阻塞），最终它们终止/退出。

除此之外，还有一些高级功能；比如明确的任务优先级控制（例如“nice()”）、分组任务、CPU 时间配额等。我不确定你是否会担心这些事情。

您不需要实现 BASIC 的最小子集（带有变量、循环等）来实现这些，尝试这样做只会增加毫无意义的复杂性。每个文件可以是一个简单的线性列表。例如：

```
123         ;Starting time
r22         ;Task runs for 22 ticks
s23         ;Task blocks due to "sleep()" for 23 seconds
r4          ;Task runs for 4 ticks
f4          ;Task blocks waiting for "4 units" of file IO (how quickly it unblocks depends on file system load)
r32         ;Task runs for 32 ticks
n8          ;Task blocks until it receives 8 packets from network
r22         ;Task runs for 22 ticks
            ;Task terminates 
```

您可以随时向其中添加命令。例如，从“r”命令开始，然后添加“因睡眠而阻塞”等。最终您可以添加诸如“任务生成一个新任务”、“任务等待子进程退出”和“任务发送一些东西（通过管道、套接字等）解除另一个任务的阻塞”，等等。

您会注意到（在我的示例中）所有命令都采用“操作码，立即”形式。这是故意的 - 它使解析变得简单（获取字符，获取整数，将它们都添加到数组或链表中）。

# c# - 自定义文件扩展名的 HTTP 处理程序和 404 错误

> ID：12758290
> 
> 赞同：1
> 
> 时间：2012-10-06T08:57:42.210
> 
> 标签：c#, asp.net-mvc, localization, httphandler

关于自定义 HTTP 处理程序，我不太清楚。

我`ScriptTranslator`根据[这篇博客文章](http://madskristensen.net/post/Localize-text-in-JavaScript-files-in-ASPNET.aspx)创建了一个 HTTP 处理 程序，我已经通过以下方式在我的 web.config 文件中注册了处理程序：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
        <add name="ScriptTranslatorHandler" path="*.js.axd" verb="*" type="CamelotShiftManagement.HttpHandlers.ScriptTranslator" />
    </handlers>
</system.webServer> 
```

我还`IgnoreRoute`向我的 global.asax 添加了一个命令，以便网络应用程序可以根据 we.config 文件启动处理程序。

```
routes.IgnoreRoute("{resource}.js.axd/{*pathInfo}"); 
```

该处理程序假设从我的 html 文件中翻译一个 JS 文件引用，因此我修改了我的脚本引用并`axd`在末尾添加了一个扩展名。

处理程序接收请求并搜索没有 axd 扩展名的文件以获取需要翻译的脚本内容，这是基本`ProccessRequest`操作：

```
public void ProcessRequest(HttpContext context)
{
    string relativePath = context.Request.AppRelativeCurrentExecutionFilePath.Replace(".axd", string.Empty);
    string absolutePath = context.Server.MapPath(relativePath);
    string script = ReadFile(absolutePath);

    string translated = TranslateScript(script,CultureInfo.CurrentCulture);
    context.Response.Write(translated);
    Compress(context);
    SetHeadersAndCache(absolutePath, context);
} 
```

所以在我的 html 文件中，我只修改了 script 标签的引用，没有实际的文件被称为`myscript.js.axd`有一个文件叫做`myscript.js`.

我收到 404 错误。

我对创建和使用自定义 Http 处理程序还很陌生，我不知道对使用有什么期望。

引用的[博客文章](http://madskristensen.net/post/Localize-text-in-JavaScript-files-in-ASPNET.aspx)暗示代码中不应该有实际的 .js.axd 文件，并且对脚本引用的请求将重新路由到处理程序并使用我之前提供的代码中的前两行来处理实际的 .js 文件那。

天气不好或不设置自定义 HTTP 处理程序应该首先运行处理程序代码，然后才抛出 404 错误，或者我应该创建一个虚拟 myScript.js.axd 文件来支持处理程序操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:48:20.643

忽略 url 必须如下所示：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.IgnoreRoute("Scripts/{resource}.js.axd/{*pathInfo}"); 
```

然后加：

```
 <system.web>
    <httpHandlers>
      <add path="*.js.axd" verb="*" type="..." />
    </httpHandlers>
    ...
  </system.web> 
```

和：

```
 <system.webServer>
    ...
    <handlers>
        <add name="ScriptTranslatorHandler" path="*.js.axd" verb="*" type="..." />
    </handlers>
  </system.webServer> 
```

还要检查命名空间，文件`ScriptTranslator.cs`不包含它

**添加：**

默认`routes.IgnoreRoute("{resource}.axd/{*pathInfo}");`只忽略`localhost/test.axd`，而不是'localhost/Home/test.axd'，然后应用程序尝试查找匹配的路由但找不到它，然后我们收到404。

# php - Geoip：从php中的数组中选择值

> ID：12758291
> 
> 赞同：0
> 
> 时间：2012-10-06T08:57:59.057
> 
> 标签：php, geoip

我有这个[样本](http://www.php.net/manual/en/function.geoip-region-by-name.php)：

```
<?php
$region = geoip_region_by_name('www.example.com');
if ($region) {
    print_r($region);
}
?> 
```

它将打印：

```
Array
(
    [country_code] => US
    [region] => CA
) 
```

我想做这个：

```
 <?php
    $region = geoip_region_by_name('www.example.com');
    if ($region) {
         print($region['region']);
    }
    ?> 
```

但它显示了一个布兰科记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:45:43.773

Most likely you don't have `geoip_region_by_name` installed try running the following

```
 error_reporting(E_ALL);
  ini_set("display_error", "On");
  $region = geoip_region_by_name('www.google.com');
  var_dump($region); 
```

If you get output definitely the following would work

```
print($region['region']); 
```

# ios - 如何在sqlite ios中比较月份和年份与日期时间

> ID：12758292
> 
> 赞同：-1
> 
> 时间：2012-10-06T08:58:10.663
> 
> 标签：ios, datetime, sqlite

当我直接在 sqlite manager 中测试这个查询时，它显示的结果很好，但是当我用 iphone 模拟器测试它时，它显示如下：

![询问](../Images/e0f948fa1c89e1a1c2d2c4d907a36d24.png)

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:04:12.677

尝试转义`%`SQL 中的字符，以便`stringWithFormat`知道不要尝试用值代替它们。像：

```
NSString* select = [NSString stringWithFormat:@"select * from orders where isPaid = 1 and strftime('%%Y-%%m',dateOrder) = '%@'",dateString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:02:44.610

将代码查询替换为以下

```
NSString* select = [NSString stringWithFormat:@"select * from orders where isPaid = 1 and strftime('%%Y-%%m',dateOrder) = '%@'",dateString]; 
```

# php - 如果其中一个字段按以下方式分组，则不会获取表中其他字段的所有结果

> ID：12758299
> 
> 赞同：-1
> 
> 时间：2012-10-06T08:59:51.957
> 
> 标签：php, mysql

我正在对汽车表中的模型字段进行分组，但是我从按模型分组的每个差异中只得到一个，一个结果，而不是全部。

假设在 model 字段下有三个 1990、19190、1990 并且三个汽车 suzuki、honda、tyota 是 undel car_name，其型号是 1990 。但我得到的结果只有一个汽车名称在 1990 型号下。请帮助我。

```
 $sql=mysql_query("SELECT * FROM cars group by  model ");
    while ($row=mysql_fetch_array($sql)) {
       $car_name=$row['car_name'];
       $model=$row['model'];

            ?>

    <table>

        <tr>
            <td><?php  echo $model ?></td>   //here is displaying  1990.

        </tr >
        <tr  >
              <td> <?php   echo $car_name;  ?></td>    // but here is displayed only onr car name istead of all.

        </tr>

    </table>

    <?php

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:28:12.150

当您按特定列分组时，您只要求为该列的每个值提供一行。如果你想要 1990 年的本田和 1990 年的铃木，你应该使用`GROUP BY car_name, model`来获得这对柱子的所有独特组合。

顺便说一句，您的模型列是否包含年份？车型有雅阁、凯美瑞、赛利卡等名称。

编辑：

我想这就是你要找的：

```
SELECT model, GROUP_CONCAT(car_name)
FROM cars
GROUP BY model 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T09:32:40.067

我相信这应该有效

```
<table>
  <?php 
     /* use this if doing process elimination. 
      $q = '1990';
      $sql=mysql_query("SELECT * FROM cars WHERE model = '$q' "); 
    */
    $sql=mysql_query("SELECT * FROM cars WHERE ORDER By model ASC ");
    while ($row=mysql_fetch_array($sql)) {  ?>
        <tr>
            <td><?php  echo $row['model']; ?></td>   //here is displaying  1990.

        </tr >
        <tr  >
              <td> <?php   echo $row['car_name'];  ?></td>    // but here is displayed only onr car name istead of all.

        </tr>
 <?php     }      ?>
    </table> 
```

# jquery - 打印页面的特定部分

> ID：12758301
> 
> 赞同：0
> 
> 时间：2012-10-06T09:00:11.020
> 
> 标签：jquery, html, css

我进行了相当多的搜索，试图找到一个可以让我只打印页面的一部分的结果。

每个人都说要这样做：

## 添加到 HTML 头部：

```
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

## 打印.css

```
body * { display: none; }
.printable { display: block; } 
```

## Javascript

```
window.print(); 
```

但我无法让它工作，它加载打印窗口，但实际上并没有显示任何内容。

[http://pmf.v5.cloudsvr.com.au/set_times](http://pmf.v5.cloudsvr.com.au/set_times)

这是我的页面，右侧有打印链接。

亲切的问候，香农

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:17:15.847

您的`body *`选择器比 更具体`.printable`，因此它会覆盖它。`print.css`在你的文件中使用这样的东西：

```
* {
    display: none;
}
body .printable {
    display: block;
} 
```

# azure - 如何使用“InProc”sessionState 将 MVC4 应用程序转换为 Azure

> ID：12758302
> 
> 赞同：1
> 
> 时间：2012-10-06T09:00:12.380
> 
> 标签：azure, asp.net-mvc-4, asp.net-4.5, session-state

到目前为止，我在 MVC4 中使用了一个托管在单个服务器上的应用程序。会话是这样处理的：

```
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers> 
```

现在，我想将此应用程序移植到 Azure，当然，以支持多个实例。我阅读了很多博客，我可以找到使用 AppFabric、AzureStorage、SQL Azure 的解决方案，您必须手动删除会话......等等。

是否有解决方案使应用程序使用 SQL Azure 来存储其会话，而无需手动清理会话？对我来说，会话​​在 Azure 上似乎是一个如此大的话题，这让我感到很奇怪。

我看到有可能使用通用“默认配置文件提供程序” [http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

据我了解，我们只需要做一个 Install-Package system.web.Providers

然后添加：

```
 <sessionstate mode="Custom" customprovider="DefaultSessionProvider">
        <providers>
                      <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider"  connectionstringname="DefaultConnection" applicationname="/">
         </add></providers>
    </sessionstate> 
```

这仍然是 Visual Studio 2012 + MVC4 + .Net 4.5 的方式吗？

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:00:58.543

We use the Universal provider in our app. It is MVC4 and hosted on Azure. It still seems like the best way to handle saving session state so it is accessible across role instance etc

# c# - 无法从同一解决方案的另一个项目中引用类

> ID：12758303
> 
> 赞同：0
> 
> 时间：2012-10-06T09:00:19.663
> 
> 标签：c#

我的解决方案包含几个项目，包括`Commons`和`TerminatorConsole2`. 现在我想从文件中引用`Commons.Constants`类：`TerminatorConsole2.Utils.Constants`

```
namespace TerminatorConsole2.Utils
{
    class Constants
    {
        public const string MANAGEMENT_CONSOLE_ADDRESS =
            Commons.Constants.USE_EXTRA_WCF_INSTANCE ?
                "net.pipe://localhost/xxx" :
                "net.pipe://localhost"; 
```

但是我在“Commons”上收到“无法解析符号”。添加“使用 Commons”没有帮助，我收到同样的错误。

为什么一个项目不能使用同一解决方案的另一个项目中的类？

**UPD**添加`Constants`类。但是我已经在另一个项目中使用了它，所以我认为这个类是可以的：

```
namespace Commons
{

public class Constants
{
    public const int MAX_INSTRUMENTS_NUMBER_IN_SYSTEM = 200;
    public const bool USE_EXTRA_WCF_INSTANCE = true;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:01:20.270

默认情况下，类的范围是内部的，这意味着可以在该程序集中访问 将类公开以使其可供其他程序集访问。有关**[访问修饰符](http://msdn.microsoft.com/en-us/library/ms173121.aspx)**的更多信息还要确保您添加了您正在引用的程序集的引用。

**改变**

```
class Constants
    {
        public const string MANAGEMENT_CONSOLE_ADDRESS =
            Commons.Constants.USE_EXTRA_WCF_INSTANCE ?
                "net.pipe://localhost/xxx" :
                "net.pipe://localhost"; 
```

**到**

```
public class Constants
    {
        public const string MANAGEMENT_CONSOLE_ADDRESS =
            Commons.Constants.USE_EXTRA_WCF_INSTANCE ?
                "net.pipe://localhost/xxx" :
                "net.pipe://localhost"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:08:50.653

试试这个：添加`public`到类`Constants`

```
namespace TerminatorConsole2.Utils
{
    public class Constants
    {
        public const string MANAGEMENT_CONSOLE_ADDRESS =
            Commons.Constants.USE_EXTRA_WCF_INSTANCE ?
                "net.pipe://localhost/xxx" :
                "net.pipe://localhost";
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:20:02.913

[jeroenh](https://stackoverflow.com/users/20047/jeroenh)在评论中正确回答了这个问题......我需要添加参考。

我不需要声明 class `public`，因为只有使用的 class 应该是 public。“使用”的类不必公开。

# c# - 如何使用图形绘制填充多边形

> ID：12758306
> 
> 赞同：0
> 
> 时间：2012-10-06T09:01:08.290
> 
> 标签：c#, asp.net

在 System.Drawing.Graphics 命名空间中，您可以像这样绘制多边形：

```
using (Graphics g = Graphics.FromImage(bmp))
{
  g.DrawPolygon(Pens.Black, myArray);
} 
```

并且有一种创建填充多边形的方法`g.FillPolygon()`。

你如何创建一个多边形（所以它有一个边框）然后填充它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T09:20:34.193

只需绘制填充的多边形，然后绘制周长，使其看起来像有边框：

```
using (Graphics g = Graphics.FromImage(bmp))
{
    g.FillPolygon(fillBrush, myArray);
    g.DrawPolygon(borderPen, myArray);
} 
```

# php - 我应该用 AJAX 刷新吗？

> ID：12758307
> 
> 赞同：0
> 
> 时间：2012-10-06T09:01:17.313
> 
> 标签：php, jquery, ajax, page-refresh, browser-refresh

我正在制作将加载大量图像数据的大学网络，我可以使用永不刷新的 AJAX 制作整个网站吗？浏览器可以处理它还是会在某个时候停止工作并且需要刷新来刷新现金？感谢您的回答:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:07:31.080

您可以使您的网站仅基于 AJAX 驱动的页面。如果您用新内容替换内容，您不必担心 DOM 会用新内容重建。

另一方面，如果您正在制作诸如无限滚动之类的东西，这将对客户端的浏览器产生影响，因为需要呈现的 html 越大，浏览器的速度就越慢。

作为答案：是的，您可以使您的网站完全采用 AJAX，但这里有一些注意事项：

*   考虑搜索引擎；
*   考虑特定页面的完整 URL
*   考虑内容共享

所以在需要的时候使用 AJAX，而不仅仅是为了不重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:08:39.660

只要你的代码很好（保持对 DOM 和 javascript 代码/绑定的控制），我认为它没有问题。由于 i 将它们排队，浏览器可以处理几乎无限数量的请求。唯一的瓶颈是网络速度和设备/浏览器处理速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:09:39.807

刷新是请求页面。AJAX 正在请求一个页面，但保留您的旧请求 + 新请求。（更改 DOM）

所以是的，你可以..

# highcharts - 动画在 Highcharts 中的初始加载和动态数据序列替换之间表现不同

> ID：12758314
> 
> 赞同：2
> 
> 时间：2012-10-06T09:02:23.857
> 
> 标签：highcharts

我有一个 Highchart 图表来显示一些带有动画的数据系列。该图表具有线型和列型的组合。每个数据系列集都可以用另一个集完全替换。

问题是：在初始加载时，动画是平滑的并且适用于所有数据系列。但是当我进行数据系列替换并重新绘制图表时，动画似乎消失或不如初始加载那么流畅。

我需要动画表现一致，与最初的一样。

我的数据系列替换代码如下：

```
var i_limit=chart["series"]["length"];
for(var i=0;i<i_limit;i++)
{
    chart.series[0].remove(true);
}
var i_limit=data1.length;
for(var i=0;i<i_limit;i++)
{
    chart.addSeries(data1[i],true);
    chart["redraw"]()
} 
```

我的 jsFiddle 显示了这个问题的完整代码：http: [//jsfiddle.net/dinoJS/axQNU/1/](http://jsfiddle.net/dinoJS/axQNU/1/)。（点击按钮触发数据系列替换）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T10:16:41.443

图表有一个`animation`属性。您可以调整动画的持续时间，提供更长的过渡，从而获得更平滑的外观。

[这是具有此属性的更新 JSFiddle](http://jsfiddle.net/eqb5e/)。您可以在[此处找到 chart.animation 属性的文档](http://api.highcharts.com/highcharts#chart.animation)。

# pthreads - 程序中止或退出时是否释放 pthread_mutex_t*？

> ID：12758317
> 
> 赞同：2
> 
> 时间：2012-10-06T09:03:01.207
> 
> 标签：pthreads, free, exit, abort

分配的 pthread_mutex_t* 使用“malloc()”，当程序中止或退出时，需要释放它吗？如果不免费的话，会不会有问题？只是我知道，当您的进程终止时，系统将回收内存。pthread_mutex_t 可能有不好的影响？

就像问题一样：

我的程序（文本模式的网络浏览器）正在动态分配内存。

当然，我会在运行时释放不需要的块。而且我会在正常终止之前释放所有内容 - 这样内存泄漏检查器就不会给我误报（并且在需要重大重构时保持灵活性）。

现在，我不做的是在异常终止之前释放内存。（目前，我的程序在信号和 malloc/reallocs 失败后终止。）

我的问题是：你认为这种不好的风格吗？我应该在异常终止时释放吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:51:21.717

我对所有这些“在正常终止时释放一切”的口头禅（甚至是异常终止）的看法是，通常情况下，缺点大于优点：

1) 操作系统已经经过数十亿用户的设计、测试和浸泡测试。它可以在停止任何内核上处于任何状态的每个线程后轻松释放所有剩余的分配内存。你能用你的用户代码做到这一点吗 - 不。

2）您必须添加代码才能做到这一点。每次添加代码时，都可能会添加更多错误。除非您是操作系统，否则试图在繁忙的复杂多线程系统中释放所有分配的内存是一场噩梦。内存无处不在，在线程变量、队列等中，并且当前可能会或可能不会被一个或多个线程访问。所有权是不确定的并且不断变化。你要做什么？

3）您必须不断测试和扩展您的关机系统，以确保在更改/增强/升级后释放所有内存。

4）不断检查线程中的“终止”标志等，以便线程可以在关闭时释放一些内存，这是额外的开销。

5) 许多库在关闭时不会释放所有内存。如果库是不透明/半透明的，您可能无法对其执行任何操作。

6）如果一个线程抛出一个严重的异常，内存可能处于这样一种状态，试图从用户代码中释放它会导致其他线程中的更多异常。

7) 风险/回报 - 漂亮、干净的 Valgrind 输出与来自客户的电话/电子邮件“嘿，您的应用程序有时不会关闭，我们必须打电话给管理员 kill-9/TaskManager 它”。

8) 过滤和统计 SO re 上的所有线程。“无法停止我的线程以关闭我的应用程序”。

对于某些应用程序，不可避免的是某些线程可能必须在正常关闭时以结构化方式终止，例如。提交和关闭数据库连接，刷新和关闭文件。即使正常关机，释放内存也不属于该类别。

如果您的应用程序确实遇到了严重问题，您不应该尝试“清理”内存——您的应用程序已经很脏，需要报废并用新实例替换。

# database - 从 MS Word 复制到可编辑的 div 并保存到 DB 会导致单词之间缺少一些空格

> ID：12758330
> 
> 赞同：1
> 
> 时间：2012-10-06T09:04:37.070
> 
> 标签：database, html

我有一个可编辑的 div。我将其内容保存到数据库。问题是当我将文本从 MS Word 复制到可编辑 div 时，所有格式都可以。但是当我从数据库中检索我保存的内容时，有些单词之间没有空格。我复制的文字是俄语。

我有和可编辑的 div

```
<div class='myh5'>Контент страницы</div>
<div ID='contentDiv' contenteditable='true'> 
    Выберите страничку...
</div> 
```

和一个隐藏的输入字段，我在其中复制可编辑 div 的内容以将其保存到数据库中：

```
<form action = '".site_url('admin/save')."' method='post'>
<input type='text' name='content' id='input' class='displayNone'></input>
<input type='submit' value='Сохранить изменения' onclick='getPageContent()'></input> 
```

这是我使用 javascript 将内容复制到输入字段的方法：

```
// send the data from the editable div
var input = document.getElementById('input');
var contentDiv = document.getElementById('contentDiv');
function getPageContent() {
    input.value = $('#contentDiv').html();
} 
```

这是我使用名为 CodeIgniter 的 php 框架将内容保存到数据库的方法。

```
$content = $this->input->post('content');
    $content = addslashes($content);    
    $sql = "
        UPDATE pages
        SET content_$lang='$content', name='$renamePage', title_$lang='$title'
        WHERE name='$pageName'
    ";
    $query = $this->db->query($sql); 
```

那么可能是什么原因呢？我该怎么做才能让我的文本在数据库中，因为它在可编辑的 div 中？

# ruby-on-rails - 将具有不同连接的多个范围链接到 squeel 中的同一个表

> ID：12758331
> 
> 赞同：0
> 
> 时间：2012-10-06T09:04:43.517
> 
> 标签：ruby-on-rails, squeel

这个问题出现在 squeel 1.0.11 上。我已经提交[了一个问题](https://github.com/ernie/squeel/issues/179)，但认为社区可能已经有了答案。

我的模型中同一个表有两个关系，我在两个不同范围的连接中使用这两个关系。

```
class Log < ActiveRecord::Base
  attr_accessible :created_by_id, :updated_by_id
  belongs_to :created_by, class_name: "User"
  belongs_to :updated_by, class_name: "User"
  scope :suggested,
    joins{created_by}.
    where{(created_by.can_admin_logs == false) | 
          (created_by.can_admin_logs == nil)}
  scope :not_edited,
    joins{updated_by}.
    where{(updated_by.can_admin_logs == false) |
          (updated_by.can_admin_logs == nil)}
end 
```

当这些范围一起更改时，sql 不正确。

```
Log.suggested.not_edited.to_sql 
```

> SELECT "logs".* FROM "logs" INNER JOIN "users" ON "users"."id" = "logs"."created_by_id" INNER JOIN "users" "updated_bies_logs" ON "updated_bies_logs"."id" = "logs "."updated_by_id" WHERE (("users"."can_admin_logs" = 'f' OR "users"."can_admin_logs" IS NULL)) AND (("updated_bies_logs"."can_admin_logs" = 'f' OR "updated_bies_logs". “can_admin_logs”为空））

我已经修改了各种更改来解决`updated_bies_logs`问题，但还没有找到解决方案。

1.0.11 的发行说明似乎解决了这个问题，但我更新了我的 gem，问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:36:00.300

除了 jdoe 的回答之外，您可能还希望将作用域包装在 lambda 中，以避免在加载模型时执行。请注意，当涉及范围内的 lambda 时，存在一些问题：[http ://ryreitsma.blogspot.com.au/2011/07/ruby-on-rails-3-chaining-scopes-with.html](http://ryreitsma.blogspot.com.au/2011/07/ruby-on-rails-3-chaining-scopes-with.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:09:02.210

你做了一些扭曲的瞄准镜。毫不奇怪，你让你的尖叫声尖叫起来:)

我会把它做成这样的：

```
# in User
scope :cannot_admin_logs, where{can_admin_logs.eq_any [false, nil]}

# in Log 
scope :suggested,  joins{created_by}.merge(User.cannot_admin_logs)
scope :not_edited, joins{updated_by}.merge(User.cannot_admin_logs) 
```

# java - 如何更改 AsyncTask 中的 ListView？

> ID：12758336
> 
> 赞同：0
> 
> 时间：2012-10-06T09:05:31.427
> 
> 标签：java, android, android-listview, android-asynctask, listadapter

我有一些从服务执行的 AsyncTask 类：

```
public class DownloadTask extends AsyncTask<Void, Integer, Boolean {

    @Override
    protected Boolean doInBackground(Void... arg0) {
        // do something
        publishProgress(i);
    }

    @Override
    protected void onProgressUpdate(Integer ... progress) {
        if(textView()!=null) getTextView().setText(i + "%");
    }

    public void setTextView(TextView textView) {
        this.textView = textView;
    }

} 
```

和 ListAdapter，在方法中`getView()`我使用 AsyncTask 的方法在 AsyncTask 中设置 TextView `setTextView()`：

```
public class DownloadTasksAdapter extends BaseAdapter {
    private final Activity context;
    private DownloadTask[] downloadTasks;

    public DownloadTasksAdapter(Activity context, DownloadTask[] downloadTasks) {
        this.context = context;
        this.downloadTasks = downloadTasks;
    }

    public int getCount() {
        return downloadTasks.length;
    }

    public DownloadTask getItem(int position) {
        return downloadTasks[position];
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {       
        LayoutInflater inflater = (LayoutInflater) context.getLayoutInflater();
        final View rowView = inflater.inflate(R.layout.downloads_listview_row, parent, false);

        final TextView progressTxt = (TextView) rowView.findViewById(R.id.downloads_listview_row_progress);

        switch (downloadTasks[position].getStatus()) {
        case RUNNING:
            downloadTasks[position].setTextView(progressTxt);

            break;
        }

        return rowView;
    }
} 
```

AsyncTask 从服务执行，但是当我打开包含 ListView 的 Activity 时，AsyncTask 应该更新一些字段，我该怎么做？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:18:37.690

完成任务调用后

```
mAdapter.notifyDataSetChanged(); 
```

# java - 为什么这两个乘法运算会给出不同的结果？

> ID：12758338
> 
> 赞同：37
> 
> 时间：2012-10-06T09:05:52.767
> 
> 标签：java, int, long-integer, multiplication, operation

为什么我需要添加一个“L”字母才能获得正确的长值？另一个价值是什么？

```
long oneYearWithL = 1000*60*60*24*365L;
long oneYearWithoutL = 1000*60*60*24*365;
System.out.println(oneYearWithL);//gives correct calculation result : 31536000000
System.out.println(oneYearWithoutL)//gives incorrect calculation result: 1471228928 
```

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-10-06T09:08:22.697

```
long oneYearWithL = 1000*60*60*24*365L;
long oneYearWithoutL = 1000*60*60*24*365; 
```

您的第一个值实际上是 long （因为`365L`是 a `long`，并且`1000*60*60*24`是 a `integer`，所以带有值的值的结果是一个`multiplying`值。`long``integer``long`

但是第二个值是一个整数（因为你只是将一个`integer`值与一个`integer`值相乘。所以结果将是一个`32-bit`整数。现在获得的结果`multiplication`超出了整数的实际范围。所以，在分配给变量之前，它被截断以适应有效的整数范围。

看看下面的打印语句：-

```
System.out.println(1000*60*60*24*365L);
System.out.println(1000*60*60*24*365);
System.out.println(Integer.MAX_VALUE); 
```

当你运行上面的代码时： -

**输出： -**

```
31536000000
1471228928
2147483647 
```

所以，你可以看到区别..

```
011101010111101100010010110000000000 -- Binary equivalent of 1000*60*60*24*365L
    01111111111111111111111111111111 -- Binary equivalent of Integer.MAX_VALUE 
```

因此，如果您不在`L`数字末尾添加它，则会从第一个二进制字符串中删除 4 个最高有效位。

所以，字符串变成..

```
(0111)01010111101100010010110000000000 -- Remove the most significant bits..
      01010111101100010010110000000000 -- Binary equivalent of 1471228928 
```

**（作为输出得到）**

* * *

**更新：-** 从上面的解释中，您也可以理解，即使在第一次赋值中，如果您的结果`multiplication`乘以`integers`它之前`365L`超出范围，那么它将再次被截断以适合整数范围，或转换为`2's complement representation`如果需要，然后只有它会乘以`long value - 365L`.

例如： -

```
long thirtyYearWithL = 1000*60*60*24*30*365L; 
```

在上面的例子中，考虑第一部分 - `1000*60*60*24*30`。这个乘法的结果是： - `2592000000`。现在让我们看看它是如何表示的`binary equivalent`： -

```
2592000000 = 10011010011111101100100000000000  -- MSB is `1`, a negative value
             01100101100000010011100000000001  -- 2's complement representation 
```

表示的十进制表示`2's complement`是`1702967297`。因此，在乘以 之前`2592000000`转换为。现在，因为这个值适合: - ，所以它不会被进一步截断。`-1702967297``365L``integer range``[-2147483648 to 2147483647]`

因此，实际结果将是：-

```
long thirtyYearWithL = 1000*60*60*24*30*365L;
                     = 2592000000 * 365L;
                     = -1702967297 * 365L = -621583063040 
```

所以，所有这些东西只是考虑`type`应用算术运算的最终结果的实际情况。并且此检查是针对从移动的操作的每个临时结果执行的`left to right`（考虑具有`left-to-right`关联性的运算符）。如果发现任何临时结果超出范围，则将其相应地转换为适合所需范围，然后再进行下一个操作。

* * *

**更新 2： -**

所以，而不是： -

```
long thirtyYearWithL = 1000*60*60*24*30*365L; 
```

如果您`365L`在开始时移动您的，那么您将得到正确的结果：-

```
long thirtyYearWithL = 365L*1000*60*60*24*30; // will give you correct result 
```

因为，现在您的`temporary`结果将是 type `long`，并且能够保持该值。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-06T09:21:47.313

如果没有，`L`您的计算将作为 32 位值执行。如果将值表示为十六进制，则较小的值只是较大值的低 4 个字节。

Java 默认为 32 位整数类型。Long的`L`64 位。通过放置`L`after `365`，您告诉编译器将 365 视为一个`long`值。当 32 位和 64 位值相乘时，编译器会将 32 位值向上转换为 64 位，以便计算表达式的中间结果保留完整的 64 位范围。

请参阅[Java 语言规范](https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)中的**原始类型和值**。

乘法的行为在[https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.1](https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.1)明确定义，如下：

> # 15.17.1 乘法运算符 *
> 
> 二元`*`运算符执行乘法，产生其操作数的乘积。如果操作数表达式没有副作用，则乘法是一种交换运算。当操作数都是相同类型时，整数乘法是关联的，而浮点乘法不是关联的。*如果整数乘法溢出，则结果是数学乘积的低位，*以某种足够大的二进制补码格式表示。因此，如果发生溢出，则结果的符号可能与两个操作数值的数学乘积的符号不同。
> 
> 浮点乘法的结果受 IEEE 754 算术规则的约束：
> 
> *   如果任一操作数为`NaN`，则结果为`NaN`。
> *   如果结果不是`NaN`，则如果两个操作数的符号相同，则结果的符号为正，如果两个操作数的符号不同，则结果的符号为负。
> *   无穷大乘以零会得到 NaN。
> *   无穷大与有限值相乘得到有符号无穷大。符号由上述规则确定。
> *   在其余情况下，既不涉及无穷大也不涉及 NaN，则计算精确的数学乘积。然后选择一个浮点值集：
>     *   如果乘法表达式是 FP-strict（第 15.4 节）：
>         *   如果乘法表达式的类型是`float`，则必须选择浮点值集。
>         *   如果乘法表达式的类型是`double`，则必须选择双精度值集。
>     *   如果乘法表达式不是 FP-strict：
>         *   如果乘法表达式的类型是`float`，则可以根据实现的心血来潮选择浮点值集或浮点扩展指数值集。
>         *   如果乘法表达式的类型是`double`，则可以根据实现的心血来潮选择双精度值集或双扩展指数值集。
> 
> 接下来，必须从所选值集中选择一个值来表示产品。
> 
> 如果乘积的量级太大而无法表示，我们说操作溢出；结果是无限的适当符号。
> 
> 否则，将使用 IEEE 754 舍入到最接近模式将乘积舍入到所选值集中的最接近值。Java 编程语言需要支持 IEEE 754 (§4.2.4) 定义的逐渐下溢。
> 
> 尽管可能会发生上溢、下溢或信息丢失，但乘法运算符的求值`*`永远不会引发运行时异常。

# javascript - 站点地图、javascript 重定向和谷歌

> ID：12758339
> 
> 赞同：3
> 
> 时间：2012-10-06T09:05:54.610
> 
> 标签：javascript, redirect, sitemap

我有一个网站，它在其索引页面的网格中显示所有产品。我使用井号来使某些产品处于活动状态（我的意思是 - 一些产品周围带有边框，而其他产品则处于非活动状态）。例如：`http://mysite.net/#15`--> 显示带有边框的产品 #15，所有其他产品都处于非活动状态。

不幸的是，这种格式不适合在 Google 中建立索引，因为所有产品和信息都在一个地方，我无法为此形成一个好的结构。为了解决这个问题，我编写了一个脚本，它使用另一个 URL 生成单个产品视图。例如：`http://mysite.com/product/color_separation.html`--> 仅显示一种产品。这很好用在站点地图中，但我希望我的访问者在网格视图中看到产品。

如果我在单个页面视图中放置一些 javascript 以将访问者从`http://mysite.com/product/color_separation.html`网格视图重定向到任意激活产品的网格视图，`http://mysite.net/#15`当 Google 机器人浏览站点地图中的所有单个页面时，这会导致任何麻烦吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:08:35.253

Google Bot 访问单一视图页面不会有任何问题，但使用 Javacript 将用户重定向到另一个页面可能会被视为伪装，更多信息请参阅[Google Webmaster Tools 支持](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=2721217&topic=2371375&ctx=topic)

我认为您可以使用 HTML5 History API，但因为您的所有产品都在同一个页面（和 URL）中，并且更改只是装饰性的，对您没有帮助。谷歌可能只是看到了[重复的内容](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=66359)。

如果您希望所有产品都在 Google 中编入索引，则必须为每个产品创建一个唯一的 URL。*这是URL中***R**（资源）
的含义:)。

# ruby-on-rails - Rails bootstrap-sass 重新定义/重载 mixins

> ID：12758340
> 
> 赞同：9
> 
> 时间：2012-10-06T09:05:58.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, sass, mixins

使用 bootstrap-sass，您可以通过在导入 bootstrap 之前定义变量来重载变量（如文档中所示）：

```
$btnPrimaryBackground: #f00;
@import "bootstrap"; 
```

遗憾的是，它不适用于 mixins，因为在 SASS 中它们可以重新定义/重载。

重载 twitter bootstrap mixins 的最佳方法是什么？到目前为止，唯一的方法似乎是克隆 lib 中的 gem 并在之后添加修改 _mixins.scss 或包含我的自定义 _mixins.scss。

有什么想法可以使它更易于维护吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T16:30:15.183

根据帖子[Reopen SASS Mixins](https://stackoverflow.com/a/2943863/570918)，可以覆盖 mixins。但是，如果您在调用`import "bootstrap";`Bootstrap 中定义的之前定义了自定义的，则会覆盖它。另一方面，如果你把它放在导入*之后*，那么在你重新定义 mixin 时，所有的 Bootstrap 代码都已经完成编译（参见[问题 #240](https://github.com/nex3/sass/issues/240)和[问题 #420](https://github.com/nex3/sass/issues/420)）。将来可能会增加对后一种选项的支持。

在那之前，我能想到的一个选项（尚未测试）是从**_bootstrap.scss**中分离出变量和混合，以便您可以在使用之前重新定义混合。

首先，注释掉**_bootstrap.scss**中的前两个 import 语句：

```
// Core variables and mixins
//@import "bootstrap/variables"; // Modify this for custom colors, font-sizes, etc
//@import "bootstrap/mixins"; 
```

然后在导入 Bootstrap 的 SASS 文件中，应将其更改为包含以下内容：

```
$btnPrimaryBackground: #f00;

// Core variables and mixins
@import "bootstrap/variables";
@import "bootstrap/mixins";

// Override of mixin for form field states
@mixin formFieldState($textColor: #555, $borderColor: #ccc, $backgroundColor: #f5f5f5) {
  // customization here
}

@import "bootstrap"; 
```

在此工作流程下，您仍将编辑供应商文件，但至少您可以将其限制为仅注释掉的几行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T14:44:01.447

我对@merv 的回答采取了类似的方法，值得一提。这种方法不涉及编辑供应商代码，但会控制一些供应商代码。因此，如果将来更新引导程序，则需要考虑版本更改。

所以最初你会 @import "bootstrap"; 这将引用 bootstrap.scss 文件，该文件然后将其所有依赖项与其他几个 @imports 行一起导入。我们希望我们的代码挂接到这个管道的中间以覆盖引导混合。我只是复制了 bootstrap.scss 文件的全部内容并插入到我的 main.scss 文件中，然后将我的“自定义覆盖”放在：

主文件

```
/*
    Import all scss files from here 
*/
@import "utils";
@import "fonts";
@import "variables"; 

/* 
    Bootstrap imports are being done here rather than importing bootstrap.scss so that mixins can be overridden

    If bootstrap is updated from the version below, ensure all imports are in sync with the new version
*/

/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

// Core variables and mixins
@import "bootstrap/variables";
@import "bootstrap/mixins";

//************* CUSTOM OVERRIDES
@import "overrides";
//*************

// Reset and dependencies
@import "bootstrap/normalize";
@import "bootstrap/print";
@import "bootstrap/glyphicons";

// Core CSS
@import "bootstrap/scaffolding";
@import "bootstrap/type";
@import "bootstrap/code";
@import "bootstrap/grid";
@import "bootstrap/tables";
@import "bootstrap/forms";
@import "bootstrap/buttons";

// Components
@import "bootstrap/component-animations";
@import "bootstrap/dropdowns";
@import "bootstrap/button-groups";
@import "bootstrap/input-groups";
@import "bootstrap/navs";
@import "bootstrap/navbar";
@import "bootstrap/breadcrumbs";
@import "bootstrap/pagination";
@import "bootstrap/pager";
@import "bootstrap/labels";
@import "bootstrap/badges";
@import "bootstrap/jumbotron";
@import "bootstrap/thumbnails";
@import "bootstrap/alerts";
@import "bootstrap/progress-bars";
@import "bootstrap/media";
@import "bootstrap/list-group";
@import "bootstrap/panels";
@import "bootstrap/responsive-embed";
@import "bootstrap/wells";
@import "bootstrap/close";

// Components w/ JavaScript
@import "bootstrap/modals";
@import "bootstrap/tooltip";
@import "bootstrap/popovers";
@import "bootstrap/carousel";

// Utility classes
@import "bootstrap/utilities";
@import "bootstrap/responsive-utilities";

//******************** End of Bootstrap

@import "mixins";
@import "demo";
@import "logo";
@import "buttons";
@import "links";
@import "forms"; 
```

# jquery - 如何检查元素的顶部，右侧，底部，左侧是否在Firefox中是自动的

> ID：12758341
> 
> 赞同：0
> 
> 时间：2012-10-06T09:06:01.700
> 
> 标签：jquery, css, firefox

在其他浏览器上 $(element).css('top') 将返回 auto，但在 Firefox 中它返回一个特定值。如何确定上、右、下、左是自动还是Firefox上的特定值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:24:20.437

这是检查上，右，下，左是自动还是Firefox上的特定值的棘手方法

[http://jsfiddle.net/rerefreelancer/h69UF/7/](http://jsfiddle.net/rerefreelancer/h69UF/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:15:15.270

也许没有 jQuery 的方法可以为您完成工作？

document.getElement...(...).style.top

此外，也许[http://api.jquery.com/category/offset/](http://api.jquery.com/category/offset/)会帮助你（虽然它不适合你的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:17:18.717

假设你的元素是 DIV 然后

```
<div id="check123" style="top: auto;">
       test
</div>

<script>
    alert($('#check123').css('top'));
</script> 
```

就像您可以检查左，右，下一样。

# ios - ios 5.1.1 上的 Xcode 4.5.1 ios 二进制文件导致错误

> ID：12758345
> 
> 赞同：0
> 
> 时间：2012-10-06T09:07:01.743
> 
> 标签：ios, xcode

我刚买了一台新的 Mac，我从 Appstore 下载了 Xcode (4.5.1)。默认情况下，当您创建一个新项目时（在我的情况下，使用启用 Storyboard 的 Master/Detail 模板）它以 ios 6.0 为目标，并且该项目在我已升级到 6.0 的 iPhone 上运行良好。

为了在带有 5.1.1 的 iPhone 上运行它，我更改了部署目标。在 UITableView 添加和显示项目时在 5.1.1 上运行，我收到以下错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason:' -[UITableView dequeueReusableCellWithIdentifier:forIndexPath:]: 
unrecognized selector sent to instance 0x1023b800' 
```

这是引发错误的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    NSDate *object = _objects[indexPath.row];
    cell.textLabel.text = [object description];
    return cell;
} 
```

从我以前的 iPhone 项目中，我习惯于在下面看到这个

```
if(cell == nil)
// Create the cell 
```

但我认为我不需要这个，因为 Storyboard 已经在 UITableView 中添加了一个 Cell。

有小费吗..？

最好的问候Øystein

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T09:12:32.137

该问题可以在[[UITableView dequeueReusableCellWithIdentifier:forIndexPath:] 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier:forIndexPath:)中找到；

> 在 iOS 6.0 及更高版本中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T05:52:04.497

我将有问题的代码行更改为

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" ]; 
```

基本上下降`forIndexPath:indexPath`并且它起作用了。现在我正在继续尝试更多代码，如果这会导致问题，我会报告。

# iphone - 为什么要使用 NSOperationQueue？

> ID：12758347
> 
> 赞同：3
> 
> 时间：2012-10-06T09:07:11.790
> 
> 标签：iphone, objective-c, ios, ipad

1）我们为什么要使用`NSOperationQueue`？

2）当我们使用它时有什么好处？

3) 可以通过`NSOperationQueue`同时实现多个同步的web操作吗？

4）为什么我们`NSOperationQueue`在延迟加载中使用`UITableView`？没有它就不可能`NSOperationQueue`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T10:00:04.960

> 为什么要使用 NSOperationQueue？

当工作单元是它的一个或一个子类时，您应该使用它`NSOperationQueue`来实现并发。`NSOperation`或者使用其他需要 的 API `NSOperationQueue`，例如`addObserverForName:object:queue:usingBlock:`方法 on`NSNotificationCenter`

> 我们使用它有什么好处？

当工作单元异步执行时，可以封装在一个`NSOperation`对象中。也许您在问与其他异步 API 相比有什么优势？这在很大程度上是但不完全是您需要的抽象级别并且对管理感到满意的问题。正如[一位作者所说](http://eschatologist.net/blog/?p=232)：*“始终使用您可用的最高级别的抽象，并在测量表明需要它们时降级到较低级别的抽象。”*

> 我们可以通过 NSOperationQueue 同时实现多个同步的 web 操作吗？

当然。在线查看大量针对此主题的教程。就像可敬的马库斯·扎拉（Marcus Zarra）的[这个。](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)

> 为什么我们在 Tableview 的延迟加载中使用 NSOperationQueue？

出于与您使用任何并发技术相同的原因。使工作更快和/或避免阻塞 UI。在您引用的情况下，主要是关于不使用长时间运行的任务阻塞 UI。

> 没有NSOperationQueue就不可能吗？

当然有可能。 `NSThread`, GCD 等

# coldfusion - 接收并记录 webhook 帖子

> ID：12758351
> 
> 赞同：1
> 
> 时间：2012-10-06T09:07:59.820
> 
> 标签：coldfusion, webhooks, stripe-payments

我在 Stripe.com 上设置了一个帐户。我已经配置了一个用于测试的 webhook，并将测试帖子发送到“接收”这些请求的 cfm 页面。但是，我不确定这个页面是否在做它应该做的事情。目前，我只是转储所有数据。下面是页面代码的样子。

当我在本地运行该页面，或直接在我们的实时测试站点上调用它时，我会收到一封电子邮件，其中包含预期的所有数据。但是，如果我将页面设置为 webhook url，然后让 Stripe 向其发送测试消息，则什么都不会发生 - 没有电子邮件。我在错误日志中也看不到任何东西。这里可能出了什么问题？有人可以推荐一种更好的方法来接收和记录来自 Stripe 的 webhook 调用吗？我在这里有点不知所措。谢谢

```
<cfsavecontent variable="local.emailBody">
    <cfdump var="#GetHttpRequestData()#">
    <cfdump var="#HTTP#">
    <cfdump var="#REQUEST#">
    <cfdump var="#FORM#">
    <cfdump var="#VARIABLES#">
</cfsavecontent>

<!--- Build Email --->
<cfset sMessage.messageType = "email" />
<!--- Setup other Email settings like to,from etc --->

<!--- Send Email --->
<cfset application.Communication.SendMessage(sMessage)  /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:40:41.813

我敢肯定，现在你已经想通了，但你使用...

```
ToString(getHTTPRequestData().content) 
```

...或将其放入 CF 对象中...

```
deserializeJSON(ToString(getHTTPRequestData().content)) 
```

# javascript - 一个 JS 闭包查询

> ID：12758365
> 
> 赞同：3
> 
> 时间：2012-10-06T09:10:37.237
> 
> 标签：javascript

我是一名 C++ ( Qt ) 开发人员，对 JS 有点了解。我无法理解以下代码的一部分。你能帮我解决这个问题吗？

```
function augment(withFn) {
    var name, fn;
    for (name in window) {
        fn = window[name];

        if (typeof fn === 'function') {
    // **Not able to understand below code.**
            window[name] = (function(name, fn) {
                var args = arguments;
                return function() {
                    withFn.apply(this, args);
                    fn.apply(this, arguments);

                }
            })(name, fn);
    // **In above code I understood everything else except this last line. 
    // Why whole function is in circular bracket? Why it ends with (name, fn);
    // What is the meaning of this?
        }
    }
}

augment(function(name, fn) {
    console.log("calling " + name);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:18:50.557

自执行匿名函数是解决循环中闭包问题的常用方法。

所以它实际上是一个匿名函数，通过传递的参数立即声明和执行。

实际上`name`参数在那里是无用的，因为它没有被使用，但如果你没有做到这一点 - 那么只有最后一个`fn`参数将作为参考传递。

问题的演示：http: [//jsfiddle.net/zerkms/nfjtn/](http://jsfiddle.net/zerkms/nfjtn/)

解决方案（使用自执行匿名函数）：http: [//jsfiddle.net/zerkms/nfjtn/1/](http://jsfiddle.net/zerkms/nfjtn/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:18:53.740

好吧，首先：

`(function f(param) { alert(param); })("Hello world");` 定义函数并立即执行它。

```
function f(param) { alert("This: = " + this + ". Param=" + param); }
f.apply(window, "Hello world"); 
```

使用参数在（即“认为”它属于对象的函数*）的上下文中* 调用函数 f`window``window``params`

`function(param)`返回对匿名函数的引用。那是：

`var f = function(param) {...}; f("Hello world");`类似于：

```
(function(param){...})("Hello world"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T09:19:38.123

括号中的表达式（你称之为“圆括号”）是一个匿名函数。`(name, fn)`最后意味着应该使用这些参数调用该函数，并将返回值分配给`window[name]`. 它大约相当于：

```
tempfn = function(name, fn) { /* body */ };
window[name] = tempfn(name, fn); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T09:20:01.493

通常在 C 中你会有定义（也许还有声明）

```
int anon(string name, void* function) {
} 
```

以及对函数的调用

```
anon(name, function); 
```

圆括号内的部分是匿名函数的声明；立即使用`(name, fn)`参数调用它。

把它想象成（注意：可能 JS 有点生疏，所以可能会出现一些语法错误）

```
 var fn2 = (function(name, fn) {
    var args = arguments;
    return function() {
      withFn.apply(this, args);
      fn.apply(this, arguments);
   }); 
```

And, in the loop

```
 window[name] = fn2.apply(name, fn); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T09:20:58.200

The problem you are trying to circumvent here is referencing `name` and `fn` in your loop afterwards. If you just did `window[name] = function () { alert(name); }` all your assigned functions would always use the value that `name` was last set to, not what it was when that particular function was defined in your loop. To get around this you create a function that is called immediately with the correct values and that way protects them in a new closure. You can read more about it in this SO-question: [JavaScript closure inside loops – simple practical example](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

# javascript - 使用 require.js，我如何包含一个定义多个模块的文件，但只保留我需要的那些？

> ID：12758368
> 
> 赞同：2
> 
> 时间：2012-10-06T09:11:05.977
> 
> 标签：javascript, requirejs, r.js

我有一组可重用的 Javascript 组件，我想将它们捆绑到一个文件中，以及另一个使用它的 Web 应用程序。这个库定义了许多模块（在 RequireJS 意义上），其中一些是 Web 应用程序实际使用的。

是否可以完成以下任务：

*   使用 r.js 优化库的源文件，生成包含所有导出模块的单个输出文件。
*   在另一个应用程序中依赖这个文件，同样使用 RequireJS，并再次优化 - 只保留 Web 应用程序中实际需要的模块的代码。

实际上，我希望获得与将库的所有源文件转储到应用程序中并优化一次相同的结果，但能够将库作为单个文件发送的额外好处。这可以使用RequireJS来实现吗？

# sql-server-2008 - 在sql server数据库中插入反斜杠

> ID：12758370
> 
> 赞同：2
> 
> 时间：2012-10-06T09:11:54.247
> 
> 标签：sql-server-2008

我有一个带有反斜杠的字符串，需要使用以下插入 sql 查询插入 MS Sql Server 2008 数据库：

```
INSERT INTO Databsename.dbo.tblname
VALUES     (Getdate(),
            Getdate(),
            'NewsHoroscopetest/voice/_06101214132pm014771957.wav',
            20,
            '014771045',
            '01454545') 
```

此处，由于字符串值中的反斜杠，插入失败。我也尝试过使用双反斜杠。它显示以下错误：

```
Msg 8152, Level 16, State 14, Line 1
String or binary data would be truncated.
The statement has been terminated. 
```

如何在上面的 sql 中转义反斜杠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:20:36.300

问题与反斜杠无关。他们不需要逃避

可能您要插入的至少一个值的长度对于您要插入的列来说太长了。第三个值是 51 个字符长，我猜你是把它插入一`varchar(50)`列。

如果您仔细检查并发现情况并非如此，则错误可能是由表上的插入触发器中的类似问题引起的。

# javascript - 将脚本注入到带有回调的页面

> ID：12758375
> 
> 赞同：1
> 
> 时间：2012-10-06T09:12:41.760
> 
> 标签：javascript, dynamic-script-loading

我正在尝试将 yepnope.js 注入页面，然后使用 yepnope 加载其他 JS 文件。

Chrome 开发工具的网络选项卡显示 yepnope 已获取，元素选项卡显示元素已注入。但控制台选项卡显示：

```
Uncaught ReferenceError: yepnope is not defined 
```

这是我的代码：

```
var betaApp = {

    injectYepnope: function(url) {
        var gp = document.createElement( 'script' );
        gp.type = 'text/javascript';
        gp.async = true;
        gp.src = url;

        gp.onload = betaApp.yepnopeLoaded;
        // Only for IE 6 and 7
        gp.onreadystatechange = function()
        {
            if( this.readyState == 'complete' )
            {
                betaApp.yepnopeLoaded();
            }
        }

        document.body.appendChild(gp);
    },

    yepnopeLoaded: function() {
        yepnope([
            {
                load: ['//cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js', 'http://raw.github.com/andris9/jStorage/master/jstorage.js'],
                complete: function() {
                    betaApp.firstPartLoaded();
                }
            },
            {
                load: [
                    'http://code.jquery.com/jquery-1.8.2.min.js',
                    'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js',
                    'https://raw.github.com/Automattic/Iris/master/dist/iris.js',
                    'https://raw.github.com/cnkt/eksi-beta/master/ui/js/twitter-bootstrap/js/bootstrap-modal.js',
                    'https://raw.github.com/Automattic/Iris/master/src/iris.min.css'
                ],
                complete: function() {
                    betaApp.allJsLoaded();
                }
            }
        ]);
    }
};

betaApp.injectYepnope('https://raw.github.com/cnkt/eksi-beta/master/ui/js/yepnope.js'); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:51:55.430

您的代码本身很好，但是您需要确保在 DOM 准备好之后调用它，否则它无法将脚本附加到文档中。

要么使用库 onReady 事件（例如`JQuery.ready()`） - 如果此代码*必须*在外部文件中，您唯一的选择，或者只是将脚本直接添加到文档末尾的 HTML 中。

# javascript - 小程序上的 Div

> ID：12758380
> 
> 赞同：1
> 
> 时间：2012-10-06T09:13:01.790
> 
> 标签：javascript, html, iframe, applet

我尝试在小程序上制作一个 div，并在 MAC 上的 firefox、chrome 和 safari 中正常工作。但不是在 Windows 上

我究竟做错了什么？我搜索了“div over applet”并找到了 iframe 的解决方案，但它不起作用。

这是我的代码：

```
 <div class="humans">

                    <div class="humans-box">

                    <!-- here is my applet -->

                        <applet  allowtransparency="true" id="applet" code="main.AvatarClient.class" archive="AvatarClient_411.jar"
                        name="Chat" width="760" height="582" scriptable="true" MAYSCRIPT="true" style="background:transparent;position:absolute">
                            <param name="cache_option" value="NO">
                            <param name="wmode" value="transparent">
                            <param name="localization" value="locDK/"></param>
                            <param name='userName' value='<?=$user?>' />
                            <param name='password' value='<?=$pass?>' />
                        </applet>
                    </div>
                </div>
                <div style="width:760px;">

        <!-- make the hack!-->

        <iframe class="top" id="DivShim"src="javascript:false;"scrolling="no"frameborder="0"style="position:absolute;top:0px;z-index:45455;left:0px;display:none"></iframe>

        <!--div to place over applet -->

        <div class="top" style="z-index:45456;position:absolute">
            <ul class="menu">
                <li><a href="javascript:nagoom.view('onlineusers')"><?=Language::___get('ONLINE_USERS', $_SESSION['lang'])?></a>
                </li>
                <li><a href="#"><?=Language::___get('TOP_USERS', $_SESSION['lang'])?></a>
                </li>
                <li><a href="#"><?=Language::___get('SEARCH_USERS', $_SESSION['lang'])?></a>
                </li>
            </ul>
            <div class="user-menu"> <a href="#" class="btn-restart"><span><?=Language::___get('GENSTART', $_SESSION['lang'])?></span></a>       <a href="#" class="btn"><?=Language::___get('BEGYNDER_GUIDE', $_SESSION['lang'])?></a>  
                <a
                href="#" class="f-btn"><span>&nbsp;</span>Connect og få 100 mønter</a>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T11:59:31.593

我使用 jQuery 显示弹出对话框并使用 div 来控制小程序可见或不可见。这是我的代码示例，您可以作为参考。它适用于 IE、FF、Chrome 和 Opera。

```
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Dialog Over Java Applet</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <script>
    function showDialog(result)
    {
        document.getElementById("btn_show").disabled = true;
        var upm = document.getElementById("javaapplet");
        upm.style.visibility='hidden';
        if(result == 0){
          $( "#press-complete" ).dialog({
              modal: true,
              height:280,
              width:350,
              resizable: false,
              buttons: {
                Ok: function() {
                  $( this ).dialog( "close" );
                  upm.style.visibility='visible';
                  document.getElementById("btn_show").disabled = false;
                }
              }
          });
        }
    }
    </script>
</head>

<body>
    <!-- complete -->
    <div id="press-complete" title="Complete" style="display:none;">
      <p><span class="ui-icon ui-icon-circle-check" style="float: left; margin: 0 7px 50px 0;"></span>
        　Upload <b>Complete</b>.</p>
      <p>You could view <b>text area</b> for the <b>detail</b>.</p>
      <p>Please reboot the system to take effect.</p>
    </div>
    <p>Here is a example to show dialog over Java Applet.&nbsp;<input id="btn_show" type="button" value="show Dialog" onclick="showDialog(0)" /></p>
    <div id="javaapplet" style="display:inline">
        <applet width=300 height=300 code="DrawingWithColor2" codebase="http://www.javakode.com/applets/03-color/">
            <param name="cache_option" value="no">
            This page require Java enviornment! Please install Java first.
        </applet>
    </div>
</body> 
```

# c# - IQueryable - 为什么它比 IEnumerable 更好？

> ID：12758384
> 
> 赞同：-2
> 
> 时间：2012-10-06T09:13:58.340
> 
> 标签：c#, ienumerable, iqueryable

> **可能重复：**
> [IQueryable<T> 和 IEnumerable<T> 有什么区别？](https://stackoverflow.com/questions/252785/what-is-the-difference-between-iqueryablet-and-ienumerablet)

我阅读了很多关于 IQueryable 的内容，但我仍然不明白什么时候使用 IQueryableProvider 的方法以及使用什么方法。

我的英语不是很完美，所以理解那篇文章对我来说很重要。[http://blogs.msdn.com/b/mattwar/archive/2007/07/30/linq-building-an-iqueryable-provider-part-i.aspx](http://blogs.msdn.com/b/mattwar/archive/2007/07/30/linq-building-an-iqueryable-provider-part-i.aspx)

*不要告诉我将 IEnumerable 用于集合，将 IQueryable 用于 sql，因为我们可以将每个用于集合和 sql。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:43:04.930

An`IEnumerable`是可以迭代的集合的最简单接口，就像在`foreach`循环中一样。

An`IQueryable`是一个查询构建器，它包含一个 LINQ 查询，可以添加到该查询中，直到您对查询执行某些操作以强制它执行并返回一个集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:21:09.233

IQueriable 提供针对未指定数据类型的特定数据源评估查询的功能。而 IEnumerable 只允许循环遍历它们。

所以，总而言之，

Queryable 可让您查询数据

Enumerable 允许您遍历数据的每个元素

# c# - 在托管 C++ 中使用函数指针调用 C# 委托

> ID：12758386
> 
> 赞同：0
> 
> 时间：2012-10-06T09:14:22.633
> 
> 标签：c#, c++, .net, windows, managed

程序.cs

```
class Program
    {
        public static void He(string v)
        {
                Console.WriteLine(v);
                Console.WriteLine("End?");
            }
        public delegate void he(string v);

        static void Main(string[] args)
        {
            Class1 cls = new Class1();
            IntPtr p = Marshal.GetFunctionPointerForDelegate(new he(He));
            cls.call(p, "String");
        }
    } 
```

测试类库.h

```
namespace TestClassLibrary 
{
    typedef void (Hello)(System::String ^ v);

    public ref class Class1
    {
        public:
        void call(IntPtr p,System::String ^v);
    };
} 
```

测试类库.cpp

```
namespace TestClassLibrary 
{
    void Class1::call(IntPtr p,System::String ^ v)
    {
        Hello * h = (Hello *)p.ToPointer();
        h(v);
    }
} 
```

我不知道这段代码有什么问题:(

（测试类库被编译为托管 DLL。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:27:44.020

托管 C++/CLI 具有委托 - 语法几乎与 C# 相同 - 为什么不使用它们，并且不涉及编组（因为无论如何您正在编译到托管 C++/CLI）。

# java - 如何修复stackoverflow错误

> ID：12758391
> 
> 赞同：0
> 
> 时间：2012-10-06T09:15:16.440
> 
> 标签：java, jframe, jpanel

我创建了 3 个 JPanel 类和 1 个 JFrame 类。这 3 个 JPanel 类通过实例化相互连接（因为另一个类需要一个类的某些属性）。我想将所有 3 JPanel 类放到 JFrame 类中，但我收到一条错误消息。

错误

```
 java.lang.StackOverflowError
at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
at       sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:244)
at javax.swing.UIDefaults.getUI(UIDefaults.java:751)
at javax.swing.UIManager.getUI(UIManager.java:989)
at javax.swing.JPanel.updateUI(JPanel.java:109)
at javax.swing.JPanel.<init>(JPanel.java:69)
at javax.swing.JPanel.<init>(JPanel.java:92)
at javax.swing.JPanel.<init>(JPanel.java:100)
at ComputerSeats.<init>(ComputerSeats.java:17)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11)
at ComputerSeats.<init>(ComputerSeats.java:13)
at Student.<init>(Student.java:11) 
```

电脑座椅类

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class ComputerSeats extends JPanel implements ItemListener
{
private JLabel seatNum;
private JRadioButton[] seat = new JRadioButton[10];
private ButtonGroup seatGroup = new ButtonGroup();
private boolean[] seatOccupied =  new boolean[10];
private String str = "";
private int station=0, occupiedSeatCounter=0;
private Student stud = new Student();
private Monitor mtr = new Monitor();

public ComputerSeats()
{

    setPreferredSize(new Dimension(200,200));
    setBorder(BorderFactory.createLoweredBevelBorder()); 
    setBackground (Color.yellow); 
    setLayout(null);
    //SETS THE JPANEL THAT DISPLAYS STATION NUMBER OPTIONS

    seatNum = new JLabel("Station Numbers: ");
    seatNum.setLocation(60,90);
    seatNum.setSize(600,400);
    add(seatNum);

   createSeatNumbers();
}

public void itemStateChanged(ItemEvent e)
{
    for(int i=0 ; i<10 ; i++)
    {
        if(e.getSource() == seat[i])
            station = (i+1);
    }
}

public void createSeatNumbers()
{
    int x=50,y=150;
    for(int i=0 ; i<10 ; i++)
    {
        switch(i)
            {
                case 0: str = "1"; break;
                case 1: str = "2"; break;
                case 2: str = "3"; break;
                case 3: str = "4"; break;
                case 4: str = "5"; break;
                case 5: str = "6"; break;
                case 6: str = "7"; break;
                case 7: str = "8"; break;
                case 8: str = "9"; break;
                case 9: str = "10"; break;
            }
        seat[i] = new JRadioButton(str);
        seat[i].setSize(60,40);
        seat[i].setLocation(x,y);
        seat[i].addItemListener(this);
        seat[i].setBackground(Color.green);
        seatGroup.add(seat[i]);
        add(seat[i]);
        x=110;

        if((i+1)%2==0)
        {
           x=50;
            y=y+30;
        }
    }

    for(int i=0 ; i<10 ; i++)
    {
        seatOccupied[i] = false;
    }
}

public void occupySeat()
{
    seatOccupied[station-1] = true;
    for(JLabel jl: mtr.showArrayIdVal()) { jl.setText(stud.showField().getText());  }
    seat[station-1].setBackground(Color.red);
    occupiedSeatCounter++;
}

public void leaveSeat()
{
    mtr.showArrayIdVal()[station-1].setText("Vacant Station");
    seat[station-1].setBackground(Color.green);
    seatOccupied[station-1] = false;
    stud.showField().setText("");
}
public void showError(int num)
{
    if(num == 0)
    {
        JOptionPane.showMessageDialog(null, "Select your Station Number", "ERROR!",JOptionPane.ERROR_MESSAGE);
    }
    else if(num == 1)
    {
        JOptionPane.showMessageDialog(null, "This Station is Vacant!", "ERROR!",JOptionPane.ERROR_MESSAGE);
    }
    else if(num == 2)
    {
        JOptionPane.showMessageDialog(null, "Station Occupied", "ERROR!",JOptionPane.ERROR_MESSAGE);
    }

}

 public int showStation()
 {
        return station;
    }

 public boolean getSeatOccupied()
 {

        return seatOccupied[station-1];
 }

} 
```

学生班

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Student extends JPanel implements ActionListener
{

private JLabel studNum;
private JTextField studNumTF;
private JButton logInB, logOutB;
private ComputerSeats compSeat = new ComputerSeats();

public Student()
{
    //SET UP PANEL

    setPreferredSize(new Dimension(80,200));
    setBorder(BorderFactory.createLoweredBevelBorder()); 
    setBackground (Color.yellow); 
    setLayout(null);

    studNum = new JLabel("Enter Your Student Number: ");
    studNum.setLocation(30,20);
    studNum.setSize(200,100);

    studNumTF = new JTextField(7);
    studNumTF.setLocation(50,80);
    studNumTF.setSize(120,30);

    logInB = new JButton("Log In");
    logInB.setSize(100,30);
    logInB.setLocation(15,350);
    logInB.setBackground(Color.orange);
    logInB.addActionListener(this);

    logOutB = new JButton("Log Out");
    logOutB.setSize(100,30);
    logOutB.setLocation(125,350);
    logOutB.setBackground(Color.orange);
    logOutB.addActionListener(this);

    //ADD OBJECTS TO PANEL

    add(studNum);
    add(studNumTF);
    add(logInB);
    add(studNum);

}

public void actionPerformed(ActionEvent e) 
{ 
    //PERFORM OOPERATION AFTER CLICKING A BUTTON

    if(e.getActionCommand() == "Log In")
    {
        logIn();
    }

    if(e.getActionCommand() == "Log Out")
    {
        logOut();
    }
} 

public JTextField showField()
{
    return studNumTF;
}

public void logIn()
{

    if(compSeat.showStation() == 0)
        {
            compSeat.showError(0);
        }
        else if(compSeat.getSeatOccupied() == true)
        {
            compSeat.showError(2);
        }
        else
        {
           compSeat.occupySeat();
        } 
}
public void logOut()
{
   if(compSeat.showStation() == 0)
        {
            compSeat.showError(0);
        }

        else
        {
            compSeat.leaveSeat();
        }
}
} 
```

监控类

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Monitor extends JPanel{

private JLabel stationL, iDL, timeInL;
private JLabel[] stationA,idA,timeA;
private String str = "";

public Monitor()
{
    //SET UP PANEL 
    setPreferredSize(new Dimension(80,100));
    setBorder(BorderFactory.createLoweredBevelBorder()); 
    setBackground (Color.yellow); 
    setLayout(null);
    setLayout(null);

    stationL = new JLabel("Station #", SwingConstants.CENTER);
    iDL = new JLabel("Student Number");
    timeInL = new JLabel("Time In");

    stationL.setSize(100,20);
    iDL.setSize(100,20);
    timeInL.setSize(100,20);

    stationL.setLocation(280,60);
    iDL.setLocation(450,60);
    timeInL.setLocation(630,60);

    //ADD TO PANEL

    add(stationL);
    add(iDL);
    add(timeInL);

    //INSTANTIATION OF ARRAYS
    stationA = new JLabel[10];
    idA = new JLabel[10];
    timeA = new JLabel[10];

    displayFixedValues();
}

//METHOD THAT WILL DISPLAY THE FIRST VALUES OF THE MONITOR PANEL
public void displayFixedValues()
{

    int y = 85;
    for(int i=0 ; i<10 ; i++)
    {
        switch(i)
            {
                case 0: str = "1"; break;
                case 1: str = "2"; break;
                case 2: str = "3"; break;
                case 3: str = "4"; break;
                case 4: str = "5"; break;
                case 5: str = "6"; break;
                case 6: str = "7"; break;
                case 7: str = "8"; break;
                case 8: str = "9"; break;
                case 9: str = "10"; break;
            }
        stationA[i] = new JLabel(str, SwingConstants.CENTER);
        stationA[i].setSize(100,30);
        stationA[i].setLocation(280,y);          

        idA[i] = new JLabel("Vacant Station");
        idA[i].setSize(100,30);
        idA[i].setLocation(450,y);

        timeA[i] = new JLabel("00:00:00--");
        timeA[i].setSize(100,30);
        timeA[i].setLocation(630,y);
        y = y+30;

        add(stationA[i]);
        add(idA[i]);
        add(timeA[i]);
    }
}

//METHODS THAT WILL RETURN THE VALUE OF THE OBJECTS CREATED IN THIS CLASS
public JLabel[] showArrayStationVal()
{
    return stationA;
}
public JLabel[] showArrayIdVal()
{
    return idA;
}
public JLabel[] showArrayTimeVal()
{
    return timeA;
}
public JLabel showStationVal()
{
    return stationL;
}
public JLabel showIdVal()
{
    return iDL;
}
public JLabel showTimeVal()
{
    return timeInL;
}
} 
```

监控框架类

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class MonitoringFrame extends JFrame
{

private JPanel monitor, seats, student, time;

public MonitoringFrame()
{

    Monitor monitor = new Monitor();
    ComputerSeats seats = new ComputerSeats();
    Student student = new Student();

    Container pane = getContentPane();

    pane.add(monitor);
    pane.add(seats);
    pane.add(student);

    setVisible(true);
    setLayout(null);
    setSize(400,300);
    pack();

}

public static void main(String[] args)
{

    MonitoringFrame fr = new MonitoringFrame();

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:36:47.963

解释真的很简单：

Student 类有这个字段声明：

```
 private ComputerSeats compSeat = new ComputerSeats(); 
```

并且 ComputerSeats 类具有此字段声明：

```
 private Student stud = new Student(); 
```

因此，当您创建一个 Student 时，它会`compSeat`通过创建一个which 进行初始化，`ComputerSeat`该初始化`stud`通过创建一个`Student`which`compSeat`通过创建一个`ComputerSeat`...进行初始化，依此类推，直到堆栈溢出。

这是一个递归循环。

# android - 如何将 .txt 文件数据加载到 logcat android 工具中？

> ID：12758393
> 
> 赞同：3
> 
> 时间：2012-10-06T09:15:21.477
> 
> 标签：android, file, logcat

我已经实现了一个应用程序并将其发送给我的客户。在我的应用程序中，我正在将 logcat 信息写入 txt 文件。当我的客户遇到问题时，他会将 logcat 信息文件作为 txt 发送。但是 txt 文件太可怕了从该 txt 文件中查找问题。在这里我想将该 txt 文件信息加载到 logacat android 工具。如何将 txt 文件加载到 logcat 工具。我已经实现了我的应用程序如下

```
 FileUtilities ff = new FileUtilities(MainActivity.this);
    try {
        Process process = Runtime.getRuntime().exec("logcat -d");
        BufferedReader bufferedReader = new BufferedReader(
        new InputStreamReader(process.getInputStream()));
        StringBuilder log=new StringBuilder();
        String line;
        while ((line = bufferedReader.readLine()) != null) {
          log.append(line);
        }
        ff.write("logfile.txt", log.toString());

      } catch (IOException e) {
      } 
```

从上面的代码中，我能够将 logacat 信息写入 logfile.txt。但是我想将该 logfile.txt 内容加载到 eclipse 中的 logcat android 工具中。请任何人帮助我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:29:07.963

我想这不能那样做。

作为一种可能的替代方法，您可以让应用程序读取文本文件，然后逐行解析它并使用该数据生成日志语句，然后将其转到 LogCat ...

# php - 从php数组插入MySQl表元素

> ID：12758398
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:16:14.760
> 
> 标签：php, mysql, arrays, insert, foreach

所以伙计们，我有这个数组需要插入到我的数据库中。我正在使用 foreach 但我无法让它以两个值运行。

简单的数组如下所示：

```
 Array
(

    [1] => Array
        (
            [id_produs] => 'value'
            [id_pret] => 'value'
        )

    [2] => Array
        (
            [id_produs] => 'value'
            [id_pret] => 'value'
        )
.
.
.
    [i] => Array
        (
            [id_produs] => 'value'
            [id_pret] => 'value'
        )

) 
```

这就是我现在得到的：

```
foreach ($vl['id_produs'] as $prds=>$val) 
        {
       if($val<>'') mysql_query("INSERT into db set  id_pachet='".$id_pachet."', id_produs='".$val."'"); 
        foreach ($vl['id_pret'] as $prdsv=>$valv) {
            if($valv<>'') mysql_query("INSERT into db  set id_pachet='".$id_pachet."',  id_pret='".$valv."'");
        }
        } 
```

在哪里：

```
$vl = array();
    $vl = $_POST; 
```

我做错了什么？

孔阵列如下所示：

```
Array
(
    [nume_pachet] => Test pachet nou
    [id_produs] => Array
        (
            [0] => 0
            [1] => 41
            [2] => 135
        )

    [id_pret] => Array
        (
            [0] => 0
            [1] => 0
            [2] => 157
        )

    [pret_pachet] => 99.00
    [id_moneda] => 1
    [descriere_pachet] => Lorem ipsum dolores
    [activ] => 1
) 
```

我要在其中插入值的数据库具有以下结构：

id id_pachet id_produs id_pret

所以在一个包（id_pachet）中，我可以有更多的产品（id_produs）可以有多个价格（id_pret）

例如：

```
id  id_pachet   id_produs   id_pret
1   3       13              1
2   3       13              2
3   3       14              0 
```

问题是，如果这样做：

```
foreach ($vl['id_produs'] as $prds=>$val) 
     {
   if($val<>'') mysql_query("INSERT into erad_produse_pachete_str set id_pachet='".$id_pachet."',  id_produs='".$val."'"); 

    } 
```

它适用于 id_produs，但我还需要同时插入 id_pret

更新！

我得到了哥哥的帮助。这对我有用。如果您可以将其应用于您的案例，我希望它会有所帮助

```
$produse = $_POST['id_produs'];
$preturi = $_POST['id_pret'];

if(count($produse))
foreach ($produse as $key=>$id_produs) {

    if($id_produs>0){
        $id_pret = isset($preturi[$key]) ? $preturi[$key] : 0;
        mysql_query("INSERT INTO erad_produse_pachete_str (id_pachet,id_produs,id_pret) VALUES ('{$id_pachet}', '{$id_produs}', '{$id_pret}')"); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:21:07.023

检查您的插入查询，这是错误的。

例如，它应该是， `INSERT INTO table (field1, field2,.....) VALUE (value1, value2,.....)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:21:55.617

有几处不对：

*   id_produs 的值是数字，你不能引用它们
*   插入查询的语法错误
*   foreach 上的循环不正确。

这应该可以帮助您：

```
foreach ($vl['id_produs'] as $val) {
  if($val<>'') 
    mysql_query("INSERT into `db` ( id_produs ) VALUES( $val )"); 
}

foreach ($vl['id_pret'] as $valv) {
  if($valv<>'') 
    mysql_query("INSERT into `db` ( id_pret ) VALUES( $valv )");
} 
```

# django-templates - 使 django 静态标签全局可用

> ID：12758401
> 
> 赞同：0
> 
> 时间：2012-10-06T09:16:22.333
> 
> 标签：django-templates

我正在尝试使 Django 的“静态”标签在所有模板中都可用。我试过[这个建议](https://stackoverflow.com/questions/1184983/load-a-django-template-tag-library-for-all-views-by-default)：

```
from django.template.loader import add_to_builtins
add_to_builtins('django.contrib.staticfiles') # I've tried each of these
add_to_builtins('django.contrib.staticfiles.templatetags') 
add_to_builtins('django.contrib.staticfiles.templatetags.staticfiles') 
```

但不断收到以下错误消息：

```
django.template.base.InvalidTemplateLibrary: Template library django.contrib.staticfiles does not have a variable named 'register' 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:47:14.620

`'django.core.context_processors.static',`您需要`settings.py`像这样添加：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.core.context_processors.request',
    'django.contrib.messages.context_processors.messages',
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T12:29:11.620

[问题在这里](https://stackoverflow.com/questions/18709803/load-django-static-template-tag-library-globally-without-explicitly-loading-it "here")得到了回答

# jquery - 为了防止使用 jquery Isotope 插件在 IE8 中出现糟糕的字体渲染，我必须禁用什么？

> ID：12758405
> 
> 赞同：1
> 
> 时间：2012-10-06T09:16:34.313
> 
> 标签：jquery, css, internet-explorer-8, fonts, jquery-isotope

我正在使用 Desandro 的 isotope 插件，除了文本在 IE8 中的渲染效果不佳之外，它的工作有点魅力。

由于目前不关心其他浏览器，有没有办法解决这个问题？如果没有，我应该禁用什么功能以防止这种情况发生？

您可以在此处查看一些示例和更多说明：[Problem with bad font rendering with CSS3 transitions, jQuery, & Google Fonts](https://stackoverflow.com/questions/5136698/problem-with-poor-font-rendering-with-css3-transitions-jquery-google-fonts)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:20:49.537

这是一个 IE 问题，尝试实现 Google Chrome Frame

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:08:29.613

在此处向下滚动到“陷阱和问题”，请参阅[Isotope 的作者关于字体渲染问题。](http://desandro.github.com/motion-emotion/)我记得这个问题与 CSS 过渡有关，并且提供背景颜色似乎可以解决问题。此外[，这个 SO question](https://stackoverflow.com/questions/5136698/problem-with-poor-font-rendering-with-css3-transitions-jquery-google-fonts)可能会为您指明解决方案；如果我没记错的话，这个问题也与 CSS 过渡有关。

# c++ - 如何使用 Windows API 检查文件是否仍在 cpp 中复制？

> ID：12758406
> 
> 赞同：2
> 
> 时间：2012-10-06T09:16:49.617
> 
> 标签：c++, file, winapi

在我当前的项目中，我们需要检查文件是否仍在复制。

我们已经开发了一个库，它将在特定文件夹以及相应的文件路径上向我们提供诸如 file_added 、 file_removed 、 file_modified 、 file_renamed 之类的操作系统通知。

这里的问题是，假设您添加 1 GB 文件，它会在复制文件时发出多个通知，例如 file_added 、 file_modified 、 file_modified 。

现在我决定通过检查文件是否正在复制来超越这些通知。基于此，我将忽略事件。

我在 C++ 中编写了下面的函数，它告诉文件是否正在被复制，它以文件路径作为输入。详细信息：-基本上它使用Windows API“CreateFile”来获取文件句柄。如果我们无法获取句柄，则确定为正在复制文件。

问题：- 对于一些较大的文件，例如 2 GB 的 .rar 和 .exe 格式，这不起作用。你能告诉我这是正确的方法吗？如果不欣赏其他方法。

```
bool isFileBeingCopied(const boost::filesystem::path &filePath)
{
     //Log(INFO, "Checking if the given file is being copied or not for the file [%s]",filePath.string().c_str());
     HANDLE hFile = ::CreateFile(filePath.c_str(), GENERIC_READ, 0, NULL, OPEN_EXISTING, 0, NULL);
     DWORD dwLastError = GetLastError();

     if(hFile == NULL && hFile == INVALID_HANDLE_VALUE)
     {
          Log(INFO, "Gained invalid handle on the file - hence determining it, as being copied file [%s]",filePath.string().c_str());
          return true;
     }
     else
     {
          if(dwLastError == ERROR_SUCCESS )
          {
                CloseHandle(hFile);
                Log(INFO, "Able to gain the handle on the file - hence determining it, as copied file [%s]",filePath.string().c_str());
                return false;
          }
          else
          {
              Log(INFO, "Not able to gain the handle for the file - hence determining it, as being copied file [%s]",filePath.string().c_str());
              return true;
          }
     }               
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T05:19:01.887

使用[boost 文件系统](http://www.boost.org/libs/filesystem)库，我们可以找出文件是否被复制。基本上 boost::filesystem::fstream 类为 I/O 操作打开文件。当前正在复制文件时，boost lib 无法打开文件并且 is_open() 方法将返回 false。因此，在这种情况下，我们可以安全地假设文件当前正在被复制。如果文件也损坏或损坏，我们最终会处于这种情况。

在所有其他情况下，is_open() 返回 true，我们可以认为文件复制已完成（在此用例中）希望此代码有所帮助。

```
boost::filesystem::fstream fileStream(filePath, std::ios_base::in | std::ios_base::binary);

if(fileStream.is_open())
{
    //We could open the file, so file is good
    //So, file is not getting copied.
}
else
{
    //Wait, the file is currently getting copied. 
} 
```

编辑：添加了更多解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:03:34.147

除非您自己复制文件，否则无法从外部确定文件的复制状态。您可能必须使用计时器来检测文件修改事件何时停止发送给您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T10:51:59.783

如果该文件先前已以`dwShareMode`= 0, IOW 以独占访问模式打开（并且仍然如此），则您将无法再次打开它，直到它关闭，无论文件是否正在被复制（=写入) 与否，因此`true`不能依赖函数的返回值。

请注意，如果`CreateFile()`成功，则调用`CloseHandle()`并返回`false`。在此之后，文件可以立即被另一个进程打开以进行写入，并且`false`由于可能存在这种竞争条件，因此不能依赖返回的值。如果你想阻止它，你不能关闭句柄，直到你不再有兴趣拥有对文件的独占访问权。

因此，这显然不是准确确定文件是否被复制（=写入）的正确方法。这似乎是一件毫无意义的事情。

在我看来，您试图在这里解决错误的问题。您决定检查文件是否被复制（=写入）的真正问题是什么？如果你告诉我们，我们也许可以帮助解决这个真正的问题。

# .htaccess - htaccess：使用 301 永久删除“文件夹”

> ID：12758408
> 
> 赞同：0
> 
> 时间：2012-10-06T09:17:04.877
> 
> 标签：.htaccess, url-rewriting

尽管我已经完成了具有相同主题的其他条目，但我无法找到针对我的特定问题的解决方案。

现在我的 URL 结构就像
www.abc.com/in/something/bla

我更改了一些设置并删除了 /in/，现在 URL 结构是
www.abc.com/something/bla

我想永久重定向到新结构。

我在@stackoverflow 和网络上找到的所有解决方案都没有为我工作，因此我在下面粘贴（部分）我的 htaccess 代码。除了删除 /in/ 外，它工作得很好。
提前感谢您帮助我！

```
<IfModule mod_rewrite.c>

# Enable Rewrite Engine
# ------------------------------
RewriteEngine On

RewriteBase /

# Redirect index.php Requests
# ------------------------------
RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
RewriteCond %{THE_REQUEST} !/system/.*
RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=301,L]

# Standard ExpressionEngine Rewrite
# ------------------------------
RewriteCond $1 !\.(css|js|gif|jpe?g|png) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule>

# remove trailing slash
# 05.10.2012
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^(.+)/$
RewriteRule ^(.+)/$  /$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:50:32.220

使用 mod_alias：

```
Redirect 301 /in/ / 
```

使用 mod_rewrite：

```
RewriteRule ^/?in/(.*)$ /$1 [L,R=301] 
```

你会想把那些靠近顶部的，就在你的下面`RewriteBase`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:24:14.847

试试这个：

```
RewriteCond %{REQUEST_URI}  ^/in/.*
RewriteRule ^/in(/?.*)$ http://${HTTP_HOST}$1 [P,L] 
```

# innodb - 升级到 MySQL 5.5 是否安全？

> ID：12758414
> 
> 赞同：3
> 
> 时间：2012-10-06T09:18:01.073
> 
> 标签：innodb, joomla2.5, joomla3.0

我在 VPS 服务器上运行了许多带有大量扩展、插件和模块的 Joomla 2.5 站点。服务器环境如下：

CENTOS 5.8 x86_64 WHM 11.32.5（内部版本 11） Apache 版本：2.2.23 PHP 版本：5.3.17 5.1.65-cll Joomla：2.5.7

我想将 MySQL 升级到 5.5 版。据我了解，MySQL 已将默认引擎从 MyISAM 更改为 INNOdb，这现在是 Joomla 3.0 的要求。我的问题如下：

1.  通过将 MySQL 升级到 5.5，我会冒我现有 Joomla 2.5 站点的站点/数据库完整性的风险吗？
2.  我现有的数据库会保持 MyISAM 格式，还是会在此过程中转换为 INNOdb？
3.  我已经阅读了很多人抱怨升级后 /var/lib/mysql/ibdata1 文件大小过大和增长的帖子，这实际上会造成问题吗？
4.  我现有网站的查询执行时间会受到负面影响吗？
5.  底线：在我的场景中升级 MySQL 是否可取？

我感谢大家的帮助和投入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:22:13.950

1.  据我所知并在[Joomla Technical Requirements](http://www.joomla.org/technical-requirements.html)中提到，不会有任何问题，因为 Joomla 与 MySQL 5.0.4 及更高版本兼容
2.  Joomla 2.5 默认使用 InnoDB。至少我的网站是！
3.  不知道！但我在 Ubuntu 上使用 Joomla 2.5 和 MySQL 5.5，我没有遇到任何烦人的问题。
4.  MySQL 5.5 比旧版本获得了更多的性能，所以我认为您不会遇到任何性能问题。[（这可能会有所帮助）](http://ronaldbradford.com/blog/five-reasons-to-upgrade-to-mysql-5-5-2010-12-15/)
5.  我建议您使用这些新技术在类似于您的生产环境的测试环境中测试您的网站（例如，您可以使用虚拟机）。有太多有用的应用程序可以通过创建虚假访问者和分析性能来帮助您。因此，您可以将新设置与旧设置进行比较，并测试新设置是否存在任何不兼容问题。

我希望我的回答有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:03:02.557

Joomla 3 需要 Innodb，而 2.5 则使用您安装中的默认设置，对于大多数人来说是 Innodb。

# c++ - Qt中的信号和槽

> ID：12758416
> 
> 赞同：1
> 
> 时间：2012-10-06T09:18:17.073
> 
> 标签：c++, qt, qt4

我正在阅读这个 Qt 教程，在那里我遇到了一个非常有趣的代码行

```
connect(slider,SIGNAL(valueChanged(int)),this,SIGNAL(valueChanged(int))); 
```

通常，当发出信号时，会调用一个槽。这句话是什么意思？“滑块”是一个 QSlider 对象指针。

如果有帮助，这是[教程](http://doc.qt.digia.com/4.3/tutorial-t8-lcdrange-cpp.html) 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T09:25:50.793

该语句告诉 qt 信号/槽机制连接两个信号，如果第一个信号被发射，则第二个信号被发射。查看 QObject::connect 的文档，它有一个示例，其中来自私有成员变量的信号通过将其连接到所有者类的公共信号而可用，但我想这只是一个用例。

# javascript - Javascript regEx：将单词和空格包装到标签中

> ID：12758422
> 
> 赞同：4
> 
> 时间：2012-10-06T09:19:01.743
> 
> 标签：javascript, regex

我一直在努力实现这一点：我想将单词包装成标签和标签中的空格（可能是多个），假设原始文本可以包含不应被触及的 html 标签

```
This is   <b>very bold</b> word. 
```

转换为 -->

```
<w>This</w><s> </s><w>is</w><s>   </s><b><w>very</w><s> </s><w>bold</w></b><s> </s><w>word</w> 
```

实现这一目标的正确正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:25:25.623

你应该使用两个替换>>

```
s.replace(/([^\s<>]+)(?:(?=\s)|$)/g, '<w>$1</w>').replace(/(\s+)/g, '<s>$1</s>') 
```

检查[这个演示](http://jsfiddle.net/QPUz9/)。

* * *

**编辑**：

对于更复杂的输入（基于您在下面的评论），请使用 >>

```
s.replace(/([^\s<>]+)(?![^<>]*>)(?:(?=[<\s])|$)/g, '<w>$1</w>').replace(/(\s+)(?![^<>]*>)/g, '<s>$1</s>'); 
```

检查[这个演示](http://jsfiddle.net/EfzW8/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:55:15.800

正则表达式并不适合所有任务。如果您的字符串可以包含任意 HTML，则无法使用正则表达式处理所有情况，因为 HTML 是一种上下文无关的语言，而正则表达式仅涵盖其中的一部分。现在在搞乱循环和大量代码来处理这个问题之前，让我提出以下建议：

如果您在浏览器环境中或可以访问 DOM 库，则可以将此字符串放在临时 DOM 元素中，然后处理文本节点，然后再读回字符串。

这是一个使用我一个月编写并现在更新的库的示例，称为[Linguigi](https://github.com/Prinzhorn/Linguigi)

```
var element = document.createElement('div');
element.innerHTML = 'This is   <b>very bold</b> word.';

var ling = new Linguigi(element);

ling.eachWord(true, function(text) {
    return '<w>' + text + '</w>';
});

ling.eachToken(/ +/g, true, function(text) {
    return '<s>' + text + '</s>';
});

alert(element.innerHTML); 
```

示例： http: [//prinzhorn.github.com/Linguigi/](http://prinzhorn.github.com/Linguigi/)（点击`Stackoverflow 12758422`按钮）

# jpa-2.0 - EclipseLink - 如何在 IN 运算符中使用空集合？

> ID：12758424
> 
> 赞同：4
> 
> 时间：2012-10-06T09:19:21.377
> 
> 标签：jpa-2.0, eclipselink, jpql

有没有办法在 IN 运算符中使用空集合？

```
List<Integer> idList = new ArrayList<Integer>();
Query query = em.createQuery("SELECT e FROM T e WHERE e.id IN ?1").setParameter(1, idList);
List results = query.getResultList(); 
```

产生：

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: syntax error at or near ")"
  Position: 48
Error Code: 0
Call: SELECT id, other_id FROM t_table WHERE (id IN ())
Query: ReadAllQuery(referenceClass=T sql="SELECT id, other_id FROM t_table WHERE (id IN ?)") 
```

这个：

```
List<Integer> idList = new ArrayList<Integer>();

CriteriaBuilder cb = EntityManagerProvider.getEmf().getCriteriaBuilder();
CriteriaQuery<T> c = cb.createQuery(T.class);
Root<T> t_class = c.from(T.class);
Expression<String> exp = t_class.get("id");
Predicate predicate = exp.in(idList);

c.select(t_class).where(predicate);

TypedQuery<T> q = em.createQuery(c);
List results = q.getResultList(); 
```

产生：

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: syntax error at or near ")"
  Position: 48
Error Code: 0
Call: SELECT id, other_id FROM t_table WHERE (id IN ())
Query: ReadAllQuery(referenceClass=T sql="SELECT id, other_id FROM t_table WHERE (id IN ())") 
```

在 IN 中明确放置 null：

```
Query query = em.createQuery("SELECT e FROM T e WHERE e.id IN (null)"); 
```

产生：

```
 java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager: 
Exception Description: Syntax error parsing the query [SELECT e FROM T e WHERE e.id IN (null)], line 1, column 33: unexpected token [null].
Internal Exception: NoViableAltException(54@[709:9: (itemNode= scalarOrSubSelectExpression ( COMMA itemNode= scalarOrSubSelectExpression )* | subqueryNode= subquery )]) 
```

但是，使用本机查询可以正常工作：

```
List<Integer> idList = new ArrayList<Integer>();
Query query = em.createNativeQuery("SELECT * FROM t_table WHERE t_table.id IN (null)");
List results = query.getResultList(); 
```

显然，我不想使用本机查询。当然，我可以在创建查询之前进行 if-else 检查，并为空集合创建不同的查询，或者在大多数情况下根本不创建它，因为在简单查询中不会有任何结果。但是我必须在大型项目中将供应商从 OpenJPA（接受空集合）更改为 EclipseLink，并且有时查询在不同的 IN 中包含很少的集合，所以 if-elsing 这不会那么容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:16:54.347

简单的答案是：在使用 IN 查询时，您不能使用空的 Array/List 并将其设置为 Parameter。您可以使用字符串浓度构建查询，如果列表为空 / size() == 0，则不要将 IN 部分添加到查询字符串中，也不要设置参数。

如果 IN 参数中有一个空集合，则结果查询没有什么不同，那么您可以删除此条件。除了你的目标真的是找不到*任何*结果。但是，从逻辑上讲，您可以在执行查询之前捕捉到这一点，原因在您的示例中：

> “SELECT * FROM t_table WHERE t_table.id IN (null)”

=>这可能需要：a）所有结果都是有效的=>然后你可以简单地删除where条件b）没有结果是有效的=>那么你不需要执行查询并且可以只返回一个空的t_table列表在你的方法中。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:04:04.660

尝试 2.4 版本。

另外，尝试绑定null，

.. 在 (:arg)

或传递一个包含 null 的列表

.. 在：列表中

# android - 如何使用 com.android.camera.action.CROP 设置输出图像

> ID：12758425
> 
> 赞同：8
> 
> 时间：2012-10-06T09:19:24.560
> 
> 标签：android, image, image-processing, crop

我有裁剪图像的代码，如下所示：

```
public void doCrop(){
Intent intent = new Intent("com.android.camera.action.CROP");
intent.setType("image/");
List<ResolveInfo> list = getPackageManager().queryIntentActivities(intent,0);
int size = list.size();
if (size == 0 ){
   Toast.makeText(this, "Cant find crop app").show();
   return;
} else{
   intent.setData(selectImageUri);
   intent.putExtra("outputX", 300);
   intent.putExtra("outputY", 300);
   intent.putExtra("aspectX", 1);
   intent.putExtra("aspectY", 1);
   intent.putExtra("scale", true);
   intent.putExtra("return-data", true);
   if (size == 1) {
       Intent i = new Intent(intent);
       ResolveInfo res = list.get(0);
       i.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
       startActivityForResult(i, CROP_RESULT);
   }
}
}

public void onActivityResult (int requestCode, int resultCode, Intent dara){
   if (resultCode == RESULT_OK){
      if (requestCode == CROP_RESULT){
          Bundle extras = data.getExtras();
          if (extras != null){
              bmp = extras.getParcelable("data");
          }
          File f = new File(selectImageUri.getPath());
          if (f.exists()) f.delete();
          Intent inten3 = new Intent(this, tabActivity.class);
          startActivity(inten3);
      }
   }
} 
```

根据我的阅读，该代码`intent.putExtra("outputX", 300); intent.putExtra("outputY", 300);`用于设置裁剪结果的分辨率，但为什么我无法获得高于 300x300 的结果图像分辨率？当我设置`intent.putExtra("outputX", 800); intent.putExtra("outputY", 800);`裁剪功能没有结果或崩溃时，对这种情况有什么想法吗？

日志猫说“！！！ BINDER TRANSACTION 失败！！！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-17T09:08:28.607

这个问题遍布stackoverflow。我很高兴，因为我最近不得不自己解决这个问题。我会尽我所能标记一些重复的，但我更喜欢这个，因为它解决了图像大小有限的问题。

# 简答

简短的回答是不使用 return-data 选项。在此处阅读有关该选项以及如何检索图像的更多信息：[http](http://www.androidworks.com/crop_large_photos_with_android) ://www.androidworks.com/crop_large_photos_with_android 。这篇文章很好地列出了 Intent 的（已知的）配置选项以及如何使用它们。

> 选项 #2：如果您将 return-data 设置为“false”，您将不会收到来自 onActivityResult Intent 内联返回的位图，而是需要将 MediaStore.EXTRA_OUTPUT 设置为 Uri（仅限文件方案），您可以在其中希望存储位图。这有一些限制，首先您需要有一个临时文件系统位置才能提供文件方案 URI，这不是一个大问题（在一些没有 sdcard 的设备上除外）。

```
 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    thiz = this;
    setContentView(R.layout.main);
    mBtn = (Button) findViewById(R.id.btnLaunch);
    photo = (ImageView) findViewById(R.id.imgPhoto);
    mBtn.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            try {
                // Launch picker to choose photo for selected contact
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT, null);
                intent.setType("image/*");
                intent.putExtra("crop", "true");
                intent.putExtra("aspectX", aspectX);
                intent.putExtra("aspectY", aspectY);
                intent.putExtra("outputX", outputX);
                intent.putExtra("outputY", outputY);
                intent.putExtra("scale", scale);
                intent.putExtra("return-data", return_data);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri());
                intent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
                intent.putExtra("noFaceDetection",!faceDetection); // lol, negative boolean noFaceDetection
                if (circleCrop) {
                    intent.putExtra("circleCrop", true);
                }

                startActivityForResult(intent, PHOTO_PICKED);
            } catch (ActivityNotFoundException e) {
                Toast.makeText(thiz, R.string.photoPickerNotFoundText, Toast.LENGTH_LONG).show();
            }
        }
    });
}

private Uri getTempUri() {
    return Uri.fromFile(getTempFile());
}

private File getTempFile() {
    if (isSDCARDMounted()) {
        File f = new File(Environment.getExternalStorageDirectory(),TEMP_PHOTO_FILE);
        try {
            f.createNewFile();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Toast.makeText(thiz, R.string.fileIOIssue, Toast.LENGTH_LONG).show();
        }
        return f;
    } else {
        return null;
    }
}

private boolean isSDCARDMounted(){
    String status = Environment.getExternalStorageState();    
    if (status.equals(Environment.MEDIA_MOUNTED))
        return true;
    return false;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
        case PHOTO_PICKED:
            if (resultCode == RESULT_OK) {
                if (data == null) {
                    Log.w(TAG, "Null data, but RESULT_OK, from image picker!");
                    Toast.makeText(this, R.string.no_photo_picked,
Toast.LENGTH_SHORT).show();
                    return;
                }

            final Bundle extras = data.getExtras();
            if (extras != null) {
                File tempFile = getTempFile();
                // new logic to get the photo from a URI
                if (data.getAction() != null) {
                    processPhotoUpdate(tempFile);
                }
            }
        }
        break;
    }
} 
```

代码示例来自：[http ://www.androidworks.com/crop_large_photos_with_android](http://www.androidworks.com/crop_large_photos_with_android)

# 更多信息

长答案是根本不使用这种意图。继续阅读以找出原因。

## 非官方 API

问题的核心是非官方意图。非官方的，因为不是公共 API 的一部分。目前它适用于大多数设备，但大多数还不够。此外，Google 可以随时更改此意图，而无需通知您。打破所有使用它的应用程序。就像日历 API 曾经是非官方的一样。事实上，这种作物意图已经改变了一次。所以避免使用这个意图。有替代方案。请随意忽略此建议。

只是为了证明“适用于某些设备的声明”，请点击此链接并享受沮丧的 Android 开发人员讨论哪些应该被视为核心 android 功能的一部分（而不是）：[https ://code.google.com/p/android /issues/detail?id=1480](https://code.google.com/p/android/issues/detail?id=1480)

示例代码的时间？检查这个 github 项目：[https ://github.com/lorensiuswlt/AndroidImageCrop](https://github.com/lorensiuswlt/AndroidImageCrop)

## 关于尺寸限制

我在探索此意图时遇到的另一个问题是图像裁剪大小限制。这可以使用上面的示例代码和任何超过 300 像素的图像大小轻松复制。基本上这个原始问题是关于什么的。在最好的情况下，您的应用程序会崩溃。但我见过更糟糕的悬挂设备，只能通过取出电池来重置。

现在，如果您删除该“返回数据”选项，您将能够再次运行它。有关如何获得结果的更多信息，请参见我已经引用此链接的简短答案：[http ://www.androidworks.com/crop_large_photos_with_android](http://www.androidworks.com/crop_large_photos_with_android)

## 解决方案

所以问题很多。问题需要解决方案。在谷歌为此提供公共 API 之前，唯一合适的解决方案是提供您自己的作物意图。只需在 github 上找到一个像这样的适当裁剪库：[https ://github.com/lvillani/android-cropimage](https://github.com/lvillani/android-cropimage)

该项目缺少一些文档，但由于它是非官方 android 裁剪意图的摘录，您可以使用上面列出的示例开始。只要确保不使用 return-data 选项。啊，看看 CropImageIntentBuilder 类。这应该让您轻松创建裁剪意图。不要忘记将此 Activity 添加到您的清单和写入外部数据存储的权限。

```
private void doCrop(File croppedResult){
        CropImageIntentBuilder builder = new CropImageIntentBuilder(600,600, croppedResult);
        // don't forget this, the error handling within the library is just ignoring if you do
        builder.setSourceImage(mImageCaptureUri);
        Intent  intent = builder.getIntent(getApplicationContext());
        // do not use return data for big images
        intent.putExtra("return-data", false);
        // start an activity and then get the result back in onActivtyResult
        startActivityForResult(intent, CROP_FROM_CAMERA);
    } 
```

使用这个库也为更多的定制打开了大门。很高兴知道在功能上用于调整大小的核心位图：[How to crop the parsed image in android?](https://stackoverflow.com/questions/3725501/how-to-crop-the-parsed-image-in-android)

就是这样。享受！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-06T10:04:03.500

该 Intent 不是公共 Android API 的一部分，并且不能保证在所有设备上都有效。它在早期版本的 android 1.x 和 2.x 中使用，但不再使用，不推荐使用。这可能就是它到处崩溃或工作不正常的原因。

使用`Bitmap.createBitmap(..)`或等方法`Bitmap.createScaledBitmap(..)`创建原始图像的调整大小或裁剪版本。这些是 Android API 的一部分，保证可以正常工作。

[在此处](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28int,%20int,%20android.graphics.Bitmap.Config%29)和[此处](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)查看官方文档

要裁剪位图，您可以使用`Bitmap.createBitmap(Bitmap, int x, int y, int width, int height)`. 例如，如果您需要从位图的每一侧裁剪 10 个像素，则使用以下命令：

```
Bitmap croppedBitmap = Bitmap.createBitmap(originalBitmap, 10, 10, originalBitmap.getWidth() - 20, originalBitmap.getHeight() - 20); 
```

如果您需要向用户显示选择器。然后你可以做这样的事情：

```
private static final String TEMP_PHOTO_FILE = "temporary_holder.jpg";  

Intent photoPickerIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
photoPickerIntent.setType("image/*");
photoPickerIntent.putExtra("crop", "true");
photoPickerIntent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri());
photoPickerIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
startActivityForResult(photoPickerIntent, REQ_CODE_PICK_IMAGE);

    private Uri getTempUri() {
    return Uri.fromFile(getTempFile());
    }

    private File getTempFile() {
    if (isSDCARDMounted()) {

    File f = new File(Environment.getExternalStorageDirectory(),TEMP_PHOTO_FILE);
    try {
    f.createNewFile();
    } catch (IOException e) {

    }
    return f;
    } else {
    return null;
    }
    }

    private boolean isSDCARDMounted(){
    String status = Environment.getExternalStorageState();
    if (status.equals(Environment.MEDIA_MOUNTED))
    return true;
    return false;
    }

protected void onActivityResult(int requestCode, int resultCode,
        Intent imageReturnedIntent) {
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

    switch (requestCode) {
    case REQ_CODE_PICK_IMAGE:
        if (resultCode == RESULT_OK) {  
          if (imageReturnedIntent!=null){

               File tempFile = getTempFile();

              String filePath= Environment.getExternalStorageDirectory()
            + "/temporary_holder.jpg";
              System.out.println("path "+filePath);

    Bitmap selectedImage =  BitmapFactory.decodeFile(filePath);
    _image = (ImageView) findViewById(R.id.image);
    _image.setImageBitmap(selectedImage );

}
}
} 
```

来自[这里的代码](https://stackoverflow.com/questions/2085003/how-to-select-and-crop-an-image-in-android)

# java - 是否有适用于 Java 的 Schematics (Python) 之类的工具？

> ID：12758430
> 
> 赞同：3
> 
> 时间：2012-10-06T09:19:58.967
> 
> 标签：java, python, validation, serialization, schema

这个整洁的 Python 库是否有类似的工具：Java 中的[https://github.com/j2labs/schematics ？](https://github.com/j2labs/schematics)

> Schematics 是一种简单的数据建模方法。它提供了结构化数据、初始化数据、序列化数据、格式化数据和根据类型定义验证数据的机制，例如电子邮件地址。
> 
> ...
> 
> Schematics 的主要目标是为类型系统提供类似的功能，以及生成我们发送到 Internet、存储在数据库中、发送到某些 Java 进程或基本上任何具有结构化数据的用例的原理图的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:04:48.480

我猜 JSR 303，*bean 验证*将是最接近的等价物：

> Bean Validation 为 JavaBean 验证定义了一个元数据模型和 API。元数据源是注释，具有通过使用 XML 验证描述符覆盖和扩展元数据的能力。Hibernate 团队为 Hibernate Validator 提供了 Bean Validation 的参考实现，并且还创建了 Bean Validation TCK 任何 JSR 303 的实现都需要通过。

*   [http://jcp.org/en/jsr/detail?id=303](http://jcp.org/en/jsr/detail?id=303)
*   [http://beanvalidation.org/1.0/spec/](http://beanvalidation.org/1.0/spec/)

# jquery - 以 svg 格式获取 graphviz 中节点/边的注释属性

> ID：12758435
> 
> 赞同：3
> 
> 时间：2012-10-06T09:20:28.827
> 
> 标签：jquery, svg, visualization, graphviz, dot

我正在尝试创建一个交互式图形，为此我使用了neato -n -Tsvg 命令，然后以 svg 格式包含图形的 javascript 代码。但是，对于这种交互性，我需要一些关于在生成 DOT 代码时放入注释属性中的节点和边的额外信息。但是，注释属性不会出现在 svg 格式中。有什么方法可以让我以 svg 格式获取这些信息？我不能使用节点/边的 id 属性，因为每个节点/边的 id 必须是唯一的，在我的情况下，多个节点/边共享相同的评论数据。有什么方法可以完成我正在尝试的事情吗？

谢谢！

# jquery - 什么触发了“onLoad”事件的触发？

> ID：12758443
> 
> 赞同：1
> 
> 时间：2012-10-06T09:20:52.040
> 
> 标签：jquery

如果我想使用 jQuery 更改 div 背景图像，它会触发`$(window)`'s onLoad 函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:27:46.613

不，当文档已加载然后加载所有初始内容时触发`load`事件`window`（与 for 相同）。`document`

进行导致加载某些内容的样式更改不会重新触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:24:22.837

onLoad 在页面加载后立即执行 JavaScript。

> onload 事件在对象已加载时发生。onload 最常用于元素内，用于在网页完全加载所有内容（包括图像、脚本文件、CSS 文件等）后执行脚本。

```
In JavaScript Syntax:
    object.onload="SomeJavaScriptCode" 
```

以下 HTML 标记支持 onload：

```
<body>, <frame>, <frameset>, <iframe>, <img>, <input type="image">, <link>, <script>, <style> 
```

如果你喜欢 jQuery，请参考下面的代码。在 $(document).ready() 部分中编写代码。它是在 DOM 完全加载时执行的函数。

```
$(document).ready(function() {
  // Handler for .ready() called.
  //code to change the background
}); 
```

这相当于调用：

```
$(function() {
 // Handler for .ready() called.
 //code to change the background
}); 
```

[阅读更多](http://api.jquery.com/ready/)

希望这能解决您的问题。如果您有任何问题，请随时提问。谢谢。

# php - 非 SGML 字符数 6

> ID：12758447
> 
> 赞同：1
> 
> 时间：2012-10-06T09:21:17.693
> 
> 标签：php, html, validation, codeigniter, sgml

我正在处理的网站出现以下验证错误

```
 Line 1, Column 1: non SGML character number 6

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.… 
```

在 FireFox 源代码查看器中，以下行的文本为红色

```
DOCTYPE
HEAD
META CHARSET
/HEAD
BODY
2 Paragraph tags (that are properly opened and closed. 
```

当我使用 Web 开发人员 FireFox 插件并选择“编辑 HTML”选项时，有一个红点，所有标签都`<title>`消失了。也没有正文标签，在 FireFox 源代码查看器中显示为红色的两个段落标签也不见了。换句话说，红色表示某种错误，但我在源代码中看不到任何错误。

此处显示了指示为错误的部分：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>

</head>
<body class="page">

<p>
    <div class="photo-box photo-box-right" id="photo-box-test-image-619">
        <div class="photo-box-photo">
            <img src="http://localhost/assets/uploads/images/logo.png" title="Test image" alt="Test image" />
        </div>
        <div class="photo-box-title">
            <span class="photo-box-head" title="Test image">Test image</span>
        </div>
    </div>
    Qualitative data approximates, characterizes or describes but does not measure the attributes, characteristics, properties of a phenomenon.  Data could take the form of textual transcriptions of interviews, focus groups or dialogues, photographs, audio and video recordings.
</p>
<p>
    <div class="photo-box photo-box-left" id="photo-box-test-image-476">
        <div class="photo-box-photo">
            <img src="http://localhost/assets/uploads/images/sparta.jpg" title="Test image" alt="Test image" />
        </div>
        <div class="photo-box-title">
            <span class="photo-box-head" title="Test image">Test image</span>
        </div>
    </div>
    Quantitative data defines attributes in terms of values with numerical significance and can be represented as matrixes of numbers of responses, maps, tables or graphs.
</p> 
```

I can not see any errors in the HTML. I see no hidden control characters in any normal editor that I can get my hands on (Notepad++, UltraEdit, Notepad, Wordpad) but I do see it in the "Edit HTML" screen of the Web Developer toolbar.

Here is what I have done to try and resolve this:

1.  Recreate the file and retyping the supposed affected lines.
2.  Used various text editors to try and see the wrong file.
3.  Removed all recently added content and code in the file to see if this stops at any point (no luck...)
4.  Read all the posts I can find about "non-SGML character" I could find here and on Google, nothing seem to answer my question.
5.  Deleted the post in the database and recreated that (for incase this is a problem with database content). Not resolved.
6.  Converted all tables to MyISAM (some, including the content table, were InnoDB)
7.  Checked if other pages that does not draw its content from the database has the same problem (such as contact form) and it does the same.
8.  Played around with various character sets and encodings in my database and HTML source, as well as my PHP ini file. None affect the outcome.
9.  Changed the code page in all my text editors to various types to try and see this hidden non-SGML character.
10.  Copied all the system and application files (excluding the obvious changes such as CSS and templates and modified modules) over from another site based on the same version of CodeIgniter that works well.

Anything else you think I can do?

From the above, I conclude that either the custom modules (unlikely), the CSS stylesheets, the added jQuery libraries that are different between the sites (uniform.js, buttons.js) or the templates and views used is having some sort of pukefest on my happiness.

Please advise if you can think of something else I have missed...

Thanks!

Kobus

EDIT: Now that I am allowed to add images, I decided to make a few screenshots to explain the problem better. Maybe it helps... I initially thought it may be the whitespace in the title tag, but wasn't that...![Screenshot 1](../Images/ec5710b3b55ec4bc38041d88643deff9.png)![Screenshot 2](../Images/f6c51cacd02f18f0f2893a497528af01.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:51:40.887

It may be an encoding issue. Make sure that the file is saved as ANSI or UTF8 *WITHOUT* the BOM marker. The BOM marker may cause this issue.

In Notepad++, the fourth menu is for encoding, you can easily change this there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:39:32.530

Hi everyone who responded,

Thank you so much for all your efforts to help, in particularly @MadaraUchiha for their patience and effort.

The problem was eventually solved after I have uploaded the site to my web hosting space (thanks @JukkaK.Korpela who suggested this), and tried to access the page. On my local dev environment, the CodeIgniter error screen does not display (will have to figure out why) but on my hosting space, I got a clear indication of what the error was:

`Cannot modify header information - headers already sent by (output started at /usr/www/users/imperoco/demo/application/helpers/bootstrap_helper.php:1)`

In another file (a CodeIgniter helper file) there was a - in front of the `<?php` tag. So - somehow, when I was editing it, I must've added a rogue -. Removed it, and now the page displays fine.

Thank you so much for your time. Now that I know my development environment does not display the error, I can work to resolve that, to prevent issues such as this the next time around. :-)

Kind regards,

Kobus

# iphone - “未能获得进程 567 的任务”如何解决这个问题？

> ID：12758449
> 
> 赞同：2
> 
> 时间：2012-10-06T09:21:37.423
> 
> 标签：iphone, ios, xcode

我正在尝试在设备中加载我的应用程序，但我收到了如图所示的消息![在此处输入图像描述](../Images/92c0785a9b9caeffe238656adfe684b9.png)

我该如何解决？我现在使用 xCode 4.5 并在设备 iOS 6 中运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:20:56.213

检查您使用的是开发配置文件，而不是发行版 =]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:36:34.600

1.  清理项目。
2.  删除派生数据。
3.  重新启动 xcode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T05:40:08.893

删除钥匙串应用程序上的过期证书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-23T03:14:59.540

对我来说，我将运行方案切换为“调试”而不是“发布”，按预期工作。

# javascript - Select 用 or 语句改变 div 状态

> ID：12758452
> 
> 赞同：1
> 
> 时间：2012-10-06T09:21:53.350
> 
> 标签：javascript, jquery

我有以下html：

```
<option value="55">Clothing - Mens</option>
<option value="56">Clothing - Womens</option>
<option value="67">Film Music & Books</option>
<option value="69">Food & Drink</option> 
```

我想在选择“服装 - 男装”或“服装 - 女装”时显示一个 div，所以我正在使用，效果很好：

```
$(document).ready(
function(){
    $('#category').change(
        function(){
            if ($(this).val()) {
                $('input:submit').attr('disabled',false);

                if (($(this).val() == '55') || ($(this).val() == '56')) {
                    $('#fashion').show();
                    } else { $('#fashion').hide(); }

            } else { 
                $('input:submit').attr('disabled',true); 
            }
        });

}); 
```

但是有没有办法缩短它？我已经尝试了以下两种方法，但都没有工作

```
if ($(this).val() == ('55','56')) { 

if ($(this).val() == ('55' || '56')) { 
```

在上述两种情况下，选项值 56 有效，但 55 无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:23:23.117

你可以使用jquery的`inArray`..

[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

```
if ($.inArray($(this).val(),["55","56"]) != -1) { 
```

工作示例.. [http://jsfiddle.net/FYNKc/1/](http://jsfiddle.net/FYNKc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:26:47.967

您可以直接联系我们`this.value`，而不是`$(this).val();`

```
if ($.inArray(this.value, ['55','56']) != -1) { 
```

# typescript - TypeScript Visual Studio 语言扩展源代码

> ID：12758457
> 
> 赞同：6
> 
> 时间：2012-10-06T09:22:09.293
> 
> 标签：typescript

有谁知道 TypeScript 的 VS 源代码扩展的源代码在哪里可以找到？

我想探听一下是否可以插入一些原始 XML 文档功能，但我似乎无法找到该插件的源代码。

我想无论如何都可以使用 VS 扩展来扩展语言扩展，但我认为看看会有助于这个过程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T14:29:45.257

TypeScript 项目在 Apache 2.0 许可下是开源的 - 但各种 IDE 的插件不一定是开源的。

Visual Studio 扩展的 TypeScript[可从 Microsoft 网站](http://www.microsoft.com/en-us/download/details.aspx?id=34790)而不是 Codeplex 下载，这表明它目前不是开源的。

# javascript - 5920#0：*52 上游超时（110：连接超时），同时连接到上游，

> ID：12758459
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:22:52.403
> 
> 标签：javascript, gwt, nginx, ejabberd, emit

我尝试使用 ejabberd 运行 emit（xmpp 客户端的 gwt 实现），它工作正常。我注意到 emit 的开发人员使用 java servlet 代理对 ejabberd 的请求：

```
https://github.com/EmiteGWT/hablar/blob/master/src/main/java/de/spieleck/servlets/ProxyServlet.java), 
```

我想绕过这个代理，所以我关注这个帖子：

```
http://anders.conbere.org/blog/2011/05/03/get_xmpp_-_bosh_working_with_ejabberd_firefox_and_strophe/ 
```

但是javascript客户端（由emit编译）连接ejabbered需要很长时间，然后快速断开连接，nginx错误日志如下：

```
2012/10/06 17:04:33 [error] 5920#0: *52 upstream timed out (110: Connection timed out) while connecting to upstream, client: 127.0.0.1, server: localhost, request: "POST /http-bind HTTP/1.1", 
upstream: "http://111.186.4.11:5280/http-bind", host: "127.0.0.1", referrer: "http://127.0.0.1/hablartest/HablarTest1.html" 
```

谁能告诉我我做错了什么？

我的配置：firefox-13 ejabberd-2.1.11 nginx-1.0.5 ubuntu-11.10

（由于相同的客户端代码（从gwt编译的js代码）与servlent代理工作正常，所以我认为这可能是一个nginx配置问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:07:33.843

最后，我发现了问题：我的代理配置是这样的：

```
 location ~ ^/http-bind {       
         proxy_pass http://localhost:5280;
 } 
```

所以 nginx 会将所有请求从 127.0.0.1:80 重定向到 localhost:5280

如果我断开与 Internet 的连接，这将正常工作，但如果我连接到 Internet，我的 hosts 文件将变为：

```
127.0.0.1       luya    localhost.localdomain   localhost
111.186.4.11    luya    localhost.localdomain   localhost 
```

据我了解，localhost 将被随机“取”为 127.0.0.1 或 111.186.4.11，所以这是这个令人困惑的问题。解决方案很简单，更改代理配置

从

```
proxy_pass http://localhost:5280; 
```

至

```
 proxy_pass http://127.0.0.1:5280; 
```

# php - wapache 中的 Internet Explorer 到 Google Chrome

> ID：12758464
> 
> 赞同：1
> 
> 时间：2012-10-06T09:23:36.710
> 
> 标签：php, apache, internet-explorer, google-chrome

嗨，我有一个使用 Google Chrome 浏览器开发的项目，当我尝试使用 wapache 实现时，一切正常，除了阻止许多功能的 css 和 javascript 错误。wapache有没有可能使用chrome浏览器而不是internet explorer..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T11:03:32.133

有实现 MSIE 或谷歌浏览器的替代项目......它是谷歌代码上的[phpdesktop](https://code.google.com/p/phpdesktop/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:38:21.820

不，这是不可能的。

Wapache 需要 Internet Explorere，我不知道有任何替代方案。

# javascript - 如何处理高图中轴标签上的鼠标事件

> ID：12758465
> 
> 赞同：2
> 
> 时间：2012-10-06T09:23:38.027
> 
> 标签：javascript, jquery, highcharts, highstock

如何在 highcharts 轴标签上捕获鼠标事件？
我希望处理标签上的点击事件以执行某些操作

[高图演示](http://jsfiddle.net/jugal/nUfBM/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:23:38.027

轴标签可以作为 访问`yAxis.ticks["x"].label.element`。这是标签的元素，现在这个元素上的任何事件都可以如下处理。

```
var yAxis = chart.yAxis[0];
var onYaxisRedraw = function() {
    for (var tickPos in yAxis.ticks) {
        var $element=$(yAxis.ticks[tickPos].label.element);
        $element.unbind('click');
        $element.click(function() {
            alert("hi");
        });
    }
}
onYaxisRedraw();
yAxis.redraw(onYaxisRedraw); 
```

最好取消绑定任何先前添加的处理程序，因为 highchart 内部可能会重用相同的标签。

[处理/捕获轴标签上的事件@jsFiddle](http://jsfiddle.net/jugal/mydPd/)

# sql-server - 无法从服务器资源管理器、sql server 2008 r2 management studio 等连接到远程数据库

> ID：12758468
> 
> 赞同：0
> 
> 时间：2012-10-06T09:23:42.960
> 
> 标签：sql-server, visual-studio-2012, server-explorer

卸载 vs2011 beta 后，我无法从 vs2010 中的服务器资源管理器甚至从 sql server 2008 r2 management studio 连接到远程数据库。

vs2010服务器资源管理器报错如下：

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP Provider，错误：0 - 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。）

来自 sql server 2008 r2 management studio 的错误信息如下：

## 标题：连接到服务器

无法连接到 xxx.xxx.xxx.xx,xxxx\SQL2008。

* * *

附加信息：

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP Provider，错误：0 - 连接尝试失败，因为连接方在一段时间后没有正确响应，或建立连接失败，因为连接的主机没有响应。）（Microsoft SQL Server，错误：10060）

如需帮助，请单击： http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=10060&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=10060&LinkId=20476)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:28:54.203

好的，这不是因为卸载了 vs2011 测试版，而是因为 TCP 端口 1434 在我使用 Internet 的地方很近。通过打开1434端口问题解决了。

# c++ - 为数组分配新值时系统崩溃

> ID：12758476
> 
> 赞同：0
> 
> 时间：2012-10-06T09:25:15.457
> 
> 标签：c++, arrays, opencv, for-loop, variable-assignment

我在这里发布了一个类似的问题：

[为什么在为数组分配新值时会崩溃？](https://stackoverflow.com/questions/12746768/why-it-crashes-when-assigning-new-values-to-arrays)

但这一次，我又遇到了数组的另一个问题。我的代码是这样的：

```
double diff[600][800][3];
cv::Mat value ( height, width, CV_8UC3 );
double mean[600][800][3];
....
for ( int i =0; i < 5; ++ i )
{
    for ( int j = 0; j < 3; ++j )
    {
        for ( int m = 0; m < 2; ++m )
        {
            mean[i][j][m] = 10/m;
            diff[i][j][m] = abs ( value.data[value.cols*i+j]-mean[i][j][m]);
        }
    }
} 
```

它在这条线上坠毁：

```
diff[i][j][m] = abs ( value.data[value.cols*i+j]-mean[i][j][m]); 
```

我什至省略了那行，只是这样写：

```
double test = abs ( value.data[value.cols*i+j]-mean[i][j][m]); 
```

它编译了，然后我添加了

```
std::cout << test << std::endl; 
```

它再次崩溃了，这条线也崩溃了：

```
diff[i][j][m] = test; 
```

我什至把它改成这样：

```
double test = static_cast<double>(abs(value.data[value.cols*i+j]-mean[i][j][m]));
diff[i][j][m] = test; 
```

再次，坠毁。如果我这样写：

```
diff[i][j][m] = 10; 
```

它编译。我真的无法弄清楚问题所在。似乎这与堆栈溢出或数据类型无关。我什至尝试了 Aki Suihkonen 对我之前的问题的回答，但它无济于事。有人可以帮我在这里找到问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:56:02.760

```
 for ( int m = 0; m < 2; ++m )
    {
       mean[i][j][m] = 10/m;
       //...
     } 
```

这导致 m = 0 的值除以零 .. 可能是崩溃的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T01:02:12.083

可能`double diff[600][800][3];`对于您系统的默认堆栈大小来说太大了。如果您有 64 位`double`s，那么这是 11.5MB，而许多编译器默认为 1MB 堆栈大小。

改为尝试`static double diff[600][800][3];`，对于您的其他大型阵列也是如此。

如果您确实需要数组是非静态的（即，如果函数是可重入的），您将需要使用动态分配。

# c++ - C++子串匹配实现

> ID：12758478
> 
> 赞同：4
> 
> 时间：2012-10-06T09:25:27.110
> 
> 标签：c++, string, algorithm, substring, string-matching

我有两个字符串，例如“hello”和“eo”，我希望在两个字符串之间找到重复的字符，即：本例中的“e”和“o”。

我的算法会这样

```
 void find_duplicate(char* str_1, char* str_2, int len1, int len2)
 {
     char c ;

     if(len1 < len2)
     {
        int* idx_1 = new int[len1]; // record elements in little string
        // that are matched in big string
        for(int k = 0 ; k < len1 ; k++)
              idx_1[k] = 0;

        int* idx_2 = new int[len2]; // record if element in str_2 has been 
        // matched already or not
        for(int k = 0 ; k < len2 ; k++)
              idx_2[k] = 0;

        for(int i = 0 ; i < len2 ; i++)
        {     
            c = str_1[i];

            for(int j = 0 ; j < len1 ; j++)
            {
                 if(str_2[j] == c)
                 {
                    if(idx_2[j] == 0) // this element in str_2 has not been matched yet
                    {
                         idx_1[i] = j + 1; // mark ith element in idx as matched in string 2 at pos j
                         idx_2[j] = 1;
                    }
                 }
             }
         }

         // now idx_1 and idx_2 contain matches info, let's remove matches.
         char* str_1_new = new char[len1];
         char* str_2_new = new char[len2];
         int kn = 0;
         for(int k = 0 ; k < len1 ; k++)
         {
            if(idx_1[k] > 0)
            {
                 str_1_new[kn] = str_1[k];
                 kn++;
            }
         }

         kn = 0;
         for(int k = 0 ; k < len2 ; k++)
         {
             if(idx_2[k] > 0)
             {
                 str_2_new[kn] = str_2[k];
                 kn++;
             }
         }
      }
      else
      {
            // same here, switching roles (do it yourself)
       }
  } 
```

我觉得我的解决方案很尴尬：-首先 if/else 和代码重复这两种情况的对称性-时间复杂度：用于查找重复项的 2*len1*len2 操作，然后是用于删除的 len1 + len2 操作-空间复杂度：两个 len1 和两个 len2字符*。

如果没有给出（有`len1`和`len2`没有诉诸 STL 向量）怎么办？

你能提供这个算法的实现吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:10:35.987

首先，这不是子字符串匹配问题——它是在两个字符串之间找到共同字符的问题。

您的解决方案适用于**O(n*m)**，其中*n=len1*和*m=len2*在您的代码中。通过计算每个字符串中的字符（其中 c 等于字符集的大小），您可以在**O(n+m+c)**时间内轻松解决相同的问题。这种算法称为[计数排序](https://en.wikipedia.org/wiki/Counting_sort)。

在您的情况下实现此示例代码：

```
#include <iostream>
#include <cstring> // for strlen and memset

const int CHARLEN = 256; //number of possible chars

using namespace std;

// returns table of char duplicates
char* find_duplicates(const char* str_1, const char* str_2, const int len1, const int len2)
{
  int *count_1 = new int[CHARLEN];
  int *count_2 = new int[CHARLEN];
  char *duplicates = new char[CHARLEN+1]; // we hold duplicate chars here
  int dupl_len = 0; // length of duplicates table, we insert '\0' at the end
  memset(count_1,0,sizeof(int)*CHARLEN);
  memset(count_2,0,sizeof(int)*CHARLEN);
  for (int i=0; i<len1; ++i)
  {
    ++count_1[str_1[i]];
  }
  for (int i=0; i<len2; ++i)
  {
    ++count_2[str_2[i]];
  }

  for (int i=0; i<CHARLEN; ++i)
  {
    if (count_1[i] > 0 && count_2[i] > 0)
    {
      duplicates[dupl_len] = i;
      ++dupl_len;
    }
  }
  duplicates[dupl_len]='\0';
  delete count_1;
  delete count_2;
  return duplicates;
}

int main()
{
  const char* str_1 = "foobar";
  const char* str_2 = "xro";
  char* dup =   find_duplicates(str_1, str_2, strlen(str_1), strlen(str_2));
  cout << "str_1: \"" << str_1 << "\" str_2: \"" << str_2 << "\"\n";
  cout << "duplicates: \"" << dup << "\"\n";
  delete dup;
  return 0;
} 
```

请注意，我也在此处对输出进行排序。如果您不想这样做，您可以跳过第二个字符串中的字符计数，然后开始在旅途中比较重复项。

但是，如果您打算能够检测到同一个字母的多个重复项（例如，如果“banana”和“arena”应该输出“aan”而不是“an”），那么您可以减去当前的计数解决方案并相应地调整输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:37:00.963

```
std::vector<char> duplicates;
for (auto c1: std::string(str_1))
  for (auto c2: std::string(str_2))
    if (c1 == c2)
      duplicates.push_back(c1); 
```

或者如果您没有符合 c++11 的编译器。

```
std::vector<char> duplicates;
std::string s1(str_1);
std::string s2(str_2);
for (std::size_t i = 0; i < s1.size(); i++)
  for (std::size_t j = 0; j < s2.size(); j++)
    if (s1[i] == s2[j])
      duplicates.push_back(s1[i]); 
```

--基于Zaroth的回答

```
std::vector<int> count(256,0);
for (auto c : std::string(str_1))
 count[c] += 1;
for (auto c : std::string(str_2))
 if (count[c] > 0)
   duplicates.push_back(c); 
```

# php - gdata的格式化数据响应

> ID：12758482
> 
> 赞同：0
> 
> 时间：2012-10-06T09:25:44.113
> 
> 标签：php, oauth, youtube-api

我使用 google 的 oauth 来访问用户数据，这是我的功能。

```
 public function actionOauth2callback(){
    $client_key = 'client-key-here';
    $client_secret = 'client-secret-here';
    $api_key = 'api-key';
    $redirect_uri = 'http://localhost:8888/proj/user/oauth2callback';

    if (!isset($_REQUEST['code']) && !isset($_SESSION['access_token'])) {
            // Print the below message, if the code is not received !
        echo "Please Authorize your account: <br />";
        echo '<a href = "https://accounts.google.com/o/oauth2/auth?client_id='. $client_key. '&redirect_uri='.$redirect_uri .'&scope=https://www.googleapis.com/auth/plus.me&response_type=code">Click Here to Authorize</a>';
    }
    else {
        if(!isset($_SESSION['access_token'])) {
          // Initialize a cURL session
            $ch = curl_init();

              // Set the cURL URL
              curl_setopt($ch, CURLOPT_URL, "https://accounts.google.com/o/oauth2/token");

              // The HTTP METHOD is set to POST
              curl_setopt($ch, CURLOPT_POST, TRUE);

              // This option is set to TRUE so that the response
              // doesnot get printed and is stored directly in 
              // the variable
              curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

              // The POST variables which need to be sent along with the HTTP request
              curl_setopt($ch, CURLOPT_POSTFIELDS, "code=" . $_REQUEST['code'] . "&client_id=" . $client_key . "&client_secret=" . $client_secret . "&redirect_uri=".$redirect_uri."&grant_type=authorization_code");

              // Execute the cURL request       
              $data = curl_exec($ch);

              // Close the cURL connection
              curl_close($ch);
              // Decode the JSON request and remove the access token from it
              $data = json_decode($data);

              $access_token = $data->access_token;

              // Set the session access token
              $_SESSION['access_token'] = $data->access_token;
        }
        else {
          // If session access token is set
            $access_token = $_SESSION['access_token'];
        }
        // Initialize another cURL session
        $ch = curl_init();

        // Set all the options and execute the session
        curl_setopt($ch, CURLOPT_URL, "https://gdata.youtube.com/feeds/api/users/default?v=2&access_token=" . $access_token);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        $data = curl_exec($ch);
        curl_close($ch);
        // Get the data from the JSON response
        print_r($data);         
        $data = json_decode($data);
        print_r($data);
    } 
```

但是我的数据响应格式有问题，它不是 JSON 或 XML，`string`就像这样

```
tag:youtube.com,2008:user:JNbz_VZ2LG1WD4zjKEY9uQ2010-06-02T13:11:26.000Z2012-09-29T20:32:13.000ZHuyTranHoanghttps://gdata.youtube.com/feeds/api/users/chenhuanghuiJNbz_VZ2LG1WD4zjKEY9uQ22HuymTran HoangVNJNbz_VZ2LG1WD4zjKEY9uQchenhuanghui 
```

任何人都可以告诉我，我有什么问题吗？
太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:31:18.803

所有 Google 数据 API 都支持`JSON`通过使用`alt`参数输出您需要查看 [开发人员指南：JSON / JavaScript](https://developers.google.com/youtube/2.0/developers_guide_json)

您的网址应如下所示

```
http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?v=2&alt=json 
```

# java - 如何使用带有 Blazeds 的 Flex 在 Java 中证明会话？

> ID：12758487
> 
> 赞同：1
> 
> 时间：2012-10-06T09:26:06.237
> 
> 标签：java, apache-flex, blazeds

我有一个使用 Blazeds 的 Flex 和 Java 的示例应用程序。

如何向特定用户提供会话？例如，一个用户可以登录应用程序，然后如果同一用户将 url 复制到同一浏览器的新选项卡中，则它会要求再次登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:56:07.607

在java端提供会话更好..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:45:54.720

would you not be able to use a cookie to handle session management, its possible that the cookie is not being correctly set with the session ID.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T09:46:01.047

如果您在 flex 和 java 中处理会话，那么您需要对您的 java 类进行远程对象调用并检查会话是否包含某些值。

```
public String getUser(){
 String status="";
 if(session!=null){
System.out.println(session.getId());
status= (String)session.getAttribute("uname");
}else{
session = FlexContext.getFlexSession();
status=null;
 }
return status;
} 
```

在 Flex 中检查此方法的结果是否为空，如果它不为空，则可以导航到您的登录页面，这样您就可以在 flex 中进行会话处理。

# objective-c - 让用户从 Mac OS X 应用程序安装 Java

> ID：12758488
> 
> 赞同：0
> 
> 时间：2012-10-06T09:26:12.600
> 
> 标签：objective-c, macos, cocoa, java

**好的，这是我的情况：**

*   我有一个应用程序（我即将在 App Store 内分发）
*   该应用程序依赖于“包含”`.jar`文件
*   因此，为了让应用程序顺利运行，Java 运行时必须存在于用户 OS X 安装中
*   截至最近，*Mountain Lion*剥离了任何以前的`Java Runtime`安装
*   我知道可以在需要时安装 Java

**然而 ：**

*   我的应用程序刚刚被拒绝，似乎是因为它“什么也没做”
*   我怀疑问题是测试是在 Mountain Lion 上完成的 - 运行 Mac，没有 Java 运行时。

**问题 ：**

*   我们如何确保安装了 Java 运行时
*   为什么没有调用`/usr/bin/java`触发自动安装JRE？
*   在我们使用它之前，我们如何让用户安装运行时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T09:42:54.570

Apple 不允许安装依赖于 Java 的应用程序。参见例如 [https://blogs.oracle.com/henrik/entry/oracle_jdk_and_javafx_sdk#comment-1335812118020](https://blogs.oracle.com/henrik/entry/oracle_jdk_and_javafx_sdk#comment-1335812118020)：

> 嗨，客人 - Apple 不允许在 App Store 中使用 Java。但是，它们不允许 App Store 应用程序依赖任何预安装的功能，但操作系统中存在的功能除外。如果您想通过 Mac App Store 发布您的 Java 应用程序，您必须创建一个包含您的应用程序和 JRE 的包，并将其作为一个单元上传到 Apple。我们明确允许在这种情况下重新分发 Oracle JDK 和 JRE；有关详细信息，请参阅下载 JDK 时接受的许可证。

也许这个链接有帮助：[在 Mac 上打包 Java 应用程序以进行分发](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)

# ios - 启用分页的滚动视图从左到右滚动 - iOS

> ID：12758489
> 
> 赞同：0
> 
> 时间：2012-10-06T09:26:13.573
> 
> 标签：ios, uiscrollview, scroll, direction

我已阅读有关 UIScrollView 的苹果文档，但无法明确设置启用分页的滚动视图滚动方向从左到右以适应阿拉伯内容......请有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:35:11.800

如果您只是将 更改为`contentOffset`在启动时显示最右边的页面怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:47:37.200

我通过在 viewdidload 中将滑块设置到我的滚动视图的最后一页来使用 UISlider 解决了这个问题

```
CGPoint pnt = CGPointMake(19 * self.scrollView.frame.size.width , 0) ;
    [self.scrollView setContentOffset:pnt animated:YES];

    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));
    [slider setValue:page]; 
```

现在我可以通过点击滚动并滚动阿拉伯内容的适当方向:)

注意：19 是滚动视图中的页数，等于 no of images - 1。

# python - 如何在函数中请求用户输入。Python相关

> ID：12758491
> 
> 赞同：-2
> 
> 时间：2012-10-06T09:26:34.490
> 
> 标签：python

有没有办法在定义函数时要求用户输入？例如这里有一个简单的函数：

```
def sum3(a,b,c):
    add=a+b+c
    return add 
```

在上面的代码中，有没有办法让用户输入 3 个数字。比如说，当程序运行时，用户会看到一个提示“请输入 3 个数字”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T09:30:05.910

```
def sum3():
    print "Please enter three numbers:"
    a = input()
    b = input()
    c = input()
    return sum((a,b,c)) # a+b+c

print sum3() # asks for input then prints result. 
```

*注意：我们使用内置[`sum`](http://docs.python.org/library/functions.html#sum)函数。*

# javascript - 在 JavaScript/NodeJS/Underscore 中计算哈希值

> ID：12758495
> 
> 赞同：1
> 
> 时间：2012-10-06T09:26:47.670
> 
> 标签：javascript, ruby, node.js, underscore.js

我在 Ruby 中有一个哈希数组，如下所示：

```
domains = [
 { "country" => "Germany"},
 {"country" => "United Kingdom"},
 {"country" => "Hungary"},
 {"country" => "United States"},
 {"country" => "France"},
 {"country" => "Germany"},
 {"country" => "Slovakia"},
 {"country" => "Hungary"},
 {"country" => "United States"},
 {"country" => "Norway"},
 {"country" => "Germany"},
 {"country" => "United Kingdom"},
 {"country" => "Hungary"},
 {"country" => "United States"},
 {"country" => "Norway"}
] 
```

编辑：：

因此，如果它以这种格式返回（来自 CouchDB）：

```
domains= {"total_rows":55717,"offset":0,"rows": [
    {"country":"Germany"},  
    {"country":"United Kingdom"},
    {"country":"Hungary"},
    {"country":"United States"},\   \ 
    {"country":"France"},
    {"country":"Germany"},
    {"country":"Slovakia"},
    {"country":"Hungary"},
    {"country":"United States"},
    {"country":"Norway"},
    {"country":"Germany"}, 
    {"country":"United Kingdom"},
    {"country":"Hungary"}, 
    {"country":"United States"},
    {"country":"Norway"}]
} 
```

我怎样才能应用相同的过程。即获取嵌入在数组中的项目？

使用 Ruby，我可以对数组进行交互并删除重复的值，如下所示：

```
counted = Hash.new(0)
domains.each { |h| counted[h["country"]] += 1 }
counted = Hash[counted.map {|k,v| [k,v.to_s] }] 
```

哪个输出是这样的：

```
{"Germany"=>"3",
 "United Kingdom"=>"2",
 "Hungary"=>"3",
 "United States"=>"3",
 "France"=>"1",
 "Slovakia"=>"1",
 "Norway"=>"2"} 
```

我的问题是使用 Javascript 可能使用下划线之类的库来实现相同目标的最佳方法是什么？

此致，

卡尔斯基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:32:11.420

只需循环这些值并在哈希中增加一个计数。

```
var count = {};
domains.forEach(function (obj) { 
    var c = obj.country;
    count[c] = count[c] ? count[c] + 1 : 1;
}); 
```

（请注意，IE 8 及更早版本不支持[`forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)，如果您关心它们，请使用 polyfill 或常规 for 循环）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T20:41:09.927

你也可以像在 Ruby 中一样使用 reduce 函数：

```
domains.reduce(function(country_with_count, country_object) {
    country_with_count[country_object['country']] = (country_with_count[country_object['country']] || 0) + 1;
    return country_with_count;
}, {}); 
```

# php - Codeigniter 表单打开如何删除 index.php

> ID：12758496
> 
> 赞同：3
> 
> 时间：2012-10-06T09:26:58.653
> 
> 标签：php, forms, codeigniter

在 Codeigniter 中，当我使用`form_open()`函数时，它会添加`index.php`到 url。
怎么能去掉呢？
注意：我使用 htaccess 从 url 中删除了 index.php。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T09:45:30.890

您可以对 form_open() 执行操作，类似这样

```
form_open(base_url().'your_controller_name/function_name'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-03T23:14:45.393

您没有从 $config['index_page'] = "index.php"; 中删除 index.php

```
/*
|--------------------------------------------------------------------------
| Index File
|--------------------------------------------------------------------------
|
| Typically this will be your index.php file, unless you've renamed it to
| something else. If you are using mod_rewrite to remove the page set this
| variable so that it is blank.
|
*/
//$config['index_page'] = 'index.php';
 $config['index_page'] = ''; 
```

# java - .jar 使用 -jar 标志运行

> ID：12758498
> 
> 赞同：0
> 
> 时间：2012-10-06T09:27:11.463
> 
> 标签：java, jar, noclassdeffounderror

我已经成功创建了一个在我的开发计算机上运行良好的 Java 程序，包括 Netbeans 和 .jar 文件（双击）。问题是它不会在没有 JDK 或没有通过命令行启动的计算机上启动`java -jar jarfile.jar`（请注意，它不会在没有`-jar`标志的情况下启动）。

在开发计算机上，jar 文件都不会在没有`-jar`命令行标志的情况下运行。

在程序无法启动的所有情况下，我遇到的错误如下。

```
S:\Folder>Program.jar
Exception in thread "main" java.lang.NoClassDefFoundError: S:\Folder\Program/jar
Caused by: java.lang.ClassNotFoundException: S:\Folder\Program.jar
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: S:\Folder\Program.jar. Program will exit. 
```

的文件结构`Program.jar`看起来是这样的：

```
Program.jar
    binlib
        build.xml
        manifest.mf
        onejar.mf
        one-jar-ant-task.xml
    com
        simontuffs
            onejar
                a lot of classes related to OneJar
    doc
        one-jar-license.txt
    lib
        itextpdf-5.3.3.jar
    main
        main.jar
            my
                package
                    all the classes related to my program
            META-INF
                manifest.mf
            Resources
                all my programs resources
            txt
                more resources
    META-INF
        MANIFEST.MF
    .version
    OneJar.class 
```

该项目使用[Netbeans 和 OneJar](http://wiki.netbeans.org/PackagingADistributableJavaApp)进行编译，以在同一个 jar 文件中获取所有必需的库（在本例中为 iText）以帮助用户 - 只有一个文件比两个文件更容易。

jar 文件根目录下的文件夹中的文件包含以下内容`MANIFEST.MF`：`META-INF`

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.7.1
Created-By: One-Jar 0.97 Ant taskdef
Main-Class: com.simontuffs.onejar.Boot
One-Jar-Main-Class: my.package.MainClass
Class-Path: lib/itextpdf-5.3.3.jar 
```

请注意，这是由 OneJar 自动生成的，所以我认为这是正确的，尽管主类的真实路径也包含`/main/main.jar/`该路径是否与根相关。

内部`MANIFEST.MF`jar 文件（实际程序）中的 为空。文件夹中的一个`binlib`包含以下内容：

```
Manifest-Version: 1.0
X-COMMENT: Main-Class will be added automatically by build
Main-Class: my.package.MainClass 
```

如何让 jar 运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:47:07.257

没有 JDK，jar 文件将无法运行，因为 Windows 不能正确调用`java.exe`（或`javaw.exe`）。当用户选择默认程序打开jar文件时，Windows会在注册表中添加以下内容：

```
"Path\To\JRE\Bin\java(w).exe" "%1" 
```

正如您在引用中看到的那样，缺少 -jar 标志。安装 JDK 时，它会自动更正这些值。

要解决此问题，您需要一个批处理脚本来替换错误的值。需要修复的注册表项`jarfile`是`java.exe`和`javaw.exe`。

我所做的是`jarfix.bat`使用该程序部署一个程序，其中包含如何正确“安装”程序的说明。

```
reg query "HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Runtime Environment" /v "CurrentVersion" 1>nul
if errorlevel 1 goto :error

@FOR /F "tokens=2* " %%A IN ('reg query "HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Runtime Environment" /v "CurrentVersion"') DO @SET JAVAVERSION=%%B

reg query "HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Runtime Environment\%JAVAVERSION%" /v "JavaHome" 1>nul
reg query "HKEY_CURRENT_USER\SOFTWARE\Classes\Applications\java.exe" 1>nul
reg query "HKEY_CURRENT_USER\SOFTWARE\Classes\Applications\javaw.exe" 1>nul
if errorlevel 1 goto :error

@FOR /F "tokens=2* " %%A IN ('reg query "HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Runtime Environment\%JAVAVERSION%" /v "JavaHome"') DO @SET JAVAHOME=%%B
@FOR /F "tokens=2* " %%A IN ('reg query "HKEY_LOCAL_MACHINE\SOFTWARE\Classes\jarfile\shell\open\command" /v ""') DO @SET JAVACOMMAND=%%B
@FOR /F "tokens=2* " %%A IN ('reg query "HKEY_CURRENT_USER\Software\Classes\Applications\java.exe\shell\open\command" /v ""') DO @SET JAVACOMMAND2=%%B

reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Classes\jarfile\shell\open\command" /f /v "" /t REG_SZ /d "\"%JAVAHOME%\bin\javaw.exe\" -jar \"%%1\" %%*"
reg add "HKEY_CURRENT_USER\Software\Classes\Applications\java.exe\shell\open\command" /f /v "" /t REG_SZ /d "\"%JAVAHOME%\bin\java.exe\" -jar \"%%1\" %%*"
reg add "HKEY_CURRENT_USER\Software\Classes\Applications\javaw.exe\shell\open\command" /f /v "" /t REG_SZ /d "\"%JAVAHOME%\bin\javaw.exe\" -jar \"%%1\" %%*" 
```

该程序将编辑注册表，因此该程序需要管理员权限。为了在程序启动时检查它们，我做了以下

```
NET SESSION >nul 2>&1
if %errorlevel% == 0 (
    echo  User successfully detected as an administrator!
) else (
    echo User doesn't have administrator privileges!
    exit /b 1
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:30:31.197

Java JAR 文件只是一个包含许多二进制类的 ZIP，您的 CPU 或操作系统无法理解。为了*运行*JAR，你需要能够真正理解和执行 JAR 文件、主类等内容的 Java（JRE 就足够了，JDK 是给开发人员的）。当然这是因为 Java 字节码不是你的 CPU 理解的汇编——这些是 Java VM 理解并翻译成 CPU 语言的指令。

您可能会考虑将您的 JAR 文件转换为 Windows 可执行文件，请查看： [如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:33:55.237

Jar 文件只是压缩数据，它不是可执行文件。`java`您必须使用可执行的命令来运行它。该命令具有打开 jar 文件、读取类文件和解释字节码、初始化 JVM 和运行字节码的智能。所以没有字节码解释器命令 ( `java`) ，一个 jar 文件就没用了。因此，您可以通过两种方式在 jar 中运行类文件。

> 1) java -classpath jarfile MainClass
> 
> 2) java -jar jarfile (如果 jar 文件的 MANIFEST 文件中提到了它的主类)

# javascript - 在 html 文本后附加 img

> ID：12758501
> 
> 赞同：1
> 
> 时间：2012-10-06T09:27:30.807
> 
> 标签：javascript, jquery, insertafter

我试图在一段文本之后附加一个 img 。我使用“嵌入”来加载新闻项目，所以我必须在窗口加载时执行。它真的很简单：[JsFiddle](http://jsfiddle.net/2VBSX/13/)

我无法弄清楚为什么它不起作用。我尝试了许多组合和事件（之后，插入等）似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:49:40.493

You should use `.after` method.

```
$('.embed').find('.description').after('<img src="http://latitudes.nu/wp-content/themes/theme-framework/framework/media/images/comment_icon.gif" style="width:14px; height:14px; border:none;" />'); 
```

***[A fix to your demo.](http://jsfiddle.net/2VBSX/19/)***

*But, use `setTimeout` is not a good idea, you should set the callback option as the plugin provide.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:28:54.127

```
$("#element").append("<img src=\"image\">"); 
```

# c++ - 使用 C++ 的 Ubuntu 中的文件搜索器

> ID：12758503
> 
> 赞同：0
> 
> 时间：2012-10-06T09:27:57.080
> 
> 标签：c++, linux, ubuntu, posix

我打算用 C++ 为 Ubuntu OS 制作一个文件搜索器。我的原始算法（尚未在 C++ 中实现）花费大量时间，有时可能无法搜索文件，因此我决定在 OS 文件表/目录中搜索文件，因为所有文件的位置和名称文件和文件夹已经存在于其中。所以我的问题是：

是否有任何系统调用来访问 C++ 中的 Ubuntu 文件表/目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:46:25.393

You should be aware that Ubuntu is just a distribution of Linux and that Linux in turn has a standard Unix system API (often termed "POSIX"). Therefore you should better ask / search using the term "Linux" or "Unix" or even "POSIX" instead of "Ubuntu".

In Unix the basic syscalls for examing directories are:

*   `opendir`, `readdir` and `closedir` and variants for reading the names inside a directory

*   the `stat` familiy (`stat`, `fstat`, `lstat`) for getting real information (file-type, size, ...) from a plain name.

If you look at the bottom of the man-pages for these syscalls you will find more relevant syscalls in the "SEE ALSO" section.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:44:15.103

我不明白你的问题，因为 Ubuntu 没有引入新的文件系统或其他与用户空间相关的东西，所以你可以为 Ubuntu 编写代码，就像你可以为任何 GNU/linux 操作系统编写代码一样，但是已经有非常好的实用程序像`locate`和一样的地方`find`。

# backbone.js - 如何用主干渲染灰尘模板

> ID：12758506
> 
> 赞同：1
> 
> 时间：2012-10-06T09:28:18.060
> 
> 标签：backbone.js, dust.js

我正在尝试在主干视图中显示灰尘模板（已编译）。

这是我在视图中的渲染功能：

```
render: ->
  dust.render("customer-item", @model.toJSON(), (err, output) ->
    throw err if err
    $(@el).html output
  )
  @ 
```

当我引导视图时，我看到在我的容器中添加了 2 个 div（对应于应该加载的 2 个模型），但它们都是空的。单个模板没有被重新定义......当我调试“输出”变量时，我看到了模板，所以理论上它应该被正确加载......

当我做一个简单的测试时**，我可以看到以下输出**：

```
render: ->
      $(@el).html "<span>TEST</span>"
      @ 
```

但是对于那种情况，**我没有输出**：

```
render: ->
      dust.render("customer-item", @model.toJSON(), (err, output) ->
        $(@el).html "<span>TEST</span>"
      )
      @ 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:26:52.640

我没有太多使用 Dust，但我记得你应该先编译你的模板（在纯 Javascript 中）：

```
var source   = $("#some-template").html();
var compiled = dust.compile(source,"table"); 

dust.loadSource(compiled);

dust.render("table",this.model.toJSON(),function(err,out){
    $(el).html(out);
}); 
```

**编辑：**

我想我找到了问题所在：当您`$(this.el).html(out)`在dust.render 函数内部调用时，`this`是脱离上下文的。因此，您必须将渲染功能更改为以下内容：

```
var self = this;
dust.render("table",this.model.toJSON(),function(err,out){
    $(self.el).html(out);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T08:51:26.750

正如@Ingro 解释的那样，这是 this (@) 上下文的一个问题。

一个选项是将 this 分配给局部变量（如“self”或“that”）

```
render: ->
  self = @
  dust.render("customer-item", @model.toJSON(), (err, output) ->
    throw err if err
    self.$el.html output
  )
  @ 
```

另一种选择是使用 CoffeeScript 的“=>”（粗箭头）

```
render: ->
  dust.render("customer-item", @model.toJSON(), (err, output) =>
    throw err if err
    @$el.html output
  )
  @ 
```

# r - 从 R 中的 glm 和 lmer 提取的残差方差

> ID：12758508
> 
> 赞同：2
> 
> 时间：2012-09-08T03:54:37.057
> 
> 标签：r, variance

我正在尝试将我所读到的关于多级建模的内容与我`glm`在 R 中所知道的内容合并。我现在正在使用来自[这里](http://www.bristol.ac.uk/cmm/learning/support/datasets/)的高度增长数据。

我做了一些如下所示的编码：

```
library(lme4)
library(ggplot2)

setwd("~/Documents/r_code/multilevel_modelling/")

rm(list=ls())

oxford.df <- read.fwf("oxboys/OXBOYS.DAT",widths=c(2,7,6,1))
names(oxford.df) <- c("stu_code","age_central","height","occasion_id")
oxford.df <- oxford.df[!is.na(oxford.df[,"age_central"]),]
oxford.df[,"stu_code"] <- factor(as.character(oxford.df[,"stu_code"]))
oxford.df[,"dummy"] <- 1

chart <- ggplot(data=oxford.df,aes(x=occasion_id,y=height))
chart <- chart + geom_point(aes(colour=stu_code))

# see if lm and glm give the same estimate
glm.01 <- lm(height~age_central+occasion_id,data=oxford.df)
glm.02 <- glm(height~age_central+occasion_id,data=oxford.df,family="gaussian")
summary(glm.02)
vcov(glm.02)
var(glm.02$residual)
(logLik(glm.01)*-2)-(logLik(glm.02)*-2)
1-pchisq(-2.273737e-13,1)
# lm and glm give the same estimation
# so glm.02 will be used from now on

# see if lmer without level2 variable give same result as glm.02
mlm.03 <- lmer(height~age_central+occasion_id+(1|dummy),data=oxford.df,REML=FALSE)
(logLik(glm.02)*-2)-(logLik(mlm.03)*-2)
# 1-pchisq(-3.408097e-07,1)
# glm.02 and mlm.03 give the same estimation, only if REML=FALSE 
```

`mlm.03`给我以下输出：

```
> mlm.03
Linear mixed model fit by maximum likelihood 
Formula: height ~ age_central + occasion_id + (1 | dummy) 
   Data: oxford.df 
  AIC  BIC logLik deviance REMLdev
 1650 1667 -819.9     1640    1633
Random effects:
 Groups   Name        Variance Std.Dev.
 dummy    (Intercept)  0.000   0.0000  
 Residual             64.712   8.0444  
Number of obs: 234, groups: dummy, 1

Fixed effects:
            Estimate Std. Error t value
(Intercept)  142.994     21.132   6.767
age_central    1.340     17.183   0.078
occasion_id    1.299      4.303   0.302

Correlation of Fixed Effects:
            (Intr) ag_cnt
age_central  0.999       
occasion_id -1.000 -0.999 
```

`random effect`您可以看到，我从 Jos WR Twisk 读到的部分中的残差存在差异`Applied Multilevel Analysis - A Practical Guide`，这表示模型中“无法解释的差异”的数量。

我想知道是否可以从 得到相同的剩余方差`glm.02`，所以我尝试了以下方法：

```
> var(resid(glm.01))
[1] 64.98952
> sd(resid(glm.01))
[1] 8.061608 
```

结果与`mlm.03`输出略有不同。这是否指的是相同的“残差” `mlm.03`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T11:51:56.207

您使用最小二乘估计一个简单的线性回归模型`glm.02`。`glm.01`另一方面，`mlm.03`是通过最大似然估计的线性混合模型。我不知道您的数据集，但看起来您使用该`dummy`变量在 2 级创建了一个零方差的集群结构。

所以你的问题基本上有两个答案，但只有第二个答案对你的情况很重要。模型`glm.02`和`mlm.03`不包含*相同*的残差方差估计，因为...

1.  模型*通常*不同（混合效应与经典回归）。但是，在您的情况下，该`dummy`变量似乎抑制了混合模型中的附加方差分量。所以对我来说，模型似乎是平等的。

2.  用于估计残差方差的方法不同。`glm`使用 LS，`lmer`在您的代码中使用 ML。残差方差的 ML 估计略有偏差（导致方差估计更小）。这可以通过使用 REML 而不是 ML 来估计方差分量来解决。

但是，对于似然比检验，使用经典 ML（而不是 REML）仍然是必要且正确的。使用 REML 比较两种可能性是不正确的。

干杯!

# phpmyadmin - 是否可以从 phpmyadmin 导出密码

> ID：12758509
> 
> 赞同：1
> 
> 时间：2012-10-06T09:28:52.227
> 
> 标签：phpmyadmin

请让我知道我是否可以在 phpmyadmin 的“导出”上输入密码？我使用共享主机。

# json - 带有 Json 的 Struts2

> ID：12758514
> 
> 赞同：1
> 
> 时间：2012-10-06T09:29:38.467
> 
> 标签：json, struts2

我是 struts2 的新手。如何在 Sruts2 中使用 Json？任何人都可以提供一个示例或有用的教程来学习。

谢谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:46:55.263

那么JSON可以同时使用

1.  将数据从您的操作类发送到 UI
2.  从 UI 将数据发送回 Action

有很多方法可以做到这一点，并且有很多图书馆，其中很少有

1.  谷歌格森
2.  杰克逊

Struts2 带有自己的[JSON 插件](http://struts.apache.org/2.2.3/docs/json-plugin.html)，它重量轻，速度快，与 Struts2 很好地集成，它有足够的能力以两种方式发送和接收数据。

我建议您查看[插件文档](http://struts.apache.org/2.2.3/docs/json-plugin.html)以了解如何配置它以及如何与 Struts2 一起使用。

文档还包括一些示例，可以为您提供一个想法和一个启动。

# php - 尝试匹配 PHP 数组中的变量

> ID：12758515
> 
> 赞同：0
> 
> 时间：2012-10-06T09:29:40.947
> 
> 标签：php, arrays, string, variables

我遇到了一个 php 数组问题。我有一个从 URL 获取值的网页，我需要将这些值与页面上的某些值进行交叉引用，如果它们匹配输出“是”。这是一个表达引擎的工作。

URL 类似于 domain.com/page/C12&C14

C12 和 C14 代表不同的类别。我已经获取了 url 的最后一位，从值中删除了“C”，然后将 12&14 分解为一个数组。

我 print_r 页面上的数组，它显示： Array ( [0] => 12 [1] => 14 )

因此，值在数组中。迷人的。

现在在页面上我有一个看起来像的 html 列表

10
12
14
15

我想在数组中当前的变量旁边输出一个 YES，所以理想的输出是：

10
12 - 是
14 - 是
15

我正在尝试这个，但它总是在他们旁边说“不”。

```
$currentnumber = 12;
foreach ($tharray as $element) { 
if ($element == $currentnumber) { echo "Yes"; } else { echo "No"; }  
} 
```

我认为这应该有效，但事实并非如此。我检查了一下，数组和变量都是刺痛的。我对两者都做了一个 strlen() 来查看它们是否相同，但是 $currentnumber 输出“13”，而数组变量输出“2”。

关于为什么它说 13 的任何想法？

变量是错误的字符串类型吗？如果是，我将如何转换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:36:01.393

你可以试试

```
$tharray = array(10,12,14,15);
$allowed = array(12,14);

echo "<pre>";
foreach ( $tharray as $element ) {
    if (in_array($element, $allowed)) {
        echo $element, " -  Yes ", PHP_EOL;
    } else {
        echo $element , PHP_EOL ;
    }
} 
```

如果您不介意单线解决方案

```
array_walk($tharray, function($item)use($allowed) { echo in_array($item, $allowed) ?  $item. " -  Yes ". PHP_EOL : $item . PHP_EOL  ;}); 
```

输出

```
10
12 -  Yes 
14 -  Yes 
15 
```

# php - PHP单选按钮检查是否为空

> ID：12758517
> 
> 赞同：3
> 
> 时间：2012-10-06T09:29:46.373
> 
> 标签：php, forms, radio-button

所以我们得到了这个学校任务，我们需要检查其中一个字段是否未填写并显示错误。我们这样做了，但是由于某些奇怪的原因，当未选中单选按钮时它不会显示错误（文本字段空检查工作正常）。

我和朋友尝试了很多可能性，但它们似乎都不起作用。我们在这个任务上被困了两个小时。现在我们尝试制作单独`if`的 's，但这似乎也不起作用。

这些是重要的部分：

```
<p>
<input type="hidden" name="taal" value="false">
    Choose a language
<input type="radio" name="taal" value="N"> Dutch
<input type="radio" name="taal" value="E"> English
<input type="radio" name="taal" value="S"> Spanish 
```

```
if (@$_POST['taal'] == null){
echo "No Language gotten";
return;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T09:32:56.687

您可以省略隐藏标签：

```
Choose a language
<input type="radio" name="taal" value="N"> Dutch
<input type="radio" name="taal" value="E"> English
<input type="radio" name="taal" value="S"> Spanish 
```

并用于`isset()`检查值是否已发送。如果没有选中任何单选按钮，`taal`则根本不会添加到发布的数据中。所以你必须检查它是否被设置，你可以这样做[`isset()`](http://php.net/manual/en/function.isset.php)：

```
if (!isset($_POST['taal'])){
    echo "No Language gotten";
    return;
} 
```

此外，在大多数情况下，建议**不要**使用[`@`operator](http://www.php.net/manual/en/language.operators.errorcontrol.php)。错误消息（警告、通知等）用于警告您代码中的问题。解决问题而不是隐藏它，否则它可能会在以后回来咬你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T09:33:09.310

```
if (!isset($_POST['taal']))  { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T09:33:09.133

那是因为它永远不会是空的。你给了它一个默认值，`"false"`. 检查：

```
if ($_POST['taal'] == "false") {
   //No language given
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T09:34:09.223

隐藏元素中的值 'false' 是一个字符串，所以你应该比较`$_POST['taal'] == 'false'`它才能工作。

最好将此 false 元素设置为空字符串，然后将其与`''`. 另外，我不建议使用`@`来抑制警告，所以试试这个：

```
if (!isset($_POST['taal']) || !$_POST['taal']) { ... 
```

# c#-4.0 - 为什么我使用 Parallel.For 得到不同的结果？

> ID：12758519
> 
> 赞同：0
> 
> 时间：2012-10-06T09:30:09.477
> 
> 标签：c#-4.0

```
using System.Threading.Tasks;

const int _Total = 1000000;
[ThreadStatic]
static long count = 0;

static void Main(string[] args)
{
    Parallel.For(0, _Total, (i) =>
    {
        count++;
    });

    Console.WriteLine(count);
} 
```

我每次得到不同的结果，有人可以帮助我并告诉我为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:36:32.643

很可能您的“计数”变量不是任何形式的原子，因此您正在获得不同步的并发修改。因此，以下事件序列是可能的：

*   线程 1 读取“计数”
*   线程 2 读取“计数”
*   线程 1 存储 value+1
*   线程 2 存储 value+1

因此，“for”循环进行了 2 次迭代，但值只增加了 1。由于线程顺序是“随机的”，因此结果也是如此。

当然，事情可能会变得更糟：

*   线程 1 读取计数
*   线程 2 增加计数 100 次
*   线程 1 存储 value+1

在这种情况下，线程 2 完成的所有这 100 次增加都将被撤消。虽然只有当“++”实际上被分成至少 2 个机器指令时才会发生这种情况，但它可以在操作中间被中断。在单指令情况下，您只处理交错的硬件线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:30:07.147

这是一个典型的竞争条件场景。

因此，很有可能 ThreadStatic 在这里不起作用。在这个具体示例中使用 System.Threading.Interlocked：

```
void Main()
{
    int total = 1000000;
    int count = 0;

    System.Threading.Tasks.Parallel.For(0, _Total, (i) =>
    {
    System.Threading.Interlocked.Increment(ref count);      
    });

    Console.WriteLine(count);
} 
```

类似的问题 [C# ThreadStatic + volatile members not working as expected](https://stackoverflow.com/questions/10993574/c-sharp-threadstatic-volatile-members-not-working-as-expected)

# android - 将 int 传递给 android 活动

> ID：12758525
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:31:27.077
> 
> 标签：android, android-activity

我使用此代码将 int 传递给下一个活动

```
Intent intent = new Intent(A.this, B.class);    
intent.putExtra("selectedType", i);    
startActivity(intent); 
```

然后在活动 B 中收到这个

```
Intent intent = new Intent();
int i = intent.getIntExtra("selectedType", 0);
Toast.makeText(getApplicationContext(), String.valueOf(i),
Toast.LENGTH_LONG).show(); 
```

但是在这个活动中，它总是显示0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:35:39.540

```
Intent intent = new Intent(); 
```

您正在创建一个新意图，而不是使用传递给 ActivityB 的意图。所以使用

```
Intent intent  = getIntent(); 
```

反而;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:40:46.430

用这个`int i = getIntent().getIntExtra("selectedType", 0);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:35:12.817

尝试`getIntent().getExtras().getInt("selectedType")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T09:35:24.203

现在试试，

```
 int value = getIntent().getExtras().getInt("selectedType"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T09:35:50.257

```
Intent intent = new Intent(A.this, B.class);
    intent.putExtra("selectedType",i);
    startActivity(intent); 
```

并接收..

```
if (getIntent().getExtras().containsKey("selectedType")) {
        int message = getIntent().getIntExtra("selectedType");

        Toast.makeText(ReceiverActivity.this, "" + message, Toast.LENGTH_LONG)
                .show();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T09:36:57.800

```
Intent intent = new Intent(A.this, B.class);    
intent.putExtra("selectedType", i);    
startActivity(intent);

Intent intent = new getIntent();
                    ^^^^^^^^^ 
int i = intent.getIntExtra("selectedType", 0);
Toast.makeText(getApplicationContext(), String.valueOf(i),
Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T09:37:58.623

因为您正在创建一个新意图并尝试在其上获取“selectedType”。但是这个意图刚刚被创造出来，所以它没有你所寻求的价值。

尝试使用 getIntent() 方法来获取您的调用意图，它具有您的“selectedType”值......这是一个快照：

```
Bundle extras = getIntent().getExtras();
if(extras != null) {
   int value = extras.getIntExtra("selectedType", 0);
   Toast.makeText(getApplicationContext(), String.valueOf(value), Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-06T09:38:36.703

> 然后在活动 B 中收到这个
> 
> ```
> Intent intent = new Intent();
> int i = intent.getIntExtra("selectedType", 0); 
> ```

这是错误的。您正在创建一个新的意图对象。要获取用于启动此活动的意图对象，请使用 getIntent() 方法。

```
Intent intent = getIntent();
int i = intent.getIntExtra("seelctedType", 0); 
```

# java - 如何在 c:if 中使用布尔变量

> ID：12758527
> 
> 赞同：9
> 
> 时间：2012-10-06T09:31:35.830
> 
> 标签：java, jsf, jstl

我在 JSF 中使用此代码：

```
<c:if test="#{sV.done.booleanValue()}">
     <option value="#{sV.id}" selected="selected">#{sV.text}</option>
</c:if>
<c:if test="#{not sV.done.booleanValue()}">
     <option value="#{sV.id}">#{sV.text}</option>
</c:if> 
```

`sv`是我的类包含数据（pojo），done 是一个`Boolean`变量，我想显示`option`带有`selected`属性的标签 if `sV.done`is `true`。但我做不到。不知道我哪里错了。

否则可能会出现问题`c`，因为`c:forEach`在我的情况下在同一页面中的某个时间之前没有工作？可能是什么原因？我哪里错了？

每次它显示选项标签时没有 selected `attribute`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T09:35:51.473

尝试这个： -

```
<c:if test="${sV.done == true}">...</c:if>  // or
<c:if test="${sV.done eq true}">...</c:if>  // or
<c:if test="${sV.done}">...</c:if>   // or 
```

**而对于否定（如果 sV.done 为假）： -**

```
<c:if test="${! sV.done}">...</c:if>    /// OR
<c:if test="${not sV.done}">...</c:if>  /// OR
<c:if test = "${sV.done != true}">...</c:if>     // OR
<c:if test = "${sV.done ne true}">...</c:if>  // OR 
```

有关**if 运算符**的更多信息，请查看此链接：- [JSTL if](http://www.java2s.com/Tutorial/Java/0380__JSTL/0080__If.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T11:38:05.990

只要您使用的是 EL 2.2，您的语法就很好。那么，没有一个 JSTL`<c:xxx>`标记被解释？您需要导入 JSTL 核心标记库。不清楚您使用的是什么视图技术和 JSTL 版本，因此这里是 JSP 和 Facelets 的导入示例。

带有 JSTL 1.0 的 JSP：

```
<%@taglib prefix="c" uri="http://java.sun.com/jstl/core" %> 
```

带有 JSTL 1.1/1.2 的 JSP：

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

带有 JSTL 1.1/1.2 的 Facelets 1.x：

```
<html ... xmlns:c="http://java.sun.com/jstl/core"> 
```

带有 JSTL 1.2 的 Facelets 2.x：

```
<html ... xmlns:c="http://java.sun.com/jsp/jstl/core"> 
```

### 也可以看看：

*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)

* * *

**与具体问题无关**，您是否考虑过使用 JSF`UISelectOne`组件而不是自己摆弄`<option>`元素？[您可以在我们的`h:selectOneMenu`wiki 页面](https://stackoverflow.com/tags/selectonemenu/info)中找到一些具体示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T10:41:23.280

JSF 和 JSTL 都直接访问“盒装”对象（布尔值、整数等）。不需要拆箱——因此您不必调用 booleanValue()。

```
<c:if test="${sV.done}">...</c:if> 
```

但实际上，您的整个方法可能会更好——我不在页面中呈现选项，没有选项列表和值。我不会每次都手动写出循环和选择测试，有标签或者你可以编写一个方法来做到这一点。

**超级提示：** 我有一个名为 Pair(String name, Object value) 和库方法 HtmlUI.renderSelectOptions() 的类，用于从这些列表和“当前”值中输出 SELECT 选项。

选择组合框可能也不是布尔值的最佳表示？您可以使用复选框。但这取决于您的 UI 设计。

如果您确实想这样做，您可以只切换标签内*的 SELECTED 属性。*比为整个、键和值复制代码更容易。对于遗留代码，我有一个函数也可以满足这个确切的要求:)

希望这可以帮助！投票给我。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-07T07:02:44.047

正如我在问题中提到的那样，似乎其他一些组件/库正在干扰 c:if 的工作，它在任何情况下都不起作用。我尝试了上面给出的所有建议。感谢大家的回复。

# php - 如何通过字符串的每 n 次出现来拆分数组？

> ID：12758528
> 
> 赞同：0
> 
> 时间：2012-10-06T09:31:43.720
> 
> 标签：php, string, explode

这个问题[与使用 PHP 在每个第 n 个位置处的一个字符串 Split](https://stackoverflow.com/questions/12686561/split-a-string-at-every-nth-position-with-php)不同，因为我想拆分一个字符串，如下所示：

```
foo|foo|foo|foo|foo|foo 
```

进入这个（每 2 次`|`）：

```
array (3) {
  0 => 'foo|foo',
  1 => 'foo|foo',
  2 => 'foo|foo'
} 
```

所以，基本上，我想要一个类似于`explode()`（我真的怀疑我要问的是内置的）的函数，但它在某个字符串的每第 n 次出现时“爆炸”。

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:12:18.347

您可以使用`explode + array_chunk + array_map + implode`

```
$string = "foo|foo|foo|foo|foo|foo";
$array = stringSplit($string,"|",2);
var_dump($array); 
```

输出

```
array
  0 => string 'foo|foo' (length=7)
  1 => string 'foo|foo' (length=7)
  2 => string 'foo|foo' (length=7) 
```

使用的功能

```
function stringSplit($string, $search, $chunck) {
    return array_map(function($var)use($search){return implode($search, $var); },array_chunk(explode($search, $string),$chunck));
} 
```

# visual-studio - 我的 SQL Server Compact 工具箱出了什么问题？

> ID：12758535
> 
> 赞同：2
> 
> 时间：2012-10-06T09:32:30.153
> 
> 标签：visual-studio, sql-server-ce, visual-studio-2012

我刚刚在 VS2012 中安装了 SQL Server Compact Toolbox，但是当我打开受密码保护的数据库并在工具箱树形视图中展开表节点时，似乎只是在表下显示“正在加载...”时卡住了。我没有被要求输入密码，也没有看到任何提供密码的地方。

如果我使用服务器资源管理器连接到同一个数据库，一切都会找到，我可以检查表。

我在工具箱中做错了什么？

# wordpress - wordpress 的 woocommerce 插件中未显示分页

> ID：12758545
> 
> 赞同：1
> 
> 时间：2012-10-06T09:33:12.973
> 
> 标签：wordpress, pagination, woocommerce

产品页面中不显示用于分页的导航箭头键。我在 wordpress 3.4.2 版本中使用了 woocommerce 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:26:56.463

在您拥有足够的产品以拥有 2 个或更多页面之前，它们将不可见。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-21T10:21:44.787

不记得为什么会这样。我认为这是因为每页的 wordpress 帖子在您的设置中设置为“n”，因此 woocommerce 遵循该设置（仅显示“n”个产品）无论如何修复它打开您的 functions.php 文件并插入： add_filter('loop_shop_per_page' , create_function('$cols', 'return 4;'));

# javascript - 父级上的jQuery单击事件，但找到子（单击）元素

> ID：12758547
> 
> 赞同：41
> 
> 时间：2012-10-06T09:33:28.123
> 
> 标签：javascript, jquery, events, dom

假设我有一个父元素，它内部有很多嵌套的子元素：

```
<div id="p">
    <div id="c1">
        <div id="c2"></div>
        <div id="c3"></div>
    </div id="c4">
        <div id="c5"></div>
    </div>
</div> 
```

我已经`click`在父级上绑定了一个事件：

```
$('#p').bind('click', function() {
    alert($(this).attr('id'));
}); 
```

因为事件被分配给父元素，所以我总是看到父 id，但是，我想知道是否有任何可能的方法来找出哪些子元素已被点击？

我也无法将任何事件分配给子元素或从父 div 中删除事件侦听器。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-06T09:34:48.323

您需要将事件对象传递给函数以获取触发事件的项目， event.target 将为您提供源元素。

**[现场演示](http://jsfiddle.net/rLJMh/)**

```
 $('#p').bind('click', function(event) {
    alert(event.target.id);
 }); 
```

或者

**[现场演示](http://jsfiddle.net/rLJMh/1/)**

```
$('#p').bind('click', function(event) {
    alert($(event.target).attr('id'));
}); 
```

**编辑**

第一种方法在性能、简单性和可读性`event.target.id`方面优于第二种方法。`$(event.target).attr('id')`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-06T09:41:38.053

你可以试试下面的代码。也尝试使用 jsfiddle（演示）。

```
$('#p').on('click', function(event) {
    alert(event.target.id);
});​ 
```

[**试用演示**](http://jsfiddle.net/Tnpwb/)

第二个问题的答案是您可以将事件分配给孩子并从其父母中删除。看一下这个。

```
.stopPropagation(); 
```

防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。[阅读更多](http://api.jquery.com/event.stopPropagation/)

如果您希望仅执行特定事件并且不允许触发其他事件，请使用以下代码

```
event.stopImmediatePropagation() 
```

阻止其余的处理程序被执行，并防止事件在 DOM 树中冒泡。[阅读更多](http://api.jquery.com/event.stopImmediatePropagation/)

我希望这能解决你的问题。如果您有任何问题，请随时提问。谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-30T22:15:53.563

如果您的元素有孙子，则有更好的方法来获取子元素。注意大于号。

```
$('.parent > .child').click(function() {
    // This will be the child even if grandchild is clicked
    console.log($(this));
}); 
```

# c - 服务器接受许多客户端

> ID：12758550
> 
> 赞同：1
> 
> 时间：2012-10-06T09:33:53.327
> 
> 标签：c, sockets

如何修改我的服务器以接受许多客户端？

```
void Serveur()
{//Declaring process variables.
    int server_sockfd, client_sockfd;
    int server_len ; 
    int rc ; 
    unsigned client_len;
    struct sockaddr_in server_address;
    struct sockaddr_in client_address;

    //Remove any old socket and create an unnamed socket for the server.
    server_sockfd = socket(AF_INET, SOCK_STREAM, 0);
    server_address.sin_family = AF_INET;
    server_address.sin_addr.s_addr = htons(INADDR_ANY);
    server_address.sin_port = htons(1111) ; 
    server_len = sizeof(server_address);

    rc = bind(server_sockfd, (struct sockaddr *) &server_address, server_len);
    printf("RC from bind = %d\n", rc ) ; 

    //Create a connection queue and wait for clients
    rc = listen(server_sockfd, 5);
    printf("RC from listen = %d\n", rc ) ; 

    client_len = sizeof(client_address);
    client_sockfd = accept(server_sockfd, (struct sockaddr *) &client_address, &client_len);
    printf("after accept()... client_sockfd = %d\n", client_sockfd) ; 
    char ch[BUFFER_TAILLE];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:42:05.600

你有两个解决方案。

*   第一个是在不同的进程/线程中处理每个客户端。点击此[链接](http://www.tutorialspoint.com/unix_sockets/socket_server_example.htm)了解更多信息（处理多个连接部分）。

*   第二个是使用[选择](http://linux.die.net/man/2/select)，并[处理您的服务器循环中的每个客户端](http://www.lowtek.com/sockets/select.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:41:39.527

为了能够接受多个客户，您需要做几件事：

1.  首先，您的套接字必须是非阻塞的，即当您在客户端套接字上调用 eg `read`/`recv`时，它不会阻塞，但如果没有可读取的内容则立即返回。
2.  您需要学习使用`select`or `poll`（或类似的）函数来了解哪些套接字已准备就绪。
3.  您需要跟踪所有连接的客户端。最简单的方法是保存一个结构的链接列表，其中包含有关每个客户端的信息，包括实际的套接字。
4.  一个事件循环。例如，您需要在循环中继续调用`select`，并检查服务器套接字或任何客户端套接字是否“准备就绪”（即有可以接收的输入）。

Internet 上有许多示例和教程展示了如何执行此操作。

除了我上面概述的方法之外，还有其他方法可以处理这个问题。最常见的是保持套接字阻塞，当新连接到达时，您创建一个新线程或进程来处理客户端连接。这种方法在客户端连接较短或您不希望有很多活动连接的服务器（如 Web 服务器）中最常见。

您当然可以组合这些方法，例如让进程/线程处理多个连接。

# zend-framework2 - 如何在 ZF2 中使用 ZF1 $this->action？

> ID：12758561
> 
> 赞同：1
> 
> 时间：2012-10-06T09:35:19.693
> 
> 标签：zend-framework2

我的问题是在 ZF2 中缺少 Action View Helper。
例如，我如何在 layout.phtml （或其他视图）中使用？

```
ZF1: $this->action("index", "index") // call IndexController indexAction 
```

ZF2：？？？

我该如何解决这个问题？

* * *

问题解决了！！！;) [http://www.michaelgallego.fr/blog/?p=223](http://www.michaelgallego.fr/blog/?p=223)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:21:44.353

首先，您需要编写一个自定义助手，如下所示：

[https://github.com/AlloVince/eva-engine/blob/master/vendor/Eva/View/Helper/Action.php](https://github.com/AlloVince/eva-engine/blob/master/vendor/Eva/View/Helper/Action.php)

也许您需要更改命名空间以适合您的项目，然后将此帮助程序注册为模块配置文件中的可调用帮助程序服务：

```
'view_helpers' => array(
    'invokables' => array(
        'action' => 'Eva\View\Helper\Action',
    ),  
), 
```

然后您可以像这样调用视图中的任何控制器操作：

```
$this->action('Engine\Controller\PagesController', 'indexAction'); 
```

* * *

**编辑**：

OP 在这里找到了一个不错的解决方案：http: [//www.michaelgallego.fr/blog/](http://www.michaelgallego.fr/blog/?p=223) ?p=223 。由于他没有将其发布为答案，因此其他用户可能会错过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T06:47:47.603

`Action`在 zf1 中不建议使用视图助手，并且在 zf2 中将其作为不好的做法完全删除。您应该考虑更改应用程序设计以不依赖此类行为。

# prolog - (\+)//1 的合法使用

> ID：12758567
> 
> 赞同：7
> 
> 时间：2012-10-06T09:35:54.037
> 
> 标签：dcg, prolog, dcg, iso-prolog

在语法规则（[dcg](/questions/tagged/dcg "显示标记为“dcg”的问题")）中，有几个预定义的结构：`(',')//2`含义连接、`('|')//2`含义交替等。一个由多个但不是所有 Prolog 系统支持的结构是`(\+)//1`.

就个人而言，我只是为了使用它而使用它。我从未在其他人编写的代码中看到它。

那么，是否有合法用途`(\+)//1`？

编辑：此外，在带有未实例化变量`(\+)//1`的查询中是否有合法用途。`phrase(nt, L)``L`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T11:59:09.843

\+ 可用于创建不那么模棱两可的语法。使用 \+ 的优势！例如，是 \+ 的某种声明性，因此可以重新排序生成的 DCG 规则。

让我们举个例子，考虑以下语法：

```
s([X|Y]) --> t(X), s(Y).               % 1
s([])    --> [].                       % 2

t(2)     --> [a,a].                    % 3
t(1)     --> [a].                      % 4 
```

上面的语法是高度模棱两可的，例如我得到了以下输入的多个解析：

```
?- phrase(s(A),[a,a,a,a,a]).
A = [2,2,1] ;
A = [2,1,2] ;
A = [2,1,1,1] ;
etc.. 
```

现在假设我更喜欢 t 的长解析而不是 t 的短解析。我可以通过以下方式进行切割：

```
t(2)     --> [a,a], !.                 % 5
t(1)     --> [a].                      % 6

?- phrase(s(A),[a,a,a,a,a]).
A = [2,2,1] ;
No 
```

不幸的是，我无法重新订购。由于执行以下操作不会产生预期的结果。尽管 s(A) 现在以不同的顺序产生结果，但我们又回到了第一方，因为文法又是模棱两可的：

```
t(1)     --> [a].                      % 7
t(2)     --> [a,a], !.                 % 8

?- phrase(s(A),[a,a,a,a,a]).
A = [1,1,1,1,1] ;
A = [1,1,1,2] ;
A = [1,1,2,1] ;
etc... 
```

现在让我们尝试使用 \+。我们可以用下面的否定来代替cut：

```
t(2)     --> [a,a].                    % 9
t(1)     --> [a], \+ [a].              % 10

?- phrase(s(A),[a,a,a,a,a]).
A = [2,2,1] ;
No 
```

现在让我们试试是否可以重新排序。我们对t//1的语法规则重新排序：

```
t(1)     --> [a], \+ [a].              % 11
t(2)     --> [a,a].                    % 12

?- phrase(s(A),[a,a,a,a,a]).
A = [2,2,1] ;
No 
```

声明性非常有用。例如，这意味着我们可以在从右到左的图表解析器中使用 \+，它以任意顺序选择语法规则。声明性确保图表解析器的自下而上的前向链接产生相同的结果，而与 DCG 规则的输入顺序无关。

然后可以将 DCG 技术应用到大型自然语言 (NL) 项目中，并且可以很好地扩展。NL 语法可以根据经验调整为确定性。一个语法越确定，它的解析效率就越高。原本难以处理的复杂 NL 语法变得可行。

再见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:20:12.097

当 L 未被实例化时，该文法将用于文本生成。那么你根本不需要语法 \+ 。由于某些文本不再存在歧义问题。

让我们举个例子，考虑以下语法：

```
s([X|Y]) --> t(X), s(Y).               % 1
s([])    --> [].                       % 2

t(2)     --> [a,a].                    % 3
t(1)     --> [a].                      % 4 
```

每个不同的解析都有不同的解析树。并且使用短语/2 生成文本没有歧义。以下查询恰好给出了一个答案：

```
?- phrase(s([2,1]),L).
L = [a,a,a]
?- phrase(s([1,2]),L).
L = [a,a,a]
?- phrase(s([1,1,1]),L).
L = [a,a,a] 
```

但是有一点重用的问题。假设我有一个带有 \+ 用于解析的 NL 语法。然后我不能用它来解析。由于 \+ 目标的实例化模式会有所不同，因此构造的语义会发生变化。

出路可能只是使用两种语法。一个用于解析，一个用于反解析。我猜解析和反解析是两种不同的认知能力。记得在学校里，有阅读练习和写作练习。计算机科学领域也是如此。

我认为在某些情况下也可以使用单个语法，并将 \+ 视为消歧的注释，在 unparse 期间删除或以不同方式处理。可以建立这样一种机制。但与解析相比，反解析的问题更深：辅助条件的双向性 ({}/1)、反解析期间的左递归等……

再见

# c++ - MAC：如何检查文件是否仍在 C++ 中被复制？

> ID：12758569
> 
> 赞同：1
> 
> 时间：2012-10-06T09:36:04.713
> 
> 标签：c++, macos, filesystems, finder

在我当前的项目中，我们需要检查文件是否仍在复制。

我们已经开发了一个库，它将在特定文件夹以及相应的文件路径上向我们提供诸如 file_added 、 file_removed 、 file_modified 、 file_renamed 之类的操作系统通知。

这里的问题是，假设您添加 1 GB 文件，它会在复制文件时发出多个通知，例如 file_added 、 file_modified 、 file_modified 。

现在我决定通过检查文件是否正在复制来超越这些通知。基于此，我将忽略事件。

我写了下面的代码，它告诉文件是否正在被复制，它将文件路径作为输入参数。详细信息：- 在 Mac 中，在复制文件时，创建日期设置为小于 1970 年的某个日期。一旦复制，日期将设置为当前日期。我正在使用这种技术。基于此，我决定正在复制该文件。

问题：- 当我们在终端中复制文件时，它失败了。请告诉我任何方法。

```
bool isBeingCopied(const boost::filesystem::path &filePath)
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    bool isBeingCopied = false;
    if([[[[NSFileManager defaultManager] attributesOfItemAtPath:[NSString stringWithUTF8String:filePath.string().c_str()] error:nil] fileCreationDate] timeIntervalSince1970] < 0)
    {
        isBeingCopied = true;
    }

    [pool release];
    return isBeingCopied;
} 
```

# python - PyOpenGL - 将变换矩阵传递给着色器

> ID：12758570
> 
> 赞同：25
> 
> 时间：2012-10-06T09:36:05.993
> 
> 标签：python, opengl

我无法将投影和模型视图矩阵从我的 PyOpenGL 代码传递到 GLSL 着色器。我的理解是 OpenGL 矩阵是列主要的，但是当我如图所示传入投影和模型视图矩阵时，我什么也看不到。我尝试了矩阵的转置，它适用于模型视图矩阵，但投影矩阵不起作用。这是代码：

```
导入 OpenGL
从 OpenGL.GL 导入 *
从 OpenGL.GL.shaders 导入 *
从 OpenGL.GLU 导入 *
从 OpenGL.GLUT 导入 *
从 OpenGL.GLUT.freeglut 导入 *
从 OpenGL.arrays 导入 vbo
导入 numpy，数学，系统

strVS = """
属性 vec3 aVert;
统一 mat4 uMVMatrix;
统一 mat4 uPMatrix；
统一的 vec4 uColor;
不同的 vec4 vCol；

无效的主要（）{
  // 选项 #1 - 失败
  gl_Position = uPMatrix * uMVMatrix * vec4(aVert, 1.0);
  // 选项 #2 - 有效
  gl_Position = vec4(aVert, 1.0);
  // 设置颜色
  vCol = vec4(uColor.rgb, 1.0);
}
"""
strFS = """
不同的 vec4 vCol；

无效的主要（）{
  // 使用顶点颜色
  gl_FragColor = vCol;
}

"""

# 3D场景
课堂场景：

    # 初始化
    def __init__(self):

        # 创建着色器
        self.program = compileProgram(compileShader(strVS,
                                                    GL_VERTEX_SHADER),
                                      编译着色器（strFS，
                                                    GL_FRAGMENT_SHADER))
        glUseProgram(self.program)

        self.pMatrixUniform = glGetUniformLocation(self.program, 'uPMatrix')
    self.mvMatrixUniform = glGetUniformLocation(self.program,
                                                  “uMV矩阵”）
        self.colorU = glGetUniformLocation(self.program, "uColor")

    ＃ 属性
    self.vertIndex = glGetAttribLocation(self.program, "aVert")

        ＃ 颜色
        self.col0 = [1.0, 1.0, 0.0, 1.0]

        # 定义四边形顶点
    s = 0.2
    四维 = [
            -s, s, 0.0,
             -s, -s, 0.0,
             s, s, 0.0,
             s, s, 0.0,
             -s, -s, 0.0,
             s, -s, 0.0
             ]

        # 个顶点
        self.vertexBuffer = glGenBuffers(1)
        glBindBuffer(GL_ARRAY_BUFFER, self.vertexBuffer)
        vertexData = numpy.array(quadV, numpy.float32)
        glBufferData(GL_ARRAY_BUFFER, 4*len(vertexData), vertexData,
                     GL_STATIC_DRAW)

    ＃ 使成为
    def 渲染（自我，pMatrix，mvMatrix）：        
        # 使用着色器
        glUseProgram(self.program)

        # 设置项目矩阵
        glUniformMatrix4fv(self.pMatrixUniform, 1, GL_FALSE, pMatrix)

        # 设置模型视图矩阵
        glUniformMatrix4fv(self.mvMatrixUniform, 1, GL_FALSE, mvMatrix)

        # 设置颜色
        glUniform4fv(self.colorU, 1, self.col0)

        #启用数组
        glEnableVertexAttribArray(self.vertIndex)

        # 设置缓冲区
        glBindBuffer(GL_ARRAY_BUFFER, self.vertexBuffer)
        glVertexAttribPointer(self.vertIndex, 3, GL_FLOAT, GL_FALSE, 0, 无)

        ＃ 画
        glDrawArrays(GL_TRIANGLES, 0, 6)

        # 禁用数组
        glDisableVertexAttribArray(self.vertIndex)            

类渲染器：
    def __init__(self):
        经过

    def 重塑（自我，宽度，高度）：
        self.width = 宽度
        self.height = 身高
        self.aspect = 宽度/浮动（高度）
        glViewport(0, 0, self.width, self.height)
        glEnable(GL_DEPTH_TEST)
        glDisable(GL_CULL_FACE)
        glClearColor(0.8, 0.8, 0.8,1.0)
        过剩后重新显示（）

    def keyPressed(self, *args):
        sys.exit()

    def 绘制（自我）：
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)
        # 构建投影矩阵
        fov = math.radians(45.0)
        f = 1.0/math.tan(fov/2.0)
        zN, zF = (0.1, 100.0)
        a = self.aspect
        pMatrix = numpy.array([f/a, 0.0, 0.0, 0.0,
                               0.0, f, 0.0, 0.0,
                               0.0, 0.0, (zF+zN)/(zN-zF), -1.0,
                               0.0, 0.0, 2.0*zF*zN/(zN-zF), 0.0], numpy.float32)

        # 模型视图矩阵
        mvMatrix = numpy.array([1.0, 0.0, 0.0, 0.0,
                                0.0, 1.0, 0.0, 0.0,
                                0.0, 0.0, 1.0, 0.0,
                                0.5, 0.0, -5.0, 1.0], numpy.float32)

        ＃ 使成为
        self.scene.render(pMatrix, mvMatrix)
        # 交换缓冲区
        glutSwapBuffers()

    定义运行（自我）：
        glutInitDisplayMode(GLUT_RGBA)
        glutInitWindowSize(400, 400)
        self.window = glutCreateWindow("最小")
        glutReshapeFunc(self.reshape)
        glutDisplayFunc(self.draw)
        glutKeyboardFunc(self.keyPressed) # 检查击键
        self.scene = 场景（）
        过剩主循环（）

glutInit(sys.argv)
prog = 渲染器（）
程序运行（）

```

当我`option #2`在没有任何矩阵的着色器中使用时，我得到以下输出：

![不使用 mv/p 转换时的输出](../Images/88574996b7e3389eabe7f1e11d56234d.png)

我究竟做错了什么？

# android - 捕获布局截图后，ImageView 是透明的

> ID：12758571
> 
> 赞同：2
> 
> 时间：2012-10-06T09:36:22.053
> 
> 标签：android, android-layout

我在 Android 屏幕捕获中遇到问题。捕获的图像是透明的，而原始图像是不透明的实体 JPEG 文件！我在许多具有不同操作系统版本的设备上进行了测试，所有手机上都存在问题。这是我的屏幕截图代码，也是最终输出

代码：

```
final Bitmap rawBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
final Canvas canvas = new Canvas(rawBitmap);
rendererView.layout(0, 0, width, height);
rendererView.draw(canvas);
rawBitmap.compress(CompressFormat.PNG, 100, new FileOutputStream("/sdcard/test" + System.currentTimeMillis() + ".png")); 
```

结果：

![在此处输入图像描述](../Images/85c9e3e884994c99dcb7b339e0cfd9ba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:40:02.623

问题解决了。将图像源加载到 ImageView 时，我对 BitmapFactory Options 使用了错误的设置。

代码（之前和之后）：

```
 BitmapFactory.Options options = new BitmapFactory.Options();
    options.inDither = false;
    options.inPurgeable = true;
    options.inInputShareable = true;
    //options.inPreferredConfig = Config.ARGB_4444; //WRONG
    options.inPreferredConfig = Config.ARGB_8888; //CORRECT
    bitmap = BitmapFactory.decodeFile(result.filePath(), options); 
```

谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:57:47.223

我会在 createBitmap() 中尝试 Bitmap.Config.RGB_565

# cocoa - 搜索将 NSArrayController 选择重置为无

> ID：12758573
> 
> 赞同：2
> 
> 时间：2012-10-06T09:36:37.527
> 
> 标签：cocoa, nstableview, cocoa-bindings, nsarraycontroller, nssearchfield

我已经`NSTableView`绑定到`NSArrayController`via`content`和`selection indexes`。到目前为止一切都很好 - 显示的内容等。

![在此处输入图像描述](../Images/1340cf77954f3f830ef0481d9af9b847.png)

现在 an`NSSearchField`通过`filterPredicate`和要搜索的数组内容实例的属性绑定到数组控制器。
搜索/过滤表格视图效果很好；表视图仅显示匹配条目。

**但是**`NSTableView`，如果现有选择不在搜索结果中，则搜索会重置选择。更糟糕的是，不仅在搜索期间，而且在结束搜索后，表格视图上没有选择。

`NSArrayController`设置为*避免空*选择。

然而，调试阵列控制器`selection indexes`表明**搜索会将它们重置为空集。**完全不知道该怎么做。。

关于如何在这种情况下正确配置绑定以**真正**防止空选择的任何提示非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:30:51.260

不幸的是，阵列控制器不会在排列对象发生变化时跟踪和恢复选择。您必须自己在代码中执行此操作。您可以通过使用 KVO 观察阵列控制器上的选择来跟踪当前选择。您还可以观察控制器的排列对象，以了解它何时因过滤而发生变化。在每次更改时，只需将当前选择设置回跟踪值（假设它仍在排列的对象中）或将选择设置为新值。

# javascript - 如何从全局范围调用 AngularJS JavaScript 指令方法

> ID：12758579
> 
> 赞同：0
> 
> 时间：2012-10-06T09:37:11.320
> 
> 标签：javascript, angularjs

我有一个指令，类似于 AngularJS 的示例之一，如下所示。如何从全局范围调用切换方法？我希望能够从一些遗留代码中切换 zippy。

```
myApp.directive('zippy', 
function(){
    return {
        restrict: 'E',
        replace: true,
        transclude: true,
        scope: { title:'bind' },
        template:
        '<div class="zippy">' +
        '<div class="title">{{title}}</div>' +
        '<div class="body" ng-transclude></div>' +
        '</div>',
        link: function(scope, element, attrs) {
            var title = angular.element(element.children()[0]),
            opened = true;
            title.bind('click', toggle);
            function toggle() {
                opened = !opened;
                element.removeClass(opened ? 'closed' : 'opened');
                element.addClass(opened ? 'opened' : 'closed');
            }
            toggle();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:27:42.880

当你想通过 legacy 访问你的事件时，你应该使用 angular 的 $apply 方法，如下所示：

```
function set_from_legacy(dom_element) {
    var scope = angular.element(dom_element).scope();
    scope.$apply(function() {
         scope.viewmodel_element.property1 = something;
         scope.viewmodel_element.property2 = somethingelse;
    });
} 
```

然后 Angular 应该启动并更新与视图模型关联的 HTML 中的属性。

例如稍微改变你的模板，使其类名绑定到控制器中的模型 zippy（它当然可以是一个 zippy 的数组）

希望这可以帮助。

# python - Google App Engine：如何将默认值从属性设置为 db.Model 类中的另一个属性？

> ID：12758581
> 
> 赞同：0
> 
> 时间：2012-10-06T09:37:53.200
> 
> 标签：python, django, google-app-engine

我的应用程序有 db 类，

```
class invoice(db.Model):
   location_code = db.StringProperty()
   invoice_no = db.IntegerProperty()
   product_tax_rate = db.FloatProperty()
   basic_tax_rate = db.FloatProperty()
   addl_tax_rate = db.FloatProperty()
   .
   .
   . 
```

在此，如果**addl_tax_rate**的值为**0**，我想将**product_tax_rate**的值设置为属性**basic_tax_rate**的默认值。

 ****如何在此类方法中为此逻辑添加通用过程？

如果您仍然没有得到这个要求，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:50:49.137

您可以使用 NDB 和[ComputedProperty](https://developers.google.com/appengine/docs/python/ndb/properties?hl=ca#computed)来执行以下操作：

```
class invoice(ndb.Model):
   product_tax_rate = ndb.ComputedProperty(lambda self: self.basic_tax_rate if self.addl_tax_rate == 0 else ???)
   basic_tax_rate = ndb.FloatProperty()
   addl_tax_rate = ndb.FloatProperty() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:47:10.357

您可以使用模型挂钩：[https ://developers.google.com/appengine/docs/python/ndb/entities#hooks](https://developers.google.com/appengine/docs/python/ndb/entities#hooks)

> 通过定义一个钩子，应用程序可以在某种类型的操作之前或之后运行一些代码；例如，模型可能会在每个 get() 之前运行一些函数。

因此，当 addl_tax_rate 为 0 时，您只需要一些逻辑来在模型放入数据存储区时相应地设置值。就像是：

```
def _pre_put_hook(self):
if self.addl_tax_rate == 0:
    self.basic_tax_rate = self.product_tax_rate 
```

该代码未经测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T04:25:35.000

只需在创建实体的新实例的代码中手动执行即可。或覆盖构造函数（但这听起来只会让您了解更多调试奥秘）。****

# java - 类似 Nimbus 的 JavaFX UI 组件外观

> ID：12758584
> 
> 赞同：0
> 
> 时间：2012-10-06T09:38:15.090
> 
> 标签：java, swing, javafx-2, look-and-feel

JavaFX 允许通过 CSS 设置 UI 组件的样式。为了无缝集成到现有的 Swing 应用程序中，最好让 FX 组件看起来像具有 Nimbus 外观和感觉的 Swing 组件。是否有任何现有的方法来解决这个问题？到目前为止，我还没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:46:05.220

一种方法是编写一些 JavaFX CSS 以使 JavaFX 看起来像 nimbus，尽管这将是一些工作，但它肯定是可能的。Nimbus UI 属性在这里发布：

[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html)

将 caspian.css 文件中定义的变量设置为上面链接中的变量，除了渐变、阴影和图像之外，您将获得最大收益。

# jakarta-ee - web.xml 中的错误页面

> ID：12758588
> 
> 赞同：0
> 
> 时间：2012-10-06T09:39:11.640
> 
> 标签：jakarta-ee, exception-handling

我正在准备 SCWCD 考试。我对这个问题有疑问。

Web 应用程序部署描述符中的哪两个是有效的？（选择两个。）

```
 A. <error-page>
        <exception-type>*</exception-type>
        <location>/error.html</location>
       </error-page>
    B. <error-page>
        <exception-type>java.lang.Error</exception-type>
         <location>/error.html</location>
      </error-page>
    C. <error-page>
        <exception-type>java.lang.Throwable</exception-type> 
        <location>/error.html</location></error-page>
    D. <error-page>
            <exception-type>java.io.IOException</exception-type>
            <location>/error.html</location>
        </error-page>
    E. <error-page>
            <exception-type>NullPointerException</exception-type>
             <location>/error.html</location>
        </error-page> 
```

正确答案是 CD。但是为什么 java.lang.Error 不能有效，因为 Error 是 Throwable 的子类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:12:36.280

From the JavaDoc of `Error` and `Exception` classes:

> An Error is a subclass of Throwable that indicates serious problems that a reasonable application should not try to catch. Most such errors are abnormal conditions [...]
> 
> The class Exception and its subclasses are a form of Throwable that indicates conditions that a reasonable application might want to catch [...]

It has nothing to do with their types, it is more like a design choice.

# python - 如何在 Python 中使元组的子类可散列？

> ID：12758590
> 
> 赞同：2
> 
> 时间：2012-10-06T09:39:28.800
> 
> 标签：python

我有一个类，它是`tuple`. 我想将该类的实例用作 a 的元素`set`，但我得到它是不可散列类型的错误。我想这是因为我已经覆盖了`__eq__`and`__ne__`方法。我应该怎么做才能恢复我的类型的哈希性？我正在使用 Python 3.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:47:03.297

比较相等的对象应该具有[相同的哈希值](http://docs.python.org/reference/datamodel.html#object.__hash__)

因此，将哈希基于您用来比较相等性的属性是一个好主意

阿德里安的例子会更好这样

```
class test(tuple):
    def __eq__(self,comp):
        return self[0] == comp[0]
    def __ne__(self,comp):
        return self[0] != comp[0]
    def __hash__(self):
        return hash((self[0],)) 
```

简单地利用包含我们关心的东西的元组的哈希值来实现平等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T09:48:03.617

您需要将您的类型设为可散列，这意味着`__hash__()`在您的类中实现从元组派生的成员函数。

例如：

```
class test(tuple):
    def __eq__(self,comp):
        return self[0] == comp[0]
    def __ne__(self,comp):
        return self[0] != comp[0]
    def __hash__(self):
        return hash(self[0]) 
```

这就是现在的样子：

```
>>> set([test([1,]),test([2,]),test([3,])])
{(1,), (2,), (3,)}
>>> hash(test([1,]))
1 
```

*注意：您绝对应该阅读该[`__hash__()`](http://docs.python.org/reference/datamodel.html#object.__hash__)函数的文档，以了解比较运算符和哈希计算之间的关系。*

# python - Macintosh 中的 Python 文本转语音

> ID：12758591
> 
> 赞同：11
> 
> 时间：2012-10-06T09:39:40.473
> 
> 标签：python, macos, text-to-speech

Python 中是否有任何库可以使用 Mac Lion 的内置文本到语音引擎执行或允许文本到语音转换？我做了谷歌，但大多数都是基于 Windows 的。我试过pyttx。我试着跑

```
import pyttsx
engine = pyttsx.init()
engine.say('Sally sells seashells by the seashore.')
engine.say('The quick brown fox jumped over the lazy dog.')
engine.runAndWait() 
```

但我得到这些错误

```
File "/Users/manabchetia/Documents/Codes/Speech.py", line 2, in <module>
    engine = pyttsx.init()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pyttsx-1.0.egg/pyttsx/__init__.py", line 39, in init
    eng = Engine(driverName, debug)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pyttsx-1.0.egg/pyttsx/engine.py", line 45, in __init__
    self.proxy = driver.DriverProxy(weakref.proxy(self), driverName, debug)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pyttsx-1.0.egg/pyttsx/driver.py", line 64, in __init__
    self._module = __import__(name, globals(), locals(), [driverName])
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pyttsx-1.0.egg/pyttsx/drivers/nsss.py", line 18, in <module>
ImportError: No module named Foundation 
```

如何解决这些错误？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-06T16:12:14.357

这样做不是更简单吗？

```
from os import system
system('say Hello world!') 
```

您可以输入`man say`以查看您可以使用该`say`命令执行的其他操作。

然而，如果你想要一些更高级的特性，导入`AppKit`也是可能的，尽管需要一些 Cocoa/Objective C 知识。

```
from AppKit import NSSpeechSynthesizer
speechSynthesizer = NSSpeechSynthesizer.alloc().initWithVoice_("com.apple.speech.synthesis.voice.Bruce")
speechSynthesizer.startSpeakingString_('Hi! Nice to meet you!') 
```

如果您想了解更多可以使用 NSSpeechSynthesizer 执行的操作，请查看 Apple 的文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSpeechSynthesizer_Class/Reference/Reference .html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSpeechSynthesizer_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-20T06:33:50.727

如果您将 Mac OS X 作为您的平台 - PyObjC 和 NSSpeechSynthesizer 是您最好的选择。

这是一个简单的例子

```
#!/usr/bin/env python

from  AppKit import NSSpeechSynthesizer
import time
import sys

if len(sys.argv) < 2:
   text = raw_input('type text to speak> ')
else:
   text = sys.argv[1]

nssp = NSSpeechSynthesizer

ve = nssp.alloc().init()

for voice in nssp.availableVoices():
   ve.setVoice_(voice)
   print voice
   ve.startSpeakingString_(text)

   while not ve.isSpeaking():
      time.sleep(0.1)

   while ve.isSpeaking():
      time.sleep(0.1) 
```

请注意，AppKit 模块是 PyObjC 桥的一部分，应该已经安装在您的 Mac 上。如果您使用操作系统提供的 python (/usr/bin/python)，则无需安装它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-07T03:00:27.600

这可能有效：

```
import subprocess
subprocess.call(["say","Hello World! (MESSAGE)"]) 
```

# android - 按下按钮时如何启动相机？

> ID：12758596
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:40:56.583
> 
> 标签：android, camera

我正在开发一个 android 应用程序。在这我必须实现相机功能。当我单击按钮时，它应该启动，当我捕获图像时，它应该返回带有该图像的主应用程序。我怎样才能实现这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:43:55.823

在下面写代码`onClick()`

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
File dir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
File output = new File(dir,captureimage.png");

cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(output));
String path = output.getAbsolutePath();  <---------here you will get file path also
startActivityForResult(cameraIntent, TAKE_PHOTO); 
```

# performance - 你如何测试 Magento 的性能

> ID：12758604
> 
> 赞同：3
> 
> 时间：2012-10-06T09:41:45.703
> 
> 标签：performance, magento

您使用哪些工具来测试 Magento 托管性能？我需要一个工具来检查网站可以同时拥有多少客户，并带有报告。如果工具可以向我显示页面加载时间（没有图像和有图像）并提供一些提高性能的建议，那将是很好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:04:43.770

[http://www.magespeedtest.com/](http://www.magespeedtest.com/)在 magento 开发者社区非常流行。我不时在推特上看到测试结果。您可以阅读它的创建者、著名的 magento 社区开发人员 Ashley Schroder 的文章：[http ://www.aschroder.com/2011/03/introducing-magespeedtest-com-v2-performance-test-magento-from-4-different -国家/](http://www.aschroder.com/2011/03/introducing-magespeedtest-com-v2-performance-test-magento-from-4-different-countries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:13:57.573

查看以下链接以获取 magento 调试器工具并检查您的站点加载时间实例化

[http://www.magentocommerce.com/magento-connect/magneto-debug-8676.html](http://www.magentocommerce.com/magento-connect/magneto-debug-8676.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T10:41:15.920

我建议您查看 MAgento 提供的关于性能优化的 2 篇论文。

*   优化 Magento 以获得最佳性能：配置企业版以提高处理能力和缩短响应时间
*   使用 Magento 企业版最大限度地提高性能和可扩展性

这是链接： http: [//www.magentocommerce.com/whitepaper](http://www.magentocommerce.com/whitepaper)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T15:21:18.183

使用 magento 分析器，您甚至可以分析一小块代码。从后端启用分析器并添加以下代码来分析代码块：

```
Varien_Profiler::start('NameOfFragmentToProfile');
///... here some code we like to get statistics for
Varien_Profiler::stop('NameOfFragmentToProfile'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T16:39:05.917

我倾向于使用 tools.pingdom.com 来测试站点从远程位置的加载时间，但它不能用来测试用户负载。您可以使用[seige](http://www.joedog.org/siege-home/)测试网络服务器可以处理的用户数量，但这些无法复制用户体验。如果您只想测试文本内容，则可以使用网络浏览器 lynx。这将只返回您的文本版本，但不能用于用户加载，除非您编写一些将使用 lynx 和返回时间然后构建平均值的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-03T13:16:04.613

我们有一个性能分析器工具，它是免费的，不需要您注册。它分析您输入的页面的性能，并为您提供如何改进它的建议。

[http://store.husseycoding.co.uk/profiler](http://store.husseycoding.co.uk/profiler)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-06T07:25:46.787

试试 gtmetrix

[https://gtmetrix.com/](https://gtmetrix.com/)

GTmetrix 让您深入了解您的网站加载情况，并就如何优化它提供可行的建议

# github - github上关键的集成不起作用

> ID：12758609
> 
> 赞同：1
> 
> 时间：2012-10-06T09:42:19.200
> 
> 标签：github

我已在 github 服务挂钩上更新了我的关键令牌。但提交未在我的关键跟踪器页面上检索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:28:50.633

确认您在 Github 中输入 API 令牌的表单上单击“活动”复选框。

这几乎每次都让我挂断电话。我会发布一个截图，但需要更多的声誉。

# php - 使用 curl 对 aspx 页面进行屏幕抓取

> ID：12758610
> 
> 赞同：-2
> 
> 时间：2012-10-06T09:42:33.917
> 
> 标签：php, asp.net, curl, screen-scraping

我正在使用此代码，但它不起作用。请帮忙

```
$url = "http://www.riogrande.com/Category/Findings-and-Finished-Jewelry/132/Bails-and-Enhancers/472";
$file=file_get_contents($url);
preg_match("#.*?#mis", $file, $arr_viewstate);
$viewstate = urlencode($arr_viewstate[1]);
$eventvalidation = urlencode($arr_viewstate[2]);
$options = array(
    CURLOPT_RETURNTRANSFER => true, // return web page
    CURLOPT_HEADER => false, // don't return headers
    CURLOPT_ENCODING => "", // handle all encodings
    CURLOPT_USERAGENT => "Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.8.1.7) Gecko/20070914 Firefox/2.0.0.7'", // who am i
    CURLOPT_AUTOREFERER => true, // set referer on redirect
    CURLOPT_CONNECTTIMEOUT => 120, // timeout on connect
    CURLOPT_TIMEOUT => 1120, // timeout on response
    CURLOPT_MAXREDIRS => 10, // stop after 10 redirects
    CURLOPT_POST => true,
    CURLOPT_VERBOSE => true,
    CURLOPT_POSTFIELDS => '__EVENTTARGET='.urlencode('ctl00$ContentPlaceHolderBody$SearchPageNavigationTop$rptPager$ctl01').'&__EVENTARGUMENT='.urlencode('').'&__VIEWSTATE='.$viewstate.'&__EVENTVALIDATION='.$eventvalidation.'&__LASTFOCUS='.urlencode('')
);

$ch = curl_init($url);
curl_setopt_array($ch,$options); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:05:26.480

事实是我不明白你想要达到什么，但我绝对知道那不是获得`__VIEWSTATE`和`__EVENTVALIDATION`

它应该是这样的

```
$url = "http://www.riogrande.com/Category/Findings-and-Finished-Jewelry/132/Bails-and-Enhancers/472";
$html = file_get_contents($url);

preg_match('~<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="(.*?)" />~',$html,$viewstate);
preg_match('~<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="(.*?)" />~',$html,$eventvalidation);

$viewstate = $viewstate[1];
$eventvalidation = $eventvalidation[1] ;

var_dump($viewstate,$eventvalidation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:52:52.490

此代码似乎正在工作...将该代码粘贴到空白 php 文件中，我得到目标 URL 的内容。但是，图像已损坏，样式表未提取，javascript 不起作用。

像这样抓取整个网页的问题，尤其是使用相对 URL、图像、CSS、JavaScript 等的网页将无法按预期工作。

如果您坚持抓取页面并吐出结果，请尝试将最后几行代码替换为如下所示：

```
$result = curl_exec($ch); 
curl_close($ch);

$result = str_replace("../../../../","http://www.riogrande.com/",$result);
echo $result; 
```

我只是碰巧注意到相对 URL 以开头，`../../../../`因此使它们成为绝对 URL 可能有助于正确加载图像。

# typo3 - 灵活的内容元素：另一个部分元素内的部分元素

> ID：12758614
> 
> 赞同：0
> 
> 时间：2012-10-06T09:43:16.697
> 
> 标签：typo3, typoscript, templavoila

我正在为我的文章内容创建 FCE。

我创建了部分，这样我就可以在一个页面中多次创建每个文章子元素，并且除了图像滑块之外，所有东西都可以正常工作。

这是我的映射： ![在此处输入图像描述](../Images/a0f9d714e6882929eee2aee31b6103a9.png)

其他元素和图像滑块之间的区别在于它内部包含一个部分元素。

当我将内容添加并保存到图像滑块时，它就会消失。

渲染输出显示 html 元素，直到“内容集”小节。

我怎样才能让滑块工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:16:29.670

你有错误的映射集：

```
Image slider -> div (outer)
Content set -> div (inner)
Container -> li (outer)
Image -> img (outer) 
```

# linq-to-entities - Linq 到实体 TPC 和急切加载子类关系

> ID：12758615
> 
> 赞同：1
> 
> 时间：2012-10-06T09:43:28.767
> 
> 标签：linq-to-entities, table-per-class

谢谢你的想法

我正在使用实体框架 5.0，模型优先。

使用每个类的表（或每个具体类型的表）模式映射表。

表 A 1..许多（抽象）表 B

表 B 有 2 个子类

B1 & B2

B2 有第三个表的外键，比如说表 C（许多 B2 ... 1 C），但这不是父类 B 的属性。

急切加载是应用程序的默认设置，我想在查询表 B2 时包含表（或集合）C - 相当于（对实体的伪 linq）：

```
from A in _db.A
.Include(A=>A.B.OfType<B2>())
.Include(A=>A.B.OfType<B2>().Include(C))
select A 
```

感谢您对如何强制加载此表的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:54:56.557

问题的核心`Include(A=>A.B.OfType<B2>())`是不支持。

据我了解 ADO.Net 团队似乎他们不想支持部分加载的子集合。（而且我倾向于同意他们的观点。）在 Linq-to-sql 中有[DataLoadOptions](http://msdn.microsoft.com/en-us/library/system.data.linq.dataloadoptions.aspx)，但没有与它们等效的 EF。这可以解释为什么也不支持`Include`with ，因为它会告诉 EF 部分加载s 的集合。`OfType``B`

此外，扩展方法[`Include`](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)只是`IQueryable`对象本身的 Include 方法（如果存在）的包装。采取[`ObjectQuery.Include`](http://msdn.microsoft.com/en-us/library/bb738708.aspx)：一个非常简单的方法，只有一个字符串作为参数（相同的`DbQuery.Include`），其中包含要包含的导航属性的路径（`_db.A.Include("B")`）。换句话说：您只能使用可以解析为 MemberExpression 的字符串。并且`B.OfType<>()`是一种方法。

长篇大论来解释为什么你不能包括`C`：通往的路径`C`无效。

你*可以*做

```
_db.B.OfType<B2>().Include(b => b.A).Include(b => b.C) 
```

但这可能不会给你你想要的结果。

# inno-setup - 安装程序的两个实例（使用 Inno 创建）显示在任务管理器中

> ID：12758616
> 
> 赞同：2
> 
> 时间：2012-10-06T09:43:43.073
> 
> 标签：inno-setup

我使用 Inno 创建了一个安装程序。我需要仅在管理员模式下启动安装。我已经在 Inno 中设置了选项（[Setup]：PrivilegesRequired=admin）。但这并不能完全帮助我。在 Windows 7 中，UAC 已打开。当用户单击安装程序时，会出现 UAC 窗口要求授权。如果用户选择“是”，则会看到安装程序的两个实例在任务管理器中运行。但是如果用户右键单击安装程序并选择“以管理员身份运行”，则会出现 UAC 窗口，但这次在任务管理器中只看到一个安装程序实例。我已经编码为一次只运行一个安装程序实例。所以在第一种情况下，安装失败。用户必须始终选择“以管理员身份运行”才能安装。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:54:14.240

您在任务管理器中看到的设置应用程序的第二个进程是一个生成进程，用于在设置中运行具有相同高度的另一个进程。

我没有在 InnoSetup 源代码中更深入地检查过这一点，但我认为没有办法阻止它的创建。从用户的角度来看，该生成过程是隐藏的，这不是您应该害怕的事情，只是不要试图手动杀死它，让它自己生活！

无论如何，您不需要在脚本中设置[`PrivilegesRequired`](http://jrsoftware.org/ishelp/topic_setup_privilegesrequired.htm)指令`admin`。这是该指令的默认值，因此您可以删除该行。

# mysql - joomla 数据库选择和插入查询

> ID：12758621
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:44:43.697
> 
> 标签：mysql, joomla

我试图在用户注册后向 joomla (2.5.7) 数据库插入另一个信息。用户选择他的用户组，我希望插入仅在用户位于特定组中时发生。因此，我尝试使用此代码从数据库中获取组数据，以便首先在插入查询中使用。现在它只是一个试验场，稍后这个检索到的值将用于 if 语句。

这是代码：

```
function onUserAfterSave($user, $isnew, $success, $msg)
    {
    if ($isnew && $success) {
  $db = &JFactory::getDBO();
  $query = "SELECT #__k2_users.group FROM #__k2_users WHERE userID = ".$user['id'];
  $db->setQuery($query);
  $group = $db->loadResult();

  $db->setQuery( 'INSERT INTO #__user_profiles (ordering) VALUES ('.$group.')' );
  $db->query();
   if (!$db->query()) 
   {
    throw new Exception($db->getErrorMsg());
   }  
  }
    return $this->onAfterStoreUser($user, $isnew, $success, $msg);
} 
```

这是我在注册失败时遇到的错误：

```
Column count doesn't match value count at row 1 SQL=INSERT INTO std13_user_profiles (ordering) VALUES () 
```

如果我没看错，这意味着 select 语句没有返回任何东西，但为什么？感谢您的帮助。

更新：

```
 if ($isnew && $success) {
  $db = &JFactory::getDBO();
  $userId   = JArrayHelper::getValue($user, 'id', 0, 'int');
  $query = "SELECT #__k2_users.group FROM #__k2_users WHERE userID = ".$userId;
  $db->setQuery($query);
  $group = $db->loadResult();

    $query2 = "INSERT INTO #__user_profiles (ordering) VALUES ('".$group."')";
    $db->setQuery($query2);
    $db->query();
   if (!$db->query()) 
   {
    throw new Exception($db->getErrorMsg());
   }  
  } 
```

使用此代码，我没有收到任何错误，并且用户已注册并插入了值。但是 $group 总是 0 并且基于 k2_users 表中的值只有 1 或 3，我猜它什么都不返回。我认为这可能是因为注册用户尚未存储在数据库中，并且还没有他的 ID 来查找组？

更新2：

```
if ($isnew && $success) {

    $count = JRequest::getVar('gender');
    if($count == 3) {

    $db = &JFactory::getDBO();
    $alias = $user['name'];
    $table = array(
    ' '=>'-', 'Š'=>'S', 'š'=>'s', 'Ð'=>'Dj', 'Ž'=>'Z', 'ž'=>'z', 'C'=>'C', 'c'=>'c', 'C'=>'C', 'c'=>'c',
    'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A', 'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E',
    'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I', 'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O',
    'Õ'=>'O', 'Ö'=>'O', 'ě'=>'e', 'Ù'=>'U', 'Ú'=>'U', 'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss',
    'à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a', 'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e',
    'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i', 'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o',
    'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u', 'ú'=>'u', 'û'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b',
    'ÿ'=>'y', 'R'=>'R', 'r'=>'r', " "=>'-', '"'=>'-'
);
    $string = strtr($alias, $table);
    $alias_low = strtolower($string);
    $query = "INSERT INTO #__menu (menutype, title, alias,  path, link, type, published, level, component_id, access) VALUES ('stavebnici','".$user['name']."','".$alias_low."','".$alias_low."',
    'index.php?option=com_k2&view=itemlist&layout=user&id=".$user['id']."&task=user','component',1,1,10012,1)";
    $db->setQuery($query);
    $db->query();
   if (!$db->query()) 
   {
    throw new Exception($db->getErrorMsg());
   }
   }  
  } 
```

好的！我让它工作了，所以现在我可以在每次创建用户时插入新菜单，但是没有创建激活链接并且注册说它失败了。这是错误：

```
Duplicate entry '0-1-vojtech-plesner-' for key 'idx_client_id_parent_id_alias_language' SQL=INSERT INTO std13_menu (menutype, title, alias, path, link, type, published, level, component_id, access) VALUES ('stavebnici','Vojtěch Plešner','vojtech-plesner','vojtech-plesner', 'index.php?option=com_k2&view=itemlist&layout=user&id=2789&task=user','component',1,1,10012,1) 
```

client_id、parent_id 和 language 的值为 1,1 和 * abd，它们在所有行中，为什么说它是重复的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:00:48.170

您需要将该查询更新为 2.5 样式。

[http://www.theartofjoomla.com/home/9-developer/135-database-upgrades-in-joomla-16.html](http://www.theartofjoomla.com/home/9-developer/135-database-upgrades-in-joomla-16.html)

是一篇好文章。

您肯定似乎缺少 $query = $db->getQuery(true);

更不用说您正在使用 & 作为对象。这种用法会产生严格的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:00:03.610

您可以通过一个查询来完成：

```
$query = "
    INSERT INTO #__user_profiles (ordering)
    SELECT #__k2_users.group 
    FROM #__k2_users 
    WHERE userID = " . user['id']
    "; 
```

但是没有`#__user_profiles`像用户ID这样的其他列吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T19:59:36.043

你也可以用一个查询来做到这一点：

```
$query = "
    INSERT INTO #__user_profiles (ordering)
    SELECT "YOURJOOMLADBPREFIX"_k2_users.group 
    FROM "YOURJOOMLADBPREFIX"_k2_users 
    WHERE userID = " . user['id']
    "; 
```

# oracle - Oracle 数据库性能

> ID：12758623
> 
> 赞同：0
> 
> 时间：2012-10-06T09:45:17.903
> 
> 标签：oracle, database-performance

> **可能重复：**
> [数据库性能调整存在哪些资源？](https://stackoverflow.com/questions/761204/what-resources-exist-for-database-performance-tuning)

有人可以就导致 oracle 性能缓慢的原因提出诊断步骤吗？

我的应用程序使用 Oracle DB，而且大部分时间都很酷，我有时会收到电子邮件说应用程序非常慢，但是当我登录并检查时一切都会好起来的。

我想知道有没有办法检查这个性能问题背后的历史记录（比如一些日志文件）。

如果当前正在发生某些事情，那么我知道要检查锁 (V$locks) 等。但是如果我必须检查昨天下午 2 点到 3:00 之间发生的事情，同时对性能进行故障排除，我应该看什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:17:44.687

如果你有许可证，你可以很容易地浏览 ASH。如果您没有许可证，或者没有运行 10g 之前的 Oracle 企业版，您可以使用 ASH 查看器离线收集和查看数据。刚刚写了一篇关于它的小博客文章。[ash 标准版 - 或 - 没有额外的许可证](http://ronr.blogspot.nl/2012/10/ash-for-standard-edition-or-without.html) 这很容易。一个挑战是让它在问题发生期间运行。研究结果可以稍后进行。

# android - 如果在 android 中 30 秒内没有从服务器获得响应，如何打开警报对话框？

> ID：12758627
> 
> 赞同：2
> 
> 时间：2012-10-06T09:45:36.687
> 
> 标签：android, web-services

```
public class AllDataAsyn extends AsyncTask<String, Void, Void> {

    @Override
    protected Void doInBackground(String... params) {
        // TODO Auto-generated method stub

        getData(params[0].toString());

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);        

        if (isNetworkConnected() == true) {

            progressDialog.dismiss();           
            adapter = new NewsScreenAdapter(NewsScreenActivity.this);
            list.setAdapter(adapter);

          } else if(isNetworkConnected() == false) {

             // runDialog(seconds);     
                AlertDialog connection = new AlertDialog.Builder(
                        NewsScreenActivity.this)
                        .setTitle("No Network Found")
                        .setMessage(
                                "Internet Connection Reqired To Use this Application")
                        .setPositiveButton("Ok",
                                new DialogInterface.OnClickListener() {

                                    public void onClick(DialogInterface dialog,
                                            int whichButton) {

                                        progressDialog.dismiss();
                                    }
                                }).create();

                connection.show(); 
            }       
        }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();

        progressDialog = new ProgressDialog(NewsScreenActivity.this);
            progressDialog.setMessage("Loding ...");
            progressDialog.setCancelable(false);
            progressDialog.show();

    }

    public boolean isNetworkConnected() {

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = cm.getActiveNetworkInfo();
        if (ni == null) {
            // There are no active networks.

            // Toast.makeText(getBaseContext(),
            // " Internet Connection Reqired To Use this Application",
            // Toast.LENGTH_SHORT).show();
            return false;
        } else
            // Toast.makeText(getBaseContext(), " Network Found",
            // Toast.LENGTH_SHORT).show();
            return true;
    }

} 
```

你好朋友，如果在 30 秒内没有收到服务器的响应，我想打开警报。我怎样才能在 asyncTask 中做到这一点。我已经检查了互联网连接，但我也想检查响应..所以请任何人都可以告诉我这怎么可能..谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T09:49:09.967

试试这个 。

```
HttpGet httpGet = new HttpGet(url);
HttpParams httpParameters = new BasicHttpParams();
// Set the timeout in milliseconds until a connection is established.
// The default value is zero, that means the timeout is not used. 
int timeoutConnection = 3000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
// Set the default socket timeout (SO_TIMEOUT) 
// in milliseconds which is the timeout for waiting for data.
int timeoutSocket = 5000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
HttpResponse response = httpClient.execute(httpGet);

If you want to set the Parameters of any existing HTTPClient (e.g. DefaultHttpClient or AndroidHttpClient) you can use the function setParams().

httpClient.setParams(httpParameters); 
```

您必须捕获 ConnectionTimeout 异常。

```
catch (ConnectTimeoutException e)
{
   e.printStackTrace();
   Log.i("==== Connection Timeout","===");
   // Close the Dialog
   throw e;
} 
```

# javascript - How to refresh / update pageMod contentScript?

> ID：12758629
> 
> 赞同：3
> 
> 时间：2012-10-06T09:45:42.517
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk, content-script

Is it possible to update it using an interval? I have tried:

```
var timers = require("timers");
var pageMod = require("page-mod");
var mystyle = ....;

function func1(){
pageMod.PageMod({
  include: "*.org",
  contentScript: mystyle
});
}
func1();

function func2(){
   mysyle = http://......
}

timers.setInterval(func2,10000); 
```

The problem is that it will start registering pageMod couple of times every interval. Let's say I have inside of mystyle: alert("hello world"); so I'll go to to some page, after 30 seconds it when I'll refresh that single page it will execute 3 times "hello world" inside of alert box. I want it to execute only once and updateing the mystle every 30 seoncds.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:59:22.363

`contentScript`保存page-mod就可以直接改属性

首先创建您的 page-mod 并将对象保存在变量中，如下`mod`所示。然后在您的时间间隔内，您可以更改`contentScript`属性，就像您在`func2`. 一旦你改变了，`contentScript`你将需要 page-mod 以某种方式重新评估页面，我使用了页面重新加载，因为它听起来像你的描述已经发生了。

```
var mod = require("page-mod").PageMod({
  include: ["*.org"],
  contentScript: "alert('the first alert');"
});

function func2(){
  // change the contentScript
  mod.contentScript = "alert('the second alert');";
  // cause the page-mod to re-evaluate
  require("tabs").activeTab.reload();
}

tab = require("tabs").open("http://mozilla.org");
require("timers").setInterval(func2, 5 * 1000); 
```

# java - 如何使用 jdbc 从 java windows 应用程序连接到 mysql UNIX 服务器？

> ID：12758635
> 
> 赞同：0
> 
> 时间：2012-10-06T09:46:39.500
> 
> 标签：java

我正在研究 java windows 应用程序。我正在尝试使用 jdbc 连接到 mysql 服务器（通过 UNIX 套接字的本地主机）。但它显示一条错误消息，因为
`"Access denied for user 'root'@'ipaddress'.`我没有得到什么问题。是从 jdbc 连接到 unix 服务器的问题吗？如果是这样，我该如何解决这个问题。请帮助我解决这个问题。

![在此处输入图像描述](../Images/333f260b9eabc6effd3c46c967bb2121.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:54:50.463

您需要设置 mysql 以允许任何用户进行远程连接。默认语法是：

授予@标识的

例如，在 test.* 上授予所有由 root 标识的 root@ipaddress

将允许“root”使用该密码从该 IP 进行连接，并授予对该数据库中所有表的所有权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T05:36:24.603

试试这个

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password'; 
```

此外，在测试您的 Java 应用程序之前，请尝试使用 mysql 工作台或其他客户端进行连接。只有在它成功运行 java 应用程序之后。

# python - Is -using ReferenceProperty in Google App Engine datastore- reasonable?

> ID：12758636
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:46:53.200
> 
> 标签：python, google-app-engine

```
class Author(db.Model):
    name = db.StringProperty()

class Story(db.Model):
    author = db.ReferenceProperty(Author)

story = db.get(story_key)
author_name = story.author.name

author = db.get(author_key)
stories_by_author = author.story_set.get() 
```

As is known; using ReferenceProperty is good solution for data relationship as exampled above. So; For example, we have a large amout of row in our "Author" and "Story" entities(tables). And after many years we deleted "Author" entity or replaced name propery to another name. Naturally; our app sholud throw error. Can this situation (managing code) reasonable or is performing relationships manually good? Is there any alternative model for this case?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:31:29.100

那是数据存储提供的工具。如果你想要更健壮的东西，你可以构建一个带有析构函数的类，这些析构函数总是检查它们的 ReferenceProperties 并清理它们。

这有点像问指针是否是一件坏事，因为您可能会泄漏内存并留下悬空指针。是的，但在某些语言中，这是可用的基本工具。如果您想要更安全的东西，请围绕它构建一个包装器。或使用其他语言（如 Cloud SQL）。

# canvas - 来自 iPhone iOS 6 的画布缩放图像

> ID：12758637
> 
> 赞同：0
> 
> 时间：2012-10-06T09:46:55.413
> 
> 标签：canvas, mobile-safari, ios6, html5-canvas

我在尝试使用 iOS 6 上现在可用的功能缩放从 iPhone 上传的图像时遇到了奇怪的缩放问题。我只遇到相机胶卷中的图像问题。照片流中的图像或从网络上下载的图像等都可以正常工作。

3GS 和 4S 上的相同问题 - 所以与 RETINA 无关...！？在“新 iPad”上运行良好。

使用 ctx.drawimage(0,0,img.width,img.height,0,0,300,225) 或类似的东西，但图像的宽度确实被拉伸了。

我能得到的唯一方法是 ctx.scale(1,3.5) 这对我来说毫无意义。我已经尝试在画布上设置宽度和高度（attr 和 css），缩放到 devicePixelRatio / backingStoreRatio 以及我可以搜索的任何其他内容：-/

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:49:47.563

拉伸图像的唯一真实方式是，如果您用于从源复制的比率与您用于复制到目标的比率不同。

下面， 和 的值是`img.width`什么`img.height`？

```
ctx.drawimage(resource, 0,0,img.width,img.height,0,0,300,225) 
```

这两个值之间的比率是否与 300 和 225 之间的比率相同？

# python - Python命令行交互库？

> ID：12758638
> 
> 赞同：7
> 
> 时间：2012-10-06T09:47:09.170
> 
> 标签：python

我想开发一个通过控制台/命令行与用户交互的小型 Python 应用程序。有没有什么好的库可以用来获取用户输入并以漂亮的方式显示输出？我尝试搜索，但我发现的大部分内容是命令行参数处理，没有看到关于 shell 中用户交互的任何内容。

它应该是跨平台的（Windows 和 Linux）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T16:33:44.437

一个非常优秀的库是[cmd](http://docs.python.org/py3k/library/cmd.html)，它是 python 标准库的一部分。它是跨平台的 Windows、Linux、Mac。你只需要实现一个类，它就提供了很多很棒的特性：

1.  提供支持的命令列表（它们最终被实现为方法）
2.  可以调用来解释您的命令之一的帮助命令
3.  处理整个输入命令、检查语法和调用您的方法命令循环循环。
4.  用户可以保存他们在交互式会话中运行的命令并将它们作为脚本运行。看看下面的例子。

如果您以[龟壳示例](http://docs.python.org/py3k/library/cmd.html#cmd-example)并将其保存为 turtleshell.py 并将以下龟脚本文件保存为 circles.txt

```
circle 20
circle 50
circle 100
bye 
```

然后您可以使用以下命令运行 turtle 脚本：

```
cat circles.txt | ./turtleshell.py 
```

因此，在文档中显示的简单示例中，开发人员基本上制作了一种简单的迷你语言，可以用作与[海龟模块](http://docs.python.org/py3k/library/turtle.html#module-turtle)的更简单接口，从而更容易向孩子们介绍编程。上面的示例取自 python3 文档，因为它们在其文档中包含了 2.7 文档中没有的详细示例，但 cmd 在 python 2.3 及更高版本中可用且功能齐全。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T09:57:50.460

[`curses`您可以使用library](http://docs.python.org/library/curses.html)控制 Unix 终端。该库本质上允许您构建一个简单的终端 GUI。

如果你需要更多，也可以看看[Urwid](http://excess.org/urwid/)。Urwid 为有眼光的终端 GUI 开发人员提供了更复杂的 GUI 小部件。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T09:56:46.207

[根据文档， Curses](http://docs.python.org/library/curses.html)是 Unix 环境中使用最广泛的。对于 Windows，您可以查看[Windows Console Driver](http://effbot.org/zone/console-index.htm)、[WConio](http://newcenturycomputers.net/projects/wconio.html) -Windows CONsole I/O for Python 或[Wcurses](http://code.google.com/p/wcurses/)。不幸的是，我在跨平台控制台库上找不到太多东西。

如果您的 Windows 用户是 CLI 用户，他们可能拥有支持 ncurse 的[cygwin](http://www.cygwin.com/)，因此如果您问我，curses 仍然是最佳选择。

# iphone - iOS 6 inApp issue

> ID：12758640
> 
> 赞同：0
> 
> 时间：2012-10-06T09:47:23.383
> 
> 标签：iphone, xcode, ipad, in-app-purchase, ios6

Anyone used iOS6 inApp purchase? My inApp was working fine on iOS5 but when i am tying to build my app in iOS6 (XCode 4.5 beta). It is showing below error while inApp purchase.

2012-10-06 15:13:49.653 failed transaction 2012-10-06 15:13:49.654 The error description is:Error Domain=SKErrorDomain Code=0 "Cannot connect to iTunes Store" UserInfo=0x9caec40 {NSLocalizedDescription=Cannot connect to iTunes Store}

I have created another test user account but problem is still same. Also, tried with restarting XCode, Mac machine, simulator, reset simulator. Please help!!

FIX : Delete all inApp ids and create new. It will fix the issue.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:32:08.540

您无法测试应用内。在模拟器上购买。如果您尝试这样做，您将收到确认警报，但不会发生任何事情。

我在 iOS 6 上遇到了类似的问题，我做了以下程序来修复它：

*   从 iPad 上删除了我的应用程序
*   从商店退出
*   再次安装了我的应用程序
*   测试了应用内

它对我来说很好，请确保互联网连接在那里。如果您再次遇到问题，只需从商店注销并再次测试应用内购买。（当我在几次应用内购买后再次收到错误时，我也这样做了）

# java - How To Cast An Inherited Encapsulated Property To Expose Methods Of Subclass - Java

> ID：12758641
> 
> 赞同：1
> 
> 时间：2012-10-06T09:47:36.627
> 
> 标签：java, eclipse, inheritance, casting, decorator

In Java I have an abstract base class, let's say `WrapX`, which contains a property of a type, say `X` (think Decorator DP). This class presents a method to call a specific method on the encapsulated `X`:

```
public abstract class WrapX{

  protected X instance;

  public WrapX(X x){
     this.instance = x;
  }

  public void foo(){
       instance.foo();
  }

}

public class X {

   public void foo(){
       System.out.println("foo");
   }
} 
```

There is then a class called `Y` that extends from `X` and provides an additional method:

```
public class Y extends X {

  public void bar(){
     System.out.println("bar");
  }
} 
```

Then naturally I have created `WrapY` that can be used as a decorated type over the type `Y`:

```
public class WrapY extends WrapX{

  ...

  public void bar(){
    instance.bar();
  }

} 
```

So herein lies the issue. `WrapY` has inherited the `instance` property of type `X` from its parent `WrapX`. As far as Eclipse is concerned, `instance` is of type `X` and so will complain that it contains no method `.bar()`.

Fair enough of course, but how then in this subclass can we implicitly cast the `instance` to an `instance` of `Y` (a valid subclass of the initial type `X`)... WITHOUT the need for explicit cast ascriptions littering the code, or variable shadowing?

If I just had this in the constructor:

```
public WrapY(Y y){
 this.instance = y;
} 
```

Eclipse still complains that `.bar()` is not a method of type `X` because I guess it cannot infer for certain that `WrapY(Y y)` will be used prior to construct the `WrapY` instance:

```
public void bar(){
        instance.bar(); // ERROR
      } 
```

Here is the current approach I have, littered with casts:

```
public WrapY(Y y){
 (Y)instance = y;
}

public void bar(){
  ((Y)instance).bar();
} 
```

I haven't come across this particular type of architectural problem in my experience before, file it under 'Decorator-Based-Inheritance-Type-Casting'(!)... Please enlighten me as to how I can model this in a better way.

Another issue is that, if in future someone extends `WrapY`, the type of instance their class inherits will be the natural (uncasted) type of `X`, when they may reasonably assume it should be of type `Y`.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:12:45.793

您可以使您的 Wrap 类通用，例如：

```
public abstract class Wrap<T extends X>{

    protected T instance;

    public Wrap(T x){
        this.instance = x;
    }

    public void foo(){
       instance.foo();
    }
}

public final class WrapY extends Wrap<Y> {

    public WrapY(Y y) {
        super(y);
    }

    public void bar(){
        instance.bar();
    }
} 
```

那么对于 的实例`WrapY`，`instance`将是一个`Y`。

* * *

更新：如果您也想从 WrapY 继承（并解决最合适的包装类型的最后一个问题），请执行以下操作：

```
public class WrapY<U extends Y> extends Wrap<U> {

    public WrapY(U y) {
        super(y);
    }

    public void bar(){
        instance.bar();
    }
} 
```

# ruby-on-rails - RoutingError in Rails application on dreamhost

> ID：12758642
> 
> 赞同：0
> 
> 时间：2012-10-06T09:47:41.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dreamhost, actioncontroller

I want to test sample rails application on shared Dreamhost account, so i have created sample application with ruby 1.8.7, rails 3.2.8 and mysql database. on localhost it works fine, but after uploading it on Dreamhost its giving error when i clicks on "About your application’s environment" like given below.

here is the detail error from production.log file

> Started GET "/rails/info/properties" for 180.87.200.112 at Sat Oct 06 01:38:01 -0700 2012
> 
> ActionController::RoutingError (No route matches [GET] "/rails/info/properties"):
> 
> Started GET "/assets/rails.png" for 180.87.200.112 at Sat Oct 06 01:37:50 -0700 2012
> 
> ActionController::RoutingError (No route matches [GET] "/assets/rails.png"):

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:03:34.640

请确保在您的生产文件中遵循以下内容。

```
config.assets.compile = true
config.consider_all_requests_local = false
config.action_controller.perform_caching = true
config.serve_static_assets = true 
```

# java - What is the relation between Locale and ResourceBundle

> ID：12758644
> 
> 赞同：0
> 
> 时间：2012-10-06T09:47:52.970
> 
> 标签：java, localization, internationalization

Can someone please explain what is the relation between Locale and ResourceBundle classes provided by the JDK ? Is it the same as the [difference between i18n vs l10n as given in this answer](https://stackoverflow.com/a/506752/1527084) ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:59:41.740

Locale 和 ResourceBundle 的关系是，Locale 用于读取正确的属性文件。基本上，ResourceBundle.Control 类接受一个 Locale 对象，并给定属性文件的基本名称，它会尝试找到最匹配的对象。例如：

```
ResourceBundle rb = ResourceBundle.getbundle("messages", Locale.forLanguageTag("zh-TW"); 
```

如果你这样做，ResourceBundle.Control 将查找messages_zh_TW.properties、messages_zh-Hant-TW.properties、messages_zh-Hant.properties、messages_zh.properties，如果找不到任何特定的，最后回退到messages.properties资源文件。

**编辑**

只是添加最后一件事。如果您省略 Locale 参数，`ResourceBundle.getBundle(String)`则将根据您的默认 Locale 返回属性文件 - 您可以像这样获得该文件：

```
Locale default = Locale.getDefault(Locale.Category.DISPLAY); 
```

尽管过多的输入似乎没有必要（在桌面应用程序的上下文中），但始终传递 Locale 是一个好习惯，因为它使代码更容易理解。

# java - C++ equivalent to Java's `super.func();`?

> ID：12758646
> 
> 赞同：1
> 
> 时间：2012-10-06T09:48:01.830
> 
> 标签：java, c++, virtual-functions

I was pretty long in some Java project, and calling the parent's virtual functions went like this:

```
int func(..) {
    super.func(..);
} 
```

But now as I return to C++, this is the way I thought It'd work (for Constructors this works) like this, but I was mistaken. I even forgot how this is called. `((Component)this)->func();` doesnt work either, so I'm lost.

```
int Label::func() : Component::func() {
} 
```

How is it done correctly?

Thanks in advance!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T09:49:44.230

您应该从超类显式调用函数：

```
int Label::func() 
{
    return Component::func();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T09:59:59.953

我以前见过这个（尽管在 C++ 中人们经常说 Base 而不是 Super）：

```
class Label : Component
{
   typedef Component Super;

   int func()
   {
     Super::func();
   }
}; 
```

# algorithm - Foo and Bar playing a strategical game

> ID：12758652
> 
> 赞同：0
> 
> 时间：2012-10-06T09:48:34.053
> 
> 标签：algorithm

Foo and Bar is playing a **game of strategy**. At the start of the game, there are **N apples**, placed in a row (in straight line). The apples are numbered from 1 to N. Each apple has a particular price value.

The price of ith apple is **pi** for i=1 to N.

In this game,

the players Foo and bar make an alternative move.

In each move, the player does the following: -If there is only one apple left, the player toss the coin and if its head, the player takes the first apple among the apples that are currently present in a row in a straight line , otherwise, the last apple is taken by the player.

The goal here is to calculate the expected total price value, Foo will get if Foo Plays First.

**Note**:

The coin is Unbiased. Probability of head is 0.50 and similar is the probability of tail. Total Price Value=summation of price value of all the apples, Foo will get.

```
Example 1:
N=5
Apple price val: 
5 2 3 1 5 

Answer is : 11.00

Example 2:
N=6
7 8 2 3 7 8

Answer : 21.250

Example 3:
N=3
1 4 9

First           Second      Third          Foo Total Val
Foo gets 1  Bar gets 4  Foo gets 9          10
Foo gets 1  Bar gets 9  Foo gets 4          5
Foo gets 9  Bar gets 1  Foo gets 4          13
Foo gets 9  Bar gets 4  Foo gets 1          10

probability 0.5 • 0.5 = 0.25\. 
Expected value (Foo)= (0.25 *10 )+ (0.25 *5) + (0.25*13)+ (0.25*10) = 9.500 
```

I wrote the following code:

```
#include<iostream>
using namespace std;
double calculate(int start,int end,int num,int current);
int arr[2010];
int main()
{
    int T;
    scanf("%d",&T);
    for(int t=0;t<T;t++)
    {
        int N;
        scanf("%d",&N);
        for(int i=0;i<N;i++)
        {
            scanf("%d",&arr[i]);
        }
        printf("%.3lf\n",calculate(0,N-1,N/2+N%2,0));   
    }

    return 0;
}
double calculate(int start,int end,int num,int current)
{
    if(num==current)
        return 0;
    double  value=0;
    value=.5*arr[start]+.5*arr[end]+.5*calculate(start+1,end,num,current+1)+.5*calculate(start,end-1,num,current+1);
    return value;
} 
```

But the above code is quite slow ,as the constraints are price of apple<=1000 and 1<=N<=2000 and there are 500 test cases.

How to solve it in must efficient way ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:22:48.733

您可以做出的第一个观察是您不需要所有四个参数`calculate`- 其中两个是多余的，即它们包含的信息已经在其他两个参数中可用。（顺便说一句，我不确定性能是唯一的问题——我认为你没有正确模拟游戏，也许你应该在一些小测试用例上尝试一下。）

然后，在您删除了不必要的参数并将它们从`0`to减少到两个整数`N - 1`之后，您应该阅读有关[memoization](http://en.wikipedia.org/wiki/Memoization)的内容- 这是一种避免多次执行相同计算的方法。例如，在您计算出 的答案后`start = 2, end = 7`，不必每次需要该值时都一遍又一遍地进行相同的计算，您可以将其存储在二维数组的第 2 行第 7 列中，并将其标记为找到. 这样，您将只计算每个子区间的答案一次，然后将其用作您已经知道的东西。

这将复杂性降低到`O(N^2)`，这取决于实现和测试机器，可能会或可能不会足够快以通过问题，但这是一个好的开始，并且具有教育价值 - 动态编程和记忆化经常使用，如果你没有，你应该学习它们。

# objective-c - Using isKindOfClass to output a child of an object in an array?

> ID：12758653
> 
> 赞同：0
> 
> 时间：2012-10-06T09:48:37.547
> 
> 标签：objective-c, inheritance

I have a cocos2d game setup which uses basic inheritance setup which is similar to this;

```
> Property (Base class)
> - Office : Property
> - Warehouse : Property
> - Bank : Property 
```

All the properties live in an array `listOfProperties` and I am trying to print out each property in a NSLog, but I am not sure how to do it.

For example,

```
// Create an office
Office *o = [Office alloc] init];
[o setName:@"Some office"];
[city.listOfProperties addObject:o];
[o release];

// Debug output all the properties in the game
// city.listOfProperties in an array of Property objects
for (Property *prop in city.listOfProperties) {

    // I want to print out all the different properties here
     if ([prop isKindOfClass:[Office class]]==YES)
     {
         NSLog(@"Office");
         NSLog(@"office.name = %@", prop.name); // Prop name does not work 
     }
} // next 
```

The problem is that some properties do not share the same attributes. For example, an Office might have "floors" but a Warehouse has "capacity".

What I'm needing is to print out all the different properties, but I am not sure how to change the focus from the pointer `prop` to a pointer for the specific class (ie: Office).

I need them all to live in `listOfProperties` so that I can use it later on in a CCMenu and want to avoid splitting them up into seperate arrays which will be very hard for me to manage.

Is there a way to do this?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:58:56.327

像这样进行类型转换。

```
for (Property *prop in city.listOfProperties) {

 if ([prop isKindOfClass:[Office class]])
 {
     Office* officeObject = (Office*) prop;

     NSLog(@"office.name = %@", officeObject.name);
 }
 if ([prop isKindOfClass:[Warehouse class]])
 {
     Warehouse* WarehouseObject = (Warehouse*) prop;

     NSLog(@"Warehouse.name = %@", WarehouseObject.name);
 }
 if ([prop isKindOfClass:[Bank class]])
 {
     Bank* BankObject = (Bank*) prop;

     NSLog(@"Bank.name = %@", BankObject.name);
 } 
```

}

你可以有任何你想记录的变量。以名称为例。

# java - SQLiteDatabase multi-thread locking pattern

> ID：12758655
> 
> 赞同：10
> 
> 时间：2012-10-06T09:48:51.007
> 
> 标签：java, android, multithreading, sqlite, singleton

I use this class to manage connection to underlying SQLiteDatabase

```
public class BasicDataSource {

    protected DatabaseHandler dbHelper;
    protected volatile SQLiteDatabase readable_database;
    protected volatile SQLiteDatabase writable_database;
    protected Object read_lock = new Object();
    protected Object write_lock = new Object();
    protected Context context;

    protected BasicDataSource(Context ctx) {
        dbHelper = DatabaseHandler.getInstance(ctx);
        getReadableDatabase();
        dbHelper.onCreate(getWritableDatabase());
        this.context = ctx;
    }

    public synchronized void close() {
        dbHelper.close();
    }

    protected void closeInsertHelpers(InsertHelper... helpers) {
        for (InsertHelper ih : helpers) {
            if (ih != null)
                ih.close();
        }
    }

    protected SQLiteDatabase getReadableDatabase() {
        synchronized (read_lock) {
            if (readable_database == null || !readable_database.isOpen()) {
                readable_database = dbHelper.getReadableDatabase();
            }
            return readable_database;
        }
    }

    protected SQLiteDatabase getWritableDatabase() {
        synchronized (write_lock) {
            if (writable_database == null || !writable_database.isOpen()) {
                writable_database = dbHelper.getWritableDatabase();
            }
            return writable_database;
        }
    }

    protected synchronized void open() throws SQLException {
        getReadableDatabase();
        getWritableDatabase();
    }
} 
```

It contains two locks, one for read, second for write. But I'm still occasionally getting this kind of exception:

```
java.lang.RuntimeException: An error occured while executing doInBackground()
        at android.os.AsyncTask$3.done(AsyncTask.java:299)
        at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
        at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
        at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
        at java.lang.Thread.run(Thread.java:856)
Caused by: android.database.sqlite.SQLiteDatabaseLockedException: database is locked (code 5): , while compiling: PRAGMA journal_mode
        at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
        at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
        at android.database.sqlite.SQLiteConnection.executeForString(SQLiteConnection.java:627)
        at android.database.sqlite.SQLiteConnection.setJournalMode(SQLiteConnection.java:313)
        at android.database.sqlite.SQLiteConnection.setWalModeFromConfiguration(SQLiteConnection.java:287)
        at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:215)
        at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
        at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
        at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
        at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
        at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
        at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
        at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
        at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:804)
        at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
        at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
        at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
        at com.mycompany.myapplication.sql.BasicDataSource.getWritableDatabase(BasicDataSource.java:57)
        at com.mycompany.myapplication.sql.datasources.SomeDataSource.fillUpDatabaseMethod(SomeDataSource.java:264)
        at com.mycompany.myapplication.sql.datasources.SomeDataSource.renewCacheMethod(SomeDataSource.java:560)
        at com.mycompany.myapplication.activities.lists.ListsActivity$Worker.doInBackground(ListsActivity.java:315)
        at com.mycompany.myapplication.activities.lists.ListsActivity$Worker.doInBackground(ListsActivity.java:1)
        at android.os.AsyncTask$2.call(AsyncTask.java:287)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        ... 4 more
android.database.sqlite.SQLiteDatabaseLockedException: database is locked (code 5): , while compiling: PRAGMA journal_mode
        at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
        at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
        at android.database.sqlite.SQLiteConnection.executeForString(SQLiteConnection.java:627)
        at android.database.sqlite.SQLiteConnection.setJournalMode(SQLiteConnection.java:313)
        at android.database.sqlite.SQLiteConnection.setWalModeFromConfiguration(SQLiteConnection.java:287)
        at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:215)
        at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
        at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
        at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
        at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
        at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
        at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
        at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
        at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:804)
        at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
        at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
        at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
        at com.mycompany.myapplication.sql.BasicDataSource.getWritableDatabase(BasicDataSource.java:57)
        at com.mycompany.myapplication.sql.datasources.SomeDataSource.fillUpDatabaseMethod(SomeDataSource.java:264)
        at com.mycompany.myapplication.sql.datasources.SomeDataSource.renewCacheMethod(SomeDataSource.java:560)
        at com.mycompany.myapplication.activities.lists.ListsActivity$Worker.doInBackground(ListsActivity.java:315)
        at com.mycompany.myapplication.activities.lists.ListsActivity$Worker.doInBackground(ListsActivity.java:1)
        at android.os.AsyncTask$2.call(AsyncTask.java:287)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
        at java.lang.Thread.run(Thread.java:856) 
```

Which means, the database is somehow locked when trying to aquire lock in getWritableDatabase.

My SQLiteOpenHelper is singleton pattern, and DataSources are only using BasicDataSource as parent class.

What is the improvement I can do to avoid SQLiteDatabaseLockedException in showed code?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-06T09:57:20.627

在 SQLite 中，可以有任意多个读取器，但是任何写入器都会阻止所有其他读取器和写入器。

您必须为读者和作者使用一个锁。

请注意，只要您实际访问数据库，就必须持有锁。

* * *

如果要支持多个阅读器，请使用实现 的锁[`ReadWriteLock`](http://developer.android.com/reference/java/util/concurrent/locks/ReadWriteLock.html)，例如[`ReentrantReadWriteLock`](http://developer.android.com/reference/java/util/concurrent/locks/ReentrantReadWriteLock.html). 像这样的东西：

```
class MyData {
    private final ReentrantReadWriteLock rwl = new ReentrantReadWriteLock();
    private final Lock r = rwl.readLock();
    private final Lock w = rwl.writeLock();

    public Data ReadSomething(int id) {
        r.lock();
        try {
            Cursor c = readableDatabase.query(...);
            return c.getString(0);
        } finally {
            r.unlock();
        }
    }

    public void ChangeSomething(int id, int value) {
        w.lock();
        try {
            writeableDatabase.update(...);
        } finally {
            w.unlock();
        }
    }
} 
```

# android - Background Color of a list item in ListView

> ID：12758656
> 
> 赞同：0
> 
> 时间：2012-10-06T09:48:51.013
> 
> 标签：android

I am creating a audio player in android and showing a list of songs in a list view. I wants to change background color of currently playing song in list view. The song is changed when song is completed and in this case set background color of this song and remove background color from previous selected song in the list.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:58:33.373

使用完整的源代码检查此[自定义 ListView 项的选择颜色](http://android-codes-examples.blogspot.in/2011/03/customized-listview-items-selection.html)如何更改列表视图项的背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:10:27.823

```
package com.finallys.sandy;

import java.util.ArrayList;

import android.app.Activity;
import android.content.res.ColorStateList;
import android.graphics.Color;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity {

    ArrayList<String> arr = new ArrayList<String>();

    public HelloBase mAdapter;

    LayoutInflater li;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ListView mListView = new ListView(this);
        li = getLayoutInflater();

        for (int i = 0; i < 100; i++) {
            arr.add("this is my song" + i);
        }
        mAdapter = new HelloBase();
        mListView.setAdapter(mAdapter);
        setContentView(mListView);
    }

    class HelloBase extends BaseAdapter {

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return arr.size();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        class ViewHolder {
            TextView txt;
        }

        ViewHolder vhHolder;

        @SuppressWarnings("null")
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            vhHolder = new ViewHolder();
            if (convertView == null) {
                convertView = li.inflate(R.layout.activity_main, null);
                vhHolder.txt = (TextView) convertView
                        .findViewById(R.id.webView1);
                convertView.setTag(vhHolder);
            } else {
                vhHolder = (ViewHolder) convertView.getTag();
            }
            vhHolder.txt.setText(arr.get(position));
            vhHolder.txt.setOnClickListener(new OnMyClick(vhHolder.txt));
            return convertView;
        }

        class OnMyClick implements OnClickListener {

            TextView txt;

            OnMyClick(TextView txt) {
                this.txt = txt;
            }

            @Override
            public void onClick(View v) {
                txt.setTextColor(Color.RED);
                mAdapter.notifyDataSetChanged();

                if (preTextView != null)
                    preTextView.setTextColor(Color.BLACK);

                preTextView = txt;

            }

        }
    }

    TextView preTextView;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T09:53:35.643

```
 yourview = v;
                v.setBackgroundResource(R.color.transparent_green); 
```

# typescript - TypeScript compile and keep comments

> ID：12758657
> 
> 赞同：19
> 
> 时间：2012-10-06T09:48:58.690
> 
> 标签：typescript, tsc

I like to have my comments intact in the resulting javascript file, by default the compiler removes them. Is there a tsc parameter for that? (The use case is to keep /// reference path's = ... for chutzpah unit testing. )

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-04-14T13:19:00.833

自 2015 年以来，您可以在项目中创建一个`tsconfig.json`并添加`"removeComments": false`到其`"compilerOptions"`属性中，以便将您的评论保留在生成的 javascript 文件中。

* * *

### 1.`tsconfig.json`从终端创建项目文件（如有必要）

```
tsc -init 
```

### 2.添加`"removeComments": false`到你的`tsconfig.json`文件里面的`"compilerOptions"`属性

最后，您应该期望您的`tsconfig.json`文件内容是这样的：

```
{
    "compilerOptions": {
        "module": "commonjs",
        "target": "es5",
        "noImplicitAny": false,
        "sourceMap": false,
        "removeComments": false
    },
    "exclude": [
        "node_modules"
    ]
} 
```

### 3\. 从终端将 .ts 文件编译成 .js 文件

*   使用`tsc myFile.ts`以保留您的评论
*   用于`tsc --removeComments myFile.ts`删除您的评论

* * *

[您可以在Typescriptlang.org tsconfig.json 页面](http://www.typescriptlang.org/docs/handbook/tsconfig-json.html)上了解有关`tsconfig.json`编译器选项的更多信息。

此外，根据[Typescript 文档](https://www.typescriptlang.org/docs/handbook/compiler-options.html)，设置`true`或属性`false`对以 .`"removeComments"`开头的版权标题注释没有影响`/*!`。因此，它们将始终出现在您的`.js`文件中。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-05-05T19:08:24.330

以 开头的注释将`/*!`被保留。

**例子：**
`/*! this comment remains untouched */`
`/* but this one will be removed */`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-06T09:54:14.567

是的，-c（或 --comments）选项；

> 语法：tsc [选项] [文件 ..]
> 
> 示例： tsc hello.ts
> tsc --out foo.js foo.ts
> tsc @args.txt
> 
> 选项：
>    **-c、--comments 发出注释以输出**
> ...

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-11-13T19:42:02.877

当前使用 1.6.2，并且默认情况下会保留注释。编译器中唯一与注释相关的标志是*删除*注释。根据文档：

> --removeComments
> 删除除以 /!* 开头的版权标题注释之外的所有注释

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-06T12:48:02.373

您将必须编辑基础 .csproj 文件并包含 -c 选项。
看看这里：

[http://blorkfish.wordpress.com/2012/10/06/include-typescript-comments-in-generated-javascript/](http://blorkfish.wordpress.com/2012/10/06/including-typescript-comments-in-generated-javascript/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T22:00:26.357

[Chutzpah 2.2](http://chutzpah.codeplex.com/)现在原生支持 TypeScript，因此您无需担心这一点。您可以直接在 .ts 文件上运行 Chutzpah，它将运行您的测试。

# c# - 找不到类型或命名空间名称“列”

> ID：12758658
> 
> 赞同：15
> 
> 时间：2012-10-06T09:49:00.903
> 
> 标签：c#, .net, entity-framework, ef-code-first

我确定我在这里遗漏了一些简单的东西。我正在尝试遵循 Code First Entity Framework 教程，该教程告诉我使用一些数据注释。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.ComponentModel.DataAnnotations;

namespace Model
{
    public class Destination
    {
        public int DestinationId { get; set; }

        [Required]
        public string Name { get; set; }
        public string Country { get; set; }
        [MaxLength(500)]
        public string Description { get; set; }

        [Column(TypeName="image")]
        public byte Photo { get; set; }

        public List<Lodging> Lodgings { get; set; }
    }
} 
```

编译器对前两个注释没有任何问题，但它似乎不喜欢：`[Column(TypeName="image")]`.

错误：

*   找不到类型或命名空间名称“列”。

*   找不到类型或命名空间名称“ColumnAttribute”。

我正在使用 Visual Studio 2012 和实体框架 5。

有什么建议么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-06T10:00:01.320

在**Entity Framework 4.3.1**中，在namspace`ColumnAttribute`中定义，在. 因此，如果您有对该 dll 的引用和对该命名空间的 using 语句，则应该没问题。`System.ComponentModel.DataAnnotations``EntityFramework.dll`

在**Entity Framework 5**中，它位于`System.ComponentModel.DataAnnotations.Schema`namspace 中，因此您需要在您的类中添加对它的引用。

```
using System.ComponentModel.DataAnnotations.Schema; 
```

[您可以在此处](http://techiesweb.net/2012/10/06/column-attribute-in-entity-framework-5.html)阅读有关它的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-07T02:17:53.143

## 我有正确的`using`陈述......

尽管有正确的`using`陈述，我还是遇到了这个问题。

就我而言，我的项目是由 dotPeek 在反编译 dll 后生成的（原始源代码丢失了）。

dotPeek 创建项目时引用了 EntityFramework.dll 的副本，该副本位于某个文件夹中，不受 NuGet 管理。

对我有用的是删除对 EntityFramework 的引用，并使用 NuGet 控制台重新添加它。

# java - Extract array encapsulated in an Object

> ID：12758659
> 
> 赞同：1
> 
> 时间：2012-10-06T09:49:03.260
> 
> 标签：java, arrays, object

Let's say i have an array encapsulated in an object :

```
String[] strvls = { "Alessio", "Ale" };
Object container = strvls; 
```

I want to extract back the array from the container object, how can i do ?

I know that is an array checking in this way :

```
if(container.getClass().isArray()) {
    //Extract the encapsulated array - How ?
} 
```

I can't cast into a String array, because I can't know for sure that the type of the array was `String[]` ... So i need to cast into a generic type array, Is it possible in Java ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T09:54:05.857

您可以将其转换为`Object[]`数组：

```
String[] strvls = { "Alessio", "Ale" };
Object container = strvls;
if (container.getClass().isArray()) {
    Object[] data = (Object[]) container;
    System.out.println(data.length);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T09:59:42.020

与 Karaszi 的回答类似，但可能有一条捷径：

```
if(container instanceof Object[])
  System.out.println("Array size: " + ((Object[])container).length); 
```

**重要提示：**这不适用于原始数组。上面的代码有效，因为 String 派生自 Object 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T10:02:06.880

你可以有这样的方法：

```
private static <T> T[] getArray(Object o){
    return (T[]) o;
} 
```

这将有助于使用泛型类型，并且您可以将任何“未经检查”的编译器警告封装在此方法中。然后你可以这样做：

```
Object[] array = getArray(container); 
```

如果您对类型一无所知，或者：

```
String[] array = getArray(container); 
```

如果你知道它是一个字符串数组。

# iphone - 通过委托或通过实例调用函数之间的区别

> ID：12758670
> 
> 赞同：0
> 
> 时间：2012-10-06T09:50:19.137
> 
> 标签：iphone, objective-c, delegates

通过委托或创建实例调用函数与调用 tomethod 有什么区别：

例如，我可以使用下一个方法

```
ViewC1.m

-(void) doSomthing{
}

viewC2.m

viewC1 *myInterface = [[viewC1 alloc] init];
[myInterface doSomthing]; 
```

或使用协议创建委托......并像这样使用它：

```
viewC2.m

[self.delegate doSomthing]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:15:19.990

假设有两个类 ViewC1 和 ViewC2。如果要从 ViewC1 向 ViewC2 发送消息，并从 ViewC2 向 ViewC1 接收回调消息。最好使用协议进行此对象通信。如果您为此对象通信使用实例方法，您将限制 ViewC2 回调指定对象（在本例中为 ViewC1）。为了让 ViewC2 能够回调任何对象。您可以在 ViewC2 上定义协议。并让其他想要接收回调的对象符合它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:41:43.947

这主要是您尝试实现的设计模式的问题。委托允许您在类之间创建不太明确的链接。来自 Apple 的[The Objective-C Programming Language](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Introduction/introObjectiveC.html#//apple_ref/doc/uid/TP30001163-CH1-SW2)：

> “协议将方法声明从对类层次结构的依赖中解放出来，因此它们可以以类和类别不能使用的方式使用。协议列出了在某处（或可能）实现的方法，但实现它们的类的身份不是兴趣。”

因此，要回答您的问题，只要`self.delegate`存在和实现`doSomthing`和`viewC1`实例实现，就结果而言没有区别`doSomthing`。但在不了解更广泛背景的情况下，很难说更多关于相对优势的信息。我已经阅读了 Objective-C 协议和 Cocoa 框架中大量使用的委托模式，以便更好地了解何时使用这种模式。在这种情况下效仿苹果。

（顺便说一句，在 Objective-C 中，它是“方法”而不是“函数”......）

# java - 继承的枚举重定义

> ID：12758677
> 
> 赞同：1
> 
> 时间：2012-10-06T09:51:04.060
> 
> 标签：java, enums

它比听起来更复杂，但我认为我有义务尝试类似的东西。我想用枚举的原型制作一个抽象父类（我想用一个值声明枚举，这可能是默认的未初始化的值，并且还声明了我将从子类中使用的几个方法），然后我想要一个类来扩展抽象父级以实际初始化相同的枚举（我知道这实际上隐藏了父级枚举），以便孩子类将在枚举内定义一组项目，但可能保留这些方法。

我对这个抽象级别了解不多，所以我现在将描述我的问题的性质，以防有更实际的解决方案：我有一堆文件，其中包含实现许多基于枚举的命令的类。（例如，class1 实现 Observer 有一个更新方法，它使用基于枚举的开关来决定选择什么命令，这同样适用于其他类）我现在想以一种我有一个枚举变量的方式抽象整个事情所有类（例如CommandSet）中的名称相同，这样我就可以在父级内部拥有一个通用方法，该方法能够使用枚举的内部方法将帮助列表打印到我的系统。现在我知道我可以在每个类中重写完全相同的方法，但我想抽象它以便其他人可以继续扩展我正在制作的库！

希望我不会太困惑或太困惑，​​有人可以帮助我！:)

编辑：这是代码的一个想法（可能不正确）：

```
 public abstract class Commands{
    enum CommandSet{ 
        // empty command, placeholder
        null_command ("command name", "command description");
        // the Strings used for name and description
        private final String name;
        private final String description;
        // constructor 
        CommandSet(String name, String description){
            this.name=name;
            this.description=description;
        }
        // get parameters
        public String getName(){
            return name;
        }
        public String getDescription(){
            return description;
        }
    }
    public void showHelp(){
        for (CommandSet i : CommandSet.values()) {
            printf(i.getName(),":",i.getDescription());
        }
    }
}

public class StandardCommads extends Commands implements Observer{
    // I want to change the enum here, just changing the values so that null_command ("command name", "command description") will get removed and I will add a dozen other values, but keep the methods that the parent had
    // update inherited from Observer
    @Override
    public void update(Observable observable, Object object) {
        // I want the commands inside the switch cases defined inside this class's enum 
        switch(CommandSet.valueOf(String.valueOf(object)){
            case command1: doStuff1();break;
            case command2: doStuff2();break;
            ...
            case commandN: doStuffN();break;
        }
    // other methods
    void doStuff1(){
        ...
    }
    ...
    void doStuffN(){
        ...
    }
}

public class NonStandardCommads extends Commands implements Observer{
    // Another set of commands here for the enum keeping the same methods it had in the parent

    // update inherited from Observer
    @Override
    public void update(Observable observable, Object object) {
        // Other set of commands inside this class used in the switch statement
        switch(CommandSet.valueOf(String.valueOf(object)){
            case Zcommand1: doStuffz1();break;
            case Zcommand2: doStuffz2();break;
            ...
            case ZcommandN: doStuffzN();break;
        }
    // other methods
    void doStuffz1(){
        ...
    }
    ...
    void doStuffzN(){
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:23:00.077

不可能：Java 枚举既不能扩展另一个类，也不能扩展自身。

然而，它们可以实现接口。也许你可以利用它来发挥你的优势。

枚举还有一些其他的东西可以帮助你：枚举不是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的。您可以更改枚举的字段值，但这会为整个 JVM 更改它们。

另一种方法可能是将您的子类实例传递到枚举的方法中，并让枚举使用您的子类作为[回调](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)，以便为枚举的不同用户从枚举中获取不同的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T10:49:24.587

不，你不能那样做。

当您想在以后添加/扩展更多定义或实例化枚举实例时，Java Enums 很快就会耗尽气体。（例如从数据库加载它们，在实例方法中配置它们，而不仅仅是静态的。）

Java 枚举中的行为/或逻辑也有点受限——您可以定义和设置属性，但只有静态可初始化的，并且逻辑似乎是基本的（您最终主要只是将引用或序数与其他定义的枚举常量进行比较）。

**你可以做什么：**

您*可以*使用整数代码实现祖先命令或抽象命令类，然后将其子类化以定义具体值/附加代码/加载或配置实例等。

为了获得更多好处，您可以获得高效的切换和调度（通过代码）以及定义更多细节/属性、根据需要实例化命令等的能力。

本质上，这就是在 Java 支持 Enum 之前定义枚举的方式。尽管您可能将它们用作*值对象*，而不是严格静态的。

**我的专长：**

我已经完成了大量的编译器和类型系统工作，尝试了文件类型和相关数据/行为的枚举。探索了外部限制，并达到了明确的界限。

我也喜欢能够实例化并返回一个新的 UnknownFileType("") 作为*答案*。枚举无法做到这一点。

**例子：**

（我们将通过 String 而不是 int 发送——因为您的代码似乎使用的是 Java 7。这使得命令解析比同时需要语法“名称”和内部整数“代码”更容易。）

```
public static class Command {
  protected String code;
  protected String desc;
  public String getCode() {return code;}
  public String getDesc() {return desc;}
  public Command (String code, String desc) {
    this.code = code;
    this.desc = desc;
  }
  public String toString() {return code;}
}

public class StandardCommands {
  public static Command READ = new Command("READ", "read a record");
  public static Command CREATE = new Command("WRITE", "create a record");
  public static Command EDIT = new Command("WRITE", "modify a record");
}
public class FurtherCommands extends StandardCommands {
  public static Command LIST = new Command("LIST", "list all records");
}

public class QueryCommands extends FurtherCommands {
  public static class QueryCmd extends Command {
    protected String search;
    public String getSearch() {return search;}
    // constructor..
  }
  public static QueryCmd QUERY_EXAMPLE = new QueryCmd("QUERY", "example", "query for specified string");

  public static QueryCmd createQuery (String search) {
    return new QueryCmd( "QUERY", search, "query for specified string");
  }
} 
```

# ios - 如何重复系统声音

> ID：12758680
> 
> 赞同：1
> 
> 时间：2012-10-06T09:51:18.220
> 
> 标签：ios, audio, system-sounds

我想重复发送到此方法的声音吗？

```
- (void) playSound:(CFURLRef)soundFileURLRef {
    SystemSoundID soundID;
    OSStatus errorCode = AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    if (errorCode != 0) {

    }else{
        AudioServicesPlaySystemSound(soundID);
    }
} 
```

我已经看到了有关如何使用 numberOfRepeats 进行此操作的答案。但我无法将其放入我的代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:18:42.333

尝试使用`AVAudioPlayer`：

```
- (void) playSound:(CFURLRef)soundFileURLRef {
    NSError* sndErr;        
    AVAudioPlayer *player = [[ AVAudioPlayer alloc ] initWithContentsOfURL:(NSURL *)soundFileURLRef error:(&sndErr) ];

    // at this point player has a retain count of 1\. you should save it 
    // somewhere like a class member variable so you can stop the playing
    // and release the object later. Under ARC, you must have a strong reference
    // to the object so that it doesn't get released when this function goes out
    // of scope.

    if (sndErr != nil) {
        player.numberOfLoops = -1; // infinite number of loops. call stop when you want to stop.
        [player play];
    }
} 
```

# android - Android：如何将通知放在通知区域的顶部？

> ID：12758681
> 
> 赞同：25
> 
> 时间：2012-10-06T09:51:20.543
> 
> 标签：android, notifications, android-notification-bar, notification-bar

我正在尝试将我的通知放在通知区域的顶部。

一种解决方案是将参数“when”设置为我的通知对象，其未来时间如下：

```
notification.when = System.currentTimeMills()*2; 
```

我在此使用的代码：

```
long timeNotification = System.currentTimeMillis()*2;
Notification notification = new Notification(statusIcon,c.getResources().getString(R.string.app_name),timeNotification);
notification.flags = Notification.FLAG_ONGOING_EVENT | Notification.FLAG_NO_CLEAR;
notification.when = timeNotification;
notification.priority = Notification.PRIORITY_MAX; 
```

但是一些应用程序（如 Facebook）能够在我的当前时间上放置一个简单的通知。

如果我刷新通知，它将保留在这些通知之下。

我必须设置哪些参数才能将我放在`Notification`通知区域的顶部？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-01-30T20:24:19.613

你应该做这个。其他答案似乎已经过时。

```
NotificationCompat.Builder mBuilder =
            (NotificationCompat.Builder) new NotificationCompat.Builder(context)
            .setSmallIcon(R.drawable.some_small_icon)
            .setContentTitle("Title")
            .setContentText("This is a test notification with MAX priority")
            .setPriority(Notification.PRIORITY_MAX); 
```

setPriority(Notification.PRIORITY_MAX) 很重要。也可以根据需要更换为以下任意一种。

**不同的优先级信息：**

**PRIORITY_MAX** -- 用于关键和紧急通知，提醒用户注意时间紧迫或需要解决才能继续执行特定任务的条件。

**PRIORITY_HIGH** -- 主要用于重要的通信，例如带有用户特别感兴趣的内容的消息或聊天事件。高优先级通知触发平视通知显示。

**PRIORITY_DEFAULT** -- 用于不属于此处描述的任何其他优先级的所有通知。

**PRIORITY_LOW** -- 用于您希望通知用户但不那么紧急的通知。低优先级通知往往显示在列表的底部，这使得它们成为公共或非定向社交更新之类的不错选择：用户已要求收到有关它们的通知，但这些通知不应优先于紧急或直接沟通。

**PRIORITY_MIN** -- 用于上下文或背景信息，例如天气信息或上下文位置信息。最低优先级通知不会出现在状态栏中。用户在扩展通知阴影时发现它们。

有关更多详细信息，请查看以下链接：http: [//developer.android.com/design/patterns/notifications.html#correctly_set_and_manage_notification_priority](http://developer.android.com/design/patterns/notifications.html#correctly_set_and_manage_notification_priority)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T10:00:10.147

你可以让你的通知`Ongoing`，当它看起来比其他通常的通知更高时。但在这种情况下，用户将**无法**手动清除它。

为了做到这一点，为您的`Notification`对象设置标志：

```
notif.flags = Notification.FLAG_ONGOING_EVENT | Notification.FLAG_NO_CLEAR 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T10:13:10.847

尝试将`priority`通知设置为高

文档 >[通知优先级](http://developer.android.com/reference/android/app/Notification.html#priority)

还要检查这个问题，它可以帮助您将[通知固定到通知区域的顶部](https://stackoverflow.com/questions/6189817/pin-notification-to-top-of-notification-area)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-04T02:16:50.313

请注意，如果您想要“提示”通知，即显示在当前用户窗口顶部的通知，您必须在构建器中进行以下设置：

```
setDefaults(NotificationCompat.DEFAULT_VIBRATE) 
```

参考在[javadoc](https://developer.android.com/reference/android/support/v4/app/NotificationCompat.html#//apple_ref/Constant/DEFAULT%255FVIBRATE)中：

> 在某些平台上，振动通知更有可能以提示通知的形式呈现。

**提示通知的完整示例：**

```
NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(context)
            .setSmallIcon(R.drawable.some_small_icon)
            .setContentTitle("Title")
            .setContentText("This is a test notification with MAX priority")
            .setPriority(Notification.PRIORITY_MAX)
            .setDefaults(NotificationCompat.DEFAULT_VIBRATE); 
```

# macos - 窗口镶边中的类似 OSX 的工具栏？

> ID：12758683
> 
> 赞同：2
> 
> 时间：2012-10-06T09:51:40.023
> 
> 标签：macos, wxpython

许多 OS X 应用程序在菜单栏的 chrome 中使用某种图标化选项卡作为它们的首选项对话框。对于 wxPython 应用程序，我想创建这样的首选项对话框。Dropbox 似乎正在使用 wxPython（另见屏幕截图），那么我自己如何创建这样的对话框？

![Dropbox 偏好设置](../Images/ce5337437dcbb7091e4edef50d14e8af.png)

*更新：*摆弄后`wx.Frame.CreateToolBar`，框架开始与原版相似。但是，单选按钮的样式（我可能需要 a `wx.Notebook`）不是应有的样式。另请参阅上图中“常规”选项卡的渐变和边框。（[源代码](https://gist.github.com/4110867)）

![有点原生的 OSX 工具栏](../Images/3fa13dcbc6da8be54eddfdd0cc9ca457.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:51:27.553

Dropbox 不使用 wx 我很确定，但是您可以使用 wx 获得这个本机工具栏。您必须使用 ctypes 并加载一些核心和碳框架。

wx wiki中有[一篇](http://wiki.wxpython.org/NativeMacOSXToolbarSelection)关于如何做到这一点的文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:36:04.747

我认为你想要的是一个自定义的 wx.Dialog，里面有一个 wx.Toolbook。有关示例，请参阅 wxPython 演示包，或者您可以阅读我的教程： http: [//www.blog.pythonlibrary.org/2009/12/03/the-book-controls-of-wxpython-part-1-of-2 /3/](http://www.blog.pythonlibrary.org/2009/12/03/the-book-controls-of-wxpython-part-1-of-2/3/)

更新：我不确定这是否仍然适用，但是有一个 wiki 条目听起来很像 OP 想要的：[http ://wiki.wxpython.org/NativeMacOSXToolbarSelection](http://wiki.wxpython.org/NativeMacOSXToolbarSelection)

# javascript - HTML5 贪吃蛇游戏 - 添加多种食物

> ID：12758687
> 
> 赞同：1
> 
> 时间：2012-10-06T09:52:23.000
> 
> 标签：javascript

我已按照[本指南](http://blog.new-bamboo.co.uk/2009/12/30/html5-canvas-snake-game)制作我的蛇游戏。

但现在我想在地图中添加不止一种食物。

`makeFoodItem();`好吧，我尝试使用而不是默认的 1 行来放置行。就像：

```
makeFoodItem();
makeFoodItem();
makeFoodItem();
makeFoodItem();
makeFoodItem(); 
```

其中还做了5种食物。但是蛇拿到的时候分数没有加，只是去掉了，拿的时候也没有加新的。

所以我开始查看 Function `makeFoodItem()`，它看起来像这样：

```
function makeFoodItem(){
  suggestedPoint = [Math.floor(Math.random()*(canvas.width/gridSize))*gridSize, Math.floor(Math.random()*(canvas.height/gridSize))*gridSize];
  if (snakeBody.some(hasPoint)) {
    makeFoodItem();
  } else {
    ctx.fillStyle = "rgb(10,100,0)";
    ctx.fillRect(suggestedPoint[0], suggestedPoint[1], gridSize, gridSize);
  };
} 
```

但我无法真正弄清楚在那里做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-13T07:43:39.410

```
function spawnMultipleFood () {
    for (let i = 0; i < spawnMoreFoodX.length; i++) {
        let spawnMultipleX = spawnMoreFoodX[i]
    for (let j = 0; j < spawnMoreFoodY.length; j++) {
        let spawnMultipleY = spawnMoreFoodY[i]

    innerBoard.fillStyle = "purple";
    innerBoard.fillRect(spawnMultipleX * grid, spawnMultipleY * grid, gridSize, gridSize)
        }
    } 
} 
```

我的 spawnMoreFoodX 和 spawnMoreFoodY 的全局变量是一个数组，我循环遍历并将其设置为另一个变量，然后将该变量插入到`fillRect()`.

# c - C中的小端到大端

> ID：12758689
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:52:29.230
> 
> 标签：c

我有一个名为 hex_values 的无符号整数数组，其中包含数字。例如：数组的大小是 5，它包含这个数字：

```
830C 830C 830C 830C 830C 
```

我需要做的是将它们显示为大端值：

```
0C83 0C83 0C83 0C83 0C83 
```

为了掩饰`830C`我`0C83`使用了这个功能：

```
unsigned int little_big(unsigned int little)
{
    return((little&0xff)<<24)+((little&0xff00)<<8)+((little&0xff0000)>>8)+      \
                                                             ((little>>24)&0xff);
} 
```

问题是，如果数字的第一个字符是零，那么 printf 将不会显示零……有什么办法可以解决吗？

## 感谢您的帮助...

编辑 ：

好的，我现在有另一个问题...例如，我有一个大小为 5 的数组，其中包含 5 个值，比如说 830C 830C 830C 830C 830C ...我有 2 个函数（第一个函数在我的第一篇文章中提到）。第二个函数有这个定义

```
void show_big(unsigned int * pt, unsigned int numbers) 
```

`{` `<br>unsigned int hex_b, hex_l;`

```
printf("\n");

for (unsigned int i = 0; i < numbers; i++)
{
    hex_l = *(pt + i);
    hex_b = little_big(hex_l);

    printf("%04X", (hex_b >> BITS));
} 
```

`}`
我用这个参数调用这个函数 show_big(hex_values, numbers); // hex_values 是包含 5 个数字的数组的名称，数字只是一个数字，表示数组有多少个值...问题是，如果数组包含的值多于 1，那么 show_big 函数将不会以大端显示这些数字正确（0C83 0C83 ...）...我真的不知道为什么...如果有必要我可以在这里完整的代码... THX寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:55:58.930

试一下`printf("%05X", x)`，`x`转换后的数字在哪里。这指示 printf 将您的数字打印到至少 5 个位置，如果需要更少，则用零填充最左边的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:59:33.420

您的问题与`printf()`将小端数转换为大端数的方式无关。

为了`printf()`显示前导零，您应该指定一个长度并在长度前加上一个`0`：

```
printf("%04X", little_big(0x830C)); 
```

该数字`4`告诉`printf()`它应该将您的数字右对齐输出到一个 4 个字符长的字段中，`0`告诉`printf()`它应该用前导零填充该字段，并且`X`是带有大写字母的十六进制输出的格式说明符。

# asp.net - Asp.net 试图读取或写入受保护的内存。这通常表明其他内存已损坏。

> ID：12758690
> 
> 赞同：0
> 
> 时间：2012-10-06T09:52:38.010
> 
> 标签：asp.net, mysql, memory, repeater, protected

在被“试图读取或写入受保护的内存。这通常表明其他内存已损坏”困扰了一年多之后，我终于找到了解决办法！

背景：asp.net 4.0。Windows server 2003。使用 MySQL 数据库。

我曾经在几页上随机遇到这个问题，巧合的是，这些页面上有一个 asp.net 转发器。我尝试了各种建议，但它们根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:52:38.010

我正在使用 system.data.odbc ，并为我的所有 asp.net 页面安装了 odbc 驱动程序以与数据库交互。解决方法来了……我下载了 MySQL.data.dll，并将这个库用于我的数据库。瞧！问题已解决。

# java - SQL 异常：java.sql.SQLException：未找到数据

> ID：12758693
> 
> 赞同：0
> 
> 时间：2012-10-06T09:52:52.223
> 
> 标签：java, jdbc

我收到一个错误，其中显示 SQL Exception: java.sql.SQLException: No data found，我似乎无法在这里找到问题。请帮助我，抱歉问。

```
try{
         Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String url = "jdbc:odbc:ict11";
    Connection con = DriverManager.getConnection(url);
    Statement statement = con.createStatement();
       statement.executeUpdate( "DELETE from Employee where EmployeeID ="+txtId.getText()+"" );
       statement.close();
    con.close();
    JOptionPane.showMessageDialog(rootPane, "Successfully Deleted");
    }
        catch(Exception e){
        JOptionPane.showMessageDialog(null, e);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:10:47.003

我可以考虑2个问题

1.  这可能是因为 getText() 没有消除不必要的空格。尝试`txtId.getText().trim()`

2.  网址可能有误。

除此之外，请执行以下操作以改进代码。

1.  打印完整的堆栈跟踪
2.  使用 PreparedStatement 而不是语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:51:31.797

```
statement.executeUpdate( "DELETE from Employee where EmployeeID ="+txtId.getText()+"" ); 
```

尝试使用这个

```
statement.executeUpdate( "DELETE from Employee where EmployeeID ='"+txtId.getText()+"'" ); 
```

注意在开头和结尾添加了单引号`txtId.getText()`

# installation - 无法从 iTunes 安装 xcode 4.5.1

> ID：12758694
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:52:52.540
> 
> 标签：installation, xcode4.5

好的..我在我的 Mac 上安装了 xcode 4.2。我使用 dmg 文件而不是 iTunes 安装了它。我想安装 iTunes 上可用的 xcode 4.5.1。我开始下载它，下载在某一时刻卡住了。我意识到我没有卸载前一个。所以我暂停了下载并使用终端命令卸载了现有的 xcode。现在我尝试从 iTunes 再次安装 xcode，它并没有超出安装范围。

![在此处输入图像描述](../Images/e7ff48fe4733c2af843d3727455bf896.png)

我不知道该做什么以及如何安装.. 我尝试退出 iTunes 助手，但没有帮助安装。任何建议都会受到欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:41:49.663

Looks like the installer is through the app store. 4.5.1 was released Oct 3\. I'm still trying to install it as well. I'm sure it has been on my update liste 2 or 3 times in a row.

Good luck!

# asp.net - asp.net 中的 asp processorThreadMax 等效项

> ID：12758697
> 
> 赞同：0
> 
> 时间：2012-10-06T09:53:26.783
> 
> 标签：asp.net, .net, iis, iis-7, application-pool

在 asp.net 中是否有任何等效于 asp 的 processorThreadMax 设置？我有在负载下工作的网络应用程序。我听说 iis7 中的 applicationPool 限制为 25 个线程。我想让它变大。我正在使用 asp.net。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:00:35.917

要增加每处理器线程数限制的值，请执行以下步骤： 1\. 单击开始，指向所有程序，单击管理工具，然后单击 Internet 信息服务 (IIS) 管理器。

1.  在“连接”窗格中，选择 Web 服务器，单击以选择“功能视图”，然后双击 ASP 功能。

2.  单击以展开 Behavior 下的 Limits Properties，单击 Threads Per Processor Limit，为 Threads Per Processor Limit 输入所需的值，然后单击 Actions 窗格中的 Apply。

[http://msdn.microsoft.com/en-US/library/ee377050(v=BTS.10).aspx](http://msdn.microsoft.com/en-US/library/ee377050(v=BTS.10).aspx)

# java - unlockCanvasAndPost 中的 IllegalArgumentException（android 动态壁纸）

> ID：12758703
> 
> 赞同：5
> 
> 时间：2012-10-06T09:54:09.573
> 
> 标签：java, android, multithreading, live-wallpaper

我创建了我的第一个动态壁纸，在单独的线程中实现绘图。所以现在我有一个 WallpaperService 和我的 WallpaperPainter 来完成这项工作。问题是我在某些设备上获得了`IllegalArgumentException`in`unlockCanvasAndPost`方法（Samsung Note 就是其中之一）。我已经阅读了所有我能找到但无法修复该错误的建议。似乎`unlockCanvasAndPost`在表面被破坏时调用了，因此画布无效。这是代码的基本部分：

在墙纸服务中：

```
 @Override
    public void onSurfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        super.onSurfaceChanged(holder, format, width, height);
        painting.setSurfaceSize(width, height);
    }

    @Override
    public void onSurfaceCreated(SurfaceHolder holder) {
        super.onSurfaceCreated(holder);
        painting.start();
    }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        boolean retry = true;
        painting.stopPainting();
        while (retry) {
            try {
                painting.join();
                retry = false;
            } catch (InterruptedException e) { }
        }
        super.onSurfaceDestroyed(holder);
    } 
```

在绘画线程中：

```
public void stopPainting() {
    this.run = false;
    synchronized(this) {
        this.notify();
    }
}

public void run() {
    this.run = true;
    Canvas c = null;
    while (run) {
        try {
            synchronized (this) {
                Thread.sleep(50);
                c = this.surfaceHolder.lockCanvas();
                doDraw(c);
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            if (c != null) {
                this.surfaceHolder.unlockCanvasAndPost(c); // << -- HERE IS THE PROBLEM
            }
        }
        // if pause...
        synchronized (this) {
            if (wait) {
                try {
                    wait();
                } catch (Exception e) { }
            }
        }
    }
} 
```

谁能给我任何线索我做错了什么？我是 Java 和 Android 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:25:44.877

如果错误是：*UnlockAndPost Failed*，这意味着它没有解锁缓冲区。之后`this.surfaceHolder.unlockCanvasAndPost(c);`
可以追加
`this.surfaceHolder.lockCanvas();`
（对不起我的英语水平不好）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T13:43:34.870

当您打开壁纸预览时，创建对象 WallpaperService 并进一步创建 Engine 实例。然后流开始绘制壁纸。

然后，当您单击“设置壁纸”时 - 不会创建 WallpaperService 的新实例。但他调用了 onCreateEngine() 方法，该方法返回另一个（第二个）Engine 实例。它也运行自己的线程。

现在你有两个竞争线程！！！因此它们会导致抛出异常。

修复该错误所需要做的就是编写正确的方法 onCreateEngine()。

替换这个：

```
@Override
public Engine onCreateEngine() {
    return new SampleEngine();
} 
```

对此：

```
private SampleEngine engine;

@Override
public Engine onCreateEngine() {

    if (engine!=null) {
        engine.painting.stopPainting();
        engine = null;
    }
    engine = new SampleEngine();
    return engine;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:15:59.163

我没有看到明确的问题，但这里有一些想法。

*   您有可能解锁尚未锁定的画布。我将设置`c = null;`在循环的顶部，否则下一次循环时将解锁`while`先前的值。`c`

    ```
    while (run) {
        Canvas c = null;
        ... 
    ```

*   您的`run`字段应标记为，`volatile`因为它由多个线程访问。

*   `Thread.sleep(...)`永远不要在`synchronized`块内调用。这是一个非常糟糕的做法，因为它不必要地阻塞了其他线程。

*   确保您至少记录您的异常。要格外小心`catch (Exception e) {}`。所做的只是掩盖你的问题。

*   `join()`做内部`while`循环没有多大意义。如果您的线程被中断，您应该中断绘画线程并退出。

*   由于您既在睡觉*又*在等待，因此删除睡眠并执行以下操作会更有意义：

    ```
    try {
       synchronized (this) {
           if (wait) {
              wait();
           else {
              wait(50);
           }
       }
    } catch (Exception e) {
       e.printStackTrace();
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-21T14:39:01.433

我的动态壁纸也有同样的问题。在 Nexus 5 模拟器上它运行良好，但是当我在 Nexus 10 模拟器上运行它时，它会在应用程序加载的那一刻崩溃。

我发现问题是因为模拟器的默认皮肤有错误的分辨率。在我将皮肤更改为“无皮肤”之后，我就不再遇到崩溃了。

有关如何修复分辨率错误的皮肤的更多信息，请参阅： [Android Studio - 平板电脑模拟器未显示正确分辨率](https://stackoverflow.com/questions/27581839/android-studio-tablet-emulator-not-showing-correct-resolution)

# mysql - 使用 select... for update 来隔离行的最小示例

> ID：12758710
> 
> 赞同：11
> 
> 时间：2012-10-06T09:55:05.397
> 
> 标签：mysql

**更新：现在有`SKIP LOCKED`Mysql`NOWAIT`和 Postgres。**

下面是老问题。

* * *

我希望并发事务从表中选择一行，将其标记为“脏”，以便其他事务**无法选择它**，然后执行其余的事务。

我在使用`select... for update`此目的时遇到了麻烦，因为第二笔交易也有同样的竞争。请为**不同的事务提供一个最小示例以选择不同的行**。

我的数据是：

```
mysql> select * from SolrCoresPreallocated;
+----+-------------+-----+-----+
| id | used_status | sid | cid |
+----+-------------+-----+-----+
|  1 |           0 |   0 | 400 |
|  2 |           0 |   0 | 401 |
|  3 |           0 |   0 | 402 |
|  4 |           0 |   0 | 403 |
|  5 |           0 |   0 | 404 |
|  6 |           0 |   0 | 405 |
+----+-------------+-----+-----+
6 rows in set (0.00 sec) 
```

而且这些东西没有按预期工作：

```
mysql> begin;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from SolrCoresPreallocated order by id limit 1 for update;
+----+-------------+-----+-----+
| id | used_status | sid | cid |
+----+-------------+-----+-----+
|  1 |           0 |   0 | 400 |
+----+-------------+-----+-----+
1 row in set (0.00 sec)

...set the used_status to 1
...perform the rest of the operations 
```

...作为第二笔交易

```
mysql> begin;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from SolrCoresPreallocated order by id limit 1 for update;
ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction
mysql>  rollback;
Query OK, 0 rows affected (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T10:16:21.793

`SELECT ... FOR UPDATE`以独占模式锁定行，这意味着在第一个选择完成或回滚之前，第二个选择无法继续。这是因为第二次选择的结果可能会受到您锁定的行内容的影响，因此需要对该行进行读取锁定才能检查。

`UNIQUE INDEX`例如，如果您创建一个on `id`，您可以这样做；

```
select * from SolrCoresPreallocated where id=1 for update; 
```

在第一笔交易中；

```
select * from SolrCoresPreallocated where id=2 for update; 
```

在第二个中独立，因为唯一索引允许第二个选择找到正确的行，而无需读取锁定第一个。

编辑：要尽快获得“免费”行，唯一的方法就是进行两次交易；

*   BEGIN/SELECT FOR UPDATE/UPDATE to busy/COMMIT 以获取该行。
*   BEGIN/<process row>/UPDATE to free/COMMIT 处理该行并释放它。

这意味着您可能需要补偿操作，以防进程失败并回滚将更新行以释放的事务，但是由于 MySQL（或就此而言的标准 SQL）没有“获取下一个未锁定行”的概念“，你没有太多选择。

# c# - 连接尝试失败，因为连接方在一段时间后没有正确响应或连接的主机没有响应

> ID：12758727
> 
> 赞同：7
> 
> 时间：2012-10-06T09:57:23.940
> 
> 标签：c#, windows-services, windows-server, webclient

我正在开发一个 Windows 服务，它从特定的 URL 下载图像。该服务在我的计算机上正常运行，但是当我将其安装在服务器中时，它不会下载图像，并且会出现以下错误：

> System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: 连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机未能响应 212.100.220.117:80
> 
> > 在 System.Net.Sockets.Socket.DoConnect（端点 endPointSnapshot，SocketAddress 套接字地址）
> > 
> > 在 System.Net.ServicePoint.ConnectSocketInternal（布尔连接失败，套接字 s4，套接字 s6，套接字和套接字，IPAddress 和地址，ConnectSocketState 状态，IAsyncResult asyncResult，Int32 超时，异常和异常）
> 
> --- 内部异常堆栈跟踪结束 ---
> 
> > 在 System.Net.WebClient.DownloadDataInternal（Uri 地址，WebRequest& 请求） 在 System.Net.WebClient.DownloadData（Uri 地址） 在 System.Net.WebClient.DownloadData（字符串地址）

什么可能导致错误，我该如何解决？我读了这个页面：http: [//support.microsoft.com/kb/318140](http://support.microsoft.com/kb/318140)

但我不确定这是否是问题所在，如果是我应该在配置中写什么代理。征求你的意见。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T06:31:17.827

我找到了答案。我试图从服务器访问公共地址“ [http://mywebsite.com/images/](http://mywebsite.com/images/) ”。而不是我使用托管该网站的服务器的本地 IP，它现在可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-05T15:50:09.527

在这种情况下，端口 80 可能未打开。在防火墙设置中创建入站和出站规则以打开端口 80。不过，如果存在问题，请尝试禁用防病毒软件，可能是防病毒软件阻止了该端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-07T13:49:09.020

在我的情况下，我必须在 Windows 服务控制台中修改 Windows 服务的登录设置，然后使用域管理员帐户而不是常规的本地系统/服务帐户来运行该服务，然后它开始正常工作。

# c# - 一个月最后一天的自定义验证器 - C#

> ID：12758728
> 
> 赞同：3
> 
> 时间：2012-10-06T09:57:28.773
> 
> 标签：c#, asp.net

我是 asp.net 的新手，所以请多多包涵：我想创建一个自定义验证器来检查文本框中（具有日历扩展名（AJAX））中给出的输入日期是否是一个月的最后一天或不是。这是我试图做的：

```
protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs e)
{

    DateTime dt = Convert.ToDateTime(e.ToString("dd/MMM/yyyy"));
    DateTime lastOfMonth = new DateTime(dt.Year, dt.Month, 1).AddMonths(1).AddDays(-1);
    if (dt == lastOfMonth)
    {
        e.IsValid = true;
    }
    else
    {
        e.IsValid = false;
    }

} 
```

我认为问题在于我处理对象“e”的方式。任何帮助都非常受欢迎。提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T10:01:18.363

你说的对。`e`不是日期，它是`ServerValidateEventArgs`. 你应该`Value`从那里得到财产。`Value`是一个字符串，您需要将其转换为日期时间，然后进行验证。

```
DateTime dt;
if (DateTime.TryParseExact(e.Value, "dd/MMM/yyyy", CultureInfo.InvariantCulture, DateTimeStyles.None, out dt)) 
{
    // validation of dt here.
} 
```

您将需要知道日期在解析中的预期格式，因此我建议使用`DateTime.TryParseExact`. 您还需要传入正确的文化，即日期格式，因为解析规则取决于此 - 特别是在这种情况下，您将 MMM 作为模式的一部分，因为这在文化之间会有所不同。

通常，在解析来自用户输入的日期或数字时，您应该使用 TryParse 系列方法。这些不会引发失败，但会返回 false。如果返回值为 false，则解析失败，在这种情况下，您应该无法通过验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:03:04.377

我有一些扩展方法，你可以看看它们可以让你返回一个月的最后一天并比较两个日期......

它们是开源的...... [http://zielonka.codeplex.com/](http://zielonka.codeplex.com/)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace zielonka.co.uk.extensions.system
{
    //DateTime lastDay = DateTime.Now.GetLastDateTimeOfMonth();

    public static partial class DateTimeExtensions
    {
        public static DateTime GetLastDateTimeOfMonth(this DateTime dateTime)
        {
            return new DateTime(dateTime.Year, dateTime.Month, 1).AddMonths(1).AddDays(-1);
        }
    }
} 
```

# javascript - 如何使用 jquery 将 div 高度设置为另一个 DIV？

> ID：12758729
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:57:36.193
> 
> 标签：javascript, jquery, html

**更新：**

我有这样的情况，有3列布局A列，B列，C列。A列高度将是动态的。我需要为 Column B 和 C 设置 Column A 高度。

例如，A 列具有选项卡式面板，其高度基于选项卡内容。我在监控 B 列和 C 列的 A 列高度时遇到问题。我正在考虑使用 setTimeOut 方法来监控 A 列的高度。有没有最好的办法？

**代码：**

```
 setTimeout(set_height,1);
function set_height(){
cmn_height = $('.column-a').height();
$(".column-b").css('height',cmn_height);
$(".column-c").css('height',cmn_height);
cmn_height=0;
} 
```

好心劝告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:12:23.073

请试试这个：

```
setInterval("set_height()",1000);

function set_height(){
    cmn_height = $('.column-a').height();
    $(".column-b").css('height',cmn_height);
    $(".column-c").css('height',cmn_height);
    cmn_height=0;
} 
```

# css - 无法获得与 Photoshop 中相同的文本样式

> ID：12758734
> 
> 赞同：-1
> 
> 时间：2012-10-06T09:58:38.233
> 
> 标签：css

这个问题可能已经被问过很多次了，我知道 Photoshop 渲染文本与浏览器完全不同，但也许一些 css 大师可以帮助我让这个文本看起来尽可能接近它在 PS 中的样子：

![在此处输入图像描述](../Images/55c2ceb1498b622216fed5a541598d02.png)

我得到的最接近的是：

```
color: #666;
font-size: 11px;
font-family: 'lucida grande',tahoma,verdana,arial,sans-serif;
font-weight: bold; 
```

但它看起来很粗，如果我去掉粗体，它就会变薄......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:55:50.493

为了创建更少阴影、更大胆/锐利的效果，您可以尝试使用多个短距离阴影作为替代方案：

```
text-shadow: 0 0 .1px, 0 0 .1px, 0 0 .1px; 
```

但是，当用于较大的文本堆时，这很可能会占用性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:07:32.973

尝试使用`text-shadow`属性来消除你的字体的锯齿，并且可以在不使用的情况下给粗体增加一点点`font-weight: bold;`，你也可以`letter-spacing`像这样添加：[**我的小提琴**](http://jsfiddle.net/rZezr/)

HTML

```
<div class="demo">Music 1</div>​ 
```

CSS

```
.demo {
   color: #515151;
   font-size: 11px;
   font-family: arial,sans-serif;
   text-shadow: 1px 1px 1px #515151;
   letter-spacing: .1em;
} 
```

​</p>

# android - Eclipse中的鼠标向下滚动不起作用

> ID：12758738
> 
> 赞同：0
> 
> 时间：2012-10-06T09:59:11.833
> 
> 标签：android, eclipse, eclipse-plugin

所以几天前eclipse工作正常然后我更新了android sdk，android ADT ....

在此之后，鼠标向下滚轮不再起作用。它适用于其他一切......但在 eclipse 上（无论是什么窗口/首选项/等）我打开它只是不起作用

任何人都知道我应该在哪里解决这个问题。

非常感谢帮助！

稍后：重新安装 eclipse 和 adt 后它可以工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:00:38.603

我还没有在 Eclipse 中看到 Preferences，您可以在其中禁用鼠标滚轮。我建议您使用相同的 android sdk 安装新的 eclipse，看看是否会发生同样的情况。

# jquery - 我们可以通过在线网络代理使用 jQuery 框架吗

> ID：12758752
> 
> 赞同：-1
> 
> 时间：2012-10-06T10:00:17.170
> 
> 标签：jquery, proxy, include, webproxy

我使用 Google CDN 在我的网站中包含 jQuery：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script> 
```

一切都按预期工作，但是当我尝试使用任何在线网络代理（例如[Zend2](http://www.zend2.com/)或 [Proxify](https://proxify.com) ）访问它时，无法加载 jQuery。根据包含的 jQuery 版本和使用的 Web 代理，当浏览器尝试解析 jquery.min（var 未定义等）时，我们会在浏览器控制台中收到各种错误消息。

所有使用 jQuery 的网站，包括 jQuery 的网站本身，都有同样的问题。例如，尝试通过 Web 代理使用 jQuery UI 演示站点：无法使用 jQuery UI 小部件，请在 Web 控制台中查看所有错误消息。

我尝试了几十个代理，我只发现一个能够奇迹般地解析 jQuery。

为什么 jQuery 不能与这些 Web 代理中的大多数一起使用？有什么解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:07:04.613

默认情况下，这两个代理都会删除脚本。jquery.min.js 中除了脚本之外什么都没有。确保在使用代理之前关闭“删除脚本”选项。

我下载了带代理和不带代理的 jquery.js（未缩小），并对它们进行了区分。它对代码进行了大量更改。其中一些只是我认为不会产生任何影响的语法更改，但有很多这样的：

```
location = window.location, 
```

变成：

```
location =  _proxy_jslib_handle(window, 'location', '', 0, 0), 
```

它们都涉及替换各种内置 Javascript 机制的 _proxy_jslib_XXX 函数。我用谷歌搜索了一下，发现它来自 CGIProxy，这是大多数代理网站使用的脚本。也许它所做的更改与 jquery 不完全兼容。

可能适合您提出此问题的地方是他的[网站](http://www.jmarshall.com/tools/cgiproxy/)。这不是真正适合 SO 的编程问题。

# php - 更新前事件学说

> ID：12758753
> 
> 赞同：2
> 
> 时间：2012-10-06T10:00:32.050
> 
> 标签：php, symfony, doctrine

我有这段代码，但`$modificacion`在数据库中插入对象时遇到问题。

```
class ListenerCrud{

    protected $container;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    public function preUpdate(PreUpdateEventArgs $eventArgs){

        if ($eventArgs->getEntity() instanceof Usuario) {

            $em = $eventArgs->getEntityManager();
            $modificacion = new Modificacion();
            $modificacion->setFechamod(new \DateTime('now'));
            $modificacion->setEntidad('Usuario');
            $modificacion->setTipo('uupdate');
            $securityContext = $this->container->get('security.context');
            $modificacion->setEmpleado($securityContext->getToken()->getUser());
            $modificacion->setInfo('hi');
            $em->persist($modificacion);
            $classMetadata = $em->getClassMetadata(get_class($modificacion));
            $em->getUnitOfWork()->computeChangeSet($classMetadata, $modificacion);
        }
    }
} 
```

在 中`config.yml`，我有：

```
listenercrud:
    class: mio\mioBundle\ListenerCrud
    arguments: [@service_container]
    tags:
        - { name: doctrine.event_listener, event: PreUpdate} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-05T08:02:06.817

YAML 文件中的事件名称应该是“preUpdate”，而不是“PreUpdate”。

```
listenercrud:
    class: mio\mioBundle\ListenerCrud
    arguments: [@service_container]
    tags:
        - { name: doctrine.event_listener, event: preUpdate } 
```

# iphone - 以编程方式为 .xib 中的 UIScrollView 设置委托

> ID：12758754
> 
> 赞同：1
> 
> 时间：2012-10-06T10:00:34.453
> 
> 标签：iphone, objective-c, ios, xcode

我的 .xib 文件中有一个 UIView。（注意不是 UIControlView）

```
@interface OfferUIView : UIView 
```

所以我的 UIView 的自定义类是 OfferUIView

我想向它添加一个滚动视图。当我使用 xcode 功能添加它时，我只是将滚动视图的委托连接到 OfferUIView。如何在 OfferUIView.m 中以编程方式执行此操作？

这就是我所写的：

```
self.scrollView = [[UIScrollView alloc] initWithFrame: frame];
self.scrollView.delegate = self; 
```

但我收到这样的警告`delegate = self`：

```
Assigning to id<UIScrollViewDelegate> from incompatible type OfferUIView 
```

你知道我该如何解决吗？

编辑：

当我使用

```
@interface OfferUIView : UIView <UIScrollViewDelegate>

self.pageViews = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < pageCount; ++i) {
        [self.pageViews addObject:[NSNull null]];
    }

    CGRect frame = self.view.bounds;
    self.scrollView = [[UIScrollView alloc] initWithFrame: frame];
    CGSize pagesScrollViewSize = self.view.frame.size;
    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * self.pageImages.count, pagesScrollViewSize.height);
    self.scrollView.delegate = self; 
```

它应该是 UIScrollView 中的几个图像，但滚动不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:44:18.573

```
scrollView =[[UIScrollView alloc]initWithFrame:CGRectMake(10, 402, 750, 600)];
scrollView.delegate = self;
scrollView.scrollEnabled = YES; 
[self.view addSubview:scrollView];
[scrollView setContentSize:CGSizeMake(654, ([reports_list count]+1)*110)]; 
```

它对我有用……试试吧……然后忽略框架。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T10:04:42.410

您必须指定您的类应符合[UIScrollViewDelegate](http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)。

```
@interface OfferUIView : UIView <UIScrollViewDelegate> 
```

# jsf-2 - 如果页面位于不同的路径中，我如何访问闪存范围变量？JSF 2.1

> ID：12758756
> 
> 赞同：0
> 
> 时间：2012-10-06T10:00:36.420
> 
> 标签：jsf-2, flash-scope

如果视图路径不同，为什么无法访问闪存范围变量？

我有源页面：

```
/pages/order/order_view.jsf 
```

目标页面位于不同的路径中：

```
/pages/offer/offer_edit.jsf 
```

我在 order_view.jsf 页面上提交后设置了 flash 变量，但是当我重定向到 offer_edit.jsf 时，flash 范围变量已经丢失。

如果我将两个页面放在同一路径中，我可以在重定向后访问闪存范围变量；

```
/pages/order/order_view.jsf
/pages/order/offer_edit.jsf 
```

如果我将页面放在不同的路径中，是否可以在重定向后访问闪存范围变量？它们存储在哪里，是 cookie 吗？

我正在使用 javax.faces-2.1.13.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:30:14.437

这是一个已知错误，报告为[问题 2136](http://java.net/jira/browse/JAVASERVERFACES-2136)，并在 Mojarra 2.1.14 中修复。

# visual-studio-2010 - TFS + VS 2010 是否支持离线工作和在线时智能协调？

> ID：12758758
> 
> 赞同：1
> 
> 时间：2012-10-06T10:00:50.710
> 
> 标签：visual-studio-2010, merge, checkin

我正在使用**Visual Studio 2010 Ultimate Ed**。它与**TFS Server 2010**挂钩。我可以简单地“获取最新”我的解决方案，将我的工作模式更改为“离线工作”并在周末在家工作。

当我回到办公室时，我应该能够切换回“在线工作”，TFS 应该会处理我应该签出的所有文件并帮助我**协调**。我无法想象离线时我将处理哪些文件。

这可以在我的设置中以直接的方式实现吗？

*排除了对 TFS 的远程访问*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:49:14.763

这将正常工作 - 如果 Visual Studio 无法连接到您的 TFS 服务器，它将自动切换到离线模式。重新连接后，您可以让它在线工作，然后签入您已更改的文件（每次签入一次几个或作为一个完整的捆绑包）。它将跟踪哪些已被编辑。

它可能会在打开文件时通知您它们是只读的，但这似乎与它如何确定哪些已更改有关，并且您可以在打开它们时覆盖每个文件。我建议不要删除任何您不更改的只读属性。

在您依赖它之前可能值得对其进行模拟，以便您在工作时通过断开网络来了解它的工作原理。

# java - CGContextSetBaseCTM 无效上下文 0x0

> ID：12758762
> 
> 赞同：51
> 
> 时间：2012-10-06T10:01:29.540
> 
> 标签：java, macos

我目前正在开发一个 Java 应用程序。
由于我没有`OSX`电脑，我已经从这个应用程序的论坛/社区中获得了一些人的帮助。
但是当应用程序在`OSX`.

```
Oct 5 15:26:58 ###-macbook-pro.local java[2384] <Error>: CGContextGetCTM: invalid context 0x0   
Oct 5 15:26:58 ###-macbook-pro.local java[2384] <Error>: CGContextSetBaseCTM: invalid context 0x0   
Oct 5 15:26:58 ###-macbook-pro.local java[2384] <Error>: CGContextGetCTM: invalid context 0x0   
Oct 5 15:26:58 ###-macbook-pro.local java[2384] <Error>: CGContextSetBaseCTM:      invalid context 0x0    
2012-10-05 15:26:59.590 java[2384:11517] Make pbuffer: 0 x 0   
2012-10-05 15:26:59.657 java[2384:2007] invalid drawable 
```

显然，由于我没有`OSX`计算机，因此很难调试这样的问题，所以我希望你们中的一个聪明人能够洞察我这个问题是由什么引起的，以便我可以着手修复它。如果您可能需要任何其他信息，请告诉我，我可以尝试让使用`OSX`计算机的人来获取它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-22T18:42:28.953

当在以下位置调用[JFrame.setIconImage(Image)](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setIconImage%28java.awt.Image%29)时，此错误发生在`OSX Lion >=10.7.4`(not on ) ：`<=10.7.3`

> 带有 Java 1.6.0_65-b14-462-11M4509 的 OSX 10.7.5

以及（如 Apple [**Mac OS X v10.7 Lion**支持社区](https://discussions.apple.com/message/18360029#18360029)和[**java-dev** list 中](http://lists.apple.com/archives/java-dev/2013/Aug/msg00015.html)所讨论的）：

> 带有 Java 1.6.0_51-b11-457-11A459 的 OSX 10.7.4
> 
> 带有 Java 1.6.0_31 的 OSX 10.7.4
> 
> 带有 Java 1.7.0_04 的 OSX 10.7.4

它不会发生在：

> 带有 Java 1.6.0_51-b11-457-11M4509 的 OSX 10.8.4

鉴于上述信息，此错误是 OSX >=10.7.4 和 <10.8 的本机窗口实现中的错误，而不是 Java 中的错误。

我试图通过调整设置 JFrame 图标的时间来解决这个问题，但是调用该方法的时间并不重要，如果使用`JFrame.setIconImage`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T17:18:31.690

您没有提供太多关于代码中发生这种情况的信息。在 Mac 上，当您看到这一点时，通常是因为您试图在没有图形上下文的情况下绘制。

在 Java 中，我认为在 JPanel 或其他 JComponent 中绘制某些东西时可能会发生这种情况。例如，向其中添加图像时。

据我所知，OS X 上的 Java JDK 是由 Apple 提供的。对于我所阅读的内容，这是 Apple 尚未解决的已知问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T23:47:54.287

当我查看输出时，单词“context”、“buffer”和“drawable”，以及以 CG（意思是 Core Graphics）开头的各种东西，铃声响起，表明它必须与您的程序使用 GUI 的事实。当您的程序尝试要求 Mac OS 显示 GUI 时，它似乎崩溃了。

您实际上是在计算机上，而不是通过网络使用它吗？如果是这样，您是否从终端启动程序？如果是，请确保您没有以其他人身份登录。还有一百万个其他问题可能导致这种情况，而我只是触及了表面。作为 Mac OS 框架方面的专家，我只有一个建议：尝试获取 Java 更新。

# algorithm - 推荐的从边缘到边缘的最短路径算法

> ID：12758763
> 
> 赞同：2
> 
> 时间：2012-10-06T10:01:36.270
> 
> 标签：algorithm, graph, graph-algorithm

我有一个用于移动应用程序的棋盘游戏，显示在此链接中：http: [//i45.tinypic.com/23u8u1h.png](http://i45.tinypic.com/23u8u1h.png)

起点可以是任何单元格。获胜者是垂直（绿色玩家）或水平（红色玩家）连接他/她的人。

节点是彩色单元格。白细胞可以被认为是重量吗？我不知道如何实现它，但是当我想到 Dijkstra 算法时，我相信当板子处于这种状态时，它需要花费很多时间来计算直到它得到正确的答案：[http://i50。 tinypic.com/35ivofd.png](http://i50.tinypic.com/35ivofd.png)（我必须在这四个绿色单元格上应用算法）

我想要一种算法，它告诉我“ [http://i48.tinypic.com/28c2ijl.png](http://i48.tinypic.com/28c2ijl.png) ”黑色、棕色、蓝色和紫色路径是合理时间内最短的路径。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:14:50.850

我认为 Dijkstra 在这里工作得很好，特别是与用于连接彼此相邻的字段并填充白色以外的颜色的[联合查找算法结合使用。](http://www.algorithmist.com/index.php/Union_Find)通向白场的边花费 1，通向己方场的边花费 0，通向敌方场的边花费无穷大（例如*mn*）。然后，您不会在代表单个字段的节点上运行 Dijkstra，而是在这些字段的*联合*（非白色字段的集群）上运行。

Dijkstra 将在这里工作大约*O(mn log^2(mn))*，其中*n*和*m*是棋盘的尺寸，Union Find 将在*O(log mn)*时间内通过简单的优化工作，在链接的底部提到文章。

# android - 使用父级获取可绘制资源

> ID：12758768
> 
> 赞同：11
> 
> 时间：2012-10-06T10:02:10.260
> 
> 标签：android, styles, drawable

当我定义一个样式时，它可以从父样式继承，例如：

```
<style name="DialogNoTitle" parent="@android:style/Theme.Dialog">
    <item name="android:windowNoTitle">true</item>
</style> 
```

现在我想对可绘制资源做同样的事情，如下所示：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" name="ChildDrawable" parent="@drawable/ParentDrawable">
    <solid android:color="@android:color/white"/>
    <corners android:radius="6dp"/>
</shape> 
```

有没有办法完成这个功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T10:47:27.040

简短的回答 - 你不能扩展和覆盖绘图。然而，

*   一些drawables可以从其他drawables创建。例如 layer-list 将允许您在另一个之上绘制可绘制的图层。请参阅[http://developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)。
*   您在代码中创建 Drawable 对象。

# oracle - 尝试使用hibernate 4和spring 3坚持到oracle db但没有成功。测试通过，但数据未保留。

> ID：12758769
> 
> 赞同：2
> 
> 时间：2012-10-06T10:02:11.350
> 
> 标签：oracle, spring, hibernate, transactionmanager

我正在尝试使用休眠 4 和 Spring 3 实现一个简单的 DAO。

当我尝试在数据库中保存或删除一行时，事务不会持久化。我已经包含了一些代码来显示如何保存在 db 中不起作用：

我有一个 junit 测试，它只是尝试将 StockEntityDTO 保存在数据库中。

```
@RunWith(SpringJUnit4ClassRunner.class)
public class StocksDAOImplTest extends
    AbstractTransactionalJUnit4SpringContextTests {

@Autowired
protected StocksDAO stockDao;

@Test
public void shouldInsertIntoDatabase() {
    BigDecimal price = new BigDecimal(653.50);
    StockEntityDTO savedStock = new StockEntityDTO("GOOG", price, "google");
    stockDao.create(savedStock);
    StockEntityDTO retrievedStock = stockDao.getById(savedStock.getId());
    assertEquals(savedStock, retrievedStock);
} 
```

测试通过，但预期的行（1，“GOOG”，653.50，“google”）未保存在数据库中。

DAO 看起来像这样：

```
@Transactional
public abstract class AbstractHibernateDAO<T extends Serializable> {

private Class<T> clazz;

@Resource(name = "sessionFactory")
private SessionFactory sessionFactory;

public void setClazz(final Class<T> clazzToSet) {
    this.clazz = clazzToSet;
}

public void create(final T entity) {
    Session session = this.getCurrentSession();
    session.save(entity);

} 
```

应用环境：

```
<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="oracle.jdbc.OracleDriver" />
    <property name="url" value="jdbc:oracle:thin:@localhost:1521:orcl" />
    <property name="username" value="gtp" />
    <property name="password" value="gtp" />
</bean>

<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.ubs.gtp.data.domain" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.OracleDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.current_session_context_class">org.springframework.orm.hibernate4.SpringSessionContext
            </prop>
        </props>
    </property>
</bean> 
```

希望有人可以提供帮助。从我的代码中可能很明显，我对 spring 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:14:59.507

`AbstractTransactionalJUnit4SpringContextTests` rolls back after the test. Try setting a breakpoint at the last line and then inspecting the database. You can use the `Rollback` annotation if you don't want this default behaviour.

# gwt - 在 gwt 项目的目标 build-war-deploy 之后，Ant 脚本停止执行目标

> ID：12758772
> 
> 赞同：1
> 
> 时间：2012-10-06T10:03:13.283
> 
> 标签：gwt, ant

我有一个 ant 脚本，它在开始时进行一些检查，然后编译代码并将其部署到 tomcat 服务器。build-war-deploy 过程的脚本如下所示：

```
<target name="build-war-deploy" depends="clean-up,gwtc,check-settings" description="Package GWT app to web archive and deploy to web server">
<war basedir="${war.dir}" destfile="${deploy.dir}/${app.name}.war" webxml="${webinf.dir}/web.xml">
<!-- <include name="WEB-INF/**" /> -->
<webinf dir="${webinf.dir}/">
<include name="**/*.jar" />
</webinf>
</war>
</target> 
```

这个目标工作得很好，这意味着在运行 ant 脚本之后，应用程序确实部署在 tomcat 上。

在 build-war-deploy 目标之后，我需要进行一些清理过程，因此我创建了一些其他目标，并向 build-war-deploy 目标添加了一个依赖项，以便之后执行它。

```
<target name="cleanup" depends="build-war-deploy" description="clean up processes">
<exec dir="./" executable="python" failonerror="true">
    <arg line="deploy_cleanup.py ${app.name}" />
</exec>
</target> 
```

但是，在 ant 脚本执行 build-war-deploy 目标后，它会停止并说构建成功。有谁知道为什么它没有执行最后一个目标？

```
build-war-deploy:
      [war] Building war: C:\Apache Tomcat\apache-tomcat-6.0.33\webapps\test.war
BUILD SUCCESSFUL
Total time: 2 minutes 22 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:42:28.830

我会尝试使用输出属性。也许 python 文件正在执行——不是做你想做的，而是执行并返回你从未见过的结果。我的意思是如果 python 脚本返回一条错误消息，ant 不认为它成功执行了吗？

就像是：

```
<exec dir="./" executable="python"  outputproperty="outProp" failonerror="true">
    <arg line="deploy_cleanup.py ${app.name}" />
</exec>
<echo>${outProp}</echo> 
```

outputproperty：应该存储命令输出的属性的名称。除非错误流被重定向到单独的文件或流，否则此属性将包括错误输出。

# android - 将 JSON 数据发布到 Android 中的网络服务器时出现 406 错误？

> ID：12758778
> 
> 赞同：1
> 
> 时间：2012-10-06T10:04:23.233
> 
> 标签：android, json, web-services

我正在为 基于**drupal**的网站的 crate 应用程序工作。在这里，我面临从应用程序到 Web 服务器的发布页面的问题。

当我发布标题和正文时，只有标题出现在服务器上，但正文没有出现。这里我的正文部分变成了**`json`**格式。

下面的 JSON 格式完美地适用于 firefox 的海报插件，它成功地将数据写入服务器，所以现在我的问题是为相同的任务编写 android 代码。

```
{
 "type":"page",
 "title":"TITLE TESTING",
 "body":{
   "und":[
   {
    "value":"BODY TESTING"
   }
  ]
 }
} 
```

我试过这样：

```
 List<NameValuePair> params = new ArrayList<NameValuePair>();

    params.add(new BasicNameValuePair("type","page"));
    params.add(new BasicNameValuePair("title",title));
   params.add(new BasicNameValuePair("body", ""+jSONCategory.toString()));
 //  value of the jSONCategory.toString() : {"und":[{"value":"body_part"}]}

System.out.println("============@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"+params); 
```

当我打印参数的值时，我会像这样显示：

```
[type=page, title=title_part, body={"und":{"value":"body_part","format":"full_html"}]}] 
```

当我只通过身体部分时，它会给我**状态码 406**，而对于标题，它与**200 状态码完美搭配**

在这里我的问题是如何将**字符串 + json**两者结合到服务器。这里标题部分是`String variable`，正文部分是 json 变量`enter code here`

谢谢。

编辑：

```
 JSONCategory = new JSONObject();
  JSONBody = new JSONObject();

 JSONObject Jsonvalue = new JSONObject();
                    Jsonvalue.put("value", body);

                    JSONArray jsonUnd = new JSONArray(); 
                    jsonUnd.put(Jsonvalue);

                    JSONCategory.put("und", jsonUnd);

                    JSONBody.put("type", "page");
                    JSONBody.put("title", title);
                    JSONBody.put("body", JSONCategory);

                    System.out
                            .println("WHOLE JSON OBJECT ====================>"
                                    + JSONBody.toString()); 
```

日志猫：

```
 WHOLE JSON OBJECT ====================>{"type":"page","body":{"und":[{"value":"body"}]},"title":"title"} 
```

JAVA代码

```
@Override
    public Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        String url = "url here";

        // strResponse1= postData(url,title,JSONCategory);
        postData(url, JSONBody);

        System.out.println("=========> Response from post  idea => "
                + strResponse1);

        return null;
    }
 -------------------------------------------------------------------------------

     protected void  postData(final String url, final JSONObject mainJSON) {

            Thread t = new Thread(){
            public void run() {
                    Looper.prepare(); //For Preparing Message Pool for the child Thread
                    HttpClient client = new DefaultHttpClient();
                    HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
                    HttpResponse response;

                    try{
                        HttpPost post = new HttpPost(url);

                        StringEntity se = new StringEntity(mainJSON.toString());  
                        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                        post.setEntity(se);
                        response = client.execute(post);
                        /*Checking response */
                        if(response!=null){
                            InputStream in = response.getEntity().getContent(); //Get the data in the entity
                        }

                    }
                    catch(Exception e){
                        e.printStackTrace();
                        //createDialog("Error", "Cannot Estabilish Connection");
                    }
                    Looper.loop(); //Loop in the message queue
                }
            };
            t.start();      

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:30:52.067

使用内置 JSON API 而不是列表。在您的情况下，从最里面的对象遍历到最外面的对象，它看起来像这样：

```
JSONObject j4=new JSONObject(); 
j4.put("value",test_value); 

JSONArray j3=new JSONArray(); 
j3.put(0,j4); 

JSONObject j2=new JSONObject(); 
j2.put("und",j3);

JSONObject j1=new JSONObject(); 
j1.put("type","page");
j1.put("title",title_string); 
j1.put("body",j2); 
```

然后，`j1.toString();`将为您提供所需的 json 字符串以供输出。

然后您可以使用标准的 HTTP POST 将其发送到服务器（使用线程将网络代码从您的 UI 线程中移除），如下所示：

```
protected void sendJson(JSONObject j1) {
        Thread t = new Thread(){
        public void run() {
                Looper.prepare(); //For Preparing Message Pool for the child Thread
                HttpClient client = new DefaultHttpClient();
                HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
                HttpResponse response;

                try{
                    HttpPost post = new HttpPost(URL);

                    StringEntity se = new StringEntity( j1.toString());  
                    se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                    post.setEntity(se);
                    response = client.execute(post);
                    /*Checking response */
                    if(response!=null){
                        InputStream in = response.getEntity().getContent(); //Get the data in the entity

                }
                catch(Exception e){
                    e.printStackTrace();
                    createDialog("Error", "Cannot Estabilish Connection");
                }
                Looper.loop(); //Loop in the message queue
            }
        };
        t.start();      
    } 
```

# java - Java 和最终初始化

> ID：12758781
> 
> 赞同：0
> 
> 时间：2012-10-06T10:05:04.053
> 
> 标签：java

我正在从.NET“转换”到Java。我想知道为什么下面的代码不起作用

```
class MyClass{
  private final int intVar;  //ok
  private final Paint paint; //error "Variable paint might not have been initialized"

  public MyClass(){
       intVar = 12; 
       initializePaint(); 
  }

  private void initializePaint(){
       paint = new Paint();  //error  "cannot assign a variable to final variable"
  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T10:14:23.743

您应该在类或构造函数中声明的位置初始化最终字段。

在构造函数中允许对最终字段进行初始化，因为在创建对象时只调用一次构造函数。

当你在方法中初始化它时`initializePaint()`，你会得到编译器错误，因为这个方法可以被多次调用并且最终变量/字段是常量并且不能改变。由于您将多次调用`initializePaint()`方法，因此多次初始化最终字段是错误的。因此编译器会给出一个错误。

```
class MyClass{
  private final int intVar;  //ok
  private final Paint paint;// paint = new Paint(); to avoid //error "Variable paint might not have been initialized"

  public MyClass(){
       intVar = 12; 
       //initializePaint(); 
       paint = new Paint(); // here initialized And allowed.
  }

  private void initializePaint(){
       paint = new Paint();  //error  "cannot assign a variable to final variable"
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T10:13:08.853

因为 initializePaint() 方法可以从任何地方调用，而不仅仅是构造函数。Java 编译器希望确保最终变量在构造函数中只分配一次。因此，您必须将分配移至构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T10:09:46.217

类的最终实例变量必须在构造函数的范围内实例化。将对象的初始化移至构造函数并在初始化方法中`Paint`使用 getter 。`getPainter`

BTW +1 用于使用最终变量。这是一个很好的编码习惯。IMO Java 应该有一个变量的“可变”关键字，并且默认为 final。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T10:13:38.520

变量仅在该`final`变量减速时初始化，或者您也可以通过构造函数对其进行初始化。

前任：

```
class MyClass{
 private final int intVar;  
  private final Paint paint; 

  public MyClass(){
   intVar = 12; 
   paint= new Paint(); 
 }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T19:09:47.103

在您的代码中，您没有初始化最终变量。此变量称为 BLANK FINAL 变量。现在你必须在构造函数中初始化它。否则你会得到错误，因为变量的值为空。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T10:08:32.927

编译器看到您`initializePaint()`在构造函数上调用了该方法，但没有看到该方法会设置`paint`变量。您需要`paint`在构造函数中显式设置字段，例如：

```
class MyClass{
  private final int intVar;  //ok
  private final Paint paint; //error

  public MyClass(){
       intVar = 12; 
       paint= new Paint(); 
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T10:09:55.437

所有最终变量的初始化必须在构造函数中进行，而不是在构造函数调用的方法调用层次结构中的某个位置（如`initializePaint()`您的情况）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-06T10:09:55.607

`final`意味着一旦分配，您不能重新分配它，您需要在构造函数中分配它。所以你不能有一个方法重新分配`paint`

编辑：一些阅读：[http://en.wikipedia.org/wiki/Final_(Java)](http://en.wikipedia.org/wiki/Final_(Java))

# objective-c - 如何使用情节提要设置 UIView init 的大小？

> ID：12758782
> 
> 赞同：3
> 
> 时间：2012-10-06T10:05:03.143
> 
> 标签：objective-c, ios, uiview, uistoryboard

我目前使用的是 iOS 6.0。

我有一个`UIView`需要有一定尺寸的定制。如果我以编程方式初始化视图并添加它就可以了。但是，我找不到可以在情节提要中设置视图大小的地方。

在情节提要中设置其大小不起作用，因为情节提要认为它是空的并将其大小设置为零。将其大小设置为`viewDidLoad`or`viewDidAppear`不起作用，因为稍后该大小将被`_applyISEngineLayoutValue`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:51:59.720

您可以在 Interface Builder 中执行此操作。打开您有视图的情节提要并打开实用程序菜单：

![在此处输入图像描述](../Images/b0bfb18de0a596b4d9a72faadd33c2c9.png)

然后，您可以在实用程序菜单的顶部选择一个看起来像标尺的按钮：

![在此处输入图像描述](../Images/59f8d2e76597e65536a2ab6164ebc07a.png)

在该菜单中，您可以设置视图的大小以及您希望它如何扩展。

另外，请确保您在班级检查器中设置了班级视图：

![在此处输入图像描述](../Images/63d73a916422c1fd8a96a067f97479b8.png)

[此站点](http://sketchytech.blogspot.pt/2012/02/assigning-classes-to-storyboard-view.html)的图像令牌。

最后，确保你重写了`initWithFrame`and`initWithCoder`方法：

```
- (id)initWithFrame:(CGRect)frame {
    return [super initWithFrame:frame];
}

//Needs to be overrided when you set your size in interface builder
- (id)initWithCoder:(NSCoder *)aDecoder {
    return [self initWithFrame:[self frame]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:05:25.470

我面临同样的问题，我认为简短的回答是：在使用情节提要时，您不能依赖视图的 init 方法中的框架或边界。

当您的视图被 segue 初始化时，它将调用 initWithCoder: 方法而不是其他 init 方法，因为它正在从 .xib 文件中反序列化您的视图对象。在情节提要之前，框架和边界将在调用 initWithCoder: 时设置，但情节提要似乎不再是这种情况——iOS 代码稍后会设置这些值。

根据情况，我使用了几种解决方法：

1.  如果我事先知道视图的大小（例如只支持一种大小的特殊视图），我会在 initWithCoder: 方法中设置自己的框架。

2.  如果我不知道视图的大小，我会推迟特定大小的初始化，直到调用我的视图的 layoutSubviews 方法。

3.  如果更方便，我有时只是在视图的 ViewController 中显式地执行特定于大小的初始化。（不漂亮，但有时又快又容易。我并不自豪。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T03:29:53.807

我和你有同样的问题，当我选择视图并切换到属性检查器时，如下设置“模拟指标”，我可以在尺寸检查器中调整视图的大小。

确保将 Size 设置为“Freeform”或“None”

![模拟指标](../Images/5b12d3f162eaec9bae8c8f3bfb3067aa.png)

# c# - 如何从 C# 中的多个应用程序配置文件中读取值？

> ID：12758784
> 
> 赞同：2
> 
> 时间：2012-10-06T10:05:29.147
> 
> 标签：c#, app-config, config

我的项目中有两个不同`application configuration`的文件。我需要在我的代码中从这两个`config`文件中读取值。搜索了很多，发现大部分答案都是：使用`ConfigurationManager`. 但我无法读取`config`代码中的第二个文件。请帮助解决这个问题。

示例：1\. `app1.config` 2.`app2.config`

如何读取的值`app2.config`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:11:33.780

该应用程序将使用名为 YourExcecutable.exe.config 的配置文件，默认情况下，该文件是包含在您的（可执行）项目中的文件 App.config。请注意，.NET 只为整个应用程序加载一个配置文件。您不能在不编码的情况下使用多个配置文件（即每个库项目一个）。

1.  您可以使用构建后事件和不同的解决方案配置将一个或另一个 App.Config 文件复制到输出文件夹

2.  您可以使用 ConfigurationManager 类通过代码加载备用配置文件。

参考：

[处理多个配置文件](http://www.codeproject.com/Articles/5606/Handle-multiple-configuration-files)

[使用预构建事件管理多个配置文件环境](http://www.hanselman.com/blog/ManagingMultipleConfigurationFileEnvironmentsWithPreBuildEvents.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:14:15.023

从未在 .NET 中使用过 app.config，但另一种解决方案是使用 System.Xml 命名空间中的 Xml(XmlReader, XmlWriter)，您可以为 Configuration 创建一个标签并使用任意数量的配置，所有这些都在一个文件中。例如

```
<Configuration name="app1">

//here you would have your 1 configuration
</Configuration>

<Configuration name="app2">

//here you would have your 2 configuration
</Configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:30:09.640

Atlast 我找到了处理的方法`multiple configuration files`，唯一的方法是在主`app.config`文件中使用 SECTION 处理。

最好的方法是首先了解 .NET 配置。最好的来源是[http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-2-0-Configuration](http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-2-0-Configuration)

第一次真的很难理解，一旦你清楚了这个想法，你就可以在 .NET 中使用配置文件创造奇迹。这是我在整个互联网上找到的唯一解决方案。

谢谢，快乐编码。

# javascript - IE强制进入兼容模式

> ID：12758785
> 
> 赞同：1
> 
> 时间：2012-10-06T10:05:32.160
> 
> 标签：javascript, internet-explorer-8, ie8-compatibility-mode

我有一个包含超过 1500 个复选框的弹出窗口，在用户关闭弹出窗口时选中复选框后，选中的复选框列表会填充在主页上。此功能运行良好。当用户选择大量复选框时会出现问题，例如超过 600-700 个复选框，在这种情况下，大量的 HTML 被注入到 DOM 中。这会强制 IE 进入兼容模式。有没有人遇到过这样的情况？我该如何解决？删除此功能或减少复选框的数量不是一种选择。

注入 HTML 的非常简单的代码：

```
$("#" + DestDiv).html(listString); 
```

生成的 HTML 是完美的，我交叉检查了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:11:25.193

要使**Internet Explorer**不进入兼容模式，请使用`<!DOCTYPE ...>`

如果您不确定，最好使用此文档类型。

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:26:43.070

1500个复选框？！？什么...

*   关于[SO上的 Doctype 声明的长答案](https://stackoverflow.com/a/7685060/488861)

我还没有听说过强制兼容模式的大小限制。你不认为这是因为你在服务器上测试一次，在本地测试一次吗？

干杯

# django - 重定向/返回到Django中的相同（上一个）页面？

> ID：12758786
> 
> 赞同：72
> 
> 时间：2012-10-06T10:06:02.633
> 
> 标签：django, django-views

当您想将用户返回到 Django 中的同一页面时，有哪些选项，每个选项的优缺点是什么？

我知道的方法：

*   HTTP_REFERER
*   包含前一个 URL 的 GET 参数
*   用于存储先前 URL 的会话数据

还有其他的吗？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-10-06T10:14:44.357

一种方法是使用`HTTP_REFERER`如下标头：

```
from django.http import HttpResponseRedirect

def someview(request):
   ...
   return HttpResponseRedirect(request.META.get('HTTP_REFERER')) 
```

不确定这个的缺点！

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-10-18T14:48:03.087

虽然问题和答案很旧，但我认为它缺乏一些选择。我没有发现这些方法有任何缺点，我很乐意知道是否有任何缺点？

*   [request.path_info](https://docs.djangoproject.com/en/1.11/ref/request-response/#django.http.HttpRequest.path_info)
*   [request.get_full_path()](https://docs.djangoproject.com/en/1.11/ref/request-response/#django.http.HttpRequest.get_full_path)
*   [request.build_absolute_uri()](https://docs.djangoproject.com/en/1.11/ref/request-response/#django.http.HttpRequest.build_absolute_uri)

    ```
    from django.shortcuts import redirect

    redirect(request.path_info) # No query parameters

    redirect(request.build_absolute_uri()) # Keeps query parameters

    redirect(request.get_full_path()) # Keeps query parameters 
    ```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2019-06-24T09:27:46.370

100% 工作示例

对于基于类的视图和功能：

```
from django.http import HttpResponseRedirect
    ...
    return HttpResponseRedirect(request.META.get('HTTP_REFERER')) 
```

或者

```
from django.http import HttpResponseRedirect
    ...
    return HttpResponseRedirect(self.request.META.get('HTTP_REFERER')) 
```

例子 -

```
class TaskNotificationReadAllView(generic.View):

    def get(self, request, *args, **kwargs):
        TaskNotification.objects.filter(assigned_to=request.user).update(read=True)   
        print(request.META.get('HTTP_REFERER'))    
        return HttpResponseRedirect(request.META.get('HTTP_REFERER')) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-08T22:40:28.840

在 django 视图中，假设您未登录，但单击某些内容触发某些 url 的内容，例如 /board/2/new_topic 然后 @login_required 将使用此 url 将您重定向到登录页面

http://localhost:8000/signin/?next=/boards/2/new_topic/

所以我们的目标是在成功登录后重定向到 http://localhost:8000/boards/2/new_topic/ 页面所以我们必须添加一行

```
 if 'next' in request.GET:
        return redirect(request.GET['next']) 
```

然后如果它下一个在那里，那么它将根据其他正常重定向重定向。

视图.py：

```
def signin(request):
if request.method == "POST":
    user_login_form = UserLoginForm(request.POST)
    email = request.POST['email']
    password = request.POST['password']
    user = authenticate(request, email=email, password=password)
    if user and user.is_active:
        login(request, user)
        if 'next' in request.GET:
            return redirect(request.GET['next'])
        else:
            return redirect('home')
    else:
        return render(request, 'signin.html', context={'form': user_login_form})
else:
    user_login_form = UserLoginForm()
    return render(request, 'signin.html', context={'form': user_login_form}) 
```

# r - 使 Rstudio 在 Ubuntu 上与自定义编译的 R 一起工作

> ID：12758789
> 
> 赞同：1
> 
> 时间：2012-10-06T10:06:23.473
> 
> 标签：r, ubuntu, rstudio

我首先通过 Ubuntu 软件中心安装了 R 2.14 和 R Commander。

然后我安装了 Rstudio，它在 R 2.14 上运行良好。

一段时间后，我想使用 R 2.15，但无法编译 R 2.15 源代码。

因此，我尝试了“sudo apt-get build-dep r-base”。之后我成功编译了 R 2.15，并安装了 R 2.15。

但是，现在 Rstudio 不断报告“找不到 R 共享库 (/usr/local/lib/R/lib/libR.so)。如果这是 R 的自定义构建，它是使用 --enable-R-shlib 构建的吗？选项？”

看来我应该使用选项--enable-R-shlib 重新安装 R 2.15。

但问题是我怎样才能卸载 R 2.15？

我试过“sudo apt-get autoremove r-base”，但 R 2.15 仍然适用于我的 Ubuntu。

关于如何使 Rstudio 与自定义编译的 R 一起工作的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:24:28.563

我自己找到了解决方案。

简而言之，我应该使用 make uninstall 删除 R 12.5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:08:23.610

你的方式太复杂了。

请参阅[CRAN 的 Ubuntu 二进制文件自述文件，](http://cran.r-project.org/bin/linux/ubuntu)以获取 2.15 二进制文件作为正确的`.deb`包。

这些将在路径中，具有适当的 Depends: 并且可以从命令行或通过 RStudio 工作。

# exception - 可能处理Bitmap加载和处理

> ID：12758790
> 
> 赞同：3
> 
> 时间：2012-10-06T10:06:43.100
> 
> 标签：exception, memory, xamarin.android

我是 monodroid 的新手，我在这里有两个杀手我希望有人能帮我解决：

我有一个单一的应用程序，它将图像上传到网络服务，图像来自设备相机或图片库。

首先是我使用以下代码从设备相机拍照：

```
var intent = new Intent(MediaStore.ActionImageCapture);
var availableActivities = this.PackageManager.QueryIntentActivities(intent, PackageInfoFlags.MatchDefaultOnly);

if (availableActivities != null && availableActivities.Count > 0)
{
    var dir = new Java.IO.File(
        Android.OS.Environment.GetExternalStoragePublicDirectory(
        Android.OS.Environment.DirectoryPictures), "myapp");

        if (!dir.Exists())
        {
            dir.Mkdirs();
        }

        _file = new Java.IO.File(dir, String.Format("image-{0}.jpg", Guid.NewGuid()));
        StaticDataHolder.ImageUri = Android.Net.Uri.FromFile(_file);

        intent.PutExtra(MediaStore.ExtraOutput, Android.Net.Uri.FromFile(_file));
        StartActivityForResult(intent, RESULT_CAMERA_CAPTURE);
} 
```

这段代码从 StaticDataHolder.ImageUri 读取缩放位图到 ImageView 控件中，以便用户可以确认天气是否使用所选图像：

```
Bitmap largeBitmap = null;
try
{
    image.SetImageBitmap(null);
    if (Bitmap != null)
    {
        Bitmap.Recycle();
        Bitmap.Dispose();
    }
    largeBitmap = MediaStore.Images.Media.GetBitmap(ContentResolver, StaticDataHolder.ImageUri);
    Bitmap = GetScaledImage(largeBitmap);
    SetImageFromBitmap(image, Bitmap);
    return true;
}
catch (Java.Lang.OutOfMemoryError)
{                
    return false;
}
finally
{
    if (largeBitmap != null)
    {
        largeBitmap.Recycle();
        largeBitmap.Dispose();
    }
} 
```

第二个问题是当用户确认选择的图像是从相机拍摄或从画廊中挑选出来的，我创建一个新的位图进行压缩并发送到我使用以下代码托管的 Web 服务：

```
byte[] buffer = null;

MemoryStream ms = null;
Bitmap bmp = null;

ms = new MemoryStream();
bmp = MediaStore.Images.Media.GetBitmap(ContentResolver, StaticDataHolder.ImageUri);

bmp.Compress(Bitmap.CompressFormat.Jpeg, 60, ms);
buffer = ms.GetBuffer();

ms.Dispose();
bmp.Recycle();
bmp.Dispose(); 
```

然后我将缓冲区传递给 Web 服务方法。

此代码将在我第一次启动应用程序时完美运行，但是当我尝试加载第二张图像时，我得到 OutOfMemoryError 异常并且图像未加载。

我如何加载位图并将其处理掉，以便避免此异常？请注意，这里的每一步都通过单独的活动进行管理：

1.拍摄或选择照片活动。2.确认选择的照片活动。3.加载所选照片并将其发送到网络服务活动。

据我所知，该活动在完成后被处置，因此默认情况下，其中使用的所有资源也将被处置，但在我的情况下，它似乎不是！

我已经搜索了 3 天没有运气，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:45:46.567

一般来说，位图在 Android 上是一个痛苦，因为它们存在于本机堆中并且不直接被垃圾收集，至少在 Android < 2.3.x 中是这样。您是否尝试过使用 BitmapFactory？

例如：

```
var opts = new BitmapFactory.Options() { InPurgeable = true, InInputShareable = true };
var bitmap = BitmapFactory.DecodeFile (pathToBitmap, opts); 
```

将导致结果位图在需要时从内存中清除（http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html）

# java - 从 Web 服务器到客户端的数据传输速率和数量

> ID：12758791
> 
> 赞同：0
> 
> 时间：2012-10-06T10:06:54.237
> 
> 标签：java, javascript, http, webserver, client

我正在编写一个在 tomcat 上运行的网络应用程序。我需要传输大约 25 kb 的数据（所有双倍/长值每 20 毫秒从服务器到客户端。）尝试为此使用服务器发送的事件，因为我只需要从服务器到客户端的单向通信通道。

在服务器端使用 java，在客户端使用 java 脚本。

请建议我在这里所说的是否有意义以及是否可以实现。

我是网络开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:48:07.560

你为什么不自己尝试一下 - 你会注意到 localhost 和实际网络之间的巨大差异：

Servlet（生成 25kb 大消息）：

```
import java.io.IOException;
import java.io.Writer;
import java.util.Random;
import javax.servlet.AsyncContext;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(name = "EventServlet", urlPatterns = {"/EventServlet"}, asyncSupported = true)
public class EventServlet extends HttpServlet {

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        response.setContentType("text/event-stream; charset=utf-8");
        response.setHeader("Cache-Control", "no-cache");
        response.setHeader("Transfer-Encoding", "Chunked");
        response.flushBuffer();
        final AsyncContext ctx = request.startAsync();
        ctx.setTimeout(0);

        ctx.start(new Runnable() {
            @Override
            public void run() {

                try {

                    Writer out = ctx.getResponse().getWriter();
                    for (;;) {
                        out.write("event: simpleEvent\n");
                        out.write("data:" + randomString(25000) + "\n\n");
                        ctx.getResponse().flushBuffer();
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    ctx.complete();
                }

            }
        });

    }
    private static final String AB = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    private static Random rnd = new Random();

    public static String randomString(int len) {
        StringBuilder sb = new StringBuilder(len);
        for (int i = 0; i < len; i++) {
            sb.append(AB.charAt(rnd.nextInt(AB.length())));
        }
        return sb.toString();
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    public String getServletInfo() {
        return "Short description";
    }
} 
```

索引.jsp：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>

        <div>Number of Messages</div>
        <div id="out">

        </div>
        <div>Messages per Second:</div>

        <div id="mean">

        </div>

    </body>

    <script type="text/javascript">

        var startTime = new Date().getTime();
        var counter = 0;

        var eventSource = new EventSource("EventServlet");

        eventSource.addEventListener('simpleEvent', function(event){
            counter++;
            document.getElementById("out").innerHTML=counter;

            var seconds = (new Date().getTime()-startTime)/1000;
            document.getElementById("mean").innerHTML=counter/seconds;
        },false);

    </script>
</html> 
```

# wcf - Monotouch 6.0.2：使用WCF服务时为什么不能序列化对象

> ID：12758793
> 
> 赞同：0
> 
> 时间：2012-10-06T10:07:03.660
> 
> 标签：wcf, xamarin.ios

我在monotouch（6.0.2）中使用带有BasicHttpBinding的WCF来使用.net WCF服务，我传递了3个类型为int，int，DishOrder（用户定义类型）的参数，在服务器站点中，它可以读取int 参数正确，但是用户定义的对象（dishOrder）总是为空，为什么？

我已经在用户自定义类型类中使用了[DataContract]属性标记。

在monotouch（客户端代码:)

```
[DataContract]
public class DishOrder2
{
    [DataMember]
    public int BillID { get; set; }
    [DataMember]
    public int TableID { get; set; }
}

public partial interface IMenuContract
{
    [OperationContract]
    int OpenTable(int tableID, int lastVerNo,DishOrder2 order);
}

public partial class MyServiceClient : ClientBase<IMenuContract>,IMenuContract  {
    public int OpenTable(int tableID, int lastVerNo,DishOrder2 order)
    {
        return Channel.OpenTable(tableID,lastVerNo,order);
    }   

    private partial class FDMenuServiceClientChannel
    {
        public  int OpenTable(int tableID, int lastVerNo,DishOrder2 order)
        {
            object[] _args = new object[3];

            _args[0]=tableID;
            _args[1]=lastVerNo;
            _args[2]=order;
            return (int)base.Invoke("OpenTable", _args);
        }
    }
} //end of public partial class FDMenuServiceClient 

   pulic void CallServiceTest()
  {
            using (MyServiceClient.serviceClient = MyServiceClient.CreateServiceClient ()) {
                  DishOrder2 test=new DishOrder2();
            test.BillID=123;
            test.TableID=456;
                serviceClient.OpenTable(111,222,test);
            }
  } 
```

在服务站点（.net 3.5）代码中：

```
[DataContract]
public class DishOrder2
{
    [DataMember]
    public int BillID { get; set; }
    [DataMember]
    public int TableID { get; set; }
}

[OperationContract]
int OpenTable(int tableID, int lastVerNo,DishOrder2 order);

    public int OpenTable(int tableID, int lastVerNo,DishOrder2 dishOrder)  //service implementation
    {
        try
        {
            //**---why the object:dishorder is null?** throw the nullref exception
            if (dishOrder.BillID>0)  ...                  
            //**tableID & lastVerNo is read OK 111,222**  
                  ...             
        }
        catch (Exception ex)
        {
            throw FaultException...            
         }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:51:50.307

As I cannot found the reason why cannot serialize the object automatic in monotouch, So I have to do serialization myself. It can work now, thanks all.

```
 public static string XmlSerialize<T>(T obj)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            XmlSerializer serializer = new XmlSerializer(typeof(T));
            serializer.Serialize(ms, obj);
            ms.Seek(0, SeekOrigin.Begin);
            using (StreamReader reader = new StreamReader(ms, Encoding.UTF8))
            {
                return reader.ReadToEnd();
            }
        }
    } 
```

# android - 查询字符串在 phonegap 2.1.0 for android 4.0 中不起作用

> ID：12758795
> 
> 赞同：-1
> 
> 时间：2012-10-06T10:07:05.563
> 
> 标签：android, cordova, query-string

我已经使用 phonegap 1.9.0 开发了 android phonegap 应用程序。它在 android 2.2 和 4.0 中运行良好。后来我更改了 phonegap 版本，目前我正在使用 phonegap 2.1.0。它在 android 2.2 中运行良好但在 android 4.0 我不能能够从一个页面导航到另一个页面，同时将值作为查询字符串传递。

这是我的代码：

```
function onClick()
{
var id="2";
window.open("index2.html?id="+id);
} 
```

索引2.html：

```
 function getQueryVariable(variable)
 {
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0;i<vars.length;i++) 
      {
  var pair = vars[i].split("=");
  if (pair[0] == variable) 
      {
  return pair[1];
      }
  }
 } 
```

获取 index2.html 中的值

```
 var id=getQueryVariable("id"); 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:19:46.173

我切换到 2.0.0 特别是由于以前版本和 android 4 中的查询字符串存在错误。尝试了 2.1.0，它又坏了。为什么我想升级？因为 2.0.0 存在摄像头问题，例如用户拍摄了应该显示在网页上的图片，并且不会触发成功功能或失败功能。尝试了 10、50 和 100 % 的图像质量。它适用于我的手机，但不适用于具有相同版本 Android 的其他手机。

# delphi - MSBuild 和多个 Delphi 版本

> ID：12758800
> 
> 赞同：2
> 
> 时间：2012-10-06T10:07:45.783
> 
> 标签：delphi, msbuild

我有一个项目需要构建两个可执行文件：一个在 Delphi XE2 下，一个在 XE3 下。我有一个构建每个版本的构建脚本（即一个用于 XE2 的脚本和一个用于 XE3 的脚本）。

如果我为我运行的最后一个版本的 IDE 运行构建脚本，一切正常（即运行 Delphi XE2、构建应用程序、运行 XE2 构建脚本）。

但是，如果我在运行不同版本的 IDE 后运行构建脚本，我会在我的应用程序启动后立即获得一个 AV（即运行 Delphi XE2、构建应用程序、运行 XE3 构建脚本）。

看起来构建脚本的某些内容正在被 IDE 缓存/修改，我需要为我想要构建的版本恢复适当的数据。我已经用 .dproj 试过这个，但没有运气。

或者它可能正在加载表单资源 - 如果 IDE 在启动时由于不存在的属性，两个版本都会显示错误。如果是这样，是否有一种简单的方法可以解决这个问题而无需维护所有 .fmx 文件的多个版本？

这是一个示例构建脚本：

```
set path=%path%;c:\Windows\Microsoft.NET\Framework\v3.5
set path=%path%;c:\Program Files (x86)\Embarcadero\RAD Studio\10.0
set path=%path%;c:\Documents and Settings\All Users\Documents\RAD Studio\10.0
set BDS=c:\Program Files (x86)\Embarcadero\RAD Studio\10.0
set FrameworkDir=c:\Windows\Microsoft.NET\Framework\
set FrameworkVersion=v3.5

set failed=false
cd \myprogs\monkeystyler
msbuild monkeystyler.dproj /t:build /p:config=full||set failed=true
cd build
if not %failed%==true goto Done

echo ****FAILED TO BULD MONKEYSTYLER
****
Pause
exit

:done 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T16:53:19.520

让我们看一下 XE3 脚本中的这一行：

```
set path=%path%;c:\Program Files (x86)\Embarcadero\RAD Studio\10.0 
```

我的猜测是您在 XE2 脚本中使用以下命令进行跟踪：

```
set path=%path%;c:\Program Files (x86)\Embarcadero\RAD Studio\9.0 
```

此时您的路径变量如下所示：

```
set path=%path%;c:\Program Files (x86)\Embarcadero\RAD Studio\10.0;c:\Program Files (x86)\Embarcadero\RAD Studio\9.0 
```

所以第二个脚本失败了，因为第一个脚本的路径出现得更早。

解决此问题的优雅方法是在您的脚本中使用[`setlocal`](http://technet.microsoft.com/en-us/library/bb491001.aspx)和[`endlocal`](http://technet.microsoft.com/en-us/library/bb490898.aspx)将它们彼此隔离。

```
setlocal
set path=%path%;c:\Windows\Microsoft.NET\Framework\v3.5
set path=%path%;c:\Program Files (x86)\Embarcadero\RAD Studio\10.0
.....
endlocal 
```

解决它的hacky方法是设置这样的路径：

```
set path=c:\Program Files (x86)\Embarcadero\RAD Studio\10.0;%path% 
```

请使用优雅的方法！

* * *

此外，您应该使用 pushd 和 popd 来隔离每个脚本的目录更改。

如果这不能解决所有问题，请提供更多信息。首先，错误消息非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-10T11:05:51.177

您运行的最后一个 IDE 将更新您`<user>\AppData\Roaming\Embarcadero\BDS\<version>`文件夹中的 EnvOption.proj。

这包含您的所有搜索路径等。

此文件间接包含在您的项目中。所以如果你运行 say `XE2's IDE`then compile 你的`XE3`应用程序，你会得到错误的路径。

您可能希望禁用它并在每个项目的 dproj 文件中明确指定您的搜索路径。

`e.g. msbuild myproj.proj /p:ImportEnvOptions=false`

这是我最好的猜测。抱歉，如果晚了 5 年。我刚刚遇到过类似的问题！

一切顺利

史蒂夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:22:59.990

我重新怀疑它是表单文件资源。

我的理论是，由 IDE 的“错误”版本保存的表单文件，当使用不同版本构建的项目尝试加载它们时，由于应用程序试图加载属性数据而导致访问冲突在该版本中可用。

为了测试这一点，我在一个版本的 IDE（本例中为 XE3）中成功编译了项目，进行了自动构建并测试了应用程序是否运行（确实如此）。

然后我为该项目加载了一个 .fmx 文件，并在表单中添加了一个不存在的属性。

构建和应用程序失败与以前一样。

删除添加的属性，现在构建成功。

我现在需要做的所有（！）就是编写一些代码来解析表单文件并删除我正在构建的版本的任何不存在的属性。

# javascript - 在 jquery.validate.min.js 中验证 url

> ID：12758807
> 
> 赞同：1
> 
> 时间：2012-10-06T10:08:21.567
> 
> 标签：javascript, jquery

我有小表格：

以下是我正在验证输入字段的必填字段的脚本，现在我想使用 jquery.validate.min.js 验证 url。

```
<script type="text/javascript" >
            $(document).ready(function() {                                                      
                var container = $('#error');                
                $("#rssform").validate({                            
                    errorContainer: container,
                    errorLabelContainer: $(container),
                    meta: "validate",
                    rules: {                                          
                        feedurl: {
                            required:true                         
                        }                        
                    },
                    messages: {                
                        feedurl: {
                            required:"Please Enter the URL"                            
                        }                                                
                    }

                });

            });
        </script>

<form action="rssindex.php" method="POST" id="rssform">
                    <label>Enter the feed URL&nbsp;</label>         
                    <input type="submit" name="submit" value="GO" id="submit"/>
                </form> 
```

我怎样才能做到这一点。有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:13:44.403

***[jQuery validate 插件](http://docs.jquery.com/Plugins/Validation/Methods/url)***提供了验证 url 的方法。

例子：

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      url: true
    }
  }
}); 
```

对于您的代码，添加`url: true`到规则中。

```
 feedurl: {
                        required:true,
                        url: true     //here                         
                    } 
```

# cucumber - 是否可以在大纲示例中使用表格数据？

> ID：12758808
> 
> 赞同：1
> 
> 时间：2012-10-06T10:08:22.210
> 
> 标签：cucumber, gherkin

这个有可能：

```
Scenario Outline: Add two numbers
Given I have entered <num1> and <num2> into the calculator
When I press add
Then the result should be <result> on the screen
Examples: 
| num1 | num2 | result |
| 50   | 70   | 120    |
| 10   | 20   | 30     | 
```

我的问题是：

是否可以在大纲示例中使用表格？就像下面的场景：

```
Scenario Outline: Add two numbers
Given I have entered <num1> and <num2> into the calculator
When I press add
Then the result should be <result> on the screen
| a  | b  | c   |
| 50 | 70 | 120 |
| 10 | 20 | 30  |  
Examples: 
| num1 | num2 | result |
| a    | b    | c      | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T04:32:22.817

对的，这是可能的。例如

```
Scenario Outline: filing data
  Given I am on the home page
  And I <action>
  And "<field>" field loses focus
  Then I should see "<error>"
  Examples:
  | action                               | field | error              |
  | fill in "Email" with "test.test.com" | email | Email is not valid | 
```

# r - 函数表达式

> ID：12758810
> 
> 赞同：4
> 
> 时间：2012-10-06T10:08:26.343
> 
> 标签：r, function, type-conversion, expression

我正在尝试使用`uniroot()`但在此之前我必须区分一个表达式来解决一个方程。

我创建了表达式，然后将其区分，`D()`但我不知道如何将所述表达式返回到我可以作为其根源的函数。

到目前为止，我有：

```
eq<-expression((w^2)*3+((1-w)^2)*2.5+2*w*(1-w)*0.9)
f<-D(eq, name="w") 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T10:25:37.553

试试这个（感谢 flodel 的有用评论）：

```
g = function(w) eval(f)
uniroot(g, c(0,1000)) 
```

# git - Git 更新后挂钩无法使用 sudo 执行“git pull”

> ID：12758815
> 
> 赞同：2
> 
> 时间：2012-10-06T10:09:05.580
> 
> 标签：git, sudo

对于一个新的 Web 开发项目，我配置了一个带有更新后挂钩的共享存储库，该挂钩会自动将更新拉入 Web 服务器虚拟根目录。

```
#!/bin/sh

cd /srv/www/siteA/ || exit
unset GIT_DIR
git pull hub master

exec git-update-server-info 
```

但是，Web 服务器运行 suphp，它强制每个文件归用户“www-run”所有。但是，由于更新后脚本在启动 git push 的用户的上下文中运行，因此更新的文件归用户所有，而不是 www-run。我认为最好的解决方案是使用 sudo 以 www-run 用户身份启动 git pull 所以我用以下几行更新了 sodoers（'webmaster' 是一个所有 git 用户都是成员的组）：

```
Defaults:%webmaster !requiretty
%webmaster      ALL=(www-run)  NOPASSWD: /usr/bin/git 
```

在更新后脚本中，我将**git pull**行更改为

```
sudo -u www-run /usr/bin/git pull hub master 
```

但是我在客户端执行 git push 时收到以下错误

```
remote: sudo: no tty present and no askpass program specified 
```

由于我已经指定默认情况下不需要 tty 并且不需要密码，所以我无法弄清楚为什么这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:53:35.133

问题在于 sudoers 文件中用户规范的排序。从手册页

> 当一个用户有多个条目匹配时，它们将按顺序应用。如果有多个匹配项，则使用最后一个匹配项（不一定是最具体的匹配项）。

我将下面的行移到最后，它起作用了。

```
%webmaster      ALL=(www-run)  NOPASSWD: /usr/bin/git 
```

# mongodb - 移动 MongoDB 的数据文件夹？

> ID：12758816
> 
> 赞同：20
> 
> 时间：2012-10-06T10:09:22.490
> 
> 标签：mongodb

我在不同的地方有两台电脑（所以不可能使用同一个 wifi 网络）。一个包含大约 50GB 的数据（MongoDB 文件），我想将其移动到第二个具有更多计算能力的分析。但是我怎样才能让第二台机器上的 MongoDB 识别那个文件夹呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-06T13:01:19.670

当你开始`mongod`进程时，你向它提供一个参数，它`--dbpath /directory`是如何知道数据文件夹在哪里的。

您需要做的就是：

1.  停止`mongod`旧计算机上的进程。等到它退出。
2.  将整个 /data/db 目录复制到新计算机
3.  `mongod`在新计算机上启动进程并为其提供`--dbpath /newdirectory`参数。

新`mongod`机器上的 将使用您用 --dbpath 指定的文件夹。无需“识别”，因为该文件夹中没有特定的机器，它只是数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-25T23:17:33.773

我最近自己做了这个，我想提供一些额外的注意事项，以防读者（像我一样）遇到问题。

以下信息特定于 *nix 系统，但它可能适用于对 Windows 进行大量修改的情况。

## 如果源数据位于您仍然可以运行的 mongo 服务器中（首选）

查看并使用`mongodump`and `mongorestore`。这可能更安全，并且是迁移数据库的官方方式。

## 如果你从来没有转储过，也不能再转储了

可以，可以直接复制数据目录；但是，您还需要确保`mongodb`用户在复制目录后具有对目录的完全访问权限。

我的步骤如下。在您要将旧数据库传输到的机器上：

*   编辑`/etc/mongod.conf`dbPath 字段并将其更改为所需位置。
*   使用以下脚本作为参考，或对其进行定制并在您的系统上运行，风险自负。
    *   我不保证这适用于每个系统 --> 请手动验证。
    *   我也不能保证它在每种情况下都能完美运行。
    *   警告：将删除您指定的目标数据目录中的所有内容。
    *   但是，我可以说它在我的系统上运行，并且通过了`shellcheck`.
    *   重要的部分是简单地复制旧的数据库目录，并`mongodb`通过`chown`.

```
#!/bin/bash

TARGET_DATA_DIRECTORY=/path/to/target/data/directory  # modify this
SOURCE_DATA_DIRECTORY=/path/to/old/data/directory  # modify this too

echo shutting down mongod...
sudo systemctl stop mongod

if test "$TARGET_DATA_DIRECTORY"; then
  echo removing existing data directory...
  sudo rm -rf "$TARGET_DATA_DIRECTORY"
fi

echo copying backed up data directory...
sudo cp -r "$SOURCE_DATA_DIRECTORY" "$TARGET_DATA_DIRECTORY"
sudo chown -R mongodb "$TARGET_DATA_DIRECTORY"

echo starting mongod back up...
sudo systemctl start mongod
sudo systemctl status mongod  # for verification 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-03T22:16:45.607

对于 Windows 来说很容易，只需将数据文件夹移动到目标位置运行 cmd "C:\your\mongodb\bin-path\mongod.exe" --dbpath="c:\what\ever\path\data\db"

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-20T20:54:44.510

也许您没有做的是导出或转储数据库。数据库不可移植，因此必须导出或创建为转储文件。

[这是另一个问题，其中进一步解释了答案](https://stackoverflow.com/questions/18866321/how-to-copy-sql-server-2008-r2-database-from-one-machine-to-another)

# android - 填写 PDF 表单并保存 Android

> ID：12758823
> 
> 赞同：0
> 
> 时间：2012-10-06T10:09:55.517
> 
> 标签：android

我有一个包含多个表格的可编辑 .pdf 文件。我想打开那个文件，填写表格并保存它。有没有可用的SDK？我进行了搜索，但没有得到任何满意的答复。

我得到了这个链接：

*   [Android填写PDF表格](https://stackoverflow.com/questions/11736384/android-fill-pdf-form)

*   [填写 PDF 表单的 Android 应用程序](https://stackoverflow.com/questions/10556285/android-application-to-fill-out-a-pdf-form)

*   [https://stackoverflow.com/questions/12509258/display-edit-and-save-pdf-in-android](https://stackoverflow.com/questions/12509258/display-edit-and-save-pdf-in-android)

还有其他解决方案吗？

# iphone - 如何使 UITableViewCells 默认被选中进行编辑

> ID：12758824
> 
> 赞同：0
> 
> 时间：2012-10-06T10:09:56.650
> 
> 标签：iphone, ios, uitableview

![在此处输入图像描述](../Images/7f13324a9328e2a270988aab3ddf6b59.png)

在上面的屏幕截图中，我通过单击手动选择了单元格，但我希望默认选择所有单元格进行编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:24:33.817

您可以使用此代码....

```
 for(int i=0; i<[array count]; i++)
 {
     NSIndexPath *indexP = [NSIndexPath indexPathForRow:i inSection:0];
    [tblView selectRowAtIndexPath:indexP animated:NO scrollPosition:UITableViewScrollPositionNone];
    [self tableView:tblView didSelectRowAtIndexPath:indexP];
 } 
```

你`tblView`的`tableView`.

# javascript - HTML SSI 包括

> ID：12758827
> 
> 赞同：1
> 
> 时间：2012-10-06T10:10:31.567
> 
> 标签：javascript, jquery, html

我有 5 个版本的同一个 html 页面。除了一个隐藏变量外，页面中的所有内容都是相同的。我使用隐藏变量来跟踪重要的事情。

我想看看我是否可以通过包含一个带有隐藏变量的 html 来重写它。这是我的 wrapper.shtml 文件

```
<html>
<body>
    this is the superb page
    <!--#include file="someHiddenVariable.html" -->
    <iframe frameborder="0" height="400" scrolling="no" src="/INeedToReadTheHiddenVariableInThisPage.html" width="280"></iframe>
</body>
</html> 
```

someHiddenVariable.html 只是有

```
 <input type="hidden" value="something very important" /> 
```

INeedToReadTheHiddenVariableInThisPage.html 包含一个表单和几个文本框。我在 INeedToReadTheHiddenVariableInThisPage.html 文件（包含为 iframe）中有一个 javascript，它提交了表单。

我需要访问 INeedToReadTheHiddenVariableInThisPage.html 中 Javascript 中的隐藏变量

如何构建我的文件。如何访问隐藏变量。

我使用 apache http 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:18:16.130

如果您在 someHiddenVariable.html 中的输入周围放置一个表单标签，那么我认为您可以试试这个：

parent.document.formname.fieldname.value

# java - JTabbedPane 给出空指针异常

> ID：12758830
> 
> 赞同：1
> 
> 时间：2012-10-06T10:10:50.133
> 
> 标签：java, arrays, swing, oop

我将 JTabbedPane 与不同的面板一起使用，并且我将 gridLayout 用于我将添加的按钮数组。我尝试将按钮循环到更简单的代码。但是我得到了一个空指针异常，我不知道我是怎么得到这种错误的。这是我的代码

```
import javax.swing.*;
import javax.swing.border.CompoundBorder;
import java.awt.*;
public class HotelRoomsGUI extends JPanel{
    private JTabbedPane mainJTP;
    private JPanel classicTab,deluxeTab,presidentialTab,classicSubPanel,deluxeSubPanel,presidentialSubPanel;
    private String classicRoomNo[] = {"101","102","103","104","105","106","107","108","109","101","111","112"};
    private String deluxeRoomNo[] = {"201","202","203","204","205","206","207","208","209","201","211","212"};
    private String presidentialRoomNo[] = {"301","302","303","304","305","306","307","308","309","301","311","312"};
    private JButton[] classicRoom, deluxeRoom, presidentialRoom;
    public HotelRoomsGUI(){

        setLayout(null);
        setBackground(new Color(90,90,90));
        add(tabbedPane());

    }
    public JPanel classic()
    {
        classicTab = new JPanel();
        classicTab.setBackground(new Color(70,70,70));
        classicTab.setLayout(null);
        classicSubPanel();
        return classicTab;
    }
    public JPanel classicSubPanel()
    {
        classicSubPanel = new JPanel();
        classicSubPanel.setBounds(10,10,605,455);
        classicSubPanel.setLayout(new GridLayout(4,3,10,10));
        classicSubPanel.setBackground(new Color(70,70,70));
        classicTab.add(classicSubPanel);
        rooms();
        return classicTab;
    }
    public JPanel deluxe()
    {
        deluxeTab = new JPanel();
        deluxeTab.setBackground(new Color(70,70,70));
        deluxeTab.setLayout(null);
        deluxeSubPanel();
        return deluxeTab;
    }
    public JPanel deluxeSubPanel()
    {
        deluxeSubPanel = new JPanel();
        deluxeSubPanel.setBounds(10,10,605,455);
        deluxeSubPanel.setLayout(new GridLayout(4,3,10,10));
        deluxeSubPanel.setBackground(new Color(70,70,70));
        deluxeTab.add(deluxeSubPanel);
        rooms();
        return deluxeSubPanel;
    }
    public JPanel presidential()
    {
        presidentialTab = new JPanel();
        presidentialTab.setBackground(new Color(70,70,70));
        presidentialTab.setLayout(null);
        presidentialSubPanel();
        return presidentialTab;
    }
    public JPanel presidentialSubPanel()
    {
        presidentialSubPanel = new JPanel();
        presidentialSubPanel.setBounds(10,10,605,455);
        presidentialSubPanel.setLayout(new GridLayout(4,3,10,10));
        presidentialSubPanel.setBackground(new Color(70,70,70));
        presidentialTab.add(presidentialSubPanel);
        rooms();
        return presidentialSubPanel;
    }
    public JTabbedPane tabbedPane()
    {
        UIManager.put("TabbedPane.selected", Color.ORANGE); 
        mainJTP = new JTabbedPane();
        mainJTP.setBackground(Color.WHITE); 
        mainJTP.setBounds(3,1,630,500);
        mainJTP.addTab("Classic",classic());
        mainJTP.addTab("Deluxe",deluxe());
        mainJTP.addTab("Presidential",presidential());
        return mainJTP;
    }
    public void rooms()
    {
        JButton presidentialRoom[] = new JButton[presidentialRoomNo.length];        
        JButton deluxeRoom[] = new JButton[deluxeRoomNo.length];
        JButton classicRoom[] = new JButton[classicRoomNo.length];
        for(int x = 0;x<classicRoomNo.length;x++){
            //classic rooms
            ImageIcon imageC = new ImageIcon("C:\\Users\\John\\workspace\\SystemTest\\src\\Images\\classicRooms.JPG"); // image
            classicRoom[x] = new JButton(classicRoomNo[x],imageC);
            classicRoom[x].setBackground(Color.WHITE);
            classicRoom[x].setBorder(new CompoundBorder(BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY),
                    BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY)));
            classicSubPanel.add(classicRoom[x]);
            //deluxe rooms
            ImageIcon imageD = new ImageIcon("C:\\Users\\John\\workspace\\SystemTest\\src\\Images\\deluxeRooms.JPG"); // image
            deluxeRoom[x] = new JButton(deluxeRoomNo[x],imageD);
            deluxeRoom[x].setBackground(Color.WHITE);
            deluxeRoom[x].setBorder(new CompoundBorder(BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY),
                    BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY)));
            deluxeSubPanel.add(deluxeRoom[x]);
            //presidential rooms
            ImageIcon imageP = new ImageIcon("C:\\Users\\John\\workspace\\SystemTest\\src\\Images\\presidentialRooms.JPG"); // image
            presidentialRoom[x] = new JButton(deluxeRoomNo[x],imageP);
            presidentialRoom[x].setBackground(Color.WHITE);
            presidentialRoom[x].setBorder(new CompoundBorder(BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY),
                    BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY)));
            presidentialSubPanel.add(presidentialRoom[x]);

        }
    }
} 
```

请给我一些提示，告诉我如何编写更清晰、更好的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:28:00.240

你在调用时得到一个`NullPointerException`as `deluxeSubPanel`has not been instantiated 调用`rooms()`时：

```
deluxeSubPanel.add(deluxeRoom[x]); 
```

作为一般准则，在创建具有依赖组件的组件时最好使用自上而下的方法。这将使创建顺序 - `JTabbedPane`-`JPanel`子组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T10:32:34.593

看看我的建议，这是你的`tabbedPane()`方法：

```
public JTabbedPane tabbedPane() {
    UIManager.put("TabbedPane.selected", Color.ORANGE);
    mainJTP = new JTabbedPane();
    mainJTP.setBackground(Color.WHITE);
    mainJTP.setBounds(3, 1, 630, 500);
    mainJTP.addTab("Classic", classic());
    mainJTP.addTab("Deluxe", deluxe());
    mainJTP.addTab("Presidential", presidential());
    rooms();  // I've inserted this, no panic!
    return mainJTP;
} 
```

在上面的方法中，如果您仔细跟踪，对方法`classic(), deluxe()`的调用`presidential()`已经触发了对方法的调用。`rooms()`相反，`rooms()`像我刚才所做的那样打一个电话。删除代码中其他地方的调用`rooms()`。

# python-imaging-library - 使用 PIL 进行线路检测

> ID：12758833
> 
> 赞同：0
> 
> 时间：2012-10-06T10:11:01.490
> 
> 标签：python-imaging-library, imaging, edge-detection

给定一张由白色背景上的黑色线条（几个像素宽）组成的图像，有什么好的方法可以沿着线条找到坐标，比如每 10 个像素左右？我正在考虑使用 PIL 来完成这项任务，但其他基于 python 或 java 的库也可以。

理想情况下，坐标将指向线的中间，但由于线很窄，它们指向线内的某个位置就足够了。

一条很短的线或一个点应至少用一个坐标来标识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:34:38.247

通常，霍夫变换用于查找线。它为您提供描述线的参数（可以在不同的表示之间轻松转换），您可以对该函数进行采样以获得采样点。请参阅[http://en.wikipedia.org/wiki/Hough_transform](http://en.wikipedia.org/wiki/Hough_transform)和[https://stackoverflow.com/questions/tagged/hough-transform+python](https://stackoverflow.com/questions/tagged/hough-transform+python)

我只在 python 中找到了这个[http://coding-experiments.blogspot.co.at/2011/05/ellipse-detection-in-image-by-using.html](http://coding-experiments.blogspot.co.at/2011/05/ellipse-detection-in-image-by-using.html)实现，它实际上搜索椭圆。

# mvvm - kendoui 中的 Mvvm dropdwonlist

> ID：12758837
> 
> 赞同：4
> 
> 时间：2012-10-06T10:11:32.303
> 
> 标签：mvvm, kendo-ui

我的页面中有一个下拉列表，这是代码：

```
 <div id="test">
         Role: <span data-bind="text: role"></span>
    </br>
    Roles:<select id="roles" data-bind="source: roles, value: role" data-text-field="roleName" data-value-field="roleId" ></select>
    <ul id="view" data-template="Access-template" data-role="listview" data-bind="source:Accesses"></ul>

    <script id="Access-template" type="text/x-kendo-template">

        <li>
            <input type="checkbox" data-bind="checked: selected" />
            <label data-bind="text: AccessName" />
        </li>
    </script>

    </div>​ 
```

我希望当我更改下拉列表值时，它会更改我的角色集合。这是我的代码：

```
var Accesses = [{
    AccessName: 'Create',
    selected: false
}, {
    AccessName: 'Delete',
    selected: false
}, {
    AccessName: 'Update',
    selected: true
}];

var Roles = [{
    roleName: "Admin",
    roleId: 1,
    accessItem: Accesses
}, {
    roleName: "User",
    roleId: 2,
    accessItem: Accesses
}];

var viewModel = kendo.observable({
    roles: Roles,
    accssesItem: Roles.accessItem
});

kendo.bind($("#test"), viewModel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:20:33.163

弄清楚选择了什么 DropDown 项目有点......不直观，但这是你想要的：

```
<script id="Access-template" type="text/x-kendo-template">
    <li>
        <input type="checkbox" data-bind="checked: selected" />
        <label data-bind="text: AccessName" />
    </li>
</script>

<select
    data-role="dropdownlist"
    data-bind="source: roles, events: { select: roleSelected }"
    data-text-field="roleName"
    data-value-field="roleId"></select>

<ul data-template="Access-template"
    data-role="listview"
    data-bind="source: accessItem"></ul> 
```

...和...

```
$(document).ready(function () {

    var roles = [{
        roleName: "Admin",
        roleId: 1,
        accessItem: [{
            AccessName: 'Create',
            selected: true
        }, {
            AccessName: 'Delete',
            selected: true
        }, {
            AccessName: 'Update',
            selected: true
        }]
    }, {
        roleName: "User",
        roleId: 2,
        accessItem: [{
            AccessName: 'Create',
            selected: false
        }, {
            AccessName: 'Delete',
            selected: false
        }, {
            AccessName: 'Update',
            selected: true
        }]
    }];

    var viewModel = kendo.observable({
        roles: roles,
        accessItem: roles[0].accessItem,
        roleSelected: function (e) {
            this.set("accessItem", this.roles[e.item.index()].accessItem);
        }
    });

    kendo.bind("body", viewModel);
}); 
```

在这里工作 jsFiddle：http: [//jsfiddle.net/rally25rs/JHNm6/](http://jsfiddle.net/rally25rs/JHNm6/)

# c# - 嵌入式 WebDAV 服务器

> ID：12758839
> 
> 赞同：1
> 
> 时间：2012-10-06T10:11:48.053
> 
> 标签：c#, http, sockets, embedded, webdav

我知道这可能以前被问过，但我发现的大多数东西都是半成品。是否有一个`C#`库可以让我嵌入一个小型（最好是高速）`WebDAV`服务器并将其扩展为从我的后备存储中提供文件？另外，如果不存在这样的东西，是否有类似的`HTTP/S`服务器，其模块化程度足以`WebDAV`构建在它之上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:56:20.073

[WebDavSystem](http://www.webdavsystem.com/)存在服务器组件，我们的[SecureBlackbox](http://www.eldos.com/sbb/desc-webdav.php)产品中存在 WebDAV 服务器组件。两者都可用于 .NET。我们的可以与任何传输一起使用，不一定是 HTTP(S)。

# java - 当我在第一个微调器中再次选择一个项目时发生错误，然后相关数据未在第二个微调器中解析意味着它不会刷新

> ID：12758847
> 
> 赞同：1
> 
> 时间：2012-10-06T10:13:04.843
> 
> 标签：java, android, parsing, spinner, android-arrayadapter

我有 3 个使用从 Web 服务解析的数据的微调器。当我从第一个微调器中选择一个项目时，第二个微调器将显示已解析的相关数据。

但是当我在第一个微调器中再次选择一个项目时，相关数据不会在第二个微调器中解析，因此它不会刷新。

你能帮忙解决这个问题吗？提前致谢。

```
 country_spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> parent, View view,
            int position, long id) {
            int item=country_spinner.getSelectedItemPosition();
            if(item!=0)
            {

                String selected1=country_spinner.getItemAtPosition(position).toString();
                System.out.println(selected1);
                progressDialog=ProgressDialog.show(getParent(), "", "Loading...");
                new StateTask().execute();

            }

            adapter1.notifyDataSetChanged();
    }

    @Override
    public void onNothingSelected(
            AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
}); 
```

第二个微调器

```
 state_spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

             public void onItemSelected(AdapterView<?> parent, View view,
                       int position, long id) {

                int item=state_spinner.getSelectedItemPosition();
               //   String sate=state_spinner.getSelectedItem().toString();
                if(item!=0)
                {

                    String selected=state_spinner.getItemAtPosition(position).toString();
                    System.out.println(selected);
                    city_spinner.setEnabled(false);
                    progressDialog=ProgressDialog.show(getParent(), "", "Loading...");
                        new CityTask().execute();
                }
                adapter2.notifyDataSetChanged();
               }

                    @Override
                    public void onNothingSelected(
                            AdapterView<?> arg0) {
                        // TODO Auto-generated method stub

                    }
        }); 
```

**状态任务**

```
 public class StateTask extends AsyncTask<String, String, String>{

    @Override
    protected String doInBackground(String... arg0) {
        //Creating JSON Parser instance//////////
        JSONParser jParser=new JSONParser();
        //Getting JSON String from URL..............
        JSONObject jObject=jParser.getJSONFromUrl(URL);
        try
        {
            jsonArray=jObject.getJSONArray(TAG_STATES);
            //final String[] country_array_spinner = new String[jsonArray.length()]; 

            for (int i=0; i<jsonArray.length(); i++)
            {
                //country_array_spinner[i]=jsonArray.getJSONObject(i).getString(TAG_STATE);
                adapter1.add(jsonArray.getJSONObject(i).getString(TAG_STATE));
            }

        }
        catch(JSONException e){
            e.printStackTrace();
        }
        return null;
    }
    @Override
    protected void onPostExecute(String result) {
         state_spinner.setEnabled(true);
        state_spinner.setAdapter(adapter1);
        progressDialog.dismiss();
        super.onPostExecute(result);
    }
} 
```

**城市任务**

```
public class CityTask extends AsyncTask<String, String, String>{

    @Override
    protected String doInBackground(String... arg0) {
        //Creating JSON Parser instance//////////
        JSONParser jParser=new JSONParser();
        //Getting JSON String from URL..............
        JSONObject jObject=jParser.getJSONFromUrl(URLs);
        try
        {
            String sate=state_spinner.getSelectedItem().toString();

            jsonArray=jObject.getJSONArray(TAG_CITIES);
            //final String[] country_array_spinner = new String[jsonArray.length()]; 

            for (int i=0; i<jsonArray.length(); i++)

            {
                JSONObject e=jsonArray.getJSONObject(i);
                String ab=e.getString(TAG_STATE);
                Log.v(ab, "hgdsagds");
                if(ab.contains(sate)){
                    adapter2.add(jsonArray.getJSONObject(i).getString(TAG_CITY));
                }
                //country_array_spinner[i]=jsonArray.getJSONObject(i).getString(TAG_STATE);

            }

        }
        catch(JSONException e){
            e.printStackTrace();
        }
        return null;
    }
    @Override
    protected void onPostExecute(String result) {
        city_spinner.setEnabled(true);
        city_spinner.setAdapter(adapter2);
        progressDialog.dismiss();
        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:21:37.380

在我看来，您的代码逻辑错误...

```
adapter1.add(jsonArray.getJSONObject(i).getString(TAG_STATE)); 
```

您永远不会清除/清空您的适配器（至少在发布的代码中），您只需使用上面的代码继续添加它。在您看来，这可能并不令人耳目一新，因为*新*项目将位于微调器的末端（可能看不见）。

或者，您可以在帖子中遗漏您执行此操作的代码......

# php - 检查n深度树中的值？

> ID：12758853
> 
> 赞同：1
> 
> 时间：2012-10-06T10:14:11.290
> 
> 标签：php, mysql, adjacency-list

我有两个实体，`post`这`category`是一个`1:n`关系。

我有一个包含两列的参考表`post_id`，`category_id`

表`categories`有一`id`列，一`status`列，一`parent_id`列

如果一个类别是另一个类别（n 深度）的子类别，则它`parent_id`不为空。

如果一个类别在线，则其状态为 1，否则为 0。

我需要做的是找出帖子是否可见。

这需要：

Foreach 类别加入到帖子跟踪它的树到根节点（直到类别具有`parent_id`== `null`），如果这些类别中的任何一个具有`status`0 则该路径被认为是离线的。

如果**任何**路径在线，则认为该帖子可见，否则将其隐藏。

我能想到的唯一方法（作为半伪代码）是：

```
function visible(category_ids){
  categories = //select * from categories where id in(category_ids)
  online = false
  foreach(categories as category){
    if(category.status == 0)
      continue;

    children = //select id from categories where parent_id = category.id
    if(children)
      online = visible(children)
  }
  return online
}

categories = //select c.id from categories c join posts_categories pc on pc.category_id = c.id where pc.post_id = post.id

post.online = visible(categories) 
```

但这可能最终会成为很多 sql 查询，有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:21:55.017

经典的数据库与内存的权衡。你正在做的是建造一棵树，里面有叶子。要构建树，您需要递归循环叶子。来自数据库有两种情况：

1.  使用对每个叶子的查询构建递归树。您在内存中拥有 1 棵树。这就是你正在做的事情。
2.  从数据库中获取平面结构，并在内存中递归构建树。你在记忆中拥有一棵扁平的树和真正的树。那是你的替代方式。

什么更好取决于很多事情：您的硬件（磁盘访问与内存），树的大小等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:33:50.913

如果嵌套集不是一个选项，我知道以下内容：

*   如果对数据进行排序，以便父项的子项始终跟随在其父项之后，则可以通过跳过输出中的隐藏节点来对所有数据进行一次数据库查询来解决此问题。

这同样适用于排序的嵌套集，原理已在[此答案](https://stackoverflow.com/q/7729173/367456)中概述，但是有关获取深度的算法不起作用，我建议使用能够删除隐藏项的[递归迭代器。](https://stackoverflow.com/questions/12077177/how-does-recursiveiteratoriterator-works-in-php)

此外，如果数据未排序，您可以从所有行的（未排序）查询中创建一个树结构，如[*嵌套数组*](https://stackoverflow.com/a/7673415/367456)[的答案中所述。*第三层正在消失*](https://stackoverflow.com/a/7673415/367456)。不需要递归，并且您可以获得一个可以轻松输出的结构，我也应该`<ul>/<li>`在另一个答案中涵盖 html 样式输出。

*   [回答*如何将一系列父子关系转换为分层树？*](https://stackoverflow.com/a/8285070/367456)
*   [回答*如何从对象的数组记录集中获取嵌套的 HTML 列表？*](https://stackoverflow.com/a/8021033/367456)

# firefox - 以编程方式在每个图像中禁用Firefox中的颜色 校正？

> ID：12758860
> 
> 赞同：2
> 
> 时间：2012-10-06T10:14:50.127
> 
> 标签：firefox, colors, png, html5-canvas, color-profile

[这个问题与Firefox 3.5 color correction hack](https://stackoverflow.com/questions/1108476/firefox-3-5-color-correction-hack)有密切关系吗？

我的情况是我有一个画布游戏，其中使用的图像带有关于它们的形状、连接点等的附加信息。这些信息存储在 PNG 图像本身中，使用有意义的颜色（例如 RGB(255,255 ,0) 用于连接点）。

加载元素并在画布上绘画创建 Image 对象，设置 img.src，并在 img.load 函数中预处理读取敏感信息的图像数据（并在绘画到画布之前从图像数据中删除敏感像素）。

问题：在FF中，应该是255,255,0的像素实际上是255,254,0。我在 FF 颜色校正方面没有问题（我不在乎显示的图像是否具有正确的颜色，或稍作修改），但我希望获取图像数据会给我未校正的数据。我正在寻找一种*不涉及更改服务器上的图像*的解决方案。有什么办法吗？例如。img.setColorProfile()，还是 img.disableColorCorrection()，还是 img.getImageData(disableColorCorrection) 还是 img.getImageData(colorProfile)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:24:38.450

与图像绘制相比，图像加载的问题可能更多。

我认为正确的解决方案是从图像中去除颜色配置文件信息（您似乎想要 aovid）。如果您不需要完整的原始数据，请尽可能为 Firefox 提供另一个图像资源。

[http://f6design.com/journal/2006/12/01/fixing-png-gamma/](http://f6design.com/journal/2006/12/01/fixing-png-gamma/)

此外，如果服务器合作并允许 CORS 和 AJAX 加载图像，您可以在纯 Javascript 中解码 PNG 图像。您使用 png.js 在 Javascript 中解码图像并`<canvas>`从图像数据创建一个源（而不是`<img>`）。这样，*您*就可以控制每个 PNG 像素的 RGB 值。

[https://github.com/devongovett/png.js](https://github.com/devongovett/png.js)

# django - 为使用 Solr 作为后端的 Django Haystack 编写 Django 测试

> ID：12758864
> 
> 赞同：1
> 
> 时间：2012-10-06T10:16:08.000
> 
> 标签：django, solr, django-haystack, pysolr

我正在使用 Django 1.4、Django-Haystack 2.0 和 Solr (pysolr 2.0.15)。我必须在 Django 中为 Haystack 编写测试用例。我已经为模型编写了索引并定义了一些函数，例如`index_queryset`. 所以，现在我正在修复如何编写相同的测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:00:26.073

好吧 - 如果你没有使用一些特殊的 pysolr 功能（比如邻近搜索），我建议在测试中使用简单的后端。您可能不想使用 pysolr 测试 Haystack 的工作方式，因为它已经过测试并且是搜索，很难预测所有结果，如果您想在测试中经常删除和构建索引，则需要很长时间。

您可能只想测试您编写的内容，例如那些`index_queryset`功能或`prepare_*`您添加的某些功能 - 完全单独测试它们（给出的内容和返回的内容），就像单元测试应该做的那样 - 没有任何 pysolr 相关的东西。

# javascript - ASP.NET - 仅在需要时提示确认

> ID：12758867
> 
> 赞同：1
> 
> 时间：2012-10-06T10:16:45.870
> 
> 标签：javascript, asp.net

我有一个按钮。我有一个 Session [“actionMode”]。这是我在 buttonClick 事件中所做的：

```
protected void Button1_Click(object sender, EventArgs e)
{

    if ((int)Session["actionMode"]==1)
    {
      //Do something
    }
    else if ((int)Session["actionMode"]==3)
    {
       //After confirmation delete a record
    }

} 
```

如您所见，如果 Session["actionMode"] 的值等于 3，则删除一条记录。但在删除之前，我想提示用户确认操作。因此，如果 Session["actionMode"] 的值不等于 3，我不需要任何确认，因为它不会执行任何无法撤消的操作。有没有办法可以做到这一点？也许是Javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:46:57.927

这个代码块...

```
{ 
    //After confirmation delete a record 
} 
```

您正在执行服务器端代码，并且需要用户交互。

无论您做什么（客户端或服务器），都必须拆分它。服务器端替代方案。

```
{ 
    // Display a confirmation including server side controls.
}

protected void YesDeleteTheDamnRecord_Click(object sender, EventArgs e)
{
    // Delete it now.
} 
```

这是一种与客户端交互的解决方案。

> *   在显示 Button1 之前检查“actionMode”方式的值。
> *   如果它等于“3”，则将客户端事件处理程序附加到 Button1.OnClientClick。
> *   显示确认（window.confirm 可能）
> *   如果用户单击“是”，则执行服务器端代码并​​删除记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:04:03.580

我建议您使用以下方法进行删除.....

```
protected void Button1_Click(object sender, EventArgs e)
 {
      if ((int)Session["actionMode"]==1)
     {
       //Do something
     }
     else if ((int)Session["actionMode"]==3)
     {
        //Call Javascript Function which will call Ajax
     }
  } 
```

**Javascript：**

```
function callAjax()
{
   if(confirm(do you want to delete data?))
   {
     call Ajax Page
   }
   else
   {
     return;
   }
} 
```

**阿贾克斯页面：**

```
 PageLoad
  {
    Get Session["actionMode"] Value
    Do your Delete here...
  } 
```

# javascript - 选择多个按钮时如何允许多个输入

> ID：12758869
> 
> 赞同：5
> 
> 时间：2012-10-06T10:17:08.283
> 
> 标签：javascript, jquery, html

我在下面有一个 jsfiddle 应用程序：

[http://jsfiddle.net/ybZvv/5/](http://jsfiddle.net/ybZvv/5/)

如果您打开 jsfiddle，您将看到一个包含“Answer”按钮的顶部控件。您还将看到一些字母按钮、一个“True”按钮和一个“False”按钮。

“True”和“False”按钮完美运行，这意味着如果用户单击“True”然后单击“False”，它会替换文本输入，因为您无法同时获得“True”和“False”的答案”。

这同样适用于“是”和“否”按钮。

但是字母按钮有问题。如果单击字母按钮，您会意识到可以单击多个字母按钮，这很好，但问题是它会替换那些不正确的字母的文本输入。如果选择了多个字母按钮，那么它应该显示所有这些字母按钮的文本输入，而不是用选择的最新字母按钮替换文本输入。

我知道下面的代码

`_oCurrAnswerContainer.html('');`

清空容器 DIV，因此它会在创建新的之前删除输入。

但我只希望在“True”和“False”按钮以及“Yes”和“No”按钮之间发生这种情况。如果选择多个字母按钮，则不应清空容器：

如果打开按钮 A、C 和 E，则显示文本输入 A、C 和 E，如果随后关闭 E，则删除 E 的文本输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:08:01.503

似乎解决方案是在每次用户进行选择或取消选择字母时不断检查所选字母。

例子：

```
<script type='text/javascript'>

    var checkboxes = $('form > p > input:checkbox');

    // updates the text input with the selected values...
    var update = function() {
        var values = [];

        $('form > p > input:checked').each(function(idx, cb) {
            values.push($(this).val());
        });

        $('#foo').val(values.join(', '));
    };

    // count the number of selected items...
    var count = function() {
        var n = $("input:checked").length;
        $("div").text([n, 'box selected!'].join(' '));
    };

    // bind to the checkbox for clicks
    // update the input field
    // count the number of selected items
    $(checkboxes).on('click', function(e) {
        update();
        count();
    });

    update();

    count();
</script> 
```

有关工作示例，请参阅此[要点](https://gist.github.com/3844611)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:24:42.320

我猜你想追加。为什么你不能这样写代码？

```
_oCurrAnswerContainer.html(_oCurrAnswerContainer.html() + '' + NewContents); 
```

附加到它。我不确定，因为我不明白这个问题。

# c++ - c++ 我的二叉树格式正确

> ID：12758870
> 
> 赞同：0
> 
> 时间：2012-10-06T10:17:26.783
> 
> 标签：c++, algorithm, tree, binary-tree, binary-search-tree

我提出了一个递归实现来检查二叉搜索树是否有效：

```
/*
  Return true if binary tree is a binary search tree
*/
bool BinaryTree::isBinarySearchTree(BinaryTree* tree, int& prev)
{
    if(!isBinarySearchTree(tree->left, tree->data)) // left
         return false;

    if(tree->value > prev) // here
        return false;
    else
        prev = tree->value;

    return isBinaryTree(tree->right); // right
} 
```

我对第二次检查有很大的疑问，

```
 if(tree->value > prev) // here
        return false; 
```

对于这个问题，你最喜欢的 C++ 实现是什么？

编辑

你将如何扩展以在给定的树中找到更大的 BST？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:45:13.827

令人惊讶的是有多少人犯了这个错误。

这是一个简单的解决方案无法拒绝的树的示例：

```
 5
              /   \
             /     \
            4       6
           / \     / \
          1   7   1   7 
```

每次调用幼稚检查都会成功，因为每个父级都在其子级之间。然而，它显然不是一个格式良好的二叉搜索树。

这是一个快速的解决方案：

```
bool test(Tree* n,
  int min=std::numeric_limits<int>::min(),
  int max=std::numeric_limits<int>::max()) {
  return !n || ( 
         min < n->data && n->data < max
         && test(n->left, min, n->data)
         && test(n->right, n->data, max));
} 
```

这并不完美，因为它要求树中既不存在 INT_MIN 也不存在 INT_MAX。通常，BST 节点是按 <= 而不是 < 排序的，并且进行该更改只会保留一个值而不是两个值。修复整个事情留作练习。

这是一个简单的测试如何出错的演示：

```
#include <iostream>
#include <limits>
#define T new_tree

struct Tree{
  Tree* left;
  int data;
  Tree* right;
};

Tree* T(int v) { return new Tree{0, v, 0}; }
Tree* T(Tree* l, int v, Tree* r) { return new Tree{l, v, r}; }

bool naive_test(Tree* n) {
  return n == 0 || ((n->left == 0 || n->data > n->left->data)
      && (n->right == 0 || n->data < n->right->data)
      && naive_test(n->left) && naive_test(n->right));
}

bool test(Tree* n,
  int min=std::numeric_limits<int>::min(),
  int max=std::numeric_limits<int>::max()) {
  return !n || ( 
         min < n->data && n->data < max
         && test(n->left, min, n->data)
         && test(n->right, n->data, max));
}

const char* goodbad(bool b) { return b ? "good" : "bad"; }

int main(int argc, char**argv) {
  auto t = T( T( T(1),4,T(7)), 5, T(T(1),6,T(7)));
  std::cerr << "Naive test says " << goodbad(naive_test(t))
            << "; Test says " << goodbad(test(t)) << std::endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T10:35:28.847

递归实现：

```
bool is_bst (node *root, int min = INT_MIN, int max = INT_MAX)
{
    if (root)
    {
        // check min/max constaint
        if (root->data <= min || root->data >= max) 
          return false;

        if (root->left != NULL)
         {
           // check if the left node is bigger
           // or if it is not BST tree itself
           if (root->data < root->left->data ||
               !is_bst (root->left, min, root->data))
            return false;
         }

        if (root->right != NULL)
         {
           // check if the right node is smaller
           // or if it is not BST tree itself
           if (root->data > root->right->data ||
               !is_bst (root->right, root->data, max))
            return false;
         }
    }
    return true;
} 
```

迭代执行

```
 node_type curr = root;
    node_type prev = null;
    std::stack<node_type> stack;
    while (1)
    {
        if(curr != null)
        {
            stack.push (curr);
            curr = curr->left;
            continue;
        }
        if(stack.empty()) // done
            return true;

        curr = stack.pop ();
        if (prev != null)
        {   
            if(curr->data < prev->data)
                return false;
        }
        prev = curr;
        curr = curr->right;
    } 
```

# android - 在android中2秒后检查设备是否处于漫游状态

> ID：12758871
> 
> 赞同：4
> 
> 时间：2012-10-06T10:17:27.880
> 
> 标签：android, roaming

我正在android中开发一个应用程序，我需要检查设备是否处于漫游状态。当我使用此代码时，

```
Handler m = new Handler();

        m.postDelayed(new Runnable()
        { 
            public void run() 
            { 
                        if(telephonyManager.isNetworkRoaming())
                        {
                            Toast.makeText(getApplicationContext(), "Network is in Roaming", Toast.LENGTH_LONG).show();
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Network not in Roaming", Toast.LENGTH_LONG).show();
                        }
            } 
        }, 2000); 
```

但它会在每 2 秒后继续打印吐司。我希望仅当小区位置从正常网络更改为漫游时才打印吐司。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:30:24.710

声明一个广播接收器：

```
 public class ConnectivityChangedReceiver extends BroadcastReceiver{

  @Override
  public void onReceive( Context context, Intent intent )
  {
     //call the method of showing toast on network roaming changed. Make sure that method is in another activity. 
  }
  } 
```

在清单中声明此接收器：

```
 <receiver android:name="com.yourproject.service.ConnectivityChangedReceiver"
        android:label="NetworkConnection">
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
        </intent-filter> 
    </receiver> 
```

# html - 如何在 twitter bootstrap 的模态对话框中使用工具提示插件？

> ID：12758872
> 
> 赞同：4
> 
> 时间：2012-10-06T10:17:33.010
> 
> 标签：html, twitter-bootstrap, tooltip, modal-dialog

全部。我正在使用 bootstrap v2.1.1（当前最新版本）。我的模式对话框中需要一个工具提示。

```
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>Bootstrap v2.1.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="css/bootstrap-responsive.min.css"/>

    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("a[rel='tooltip']").tooltip({'placement': 'right', 'z-index': '3000'});
        });
    </script>
</head>

<body>      
    <div class="modal modal-open">
        <form class="modal-form form-horizontal">
            <div class="modal-header">
                <h3>Login</h3>
            </div>
            <div class="modal-body">
                <a href="#" rel="tooltip" title="This is a link.">A link</a>        <!-- check it out -->
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Login</button>
                <button type="reset" class="btn">Reset</button>
            </div>
        </form>
    </div>
</body> 
```

但代码不起作用。最新版本的 bootstrap 显示模态的 z-index 为 1050。

在 bootstrap.min.css

```
.modal-open .modal .tooltip{z-index:2080;} 
```

我认为这不可能是 z-index 问题。

任何人都可以帮忙吗？多谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-06T11:21:14.953

尝试将其添加到您的 CSS 文件中：

```
.tooltip {
    z-index: 2000 !important;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-07T00:50:56.293

您看到的行为是由于 Twitter Bootstrap 2.1.1 中引入的错误（请参阅[问题 #4980](https://github.com/twitter/bootstrap/issues/4980)）。它的错误修复已经[提交到 2.1.2-wip 分支](https://github.com/twitter/bootstrap/commit/88b1e44dd61afd8f08761346555521bd216ed73a)，并且 2.1.2 应该会在下周发布。

问题源于工具提示没有附加到`.modal`元素，而是附加到`<body>`. 在 2.1.2 可用之前，我建议使用以下解决方法作为临时保留，而不是对 CSS 进行黑客攻击。

```
$('.modal a[rel="tooltip"]')
  .tooltip({placement: 'right'})
  .data('tooltip')
  .tip()
  .css('z-index', 2080); 
```

## [JSFiddle](http://jsfiddle.net/mmfansler/w2CBD/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T10:28:40.757

确保你已经完成了这些：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("a[rel='tooltip']").tooltip({'placement': 'right', 'z-index': '3000'});
    });
</script> 
```

以上就完成了。但是`data-original-title`属性呢？你应该给这个：

```
<a href="#" rel="tooltip" title="This is a link." data-original-title="This is a link.">A link</a> 
```

### 发现问题：CSS修复

```
.tooltip {z-index: 50000;}​ 
```

### 演示：http: [//jsfiddle.net/zk7dF/1/](http://jsfiddle.net/zk7dF/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-09T12:18:23.897

对我有用：
{ html：true，placement：'right'，container：'.modal-body'，title：''};

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-30T06:07:22.000

现在你终于可以用 Bootstrap3 做到这一点了！

结帐[http://getbootstrap.com/javascript/#modals](http://getbootstrap.com/javascript/#modals)

# google-maps - 切换包括集群内部的地图标记

> ID：12758876
> 
> 赞同：0
> 
> 时间：2012-10-06T10:17:53.320
> 
> 标签：google-maps

我有一个在网站上工作的谷歌地图，该地图包括以下内容：

3 种不同类型的地图别针 当太靠近时，别针也会聚集在一起。

我现在如何遇到问题：我的任务是现在提供切换问题所在的每个标记组的可见性的能力。如果标记没有聚集并且以下代码可以正常工作，这将是直截了当的：

```
 onOff = (onOff == 1) ? sawdays.accordion.map : null;

    var mapArray;
    switch( type ){
        case 'bandb': mapArray = sawdays.accordion.bandbMarkers;
        break;

        case 'hotel': mapArray = sawdays.accordion.hotelMarkers;
        break;

        case 'inn': mapArray = sawdays.accordion.innMarkers;
        break;

        case 'pub': mapArray = sawdays.accordion.pubMarkers;
        break;
    }

    if ( mapArray.length > 0 ) {
        for (i in mapArray)
            mapArray[i].setMap(onOff);
        }
    } 
```

然而问题是，集群内的引脚没有切换，如果我关闭酒店引脚，单击一个集群，酒店地图引脚仍然存在......

我在集群上找到了以下参考：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)但看不到实现我所追求的方法。

我想我在这里碰壁了，保持集群功能但添加切换功能的最佳方法是重新绘制地图（这是网站[http://www.sawdays.co.uk /special-places/content/search/?map#maptypeid=roadmap&zoom=9&lng=-3.36493113281245&lat=54.874929190748624](http://www.sawdays.co.uk/special-places/content/search/?map#maptypeid=roadmap&zoom=9&lng=-3.36493113281245&lat=54.874929190748624)）。地图的数据在页面加载时被 ajaxed，因此所有数据都已经存在于客户端机器上以重新配置地图......

**问题：** 是否可以在集群内外切换地图图钉的可见性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:09:45.913

MarkerClusterer 控制它聚集的标记的可见性（因此您不能独立控制它们）

我的建议：

1.  为每个类别保留不同的数组
2.  当您“隐藏”一个类别时，要么从 MarkerClusterer 中删除这些标记，要么清除 MarkerClusterer，然后添加可见的类别数组。
3.  要“显示”类别，请将这些标记添加回 MarkerClusterer 或清除 MarkerClusterer，然后添加可见的类别数组。
4.  隐藏/显示未聚集的标记（实际上，如果您正确执行 1、2 和 3，这可能不是必需的）

# linux - AWS 亚马逊为小型实例提供 160GB 空间。在引导 Suse linux 时，总根分区空间为

> ID：12758880
> 
> 赞同：3
> 
> 时间：2012-10-06T10:18:25.630
> 
> 标签：linux, amazon-ec2, diskspace

AWS 亚马逊为小型实例提供 160GB 空间。在启动 Suse linux 时，我得到的总根分区空间是 10GB。在 df -h 我只看到 /dev/sda1 有 10GB 空间。剩下的150GB在哪里？我怎样才能认领这个空间？我不想使用 EBS，因为它需要额外的费用，而且 160GB 的空间足以满足我的需要。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T10:29:15.683

额外的 150GB 作为临时存储提供，例如，与根存储上的数据相比，此存储上的数据将无法在重新启动后继续存在。在启动过程中，您可以选择在您的机器中将临时磁盘作为设备提供的位置（这是`-b`使用命令行时的选项或通过 S3 控制台启动时在“实例存储”选项卡中的选项。然后您可以简单地挂载它在您正在运行的实例中。

# php - 如何使用 php 从数据库中检索代码？

> ID：12758881
> 
> 赞同：3
> 
> 时间：2012-10-06T10:18:31.823
> 
> 标签：php, mysql

我想将 HTML 代码存储在 mysql 数据库中。如果我想将以下代码存储到数据库中

```
<html>
<body>
<p> this is a paragraph </p
</body>
</html> 
```

他们按原样存储。但是当我检索它们并用 php 回显时，标签就消失了。但我想像上面一样回应它们。我还想不仅存储和显示 HTML，还想存储和显示其他代码（c、java、php）。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:20:18.440

您可以使用[`htmlentities ()`](http://php.net/manual/en/function.htmlentities.php)php 函数来回显 html 代码

```
 $str = "
<html> 
 <body>
     <p> this is a paragraph </p
 </body>
</html>
";

echo htmlentities($str); 
```

你也可以使用 `htmlspecialchars();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:31:52.663

你可以使用`htmlentities($str)`它，另一个很好的使用方法是`<pre></pre>` 将这些标签放在代码周围将保留换行符、制表符和空格。如果你想展示它。

# junit - 在 Junit Selenium 中使用 assertEqual 和 getElementbyxpath

> ID：12758882
> 
> 赞同：1
> 
> 时间：2012-10-06T10:18:35.990
> 
> 标签：junit, selenium-webdriver

我基本上是在编写一个测试用例来确定在 Facebook 上共享的状态是否实际上是共享的。下面是获取 Facebook 上第一篇文章文本的 xpath。我想将它与我发布的状态进行比较，例如“Blah”。我一直在尝试使用 AssertEquals 但这似乎不起作用。

```
 WebElement status = getElement(By.Xpath("//div[@id='pagelet_home_stream']//ul[@id = 'home_stream']//li[1]//span[@class='userContent']")

 AssertEquals(status, "Blah"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:18:57.287

您需要调用，`element.getText()`否则您正在与一个`WebElement`对象而不是一个`String`. 此外，重要的是预期文本首先出现在 assertEquals(expected, actual) 中，否则当它们不匹配时，您会收到一条令人困惑的消息。

```
assertEquals("Blah", status.getText()); 
```

# .net - Freebase dotNet API CreateRequest

> ID：12758884
> 
> 赞同：1
> 
> 时间：2012-10-06T10:18:44.230
> 
> 标签：.net, google-api, freebase

我正在使用 dotNet Freebase API（googleapi）。[这个](http://wiki.freebase.com/wiki/Topic_API)wikipage 显示 Topic API 是一种简单而有用的获取数据的方法，这正是我想要的。但是我在 dotNet Freebase API 中找不到任何相关的方法，我只能找到带有 MQL、图像和文本的方法......

我还注意到有一个方法叫做`CreateRequest(string resource, string method)`. 但是当我尝试分配资源=“https://www.googleapis.com/freebase/v1/topic/m/0d6lp”和方法=“GET”时，它会抛出 KeyNotFoundException ...

是否可以使用 CreateRequest 方法来获取数据？如果是，我应该为变量*资源*和变量*方法*分配什么值？如果没有，这个方法的用途是什么？

# wpf - 在 DataTemplate 中忽略 DataGrid ColumnWidth 属性以获取行详细信息

> ID：12758886
> 
> 赞同：2
> 
> 时间：2012-10-06T10:19:30.080
> 
> 标签：wpf, datagrid, datatemplate, column-width

这是显示我的应用程序详细信息的 UserControl，如您所见，`ColumnWidth`属性显式设置为`*`. 我还尝试`Width`从`DataGridTextColumn`.

```
<UserControl x:Class="WpfUserInterface.MyDetailsView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" Height="185" d:DesignWidth="480">
    <Grid>
        <DataGrid ColumnWidth="*" Margin="10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Column1"/>
                <DataGridTextColumn Header="Column2"/>
                <DataGridTextColumn Header="Column3"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl> 
```

这是仅包含 DataGrid 的主窗口。

```
<Window x:Class="WpfUserInterface.Window"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window" Height="306" Width="453">
    <Grid>
        <DataGrid ColumnWidth="*">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ParentColumn1"/>
                <DataGridTextColumn Header="ParentColumn2"/>
                <DataGridTextColumn Header="ParentColumn3"/>
            </DataGrid.Columns>
            <DataGrid.RowDetailsTemplate>
                <DataTemplate>
                    <MyDetailsView/>
                </DataTemplate>
            </DataGrid.RowDetailsTemplate>
        </DataGrid>
    </Grid>
</Window> 
```

这是当您运行应用程序并在父 DataGrid 中选择一行时显示在屏幕上的内容。

![数据网格](../Images/89e0991f8e7feb676a3fe3534c84977e.png)

当我将 DataGrid 中的宽度设置为`MyDetailsView`指定值（如 400）时，列的大小非常完美，但这不是一个选项。有没有办法解决这个问题？一种解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-08T11:14:55.670

我知道大约一年前有人问过这个问题，但我一直面临同样的问题，我找到了这个解决方案：

```
 this.dgrData.Columns[0].Width = new DataGridLength(1, DataGridLengthUnitType.Star);
 this.dgrData.Columns[1].Width = new DataGridLength(1, DataGridLengthUnitType.Star);
 ... 
```

希望它对某人有任何帮助。

# android - Android 隐藏 ActionBar

> ID：12758887
> 
> 赞同：2
> 
> 时间：2012-10-06T10:19:32.603
> 
> 标签：android, android-actionbar

我试图隐藏我的操作栏。请检查我的代码。它似乎不起作用。我还在代码底部列出了我的 LOGCAT。请帮忙。

MainActivity.java

```
public class MainActivity extends SherlockFragmentActivity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            super.onCreate(savedInstanceState);

            ActionBar actionBar = getSupportActionBar();
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

            actionBar.setDisplayShowTitleEnabled(true);

            Tab tab = actionBar.newTab()
                                .setText("Android")
                                .setTabListener(new AndroidFragment())
                                .setIcon(R.drawable.android);

            actionBar.addTab(tab);

            tab = actionBar.newTab()
                    .setText("Apple")
                    .setTabListener(new AppleFragment())
                    .setIcon(R.drawable.apple);

            actionBar.addTab(tab);

        }  

    } 
```

日志猫：

```
10-06 18:17:25.781: E/AndroidRuntime(15962): FATAL EXCEPTION: main
10-06 18:17:25.781: E/AndroidRuntime(15962): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.actionbarsherlocknavtab/in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity}: java.lang.NullPointerException
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.os.Looper.loop(Looper.java:137)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.app.ActivityThread.main(ActivityThread.java:4512)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at java.lang.reflect.Method.invokeNative(Native Method)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at java.lang.reflect.Method.invoke(Method.java:511)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at dalvik.system.NativeStart.main(Native Method)
10-06 18:17:25.781: E/AndroidRuntime(15962): Caused by: java.lang.NullPointerException
10-06 18:17:25.781: E/AndroidRuntime(15962):    at in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity.onCreate(MainActivity.java:19)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.app.Activity.performCreate(Activity.java:4465)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
10-06 18:17:25.781: E/AndroidRuntime(15962):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
10-06 18:17:25.781: E/AndroidRuntime(15962):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T22:18:41.590

好吧，如果您使用后面三行读取`requestWindowFeature(Window.FEATURE_NO_TITLE);`的对象，则为空。`ActionBar`因此，NPE。

但是为什么要以这种方式隐藏ActionBar，*然后*获取对象并将选项卡设置为不可见的ActionBar？

另请参阅 Andrei 对您的问题的评论。

# android - 在我们第一次启动应用程序时添加 toast

> ID：12758892
> 
> 赞同：0
> 
> 时间：2012-10-06T10:20:07.847
> 
> 标签：android

有没有什么方法可以在我第一次启动应用程序时在 android 设备中安装应用程序后向我显示敬酒。之后，每当我启动该应用程序时，它都不会显示该吐司。提前谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:29:07.963

如果用户打开了应用程序，则将变量添加到您设置为 true 的 ClientPreferences。然后，如果该变量为 false，您可以在主活动的 onCreate 中显示 Toast。

```
SharedPreferences prefs = this.getSharedPreferences(
        "com.your.app", Context.MODE_PRIVATE);
boolean hasVisisted = prefs.getBoolean("HAS_VISISTED_BEFORE", false);
if(!hasVisited) {
    Toast.makeText(...).show();
    prefs.edit().putBoolean("HAS_VISISTED_BEFORE", true).commit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:22:26.380

您必须在某处保存一个值，您可以在每次启动时检查应用程序是否已经启动。 [SharePreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)将是一个选项。或者在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T10:27:13.527

即使应用程序关闭，也可以使用 SharedPreference 来保存价值。

因此，当您的应用程序第一次启动时，请检查该共享首选项值，然后敬酒并更改共享首选项的值。现在完成应用程序时，更改共享偏好的值。

你可以参考[这个链接](http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html)

希望这会帮助你。

# c#-4.0 - Windows 8 WinRT 中的锁定屏幕

> ID：12758900
> 
> 赞同：6
> 
> 时间：2012-10-06T10:21:16.613
> 
> 标签：c#-4.0, microsoft-metro, windows-runtime, winrt-xaml

当我的应用程序在 Windows 8 WINRT 中运行时，我可以阻止操作系统进入锁定屏幕/睡眠模式吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T12:46:27.357

您可以使用[DisplayRequest 类](http://msdn.microsoft.com/en-US/library/windows/apps/windows.system.display.displayrequest)来指示您正忙于播放需要显示保持活动且不变暗的内容。[此处提供了](http://msdn.microsoft.com/en-US/library/windows/apps/xaml/jj152728)包含示例代码的优秀操作指南文章。千万不要乱用，对耗电是相当不利的。如果您使用应用程序对用户没有明显好处，那么商店很有可能会拒绝您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:34:34.130

您无法阻止操作系统进入锁屏/睡眠/关机等状态。如果您希望应用程序在幕后运行，您可能需要创建一个后台任务应用程序。您可以在以下位置找到更多信息：[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh977056%28v=win.10%29.aspx)

# macos - 如何计算带孔文件的稀疏度？

> ID：12758905
> 
> 赞同：0
> 
> 时间：2012-10-06T10:22:07.830
> 
> 标签：macos, file, hfs

我在一个文件夹中有几个文件是未完成的种子文件。在 HFS 文件系统上，该`du`命令返回文件的大小，就好像它没有洞一样。

您如何计算空块与其中包含实际数据的块之间的比率？到目前为止，我通过将文件的快速 gzip 压缩版本的大小除以表观大小来做到这一点。

我不是在写应用程序。我正在尝试查找由传输（bittorent 客户端）创建的哪些文件不完整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:48:13.307

`ls -ksl filename`将在第一列中显示实际分配的磁盘空间，以*千字节*（不是字节）为单位。稀疏文件分配的空间小于文件的实际大小，*但*分配的大小大于或相等并*不能*保证文件已完全下载，只是文件的每个块都有写入内容。要验证文件是否已完全下载，您应该验证`.torrent`文件中的校验和，一些命令行 torrent 客户端可以为您执行此操作（例如`ctorrent -c`，可从 Homebrew 或 MacPorts 获得）。

# mysql - 关于这些的 SQL 问题

> ID：12758912
> 
> 赞同：1
> 
> 时间：2012-10-06T10:23:06.267
> 
> 标签：mysql, sql, oracle, top-n

我有 4 张桌子。一种叫做艺术家。这是表结构：

```
artistID   lastname   firstname   nationality   dateofbirth   datedcease 
```

另一张表称为工作

```
workId   title   copy   medium   description   artist ID 
```

转表

```
TransactionID   Date Acquired   Acquistionprice   datesold 
askingprice    salesprice    customerID     workID 
```

客户表

```
customerID    lastname    Firstname     street     city     state 
zippostalcode     country    areacode    phonenumber    email 
```

第一个问题是哪位艺术家的作品售出最多，以及该艺术家的作品已售出多少。

我的 SQL 查询如下

```
SELECT * 
FROM dtoohey.artist A1 
INNER JOIN 
    (SELECT 
         COUNT(W1.ArtistID) AS COUNTER, artistID  
     FROM dtoohey.trans T1
     INNER JOIN dtoohey.work W1 ON W1.workid = T1.Workid
     GROUP BY W1.artistID) TEMP1 ON TEMP1.artistID = A1.artistID
WHERE 
    A1.artistID = TEMP1.artistId
ORDER BY 
    COUNTER desc; 
```

我要得到整张桌子，但我只想显示最高计数的第一行 - 我该怎么做？

qns 2 是哪位艺术家的作品获得最高平均利润的销售额（即艺术家每次销售作品所获得的平均利润），以及该金额是多少。

我的 SQL 查询如下

```
SELECT 
    A1.artistid, A1.firstname 
FROM
    (SELECT 
         (salesPrice - AcquisitionPrice) as profit, 
         w1.artistid as ArtistID 
     FROM dtoohey.trans T1
     INNER JOIN dtoohey.WORK W1 ON W1.workid = T1.workid) TEMP1
INNER JOIN 
    dtoohey.artist A1 ON A1.artistID = TEMP1.artistID
GROUP BY 
    A1.artistid
HAVING 
    MAX(PROFIT) = AVG(PROFIT); 
```

我无法执行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:31:23.733

用于`limit 1`你的第一个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:37:54.277

您的第二个问题可以与第一个问题完全相同地解决。只需更换

```
COUNT(W1.ArtistID) 
```

和

```
AVG(salesPrice - AcquisitionPrice) as AvgProfit 
```

然后使用：

```
ORDER BY AvgProfit DESC
LIMIT 1 
```

完整的查询应该是：

```
SELECT A1.artistid, A1.firstname, TEMP1.avgProfit
FROM (SELECT AVG(salesPrice - AcquisitionPrice) as avgProfit, W1.artistid as artistid
      FROM dtoohey.trans T1
      INNER JOIN dtoohey.WORK W1
      ON W1.workid = T1.workid
      GROUP BY artistid
      ORDER BY avgProfit DESC
      LIMIT 1) TEMP1
INNER JOIN dtoohey.artist A1
ON A1.artisid = TEMP1.artistid 
```

# ios - iOS OpenGL ES 绘制网格线框

> ID：12758913
> 
> 赞同：0
> 
> 时间：2012-10-06T10:23:08.853
> 
> 标签：ios, opengl-es

我在 .OBJ 文件中有一个人体模型，我想将其显示为带有三角形的网格。没有纹理。我还希望能够在 3D 中移动、缩放和旋转。

第一个也是可行的选项是使用数学手动将顶点投影到 2D，然后使用 Quartz 2D 绘制它们。这行得通，因为我知道透视投影的基本数学概念。

但是我想使用 OpenGL ES 来实现该方法，但我不确定如何绘制三角形。

例如 - (void)drawRect:(CGRect)rect 中的代码是：

```
glClearColor(1,0,0,0);
glClear(GL_COLOR_BUFFER_BIT);
GLKBaseEffect *effect = [[GLKBaseEffect alloc] init];
[effect prepareToDraw];
glEnable(GL_DEPTH_TEST);
glEnable(GL_CULL_FACE); 
```

怎么办？我有一个顶点位置数组（每个顶点 3 个浮点数）和一个三角形索引数组，所以我尝试了这个：

```
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, numVertices,pVertices);
glDrawElements(GL_TRIANGLES, numTriangles, GL_UNSIGNED_INT,pTriangles); 
```

但这并没有显示任何东西。我从一个示例中看到了 glEnableVertexAttribArray(GLKVertexAttribPosition) 和 glDrawArrays 的用法，但我不确定如何使用它们。

我也明白用ES渲染线框是不可能的？所以我必须将颜色属性应用于顶点。没关系，但在此之前必须先显示三角形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:01:54.993

我要问的第一件事是：你的顶点在哪里？OpenGL (ES) 在从 (-1, -1, -1) 到 (1, 1, 1) 的坐标空间中绘制，因此您可能希望使用投影矩阵转换您的点以将它们放入该空间。要了解投影矩阵以及 iOS 上 OpenGL ES 2.0 的更多基础知识，我建议找一本书或教程。[这个还不错](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)，还有[一个是 GLKit 特有的](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1)。

使用 OpenGL 绘图`drawRect:`可能不是您想要做的事情。如果您已经在使用 GLKit，为什么不使用`GLKView`？如果您使用“OpenGL 游戏”模板创建一个新的 Xcode 项目，那么有很好的示例代码可以帮助您入门。

一旦你熟悉了 GL，你会发现`glPolygonMode`通常用于在桌面 OpenGL 上绘制线框的函数在 OpenGL ES 中不存在。但是，根据您的顶点数据的组织方式，您可能能够使用`GL_LINES`或获得一个体面的线框`GL_LINE_LOOP`。或者由于您使用的是 GLKit，您可以跳过线框并使用`GLKBaseEffect`.

# google-maps - 如何构建像 morethanamap 这样的谷歌地图？

> ID：12758914
> 
> 赞同：-1
> 
> 时间：2012-10-06T10:23:08.920
> 
> 标签：google-maps, responsive-design

我想建立像[http://www.morethanamap.com/demos/places这样的谷歌地图](http://www.morethanamap.com/demos/places)

我必须学习哪些技能来构建它？或者哪里有文档怎么学呢？

对不起我的英语不好。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:37:03.857

您所需要的只是 Google Maps JavaScript API v3 文档。

在这里查看： [https ://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

一旦您开始使用本网站中给出的所有代码和示例，您就可以很好地开始构建交互式地图，就像您链接中的地图一样。

# html5-canvas - 用于 2D 游戏的 Canvas 2d 上下文或 WebGL

> ID：12758915
> 
> 赞同：25
> 
> 时间：2012-10-06T10:23:16.610
> 
> 标签：html5-canvas, webgl

我正计划编写一个游戏，它将使用很多精灵和图像。起初我尝试了 EaselJS，但在玩其他一些基于画布的游戏时，我意识到它并没有那么快。当我看到 Mozilla 的 BananaBread 时，我想“如果 WebGL 可以如此快速地完成 3D，那么它可以更快地完成 2D”。所以我搬到了three.js（使用平面和透明纹理，精灵的纹理偏移）。

问题是：它更好吗？快点？大多数 WebGL 游戏都是 3D 的，所以我应该为 2D 使用画布 2D 上下文，为 3D 使用 WebGL 吗？我还注意到 2D 中没有用于 WebGL 的库（WebGL-2d 除外，但它的级别很低）。

请注意，兼容性不是我最关心的问题，因为我不打算很快发布任何东西:)。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-06T23:53:58.340

简短的回答是肯定的。*如果*你使用得当，WebGL 会更高效。一个简单的实现要么没有任何好处，要么性能更差，所以如果你还不熟悉 OpenGL API，你可能想暂时坚持使用画布。

一些更详细的说明：WebGL 可以非常快速地绘制带纹理的四边形（精灵），但是如果您需要更高级的 2D 绘图功能，例如路径跟踪，您将需要坚持使用 2D 画布，因为在 WebGL 中实现这些类型的算法是不平凡。游戏的性质也会影响您的选择。如果您一次只有几个移动项目在屏幕上，Canvas 将相当快速且相当简单。但是，如果您每帧都重绘整个场景，WebGL 更适合这种类型的渲染循环。

我的推荐？如果您只是同时学习这两种方法，请从 Canvas2D 开始，然后让您的游戏与它一起工作。以简单的方式抽象您的绘图，例如使用`DrawPlayer`函数而不是`ctx.drawImage(playerSprite, ....)`，并且当您达到游戏正常运行并且您希望它运行得更快或游戏设计要求您必须使用更快的绘图方法时，创建使用 WebGL 为所有这些抽象函数提供替代渲染后端。这为您提供了不必在早期就挂在渲染技术上的优势（这总是一个错误！），让您专注于游戏玩法，如果您最终实现了这两种方法，那么您对于非 WebGL 浏览器（如 Internet）有很好的回退探险家。无论如何，您可能暂时不需要提高速度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T23:50:40.993

WebGL 可以比 canvas 2D 快得多。参见[http://blog.tojicode.com/2012/07/sprite-tile-maps-on-gpu.html](http://blog.tojicode.com/2012/07/sprite-tile-maps-on-gpu.html)作为一个例子。

也就是说，我认为你现在主要是靠自己。我不知道任何用于 WebGL 的 2d 库，除了可能是 PlayN [http://code.google.com/p/playn/](http://code.google.com/p/playn/)虽然它是在 Java 中并使用 Google Web Toolkit 转换为 JavaScript。我也很确定它没有使用上面那篇博文中提到的技术，尽管如果您的游戏不使用瓷砖，那么该技术可能对您没有用处。

如果您计划使用 2d，three.js 可以说不是您想要的库。

# c - c中的缓冲区管理

> ID：12758919
> 
> 赞同：-2
> 
> 时间：2012-10-06T10:23:57.743
> 
> 标签：c, buffer, buffer-overflow, adjustment

我有一个大小为 2000 的缓冲区，要插入的数据是无限的。我想，超过2000的数据应该从缓冲区末尾添加，即从右向左推送所有数据并在缓冲区末尾插入新数据。那么，我应该尝试什么样的算法或流程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:28:08.733

您想使用 FIFO 或“循环缓冲区”。请参阅[http://en.wikipedia.org/wiki/Circular_buffer](http://en.wikipedia.org/wiki/Circular_buffer)以获得完整的解释，甚至是示例代码。

根据您的实际需要，实现可能会有所不同。例如，如果您总是需要按顺序访问 2000 个项目，则可以省略读指针（因为它总是在写指针后面一个项目）。

编辑：队列是类似的东西。如果您使用 C++，请考虑[http://www.cplusplus.com/reference/stl/queue/](http://www.cplusplus.com/reference/stl/queue/)

# windows-installer - 将安装路径作为输入传递给 dll - 基本 MSI - InstallShield 2012

> ID：12758920
> 
> 赞同：1
> 
> 时间：2012-10-06T10:24:09.577
> 
> 标签：windows-installer, installshield-2012, basic-msi

*将从目标文件夹对话框*中选择的安装路径作为输入传递给自定义对话框中的 DLL。

我正在使用 InstallShield 2012 设计一个基本的 MSI 安装程序项目。我设计了一个自定义对话框以在自定义对话框中获取用户登录信息等，并将详细信息传递给 DLL，然后相应地创建一个数据库。但是我需要知道如何将安装路径 [在*目标文件夹对话框*中选择] 作为输入传递给 dll，以便在正确的文件夹中创建我的数据库。我的 DLL 操作是在 Installfiles 之后执行的。

提前致谢 ！！如果您无法理解上述内容，我很乐意解释..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:12:59.910

您不能像在命令行中那样直接将值传递给 DLL。

您将用户输入的值存储在一个属性中，然后您的 DLL 自定义操作用于[`MsiGetProperty`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370134%28v=vs.85%29.aspx)从 MSI 会话中获取这些属性。

如果您的自定义操作需要在安装程序的提交阶段运行提升，您必须将这两个值打包到`CustomActionData`属性中。有关详细信息，请参阅[获取延迟执行自定义操作](http://msdn.microsoft.com/en-us/library/aa370543%28v=vs.85%29.aspx)的上下文信息。

# codeigniter - 在codeigniter的构造函数中加载模型。这是好习惯吗？

> ID：12758931
> 
> 赞同：0
> 
> 时间：2012-10-06T10:25:15.450
> 
> 标签：codeigniter

我想知道......我可以在我的构造函数中加载模型，而不是为该控制器中的每个函数加载它吗？

假设我有 5 个使用相同模型的函数。在所有 5 个函数中调用相同的模型，我应该像这样在构造函数中加载控制器吗？

这是好习惯吗？

```
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class BackOfficeUsers extends MY_Controller 
{

    // constructor function 
    public function __construct() 
    {
        parent::__construct();
        $this->load->model('backOfficeUsersModel'); // load it here??
    } // end of constructor function 
```

问候，佐兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:28:20.320

是的，[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)始终是一个好习惯。

您还可以使用[CodeIgniter 的自动加载功能](http://codeigniter.com/user_guide/general/autoloader.html)。如果您发现自己在其他控制器中过于频繁地加载此模型。

# php - 如何使用 PHP 向用户发送通知？

> ID：12758937
> 
> 赞同：0
> 
> 时间：2012-10-06T10:26:33.733
> 
> 标签：php, curl, notifications, facebook-php-sdk

我在网上到处搜索以找到我的问题的答案，但我没有找到任何明确而简单的答案...如何使用 PHP 向用户发送通知？我们认为“用户”已经安装了 FB 应用程序。

我试过这段代码：

```
$post_data = "access_token=".$facebook->getAccessToken()."&template=My message&href=http://google.com";

$curl = curl_init(); 

curl_setopt($curl, CURLOPT_URL, "https://graph.facebook.com/".$user."/notifications/"); 
curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data); 
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
$page = curl_exec($curl); 
curl_close($curl); 

print($page); 
```

但我收到以下错误消息： {"error":{"message":"(#15) 必须使用应用程序访问令牌调用此方法。","type":"OAuthException","code":15}}我没有使用正确的 access_token ?? 感谢帮助我或向我展示另一个代码...... :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:33:39.237

尝试使用此格式发送通知，访问令牌为`querystring`

```
$post_data = "access_token=".$facebook->getAccessToken()."&template=My message&href=http://google.com";

$curl = curl_init(); 

curl_setopt($curl, CURLOPT_URL, "https://graph.facebook.com/".$user."notifications?access_token= … &template= … &href= …"); 
curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data); 
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
$page = curl_exec($curl); 
curl_close($curl); 

print($page); 
```

# android - 如何避免android SQLite中的特殊字符？

> ID：12758947
> 
> 赞同：1
> 
> 时间：2012-10-06T10:27:29.027
> 
> 标签：android, sqlite, search, special-characters

我应该如何在 android 中编写特殊字符正确工作的 sql 查询。例如，当我使用带有 % 符号的 like 过滤字符串时，它无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:35:04.093

对于`LIKE`，您在查询中选择用什么来逃避它们；

```
SELECT * FROM Olle WHERE name LIKE 'Many ^% have fallen' ESCAPE '^'; 
```

...将仅匹配实际字符`%`，因为它已使用`^`ESCAPE 子句中给出的 that 进行转义。

SQLfiddle[在这里](http://sqlfiddle.com/#!7/85312/2)。

# ajax - Ajax 请求后在 PartialView 中执行 Ajax.ActionLink 和 jquery

> ID：12758948
> 
> 赞同：0
> 
> 时间：2012-10-06T10:27:38.223
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, jquery

我在页面中加载了一些 PartialView 作为对 Ajax 表单帖子的响应。这部分包含两个自己的 Ajax.ActionLink。响应加载后 ActionLinks 无法正常工作 - 它向服务器发送请求，但不会使用返回的内容更新 UpdateTarget。似乎 jquery-ui 提供的小部件（如可拖动）无法以这样的方式绑定到元素（代码放置在部分视图中）：

```
$(function(){ $('#target').draggable();}); 
```

我将不胜感激任何解决方案。

PS> ActionLinks在target id更正后开始工作，但是jquery ui steel不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:43:38.197

当您的代码绑定处理程序时，似乎#target 不可用。

尝试使用`live()`, 或`delegate()`, 或`.on()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:18:41.233

通过在 PartialView 中添加命名函数并在 OnSuccess 中为 Ajax.BeginForm 调用它来解决。当我发现 document.ready 在页面真正更新之前触发 ajax 加载的内容时。

# python - Python中的绿色线程和线程

> ID：12758952
> 
> 赞同：55
> 
> 时间：2012-10-06T10:28:14.400
> 
> 标签：python, multithreading, pthreads, gil, green-threads

正如[**维基百科所说**](http://en.wikipedia.org/wiki/Green_threads)：

> 绿色线程在不依赖任何本机操作系统功能的情况下模拟多线程环境，并且它们在用户空间而不是内核空间中进行管理，使它们能够在没有本机线程支持的环境中工作。

Python 的线程被实现为`pthreads (kernel threads)`，并且由于全局解释器锁 (GIL)，Python 进程一次只运行一个线程。

[**问题**]但是在`Green-threads`（或所谓的greenlet或tasklets）的情况下，

> 1.  `GIL`对他们有影响吗？一次可以运行多个greenlet吗？
> 2.  使用greenlets或tasklet有什么陷阱？
> 3.  如果我使用greenlets，一个进程可以处理多少个？（我想知道，因为在单个进程中，您最多可以打开 *ix 系统中设置的*ulimit*（*-s*，*-v*）线程。）

我需要一点洞察力，如果有人能分享他们的经验，或者引导我走上正确的道路，那将会有所帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-05-20T01:48:03.510

您可以将 greenlets 视为更像是协作线程。这意味着没有调度程序在任何给定时刻在您的线程之间先发制人地切换 - 相反，您的 greenlet 在代码中的指定点自愿/明确放弃控制权。

> GIL 会影响他们吗？一次可以运行多个greenlet吗？

一次只运行一个代码路径 - 优点是您可以最终控制哪个代码路径。

> 使用greenlets或tasklet有什么陷阱？

你需要更加小心——一个写得不好的greenlet不会让其他greenlet控制。另一方面，由于您知道 greenlet 何时会进行上下文切换，因此您可以避免*为*共享数据结构创建锁。

> 如果我使用greenlets，一个进程可以处理多少个？（我想知道，因为在单个进程中，您可以将线程打开到 *ix 系统中设置的 umask 限制。）

使用常规线程，您拥有的调度程序开销越多。此外，常规线程仍然具有相对较高的上下文切换开销。Greenlets 没有与它们相关的这种开销。从[瓶子文档](http://bottlepy.org/docs/dev/async.html#greenlets-to-the-rescue)中：

> 由于在切换和创建新线程时涉及的高开销，大多数服务器将其工作池的大小限制为相对较少的并发线程数。虽然线程与进程（分叉）相比便宜，但为每个新连接创建它们仍然很昂贵。
> 
> gevent 模块将 greenlets 添加到组合中。Greenlets 的行为类似于传统线程，但创建起来非常便宜。基于 gevent 的服务器可以生成数千个 greenlet（每个连接一个），几乎没有开销。阻止单个 greenlets 对服务器接受新请求的能力没有影响。并发连接的数量几乎是无限的。

如果您有兴趣，这里还有一些进一步的阅读：http: [//sdiehl.github.io/gevent-tutorial/](http://sdiehl.github.io/gevent-tutorial/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T12:27:05.363

我假设你在谈论 evenlet/gevent greenlets

1）只能运行一个greenlet

2）它是协作多线程，这意味着如果一个greenlet陷入无限循环，你的整个程序就会被卡住，通常greenlet要么显式调度，要么在I/O期间调度

3) 比线程多得多，这取决于可用的 RAM 量

# android - 在正在运行的手机上显示图像

> ID：12758954
> 
> 赞同：0
> 
> 时间：2012-10-06T10:28:24.287
> 
> 标签：android

如何在运行的活动上显示图像同时仍然能够控制背景？如果有人说这是不可能的，请查看这个应用程序： [https ://play.google.com/store/apps/details?id=com.myboyfriendisageek.stickit&hl=en](https://play.google.com/store/apps/details?id=com.myboyfriendisageek.stickit&hl=en)

有没有办法打开一个透明的活动，但仍然能够控制以前的活动？我也尝试过使用吐司，但这是由计时器限制的，我无法找到控制它的方法。

# playframework-2.0 - 如何在 play 2 中发出多个 http 请求？

> ID：12758956
> 
> 赞同：4
> 
> 时间：2012-10-06T10:28:37.793
> 
> 标签：playframework-2.0

我想使用 play 2 对外部 api 发出多个 Web 请求。每个 Web 请求都会因`page`参数而异。我的代码是：

```
static WSRequestHolder urlPaging = WS
        .url("http://my_api")
        .setQueryParameter("apiKey", "api_key")
        .setQueryParameter("pageSize", "5")
        .setQueryParameter("format", "json");

public static Result insertProducts() {
    int totalPages = 83;
    Logger.info("total pages: " + totalPages);
    for (int currentPage = 1; currentPage < totalPages; currentPage++) {
        Logger.info("--current page:" + currentPage);
        result(currentPage);
    }
    return ok();
}

public static AsyncResult result(int currentPage) {
    return async(urlPaging
            .setQueryParameter("page", String.valueOf(currentPage)).get()
            .map(new Function<WS.Response, Result>() {
                public Result apply(WS.Response response) {
                    insertProductsFromPage(response);
                    return ok();
                }
            }));
} 
```

它适用于第 1 页，但给我第 2 页的内部错误，所以我怀疑我没有`result`正确构建异步请求方法。请注意，我不需要这个真正的异步，因为我是从管理员运行的，我可以在那里等到所有这些请求都被解析，但我在 play 2 中没有找到同步方式。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T12:48:25.927

如果要同步进行外部 WS 调用，只需使用promise的[get()方法即可。](http://www.playframework.org/documentation/api/2.0.4/java/play/libs/F.Promise.html#get%28%29)

例如：

```
Promise<WS.Response> promise = urlPaging.setQueryParameter("page", String.valueOf(currentPage)).get();
WS.Response response = promise.get(); // wait for the result of the promise. 
```

# c++ - 对类的未定义引用

> ID：12758958
> 
> 赞同：0
> 
> 时间：2012-10-06T10:28:44.477
> 
> 标签：c++, qt, class, qt4

我正在 Qt4 中构建一个小游戏。这是代码：

液晶控制.h：

```
#ifndef LCDCONTROL_H
#define LCDCONTROL_H

#include <QLCDNumber>
#include <QtGui>
#include <QWidget>

class lcdControl: public QWidget
{
    Q_OBJECT

public:
    lcdControl(QWidget *parent=0);

signals:
    void valueChanged(int newValue);

public slots:
    void setValue(int value);
    //void setRange(int minValue, int maxValue);
    //void quit();

private:
    QSlider *slider;
    //QPushButton *quitbutton;

};

#endif 
```

液晶控制.cpp：

```
#include <QLCDNumber>
#include <QSlider>
#include <QGridLayout>

#include "lcdcontrol.h"

lcdControl::lcdControl(QWidget *parent): QWidget(parent)
{

    QLCDNumber *lcd = new QLCDNumber(2);                //2 for 2 digits
    lcd->setSegmentStyle(QLCDNumber::Filled);

    slider = new QSlider(Qt::Horizontal);
    slider->setRange(0,99);
    slider->setValue(0);

    connect(slider,SIGNAL(valueChanged(int)),lcd,SLOT(display(int)));   
    connect(slider,SIGNAL(valueChanged(int)),this,SIGNAL(valueChanged(int)));   

    QVBoxLayout *layout = new QVBoxLayout;
    layout->addWidget(lcd);
    layout->addWidget(slider);
    setLayout(layout);

    setFocusProxy(slider);
}

void lcdControl::setValue(int value)
{
    slider->setValue(value);
} 
```

绘图.h：

```
#ifndef DRAWING_H
#define DRAWING_H

#include <QPushButton>

class drawingClass : public QWidget
{
    Q_OBJECT
public:
    drawingClass(QWidget *parent=0);

private:
    QPushButton *quitbutton;
};

#endif 
```

绘图.cpp：

```
#include <QVBoxLayout>
#include <QGridLayout>
#include <QtGui>
#include "drawing.h"
#include "lcdcontrol.h"

drawingClass::drawingClass(QWidget *parent): QWidget(parent)
{

    quitbutton = new QPushButton(tr("&Quit!"));
    connect(quitbutton,SIGNAL(clicked()),qApp,SLOT(quit()));

    lcdControl *angle = new lcdControl;
    lcdControl *force = new lcdControl;

    QVBoxLayout *leftlayout = new QVBoxLayout;
    leftlayout->addWidget(angle);
    leftlayout->addWidget(force);

    QGridLayout *mainlayout = new QGridLayout;
    mainlayout->addWidget(quitbutton,0,0);
    mainlayout->addLayout(leftlayout);
    mainlayout->setColumnStrech(1,10);
    setLayout(mainlayout);
} 
```

主文件

```
#include <QApplication>
#include <QtGui>
#include "drawing.h"

int main(int argc, char **argv)
{
    QApplication app(argc,argv);
    drawingClass ob;
    ob.resize(500,200);
    ob.show();
    return app.exec();
} 
```

错误是：

```
main.cpp:(.text.startup+0x28): undefined reference to `drawingClass::drawingClass(QWidget*)'
main.cpp:(.text.startup+0x6e): undefined reference to `vtable for drawingClass'
main.cpp:(.text.startup+0x77): undefined reference to `vtable for drawingClass'
main.cpp:(.text.startup+0xb4): undefined reference to `vtable for drawingClass'
main.cpp:(.text.startup+0xbd): undefined reference to `vtable for drawingClass'
collect2: ld returned 1 exit status 
```

这个你能帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:32:50.443

您尚未为链接器提供`drawingClass`构造函数的定义。

您很可能忘记将该 .cpp 文件添加到项目中。

# android - Android - RotateAnimation onClick 按钮自行重启

> ID：12758960
> 
> 赞同：0
> 
> 时间：2012-10-06T10:28:56.357
> 
> 标签：android, rotateanimation

这是单击按钮时旋转图像的java代码。图像旋转它是完美的，但如果我在旋转未结束时再次单击按钮，动画会重新启动，而不是结束动画。如何等待动画结束？我找到了 Animation.AnimationListener，我认为 onAnimationEnd 对我很有用，但我无法将它集成到我的代码中......请帮助我:-)

```
package com.example.helloword;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.animation.AccelerateDecelerateInterpolator;
import android.view.animation.Animation;
import android.view.animation.RotateAnimation;
import android.widget.Button;
import android.widget.ImageView;

public class Rotation_test extends Activity {

    private float statdegree = (float) 0.0;
    private float enddegree = (float) 90.0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rotation_test);

        // ---------------------------------------------------------------------------------------------
        Button buttonRotateCenter = (Button) findViewById(R.id.rotatecenter);
        final ImageView floatingImage = (ImageView) findViewById(R.id.floatingimage);

        // AnimationRotation
        final Animation animationRotateCenter = new RotateAnimation(statdegree,
                enddegree, Animation.RELATIVE_TO_SELF, 0.5f,
                Animation.RELATIVE_TO_SELF, 0.5f);
        animationRotateCenter.setDuration(5000L);
        animationRotateCenter
                .setInterpolator(new AccelerateDecelerateInterpolator());
        // \AnimationRotation

        buttonRotateCenter.setOnClickListener(new Button.OnClickListener() {

            public void onClick(View arg0) {
                floatingImage.startAnimation(animationRotateCenter);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_rotation_test, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:34:56.527

您必须采用一个布尔变量来跟踪动画是否正在进行中。然后在动画侦听器中使用此变量并单击按钮，如下代码

```
buttonRotateCenter.setOnClickListener(new Button.OnClickListener() {

            public void onClick(View arg0) {
if(!anim_in_progress)
                floatingImage.startAnimation(animationRotateCenter);
            }
        });
    animationRotateCenter.setAnimationListener(new anim_listener());

}
boolean anim_in_progress=false;

class anim_listener implements AnimationListener
     {

        @Override
        public void onAnimationEnd(Animation arg0) {
        anim_in_progress=false;

        }

        @Override
        public void onAnimationRepeat(Animation arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationStart(Animation arg0) {
            // TODO Auto-generated method stub
            anim_in_progress=true;

        }

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:40:59.470

从来没有试过这个，但可能会奏效

```
 buttonRotateCenter.setOnClickListener(new Button.OnClickListener() {

        public void onClick(View arg0) {
            if(!floatingImage.hasTransientState())
               floatingImage.startAnimation(animationRotateCenter);
        }
    }); 
```

# python - 如何访问 fb 访问令牌表单服务器运行程序（python）

> ID：12758961
> 
> 赞同：1
> 
> 时间：2012-10-06T10:29:02.123
> 
> 标签：python, facebook, facebook-javascript-sdk, facebook-php-sdk

我开发了一个 fb 应用程序，前端与我自己的数据库一起工作得很好。

现在我想制作一个通过命令行运行的 python 程序，该程序发布到我的 fb 帐户。我知道我需要访问访问令牌，因为我在访问 fb 外部的应用程序时遇到此问题，除非在 fb iframe 内运行，否则该应用程序无法正常运行。那么是否有python sdk等，以便我可以访问访问令牌和/或将访问令牌存储在数据库中，以便python可以将其拉出然后使用python sdk发布（如果存在）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:36:06.117

> PyFacebook 是一个瘦包装器，用于通过 Python 访问 Facebook 的 RESTful API。

[https://github.com/pythonforfacebook/facebook-sdk](https://github.com/pythonforfacebook/facebook-sdk)

> facebook-sdk，一组用于在 Python 中使用 Facebook 的基本工具。django-facebook，一个可扩展的 django 插件，用于构建 facebook 集成站点。

[http://www.pythonforfacebook.com/](http://www.pythonforfacebook.com/)

# android - android animator - 将视图缩放到中心（Froyo）

> ID：12758962
> 
> 赞同：0
> 
> 时间：2012-10-06T10:29:05.873
> 
> 标签：android, android-animation, android-ui

我在我的 android 应用程序中有一个视图，我想缩放并逐渐消失到它的中心。到目前为止，我有以下

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:fillAfter="true" >

<scale
    android:duration="1500"
    android:fromXScale="1.0"
    android:fromYScale="1.0"
    android:toXScale="0"
    android:toYScale="0" />

<alpha
    android:duration="1500"
    android:fromAlpha="1"
    android:toAlpha="0" />

</set> 
```

但这会导致文本“缩小”到左上角的不良效果。我该如何纠正这个问题，使其缩放到视图的中心？我需要这个 API >=8 。

感谢您的任何提示。

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:47:50.210

自己找到了解决方案，pivotX 和 pivotY 正在解决问题

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:fillAfter="true" >

<scale
    android:duration="1500"
    android:fromXScale="1.0"
    android:fromYScale="1.0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="0"
    android:toYScale="0" />

<alpha
    android:duration="1500"
    android:fromAlpha="1"
    android:toAlpha="0" />

</set> 
```

# node.js - Nodejs/Express POST 请求中间件无法在回调中调用 next()

> ID：12758983
> 
> 赞同：1
> 
> 时间：2012-10-06T10:32:39.630
> 
> 标签：node.js, callback, express, middleware

Express中有很奇怪的行为，想不通，头脑崩溃的问题。

所以假设`req.user`我有用户 ID，这是我的中间件代码。

```
app.use(function(req, res, next){
  var User = mongoose.model('User');
  User.findById(req.user, function(err, user){
    if(err) return next(err);
    res.locals.user = user;
    console.log(user);
    next(); 
  });
} 
```

所以当请求类型是**GET**时它工作得很好，但是如果请求是**POST**它只会无限等待，直到我收到**No data received**。

数据库和会话都没有问题：`console.log(user)`总是有效。

这非常非常奇怪......我什至尝试使用另一个异步函数，但它对于仅 POST 请求再次不起作用。

```
fs.stat(__dirname + '/schemas/user.js', function(err, stat){
  next();
}) 
```

我的结论是，如果`next()`在 POST 请求期间从回调中调用它只是挂起，但谁能解释我为什么？

*把我带到这里的最初问题是当我尝试使用 passport.js 反序列化器时，它会从 mongodb 读取每个请求的用户，因此对于仅 POST 请求也失败。*

**配置**

```
{
  "name": "myApp",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "./node_modules/.bin/nodemon app.js"
  },
  "dependencies": {
    "express": "3.0.0rc5", //did also tried with rc4
    "ejs": ">= 0.8.3",
    "express-partials": "latest",
    "mongodb": ">= 1.1.7",
    "mongoose": "*",
    "node-uuid": "*",
    "passport": "*",
    "passport-local": "*",
    "flashify": "*",
    "nodemon": "latest"
  }
} 
```

**快速配置**

```
var app = express();
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.logger('dev'));
  app.use(partials());
  app.use(express.cookieParser('Secret secret'));
  app.use(express.session());
  app.use(passport.initialize());
  app.use(passport.session());

  app.use(MY_MIDDLEWARE_HERE);

  app.use(express.favicon());  
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(flashify);
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T17:28:15.540

我不确定这是否会产生影响，但建议`bodyParser`在中间件堆栈的早期使用中间件。我会把它放在`cookieParser`护照中间件的上下，因为许多身份验证机制需要在正文中查找参数。

# php - 使用 PHP 对 MYSQL 条目进行分组

> ID：12758984
> 
> 赞同：1
> 
> 时间：2012-10-06T10:32:39.957
> 
> 标签：php, mysql

我有一个像这个例子的 MYSQL 表：

```
[ID]--[Date]--[UserID]--[Username]--[String]

1  12-10-06 02:35:01  25  Jack  string1
2  12-10-06 02:38:01  25  Jack  string2
3  12-10-06 02:40:01  25  Jack  END
4  12-10-06 02:42:01  36  Jill  string1
5  12-10-06 02:45:01  36  Jill  string2
6  12-10-06 02:48:01  36  Jill  END
7  12-10-06 02:50:01  25  Jack  string1
8  12-10-06 02:52:01  25  Jack  string2
9  12-10-06 02:55:01  25  Jack  END 
```

我正在使用这个 MYSQL 查询对它们进行分组：

```
SELECT m1.Date, m1.Username, m1.UserID
FROM Username m1 LEFT JOIN Username m2
 ON (m1.UserID = m2.UserID AND m1.ID < m2.ID)
WHERE m2.ID IS NULL
ORDER BY Date DESC 
```

它可以工作，但这个查询的问题是它只给出每个用户的最后一个条目作为输出：

```
6  12-10-06 02:48:01  36  Jill
9  12-10-06 02:55:01  25  Jack 
```

我想将所有会话作为输出，例如：

```
12-10-06 02:35:01 - 12-10-06 02:40:01 25 Jack
12-10-06 02:42:01 - 12-10-06 02:48:01 25 Jill
12-10-06 02:50:01 - 12-10-06 02:55:01 25 Jack 
```

我怎样才能用 PHP 和 MYSQL 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:54:45.277

好吧，我怀疑你是否曾经想查询整个数据库的会话，所以对于你想要的块，我想我只会获取结尾，然后为它们中的每一个请求一个不同的。

做这样的事情

```
select UserID, Date, Username from Username order by Date desc limit 10 
```

然后对于这些条目中的每一个你可以做

获取用户最后一次会话结束的时间：

```
select max(Date) from Username where UserID = $userId and Date < '$date' and String = 'cikis' 
```

获取这两个日期之间的最小日期：

```
select min(Date) from Username where Date > '$lastSessionEndDate' and Date < '$date' 
```

它不应该过多地打击数据库，只需构建适当的索引并将查询限制在真正有用的范围内，而不是无缘无故地提供所有会话的完整报告。

# http - 为什么有这么多 mime 类型？

> ID：12758985
> 
> 赞同：0
> 
> 时间：2012-10-06T10:32:44.670
> 
> 标签：http, dom, mime

我只是想知道，为什么单一类型有这么多 mime 类型？像`javascript`mime 类型可以是`text/javascript`or`text/x-javascript`或`application/x-javascript`or `application/javascript`。为什么这样？

*[wikipedia](http://en.wikipedia.org/wiki/Internet_media_type)*将 mime 类型定义为`An Internet media type is a two-part identifier for file formats on the Internet.`那么，不是一种格式，说`text/javascript`不足以定义 JavaScript 文件吗？如果是这样，为什么会有吨？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:45:51.317

如果没有标准存在，或者标准难以理解或晦涩难懂，则不同的人将各自组成自己的标准。即使有标准，复制/粘贴编程和货物崇拜的做法往往会使任何旧的标准前怪物确实很难被杀死。

作为记录，[RFC 4329](http://www.rfc-editor.org/rfc/rfc4329.txt)指定`application/javascript`和`application/ecmascript`作为标准，甚至包含相对常用的非官方/临时类型的历史概述。

# php - facebook graph api事件：无效时间

> ID：12758986
> 
> 赞同：1
> 
> 时间：2012-10-06T10:32:49.167
> 
> 标签：php, facebook, facebook-graph-api, time

我使用下面的代码来创建一个事件，但我得到了`"error":{"message":"(#100) You must enter a valid date and time`

```
 $event_name = "New Event API Test Event";
  $event_start = time() + 60*60;  
  $event_privacy = "SECRET"; 

    $attachment =  array(   'access_token'  => $token,
                              'name' => $event_name,
                                    'start_time' => $event_start,
                                    'privacy_type' => $event_privacy
     ); 
```

`$event_start`返回`1349522919`。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:46:34.263

而不是这`'start_time' => $event_start`条线，

```
'start_time' => date('Y-m-d h:i:s',$event_start), 
```

我认为它可以帮助你。

# java - BlueJ 数组列表参数。

> ID：12758988
> 
> 赞同：0
> 
> 时间：2012-10-06T10:32:53.470
> 
> 标签：java, arraylist, bluej

我在 Blue J 中为我的作业创建了一个带有数组列表的类，它可以编译，但我不知道如何测试它。我必须在方法调用中键入什么（参数？），例如

```
public void addJob(Job job) 

public boolean runJob() 
```

我知道对于 int，我只需要输入诸如 2 之类的数字和字符串“B”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:57:01.013

首先，您必须创建一个`Job`类的实例并为其命名，例如`job1`. 这可以通过右键单击类然后单击 来完成`new Job()`。生成的对象将列在 BlueJ 窗口底部的框中​​，并可在您的 BlueJ 项目中使用。

现在`addJob(Job job)`使用`job1`（只需输入对象的名称，不带引号）作为参数调用该方法，您的测试应该可以工作。

# ruby - Ruby产量示例解释？

> ID：12758990
> 
> 赞同：1
> 
> 时间：2012-10-06T10:32:59.037
> 
> 标签：ruby, block, yield, enumerable

我正在用 Ruby 上一门 SaaS 课程。在一个练习中，我被要求使用迭代器、块和产量来计算两个序列的笛卡尔积。

通过纯粹的猜测和错误，我最终得到了这个，它似乎有效。但我不确定如何。我似乎了解基本块和产量用法，但是这个？一点也不。

```
class CartProd
  include Enumerable
  def initialize(a,b)
        @a = a
        @b = b
  end
  def each
        @a.each{|ae|
                @b.each{|be|
                        yield [ae,be]
                }
        }
  end
end 
```

请给像我这样的菜鸟一些解释，好吗？

（PS：我将所需的类名更改为 CartProd，因此学习该课程的人无法通过谷歌搜索轻松找到响应）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T13:49:48.383

让我们一步一步地构建它。我们将通过将其从类上下文中删除来简化一些事情。

对于这个例子，很直观地认为迭代器是传统 for 循环的更强大的替代品。

所以首先这是一个for循环版本：

```
seq1 = (0..2)
seq2 = (0..2)
for x in seq1
  for y in seq2
    p [x,y] # shorthand for puts [x, y].inspect
  end
end 
```

现在让我们用更多 Ruby 惯用的迭代器样式替换它，显式提供要执行的块（即`do...end`块）：

```
seq1.each do |x|
  seq2.each do |y|
    p [x,y]
  end
end 
```

到目前为止，一切顺利，您已经打印出了笛卡尔积。现在你的作业也要求你使用`yield`。的重点`yield`是“让步执行”，即将控制权临时传递给另一个代码块（可选地传递一个或多个参数）。

因此，尽管对于这个玩具示例来说这并不是*真正*必要的，但您可以直接打印该值，而不是像上面那样直接打印该`yield`值，并让调用者提供一个接受该值并打印它的块。

这可能看起来像这样：

```
 def prod(seq1, seq2)
    seq1.each do |x|
      seq2.each do |y|
        yield [x,y]
      end
    end
  end 
```

像这样调用：

```
prod (1..2), (1..2) do |prod| p prod end 
```

为内部循环的`yield`每次运行提供产品，并且生成的值由调用者提供的块打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:31:58.480

What exactly do you not understand here? You've made an iterator that yields all possible pairs of elements. If you pass `CartProd#each` a block, it will be executed `a.length*b.length` times. It's like having two different `for` cycles folded one into another in any other programming language.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:29:43.853

*yield*只是将控制权传递给作为方法调用的一部分传入的代码块。yield 关键字之后的值作为参数传递到块中。一旦块完成执行，它就会传回控制权。

因此，在您的示例中，您可以像这样调用#each：

```
CartProd.new([1, 2], [3, 4]).each do |pair|
  # control is yielded to this block
  p pair
  # control is returned at end of block
end 
```

这将输出每对值。

# android - 在 Android 上使用 GLSL ES (OpenGL ES 2.0) 渲染茶壶

> ID：12758991
> 
> 赞同：3
> 
> 时间：2012-10-06T10:33:02.813
> 
> 标签：android, rendering, opengl-es-2.0, augmented-reality

我正在尝试在 Android 设备上演示增强现实跟踪解决方案。之前在PC上工作的时候，我用GLUT来渲染一个茶壶来做demo。但是，当我切换到使用 OpenGL ES 2.0 进行渲染（GLSL ES）的手机时，我想不出一个简单的方法来绘制茶壶模型。感谢任何可以帮助我解决这个问题的建议或任何资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:28:24.170

您可以先尝试从 Android 动态壁纸演示中复制环境：
例如 [https://github.com/ghisguth/blurred-lines-live](https://github.com/ghisguth/blurred-lines-live)

然后下一个问题是将茶壶的几何形状提供给顶点缓冲区而不是随机线；下一步将是使用绘制三角形而不是线条，并在某处复制一个像样的顶点着色器，该着色器进行透视变换，然后在某处获取纹理片段着色器并（以某种方式）初始化纹理（如果不是程序...）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T10:37:58.177

GLUT 是一个非常古老的库，用于在一个库中处理不同的 OpenGL 环境和上下文定义。

在 GLUT 之后出现了 FreeGLUT，它是当今最流行的库，但它并不是真正的标准，它更像是原始 GLUT 的自由端口和演变，而不是可以从 OEM 获得某种支持的东西。

现代 OpenGL ES 设备需要 EGL，EGL 在 Android 下是强制性的，您需要以某种方式使用 EGL。

# ruby-on-rails - Rails 每个都做平均

> ID：12758992
> 
> 赞同：0
> 
> 时间：2012-10-06T10:33:21.810
> 
> 标签：ruby-on-rails, ruby

我试图在产品表中获取价格的平均值并将其存储在一个名为平均值的变量中。

这是我的代码：

```
def index
    @products = Product.all
    @average = 0
    @i = 0

    @products.each do |p|
       i += 1
       average += p.price
    end

    average = average / i
end 
```

我在“i += 1 statement”上收到错误“undefined method `+' for nil:NilClass”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:38:43.530

在 Ruby on Rails 中，您的模型有预定义的[聚合方法](http://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html)来计算平均值、总和、计数、最小值、最大值等。

在您的特殊情况下，您可以执行以下操作：

```
@average = Product.average(:price) 
```

它将实际工作分派给 SQL，这将比 Ruby 代码做得更好。它将产生一个类似的 SQL 查询（这是一个 MySQL 示例）：

```
SELECT AVG(`products`.`price`) AS avg_id FROM `products` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:35:18.590

您正在设置`i`为*实例*变量 ( `@i`)，但将其称为常规变量 ( `i`)。

将其初始化为零时将其删除，或将对 的`@`引用更改`i`为`@i`。

您可能不想`i`在此方法之后重复使用您的方法，因此您可能只需要一个常规变量。像这样。（您的 也有类似的问题，`@average`您可能*确实*希望在该方法之后持续存在。）

```
def index
    @products = Product.all
    @average = 0
    i = 0

    @products.each do |p|
       i += 1
       @average += p.price
    end

    @average = @average / i
end 
```

有一种更简洁的方法可以从 ActiveRecord 集合中计算平均值（您可以直接在 SQL 中进行），但我不会提及这些，因为您正在做的可能是学习 Ruby 的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T10:41:50.707

使用..我想你忘了@符号

```
def index
        @products = Product.all
        @average = 0
        @i = 0

        @products.each do |p|
           @i += 1
           @average += p.price
        end

        @average = @average / @i
    end 
```

# c# - 在为我的 MVC 登录做 try catch 时，我应该检查 ModelState 吗？

> ID：12758995
> 
> 赞同：1
> 
> 时间：2012-10-06T10:33:48.900
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

有人可以帮我弄这个吗。我希望将此代码放入尝试捕获中。但我不能说如何最好地实现这一点：

```
public JsonResult JsonLogin(LoginModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                if (Membership.ValidateUser(model.UserName, model.Password))
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                    return Json(new JsonDialog
                    {
                        Redirect = returnUrl,
                        Success = true
                    });
                }
                else
                {
                    ModelState.AddModelError("", "The user name or password provided is incorrect.");
                }
            }
            // If we got this far, something failed
            return Json(new JsonDialog
            {
                Errors = GetErrorsFromModelState(),
                Success = false
            });
        } 
```

我应该把包括第一个“if”在内的所有代码都放在try catch中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:05:09.207

我认为你根本不应该在这里尝试一下。您在这里期望的例外是什么。

相反，我会考虑在您的控制器上使用 Elmah 和 HandleError 属性，或者如果您有基本控制器，请阅读以下内容：

[如何让 ELMAH 与 ASP.NET MVC [HandleError] 属性一起使用？](https://stackoverflow.com/questions/766610/how-to-get-elmah-to-work-with-asp-net-mvc-handleerror-attribute)

# iphone - 实施上一篇/下一篇

> ID：12758997
> 
> 赞同：-1
> 
> 时间：2012-10-06T10:34:14.280
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

我正在从网上获取一些文章。我将它们加载到数组中并将它们传递给 DetailViewController，我有 2 个按钮 - 与 Mail 一样，您按 ^ 并转到下一篇文章。

现在我通过使用对象获取该数组的下一个对象来做到这一点。

但这是最有效的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:14:41.610

是的。（除非您想更改用户界面，在这种情况下，您可能需要考虑左右滑动而不是按下按钮。）