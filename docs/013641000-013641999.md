# StackOverflow 问答 13641000-13641999

# iphone - 如何使用 NSCalendar 根据当天获取第二天

> ID：13641000
> 
> 赞同：0
> 
> 时间：2012-11-30T07:48:55.387
> 
> 标签：iphone, objective-c, xcode, nscalendar

我正在做一些天气应用程序，因为我想显示 4 天的预报，即从当天到接下来的 3 天。我得到了今天，代码是

NSCalendar* cal = [NSCalendar currentCalendar];

```
NSDateComponents* comp = [cal components:NSWeekdayCalendarUnit fromDate:[NSDate date]];

 // 1 = Sunday, 2 = Monday, etc.

 NSInteger day0 = comp.weekday;

    NSLog(@"My DAY is %i", day0);

NSString *str;

NSMutableString *myString = [NSMutableString string];

str = [NSString stringWithFormat:@"%d",day0]; //%d or %i both is ok.

[myString appendString:str];

NSLog(@"My DAY is %@", myString); 
```

输出为 6 即周五 .... 很酷

我怎样才能在不增加当天的情况下获得第二天...我试图增加当天，但问题是，如果我将当天的日期设为 7，它会增加到 8，在平日没有这样的事情对..我是xcode的新手..帮帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:25:06.397

> “我怎样才能在不增加当前日期的情况下获得第二天......”

如果你想要一个 NSDate 对象代表每一天，你可以使用 NSDateComponents 来加起来：

```
NSDate *today = [NSDate date];
NSDateComponents *offset = [[NSDateComponents alloc] init];
offset.day = 1; // create a one day offset
NSDate *tomorrow = [[NSCalendar currentCalendar] dateByAddingComponents:offset toDate:today options:0]; 
```

然后得到你的工作日：

```
[[NSCalendar currentCalendar] components: NSWeekdayCalendarUnit fromDate:tomorrow]; 
```

> “我试图增加当前日期，但问题是，如果我将当前日期设为 7，它会增加到 8，在平日没有这样的事情对..”

如果仅增加今天的工作日就足够了，请使用简单的模（这在任何编程语言中都是基本的）：

```
int weekdayOfTomorrow = (++weekdayOfToday % 7) + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:23:29.100

尝试以下操作：

```
NSDateComponents *dayComponent = [NSDateComponents new];
dayComponent.day = 1;
today = [calendar dateByAddingComponents:dayComponent toDate:today options:0]; 
```

# javascript - 元素 ID 不变

> ID：13641001
> 
> 赞同：0
> 
> 时间：2012-11-30T07:48:59.357
> 
> 标签：javascript, html, css

我有一个绑定到键的 id 更改，但由于某种原因，它始终无法运行 - 尽管其他更改在键绑定中运行完美，并且用于更改 id 的代码与程序中其他地方的功能代码相同。

相关代码：

```
var KeyBind = function() {
    if (document.addEventListener) {
        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keydown", keyUpHandler, false);
    }
    else if (document.attachEvent) {
        document.attachEvent("onkeydown", function() {
            keyDownHandler(window.event);
        });
        document.attachEvent("onkeydown", function() {
            keyUpHandler(window.event);
        });
    }

    function keyDownHandler(e) {
        var key = e.which || e.keyCode
        if (key == "50"){
            document.getElementById('Player').id='PlayerLeft';
            document.getElementById('PlayerLeft').style.webkitAnimationPlayState="running";
            setTimeout(function(){
                document.getElementById('PlayerLeft').style.webkitAnimationPlayState="paused";
            }, 200);
        }

        if (key == "49"){
            document.getElementById('PlayerLeft').style.webkitAnimationPlayState="running";
            setTimeout(function(){
                document.getElementById('PlayerLeft').style.webkitAnimationPlayState="paused";
            }, 800);                
        };

        if (key == "57"){
            //setTimeout(function(){
            document.getElementById('PlayerLeft2').style.webkitAnimationPlayState="running";
            //}, 800);

            setTimeout(function(){
                document.getElementById('PlayerLeft2').style.webkitAnimationPlayState="paused";
            }, /*1*/350);

            /*setTimeout(function(){
                document.getElementById('PlayerLeft2').style.webkitAnimationPlayState="running";
            }, 1150);

            setTimeout(function(){
                document.getElementById('PlayerLeft2').id='Player';                 
            }, 1500);*/         
        };

        if (key == "57" && document.getElementById('PlayerLeft2').style.left>="681px"){
            document.getElementById('PlayerLeft2').style.webkitAnimationPlayState="running";
            var idChanger = function(){
                document.getElementById('PlayerLeft2').id='Player';
            };
            setTimeout(//function(){                    
                idChanger
            /*}*/, 100);
        };                                                                              
    };
}(); 
```

jsfiddle：http: [//jsfiddle.net/6JUaB/](http://jsfiddle.net/6JUaB/)

# c# - 使用 WMI 在 Windows 服务中当前登录的用户名

> ID：13641004
> 
> 赞同：1
> 
> 时间：2012-11-30T07:49:05.493
> 
> 标签：c#, windows-services

我在 Windows 服务中使用以下代码来获取当前登录的用户名，

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT UserName FROM Win32_ComputerSystem");
ManagementObjectCollection collection = searcher.Get();
strUser = (string)collection.Cast<ManagementBaseObject>().First()["UserName"]; 
```

它适用于所有机器，但有几台机器返回域名\域名\用户名。所有其他机器工作正常。任何想法？

# ruby-on-rails - Rails Postgresql 随机排序

> ID：13641007
> 
> 赞同：10
> 
> 时间：2012-11-30T07:49:15.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, ruby-on-rails-3.2

我正在尝试从 postgres 数据库中提取行，我可以将它们拉出 desc 但是当我尝试随机时，我得到一个接近随机的语法错误。

**错误**

```
PG::Error: ERROR:  syntax error at or near "rand"
LINE 1: ...  "hashtags".* FROM "hashtags"  ORDER BY tweet_id rand LIMIT...
                                                             ^
: SELECT  "hashtags".* FROM "hashtags"  ORDER BY tweet_id rand LIMIT 4 
```

**将其拉出的代码**

```
<div id="hashtags">
<% Hashtag.order("tweet_id desc").limit(4).each do |hashtag| %>
   <blockquote><%= hashtag.content %></blockquote>
   <div class="from">&mdash; @<%= hashtag.screen_name %></div>
 <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-30T08:00:35.623

要从数据库中获取随机条目，您有几个选项。这里有一对

**第一种方法**

这将使用 SQL 从您的数据库中取出 4 个随机条目。

```
Hashtag.order("RANDOM()").limit(4) 
```

**第二种方法：**

您还可以使用 ActiveRecord sample() 方法检索 4 个随机行。

```
Hashtag.all.sample(4) 
```

至于**速度**和效率；我做了一个迷你基准测试并在我自己的数据库上测试了两个命令（包含 500 条记录）。第一种方法（如预期的那样）比第二种方法快两倍多。

```
SQL: 1.8ms
Sample Method: 4.2ms 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T18:59:01.680

只想说。我试图使用 postgres 对我的条目进行洗牌，但发现一个帖子`@instace.shuffle.each`做得更好。

# jquery - Jquery Lightbox 无法从灯箱中退出

> ID：13641008
> 
> 赞同：0
> 
> 时间：2012-11-30T07:49:16.753
> 
> 标签：jquery, wordpress, lightbox

我已经使用了这些代码并在 worddpress 上进行了设置

[http://www.netmagazine.com/tutorials/build-lightbox-responsive-html5-touch-interface](http://www.netmagazine.com/tutorials/build-lightbox-responsive-html5-touch-interface)

为我的图像获得灯箱效果。下一个，上一个按钮不起作用，也没有

我可以从弹出的灯箱中退出吗

# visual-studio-2010 - Panda3D 不采用最新型号

> ID：13641009
> 
> 赞同：1
> 
> 时间：2012-11-30T07:49:21.327
> 
> 标签：visual-studio-2010, panda3d

到目前为止，我对 Panda3d 的导入模型感到非常沮丧。Panda3d 只会导入一次模型，并且永远不会再更新（即使更改了 .egg 文件的名称）

我首先将一个模型（我们称之为版本 1）导入到 VS2010 panda3d 中。然后我在 3dsMax 中修改了模型并再次将其导出到 egg（版本 2）。但是，无论我导入多少次，panda3d 都会顽固地使用版本 1。重命名 .egg 也无济于事。我怀疑 panda3d 缓存系统正在缓存我以前的模型，并且有一些重要的东西将所有版本链接在一起，默认 panda3d 引擎回到版本 1。

主要问题是，我如何解决 panda3d 没有采用最新模型的问题？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:06:58.647

如果您在 Panda3D 论坛上提问，我认为您会更快地获得有关 Panda3D 的问题的答案。

但是为了回答您的具体问题，Panda 确实包含了一个模型缓存，默认情况下（在会话期间）读取特定文件名一次，但在同一会话期间不会再次读取磁盘，即使文件发生更改（但您可以显式如果需要，请它再次读取磁盘）。Panda 还有一个永久性磁盘缓存，默认情况下也会缓存会话之间模型的加载，但在这种情况下，它总是在盲目返回之前的模型之前检查文件的时间戳，如果文件更新，它将始终重新阅读并返回新版本。

如果您完全重命名文件，在这两种情况下都不会返回缓存版本，因此在这种情况下必须进行其他操作。

禁用缓存的精确方式取决于您用于加载模型的特定调用。您引用了 VS2010，所以我推断您是用 C++ 编写的（但官方不支持使用 VS2010 而不是 VS2008，因此除非您无法正确使用 VS2010，否则您可能还会遇到其他问题）。

要避免特定模型的缓存，请尝试将带有标志中设置的 LF_no_cache 位的 LoaderOptions 对象传递给 ModelPool::load_model() （或您用于加载模型的任何接口）。

# c++ - char、unsigned char 和 signed char 的 C/C++ 底层表示

> ID：13641014
> 
> 赞同：2
> 
> 时间：2012-11-30T07:50:08.877
> 
> 标签：c++, c, char, undefined-behavior, integer-overflow

我是否正确地说以下每个定义中的基础对象表示（位模式）是相同的？

```
char c = 240;
unsigned char c = 240;
signed char c = 240; 
```

那么，仅当在表达式（或强制转换）中使用*签名*时才重要？`c`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:57:39.047

`signed char`在一般情况下，如果 的范围不涵盖，则说模式相同是不正确的`240`。如果`240`超出范围，则此溢出初始化的结果是实现定义的（并可能产生信号，请参见 6.3.1.3/3）。`char`如果已签名，这同样适用于初始化。

该语言保证仅匹配`signed char`和范围的公共部分的表示`unsigned char`。例如，这保证产生相同的模式

```
char c = 10;
unsigned char c = 10;
signed char c = 10; 
```

在`240`一般情况下没有这样的保证（假设它超出范围）。

# java - 项目构造函数中的 Java Enum 私有方法

> ID：13641019
> 
> 赞同：4
> 
> 时间：2012-11-30T07:50:18.503
> 
> 标签：java, enums, inner-classes

```
public enum Parent {
    item1(1){

        public void testing() {
            add();
            multiply();
            minus(); // error here!!!
        } 

    }, item2(2);

    private int i ;
    Parent(int i){
        this.i = i;
    }

    public void setI(int i ){
        this.i = i;
    }
    public int getI(){
        return i;
    }

    public void multiply(){

    }
    protected void add(){

    }

    private void minus(){

    }
} 
```

大家看到了，他们是同一个班的，怎么`minus()`不能在内部使用呢？通常内部类可以`private method/field`在外部类中访问吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T07:53:30.923

为了能够从 访问`minus()`，`item1`您必须成功`protected`（或`public`）。

正确的思考方式`Parent`是`item1`作为基类和子类。

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.1)：

> 枚举常量的可选类主体隐式定义了一个匿名类声明（第 15.9.5 节） ，该声明**扩展了直接封闭的枚举类型**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T07:59:11.853

实际上发生的情况是，当您在创建枚举对象时提供实现时，您基本上是在`Parent`使用额外的方法扩展类，即**匿名**实现。所以它不允许访问`Parent`类的私有方法，但允许`protected`and `public`。

```
enum A{
        a{
            @Override
            public void method() {
                // TODO Auto-generated method stub
                super.method();
            }
        };

        public void method(){

        }
    } 
```

这应该解释看`@Override`eclipse提供的注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T07:55:06.320

问题是“item1”不是Parent的内部类，它实际上是顶级类。要验证 item1 生成的类，它是 Parent$1.class，如果它是一个内部类，它将是 Parent$item1.class

# jquery - 如何在 jquery ui datepicker 中添加周数？

> ID：13641021
> 
> 赞同：1
> 
> 时间：2012-11-30T07:50:20.467
> 
> 标签：jquery, jquery-ui-datepicker, uidatepicker

这是我的 jsp 页面，因为我使用的是日期选择器，但不是从两个日期选择器的范围，我只想使用周。如果我选​​择了开始日期，然后我必须写下周数，然后我该如何计算结束日期基于该周数和开始日期？我是这个 jquery 的新手，所以任何人都可以帮助我吗？

```
<%@page import="com.liferay.portal.model.Role"%>
    <%@page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
    <%@page import="com.liferay.portal.util.PortalUtil"%>
    <%@page import="com.liferay.portal.model.Organization"%>
    <%@ include file="/init.jsp"%>
    <script src="<%=request.getContextPath()%>/js/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script> 
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.3/themes/south-street/ui.all.css" type="text/css"> 
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script> 

    <script type="text/javascript" src="<%=request.getContextPath() %>/js/jquery.validate.js"></script>
    <script type="text/javascript" src="<%=request.getContextPath() %>/js/jquery.ui.datepicker.validation.js"></script>

    <script src="<%=request.getContextPath()%>/js/jquery.min.js"></script>
    <script type="text/javascript" src="<%=request.getContextPath()%>/js/jquery.validate.js"></script>
    <script type="text/javascript" src="<%=request.getContextPath()%>/js/jquery.ui.datepicker.validation.js"></script>
    <script type="text/javascript" src="<%=request.getContextPath()%>/lib/datepicker/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript" src="<%=request.getContextPath()%>/lib/chosen/chosen.jquery.min.js"></script>
    <script type="text/javascript">
     $(function(){
         $('#validBeforeDatepicker, #validAfterDatepicker').datepicker();           
         $('#validateForm').validate({
             rules:{
                 startDate:{
                     required: true,
                     dpDate: true
                 }
             }
         });
     });
    </script>
    <script type="text/javascript">
    function newcamp(addToDo){   
       var camp_name =document.getElementById('camp_name').value; 
        var camp_description =document.getElementById('camp_description').value;   
        var weeks =document.getElementById('weeks').value;  
       ////make new array to push all the selected value of restId from multi select box 
                        var rest_list = new Array();
                            var mySelectrest = document.getElementById('rest_id');
                            while (mySelectrest.selectedIndex != -1) {                      
                                rest_list.push(mySelectrest.options[mySelectrest.selectedIndex].value);                     
                                mySelectrest.options[mySelectrest.selectedIndex].selected = false;
                            }
                            var str = "";
                            for ( var i = 0; i < rest_list.length; i++) {
                                str = str + rest_list[i];
                                if (i < rest_list.length - 1)
                                    str = str + "-";
                                }
     ////make new array to push all the selected value of Standbyadlist from multi select box   
                        var standbyad_list = new Array();
                            var mySelectstandbyad = document.getElementById('selectstandbyad');
                            while (mySelectstandbyad.selectedIndex != -1) {                         
                                standbyad_list.push(mySelectstandbyad.options[mySelectstandbyad.selectedIndex].value);                          
                                mySelectstandbyad.options[mySelectstandbyad.selectedIndex].selected = false;
                            }
                            var standbyad_str = "";
                            for ( var i = 0; i < standbyad_list.length; i++) {
                                standbyad_str = standbyad_str + standbyad_list[i];
                                if (i < standbyad_list.length - 1)
                                    standbyad_str = standbyad_str + "-";
                                }                       
    ////make new array to push all the selected value of slideradlist from multi select box

                        var sliderad_list = new Array();
                            var mySelectsliderad = document.getElementById('selectsliderad');

                            while (mySelectsliderad.selectedIndex != -1) {

                                sliderad_list.push(mySelectsliderad.options[mySelectsliderad.selectedIndex].value);

                                mySelectsliderad.options[mySelectsliderad.selectedIndex].selected = false;
                            }

                            var sliderad_str = "";
                            for ( var i = 0; i < sliderad_list.length; i++) {
                                sliderad_str = sliderad_str + sliderad_list[i];
                                if (i < sliderad_list.length - 1)
                                    sliderad_str = sliderad_str + "-";
                                }

    ////make new array to push all the selected value of eventbaseadlist from multi select box

                        var eventbasead_list = new Array();
                            var mySelecteventbasead = document.getElementById('selecteventbasead');

                            while (mySelecteventbasead.selectedIndex != -1) {

                                eventbasead_list.push(mySelecteventbasead.options[mySelecteventbasead.selectedIndex].value);

                                mySelecteventbasead.options[mySelecteventbasead.selectedIndex].selected = false;
                            }

                            var eventbasead_str = "";
                            for ( var i = 0; i < eventbasead_list.length; i++) {
                                eventbasead_str = eventbasead_str + eventbasead_list[i];
                                if (i < eventbasead_list.length - 1)
                                    eventbasead_str = eventbasead_str + "-";
                                }

    ////make new array to push all the selected value of homescreenadlist from multi select box

                        var homescreenad_list = new Array();
                            var mySelecthomescreenad = document.getElementById('selecthomescreenad');

                            while (mySelecthomescreenad.selectedIndex != -1) {

                                homescreenad_list.push(mySelecthomescreenad.options[mySelecthomescreenad.selectedIndex].value);

                                mySelecthomescreenad.options[mySelecthomescreenad.selectedIndex].selected = false;
                            }

                            var homescreenad_str = "";
                            for ( var i = 0; i < homescreenad_list.length; i++) {
                                homescreenad_str = homescreenad_str + homescreenad_list[i];
                                if (i < homescreenad_list.length - 1)
                                    homescreenad_str = homescreenad_str + "-";
                                }               
                            $.ajax({
                                url : addToDo,
                                data : {
                                    "camp_name" : camp_name,
                                    "camp_description" : camp_description,
                                    "weeks" : weeks,
                                    "rest_list" : str,
                                    "standbyad_adlist":standbyad_str ,
                                    "sliderad_adlist":sliderad_str ,
                                    "eventbasead_adlist": eventbasead_str,
                                    "homescreenad_adlist": homescreenad_str,
                                    "CMD" : "addToDo"
                                },
                                type : "POST",
                                timeout : 20000,
                                dataType : "text",
                                success : function(data) {
                                    showMsg(data,'Campaign',1);
                                }
                            });
                        }
                    </script>
    <%  
    String Role_name=null;
    boolean flag=false; ///advertiser if flag is false else Reseller
    long org_id_camp=0;
    List<Role> role_list=themeDisplay.getUser().getRoles(); 
    for(Role role_name:role_list){  
        if(role_name.getName().equals("Reseller")){
            flag=true;
            Role_name=role_name.getName();      
            break;                                  
        }           
    }if(!flag){ 
        Role_name="Advertiser";
    }

    //Get Common Advertise List
    List<advertise> adv_list;
    if(flag)
    {
        adv_list = advertiseLocalServiceUtil.getAllAdvertiseByOrganizations(themeDisplay);
        System.out.print("Reseller ad count " + adv_list.size());
    }
    else
    {
        adv_list = advertiseLocalServiceUtil.getAllAdvertiseByOrganizationId(themeDisplay);
        System.out.print("Advertiser ad count " + adv_list.size());
    }
    //Get Banner Advertise List
    List<advertise> banner_adv_list;
    if(flag)
    {
        banner_adv_list = advertiseLocalServiceUtil.GetBannerAdvByOrganizations(themeDisplay);
        System.out.print("Reseller banner_adv_list count " + adv_list.size() + "--------");
    }
    else
    {
        banner_adv_list = advertiseLocalServiceUtil.GetBannerAdvByOrganization(themeDisplay);
        System.out.print("Advertiser banner_adv_list count " + adv_list.size() + "--------");
    }                           
    %>      
        <nav>
        <div id="jCrumbs" class="breadCrumb module">
            <ul>
                <li><a href="#"><i class="icon-home"></i></a></li>
                <li><a href="#"><%=Role_name %></a></li>
                <li>Create Campaign</li>
            </ul>
        </div>
        </nav>
        <div class="span10">
            <h3 class="heading">Create Campaign</h3>
            <portlet:actionURL var="adCampaignURL" name="addCampaign"></portlet:actionURL>
            <portlet:resourceURL var="addToDo" id="addToDo_camp"></portlet:resourceURL>     
            <div id="toDoList">
                <div class="row-fluid">
                    <div class="span12">
                        <label>Campaign Name <span class="f_req">*</span></label> <input
                            type="text" name="camp_name" id="camp_name" class="span8" /> <span
                            id="restError" style="color: #C62626;" class="help-block"></span>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span12">
                        <label>Campaign Description </label>
                        <textarea name="camp_description" id="camp_description" cols="10"
                            rows="3" class="span8"></textarea>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span3">
                        <!--   <label>Start Date <span class="f_req">*</span></label>
                                        <input type="text" name="start_date" id="start_date" class="span8" id="dp1" />
                                         <span id="restError1" style="color: #C62626;" class="help-block"></span>       -->

                        Select Date: From <input type="text" id="validBeforeDatepicker"
                            name="validTodayDatepicker" > To <input type="text"
                            id="validAfterDatepicker" name="validAfterDatePicker">
                    </div>
                    <div class="span3">
                        <label>Weeks<span class="f_req">*</span></label> <input type="text"
                            name="weeks" id="weeks" class="span8" id="dp1" onchange="advurldisabled();"/> <span
                            class="help-block">(List of week in incremental order)</span> <span
                            id="restError2" style="color: #C62626;" class="help-block"></span>

                    </div>
                    <div class="span3">
                        <label>Restaurants <span class="f_req">*</span></label> 
                        <select id="rest_id" name="rest_id" data-placeholder="- Select Restaurants -" class="chzn-select" multiple>                     
                            <%                      
                            List <restaurant> rest_list=restaurantLocalServiceUtil.getAllRestaurantByOrganizationId(themeDisplay);                                                          
                            for(int i=0;i<rest_list.size();i++) {
                            %>
                                <option value=<%=rest_list.get(i).getPrimaryKey()%>><%=rest_list.get(i).getName().toString()%></option>
                            <%
                            }
                            %>
                        </select> 
                        <span id="restError3" style="color: #C62626;" class="help-block"></span>
                    </div>
                </div>
                <br />
                <br />

                <h3 class="heading">Select Ad Location</h3>
                <div class="row-fluid">
                    <div class="span12">
                        <table style="width: 675px;">
                            <tr>
                                <td style="font-weight: bold; width: 150px;">Stand By Ad 
                                <a href="#" class="pop_over" data-content="<table><tr><td valign='top'>Lorem Ipsum Lorem Ipsum Lorem </br> Lorem Ipsum Lorem Ipsum Lorem </td><td><img src='img/vimeo.png' height='50' width='50'/></td></tr></table>"
                                    data-original-title="( Ad name )" data-placement="left">
                                    <sup style="font-size: 10px;"> ?</sup></a>
                                </td>
                                <td>
                                    <select data-placeholder="Select Ad" class="chzn-select" multiple name="selectstandbyad" id="selectstandbyad">
                                        <% for (int i = 0; i < adv_list.size(); i++) { %>
                                            <option value=<%=adv_list.get(i).getPrimaryKey()%>><%=adv_list.get(i).getAdvertisename().toString()%></option>
                                        <% } %>
                                    </select>
                                </td>
                            </tr>
                        </table>
                        <div class="formSep"></div>
                        <table style="width: 675px;">
                            <tr>
                                <td style="font-weight: bold; width: 150px;">Slider Ad</td>
                                <td><select data-placeholder="Select Ad" class="chzn-select"
                                    multiple name="selectsliderad" id="selectsliderad">

                                        <%
                                            for (int i = 0; i < adv_list.size(); i++) {
                                        %>
                                        <option value=<%=adv_list.get(i).getPrimaryKey()%>><%=adv_list.get(i).getAdvertisename().toString()%></option>
                                        <%
                                            }
                                        %>
                                </select></td>
                            </tr>
                        </table>
                        <div class="formSep"></div>
                        <table style="width: 675px;">
                            <tr>
                                <td style="font-weight: bold; width: 150px;">Event Based Ad</td>
                                <td><select data-placeholder="Select Ad" class="chzn-select"
                                    multiple name="selecteventbasead" id="selecteventbasead">
                                        <%
                                            for (int i = 0; i < adv_list.size(); i++) {
                                        %>
                                        <option value=<%=adv_list.get(i).getPrimaryKey()%>><%=adv_list.get(i).getAdvertisename().toString()%></option>
                                        <%
                                            }
                                        %>
                                </select></td>
                            </tr>
                        </table>
                        <div class="formSep"></div>
                        <table style="width: 675px;">
                            <tr>
                                <td style="font-weight: bold; width: 150px;">Banner Ad</td>
                                <td><select data-placeholder="Select Ad" class="chzn-select"
                                    multiple name="selecthomescreenad" id="selecthomescreenad">

                                        <%
                                            for (int i = 0; i < banner_adv_list.size(); i++) {
                                        %>
                                        <option value=<%=banner_adv_list.get(i).getPrimaryKey()%>><%=banner_adv_list.get(i).getAdvertisename().toString()%></option>
                                        <%
                                            }
                                        %>
                                </select></td>
                            </tr>

                        </table>
                        <span id="restError4" style="color: #C62626;" class="help-block"></span>
                        <div class="formSep"></div>
                    </div>
                </div>
                <div class="form-actions">
                    <button class="btn" onclick="campaignList();">Cancel</button>
                    <button type="button" style="float: right;" class="btn"
                        name="btnback" onclick="customeValidationfornewcamp();">Save</button>
                </div>
            </div>
            <!-- hide elements (for later use) -->
            <div class="hide">
                <!-- actions for datatables -->
                <div class="dt_gal_actions">
                    <div class="btn-group">
                        <button data-toggle="dropdown" class="btn dropdown-toggle">
                            Action <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#" class="delete_rows_dt" data-tableid="dt_gal"><i
                                    class="icon-trash"></i> Delete</a></li>
                            <li><a href="javascript:void(0)">Lorem ipsum</a></li>
                            <li><a href="javascript:void(0)">Lorem ipsum</a></li>
                        </ul>
                    </div>
                </div>
                <!-- confirmation box -->
                <div id="confirm_dialog" class="cbox_content">
                    <div class="sepH_c tac">
                        <strong>Are you sure you want to delete this row(s)?</strong>
                    </div>
                    <div class="tac">
                        <a href="#" class="btn btn-gebo confirm_yes">Yes</a> <a href="#"
                            class="btn confirm_no">No</a>
                    </div>
                </div>
            </div>
            <script type="text/javascript">
                        function redirection(myurl){
                            window.location=myurl;
                        }
                    </script>
            <script type="text/javascript">
                    function customeValidationfornewcamp() {
                        var flag = true;
                        var camp_name = $("#camp_name").val();

                        var startdate = $("#start_date").val();

                        var week = $("#weeks").val();

                        var rest_id=$("#rest_id").val();

                        var standby_ad=$("#selectstandbyad").val();
                        var slider_ad=$("#selectsliderad").val();
                        var event_ad=$("#selecteventbasead").val();
                        var homescreen_ad=$("#selecthomescreenad").val();

                        if (camp_name == '') {

                            $("#restError").html('Campaign name cannot be blank');
                            $("#camp_name").addClass('borderColor');
                            flag = false;
                        } else {
                            $("#restError").html('');
                            $("#camp_name").removeClass('borderColor');
                        }

                        if (startdate == '') {
                            $("#restError1").html('Start date cannot be blank');
                            $("#start_date").addClass('borderColor');
                            flag = false;
                        } else {
                            $("#restError1").html('');
                            $("#start_date").removeClass('borderColor');
                        }

                        if (week == '') {

                            $("#restError2").html('Week can not be blank');
                            $("#weeks").addClass('borderColor');
                            flag = false;
                        } else {
                            $("#restError2").html('');
                            $("#weeks").removeClass('borderColor');
                        }

                        if (rest_id == null) {

                            $("#restError3").html('Please Select atleast one restaurant');
                            $("#rest_id").addClass('borderColor');
                            flag = false;
                        } else {

                            $("#restError3").html('');
                            $("#rest_id").removeClass('borderColor');
                        }

                        if ((standby_ad==null)&&(slider_ad==null)&&(event_ad==null)&&(homescreen_ad==null)) {

                            $("#restError4").html('Please select atleast one Ad Location');
                            $('#selectstandbyad').addClass('borderColor');
                            flag = false;
                        } else {
                            $("#restError4").html('');
                            $("#selectstandbyad").removeClass('borderColor');
                        }                

                        if (flag == true) {
                            newcamp('<%=addToDo%>');
                    }
                    return flag;
                }
            </script>
        <script type="text/javascript">
            // function to add number of days (accepts number of days to add)

            function advurldisabled() {

                var days= $("#weeks").val();
                var thisDate = $("#validBeforeDatepicker").datepicker("getDate");

                //thisDate.setDate(thisDate.getDate() + days);

                alert(thisDate);

            }

            // call your function like this

        </script>

            <script type="text/javascript">
                $(".chzn-select").chosen();
                $(".chzn-select-deselect").chosen({
                    allow_single_deselect : true
                });     
                $(document).ready(function() {
                    $('#dp1').datepicker({
                        format : 'dd-mm-yyyy'
                    }).on('changeDate', function() {
                        $(this).datepicker('hide');
                    });
                    //* show all elements & remove preloader                        
                    setTimeout('$("html").removeClass("js")', 1000);
                    $("#addPrv").click(function() {
                        var url = $("#advurl").val();
                        if (url == '') {
                            alert('Please enter Adv url for redirection')
                        } else {
                            window.location = url;
                        }
                    });
                });
            </script>

        </div> 
```

这是我现在正在使用的 javascript...

```
<script type="text/javascript">
        // function to add number of days (accepts number of days to add)

        function advurldisabled() {

            var days= $("#weeks").val();
            var thisDate = $("#validBeforeDatepicker").datepicker("getDate");
            d = $('#validBeforeDatepicker').datepicker('getDate');
            d.setDate(d.getDate()+days); // add int nights to int date
            alert(d);
            //thisDate.setDate(thisDate.getDate() + days);

            alert(thisDate);

        } 
```

但 d 变量即将为空

我在我的 java 脚本中以下列方式进行了更改

```
<script type="text/javascript">
        // function to add number of days (accepts number of days to add)

        function advurldisabled() {

            var days= $("#weeks").val();
            var thisDate = $("#validBeforeDatepicker").datepicker("getDate");
            alert(thisDate);
            thisDate.setDate(thisDate.getDate() + days);

            alert(thisDate);

            var d = $('#validBeforeDatepicker').datepicker('getDate');
                d.setDate(d.getDate()+days); // add int nights to int date
                alert(d);
        }

        // call your function like this

    </script> 
```

第一个警报显示以下日期格式

```
Thu Nov 08 2012 00:00:00 GMT+0530 (India Standard Time) 
```

第二个警报显示以下值，该值不以周为输入，我在周字段中插入了 1 个数字，结果如下

```
Sun Jan 20 2013 00:00:00 GMT+0530 (India Standard Time) 
```

现在我只是直接添加几周..不应该乘以 7，但只是为了测试，但仍然不是 11 月 9 日，而是给出不同的日期..请指导我在哪里做错了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:57:43.760

这很简单。试试这个：

```
function advurldisabled() {

    // Get the week from input
    var weeks = $('#weeks').val();

    // Get the selected date from datepicker
    var thisDate = $('#validBeforeDatepicker').datepicker('getDate');
    var d = new Date(thisDate);

    // Add weeks to the selected date, multiply with 7 to get days
    var weekLater = new Date(d.getFullYear(), d.getMonth(), d.getDate() + weeks * 7);

    // Set the new date to the datepicker
    $('#datepicker').datepicker('setDate', weekLater);

    //alert(weekLater);
}​ 
```

就是这样！;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:15:58.443

[这里有一个小小提琴](http://jsfiddle.net/5GWYB/)，可以为日期增加数周。

HTML：

```
<input type="text" id="weeks"></input>
<br/>
<input type="text" id="from"></input>
<br/>
<p id="to"></p>
<br/>
<div id="calc">CALC!</div>​ 
```

JavaScript：

```
var today = new Date();
$('#from').val(today);
$('#calc').click(function() {
    var weeks = $('#weeks').val();
    var datefrom = new Date($('#from').val());
    var dateto = new Date();
    dateto.setDate(datefrom.getDate()+weeks*7);
    $('#to').text(dateto);
});​ 
```

在进行计算之前，请确保您的日期格式正确。

# ios - 在 iOS 中将 UIImage 转换为 LandscapeRight

> ID：13641025
> 
> 赞同：0
> 
> 时间：2012-11-30T07:50:41.210
> 
> 标签：ios, xcode, uiimage, landscape-portrait, uiimageorientation

在我的应用程序中，我将库中的不同图像添加到数组中，然后将它们转换为幻灯片放映。我能够做到这一点，但我面临的唯一问题是不同图像的方向。我想要的是，当用户从库中选择图片时，在插入数组之前，应该检查它的方向，如果它不是横向右侧，它应该旋转到横向右侧。我怎样才能做到这一点？此外，旋转后的图像应该是纵横比填充，即旋转后的图像两侧不应该有黑边。

PS 我想旋转 UIImage，而不是 UIImageView，因为有一些方法可以旋转 UIImageView，但它们不符合我的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T07:56:33.940

您可以像这样简单地旋转图像：

```
UIImage *newImage = [[UIImage alloc] initWithCGImage: myImage.CGImage
                                                 scale: 1.0
                                           orientation: UIImageOrientationRight]; 
```

这应该给你一个指针，然后你可以通过比较它的大小来决定是否旋转图像，例如：

```
if (myImage.size.width < myImage.size.height) {
   // its portrait, do the rotation
} 
```

# java - 在 java 中的 BinarySearchTree 中的 add 和 delete 方法中调试

> ID：13641029
> 
> 赞同：0
> 
> 时间：2012-11-30T07:50:54.483
> 
> 标签：java, data-structures, binary-search-tree

好的，所以我正在为电话簿实现一个带有 BinarySearchTree 的 DictionaryADT 接口。除了 BST 的添加和删除之外，我的文件工作正常。我不允许添加重复条目，但我的树正在添加重复项并且无法弄清楚，为什么。同样在删除中，我删除的条目是在测试文件中找到的，所以我猜删除根本不起作用！这是我的方法：非常感谢任何帮助。

```
public boolean add(K key, V value) {

    if (root == null)
        root = new Node<K, V>(key, value);
    else
        insert(key, value, root, null, false);
    currentSize++;
    modCounter++;
    return true;

}

private void insert(K k, V v, Node<K, V> n, Node<K, V> parent, boolean wasLeft)
{
    if (n == null) {
        if (wasLeft)
            parent.leftChild = new Node<K, V>(k, v);
        else
            parent.rightChild = new Node<K, V>(k, v);
    }
    else if (((Comparable<K>) k).compareTo((K) n.key) < 0)
        insert(k, v, n.leftChild, n, true);
    else
        insert(k, v, n.rightChild, n, false);
} 
```

这是我的删除：

```
 public boolean delete(K key){
        if (!this.contains(key)) {
            return false;
    }

    Node<K, V> node = find(key, root, 0);
    Node<K,V> parent = remove(node, root);
    root=parent;
    currentSize--;
    modCounter++;

    return true;
}

private Node<K,V> remove( Node<K,V> node_to_delete, Node<K,V> start_node )
{
    if( start_node == null )
        return start_node;   
    if(((Comparable<K>)node_to_delete.key).compareTo( start_node.key ) < 0 )
        start_node.leftChild = remove( node_to_delete, start_node.leftChild );
    else if(((Comparable<K>)node_to_delete.key).compareTo( start_node.key ) > 0 )
        start_node.rightChild = remove( node_to_delete, start_node.rightChild );
    else if( start_node.leftChild != null && start_node.rightChild != null ) 
    {
        start_node.key = findMin( start_node.rightChild ).key;
        start_node.rightChild = remove( start_node, start_node.rightChild );
    }
    else
        start_node = ( start_node.leftChild != null ) ? start_node.leftChild : start_node.rightChild;
    return start_node;
}

private Node<K,V> findMin( Node<K,V> t )
{
    if( t == null )
        return null;
    else if( t.leftChild == null )
        return t;
    return findMin( t.leftChild );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:00:20.603

好的，现在我的文件运行良好，没有重复添加和删除也可以正常工作......但是！当我打印电话簿中的号码时，BST 应该以特定的排序顺序将它们发送出去，不是吗？我的情况没有发生这种情况......

这是我添加到 add 方法中的内容..

```
Node<K,V> newNode = new Node<K,V>(key,value);
    if(contains(key))
        return false; 
```

我不明白为什么我的数字（键）只是随机的而不是任何特定的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:28:29.703

您的支票在以下方面不完整`insert`：

```
else if (((Comparable<K>) k).compareTo((K) n.key) < 0)
    insert(k, v, n.leftChild, n, true);
else
    insert(k, v, n.rightChild, n, false); 
```

如果比较结果等于 0，则您遇到了树中已经存在的值，因此从此时起您应该丢弃新值。

`insert`应该是这样的：

```
private void insert(K k, V v, Node<K, V> n, Node<K, V> parent, boolean wasLeft)
{
    if (n == null) {
        if (wasLeft)
            parent.leftChild = new Node<K, V>(k, v);
        else
            parent.rightChild = new Node<K, V>(k, v);
    }
    else {
        int result = ((Comparable<K>) k).compareTo((K) n.key);
        if (result < 0)
            insert(k, v, n.leftChild, n, true);
        else if(result > 0)
            insert(k, v, n.rightChild, n, false);
        //else: discard the data, it's a duplicate! 
    }
} 
```

# c++ - 如何创建 4096 对齐表[x][4096]

> ID：13641031
> 
> 赞同：1
> 
> 时间：2012-11-30T07:51:30.130
> 
> 标签：c++, c, winapi, optimization, memory-alignment

我想得到一张 [x][4096] 的表格（例如 int table[4096][4096]），但我不知道该怎么做 - 特别是在更一般的方式（它在许多编译器上也是旧的(mingw, dmc, lcc, b55)

我想让表格女巫每一行都填充到一个（或多个）系统页面中（为了提高效率，它会更快吗？据我所知）
所以我想获得一个填充一组系统页面的 ann 数组和它与他们非常一致

（我不希望任何错误，页面中没有空格）

1）我可以以这种方式获得静态数组（在许多编译器中） 2）如何以 malloc 方式完成？（我模糊地记得 malloc 可以在他分配的 ram 之前放置一些元数据，所以它会破坏图像，也许它也没有分配精确的字节数（？）但我不确定

我可以把这样清晰的分配加起来 - 例如 256 个对齐的 4K 页面作为表格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:41:13.193

Windows 中的页面分配功能是`VirtualAlloc`. 两者都通过`MEM_COMMIT | MEM_RESERVE`以获得实际分配，而不仅仅是保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:01:06.200

由于问题被标记为 winapi，我假设您使用的是 Windows。在这种情况下，您可能只想简单地使用[`_aligned_malloc()`](http://msdn.microsoft.com/en-us/library/8z34s9c6%28v=vs.80%29.aspx).

在 Linux/POSIX 系统上，有[`posix_memalign()`](http://www.kernel.org/doc/man-pages/online/pages/man3/posix_memalign.3.html).

使用这些 API 之一，您应该分配将与 4KB 对齐的大内存块。然后，您只需使用普通指针访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:55:09.790

您可以进行您要求的对齐，但它不会是可移植的，因为`C/C++`对齐定义中没有标准说明。

对于静态数据，它通常是一些`#pragma`或编译器内在函数。

例如，在 VC++ 中有一个`__declspec( align( # ) )`可用于数据对齐： http: [//msdn.microsoft.com/en-us/library/83ythb65 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/83ythb65(v=vs.110).aspx)

对于动态数据，它是相同的非便携式解决方案，有关详细信息，请参阅@mvp 答案。但是，对于动态数据，您可以基于标准`malloc`函数实现自己的对齐数据分配器。由于它基于标准库，因此**您的分配器将是可移植**的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:03:26.993

您可以过度分配和微调指针：

```
 int *a = malloc(4096*4096*4+4095);
 int *b = (int*) (((int)a)+4095 & (~4095))); 
```

也有可能（但不能保证）分配例如 64 + 64 字节，发现地址相隔 80 字节，然后计算下一个分配单元 L 的长度以使大单元与给定地址对齐。

```
#include <string.h>
#include <stdio.h>
int main()
{
  int *a = malloc(64);
  int *b = malloc(64);
  long long excess = ((long)b - (long)a)-64;
  int *c = malloc(4096 - (((int)(b) & 4095) + excess*2 + 64));
  int *d = malloc(4096*4);
  printf("%x %x %x %x\n",
     (int)a & 0xffffffff,(int)b & 0xffffffff, 
     (int)c & 0xffffffff,(int)d & 0xffffffff);
} 
```

输出：`18e2010 18e2060 18e20b0 18e3000`

但是有一个通知：d=malloc(4096*4096) 的最后一个 malloc**失败**（并产生 0x55505010），因为 glib 实现从不同的池或使用不同的方法（例如系统调用*kmalloc*）分配不同的大小单元。每次运行的第一个分配地址似乎正好偏移了 10（十六进制）字节，因为这是簿记所需的空间，而且显然堆已经被系统对齐到 4096 字节边界。

# android - AnsyncTask 打开网页

> ID：13641035
> 
> 赞同：0
> 
> 时间：2012-11-30T07:51:50.683
> 
> 标签：android

我正在尝试使用 Asynctask 方法从 Web 服务器获取数据。

我有以下代码。

```
package com.example.myfirstapp;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

public class FetchData extends Activity {
private TextView textView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fetch_data);
    textView = (TextView) findViewById(R.id.TextView1);

    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
}

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
          String response = "";
          for (String url : urls) {
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            try {
              HttpResponse execute = client.execute(httpGet);
              InputStream content = execute.getEntity().getContent();

              BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
              String s = "";
              while ((s = buffer.readLine()) != null) {
                response += s;
              }

            } catch (Exception e) {
              e.printStackTrace();
            }
          }
          return response;
        }

        @Override
        protected void onPostExecute(String result) {
          textView.setText(result);
        }
      }

      public void readWebpage(View view) {
        DownloadWebPageTask task = new DownloadWebPageTask();
        task.execute(new String[] {message});

}

} 
```

我的问题是这个 FetchData Activity 又必须从 MainActivity 接收数据。我已经使用意图这样做了。现在，我在这里使用的意图具有来自 MainActivity 的数据。此消息包含 Web 服务器的 URL。我只需要使用消息从网页获取结果。我想将此消息传递给 task.execute 方法，以便它可以将网页返回给我。我该怎么做。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:01:53.210

`readWebpage`除了方法调用之外，您似乎拥有所有您需要的东西。

1.  更改`readWebpage`传递消息的参数：

    ```
    public void readWebpage(String message) {
      DownloadWebPageTask task = new DownloadWebPageTask();
      task.execute(new String[] {message});
    } 
    ```

2.  `readWebpage`在最后一行添加调用`onCreate`：

    ```
    ...
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    readWebpage( message ); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:12:17.257

```
mWebView.setWebViewClient(new WebViewClient() {
        private int       webViewPreviousState;
        private final int PAGE_STARTED    = 0x1;
        private final int PAGE_REDIRECTED = 0x2;

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String urlNewString) {
            webViewPreviousState = PAGE_REDIRECTED;
            mWebView.loadUrl(urlNewString);
            return true;
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            super.onPageStarted(view, url, favicon);
            webViewPreviousState = PAGE_STARTED;
            if (dialog == null || !dialog.isShowing())
                dialog = ProgressDialog.show(WebViewActivity.this, "", getString(R.string.loadingMessege), true, true,
                        new OnCancelListener() {

                            @Override
                            public void onCancel(DialogInterface dialog) {
                                // do something
                            }
                        });
        }

        @Override
        public void onPageFinished(WebView view, String url) {

            if (webViewPreviousState == PAGE_STARTED) {
                dialog.dismiss();
                dialog = null;
            }

        }
 }); 
```

# javascript - 如何在 Recline JS 中将记录附加到数据集？

> ID：13641037
> 
> 赞同：10
> 
> 时间：2012-11-30T07:52:02.837
> 
> 标签：javascript, backbone.js, slickgrid

我正在使用相当不错的 JavaScript 库 Recline [http://okfnlabs.org/recline/](http://okfnlabs.org/recline/)它是围绕 Backbone 构建的。它还使用 SlickGrid。

有很多例子，当然也有源代码可以看看。我自己有很长的路要走——编写自己的后端并在 slickgrid 视图中显示数据。

但是，我在示例中找不到的一件事是如何将记录附加到数据集。我想将操作绑定到一个按钮，这样我就可以在数据集的末尾附加一条空记录，这样我就可以使用 slickgrid 视图来编辑数据。

我似乎能够添加记录的唯一方法是往返服务器，但我不想这样做，因为这将涉及必须发布有效数据，因为实际上我不想要空白我的数据集中的行。在通过 REST 将数据实际发布到服务器之前，我希望能够在浏览器客户端上添加几行。

代码现在看起来像这样。

```
$(document).ready(function() {
var dataset = new recline.Model.Dataset({
     url: '/rest/monitors',
     backend: 'restlet',
    });

    dataset.fetch().done(function(dataset) { 

        var $el = $('#mygrid');
        var grid = new recline.View.SlickGrid({
          model: dataset,
          el: $el,
          state: {
                gridOptions: {editable: true,enableCellNavigation: true},
                columnsEditor: [
                             {column: 'monitoruntil', editor: Slick.Editors.Date },
                             {column: 'enabled', editor: Slick.Editors.Checkbox },
                             {column: 'owneremail', editor: Slick.Editors.Text},
                             {column: 'normalinterval', editor: Slick.Editors.Text}
                           ],
                columnsWidth:[{column: 'owneremail', width: 100},{column: 'url', width: 300},{column: 'lastaccessed', width:100 }]
                 }
        });
        grid.visible = true;
        grid.render();

        //Bind Save Button to a function to save the dataset

        $('#savebutton').bind('click', function() {
              //alert($(this).text());
              dataset.save();
            });

        });; 
```

})

使用此代码，我只能编辑和保存已通过“restlet”后端交付的现有记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:39:48.877

它看起来你正在寻找`dataset.records.add()`

[在](http://okfnlabs.org/recline/demos/multiview/)开发控制台中尝试：

```
var dataset = new recline.Model.Dataset({
      records: [
        {id: 0, date: '2011-01-01', x: 1, y: 2, z: 3, country: 'DE', title: 'first', lat:52.56, lon:13.40},
        {id: 1, date: '2011-01-01', x: 1, y: 2, z: 3, country: 'DE', title: 'first', lat:52.56, lon:13.40},
    ]
    });
createExplorer(dataset);
var i=2;
setInterval(function() {dataset.records.add({id: i, date: '2011-01-01', x: 1, y: 2, z: 3, country: 'DE', title: 'first', lat:52.56, lon:13.40});i++;},2000); 
```

# python - 如何在具有偶数序列的数据文件中拆分文本？蟒蛇 3x

> ID：13641041
> 
> 赞同：0
> 
> 时间：2012-11-30T07:52:17.893
> 
> 标签：python, list, file, nested

我在数据文件中拆分文本时遇到问题，假设数据文件包括：

```
Row 1
apple
bob
cat
dog
ear
fun

Row 2
glow
horse
idea
joke
kick
lemon

Row 3
money
new
odd
park
queen
run 
```

我想拆分它，使它成为一个嵌套列表，如下所示：

```
[[apple, bob], [cat, dog], [ear, fun]], 
[[glow, horse], [idea, joke], [kick, lemon]], 
[[money, new], [odd, park], [queen, run]] 
```

这是我到目前为止的工作：

```
def text_file(data_file):
    nested_list = []
    main_list = []
    my_list = ''
    for index in data_file:
        index = index.strip()

        if (index in my_list):
            main_list.append(nested_list)
            nested_list = []

        else:
            nested_list.append(index)

    if (nested_list):
        main_list.append(nested_list)

    return (main_list) 
```

但这会返回：

```
text_file(open("data_file.txt", "r"))
[['Row 1', 'apple', 'bob', 'cat', 'dog', 'ear', 'fun'], 
['Row 2', 'glow', 'horse', 'idea', 'joke', 'kick', 'lemon'], 
['Row 3', 'money', 'new', 'odd', 'park', 'queen', 'run']] 
```

不**导入**任何东西，我怎么能做到这一点？如果可能的话，我可以在我的代码中添加什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T07:59:57.907

您需要做的是按`\n\n`（两个换行符）拆分文件，这将为您提供组，然后按行拆分结果，然后使用`zip`适当地跨过文件以构建所需的列表，例如：

```
s = """Row 1
apple
bob
cat
dog
ear
fun

Row 2
glow
horse
idea
joke
kick
lemon

Row 3
money
new
odd
park
queen
run"""

lines = s.split('\n\n')
for line in lines:
    words = line.splitlines()
    print([ [i, j] for i, j in zip(words[1::2], words[2::2]) ])

[['apple', 'bob'], ['cat', 'dog'], ['ear', 'fun']]
[['glow', 'horse'], ['idea', 'joke'], ['kick', 'lemon']]
[['money', 'new'], ['odd', 'park'], ['queen', 'run']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:04:39.003

像这样，使用`regex`and `iterators`。

使用`regex`split at `Row number`，然后您可以使用`zip`或`iterator`来获得预期的输出。

```
In [8]: with open("data.txt") as f:
    spl=re.split(r"Row \d+",f.read())[1:]
    for x in spl:
        sp=x.split()
        it=iter(sp)
        print ([[next(it),next(it)] for _ in range(len(sp)//2)])
   ...:         
[['apple', 'bob'], ['cat', 'dog'], ['ear', 'fun']]
[['glow', 'horse'], ['idea', 'joke'], ['kick', 'lemon']]
[['money', 'new'], ['odd', 'park'], ['queen', 'run']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T07:59:10.820

```
if (nested_list):
    new_list = nested_list[1:]
    main_list.append(zip(new_list[::2], new_list[1::2])) 
```

试试这个

上面的代码不是在主列表中附加嵌套列表，而是首先形成连续元素对，然后附加它。

# ruby - Ruby 编程 - 无法使用默认值初始化实例变量

> ID：13641049
> 
> 赞同：1
> 
> 时间：2012-11-30T07:52:42.947
> 
> 标签：ruby, ruby-1.9.3

在下面的代码中，我为 accountNumber 提供了一个默认值，当它没有使用特定值调用但代码无法识别该值时，这是为什么呢？

```
class BankAccount
   CONST=0100

   def interest_rate
        @@interest_rate = 0.2
   end

   def accountNumber
        @accountNumber
   end

   def accountNumber=(value = 10)
        puts value
        @accountNumber = value
   end
end 
```

当我在没有 arg 的情况下调用 accountNumber= 方法时，我希望它输入“10”，但它没有输出默认值......

```
account1 = BankAccount.new()
puts account1.accountNumber=() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T08:04:54.303

```
account1.accountNumber=(10) 
```

是相同的

```
account1.accountNumber = 10 
```

`account1.accountNumber =`在不传递值的情况下使用很奇怪。

如果您需要默认值，请在构造函数中设置它。

```
def initialize
  @accountNumber = 10
end 
```

然后

```
account1 = BankAccount.new
puts account1.accountNumber # => 10 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T08:12:14.497

ck3g 的回答很到位。只需在初始化程序中设置默认值即可。考虑到这一点，您可以将课程简化为

```
class BankAccount
   CONST=0100
   attr_accessor :accountNumber

   def initialize(accountNumber = 10)
     @accountNumber = accountNumber
   end

   def interest_rate
     @@interest_rate = 0.2
   end
end 
```

这让 ruby​​ 可以自动处理 accountNumber 属性的 getter 和 setter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:06:28.307

我不能完全确定，但由于方法名称以`=`. 这种类型的方法似乎不能正确接受默认值。当您将方法名称更改为 时`set_account_number`，它将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T14:22:57.973

`()`您正在为 setter 方法分配一个空表达式。在 Ruby 中，空表达式的计算结果是`nil`（它们还会计算出什么值？），因此您正在分配`nil`.

# glassfish - 在 glassfish 服务器消息队列上发送消息

> ID：13641051
> 
> 赞同：3
> 
> 时间：2012-11-30T07:52:50.950
> 
> 标签：glassfish, jms

我只是测试在 glassfish 服务器队列上发送消息，因此我在 glassfish 服务器上创建了 JMSResource，如下所示：

![在此处输入图像描述](../Images/663d7114a6bb87f083558c5798c8de06.png)

现在我在 Netbeans IDE 中创建了一个 java 应用程序。这是我的 Java 文件：-

```
import javax.annotation.Resource;  
   import javax.jms.Connection;
import javax.jms.ConnectionFactory;
import javax.jms.JMSException;
import javax.jms.MessageProducer;
import javax.jms.Queue;
import javax.jms.Session;
import javax.jms.TextMessage;

public class MessageSender
{
  @Resource(mappedName = "jms/ConnectionFactory")
  private static ConnectionFactory connectionFactory;
  @Resource(mappedName = "jms/Queue")
  private static Queue queue;

  public void produceMessages()
  {
    MessageProducer messageProducer;
    TextMessage textMessage;
    try
    {
      Connection connection = connectionFactory.createConnection();
      Session session = connection.createSession(false,
        Session.AUTO_ACKNOWLEDGE);
      messageProducer = session.createProducer(queue);
      textMessage = session.createTextMessage();

      textMessage.setText("Testing, 1, 2, 3\. Can you hear me?");
      System.out.println("Sending the following message: "
        + textMessage.getText());
      messageProducer.send(textMessage);

      messageProducer.close();
      session.close();
      connection.close();
    }
    catch (JMSException e)
    {
      e.printStackTrace();
    }
  }
  public static void main(String[] args)
  {
    new MessageSender().produceMessages();
  }
} 
```

现在，当我运行这个简单的应用程序时，它在创建 ConnectionFactory 时出错：

```
Exception in thread "main" java.lang.NullPointerException
    at simplesendamq.MessageSender.produceMessages(MessageSender.java:33)
    at simplesendamq.MessageSender.main(MessageSender.java:55) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:23:30.713

GF 客户端必须使用 JNDI 查找来获取连接工厂和消息目的地（主题/队列）。

因此，您必须形成 JNDI 上下文（在其中设置主机、ORB 端口、其他魔术参数）并在类路径中包含某些库（它需要与 GF 一起使用）。

我的例子：

**接收器.java**

```
 import javax.jms.*;
import javax.naming.Context;
import javax.naming.InitialContext;
import java.util.Properties;

    public class Receiver implements MessageListener {
        public static void main(String[] args) throws JMSException, NamingException {
            try {
                Properties props = new Properties();

                props.setProperty("java.naming.factory.initial",
                                  "com.sun.enterprise.naming.SerialInitContextFactory");
                props.setProperty("java.naming.factory.url.pkgs",
                                  "com.sun.enterprise.naming");
                props.setProperty("java.naming.factory.state",
                                  "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
                props.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");
                props.setProperty("org.omg.CORBA.ORBInitialPort", "3700");

                // Gets the JNDI context
                Context jndiContext = new InitialContext(props);

                // Looks up the administered objects
                ConnectionFactory connectionFactory = (ConnectionFactory)
                        jndiContext.lookup("my.connection.factory");

                Queue queue = (Queue) jndiContext.lookup("my.test.queue");

                // Creates the needed artifacts to connect to the queue
                Connection connection = connectionFactory.createConnection();

                Session session = connection.createSession(false,Session.AUTO_ACKNOWLEDGE);

                MessageConsumer consumer = session.createConsumer(queue);

                connection.start();   

            } catch(Exception e) {
                e.printStackTrace();
            }
        }

     @Override
    public void onMessage(Message message) {
        System.out.println("onMsg!");
    }
    } 
```

**pom.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>examples.my</groupId>
    <artifactId>jms-test</artifactId>
    <version>1.0</version>

    <dependencies>
        <dependency>
            <groupId>com.sun.messaging</groupId>
            <artifactId>imqjmsra</artifactId>
            <version>4.4</version>
        </dependency>

        <dependency>
            <groupId>javax.jms</groupId>
            <artifactId>jms-api</artifactId>
            <version>1.1-rev-1</version>
        </dependency>

        <dependency>
            <groupId>org.glassfish.common</groupId>
            <artifactId>common-util</artifactId>
            <version>3.0</version>
        </dependency>

        <dependency>
            <groupId>org.glassfish.appclient</groupId>
            <artifactId>gf-client</artifactId>
            <version>3.0-b74b</version>
        </dependency>

        <dependency>
            <groupId>org.glassfish.appclient.server</groupId>
            <artifactId>appclient-server-core</artifactId>
            <version>3.0-b74b</version>
        </dependency>

        <dependency>
            <groupId>com.sun.corba</groupId>
            <artifactId>glassfish-corba-orb</artifactId>
            <version>3.0.1-b001</version>
        </dependency>

        <dependency>
            <groupId>org.glassfish.security</groupId>
            <artifactId>security</artifactId>
            <version>3.0-b74b</version>
        </dependency>
    </dependencies>

</project> 
```

# unix - 等待孩子的 LSF 父作业

> ID：13641052
> 
> 赞同：2
> 
> 时间：2012-11-30T07:52:54.240
> 
> 标签：unix, lsf

我正在使用**LSF bsub**命令在 Unix 环境中提交作业。但是，LSF 作业正在等待子作业完成。

这是一个示例（有关以下示例脚本的详细信息）：

1.  **没有 LSF**：如果我`parent.ksh`在 Unix 中提交而不使用`LSF`，即在命令提示符中键入`./parent.ksh`，则`parent.ksh`提交 get 并在一秒钟内完成，而无需等待子作业`script1.ksh`，`script2.ksh`因为这些作业已在后台模式下提交。这是 Unix 中的典型行为。
2.  **使用 LSF**：但是，如果我提交我的`parent.ksh`使用`LSF`，即`bsub parent.ksh`，在提交后`parent.ksh`等待 180 秒（这是 2 号孩子所用的最长时间，即 script2.ksh）。请注意，我已排除处于待处理状态的工作所花费的时间。

这是我没想到的，我如何确保不会发生这种情况？

我已经检查过，`script1.ksh`并且`script2.ksh`在这两种情况下都被调用了。

**父.ksh：**

```
#!/bin/ksh<br>
/abc/def/script1.ksh &<br>
/abc/def/script1.ksh &<br><br> 
```

**脚本1.ksh：**

```
#!/bin/ksh<br>
sleep 80<br><br> 
```

**脚本2.ksh：**

```
#!/bin/ksh<br>
sleep 180 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-28T18:43:34.120

我猜原因是 LSF 跟踪您的作业的进程树，因此 LSF 作业仅在这两个后台进程退出之前完成。所以你可以尝试在新会话下为后台进程创建一个新的进程组。

# php - 缓存系统如何为网站工作

> ID：13641053
> 
> 赞同：3
> 
> 时间：2012-11-30T07:53:11.110
> 
> 标签：php, caching, browser-cache, cache-control

我搜索了缓存主题，结果如下

```
<meta http-equiv="Cache-control" content="description"> 
```

描述

```
Public - may be cached in public shared caches
Private - may only be cached in private cache
no-Cache - may not be cached
no-Store - may be cached but not archived 
```

它们的真正含义是什么

1.公共共享缓存是否意味着文件将从代理缓存和网关缓存中下载

2.私有缓存是指浏览器缓存中引用的文件还是存储在客户端系统中的缓存

3.当描述设置为无缓存时，它是否会从网络服务器加载新版本。每次页面加载时都会下载新文件。

4.当他们说未存档时，他们的真正意思是什么。

请简要解释缓存的工作原理，而不是解释每个人都可以访问的公共手段和私人手段有限的访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:59:46.123

引用自[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1)

> **14.9.1 什么是可缓存的**
> 
> 默认情况下，如果请求方法、请求头字段和响应状态的要求表明它是可缓存的，则响应是可缓存的。第 13.4 节总结了这些可缓存性的默认值。以下 Cache-Control 响应指令允许源服务器覆盖响应的默认可缓存性：
> 
> **上市**
> 
> 表示响应可以被任何缓存缓存，即使它通常是不可缓存的或只能在非共享缓存中缓存。（有关更多详细信息，另请参见授权，第 14.8 节。）
> 
> **私人的**
> 
> 表示响应消息的全部或部分是针对单个用户的，并且不得由共享缓存缓存。这允许源服务器声明响应的指定部分仅针对一个用户，而不是对其他用户请求的有效响应。私有（非共享）缓存可以缓存响应。
> 
> 注意：private这个词的使用只控制响应可能被缓存的地方，并不能保证消息内容的隐私。无缓存
> 
> 如果 no-cache 指令未指定字段名称，则缓存不得使用响应来满足后续请求，而无需与源服务器成功重新验证。这允许源服务器阻止缓存，即使缓存已配置为向客户端请求返回陈旧响应。
> 
> 如果 no-cache 指令确实指定了一个或多个字段名，那么缓存可以使用响应来满足后续请求，但受缓存的任何其他限制。但是，如果没有与源服务器成功重新验证，则不得在对后续请求的响应中发送指定的字段名。这允许源服务器防止在响应中重复使用某些标头字段，同时仍然允许缓存响应的其余部分。
> 
> 注意：大多数 HTTP/1.0 缓存不会识别或遵守此指令。
> 
> **14.9.2 缓存可以存储什么**
> 
> **无店**
> 
> no-store 指令的目的是防止无意中释放或保留敏感信息（例如，在备份磁带上）。no-store 指令适用于整个消息，并且可以在响应或请求中发送。
> 
> 如果在请求中发送，缓存不得存储此请求的任何部分或对它的任何响应。如果在响应中发送，缓存不得存储此响应或引发它的请求的任何部分。该指令适用于非共享和共享缓存。在这种情况下，“不得存储”意味着缓存不得有意将信息存储在非易失性存储中，并且必须尽最大努力在转发信息后尽快从易失性存储中删除信息。
> 
> 即使该指令与响应相关联，用户也可能在缓存系统之外显式存储这样的响应（例如，使用“另存为”对话框）。历史缓冲区可以存储这些响应作为其正常操作的一部分。
> 
> 该指令的目的是满足某些用户和服务作者的既定要求，他们担心通过对缓存数据结构的意外访问而意外释放信息。虽然在某些情况下使用该指令可能会改善隐私，但我们警告说，它绝不是确保隐私的可靠或充分机制。特别是，恶意或受损的缓存可能无法识别或遵守此指令，并且通信网络可能容易受到窃听。

# delphi - 使用 TIdHttp 逐步下载文件

> ID：13641055
> 
> 赞同：20
> 
> 时间：2012-11-30T07:53:11.853
> 
> 标签：delphi, http, download, indy, idhttp

我想使用 TIdHttp (Indy10) 实现一个简单的 http 下载器。我从互联网上找到了两种代码示例。不幸的是，他们都没有100%让我满意。这是代码，我想要一些建议。

* * *

**变体 1**

```
var
  Buffer: TFileStream;
  HttpClient: TIdHttp;
begin
  Buffer := TFileStream.Create('somefile.exe', fmCreate or fmShareDenyWrite);
  try
    HttpClient := TIdHttp.Create(nil);
    try
      HttpClient.Get('http://somewhere.com/somefile.exe', Buffer); // wait until it is done
    finally
      HttpClient.Free;
    end;
  finally
    Buffer.Free;
  end;
end; 
```

代码很紧凑，很容易理解。问题是它在下载开始时分配磁盘空间。另一个问题是我们不能直接在 GUI 中显示下载进度，除非代码在后台线程中执行（或者我们可以绑定 HttpClient.OnWork 事件）。

* * *

**变体 2：**

```
const
  RECV_BUFFER_SIZE = 32768;
var
  HttpClient: TIdHttp;
  FileSize: Int64;
  Buffer: TMemoryStream;
begin
  HttpClient := TIdHttp.Create(nil);
  try
    HttpClient.Head('http://somewhere.com/somefile.exe');
    FileSize := HttpClient.Response.ContentLength;

    Buffer := TMemoryStream.Create;
    try
      while Buffer.Size < FileSize do
      begin
        HttpClient.Request.ContentRangeStart := Buffer.Size;
        if Buffer.Size + RECV_BUFFER_SIZE < FileSize then
          HttpClient.Request.ContentRangeEnd := Buffer.Size + RECV_BUFFER_SIZE - 1
        else
          HttpClient.Request.ContentRangeEnd := FileSize;

        HttpClient.Get(HttpClient.URL.URI, Buffer); // wait until it is done
        Buffer.SaveToFile('somefile.exe');
      end;
    finally
      Buffer.Free;
    end;
  finally
    HttpClient.Free;
  end;
end; 
```

首先我们从服务器查询文件大小，然后我们分段下载文件内容。检索到的文件内容将在完全接收后保存到磁盘。潜在的问题是我们必须向服务器发送多个 GET 请求。我不确定某些服务器（例如 megaupload）是否会限制特定时间段内的请求数量。

* * *

**我的期望**

1.  下载器应该只向服务器发送一个 GET 请求。
2.  下载开始时不得分配磁盘空间。

*任何提示表示赞赏。*

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-01T01:43:37.267

Variant #1 is the simpliest, and is how Indy is meant to be used.

Regarding the disk allocation issue, you can derive a new class from `TFileStream` and override its `SetSize()` method to do nothing. `TIdHTTP` will still attempt to pre-allocate the file when appropriate, but it will not actually allocate any disk space. Writing to `TFileStream` will grow the file as needed.

Regarding status reporting, `TIdHTTP` has `OnWork...` events for that purpose. The `AWorkCountMax` parameter of the `OnWorkBegin` will be the actual file size if known (the response is not chunked), or 0 if not known. The `AWorkCount` parameter of the `OnWork` event will be the cumulative number of bytes that have been transferred so far. If the file size is known, you can display the total percentage by simply dividing the `AWorkCount` by the `AWorkCountMax` and multiplying by 100, otherwise just display the `AWorkCount` value by itself. If you want to display the speed of the transfer, you can calculate that from the difference of `AWorkCount` values and the time intervals between multiple `OnWork` events.

Try this:

```
type
  TNoPresizeFileStream = class(TFileStream)
  procedure
    procedure SetSize(const NewSize: Int64); override;
  end;

procedure TNoPresizeFileStream.SetSize(const NewSize: Int64);
begin
end; 
```

.

```
type
  TSomeClass = class(TSomething)
  ...
    TotalBytes: In64;
    LastWorkCount: Int64;
    LastTicks: LongWord;
    procedure Download;
    procedure HttpWorkBegin(ASender: TObject; AWorkMode: TWorkMode; AWorkCountMax: Int64);
    procedure HttpWork(ASender: TObject; AWorkMode: TWorkMode; AWorkCount: Int64);
    procedure HttpWorkEnd(ASender: TObject; AWorkMode: TWorkMode);
  ...
  end;

procedure TSomeClass.Download;
var
  Buffer: TNoPresizeFileStream;
  HttpClient: TIdHttp;
begin
  Buffer := TNoPresizeFileStream.Create('somefile.exe', fmCreate or fmShareDenyWrite);
  try
    HttpClient := TIdHttp.Create(nil);
    try
      HttpClient.OnWorkBegin := HttpWorkBegin;
      HttpClient.OnWork := HttpWork;
      HttpClient.OnWorkEnd := HttpWorkEnd;

      HttpClient.Get('http://somewhere.com/somefile.exe', Buffer); // wait until it is done
    finally
      HttpClient.Free;
    end;
  finally
    Buffer.Free;
  end;
end;

procedure TSomeClass.HttpWorkBegin(ASender: TObject; AWorkMode: TWorkMode; AWorkCountMax: Int64);
begin
  if AWorkMode <> wmRead then Exit;

  // initialize the status UI as needed...
  //
  // If TIdHTTP is running in the main thread, update your UI
  // components directly as needed and then call the Form's
  // Update() method to perform a repaint, or Application.ProcessMessages()
  // to process other UI operations, like button presses (for
  // cancelling the download, for instance).
  //
  // If TIdHTTP is running in a worker thread, use the TIdNotify
  // or TIdSync class to update the UI components as needed, and
  // let the OS dispatch repaints and other messages normally...

  TotalBytes := AWorkCountMax;
  LastWorkCount := 0;
  LastTicks := Ticks;
end;

procedure TSomeClass.HttpWork(ASender: TObject; AWorkMode: TWorkMode; AWorkCount: Int64);
var
  PercentDone: Integer;
  ElapsedMS: LongWord;
  BytesTransferred: Int64;
  BytesPerSec: Int64;
begin
  if AWorkMode <> wmRead then Exit;

  ElapsedMS := GetTickDiff(LastTicks, Ticks);
  if ElapsedMS = 0 then ElapsedMS := 1; // avoid EDivByZero error

  if TotalBytes > 0 then
    PercentDone := (Double(AWorkCount) / TotalBytes) * 100.0;
  else
    PercentDone := 0.0;

  BytesTransferred := AWorkCount - LastWorkCount;

  // using just BytesTransferred and ElapsedMS, you can calculate
  // all kinds of speed stats - b/kb/mb/gm per sec/min/hr/day ...
  BytesPerSec := (Double(BytesTransferred) * 1000) / ElapsedMS;

  // update the status UI as needed...

  LastWorkCount := AWorkCount;
  LastTicks := Ticks;
end;

procedure TSomeClass.HttpWorkEnd(ASender: TObject; AWorkMode: TWorkMode);
begin
  if AWorkMode <> wmRead then Exit;

  // finalize the status UI as needed...
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T08:39:42.350

下面是一个示例，展示了如何使用组件 OnWork 来显示进度条：

[使用 Delphi 和 Indy 以编程方式通过 Progress 事件从 Internet 下载文件](https://stackoverflow.com/questions/2184473/download-a-file-from-internet-programatically-with-an-progress-event-using-delph)

您不必担心磁盘分配。分配的磁盘空间实际上并未写入，因此不会损坏您的磁盘。很高兴它被分配，这样另一个进程就不可能要求磁盘空间并让你用完空间！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-24T15:21:12.820

不要忘记为 Variant 2 添加这个

```
 : Else HttpClient.Request.ContentRangeEnd := FileSize; 
```

代替

```
 if Buffer.Size + RECV_BUFFER_SIZE < FileSize then
  HttpClient.Request.ContentRangeEnd := Buffer.Size + RECV_BUFFER_SIZE - 1; 
```

经过

```
 if Buffer.Size + RECV_BUFFER_SIZE < FileSize then
  HttpClient.Request.ContentRangeEnd := Buffer.Size + RECV_BUFFER_SIZE - 1;
   Else HttpClient.Request.ContentRangeEnd := FileSize; 
```

# asp.net - ext.net 错误：“System.Web.UI.WebControls.SqlDataSource”类型的控件无法通过布局处理

> ID：13641057
> 
> 赞同：1
> 
> 时间：2012-11-30T07:53:17.850
> 
> 标签：asp.net, sqldatasource, ext.net

我有一个网络表单。在这个里面，我正在通过加载用户控制器 `<ext:UserControlLoader`。我的用户控制器包含一个 sqldatasource。当我运行该页面时，我收到了类似“'System.Web.UI.WebControls.SqlDataSource' 类型的控件不能由布局处理”的错误。

我的网页表格是这样的；

```
 <ext:ResourceManager ID="ResourceManager1" runat="server" />
   <ext:Panel runat="server">
   <Items>
  <ext:UserControlLoader ID="UserControlLoader4" runat="server" Path="~/Controlers/SinifListe.ascx" />
   </Items>
 </panel> 
```

和我的用户控制器

```
 <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:AProjeConnectionString %>"
    SelectCommand="SELECT * FROM [Sinif]"></asp:SqlDataSource>

<ext:Panel runat="server" ID="mainpanelone" Title="listele" Flex="1" BodyStyle="background-color:#DFE9F6">
    <Items>
                <ext:Container ID="Container1" runat="server" Layout="HBoxLayout" Flex="1">
                    <Items>
                         <ext:GridPanel ID="GridPanel2" runat="server" Title="Sınıf " Frame="true"  Width="300">
                            <Store>
                                <ext:Store ID="Store2" runat="server" DataSourceID="SqlDataSource2">
                                    <Model>
                                        <ext:Model ID="Model2" runat="server" IDProperty="Id">
                                            <Fields>
                                                <ext:ModelField Name="Id" />
                                                <ext:ModelField Name="Ad" />
                                            </Fields>
                                        </ext:Model>
                                    </Model>
                                </ext:Store>
                            </Store>
                            <ColumnModel ID="ColumnModel2" runat="server">
                                <Columns>
                                    <ext:Column ID="Column1" runat="server" DataIndex="Id" Text="Id" />
                                    <ext:Column ID="Column2" runat="server" DataIndex="Ad" Text="Ad" />
                                </Columns>
                            </ColumnModel>
                        </ext:GridPanel>
                    </Items>
                </ext:Container>
    </Items>
</ext:Panel> 
```

我怎么解决这个问题。*我将 sqldatasources 放在 web 表单中并解决了问题，但是，我想在我的 usercontroler 中使用 sqldatasources

**我使简单的网络表单和用户控制器易于理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:18:39.090

您可以将`SqlDataSource`放入 的内部`<HtmlBin>`属性中`<ext:GridPanel>`。

**例子**

```
<ext:GridPanel ID="GridPanel2...
    <HtmlBin>
        <asp:SqlDataSource ID="SqlDataSource2"...
    </HtmlBin>
</ext:GridPanel> 
```

希望这可以帮助。

**编辑：**更改`<Bin>`为`<HtmlBin>`

# php - 过滤 UNION ALL 选择

> ID：13641063
> 
> 赞同：0
> 
> 时间：2012-11-30T07:53:32.327
> 
> 标签：php, mysql, union

我有以下代码：

```
$variable = @mysql_result(mysql_query("SELECT * 
FROM
(
SELECT `question_text`, `posted` FROM `questions` 
WHERE `interest` = '$interests_following'
UNION ALL
SELECT `article_title`, `posted` FROM `articles` 
WHERE `interest_id` = '$interestid'
UNION ALL
SELECT `interest_pic_title`, `posted` FROM `interest_pictures` 
WHERE `interest_id` = '$interestid'
) t
ORDER BY posted DESC LIMIT 1 
```

这组`question_text`，`article_title`并按（时间戳）对`interest_pic_title`它们进行排序并显示最新的`posted`

我现在希望在结果旁边显示一个小图像（例如结果为 html 时的问号`question_text`）以显示它是什么类型，我该如何过滤它来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:00:51.753

您可以添加一个额外的列，该列将包含一个静态变量。

请参阅下面的示例。

```
$variable = @mysql_result(mysql_query("SELECT * 
FROM
(
SELECT 'question' as type, `question_text`, `posted` FROM `questions` 
WHERE `interest` = '$interests_following'
UNION ALL
SELECT 'article' as type, `article_title`, `posted` FROM `articles` 
WHERE `interest_id` = '$interestid'
UNION ALL
SELECT 'interest_picture' as type, `interest_pic_title`, `posted` FROM `interest_pictures` 
WHERE `interest_id` = '$interestid'
) t
ORDER BY posted DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T07:57:11.160

你的应用是什么？我的意思是你想要这个：

HTML <-> MYSQL

但是 html 和 mysql 之间是什么关系？php? 一个网络框架？

编辑：我不知道 PhP，但是

您可以创建另一个 sqlQuery，它只提供带有“问题文本”的 ua 表

例如

```
SELECT question-text FROM ..... 
```

然后在php中你可以做类似的事情

伪代码：

```
if("question-text" != null){

   print <image src="..."> </image>    //Php with html code

} 
```

# hibernate - Hibernate 4 + C3P0 连接池返回错误

> ID：13641065
> 
> 赞同：2
> 
> 时间：2012-11-30T07:53:34.947
> 
> 标签：hibernate, c3p0

我正在使用带有 C3P0 的 Hibernate 4 作为其连接提供程序。我目前没有使用 Spring 框架。

开发环境

```
Windows 7
Eclipse Juno
JRE-7
JDK -7 
```

我使用的罐子是...

```
hibernate-core-4.1.7.Final.jar
c3p0-0.9.2-pre6.jar
jtds-1.3.0.jar 
```

但在同一个库路径中也有

```
hibernate-c3p0-4.1.1.Final.jar
spring-orm-3.2.0.RC1.jar 
```

那些其他罐子（hibernate-c3p0-4.1.1.Final.jar 和 spring-orm-3.2.0.RC1.jar）是否有可能对这个错误产生一些影响（见下文）？

是的，整个弹簧框架罐子都在路上，但我只是想先习惯休眠。我真的不知道如何使用Spring。让我们暂时把这件事留在这里。

我可以创建连接并成功查询数据库。但我得到这个错误

就像是

`Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@4d0106e5`

和

```
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@4d0106e5 
```

我得到的错误非常重复。他们都是这样的

```
11월 30, 2012 4:39:59 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
11월 30, 2012 4:39:59 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] NewPooledConnection close Exception.
java.sql.SQLException: I/O Error: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388)
    at net.sourceforge.jtds.jdbc.TdsCore.clearResponseQueue(TdsCore.java:736)
    at net.sourceforge.jtds.jdbc.JtdsStatement.reset(JtdsStatement.java:722)
    at net.sourceforge.jtds.jdbc.JtdsStatement.close(JtdsStatement.java:966)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:718)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:592)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)
Caused by: java.io.IOException: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:755)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282)
    ... 9 more

11월 30, 2012 4:39:59 오후 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@4d0106e5
java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@4d0106e5
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:638)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)

11월 30, 2012 4:42:17 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
11월 30, 2012 4:42:17 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] NewPooledConnection close Exception.
java.sql.SQLException: I/O Error: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388)
    at net.sourceforge.jtds.jdbc.TdsCore.clearResponseQueue(TdsCore.java:736)
    at net.sourceforge.jtds.jdbc.JtdsStatement.reset(JtdsStatement.java:722)
    at net.sourceforge.jtds.jdbc.JtdsStatement.close(JtdsStatement.java:966)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:718)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:592)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)
Caused by: java.io.IOException: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:755)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282)
    ... 9 more

11월 30, 2012 4:42:17 오후 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@40a4d015
java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@40a4d015
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:638)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)

11월 30, 2012 4:42:17 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
11월 30, 2012 4:42:17 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] NewPooledConnection close Exception.
java.sql.SQLException: I/O Error: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388)
    at net.sourceforge.jtds.jdbc.TdsCore.clearResponseQueue(TdsCore.java:736)
    at net.sourceforge.jtds.jdbc.JtdsStatement.reset(JtdsStatement.java:722)
    at net.sourceforge.jtds.jdbc.JtdsStatement.close(JtdsStatement.java:966)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:718)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:592)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)
Caused by: java.io.IOException: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:755)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282)
    ... 9 more

11월 30, 2012 4:42:17 오후 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@2ee657fa
java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@2ee657fa
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:638)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)

11월 30, 2012 4:42:18 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
11월 30, 2012 4:42:18 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] NewPooledConnection close Exception.
java.sql.SQLException: I/O Error: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388)
    at net.sourceforge.jtds.jdbc.TdsCore.clearResponseQueue(TdsCore.java:736)
    at net.sourceforge.jtds.jdbc.JtdsStatement.reset(JtdsStatement.java:722)
    at net.sourceforge.jtds.jdbc.JtdsStatement.close(JtdsStatement.java:966)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:718)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:592)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)
Caused by: java.io.IOException: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:755)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282)
    ... 9 more

11월 30, 2012 4:42:18 오후 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@51b2f91b
java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@51b2f91b
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:638)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)

11월 30, 2012 4:42:19 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
11월 30, 2012 4:42:19 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] NewPooledConnection close Exception.
java.sql.SQLException: I/O Error: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388)
    at net.sourceforge.jtds.jdbc.TdsCore.clearResponseQueue(TdsCore.java:736)
    at net.sourceforge.jtds.jdbc.JtdsStatement.reset(JtdsStatement.java:722)
    at net.sourceforge.jtds.jdbc.JtdsStatement.close(JtdsStatement.java:966)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:718)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:592)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)
Caused by: java.io.IOException: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:755)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282)
    ... 9 more

11월 30, 2012 4:42:19 오후 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@7bb39e5e
java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@7bb39e5e
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:638)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)

11월 30, 2012 4:42:21 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
11월 30, 2012 4:42:21 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] NewPooledConnection close Exception.
java.sql.SQLException: I/O Error: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388)
    at net.sourceforge.jtds.jdbc.TdsCore.clearResponseQueue(TdsCore.java:736)
    at net.sourceforge.jtds.jdbc.JtdsStatement.reset(JtdsStatement.java:722)
    at net.sourceforge.jtds.jdbc.JtdsStatement.close(JtdsStatement.java:966)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:718)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:592)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)
Caused by: java.io.IOException: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:755)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282)
    ... 9 more

11월 30, 2012 4:42:21 오후 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@155767ad
java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@155767ad
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:638)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)

11월 30, 2012 4:42:22 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
11월 30, 2012 4:42:22 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] NewPooledConnection close Exception.
java.sql.SQLException: I/O Error: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388)
    at net.sourceforge.jtds.jdbc.TdsCore.clearResponseQueue(TdsCore.java:736)
    at net.sourceforge.jtds.jdbc.JtdsStatement.reset(JtdsStatement.java:722)
    at net.sourceforge.jtds.jdbc.JtdsStatement.close(JtdsStatement.java:966)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:718)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:592)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)
Caused by: java.io.IOException: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:755)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282)
    ... 9 more

11월 30, 2012 4:42:22 오후 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@299bdc58
java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@299bdc58
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:638)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)

11월 30, 2012 4:42:22 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
11월 30, 2012 4:42:22 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] NewPooledConnection close Exception.
java.sql.SQLException: I/O Error: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388)
    at net.sourceforge.jtds.jdbc.TdsCore.clearResponseQueue(TdsCore.java:736)
    at net.sourceforge.jtds.jdbc.JtdsStatement.reset(JtdsStatement.java:722)
    at net.sourceforge.jtds.jdbc.JtdsStatement.close(JtdsStatement.java:966)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:718)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:592)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)
Caused by: java.io.IOException: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:755)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282)
    ... 9 more

11월 30, 2012 4:42:22 오후 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@550a9854
java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@550a9854
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:638)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)

11월 30, 2012 4:42:22 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
11월 30, 2012 4:42:22 오후 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
INFO: [c3p0] NewPooledConnection close Exception.
java.sql.SQLException: I/O Error: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388)
    at net.sourceforge.jtds.jdbc.TdsCore.clearResponseQueue(TdsCore.java:736)
    at net.sourceforge.jtds.jdbc.JtdsStatement.reset(JtdsStatement.java:722)
    at net.sourceforge.jtds.jdbc.JtdsStatement.close(JtdsStatement.java:966)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:718)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:592)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636)
Caused by: java.io.IOException: Stream 2 attempting to read when no request has been sent
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:755)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282)
    ... 9 more

11월 30, 2012 4:42:22 오후 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
WARNING: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@67a80f8e
java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@67a80f8e
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:638)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.closeMaybeCheckedOut(NewPooledConnection.java:247)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:607)
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:1012)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:636) 
```

提前致谢。让我知道是否有几点我可以改进写一个问题:)

编辑糟糕，我忘了粘贴我的配置。开始

```
<hibernate-configuration>

<session-factory>

 <!-- Database connection settings -->
 <property name="connection.driver_class">net.sourceforge.jtds.jdbc.Driver</property>
 <!--  -->

 <!-- JDBC connection pool (use the built-in) -->
 <property name="connection.pool_size">5</property>

 <!-- connection pooling -->

        <property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
        <!-- 
        <property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>        
         -->
        <property name="hibernate.c3p0.acquire_increment" >1</property>
        <property name="hibernate.c3p0.idle_test_period">30</property>
        <property name="hibernate.c3p0.min_size">1</property>
        <property name="hibernate.c3p0.max_size">2</property>
        <property name="hibernate.c3p0.max_statements">50</property>
        <property name="hibernate.c3p0.timeout">60</property>

        <!-- 
        <property name="hibernate.c3p0.acquireRetryAttempts">1</property>
        <property name="hibernate.c3p0.acquireRetryDelay">250</property>
         -->

 <!-- SQL dialect -->
 <!--  
 <property name="dialect">org.hibernate.dialect.SQLServerDialect</property>
 -->

 <!-- Enable Hibernate's automatic session context management -->
 <property name="current_session_context_class">thread</property>

 <!-- Disable the second-level cache -->
 <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

 <!-- Echo all executed SQL to stdout -->
 <property name="show_sql">true</property>

 <!-- Drop and re-create the database schema on startup -->
 <!-- <property name="hbm2ddl.auto">update</property> -->

 <!-- Mapping files -->
 <mapping resource="standard.hbm.xml"/>
 <mapping resource="revisionedFile.hbm.xml"/>
 <mapping resource="keyword.hbm.xml"/>  
 <mapping resource="device.hbm.xml"/>
 <mapping resource="reference.hbm.xml"/>
 <mapping resource="commonSpecification.hbm.xml"/>
 <mapping resource="item.hbm.xml"/>
 <mapping resource="superItem.hbm.xml"/>
 <mapping resource="defaultURLResource.hbm.xml" />
 <mapping resource="test.hbm.xml"/>

  <!--  Enver Listeners -->
   <listener class="org.hibernate.envers.event.AuditEventListener" type="post-insert"/>
   <listener class="org.hibernate.envers.event.AuditEventListener" type="post-update"/>
   <listener class="org.hibernate.envers.event.AuditEventListener" type="post-delete"/>
   <listener class="org.hibernate.envers.event.AuditEventListener" type="pre-collection-update"/>
   <listener class="org.hibernate.envers.event.AuditEventListener" type="pre-collection-remove"/>
   <listener class="org.hibernate.envers.event.AuditEventListener" type="post-collection-recreate"/>

</session-factory>

</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:35:42.363

我不知道您为什么会看到异常，但它们是 c3p0 正在清理应该由用户关闭但没有关闭的语句的异常。解决问题的一种方法（既可以解决问题，也可以为您提供有关问题发生位置的更清晰信息）是确保您的客户端应用程序在使用语句后立即关闭语句。当您签入 Connections 时（或者在这种情况下，当从池中删除 PooledConnection 时）c3p0 会小心地为您清理未关闭的语句，但是如果发生异常，它们将在资源期间报告为异常-清理，即在 close() 期间。这就是你所看到的。

在 PooledConnection 被销毁时，您如何/为什么要关闭未缓存的 Statements，这有点神秘。池在签出时不应尝试 close() PooledConnection，如果已签入，则应在签入时清理语句。我将在记录器 com.mchange.v2.c3p0.impl.NewPooledConnection 中添加更多日志记录（在 FINER/DEBUG 级别），以帮助跟踪此问题的下一个 c3p0 预发行版。如果你有机会，请一定要看看。

# c - 在 rabbitmq-c 中使用默认交换

> ID：13641069
> 
> 赞同：5
> 
> 时间：2012-11-30T07:53:49.220
> 
> 标签：c, client, exchange-server, default, rabbitmq

我正在尝试连接到centos 5.6中的rabbitmq-c并按照网站的步骤在c客户端中测试它的功能：[http](http://www.rabbitmq.com/tutorials/tutorial-one-java.html) ://www.rabbitmq.com/tutorials/tutorial-one-java.html 。但是，当我使用默认交换时它会失败。

例如，我想通过名称为“（AMQP 默认）”的默认交换向名为“myqueue”的队列发送消息“Hello world”。

在java中，代码如下：

```
channel.basicPublish("", QUEUE_NAME, null, message.getBytes()); 
```

但是在 c 中，当我运行 rmq_new_task.c（几乎与 amqp_sendstring.c 相同）作为[https://github.com/liuhaobupt/rabbitmq_work_queues_demo-with-rabbit-c-client-lib](https://github.com/liuhaobupt/rabbitmq_work_queues_demo-with-rabbit-c-client-lib)上的示例时。

```
queuename="myqueue";
......
die_on_error(amqp_basic_publish(conn, amqp_cstring_bytes(exchange),
    amqp_cstring_bytes(routingkey), &props, amqp_cstring_bytes("Hello world")),
    "Publishing"); 
```

在java客户端中，我们只需将参数“exchange”设置为“”，告诉服务器我们将通过默认交换将消息发送到与routingkey相同的指定队列。

那么我应该在c客户端（使用默认交换）中赋予第二个参数“exchange”什么值？我试图将其设置为“”或“amq.direct”。它在运行时没有显示任何错误，并且看起来运行良好。

但是，当我在 rabbitmq-management(http://localhost:55672/#/queues) 中签入时，名为“myqueue”的队列并不存在！

有人能指出我正确的方向吗？我真的很感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T10:23:37.877

查看[http://www.rabbitmq.com/tutorials/amqp-concepts.html](http://www.rabbitmq.com/tutorials/amqp-concepts.html)并专门查找标题为**Default Exchange**的部分。

默认交换的使用非常简单。

在java中你会这样做：

```
channel.basicPublish("", "hello", null, message.getBytes()); 
```

通过指定`""`in 表示使用默认交换。（应该没有必要使用`amq.direct`）

根据上面的文章，它指出：

> 默认交换是代理预先声明的没有名称（空字符串）的直接交换。它有一个特殊的属性，使它对简单的应用程序非常有用：*创建的每个队列都会自动绑定到它，并使用与队列名称相同的路由键*。

因此，这意味着只有在您*已经*创建了要发布到的队列时，才能发布到默认交换。

因此，您需要先创建队列，然后才能发布到默认交换。完成后，您将开始看到您的消息。

# asp.net - 在动态控件的回发事件中，asp.net 应用程序中缺少动态控件

> ID：13641070
> 
> 赞同：-1
> 
> 时间：2012-11-30T07:53:51.183
> 
> 标签：asp.net

嗨，我在按钮单击事件上添加动态控件，因为我有下拉控件，我正在引发一个事件以下拉所选索引更改，我将自动回发设为 true，当我从下拉列表中选择新项目时我失去了所有的动态控制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T08:30:55.707

每个继承**IPostBackDataHandler**接口的服务器控件都有一个处理回发数据的**LoadPostData**方法。当控件由一个类（页面、表单、占位符、控件等）实现时，该类调用**LoadPostData**方法并传递发布的数据和键**以维护控件状态**。

您**需要做的就是在回发期间每次在页面加载事件之前或之内重新实例化/重新初始化动态控件**，并将此控件添加到页面/表单/占位符。然后通过父控件调用 LoadPostData 方法将发布的数据自动分配给控件，并触发控件事件。

查看文章以及如何编写动态控制代码 - ***[如何在asp.net中回发期间维护动态控制事件、数据](http://www.dotnetbull.com/2013/09/maintain-dynamic-control-events-data-during-postback.html)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:29:12.083

您必须在每次回发时重新创建所有动态创建的控件（最迟在加载事件中）。您还必须确保它们获得与以前相同的 ID 以触发事件并维护 ViewState。

如果您知道要创建的控件数量（可以存储在 中`ViewState`），则可以通过将其附加到控件 ID 来从计数器变量中派生 ID。然后您可以在页面`init`事件中使用正确的 ID 重新创建它们。

推荐读物：

*   [真正了解动态控制](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)
*   [页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

或者您使用像[Repeater](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)这样自动执行此操作的内置[数据绑定控件之一。](http://msdn.microsoft.com/en-us/library/ms228214.aspx)你只需要设置它们并调用()。`DataSource``DataBind`

以下是我对与实现类似的问题的回答：

*   [C＃](https://stackoverflow.com/a/9276160/284240)
*   [VB.NET (+ C#)](https://stackoverflow.com/questions/5266482/load-dynamic-control-from-a-dropdownlist-event-handler-how-to-preserve-the-cont/5266670#5266670)

# html - 生成显示代码的 symfony 类型教程

> ID：13641074
> 
> 赞同：1
> 
> 时间：2012-11-30T07:54:01.587
> 
> 标签：html, symfony

我想知道是否有人知道 Symfony 网站如何生成代码以显示 YAML、XML 和 PHP 等代码

例如：[http ://symfony.com/doc/current/book/forms.html](http://symfony.com/doc/current/book/forms.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:25:08.667

以下是[Symfony2](http://symfony.com/)网站如何做的文档：
[Symfony2 文档：格式](http://symfony.com/doc/current/contributing/documentation/format.html)

还有这个捆绑包（我自己没试过）：
[nicodmf/HighlightBundle](https://github.com/nicodmf/HighlightBundle)

你可能想看看：

*   [葛氏](http://qbnz.com/highlighter/)
*   [语法高亮](http://alexgorbatchev.com/SyntaxHighlighter/)
*   [谷歌代码美化](http://code.google.com/p/google-code-prettify/)

# c++ - 是什么导致 cin 中的字符计数不准确且非常大？

> ID：13641075
> 
> 赞同：1
> 
> 时间：2012-11-30T07:54:10.857
> 
> 标签：c++

我正在通过`char c = cin.get()`. 我的输出示例是：a：53 b：32 c：29*等。*

对于其中一个字母，我得到了一个非常大的 9 位数字。然后，当我使用另一个包含更多字符的输入文件时，这些数字是 6 位数字并且太大而无法准确。对这种表型有任何想法吗？

再说一次，抱歉，现在是学期末的关键时刻。我很感激那里的任何帮助。

```
int main (int argc, char *argv[])
{

int count [26] = { };   
char alpha [26] = { };

char c;

c = cin.get();     
while(!cin.eof())
{
  if (isalpha(c))
  {
  c = tolower(c);      
  }    

  count [ c - 'a']++;
  alpha [ c - 'a'] = c;

  c = cin.get();
  }     

  for ( int i = 0; i<26; i++ )
     {
     cout << alpha[i] << ":" << count[i] << endl;
     } 

  } //end main 
```

这是输出：（已编辑）

```
a:224
b:50
c:70
d:20
e:167772180
f:10
g:40
h:66
i:28 
```

这是输入：（已编辑）

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

进行了这些更改，但它仍然“挂起”：

```
c = cin.get();     
while(c=cin.get())
{
  c = tolower(c);
  if (isalpha(c))
      continue;      

  count [ c - 'a']++;
  alpha [ c - 'a'] = c;

  }     

  for ( int i = 0; i<26; i++ )
     {
     cout << alpha[i] << ":" << count[i] << endl;
     } 

  } //end main 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:04:23.527

如果输入文件包含除字母以外的任何其他内容，则任何事情都可能发生，因为您正在使用超出范围的索引访问数组。也许你的意思是：

```
while(!cin.eof())
{
    if (isalpha(c))
    {
        c = tolower(c);      

        count [ c - 'a']++;
        alpha [ c - 'a'] = c;
     }

    c = cin.get();
} 
```

例如，当您的数据包含换行符 (10) 时，您`alpha`使用索引 10 - 97 = -87 访问。这可能会将 10 写入`count[4]`.

# android - 错误转换结果 org.json.JSONException

> ID：13641078
> 
> 赞同：1
> 
> 时间：2012-11-30T07:54:32.047
> 
> 标签：android, json

> 我在我的 android 应用程序中使用 asp.net web api。但这给了我一个错误。我的返回字符串是 JSON 格式。
> 下面是我的日志猫

```
11-30 12:44:02.760: W/ActivityThread(821): Application com.example.test is waiting for the debugger on port 8100...
11-30 12:44:02.811: I/System.out(821): Sending WAIT chunk
11-30 12:44:02.820: I/dalvikvm(821): Debugger is active
11-30 12:44:02.900: I/System.out(821): Debugger has connected
11-30 12:44:02.900: I/System.out(821): waiting for debugger to settle...
11-30 12:44:03.099: I/System.out(821): waiting for debugger to settle...
11-30 12:44:03.299: I/System.out(821): waiting for debugger to settle...
11-30 12:44:03.509: I/System.out(821): waiting for debugger to settle...
11-30 12:44:03.709: I/System.out(821): waiting for debugger to settle...
11-30 12:44:03.910: I/System.out(821): waiting for debugger to settle...
11-30 12:44:04.113: I/System.out(821): waiting for debugger to settle...
11-30 12:44:04.319: I/System.out(821): waiting for debugger to settle...
11-30 12:44:04.519: I/System.out(821): waiting for debugger to settle...
11-30 12:44:04.721: I/System.out(821): waiting for debugger to settle...
11-30 12:44:04.930: I/System.out(821): debugger has settled (1324)
11-30 12:46:27.210: E/log_tag(821): Error converting result org.json.JSONException: Value [{"Name":"Panadol","Batch":"B030","Id":1,"Expiry":"12\/11\/2013","Type":"Tablet","Price":"12"},{"Name":"Velosef 500mg","Batch":"B069","Id":2,"Expiry":"06\/12\/2014","Type":"Capsule","Price":"100"},{"Name":"Tandegyl 120ml","Batch":"B097","Id":3,"Expiry":"09\/08\/2015","Type":"Syrup","Price":"120"},{"Name":"Acefyl","Batch":"B78","Id":4,"Expiry":"03\/12\/2014","Type":"Syrup","Price":"50"},{"Name":"Tyno","Batch":"B79","Id":5,"Expiry":"03\/06\/2015","Type":"Syrup","Price":"48"},{"Name":"Nocid 40mg","Batch":"BN09","Id":6,"Expiry":"11\/09\/2013","Type":"Tablet","Price":"60"},{"Name":"Lipiget 100mg","Batch":"B090","Id":7,"Expiry":"09\/09\/2015","Type":"Tablet","Price":"250"}] of type org.json.JSONArray cannot be converted to JSONObject
11-30 12:46:42.319: D/dalvikvm(821): Debugger has detached; object registry had 498 entries
11-30 12:46:42.333: I/dalvikvm(821): ignoring registerObject request in thread=1
11-30 12:46:42.333: I/dalvikvm(821): ignoring registerObject request in thread=1
11-30 12:46:42.333: D/AndroidRuntime(821): Shutting down VM
11-30 12:46:42.333: W/dalvikvm(821): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-30 12:46:42.399: E/AndroidRuntime(821): FATAL EXCEPTION: main
11-30 12:46:42.399: E/AndroidRuntime(821): java.lang.NullPointerException
11-30 12:46:42.399: E/AndroidRuntime(821):  at com.example.test.Test$1$1$1.run(Test.java:63)
11-30 12:46:42.399: E/AndroidRuntime(821):  at android.os.Handler.handleCallback(Handler.java:587)
11-30 12:46:42.399: E/AndroidRuntime(821):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-30 12:46:42.399: E/AndroidRuntime(821):  at android.os.Looper.loop(Looper.java:123)
11-30 12:46:42.399: E/AndroidRuntime(821):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-30 12:46:42.399: E/AndroidRuntime(821):  at java.lang.reflect.Method.invokeNative(Native Method)
11-30 12:46:42.399: E/AndroidRuntime(821):  at java.lang.reflect.Method.invoke(Method.java:507)
11-30 12:46:42.399: E/AndroidRuntime(821):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-30 12:46:42.399: E/AndroidRuntime(821):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-30 12:46:42.399: E/AndroidRuntime(821):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我的测试类 **Test.java**

```
package com.example.test;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.json.JSONException;
import org.json.JSONObject;
import android.os.Bundle;
import android.os.Handler;
import android.os.StrictMode;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.widget.AutoCompleteTextView;
import android.widget.Button;

public class Test extends Activity {

    AutoCompleteTextView acw;
    Button click;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 

        acw=(AutoCompleteTextView)findViewById(R.id.AndroidBooks);
        click=(Button)findViewById(R.id.button1);

        final Handler threadHandler;  
        threadHandler = new Handler();

        new Thread(new Runnable(){

            @Override
            public void run() {

                final String url="http://10.0.2.2:3325/api/ProductType";

                click.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        threadHandler.post(new Runnable(){

                            @Override
                            public void run() {

                                List<String> temp=new ArrayList<String>();

                                try {
                                    JSONObject json=executeGet(url);
                                    Log.v("Response", json.toString());
                                } catch (JSONException e) {

                                    e.printStackTrace();
                                }

                            }

                        });

                    }
                });

            }

        }).start();
    }

    public static JSONObject  executeGet(String url) throws JSONException
    {
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;
        int response=0;
        HttpURLConnection connection = null; 
        try
        {
            connection = (HttpURLConnection) new URL(url).openConnection();
            connection.setDoInput(true);
            connection.setRequestProperty("Content-Type", "application/json");
            connection.setRequestMethod("GET");
            connection.connect();
            response=connection.getResponseCode();
            is=connection.getInputStream();
        } 
        catch(Exception e)
        {
            e.printStackTrace();
            Log.e("HTTP Response", e.toString());
        }
        try
        {
            if(response==200)
            {

                BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;

                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                } 
                is.close();
                result=sb.toString();

                jArray = new JSONObject(result);
            }

        }
        catch (IOException e) {
            e.printStackTrace();
        }
        catch(Exception e)
        {
            Log.e("log_tag", "Error converting result "+e.toString());
        }

        return jArray;
    }

} 
```

> 我在谷歌上发现数据不是 JSON 格式。根据我的日志，我的数据是 JSON 格式。所以代码有什么问题。我也使用 UTF-8 编码。但同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:56:46.170

您正在将`JSONArray`a 读入`JSONObject`.. 您需要更改：

```
jArray = new JSONObject(result); 
```

至：

```
JSONArray jArray = new JSONArray(result); 
```

检查[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T07:56:49.213

您正在尝试转换`JsonArray`为`JsonObject`更改您的代码，因为在当前 json 字符串中包含一个`JsonArray`而不是`JsonObejct`作为根元素：

```
 try {
      JSONArray jsonarray=executeGet(url);
      for (int i = 0; i < jsonarray.length(); ++i) {
      JSONObject jsonobject = jsonarray.getJSONObject(i);
      String str_name=jsonobject.getString("Name");
      String str_Batch=jsonobject.getString("Batch");
      String str_Id=jsonobject.getString("Id");
      String str_Expiry=jsonobject.getString("Expiry");
      String str_Type=jsonobject.getString("Type");
      String str_Price=jsonobject.getString("Price");

      } catch (JSONException e) {
         e.printStackTrace();
    } 
```

并将`executeGet(String url)`方法的重新运行类型从`JsonObject`更改为`JSONArray`as

```
public static JSONArray executeGet(String url) throws JSONException 
```

# iphone - 如何在 iPhone SDK 中的 UIImage 上添加凹凸滤镜效果 - Objective C

> ID：13641079
> 
> 赞同：0
> 
> 时间：2012-11-30T07:54:33.543
> 
> 标签：iphone, objective-c, ios

如何在 iphone SDK 中的 UIImage 上添加凹凸滤镜效果。我正在尝试使用内核值和卷积效果来实现，但它会产生非常大的凹凸效果，我需要对图像进行一些小的凹凸效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:05:41.567

如果您的目标是 5.1 及更高版本，`Core Image`如果您需要部署到较低的目标，您可以使用 Brad 的出色 GPUImage 框架。检查此[SO question](https://stackoverflow.com/questions/10229645/how-to-perform-bump-distortion-in-ios-5-0)以了解有关两者的更多详细信息。

# jquery - $.ajax 对服务器有多大影响？

> ID：13641085
> 
> 赞同：0
> 
> 时间：2012-11-30T07:55:01.780
> 
> 标签：jquery, ajax, get, load

我目前每 5 分钟重新加载（如果您更喜欢这个词，则刷新）我的页面，但这对我来说是相当长的时间。我不知道使用以下代码重新加载页面对服务器的影响有多大，这只是我想知道的；如果我将间隔时间从 5 分钟更改为 1 秒，服务器需要多少时间？它会减慢服务器速度吗？我的网站每半小时有超过 5 名访问者，但更新后会更多。

```
$(document).ready(function() {

    setInterval(function() {
        $('#loading-page').show().html('<img src="images/animation-loading.gif" alt="" title="Reloading the page">');

        $.ajax({
            url: 'get/statistics',
            type: 'GET',

            success: function(s) {
                $("#load-statistics").html(s);
            },

            error: function() {
                $('#loading-page').show().html('<img src="images/exclamation-red.png" alt="" title="Couldn't reload page. Trying again soon">');
            }
        });
    }, 300e3);

}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:02:02.407

一个简单的答案是“5 分钟 = 300 秒”，因此将间隔减少到 1 秒将加载服务器 300 倍。

它会比那个少一点，因为可能会有一些浏览器限制和网络延迟等等，但无论如何都是很大的。想想用户和他们产生的流量。

1 秒太极端了，几乎不需要。您不妨伪造它（就像某些计数器所做的那样）以创建动态效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:06:45.523

你可以自己测试一下。尝试这个：

```
var start = new Date().getTime();

$.ajax({
    url: 'get/statistics',
    type: 'GET',

    success: function(s) {

        var end = new Date().getTime();
        console.log('milliseconds passed', end - start);

        $("#load-statistics").html(s);
    }

});​ 
```

检查控制台的处理时间。然后，您可以根据您将在控制台获得的 10-20 个采样时间的平均值来更改间隔时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:02:47.767

这很可能取决于服务器端发生的情况。你不能和开发服务器端服务的开发者谈谈吗？它还取决于有多少并发浏览器将调用此服务。许多服务旨在同时回答数百万次，但通常您可以拨打多少电话以及多久写入服务文档。

我认为经验方法可能是您的方式，根据服务器响应时间和服务器负载（如果您可以测量它）更改频率的秒数或分钟数。您还可以测量 JavaScript 从调用开始到收到响应所花费的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T08:12:39.303

这在很大程度上取决于您的页面执行的操作。

此外，如前所述，1 秒可能太极端，特别是对于统计类页面，同时 5 分钟可能太慢而无法使用，当然这取决于您网站的内容/性质。

您的服务器负载将取决于请求频率以及并发用户数。

我想在这里指出的是，在这种情况下，您可以使用服务器端“缓存”来显着减少服务器负载。从您的页面名称来看，统计数据是服务器缓存的理想候选者。因为它们不必 100% 准确，并且一旦生成，可以在接下来的两分钟（例如）左右使用。

因此，如果您缓存统计响应，所有后续请求都将获得缓存内容，从而减少服务器的负载。如果使用正确的基础架构，请求甚至可能无法到达您的服务器（例如：某些网络交换机可以缓存和返回内容）。

您必须根据您的服务器端技术找到合适的缓存机制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T08:03:35.677

对于那个数字，即每半小时 5 位访问者，我怀疑服务器处理页面更新不应该有任何“困难”，假设每次更新都不是一个让服务器陷入困境的疯狂密集的长时间操作. 还有各种缓存或缓存机制可以通过仅获取更改的资源而不是重新生成未更改的资源来进一步提高性能。当负载增加时，即每个 x 周期有更多用户，那么您可以投资调整您的应用程序和/或服务器。使用监控工具进行检查可能是一个开始。

# templates - 使用 underscorejs 模板对 SEO 的影响

> ID：13641090
> 
> 赞同：0
> 
> 时间：2012-11-30T07:55:18.423
> 
> 标签：templates, seo, underscore.js

我有一个使用 underscorejs 的网站。我在 HTML 中包含了许多模板（下划线）。

有时会在页面上读取不必要的模板。这会影响我网站的 SEO 评级吗？

`<script>`我听说如果 Google 搜索引擎在标签中找不到 Javascript 代码，它会降低您网站的排名。

在指定 underscorejs 模板时，我们指定它

```
<script type="text/template" id="XXX"></script> 
```

PS：我知道readig不必要的模板不好，但这是在网站上做了很长时间的，我不打算很快编辑它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T08:04:41.850

我在这里看到的问题是，由于您使用的是通过 Javascript 加载的模板（例如 Underscore 或 Handlebars），一些搜索引擎在索引您的网站时会遇到问题（尽管有改进索引的技术）。

我想您正在构建一个单页 Web 应用程序，该应用程序使用 Underscore 模板通过 Javascript 在客户端呈现；如果需要，我猜您正在对服务器进行 AJAX 调用以执行 CRUD 操作。

单页应用程序中的 SEO 问题是众所周知的。[这](http://backbonetutorials.com/seo-for-single-page-apps/)是一篇有趣的文章（如果您使用 BackboneJs，则特别有趣）。

[这里](https://stackoverflow.com/questions/7549306/single-page-js-websites-and-seo)还有一个 Stackoverflow 中处理单页 Web 应用程序和 SEO 的线程。

[另一个资源](https://developers.google.com/webmasters/ajax-crawling/)：来自 Google 的“使 AJAX 应用程序可抓取”。

我希望这有帮助。

# java - 在 Android 中创建自定义通知栏

> ID：13641091
> 
> 赞同：2
> 
> 时间：2012-11-30T07:55:28.047
> 
> 标签：java, android, xml, notifications, android-4.2-jelly-bean

我需要开始使用它。我想要做的是创建一个通知栏（如欧米茄，状态栏）。

我真的不知道从哪里开始。我不需要任何代码（我尝试制作自己的新代码，无论需要多长时间），但我想这样做。

我希望 bar 具有更多功能，因此我需要从头开始创建一个。

另外，我希望每当应用程序的（其他）想要显示通知时，它应该出现在我的栏上。

# php - How can I get a web page on ASP server, using PHP?

> ID：13641092
> 
> 赞同：2
> 
> 时间：2012-11-30T07:55:34.940
> 
> 标签：php

A few days ago I decided to write a short script. It makes two GET requestes to an ASP server, because I want to get the **sessionId** variable and the **viewstate** variable. I decided to use fsockopen() and it works until the first request! After that it crashes and there's a Bad request error.

Here's the code:

```
<?php
$fp = fsockopen("www.atb.bergamo.it", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {

    $out = "GET /ITA/Default.aspx?SEZ=2&PAG=38&MOD=LINTRV HTTP/1.1\r\n";
    $out .= "Host: www.atb.bergamo.it\r\n";
    $out .= "User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:10.0.2) Gecko/20100101 Firefox/10.0.2\r\n";
    $out .= "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n";
    $out .= "Accept-Language: it-it,it;q=0.8,en-us;q=0.5,en;q=0.3\r\n";
    $out .= "Accept-Encoding: gzip, deflate\r\n";
    $out .= "Connection: keep-alive\r\n\r\n";
    fwrite($fp, $out);

    $header = '';

    do{
        $header .= fgets($fp, 128);
    }while(strpos($header, "\r\n\r\n") == false);

    list(,$sessione) = explode('ASP.NET_SessionId=', $header);
    list($sessione) = explode('; path=/; HttpOnly', $sessione);

    $cookie = "Cookie: ASP.NET_SessionId=".$sessione."; READONLY=MA==; __utma=".$_COOKIE['__utma']."; __utmb=".$_COOKIE['__utmb']."; __utmc=".$_COOKIE['__utmc']."; __utmz=".$_COOKIE['__utmz']."; HstCfa1041967=".$_COOKIE['HstCfa1041967']."; HstCla1041967=".$_COOKIE['HstCla1041967']."; HstCmu1041967=".$_COOKIE['HstCmu1041967']."; HstPn1041967=".$_COOKIE['HstPn1041967']."; HstPt1041967=".$_COOKIE['HstPt1041967']."; HstCnv1041967=".$_COOKIE['HstCnv1041967']."; HstCns1041967=".$_COOKIE['HstCns1041967']."; c_ref_1041967=http%3A%2F%2Fwww.google.it%2Furl%3Fsa%3Dt%26rct%3Dj%26q%3Datb%2520orari%26source%3Dweb%26cd%3D1%26sqi%3D2%26ved%3D0CC4QFjAA%26url%3Dhttp%253A%252F%252Fwww.atb.bergamo.it%252FITA%252FDefault.aspx%253FSEZ%253D2%2526PAG%253D38%2526MOD%253DLINTRV%26ei%3DxZi3UNK4AojysgburIGoCg%26usg%3DAFQjCNFKu0Tuffg6uZVhC1akh3TKqesWcQ;"; // __atuvc=27%7C48

    $cookie = str_replace("utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(none)", "utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=atb", $cookie);

    echo "</br></br></br></br> ci sono </br></br></br></br>";
    $out =  "GET /ITA/Default.aspx?SEZ=2&PAG=38&MOD=LINTRV HTTP/1.1\r\n";
    $out .= "Host: www.atb.bergamo.it\r\n";
    $out .= "Host: www.atb.bergamo.it\r\n";
    $out .= "User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:10.0.2) Gecko/20100101 Firefox/10.0.2\r\n";
    $out .= "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n";
    $out .= "Accept-Language: it-it,it;q=0.8,en-us;q=0.5,en;q=0.3\r\n";
    $out .= "Accept-Encoding: gzip, deflate\r\n";
    $out .= "Connection: keep-alive\r\n";
    $out .= $cookie."\r\n\r\n";

    fwrite($fp, $out);

    while (!feof($fp)) {
        echo fgets($fp, 128);
    }       

    //die($header."</br></br></br></br>".$sessione);

    fclose($fp);
} 
```

?>

I run the script on a local server, server2go. I don't know why it doesn't work... Can you help me please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:06:11.523

Use `curl`

```
$url = "http://www.atb.bergamo.it/ITA/Default.aspx?SEZ=2&PAG=38&MOD=LINTRV";
$ckfile = tempnam ("/tmp", "CURLCOOKIE");
$ch = curl_init ($url);
curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$html = curl_exec ($ch);

curl_close($ch);

preg_match('~<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="(.*?)" />~',$html,$viewstate);

var_dump(file_get_contents($ckfile)); <--- cookie
var_dump($viewstate[1]);              <--- View State 
```

# ios - 为什么我在看到警报后无法立即触摸警报视图中的按钮？

> ID：13641097
> 
> 赞同：1
> 
> 时间：2012-11-30T07:56:25.947
> 
> 标签：ios, testing, cucumber, bdd, frank

我正在使用名为“Frank”的自动化框架测试 iOS 应用程序

我需要覆盖的应用程序中弹出了一些警报。

我写了我的功能文件如下：

```
设想：
    我输入了错误的用户名和密码，我应该看到日志失败警报。
...

    当我等待看到“日志失败”时
    然后我触摸标有“确定”的按钮

```

不幸的是，这段代码不起作用，虽然 frank(cucumber) 将触摸“OK”按钮的测试步骤标记为通过，但实际上，按钮不会被触摸。

我必须这样做：

```
设想：
    我输入了错误的用户名和密码，我应该看到日志失败警报。
...

    当我等待看到“日志失败”时
    #等待 1 秒以触摸按钮。
    我等待 1 秒

    然后我触摸标有“确定”的按钮

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:26:59.303

上面的评论可能是正确的 - 至于不同的（更好的？）解决方案 - 根据您对 ruby​​ 的舒适程度，您可以编写自己的步骤定义吗？弗兰克为您提供

```
Frank::Cucumber::WaitHelper.wait_until 
```

方法，您可以将您的触摸按钮代码包裹起来，从而为您提供更长的隐式等待元素。有关一些文档，请参见此处：[https ://github.com/moredip/Frank/blob/master/gem/lib/frank-cucumber/wait_helper.rb](https://github.com/moredip/Frank/blob/master/gem/lib/frank-cucumber/wait_helper.rb)

# javascript - 在 Angularjs 指令中包含 SVG 模板

> ID：13641105
> 
> 赞同：19
> 
> 时间：2012-11-30T07:57:07.960
> 
> 标签：javascript, svg, angularjs

```
<div ng-app="testrectApp">
<svg>
    <rect height="10" width="10" style="fill: #00ff00" />
    <testrect />
</svg>
</div> 
```

这是我的指令

```
module.directive('testrect', function() {
    return {
        restrict: 'E',
        template: '<rect top="20" left="20" height="10" width="10" style="fill: #ff00ff" />',
        replace: true
    };
}); 
```

但这就是元素最终在浏览器中的样子。填充两次不是错字。

```
<rect top="20" left="20" height="10" width="10" style="fill: #ff00ff;fill: #ff00ff"></rect> 
```

这是一个 jsfiddle [http://jsfiddle.net/RG2CF/](http://jsfiddle.net/RG2CF/)

我试图做的事情是不可能的，还是我做错了什么？

谢谢

编辑：我应该补充一点，这个问题可能与模板 svg rect 被命名为 xhtml 而不是 svg 的事实有关，但我不确定如何强制这个或命名空间回到 svg，如果那实际上是解决方案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-12-28T10:01:52.167

`templateNamespace`您可以设置一个属性`svg`：

```
module.directive('testrect', function() {
    return {
        restrict: 'E',
        templateNamespace: 'svg',
        template: '<rect .../>',
        replace: true
    };
}); 
```

这是文档的[链接](https://docs.angularjs.org/api/ng/service/$compile)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-06-13T20:49:53.343

**角 1.3 更新！**

我在下面的原始答案充其量是一个巨大的黑客。你真正应该做的是更新到 Angular 1.3 并`templateNamespace:'svg'`在你的指令上设置属性。请看下面@Josef Pfleger 的答案示例：[在 Angularjs 指令中包含 SVG 模板](https://stackoverflow.com/questions/13641105/including-svg-template-in-angularjs-directive/27675374#27675374)

* * *

**旧答案**

万一将来有人遇到这种情况，我可以创建一个与 svg 模板一起使用的编译函数。它现在有点难看，因此非常感谢重构帮助。

现场示例：[http ://plnkr.co/edit/DN2M3M?p=preview](http://plnkr.co/edit/DN2M3M?p=preview)

```
app.service('svgService', function(){

    var xmlns = "http://www.w3.org/2000/svg";
    var compileNode = function(angularElement){
      var rawElement = angularElement[0];

      //new lines have no localName
      if(!rawElement.localName){
        var text = document.createTextNode(rawElement.wholeText);
        return angular.element(text);
      }
      var replacement = document.createElementNS(xmlns,rawElement.localName);
      var children = angularElement.children();

      angular.forEach(children, function (value) {
        var newChildNode = compileNode(angular.element(value));
        replacement.appendChild(newChildNode[0]);
      });

      if(rawElement.localName === 'text'){
        replacement.textContent = rawElement.innerText;
      }

      var attributes = rawElement.attributes;
      for (var i = 0; i < attributes.length ; i++) {
        replacement.setAttribute(attributes[i].name, attributes[i].value);
      }

      angularElement.replaceWith(replacement);

      return angular.element(replacement);
    };

    this.compile = function(elem, attrs, transclude) {
      compileNode(elem);

      return function postLink(scope, elem,attrs,controller){
//        console.log('link called');
      };
    }
  }) 
```

用例：

```
app.directive('ngRectAndText', function(svgService) {
  return {
    restrict: 'E',
    template: 
    '<g>'
    + '<rect x="140" y="150" width="25" height="25" fill="red"></rect>'
    + '<text x="140" y="150">Hi There</text>'
    + '</g>'
    ,
    replace: true,
    compile: svgService.compile
  };
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T16:35:14.920

目前 SVG 标签不支持动态添加标签，至少在 Chrome 中是这样。它甚至不会显示新的矩形，即使您只是直接使用 DOM 或 JQuery.append() 添加它也不会显示。[看看只是想用 JQuery 来做](http://jsfiddle.net/7AztC/)

```
// this doesn't even work right. Slightly different error than yours.
$(function() {
    $('svg').append('<rect top="20" left="20" height="10" width="10" style="fill: #ff00ff" />');
}); 
```

我的猜测是，无论你以这种方式做什么，你都会看到一些非常疯狂的行为。这似乎是浏览器的问题，而不是 Angular 的问题。[我建议将其报告给 Chromium 项目](http://www.chromium.org/for-testers/bug-reporting-guidelines)。

编辑：

如果您以编程方式通过 DOM 100% 添加它，它看起来可能会起作用：[如何使 Chrome 重绘 SVG 动态添加内容？](https://stackoverflow.com/questions/2544686/how-to-make-chrome-redraw-svg-dynamically-added-content)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-02T09:43:43.387

为 SVG 使用 innerHTML shim（又名“innerSVG”）提供了另一个难题，作为 Jason More 富有洞察力的答案的替代方案。我觉得这种 innerHTML/innerSVG 方法更优雅，因为它不需要像 Jason 的回答那样的特殊编译函数，但它至少有一个缺点：如果在指令上设置了“replace: true”，它就不起作用。（这里讨论了 innerSVG 方法：[Is there some innerHTML replacement in SVG/XML?](https://stackoverflow.com/questions/9723422/is-there-some-innerhtml-replacement-in-svg-xml)）

```
// Inspiration for this derived from a shim known as "innerSVG" which adds
// an "innerHTML" attribute to SVGElement:
Object.defineProperty(SVGElement.prototype, 'innerHTML', {
  get: function() {
    // TBD!
  },
  set: function(markup) {
    // 1\. Remove all children
    while (this.firstChild) {
      this.removeChild(this.firstChild);
    }

    // 2\. Parse the SVG
    var doc = new DOMParser().parseFromString(
        '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'
        + markup
        + '</svg>',
        'application/xml'
    );

    // 3\. Import the parsed SVG and grab the childNodes
    var contents = this.ownerDocument.importNode(doc.documentElement, true).childNodes;

    // 4\. Append the childNodes to this node
    // Note: the following for loop won't work because as items are appended,
    // they are removed from contents (you'd end up with only every other
    // element getting appended and the other half remaining still in the
    // original document tree):
    //for (var i = 0; i < contents.length; i++) {
    //  this.appendChild(contents[i]);
    //}
    while (contents.length) {
      this.appendChild(contents[0]);
    }
  },
  enumerable: false,
  configurable: true
}); 
```

这是一个可以尝试的 Plunker：[http ://plnkr.co/edit/nEqfbbvpUCOVC1XbTKdQ?p=preview](http://plnkr.co/edit/nEqfbbvpUCOVC1XbTKdQ?p=preview)

这样做的原因是：SVG 元素存在于 XML 命名空间中，[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)，因此，它们必须使用 DOMParser() 解析或使用 createElementNS() 实例化（如在 Jason 的回答中），两者都可以适当地设置命名空间。如果这个使用 SVG 的过程像 HTML 一样简单，那就太好了，但不幸的是，它们的 DOM 结构略有不同，这导致需要提供我们自己的 innerHTML shim。现在，如果我们也可以让“replace: true”来处理它，那将是一件好事！

编辑：将 appendChild() 循环更新为在循环运行时更改内容的解决方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-21T00:50:44.303

angular 在创建元素时不注意命名空间（尽管元素似乎是用父级的命名空间克隆的），因此`<svg>`如果没有自定义编译函数，内部的新指令将无法工作。

像下面这样的东西可以通过创建 dom 元素本身来解决这个问题。为此，您需要`xmlns="http://www.w3.org/2000/svg"`在根元素上具有一个属性，`template`并且您的模板必须是有效的 XML（只有一个根元素）。

```
directiveGenerator = function($compile) {
  var ret, template;
  template = "<g xmlns=\"http://www.w3.org/2000/svg\"> +
             "<rect top=\"20\" left=\"20\" height=\"10\" width=\"10\" style=\"fill: #ff00ff\" />" +
             "</g>";
  ret = {
    restrict: 'E',
    compile: function(elm, attrs, transclude) {
      var templateElms;
      templateElms = (new DOMParser).parseFromString(template, 'application/xml');
      elm.replaceWith(templateElms.documentElement);
      return function(scope, elm, attrs) {
        // Your link function
      };
    }
  };
  return ret;
};

angular.module('svg.testrect', []).directive('testrec', directiveGenerator); 
```

# asp.net - 一个解决方案中的多个项目，每个环境只有一个配置文件

> ID：13641109
> 
> 赞同：1
> 
> 时间：2012-11-30T07:57:25.270
> 
> 标签：asp.net, .net, .net-4.0, web-config, projects-and-solutions

我在 .NET 解决方案中有几个项目，我想将应用程序所有不同环境的所有配置分散到“Web.Environment.Config”（Web.Dev.Config、Web.Pre.Config 等）。 ..)

问题是其中一个项目，一个名为 Services 的类库，负责数据库和 WS 连接，并且似乎无法分散配置（或者我不知道如何去中心化）。

这是解决方案的“配置树”：

```
- Solution
|-- Services (Class Library)
   |-- app.config
|-- WebService (WebServices project to expose some services)
   |-- Web.Debug.config
   |-- Web.Dev.config
   |-- Web.Pre.config
|-- Web (Web Application)
   |-- Web.Debug.config
   |-- Web.Dev.config
   |-- Web.Pre.config 
```

由于所有数据库连接都是在 Services 项目中实现的，因此我无法分散配置。

**我的目标是按环境（在所有解决方案中）将所有配置放在一个配置文件中。可能吗？**

# php - 在 Mysql 中排除结果，而不是在

> ID：13641111
> 
> 赞同：1
> 
> 时间：2012-11-30T07:57:28.830
> 
> 标签：php, mysql, sql

我需要帮助来编写 SQL，但我不知道在这种情况下如何。尝试了许多不同的选项，但没有任何效果。

我的 mysql 数据库中有 2 个表

```
users (id, name, lastname)
blocked_users (id, user_id, blocked_id)

users table
id  name    lastname
1   nick    james
2   james   dean
3   mike    bendon

blocked_users table
id  user_id     blocked_id
1   2           1
2   2           3 
```

例子：

我想做的是在用户表中显示所有用户，但在这种情况下排除那些被 user_id 2 阻止的用户。

因此，如果我以 Mike Bendon（用户表中的 id 3）身份登录，我应该无法看到 james dean（用户表中的 id 2），因为他阻止了我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:02:21.417

不知道如何用 php 运行它，但我认为这个 SQL 应该满足你的要求：

```
SELECT *
FROM users
WHERE id NOT IN
(SELECT user_id FROM blocked_users WHERE blocked_id = $logged_id); 
```

评论后编辑：对不起，我看错了`id`列名。现在应该修好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:07:20.430

试试这个查询：

```
SELECT * 
FROM   users 
WHERE  id NOT IN (
       SELECT user_id 
       FROM   blocked_users 
       WHERE  blocked_id=$current_user_id); 
```

# selenium-webdriver - 如何将控制权传递给 selenium webdriver 中的新窗口

> ID：13641115
> 
> 赞同：0
> 
> 时间：2012-11-30T07:57:47.673
> 
> 标签：selenium-webdriver

我的应用程序中有一个按钮，单击它会打开一个新窗口。

如何在新窗口中验证文本？

我正在使用 selenium 网络驱动程序和 Firefox 浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:05:44.517

你可以用两种方法来做到这一点。

第一种使用方法

```
driver.switchTo().ActiveElement(); 
```

第二

```
driver.switchTo().window("New Widnow tile") 
```

将新窗口标题作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T05:29:44.320

```
public String y[][];
public int size,i=0;

public void Get_Windows**`strong text`**()
{
    Set<String> Handle = driver.getWindowHandles();
    size= Handle.size();
    String[] Temp = Handle.toArray(new String[size]);
    String Tab_Id_Container[][]=new String[size][size];

    while(size>0)
    {
        driver.switchTo().window(Temp[i]);
        Tab_Id_Container[i][0]=driver.getTitle();
        Tab_Id_Container[1][i]=driver.getWindowHandle();
        System.out.println("Page name : "+Tab_Id_Container[i][0]);
        System.out.println("Hex value : "+Tab_Id_Container[1][i]);
        i++;
        size--;
    }

} 
```

试试这个修改供您使用

# android - 每当活动调用该函数时，帮助器的函数覆盖`onKeyDown`？

> ID：13641119
> 
> 赞同：0
> 
> 时间：2012-11-30T07:58:08.380
> 
> 标签：android, onkeydown

我有很多`Activity`需要`override` `onKeyDown`事件如下：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        // Do something here
        return false;
    }
    return super.onKeyDown(keyCode, event);
} 
```

这里的问题是：我有很多活动应该调用上面的代码块（在任何活动中都没有不同）。所以我想写一个助手的功能，如：

```
 public static void overrideOnKeyDownFunction(...); 
```

而且，在任何需要覆盖`onKeyDown`事件的活动中（与第一个代码块相同），我只能调用：`Helper.overrideOnKeyDownFunction(...);`！

我可以做这样的事情吗？怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:10:27.917

我认为在不同活动之间共享该行为的最佳方式是让所有活动都从覆盖 onKeyDown 方法的同一个超类继承。

因此，如果您创建一个覆盖了 onKeyDown 的 Activity（比如说 OverridenBackKeyActivity），则任何从 OverridenBackKeyActivity 继承的 Activity 都将自动继承该行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:12:44.200

只需进行一项活动并将其扩展到您的活动中。

```
public class TemplateActivity extends Activity{

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
    // Do something here
    return false;
}
return super.onKeyDown(keyCode, event);
}

} 
```

然后你的活动应该扩展 TemplateActivity 而不仅仅是 Activity。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T08:24:31.137

当然你可以这样做：

在 Helper 类中声明您的方法：

```
public static void overrideOnKeyDownFunction (AnyParamYouNeed param){
    //code here
} 
```

然后，在每个活动中：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_BACK) {
        Helper.overrideOnKeyDownFunction(param);
        return false;
    }
    return super.onKeyDown(keyCode, event);
} 
```

但同样，如果您从 onKeyDown 调用 Helper.overrideOnKeyDownFunction 的超类继承所有活动，则只需编写一次。

# ios - 修复了在 ui 标签中使用项目符号时的对齐方式

> ID：13641121
> 
> 赞同：1
> 
> 时间：2012-11-30T07:58:25.923
> 
> 标签：ios, uilabel

当在 UILabel 中使用项目符号时，我需要修复第二行的对齐方式，标签的文本总是会动态变化。

  • 包括换行文本

**在**uilabel 上显示项目符号。

# android-webview - Android 4.0.4 - WebView - Appcache：通配符在网络部分不起作用

> ID：13641126
> 
> 赞同：0
> 
> 时间：2012-11-30T07:58:51.167
> 
> 标签：android-webview, html5-appcache

我想在清单中澄清对 Web 服务的 AJAX 调用仅在联机时执行。为此，我使用`NETWORK`了清单的部分：

```
NETWORK:
/WebServices/* 
```

但这会导致`$.getJSON`在每次请求时调用 JQuery 函数的错误回调，即使在线时也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:58:51.167

看来 Android 的 WebView 不喜欢通配符`*`。然后，当添加由 AJAX 函数调用的所有 URL 时，它会像预期的那样工作：

```
NETWORK:
/WebServices/Typen
/WebServices/Hersteller
... 
```

但在开发 webapp 时，这是无休止的工作。所以我决定将所有带有 AJAX 请求的函数放在一个单独的文件中。`FALLBACK`此文件现在在清单的部分中获得一个条目：

```
FALLBACK:
js/webServices.js js/ajaxStub.js 
```

包含在其中的每个函数都`webServices.js`在回退文件中再次实现，`ajaxStub.js`同时返回默认值或存储数据以提交给服务器。

# phonegap-plugins - 更新 phonegap 2.0 及更高版本的 card.io 插件

> ID：13641131
> 
> 赞同：1
> 
> 时间：2012-11-30T07:59:24.877
> 
> 标签：phonegap-plugins, card.io

我正在尝试升级 Card.io phonegap 插件以适用于 phonegap 2.0 或更高版本。我以前从未升级过 phonegap 插件，并且在开始项目之前正在寻找一些方向。谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T18:40:14.127

Card.io 的更新后的 PhoneGap 插件可以在这里找到[https://github.com/card-io/card.io-iOS-SDK-PhoneGap](https://github.com/card-io/card.io-iOS-SDK-PhoneGap)

希望能帮助到你！

谢谢。

# bash - 点开头目录的 Bash 模式，不包括 . 和

> ID：13641132
> 
> 赞同：2
> 
> 时间：2012-11-30T07:59:30.663
> 
> 标签：bash

快速示例 - 我想列出所有`~/.*`目录的内容，所以：

```
ls -la ~/.* 
```

但是它还列出了所有当前目录`.`和上层目录`..`

我怎样才能排除`.`和`..`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T08:03:03.837

从 ls 手册页：

```
-A, --almost-all
              do not list implied . and .. 
```

所以它将是：

```
ls -lA ~/.* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:05:34.490

如果您更喜欢使用正则表达式：

```
ls -la ~/.[^.]* 
```

# iphone - 如何减小从 cam 捕获的图像尺寸

> ID：13641136
> 
> 赞同：1
> 
> 时间：2012-11-30T08:00:11.150
> 
> 标签：iphone, ios

从 iphone cam 拍摄的图片接近 2.5 Mb，如何减小这个大小，我试过 UIJPEGRepresentation(image,0.1f)，但它不影响大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:49:39.317

您真的无法减少图像在内存中占用的大小。

加载图像时，基本上是一个`UIImage`大小为宽 x 高 x 4 字节的对象。这是未压缩图像在内存中占用的大小。由于您可以使用压缩图像所有图像，一旦加载到一个`UIImage`将被解压缩。

如果您真的需要节省一些内存，请将图像保存到磁盘并创建一个您在应用程序中使用的缩略图。然后在需要时可以加载更大的图像并使用它，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:05:25.797

尝试使用 UIImage+Resize.h 中的 Resize 方法

[https://github.com/AliSoftware/UIImage-Resize](https://github.com/AliSoftware/UIImage-Resize)

```
 [aImgView setImage:[ImageObjectFromPicker resizedImageWithContentMode:UIViewContentModeScaleAspectFit bounds:YourSize interpolationQuality:kCGInterpolationHigh]];

```

# ios - 如何创建自定义 UIImagePickController

> ID：13641137
> 
> 赞同：1
> 
> 时间：2012-11-30T08:00:12.197
> 
> 标签：ios, uiimagepickercontroller

在我的应用程序中，我想创建像这个 FDJ 这样的自定义应用程序。这个带有覆盖层的自定义 UIImagePickerController 只在特定区域拍照。 [http://www4.picturepush.com/photo/a/11522262/img/11522262.png](http://www4.picturepush.com/photo/a/11522262/img/11522262.png)

拍照后我会像 FDJ 一样调整大小。 [http://www2.picturepush.com/photo/a/11522255/640/11522255.png](http://www2.picturepush.com/photo/a/11522255/640/11522255.png)

你能帮我吗。我被屏蔽了！！！

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:19:03.503

根据您的描述，您似乎想向 UIImagePickerController 添加相机覆盖视图。有关教程，请参见此[链接](http://mworldapps.com/custom-camera-overlay-view-for-uiimagepickercontroller-how-to-block-pinch-zoom-2/)如果您在 Google 上搜索，还有其他几个教程。实现委托`-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info`。信息字典将包含图像：
`UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];`。然后，您可以创建一个 uiimageview 并设置捕获的图像。HTH。

# spring - 在 Spring 3.1 项目的 pom.xml 中添加公共验证器依赖项时出现问题

> ID：13641139
> 
> 赞同：1
> 
> 时间：2012-11-30T08:00:15.707
> 
> 标签：spring, spring-mvc

在我在 Spring 3.1 中开发的项目中，我试图通过使用 Apache Commons Validator 来执行客户端和服务器端验证。但是仅仅通过添加下面提到的代码就会导致一些 xml 异常。

在 pom.xml 中添加了依赖项：-

```
 <dependency>
                         <groupId>org.springmodules</groupId>
                         <artifactId>spring-modules-validation</artifactId> 
                         <version>0.8</version>
                    </dependency> 
```

servlet-context.xml 中的编译时异常 --> 资源路径位置类型 引用的文件包含错误 (jar:file:/C:/Users/shift/.m2/repository/org/springframework/spring-beans/3.1.0\. RELEASE/spring-beans-3.1.0.RELEASE.jar!/org/springframework/beans/factory/xml/spring-beans-3.0.xsd）。

我在某处读到 Spring 3.1 的 jar 可能与 Spring 2.x 发生冲突（它被添加到 maven 存储库中，因为 [i]spring-modules-validation[/i] 带来了它）。之后，我添加了一个排除项，如下所述：-

```
 <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring</artifactId>
      </exclusion> 
```

之后异常消失了，但编译器找不到内置类，如 InternalResourceViewResolver、DataSourceTransactionManager 等。

除了 Commons Validator 之外，还有什么我遗漏的东西可以在 Spring 3.1 中执行客户端和服务器端验证吗？

# wpf - XAML 主题 Visual Studio 2012

> ID：13641141
> 
> 赞同：2
> 
> 时间：2012-11-30T08:00:32.880
> 
> 标签：wpf, xaml, visual-studio-2012, themes

我正在寻找一个类似于 Visual Studio 2012 的轻量级主题的 XAML 主题。IDE 中是否有类似的东西，或者有没有办法生成一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:26:21.723

MahApps.Metro项目的主题类似于 Visual Studio [。](https://github.com/MahApps/MahApps.Metro)这是深色主题，但我认为将颜色更改为浅色主题不应该做太多工作。

查看演示应用程序和[文档](http://mahapps.com/MahApps.Metro/)。

# c# - Windows Metro 应用程序 - 在 C# 中写入和读取文本文件？

> ID：13641143
> 
> 赞同：3
> 
> 时间：2012-11-30T08:00:33.850
> 
> 标签：c#, file-io, windows-8

创建文本文件：

```
var myFile = "test";
var folderUsed = Windows.Storage.ApplicationData.Current.LocalFolder;
var fileOption = Windows.Storage.CreationCollisionOption.ReplaceExisting;
var createdFile = await folderUsed.CreateFileAsync(myFile, fileOption); 
```

将字符串写入创建的文本文件：

```
var writeThis = "write this ";
await Windows.Storage.FileIO.WriteTextAsync(createdFile, writeThis); 
```

但是，它没有指定将在哪个部分创建文本文件，我想在我的应用程序包中创建它，而不是在我的计算机的其他地方，这可能吗？

其次，当我再次执行第二个代码时，我希望我的文件被写成“写这个写这个”，而不是替换旧文件并创建另一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:34:14.327

如果您的文件在 assets 文件夹中，那么您可以通过以下方式访问它们：

```
String path = "ms-appx:///Assets/" + Domain + ".txt";
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(new Uri(path));
string Value = await FileIO.ReadTextAsync(file); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:00:44.100

你应该使用

```
StorageFolder localFolder = ApplicationData.Current.LocalFolder; 
```

因为其他文件夹（例如安装文件夹）受到限制，不允许进行读写操作。Windows Store 应用程序在这方面受到很大限制。

这个链接也很有用：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh758325.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh758325.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:21:12.573

“但是，它没有指定将在哪个部分创建文本文件，我想在我的应用程序包中创建它，而不是在我计算机的其他地方，这可能吗？”

这实际上是“几乎”唯一可能的事情！您的应用程序可以显式访问它自己的“LocalFolder”文件夹、“RoamingFolder”位置（可以在应用程序实例之间共享）或“TemporaryFolder”用于被丢弃的东西。

如果需要，您可以使用 Windows.Storage.KnownFolders.pictureLibrary 将文件保存到图片库之类的东西，如果您愿意，可以使用“Windows.ApplicationModel.Package.current.installedLocation”获得对安装文件夹的只读访问权限。

# java - ArrayList 的 ArrayList 是否类似于 java 中的二维数组？

> ID：13641154
> 
> 赞同：3
> 
> 时间：2012-11-30T08:01:21.197
> 
> 标签：java, arrays, arraylist, multidimensional-array

是 `ArrayList<ArrayList<Integer>> numbers;`一个 2D 整数数组`int[][] numbers;`吗？还是这些存储彼此完全不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T08:12:23.203

它是一个具有二维的结构，因此它类似于 [][]，但有一个非常重要的区别：如果您在一个步骤中分配一个二维数组，您将在第二维中为所有元素获得**相同的大小**第一维度：

```
int[][] arrayOfInts = new int[5][4];

for (int[] second : arrayOfInts) {
   System.out.println(second.length);
} 
```

打印 5 次“4”。

使用 ArrayList 的 ArrayList 的所有第二维元素可能具有不同的大小。

正如 jlordo 所指出的：如果动态创建整数数组，则它也可能具有不同长度的第二维：

```
int[][] anotherArray = new int[5][];

for (int i=0; i<5; i++) {
  anotherArray[i] = new int[i];
} 
```

在这种情况下，如果在初始化之前访问了第二维，则可以抛出 NullPointerException，例如：

```
int[][] yetAnotherArray = new int[5][];
System.out.println(yetAnotherArray[2][3]); 
```

另一个区别：在分配一个 int[x][y] 之后，它在两个维度中的所有元素的内存都是从一开始就分配的。在 ArrayList 的 ArrayList 中，分配了列表所需的内存，但在创建其内容之前不会使用其元素所需的内存。因此，与之前类似的代码不会打印**任何内容**，因为一开始第一个 ArrayList 中甚至不会有一个元素。

为了获得第二维，您首先必须创建第二维的所有 ArrayList：

```
ArrayList<ArrayList<Integer>> arrayOfArrays = new ArrayList<ArrayList<Integer>>();
for (int i=0; i < 5; i++) {
    arrayOfArrays.add(new ArrayList<Integer>();
} 
```

进一步在访问方面：

```
int[][] arrayOfInts = new int[5][4];
System.out.println(arrayOfInts[2][3]); 
```

打印 0 因为所有内存都已分配。该访问在寻址维度及其值方面都是安全的，因为它是原始类型。

```
ArrayList<ArrayList<Integer>> arrayOfArrays = new ArrayList<ArrayList<Integer>>();
for (int i=0; i < 5; i++) {
    arrayOfArrays.add(new ArrayList<Integer>();
}
System.out.println(first.get(2).get(3)); 
```

抛出 ArrayOutOfBoundsException。您必须在访问元素之前检查它们的大小。

现在 int[][] 和 Integer[][] 之间还有一个重要区别：原始类型总是有值，因此在分配 int[4][5]之后，单元化元素的**值为 0**。Integer[4][5] 包含对象，因此未初始化的元素将改为**null**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T08:03:07.093

它与 相似`Integer[][]`，与 略有不同`int[][]`。

还`ArrayList`为阵列的功能提供了额外的功能，例如动态增长的能力，以及管理*大小*和*容量*的单独概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:12:06.463

不完全确定，但在这两种情况下内存分配会有所**不同**。原始数组`int[][]`将在**堆栈**中分配，而将在**堆中**`ArrayList<ArrayList<Integer>>`分配。

# sql - 将 SQL 字符串转换为 Grails CreateCriteria

> ID：13641161
> 
> 赞同：1
> 
> 时间：2012-11-30T08:02:05.690
> 
> 标签：sql, grails, createcriteria

大家好，我有这个 Grails 代码：

```
free_search = ReportFree.createCriteria().list {
            or {
                report{
                    ilike("description", "%${params.search}%")
                    ilike("type", "%${params.search}%")
                    debitor {
                        and {
                            'in'('id', session.position?: 'VMD000000')
                            ilike("NAME", "%${params.search}%")
                        }
                    }
                }
            }
        eq('open', true)
        eq('copy', true)

    } 
```

我以为我从中得到了以下 SQL：

```
 select rf.* from report_free

    inner join report r on rf.report_reportid = r.reportid and rf.report_type=b.type 
    inner join debitor deb on deb.CODE_ID=b.debitor 

    where (
      b.description like '%something to search%' 
      or b.type like '%something to search%' 
      or (
       deb.NAME like '%something to search%' and deb.CODE_ID in (List of Deb)
      )
    ) 
    and rf.open=1 and rf.copy=1` 
```

但它不起作用。我得到一个空列表。

我打开了 SQL - Loggin 为真。Grails 输出以下语句：

我替换了“这个”和“？”

```
 from
    report_free 
left outer join
    report  
        on report_free.report_reportid=report.reportid 
        and report_free.report_type=report.type
left outer join
    debitor 
        on debitor.CODE_ID=report.debitor 
where
    (
        (
            lower(report_free.description) like '%SOMETHING TO SEARCH%' 
            and lower(report.type) like '%SOMETHING TO SEARCH%'
            and (
                (
                   debitor.CODE_ID in (
                        'LIST OF ELEMENTS'
                    ) 
                    and lower(debitor.NAME) like '%SOMETHING TO SEARCH%'
                )
            )
        )
    ) 
    and report_free.open=1 
    and report_free.copy=1 
```

谁能帮我解决这个问题

问候

# ruby-on-rails - 对“rvm 要求”给出的依赖项有什么用？

> ID：13641163
> 
> 赞同：2
> 
> 时间：2012-11-30T08:02:11.810
> 
> 标签：ruby-on-rails, ruby, ubuntu, installation, rvm

为什么 RVM、Ruby 或 Rails 需要`libc6-dev, ncurses-dev and libtool` ?

在 Ubuntu 上运行`rvm requirements`给了我们：

> Linux 的要求（ DISTRIB_ID=Ubuntu
> DISTRIB_RELEASE=10.10
> DISTRIB_CODENAME=maverick
> DISTRIB_DESCRIPTION="Ubuntu 10.10" ）
> 
> 注意：'ruby' 代表 Matz 的 Ruby 解释器 (MRI) (1.8.X, 1.9.X)
> 这是*原始*/标准 Ruby 语言解释器
> 'ree' 代表 Ruby 企业版
> 'rbx' 代表 Rubinius
> 
> bash >= 4.1 需要
> curl 需要
> git （对于 ruby​​-head >= 1.7）
> 需要补丁（对于 1.8 rubies 和一些 ruby​​-head's）。
> 
> 要安装 rbx 和/或 Ruby 1.9 head (MRI)（例如 1.9.2-head），您
> 必须先安装并使用 rvm 1.8.7。
> 
> 附加依赖项：
> # 对于 Ruby / Ruby HEAD（MRI、Rubinius 和 REE），安装以下内容：
> ruby​​: /usr/bin/apt-get install build-essential openssl libreadline6
> libreadline6-dev curl git-core zlib1g zlib1g-dev libssl -dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion pkg-config
> 
> # 对于 JRuby，安装如下：
> jruby: /usr/bin/apt-get install curl g++ openjdk-6-jre-headless
> jruby-head: /usr/bin/apt-get install ant openjdk-6-jdk
> 
> # 对于 IronRuby，安装以下内容：
> ironruby: /usr/bin/apt-get install curl mono-2.0-devel

为什么 RVM、Ruby 或 Rails 需要`libc6-dev, ncurses-dev and libtool`?

对于其他包裹，据我所知：

`build-essential automake bison autoconf pkg-config`用于从源代码编译
`libreadline6 libreadline6-dev`需要 irb 的 readline 支持
`openssl libssl-dev`需要 ruby​​ 的 SSL 支持
`curl git-core subversion`需要获取软件
`zlib1g zlib1g-dev`需要解压ruby​​gems
`libyaml-dev`需要 ruby​​ 的 YAML 支持
`libsqlite3-dev sqlite3`需要 sqlite 支持 rails
`libxml2-dev libxslt-dev`需要通过 nokogiri 解析 XML

想知道为什么 RVM 首先添加它们？
如果未安装这些软件包中的任何一个，哪些知名库会中断？
安装 ruby​​ 本身需要哪些软件包，以及 stdlib 即需要哪些软件包。yaml 还是 rexml ？

编辑：忘记 pkg-config
编辑：最后添加了一些问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:08:27.777

libc6-dev 是 C 标准库开发文件。没有它们，任何有用的 C 代码都不太可能编译。由于 Ruby 是用 C 编写的，因此编译和构建 ruby​​ 本身需要这些。

我猜想编译irb需要ncurses。

我同意你提到的其他包的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:17:40.710

这些都是基本库，它们是您将来将使用的各种 gem 的依赖项。

```
 build-essential openssl libreadline6
 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev 
 libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev 
 autoconf libc6-dev ncurses-dev automake libtool bison subversion 
```

There may be a case like you will not require all the libraries in you m/c, though when you will install some gems, errors like

> cannot build native extension

In those cases the required libraries are looked upon for the failed gem and installed. Libraries are installed only once and are totally different as compared to gems. The libraries present here are for

> Git, mysql server, sqlite, curl etc.

I would suggest to install it in the beginning with sudo permissions using Sudo apt-get install. Hope this helps. Also as you try out new gems and plugins, you would be installing new libraries in future.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T14:46:55.907

ruby comes with a set of extensions, some of them require additional packages, for example ncurses is needed for better console support (irb) - but is not required, pkg-config is needed for packages searching - most packages expose a configuration file which helps in finding proper paths for compilation ... and so on, here is list of all extensions: [https://github.com/ruby/ruby/tree/trunk/ext](https://github.com/ruby/ruby/tree/trunk/ext) ... although it's not the list of requirements - i can not find official ruby list of requirements.

# php - Ajax POST 到 PHP 并接收响应，jQuery

> ID：13641165
> 
> 赞同：0
> 
> 时间：2012-11-30T08:02:29.560
> 
> 标签：php, jquery, ajax, json, post

所以，我有一个 JSON 数组，我想将其发布到文件中，然后接收响应。但不知何故，它似​​乎不起作用，所以我希望你们能帮助我一点。

```
data = JSON.stringify({
        "jsonrpc": "2.0",
        "method": "login",
        "id": 1,
        "params": {
          "params": {
            "username": "1234",
            "password":  "4321"
          }
        }
      });

$.ajax({
        url:"functions/proxy.php",
        type:"POST",
        data : data,
        success: function(data){/* do something*/ },
        error: function(data) {/* do something*/)}
      }); 
```

当我提交表单时，`error function`运行，我在 var_dumping 时得到这个`$_POST`：

```
array(0) {
} 
```

奇怪的是，当`data`看起来像这样：

```
data: "username=1234&password&4321" 
```

我明白了：

```
Array
(
    [username] => 1291
    [password] => 1877
) 
```

谁能帮助我如何以 JSON 格式发送数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:03:57.340

```
$.ajax({
        url:"functions/proxy.php",
        type:"POST",
        data : data,
        success: function(data){/* do something*/ },
        error: function(data) {/* do something*/)}
      }); 
```

应该

```
$.ajax({
        url:"functions/proxy.php",
        type:"POST",
        data : {mydata:data},
        success: function(data){/* do something*/ },
        error: function(data) {/* do something*/)}
      }); 
```

尝试

```
print_r($_POST); 
```

# python - Python - OSError 24（打开的文件太多）和共享内存

> ID：13641169
> 
> 赞同：2
> 
> 时间：2012-11-30T08:02:48.653
> 
> 标签：python, macos, ipc, shared-memory, ulimit

我遇到的问题是在 python 脚本中我的 mac os x 上出现异常 OSError 24（“打开的文件太多”）。

我不知道是什么导致了这个问题。lsof -p 显示大约 40-50 行，我的 ulimit 是 1200（我检查使用

```
resource.getrlimit(resource.RLIMIT_NOFILE) 
```

)，返回元组 (1200, 1200)。所以我甚至没有超过限制。

我的脚本产生了许多子进程并分配了共享内存段。分配共享内存段时发生异常。我使用[sysv_ipc 模块](http://semanchuk.com/philip/sysv_ipc/)。

另外我知道我允许的共享内存段的总数足够大（128 段），并且命令

```
ipcs -b -m 
```

给出的数量肯定更少（不超过 40 段）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:02:48.653

问题在于共享内存系统设置（[共享内存 - wiki](https://en.wikipedia.org/wiki/Shared_memory_(interprocess_communication))）。

`kern.sysv.shmseg`文件中有一个参数`/etc/sysctl.conf`表示每个进程可以附加的最大共享内存段数。所以我的值 32 对我的脚本来说还不够。

要查看参数，请使用：

```
sysctl -A | grep shm 
```

要更新该参数，请编辑文件：

```
sudo vim /etc/sysctl.conf 
```

我现在的样子是这样的：

```
kern.sysv.shmmax=564777216
kern.sysv.shmmin=1
kern.sysv.shmmni=700
kern.sysv.shmseg=128
kern.sysv.shmall=131072 
```

请注意，您需要重新启动系统才能应用设置。

要查看当前分配的共享内存段，请键入：

```
ipcs -m -b 
```

要删除所有共享内存段：

```
for n in `ipcs -b -m | egrep ^m | awk '{ print $2; }'`; do ipcrm -m $n; done 
```

请注意，只有未附加到任何进程的段才会被真正删除。

更多关于共享内存设置：[http](http://techjournal.318.com/general-technology/shared-memory-settings-explain/) : [//techjournal.318.com/general-technology/shared-memory-settings-explain/，http](http://support.apple.com/kb/HT4022) : [//www.spy-hill.com/help/apple/SharedMemory.html，http](http://www.spy-hill.com/help/apple/SharedMemory.html) [://support.apple.com/kb/HT4022](http://support.apple.com/kb/HT4022)

# php - 如何确保我不会从 php 的测试站点向客户发送任何电子邮件

> ID：13641172
> 
> 赞同：6
> 
> 时间：2012-11-30T08:03:00.947
> 
> 标签：php, mysql, apache, email

我必须复制现有网站的副本以在家中进行测试。我得到了公司的许可。

但在数据库中，我有超过 10,000 条带有电子邮件的客户记录。我不想在各种测试期间弄乱网站时不小心向他们发送任何电子邮件。

避免这种情况的最佳方法是什么

我确实需要电子邮件功能来测试其他东西

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T08:28:49.067

您可以使用的最防白痴的方法通常是最适合这些事情的方法，因为我们都有那些可能出错的日子。当一个错误真的会毁了你的一天时，最好小心，即使是边缘的偏执狂。

以下是一些可能有效的方法：

**默认无能配置**

绝对安全的系统是将生产服务器的 SMTP 服务器配置保留在生产服务器上，并且*只保留*在生产服务器上。您的开发副本将具有其他一些 SMTP 配置，例如测试 GMail SMTP 帐户。通常，GMail 将您的普通帐户每天限制为 500 封电子邮件，因此如果您真的以某种方式搞砸了，您很快就会达到这个限制。

**替换数据库中的客户电子邮件**

要考虑的另一件事是清除数据库中的所有客户电子邮件，将其删除并替换为`mytestaccount+0000@gmail.com`，`mytestaccount0001@gmail.com`如果您愿意实际接收和检查它们，则利用`+`忽略发送到 GMail 的后续内容这一事实，有效地为您提供无限的潜在电子邮件地址。

举个例子：

```
UPDATE customers SET email=CONCAT('mytestaccount+', customer.id, '@gmail.com') 
```

您必须将其自定义为您想要的任何电子邮件地址。这样做的一个好处是，您的开发驱动器上不会有一份有价值的客户电子邮件地址列表以及任何相关的备份。为了彻底，您可能还应该打乱散列密码，这样数据库对潜在的黑客来说基本上毫无价值。太多次密码从未正确保护的备份中被刮掉。

**使客户电子邮件无法送达**

下一个最好的方法是在系统中您不想发送的*每*封电子邮件的末尾添加“.test”，这样它就会硬退回而不是转到某人的收件箱。

这基本上是一个单行：

```
UPDATE customers SET email=CONCAT(email, '.test') 
```

**在交付时覆盖电子邮件**

您始终可以包含一些条件逻辑，例如您将故意替换电子邮件的收件人。这可能是有风险的，因为您可能会意外禁用该开关，但请一如既往地小心。

在实践中，这看起来像：

```
if ($i_should_not_spam_customer_accounts_accidentally)
{
  $mail->to = "nobody@nowhere"
} 
```

**使用 API 驱动的服务**

一些邮件服务提供商有一个 API，可以在测试电子邮件时为您提供帮助。我是[PostageApp](http://postageapp.com/)的联合创始人，该服务的设计目的是让您可以使用专门配置为接收但不发送电子邮件的 API 密钥发送消息。[MailGun](http://mailgun.com/)等其他服务也可以类似的方式使用。

**无单点故障**

不过，远离悲剧的逻辑测试并不是一种好感觉。在你遭遇惨败之前，你应该确保有*几*件事情会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:23:04.970

如果您不想更改代码或数据库中的数据，并且如果您在本地计算机上使用 postfix，则可以将所有外发邮件重写到您的地址。更多信息：[http ://www.postfix.org/ADDRESS_REWRITING_README.html](http://www.postfix.org/ADDRESS_REWRITING_README.html)

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-11-30T08:06:17.377

更改所有电子邮件地址，例如更改`email@domain.com`为`email#domain.com`. 测试完成后，您可以替换`#`为`@`.

# java - 使用 Runtime.getRuntime().exec 时遇到问题

> ID：13641173
> 
> 赞同：0
> 
> 时间：2012-11-30T08:03:02.600
> 
> 标签：java, unix

我在mac中使用下面的cmds但它不起作用，对此有什么想法吗？

```
String[] cmdline = { "echo", "symc", "|", "sudo", "-S", "rm", "-f", "/Applications/Test application.app" };
Runtime.getRuntime().exec(cmdline); 
```

我也尝试过，但徒劳无功：

```
Process p = Runtime.getRuntime().exec("echo symc | sudo -S rm -rf /Applications/Test application.app"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:35:46.283

您传递给`exec`的不是在 shell 中工作的任意命令行，而是要启动的进程的名称及其参数。因此，如果你想要管道，甚至只是`echo`命令，它不是一个常规的可执行文件，你必须显式地启动一个新的 shell，沿着命令行传递来执行。就像是

```
sh -c echo ... 
```

所以这应该工作：

```
String[] cmdline = { "sh", "-c", "echo symc | sudo -S rm -rf /Applications/Test application.app" };
Runtime.getRuntime().exec(cmdline); 
```

请注意，`-c`如果你想使用管道，你应该只给出一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T17:27:31.797

**它非常适合 Ubuntu Linux ！！！这也可以在mac上工作（我不测试）**

```
package me.barwnikk.library.linuxcommandroot;

import java.awt.BorderLayout;
import java.io.IOException;
import java.io.InputStream;

import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;

public class LinuxCommand {
    static InputStream is;
    static byte[] buff = new byte[8192];
    static int n;
    public static String getPasswdForRoot() throws IOException {
        Process p = Runtime.getRuntime().exec(new String[]{"sh","-c","sudo -S id"});
        is = p.getErrorStream();
        n = is.read(buff, 0, 8192);
        String text = new String(buff,0,n);
        if(text.contains("root"))return null; //not set password
        JPanel panel = new JPanel(new BorderLayout());
        JLabel lab = new JLabel(text);
        panel.add(lab,BorderLayout.NORTH);
        JPasswordField password = new JPasswordField();
        panel.add(password,BorderLayout.SOUTH);
        JOptionPane.showMessageDialog(null, panel);
        byte[] passwd = (new String(password.getPassword())+"\r\n").getBytes();
        p.getOutputStream().write(passwd);
        p.getOutputStream().flush();
        n = is.read(buff, 0, 8192);
        if(n==-1) return new String(password.getPassword());
        text = new String(buff,0,n);
        while(true) {
            lab.setText(text);
            JOptionPane.showMessageDialog(null, panel);
            p = Runtime.getRuntime().exec(new String[]{"sh","-c","sudo -S id"});
            is = p.getErrorStream();
            n = is.read(buff, 0, 8192);
            passwd = (new String(password.getPassword())+"\n").getBytes();
            p.getOutputStream().write(passwd);
            p.getOutputStream().flush();
            n = is.read(buff, 0, 8192);
            if(n==-1) return new String(password.getPassword());
            text = new String(buff,0,n);
        }
    }
    public static Process runFromRoot(String command, String password) throws IOException {
        byte[] passwd = (password+"\n").getBytes(); //for OutputStream better is byte[]
        Process p = Runtime.getRuntime().exec(new String[]{"sh","-c","sudo -S "+command});
        p.getOutputStream().write(passwd);
        p.getOutputStream().flush();
        return p;
    }
} 
```

这是一个获取root密码的迷你api（用户必须写正确）。使用示例：

```
public static void main(String[] args) throws IOException, InterruptedException {
    String password = LinuxCommand.getPasswdForRoot();
    System.out.println("stdout of 'id':");
    Process p = LinuxCommand.runFromRoot("id",password);
    System.out.print(streamToString(p.getInputStream()));
    System.out.println("stdout of 'fdisk -l':");
    p = LinuxCommand.runFromRoot("fdisk -l",password);
    System.out.print(streamToString(p.getInputStream()));
} 
```

方法流到字符串：

```
public static String streamToString(InputStream stream) {
    String read = "";
    try {
        while((n=stream.read(buff, 0, 8192))!=-1) {
            read+=new String(buff,0,n);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    return read;
} 
```

我的测试中的样本返回（波兰语）：

```
stdout of 'id':
uid=0(root) gid=0(root) grupy=0(root)
stdout of 'fdisk -l':

Disk /dev/sda: 640.1 GB, 640135028736 bytes
głowic: 255, sektorów/ścieżkę: 63, cylindrów: 77825, w sumie sektorów: 1250263728
Jednostka = sektorów, czyli 1 * 512 = 512 bajtów
Rozmiar sektora (logiczny/fizyczny) w bajtach: 512 / 4096
Rozmiar we/wy (minimalny/optymalny) w bajtach: 4096 / 4096
Identyfikator dysku: 0xc56b9eef

Urządzenie Rozruch   Początek      Koniec   Bloków   ID  System
/dev/sda1            2048    37064703    18531328   27  Hidden NTFS WinRE
/dev/sda2   *    37064704    37269503      102400    7  HPFS/NTFS/exFAT
/dev/sda3        37269504   456711884   209721190+   7  HPFS/NTFS/exFAT
/dev/sda4       456711946  1250258624   396773339+   f  W95 Rozsz. (LBA)
Partycja 4 nie zaczyna się na granicy bloku fizycznego.
/dev/sda5       456711948   810350729   176819391    7  HPFS/NTFS/exFAT
Partycja 5 nie zaczyna się na granicy bloku fizycznego.
/dev/sda6       810350793   862802954    26226081    7  HPFS/NTFS/exFAT
Partycja 6 nie zaczyna się na granicy bloku fizycznego.
/dev/sda7       862803018  1020078408    78637695+  83  Linux
Partycja 7 nie zaczyna się na granicy bloku fizycznego.
/dev/sda8      1020079368  1229791814   104856223+   7  HPFS/NTFS/exFAT
/dev/sda9      1229791878  1250258624    10233373+   7  HPFS/NTFS/exFAT
Partycja 9 nie zaczyna się na granicy bloku fizycznego. 
```

# backbone.js - 工作 API 中的主干集合/模型为空？

> ID：13641176
> 
> 赞同：0
> 
> 时间：2012-11-30T08:03:06.223
> 
> 标签：backbone.js

我尝试将 rails-api （同一主机）的记录获取到我的骨干集合中。我有以下代码：

```
// Models

App.GeeksModel = Backbone.Model.extend({
  urlRoot: "/geeks",
  idAttribute: "id"
});

// Collections

App.GeeksCollection = Backbone.Collection.extend({
  url: "/geeks",
  model: App.GeeksModel
}); 
```

在我的路由器中，我有以下内容

```
// Router

App.GeekRouter = Backbone.Router.extend({
  routes: {
    "": "index"
  },
  initialize: function() {
    console.log("router - init");
  },
  index: function() {
    console.log("route - index");
    var geekCollection = new App.GeeksCollection();
    var mapView = new App.GeeksMapView({ el: $("#foo"), model: geekCollection });
    geekCollection.fetch();
  }
}); 
```

浏览 url 时，视图正确加载，并且在我看到的服务器上，从数据库中获取了一个条目。但是一旦我在我的视图中检查模型长度，就使用

```
this.model.length 
```

该系列是空的...对此有什么建议吗？

谢谢

**编辑1：**

将索引路由器方法更改为

```
var mapView = new App.GeeksMapView({ el: $("#map"), collection: geekCollection }); 
```

例如检查视图初始化方法中的集合长度

```
 ...
  initialize: function() {
    this.render();
    console.log(this.collection.length);
  },
  ... 
```

它也重新调整了 0 ......所以没有任何改变！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:19:48.343

我相信你想要做，`collection.length`或者如果从模型访问——每个模型都引用创建它的集合`model.collection.length`——如果`this`引用集合就`this.length`足够了，如果它是一个模型，那么`this.collection.length`会为你做。

模型没有属性长度，因此除非您自己定义，否则应始终未定义。

# c++ - 如何将行号添加到 QTreeView？

> ID：13641178
> 
> 赞同：1
> 
> 时间：2012-11-30T08:03:09.737
> 
> 标签：c++, qt, qtreeview

我正在尝试编写一个基于 Qt 的简单 c++ IDE。与任何语言 IDE 一样，行号在代码编辑器中非常有用。

我正在使用`QTreeView`编辑器，我想在其中添加此行号功能。看起来`QTreeView::header()`只返回水平标题给我。如何**获取垂直标题**以设置行号`QAbstractItemModel::headerData()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:28:35.950

没有垂直标题。如果您打算`QTreeView`以这种方式使用，则需要将行号视为与数据模型中的每个项目相关联的列数据（可能源自`QAbstractItemModel`）。每次插入一行时，您都必须遍历数据模型并更新与插入行之后的每个数据项关联的行号。

在走得太远之前，我会下载 QtCreator 的源代码并查看它的文件编辑器小部件是如何构建的。

# .net - 使用 ADO.net（OLEDB）导入 UTF-8 CSV 文件

> ID：13641179
> 
> 赞同：3
> 
> 时间：2012-11-30T08:03:16.943
> 
> 标签：.net, vb.net, csv, utf-8

我用这个代码导入一个文本文件（.CSV），但是当这个文件是用UTF-8代码创建的时候，它不能成功。只有我保存为ANSI代码（使用Note.exe），就可以了。

```
Function getDataset(ByVal sql As String, ByVal path As String) As DataSet
    'Try
    'Dim connstr As String = GetINI("Setting", "cString",     "Provider=Microsoft.Jet.OLEDB.4.0;Data Source= C:\DataSouce\DataBase.mdb", Application.StartupPath & "\setting.ini")
    Dim connstr As String = "Provider=Microsoft.jet.OLEDB.4.0;Data Source= " & path & "\;Extended Properties=""text;HDR=YES;FMT=Delimited"""
    Dim conn As OleDbConnection = New OleDbConnection(connstr)                   '("provider=microsoft.Jet.OLEDB.4.0;data source=" & CurDir() & "\data.mdb")
    Dim adapter1 As OleDb.OleDbDataAdapter = New OleDbDataAdapter(sql, conn)
    Dim cmd As OleDbCommand = New OleDbCommand
    Dim commandBuilder As OleDbCommandBuilder = New OleDbCommandBuilder(adapter1)
    getDataset = New DataSet
    adapter1.Fill(getDataset, "temp")
    'Catch ex As Exception
    '    MsgBox(ex.Message)
    'End Try

 End Function 
```

我什至尝试像这样构建一个schema.ini，也不行

```
[temp.CSV]
Format=Delimited(,)
ColNameHeader=false
MaxScanRows=0
CharacterSet= ANSI  
 （or  UTF-8 ） 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:32:20.337

VB 有一个内置的 csv 解析器。查看这篇文章：[http](http://coding.abel.nu/2012/06/built-in-net-csv-parser/) ://coding.abel.nu/2012/06/built-in-net-csv-parser/ 。

TextFieldParser 位于 Microsoft.VisualBasic.FileIO 命名空间中。如果您在 C# 中构建模块，则必须导入它。

# c# - 隐藏母版页中的导航栏取决于我的用户角色

> ID：13641182
> 
> 赞同：3
> 
> 时间：2012-11-30T08:03:36.293
> 
> 标签：c#, asp.net

嗨，我在使用网络表单时遇到了一个问题，我有一个包含我的导航的母版页，我想问一下我登录后是否有可能，我的导航栏可以根据不同的角色（管理员、学生、员工）进行自定义)..

```
 <asp:ContentPlaceHolder runat="server" ID="FeaturedContent" >
        <nav>
            <ul id="menu" style="text-align:center;">
                <li><a href="~/">Moderator</a></li>
                <li><a href="~/About.aspx">Supervisor</a></li>
                <li><a href="~/Contact.aspx">Student</a></li>
            </ul>
        </nav>
    </asp:ContentPlaceHolder> 
```

所以这是我的站点管理员中的内容占位符示例，我的想法是在我与学生一起登录时隐藏版主和主管，并且我希望使用检查角色“学生”然后版主和主管的站点管理员导航栏可以对用户隐藏，请给我建议，有更好的解决方案，因为这只有我知道..谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:31:11.690

对于您的问题，我已更改您的 html 代码如下

```
<asp:ContentPlaceHolder runat="server" ID="FeaturedContent" >
        <nav>
            <ul id="menu" style="text-align:center;">
                <li id="li_moderator" runat="server"><a href="~/">Moderator</a></li>
                <li id="li_supervisor" runat="server"><a href="~/About.aspx">Supervisor</a></li>
                <li><a href="~/Contact.aspx">Student</a></li>
            </ul>
        </nav>
    </asp:ContentPlaceHolder> 
```

与登录验证和学生权限后的服务器端编码相比，您可以隐藏或显示您的菜单。使用以下代码

```
li_moderator.style.add("display","none")
  li_supervisor.style.add("display","none") 
```

如果你想在其他情况下显示相同的东西而不是使用

```
 li_moderator.style.add("display","inherit")
  li_supervisor.style.add("display","inherit") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T09:08:39.140

尝试建议：

```
<asp:ContentPlaceHolder runat="server" ID="FeaturedContent">
            <nav>
                <ul id="menu" style="text-align: center;">
                    <li id="menuModerator" runat="server"><a href="~/">Moderator</a></li>
                    <li id="menuSupervisor" runat="server"><a href="~/About.aspx">Supervisor</a></li>
                    <li id="menuStudent" runat="server"><a href="~/Contact.aspx">Student</a></li>
                </ul>
            </nav>
</asp:ContentPlaceHolder> 
```

在 Page_Load 内的 Site.Maste.cs 中：

```
if (!Page.User.IsInRole("Moderator"))
   {
      menuModerator.Visible = false;
   } 
```

对于域组 Page.User.IsInRole(@"Domain\GroupName")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:24:11.433

我像这样设置我的枚举..

```
public enum AccessRights
{
    LogisticsCoordinator_RW, //Read-Write,
    LogisticsCoordinator_R, //Read only Purchasing and Inventory
    ProcurementManager_RW, // Read-Write access to track purchase of Sand on monitor on hand Inventory
    ProcurementManager_R, //read access to Create Frac Jobs , Dispatch and reroute
    SystemAdministrator, //Full Rights to Vertex_Personnel only
    StudentManagement_R, //Read Access Only 
    AppAdministrator_R,
    NonAdmin,
    None,
    Full,
    Default
} 
```

现在我使用 LDAP/ActiveDirectory 来确定用户访问权限，您可以使用 SQL Server 或其他一些检查用户权限的方法

这只是代码的一个示例，我不会粘贴整个代码，但您应该明白

```
 _ADPath = ConfigurationManager.AppSettings["ADPath"];
 _Domain = ConfigurationManager.AppSettings["ISDDomain"];
 _UserId = ((BasePage)Page).CurrentUser;
 string[] strUser = _UserId.Split('\\');
 if (strUser.Length == 2)
 {
     _UserId = strUser[1];
 }

 // uxLBLoginError.Text = "";
 try
 {
     LdapAuthentication la = new LdapAuthentication(_ADPath);

     if (!AdPassRequired)
     {
         //use this if password not required
         _authenticated = la.IsUserGroupMember(_UserId, AdGroupToPass);
     }
     //else
     //{
     //    // use this if password is required
     //    _authenticated = la.IsAuthenticated(_Domain, _UserId, strPassword);
     //}
     if (_authenticated)
     {
         //test the roles functionality
         ((BasePage)Page).GetDBRoleNames(_UserId);
         Session["User_Initial_Validated"] = true;
         Session["isDefault_Loaded"] = true;
         Session["AccessRights"] = AccessRights.Default;
         Session["UserId"] = _UserId;
         //Response.Redirect("~/Default.aspx");
     } 
```

# mysql - SQL TRIGGER 更新时从一张表到另一张表

> ID：13641183
> 
> 赞同：1
> 
> 时间：2012-11-30T08:03:49.253
> 
> 标签：mysql, sql, triggers, phpmyadmin

我将开始在 phpmyadmin 中使用 mysql。

我的桌子：

表格1：

```
primary key = id1;
cash1 = thing I want to pick from that table; 
```

表2：

```
primary key = id2;

cash2 = thing I want to pick from that table; 
```

表3：

```
foreign key1 = id1;
foreign key2 = id2;
cash3 = thing I want to make; 
```

所以，我想做：

```
Update (or insert into?) cash3 = cash1*cash2/100 when UPDATE ON cash1 or cash2. 
```

尝试了很多东西，似乎没有任何工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:12:17.883

您的触发器（每个 table1 和 table2 都需要一个）应如下所示：

```
create trigger cash1 on table1 for insert, update
   Select @c1=sum(cash) from table1
   Select @c2=sum(cash) from table2
   Update table3 set cash=@c1*@c2/100
end 
```

注意：以上只是伪代码，因为我不熟悉 mysql 语法。

该触发器的作用是，当您更改 table1 中的金额时，它会从 table1 和 table2 中选择金额并计算 table3 的金额并更新它。

您需要另一个触发器，它在 table2 上执行相同的操作。

在不知道您的表设置（列名）的情况下很难使用给您一个像样的代码示例

希望这可以帮助。

# c# - Azure Windows 事件日志级别

> ID：13641187
> 
> 赞同：3
> 
> 时间：2012-11-30T08:04:25.773
> 
> 标签：c#, xml, events, azure, diagnostics

我在任何地方都找不到有用的东西……原始的 Windows Azure：Windows 事件日志 XML 看起来如何。我需要知道哪个 EventLevel 指的是一个数字。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:15:30.460

如果您谈论的是 XML 文件，我假设您指的是**diagnostics.wadcfg**文件。在此文件中，您只需编写 XSD 中定义的 LogLevel：

```
 <xs:simpleType name="LogLevel">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Undefined" />
      <xs:enumeration value="Verbose" />
      <xs:enumeration value="Information" />
      <xs:enumeration value="Warning" />
      <xs:enumeration value="Error" />
      <xs:enumeration value="Critical" />
    </xs:restriction>
  </xs:simpleType> 
```

如果您需要每个级别的数值（我认为这也是您要问的），您可以通过枚举找到它们：

```
namespace Microsoft.WindowsAzure.Diagnostics
{
    // Summary:
    //     Defines a standard set of logging levels.
    public enum LogLevel
    {
        // Summary:
        //     Logs all events at all levels.
        Undefined = 0,
        //
        // Summary:
        //     Logs a critical alert.
        Critical = 1,
        //
        // Summary:
        //     Logs an error.
        Error = 2,
        //
        // Summary:
        //     Logs a warning.
        Warning = 3,
        //
        // Summary:
        //     Logs an informational message.
        Information = 4,
        //
        // Summary:
        //     Logs a verbose message.
        Verbose = 5,
    }
} 
```

# c# - 如何使用数据库中的 automapper 和 int 将 int 转换为枚举和字符串

> ID：13641195
> 
> 赞同：23
> 
> 时间：2012-11-30T08:04:54.690
> 
> 标签：c#, entity-framework, automapper

有人可以解释一下我如何使用 Automapper 将 DB int 值映射到字符串，使用 Enums 作为集合。

我有以下

枚举

```
public enum Status { Open, Closed } 
```

EF 4.1 领域模型

```
public class MyEntity
{
    ...
    public int StatusId { get; set; }
    public virtual Status Status { get; set; }    
} 
```

Dto 在网站上使用

```
public class MyEntityDto
{
    public string Status { get; set; }
} 
```

当前的 Automapper 映射

```
Mapper.CreateMap<int, Status>().ConvertUsing<EnumConverter<Status>>();
Mapper.CreateMap<Enum, string>().ConvertUsing(src => src.ToString());

Mapper.CreateMap<MyEntity, MyEntityDto>()
                .ForMember(d => d.Status, o => o.MapFrom(y => y.StatusId)) 
```

第一行中的 EnumConverter 可以毫无问题地将 int 转换为状态，但是如何将 int 或 Status 转换为 DTO 中的字符串？我失去了任何帮助将不胜感激。

我意识到这里需要进行 2 次转换，从数据库中提取数据时将 id 转换为 enum 并且 enum 需要填充，然后 enum 到字符串需要执行

干杯

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-30T08:11:49.300

```
Mapper.CreateMap<MyEntity, MyEntityDto>()
      .ForMember(destination => destination.Status, 
                 opt => opt.MapFrom(source => Enum.GetName(typeof(Status), source.StatusId))); 
```

此外，您不需要从`int`到`Status`枚举的映射。

# java - JTextPane 自动换行问题

> ID：13641204
> 
> 赞同：0
> 
> 时间：2012-11-30T08:05:31.200
> 
> 标签：java, swing, word-wrap, jtextpane

我`JTextPane`在一个应用程序中使用 wiki 源代码编辑。我添加了一个简单的拼写检查功能，它通过将字符属性更改为不同的样式来突出拼写错误的单词`StyledDocument.setCharacterAttributes`。

只使用了这两种样式：默认样式和“拼写错误”的样式。文本编辑器控件执行自动换行，这是预期的行为。

我的问题是，在某些情况下（并非总是如此，但可以通过特定的 wiki 文档重现）这种字符属性的更改会以某种方式禁用自动换行。更具体地说，我从文档中间删除了三行，并且在下次运行拼写检查器时，将字符属性重置为默认样式（在重新运行拼写检查之前），自动换行功能被禁用，它仍然是方法。如果我撤消删除，自动换行会恢复正常。

注释掉重置样式的单行：

```
editorPane.getStyledDocument().setCharacterAttributes(0, editorPane.getStyledDocument().getLength(), defaultStyle, true); 
```

解决了这个问题。

**编辑 1**

我已将问题提取到一个简单的测试用例中。对不起，很长的一行，该示例文本对于重现错误很重要（它已被随机化）：

```
package jtextpanebug;

import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.WindowConstants;
import javax.swing.text.Style;

public class DemoFrame extends javax.swing.JFrame {

    private final JButton btResetStyle;
    private final JScrollPane scrollPane;
    private final JTextPane textPane;    
    private final Style defaultStyle;

    public DemoFrame() {
        // Creating a simple form with a scrollable text pane and a button
        scrollPane = new JScrollPane();
        textPane = new JTextPane();
        btResetStyle = new JButton();

        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new BoxLayout(getContentPane(), BoxLayout.Y_AXIS));

        // The text pane's text is the scrambled version of my original test data,
        // it is important because the problem depends on the pane's text
        // (not every text makes it wrong)
        textPane.setText("= Gernela Stuff Dogo to Wnko Obuat Oebrfe Disytung hte Iidnividal Oitpcs =\n\n== Elmyonrogit ==\n\n'''memidtaie-ngiebhro opnits''' - 2 points, \nwihhc nac eb ense ot eb mmiieadte hnigeorbs fo haec othre. \nThere si no strict | cxeat defiintoin. \nEth etipcur owebl shsow sa an example optins dna the rispa \nienbg mimedtiea iebnghsor ear ncnoetced.\n\n[[Amieg:einogrhb_pinsot.pgn]]\n\n'''enihgorb optnsi distacne''' - het avaeegr of sdntaisce \nderemitedn by het mimeidate-hieobngr tonpi ipras. \n\n'''lalw''' - a iotpntes nepgesnietrr a llwa, with toerh orwds: 2 apraelll, \nevyr sloce sraufce picsee. Heer is an xamelpe. \nIt is eualgttandri ofr eterbt zisiuaitovlan.\n\n[[Gimae:llwa.npg]]\n\n'''addtaiilon emmory reeueimtnqr of na laigorthm''' - \n(eth kepa mmeory suaeg fo teh nltpiaciapo ndirug the excteouin of eht grlaotihm) - \n(hte moeymr sueag fo hte loragitmh befoer ro ftrea eht ucxeeiont of the laogrihmt)\n\n== Het Input Pnoitset Ash to Repnrsete Ufscear Arsnoelbay Elwl ==\n\nIf tno efisciped toehrwsie yb hte cdoritnpsei of an aoglirthm, \nhetn hte eqtunrmeersi of it are heste:\n\n* Ifsrt fo all the poisentt umst reprseent urfseac, not urvec ro uvomel or nayithng eesl.\n* Awlls aym otn eb tniehnr tanh at least 3 * fo ienhbgro-tpoin-sidenact.\n* Dseeg amy ton be rhserap tnha 70 grdesee (as het agnle fo eht trmeaial) nda husdol be ta tleas 290 redeseg (ni caes fo cnvocae eedgs).\n* Onpti edintsy amy ont vayr oto humc \n** Het angre fo the coall ption desitnsei of a igsenl pisnotte nutip ushold eb sallm. Ahtt is: teh orait of het oclla oitnp idsentise oarund any 2 ipnost lsdhou eb lmitied.\n** Hte lcoal noipt deisynt ushlod otn ahencg sdduelyn (gliftyscaiinn ni a hotsr idnsteac). \n\nYreftntunaoul the largoimths cna tno yb ethmsevesl \nhcekc these qutenmeserir nda usjt yden rnuning, \nso it si eth rseu's iyponerissbtil to ton extucee an raltghomi no a itseopnt \nthat does ont mete het aogitmlhr's terieseurmnq.\n\nIf eth rmeteriuqen fo na airlgmoth on its npuit is ont mte, then tobh hte ueavbhior nad hte srluet fo hte alghoritms si dinfeuned. \nTeh loirgamth amy nru rfo iinfntie long imet or rodpuce evry abd rselut, ro a eruslt htat oolsk good btu is nicrtroec. Ni htis scea rtehe si tno nay aguntreee toabu the tmniatreion of the iralgtmho ro eht lqutaiy fo the sreltu ecxept htat the nptapalcioi iwll ont carsh.\n");
        scrollPane.setViewportView(textPane);

        getContentPane().add(scrollPane);

        btResetStyle.setText("Reset style");
        btResetStyle.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent evt) {
                btResetStyleActionPerformed(evt);
            }
        });
        getContentPane().add(btResetStyle);

        pack();

        // The default style, the problem happens when we reset the full document
        // to it:
        defaultStyle = textPane.addStyle("default", null);        
    }

    private void btResetStyleActionPerformed(java.awt.event.ActionEvent evt) {

        // When the button is pressed we reset the full document to the default
        // style. In the original application this was periodically done as 
        // part of the spell checking
        textPane.getStyledDocument().setCharacterAttributes(0, textPane.getStyledDocument().getLength(), defaultStyle, true);
    }

    public static void main(String args[]) {                
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DemoFrame().setVisible(true);
            }
        });
    }    
} 
```

重现问题：

1.  编译运行上面的类
2.  尝试调整框架的大小 - 自动换行
3.  找到并删除我在下面复制的三行
4.  按下`Reset style`按钮
5.  自动换行已关闭

```
* Onpti edintsy amy ont vayr oto humc
** igsenl pisnotte nutip ushold eb sallm 的联合设计的 Het angre。Ahtt 是： teh orait of het oclla oitnp idsentise oarund any 2 ipnost lsdhou eb lmitied。
** Hte lcoal noipt deisynt ushlod otn ahencg sdduelyn (gliftyscaiinn ni a hotsr idnsteac)。

```

**编辑 2**

使用荧光笔而不是样式解决了我的问题，但我仍然很好奇原始方法出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:01:03.983

这看起来与我在这里询问的问题相同：[Strange text wrapping with styled text in JTextPane with Java 7](https://stackoverflow.com/questions/11000220/strange-text-wrapping-with-styled-text-in-jtextpane-with-java-7)。

据我所知，这是 Java 7 中的一个错误，Oracle 的[Java Bug Parade](http://bugs.sun.com/bugdatabase/index.jsp)中没有记录。我仍然没有找到解决方法（在我的情况下，使用荧光笔不是一个选项）。

# c++ - 如何使用 Maya C++ API 从 .mb 中的自定义材质中提取用户数据？

> ID：13641209
> 
> 赞同：0
> 
> 时间：2012-11-30T08:05:49.347
> 
> 标签：c++, import, export, maya

当我在导入应用程序中使用 C++ Maya API 解析 .mb 时，如何提取用户在我的自定义材质字段中输入的数据？（我怀疑我已经可以访问包含用户输入的 MObject，但不知道如何提取它）

以下是更详细的情况：

*   我使用 C++ Maya API 定义了一个自定义材质（我创建了一个定义自定义 MPxNode 的 .mll，它又为用户定义了一些浮点和枚举字段）
*   在 Maya 中，我可以将新材质“分配给具有自定义材质的对象”，然后修改自定义材质的数据字段并保存 .mb
*   在我的 C++ Maya 导入器中，我遍历 DAG 和 DG，并且如预期的那样，注意自定义材质的一次出现（通过将材质 MObject 标识为调用 MObject::hasFn(MFn::kPluginDependNode) 返回的唯一材质来指出真的）
*   我可以使用 MFnDependencyNode::attribute("datafieldName") 按名称提取我的每个自定义着色器的数据字段——尝试提取不存在的数据字段按预期失败

...但是这些提取的数据字段是 MObject 的，我不知道如何提取用户输入到 Maya 中的自定义材质实例中的数据。

这里的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:04:43.923

这是我正在寻找的缺失链接：

MFnDependencyNode::findPlug("datafieldName") 返回一个 MPlug，然后提供对用户输入数据的访问。

（我正在搜索“属性”和“数据字段”之类的名称——我没有想到要寻找任何称为“插头”的东西）

# c++ - 为什么 c++11 std::array 使用模板初始化 max_size 而不是构造函数？

> ID：13641212
> 
> 赞同：2
> 
> 时间：2012-11-30T08:06:11.420
> 
> 标签：c++, c++11

c++11 使用模板来定义数组的 max_size（例如。`std::array<int, 5> a1;`）但不是构造函数。（例如。`std::array<int>(5) a1;`）

由于模板将为类生成代码，如果我有很多数组，只是大小不同，就会生成很多代码。

（1.可能会导致编译时间增加。2.可能会导致可执行文件代码部分的扩展。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T08:11:04.607

因为如果没有，它就不可能是现在的样子。

`std::array`是一个*数组*。不是动态大小的数组。不是运行时大小的数组。它是一个*数组*，很像`int arr[5]`.

C++ 是一种静态类型语言，这意味着 C++ 类型必须具有编译时定义的大小。`arr`在上面的例子中有一个大小；如果你这样做`sizeof(arr)`，你会得到`sizeof(int) * 5`。`sizeof(std::array<int, 5>)`也有一个大小，由其中的元素数量定义。因此，大小必须是编译时定义的数量，因为它会影响编译时定义的大小。

`std::array`和常规数组的区别是：

*   数组将隐式衰减为指针。`std::array`才不是; 你需要显式调用一个函数来做到这一点。
*   数组是语言数组；`std::array`，对于语言来说，是一个包含数组的结构。

> 如果我有很多数组，只是大小不同，就会生成很多代码。

是的，你可能会。话又说回来……这是一个严重的问题吗？你真的*看过*一个`std::array`实现吗？

那里没有太多东西。`T operator[](int index) { return elems[index]; }`我不认为获得*该*函数的几百个实例化将是一个问题。`begin`, `size`,等也是如此`empty`。您所谈论的代码几乎肯定会被内联。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T08:09:35.807

`std::array`意味着作为固定大小数组的薄包装器。对于动态大小的数组，有`std::vector`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:14:46.683

一个好处`std::array`是它以最小的开销在*堆栈*上分配内存（除非您声明一个全局对象）。

如果数组大小由构造函数参数确定，则分配必须在*堆上*，并且通常生成的对象在内存使用和性能方面效率较低。

# spring - Jersey;: 通过 SpringServlet 注册注入的 ExceptionMapper 实例

> ID：13641222
> 
> 赞同：6
> 
> 时间：2012-11-30T08:07:21.117
> 
> 标签：spring, jersey

泽西岛：1.12 春季：3.11 JDK：1.6.0_35 Tomcat：6..0.33

我正在尝试为由 Spring IoC 容器在 SpringServlet 的上下文中实例化的 Jersey servlet 注册 ExceptionMapper 实例，并且在 Jersey servlet 期间遇到了旧的“组件类 X 的范围必须是单例”异常初始化。我目前无法发布实际代码，所以我将提供实现的要点，看看是否有明显的东西跳出来，或者我是否可以指出我拥有的一些文档错过了。

ExceptionMapper 实例本质上如下：

```
// ... package definitions omitted ...

@Provider
@Singleton
public class MyExceptionMapper
    implements ExceptionMapper<MyException>
{
    // ... injected attributes omitted ...

    @Override
    public Response toResponse(MyException exception)
    {
        // ... specific handling logic omitted ...

       return Response.status(Status.BAD_REQUEST).entity(exception.getMessage()).build();
    }
} 
```

applicationContext.xml 中的 bean 定义如下，默认为单例范围（并且添加显式范围说明符似乎不会改变行为）：

```
<bean id="myExceptionMapper" class="my.package.MyExceptionMapper" /> 
```

web.xml 中的 Spring 上下文加载器侦听器和 SpringServlet 配置本质上是样板文件，当 MyExceptionMapper 的 bean 定义从 applicationContext.xml 注释掉时，servlet 将加载、初始化和正确操作其他注入属性。但是，当 applicationContext.xml 中存在 bean 定义时，我会收到以下日志消息：

```
SpringProviderFactory - Registering Spring bean, myExpectionMapper, of type my.package.MyExceptionMapper as a provider class
SpringProviderFactory - Registering Spring bean, myServiceController, of type my.package.MyServiceController as a root resource class
... other root resource classes loading ...
SpringServlet - Exception occurred when initialization
java.lang.RuntimeException: The scope of the component class my.package.MyExceptionMapper must be a singleton
  at som.sun.jersey.core.spi.component.ioc.IoCProviderFactory.wrap(...) 
```

我尝试将 MyExceptionMapper 放在扫描包层次结构中，以便在初始化期间由 SpringServlet 拾取，并放在单独的包层次结构中，结果不会改变。

对此的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:18:29.593

我`ExceptionMapper`的 s 在我正在执行组件扫描的结构下，而我的只是`@Component`为 Spring 注册表和`@Provider`Jersey 进行了注释。

我的组件扫描看起来像：

```
<context:component-scan base-package="com.company.web"/> 
```

`ExceptionMapper`看起来很像你的：

```
package com.mycompany.web.provider;

import com.mycompany.exception.SpecialException;
import com.mycompany.exception.Error;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

@Provider
@Component
public class SpecialExceptionMapper implements ExceptionMapper<SpecialException> {

    @Autowired
    private MessageSource messageSource;

    @Override
    public Response toResponse(SpecialException exception) {

        Error error = new Error();

        error.errorMessage = messageSource.getMessage(exception.getResourceBundleKey(), exception.getArgs());

        return Response.status(Response.Status.BAD_REQUEST).
                entity(error).
                type(MediaType.APPLICATION_JSON).
                build();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T15:49:39.403

在 spring 配置中显式添加范围对我来说是诀窍：

```
<bean id="exceptionMapper" class="my.pkg.MyExceptionMapper" scope="singleton" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:26:46.020

我有同样的问题，但有一个 MessageReaderWriterProvider 类：

```
package my.provider.package;
...
@Provider
@Consumes({MediaType.APPLICATION_JSON, "text/json"})
@Produces({MediaType.APPLICATION_JSON, "text/json"})
public class ReRwProvider extends AbstractMessageReaderWriterProvider<Object> {
...
} 
```

解决方案是将此类的包添加到 web.xml 中 Jersey 的 SpringServlet 的 init-param 标记中：

```
<init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>my.provider.package</param-value>
</init-param> 
```

请注意，您不应在 Spring 上下文中定义此 bean。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-09T09:42:02.840

在 Spring 3.2.3 和 Jersey 2.3.1 集成中遇到了同样的问题。

对我有用的是两者的结合：

1.  在 app-context xml 中使用或使其显式单例注释球衣`@Provider`类`@Service`

    ```
    @Service //implies a singleton-scope
    @Provider
    public class UnhandledExceptionMapper implements ExceptionMapper<Throwable> {

        @Override
        public Response toResponse(Throwable exception) { //... 
    ```

2.  将包含提供程序类的包添加到球衣包中，我更喜欢在 MyApplication 类中执行此操作：

    ```
    public class MyApplication extends ResourceConfig {
    public MyApplication() {
        packages("com.mycompany.api.controller", "com.mycompany.api.jersey");
                //....
        }
    } 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-08T11:06:28.890

在我看来，必须将 ExceptionMapper 配置为 Spring 的“单例”。如果你想使用注解配置，你必须注意，因为球衣也有一个“@Singleton”注解（与 spring 解释的 javax.inject.Singleton 的不同含义）为了避免任何混淆，我更喜欢使用 spring @Service注释，这意味着一个单例范围......所以：

```
import org.springframework.stereotype.Service;

import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

@Service //implies a singleton-scope
@Provider
public class UnhandledExceptionMapper implements ExceptionMapper<Throwable> {

    @Override
    public Response toResponse(Throwable exception) {
        return Response.status(Response.Status.INTERNAL_SERVER_ERROR)
                .entity(new ErrorBean(false, exception.getMessage(), null))
                .build();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-26T10:32:29.963

我还发现有时自定义的 ExceptionMapper 不起作用，而且它并不总是起作用或不起作用。

所以我调试了球衣的源代码。

类：org.glassfish.jersey.server.ServerRuntime，方法：mapException

```
 ...
 final long timestamp = tracingLogger.timestamp(ServerTraceEvent.EXCEPTION_MAPPING);
 **ExceptionMapper mapper = runtime.exceptionMappers.findMapping(throwable);**
 if (mapper != null) {
      request.getRequestEventBuilder().setExceptionMapper(mapper); 
```

...如果映射器为空，则自定义的 ExceptionMapper 将不起作用。

类：org.glassfish.jersey.internal.ExceptionMapperFactory 方法：ExceptionMapperFactory

异常映射器：（有两个异常映射一个相同的异常：java.lang.Exception）

org.glassfish.jersey.server.mvc.internal.ErrorTemplateExceptionMapper@6473fc2,class java.lang.Exception

...

com.baidu.ssp.web.ws.exception.BaseExceptionMapper@7a84639c,class java.lang.Exception

这是因为在 MvcFeature 中：

@Override public boolean configure(final FeatureContext context) { final Configuration config = context.getConfiguration();

```
if (!config.isRegistered(ErrorTemplateExceptionMapper.class)) {
    context.register(ErrorTemplateExceptionMapper.class);
    context.register(new MvcBinder());

    return true;
}

return false; 
```

} ErrorTemplateExceptionMapper 也被添加到 ExceptionMapper。

所以我改变了我的自定义 MapperException 的泛型类型： ExceptionMapper 到 ExceptionMapper

可能是我的分辨率不适合你，主要问题是 ExceptionMapper

# python - 如何在python中制作一个交互式的简单手表？

> ID：13641227
> 
> 赞同：1
> 
> 时间：2012-11-30T08:07:53.467
> 
> 标签：python, tkinter

我对如何在 python 中创建手表有点困惑，我编写了以下代码：

```
from Tkinter import *
root = Tk()

tt='vv'

def time(tt):
    from time import strftime
    tt=strftime('%H:%M:%S')
    return tt

Label= Label(root,bd=11,text=time(tt))
Label.pack()

root.mainloop() 
```

我怎样才能让它互动？现在它只显示运行程序时的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:14:29.147

您可以使用该`after`函数来安排方法调用。

这是一个小例子。请注意，我正在使用 a[`StringVar`](http://effbot.org/tkinterbook/variable.htm)轻松设置`Label`.

```
from Tkinter import *
from time import strftime

root = Tk()

time_var = StringVar()

def set_time():
    time_var.set(strftime('%H:%M:%S'))
    root.after(1000, set_time)

Label(root, bd=11, textvariable=time_var).pack()
set_time()
root.mainloop() 
```

我调用`set_time`一次，然后`set_time`安排自己每 1000 毫秒调用一次。

# maven - 如何在子模块上运行声纳？

> ID：13641229
> 
> 赞同：4
> 
> 时间：2012-11-30T08:08:25.937
> 
> 标签：maven, jenkins, sonarqube

我正在使用声纳与 Jenkins 的集成。我只想在项目的子模块而不是整个项目上运行声纳。但是，当我在 Sonar 的选项中指定**-pl 子模块**时，它说它不受支持。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:19:31.853

`cd`进入子模块并在`mvn sonar:sonar`那里运行。

这种方法的缺点是它会在 Sonar 服务器上创建一个新的顶级条目；Sonar 无法将子模块运行的结果与现有的完整分析合并。

# sql - 使表中的列值具有相同数量的字符

> ID：13641230
> 
> 赞同：2
> 
> 时间：2012-11-30T08:08:26.677
> 
> 标签：sql, sql-server

我有一个`DomainDetail`有列的表`fieldID`。

它的值如`A1,B22,A567,D7779,B86759`.. 即从两个字符到最多六个字符。

我希望这些值具有相同数量的字符 `A000001,B000022,A000567,D07779 and B86759`。

这就是我认为我应该继续的方式

*   估计字段值的大小 =`LEN(fieldID)`
*   插入的零数量等于**（6 - 字符数）**。

如何在 original value 中插入 0。在 SQL 中怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:19:31.760

像这样

```
select 
    left(fieldID, 1) + 
    right('000000' + right(fieldID, len(fieldID) - 1), 5)
from DomainDetail 
```

看一下[**SQL FIDDLE 示例**](http://sqlfiddle.com/#!3/9d6cf/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:14:29.460

这听起来像是业务逻辑更好地解决的问题，即数据库上方的代码层。每当您插入时，请在该代码中进行填充 - 然后始终使用该代码/层插入表中。

无论如何，这似乎是一个业务逻辑要求——“ID 必须最多包含 6 个字符”。因为数据库不会施加这样的限制。

（除非您使用存储过程作为业务逻辑层？在这种情况下，[使用 T-SQL 中的 PadLeft 函数](https://stackoverflow.com/questions/5540064/padleft-function-in-t-sql)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:18:29.167

```
select 
stuff(fieldId,2,0,
      LEFT('0000000000000000000000000',
      (select max(LEN(FieldID)) from DomainDetail)

           -LEN(fieldId)))
from DomainDetail 
```

如果您需要固定的输出长度，只需替换内部选择（`select max(LEN(FieldID)) from DomainDetail)`例如`6` Here is a [SQLFiddle demo](http://sqlfiddle.com/#!6/be428/1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T08:30:57.217

如果要更新，请使用此

```
UPDATE DomainDetail
SET fieldId=
            SUBSTRING(fieldId,1,1)+
            REPLICATE('0',6-LEN(id))+
            SUBSTRING(fieldId,2,LEN(id)-1) 
```

如果您只想 SELECT 而不更改表中的值，那么这应该可以

```
SELECT SUBSTRING(id,1,1)+
       REPLICATE('0',6-LEN(id))+
       SUBSTRING(id,2,LEN(id)-1) 
FROM DomainDetail 
```

希望这可以帮助，

拉吉

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T08:53:43.737

```
select stuff(fieldid, 2, 0, replicate('0', 6-len(fieldid))) 
from DomainDetail 
```

# asp.net-mvc - 为什么我的数据库服务器停止时会出现“找不到文件”异常？

> ID：13641236
> 
> 赞同：1
> 
> 时间：2012-11-30T08:09:12.347
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

我正忙于对异常处理进行一些分析，当我停止我的 MS SQL 服务器时，然后执行此行：

```
var list = _expenseService.ListExpenseTypes().ToList(); 
```

在 VS 中，我得到一个“Provider failed to open”错误对话框，但是当我继续得到黄屏死机时，显示

```
> 
```

对于控制器中的同一行代码。当原始文件为“提供程序无法打开”时，如何抛出此文件异常？

# c++ - 实施常数。石头、剪刀、纸

> ID：13641239
> 
> 赞同：1
> 
> 时间：2012-11-30T08:09:20.783
> 
> 标签：c++

我在 C++ 上学习石头剪刀布游戏中有单个游戏实例类。我想创建整数常量，它表示游戏中允许的符号数。对于经典的 rsp 游戏，它是 3（石头、剪刀和纸），但是有一些有趣的 rcs 游戏扩展，带有额外的标志，稍后我将实现它们并扩展我的虚拟游戏。

如何实现相同的常量，遵循良好的编码风格？我应该创建特殊的私有常量游戏即时类成员还是在命名空间中声明这个常量？也许最好为游戏配置创建特殊类并将这个常量、标志类型和其他放在那里？

另一个问题是如何实现游戏规则（石头>剪刀，剪刀>纸等），这很容易扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:18:00.640

```
class Game {

private:
  enum Sign {
    PAPER,
    SCISSORS,
    ROCK
  };
}; 
```

如果您想要一种方便的方法来获取标志的数量：

```
class Game {

private:
  enum Sign {
    PAPER,
    SCISSORS,
    ROCK,
    NUM_SIGNS
  };
}; 
```

`NUM_SIGNS`在这种情况下将等于 3。

# sql - SQL“Select 42”有什么作用以及如何在 Sybase 中将其关闭？

> ID：13641241
> 
> 赞同：2
> 
> 时间：2012-11-30T08:09:23.097
> 
> 标签：sql, sap-ase

我们使用 Sybase ASE 作为我们的 DBMS。我注意到对数据库服务器的每个查询之前都有一个“选择 42”调用。这究竟是做什么的？

似乎它只是一个测试/ping，这是否正确，它来自哪里以及我们如何将其关闭？

似乎找不到任何关于此的真实文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T15:27:46.883

这只是一个简单的测试，最有可能检查与数据库的连接是否仍处于活动状态。使用 Sybase ASE，您实际上可以选择任何内容，只需创建一个“测试函数”。像这样：SELECT 1 + 1

# ios - 如何将图像包含资源划分为设备？

> ID：13641246
> 
> 赞同：1
> 
> 时间：2012-11-30T08:10:01.720
> 
> 标签：ios, xcode, ios-universal-app

嗨，我正在制作一个通用应用程序。

我的应用程序包含许多大图像。

但是，ipad 的图像在 iphone 上是无用的。

iphone的图像在ipad上也没有用。

只是应用程序大小增加。

我想将图像分成设备（iphone、ipad）。

[iOS 应用程序目标是通用的]-[设备] 设置为“通用”。

如何将图像包含资源划分为设备？

如果没有，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:19:58.630

我想通用应用程序的重点是包含所有内容。AFAIK，没有办法为通用应用程序分离图像，同样对于通用应用程序，启动图像需要一起运送。否则，您将不得不考虑单独的 iPad 和 iPhone 应用程序的选项。

# java - CXF 客户端：如何忽略 @WebServiceClient 注释

> ID：13641248
> 
> 赞同：1
> 
> 时间：2012-11-30T08:10:14.407
> 
> 标签：java, web-services, cxf

我有一个第三方 jar，其中包含带有`@javax.xml.ws.WebServiceClient`注释的类 SampleClass。我在我的项目中将 CXF 用于 REST 层而不是用于 Web 服务。但是，由于为我的项目配置了 CXF 基础架构，因此在我实例化它时它会尝试自动连接到 SampleClass（事实上，它在尝试这样做时会出错）。我想将该类用作简单的 POJO 而不是 Web 服务客户端。有没有办法告诉 CXF 忽略`@javax.xml.ws.WebServiceClient`注释？

仅供参考，我得到的例外是：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.cxf.common.injection.ResourceInjector.invokePostConstruct(ResourceInjector.java:302)
    at org.apache.cxf.common.injection.ResourceInjector.construct(ResourceInjector.java:86)
    at org.apache.cxf.bus.spring.Jsr250BeanPostProcessor.postProcessAfterInitialization(Jsr250BeanPostProcessor.java:58)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:357)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1308)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:463)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:404)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:375)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:263)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:170)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:260)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:184)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:163)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:430)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:729)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:381)
    at org.apache.cxf.bus.spring.BusApplicationContext.<init>(BusApplicationContext.java:88)
    at org.apache.cxf.bus.spring.SpringBusFactory.createApplicationContext(SpringBusFactory.java:103)
    at org.apache.cxf.bus.spring.SpringBusFactory.createBus(SpringBusFactory.java:94)
    at org.apache.cxf.bus.spring.SpringBusFactory.createBus(SpringBusFactory.java:87)
    at org.apache.cxf.bus.spring.SpringBusFactory.createBus(SpringBusFactory.java:65)
    at org.apache.cxf.bus.spring.SpringBusFactory.createBus(SpringBusFactory.java:54)
    at org.apache.cxf.BusFactory.getDefaultBus(BusFactory.java:70)
    at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:107)
    at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:98)
    at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:64)
    at javax.xml.ws.Service.<init>(Unknown Source)

Caused by: java.lang.NullPointerException
    at org.apache.cxf.binding.corba.wsdl.WSDLExtensionRegister.createCompatExtensor(WSDLExtensionRegister.java:63)
    at org.apache.cxf.binding.corba.wsdl.WSDLExtensionRegister.registerYokoCompatibleExtensors(WSDLExtensionRegister.java:47)
    ... 34 more
java.lang.ExceptionInInitializerError

Caused by: java.lang.NullPointerException
    at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:81)
    at org.apache.cxf.jaxws.ServiceImpl.initializePorts(ServiceImpl.java:141)
    at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:133)
    at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:65)
    at javax.xml.ws.Service.<init>(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:51:02.293

我们在从 Service 扩展的类中使用了 Super()。父“服务”类的代码是

[http://grepcode.com/file/repo1.maven.org/maven2/javax.xml.ws/jaxws-api/2.2.8/javax/xml/ws/Service.java#92](http://grepcode.com/file/repo1.maven.org/maven2/javax.xml.ws/jaxws-api/2.2.8/javax/xml/ws/Service.java#92)

进而调用静态方法“Provider.provider()”在运行时加载提供程序。代码是

[http://grepcode.com/file/repo1.maven.org/maven2/javax.xml.ws/jaxws-api/2.2.8/javax/xml/ws/spi/Provider.java#Provider.provider%28% 29](http://grepcode.com/file/repo1.maven.org/maven2/javax.xml.ws/jaxws-api/2.2.8/javax/xml/ws/spi/Provider.java#Provider.provider%28%29)

对此方法的 Javadoc 注释是：

> 块引用

创建一个新的提供者对象。

用于定位要使用的提供程序子类的算法包括以下步骤：

*   如果名称为 META-INF/services/javax.xml.ws.spi.Provider 的资源存在，则其第一行（如果存在）用作实现类的 UTF-8 编码名称。
*   如果 $java.home/lib/jaxws.properties 文件存在并且它可以被 java.util.Properties.load(InputStream) 方法读取，并且它包含一个键为 javax.xml.ws.spi.Provider 的条目，那么该条目的值用作实现类的名称。
*   如果定义了名为 javax.xml.ws.spi.Provider 的系统属性，则其值用作实现类的名称。
*   最后，使用默认的实现类名。

> 块引用

CXF 似乎选择了第一种方式来加载它的 Provider 实现。即：“如果名称为 META-INF/services/javax.xml.ws.spi.Provider 的资源存在，则其第一行（如果存在）用作实现类的 UTF-8 编码名称。”

CXF jar 在 jar 中有这个文件，其中 Provider 类被称为 CXF 实现。由于这是用于查找的第一件事，因此将加载 CXF 的提供程序而不是默认提供程序。但是，我们的实现期望加载默认提供程序。

我们能想到的唯一可行的解​​决方法是自己在 META-INF\services 下添加文件 javax.xml.ws.spi.Provider 并将提供程序指定为默认实现类 com.sun.xml.internal.ws.spi .ProviderImpl。唯一的风险是 com.sun.xml.internal.ws.spi.ProviderImpl 类是 JRE 的内部实现，不受 API 合同约束。所以类名/包可能会随着未来的版本而改变。

# android - SQLite删除级联不起作用

> ID：13641250
> 
> 赞同：42
> 
> 时间：2012-11-30T08:10:36.573
> 
> 标签：android, sqlite, cascading-deletes

在Android 4.2中，使用SQLite 3.7.11，当我从Quizzes表中删除一行时，谁的架构在下面，QuizQuestions表中的相应行不会被删除。

我不知道出了什么问题。我试过把

```
db.execSQL("PRAGMA foreign_keys = ON;"); 
```

在创建表语句之前和之后。

创建表语句：

```
CREATE TABLE quizzes(quiz_name TEXT PRIMARY KEY COLLATE NOCASE);

CREATE TABLE quizQuestions(quiz_name TEXT, question_id INTEGER,
     PRIMARY KEY(quiz_name, question_id),
     FOREIGN KEY(quiz_name) REFERENCES quizzes(quiz_name) ON DELETE CASCADE,
     FOREIGN KEY(question_id) REFERENCES questions(question_id) ON DELETE CASCADE); 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-30T08:31:21.510

您的数据库应该删除行`quizQuestions`，以防有人`quizzes`从`questions`. 如果关闭外键支持并且您只有可以包含任何值的常规列，它将忽略*整个外键约束。*

SQLite 默认为`PRAGMA foreign_keys = OFF`每次*打开*数据库时。它不是表或模式的属性。

如果你使用`SQLiteOpenHelper`把它放在`onOpen`. 那是每次打开数据库时调用的地方。`onCreate`仅在创建数据库时执行一次。

* * *

当你第一次`SQLiteOpenHelper`打电话时，你会叫什么`getWriteableDatabase`

1.  `onConfigure`每次都需要 API 级别 >= 16
2.  根据数据库文件的存在和版本，在事务中调用以下内容
    *   `onCreate`如果没有数据库文件。通常，这只会在应用程序的整个生命周期中发生一次。
    *   `onUpgrade`如果数据库版本（`PRAGMA user_version`- 保存在数据库文件中）小于 SQLiteOpenHelper 的构造函数中提供的版本。每次您在代码中更改版本时都会发生。
    *   如果文件存在且版本匹配，则没有任何内容。
3.  `onOpen`每次

如果同一个实例`SQLiteOpenHelper`已经有一个打开的数据库，它只会返回它，而上述任何事情都不会发生。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-30T08:20:01.253

在您的 Android 应用程序中打开数据库后尝试添加此内容：

```
db.execSQL("PRAGMA foreign_keys=ON"); 
```

这将打开对外键的支持，这是`ON DELETE CASCADE`正常工作所必需的。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-10-09T23:30:03.900

Sqlite 默认禁用外键约束，因此您需要通过**简单地覆盖 DBhelper 类中的 onOpen 方法来启用它，如下所示**

```
public class YourOwnDbHelper extends SQLiteOpenHelper {
    @Override
    public void onOpen(SQLiteDatabase db){
        super.onOpen(db);
        db.execSQL("PRAGMA foreign_keys=ON");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-20T06:58:25.577

我在visual basic上遇到了同样的问题！！！您必须像这样编写命令文本：

> cone.CommandText = "PRAGMA foreign_keys = ON；从员工那里删除 cod_emp=0；"

每次删除某些内容时都必须这样做

# matlab - 对直方图中的 3 个区域使用直方图均衡

> ID：13641256
> 
> 赞同：1
> 
> 时间：2012-11-30T08:11:21.223
> 
> 标签：matlab, range, histogram, octave, histogram-equalization

我正在尝试开发一个应用程序来拉伸每个区域的直方图..

在一张图片中，直方图将分为暗区、中区和亮区 3 个区域。范围为：[0 85]、[85 171] 和 [171 255]

我的问题是，如何编写代码以分别在每个区域上使用直方图均衡化，然后，结果将在一个直方图中并显示一张图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:36:53.353

这是你想要的吗？

```
r = randn(1000,1);
[N,X] = hist(r,30);

lowLim = -1;
highLim = 1;

L1 = X<lowLim;
L2 = X>highLim;

figure
hold on
bar(X,N)
bar(X(L1),N(L1),'k')
bar(X(L2),N(L2),'r') 
```

![彩色区域直方图](../Images/9fedefe3e2ad34a38ca675ea7ef220a7.png)

# wcf - Mono 在 Ubuntu 上运行 WCF 服务时出现异常

> ID：13641258
> 
> 赞同：1
> 
> 时间：2012-11-30T08:11:24.263
> 
> 标签：wcf, exception, mono

那里

**运行时上下文：**我用VS2012编写了一个简单的WCF控制台应用程序，在Windows上运行流畅，但是尝试在Ubuntu上通过mono运行时出现异常

**单声道版本**：2.10.6

**例外：**

未处理的异常：System.InvalidOperationException：System.ServiceModel.ServiceHostBase.BuildListener (System.ServiceModel.Description.ServiceEndpoint se, System.ServiceModel.Channels.BindingParameterCollection pl) [0x00000] in :0 at System 不支持任何侦听器通道类型.ServiceModel.ServiceHostBase.BuildChannelDispatcher (System.ServiceModel.Description.ServiceEndpoint se, System.ServiceModel.Channels.BindingParameterCollection commonParams) [0x00000] 在 System.ServiceModel.ServiceHostBase.InitializeRuntime () [0x00000] 在 System.ServiceModel.ServiceHostBase.InitializeRuntime () [0x00000] 在 System.0 中。 ServiceModel.ServiceHostBase.OnOpen (TimeSpan timeout) [0x00000] in :0 at System.ServiceModel.Channels.CommunicationObject.Open (TimeSpan timeout) [0x00000] in :0 at System.ServiceModel.Channels.CommunicationObject.Open () [0x00000]在：0 在 DynIPServiceHost.Program。Main (System.String[] args) [0x00000] in :0

唯一的主要功能是：

```
 static void Main(string[] args)
    {     
        try
        {
            Binding binding = new NetTcpBinding();
            ServiceHost sh = new ServiceHost(typeof(DynIPService.DynIPService));
            sh.AddServiceEndpoint("DynIPServiceContract.IDynIPService", binding, "net.tcp://10.161.66.213:808");
            sh.Open();
            foreach (var ep in sh.Description.Endpoints)
            {
                Console.WriteLine("Address: {0}, ListenUri: {1}, ListenUriMode: {2} ", ep.Address, ep.ListenUri, ep.ListenUriMode);
            }
            Console.WriteLine("Service is running");
            //Console.WriteLine("Current Uri is:);
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error:" + ex.Message);
            throw;
        }
        finally
        {
           Console.ReadKey();
        }
    }
} 
```

# asp.net-mvc - 如何重新格式化数据在 ASP MVC Razor 页面中的显示方式？

> ID：13641260
> 
> 赞同：0
> 
> 时间：2012-11-30T08:11:40.253
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有以下代码：

```
<li>Reviewed: @Model.Modified</li> 
```

和一个看起来像这样的模型：

```
 [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}")]
    public DateTime? Modified { get; set; } 
```

但是，当显示时，日期显示如下：

```
REVIEWED: 8/1/2012 2:42:34 PM 
```

有没有一种简单的方法可以更改日期的显示方式，使其仅显示为 8/1/2012 2PM ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:16:42.643

您也可以[`DateTime.ToString(format)`](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)在视图中使用，以您想要的方式格式化日期。

所以在你的情况下，类似：

```
@Model.Modified.ToString("dd/MM/yyyy htt") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:18:06.670

您可以使用[DisplayExtensions.DisplayFor](http://msdn.microsoft.com/en-us/library/ee834932%28v=vs.108%29.aspx)方法：

```
@Html.DisplayFor(model => model.Modified) 
```

此帮助器适用于数据注释和显示模板。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T08:20:47.180

试试这个

```
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy htt}")]
   public DateTime? Modified { get; set; } 
```

该网站提供易于理解的有关设置日期/时间格式的信息

[日期格式化 C#](http://www.mikesdotnetting.com/Article/23/Date-Formatting-in-CSharp)

# apache2 - 为什么有八个 httpd 进程？

> ID：13641263
> 
> 赞同：1
> 
> 时间：2012-11-30T08:11:46.180
> 
> 标签：apache2

我正在使用 linux EC2，我在启动 apache 后**立即**看到 8 个 httpd 进程，其中 2 个归 root 所有，其余归“apache”所有：

```
root     22966     1  0 08:03 ?        00:00:00 /usr/sbin/httpd
root     22968 22966  0 08:03 ?        00:00:00 /usr/sbin/httpd
apache   22969 22966  0 08:03 ?        00:00:00 /usr/sbin/httpd
apache   22970 22966  0 08:03 ?        00:00:00 /usr/sbin/httpd
apache   22971 22966  0 08:03 ?        00:00:00 /usr/sbin/httpd
apache   22972 22966  0 08:03 ?        00:00:00 /usr/sbin/httpd
apache   22973 22966  0 08:03 ?        00:00:00 /usr/sbin/httpd
apache   22974 22966  0 08:03 ?        00:00:00 /usr/sbin/httpd 
```

为什么有8个进程？我认为这与 prefork/worker 配置有关，可能是 prefork，但我的 /etc/httpd/conf/httpd.conf 文件看起来像这样，并且没有定义 8 或 6，也许我遗漏了什么？

```
# prefork MPM
# StartServers: number of server processes to start
# MinSpareServers: minimum number of server processes which are kept spare
# MaxSpareServers: maximum number of server processes which are kept spare
# ServerLimit: maximum value for MaxClients for the lifetime of the server
# MaxClients: maximum number of server processes allowed to start
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule prefork.c>
StartServers      5
MinSpareServers   3
MaxSpareServers  9
ServerLimit      256
MaxClients       256
MaxRequestsPerChild  4000
</IfModule>

# worker MPM
# StartServers: initial number of server processes to start
# MaxClients: maximum number of simultaneous client connections
# MinSpareThreads: minimum number of worker threads which are kept spare
# MaxSpareThreads: maximum number of worker threads which are kept spare
# ThreadsPerChild: constant number of worker threads in each server process
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule worker.c>
StartServers         4
MaxClients         300
MinSpareThreads     25
MaxSpareThreads     75
ThreadsPerChild     25
MaxRequestsPerChild  0
</IfModule> 
```

# javascript - 连续几页的自动点击提交按钮

> ID：13641268
> 
> 赞同：0
> 
> 时间：2012-11-30T08:11:58.273
> 
> 标签：javascript, jquery

是否可以制作自动点击器来打开某个页面，然后单击该页面上的提交按钮，自动打开其他页面，然后单击 sumbit 并为 15 个页面执行此操作？

（或者链接是需要登录的，但我当然有登录信息）

我想要的只是编写将打开该页面（不是我的）的 javascript 或 jquery 代码，然后单击它们上的提交按钮。要是能在安卓浏览器上运行就好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:26:14.157

您可以为此编写 chrome 扩展程序并使用内容脚本来完成您的工作。如果您不拥有该网站，我找不到其他方法让 js 完成这项工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:13:10.863

查看[http://seleniumhq.org/](http://seleniumhq.org/)

“Selenium 使浏览器自动化。你用这种能力做什么完全取决于你。主要是为了测试目的而自动化 Web 应用程序，但当然不仅限于此。无聊的基于 Web 的管理任务也可以（而且应该！）也可以自动化。”

# android - 2个数字的百分比

> ID：13641275
> 
> 赞同：0
> 
> 时间：2012-11-30T08:12:31.750
> 
> 标签：android

我建立了一个简单的文本编辑器，我还添加了阅读百分比。我认为一切正常（在我的手机和 3 个模拟器上），但在其他设备上崩溃。

我不明白有什么问题。有什么帮助吗？

```
public void perc(){
    float perc3;
    perc3=((a)*100)/(float)b;
    NumberFormat numberFormat = DecimalFormat.getInstance();
    numberFormat.setMaximumFractionDigits(2);
    String formattedText = numberFormat.format(perc3);
    perc= new Double(formattedText);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:26:43.683

如果，正如你所说，你确定 b 永远不会是 0，你为什么不尝试一种不同的方法来让 2 个小数位加倍呢？它似乎更不容易出错且更有效：

```
public double perc()
{
   long perc3 = Math.round( a*10000 / (double)b );
   return perc3 / (double) 100;
} 
```

我希望这有帮助。如果您仍然遇到崩溃，我很确定它不在这段代码中。

# android - Android MainActivity 将意图传递给另一个活动

> ID：13641277
> 
> 赞同：1
> 
> 时间：2012-11-30T08:12:39.240
> 
> 标签：android, android-asynctask

我在尝试调用另一个类时遇到问题，该类`FetchData`又包含`AsyncTask`Method 。

我的主要活动代码是：

```
public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    private Button btn;
    private EditText edit;
    private Spinner spinner;
    //private TextView textView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        btn = (Button) findViewById(R.id.button);
        edit = (EditText) findViewById(R.id.edit_message);
        spinner = (Spinner) findViewById(R.id.spinner);
        //textView = (TextView) findViewById(R.id.textView1);

        btn.setOnClickListener(
                new View.OnClickListener()
                {
                    public void onClick(View view)
                    {
                        //Log.v("EditText", edit.getText().toString());
                       // Log.v("Spinner", spinner.getSelectedItem().toString());
                        //if(spinner.getSelectedItem().toString()=="All Types")
                         String[] customarr = {"feature,tv_series,game","feature","tv_series","game"};
                         String selecteditem = customarr[spinner.getSelectedItemPosition()];

                        String url="http://cs-server.usc.edu:23405/examples/servlet/HelloWorldExample?title="+edit.getText().toString()+"&type="+selecteditem;
                        Log.v("url",url);

                        Intent intent=new Intent(this,FetchData.class);
                        String message=url;
                        intent.putExtra(EXTRA_MESSAGE, message);
                        startActivity(intent);
                    }
                });

    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,R.array.title_type,android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    //String url="http://cs-server.usc.edu:23405/examples/servlet/HelloWorldExample?title="+edit.getText().toString()+"&type="+spinner.getSelectedItem().toString();
     // Log.v("url",url);

    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
            //Object item = parent.getItemAtPosition(pos);

        }
        public void onNothingSelected(AdapterView<?> parent) {
        }
    });

    }
} 
```

我有错误

```
The constructor Intent(new View.OnClickListener(){}, Class<FetchData>) is undefined 
```

有任何想法吗。？我想我在某个地方犯了一个愚蠢的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:14:44.337

在`Intent intent=new Intent(this,FetchData.class);`替换为 的行`this`中`MainActivity.this`，`this`单独参考`onClickListener`

```
Intent intent=new Intent(MainActivity.this,FetchData.class); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T08:14:50.943

`MainActivity.this`在构造函数中使用。这是因为您在 a 内部`OnClickListener`并`this`引用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T08:15:24.683

Intent 构造函数需要活动上下文作为其第一个参数，并`this`引用`onClickListener()`单击侦听器类的对象。要访问使用中的实例引用，`class`在您的情况下应该是`inner class``NameOfTheClass.this``MainActivity.this`

更改代码中的以下行

```
Intent intent=new Intent(this,FetchData.class); 
```

到

```
Intent intent=new Intent(MainActivity.this,FetchData.class); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:14:28.473

事件中提供的 ested 必须执行以下操作

**youActivity.this**

如果不是，如果只是为了**这个**，将引用当前的对象

我建议如果您在 OnCreate 之外执行此操作

Intent intent = new Intent(YouActivyti.this,otheractivity.class)

如果在 OnCreate 中找到

Intent intent = new Intent(this,otheractivity.class)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-02T12:53:26.083

```
Intent intent=new Intent(MainActivity.this,FetchData.class); 
```

你忘了提到 MainActivity

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-03-02T13:16:01.257

-> 你在 oncreate 方法中并使用 onClickListener 接口，所以在 onCLick 方法中，如果你只使用- Intent intent = new Intent(this,classname.class); 那么在那种情况下（this）指的是 onClickListener 接口，但你想使用你当前的类实例，所以这就是你必须提及的原因。

这行代码

> ***意图意图=新意图(MainActivity.this,FetchData.class);**

希望这有帮助！！

# bash - 几个命令的 Bash 脚本

> ID：13641280
> 
> 赞同：1
> 
> 时间：2012-11-30T08:12:50.580
> 
> 标签：bash, svn

现在我们有一个命令`which_repo address/to/file.js`可以检测`svn`文件使用的 repo 并在屏幕上显示答案。看起来像：

```
myrepo/address/to/file.js 
```

之后我应该输入`svn blame cvs/myrepo/address/to/file`. 我从`which_repo`答案中复制的字符串的结尾。

如何编写将在一个步骤中执行此操作的函数，例如：

```
blame address/to/file.js 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:16:44.410

创建一个脚本`blame`：

```
#!/bin/bash
svn blame "cvs/$(which_repo "$1")" 
```

# c# - 如何在不阻塞主线程的情况下暂停 C# 代码执行？

> ID：13641282
> 
> 赞同：-3
> 
> 时间：2012-11-30T08:13:00.630
> 
> 标签：c#, multithreading, animation, wait

好的，所以我们有一个程序，我们要在其中为 WinForm 上的控件设置动画，然后恢复剩余代码块的后续操作。这是示例代码。

该功能在WinForm上，大概在主线程上运行

```
 Private void DoThisWork();
    {

    do some work here

    animateControls()
    //<NEED TO PAUSE HERE WHILE THE GUI ANIMATES AND UPDATES DISPLAYING THE ANIMATION OF THE CONTROL>

    //Tried Option 1: thread.sleep. When we do this the main thread blocks and the animation is //not seen. The control is directly painted at x1,y1 and thats it, the intermediate rendering is not seen

    // Tried Option 2: Application.DoEvents. This works very well except that the CPU maxes out and the animation then appears very jittery

   continue doing remaining work  // must execute only after animateControls() completes the animation part.

} 
```

现在，`animateControls()`它只是一个计时器上的函数，将控件从点 (x,y) 移动到 (x1,y1)，这大约需要 3 秒。

SuspendLayout 和 ResumeLayout 不会强制 GUI 更新，因为 thread.sleep 导致主线程阻塞，所以一切实际上都处于停滞状态。

使用不同的线程为 GUI 设置动画似乎没有帮助，因为我仍然需要完成整个动画。

此外，我无法在动画代码中添加任何内容，因为它是从多个函数调用的，因此被用作通用函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:24:36.037

你走错了路。把你的工作放在一个单独的线程上，让你的 UI 线程做你的动画，直到工作线程完成。

BackgroundWorker 类可能会派上用场。[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# excel - 如何使用EXCEL根据当前过滤器获取公式？

> ID：13641283
> 
> 赞同：-1
> 
> 时间：2012-11-30T08:13:02.267
> 
> 标签：excel, filter

我有一个excel文件。我根据我的条件过滤了单元格。

我也可以通过键入 IF 来使用公式来完成此操作。

除了输入这个公式，有没有办法从现有的过滤器生成这个公式？

通过这种方式，我不必手动输入大量的 IF 语句。

例子

![在此处输入图像描述](../Images/8ae851c692f14db96fd6f25143cd8888.png)

假设我使用条件 age=3 color=Black body_mark=Star 过滤了这张表

我可以通过过滤来做到这一点。

但是，我想用这个创建一个公式，然后粘贴到单元格中。

通过这种方式，我可以在不同的单元格中使用不同的条件。

除此之外，我想用这个公式计算总年龄。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:40:14.060

```
SUMIF( range, criteria, [sum_range] ) 
```

如果您对一个标准使用以下公式：

`SUMIFS("B2:B17",3,"B2:B17")`它会给你年龄= 3的所有马的总年龄

在您的情况下，使用以下`SUMIFS`方法获取具有多个条件的总年龄年龄 = 3，颜色 = 黑色......等

```
SUMIFS("B2:B17","B2:B17",3,"C2:C17","Black","D2:D17","Star") 
```

让我解释一下，假设您的 B2:B17 列出了所有马的年龄。C2:C17 用于颜色，D2:D17 用于身体标记。因此，您希望获得满足所有三列条件的总年龄。这就是`SUMIFS()`这里所做的。

那是你要找的吗？

看看这篇文章：[SumIfs() 网络资源](http://chandoo.org/wp/2010/04/20/introduction-to-excel-sumifs-formula/)以进一步了解。

# c - MPI_Reduce 指针

> ID：13641294
> 
> 赞同：1
> 
> 时间：2012-11-30T08:14:15.273
> 
> 标签：c, parallel-processing, mpi

你能帮我处理 MPI_Reduce 吗？我收到这样的错误

```
In: PMI_Abort(1, Fatal error in PMPI_Reduce:
Internal MPI error!, error stack: 
PMPI_Reduce(1284)....................: MPI_Reduce(sbuf=0x7fffcd0d0ae0, rbuf=0x7fffcd0d0af0, count=400, MPI_LONG, MPI_SUM, root=0, MPI_COMM_WORLD) failed
MPIR_Reduce_impl(1090)...............: 
MPIR_Reduce_MV2(1173)................: 
MPIR_Reduce_two_level_helper_MV2(887): 
MPIR_Reduce_binomial_MV2(119)........: 
MPIR_Localcopy(386)..................: memcpy arguments alias each other, dst=0x7fffcd0d0af0 src=0x7fffcd0d0ae0 len=3200
) 
```

这些是所有进程的代码

```
#define binsperdegree 4
#define totaldegrees 64

long int TotalCountDD;
long int tDD;

int nr_of_bins = binsperdegree*totaldegrees;  
int hgram_size = nr_of_bins+1;

long int *histogramDD; 
long int *totalDD; 
```

对于根进程

```
totalDD = (long int *)calloc( tDD, sizeof(long int));
MPI_Reduce(&histogramDD, &totalDD, tDD, MPI_LONG, MPI_SUM, 0, MPI_COMM_WORLD); 
```

对于非根进程

```
totalDD = (long int *)calloc(tDD , sizeof(long int));
MPI_Reduce(&histogramDD, &totalDD, TotalCountDD, MPI_LONG, MPI_SUM, 0, MPI_COMM_WORLD); 
```

# asp.net - 无法在 Chrome 中显示文档

> ID：13641295
> 
> 赞同：1
> 
> 时间：2012-11-30T08:14:20.490
> 
> 标签：asp.net, asp.net-mvc-3

在打开在 chrome 浏览器中部署后将在我的本地系统中打开的文档时。打开同一文档时在其他系统的 chrome 浏览器中显示错误：349

我用来显示文档的以下代码

**Response.AddHeader("Content-Disposition", "inline; filename=" + filePath); 返回文件（文件路径，“应用程序/pdf”，原始文件名）；**

注意：在所有场景中在 IE9 中打开的文档

# autocomplete - 每个 ActiveModel/Record 有多个映射？

> ID：13641300
> 
> 赞同：0
> 
> 时间：2012-11-30T08:14:30.643
> 
> 标签：autocomplete, elasticsearch, tire, n-gram

假设我想在 BlogPosts 之类的东西上创建两个单独的索引，这样我就可以使用一个索引进行快速搜索（例如用于自动完成目的），然后使用另一个索引进行完整的搜索查询。

这是我可以用轮胎做的吗？所以像这样的东西（如果它有点原始，请原谅我）

```
class Post < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

   index_name 'autocomplete'
  mapping do
      indexes :title, :analyzer => 'my_ngram_analyzer'
  end

  index_name 'main'
  mapping do 
      indexes :title
      indexes :description
      indexes :author
      indexes :published_on
  end
end 
```

回调知道从适当的索引中添加和删除新帖子的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:06:22.920

您不能在 Tire 中执行此操作，使用`mapping`DSL 方法在一个类中设置两个单独的索引（和映射）。

使用两个单独的索引可能是个好主意，一个用于自动完成，另一个用于搜索。有一个不错的[教程](http://jprante.github.com/applications/2012/08/17/Autocompletion-with-jQuery-JAX-RS-and-Elasticsearch.html)、StackOverflow[答案](https://stackoverflow.com/questions/9421358/filename-search-with-elasticsearch/9432450#9432450)，甚至还有一个 elasticsearch[插件](https://github.com/spinscale/elasticsearch-suggest-plugin)可以帮助您入门。

但是，除非您有大量数据，否则即使使用单个索引、使用`multi_field`类型、`match`跨多个字段的查询以及可能基于 NGram 的分析器，您也可以实现这一目标。

查看概述该方法的[**Autocomplete with Tire教程。**](https://github.com/spinscale/elasticsearch-suggest-plugin)

* * *

[来自https://github.com/karmi/tire/issues/531](https://github.com/karmi/tire/issues/531)的交叉帖子

# flex4 - 我创建了一个使用 HierarchicalData 作为 dataprovide 的自定义 advancedatagridgroupitemrenderer ，但它不起作用

> ID：13641301
> 
> 赞同：1
> 
> 时间：2012-11-30T08:14:31.560
> 
> 标签：flex4

我创建了一个自定义的高级数据网格组项目渲染器，它使用 HierarchicalData 作为我的数据提供；

## 我的 itemrenderer 是这样的：

公共类 XwjsjglAdvancedDgGroupItemRenderer 扩展 AdvancedDataGridGroupItemRenderer{ 公共函数 XwjsjglAdvancedDgGroupItemRenderer() { super(); }

```
 override public function set data(v:Object):void{
        super.data = v;
    }
    protected var img:Image;
    override protected function createChildren():void{
        super.createChildren();
        img= new Image();           
        img.source="/assets/images/indexNow/jsjhc.png";

        this.addChild(DisplayObject(img));      
    }       

    override protected function updateDisplayList(unscaledWidth:Number,
                                                  unscaledHeight:Number):void
    {
        super.updateDisplayList(unscaledWidth,unscaledHeight);

        img.x = label.x + 2;
        img.y = label.y + 2;
        label.x = img.x + 70;
    }

    override protected function commitProperties():void
    {
        super.commitProperties();
         }

    override protected function measure():void
    {
        super.measure();
        measuredWidth += 90;
        measuredHeight+= 90;
    }

} 
```

运行效果是这样的：http: [//i.stack.imgur.com/Bj1B5.png](http://i.stack.imgur.com/Bj1B5.png)

我该怎么办？对此问题的任何帮助将不胜感激。

# windows - How do I secure an odata service running on windows Azure

> ID：13641303
> 
> 赞同：2
> 
> 时间：2012-11-30T08:14:41.233
> 
> 标签：windows, authentication, service, azure, odata

I am hosting odata service on windows azure platform. How do I authenticate client/user within windows azure platform before they can access the odata service?

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:50:35.150

In the WCF Data Sevice Team´s blog there is a huge entry splitted in 8 parts where they deatils all about authentication:

[http://blogs.msdn.com/b/astoriateam/archive/2010/05/10/odata-and-authentication-part-1.aspx](http://blogs.msdn.com/b/astoriateam/archive/2010/05/10/odata-and-authentication-part-1.aspx)

# google-apps-script - 如何使 Google UI Services PopupPanel 工作

> ID：13641306
> 
> 赞同：0
> 
> 时间：2012-11-30T08:14:48.400
> 
> 标签：google-apps-script

我正在使用 Google Apps 脚本构建应用程序。但是，我想使用弹出面板在应用程序中弹出我的面板之一。我尝试搜索，但没有找到任何如何使此弹出面板正常工作的示例。

有谁知道如何使这项工作？

我要做的是在垂直面板中创建一个服务列表，当用户单击其中一个服务链接时，它将使用带有模式方法的弹出面板功能弹出面板。因此用户可以在弹出面板中编辑服务详细信息。用户更新服务后，弹出面板将关闭并返回包含服务列表的面板。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:37:18.100

目前弹出面板无法正常工作，但是您可以制作自己的自定义面板，可以使用客户端处理程序或服务器处理程序在不同的事件上弹出。

这是一个粗略的代码，它将向您展示使用客户端处理程序在单击事件上触发的弹出窗口的演示。

```
function doGet(){
  var app = UiApp.createApplication();

  app.add(createMaskPanel_());//this is used to make poup panel modal

  var mainPanel = app.createVerticalPanel();
  app.add(mainPanel);
  var btn = app.createButton('Open poup');
  mainPanel.add(btn);

  //Makke a panel for poup and add your popup elements
  var popup = app.createVerticalPanel().setId('popup').setVisible(false)
  .setStyleAttributes(
    {'position': 'fixed', 
     'border' : '1px solid black',
     'top' : '40%',
     'left' : '43%',
     'width' : '150', 
     'height':'150',
     'zIndex' : '2'});
  popup.add(app.createTextBox());
  popup.add(app.createButton('Close').addClickHandler(app.createClientHandler().forTargets([app.getElementById('mask'), popup]).setVisible(false)));
  app.add(popup);

  btn.addClickHandler(app.createClientHandler().forTargets([app.getElementById('mask'), popup]).setVisible(true));

  return app;
}

function createMaskPanel_(){ //Called when the setting UI loads, initially it will be invisble. id needs to be made visible
  //by accessing its id "mask"
  var app = UiApp.getActiveApplication();
  var mask = app.createVerticalPanel().setId('mask').setSize('100%', '100%') //maskPanel to mask the ui
  .setStyleAttributes({
    'backgroundColor' : '#f4f4f4',
    'position' : 'fixed',
    'top' : '0',
    'left' : '0',
    'zIndex' : '1',
    'opacity' : '0.5'}).setVisible(false);
  //Added a dummy element so that it spans to whole window.
  //don't know why but it works
  mask.add(app.createLabel('SBC Technology')
           .setStyleAttribute('color', '#f4f4f4')
           .setStyleAttribute('opacity', '0.5')); 
  return mask;
} 
```

# symfony - 学说 2\. 持久实体给予例外

> ID：13641309
> 
> 赞同：0
> 
> 时间：2012-11-30T08:15:07.400
> 
> 标签：symfony, orm, doctrine-orm

```
/**
 * Some\ApiBundle\Entity\FileTagRel
 *
 * @ORM\Table(name="file_tag_rel")
 * @ORM\Entity()
 */
class FileTagRel extends AuditedBaseEntity
{
    /**
     * @var integer $fileId
     * @ORM\Column(name="file_id", type="integer", nullable=false)
     * @Assert\NotNull()
     */
    protected $fileId;

    /**
     * @var integer $fileTagId
     * @ORM\Column(name="file_tag_id", type="integer", nullable=false)
     * @Assert\NotNull()
     */
    protected $fileTagId;
    ...
    //Getters and setters
    ...

} 
```

我只是想以这种方式保存实体

```
$ftrEm = $this->doctrine->getEntityManagerForClass('Some\ApiBundle\Entity\FileTagRel');
$ftr = new FileTagRel();
$ftr->setFileId($newFile->getId());
$ftr->setFileTagId($tagId);
$ftr->setCreatedAt($newFile->getCreatedAt());
$ftr->setModifiedAt($newFile->getModifiedAt());
$ftr->setCreatedByUserId($newFile->getCreatedByUserId());
$ftr->setModifiedByUserId($newFile->getModifiedByUserId());
$ftrEm->persist($ftr);
$ftrEm->flush(); 
```

我收到此错误 - `Warning: spl_object_hash() expects parameter 1 to be object, integer given` 我在 db 架构中有外键关系，但没有在实体中指定任何映射。我不知道为什么会收到此错误。

# java - 如何从我的软键盘启动主要活动

> ID：13641311
> 
> 赞同：2
> 
> 时间：2012-11-30T08:15:13.037
> 
> 标签：java, android, service, android-activity, keyboard

找到我的软键盘时，我有 MainActivity - “Activity”和 Service - “Keyboard”。

我怎样才能开始我的活动，我在我的软键盘上按“提示”键。

例子：

```
private void Hint_key(int keyEventCode) {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-20T11:25:43.833

如果要从 Service 启动 Activity，请执行以下操作：

```
Intent intent = new Intent(getApplicationContext(), Activity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplication().startActivity(intent); 
```

# css - ipad 不支持 CSS 样式

> ID：13641313
> 
> 赞同：0
> 
> 时间：2012-11-30T08:15:27.907
> 
> 标签：css, ipad

我正在修复我现有的网站，以便在 iPad 中进行适当的布局。但问题是 iPad 没有支持我为网站定义的 CSS。现有网站可以在 PC 浏览器中正常显示。

如何解决这个问题？

例子：

```
body{
    padding:0; margin:0;
    font-family:"Century Gothic";
    font-size: 10px;
    background:#ffffff;
    } 
```

在浏览器中，该站点显示 Century Gothic 字体。但在 iPad 中，它只是显示默认字体。很明显，iPad 没有拿起我的 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:21:28.493

iOS 不提供 Century Gothic 字体。

[您可以通过查阅此列表](http://iosfonts.com/)来检查 iOS 中提供了哪些字体。

# image - 如何从 gif 图像中删除嵌入的文本？

> ID：13641319
> 
> 赞同：0
> 
> 时间：2012-11-30T08:16:20.620
> 
> 标签：image

我有一个 gif 按钮，其中嵌入了一个名为：“MA”的文本。现在我想将文本更改为：“BA”。我可以在网上做吗？如果是，如何？否则我有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:19:30.033

您可以通过[Adob​​e ImageReady](https://en.wikipedia.org/wiki/Adobe_ImageReady)做到这一点。

# c# - 在 wp7 应用程序中比较字符串时遇到问题

> ID：13641321
> 
> 赞同：-2
> 
> 时间：2012-11-30T08:16:35.863
> 
> 标签：c#, windows, string, windows-phone-7

这是我的代码示例。

在这里，我从另一个页面收到一个字符串变量。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        string newparameter = this.NavigationContext.QueryString["search"];
        weareusingxml();

        displayResults(newparameter);

    }

private void displayResults(string search)
{
bool flag = false;
try
{
    using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
    {
        using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("People.xml", FileMode.Open))
        {
            XmlSerializer serializer = new XmlSerializer(typeof(List<Person>));
            List<Person> data = (List<Person>)serializer.Deserialize(stream);
            List<Result> results = new List<Result>();

            for (int i = 0; i < data.Count; i++)
            {
                string temp1 = data[i].name.ToUpper();
                string temp2 = "*" + search.ToUpper() + "*";
                if (temp1 == temp2)
                {
                    results.Add(new Result() {name = data[i].name, gender = data[i].gender, pronouciation = data[i].pronouciation, definition = data[i].definition, audio = data[i].audio });
                  flag = true; 
                }
            }

            this.listBox.ItemsSource = results;

}
catch
{
    textBlock1.Text = "error loading page";

}
if(!flag)
{
  textBlock1.Text = "no matching results";
}

} 
```

运行代码时没有任何内容加载到列表中，我只收到消息“没有匹配的结果”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:25:00.947

看起来您正在尝试进行包含搜索（我的猜测是基于您在搜索字符串周围添加的 *。您可以删除 '*' 并执行 string.Contains 匹配。

尝试这个。

```
string temp1 = data[i].name.ToUpper();
string temp2 = search.ToUpper()
if (temp1.Contains(temp2))
{ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:27:05.937

看起来您正在尝试检查一个字符串是否包含另一个字符串（即子字符串匹配），而不是它们是否相等。

在 C# 中，您可以这样做：

```
haystack = "Applejuice box";
needle = "juice";
if (haystack.Contains(needle))
{
     // Match
} 
```

或者，在您的情况下（并跳过`*`您添加到字符串 temp2 的内容）

```
if (temp1.Contains(temp2))
{
   // add them to the list 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T08:20:58.140

你检查确定了`data.Count > 0`吗？

# mongodb - mongodb找错文件

> ID：13641323
> 
> 赞同：1
> 
> 时间：2012-11-30T08:16:42.083
> 
> 标签：mongodb

你可以看到我的文件如下。如何为我的 uniq 字段编写查找？

我需要搜索 KEYMAP 为 (SNUM="3151" and "SKEY"="THR" and "SID"="ID_HUT") 的文档

```
 {     
    "CID":"2",
     "DESCRIPTION":"test",
     "SECKEY":"test",
     "API":{
          "SMS":"http://api.php",
          "DR":"http://api2.php"
        },
        "LOGS":{
             "IN":"log_cid_in_1",
             "OUT": "log_cid_out_1"
        },
        "KEYMAP":[              
            {"SNUM":"3151","SKEY":"THR", "SID":"ID_HUT"},
            {"SNUM":"3152","SKEY":"ONE", "SID":"ID_XL"},
            {"SNUM":"3153","SKEY":"TWO", "SID":"ID_INDO"}

        ]

    }    

    db.content_provider_map.ensureIndex({"KEYMAP.SNUM":1,"KEYMAP.SKEY":1,"KEYMAP.SID":1},{unique:true});
        db.mycollection.find({"KEYMAP.SNUM":"3151","KEYMAP.SKEY":"TWO","KEYMAP.SID":"ID_XL"});# not work. it find the document 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:18:54.347

我相信您想在这里使用`$elemMatch`（[http://docs.mongodb.org/manual/reference/operators/#_S_elemMatch](http://docs.mongodb.org/manual/reference/operators/#_S_elemMatch)），例如：

```
find({KEYMAP: {$elemMatch: {SNUM: "3151", SKEY: "TWO", SID: "ID_XL"}}}) 
```

此外，子文档上的唯一索引也不会像您认为的那样工作。它们在所有文档中创建唯一性，而不仅仅是一个文档。如果您想要一个文档上的唯一索引，那么您将需要`$addToSet`在子文档上使用类似或 upsert 函数。

# jquery-ui - 如何在jquery datepicker中禁用以前选择的日期

> ID：13641331
> 
> 赞同：0
> 
> 时间：2012-11-30T08:17:16.643
> 
> 标签：jquery-ui, jquery-ui-datepicker

我在 jsfiddle.net/udgeet/VUb5r/ 中编写了代码

我必须禁用之前选择的日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:07:47.817

您可以使用 datePicker 的[beforeShowDay](http://api.jqueryui.com/datepicker/#option-beforeShowDay)选项来指定要启用或禁用的日期。

那么这只是一个编写函数的情况

a）从选择中获取日期到一个数组中：

```
function daysToDisable() {
    var dates = [];
    for (i = 0; i < $('#inputdates option').length; i++) {
        dates[i] = new Date($('#inputdates option').eq(i).val()).toString();
    }
    return dates;
} 
```

b) 如果当前日期在数组中，则返回 true 或 false

```
function disableDates(date) {
    var days = daysToDisable();
    for (i = 0; i < days.length; i++) {  
        if ($.inArray(date.toString(), days) != -1) {
            return [false];
        }  
    }
    return [true];  
} 
```

[http://jsfiddle.net/vy562/1/](http://jsfiddle.net/vy562/1/)

# java - 如何释放 com.sun.net.ssl.internal.ssl.EngineOutputRecord 使用的内存

> ID：13641335
> 
> 赞同：2
> 
> 时间：2012-11-30T08:17:51.653
> 
> 标签：java, sockets, netty, ssl

我有一个 netty 应用程序提供由 TLS 加密的 keep-alive 套接字连接。当socket连接数增加到100000或更多时，使用的jvm内存超过2.5G。

根据mat的内存报告，EngineOutputRecord（如图）使用了大部分内存。据我所知，这是TLS握手的信息，握手后无用。我想清除字节，但找不到任何方法，这里有什么建议吗？ ![垫子报告](../Images/0c30a0f7b4bda71310ff89f80a7cbffc.png)

我的代码：

我的管道：

```
 @Override
public ChannelPipeline getPipeline() throws Exception {
    ChannelPipeline pipeline = Channels.pipeline();

    SSLEngine engine = SecurePushSslContextFactory.getServerContext()
            .createSSLEngine();
    engine.setUseClientMode(false);
    SslHandler sslHandler = new SslHandler(engine);

    pipeline.addLast("ssl", sslHandler);
    pipeline.addLast("framer", frame);
    pipeline.addLast("decoder", myDecoder);
    pipeline.addLast("handler", myHandler);

    return pipeline;
} 
```

启动网络：

```
 ChannelFactory channelFactory = new NioServerSocketChannelFactory(
            Executors.newFixedThreadPool(1), // BOSS EXECUTOR
            Executors.newCachedThreadPool() // WORKER EXECUTOR
    );
    ServerBootstrap bootstrap = new ServerBootstrap(channelFactory);
    bootstrap.setPipelineFactory(new SecurePushServerPipelineFactory());
    bootstrap.bind(new InetSocketAddress(port)); 
```

# android - 如何在 Google Play 中查看我的应用的星级？

> ID：13641342
> 
> 赞同：0
> 
> 时间：2012-11-30T08:18:41.513
> 
> 标签：android, google-api, google-play

我想在 Google Play 中查看用户对我的应用的星星投票。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:27:07.677

不幸的是，目前没有用于开发人员统计的 API。像[Andlyitics](https://play.google.com/store/apps/details?id=com.github.andlyticsproject&hl=en)这样的应用程序使用屏幕抓取，这就是为什么在控制台发生变化时必须更新它们的原因。

从那里播放商店页面：

> 请注意，Google 不提供稳定的 API 来获取下载和评分统计信息。因此，如果 Android Market 发生变化，Andlytics 可能无法正常工作。在这种情况下，请耐心等待我们努力赶上变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-03T09:44:38.833

一种方法是从位于 HTML 中的内联 JSON 中解析数据。`beautifulsoup`在 Python 中使用、`lxml`、`requests`库和正则表达式抓取应用程序评论计数和评级的示例方法。

[在线 IDE 中的](https://replit.com/@DimitryZub1/Scrape-Google-Play-Store-App-info-and-reviews#main.py)代码和完整示例：

```
# Super-Mario game is being scraped in this example:
# https://play.google.com/store/apps/details?id=com.nintendo.zara&gl=US

from bs4 import BeautifulSoup
import requests, lxml, re, json

params = {
    "id": "com.nintendo.zara", # app name
    "hl": "en",                # language
    "gl": "us"                 # country
}

headers = {
    "User-Agent":
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3538.102 Safari/537.36"
}

html = requests.get("https://play.google.com/store/apps/details", params=params, headers=headers, timeout=10)
soup = BeautifulSoup(html.text, "lxml")

# [12] index <script> position is not changing. Other <script> tags position are changing.
# [12] index is a basic app information.
# https://regex101.com/r/DrK0ih/1
basic_app_info = json.loads(re.findall(r"<script nonce=\".*\" type=\"application/ld\+json\">(.*?)</script>", str(soup.select("script")[12]), re.DOTALL)[0])

app_rating = round(float(basic_app_info["aggregateRating"]["ratingValue"]), 1)  # 4.287856 -> 4.3
app_reviews = basic_app_info["aggregateRating"]["ratingCount"]
print(app_rating, app_reviews, sep="\n")

# 4.0
# 1619960 
```

* * *

将搜索参数创建为字典：

```
# https://docs.python-requests.org/en/master/user/quickstart/#passing-parameters-in-urls
params = {
    "id": "com.nintendo.zara", # app name
    "hl": "en",                # language
    "gl": "us"                 # country
} 
```

创建标头以充当“真实”用户访问，以便 Google 不会立即将您的请求视为机器人请求：

```
# https://docs.python-requests.org/en/master/user/quickstart/#custom-headers
headers = {
    "User-Agent":
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3538.102 Safari/537.36"
} 
```

发出请求，将`params`和传递`headers`给请求并创建一个`BeautifulSoup`对象，其中 HTML 将被处理和解析：

```
html = requests.get("https://play.google.com/store/apps/details", params=params, headers=headers, timeout=10)
soup = BeautifulSoup(html.text, "lxml") 
```

*   [`lxml`是一个 XML/HTML 解析器](https://lxml.de/)。

查找标签，从所有基本应用信息所在的索引标签中`<scprit>`解析出需要的数据，然后通过正则表达式只解析JSON部分：`[12]``<scprit>`

```
# https://regex101.com/r/DrK0ih/1
basic_app_info = json.loads(re.findall(r"<script nonce=\".*\" type=\"application/ld\+json\">(.*?)</script>", str(soup.select("script")[12]), re.DOTALL)[0]) 
```

*   `json.loads()`将 JSON 字符串转换为 Python 字典。

通过正则表达式从实际 JSON 响应中解析数据比通过 CSS 选择器抓取更安全。CSS 选择器可能会更改，在这种情况下，您必须渲染页面以抓取数据，如果使用浏览器自动化，这将变得很慢。

访问数据并打印：

```
app_rating = round(float(basic_app_info["aggregateRating"]["ratingValue"]), 1)  # 4.287856 -> 4.3
app_reviews = basic_app_info["aggregateRating"]["ratingCount"]
print(app_rating, app_reviews, sep="\n")

# 4.0
# 1619960 
```

* * *

如果您想了解如何在 Python 中抓取更多数据，您可以阅读我的 Python博客文章中的[Scrape Google Play Store App 中的其余内容。](https://serpapi.com/blog/scrape-google-play-store-app-in-python/)

如果您想使用完整的解决方案，您可以使用免费[`google-play-scraper`的 Python](https://github.com/JoMingyu/google-play-scraper)或[`google-play-scraper`JavaScript](https://github.com/facundoolano/google-play-scraper)，或者来自 SerpAPI 的[Google Play Store API ，这是一个付费 API，具有免费计划，可以为用户处理抓取、绕过阻塞、缩放。](https://serpapi.com/google-play-api)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T08:32:09.513

这很简单。转到 Google Play 商店：https://play.google.com/store?hl=en

在顶部栏中搜索您的。如果你找到你的应用程序，你可以看到星星投票。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T08:26:27.543

去[https://play.google.com/store/apps/details?id=](https://play.google.com/store/apps/details?id=)

您将在页面右侧和底部找到评分。如果您想查看用户评论。单击描述上方显示的用户评论选项卡

# xpath - xpath，xquery：如何找到其后代为h的第一个条目标签？

> ID：13641344
> 
> 赞同：0
> 
> 时间：2012-11-30T08:18:53.230
> 
> 标签：xpath, xquery

我需要提取`<entry>`其后代`<h>`在 xml 文件中的第一个标签？我糟糕的代码是这样的：

```
$entry[1][//h] 
```

但我认为这行不通。或者这个怎​​么样？

```
$entry[descendant::h][1] 
```

示例.xml

```
<entry>
    <h>30</h>
</entry>
<entry>
    <m>50</m>
</entry>
<entry>
    <h>70</h>
</entry> 
```

我要这个：

```
<entry>
    <h>30</h>
</entry> 
```

这是因为那是第一个包含`<h>`标签作为其后代的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:23:13.563

这将查找`entry`具有后代的任何地方，`h`并返回第一个：

```
(//entry[.//h])[1] 
```

# mysql - Bundle Install 不会使用 Ruby 1.9.3、Rails3 和 Mac Mountain Lion 安装 mysql2 gem

> ID：13641347
> 
> 赞同：2
> 
> 时间：2012-11-30T08:19:07.450
> 
> 标签：mysql, ruby-on-rails, osx-mountain-lion

我无法使用 Ruby 1.9.3 和 Mountain Lion 运行 Ruby on Rails 捆绑安装。它不会安装 MySql2 gem。我在 Mac OS X Lion 上安装了 Ruby on Rails 大约 10 次，所以我非常熟悉这些步骤，但无法安装 MySQL gem。这是我得到的错误。提前致谢。

```
 Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

            /Users/username/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb 
    checking for rb_thread_blocking_region()... yes
    checking for rb_wait_for_single_fd()... yes
    checking for mysql.h... yes
    checking for errmsg.h... yes
    checking for mysqld_error.h... yes
    creating Makefile

    make
    compiling client.c
    In file included from client.c:1:
    In file included from ./mysql2_ext.h:8:
    In file included from /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby.h:32:
    /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby/ruby.h:105:37: error: 'ruby_check_sizeof_long' declared as an array with a negative size
    typedef char ruby_check_sizeof_long[SIZEOF_LONG == sizeof(long) ? 1 : -1];
                                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/x86_64-darwin12.2.0/ruby/config.h:24:21: note: expanded from macro 'SIZEOF_LONG'
    #define SIZEOF_LONG 8
                        ^
    In file included from client.c:1:
    In file included from ./mysql2_ext.h:8:
    In file included from /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby.h:32:
    /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby/ruby.h:109:38: error: 'ruby_check_sizeof_voidp' declared as an array with a negative size
    typedef char ruby_check_sizeof_voidp[SIZEOF_VOIDP == sizeof(void*) ? 1 : -1];
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/x86_64-darwin12.2.0/ruby/config.h:28:22: note: expanded from macro 'SIZEOF_VOIDP'
    #define SIZEOF_VOIDP 8
                         ^
    In file included from client.c:1:
    In file included from ./mysql2_ext.h:8:
    In file included from /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby.h:32:
    In file included from /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby/ruby.h:1382:
    In file included from /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby/intern.h:34:
    /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby/st.h:67:45: error: 'st_check_for_sizeof_st_index_t' declared as an array with a negative size
    typedef char st_check_for_sizeof_st_index_t[SIZEOF_VOIDP == (int)sizeof(st_index_t) ? 1 : -1];
                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    /Users/username/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/x86_64-darwin12.2.0/ruby/config.h:28:22: note: expanded from macro 'SIZEOF_VOIDP'
    #define SIZEOF_VOIDP 8
                         ^
    3 errors generated.
    make: *** [client.o] Error 1

    Gem files will remain installed in /Users/username/.rvm/gems/ruby-1.9.3-p327/gems/mysql2-0.3.11 for inspection.
    Results logged to /Users/username/.rvm/gems/ruby-1.9.3-p327/gems/mysql2-0.3.11/ext/mysql2/gem_make.out
    An error occurred while installing mysql2 (0.3.11), and Bundler cannot continue.
    Make sure that `gem install mysql2 -v '0.3.11'` succeeds before bundling. 
```

我试过 bundle install --path mysql 和 bundle install --system 都没有成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:51:06.657

这家伙有同样的问题：[无法安装mysql2 gem OS X Mountain Lion](https://stackoverflow.com/questions/11945425/unable-to-install-mysql2-gem-os-x-mountain-lion)

你用的是 brew 版本的 mysql 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:06:58.470

如果您使用的是 rvm，并且可能在 rvm 之外添加了 mysql2，请尝试以下步骤： 确认您的 Gemfile 显示：

> 宝石'mysql2'

或 Rails2.x：

> 宝石'mysql2'，'〜> 0.2.11'

然后：

```
 $ cd RAILS_ROOT $ gem uninstall mysql2

    Select gem to uninstall:
     1\. mysql2-0.2.11
     2\. mysql2-0.3.6
     3\. All versions
    > 3 # select "All versions" 
$ rvm gemset install mysql2
 $ bundle install 
```

现在rails应该可以正常启动了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T18:30:12.717

1）首先从终端安装自制软件： ruby​​ -e "$(curl -fsSL [https://raw.github.com/Homebrew/homebrew/go/install](https://raw.github.com/Homebrew/homebrew/go/install) )"

2）安装mysql：“brew install mysql” 3）安装mtsql2：“gem install mysql2”

它应该工作。

# html - 如何在 CSS 背景图像中提供不同尺寸的 SVG 图形？

> ID：13641349
> 
> 赞同：0
> 
> 时间：2012-11-30T08:19:11.547
> 
> 标签：html, css, svg, media-queries

我正在制作一个带有媒体查询的网站，以了解浏览器宽度何时<768px。

当浏览器 <768px 时，我想要一个 100x100 的 SVG 背景图像（我的徽标）定期缩小到 80x80。

这是否可以通过媒体查询减小 SVG 图形的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:37:23.070

是的，这是可能的，[这里](http://my.opera.com/ODIN/blog/2009/10/12/how-media-queries-allow-you-to-optimize-svg-icons-for-several-sizes)和[这里](http://jeremie.patonnier.net/experiences/svg/media-queries/test.html)有一些例子。

但是，如果您的意思是减小尺寸，您可能更多地谈论由 CSS 确定的尺寸，而不是 svg 本身（只要正确完成，svg 应该只重绘到 CSS 给出的区域）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:23:06.100

为您的徽标图像使用 % 宽度，以减少徽标的宽度和高度。

# ruby - 我在哪里需要 sinatra 设置？

> ID：13641354
> 
> 赞同：1
> 
> 时间：2012-11-30T08:19:29.557
> 
> 标签：ruby, sinatra, settings, require

我有一个由 3 个 sinatra 应用程序（模块化风格）组成的 sinatra 项目。我有我的设置`settings.rb`，我想将这些设置用于所有 3 个 sinatra 应用程序。

我在跑步`ruby 1.9.3p327`。

* * *

我的`settings.rb`：

```
#Environments: :production, :development
set :environment, ENV['RACK_ENV'] ||= "development".to_sym

disable :run      #disable internal webserver

configure :development do
  set :haml           ,  :format => :html5, :ugly => false
  enable :static
  enable :show_exceptions
  enable :raise_errors
end

configure :production do
  set :haml           ,  :format => :html5, :ugly => true
  disable :static
  disable :show_exceptions
  disable :raise_errors
end
####################### 
```

* * *

我的`config.ru`：

```
require 'sinatra'       #Web Framework
require 'haml'          #Haml Rendering for the views
require './db_setup.rb' #DB Setup
require './models.rb'   #DB Models
require './app1.rb'     #app1
require './app2.rb'     #app2
require './app3.rb'     #app3

map '/' do
  run App1
end

map '/app2' do
  run App2
end

map '/app3' do
  run App3
end 
```

* * *

我在哪里放置`require './settings.rb'`？

* * *

**适合的地方：**

在顶部的每个应用程序文件中，例如`app1.rb`

`Sinatra::Base`在作为父级的每个应用程序类中

在`config.ru`

* * *

我不知道为什么，但对我来说，它们都不起作用。唯一真正有效的是复制和粘贴`settings.rb`每个应用程序类中的内容。但这真的很脏，因为如果需要，我必须更改 3 个文件，例如，不同的`<DOCTYPE>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:58:45.697

**重写**

啊，所以问题实际上不在于require。正在发生的事情是`run`使用默认设置创建应用程序的新实例。应用程序不会“继承”`configure`调用，这些调用只是在非模块化应用程序上设置的；即您必须`configure`从应用程序的上下文中实际调用。

我只是用子类来做这个：

```
class BaseApp < Sinatra::Base
  set :environment, ENV['RACK_ENV'] ||= "development".to_sym
  #etc
end 
```

然后让它的所有应用程序子类化，比如

```
class App1 < BaseApp
   #your app
end 
```

# vb.net - 无法使用自定义字体 - “找不到文件”

> ID：13641358
> 
> 赞同：0
> 
> 时间：2012-11-30T08:19:33.377
> 
> 标签：vb.net, fonts, privatefontcollection

我在关注这个：http: [//zerosandtheone.com/blogs/vb/archive/2009/11/20/vb-net-include-a-font-as-an-embedded-resource-in-your-application.aspx](http://zerosandtheone.com/blogs/vb/archive/2009/11/20/vb-net-include-a-font-as-an-embedded-resource-in-your-application.aspx)允许我的应用程序在标签中使用自定义字体。问题是我可以在我的计算机上运行应用程序（可能是因为我安装了这个字体），当任何其他人在他的计算机上运行编译的应用程序时就会出现问题；出现异常捕获中的以下错误：`53 File doesn't exists`。

这个异常在哪里？

我说的是我上面链接的模块：

```
'MATTHEW KLEINWAKS
'ZerosAndTheOne.com
'2009
'CUSTOM FONT LOADED DYNAMICALLY FROM A RESOURCE

Imports System.Drawing.Text
Imports System.Runtime.InteropServices

Module CustomFont

    'PRIVATE FONT COLLECTION TO HOLD THE DYNAMIC FONT
    Private _pfc As PrivateFontCollection = Nothing

    Public ReadOnly Property GetInstance(ByVal Size As Single, _
                                         ByVal style As FontStyle) As Font
        Get
            'IF THIS IS THE FIRST TIME GETTING AN INSTANCE
            'LOAD THE FONT FROM RESOURCES
            If _pfc Is Nothing Then LoadFont()

            'RETURN A NEW FONT OBJECT BASED ON THE SIZE AND STYLE PASSED IN
            Return New Font(_pfc.Families(0), Size, style)

        End Get
    End Property

    Private Sub LoadFont()
        Try
            'INIT THE FONT COLLECTION
            _pfc = New PrivateFontCollection

            'LOAD MEMORY POINTER FOR FONT RESOURCE
            Dim fontMemPointer As IntPtr = _
                Marshal.AllocCoTaskMem( _
                My.Resources.DIGITALDREAMNARROW.Length)

            'COPY THE DATA TO THE MEMORY LOCATION
            Marshal.Copy(My.Resources.DIGITALDREAMNARROW, _
                         0, fontMemPointer, _
                         My.Resources.DIGITALDREAMNARROW.Length)

            'LOAD THE MEMORY FONT INTO THE PRIVATE FONT COLLECTION
            _pfc.AddMemoryFont(fontMemPointer, _
                               My.Resources.DIGITALDREAMNARROW.Length)

            'FREE UNSAFE MEMORY
            Marshal.FreeCoTaskMem(fontMemPointer)
        Catch ex As Exception
            MessageBox.Show(& Err.Number & " " & Err.Description)
        End Try

    End Sub

End Module 
```

正是这个：

```
 Catch ex As Exception
        MessageBox.Show(& Err.Number & " " & Err.Description)
    End Try 
```

正在显示包含消息的消息框`53 File doesn't exists`。

我真的不知道它为什么会发生，因为它可以在我的计算机上正常工作......我将不胜感激任何帮助尝试！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:46:13.427

尝试使用此代码

```
''' <summary>Adds the specified font to the private font collection.</summary>
''' <param name="font">The font to be added.</param>
Public Sub AddFont(ByVal font As Byte())
    If font Is Nothing Then Throw New ArgumentNullException("The font cannot be null.", "font")
    If font.Length = 0 Then Throw New ArgumentException("The length of the font array cannot be 0.", "font")
    Try
        privateFonts.AddMemoryFont(Marshal.UnsafeAddrOfPinnedArrayElement(font, 0), font.Length)
    Catch ex As Exception
        'handle you exceptions here
    End Try
End Sub 
```

并以这种方式将字体添加到集合中

```
Private Sub LoadFont()
    Try
        'INIT THE FONT COLLECTION
        privateFonts = New PrivateFontCollection
        AddFont(My.Resources.DIGITALDREAMNARROW)
    Catch

    '   
    ' the rest of your code
    '
End Sub 
```

假设您将字体资源作为文件添加，它将`AddFont`作为字节数组传递给方法。

不用说，该`AddFont`方法假定您有一个已初始化的 PrivateFontCollection 对象，该对象被调用`privateFonts`，可在该方法的范围内访问。

### 更新

既然你说我的解决方案不起作用，我在[这里](http://ge.tt/2COX9iS/v/0)上传了一个示例项目。下载并查看如何从资源中加载和使用私有字体。

# database-design - asp.net mvc 4 - 多用户类图

> ID：13641359
> 
> 赞同：0
> 
> 时间：2012-11-30T08:19:34.803
> 
> 标签：database-design, user-controls, asp.net-mvc-4, uml, class-diagram

我一直在搜索这个主题，但没有找到我想要的。基本上我开始计划一个包含所有 UML 内容、用例、类图等等的项目。然后我们决定使用 ASP.NET MVC。该应用程序是一种 O-Desk 或 Elance

我有用户、承包商、公司、版主和管理员。

我有点困惑模型应该如何表示这个用户以及如何使用 asp.net mvc 功能设置权限和角色。

在一个普通的应用程序中，我会为他们每个人设置一个类，并且他们可能会扩展 User，它会有用户名、密码和电子邮件。

在承包商课程中，我拥有有关承包商的所有信息，例如他申请的工作、他的简历等。

在公司类中，我发布了报价、公司名称等。

那么最好的做法是什么？我这里有一段代码

```
 public class User
 {
    [Key]
    public string UserID { get; set; }

    [Required(ErrorMessage = "Email is required")]
    [DataType(DataType.EmailAddress, ErrorMessage="Email Format is wrong. Example: user@user.com")]
    [Remote("doesEmailExist", "Contractors", HttpMethod = "POST", ErrorMessage = "Email already exists. Please enter a different one.")]
    public string Email { get; set; }

    [Required]
    [Remote("doesUserNameExist", "Contractors", HttpMethod = "POST", ErrorMessage = "User name already exists. Please enter a different user name.")]
    public string Username { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    public string Password { get; set; }
} 
```

还有一点疑问，我应该有 ContractorID 吗？或者我抓住用户ID？只是问，因为我不知道数据库在生成后会是什么样子。无论如何，我现在要试试这个。

```
public class Contractor extends User
{
    [Key]
    public int ContractorID { get; set; }

    [Required(ErrorMessage = "First Name is required")]
    [StringLength(20, ErrorMessage = "First Name max length is 20 characters")]
    [Display(Name = "First Name")]
    public string FirstName { get; set; }

    [Required(ErrorMessage = "Last Name is required")]
    [StringLength(20, ErrorMessage = "First Name max length is 20 characters")]
    [Display(Name = "Last Name")]
    public string LastName { get; set; }
}

public class Company extends User
{
    [Key]
    public int CompanyID { get; set; }

    [Required(ErrorMessage = "Name of the Company required")]
    public string CompanyName { get; set; }

    private List<Offer> Offers;

    public void AddOffer (Offer offer) {
        Offers.Add(offer);
    }
    public void RemoveOffer(Offer offer)
    {
        Offers.Remove(offer);
    } 
```

}

感谢您提供的任何帮助或提示！问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:11:15.810

我会避免用模型做所有事情。模型用于数据事务，需要反映您的数据库。

你有两件事。-一个是模型，您可以使用它来存储原始状态的数据 -另一个是您需要显示该信息的视图

那么该怎么办？？很简单，先做de model，做viewModel。viewModel 将反映视图及其规则，因此每个视图和局部视图都有一个。让它变得简单，按照它写在那里的方式使用你的模型，但去掉视图中的东西（exe：[Required(ErrorMessage = "Last Name is required")]），因为你将创建另一个类来保存这些东西，例如，您可以制作一个显示 2 种类型用户的视图，为此您可以制作如下内容：

```
public class CompanyView
{
    private company= new Company();
    private contractor = new Contractor();

    [Display(Name = "Contractor Name")]
    public string ContractorName{ get{return contractor.FisrtName+ contractor.LastName;} }

    public int CompanyID { get{return company.CompanyID;} set{company.CompanyID = value;}}

    [Required(ErrorMessage = "Name of the Company required")]
    public string CompanyName { get{return company.CompanyName;} set{company.CompanyName = value;}}

    private List<Offer> offers;
    public SelectList Offers{ get { return new SelectList(offers, "OfferID", "OfferName", ""); } }

} 
```

或类似的东西。关键是您现在可以创建一个类来表示与您在数据库中看到的完全相同的视图。这样做，您可以扩展视图并制作一些使用您的模型的东西，以使某些东西对用户可见并自动填充。例如，当用户发布带有视图信息的表单时，将返回已填充的 ViewModel。他们可以使用视图模型中已填充的模型作为私有模型来保存您需要的任何内容。

请注意，我注意到在视图模型中使用了所有承包商字段。想象一下，当您更改公司详细信息时，您只需要显示一些承包商名称。在这种情况下，你不会从承包商那里保存任何东西，你只需要显示他的名字，并且在视图模型中你只需要输入他的名字来显示，你不需要所需的验证等。只需显示它是 enouth。数据将来自一个查询，您可以在创建视图模型时将其填充到构造函数、工厂或任何您想要的内容中。

这很令人困惑，但我希望它有所帮助，如果您不理解某些内容，我稍后会尝试使其变得更好。也对不起“如此”的英语

# php - 数组中的实数序列

> ID：13641361
> 
> 赞同：-3
> 
> 时间：2012-11-30T08:19:53.747
> 
> 标签：php, arrays, sorting

我有几个数组如下：

```
$number1 = array('A', 0.42);
$number2 = array('B', 0.44);
$number3 = array('C', 0.41);
$number4 = array('D', 0.43); 
```

我想显示这样的结果：

```
0.41
0.42
0.43
0.44 
```

如何显示这样的结果？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:23:32.417

如果你这样做：

```
echo $number3[1], "\n";
echo $number1[1], "\n";
echo $number4[1], "\n";
echo $number2[1], "\n"; 
```

你会得到

```
0.41
0.42
0.43
0.44 
```

但是如果你想学习一些关于排序[的知识，你应该阅读手册](http://php.net/manual/en/array.sorting.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:26:54.387

您使用数据和数组的方式是错误的。如果明天你还有 500 个数字要排序怎么办？

您应该有一个包含所有值的数组。

```
<?
$data = array(
  "A" => 0.45,
  "B" => 0.43,
  "C" => 0.41,
  "D" => 0.42
);

asort($data);
foreach ($data as $key => $val) {
    echo "$key = $val\n";
}
?> 
```

应该打印类似的东西

```
C = 0.41
D = 0.42
B = 0.43
A = 0.45 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T08:27:01.050

就我个人而言，我会将该代码压缩到一个数组中，这将允许一个很好的 for / foreach 循环和排序：

```
$numbers = array(
    'A' => 0.42,
    'B' => 0.44,
    'C' => 0.41,
    'D' => 0.43
);

asort($numbers);

foreach ($numbers as $number)
{
    echo $number . '<br />';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T08:37:43.833

您**无需**重新制作阵列。您可以使用双精度`$$`。这将不会打印变量，但会尝试访问存储在值中的变量。

像这样：

```
$number1 = array('A', 0.42);
$number2 = array('B', 0.44);
$number3 = array('C', 0.41);
$number4 = array('D', 0.43);

$k = 1;
$name = 'number' . $k;
while ( isset($$name) )
{
    $tmp = $$name;
    echo $tmp[1] . '<br/>';
    $k++;
    $name = 'number' . $k;
} 
```

# iphone - 通过单击按钮替换滑动操作以删除

> ID：13641362
> 
> 赞同：3
> 
> 时间：2012-11-30T08:19:55.740
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个表格视图，每个单元格上有一个标签和两个按钮。目前我有这个代码可以滑动删除。

```
- (void) tableView: (UITableView *) tableView commitEditingStyle: (UITableViewCellEditingStyle) editingStyle forRowAtIndexPath: (NSIndexPath *) indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [appointments removeObjectAtIndex: indexPath.row];  // manipulate your data structure.
        [tableView deleteRowsAtIndexPaths: [NSArray arrayWithObject: indexPath]
                         withRowAnimation: UITableViewRowAnimationFade];
       NSLog(@"row deleted");  // Do whatever other UI updating you need to do.
    }
} 
```

当我滑动时，这段代码就会执行。但我希望它在按下按钮时执行。该按钮与以下 IBAction 链接。

```
- (IBAction)deleteRow:(id)sender {
  //Delete row
} 
```

要记住一件事。我希望删除按钮像滑动删除时一样滑动。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:28:21.737

如果您的按钮在单元格中，您可以将其 tag 属性设置为 indexPath.row 值，并通过为目标分配 deleteRow:(id)sender 方法 `-(void)addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents`为了让按钮滑动，您可能需要实现 panGestureRecognizer。我可能错了，但这个想法应该是检测触摸位置并滑动按钮（在滑动时设置它的框架）。如果您打算通过滑动按钮进行删除，您可能需要禁用在表格上滑动删除。

# javascript - 如何在 drop 函数中跟踪可拖动 div id 的 id

> ID：13641367
> 
> 赞同：0
> 
> 时间：2012-11-30T08:20:24.363
> 
> 标签：javascript, html

我必须使用 javascript 在 drop 函数中找到可拖动 div 的 id。使用 Jquery 我知道如何找到它。但是我陷入了一种情况，即拖放功能中需要拖动事件的 id。在拖动功能中，我可以通过使用获取 id， `alert("id "+obj.id)`但请帮助我在使用 javascript 的放置功能中找到它。

这是代码

```
function allowDrop(ev)
{
    ev.preventDefault();
}

function drag(ev, obj)
{
    ev.dataTransfer.setData("Text",ev.target.id);
    alert("id "+obj.id)
}

function drop(ev)
{
    farea1[i] = x[0].getElementsByTagName("termTxt")[i].getAttribute("correctCat");

    ev.preventDefault();
    var data=ev.dataTransfer.getData("Text");
    ev.target.appendChild(document.getElementById(data));

    i++;
    display();

    if(ev.target.id == "area1"){
        fans1[n]=farea1[k];
        k++;
        n++;
        countarea1++;   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:25:37.957

使用此函数查找可放置的 id

```
$(function() {

        $( "#droppable" ).droppable({
            drop: function( event, ui ) {
                $( this ).html( "Dropped in " + this.id );
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:27:01.693

您应该能够通过以下方式获取该目标 div ID：

```
 $(".droppable").droppable({
        drop: function(event, ui) {
            $('.display').html("Dropped in " + this.id);
        },
        over: function(event, ui) {
            $('.display').html( this.id );
        }
    }); 
```

# java - 无法使用 java 将 xml 转换为 json

> ID：13641368
> 
> 赞同：1
> 
> 时间：2012-11-30T08:20:42.547
> 
> 标签：java, xml, json, xml-parsing

**我有xml文件，我需要转换成json。json输出是xml的部分转换，而不是整个xml被转换..**

您可以找到 json 输出的原因，只有部分被转换。其余部分省略。

```
<?xml version="1.0"?>
<ASF_Service_ResponseVO typesig="155c0afe34b" id="1">
    <service type="String">OnboardingV2</service>
    <operation type="String">start_onboarding_session</operation>
    <requested_version type="String">1.0</requested_version>
    <actual_version type="String">1.0</actual_version>
    <server_info type="String">onboardingv2serv:start_onboarding_session&amp;CalThreadId=85&amp;TopLevelTxnStartTime=13b40fe91c4&amp;Host=L-BLR-00438534&amp;pid=3564</server_info>
    <result typesig="fff96cab366a5def" type="Onboarding::StartOnboardingSessionResponse" id="2">
        <onboarding_id type="String">137</onboarding_id>
        <success type="bool">true</success>
    </result>
</ASF_Service_ResponseVO> 
```

## 将 XML 转换为 JSON.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javasample1;

//import net.sf.json.JSON;
//import net.sf.json.JSONObject; 
//import net.sf.json.xml.XMLSerializer;
import org.json.JSONObject;
import org.json.JSONException;
import org.json.XML;
import java.io.*;
/**
 *
 * @author gopc
 */
    public class ConvertXMLtoJSON{

        public static void main(String[] args) throws Exception 
        {
            try
            {

                File file = new File ("C:\\Users\\gopc\\Documents\\NetBeansProjects\\JavaSample1\\src\\javasample1\\Sample1.xml");
                InputStream inputStream = new FileInputStream(file);
                StringBuilder builder =  new StringBuilder();
                int ptr = 0;
                while ((ptr = inputStream.read()) != -1 )
                {
                    builder.append((char) ptr);
                }

                String xml  = builder.toString();
                JSONObject jsonObj = XML.toJSONObject(xml); 
                System.out.println(jsonObj);

                /*
                String xmlString  = "<?xml version=\"1.0\"?><ASF_Service_ResponseVO id=\"1\"><service type=\"String\">OnboardingV2</service><operation type=\"String\">start_onboarding_session</operation><requested_version type=\"String\">1.0</requested_version><actual_version type=\"String\">1.0</actual_version><server_info type=\"String\">onboardingv2serv:start_onboarding_session&amp;CalThreadId=85&amp;TopLevelTxnStartTime=13b40fe91c4&amp;Host=L-BLR-00438534&amp;pid=3564</server_info><result type=\"Onboarding::StartOnboardingSessionResponse\" id=\"2\"><onboarding_id type=\"String\">137</onboarding_id><success type=\"bool\">true</success></result></ASF_Service_ResponseVO>";

                JSONObject jsonObj = XML.toJSONObject(xmlString); 
                System.out.println(jsonObj.toString()); 
                */
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }
} 
```

## 输出

```
run:
{"ASF_Service_ResponseVO":{"server_info":{"content":"onboardingv2serv:start_onboarding_session&CalThreadId=85&TopLevelTxnStartTime=13b40fe91c4&Host=L-BLR-00438534&pid=3564","type":"String"},"result":{"id":2,"typesig":"fff96cab366a5def","onboarding_id":{"content":137,"type":"String"},"type":"Onboarding::StartOnboardingSessionResponse","success":{"content":true,"type":"bool"}},"operation":{"content":"start_onboarding_session","type":"String"},"requested_version":{"content":1,"type":"String"},"service":{"content":"OnboardingV2","type":"String"},"actual_version":{"content":1,"type":"String"}}} 
```

构建成功（总时间：0 秒）

生成的 JSON 对象格式为：

```
{
    "ASF_Service_ResponseVO": {
        "server_info": {
             "content":"onboardingv2serv:start_onboarding_session&CalThreadId=85&TopLevelTxnStartTime=13b40fe91c4&Host=L-BLR-00438534&pid=3564",
             "type":"String"
        },
        "result": {
            "id":2,
            "typesig":"fff96cab366a5def",
            "onboarding_id": {
                 "content":137,
                 "type":"String"
            },
            "type":"Onboarding::StartOnboardingSessionResponse",
            "success": {
                "content":true,
                "type":"bool"
            }
        },
        "operation": {
            "content":"start_onboarding_session",
            "type":"String"
        },
        "requested_version":{
            "content":1,
            "type":"String"
        },
        "service":{
            "content":"OnboardingV2",
            "type":"String"},
        }
        "actual_version":{
             "content":1,
             "type":"String"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:33:23.817

如果你不期望xml的顺序相同，下面是输出的json

```
{
    "ASF_Service_ResponseVO":{
        "server_info":{
            "content":"onboardingv2serv:start_onboarding_session&CalThreadId=85&TopLevelTxnStartTime=13b40fe91c4&Host=L-BLR-00438534&pid=3564",
            "type":"String"
        },
        "id":"1",
        "result":{
            "id":"2",
            "typesig":"fff96cab366a5def",
            "onboarding_id":{
                "content":"137",
                "type":"String"
            },
            "type":"Onboarding::StartOnboardingSessionResponse",
            "success":{
                "content":"true",
                "type":"bool"
            }
        },
        "operation":{
            "content":"start_onboarding_session",
            "type":"String"
        },
        "requested_version":{
            "content":"1.0",
            "type":"String"
        },
        "typesig":"155c0afe34b",
        "service":{
            "content":"OnboardingV2",
            "type":"String"
        },
        "actual_version":{
            "content":"1.0",
            "type":"String"
        }
    }
} 
```

# c# - 实体在尝试使用 EF 执行 INSERT 时有一些无效参数

> ID：13641371
> 
> 赞同：0
> 
> 时间：2012-11-30T08:20:46.500
> 
> 标签：c#, entity-framework

我找不到使用 EF 执行插入语句的方法。

出现了很多错误。

代码都在这里，问题出在控制器上：我已经尝试过：

```
context.sistema_UsersCertified.Add(uc);
context.Set<sistema_UsersCertified>().Add(uc); 
```

它说 sistema_UsersCertified 有一些无效的参数

为什么？

**这是我的数据库上下文：**

```
public partial class tgpwebgedEntities : DbContext
{
    public tgpwebgedEntities()
        : base("name=tgpwebgedEntities")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<sistema_UsersCertified> sistema_UsersCertified { get; set; }

} 
```

该表有 4 个列：id(int)、userID(Guid)、certTypeID(int)、keyNumber(string)

**所以我在该表中创建了一个模型：**

```
 public class UsersCertified
{
    public Guid userId;
    public int certTypeId;
    public string keyNumber;

    public UsersCertified(Guid uId, int ctId, string kn) {
        userId = uId;
        certTypeId = ctId;
        keyNumber = kn;
    }
} 
```

**我有一个将数据发送到控制器的视图：**

```
<table>
                    <tr>
                    <td style="font-size:10px;">Habilitar Login com Cert. Digital:</td>
                    <td>@Html.CheckBoxFor(m => m.isCertified)</td>
                    </tr>
                    <tr>
                        <td class="smallField">Tipo do Certificado:</td>
                        <td>@Html.DropDownListFor(m => m.certType, new SelectList(ViewBag.certType, "id","type"))</td>
                    </tr>
                    <tr>
                        <td>Identificação:</td>
                        <td>@Html.TextBoxFor(m => m.identifier, new { @class = "validate[required]" }) @Html.ValidationMessage("awnserVal", "*")</td>
                    </tr> 
                </table> 
```

**最后一个..我的控制器：**

```
using (tgpwebgedEntities context = new tgpwebgedEntities()) {
                {
 var userID = from u in context.aspnet_Users where u.UserName == model.UserName select u.UserId;
                    Guid uID = userID.First();
UsersCertified uc = new UsersCertified(uID, model.certType, model.identifier);

//HERE I NEED SET MY TABLE WITH MY MODEL... BUT SO MANY ERROR

   context.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:37:08.160

哦，我认为您可能正在创建一个 UsersCertified 类型的模型，然后尝试将其保存为 sistema_UsersCertified 类型的数据库实体。

尝试

```
sistema_UsersCertified dbEntity = new sistema_UsersCertified();
dbEntity.CertType = ...
context.sistema_UsersCertified.Add(dbEntity); 
```

# php - 来自多个表的 mysql_num_rows

> ID：13641373
> 
> 赞同：2
> 
> 时间：2012-11-30T08:21:09.240
> 
> 标签：php, mysql

我正在计算 5 个表中的字段数量并显示结果。我目前为单个表执行此操作

```
 $variable = mysql_num_rows(mysql_query("SELECT id FROM table1")); 
```

包含和计数所有`id`来自`table2`、`table3`和的最有效方法是什么？`table4``table5`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:24:25.270

用于`UNION ALL`组合`SELECT`对所有表的查询，以获取所有表的 ID 总数。改为使用从所有表中获取 ID`UNION`总数。`distinct`

```
$variable = mysql_num_rows(mysql_query("
    "SELECT id FROM table1 " .
    "UNION ALL " .
    "SELECT id FROM table2 " .
    "UNION ALL " .
    "SELECT id FROM table3 " .
    "UNION ALL " .
    "SELECT id FROM table4 " .
    "UNION ALL " .
    "SELECT id FROM table5")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:26:14.500

不要从您的数据库中获取所有行，只需获取 id 的数量。让 MySQL 计数而不是 PHP。

```
 $variable1 = mysql_query("SELECT COUNT(id) FROM table1");
    $variable2 = mysql_query("SELECT COUNT(id) FROM table2");
    $variable3 = mysql_query("SELECT COUNT(id) FROM table3");
    $variable4 = mysql_query("SELECT COUNT(id) FROM table4");
    $variable5 = mysql_query("SELECT COUNT(id) FROM table5");

    $variable = $variable1 + $variable2 + $variable3 + $variable4 +$variable5; 
```

不要进行 UNION 或 JOIN ，如果您只需要计数，这是一项重量级的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:26:58.457

`SELECT count(t1.id)+count(t2.id)+count(t3.id)+count(t4.id)+count(t5.id) from table1 as t1, table2 as t2, table3 as t3, table4 as t4, table5 as t5`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T08:25:31.880

尝试这样的联合语法：

```
$variable = mysql_num_rows(mysql_query("
SELECT * FROM(
  SELECT id FROM table1
  UNION
  SELECT id FROM table2
  UNION
  SELECT id FROM table3
  UNION
  SELECT id FROM table4
  UNION
  SELECT id FROM table5
)unionNum
")); 
```

完结，祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T08:26:13.500

第一种方法：

```
$query = mysql_query("
    select * from(
        SELECT id FROM table1
        union
        SELECT id FROM table2
        union
        SELECT id FROM table3
        union
        SELECT id FROM table4
    )
");
while ($row = mysql_fetch_assoc($query)) {
    //some operations
}
$variable = mysql_num_rows($query); 
```

第二种方法：

```
$query = mysql_query("
    select count(*) cnt from(
        SELECT id FROM table1
        union
        SELECT id FROM table2
        union
        SELECT id FROM table3
        union
        SELECT id FROM table4
    )
");

while ($row = mysql_fetch_assoc($query)) {
    $variable = $query['cnt'];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T08:22:53.047

```
SELECT COUNT(id) FROM table2 
```

等等

# c - 如何检测堆栈粉碎错误的违规代码

> ID：13641379
> 
> 赞同：5
> 
> 时间：2012-11-30T08:21:52.940
> 
> 标签：c, debugging, gdb, stack, watchpoint

在一个复杂的程序中，我遇到了一个堆栈粉碎错误，粘贴在下面。我很难找出它发生在哪里。我使用 printf-debugging 找到了该函数，并注意到检查实际上是在函数返回期间发生的（执行 return 之前的 printf，函数调用之后的那个不是）。

但是，这是一个巨大的功能。我已经阅读了所有内容，但没有注意到其中有任何堆栈溢出机会。因此，我需要更好地估计错误在哪里。我该如何进一步调试呢？

我认为如果我可以在堆栈粉碎检测内存上添加一个调试器观察点将是最简单的，因此它会在粉碎时中断执行，而不是在函数返回时中断执行。如果是这样，我怎么知道这是哪个内存？

对于那些想要查看源代码的人，我建议在 Stack Overflow 上查看任何堆栈粉碎问题。如果您真的想查看我正在使用的代码，请获取 freedink 源代码（有问题的函数是 updateFrame）。

**更新**

在 gcc-patches 列表中，这个问题是在 2009 年[讨论](http://gcc.gnu.org/ml/gcc-patches/2009-08/msg01510.html)的。不过似乎还没有得出结论。至少当我在 gdb 中说“信息本地人”时，我没有看到任何名称出现（正如该线程中某处所建议的那样）。如果有人能告诉我如何找到它`__stack_guard__`（这不起作用，因为它被拒绝了），那将回答我的问题。

**下次更新**

好的，经过大量搜索，我发现了一些完全出乎意料的东西。从堆栈回溯中可以看出，退出 libSDL 函数时会检测到堆栈粉碎。现在通常 SDL 功能可以正常工作，而 freedink 充满了错误。所以我什至不认为我会在 SDL 中遇到错误。然而，我似乎做到了。它正在尝试播放 MIDI 文件。如果我将不同的 midi 文件复制到它的位置，则程序可以正常工作。

所以我目前的问题解决了，但我的问题仍然没有回答。尽管堆栈回溯确实指向堆栈被破坏的函数（因此它比我想象的更有用），但它没有为守卫提供地址，这也可能有用（用于设置观察点）。

```
*** stack smashing detected ***: freedink terminated
======= Backtrace: =========
/lib/i386-linux-gnu/i686/cmov/libc.so.6(__fortify_fail+0x50)[0xb754c3f0]
/lib/i386-linux-gnu/i686/cmov/libc.so.6(+0xea39a)[0xb754c39a]
/usr/lib/i386-linux-gnu/libSDL_mixer-1.2.so.0(+0x1c524)[0xb771f524]
/usr/lib/i386-linux-gnu/libSDL_mixer-1.2.so.0(+0x17443)[0xb771a443]
======= Memory map: ========
08048000-0808b000 r-xp 00000000 08:02 4333161    /usr/games/freedink
0808b000-0808c000 rw-p 00042000 08:02 4333161    /usr/games/freedink
0808c000-0841d000 rw-p 00000000 00:00 0
09fa9000-0b2de000 rw-p 00000000 00:00 0          [heap]
afda8000-b09e5000 rw-p 00000000 00:00 0
b0a00000-b0a21000 rw-p 00000000 00:00 0
b0a21000-b0b00000 ---p 00000000 00:00 0
b0ba7000-b0bc3000 r-xp 00000000 08:02 6422698    /lib/i386-linux-gnu/libgcc_s.so.1
b0bc3000-b0bc4000 rw-p 0001b000 08:02 6422698    /lib/i386-linux-gnu/libgcc_s.so.1
b0bea000-b0bec000 rw-p 00000000 00:00 0
b0bec000-b0bed000 r--p 00000000 08:02 4361451    /usr/share/locale/nl/LC_MESSAGES/freedink.mo
b0bed000-b0e69000 rw-p 00000000 00:00 0
b0ea2000-b127f000 rw-p 00000000 00:00 0
b12d7000-b12f0000 rw-p 00000000 00:00 0
b130e000-b1330000 r--p 00000000 08:02 4348594    /usr/share/locale/nl/LC_MESSAGES/libc.mo
b13a1000-b13dd000 rw-p 00000000 00:00 0
b13fa000-b13fb000 ---p 00000000 00:00 0
b13fb000-b1bfb000 rw-p 00000000 00:00 0
b1bfb000-b1c05000 r--p 00000000 08:02 4355730    /usr/share/locale/nl/LC_MESSAGES/pulseaudio.mo
b1c05000-b5c06000 rw-s 00000000 00:11 1297260    /run/shm/pulse-shm-3619928632
b5c06000-b5c9f000 rw-p 00000000 00:00 0
b5c9f000-b5dcb000 rw-s 00000000 00:04 1900555    /SYSV00000000 (deleted)
b5dcb000-b5e22000 rw-p 00000000 00:00 0
b5e35000-b5ecd000 rw-p 00000000 00:00 0
b5ecd000-b5ed2000 r-xp 00000000 08:02 4332397    /usr/lib/i386-linux-gnu/libXfixes.so.3.1.0
b5ed2000-b5ed3000 rw-p 00004000 08:02 4332397    /usr/lib/i386-linux-gnu/libXfixes.so.3.1.0
b5ed3000-b5edb000 r-xp 00000000 08:02 4342806    /usr/lib/i386-linux-gnu/libXrender.so.1.3.0
b5edb000-b5edc000 rw-p 00008000 08:02 4342806    /usr/lib/i386-linux-gnu/libXrender.so.1.3.0
b5edc000-b5ee5000 r-xp 00000000 08:02 4336027    /usr/lib/i386-linux-gnu/libXcursor.so.1.0.2
b5ee5000-b5ee6000 rw-p 00009000 08:02 4336027    /usr/lib/i386-linux-gnu/libXcursor.so.1.0.2
b5ee6000-b5ee7000 ---p 00000000 00:00 0
b5ee7000-b66e7000 rw-p 00000000 00:00 0
b66e7000-b685e000 r--p 00000000 08:02 4338396    /usr/lib/locale/locale-archive
b685e000-b6862000 rw-p 00000000 00:00 0
b6862000-b6872000 r-xp 00000000 08:02 6554164    /lib/i386-linux-gnu/i686/cmov/libresolv-2.13.so
b6872000-b6873000 r--p 00010000 08:02 6554164    /lib/i386-linux-gnu/i686/cmov/libresolv-2.13.so
b6873000-b6874000 rw-p 00011000 08:02 6554164    /lib/i386-linux-gnu/i686/cmov/libresolv-2.13.so
b6874000-b6876000 rw-p 00000000 00:00 0
b6876000-b69dc000 r-xp 00000000 08:02 4327161    /usr/lib/i386-linux-gnu/libvorbisenc.so.2.0.8
b69dc000-b69ed000 r--p 00165000 08:02 4327161    /usr/lib/i386-linux-gnu/libvorbisenc.so.2.0.8
b69ed000-b69ee000 rw-p 00176000 08:02 4327161    /usr/lib/i386-linux-gnu/libvorbisenc.so.2.0.8
b69ee000-b69ef000 rw-p 00000000 00:00 0
b69ef000-b6a02000 r-xp 00000000 08:02 6554172    /lib/i386-linux-gnu/i686/cmov/libnsl-2.13.so
b6a02000-b6a03000 r--p 00012000 08:02 6554172    /lib/i386-linux-gnu/i686/cmov/libnsl-2.13.so
b6a03000-b6a04000 rw-p 00013000 08:02 6554172    /lib/i386-linux-gnu/i686/cmov/libnsl-2.13.so
b6a04000-b6a06000 rw-p 00000000 00:00 0
b6a06000-b6a14000 r-xp 00000000 08:02 4334619    /usr/lib/i386-linux-gnu/libXi.so.6.1.0
b6a14000-b6a15000 rw-p 0000d000 08:02 4334619    /usr/lib/i386-linux-gnu/libXi.so.6.1.0
b6a15000-b6a19000 r-xp 00000000 08:02 6422575    /lib/i386-linux-gnu/libuuid.so.1.3.0
b6a19000-b6a1a000 r--p 00003000 08:02 6422575    /lib/i386-linux-gnu/libuuid.so.1.3.0
b6a1a000-b6a1b000 rw-p 00004000 08:02 6422575    /lib/i386-linux-gnu/libuuid.so.1.3.0
b6a1b000-b6a20000 r-xp 00000000 08:02 4331837    /usr/lib/i386-linux-gnu/libXdmcp.so.6.0.0
b6a20000-b6a21000 rw-p 00004000 08:02 4331837    /usr/lib/i386-linux-gnu/libXdmcp.so.6.0.0
b6a21000-b6a23000 r-xp 00000000 08:02 4330387    /usr/lib/i386-linux-gnu/libXau.so.6.0.0
b6a23000-b6a24000 rw-p 00001000 08:02 4330387    /usr/lib/i386-linux-gnu/libXau.so.6.0.0
b6a24000-b6a25000 rw-p 00000000 00:00 0
b6a25000-b6a29000 r-xp 00000000 08:02 6423604    /lib/i386-linux-gnu/libattr.so.1.1.0
b6a29000-b6a2a000 r--p 00003000 08:02 6423604    /lib/i386-linux-gnu/libattr.so.1.1.0
b6a2a000-b6a2b000 rw-p 00004000 08:02 6423604    /lib/i386-linux-gnu/libattr.so.1.1.0
b6a2b000-b6a30000 r-xp 00000000 08:02 4331630    /usr/lib/i386-linux-gnu/libasyncns.so.0.3.1
b6a30000-b6a31000 rw-p 00004000 08:02 4331630    /usr/lib/i386-linux-gnu/libasyncns.so.0.3.1
b6a31000-b6a9e000 r-xp 00000000 08:02 4375323    /usr/lib/i386-linux-gnu/libsndfile.so.1.0.25
b6a9e000-b6aa0000 r--p 0006c000 08:02 4375323    /usr/lib/i386-linux-gnu/libsndfile.so.1.0.25
b6aa0000-b6aa1000 rw-p 0006e000 08:02 4375323    /usr/lib/i386-linux-gnu/libsndfile.so.1.0.25
b6aa1000-b6aa5000 rw-p 00000000 00:00 0
b6aa5000-b6aad000 r-xp 00000000 08:02 6422615    /lib/i386-linux-gnu/libwrap.so.0.7.6
b6aad000-b6aae000 r--p 00007000 08:02 6422615    /lib/i386-linux-gnu/libwrap.so.0.7.6
b6aae000-b6aaf000 rw-p 00008000 08:02 6422615    /lib/i386-linux-gnu/libwrap.so.0.7.6
b6aaf000-b6ab4000 r-xp 00000000 08:02 4331851    /usr/lib/i386-linux-gnu/libXtst.so.6.1.0
b6ab4000-b6ab5000 rw-p 00004000 08:02 4331851    /usr/lib/i386-linux-gnu/libXtst.so.6.1.0
b6ab5000-b6ab6000 rw-p 00000000 00:00 0
b6ab6000-b6abd000 r-xp 00000000 08:02 4332239    /usr/lib/i386-linux-gnu/libSM.so.6.0.1
b6abd000-b6abe000 rw-p 00006000 08:02 4332239    /usr/lib/i386-linux-gnu/libSM.so.6.0.1
b6abe000-b6ad4000 r-xp 00000000 08:02 4332225    /usr/lib/i386-linux-gnu/libICE.so.6.3.0
b6ad4000-b6ad6000 rw-p 00015000 08:02 4332225    /usr/lib/i386-linux-gnu/libICE.so.6.3.0
b6ad6000-b6ad7000 rw-p 00000000 00:00 0
b6ad7000-b6ad8000 r-xp 00000000 08:02 4326690    /usr/lib/i386-linux-gnu/libX11-xcb.so.1.0.0
b6ad8000-b6ad9000 rw-p 00000000 08:02 4326690    /usr/lib/i386-linux-gnu/libX11-xcb.so.1.0.0
b6ad9000-b6af6000 r-xp 00000000 08:02 6423599    /lib/i386-linux-gnu/libtinfo.so.5.9
b6af6000-b6af8000 r--p 0001c000 08:02 6423599    /lib/i386-linux-gnu/libtinfo.so.5.9
b6af8000-b6af9000 rw-p 0001e000 08:02 6423599    /lib/i386-linux-gnu/libtinfo.so.5.9
b6af9000-b6b2a000 r-xp 00000000 08:02 6423581    /lib/i386-linux-gnu/libncursesw.so.5.9
b6b2a000-b6b2b000 r--p 00030000 08:02 6423581    /lib/i386-linux-gnu/libncursesw.so.5.9
b6b2b000-b6b2c000 rw-p 00031000 08:02 6423581    /lib/i386-linux-gnu/libncursesw.so.5.9
b6b2c000-b6b2d000 rw-p 00000000 00:00 0
b6b2d000-b6c15000 r-xp 00000000 08:02 6423605    /lib/i386-linux-gnu/libslang.so.2.2.4
b6c15000-b6c17000 r--p 000e8000 08:02 6423605    /lib/i386-linux-gnu/libslang.so.2.2.4
b6c17000-b6c26000 rw-p 000ea000 08:02 6423605    /lib/i386-linux-gnu/libslang.so.2.2.4
b6c26000-b6c60000 rw-p 00000000 00:00 0
b6c60000-b6c81000 r-xp 00000000 08:02 4331073    /usr/lib/i386-linux-gnu/libxcb.so.1.1.0
b6c81000-b6c82000 r--p 00020000 08:02 4331073    /usr/lib/i386-linux-gnu/libxcb.so.1.1.0
b6c82000-b6c83000 rw-p 00021000 08:02 4331073    /usr/lib/i386-linux-gnu/libxcb.so.1.1.0
b6c83000-b6ccc000 r-xp 00000000 08:02 6422562    /lib/i386-linux-gnu/libdbus-1.so.3.7.2
b6ccc000-b6ccd000 ---p 00049000 08:02 6422562    /lib/i386-linux-gnu/libdbus-1.so.3.7.2
b6ccd000-b6cce000 r--p 00049000 08:02 6422562    /lib/i386-linux-gnu/libdbus-1.so.3.7.2
b6cce000-b6ccf000 rw-p 0004a000 08:02 6422562    /lib/i386-linux-gnu/libdbus-1.so.3.7.2
b6ccf000-b6cd7000 r-xp 00000000 08:02 4327592    /usr/lib/i386-linux-gnu/libjson.so.0.1.0
b6cd7000-b6cd8000 r--p 00007000 08:02 4327592    /usr/lib/i386-linux-gnu/libjson.so.0.1.0
b6cd8000-b6cd9000 rw-p 00008000 08:02 4327592    /usr/lib/i386-linux-gnu/libjson.so.0.1.0
b6cd9000-b6cdd000 r-xp 00000000 08:02 6423193    /lib/i386-linux-gnu/libcap.so.2.22
b6cdd000-b6cde000 rw-p 00003000 08:02 6423193    /lib/i386-linux-gnu/libcap.so.2.22
b6cde000-b6cdf000 rw-p 00000000 00:00 0
b6cdf000-b6d45000 r-xp 00000000 08:02 4339765    /usr/lib/i386-linux-gnu/pulseaudio/libpulsecommon-2.0.so
b6d45000-b6d46000 r--p 00065000 08:02 4339765    /usr/lib/i386-linux-gnu/pulseaudio/libpulsecommon-2.0.so
b6d46000-b6d47000 rw-p 00066000 08:02 4339765    /usr/lib/i386-linux-gnu/pulseaudio/libpulsecommon-2.0.so
b6d47000-b6d4e000 r-xp 00000000 08:02 6554189    /lib/i386-linux-gnu/i686/cmov/librt-2.13.so
b6d4e000-b6d4f000 r--p 00006000 08:02 6554189    /lib/i386-linux-gnu/i686/cmov/librt-2.13.so
b6d4f000-b6d50000 rw-p 00007000 08:02 6554189    /lib/i386-linux-gnu/i686/cmov/librt-2.13.so
b6d50000-b6d5b000 r-xp 00000000 08:02 4330586    /usr/lib/i386-linux-gnu/libjbig.so.0.0.0
b6d5b000-b6d5e000 rw-p 0000b000 08:02 4330586    /usr/lib/i386-linux-gnu/libjbig.so.0.0.0
b6d5e000-b6d64000 r-xp 00000000 08:02 4333085    /usr/lib/i386-linux-gnu/libogg.so.0.8.0
b6d64000-b6d65000 rw-p 00005000 08:02 4333085    /usr/lib/i386-linux-gnu/libogg.so.0.8.0
b6d65000-b6d66000 rw-p 00000000 00:00 0
b6d66000-b6d8c000 r-xp 00000000 08:02 6426268    /lib/i386-linux-gnu/libexpat.so.1.6.0
b6d8c000-b6d8d000 ---p 00026000 08:02 6426268    /lib/i386-linux-gnu/libexpat.so.1.6.0
b6d8d000-b6d8f000 r--p 00026000 08:02 6426268    /lib/i386-linux-gnu/libexpat.so.1.6.0
b6d8f000-b6d90000 rw-p 00028000 08:02 6426268    /lib/i386-linux-gnu/libexpat.so.1.6.0
b6d90000-b6da5000 r-xp 00000000 08:02 6553829    /lib/i386-linux-gnu/i686/cmov/libpthread-2.13.so
b6da5000-b6da6000 r--p 00014000 08:02 6553829    /lib/i386-linux-gnu/i686/cmov/libpthread-2.13.so
b6da6000-b6da7000 rw-p 00015000 08:02 6553829    /lib/i386-linux-gnu/i686/cmov/libpthread-2.13.so
b6da7000-b6da9000 rw-p 00000000 00:00 0
b6da9000-b6dab000 r-xp 00000000 08:02 4338554    /usr/lib/i386-linux-gnu/libts-0.0.so.0.1.1
b6dab000-b6dac000 rw-p 00001000 08:02 4338554    /usr/lib/i386-linux-gnu/libts-0.0.so.0.1.1
b6dac000-b6e73000 r-xp 00000000 08:02 4326574    /usr/lib/i386-linux-gnu/libcaca.so.0.99.18
b6e73000-b6e74000 rw-p 000c6000 08:02 4326574    /usr/lib/i386-linux-gnu/libcaca.so.0.99.18
b6e74000-b6e79000 rw-p 00000000 00:00 0
b6e79000-b6e8f000 r-xp 00000000 08:02 4353038    /usr/lib/i386-linux-gnu/libdirect-1.2.so.9.0.1
b6e8f000-b6e90000 rw-p 00016000 08:02 4353038    /usr/lib/i386-linux-gnu/libdirect-1.2.so.9.0.1
b6e90000-b6e91000 rw-p 00000000 00:00 0
b6e91000-b6e9a000 r-xp 00000000 08:02 4353034    /usr/lib/i386-linux-gnu/libfusion-1.2.so.9.0.1
b6e9a000-b6e9b000 rw-p 00008000 08:02 4353034    /usr/lib/i386-linux-gnu/libfusion-1.2.so.9.0.1
b6e9b000-b6f1e000 r-xp 00000000 08:02 4353040    /usr/lib/i386-linux-gnu/libdirectfb-1.2.so.9.0.1
b6f1e000-b6f21000 rw-p 00082000 08:02 4353040    /usr/lib/i386-linux-gnu/libdirectfb-1.2.so.9.0.1
b6f21000-b6f32000 r-xp 00000000 08:02 4325458    /usr/lib/i386-linux-gnu/libXext.so.6.4.0
b6f32000-b6f33000 rw-p 00010000 08:02 4325458    /usr/lib/i386-linux-gnu/libXext.so.6.4.0
b6f33000-b7067000 r-xp 00000000 08:02 4327567    /usr/lib/i386-linux-gnu/libX11.so.6.3.0
b7067000-b706b000 rw-p 00133000 08:02 4327567    /usr/lib/i386-linux-gnu/libX11.so.6.3.0
b706b000-b70b9000 r-xp 00000000 08:02 4339764    /usr/lib/i386-linux-gnu/libpulse.so.0.14.2
b70b9000-b70ba000 r--p 0004d000 08:02 4339764    /usr/lib/i386-linux-gnu/libpulse.so.0.14.2
b70ba000-b70bb000 rw-p 0004e000 08:02 4339764    /usr/lib/i386-linux-gnu/libpulse.so.0.14.2
b70bb000-b70bc000 rw-p 00000000 00:00 0
b70bc000-b70bf000 r-xp 00000000 08:02 4330214    /usr/lib/i386-linux-gnu/libpulse-simple.so.0.0.3
b70bf000-b70c0000 r--p 00002000 08:02 4330214    /usr/lib/i386-linux-gnu/libpulse-simple.so.0.0.3
b70c0000-b70c1000 rw-p 00003000 08:02 4330214    /usr/lib/i386-linux-gnu/libpulse-simple.so.0.0.3
b70c1000-b71b4000 r-xp 00000000 08:02 4328460    /usr/lib/i386-linux-gnu/libasound.so.2.0.0
b71b4000-b71b8000 r--p 000f2000 08:02 4328460    /usr/lib/i386-linux-gnu/libasound.so.2.0.0
b71b8000-b71b9000 rw-p 000f6000 08:02 4328460    /usr/lib/i386-linux-gnu/libasound.so.2.0.0
b71b9000-b7250000 r-xp 00000000 08:02 4330930    /usr/lib/i386-linux-gnu/libfreetype.so.6.8.1
b7250000-b7254000 r--p 00096000 08:02 4330930    /usr/lib/i386-linux-gnu/libfreetype.so.6.8.1
b7254000-b7255000 rw-p 0009a000 08:02 4330930    /usr/lib/i386-linux-gnu/libfreetype.so.6.8.1
b7255000-b7283000 r-xp 00000000 08:02 4327431    /usr/lib/i386-linux-gnu/libwebp.so.2.0.0
b7283000-b7284000 r--p 0002d000 08:02 4327431    /usr/lib/i386-linux-gnu/libwebp.so.2.0.0
b7284000-b7285000 rw-p 0002e000 08:02 4327431    /usr/lib/i386-linux-gnu/libwebp.so.2.0.0
b7285000-b7288000 rw-p 00000000 00:00 0
b7288000-b729f000 r-xp 00000000 08:02 6422674    /lib/i386-linux-gnu/libz.so.1.2.7
b729f000-b72a0000 r--p 00016000 08:02 6422674    /lib/i386-linux-gnu/libz.so.1.2.7
b72a0000-b72a1000 rw-p 00017000 08:02 6422674    /lib/i386-linux-gnu/libz.so.1.2.7
b72a1000-b72a2000 rw-p 00000000 00:00 0
b72a2000-b7304000 r-xp 00000000 08:02 4328894    /usr/lib/i386-linux-gnu/libtiff.so.4.3.6
b7304000-b7305000 ---p 00062000 08:02 4328894    /usr/lib/i386-linux-gnu/libtiff.so.4.3.6
b7305000-b7307000 r--p 00062000 08:02 4328894    /usr/lib/i386-linux-gnu/libtiff.so.4.3.6
b7307000-b7308000 rw-p 00064000 08:02 4328894    /usr/lib/i386-linux-gnu/libtiff.so.4.3.6
b7308000-b7340000 r-xp 00000000 08:02 4325500    /usr/lib/i386-linux-gnu/libjpeg.so.8.4.0
b7340000-b7341000 rw-p 00037000 08:02 4325500    /usr/lib/i386-linux-gnu/libjpeg.so.8.4.0
b7341000-b7369000 r-xp 00000000 08:02 6422719    /lib/i386-linux-gnu/libpng12.so.0.49.0
b7369000-b736a000 r--p 00027000 08:02 6422719    /lib/i386-linux-gnu/libpng12.so.0.49.0
b736a000-b736b000 rw-p 00028000 08:02 6422719    /lib/i386-linux-gnu/libpng12.so.0.49.0
b736b000-b7381000 r-xp 00000000 08:02 4334103    /usr/lib/libmad.so.0.2.1
b7381000-b7382000 rw-p 00015000 08:02 4334103    /usr/lib/libmad.so.0.2.1
b7382000-b73d0000 r-xp 00000000 08:02 4331056    /usr/lib/i386-linux-gnu/libFLAC.so.8.2.0
b73d0000-b73d1000 r--p 0004d000 08:02 4331056    /usr/lib/i386-linux-gnu/libFLAC.so.8.2.0
b73d1000-b73d2000 rw-p 0004e000 08:02 4331056    /usr/lib/i386-linux-gnu/libFLAC.so.8.2.0
b73d2000-b73d3000 rw-p 00000000 00:00 0
b73d3000-b73fd000 r-xp 00000000 08:02 4328031    /usr/lib/i386-linux-gnu/libvorbis.so.0.4.5
b73fd000-b73fe000 r--p 00029000 08:02 4328031    /usr/lib/i386-linux-gnu/libvorbis.so.0.4.5
b73fe000-b73ff000 rw-p 0002a000 08:02 4328031    /usr/lib/i386-linux-gnu/libvorbis.so.0.4.5
b73ff000-b7407000 r-xp 00000000 08:02 4328022    /usr/lib/i386-linux-gnu/libvorbisfile.so.3.3.4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:55:28.480

您可能想尝试这个简单的步骤。用缓冲区填充堆栈的两端，然后检查覆盖缓冲区的内容。通常，检查缓冲区的内容可以很好地提示问题可能出在哪里。

```
#include <stdio.h>
#include <string.h>

#define DEBUG           1

/*
 * If stack is getting corrupted then this buf should change. 
 * Looking at the contents of the buf should give a hint at 
 * what is causing it.
 */

#if DEBUG

#define PAD_SIZE        1024
#define PAD_CHAR        0xE5

static void
check_buf(char *name, char *s)
{
    int j, count = 0;

    for (j = 0; j < PAD_SIZE; j++) {
        if ((unsigned char)*s != PAD_CHAR) {
            count++;
        }
        s++;
    }

    if (count != 0) {
        printf("%s corrupted by %d bytes\n", name, count);
    }
}

#endif

/*
 * Stack smashing happens when attempting to return from foo.
 */

int
foo(/* some calling args go here */)
{
#if DEBUG
    char pad_a[PAD_SIZE];
#endif
    /*
     * Rest of your ALL auto variables go here.
     */
#if DEBUG
    char pad_b[PAD_SIZE];

    memset(pad_a, PAD_CHAR, PAD_SIZE);
    memset(pad_b, PAD_CHAR, PAD_SIZE);
#endif
    /*
     * foo does its work and somehow ends up corrupting the
     * stack.  We normally learn about the problem when the
     * function attempts to return.
     */
#if DEBUG
    check_buf("foo():pad_a", pad_a);
    check_buf("foo():pad_b", pad_b);
#endif
    return(1);
} 
```

让我们知道怎么回事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T15:33:19.653

你用过 Valgrind 的[exp-sgcheck](http://valgrind.org/docs/manual/sg-manual.html)工具还是只用 memcheck 工具？听起来 sgcheck 可以做你想做的事。来自 Valgrind 文档：

> SGCheck 和 Memcheck 是互补的：它们的功能不重叠。Memcheck 对堆数组执行边界检查和释放后使用检查。它还发现使用由堆或堆栈分配创建的未初始化值。但它不执行堆栈或全局数组的边界检查。
> 
> 另一方面，SGCheck 确实对堆栈或全局数组进行边界检查，但它不做任何其他事情。

关于 exp-sgcheck 如何准确地发现潜在错误（它被认为是实验性的）有一些警告，所以在尝试之前仔细阅读文档。

编辑：

这是另一个尝试的想法。如果您在函数入口处中断，您能否确定在函数退出时将损坏的地址？也许通过获取堆栈变量或其他东西的地址？如果是这样，您可以在该地址上设置一个 gdb 观察点。每当此内存位置被修改时，gdb 将停止程序。如果它是一个经常修改的地址，但在紧要关头，它可以充当穷人的堆栈保护，这可能会很烦人。 [这是 docs 的链接](http://sourceware.org/gdb/onlinedocs/gdb/Set-Watchpoints.html)。

你不必有一个特殊的堆栈守卫，你只需要在堆栈上观察你知道会被破坏的东西。例如，给定以下程序：

```
 void bar(int j) {
    int *addr = (&j) - 20;
    for(int i = 0; i <= 1000; i++) {
        *(addr + i) = 0xDEADBEEF;
    }
}

int main() {
    bar(10);
    return 0;
} 
```

如果你在进入时中断`bar`并设置然后继续，你应该在循环内`watch j`得到一个中断。`i == 20`如果`j`应该在函数内部进行更改，这显然很烦人。如果您只有一个地址，您可以通过取消引用来查看它`watch *(int*)0x40051f`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:40:56.923

您可能想尝试地址消毒器：[http ://clang.llvm.org/docs/AddressSanitizer.html](http://clang.llvm.org/docs/AddressSanitizer.html)

它需要能够用 clang 编译你的代码，但是 ASAN 非常擅长发现堆栈粉碎错误。

# pagespeed - mod pagespeed 域分片

> ID：13641383
> 
> 赞同：1
> 
> 时间：2012-11-30T08:22:17.180
> 
> 标签：pagespeed, google-pagespeed

我正在尝试对域进行分片，但它似乎最多可以找到 30 分钟，然后所有图像都损坏了，我看到了所有这些错误：

> 基于 URL/image.png 的资源，但无法访问 URL/image.pagespeed.png 的原始
> 提取失败，状态 = 404

这是我的设置：

> ModPagespeedDomain URL
> ModPagespeedMapOriginDomain localhost/URL *URL
> ModPagespeedShardDomain URL shard1.URL,shard2.URL
> ModPagespeedMapRewriteDomain URL www.URL

我尝试了几种不同的配置，但似乎无法正确设置。

我有几个网站，然后他们每个人都有自己的文件夹

> /var/www/site1/
> /var/www/site2/
> /var/www/site3/

任何帮助将不胜感激！

# vb.net - ValueInjecter 和 ICollection（ViewModel 的）

> ID：13641384
> 
> 赞同：0
> 
> 时间：2012-11-30T08:22:22.553
> 
> 标签：vb.net, linq, viewmodel, valueinjecter

我有两个相关的简单视图模型。我可以通过 linq include 语句查询数据，但是当我将其注入视图模型时，icollection 什么都不是？

视图模型：

```
Public Class EventViewModel
  Public Property EVENTID As Integer
  Public Property TITLE As String

  Public Overridable Property USERS() As ICollection(Of UserViewmodel)
End Class

Public Class UserViewModel
  Public Property USERID As Integer
  Public Property EVENTID As Integer
  Public Property NAME As String
End Class 
```

询问：

```
Dim dataObject As EVENTTABLE = db.EVENTTABLE.Include("USERTABLE").Single(Function(c) c.EVENTID= "1") 
```

用户在对象中！

注射：

```
viewModel.InjectFrom(dataObject) 
```

用户什么都不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:12:35.363

好的，在这个问题的帮助下弄清楚了：[如何使用 ValueInjector 映射列表](https://stackoverflow.com/questions/7872405/how-to-map-lists-with-valueinjector)

我需要将 USERTABLE 查询到一个列表中并将其注入如下所述：

询问：

```
Dim dataSubObject = (From ....).toList() 
```

注射：

```
Dim viewModel = New EventViewModel
viewModel.USERS= dataSubObject.Select(Function(x) New ImageViewModel().InjectFrom(x)).Cast(Of ImageViewModel)().ToList() 
```

# wordpress - 如何更改 WordPress 中的注销消息？

> ID：13641385
> 
> 赞同：1
> 
> 时间：2012-11-30T08:22:25.583
> 
> 标签：wordpress

我想更改消息**“您现在已注销”。**，当用户注销时。
有什么钩子可以用来修改它吗？

我试过使用`login_message`或`login_error`过滤，但不起作用。
我不想修改`wp-login.php`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:18:07.407

您需要在您的functions.php中添加此代码

```
add_filter( 'login_message', 'so_13641385_custom_logout_message' );
add_action( 'login_head','so_13641385_custom_login_head' );

// Detect logout or login, and display correspondent message
function so_13641385_custom_logout_message() 
{
    //check to see if it's the logout screen
    if ( isset($_GET['loggedout']) && TRUE == $_GET['loggedout'] ) 
        $message = "<p class='custom-message'>Custom logged out Message.</p><br />";

    //they are logged in
    else 
        $message = "<p class='custom-message'>Custom Login Message.</p><br />";

    return $message;
} 

//outputs the CSS needed to blend custom-message with the normal message
function so_13641385_custom_login_head() 
{
    ?>
    <style type="text/css">
    #login_error, .message { display:none; }
    .custom-message {
        -moz-border-radius:3px 3px 3px 3px;
         border-style:solid;
         border-width:1px;
         margin:0 0 16px 8px;
         padding:12px;
    }
    .login .custom-message {
        background-color:#FFFFE0;
        border-color:#E6DB55;
    }
    </style>
    <?php
} 
```

用您的消息替换自定义消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-26T11:23:25.777

使用过滤器**login_messages**而不是**login_message**

```
function custom_logout_message(){
  return 'You are not login!';
}
add_filter( 'login_messages', 'custom_logout_message' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T03:09:04.710

改进 brasofilo 的回答：

1.  该问题不要求提供登录消息。提供这些是多余的。
2.  使用现有的消息类比定义自定义类并尝试转置 CSS 样式要优越得多。
3.  最好在可用时使用过滤器。

# 代码：

```
add_filter( 'wp_login_errors', 'my_logout_message' );

function my_logout_message( $errors ){

    if ( isset( $errors->errors['loggedout'] ) ){
        $errors->errors['loggedout'][0] = 'Custom Logged-Out Message.';
    }

    return $errors;
} 
```

# git - Git 分支存储在哪里？

> ID：13641391
> 
> 赞同：6
> 
> 时间：2012-11-30T08:22:54.220
> 
> 标签：git, github, branch

我在一个网站上工作并不断从*开发*模式（代码中的每个 URL 都指向本地主机，数据库名为“项目”，用户“root”，空密码等）切换到*生产*模式（我的主机、真实密码、真实 URL 等所有设置都可以正常工作），而我最近才开始使用[Git](http://en.wikipedia.org/wiki/Git_%28software%29)。

现在，我想为准备上传到我的主机的代码创建一个分支，这样我就不必在每次想要更新我的网站时复制并手动更改所有内容。因此，如果我对代码进行更改并在`master`分支中提交，它将反映在用于上传的代码中，而无需更改其他内容。

所以它会是：

```
Master -> ReadyForUpload 
```

所以我的问题是，在使用 Git 时，每个分支是否都存储在物理存储中，就像一个包含每个文件的目录一样？是否可以将分支导出到目录？

顺便说一句，我正在使用适用于 Windows 的[Git 扩展](http://code.google.com/p/gitextensions/)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T08:28:52.537

不会。其他一些版本控制系统（例如 Subversion）将分支存储为子目录。在 git 中，您有一个工作区域，并更改您在其中工作的分支，

例如。

```
git branch ReadyForUpload
git checkout ReadyForUpload 
```

似乎没有任何变化，但您现在正在 ReadyForUpload 分支中工作。

如果您然后进行一些更改并提交它们并且您执行

```
git checkout Master 
```

您将回到主分支，ReadyForUpload 中的更改消失了（也就是说，只是存储了）

当然，如果您出于某种原因更喜欢同时使用两个分支，您可以将您的存储库克隆到另一个目录，并在那里签出另一个分支 - 使用 git pull 或 git push 在适用的情况下同步它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T08:45:50.113

> 每个分支是否都存储在物理存储中，就像一个包含每个文件的目录？

答案是否定的！

> 是否可以将分支导出到目录？

是的。有几种方法可以进行导出。但是，如果您打算对该分支进行小的修改/调查，并且经常希望在该分支上工作，因为令人不安的生产问题与您的开发一起出现（在主分支中）。我建议你从原点再做一个克隆

例如，如果您集中商定的来源是`git://github.com/my_org/my_proj.git`

您可能会克隆开发 WD

```
git clone git://github.com/my_org/my_proj.git 
```

那么你应该有一个生产

```
git clone git://github.com/my_org/my_proj.git my_proj_production
cd my_proj_production
git checkout -b release_branch
git push origin release_branch 
```

在`my_proj_production`您应该修改您的网址、密码等以反映生产情况。然后每次你将把东西从开发（`master`）合并到生产（`release_branch`）你应该在`my_proj`dir make a`git push`并且在`my_proj_production`dir 你应该做

```
git remote update
git merge origin/master 
```

第一行确保您从远程仓库获取更改到本地 HDD（作为 下的小文件`.git/objects`，第二个命令确保您所做的更改合并到您的 release_branch 中（并且 url、密码等不会在您的释放分支）。

如果您（还）没有中央存储库，请发表评论，我会调整答案以反映这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T06:52:16.953

如果您是 Git 新手，您可能希望从[git flow](https://github.com/nvie/gitflow)开始。它为您提供了一个很好的工作流程来维护一个`master`分支和一个`develop`分支，而不会涉及到复杂性`git`

[在此处](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)阅读更多信息

# asterisk - 如何使用星号获取来电显示

> ID：13641393
> 
> 赞同：1
> 
> 时间：2012-11-30T08:22:53.780
> 
> 标签：asterisk

我的情况如下

模拟电话（10 到 99）-----> pbx------>(77)星号--------> jitsi(2000)

我有编号为 77 的模拟电话接口，带有星号，其他 sip 用户在 jitsi 上是 2000。

我可以在 77 上从 10 到 99（在对讲机中）拨打任何号码，然后会出现 ivr 响应，然后我可以输入 2000# 并拨打星号中的 2000 命名用户。

现在我的问题是当我从 10 呼叫到 99（任何号码）时，这个号码应该显示给 sip 2000 的用户。但它没有向用户显示。它显示星号@my_asterisk_server_ip。

我的配置。如下

扩展名.conf

```
exten => s,1,Goto(phrase-menu,s,1)

[phrase-menu]

exten => s,1,Answer()
exten => s,2,Wait(1)
exten => s,3,Read(PHRASEID,/var/lib/asterisk/sounds/custom/soip)
exten => s,4,Wait(2)
exten => s,5,Set(CALLERID(num,CID)=${CALLERID})
exten => s,6,Dial(SIP/${PHRASEID},40,tT)
exten => h,1,Hangup() 
```

并在 chan_dahdi.conf

```
; General options
[channels]
usecallerid=yes
hidecallerid=no
callwaiting=yes
threewaycalling=yes
transfer=yes
echocancel=yes
echocancelwhenbridged=yes
cidsignalling=dtmf
cidstart=polarity
callerid=asreceived
rxgain=0.0
txgain=0.0
;FXO Modules
group=1
echocancel=yes
signalling=fxs_ks
context=default
channel=1-20

#include dahdi-channels.conf 
```

任何帮助

谢谢..

非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:42:00.090

首先，`exten => s,5,Set(CALLERID(num,CID)=${CALLERID})`是无效的，应该是：`exten => s,5,Set(CALLERID(num)=${CALLERID})`. 其次，将 CALLERID 设置为 CALLERID 是多余的。第三，您实际上是否首先设置了 callerid（这会在您的`default`上下文中发生）？

# python - Scrapy在同一页面上抓取多个XPathSelector

> ID：13641394
> 
> 赞同：2
> 
> 时间：2012-11-30T08:23:04.227
> 
> 标签：python, parsing, xpath, scrapy

我试图从同一页面上的“主表”内的不同“表”中提取数据（相同的 URL）。项目字段在所有子表中具有相同的 XPath/相同的结构，所以我面临的问题只是**为此页面上的表部分添加“多个”XPath**。

这是我的代码的样子：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from tutorial.items import TutorialItem

class MySpider(BaseSpider):
name = "test"
allowed_domains = ["blabla.com"]
start_urls = ["http://www.blablabl..com"] // Start_url Doesnt change = Same Page

def parse(self, response):
    hxs = HtmlXPathSelector(response)
    titles = [hxs.select('//tr[@class="index class_tr group-6487"]')]

    //Here I would like to have Mltiple XPathSelectors ex:

    // titles = [hxs.select('//tr[@class="index class_tr group-6488"]')]
    // titles = [hxs.select('//tr[@class="index class_tr group-6489"]')]

    // Each for a table section within the same 'Main Table'

    items = []
    for title in titles:
        item = TutorialItem()
        item ['name'] = title.select('td[3]/span/a/text()').extract()
        item ['encryption'] = title.select('td[5]/text()').extract()
        item ['compression'] = title.select('td[8]/text()').extract()
        item ['resolution'] = title.select('td[7]/span/text()').extract()
        items.append(item)
    return items 
```

如果可以做到这一点，我将不胜感激；如果我为每个表部分编写不同的蜘蛛，那么我最终会为同一个 URL/表创建 10 个蜘蛛，我不太确定是否可以按顺序在同一个“csv”文件中检索数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:50:21.443

Try this:

```
titles = [hxs.select('//tr[@class="index class_tr group-6487"] | //tr[@class="index class_tr group-6488"] | //tr[@class="index class_tr group-6489"]')] 
```

# objective-c - UITableView 推送到我的 webView

> ID：13641396
> 
> 赞同：2
> 
> 时间：2012-11-30T08:23:09.107
> 
> 标签：objective-c, xcode, uitableview, uiwebview, push

我想首先道歉，因为我确信这个问题已经得到了回答，在这个网站和其他网站上以各种形式出现，但我似乎无法实现任何类似的线程

只是我一直在尝试将一系列搜索引擎推送到我的 webView 中，我已经用 .plist 或 NSMutableArray 填充了表格，并且我有一个带有 Url 的两种类型的数组，我设法加载了一个子视图，但我真的努力让我的网络视图加载。我认为在 didSelectRowAtIndexPath 和 webView 加载请求之前我还可以。好的，考虑一下，我只填充了表格并将 IBOUTLET（非原子，保留）UIWebView *webView 并将其合成到我的 WebViewController 中。作为背景，我的 TableViewController 嵌入在 NavigationController 和 WebView 中的 UIViewController 如果有人愿意帮助我，我非常愿意捐赠，因为这导致了太多不眠之夜。

这是我的项目的链接，如果它可以帮助任何人[http://dl.dropbox.com/u/28335617/TableViewArrays.zip](http://dl.dropbox.com/u/28335617/TableViewArrays.zip)

非常感谢您提供的任何帮助

这是我的 TableViewController.h

```
@class WebViewController;
#import <UIKit/UIKit.h>
@interface TableViewController : UITableViewController <UITableViewDataSource,   UITableViewDelegate> {
       WebViewController *viewController;
    IBOutlet UITableView *mytableView;

}

@property (strong, nonatomic) IBOutlet UITableView *mytableView;

@property (nonatomic, retain) WebViewController *viewController;

@property (nonatomic, retain) NSMutableArray *searchData, *tableData, *tableUrl;
@end 
```

这是我的 TableViewController.m

```
 #import "TableViewController.h"
    #import "TableAppDelegate.h"
    #import "WebViewController.h"
    @interface TableViewController ()

    @end

    @implementation TableViewController
    @synthesize mytableView;
    @synthesize viewController;
    @synthesize searchData, tableData, tableUrl;
     NSMutableArray *searchData, *tableData, *tableUrl;

    - (void)viewDidLoad
    {
        [super viewDidLoad];

     tableUrl = [[NSMutableArray alloc] init];

    [tableUrl addObject: @"http://www.google.com"];
    [tableUrl addObject: @"http://www.bing.com"];
[tableUrl addObject: @"http://www.dogpile.com"];
[tableUrl addObject: @"http://www.wikipedia.com"];
[tableUrl addObject: @"http://www.ask.com"];
[tableUrl addObject: @"http://www.yahoo.com"];
    [tableUrl addObject: @"http://www.aol.com"];
[tableUrl addObject: @"http://www.altavista.com"];
[tableUrl addObject: @"http://www.gigablast.com"];
[tableUrl addObject: @"http://www.msn.com"];
[tableUrl addObject: @"http://www.mamma.com"];
    self.title = @"Search Engines";

            //ARRAY FOR PLIST
       // Find out the path of recipes.plist
        NSString *path = [[NSBundle mainBundle] pathForResource:@"searchData"      ofType:@"plist"];
                       searchData = [[NSMutableArray alloc] initWithContentsOfFile:path];

        // Load the file content and read the data into arrays 
       NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];
        tableData = [dict objectForKey:@"SearchEngines"];
       // tableUrl = [dict objectForKey:@"SearchAddress"];

   // NSString *path = [[NSBundle mainBundle] pathForResource:@"sEArray" ofType:@"plist"];
                     // sEArray = [[NSMutableArray alloc] initWithContentsOfFile:path];

      // NSString *urlArray = [[NSBundle mainBundle] pathForResource:@"urlsArray" ofType:@"plist"];
                      //urlsArray = [[NSMutableArray alloc] initWithContentsOfFile:urlArray];

    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
       // Dispose of any resources that can be recreated.
    }

    #pragma mark - Table view data source

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {

        // Return the number of sections.
        return 1;
    }

     - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection: (NSInteger)section
    {

        // Return the number of rows in the section.
       return [self.tableData count];
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView  dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
        if (cell == nil) {

        }

        // Configure the cell...
         NSInteger row = [indexPath row];
        cell.textLabel.text = [tableData objectAtIndex:row];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        return cell;
     }

    #pragma mark - Table view delegate
    -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    }
     @end 
```

这是我的 WebViewController.h

```
 #import <UIKit/UIKit.h>

    @interface WebViewController : UIViewController {

    NSMutableArray *tableURL;
     }
    @property (nonatomic, retain) IBOutlet UIWebView *webView;
    @property (nonatomic, retain) NSMutableArray *tableUrl;
    @end 
```

和 WebViewController.m

```
 #import "TableAppDelegate.h"
    #import "TableViewController.h"
    #import "WebViewController.h"

   @interface WebViewController ()

   @end

   @implementation WebViewController 

   @synthesize tableUrl;
   @synthesize webView; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:58:50.700

未测试。在 IB 中添加 SequgeIdentifier “WebView”

在 tableviewcontroller 中添加：

```
 - (void)viewDidLoad
        {
    ...
        tableUrl = [dict objectForKey:@"SearchAddress"];
        }

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
        [self performSegueWithIdentifier:@"WebView" sender:self];
    }

    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
        if ([[segue identifier] isEqualToString:@"WebView"])
        {
            WebViewController *webViewController = segue.destinationViewController;

            NSIndexPath *selectedPath = [self.tableView indexPathForSelectedRow];
            webViewController.tableUrl = [tableUrl objectAtIndex:[selectedPath row]];
            [self.tableView deselectRowAtIndexPath:selectedPath animated:YES];
        }

    } 
```

在 webview 控制器中

```
@interface WebViewController : UIViewController {
        NSString *tableURL;
    }
@property (nonatomic, retain) IBOutlet UIWebView *webView;
@property (nonatomic, retain) NSString *tableUrl;
@end

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    //Create a URL object.
    NSURL *url = [NSURL URLWithString:tableUrl];

    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [webView loadRequest:requestObj];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:57:46.097

究竟是什么不工作？

查看您的代码，我立即看到您的单元格启动代码为空

如果（细胞 == 零）{

}

我认为您应该使用以下内容启动您的单元格：

cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

# git - jenkins：更新子模块时使用子模块的最新提交重建主存储库

> ID：13641400
> 
> 赞同：3
> 
> 时间：2012-11-30T08:23:27.790
> 
> 标签：git, jenkins, git-submodules

你能帮我处理詹金斯的工作流程吗？我们有带有子模块 s1 的主存储库 rep1。子模块已添加到具有特定提交号的 rep1。我们经常致力于 s1。但是 jenkins 在更新 rep1 时没有看到新的变化，因为 s1 有旧的提交号。

当其他开发人员更新 s1 时，我们如何配置 jenkins 以使用 s1 的最新更改自动重建 rep1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:12:21.860

当您提交 s1 时，您需要确保将指针更新为 r1 中正确的提交哈希并推送，否则 r1 仍指向旧版本的 s1。

例子：

```
~/r1 <---- main project
~/r1/s1 <---- submodule in your project 
```

< 对 s1 进行更改 >

```
# you commit your changes for whatever
~/r1/s1: git commit -am 'major commit not doing single adds' 
```

现在，切换回 ~/r1

```
~/r1: git add ./s1
~/r1: git commit -m 'updating pointer for submodule in changes in s1' 
```

现在，当您推送更改时，jenkins 会看到您告诉它您更新了主存储库中的指针，并且您需要进行全新的重建（假设 jenkins 将为 r1 上的任何更新进行重建）。

# extjs - 如何在 extjs actioncolumn 图标上添加动态工具提示？

> ID：13641405
> 
> 赞同：6
> 
> 时间：2012-11-30T08:23:47.773
> 
> 标签：extjs, extjs4.1

我有这样的actioncolumn：

```
{
    xtype: 'actioncolumn',
    align: 'center',
    items: [
        {
            getTip: function () {
                return 'this doesn\'t work';
            },
            handler: function() {
                // action 1
            }
        },{
            tooltip: 'works',
            handler: function() {
                // action 2
            }
        }
    ]
} 
```

[我在文档中找到的getTip()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Action-cfg-items)方法，但它不起作用或者我不知道如何使用它。我做错了什么或如何设置工具提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:21:51.153

正如 bjornd 所说，似乎它是 getTip() 的错误，但我成功添加了工具提示，这不是我认为的最佳方式，但它对我有用。

```
{
    xtype: 'actioncolumn',
    align: 'center',
    items: [
        {
            getClass: function(value,meta,record,rowIx,colIx, store) {
                this.items[0].tooltip = 'working ' + record('name');
                return 'some-class-name'; // or something if needed
            },
            handler: function() {
                // action 1
            }
        },{
            tooltip: 'works',
            handler: function() {
                // action 2
            }
        }
    ]
} 
```

如果有人可以提出更好的解决方案，我会很高兴听到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-08T17:26:37.350

我用过

```
getTip : function(value, metaData, record){
    return this.getCheckOutCheckInToolTip(record);
}, 
```

有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:42:35.967

如该属性的评论中所述`items`：

> getTip 选项似乎不起作用。我已经声明了一个函数：
> 
> ```
> getTip:function( value, metadata, record ) {
>     if( !record.get( 'editable' ) )
>         return 'Record is locked';
>     return 'Delete record';
> } 
> ```
> 
> 并且鼠标悬停时没有提示。Firebug 中的结果代码是：
> 
> ```
> <td class=" x-grid-cell x-grid-cell-btn-timesheet-delete   x-action-col-cell x-grid-cell-last"><div style="text-align: left; ;" class="x-grid-cell-inner "><img class="x-action-col-icon x-action-col-0   timesheet-option-icon-delete" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" alt=""></div></td> 
> ```
> 
> 所以，没有 data-qtip 属性。

所以我认为这是一个已知问题。您可以等待更新或通过一些覆盖自行修复它。

# windows-8 - Windows 应用商店徽标

> ID：13641406
> 
> 赞同：0
> 
> 时间：2012-11-30T08:24:05.920
> 
> 标签：windows-8, windows-runtime, windows-store-apps, windows-store

终于设法让我的 windows 商店应用程序发布，它出现在商店中，没有它的标志。指定的徽标文件是 PNG 文件，大小为 150 x 150。显然，我需要将其链接到其他地方，尽管我不知道在哪里。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:14:53.453

确保 StoreLogo.png (50 X 50) 存在是`Assets`目录并通过双击检查`Package.appxmanifest -> Packaging Tab -> You have linked the Store logo`

标识 ：`Assets\StoreLogo.png`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:27:45.457

在 package-appmanifest 文件中，包装选项卡下有一个“徽标”字段。这是应该定义商店标志的地方。

# android - Android SDK 投影仪 API

> ID：13641407
> 
> 赞同：3
> 
> 时间：2012-11-30T08:24:06.387
> 
> 标签：android, samsung-mobile, samsung-galaxy, projector

我有一部三星 Galaxy Beam 智能手机。Galaxy Beam 与投影仪集成在一起。我想用它的投影仪进行开发。据我所知，三星不提供用于开发的 API。Android SDK 是否有用于此的 api？或者有什么方法可以控制它的投影仪？

# vb.net - 从 VB .NET 启动带有命令行标志的 Ruby 脚本

> ID：13641418
> 
> 赞同：1
> 
> 时间：2012-11-30T08:25:17.160
> 
> 标签：vb.net, process, cmd, flags

这个问题似乎很简单，但似乎有一个我无法绕过的小棘手时刻。简而言之，我正在从一个 VB .NET 应用程序启动一个 ruby​​/watir Web 自动化脚本。该脚本可以与 IE、FF 和 Chrome 的网络驱动程序一起使用。如果是前两个，这很简单。对于 Chrome，它需要使用 --log-path 标志启动 .rb 文件。

这是我的代码：

```
 Dim chromeStarter As New ProcessStartInfo(generatedScripts(i))
        Dim args As String = " --log-path=" & testRunPath & "\chromedriver.log"

        If isChrome = True Then
            chromeStarter.Arguments = args
            Process.Start(chromeStarter)
        Else
            Process.Start(chromeStarter)
        End If 
```

问题：确实它启动了正确的 .rb 文件，但没有考虑标志。我尝试将文件名和标志作为单个字符串传递给 Process.Start，但效果不佳。从 cmd 手动运行脚本时，标志工作正常。

提前感谢您的建议！

# eclipse - PrimeFaces 登录尝试（示例）失败

> ID：13641428
> 
> 赞同：0
> 
> 时间：2012-11-30T08:25:57.257
> 
> 标签：eclipse, jsf, jakarta-ee, tomcat, primefaces

[我正在测试http://www.primefaces.org/showcase/ui/dialogLogin.jsf](http://www.primefaces.org/showcase/ui/dialogLogin.jsf)上的 PrimeFaces 示例。我在 Eclipse Dynamic Web 项目中正确导入了 PrimeFaces 和 JSF 2.1，但是在尝试登录时填写表单后，我收到以下错误：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: javax.el.MethodNotFoundException: Method not found: classi.LoginBean@ee03ec.login()
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:229)
root cause

org.apache.myfaces.view.facelets.el.ContextAwareMethodNotFoundException: javax.el.MethodNotFoundException: Method not found: classi.LoginBean@ee03ec.login()
    org.apache.myfaces.view.facelets.el.ContextAwareTagMethodExpression.invoke(ContextAwareTagMethodExpression.java:104)
    javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:88)
    javax.faces.event.ActionEvent.processListener(ActionEvent.java:51)
    javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:418)
    javax.faces.component.UICommand.broadcast(UICommand.java:103)
    javax.faces.component.UIViewRoot._broadcastAll(UIViewRoot.java:1028)
    javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:286)
    javax.faces.component.UIViewRoot._process(UIViewRoot.java:1375)
    javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:752)
    org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:38)
    org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
    org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
root cause

javax.el.MethodNotFoundException: Method not found: classi.LoginBean@ee03ec.login()
    org.apache.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:225)
    org.apache.el.parser.AstValue.invoke(AstValue.java:253)
    org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    org.apache.myfaces.view.facelets.el.ContextAwareTagMethodExpression.invoke(ContextAwareTagMethodExpression.java:96)
    javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:88)
    javax.faces.event.ActionEvent.processListener(ActionEvent.java:51)
    javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:418)
    javax.faces.component.UICommand.broadcast(UICommand.java:103)
    javax.faces.component.UIViewRoot._broadcastAll(UIViewRoot.java:1028)
    javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:286)
    javax.faces.component.UIViewRoot._process(UIViewRoot.java:1375)
    javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:752)
    org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:38)
    org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
    org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.21 logs.

Apache Tomcat/7.0.21 
```

LoginBean.java 是：

```
package classi;
import java.awt.event.ActionEvent;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;

import org.primefaces.context.RequestContext;
@ManagedBean(name="loginBean")
@SessionScoped
public class LoginBean
{
    private String username;  

    private String password;  

    public String getUsername() {  
        return username;  
    }  

    public void setUsername(String username) {  
        this.username = username;  
    }  

    public String getPassword() {  
        return password;  
    }  

    public void setPassword(String password) {  
        this.password = password;  
    }  

    public void login(ActionEvent actionEvent) {  
        RequestContext context = RequestContext.getCurrentInstance();  
        FacesMessage msg = null;  
        boolean loggedIn = false;  

        if(username != null  &&&& username.equals("admin") && password != null  && password.equals("admin")) {  
            loggedIn = true;  
            msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Welcome", username);  
        } else {  
            loggedIn = false;  
            msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "Login Error", "Invalid credentials");  
        }  

        FacesContext.getCurrentInstance().addMessage(null, msg);  
        context.addCallbackParam("loggedIn", loggedIn);  
    }  
} 
```

login.xhtml 是：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Insert title here</title>
</head>
<body>
<h:outputLink id="loginLink" value="javascript:void(0)" onclick="dlg.show()" title="login">     
    <p:graphicImage value="/images/login.png" />  
</h:outputLink>  

<p:growl id="growl" showDetail="true" life="3000" />  

<p:dialog id="dialog" header="Login" widgetVar="dlg">  
    <h:form>  

        <h:panelGrid columns="2" cellpadding="5">  
            <h:outputLabel for="username" value="Username:" />  
            <p:inputText value="#{loginBean.username}"   
                    id="username" required="true" label="username" />  

            <h:outputLabel for="password" value="Password:" />  
            <h:inputSecret value="#{loginBean.password}"   
                    id="password" required="true" label="password" />  

            <f:facet name="footer">  
                <p:commandButton id="loginButton" value="Login" update=":growl"   
                    actionListener="#{loginBean.login}"   
                    oncomplete="handleLoginRequest(xhr, status, args)"/>  
            </f:facet>

        </h:panelGrid>  

    </h:form>  
</p:dialog>  

<script type="text/javascript">  
    function handleLoginRequest(xhr, status, args) {  
        if(args.validationFailed || !args.loggedIn) {  
            jQuery('#dialog').effect("shake", { times:3 }, 100);  
        } else {  
            dlg.hide();  
            jQuery('#loginLink').fadeOut();  
        }  
    }  
</script>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:30:11.717

您的导入错误，请替换：

```
import java.awt.event.ActionEvent; 
```

和

```
import javax.faces.event.ActionEvent; 
```

另外，这 &&&& 工作吗？！如果它没有给你错误，也许你有一个特殊的编译器:)

```
if(username != null  &&&& username.equals("admin") && password != null  && password.equals("admin")) 
```

# svn - 重命名项目的 Git-svn/hgsubversion 克隆

> ID：13641442
> 
> 赞同：3
> 
> 时间：2012-11-30T08:26:56.903
> 
> 标签：svn, git-svn, hgsubversion

我有一个 SVN 项目，我想克隆到 Git 或 Mercurial。克隆到两个 VCS 工作正常，除了一个主要问题 - 我总是只得到最后一个修订版，没有任何其他历史记录。

我可以清楚地看到问题的根源是SVN项目最近被重命名（重命名是最后一个修订版，我唯一设法得到的）。使用 SVN，我可以毫无问题地查看项目背后的所有历史。

最奇怪的是，当我使用 git-svn clone 时，我可以看到它经历了无数次修订，据说是导入它们，但最后我仍然只得到一个修订。与 Git 不同的是，向后工作的 Mercurial 只接受最后一次修订并完成克隆。

此外，重要的是要注意，最后一个 SVN 项目重命名/移动并不是唯一的。在此之前至少还有两个其他重命名，我确实需要完整的项目历史，就像我使用 SVN 看到的一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:30:22.967

对于[mercurial](http://mercurial.selenic.com/)，我看到[本指南](http://mercurial.selenic.com/wiki/WorkingWithSubversion)可能会有所帮助。右侧有足够多的与[git-svn](https://stackoverflow.com/questions/tagged/git-svn)相关的其他问题来解决您的问题。

我假设你看到了[这个，由](http://trac.parrot.org/parrot/wiki/git-svn-tutorial)[Parrot](http://parrot.org/)项目完成的关于 git-svn 的教程。进一步看来，您需要在[git log](http://www.kernel.org/pub/software/scm/git/docs/git-log.html)之后执行[git rebase](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)以确定您要使用的修订哈希码。和以前一样，如果您需要更多信息，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:30:14.637

**想法**

*   由于不可能使用 PEG 修订版克隆不存在的 svn-URL

    `hg clone http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/Greetings@16`

    `abort: HTTP Error 404: Not Found`

即使

```
svn ls http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/Greetings@16
Hello.txt 
```

您可以尝试克隆 repo，使用父 od 重命名目录作为 root。对于同级路径，您将获得许多不相关的变更集，但是（如果重命名是公平的`svn move`）我希望，所有有问题的路径的 chageset 都将在 repo 中：您只有清理历史记录

*   拆分和合并

转储 SVN-repo，使用 svndumpfilter 将其拆分为单独的转储（根据更改的目录名称转储），将转储加载到单独的 svn-repos，将每个 svn-repo 克隆到自己的 Mercurial 回购（回购不能有多个颠覆来源），将回购拉入公共，修复历史

# java - 使用 java DOM 解析 XML

> ID：13641453
> 
> 赞同：4
> 
> 时间：2012-11-30T08:27:28.150
> 
> 标签：java, xml, dom

我是 Java 新手，我的任务是使用 http 和当前 url [http://belbooner.site40.net/testXmls/details.xml解析一个 xml 文件](http://belbooner.site40.net/testXmls/details.xml)

我创建了一些类来使用 Dom 方法解析它，但是我在尝试获取一个 Nodes 值时遇到了 java.lang.NullPointerException 所以这是代码

```
import java.security.KeyStore.Builder;
import java.util.*;
import java.io.*;
import java.net.*;
import javax.swing.text.Document;
import javax.xml.*;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.w3c.dom.*;
import org.w3c.dom.CharacterData;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class RequestResponse {
    public static void main(String[] args) throws ParserConfigurationException, IOException, SAXException {
        URL url = new URL("http://belbooner.site40.net/testXmls/details.xml");
        RequestResponse req= new RequestResponse();
        req.getHTTPXml(url);
    }

     void getHTTPXml(URL url) throws ParserConfigurationException, IOException, SAXException {

                //URL url = new URL("http://belbooner.site40.net/testXmls/details.xml");
                HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                conn.setRequestMethod("POST");
                conn.setRequestProperty("ACCEPT","application/xml");
                InputStream xml = conn.getInputStream();

                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
                DocumentBuilder builder = factory.newDocumentBuilder();
                org.w3c.dom.Document document = builder.parse(xml);

                System.out.println(document);
                String doctype = conn.getContentType(); 
                System.out.print(doctype);

                NodeList root = document.getChildNodes();

                Node server = getNodes("server",root);
                Node check = getNodes("check", server.getChildNodes());
                NodeList nodes = check.getChildNodes();

                String checkid= getNodeValue("checkid", nodes);
                System.out.println(checkid);

                conn.disconnect();  

                //return (Document) DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(xml);

     }

    Node getNodes(String tagName, NodeList nodes) {
        for(int i=0; i< nodes.getLength();i++) {
            Node node= nodes.item(i);
            if(node.getNodeName().equalsIgnoreCase(tagName)) {
                return node;
            }

        }
        return null;
    }

    String getNodeValue(String tagName, NodeList nodes ) {
        for ( int i = 0; i < nodes.getLength(); i++ ) {
            Node node = nodes.item(i);
            if (node.getNodeName().equalsIgnoreCase(tagName)) {
                NodeList childNodes = node.getChildNodes();
                for (int y = 0; y < childNodes.getLength(); y++ ) {
                     Node data = childNodes.item(y);
                     if ( data.getNodeType() == Node.TEXT_NODE ) {
                         return data.getNodeValue();
                     }
                     if(data instanceof CharacterData) {
                         CharacterData cd= (CharacterData) data;
                         return cd.getData();
                     }
                 }

            }
        }
        return "";
    }

    } 
```

我得到的堆栈跟踪如下：

```
application/xmlException in thread "main" java.lang.NullPointerException at 
RequestResponse.getHTTPXml(RequestResponse.java:45) at
RequestResponse.main(RequestResponse.java:22) 
```

改成`Node server = getNodes("server",root);``后

```
 Node resultNode = getNodes("result", root);
    Node server = getNodes("server", resultNode.getChildNodes());`

   `application/xmlException in thread "main" java.lang.NullPointerException
        at RequestResponse.getHTTPXml(RequestResponse.java:49)
        at RequestResponse.main(RequestResponse.java:22)

` 
```

请帮我找出问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:44:33.650

问题是`Node server = getNodes("server",root);`返回null。

为什么会这样？看看你是如何实现 getNodes 的

```
Node getNodes(String tagName, NodeList nodes) {
    for(int i=0; i< nodes.getLength();i++) {
        Node node= nodes.item(i);
        if(node.getNodeName().equalsIgnoreCase(tagName)) {
            return node;
        }
    }
    return null;
} 
```

您将作为单个“结果”节点的文档根作为输入，您遍历它并比较节点的名称在这种情况下是否为“服务器”，这永远不会，因此您返回 null 并获得一个 NPE。

您的节点查找必须通过以下方式完成：

```
 NodeList root = document.getChildNodes();
// Keep in mind that you have the following structure:
// result
//   server
//    checks
//     check
//      checkId
//     check
//      checkId

Node resultNode = getNodes("result", root);
Node server = getNodes("server", resultNode.getChildNodes());
Node checks = getNodes("checks", server.getChildNodes());
NodeList childNodes = checks.getChildNodes();
for (int i = 0; i < childNodes.getLength(); i++) {
    Node possibleCheck = childNodes.item(i);
    if (possibleCheck.getNodeName().equals("check")) {
    String checkid = getNodeValue("checkid", possibleCheck.getChildNodes());
    System.out.println(checkid);
    }
} 
```

这样，您将遍历正确的节点列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:10:47.410

在解析 xml 时，使用 XPath 更高效、更灵活（比正常迭代）。

[XPath Tutorial from IBM](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)
[XPath Reference Orielly tutorial](http://onjava.com/pub/a/onjava/2005/01/12/xpath.html)
[Xpath Reference Oracle java tutorial](http://docs.oracle.com/javase/tutorial/jaxp/xslt/xpath.html)

试试下面的代码。

```
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

public class RequestResponse {
    public static void main(String[] args) throws ParserConfigurationException,
            IOException, SAXException {
        URL url = new URL("http://belbooner.site40.net/testXmls/details.xml");
        RequestResponse req = new RequestResponse();
        req.getHTTPXml(url);
    }

    void getHTTPXml(URL url) throws ParserConfigurationException, IOException,
            SAXException {
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("POST");
        conn.setRequestProperty("ACCEPT", "application/xml");
        InputStream xml = conn.getInputStream();

        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        org.w3c.dom.Document document = builder.parse(xml);

        System.out.println(document);
        String doctype = conn.getContentType();
        System.out.println(doctype);

        XPathFactory pathFactory = XPathFactory.newInstance();
        XPath path = pathFactory.newXPath();
        XPathExpression expression;
        try {
            expression = path.compile("/result/server/checks/check/checkid");
            NodeList nodeList = (NodeList) expression.evaluate(document,
                    XPathConstants.NODESET);

            String checkids[] = getNodeValue(nodeList);
            for (String checkid : checkids) {
                System.out.print(checkid + ", ");
            }

        } catch (XPathExpressionException e) {
            e.printStackTrace();
        }
        conn.disconnect();

    }

    String[] getNodeValue(NodeList nodes) {
        String checkIds[] = new String[nodes.getLength()];
        for (int i = 0; i < nodes.getLength(); i++) {
            Node node = nodes.item(i);
            checkIds[i] = node.getTextContent();
        }
        return checkIds;
    }

} 
```

# sharepoint - sharepoint 2013 jslink 覆盖

> ID：13641454
> 
> 赞同：1
> 
> 时间：2012-11-30T08:27:33.097
> 
> 标签：sharepoint

名为 JSLink 的 Web 部件上的新 SharePoint 2013 属性允许我添加一些覆盖代码来自定义我的 Web 部件。

如何将 jquery 之类的库引入到该代码中，而不是添加到母版页中或需要手动编辑以确保其在页面上。我想将其保留在一个 JSLink js 文件中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-21T03:24:41.997

使用管道分隔您需要加载的脚本 | JSLink 中的符号，例如 /_layouts/15/jquery-2.0.3.js|/_layouts/15/jquery-ui.js|/_layouts/15/mytemplate.js

# ruby-on-rails - Rails 无法识别将变量设置为“false”？

> ID：13641461
> 
> 赞同：0
> 
> 时间：2012-11-30T08:28:06.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-migrations

我有以下（简化的）模型和迁移：

模型：

```
class User < ActiveRecord::Base
  attr_readonly :contacted

  validates :contacted, :inclusion => { :in => [true, false] }

  def set_contacted
    self.contacted = true
  end

  def unset_contacted
    # self.contacted = false
    self.contacted = "0"
  end
end 
```

移民：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.boolean :contacted,     :null => false, :default => false

      t.timestamps
    end
  end
end 
```

正如您在我的模型中的评论中看到的那样，将变量设置`contact`为 false 会导致错误 - 我只能将其设置为“0”。为什么？我看不出“假”如何违反空约束，对吧？

**编辑：** 为澄清起见，我使用的是 PostgreSQL 和 ActiveRecord。我得到的错误是这样的：

```
C:/Ruby193/lib/ruby/gems/activerecord-3.2.8/lib/active_record/validations.rb:56:in 'save!' Validation failed: ActiveRecord::RecordInvalid) 
```

即使我从模型中删除“验证”语句，即使我从迁移中删除 NULL 约束，我也会收到该错误。这与将属性的值设置为 false 有关。ActiveRecord 布尔值是否有一些奇怪的约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:01:05.360

在没有具体错误信息的情况下回答您的问题有点困难。

首先，我将更`attr_readonly`改为`attr_accessible`- 所以该字段将是可更新的。

其次，我会重写你的方法：

```
 def unset_contacted
    self.contacted = false
    self.save! # Saving your methods (the ! is for throwing an exception if it fails).
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:42:57.007

似乎没有人能够解决这个问题，但这对我来说不再是问题。使用 state_machine gem 可以更好地服务于我的模型，因此我完全删除了该字段。

# java - 字符串转字符数组，显示傻字符

> ID：13641462
> 
> 赞同：1
> 
> 时间：2012-11-30T08:28:18.153
> 
> 标签：java, arrays, string, char, to-char

这是一个非常简单的问题，但我需要另一只眼睛来查看我的代码：

```
String strtr = "iNo:";
char[] queryNo = strtr.toCharArray();
System.out.println(queryNo + " =this is no"); 
```

输出是：

```
[C@177b4d3 =this is no 
```

这些角色是什么，*你知道*吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T08:29:33.877

这就是`toString()`数组的实现方式。

`[C`表示是一个字符数组，是它的`177b4d3`哈希码。

你可能想看看

```
System.out.println(Arrays.toString(queryNo) + " =this is no"); 
```

如果你想再次看到你的原始字符串，你需要这个：

```
System.out.println((new String(queryNo)) + " =this is no"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:36:02.797

数组不会覆盖 toString()，它是从 Object.toString 继承的

```
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:42:11.607

您正在打印对象

`queryno`，就像`queryno`一个维度的字符数组一样，java是一种面向对象的语言，它以类的形式保存所有东西，它为您的数组提供**类名，其中** **表示总维度**并**表示数组的字符类型**，**Rest**是的哈希**码**目的。`[C``[` **`C`**

 ******* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T08:33:00.893

您正在尝试打印**数组**，这就是您出现乱码的原因。尝试使用`Arrays.toString(queryNo)`，你会看到你所期望的。******

# blackberry - 使用 BlackBerry 应用程序从服务器下载文件

> ID：13641467
> 
> 赞同：1
> 
> 时间：2012-11-30T08:28:43.957
> 
> 标签：blackberry, java-me, connection

我想使用 BlackBerry 应用程序通过 Internet 从服务器下载文件。使用哪种协议并不重要：FTP、HTTP 或其他协议都可以。我只需要用户单击“下载”按钮，然后应用程序从服务器下载此文件。

我不知道怎么做。我尝试了一些解决方案。其中一个我需要一个 HttpConnectorFactory ，但这不在我的 API 中。

几天来我一直在寻找我的问题的答案，但我还没有找到有效的解决方案。

我尝试过的解决方案的链接：

*   [如何在 BlackBerry 应用程序中下载 html 文件](https://stackoverflow.com/questions/5007127/how-to-download-an-html-file-in-a-blackberry-application)

*   [https://stackoverflow.com/questions/6290988/downloading-a-pdf-file-from-a-webserver-in-blackberry-java-application](https://stackoverflow.com/questions/6290988/downloading-a-pdf-file-from-a-webserver-in-blackberry-java-application)

*   [网络助手类](http://www.versatilemonkey.com/blog/index.php/2009/06/24/networking-helper-class/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:10:28.127

试试这个 -

```
ConnectionFactory connFact = new ConnectionFactory();
ConnectionDescriptor connDesc = connFact.getConnection(your_url);
HttpConnection httpConn = (HttpConnection) connDesc.getConnection();
try {
    httpConn.setRequestMethod(HttpConnection.GET);
    InputConnection inputConn = (InputConnection) httpConn;
    InputStream is = inputConn.openInputStream();
    byte[] data =IOUtilities.streamToBytes(is);
    //the value in data will be the bytes of your file.
    // now if you want to save the file, you can do it here......
} catch (IOException e) {
    e.printStackTrace();
} 
```

# android - 以编程方式设置 imageView 时的空指针

> ID：13641468
> 
> 赞同：1
> 
> 时间：2012-11-30T08:28:48.337
> 
> 标签：android, imageview, width, layout-inflater

我正在膨胀 xml，并从这个 xml 创建视图。我需要修改图像的宽度，但出现 NullPointerException。

我的代码是：

```
for (int o = 0; o < study.size(); o++) {
     LayoutInflater li_est= (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final View vEst = li_est.inflate(R.layout.study_details, null);

 line = (ImageView)findViewById(R.id.img_line);

 if (getResources().getConfiguration().orientation==Configuration.ORIENTATION_LANDSCAPE) {
      **// HERE NEED CHANGE WIDTH OF LINE BUT I GET THE EXCEPTION**
} 
```

我尝试通过以下方式这样做：

```
 1\.     line.getLayoutParams().width = 20;
 2\.     line.setMaxWidth(20);
 3\.     line.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

我认为问题来自通货膨胀，任何解决方案，谢谢你，我为我糟糕的英语道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:30:29.427

```
 final View vEst = li_est.inflate(R.layout.study_details, null);
 line = (ImageView)vEst.findViewById(R.id.img_line); 
```

可能 line 是在 stud_`details`布局内声明的，因此您需要`vEst`对象来检索它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:31:29.363

你必须在膨胀的视图上执行 findViewById() ......所以这样做：

最终视图 vEst = li_est.inflate(R.layout.study_details, null); line = (ImageView) **vEst** .findViewById(R.id.img_line);

# iphone - iPhone中的PageControl问题

> ID：13641473
> 
> 赞同：1
> 
> 时间：2012-11-30T08:29:08.790
> 
> 标签：iphone, objective-c, ios, xcode

当我单击任何图像时，我有一个网格视图，我发送该网格视图的当前索引，以便我可以看到该图像。我正在从文档中加载图像。下面是我的 viewDidload 代码。但我的问题是什么。当我单击任何 gridview 项目时。假设它的索引是 4。我在 currentpage=4 中设置它。所以当我打开这个页面时。它向我展示了第四张图片。但我的页面控制器当前页面是 4，但我可以看到我的图像位于索引 1。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    pageControlBeingUsed = NO;
    UIImageView *subview;
    //NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor orangeColor],[UIColor blueColor], nil];
    for (int i = 0; i < (NSInteger)totalImagesInGrid; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        subview = [[UIImageView alloc] initWithFrame:frame];
        //subview.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:[tableDataArray objectAtIndex:i]]];
        NSString *name = [tableDataArray objectAtIndex:(NSUInteger)i];
        NSFileHandle* myFileHandle = [NSFileHandle fileHandleForReadingAtPath:name];
        UIImage* loadedImage = [UIImage imageWithData:[myFileHandle readDataToEndOfFile]];
        subview.image = loadedImage;
        [self.scrollView addSubview:subview];
        [subview release];
    }
    //float count = [totalImagesInGrid floatValue];
    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * 13, self.scrollView.frame.size.height);
    self.pageControl.currentPage = (NSInteger)currentImage;
    NSLog(@"currentPage  %d",(NSInteger)currentImage);
    self.pageControl.numberOfPages = (NSInteger)totalImagesInGrid;
    NSLog(@"(NSInteger)totalImagesInGrid  %d",(NSInteger)totalImagesInGrid);
}

- (void)scrollViewDidScroll:(UIScrollView *)sender {
    if (!pageControlBeingUsed) {
        // Switch the indicator when more than 50% of the previous/next page is visible
        CGFloat pageWidth = self.scrollView.frame.size.width;
        int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
        self.pageControl.currentPage = (NSInteger)currentImage + page;
        NSLog(@"Page %d",page);
    }
    NSLog(@"scrollViewDidScroll");
}

- (IBAction)changePage {
// Update the scroll view to the appropriate page
CGRect frame;
frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;
[self.scrollView scrollRectToVisible:frame animated:YES];

pageControlBeingUsed = YES; 
```

}

这是我的gridview，我点击（1,1）图像。

![在此处输入图像描述](../Images/b9b5ee20c5770a324da4c38ba3274323.png)

这是我的页面控制视图。但这不是我选择的图像。这是 (0,1) 图像，但在页面控件中看到它位于索引 2 上。

![在此处输入图像描述](../Images/f32c3d108822c2ac4f9f94c870b14bea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:50:02.193

使用 gridview 的 selectedIndex 设置页面索引，例如见下文...

```
- (void) gridView:(UIGridView *)grid didSelectRowAt:(int)rowIndex AndColumnAt:(int)colIndex{
    ///set Image with index of colIndex..
    int selectedIndex = (rowIndex*4)+colIndex;
    NSLog(@"\n Selected Image Index is %d",selectedIndex);
} 
```

并在 SecondView 类的最后`viewDidLoad:`调用你的 secondView 类方法`changePage` ，如下所示

```
- (void)viewDidLoad {
    ////another your code
    [self changePage] 
} 
```

我希望这对你有帮助..

# asp.net-mvc-4 - MVC4 访问和身份脚本/样式文件问题

> ID：13641477
> 
> 赞同：1
> 
> 时间：2012-11-30T08:29:24.423
> 
> 标签：asp.net-mvc-4, iis-express

我已经在 Identity and Access Add-in 页面和 MVC 论坛上发布了这个问题，但目前还没有解决方案，所以我想我会尝试很多。

我有一个问题，如果我将 Identity and Access 添加到 MVC4 项目，对脚本和 css 文件的请求会变得不稳定，并且通常不会由 iisexpress 提供服务。

## 重现步骤：

* * *

创建一个新的 MVC4 项目 - Basic，带有 Razor 引擎

添加一个名为 Home 的控制器 - 只是裸控制器。

为 Home 控制器上的操作索引创建视图索引。使用 _viewStart 中定义的内置布局，因此包括捆绑的 jquery 和 modernizr

为应用程序启用 IISExpress

测试这个应用程序 - 应该可以正常工作。刷新，重新加载等，一切正常。

接下来，使用本地开发 STS 在应用程序上配置 Identity and Access。将所有内容保留为默认值。

再次测试应用程序。您应该看到它通过 localSTS 身份验证，然后请求 Home/Index 操作 - 此时它尝试获取脚本文件但这些请求挂起。页面已交付，但无法呈现，因为标记中的脚本文件阻止它这样做，直到脚本请求超时。

如果您在 chrome 中启动另一个浏览器会话，那么您可以导航到脚本文件，它将在该会话中下载。

* * *

这种状态的压缩项目在这里：[https ://www.dropbox.com/s/dy2bs5fh70kubp6/MvcApplication3.zip](https://www.dropbox.com/s/dy2bs5fh70kubp6/MvcApplication3.zip)

我使用 fiddler 和 wireshark 来尝试确定正在发生的事情，但似乎对 iisexpress 的请求挂起。我在我的两台机器上都试过这个。一个是 64 位的，另一个不是。VS2012 Professional V 11.0.50727.1 RTMREL，.NET framework 4.5.50709，以我的身份登录，本机管理员，VS以管理员身份运行

有什么想法吗？

* * *

编辑：我尝试过的更多事情： - 使用 Azure STS 具有相同的效果。- 删除默认情况下的标签意味着脚本文件都是可访问的，似乎所有时间都需要，但 Thread.CurrentPrincipal.Identity 是通用身份 - 即用户未经过身份验证。将 [Authorize] 属性添加到我的 BaseController 然后强制使用 STS 进行身份验证，就像使用 web.config 指令一样，然后脚本和 css 文件也存在相同的问题。我有点希望这可能会起作用，因为它只删除了从项目根目录到控制器的任何身份验证，但是，唉，没有乐趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:43:39.787

瞧。它是 AVG 杀毒软件

出于某种原因，AVG 和 Identity and Access 插件的组合会导致此问题。

我曾尝试禁用 AVG 的各种组件，但似乎唯一的解决方案是完全禁用它。

因此，鉴于此，谁能推荐一款不会干扰开发活动的 AV？

# android - 具有多个进程栏的 android 通知扩展视图

> ID：13641479
> 
> 赞同：0
> 
> 时间：2012-11-30T08:29:35.783
> 
> 标签：android, notifications

我想要我的应用程序可以同时下载多个文件并在通知区域显示下载每个文件的过程我该怎么做？现在我下载文件时只能显示 1 个进程栏。这里文件 notification_progress_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:padding="5dp">
<ImageView android:id="@+id/status_icon"
    android:layout_width="wrap_content" 
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true" 
    android:layout_marginRight="10dp"
    android:src="@drawable/icon_download1"/>

<RelativeLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_toRightOf="@id/status_icon">

    <TextView android:id="@+id/status_text" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_alignParentTop="true" 
        />
    <ProgressBar android:id="@+id/status_progress"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_below="@id/status_text"
        android:indeterminate="false" 
        android:indeterminateOnly="false"
        style="?android:attr/progressBarStyleHorizontal"  />

</RelativeLayout> 
```

和通知文件

```
 Intent notificationIntent = new Intent();
        PendingIntent contentIntent = PendingIntent.getActivity(activity, 0, notificationIntent, 0);
        notificationManager = (NotificationManager) activity.getSystemService(Context.NOTIFICATION_SERVICE);
        notification = new Notification(R.drawable.icon_download1, "Downloading...", System.currentTimeMillis());

        contentView = new RemoteViews(activity.getPackageName(), R.layout.notification_progress_layout);
        contentView.setProgressBar(R.id.status_progress, 100, 0, false);        
        contentView.setTextViewText(R.id.status_text,"Downloading...");  

        notification.flags = notification.flags| Notification.FLAG_ONGOING_EVENT;
        notification.contentView = contentView;         
        notification.contentIntent = contentIntent;

        notificationManager.notify(NOTIFICATION_ID,notification); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:41:39.693

这样做：

1.  创建一个带有`LinearLayout`内部的默认 XML。
2.  创建另一个带有`ProgressBar`内部的布局。
3.  使用以下代码。

代码：

```
contentView = new RemoteViews(activity.getPackageName(), R.layout.notification_progress_main);
for (i=0; i<downloads.length;i++){
   contentView2 = new RemoteViews(activity.getPackageName(), R.layout.notification_progress_layout);
   contentView2.setProgressBar(R.id.status_progress, 100, 0, false); 
   contentView.addView(R.layout.linearid, contentView2);

}
notification.contentView = contentView;
notificationManager.notify(NOTIFICATION_ID,notification); 
```

使用正确的值更改每次下载的进度条值。

# php - Wordpress get_permalink($this->get_pageid()) 显示错误的网址

> ID：13641481
> 
> 赞同：-1
> 
> 时间：2012-11-30T08:29:49.057
> 
> 标签：php, wordpress

我正在使用`get_permalink($this->get_pageid())`获取页面网址。

我的永久链接是作为示例帖子启用的。应该是`example.com/forum`，但它正在显示`example.com/login`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:41:31.990

您的问题不太清楚，因为`get_pageid()`它不是 wordpress 的本机功能，而且您没有提供任何代码。无论如何...

实际上[get_permalink()](http://codex.wordpress.org/Function_Reference/get_permalink)需要一个可选`id`参数作为参数，它应该是一个整数，只有当你在循环外使用它时才需要它，所以确保你`$this->get_pageid()`返回一个整数值。例如，它应该是这样的

```
get_permalink(10) // 10 should be your page/post id 
```

你也可以使用

```
get_permalink(get_page_by_title('Some Page')) // Some Page is page/post title 
```

或者，您可以使用

```
global $post;
get_permalink($post->ID); // $post->ID will return the page/post id 
```

当你在循环之外。希望这可以帮助。

# c++ - c++ 代码的分析器，非常困

> ID：13641484
> 
> 赞同：4
> 
> 时间：2012-11-30T08:29:58.953
> 
> 标签：c++, profiling, verysleepy

我是分析的新手。我想优化我的代码以满足时序约束。我使用 Visual C++ 08 Express，因此不得不下载一个分析器，对我来说它非常困。我做了一些搜索，但没有找到像样的关于 Sleepy 的教程，我的问题是：如何正确使用它？我掌握了 profiling 的大体思路，所以我按照 %exclusive 进行排序，找到我的瓶颈。首先，在这个列表的顶部，我有**ZwWaitForSingleObject**、**RtlEnterCriticalSection**、**operator new**、**RtlLeaveCriticalSection**、**printf**，一些迭代器......在他们占据了大约 60% 之后，我的第一个函数出现了，第一个位置是子调用。有人可以解释一下为什么上面提到的出现，它们是什么意思，如果我无法访问这个关键的 60%，我该如何优化我的代码？（对于“源文件”：未知...）。另外，对于我的函数，我认为我每行都有时间，但事实并非如此，例如算术或某些函数没有时间（未嵌套在未使用的“if”子句中）。最后一件事：如何找出某些行可以超快执行，但被调用数千次，成为实际的瓶颈？

最后，瞌睡好吗？或者我的平台的一些免费替代品？

帮助非常感谢！干杯！

*   *   *   *   更新 - - - - -

我找到了另一个版本的分析器，称为plain Sleepy。它显示了一些片段被调用了多少次加上行数（我猜它指向关键的一个）。所以在我的情况下.. **KiFastSystemCallRet**需要**50%**！这意味着它正在等待一些数据，对吗？如何改善这件事，是否有一种体面的方法来追踪导致这些多次调用的原因并最终删除/更改它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:05:48.757

> 我想优化我的代码以满足时序约束

你在这个行业遇到了一个持久的问题。您想找到使您的代码花费更少时间的方法，而您（和许多人）假设（并且已经被教导）唯一的方法是进行各种测量。

有少数观点，它唯一要推荐的是[实际的显着结果](https://stackoverflow.com/a/927773/23771)（[加上它背后的铁定理论](https://scicomp.stackexchange.com/a/2719/1262)）。

如果你有一个“瓶颈”（你有，可能有几个），它只需要一小部分时间，比如 30%。
*只需将其视为待发现的错误*。

使用暂停按钮随机停止程序，并仔细查看程序在做什么以及为什么这样做。询问是否可以摆脱它。这样做 10 次。平均而言，您会在 3 次停顿中看到问题。您多次看到的任何活动（如果不是真正必要的）都是速度错误。这并不能准确地告诉您问题的成本是多少，但它确实可以准确地告诉您问题是什么，并且值得解决。您会以这种分析器无法找到的方式看待事物，因为分析器只是程序，不能对机会的构成有广泛的认识。

有些人厌恶风险，认为它可能无法提供足够的加速而不值得。诚然，低回报的可能性很小，但这就像投资。该理论表明，平均而言，这是值得的，而且获得高回报的可能性也很小。无论如何，如果您担心风险，再多做几个样品就可以解决您的担忧。

解决问题后，剩余的瓶颈每个都占较大的百分比，因为它们并没有变小，但整个程序却变小了。因此，当您重复整个过程时，它们会更容易找到。

有很多关于分析的文献，但实际上很少能说明它在实践中实现了多少加速。 这是一个具有近 3 个数量级加速[的具体示例。](http://sourceforge.net/projects/randompausedemo/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:06:13.167

我使用 GlowCode（商业产品，类似于 Sleepy）来分析本机 C++ 代码。您运行检测过程，然后执行您的程序，然后查看该工具生成的数据。检测步骤在每个方法的入口点和出口点注入一点跟踪函数，并简单地测量每个函数运行到完成所需的时间。

使用调用图分析工具，我列出了从“最常用”到“最少使用时间”排序的方法，该工具还显示调用计数。只需深入研究百分比最高的例程，就可以向我展示哪些方法使用时间最长。我可以看到有些方法非常慢，但深入研究它们后我发现它们正在等待用户输入或服务响应。有些需要很长时间，因为他们每次调用都会调用一些内部例程数千次。我们发现有人犯了一个编码错误，并且正在为列表中的每个项目重复遍历一个大型链表，而他们实际上只需要遍历一次。

If you sort by "most frequently called" to "least called", you can see some of the tiny functions that get called from everywhere (iterator methods like `next()`, etc.) Something to check for is to make sure the functions that are called the most often are really clean. Saving a millisecond in a routine called 500 times to paint a screen will speed that screen up by half a second. This helps you decide which are the most important places to spend your efforts.

我已经看到了两种使用分析的常用方法。一种是做一些“一般”的分析，运行一套“正常”的操作，并发现哪些方法最能减慢应用程序的速度。另一种是做具体的分析，关注具体的用户对性能的抱怨，并通过这些功能来揭示他们的问题。

我要提醒您的一件事是将您的更改限制在那些会显着影响用户体验或系统吞吐量的更改。将鼠标点击缩短一毫秒对普通用户来说并没有什么不同，因为人类的反应时间并没有那么快。赛车手的反应时间在 8 毫秒范围内，一些精英 twitch 游戏玩家甚至更快，但银行柜员等普通用户的反应时间在 20-30 毫秒范围内。好处将是微不足道的。

进行 20 个 1 毫秒的改进或 2 个 20 毫秒的更改将使系统响应更快。如果你能在许多小改进上做一个大改进，那就更便宜更好了。

同样，将每秒处理 100 个用户的服务缩短 1 毫秒将带来 10% 的改进，这意味着您可以改进服务以每秒处理 110 个用户。

令人担忧的原因是，为了提高性能而进行的严格编码更改通常会通过增加复杂性而对代码的结构产生负面影响。假设您决定通过缓存结果来改进对数据库的调用。你怎么知道缓存什么时候失效？是否添加缓存清理机制？考虑一个金融交易，其中循环遍历所有行项目以产生运行总计很慢，因此您决定保留 runningTotal 累加器以更快地回答。您现在必须针对各种情况修改 runningTotal，例如行空、反转、删除、修改、数量变化等。它使代码更复杂，更容易出错。

# javascript - AngularJS 可在多列中排序

> ID：13641485
> 
> 赞同：0
> 
> 时间：2012-11-30T08:30:06.843
> 
> 标签：javascript, jquery, jquery-ui, angularjs

我正在尝试找到在 Angular JS 中执行诸如可排序的 JQuery 之类的最佳方法。我知道 angular-ui 中有 sortbale 指令，但我需要的是能够在多列中拖放项目。

在 JQuery 中，这是由`$(el).sortable({connectWith: '.column'});`

有没有办法在 Angular 中做到这一点？作为 Angular 新手，我不想玩 JQuery 可排序，因为我知道它不适合 Angular 模型（DOM 在 jQuery 中操作，在 Angular 上下文之外，所以让它同步很棘手）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:39:02.143

您只是在寻找[orderBy](http://docs.angularjs.org/api/ng.filter%3aorderBy)过滤器吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T17:15:42.590

您需要包括：

1.  jQuery
2.  jQueryUI
3.  角

您需要创建一个指令：

```
directives.directive('sortable', function() {
    return {
        restrict: 'A',
        link: function(scope, element) {
            element.sortable({
                connectWith: ".column",
                start: function(event, ui) {},
                stop: function(event, ui) {},
                receive: function(event, ui) {}
            });
        }
    };
}); 
```

您需要应用该指令：

```
<div class="column" sortable></div> 
```

在上面的示例中，可排序对象可以与类列连接。

# netbeans - Netbeans 和 PHPUnit 骨架生成器：没有这样的文件或目录

> ID：13641486
> 
> 赞同：1
> 
> 时间：2012-11-30T08:30:09.267
> 
> 标签：netbeans, phpunit

我使用 netbeans 7.2.1 和最新的 phpunit。当我想通过右键单击 php 类在 netbeans 中生成单元测试时，工具-> 创建 phpUnit 测试骨架生成器会抛出错误：没有这样的文件或目录。

```
require_once(/sharedResources/connection.inc.php): failed to open stream: No such file or directory 
```

问题是 require_once 中显示的路径是错误的。它是这样生成的：

```
$sharedResources = getenv("DOCUMENT_ROOT") . "/sharedResources"; 
```

并且应该解析为绝对文件路径。当应用程序在 apache 中运行时，这可以正常工作。但是，从 netbeans 运行时似乎 getenv("DOCUMENT_ROOT") 是错误的。我的问题是如何正确设置它？我的申请在

```
getenv("DOCUMENT_ROOT") . "/MyApp"; 
```

我正在为其创建测试的文件在

```
"MyApp/services" 
```

在项目属性下有一个选项 web root，但它是灰色的，并且无法将其设置为比您的应用程序高一级的文件夹。

我该如何解决这个问题？

编辑：

进一步澄清：

我最初有一个 sharedResources 的相对文件路径，它也不起作用。我改成这个并且 coruse ti 是有道理的，因为 DOCUMENT_ROOT 是由 apache 设置的，因此在 netbeans 中运行时没有设置。所以临时修复是添加

```
$docRoot = getenv("DOCUMENT_ROOT");
if(empty($docRoot)){
    putenv("DOCUMENT_ROOT=C:/xampp/htdocs");
} 
```

到每个班级的负责人。当然，这不是一个非常实用或好的解决方案。我需要告诉 netbeans 设置这个环境变量或使用正确的相对路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:38:27.477

那么这是我的解决方案。这并不理想，但简单且有效。问题是当脚本不是由 Apache 而是由 netbeans 调用时，DOCUMENT_ROOT 显然是空的。因此它必须以某种方式设置。为此，我编辑了 php 文件`phpunit-skelgen`（它没有文件结尾，但它是一个 php 文件）。

在许可证文本下方作为我添加的第一行 php

```
putenv("DOCUMENT_ROOT=C:/xampp/htdocs"); 
```

那成功了。

# c++ - 如何设置 GMock EXPECT_CALL 为模拟函数调用两个不同的函数

> ID：13641490
> 
> 赞同：6
> 
> 时间：2012-11-30T08:30:23.827
> 
> 标签：c++, gmock

在“测试套件”中的测试函数中调用模拟函数时如何调用两个不同的函数？

详细信息：模拟函数在测试函数中被调用两次。第一次调用时，它应该调用一个函数（测试套件中的本地函数），第二次调用时，它应该调用另一个函数（测试套件中的另一个本地函数）。

那么，如何为上述要求设置 EXPECT_Call 和“Invoke”呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T08:52:55.623

You should use `WillOnce`.

Something like this (not tested) :

```
struct A
{
  MOCK_METHOD0( foo, void());
};

class A_Test : public ::testing::Test
{
  A a;

  void bar1(){}
  void bar2(){}
};

TEST_F( A_Test, test_1 )
{
  EXPECT_CALL( a, foo() )
     .WillOnce( Invoke( this, &A_Test::bar1 ) )
     .WillOnce( Invoke( this, &A_Test::bar2 ) );
} 
```

# ruby-on-rails - rails array 在生产中输出奇怪的格式

> ID：13641493
> 
> 赞同：4
> 
> 时间：2012-11-30T08:30:54.940
> 
> 标签：ruby-on-rails, ruby

有人见过这个数组错误吗？我有一个返回数组的辅助方法。在我的笔记本电脑的开发模式下，它以预期的格式返回数组：

```
var fire = 
[[1349083353000, 8.860000000000582], [1349085153000, 19.779999999999745],
[1349086953000, 20.289999999999964], [1349088753000, 29.850000000000364], 
[1349090553000, 3.7999999999992724]]; 
```

但是生产中的相同代码返回一个奇怪的数组格式：

```
var fire = 135175422800015.5135175602800020.0135175782800018.99135175962800012.33135176142800019.13135176322800029.55135176502800020.13135176682800077.34 
```

我曾尝试在任一机器上检查 rails 控制台中的输出，并且生产输出相同的奇怪数组格式。我在生产中从 Rails 控制台中创建了一个新数组，它按预期工作以输出正确格式的数组。

有人见过这种奇葩的吗？

```
Rails version:3.2.8
Ruby Version:1.9.3p-125 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T08:40:17.733

您可能正在 Ruby 1.9 上进行开发并在 Ruby 1.8 上进行部署。处理数组的默认行为是不同的。

在 Ruby 1.8`array.to_s`中相当于`array.join('')`.

在 Ruby 1.9`array.to_s`中相当于`array.inspect`.

如果您希望两者都具有正确的行为，并且您正在使用 JavaScript，您可能希望将其呈现为 JSON，`array.to_json`而不是使用。

# haskell - 在 haskell 模式下找不到 haskell 进程文件

> ID：13641500
> 
> 赞同：2
> 
> 时间：2012-11-30T08:31:28.213
> 
> 标签：haskell, emacs, haskell-mode

我正在尝试按照haskell wiki 设置emacs 来编程haskell。我正在使用haskell模式，这似乎可以正常工作，但是现在我尝试生成haskell标签以便能够使用M-打开文件。捷径。我安装了hasktags和haskell-mode，如下所述：[http](http://www.haskell.org/haskellwiki/Emacs/Project_navigation) ://www.haskell.org/haskellwiki/Emacs/Project_navigation 。但是，当我尝试通过 Mx haskell-process-generate-tags 生成标签时，出现“未找到”错误。我发现了一篇关于堆栈溢出的帖子，[如何设置haskell-mode 来生成标签？](https://stackoverflow.com/questions/13220672/how-do-i-set-up-haskell-mode-to-generate-tags)，它描述了我的问题并通过从 .emacs.d/el-get/haskell-mode/haskell-process.el 作为路径加载 haskell-process 来解决它。

但是，我在 Ubuntu 上，我通过 aptitude 安装了 haskell-mode（当然还有 haskell-platform 和 emacs），并且似乎不包含该帖子中提到的这个 haskell-process.el 文件。然后我尝试通过 el-get 下载 haskell-mode，但也没有包含 haskell-process 文件。

所以，我的问题是，我是否正确假设我需要 haskell-process 文件才能生成标签，如果是这样，我在哪里可以获得该文件？我想我在 haskell-mode 的 git repo 中看到了它，我当然可以将它取出并放在我的目录中，但我有一种感觉，如果我不得不求助于它，这意味着我做错事。

卡斯帕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:54:24.203

Emacs 软件包在基于 Debian 的发行版中通常已经过时，而且我认为 Ubuntu 仍然有非常旧版本的 haskell-mode。最好通过 package.el 安装 haskell-mode，它与 Emacs 捆绑在一起。package.el 的新版 haskell-mode 可通过[MELPA 获得](http://melpa.milkbox.net/)。我可以为其他 Emacs 包提供类似的建议；-)

# javascript - 我可以使用 JavaScript 或 HTML 打开 IE 10 兼容性视图吗？

> ID：13641503
> 
> 赞同：9
> 
> 时间：2012-11-30T08:31:30.113
> 
> 标签：javascript, html, internet-explorer-10

如何在 Javascript 或 HTML 中以编程方式打开 IE 10 兼容性视图？

我刚刚在标签中添加了以下元标签`<head>`，但它不起作用。

```
<meta http-equiv="x-ua-compatible" content="IE=EmulateIE7" > 
```

有没有办法在 JS 中做同样的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T09:01:29.917

我查看了 msdn 上的兼容模式文章 -[此处](http://msdn.microsoft.com/en-gb/library/ie/hh920756%28v=vs.85%29.aspx)。

您的元标记仍然是在 IE 10 和 IE 9 中启用兼容模式的方法。

只要你有：

```
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
    <!-- Other meta tags etc. -->
<head> 
```

然后它应该工作。您可以尝试使 http-equiv 值区分大小写（此时您已将其设置为小写）。

另外，为了回答您关于JS的问题，您可以通过将浏览器引擎与IE浏览器版本进行比较来检测浏览器是否处于兼容模式。但是，这涉及浏览器版本检测，这往往有点不可靠。此外，您无法在 JS 中设置用户的兼容模式。因此，至少目前，您必须坚持使用元标记。

我希望这有帮助。

* * *

[IEhttpheaders](http://www.blunck.info/iehttpheaders.html)是一个可以让您查看 http 标头信息的好插件。只需从该链接下载并安装即可。然后，当您启动 IE 时，转到工具菜单并选择“DisplayIEhttpHeaders...”。当您访问您的网站时，它将列出标头响应。如果您修改答案以包含响应，那么我们可以查看是否是问题所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:47:05.320

你说“我刚刚在标题标签中添加了以下元标签”。你的意思是：

1.  `<header>`标签_
2.  `<head>`标签？

`x-ua-compatible`元标签确实需要进入标签内部，`<head>`而不是`<header>`标签。

# python - 程序运行中的while循环

> ID：13641504
> 
> 赞同：-1
> 
> 时间：2012-11-30T08:31:44.690
> 
> 标签：python, for-loop

我有我正在编写的这个程序，我希望它退出。

意思是，当我输入`Q`或给它一个输入时`Q`，它应该向我显示..

```
Press Q to quit: Q   
And it should show >>> in next line 
```

但到目前为止，我有：

```
list = ['Approval', 'Range', 'Plurality', 'IRV', 'Borda', 'Q']
input_prompt = prompt_from_list('Select a voting system or Q to quit:', list)
while input_prompt != 'Q':

approval_file = open(APPROVAL_BALLOT_FILENAME, 'r')
approval = approval_file.readlines()
approval_file.close()

if input_prompt == 'Approval':
    print('Running for Approval')
    prompt_riding = prompt_for_riding("Which riding would you like to see results for? (Enter a number between 0 and 307, or all.):",
                      307)

    list = format_approval_list(approval, prompt_riding)
    a = vs.voting_approval(list)

    country = print_country_results(a[1])
elif input_prompt == 'Range':
    print('Running for Range')
    prompt_riding = prompt_for_riding("Which riding would you like to see results for? (Enter a number between 0 and 307, or all.):",
                      307)
         print prompt_riding 
```

现在它应该继续循环..在我们输入提示之后它应该转到prompt_riding，但它没有......:(

```
>>>Select a voting system or Q to quit:
 Approval, Range, Plurality, IRV, Borda, Q
Approval
Running for Approval
Which riding would you like to see results for? (Enter a number between 0 and 307, or all.):0
Which riding would you like to see results for? (Enter a number between 0 and 307, or all.):

It should show me.. 
Select a voting system or Q to quit:
  Approval, Range, Plurality, IRV, Borda, Q 
```

有没有一种可能的方法可以关闭无限的while循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:35:07.323

你可以试试这个：

```
input_prompt = '' # To get into the loop first time

# Start loop
while input_prompt != 'Q':

    # Now ask for voting system
    input_prompt = prompt_from_list('Select a voting system or Q to quit:', list)
        ...

    if input_prompt == 'Approval':
        ...
        prompt_riding = input("Which riding would you like to see results for? (Enter a number between 0 and 307, or all.):")

        # If the user has selected to Quit
        if prompt_riding == 'Q':
            break # Exit loop

        # Continue checking what prompt_input is
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:39:37.647

我是你我会使用 tkinter 来操纵事件：

```
# respond to a key without the need to press enter
import Tkinter as tk
def keypress(event):
    if event.keysym == 'Q':
        root.destroy()
    x = event.char

root = tk.Tk()
print "Press Q to Quit:"
print ">>> "
root.bind_all('<Key>', keypress)
# don't show the tk window
root.withdraw()
root.mainloop() 
```

# cxf - Servicemix 部署中没有 cxfEndpoint 声明

> ID：13641510
> 
> 赞同：1
> 
> 时间：2012-11-30T08:32:27.470
> 
> 标签：cxf, apache-servicemix

我正在尝试让 CXF 端点在 Servicemix 4 上工作。我创建了一个带有 CXF 端点的 Spring 原型，并使用 Maven 成功安装了它。运行 osgi:install - s mvn: 它安装到 Servicemix 但日志显示：

```
 Application context refresh failed (OsgiBundleXmlApplicationContext(bundle=springdm, 
 config=osgibundle:/META-INF/spring/*.xml))  
 org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 21 in XML document 
 from URL [bundle://218.0:0/META-INF/spring/camel-context.xml] is invalid; nested exception is 
 org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no 
 declaration can be found for element 'cxf:cxfEndpoint' 
```

我之前在我的 context.xml 文件中使用以下内容在 Camel 上构建了这条路线：

```
<beans ...
   xmlns:osgi="http://www.springframework.org/schema/osgi"
   xmlns:cxf="http://camel.apache.org/schema/cxf"
   xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
   http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi.xsd
   http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
   http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd
   http://cxf.apache.org/tranposrts/camel http://cxf.apache.org/tranposrts/camel.xsd">
   <import resource="classpath:META-INF/cxf/cxf.xml" />
<cxf:cxfEndpoint id="wspoc"
            address="http://localhost:8181/ws/ping"
            serviceClass="net.ja.smx.springdm.PongImpl" />
<camelContext xmlns="http://camel.apache.org/schema/spring">
  <route>
    <from uri="cxf:bean:wspoc"/>
    <to uri="activemq:helloQ" />
  </route>
</camelContext> 
```

这是一个工作骆驼上下文文件的克隆，但我看不出为什么 ServiceMix 在启动时会抛出错误。唯一的区别是 pom 文件不使用 CXF 作为依赖项，但它位于我从在线示例中获取的部分中。

对于任何丢失的导入或对上下文文件的更正或我应该检查的任何内容的任何指针，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:30:34.523

发布后不久，我发现我的 POM 文件中缺少 camel-cxf 依赖项，这会导致此错误。我还需要确保它是正确的版本，因为这会导致 ServiceMix 在查找正确的 META.cxf 文件时出错。

# matlab - 图像处理：对象的旋转对齐

> ID：13641511
> 
> 赞同：7
> 
> 时间：2012-11-30T08:32:33.913
> 
> 标签：matlab, image-processing, octave, imagej

我有一堆图像，中间有一个栏。随着堆栈的进展，条形图围绕一端旋转，整个堆栈包含图像，条形图以许多不同的角度旋转，最高或低于水平 45 度。

如此处所示：

![在此处输入图像描述](../Images/819932e73b9cad0ae8497bd7d9fc8101.png)

我正在寻找一种方法来旋转条形图和/或整个图像并在进行其他处理之前水平对齐所有内容。理想情况下，这将在 Matlab / imageJ / ImageMagick 中完成。我目前正在尝试使用第一个 Canny 边缘检测，然后是 Hough 变换，然后是图像旋转来制定一种方法，但我希望这是一个已经解决的更普遍问题的特定情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:55:42.217

The problem you are solving is known as image registration or image alignment.

-The first thing you need to due is to treshold the image, so you end up with a black and white image. This will simplify the process.

-Then you need to calculate the mass center of the imgaes and then translate them to match each others centers.

*   Then you need to rotate the images to matcheach other. This could be done using the principal axis measure. The principal axis will give you the two axis that explain most of the variance in the population. Which will basically give you a vector showing which way your bar is pointing. Then all you need to due is rotate the bars in the same direction.

-After the principal axis transformation you can try rotating the pictues a little bit more in each direction to try and optimise the rotation.

All the way through your translation and rotation you need a measure for showing you how good a fit your tranformation is. This measure can be many thing. If the picture is black and white a simple subtraction of the pictures is enough. Otherwise you can use measures like mutual information.

...you can also look at procrustes analysis see this link for a matlab function [http://www.google.dk/search?q=gpa+image+analysis&oq=gpa+image+analysis&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8#hl=da&tbo=d&sclient=psy-ab&q=matlab+procrustes+analysis&oq=matlab+proanalysis&gs_l=serp.3.1.0i7i30l4.5399.5883.2.9481.3.3.0.0.0.0.105.253.2j1.3.0...0.0...1c.1.5UpjL3-8aC0&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.1355534169,d.Yms&fp=afcd637d8ae07bde&bpcl=40096503&biw=1600&bih=767](http://www.google.dk/search?q=gpa+image+analysis&oq=gpa+image+analysis&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8#hl=da&tbo=d&sclient=psy-ab&q=matlab+procrustes+analysis&oq=matlab+proanalysis&gs_l=serp.3.1.0i7i30l4.5399.5883.2.9481.3.3.0.0.0.0.105.253.2j1.3.0...0.0...1c.1.5UpjL3-8aC0&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.1355534169,d.Yms&fp=afcd637d8ae07bde&bpcl=40096503&biw=1600&bih=767)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:12:33.463

如果您有图像处理工具箱，则可以使用带有“方向”属性的 regionprops 来查找角度。

[http://www.mathworks.com/help/images/ref/regionprops.html#bqkf8ji](http://www.mathworks.com/help/images/ref/regionprops.html#bqkf8ji)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T17:57:49.873

您可能想研究 SIFT 变换。

您应该将代表最坏情况猜测的矩形作为您的图像，并为此确定旋转矩阵。

见[http://www.vlfeat.org/overview/sift.html](http://www.vlfeat.org/overview/sift.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:17:49.920

使用 ImageJ 的[StackReg](http://bigwww.epfl.ch/thevenaz/stackreg/)插件。我不是 100% 确定，但我认为它已经随[FIJI (FIJI Is Just ImageJ)](http://fiji.sc/wiki/index.php/Fiji)一起安装。

**编辑：**我想我误读了你的问题。那不是您要修复的一堆图像，对吗？在这种情况下，一种简单的方法（可能不是最有效但绝对有效）是以下算法：

1.  阈值图像（看起来很容易，你的背景总是白色的）
2.  得到一条长的水平线作为结构元素并用它扩大图像
3.  旋转结构元素并保持扩张图像，测量扩张的大小。
4.  最大化它的角度是修复图像所需的旋转角度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T19:19:09.400

正如其他答案所建议的，有几种方法可以解决这个问题。一种可能类似于您已经尝试过的方法是使用霍夫变换。霍夫变换擅长检测线的方向。将其与检测角度后的形态处理和图像旋转相结合，您可以创建一个校正角度变化的系统。基本步骤是

1.  使用形态学操作使条形图成为单行斑点。
2.  对此图像使用霍夫变换。
3.  在变换输出中找到最大值并使用它来查找方向角。
4.  使用角度固定原始图像。

此方法附带的计算机视觉系统工具箱的完整示例。请参阅 [http://www.mathworks.com/help/vision/examples/rotation-correction-1.html](http://www.mathworks.com/help/vision/examples/rotation-correction-1.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T02:07:02.883

您可以尝试给定或户主变换，我更喜欢给定。它需要一个角度，使用 cos(angle) 和 sin(angle) 来制作给定矩阵。

# jquery - 通过 URL 处理 RhinoSlider 中的特定幻灯片

> ID：13641513
> 
> 赞同：0
> 
> 时间：2012-11-30T08:32:49.077
> 
> 标签：jquery

你知道是否有办法通过外部链接在**RhinoSlider** ( [rhinoslider.com ) 中浏览幻灯片？](http://rhinoslider.com)可能有，因为所有想做的就是替换导航子弹。我只是不知道如何访问特定的幻灯片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:25:18.933

试试这个代码：

```
<a onclick="$('#slider').data('rhinoslider').next($('#rhino-item2')); return false;">Go to 3 slide</a> 
```

#slider`rhino-item2`中 LI 滑动元素的 id （或任何您的滑块 id）在哪里

**更新：** 我发现滑块卡在双击链接上，所以解决方案是检查是否尝试选择已经选择的幻灯片：

```
<script type="text/javascript">
function rgo(id)
{
    var cur_id = $('#slider').find('li.rhino-active').index();

    if (cur_id!=id)
        $('#slider').data('rhinoslider').next($('#rhino-item'+id));

    return false;
}
</script>

<a onclick="return rgo(2)">Go to 3 slide</a> 
```

# html - HTML 电子邮件格式在 Outlook 2000、2002/xp、2003 中显示不正确

> ID：13641517
> 
> 赞同：0
> 
> 时间：2012-11-30T08:33:19.947
> 
> 标签：html, email

我有以下电子邮件代码：

```
<HTML>
<BODY>
<!--[if gte mso 7]><TABLE border=0 cellspacing=0 cellpadding=0 width=600 height=600 style="margin:0px;padding:0px;max-width:600px;max-height:600px;width:600px;height:600px;">
<TR>
<TD width=364 height=503 style="margin:0px;padding:0px;max-width:364px;max-height:503px;width:364px;height:503px;">
<a href="https://www.ortho.nl/boeken/het-gouden-boekje-voor-het-hart?source=fmvemail">
<img align="left" width=364 height=503 style="margin:0px;padding:0px;max-width:364px;max-height:503px;width:364px;height:503px;" border=0 src="https://www.ortho.nl/css/image.php?file=nb/20121129ortho2.png&fmvopen=yes" /></a>
</TD>
<TD rowspan=2  width=236 height=600 style="margin:0px;padding:0px;max-width:236px;max-height:600px;width:236px;height:600px;">
<a href="https://www.ortho.nl/boeken/het-gouden-boekje-voor-de-gezondheid?source=fmvemail">
<img align="right" border=0 width=236 height=600 style="margin:0px;padding:0px;max-width:236px;max-height:600px;width:236px;height:600px;" src="https://www.ortho.nl/css/image.php?file=nb/20121129ortho3.png&fmvopen=yes" /></a>
</TD>
</TR>
<TR>
<TD width=364 height=97 style="margin:0px;padding:0px;max-width:364px;max-height:97px;width:364px;height:97px;">
<a href="http://www.gezondeboeken.nl?source=fmvemail"><img width=364 height=97 align="left" style="margin:0px;padding:0px;max-width:364px;max-height:97px;width:364px;height:97px;" border=0 src="https://www.ortho.nl/css/image.php?file=nb/20121129ortho1.png&fmvopen=yes" /></a>
</TD>
</TR>
</TABLE>
<![endif]-->
<!--[if gte mso 7]>
<script type="text/javascript">/*
<![endif]-->
<div style="border:1px solid black;width:600px;height:600px;max-width:600px;max-height:600px">
<a href="https://www.ortho.nl/boeken/het-gouden-boekje-voor-het-hart?source=fmvemail">
<img align=left width=364 height=503 style="margin:0px;padding:0px;max-width:364px;max-height:503px;width:364px;height:503px;" border=0 src="https://www.ortho.nl/css/image.php?file=nb/20121129ortho2.png&fmvopen=yes"></a>

<a href="http://www.gezondeboeken.nl?source=fmvmail">
<img width=364 height=97 align=left style="margin:0px;padding:0px;max-width:364px;max-height:97px;width:364px;height:97px;" border=0 src="https://www.ortho.nl/css/image.php?file=nb/20121129ortho1.png&fmvopen=yes"></a>

<a href="https://www.ortho.nl/boeken/het-gouden-boekje-voor-de-gezondheid?source=fmvemail">
<img border=0 align=top width=236 height=600 style="margin:0px;padding:0px;max-width:236px;max-height:600px;width:236px;height:600px;" src="https://www.ortho.nl/css/image.php?file=nb/20121129ortho3.png&fmvopen=yes"></a>
<!--[if gte mso 7]>
*/</script>
<![endif]-->
</BODY>
</HTML> 
```

但它根本不会像 Outlook 2000 - 2003 中的正确表格那样呈现。我已经尝试了很多方法让它工作，但是当我使用[litmus.com测试它时，它根本不会在这些客户端中正确显示](http://www.litmus.com)

有谁知道让表格在这些客户中工作的技巧？或者有什么我可以利用的技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:00:28.587

更好地为所有电子邮件供应商使用表格中的所有内容。Outlook 将不支持 Div 标记，它将仅支持旧的表格格式。

# asp.net - Timepicker 无法响应 ajax 请求？

> ID：13641520
> 
> 赞同：0
> 
> 时间：2012-11-30T08:33:47.887
> 
> 标签：asp.net, timepicker

Timepicker 无法响应来自 ajax 请求的响应。

当我单独运行 Remark.aspx 页面时，Same Timepicker 工作正常。

**只有在popup**中的 div 中绑定 ajax 响应后，它才起作用。

以下是 jquery 请求：-

```
$.ajax({
                      type: "POST",
                      url: "LMS/**Remark.aspx**",
                      data: {id:id, n:n},
                      cache:false,
                      success: function(response) {
                            $('#<%=content.ClientID %>').html(response);
                        },
                        error: function() {
                            alert('Some problem has been occured.');
                        }
                  }); 
```

下面是我绑定响应的 div（这个 div 在**弹出窗口中打开）：-**

```
<div id="content" runat="server">
</div> 
```

如果我没有打开弹出窗口，它工作正常。**问题仅与弹出窗口有关**。

以下是我使用的时间选择器：-

[http://www.codeproject.com/Articles/213311/Time-Picker-Ajax-Extender-Control](http://www.codeproject.com/Articles/213311/Time-Picker-Ajax-Extender-Control)

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:51:14.880

这个 timepicker 会自动添加一个 js 块来初始化 timePicker。您可以查看页面源代码来查看。

```
<script type="text/javascript">
//<![CDATA[
Sys.Application.add_init(function() {
    $create(Ajaxified.TimePicker, {"CloseOnSelection":true,"CssClass":"timepicker","HeaderCssClass":"header","ItemCssClass":"item","MinuteStep":15,"SelectedItemCssClass":"selecteditem","SelectedTabCssClass":"selectedtab","TabCssClass":"tab","TitleCssClass":"title"}, null, null, $get("TextBox2"));
});
//]]>
</script>
</form> 
```

通过 ajax 获取页面内容时，不会触发以下代码，因此时间选择器未正确初始化。在这里，您需要在 ajax 成功回调中手动调用您的代码“$(create(.....”)。

# windows - 安装程序未检测到旧安装版本 NSIS

> ID：13641529
> 
> 赞同：1
> 
> 时间：2012-11-30T08:34:44.000
> 
> 标签：windows, installation, nsis

我正在使用 NSIS 为我的应用程序创建一个设置，并且需要检查它是否已经安装：

```
 Name "${PRODUCT_NAME} ${PRODUCT_VERSION}"
    OutFile "MyAppInstaller.exe"
    InstallDir "$PROGRAMFILES\MyApp"
    InstallDirRegKey HKLM "${PRODUCT_DIR_REGKEY}" ""
    ShowInstDetails show
    ShowUnInstDetails show

    Function .onInit
    ; Check to see if already installed
      ReadRegStr $R0 HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\${PRODUCT_NAME} ${PRODUCT_VERSION}" "UninstallString"
      IfFileExists $R0 +1 NotInstalled
      Messagebox MB_ICONQUESTION|MB_YESNO "MyApp 1.0 is already installed.Do you want to uninstall old version"   IDNO Quit
         Exec $R0
    Quit:
      Quit

    NotInstalled:
      !insertmacro MUI_LANGDLL_DISPLAY

    FunctionEnd ... 
```

但是什么也没发生它总是继续安装并且没有检测到旧的安装版本，我错过了什么吗？我对 NSIS 脚本了解不多，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:59:58.913

我唯一的猜测是您正在检查错误的注册表项或返回的路径被引用和/或具有参数，因此文件存在检查失败。

`Messagebox mb_ok $R0`验证行前的路径，`IfFileExists`如果它是空的，你应该尝试[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，它可能会给你一些线索......

# php - Preg_match_all 失败

> ID：13641530
> 
> 赞同：0
> 
> 时间：2012-11-30T08:34:45.540
> 
> 标签：php, regex, preg-match-all

我有一个 preg_match_all 模式来只捕捉带有货币符号的数字，或者如果没有符号，只捕捉数字。但是，除了 $ 符号（不包括符号）之外的任何东西都会失败（不返回任何错误）。

这是我正在尝试的：

```
include 'simple_html_dom.php';

$html = file_get_html($url);

// Find price if added our code
$ret = $html->find('.price');

$pattern = '/\p{Sc}\s*\d{1,3}(?:,\d{3})*(?:\.\d+)?/u'; 
```

以下是 simple_html_dom 可能返回的示例以及它们是否有效 - 它可能是以下之一

```
$ret[0] = '<span class="price">100</span>'; // this returns null

$ret[0] = '<span class="price">£100</span>'; // this returns null

$ret[0] = '<span class="price">€100</span>'; // this returns null

$ret[0] = '<span class="price">$100</span>'; // this works correctly and returns $100

preg_match_all($pattern, $ret[0], $matches);

echo $matches[0][0]; 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:42:15.837

在您的代码中，您正在替换`$ret`var，而不是将字符串放入数组中，因此正则表达式匹配将仅在最后一个字符串上执行。如果您发布的是您的代码，那么您应该创建`$ret`一个数组并添加字符串。[就正则表达式而言，这里](http://rubular.com/r/tyTVkBEWFQ)一切似乎都很好！

编辑：
我现在看到的问题是您将所有内容添加到`$ret[0]`，您应该添加到`$ret[0]`第一个，`$ret[1]`第二个等等，或者使用`$ret[]=`

# jquery - jQuery 1.8, async: false with jqXHR ($.Deferred) 已弃用

> ID：13641534
> 
> 赞同：6
> 
> 时间：2012-11-30T08:35:02.770
> 
> 标签：jquery

在脚本需要一段时间加载时，我遇到了一些关于调用 ajax 错误函数的问题。但我能够通过添加来修复它`async: false`。

例如：

```
$.ajax({
    type: 'POST',
    url: REQUEST_URL,
    async: false,
    data: {
        'id': id
    },
    dataType: 'json',
    success: function(output) { 
        // success
    },
    error: function() {
        alert('Error, please refresh the page');
    }
}); 
```

阅读文档时，它说：

> 默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用完成/成功/错误回调。

**问）**关于 jqXHR（$.Deferred）的最后一部分是什么意思？这会影响我的脚本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:00:08.160

它不会影响您的脚本。

这意味着，在执行同步 AJAX 请求时，不应使用由返回的对象公开的[延迟](http://api.jquery.com/category/deferred-object/)API `$.ajax()`（例如[done()](http://api.jquery.com/deferred.done/)或[fail()](http://api.jquery.com/deferred.fail/)），而应依赖`complete`and`error`处理程序。

换句话说，您的代码已经使用了正确的模式。如果它使用延迟操作，则必须对其进行修改，例如：

```
// Do not write this code.
$.ajax({
    type: 'POST',
    url: REQUEST_URL,
    async: false,           // <-- Synchronous request.
    data: {
        'id': id
    },
    dataType: 'json'
}).done(function(output) {  // <-- Use of deferred method.
    // success
}).fail(function() {        // <-- There also.
    alert('Error, please refresh the page');
}); 
```

# clearcase - 通过透明箱中的标签回滚

> ID：13641535
> 
> 赞同：1
> 
> 时间：2012-11-30T08:35:03.637
> 
> 标签：clearcase, clearcase-ucm

我负责几个非常大的项目。这些项目也分为较小的 del-projects 一些作为一个大型项目一次交付。我遇到的问题是，当所有这些小项目都合并到我们的发布分支中时，我几乎不可能回滚 1000 个文件。我目前正在重新考虑我们的分支策略。现在一切都与标签合并。在我们考虑将其转储到我们的发布分支之前，我们还将所有内容合并到构建测试分支。

如果我需要根据标签进行回滚，最好的方法是什么？我有一些脚本，但无法让它工作。希望这里的一些 ClearCase 大神可以尽快提供帮助！

谢谢！

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:56:34.753

如果您需要回滚到某个标签，您可以：

*   创建动态视图
*   编辑其配置规范以选择所述标签
*   使用该动态视图作为**[`clearfsimport`](https://stackoverflow.com/questions/138321/how-can-i-use-clearcase-to-add-to-source-control-recursively)**主视图的来源（具有最新版本的视图）

A `clearfsimport -rmname`("mirror") 将使用源中的文件更新/添加/删除目标视图中的文件（在这里，您的动态视图设置为您要回滚的标签）。

# c# - 将水晶报表对象传递给报表文档而不是物理文件

> ID：13641537
> 
> 赞同：5
> 
> 时间：2012-11-30T08:35:07.960
> 
> 标签：c#, crystal-reports

如何将水晶报表类名称动态传递给 ReportDocument。

例如

```
ReportDocument rpt;
rpt = new ReportDocument();
rpt.Load(filepath); 
```

但我需要使用

```
ReportDocument rpt;
rpt = new CrystalReport1(); // CrystalReport1 is report name 
```

但我需要动态传递“CrystalReport1”，因此它会动态创建 Report 对象。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:20:10.890

我自己得到了答案，请在下面查看..

```
CrystalReport obj = new CrystalReport();
ReportDocument rpt = (ReportDocument)obj; 
```

# android - JavascriptInterface 不适用于 Android 4.2 上的 proguard

> ID：13641540
> 
> 赞同：2
> 
> 时间：2012-11-30T08:35:31.377
> 
> 标签：android, android-webview, proguard

自带有proguard的android 4.2以来，我遇到了一个问题。

基本上我在这样的 webview 上使用 JavascriptInterface：

```
public class MyJavascriptInterface {
    public void doSomething() { ... }
} 
```

现在我明白的是，当 proguard 混淆代码时，它会重命名类名和方法名，因此不能再从 Javascript 调用它。这就是为什么我必须将它添加到 proguard 配置中：

```
-keepclassmembers class mypackage.MyJavascriptInterface { 
    public void doSomething();
} 
```

当我将目标 sdk 设置为 17 (Android 4.2) 时，出于安全原因，我必须将`@JavascriptInterface`注释添加到我的 Javascript 接口方法中：

```
@JavascriptInterface
public class MyJavascriptInterface {
    public void doSomething() { ... }
} 
```

现在的问题是，如果启用了 proguard，这将不再起作用（doSomething 不会被调用，就好像在混淆步骤中仍然重命名了类一样）。如果我禁用 proguard，则代码可以正常工作。

如何使用目标 sdk 17 进行这项工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T16:27:48.433

我找到了解决方案，我只需要告诉 proguard 保留`JavascriptInterface`注释即可。我将此添加到我的 proguard 配置中以使其工作：

```
-keepattributes JavascriptInterface 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T22:51:16.293

要保留任何注释，您必须将以下内容添加到您的 ProGuard 配置中：

```
-keepattributes *Annotation* 
```

类文件将 JavascriptInterface 注释表示为“RuntimeAnnotation”类型的类属性，其值为“android.webkit.JavascriptInterface”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-30T00:03:33.610

通过查看生成的 mapping.txt 和 dump.txt 文件，以及大量的试验和错误（我编译了 34 个 APK 文件来解决这个问题），我想出了这个可行的解决方案：

```
-keep public class com.yourfullpackagename.Yourapp$JavaScriptInterface
-keepclassmembers class com.yourfullpackagename.Yourapp$JavaScriptInterface {*;}
-keepattributes com.yourfullpackagename.Yourapp$JavaScriptInterface
-keepattributes *Annotation* 
```

（这假设 JavaScriptInterface 是 com.yourfullpackagename 命名空间中名为 Yourapp 的 Activity 中的内部类。针对您的应用进行相应调整。）

# c# - PostgreSQl，如何在 C# 中建立 OdbcConnection

> ID：13641541
> 
> 赞同：2
> 
> 时间：2012-11-30T08:35:33.717
> 
> 标签：c#, postgresql

我想将 PostgreSQl DB 连接到我的 C# 项目，我找到了这段代码

```
OdbcConnection DbConnection = new OdbcConnection("connection_string"); 
```

我的问题是：- 我可以使用什么作为连接字符串以及如何找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:38:02.713

通过 ODBC 将 Microsoft .NET 与 PostgreSQL 数据库服务器一起使用

[点击这里](http://wiki.postgresql.org/wiki/Using_Microsoft_.NET_with_the_PostgreSQL_Database_Server_via_ODBC)

# php - PHP + MySQL 创建一个表单来更改 MySQL 表中的数据

> ID：13641543
> 
> 赞同：2
> 
> 时间：2012-11-30T08:35:35.440
> 
> 标签：php, mysql, rows

我想构建一个表单来更改 MySQL 表中的数据。首先，我列出了 adminindex.php 页面中的所有数据。然后，我创建一个按钮以在表单中打开所选数据。我已经完成将表单字段分配给主（pk）MySQL 表。当我需要获取外部表数据时，我的问题从那里开始，因为该表包含许多外部数据。众所周知，一个班级可能有很多学生，我已经为班级数据创建了字段，现在问题出在学生数据上。我是否必须创建许多字段才能从 MySQL 外部表中获取数据？如果是的话，你们能指导我的代码步骤吗？非常感谢。非常感谢您的帮助：D

这些是我的步骤：

首先，我回显行，然后对表单操作进行编码。然后，在 adminpost.php 中，我创建变量、链接字段并使用 UPDATE MYSQL 更新表中的数据。我已经成功更新了主表数据，但我卡在了外键数据中。感谢：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:54:44.930

有2页。在第一个表单中显示数据，并在第二个表单中更新。这是一个一一执行的代码，如果您愿意，您可以一次构建多行。

编辑.php

```
<?php
mysql_connect('ip', 'username', 'password') or die(mysql_error());
mysql_select_db("db_name") or die(mysql_error());

$query = mysql_query("SELECT * FROM table1 where order by question_id limit 1") or             die(mysql_error());

if(mysql_num_rows($query)>=1){
while($row = mysql_fetch_array($query)) {
    $id = $row['id'];
    $value1= $row['value1'];
    $value2= $row['value2'];
}
?>
<form action="update.php" method="post">
<input type="hidden" name="ID" value="<?php echo $id;?>">

Value1: <input type="text" name="value1" value="<?php echo $value1;?>">
<br>
Value2: <input type="text" name="value2" value="<?php echo $value2?>">
<input type="Submit" value="Change">
</form>
<?php
}else{
    echo 'No entry found. <a href="javascript:history.back()">Go back</a>';
}
?> 
```

更新.php

```
 <?php
 mysql_connect('ip', 'username', 'password') or die(mysql_error());
 mysql_select_db("db_name") or die(mysql_error());

 $id = mysql_real_escape_string($_POST["ID"]);
 $value1 = mysql_real_escape_string($_POST["value1"]);
 $value2 = mysql_real_escape_string($_POST["value2"]);

 $query="UPDATE table1 SET value1 = '.$value1.', value2 = '.$value2.' WHERE id='$id'";

 mysql_query($query)or die(mysql_error());
 if(mysql_affected_rows()>=1){
echo "<p>($id) Record Updated<p>";
 }else{
echo "<p>($id) Not Updated<p>";
 }
 ?>
 <a href="edit.php">Next</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:46:00.320

可能有助于放置您的实际代码，但据我所知，您只是想编辑表中已有的数据？如果是这样的话：

```
//Connect to SQL DB
$dbcnx = @mysql_connect("localhost", "root", "password");

//Select DB
mysql_select_db("database_name", $dbcnx);

//Query DB
$sql = update table_name set column_name = "$variable" where column = "your_criteria";

@mysql_query($sql) 
```

这会将您连接到您的 SQL 数据库并为您更新记录，希望这就是您所需要的

# android - 包含线性布局的滚动视图不起作用

> ID：13641548
> 
> 赞同：0
> 
> 时间：2012-11-30T08:36:01.800
> 
> 标签：android, scrollview, android-scrollview

为什么我的滚动视图不滚动？

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dip"
        android:layout_marginTop="20dip"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="80dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip" >

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b1"
                android:onClick="b1" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b2"
                android:onClick="b2" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b3"
                android:onClick="b3" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b4"
                android:onClick="b4" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/b5"
                android:onClick="b5" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="80dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="10dip" >

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b6"
                android:onClick="b6" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b7"
                android:onClick="b7" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b8"
                android:onClick="b8" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b9"
                android:onClick="b9" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/b10"
                android:onClick="b10" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="80dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="10dip" >

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b11"
                android:onClick="b11" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b12"
                android:onClick="b12" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b13"
                android:onClick="b13" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b14"
                android:onClick="b14" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/b15"
                android:onClick="b15" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="80dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="10dip" >

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b16"
                android:onClick="b16" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b17"
                android:onClick="b17" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b18"
                android:onClick="b18" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b19"
                android:onClick="b19" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/b20"
                android:onClick="b20" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="80dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="10dip" >

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b21"
                android:onClick="b21" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b22"
                android:onClick="b22" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b23"
                android:onClick="b23" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:background="@drawable/b24"
                android:onClick="b24" />

            <Button
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/b25"
                android:onClick="b25" />
        </LinearLayout>
    </LinearLayout>

</ScrollView> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:41:40.950

ScrollView 不能容纳超过 1 个孩子.. 它需要 1 个托管所有其他视图的单个孩子.. 希望这对您有所帮助

```
<ScrollView>
<LinearLayout
android:id="@+id/child">
<ImageView/>
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:44:37.337

一切正常，您只是没有足够的按钮来启用滚动（您不需要它）。
要了解滚动的工作原理，请使用更小的屏幕尺寸，或`Linearlayouts`使用`buttons`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T08:54:12.717

我不确定它是否有效，但您也可以尝试将 android:scrollbars="vertical" 属性添加到您的 LinearLayout

# c - Char * 共享相同的内存

> ID：13641550
> 
> 赞同：3
> 
> 时间：2012-11-30T08:36:02.517
> 
> 标签：c, gcc

这是我的代码，我需要在此代码的输出中进行说明：

```
#include <stdio.h>
int main(void )
{
char name1[10] = "Rajan" , name2[10] = "Rajan" ;
char *name3 = "Chennai" , *name4 = "Chennai" ;
printf("\nAddress for name1 and name2 : %p and %p",name1,name2) ;
printf("\nAddress for name3 and name4 : %p and %p",name3,name4) ;
return 0 ;
} 
```

这段代码的输出是

```
Address for name1 and name2 : 0x7fff9e6cbe10 and 0x7fff9e6cbe20
Address for name3 and name4 : 0x400760 and 0x400760 
```

因为我分配了两个不同的数组，所以这里的值的地址`name1`和不同的地址。`name2`但是在 and 的情况下`name3`，`name4`地址是一样的，为什么不一样呢？它不会创建不同的内存并为值分配名称`Chennai`吗？为什么它指向同一个内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T08:37:47.517

该标准允许：

> 6.4.5 - 7
> 
> **如果它们的元素具有适当的值**，则未指定这些数组是否不同。**如果程序试图修改这样的数组，则行为未定义。**

 **我的意思是，只要您不修改它们就没有关系，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:38:30.820

因为它们是 char* 到 const 内存。您无法更改 name3 或 name4 指向的字符串，但可以更改 name1 和 name2 指向的字符串，因为 name1 和 name2 正在分配内存，然后将名称“Rajan”初始化到该内存中。

你可以让 name3 或 name4 指向别的东西。但是目前，您已经说过将其指向一个 const 字符串（并且它不会复制那些 const 字符串....您还会发现它将另一个 const 字符串存储到“Rajan”，它用于初始化 name1和名字2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T08:40:44.663

“Chennai”是一个const，name3和name4指向同一个地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:15:57.557

当您的程序被编译时，编译器会形成目标代码文件，其中包含您的机器代码和程序中声明的所有字符串常量的表。

该声明
`char *name3= "Chennai";`

使 name3 指向字符串常量表中字符串“Chennai”的地址。这同样适用于 name4。所以 name3 和 name4 都指向同一个地址。

由于此字符串在字符串常量表中，因此在技术上是可执行代码的一部分，您无法修改它。您只能指向它并以只读方式使用它。

[http://euklid.mi.uni-koeln.de/c/mirror/mickey.lcsc.edu/%257Esteve/c13.html](http://euklid.mi.uni-koeln.de/c/mirror/mickey.lcsc.edu/%257Esteve/c13.html)提供了更多关于如何在 C 中处理字符串的想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T11:00:10.940

字符串文字总是被设计为不可修改的。由于它们是不可修改的，因此允许它们共享空间并没有什么害处，因为一个字符串文字对象不能通过修改另一个字符串文字对象来改变。

但是，该`const`属性最初在 C 中并不存在，因此该语言必须允许将指向字符串文字的指针分配给普通（非常量）指针。为了保持与旧代码的兼容性，C 标准仍然允许将字符串文字分配给非常量指针。但是你不能试图修改它们。

如果重新创建 C，字符串文字可能会生成带有该`const`属性的指针。

（用于初始化数组的字符串字面量是特殊的；在那里，字符串字面量本质上只是对要放入数组的内容的编译时规范。它们没有可以分配给指针的地址。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T10:16:40.710

name3 和 name4 是字符串文字，将存储在只读内存中，您不能修改字符串文字中的每个字符。您试图在两个指针中存储相同的字符，以便优化内存分配，您的字符串“chennai”只会在只读地址中获得一次内存，name3 和 name4 将指向相同的地址。您可以更改 name1 和 name2 中的每个字符，以便为两者提供不同的地址**

# joomla - 如何开发 Joomla 1.5 组件？

> ID：13641551
> 
> 赞同：1
> 
> 时间：2012-11-30T08:36:09.480
> 
> 标签：joomla, joomla1.5, joomla-extensions, joomla-component

如何开始为 Joomla 1.5 框架开发组件？有没有人知道一个好的教程，或者有一个很好的参考？

我已经阅读了 wiki 上的教程，但我不太理解，所以如果你能指点我另一个，那就太好了。

我知道理想情况下我应该使用 Joomla 2.5 或 3.0，但我被要求为现有网站开发此版本，我无法决定使用哪个版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:08:22.497

> *我无法决定使用哪个版本*

我个人会使用 Joomla 2.5，因为它是 Joomla 系列的长期租用，并且有更多的文档和支持。Joomla 3.0 是短期版本，因此可以说是 3.5 的测试版。

鉴于您目前使用的是 Joomla 1.5，您始终可以使用免费扩展程序[JUpgrade升级到 Joomla 2.5。](http://extensions.joomla.org/extensions/migration-a-conversion/joomla-migration/11658)请注意，这不会升级第 3 方扩展，因此您需要为每个扩展安装 Joomla 2.5 兼容版本（前提是有一个）。

要让您开始使用 Joomla 2.5 组件，请查看[Joomla 2.5 MVC 文档](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Introduction)。这还提供了 HelloWorld 组件的 zip 文件，供您在各个阶段下载。

您可能还对[组件生成器](http://extensions.joomla.org/extensions/tools/webbased-tools/7627)感兴趣。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:37:42.753

我认为Joomla的官方教程！文档确实可以减少它。试一试 - [http://docs.joomla.org/Component_Development](http://docs.joomla.org/Component_Development)

# jquery - jQuery：通过 tr 'id' 获取行

> ID：13641553
> 
> 赞同：5
> 
> 时间：2012-11-30T08:36:16.930
> 
> 标签：jquery

嘿，我试图访问特定的行。我有我不想得到的 tr 的 id attr。

我的表如下所示：

```
<tbody role="alert" aria-live="polite" aria-relevant="all">
    <tr id="1" class="odd">
        <td class=" sorting_1">bla</td>
    </tr>
    <tr id="3" class="even">
        <td class=" sorting_1">hej</td>
    </tr>
    <tr id="4" class="odd row_selected">
        <td class=" sorting_1">sdf</td>
    </tr>
    <tr id="8" class="even">
        <td class=" sorting_1">testgfdgvcxbvcbcv</td>
    </tr>
    <tr id="9" class="odd">
        <td class=" sorting_1">testgfdgvcxbvcbcvfdgsgfdgdfs</td>
    </tr>
</tbody> 
```

在这里我需要访问但我不知道如何访问它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T08:37:43.090

好吧，您通常应该避免使用纯数字 id（除非您使用 100% HTML5！）。而且您应该*明确*确保 id 在您的页面上是唯一的。

但是你应该可以使用 jquery 选择器

```
$('#1') 
```

假设您没有使用 HTML5，那么您应该更改标记以使用更标准的 ID：

```
<tbody role="alert" aria-live="polite" aria-relevant="all">
    <tr id="row1" class="odd">
        <td class=" sorting_1">bla</td>
    </tr>
    <tr id="row3" class="even">
        <td class=" sorting_1">hej</td>
    </tr>
    ... 
```

然后您将使用访问特定行

```
$('#row1') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:38:47.813

您可以检索具有 ID 的任何元素，使用

```
$("#ID") 
```

所以在你的情况下

```
$("#1") 
```

这将为您返回底层 HTML 元素的 jQuery 对象，在您的情况下为 tr 元素。

# android - 当我向上和向下拖动列表视图时，如何不重新加载 ListView 适配器的“getView”？

> ID：13641557
> 
> 赞同：0
> 
> 时间：2012-11-30T08:36:33.290
> 
> 标签：android, android-layout, android-listview

要遵循主题中的问题，当屏幕上出现无效时，如何确保不会再次加载该行？

我只希望屏幕和列表视图在用户上下拖动时保持不变。

是否可以 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:39:40.217

不，这是不可能的。为此，您应该使用`ScrollView`

# c# - winform按钮属性的自定义值范围

> ID：13641558
> 
> 赞同：0
> 
> 时间：2012-11-30T08:36:35.310
> 
> 标签：c#, winforms, user-controls

我已经制作了一系列自定义按钮，它们都有一个与字典键相关的变量..

我的问题是如何在按钮的属性中为此变量设置有效输入？目前它只是从一个字符串中设置的，因为这是变量类型

```
[Browsable(true), EditorBrowsable(EditorBrowsableState.Always), DefaultValue("None"),Category("Data"), ]
    public string UnitType 
```

理想情况下，能够以与设置 BorderStyle 或 FlatStyle 类似的方式设置此值会很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:09:48.907

您可以将您的属性设为枚举，如[BorderStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.borderstyle.aspx)或[FlatStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.flatstyle.aspx)

# php - getJSON，返回 2 个不同的数组

> ID：13641559
> 
> 赞同：0
> 
> 时间：2012-11-30T08:36:35.790
> 
> 标签：php, jquery, getjson

是否可以使用 getJSON 传递 2 个不同的数组？

```
$.getJSON('<?php echo $_SERVER['SCRIPT_NAME']; ?>', {
    ajax: 'ajax_article_partlist' ,
    parent_article: $('#selected_article').val()
},
function(data) {
     $('#articles').html('');
     $('#article_table').show('slide');
        for (var i = 0; i < data.length; i++) {
        $('#articles').append("<p>"+data[i]+"</p>");
        }
}); 
```

这是我的请求，在 php 端我回显和数组。但是我现在得到了第二个数组，我必须传递相同的请求。那有可能吗，还是我必须制作一个新的getJSON？

php代码：

```
 case 'ajax_article_partlist' :
    header('Content-type: application/json');

    $form->addFormField(new FW_HTML_Form_Request('parent_article'));

    $form->resolveRequest();

    $parent_article = $form->getValue('parent_article');
    $part_list =$db_obj->getFormatedPartList($parent_article);
    $db_obj->checkArticleProgram($parent_article);

    echo json_encode($part_list);
    include($_SERVER['DOCUMENT_ROOT'].'/inc/includes/cms.footer.inc');
    exit;
    break; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:49:20.277

我的 PHP 有点生锈，但这可能有效：

```
$two_arrays = array(
    "array1" -> $part1_list,
    "array2" -> $part2_list
);

echo json_encode($two_arrays); 
```

在您的客户端，您可以访问`data.array1`数组`data.array2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:51:11.453

以下是数组语法详细信息：[http ://www.php.net/manual/en/language.types.array.php](http://www.php.net/manual/en/language.types.array.php)

```
echo json_encode(array("part_list" => $part_list, "second_array" => $second_array)); 
```

而不是在 getJSON 成功函数中：

```
function(data) {
     $('#articles').html('');
     $('#article_table').show('slide');
     for (var i = 0; i < data.parts_list.length; i++) {
            $('#articles').append("<p>"+data.parts_list[i]+"</p>");
     }
     for (var i = 0; i < data.second_array.length; i++) {
           //do somethign with second array
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T08:53:15.077

像这样试试

```
$json=new stdClass();
$a=array('a'=>1);
$b=array('b'=>2);
$json->a=array();
$json->b=array();
$json->a=$a;
$json->b=$b;
echo json_encode($json); 
```

# django - 自定义异常的自定义视图/模板

> ID：13641561
> 
> 赞同：0
> 
> 时间：2012-11-30T08:36:46.070
> 
> 标签：django

在我看来，我正在使用一些连接到外部 api 的模块。我希望这个模块抛出一些自定义异常，例如`ApiServerNotRespond`。然后我希望这个异常导致自定义视图/模板被呈现。例如，如果在我的视图中“connect_to_api”（我正在使用我的 api 模块）api 模块将导致`ApiServerNotRespond`异常，那么例如`not_respond`调用视图或仅`myapp/not_respomd.html`渲染模板。

我不想使用任何中间件，因为我希望所有配置都驻留在我的应用程序目录中，而不是设置文件中。

我可以在哪里以及如何定义自定义异常以及如何在它引发后强制它呈现自定义模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:51:24.640

I think you can achieve this by writing a decorator.

The decorator should catch `ApiServerNotRespond` or any other exception you want. And if such exception occurs return response with template you want otherwise just return response from the original view.

Sample:

```
def custom_error_handler():
    def decorator(orig_func):
        def inner_func(request, *args, **kwargs):
            try:
                return orig_func(request, *args, **kwargs)
            except ApiServerNotRespond:
                context = {}
                return render_to_response('custom_template.html', context
                         context_instance = RequestContext(request))
            except Exception:
                #handle all other errors, may be just raise
                raise 
       return wraps(orig_func)(inner_func)
    return decorator 
```

In your views.py,

```
@custom_error_handler
def sample_view1(request):
    #your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:57:20.807

你可以做适当的异常，但是你需要将调用模块的函数包装成类似的东西，`get_object_or_404()`所以每次发生异常时，你实际上都会重定向到错误页面。此外，所有对服务的调用都需要包装......

另一种方法是为处理服务的视图使用装饰器。然后，一个 api 函数调用将引发异常，装饰器将捕获它并呈现适当的页面（如`login_required`装饰器）。- 我会选择这个，更优雅:)

无论哪种方式，您可能都需要为服务提供某种包装器调用，以便它从字面上抛出异常。

# java - Java 和 PHP 中的 XOR 密码：不同的结果

> ID：13641563
> 
> 赞同：6
> 
> 时间：2012-11-30T08:36:57.710
> 
> 标签：java, php, cryptography, encryption

假设我有一个纯文本**a nice cup of milk tea ，它将使用密钥****12345**进行 XOR 加密。

这个Java代码：

```
import sun.misc.BASE64Encoder;

import sun.misc.BASE64Decoder;

public class XORTest {

  public static void main(String args[]){

    String plaintext = "a nice cup of milk tea";
    String key = "12345";
    String encrypted = xor_encrypt(plaintext, key);
    String decrypted = xor_decrypt(encrypted, key);
    System.out.println("Encrypted: "+encrypted);
    System.out.println("Decrypted: "+decrypted);
  }

  public static String xor_encrypt(String message, String key){
    try {
      if (message==null || key==null ) return null;

      char[] keys=key.toCharArray();
      char[] mesg=message.toCharArray();
      BASE64Encoder encoder = new BASE64Encoder();

      int ml=mesg.length;
      int kl=keys.length;
      char[] newmsg=new char[ml];

      for (int i=0; i<ml; i++){
        newmsg[i]=(char)(mesg[i]^keys[i%kl]);
      }
      mesg=null; 
      keys=null;
      String temp = new String(newmsg);
      return new String(new BASE64Encoder().encodeBuffer(temp.getBytes()));
    }
    catch ( Exception e ) {
      return null;
    }  
  }

  public static String xor_decrypt(String message, String key){
    try {
      if (message==null || key==null ) return null;
      BASE64Decoder decoder = new BASE64Decoder();
      char[] keys=key.toCharArray();
      message = new String(decoder.decodeBuffer(message));
      char[] mesg=message.toCharArray();

      int ml=mesg.length;
      int kl=keys.length;
      char[] newmsg=new char[ml];

      for (int i=0; i<ml; i++){
        newmsg[i]=(char)(mesg[i]^keys[i%kl]);
      }
      mesg=null; keys=null;
      return new String(newmsg);
    }
    catch ( Exception e ) {
      return null;
    }  
  }} 
```

给我：

> 加密：UBJdXVZUElBBRRFdVRRYWF5YFEFUUw==
> 
> 解密：一杯好喝的奶茶

而这个 PHP 代码：

```
<?php

$input = "a nice cup of milk tea";
$key = "12345";
$encrypted = XOR_encrypt($input, $key);
$decrypted = XOR_decrypt($encrypted, $key);

echo "Encrypted: " . $encrypted . "<br>";
echo "Decrypted: " . $decrypted . "<br>";

function XOR_encrypt($message, $key){
  $ml = strlen($message);
  $kl = strlen($key);
  $newmsg = "";

  for ($i = 0; $i < $ml; $i++){
    $newmsg = $newmsg . ($msg[$i] ^ $key[$i % $kl]);
  }

  return base64_encode($newmsg);
}

function XOR_decrypt($encrypted_message, $key){
  $msg = base64_decode($encrypted_message);
  $ml = strlen($msg);
  $kl = strlen($key);
  $newmsg = "";

  for ($i = 0; $i < $ml; $i++){
    $newmsg = $newmsg . ($msg[$i] ^ $key[$i % $kl]);
  }

  return $newmsg;
}

?> 
```

给我：

> 加密：MTIzNDUxMjM0NTEyMzQ1MTIzNDUxMg==
> 
> 解密：

想知道为什么两个结果不同。我必须承认，PHP 不是我喜欢的。

顺便说一句，我将它用于玩具项目，因此不需要高安全性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:57:47.140

在您的 PHP 加密方法中，您有以下代码：

```
for ($i = 0; $i < $ml; $i++){
  $newmsg = $newmsg . ($msg[$i] ^ $key[$i % $kl]);
} 
```

但是，`$msg`在任何地方都没有定义。那应该是`$message`。

# php - 是否有一种“可去散列”的散列方法？

> ID：13641565
> 
> 赞同：0
> 
> 时间：2012-11-30T08:37:02.997
> 
> 标签：php, hash

我知道 SHA1 和 MD5 等散列函数是单向加密系统。

但是有没有一种“可去散列”的散列方法？

就像，它产生一个 x 字符串，然后可以将其“去散列”到原始字符串中。

有没有这样的哈希方法？如果它与 PHP 兼容，将不胜感激。

**更新：**我所说的散列函数是一种加密方法，它产生一个可以解密的 x 字符串。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T08:41:17.487

`hashing functions such as SHA1 and MD5 are one-way encryption systems.`

不完全是——它们就像你说的那样`hashing functions`。它们通常与加密系统一起使用，例如密码散列算法，但它们不是加密系统或加密算法。

`But is there a hashing method which is 'dehashable'?`

不，它不会是`hash function`，因为散列函数将较大的数据集映射到较小的数据集。这样做的副作用是您可以从不同的输入数据中获得相同的哈希值，这使得从哈希键计算原始数据变得不可能。例如，它允许检查原始数据是否已被修改 - 您再次将相同的哈希函数应用于原始数据并比较计算的哈希键。如果它们不同，则修改原始数据 - 如果它们相同，则原始数据（至少非常有可能）未修改。

您正在寻找的可能是压缩/解压缩算法或加密/解密算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:45:00.550

散列*不是*（单向）**加密**，因为散列值永远无法解密为原始值；这是设计使然。

此外，散列函数的设计目的是很难找到一个匹配给定散列值的数据集（参见[碰撞](http://en.wikipedia.org/wiki/Collision_%28computer_science%29)）

正如[Andreas 建议](https://stackoverflow.com/a/13641619)的那样，您正在寻找压缩或加密功能。

# jquery - 丢失表单字段 - 使用 jquery 对话框模式

> ID：13641567
> 
> 赞同：0
> 
> 时间：2012-11-30T08:37:08.207
> 
> 标签：jquery, jquery-ui, modal-dialog

我有一个表格。在这个表单中，我使用了一个模式对话框，通过单击按钮显示。该对话框包含一个 div，其中包括一些相同形式的输入字段。它的内容永远不会传输到服务器（方法POST），所以我开始调试一点......

1.  当我不打开对话框时，这些字段可用（服务器端）
2.  当我打开对话框并在字段中键入一些值时，字段不再传输（不可用）
3.  如果我不隐藏（显示：无）div - 加载表单时该字段可见 - 我在不使用模式对话框的情况下填写它，就会传输。

-> 为什么对话框从我的表单中“删除”字段？？？

感谢您的任何意见！乌尔斯

**HTML**

```
<button type="button" id="opener">other, please click here</button>

<div id="dialog-modal" title="type in the new elements:" style="display: none">
<p>country:<input type="text" class="small" id="othercountry" name="othercountry" value=""  </p>
<p>ccode:<input type="text" class="small" id="othercountryCode" name="othercountryCode" value=""></p></div> 
```

**Javascript**

```
<script>
$( "#opener" ).click(function() {
    $( "#dialog-modal" ).dialog({
       height: 140,
       modal: true
    });
    $( "#dialog-modal" ).bind('dialogclose', function(event) 
      { do some other things, not relevant for the form }
    );
});
</script> 
```

jQuery 1.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:21:01.060

默认情况下，jQuery 将对话框附加到正文中，因此您可能必须将其移回表单中。这可以这样做：

```
$('#dialog-modal').parent().appendTo($('form:first')) 
```

请参阅[此处](http://bugs.jqueryui.com/ticket/5762)获取错误票

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:57:35.090

永远看不到您的表单标签，纯粹猜测表单标签必须在模态div中找到。

```
<div id="dialog-modal" title="type in the new elements:" style="display: none">
    <form>
        <p>country:<input type="text" class="small" id="othercountry" name="othercountry" value=""  </p>
        <p>ccode:<input type="text" class="small" id="othercountryCode" name="othercountryCode" value=""></p>
    </form>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-16T19:14:14.277

我有同样的问题，我发现没有任何实际工作。正如其他人之前所说，jquery 对话框从标记内移动并附加到 body 标记。这就是当您没有打开对话框时它起作用的原因。一旦打开，对话框就会向上移动到 body 标记和 form 标记之外。我通过在对话框中放置一个表单标签来解决这个问题，所以无论它在哪里，它总是有一个表单可以提交给服务器。通常，您有一个 div 标记，其中包含隐藏并在必要时显示的对话框标记。只需在此 div 内但在所有输入标签之外放置一个表单标签，以便在单击按钮时将它们全部提交。

# wcf - WCF客户端代理保持活动状态？

> ID：13641574
> 
> 赞同：0
> 
> 时间：2012-11-30T08:37:43.720
> 
> 标签：wcf, proxy, client, auto-generate

每次需要调用时都在代码中创建 wcf 客户端有任何缺点。目前我有一个静态类，它创建一个客户端并在一段时间内重用它（在 wcf 服务超时前几分钟）

我在开发时遇到了问题，因为我一直在重新编译 WCF 代码。它现在很烦人，但认为它在生产中会很好。

但是...每次拨打电话时都使用用户凭据创建客户端代理...不好的做法？性能问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:38:14.097

据我所知，没有性能损失，这是这样做的好方法，即每次需要时创建一个客户端代理。每次完成后，建议的最佳做法是始终关闭代理。关闭代理会释放与服务保持的连接，这在存在传输会话的情况下尤其重要。它还有助于确保未达到客户端计算机上最大连接数的阈值。关闭代理会终止与服务实例的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:50:41.407

我认为最好的答案是两者兼而有之。

每次调用创建代理客户端肯定会影响性能。如果您可以创建代理客户端并将其用于您将立即进行的所有呼叫。然后处理它。它要快得多。

# android - 240 宽度设备将浏览器设置为 320

> ID：13641582
> 
> 赞同：1
> 
> 时间：2012-11-30T08:38:09.800
> 
> 标签：android, android-webview, media-queries

我正在开发一个网站的移动版本，我正在使用 css 查询来定位 ldpi、mdpi、hdpi 设备。首先我得到了 HTML：

```
meta content="width=device-width, initial-scale=1.0, user-scalable=0, target-densitydpi=device-dpi, maximum-scale=1.0, minimum-scale=1.0" name="viewport">

meta content="true" name="HandheldFriendly">

link href="css/stylemob.css" media="handheld, only screen and (max-width: 480px), only screen and (max-device-width: 480px)"  type="text/css" rel="stylesheet" /> 
```

我已经在不同的设备上对其进行了测试。它在 hdpi 和 mdpi 上就像一个魅力，但在 ldpi 设备上（即 240px 宽度 res）在站点的左侧和右侧有白色区域（我已经检查过浏览器打开右 css）启用滚动，如浏览器打开 css 为 320px 宽度 min res。

**问题**：

1.  代码错了吗？
2.  有没有办法从 html、css、javascript 或直接从 java-android 代码修复它，因为我最终将集成从 WebView 应用程序打开的网站。

# java - 获取xml数据

> ID：13641583
> 
> 赞同：4
> 
> 时间：2012-11-30T08:38:16.160
> 
> 标签：java, oop, design-patterns

我正在尝试实现从服务器获取 XML 文档的工厂模式。（使用 javax.xml.parsers.DocumentBuilder）

我现在有下面的课程，你能给出你的意见吗？这种结构对这种模式有意义吗？（我在 codereview 上问了同样的问题，但如果还没有任何反馈）

**DocumentGeneratorFactory**（抽象工厂）

```
public interface DocumentGeneratorFactory {

    public Document createDocument(String scheme, String authority,
            String path, HashMap<String, String> parameters)
            throws ParserConfigurationException, SAXException, IOException;    

} 
```

**ProductDocumentGeneratorFactory**（创建工厂）

```
public class ProductDocumentGeneratorFactory implements
        DocumentGeneratorFactory {

    public Document createDocument(String scheme, String authority,
            String path, HashMap<String, String> parameters)
            throws ParserConfigurationException, SAXException, IOException {

        Uri.Builder uri = new Uri.Builder();
        uri.scheme(scheme);
        uri.authority(authority);
        uri.path(path);

        Set<Map.Entry<String, String>> set = parameters.entrySet();

        for (Map.Entry<String, String> params : set) {
            uri.appendQueryParameter(params.getKey(), params.getValue());
        }

        URL url = new URL(uri.toString());

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(url.openStream()));
        doc.getDocumentElement().normalize();

        return doc;
    } 

} 
```

**请求**（抽象产品）

```
public abstract class Request {
    Document doc;
    HashMap<String, String> queryStrings;

    abstract void prepareRequest() throws ParserConfigurationException, SAXException, IOException;  

} 
```

**产品请求**（产品）

```
public class ProductRequest extends Request{
    ProductDocumentGeneratorFactory DocumentGeneratorFactory;   
    HashMap<String, String> queryStrings;

    public ProductRequest(ProductDocumentGeneratorFactory DocumentGeneratorFactory,HashMap<String, String> queryStrings){

        this.DocumentGeneratorFactory = DocumentGeneratorFactory;
        this.queryStrings = queryStrings;
    }

    @Override
    void prepareRequest() throws ParserConfigurationException, SAXException, IOException {
        doc = this.DocumentGeneratorFactory.createDocument("http", "ip-address", "default.aspx",this.queryStrings);     
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:05:43.443

这没有意义，因为具体工厂必须返回他们创建的对象，但您使用的是内置 Java `DocumentBuilder db = dbf.newDocumentBuilder();`，因此无论如何它都会返回相同的对象。

`ProductDocumentGeneratorFactory`如果以某种方式返回 type 的对象，那将是有道理的`ProductDocument`。

[抽象工厂模式的例子](http://javapapers.com/design-patterns/abstract-factory-pattern/)

所以在你的情况下，我认为这种模式没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:55:58.017

```
public abstract class AbstractFactory
{
     public abstract Product createProduct();
     public abstract Comment createComment();
     public abstract User createUser();

    public Document createDocument(String scheme, String authority,
            String path, HashMap<String, String> parameters)
            throws ParserConfigurationException, SAXException, IOException {

//---------Your code -----

        return doc;
    } 

}

public class XMLFactory implements AbstractFactory
{
        public Product createProduct()
          {
              /* use createDocument() */
          }

        //Remaining Code for other stuff u want to create...
}

public interface Product{
 //product

}

public class ProductImpl implements Product
{
//implementation

} 
```

# java - CXF Web 服务响应返回无效名称

> ID：13641584
> 
> 赞同：1
> 
> 时间：2012-11-30T08:38:17.647
> 
> 标签：java, web-services, cxf

我使用 CXF WSDL2java 为现有的 WSDL 生成服务器。

这给了我一个这样的SEI：

```
@WebService(targetNamespace = "http://mon.namespace.1", name = "MonWs")
@XmlSeeAlso({ObjectFactory.class})
public interface MonWs {

    @WebResult(name = "Output", targetNamespace = "http://mon.namespace.1")
    @RequestWrapper(localName = "maMethodePrincipale", targetNamespace = "http://mon.namespace.1", className = "MaMethodePrincipaleRequest")
    @WebMethod(operationName = "maMethodePrincipale", action = "http://mon.namespace.1/MonWs/maMethodePrincipale")
    @ResponseWrapper(localName = "maMethodePrincipaleResponse", targetNamespace = "http://mon.namespace.1", className = "MaMethodePrincipaleResponse")
    public MaMethodePrincipaleResponse.Output maMethodePrincipale(
        @WebParam(name = "Input", targetNamespace = "http://mon.namespace.1")
        MaMethodePrincipaleRequest.Input Input
    );
} 
```

我创建了一个基本的实现，但是当我在我的服务器（托管在 tomcat 上，使用 de CXfNonSpringServlet）和soapUI（和其他客户端）上调用它时，我得到了这种返回：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns1:MaMethodePrincipaleResponse xmlns:ns1="http://mon.namespace.1">
         <ns2:return xmlns="http://mon.namespace.2" xmlns:ns2="http://mon.namespace.1"/>
            ...
            my return object field list correctly named
            ...
         </ns2:return>
      </ns1:MaMethodePrincipaleResponse>
   </soap:Body>
</soap:Envelope> 
```

我的问题是标签“ns2：return ...”它应该是名称“Output”，就像我在所有注释中定义的那样（即使在maMethodePrincipaleResponse名称等......）所以当我尝试用java客户端调用我的服务器时我收到一条错误消息，例如

```
javax.xml.bind.UnmarshalException: Unexpected Element (URI : "http://mon.namespace.1", local : "return"). Expected elements are <{http://mon.namespace.1}Output> 
```

我已经尝试了一系列可能的更正，例如将肥皂绑定设置为“裸”并将每个部件名或名称设置为“输出”，但没有任何效果。

我应该怎么做才能将此返回参数命名为“输出”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:25:52.403

您可以尝试使用拦截器。

在此[链接](https://stackoverflow.com/questions/6915428/how-to-modify-the-raw-xml-message-of-an-outbound-cxf-request)中，您可以看到如何修改 cxf 响应。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:28:07.257

您正在使用 Request/ResponseWrapper 的。因此，元素的名称将在这些类的字段的注释中定义。

# javascript - 如何使用 JQuery/CSS 在 div 中垂直对齐按钮？

> ID：13641587
> 
> 赞同：0
> 
> 时间：2012-11-30T08:38:44.777
> 
> 标签：javascript, jquery

有以下代码：

### HTML：

```
<table>
    <tr>
        <td class="first_column">Sign in</td>
        <td class="second_column">->(1)</td>
        <td class="third_column"><div class="translated">Some text</div></td>
    </tr>
</table> 
```

### JS：

```
$(".translated").mouseenter(function(){
    if ($(this).hasClass("editable")){
        return;
    }
    var h=$(this).height();
    var w=$(this).width();
    $(this).empty();
    var field = $("<input/>", {
            type: "text",
            value:$(this).text()
        }).appendTo(this);
    var button = $("<button></button>").appendTo(this);
    field.height(h - field.outerHeight()+field.height());
    button.height(h-button.outerHeight()+button.height());
    $(this).height(h);
    $(this).width(w);
    $(this).addClass("editable");
}); 
```

### CSS：

```
.translated
{
    color:green;
    font-weight:bold;
    vertical-align:middle;
    width:100%;
} 
```

当鼠标聚焦 div 时，此代码将输入和按钮项添加到 div 容器。但是存在以下问题 - 按钮的高度很好，但对齐不正确。我需要一个新的按钮项垂直位于行的中心。请告诉我，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:06:21.027

您必须在 js 代码中设置按钮宽度：

```
button.css('width', field.width()); 
```

试试这个小提琴：http: [//jsfiddle.net/velthune/NCrUu/5/](http://jsfiddle.net/velthune/NCrUu/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:24:14.517

我清理了您的代码，添加了一个表格行并设置了输入和按钮的宽度。它们是不同的，因为浏览器提供了这些元素的边距和填充

[http://jsfiddle.net/andreaslyngstad/BFwU7/](http://jsfiddle.net/andreaslyngstad/BFwU7/)

HTML

```
<table>
            <tr>
                <td class="first_column">Sign in</td>
                <td class="second_column">->(1)</td>
                <td class="third_column">
                  <div class="translated">Some text</div>
                </td>
            </tr>
<tr>
                <td class="first_column"></td>
                <td class="second_column"></td>
                <td class="third_column" id="button_container"></td>
            </tr>
 </table>​​​ 
```

CSS

```
table{
    width:100%
}
button{
    width:100px
}
input{
    width:96px
}
.translated {
    color:green;
    font-weight:bold;
    vertical-align:middle;
    width:100%;
  }​ 
```

JS

```
var field = $("<input/>", {
    type: "text",
    value: $(this).text()
})
var button = $("<button>sign in</button>")

$(".translated").mouseenter(function() {
    $(this).empty();
    field.appendTo(this);
    button.appendTo($("#button_container"));
});​ 
```

# function - matlab：fmincon，将变量传递给nonlcon

> ID：13641590
> 
> 赞同：2
> 
> 时间：2012-11-30T08:39:02.553
> 
> 标签：function, matlab, variables, octave, minimize

我知道这是一个愚蠢的问题，但我不知道如何解决它......可以说我有类似的东西：

```
x = fmincon(@myfun,x0,A,b,Aeq,beq,lb,ub,@mycon) 
```

后来：

```
function [c,ceq] = mycon(x)
c = ...     
ceq = ... 
```

如何将其他变量传递给`@mycon`，例如

```
function [c,ceq] = mycon(x, variable)
if variable == 1 
    c = ...     
    ceq = ... 
else   
    c = ...     
    ceq = ... 
end 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:46:00.990

`mycon`您作为匿名函数传递：

```
 x = fmincon(@myfun,x0,A,b,Aeq,beq,lb,ub,@(xx)mycon(xx,variable)) 
```

请注意，`variable`在调用该`fmincon`行时是固定的。

# sql - 在 sum 聚合函数中使用子查询

> ID：13641591
> 
> 赞同：0
> 
> 时间：2012-11-30T08:39:04.653
> 
> 标签：sql

以下查询

```
select OrderID,fltprc
 from tab1 
```

给我以下结果：

OrderID# fltprc
1595 101.85
1585 25.00
1585 25.00
1682 200.54

我想要基于唯一 ID 的 fltprc 总和

它表示唯一顺序的 fltprc 的总和。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:41:47.363

试试这个：

```
SELECT SUM(DISTINCT fltprc) FROM tab1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:56:50.447

你的语法不正确！

要在变量上存储值，请使用：

```
SET @test := (select sum(distinct fltprc) from tab1);
SELECT @test; 
```

看看这个小提琴：[http ://sqlfiddle.com/#!2/4bbd1/13](http://sqlfiddle.com/#!2/4bbd1/13)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:19:58.390

不确定我是否完全遵循您的问题。如果您试图为每个唯一的 orderID 获取“fltprc”的总和，那么只需使用 GROUP BY 例如

```
SELECT
   OrderID,
   SUM(fltprc) 
FROM
   tab1
GROUP BY
   OrderID 
```

# python - 在 reST 中指定锚名称

> ID：13641592
> 
> 赞同：13
> 
> 时间：2012-11-30T08:39:11.883
> 
> 标签：python, restructuredtext, docutils

我正在使用 docutils`rst2html`附带的工具从 reST 创建 HTML。似乎代码已经为`id`各个部分分配了属性，这些属性可以用作 URL 中的片段标识符，即用作跳转到页面特定部分的锚点。这些`id`值基于部分标题的文本。当我更改该标题的措辞时，标识符也会更改，从而使旧 URL 无效。

有没有办法指定名称用作给定部分的标识符，以便我可以在不使链接失效的情况下编辑标题？如果我自己从自己的脚本中调用 docutils 发布者，会有办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:02:06.657

我认为您不能在 reST 部分中设置显式 id，但我可能会弄错。

如果您希望有编号的 id，这将取决于文档树中各部分的顺序，而不是它们的标题，您可以通过对 docutils/nodes.py 中的 document.set_id() 方法稍作更改来实现（在我的版本的第 997 行。）

这是补丁：

```
 def set_id(self, node, msgnode=None):
     for id in node['ids']:
         if id in self.ids and self.ids[id] is not node:
             msg = self.reporter.severe('Duplicate ID: "%s".' % id)
             if msgnode != None:
                 msgnode += msg
     if not node['ids']:
-        for name in node['names']:
-            id = self.settings.id_prefix + make_id(name)
-            if id and id not in self.ids:
-                break
-        else:
+        if True: #forcing numeric ids
             id = ''
             while not id or id in self.ids:
                 id = (self.settings.id_prefix +
                       self.settings.auto_id_prefix + str(self.id_start))
                 self.id_start += 1
         node['ids'].append(id)
     self.ids[id] = node
     return id 
```

我刚刚对其进行了测试，它生成的部分 id 为 id1、id2 ...

如果您不想更改此系统范围的文件，您可以从自定义 rst2html 命令对其进行猴子修补。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T11:08:25.210

我不确定我是否真的理解你的问题。

您可以创建指向文档中任意位置的[显式超链接目标](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#explicit-hyperlink-targets)，这些位置可用于引用这些位置，而与 docutils 创建的隐式超链接目标无关：

```
.. _my_rstfile:

------------------
This is my rstfile
------------------

.. _a-section:

First Chapter
-------------

This a link to a-section_ which is located in my_rstfile_. 
```

由于您似乎想在多个 rst 文件之间创建链接，但我建议使用[`Sphinx`](http://sphinx-doc.org/)它，因为它可以处理对不同文件之间[任意位置](http://sphinx-doc.org/markup/inline.html#cross-referencing-arbitrary-locations)的引用，并且具有更多优势，例如[toctree](http://sphinx-doc.org/theming.html)和[theming](http://sphinx-doc.org/markup/toctree.html)。您不仅可以将 sphinx 用于源代码文档，还可以用于一般文本处理。[Sphinx 文档](http://sphinx-doc.org/index.html)本身就是一个例子（在[readthedocs](https://readthedocs.org/)上有数百个其他例子）。

调用 Sphinx 应该很简单，使用[`sphinx-quickstart`](http://sphinx-doc.org/tutorial.html#setting-up-the-documentation-sources). 您可以简单地将现有的 rst 文件添加到目录树中`index.rst`并运行`make html`. 如果您想记录 python 代码，您可以使用[`sphinx-apidoc`](http://sphinx-doc.org/invocation.html#invocation-of-sphinx-apidoc)它将自动生成 API 文档。

# c# - 测试框架（NUnit、Mole、TestDriven）有什么区别？

> ID：13641600
> 
> 赞同：-1
> 
> 时间：2012-11-30T08:39:52.437
> 
> 标签：c#, .net, unit-testing, testing, nunit

这对我来说很重要吗？我很混乱。我对 Nunit 有一些了解和经验。这很清楚。但我认为这还不够。这是我的感觉。我一直在对测试方法进行一些研究。我也面对面的选择。

1) 模拟

2) RhinoMock

3) 规范流

4) 测试驱动

5）与单元测试框架

6) Pex 鼹鼠

7) 加里奥

8) NUnit

够了吗？哪个有用？或者如何根据什么来选择？例如; 我猜 Gallio 与 NUnit 或 SpecFlow 不同，比其他更专业。但他们是我的猜测。可以给一些建议如何选择吗？如何偏爱？或者你有什么偏好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:44:18.260

Gallio 和 TestDriven 是单元测试运行器，而不是框架。

Pex 是一个白盒测试器，它分析代码并自动为边缘情况生成单元测试。

Mole 是一种模拟框架。Mock 和 Rhino Mocks 是模拟框架。

这里唯一的单元测试框架是 NUnit、MSTest（你称之为“Vs Unit Testing FrameWork”）和 SpecFlow，其中 NUnit 和 MSTest 是唯一的“传统”单元测试框架，而 SpecFlow 是 BDD 风格的测试框架。

所以，你的清单包含很多不同的东西，也许你应该重复你的研究。

[我将其发布为答案，因为评论变得太长了]

# python - 在循环内部或外部创建极其随机的树分类器

> ID：13641601
> 
> 赞同：1
> 
> 时间：2012-11-30T08:39:56.410
> 
> 标签：python, scikit-learn, random-forest

我在 X_sample 中有许多样本矩阵 (mxn)。每个矩阵具有相同的行数（相同的 m），但具有不同的特征数（差异 n）。X-sample 中的矩阵示例为：1000x40、1000x35、1000x30、1000x25。关于我的问题，我有以下（非常简化的）代码示例：

```
Y_train =
Y_test =
clf = ExtraTreesClassifier(n_estimators=500, max_depth=None,max_features="auto",
                           min_samples_split=1, random_state=0)

for X_data in X_samples:
    X_train = X_data[0]
    X_test = X_data[1]
    clf.fit(X_train,Y_train)
    pred_res = clf.predict(X_test)
    ..... 
```

我使用参数在循环外创建了一个分类器`max_features="auto"`。我使用具有不同数量特征的样本矩阵在循环内执行不同的分类。我的问题是，`max_features`每次循环执行拟合操作时，分类器是否会根据 X_train 的实际大小（实际特征数）调整值。值为“auto”的参数 `max_features`应该得到等于特征数量平方根的实际值。也就是说，我应该在循环外还是在循环内创建分类器？有没有办法读取参数的实际值`max_features`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:37:25.390

是的。该`fit`函数不会更改估计量。请参阅[文档](http://scikit-learn.org/dev/developers/index.html#estimated-attributes)。

# spring - org.hibernate.hql.internal.ast.QuerySyntaxException：写入未映射

> ID：13641603
> 
> 赞同：1
> 
> 时间：2012-11-30T08:40:02.680
> 
> 标签：spring, hibernate, many-to-many

我使用 Spring 和 Hibernate 设置了一个数据库应用程序，并且我使用的是多对多关系。这是代码：

作者.java

```
@ManyToMany(cascade = {CascadeType.ALL})
@JoinTable(name = "writes", joinColumns = {@JoinColumn(name = "authorId")}, inverseJoinColumns = {@JoinColumn(name = "publicationId")})
private Set<Publication> publications = new HashSet<Publication>(); 
```

出版.java

```
@ManyToMany(mappedBy = "publications")
private Set<Author> authors = new HashSet<Author>(); 
```

这些代码行生成一个名为 writes 的连接表，但是当我尝试对所有表运行查询时，int 给了我上面提到的错误。

这是应该运行查询的方法：

```
@Transactional
public List<Author> findAuthorByLastname(String lastName) {
    String hql = "from Author a, Publication p, writes w where a.id = w.authorId and p.id = w.publicationId and a.lastname = :lastName";
    Query q = sessionFactory.getCurrentSession().createQuery(hql);
    q.setParameter("lastName", lastName);
    List<Author> result = q.list();
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:18:11.947

您不需要在 HQL 查询中明确提及连接表（此外，您甚至不能提及它们 - 仅映射实体）。您需要改为使用`join`映射关系。

此外，您想要实现的目标还不是很清楚。

*   如果您想在一个查询中获取`Author`带有急切填充的 s 集合的s，请使用：`Publication``join fetch`

    ```
    select distinct(a) from Author a join fetch a.publications where a.lastName = :lastName 
    ```

*   如果要获取对 ( `Author`, `Publication`) 的列表，请使用常规`join`：

    ```
    select a, p from Author a join a.publications p where a.lastName = :lastName 
    ```

# kinect - Skeletal Tracking 上的关节跟踪图像未正确跟随

> ID：13641604
> 
> 赞同：0
> 
> 时间：2012-11-30T08:40:02.633
> 
> 标签：kinect

当我运行 Channel9 MSDN Kinect 快速入门系列代码进行骨骼跟踪时，假设有图像/椭圆与所选关节的位置重叠。相反，我得到的图像/椭圆稍微偏离了关节的位置，而不是完全超出了关节的位置。无论我将关节移动到哪里，图像都会远离关节的确切位置。我在这里看过视频（http://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals）和他们的作品。是否有什么我做错了我没有注意到我改变或忘记更新的地方？

更新：这是可能导致它的一些代码行：

```
 CoordinateMapper cm = new CoordinateMapper(kinectSensorChooser1.Kinect);
            //Map a joint location to a point on the depth map
            //head
            DepthImagePoint headDepthPoint =
                cm.MapSkeletonPointToDepthPoint(first.Joints[JointType.Head].Position, depth.Format); 
```

这是对视频内容的改变，因为他们更新了一种将骨架映射到深度和深度到色点的新方法。它消除了流终止时发生的错误。该方法具有要求位置和格式的参数。难道depth.Format与RGB640x480Resolution的格式不一样？

```
 //Map a depth point to a point on the color image
            //head
            ColorImagePoint headColorPoint =
                cm.MapDepthPointToColorPoint(depth.Format, headDepthPoint,
                ColorImageFormat.RgbResolution640x480Fps30); 
```

在主窗口屏幕上，这是我创建正在使用的图像的内容：

```
<Canvas Name="MainCanvas">
    <my:KinectColorViewer Canvas.Left="50" Canvas.Top="50" Height="480" Name="kinectColorViewer1" Width="640" 
                          Kinect="{Binding ElementName=kinectSensorChooser1, Path=Kinect}" />
    <Ellipse Canvas.Left="0" Canvas.Top="0" Height="50" Name="leftEllipse" Width="50" Fill="#FF4D298D" Opacity="1" Stroke="White"></Ellipse>
    <Ellipse Canvas.Left="100" Canvas.Top="0" Height="50" Name="rightEllipse" Stroke="White" Width="50" Fill="#FF2CACE3" Opacity="1" />
    <my:KinectSensorChooser Canvas.Left="250" Canvas.Top="380" Name="kinectSensorChooser1" Width="328" />
    <Ellipse Canvas.Left="225" Canvas.Top="84" Height="50" Name="headImage" Stroke="White" Width="50" Fill="#FF2CACE3" Opacity="1" />
    <my:KinectSkeletonViewer Canvas.Left="646" Canvas.Top="240" Name="kinectSkeletonViewer1" Width="640" Height="480" Kinect="{Binding ElementName=kinectSensorChooser1, Path=Kinect}" />

</Canvas> 
```

我已经评论了这些关于缩放位置的代码行

```
 //ScalePosition(headImage, first.Joints[JointType.Head]);
       // ScalePosition(leftEllipse, first.Joints[JointType.HandLeft]);
        //ScalePosition(rightEllipse, first.Joints[JointType.HandRight]); 
```

并且此功能已被评论。

```
 private void ScalePosition(FrameworkElement element, Joint joint)
    {
        //convert the value to X/Y
        //Joint scaledJoint = joint.ScaleTo(1280, 720); 

        //convert & scale (.3 = means 1/3 of joint distance)
       // Joint scaledJoint = joint.ScaleTo(1280, 720, .3f, .3f);

    //    Canvas.SetLeft(element, scaledJoint.Position.X);
      //  Canvas.SetTop(element, scaledJoint.Position.Y);

    } 
```

这已被注释掉，因此不使用任何变换参数： //sensor.SkeletonStream.Enable(parameters);

这就是启用流和骨架的代码行的样子：

```
 sensor.SkeletonStream.Enable();

        sensor.AllFramesReady += new EventHandler<AllFramesReadyEventArgs>(sensor_AllFramesReady);
        sensor.DepthStream.Enable(DepthImageFormat.Resolution640x480Fps30);
        sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:01:34.680

尝试以下步骤。

*   注释 scaleTo() 用于测试的行。
*   你用 640x480 初始化了 kinect？尝试将此尺寸放在 XAML 上的 my:KinectSkeletonViewer 元素中。我看到它实际上是 Width="320" Height="240"，更改它。
*   还要检查不要在您的 Image 元素或托管它的 Canvas 上使用 strech，为了安全起见，请从 MainCanvas 中删除 Height="Auto" 和 Width="Auto"。
*   **在没有**TransformSmoothParameter 的情况下启动您的骨架流，或者，如果您想使用它，请尝试以下参数

    ```
    this.KinectSensorManager.TransformSmoothParameters = new TransformSmoothParameters
    {
        Smoothing = 0.5f,
        Correction = 0.5f,
        Prediction = 0.5f,
        JitterRadius = 0.05f,
        MaxDeviationRadius = 0.04f
    }; 
    ```

我正在尝试使用 kinect for xbox 做同样的事情，它对我来说效果很好。录制channel9视频时sdk没有CoordinateMapper类，所以不需要先转深度再转颜色，坐标映射器有直接将骨架点映射到色点的方法，方法是MapSkeletonPointToColorPoint( )，使用该方法，不用担心深度数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:16:26.573

看起来我遇到的问题出在 xaml 代码中。我替换了我拥有的 xaml 代码，并将其替换为画布上图像和对象的原始 xaml 代码。

```
 <my:KinectColorViewer Canvas.Left="0" Canvas.Top="0" Width="640" Height="480" Name="kinectColorViewer1" 
                          Kinect="{Binding ElementName=kinectSensorChooser1, Path=Kinect}" />
    <Ellipse Canvas.Left="0" Canvas.Top="0" Height="50" Name="leftEllipse"  Width="50" Fill="#FF4D298D" Opacity="1" Stroke="White" />
    <Ellipse Canvas.Left="100" Canvas.Top="0" Fill="#FF2CACE3" Height="50" Name="rightEllipse" Width="50" Opacity="1" Stroke="White" />
    <my:KinectSensorChooser Canvas.Left="250" Canvas.Top="380" Name="kinectSensorChooser1" Width="328" />
    <Image Canvas.Left="66" Canvas.Top="90" Height="87" Name="headImage" Stretch="Fill" Width="84" Source="/SkeletalTracking;component/c4f-color.png" /> 
```

可能是我设置不正确或根本没有设置的属性或事件设置导致图像对象发生变化。

# sql - SSIS 导出到 CSV 文件失败

> ID：13641605
> 
> 赞同：3
> 
> 时间：2012-11-30T08:40:05.770
> 
> 标签：sql, sql-server, ssis

我正在尝试使用 SSIS 将 SQL Server 2005 表的内容导出到 csv 文件。在数据流任务中，我有一个表的 OLE DB 源和文件的平面文件目标。

复制数据时，我开始在某行的某一列上出现故障，经过一些调查发现问题出在下面数据中的逗号

**数据问题 (nvarchar255)**

```
errors code l075 showing,,,re test. 
```

**OLE DB Source for Comment col**

![在此处输入图像描述](../Images/67b3080bc02db06082d24deafb2b1a6f.png)

**派生列**

鉴于这是我在源和目标以及目标对象之间创建了一个派生列对象并尝试使用替换过滤掉逗号`REPLACE(Comment,","," ")`但同一列仍然失败并出现以下错误的问题。

![在此处输入图像描述](../Images/6fe995d8afa3149070939ab02a6b5ae5.png)

![在此处输入图像描述](../Images/662d29185773be716f3834f20a85651f.png)

![在此处输入图像描述](../Images/509d4594225d0f2da087c8ea7b236153.png)

![在此处输入图像描述](../Images/9706975b836890e1ad1cda1465d8bd8f.png)

**目标组件**

![在此处输入图像描述](../Images/fcac65396db634d2c82221430c4e3411.png)

**例外**

![在此处输入图像描述](../Images/aa056e5fc3730c9ceb1639e18dec8379.png)

[Inspection Failures Destination [206]] 错误：数据转换失败。“注释”列的数据转换返回状态值 4 和状态文本“文本被截断或一个或多个字符在目标代码页中不匹配。”。

[检查失败目的地 [206]] 错误：无法复制或转换列“评论”的平面文件数据。

[SSIS.Pipeline] 错误：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。
在处理输入“平面文件目标输入”(207) 时，组件“检查失败
目标”(206) 上的 ProcessInput 方法失败，错误代码为 0xC02020A0。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。
在此之前可能会发布错误消息，其中包含有关失败的更多信息。

[检查失败源 [128]] 错误：尝试将行添加到数据流任务缓冲区失败，错误代码为 0xC0047020。

[SSIS.Pipeline] 错误：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。
组件“检查失败源”(128) 上的 PrimeOutput 方法返回错误代码 0xC02020C4。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。
在此之前可能会发布错误消息，其中包含有关失败的更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:59:40.613

好的，问题实际上似乎是文本中隐藏的非法字符

在下面的图像中，顶行在`re test`字符串之前显示了一个正方形。数据库中的注释列是一个 nvarchar，它显然使用了不同的字符集，所以我不能只使用 CHAR(13) + CHAR(10) 来替换回车符。

修复涉及将字段从 nvarchar 转换为 varchar 然后在转换器上执行替换？导致图像中校正的第二个 ling 的字符

```
SELECT ID,
        REPLACE(REPLACE(CAST(Comment AS varchar(255)),'?',' '),',',' ') Comment
FROM tblInspectionFailures  WHERE (ID = 216899) 
```

![在此处输入图像描述](../Images/791c5cbbc4c3e9d16348443705c81ab8.png)

[转换要求在此处详细说明](http://bytes.com/topic/sql-server/answers/84141-using-replace-nchar-stored-procedure)

这对我来说不应该是一个理想的解决方案，但它确实有效。有没有人有其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:52:56.623

在不替换注释列的情况下，您可以创建另一个列并将新的派生列映射到目标列并查看。

# php - 将控制器名称更改为产品名称

> ID：13641609
> 
> 赞同：0
> 
> 时间：2012-11-30T08:40:26.390
> 
> 标签：php, codeigniter

我想为存储在数据库中的产品创建对 SEO 更友好的 URL。

如何从 URL 中获取 ProductName？

例如：

```
http://domain.com/ProductName 
```

其中 ProductName 不是控制器。我需要从控制器验证 ProductName 并显示它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T08:47:13.870

我个人会创建一个名为 products 的控制器，它接受一个参数以从数据库中查找产品：

```
class Products extends CI_Controller
{
    public function index($productname)
    {
        $data['product'] = $this->db->get_where('products', array('urlname' => $product))->row_array();
        // other functionality here and view loading
    }
} 
```

然后为这个场景添加路由（config/routes.php）：

```
$route['other/routes/first'] = "their/correct/controller/$1";
$route['/(:any)'] = "/products/index/$1"; 
```

自从我使用 CI 以来已经有一段时间了，但这应该可以帮助您指出我希望的正确方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:47:45.170

您可以在 routes.php 中添加路由规则 将请求重定向到 Product 控制器

```
$route['(:any)'] = "product/$1"; 
```

在您的产品控制器中，从 URI 段获取产品名称

```
$product_name = $this->uri->segment(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T08:51:48.960

您可以使用[URI 路由（路由规则）](http://ellislab.com/codeigniter/user-guide/general/routing.html)。

路由规则在您的 application/config/routes.php 文件中定义。在其中您将看到一个名为 $route 的数组，它允许您指定自己的路由条件。可以使用通配符或正则表达式指定路由

```
$route['/(:any)'] = "/products/index/$1"; 
```

此示例将导致：[http://www.example.com/MyProductName/](http://www.example.com/MyProductName/)加载将名称作为参数的产品类。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-30T09:06:59.937

您可以利用 CI 路由来实现这一点

编辑 Application/config/routes.php

```
$route['/(:any)'] = "/products/index/$1"; 
```

# sql - 如果部分联合查询不返回任何结果，则整个联合查询不返回任何结果

> ID：13641610
> 
> 赞同：1
> 
> 时间：2012-11-30T08:40:33.917
> 
> 标签：sql, ms-access, ms-access-2007, criteria

我创建了以下联合查询，它在大多数情况下都可以正常工作：

```
SELECT [%$##@_Alias].[Contact ID], [%$##@_Alias].[Mailing Name]
FROM (SELECT [Referrals - Contacts Within Organisations].[Contact ID], [Referrals - Contacts Within Organisations].[Mailing Name],  [Referrals - Contacts Within Organisations].[Surname], [Referrals - Contacts Within Organisations].[First name]
FROM [Referrals - Contacts Within Organisations]
UNION SELECT "0" as [Contact ID], "View all contacts" as [Mailing Name], "0" as [Surname], "0" as [First name]
FROM [Referrals - Contacts Within Organisations])  AS [%$##@_Alias]
ORDER BY [%$##@_Alias].Surname, [%$##@_Alias].[First name]; 
```

这会在查询返回的任何内容的顶部添加“查看所有联系人”的初始行。

但是，如果它的“实际”查询部分没有返回任何结果，则整个查询不会返回任何结果，而我总是希望初始行无论如何都出现。

这是可能的，如果是这样，我做错了什么？谢谢。

编辑：谢谢大家的帮助。最终的工作查询如下，供其他需要这种东西的人参考：

```
SELECT A.[Contact ID], A.[Mailing Name]
FROM (SELECT "0" as [Contact ID], "View all contacts" as [Mailing Name], "0" as [Surname], "0" as [First name]
FROM [Dummy] 
UNION
SELECT [Referrals - Contacts Within Organisations].[Contact ID], [Referrals - Contacts Within Organisations].[Mailing Name],  [Referrals - Contacts Within Organisations].[Surname], [Referrals - Contacts Within Organisations].[First name]
FROM [Referrals - Contacts Within Organisations]) AS A
ORDER BY A.Surname, A.[First name]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:46:42.520

要在 SQL 中始终返回一行数据，即使您手动提供值，您也需要从至少有一行的表中进行选择，我建议使用带有一个随机信息字段的**tblDummy 。**

例如：

```
SELECT "Hello", "Goodbye"
FROM tblDummy 
```

作为旁注，我也会尝试摆脱：

```
[%$##@_Alias] 
```

这可以通过添加别名来实现**派生表**：

```
(SELECT * FROM Blah) AS A 
```

例如将派生表命名为 A

# client - 如何在 Twisted 中与服务器建立畅通的连接？

> ID：13641615
> 
> 赞同：0
> 
> 时间：2012-11-30T08:40:46.177
> 
> 标签：client, twisted, nonblocking

我正在实现一个具有以下基本结构的 API：

1.  运行服务器A
2.  客户端连接到serverA并发送数据
3.  ServerA 处理数据并将其发送到 serverB
4.  服务器 B 回复服务器 A
5.  ServerA 根据从 serverB 接收到的输入响应客户端的请求

到目前为止，我尝试了两种解决方案：

1）使用httplib创建一个标准的非扭曲TCP连接来处理从serverA到serverB的请求。然而，这在 httplib 调用期间有效地阻塞了服务器。

2）创建第二个继承自protocol.Protocol的类并使用

```
factory = protocol.ClientFactory()
factory.protocol = Authenticate
reactor.connectSSL("localhost",31337,factory, ssl.ClientContextFactory()) 
```

在 serverA 和 serverB 之间创建连接。但是，这样做时，我似乎无法从请求类的回调中访问原始的客户端到服务器的连接。

在 Twisted 中处理这种设置的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:10:05.387

“client-to-serverA”连接由与传输关联的协议实例表示。这些都是常规的旧 Python 对象，因此您可以将它们作为参数传递给函数或类初始化程序，或者将它们设置为其他对象的属性。

例如，如果你有`ClientToServerAProtocol`一个`fetchServerBData`方法被调用以响应从客户端接收到的一些字节，你可以这样写：

```
class ClientToServerAProtocol(Protocol):
    ...
    def fetchServerBData(self, anArg):
        factory = protocol.ClientFactory()
        factory.protocol = Authenticate
        factory.clientToServerAProtocol = self
        reactor.connectSSL("localhost",31337, factory, ssl.ClientContextFactory()) 
```

由于`ClientFactory`将自身设置为`factory`它创建的任何协议的属性，`Authenticate`因此由此产生的实例将能够说“self.factory.clientToServerAProtocol”并获得对该“客户端到服务器A”连接的引用。

这种方法有很多变化。这是另一个，使用最近引入的端点 API：

```
from twisted.internet.endpoints import SSL4ClientEndpoint

class ClientToServerAProtocol(Protocol):
    ...
    def fetchServerBData(self, anArg):
        e = SSL4ClientEndpoint(reactor, "localhost", 31337, ssl.ClientContextFactory()) 
        factory = protocol.Factory()
        factory.protocol = Authenticate
        connectDeferred = e.connect(factory)
        def connected(authProto):
            authProto.doSomethingWith(self)
        connectDeferred.addCallback(connected) 
```

这里的基本思想相同 - 用于`self`引用您对`Authenticate`协议感兴趣的“client-to-serverA”连接。在这里，我使用了一个嵌套函数来 ''close over'' `self`。这只是您在程序的正确部分获得参考的众多选项中的另一个。

# c# - 从 php 页面获取响应

> ID：13641616
> 
> 赞同：3
> 
> 时间：2012-11-30T08:40:52.623
> 
> 标签：c#, php, asp.net, asp.net-3.5, p3p

我需要从我的 aspx.cs 页面调用 .php 页面。但我不想加载页面。我只想调用页面，页面会给我需要存储在 DB 中的 XLM 响应。我是尝试使用 Ajax，但根据[此](https://stackoverflow.com/questions/5005960/xmlhttprequest-status-0-responsetext-is-empty)链接。我们无法从 ajax 调用跨域页面。

简而言之，我想使用 asp.net 代码从 php 页面读取数据。

谁能帮帮我。

**更新**:: P3P 策略在跨域页面调用的情况下是否有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T10:15:18.900

我得到了解决方案，谢谢你的帮助。

创建一个新的 WebClient 对象

```
WebClient client = new WebClient();

string url = "http://testurl.com/test.php"; 
```

创建一个字节数组来保存返回的数据

```
byte[] html = client.DownloadData(url); 
```

使用 UTF8Encoding 对象将字节数组转换为字符串

```
UTF8Encoding utf = new UTF8Encoding(); 
```

获取转换后的字符串

```
string mystring = utf.GetString(html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:56:34.220

如果我对您的理解正确，您的问题是您想要进行跨域 ajax 调用 - 这是不可能的。解决这个问题的方法是调用您自己的后端，然后从其他站点获取数据并将其发送回浏览器。请记住在后端进行任何必要的安全检查 - 取决于您对其他域的信任程度......（但即使您 100% 信任它，它也可能被黑客入侵或有其他一些问题导致它返回一些东西除了你认为它返回的东西）

# java - 自定义 ArrayAdapter onClick 位置和行高亮

> ID：13641617
> 
> 赞同：0
> 
> 时间：2012-11-30T08:40:56.557
> 
> 标签：java, android, android-arrayadapter, listactivity

我创建了一个自定义的 ArrayList，它正在工作，因为它应该禁止 onClick 出现问题。当用户单击该行时，我最初让 ArrayList 以红色突出显示选定的行。但是，我还需要在 ArrayAdapter 类之外单击的位置。

我似乎可以做到这一点的唯一方法是添加一个 onClickListener，但是这是问题的开始，虽然这解决了我获取用户点击位置的问题，但现在突出显示的行似乎被覆盖了。

所以基本上我的问题是允许突出显示选定的行并将位置传递给 ArrayAdapter 类之外的变量，请参阅下面的代码：

阵列适配器类：

```
public class Shop extends ListActivity
{
    private static class MyAdapter extends ArrayAdapter<String> 
    {
        private ArrayList<String> data1, data2, data3, data4;

        public MyAdapter(Context context, int resource, int textViewResourceId, ArrayList<String> data1, ArrayList<String>  data2, ArrayList<String>  data3, ArrayList<String>  data4) 
        {
            super(context, resource, textViewResourceId, data1);
            this.data1 = data1;
            this.data2 = data2;
            this.data3 = data3;
            this.data4 = data4;
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) 
        {
            View v = super.getView(position, convertView, parent);
            TextView t1 = (TextView) v.findViewById(R.id.data1);
            t1.setText(data1.get(position));
            TextView t2 = (TextView) v.findViewById(R.id.data2);
            t2.setText(data2.get(position));
            TextView t3 = (TextView) v.findViewById(R.id.data3);
            t3.setText(data3.get(position));
            TextView t4 = (TextView) v.findViewById(R.id.data4);
            t4.setText(data4.get(position));
            spnCharacters.setVisibility(View.GONE);

            Iterator<Integer> iterator = unavailableItem.iterator();
            while (iterator.hasNext())
            {
                int NotAvailable = iterator.next();
                if(position == NotAvailable)
                {
                    v.setBackgroundColor(Color.rgb(170, 170, 170));
                }
            }
            if(unavailableItem.size() == 1)
            {
                if(position == unavailableItem.get(0))
                {
                    v.setBackgroundColor(Color.rgb(170, 170, 170));
                }
            }
            if (position == 0) 
            {
                v.setBackgroundResource(android.R.drawable.title_bar);
            }

            v.setOnClickListener(new OnClickListener() 
            {
                @Override
                public void onClick(View v) 
                {
                    currentPositon = position;
                    if(data2.get(currentPositon).equals("0"))
                    {
                        btnSell.setEnabled(false);
                    }
                    else
                    {
                        btnSell.setEnabled(true);
                    }
                }
            });

            return v;
        }
    }

    private void NeedPosition()
    {
        int position = // need ArrayAdapter exact position here
    }
} 
```

数组适配器 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/data1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:layout_weight="1.5"
        android:gravity="center_horizontal"
        android:textColor="#FFFFFF" />

    <TextView
        android:id="@+id/data2"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:layout_weight="0.5"
        android:gravity="center_horizontal"
        android:textColor="#FFFFFF" />

    <TextView
        android:id="@+id/data3"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:layout_weight="0.5"
        android:gravity="center_horizontal"
        android:textColor="#FFFFFF" />

    <TextView
        android:id="@+id/data4"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:layout_weight="0.5"
        android:gravity="center_horizontal"
        android:textColor="#FFFFFF" />

</LinearLayout> 
```

列表视图 XML：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/linearButtons"
    android:layout_above="@+id/linerBuyBtns" 
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp"
    android:listSelector="@drawable/list_selector">
</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:53:18.760

我对自定义 listViews 和 Array 适配器也有类似的问题。

对我来说，它`android:listSelector`不能正常工作，所以我`android:Background`改用我定义状态选择、突出显示等的地方。最后，为了实现某些视觉效果，我不得不使用两者的组合，这可能不是最好的解决方案，但效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:46:06.223

尝试这个...

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) 
{    
    onClick(...)  
    {    
       convertView.parent().setSelection(position); <---
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T08:47:48.520

ListActvity 有自己的方式来管理单元格点击。

```
protected void onListItemClick (ListView l, View v, int position, long id) 
```

当您单击`ListView`. 如您所见，第二个参数是`position`您需要的

# clojure - 将csv读入clojure中的列表

> ID：13641618
> 
> 赞同：6
> 
> 时间：2012-11-30T08:41:07.253
> 
> 标签：clojure

我知道有很多相关的问题，我已经阅读了它们，但仍然没有对如何读取-处理-写入有一些基本的了解。以下面的函数为例，它使用`clojure-csv`库来解析一行

```
(defn take-csv
  "Takes file name and reads data."
  [fname]
  (with-open [file (reader fname)]
    (doseq [line (line-seq file)]
      (let [record (parse-csv line)])))) 
```

我想获得的是作为结果读入某个集合的数据，`(def data (take-csv "file.csv"))`然后再对其进行处理。所以基本上我的问题是我如何返回`record`或者更确切地说是一个记录列表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T09:20:14.040

“doseq”通常用于有副作用的操作。在您创建记录集合的情况下，您可以使用“map”：

```
(defn take-csv
  "Takes file name and reads data."
  [fname]
  (with-open [file (reader fname)]
    (doall (map (comp first csv/parse-csv) (line-seq file))))) 
```

更好地解析整个文件以减少代码：

```
(defn take-csv
  "Takes file name and reads data."
  [fname]
  (with-open [file (reader fname)]
    (csv/parse-csv (slurp file)))) 
```

您也可以使用 clojure.data.csv 代替 clojure-csv.core。只应在之前的函数中将 parse-csv 重命名为 take-csv。

```
(defn put-csv [fname table]
  (with-open [file (writer fname)]
    (csv/write-csv file table))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T13:44:15.750

对于 .csv 文件可以做的所有事情，我建议使用 clojure-csv 或 clojure.data.csv。我主要使用 clojure-csv 读取 .csv 文件。

以下是我在大多数 Clojure 程序中使用的实用程序库中的一些代码片段。

```
from util.core

    (ns util.core
      ^{:author "Charles M. Norton",
        :doc "util is a Clojure utilities directory"}

      (:require [clojure.string :as cstr])
      (:import java.util.Date)
      (:import java.io.File)
      (:use clojure-csv.core))

(defn open-file
"Attempts to open a file and complains if the file is not present."

[file-name]
(let [file-data (try 
               (slurp file-name)
               (catch Exception e (println (.getMessage e))))]
  file-data))

(defn ret-csv-data
"Returns a lazy sequence generated by parse-csv.
 Uses open-file which will return a nil, if
 there is an exception in opening fnam.

 parse-csv called on non-nil file, and that
 data is returned."

[fnam]
(let [csv-file (open-file fnam)
      inter-csv-data (if-not (nil? csv-file)
                       (parse-csv csv-file)
                        nil)

      csv-data 
        (vec (filter #(and pos? (count %) 
           (not (nil? (rest %)))) inter-csv-data))]

    (if-not (empty? csv-data)
      (pop csv-data)
       nil)))

(defn fetch-csv-data
    "This function accepts a csv file name, and returns parsed csv data,
     or returns nil if file is not present."

    [csv-file]
        (let [csv-data (ret-csv-data csv-file)]
            csv-data)) 
```

读入 .csv 文件后，如何处理其内容是另一回事。通常，我从一个金融系统（如财产评估）获取 .csv“报告”，并将数据格式化以上传到另一个金融系统的数据库中，如计费。

我经常会使用`zipmap`每个 .csv 行，这样我就可以按列名提取数据（已读取列名），甚至可以制作一系列`zipmap`'ped .csv 行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-27T12:00:58.343

只是为了添加这个好的答案，这里是一个完整的例子

首先，将[clojure-csv](https://clojars.org/clojure-csv)添加到您的依赖项中

```
(ns scripts.csvreader
  (:require [clojure-csv.core :as csv]
            [clojure.java.io :as io]))

(defn take-csv
 "Takes file name and reads data."
 [fname]
 (with-open [file (io/reader fname)]
  (-> file
      (slurp)
      (csv/parse-csv)))) 
```

用法 `(take-csv "/path/youfile.csv")`

# python - Python xlwt 模块：插入图像并控制尺寸

> ID：13641620
> 
> 赞同：4
> 
> 时间：2012-11-30T08:41:24.133
> 
> 标签：python, xlwt

`worksheetName.insert_bitmap`除了使用 Python`xlwt`模块之外，还有其他方法可以在 Excel 工作表中插入图像吗？

# magento - 如何确定是否从默认、网站或商店视图中获取 Magento 配置

> ID：13641622
> 
> 赞同：2
> 
> 时间：2012-11-30T08:41:27.517
> 
> 标签：magento

例如配置：

```
default:      some/xml/path: value_1
storeview_5:  some/xml/path: other_value 
```

现在获取：

```
// store 5
Mage::getStoreConfig('some/xml/path'); // >> other_value
// store 1
Mage::getStoreConfig('some/xml/path'); // >> value 1 (inherited from default) 
```

我想知道 storeview_1 没有自己的配置。

最好的方法是获取配置树，例如：

```
default     => value_1
website_1   => website_value
storeview_1 => storeview_1_value
storeview_5 => other_value 
// omits empty configs for others or null them, etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:41:18.563

该方法`getStoreConfig`还接受可选的商店 ID，因此只需将商店 ID 作为第二个参数传递 `Mage::getStoreConfig('some/xml/path', $store_id);`

# excel-2010 - PowerPivot（V2）表中行标签之间的汇总数据？

> ID：13641623
> 
> 赞同：-1
> 
> 时间：2012-11-30T08:41:28.657
> 
> 标签：excel-2010, powerpivot

我所拥有的是：

一个扁平的 PowerPivot (V2) 表，用于将数据显示为普通的 Excel 表（非常简化，范围更广）：

|开始日期|容器|颜色|价格|价格含税|
|01.01.2009|集装箱 240|蓝色|2,50 €|3,05 €|
|01.01.2009|集装箱 240|红色 |3,60 €|4,39 €|
|01.01.2009|集装箱 360|蓝色|4,20 €|5,12 €|

是否可以格式化 PowerPivot 表以使汇总列不在行尾？我正在尝试制作价目表/目录工具。表中有很多字段，有些不太重要，我希望它们显示在价格之后。开始日期、容器和颜色是列标签，价格和价格税是汇总数据。

自然地，我无法将汇总数据从值区域移动到字段列表中的行或列区域，但是有没有其他方法可以重新排序列，以便我获得汇总数据，例如在开始日期和容器之间？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:02:38.913

它可能但并不完全简单。

编写一个返回文本的度量很容易，例如：

```
=VALUES(Table1[Container]) 
```

....将从 'Table1' 中名为 Container 的列返回文本，但仅当已建立的上下文意味着容器只有一个值时（VALUES 返回一个包含所有未完成值的单列表被当前上下文过滤掉）。

为了使它健壮，您需要捕获错误，以便您的整个公式如下所示：

```
=IF(COUNTROWS(VALUES(Table1[Container]))>1,BLANK(),VALUES(Table1[Container])) 
```

一旦完善了这个措施，就可以放在更重要的数据之后。

高温高压

雅各布

# c# - 字符串编码 - 德语变音符号

> ID：13641627
> 
> 赞同：1
> 
> 时间：2012-11-30T08:41:40.030
> 
> 标签：c#, localization, string-length

使用 C#，Framework 4.0，我在德语方面遇到了一个棘手的问题。

考虑到这一点`snippet`：

```
string l_stest = "ZÄHLWERKE";
Console.WriteLine(l_stest.Length); // 9
Console.WriteLine(toto.LengthInTextElements); // 9
Console.ReadLine(); 
```

结果将是`9`；

现在，选择文本 withing `Notepad++`，它会给我一个长度`10`。

我猜这`encoding`是我的问题的根源，但不必扫描我的单词并用匹配的两个字母 ( `Ä`-> `AE`) 替换变音符号，我该如何继续精确计算我的字符串的长度？

编辑：我认为正确的长度是`10`.

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:46:33.737

`Encoding.UTF8.GetByteCount(l_stest)`看起来它会得到你想要的长度。

# c - 旧 c 代码与新 ncurses 版本（ldat 结构）的问题

> ID：13641631
> 
> 赞同：1
> 
> 时间：2012-11-30T08:42:02.877
> 
> 标签：c, ncurses, curses

在升级到新服务器后，我遇到了一些使用 curses 的代码问题，因此也遇到了诸如库、标头等新软件的问题。问题是 ldat 结构字段“firstchar”、“lastchar”和“text”的使用，这些字段在较新版本的 curses.h 中隐藏在 curses.priv.h 中，因此无法解决。

对于如何解决这些问题，我真的可以使用一些指针。

下面的代码指示了结构字段的使用，但它只是完整代码的一部分，因为它有几千行......

如果需要其他代码，我可以添加它。

我还可以补充一点，我自己并没有制作这个程序，我只是负责让它与我们的新服务器一起工作......

```
int
update_window(changed, dw, sw, win_shared)
bool *changed;
WINDOW *dw;         /* Destination window */
window_t *sw;       /* Source window */
bool win_shared;
{
    int y, x;
    int yind, nx, first, last;
    chtype *pd, *ps;    /* pd = pointer destination, ps = pointer source */
    int nscrolls;       /* Number of scrolls to make */

    if(! sw->changed) {
        *changed = FALSE;
        return(0);
    }
    /****************************************
    * Determine number of times window is 
    * scrolled since last update
    ****************************************/
    nscrolls = sw->scrollcount; if(nscrolls >= sw->ny)
    nscrolls = 0;

    sw->scrollcount = 0L;

    dw->_flags = _HASMOVED;
    dw->_cury = sw->cury;
    dw->_curx = sw->curx;

    if(nscrolls > 0) {
        /* Don't copy lines that is scolled away */
        for(y = nscrolls; y < sw->ny; y++) {
            yind = GETYIND(y - nscrolls, sw->toprow, sw->ny);
            if(sw->lastch[yind] != _NOCHANGE) {
                first = dw->_line[y].firstchar = sw->firstch[yind];
                last = dw->_line[y].lastchar = sw->lastch[yind];

                ps = &sw->screen[yind][first];
                pd = (chtype *)&dw->_line[y].text[first];
                nx = last - first + 1;

                LOOPDN(x, nx)
                    d++ = *ps++;

                if(! win_shared) {
                    sw->firstch[yind] = sw->nx;
                    sw->lastch[yind] = _NOCHANGE;
                }
            }
        }
    } else {
        LOOPUP(y, sw->ny) {
            yind = GETYIND(y, sw->toprow, sw->ny);
            if(sw->lastch[yind] != _NOCHANGE) {
                first = dw->_line[y].firstchar = sw->firstch[yind];
                last = dw->_line[y].lastchar = sw->lastch[yind];

                ps = &sw->screen[yind][first];
                pd = (chtype *)&dw->_line[y].text[first];
                nx = last - first + 1;

                LOOPDN(x, nx)
                    *pd++ = *ps++;

                if(! win_shared) {
                    sw->firstch[yind] = sw->nx;
                    sw->lastch[yind] = _NOCHANGE;
                }
            }
        }

        if(! win_shared)
            sw->changed = FALSE;
    }

    *changed = TRUE;
    return(nscrolls);
} 
```

我很感激我能得到的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-03T01:08:42.533

的成员在[2001 年 6 月](http://invisible-island.net/ncurses/NEWS.html#t20010602)`struct ldat`被私有化。阅读该函数及其对*滚动*条的提及暗示它正在编写一些用于模拟滚动的窗口的一部分（通过将一组行写入真实窗口），并试图绕过检查更改行的 ncurses 逻辑。

 *对于这样的函数，唯一的解决方案是确定开发人员试图做什么，然后编写一个新函数来执行此操作——使用提供的库函数。*

# javascript - MONGO DB Like 运算符

> ID：13641632
> 
> 赞同：8
> 
> 时间：2012-11-30T08:42:03.267
> 
> 标签：javascript, mongodb

我正在使用 JavaScript 来查询基于 Mongo DB 的 API。

我需要根据 LIKE 运算符过滤结果，类似于

```
select * from playlist where title like '%a%' 
```

目前我称这个网址

```
var assetUrl = 'https://example.com/playlist?oauth_token=' + accessToken + '&account=XXX'+ '&fields={"title":true,"splash":true,"description":true,"source":true}'+ '&criteria={"title":/.*a.*/}'; 
```

没有成功（返回 0 个对象）。

我想知道是否应该改用正则表达式以及如何在这种情况下使用它们。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T08:48:15.423

是的，MongoDB 支持正则表达式。[您可以在文档](http://docs.mongodb.org/manual/reference/operator/regex/)中阅读它。这是一个例子：

```
db.collection.find( { url: /.*a.*/ } ); 
```

这将查找集合中字段“url”与正则表达式匹配的所有文档。还有一种使用 $regex 运算符的替代语法：

```
db.collection.find( { url: { $regex: ".*a.*"} } ); 
```

请注意，正则表达式很慢并且扩展性很差。搜索时间与集合中的记录数成线性关系，只有当您的正则表达式以字符串开头的锚点`^`（谢谢，chx）开头时，索引才有帮助。

该文档还有一章关于[Mongo 中的全文搜索](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)，建议将每个字符串拆分为单个单词的数组，以便您可以对其进行索引以便更快地查找。这当然不允许搜索词片段，但大大加快了搜索完整词的速度。

***更新：*** MongoDB 2.4 有[一个新的实验性文本索引功能](http://docs.mongodb.org/manual/core/text-search/)，允许使用索引加速文本搜索。

***更新 2：***从 2.6 版开始，默认启用文本搜索并准备好进行生产使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T13:44:01.050

```
var assetUrl = 'xxx.com/playlist?oauth_token=' + accessToken + '&account=xxx'+ '&fields='+escape('{"title":true,"splash":true,"description":true,"source":true}')+ '&criteria='+escape('{"title": {"$regex":".*ar.*"}}'); 
```

这解决了我的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T10:40:52.880

在**MongoDB Compass**中，没有一个提议的解决方案有效，但我已经成功完成了以下查询：

使用 RegExp 对象：

```
{email: RegExp('@gmail.com$', 'i')} 
```

或像这样的电子邮件开头`foo.bar`：

```
{ "email" : /^foo.bar.*/ } 
```

或像这样包含以下内容的电子邮件`@gmail`：

```
{ "email" : /.*@gmail.*/ } 
```

# install4j - 如何在 OS X 中安装服务

> ID：13641633
> 
> 赞同：1
> 
> 时间：2012-11-30T08:42:05.657
> 
> 标签：install4j

我添加“安装服务”和“启动服务” install4j

此服务在 windows 中执行得很好。

但是此服务在 OS X 中没有安装。

这是安装日志

==================================================== ================

[错误] com.install4j.runtime.beans.actions.services.InstallServiceAction [ID 58]：9 毫秒后执行操作不成功

[错误] com.install4j.runtime.beans.actions.services.StartServiceAction [ID 59]：4 毫秒后执行操作不成功

==================================================== ==================

我执行 install4j 示例程序

"C:\ProgramFiles\install4j5\samples\hello\hello.install4j" 用于 OS X 中的服务。

“Hello World Suite Installer.app”安装在我的 OS X 中。

此示例“Hello World Suite Installer.app”包含服务。

有错误..服务中..

请让我知道是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-27T14:19:13.123

可能的原因：

1.  您正在使用有*缺陷*的 install4j 版本。版本[5.1.15 中有一个错误修复（请参阅发行说明）](https://www.ej-technologies.com/download/install4j/changelog.html#5.1.15)。
2.  Mac OS X 安装程序中未包含服务启动器。（正如上面评论中提到的 Ingo Kagel）。

# javascript - 将项目存储在数组中，稍后再使用

> ID：13641638
> 
> 赞同：0
> 
> 时间：2012-11-30T08:42:20.763
> 
> 标签：javascript, jquery, ajax, arrays, json

我有代码，它从服务器获取 json 文件，然后在页面上呈现一些元素。在这段代码中，我还跳过了关键“点”重复值的项目。我的问题是，我如何让这些跳过的项目存储在某个地方，所以如果我点击有重复项的项目，它会将我链接到包含这些重复项列表的其他页面？这是我的代码

```
var request = $.ajax({
type: "GET",
    url: "example.com/rewards.json"
    dataType: "json",
    error: function (data, textStatus){
         console.log( "it`s error" );
             console.log( status );
         console.log( data );},
        success: function (data, textStatus){
        console.log( "success" );
        console.log( status );
        console.log( data );
         }
        })
        request.success(function(data, textStatus){
            var lis = "";
            var arr = [];
            var iter = 0;

            $.each(data.rewards, function(key, val){
                if ($.inArray(val.points, arr) == -1)
                    {
                        lis += "<div class = 'ui-block-" + String.fromCharCode(97 + iter%3) + "'><a href ='#' class ='ui-link-inherit'>" + val.points + "</a></div>";
                        arr.push(val.points);
                        iter +=  1;
                    }
            });
            $("#rewards_table").html(lis);
        }) 
```

我想要什么的描述可能有点混乱，所以请随时问我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:48:12.487

您只需这样做：将它们存储在某个地方以备后用。

例如，将此行放在代码的顶部：

```
var duplicates = []; 
```

...并将其添加`else`到`if`您的`$.each`迭代器函数内部：

```
else
   {
   duplicates.push(val.points);
   } 
```

*（我*想*我有你的支撑风格，对我来说有点陌生。:-)）*

以上假设您的所有代码都保存在某种包含函数中，以避免创建全局变量，因此`duplicates`（就像您现有的`request`变量一样）最终不会成为全局变量。

# objective-c - 我应该在哪里设置 ViewController 中的子视图框架

> ID：13641641
> 
> 赞同：1
> 
> 时间：2012-11-30T08:42:42.027
> 
> 标签：objective-c, ios, uiviewcontroller

我将方向设置为 RootViewController 中左侧的横向，但在 viewDidLoad 或 viewWillAppear 中，VC 的视图边界不旋转。在 viewDidAppear 中，它有一个正确的框架。我觉得在 viewDidAppear 中不是一个好地方，我该怎么办？

```
 @implementation RootViewController

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        CGRect frame = self.view.bounds;
    }

    - (void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];
        CGRect frame = self.view.bounds;

    }

    - (void)viewDidAppear:(BOOL)animated
    {
        [super viewDidAppear:animated];
        CGRect frame = self.view.bounds;
    }

    #pragma mark - Orientation

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
    {
        return toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft;
    }

    //for iOS 6 or later

    - (BOOL)shouldAutorotate
    {
        return YES;
    }

    - (NSUInteger)supportedInterfaceOrientations
    {
        return UIInterfaceOrientationMaskLandscapeLeft;
    }

    @end 
```

日志显示：

```
 viewDidLoad,x = 0.000000, y = 0.000000,w = 300.000000 h = 480.000000
    viewWillAppear:,x = 0.000000, y = 0.000000,w = 300.000000 h = 480.000000
    viewDidAppear:,x = 0.000000, y = 0.000000,w = 480.000000 h = 300.000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:47:03.557

您可以在方向更改后设置框架：

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:02:16.617

我认为它应该在这个函数中

> *   (void)viewDidLayoutSubviews { }

苹果的文档说![在此处输入图像描述](../Images/456d46770dd6bfe7c76e11f4beb6bab7.png)

# c - 如何在rabbitmq-c中使用扇出交换？

> ID：13641643
> 
> 赞同：0
> 
> 时间：2012-11-30T08:42:44.137
> 
> 标签：c, exchange-server, rabbitmq

我正在 centos 5.5 中的 rabbitmq 中测试 c 客户端。如果我想使用扇出交换将消息推送到每个队列，应该如何设置参数routingkey？

函数 amqp_basic_publish 如下所示：

```
 amqp_basic_publish(amqp_connection_state_t state,
                   amqp_channel_t channel,
                   amqp_bytes_t exchange,
                   amqp_bytes_t routing_key,
                   amqp_boolean_t mandatory,
                   amqp_boolean_t immediate,
                   amqp_basic_properties_t const *properties,
                   amqp_bytes_t body) 
```

使用扇出交换时参数routing_key是否无意义？如果是这样，我应该将此参数设置为什么值？
感谢您提供任何有用的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:09:11.827

当你有一个扇出交换时，路由键什么都不做，可以设置为任何东西。

[在这里](http://lostechies.com/derekgreer/2012/03/28/rabbitmq-for-windows-exchange-types/)查看不同交换类型的非常好的总结。

# android - 如何在椭圆形内画一个点

> ID：13641644
> 
> 赞同：3
> 
> 时间：2012-11-30T08:42:46.637
> 
> 标签：android, android-layout, android-imageview

我正在做一个游戏应用程序。在那个应用程序中，一枚硬币必须在视图中移动。但我不知道该怎么做。

我的代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="oval" >
<gradient
    android:angle="135"
    android:centerColor="#C4A5A5"
    android:endColor="#875050"
    android:startColor="#875050" />
<stroke
    android:width="1dp"
    android:color="#781A1A"
    />
</shape> 
```

我的用户界面是：

![在此处输入图像描述](../Images/efe79091e78208f08d36e2dba9c7f001.png)

我想通过这些图像移动硬币。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:18:54.257

使用此代码............

```
 RoundRectShape rs = new RoundRectShape(new float[] { 15, 15, 15, 15, 15, 15, 15, 15 }, null, null);
    ShapeDrawable sd = new ShapeDrawable(rs);

    Button btnlogin = new Button(NativeCosmosActivity.this);
    btnlogin.setBackgroundDrawable(sd);// this line converts Button to Ovel shape.. If you increase value 15 to 30,
// you will get more Ovel shape. 
```

# r - 如何设置已安装 R 包的库位置

> ID：13641646
> 
> 赞同：0
> 
> 时间：2012-11-30T08:42:58.923
> 
> 标签：r, package

我的问题是我在 R 终端中安装的包路径与我在 R-studio 中安装的路径不同。所以我想更改安装位置。我怎样才能做到这一点 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T12:39:26.740

**R端子：**

您可以传递指定库位置的`lib`参数。`install.packages`见`?install.packages`：

```
 lib: character vector giving the library directories where to
      install the packages.  Recycled as needed.  If missing,
      defaults to the first element of ‘.libPaths()’. 
```

**工作室：**

如果您转到工具 -> 安装包，您可以在对话框中指定安装包的位置。

# python - web2py 中的外键

> ID：13641648
> 
> 赞同：0
> 
> 时间：2012-11-30T08:43:12.607
> 
> 标签：python, mysql, data-access-layer, web2py

我不断收到此错误： **“DAL”对象没有属性“event_instance”**

它指向我的 db_agents 文件作为这一行的罪魁祸首：

`('event_instance_id', db.event_instance)`

但是，如果我将 event_instance 表的定义移动到该 db_agents 模型文件，错误就会消失，但我会得到一个新的，它引用 event_instance tbl 中的另一个 FKey。有没有办法避免将我所有的 db.define_tables 放在同一个文件中，我想将它们分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:10:50.987

你可以做：

```
Field('event_instance_id', 'reference event_instance') 
```

使用该替代语法，不必已经定义“event_instance”表。

另外，请注意模型文件是按字母顺序执行的，因此只要“event_instance”表在按字母顺序较早的模型文件中定义，您的原始代码就可以工作。

# google-chrome - chrome.tabs.onUpdated.addListener 正在为每个页面获得两次或更多完整状态

> ID：13641658
> 
> 赞同：10
> 
> 时间：2012-11-30T08:44:14.793
> 
> 标签：google-chrome, google-chrome-extension

这是我的脚本，它使用 onUpdated.addListener 检查每个 url：

```
chrome.tabs.onUpdated.addListener(function (tabId, changeInfo, tab) {          
 alert(changeInfo.status);
 if (changeInfo.status == 'complete') {
 if (tab.url.indexOf("in.yahoo.mail") !== -1) {
 alert(tab.url);
 chrome.tabs.update(tabId, { url: "https://accounts.google.com/ServiceLogin" });
  //injectToTab(tab);
  }
 }
}); 
```

这是清单代码：

```
 {
  "name": "LeoPlugin For Test",
  "version": "1.6",
  "manifest_version": 2,
  "content_security_policy": "script-src 'self'; object-src 'self'",
  "description": "Extension to Automate.",
  "background": {
    "scripts": ["js/eventPage.js"],
    "persistent": false
  },
  "content_scripts": [
    {
      "matches": ["http://*/*"],
      "js": ["js/eventPage.js"]
    }
  ],
  "icons":{"48":"images/bob48.png", "128":"images/bob128.png"}, //Define any icon sizes and the files that you want to use with them. 48/128 etc.
  "browser_action": {
    "default_icon": "images/bob.png",       // What icon do you want to display on the chrome toolbar
    "default_popup": "testwatch.html"       // The page to popup when button clicked.
  },
  "permissions": [
    "tabs", "http://*/*","https://*/*"             // Cross Site Access Requests
  ]

} 
```

上述代码中缺少的任何内容都会阻止多次获得“完成”状态。这也是我的 HTML 代码：

```
<html>
  <head>
    <title>Leo Chrome Extension</title>

    <link href="css/main.css" rel="stylesheet" type="text/css" />
    <link href="css/fonts.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="jquery/jquery-ui-1.8.2.custom.min.js"></script>
    <!--<script type="text/javascript" src="js/Pluginjshelper.js"></script>-->
</head>
<body class="inner_bg">
        <div class="grey-panel">
            <div>
            <div class="user-pic">
                <img src="Images/leo-logo.png" width="70" height="50" />
            </div>
            <h3>
                Leo Extension</h3><input name="ok" type="button" class="btn" id = "button123"  value="OK"/> <!--onclick = "getCPRepGraph()" -->
                <input name="chkEnable" id="chkPluginEnable" type="checkbox" value="" class="check"  /><span class="lbl">Enable</span>
            </div>
            <div class="clear">
            </div>
            <div>
                <h4>
                    <span class="blue">Plugin </span>Credentials</h4>
                <ul class="addpage-form2">
                    <li>
                        <label class="addpage-label">
                            User Name :</label><input name="txtUserName" id="txtUserName" type="text" class="addpage-input2" />
                    </li>
                    <li>
                        <label class="addpage-label">
                            Password :</label><input name="txtPassword" id="txtPassword" type="password" class="addpage-input2" />
                    </li>
                </ul>
                <div class="clear">
                </div>
            </div>
            <!--BASIC INFO panel End-->
            <div class="clear">
            </div>
        </div>
</body>
</html> 
```

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T05:55:07.733

[这是 Chrome问题 162543](https://code.google.com/p/chromium/issues/detail?id=162543)中的一个已知错误，在2012年 12 月 5 日被标记为已修复。

**解决方法：（**不再需要）

通过更改代码[将事件页面设置为后台页面](https://developer.chrome.com/extensions/event_pages.html#manifest)

```
"background": {
    "scripts": ["js/eventPage.js"],
    "persistent": false
  }, 
```

到

```
"background": {
    "scripts": ["js/eventPage.js"],
    "persistent": true
  }, 
```

并通过使用后台页面进行开发，直到交付修复程序。

**其他要点：**

看看你的 manifest.json 为什么

```
"background": {
    "scripts": ["js/eventPage.js"],
    "persistent": false
  },
  "content_scripts": [
    {
      "matches": ["http://*/*"],
      "js": ["js/eventPage.js"]
    }
  ], 
```

`js/eventPage.js`制作内容脚本以及背景\事件脚本；拥有[chrome.tabs.onUpdated.addListener()的代码在](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)中根本不起作用，请消除此代码

如果您需要更多信息，请与我们联系。

# open-source - 无需访问网站即可存档网页内容

> ID：13641665
> 
> 赞同：1
> 
> 时间：2012-11-30T08:44:50.050
> 
> 标签：open-source, html-content-extraction, webarchive

我想在不访问实际网站的情况下获取网络数据。

[http://archive.org/web/web.php](http://archive.org/web/web.php)是一个保存网站快照的例子。问题在于数据相当陈旧（5-6 个月）。

我们是否有任何其他存档存储可以找到最近的 html 内容？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:51:11.130

Do you want to curl the website? you can use php to cURL some web page:
[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

or you can use command, wget or curl, in Unix:
[http://linux.about.com/od/commands/l/blcmdl1_curl.htm](http://linux.about.com/od/commands/l/blcmdl1_curl.htm)

# c# - 使用 Parallel.ForEach 的错误

> ID：13641669
> 
> 赞同：0
> 
> 时间：2012-11-30T08:45:22.967
> 
> 标签：c#, linq, parallel.foreach

最初，我正在使用 foreach 来完成我的任务。但是，我想提高任务的效率。所以，我想使用 Parallel.ForEach 来完成我的任务。

但是，出现错误“未将对象引用设置为实例”。发生了。

这是我的代码：

```
System.Threading.Tasks.Parallel.ForEach(items, item =>
        {
             System.Threading.Tasks.Parallel.ForEach(item.a, amount =>
                    {
                         WriteToCsv(file, amount.columna, count);
                          count++;
                     });

         }); 
```

如果我使用 foreach(var item in items) 和 foreach (amount in item.a)，代码可以正常工作。

我是否错过了 Parallel.ForEach 方法的某些内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T08:56:45.283

为什么要并行执行此操作？您正在将值附加到文件中，这是一个串行（即非并行）过程。

如果你只使用一个常规的`foreach`，你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:26:26.360

您不应该嵌套多个 Parallel Foreach 循环，内部循环基本上是从外部并行循环中窃取资源，这在提高性能方面做得更好。

一次也只有 1 个线程可以写入文件，因此无论您在内部使用哪个函数，都可能`WriteToCsv()`在写入数据之前将所有内容恢复到单个线程中。

一种加快速度的方法是在并行循环中构造要附加到 CSV 文件中的文本，然后使用单个写入操作将其添加到其中：

```
var sb = new StringBuilder("");
System.Threading.Tasks.Parallel.ForEach(items, item =>
{
     foreach( var amount in item.a )
     {
         sb.append( GetCsvText(file, amount.columna, count) );
         count++;
     };
});

WriteToCsv( sb.ToString() ); 
```

显然，您无法控制将订单文本放入 CSV 文件中，因为这只是此代码中线程之间的竞争，我认为这没问题，尽管您的示例代码也是如此。

注意：在循环中构造字符串时，使用 StringBuilder 对内存性能很重要

高温高压

# javascript - 在输入框获得焦点时禁用 IE8 中的 F5 Ctr+F5 和 Ctrl+R

> ID：13641670
> 
> 赞同：0
> 
> 时间：2012-11-30T08:45:23.760
> 
> 标签：javascript, internet-explorer

我想在文本框聚焦时禁用网页刷新我正在使用的代码是这对其他快捷方式非常有用，除了：

顺便说一句，我想通过纯 JavaScript 没有 JQuery 和没有 JavaScript 框架来实现这一点。

```
 document.onkeydown = keyDown  //control chars
document.onkeypress = keyDown   //any char/number

function keyDown(e) {

        //74=j, 75=k, 78=n, 84=t
        var forbiddenCtrlKeys = new Array(74,75,78, 84);
        //37=left_arrow, 39=right_arrow
        var forbiddenAltKeys = new Array(37,39);
        //8=backspace, 116=F5
        var forbiddenSingleKeys = new Array(8,116);
        //per le textbox 116=F5
        var forbiddenTextBoxKeys = new Array(116);

        key = window.event.keyCode;     //IE

              if(window.event.ctrlKey){ //ctrl
                    isCtrl = true;
                    isAlt = false

                    checkVal(forbiddenCtrlKeys,window.event.keyCode);
              }
              else if(window.event.altKey){ //alt
                    isCtrl = false;
                    isAlt = true;
                    checkVal(forbiddenAltKeys,window.event.keyCode);
              }

              else{ //other

                    isCtrl = false;
                    isAlt = false;
                    var element = e.target.nodeName.toLowerCase();
                    var curr = document.activeElement
                    if(curr.tagName=="INPUT")
                    alert(curr.tagName);

                    if((element != 'input' && element != 'textarea') || $(e.target).attr("readonly")){
                        alert(window.event.keyCode);
                        checkVal(forbiddenSingleKeys,window.event.keyCode); 
                    }
                    if(document.event.keyCode==116){
                        alert(window.event.keyCode);
                        document.event.keyCode=0;
                        checkVal(forbiddenTextBoxKeys,window.event.keyCode);
                    }       
              }
}

function checkVal(set,key){

        for(i in set)
        {
        //case-insensitive comparison
            if(String.fromCharCode(set[i]).toLowerCase() == String.fromCharCode(key).toLowerCase())
                        {
                                alert('This key combination has been disabled.');
                                window.event.returnValue =        false;    
                                window.event.keyCode = 0;
                                return true;
                        }
        }
} 
```

所以我在其他情况下试图实现的是每当我尝试按 F5 禁用它但它不起作用时，任何洞察力将不胜感激

# c# - 从下到上读取文本文件是否正确？

> ID：13641671
> 
> 赞同：-3
> 
> 时间：2012-11-30T08:45:24.247
> 
> 标签：c#

> **可能重复：**
> [如何在 C# 中使用迭代器反向读取文本文件](https://stackoverflow.com/questions/452902/how-to-read-a-text-file-reversely-with-iterator-in-c-sharp)

我需要通过以下代码行从下到上读取超过**700 万行的 txt 文件：我想知道是正确的方法还是应该使用迭代器来完成这项任务？**一些使用迭代器的答案已经在 stackoverflow 中。

```
 foreach (string line in File.ReadAllLines("read.txt").Reverse())
        {            
            Console.WriteLine(line);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:03:45.217

由于文件不是基于行的，因此没有方便的方法从文件末尾读取行。只要整个文件适合内存，您所做的工作就可以正常工作。

如果遇到内存问题，可以分块读取文件，`File.ReadLines(path).Skip(6000000)`例如`File.ReadLines(path).Skip(5000000).Take(1000000)`. 这将每次都读取该文件，但它会使用更少的内存。

另一种选择是从文件中读取字节块，定位字节中的换行符，并将它们之间的字节解码为字符串。

# c# - 使用正则表达式从字符串中提取数字

> ID：13641672
> 
> 赞同：3
> 
> 时间：2012-11-30T08:45:28.717
> 
> 标签：c#, .net, regex, string

我找到了这个 C# 代码，然后根据我的需要对其进行了改进，但现在我想让它适用于所有数字数据类型。

```
 public static int[] intRemover (string input)
    {
        string[] inputArray = Regex.Split (input, @"\D+");
        int n = 0;
        foreach (string inputN in inputArray) {
            if (!string.IsNullOrEmpty (inputN)) {
                n++;
            }
        }
        int[] intarray = new int[n];
        n = 0;
        foreach (string inputN in inputArray) {
            if (!string.IsNullOrEmpty (inputN)) {
                intarray [n] = int.Parse (inputN);
                n++;
            }
        }
        return intarray;
    } 
```

这适用于尝试从字符串中提取整数整数，但我遇到的问题是我使用的正则表达式没有设置为解释负数或其中包含小数点的数字。就像我说的那样，我最终的目标是制作一种适用于所有数字数据类型的方法。谁能帮帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T08:57:30.323

你可以`match`它而不是分裂它

```
public static decimal[] intRemover (string input)
{
    return Regex.Matches(input,@"[+-]?\d+(\.\d+)?")//this returns all the matches in input
                .Cast<Match>()//this casts from MatchCollection to IEnumerable<Match>
                .Select(x=>decimal.Parse(x.Value))//this parses each of the matched string to decimal
                .ToArray();//this converts IEnumerable<decimal> to an Array of decimal
} 
```

* * *

`[+-]?`匹配`+`或`-`0 或 1 次

`\d+`匹配 1 到多个数字

`(\.\d+)?`匹配 a（十进制后跟 1 到多个数字）0 到 1 次

* * *

上述代码的简化形式

```
 public static decimal[] intRemover (string input)
    {
        int n=0;
        MatchCollection matches=Regex.Matches(input,@"[+-]?\d+(\.\d+)?");
        decimal[] decimalarray = new decimal[matches.Count];

        foreach (Match m in matches) 
        {
                decimalarray[n] = decimal.Parse (m.Value);
                n++;
        }
        return decimalarray;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:57:23.913

尝试像这样修改你的正则表达式：

```
 @"[+-]?\d+(?:\.\d*)?" 
```

# java - 如何将对象从 Corba 客户端传递到 Corba 服务器

> ID：13641674
> 
> 赞同：2
> 
> 时间：2012-11-30T08:45:36.013
> 
> 标签：java, corba

使用 Java 作为编程语言，我有一个关于如何将对象从 Corba 客户端发送到 Corba 服务器的问题，注意我正在使用 POA 和以下 idl 文件：-

```
// BackupServer.idl

#ifndef BackupServer_idl
#define BackupServer_idl

interface BackupDaemon;
#include "BackupExceptions.idl"
typedef sequence<BackupDaemon> BackupDaemonList;

interface BackupDaemon {
   attribute string backupDaemonUser;
   attribute string backupDaemonIP;
   attribute string backupDaemonHostName;
   attribute string backupDaemonBackupType;
   attribute string backupDaemonType;
   attribute string backupDaemonTime;
   attribute string backupDaemonPath;
   attribute boolean backupDaemonScheduled;
   attribute long backupDaemonPort;
   attribute string backupDaemonMacAddress;
   typedef sequence<string> BackupPathesStrings;
   boolean startBackup(
      in BackupPathesStrings backupPathes,
      in string backupDaemonMacAddress );
   void deleteBackup(
      in string backupPathes,
      in string backupDaemonMacAddress ) raises (BackupPathNotFoundException);
};

interface BackupServer {
   boolean registerBackupDaemon( in BackupDaemon bd )
      raises (InvalidBackupDaemonException);
   boolean unRegisterBackupDaemon(in string backupDaemonMacAddress)
      raises (InvalidBackupDaemonException);
   BackupDaemonList getBackupDeamons();
}; 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:44:30.420

使用 CORBA 在线路上发送的唯一“真实”对象是[ValueType](http://www.ciaranmchale.com/corba-explained-simply/more-details-on-idl.html#toc47) ，否则可以交换“引用”，并且可以交换更[简单的结构化原始数据，例如“struct”和“union”](http://www.ciaranmchale.com/corba-explained-simply/core-concepts-and-terminology.html#toc13)。

将 CORBA 服务器从一个位置迁移到另一个位置并非易事，也不是直接可行的，但可以通过复杂的部署来实现。

# c# - 从字符串中提取特定数据并根据字符串中其他位置包含的值对其求和

> ID：13641675
> 
> 赞同：0
> 
> 时间：2012-11-30T08:45:46.867
> 
> 标签：c#

> **可能重复：**
> [对来自流式阅读器的过滤数据执行小计](https://stackoverflow.com/questions/13627720/performing-a-subtotal-on-filtered-data-from-a-streamreader)

数据集：“file.dat”中的数百行数据，每行长度为 80-500 个 ASCII 字符。

位于每个字符串中的特定位置（固定宽度不定界）有 4 条相关信息。

1) -NUMBERS- 始终位于每个字符串的前 3 个字符，是一个数字，表示该字符串是否与我相关。如果它包含 210,310 或 410 中的任何一个，那么我想处理这一行，否则我想忽略它。

2）-字母-此信息的位置取决于前 3 位数字是 210、310 还是 410。如果是 210，那么我希望算法查看位置 406-409 中包含的值（始终为字母）。如果前 3 位数字是 310，那么我需要 322-325 的值，如果是 410，那么我需要的是 478-481。

3 & 4) -NUMBERS- 最后两条信息是数字，其中一条永远为0，另一条> 0。鉴于我不知道哪个是非零，我希望将它们加在一起. 这些号码位于以下位置：

```
       第一个号码位置 第二个号码位置             

210：……………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………12 ..142-153

310：…………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………113-124 ...126-137

410：..................113-124.................................. ...126-137

```

我需要做的是为 2) 中的每个字母组合提供小计。2) 的值范围只有大约 4-5 种不同的字母排列方式（ABCD、AAAA、BBBB、CCCC、DDDD），所以我的最终输出是：

```
210 AAAA “总数”

210 BBBB “总数”

.

.

.

410 DDDD “总数”

410 ABCD “总数”

```

等。对于数字和字母的所有组合（最多 15 个）。

我希望这很清楚，在此先感谢。

编辑：当前代码：

我目前正在尝试使用一系列 if 和许多 var 来解决它，希望这段代码粘贴：

```
class Program
{
    static void Main()
    {
        // Read in a file line-by-line, and store in a List.
        List<string> list = new List<string>();
        using (StreamReader reader = new StreamReader("file.dat"))
        {
            string line;
            while ((line = reader.ReadLine()) != null)
            {
                var beginning = line.Substring(0, 3);
                // building this up atm
                // var letters210 = line.Substring(129,11);
                if (beginning != "210" && beginning != "310" && beginning != "410")
                    continue;

                list.Add(line); // Add to list.
                Console.WriteLine(line); // Write to console.
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:32:53.560

I'd write a class whose job is handling a particular type of line and aggregating all the sums:

```
public class LineHandler
{
    // Start indices and lengths for string and two numbers
    int si, sl, n1i, n1l, n2i, n2l;
    Dictionary<string, int> sums;

    public LineHandler(int si, int sl, int n1i, int n1l, int n2i, int n2l)
    {
        this.si = si; this.sl = sl; this.n1i = n1i;
        this.n1l = n1l; this.n2i = n2i; this.n2l = n2l;
        sums = new Dictionary<string,int>();
    }

    public void HandleString(string s)
    {
        string key = s.Substring(si, sl);
        int sum = int.Parse(s.Substring(n1i, n1l)) + int.Parse(s.Substring(n2i, n2l));
        if (sums.ContainsKey(key))
            sums[key] += sum;
        else
            sums[key] = sum;
    }

    public Dictionary<string, int> Sums { get { return sums; } }
} 
```

Then you can create a dictionary of these to help select the right one for each line (double-check I've got the lengths right):

```
 Dictionary<string, LineHandler> handlers = new Dictionary<string, LineHandler> {
        { "210", new LineHandler(406, 3, 129, 11, 142, 11) },
        { "310", new LineHandler(322, 3, 113, 11, 126, 11) },
        { "410", new LineHandler(478, 3, 113, 11, 126, 11) } };
    public Dictionary<string, int> Sums { get { return sums; } }
} 
```

Then you can just loop over your lines and "handle" each line if there's a handler for it:

```
while ((line = reader.ReadLine()) != null)
{
    string key = line.Substring(0, 3);
    if (handlers.ContainsKey(key))
        handlers[key].HandleString(line);
} 
```

Then you can access the values:

```
foreach(string key in handlers.Keys)
{
    LineHandler handler = handlers[key];
    foreach (string s in handler.Sums.Keys)
        Console.WriteLine("{0} {1} {2}", key, s, handler.Sums[s]);
} 
```

# java - 将 JTable 导出到 excel - 转义下一列的值

> ID：13641678
> 
> 赞同：0
> 
> 时间：2012-11-30T08:45:52.857
> 
> 标签：java, swing, jtable, export-to-excel, filewriter

在我的文件编写器中，我有这些代码， j == 4 和 j == 8 是为包含数字的列执行不同的代码

```
for(int i=0; i<model.getRowCount();i++){
        for(int j=0; j<model.getColumnCount();j++){
            if(j==4 || j==8){
                excelWriter.write("\""+model.getValueAt(i, j) + "\t"+"\""); 
            }
            else{
                excelWriter.write(model.getValueAt(i, j) + "\t");
            }
        }
        excelWriter.write("\n");
    } 
```

问题是在打印了带有数字的那一列之后，将不会打印下一列..例如

```
This is my JTable

| texta | textb | textc | textd | number | texte | textf | ....... 

in the excel file, it will be printed as....

| texta | textb | textc | textd | number | textf | ....... 
```

它跳过带有数字的列旁边的列...

当我删除代码中的第二个“\”时，该列的其余部分连接到带有数字的列。

知道我该如何解决这个问题吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:17:27.963

第二个`\`必须写在`\t`我猜之前。

等等...我创建了一个带有文本列和数字列的 Excel 工作表。然后我将该工作表导出到一个制表符分隔的文件中。当我在文本编辑器中打开该文件时，数字不会以任何形式转义。所以我认为你不需要这个`if`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:22:15.320

你可能的意思是：

```
excelWriter.write("\"" + model.getValueAt(i, j) + "\"\t"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T09:25:12.450

例如，文件可以使用 .xsl 或 .xlsx

```
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import javax.swing.JTable;
import javax.swing.table.TableModel;

class ExcelExporterTodayFxDeals {

    ExcelExporterTodayFxDeals() {
    }

    public void exportTable(JTable table, File file) throws IOException {
        TableModel model = table.getModel();
        FileWriter out = new FileWriter(file);
        String diakritika = "áäÁÄčČďĎéěÉĚíÍľĺĽĹňŇóôöőÓÔÖŐŕřŔŘšŠťŤúüůÚÜŮýÝžŽ";
        String diakritikaBez = "aaAAcCdDeeEEiIllLLnNooooOOOOrrRRsStTuuuUUUyYzZ";
        String novyPreklad = "";
        String groupExport = "";
        Integer remDia = 1;
        for (int i = 0; i < (model.getColumnCount()); i++) {//* disable export from TableHeaders
            groupExport = String.valueOf(model.getColumnName(i));
            novyPreklad = groupExport;
            if (groupExport != (null)) {
                remDia = 1;
                for (remDia = 0; remDia < (diakritika.length());) {
                    novyPreklad = diakritika.substring(1, 2);
                    novyPreklad = (diakritika.substring(remDia, (remDia + 1))).toString();
                    groupExport = groupExport.replace((diakritika.substring(remDia, (remDia + 1))),
                            diakritikaBez.substring(remDia, (remDia + 1)));
                    remDia++;
                }
            } else {
                groupExport = "";
            }
            out.write(String.valueOf(groupExport) + "\t");
        }
        out.write("\n");
        for (int i = 0; i < model.getRowCount(); i++) {
            for (int j = 0; j < (model.getColumnCount()); j++) {//16
                if (model.getValueAt(i, j) == null) {
                    out.write("null" + "\t");
                } else {
                    groupExport = String.valueOf(model.getValueAt(i, j));
                    novyPreklad = groupExport;
                    if (groupExport != (null)) {
                        remDia = 1;
                        if (j == 0) {//Replace non_ACSII chars, not required in most cases
                            for (remDia = 0; remDia < (diakritika.length());) {
                                novyPreklad = diakritika.substring(1, 2);
                                novyPreklad = (diakritika.substring(remDia, (remDia + 1))).toString();
                                groupExport = groupExport.replace((diakritika.substring(remDia, (remDia + 1))),
                                        diakritikaBez.substring(remDia, (remDia + 1)));
                                remDia++;
                            }
                            out.write(34);
                            out.write(String.valueOf(groupExport));
                            out.write(34);
                            out.write("\t");
                        }  else if (j == 5) {//Number Instance
                            if (((model.getValueAt(i, j)) != null) && ((model.getValueAt(i, j)) instanceof Number)) {
                                groupExport = String.format("%.2f", (Number) (model.getValueAt(i, j)));
                            }
                            groupExport = groupExport.replace(".", ",");
                            out.write(34);
                            out.write(String.valueOf(groupExport));
                            out.write(34);
                            out.write("\t");
                        }  else if (j == 10) {//Date instance
                            groupExport = groupExport.replace("-", "/");
                            out.write(34);
                            out.write(String.valueOf(groupExport));
                            out.write(34);
                            out.write("\t");
                        } 
                    } else {
                        groupExport = "";
                        out.write(34);
                        out.write(String.valueOf(groupExport));
                        out.write(34);
                        out.write("\t");
                    }
                }
            }
            out.write("\n");
        }
        out.close();
    }
} 
```

# sharepoint - Sharepoint2010 定制设计为 WSP

> ID：13641680
> 
> 赞同：0
> 
> 时间：2012-11-30T08:45:59.380
> 
> 标签：sharepoint, sharepoint-branding

我正在尝试为我的问题找到解决方案。我有一组 HTML CSS 和图像，我想将其作为品牌推广的一部分应用于我的共享点门户。

我担心的是我想将我的设计作为 WSP 或任何其他类型的解决方案，以便它可以安装在任何 sharepoint 2010 门户中，以便用户可以在实际的 sharepoint 设计和此自定义设计之间切换回来。

简而言之，我有一个自定义 HTML 设计，我需要将其实施到任何共享点网站，管理员只需使用门户/站点屏幕即可打开或关闭此设计。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:31:51.990

SharePoint branding is always a tricky job. The safest way to achieve your goal is to create a separate masterpage with your new branding. So the user can choose to apply the default branding with the default masterpage and when he wants another branding your customized masterpage can be used.

Create a new SharePoint project and add the needed css inside a mapped layouts folder. Then you can reference your own css file in the new masterpage. Watch out with changing the masterpage, because it contains a lot of placeholders which will render different parts of the page. Try to work around these placeholders and make sure the masterpage works in different scenario's (ex. that the layout isn't broken when page is in edit mode, ...)

Once you are finished with the design, the user can use it by applying it in the settings. Another option to make it easier for the enduser, is to create a control that is a switch to apply your masterpage (ex. with custom action).

# java - 为使用 Struts 构建的网站编写中间层测试

> ID：13641685
> 
> 赞同：1
> 
> 时间：2012-11-30T08:46:06.233
> 
> 标签：java, testing, struts, middle-tier

我以前从未做过任何中间层测试，而且我是 Struts 的新手。我的任务是找出是否可以对 Struts 网站进行中间层测试以及如果可以的话如何进行。我想知道是否有人有为使用 Java Struts 框架构建的网站编写中间层测试的经验。如果你这样做，1）你觉得这样做很难/你会建议只在 UI 级别测试网站吗？2）你有没有推荐我应该去/阅读的任何网站或书籍来学习如何这样做？

如果有帮助，该网站将在 UI 和休眠中使用磁贴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:38:20.427

首先，如果你想测试你的中间层，你使用什么前端技术并不重要。它更多地取决于您的系统架构，例如，当您的所有业务逻辑都在 Struts Actions 中实现时，将很难单独测试。

请查看 Bob 叔叔的[文章](http://martinfowler.com/ieeeSoftware/testBus.pdf)“测试总线的必要性”，他在其中解释了应如何构建应用程序以启用中间层测试。

此外，阅读 Michael Cohn 关于测试金字塔的[博客文章](http://www.mountaingoatsoftware.com/blog/the-forgotten-layer-of-the-test-automation-pyramid)，它应该会给您一些关于如何构建自动化测试的提示。在那里你会看到创建基于 GUI 的测试，但这些不应该是大多数。此外，您可以[在此处](http://gojko.net/2007/09/25/effective-user-interface-testing/)获取有关 GUI 测试的一些信息。

因此，首先找到您的实际业务逻辑，然后验证单独测试它的难度（无需在 GUI 上四处点击）。如果这不可能，您可能应该坚持使用 GUI 测试，例如使用 Selenium。[以下](http://gojko.net/2010/04/13/how-to-implement-ui-testing-without-shooting-yourself-in-the-foot-2/)是一些指导方针，让您在不伤到自己的情况下这样做:)

# php - getUser() 返回 0

> ID：13641687
> 
> 赞同：0
> 
> 时间：2012-11-30T08:46:19.617
> 
> 标签：php, facebook, sdk

我在 php 中有这段代码，以前可以工作，但现在不行了，即使这听起来像个谎言，我什么也没碰！

```
$facebook = new Facebook(array(
  'appId'  => 'myApp',
  'secret' => 'mySecret',
  'cookie' => true ,
  'scope' => 'read_stream','manage_pages'
));

$user = $facebook->getUser();

if ($user!=0) {
   doStaff;
}else{
   $login_url = $facebook->getLoginUrl($params = array('scope' => "read_stream"));
   echo ("<script> top.location.href='".$login_url."'</script>");
} 
```

现在的问题是在无限循环中获取堆栈。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:51:35.903

You are probably using the deprecated Facebook PHP SDK. Try to get the latest [Facebook PHP SDK](https://developers.facebook.com/docs/reference/php/)

# java - 运行服务器时出错

> ID：13641688
> 
> 赞同：1
> 
> 时间：2012-11-30T08:46:22.143
> 
> 标签：java, rmi

我正在使用 RMI 创建一个简单的聊天应用程序，但我无法识别出确切的问题在哪里？这是我的代码：

**聊天服务器.java**

```
import java.awt.Point;
import java.net.MalformedURLException;
import java.rmi.AlreadyBoundException;
import java.rmi.Naming;
import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author nick
 */
public class ChatServer extends UnicastRemoteObject implements IChat{

    ArrayList<Point> list = new ArrayList<Point>();

    public ChatServer() throws RemoteException{
        try {
            Naming.bind("//localhost:1099/chat", this);
        } catch (Exception ex) {

            ex.printStackTrace();

        }

        System.out.println("Chat Server Ready");
    }

    public void put(Point p) throws RemoteException{

        p.getX();
        p.getY();

    }
 /*
    public ArrayList<Point> get() throws RemoteException{

        return list;

    } */
    public ArrayList<String> get() throws RemoteException
    {
        return list;
    }

    public static void main(String[] args) {
        try {
            new ChatServer();
        } catch (RemoteException ex) {
            Logger.getLogger(ChatServer.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

} 
```

**聊天客户端.java**

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.rmi.Naming;
import java.rmi.Remote;
import java.rmi.RemoteException;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JTextArea;
import javax.swing.JTextField;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
/**
 *
 * @author nick
 */
public class ChatClient extends JFrame implements Runnable, ActionListener, MouseListener, MouseMotionListener {

    String TAG = "kushal ";
    IChat ic;
    int oldx, oldy;
    JTextField jtf;
    JTextArea jta;

    public ChatClient() {
        try {
            Remote remote = Naming.lookup("//localhost:1099/chat");
            ic = (IChat) remote;
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        setSize(300, 300);
        setVisible(true);

        Thread t = new Thread(this);
        t.start();
    }

    public void paint(Graphics g) {
    }

    public void run() {
        while (true) {
            try {
                ArrayList<Point> list = ic.get();
                Thread.sleep(1000);
            } catch (Exception ex) {
                ex.printStackTrace();

            }

        }
    }

    public static void main(String[] args) {
        new ChatClient();
    }

    public void actionPerformed(ActionEvent e) {
      /*  try {
            ic.put(TAG + jtf.getText());
            jtf.setText("");
        } catch (RemoteException ex) {
            Logger.getLogger(ChatClient.class.getName()).log(Level.SEVERE, null, ex);
        }*/

    }

    public void mouseClicked(MouseEvent e) {
    }

    public void mousePressed(MouseEvent e) {
        oldx = e.getX();
        oldy = e.getY();

    }

    public void mouseReleased(MouseEvent e) {
    }

    public void mouseEntered(MouseEvent e) {
    }

    public void mouseExited(MouseEvent e) {
    }

    public void mouseDragged(MouseEvent e) {
        Graphics g = getGraphics();

        int x = e.getX();
        int y = e.getY();
        g.drawLine(oldx, oldy, x, y);
        oldx = x;
        oldy = y;

    }

    public void mouseMoved(MouseEvent e) {
    }
} 
```

**IChat.java**

```
import java.awt.Point;
import java.rmi.Remote;
import java.rmi.RemoteException;
import java.util.ArrayList;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author new
 */
public interface  IChat extends Remote{

    public void put(Point p) throws RemoteException;
    public ArrayList<Point> get() throws RemoteException;
} 
```

Netbeans 日志中的错误

```
run:
java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
Chat Server Ready
    java.net.ConnectException: Connection refused: connect
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
    at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:340)
    at sun.rmi.registry.RegistryImpl_Stub.bind(Unknown Source)
    at java.rmi.Naming.bind(Naming.java:128)
    at ChatServer.<init>(ChatServer.java:26)
    at ChatServer.main(ChatServer.java:58)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:337)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:198)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
    ... 7 more 
```

任何帮助都会非常有用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:24:38.180

在您的服务器代码中，尝试一下：

```
public ChatServer throws RemoteException
{
    Registry registry = LocateRegistry.getRegistry();
    registry.rebind( "chatserver" , this );
    ...
} 
```

然后客户可以做

```
...
Registry registry = LocateRegistry.getRegistry( "localhost" , 1099 );
IChat server = (IChat)registry.lookup( "chatserver" );
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:36:23.163

您尚未在服务器主机中启动 RMI 注册表。您可以使用 rmiregistry.exe 命令，或者使用 LocateRegistry.createRegistry() 在代码中启动它。

# web - pc版和iPad版区分和设置两种不同类型的css和jsp

> ID：13641689
> 
> 赞同：0
> 
> 时间：2012-11-30T08:46:24.713
> 
> 标签：web, ipad

我正在尝试将现有网站作为扩展支持在 iPad 中正确显示。因为这两个版本都会有两组 jsp 和 CSS。

如何区分是普通PC浏览器还是iPad浏览器访问网站，应该采取什么样的方法才能为两个版本设置不同的JSP和CSS？

请提供有用的资源以供参考。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:01:03.807

就我而言，我检查用户代理是否来自`iPad`用户代理。然后我用了两套css或者必要的jsp。

# typescript - 如何从 TypeScript 中使用 getUserMedia

> ID：13641692
> 
> 赞同：8
> 
> 时间：2012-11-30T08:46:45.343
> 
> 标签：typescript

我想 从 TypeScript调用[getUserMedia ，例如：](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

```
 return  navigator.getUserMedia() 
```

但是，TypeScript 对 Navigator 的定义（在 lib.d.ts 中）不包含 getUserMedia。我该如何解决？我应该修改 lib.d.ts 吗？我在哪里做这个改变？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T09:10:44.507

您可以将带有任意参数的调用强制转换为任何对象，而不是更改定义，例如：

```
 var n = <any>navigator;
    n.getUserMedia  = n.getUserMedia || n.webkitGetUserMedia || n.mozGetUserMedia || n.msGetUserMedia;
    return  n.getUserMedia({video: true, audio:true}, onSuccess, onFail); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-30T09:18:36.097

当前的做法是添加到界面中，而不是编辑 lib.d.ts 文件。

您可以在 TypeScript 文件中添加接口，当 lib.d.ts 更新时，编译器会告诉您不再需要它。我把它放在了额外的空白处，以使声明的不同部分更容易阅读，并且我在界面下方添加了一个示例调用。

```
interface Navigator {
    getUserMedia(
        options: { video?: bool; audio?: bool; }, 
        success: (stream: any) => void, 
        error?: (error: string) => void
        ) : void;
}

navigator.getUserMedia(
    {video: true, audio: true}, 
    function (stream) {  },
    function (error) {  }
); 
```

我会在使用`getUserMedia`. 我会尽量限制`getUserMedia`该类的所有用法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-03T18:49:16.220

由于这已经很老了，但人们可能仍然会来这里寻找答案，这里有一个更新的答案，使用类型来管理所有明确类型的文件：

安装类型，[Github Page](https://github.com/typings/typings)，这些命令被侵入命令行（需要安装 npm）并从那里下载 mediastream.d.ts：

```
npm install typings --global
typings init
typings install mediastream --ambient --save 
```

然后将生成的 typings 文件夹中的 main.d.ts 添加到您的 tsconfig.json 文件中，或者将其直接添加到您希望它在此行中使用的 typescript 文件中：

```
/// <reference path="typings/main.d.ts" /> 
```

现在打字稿将识别 navigator.getUserMedia() 并正确编译它。它最酷的部分是，每当你有另一个 javascript 库（或多或少为人所知）时，你需要 typescript 来识别你可以使用打字，你会在几秒钟内添加它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-23T03:17:33.193

[TypeScript 2.0 简化了](https://blogs.msdn.microsoft.com/typescript/2016/06/15/the-future-of-declaration-files/)导入类型定义。

使用 NPM 将 webrtc 定义安装为开发依赖项

```
$ npm install —save @types/webrtc 
```

安装后，使用 .ts 文件顶部的引用指令，该指令与 getUserMedia 一起使用：

```
/// <reference types="webrtc" />

const getUserMedia = navigator.mediaDevices.getUserMedia ||
                     navigator.getUserMedia ||
                     navigator.webkitGetUserMedia ||
                     navigator.mozGetUserMedia 
```

应该这样做！

# java - 自定义 java 包不起作用

> ID：13641696
> 
> 赞同：0
> 
> 时间：2012-11-30T08:47:10.880
> 
> 标签：java, packages

我正在尝试创建一个自定义包来放置我的一些类，但是当我尝试将它导入到我的一个程序中时，它说找不到它。

这是我要编译的文件，但它说找不到包

```
import project_euler.Fibonacci;

public class test {
    public static void main(String[] args) {
        Fibonacci fib = new Fibonacci();
        System.out.println(fib.getTerm(10));
    }
} 
```

这是斐波那契类

```
package project_euler;
public class Fibonacci {
    public int getTerm(int n) {
        if (n < 0 || n > 46) {
            throw new IllegalArgumentException();
        } else {
            return (n > 1) ? getTerm(n-1) + getTerm(n-2) : n;
        }
    }
} 
```

这是我尝试编译时遇到的错误

```
test.java:1: error: package project_euler does not exist
import project_euler.Fibonacci;
                ^
test.java:6: error: cannot access Fibonacci
            Fibonacci fib = new Fibonacci();
            ^
bad source file: C:\Users\dhout_000\Documents\Project Euler\project_euler\Fibonacci.java
file does not contain class Fibonacci
Please remove or make sure it appears in the correct subdirectory of the sourcepath.
2 errors 
```

我的目录设置是

```
> My Documents
    > Project Euler
        - test.java
        > project_euler
            - Fibonacci.class
            - Fibonacci.java 
```

我似乎无法弄清楚问题是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:29:16.863

确保您没有`CLASSPATH`设置环境变量。

从包层次结构的基本目录编译并运行您的代码。

```
C:\My Documents\Project Euler> javac project_euler\Fibonacci\*.java

C:\My Documents\Project Euler> java project_euler.Fibonacci.test 
```

您还可以使用and命令的`-cp`选项显式指定类路径。确保包含包层次结构 ( ) 的基本目录。您可以通过在以下位置指定（当前目录）来执行此操作：`javac``java``C:\My Documents\Project Euler``.``C:\My Documents\Project Euler`

```
C:\My Documents\Project Euler> javac -cp . project_euler\Fibonacci\*.java

C:\My Documents\Project Euler> java -cp . project_euler.Fibonacci.test 
```

注意：根据常见的 Java 命名约定，名称（包、类、方法名称）中不应使用下划线，包名称应小写，类名称应以大写字母开头。将包重命名为`projecteuler.fibonacci`（当然，您还需要重命名文件夹），并将类重命名`test`为`Test`.

# java - 在 Eclipse 中为 ANT 配置 Java 版本

> ID：13641699
> 
> 赞同：4
> 
> 时间：2012-11-30T08:47:17.037
> 
> 标签：java, eclipse, ant

在 IntelliJ 中，如果我想配置我的 ANT 脚本使用的 Java 版本，我只需右键单击并设置 ANT 的属性，然后选择我想要使用的 JDK。在 Eclipse 中，我没有看到任何这样的选项。我是否需要将 Java 的版本硬编码到我的脚本中，或者有什么方法可以告诉 ANT 我希望它使用哪个版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T08:57:55.313

您可以在`Run Configuration`. 右键单击您的 ant 文件 ant select `Run as`-> `Ant Build...`. 在`JRE`选项卡上，您可以切换到任何 JRE。

也许您必须先将相关的 JRE 添加到 Eclipse，方法是单击`Installed JREs...`它打开 Eclipse 首选项对话框，您可以在其中添加它。

# oracle - Oracle 闪回，查询过去的数据

> ID：13641703
> 
> 赞同：2
> 
> 时间：2012-11-30T08:47:39.860
> 
> 标签：oracle, plsql, flashback

您知道查询过去数据的具体工作原理吗？

oracle的版本是10G

通过这个查询，我可以恢复一些数据，但有时这个查询

```
 select * 
  from table as of timestamp systimestamp - 1 
```

检索错误（太旧的快照）。是否可以增加这项工作的时间并检索大约 24 小时的数据？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:17:15.997

这里的关键问题是撤消段的大小以及撤消保留和保证。

总而言之，您需要调整撤消表空间的大小以容纳在您想要闪回的最大期限内可以进行的所有更改，并且您希望将撤消保留参数设置为该值。如果保留撤消对您的应用程序非常重要，则在撤消表空间上设置撤消保证。

有用的文档：[http ://docs.oracle.com/cd/B12037_01/server.101/b10739/undo.htm#i1008577](http://docs.oracle.com/cd/B12037_01/server.101/b10739/undo.htm#i1008577)

请注意，对于批量数据，闪回的性能相当差，因为需要在表空间中找到所需的撤消块。11g 有更好的高性能闪回选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:09:29.563

该错误的意思是回滚段变得无效，因为通常查询花费了太长时间。还有其他原因。就像回滚段大小一样。

表中有多少行？- 你可以从这个 select num_rows from all_tables where table_name='MYTABLE_NAME_GOES_HERE'中得到一个想法；

如果有很多行，您可能需要考虑添加某种索引来支持您的查询。因为全表扫描耗时太长。如果不是，那么这是一个 DBA 问题。也许添加索引也是您商店中的 DBA 问题。

如果这在几天前运行良好，并且最近开始发生，那么您可能刚刚超过了回滚的阈值。

# sql - SQL Server 2008 中选择 count(*)、count(0)、count(100)、count(Id) 之间的区别？

> ID：13641706
> 
> 赞同：2
> 
> 时间：2012-11-30T08:48:03.507
> 
> 标签：sql, sql-server-2008

以下 SQL Server 2008 语句之间有什么区别？

```
SELECT COUNT(*) FROM dbo.Regular_Report

SELECT COUNT(0) FROM dbo.Regular_Report

SELECT COUNT(1) FROM dbo.Regular_Report

SELECT COUNT(100) FROM dbo.Regular_Report

SELECT COUNT(ID) FROM dbo.Regular_Report 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T08:49:22.993

前四个都是相同的——它们计算总行数。

`ID`最后一个计算不为空的行数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-30T08:49:35.517

`count(id)`将计算字段中的非空值`id`。

所有其他将计算记录数。

（用文字数字代替的那些`*`将计算该值不为空的所有记录。查询计划器可能会认识到任何记录的文字值永远不会为空，并且执行相同操作`count(*)`而不是实际计算非空值。）

# c# - 接收动态变化的类

> ID：13641711
> 
> 赞同：1
> 
> 时间：2012-11-30T08:48:34.443
> 
> 标签：c#, object, dynamic, singleton

在我的系统中，我有 16 个不同的类用于统计。它们如下所示

```
public class myClass : myInheritage
{
    private static myClass _instance;

    public static myClass  Instance
    {
        get { return _instance ?? (_instance = new myClass(); }
    }

    public static void Reset()
    {
        _instance = null;
    }
} 
```

都做成了单例

myInheritage 看起来像这样：

```
public class myInheritage
{
    int data = 0;

    public myInheritage()
    {
    }

    public int Data
    {
        get { return data; }
        set { data+= value; }
    }
} 
```

程序制作完成，因此用户选择他想用哪个类进行统计。

像这样的东西是我想要的

```
 public void statistics(Object myObject, string name)
    {
        Object x = myObject;

        x.Data = 10;

        x.Data();
    } 
```

从另一个班级调用

```
 statistics(myClass.Instance, "myClass");
    statistics(myClass2.Instance, "myClass2)"; 
```

所以我想在我的统计类中动态更改我的实例。

.NET 2.0 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:54:04.827

你可以使用反射...

```
MethodInfo method = myObject.GetType().GetMethod("Reset");
if (method != null) method.Invoke(myObject, null); 
```

如果您可以自己修改类，更好的方法可能是让每个类都实现一个接口（或基类）`IResettable`。

```
public interface IResettable
{
    void Reset();
}

public class myClass : myInheritage, IResettable
{
    public void Reset() { ... }
} 
```

然后你可以针对接口编写函数：

```
public void statistics(IResettable myObject, string name)
{
    myObject.Reset();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:55:13.657

是的。你在这里想要的是一个策略/工厂模式。我命名两者，因为它们可以与您的案例结合使用。[这里](http://www.dofactory.com/Patterns/Patterns.aspx)有这些设计模式的很好的例子，下面是对[策略模式](http://www.codeproject.com/Articles/52807/Design-Patterns-Part-1-The-Strategy-Pattern)和[工厂模式](http://www.codeproject.com/Articles/57421/Design-Patterns-Part-2-The-Factory-Pattern)的详细介绍。最后两个链接中的前一个还向您展示了如何将两者结合起来以完全满足您的要求。

因此，在您的情况下，您可以设置以下界面

```
public interface IStatistics
{
    // Some method used by all classes to impose statistics.
    void ImposeStatistics();
} 
```

然后在你的单身课程中，你可以拥有

```
public class myClass : myInheritage, IStatistics
{
    private static myClass _instance;

    public static myClass  Instance
    {
        get { return _instance ?? (_instance = new myClass()); }
    }

    public static void Reset()
    {
        _instance = null;
    }

    // You would also inherit from IStatistics in your other classes.
    public void ImposeStatistics()
    {
        // Do stuff.
    }
} 
```

然后你会有一个'工厂'类，在运行时强加你的策略。

```
public static class StatisticFactory 
{
    public static void ImposeStatistics(IStatistics statsType)
    {
        statsType.ImposeStatistics();
    }

    /// <summary>
    /// Get the conversion type.
    /// </summary>
    /// <param name="col">The column to perform the conversion upon.</param>
    public static IStatistics GetStatsType(string typeName)
    {
        switch (typeName)
        {
            case "BoseEinstein":
                return new BoseEinsteinStats();
            case "FermiDirac":
                return new FermiDiracStats();
            default:
                return null;
        }
    }
} 
```

然后你可以这样称呼

```
// Run stats.
IStatistics stats = StatisticFactory(GetStatsType("BoseEinstein")); 
```

获取所需类的统计信息。

我希望这有帮助。

# c# - Returning string from a dropDownlist

> ID：13641717
> 
> 赞同：0
> 
> 时间：2012-11-30T08:49:03.383
> 
> 标签：c#, asp.net

I have what is a very elementary problem I realize, I am trying to return a string value from a selected value of a DropDownList upon selected index change but for some or other reason it is not happening.

```
 protected void drpMinisters_SelectedIndexChanged(object sender, EventArgs e)
{
    name = drpMinisters.SelectedValue;
    LabMessage.Text = name;

} 
```

When I try to add name to a database I get a NullReferenceException.

Advice perhaps

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:55:27.627

i guess you are talking about the asp.net dropdown list control

use drpMinisters.Text to get the selected value (http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.text.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:51:35.410

You can try something like this if you are using ASP .net var ddValue= **document.getElementById("your Drop Down List Item").options[document.getElementById("your Drop Down List Item").selectedIndex].text;** I was facing same problem it solved my problem with

"NullReferenceException"

# sql - 更改 access 数据库中字段的货币文化

> ID：13641722
> 
> 赞同：0
> 
> 时间：2012-11-30T08:49:17.267
> 
> 标签：sql, ms-access

我在一个以意大利语格式`invoice`存储的访问 mdb 中有一个表。`DECIMAL`ie`,`用作小数点分隔符。

所以千将写为`1.000,00`。我想把它改成这样的英国格式`1000.00`。为此，我使用此查询。

```
UPDATE invoice SET invoice_amount = Replace(Replace(invoice_amount,'.',''),',','.') 
```

有没有更好的选择？我也担心这个查询的第二次意外运行会`1000.00`变成`100000`。有什么直接的、万无一失的方式来改变这里的文化吗？

PS：`invoice_amount`是这里的类型`Text`。

# java - 如何在 Eclipse 中使用“推断通用类型参数...”

> ID：13641725
> 
> 赞同：8
> 
> 时间：2012-11-30T08:49:28.427
> 
> 标签：java, eclipse, generics

每当 Eclipse 中的源代码中缺少泛型时，它都会建议我“推断泛型类型参数......”

问题是我认为“推断通用类型参数......”实际上并没有推断出任何东西。它通常不会提出任何建议。

它适用于哪些场景？它是如何工作的？

在某些情况下，可以“推断”出一些东西——日食仍然是空白的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-31T08:50:03.633

这是一个示例，展示了如何在 Eclipse 中使用“推断通用类型参数”：

首先声明一个泛型类

```
// GenericFoo.java

public class GenericFoo<T> {
    private T foo;

    public void setFoo(T foo) {
        this.foo = foo;
    }

    public T getFoo() {
       return foo;
    }
} 
```

然后在不指定类型的情况下实例化它，并进行不必要的类型转换。

```
// GenericFooUsage.java before refactoring

public class GenericFooUsage {

    public GenericFooUsage() {
        GenericFoo foo1 = new GenericFoo<Boolean>();

        foo1.setFoo(new Boolean(true));
        Boolean b = (Boolean)foo1.getFoo();
    }
} 
```

应用“Infer Generic Type Arguments”后，代码重构为：

```
// GenericFooUsage.java after refactoring

public class GenericFooUsage {

    public GenericFooUsage() {
        GenericFoo<Boolean> foo1 = new GenericFoo<Boolean>();

        foo1.setFoo(new Boolean(true));
        Boolean b = foo1.getFoo();

       }
} 
```

那么“推断通用类型参数”的作用是：

1.  自动推断泛型参数的类型。
2.  删除不必要的类型转换。

![使用时看到的](../Images/3e49e426183b8ccc1eb8b0d04117c25b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T08:54:38.370

从[Eclipse 帮助](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-menu-refactor.htm)：

> 在确定所有可能进行此替换的位置后，将泛型类型的原始类型替换为参数化类型。
> 可用：项目、包和类型
> 选项：'假设 clone() 返回接收器类型的实例'。行为良好的类通常会遵守此规则，但如果您知道您的代码违反了它，请取消选中该框。

将不受约束的类型参数保留为原始（而不是推断）。如果对例如 ArrayList a 的元素没有限制，取消选中此框将导致 Eclipse 仍然提供通配符参数，将引用替换为 ArrayList。

[您可以在页面末尾](http://www.fernuni-hagen.de/ps/prjs/InferType3/)找到一个示例。

高温高压

# html - 为什么我的 HTML 不使用 CSS 中定义的最后一个样式？

> ID：13641729
> 
> 赞同：2
> 
> 时间：2012-11-30T08:49:39.613
> 
> 标签：html, css

我有以下按此顺序编写的 CSS：

```
h2:last-child, p:last-child, ul:last-child {
margin-bottom: 0;
}

.content-message {
   margin: 20px -1.667em -1.667em -1.667em;
   margin-bottom: -1.667em;
} 
```

和我的 HTML：

```
<ul class="content-message">
    <li>xx</li>
</ul> 
```

当我检查时，我可以看到 ul 正在从第一个 CSS 中获取其样式，并且它的 margin-bottom 为 0。有人可以解释这是为什么。还有一种方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:59:58.643

它是按照具体的顺序完成的。在这种情况下， ul:last-child 更具体，因为它有两个条件：

*   它必须是 ul
*   它必须是最后一个孩子

而您的第二种风格只有一个条件：

*   它必须有类内容消息

为了使第二种样式与第一种样式一样具体，您需要添加另一个条件：

```
ul.content-message {
   margin: 20px -1.667em -1.667em -1.667em;
   margin-bottom: -1.667em;
} 
```

因为这两条规则同样具体，所以第二条规则优先，因为它写在最后。请注意，这是对 css 特异性的简化 - 排序的工作方式如下：

1.  带有 !important 的内联样式
2.  带有 !important 的样式表样式
3.  没有 !important 的内联样式
4.  包含 id (#myItem) 的选择器
5.  类、标签名称、伪类等。

列表上方的任何选择器都将优先，而同一级别的两个选择器将由该类型的数量决定（因此两个类不如 id 特定，但与样式和标签一样特定） . 两种样式将具有相同的权重，将遵循最后定义的样式。

我可能对第 5 点中具有相同权重的所有项目都错了，但为了更好地理解，请查看[http://www.adobe.com/devnet/dreamweaver/articles/css_specificity.html](http://www.adobe.com/devnet/dreamweaver/articles/css_specificity.html)或在 Google 上找到的类似文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:58:05.200

请参阅描述 CSS 特定性问题的这篇文章 - [http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

**偏好顺序-** *元素选择器<类选择器<id选择器*

因此将其指定为 Id 属性应该可以工作

```
 #content-message {
   margin: 20px -1.667em -1.667em -1.667em;
   margin-bottom: -1.667em; 
```

和`<ul id="content-message">`

**更新-**在您的情况下，无论上述情况如何，您的内联样式-`style="margin-bottom: -1.667em;"`将覆盖任何其他 css。惊讶地发现这不会发生在你身上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T09:07:40.343

请在您要应用的样式上加上“！重要”标记。

# windows-phone-7 - WP7 background audio resources are no longer available

> ID：13641735
> 
> 赞同：1
> 
> 时间：2012-11-30T08:50:14.850
> 
> 标签：windows-phone-7, audio, media, background-audio

I'm using `BackgroundAudioPlayer` for my Windows Phone 7 music & video application. After I play some music, I play video using `MediaPlayerLauncher`, then press Back to return to my app. There whenever I use `BackgroundAudioPlayer.Instance`. I receive error "**The background audio resources are no longer available**".

[Someone on MSDN](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/f1272e7c-e138-4d95-9ee2-0fb08309d2f4/) suggests using try/catch, but this is not a good idea, and can slow down the app.

Other suggests call `BackgroundAudioPlayer.Instance.Close()` before launch `MediaPlayer`. However, when I play music, the agent load .dll again, which takes very much time.

How to fix this ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:27:55.367

如果您在音频之后播放视频，操作系统肯定会“终止”您的背景音频播放器。从您的问题来看，这似乎是 100% 可重现的，这将证实这一点。您唯一的选择是在您致电后再次重新启动后台音频播放器`BackgroundAudioPlayer.Instance.Close()`，然后播放您的视频。正如您所说，当您启动 BAP 时，需要重新加载您的播放器 DLL。

**更新评论跟进**

如果您没有实现流式音频代理，而只是实现了 AudioPlayer 代理，那么无论如何您都不会杀死进程。操作系统会在需要让您处理某个操作（例如：用户操作、跟踪结束、关闭）时启动一个进程。

`BackgroundAudioPlayer.Instance.Close()`只需确保操作系统在诸如 OP 之类的场景中干净地释放这些资源。

要重新启动背景音频，只需`BackgroundAudioPlayer.Instance.Play()`再次调用即可。

# visual-studio-2008 - Could not load file or assembly 'Oracle.DataAccess' 11gR2 VS 2008

> ID：13641739
> 
> 赞同：1
> 
> 时间：2012-11-30T08:50:24.030
> 
> 标签：visual-studio-2008, oracle11gr2

I Have a Windows 7x64 machine with oracle 11gR2 client installed. I was able to run my c# apps (in ASP .Net Development Server not IIS) which connected to oracle using 'Oracle.DataAccess' until i had to reinstall my VS. Now i get a error

> Could not load file or assembly 'Oracle.DataAccess, Version=2.112.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342' or one of its dependencies. An attempt was made to load a program with an incorrect format.

I tried reinstalling oracle and VS again but still have the problem. When i run gacutil it says

> The Global Assembly Cache contains the following assemblies: Oracle.DataAccess, Version=2.112.1.0, Culture=neutral, PublicKeyToken=89b483f4 29c47342, processorArchitecture=AMD64

fuslow gives the following output

> Assembly Binder Log Entry (30/11/2012 @ 12:49:44 PM)
> The operation was successful. Bind result: hr = 0x0\. The operation completed successfully.
> Assembly manager loaded from: C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll Running under executable C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\9.0\WebDev.WebServer.exe --- A detailed error log follows.
> Pre-bind state information LOG: User = KANISHKA\Administrator
> LOG: DisplayName = Oracle.DataAccess (Partial)
> LOG: Appbase = file:///D:/Visual Studio Projects/CSharp Projects/Web/eReconciliation Statements/01 - Trunk/eReconciliationStatements/
> LOG: Initial PrivatePath = D:\Visual Studio Projects\CSharp Projects\Web\eReconciliation Statements\01 - Trunk\eReconciliationStatements\bin
> LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\a5cf2b76
> LOG: Cache Base = C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\a5cf2b76 LOG: AppName = acd2b7a
> Calling assembly : (Unknown).
> 
> LOG: This bind starts in default load context.
> LOG: Using application configuration file: D:\Visual Studio Projects\CSharp Projects\Web\eReconciliation Statements\01 - Trunk\eReconciliationStatements\web.config
> LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config.
> LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
> LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/Temporary ASP.NET Files/root/a5cf2b76/acd2b7a/Oracle.DataAccess.DLL.
> LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/Temporary ASP.NET Files/root/a5cf2b76/acd2b7a/Oracle.DataAccess/Oracle.DataAccess.DLL.
> LOG: Attempting download of new URL file:///D:/Visual Studio Projects/CSharp Projects/Web/eReconciliation Statements/01 - Trunk/eReconciliationStatements/bin/Oracle.DataAccess.DLL.
> LOG: Assembly download was successful. Attempting setup of file: D:\Visual Studio Projects\CSharp Projects\Web\eReconciliation Statements\01 - Trunk\eReconciliationStatements\bin\Oracle.DataAccess.dll LOG: Entering download cache setup phase.
> LOG: Assembly Name is: Oracle.DataAccess, Version=2.112.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342
> LOG: A partially-specified assembly bind succeeded from the application directory. Need to re-apply policy.
> LOG: Using application configuration file: D:\Visual Studio Projects\CSharp Projects\Web\eReconciliation Statements\01 - Trunk\eReconciliationStatements\web.config LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config.
> LOG: Post-policy reference: Oracle.DataAccess, Version=2.112.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342
> LOG: GAC Lookup was unsuccessful.
> WRN: A duplicate assembly was found while copying the assembly item to the cache.
> LOG: Binding succeeds. Returns assembly from C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\a5cf2b76\acd2b7a\assembly\dl3\037e6e93\00d336f9_73c1ca01\Oracle.DataAccess.dll.
> LOG: Assembly is loaded in default load context.

It says GAC Lookup was unsuccessful. Could any one pls help me on this issue. I have tried making the project run as x64 too.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:48:28.430

Uninstalling 11gR2 64 bit client and installing the 11gR2 32 bit client resolved the issue.

# javascript - remove autoplay from video on click javascript

> ID：13641740
> 
> 赞同：0
> 
> 时间：2012-11-30T08:50:30.867
> 
> 标签：javascript, jquery, youtube-api

I have used the following code to add autplay to iframe video onclick.

Html:

```
<span id="stoprotate"></span><iframe src="http://www.youtube.com/embed/TJ2X4dFhAC0?wmode=transparent"  frameborder="0" class="slide" allowtransparency="true" id="video" wmode="opaque"></iframe> 
```

script:

```
$(document).on('click','#video',function(e){ 

$(".roundabout-in-focus #video")[0].src += "&autoplay=1";
  $(this).unbind("click");

})

<a href="#">Stop auto play</a> 
```

I need to `remove autoplay` on click the stopautoplay link. How to do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:10:59.183

更改我的答案：P 尝试使用全局变量来保存 url，然后在单击

```
var gurl;
$(document).on('click','#video',function(e){
    gurl =  $(".roundabout-in-focus #video")[0].src;
    $(".roundabout-in-focus #video")[0].src += "&autoplay=1";
    $(this).unbind("click");
}); 
```

我写了一个示例： http:
[//ohcool.org/sof/13641740.html](http://ohcool.org/sof/13641740.html)

# objective-c - iOS application slows down on real device

> ID：13641742
> 
> 赞同：1
> 
> 时间：2012-11-30T08:50:53.737
> 
> 标签：objective-c, ios, performance, cocoa

I have iOS 6 application that consists of UIView with many UIButtons (like 9 to as many as 100) displayed at same time; all buttons are movable, so I'm changing button's frame property all the time.

After using the application for a couple of minutes (= moving buttons around the parent UIView), app slows down. It is very strange also that it seems buttons that are near the bottom of the screen (= parent UIView) are much slower than those on the top of screen.

All buttons belong to same class, inherited from generic UIButton.

It happens only on real device, not iPhone simulator.

Any idea about the issue? I'm using NSlog frequently through the code. Can this be the problem?

Thx, DJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:58:28.130

是的你是对的。

切勿在发布版本中提供 NSLog 或 DLog ..

删除所有 nslog，或出于测试目的将它们注释掉。

```
#ifdef DEBUG
  NSLog(@"log");
#endif 
```

或者

```
#define NSLog //NSLog 
```

您还应该检查僵尸和内存泄漏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T08:56:25.943

您可以将您的 NSLogs 设置为仅在 DEBUG 模式下，在 Relese 中会更快：

```
#ifdef DEBUG
  NSLog(@"log");
#endif 
```

# com - How do I save my Excel file with Autohotkey COM

> ID：13641752
> 
> 赞同：2
> 
> 时间：2012-11-30T08:51:35.683
> 
> 标签：com, autohotkey

I have tried this, but get an error when saving the file:

```
X0 := ComObjCreate("Excel.Application") ;handle
X0.Visible := True ;by default excel sheets are invisible
X0.Workbooks.Add ;add a new workbook

X0.Range("A1").Value := "00123123" ;in Feld "A1" Text einfügen

Sleep 1000

test := "C:\test.xls"
X0.Excel.ActiveWorkbook.Save(test) 
```

Can anybody tell me what I'm doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T22:06:24.013

```
oExcel := ComObjCreate("Excel.Application")
oExcel.Visible := True
oExcel.Workbooks.Add

oExcel.Range("A1").Value := "00123123

Sleep 1000

testpath := "C:\test.xls"
oExcel.ActiveWorkbook.SaveAs(testpath) 
```

SaveAs 方法是您需要的东西[http://msdn.microsoft.com/en-us/library/office/ff841185.aspx](http://msdn.microsoft.com/en-us/library/office/ff841185.aspx)

这也可能有助于[http://www.autohotkey.com/board/topic/56987-com-object-reference-autohotkey-l/page-10#entry418122](http://www.autohotkey.com/board/topic/56987-com-object-reference-autohotkey-l/page-10#entry418122)

# magento - Magento 1.7 WYSIWYG

> ID：13641753
> 
> 赞同：1
> 
> 时间：2012-11-30T08:51:42.223
> 
> 标签：magento, wysiwyg, product, presentation

I have a problem with magento 1.7 (WYSIWYG). My problem is that I can't have a proper description of the product when I use the WYSIWYG. For example if I write in the WYSIWYG my product description, on site web site I will have a presentation which isn't the same. The WYSIWYG puts html tags for each line return.

Thank you for your help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:56:59.503

我过去发现，对于某些主题，描述`nl2br`首先通过函数运行。`<br>`这将用标签替换所有新行。在您的`view.phtml`模板文件中查找并删除该`nl2br`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:08:37.707

在 template/easytabs 文件夹中的文件 description.phtml 中，我删除了`nl2br`. 然后它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:01:11.207

可能是您在前面有自定义 css 导致其外观不同，请在管理员（所见即所得）和网站上查看源代码以查看 html 是否相同。如果它们相同，请检查您的自定义 CSS

# google-apps-script - create a Google spreadsheet in a particular folder

> ID：13641760
> 
> 赞同：3
> 
> 时间：2012-11-30T08:52:28.727
> 
> 标签：google-apps-script

[this question](https://stackoverflow.com/questions/13532114/google-apps-script-addtofolder-adds-to-folder-and-mydrive) teaches how to adjust the folders of a file to move it into a particular folder, and out of the root.

It also suggests using folder.createFile to create it directly in the desired folder... but it appears createFile only applies to Docs... is there a way to create a spreadsheet directly in a particular folder?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-18T00:11:05.847

由于 DocsList 已被弃用，目前以下解决方案有效：

```
var folder=DriveApp.getFoldersByName(folderName).next();//gets first folder with the given foldername
var file=SpreadsheetApp.create(fileName);
var copyFile=DriveApp.getFileById(file.getId());
folder.addFile(copyFile);
DriveApp.getRootFolder().removeFile(copyFile); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T09:44:19.337

使用 Apps 脚本创建电子表格不适用于常规 Google 帐户和 Google Apps 标准版帐户。但是，您始终可以制作一个虚拟电子表格的副本，然后使用 Google Apps 脚本进行相应的修改。这是一个示例代码。

```
function createSpreadsheetInfolder() {
  var dummySS = DocsList.getFileById('ID of dummy SS');
  var myCopy = dummySS.makeCopy('My new file');
  //Get your target folder
  var folder = DocsList.getFolder('ID or path of folder');
  myCopy.addToFolder(folder);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-28T16:22:00.657

已经给出的答案似乎不起作用，也许它们已经过时了。

这是我的答案（对我有用）。

```
var folders=DriveApp.getFoldersByName("existingFolder");
while (folders.hasNext()) {
  var folder = folders.next();
  var file=SpreadsheetApp.create("the file that must be in a folder");
  var copyFile=DriveApp.getFileById(file.getId());
  folder.addFile(copyFile);
  DriveApp.getRootFolder().removeFile(copyFile);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-05T18:42:36.033

诚然，我的答案是从以前的答案中得出的，其中没有一个完全符合我的需要。此功能已使用当前的 Google Apps 脚本和电子表格文档进行了测试。如果文件夹名称重复，它将起作用，但将文件移动到 API 返回的第一个文件夹。

```
// Arguments are a file object and a folder name.
function moveFileToFolder(file, folderName)
{
    var folders = DriveApp.getFoldersByName(folderName);
    var copyFile = DriveApp.getFileById(file.getId());

    if (folders.hasNext()) {
       var folder = folders.next();
       folder.addFile(copyFile);
       DriveApp.getRootFolder().removeFile(copyFile);
    }
}
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-12T07:37:37.267

现在可以在特定文件夹中创建 Google 电子表格。为此，您需要使用高级驱动服务 v2。从谷歌应用脚​​本编辑器的高级服务菜单中启用它。

```
var oFile = placeGoogleSpreadsheetInSpecificFolder("my file", "target folder id");
var oSpreadsheet = SpreadsheetApp.open(DriveApp.getFileById(oFile.getId()));

function placeGoogleSpreadsheetInSpecificFolder(sSpreadsheetName, sTargetFolderId) {
    var oGeneratedFile = Drive.Files.insert({
        "mimeType": "application/vnd.google-apps.spreadsheet",
        "parents": [{
            id: sTargetFolderId
        }],
        "title": sSpreadsheetName
    });
    return oGeneratedFile;
} 
```

这个解决方案对我来说非常好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-14T14:50:25.280

这个问题已经回答了。 [https://stackoverflow.com/a/19610700](https://stackoverflow.com/a/19610700) 这是一个很好的解决方案。

```
folder.createFile("name", '',MimeType.GOOGLE_SHEETS); 
```

使用除空字符串以外的任何内容都会给我一个错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-30T10:13:37.567

这段代码对我有用，我认为没有办法避免“从根目录中删除”步骤，至少我不知道。

```
function createSpreadsheet() {
var folder = DocsList.getFolder('GAS');// this value as test for me
var root = DocsList.getRootFolder()
var newFileId = SpreadsheetApp.create('testNewSS').getId();// this defines the name of the new SS
var newFile = DocsList.getFileById(newFileId); // begin the 'move to folder process'
newFile.addToFolder(folder);
newFile.removeFromFolder(root);// had to do it in 2 separate steps 
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-31T15:35:59.507

对于像我这样阅读这个旧答案的人来说，这只是一个“提醒”。大多数解决方案已被弃用。你必须使用“moveTo”，你不需要从根方向或其他东西中删除。

请查看[此链接](https://developers.google.com/apps-script/reference/drive/file#movetodestination)以获取更多详细信息。

我这样做的解决方案：

```
/**
 * function createSS
 * @description: Creates a new SpreadSheet with imported values and directly in provided folder
 * @param {string} ssName name of SpreadSheet
 * @param {object} sheetData values as range
 * @param {object} ssFolder reference to a folder
 */
function createSS(ssName, sheetData, ssFolder = false){
  var ss = SpreadsheetApp.create(ssName);
  ss.setSpreadsheetLocale("de");
  if(ssFolder){
    // Move to provided folder
    var file = DriveApp.getFileById(ss.getId());
    file.moveTo(ssFolder);
  }
  var sheet = ss.getActiveSheet();  
  sheet.getRange(1, 1, sheetData.length, sheetData[0].length).setValues(sheetData);    
  return sheet;
} 
```

文件夹分配示例：

```
var folders = DriveApp.getFileById(ssFileId).getParents();
var folder = folders.next();
// add new file (directly in correct folder)
var sourceSheet = createSS(newFileName, relevantValues, folder); 
```

（如果您确定您的文件仅在 1 个文件夹中，则只能以这种方式工作。否则，请使用 .hasNext() 和循环执行）

# java - Which FlushMode in Hibernate commits when you call session.flush()?

> ID：13641761
> 
> 赞同：0
> 
> 时间：2012-11-30T08:52:31.910
> 
> 标签：java, hibernate, commit

I read that whether a call to `session.flush()` commits or not depends on the `FlushMode` that is set. However, I don't know which `FlushMode` does this. I want the session to be flushed and commited. Which FlushMode should I use?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:44:35.147

这是相反的方式。您可以在调用提交时刷新。这些是 Hibernate 中的刷新模式：[FlushModes](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/FlushMode.html)

## 总是

每次查询之前都会刷新会话。

## 汽车

会话有时会在查询执行之前被刷新，以确保查询永远不会返回陈旧状态。

## 犯罪

调用 Transaction.commit() 时会刷新会话。

## 手动的

只有当应用程序显式调用 Session.flush() 时，才会刷新 Session。

* * *

我认为您正在寻找AUTO。所以会话在提交时刷新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:58:39.733

我会说反之亦然 - Hibernate 在提交时是否刷新取决于[FlushMode](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/FlushMode.html)。

# java - SLF4J，避免每次都写 LoggerFactory.getLogger(MyClassName.class)

> ID：13641763
> 
> 赞同：5
> 
> 时间：2012-11-30T08:52:50.163
> 
> 标签：java, log4j, slf4j

我正在用 Java 编写一个 Web 应用程序并使用 SLF4J 进行日志记录。

我已经厌倦了为每个使用日志记录的类编写以下行：

```
private static final Logger logger = LoggerFactory.getLogger(ThisClassName.class); 
```

为了避免冗余代码，我在想类似

```
interface Loggable {
    Logger logger();
} 
```

每个类都可以只实现这个接口，然后像 AOP 这样的魔法插入`LoggerFactory`部分。

有没有人实现这个或知道如何实现这个？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T09:03:48.323

你在用日食吗？如果是这样，为什么不使用带有“logger”之类的关键字的代码模板和以下模板：

```
${:import(org.slf4j.LoggerFactory, org.slf4j.Logger)}
private static final Logger LOGGER = LoggerFactory.getLogger(${enclosing_type}.class); 
```

这样你只需输入“logger”，点击`shift`+`space`就完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-30T18:49:13.493

你在用 CDI 吗？如果是这样，创建一个生产者方法，然后将记录器@Inject 到任何启用 CDI 的类。

```
@Produces Logger createLogger(InjectionPoint injectionPoint) { 
    return Logger.getLogger(injectionPoint.getMember().getDeclaringClass().getName()); 
} 
```

请参阅[http://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#d0e1662](http://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#d0e1662)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:05:24.043

[Here](http://developers-blog.org/blog/default/2009/07/13/Spring-AOP-Example)很好地演示了使用 AOP 进行日志记录。我们似乎无法在方法中动态插入记录器来记录方法执行的详细信息。单元测试用例可以解决这个问题。AOP 可以处理方法调用的日志记录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-17T10:22:13.950

如果你在你的类上使用@Slf4j 注解，那么 lombok 默认会生成一个变量'log'

```
@Slf4j
public class YourClass {
    public void someMethod() {
        log.error("Test log");
    }
} 
```

查看链接 [https://github.com/mplushnikov/lombok-intellij-plugin/issues/154#issuecomment-163940867](https://github.com/mplushnikov/lombok-intellij-plugin/issues/154#issuecomment-163940867)

# c++ - qml + master-detail

> ID：13641765
> 
> 赞同：4
> 
> 时间：2012-11-30T08:52:54.767
> 
> 标签：c++, qt, qml, master-detail

I want to use qml with master-detail interface, but i don't know how to pass current item to detail view right way. The ListView in master view uses C++ model (add-on of QSQLTableModel, it's work fine) and I see two ways to pass item:

1.  Create C++ classes with fields with static name like QSqlRecord field names and pass it to qml with `w->rootContext()->setContextProperty()` (w is QDeclarativeView *), but now i don't use any classes like this and can change my database and qml views without changing c++ code, I would like to save it

2.  Create a lot of properties in any detail qml like

    ```
    Rectangle {
      id: mainRect
      property alias myFieldName: txt_nominal.text
      Column {

        width: parent.width
        Text {
            id: txt_nominal
            font.bold: true
        }
      }
    } 
    ```

and set this properties from c++ code by setting `w->rootContext()->setContextProperty(record.fieldName(i),record.field(i).value());` (record - QSqlRecort at current row)

Is there any easier way to solve my problem?

PS The code I wrote above is not checked for accuracy, and is written to make it more clear what I mean

**UPD**

Maybe it will be useful for somebody, I discovered 3-rd way, rather, the modification of second - you can wrap fields into QVariantMap and pass only one object to qml. This is exactly what I wanted

in cpp:

```
QVariantMap testObject;
testObject["testField"]="first string from cpp";
testObject["testField2"]="second string from cpp";
rootContext()->setContextProperty("testObject",testObject); 
```

in qml:

```
Text {
        id: simpleTextt
        text: testObject.testField
        anchors.centerIn: parent
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:06:12.450

您可以使用委托的**isCurrentItem**属性将数据从 ListView 委托传递到您的详细信息 qml。这样，您无需添加额外的 c++ 代码就可以逃脱。这基本上是您的第二种方法，但没有 c++。只要您要更改的每个 QML 元素都有一个**id** ，您也不需要添加许多属性。

如果您有许多不同的 QML 用于不同的详细信息视图，您还必须使用 Loader 来加载适当的详细信息 QML。

只是一个玩具示例，假设您对于列表中的所有元素只有一个详细信息模板（如上所述，如果不是这种情况，您可以使用 loader 而不是**detailsRect**）：

```
Rectangle {
  width: 300; height: 400

  Rectangle {
    id: detailsRect
    anchors.right: parent.right
    width: 100
    height: 500
    color: "blue"
    Text {
      id: detailsText
      text: ""
    }
  }

ListView {
  id: list
  anchors.fill: parent
  model: 20

  delegate: Rectangle {
    color: ListView.isCurrentItem ? "red" : "green"
    width: 40
    height: 40

    Text {
        text: index
    }

    ListView.onIsCurrentItemChanged: {
        if(ListView.isCurrentItem)
        {
            detailsRect.color = "yellow"
            detailsText.text = index
        }
    }

    MouseArea {
        anchors.fill: parent
        onClicked: {
            list.currentIndex = index
        }
    }
  }
}
} 
```

# android - android，无需遍历所有位置即可找到最近的位置

> ID：13641768
> 
> 赞同：1
> 
> 时间：2012-11-30T08:53:03.170
> 
> 标签：android, xml, database, json, location

我
首先正在构建一个出租车调度应用程序：我需要乘客应用程序来显示最近的出租车，现在我知道如何在代码中做到这一点，但以我的方式我必须遍历所有出租车位置（在服务器上的数据库中）并计算距乘客位置的距离并获得最低的位置-我不想这样做，因为会有很多出租车，并且要经过所有出租车并进行一些数学运算，这对服务器来说有点痛苦-有没有办法在不经过所有这些的情况下获得最近的？

第二：最好使用什么数据库 - 首先，它应该是 sql 还是非 sql - 我需要一个非常强大的数据库，因为会有很多更新（我的意思是乘客位置添加然后在到达目的地时删除 &&出租车位置经常变化）

最后：我将使用 RubyOnRails 做服务器端和 json 作为数据传输格式，你有什么更好的建议给我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:04:18.033

由于涉及复杂的方程，计算距离需要时间。

相反，尝试进行更简单的“假距离”计算。

例如，为了您的目的，您可以尝试使用类似 d = |x| 的方法，而不是 d = SQRT (x*x + y*y) + |y| 并为此排序。你不需要这里的确切公式，因为粗略的近似就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:02:06.387

对于第一个问题：我认为您可以从移动设备发送无线电（即：/43.34343/-3.3333/1000 和 1000 表示无线电以米为单位），然后从服务器仅返回该区域中包含的出租车。您可以计算设备位置与出租车列表之间的距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:15:27.857

首先：使用你需要计算最近的距离。但是，我建议您不要与所有出租车位置进行比较，而是通过拉长的乘客。

在服务器上维护经纬度的出租车位置。编写查询以获取 +/- 3 纬度的出租车。这将限制乘客区附近的出租车数量。

对于第二个：= 使用关系数据库，SQL Server 非常适合我在上一个项目中使用的此类应用程序。

对于服务器：我不知道 RubyOnRails，但正如他们所说，这也更快且易于实现..，您选择了最佳数据交换格式 Json 无需更改；您可以使用 zip 来提高性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T10:25:16.123

试试这个[链接](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/) 它会显示所有最近的地方，如酒店、剧院等。它会在列表中显示特定地点的地址，也会显示在地图视图中。

希望这对您有所帮助。

# ember-data - 如果我没有记录，如何从 Ember 数据存储中卸载记录

> ID：13641769
> 
> 赞同：1
> 
> 时间：2012-11-30T08:53:07.637
> 
> 标签：ember-data

我正在使用 Ember Data 修订版 8 并使用 ID 在商店中调用“查找”方法。
如果服务器没有找到此 ID 的记录，那么我不确定如何让我的控制器和视图知道。

适配器中的 find 方法不接收记录的实例，因此如果服务器返回空哈希，我无法访问记录的状态管理器以将其转换为另一种状态。

我正在查看 Store 并没有看到任何可以直接从适配器调用的方法来说“嘿，我没有找到该类型的具有此 ID 的记录。将其 [记录缓存中的记录] 移出加载到已删除”。我想我可以调用 Store.load(...) 来转换记录，但这听起来像是一个肮脏的解决方法。

目前，记录的“isLoaded”计算属性将始终为 false，这意味着如果我基于此属性实现某种微调器，那么它将挂起。

有没有人遇到过这个问题？

谢谢

# bash - shell 脚本中的 counter=$ 意外

> ID：13641773
> 
> 赞同：0
> 
> 时间：2012-11-30T08:53:25.250
> 
> 标签：bash, shell, solaris, sh

我的 shell 脚本中有以下几行。

```
#!/bin/bash

counter=0
counter=$((counter+1))
echo $counter 
```

我需要像这样运行上面的shell脚本-

```
sh -x test.sh 
```

每当我尝试运行上述脚本时，我都会收到错误消息 -

```
`counter=$' unexpected 
```

有什么建议我需要在那里做出改变吗？

**更新脚本：**

```
#!/bin/bash

counter=0
counter=$(($counter+1))
echo $counter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:54:38.750

尝试使用`bash`而不是`sh`因为`$(( ... ))`不是标准的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:55:13.520

尝试：

```
#!/bin/sh

counter=0
counter=`expr $counter + 1`
echo $counter 
```

`$ sh -x test.sh`

```
+ counter=0
++ expr + 1
+ counter=1
+ echo 1
1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T09:06:06.253

看起来你有一个旧版本的`sh`. 尝试使用以下脚本：

```
#!/bin/bash

counter=0
counter=`expr $counter + 1`
echo $counter 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T10:49:34.887

我不建议恢复到过时的语法。

使用`sh -x test.sh`正在击败你的脚本的 shebang `#!/bin/bash`。您强制 sh 用作解释器来解析您的脚本，而不是 /bin/bash。最高包括 Solaris 10，/bin/sh 是原始的 bourne shell，具有 pre POSIX 语法。它不应该在旧脚本中使用。

然后，您可以简单地声明一个理解您的语法的 shell，即以下之一：

```
/usr/xpg4/bin/sh -x test.sh 
```

或者

```
/bin/bash -x test.sh 
```

或者

```
/bin/ksh -x test.sh 
```

如果您真的想`sh -x test.sh`按原样工作，只需通过如下设置路径切换到 POSIX 模式：

```
PATH=/usr/xpg6/bin:/usr/xpg4/bin:$PATH 
```

# javascript - 多种元素的光谱颜色选择器

> ID：13641775
> 
> 赞同：1
> 
> 时间：2012-11-30T08:53:26.220
> 
> 标签：javascript, plugins

我需要有 X 元素的颜色选择器。每个元素都有不同的 ID。

我正在尝试使用[频谱](http://bgrins.github.com/spectrum/)，但我看不到如何动态初始化每个元素的频谱。

现在的元素看起来像这样：

```
<input type="text" id="123_my_color">
<input type="text" id="143_my_color">
<input type="text" id="5343_my_color">
.... 
```

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:38:34.773

您只需要选择所有元素，然后在它们上调用频谱：

```
<input type="text" class="my_color" id="123_my_color">
<input type="text" class="my_color" id="143_my_color">
<input type="text" class="my_color" id="5343_my_color"> 
```

然后在你的 JavaScript 中：

```
$(".my_color").spectrum(); 
```

参见示例：http: [//jsfiddle.net/Sy6gU/1/](http://jsfiddle.net/Sy6gU/1/)

# java - 当我们单击 Ecclips 中的“在服务器上运行”选项时，tomcat 在浏览器中打开主页（例如：Index.jsp）的步骤是什么

> ID：13641776
> 
> 赞同：-1
> 
> 时间：2012-11-30T08:53:31.397
> 
> 标签：java, tomcat

实际上我听说发生了一些 build.XML 读取，真的我不完全正确，所以当我们点击“在服务器上运行”时，任何人都会告诉tomcat在浏览器中打开主页（例如：Index.jsp）的步骤是什么" Eclipse 中的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:37:06.117

当您单击“在服务器上运行”时，Eclipse 会在 Tomcat 中部署应用程序，打开一个新的浏览器窗口，指向已部署的 webapp 中 JSP 的 URL。

所以浏览器会向Tomcat发送一个HTTP请求。由于 HTTP 请求的 URL 指向一个 .jsp 文件，Tomcat 在 webapp 中加载相应的 JSP 文件，将其转换为包含扩展 HttpServlet 的类的 Java 源文件，然后调用 Java 编译器将该 Java 源文件编译成一个类文件。

然后类文件由与webapp关联的Tomcat类加载器加载，构造并初始化一个JSP servlet实例，并调用其服务方法。

service 方法生成 HTML 并将其写入 servlet 的响应编写器，该编写器实际上是包装套接字输出流的编写器，它将字节发送到浏览器。

浏览器解释 HTML 并生成要在浏览器窗口中显示的文本和图形。

当然，如果向同一个 JSP 发送第二个请求，Tomcat 会重用它创建的 servlet 实例来服务第一个请求，并重新调用这个 servlet 的服务方法。这就是为什么第一个请求通常很慢，而随后的请求却非常快。

# javascript - 在 javascript 的帮助下打开同一页面中的子链接

> ID：13641779
> 
> 赞同：-3
> 
> 时间：2012-11-30T08:53:42.613
> 
> 标签：javascript, html

在 html 中，我创建的页面如下

```
2012-2013
  a
  b 
```

2011-2012

```
 a
  b 
```

其中 2012-2013 是单击 2012 和 2013 子链接的主链接，应在再次单击链接时打开 a 和 b 子链接 a 和 b 子链接应隐藏我想使用 javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:04:20.183

你的意思是这样的吗。它的html5。目前只有 chrome 支持：

```
<details>
<summary>2012-2013</summary>
<p> a b</p>
</details>
<details>
<summary>2011-2012</summary>
<p> c d </p>
</details> 
```

# algorithm - 下限和上限

> ID：13641781
> 
> 赞同：0
> 
> 时间：2012-11-30T08:54:01.613
> 
> 标签：algorithm, recurrence

我有以下递归关系：

```
T(n) = 2T(n/3) +5(n/6) + n 
```

并且不能完全弄清楚正确的下限和上限。
对于我所做的上限：

```
T(n) = 2T(n/3) +5T(n/3) +n = 7T(n/6) +n 
```

其中，根据主定理应该是：n ^(log [6] 7)

对于下限，我做了：

```
T(n) = 2T(n/3) +5T(n/3) +n = 7T(n/3) +n 
```

其中，根据主定理应该是：n ^(log [3] 7)

但是，当解决它时，我只得到了部分分数，因为“有更好的界限”
我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:49:23.350

```
T(n)=2*T(n/3)+5*T(n/6)+n

Let
T(n)=c*n^k+o(n^k)

Then
c*n^k+o(n^k)=2*c*(n/3)^k+o((n/3)^k)+5*c*(n/6)^k+o((n/6)^k)+n  

c/6^k*(6^k-2^(k+1)-5)=o(n^k)

k=1.27635... 
```

所以，T(n) ≃ c*n ^(1.27635)

T(n) ∈ Θ(n ^(1.27635) )

# html - Sencha Touch中如何根据htm事件切换视图？

> ID：13641783
> 
> 赞同：0
> 
> 时间：2012-11-30T08:54:02.800
> 
> 标签：html, extjs, sencha-touch, sencha-touch-2, uiswitch

我想根据 html 事件切换视图：通常是点击映射的图像。

我通过了这篇[文章](https://stackoverflow.com/questions/6751329/can-you-trigger-action-events-in-sencha-touch-from-html-elements)。它解释了如何通过在 html 元素上添加侦听器来获取 href 值。我已成功执行此步骤。

下一步是切换到正确的视图。通常，如果 href = "item1" 那么我想切换到查看 "item1" ...我真的不知道如何执行此操作。

我认为html元素的代码：

```
<img class="map" src="folder/name_pic.jpg" ...usemap='#MapName' />
    <map name='#MapName' ...>
        <area shape=...... href="view1" />
        <area shape=...... href="view2" />
        <area shape=...... href="view3" />
    </map> 
```

父选项卡面板中的代码：

```
panel.getEl().on({
    tap: function(e){

        var href = Ext.fly(e.getTarget(
                    'img.map')).getAttribute('href');

        // What goes HERE?
        // if (href == 'view1')
        //     display 'view1'...
},
delegate: 'img.map'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:48:31.333

您可以使用下面显示的示例代码来执行此操作，您可能必须针对您的应用程序设计对其进行修改，但这是一般方式

```
Tapped: function() {
        // When the user taps on this item, create a new reference new viw, 
        // and set  it as the active item

        Ext.Viewport.setActiveItem(Ext.create('Your new view Goes here'));
    } 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:24:11.497

我已经在控制器中使用“路由”解决方案成功实现了我的目标。

首先我定义我的映射图片如下：

```
<img class="map" src="folder/name_pic.jpg" ...usemap='#MapName' />
     <map name='#MapName' ...>
         <area shape=...... href="/#view1" />
         <area shape=...... href="/#view2" />
         <area shape=...... href="/#view3" />
     </map> 
```

然后在 Controller.js 中：

```
config: {
    routes: {
        'view1': 'showView1',
        'view2': 'showView2',
        'view3': 'showView3'
    },
[...... code here...]

showView1: function() {

    this.getMainPanel().add({
        xtype: 'view1'
    });
},
showView2: function() {

    this.getMainPanel().add({
        xtype: 'view2'
    });
}, 
```

这可行，但对我来说似乎不是最佳选择。我会继续努力的！

# windows - 将源文件从服务器复制到本地文件夹的 ANT 脚本

> ID：13641787
> 
> 赞同：0
> 
> 时间：2012-11-30T08:54:13.923
> 
> 标签：windows, ant

> **可能重复：**
> [Ant，从远程机器下载文件集](https://stackoverflow.com/questions/12191713/ant-download-fileset-from-remote-machine)

我在指定的路径服务器中有文件夹，必须复制到本地的指定路径。如何在 ant 脚本中实现这一点？

```
local filename C:/project
Server name   : //pmfvc/04/ 
```

在该服务器目录中，我只需要复制 javasource 目录。

# wordpress - 在 WordPress 中为用户分配特定职位的角色

> ID：13641789
> 
> 赞同：2
> 
> 时间：2012-11-30T08:54:29.087
> 
> 标签：wordpress

我正在设计一个需要将用户分配给特定帖子（自定义类型）的插件。

例如，我有一个自定义帖子类型：`ClassifiedFile`

对于这种类型的帖子，我需要在界面中的某个位置为它分配用户，每个用户都有不同的功能。在这种情况下，可能是：

*   `Reviewers`分配给特定的机密文件可以读取它并将其标记为已批准
*   `Readers`分配给特定的分类文件只能读取它
*   或者，当然，读者和审阅者无权访问除他们被允许查看的文件之外的其他机密文件。
*   `Managers`谁可以分配`Reviewers`和分配`Readers`机密文件
*   `PluginAdmin`谁可以分配`Managers`给机密文件

理想情况下，该解决方案应该适用于以下类型的高效请求：

*   我想列出用户可以阅读的所有分类文件（无论是作为审阅者还是作为读者）。

至今 ：

*   我在帖子的元数据中存储了一些特定的属性（例如批准状态）。
*   我创建了自定义功能：“plugin-admin”、“manage-file-users”、“approve-file”和“read-file”
*   我为此提供了两个自定义角色：文件组管理器（“plugin-admin”）、文件组管理器（“manage-users”）、文件审阅者（“批准文件”、“读取文件”）和文件阅读器（“读取文件”）

我必须说我正在努力寻找一种解决每个分类文件的特权列表和存储的好方法。理想情况下，我想避免创建一个单独的数据库表，但如果这是这样做的方法，那么我会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:12:53.807

分配角色并不是什么大问题，问题更多是关于在哪里以及如何存储信息的问题。

我决定这样做：

*   我定义了对所有人都通用的组（实际上是 WP_Role 对象）`ClassifiedFile`
*   对于每个`ClassifiedFile`，我存储一个元值，它是一个包含用户角色和 id 的字符串数组。例如：`[ reviewer|50|, reader|123|, reader|13| ]`
*   然后，我可以使用以下条件查询所有`ClassifiedFile`特定用户：

    'meta_query' => 数组（数组（'key' => 'users', 'value' => '|' . $user_id . '|', 'compare' => 'LIKE' ))

*   或使用一个组：

    'meta_query' => 数组（数组（'key' => 'users', 'value' => $group . '|' . $user_id . '|', 'compare' => '=' ))

# python - ValueError：未知的网址类型

> ID：13641792
> 
> 赞同：6
> 
> 时间：2012-11-30T08:54:38.270
> 
> 标签：python, parsing, urllib2, urllib, traceback

标题基本概括了所有内容。这是我的代码：

```
from urllib2 import urlopen as getpage
print = getpage("www.radioreference.com/apps/audio/?ctid=5586") 
```

这是我得到的回溯错误：

```
Traceback (most recent call last):
  File "C:/Users/**/Dropbox/Dev/ComServ/citetest.py", line 2, in <module>
    contents = getpage("www.radioreference.com/apps/audio/?ctid=5586")
  File "C:\Python25\lib\urllib2.py", line 121, in urlopen
    return _opener.open(url, data)
  File "C:\Python25\lib\urllib2.py", line 366, in open
    protocol = req.get_type()
  File "C:\Python25\lib\urllib2.py", line 241, in get_type
    raise ValueError, "unknown url type: %s" % self.__original
ValueError: unknown url type: www.radioreference.com/apps/audio/?ctid=5586 
```

我最好的猜测是 urllib 无法从杂乱无章的 php URL 中检索数据。如果是这种情况，是否有解决方法？如果没有，我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T08:57:49.527

您应该首先尝试`'http://'`在 url 前面添加。此外，不要***将***结果存储在 中`print`，因为**它会将引用绑定到另一个（不可调用的）对象**。

所以这一行应该是：

```
page_contents = getpage("http://www.radioreference.com/apps/audio/?ctid=5586") 
```

这将返回一个类似对象的文件。要读取其内容，您需要使用不同的文件操作方法，如下所示：

```
for line in page_contents.readlines():
    print line 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T08:56:59.147

您需要传递一个完整的 URL：即它必须以 . 开头`http://`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T08:57:15.200

只需使用`http://www.radioreference.com/apps/audio/?ctid=5586`它就可以正常工作。

```
In [24]: from urllib2 import urlopen as getpage

In [26]: print getpage("http://www.radioreference.com/apps/audio/?ctid=5586")
<addinfourl at 173987116 whose fp = <socket._fileobject object at 0xa5eb6ac>> 
```

# r - 访问 XTS 中的元素时出现奇怪的行为

> ID：13641795
> 
> 赞同：1
> 
> 时间：2012-11-30T08:54:46.690
> 
> 标签：r, xts

我有一个 XTS，它是列表的一部分，`returns$sig`从该 XTS 中，我根据某些条件提取一组元素并将索引存储在一个变量`tstart`中。

```
> tstart <- index(returns$sig[which(returns$sig != lag(returns$sig,1) & returns$sig != 0)])
> length(tstart)
[1] 599 
```

当我尝试`returns$sig`使用 中的日期再次访问 XTS 时`tstart`，我得到一个长度不同的 XTS：

```
> length(returns$sig[tstart])
[1] 478 
```

它应该返回长度为 599 的内容。如果我尝试以不同的方式访问 XTS，我会得到相同长度的内容：

```
> length(returns$sig[match(tstart,index(returns$sig))])
[1] 599 
```

花了好几个小时，还没有找到解决办法。有什么明显的我做错了吗？更糟糕的是，我发誓`length(returns$sig[tstart])`昨天返回了 599，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:19:31.307

抱歉，问题的格式不正确。我无法通过一个简短的示例重现该错误，并且不想发布我的所有代码。我终于弄清楚了这个问题。这似乎与一些人（包括我自己）在 XTS 中报告的[错误有关。](https://stackoverflow.com/questions/13341104/why-does-xts-shift-a-date-one-day-back-when-creating-an-xts-object-from-a-data-f/13441865#comment18593616_13441865)我需要做的就是使用 Sys.setenv(TZ = "GMT") 为我的系统指定一个时区。

对于那些感兴趣的人，我正在使用`xts_0.8-8`.

# ipad - 在 iPad 中为 s 标签选择显示 [0 项]

> ID：13641796
> 
> 赞同：2
> 
> 时间：2012-11-30T08:54:54.087
> 
> 标签：ipad, struts2

对于 iPad，以下代码在表单的开头显示 [0 Items]。但对于 PC 浏览器，它不显示任何内容。

[已编辑] 即使列表框有数据，数据也没有显示在 iPad 的列表框中。

```
<s:select id="myList" name="myIds" list="myList" listKey="key" listValue="value" multiple="true" cssClass="selection-big" theme="simple" 
    onchange="detectChangeValue(this.options[this.selectedIndex].value,'a');"/> 
```

iPad浏览器的列表框中如何使其不显示[0 Items]并显示真实列表？

[已编辑] ![在此处输入图像描述](../Images/b6b901c0030cd0c6ac6eb64d981974fd.png)

# c - 为什么 snmp oid 的描述给出“null”？

> ID：13641802
> 
> 赞同：0
> 
> 时间：2012-11-30T08:55:16.297
> 
> 标签：c, linux, net-snmp, mib

我的以下代码不起作用，因为我想使用 Net-Snmp 库获取节点的描述。

```
#include "net-snmp/net-snmp-config.h"
#include "net-snmp/net-snmp-includes.h"

void  print_s(struct tree *);

    int main(int argc, char ** argv)
    {
        char buff[100]; 
        struct tree *node=NULL;

        init_mib();
        node=read_all_mibs();
        if( node == NULL )
        {
        exit(2);
        }
        print_s(node);  
    } 

void  print_s(struct tree *tree)
    {       
    struct tree    *tp; 

    for (tp = tree->child_list; tp; tp = tp->next_peer) 
    {
printf("%s:%s\n",tp->label,tp->description); 
    }
    for (tp = tree->child_list; tp; tp = tp->next_peer) 
          {           
              if (tp->child_list)
                  print_s(tp);
          }           

    }

    o/p-
org:(null)
dod:(null)
internet:(null)
snmpV2:(null)
security:(null)
private:(null)
experimental:(null)
mgmt:(null)
directory:(null)
snmpModules:(null)
snmpProxys:(null)
snmpDomains:(null)
snmpMIB:(null)
snmpFrameworkMIB:(null)
.........
........ 
```

我得到所有节点的空值，

请告诉我为什么我无法获得可用节点的描述。当我使用如下命令行选项时

```
snmptranslate -On -Td 1.3.6.1.6.3.10

Result
-----------
 .1.3.6.1.6.3.10
snmpFrameworkMIB MODULE-IDENTITY
  -- FROM       SNMP-FRAMEWORK-MIB
  DESCRIPTION   "The SNMP Management Architecture MIB

                     Copyright (C) The Internet Society (2002). This
                     version of this MIB module is part of RFC 3411;
                     see the RFC itself for full legal notices.
                    "
::= { iso(1) org(3) dod(6) internet(1) snmpV2(6) snmpModules(3) 10 } 
```

`1.3.6.1.6.3.10`是的`oid`，`snmpFrameworkMIB` 但您可以在我的程序中的节点上方看到 null 作为其`description`.

任何人都可以知道这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:46:42.140

默认情况下，`net-snmp` `MIB`解析器不会特别打开DESCRIPTION字符串存储，因为它需要更多内存。

要打印描述调用：

```
snmp_set_save_descriptions(1); 
```

在调用`init_snmp()`强制保存DESCRIPTION子句之前。

功能`void snmp_set_save_descriptions(int);`

在中声明`include/net-snmp/mib_api.h`和定义`snmplib/ucd_compat.c`。

**定义**：

```
void
snmp_set_save_descriptions(int save)
{
   netsnmp_ds_set_boolean(NETSNMP_DS_LIBRARY_ID, 
                          NETSNMP_DS_LIB_SAVE_MIB_DESCRS, save);
} 
```

编辑：

call `snmp_set_save_descriptions(1);`before `init_snmp()`Also ..`init_snmp()`调用所以如果一个人正在调用，则`netsnmp_init_mib()`不需要显式调用`netsnmp_init_mib()``init_snmp()`

# objective-c - 证书、配置文件、公钥/私钥揭秘

> ID：13641809
> 
> 赞同：7
> 
> 时间：2012-11-30T08:55:54.843
> 
> 标签：objective-c, ios, xcode, provisioning-profile, code-signing-certificate

这个话题继续让我感到困惑。我想我会写出我目前的理解，并希望找出我对的事情/我错的事情。

创建开发证书时，有公钥和私钥的概念。通过供应门户提供的证书持有一个公钥，而您的私钥存储在您的钥匙串中。为了对您的应用程序进行代码签名，您必须同时拥有两者。

为了运行应用程序，设备必须具有配置文件，该配置文件本质上包含应用程序标识符、一组公认的证书（应用程序必须已由这些证书之一签名）和一组设备标识符（指示允许哪些设备运行该应用程序）。

“公认的证书”引用了公钥，而私钥本质上是由应用程序传递的。

因此，对于 App Store，我们可以将普通设备视为带有默认的 prov 配置文件，该配置文件已经具有苹果的“公钥”，并且苹果在分发之前执行自己的代码签名操作，从而添加他们的私钥。

完美的？关闭？走开？疯狂的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:24:16.173

对于它的价值，这是我的最新理解：

配置文件是一个文件，它告诉您哪些应用程序（通过 AppID）由哪个开发人员（通过证书）签名，可以在哪些设备（UDID）上运行。

对于证书，有一个公钥和私钥的概念。公钥和私钥在数学上是联系在一起的，这样一个人可以加密纯文本，一个人可以解密密文。证书允许苹果确保两件事：1，只有注册的开发人员可以分发他们的代码，2，正在分发的代码在发送到您的设备的过程中不会被更改。

当您在 Xcode 中构建代码时，您使用位于钥匙串中的私钥对您的应用程序进行“代码签名”，从而“锁定”它。为了解锁/解密代码，目标设备必须有权访问您的公钥。设备从配置文件中包含的证书中获取公钥。

为了验证代码在从开发人员到设备的过程中保持不变，您的证书包含一个算法，可以将您的代码/数据转换为所谓的“摘要”。在开发人员方面，数据/代码通过算法运行，生成单独的摘要，然后用私钥锁定。

当设备接收到应用包时，设备可以通过执行以下操作来确保代码没有被更改：使用私钥解锁摘要，通过算法运行未加密的数据（请记住，设备可以访问证书通过其 prov 配置文件），并确保结果是与开发人员发送的摘要相同的摘要。

除此之外，prov profile 只需要检查手机的 UDID，并确保 profile 中的 AppID 与应用程序中的标识符匹配。

我认为，我们不需要为应用商店中的应用提供单独的 prov 配置文件的原因是因为每部 iPhone 都附带了苹果用来对分发应用进行代码签名的公钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:42:35.507

Ray Wenderlich 在[这里](http://www.raywenderlich.com/2915/ios-code-signing-under-the-hood)很好地解释了它。为了改善您的描述，而不是

> “公认的证书”引用了公钥，而私钥本质上是由应用程序传递的。

我会说：

> app .ipa 包含一个开发者证书。开发者证书使用您的私钥以及 Apple 官方私钥进行签名。

因此，通过使用 Apple 和您的公钥验证开发者证书，iPhone 可以验证：

*   你是这个应用程序的开发者
*   您已获得 Apple 应用程序开发认证
*   此应用程序允许在 iPhone 上运行（只要手机上存在引用此开发人员证书的配置文件）。

您的私钥不存储在任何证书或配置文件中，它仅用于签名。不确定是否存储了公钥。为了完全安全，手机在验证时应从 Apple 获取公钥。

# box2d - cocos2D-Box2D,CCSprite 不显示在屏幕上

> ID：13641811
> 
> 赞同：2
> 
> 时间：2012-11-30T08:56:05.723
> 
> 标签：box2d

我想从精灵设置身体的用户数据。但身体没有显示在屏幕上。但它不起作用。我不知道为什么。我的代码如下所示：如果您知道问题出在哪里，请告诉我。谢谢！

```
 CGSize screenSize = [[CCDirector sharedDirector] winSize];
    CGPoint screenCenter = ccp(screenSize.width*0.5f, screenSize.height*0.5f);

    b2Vec2 gravity = b2Vec2(0.0f, -10.0f);
    bool allowBodiesToSleep = true;
    world = new b2World(gravity);
    world->SetAllowSleeping(allowBodiesToSleep);

    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position = [self toMeters:screenCenter];

    CCSprite *hero = [CCSprite spriteWithFile:@"hero_jump0.png"];
    hero.position = screenCenter;

    bodyDef.userData = hero;

    b2Body *body = world->CreateBody(&bodyDef);

    b2PolygonShape dynamicBox;
    dynamicBox.SetAsBox(hero.contentSize.width/PTM_RATIO*0.5f, hero.contentSize.height/PTM_RATIO*0.5f);

    b2FixtureDef fixtureDef;
    fixtureDef.shape = &dynamicBox;
    fixtureDef.density = 0.3f;
    fixtureDef.friction = 0.5f;
    fixtureDef.restitution = 0.6f;

    body->CreateFixture(&fixtureDef); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:03:29.863

您还没有将您的精灵作为孩子添加到您的节点层次结构中。所以它在范围的末尾被删除

# javascript - 如何处理 chrome 扩展中的 js 弹出对话框

> ID：13641814
> 
> 赞同：1
> 
> 时间：2012-11-30T08:56:25.757
> 
> 标签：javascript, google-chrome-extension

当一个 JS 弹出窗口（如警报或确认对话框）打开时，我需要在 chrome 扩展中知道。

我有以下问题：

1.  是否有任何 chrome.* api 或其他 api ？
2.  这些类型的对话框是特定的 chrome.window 对象吗？

谢谢。

# php - javascript 不会读取 .post php 提交输入（在 php 中）

> ID：13641818
> 
> 赞同：0
> 
> 时间：2012-11-30T08:56:38.577
> 
> 标签：php, javascript, html

Javascript 部分...它停在 $("#deletar").click...

```
$(document).ready(function() {
    $("#deletar").click(function() { // it fails here !!
        var sendu = $("#ids").val();
        $.ajax({
            type : "POST",
            url : "deletar.php",
            data : "ids=" + sendu,
            success : function(msg, string, jqXHR) {
                $("#result").html(msg);
            }
        });
    });
}); 
```

这是 php 文件...是对其他 ajax 帖子的回显，并检索 mysql 数据库的列表

```
.$row2['amigos']."
</td>
<td><inp ``ut type='submit' name='deletar' id='deletar' value='deletar'
        OnClick='return confirm(\"Tem certeza que quer deletar esta linha?\");'>
    <input type='hidden' name='ids' id='ids' value='".$row2['id']."'>

</td>
</tr>
";
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:03:55.810

您的 ajax 正在从提交按钮调用`click`。您没有做任何事情来阻止提交按钮的默认行为，因此在您的 ajax 调用之后，浏览器将使用传统请求提交表单。

在您的`click`事件中，您可以`return false`阻止表单提交：

```
$("#deletar").click(function(){ //it fails here !!
    var sendu = $("#ids").val();
    $.ajax({
        type:"POST",
        url:"deletar.php",
        data: "ids="+sendu,
        success: function(msg,string,jqXHR){
                $("#result").html(msg);
            }
        }); 

    return false; // <--- stop the form submitting
}); 
```

你也可以使用[`e.preventDefault`](http://api.jquery.com/event.preventDefault/)来达到同样的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:04:02.797

我认为您需要在单击提交按钮后停止提交表单：

```
$(document).ready(function () {
    $("#deletar").click(function (event) {//it fails here !!
        event.preventDefault(); // one of these
        event.stopPropagation(); // lines should do the trick
        var sendu = $("#ids").val();
        $.ajax({
            type : "POST",
            url : "deletar.php",
            data : "ids=" + sendu,
            success : function (msg, string, jqXHR) {
                $("#result").html(msg);
            }
        });
    });
}); 
```

# c++ - twitcurl OAuth - 错误 89：无效/过期令牌

> ID：13641821
> 
> 赞同：0
> 
> 时间：2012-11-30T08:56:53.257
> 
> 标签：c++, linux, twitter, twitter-oauth

我使用 twitcurl 到 OAuth twitter 并发送直接消息。我设置了所有键：

```
 twitCurl twitterObj;
    twitterObj.getOAuth().setConsumerKey(t_consumer_key);
    twitterObj.getOAuth().setConsumerSecret(t_consumer_secret);
    twitterObj.getOAuth().setOAuthTokenKey(t_access_token);
    twitterObj.getOAuth().setOAuthTokenSecret(t_access_token_secret);
    twitterObj.accountVerifyCredGet();

The twitterObj.getLastWebResponse(replyMsg); return error 89:
    <error code="89">Invalid or expired token</error> 
```

我可以使用访问令牌而不是用户名/密码进行 Oauth 吗？

PS：访问级别是“读、写和直接消息”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:03:29.583

我使用下一个调用序列：

//#define IF_FALSE_RETURN(a) if(!a) { log("TwitterClient 授权失败！"); 返回;}

```
 twitterCurl->setTwitterUsername(usr);
    twitterCurl->setTwitterPassword(pwd);

    twitterCurl->getOAuth().setConsumerKey(twitterConsumerKey);
    twitterCurl->getOAuth().setConsumerSecret(twitterConsumerSecret);

    std::string authorizedUrl;

    IF_FALSE_RETURN( twitterCurl->oAuthRequestToken(authorizedUrl)  );
    IF_FALSE_RETURN( twitterCurl->oAuthHandlePIN(authorizedUrl)     );
    IF_FALSE_RETURN( twitterCurl->oAuthAccessToken()                );

    twitterCurl->getOAuth().getOAuthTokenKey(accessTokenTwitter);
    twitterCurl->getOAuth().getOAuthTokenSecret(accessSecretTwitter); 
```

IF_FALSE_RETURN - 非常重要！如果一个方法返回 false，则下一个调用可以返回 true 并分配令牌和机密，但用户授权失败。

# javascript - 如何修补 javascript 插件并使其可维护

> ID：13641822
> 
> 赞同：0
> 
> 时间：2012-11-30T08:56:56.533
> 
> 标签：javascript, plugins, patch

这些天来，当我编写 JavaScript 代码时，我发现自己使用越来越多的插件来完成常见任务。很多时候，当我使用现有插件时，例如显示工具提示，我对某些选项不太满意 - 所以我扩展它们，或者修复错误。

这就提出了如何修复/扩展第三方代码的问题。你只是修改源文件吗？这使得以后几乎不可能更新插件。您可以通过克隆对象或对现有对象进行原型设计来扩展它。但这通常会导致重复代码或范围问题。

我玩过直接修改插件代码并在最后生成补丁文件的想法。然后可以使用 phing 或一些类似的框架“在构建时”应用这些。

各位大佬是怎么处理这个问题的？是否有任何现有的项目/框架可以使这更容易？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:38:04.103

如果第三方代码是开源的好公民，您可以对其进行分叉、增强、为您的增强编写测试，然后将拉取请求提交回项目的维护者。然后您的增强功能可供所有人使用，包括您自己。这就是开源发生的方式。

如果它是开源的，但不是开源的*好公民*（没有积极的维护者，或者您的增强功能过于具体或出于某种原因不受欢迎），那么过程是相同的，他们只是从不接受您的拉取请求。将来，您可以在您自己的私有存储库中合并在官方存储库中提交的更改，即使它们从未进入项目的官方存储库。

这就是像 git 这样的分布式版本控制系统如此出色的原因。没有人拥有唯一的规范存储库，您的私有黑客版本可以很容易地像正式版本一样托管和处理。

当然，其中大部分假设项目位于 GitHub 上的某个地方。如果不是，那么事情会变得更加棘手。

# android - 活动中的观看次数过多

> ID：13641826
> 
> 赞同：2
> 
> 时间：2012-11-30T08:57:05.393
> 
> 标签：android, memory, android-activity

我有一个包含 200 多个不同视图和布局的活动。有些视图是图像，有些是文本或按钮。视图的可见性会不时发生变化，因此一些 textView 内容，但仅此而已。

当活动失焦并从卡住中删除时，问题出在具有大屏幕的设备上（请参阅[此处](http://developer.android.com/guide/components/activities.html)的“保存活动状态”部分）。不幸的是，用 onRestoreInstanceState() 来恢复它，真是一团糟。

我想知道也许我不应该使用 Views 而是以不同的方式实现它以节省内存？也许只是画布上的位图图像或其他东西？

任何建议技巧，提示将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:00:52.240

如果您在一个活动中有很多视图和布局，我建议您使用片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:18:52.023

你可以使用任意数量的视图作为布局，你说它会随着时间而改变，

```
use setVisibility(View.Visible)
setVisibility(View.GONE)
setVisibility(View.INVISIBLE) 
```

# java - Linux 版本检查 Linux 命令或 Java 代码

> ID：13641827
> 
> 赞同：1
> 
> 时间：2012-11-30T08:57:06.953
> 
> 标签：java, linux, shell, command, version

我想检查当前安装的 RHEL 版本是否高于 RHEL 6。

我发现的只是很多获取 RHEL 版本的 linux 命令。一些检查 /etc 文件夹中的文件，一些检查 RPM。

所以我现在有点困惑，想要一些即使以后操作系统版本发生变化也能工作的刚性。

请给我一个方法。Linux 命令或 Java 代码。什么都会做。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:01:42.877

你试过吗？

```
cat /etc/*-release
cat /etc/redhat-release 
```

或者

```
cat /etc/issue 
```

或者

```
cat /proc/version 
```

甚至与

```
uname -a 
```

[查看 Java 文档，我发现您可以通过System.getProperty()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html)获得有关操作系统的一些基本信息，我想您使用的是 Java 标准版 6.0。但很可能其他版本也应该返回相同的信息。

*   os.name 操作系统名称
*   os.arch 操作系统架构
*   os.version 操作系统版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:03:39.693

操作系统版本：

```
$ cat /etc/redhat-release
Red Hat Enterprise Linux ES release 4 (Nahant Update 5) 
```

内核版本：

```
$ uname -a
Linux islamabad.bdnacn.com 2.6.9-55.ELsmp #1 SMP Fri Apr 20 17:03:35 EDT 2007 i686 i686 i386 GNU/Linux 
```

如果操作系统升级，它们都会改变。

# android - 在 Android 中使用 DataOutputStream 在 POST 正文中发送特殊字符 (ë ä ï)

> ID：13641828
> 
> 赞同：3
> 
> 时间：2012-11-30T08:57:07.203
> 
> 标签：android, json, rest, post

我目前正在开发一个具有大量服务器端通信的 Android 应用程序。昨天我收到一个错误报告，说用户无法发送（简单）特殊字符，例如 ëäï。

我搜索但没有发现任何有用的东西可能重复（没有答案）： [https ://stackoverflow.com/questions/12388974/android-httpurlconnection-post-special-charactes-to-rest-clint-in-android](https://stackoverflow.com/questions/12388974/android-httpurlconnection-post-special-charactes-to-rest-clint-in-android)

我的相关代码：

```
public void execute(String method) {
        HttpsURLConnection urlConnection = null;
        try {
            URL url = new URL(this.url);
            urlConnection = (HttpsURLConnection) url.openConnection();
            urlConnection.setRequestMethod(method);
            urlConnection.setReadTimeout(30 * 1000);
            urlConnection.setDoInput(true);

            if (secure)
                urlConnection.setRequestProperty("Authorization", "Basic " + getCredentials());

            if (body != null) {
                urlConnection.setRequestProperty("Content-Type", "application/json; charset=UTF-8");

                urlConnection.setFixedLengthStreamingMode(body.length());
                urlConnection.setDoOutput(true);
                DataOutputStream dos = new DataOutputStream(urlConnection.getOutputStream());
                dos.writeBytes(body);
                dos.flush();
                dos.close();
            }

            responseCode = urlConnection.getResponseCode();
            message = urlConnection.getResponseMessage();

            InputStream in = null;

            try {
                in = new BufferedInputStream(urlConnection.getInputStream(), 2048);
            } catch (Exception e) {
                in = new BufferedInputStream(urlConnection.getErrorStream(), 2048);
            }

            if (in != null)
                response = convertStreamToString(in);

        } catch (UnknownHostException no_con) {
            responseCode = 101;
        }catch (ConnectException no_con_2){
            responseCode = 101;
        }catch(IOException io_ex){
            if(io_ex.getMessage().contains("No authentication challenges found")){
                responseCode = 401;
            }else
                responseCode = 101;
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (urlConnection != null)
                urlConnection.disconnect();
        }
    } 
```

`body`是一个字符串;-)

希望我们能一起解决这个问题

更新：

试过：

* * *

```
writeUTF() 
```

需要能够理解修改后的 UTF-8 的服务器

* * *

```
byte[] buf = body.getBytes("UTF-8");
dos.write(buf, 0, buf.length); 
```

## 字符串有效，但没有特殊字符

更新：让它与 StringEntity(* string, "UTF-8") 一起工作，然后将结果解析为 byte[] 并用 dos.write(byte[]) 写入它！

--

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:23:56.630

设置 StringEntity 的编码对我有用：

```
StringEntity entity = new StringEntity(body, "UTF-8"); 
```

在这里看到：[https ://stackoverflow.com/a/5819465/570168](https://stackoverflow.com/a/5819465/570168)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:56:07.887

我不完全确定是否为您的情况购买此实用程序 URLEncoder.encode(string, "UTF-8")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-11T04:44:23.033

我在传递带有特殊字符（ñ）的json时在android中遇到了这个问题。在我的 WebApi 方法中，[FromBody] 参数给出了 null，它似乎无法解析 json。

我通过将字节获取为 UTF-8 然后将其写入 DataOutputStream （客户端修复）来使其工作。

```
byte[] b = jsonString.getBytes("UTF-8");
os.write(b, 0, b.length); 
```

# c# - 无闪烁文本框

> ID：13641829
> 
> 赞同：4
> 
> 时间：2012-11-30T08:57:08.440
> 
> 标签：c#, .net, winforms, textbox, flicker

我的表单上有一个简单的 Winforms 多行文本框。每当我调整或移动 TextBox 的大小时，它的内容就会开始疯狂闪烁。这看起来很恶心，甚至可能导致某些用户癫痫发作；-)

有没有办法操纵 TextBox 的重绘过程以摆脱闪烁？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T10:25:16.077

我在[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)编写的 MSDN 论坛上找到了一个可行的[解决方案](https://social.msdn.microsoft.com/Forums/en-US/aaed00ce-4bc9-424e-8c05-c30213171c2c/flickerfree-painting)。以下代码可以添加到表单中，并且也适用于所有子控件：

```
 protected override CreateParams CreateParams {
        get {
            const int WS_EX_COMPOSITED = 0x02000000;
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= WS_EX_COMPOSITED;
            return cp;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:11:17.073

afaik，您无法控制表单上单个控件的调整大小模式...在我看来，您有两个选择：

1.  找出为什么会出现闪烁 - 图形驱动程序问题？
2.  将表单的**ResizeRedraw**属性设置为**false**

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resizeredraw.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resizeredraw.aspx)

# java - PreparedStatement.executeBatch() 之后的 getGeneratedKeys()

> ID：13641832
> 
> 赞同：12
> 
> 时间：2012-11-30T08:57:17.270
> 
> 标签：java, sql-server, jdbc, prepared-statement

我想`INSERT`使用几行`PreparedStatement`：

```
ps = con.prepareStatement(query,PreparedStatement.RETURN_GENERATED_KEYS);

for(Element e:listOfElements){
    ps.setString(1,this.col_val_1);
    ps.setString(2,this.col_val_2);
    ps.setInt(3,this.col_val_3);

    ps.addBatch();
}

ps.executeBatch();
ResultSet rs = ps.getGeneratedKeys(); 
```

此时，当我希望为每个生成 PK 时`INSERT`，我得到了这个`SQLServerException`：

```
com.microsoft.sqlserver.jdbc.SQLServerException: The statement must be executed before any results can be obtained. 
```

我希望为每个执行的插入获得一个包含一行的 ResultSet，这样我就可以生成每个 PK。

我期待错了吗？难道我做错了什么？可以使用批处理执行以不同的方式完成吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T09:42:51.823

支持`getGeneratedKeys()`批量执行是根据 JDBC 规范定义的实现。SQL Server 驱动程序很可能不支持批处理执行。

我试图在 Microsoft 网站上查找明确的声明，但找不到。MSDN 上的这个旧（2007 年）论坛帖子确实声明它不受支持：[http ://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/6cbf5eea-e5b9-4519-8e86-f4b65ce3f8e1](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/6cbf5eea-e5b9-4519-8e86-f4b65ce3f8e1)

# java - 使用递归（java）查找给定数字是否是给定集合（允许重复）的总和

> ID：13641835
> 
> 赞同：4
> 
> 时间：2012-11-30T08:57:23.463
> 
> 标签：java, recursion, sum, subset, stack-overflow

我试图找出给定数字是否是给定集合的总和，例如：数字`12`是集合的总和`s{3,2}`，因为：

```
3+3+3+3=12
or
2+2+2+2+2+2=12 
```

但`14`不是总和，`s{8,10}`因为您无法`14`使用`sums of s`. 我正在尝试仅使用递归而不使用循环在 java 中编写代码。这是代码：

```
 public static boolean isSumOf(int[]s,int n)
   {
     return isSumOf(s,n,0,0,0);
   }

   private static boolean isSumOf(int[]s,int n,int i,int sum,int m)
   {
       boolean with=false;
       boolean without=false;

       if(i==s.length)
        return false;

       if(sum==n)   
        return true;

       if(m<=n)
        {
            with=isSumOf(s,n,i,sum+s[i]*m,m++);
            without=isSumOf(s,n,i,sum,m++);            
        }
       else
        {
            i=i++;
            m=0;
            isSumOf(s,n,i,sum,m);
        }

       return (with||without); 

   } 
```

代码编译正常，但是当我对其进行测试时出现 stackOverFlowError 。这是测试的代码：

```
 public static void main(String[]args)
  {  
      int[]a={18,10,6};
      int x=18+10+6;
      System.out.println(Ex14.isSumOf(a,x));
  } 
```

请帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:02:43.467

这看起来很糟糕：

```
with=isSumOf(s,n,i,sum+s[i]*m,m++);
without=isSumOf(s,n,i,sum,m++); 
```

利用

```
with=isSumOf(s,n,i,sum+s[i]*m,++m);
without=isSumOf(s,n,i,sum,++m); 
```

如果你想`m`在被调用的方法中有一个更高的值。

除此之外，由于变量命名不佳，我不知道代码做了什么。

还有这一行：

```
i=i++; 
```

没有效果，如果要增加，请用以下之一替换它`i`：

```
i++;
i += 1;
i = i + 1;
i = ++i; 
```

如果你不使用调用的结果

```
isSumOf(s,n,i,sum,m); 
```

调用它是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:13:32.933

这似乎有效 - 我没有看到任何迹象表明您不想要现成的答案（我相信如果这是家庭作业，您会说明）所以这里是：

```
public class IsSumOf {
  // set - The numbers allowed.
  // total - The number I want to achieve.
  // i - Where we are in the set.
  // sum - List of numbers used so far.
  // n - The number we just subtracted (or 0 if none).
  // Note that sum and n are only used for the printing of the route.
  private static boolean isSumOf(int[] set, int total, int i, LinkedList<Integer> sum, int n) {
    // Found the set if we are now at 0.
    boolean is = (total == 0);
    // Look no further if no more to try.
    if ( total > 0 ) {
      // Look no further if we've exhausted the array.
      if ( i < set.length ) {
        // Try or consume this number in the set (or not) and try again.
        is = isSumOf(set, total - set[i], i, sum, set[i] ) 
                || isSumOf(set, total - set[i], i+1, sum, set[i] ) 
                || isSumOf(set, total, i+1, sum, 0 ) ;
      }
    }
    // Keep track of the route.
    if ( is && sum != null && n != 0) {
      // Add backwards so we get the order right when printed.
      sum.addFirst(n);
    }
    return is;
  }

  // Jump-off point.
  public static boolean isSumOf(int[] set, int total, LinkedList<Integer> sum) {
    // Empty the list.
    sum.clear();
    // Start at 0 in the array.
    return isSumOf(set, total, 0, sum, 0);
  }

  public static void main(String[] args) {
    LinkedList<Integer> sum = new LinkedList<Integer>();
    int[] a = {18, 10, 6};
    int x = 18 + 10 + 6;
    System.out.println(Arrays.toString(a)+" ("+x+") = "+(isSumOf(a, x, sum)?Arrays.toString(sum.toArray()):"-"));
    x += 1;
    System.out.println(Arrays.toString(a)+" ("+x+") = "+(isSumOf(a, x, sum)?Arrays.toString(sum.toArray()):"-"));
    int[] b = {3,2};
    x = 12;
    System.out.println(Arrays.toString(b)+" ("+x+") = "+(isSumOf(b, x, sum)?Arrays.toString(sum.toArray()):"-"));
    x += 1;
    System.out.println(Arrays.toString(b)+" ("+x+") = "+(isSumOf(b, x, sum)?Arrays.toString(sum.toArray()):"-"));
    int[] c = {2,3};
    x = 12;
    System.out.println(Arrays.toString(c)+" ("+x+") = "+(isSumOf(c, x, sum)?Arrays.toString(sum.toArray()):"-"));
    x += 1;
    System.out.println(Arrays.toString(c)+" ("+x+") = "+(isSumOf(c, x, sum)?Arrays.toString(sum.toArray()):"-"));
  }
} 
```

编辑打印所走的路线。

印刷：

```
[18, 10, 6] (34) = [18, 10, 6]
[18, 10, 6] (35) = -
[3, 2] (12) = [3, 3, 3, 3]
[3, 2] (13) = [3, 3, 3, 2, 2]
[2, 3] (12) = [2, 2, 2, 2, 2, 2]
[2, 3] (13) = [2, 2, 2, 2, 2, 3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-05T16:33:39.537

我会使用稍微不同的策略

```
public static void main(String[] args)
{
    int[] s = { 4, 5 };
    System.out.println(isSumOf(s, 13)); // true
    System.out.println();

    int[] s1 = { 4, 9, 3 };
    System.out.println(isSumOf(s1, 15)); // true
    System.out.println();

    int[] s2 = { 4, 9, 3 };
    System.out.println(isSumOf(s2, 5)); // false
    System.out.println();

    int[] s3 = { 3, 2 };
    System.out.println(isSumOf(s3, 12)); // true
    System.out.println();

    int[] s4 = { 8, 10 };
    System.out.println(isSumOf(s4, 14)); // false
    System.out.println();
}

public static boolean isSumOf(int[] s, int n)
{
    return isSumOf(s, n, 0, 0, "");
}

private static boolean isSumOf(int[] s, int n, int i, int sum, String builder)
{
    if (sum == n) // if we found a subset
    {
        System.out.println(builder);
        return true;
    }

    if (i == s.length || sum > n) // 1\. boundaries checks 2\. if subset is greater then n
        return false;

    boolean with = isSumOf(s, n, i, sum + s[i], builder + s[i] + " "); // try to sum "s[i]", note that we can sum the
                                                                        // same "s[i]" multiple times

    boolean without = isSumOf(s, n, i + 1, sum, builder); // try to skip "s[i]" and instead to sum "s[i+1]"

    return with || without;
} 
```

# data-structures - AVI 文件中的 MP3 帧

> ID：13641837
> 
> 赞同：1
> 
> 时间：2012-11-30T08:57:25.420
> 
> 标签：data-structures, mp3, avi

我已阅读以下文档以了解 AVI 文件的结构：
[http ://www.alexander-noe.com/video/documentation/avi.pdf](http://www.alexander-noe.com/video/documentation/avi.pdf)

AVI 文件是流的容器。
一个 AVI 文件可以包含一个 MP3 音频流。
以下是我如何理解 AVI 文件中 MP3 音频流的数据结构：

![在此处输入图像描述](../Images/73ff489bc8b386563457affd45d48bc7.png)

我还阅读了以下网页以了解 MP3 文件的结构：
[http ://en.wikipedia.org/wiki/MP3#File_structure](http://en.wikipedia.org/wiki/MP3#File_structure)

所以一个 MP3 文件是一个 MP3 帧序列。
每个 MP3 帧由标题和数据组成。

要从 AVI 文件中的 MP3 流创建 MP3 文件，我想 MP3 标头可以使用 MPEGLAYER3FORMAT 结构中包含的数据构建。
但我想知道 1 个音频块结构是否与 1 个 MP3 帧的数据匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T02:17:01.377

旧帖子，但对于其他编码人员来说，在不阅读 AVI 或 MP3 圣经的情况下获得特定多媒体格式的一个非常好的方法是玩 ffmpeg。

1.  从 10 秒内选择一个 MP3 文件。
2.  在您要使用的编解码器中准确选择一个视频。
3.  使用以下命令混合它们：

    ```
    ffmpeg -i mysound.mp3 -i myvideo.avi -acodec copy -vcodec copy myResult.avi 
    ```

...然后观察如何使用十六进制编辑器将 mp3 放入 AVI 文件中。

您会注意到声音在每个视频帧之后被放置在几个块中，并且在 AVI 的末尾为图像帧和音频样本建立了一个索引。一旦您对这个特定上下文中的索引概念感到满意（这个特定的编解码器与 MP3 混合），那么您可以通过复制这个模式来构建您的文件。

# breeze - 对 Breeze 有任何 Grid 建议吗？

> ID：13641842
> 
> 赞同：9
> 
> 时间：2012-11-30T08:57:36.690
> 
> 标签：breeze

经过长时间的研究，我们决定为我们的项目使用 Web API、EF + ASP.NET MVC 4 + Knockout + Breeze。但是我们找不到 Breeze 的任何工作网格。我们希望将微风实体绑定到网格，并能够在某些情况下在网格上编辑数据。

我们几乎每天都尝试新的网格，但仍然没有运气，例如，我们尝试了 jqxGrid（来自 jqWidgets），但它在绑定数据时抛出异常（可能是因为实体之间的循环引用）。如果我们不使用微风实体并选择匿名类型，它可以正常工作。

你有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:58:29.100

我们决定使用 KoGrid，经过一些研究，我们可以做我们需要的一切。谢谢大家的帮助。您可以在下面找到我们的测试代码。祝你今天过得愉快。

```
 <!--3rd party library scripts -->
<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="~/Scripts/json2.js"></script>
<script src="~/Scripts/es5-sham.min.js"></script>
<script src="~/Scripts/es5-shim.min.js"></script>
<script src="~/Scripts/knockout-2.1.0.js"></script>
<script src="~/Scripts/q.js"></script>
<script src="~/Scripts/jquery.json-2.3.js"></script>
<script src="~/Scripts/KoGrid.debug.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        var GridViewModel = function () {
            var self = this;
            self.products = ko.observableArray();
            self.currentPage = ko.observable(1);
            self.pageSize = ko.observable(10);
            self.totalServerItems = ko.observable(80);
            self.selectedItem = ko.observable();
            self.sortInfo = ko.observable();
            self.filterInfo = ko.observable();
            self.updateItem = function () { };

            var entityModel = window.breeze.entityModel;
            var entityManager = new entityModel.EntityManager('api/Service');
            var metadataStore = entityManager.metadataStore;
            metadataStore.importMetadata($.toJSON(metadata));
            var op = window.breeze.FilterQueryOp;

            this.getPagedDataAsync = function (pageSize, page, filterInfo, sortInfo) {
                var columnName = "ProductID";
                if (sortInfo != null)
                    columnName = sortInfo.column.field + " " + sortInfo.direction;

                var query = entityModel.EntityQuery.from("Products").orderBy(columnName).skip((page - 1) * pageSize).take(pageSize);
                for (var propertyName in filterInfo) {
                    query = query.where(propertyName, op.StartsWith, filterInfo[propertyName]);
                }

                entityManager.executeQuery(query).then(function (data) {
                    self.products.removeAll();
                    var items = data.results;
                    items.forEach(function (item) {
                        self.products.push(item);
                    });
                });                    
            };

            this.dataChangedTrigger = ko.computed(function () {
                var page = self.currentPage(),
                    pageSize = self.pageSize(),
                    filterInfo = self.filterInfo(),
                    sortInfo = self.sortInfo();

                if (page && pageSize) {
                    self.getPagedDataAsync(pageSize, page, filterInfo, sortInfo);
                }

                return null;
            });
        }

        var model = new GridViewModel();
        ko.applyBindings(model);
        model.getPagedDataAsync(10, 1, model.filterInfo(), model.sortInfo());
    });
</script>

<div id="sandBox" class="example" style="height: 600px; width:600px; max-width: 700px;" 
    data-bind="koGrid: { data: products,
                        columnDefs: [{ field: 'ProductName', width: 200 },
                                     { field: 'QuantityPerUnit', width: 200 },
                                     { field: 'UnitPrice', width: 150 }],
                         autogenerateColumns: false,
                         isMultiSelect: false,
                         enablePaging: true,
                         useExternalFiltering: true,
                         useExternalSorting: true,
                         filterInfo: filterInfo,
                         sortInfo: sortInfo,
                         pageSize: pageSize,
                         pageSizes: [10, 20, 50],
                         currentPage: currentPage,
                         totalServerItems: totalServerItems,
                         selectedItem: selectedItem }">
</div>

<!-- Application scripts -->
<script src="~/Scripts/breeze.js"></script>
<script src="~/Scripts/app/metadata.js"></script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T10:34:55.590

我也在寻找网格有一段时间了。我检查了 jQGrid、koGrid、slickGrid 等等。我现在正在使用带有淘汰赛扩展的 DataTables，可以在这里找到：http: [//datatables.net/forums/discussion/4969/knockoutjs/p1](http://datatables.net/forums/discussion/4969/knockoutjs/p1)

它可以使用引导程序进行样式设置，并且可以使用模板等进行高度定制。你必须在微风和数据表之间做一些链接，但它对我来说效果很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T14:21:46.397

使用 KO 很容易拥有可编辑的网格。

这是一个概念证明：http: [//jsfiddle.net/vtortola/wx8cL/](http://jsfiddle.net/vtortola/wx8cL/)

（请不要介意 CSS :D）

基本上，您可以有一个用于查看的行模板和一个用于编辑的行模板：

```
<script id="inner-row-tmpl" type="text/html">
        <td data-bind="text: par1"></td>
        <td data-bind="text: par2"></td>
        <td data-bind="text: par3"></td>
        <td><button class="edit">Edit</button></td>
</script>

<script id="row-tmpl" type="text/html">
    <tr data-bind="template: { name: 'inner-row-tmpl'}">
    </tr>
</script>

<script id="editable-inner-row-tmpl" type="text/html">
        <td class="editable-row" data-bind="text: par1"></td>
        <td><input type="text" data-bind="value: par2"/></td>
        <td><input type="text" data-bind="value: par3"/></td>
</script> 
```

干杯。

# hibernate - Spring MVC with Hibernate 使用 @-configuration 方法

> ID：13641843
> 
> 赞同：0
> 
> 时间：2012-11-30T08:57:38.513
> 
> 标签：hibernate, spring-mvc

我一直盯着 Maven、Tomcat、Spring MVC 和 Hibernate 做示例。我选择@-configuration 方法。与我的项目一起存档，您可以[在此处下载](http://dl.dropbox.com/u/29572172/mvc_spring.zip)。

但是，当我在配置类中声明所有必需的 bean 并单击主页上的简单链接时，控制台中显示了许多错误，例如：

```
ClassNotFoundException: org.springframework.orm.hibernate4.LocalSessionFactoryBean 
```

请给我建议我该如何解决这个问题。

这是我的配置类：

```
package com.onet.init;

import java.util.Properties;

import javax.annotation.Resource;
import javax.sql.DataSource;

import org.apache.commons.dbcp.BasicDataSource;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;
import org.springframework.core.env.Environment;
import org.springframework.orm.hibernate4.HibernateTransactionManager;
import org.springframework.orm.hibernate4.LocalSessionFactoryBean;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.view.JstlView;
import org.springframework.web.servlet.view.UrlBasedViewResolver;

@Configuration
@ComponentScan("com.onet")
@EnableWebMvc
@PropertySource("classpath:application.properties")
public class BaseConfig {

    private static final String PROPERTY_NAME_DATABASE_DRIVER = "db.driver";
    private static final String PROPERTY_NAME_DATABASE_PASSWORD = "db.password";
    private static final String PROPERTY_NAME_DATABASE_URL = "db.url";
    private static final String PROPERTY_NAME_DATABASE_USERNAME = "db.username";

    private static final String PROPERTY_NAME_HIBERNATE_DIALECT = "hibernate.dialect";
    private static final String PROPERTY_NAME_HIBERNATE_FORMAT_SQL = "hibernate.format_sql";
    private static final String PROPERTY_NAME_HIBERNATE_NAMING_STRATEGY = "hibernate.ejb.naming_strategy";
    private static final String PROPERTY_NAME_HIBERNATE_SHOW_SQL = "hibernate.show_sql";
    private static final String PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN = "entitymanager.packages.to.scan";

    @Resource
    private Environment env;

    @Bean
    public DataSource dataSource() {
        BasicDataSource ds = new BasicDataSource();

        ds.setDriverClassName(env.getRequiredProperty(PROPERTY_NAME_DATABASE_DRIVER));
        ds.setUrl(env.getRequiredProperty(PROPERTY_NAME_DATABASE_URL));
        ds.setUsername(env.getRequiredProperty(PROPERTY_NAME_DATABASE_USERNAME));
        ds.setPassword(env.getRequiredProperty(PROPERTY_NAME_DATABASE_PASSWORD));

        return ds;
    }

    @Bean
    public LocalSessionFactoryBean sessionFactory() {       
        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();

        sessionFactory.setDataSource(dataSource());
        sessionFactory.setPackagesToScan(env.getRequiredProperty(PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN));
        sessionFactory.setHibernateProperties(hibProperties());

        return sessionFactory;
    }

    private Properties hibProperties() {
        Properties properties = new Properties();
        properties.put(PROPERTY_NAME_HIBERNATE_DIALECT, env.getRequiredProperty(PROPERTY_NAME_HIBERNATE_DIALECT));
        properties.put(PROPERTY_NAME_HIBERNATE_SHOW_SQL, env.getRequiredProperty(PROPERTY_NAME_HIBERNATE_SHOW_SQL));
        properties.put(PROPERTY_NAME_HIBERNATE_FORMAT_SQL, env.getRequiredProperty(PROPERTY_NAME_HIBERNATE_FORMAT_SQL));
        properties.put(PROPERTY_NAME_HIBERNATE_NAMING_STRATEGY, env.getRequiredProperty(PROPERTY_NAME_HIBERNATE_NAMING_STRATEGY));
        return properties;  
    }

    @Bean
    public HibernateTransactionManager transactionManager() {
        HibernateTransactionManager transactionManager = new HibernateTransactionManager();
        transactionManager.setSessionFactory(sessionFactory().getObject());
        return transactionManager;
    }

    @Bean
    public UrlBasedViewResolver setupViewResolver() {
        UrlBasedViewResolver resolver = new UrlBasedViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        resolver.setViewClass(JstlView.class);
        return resolver;
    }

} 
```

这是我实现 WebApplicationInitializer 的类：

```
package com.onet.init;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration.Dynamic;

import org.springframework.web.WebApplicationInitializer;
import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
import org.springframework.web.servlet.DispatcherServlet;

public class Initializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext servletContext) throws ServletException {
        AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();
        ctx.register(BaseConfig.class);

        Dynamic servlet = servletContext.addServlet("dispatcher", new DispatcherServlet(ctx));
        servlet.addMapping("*.html");
        servlet.setLoadOnStartup(1);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:05:31.927

ClassNotFoundException 异常意味着您在运行时没有一些必需的类/库。

如果您使用任何 IDE，请搜索 LocalSessionFactoryBean 类的位置。

当你找到这个类的库（我想是spring-orm）时，只需将它放到类路径中就可以了。

# javascript - 需要使用 jquery 为两组不同的复选框设置单独的单击事件。

> ID：13641844
> 
> 赞同：2
> 
> 时间：2012-11-30T08:57:42.040
> 
> 标签：javascript, jquery, checkbox

我有两组复选框。一个用于类别，一个用于产品。

对于**类别**我有这个

```
<div id="category">
    <input type="checkbox" id="cateogry1">
    <input type="checkbox" id="cateogry2">
    <input type="checkbox" id="cateogry3">
</div> 
```

对于**产品**我有这个

```
<div id="product">
    <input type="checkbox" id="product1">
    <input type="checkbox" id="product2">
    <input type="checkbox" id="product3">
</div> 
```

我最初所做的是遍历每个复选框并为所有这样的人注册一个点击事件

```
$("input:checkbox").each(function(){
     var localCheckboxId = '#'+$(this).attr('id');
     $(localCheckboxId).click(function() { 
     //did something
     });
}); 
```

现在我想分离类别和产品的点击事件。

如何使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T08:59:56.873

使用包含`div`ID：

产品：

```
$("#product input:checkbox").click(... 
```

类别

```
$("#category input:checkbox").click(... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T08:59:49.987

您可以像这样使用 JQuery 选择器：

```
$("#category input").click(categoryFunction); 
```

像这样：

```
$("#product input").click(productFunction); 
```

发生的事情是 select first 将选择限制为基于 each 的 ID `div`。所以这`input`部分的意思是“只输入属于父ID的后代”

因为您只有复选框输入元素，所以无需指定类型。但是，如果您确实使用了更多输入类型，那么您可以添加额外的`:checkbox`部分以进一步限制选择器：

```
$("#category input:checkbox").click(categoryFunction); 
```

[这是一个工作示例](http://jsfiddle.net/baDRK/1/)，它甚至显示了如何获取`id`被单击的复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:00:39.943

您可以保留循环，但在`input`parent 上添加测试：

```
if($(this).parent().attr('id') === "category") { ... }
else { ... } 
```

# gwt - GWT 2.5.0 编译器异常

> ID：13641849
> 
> 赞同：5
> 
> 时间：2012-11-30T08:57:49.653
> 
> 标签：gwt, compiler-construction

我们的团队尝试从 GWT 2.4.0 升级到 2.5.0，但现在我们面临问题 - 编译器抛出异常。这是编译器日志：

> 绑定：user.agent=safari 绑定：compiler.useSourceMaps=true 绑定：locale=en 编译模块 app.m8.web.AGM 验证单元：在第一次通过时忽略 3 个编译错误的单元。编译时使用 -strict 或将 -logLevel 设置为 TRACE 或 DEBUG 以查看所有错误。[错误] 发生内部编译器异常 com.google.gwt.dev.jjs.InternalCompilerException: 访问期间出现意外错误。在 com.google.gwt.dev.jjs.ast.JVisitor.translateException(JVisitor.java:109) 在 com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:276) 在 com.google .gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:265) 在 com.google.gwt.dev.jjs.ast.JVisitor.accept(JVisitor.java:116) 在 com.google.gwt.dev .jjs.ast.JReturnStatement.traverse(JReturnStatement.java:39) 在 com.google.gwt.dev.jjs.ast。361) 在 com.google.gwt.dev.jjs.ast.JModVisitor.accept(JModVisitor.java:273) ... 还有 31 个 [错误] 在 Contact_FieldSerializer.java(65): com.google.gwt.dev.jjs Contact_FieldSerializer.java(65) 处的 .ast.JNewInstance [错误]：Contact_FieldSerializer.java(64) 处的 com.google.gwt.dev.jjs.ast.JReturnStatement [错误]：com.google.gwt.dev.jjs.ast Contact_FieldSerializer.java(64) 处的 .JBlock [错误]: com.google.gwt.dev.jjs.ast.JMethodBody [错误] Contact_FieldSerializer.java(64): public static Contact instantiate(SerializationStreamReader streamReader); com.google.gwt.dev.jjs.ast.JMethod [错误] 编译器返回 false Contact_FieldSerializer.java(65) 处还有 31 个 [错误]: com.google.gwt.dev.jjs.ast.JNewInstance [错误] 在 Contact_FieldSerializer.java(65): com.google.gwt.dev.jjs.ast.JReturnStatement [错误] 在 Contact_FieldSerializer.java(64): com.google.gwt.dev.jjs.ast.JBlock [错误] 在 Contact_FieldSerializer.java(64): com.google.gwt.dev.jjs.ast.JMethodBody [错误] 在 Contact_FieldSerializer.java(64): public static Contact instantiate(SerializationStreamReader streamReader); com.google.gwt.dev.jjs.ast.JMethod [错误] 编译器返回 false Contact_FieldSerializer.java(65) 处还有 31 个 [错误]: com.google.gwt.dev.jjs.ast.JNewInstance [错误] 在 Contact_FieldSerializer.java(65): com.google.gwt.dev.jjs.ast.JReturnStatement [错误] 在 Contact_FieldSerializer.java(64): com.google.gwt.dev.jjs.ast.JBlock [错误] 在 Contact_FieldSerializer.java(64): com.google.gwt.dev.jjs.ast.JMethodBody [错误] 在 Contact_FieldSerializer.java(64): public static Contact instantiate(SerializationStreamReader streamReader); com.google.gwt.dev.jjs.ast.JMethod [错误] 编译器返回 false Contact_FieldSerializer.java(64) 处的 com.google.gwt.dev.jjs.ast.JBlock [错误]：Contact_FieldSerializer.java(64) 处的 com.google.gwt.dev.jjs.ast.JMethodBody [错误]：公共静态联系实例化（SerializationStreamReader streamReader）；com.google.gwt.dev.jjs.ast.JMethod [错误] 编译器返回 false Contact_FieldSerializer.java(64) 处的 com.google.gwt.dev.jjs.ast.JBlock [错误]：Contact_FieldSerializer.java(64) 处的 com.google.gwt.dev.jjs.ast.JMethodBody [错误]：公共静态联系实例化（SerializationStreamReader streamReader）；com.google.gwt.dev.jjs.ast.JMethod [错误] 编译器返回 false

有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-05T14:33:57.667

删除**中的文件

> gwt-unitCache

** 存在于您的项目文件夹中

# c++ - 如何使用已安装的 firefox 或 chrome 在 C++ 应用程序中呈现 html

> ID：13641850
> 
> 赞同：1
> 
> 时间：2012-11-30T08:57:53.633
> 
> 标签：c++, windows, firefox, google-chrome

我们需要在 mfc 窗口的 webview 中呈现本地 html 文件。目前我们已经用 IE 实现了这一点，现在我们需要用 firefox 和 chrome 做同样的事情。

一些选项建议使用 webkit 或 gecko sdk，但我们更愿意在 Windows 机器上使用这些浏览器的已安装库和二进制文件。

如果您可以向我指出一些文档或一些示例代码来实现这一点，那将是非常有帮助的。

感谢您的答复。-阿迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:19:49.400

IE 提供了一个 COM 组件，但 AFAIK 没有其他浏览器提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:46:52.627

Qt 提供QtWebView 类，它是WebKit 的web 视图的封装，并且是跨平台的。或者使用 MFC/WTL 的 CHtmlView，但是 IE 太烂了。

# php - 对错误使用 pow(2) var，转换为可读代码

> ID：13641855
> 
> 赞同：0
> 
> 时间：2012-11-30T08:58:21.637
> 
> 标签：php

我知道这是可能的，但它正在让我陷入困境。

想象一下有一组代码及其描述。

```
array(
0 => "Success",
1 => "File Not Found",
2 => "Could not create file",
4 => "Directory not found",
8 => "Directory could not be created",
16 => "Disk damaged"
) 
```

（不要介意示例中的错误代码，我只是编造的。）

收到错误代码 1 时很容易解决。现在想象得到一个错误代码“7”，我需要它返回该错误代码中的所有选项。所以 7 由“4 + 2 + 1”组成。

希望我的问题很清楚。这几乎就像在 php.ini 中放置一个错误代码级别。它将错误累积在一起的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:09:41.297

有许多不同的方法可以做到这一点。这是一个将数字转换为二进制并迭代数字的方法：

```
function number_to_sum_of_powers($number) {
    $binary = strrev(decbin($number));
    $power = 1;
    $summands = array();
    foreach(str_split($binary) as $digit) {
        if($digit === '1') {
            $summands[] = $power;
        }
        $power *= 2;
    }
    return $summands;
} 
```

这是用 调用它时的结果`7`：

```
array(3) {
  [0]=>
  int(1)
  [1]=>
  int(2)
  [2]=>
  int(4)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:21:25.563

如果你想通过 2 的幂来做到这一点，即基本的数学方式，在 php

```
 <?php 
        $array = array(
        0 => "Success",
        1 => "File Not Found",
        2 => "Could not create file",
        4 => "Directory not found",
        8 => "Directory could not be created",
        16 => "Disk damaged"
        );

        $total_code = 7; 
        $error_code = 1; 

        while($total_code >= 1){
             if($total_code % 2 == 1){
                  echo $array[$error_code]."<br>";
              }
              $total_code /= 2;
              $error_code *= 2;
       }
   ?> 
```

在 Java 中

```
 HashMap<Integer,String> errors = new HashMap<Integer, String>();

    errors.put(0, "Success");
    errors.put(1, "File Not Found");
    errors.put(2, "Could not create file");
    errors.put(4, "Directory not found");
    errors.put(8, "Directory could not be created");
    errors.put(16, "Disk damaged");

    int total_code = 7;
    int error_code = 1;

    while(total_code >= 1) {
        if(total_code % 2 == 1)
            System.out.println(errors.get(error_code));
        total_code /= 2;
        error_code *= 2;
    } 
```

# git - Git 在提交消息中说“重写”或“重命名”是什么意思？

> ID：13641857
> 
> 赞同：54
> 
> 时间：2012-11-30T08:58:34.270
> 
> 标签：git, git-commit

运行 a`git commit`会导致以下输出：

```
[manu@host] git: git commit -a -m "StreamIt instrumentation"
[master 263410f] StreamIt instrumentation
62 files changed, 6117 insertions(+), 5748 deletions(-)
rewrite Code/ALCHEMY/streamit-src-2.1.1/src/at/dms/kjc/cluster/ClusterBackend.java (91%)
rewrite Code/ALCHEMY/streamit-src-2.1.1/src/at/dms/kjc/cluster/ClusterCodeGenerator.java (95%)
rewrite Code/ALCHEMY/streamit-src-2.1.1/src/at/dms/kjc/cluster/code/FlatIRToCluster.java (94%)
rewrite Code/ALCHEMY/streamit-src-2.1.1/src/at/dms/kjc/common/ToCCommon.java (92%)
rewrite Code/ALCHEMY/streamit-src-2.1.1/src/at/dms/kjc/flatgraph/ScheduledStaticStreamGraph.java (93%)
rename Code/ALCHEMY/streamit-src-2.1.1/src/at/dms/kjc/sir/lowering/fission/{StatelessDuplicate.java => HorizontalFission.java} (98%)
rewrite Code/ALCHEMY/streamit-src-2.1.1/src/at/dms/kjc/sir/lowering/partition/dynamicprog/DynamicProgPartitioner.java (93%) 
```

*   当 git 将文件报告为“重写”时，它是什么意思？
*   相关百分比的含义是什么？
*   为什么在此提交中更改的 62 行中只有百分比与这些行相关？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-01T00:29:23.910

Git 使用启发式方法来确定更改是否是文件的重命名或复制，以及是否是文件的“重写”。粗略地说，如果新旧版本的差异大于新版本本身，那就是“重写”。

这是针对 git 更改源文件的原始用例进行调整的，通常是进行本地化更改：因为它基于逐行差异，所以像重新缩进源文件这样的事情可以触发它。此外，由于它是即时确定的，因此“-b”和“-w”等差异选项可以改变对更改是否是重写（或复制，或重命名）的评估。

百分比是 git 的“相异性指数”（与重命名或复制的“相似性指数”百分比相反）。可能类似于文件中已更改的行的百分比。

# android - 如何在安卓应用中使用 Twitter4J

> ID：13641863
> 
> 赞同：0
> 
> 时间：2012-11-30T08:59:01.860
> 
> 标签：android, twitter4j

我在我的 java 应用程序中使用 Twitter4j。工作正常并且能够获得推文。我在我的 android 应用程序中使用相同的格式和代码。我将身份验证密钥保存在包文件夹内的属性文件和资产文件夹中。但我收到以下错误。

```
11-30 13:35:46.487: W/System.err(737): java.lang.IllegalStateException: Authentication credentials are missing. See http://twitter4j.org/configuration.html for the detail.
11-30 13:35:46.507: W/System.err(737):  at twitter4j.TwitterBaseImpl.ensureAuthorizationEnabled(TwitterBaseImpl.java:205)
11-30 13:35:46.527: W/System.err(737):  at twitter4j.TwitterImpl.getUserTimeline(TwitterImpl.java:219)
11-30 13:35:46.537: W/System.err(737):  at com.example.MyAndApp.FullScreen.GetTweets(FullScreen.java:359)
11-30 13:35:46.548: W/System.err(737):  at com.example.MyAndApp.FullScreen.access$2(FullScreen.java:352)
11-30 13:35:46.560: W/System.err(737):  at com.example.MyAndApp.FullScreen$DisplayImage.onPostExecute(FullScreen.java:346)
11-30 13:35:46.567: W/System.err(737):  at com.example.MyAndApp.FullScreen$DisplayImage.onPostExecute(FullScreen.java:1)
11-30 13:35:46.578: W/System.err(737):  at android.os.AsyncTask.finish(AsyncTask.java:417)
11-30 13:35:46.601: W/System.err(737):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
11-30 13:35:46.607: W/System.err(737):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
11-30 13:35:46.619: W/System.err(737):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-30 13:35:46.637: W/System.err(737):  at android.os.Looper.loop(Looper.java:123)
11-30 13:35:46.647: W/System.err(737):  at android.app.ActivityThread.main(ActivityThread.java:3647)
11-30 13:35:46.658: W/System.err(737):  at java.lang.reflect.Method.invokeNative(Native Method)
11-30 13:35:46.667: W/System.err(737):  at java.lang.reflect.Method.invoke(Method.java:507)
11-30 13:35:46.677: W/System.err(737):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-30 13:35:46.697: W/System.err(737):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
```

以下是我在我的 aysnctask 中使用后执行方法的代码。

```
Twitter twitter = new TwitterFactory().getInstance();
        List<Status> tweets;
        Paging paging = new Paging();
        paging.setCount(1);
        tweets = twitter.getUserTimeline(paging);

        for (Status tweet : tweets) 
        {
            TweetMsg = tweet.getText();
        } 
```

我需要在 Manifest 文件中添加任何内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-29T15:40:06.717

上面的链接使用 REV 1 oauth，它不再有效。我编写了一个小型 Eclipse 项目，该项目使用 REV 1.1 授权 twitter：

[推特时间.zip](http://www.hexatron.com/soft/TwitterTime.zip)

# vba - 如何使 VBA Excel 程序适用于其他 Excel 文档？

> ID：13641864
> 
> 赞同：2
> 
> 时间：2012-11-30T08:59:01.930
> 
> 标签：vba, excel, filechooser

我对 VBA Excel 很陌生，我只知道这个报告格式化任务需要的东西。我的代码几乎完成了，但我想知道的是，我怎样才能让我的程序在多个文档上工作？

我的意思是，我想通过我的程序选择一个 excel 文件，然后我想开始报告格式化的过程。然后也许用户需要格式化另一个文档，我希望我的程序也能够格式化该文档。我怎样才能做到这一点？

提前致谢

帖木儿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:45:07.323

我目前这样做的方式是创建一个 Excel 加载项。为此，请将您的宏和表单放入一个新的空 Excel 工作簿并另存为 .xlam 文档。

要使用宏，请打开 Excel 文件和加载项。要自动打开加载项，请将其保存到“C:\Program Files\Microsoft Office\Office12\XLSTART”（Vista）。

您甚至可以使用 Microsoft Office 的自定义 UI 编辑器为您的加载项创建自定义功能区[http://msdn.microsoft.com/en-us/library/office/ee691832](http://msdn.microsoft.com/en-us/library/office/ee691832(v=office.14).aspx) (v=office.14).aspx （下载链接在说明的末尾）

# awk - 与 split 相反的 awk

> ID：13641865
> 
> 赞同：11
> 
> 时间：2012-11-30T08:59:14.450
> 
> 标签：awk

`split()`in的对立面是`awk`什么？想象一下，我有数组包含字符/整数。

我试过的：

```
color = "#FFFF00";
printf("color original: %s\n", color);
split(color, chars, "");
joined = "";
for (i=1; i <= length(chars); i++) {
    joined = joined + chars[i];
}
printf("color joined: %s\n", joined); 
```

但是输出是：

```
color original: #FFFF00
color joined: 0 
```

这当然是不正确的。

**更新：** 很酷，最终得到以下代码（灵感来自答案中的连接函数）：

```
color = "#FFFF00";
printf("color original: %s\n", color);
split(color, chars, "");
joined = "";
for (i=1; i <= length(chars); i++) {
    joined = joined "" chars[i];
}
printf("color joined: %s\n", joined); 
```

诀窍是在加入事物时不要使用`+`符号

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-30T15:57:00.930

这是一个不依赖 gawk 或不知道数组长度的解决方案，如果您愿意，可以在每个数组元素之间放置一个分隔符（在这种情况下为空格）字符串：

```
color = "#FFFF00"
printf "color original: %s\n", color
split(color, chars, "")
joined = sep = ""
for (i=1; i in chars; i++) {
    joined = joined sep chars[i]
    sep = " "     # populate sep here with whatever string you want between elements
}
printf "color joined: %s\n", joined 
```

我还清理了 printf 的错误使用和虚假的分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-12T15:09:45.700

这是 POSIX awk 的一种方法：

```
br = "red,orange,yellow,green,blue"
ch = split(br, de, ",")
print "original: " br
printf "joined: "
for (ec in de) printf ec == ch ? de[ec] "\n" : de[ec] "-" 
```

输出：

```
original: red,orange,yellow,green,blue
joined: red-orange-yellow-green-blue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:01:42.470

你想要的（在你的循环中）是[string concatenation](http://www.gnu.org/software/gawk/manual/html_node/Concatenation.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-17T19:40:03.430

与以前的答案类似，但不那么优雅，但简单而简短：

```
color = "#FFFF00"
printf "color original: %s\n", color
split(color, chars, "")
for (i=1; i<=length(chars); i++) {
    (i==1) ? joined = chars[i] : joined = joined" "chars[i] # Define separator here
}
printf "color joined: %s\n", joined 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-30T09:01:49.270

知道与之相反的`split()`是`join()`，仅仅谷歌搜索就会给我这个页面，它似乎包含解决方案：[http](http://www.gnu.org/software/gawk/manual/html_node/Join-Function.html) ://www.gnu.org/software/gawk/manual/html_node/Join-Function.html 。它将数组的所有元素连接在一起，并返回相应的字符串。

```
['f','o','o'] => "foo" 
```

玩得开心

# jasper-reports - 字符串表达式的模式（格式）

> ID：13641867
> 
> 赞同：2
> 
> 时间：2012-11-30T08:59:36.470
> 
> 标签：jasper-reports, ireport

我正在使用*iReport*来设计报告。我需要格式化一个字符串，例如*`xxxxxxxxxxx`*to *`xxx xxx xxx xxx`*。我可以为日期、数字、时间和货币指定模式。

但是如何为字符串执行此操作？谁能提供我对此的见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:59:42.217

尝试使用带有替换的正则表达式：

假设您的数据被调用`$F{field}`并且它是 a `java.lang.String`，并且当前值为“0123456789ab”并且您希望它是“012 345 678 9ab”。试试这个作为你的文本字段值：

```
$F{field}.replaceAll("^(...)(...)(...)(...)$", "$1 $2 $2 $4") 
```

如果你想要更通用的东西，你可以用你的正则表达式和替换变得更可爱。例如，如果你总是想要三胞胎但你不在乎有多少，你可以这样做：

```
$F{field}.replaceAll("(...)", "$1 ").trim() 
```

请注意，这`trim`将是必需的，因为最后的三元组将附加额外的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:30:20.370

我通过使用 scriptlet 解决了这个问题。感谢您的回复，也会尝试您的方法。

```
public String formatNum(String tabn) {

    String num = tnum;

    String temp, t1, t2, t3, t4;

    temp = org.apache.commons.lang.StringUtils.leftPad(num, 11, '0');

    t1 = temp.substring(0, 2);
    t2 = temp.substring(2, 5);
    t3 = temp.substring(5, 8);
    t4 = temp.substring(8, 11);

    num = t1 + " " + t2 + " " + t3 + " " + t4;

    return num;
} 
```

并在扩展 JRDefaultScriptlet 类的类中编写此方法并将其导出为 jar，然后将其添加到 iReport 的类路径中。现在将其添加为 scriptlet，然后您可以使用此方法在报告中将其格式化为上述所需格式。

# javascript - Jquery-Ajax：通过第二次提交打开fancybox导致$ .fancybox未定义

> ID：13641876
> 
> 赞同：3
> 
> 时间：2012-11-30T09:00:05.650
> 
> 标签：javascript, jquery, fancybox

我使用下面的脚本来捕捉第二个提交按钮的点击，并通过 ajax 将数据发送到 fancybox。该脚本工作正常，但只是第一次。如果您关闭 fancybox 并想再次打开它，firefox 控制台会说这`$.fancybox`是未定义的，并且没有任何反应。

```
$(document).ready(function(){
          $(':submit').click(function(){
            var value = $(this).attr('id');
            if (value == 'preview') {
                $.fancybox.showLoading();
                $.ajax({
                    type    : 'POST',
                    cache   : false,
                    url     : '/mypath/index.php',
                    data    : $('#myform').serializeArray(),
                    success : function(data) {
                        $.fancybox(data)

                        }
                    });
                    return false;
            }
        });
    }); 
```

也许它与网站上使用的其他脚本有关：这些是 Datepicker、Basistance Validate 和 Tooltip 以及一些自定义脚本。我只用一个表格和一个小目的地创建了一个小型演示页面，`/mypath/test.php`没有任何问题。

**编辑**：已删除，没有好主意。如果问题是由 .ready 引起的，它将无法在测试页上运行。

**编辑2**：已解决。问题是，我在 target-site 的标题中调用了 jquery 和 ui `url : '/mypath/index.php'`。我删除了代码，现在它运行了！

# c# - 如何将存储过程复杂类型转换为 poco？

> ID：13641879
> 
> 赞同：0
> 
> 时间：2012-11-30T09:00:07.383
> 
> 标签：c#, entity-framework, complextype

我有一个 sql 过程，并在我的 web 项目中创建了一个带有实体框架的函数导入。很好，但我想 poco 我的 storedprocedure_Result 对象的对象。我可以使用 ADO.NET EntityObject Generator 生成 poco 类吗？实际上，我将使用实体框架输出我的 sql 过程结果的 json 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:25:48.007

您可以从实体中分离数据上下文或手动创建 poco（或使用类似的东西：http: [//visualstudiogallery.msdn.microsoft.com/7812b04c-db36-4817-8a84-e73c452410a2](http://visualstudiogallery.msdn.microsoft.com/7812b04c-db36-4817-8a84-e73c452410a2)）并使用 Automapper / 之类的东西进行映射值注入器。

如果您要映射它，我建议您遵循存储库模式并从存储库中公开 poco 类。

# php - wordpress 插件管理 ajax - 内部服务器错误的打印错误

> ID：13641885
> 
> 赞同：0
> 
> 时间：2012-11-30T09:00:39.283
> 
> 标签：php, wordpress

我正在使用 admin-ajax 在我的插件中进行 ajax 调用。因此，当出现错误时，我收到错误“内部服务器错误”而不显示错误。我看不到日志，因为我无权访问服务器？我试过这样：

```
 try{

     $req = new WP_Http;
    //$headers = array('Transfer-Encoding'=> 'chunked');  

    $res = $req->request("url", array('method' => "POST", 'body' => $data) );
  //Getting error at this line when size of $daya is more than 10MB. Till 10MB, it is sending post data successfully.
    //After 10MB(approx), getting Internal server error.
     //But cant just think this is server restriction to max post data, as phpinfo saying that max_post_size as 64MB
 }
  catch(Exception $e){
       echo $e;
   } 
```

但它仍然返回错误而不返回结果。我知道发生错误的行，但想知道错误是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:35:01.063

由于您正在处理大量数据，因此您需要检查内存限制 - PHP 通常需要比您处理的数据大小更多的内存。

所以尝试增加内存限制（如果它不适用于该值，请尝试大于此值）：

```
ini_set('memory_limit', '128M'); 
```

或者，您可以通过将以下行添加到[wp-config.php](http://codex.wordpress.org/Editing_wp-config.php#Increasing_memory_allocated_to_PHP)来让 WordPress 为您执行此操作：

```
define('WP_MEMORY_LIMIT', '128M'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T09:03:55.233

500（内部服务器错误）是 HTTP 错误，而不是 PHP 错误。

通常，它是由服务器配置错误引起的（例如错误的 .htaccess，或 httpd.conf 中的“语法”错误）。

# azure - Azure 存储表大小

> ID：13641890
> 
> 赞同：13
> 
> 时间：2012-11-30T09:00:51.237
> 
> 标签：azure, azure-storage, azure-table-storage

Azure 计费基于已用空间的大小。现在我需要知道细节。我的存储（blob 容器、单个表）中每个存储对象的大小是多少？

编写枚举所有 blob 并计算每个容器的总体大小的代码很容易。但是桌子呢？**如何获取 Azure 存储中某个表的大小？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T11:37:35.970

如果您对按 blob 容器进行分解不感兴趣，则不必编写代码来查找 blob 存储大小。您可以通过存储分析 ( [http://msdn.microsoft.com/en-us/library/windowsazure/hh343270.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh343270.aspx) ) 获得此信息。您感兴趣的表是**$MetricsCapacityBlob** ( [http://msdn.microsoft.com/en-us/library/windowsazure/hh343264.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh343264.aspx) )。

来到表格，不幸的是没有这样的东西可用，您需要获取所有实体并计算每个实体的大小以找到表格大小。您可能会发现这篇博文对计算实体的大小很有用：http: [//blogs.msdn.com/b/avkashchauhan/archive/2011/11/30/how-the-size-of-an-entity-is -caclulated-in-windows-azure-table-storage.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/30/how-the-size-of-an-entity-is-caclulated-in-windows-azure-table-storage.aspx)。

HTH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-15T05:52:03.850

有一个工具可以为您获取表格大小或实体数量。[Azure 存储管理器](https://azurestoragemgr.codeplex.com/)

1.  在左侧树窗格中选择一个存储表
2.  点击“属性”按钮
3.  单击表格属性对话框上的“计算”按钮
4.  稍等片刻，直到“计算”按钮再次可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-12T03:02:34.907

以下是如何获取此信息的分步说明：

1.  进入 Azure 中的“监视器”（默认情况下它是左侧导航的顶级项目），它看起来像一个速度计，或者可能是一个非常快的单手时钟。

2.  然后选择指标（它在警报下方，在日志上方，在第一个分组中）。

3.  然后从“选择范围”弹出窗口中，选择您的存储帐户并按“应用”。

4.  然后在空表上有一些下拉菜单，第一个将具有您应用的范围。第二个，Metric Namespace，应该是“Table”，第三个，Metric，应该是“Table Capacity”，您可以将最后一个保留为 Avg - 如果您的存储帐户中只有一个表，那么 Avg 将只是那张桌子的确切大小。

5.  如果你想计算平均行大小，你可以做一个简单的除法——在我的例子中，我做了 1.4 GB / 2.5M 实体 = ~560 字节

[![在此处输入图像描述](../Images/70492375fef4683cc7f9c6894f8258fe.png)](https://i.stack.imgur.com/wxXBO.png)

# php - 如何在php中合并数组递归同时保留它们的索引名称

> ID：13641899
> 
> 赞同：0
> 
> 时间：2012-11-30T09:01:25.380
> 
> 标签：php, arrays

我一直在寻找，还没有找到我的问题的答案。

假设我想从三个或更多数组中创建一个菜单，但我不知道这些数组会有什么元素。

我有这样的事情：

```
$arr1 = array(
   'design' => 'Link 1'
);

$arr2 = array(
   'development' => 'Link 2'
);

$arr3 = array(
   'design' => 'Link 3',
   'seo' => 'Link 4'
); 
```

我该怎么做才能将这三个数组变成这样：

```
$final_array = array(
   'development' => 'Link 2',
   'seo' => 'Link 4',
   'design' => array(
         '0' => 'Link 1',
         '1' => 'Link 3'
     ),
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:07:04.133

[array_merge_recursive()](http://php.net/array_merge_recursive)

```
$arr1 = array(
   'design' => 'Link 1'
);

$arr2 = array(
   'development' => 'Link 2'
);

$arr3 = array(
   'design' => 'Link 3',
   'seo' => 'Link 4'
);

$newarr = array_merge_recursive($arr1, $arr2, $arr3);
print_r($newarr); 
```

# dotnetopenauth - 如何为应用程序生成访问令牌

> ID：13641902
> 
> 赞同：-1
> 
> 时间：2012-11-30T09:01:32.983
> 
> 标签：dotnetopenauth

我正在使用 dotnetopenauth 3.4.7.11121。我需要为应用程序生成访问令牌（它将提供其 id 和秘密），而不是为用户生成访问令牌，就像 Facebook 所做的那样。是否可以使用 3.4.7.11121？

我想我需要这样的[场景](https://stackoverflow.com/questions/9676911/how-does-one-generate-access-tokens-programmatically-with-dotnetopenauth-4-so-th)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:54:33.257

It sounds like you're talking about OAuth 1.0\. Based on that assumption...

Just come up with an access token and token secret yourself, store it in your OAuth 1.0 service provider's token database, and give it to your OAuth 1.0 consumer. When the call to service provider comes in, DNOA will validate the token against your access token database and it will show up as valid.

In other words, if you want a non-standard way of issuing OAuth 1.0 access tokens, just do it yourself -- not need to use DotNetOpenAuth for generating the access token as it is just a series of random characters stored in a database table.

# android - 在Android中解析从frm服务器获取的JSON字符串

> ID：13641903
> 
> 赞同：-1
> 
> 时间：2012-11-30T09:01:35.577
> 
> 标签：android, json

我已经浏览了一个关于在 Android 上解析 Json 数据的链接，但不太了解。我从我的服务器获取以下 JSON 字符串。

我需要解析它并将其呈现为我的 android 应用程序中的列表视图。任何指导或代码片段。？另外，由于我的 Jason 字符串有图像数据，列表视图是否能够正确显示它？

我的 JSON 字符串是：

```
{"results":{"result":[{"year":"2012","title":"The Amazing Spider-Man","details":"http:\/\/www.imdb.com\/title\/tt0948470","director":"Marc Webb","rating":"7.3","cover":"http:\/\/i.media-imdb.com\/images\/SF1f0a42ee1aa08d477a576fbbf7562eed\/realm\/feature.gif"},

{"year":"2014","title":"The Amazing Spider-Man 2","details":"http:\/\/www.imdb.com\/title\/tt0948470","director":"Marc Webb","rating":"7.3","cover":"http:\/\/ia.media-imdb.com\/images\/M\/MV5BMzk3MTE5MDU5NV5BMl5BanBnXkFtZTYwMjY3NTY3._V1._SX54_CR0,0,54,74_.jpg"},

{"year":"2002","title":"Spider-Man","details":"http:\/\/www.imdb.com\/title\/tt0948470","director":"Sam Raimi","rating":"6.3","cover":"http:\/\/ia.media-imdb.com\/images\/M\/MV5BODUwMDc5Mzc5M15BMl5BanBnXkFtZTcwNDgzOTY0MQ@@._V1._SX54_CR0,0,54,74_.jpg"},

{"year":"2007","title":"Spider-Man 3","details":"http:\/\/www.imdb.com\/title\/tt1872181","director":"Sam Raimi","rating":"7.5","cover":"http:\/\/ia.media-imdb.com\/images\/M\/MV5BMjE1ODcyODYxMl5BMl5BanBnXkFtZTcwNjA1NDE3MQ@@._V1._SX54_CR0,0,54,74_.jpg"},

{"year":"2004","title":"Spider-Man 2","details":"http:\/\/www.imdb.com\/title\/tt1872181","director":"Sam Raimi","rating":"6.8","cover":"http:\/\/i.media-imdb.com\/images\/SFa26455c07afc3c94f52e95de50d5d814\/realm\/tv_series.gif"}]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:22:31.343

制作所有字段的 Arraylist 并编写下面的函数来解析上面的 json，它将解决您的问题。

```
ArrayList<String> year, title, details, director, rating, cover;
// For Parse Login Response From Server
public void mParseResponse() throws UnknownHostException { 

    year=new ArrayList<String>();
    title=new ArrayList<String>();
    details=new ArrayList<String>();
    director=new ArrayList<String>();
    rating=new ArrayList<String>();
    cover=new ArrayList<String>();

    try {
        JSONObject jObject = new JSONObject(EntityUtils.toString(entity));
        JSONObject jsonobjresults = jObject.getJSONObject("results");
        JSONArray jsonarrayresult = jsonobjresults.getJSONArray("result");
        for(int i=0;i<jsonarrayresult.length(); i++){
            JSONObject mJsonObj = jsonarrayresult.getJSONObject(i);
            year.add(mJsonObj.getString("year"));
            title.add(mJsonObj.getString("title"));
            details.add(mJsonObj.getString("details"));
            director.add(mJsonObj.getString("director"));
            rating.add(mJsonObj.getString("rating"));
            cover.add(mJsonObj.getString("cover"));
        }
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:26:17.933

阅读本教程[http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)。

您可以使用 Google 的 gson 库来解析 json。您需要创建 java 类来存储 json 值将该类引用传递给 gson 库。它有简单的方法。

检查这个[文档](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/Gson.html)

# c++ - 获取列表的第一个和最后一个元素 给我非法指令错误

> ID：13641908
> 
> 赞同：0
> 
> 时间：2012-11-30T09:01:42.873
> 
> 标签：c++, list, stl

```
list<string> logs;
GetLogs(logs);
string first=logs.front();
**string last=logs.back();** 
```

在这一点上，我得到了 progeam got SIGILL in GDB

我的 GetLogs() 函数定义是：

```
int GetLogs(list<string>& logs){
logs.push_back("Log.001");
logs.push_back("Log.002");
logs.push_back("Log.003");
return 0;
} 
```

当程序收到此错误时，我可以看到值 p first Log.001 p last Log.003

我的代码有什么问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:25:39.023

我得到了解决方案。抱歉，GDB 在错误的行上显示了 SIGILL 错误。我收到错误是因为我们有一个使用格式化输入的日志记录机制，例如`fprintf`. 但我给`%s`了`string`这个问题。非常感谢你的耐心

`first.c_str()`并`last.c_str()`解决了它。

# iphone - 在 iPad Retina Display 中拉伸的 UIButton 自定义视网膜图像

> ID：13641909
> 
> 赞同：5
> 
> 时间：2012-11-30T09:01:46.953
> 
> 标签：iphone, ios, ipad, ios5, ios6

我对 iPad 视网膜图像有一个问题。当我在普通 ipad 中执行我的添加时，它看起来很棒。

但是当我在 iPad Retina 中执行这个应用程序时，`UIButton`自定义图像会向上拉伸。

我还为视网膜模式的“@2x”图标图像添加了图像。

使用此代码：

```
UIButton *btnEye=[[UIButton alloc] initWithFrame:CGRectMake(10, 5.5, 35, 35)];
[btnEye setImage:eyeImage forState:UIControlStateNormal];
[reportToolbar addSubview:btnEye]; 
```

**在正常模式下：**

![在此处输入图像描述](../Images/f1829584f72e79a796f1dfdd605a5c2d.png)

**在 Reitna 模式下：**

![在此处输入图像描述](../Images/9dc264d92990b4cf4101f6eebc2b0d1d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:16:25.830

视网膜图像的分辨率真的是正常的两倍还是与正常的分辨率相同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:25:44.387

简单地说，你应该用正常的图像替换“@2x”图像，看起来图像的大小是相反的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-13T15:26:24.963

此代码不会赢得选美比赛，但您可以尝试一下！

向您的班级添加一个函数以识别您是否有视网膜设备

```
- (BOOL)isRetina {
   return [self respondsToSelector:@selector(displayLinkWithTarget:selector:)] && (self.scale == 2.0);
} 
```

当您设置 eyeImage 时，请执行此操作

```
UIImageView *eyeImage = nil;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad && [self isRetina]) {
    eyeImage = [UIImageView imageNamed:@"eye@2x.png"];
} else {
    eyeImage = [UIImageView imageNamed:@"eye.png"];
} 
```

这样你就可以强制你的设备使用视网膜图像，如果它有一个:-)。

# javascript - 是否可以使用 TideSDK 使用 Ruby 脚本中的 javascript 方法？

> ID：13641914
> 
> 赞同：0
> 
> 时间：2012-11-30T09:01:55.347
> 
> 标签：javascript, ruby, tidesdk

TideSDK 是否可以处理类似于：

```
<script type="text/javascript">
  function foo(answer) {
    $('#the_answer').text(answer)
  }
</script>
<script type="text/ruby">
  class Bar 
    def bar()
     [ .... do some lengthly analysis .... ]
     @the_found_answer = 42
     foo(@the_found_answer)
    end
  window.bar = Bar.new() 
```

, 这样处理是由 Ruby 脚本和库完成的，但表示是由 Javascript 脚本处理的？

**更新**：我想我发现我的代码有什么问题，那就是缺少函数调用的范围。代替：

```
foo(@the_found_answer) 
```

我需要做类似的事情：

```
the_window = Ti.UI.getMainWindow()
the_domwindow = the_window.getDOMWindow()
the_domwindow.foo(@the_found_answer) 
```

， 我对吗？（我没有找到任何其他方法来获取 DOM 窗口。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:19:58.957

tnarik - 应该是可行的。你看过这里吗： [http ://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/using_ruby](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/using_ruby)

# shell - 如何在shell中使用awk变量

> ID：13641916
> 
> 赞同：2
> 
> 时间：2012-11-30T09:02:03.623
> 
> 标签：shell, unix, awk

我有以下结构（只有一行）

```
col1  col2  col3  col4
----------------------
12    34    14    10 
```

我要做的是我必须获取 col2 和 col4 并在 shell 中使用该值。

```
a=$(awk 'NR<2{$2}')
b=$(awk'NR<2{$4}') 
```

我必须在我的 shell 脚本中使用 a 和 b 。但这不是一个好主意，因为我使用`awk`了两次，而是在获取这样的值。

`awk'NR<2{ a=$2;b=$4}'`

但我不知道如何在我的 shell 中使用这个 a 和 b。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:31:55.540

使用 eval 您可以在一个 awk 命令中分配更多的 shell 变量。看下面的测试：

```
kent$  echo $a,$b
,

kent$  cat test
col1  col2  col3  col4
----------------------
12    34    14    10

kent$  eval $(awk 'NR==3{print "a="$2;print "b="$4}' test)

kent$  echo $a,$b
34,10 
```

请注意，我刚刚复制了带有标题/标题等的输入示例，因此在我的脚本中，数据行是 NR=3。如果不是你的情况，你可以调整它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:42:38.000

`read`内置在这里很有用。

```
read _ a _ b _ < <( tail -n +3 data.txt)  # Assign the columns you don't care about to _
echo $a,$b 
```

这避免了使用`eval`，如果您可以找到其他选项，通常应该避免使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:58:52.110

```
$ v=( $(awk 'NR==3{print $2 ORS $4}' file) )
$ a="${v[0]}"
$ b="${v[1]}"
$ echo "$a,$b"
34,10 
```

# session - Apache Wicket 会话超时；重新登录并返回页面

> ID：13641921
> 
> 赞同：1
> 
> 时间：2012-11-30T09:02:10.163
> 
> 标签：session, wicket, wicket-1.5

我不确定如何实现这一点，而且我对 Wicket 还是很陌生，但我试图瞄准的行为是；当会话超时发生时，用户被重定向到登录页面重新登录，当他重新登录时，他被重定向到他之前查看的页面。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:29:22.653

您想要的功能仅在服务器可以识别您想要操作的页面时才有效。所以只有无状态的表单提交和可收藏的 URL 才能做到这一点。Wicket 开箱即用，但仅限于无状态/可书签的变体。

Wicket 将页面信息（某种程度）存储在会话中。当会话过期时，此信息不再可用。那么只有与会话无关的请求/需要曾经在会话中的信息才会产生预期的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:54:52.497

您是否在`WebApplication.init()`方法中尝试过以下代码？

```
IApplicationSettings asSettings = getApplicationSettings();
asSettings.setPageExpiredErrorPage(PageErrorSessionExpired.class); 
```

在这里用你自己的`WebPage`班级代替我的班级`PageErrorSessionExpired`。

# signalr - Windows 窗体中的 SignalR

> ID：13641928
> 
> 赞同：6
> 
> 时间：2012-11-30T09:02:37.527
> 
> 标签：signalr

SignalR 在实时 Web 应用程序中非常有趣且令人印象深刻。现在我正在使用 Windows 窗体进行简单的聊天应用程序。

每当我使用“.wait()”时，它都会抛出一个错误“一个或多个错误”，并且在从文本框中调用消息时，会出现一个错误“必须在发送之前调用 start”。

我不知道我在哪里犯错了。我尝试了许多解决方案。但它不起作用。Web 和控制台应用程序中的一切都是完美的。

谁能帮我？
你能举一些例子说明它是如何工作的......？
我在 Windows 窗体中看不到任何 signalR 样本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T18:51:45.913

假设您正在尝试在 Windows 窗体应用程序中执行 SignalR 客户端，请查看这篇[文章](http://mscodingblog.blogspot.com/2012/12/testing-signalr-in-wpf-console-and.html)（[http://mscodingblog.blogspot.com/2012/12/testing-signalr-in-wpf-console-and.html](http://mscodingblog.blogspot.com/2012/12/testing-signalr-in-wpf-console-and.html)）如何做VB 中 WPF 应用程序中的客户端 SignalR。使用类似的方法，我猜你可以让 Signalr 客户端在 Windows 窗体应用程序中工作。

# c# - 从 dropDownlist 控件返回字符串

> ID：13641930
> 
> 赞同：0
> 
> 时间：2012-11-30T09:02:48.633
> 
> 标签：c#, asp.net, visual-studio-2008

我有一个我意识到的非常基本的问题，我试图在选定的索引更改时从 DropDownList 的选定值返回一个字符串值，但由于某种或其他原因它没有发生。

```
protected void drpMinisters_SelectedIndexChanged(object sender, EventArgs e)
{
    name = drpMinisters.SelectedValue;
    LabMessage.Text = name;

} 
```

当我尝试将名称添加到数据库时，我得到一个 NullReferenceException。

```
protected void butSubmitMinister_Click(object sender, EventArgs e)
{
    int index = drpMinisters.SelectedIndex;
    if (index == 0)
    {
        LabMessage.Text = "Please select a minister";
        return;
    }
    try
    {
        OleDbCommand cmd = conn.CreateCommand();
        cmd.CommandText = @"INSERT INTO MinisterTable(MinisterName)VALUES(" + name + "')";
        cmd.ExecuteNonQuery();

        LabMessage.Text = "The record was successfully added";
        conn.Close();
    }
    catch (Exception ex)
    {
        LabMessage.Text = ex.ToString();
    }

} 
```

建议也许。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:09:03.887

我假设你在这条线上得到了`NullRefernceException`你的连接对象：`conn`

```
OleDbCommand cmd = conn.CreateCommand(); 
```

请记住，所有对象（也是您的`name`变量）都在当前页面生命周期结束时处理。您可以使用控件的 ViewState 跨回发维护值，`SelectedValue`您的`DropDownList`.

您还应该在使用它的地方创建连接，并始终在完成后立即处理它，最好使用`using`-statement。否则，只要它仍然打开，其他线程（请求）就需要创建一个新的物理连接：

```
string sql = "INSERT INTO MinisterTable(MinisterName) VALUES(@MinisterName);";
using(var con = new OleDbConnection(connectionString))
using(var cmd = new OleDbCommand(sql, con))
{
    cmd.Parameters.AddWithValue("@MinisterName", drpMinisters.SelectedValue);
    con.Open();
    cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:28:18.527

好吧，我认为您的问题不在于数据库部分，它实际上在于您如何从下拉列表中获取所选值。如果要获取实际出现在下拉列表中的字符串值，则应使用以下 .

```
string name= (string)drpMinisters.SelectedItem; 
```

如果您想要组合框文本区域中的文本，请使用 SelectedText 属性

# javascript - 类似于最接近的jQuery函数，它将返回父链之外的元素

> ID：13641938
> 
> 赞同：4
> 
> 时间：2012-11-30T09:03:42.720
> 
> 标签：javascript, jquery

是否有任何类似于最接近（）的jQuery函数将返回父链之外的元素，横向遍历？例如，我想在 div 源上调用一个函数 foo() 来返回 div 目标。我知道我可以使用 parent() 和兄弟姐妹() 进行导航，但我需要一些通用的东西，可以根据需要向上、横向和向下移动？

```
var allsources = $('.source');

allsources.click(function()){
  $(this).closest('.target').hide();
});

<div class="row">
  <div>
     <div class="target" ></div>
  </div>
  <div>
    <div>
      <div class="source"></div>
    </div>
  </div>
</div>

<div class="row">
  <div>
     <div class="target" ></div>
  </div>
  <div>
    <div>
      <div class="source"></div>
    </div>
  </div>
</div> 
```

编辑：

我对最接近的定义：你有一个元素来源。试着找到它。如果找到多于一个，则返回一个更少的节点箍向下/下一个/上一个。如果没有找到，请上一级，然后尝试再次找到。重复直到没有父母。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T09:17:23.993

如果最接近的是，您的意思是“尽可能少地向上移动，然后向下移动”，那么您可以这样做

```
$("#source")
  .closest(":has(.target)")
  .find(".target:first")  //make sure we only select one element in case of a tie 
```

在您的情况下，最好直接指定共同父项：

```
$(this)
  .closest(".row")
  .find(".target")        //there's no tie here, no need to arbitrate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:19:15.660

这是一个棘手的问题。如前所述，您如何在这种情况下定义最接近？假设你可以决定一些规则；例如：

向上移动：3pt
向下
移动：2pts 横向移动：1pts

然后认为具有最低点的项目是“最接近的”，那么编写一个插件就很容易了，命名为`closestAll`，它将递归遍历整个 dom 树以确定最接近的项目。

但是，查看您最近的编辑，对所述问题的一个（众多！）*正确解决方案是：*

```
var allsources = $('.source');

allsources.click(function(){
  $(this).parents('.row').find('.target').hide();
}); 
```

实时示例： http: [//jsfiddle.net/zCvJM/](http://jsfiddle.net/zCvJM/)（源 A 只隐藏目标 A，B 相同）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T09:49:10.707

如果你确切地知道 dom 的结构和嵌套的级别，你有没有考虑使用 eq() 方法

```
$(this).parents().eq(1).prev().children(".target") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T09:08:04.650

~~除了基本上查询整个DOM之外，我认为没有其他方法可以做到这一点：~~

 ~~```
$('#target') 
```~~ 

~~因为如果您想向上和穿越（也不要介意向下），那么目标元素与子元素无关。如果您还想检查子元素的存在，则必须单独进行。~~

***-编辑：***

在阅读了关于想要找到最接近的元素（无论它是否是父元素）的评论后，我认为您将不得不编写一个自定义函数来一次爬回 dom 一个节点。我已经测试了以下内容并且可以正常工作：

**标记**

```
<div id="parent">
    <div id="child1">   
        <div id="source"></div>
    </div>
    <div id="child2">
        <div class="target" rel="right"></div>
    </div>
    <div id="child3">
        <div>
            <div class="target" rel="wrong"></div>
        </div>
    </div>
</div> 
```

**脚本**

```
$(document).ready(function () {
    var tgt = findClosest($('#source'), '.target');
    if (tgt != undefined) {
        alert(tgt.attr('rel'));
    }
});

function findClosest(source, targetSel) {
    var crawledNodes = $();
    var target = null;

    // Go up
    source.parents().each(function () {
        console.log(crawledNodes.index($(this)));
        if (crawledNodes.index($(this)) == -1 && target == null) {
            crawledNodes.add($(this));
            target = findTarget($(this), targetSel);

            // Go across
            $(this).siblings().each(function () {
                console.log("Sibling");
                if (crawledNodes.index($(this)) == -1 && target == null) {
                    crawledNodes.add($(this));
                    target = findTarget($(this), targetSel);
                }
            });
        }
    });

    return target;
}

function findTarget(el, targetSel) {
    console.log(targetSel);
    var target = el.find(targetSel);
    if (target.size() > 0) {
        return target.eq(0);
    }
    else 
    {
        return null;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T10:40:51.593

如果我正确理解了规范，您的意思是类似于下面定义的最接近的函数：

```
var allsources = $(".source");

function closest($source,selector) {
    if($source == null) return  $([]);
    var $matchingChildren = $source.find(selector);
    if($matchingChildren.length != 0) return $($matchingChildren.get(0));
    else return closest($source.parent(), selector)
}

allsources.click(closest($(this),'.target').hide();}); 
```

[您可以在http://jsfiddle.net/y2wJV/1/](http://jsfiddle.net/y2wJV/1/)看到它的工作原理

您的定义要求在匹配子项中进行选择时，该函数必须返回一个更少的节点箍向下/下一个/上一个。这个要求没有得到满足，但是这个功能非常灵活，并且在您提供的示例的情况下似乎可以做您想做的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T10:42:52.400

我发现这段代码很简单，但不能解决平局问题（返回第一个）......

```
(function ($) {
  $.fn.findClosest = function (filter) {
    var $found = $(),
            $currentSet = this; // Current place

    while ($currentSet.length) {
        $found = $currentSet.find(filter);
        if ($found.length) break; // At least one match: break loop
        // Get all children of the current set
        $currentSet = $currentSet.parent();
    }
    return $found.first(); // Return first match of the collection
  };
})(jQuery); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-20T08:24:06.310

我遇到了类似的问题，我有一个表我需要找到可能在当前 td 之外的下一个元素，所以我做了一个 jquery 函数：

```
 $.fn.nextAllLevels = function(sel) {
    if ($(this).nextAll(sel).length != 0) {
        return $(this).nextAll(sel).eq(0);
    } else if ($(this).nextAll(':has(' +  sel + ')').length != 0) {
        return $(this).nextAll(':has(' +  sel + ')').find(sel).eq(0);
    } else {
        return $(this).parent().nextAllLevels(sel);
    } 
```

因此，要使用它，您只需调用

```
$('#current').nextAllLevels('.target'); 
```

为您提供在正向方向上最接近的元素，无论 in 是否在当前父级中。

# git - git：更新子模块错误

> ID：13641941
> 
> 赞同：0
> 
> 时间：2012-11-30T09:03:54.107
> 
> 标签：git, version-control, dvcs

更新子模块时出现以下错误。

```
fatal: reference is not a tree: 8657febdb311a29253ef8e6a965e3c9089e36b00
Unable to checkout '8657febdb311a29253ef8e6a965e3c9089e36b00' in submodule path 'Fluent.Util' 
```

我是 git 的新手，最近开始使用它。谁能帮我这个。如果您需要更多信息，请告诉我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:37:10.233

我的同事错误地设置了子模块。上面的帖子确实有帮助。

# javascript - 在 d3.js 中自定义缩放功能

> ID：13641944
> 
> 赞同：4
> 
> 时间：2012-11-30T09:04:00.273
> 
> 标签：javascript, d3.js

我想将 1-1000 映射到 1-190，我的映射函数是：

```
f(x) = { x                     if 1<=x and x<=100,
         100 + (x-100)/10      if 100 < x <= 1000           } 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:43:14.533

最后通过追踪源码得到了解决方案：

```
d3.scale.linear().domain([1, 100, 1000]).range([1, 100,190]) //poly-linear 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:13:57.833

我不熟悉 3d.js，但这就是我在普通 JS 中的做法

```
function toNewScale( x ) {

    return Math.round( x / 1000 * 190 );
} 
```

如果这是你要问的。

# java-7 - 在 java 中使用反射的 Locale.getDefault(Locale.Category.FORMAT)

> ID：13641946
> 
> 赞同：0
> 
> 时间：2012-11-30T09:04:08.633
> 
> 标签：java-7

```
*import java.util.*;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.text.*;
public class LocaleProgram {
 public static void main(String[] args) {
    try {

        Class c = Class.forName("java.util.Locale");
        Class c1 = Class.forName("java.util.Locale$Category");
        Class[] paramTypes = { c1 };
         try {
         Method m = c.getMethod("getDefault", paramTypes);

             try {
                 //Object o = m.invoke(c1);
                 Object o = m.invoke(c1,new Object[]{"FORMAT"});
                 System.out.println("Object:" + (Locale)o);
                 } catch (IllegalArgumentException e) {
                 // TODO Auto-generated catch block
                 e.printStackTrace();
             } catch (IllegalAccessException e) {
                 // TODO Auto-generated catch block
                 e.printStackTrace();
             } catch (InvocationTargetException e) {
                // TODO Auto-generated catch block
                 e.printStackTrace();
             }
        } catch (SecurityException e) {
        // TODO Auto-generated catch block
         e.printStackTrace();
        } catch (NoSuchMethodException e) {
        // TODO Auto-generated catch block
         e.printStackTrace();
         } 

    }catch (ClassNotFoundException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
    }
 }
}* 
```

基本上我希望 Locale.getDefault(Locale.Category.FORMAT) 使用反射，这样我就可以在 Java 7 以外的版本上运行此代码。但是我在调​​用调用方法时遇到了麻烦，它给了我 java.lang.IllegalArgumentException: argument type不匹配异常。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T14:04:35.233

正如 Timmos 所说的那样，您传递的是 a而不是枚举常量`IllegalArgumentException`这一事实的结果。获取的正确方法是使用类：`String``Locale.Category``Locale.Category.FORMAT``java.lang.reflect.Field`

```
import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Locale;

public class GetDefaultLocale {

    public static void main(String[] args){
        Locale locale = null;
        try {           
                Class<?> LOCALE_CATEGORY_Class = Class.forName("java.util.Locale$Category");
                Class<?> LOCALE_Class = Class.forName("java.util.Locale");

                Class<?>[] paramTypes = { LOCALE_CATEGORY_Class };
                Method m = LOCALE_Class.getMethod("getDefault", paramTypes);

                Field FORMAT_Field = LOCALE_CATEGORY_Class.getField("FORMAT");
                //we pass null because the FORMAT is an enumeration constant(the same applies for class variables)
                Object FORMAT = FORMAT_Field.get(null);
                locale = (Locale)m.invoke(LOCALE_CATEGORY_Class, new Object[]{FORMAT});
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (NoSuchFieldException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SecurityException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (NoSuchMethodException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        //for jre 6
        if(locale == null){
            locale = Locale.getDefault();
        }   
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:25:10.393

更改此行

```
Object o = m.invoke(c1,new Object[]{"FORMAT"}); 
```

至

```
Object o = m.invoke(c1,new Object[]{Locale.Category.FORMAT}); 
```

但是，这可能不是您想要的，因为您想通过使用反射来创建使用的枚举？

这在 Java 1.6 下不起作用，因为这些枚举还不存在。

一些方便阅读的东西：[http ://blog.ej-technologies.com/2011/12/default-locale-changes-in-java-7.html](http://blog.ej-technologies.com/2011/12/default-locale-changes-in-java-7.html)

# javascript - 解析像 2012-11-07T00:00:00 这样的日期

> ID：13641951
> 
> 赞同：1
> 
> 时间：2012-11-30T09:04:32.680
> 
> 标签：javascript, node.js, date

我从我的客户那里得到这样格式的日期：

2012-11-07T00:00:00 (yyyy-mm-ddT00:00:00)

如何将其解析为*Date*对象？

我的第一个选择是：

*   获取前 10 个字符 (2012-11-07)
*   用“-”分开
*   创建新日期（拆分 [0]，拆分 [1]，拆分 [2]）

我知道这样的问题是显而易见的，而且回答得过多，不仅在 Stack Overflow 中，而且我想：

*   知道没有任何库的更好的做法，纯 JS（ Date.parse() ？）
*   与广泛使用的nodeJS日期库/框架相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:06:54.633

> var d = 新日期（'2012-11-07T00:00:00'）

# java - 重复的两个数组的交集

> ID：13641952
> 
> 赞同：5
> 
> 时间：2012-11-30T09:04:33.030
> 
> 标签：java, algorithm

我正在尝试创建一种方法，该方法可以重复两个数组的交集。

例子：`{1,2,5,4,1,3} and {1,2,1} -> {1,1,2}.`

我有一种方法可以交叉但不重复。

```
 public int[] findSameElements(int[] p1, int[] p2) {
    int count = 0;
    for (int i = 0; i < p1.length; i++) {
      for (int j = 0; j < p2.length; j++) {
        if (p1[i] == p2[j]) {
          count++;
          break;
        }
      }
    }

    int[] result = new int[count];
    count = 0;
    for (int i = 0; i < p1.length; i++) {
      for (int j = 0; j < p2.length; j++) {
        if (p1[i] == p2[j]) {
          result[count++] = p1[i];
          break;
        }
      }
    }

    return result;
  } 
```

如何在不使用`Arrays.*`or的情况下添加重复`List.*`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:07:29.443

请尝试以下功能：

```
public int[] findSameElements(int[] p1, int[] p2)
{
    int count = 0;
    bool[] choosen = new bool[p2.length];

    for (int i = 0; i < p1.length; i++)
    {
        for (int j = 0; j < p2.length; j++)
        {
            if (!choosen[j] && p1[i] == p2[j])
            {
                choosen[j] = true;
                count++;
                break;
            }
        }
    }

    int[] result = new int[count];
    count = 0;
    for (int i = 0; i < p2.length; i++)
    {
        if (choosen[i])
        {
            result[count] = p2[i];
            count++;
        }
    }

    return result;
} 
```

如有必要，您还应该应用排序，此解决方案具有 O(N^2) 复杂性。也可能使 O(NLogN) 复杂度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T09:07:25.047

您可以构建[直方图](http://en.wikipedia.org/wiki/Histogram)（将表示为 a [`Map<Integer,Integer>`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)）并且：

1.  将 list1 中的所有元素（及其重复次数）插入直方图
2.  为每个元素 e 迭代 list2：
    - 如果直方图包含元素 e（具有正值）：打印（或附加到新列表）e，并减少直方图中 e 的值

请注意，此解决方案是`O(n+m)`时间（平均情况）和`O(min{n,m})`空间。

* * *

**代码示例**（使用`List<T>`而不是数组 - 但当然可以轻松修改）：

```
private static <T> Map<T,Integer>  populateHistogram(List<T> list) {
    Map<T,Integer> histogram = new HashMap<T, Integer>();
    for (T e : list) {
        Integer val = histogram.get(e);
        histogram.put(e, val == null ? 1 : val+1);
    }
    return histogram;
}
public static <T> List<T> generateInterectionList(List<T> list,Map<T,Integer> histogram ) {
    List<T> res = new ArrayList<T>();
    for (T e : list) { 
        Integer val = histogram.get(e);
        if (val != null && val > 0) { 
            res.add(e);
            histogram.put(e,val - 1);
        }
    }
    return res;
}
public static <T> List<T> getIntersection(List<T> list1, List<T> list2) {
    Map<T,Integer> histogram = populateHistogram(list1.size() > list2.size() ? list2 : list1);
    return generateInterectionList(list1.size() > list2.size() ? list2 : list1,histogram);
}
public static void main(String[]args){
    List<Integer> list1 = Arrays.asList(new Integer[]{1,2,5,4,1,3}); 
    List<Integer> list2 = Arrays.asList(new Integer[]{1,2,1}); 
    System.out.println(getIntersection(list1, list2));
} 
```

* * *

请注意，它也可以在`O(nlogn)`时间和`O(logn)`空间上完成（用于排序算法的堆栈跟踪），对列表进行排序，然后为每个列表使用一个指针并行迭代

**伪代码：**

在 i1 < list1.length 和 i2 < list2.length 时重复：

1.  if list1[i1] == list2[i2]:
    - 打印 list1[i1]
    - 增加 i1,i2
2.  else if list1[i1] > list2[i2]:
    - 增加 i2
3.  否则：
    - 增加 i1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:14:21.940

有理由不使用集合吗？该[`retainAll(...)`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#retainAll%28java.util.Collection%29)方法可以满足您的要求：

```
List<Integer> list1 = ...
List<Integer> list2 = ...
List<Integer> intersection = list1.retainAll( list2 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:15:01.400

一种方法是使用哈希表。从两个数组中创建两个单独的哈希表。键值对是（元素，计数）。现在遍历较小的哈希表并打印出每个元素 count_min 的次数，其中 count_min = min（表 a 中元素的计数，表 b 中的元素计数）。这是一种具有额外空间复杂度的线性算法。

空间复杂度 = O(n+m) 其中 n 和 m 是两个数组的大小。时间复杂度 O(n)，其中 n > m。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-15T08:12:17.297

如果您对 java-8 没问题，那么我能想到的最简单的解决方案是使用流和过滤器。一个实现如下：

```
public static int[] intersection(int[] a, int[] b) {
    return Arrays.stream(a)
                 .distinct()
                 .filter(x -> Arrays.stream(b).anyMatch(y -> y == x))
                 .toArray();
} 
```

# f# - 谁能告诉我这个 F# 片段有什么问题？

> ID：13641953
> 
> 赞同：3
> 
> 时间：2012-11-30T09:04:52.713
> 
> 标签：f#, functional-programming, matching

else 语句之前的行显然期待一个单位，但得到了一个布尔值。我刚开始使用 F#，但无法理解这一点。

由于我以前从未使用过 Stackoverflow，所以我正在与布局作斗争，而且代码框仍然让我感到困惑！我相信，原件中的间距是正确的。

```
let m = Dictionary<int, int>() 

let rec fib i = 
    match i with
    | 1 -> i
    | 0 -> i
    | _ -> 
        if m.ContainsKey(i) then  
           if m.[i] > 0 then 
              m.[i] 
            else
              let x = fib(i - 1) + fib(i - 2)
              m.Add(i, x)
        m.[i] 
```

如果有人能告诉我如何在这些帖子中保持间距，我将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T09:45:56.310

最后一点有点错误 - 应该是

```
if m.ContainsKey(i) then  
       if m.[i] > 0 then 
          m.[i] 
        else
          let x = fib(i - 1) + fib(i - 2)
          m.Add(i, x)
          x 
```

您正在从 if 语句中返回。你可能也不需要`if m.[i] > 0`。在这种情况下，您会得到

```
let m = Dictionary<int, int>() 

let rec fib i = 
    match i with
    | 1 -> i
    | 0 -> i
    | _ -> 
        if m.ContainsKey(i) then  
            m.[i] 
        else
            let x = fib(i - 1) + fib(i - 2)
            m.Add(i, x)
            m.[i] 
```

要在 Stackoverflow 上进行格式化，只需将代码粘贴进去，然后突出显示，然后按 ctrl+k 或点击`{}`按钮以自动将该部分置于代码模式（代码在普通文本之后缩进四个空格）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T11:28:43.807

如果您不熟悉此类语言，则很容易犯错误。请记住，F# 是基于表达式的，因此`if`- `then`-`else`子句是计算结果的表达式。为了实现这一点，类型检查器要求 if 表达式的所有分支都具有相同的类型，就像模式匹配一​​样。此外，`if`缺少关闭分支的表达式`else`仅在其分支类型为 时才有效`unit`。

牢记这些事情，您可以看到此代码段不会通过类型检查，原因有两个：

1.  嵌套`if`表达式具有产生不同类型值的分支（即`int`and `unit`）和
2.  外部`if`表达式期望内部表达式具有 type `unit`。

希望这可以帮助 ：）

# c# - 如何为非托管导出声明数组类型

> ID：13641954
> 
> 赞同：1
> 
> 时间：2012-11-30T09:05:07.670
> 
> 标签：c#, delphi

我正在使用[UnmanagedExports](https://nuget.org/packages/UnmanagedExports)从 Delphi Win32 程序中调用 .NET C# 类库函数。像魅力一样工作！

我还没有发现如何在 C# 和 Delphi 端声明数组类型（如 int[] 或 IMyUnknownBasedInterface[]），以便我可以在两种语言之间交换数组。如果不可能，我也很乐意使用某种集合对象或索引器方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:38:00.867

在 C# 端这样做：

```
[DllExport("Foo", CallingConvention = CallingConvention.Stdcall)]
static extern void Foo(int[] a, int len); 
```

在德尔福方面是这样的：

```
procedure Foo(a: PInteger; len: Integer); stdcall; external 'manageddll.dll'; 
```

要从 Delphi 调用该函数，您可以这样做：

```
var
  a: array of Integer;
....
SetLength(a, 666);
//populate a
Foo(PInteger(a), Length(a)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:39:11.933

这在 C# 方面很容易，但在 Delphi 方面它可以是皇家 PITA。

这里的问题是，如果你有一个从本机编组的接口的数组属性，那么 CLR 将对数组大小非常挑剔。

你最好的选择是一个安全的数组，它很容易在 C# 中声明......

```
public interface ISample
{
    int[] YourArray
    {
        [return:MarshalAs(UnmanagedType.SafeArray)]
        get;
    } 
```

然而，在 Delphi 方面处理安全数组是相当痛苦的。

对于我自己的东西，我根本没有在本机和 C# 之间共享的接口中发布数组。我使用了一个模仿 IEnumerable 的接口，但可以在 Delphi 或 C# 中轻松实现。

当您让它返回另一个提供方法 MoveNext、GetCurrent 和属性 Current 的接口时，C# 和 Delphi 都会让您愉快地 foreach 处理它。

# json - 如何在 ruby on rails 中对值列表进行排序？

> ID：13641958
> 
> 赞同：0
> 
> 时间：2012-11-30T09:05:20.157
> 
> 标签：json, jquery-ui, ruby-on-rails-3.2

我的任务是对学生名单进行排序。我有一个实体学生，具有三个属性名称、年龄、城市。我的学生控制器页面如下所示

```
class StudentsController < ApplicationController
   def list
    @students = Student.all
    @jtable = {'Result' => 'OK','Records' => @students.map(&:attributes)}

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @jtable}
    end
  end
  # GET /students/new
  # GET /students/new.json
  def new
    @student = Student.new
    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @student }
    end
  end
  # GET /students/1/edit
  def edit
    @student = Student.find(params[:id])
  end

  def editstudent
    @student = Student.find(params[:id])
      puts @student.inspect
    respond_to do |format|
      if @student.update_attributes(params[:student])
        puts '+++++++'

        @jtable = {'Result' => 'OK'}
        format.html { redirect_to @student, :notice => 'Student was successfully updated.' }
        format.json { render :json => @jtable }
        else
         @jtable = {'Result' => 'ERROR','Message'=>'Empty'}
          format.html { render :action => "edit" }
          format.json { render :json => @jtable.errors, :status => :unprocessable_entity }
      end
    end
  end
  # DELETE /students/1
  # DELETE /students/1.json
  def deletestudent
    @student = Student.find(params[:id])
    @student.destroy
    @jtable = {'Result' => 'OK'}

    respond_to do |format|

      format.json { render :json => @jtable }
    end
  end
end 
```

index.html.erb 文件是

```
<html>
    <head>
        <%=stylesheet_link_tag "jtable_blue","http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css","validationEngine.jquery",:media => "all" %>
        <%= javascript_include_tag "jquery-1.8.3.min","http://code.jquery.com/ui/1.9.1/jquery-ui.js","jquery.jtable.min","jquery.validationEngine","jquery.validationEngine-en"%>
<script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-22169554-3']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

<style>
        #QuickImageLinks
        {
            text-align: center;
        }

        #QuickImageLinks img
        {
            border: none;
            margin: 0px;
            padding: 0px;
        }

        .child-opener-image
        {
            cursor: pointer;
        }

        .child-opener-image-column
        {
            text-align: center;
        }

        .jtable-dialog-form
        {
            min-width: 220px;
        }

        .jtable-dialog-form input[type="text"]
        {
            min-width: 200px;
        }

    </style>
    </head>
    <body>
     <div class="site-container">

    <div class="content-container">

    <div id="StudentTableContainer">
    </div>

<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function () {
        jQuery('#StudentTableContainer').jtable({
            title:'StudentList',
            sorting: true, //Enable sorting
            defaultSorting: 'name ASC', //Set default sorting
            actions: {
                listAction: '/students/list',
                createAction: '/students/newstudent',
                updateAction: '/students/editstudent',
                deleteAction: '/students/deletestudent'
            },
            fields: {
                id: {
                    key: true,
                    create: false,
                    edit: false,
                    list: false
                },
                 addresses: {
                    title: '',
                    width: '5%',
                    sorting: false,
                    edit: false,
                    create: false,
                    listClass: 'child-opener-image-column',
                    display: function (studentData) {
                        //Create an image that will be used to open child table
                        var $img = $('<img class="child-opener-image" src="/assets/phone.png" title="Edit Address" />');
                        //Open child table when user clicks the image
                        $img.click(function () {
                             jQuery('#StudentTableContainer').jtable('openChildTable',
                                    $img.closest('tr'),
                                    {
                                        title: studentData.record.name + ' - Addresses',
                                        actions: {
                                            listAction: '/addresses/AddressList?student_id=' + studentData.record.id,
                                            deleteAction: 'addresses/DeleteAddress',
                                            updateAction: 'addresses/UpdateAddress',
                                            createAction: 'addresses/CreateAddress'
                                        },
                                        fields: {
                                           student_id: {
                                                type: 'hidden',
                                                defaultValue: studentData.record.id
                                            },
                                            id: {
                                                key: true,
                                                create: false,
                                                edit: false,
                                                list: false
                                            },
                                            hname: {
                                                title: 'HouseName',
                                                width: '30%',
                                            },
                                            place: {
                                                title: 'Place',
                                                width: '30%'
                                            },
                                            state: {
                                                title: 'State',
                                                width: '30%'
                                            }
                                            },
                                             formCreated: function (event, data) {
                                             data.form.validationEngine();
                                             },
                                            formSubmitting: function (event, data) {
                                             return data.form.validationEngine('validate');
                                            },
                                            formClosed: function (event, data) {
                                             data.form.validationEngine('hide');
                                             data.form.validationEngine('detach');
                                    }
                                    }, 
                                    function (data) { //opened handler
                                        data.childTable.jtable('load');
                                    });
                        });
                        //Return image to show on the person row
                        return $img;
                    }
                },
                name: {
                    title: 'Name',
                    width: '40%'
                },
                age: {
                    title: 'Age',
                    width: '20%'
                },
                city: {
                    title: 'City',
                    width: '30%'
                }

            }
        });

       jQuery('#StudentTableContainer').jtable('load');
    });
</script>
</div></div></body></html> 
```

如何在 ruby​​ on rails 中按升序对学生列表进行排序？请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:23:32.427

您可以通过这种方式使用[Active Record 查询接口](http://guides.rubyonrails.org/active_record_querying.html#ordering) 。

`Student.order("name ASC") # Returns all students sorted in ascending order by name`

`Student.find(:all, :order => "age DESC") # Returns all students sorted by age in descending order`

查看此内容以查找和排序嵌套模型。[Rails Active Record：与 :order 和 :group 一起查找](https://stackoverflow.com/questions/1129792/rails-active-record-find-in-conjunction-with-order-and-group)

# ios - 我应该如何设计图像大小以支持所有 iOS 设备 Retina Display

> ID：13641961
> 
> 赞同：1
> 
> 时间：2012-11-30T09:05:23.567
> 
> 标签：ios, xcode, retina-display

我正在开发一款通用纸牌游戏，我将为 iPhone-3.5 英寸、iPhone-4 英寸、iPad 和 iPad mini 使用不同的卡片尺寸。我需要显卡支持 Retina Display，所以我应该创建 4 个图像吗？喜欢 ：

*   card_iphone35@2x.png
*   card_iphone4@2x.png
*   card_ipad@2x.png
*   card_ipad-mini@2x.png

或者我只为 iPad Retina Display 创建 1 个图像，然后我在 iPhone-3.5inch 中使用它，UIImageView 被缩小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:41:34.933

是的，您应该为每个设备创建一个映像。

我建议您查看 iOS 人机界面指南，它解释了与大小、图标、图像有关的所有内容......

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/Introduction/Introduction.html)

# c# - 备份后如何设置access数据库的密码

> ID：13641965
> 
> 赞同：0
> 
> 时间：2012-11-30T09:05:31.650
> 
> 标签：c#, ms-access-2007, c#-2.0

在c#中备份后如何在access数据库上设置密码。使客户端无法打开数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:29:32.777

像这样的东西？或者你的意思是另一回事？ [http://social.msdn.microsoft.com/Forums/eu/adodotnetdataproviders/thread/8c513514-a588-4ef3-955b-9ea641070bb1](http://social.msdn.microsoft.com/Forums/eu/adodotnetdataproviders/thread/8c513514-a588-4ef3-955b-9ea641070bb1)

# java - Camel xpath toLowerCase 并包含

> ID：13641967
> 
> 赞同：2
> 
> 时间：2012-11-30T09:05:35.010
> 
> 标签：java, xpath, apache-camel

在我们的应用程序中，我们正在转向骆驼。我需要处理一些 xml 消息（获取值\比较状态）。为了解决这个问题，有一堆使用纯 java 编写的自定义处理器，但我被要求使用骆驼特性来改变它。代码示例：

```
.choice()
    .when().xpath("/Response/Header/Status = 'OK' ")...... 
```

这工作正常。

现在我需要将提示与其他提示进行比较，为此我需要设置以下值：

```
/Response/Header/Hint 
```

小写并检查包含。If - /Response/Header/Hint 值（例如：

```
<Hint>MyHint</Hint> 
```

- 小写包含“提示”然后路由到......否则......我不是xpath专家，骆驼看起来有一些变化，所以请你帮我解决这个问题。

我感兴趣的另一件事是，如何在转发消息之前删除整个 <Hint>MyHint</Hint> （删除一些标签）

你能建议一些教程来快速进入骆驼的xpath。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:34:35.403

答案是这样的：

```
.choice()
    .when().xpath("/Response/Header/Status/text() = 'OK'")
        .to("xslt:xsl/RemoveTag.xsl")
            .choice().when().xpath("//Response/Header/Hint[contains(translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'hint')]").to 
```

RemoveTag.xsl 是一个小改动[，使用 XSLT 删除 xml 标签](https://stackoverflow.com/questions/2641681/remove-xml-tags-with-xslt) 非常感谢 olivier roger！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:03:55.563

您可以使用`fn:lower-case(string)`如何比较提示，如[如何使用 XSLT 将字符串转换为大写或小写？](https://stackoverflow.com/questions/586231/how-can-i-convert-a-string-to-upper-or-lower-case-with-xslt).

关于删除`<Hint>`标签，您有多种可能性，例如：

1.  使用[XSLT过滤内容，如使用 XSLT](http://camel.apache.org/xslt.html)[删除 xml 标记](https://stackoverflow.com/questions/2641681/remove-xml-tags-with-xslt)中所示
2.  调用进行过滤的[Bean](http://camel.apache.org/bean.html)

# c - Linux中的Makefile C

> ID：13641970
> 
> 赞同：2
> 
> 时间：2012-11-30T09:05:49.377
> 
> 标签：c, makefile

我在 .c 文件和 main.c 中分隔了 3 个函数，我想制作 make 文件，我在文件中写道：

```
# Indicate that the compiler is the gcc compiler

CC=gc

# Indicate to the compiler to include header files in the local folder
CPPFLAGS = -I

main: method1.o
main: method2.o
main: method3.o
main: method4.o
main.o: main.h 
```

而方法 1,2,3,4 是主 .c 的功能，当我在 shell 中键入 make 时出现以下问题：

```
make
gcc  -I  -c -o method1.o method1.c
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
collect2: ld returned 1 exit status
make: *** [method1.o] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:13:03.483

如果您的项目包含以下文件：`method1.c` `method2.c` `method3.c` `method4.c`和`main.c`

您可以使用以下make文件

```
CPPFLAGS=-I/path/to/header/files
CC=gcc
all: main

%.o: %.c
    $(CC) $(CPPFLAGS)  -c -o $@ $^

main: method1.o method2.o method3.o method4.o main.o
    $(CC) -o $@ $^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:19:54.153

问题在于您的`CPPFLAGS`定义：

```
# Indicate to the compiler to include header files in the local folder
CPPFLAGS = -I 
```

根据上面的评论，它错过了一个`.`：

```
CPPFLAGS = -I. 
```

Otherwise, `gcc` will treat the `-c` that comes after `-I` in your command line as the name of a directory where it can search for headers. Thus, as far as `gcc` is concerned there's no `-c` *option*, and it will attempt to link `method1.c` as a complete application, hence the error message complaining that there's no `main` function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:24:08.180

```
CC=gcc
CPPFLAGS=-I include
VPATH=src include
main: main.o method1.o method2.o method3.o method4.o -lm
    $(CC) $^ -o $@
main.o: main.c main.h
    $(CC) $(CPPFLAGS) -c $<
method1.o: method1.c
    $(CC) $(CPPFLAGS) -c $<
method2.o: method2.c
    $(CC) $(CPPFLAGS) -c $<
method3.o: method3.c
    $(CC) $(CPPFLAGS) -c $<
method4.o: method4.c
    $(CC) $(CPPFLAGS) -c $< 
```

it worked like this

# python - py.test 如何以及在哪里找到固定装置

> ID：13641973
> 
> 赞同：42
> 
> 时间：2012-11-30T09:05:52.540
> 
> 标签：python, fixtures, pytest

py.test 在哪里以及如何查找固定装置？我在同一个文件夹中的 2 个文件中有相同的代码。当我删除 conftest.py 时，找不到运行 test_conf.py 的 cmdopt（也在同一个文件夹中。为什么没有搜索到 sonoftest.py？

```
# content of test_sample.py
def test_answer(cmdopt):
    if cmdopt == "type1":
        print ("first")
    elif cmdopt == "type2":
        print ("second")
    assert 0 # to see what was printed 
```

# conftest.py 的内容

```
import pytest

def pytest_addoption(parser):
    parser.addoption("--cmdopt", action="store", default="type1",
        help="my option: type1 or type2")

@pytest.fixture
def cmdopt(request):
    return request.config.getoption("--cmdopt") 
```

# sonoftest.py 的内容

```
import pytest

def pytest_addoption(parser):
    parser.addoption("--cmdopt", action="store", default="type1",
        help="my option: type1 or type2")

@pytest.fixture
def cmdopt(request):
    return request.config.getoption("--cmdopt") 
```

文档说

[http://pytest.org/latest/fixture.html#fixture-function](http://pytest.org/latest/fixture.html#fixture-function)

> 1.  由于 test_ 前缀，pytest 找到了 test_ehlo。测试函数需要一个名为 smtp 的函数参数。通过查找名为 smtp 的带有夹具标记的函数来发现匹配的夹具函数。
> 2.  smtp() 被调用来创建一个实例。
> 3.  test_ehlo() 在测试函数的最后一行被调​​用并失败。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-30T10:17:24.343

默认情况下， py.test 将导入与模式`conftest.py`匹配的所有 Python 文件。如果你有一个测试夹具，你需要从依赖它的测试文件中包含或导入它：`python_files``test_*.py``conftest.py`

```
from sonoftest import pytest_addoption, cmdopt 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-03T15:19:40.073

这是 py.test 查找固定装置（和测试）的顺序和位置（取自[此处](http://pytest.org/latest/plugins.html#plugin-discovery-order-at-tool-startup)）：

py.test 在工具启动时通过以下方式加载插件模块：

> 1.  通过加载所有内置插件
>     
>     
> 2.  通过加载通过 setuptools 入口点注册的所有插件。
>     
>     
> 3.  通过预先扫描命令行中的`-p name`选项并在实际命令行解析之前加载指定的插件。
>     
>     
> 4.  通过加载`conftest.py`命令行调用推断的所有文件（测试文件及其所有父目录）。请注意， `conftest.py`默认情况下，子目录中的文件不会在工具启动时加载。
>     
>     
> 5.  通过递归加载`conftest.py`文件中 pytest_plugins 变量指定的所有插件

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-17T18:19:14.833

我遇到了同样的问题并花了很多时间寻找一个简单的解决方案，这个例子适用于与我有类似情况的其他人。

*   conftest.py：

```
import pytest

pytest_plugins = [
 "some_package.sonoftest"
]

def pytest_addoption(parser):
  parser.addoption("--cmdopt", action="store", default="type1",
      help="my option: type1 or type2")

@pytest.fixture
def cmdopt(request):
  return request.config.getoption("--cmdopt") 
```

*   some_package/sonoftest.py：

```
import pytest

@pytest.fixture
def sono_cmdopt(request):
  return request.config.getoption("--cmdopt") 
```

*   some_package/test_sample.py

```
def test_answer1(cmdopt):
  if cmdopt == "type1":
      print ("first")
  elif cmdopt == "type2":
      print ("second")
  assert 0 # to see what was printed

def test_answer2(sono_cmdopt):
  if sono_cmdopt == "type1":
      print ("first")
  elif sono_cmdopt == "type2":
      print ("second")
  assert 0 # to see what was printed 
```

您可以在此处找到类似的示例：[https](https://github.com/pytest-dev/pytest/issues/3039#issuecomment-464489204) ://github.com/pytest-dev/pytest/issues/3039#issuecomment-464489204 和其他此处[https://stackoverflow.com/a/54736376/6655459](https://stackoverflow.com/a/54736376/6655459)

来自官方 pytest 文档的描述：[https ://docs.pytest.org/en/latest/reference.html?highlight=pytest_plugins#pytest-plugins](https://docs.pytest.org/en/latest/reference.html?highlight=pytest_plugins#pytest-plugins)

> 请注意，引用的各个目录 `some_package.test_sample"`需要有`__init__.py`文件供插件加载`pytest`

# asp.net - 如何将具有分页功能的 Datalist 与下拉列表绑定？

> ID：13641974
> 
> 赞同：0
> 
> 时间：2012-11-30T09:05:56.837
> 
> 标签：asp.net

我是 asp.net 的新手，有一些线索，但不知道如何做到这一点，所以任何帮助都会非常感谢。

我有一个带分页的数据列表如何通过下拉列表从用户输入更新数据列表，这将绑定我的数据列表和分页？

我的私人财产

```
private int CurrentPage
    {
        get
        {
            object objPage = ViewState["_CurrentPage"];
            int _CurrentPage = 0;
            if (objPage == null)
            {
                _CurrentPage = 0;
            }
            else
            {
                _CurrentPage = (int)objPage;
            }
            return _CurrentPage;
        }
        set { ViewState["_CurrentPage"] = value; }
    }
    private int fistIndex
    {
        get
        {

            int _FirstIndex = 0;
            if (ViewState["_FirstIndex"] == null)
            {
                _FirstIndex = 0;
            }
            else
            {
                _FirstIndex = Convert.ToInt32(ViewState["_FirstIndex"]);
            }
            return _FirstIndex;
        }
        set { ViewState["_FirstIndex"] = value; }
    }
    private int lastIndex
    {
        get
        {

            int _LastIndex = 0;
            if (ViewState["_LastIndex"] == null)
            {
                _LastIndex = 0;
            }
            else
            {
                _LastIndex = Convert.ToInt32(ViewState["_LastIndex"]);
            }
            return _LastIndex;
        }
        set { ViewState["_LastIndex"] = value; }
    } 
```

私有方法

```
private void BindItemsList()
    {

        DataTable dataTable = dm.GetDataTable().Tables["product"];// middle tier which pulls data from a database
        _PageDataSource.DataSource = dataTable.DefaultView;
        _PageDataSource.AllowPaging = true;
        _PageDataSource.PageSize = 1;
        _PageDataSource.CurrentPageIndex = CurrentPage;
        ViewState["TotalPages"] = _PageDataSource.PageCount;

        this.lblPageInfo.Text = "Page " + (CurrentPage + 1) + " of " + _PageDataSource.PageCount;
        this.lbtnPrevious.Enabled = !_PageDataSource.IsFirstPage;
        this.lbtnNext.Enabled = !_PageDataSource.IsLastPage;
        this.lbtnFirst.Enabled = !_PageDataSource.IsFirstPage;
        this.lbtnLast.Enabled = !_PageDataSource.IsLastPage;

        this.dlPhones.DataSource = _PageDataSource;
        this.dlPhones.DataBind();
        this.doPaging();
    }

    /// <summary>
    /// Binding Paging List
    /// </summary>
    private void doPaging()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("PageIndex");
        dt.Columns.Add("PageText");

        fistIndex = CurrentPage - 5;

        if (CurrentPage > 5)
        {
            lastIndex = CurrentPage + 5;
        }
        else
        {
            lastIndex = 10;
        }
        if (lastIndex > Convert.ToInt32(ViewState["TotalPages"]))
        {
            lastIndex = Convert.ToInt32(ViewState["TotalPages"]);
            fistIndex = lastIndex - 10;
        }

        if (fistIndex < 0)
        {
            fistIndex = 0;
        }

        for (int i = fistIndex; i < lastIndex; i++)
        {
            DataRow dr = dt.NewRow();
            dr[0] = i;
            dr[1] = i + 1;
            dt.Rows.Add(dr);
        }

        this.dlPaging.DataSource = dt;
        this.dlPaging.DataBind();
    } 
```

页面代码背后的代码

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            this.BindItemsList();
        }
    }//end of page load
    protected void lbtnNext_Click(object sender, EventArgs e)
    {

        CurrentPage += 1;
        this.BindItemsList();

    }
    protected void lbtnPrevious_Click(object sender, EventArgs e)
    {
        CurrentPage -= 1;
        this.BindItemsList();

    }
    protected void dlPaging_ItemCommand(object source, DataListCommandEventArgs e)
    {
        if (e.CommandName.Equals("Paging"))
        {
            CurrentPage = Convert.ToInt16(e.CommandArgument.ToString());
            this.BindItemsList();
        }
    }
    protected void dlPaging_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        LinkButton lnkbtnPage = (LinkButton)e.Item.FindControl("lnkbtnPaging");
        if (lnkbtnPage.CommandArgument.ToString() == CurrentPage.ToString())
        {
            lnkbtnPage.Enabled = false;
            lnkbtnPage.Style.Add("fone-size", "14px");
            lnkbtnPage.Font.Bold = true;

        }
    }
    protected void lbtnLast_Click(object sender, EventArgs e)
    {

        CurrentPage = (Convert.ToInt32(ViewState["TotalPages"]) - 1);
        this.BindItemsList();

    }
    protected void lbtnFirst_Click(object sender, EventArgs e)
    {

        CurrentPage = 0;
        this.BindItemsList();

    } 
```

asp.net 头版

```
<asp:Label ID="lblSearch" runat="server" Text="Search By Phone"></asp:Label>
                <asp:DropDownList ID="ddlCat" runat="server">
                    <asp:ListItem>Nokia</asp:ListItem>
                    <asp:ListItem>Samsung</asp:ListItem>
                    <asp:ListItem>Motorola</asp:ListItem>
                    <asp:ListItem>Sony</asp:ListItem>
                    <asp:ListItem>Ericsson</asp:ListItem>
                    <asp:ListItem>Sony</asp:ListItem>
                    <asp:ListItem>LG</asp:ListItem>
                    <asp:ListItem>Apple</asp:ListItem>
                    <asp:ListItem>HTC</asp:ListItem>
                    <asp:ListItem>BlackBerry</asp:ListItem>
                    <asp:ListItem>HP</asp:ListItem>
                    <asp:ListItem>Huawei</asp:ListItem>
                    <asp:ListItem>Acer</asp:ListItem>
                    <asp:ListItem>Asus</asp:ListItem>
                    <asp:ListItem>Dell</asp:ListItem>
                    <asp:ListItem>Alcatel</asp:ListItem>
                    <asp:ListItem>Vodafone</asp:ListItem>
                    <asp:ListItem>T-Mobile</asp:ListItem>
                    <asp:ListItem>Toshiba</asp:ListItem>
                    <asp:ListItem>Gigabyte</asp:ListItem>
                    <asp:ListItem>Pantech</asp:ListItem>
                    <asp:ListItem>ZTE</asp:ListItem>
                    <asp:ListItem>Micromax</asp:ListItem>
                    <asp:ListItem>BLU</asp:ListItem>
                    <asp:ListItem>Spice</asp:ListItem>
                    <asp:ListItem>Icemobile</asp:ListItem>
                    <asp:ListItem>verykool</asp:ListItem>
                    <asp:ListItem>Vertu</asp:ListItem>
                    <asp:ListItem>Celkon</asp:ListItem>
                    <asp:ListItem>NIU</asp:ListItem>
                    <asp:ListItem>Yezz</asp:ListItem>
                    <asp:ListItem>Parla</asp:ListItem>
                    <asp:ListItem>Plum</asp:ListItem>
                    <asp:ListItem>Sim Card</asp:ListItem>
                </asp:DropDownList>
                <asp:DataList ID="dlPhones" runat="server" DataKeyField="PID" RepeatDirection="Horizontal" RepeatColumns="1" CellPadding="10" CellSpacing="10" >
                    <ItemTemplate>           
                        <asp:Label ID="ProductNameLabel" runat="server" Text='<%# Eval("ProductName") %>' />   
                        <br />Price:
                        <asp:Label ID="PriceLabel" runat="server" Text='<%# "$" + Eval("Price") %>'  />
                        <br />

                        <asp:Image ID="Image1" runat="server" CssClass="ImageStyles" ImageUrl='<%# "GetImage.ashx?Id=" + Eval("PID") %>' BackColor="White" BorderStyle="Ridge" BorderColor="WhiteSmoke" />
                        <br />           
                    </ItemTemplate>
                </asp:DataList>                
               <table cellpadding="0" border="0">
                    <tr>
                        <td align="right">
                            <asp:LinkButton ID="lbtnFirst" runat="server" CausesValidation="false" OnClick="lbtnFirst_Click"><img src="images/First.png" height="50px" width="100px" onmouseover="this.src='images/FirstMouseOver.png';" onmouseout="this.src='images/First.png';" /></asp:LinkButton>
                            &nbsp;</td>
                        <td align="right">
                            <asp:LinkButton ID="lbtnPrevious" runat="server" CausesValidation="false" OnClick="lbtnPrevious_Click"><img src="images/Previouse.png" onmouseover="this.src='images/PreviouseMouseOver.png';" onmouseout="this.src='images/Previouse.png';" /></asp:LinkButton>&nbsp;&nbsp;</td>
                        <td align="center" valign="middle">
                            <asp:DataList ID="dlPaging" runat="server" RepeatDirection="Horizontal" OnItemCommand="dlPaging_ItemCommand"
                                OnItemDataBound="dlPaging_ItemDataBound">
                                <ItemTemplate>
                                    <asp:LinkButton ID="lnkbtnPaging" Font-Size="X-Large" runat="server" CommandArgument='<%# Eval("PageIndex") %>'
                                        CommandName="Paging" Text='<%# Eval("PageText") %>'></asp:LinkButton>&nbsp;
                                </ItemTemplate>
                            </asp:DataList>
                        </td>
                        <td align="left">
                            &nbsp;&nbsp;<asp:LinkButton ID="lbtnNext" runat="server" CausesValidation="false"
                                OnClick="lbtnNext_Click"><img src="images/Next.png" onmouseover="this.src='images/NextMouseOver.png';" onmouseout="this.src='images/Next.png';" /></asp:LinkButton></td>
                        <td align="left">
                            &nbsp;
                            <asp:LinkButton ID="lbtnLast" runat="server" CausesValidation="false" OnClick="lbtnLast_Click"><img src="images/Last.png" onmouseover="this.src='images/LastMouseOver.png';" onmouseout="this.src='images/Last.png';" /></asp:LinkButton></td>
                    </tr>
                    <tr>
                        <td colspan="5" align="center" style="height: 30px" valign="middle">
                            <asp:Label ID="lblPageInfo" runat="server"></asp:Label></td>
                    </tr>
                </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:41:18.943

我自己想出了要发布解决方案的内容，以防万一有人遇到同样的问题。

我不确定这是否是最好的方法，所以请原谅我。

1) 创建一个`Session["search"] = "First";`

2）创建下拉列表onselectindexchange的方法

```
<asp:DropDownList ID="ddlCat" runat="server" AutoPostBack="true" OnSelectedIndexChanged="itemSelected">

Code behind method

protected void itemSelected(object sender, EventArgs e)
    {
        Session["search"] = "Second";
        RebindItemList();
    } 
```

3) 重新绑定方法

```
private void RebindItemList()
    {
        DataTable dataTable = dm.GetSpecifProduct(ddlCat.SelectedItem.Text).Tables["product"];// middle tier method with returns a Dataset or DataTable up to you.
        _PageDataSource.DataSource = dataTable.DefaultView;
        _PageDataSource.AllowPaging = true;
        _PageDataSource.PageSize = 1;
        _PageDataSource.CurrentPageIndex = CurrentPage;
        ViewState["TotalPages"] = _PageDataSource.PageCount;

        this.lblPageInfo.Text = "Page " + (CurrentPage + 1) + " of " + _PageDataSource.PageCount;
        this.lbtnPrevious.Enabled = !_PageDataSource.IsFirstPage;
        this.lbtnNext.Enabled = !_PageDataSource.IsLastPage;
        this.lbtnFirst.Enabled = !_PageDataSource.IsFirstPage;
        this.lbtnLast.Enabled = !_PageDataSource.IsLastPage;

        this.dlPhones.DataSource = _PageDataSource;
        this.dlPhones.DataBind();
        this.doPaging();
    } 
```

4) 分页按钮的逻辑语句

```
protected void lbtnNext_Click(object sender, EventArgs e)
    {

        CurrentPage += 1;
        string searchCat = (string) Session["search"];
        if (searchCat == "First")
        {
            this.BindItemsList();
        }
        if (searchCat == "Second")
        {
            this.RebindItemList();
        }
    }
    protected void lbtnPrevious_Click(object sender, EventArgs e)
    {
        CurrentPage -= 1;
        string searchCat = (string)Session["search"];
        if (searchCat == "First")
        {
            this.BindItemsList();
        }
        if (searchCat == "Second")
        {
            this.RebindItemList();
        }

    }
    protected void dlPaging_ItemCommand(object source, DataListCommandEventArgs e)
    {
        if (e.CommandName.Equals("Paging"))
        {
            CurrentPage = Convert.ToInt16(e.CommandArgument.ToString());
            string searchCat = (string)Session["search"];
            if (searchCat == "First")
            {
                this.BindItemsList();
            }
            if (searchCat == "Second")
            {
                this.RebindItemList();
            }
        }
    }
    protected void dlPaging_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        LinkButton lnkbtnPage = (LinkButton)e.Item.FindControl("lnkbtnPaging");
        if (lnkbtnPage.CommandArgument.ToString() == CurrentPage.ToString())
        {
            lnkbtnPage.Enabled = false;
            lnkbtnPage.Style.Add("fone-size", "14px");
            lnkbtnPage.Font.Bold = true;

        }
    }
    protected void lbtnLast_Click(object sender, EventArgs e)
    {

        CurrentPage = (Convert.ToInt32(ViewState["TotalPages"]) - 1);
        string searchCat = (string)Session["search"];
        if (searchCat == "First")
        {
            this.BindItemsList();
        }
        if (searchCat == "Second")
        {
            this.RebindItemList();
        }

    }
    protected void lbtnFirst_Click(object sender, EventArgs e)
    {

        CurrentPage = 0;
        string searchCat = (string)Session["search"];
        if (searchCat == "First")
        {
            this.BindItemsList();
        }
        if (searchCat == "Second")
        {
            this.RebindItemList();
        }

    } 
```

# joomla - ' 标题问题 (Joomla) 及其在 Facebook 中的呈现方式

> ID：13641977
> 
> 赞同：4
> 
> 时间：2012-11-30T09:06:12.030
> 
> 标签：joomla, title, meta, joomla-k2

您好，我使用 Joomla 作为 CMS 和插件 (K2) 来处理我的文章。现在所有的元标题都在输出这个 ' 当有撇号时，Facebook 帖子会像这样呈现

加拿大的经济行动计划：细分。

我认为正在发生的事情是标题被过滤了两次，给出了撇号的双重代码。这就是我的想法，但我不知道。看看这个页面源的标题

[http://www.thebeaverton.com/local/local-in-brief/item/360-teacher-compares-death-of-kindergartners-puppy-to-divorce-from-kathy](http://www.thebeaverton.com/local/local-in-brief/item/360-teacher-compares-death-of-kindergartners-puppy-to-divorce-from-kathy)

你会看到

```
<pre> meta name="title" content="Teacher compares death of kindergartner&amp;#039s    puppy to divorce from Kathy" </pre> 
```

我该怎么做才能阻止这一切？我所有的访问者都来自 Facebook 分享，所以这很糟糕。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:18:33.857

The simple solution is to add a Description in the Metadata Information tab (K2 Edit Item) for any K2 items with special characters which will override the default handling and provide control over how it appears in FB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:12:02.977

将您的 k2 版本更新到最新（2.6.2）这个错误 - 我认为在 k2 v2.6 中引入。此版本已修复！希望这可以帮助！！

# php - 从 url 获取文本块

> ID：13641978
> 
> 赞同：0
> 
> 时间：2012-11-30T09:06:16.690
> 
> 标签：php

例如，我有这个网址：

`http://adstorage.jamba.net/storage/view/325/0/fa/Fairytale.mp3`

如何使用 PHP 代码使其返回`Fairytale`. 之前`Fairytale`和之后的所有东西`.mp3`都应该被删除。

标识符是`/`并且`.mp3`只有`file name`应该返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:11:19.017

像这样的东西怎么样：

```
$url = "http://adstorage.jamba.net/storage/view/325/0/fa/Fairytale.mp3";

$parts = parse_url($url);
$path_parts = explode('/', $parts['path']);
list($name, $extension) = explode(".", $path_parts[count($path_parts) - 1]);
echo $name; 
```

这可能是矫枉过正，这件事可以用一个简单的正则表达式来完成，比如：

```
preg_match("#.*/(\w+)\.\w+#", $url, $matches);
echo $matches[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:13:34.433

使用 pathinfo 函数

```
<?php

$url = "http://adstorage.jamba.net/storage/view/325/0/fa/Fairytale.mp3";

$f = pathinfo($url);

echo $f[filename]; // File name Fairytale

print_r(pathinfo($url)); // File Array

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-02T06:15:56.157

使用`pathinfo()`功能

```
<?php
$url = "http://example.com/file_name.mp3";
$f = pathinfo($url);
echo $f[filename]; // File name
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T09:12:44.547

你可以试试：

```
$input = 'http://adstorage.jamba.net/storage/view/325/0/fa/Fairytale.mp3';
echo current(explode('.', basename($input))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T09:20:08.373

尝试一行， $input 是你的 url (php 5.4)：

```
$name = explode('.',array_slice(explode('/',$input), -1, 1))[0]; 
```

# php - PHP用常量合并两个文件

> ID：13641979
> 
> 赞同：1
> 
> 时间：2012-11-30T09:06:18.193
> 
> 标签：php

我有一个需要升级的 PHP 脚本，它有大约 50 个将语言字符串定义为常量的语言文件，例如：

```
define('ERROR_LOGIN', 'Wrong username and password');
define('SUCCESS_LOGIN', 'Successful login');
define('COPYRIGHT', '&copy; 2012 Company inc.'); 
```

...ETC。一些常量甚至是多行的并且有转义字符等。

我们对这些语言文件有自己的翻译，但现在我们想升级到该脚本的新版本，该脚本具有许多新常量，因为它还具有许多新功能。这些新常量没有在新语言文件的末尾定义 - 只需复制/粘贴新字符串就很容易 - 它们甚至在旧字符串之间定义，而且一些旧常量现在在新版本中已过时。

所以我的问题是 - 通过保留旧文件的常量并仅在文件末尾添加新常量以便我们只能翻译新常量来合并新旧语言文件的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:07:59.240

您遇到了使用常量的问题之一——它们确实是常量。

但是，您可以通过单独从每组常量中提取信息来解决此问题：

使用常量加载第一个文件，调用[`get_defined_constants`](http://no.php.net/manual/en/function.get-defined-constants.php)并将输出序列化为临时文件。

在第二个文件/request/call中，用常量加载第二个文件，[`get_defined_constants`](http://no.php.net/manual/en/function.get-defined-constants.php)再次调用，从临时文件中反序列化之前的信息，比较`'user'`get_defined_constants返回的数组部分的内容。

重要的是在两次执行中执行此操作，因此将在两次调用之间删除常量。

# c# - 用于 C# 的外部 Excel 库以运行宏

> ID：13641982
> 
> 赞同：1
> 
> 时间：2012-11-30T09:06:28.723
> 
> 标签：c#, excel, visual-studio-macros

您是否知道任何可以运行宏的 C# 外部 MS Excel 库（它应该可以在没有安装 MS Office 的机器上工作）？

可以使用“Microsoft.Office.Interop.Excel”运行它，但为此您需要 MS Office。

场景：我有带有宏的 MS Excel 文件模板。以编程方式将部分数据添加到该模板，运行写入 excel 模板的宏，添加另一部分数据。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:23:46.337

NPOI 是一个很棒的工具并且是开源的：

[非营利组织](http://npoi.codeplex.com/releases/view/38113)

# ios - 弗兰克不能触摸带有标签的文本字段

> ID：13641992
> 
> 赞同：1
> 
> 时间：2012-11-30T09:07:04.850
> 
> 标签：ios, testing, cucumber, bdd, frank

我有一个 UITableViewCell，它由一个 UITextLable 和一个 UITextField 组成。这个 UITextField 没有占位符和可访问性提示我必须编写我的功能文件按标签触摸这个 UITextFeild。

```
当 /^I 触摸 (\d*)(?:st|nd|rd|th) 时？文本字段$/ 做 |序数|
    序数 = ordinal.to_i
    text_field_selector = "文本字段标签：#{ordinal}"
    触摸（text_field_selector）
结尾

```

使用此步骤定义，frank(cucumber) 提出错误消息说

```
找不到任何匹配的内容 [textFeild tag:2]
```

我已将代码更改为：

```
当 /^I 触摸 (\d*)(?:st|nd|rd|th) 时？文本字段$/ 做 |序数|
    序数 = ordinal.to_i
    text_field_selector = "文本字段标签：#{ordinal}"
    frankly_map (text_field_selector, 'becomeFirstResponder')
结尾

```

现在，frank 终于没有提出任何错误消息并标记为测试步骤通过，**但**我期待当来到这个测试步骤时，键盘会出现并等待用户输入文本。实际结果是键盘闪了一下，很快就消失了。什么都不能输入。

这很奇怪，我不确定这是怎么回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:04:24.193

我不知道坦率，但您可以使用`ask`方法在 Cucumber 的控制台中捕获参数。看起来像这样：

```
When /^I touch the text field$/ do
    ordinal = ask("Which field number?").to_i
    text_field_selector = "textField tag:#{ordinal}"
    touch (text_field_selector)
end 
```