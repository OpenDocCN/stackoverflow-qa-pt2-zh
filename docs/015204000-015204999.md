# StackOverflow 问答 15204000-15204999

# ios - 如果内部没有收到触摸，则通过外部识别器

> ID：15204000
> 
> 赞同：0
> 
> 时间：2013-03-04T14:36:43.793
> 
> 标签：ios, uikit, uigesturerecognizer

我有一个视图，上面有一个以编程方式绘制的圆圈。我还有一个手势识别器，它代表检查它是否应该接收触摸（如果在这个圆圈上进行了点击，它应该接收）。

```
- (void)awakeFromNib
{
    [super awakeFromNib];

    circleTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(toggleHighlighted:)];
    [self addGestureRecognizer:circleTapRecognizer];
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    CGPoint hit = [touch locationInView:self];

    if (gestureRecognizer == circleTapRecognizer) {
        BOOL hitsCircle = hit.x >= CGRectGetMidX(self.bounds) - self.circleRadius &&
                          hit.x <= CGRectGetMidX(self.bounds) + self.circleRadius &&
                          hit.y >= CGRectGetMidY(self.bounds) - self.circleRadius &&
                          hit.y <= CGRectGetMidY(self.bounds) + self.circleRadius;

        return hitsCircle;
    }

    return YES;
} 
```

但是，如果在这个圆圈之外的空间上进行了点击，我希望超级视图能够接收到触摸。我怎样才能做到这一点？当然，我可以进行一个名为的委托方法调用`tappedNotOnCircle`，它将调用 superview 的逻辑，但我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:51:41.153

有没有 GestureRecognizer 的解决方案。只需覆盖**-(BOOL)[UIView pointInside:(CGPoint)point withEvent:(UIEvent *)event]**。

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    BOOL hitsCircle = hit.x >= CGRectGetMidX(self.bounds) - self.circleRadius &&
                      hit.x <= CGRectGetMidX(self.bounds) + self.circleRadius &&
                      hit.y >= CGRectGetMidY(self.bounds) - self.circleRadius &&
                      hit.y <= CGRectGetMidY(self.bounds) + self.circleRadius;

    return hitsCircle;
} 
```

为了更好地理解，请参阅 Apple 文档[定义自定义视图](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW23)

# javascript - 在 D3 中使用转换更新数据后更新拖动/滚动原点

> ID：15204001
> 
> 赞同：0
> 
> 时间：2013-03-04T14:36:46.500
> 
> 标签：javascript, charts, drag-and-drop, d3.js, transition

我处理带有拖动、缩放和更新的图表。这通常有效，但是，在添加新数据后，拖动位置不会更新。

重现步骤：

*   看演示
*   等待几秒钟，以便将一些数据添加到图表中
*   然后尝试向左或向右拖动图形
*   图表将被推回开始，从那时起，拖动以它应该的方式工作

所以我想，在添加新数据时，我必须以某种方式更新拖动原点。但是怎么做？到目前为止，我找不到任何这样的例子。我还查看了[D3 的拖动功能的代码](https://github.com/mbostock/d3/blob/master/src/behavior/drag.js)，但我仍然不清楚。缩放也会发生同样的事情，我想那里也是同样的问题。

代码和演示可以在这里看到：http: [//jsbin.com/irixag/1/edit](http://jsbin.com/irixag/1/edit)

编辑：如果不清楚我的意思，请告诉我，以便我可以改写问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:56:10.653

好的，我一直在筛选您的代码和 d3.js 源代码，我注意到了一些事情。

首先，我的解决方案的要点是添加

```
function update() {
    ...
    if (shiftRight) {
        zoom.x(x); // You're missing this line
        ...
    }
    ...
} 
```

原因如下：

您正在使用对对象的`.x(x)`调用来初始化水平拖放。`d3.behavior.zoom()`这看起来很好，除了这个拖放处理程序不是为不同的来源设计的。

基本上，当你打电话时，你*现在*`d3.behavior.zoom().x(x)`声明的价值是原点。现在，d3.js 存储了这个值，所以即使你在动画循环中向右移动窗口，拖放仍然会遵循原来的原点。*`x`*

 *在`d3.behavior.zoom`源中有三个感兴趣的变量`x0`，`x1`， 和`translate`。是对您传入的变量`x1`的当前值的引用。是您最初传入时的复制值。是所有拖放组合的聚合翻译。`x``x0``x``translate`

现在，调用会方便`zoom.x(x)`地重置所有这三个变量，这意味着翻译只会针对当前原点进行聚合，原点将反映您的移动窗口。*

# c# - Canvas over Image - 不同大小的绘制控件

> ID：15204004
> 
> 赞同：0
> 
> 时间：2013-03-04T14:36:51.740
> 
> 标签：c#, .net, wpf, image, canvas

我的 XAML 是：

```
<Grid Name="grid">
            <Viewbox Name="viewBox"  Grid.Column="0" Grid.Row="0">
                <Grid>
                    <Image Name="image" />
                    <Canvas Name="canvas" />
                </Grid>
            </Viewbox>
        </Grid> 
```

如您所见，我在 Grid 中有 Canvas 和 Image 控件来执行对 Image 的绘图。

我正在加载的所有图像都具有相同的 dpi - 72。

加载图像后，我获取一些数据并执行绘图：

```
var ellipse = new Ellipse
                {
                    Width = 100,
                    Height = 100,
                    Cursor = Cursors.Hand,
                    Fill = new SolidColorBrush(Colors.Green),
                    Stroke = new SolidColorBrush(Colors.Black),
                    StrokeThickness = 1
                };
            canvas.Children.Add(ellipse);
            Canvas.SetLeft(ellipse, 10);
            Canvas.SetTop(ellipse, 10); 
```

但似乎椭圆在不同图像上看起来不同。它的大小取决于加载图像的大小。如果加载的图像具有较大的分辨率 - 椭圆很小。如果加载的图像分辨率小 - 椭圆太大。

如何绘制具有相同物理尺寸的椭圆？

我试图在椭圆控件上应用 SnapsToDevicePixels 属性，但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:59:02.813

您的代码的问题在于 Image 控件以及内部 Grid 始终获取加载图像的大小。Viewbox 然后缩放所有内容以适应外部网格（单元格）。显然，这也会按相同的缩放因子缩放 Canvas 及其子元素。因此，在加载不同大小的图像时，您会观察到不同大小的椭圆。

解决方案是不使用 Viewbox。Image 控件已经缩放了显示的图像，除非您将其[`Stretch`](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.stretch.aspx)属性设置为`None`。因此，您根本不需要 Viewbox。您应该通过设置它的`Width`或它的`Height`，或者两者兼而有之，为 Image 控件提供适当的大小。

```
<Grid>
    <Image Name="image" Width="120" />
    <Canvas Name="canvas" />
</Grid> 
```

# asp.net-mvc - MVC 中出现意外的 Chrome 缓存问题

> ID：15204008
> 
> 赞同：1
> 
> 时间：2013-03-04T14:37:02.743
> 
> 标签：asp.net-mvc, google-chrome, caching

在我们的 MVC 4 Web 应用程序中，我们使用区域和标准/默认路由配置。例如，如果我们想查看特定客户的注释/评论记录，我们有一条如下所示的路线：

```
/Customers/Notes/Index/123 
```

我们在“客户”区域中有一个名为 Notes 的控制器，其中包含一个名为“索引”的操作方法。我们的默认路由实际上允许我们指定与以下相同的操作：

```
/Customers/Notes/123 
```

为完整起见，Index 操作如下所示：

```
public ActionResult Index(int id)
{
     var model = UnitOfWork.CustomerDb
        .GetNotes(id);

     return View(model);
} 
```

此操作的结果是一个简单的数据网格，提供针对特定客户发布的注释的时间顺序摘要。不涉及 AJAX 或 JSON。

这一切都很好 - 除了使用 Chrome 时。此浏览器似乎缓存页面并呈现前一页。刷新浏览器并不能解决问题，但如果我清除浏览器缓存然后刷新，则会呈现正确的数据。

我假设 Chrome 忽略了 id 参数。我的问题是：

*   为什么这似乎只是 Chrome 的问题？
*   这是一个已知/常见的问题吗？
*   有公认的解决方案吗？

我已经在整个 Web 应用程序中使用了这个我认为是安全的技术，我不得不承认我对为什么会发生这种情况感到困惑。

任何信息/建议将不胜感激。

# libgit2 - libgit2 是否支持 SSH 传输协议？

> ID：15204015
> 
> 赞同：5
> 
> 时间：2013-03-04T14:37:20.140
> 
> 标签：libgit2, libgit2sharp

是否可以使用 ssh-keys 通过 ssh 克隆存储库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T10:14:35.747

SSH 传输尚未在 libgit2 中实现。

检查 ~~[问题 1103](https://github.com/libgit2/libgit2/pull/1103)~~ [问题 1558](https://github.com/libgit2/libgit2/pull/1558)以了解进度。

## 更新

拉取请求**[1508](https://github.com/libgit2/libgit2/pull/1558)** **已于**2013 年 5 月 16 日合并。

从那时起，它也得到了很好的照顾（参见**[1706](https://github.com/libgit2/libgit2/pull/1706)**、**[1717](https://github.com/libgit2/libgit2/pull/1717)**、**[1775](https://github.com/libgit2/libgit2/pull/1775)**、**[1851](https://github.com/libgit2/libgit2/pull/1851)**、**[1903](https://github.com/libgit2/libgit2/pull/1903)**、**[1904](https://github.com/libgit2/libgit2/pull/1904)**）。

它甚至现在还在 Travis 上不断地进行测试（参见**[1774 年](https://github.com/libgit2/libgit2/pull/1774)**）。

# python - Python Socket - 测试启用 Telnet 的设备

> ID：15204024
> 
> 赞同：0
> 
> 时间：2013-03-04T14:37:34.393
> 
> 标签：python, sockets

我有一堆设备，我必须编写一个脚本才能知道 telnet 是否启用。所以我做了以下脚本：

```
import socket

file = open('list', 'r')
file = file.readlines()
list = []
port = 23 

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

for i in file:
    i=i.replace('\n','')
    list.append(i)
for i in host:
    try:
        s.connect((i, port))
        s.shutdown(2)
        print (i+' Telnet is enable') 
    except:
        print (i+' Telnet is disable') 
```

问题是在第一次测试显示 telnet 已启用后，所有设备都显示为已禁用。我检查了我得到的错误，错误如下：

```
socket.error: (133, 'Transport endpoint is already connected') 
```

我知道这与关闭第一个会话有关，但我做不到。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T09:51:25.143

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

您需要关闭旧套接字并创建一个新套接字，即将 s = socket.socket(... 放入循环中。 – Joachim Isaksson

# xcode - iCarousel 每次触摸显示一个视图（幻灯片）

> ID：15204027
> 
> 赞同：1
> 
> 时间：2013-03-04T14:37:38.707
> 
> 标签：xcode, icarousel

我通过 do slide 使用 iCarousel 进行幻灯片视图。一切都好，但是当我在屏幕上滑动时，我会同时显示几个视图，但我需要在每张幻灯片上显示一个视图。

我正在尝试更改任何数据，`- (void)didPan:(UIPanGestureRecognizer *)panGesture`但仍然没有进展。我应该更改她的代码：

`NSInteger direction = (int) (_startVelocity / fabsf(_startVelocity)); [self scrollToItemAtIndex:self.currentItemIndex + direction animated:YES];`?

有没有人知道我可以在哪里更改代码以达到我的目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:00:35.707

iCarousel 目前无法执行此操作，但从您的描述看来，您应该改用我的 SwipeView 库，该库旨在以这种方式工作（顺便说一下，我还编写了 iCarousel，所以这不是试图抹黑它） .

SwipeView 具有与 iCarousel 完全相同的界面，因此它应该是一个替代品。然而，它基于 UIScrollView，并支持分页。

[https://github.com/nicklockwood/SwipeView](https://github.com/nicklockwood/SwipeView)

更新：

最新版本的 iCarousel 现在确实支持使用 pagingEnabled 属性进行单项滑动，但对于简单的 2D 滚动视图，SwipeView 仍然是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-03T06:51:41.810

修改 iCarousel 源代码 iCarousel.m 文件可以做到这一点！

```
- (void)didPan:(UIPanGestureRecognizer *)panGesture {

 .....

     case UIGestureRecognizerStateChanged: {
            CGFloat translation = _vertical? [panGesture translationInView:self].y: [panGesture translationInView:self].x;

            translation = translation * 0.35; // Add This line to change the really translation.

     }
} 
```

希望能帮到你！</p>

# c# - 在 Class + Scope 问题中使用列表

> ID：15204031
> 
> 赞同：1
> 
> 时间：2013-03-04T14:37:52.557
> 
> 标签：c#, list, class, scope

好吧，我已经避免这个问题有一段时间了，但到了我需要整理代码范围才能继续的地步，我对 C# 编程很陌生，所以对我一直以来的不良约定有任何帮助使用会很好

这是我当前的 Player 类（例如，我知道您可以使用“Name {get; set}”，但是我在定义时遇到了一些问题，以下是我的 2 个类，我的顶级王牌类（后来创建了 10 个顶级王牌） ，以及一个玩家类。

```
 //Top trumps class, layout of top trump card defined in here
    public class TopTrumps 
    {
        public int height;
        public int length;
        public int speed;
        public int CardID;

        public TopTrumps(int a, int b, int c, int d)  
        {
            this.height = a;   
            this.length = b;
            this.speed = c;
        }
    }

    // The player class, Containing player name, Score etc.
    public class Player
    {

        public string Name;
        public int Score;
        public bool Turn;
   //     public List<TopTrumps> PlayerDeck = new List<TopTrumps>();

        public Player(string a, int b, bool c)
        {
            this.Name = a;
            this.Score = b;
            this.Turn = c;
     //       this.PlayerDeck = d;
        }
    } 
```

我的玩家类的目标是以列表的形式存储玩家的姓名、分数、回合以及一副 5 张牌，然后是计算机。我在课外做这个没有问题，比如这里

```
 /////////////////////////////
        // Create computer card deck
        /////////////////////////////

        Player Computer = new Player("Computer", 0, true);  //Create new player

        List<TopTrumps> ComputerDeck = new List<TopTrumps>();

        ComputerDeck = Trumps.GetRange(5, 5);

        for (int i = 0; i <ComputerDeck.Count; i++)
            {
                listBox3.Items.Add("COMP Card [" + i + "] : " + ComputerDeck[i].height);
             }
        listBox3.Items.Add(Computer.Name); 
```

但是，当我尝试访问与上述代码所在的函数“public void DealCards_Click(object sender, EventArgs e)”之外的播放器有关的任何内容时，我总是会收到无法访问的错误消息。例如，在我在下面发布的按钮上，我收到错误“错误 1 ​​当前上下文中不存在名称‘计算机’”

```
 private void button1_Click(object sender, EventArgs e)
    {
        Player1.Name = PlayerName.Text;
    } 
```

任何有关如何正确组织此代码的帮助都将无法真正继续，直到我可以弄清楚如何分解我的程序并获得一个在课堂上工作的列表，我已经在下面发布了一个完整的来源，如果你需要更好地理解我的程序，非常感谢

-汤姆

```
public partial class Game : Form
{

    //Top trumps class, layout of top trump card defined in here
    public class TopTrumps 
    {
        public int height;
        public int length;
        public int speed;
        public int CardID;

        public TopTrumps(int a, int b, int c, int d)  //Pass height length and speed as arguements to class, Example 'TopTrumps(10,10,20);'
        {
            this.height = a;   // Set objects height to the parsed value of a
            this.length = b;
            this.speed = c;
            this.CardID = d;

        }
    }

    // The player class, Containing player name, Score etc.
    public class Player
    {

        public string Name;
        public int Score;
        public bool Turn;
   //     public List<TopTrumps> PlayerDeck = new List<TopTrumps>();

        public Player(string a, int b, bool c)
        {
            this.Name = a;
            this.Score = b;
            this.Turn = c;
     //       this.PlayerDeck = d;
        }
    }

    public Player player1 = new Player("New Player", 0, true);  //Create new player

    public Game()
    {
        InitializeComponent();
    }

    private void Hide_Click(object sender, EventArgs e)
    {
        Form1 MainScreen = new Form1();
        this.Hide();
        MainScreen.ShowDialog();

    }

    public void DealCards_Click(object sender, EventArgs e)
    {

        List<TopTrumps> Trumps = new List<TopTrumps>(); //Create a list of deck of top trumps
        // We can now easily access each top trump card variables, For example 'Trumps[1].height = 5', will modify the 2nd cards height

        Trumps.Add(new TopTrumps(10, 20, 50,1));   //Add each top trump card (10 of them) to the newly created list
        Trumps.Add(new TopTrumps(15, 50, 40,2));      //Format = (height, Length, speed, CardID)
        Trumps.Add(new TopTrumps(6, 4, 20,3));
        Trumps.Add(new TopTrumps(11, 20, 30,4));
        Trumps.Add(new TopTrumps(10, 70, 25,5));
        Trumps.Add(new TopTrumps(10, 14, 35,6));
        Trumps.Add(new TopTrumps(20, 80, 40,7));
        Trumps.Add(new TopTrumps(10, 44, 45,8));
        Trumps.Add(new TopTrumps(13, 67, 30,9));
        Trumps.Add(new TopTrumps(14, 12, 20,10));

        /////////////////////
        //Shuffle routine
        /////////////////////

        Random random = new Random(); //Create new random number
        int n = Trumps.Count;   //Create variable of Trump decks length 
        //    listBox1.Items.Add(n);

        while (n > 1)
        {
            n--;    //n immedietely decreased
            int k = random.Next(n + 1);  //Create a random number between 0 and 9 (The adressable range of the list)
            TopTrumps nth_value = Trumps[k];     //Store random number index contents, in temp storage 
            Trumps[k] = Trumps[n];           //Swap the random number index with the nth index (On 1st loop, Random number index will swap values with 10th card)
            Trumps[n] = nth_value;       //Set the nth card to the random numbers index contents
        }

        for (int i = 0; i < Trumps.Count; i++)
        {
            listBox2.Items.Add("Card [" + i + "] : " + Trumps[i].CardID);
        }

        /////////////////////////////
        // Create player 1 card deck
        /////////////////////////////

        List<TopTrumps> PlayerDeck = new List<TopTrumps>();
        listBox1.Items.Add(PlayerDeck.Count);
        PlayerDeck = Trumps.GetRange(0, 5);
        listBox1.Items.Add(PlayerDeck.Count);

        for (int i = 0; i < PlayerDeck.Count; i++)
        {
            listBox1.Items.Add("PLAYER Card [" + i + "] : " + PlayerDeck[i].height);
        }

        /////////////////////////////
        // Create computer card deck
        /////////////////////////////

        Player Computer = new Player("Computer", 0, true);  //Create new player

        List<TopTrumps> ComputerDeck = new List<TopTrumps>();

        ComputerDeck = Trumps.GetRange(5, 5);

        for (int i = 0; i <ComputerDeck.Count; i++)
            {
                listBox3.Items.Add("COMP Card [" + i + "] : " + ComputerDeck[i].height);
             }
        listBox3.Items.Add(Computer.Name);

        /////////////////////////
        //Initial deck set up
        /////////////////////////

        CardID.Text = "Card ID: " + PlayerDeck[0].CardID;
        Height.Text = "Height: " + PlayerDeck[0].height;
        Length.Text = "Length: " + PlayerDeck[0].length;
        Speed.Text = "Speed: " + PlayerDeck[0].speed;

        listBox1.Items.Clear();

        listBox1.Items.Add("Card Number: "+PlayerDeck[0].CardID);
        listBox1.Items.Add("");

        listBox1.Items.Add("Height: " + PlayerDeck[0].height);
        listBox1.Items.Add("length: " + PlayerDeck[0].length);
        listBox1.Items.Add("speed: " + PlayerDeck[0].speed);

    }

    private void button1_Click(object sender, EventArgs e)
    {
        Computer.Name = PlayerName.Text;
    }

    private void PlayCard_Click(object sender, EventArgs e)
    {

        bool PlayerWon = false;

        if (Height.Checked)
        {
        //    PlayerDe
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:18:50.523

我希望你不要期望工作代码作为答案，所以这是我向你推荐的：

将您的代码划分为您的“模型”类和属于您的 UI 的所有内容，这将使很多事情变得更容易。重构您的模型，使其包含非特定于 UI 的所有内容。在你的情况下，我想这样的事情是有道理的：

*   一个`MyCardGame`班
*   模型`Player`（计算机或人现在对模型无关紧要）
*   你的`TopTrump`班级

你的`MyCardGame`类应该引用它的玩家，显然，玩家应该能够知道他的牌等等。这样想：你希望你的整个游戏模型能够在控制台窗口、WinForms 项目或 Web 应用程序中运行. 这听起来有点矫枉过正，但它会得到回报。

然后重写你的 UI 代码，理想情况下你的 UI 不应该为自己发牌，它应该告诉你`MyCardGame`它现在应该发新一轮。然后，您的 UI 可以从模型中显示它想要的任何内容。

对于您的实际问题，我认为它会自行解决，或者如果您尝试执行上述操作，您将看到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:18:44.287

计算机是在`DealCards_Click`方法中定义的，因此尝试在方法之外访问它会失败。如果您打算让计算机成为班级成员，则按照您定义的方式定义它`Player1`

此外，还有一些建议可以使您的代码更易于阅读（和维护）

*   以小写字母开头命名变量
*   在同一个地方定义所有班级成员/属性（更容易找到）
*   使用一些符号将类成员与局部范围变量分开（我通常以 m_ 开头

# c# - 将一个局部视图的数据传递给另一个局部视图

> ID：15204037
> 
> 赞同：3
> 
> 时间：2013-03-04T14:38:04.287
> 
> 标签：c#, ajax, asp.net-mvc-2

我有一个主视图和两个部分视图。

1 部分视图具有：

*   下拉列表
*   文本框
*   添加按钮

第二部分视图有：

*   两个文本框
*   其中显示第一个 partialView 的 DropDownList 的值
*   第二个显示 TextBox 的第一个部分视图的值。

我试图实现的功能，当 a`Click Event`发生时，其中的`Add Button`数据应该出现在第二个部分视图中（此外，数量取决于接收到的数量）。我目前对如何传递数据并保存它感到困惑。`DropDownList``TextBox``TextBoxes``TextBoxes``Clicks``Add Button`

这是下面的代码，用于第一个部分视图（包括 a`DropDownList`和`TextBox`）..

```
<% using (Html.BeginForm("AddServices", "Controller1", FormMethod.Post, new { id = "form" }))
   {%>
<%: Html.ValidationSummary(true) %>
<div class="edit-set">
<label>Nature of Service:</label>
<div class="editor-field">
    <%: Html.DropDownList("ddlServiceType", (SelectList)ViewData["ServiceType"] as SelectList, "--Select Nature Of Service--", new { onchange = "FillServiceType();" })%>
    <%: Html.HiddenFor(model => model.Id)%>
    <label>Comment:</label>
    <input type="text" id="comment" />
</div>
<input type="submit" value="+ Add More Service(s)" onclick="InsertService()" name="submitButton"/>
</div><input type="submit" value="Done" name="submitButton"/>
<% } %> 
```

用户插入所需服务后，必须将第二部分视图中的所有文本框值插入数据库。我的问题是我必须维护所有值，但不将数据插入数据库。使用单击完成按钮后将插入它。（我也可以在第二个部分视图中使用表，但该表的值必须可用于插入 DB。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:33:12.053

1 尝试渲染动作而不是渲染局部视图。

如果 DropDown 和 Textbox 中的值必须先保存在 DB 中，这意味着您必须先提交数据。

因此，该操作将从数据库中获取所需的数据以呈现第二个局部视图并返回它。

查看渲染操作：[http ://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)

```
<% using (Html.BeginForm("AddServices", "Controller1", FormMethod.Post, new { id = "form" }))
   {%>
<%: Html.ValidationSummary(true) %>
<div class="edit-set">
<label>Nature of Service:</label>
<div class="editor-field">
    <%: Html.DropDownList("ddlServiceType", (SelectList)ViewData["ServiceType"] as SelectList, "--Select Nature Of Service--", new { onchange = "FillServiceType();" })%>
    <%: Html.HiddenFor(model => model.Id)%>
    <label>Comment:</label>
    <input type="text" id="comment" />
</div>
<input type="submit" value="+ Add More Service(s)" onclick="InsertService()" name="submitButton"/>
</div><input type="submit" value="Done" name="submitButton"/>

<%= Html.Action("MyAction", "Controller", new {ID = Model.id}) %>

<% } %> 
```

# c++ - 在 C++ 中初始化矩阵是否正确

> ID：15204039
> 
> 赞同：1
> 
> 时间：2013-03-04T14:38:17.427
> 
> 标签：c++

我有一个带有数组数组变量的类。

```
private  double * array[4][4]; 
```

我可以这样初始化吗？

```
void RealMatrix::init(int i, int j) {
    this->array[i][j] = new double;
    *(this->array[i][j]) = 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:40:03.787

是的你可以。但是，如果我站在你的立场上，我会摆脱`double`指针（除非有一些特定的原因你以这种方式做事）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:42:45.610

这将动态分配一个并将作为 2D 数组`double`元素的指针设置为指向该. 然后将值 0 分配给 that 。您可以在一行中执行此操作：`[i][j]``double``double`

```
this->array[i][j] = new double(); // value-initialization 
```

或者您可以更明确地将其设置为`0`：

```
this->array[i][j] = new double(0); // direct-initialization 
```

但是，除非您有充分的理由，否则您最好让数组成员包含`double`s 而不是`double*`s：

```
double array[4][4]; 
```

除非您必须这样做，否则动态分配某些东西是没有意义的。我无法想象你有一个很好的理由来使用这么小的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:57:56.170

我会用一个`vector<double>`.

```
class Matrix {
    std::vector<double> values;
    const unsigned int width;
public:
    Matrix(unsigned int width, unsigned int height)
    : values(width * height), width(width) {
    }

    double& value(unsigned int i, unsigned int j) {
        return values[i + (width * j))];
    }
}; 
```

用法：

```
Matrix matrix(10, 20);
matrix.value(3, 4) = 15; 
```

# c# - 网格视图过滤数据

> ID：15204040
> 
> 赞同：0
> 
> 时间：2013-03-04T14:38:18.640
> 
> 标签：c#, gridview

在他应用一些过滤器之后，我有兴趣获取用户在网格视图中看到的所有数据。例如，原始网格的数据源包含 10 条记录，但用户应用过滤器后仅显示 5 条记录，我想将这 5 条记录放入列表中。如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:44:34.523

假设您的网格绑定了某个集合，那么在回发时，您可以获取 gridview 的数据源，应用您的过滤器，并将其保存到一个新集合中。

就像是：

```
var datasource = yourGridView.DataSource as List<someType>;
var filteredResults = datasource.Where( ... ); // apply your filters inside the Where 
```

显然，将示例变量名称/类型替换为您在代码中使用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:56:58.360

这是一个很好的小例子，展示了一种过滤网格视图的内置方法：

```
protected void btnSearch(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("MyConn");
    SqlCommand cmd = new SqlCommand();
    SqlDataAdapter sda = new SqlDataAdapter(cmd);
    DataTable dt = new DataTable();

    cmd.Connection = con;
    cmd.CommandText = "SELECT * FROM CustomerTable WHERE NumberOfCustomer = @NumberOfCustomer";
    cmd.Parameters.AddWithValue("NumberOfCustomer", TextBox1.Text);

    try
    {
        con.Open();
        sda.Fill(dt);
    }
    catch (Exception ex)
    {
        Response.Write(ex.Message);
    }
    finally
    {
        con.Close();
    }

    GridView1.DataSource = dt;
    GridView1.DataBind();
} 
```

然后将数据源绑定到列表：

```
protected void bindToList(object sender, EventArgs e)
{
    var datasource = GridView1.DataSource as List<Customers>;

    if ( !IsPostBack )
    {
        DropDownList ddl = new DropDownList();
        ddl.DataTextField = "Name";
        ddl.DataValueField = "Id";
        ddl.DataSource = datasource;
        ddl.DataBind();

        ddl.SelectedValue = list.Find( o => o.Selected == true ).Id.ToString();
    }
} 
```

# google-maps - 尝试从弹出地图（v3）平移到父地图（v3）时出现“错误：panTo：latLng 必须是 LatLng 类型”

> ID：15204050
> 
> 赞同：0
> 
> 时间：2013-03-04T14:38:46.190
> 
> 标签：google-maps, google-maps-api-3

我的**panTo**通常可以正常工作。但现在我想从弹出地图中平移父地图。所以我正在尝试做类似的事情

```
window.opener.map.panTo(new google.maps.LatLng(lat,lng)); 
```

但这给了我错误

```
Error: panTo: latLng must be of type LatLng
[Break On This Error]   

(110 out of range 45) 
```

实际上，当我使用 Google Maps v2 时`window.opener.moveMapToPoint();`，它就可以工作了。但现在它不起作用。请就此给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:44:50.943

试试这个：

```
window.opener.map.panTo(new window.opener.google.maps.LatLng(lat,lng)); 
```

跨窗口传递 javascript 对象可能很棘手。

# java - 多语言堆栈的集成测试（Java/MongoDB/RabbitMQ...）

> ID：15204051
> 
> 赞同：9
> 
> 时间：2013-03-04T14:38:46.153
> 
> 标签：java, mongodb, jvm, rabbitmq, amqp

我知道 RabbitMQ 是用 Erlang 编写的，因此不能像我们对 ActiveMQ JMS 代理所做的那样嵌入到 JVM 中。

但实际上有些项目是用另一种语言完成的，可以很容易地嵌入到集成测试中。

例如，用 C++ 编写的 MongoDB 可以在 JVM 集成测试的上下文中轻松启动/停止： [https ://github.com/flapdoodle-oss/embedmongo.flapdoodle.de](https://github.com/flapdoodle-oss/embedmongo.flapdoodle.de)

还有人将其移植到 Java： [https ://github.com/thiloplanz/jmockmongo/](https://github.com/thiloplanz/jmockmongo/)

* * *

所以我只是想知道当我的应用程序是用 Java 编写的，而另一种技术是另一种语言（比如用于 RabbitMQ 的 Erlang）时，我们如何进行集成测试？

一般来说，有哪些好的做法？

我看到 3 个主要解决方案：

*   启动一个真正的 RabbitMQ
*   在当前使用的语言中嵌入技术的 JVM 端口
*   使用标准技术，以便 Erlang 中的一种技术可能具有与 Java 中的另一种技术相同的行为和通信层（RabbitMQ / Qpid / StormMQ 实现 AMQP）

是否有用于启动临时 RabbitMQ 代理的 Maven/Sbt/Ant 插件？在测试课之前有任何支持 Junit/TestNG RabbitMQ 的项目吗？

我已经看到在 Java 中有一个 AMQP 的开源实现：[Apache Qpid](http://qpid.apache.org/) 在生产中有 RabbitMQ 时，有人使用这个实现进行集成测试吗？甚至可能吗？我正在使用 Spring 集成。

* * *

顺便说一句，我刚刚注意到 Spring-AMQP 项目在其 github 自述文件中提到：

> Many of the "integration" tests here require a running RabbitMQ server - they will be skipped if the broker is not detected.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:34:44.717

If it were me, I would look at mocking the stack component in question. [What's the best mock framework for Java?](https://stackoverflow.com/questions/22697/whats-the-best-mock-framework-for-java) (although not a great Stack Overflow question) and [Mock Object](http://en.wikipedia.org/wiki/Mock_object) might help get you going.

Mocking the components makes testing much easier (IMHO) than trying to "live test" everything.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T16:10:46.103

In the past I have used a virtual machine that had a fresh install of RabbitMQ running. Developers would run it constantly and our CI server would start a new VM for each revision of the code. Our tests would fail if they could not connect to the server instead of skipping the tests as a lack of integration tests is a serious problem.

This tends to work reasonably well and prevents needing to start and stop RabbitMQ for the tests. Our tests were split up to use vhosts for isolation and a few calls to create vhosts on demand so we could parallelize tests is we needed to.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T08:36:14.423

I will tell you my opinion on the Apache QPid vs Rabbit MQ as I worked with both. My opinion is that they do 'extend' AMQP, but are very different. If in production you will have Rabbit MQ, then use the same one in tests - also the same version, patches, fixes, etc. There are things that Apache Qpid can do and Rabbit MQ can not and vice-versa.

*Stating the obvious* integration tests are done so that you could test the **integration** of the application. I would start an instance of Rabbit MQ.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-23T19:26:00.937

Based on Philip Christiano's answer that says to use VM's, now we have Docker and I think it is the way to go to embed different technologies in docker containers.

One can start a docker container containing a RabbitMQ server, and it will be faster than using VM's because docker containers are lightweight and startup time is a lot better.

There are some maven plugins that permit to start docker containers, for exemple: [http://www.alexecollins.com/content/docker-maven-plugin/](http://www.alexecollins.com/content/docker-maven-plugin/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-12T14:14:49.987

Since I was in your exact same situation and couldn't find a good solution, I developed it myself (inspired by Embedded-Redis, Embedded-Mongo, etc.)

This library is a wrapper around the process of downloading, extracting, starting and managing RabbitMQ so it can work like an embedded service controlled by any JVM project.

Check it out: [https://github.com/AlejandroRivera/embedded-rabbitmq](https://github.com/AlejandroRivera/embedded-rabbitmq)

It's as simple as:

```
EmbeddedRabbitMqConfig config = new EmbeddedRabbitMqConfig.Builder()
    .version(PredefinedVersion.V3_5_7)
    // ...
    .build();
EmbeddedRabbitMq rabbitMq = new EmbeddedRabbitMq(config);
rabbitMq.start();
...
rabbitMq.stop(); 
```

Works on Linux, Mac and Windows.

# sql-server - 从三个不同的表创建一个表

> ID：15204052
> 
> 赞同：7
> 
> 时间：2013-03-04T14:38:52.203
> 
> 标签：sql-server, create-table

我在 SQL 中有三个表，我需要将它们全部合并为一个。我需要一张表中所有表的所有字段。所有表格都包含来自三个不同年份的相同字段。我写了一段代码：

```
CREATE TABLE COL_TBL_TRAINING_ALL_YEARS AS(
SELECT 
COL_TBL_2010_TRN_RESULTS_new.*,
COL_TBL_TRN_RESULTS_GEMS_2011.*, 
COL_TBL_TRN_RESULTS_GEMS_2012.*
FROM COL_TBL_2010_TRN_RESULTS_new,
COL_TBL_TRN_RESULTS_GEMS_2011, 
COL_TBL_TRN_RESULTS_GEMS_2012
WHERE COL_TBL_2010_TRN_RESULTS_new.SYS_EMP_ID_NR = COL_TBL_TRN_RESULTS_GEMS_2011.SYS_EMP_ID_NR = COL_TBL_TRN_RESULTS_GEMS_2012.SYS_EMP_ID_NR) 
```

我在单词“AS”错误附近得到一个不正确的语法，在“=”附近得到一个不正确的语法

我已经阅读了我的 SQL 书籍，似乎无法找到有关执行此操作的方法的解释，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T15:12:23.643

你需要两个做两步：

1.  使用`UNION ALL`，就像提到的那样。但是，如果缺少一列，您应该使用`NULL`该列。

2.  您应该将结果插入到新表中。

所以它应该看起来像：

```
SELECT * 
INTO   yournewtablename 
FROM   (SELECT col1, 
               col2, 
               col3 
        FROM   col_tbl_2010_trn_results_new 
        UNION ALL 
        SELECT col1, 
               col2, 
               col3 
        FROM   col_tbl_trn_results_gems_2011 
        UNION ALL 
        SELECT col1, 
               col2, 
               NULL AS Col3 
        FROM   col_tbl_trn_results_gems_2012) n 
```

这是一个演示：[SQL FIDDLE](http://www.sqlfiddle.com/#!3/99d0f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:41:45.930

你需要联合所有：

```
SELECT * FROM COL_TBL_2010_TRN_RESULTS_new UNION ALL
SELECT * FROM COL_TBL_TRN_RESULTS_GEMS_2011 UNION ALL 
SELECT * FROM COL_TBL_TRN_RESULTS_GEMS_2012 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:49:21.317

假设您的子查询返回结果，您的语法看起来基本正确。您可能想尝试两件事：

1.  单独运行 SELECT 语句以确保它是正确的。
2.  在 AS 和括号之间放置一个空格。

根据[this page](http://www.techonthenet.com/sql/tables/create_table2.php)，括号是必需的。

# biztalk - 从入站标头中提取用户 ID

> ID：15204054
> 
> 赞同：0
> 
> 时间：2013-03-04T14:39:01.357
> 
> 标签：biztalk, biztalk-2010, biztalk-2009, biztalk2006r2

我必须从入站标题中读取元素...

我正在使用 WCF.InboundHeaders 将入站标头分配给字符串....

现在我的问题是我的 inbounde 标题看起来像这样

入站标头

```
<headers><s:userid xmlns:s="http://www.w3.org/2003/05/soap-envelope">testuser</s:userid>

 <s:applicationid xmlns:s="http://www.w3.org/2003/05/soap-envelope">assistworkerweb</s:applicationid>

<a:Action s:mustUnderstand="1" xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">http://Request</a:Action><a:To s:mustUnderstand="1" xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing"> 
```

现在我需要从中提取用户ID ..如何从中提取用户ID ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:27:20.383

您没有提到字符串的存储位置或方式（使用 WCF.InboundHeaders 填充），但是我将使用 XPath 的一个简单片段来提取 UserId。如果您使用 C# 帮助程序来提取它，您可以按照以下方式执行一些操作（注意，这是未经测试的，但它几乎在那里）：

```
XmlDocument doc = new XmlDocument();
doc.Load([WCF.InboundHeaders Xml Fragment]);

// Create an XmlNamespaceManager to add 'soap-envelope' namespace
XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("s", "http://www.w3.org/2003/05/soap-envelope");

// Select the UserId
XmlNode userId = doc.SelectSingleNode("/headers/s:userid", nsmgr);
Console.WriteLine(userId.InnerXml); 
```

您可能还希望将 Xml 片段序列化为 .Net 对象并以这种方式检索 UserId。

# android - 使用 Android Emulator 从服务器获取数据的最佳方式

> ID：15204056
> 
> 赞同：-1
> 
> 时间：2013-03-04T14:39:02.080
> 
> 标签：android, database

正在开发安卓程序。现在我需要从一台计算机（客户端）远程访问 MSSQL2008R2 到另一台计算机（服务器）。

哪种连接方式最好？

比如, `JDBC Driver`,`Web Service`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:51:46.327

如果您为任何操作系统（如 Android、iPhone、Blackberry 等）开发移动应用程序，那么您应该使用 Web 服务从服务器获取数据。

使用的理由`Web service`。

如果您使用 Web 服务方法从数据库服务器获取数据保持不变，需要在 Web 服务中写入一次，但如果是 JDBC，则它仅适用于 Java，在其他情况下，您需要搜索其他方式连接到数据库服务器。

# javascript - 点击后加粗段落

> ID：15204058
> 
> 赞同：-2
> 
> 时间：2013-03-04T14:39:12.540
> 
> 标签：javascript, html, css

```
<div id="box">
<p class="b">item 1</p>
<p class="b">item 2</p>
<p class="b">item 3</p>
<p class="b">item 4</p>
<p class="b">item 5</p>
</div> 
```

单击后如何将所选段落加粗？例如，如果我单击“项目 2”，则单击后只有项目 2 会加粗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:48:11.510

我建议：

```
function makeBold(el) {
    el.style.fontWeight = 'bold';
}

var paragraphs = document.getElementsByTagName('p');

for (var i = 0, len = paragraphs.length; i<len; i++){
    paragraphs[i].onclick = function(){
        makeBold(this);
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aA5g8/)。

或者，如果您希望切换字体粗细：

```
function toggleBold(el) {
    el.style.fontWeight = el.style.fontWeight == 'bold' ? 'normal' : 'bold';
}

var paragraphs = document.getElementsByTagName('p');

for (var i = 0, len = paragraphs.length; i<len; i++){
    paragraphs[i].onclick = function(){
        toggleBold(this);
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aA5g8/1/)。

或者，如果您希望只有*一个*段落是粗体文本（单击第二个段落会将其他`p`元素返回到非粗体状态）：

```
function toggleBold(el) {
    var siblings = el.parentNode.getElementsByTagName('p');
    for (var i = 0, len = siblings.length; i<len; i++){
        if (siblings[i] == el){
            el.style.fontWeight = el.style.fontWeight == 'bold' ? 'normal' : 'bold';
        }
        else {
            siblings[i].style.fontWeight = 'normal';
        }
    }
}

var paragraphs = document.getElementsByTagName('p');

for (var i = 0, len = paragraphs.length; i<len; i++){
    paragraphs[i].onclick = function(){
        toggleBold(this);
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aA5g8/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:56:58.547

尝试这个：

**HTML：**

```
<p class="b" onclick="GetBold(this)">item 2</p> 
```

**JavaScript：**

```
function GetBold(current)
{
   var array = document.getElementsByClassName('p');

   for (var i = 0; i < array.length; i++)
   {
        array[i].style.fontWeight = 'normal';
   }

   current.style.fontWeight = 'bold';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:25:42.953

使用 jQuery：

```
$('.b').click(function(){
  $(this).css({'font-weight':'bold'})
}) 
```

# c++ - is_lock_free 未在 std::atomic 中定义 在 gcc 4.7.2 中？

> ID：15204060
> 
> 赞同：6
> 
> 时间：2013-03-04T14:39:17.360
> 
> 标签：c++, gcc, c++11, atomic

我遇到这个编译器错误

```
函数 std::atomic::is_lock_free() 常量：错误：未定义的引用
到“__atomic_is_lock_free”

```

在 Linux 上使用 gcc 4.7.2 编译如下代码时。

```
struct S {
  int a;
  int b;
};

  std::atomic<S> s;
  cout << s.is_lock_free() << endl; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T15:07:36.797

[GCC 4.7 中的原子 API 不完整：](http://gcc.gnu.org/wiki/Atomic/GCCMM)

> *   当无锁指令不可用（通过硬件或操作系统支持）时，原子操作将作为函数调用留给库来解决。**由于时间限制和未最终确定的 API，GCC 4.7 没有提供 libatomic。这很容易通过遇到以 开头的不满意的外部符号来确定`__atomic_*`。**

由于没有`libatomic`附带 GCC 4.7，您需要使用另一个编译器，它实际上支持您想要的功能或提供缺少的功能（[示例实现](http://gcc.gnu.org/wiki/Atomic/GCCMM?action=AttachFile&do=view&target=libatomic.c)）。

# c# - 从 informix DB 填充我的下拉列表时遇到问题

> ID：15204061
> 
> 赞同：1
> 
> 时间：2013-03-04T14:39:26.470
> 
> 标签：c#, asp.net, database, list, drop-down-menu

无法填充下拉列表。谁能帮忙，可能是一些关于我的错误的教程？我不完全了解如何填充我的数据源。对 C# 或 ASP.Net 来说很新，所以对我来说放轻松。

```
protected void Button1_Click(object sender, EventArgs e)
{
    List<string> _newList = new List<string>();
    if (TextBox1.Text != null)
    {
        OdbcDataReader MapResult; //Data Reader
        Database db = new Database(); 
        string lat = "";
        string sql = " SELECT 
                            informix.dbimg_mstr_rec.doc_path 
                       FROM 
                            informix.dbimg_mstr_rec 
                      WHERE 
                            informix.dbimg_mstr_rec.doc_key 
                                = '" + TextBox1.Text + "'";
        try
        {

           MapResult = db.ExecQuery(sql, timeOut);
           if (MapResult.Read())
           {            
               lat = MapResult["doc_path"].ToString();               
               DropDown1.DataSource = _newList;
               DropDown1.DataTextField = "doc_path";
               DropDown1.DataValueField = "doc_path";
               form1.Controls.Add(DropDown1);
           } //end if
           MapResult.Close();
           db.CloseConnection();
           //end while
        }//end try
        catch (OdbcException ex)
        {
           errList.Add("[User] Error 109: " + ex.Message);
        } //end catch
        return;
     } //end if
     else
        return;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:05:26.237

看起来您实际上并未在此代码中的任何位置绑定下拉列表。你需要做这样的事情：

```
DropDown1.DataTextField = "doc_path";
DropDown1.DataValueField = "doc_path";
DropDown1.DataSource = dr.ExecuteReader();
DropDown1.DataBind(); 
```

或者，您可以使用 SqlDataSource 控件在页面标记中完成所有这些操作。

```
 <asp:SqlDataSource
      id="SqlDataSource1"
      runat="server"
      DataSourceMode="DataSet"
      ConnectionString="myConnString"
      SelectCommand="myStoredProcedure"
      >
  </asp:SqlDataSource>

  <asp:MyDropDownList id="DropDown1" runat="server" DataSource="SqlDataSource1"
       DataTextField="COLUMN_NAME" DataValueField="COLUMN_NAME" /> 
```

# objective-c - 如何在不同版本的 mac osx 上轻松测试可可应用程序？

> ID：15204063
> 
> 赞同：1
> 
> 时间：2013-03-04T14:39:30.973
> 
> 标签：objective-c, macos, cocoa

我有一个 macbook air 2011 版本并安装了 10.8.x。我使用 xcode 4.6 开发了一个应用程序，我使用这台机器对其进行了测试，并且运行良好。

我希望我的应用程序也支持 10.6（雪豹）和 10.7（狮子）（我将部署目标设置为 10.6，基础 sdk 设置为 10.7），所以为了测试它，我使用我的 macbook 编译了我的应用程序（再次， 10.8山狮）并将应用程序复制到我的另一台10.6机器（hackintosh）。

在 10.6 上进行测试令人头疼，我学到了一些技巧来简化测试（即实现 redirectConsoleLogToDocumentFolder 以便将所有 NSLog 添加到 console.log），但有时我的应用程序会导致分段错误，不能被try catch捕获，我真的不知道是什么导致了这个问题。

我的问题是：

```
1\. how to easily test my app (with ARC enabled) on a 10.6 machine without xcode? I have installed xcode 4.2 on snow leopard, however it doesn't support arc and couldn't compile, even I downloaded the 10.7 sdk and put it into my xcode folder. 

2\. are there any other tricks you can share with me, to make the testing on 10.7/10.6 easier? 
```

# php - 在 PHP 中将数组转换为对象

> ID：15204064
> 
> 赞同：0
> 
> 时间：2013-03-04T14:39:33.133
> 
> 标签：php, arrays

我有一个像这样访问的数组：

```
$item['id']; 
```

我可以对数组做些什么来像这样访问它？

```
$item->id 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T14:40:16.833

使用此代码：

```
$item = (object) $item;
echo $item->property; 
```

`->`语法适用于对象，而不是关联数组。不过，您可以使用`(object)` [cast 运算符](http://php.net/manual/en/language.types.object.php#language.types.object.casting)将数组转换为类的对象`stdClass`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:40:24.557

将其转换为（stdClass）对象：

```
$item = (object) $item; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:27:17.150

如果该数组来自数据库，例如 mysql，您可以使用[mysql_fetch_object](http://www.php.net/manual/en/function.mysql-fetch-object.php) () 获取对象而不是数组，或者如果您使用 PDO，则设置标志 PDO::FETCH_OBJ。

也许它与你无关，但是......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T14:40:20.043

您需要将其转换为对象

```
$item = (object) $item;
echo $item->id; 
```

# javascript - 有人会解释这个计算字符的代码吗？

> ID：15204066
> 
> 赞同：3
> 
> 时间：2013-03-04T14:39:36.340
> 
> 标签：javascript, regex, character

我一直在尝试解决计算字符串中字符的难题，并找到了以下代码。该代码有效，但我无法理解替换部分：

```
function getCharCounts(s) {
    var letters = {};
    s.replace(/\S/g, function(s){
        letters[s] = (isNaN(letters[s] ? 1 : letters[s]) + 1);
    });

    return letters;
}

console.log(getCharCounts('he111 144pressions'));​ 
```

有人可以向我解释一下代码还是写一个更简单的版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:43:31.580

```
function getCharCounts(s) {

    // This variable will be visible from inner function.
    var letters = {};

    // For every character that is not a whitespace ('\S') 
    // call function with this character as a parameter.
    s.replace(/\S/g, function(s){

        // Store the count of letter 's' in 'letters' map.
        // On example when s = 'C':
        //  1\. isNaN checks if letters[c] is defined. 
        //     It'll be defined if this is not a first occurrence of this letter.
        //  2a. If it's not the first occurrence, add 1 to the counter.
        //  2b. If it's the first occurrence, assigns 1 as a value.
        letters[s] = (isNaN(letters[s]) ? 1 : letters[s] + 1);
    });

    return letters;
} 
```

**注意：** isNaN() 中的括号是错误的。上面的代码已更正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:47:21.713

这是一个更简单的例子：

```
function getCharCounts(s) {
    var letters = {};
    var is_not_whitespace = /\S/;

    // Iterate through all the letters in the string
    for (var i = 0; i < s.length; i++) {
        // If the character is not whitespace
        if (is_not_whitespace.test(s[i])) {
            // If we have seen this letter before
            if (s[i] in letters) {
                // Increment the count of how many of this letter we have seen
                letters[s[i]]++;
            } else {
                // Otherwise, set the count to 1
                letters[s[i]] = 1;
            }
        }
    }

    // Return our stored counts
    return letters;
} 
```

# javascript - Highcharts 如何使用 ajax 更新所有系列

> ID：15204068
> 
> 赞同：1
> 
> 时间：2013-03-04T14:39:43.943
> 
> 标签：javascript, json, highcharts

我有一个用于通过 ajax 为我的图表获取数据的函数，但是当我想更新它时遇到了问题。

我想做这样的事情

chart.series = 数据；

但它不起作用。

并且使用 JSON.parse(data) 我有一个错误，但我认为 JSON 没有问题。

例子

```
[{ name : "<0.5s", marker:{enabled:false}, data : [[21231,1]]},{ name : "<20s", marker:{enabled:false}, data : [[21231,1]]}] 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:08:33.240

要动态设置系列数据，您需要调用 setData：

```
chart.series[0].setData(seriesData, false); 
```

这只是设置现有系列中的数据。您不会每次都设置所有其他系列选项。

# python - 是否有 python (scipy) 函数来确定获得目标功率所需的参数？

> ID：15204070
> 
> 赞同：26
> 
> 时间：2013-03-04T14:39:47.197
> 
> 标签：python, r, numpy, scipy

在 R 中，有一个非常有用的函数可以帮助确定双边 t 检验的参数，以获得目标统计功效。

该函数被调用`power.prop.test`。

[http://stat.ethz.ch/R-manual/R-patched/library/stats/html/power.prop.test.html](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/power.prop.test.html)

您可以使用以下方法调用它：

```
power.prop.test(p1 = .50, p2 = .75, power = .90) 
```

它会告诉您获得这种功效所需的样本量。这对于阻止测试的样本量非常有用。

scipy包中是否有类似的功能？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-05T08:47:15.690

我已经设法使用下面的 n 公式和`norm.isf`scipy.stats中的逆生存函数来复制该函数

![在此处输入图像描述](../Images/a51d36d4c9c2c9dac6f00f0b896d77ca.png)

```
from scipy.stats import norm, zscore

def sample_power_probtest(p1, p2, power=0.8, sig=0.05):
    z = norm.isf([sig/2]) #two-sided t test
    zp = -1 * norm.isf([power]) 
    d = (p1-p2)
    s =2*((p1+p2) /2)*(1-((p1+p2) /2))
    n = s * ((zp + z)**2) / (d**2)
    return int(round(n[0]))

def sample_power_difftest(d, s, power=0.8, sig=0.05):
    z = norm.isf([sig/2])
    zp = -1 * norm.isf([power])
    n = s * ((zp + z)**2) / (d**2)
    return int(round(n[0]))

if __name__ == '__main__':

    n = sample_power_probtest(0.1, 0.11, power=0.8, sig=0.05)
    print n  #14752

    n = sample_power_difftest(0.1, 0.5, power=0.8, sig=0.05)
    print n  #392 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-22T11:47:50.353

一些基本的功率计算现在可以在 statsmodels 中使用

[http://statsmodels.sourceforge.net/devel/stats.html#power-and-sample-size-calculations](http://statsmodels.sourceforge.net/devel/stats.html#power-and-sample-size-calculations) [http://jpktd.blogspot.ca/2013/03/statistical-power-in-statsmodels.html](http://jpktd.blogspot.ca/2013/03/statistical-power-in-statsmodels.html)

该博客文章尚未考虑对 statsmodels 代码的最新更改。此外，我还没有决定提供多少包装函数，因为许多功率计算只是减少到基本分布。

```
>>> import statsmodels.stats.api as sms
>>> es = sms.proportion_effectsize(0.5, 0.75)
>>> sms.NormalIndPower().solve_power(es, power=0.9, alpha=0.05, ratio=1)
76.652940372066908 
```

在 R 统计中

```
> power.prop.test(p1 = .50, p2 = .75, power = .90)

     Two-sample comparison of proportions power calculation 

              n = 76.7069301141077
             p1 = 0.5
             p2 = 0.75
      sig.level = 0.05
          power = 0.9
    alternative = two.sided

 NOTE: n is number in *each* group 
```

使用 R 的`pwr`包

```
> library(pwr)
> h<-ES.h(0.5,0.75)
> pwr.2p.test(h=h, power=0.9, sig.level=0.05)

     Difference of proportion power calculation for binomial distribution (arcsine transformation) 

              h = 0.5235987755982985
              n = 76.6529406106181
      sig.level = 0.05
          power = 0.9
    alternative = two.sided

 NOTE: same sample sizes 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-20T20:25:15.750

Matt's answer for getting the needed n (per group) is almost right, but there is a small error.

Given d (difference in means), s (standard deviation), sig (significance level, typically .05), and power (typically .80), the formula for calculating the number of observations per group is:

```
n= (2s^2 * ((z_(sig/2) + z_power)^2) / (d^2) 
```

As you can see in his formula, he has

```
n = s * ((zp + z)**2) / (d**2) 
```

the "s" part is wrong. a correct function that reproduces r's functionality is:

```
def sample_power_difftest(d, s, power=0.8, sig=0.05):
    z = norm.isf([sig/2]) 
    zp = -1 * norm.isf([power])
    n = (2*(s**2)) * ((zp + z)**2) / (d**2)
    return int(round(n[0])) 
```

Hope this helps.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-10-26T14:00:32.763

你还有：

```
from statsmodels.stats.power import tt_ind_solve_power 
```

并在您想要获得的值中输入“无”。例如，要获得 effect_size = 0.1、power = 0.8 等情况下的观察次数，您应该输入：

```
tt_ind_solve_power(effect_size=0.1, nobs1 = None, alpha=0.05, power=0.8, ratio=1, alternative='two-sided') 
```

并获得： 1570.7330663315456 作为所需的观察次数。或者，要获得在其他值固定的情况下可以获得的功率：

```
tt_ind_solve_power(effect_size= 0.2, nobs1 = 200, alpha=0.05, power=None, ratio=1, alternative='two-sided') 
```

你得到：0.5140816347005553

# spring - 如何使用 JNDI 获取 XADatasource 查找 Atomikos 事务管理

> ID：15204071
> 
> 赞同：1
> 
> 时间：2013-03-04T14:39:48.390
> 
> 标签：spring, websphere-7, jta, xa

我正在使用我的 Spring 应用程序配置 Atomikios TM API 以实现全局事务。由于 Atomikios 需要 XADatasource 才能工作，所以我已经完成了 JNDI 查找以得到相同的结果。但是，不幸的是，我在查找时遇到了以下错误。

**JNDI 位置 [jdbc/cuds] 上可用的 [class com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource] 类型的对象不可分配给 [javax.sql.XADataSource]**

```
<jee:jndi-lookup id="dataSourceCu" jndi-name="jdbc/cuds" cache="true" resource-ref="true" lookup-on-startup="true" expected-type="javax.sql.XADataSource" />
<jee:jndi-lookup id="dataSourceGodb" jndi-name="jdbc/pushpullds" cache="true" resource-ref="true" lookup-on-startup="true" expected-type="javax.sql.XADataSource" /> 
```

我在 WebSphere 7.0 中使用 Spring 3.0/hibernate。我做错了。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:03:02.687

下面配置的数据源`jdbc/cuds`不是普通的，`XADataSource`而是普通的。您需要更改 WebSphere 中的数据源配置（我不知道该怎么做）。

但是，由于您使用的是拥有自己的事务管理器的 WebSphere，因此实际上不需要配置 Atomikios。您可以使用

```
<tx:jta-transaction-manager> 
```

或`org.springframework.transaction.jta.JtaTransactionManager`/`org.springframework.transaction.jta.WebSphereUowTransactionManager`但数据源仍需为XA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:13:28.350

`XADataSource`定义了 JDBC 提供者和应用服务器之间的契约，并且只能在那个上下文中使用。`DataSource`在应用程序中通过 JNDI 查找数据源时获得的对象永远不会实现`XADataSource`接口，即使底层数据源配置为支持 XA。

如果您想使用自己的事务管理器，那么您还必须自己管理数据源。请注意，我个人不会这样做，并且强烈建议改用 WebSphere 的事务管理器。原因是分布式事务涉及许多微妙之处（例如恢复和不确定事务），并且在应用程序中设置事务管理器不太可能达到与 WebSphere 的事务管理器相同级别的健壮性。

# php - 将两个带有数字键的数组合并为关联数组的值，以便在 MySQL 中多行插入

> ID：15204072
> 
> 赞同：0
> 
> 时间：2013-03-04T14:39:52.007
> 
> 标签：php, mysql, arrays, merge, associative-array

我得到两个数组 $post_img & $post_sort 结果：

```
 Array
(
    [0] => test1.jpg
    [1] => test2.jpg
    [2] => test3.jpg
)
Array
(
    [0] => 3
    [1] => 1
    [2] => 2
) 
```

我想将它们合并为：

```
Array
(
    [Image] => Array
        (
            [0] => test1.jpg
            [1] => test2.jpg
            [2] => test3.jpg
        )
    [Sort] => Array
        (
            [0] => 3
            [1] => 1
            [2] => 2
        )
) 
```

因为我认为将它们插入到我的数据库中的最佳方式是一行中的每个条目，例如：

```
ID | Image       | Sort 
1    test1.jpg     3
2    test2.jpg     1
3    test3.jpg     2 
```

关键是我认为这应该只需要一个查询就可以实现。我有不同的尝试，但没有一个是好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:45:18.593

使用[多重迭代器](http://php.net/manual/en/class.multipleiterator.php)

```
$mi = new MultipleIterator();
$mi->attachIterator(new ArrayIterator($post_img));
$mi->attachIterator(new ArrayIterator($post_sort));

foreach ( $mi as $value ) {
    list($filename, $sortOrder) = $value;
    echo $filename , ' => ' , $sortOrder , '<br />';
} 
```

可能更容易为您的数据库插入同时处理两个数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:46:50.397

合并数组没有意义，您可以像这样执行 SQL 语句：

```
INSERT INTO tbl (Image, Sort) VALUES
($post_img[0], $post_sort[0]),
($post_img[1], $post_sort[1]),
($post_img[2], $post_sort[2]),
($post_img[3], $post_sort[3]) 
```

该查询的后半部分可以使用某种循环生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:43:30.610

使用`array`：

```
$newarray = array('Image' => $post_img, 'Sort' => $post_sort); 
```

要将数据添加到表中，您可以使用原始数组：

```
$sql = "INSERT INTO tablename SET Image=:image, Sort=:sort";
$dbImgInsert = $db->prepare($sql); // preparing sql for insert, using parameters

$c = count($post_img)-1;

for ($i=0;$i<=$c;$i++;) { // looping through the arrays

    $dbImgInsert->execute(array(   // inserting the data into the prepared query and into the db
        'image' => $post_img[$i],
        'sort' => $post_sort[$i]
        ));
} // for 
```

上面的示例假设您正在使用带有 PDO 的 MySQL。

要以经典方式创建单个 INSERT 语句，请执行以下操作：

```
$sql="";
$c = count($post_img)-1;
for ($i=0;$i<=$c;$i++;) { // looping through the arrays

    $sql.="('{$post_img[$i]}', '{$post_sort[$i]}'), ";
}
$sql ="INSERT INTO tablename (Image, Sort) VALUES " . trim($sql,','); 
```

# fullcalendar - 溢出 div 中的 FullCalendar 外部事件

> ID：15204074
> 
> 赞同：0
> 
> 时间：2013-03-04T14:39:59.663
> 
> 标签：fullcalendar

我们正在使用带有可拖动选项的 JQuery FullCalendar 最新版本。外部事件 div 由数据库中的值填充。div 高度是有限的。所以我们将溢出自动添加到外部事件容器 div 中。

它产生了一个小故障，使事件在日历上拖动时不可见。它还创建了一个故障，当将事件拖出外部事件容器时，会出现两个滚动条。

我意识到我们可能使用了错误的工具来完成这项工作。有没有解决这个问题的正确方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:02:40.040

它实际上是更多的 jquery 可拖动问题。

此代码用于放置在具有*溢出的 div 中的外部可拖动事件：滚动*对我有用：

```
 $(element).draggable({
        scroll: false,
        helper: 'clone',
        zIndex: 999,
        revert: true,
        revertDuration: 0
    }); 
```

还要检查[jQuery Draggable 和溢出问题](https://stackoverflow.com/questions/811037/jquery-draggable-and-overflow-issue)

# iphone - AFNetworking valueForKeyPath 通配符

> ID：15204077
> 
> 赞同：0
> 
> 时间：2013-03-04T14:40:08.843
> 
> 标签：iphone, ios, objective-c, xcode

我试图从以下 JSON 文件中获取 tvrage_name。

```
{
    data: {
           Band of Brothers: {
                              air_by_date: 0,
                              cache: {
                                      banner: 1,
                                      poster: 1
                                      },
                              language: "en",
                              network: "HBO",
                              next_ep_airdate: "",
                              paused: 0,
                              quality: "Any",
                              status: "Ended",
                              tvdbid: 74205,
                              tvrage_id: 2708,
                              tvrage_name: "Band of Brothers"
                              },
           Breaking Bad: {
                              air_by_date: 0,
                              cache: {
                              banner: 1,
                              poster: 1
                              },
                              language: "en",
                              network: "AMC",
                              next_ep_airdate: "2013-07-14",
                              paused: 0,
                              quality: "HD",
                              status: "Continuing",
                              tvdbid: 81189,
                              tvrage_id: 18164,
                              tvrage_name: "Breaking Bad"
                              },
          },
          message: "",
          result: "success"
} 
```

有没有办法在 valueForKeyPath 中使用通配符？所以 valueForKeyPath 将是： data.*.tvrage_name （* 将是通配符）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:57:27.430

不，您将不得不像这样遍历键/值*：

```
...
NSDictionary *data = [JSON valueForKey:@"data"];
for (NSString *movie in data) {
    NSLog(@"tvrage_name: %@", [[data valueForKey:movie] valueForKey:@"tvrage_name"]);
}
... 
```

*我喜欢安全起见，所以我总是有额外的检查。例如`[JSON isKindOfClass:[NSDictionary class]]`，等等。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T11:36:25.330

如果您获得的字典副本仅包含电视节目条目（不是“消息”和“结果”），那么您可以`[[shows allValues] valueForKeyPath:@"tvrage_name"]`

这应该有效，因为 allValues 为您提供了一个字典数组，因此 valueForKeyPath 将依次为您提供给定键下的值数组。

（但是，在通过网络获取 JSON 时，如果 JSON 的结构不符合您的预期，那么在没有额外检查或强化的情况下执行此操作可能是个坏主意）

# c++ - C++内部静态声明和动态声明有什么区别

> ID：15204078
> 
> 赞同：3
> 
> 时间：2013-03-04T14:40:09.090
> 
> 标签：c++

我有两个代码：
正常：

```
int* p[5];
for (int i=0;i<5;i++){
    int s = rand()%25;
    p[i]=&s;
} 
```

动态的：

```
int* p[5];
for (int i=0;i<5;i++){
    int* s = new int;
    *s = rand()%25; //Edit: typo, I didn't want to make a random pointer
    p[i]=s;
} 
```

现在，如果我先打印数组 p，`p[i]`然后：`*p[i]`在它之后，我得到：

```
 static             dynamic
0x22ff04 7         0x22ff30 7
0x22ff04 7         0x22ff24 14
0x22ff04 7         0x22ffa6 2
0x22ff04 7         0x22ff89 8
0x22ff04 7         0x22ff13 21 
```

现在为什么 p 中的所有元素都指向正常声明的同一位置，而在动态声明中创建了多个对象？
为什么是这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:42:14.457

在第一种情况下，所有条目都指向并在超出范围`s`的那一刻悬空。`s`取消引用`p[i]`会导致未定义的行为。

在第二种情况下，每个条目都指向一个单独的堆分配对象。在这里，没有未定义的行为（但存在内存泄漏）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T14:47:41.633

我偷偷怀疑你想要一个随机值数组：

```
#include <cstdlib>
#include <vector>
#include <algorithm>
#include <iterator>

int main()
{
    std::srand(time(0)); // Don't forget to seed!

    std::vector<int> v(5);
    std::generate(v.begin(), v.end(), random);

    // or
    std::vector<int> w;
    std::generate_n(std::back_inserter(w), 5, random);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:44:25.997

在第一种情况下，在每次迭代中，您在堆栈上分配一个整数，然后将此地址分配给数组。由于堆栈上没有其他变量，`s`因此总是分配在堆栈上的同一地址上，并且您最终会得到`p`指向同一地址的所有元素，该地址包含最后一个随机值，即 7。除此之外，退出后循环，您不知道可以向该地址写入什么，因为离开范围后`s`，编译器可以使用相同的地址来存储其他一些数据。您可以通过移出循环来防止这种`int s`情况发生，但您仍然可以让所有元素`p`指向相同的堆栈地址。

在第二种情况下，您在每次迭代中在堆上分配一个新整数，因此`p`指向 5 个不同的对象/地址

你想达到什么目的？

# c# - wpf窗口的Listbox SelectedIndices

> ID：15204080
> 
> 赞同：-1
> 
> 时间：2013-03-04T14:40:16.613
> 
> 标签：c#, listbox, listboxitems

如何在 WPF Listbox Window 上使用以下代码。它在正常的 Win 表单 Listbox 上工作正常，所以我想在 WPF 窗口上进行测试，但我收到错误消息

“System.Windows.Controls.ListBox”不包含“SelectedIndices”的定义，并且找不到接受“System.Windows.Controls.ListBox”类型的第一个参数的扩展方法“SelectedIndices”（您是否缺少 using 指令还是汇编参考？）

这是我的原始代码

```
 private void listBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        try
        {

            this.textBox1.Text = people[listBox1.SelectedIndices[0]].name;
            this.connectbox.Text = people[listBox1.SelectedIndices[0]].ipaddress;

        }
        catch
        {
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:06:45.037

这是我所说的“WPF 心态”的一个例子，它与将所有逻辑和 UI 混合在一起的古老 winforms 心态有很大不同：

```
<Window x:Class="WpfApplication4.Window11"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window11" Height="300" Width="300">
    <DockPanel>
        <Button DockPanel.Dock="Top" Content="Copy" Command="{Binding CopyCommand}"/>

        <UniformGrid Columns="2">
            <ListBox ItemsSource="{Binding Items}" SelectionMode="Extended">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="{x:Type ListBoxItem}">
                        <Setter Property="IsSelected" Value="{Binding Mode=TwoWay, Path=IsSelected}"/>
                    </Style>
                </ListBox.ItemContainerStyle>
            </ListBox>
            <ListBox ItemsSource="{Binding SelectedItems}"/>
        </UniformGrid>
    </DockPanel>
</Window> 
```

代码背后：

```
using System.Linq;
using BaseWPFFramework.MVVM;
using System.Collections.ObjectModel;

namespace WpfApplication4
{
    public partial class Window11
    {
        public Window11()
        {
            InitializeComponent();
            DataContext = new ListViewModel();
        }
    }
} 
```

视图模型：

```
public class ListViewModel: ViewModelBase
    {
        private ObservableCollection<Selectable<string>> _items;
        public ObservableCollection<Selectable<string>> Items
        {
            get { return _items ?? (_items = new ObservableCollection<Selectable<string>>()); }
        }

        private ObservableCollection<string> _selectedItems;
        public ObservableCollection<string> SelectedItems
        {
            get { return _selectedItems ?? (_selectedItems = new ObservableCollection<string>()); }
        }

        private DelegateCommand _copyCommand;
        public DelegateCommand CopyCommand
        {
            get { return _copyCommand ?? (_copyCommand = new DelegateCommand(Copy)); }
        }

        private void Copy()
        {
            SelectedItems.Clear();
            Items.Where(x => x.IsSelected).Select(x => x.Value).ToList().ForEach(SelectedItems.Add);
        }

        public ListViewModel()
        {
            Enumerable.Range(1, 100).Select(x => new Selectable<string>("Item" + x.ToString())).ToList().ForEach(x => Items.Add(x));
        }
    }

    public class Selectable<T>: ViewModelBase
    {
        private T _value;
        public T Value
        {
            get { return _value; }
            set
            {
                _value = value;
                NotifyPropertyChange(() => Value);
            }
        }

        private bool _isSelected;
        public bool IsSelected
        {
            get { return _isSelected; }
            set
            {
                _isSelected = value;
                NotifyPropertyChange(() => IsSelected);
            }
        }

        public Selectable(T value)
        {
            Value = value;
        }

        public Selectable(T value, bool isSelected): this(value)
        {
            IsSelected = isSelected;
        }

        public override string ToString()
        {
            return Value != null ? Value.ToString() : string.Empty;
        }

    } 
```

只需将我的代码复制并粘贴到 a 中`File -> New -> WPF Application`，然后自己查看结果。

请注意，我使用的是通用解决方案 ( `Selectable<T>`)，因此您可以将其与您想要的任何类一起使用。

另外，请不要这样做：`this.textBox1.Text = whatever`在 WPF 中。WPF 鼓励 UI 和数据分离，您必须了解[UI 不是数据](https://stackoverflow.com/questions/14381402/wpf-programming-methodology/14382137#14382137)才能正确使用 WPF。如果您期望 WPF 有好的结果，请抛开 winforms 的心态。

相反，要么创建一个适当的 ViewModel 来保存文本框中显示的数据，要么将文本框直接绑定到`SelectedItems`我的示例中的实例。

顺便说一句，题外话，`normal`方式不再是winforms方式。所有最近的 ( `< 10 Years`) 技术（WPF、Silverlight、WinRT）都是基于 XAML 的，并鼓励使用 MVVM。这意味着winforms方式现在是`old`方式，而不是`normal`方式。

# php - 自动生成的 HTML - Adob e GoLive 脚本

> ID：15204083
> 
> 赞同：0
> 
> 时间：2013-03-04T14:40:19.260
> 
> 标签：php, javascript, html

好吧，我的一个客户有大约 40 个自动生成的 html 页面。这一切都是通过一个名为 Adob​​e GoLive JavaScript Library 的 JS 库完成的。我不确定发生了什么，但是在站点移动期间这已经停止工作。我真的不想尝试解决这个问题，因为我只是不喜欢通过单击链接自动生成 HTML 页面的想法。我的问题是是否有一个仍然有效的 JavaScript 库可以执行此操作，还是我应该只使用 PHP 来制作这些页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:25:59.110

使用 PHP。

原因：

*   可以在客户端关闭 Javascript。
*   几乎所有的 Web 服务器都支持 PHP，
*   并且无论客户端有什么都将呈现页面。
*   PHP 很容易学习，并且有很多关于它的文档和教程。

# asp.net-mvc - ASP.NET MVC 返回 Excel 文件

> ID：15204089
> 
> 赞同：3
> 
> 时间：2013-03-04T14:40:25.800
> 
> 标签：asp.net-mvc, download

我有一个上传文件并修改然后返回的要求。我不需要将文件保存到任何位置，而是对其进行操作并返回。但是我不知道如何返回文件。

下面的代码允许保存文件，我什至写了没有保存文件的代码。唯一的问题是我收到一个错误，该文件已被其他用户打开。

该进程无法访问文件“D:\Places\places\App_Data\877d36d3-ce29-48d1-995a-ea6652a528a7C2.xlsx”，因为它正被另一个进程使用。

你能帮我么

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult FileUpload(HttpPostedFileBase uploadFile)
{
    if (uploadFile.ContentLength > 0)
    {
        string path = string.Empty;
        var fileName = Path.GetFileName(uploadFile.FileName);
        path = Path.Combine(Server.MapPath("~/App_Data/"), Guid.NewGuid() + fileName);
        uploadFile.SaveAs(path);

        Excel.Application xlApp = new Excel.Application();
        Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(path);
        Excel._Worksheet xlWorksheet = (Excel._Worksheet)xlWorkbook.Sheets[1];
        Excel.Range xlRange = xlWorksheet.UsedRange;
        int rowCount = xlRange.Rows.Count; int colCount = xlRange.Columns.Count;
        (xlRange.Cells[4, 5] as Excel.Range).Value2 = "asdF";
        (xlRange.Cells[4, 6] as Excel.Range).Value2 = "asdF";
        (xlRange.Cells[4, 7] as Excel.Range).Value2 = "asdF";
        (xlRange.Cells[4, 8] as Excel.Range).Value2 = "asdF";

        releaseObject(xlWorksheet);
        releaseObject(xlWorkbook);
        releaseObject(xlApp);
        GC.Collect();

        uploadFile.InputStream.Dispose();
        return File(path, "application/text");

    }
    else
    {
        return View();
    }
}

private void releaseObject(object obj)
{
    try
    {
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
        obj = null;
    }
    catch (Exception ex)
    {
        obj = null;
        //MessageBox.Show("Exception Occured while releasing object " + ex.ToString());
    }
    finally
    {enter code here
        GC.Collect();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:45:19.220

在操作中，您可以返回 FileStreamResult

```
return new FileStreamResult([memory stream], "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"); 
```

您还可能希望在返回之前关闭工作簿并将其保存到临时区域。从错误看来，该文件仍处于打开状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:39:16.813

这是因为您可能没有关闭文件。在尝试再次使用之前，您应该使用类似 xlWorkbook.Close 的东西，或者您可以使用 using() 语句。

[http://msdn.microsoft.com/en-us/library/system.io.file.open(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.io.file.open(v=vs.71).aspx)

# javascript - 为什么 jQuery 示例经常省略脚本类型？

> ID：15204097
> 
> 赞同：11
> 
> 时间：2013-03-04T14:40:49.980
> 
> 标签：javascript, jquery

例如[这里](http://jqueryui.com/datepicker/)的代码是这样的：

```
<html lang="en">
   <head>
     <!-- whatever -->
     <script>
       $(function() {
         $( "#datepicker" ).datepicker();
       });
     </script>
   </head>
 <!-- whatever --> 
```

请注意，`<script>`应该包含`type`属性（可能设置为`"text/javascript"`），但此处不存在。

这不是我见过的唯一例子。这样的代码让 Visual Studio 编辑器不高兴——它强调`<script>`并说应该有一个`type`属性。这也让我很好奇。

为什么`type`经常被省略？如果我添加`type="text/javascript"`会发生什么 - jQuery 会中断还是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T14:42:05.483

这可能是因为[HTML5 不需要元素的`type`属性`<script>`](http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#attr-script-type)（默认为`"text/javascript"`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T14:45:11.490

在 HTML 5 中，现在默认情况下将脚本设置为 JavaScript 类型，因此无需指定它。HTML 4.01 似乎确实需要它。

见这里：[http ://www.w3.org/TR/html401/interact/scripts.html#h-18.2.1](http://www.w3.org/TR/html401/interact/scripts.html#h-18.2.1)

并且：[http ://www.w3.org/TR/html5/scripting-1.html#script](http://www.w3.org/TR/html5/scripting-1.html#script)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T14:43:39.073

它不再是 html5 中的要求。

[http://www.w3.org/html/wg/drafts/html/master/scripting-1.html](http://www.w3.org/html/wg/drafts/html/master/scripting-1.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T14:43:56.167

`type`标签是可选的。所有浏览器中的默认编程语言都是 JavaScript，因此它是默认的。在 XHTML 中，这个属性是必需的，也是不必要的。在 HTML 中，最好将其省略。

浏览器会知道它是 Javascript。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T20:29:43.293

Visual Studio 可能不满意，因为它很懒，需要解析标签内的`script`代码，并且智能感知也必须正常工作，因此最好`type`直接提供它，而不是让 VS 猜测您使用的是什么语言，即`text/vbscript`.

您可以在 Visual Studio 下 `html`使用高级脚本编写一些页面。[http://www.w3schools.com/vbscript/default.asp](http://www.w3schools.com/vbscript/default.asp)。`vb`

# delphi - 在当前焦点/活动表单上选择组件

> ID：15204099
> 
> 赞同：-2
> 
> 时间：2013-03-04T14:41:08.710
> 
> 标签：delphi, components, procedures

我需要在当前聚焦/活动表单上选择组件，但无法完全找到这样做的方法。所以，我有一个包含所有常用程序的 delphi 单元，所以我从其他形式调用它们。现在，问题是，使用其中一个程序我称之为组件显示动作，但是，由于组件被放置在每个表单上（找不到放置一个组件的方法，它可以被所有表单使用，但是我认为这在某种程度上无法做到。我错了吗？），我需要在当前活动的表单上为组件调用一个显示事件，否则我调用组件的指定表单会变得活跃和集中。

到目前为止，我已经尝试通过 Screen.ActiveForm 和 Screen.ActiveForm.Name 获取当前表单名称，但这些都不起作用，因为编译器无法编译，因为未定义组件父级（出现错误“'TForm'不包含名为“KeyBoard1”的成员“...）

这是程序代码：

```
 procedure KeyDownEvents(var Key: Word; Shift: TShiftState);
    begin
    CurrentForm:=Screen.ActiveForm.Name;
    if Key = VK_F9 then CurrentForm.KeyBoard1.Show;
    end; 
```

使用全局变量

```
 var CurrentForm: TForm; 
```

由于我尝试了 10 种不同的组合，我在哪里以及缺少什么......？

谢谢，

马克。

Ps：如上所述，有没有办法放置或调用组件，在任何表单上都处于活动状态，或者应该将它放置在每个表单中，所以不会改变焦点......？我知道在 MDI 中我可以使用主要形式的组件（据我所知......），但我在 SDI 工作，因为需要多个监视器......

* * *

大卫的完整代码：

```
unit CommonProcedures;

interface

uses Classes, Dialogs, StdCtrls, Math, Winapi.Windows, Winapi.Messages,
Vcl.Controls, Vcl.Forms, AdvTouchKeyboard;

procedure KeyDownEvents(var Key: Word; Shift: TShiftState);

var
CurrentForm: TComponentName;
KeyBoard1Visible: Boolean;

implementation

uses Startup, Main, Controller, Settings, Patch, Output, StageVisual, FixturesEditor,
FixturesEditorGlobal;

procedure KeyDownEvents(var Key: Word; Shift: TShiftState);
 begin
  CurrentForm:=Screen.ActiveForm.Name;
   if ((ssAlt in Shift) and (Key = VK_F4)) then Key:=0;
   if Key = VK_F1 then Main1.Show;
   if Key = VK_F2 then Controller1.Show;
   if Key = VK_F3 then Settings1.Show;
   if Key = VK_F4 then Patch1.Show;
   if Key = VK_F5 then Output1.Show;
   if Key = VK_F6 then StageVisual1.Show;
   if Key = VK_F7 then FixturesEditor1.Show;
   if Key = VK_F8 then FixturesEditor2.Show;
   if Key = VK_F9 then
     begin
       if KeyBoard1Visible=False
       then
        begin
          KeyBoard1Visible:=True;
          CurrentForm.KeyBoard1.Show;
        end
       else
        begin
         KeyBoard1Visible:=False;
         CurrentForm.KeyBoard1.Hide;
       end;
     end;
  end; 
```

结尾。

在那里你可以看到，我只省略了所有其他键事件，因为它们完全不重要，但我也省略了检查键盘是显示还是隐藏的过程，因此 VK_F9 表现为切换键。

到目前为止，这是本单元中唯一的程序，因为我几天前才开始创建程序，所以它仍然处于第一垒，所以说...是的，正如你所看到和猜测的那样，它有点轻-显示控制器程序，我大四的项目。

Ps：当我将问题编辑得更清楚时，看不到拒绝投票的理由......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:37:53.820

可以办到。它确实有点取决于组件在表单上的设置方式，例如它们是否具有相同的名称和类型。例如，这里有两种方法：

```
procedure TfrmSiteMapMain.dummy();
Var
  comp : TComponent;
begin
  // Find component by Name
  comp := screen.ActiveForm.FindComponent('btnMyButtonName');
  if comp <> nil then TButton(comp).Click;
end; 
```

或者

```
procedure TfrmSiteMapMain.dummy();
Var
  comp : TControl;
  i : integer;
  frm : TForm;
begin
  frm := screen.ActiveForm;
  for i := 0 to frm.ControlCount -1 do begin
    comp := frm.Controls[i];
    // If you had multiple components, here's where you could check its name, tag, etc
    if comp.ClassNameIs('TButton') then begin
      Break;
    end;
  end;
  if comp <> nil then TButton(comp).Click;
end; 
```

请注意，表单有一个 Controls 集合和一个 Component 集合。

**编辑添加：** 考虑到您在上面发布的代码，您可以这样做：（我没有键盘组件，但我猜它是一个 TKeyboard）

```
if Key = VK_F9 then ToggleKeyboard;

procedure ToggleKeyboard;
Var
  frm : TForm;
  comp : TComponent;
begin
  frm := Screen.ActiveForm;
  if frm <> nil then begin
    comp := frm.FindComponent('Keyboard1');
    if comp <> nil then begin
      TKeyboard(comp).Visible := not TKeyboard(comp).Visible; // toggle it
    end;
  end;
end; 
```

# laravel - 如何在 laravel 4 中注册命名空间

> ID：15204103
> 
> 赞同：2
> 
> 时间：2013-03-04T14:41:26.250
> 
> 标签：laravel, laravel-4

问题：在 PostController.php 中的第 4 行找不到类 PostRepostioryInterface 或在修补命名空间时我什至找不到类 App\Models\Interfaces\PostRepositoryInterface

问题：如何在 laravel 4 中注册命名空间？我需要做什么才能让 L4 识别此命名空间中的类/接口？

Larave 3 在 ClassLoader 中有一个 $namespaces 静态对象，您可以在其中添加命名空间

```
Autoloader::namespaces(array(
  'App\Models\Interfaces' => path('app').'models/interfaces',
)); 
```

我不确定我是否对 laravel 3 有此权利，但无论哪种方式，Laravel 4 中都不存在 AutoLoader 并且 ClassLoader 存在，但 Laravel 4 中的 ClassLoader 中不存在方法命名空间。

我看过这个，但如果不以某种方式注册命名空间，它似乎不起作用。 [在 Laravel 4 中使用命名空间](https://stackoverflow.com/questions/14714848/using-namespaces-in-laravel-4)

示例结构：

```
app/models/interfaces
    PostRepostitoryInterface.php
app/models/repositories
    EloquentPostRepository.php

namespaces:
    App\Models\Repositories;
    App\Models\Interfaces; 
```

文件：

PostRepositoryInterface.php

```
<?php namespace App\Models\Interfaces;
interface PostRepositoryInterface {
    public function all();
    public function find($id);
    public function store($data);
} 
```

EloquentPostRepository.php

```
<?php namespace App\Models\Repositories;
use App\Models\Interfaces\PostRepositoryInterface;
class EloquentPostRepository implements PostRepositoryInterface {

    public function all()
    {
        return Post::all();
    }

    public function find($id)
    {
        return Post::find($id);
    }

    public function store($data)
    {
        return Post::save($data);
    }
} 
```

PostController.php

```
<?php
use App\Models\Interfaces\PostRepositoryInterface;
class PostsController extends BaseController {

    public function __construct( PostRepositoryInterface $posts )
    {
        $this->posts = $posts; 
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T17:34:32.237

你可能忘了做`composer dump-autoload`。这会更新 Laravel 自动加载的类列表。

您可以阅读更多关于[作曲家文档](http://getcomposer.org/doc/03-cli.md#dump-autoload)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:01:01.337

在 laravel irc 频道上，我发现命名空间应该在 L4 中工作，而不需要在任何地方注册它们。这是因为 composer dump-autoload 为我将它们添加到 composer/autoload 文件中。所以这不是问题。

这个问题显然是一个错字（我在上面的代码中找不到它，但是在复制/粘贴了类名和命名空间的每一行之后发生了一些变化），而且不知何故在我的真实代码中我遗漏了'使用 EloquentPostRepository.php 的语句

```
use App\Models\Interfaces\PostRepositoryInterface; 
```

现在，我在尝试将命名空间接口与 ioc 和控制器构造函数一起使用时遇到了另一面墙（目标接口 App\Models\Interfaces\PostRepositoryInterface 不可实例化），但我想这应该是一个不同的问题。

# ruby - 在 Windows 7 上为 x86_64-linux 平台下载 Ruby gem

> ID：15204109
> 
> 赞同：0
> 
> 时间：2013-03-04T14:41:48.413
> 
> 标签：ruby, rubygems, gem

我正在尝试安装 Ruby gem 文件：bson_ext - 版本 1.5.1

在 Windows 7 命令提示符下，适用于 x86_64-linux 平台。

因此，以下命令：C:\ruby-1.9.3-p374-i386-mingw32\bin>gem install bson_ext --version 1.5.1 --platform x86_64-linux

但我得到了错误：

暂时增强 PATH 以包含 DevKit...

构建原生扩展。这可能需要一段时间...

错误：安装 bson_ext 时出错：

```
 ERROR: Failed to build gem native extension.

    C:/ruby-1.9.3-p374-i386-mingw32/bin/ruby.exe extconf.rb 
```

检查 asprintf()... *** extconf.rb 失败 ***

由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。

提供的配置选项：

```
 --with-opt-dir

    --without-opt-dir

    --with-opt-include

    --without-opt-include=${opt-dir}/include

    --with-opt-lib

    --without-opt-lib=${opt-dir}/lib

    --with-make-prog

    --without-make-prog

    --srcdir=.

    --curdir

    --ruby=C:/ruby-1.9.3-p374-i386-mingw32/bin/ruby 
```

C:/ruby-1.9.3-p374-i386-mingw32/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': 编译器生成可执行文件失败。（运行时错误）

您必须先安装开发工具。

但我可以下载其他 gem 文件，如 rails、pony、chronic 等

ruby -v 的输出是：

红宝石 1.9.3p374 (2013-01-15) [i386-mingw32]

所以我认为 Dev Kit 没有问题。

# android - 使用 ContentObserver 获取最后发送的 SMS

> ID：15204112
> 
> 赞同：2
> 
> 时间：2013-03-04T14:41:53.927
> 
> 标签：android, sms

此代码是否适用于自 Froyo 2.2 以来的任何设备/Android 版本：

```
 public class SmsObserver extends ContentObserver {
   private String Name;
   private SharedPreferences myPrefs;
   public SmsObserver(Handler handler , Context ctx) {
    super(handler);
    // TODO Auto-generated constructor stub
        context = ctx;
        initialPos = getLastMsgId();
}

    private Context context;
    private static int initialPos;
    private static final String TAG = "SMSContentObserver";
    private static final Uri uriSMS = Uri.parse("content://sms");

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        queryLastSentSMS();
    }

    public int getLastMsgId() {

        Cursor cur = context.getContentResolver().query(uriSMS, null, null, null, null);
        cur.moveToFirst();
        int lastMsgId = cur.getInt(cur.getColumnIndex("_id"));
        Log.i(TAG, "Last sent message id: " + String.valueOf(lastMsgId));
        return lastMsgId;
    }

    protected void queryLastSentSMS() {

        new Thread(new Runnable() {

            public void run() {
                Cursor cur =
                    context.getContentResolver().query(uriSMS, null, null, null, null);

                if (cur.moveToNext()) {

                    TelephonyManager tm = (TelephonyManager)
                        context.getSystemService(Context.TELEPHONY_SERVICE);

                    String myDeviceId = tm.getDeviceId();
                    String myTelephoneNumber = tm.getLine1Number();

                    Calendar c = Calendar.getInstance();
                    int day = c.get(Calendar.DAY_OF_MONTH);
                    int month = c.get(Calendar.MONTH);
                    int year = c.get(Calendar.YEAR);
                    int hour = c.get(Calendar.HOUR);
                    int minute = c.get(Calendar.MINUTE);
                    int seconde = c.get(Calendar.SECOND);

                    try {

                        String body = cur.getString(cur.getColumnIndex("body"));
                        String reformated_body =
                            Normalizer.normalize(body, Normalizer.Form.NFD).replaceAll(
                                "[^\\p{ASCII}]", "");

                        if (initialPos != getLastMsgId()) {
                            myPrefs = context.getSharedPreferences("Preferences", Context.MODE_WORLD_WRITEABLE);        

                            getDisplayNameFromPhoneNo(cur.getString(cur.getColumnIndex("address")));
                            final String finalTxt = context.getResources().getString(R.string.txtSMSSent) + " " + Name + " " +  cur.getString(cur.getColumnIndex("address")) + "  "  + context.getResources().getString(R.string.txtSMSMessage) + reformated_body;
                            Log.i(TAG, "Reformated Body : " + reformated_body);

                            Log.i("account", myDeviceId);
                            Log.i("date", day + "-" + month + "-" + year + " "
                                + hour + ":" + minute + ":" + seconde);
                            Log.i("sender", myTelephoneNumber);
                            Log.i("receiver", cur.getString(cur.getColumnIndex("address")));
                            Log.i("message", reformated_body);
                           if(!cur.getString(cur.getColumnIndex("address")).equals(Gever)){

                            // Then, set initialPos to the current position.
                            initialPos = getLastMsgId();
                        }
                    }} catch (Exception e) {
                        // Treat exception here
                    }
                }
                cur.close();
            }
        }).start();

    }

    public void getDisplayNameFromPhoneNo(String phoneNo) {
        ContentResolver localContentResolver =  context.getContentResolver();
        Cursor contactLookupCursor =  
           localContentResolver.query(
                    Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, 
                    Uri.encode(phoneNo)), 
                    new String[] {PhoneLookup.DISPLAY_NAME, PhoneLookup._ID}, 
                    null, 
                    null, 
                    null);
        try {
        while(contactLookupCursor.moveToNext()){
            String contactName = contactLookupCursor.getString(contactLookupCursor.getColumnIndexOrThrow(PhoneLookup.DISPLAY_NAME));
            String contactId = contactLookupCursor.getString(contactLookupCursor.getColumnIndexOrThrow(PhoneLookup._ID));
            Log.d("LOGTAG", "contactMatch name: " + contactName);
            Log.d("LOGTAG", "contactMatch id: " + contactId);
            Name = contactName;
            }

        } finally {
        contactLookupCursor.close();
        } 
    }

  }//End of class SmsObserver 
```

我收到一份报告说它不起作用，对我来说，它工作正常，所以这个：“content://sms”对于所有 Android 版本都一样吗？

# android - Android百分比宽度布局

> ID：15204113
> 
> 赞同：8
> 
> 时间：2013-03-04T14:41:55.633
> 
> 标签：android, layout

我需要将视图的宽度设置为屏幕宽度的 50%，然后将此视图水平居中，同时可能有 1 个或多个按钮可以出现在屏幕的左侧或右侧。

我正在使用相对布局，以便我可以放置一个带有权重的线性布局，以使我的 50% 居中，同时将任何按钮放在连接到 RL 左边缘或右边缘的 LL 顶部。但是，此布局缺少蓝色中间条。如果我将中间视图 layout_weight 设置为 1，我会得到 3 个相同大小的条。

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="48dp">

    <LinearLayout
        android:id="@+id/stupid_android"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <View
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:background="#FF0000"
            android:layout_weight="1" />

        <View
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:background="#0000FF"
            android:layout_weight="2" />

        <View
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:background="#00FF00"
            android:layout_weight="1" />

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T14:47:48.087

您应该将视图的宽度设置为`0dip`

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="48dp">

    <LinearLayout
        android:id="@+id/stupid_android"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <View
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:background="#FF0000"
            android:layout_weight="1" />

        <View
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:background="#0000FF"
            android:layout_weight="2" />

        <View
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:background="#00FF00"
            android:layout_weight="1" />

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-24T07:25:10.127

您可以使用新的 percent 库来实现这一点：

[https://developer.android.com/tools/support-library/features.html#percent](https://developer.android.com/tools/support-library/features.html#percent)

通过做这样的事情：

```
<android.support.percent.PercentRelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="48dp">

    <View
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:background="#FF0000"
        app:layout_widthPercent="25%" />

    <View
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2"
        android:background="#0000FF"
        android:centerHorizontal="true"
        app:layout_marginLeftPercent="25%"
        app:layout_widthPercent="50%" />

    <View
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:alignParentRight="true"
        android:background="#00FF00"
        app:layout_marginLeftPercent="75%"
        app:layout_widthPercent="25%" />

</android.support.percent.PercentRelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T13:33:02.177

使用新的百分比支持库。

```
compile 'com.android.support:percent:24.0.0' 
```

例子 ：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <android.support.percent.PercentRelativeLayout
        android:layout_width="match_parent"
        android:layout_height="48dp"

        >

        <View
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#FF0000"
            app:layout_widthPercent="33%" />

        <View
            android:layout_height="match_parent"
            android:layout_weight="2"
            android:background="#0000FF"
            app:layout_marginLeftPercent="33%"
            app:layout_widthPercent="33%" />

        <View
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#00FF00"
            app:layout_marginLeftPercent="66%"
            app:layout_widthPercent="33%" />

    </android.support.percent.PercentRelativeLayout>

</LinearLayout> 
```

有关更多信息[Android 文档](https://developer.android.com/reference/android/support/percent/PercentRelativeLayout.html)

*对于示例和教程 * [Tutorial1](https://inthecheesefactory.com/blog/know-percent-support-library/en) [Tutorial2](http://www.tothenew.com/blog/percentrelativelayout-in-android/) [Tutorial3](http://www.androidauthority.com/using-the-android-percent-support-library-630715/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-05T07:54:06.923

如果我理解正确，你需要这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="48dp">

    <LinearLayout
        android:id="@+id/stupid_android"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <View
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:background="#FF0000"
            android:layout_weight="1" ></View>

        <View
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:background="#0000FF"
            android:layout_weight="1.5" ></View>

        <View
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:background="#00FF00"
            android:layout_weight="1.5" ></View>

    </LinearLayout>

</RelativeLayout> 
```

# android - onClick：跳转/滚动到 View/TextView

> ID：15204116
> 
> 赞同：0
> 
> 时间：2013-03-04T14:41:59.793
> 
> 标签：android, button, onclick, textview, visibility

我创建了一个按钮，它改变了文本视图的可见性。

两者都在 ScrollLayout 和垂直 LinearLayout 中：

滚动布局

线性布局

...一些其他观点...

按钮

文本视图

/滚动布局

/线性布局

在活动开始时，TextView 可见性设置为“已消失”，因此 Button 位于屏幕底部。

我现在的问题是，如果我单击按钮并且 TextView 变得“可见”，我必须向下滚动才能看到 textview。我希望它自己滚动到 TextView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:45:06.747

我认为这应该可以解决问题，

```
scroll.fullScroll(View.FOCUS_DOWN) 
```

# sql-server - 如何在 SQL-Server 中创建一个只能访问一个表并且只能插入行的用户

> ID：15204118
> 
> 赞同：13
> 
> 时间：2013-03-04T14:42:04.967
> 
> 标签：sql-server, sql-server-2008

我有一个 SQL 服务器数据库，很快就会有两个数据库，我将它们用于一个网站。

我已经有一个只读的数据库 1 的用户帐户来搜索我们的产品库存。我想只为数据库 2 创建一个单独的帐户，只为表 1 创建一个单独的帐户，它只允许插入记录（没有更新或删除或其他任何东西）。我试图通过访问限制尽可能地冗余（在代码之上尝试防止 sql 注入，如果有人以某种方式通过，我不希望数据库本身允许它）。

所以底线问题，我如何在 SQL 服务器中创建一个用户，该用户只能访问 y 数据库中的 x 表，并且只能读取/插入记录，而没有别的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-04T14:45:39.670

创建用户，不要给任何角色，如 db_datareader 或 db_datawriter

然后`GRANT INSERT ON YourTable TO SomeUser`

如果你想插入并选择

`GRANT INSERT, SELECT ON YourTable TO SomeUser`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T14:48:15.877

(1) 仅授予对一个表的有限访问权限的用户

```
GRANT SELECT ON [schemaName].[tableName] to [username]
Go 
```

(2) 授予`INSERT`许可。

```
GRANT INSERT ON [schemaName].[tableName] TO [username] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-04T19:24:52.137

***授予对单个表的访问权限的语法：***

```
GRANT access_type ON table_name TO [user name] 
```

***撤销对单个表的访问的语法：***

```
REVOKE access_type ON table_name FROM [user name] 
```

其中 access_type 可以是 SELECT、INSERT、DELETE...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-10T09:03:58.273

授予选择`dbname.dbo.tablename`用户名它给出此错误：

> 找不到对象“APP_TBL_Log”，因为它不存在或您没有权限。

我以“sa”身份登录

# c# - 检索没有默认文档的原始（客户端）URL

> ID：15204124
> 
> 赞同：2
> 
> 时间：2013-03-04T14:42:19.247
> 
> 标签：c#, asp.net

我正在尝试获取实际的客户端请求的 URL。标准`Request.Url`对象包含响应 URL。如果原始请求不包含默认文档，这些可能会有所不同。

原始请求： http: [//my.server.com/folder/](http://my.server.com/folder/)

Request.Url.ToString()： http: [//my.server.com/folder/default.aspx](http://my.server.com/folder/default.aspx)

有没有办法在asp.net中获取原始客户端请求？

# php - 从 mysql_fetch_array 回显数据

> ID：15204127
> 
> 赞同：-1
> 
> 时间：2013-03-04T14:42:32.357
> 
> 标签：php, mysql

我正在尝试显示从“日期”中选择的数据库表中的数据。查询执行，但是当我回显时，我没有得到任何结果。你能帮我解决这个问题吗？

```
<?php include 'includes/connection.php'; ?>
<html>
<head>
<title> </title>
</head>
<body>
<?php 
if(isset($_POST['submitted'])){
$sql = "SELECT * FROM dagtaken WHERE datum = $_POST[datum]";

$result = mysql_query($sql) or die (mysql_error());
while ($row = mysql_fetch_array($result)){
echo $row['aantal'];
}
}else{
?>
<form action='' method='POST'>
<p><input type="date" name="datum"></p>
<p><input type='submit' value='Dagtaak toevoegen' />
<input type='hidden' value='1' name='submitted' /></p>
</form>
<?php } ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:46:06.177

查询不应该执行，因为日期很明显是字符串并且需要引号。那就是说...

![xkcd](../Images/ae64e1cbe3e51cba804e9c9a5c5a2db7.png)

尝试这个：

```
mysql_query("SLEECT * FROM `dagtaken` WHERE `datum`='".mysql_real_escape_string($_POST['datum'])."'"); 
```

现在回到实际问题，您正在检查`if(isset($_POST['submitted']))`，但我`<input name="submitted"`在您的源代码中看不到任何地方（**编辑**没关系，它有大量的空白将其推离边缘）。尝试`if(isset($_POST['datum']))`，因为这是您实际使用的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:45:34.850

你还没有命名你的提交按钮，所以你的 PHP 代码永远不会启动。当你真正需要的是检查是否发生了 POST 时，不要检查表单字段。

快速修复您的代码：

```
<input type="submit" name="submitted" value="Dagtaak toevoegen" />
                    ^^^^^^^^^^^^^^^^^ 
```

更好的修复：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    your code here ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:46:04.077

首先，转义您的数据。SQL注入现在很容易

其次，您的数据库中有数据吗？尝试 print_r($row) 而不是 echo $row...

$_POST 带有引号...=> $_POST["datum"] 最后添加，您的日期与您的输入相同吗？

# regex - 这个正则表达式中的 _ 是什么意思？

> ID：15204130
> 
> 赞同：0
> 
> 时间：2013-03-04T14:42:42.270
> 
> 标签：regex

此正则表达式是 (.[_a-z0-9-]+)* 电子邮件地址验证 RE 的一部分。这个正则表达式生成或接受什么样的模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:43:32.750

此正则表达式将匹配下划线（_）、字母 a 到 z、数字 0-9 和破折号。

* * *

```
[A-Z] 
```

匹配单个字符，可以是 AZ 中的任何字母

```
[A-Z]+ 
```

匹配一个或多个字符，可以是来自 AZ 的任何字母

```
[A-Z]* 
```

匹配零个或多个字符，可以是 AZ 中的任何字母

```
[A-Za-z] 
```

匹配单个字符，可以是 AZ 或 az 中的任何字母（大写或小写字母）

```
[0-9] 
```

匹配从 0 到 9 的任何数字

```
[a-z0-9_] 
```

匹配从 a 到 z 的字母、0-9 的数字或下划线的任何字符

```
[abc] 
```

匹配 a、b 或 c 的任何字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:44:01.047

括号内的部分是字符组。它匹配`_`, a 到 z, 0 到 9 和`-`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:46:04.257

它将与一个字符串匹配`an underscore(_), a hyphen(-), letters a to z, numbers 0 to 9 in any order and of any number from 1 to infinity`。

# c# - 在 ViewModel 中使用变量

> ID：15204131
> 
> 赞同：-1
> 
> 时间：2013-03-04T14:42:42.357
> 
> 标签：c#, wpf, variables, mvvm

我有一个简单的问题，我相信有人可以帮助我。如何在方法中使用我的`accountID`变量，`INavigationAware`然后在另一个类中使用它们？

下面是我的代码：

ViewModel 相关代码（HistoryAuditLogViewModel.cs）：

```
#region Private Fields

private DatabaseConnectionSetting dbSetting;
private string tableName = "Manufacturers";
private int primaryKeyID = 1;
private string entryID;
private string manufacturerID;
private string manufacturerName;
private string auditDate;
private string sqlLogin;
private string application;
private List<string> dataList;
private string dbConnectionKey = Alliance.Infrastructure.Common.DatabaseConnectionSetting.BACKFLOW_SCOPE_KEY;
private int ShowAuditLogForPrimaryID { get; set; }
private int initialAuditID;
private int _accountID;

private string xmlString()
{
    return "<row EntryID=\"" + entryID + "\" ManufacturerID=\"" + manufacturerID + "\" ManufacturerName=\"" + manufacturerName + "\" AuditDate=\"" + auditDate + "\"  SqlLogin=\"" + sqlLogin + "\" Application=\"" + application + "\" />";
}

private DataSet _dataSet;

#endregion

#region Public Fields

public DataSet dataSet
{
    get { return _dataSet; }
    set { _dataSet = value; }
}

public int accountID
{
    get { return _accountID; }
    set { _accountID = value; }
}

#endregion

#region INavigationAware Members

        bool INavigationAware.IsNavigationTarget(NavigationContext navigationContext)
        {
            string tableName;
            string holdStringValue;

            holdStringValue = navigationContext.Parameters["primarykey"];
            if (holdStringValue == null ||
                !Int32.TryParse(holdStringValue, out accountID))
            {
                accountID = 0;
            }

            if (accountID == this.ShowAuditLogForPrimaryID)
            {
                return true;
            }
            else
            {
                return false;
            }
        }

        void INavigationAware.OnNavigatedFrom(NavigationContext navigationContext)
        {
        }

        void INavigationAware.OnNavigatedTo(NavigationContext navigationContext)
        {
            string holdStringValue;
            int accountID;
            initialAuditID = 0;

            holdStringValue = navigationContext.Parameters["TableName"];
            if (holdStringValue == null ||
                !Int32.TryParse(holdStringValue, out initialAuditID))
            {
                initialAuditID = 0;
            }

            holdStringValue = navigationContext.Parameters["AccountID"];
            if (holdStringValue != null &&
                Int32.TryParse(holdStringValue, out accountID))
            {
                this.ShowAuditLogForPrimaryID = accountID;
            }
            else
            {
                this.ShowAuditLogForPrimaryID = 0;
            }

            Load_Audit();
        }

        #endregion INavigationAware Members 
```

我将需要使用`accountID`在这些方法中设置的表名。至少我认为这是他们设置的地方。我从未使用过`INavigation`，所以我对它的工作原理有点困惑。

这是我需要能够使用 ViewModel (CoreModuleDesktop) 中的变量的地方：

```
 this.NavManager.RegisterCommonActionItem("History Audit Log", "AuditLog", 110,
               new BitmapImage(new Uri("pack://application:,,,/Core;component/Resources/maintenance.png")),
                   new Action(() => 
                    {
                        IRegionManager regionManager = AllianceApp.Container.GetExportedValue<IRegionManager>();
                        UriQuery query = new UriQuery();

                        query.Add("AccountID", accountID.ToString());
                        //query.Add("ServiceOrderID", tableName.ToString());

                        regionManager.RequestNavigate(RegionNames.MainRegion, new Uri(typeof(HistoryAuditLogView).FullName + query.ToString(), UriKind.Relative));
                        }));
                  } 
```

基本上，这将允许我在 ViewModel 中运行一个查询，将查询结果放置在数据网格视图中。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:20:12.520

您已经为您的`accountID`. 您应该能够通过创建`HistoryAuditLogViewModel`类的实例来访问该变量。

我应该再次提到-您的问题的格式确实很差。当我对相关代码发表评论时，我并不是说你应该只发布整个课程。你需要找到代码的具体痛点。您已经提到您之前没有使用过 INavigation。如果您要将代码放入程序中，您需要了解它是什么以及它是如何工作的。

**你试过什么？？**您是否遇到任何特定错误？我没有看到你自己在这里尝试过这个问题——我们很难理解你在这里想要完成什么，因此很难以任何程度的帮助来回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:23:05.553

O_o 好的，我的回答已被管理员删除。我不知道为什么，但我想我现在遇到了你的问题。请看下面。

```
public interface ITest 
{
  void Test(string testInput);
}

public class TestImpl : ITest
{
  public int TestId { get; private set; }

  void ITest.Test(string testInput)
  {
    int intOut; //I think this is your point of confusion, right?
    if (!int.TryParse(testInput, out intOut))
      return;

    TestId = intOut; 
  } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:15:36.453

和 DNH 一样，真的不明白这个问题。

但也许您的问题更多是“如何访问我的视图模型实例？”

在这种情况下，您可以使用 MVVM 的消息传递模式，创建一个单例实例来存储整个应用程序的值或使用静态属性。

如果您的视图模型实例没有任何引用，则 IMO、消息传递或单例“存储库”是更合适的选择。

# iphone - 在 for 循环中添加 NSDateComponents

> ID：15204138
> 
> 赞同：0
> 
> 时间：2013-03-04T14:42:58.257
> 
> 标签：iphone, ios, objective-c, nsdate

我正在尝试编写一个方法，该方法将运行 for 循环检查日期是否在今天之前，如果是，则需要将其增加 NSDateComponent

**检查日期是否早于今天的方法：**

```
- (BOOL) isDatePassedToday:(NSDate *)recurringDate
{
    if ([recurringDate compare:[NSDate date]] == NSOrderedDescending)
        return NO;

    return YES;
} 
```

**我需要我的 for 循环如何工作的逻辑：**

```
-(NSDate *)calculateRecurringReminder:(NSDate *)startDate using:(NSDateComponents*)doItAgainComponents
{
    NSDate *recurringDate = [[NSDate alloc]init];

    recurringDate = [[NSCalendar currentCalendar] dateByAddingComponents:doItAgainComponents toDate:recurringDate options:0];

    // The loop to add components
    for ([self isDatePassedToday:recurringDate]; [self isDatePassedToday:recurringDate] == YES; doItAgainComponents)
    {

        recurringDate = [[NSCalendar currentCalendar] dateByAddingComponents:doItAgainComponents toDate:recurringDate options:0];

    }

    return recurringDate;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:51:38.507

也许你的意思是：

```
-(NSDate *)calculateRecurringReminder:(NSDate *)startDate using:(NSDateComponents*)doItAgainComponents {
    NSDate *recurringDate = startDate;

    while (![self isDatePassedToday:recurringDate]) {
        recurringDate = [[NSCalendar currentCalendar] dateByAddingComponents:doItAgainComponents toDate:recurringDate options:0];
    }

    return recurringDate;
} 
```

# ruby-on-rails - 将 /usr/bin/gcc-4.2 添加到路径 - 安装 ruby

> ID：15204141
> 
> 赞同：3
> 
> 时间：2013-03-04T14:43:01.797
> 
> 标签：ruby-on-rails, ruby, bash, rvm

我正在尝试通过 rvm 安装 ruby​​。

```
rvm install ruby-1.9.3-p286 
```

但我收到以下错误：

```
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p286.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
You requested building with '/usr/bin/gcc-4.2' but it is not in your path. 
```

参考错误的最后一行，如何在我的路径中获取“usr/bin/gcc-4.2”？

我尝试将以下内容添加`PATH="/usr/bin:$PATH"`到我的 .bash_profile 中，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:46:52.203

运行以下命令：

```
rvm requirements 
```

然后按照指示的步骤进行操作。

# java - 使用 woden-converter-maven-plugin 将 WSDL 1.1 转换为 WSDL 2.0 的 Maven 配置

> ID：15204143
> 
> 赞同：2
> 
> 时间：2013-03-04T14:43:08.163
> 
> 标签：java, web-services, maven, wsdl

我希望将 WSDL 1.1 版转换为 WSDL 2.0 格式，作为我们 maven 构建过程的一部分。

我[遇到](http://ssagara.blogspot.ie/2009/01/converting-wsdl11-to-wsdl20-using-woden.html)了 Woden Converter 实用程序，它使用 XSL 进行此转换，并希望使用它。但是，似乎没有关于如何配置或使用相关 maven 插件的文档或示例（我可以找到）：woden-converter-maven-plugin

有没有人有这方面的经验，他们可以分享 maven 插件配置详细信息吗？

理由（对于那些需要它的人）：我们有一个合同优先的 Web 服务，并且最近要求将 2.0 格式的 WSDL 公开给一个特定的客户端。为了节省维护两个相同的 WSDL，我们希望维护 1.1 wsdl 并让构建过程自动生成 2.0 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:51:28.503

[这是插件的来源](http://svn.apache.org/repos/asf/webservices/woden/trunk/java/woden-converter-maven-plugin/src/main/java/org/apache/woden/converter/maven2/ConverterMojo.java)。你可以设置的不多。检查字段。您可以在`<configuration/>`插件的部分中进行设置。

考虑一下：

```
 <plugin>
        <groupId>org.apache.woden</groupId>
        <artifactId>woden-converter-maven-plugin</artifactId>
        <version>1.0M9</version>
        <executions>
            <execution>
                <id>convert</id>
                <goals>
                    <goal>convert</goal>
                </goals>
                <configuration>
                    <wsdl><!-- File or URL of wsdl1.1 document.Also multiple
                         WSDL files can be specified as a comma separated
                         list. -->
                    </wsdl>
                    <targetNS>
                         <!-- New target namespace for WSDL2.0 document. -->
                    </targetNS>
                    <targetDir>
                         <!-- Target directory for output, default 
                              location is project build directory. -->
                    </targetDir>
                    <sourceDir><!-- Source directory for output. --></sourceDir>
                    <verbose><!-- Verbose mode --></verbose>
                    <overwrite><!-- Overwrite existing files. --></overwrite>
                </configuration>
            </execution>
        </executions>
    </plugin> 
```

# mysql - 插入相关表

> ID：15204144
> 
> 赞同：0
> 
> 时间：2013-03-04T14:43:09.650
> 
> 标签：mysql, triggers, relational-database

我有 2 个具有一对多关系的表，我需要以下插入：

```
A - source table
nr  Name
1   a
1   b
1   c
2   d
2   e
546 abc
546 asd
546 qwe

B - results table
FK_ID Name
...
6     a
6     b
6     c
7     d
7     e
8     abc
8     asd
8     qwe

C - table with unique IDs
ID
...
5 
6 (new)
7 (new)
8 (new) 
```

**我从源表**中取出行，将它们插入**结果表**中，对于每个组，我需要在**表中插入具有唯一 ID**的行并更新**结果表**中插入的行，因此我在 B 和 C 之间有关系（ID 是在 C 中自动递增）。

我应该做一个 BEFORE/AFTER INSERT 触发器，还是有更快的方法？（> 100k 行）

**编辑：**

我从 B 中删除了外键，所以我可以在 B 中插入任何内容，但现在第 2 步需要太多时间（3k 行/10 分钟）。

```
-- step 1
insert into B(..., helperColumn)
select ..., 1 from A;

-- step 2
myloop: WHILE true DO
    set @updateID = (select ID from B where helperColumn = 1 limit 1);
    if @updateID is null then
        LEAVE myloop;
    end if;

    insert into C(...)
    values(...);

    set @id = LAST_INSERT_ID();

    update B
    set ID = @id, helperColumn = 0
    where ID = @updateID
    and helperColumn = 1;

END WHILE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:28:20.607

我的最终解决方案是：

```
insert into B(FK_ID, ...)
select InsertC(nr), ... from A; 
```

InsertC 是一个函数

```
CREATE FUNCTION `InsertC`(pOldID BIGINT) RETURNS bigint(20)
BEGIN

    set @newID = (select ID from B where OldID = pOldID);

    if @newID is null then
        insert into C(..., OldID)
        values(..., pOldID);

        set @newID = LAST_INSERT_ID();
    end if;

    RETURN @newID;
END 
```

我仍然需要 B 中的新列（OldID + 索引），但这比以前快得多。

# android - uiAutomator 在 4.1.2 设备上失败

> ID：15204154
> 
> 赞同：4
> 
> 时间：2013-03-04T14:43:53.067
> 
> 标签：android, ui-automation, android-uiautomator

在使用 Android uiAutomator 时，我在尝试在 4.1.2 设备上运行测试时遇到了问题。使用[此处输入链接描述](http://developer.android.com/tools/testing/testing_ui.html "教程")中的代码时，尝试滚动应用程序托盘时会引发异常。

我最初认为它是由 api 17 而不是 16 编译引起的，但这似乎不是真的。其他人遇到过这个吗？

引发异常：

> [exec] java.lang.reflect.InvocationTargetException [exec] 在 java.lang.reflect.Method.invokeNative(Native Method) [exec] 在 java.lang.reflect.Method.invoke(Method.java:511) [exec]在 com.example.runTests(Runner.java:124) [exec] 在 com.example.testExecutor(Runner.java:60) [exec] 在 java.lang.reflect.Method.invokeNative(Native Method) [exec] 在java.lang.reflect.Method.invoke(Method.java:511) [exec] at junit.framework.TestCase.runTest(TestCase.java:168) [exec] at junit.framework.TestCase.runBare(TestCase.java: 134) [exec] at junit.framework.TestResult$1.protect(TestResult.java:115) [exec] at junit.framework.TestResult.runProtected(TestResult.java:133) [exec] at junit.framework.TestResult.run (TestResult.java:118) [exec] at junit.framework.TestCase.run(TestCase.java:124) [exec] at com.android.uiautomator.testrunner.UiAutomatorTestRunner.start(UiAutomatorTestRunner.java:124) [exec] at com.android.uiautomator.testrunner.UiAutomatorTestRunner.run(UiAutomatorTestRunner.java:85) [exec] at com.android.commands.uiautomator.RunTestCommand.run(RunTestCommand.java:76) [exec] 在 com.android.commands.uiautomator.Launcher.main(Launcher.java:83) [exec] 在 com.android.internal。 os.RuntimeInit.nativeFinishInit(Native Method) [exec] at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:235) [exec] at dalvik.system.NativeStart.main(Native Method) [exec] 引起作者：java.lang.NoSuchMethodError: com.android.uiautomator.core.UiScrollable.setAsHorizo​​ntalList [exec] at com.example.Runner.launchAppFromHomeScreen(Test.java:45) [exec] ... 还有 19 个testrunner.UiAutomatorTestRunner.start(UiAutomatorTestRunner.java:124) [exec] at com.android.uiautomator.testrunner.UiAutomatorTestRunner.run(UiAutomatorTestRunner.java:85) [exec] at com.android.commands.uiautomator.RunTestCommand.run( RunTestCommand.java:76) [exec] 在 com.android.commands.uiautomator.Launcher.main(Launcher.java:83) [exec] 在 com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method) [exec]在 com.android.internal.os.RuntimeInit.main(RuntimeInit.java:235) [exec] 在 dalvik.system.NativeStart.main(Native Method) [exec] 引起：java.lang.NoSuchMethodError: com.android。 uiautomator.core.UiScrollable.setAsHorizo​​ntalList [exec] at com.example.Runner.launchAppFromHomeScreen(Test.java:45) [exec] ... 还有 19 个testrunner.UiAutomatorTestRunner.start(UiAutomatorTestRunner.java:124) [exec] at com.android.uiautomator.testrunner.UiAutomatorTestRunner.run(UiAutomatorTestRunner.java:85) [exec] at com.android.commands.uiautomator.RunTestCommand.run( RunTestCommand.java:76) [exec] 在 com.android.commands.uiautomator.Launcher.main(Launcher.java:83) [exec] 在 com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method) [exec]在 com.android.internal.os.RuntimeInit.main(RuntimeInit.java:235) [exec] 在 dalvik.system.NativeStart.main(Native Method) [exec] 引起：java.lang.NoSuchMethodError: com.android。 uiautomator.core.UiScrollable.setAsHorizo​​ntalList [exec] at com.example.Runner.launchAppFromHomeScreen(Test.java:45) [exec] ... 还有 19 个124) [exec] at com.android.uiautomator.testrunner.UiAutomatorTestRunner.run(UiAutomatorTestRunner.java:85) [exec] at com.android.commands.uiautomator.RunTestCommand.run(RunTestCommand.java:76) [exec] at com.android.commands.uiautomator.Launcher.main(Launcher.java:83) [exec] 在 com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method) [exec] 在 com.android.internal.os.RuntimeInit .main(RuntimeInit.java:235) [exec] at dalvik.system.NativeStart.main(Native Method) [exec] 原因：java.lang.NoSuchMethodError: com.android.uiautomator.core.UiScrollable.setAsHorizo​​ntalList [exec]在 com.example.Runner.launchAppFromHomeScreen(Test.java:45) [exec] ... 还有 19 个124) [exec] at com.android.uiautomator.testrunner.UiAutomatorTestRunner.run(UiAutomatorTestRunner.java:85) [exec] at com.android.commands.uiautomator.RunTestCommand.run(RunTestCommand.java:76) [exec] at com.android.commands.uiautomator.Launcher.main(Launcher.java:83) [exec] 在 com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method) [exec] 在 com.android.internal.os.RuntimeInit .main(RuntimeInit.java:235) [exec] at dalvik.system.NativeStart.main(Native Method) [exec] 原因：java.lang.NoSuchMethodError: com.android.uiautomator.core.UiScrollable.setAsHorizo​​ntalList [exec]在 com.example.Runner.launchAppFromHomeScreen(Test.java:45) [exec] ... 还有 19 个uiautomator.RunTestCommand.run(RunTestCommand.java:76) [exec] 在 com.android.commands.uiautomator.Launcher.main(Launcher.java:83) [exec] 在 com.android.internal.os.RuntimeInit.nativeFinishInit( Native Method) [exec] at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:235) [exec] at dalvik.system.NativeStart.main(Native Method) [exec] 原因：java.lang。 NoSuchMethodError: com.android.uiautomator.core.UiScrollable.setAsHorizo​​ntalList [exec] at com.example.Runner.launchAppFromHomeScreen(Test.java:45) [exec] ... 还有 19 个uiautomator.RunTestCommand.run(RunTestCommand.java:76) [exec] 在 com.android.commands.uiautomator.Launcher.main(Launcher.java:83) [exec] 在 com.android.internal.os.RuntimeInit.nativeFinishInit( Native Method) [exec] at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:235) [exec] at dalvik.system.NativeStart.main(Native Method) [exec] 原因：java.lang。 NoSuchMethodError: com.android.uiautomator.core.UiScrollable.setAsHorizo​​ntalList [exec] at com.example.Runner.launchAppFromHomeScreen(Test.java:45) [exec] ... 还有 19 个java:235) [exec] at dalvik.system.NativeStart.main(Native Method) [exec] 原因：java.lang.NoSuchMethodError: com.android.uiautomator.core.UiScrollable.setAsHorizo​​ntalList [exec] at com.example。 Runner.launchAppFromHomeScreen(Test.java:45) [exec] ... 19 更多java:235) [exec] at dalvik.system.NativeStart.main(Native Method) [exec] 原因：java.lang.NoSuchMethodError: com.android.uiautomator.core.UiScrollable.setAsHorizo​​ntalList [exec] at com.example。 Runner.launchAppFromHomeScreen(Test.java:45) [exec] ... 19 更多

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T08:56:50.280

UIAutomator 的代码有变化：

```
4.1.1 method : public void setAsHorizontalList ()
4.2 method : public UIScrollable setAsHorizontalList () 
```

可能您正在使用 API-17 的 UIAutomator 构建测试，但在 API-16 设备上运行。尝试使用相应的 UIAutomator.jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:17:39.580

From my experiments this week with UI Automator it's still seems immature, with the best support available with android-17 as your target and with a device running 4.2.1\. I tried using my Galaxy S device which has 4.1.2 installed and had similar errors to those you report.

FYI: I think there's a bug in Android 4.2.2 that stops scrollIntoView(...) calls from swiping more than once. I've reported the problem to Google [https://groups.google.com/forum/?fromgroups=#!topic/adt-dev/TjeewtpNWf8](https://groups.google.com/forum/?fromgroups=#!topic/adt-dev/TjeewtpNWf8)

I found the demo app [http://developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html) worked on my device with Android 4.2.1 You might need to tweak the code slightly, however the method calls do work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T11:09:51.913

您好，即使我遇到了同样的问题，首先我删除了我拥有的 build.xml 并创建了新的 build.xml 文件，然后运行 ​​ant build。它适用于我尝试相同的..

# c - 错误 C2102：“&”需要左值

> ID：15204158
> 
> 赞同：0
> 
> 时间：2013-03-04T14:44:02.013
> 
> 标签：c, math, initialization, gsl, lvalue

代码行： **`gsl_blas_daxpy(-a,&gsl_matrix_column(D, q).vector,y);`** 导致错误

> 错误 C2102：“&”需要左值

，现在的问题是我无法控制 GSL 功能，所以我不知道如何解决这个问题（删除“ `&`”不起作用）

之后我得到

> 错误 C2198：“gsl_blas_daxpy”：调用的参数太少

我正在使用 Visual Studio 2010。

```
GSL_EXPORT int  gsl_blas_daxpy (double alpha,
                                const gsl_vector * X,
                                gsl_vector * Y);

#include <stdio.h>
#include <math.h>
#include <time.h>
#include <gsl/gsl_vector.h>
#include <gsl/gsl_matrix.h>
#include <gsl/gsl_blas.h>

#define M (10) // Number of columns in dictionary */
#define N ((int)(M/2)) // Number of rows in dictionary */
int K = 0.07*M; //Number of non-zero elements in signal - the sparsity 
int P=1; //number of signals
double epsilon = 1.0e-7; // Residual error 
int numOfIterations = N; /* Max num of iterations - same as num of elements in signal */

double sign(double x){return (x>=0) - (x<0);} // Sign function 

int main(int argc, char** argv)
{
int n, m, k, iter, q;
double normi, normf, tmp , norm=sqrt(N), htime;
gsl_matrix *D;  // A random dictionary used for encoding the sparse signal  NxM
gsl_vector *x;  // Sparse info signal (encoder input) MxP
gsl_vector *z;  // Evaluated Sparse info signal (decoder output)  MxP
gsl_vector *r;  // Residual error vector MxP
gsl_vector *y;  // Sparse representation of signal (encoder output) NxP
gsl_vector_view v;
clock_t start; //for measuring performance

printf("\nDictionary is:NxM=%dx%d,and the signal sparsity is K=%d", N, M, K);

srand(time(NULL)); //Initialize srand
start =clock(); //Initialize  clock

/* Initiallize D as a Bernoulli random dictionary */
D = gsl_matrix_alloc (N, M);
for(m=0; m<M; m++)
    {
    for(n=0; n<N; n++)
     {
        tmp=sign(2.0*rand()/(double)RAND_MAX-1.0)/norm;
        gsl_matrix_set (D, n, m, tmp);    //D[n,m]=tmp
     }
   }

/* Create a random K-sparse info signal */
x = gsl_vector_alloc(M);
for(k=0; k<K; k++)
 {
    gsl_vector_set(x, rand()%M, 2.0*rand()/(float)RAND_MAX - 1.0); //put random values at k random positions
 }

/* Allocate memory for solution (evaluated signal) */
z = gsl_vector_calloc(M); 

/* Allocate memory for residual vector */
r = gsl_vector_calloc(M);

/* Allocate memory for the encoded signal vector (its representation) */
y = gsl_vector_alloc(N);

htime=((double)clock()-start)/CLOCKS_PER_SEC;
printf("\nTime data allocation: %f", htime);

/* Encoding the signal (x to y) */
start = clock();
gsl_blas_dgemv(CblasNoTrans, 1, D, x, 0, y); // y = Dx
htime=((double)clock()-start)/CLOCKS_PER_SEC;
printf("\nTime for encoding: %f", htime);

/* Decoding the signal */
start = clock();
normi = gsl_blas_dnrm2(y); // ||y|| (L2 norm)
epsilon = sqrt(epsilon * normi); 
normf = normi;
iter = 0;

/*iterate till the computational error is small enough*/
while(normf > epsilon && iter < numOfIterations)
    {
        gsl_blas_dgemv(CblasTrans, 1, D, y, 0, r); // r=D'*y
        q = gsl_blas_idamax(r); //index of max element in residual vector
        tmp = gsl_vector_get(r, q); //the  max element in r
        gsl_vector_set(z, q, gsl_vector_get(z, q)+tmp); // z[q]=z[q]+ tmp
        v=gsl_matrix_column(D, q); // choose the dictrionary's atom (coloum) with the index of largest element in r
        gsl_blas_daxpy(-tmp,&v.vector,y); // y = y-tmp*v
        normf = gsl_blas_dnrm2(y); // ||y|| (L2 norm)
        iter++;
    }

htime = ((double)clock()-start)/CLOCKS_PER_SEC;
printf("\nTime for decoding: %f", htime);
tmp = 100.0*(normf*normf)/(normi*normi); // the error at end of algorithm
printf("\nComputation residual error: %f",tmp);

/* Check the solution (evaluated signal) against the original signal */
printf("\nSolution (first column),Reference (second column):");
getchar(); // wait for pressing a key
for(m=0; m<M; m++)
    {   
        printf("\n%.3f\t%.3f", gsl_vector_get(x, m),gsl_vector_get(z, m));
    }

normi = gsl_blas_dnrm2(x);
gsl_blas_daxpy(-1.0, x, z); // z = z-x
normf = gsl_blas_dnrm2(z); // ||z|| (L2 norm)
tmp = 100.0*(normf*normf)/(normi*normi); //final error
printf("\nSolution residual error: %f\n",tmp);

/* Memory clean up and shutdown*/
gsl_vector_free(y); gsl_vector_free(r);
gsl_vector_free(z); gsl_vector_free(x);
gsl_matrix_free(D);
getchar();
return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:01:26.537

`gsl_matrix_column(D, q).vector`是一个 R 值。你不能拿它的地址。您需要一个 L 值，因此首先将其分配给命名变量，然后将该变量的地址传递给函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:05:02.857

```
 gsl_vector_view c=gsl_matrix_column(D, q);
    gsl_blas_daxpy(-a,&c.vector,y); 
```

我认为，引入时间变量会导致您将指向它的指针传递给函数。

编辑：好吧，试图理解问题，我想知道函数期望什么：

[`int gsl_blas_daxpy (double alpha, const gsl_vector * x, gsl_vector * y)`](http://www.gnu.org/software/gsl/manual/html_node/Level-1-GSL-BLAS-Interface.html)

和

[`gsl_vector_view gsl_matrix_column (gsl_matrix * m, size_t j)`](http://www.gnu.org/software/gsl/manual/html_node/Creating-row-and-column-views.html)

有一些[解释](http://www.gnu.org/software/gsl/manual/html_node/Vector-views.html)：

> 向量视图可以传递给任何接受向量参数的子程序，就像直接分配的向量一样，使用 &view.vector。

和一个[例子](http://www.gnu.org/software/gsl/manual/html_node/Example-programs-for-matrices.html)：

```
 for (j = 0; j < 10; j++)
     {
       gsl_vector_view column = gsl_matrix_column (m, j);
       double d;

       d = gsl_blas_dnrm2 (&column.vector);

       printf ("matrix column %d, norm = %g\n", j, d);
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:27:11.237

如果你为 的返回值做一个更永久的家`gsl_matrix_column`，（这个特殊的）问题就会消失。

下面是一些简化的代码，说明了如何在可寻址槽中捕获返回值：

```
struct _foo {
  int i;
};

struct _foo bar () {
  struct _foo result = { 5 };
  return result;
}

/* won't compile; 'lvalue required as unary & operand */
void qux () {
  int *j = &bar().i;
}

/* compiles OK */
void qal () {
  struct _foo result = bar();
  int* j = &result.i;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T23:42:59.997

现在我们有另一个问题：

这里有另一个答案：

你知道那`int K= 0.7`是`K=0`吗？

```
#define M (10) // Number of columns in dictionary */
int K = 0.07*M; //Number of non-zero elements in signal - the sparsity 
```

alloc 不初始化向量`x`。`x`将包含垃圾值，而不是`0`. 你的意思是`x = gsl_vector_calloc(M);` [c](http://www.network-theory.co.uk/docs/gslref/Vectorallocation.html)吗？它将设置`x`为`0`。

```
/* Create a random K-sparse info signal */
x = gsl_vector_alloc(M);
for(k=0; k<K; k++)      // K=0, for get skiped and x not modified.
 {
    gsl_vector_set(x, rand()%M, 2.0*rand()/(float)RAND_MAX - 1.0); //put random values at k random positions
 } 
```

（在这里你最多会有 K 个随机值，但可能是最少的）

# fifo - Syslog-ng、日志文件和fifo文件

> ID：15204160
> 
> 赞同：0
> 
> 时间：2013-03-04T14:44:05.570
> 
> 标签：fifo, splunk, syslog-ng

我对 syslog fifo 和日志文件有一些疑问。

例如，我有我的 gc.log，我在 syslog 上有这个配置

```
source s_splunk {
    udp(ip("127.0.0.1") port(514));
    file("/logs/gc.log" follow_freq(1));
};

destination d_splunk {
    tcp (my.splunk.intranet port (1514));
};

log {
    source (s_splunk);
    destination (d_splunk);
}; 
```

在 splunk 上索引这个 gc.log。但是这样我得到了很高的 cpu 消耗，我喜欢改变我索引这个日志文件的方式。

我想通过 fifo 文件进行索引，但我无法更改应用程序生成此日志文件的方式。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:53:12.837

我找到了一些方法来解决我的问题。我删除了我的 gc.log 文件并像 fifo 文件一样构建这个文件，我更改了这个文件的权限。

因此，JVM 使用 de fifo 进行日志记录，并在 syslog-ng 上配置一个目的地以将日志写入文件并发送到我的 splunk vip (my.splunk.intranet)。

使用此解决方案，我的系统日志没有高 CPU 使用率。

# process - 检查进程是否存在于 go way

> ID：15204162
> 
> 赞同：19
> 
> 时间：2013-03-04T14:44:06.107
> 
> 标签：process, go

如果我有进程的 PID，[os.FindProcess 是否](http://godoc.org/os#FindProcess)足以测试进程的存在？我的意思是如果它返回`err`，我可以假设它被终止（或被杀死）吗？

编辑：

我刚刚围绕`kill -s 0`（旧式 bash 进程测试）编写了一个包装函数。这没有任何问题，但如果有其他解决方案（使用 go 库完成）来解决这个问题，我仍然很高兴。：

```
func checkPid(pid int) bool {
    out, err := exec.Command("kill", "-s", "0", strconv.Itoa(pid)).CombinedOutput()
    if err != nil {
        log.Println(err)
    }

    if string(out) == "" {
        return true // pid exist
    }
    return false
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-04T20:16:29.520

这是查看进程是否处于活动状态的传统 unix 方法 - 向其发送 0 信号（就像您对 bash 示例所做的那样）。

来自`kill(2)`：

> ```
>  If  sig  is 0, then no signal is sent, but error checking is still per‐
>    formed; this can be used to check for the existence of a process ID  or
>    process group ID. 
> ```

并翻译成 Go

```
package main

import (
    "fmt"
    "log"
    "os"
    "strconv"
    "syscall"
)

func main() {
    for _, p := range os.Args[1:] {
        pid, err := strconv.ParseInt(p, 10, 64)
        if err != nil {
            log.Fatal(err)
        }
        process, err := os.FindProcess(int(pid))
        if err != nil {
            fmt.Printf("Failed to find process: %s\n", err)
        } else {
            err := process.Signal(syscall.Signal(0))
            fmt.Printf("process.Signal on pid %d returned: %v\n", pid, err)
        }

    }
} 
```

当你运行它时，你会得到这个，显示进程 123 已经死了，进程 1 是活动的但不属于你，进程 12606 是活动的并且属于你。

```
$ ./kill 1 $$ 123
process.Signal on pid 1 returned: operation not permitted
process.Signal on pid 12606 returned: <nil>
process.Signal on pid 123 returned: no such process 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T15:13:39.507

在类 unix 系统（linux、freebsd 等）上，os.FindProcess 永远不会返回错误。我不知道在 Windows 上会发生什么。这意味着在您尝试使用 *os.Process 之前，您不会知道 PID 是否正确。

你可以看看[这里](http://golang.org/src/pkg/os/exec_unix.go#L59)的代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-15T01:20:57.920

您也可以只使用`syscall.Kill`. 它相当于更少的代码。

```
killErr := syscall.Kill(pid, syscall.Signal(0))
procExists := killErr == nil 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T15:21:39.663

如果在系统中未找到先前已知的 pid（不确定 go 函数），则意味着进程肯定已终止并已加入（在 Unix 上，带有[等待调用](http://linux.die.net/man/3/wait)）。

但反过来不一定是真的。仅仅因为存在 pid，它并不能保证它与以前的进程相同。例如，标准 Linux 中只有 65535 个有效的 pid，当有回绕时它们可以被重新使用。但是，如果您经常检查，出于实际目的，您不需要关心这一点（只要发现错误的新进程的 pid 不是安全漏洞或其他关键问题，有人可能会故意触发恶意目的）。

相关链接（以及右栏中的相关问题）：

*   [https://superuser.com/questions/135007/how-are-pids-generated](https://superuser.com/questions/135007/how-are-pids-generated)
*   [https://unix.stackexchange.com/questions/26677/will-process-ids-be-recycled-what-if-you-reach-the-maximal-id](https://unix.stackexchange.com/questions/26677/will-process-ids-be-recycled-what-if-you-reach-the-maximal-id)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-23T18:16:22.157

到目前为止，所有答案都是不完整的实现。请参阅[https://github.com/shirou/gopsutil/blob/c141152a7b8f59b63e060fa8450f5cd5e7196dfb/process/process_posix.go#L73](https://github.com/shirou/gopsutil/blob/c141152a7b8f59b63e060fa8450f5cd5e7196dfb/process/process_posix.go#L73)以获得更完整的实现（内联复制）

```
 func PidExists(pid int32) (bool, error) {
        if pid <= 0 {
            return false, fmt.Errorf("invalid pid %v", pid)
        }
        proc, err := os.FindProcess(int(pid))
        if err != nil {
            return false, err
        }
        err = proc.Signal(syscall.Signal(0))
        if err == nil {
            return true, nil
        }
        if err.Error() == "os: process already finished" {
            return false, nil
        }
        errno, ok := err.(syscall.Errno)
        if !ok {
            return false, err
        }
        switch errno {
        case syscall.ESRCH:
            return false, nil
        case syscall.EPERM:
            return true, nil
        }
        return false, err
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-05T11:23:53.610

在 Windows 上检查结果`os.FindProcess()`似乎足以检查进程是否正在运行。

```
func isProcessRunning(pid int) bool {
    _, err = os.FindProcess(pid)
    if err != nil {
        return false
    }
    if runtime.GOOS == "windows" {
        return true
    }
    return false // further checking for other systems then Windows is not supported here
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-26T20:58:50.033

经过几个小时的搜索，知道进程是否在 Windows 上运行的正确答案如下：

```
func CheckProcessLife(pid int){
    cmd,_ := exec.Command("tasklist","/FI", "PID eq " + strconv.Itoa(pid)).Output()
    output := string(cmd[:])
    splitOutp := strings.Split(output, " ")
    if !(splitOutp[1] == "no") {
        time.Sleep(500 * time.Millisecond)
        fmt.Println("Process is running...")
        CheckProcessLife(pid)
    }else{
        fmt.Println("Process is no longer running.")
    }
} 
```

您可以检查进程是使用他的 PID 还是直接使用他的名字运行，只需更改此行：

```
cmd,_ := exec.Command("tasklist","/FI", "IMAGENAME eq yourprocessname.exe").Output() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-24T01:04:50.980

这是如何在 Windows 上使用 Golang 检查进程是否存在/运行的一种方法。

我们执行命令：

```
TASKLIST /V /NH /FI "PID eq 23232" 
```

哪个可以返回：

```
INFO: No tasks are running which match the specified criteria. 
```

或者如果发现：

```
Image Name                     PID Session Name        Session#    Mem Usage Status          User Name                                              CPU Time Window Title                                                         
========================= ======== ================ =========== ============ =============== ================================================== ============ ========================================================================
chrome.exe                   23232 Console                    1     42,472 K Unknown         THANOS\MARVEL                                       0:00:00 N/A 
```

这是一个利用这些信息的函数。

```
func isProcessRunning(pid int) bool {
    cmd := exec.Command("TASKLIST", "/FI", fmt.Sprintf("PID eq %d", pid))
    result, err := cmd.Output()
    if err != nil {
        return false
    }
    return !bytes.Contains(result, []byte("No tasks are running"))
} 
```

最好的一点是您也可以通过其他参数找到该过程：

```
ImageName   eq, ne                  Image Name String
PID         eq, ne, gt, lt, ge, le  Process ID, A Positive integer.
Session     eq, ne, gt, lt, ge, le  Any valid session number.
SessionName eq, ne                  String
Status      eq, ne                  RUNNING | NOT RESPONDING | UNKNOWN
CPUTime     eq, ne, gt, lt, ge, le  Time hh:mm:ss
MemUsage    eq, ne, gt, lt, ge, le  Memory usage in KB, specify a valid integer.
Username    eq, ne                  User name ([Domain\]User).
Services    eq, ne                  Service Name String
Windowtitle eq, ne                  Window Title String
Modules     eq, ne                  DLL Name String 
```

# iphone - Objective C 从 TextView 中的 TextField 和 List 收集数据

> ID：15204167
> 
> 赞同：0
> 
> 时间：2013-03-04T14:44:21.223
> 
> 标签：iphone, objective-c, xcode, ios6

在 View1 上，我有一个空的 textView，它将填充来自 textField 的数据。文本字段位于 View2 上。每次我向右滑动查看 View1 中的数据时，它都不会在 textView 中列出。它会覆盖当前存在的任何内容。

这是我的代码：[https ://github.com/dward1289/Objective-CII/tree/master/week4Proj](https://github.com/dward1289/Objective-CII/tree/master/week4Proj)

作业已经完成，但即使在评分之后，我也从未发现自己做错了什么。请看一下，并告诉我可以更改什么，以便 textField 数据将填充到 textView 中并且不会覆盖当前文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:44:39.183

我猜您想将新输入附加到旧信息中。如果是这样，

```
-(void)DidClose:(NSString*)nameString
{
    txtView.text = [txtView.text stringByAppendingString:nameString];
} 
```

# ruby - 谁能解释一下？

> ID：15204170
> 
> 赞同：2
> 
> 时间：2013-03-04T14:44:30.717
> 
> 标签：ruby, arrays, hash

我无法理解此评论。

```
Array({:a => "a", :b => "b"}) #=> [[:a, "a"], [:b, "b"]] 
```

你能详细解释一下它是如何工作的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T14:46:42.790

`{:a => "a", :b => "b"}`创建一个哈希。
将其传递给`Array`将创建一个数组数组。外部数组的每个数组元素将是另一个数组，其中包含哈希的一项的键和值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T14:47:45.370

这些`Array`方法将您的哈希转换为数组。
因此，对于散列的每个条目，ruby 将创建一个包含两个元素的数组：散列中条目的键和值。

您的数组中有两个条目：

`:a => "a"`哪个变成`[:a, "a"]`
`:b => "b"`哪个变成`[:b, "b"]`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T14:52:30.397

它实际上是 Kernel 模块提供的一种方法。

首先它尝试调用`to_ary`（为数组返回 self），然后`to_a`是参数。

`to_ary`使用相应的方法和.你会得到相同的结果`to_a`。

# javascript - 如何使用 Javascript 向具有这种结构的表中添加行？

> ID：15204174
> 
> 赞同：-2
> 
> 时间：2013-03-04T14:44:45.780
> 
> 标签：javascript, jquery, html-table

如何使用 Javascript 向具有这种结构的表中添加行？

基本上我希望能够单击一个按钮并在表中为下面使用的每一列创建一个新行。例如，它可以是名称：新书，数量：30 等。

```
<table id="dynamictable">
    <tbody>
        <tr>
            <td class="name">My Favorite book</td>
            <td class="quantity">x&nbsp;20</td>
            <td class="unit_price">£8.99</td>
            <td class="total">£179.80</td>
            <td class="remove">
                <img src="image/cross.png">
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:00:32.117

```
var newRow = '<tr><td class="name">New Book</td>[...]</tr>'; // add all your code here
$('#dynamictable tbody').append(newRow); 
```

应该这样做（未经测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:11:50.340

克隆按钮单击的第一行。填写新数据。然后将其附加到表中。

```
$( '#mybutton' ).click(function(){
    var tr = $('#dynamictable tr').eq(0).clone();

    tr.find('td').each(function(){
        $(this).html( 'Put Your Data Here.' );
    });

    $('#dynamictable').append(tr);

}); 
```

jsFiddle：http: [//jsfiddle.net/4hrVQ/1/](http://jsfiddle.net/4hrVQ/1/)

# android - 一次播放多个音频

> ID：15204176
> 
> 赞同：0
> 
> 时间：2013-03-04T14:44:50.380
> 
> 标签：android, audio-processing

我需要从 sd 卡一次播放多个音轨。我试图玩 SoundPool。但它不支持更大的文件。

我尝试使用 AudioTrack，但它需要纯 PCM 代码。从 mp3 或 3gp 文件生成复杂的 PCM 代码位，因为 android 没有内置任何内容。

我看过 OpenSL 引擎，但没有找到任何好的示例或教程来使用它。

如何以循环方式一次播放多个音频？任何想法，建议都会有很大帮助。

# php - Twitter Bootstrap HTML 表单单选按钮不适用于 PHP POST

> ID：15204181
> 
> 赞同：2
> 
> 时间：2013-03-04T14:45:00.867
> 
> 标签：php, html, twitter-bootstrap, radio-button

由于某种原因，在使用 Twitter Bootstrap 框架时，我的表单中的单选按钮值没有被传递到某些 Web 浏览器上的表单 PHP 脚本。

形式：

```
<form action="" method="post">  
<li class="stream-item stream-header search-input-item">
<span class="add-on"><i class="icon-search"></i></span>
<input type="text" class="input-xxlarge" id="appendedInputButton" autocomplete="off" name="q">
<button class="btn btn-primary" type="submit">Search</button>
</li>
</div>
<p></p>
<label class="radio">
  <input type="radio" name="opt" value="1" checked>
  Option 1
</label>
<label class="radio">
  <input type="radio" name="opt" value="2">
  Option 2
</label>

</form> 
```

用于收集变量的 PHP 代码是一个简单的行：

```
$option = $_POST['opt']; 
```

这种方法在 Chrome 上工作得很好，但在 IE、Firefox 或 Opera 中不起作用。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:07:44.593

How are you submitting the data? I cannot see a submit button.

The code works fine for me in FF using the following (notice I added a submit button):

```
<form action="" method="post">  
<li class="stream-item stream-header search-input-item">
<span class="add-on"><i class="icon-search"></i></span>
<input type="text" class="input-xxlarge" id="appendedInputButton" autocomplete="off" name="q">
<button class="btn btn-primary" type="submit">Search</button>
</li>
</div>
<p></p>
<label class="radio">
  <input type="radio" name="opt" value="1" checked>
  Option 1
</label>
<label class="radio">
  <input type="radio" name="opt" value="2">
  Option 2
</label>

<input type="submit" name="submit" value="submit" >

</form> 
```

Result from print_r($_POST);

```
Array ( [q] => [opt] => 1 [submit] => submit ) 
```

# mysql - Mysql 函数 - 不知道从哪里开始

> ID：15204187
> 
> 赞同：0
> 
> 时间：2013-03-04T14:45:16.287
> 
> 标签：mysql, function, cursor

我想在 Mysql 中编写一个函数，从给定的产品代码返回一个格式化的字符串

这是我现在需要手动进行调用以获得所需结果的示例。

```
SELECT p.productcategoryid from products p where (isnull(p.endeffdt) or (p.endeffdt = '0000-00-00') or (p.endeffdt > now())) and p.code='T29R66N1'; 
```

T29R66NQ 是我需要完整路径的产品代码 - 上述调用返回“38”作为类别 ID。

然后我根据上面的结果执行以下选择

```
SELECT name,parentid,productcategorypath FROM productcategory WHERE recid = '38'; 
```

这返回

名称->内置滚刀
parentid->7
productcategorypath=222,7,38

然后使用该结果

```
SELECT name,parentid,productcategorypath FROM productcategory WHERE recid = '7'; 
```

给我

名称-> 内置
parentid->222
productcategorypath=222,7

再一次，我然后做

```
SELECT name,parentid,productcategorypath FROM productcategory WHERE recid = '222'; 
```

这反过来又给了我

name->Kitchen & Home Appliances
parentid->0
productcategorypath=222

我停在那里，因为 parentid = 0 （它可能会继续进行更多迭代，但总是以父 id 为 0 结束），但我需要最后 3 次选择的结果给我以下字符串

```
Kitchen & Home Appliances > Built-In  > Built-In Hobs 
```

我想要一个mysql函数，我可以像这样使用它

```
select getpath(code) from products where code='T29R66N1' 
```

任何帮助，将不胜感激。

编辑：

我自己设法弄清楚了-这是我的功能

> 如果存在则删除函数 mydb.getpath;
> 
> 创建函数 mydb.getpath (itemid VARCHAR(20))
> 
> 返回 varchar(255)
> 
> 开始
> 
> 声明路径名 varchar(255);
> 声明 tmp_name varchar(255);
> 声明 tmp_parentid INT；
> 声明 tmp_parentid1 INT；
> 
> SELECT p.productcategoryid INTO tmp_parentid from products p where (isnull(p.endeffdt) or (p.endeffdt = '0000-00-00') or (p.endeffdt > now())) and p.code=itemid;
> 
> 我的循环：循环
> 
> > 选择名称，parentid INTO tmp_name，tmp_parentid1 FROM productcategory WHERE recid = tmp_parentid;
> > SET path_name = concat_ws('>', tmp_name,path_name);
> > 如果 tmp_parentid1!=0 那么
> > 设置 tmp_parentid = tmp_parentid1;
> > 迭代 myloop；
> > 否则
> > 离开我的循环；
> > 万一;
> > 结束循环；
> 
> 返回路径名；
> 
> 结尾;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:04:00.283

```
DROP FUNCTION IF EXISTS mydb.getpath;

CREATE FUNCTION mydb.getpath (itemid VARCHAR(20))

RETURNS varchar(255) 

BEGIN

DECLARE path_name varchar(255);
DECLARE tmp_name varchar(255);
DECLARE tmp_parentid INT;
DECLARE tmp_parentid1 INT;

SELECT p.productcategoryid INTO tmp_parentid from products p where (isnull(p.endeffdt) or (p.endeffdt = '0000-00-00') or (p.endeffdt > now())) and p.code=itemid;

myloop:LOOP

SELECT name,parentid INTO tmp_name,tmp_parentid1 FROM productcategory WHERE recid = tmp_parentid;
SET path_name = concat_ws(' > ', tmp_name,path_name);
IF tmp_parentid1!=0 THEN
SET tmp_parentid = tmp_parentid1;
ITERATE myloop;
ELSE
LEAVE myloop;
END IF; 
END LOOP;

RETURN path_name;

END; 
```

# php - 如何添加类别-作者-成员区域以在我的网站上发表评论？

> ID：15204190
> 
> 赞同：-2
> 
> 时间：2013-03-04T14:45:27.323
> 
> 标签：php, html, css, posts

我使用 HTML 和 CSS 在 Dreamweaver 上设计了自己的模板。我不太了解php，我认为它是我需要的。但我仍然想知道如何制作具有类似想法的东西，例如[http://howtogeek.com](http://howtogeek.com) 我的意思是帖子和评论以及作者的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:50:07.667

为什么不尝试类似[http://disqus.com/](http://disqus.com/)

它根本不需要您进行任何编程，并允许用户在那里分享对您的内容的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:08:06.337

您需要了解这项工作的关系数据库。你可以学习mysql，它是关系数据库的查询语言。[如果您是认真的，请访问http://www.amazon.com/Database-System-Concepts-Abraham-Silberschatz/dp/0073523321](https://rads.stackoverflow.com/amzn/click/com/0073523321)阅读本书。但是你需要学习 PHP 来处理你的数据库模式。为了快速入门，您应该访问[http://w3schools.com](http://w3schools.com)

# c# - 在 C# 中同时运行相同方法的多个实例而不会丢失数据？

> ID：15204198
> 
> 赞同：1
> 
> 时间：2013-03-04T14:45:56.527
> 
> 标签：c#, task-parallel-library, task, taskfactory

我真的不太了解任务和线程。我在三个嵌套级别中有一个方法`for`，我想在不同的线程/任务中多次运行，但是我传递给该方法的变量发疯了，让我用一些代码解释一下：

```
List<int> numbers=new List<int>();
for(int a=0;a<=70;a++)
{
  for(int b=0;b<=6;b++)
  {
    for(int c=0;b<=10;c++)
    {
        Task.Factory.StartNew(()=>MyMethod(numbers,a,b,c));
    }
  }
}
private static bool MyMethod(List<int> nums,int a,int b,int c)
{
    //Really a lot of stuff here
} 
```

这是巢，`myMethod`真的做了很多事情，比如计算一些数字的阶乘，写入不同的文档，用组合列表匹配响应以及调用其他小方法，它也有一些返回值（布尔值），但我暂时不用管他们。问题是没有任务结束，就像每次嵌套调用它自己刷新的方法一样，删除以前的实例。它还会给出一个错误，“尝试除以 0”，例如，值超过由 FOR 分隔的值，`a=71, b=7, c=11`并且所有变量都为空（这就是除以零的原因）。我真的不知道如何解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:58:39.830

问题是，您使用的变量已经或将在您的[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)/lambda 之外进行修改。你应该得到一个警告，说“访问修改后的闭包”。

您可以通过首先将循环变量放入本地变量并使用它们来修复它：

```
namespace ConsoleApplication9
{
  using System.Collections.Generic;
  using System.Threading.Tasks;

  class Program
  {
    static void Main()
    {
      var numbers = new List<int>();

      for(int a=0;a<=70;a++)
      {
        for(int b=0;b<=6;b++)
        {
          for(int c=0;c<=10;c++)
          {
            var unmodifiedA = a;
            var unmodifiedB = b;
            var unmodifiedC = c;

            Task.Factory.StartNew(() => MyMethod(numbers, unmodifiedA, unmodifiedB, unmodifiedC));
          }
        }
      }
    }

    private static void MyMethod(List<int> nums, int a, int b, int c)
    {
      //Really a lot of stuffs here
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T14:58:30.670

检查你的`for`陈述。`b`并且`c`永远不会增加。

然后，您[对循环变量进行了关闭，](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)这可能是其他问题的原因。

[在 C# 的循环中捕获的变量](https://stackoverflow.com/questions/271440/c-sharp-captured-variable-in-loop)

[为什么在 lambda 表达式中使用迭代变量不好](https://stackoverflow.com/questions/227820/why-is-it-bad-to-use-an-iteration-variable-in-a-lambda-expression)

# mongodb - 用于每日备份的 Mongodump

> ID：15204205
> 
> 赞同：4
> 
> 时间：2013-03-04T14:46:03.840
> 
> 标签：mongodb, mongodump

我正在考虑使用 mongodump 进行日常备份。

如果我总是在同一个目录上执行转储：在运行 mongodump 之前，我是否必须确保清除前一天的内容？我在文档中找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:52:31.933

不，mongodump 将覆盖目录中的任何内容，因此您可以安全地使用相同的内容。

# c# - windows 8 移动自定义身份验证

> ID：15204208
> 
> 赞同：0
> 
> 时间：2013-03-04T14:46:05.880
> 
> 标签：c#, authentication, push-notification, windows-phone-8, mpns

我们刚刚开始考虑在我们的网站之外添加一个 Windows 8 Mobile 应用程序，并且该应用程序需要仅限于经过身份验证的用户。查看文档，它讨论了与 Google、Facebook、Twitter 和 Microsoft 的身份验证，但我们有自己的身份验证，在我们希望使用的网站上使用，可能通过应用程序的 Web 服务公开。

我们还希望向绑定到网站上经过身份验证的帐户的用户发送推送通知。

我的问题是我们可以为 Windows 8 手机实现自定义身份验证并向那些经过身份验证的用户发送推送通知吗？如果是这样的话，任何人都可以建议一个好的资源，因为经过大量搜索后，我找不到任何如何实现这一目标的例子。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:55:37.903

是的你可以。这是这个问题最好的答案，因为这不是这个论坛的真正问题。

以应用程序为例，看看 Chase 应用程序在 iPhone 上的工作方式，我相信其他平台上还有很多其他银行应用程序可以将通知推送给经过身份验证的用户，让您了解可以做什么

# android - Android 4.2.2 上的 glTexImage2D 比 4.2.0 慢得多

> ID：15204210
> 
> 赞同：2
> 
> 时间：2013-03-04T14:46:10.130
> 
> 标签：android, opengl-es, android-4.2-jelly-bean, glteximage2d

我们最近将我们的 Android 设备从 4.2.0 升级到 4.2.2 才意识到现在一切都在疯狂地结结巴巴。

在 Android 4.2.0 或更低版本上，此调用大约需要***15 毫秒***。

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, width, height, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, buffer.position(position)); 
```

在 Android 4.2.2 上，相同的调用需要***100 - 195 ms***之间。到底发生了什么变化会导致这种情况？我们是跨多个设备进行测试的多个开发人员，并且都得到了这一点。我在更改日志中看不到任何会影响这一点的内容。我不知道如何从这里前进。

请注意，上述调用中的缓冲区是从 MediaCodec 返回的 ByteBuffer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:07:24.523

根据错误数据库，这是一个错误

[https://code.google.com/p/android/issues/detail?id=53135&q=nexus%2010&sort=-id&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](https://code.google.com/p/android/issues/detail?id=53135&q=nexus%2010&sort=-id&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

# drop-down-menu - SSRS 参数默认视图

> ID：15204216
> 
> 赞同：0
> 
> 时间：2013-03-04T14:46:30.537
> 
> 标签：drop-down-menu, reporting-services, parameters, report

当我必须从下拉框中选择参数值时，它默认显示“选择一个值”。但是我在这个下拉框中有“年”。我可以以某种方式将“选择一个值”重命名为“选择一年”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:54:14.337

在 SSRS 加载设计视图中，在您有文件夹结构的左侧展开参数。你应该在那里看到你的年参数。

右键单击它-> 属性。

在一般部分，有一个用于提示的文本字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:51:01.773

1.  在您的“可用值”中添加一个带有“选择年份”标签的选项和一个虚拟值。

2.  然后在“默认值”中指定您在步骤 1 中指定的值。

现在，当报告加载时，它应该加载填充“选择年份”。

# angularjs - Angular $resource 自定义方法

> ID：15204221
> 
> 赞同：5
> 
> 时间：2013-03-04T14:46:46.463
> 
> 标签：angularjs

我已经按照示例进行了操作，但是在将自定义方法添加到资源的原型时显然出现了问题。

```
app.factory('Product',function ($resource,$cacheFactory) {
        var Product = $resource('/the/url/:id', {id: '@id'}),
            cache = $cacheFactory('Product'),
            products;
        Product.prototype.all = function(){
            products = cache.get('all');
            if(typeof products == 'undefined'){
                products = Product.query();
                cache.put('all',products);
            }
            return products;
        };
        return Product;
    }) 
```

在控制器中我做了，`$scope.products = Product.all();`但我得到了

```
TypeError: Object function Resource(value) {
    copy(value || {}, this);
} has no method 'all' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T15:18:41.603

`Product.prototype.all`定义一个实例方法。

您应该将其定义为静态方法`Product.all = function(){...]`。

只有这样你才能调用它`$scope.products = Product.all();`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T15:07:48.980

我认为这是因为您实际上还没有实例。你需要这样做：

```
$scope.products = new Product();
// now you can run the all function
$scope.products.all() 
```

您的另一个选择是在服务级别定义 all() 方法。除了添加到仅在 new Product() 之后可用的原型之外，您可以修改如下：

```
app.factory('Product',function ($resource,$cacheFactory) {
    var Product = $resource('/the/url/:id', {id: '@id'}),
        cache = $cacheFactory('Product'),
        products;
    Product.all = function(){
        products = cache.get('all');
        if(typeof products == 'undefined'){
            products = Product.query();
            cache.put('all',products);
        }
        return products;
    };
    Product.prototype.$all = function () {
        Product.all.call(this);
    }
    return Product;
}) 
```

这样，您将在资源上拥有 Product.all()，在实例上拥有 product.$all()。

# python - 将 BeautifulSoup 拆分为 2 个汤树

> ID：15204225
> 
> 赞同：1
> 
> 时间：2013-03-04T14:47:00.217
> 
> 标签：python, html, beautifulsoup

有多种方法可以拆分 beautifulSoup 分析树，获取元素列表或获取标签字符串。但是似乎没有办法在拆分树时保持树的完整性。

我想在`<br />`'s 上拆分以下片段（汤）。字符串很简单，但我想保留结构，我想要一个分析树列表。

```
s="""<p>
foo<br />
<a href="http://...html" target="_blank">foo</a> | bar<br />
<a href="http://...html" target="_blank">foo</a> | bar<br />
<a href="http://...html" target="_blank">foo</a> | bar<br />
<a href="http://...html" target="_blank">foo</a> | bar
</p>"""
soup=BeautifulSoup(s) 
```

显然，我可以做一个`[BeautifulSoup(i) for i in str(soup).split('<br />')]`，但我很丑，而且我有太多的链接。

可以在soup.findAll('br') 上使用soup.next 和soup.previousSibling() 进行迭代，但返回的不是分析树，而是它包含的所有元素。

是否有解决方案从 BeautifulSoup-tag 中提取完整的标签子树，保留所有父级和兄弟级关系？

编辑更清楚：

结果应该是一个由 BeautifulSoup-Objects 组成的列表，我可以通过 output[0].a、output[1].text 等进一步向下遍历拆分的汤。在 s 上拆分汤`<br />`将返回所有链接的列表以进一步处理，这正是我所需要的。上面片段中的所有链接，带有文本、属性和以下“栏”，是每个链接的描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:52:17.977

如果您不介意原始树已更改，我会`.extract()`在`<br />`标签上使用以简单地将它们从树中删除：

```
>>> for br in soup.find_all('br'): br.extract()
... 
<br/>
<br/>
<br/>
<br/>
>>> soup
<html><body><p>
foo
<a href="http://...html" target="_blank">foo</a> | bar
<a href="http://...html" target="_blank">foo</a> | bar
<a href="http://...html" target="_blank">foo</a> | bar
<a href="http://...html" target="_blank">foo</a> | bar
</p></body></html> 
```

这仍然是一个完整的工作树：

```
>>> soup.p
<p>
foo
<a href="http://...html" target="_blank">foo</a> | bar
<a href="http://...html" target="_blank">foo</a> | bar
<a href="http://...html" target="_blank">foo</a> | bar
<a href="http://...html" target="_blank">foo</a> | bar
</p>
>>> soup.p.a
<a href="http://...html" target="_blank">foo</a> 
```

但是您根本不需要删除这些标签来实现您想要的：

```
for link in soup.find_all('a'):
    print link['href'], ''.join(link.stripped_strings), link.next_sibling 
```

结果是：

```
>>> for link in soup.find_all('a'):
...     print link['href'], ''.join(link.stripped_strings), link.next_sibling
... 
http://...html foo  | bar
http://...html foo  | bar
http://...html foo  | bar
http://...html foo  | bar 
```

不管我们是否`<br/>`首先从树中删除了标签。

# algorithm - 两种不同操作的算法运行时间

> ID：15204244
> 
> 赞同：2
> 
> 时间：2013-03-04T14:47:55.303
> 
> 标签：algorithm, big-o

我有一个包含两个操作的算法。第一次操作的运行时间是 O(n)，第二次操作的运行时间是 O(log n)。在这种情况下，完整算法的运行时间是多少？会是 O(n) 还是 O(n) + O(log n) ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T14:50:25.350

`O(n + log(n)) = O(n)`

您的时间复杂度将是 O(n)

[http://en.wikipedia.org/wiki/Big_O_notation](http://en.wikipedia.org/wiki/Big_O_notation)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T14:49:04.850

总时间为`O(n) + O(logn) = O(n)`。所以这是`O(n)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:53:00.387

`O(logn)`与`O(n)`N 呈指数下降有关，所以它是`O(n)`。

# mysql - FOREIGN KEY - 执行表

> ID：15204245
> 
> 赞同：0
> 
> 时间：2013-03-04T14:48:02.670
> 
> 标签：mysql

你知道我在外键哪里有问题吗？

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(  `countryId` bigint(20) NOT NULL AUTO_INCREMENT,  `personId` bigint(20) NOT ' at line 1 
```

带外键的表 1

```
ALTER TABLE `country` (
  `countryId` bigint(20) NOT NULL AUTO_INCREMENT,
  `personId` bigint(20) NOT NULL,
  `Name` varchar(5000) DEFAULT NULL,
  PRIMARY KEY (`countryId`),
  UNIQUE KEY `personId` (`personId`),
  CONSTRAINT fk_PerOrders FOREIGN KEY (`personId`) REFERENCES perosn(`PersonId`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 PACK_KEYS=0; 
```

表2

```
CREATE TABLE `perosn` (
  `PersonId` bigint(20) NOT NULL AUTO_INCREMENT,
  `Name` varchar(5000) DEFAULT NULL,
  `Surname` varchar(5000) NOT NULL,
  PRIMARY KEY (`PersonId`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 PACK_KEYS=0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:50:12.033

```
ALTER TABLE `country` (
^^^^^--- should be CREATE

CREATE TABLE `perosn` (
              ^^^^^^--- should be person 
```

# c++ - lineEdit的显示混乱 - Qt

> ID：15204255
> 
> 赞同：1
> 
> 时间：2013-03-04T14:48:37.590
> 
> 标签：c++, visual-studio-2010, qt, opencv

我有两个整数，我已将它们转换为字符串，以再次将它们转换为 QString（qW 和 qH）。

它们的 int 值分别为 970 和 938

我想使用我想到的以下代码显示它们的值：

```
lineEdit_mat->setText(qW + " " + qH); 
```

但是在创建的界面中，显示的结果是：970 970938

我尝试了很多组合，但无法显示：970 938

整个代码：

```
int width=img_crop_mat->width ;
int height=img_crop_mat->height ;
ostringstream convert;
string W, H;
convert << width ;
W=convert.str();
convert << height;
H=convert.str();
QString qH = QString::fromStdString(H);
QString qW= QString::fromStdString(W); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:01:02.193

我的猜测是您将 qW 连接到 qH 上，如果没有看到代码就无法确认这一点，所以请发布更多代码以供参考，但这几行应该可以工作

```
QString qH = QString::number(height);
QString qW = QString::number(width);
lineEdit_mat->setText(qW + " " + qH); 
```

高度和宽度是您的整数值。如果这不起作用，请发布您的代码。我没有对此进行测试，但我看不出它为什么不起作用。

编辑：刚刚看到我发布的代码，尝试我的方式，在我看来更容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:01:51.907

你也可以写：

```
lineEdit_mat->setText( QString("%1 %2").arg(width).arg(height) ); 
```

# c# - 如何在 Web API 中实现 HttpMessageHandler？

> ID：15204257
> 
> 赞同：18
> 
> 时间：2013-03-04T14:48:38.480
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, asp.net-4.5

在 ASP.NET 4.5 MVC 4 Web API 项目中，我想添加一个自定义的`HttpMessageHandler`. 我更改了`WebApiConfig`类（在 \App_Satrt\WebApiConfig.cs 中），如下所示：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional },
            constraints: null,
            handler: new MyCustomizedHttpMessageHandler()
        );
    }
} 
```

然后我开发了`MyCustomizedHttpMessageHandler`：

```
public class MyCustomizedHttpMessageHandler : HttpMessageHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        IPrincipal principal = new GenericPrincipal(
            new GenericIdentity("myuser"), new string[] { "myrole" });
        Thread.CurrentPrincipal = principal;
        HttpContext.Current.User = principal;

        return Task<HttpResponseMessage>.Factory.StartNew(() => request.CreateResponse());
    }
} 
```

但是，对 API 的请求（比如说 [http://mylocalhost.com/api/values](http://mylocalhost.com/api/values)）总是返回状态码 200，没有任何数据。我的意思是它永远不会到达 ValuesController.cs 的 'GET()' 方法。

我错过了什么？我怎样才能`HttpMessageHandler`正确实施？

PS：已经读过这个：[https](https://stackoverflow.com/a/12030785/538387) ://stackoverflow.com/a/12030785/538387 ，对我没有帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-04T17:25:36.693

在这里，您正在创建一个`HttpMessageHandler`哪些短路请求并且不让请求通过管道的其余部分。相反，您应该创建一个`DelegatingHandler`.

Web API 中还有 2 种消息处理程序管道。一种是常规管道，其中所有路由的所有请求都通过，另一种可能具有特定于某些路由的消息处理程序。

1.  尝试创建一个`DelegatingHandler`并将其添加到您`HttpConfiguration`的消息处理程序列表中：

    ```
    config.MessageHandlers.Add(new HandlerA()) 
    ```

2.  如果要添加特定于路由的消息处理程序，则可以执行以下操作：

    ```
    config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional },
                constraints: null,
                handler: 
                       HttpClientFactory.CreatePipeline(
                              new HttpControllerDispatcher(config), 
                              new DelegatingHandler[]{new HandlerA()})
                ); 
    ```

[此 Web Api 海报](http://www.asp.net/media/4071077/aspnet-web-api-poster.pdf)显示了管道流程。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-04T15:02:19.693

要编写自定义消息处理程序，您应该从`System.Net.Http.DelegatingHandler`

```
class CustomMessageHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> 
      SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        IPrincipal principal = new GenericPrincipal(
            new GenericIdentity("myuser"), new string[] { "myrole" });
        Thread.CurrentPrincipal = principal;
        HttpContext.Current.User = principal;

        return base.SendAsync(request, cancellationToken);
    }
} 
```

并调用`base.SendAsync`将请求发送到内部处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-20T12:59:25.093

我使用@cuongle 回答来解决我的问题。只需添加一个。所以我没有得到“**尚未分配内部处理程序。** ”。谢谢@coungle。

```
public class CustomMessageHandler : DelegatingHandler
{
        public CustomMessageHandler ()
        {
              //add this to solve "The inner handler has not been assigned"
               InnerHandler = new HttpClientHandler();
        }

        protected override async Task<HttpResponseMessage> 
          SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
        {
            // Before request 
            IPrincipal principal = new GenericPrincipal(
                new GenericIdentity("myuser"), new string[] { "myrole" });
            Thread.CurrentPrincipal = principal;
            HttpContext.Current.User = principal;

            var result = await base.SendAsync(request, cancellationToken);

            // After request when response arrives

            return result;
        }
} 
```

# mysql - MySQL - 加入相关表的最后一行

> ID：15204259
> 
> 赞同：3
> 
> 时间：2013-03-04T14:48:41.440
> 
> 标签：mysql, sql

我有一个问题，我已经搜索过，但找不到可以提供任何帮助的答案。

有 3 个表：`orders`、`customers`和`teams`。每个订单都有一个客户和一个团队。我的问题是，对于每个客户，我都试图获得他们的总订单，然后**是分配给他们最后一个订单的团队。**

到目前为止我的查询（工作正常）：

```
SELECT c.id, MAX(o.timestamp) AS "Last Order", COUNT(o.id) AS "Total Orders", SUM(o.price) AS "Total Spend"
FROM orders o
LEFT JOIN customers c ON o.customer = c.id
WHERE o.timestamp > '2012-01-01 00:00:00'
GROUP BY c.id
ORDER BY c.id 
```

我不知道如何在`team.name`不影响我所拥有的其余查询的情况下加入他们下的最后一个订单。

**示例表和所需结果：**

顾客：

```
╔════╦═════════════╗
║ ID ║    NAME     ║
╠════╬═════════════╣
║  1 ║ John Smith  ║
║  2 ║ Jim Jimmers ║
╚════╩═════════════╝ 
```

团队：

```
╔════╦═════════════╗
║ ID ║    NAME     ║
╠════╬═════════════╣
║  1 ║ Red         ║
║  2 ║ Blue        ║
╚════╩═════════════╝ 
```

订单：

```
╔═══════╦═════════════════════╦══════════╦══════╦═══════╗
║  ID   ║       TIMESTAMP     ║ CUSTOMER ║ TEAM ║ VALUE ║
╠═══════╬═════════════════════╬══════════╬══════╬═══════╣
║ 34656 ║ 2012-03-04 14:23:44 ║        1 ║    2 ║    20 ║
║ 37345 ║ 2012-04-12 11:32:07 ║        2 ║    2 ║    25 ║
║ 38220 ║ 2012-07-18 09:53:54 ║        1 ║    2 ║    15 ║
║ 39496 ║ 2012-07-03 10:11:32 ║        1 ║    1 ║    38 ║
║ 41752 ║ 2012-09-17 19:34:05 ║        1 ║    2 ║     9 ║
║ 43734 ║ 2012-11-23 07:52:12 ║        2 ║    1 ║    20 ║
╚═══════╩═════════════════════╩══════════╩══════╩═══════╝ 
```

如何选择如下结果：

```
╔════╦═════════════╦═════════════════════╦═══════════╦══════════════╦═════════════╗
║ ID ║    NAME     ║      LAST_ORDER     ║ TEAM_NAME ║ TOTAL_ORDERS ║ TOTAL_SPEND ║
╠════╬═════════════╬═════════════════════╬═══════════╬══════════════╬═════════════╣
║  1 ║ John Smith  ║ 2012-09-17 19:34:05 ║ Blue      ║           4  ║          82 ║
║  2 ║ Jim Jimmers ║ 2012-11-23 07:52:12 ║ Red       ║           2  ║          45 ║
╚════╩═════════════╩═════════════════════╩═══════════╩══════════════╩═════════════╝ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:36:56.537

您可以使用与此类似的查询：

```
select c.id,
  c.name,
  o1.Last_Order,
  t.name Team_Name,
  o3.Total_Orders,
  o3.Total_Spend
from customers c
inner join
(
  select max(timestamp) Last_Order,
    max(id) Last_id,
    customer
  from orders
  WHERE timestamp > '2012-01-01 00:00:00'
  group by customer
) o1
  on c.id = o1.customer
inner join orders o2
  on c.id = o2.customer
  and o1.Last_Order = o2.timestamp
  and o1.Last_id = o2.id
inner join teams t
  on o2.team = t.id
inner join
(
  select count(team) Total_Orders,
    sum(value) Total_Spend,
    customer
  from orders 
  WHERE timestamp > '2012-01-01 00:00:00'
  group by customer
) o3
  on c.id = o3.customer
WHERE o2.timestamp > '2012-01-01 00:00:00' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8258a/13)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:53:33.157

`group_concat`我喜欢用一个技巧来做到这一点：

```
SELECT c.id, MAX(o.timestamp) AS "Last, Order", COUNT(o.id) AS "Total Orders",
       SUM(o.price) AS "Total Spend",
       substring_index(group_concat(teamname order by o.timestamp desc), ',', 1) as LastTeam
FROM orders o left outer join
     customers c ON o.customer = c.id left outer join
     teams t
     on o.teamid = t.id
WHERE o.timestamp > '2012-01-01 00:00:00'
GROUP BY c.id
ORDER BY c.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:26:38.897

试试这个，

```
SELECT  a.ID, 
        a.Name Customer_Name,
        c.TimeStamp Last_ORDER,
        c.Name AS Team_Name,
        COUNT(b.Customer) AS Total_Order,
        SUM(b.Value) AS Total_Spend
FROM    Customers a
        INNER JOIN Orders b
            ON a.ID = b.Customer
        INNER JOIN
        (
            SELECT  o.Customer, 
                    o.TimeStamp,
                    q.Name
            FROM    Orders o
                    INNER JOIN
                    (
                        SELECT  Customer, MAX(ID) max_ID
                        FROM    Orders
                        GROUP   BY Customer
                    ) p ON o.Customer = p.Customer AND
                            o.ID = p.max_ID
                    INNER JOIN Team q
                        ON o.Team = q.ID
        ) c ON a.ID = c.Customer
GROUP   BY a.ID, a.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/8e87b/4)
*   [SQLFiddle Demo（*带日期条件*）](http://www.sqlfiddle.com/#!2/8e87b/8)
*   [SQLFiddle 演示（*日期之间*）](http://www.sqlfiddle.com/#!2/8e87b/9)

# c++ - BMP 文件格式无法正确读取？

> ID：15204265
> 
> 赞同：2
> 
> 时间：2013-03-04T14:49:07.437
> 
> 标签：c++, bitmap, bmp

**嘿伙计！**

我得到了这个[image.bmp](http://dl.dropbox.com/u/39438681/Bilder/StackOverflow/test6.bmp "图片")。当我阅读它并包含所有填充时，我得到[了这个](http://dl.dropbox.com/u/39438681/Bilder/StackOverflow/scrndmp.PNG "结果")结果。

除了颠倒阅读图像之外，我在这里做错了什么？我在维基百科或谷歌搜索中找不到任何相关的东西。似乎在 24 像素宽度之后，图像被镜像为 8 像素。为什么！？没看懂！？我怎样才能解决这个问题！？

我正在使用 Windows 上的一些 C++ 代码读取文件，读取原始 BMP 文件。图像文件是单色的。每像素 1 位。

显示位图数据的代码：

```
unsigned int count = 0; // Bit counting variable
unsigned char *bitmap_data = new char[size]; // Array containing the raw data of the image

for(unsigned int i=0; i<size; i++){ // This for-loop goes through every byte of the bitmap_data

    for(int j=1; j<256; j*=2){ // This gives j 1, 2, 4, 8, 16, 32, 64 and 128\. Used to go through every bit in the bitmap_data byte

        if(count >= width){ // Checking if the row is ended
            cout << "\n"; // Line feed

            while(count > 32) count -=32; // For padding.
            if(count < 24) i++;
            if(count < 16) i++;
            if(count < 8) i++;

            count = 0; // resetting bit count and break out to next row
            break;
        }

        if(i>=size) break; // Just in case

        count++; // Increment the bitcounter. Need to be after end of row check

        if(bitmap_data[i] & j){ // Compare bits
            cout << (char)0xDB; // Block
        }else{
            cout << (char)' ';  // Space
        }
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:58:16.427

您几乎可以肯定在每个字节中以错误的顺序解释/输出位。这导致每列 8 个像素从左到右翻转。

BMP 格式规定最左边的像素是*最*重要的位，最右边的像素是最*不重要*的。在您的代码中，您正在以错误的方式遍历这些位。

# java - 通过 SSL 使用 REST 获取 json

> ID：15204266
> 
> 赞同：0
> 
> 时间：2013-03-04T14:49:09.883
> 
> 标签：java, android, curl

要使用 php 连接到服务器，我只需像这样使用 cUrl

```
 curl_setopt_array($ch, array(
        CURLOPT_SSL_VERIFYPEER  => false,
        CURLOPT_SSL_VERIFYHOST  => false,
        CURLOPT_RETURNTRANSFER  => true,
        CURLOPT_TIMEOUT         => 320,
        CURLOPT_CONNECTTIMEOUT  => 320,
        CURLOPT_HTTPHEADER      => array('Content-Type: application/json', "Authorization: aaa:bbb", 'X_FORWARDED_FOR: ' . $_SERVER["REMOTE_ADDR"])
)); 
```

但我必须在 Android 中完成。目前我正在使用 HttpsURLConnection，但我收到身份验证错误 400。我做错了什么？这是一个代码片段：

```
conn = (HttpsURLConnection) url.openConnection();

        conn.setRequestMethod("GET");

        conn.addRequestProperty("Content-Type: ", "application/json");
        conn.addRequestProperty("Authorization: ", "aaa:bbb");
        conn.addRequestProperty("X_FORWARDED_FOR: ", getLocalIpAddress().toString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:37:14.250

我设法`HttpGet()`像这样连接

```
 HttpClient conn = new DefaultHttpClient();
    HttpGet getter = new HttpGet(link + 
            appendix);
    Log.d("Request", link+appendix);
    getter.addHeader("Content-Type ", "application/json");
    getter.addHeader("Authorization ", "xxx:yyy");
    getter.addHeader("X_FORWARDED_FOR ", "0.0.0.0"); 
```

# php - php无法恢复备份sql

> ID：15204268
> 
> 赞同：0
> 
> 时间：2013-03-04T14:49:15.040
> 
> 标签：php, mysql

我正在用 php 创建一个恢复数据库脚本，但它不起作用。这是到目前为止的代码

```
<form action = '' method = 'POST'>
            <h2>Restore</h2>
            <table>
            <tr><td><input type=file name="file"></td></tr>
            <tr><td><input type = 'submit' name = "restore" value="restore"></tr></td>
            </table>
        </form>

        <?php
        $host = 'localhost';
        $user = 'root';
        $pass = ' ';
        $dbname = 'itravel';
        //date_default_timezone_set('Asia/Kuala_Lumpur'); 
        //$currentdate = date('YmdGis');
        $restore_name = $_POST['file'];
        $custompath = $_POST['path'];

        if(isset($_POST['restore']))
        {
                $restore = "c:/xampp/mysql/bin/mysql -h $host -u $user $dbname < $backup_name";
                system($restore);

        }
        ?> 
```

单击恢复按钮后没有任何反应。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:51:56.277

```
$restore = "c:/xampp/mysql/bin/mysql -h $host -u $user $dbname < $backup_name";
                                                                  ^^^^^^^^^^^ 
```

你无处定义`$backup_name`。不应该`$restore_name`吗？

上传也不会出现在`$_POST`. 他们通过`$_FILES`.

你也不应该假设上传成功。特别是对于 mysql 转储文件。上传可能被截断，但您盲目地将文件反馈回 MySQL，这可能会给您留下部分/完全废弃的数据库。

**始终**检查上传错误：

```
if ($_FILES['files']['error'] !== UPLOAD_ERR_OK) {
    die("Upload failed with error " . $_FILES['files']['error']);
}

$restore_name = $_FILES['files']['tmp_name']; // temp file PHP stores upload in 
```

# java - 尽管有 mkdirs() 和 createNewFile()，FileOutputStream 上的 FileNotFoundException

> ID：15204271
> 
> 赞同：1
> 
> 时间：2013-03-04T14:49:21.750
> 
> 标签：java, file

我有一个从 SMTP 服务器下载电子邮件的 bean。阅读电子邮件后，它会将附件保存在服务器上。要阅读附件，我使用以下代码：

```
File f = new File("\\attachments\\" + attachment.getFileName());
f.mkdirs();
f.createNewFile();
FileOutputStream fos = new FileOutputStream(f);
fos.write(bytes);
fos.close(); 
```

我在创建 FileOutputStream 时遇到了 FileNotFoundException，但我不明白为什么。如果可以提供帮助，我将 NetBeans 与 GlassFish 一起使用，并且测试是在本地机器上调试的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:55:00.437

当你这样做

```
f.mkdirs(); 
```

您正在使用您的文件名创建一个目录（也就是说，您不仅创建目录“附件”，还创建一个带有附件文件名的子目录）。然后

```
f.createNewFile(); 
```

由于文件已经存在（以您刚刚创建的目录的形式），因此不执行任何操作。它返回 false 告诉您该文件已经存在。

然后这失败了：

```
FileOutputStream fos = new FileOutputStream(f); 
```

您正在尝试在目录上打开输出流。系统不允许你在目录中写入，所以它失败了。

底线是：

*   `mkdirs()`不做你认为它做的事。
*   您应该检查调用的返回值`createNewFile()`。

使其工作的最简单方法是将您的行替换为：

```
f.getParentFile().mkdirs(); 
```

# windows-phone-7 - openreadAsync vs Bitmap 用于从服务器下载图像

> ID：15204272
> 
> 赞同：1
> 
> 时间：2013-03-04T14:49:25.227
> 
> 标签：windows-phone-7, windows-phone-8

我有一些图像 url，我想在本地缓存并保存，这样我就不需要根据需要一次又一次地发出 Web 请求。

现在，我很困惑第一次使用 webclient 的 openreadasync 方法而不是位图来获取图像并将其保存到独立存储中是否有任何显着的好处。

对我来说，我认为位图会是一个更好的选择，因为我将能够获得进展的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:30:19.983

这篇文章提供了有关各种图像缓存选项的良好信息。

[http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx](http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx)

Matt 提到默认图像缓存仅适用于每个会话的事实。因此，如果您正在实现自己的图像缓存，那么您将必须实现一个图像下载器，WebClient OpenReadAsync 为其提供了一种在本地存储文件的方法

如果您不考虑本地缓存，那么 UriSource 将是您的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:01:05.530

If you want to cache images beyond the current application instance lifetime, have a look at [http://blogs.msdn.com/b/delay/archive/2010/10/04/there-s-no-substitute-for-customer-feedback-improving-windows-phone-7-application-performance-now-a-bit-easier-with-lowprofileimageloader-and-deferredloadlistbox-updates.aspx](http://blogs.msdn.com/b/delay/archive/2010/10/04/there-s-no-substitute-for-customer-feedback-improving-windows-phone-7-application-performance-now-a-bit-easier-with-lowprofileimageloader-and-deferredloadlistbox-updates.aspx) which will show a way of saving the images to `IsolatedStorage` and then display it from there. This means you won't have to get it over the network each time the app is run.

If you're using this for lots of images be sure to manage the images you save as well so you don't fill up the disk with lots of old images you'll never need again.

# google-app-engine - 确定 Google 应用引擎运行缓慢的原因

> ID：15204274
> 
> 赞同：13
> 
> 时间：2013-03-04T14:49:34.447
> 
> 标签：google-app-engine, playframework

我为使用 Play 框架 1.x 并在 GAE 上运行的客户端开发了一个应用程序。该应用程序运行良好，但有时速度非常慢。加载简单页面大约需要 30 秒，但有时运行速度更快 - 没有任何代码更改。

有什么方法可以确定为什么它运行缓慢？我尝试联系支持人员，但找不到任何电话号码或电子邮件。官方谷歌群组也没有回应。

你会如何处理这个问题？目前我的客户因为加载时间慢而非常生气，但目前是最后的选择。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T18:31:55.540

使用[GAE Appstats](https://developers.google.com/appengine/docs/java/tools/appstats)来分析您的远程过程调用。所有的 RPC 都很慢（Google Cloud Storage，Google Cloud SQL，...），所以如果你可以减少 RPC 的数量或者可以使用一些缓存数据结构，使用它们 -> 你的应用程序会更快。但是您可以通过 appstats 查看哪些部分速度较慢以及是否需要注意 :)。

例如，我为我的应用程序创建了一个 Google Cloud Storage 缓存，并将执行时间从 2 分钟减少到 30 秒以下。RPC 是 GAE 中的一个瓶颈。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-03T19:44:52.183

Google 通常不会为很多服务提供联系支持。所描述的关于谷歌应用引擎缓慢的问题可能是由冷启动引起的。Google 应用引擎前端实例在大约 15 分钟后休眠。您可以编写一个 cron 作业以每 14 分钟 ping 一次实例以保持节点正常运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-16T07:06:21.167

结合一些答案并添加一些要检查的内容：

1.  使用应用统计信息进行调试。寻找“阶梯式”情况和 RPC 调用。也许您的应用程序中的某些东西在您的逻辑中不会一直发生的某些点触发 RPC 调用。

2.  调整您的实例设置。添加一些永久/常驻实例，看看是否有所作为。如果您正在启动新实例，那么事情会很慢，可能在您描述的时间范围内（30 秒或更长时间）。它看起来很随机。这不仅仅是有多少实例，而是您使用的滑块的组合（您实际上可能会因为太少/太多而伤害自己）。

3.  查看您的应用程序本身。您是否在 JVM 中进行大量内存分配？分配/释放内存本质上是一个缓慢的操作，并且可能导致冻结。您确定您的冻结不是 JVM 问题吗？尝试在本地复制问题并调整 JVM xmx 和 xms 设置，看看是否发现类似的行为。还要在本地分析您的应用程序的内存/性能问题。您可以使用池、DI 容器等来减少分配。

4.  您是否在前端服务器上运行任何类型的 cron 作业/处理？尝试尽可能多地转移到后台任务，例如发送电子邮件。间隔可能看起来是随机的，但它可能是根据您的工作设置发生的事情的结果。每天上午 9 点可能并不代表您的想法，具体取决于 cron/task 选项。一个必然结果 - 将事物移动到后端服务器并拉取队列。

如果没有更多信息，很难给你一个好的答案。这里的人能做的最好的事情就是给你一个起点，这里几乎每个答案都已经有了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T18:17:32.450

通过使至少一个实例永久化，您在第一次使用时会得到很大的改进。大约需要 15 秒。在实例中加载应用程序，这就是为什么在一段时间内没有人使用应用程序时您会遇到很长的请求时间

# applescript - AppleScript：获取 plist 文件中指定键的所有值

> ID：15204275
> 
> 赞同：1
> 
> 时间：2013-03-04T14:49:47.070
> 
> 标签：applescript, plist

我正在寻找一种方法来获取 plist 文件中指定键的所有值。确实，我想浏览 plist 文件，每次读取指定的键时，我都会将值放入一个数组中。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:43:50.193

我不确定我是否完全理解您，但这里有一个示例，说明如何从 windowserver 首选项中读取所有 IODisplayLocation 值并创建一个 applescript 数组。

```
set oldDelimiters to AppleScript's text item delimiters
set AppleScript's text item delimiters to ";"
set theItems to (do shell script "defaults read /Library/Preferences/com.apple.windowserver | grep IODisplayLocation | awk '{print $3}'")
set itemList to (every text item of theItems) as list
set AppleScript's text item delimiters to oldDelimiters
display dialog item 4 of itemList 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T02:19:58.563

您可以尝试使用 sed 访问这些值。假设：

![在此处输入图像描述](../Images/ccb4f8d7c9db9e5f45c7944851d81329.png)

```
set keyValues to paragraphs of (do shell script "sed -En '/CFBundleIconFile/ {
n
s/.*>([^<]+).*/\\1/
p
}' < " & quoted form of "/Users/John/Desktop/Info.plist") 
```

# multithreading - lua 命令行是否支持线程？

> ID：15204277
> 
> 赞同：5
> 
> 时间：2013-03-04T14:49:48.193
> 
> 标签：multithreading, lua

有没有办法在默认的 lua 命令行实用程序中创建线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:53:00.343

不，Lua 的“库存”版本根本不支持线程。您可以使用您的操作系统分支来生成更多脚本，或者坚持使用协程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T16:06:40.927

正如 Bartek 所说，Lua 中不支持线程，但您可以通过 Lua Lanes 库向 CLI 添加线程支持（请参阅[http://www.luteus.biz/Download/LoriotPro_Doc/LUA/LUA_For_Windows/lanes/ index.html](http://www.luteus.biz/Download/LoriotPro_Doc/LUA/LUA_For_Windows/lanes/index.html) / [https://github.com/LuaLanes](https://github.com/LuaLanes) )

# android - 如何设置上午/下午？

> ID：15204282
> 
> 赞同：0
> 
> 时间：2013-03-04T14:50:02.690
> 
> 标签：android, datepicker

我正在为 android 应用程序使用日期选择器插件。我从链接[https://github.com/brodyspark/phonegap-plugins/tree/master/Android/DatePicker](https://github.com/brodyspark/phonegap-plugins/tree/master/Android/DatePicker)获得了一个插件。谁能告诉我如何为时间选择器设置子午线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T17:57:12.160

您必须将[TimePickerDialog 的构造函数](http://developer.android.com/reference/android/app/TimePickerDialog.html#TimePickerDialog%28android.content.Context,%20android.app.TimePickerDialog.OnTimeSetListener,%20int,%20int,%20boolean%29)（名为`is24HourView`）中的最后一个参数从`true`更改为`false`。这是第 101 行：

```
final TimePickerDialog timeDialog = new TimePickerDialog(currentCtx, timeSetListener, mHour,
      mMinutes, true); 
```

应该

```
final TimePickerDialog timeDialog = new TimePickerDialog(currentCtx, timeSetListener, mHour,
      mMinutes, false); 
```

# javascript - 如何获取 Raphael javascript 库的纸画布宽度，它是用相对值定义的？

> ID：15204284
> 
> 赞同：1
> 
> 时间：2013-03-04T14:50:10.760
> 
> 标签：javascript, canvas, size, width, raphael

我正在使用 Raphael SVG 库并定义了一个包含 Raphael 画布的元素

```
<div id="canvas_container"></div> 
```

我把拉斐尔画布/纸放在里面：

```
paper = new Raphael(document.getElementById('canvas_container'), '100%', '100%'); 
```

现在我想获得画布的绝对宽度/高度。我想出了如何使用*paper.canvas*访问画布，但是如果我尝试获取 paper.canvas.width，我会得到一个 SVGAnimatedLength 元素而不是宽度。

我注意到，当使用 Chrome 开发工具并用鼠标在控制台中选择 paper.canvas 时，所选元素会在窗口中显示正确的绝对大小（当在 Chrome 开发中选择某些元素时，页面中会出现蓝色选择安慰）。但是如何在代码中获取它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T16:14:36.723

您可以使用对象的`offsetWidth`和`offsetHeight`值`canvas`来确定 Raphael 画布的真实尺寸。

示例：http: [//jsfiddle.net/g54PR/1/](http://jsfiddle.net/g54PR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-28T19:02:34.220

属性`paper.width`和`paper.hight`将帮助你。

# hadoop - Hadoop集群需求软件/硬件

> ID：15204286
> 
> 赞同：2
> 
> 时间：2013-03-04T14:50:22.100
> 
> 标签：hadoop, hive

嗨，我正在尝试设置 hadoop 环境。简而言之，我试图解决的问题涉及数十亿个大小为几 MB 的 XML 文件，使用 HIVE 从它们中提取相关信息并对这些信息进行一些分析工作。我知道这在 hadoop 世界中是一个微不足道的问题，但是如果 Hadoop 解决方案对我来说效果很好，那么我将要处理的文件的大小和数量将以几何级数形式增加。

我通过参考各种书籍进行研究，例如“Hadoop - 明确指南”、“Hadoop in action”。yahoo 和 hortonworks 的文档等资源。我无法弄清楚建立 hadoop 环境的硬件/软件规范。在我到目前为止提到的资源中，我找到了一些标准的解决方案，比如

1.  Namenode/JobTracker（2 x 1Gb/s 以太网，16 GB RAM，4xCPU，100 GB 磁盘）
2.  Datanode（2 x 1Gb/s 以太网，8 GB RAM，4xCPU，多个磁盘，总量
    超过 500 GB）

但如果有人能提出一些建议，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:39:47.953

首先我建议您考虑：您需要更多处理+一些存储还是相反，并从这个视图中选择硬件。您的案例听起来比存储更多处理。
我会为 hadoop NameNode 指定一些不同的标准硬件
：镜像中的高质量磁盘，16 GB 硬盘。
数据节点：16-24 GB RAM，双四核或双六核 CPU，4 到 6 个 1-2-3 SATA TB 驱动器。

我也会考虑 10 GBit 选项。我认为，如果它不增加集群价格的 15% 以上 - 这是有道理的。15% 来自粗略估计，从映射器到减速器的数据传输需要大约 15% 的工作时间。
在你的情况下，我更愿意牺牲磁盘大小来省钱，而不是 CPU/内存/驱动器数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:44:19.033

“使用 HIVE 从他们那里提取相关信息”这会有点棘手，因为 hive 对 xml 文件的处理并不好。您将希望用另一种语言（ruby、python、perl 等）构建一个解析脚本，该脚本可以解析 xml 文件并生成您将加载到 hive 中的列输出。然后，您可以使用 hive 通过转换调用该外部解析脚本，或者仅使用 hadoopstreaming 为 hive 准备数据。那么这只是您需要多快完成工作以及需要多少空间来保存您将拥有的数据量的问题。

您可以在单个系统上使用少量文件构建流程来测试它。但是您确实需要更好地处理您的整体计划工作负载，以正确扩展您的集群。最小生产集群大小至少为 3 或 4 台机器，仅用于数据冗余。除此之外，还可以根据需要添加节点以满足您的工作负载需求。

# jquery - jQuery 表单验证功能/插件

> ID：15204289
> 
> 赞同：0
> 
> 时间：2013-03-04T14:50:27.527
> 
> 标签：jquery

电子邮件我正在构建一个功能来验证表单，我可以将其用于即将进行的项目。我现在有点卡住了，如果表单的所有输入都是空的，我需要找到一种添加背景红色的方法。至今：

$(文档).ready(函数() {

```
$('label').click(function() {  

    var hasError = false,
        emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,
        form = $('form'),
        radio_check = $('.tick .test'),
        input = $('input:not(.submit)'),
        emailaddressVal = $("#email").val(),
        email = $('#email');

            if(email.val() === ''){
                email.css('background-color', 'red');
            }

            else if(!emailReg.test(emailaddressVal)) {
                email.css('background-color', '#faa');
                hasError = true;
            }

            if(hasError == true) { return false; }

  });
}); 
```

[完整代码](http://jsfiddle.net/kMZeW/)

到目前为止，它只检查电子邮件输入是否为空以及电子邮件格式是否错误。但是，我想做的第一件事是检查是否有任何空输入字段，如果是，则为它们分配一个 css 属性。

# sql - Sql 查询性能问题

> ID：15204290
> 
> 赞同：1
> 
> 时间：2013-03-04T14:50:28.540
> 
> 标签：sql, performance

下面的查询似乎需要大约 20 秒才能执行，并且因为它在单个事务中运行多次，所以严重影响了性能。

```
[update table1
            set column3 = 'new_str'  
          where column1||','||column2 in  
        (select table1.column1||','||column2  
           from table1   
       join table2 on table1.column1 = table2.column1  
      where table2.column4 = 'value4'  
        and table1.column2 = 'value2'  
        and column3 = 'old_str')] 
```

表 1
column1 - char (12) - 主键
column2 - char (30) - 主键
column3 - char (25)

table2
column1 - char (12) - 主键（表 1 中的外键）
column4 - char (12)

上面的表大约有 1009578 和 1082555 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:56:53.853

无法测试它，但我认为打破基于计算字段的标准应该会大大加快更新速度。像这样的东西（可能缺少一些东西）应该会更好：

```
[update table1
         set column3 = 'new_str'  
          where column1 in   
        (select table1.column1  
           from table1   
      where table1.column2 = 'value2'  
        and column3 = 'old_str')
        and 
         column2 in 
    (select table2.column2  
           from table2   
      where table2.column1 = column1
        and table2.column4 = 'value4')
        ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:26:41.657

我认为您正在对 Table1 进行不必要的查询。尝试这个：

```
 update table1 t1
 set column3 = 'new_str'  
 where EXISTS 
  (select *          
   from table2 t2
   where 
     t1.column1 = t2.column1 -- this is your link from t1 to t2
     and t2.column4 = 'value4'  
     and t1.column2 = 'value2'  
     and t2.column3 = 'old_str'
   ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:30:42.743

我想这个`IN`原因在这里不是必需的：

```
update table1
    set column3 = 'new_str' 
    from table1 join table2 on table1.column1 = table2.column1  
      where table2.column4 = 'value4'  
        and table1.column2 = 'value2'  
        and table1.column3 = 'old_str' 
```

写给我们解决方案是最快的;]！

# objective-c - 有没有办法为 NSTableColumn 的每一行显示不同的小图像（图标）？

> ID：15204292
> 
> 赞同：2
> 
> 时间：2013-03-04T14:50:30.973
> 
> 标签：objective-c, macos, cocoa

有没有办法为 NSTableColumn 的每一行显示不同的小图像（图标）？

我不一定需要为其添加新列，我想知道是否可以在每行文本的前面添加图标。

我知道有方法：`- (void)setDataCell:(NSCell *)aCell`。但是，这种方法似乎对所有行都使用*相同*的单元格，这不是我想要的。

这个问题有没有不需要子类化 NSTableColumn 的解决方案？如果没有，我应该继承什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:10:04.230

将相关列的单元格设为 NSImageCell。您可以在 Interface Builder 中通过将“图像单元”从对象库拖到列上来执行此操作。然后选择该列，您将能够通过 Data、Value、Value Path 或 Valueurl 绑定之一绑定到图像源。选择哪一个取决于模型中的源属性是分别返回 NSData、NSImage、NSString 路径还是 NSURL url。有关更多完整信息，请参阅有关 NSImageCell 绑定的[文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CocoaBindingsRef/BindingsText/NSImageCell.html)

每行的单元格都是相同的，因为它们是一个轻量级的类，用作绘图的性能优化。这并不意味着每一行都必须使用单元格来绘制相同的图像，就像文本列的单元格必须为每一行绘制相同的字符串一样。

如果您确实需要图像与文本在同一列中，您将不得不做一些更像 duDE 解释的事情。在我的脑海中，我相信在这种情况下绑定应该仍然是可能的，但是你必须编写更多的代码才能使其工作。与其那样做，我可能会改用基于视图的 NSTableView，这使得将多个视图放在单个列/行中变得容易，并且可以让您继续使用绑定而无需任何额外工作。

编辑： duDE 的答案已被删除，但总而言之，它建议创建一个自定义 NSCell 子类来绘制图像和文本。

# parameters - 使用 tolua++ 将表传回 C++

> ID：15204294
> 
> 赞同：4
> 
> 时间：2013-03-04T14:50:47.297
> 
> 标签：parameters, tolua++

我需要将一个字符串表作为参数从 lua 传递回 C++ 方法，有什么想法可以使用 tolua++ 标记接受该表的方法吗？

# java - JTextPane 中的字母在延迟后着色

> ID：15204295
> 
> 赞同：0
> 
> 时间：2013-03-04T14:50:55.793
> 
> 标签：java, swing, keylistener, jtextpane

我有一个简单的文本编辑器，它把 JAVA 关键词染成蓝色。这是代码：

```
class MainPanel extends JPanel {

    private int WIDTH = 800;
    private int HEIGHT = 500;
    private JFrame frame;
    private JTextPane codePane = new JTextPane();
    private StyledDocument doc = codePane.getStyledDocument();

    MainPanel(JFrame frame) {
        this.frame = frame;
        setPreferredSize(new Dimension(WIDTH, HEIGHT));
        setLayout(new BorderLayout());
        JScrollPane scroll = new JScrollPane(codePane);
        add(scroll, BorderLayout.CENTER);
        codePane.addKeyListener(new MainPanel.KeyHandler());
        codePane.setFont(new Font("Monospaced", Font.PLAIN, 15));
        //Loading key words..
        //...
    }

    private class KeyHandler extends KeyAdapter {

        @Override
        public void keyTyped(KeyEvent ev) {
            String code = codePane.getText();
            SimpleAttributeSet set = new SimpleAttributeSet();
            StyleConstants.setForeground(set, Color.BLACK);
            doc.setCharacterAttributes(0, code.length(), set, true);
            //Change keywords color
            int lastIndex = 0;
            for (int a = 0; a < words.length; a++) {
                set = new SimpleAttributeSet();
                if (Arrays.asList(keywords).contains(words[a])) {
                    StyleConstants.setForeground(set, Color.BLUE);
                }
                doc.setCharacterAttributes(lastIndex, words[a].length(), set, true);
                lastIndex += words[a].length() + 1; //+1 bo jeszcze spacja po słowie
            }
        }
    }
} 
```

我的问题是文本突出显示（在 keyTyped 事件中）发生在将字母放在文本区域之前。因此，当我输入：“int”时，它不会将其着色为蓝色，但是当我再输入一个字符时，“int”将被着色为蓝色，例如。"intR", "int" 将变为蓝色，R 字母将变为黑色。如何预防？一种解决方案是用 keyReleased 替换 keyTyped，但我不能这样做，因为我打算在按下时做一些事情`ENTER`，`TAB`我需要对它们使用消耗方法，这对 keyReleased 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:43:55.817

> 一种解决方案是将 keyTyped 替换为 keyReleased

不要使用 KeyListener。您应该使用 DocumentListener。有关详细信息，请参阅 Swing 教程中有关[如何编写文档侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)的部分。

> 我打算在 ENTER 和 TAB 时做一些事情

您应该使用键绑定。从上面的链接中查看目录，您会找到关于`How to Use Key Bindings`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:14:44.097

嗨，这是您如何从 Jtextfield 中回显字符串的方式

```
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class FrmPrueba extends JFrame {

    public FrmPrueba() {
        setTitle("Prueba de pintado");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(400, 300);
        setLookAndFeel();
        JTextField jTextField = new JTextField();
        add(jTextField);
        jTextField.addKeyListener(new KeyAdapter() {
            @Override
            public void keyReleased(KeyEvent e) {
                System.out.print(e.getKeyChar());
            }
        });

        setLocationRelativeTo(null);

    }

    private void setLookAndFeel() {
        try {
            UIManager.setLookAndFeel(new javax.swing.plaf.nimbus.NimbusLookAndFeel());
        } catch (UnsupportedLookAndFeelException e) {
        }
    }

    public static void main(String[] args) {
        FrmPrueba frmPrueba = new FrmPrueba();
        frmPrueba.setVisible(true);

    }
} 
```

# c# - 秒表经过的输出

> ID：15204297
> 
> 赞同：6
> 
> 时间：2013-03-04T14:51:03.660
> 
> 标签：c#

我有一些处理大量数据的代码，所以我在星期四启动它，并让它在周末运行。星期一，我回来了，看到它完成了。我使用秒表功能来跟踪代码运行的时间长度。但是，我最终得到

```
Elapsed: 2.18:57:55.xxx 
```

我知道它的输出通常是 H:M:SS，但不理解第一个数字，特别是因为它已经运行了好几天。它只是从几个小时变成了几天吗？我让它运行太久以至于它坏了吗？

编辑：对不起，我不是说周一就结束了。我的意思是到星期一（当我回到电脑前），它已经完成了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T14:54:20.283

是的 - 这是格式[`TimeSpan.ToString`](http://msdn.microsoft.com/en-us/library/1ecy8h51.aspx)：

> 返回的字符串使用“c”格式说明符进行格式化，并具有以下格式：
> 
> [-][d.]hh:mm:ss[.fffffff]
> 
> 方括号（[ 和 ]）中的元素可能不包含在返回的字符串中。冒号和句点（: 和。）是文字字符。下表列出了非文字元素。请注意，ToString() 方法返回的字符串不区分区域性。

由于没有显示总小时数的格式说明符，因此您需要计算它。如果您希望将小时数显示为单个数字，请使用：

```
TimeSpan ts = new TimeSpan(2,18,57,55);

var output = string.Format("{0}:{1}",
                           ts.Days*24 + ts.Hours,
                           ts.ToString("mm\\:ss\\.ffff"));

//output =  `66:57:55.0000` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:55:06.830

这是预期的行为。来自[Timespan.ToString()](http://msdn.microsoft.com/en-gb/library/1ecy8h51.aspx)的文档：

> 返回的字符串使用“c”格式说明符进行格式化，并具有以下格式：
> 
> [-][d.]hh:mm:ss[.fffffff]
> 
> "d" - 时间间隔中的天数。如果时间间隔小于 1 天，则省略此元素。

# regex - 哪些编程语言是常规的？

> ID：15204299
> 
> 赞同：3
> 
> 时间：2013-03-04T14:51:06.957
> 
> 标签：regex, language-agnostic, programming-languages, regular-language

对任何“为什么这个正则表达式不能工作 html！？！”的典型反应 问题是“因为 HTML 不是常规语言”。

所以，我很好奇是否有人有一份常见的编程语言列表，这些语言是正则语言，因此适用于正则表达式匹配。我知道有一些方法可以确定一种语言是否是常规语言（逐个案例），但对于复杂的语言，证明也可能相当复杂。我想也许一个快速的语言检查列表会很有用。

我也知道你可以用非常规语言做正则表达式，但它们并不总是可靠的（html 示例）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:32:55.170

忽略对嵌套或编程长度的任意限制，我怀疑任何常见的编程语言都是常规的。即使是简单的（中缀）算术表达式也构成了一种非常规语言，并且它是一种不支持它们的不寻常的编程语言。更一般地说，如果一种语言允许嵌套任何结构而不限制其深度，则它不是常规语言。

# jquery - 如何改进这个 jQuery 语句？

> ID：15204301
> 
> 赞同：1
> 
> 时间：2013-03-04T14:51:15.467
> 
> 标签：jquery

有没有更好的方法来写这个：

```
$('.kog td:nth-child(8), .kog th:nth-child(8)').show(); 
```

我正在重复类选择器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T14:52:26.697

你可以使用

```
$('.kog').find('td,th').filter(':nth-child(8)').show(); 
```

您会注意到它并没有更简洁，但它可能更好地显示了您的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:57:47.610

您可以缓存变量并在其中找到所需的内容。我个人会使用一个类来设置可见性。

```
var $kog = $( '.kog' );

$kog.find( 'td:nth-child(8), th:nth-child(8)' ).addClass( 'is-visible' ); 
```

那么你会有一个像这样的 CSS 类：

```
.is-visible { display: block; } 
```

如果规则与您正在进行的其他任何事情发生冲突，您可能必须将规则指定为 !important。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:07:18.030

在没有看到您的 HTML 或不知道您的用例的情况下，很难说。

`.kod`要返回多个表吗？如果是这样，您可能会展示您可能不打算展示的内容。如果有两个`.kod`表，每个表有 6 个 TD，您将在第二个表中显示内容。TH 选择器也是如此。

这似乎是一个相当奇怪的选择器/事情；这是一张只有一个标题和一个正文行的长表吗？如果是这样，那么我猜你在做什么是有道理的，你可以通过这样做避免重复类选择器：

```
jQuery('.kod').find("td:nth-child(8), th:nth-child(8)").show(); 
```

这里的例子：http: [//jsfiddle.net/n2dGm/](http://jsfiddle.net/n2dGm/)

# elasticsearch - elasticsearch 与 RDBMS 中的多个术语搜索

> ID：15204302
> 
> 赞同：4
> 
> 时间：2013-03-04T14:51:16.917
> 
> 标签：elasticsearch

### RDBMS 的现状

假设在主要用于搜索目的的企业环境中，我有一个包含 30-40 列的旧 RDBMS 表。在现实生活中可能有几张桌子，但让我们保持简单。我有几十个，甚至几百个不同的程序，每个程序都针对这个表执行自己的查询，每个程序都查看一组略有不同的字段。

### 为什么现状很痛苦

1.  我们的 DBA 竭尽全力确保所有这些不同的查询都能正常工作，方法是为每个查询定制索引。
2.  开发人员和 DBA 之间产生了不信任，因为 DBA 想知道将执行哪些新查询，以便他们检查索引，而开发人员只想尽快推出新功能。
3.  第 2 点有时会归结为强制开发人员使用所有静态绑定查询的努力，以便 DBA 肯定有机会首先评估性能。

啊...

### 这与 ES 指数相比如何？

因此，假设我在弹性搜索索引中索引了所有 30-40 列，是否真的可以搜索一个词或多个词，其性能大致与一组 RDBMS 索引一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:54:42.583

> 因此，假设我在弹性搜索索引中索引了所有 30-40 列，是否真的可以搜索一个词或多个词，其性能大致与一组 RDBMS 索引一样？

简而言之，是的。

在 Elasticsearch 中，首选的方法是使用**filter**，假设这些字段/列包含“枚举”类型的数据（例如`status`、`gender`、`department`等），并且您不想使用全文搜索来查询它们. （添加全文搜索很简单，但需要您提前考虑适当的分析器、用户搜索模式等主题）

假设您在`term`这里使用过滤器：

```
curl localhost:9200 -d '{
  "query" : {
    "filtered" : {
      "filter" : {
        "term" : {
          "department" : "marketing"
        }
      }
    }
  }
}' 
```

现在，terms 过滤器会生成一个 bitset，如果特定文档与此过滤器匹配（1/0），则该 bitset 会存储信息。这个 bitset 具有三个重要的特性：a) 它非常紧凑，b) 它非常可缓存，c) 它允许 bitset 操作组合过滤器。

Elasticsearch 将使用[**过滤器缓存**](http://www.elasticsearch.org/guide/reference/index-modules/cache.html)来加快对该过滤器的访问。

过滤器和位集的好处是，如果您要进行稍微不同的查询：

```
curl localhost:9200 -d '{
  "query" : {
    "filtered" : {
      "filter" : {
        "bool" : {
          "must": [
            "term" : {
              "department" : "marketing"
            },
            "term" : {
              "status" : "active"
            }
          ]
        }
      }
    }
  }
}' 
```

*部门*字段上的过滤器将被重新使用并从缓存中加载，将在*状态*字段上创建一个新的缓存位集，下一次，两者都将从缓存中加载并使用位集操作进行评估。

Elasticsearch 提供了一个[*Warmer API*](http://www.elasticsearch.org/guide/reference/api/admin-indices-warmers.html)，因此您可以使用已知查询非常有效地“预加载”您的缓存。

过滤器缓存的统计信息是[*Nodes Stats API*](http://www.elasticsearch.org/guide/reference/api/admin-cluster-nodes-stats.html)的一部分。

# reporting-services - 如何在每一行中显示数据并且由于行分组而没有合并列

> ID：15204303
> 
> 赞同：1
> 
> 时间：2013-03-04T14:51:24.773
> 
> 标签：reporting-services, format, row, grouping, rdlc

我想在报告的每一行中都有数据，而不是分组。我需要将数据分组，以便将计数相加，但我希望在每一行中都显示数据以进行进一步的报告活动。我是报告的新手，但似乎无法找到解决方案来解决我认为的直接报告选项。

我试图以文字形式表达我的愿望，因为我无法以新成员的身份发布图片。

A -- 1 -- 自行车

A -- 1 -- 汽车

A -- 2 -- 汽车

而不是

A -- 1 -- 自行车

```
 Car

  2 -- Car 
```

任何帮助将非常感激。

# php - 根据 XML 数据对 XML 结果重新排序

> ID：15204305
> 
> 赞同：0
> 
> 时间：2013-03-04T14:51:34.703
> 
> 标签：php, xml, api, xml-parsing

我们正在通过他们的 API 从远程服务器获取数据。不幸的是，他们的 API 没有按日期对返回的数据进行排序。

我正在尝试弄清楚如何重新组织数据以使其按 next_bookable_date 排序，但没有取得多大成功。我们使用 PHP 和 SimpleXMLElement 来解析数据并创建一个字符串，然后将其插入网页。但当前结果的顺序与返回的 XML 中出现的数据顺序相同。

基本的 XML 结果如下。为了节省空间，我删除了更多数据。

```
SimpleXMLElement Object
(
    [request] => GET search.xml?start_date=2013-05-03&end_date=2013-05-17
    [error] => OK
    [total_tour_count] => 4
    [tour] => Array
        (
            [0] => SimpleXMLElement Object
                (
                    [next_bookable_date] => 2013-05-13
                    [tour_name] => Thailand Tour
                )
            [1] => SimpleXMLElement Object
                (
                    [next_bookable_date] => 2013-05-12
                    [tour_name] => Bali Tour
                )
            [2] => SimpleXMLElement Object
                (
                    [next_bookable_date] => 2013-05-05
                    [tour_name] => Hawaii Tour
                )
            [3] => SimpleXMLElement Object
                (
                    [next_bookable_date] => 2013-05-06
                    [tour_name] => Bhutan Tour
        )
    )
) 
```

我们用来生成 html 字符串的 PHP 代码（再次剥离了一些 html 代码以节省空间）：

```
foreach($result->tour as $tour) {
$tourname = $tour->tour_name;
$tourdate = $tour->next_bookable_date;

// create string for dpt-soon
$dpt_soon_list .= "<li> some html using the above values </li>\n";
} 
```

一旦我们从远程服务器接收到 XML 数据，有没有办法重新排序？或者有没有办法在运行 foreach 时重新排序 PHP 输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:27:23.107

您可以使用[usort()](http://www.php.net/manual/en/function.usort.php)对多维数组或对象进行排序。我编写了这段代码来解释如何将它与 SimpleXML 一起使用：

```
<?php
// Load the XML file
$xml = simplexml_load_file("xml.xml");
// Get all children into an array
$Tours = (array)$xml->children();
$Tours = $Tours["tour"];

// Call usort on the array
usort($Tours, "sorttours");

// Output results
echo "<pre>".print_r($Tours, true)."</pre>";

// The function that specifies when an entry is larger, equal or smaller than another
function sorttours($a, $b) {
    // Parse strings into a date for comparison
    $Date1 = strtotime($a->next_bookable_date);
    $Date2 = strtotime($b->next_bookable_date);

    // If equal, return 0
    if ($Date1 == $Date2) {
        return 0;
    }
    // If Date1 is larger, return 1, otherwise -1
    return ($Date1 > $Date2) ? 1 : -1;
}
?> 
```

此示例假定 XML 看起来有点像这样：

```
<?xml version="1.0"?>
<tours>
    <tour>
        <next_bookable_date>2013-05-13</next_bookable_date>
        <tour_name>Thailand Tour</tour_name>
    </tour>
    <tour>
        <next_bookable_date>2013-05-12</next_bookable_date>
        <tour_name>Bali Tour</tour_name>
    </tour>
    <tour>
        <next_bookable_date>2013-05-05</next_bookable_date>
        <tour_name>Hawaii Tour</tour_name>
    </tour>
    <tour>
        <next_bookable_date>2013-05-06</next_bookable_date>
        <tour_name>Bhutan Tour</tour_name>
    </tour>
</tours> 
```

如果不是这种情况，那么您需要重写*sorttours*函数以使用例如属性来确定顺序。

# javascript - 页面加载时的javascript随机图像并在一段时间内发生变化

> ID：15204310
> 
> 赞同：0
> 
> 时间：2013-03-04T14:51:48.680
> 
> 标签：javascript, css, image, random

我试图让这个函数在页面加载时运行，以便图像会在一段时间内发生变化。我可以让这张图片在点击时运行，但它找不到在加载时运行的方法，我已经尝试了所有我能找到的东西来尝试去做

```
 var imgArray = []
            imgArray[0] = "url('../danallenfilms/images/screenshots/husky/shot1.png')";
            imgArray[1] = "url('../danallenfilms/images/screenshots/husky/shot2.png')";
            imgArray[2] = "url('../danallenfilms/images/screenshots/husky/shot3.png')";
            imgArray[3] = "url('../danallenfilms/images/screenshots/husky/shot4.png')";
            imgArray[4] = "url('../danallenfilms/images/screenshots/husky/shot5.png')";

    var numOfImg = imgArray.length
     function randomImg(){

         var randomNum = Math.floor(Math.random()*(numOfImg));

            document.getElementById('imgDisplay').style.backgroundImage = imgArray[randomNum];

    };
    setInterval(randomImg(), 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:55:05.837

尝试：

```
 var imgArray = []
            imgArray[0] = "url('../danallenfilms/images/screenshots/husky/shot1.png')";
            imgArray[1] = "url('../danallenfilms/images/screenshots/husky/shot2.png')";
            imgArray[2] = "url('../danallenfilms/images/screenshots/husky/shot3.png')";
            imgArray[3] = "url('../danallenfilms/images/screenshots/husky/shot4.png')";
            imgArray[4] = "url('../danallenfilms/images/screenshots/husky/shot5.png')";

    var numOfImg = imgArray.length,
        elem = document.getElementById('imgDisplay');

    setInterval(function () {
         var randomNum = Math.floor(Math.random()*(numOfImg));
         elem.style.backgroundImage = imgArray[randomNum];
    }, 1000); 
```

[请参阅此处](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)的正确用法`setInterval`

如果您的脚本在`imgDisplay`加载之前执行，您也可能会遇到问题。`body`您可以通过在关闭标签之前将脚本放在上面来解决该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:56:28.883

怎么样：

```
<body onload="setInterval(randomImg, 1000);">
...
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:19:24.227

问题是您的 Math.random 用法。乘以然后`Math.random`使用`1000000`模 ( `%`) 得到一个范围内的数字：

```
var imgArray = [
 "url('../danallenfilms/images/screenshots/husky/shot1.png')",
 "url('../danallenfilms/images/screenshots/husky/shot2.png')",
 "url('../danallenfilms/images/screenshots/husky/shot3.png')",
 "url('../danallenfilms/images/screenshots/husky/shot4.png')",
 "url('../danallenfilms/images/screenshots/husky/shot5.png')"];

function randomImg() {
    var randomNum = (Math.floor((Math.random() * 1000000000)) % (imgArray.length - 1));
    document.body.style.backgroundImage = imgArray[randomNum];

}

setInterval(randomImg, 1000);
randomImg(); 
```

# 这是一个例子：http: [//jsfiddle.net/howderek/swYcf/](http://jsfiddle.net/howderek/swYcf/)

# 全屏：http: [//jsfiddle.net/howderek/swYcf/embedded/result/](http://jsfiddle.net/howderek/swYcf/embedded/result/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T14:58:31.717

```
var imgArray = [
 "url('../danallenfilms/images/screenshots/husky/shot1.png')",
 "url('../danallenfilms/images/screenshots/husky/shot2.png')",
 "url('../danallenfilms/images/screenshots/husky/shot3.png')",
 "url('../danallenfilms/images/screenshots/husky/shot4.png')",
 "url('../danallenfilms/images/screenshots/husky/shot5.png')"
            ];

var numOfImg = imgArray.length;
 function randomImg(){
     var randomNum = Math.floor(Math.random()*numOfImg);
        document.getElementById('imgDisplay').style.backgroundImage = imgArray[randomNum];
}
setInterval('randomImg()', 1000); 
```

试试这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T14:58:43.770

要使其在页面加载时运行，您需要有一个在页面加载时调用的函数。让我们将其命名为“onStart”。它只包含一行，即您的 setInterval 行。此外，您还必须在 html 代码中编写一些 js。那就是找到你的身体标签并添加属性“onload”。像这样：

```
<body onload="onStart()"> 
```

# version-control - 无论如何要在某个时候将两个本地 mercurial repos 相互关联？

> ID：15204319
> 
> 赞同：1
> 
> 时间：2013-03-04T14:52:21.633
> 
> 标签：version-control, mercurial

我们在 flex/as3 项目中使用 mercurial 已经两年多了。随着时间的推移，我们提出了几个项目和一个由项目使用/引用的公共库。为了正确维护版本控制，每次在项目 repo 上标记新版本时，也会将相同的标记应用于库 repo。

这是手动完成的。我不确定上面描述的我们所做的是否是正确的方法，但我想知道是否有任何（其他）方法可以将项目存储库与库存储库相关联，以便每当我想提取项目的特定版本时，我将确切知道应该提取哪个版本的库。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:59:27.130

你有没有尝试过 subrepo？通过使用 subrepo，hg 将使用 subrepo 维护整个项目。

例如，如果您有`HG_DIR/lib`作为库并且它是 的子存储库`HG_DIR`，那么当在 中提交时`HG_DIR`，hg 会记住`HG_DIR/lib`您正在使用哪个版本，这意味着`HG_DIR`链接中的提交与 中的提交`HG_DIR/lib`。

`hg subrepo`也支持多个 VCS 子存储库。

更新：

正如@alexis 建议的那样，使用[官方文档](http://mercurial.selenic.com/wiki/Subrepository#Recommendations)中的推荐，lib 应该被视为项目的兄弟姐妹：

```
HG_DIR/
    lib1/
    lib2/
    project/ 
```

# java - 关于不可变类的完整功能

> ID：15204325
> 
> 赞同：1
> 
> 时间：2013-03-04T14:52:34.810
> 
> 标签：java, immutability

我正在开发一个不可变的类。下面是我的不可变类，请告诉我它是完全不可变的，或者如果我遗漏了某些东西，或者它的不可变性无论如何都会被打破，那么请告诉我..

```
public final class ImmutableReminder{
    private final Date remindingDate;

    public ImmutableReminder (Date remindingDate) {
        if(remindingDate.getTime() < System.currentTimeMillis()){
            throw new IllegalArgumentException("Can not set reminder” +
                        “ for past time: " + remindingDate);
        }
        this.remindingDate = new Date(remindingDate.getTime());
    }

    public Date getRemindingDate() {
        return (Date) remindingDate.clone();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:58:05.567

在根据您的类不变量检查它之前，您应该制作一份提醒日期.getTime() 的副本。否则，在您检查了它的有效性之后，引用了您的提醒日期的攻击者可能会在其上调用 .set 方法来更改该值。

长时间 = 提醒日期.getTime();

```
public final class ImmutableReminder{
    private final Date remindingDate;

    public ImmutableReminder (Date remindingDate) {
        long incomingTime = remindingDate.getTime()

        if(incomingTime < System.currentTimeMillis()){
            throw new IllegalArgumentException("Can not set reminder” +
                        “ for past time: " + remindingDate);
        }
        this.remindingDate = new Date(incomingTime);
    }

    public Date getRemindingDate() {
        return (Date) remindingDate.clone();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:29:42.183

这个类就是你通常所说的不可变的。
但是你说“或者它的不可变性无论如何都可以被打破”......在java中，反射可以打破所有规则。一些真正邪恶的人可能会检测到您的私人最终提醒日期，并对其进行更改，使其首先可访问，然后对其调用设置器。您可以使用更好的 Date 实现，例如 joda time DateTime ，它本身是不可变的......但有人甚至可以使用反射使该字段成为非最终字段。
所以这个类**是**不可变的，但它**不是牢不可破**的。
而且没有办法解决它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T14:54:58.693

如果它是整个类，它确实是不可变的。

# ios - 如何检索所有可见的表节标题视图

> ID：15204328
> 
> 赞同：19
> 
> 时间：2013-03-04T14:52:53.547
> 
> 标签：ios, objective-c, uitableview

有没有办法获得所有可见的节标题视图？

类似于 UITableView 的 visibleCells 实例方法..

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-05-08T09:37:09.317

使用 indexPathsForVisibleRows 的问题在于它不包括没有任何行的部分。要获取所有可见部分，包括空白部分，您必须检查该部分的矩形并将其与表格的 contentOffset 进行比较。

您还必须注意带有浮动部分的普通样式和不带浮动部分的分组样式之间的区别。

我做了一个支持这种计算的类别：

```
@interface UITableView (VisibleSections)

// Returns an array of NSNumbers of the current visible section indexes
- (NSArray *)indexesOfVisibleSections;
// Returns an array of UITableViewHeaderFooterView objects of the current visible section headers
- (NSArray *)visibleSections;

@end

@implementation UITableView (VisibleSections)

- (NSArray *)indexesOfVisibleSections {
    // Note: We can't just use indexPathsForVisibleRows, since it won't return index paths for empty sections.
    NSMutableArray *visibleSectionIndexes = [NSMutableArray arrayWithCapacity:self.numberOfSections];
    for (int i = 0; i < self.numberOfSections; i++) {
        CGRect headerRect;
        // In plain style, the section headers are floating on the top, so the section header is visible if any part of the section's rect is still visible.
        // In grouped style, the section headers are not floating, so the section header is only visible if it's actualy rect is visible.
        if (self.style == UITableViewStylePlain) {
            headerRect = [self rectForSection:i];
        } else {
            headerRect = [self rectForHeaderInSection:i];
        }
        // The "visible part" of the tableView is based on the content offset and the tableView's size.
        CGRect visiblePartOfTableView = CGRectMake(self.contentOffset.x, self.contentOffset.y, self.bounds.size.width, self.bounds.size.height);
        if (CGRectIntersectsRect(visiblePartOfTableView, headerRect)) {
            [visibleSectionIndexes addObject:@(i)];
        }
    }
    return visibleSectionIndexes;
}

- (NSArray *)visibleSections {
    NSMutableArray *visibleSects = [NSMutableArray arrayWithCapacity:self.numberOfSections];
    for (NSNumber *sectionIndex in self.indexesOfVisibleSections) {
        UITableViewHeaderFooterView *sectionHeader = [self headerViewForSection:sectionIndex.intValue];
        [visibleSects addObject:sectionHeader];
    }

    return visibleSects;
}

@end 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-06-24T14:55:26.823

我真的很喜欢@adamsiton 的解决方案，最后我把它翻译成了swift。在这里，仅供参考。

我调用了文件 UITableView+VisibleSections.swift

```
import UIKit

public extension UITableView {

    var indexesOfVisibleSections: [Int] {
        // Note: We can't just use indexPathsForVisibleRows, since it won't return index paths for empty sections.
        var visibleSectionIndexes = [Int]()

        for i in 0..<numberOfSections {
            var headerRect: CGRect?
            // In plain style, the section headers are floating on the top, so the section header is visible if any part of the section's rect is still visible.
            // In grouped style, the section headers are not floating, so the section header is only visible if it's actualy rect is visible.
            if (self.style == .plain) {
                headerRect = rect(forSection: i)
            } else {
                headerRect = rectForHeader(inSection: i)
            }
            if headerRect != nil {
                // The "visible part" of the tableView is based on the content offset and the tableView's size.
                let visiblePartOfTableView: CGRect = CGRect(x: contentOffset.x, y: contentOffset.y, width: bounds.size.width, height: bounds.size.height)
                if (visiblePartOfTableView.intersects(headerRect!)) {
                    visibleSectionIndexes.append(i)
                }
            }
        }
        return visibleSectionIndexes
    }

    var visibleSectionHeaders: [UITableViewHeaderFooterView] {
        var visibleSects = [UITableViewHeaderFooterView]()
        for sectionIndex in indexesOfVisibleSections {
            if let sectionHeader = headerView(forSection: sectionIndex) {
                visibleSects.append(sectionHeader)
            }
        }

        return visibleSects
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T15:00:25.357

对于普通样式表，您可以获得可见行。从中，得到一组可见部分。然后，从表中获取节标题视图。

```
NSArray *visibleRows = [self.tableView indexPathsForVisibleRows];
NSMutableIndexSet *sections = [[NSMutableIndexSet alloc] init];
for (NSIndexPath *indexPath in visibleRows) {
    [sections addIndex:indexPath.section];
}

NSMutableArray *headerViews = [NSMutableArray array];
[sections enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
    UIView *view = [self.tableView headerViewForSection:idx];
    [headerViews addObject:view];
}]; 
```

注意：未经测试的代码 - 可能包含拼写错误。对于分组样式表，这不会 100% 起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-11T23:37:25.503

Benjamin Wheeler 的解决方案是一个很棒的 Swift 解决方案。由于新的 Swift 语法，我修复了其中的一个问题，并对其进行了修改以匹配默认 UITableView 实现提供的 .visibleCells 属性。

```
extension UITableView {

    /// The table section headers that are visible in the table view. (read-only)
    ///
    /// The value of this property is an array containing UITableViewHeaderFooterView objects, each representing a visible cell in the table view.
    ///
    /// Derived From: [http://stackoverflow.com/a/31029960/5191100](http://stackoverflow.com/a/31029960/5191100)
    var visibleSectionHeaders: [UITableViewHeaderFooterView] {
        get {
            var visibleSects = [UITableViewHeaderFooterView]()

            for sectionIndex in indexesOfVisibleSections() {
                if let sectionHeader = self.headerViewForSection(sectionIndex) {
                    visibleSects.append(sectionHeader)
                }
            }

            return visibleSects
        }
    }

    private func indexesOfVisibleSections() -> Array<Int> {
        // Note: We can't just use indexPathsForVisibleRows, since it won't return index paths for empty sections.
        var visibleSectionIndexes = Array<Int>()

        for (var i = 0; i < self.numberOfSections; i++) {
            var headerRect: CGRect?
            // In plain style, the section headers are floating on the top,
            // so the section header is visible if any part of the section's rect is still visible.
            // In grouped style, the section headers are not floating,
            // so the section header is only visible if it's actual rect is visible.
            if (self.style == .Plain) {
                headerRect = self.rectForSection(i)
            } else {
                headerRect = self.rectForHeaderInSection(i)
            }

            if headerRect != nil {
                // The "visible part" of the tableView is based on the content offset and the tableView's size.
                let visiblePartOfTableView: CGRect = CGRect(
                    x: self.contentOffset.x,
                    y: self.contentOffset.y,
                    width: self.bounds.size.width,
                    height: self.bounds.size.height
                )

                if (visiblePartOfTableView.intersects(headerRect!)) {
                    visibleSectionIndexes.append(i)
                }
            }
        }

        return visibleSectionIndexes
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-12T00:51:13.990

一个`UITableView`扩展，它为您提供`visibleHeaderViews`基于 @OhadM 的答案 ( [https://stackoverflow.com/a/45525595/5058116](https://stackoverflow.com/a/45525595/5058116) )，但它会检查潜在`nil`值。

```
extension UITableView {

    /// The section header views that are visible in the table view.
    var visibleHeaderViews: [UITableViewHeaderFooterView] {

        var headerViews = [UITableViewHeaderFooterView]()

        guard let indexPaths = indexPathsForVisibleRows else { return headerViews }

        for indexPath in indexPaths {
            if let headerView = headerView(forSection: indexPath.section) {
                headerViews.append(headerView)
            }
        }

        return headerViews

    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-04T15:19:46.183

在这种情况下，我认为您将 设置`cell.tag`为当前部分 ( `indexPath.section`)`cellForRowAtIndexPath`并使用`visibleCells`您描述的方法和`headerViewForSection`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-31T20:50:40.673

要获取当前可见部分，您可以通过检查当前可见单元格索引路径部分来获取它，因此此函数可以将可见部分返回给您

```
- (NSArray *)indexesOfVisibleSections {

    NSMutableArray *visibleSections = [NSMutableArray array];

    for (UITableViewCell * cell in [self.tableView visibleCells]) {
        if (![visibleSections containsObject:[NSNumber numberWithInteger:[self.tableView indexPathForCell:cell].section]]) {
            [visibleSections addObject:[NSNumber numberWithInteger:[self.tableView indexPathForCell:cell].section]];
        }
    }

    return visibleSections;
} 
```

要访问剖面视图，您可以使用

```
- (UITableViewHeaderFooterView *)headerViewForSection:(NSInteger)section; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-05T19:18:28.027

快速查看[UITableView](https://developer.apple.com/documentation/uikit/uitableview)文档为我们提供了[indexPathsForVisibleRows](https://developer.apple.com/documentation/uikit/uitableview/1614885-indexpathsforvisiblerows)并将其与 map 结合为我们提供了我们需要的数组：

```
tableView.indexPathsForVisibleRows.map{ tableView.headerView(forSection: $0.section) } 
```

map 返回我们可见的 headers-in-section 的数组。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-16T09:04:02.153

**Swift 4+** 干净简单，没有重复：

```
extension UITableView {

    var visibleHeaderViews: [UITableViewHeaderFooterView] {
        guard let visibleSectionsIndexPaths = indexPathsForVisibleRows?.compactMap({ $0.section }) else { return [] }

        return Set(visibleSectionsIndexPaths).compactMap { headerView(forSection: $0) }
    }

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-26T09:58:40.500

所有这些答案都变得过于复杂。您需要做的就是`headerView(forSection:)`循环调用。对于不可见的标题视图，它将返回 nil。

然而，有一个问题：你的标题视图*必须*继承`UITableViewHeaderFooterView`它才能工作（无论如何他们应该在技术上，但是除了这个之外的所有东西都可以工作，即使他们没有，所以你很容易错过这个。）

一旦你的类正确继承，你可以这样做：

```
for section in 0 ..< tableView.numberOfSections {
    guard let header = tableView.headerView(forSection: section) as? CustomHeaderView else { continue }
    header.update(...)
} 
```

# mysql - MySQL 查询以取消分组数据

> ID：15204333
> 
> 赞同：1
> 
> 时间：2013-03-04T14:53:06.030
> 
> 标签：mysql

[我和这个人](https://stackoverflow.com/questions/3469328/ungrouping-effect)有同样的问题，但对于 MySQL 而不是 SQL Server。可以用 MySQL 完成取消分组吗？不幸的是，MySQL 没有“Unpivot”功能。这是我需要的一个例子：

原始数据：

```
----------------------------------
owner id |   name    | occurances
----------------------------------
1        |   red     | 4
1        |   yellow  | 2
1        |   green   | 3
---------------------------------- 
```

查询输出：

```
---------------
id |   name
---------------
1  |   red
1  |   red
1  |   red
1  |   red
1  |   yellow
1  |   yellow
1  |   green
1  |   green
1  |   green
--------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:06:17.160

为此，您需要一组数字。这是一种方法：

```
 select id, name
 from t join
       (select d1.d + 10 * d2.d + 100*d3.d as num
        from (select 1 as d union all select 2 union all select 3 union all
              select 4 union all select 5 union all select 6
              select 7 union all select 8 unin all select 9 union all select 0
             ) d1 cross join
              (select 1 as d union all select 2 union all select 3 union all
              select 4 union all select 5 union all select 6
              select 7 union all select 8 unin all select 9 union all select 0
             ) d2 cross join
              (select 1 as d union all select 2 union all select 3 union all
              select 4 union all select 5 union all select 6
              select 7 union all select 8 unin all select 9 union all select 0
             ) d3
        ) n
        where n.num between 1 and occurrences 
```

这适用于最多 999 的数字。

# silverlight - 我们如何获得 silverlight 对象容器 id

> ID：15204334
> 
> 赞同：0
> 
> 时间：2013-03-04T14:53:08.410
> 
> 标签：silverlight

我们如何在 Silver Light 中获取 html live Division id，它在页面上保存银色 Light 对象。例如：假设我有两个部门，分别持有银光物体，每个部门都有不同的功能。我们如何识别银光按钮点击，这是银光当前的容器划分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:46:27.860

为此，您需要调用 Javascript 函数（这篇文章很好地描述了如何做到这一点：http: [//www.codeproject.com/Articles/293515/Calling-Silverlight-Method-from-Javascript-and-Jav](http://www.codeproject.com/Articles/293515/Calling-Silverlight-Method-from-Javascript-and-Jav)） .

然后在 JS 中可能是这样的：

```
var slApp1= parent.GetElementsByTagName('Div1')[0];
var slApp2= parent.GetElementsByTagName('Div2')[0]; 
```

# java - 为平台中立的消费持久化时间戳的首选方式

> ID：15204335
> 
> 赞同：1
> 
> 时间：2013-03-04T14:53:15.607
> 
> 标签：java, timezone, timestamp, jpa-2.0, jodatime

所以，基本上我有一个 JPA + Spring Data + Hibernate 应用程序，我在其中存储了一个日期和时间对象。

假设我们有以下场景：

> 这是一个存储“签到”数据的服务器——就像一个签到服务的位置存储库，即 Foursquare。
> 
> 来自此存储库服务的数据用于 REST API，而后者又由 Android/iOS/etc 客户端使用。
> 
> 现在，对于除纬度/经度、用户 ID 等之外的每个签到，我都有一个签到时的时间戳。

我应该如何存储这个时间戳？我应该有 java.util.Date 对象还是 Joda Time 对象？我应该保留时区数据还是在持久化之前将其从时间戳中删除并为此使用另一个 TimeZone 字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:07:05.317

真正重要的是，当您通过线路发送数据时，它会以通用格式序列化。现在最普遍的格式是[ISO8601](http://en.wikipedia.org/wiki/Iso8601)。

由于这是在特定位置签到，因此最合适的形式是带有偏移量的本地日期/时间。在 ISO8601 格式中，它看起来像：

```
2012-12-01T12:34:56-0700 
```

我不是 Java 程序员，但我相信 JodaTime 对此`DateTime`有最正确的实现。

# html - 如何防止░或▀变为░等？

> ID：15204339
> 
> 赞同：1
> 
> 时间：2013-03-04T14:53:21.730
> 
> 标签：html, blogger, html-encode

我正在尝试将其添加到我的页面的源代码中的评论中。

但是，当我保存时，字符会从这个[http://img.ctrlv.in/5134b28e330fa.jpg](http://img.ctrlv.in/5134b28e330fa.jpg)

到

[http://img.ctrlv.in/5134b28e7a5b0.jpg](http://img.ctrlv.in/5134b28e7a5b0.jpg)

我尝试对字符进行[编码](http://htmlentities.net/)，但徒劳无功。它们仍然会改变。

有什么技巧可以防止它们改变吗？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:55:13.383

不。

您受 Blogger 模板处理器的支配。

# mysql - 错误 1005：无法创建表

> ID：15204340
> 
> 赞同：1
> 
> 时间：2013-03-04T14:53:31.190
> 
> 标签：mysql, sql

我试图放下一张桌子，在我遇到这个问题[之前](https://stackoverflow.com/questions/15203742/how-to-solve-this-cannot-delete-or-update-a-parent-row-a-foreign-key-constrain)

并已成功解决，但现在我尝试删除表，但出现此错误：

```
ERROR: Error 1005: Can't create table 'radiotaxi_final.#sql-108_28' (errno: 150) 
```

该声明 ：

```
ALTER TABLE `RadioTaxi_Final`.`DireccionConductor` CHANGE COLUMN `Conductor_cedula` `Conductor_cedula` INT(11) NOT NULL  , 

  ADD CONSTRAINT `fk_DireccionConductor_Conductor1`

  FOREIGN KEY (`Conductor_cedula` )

  REFERENCES `RadioTaxi_Final`.`Conductor` (`cedula` )

  ON DELETE NO ACTION

  ON UPDATE NO ACTION 
```

结果 ：

```
SQL script execution finished: statements: 11 succeeded, 1 failed 
```

桌子 ：

```
CREATE TABLE `conductor` (  `cedula` int(10) unsigned NOT NULL,  `apellidos` varchar(30) COLLATE utf8_spanish2_ci NOT NULL,  `nombres` varchar(30) COLLATE utf8_spanish2_ci NOT NULL,  `fechaNacimiento` date NOT NULL,  PRIMARY KEY (`cedula`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish2_ci 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:08:57.283

创建 时`FOREIGN KEY`，引用列和引用列的数据类型必须*完全相同*。在您引用的表`conductor.cedula`中，类型为`INT(10) UNSIGNED`. 您已尝试在`DireccionConductor.Conductor_cedula`as`INT(11)`上隐式创建 FK `SIGNED`。如下修改您的语句以使类型匹配：

```
ALTER TABLE `RadioTaxi_Final`.`DireccionConductor`
  /* INT(10) UNSIGNED type matches the referenced table */
  CHANGE COLUMN `Conductor_cedula` `Conductor_cedula` INT(10) UNSIGNED NOT NULL  , 
  ADD CONSTRAINT `fk_DireccionConductor_Conductor1`
    FOREIGN KEY (`Conductor_cedula` )
    REFERENCES `RadioTaxi_Final`.`Conductor` (`cedula` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION 
```

# mongodb - MongoDB 记录所有查询

> ID：15204341
> 
> 赞同：190
> 
> 时间：2013-03-04T14:53:32.960
> 
> 标签：mongodb, logging

这个问题既简单又基本......如何将所有查询记录在mongodb的“tail”日志文件中？

我努力了：

*   设置分析级别
*   设置慢速 ms 参数启动
*   带有 -vv 选项的 mongod

/var/log/mongodb/mongodb.log 一直显示当前的活动连接数......

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2014-02-12T11:01:12.347

您可以记录所有查询：

```
$ mongo
MongoDB shell version: 2.4.9
connecting to: test
> use myDb
switched to db myDb
> db.getProfilingLevel()
0
> db.setProfilingLevel(2)
{ "was" : 0, "slowms" : 1, "ok" : 1 }
> db.getProfilingLevel()
2
> db.system.profile.find().pretty() 
```

来源：[http ://docs.mongodb.org/manual/reference/method/db.setProfilingLevel/](http://docs.mongodb.org/manual/reference/method/db.setProfilingLevel/)

`db.setProfilingLevel(2)`表示“记录所有操作”。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2013-03-04T15:07:03.473

我最终通过像这样启动 mongod 解决了这个问题（锤击和丑陋，是的......但适用于开发环境）：

```
mongod --profile=1 --slowms=1 & 
```

这将启用分析并将“慢查询”的阈值设置为 1 毫秒，从而将所有查询作为“慢查询”记录到文件中：

```
/var/log/mongodb/mongodb.log 
```

现在我使用以下命令获得连续的日志输出：

```
tail -f /var/log/mongodb/mongodb.log 
```

示例日志：

```
Mon Mar  4 15:02:55 [conn1] query dendro.quads query: { graph: "u:http://example.org/people" } ntoreturn:0 ntoskip:0 nscanned:6 keyUpdates:0 locks(micros) r:73163 nreturned:6 reslen:9884 88ms 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-04-24T14:03:52.017

因为它的谷歌第一个答案......
对于版本 3

```
$ mongo
MongoDB shell version: 3.0.2
connecting to: test
> use myDb
switched to db
> db.setLogLevel(1) 
```

[http://docs.mongodb.org/manual/reference/method/db.setLogLevel/](http://docs.mongodb.org/manual/reference/method/db.setLogLevel/)

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2016-09-05T11:17:30.360

`MongoDB`具有复杂的分析功能。日志记录发生在`system.profile`集合中。可以从以下位置查看日志：

```
db.system.profile.find() 
```

有 3 个日志记录级别（[source](https://docs.mongodb.com/v3.2/tutorial/manage-the-database-profiler/#profiling-levels)）：

*   **0 级**- 分析器关闭，不收集任何数据。mongod 总是将超过 slowOpThresholdMs 阈值的操作写入其日志。这是默认的探查器级别。
*   **级别 1** - 仅收集慢速操作的分析数据。默认情况下，慢操作是那些慢于 100 毫秒的操作。您可以使用 slowOpThresholdMs 运行时选项或 setParameter 命令修改“慢”操作的阈值。有关详细信息，请参阅指定慢速操作的阈值部分。
*   **级别 2** - 收集所有数据库操作的分析数据。

要查看数据库正在运行的分析级别，请使用

```
db.getProfilingLevel() 
```

并查看状态

```
db.getProfilingStatus() 
```

要更改分析状态，请使用命令

```
db.setProfilingLevel(level, milliseconds) 
```

其中`level`是指分析级别，`milliseconds`是需要记录查询的持续时间的毫秒数。要关闭日志记录，请使用

```
db.setProfilingLevel(0) 
```

在系统配置文件集合中查找所有查询时间超过一秒的查询，按时间戳降序排列将是

```
db.system.profile.find( { millis : { $gt:1000 } } ).sort( { ts : -1 } ) 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-02-24T19:17:36.183

我制作了一个命令行工具来激活分析器活动并以*“tail”*的方式查看日志-> **“mongotail”**：

```
$ mongotail MYDATABASE
2015-02-24 19:17:01.194 QUERY  [Company] : {"_id": ObjectId("548b164144ae122dc430376b")}. 1 returned.
2015-02-24 19:17:01.195 QUERY  [User] : {"_id": ObjectId("549048806b5d3db78cf6f654")}. 1 returned.
2015-02-24 19:17:01.196 UPDATE [Activation] : {"_id": "AB524"}, {"_id": "AB524", "code": "f2cbad0c"}. 1 updated.
2015-02-24 19:17:10.729 COUNT  [User] : {"active": {"$exists": true}, "firstName": {"$regex": "mac"}}
... 
```

但更有趣的功能（也像）是使用选项*“实时”*`tail`查看变化，并偶尔过滤结果以查找特定操作。*`-f``grep`*

 *请参阅以下文档和安装说明：[https ://github.com/mrsarm/mongotail](https://github.com/mrsarm/mongotail)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-01-21T22:24:39.430

如果您希望将查询记录到 mongodb 日志文件，则必须同时设置日志级别和分析，例如：

```
db.setLogLevel(1)
db.setProfilingLevel(2) 
```

（见[https://docs.mongodb.com/manual/reference/method/db.setLogLevel](https://docs.mongodb.com/manual/reference/method/db.setLogLevel)）

仅设置分析不会将查询记录到文件中，因此您只能从

```
db.system.profile.find().pretty() 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-10-23T16:11:38.883

一旦使用`db.setProfilingLevel(2)`.

下面的命令将打印最后执行的查询。
您也可以更改 limit(5) 以查看更少/更多查询。
$nin - 将过滤掉配置文件和索引查询
此外，使用查询投影 {'query':1} 仅查看查询字段

```
db.system.profile.find(
{ 
    ns: { 
        $nin : ['meteor.system.profile','meteor.system.indexes']
    }
} 
).limit(5).sort( { ts : -1 } ).pretty() 
```

仅具有查询投影的日志

```
db.system.profile.find(
{ 
    ns: { 
        $nin : ['meteor.system.profile','meteor.system.indexes']
    }
},
{'query':1}
).limit(5).sort( { ts : -1 } ).pretty() 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-03-04T14:56:40.290

探查器数据被写入数据库中的集合，而不是文件。请参阅[http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/)

我建议使用 10gen 的[MMS](http://mms.10gen.com)服务，并在那里提供开发分析器数据，您可以在 UI 中对其进行过滤和排序。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-11-27T15:58:01.433

将 profilinglevel 设置为 2 是记录所有查询的另一个选项。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-03-04T14:57:46.220

我认为虽然不优雅，但[oplog](http://www.briancarpio.com/2012/04/21/mongodb-the-oplog-explain/) *可以*部分用于此目的：它记录所有写入 - 但不记录读取......

如果我是对的，您必须启用复制。信息来自[这个问题的答案](https://stackoverflow.com/a/9692678/1667004)：[How to listen for changes to a MongoDB collection?](https://stackoverflow.com/questions/9691316/how-to-listen-for-changes-to-a-mongodb-collection)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-01-06T16:59:24.277

```
db.setProfilingLevel(2,-1) 
```

这行得通！它在 mongod 日志文件中记录了所有查询信息

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-12-17T20:33:20.120

我建议检查 mongosniff。这个可以工具可以做你想做的一切，甚至更多。特别是它可以帮助诊断大规模 mongo 系统的问题以及查询是如何路由的以及它们来自哪里，因为它通过侦听您的网络接口以进行所有与 mongo 相关的通信来工作。

[http://docs.mongodb.org/v2.2/reference/mongosniff/](http://docs.mongodb.org/v2.2/reference/mongosniff/)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-12-14T14:53:18.800

我编写了一个脚本，该脚本将在查询进入时实时打印出 system.profile 日志。您需要首先启用日志记录，如其他答案中所述。我需要这个，因为我正在使用适用于 Linux 的 Windows 子系统，但 tail 仍然无法正常工作。

[https://github.com/dtruel/mongo-live-logger](https://github.com/dtruel/mongo-live-logger)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-05-24T06:42:45.063

```
db.adminCommand( { getLog: "*" } ) 
```

然后

```
db.adminCommand( { getLog : "global" } ) 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-09-09T11:27:26.180

这是很久以前问过的，但这仍然可以帮助某人：

MongoDB 探查器记录上限集合**system.profile**中的所有查询。看到这个：[数据库探查器](https://docs.mongodb.com/manual/tutorial/manage-the-database-profiler/)

1.  `--profile=2`使用启用记录所有查询 的选项启动 mongod 实例，**或者**如果 mongod 实例已经在运行，从 mongoshell，`db.setProfilingLevel(2)`在选择数据库后运行。（可以通过 验证 `db.getProfilingLevel()`，应该返回`2`）
2.  在此之后，我创建了一个脚本，它利用 mongodb 的可尾[游标](https://docs.mongodb.com/manual/core/tailable-cursors/)来尾随这个 system.profile 集合并将条目写入文件中。要查看日志，我只需要尾随它：`tail -f ../logs/mongologs.txt`. 这个脚本可以在后台启动，它会将数据库上的所有操作记录在文件中。

我的 system.profile 集合的可尾光标代码在 nodejs 中；它记录所有操作以及在每个 MyDb 集合中发生的查询：

```
const MongoClient = require('mongodb').MongoClient;
const assert = require('assert');
const fs = require('fs');
const file = '../logs/mongologs'
// Connection URL
const url = 'mongodb://localhost:27017';

// Database Name
const dbName = 'MyDb';
//Mongodb connection

MongoClient.connect(url, function (err, client) {
   assert.equal(null, err);
   const db = client.db(dbName);
   listen(db, {})
});

function listen(db, conditions) {
var filter = { ns: { $ne: 'MyDb.system.profile' } }; //filter for query
//e.g. if we need to log only insert queries, use {op:'insert'}
//e.g. if we need to log operation on only 'MyCollection' collection, use {ns: 'MyDb.MyCollection'}
//we can give a lot of filters, print and check the 'document' variable below

// set MongoDB cursor options
var cursorOptions = {
    tailable: true,
    awaitdata: true,
    numberOfRetries: -1
};

// create stream and listen
var stream = db.collection('system.profile').find(filter, cursorOptions).stream();

// call the callback
stream.on('data', function (document) {
    //this will run on every operation/query done on our database
    //print 'document' to check the keys based on which we can filter
    //delete data which we dont need in our log file

    delete document.execStats;
    delete document.keysExamined;
    //-----
    //-----

    //append the log generated in our log file which can be tailed from command line
    fs.appendFile(file, JSON.stringify(document) + '\n', function (err) {
        if (err) (console.log('err'))
    })

});

} 
```

对于使用 pymongo 在 python 中的可尾游标，请参考以下代码，该代码过滤 MyCollection 并且仅插入操作：

```
import pymongo
import time
client = pymongo.MongoClient()
oplog = client.MyDb.system.profile
first = oplog.find().sort('$natural', pymongo.ASCENDING).limit(-1).next()

ts = first['ts']
while True:
    cursor = oplog.find({'ts': {'$gt': ts}, 'ns': 'MyDb.MyCollection', 'op': 'insert'},
                        cursor_type=pymongo.CursorType.TAILABLE_AWAIT)
    while cursor.alive:
        for doc in cursor:
            ts = doc['ts']
            print(doc)
            print('\n')
        time.sleep(1) 
```

**注意：Tailable 光标仅适用于有上限的集合。它不能用于直接记录对集合的操作，而是使用过滤器：`'ns': 'MyDb.MyCollection'`**

*注意：我知道上面的 nodejs 和 python 代码可能对某些人没有太大帮助。我刚刚提供了代码供参考。*

使用此链接在您的语言/驱动程序选择中查找可尾光标的文档[Mongodb Drivers](https://docs.mongodb.com/ecosystem/drivers/)

我在此[logrotate](https://linux.die.net/man/8/logrotate)之后添加的另一个功能。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-12-17T18:25:58.280

试试这个包来跟踪所有查询（没有 oplog 操作）：[https ://www.npmjs.com/package/mongo-tail-queries](https://www.npmjs.com/package/mongo-tail-queries)

（免责声明：我写这个包正是为了这个需要）*

# excel - 删除两张“区分大小写”的工作表之间的重复项

> ID：15204343
> 
> 赞同：0
> 
> 时间：2013-03-04T14:53:38.733
> 
> 标签：excel, vba

我想在 excel 中比较两张表，如果 vba 发现重复，它将删除它们。我搜索了一段时间，终于在这里找到了我想要的东西。“[如何快速删除两个excel表之间的重复vba](https://stackoverflow.com/questions/13665305/how-do-i-delete-duplicates-between-two-excel-sheets-quickly-vba) ”

但就我而言，这对我不起作用。因为这个脚本认为 abc 和 AbC 是重复的。那么无论如何要修改脚本，以便所有字母都区分大小写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:16:37.167

更改字典的 CompareMode。有关详细信息，请查看此处：http: [//msdn.microsoft.com/en-us/library/a14xez73 (v=vs.84).aspx](http://msdn.microsoft.com/en-us/library/a14xez73(v=vs.84).aspx)

```
Dim dict As Object
Set dict = CreateObject("Scripting.Dictionary")
' add this line:
dict.CompareMode = BinaryCompare 
```

# google-app-engine - GAE 的 appspot.com 缓存控制标头 - HTTP STATUS 304

> ID：15204345
> 
> 赞同：2
> 
> 时间：2013-03-04T14:53:45.137
> 
> 标签：google-app-engine

我的 GAE 开发（Java）上有很多鼠标悬停图像。我在appspot.com 上托管了它。我得到的当前缓存控制标头 = 无缓存，重新验证。因此，当图像悬停并鼠标移出时，它将重新加载图像，然后这就是延迟出现的地方......

我不知道如何处理这个问题。请帮忙（Java解决方案）？

已编辑 ==>

应用引擎.xml

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
    <application>s~xxxxxx</application>

    <version>1</version>

    <static-files>
        <include path="/images/**" expiration="1d" />
        <include path="/scripts/**" expiration="1d" />
        <include path="/stylesheets/**" expiration="1d" />
        <include path="/*.p12" expiration="1d" />
        <include path="/favicon.ico" expiration="1d" />
    </static-files>

    <threadsafe>true</threadsafe>

    <warmup-requests-enabled>true</warmup-requests-enabled>

    <system-properties>
        <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
    </system-properties>

    <sessions-enabled>true</sessions-enabled>
</appengine-web-app> 
```

当部署后第一次加载图像（[http://xxx.appspot.com/images/myicon.png](http://xxx.appspot.com/images/myicon.png)）时，我会得到这样的东西。有 2 个缓存控制...我猜“无缓存”缓存控制取代了早期的私有缓存控制。

![响应头 1](../Images/e78a23d35b71ef0f56e0dd3f4c8651f0.png)

但是，如果我再次刷新该页面，它将返回 http 1.1 304 Not Modified。

![响应标头2](../Images/33895259905f124caa2c2dd218833232.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:12:37.480

如果您以管理员身份登录，应用引擎将尝试抑制缓存行为。您可以通过注销或其他帐户尝试吗？

这是一个相关问题： [http ://code.google.com/p/googleappengine/issues/detail?id=8509](http://code.google.com/p/googleappengine/issues/detail?id=8509)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T23:03:27.227

我在使用 Google App Engine for Java 配置浏览器缓存和在静态文件上定义 Expires 标头时也遇到了一些问题。问题是 web.xml 中的过滤器映射否决了静态文件的配置。我在这里记录了问题和解决方案： [How to set Expires headers on static files with Google App Engine](http://www.whizu.org/articles/how-to-set-expires-headers-on-static-files-with-google-app-engine.whizu)。检查或共享您的 web.xml 文件可能会很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T00:08:40.907

它必须是Java解决方案吗？避免 Web 请求和延迟（在第一个请求之后）的纯 CSS 解决方案怎么样？如果您将所有翻转图像放在一个图像中，并将每个翻转图像（精灵）的坐标放入 CSS 中，您将几乎立即以浏览器显示它们的速度看到图像。

以下是精灵信息的一些链接：

*   [CSS Sprites 的奥秘：技术、工具和教程](http://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)
*   [无预载快速翻转](http://wellstyled.com/css-nopreload-rollovers.html)
*   [CSS 精灵](http://davidwalsh.name/css-sprites)

最后一个链接使用此示例 CSS：

```
#logo-link
{
width:191px;
height:151px;
text-decoration:none;
display:block;
background-image:url(dw-logo-sprite.jpg);
background-position:191px 0;
}
#logo-link:hover,#logo-link:active  { background-position:0 0; } 
```

基本上，您在 CSS 中声明图像的 URL 一次并包含第一个精灵的几何形状。悬停时，它会更改几何图形以使用第二个精灵（同一图像的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-23T12:16:48.943

如果您出于某种原因想从 servlet 提供图像，那么您可以`cache-control`使用 Jersey 设置响应标头：

```
@GET
@Path("/{url}/{maxHeight}")
@Produces("image/jpeg")
public Response view(
        @Context HttpServletRequest req,
        @PathParam("url") String url,
        @PathParam("maxHeight") int maxHeight
) throws IOException, URISyntaxException {
    ... [code to generate imageData]
    return Response
            .ok(imageData)
            .cacheControl(CacheControl.valueOf("max-age=2592000"))
            .build();
} 
```

```

# javascript - photoswipe - 在画廊展示期间添加图像

> ID：15204346
> 
> 赞同：1
> 
> 时间：2013-03-04T14:53:47.757
> 
> 标签：javascript, jquery, photoswipe

我知道使用 jquery 将图像添加到 photoswipe 列表很简单，但我不知道如何在浏览图库时更新图像列表，即不返回图像列表。我发现的另一种选择（没有 jquery，因为它直接将图像添加到 photoswipe 实例）是使用下面的代码，但似乎在图库中更新列表的唯一可能性是返回到第一张图像（在去之前对于第一张图片，一切都是一团糟）。浏览图库时是否有刷新列表的功能？

```
for (i = 0; i < fileList.length; i++) { //add new image list
      console.log(fileList[i]);
      instance.cache.images.push(new Code.PhotoSwipe.Image.ImageClass(fileList[i], fileList[i].url, fileList[i].caption, ''));
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-02T12:34:05.603

即使图库当前打开，您也可以将图像添加到 PhotoSwipe。

这是[文档中的一个示例（请参阅](http://photoswipe.com/documentation/api.html)*动态添加幻灯片*一章），其中**pswp**是您的 PhotoSwipe 对象（*new PhotoSwipe()*返回的内容）。

```
pswp.items.push({
  src: "path/to/image.jpg", 
  w:1200,
  h:500 
}); 
```

它适用于 PhotoSwipe v4.1.1

# javascript - 如何为动态表中的每个文本框添加大写函数？

> ID：15204347
> 
> 赞同：0
> 
> 时间：2013-03-04T14:53:48.787
> 
> 标签：javascript, html, dynamic, html-table

我正在尝试使用文本框创建一个动态表，但我希望每次编写时都将文本框转换为大写。

关于如何做到这一点的任何想法？

目前这是我做动态表的方式：

```
var n = 1;
function addRow(tableID,nroColumna) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    for(i=0;i<nroColumna;i++){

        var cell = row.insertCell(i);
        var element = document.createElement("input");
        element.type = "text";
        element.name = n+"0"+i;
        element.size = "12";
        element.id = n+"0"+i;

        //element.onkeyup = function(){alert()};
        cell.appendChild(element);
    }
    n++;
} 
```

我试图做一个`document.getElementById(element.id).value.toUpperCase()`，但我收到一个错误，element.id 的值为空

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:57:09.313

如果您对非 JavaScript 解决方案感到满意，则可以将其`CSS`应用于您的输入：

```
text-transform: uppercase; 
```

这将使文本从一开始就大写......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:04:16.903

Darkajax 的解决方案有效，您可以将其定位到具有特定 ID 的表中的输入

和

```
#tableid input
{
    text-transform: uppercase;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:27:21.970

我在激活 onkeyup 功能的情况下测试了您的代码：

```
var n = 1;
function addRow(tableID,nroColumna) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    for(i=0;i<nroColumna;i++){

        var cell = row.insertCell(i);
        var element = document.createElement("input");
        element.type = "text";
        element.name = n+"0"+i;
        element.size = "12";
        element.id = n+"0"+i;

        element.onkeyup = function(){alert(element.id);};
        cell.appendChild(element);
    }
    n++;
} 
```

这奏效了。但是，它使用为每次调用函数计算的最后一个 element.id ......所以，当我创建一行 3 个单元格时，每次我输入一个单元格时，无论我输入哪个单元格，它都会提醒“102”在。

这是因为 onkeyup 函数是*动态*的。它在 keyup 操作上调用 - 在创建对象时未设置。*所以它使用的是在操作时存在*的 element.id 值，而不是你第一次传递它时的值。我希望这是有道理的。

我自己在最近的一个项目中遇到了这个问题。一种解决方案是为 for 循环的内部工作创建一个单独的函数，如下所示：

```
var n = 1;

function createRow (n, i) {
    var element = document.createElement("input");
    element.type = "text";
    element.name = n+"0"+i;
    element.size = "12";
    element.id = n+"0"+i;

    element.onkeyup = function(){alert(element.id);};

    return element;
}
function addRow(tableID,nroColumna) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    for(i=0;i<nroColumna;i++){
        var cell = row.insertCell(i);
        element = createRow(n, i);
        cell.appendChild(element);
    }
    n++;
} 
```

此代码提醒正确的 element.id 值。

编辑：您可以将 onkeyup() 行更改为：

```
element.onkeyup = function(){document.getElementById(element.id).value = document.getElementById(element.id).value.toUpperCase();}; 
```

它应该按照您的意愿工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:09:00.570

使用 jQuery 会像

```
$('.yourClass').val($(this).val().toUpperCase()); 
```

或者

```
$('#yourId').css({'text-transform' : 'uppercase'}) 
```

# symfony - symfony2 orm 原则中与额外字段的多对多关系

> ID：15204349
> 
> 赞同：0
> 
> 时间：2013-03-04T14:54:04.510
> 
> 标签：symfony, orm, many-to-many, entity-relationship

嗨，我和这里有同样的问题：[多对多自我关系与额外字段？](https://stackoverflow.com/questions/9134856/many-to-many-self-relation-with-extra-fields)但我找不到答案：/我首先尝试了 ManyToOne 并在另一个站点 OneToMany ......但后来我无法使用类似的东西

```
 public function hasFriend(User $user)
{
    return $this->myFriends->contains($user);
} 
```

因为有一些这个问题：

```
This function is called, taking a User type $user variable and you then use the contains()      function on $this->myFriends. 
```

$this->myFriends 是请求的 ArrayCollection（与 User 的类型如此不同），并且来自关于 contains() 的原则文档：

```
The comparison of two elements is strict, that means not only the value but also the type must match. 
```

那么用额外字段解决这种多对多关系的最佳方法是什么？或者，如果我要回去设置 onetomany 和 manytoone 关系，我该如何修改 hasFriend 方法？例如检查 ID 是否在 ID 的数组集合中。

编辑：我有这张桌子......我需要的是：1.选择我的朋友......和我的追随者......检查我是否与他成为朋友。（因为他可以和我成为朋友，而我不必和他在一起......就像在推特上一样）。我可以做很多，但我需要额外的字段，例如：“查看”“他订阅我的时间”，正如您在我的桌子上看到的那样。

并进行这样的查询，然后能够在树枝中检查是否（app.user.hasFriend（follower）或类似的东西）

```
 $qb = $this->createQueryBuilder('r')
                  ->select('u')
                  ->innerJoin('UserBundle:User', 'u')
                  ->Where('r.friend_id=:id')
                  ->setParameter('id', $id)
                  ->orderBy('r.time', 'DESC')
                  ->setMaxResults(50);

    return $qb->getQuery()
              ->getResult(); 
```

![在此处输入图像描述](../Images/24d20b1a11c9cc8f9d2d0b9e1a4f7b7a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T15:55:51.243

我试图与额外的字段建立多对多的关系，但也无法让它发挥作用......我在论坛上读到的东西（不记得在哪里）是：

> 如果您将数据添加到关系中，那么它就不再是关系了。这是一个新实体。

这是正确的做法。使用新字段创建新实体，如果需要，创建自定义存储库以添加所需方法。

A <--- 多对多字段 ---> B

会成为

A --一对多--> C（带有新字段）<--一对多--B

当然，C 与 A 和 B 都有 ManyToOne 关系。

我到处搜索如何做到这一点，但最后，这是正确的做法，如果添加数据，它不再是关系。

您还可以复制 contains 通常执行的操作，或尝试在自定义存储库中覆盖它，以执行您需要它执行的任何操作。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T21:38:17.653

我正在添加另一个答案，因为它与我的原始答案无关。使用您发布的新信息，我将您发布的表/实体称为“关注者”。原始实体“用户”。

如果您创建以下关联会发生什么：

```
 namespace Acme\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Acme\UserBundle\Entity\User
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class User
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\OneToMany(targetEntity="Acme\FollowerBundle\Entity\Follower", mappedBy="followeduser")
     */
    protected $followers;

    /**
     * @ORM\OneToMany(targetEntity="Acme\FollowerBundle\Entity\Follower", mappedBy="followeeuser")
     */
    protected $followees;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }
    public function __construct()
    {
        $this->followers = new \Doctrine\Common\Collections\ArrayCollection();
    $this->followees = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add followers
     *
     * @param Acme\FollowerBundle\Entity\Follower $follower
     */
    public function addFollower(\Acme\FollowerBundle\Entity\Follower $follower)
    {
        $this->followers[] = $follower;
    }

    /**
     * Add followees
     *
     * @param Acme\FollowerBundle\Entity\Follower $followee
     */
    public function addFollowee(\Acme\FollowerBundle\Entity\Follower $followee)
    {
        $this->followees[] = $followee;
    }    

    /**
     * Get followers
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getFollowers()
    {
        return $this->followers;
    }

    /**
     * Get followees
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getFollowees()
    {
        return $this->followees;
    }
} 
```

```
 namespace Acme\FollowerBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Acme\FollowerBundle\Entity\Follower
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Follower
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="Acme\UserBundle\Entity\User", inversedBy="followers")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     */
    protected $followeduser;

    /**
     * @ORM\ManyToOne(targetEntity="Acme\UserBundle\Entity\User", inversedBy="followees")
     * @ORM\JoinColumn(name="followee_id", referencedColumnName="id")
     */
    protected $followeeuser;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set followeduser
     *
     * @param Acme\UserBundle\Entity\User $followeduser
     */
    public function setFolloweduser(\Acme\UserBundle\Entity\User $followeduser)
    {
        $this->followeduser = $followeduser;
    }

    /**
     * Get followeduser
     *
     * @return Acme\UserBundle\Entity\User 
     */
    public function getFolloweduser()
    {
        return $this->followeduser;
    }

    /**
     * Set followeeuser
     *
     * @param Acme\UserBundle\Entity\User $followeeuser
     */
    public function setFolloweeuser(\Acme\UserBundle\Entity\User $followeeuser)
    {
        $this->followeeuser = $followeeuser;
    }

    /**
     * Get followeeuser
     *
     * @return Acme\UserBundle\Entity\User 
     */
    public function getFolloweeuser()
    {
        return $this->followeeuser;
    }
} 
```

我不确定这是否会奏效，我真的没有太多时间来测试它，但如果没有，我认为它正在路上。我使用两个关系，因为你不需要多对多。你需要参考一个用户可以有很多关注者，一个关注者可以关注很多用户，但是由于“用户”表是同一个，我做了两个关系，它们彼此无关，他们只是引用相同的实体，但用于不同的事物。

试试这个并试验会发生什么。您应该能够执行以下操作：

```
 $user->getFollowers();

$follower->getFollowedUser();

and you could then check if a user is being followed by a follower whose user_id equals $userThatIwantToCheck

and you could search in Followers for a Follower whose user = $user and followeduser=$possibleFriend 

```

# actionscript-3 - 在点击动作脚本上更改变量

> ID：15204352
> 
> 赞同：1
> 
> 时间：2013-03-04T14:54:13.583
> 
> 标签：actionscript-3, actionscript

我想知道如何使用 actionscript 在点击时更改变量。

我有 ：

```
 private var test:int   = 0;

     public function thisIsTest():void{
         test = test + 1;
        }

     <mx:Image left="10" bottom="10" source="@Embed(source='Assets/blabla.png')" click="thisIsTest()" buttonMode="true"/> 
```

每次单击“blabla”按钮时，我都想在变量 test 中添加 1。

问题是它只能工作一次。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:11:02.137

最简单的方法是使用`MouseEvent`监听器。您将侦听器附加到您想要单击的任何内容上，并告诉侦听器在触发事件时执行哪个函数：

```
var test:int = 0;

image.addEventListener(MouseEvent.CLICK, thisIsTest);
// Will 'listen' for mouse clicks on image and execute thisIsTest when a click happens

public function thisIsTest(e:MouseEvent):void
{
    test = test + 1;
    trace(test);
}

// Output on subsequent clicks
// 1
// 2
// 3
// 4 
```

这确实意味着您想要将侦听器附加到的图像需要是一个显示对象，例如精灵或影片剪辑，但如果您使用的是 Flash，这应该不是问题。

编辑：评论中指出的进一步行动。

将图像导入 Flash 并使用它生成`Sprite`or`Movieclip`并给它一个 Actionscript 链接 ID（如类名）：

![将图像导入库](../Images/a2e4f703705e58a02368a839278060cf.png)

```
// Add the image to the stage
var img:myImage = new myImage();
addChild(img);

// Assign the mouse event listener to the image
img.addEventListener(MouseEvent.CLICK, thisIsTest); 
```

# ios - -[__NSDictionaryM intValue]：无法识别的选择器发送到实例 0x13f26a60

> ID：15204360
> 
> 赞同：0
> 
> 时间：2013-03-04T14:54:38.997
> 
> 标签：ios, objective-c, core-data

我正在尝试获取核心数据库的记录，但它给了我以下错误。

**错误**-[__NSDictionaryM intValue]：无法识别的选择器发送到实例 0x13f26a60

在线的

```
NSArray *results = [moc executeFetchRequest:request error:&error]; 
```

这是获取请求的完整代码。

```
NSManagedObjectContext *moc = [delegate managedObjectContext];

NSPredicate *predicate =[NSPredicate predicateWithFormat:@"NOT (serverId IN %@)", a];
[request setEntity:[NSEntityDescription entityForName:@"Categories" inManagedObjectContext:moc]];
[request setPredicate:predicate];

NSError *error = nil;
id results = [moc executeFetchRequest:request error:&error];
NSLog(@"results %@",results);
// error handling code
[request release]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T15:48:27.720

我*假设*您的数组`a`不包含数字，而是字典，例如：

```
NSArray *a = @[
                  @{@"serverId" : @"2", ...},
                  @{@"serverId" : @"4", ...}
              ]; 
```

因为这会导致您收到的错误消息。

您必须创建一个仅包含“serverId”数字的数组，并在谓词中使用它：

```
NSArray *serverIds = [a valueForKey:@"serverId"];
NSPredicate *pred = [NSPredicate predicateWithFormat:@"NOT (serverId IN %@)", serverIds]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T20:40:35.280

我和 Developer 有同样的问题，但在我的情况下，错误是我使用了错误的转换说明符。我的数组包含 NSNumber 对象，我`%ld`用作转换说明符。我确实将转换说明符更改`%@`为 Martin R 建议的那样，它就像一个魅力。

希望这可以帮助某人。

# graphics - 是否有一个跨平台的桌面框架可以利用 .NET 和 Cocoa 等本地库？

> ID：15204362
> 
> 赞同：2
> 
> 时间：2013-03-04T14:54:49.543
> 
> 标签：graphics, cross-platform, desktop-application

我正在启动一个与图形高度相关的项目（想想，用图层绘制应用程序）。

无论如何，我在 C#、Java、JavaScript 和 Ruby 方面有着悠久的历史。此应用程序将是开源的。

但我正在寻找的是一个“构建一次，随处使用”的框架。我研究过的大多数平台要么似乎过于过时、过于复杂，要么就是不合适。

我已经研究过`Swing`, `WindowBuilder`,`wxRuby`等。有很多选择，但没有一个看起来足够现代，有很好的文档等。

我多年来一直是`C#`桌面开发人员，所以如果我只针对 Windows，我会很容易地走这条路。但我希望我的应用程序也能在 Mac 上运行。但是，我希望 Mac 版本看起来像是专为 Mac 设计的，而 Windows 版本则是为 Windows 设计的，等等。我正在查看`Mono Project`当前。但是我的 Mac 用户安装 Mono 的想法对我没有吸引力。

任何基于 Ruby 的东西都会很酷，但不是必需的。

无论如何，有什么建议？我使用 NetBeans、Eclipse 和 Visual Studio。因此，如果必须，我不关心学习新的 IDE。我什至考虑过在 JavaScript 中完成这一切并使用画布，但由于我需要处理大型的本地二进制文件，我不知道这是否是一个不错的选择。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:14:46.537

[Real Studio](http://www.realsoftware.com)可以为 OS X、Windows 和 Linux 创建跨平台桌面应用程序。它还可以创建 Cocoa 应用程序，您可以在需要时使用它直接与 Cocoa 交互。

但是，Real Studio 创建的是 Win32 应用程序，而不是 .NET 应用程序，因此您不能直接与 .NET 库交互。

# ios - iphone、xcode、有效架构的重要性

> ID：15204363
> 
> 赞同：0
> 
> 时间：2013-03-04T14:54:51.620
> 
> 标签：ios, objective-c, xcode

我只是想知道在您的 xcode 项目中设置有效架构​​（ armv7、armvs ）的重要性是什么？这在 SDK 的哪个级别变得重要？核心数据？一些缓存问题？不是试图减少它，而是要了解它存在的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:21:46.267

根据[XCode Buid 设置参考](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW51)

指定可以为其构建二进制文件的体系结构。在构建期间，此列表与 ARCHS 构建设置的值相交；结果列表指定了二进制文件可以运行的架构。如果生成的架构列表为空，则目标不会生成二进制文件。

# android - Android 支持包文档

> ID：15204365
> 
> 赞同：1
> 
> 时间：2013-03-04T14:54:56.790
> 
> 标签：android, eclipse

在我的 Android 2.3.3 应用程序中，我想使用 Fragment，所以我安装了支持包。

我在 Eclipse 中使用过这个：

```
Right click on my project ---> Android Tool ---> Add Support Library 
```

片段工作正常，但它们没有代码文档，因此以这种方式开发非常令人沮丧。

如何将文档添加到我的代码中？

我发现了一些关于该问题的问题，但由于我使用 Eclipse 选项添加支持包，所以它不适合我的情况

注意：我没有添加支持库 jar 文件 - 我已经按照上面提到的方式安装

# iphone - 通过 Google Analytics 跟踪 iPhone 应用程序

> ID：15204369
> 
> 赞同：0
> 
> 时间：2013-03-04T14:55:00.997
> 
> 标签：iphone, google-analytics, google-analytics-api

我已经在我的 iPhone 应用程序中实现了新的 Google Analytics 跟踪，我可以在我的 Google Analytics 报告屏幕中看到数据。

但是，我想提取这些数据并使用 Core Reporting API 将其显示在我的网站上。我使用“访问”指标上的 ga:pagePath 过滤器获取网站的页面浏览量。但是，我找不到任何有关如何从报告中提取 Screens 数据的文档。有人找到了吗？

理想情况下，我想按屏幕名称过滤屏幕并获取查看次数。我发现的唯一指标是 ga:appviews，它返回我的 appViews 总数，所以我要过滤屏幕名称，我该怎么做？

谢谢你尽你所能的帮助！

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:13:09.877

我认为谷歌只是忘记了他们应该在其中创建的 ga:screenName：

[https://developers.google.com/analytics/devguides/reporting/core/dimsmets/apptracking#ga:uniqueAppviews](https://developers.google.com/analytics/devguides/reporting/core/dimsmets/apptracking#ga:uniqueAppviews)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T14:45:35.643

ga:screenViews 现在运行良好！:-)

你还有：ga:screenName 和 ga:uniqueScreenViews

# dynamics-crm-2011 - CRM2011 解决方案导入失败。在哪里可以找到错误报告

> ID：15204372
> 
> 赞同：0
> 
> 时间：2013-03-04T14:55:06.830
> 
> 标签：dynamics-crm-2011

删除 custom.xml 中的自定义功能区按钮后，我正在尝试导入解决方案。但它在导入时失败，没有显示任何错误信息。我在哪里可以得到这个错误信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:58:06.220

通常，当导入失败时，它会为您提供下载日志文件的选项，如果您在 Excel 中打开它，第二个选项卡将显示针对各个组件的错误状态。

如果您无法从此处获取日志文件，另一种方法是查看 ImportJob 视图。这有一个“数据”列，其信息与导入日志文件的信息相同。

# php - 格式化数字，如 Facebook“喜欢” - PHP

> ID：15204377
> 
> 赞同：-5
> 
> 时间：2013-03-04T14:55:22.123
> 
> 标签：php, numbers, format

我需要一个 PHP 函数来格式化 Facebook“喜欢”之类的数字。

例子：

12345 = 12,3 千

123456 = 123 千

1234567 = 1,23 M

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:01:43.587

写一个函数来做这个！？

```
function format_num($n) {
    $s = array("K", "M", "G", "T");
    $out = "";
    while ($n >= 1000 && count($s) > 0) {
        $n = $n / 1000.0;
        $out = array_shift($s);
    }
    return round($n, max(0, 3 - strlen((int)$n))) ." $out";
} 
```

# java - Solr Beans（无效的setter方法。必须只有一个参数）没有任何理由？

> ID：15204380
> 
> 赞同：1
> 
> 时间：2013-03-04T14:55:30.810
> 
> 标签：java, solr, lucene, javabeans

目前，我在 Solr 4.1 与 Lucene 4.1 结合时遇到以下问题。

我有一个像这样的 Solr-Bean：

```
import org.apache.solr.client.solrj.beans.Field;

public final class Bean {

    @Field
    private int someInt;
    @Field
    private String someString;
    //Fields like this are just being updated for easier use of the bean
    private List<Integer> someStringSplitIntoIntegers

        //setters, rest is the same:
        public void setSomeInt(int someInt) {
            this.someInt = someInt;
        }

        //getters straightforward...

} 
```

现在我想通过 HttpSolrServer.addBean(bean) 将 bean 添加到 Solr 数据库，我得到以下异常：

```
Exception in thread "main" org.apache.solr.client.solrj.beans.BindingException: Invalid setter method. Must have one and only one parameter
    at org.apache.solr.client.solrj.beans.DocumentObjectBinder$DocField.storeType(DocumentObjectBinder.java:202)
    at org.apache.solr.client.solrj.beans.DocumentObjectBinder$DocField.<init>(DocumentObjectBinder.java:150)
    at org.apache.solr.client.solrj.beans.DocumentObjectBinder.collectInfo(DocumentObjectBinder.java:119)
    at org.apache.solr.client.solrj.beans.DocumentObjectBinder.getDocFields(DocumentObjectBinder.java:99)
    at org.apache.solr.client.solrj.beans.DocumentObjectBinder.toSolrInputDocument(DocumentObjectBinder.java:73)
    at org.apache.solr.client.solrj.SolrServer.addBean(SolrServer.java:136)
    at org.apache.solr.client.solrj.SolrServer.addBean(SolrServer.java:125)
    (...my call...) 
```

但我不明白为什么。我多次为每个 setter 提供多个参数的类，但没关系（它甚至是由 Eclipse 生成的）。

现在的问题是：

我错过了什么？这可能是什么原因？schema.xml 中缺少的条目是否会导致这些错误（我怀疑...）？

提前致谢。

马丁·布劳恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:15:08.517

`Field`可以直接在 setter 方法上使用注释：

```
 @Field("cat")
   public void setCategory(String[] c){
       this.categories = c;
   } 
```

确保您`int`在 solr 中有一个`schema.xml`名为 someInt的字段

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:17:45.757

已经自己修好了。

从评论：

行。似乎是固定的。我也在 getter 上使用了@Field，这会导致错误。我已经尝试将其删除，但随后又出现了另一个错误。所以我把它改回来了。此外，Solr Bean 不符合 boolean isBoolean() 方法（这导致了新错误）。– Martin Braun 刚刚编辑

# logging - 如何使用 Microsoft 日志记录应用程序块将堆栈跟踪存储在数据库中

> ID：15204382
> 
> 赞同：1
> 
> 时间：2013-03-04T14:55:33.370
> 
> 标签：logging, enterprise-library-5, logging-application-block

嗨，我有一个数据库跟踪侦听器，当我遇到错误时，我想在数据库上记录堆栈跟踪。我可以很容易地将堆栈跟踪添加到消息中，但我更愿意将它添加到数据库表中的另一列。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T03:42:47.997

[您可以在Enterprise Library Sample Projects](https://entlib.codeplex.com/wikipage?title=Sample%20Projects)找到一个名为 Custom Database Trace Listener Sample 的示例解决方案。

基本步骤是创建具有自定义属性的自定义 LogEntry 类。[Log] 表中添加了一个附加列，并且现成的存储过程被修改为接受一个新参数。然后，自定义跟踪侦听器将自定义属性数据传递到存储过程，并将其插入数据库。

# javascript - JavaScript 没有按照我的要求做！这是为什么？

> ID：15204386
> 
> 赞同：2
> 
> 时间：2013-03-04T14:55:47.393
> 
> 标签：javascript, html

我正在使用 JavaScript 检查变量以查看它是否包含“http://”，如果不包含，则将 http 附加到它。使用下面的代码，但我得到的只是页面刷新`/?myURL=`并附加到浏览器地址栏。删除该`if(getUrl.indexOF("http://" == -1)`部分将使代码正常工作，但将缺少它包含的功能。我无法弄清楚我哪里出错了。我是否错过了 if else 语句中的中断或返回？

```
function placeUrl()
    {
    var str1 = "http://"
    var getUrl;
    var newUrl;

    getUrl = document.getElementById('usersUrl').value;

    if(getUrl != null)
        {
        if(getUrl.indexOf("http://" == -1)
            {
            newUrl = str1.concat(getUrl);
            }
        else
            {
            newUrl = getUrl;
            }

        document.getElementById('iframe1').src = newUrl;
        }

    return false;
    } 
```

还有我的 HTML：

```
<form onSubmit="return placeUrl()">
    <input id="usersUrl" type="text" name="myURL" value="Enter a URL..." onblur="if (this.value == '') {this.value = 'Enter a URL...';}" onfocus="if (this.value == 'Enter a URL...') {this.value = '';}">
    <input type="submit" value="Analyse">
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T14:58:53.773

我相信你遇到的问题是你错过了一个大括号。将行更改为：

```
if(getUrl.indexOf("http://"/*HERE*/)/*HERE*/ == -1) 
```

我添加了注释以指出缺少的括号。

# ejb - InitialContext.lookup(ejbMappedName) 返回一个新实例或一个旧的相同实例

> ID：15204388
> 
> 赞同：0
> 
> 时间：2013-03-04T14:55:56.147
> 
> 标签：ejb, stateful, initial-context

对于有状态的 EJB，如果我使用 InitialContext.lookup(itsMappedName) 获取它的引用，对于 (InitialContext.lookup(itsMappedName)) 的每次调用，它将返回一个新的有状态 EJB 还是相同的有状态 EJB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:40:08.170

```
public class SFEJB implements EJBRemote{
  //.....
}

public class Class1{
  void method1{
    InitialContext ctx = new InitialContext(env);            
    EJBRemote testEJB= (EJBRemote)ctx.lookup(mappedName#fullclassname);
    //.....
  }
} 
```

我发现它将为每个 initialcontext.lookup(mappedName#fullclassname) 返回一个新的有状态 EJB (SFEJB)。
起初，我认为“有状态 EJB”中的“有状态”意味着对于同一个 Web 客户端，每次调用 initialContext.lookup(mappedName#fullclassname) 都会得到相同的有状态 EJB，但现在我知道“有状态”只是对于 testEJB 意味着，每个方法调用都会调用同一个 SFEJB 实例（因此处于一种状态）。
那么 testEJB 是 SFEJB 的 EJB Client 吗？（SFEJB记得testEJB）

# opencv - 使用 OpenCV 寻找戴特定帽子的人

> ID：15204391
> 
> 赞同：1
> 
> 时间：2013-03-04T14:56:10.993
> 
> 标签：opencv, image-processing, computer-vision, video-processing

我想使用计算机视觉来执行以下操作：

一台摄像机安装在建筑物外，捕捉下方街道的视频流。摄像机安装在街道上方约 5-6 米处。

每当相机捕捉到一个戴着某种帽子（白色，圆形）的人时，就应该触发一个事件。

我应该研究哪种算法来实现这种行为？

这最好通过使用样本数据训练算法来实现，还是有另一种方法告诉它寻找这种类型的帽子？

另外，如何使用多帧视频来提高检测质量？

![戴着白色圆帽的美人](../Images/682292600f1c827103bfb95cfeba08e6.png)

编辑：添加了帽子的图片

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:46:10.483

在我们在评论中做所有事情之前，我将在这里开始回答。

您发布的第一个[链接](http://aishack.in/tutorials/tracking-colored-objects-in-opencv/)描述了一个简单的基于颜色的检测。你可以试试，但如果图像中有其他类似颜色的像素簇，它会失败。您将其与跟踪相结合的想法很好：识别集群，在多张图像上构建轨迹，并且只接受合理的轨迹作为命中。对于稳健的跟踪，您可能需要研究[卡尔曼滤波](http://en.wikipedia.org/wiki/Kalman_filter)。您最有可能遇到的一个问题是，在您的相机拍摄的图像中，“白色”帽子几乎不会是“白色”的。

您提到的第二个[链接](http://note.sonots.com/SciSoftware/haartraining.html)- 基于 Haar 类特征的增强分类器 - 用于检测更复杂的对象。它可能无法帮助您找到白色斑点。投入时间和精力学习跟踪。

我很高兴在这里重复我自己：“解决计算机视觉问题”不像“排序数组”。OpenCV 不是 C++ 标准库。您可以在`std::map`不了解红黑树的情况下使用 an 。但是（恕我直言）您不能在不了解大量数学和[理论](http://szeliski.org/Book/)的情况下使用 Vision API 。工作解决方案计算机视觉通常针对特定的问题场景进行大量调整。对不起，如果这听起来很迂腐，但它解释了为什么你的问题被打败了。

# doctrine-orm - Doctrine2 + Zend Framework 2 - EntitiesManager 作为控制器中的变量

> ID：15204395
> 
> 赞同：1
> 
> 时间：2013-03-04T14:56:28.197
> 
> 标签：doctrine-orm, zend-framework2

我想在我的控制器上设置 EntityManager 实例。我希望在控制器上可以使用 $this->em 的实例。这是我的配置：

模块.config.php

```
[...]
'doctrine' => array(
    'driver' => array(
        'application_entities' => array(
            'class' =>'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/Application/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                'Application\Entity' => 'application_entities'
            ),
        ),
    ),
),  
'di' => array(
    'instance' => array(
        'alias' => array(
            'application' => 'Application\Controller\IndexController',
        ),
        'Application\Controller\IndexController' => array(
            'parameters' => array(
                'em' => 'doctrine_em',
            ),
        ),
    ),
), 
```

索引控制器.php

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use \Doctrine\ORM\EntityManager;

class IndexController extends AbstractActionController
{

protected $em;

public function setEm(EntityManager $em) {
    $this->em = $em;
    return $this;
}

public function indexAction() {
    $user1 = $this->em->find('\Application\Entity\User', 1);
    var_dump($user1->getFullname());
} 
```

我收到此错误：“**致命错误：在非对象上调用成员函数 find()** ”。似乎 EntityManager 没有正确实例化。

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T04:23:07.733

*   您不需要模块配置中的任何内容
*   你编辑 Module.php，onbootstrap 函数

    ```
    public function onBootstrap(\Zend\EventManager\EventInterface $e) {
         $serviceManager = $e->getApplication()->getServiceManager();
         $em = $serviceManager;

         $controllerLoader = $serviceManager->get('ControllerLoader');
         $controllerLoader->addInitializer(function ($controller) use ($em) {
             if (method_exists($controller, 'setEm')) {
                $controller->setEm($em);
             }
         });
    } 
    ```

*   控制器保持原样，带有 $em 字段和 setEm 方法

    ```
    //..
    protected $em;

    public function setEm(EntityManager $em) {
            $this->em = $em;
            return $this;
    }
    //.. 
    ```

# xml - In Marklogic, how can I efficiently deep-compare two xml documents?

> ID：15204400
> 
> 赞同：1
> 
> 时间：2013-03-04T14:56:39.653
> 
> 标签：xml, xpath, xquery, marklogic

I have a logging requirement to store the differences between old and new values when a (moderately complex) section of a document changes in our database. Only the changed data should be reported on. My current solution works reasonably well, but I have concerns that it's not optimal and may cause performance problems when updates start occurring in volume.

My current solution looks mostly like this:

```
for $element in $data/section//element()[text()]
return
  if (not($old-data//*[fn:name() = fn:name($element) and text() = $element/text()])) then
    element log:difference {
       ...
    }
  else () 
```

My problem is that the profiler shows this taking a (relatively) long time doing the thousands of comparisons that `//*[fn:name() = fn:name($element)]` construct leads to. It's only a couple of tens of milliseconds but with a lot of updates that's going to add up, and it feels like there should be a way to avoid it.

The structure of the xml is sufficiently well defined that I can be sure that a field in one document will have the same relative xpath as the other one, so technically my use of `//` could be removed, at the expense of manually walking the xml tree, but that's a reasonable amount of complexity and the structure is fairly flat so I'm not sure it would be very much more efficient.

Also, there are a finite set of fields that can be in this section of the document, so manually comparing each of them in turn (with fully qualified xpaths) would be an option, but I'd rather avoid it, since it would be best not to need to revisit this code in the future, should that list of fields change.

Are the solutions going to be along those lines, or is there something more obvious that I've missed?

Is there any way to construct the xpath using the string value of the element name directly without using a predicate? I'm assuming that would be more efficient, since xpath evaluation doesn't normally take as long as this.

Can I, perhaps, extract the relative xpath of an element then look at that precise place in the other document?

Am I missing a built-in xml comparison tool in marklogic itself?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:21:45.263

Using `fn:name` is a bad idea because it can be fooled by differences in namespace prefixes. It would be better to use `fn:node-name`. I would also avoid '//' wherever possible.

Getting back to the deep compare, this sounds like an XML diff. There is no XML diff tool built into MarkLogic, so it might be best to set one up as a REST-ish web service and use MarkLogic [http://docs.marklogic.com/xdmp:http-post](http://docs.marklogic.com/xdmp:http-post) to call it. There are quite a few XML diff tools out there.

If you want to stay in XQuery, the solution will probably be slower. I would start with a recursive tree-walk and `fn:deep-equal`. Whenever you find a diff for a simple element you can stop descending, which prunes the tree and limits the work to be done. Here's a very rough sketch of how that might work. It's a long way from a proper LCS [http://en.wikipedia.org/wiki/Diff](http://en.wikipedia.org/wiki/Diff) but it might be useful. On my laptop this runs in less than 10-ms.

```
declare function local:diff(
  $a as node(), $b as node())
as element(diff)*
{
  if (deep-equal($a, $b)) then ()
  else if (empty($a/*) or empty($b/*)) then element diff {
    element a { $a }, element b { $b } }
  else
    let $seq-a := $a/*
    let $seq-b := $b/*
    let $count := max((count($seq-a), count($seq-b)))
    return
      for $x in 1 to $count
      return local:diff($seq-a[$x], $seq-b[$x])
};

let $a := xdmp:query-meters()
let $_ := xdmp:sleep(1)
let $b := xdmp:query-meters()
return local:diff($a, $b) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:12:37.937

I would think it's worthwhile to try building an index, and benchmarking that approach.

I'm not well versed in marklogic, but they have what I recognize as an XSL key function in [their API docs](http://docs.marklogic.com/fn%3akey "Marklogic fn:key syntax")

(Update: this seems to only fetch keys. To create them, I'd guess you'd need to use XSLT directly. [This is a good how-to](http://developer.marklogic.com/blog/invoking-xslt "invoking xslt"). A small stylesheet generating keys on **element/@id** would be feasible.)

You could even add the stylesheet as a string, and save a little I/O time:

```
xdmp:xslt-eval(
  <xsl:stylesheet version="2.0"><xsl:key name="element_ids" match="element" use="@id"></xsl:stylesheet>,
  doc("input.xml")
) 
```

If every element has an identifier you can use as a key, you can build an index when you parse the file, then compare that list against a stored (earlier) version of keys. From there, you have your list of locations to handle, and thanks to the index, they are found and accessed quite quickly.

If you'd rather stick with XQuery, the ['map' function provides a similar interface.](http://docs.marklogic.com/map%3amap "Marklogic map API")

# asp.net-web-api - Web API ReadFromStreamAsync 未执行

> ID：15204402
> 
> 赞同：0
> 
> 时间：2013-03-04T14:56:41.950
> 
> 标签：asp.net-web-api

我有一个与自定义格式化程序相关的非常愚蠢的问题。

```
public class RequestHeaderJsonFormatter : MediaTypeFormatter
{
    public RequestHeaderJsonFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/xml"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/html"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/plain"));
    }

    public override System.Threading.Tasks.Task<object> ReadFromStreamAsync(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)
    {
        return base.ReadFromStreamAsync(type, readStream, content, formatterLogger);
    }

    public override bool CanReadType(Type type)
    {
       return true;
    }

    public override bool CanWriteType(Type type)
    {
        return true;
    }
} 
```

我在 Global.asax 中注册了格式化程序，如下所示：

protected void Application_Start() { GlobalConfiguration.Configuration.Formatters.Insert(0, new RequestHeaderJsonFormatter());

```
AreaRegistration.RegisterAllAreas();
WebApiConfig.Register(GlobalConfiguration.Configuration);
FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters); 
```

}

我的问题是 ReadFromStreamAsync 在执行控制器操作时永远不会被调用。

```
public class HomeController : ApiController
{
    public HttpResponseMessage GetString(string param)
    {
        var response = Request.CreateResponse(HttpStatusCode.OK, "ererrer");
        return response;
    }
} 
```

我做错了什么......我想不通。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:57:28.133

默认情况下，'string' 类型的动作参数应该从 Uri 中读取，除非使用 [FromBody] 属性来装饰它，在这种情况下格式化程序就会出现。

公共 HttpResponseMessage GetString(* *[FromBody]* *string param)

# jquery-mobile - jquery mobile中的页面转换时如何让ajax加载显示？

> ID：15204407
> 
> 赞同：0
> 
> 时间：2013-03-04T14:57:06.247
> 
> 标签：jquery-mobile

有时，它会显示，有时，不显示，那么，如何确保 ajax 加载指示器在 jquery mobile 中显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:15:17.217

除非您的应用程序出现重大问题，否则您所描述的都是正常情况。

虽然页面转换可能需要很长时间（桌面浏览器上的页面加载/转换时间通常为 670 毫秒），但页面加载到该页面**`DOM`**只需几毫秒（通常为 3-5 毫秒）。**`AJAX`**只有当页面加载（进入**`DOM`**）需要超过 10 毫秒时，加载程序才会显示。其他页面转换动作不计入**`AJAX`**调用，因此页面加载到**`DOM`**.

页面加载/转换期间的操作：

*   页面加载和处理：3ms（**`AJAX`**加载器仅在此操作期间显示，如果需要超过 10ms）
*   页面增强：45ms
*   过渡：604ms

要了解更多信息，请查看我的其他**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，或在**[此处](https://stackoverflow.com/questions/14468659/jquery-mobile-document-ready-vs-page-events/14469041#14469041)**找到它，搜索名为：**页面更改时间的章节**

还有一件事，除非您使用正常的页面加载**`AJAX`**加载器，否则不会显示（如果您的链接具有属性**`rel="external"`**或**`data-ajax="false"`**）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:11:00.570

为了确保默认情况下完成 ajax 导航，只要您不向链接和按钮添加 data-ajax="false" 属性，Jquery Mobile 就会将 ajax 导航添加到加载到 DOM 中的页面。否则，您可能已经添加了一个全局修改，该修改在某些页面上禁用了 ajax 导航。

或者，您可以在某些链接和按钮中将 rel="external" 作为属性，从而禁用 ajax 导航。

如果您可以更具体，即发布您的问题的 jsfiddle 示例，我可以给您一个更好的解释。另请提及您使用的 Jquery Mobile 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T19:37:47.287

当你这样做时：

```
$.mobile.changePage( "#page-home", { transition: "none"} ); 
```

添加这个：

```
$.mobile.showPageLoadingMsg(); 
```

不要忘记添加

```
$.mobile.hidePageLoadingMsg(); 
```

在 pageLoad 函数的末尾

# c# - 该帐户无权模拟请求的用户

> ID：15204411
> 
> 赞同：3
> 
> 时间：2013-03-04T14:57:11.123
> 
> 标签：c#, impersonation, exchangewebservices, exchange-server-2007, exchange-server-2010

尝试访问资源邮箱时出现此错误。请任何人帮助我。我是 EWS 的新手。

我可以通过 OWA（Outlook Web 应用程序）访问资源邮箱。但我不是这个邮箱的所有者，因为它是共享邮箱。

我的代码：

```
ServicePointManager.ServerCertificateValidationCallback = CertificateValidationCallBack;
ExchangeService newExchangeService = new ExchangeService  (ExchangeVersion.Exchange2007_SP1);
newExchangeService.Credentials = new NetworkCredential(username, password, domain);
newExchangeService.AutodiscoverUrl(email-id, RedirectionUrlValidationCallback);

newExchangeService.ImpersonatedUserId = new ImpersonatedUserId(ConnectingIdType.SmtpAddress, email_which_i_want_to_access);

Folder visitorsFolder = Folder.Bind(newExchangeService, WellKnownFolderName.Inbox);
foreach (Folder childfolder in visitorsFolder.FindFolders(new FolderView(10)))
        {
            Console.WriteLine(childfolder.DisplayName);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:00:55.887

问题可能是您没有模拟邮箱的权限，但您可能具有代理访问权限。请参阅我对这个类似问题的回答，了解当您具有委托访问权限时如何访问邮箱： [https ://stackoverflow.com/a/9242792/64161](https://stackoverflow.com/a/9242792/64161)

# android - android改变谷歌地图的界限

> ID：15204413
> 
> 赞同：1
> 
> 时间：2013-03-04T14:57:13.167
> 
> 标签：android, maps

我正在 android 中开发一个项目，该项目需要我更改谷歌地图的边界（仅从底部开始）。目前我正在尝试在底部添加填充，但这个过程很慢，屏幕也会闪烁。

有没有更好的方法来做到这一点？我希望用户能够拖动地图底部来更改边界。我看到很多 AJAX/JS 资源，但这是一个原生组件。

最好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:17:42.833

我认为让用户真正拖动地图视图的底部将是一项巨大的工作。更容易和更快的做法是创建地图的 2 个地图片段，然后单击地图将片段更改回来并在两者之间更改前言。

这样，用户可以更改他使用的地图的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:02:13.003

您可以缩放地图以添加点。这是一些伪代码：

```
 LatLngBounds.Builder bc = new LatLngBounds.Builder();

    for (LatLng item : points) {
        bc.include(item);
    }
    LatLngBounds bounds = bc.build();
    @SuppressWarnings("deprecation")
    CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(bounds,
            getWindowManager().getDefaultDisplay().getWidth(),
            getWindowManager().getDefaultDisplay().getHeight(), 50);
    mMap.moveCamera(cu); 
```

边界将更改为添加点。帮助它希望

# javascript - 我可以使用 document.prototype.getElementById 来获取另一个元素中的元素，而不是整个文档

> ID：15204415
> 
> 赞同：-1
> 
> 时间：2013-03-04T14:57:16.190
> 
> 标签：javascript, getelementbyid

我最近在这个 javascript 提示上发现：

```
element_number = Array.prototype.indexOf.call(element_1, element_2); 
```

它允许开发人员在不是数组的对象上使用 indexOf 方法。

我想知道是否可以使用类似的语法来调用 getElementById 方法，但不能在整个文档（document.getElementById）上，只是在这样的元素上：

```
my_div_2 = document.prototype.getElementById.call(div_1, "id_of_my_div_2"); 
```

这个想法是我的文档包含选项卡，并且具有相同 id 的元素可以在文档中出现多次。

如果不可能，是否有人编写了一个这样做的函数：在一个元素中通过 id 搜索另一个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:58:21.903

这是没有意义的，因为文档中只有一个具有给定 id 的元素是可能的。

所以唯一正确的语法是

```
my_div_2 = document.getElementById("id_of_my_div_2"); 
```

不要在文档中重复使用 id。您可能可以使用类而不是 id 来实现所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:01:45.490

不，但你可以完成你想要使用的东西`querySelector`。

```
my_div_2 = div_1.querySelector("#id_of_my_div_2"); 
```

IE6/7 不支持。

*   *文档：* [MDN`element.querySelector()`](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelector)

* * *

也就是说，重复的 ID 无效。

如果在 ID 可能位于或不在特定容器中的不同页面上使用相同的脚本，则此技术很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:04:14.340

不可以。该[`getElementById`方法](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById) *必须*应用于 type 的对象`Document`，否则会抛出`WRONG_THIS_VALUE`异常。你可以试试

```
myDiv1 = document.getElementById("div1");
myDiv2 = document.getElementById.call(myDiv1, "div2"); // no ".prototype"! 
```

# html - 双引号之间的html注释

> ID：15204416
> 
> 赞同：1
> 
> 时间：2013-03-04T14:57:16.423
> 
> 标签：html

如何在两个双引号之间插入 html 注释：

```
<img src="<!--comment-->Image.jpg"/> 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:02:47.933

[W3C 文档](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.4)建议不能这样做：

这基本上意味着`<!-- ...>`评论标签就像任何其他标签一样，所以`<a <!--title="need to be comment out"-->>a link</a>`和`<a <span></span>>a link</a>`.

**来源：[如何在 HTML 源代码中注释 HTML 标签属性？](https://stackoverflow.com/questions/4744353/how-to-comment-html-tag-attribute-in-html-source-code)**

# c# - 字段初始值设定项不能引用非静态字段、方法或属性

> ID：15204420
> 
> 赞同：8
> 
> 时间：2013-03-04T14:57:28.860
> 
> 标签：c#, microsoft-bits, bits-service

以下是我的代码：

```
private BitsManager manager;
private const string DisplayName = "Test Job";       

public SyncHelper()
{
    manager = new BitsManager();
}        

BitsJob uploadBitsJob = manager.CreateJob(DisplayName, JobType.Upload); 
```

我收到以下错误：

`A field initializer cannot reference the non-static field, method, or property 'BITSIntegrationModule.SyncService.SyncHelper.manager'`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T15:01:20.400

线

```
BitsJob uploadBitsJob = manager.CreateJob(DisplayName, JobType.Upload); 
```

无法访问管理器，因为它尚未设置为任何内容 - 您可以将分配移动到构造函数中 -

```
private readonly BitsManager manager;
private const string DisplayName = "Test Job";       
BitsJob readonly uploadBitsJob;

public SyncHelper()
{
  manager = new BitsManager();
  uploadBitsJob = manager.CreateJob(DisplayName, JobType.Upload);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T15:11:55.533

`uploadBitsJob`在类级别声明，使其成为一个字段。字段实例不能用于初始化其他字段。

相反，您可以声明该字段而不对其进行初始化：

`BitsJob uploadBitsJob;`

然后在构造函数中初始化字段：

```
public SyncHelper()
{
  manager = new BitsManager();
  uploadBitsJob = manager.CreateJob(DisplayName, JobType.Upload);//here.  Now manager is initialized
} 
```

# android - Android和图像回收

> ID：15204421
> 
> 赞同：2
> 
> 时间：2013-03-04T14:57:29.427
> 
> 标签：android, memory-management, graphics, bitmap, recycle

图像回收在 Android 中究竟是如何工作的？

请允许我详细说明：

如果我有以下情况：

```
myBitmap = BitmapFactory.decodeResource(curView.getResources(), R.drawable.mypic); 
```

并记录以下内容

```
Log.v("ImageStuff","Image is: "+myBitmap); 
```

我得到以下结果：

```
Image is: android.graphics.Bitmap@(ResourceID here) 
```

这很好，但是如果我做同样的事情但像这样调用回收

```
myBitmap = BitmapFactory.decodeResource(curView.getResources(), R.drawable.mypic);
myBitmap.recycle() 
```

我得到与上面相同的结果。我认为调用回收会清除位图，因此它会记录为空？

另外，如果我有一个像这样采用位图的方法：

```
public void doStuff(Bitmap pic){

//Code here

} 
```

如上所述创建我的位图并将其发送到 doStuff：

```
myBitmap = BitmapFactory.decodeResource(curView.getResources(), R.drawable.mypic);
doStuff(myBitmap); 
```

如果我想回收图像，是否需要调用 myBitmap.recycle(); 以及 pic.recycle （在我完成后的 doStuff 方法中）。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:04:48.657

`Bitmap`对象包含图像数据（在后台分配的像素值），它本身不是图像数据。因此，`Bitmap`对象可以在 之后徘徊`recycle()`，但是当您尝试使用数据时会抛出错误。

`recycle()`当您或任何其他对象不再以任何方式使用 Bitmap 时，您调用。您还可以设置`myBitmap = null`让对象本身被垃圾收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:05:52.857

扩展 User117 的评论：

1) 位图只是图像数据的容器。当您调用回收时，它会删除所有图像数据，但仍保留容器。

2）如果您将 Bi​​tmap 传递给仅传递对位图的引用的 doStuff 方法，则无需调用 recycle 两次，因为对象是相同的。如果您不再需要它，只需在调用 doStuff 后调用 myBitmap 上的回收。

# c++ - 无法推断模板参数

> ID：15204422
> 
> 赞同：3
> 
> 时间：2013-03-04T14:57:31.860
> 
> 标签：c++, map, comparison, key

我正在实现的类的一部分如下所示：

```
 struct Cord
    {
        int x_cord;
        int y_cord;
        Cord(int x = 0,int y = 0):x_cord(x),y_cord(y) {}
        bool operator()(const Cord& cord) const
        {
            if (x_cord == cord.x_cord)
            {
                return y_cord < cord.y_cord;
            }
            return x_cord < cord.x_cord;
        }
    };
class Cell
    {

    };
std::map<Cord,Cell> m_layout; 
```

我无法编译上面的代码

```
error C2784: 'bool std::operator <(const std::basic_string<_Elem,_Traits,_Alloc> &,const _Elem *)' : could not deduce template argument for 'const std::basic_string<_Elem,_Traits,_Alloc> &' from 'const Layout::Cord' 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T14:58:42.030

你`operator()`应该是`operator<`：

```
 bool operator<(const Cord& cord) const
    {
        if (x_cord == cord.x_cord)
        {
            return y_cord < cord.y_cord;
        }
        return x_cord < cord.x_cord;
    } 
```

`operator<`是`std::map`用来订购它的钥匙的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:59:13.930

您可以通过提供以下内容来解决此问题`operator<(const Cord&, const Cord&)`：

```
// uses your operator()
bool operator<(const Cord& lhs, const Cord& rhs) { return lhs(rhs);) 
```

或重命名`operator()(const Cord& cord) const`为`operator<(const Cord& cord) const`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T15:01:06.303

您在 a 中使用您的类，`map`它需要`operator<`为它定义。

```
// ...
bool operator<(const Cord& cord) const
{
  if (x_cord == cord.x_cord)
    return y_cord < cord.y_cord;
  return x_cord < cord.x_cord;
}
// ... 
```

# c# - c# to AS400 / JD Edwards - 运行程序 - 未找到数据源名称且未指定默认驱动程序

> ID：15204426
> 
> 赞同：0
> 
> 时间：2013-03-04T14:57:47.520
> 
> 标签：c#, database-connection, ado, ibm-midrange, jdedwards

更新：下面的代码示例有效。我更改了连接字符串。这就是问题所在。有关替代（非 ADO）解决方案，请参阅评论中的 Mike Wills 链接。

我有一个 ac# 类（如果我让它工作的话）在 AS/400 - JD Edwards 上运行一个用 RPG 代码编写的程序。我对 AS/400 和/或 JD Edwards 几乎一无所知。

我的（内部网）Web 应用程序中有其他类连接到 JD Edwards，运行 SQL 查询和设置/获取数据。所有这些都使用 IBM.Data.DB2.iSeries dll 并且运行良好。

为此，我使用上述 dll 编写了一个类似的类，但它不起作用。我什至在网上某处读到您无法使用此 dll 运行程序。我发现这有点可疑，但根据我的 JD Edwards 同事的建议，我取消了该课程并使用 adodb dll 重新编写了它。此程序运行无需返回数据。我只是想让程序运行。

这是该类的虚拟化版本：

```
 private void runJDEProgram() {
        ADODB.Connection cn = new ADODB.Connection();

        cn.ConnectionString = "Provider=ABABAB;Data Source=111.111.111";

        ADODB.Command cmdDetail = new ADODB.Command();
        cn.Open(); //has to be open before setting an active connection.
        cmdDetail.ActiveConnection=cn;

        cmdDetail.CommandType = ADODB.CommandTypeEnum.adCmdText;

        cmdDetail.CommandText = "{{CALL BLAH.BLAH(?,?)}}";

        cmdDetail.Prepared = true;

        cmdDetail.Parameters.Append(cmdDetail.CreateParameter("P1", ADODB.DataTypeEnum.adChar, ADODB.ParameterDirectionEnum.adParamInput, 10, "BLAH123"));
        cmdDetail.Parameters.Append(cmdDetail.CreateParameter("P2", ADODB.DataTypeEnum.adChar, ADODB.ParameterDirectionEnum.adParamInput, 10, "BLAH456"));

        object dummy = Type.Missing; //otherwise, we couldn't get past this.

        cmdDetail.Execute(out dummy, ref dummy, 0);

        cn.Close();
    } 
```

这是我在运行时遇到的错误：

```
{"[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified"} 
```

我在哪里搞砸了？谢谢！

编辑：连接字符串在查询 AS/400 以获取/设置数据时起作用。是否需要针对这样的操作进行修改，或者与 ADO 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:04:16.230

出于某种原因，连接字符串必须为此不同。我不对其他只运行查询的类使用相同的连接字符串。上面的连接字符串工作正常（当然，使用适当的值）。

它会提示输入密码，但这里的 JDE 人员想要这样。

# c# - Web 应用程序接口到模块设计

> ID：15204434
> 
> 赞同：1
> 
> 时间：2013-03-04T14:58:01.503
> 
> 标签：c#, .net, web-services, module, console-application

我将从概述开始。我需要完成一个可能需要很长时间才能完成的过程。我想创建一个 Web 界面来获取输入参数并将这些参数发送到完成该过程的单独模块。该模块需要能够调用其他 Web 服务。我希望网络界面完全独立于模块。这样，用户可以离开页面、关闭选项卡/浏览器等，而不会中断模块/进程。使用投票系统，我可以在网络上向用户显示完成百分比。

我的问题是，制作这个模块、Web 服务、控制台应用程序或其他东西的最佳途径是什么？

Web 应用程序和模块都在 .NET 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:01:00.463

似乎您需要一个可以轻松实现为 Windows 服务的后台工作进程。控制台应用程序在技术上可以工作，但您可以更好地控制服务执行、安全性、重启等。

因此，您的 Web 应用程序将请求放入某种队列（例如 MSMQ，即`System.Messaging.Message`类，或一些更好的实现，或者您可以仅使用数据库伪造它），并且服务以自己的速度处理队列中的项目。在不了解您的需求的情况下，我看不出使用 Web 服务的理由，因为您可能不会将它暴露给外界。

# css - 如何在 Less 中嵌套规则以定义类行为

> ID：15204435
> 
> 赞同：0
> 
> 时间：2013-03-04T14:58:02.577
> 
> 标签：css, less

我在 Less 中编写了以下规则。目的是具有`span`粗体和颜色，具体取决于应用于它的类：

```
span {
    font-weight: bold;
    .cheapest { color: green; }
    .expensive { color: red; }
} 
```

受影响的文本正确应用粗体规则，但不应用颜色规则。我在 Visual Studio 中看到它被编译成以下 CSS：

```
 span .cheapest {
  color: #00ff00;
 }
span .expensive {
  color: #ff0000;
} 
```

element 和 class 之间的空间就像将颜色应用于***最便宜*****或*****昂贵*****的class 的子****元素****span ，这不是我想要的。**

 **我有一种方法可以正确描述我想要的东西吗？显然，我可以摆脱嵌套并重复跨度选择器，但这会破坏 Less 的最大功能之一。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:04:16.283

```
span {
    font-weight: bold;
    &.cheapest { 
    color: green; 
    }
    &.expensive { 
    color: red; 
    }
} 
```

编译为：

```
span {
  font-weight: bold;
}
span.cheapest {
  color: green;
}
span.expensive {
  color: red;
} 
```

[您可以在此处](http://lesscss.org/#-nested-rules)阅读有关`&`组合器的信息。**

# html - 非字母数字的输入方向 rtl 问题

> ID：15204440
> 
> 赞同：1
> 
> 时间：2013-03-04T14:58:24.600
> 
> 标签：html, css, right-to-left

我不知道这是否是`direction=rtl`输入元素属性的行为。当我尝试编写字母或数字时，它以所需的方式工作，但是每当我输入非字母数字字符时，该字符就会出现在输入值的开头，然后如果我输入任何字符，那么之前输入的非字母数字字符自动放置在所需的位置。

我的意思是：

```
Entered a -> a
Entered ! -> !a
Entered a -> a!a
Entered @ -> @a!a
Entered a -> a!a@a 
```

这是[jsFiddle](http://jsfiddle.net/tapas_23571113/ZNwtT/)。这是正常行为吗？背后的原因是什么？有时`backspace`也`delete`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:26:12.607

使用`text-align: right;`而不是`direction: rtl`

# r - 如何聚合子集并返回一个值？

> ID：15204441
> 
> 赞同：0
> 
> 时间：2013-03-04T14:58:24.990
> 
> 标签：r, aggregate, aggregation

我有一个如下数据集：

```
id tag x y z
1  "A" 1 2 3
2  "B" 0 2 4
3  "A" 0 0 1
4  "B" 1 3 4 
```

我有一个函数`agg`，它接受按 分组的子集`tag`，即参数为：

```
id tag x y z
1  "A" 1 2 3
3  "A" 0 0 1 
```

假设`agg`是对子集中所有内容的简单总和，因此对于具有`x` `y` `z`的子集，给出 的结果。`7``tag=="A"`

所以我想要的最终结果是：

```
"A" 7
"B" 14
... 
```

我可以列出所有值`tag`并循环它们以获取单个子集，然后将其提供给函数。有没有更好的办法？我猜一定有一些图书馆可以很好地做到这一点..

编辑：我已更改问题以提供更好的描述。希望这次我说清楚了。

我认为我遇到的困难是聚合函数需要整个子集来产生一个值，而普通聚合函数（平均值、长度等）从子集中获取一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:53:53.227

我认为您想使用 reshape2 进行重塑。. .

```
library(reshape2)
df <- read.table(
  header=TRUE, text='
id tag x y z
1  "A" 1 2 3
2  "B" 0 2 4
3  "A" 0 0 1
4  "B" 1 3 4
')
df[,1]<- NULL
df2<- melt(df, id="tag")
dcast(df2, tag~., sum)

#  tag NA
#1   A  7
#2   B 14 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T02:56:53.740

```
ds <- read.table(text='id tag x y z
 1  "A" 1 2 3
 2  "B" 0 2 4
 3  "A" 0 0 1
 4  "B" 1 3 4', header=TRUE)

lapply(split(ds[c('x','y','z')], ds$tag), sum)
$A
[1] 7

$B
[1] 14 
```

# string - 如何在 R 中显示带引号的文本？

> ID：15204442
> 
> 赞同：11
> 
> 时间：2013-03-04T14:58:26.410
> 
> 标签：string, r, quotes

我已经开始学习 R 并试图创建如下向量：

```
c(""check"") 
```

我需要输出为：“检查”。但是我收到语法错误。创建向量时如何转义引号？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-04T15:34:22.737

正如@juba 提到的，一种方法是直接转义引号。

另一种方法是在包含双引号的字符表达式周围使用单引号。

```
> x <- 'say "Hello!"'
> x
[1] "say \"Hello!\""
> cat(x)
say "Hello!" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-04T17:10:06.503

其他答案很好地展示了在创建向量时如何处理字符串中的双引号，这确实是您在问题中提出的最后一件事。但鉴于您还提到了*display*和*output*，您可能需要`dQuote`记住。如果您想用双引号将字符向量的每个元素括起来，这很有用，特别是如果您没有特定的需要或不希望将引号存储在实际的字符向量本身中。

```
# default is to use "fancy quotes"
text <- c("check")
message(dQuote(text))
## “check”

# switch to straight quotes by setting an option
options(useFancyQuotes = FALSE)
message(dQuote(text))
## "check"

# assign result to create a vector of quoted character strings
text.quoted <- dQuote(text)
message(text.quoted)
## "check" 
```

对于它的价值，该`sQuote`函数用单引号做同样的事情。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-04T15:00:50.030

使用反斜杠：

```
x <- "say \"Hello!\"" 
```

`c`如果不构建向量，则不需要使用。

如果要输出未转义的引号，则可能需要使用`cat`而不是`print`：

```
R> cat(x)
say "Hello!" 
```

# assembly - 操作调试信息

> ID：15204444
> 
> 赞同：2
> 
> 时间：2013-03-04T14:58:28.273
> 
> 标签：assembly, disassembly

有谁知道如何操作 GCC 生成的调试信息。具体来说，我正在调试信息中搜索局部变量“A”的大小，我可以从那里得到它吗？

我什至看不到我的局部变量。

我在网上找不到太多关于如何在 .debug_info 部分和其他相关调试部分中操作 objdump 生成的数据的信息。objdump 显示了一些汇编代码，我不知道它与主二进制文件有什么关系。

非常感谢有关此主题的更多信息的任何链接。我知道如何获取调试信息，但我不了解那里的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:25:48.093

`objdump -W`或`readelf -w`显示文件中的 DWARF 调试信息（如果存在）。输出在开始时可能看起来有些吓人，但您需要的信息会在那里。[检查DWARF 规范](http://www.dwarfstd.org/Download.php)以了解列表中不熟悉的术语可能会有所帮助。

如果您需要以编程方式提取它，请查看[Libdwarf](http://reality.sgiweb.org/davea/dwarf.html)。

# vbscript - vbscript 脚本在错误时重置

> ID：15204447
> 
> 赞同：1
> 
> 时间：2013-03-04T14:58:33.353
> 
> 标签：vbscript

我有一个无法解决的问题，对于专家来说，解决方案可能非常简单。即使借助 stackoverflow 和其他一些脚本论坛上的现有帖子，我也没有设法让它工作。

所以我的目标是让我的简单脚本（我将其用作演示文稿）在出现任何错误时自行重置。我已经尝试过'on error resume next'，但这只是让我的电脑一遍又一遍地启动 IE。

所以我的目标是在出现错误后让我的脚本继续运行。如果我的问题惹恼了任何人，请告诉我，我会自行更改或自行调整（视情况而定）。

我的脚本：

执行“下一个错误恢复”

```
Set objIE = CreateObject("InternetExplorer.Application")
objIE.Visible = 1
objIE.FullScreen=True
objIE.Navigate "About:Blank"

Do Until VarType(objIE) = 9
    WScript.Sleep 4000
    objIE.Navigate "local URL"

    WScript.Sleep 6000
    objIE.Navigate "local URL"

        WScript.Sleep 10000
    objIE.Navigate "URL"

        WScript.Sleep 8000
        objIE.Navigate "URL"

        WScript.Sleep 8000
        objIE.Navigate "URL"

                      WScript.Sleep 12000
        objIE.Navigate "URL"

        WScript.Sleep 10000
        objIE.Navigate "URL"

        WScript.Sleep 14000
        objIE.Navigate "URL"

            WScript.Sleep 14000
        objIE.Navigate "URL"

Loop 
```

环形

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T17:20:33.793

此脚本不会结束，您必须终止 wscript 进程才能停止它。它检查系统上所有正在运行的进程是否有“iexplore”；如果未找到 Internet Explorer，则脚本将启动一个新实例。如果找到 iexplore，它会发送导航命令。

```
On Error Resume Next 

Do While true
If Check() = true Then
    WScript.Sleep 4000
    objIE.Navigate "local URL"

    WScript.Sleep 6000
    objIE.Navigate "local URL"

    WScript.Sleep 10000
    objIE.Navigate "URL"

    WScript.Sleep 8000
    objIE.Navigate "URL"

    WScript.Sleep 8000
    objIE.Navigate "URL"

    WScript.Sleep 12000
    objIE.Navigate "URL"

    WScript.Sleep 10000
    objIE.Navigate "URL"

    WScript.Sleep 14000
    objIE.Navigate "URL"

    WScript.Sleep 14000
    objIE.Navigate "URL"
End If
If Check() = false Then
    'Start Iexplore and direct it to blank page
    Set objIE = CreateObject("InternetExplorer.Application")
    objIE.Visible = 1
    objIE.FullScreen=True
    objIE.Navigate "About:Blank"
End If

Loop

'Check to see if IEXPLORE is running
Function Check()
Dim objWMIService, objProcess, colProcess
Dim strComputer, strList
strComputer = "."

Set objWMIService = GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2") 
Set colProcess = objWMIService.ExecQuery ("Select * from Win32_Process")

For Each objProcess in colProcess
    If (inStr(objProcess.Name, "iexplore")) then
        Check = true
    Else
        Check = false
    End If
Next
End Function 
```

# c - “#elif 没有表达”是什么意思？

> ID：15204448
> 
> 赞同：6
> 
> 时间：2013-03-04T14:58:38.107
> 
> 标签：c, gcc

我正在尝试编译一个程序（我没有编写）并且我收到以下错误：

```
C read.c ...
In file included from read.c:6:0:
def.h:6:6: error: #elif with no expression
make: *** [read.o] Error 1 
```

文件`def.h`如下所示：

```
#ifndef TRACE_DEF
#define TRACE_DEF

#ifndef L
  #define L 152064 /* (352 * 288 * 1.5) */
#elif
  #error "L defined elsewhere"
#endif

#ifndef MIN
  #define MIN(a, b) ((a) < (b) ? (a) : (b))
#endif
#ifndef MAX
  #define MAX(a, b) ((a) > (b) ? (a) : (b))
#endif 
```

第 6 行是**之前** `#error "L defined elsewhere"`的行。

编译器是：

```
$ gcc --version
gcc-4.6.real (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-04T15:00:26.370

因为`#elif`需要一个表达式，就像`#if`. 你想用`#else`. 否则你必须给出表达式：

```
#ifndef L
  #define L 152064 /* (352 * 288 * 1.5) */
#elif defined(L)
  #error "L defined elsewhere"
#endif 
```

（相等的）

```
#ifndef L
  #define L 152064 /* (352 * 288 * 1.5) */
#else
  #error "L defined elsewhere"
#endif 
```

# c - 为C中的结构中的枚举赋值

> ID：15204452
> 
> 赞同：5
> 
> 时间：2013-03-04T14:58:47.173
> 
> 标签：c

我在无法编辑（不允许）的头文件中定义了以下结构：

```
struct Programma
{
enum {SERIE, FILM} programmaType;

char* titel;
char* zender;

time_t start;
time_t einde;

char* review;

union 
{
    Serie* serie;
    Film* film;
} typeData;
}; 
```

我试过了：

```
Programma asd;

asd.programmaType = SERIE; //Error: identifier 'SERIE' is undefined
asd.programmaType = 0; //Error: a value of type 'int'cannot be assigned to an entity of type 'enum PRogramma::<unnamed> 
```

并在一个函数中使用指向 Programma 结构的指针作为替换“。”的参数 通过'->'，这给了我同样的错误。

我想我正在做与此处建议的相同的事情（[如何在 ANSI C 中的结构中使用枚举？](https://stackoverflow.com/questions/3344721/how-to-use-enum-within-a-struct-in-ansi-c)），但我无法停止收到随机错误。

编辑：出于某种原因，当我在 Visual Studio 中键入 asd 时。通常的下拉框会出现，但有一个“Typedata”以及“SERIE”和“FILM”的选项。就我个人而言，我认为结构的声明有问题，但它是给定的，我不应该编辑它。

编辑编辑：我正在 Visual Studio 2008 中创建一个 C++ 项目，但每个源文件都是 .h 或 .c。这就是我们被教导为“C”的内容，但我开始怀疑这实际上是多么真实。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T15:04:03.877

从错误消息看来，您实际上没有 C 程序，而是 C++ 程序。为此，您必须使用范围运算符`::` ，如

```
asd.programmaType = Programma::SERIE; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T15:06:05.830

假设 C，您错误地声明了一个结构（没有 typedef）。

尝试：

```
struct Programma asd; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:08:00.030

代替

```
Programma asd; 
```

经过

```
struct Programma asd; 
```

那么`asd.programmaType = SERIE;`应该被接受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:04:24.717

尝试

```
asd.programmaType = Programma::SERIE; 
```

# asp.net - 在键入时转换以降低文本框的内容

> ID：15204455
> 
> 赞同：0
> 
> 时间：2013-03-04T14:59:01.270
> 
> 标签：asp.net

我需要转换 .ToLower() 用户在输入时在文本框上输入的内容...我找到了一些示例，但这些都与事件有关`KeyPress`，而且`asp.net`只有事件`TextChange`，而且，我发现了一些东西，`Hegex`但有人曾经告诉我与之合作`hegex`不是一个好习惯......我是一个初学者，所以我更想问你们，这样做的更好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:06:41.803

您混淆了服务器端和客户端事件。请注意，您在 .aspx 中声明的 TextBox 将默认呈现为 a `input[type=text]`，因此您可以处理所有客户端事件（onkeypress、onkeyup、onkeydown 等）。但是，您想要完成的事情只能使用 CSS 来完成。将以下属性放入您的文本框中：

```
<asp:TextBox ID="txtTest" runat="server" Style="text-transform: lowercase;"></asp:TextBox> 
```

这样，您输入的文本将显示为小写，但如果想要将文本真正**转换**为小写，则必须使用 Javascript：

```
 <asp:TextBox ID="txtTest" runat="server" onkeyup="this.value = this.value.toLowerCase();"
    Style="text-transform: lowercase;"></asp:TextBox> 
```

顺便说一句，使用正则表达式并不是一个坏习惯，在这种情况下就没有必要了。正则表达式对于文本搜索、验证和解析非常有用，使事情变得更容易。唯一的权衡是某些正则表达式模式可能非常不清楚且难以理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:11:31.757

我假设您希望在用户输入文本后立即在客户端将文本小写。您可以使用[`onkeypress`Event](http://www.w3schools.com/jsref/event_onkeypress.asp)处理它：

```
<asp:TextBox Id="TextBox1" onkeypress="this.value = this.value.toLowerCase();" runat="server" /> 
```

在服务器端，不是每次按键都会触发，而是在提交页面时，您可以使用`String.ToLower`. 例如，如果您处理`TextBox` [`TextChanged`事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textchanged.aspx)：

```
protected void TextBox1_TextChanged(object sender, EventArgs e)
{
   TextBox1.Text = TextBox1.Text.ToLower();
} 
```

请记住在 .aspx 标记上添加事件处理程序：

```
<asp:TextBox OnTextChanged="TextBox1_TextChanged" AutoPostBack="true" runat="server" Id="TextBox1" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:16:37.750

您可以按照@MarcusVinicius 的建议利用css
假设您有一个像这样的文本框

```
 <asp:TextBox id="text1" runat="server"/> 
```

您可以按如下方式将 cssClass 放在上面

```
<asp:TextBox id="text1" CssClass='text' runat="server"/> 
```

然后创建一个css类

```
 .text
 {
   text-transform: lowercase;
 } 
```

# c - 是否有任何 8051 汇编语言到 C 代码转换器

> ID：15204459
> 
> 赞同：2
> 
> 时间：2013-03-04T14:59:12.960
> 
> 标签：c, assembly, 8051

是否有任何 8051 汇编语言到 C 代码转换器...？？

请提供相关链接帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:07:32.597

8051 汇编代码不是很难理解[除非它写得非常糟糕和/或使用了很多“聪明的技巧”] - 没有那么多指令，其中大多数都是非常直接的。如果您对代码应该做什么有一个公平的想法，那么您很可能可以阅读并理解它。

当然，如果代码没有做一些你相当了解的事情，那么无论它是 C、Pascal 还是 Assembler 都很难。在这种情况下，研究设备所做的任何事情都是您的起点。例如，如果它是一部手机，那么了解手机技术、键盘、收音机和诸如此类的东西是如何运作的，将是理解代码作用的关键。如果是洗衣机控制器，那么了解阀门、电机控制器等将是您理解代码的关键。等等。

从汇编程序机器生成的 C 代码，当原始代码一开始不是用 C 编写时，很可能看起来相当混乱 - 事实上，即使手动“直接翻译而没有太多理解”也有相当困难的趋势要遵循 - 因为汇编代码的编写方式通常比编译器生成的方式组织得更差，当您尝试将其转换为 C 代码时会导致出现奇怪的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:18:12.780

这样的工具确实存在：

[http://www.microapl.com/asm2c/sample8051.html](http://www.microapl.com/asm2c/sample8051.html)

但是，它可能会变得[有些昂贵](https://stackoverflow.com/a/1377289/422797)。

# javascript - Javascript每隔一张幻灯片就获得模数？

> ID：15204461
> 
> 赞同：0
> 
> 时间：2013-03-04T14:59:14.010
> 
> 标签：javascript, jquery, counter, modulus

我有一个功能，每次幻灯片在我的幻灯片中前进时都会触发，并增加一个计数器。

我想要一种简单的方法来调用每个 X 幻灯片（示例代码中的 5 个）的函数。我意识到我可以使用模数轻松做到这一点，但语法让我无法理解。

```
 var numSlides = $('.item').length; // 20
 var currSlide = 0;
 var ad_interval = 5;

 function updateSlide (){ 
    currSlide++
    // if we are at the ad interval, every 5 slides, call the next line
     $("#adslot").reveal();

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:01:41.060

```
if (currSlide % ad_interval === 0) {
    // Note that this will also include the first (0th) slide.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:01:50.557

Mod 返回余数...当它为 0 时，您已经计算了间隔。

```
if((currSlide % ad_interval) === 0) {
   $('#adslot').reveal();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:02:29.283

你在找这个吗？

```
if (currSlide%5 ==0) {
  $("#adslot").reveal();
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T15:02:49.667

我建议：

```
function updateSlide (){
    // if we are at the ad interval, every 5 slides, call the next line
    if ((currSlide + 1) % ad_interval == 0){
        $("#adslot").reveal();
    }
    currslide++;
} 
```

我使用的原因`(currSlide + 1) % ad_interval`仅仅是因为您的索引是从零开始的，第五张幻灯片将在 index `4`，而不是`5`; 这`+1`只是确保模数将`0` *在*第五张幻灯片，而不是第六张。

这也将阻止第一张（第零张）幻灯片展示广告。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T15:01:47.223

在您的 updateSlide() 方法中，您可以包含以下内容：

```
if(currSlide % ad_interval === 0)
{
     // Run method code.
} 
```

这将每 5 张幻灯片运行一个方法。有关 Java 运算符和模运算符的更多信息，[此站点](http://www.w3schools.com/js/js_operators.asp)很好地解释了它们。

# xpages - 在 Notes 客户端的 XPage 中显示外部/链接图像

> ID：15204462
> 
> 赞同：1
> 
> 时间：2013-03-04T14:59:18.540
> 
> 标签：xpages, lotus-notes

我正在尝试显示由 url 引用的图像。我要么将图像的 url 属性设置为特定的 url（例如[http://www.ibm.com/i/v16/t/ibm-logo.gif](http://www.ibm.com/i/v16/t/ibm-logo.gif)），要么使用计算文本来显示 HTML img 标签。在这两种情况下，图像都在浏览器中可见，但在 Notes 客户端上不可见。

事实上，图像似乎就在那里——一旦我动态地设置了这个属性，包含图像的表格单元格就会调整为它的大小。但它是不可见的。

我怀疑这可能与某些 Notes 客户端设置有关——显示或不显示外部图像，而不是真正相关的 XPage。我可以在客户端/数据库上设置什么来允许显示图像吗？一旦我收到包含图片的电子邮件，就会有一个选项可以在页面上启用图片。这可能是解决方案 - 检查邮件数据库设计以查看它是如何实现的（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:14:04.713

XPiNC（Notes Client 中的 XPages）使用 XULRunner（=embedded Firefox，不幸的是不是最新版本）来呈现其内容。它显示的内容相当有限。[ports 周围](http://xpages.info/XPagesHome.nsf/Entry.xsp?documentId=C7A2674F67E86D51852578CB00669AE6)有一些山羊，但这似乎不是你的问题。您可能需要调查代理设置。如果一切都失败了，您可以使用后端类下载图像并使用二进制数据（无需保存到磁盘）作为图像源。

# r - 将名称应用于多个对象

> ID：15204463
> 
> 赞同：1
> 
> 时间：2013-03-04T14:59:21.800
> 
> 标签：r

我有一个带有名称的向量（只有一个），我想将它应用于多个对象，但函数名称只接受一个参数（一个对象），所以我必须对我想要命名的所有对象重复该过程.

```
names(object_1) <- namesvector
names(object_2) <- namesvector
names(object_3) <- namesvector 
```

是否可以仅一步完成？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T15:14:59.700

更紧凑的解决方案

```
lapply(list(obj_1, obj_2, obj_3), setNames, name_vector) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:28:05.507

另一种只是为了好玩：

```
lapply(list(object_1, object_2, object_3), structure, .Names = namesvector) 
```

* * *

所有这些答案都在将您的对象列入清单。如果您仍然希望您的对象可以自由访问（即在全局环境中），这里是另一种解决方案：

* * *

示例对象：

```
object_1 <- runif(3)
object_2 <- runif(3)
object_3 <- runif(3) 
```

你想申请的名字：

```
namesvector <- letters[1:3] 
```

* * *

一些黑客应用名称：

```
# Objects you want to combine.
items_n <- c("object_1", "object_2", "object_3")

# Make into a list with names of objects needed for promoting to global environment.
items <- structure(lapply(items_n, get), .Names = items_n)

# Add names to object elements.
named <- lapply(items, structure, .Names = namesvector)

# Promote to global environment.
list2env(named, .GlobalEnv) 
```

现在您仍然可以参考例如：

```
object_1 
```

并取回其内容。`items_n`如果您有很多对象（假设它们具有相似的名称），您也可以动态创建（要组合的对象列表）：

```
items_n <- sapply(1:3, function(x) paste0("object_", x)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:13:12.520

您可以尝试将所有数字向量放入一个列表中，然后`lapply`通过分配对其进行处理。就像是：

```
# makes some vectors
obj_1 <- 1:10
obj_2 <- 1:10
obj_3 <- 1:10
name_vector <- LETTERS[1:10]

# now apply the names
lapply(list(obj_1,obj_2,obj_3), function(x) {names(x) <- name_vector; x}) 
```

# python - Pyqt如何获取小部件的尺寸

> ID：15204470
> 
> 赞同：13
> 
> 时间：2013-03-04T14:59:45.730
> 
> 标签：python, widget, size, pyqt

我目前正在开发一个无法使用模式窗口的应用程序（由于某些应用程序限制）。但是，在某些情况下，我想模拟一个弹出窗口。为此，我动态创建了一个以 centralwidget 作为父级的小部件，并使用 move() 方法将其放置在我想要的位置。我想知道是否有办法在给定时间获取小部件的尺寸（考虑到 mainWindow 可以随时调整大小），以便我能够将占位符弹出窗口（一个简单的小部件）居中中央小部件。

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-10-27T19:33:57.137

> 获取 Qt Widget 大小：

```
import sys
from PyQt4 import QtGui, QtCore

app = QtGui.QApplication(sys.argv)

mainWindow = QtGui.QWidget()
width = mainWindow.frameGeometry().width()
height = mainWindow.frameGeometry().height() 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-10-27T19:27:34.613

> 用于获取屏幕尺寸

```
import sys
from PyQt4 import QtGui, QtCore

app = QtGui.QApplication(sys.argv)

mainWindow = QtGui.QWidget()
screenShape = QtGui.QDesktopWidget().screenGeometry()
mainWindow.resize(self.screenShape.width(), self.screenShape.height())
mainWindow.show() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:08:39.927

您可以使用[`frameGeometry`](http://qt-project.org/doc/qt-4.8/qwidget.html#frameGeometry-prop)或[`geometry`](http://qt-project.org/doc/qt-4.8/qwidget.html#geometry-prop)根据[您的需要](http://qt-project.org/doc/qt-4.8/application-windows.html#window-geometry)。

# ios - 在哪里可以找到 iOS 6 Core 蓝牙的文档

> ID：15204472
> 
> 赞同：2
> 
> 时间：2013-03-04T14:59:46.997
> 
> 标签：ios, xcode, core-bluetooth

在 iOS 6 中，引入了 CBPeripheralManager 和 CBMutableCharacteristic 等新的核心蓝牙类。但是，我查看了[核心蓝牙文档](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html#//apple_ref/doc/uid/TP40011295)，但找不到关于新类的任何文档。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:40:01.270

如果您是付费开发者，请观看 2012 年 WWDC 会议视频：

核心蓝牙 101：会话 703

高级核心蓝牙：会话 705

您可以在以下网址找到视频和 PPT 幻灯片： [https ://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)

幻灯片引用了您上面的课程。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:30:05.757

在我看来，最好的方法是只查看 Xcode 中的头文件。假设您已经添加了，只需在 Xcode 中`CoreBluetooth.framework`扩展它，然后。`Headers`里面的标题都以与 Apple 的在线类引用相同的方式记录。

为了让它更简单，我个人决定下载[Doxygen](http://www.doxygen.nl/)，它可以编译 HTML/PDF/等。直接来自这些头文件的文档。如果你这样做，标题存储在`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/Frameworks/CoreBluetooth.framework/Headers`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T14:51:42.083

现在你可以在这里找到更多信息：http: [//developer.apple.com/library/mac/navigation/#section=Frameworks&topic=CoreBluetooth](http://developer.apple.com/library/mac/navigation/#section=Frameworks&topic=CoreBluetooth)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:03:36.850

这些是否解决了您的目的：

[开发者.Apple.Com](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html#//apple_ref/doc/uid/TP40011295)

[吉比·帕齐亚莱](http://geppyparziale.com/post/39709522801/invasivecode-core-bluetooth-for-ios-6-core)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T14:42:23.157

暂时没有文档。
您所能做的就是检查头文件。希望您可以检查 iOS 5.1 到 6.0 API 的差异 ( [http://developer.apple.com/library/ios/#releasenotes/General/iOS60APIDiffs/index.html](http://developer.apple.com/library/ios/#releasenotes/General/iOS60APIDiffs/index.html) ) 并查找`CoreBluetooth.framework`)。

# php - 通过 FTP 和 Memcache 的 XML 突然减慢了我的 PHP 站点的速度......从今天开始

> ID：15204474
> 
> 赞同：2
> 
> 时间：2013-03-04T15:00:05.143
> 
> 标签：php, xml, ftp, memcached

我的网站上有以下 PHP。

```
$xml = $my_memcache->load('the_xml');
if(empty($xml)){
        $username = 'username';
        $password = 'password';
        $host = 'ftp.thirdpartysite.co.uk';
        $file = 'file.xml';
        $xml = file_get_contents("ftp://$username:$password@$host/$file");

        $my_memcache->save( $xml, 'the_xml' , array(), '1800' );

} 
$php_array = $this->parseXml($xml);

$html = $this->gatherHtml($php_array);
return $html; 
```

它在内存缓存中查找键/值。如果找不到密钥，它将执行 FTP 获取内容，然后将其保存到内存缓存 5 分钟。我只希望 1 个用户必须每 5 分钟为所有用户执行此操作。最后，它使用我的 'parseXml()' 函数将 XML 解析为 php 数组，然后使用我的 'gatherHtml()' 将 PHP 数组转换为 HTML 并返回。

它已经工作了很长时间，但突然间它开始让我的网站变得非常缓慢。好久没改代码了。我在 2 台服务器上进行了负载平衡，并且我的内部交换机上的传出带宽也猛增。我已经检查了负载，并且在最大线程下平均没有 DOS 攻击。

请问有什么想法吗（FTP、memcache、PHP、XML）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:22:30.943

嗯嗯
，如果它在 DNS 或网络层上什么都没有，听起来它可能是第三方的东西，在这种情况下是*XML*文件。
如果*XML*的大小增加了，那么它现在可能超过**了 Memcache 值的 1MB 最大大小**。来源[在这里](http://php.net/manual/en/memcache.set.php)。我建议现在通过像 Filezilla 这样的 FTP 客户端（或通过命令行）进行检查。

如果文件大于 1MB，则可能会发生以下情况。

**网站慢：**
如果这样的话，不仅每个用户在缓存中都找不到key，还会锤击Memcache去尝试存储，每次都会因为文件太大而失败，必须等待Memcache在完成用户页面请求之前*超时。*

**带宽高：**
我注意到您使用 Memcache，可能在每个 Web 服务器上都有一个节点？如果这是真的，那么数据可能会尝试跨两个 Memcache 节点写入，这可能会导致内部交换机上的带宽峰值。要确认这一点，请尝试使用 tcpdump 检查 Memcache 是否是高带宽的罪魁祸首。

```
#tcpdump -vvxXs 1500 -i bond0 'port 11211' 
```

用您称为 NIC 的任何名称替换 bond0。

**可能的解决方案：**
尝试先解析 XML，然后在您拥有所需的内容后将其写入/存储在 Memcache 中。这应该确保您始终将 Memcache 的最大大小保持在 1MB 以下。

```
$php_array = $my_memcache->load('the_php');
if(empty($php_array)){
        $username = 'username';
        $password = 'password';
        $host = 'ftp.thirdpartysite.co.uk';
        $file = 'file.xml';
        $xml = file_get_contents("ftp://$username:$password@$host/$file");

        $php_array = $this->parseXml($xml);

        $my_memcache->save( $php_array, 'the_php' , array(), '1800' );
} 

$html = $this->gatherHtml($php_array);
return $html; 
```

不知道这是否正确，但希望对您有所帮助

# c# - 加密/混淆文件名

> ID：15204475
> 
> 赞同：3
> 
> 时间：2013-03-04T15:00:11.597
> 
> 标签：c#, encryption, obfuscation

我想将文件存储在共享的 Web 服务器上，但想隐藏文件的内容。我将对文件的内容进行加密，但我非常清楚，如果有人有时间和知识，他们可以根据他们的名字来定位文件。

加密文件名或混淆文件名的最佳方法是什么？

我已经研究过创建一个单独的索引文件并使用字典来存储原始文件名和混淆文件名，但是如果我可以使用可逆加密来做同样的事情，如果索引文件丢失，这可能更容易/更不容易发生灾难。

希望这是有道理的。

更新：要清楚，我希望这是可逆的，并且我想确保文件在驱动器上不可搜索（即混淆路径是不够的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:03:31.543

您可以向 url 添加一个随机值。前任：

```
http://example.com/my-site/943hfkl3w7/SecretFile.zip
http://example.com/my-site/jf6490fh40/OtherFile.zip 
```

这样，原始文件名永远不会改变，文件位置也不会被猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:04:20.857

例如，您可以根据之前生成的密钥使用 RSA 加密：

```
var provider = new System.Security.Cryptography.RSACryptoServiceProvider();
provider.ImportParameters(RSA_KEY);

var encryptedBytes = provider.Encrypt(System.Text.Encoding.UTF8.GetBytes("Hello World!"), true);

string decryptedTest = System.Text.Encoding.UTF8.GetString(provider.Decrypt(encryptedBytes, true)); 
```

# r - 你可以将 plotrix 的输出保存到一个对象吗？

> ID：15204480
> 
> 赞同：0
> 
> 时间：2013-03-04T15:00:18.353
> 
> 标签：r, ggplot2

我希望能够将 plotrix 图表与 ggplot 图表 uisng grid.arrange 结合起来。

我可以使用以下方法保存 ggplot2 的图像：

```
p<-ggplot(mtcars, aes(x=xyl, y=mgp)) + geom_point()

library(plotrix)
slices <- c(10, 12, 4, 16, 8) 
lbls <- c("US", "UK", "Australia", "Germany", "France")
pie3D(slices,labels=lbls,explode=0.1, main="Pie Chart of Countries 
```

如何将 pie3d 的输出保存到 p1 并使用 grid.arrange(p, p1)？

# javascript - 动力学 js - 我如何动态修改属性（onmouseover）

> ID：15204486
> 
> 赞同：0
> 
> 时间：2013-03-04T15:00:29.467
> 
> 标签：javascript, kineticjs

我有以下代码，但是位置不会随鼠标悬停而变化 - 我错过了什么？

```
function drawOverlay() {
    var stage = new Kinetic.Stage({container: 'overlay'});
    var layer = new Kinetic.Layer();

    var rect = new Kinetic.Rect({
        x: 239, y: 75,
        width: 100, height: 50,
        fill: 'green', stroke: 'black', strokeWidth: 4
    });
    rect.on('mouseover', function(e) {rect.setPosition({x: 50, y: 5 0});});

    layer.add(rect);
    stage.add(layer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:09:51.743

这里有两个问题：

1.  您的 y 值中有一个空格：“5 0”与“50”，这会导致 javascript 解析错误。
2.  您需要在更改节点位置后重新绘制图层。

所以试试这个：

```
rect.on('mouseover', function(e) {
    rect.setPosition({x: 50, y: 50}); 
    layer.draw(); 
}); 
```

# oop - 重构遗留代码，从具有小实现的巨型接口中提取小接口

> ID：15204488
> 
> 赞同：1
> 
> 时间：2013-03-04T15:00:32.480
> 
> 标签：oop, refactoring

我有一大段代码（遗留代码）知道连接到外部服务让我们说连接到Skype并带来它的可用性，它这样做的方式（这就是它的工作方式，为了示例）。是

```
SkypeAvailabilityManager.java

.init
.start
.stop
.connect
.disconnect
.keepAlive
.updateStatus 
```

（让我们假设所有方法都需要公开并且有人调用它们）。现在有一大段代码（调用上述所有方法的大量遗留代码）。

现在我需要与Skype同步或与其他一些服务同步让我们说它`MessengerB`

但是对于 messengerB，我不需要初始化、启动、连接等，我只需要 updateStatus 方法。

所以我想到了这个重构（这对我来说听起来不太好，我会解释为什么

```
Interface: ExternalStatusFetcher 
```

它的方法：

```
.updateStatus 
```

现在遗留代码在许多地方调用上述.init .start .stop .connect 方法，但是我需要添加的新MessengerStatusUpdaterImpl 只需要.updateStatus 并且我想重用Skype 实现的.updateStatus 因为我想重用代码。

所以我的局限性：

1.  重用 SkypeAvailabilityManager.java
2.  遗留代码调用 .start .stop ... 从代码中的许多地方我没有什么要改变的，这是一个巨大的遗产。
3.  我希望在我的代码中有一个共同的接口含义我想以相同的方式对待这两个 impl 但因此客户端要么调用所有方法，要么只调用其中的一部分我不知道，直到实现实际初始化为真正的实现。

什么是好的重构它？如果我的容器类拥有一个包含所有方法的接口，这应该很好，但是我的第二个实现不需要所有方法，所以我有点搞不清楚该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:40:33.523

如果您不想更改调用代码，我会选择：

1.  创建一个包含所有方法的接口。这样，您就可以明确说明您的代码中隐含的内容，即遗留软件和您的信使之间的合同。
2.  `MessengerB`实现接口，除此之外的所有方法`updateStatus`都只是无操作（即什么都不做的空方法）。
3.  如果您将拥有许多这些 messenger 实现，您可以创建一个实现接口的抽象类，其中所有方法都是无操作的，然后为每个特定的 messenger 创建一个覆盖适当方法的子类。

恕我直言，这是一个很好的第一步，主要是因为它很好地捕获了当前代码状态，非常清楚地说明了创建新信使需要实现什么，并且可以作为以后重构遗留代码的基础。

高温高压

# java - 如何用spring批处理解析json文件？

> ID：15204491
> 
> 赞同：2
> 
> 时间：2013-03-04T15:00:48.127
> 
> 标签：java, json, spring, spring-batch

我有一个以 json 格式写入文件的序列化实体列表。我需要使用弹簧批处理从文件中读取它们（然后处理它们并写入数据库）。

我发现只有 Spring Batch 提供的平面文件、DB 和 Xml 阅读器。解析json的正确方法是什么？

我要实施的方法是：

```
1\. read the whole file with FlatFile reader
2\. parse it with Jaxson in `read` method 
```

我是春季批次的新手，所以在这里我需要一条建议。这种方法正确吗？它不违反任何spring-batch原则吗？或者我应该使用另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:25:25.930

您的方法可行，但我建议您使用[Jackson Streaming API](http://wiki.fasterxml.com/JacksonStreamingApi)直接解析 JSON 文件，而不是有一个额外的步骤来读取整个文件然后处理它。

```
JsonFactory jsonFactory = new JsonFactory();
JsonParser jp = jsonFactory.createJsonParser(file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-03T13:29:46.227

您可以`JsonItemReader`在 Spring Batch 中使用。在我的例子中，我将 JSON 文件名传递为`JobParameter`.

我的 JSON 文件中的示例 JSON 内容。

```
{ 
   "obj1": "abc", 
   "obj2": "def" 
} 
```

MyObj 类：

```
@Data
@Builder
public class MyObject{
    String obj1;
    String obj2;
} 
```

这是我的读者。

```
@Bean
@StepScope
public JsonItemReader<MyObj> myReader() {

    LOGGER.info(LOG_TEMPLATE,
            getClass().getSimpleName(),
            Thread.currentThread().getStackTrace()[1].getMethodName(),
            "Inside Reader...");

    final ObjectMapper mapper = new ObjectMapper();

    final JacksonJsonObjectReader<MyObj> jsonObjectReader = new JacksonJsonObjectReader<>(
            MyObj.class);
    jsonObjectReader.setMapper(mapper);

    final String filePath = config.getRootfolder() + SEPERATOR + inputInfo.getFileName();

    return new JsonItemReaderBuilder<MyObj>().jsonObjectReader(jsonObjectReader)
            .resource(new FileSystemResource(filePath))
            .name("myReader")
            .build();

} 
```

# android - System.loadLibrary() 错误

> ID：15204492
> 
> 赞同：7
> 
> 时间：2013-03-04T15:00:48.163
> 
> 标签：android, android-ndk

我成功地用 android ndk-Standalone 工具链交叉编译了一个 c++ 库，然后我在 Eclipse 中创建了一个新的 android 应用程序项目，当我将 mylib.so 放入 jni 文件夹并执行 ndk-build 命令时它工作正常

```
Prebuilt       : mylib.so <= jni/
Install        : mylib.so => libs/armeabi/mylib.so 
```

但是添加的时候

```
static{
  System.load("/data/data/my_package/lib/mylib.so");
} 
```

我在 logcat 中有一个错误说

```
 AndroidRuntime
   Caused by: java.lang.UnsatisfiedLinkError: Cannot load library:
   reloc_library[1306]:      36 cannot locate 'xmlCleanupParser'...`` 
```

我用谷歌搜索但没有找到解决这个问题的任何方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-28T08:00:46.033

人们大多忘记了剪切“lib”前缀形式的库名称。所以如果你有“libusb.so”你的代码必须是 System.loadLibrary("usb")...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-15T10:52:50.020

我最近遇到了同样的错误。在尝试了 SO 的数十条建议后，我终于发现**错误出在我的本机代码中。**即使 android **ndk 编译它没有任何问题/警告。**

尝试编写一个简单的 main 函数来测试您的本机代码并使用 g++/gcc（或类似的东西）进行编译以检查错误。

我知道提问者为时已晚，但希望其他人觉得这很有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T15:16:22.230

如果您的 -directory`.so`中有已编译的本机库（-file）`lib/`，则可以在不使用完整路径的情况下引用它：

```
static{
  System.load("mylib");
} 
```

如[教程](http://marakana.com/forums/android/examples/49.html)所示。

* * *

检查你是否在你的头文件中设置了正确的包：[How to resolve the java.lang.UnsatisfiedLinkError in NDK in Android?](https://stackoverflow.com/questions/3262440/how-to-resolve-the-java-lang-unsatisfiedlinkerror-in-ndk-in-android)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-05T08:26:38.913

```
try {
       System.load("/data/data/<package name>/lib/libsample-jni.so");
    } catch (UnsatisfiedLinkError e) {
       System.loadLibrary("<sample-jni>"); //remove lib and .so from name
} 
```

这会帮助你，请。查看。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-04T15:17:50.357

请指定您的 .so 文件，如下所示。

```
 static {

     System.loadLibrary("mylib");

} 
```

希望这会帮助你。

# maven - Surefire如何干净关闭？

> ID：15204496
> 
> 赞同：0
> 
> 时间：2013-03-04T15:00:52.870
> 
> 标签：maven, testng, surefire

好吧，无论如何，它似乎没有这样做。我的库使用非守护线程池，通常我必须显式关闭才能关闭应用程序，但 surefire 似乎不需要这个。无论如何，肯定会通过什么方法关闭线程池？它只是 sigterm-ing 还是 sigkill-ing 本身？作为测试套件的一部分，是否可以要求彻底关闭，例如在 testng 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:11:54.523

您可以使用 @AfterSuite 方法执行任何必要的清理。

除此之外，surefire 或 TestNG 不可能知道您必要的应用程序清理。

# iphone - NSPredicate 将转换后的 CLPlacemark 与另一个 CLPlacemark 进行比较

> ID：15204498
> 
> 赞同：1
> 
> 时间：2013-03-04T15:01:00.347
> 
> 标签：iphone, cocoa-touch, core-data, nspredicate

我正在`CLPlacemark`使用`NSValueTransformer`. （所以它被保存为`NSData`）

但是，我已经到了需要根据另一个`CLPlacemark`对象过滤保存的对象的地步。

我试过这个，它不起作用：

```
NSExpression *exprPath = [NSExpression expressionForKeyPath:@"placemark"];
NSExpression *exprKeyword = [NSExpression expressionForConstantValue:[NSKeyedArchiver archivedDataWithRootObject:placemark]];
NSPredicate *predicate = [NSComparisonPredicate predicateWithLeftExpression:exprPath rightExpression:exprKeyword modifier:NSDirectPredicateModifier type:NSEqualToPredicateOperatorType options:0]; 
```

那么还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:08:28.667

Core Data 支持 == 和 != 搜索二进制数据（和可转换的属性）。不要使用*NSKeyedArchiver*作为*地标*。就像这样在谓词中使用它：

```
[NSPredicate predicateWithFormat:@"placemark = %@", placemark] 
```

# php - 左连接问题，打印右列

> ID：15204504
> 
> 赞同：0
> 
> 时间：2013-03-04T15:01:11.607
> 
> 标签：php, sql

我有这个疑问，

```
$sql_sektori= "SELECT formas.*,sektor_servisi.sektori,sektor_servisi.id_sektori
FROM formas
LEFT JOIN sektor_servisi ON formas.sektori = sektor_servisi.id_sektori
WHERE id=$id order by sektor_servisi.id_sektori asc"; 
```

`sektori`问题是：我在表格和表格中都有一个名为 的列`sektor_servisi`。现在，我需要从`sektor_servisi`表中打印 sektori 列。

我该怎么做？

```
$row[servis_sektori.sektori] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:03:10.717

使用别名：

```
SELECT formas.sektori AS f_sektori, sektor_servisis.sektori AS s_sektori
                      ^^^^^^^^^^^^                         ^^^^^^^^^^^^^

echo $row['f_sektori'], $row['s_sektori'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:04:02.833

您可以为 sektor_servisi.sektori 列起别名，即

```
$sql_sektori= "SELECT formas.*,sektor_servisi.sektori AS sektori2,sektor_servisi.id_sektori FROM formas LEFT JOIN sektor_servisi ON formas.sektori = sektor_servisi.id_sektori WHERE id=$id order by sektor_servisi.id_sektori asc"; 
```

然后你可以使用

```
$row[sektori2] 
```

# c# - 使用 Grid 使用 Entity Framework 保存、更新、删除数据

> ID：15204508
> 
> 赞同：0
> 
> 时间：2013-03-04T15:01:25.217
> 
> 标签：c#, entity-framework

你好，我对 EF 很陌生，并且一直在尝试一些关于 EF 的示例。通常我在使用一个对象时没有任何问题，但真正让我感到奇怪的是，当与诸如 XtraGrid 之类的网格一起使用时，你如何使用它开发快递？

通常我使用绑定源将网格的数据源设置为上下文，使用：

```
 private void Form1_Load(object sender, EventArgs e)
    {

        using (var context = new BeygirDataModeliContainer())
        {
            beygirBindingSource.DataSource = context.BeygirSet;
        }

    } 
```

如果更改网格并将事件设置为：

```
 using (var context = new BeygirDataModeliContainer())
        {

            context.SaveChanges();
        }

        gridControl1.RefreshDataSource(); 
```

它根本不会更改或更新或实际上对数据库进行任何操作。这些示例可能已关闭，但是否有教程可以帮助我继续将 EF 与网格和模型集合一起使用？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:39:38.283

保持您的实体上下文“活着”。每次关闭时都会进行`using`块调用。`Dispose`

```
using (var context = new BeygirDataModeliContainer())
{
    beygirBindingSource.DataSource = context.BeygirSet;
}//context.Dispose() is call here 
```

你应该尝试这样的事情。

```
BeygirDataModeliContainer context; 
private void Form1_Load(object sender, EventArgs e)
{
    context = new BeygirDataModeliContainer()        
    beygirBindingSource.DataSource = context.BeygirSet; 
}
private void ApplyButton(object sender, EventArgs e)
{
    context.SaveChanges();
}

private void CancelButton(object sender, EventArgs e)
{
    context.Dispose();  
    context = new BeygirDataModeliContainer()
    beygirBindingSource.DataSource = context.BeygirSet;
    gridControl1.RefreshDataSource();
} 
```

# python - 如何在列表中的列表中找到 x

> ID：15204510
> 
> 赞同：-2
> 
> 时间：2013-03-04T15:01:29.480
> 
> 标签：python, list

```
a_list = [1,2,3,4,[42,'Meaning of life']]
def some_function('Meaning of life')
# insert code here
return 42 
```

我怎样才能做到这一点。显然，我可以通过以下方式找到“生命的意义”：

```
for i in a_list:
    if i == "Meaning of life":
        print i 
```

现在，如果它在列表中，我如何找到该元素，然后找到它旁边的元素？

我特意让我的代码将该列表中的所有内容附加到第一个值或整数之后的字符串中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:22:58.740

```
>>> def search(needle, haystack):
        for element in haystack:
            if not isinstance(element, list):
                if element == needle:
                    return True
            else:
                found = search(needle, element)
                if found:
                    return element[0]

>>> a_list = [1,2,3,4,[42,'Meaning of life']]
>>> print search('Meaning of life', a_list)
42
>>> print search('Anything else', a_list)
None 
```

# ios - SKProductsRequest 返回空结果

> ID：15204511
> 
> 赞同：3
> 
> 时间：2013-03-04T15:01:35.133
> 
> 标签：ios, xcode, ios5, in-app-purchase

我查看了其他一些答案，但它们似乎对我的情况没有帮助。我有一个新应用程序，它的初始版本几乎已准备好，我正在处理应用程序内购买部分。我在以前的应用程序中使用过 IAP，所以我认为迁移应该是直截了当的。然而，问题是，每当我运行 SKProductsRequest 时，它都会返回一个空结果集。

我正在使用以下内容提出请求

```
productIdentifierList = [[NSMutableArray alloc] init];
[productIdentifierList addObject:[NSString stringWithFormat:@"xxxxxxxxxx"]];

SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithArray:productIdentifierList]]; 
```

回应去

```
-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {
    NSLog(@"Recieved Product Response %@",response.products);
    [productDetailsList addObjectsFromArray: response.products];
    [productDisplayTableView reloadData];
} 
```

我只是似乎没有得到任何返回的结果。我检查了身份证，他们似乎没问题；我也通过 Xcode 从我的 iPhone 设备运行，但仍然没有运气。调试器中的响应也不会泄露太多。

任何人都可以建议一些解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:57:52.253

事实证明，在新版本的 IOS 中，您不再需要输入应用程序的完整 id，然后输入 iap id。相反，只需输入 iap id。

```
[productIdentifierList addObject:[NSString stringWithFormat:@"iap_id"]]; 
```

# batch-file - FTP 时更改 bat 文件中的远程目录

> ID：15204519
> 
> 赞同：0
> 
> 时间：2013-03-04T15:01:54.813
> 
> 标签：batch-file, ftp

我有这个当前的 bat 文件：

```
echo user etm124> ftpcmd.dat
echo testing123>> ftpcmd.dat
echo cd C:\Documents and Settings\etm124\Desktop\>> ftpcmd.dat
echo mput *.txt>> ftpcmd.dat
echo quit>> ftpcmd.dat
ftp -i -n -s:ftpcmd.dat ftp.DriveHQ.com
del ftpcmd.dat 
```

如您所见，我正在连接到一个免费的 FTP 服务，并将所有 .txt 文件上传到我的桌面上。在上传之前，如何更改上传文件的远程目录。

使用当前脚本，它只是上传到根目录。如果我想上传到一个`Text Files`目录，我将如何完成这个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:12:04.113

使用`cd`命令。目前，您的`cd`命令正在尝试将 ftp 服务器上的目录设置为`C:\Documents and Settings\etm124\Desktop\.`

1.  从文件中拉出您拥有的当前`cd`命令`.dat`。

2.  向文件添加`cd`命令以`.dat`设置要将文件上传到的目录。

    ```
    cd C:\Documents and Settings\etm124\Desktop\
    echo user etm124> ftpcmd.dat
    echo testing123>> ftpcmd.dat
    echo cd ftpserver\folder\>> ftpcmd.dat
    echo mput *.txt>> ftpcmd.dat
    echo quit>> ftpcmd.dat
    ftp -i -n -s:ftpcmd.dat ftp.DriveHQ.com
    del ftpcmd.dat 
    ```

见[http://www.cs.colostate.edu/helpdocs/ftp.html](http://www.cs.colostate.edu/helpdocs/ftp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T13:08:41.010

我知道问题是关于更改远程目录，但是如果您想在运行 ftp 脚本时更改本地目录（如示例代码的第 3 行），请使用该`lcd`命令。

```
echo lcd C:\Documents and Settings\etm124\Desktop\>> ftpcmd.dat 
```

# java - GWT/GXT 国际化问题

> ID：15204521
> 
> 赞同：1
> 
> 时间：2013-03-04T15:01:56.280
> 
> 标签：java, gwt, internationalization, constants, gxt

我正在尝试将 _ro.properties 文件添加到我的 Sencha GXT 应用程序中。

问题是该应用程序完全忽略了我的语言环境并使用默认的 .properties 文件。

这些文件被添加到同一个包（“client.constants”）中，如下所示：

登录窗口常量.java：

```
package com.itsix.logbook.client.constants;

import com.google.gwt.i18n.client.Constants;

public interface LoginWindowConstants extends Constants {
@DefaultStringValue("Login to Amsterdam Arena logbook")
String title();

@DefaultStringValue("Login")
String loginButtonLabel();

@DefaultStringValue("Username")
String userNameFieldLabel();

@DefaultStringValue("Password")
String passwordFieldLabel();

    @DefaultStringValue("Forgotten password")
    String forgottenPasswordButtonLabel();
} 
```

LoginWindowConstants_ro.properties：

```
$PP_OFF
title=Login to Amsterdam Arena Logbook - RO Properties
loginButtonLabel=Login
userNameFieldLabel=Username
passwordFieldLabel=Password
forgottenPasswordButtonLabel=Forgotten Password 
```

在 .xml 文件中添加了以下内容

```
 <!-- Other module inherits                                      -->
      <inherits name="com.google.gwt.i18n.I18N"/>

  <!--  supported locale settings -->
  <extend-property name="locale" values="ro" /> 
```

我希望有更多经验的人可以让我知道我缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:19:14.733

您的代码只是使语言环境可用

它应该通过向 url 添加参数来工作

> xyz.com?locale=ro

要将俄语设置为默认值，您应该使用[（如 GWT 文档中所述）](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale)：

```
 <!-- SETS AS THE DEFAULT -->
 <set-property-fallback name="locale" value="ro"/> 
```

# ios - 可访问性标识符生成

> ID：15204523
> 
> 赞同：0
> 
> 时间：2013-03-04T15:01:57.263
> 
> 标签：ios, xcode, interface-builder, uistoryboard

某些测试和 UI 库需要为情节提要或 xib 中的 UI 组件设置可访问性标识符。我想用一些约定来转换整个项目，比如使用映射的属性名称作为标识符，但任何东西都会有用。有没有办法为项目中的 xib/storyboard 定义的视图自动生成可访问性标识符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:29:29.213

我不知道在 Xcode 中执行此操作的方法，因此我认为您必须编写一个小脚本或程序来直接操作 plist 文件。

另一种选择是以编程方式设置标识符。您可以编写一个辅助函数来遍历视图层次结构，并且对于设置了可访问性标签的任何元素，设置标识符（使用您喜欢的任何约定），这将从`viewDidLoad`.

# ios - 集合视图中的分页未正确居中

> ID：15204524
> 
> 赞同：7
> 
> 时间：2013-03-04T15:02:06.407
> 
> 标签：ios, uicollectionview

我有一个启用了分页的 UICollectionView，并且水平移动的各个视图没有正确居中。我已确保视图与屏幕的宽度相同。

关于如何强制 UICollectionView 水平分页视图的任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T04:43:34.790

您必须确保您的部分插图 + 行距 + 单元格宽度都完全等于 CollectionView 的边界。我在自定义 UICollectionViewFlowLayout 子类上使用以下方法：

```
- (void)adjustSpacingForBounds:(CGRect)newBounds {
  NSInteger count = newBounds.size.width / self.itemSize.width - 1;

  CGFloat spacing = (newBounds.size.width - (self.itemSize.width * count)) / count;

  self.minimumLineSpacing = spacing;

  UIEdgeInsets insets = self.sectionInset;
  insets.left = spacing/2.0f;
  self.sectionInset = insets;
} 
```

您必须记住 UICollectionView 只是 UIScrollView 的子类，因此它不知道您希望分页如何工作。在 UICollectionView 之前，您必须在布置 UIScrollView 的子视图时处理所有这些数学运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T10:01:32.393

覆盖方法：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {
    *targetContentOffset = scrollView.contentOffset; // set acceleration to 0.0
    float pageWidth = (float)self.articlesCollectionView.bounds.size.width;
    int minSpace = 10;

    int cellToSwipe = (scrollView.contentOffset.x)/(pageWidth + minSpace) + 0.5; // cell width + min spacing for lines
    if (cellToSwipe < 0) {
        cellToSwipe = 0;
    } else if (cellToSwipe >= self.articles.count) {
        cellToSwipe = self.articles.count - 1;
    }
    [self.articlesCollectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:cellToSwipe inSection:0] atScrollPosition:UICollectionViewScrollPositionLeft animated:YES];
} 
```

# java - 程序为 println(String s) 提供了正确的输出；但不是 print(String s); 为什么？

> ID：15204526
> 
> 赞同：4
> 
> 时间：2013-03-04T15:02:18.847
> 
> 标签：java, eclipse, string, printing

以下是我遇到问题的代码：

```
public class testOutput {

    public static void main(String[] args) throws Exception {

        int count = 50000;
        String s = "Vinjith";

        for(int i=0;i<count;i++) {
            System.out.print(s);  // change this to println(s); and it works! 
            System.out.flush();
        }
    }

} 
```

我正在使用 Eclipse Galileo - jdk 1.6/jre6。

*   我没有对控制台输出设置任何限制。
*   我也用 BufferedWriter 尝试过相同的程序：不起作用
*   它在变量`count = 584;`不超过该值时起作用。
*   当我使用 System.out.print(s); 时，我没有得到任何输出；但是当我使用 System.out.println(s); 我得到了 50000 行字符串“Vinjith”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:11:56.497

这是因为在同一行中有太多字符，而 Eclipse 在其控制台上不支持该字符（您将在控制台上看不到任何打印内容）。在命令行上尝试相同的代码，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:21:32.847

这是因为您在 Eclipse 控制台上打印的字符长度超出了限制。

试试这个，看看它是否打印。

```
System.out.print(s);  // change this to println(s); and it works!
System.out.println();
System.out.flush(); 
```

另外，关于限制问题，请尝试一下。在**首选项 -> 运行/调试 -> 控制台中，会有一个名为****Fixed Width Console**的复选框。它的最大限制是`1000`。尝试制作`1000`并运行您的原始代码，如下所示。你会看到它打印了一些字符，其余的则抛出一个`Internal Error`.

```
System.out.print(s);  // change this to println(s); and it works!
System.out.flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:11:37.500

你有没有试过这个：

```
 for(int i=0;i<count;i++) {
        System.out.print(s);  // change this to println(s); and it works! 
    }
    System.out.println("---done");
    System.out.flush(); 
```

当您尝试计数值（100、500、1000、2000、10000 等）时会发生什么？

请发布它何时工作的输出以及“计数”是什么。

我之前研究过问题，`flush()`归结为您的操作系统如何在内部处理缓冲区。大多数 JRE 只定义接口，然后依赖操作系统来实现实际行为，在某些情况下它会变得很奇怪。 [请参阅我](https://stackoverflow.com/a/6987460/135078)对类似问题的回答。

# jprofiler - 无法连接到 JProfiler

> ID：15204528
> 
> 赞同：1
> 
> 时间：2013-03-04T15:02:21.610
> 
> 标签：jprofiler

我无法成功连接 JProfiler 7.2.2。

在我的应用程序中，他们有一个在 Linux 框中使用的检测启动代码。我已添加`-agentpath:/opt/jprofiler7/bin/linux-x64/libjprofilerti.so=port=8849,nowait`到启动代码中。

我在启动日志中看到以下详细信息：

```
JProfiler> VM initialized
JProfiler> Hotspot compiler enabled
JProfiler> WARNING: Dangerous VM parameters detected: [-XX:+UseConcMarkSweepGC]
JProfiler> The profiling interface of the JVM might crash for certain operations
Setting system properties.
[MySystemClassLoader@4506411] warning javax.* types are not being woven because the weaver option '-Xset:weaveJavaxPackages=true' has not been specified
Starting MyApp 
```

但是，当我从 Windows PC 从远程客户端连接时，它会挂起一段时间并超时。

此外，启动参数中存在以下参数：

```
-Xmx4096m                             \
-XX:PermSize=512m                     \
-XX:MaxPermSize=512m                  \
-XX:+HeapDumpOnOutOfMemoryError       \
-XX:HeapDumpPath=/opt/CSCOlumos/crash \
-XX:ThreadStackSize=256               \
-XX:+UseConcMarkSweepGC               \
-XX:ParallelGCThreads=5               \
-XX:NewRatio=2 
```

这些参数中的任何一个都会导致 JProfiler 连接出现问题吗？

# reporting-services - 计数表达式 SSRS 报告

> ID：15204530
> 
> 赞同：21
> 
> 时间：2013-03-04T15:02:22.577
> 
> 标签：reporting-services, count, expression, ssrs-expression

试图计算`column=Yes` 我的报告中有两列接受和拒绝的列中的所有行。

我正在尝试计算接受=是的行并为拒绝做说。

我试过这些：

```
=COUNT(IIF(Fields!accepted.Value="Y",1,0))
=COUNT(IIF(Fields!rejected.Value="Y",1,0))   
=COUNT(FIELDS!accepted.value="Y")
=COUNT(FIELDS!rejected.value="Y") 
```

这个表达式计算每一行，而不是仅仅计算那些`"Y"`

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-04T15:10:34.100

您可以通过以下几种方式做到这一点：

```
SUM(IIF(Fields!accepted.Value="Y",1,0)) 
```

或者

```
COUNT(IIF(Fields!accepted.Value="Y",1,Nothing)) 
```

COUNT 是所有行的计数，因此即使返回 0，它也会包含在计数中。这就是为什么返回*Nothing*应该可以解决问题的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-21T16:06:31.673

=SUM(IIf(Fields!Doc_Type.Value = "Shipments", 1, 0), "YourDataSetName")

这对我有用，没有错误。在另一个帖子上看到了这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-28T09:52:15.150

您可以尝试使用“与”运算符同时检查这两个条件。

```
=COUNT(IIF(Fields!accepted.Value ="Y" And Fields!rejected.value="Y",1,0)) 
```

# jquery - 从 jquery 或主干中的 div 获取最后一个链接

> ID：15204531
> 
> 赞同：0
> 
> 时间：2013-03-04T15:02:22.920
> 
> 标签：jquery, html, templates, backbone.js, view

我有以下模板

```
 <div id="aboutCompletedTasksContainer">
        <div id="completedTasksContainer">
            <a href="#{langPath}/#projects-#{projectID}/tasks/completed">
                <h:outputFormat value="#{msgProPro.Panel_Tasks_Completed_Detail}" escape="false">
                    <f:param value="#{numberOfCompletedTasks}"/>
                    <f:param value="#{numberOfTasksListsWithCompletedTasks}"/>
                </h:outputFormat>
            </a>
        </div> 
```

如您所见，在每个链接之后都会显示一个逗号。我需要参考显示的最后一个链接并删除逗号。如何在 jquery 或骨干网中管理它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:08:40.867

在 JQuery 中使用最后一个子选择器：$("div a:last-child")

请参阅[有关最后一个子选择器的 JQuery 文档](http://api.jquery.com/last-child-selector/)

# iphone - iPhone Phonegap 分配电话号码崩溃

> ID：15204532
> 
> 赞同：0
> 
> 时间：2013-03-04T15:02:25.873
> 
> 标签：iphone, cordova

我正在尝试将字符串分配给新的联系电话号码。

```
 alert(email +"" + brokerNombre+ "" + phoneNumber);
            var myContact = navigator.contacts.create();
            myContact.displayName = "Hi";
            myContact.phoneNumbers = [phoneNumber]; 
```

设置 .phoneNumbers 会导致：

2013-03-04 08:58:35.294 Concierge [6489:c07] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[<__NSCFString 0xa24af10> valueForUndefinedKey:]：此类不符合键值编码核心价值。' *** First throw call stack: (0x14f012 0x26bae7e 0x1d7fb1 0x12a9d1d 0x121600b 0x1215fbd 0x2c5b7 0x2c8bb 0x2cb0c 0x2b12a 0xe7a6 0xfb6c 0x2b65731 0x2b74014 0x2b647d5 0xf5af5 0xf4f44 0xf4e1b 0x34eb7e3 0x34eb668 0x38affc 0x2bfc 0x2b55) libc++abi.dylib: terminate called throwing an exception (lldb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:46:56.877

试试 myContact.phoneNumbers = phoneNumber; 通过删除方括号。

# java - 哪个系列最适合这个

> ID：15204536
> 
> 赞同：0
> 
> 时间：2013-03-04T15:02:32.787
> 
> 标签：java, data-structures, collections

我有 100 个员工对象。Employee 对象有姓名、年龄、薪水。我应该在某个时候检索一个或多个具有特定名称的员工。

我只是在想

```
HashMap<String, List> 
```

名称输入到键中，所有对象都输入到列表中。

我知道地图不是一个集合：P

任何关于最佳收藏而不是地图的想法。随时取回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:06:49.820

您应该首先创建`Employee`包含所有相关字段（姓名、年龄、薪水等）的类，然后您可以使用`HashMap`：

```
 Map<String, Employee> map = new HashMap<String, Employee>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:24:56.720

如果你有一个`List<Employee>`并且你想按名称或年龄等过滤列表，我猜[lambdaj](http://code.google.com/p/lambdaj/)很适合这个目的。

这是一个示例，假设您要按姓名过滤所有员工：

```
HasArgumentWithValue<Employee, String> matcher = Lambda.having(Lambda.on(Employee.class).getName(), Matchers.equalTo(name));
List<Employee> filteredEmployess = Lambda.filter(matcher, allEmployess); 
```

通过静态导入，上面的代码将是：

```
List<Employee> filteredEmployess = filter(having(on(Employee.class).getName(), equalTo(name)), employees); 
```

[您可以在此处](http://code.google.com/p/lambdaj/wiki/LambdajFeatures)找到更多示例

对于年龄，查找年龄超过 30 岁的员工会很有用：

```
HasArgumentWithValue<Employee, Integer> matcher = Lambda.having(Lambda.on(Employee.class).getAge(), Matchers.greaterThan(30)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:20:26.780

如果您想使用**Employee**类中的 name 属性作为键，请确保您没有同名的员工。该地图使用一个键，在您的情况下是一个字符串，并且每个键都必须是唯一的。如果他们是你对 HashMap< **String** name, Employee> 没问题。

（创建具有所有属性的**Employee类）**

但是，如果它们不是唯一的，许多员工可以有相同的名字，您应该考虑向**Employee**类添加一个属性。就像是

```
private int ID; 
```

并将其用作键，如下所示：

```
HashMap<int, Employee> 
```

HashMap 在时间复杂度上非常好。平均而言，*get()*调用将获得时间 T(n) = O(1)（即在恒定时间内）。*看跌*期权也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:11:29.810

我不知道为什么 HashMap 不适合您的需求，但是如果您希望能够迭代所有员工（就好像它是一个集合一样），您仍然可以使用：

```
Map<String, List<Employee>> map = new HashMap<String, List<Employee>>();

// populate your map

for (List<Employee> list : map.values()) {
  for (Employee employee : list) {
    // do something
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T15:12:12.040

> 我应该在某个时候检索一个**或多个**具有**特定名称**的员工。

从上面的行中，我认为您有多个同名的员工。如果是这种情况，我建议使用 guava 的**Multimap**。例如[HashMultimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashMultimap.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T15:04:07.410

虽然**Map**没有扩展**Collection**类；但 Map 仍然是 Collection 的一种。因此，如果您的目的是由**HashMap**服务的；然后会建议去。

```
 HashMap<String, Employee> map = new HashMap<String, Employee>(); 
```

# c# - Windows 8 RT 上的 USB CDC

> ID：15204538
> 
> 赞同：1
> 
> 时间：2013-03-04T15:02:40.907
> 
> 标签：c#, .net, windows-8, cdc

Windows 应用商店应用程序能否通过虚拟 COM 端口与 USB 连接的设备进行通信？

此类应用程序的框架是否包含 SerialPort 类？

如果没有，我可以通过什么其他方式在设备和应用程序之间建立连接？

所有这一切都假设 Classic Desktop 不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:56:00.247

你不是第一个问的。但让我第一个回答：[http ://blog.jerrynixon.com/2012/05/metro-answers-can-i-use-serial-port.html](http://blog.jerrynixon.com/2012/05/metro-answers-can-i-use-serial-port.html)

最简洁的答案是不。除了这个例外：设备在 USB（带有加密狗）上，带有一个公开 IOCTLS 设备信息的现代驱动程序——这使 Windows Store Apps 设备访问。

# c - GAUT HLS 工具错误：“没有替代工艺，无法选择最佳工艺”

> ID：15204541
> 
> 赞同：-1
> 
> 时间：2013-03-04T15:02:45.733
> 
> 标签：c, vhdl

我正在尝试使用 GAUT 工具合成以下 C 代码：

```
#define N 16

int main (const int tab[N], int* out)
{

//  static const int tab[N] =        {98,-39,-327,439,950,-2097,-1674,9883,9883,-1674,-2097,950,439,-327,-39,98};

  int k = 0, i=1;

  for( i = 1; i < N; i++)
{   

      // invariant : k est l'indice du plus petit
      // élément de x[0..i-1]
      if(tab[i] < tab[k])
          k = i;
}

  *out = tab[k];
  return 0;     
 } 
```

查找数组中最小值的简单程序。它成功编译，生成了一个看起来很诚实的 DFG。但是，当我尝试合成时，我收到此错误：“没有可替代的处理，无法选择最佳的”，因此无法继续执行流程。

有谁知道是什么问题？我也面临着其他此类小型测试程序。希望有专业人士能解答。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:35:58.690

由于这是标记为 VHDL，因此可能值得直接查看 VHDL 端口，完全绕过该工具。这只花了几分钟，它分为三个部分：

1) VHDL 有一个怪癖，即使用数组作为端口参数，它必须是命名类型（int_array）。（C 有一个不同的传递数组的怪癖：它没有，而是传递一个指针）

```
package Types is
type int_array is array (natural range <>) of integer;
end Types;

package body Types is
end Types; 
```

2) 起作用的部分：我将 C 代码作为注释留下来说明它们的对应程度：

```
use Work.Types.all;

-- int main (const int tab[N], int* out)
entity MinArray is
   Generic ( N : Natural);
   Port ( Tab : in int_array;
           Output : out integer );
end MinArray;

architecture Behavioral of MinArray is
--  int k = 0, i=1;
-- for( i = 1; i < N; i++)
--   {   
--      if(tab[i] < tab[k])
--          k = i;
--   }
--  *out = tab[k];
--  return 0;     
--}
begin
   Process(Tab) is
    variable k : natural;
    begin
       k := 1;
       for i in tab'range loop
           if tab(i) < tab(k) then
               k := i;
          end if;
        end loop;
       Output <= tab(k);
    end process;
end Behavioral; 
```

3）测试工具：

```
 use Work.Types.all;

  ENTITY tester IS
     Port ( Minimum : out integer );
  END tester;

  ARCHITECTURE behavior OF tester IS 

--#define N 16
-- static const int tab[N] =        {98,-39,-327,439,950,-2097,-1674,9883,9883,-1674,-2097,950,439,-327,-39,98};

  constant N : natural := 16;
  constant tab : int_array (1 to N)  := (98,-39,-327,439,950,-2097,-1674,9883,9883,-1674,-2097,950,439,-327,-39,98 );

  BEGIN
          uut: entity work.MinArray 
                Generic Map (N => N)
                PORT MAP(
                Tab => Tab,
                 Output => Minimum );

  END; 
```

请注意，这在 Xilinx XST 中都是可综合的，

```
Advanced HDL Synthesis Report

Macro Statistics
# RAMs                                                 : 1
 32x32-bit single-port distributed Read Only RAM       : 1
# Comparators                                          : 15
 32-bit comparator greater                             : 15
# Multiplexers                                         : 32
 1-bit 2-to-1 multiplexer                              : 24
 2-bit 2-to-1 multiplexer                              : 1
 3-bit 2-to-1 multiplexer                              : 4
 4-bit 2-to-1 multiplexer                              : 3 
```

但是（因为输入表是一个常量数组）上述所有硬件在优化阶段都消失了。

现在在高层次综合中重要的事情之一是探索不同的数据类型，例如不同的字宽；例如存储测试数据所需的 15 位字。为了探索这一点，让我们修改“Types”包如下：

```
type small_int is range -16384 to 16383;
type int_array is array (natural range <>) of small_int; 
```

我还将输出端口类型更改为 small_int。从综合报告中我们可以看出，硬件使用量也相应减少了。

```
Macro Statistics
# RAMs                                                 : 1
 32x15-bit single-port distributed Read Only RAM       : 1
# Comparators                                          : 15
 15-bit comparator greater                             : 15
# Multiplexers                                         : 32
 1-bit 2-to-1 multiplexer                              : 24
 2-bit 2-to-1 multiplexer                              : 1
 3-bit 2-to-1 multiplexer                              : 4
 4-bit 2-to-1 multiplexer                              : 3 
```

所以也许一个问题是：C 工具使探索设计空间（如自定义字宽）变得多么容易？

# javascript - SQLite 回调高效解决方案

> ID：15204542
> 
> 赞同：2
> 
> 时间：2013-03-04T15:02:46.037
> 
> 标签：javascript, sqlite

我想使用 JavaScript 运行一系列 SQLite 查询。这些查询获取几个表的最新更新时间戳。例如：

```
SELECT last_updated FROM students ORDER BY last_updated DESC LIMIT 1;

SELECT last_updated FROM docs ORDER BY last_updated DESC LIMIT 1;

SELECT last_updated FROM logs ORDER BY last_updated DESC LIMIT 1;

SELECT last_updated FROM requests ORDER BY last_updated DESC LIMIT 1; 
```

然后我会将这些 last_updated 时间戳发送到服务器。当我想到如何做到这一点时，我会使用这样的东西：

```
var message = {};
sql('QUERY 1',[],function(row){
    message.q1 = row.shift().shift(); // first row, first item
    sql('QUERY 2',[],function(row){
        message.q2 = row.shift().shift();
        sql('QUERY 3',[],function(row){
            message.q3 = row.shift().shift();
            sql('QUERY 4',[],function(row){
                message.q4 = row.shift().shift();
                $.ajax('submit.php',{ // tell the server these things.
                    data: message,
                    type: 'POST',
                    success: function(response) {
                        console.log('Server replied: '+response+'\n');
                    },
                    error: function() {
                        console.log('HUHU.\n');
                    }
                }
            });
        });
    });
}); 
```

这会起作用，但由于嵌套的 SQL 调用，我发现这非常低效。在某些情况下，我需要来自 10 个不同表的数据。

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:06:29.453

对于这样的嵌套结构，您可以使用类似**[step](https://github.com/creationix/step)**的东西。

它将允许您使用如下语法：

```
Step(
  function readSelf() {
    fs.readFile(__filename, this);
  },
  function capitalize(err, text) {
    if (err) throw err;
    return text.toUpperCase();
  },
  function showIt(err, newText) {
    if (err) throw err;
    console.log(newText);
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:07:06.743

您可以做的一件事是“并行”进行调用，并使用“屏障”模式来查看它们何时完成。

```
var calls_to_go = 4;
var callback = function(){
   calls_to_go -= 1;
   if(calls_to_go <= 0){
     do_ajax_stuff();
   }
}

sql('QUERY 1',[], callback);
sql('QUERY 2',[], callback);
sql('QUERY 3',[], callback);
sql('QUERY 4',[], callback); 
```

当然，这个特定的代码只是为了给出一个想法。如果您使用其中一个异步编程库，它们都应该具有一些使编写此类事情更愉快的功能，如果您仍然想手工做事情，您应该确保事情更有条理，“4”是'没有硬编码，等等。

# regex - 用空格分割的多个单词的正则表达式

> ID：15204543
> 
> 赞同：4
> 
> 时间：2013-03-04T15:02:47.117
> 
> 标签：regex

我正要把头撞在桌子上，这让我的同事们很开心。我目前有以下正则表达式

```
(^[\w](( \w+)|(\w*))*[\w]$)|(^\w$) 
```

我想要它做的是匹配任何只包含字母数字字符、没有前导或尾随空格并且单词之间不超过一个空格的字符串。

在这种情况下，单词被定义为一个或多个字母数字字符。

这符合我想要的大部分内容，但是通过测试它还认为第二个单词的长度必须是 2 个字符或更多。

**测试：**

```
ABC - Pass
Type 1 - Fail
Type A - Fail
Hello A - Fail
Hello Wo - Pass
H A B - Fail
H AB - Pass
AB H - Fail 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T15:09:41.793

你的正则表达式很接近。你的两个字符问题的原因在这里：

```
(^[\w](( \w+)|(\w*))*[\w]$)|(^\w$)
       right here ---^ 
```

在匹配 group 之后`( \w+)`，即一个空格后跟一个或多个`\w`，由于空格，第一个单词之后的每个单词都必须匹配，然后你有另一个强制性`\w`- 这要求字符串中的最后一个单词有两个或多个字符。把那个拿出来应该没问题：

```
(^[\w](( \w+)|(\w*))*$)|(^\w$) 
```

一个更简单的版本是：

```
^\w+( \w+)*$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:27:41.373

## 将 PCRE 与 POSIX 类一起使用

首先，我们需要清理您的语料库，因为它们包含破折号。接下来，我们添加一两行肯定会失败的代码，这样我们就有了一条悲伤的测试路径。这会产生以下语料库：

```
# /tmp/corpus
ABC
Type 1
Type A
Hello A
Hello Wo
H A B
H AB
AB H
ab $ cd 
```

接下来，我们将锚定的 Perl 兼容正则表达式与仅包含字母数字值的 POSIX 类一起使用。我们使用负前瞻来防止尾随空格，但允许单词之间有一个空格。

```
$ pcregrep '^([[:alnum:]]+(?!= $) ?)+$' /tmp/corpus
ABC
Type 1
Type A
Hello A
Hello Wo
H A B
H AB
AB H 
```

正如预期的那样，这会产生您期望的 8 条有效行。成功！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:34:42.403

\w 将匹配 _ 以及字母数字。因此，如果您不想匹配下划线，则必须改用 [a-zA-Z\d] 。

以下表达式应满足您的需求：

> ^[a-zA-Z\d]+(?: [A-Za-z\d]{2,})*$

或者，如果不支持 {min,max} 重复，您可以使用以下内容。

> ^[A-Za-z\d]+(?: [A-Za-z\d][A-Za-z\d]+)*$

我们需要 {min,max} 或双字符组，因为您要求从第二个单词开始最少 2 个字符。

如果允许使用下划线，则以下表达式会更好：

> ^\w+(?: \w{2,})*$

或没有 {min,max}：

> ^\w+(?: \w\w+)*$

# java - 为什么nio java使用管道而不是等待/通知多线程通信？

> ID：15204544
> 
> 赞同：4
> 
> 时间：2013-03-04T15:02:47.663
> 
> 标签：java, multithreading, pipe, mutex, nio

选择器使用管道**唤醒**其他在 Linux 下执行 select() 方法的阻塞线程。

为什么不使用 wait/notify 或 conditon.await/signal() 与线程通信？

# matplotlib - 带有 plt.show (matplotlib) 的帧缓冲图像查看器 (FBI)

> ID：15204546
> 
> 赞同：2
> 
> 时间：2013-03-04T15:02:48.080
> 
> 标签：matplotlib

我想在不启动 X 服务器的情况下从命令行绘制我的动画图。我发现 FBI（帧缓冲图像查看器）可以做到这一点。但是我不确定这将如何工作我试图将它添加到我的代码中：

```
fbi plt.show() 
```

但是，这不起作用。我不想 startx 的原因是因为我使用的是 Raspberry Pi，因此不想浪费资源。有没有在不启动 X 的情况下从命令行查看动画情节？

谢谢！

# ios - 无限循环试图从 IB 中的 xib 创建自定义视图

> ID：15204547
> 
> 赞同：4
> 
> 时间：2013-03-04T15:02:48.347
> 
> 标签：ios, uiview, ios6

这是这个问题的后续（[custom UIView how-to with IB / Xcode 4.5.1 and iOS Simulator 6.0](https://stackoverflow.com/questions/15195349/custom-uiview-how-to-with-ib-xcode-4-5-1-and-ios-simulator-6-0)），但没有必要阅读 - 这是我第一次尝试创建自定义 UIView，显然有些东西对于您可以提供的任何帮助，我不会提前得到任何帮助。

我有一个从 Interface Builder 派生的自定义 UIView。我想将设置大小设置为 200w x 200h 并将背景颜色设置为绿色。当我创建时，我做了以下事情：

1.  通过 File -> New -> Objective-C Class 创建了一个新的自定义 UIView，名为 Tview
2.  通过 File -> New -> User Interface -> View 创建了一个新视图并将其命名为 tnib
3.  在画布中，我删除了视图并从对象检查器中添加了一个新视图，并将类名设置为 Tview。此外，在属性检查器中，我将大小设置为自由形式，将背景颜色设置为绿色。在 Size Inspector 中，我将宽度设置为 200，将高度设置为 200。

在我的 Tview.m 中，我设置了以下内容（我根据其他 SO 问题进行了一些更新，但尚不清楚这些是否仍然是最新的或准确的）：

```
@implementation Tview

-(id) initWithCoder:(NSCoder *)aDecoder
{
  NSLog(@"in initWithCoder");
  if((self = [super initWithCoder:aDecoder])) {
    [self setUpView];
    }
  return self;
}

-(void)awakeFromNib
{
  NSLog(@"in awakeFromNib");
  [self setUpView];
}

-(void)setUpView
{
    NSLog(@"I am in setUpView");
    NSArray *subviewArray=[[NSBundle mainBundle] loadNibNamed:@"tnib" owner:self options:nil];
    UIView *mainView = [subviewArray objectAtIndex:0];
    [self addSubview:mainView];
}

@end 
```

在我的 ViewController.xib 中，我拖出一个 UIView 并将自定义类名称设置为 Tview。我#import Tview.h 文件并从 ViewController.xib 拖到 Tview.h 并创建以下属性：

```
@property (strong, nonatomic) IBOutlet Tview *myTview; 
```

我构建并运行并获得以下 hte 的无限循环：

```
2013-03-04 06:49:05.452 Nibtest2[44524:11303] in initWithCoder
2013-03-04 06:49:05.455 Nibtest2[44524:11303] I am in setUpView
2013-03-04 06:49:05.456 Nibtest2[44524:11303] in initWithCoder
2013-03-04 06:49:05.458 Nibtest2[44524:11303] I am in setUpView
2013-03-04 06:49:05.459 Nibtest2[44524:11303] in initWithCoder
2013-03-04 06:49:05.460 Nibtest2[44524:11303] I am in setUpView 
```

直到它最终崩溃。

我在这里做错了什么？

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:31:56.197

您的代码设置了一个无限递归：`initWithCoder:`调用`setUpView`，它从一个包中实例化一个新`UIView`的，从而`initWithCoder:`间接调用，并完成循环。

您不应该在读取相同 NIB 时调用的代码中访问 NIB。您应该在包含对象的代码中阅读 NIB，而不是在`Tview`对象本身的代码中。否则，你会得到一个无限循环。

您需要完全远程，以及来自和 的`setUpView`调用。看来，您通过从对象检查器中拖出在界面构建器中建立的连接已经导致 NIB 文件正确加载，如. 您可能需要的唯一行是：`awakeFromNib``initWithCoder:``initWithCoder:`

```
[self addSubview:mainView]; 
```

但是，它不应该在`Tview`'s 代码中：它需要移动到具有该`myTview`属性的父控制器，并且应该修改为

```
[self.view addSubview:_myTview]; 
```

将此行添加到`viewDidLoad`. 它应该解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-05T09:36:27.127

实际上，我对这个问题的解决方案是，在我的 CustonViewController 中的 viewDidLoad 中加载视图，我想在其中使用这样的视图：

```
myAccessoryView = NSBundle.mainBundle().loadNibNamed("MyAccessoryView", owner: self, options: nil)[0] as! MyAccessoryView 
```

不要在`loadView()`方法中加载视图！loadView 方法用于为您的自定义 ViewController 加载视图。

# ruby-on-rails - 如何使 Devise 身份验证仅响应 JSON？

> ID：15204549
> 
> 赞同：10
> 
> 时间：2013-03-04T15:02:58.640
> 
> 标签：ruby-on-rails, json, devise

如何在设计处理 HTML 和 XML 请求时禁用并仅保留 JSON？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-02T13:51:29.247

我想你可以覆盖设计控制器：

在`controllers/devise_overrides/sessions_controller.rb`：

```
class DeviseOverrides::SessionsController < Devise::SessionsController

  respond_to :json
  respond_to :html, only: []
  respond_to :xml, only: []

end 
```

在`routes.rb`：

```
devise_for :users, controllers: {
  sessions:  "devise_overrides/sessions"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-26T20:20:59.220

您必须`clear_respond_to`（清除之前定义的所有类型，如 HTML 或 XML），然后`respond_to :json`在覆盖控制器中...

**配置/路由.rb**

```
devise_for :users , controllers: {
  sessions: 'users/sessions',
  registrations: 'users/registrations'
} 
```

**控制器/用户/会话**

```
class Users::SessionsController < Devise::SessionsController
    clear_respond_to 
    respond_to :json
end 
```

**控制器/用户/注册**

```
class Users::/RegistrationsController < Devise::RegistrationsController
    clear_respond_to 
    respond_to :json
end 
```

它适用于我的 Rails 5.2！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-26T12:27:00.247

```
module DeviseOverrides
  class SessionsController < Devise::SessionsController
    # Respond only to JSON calls
    clear_respond_to
    respond_to :json
  end
end 
```

# jquery - jQuery 验证和警报

> ID：15204552
> 
> 赞同：1
> 
> 时间：2013-03-04T15:03:04.763
> 
> 标签：jquery, validation, alert

我正在使用外部验证库来检查是否填写了字段。这工作正常。

然后，当所有字段都已正确填写并且用户点击提交时，我想显示一个警报。

这是代码：

```
<select id="selectsizes" class="required">
  <option></option>
  <option>1</option>
  <option>2</option>
</select>
<input type="Text" id="txtName" name="Name" value="" class="required">

$(document).ready(function(){
  $("#Form").submit(function() {
    if ($('.required').val() != "") {
      alert("Thank you.");
      return false;
    }
  });
}); 
```

我在原始表单中有更多的字段，这只是为了解释。如果我从选择中选择一个选项或填写输入字段，则警报将在按下提交时触发。在所有验证错误消失之前，它不应该触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:08:44.710

您需要单独检查每个输入的值，然后检查它们是否都有值等，如下所示：

```
$(document).ready(function () {
    $("#Form").submit(function () {
        var val = $.map($('.required'), function (el, i) {
            if (!$.trim(el.value).length) return el;
        });
        if (!val.length) {
            alert("Thank you.");
            return false;
        }
    });
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/g3Z6a/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:08:39.290

创建一个 var，例如`var error = false;`

循环浏览所有输入并选择是否有未填充的输入将 var 设置为 true`error = true;`

最后：

```
if (!error) {
  alert("Thank you.");
  return false;
} 
```

您可以通过以下方式循环浏览您的必填字段：

```
$('.required').each(function() {
  //DO STUFF
  if ($(this).val() == "") {
    error = true;
  }
}); 
```

# map - 如何根据给定的比例生成地图[Bing Map]？

> ID：15204555
> 
> 赞同：1
> 
> 时间：2013-03-04T15:03:12.027
> 
> 标签：map, geolocation, bing-maps, bing-api

我最近开始在 c# 的 webService [wcf] 中使用**[ *Bing Api* ]**。我想用 Bing**恢复给定比例的卫星图像！**例如

比例 1:200（地图上的 1 厘米等于世界上的 200 厘米）

当然，我发现这个函数解释了如何计算图像分辨率卫星 bing 但这不是我要找的..

```
Map resolution = 156543.04 meters/pixel * cos(latitude) / (2 ^ zoomlevel) 
```

这是我用来生成我的 bing 地图的函数，但我不知道要发送什么参数来检索 1:200 的图像比例。

*我需要 ：*

**比例 = 1:200**

*我搜索 ：*

诠释**地图大小高度**=？

int **mapSizeWidth** = ?

整数**缩放级别**= ?

```
public string GetImageMap(double latitude,double longitude,int mapSizeHeight, int mapSizeWidth, int zoomLevel)
    {
        string key = "ddsaAaasm5vwsdfsfd2ySYBxfEFsdfsdfcFh6iUO5GI4v";
        MapUriRequest mapUriRequest = new MapUriRequest();

        // Set credentials using a valid Bing Maps key
        mapUriRequest.Credentials = new ImageryService.Credentials();
        mapUriRequest.Credentials.ApplicationId = key;

        // Set the location of the requested image
        mapUriRequest.Center = new ImageryService.Location();
        mapUriRequest.Center.Latitude = latitude;
        mapUriRequest.Center.Longitude = longitude;

        // Set the map style and zoom level
        MapUriOptions mapUriOptions = new MapUriOptions();
        mapUriOptions.Style = MapStyle.Aerial;
        mapUriOptions.ZoomLevel = zoomLevel;
        mapUriOptions.PreventIconCollision = true;
        // Set the size of the requested image in pixels
        mapUriOptions.ImageSize = new ImageryService.SizeOfint();
        mapUriOptions.ImageSize.Height = mapSizeHeight;
        mapUriOptions.ImageSize.Width = mapSizeWidth;

        mapUriRequest.Options = mapUriOptions;

        //Make the request and return the URI
        ImageryServiceClient imageryService = new ImageryServiceClient();
        MapUriResponse mapUriResponse = imageryService.GetMapUri(mapUriRequest);
        return mapUriResponse.Uri;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:21:57.177

如果您还没有，您可能想查看[这篇关于 Bing 地图瓦片系统计算的文章](http://msdn.microsoft.com/en-us/library/bb259689.aspx)，您将在其中找到讨论地面分辨率和地图比例的部分。从那篇文章：

```
map scale = 1 : ground resolution * screen dpi / 0.0254 meters/inch 
```

根据您使用的 Bing 地图实现，可能无法通过精确的地图比例指定视图。我认为这是因为您无法精确控制缩放级别。例如，在 javascript ajax 版本中，您只能以整数值指定缩放级别，因此`ground resolution`上述等式的部分将谨慎地跳转。在赤道，使用 的缩放级别`21`将为您提供 的比例，使用 的缩放`1: 282`级别将为`22`您提供`1:141`。由于不能为缩放级别指定十进制值，因此无法使用 ajax 控件获得精确的 1:200 比例。我对 .net Bing Maps 控件没有丰富的经验，因此您可能需要调查该 API 以查看是否可以指定任意缩放级别。

如果您可以精确控制缩放级别并知道 dpi 值，则可以使用上面链接文章中描述的公式实现 1:200 比例。

# ios - 如何使用 FBFriendPickerViewController 设置最大好友数？

> ID：15204558
> 
> 赞同：2
> 
> 时间：2013-03-04T15:03:16.990
> 
> 标签：ios, objective-c, xcode, facebook

我一直在与 Facebook 合作制作多人游戏。我想让玩家能够从 Facebook 邀请他的朋友参加比赛，所以我为此使用了 FBFriendPickerViewController。但是，我想将所选朋友的数量限制为最少 1 名玩家和最多 4 名玩家。

问题是没有明显的方法可以做到这一点，或者至少在 Facebook 的开发人员文档中没有提到。我试图阻止这种情况

```
- (void)friendPickerViewControllerSelectionDidChange:(FBFriendPickerViewController *)friendPicker 
```

但由于属性 NSArray *selection 是只读的，因此无法完成。我也想过在用户选择朋友并单击“完成”按钮后警告用户，但让他选择 100 个朋友并警告他关于 4 名玩家的最大限制有点蹩脚。

有谁知道如何做到这一点？还是我必须从头开始实现一个完整的 FBFriendPickerViewController？

谢谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:23:14.200

一种解决方法是在选择器上显示标签/消息，让用户知道他们最多可以选择 4 个朋友。然后在选择四个之后关闭视图控制器？然后你可以添加这样的代码：

```
- (void)friendPickerViewControllerSelectionDidChange:
      (FBFriendPickerViewController *)friendPicker
{
    if ([friendPicker.selection count] > 3) {
        UIAlertView *alertView = 
            [[UIAlertView alloc] initWithTitle:@""
                                       message:@"Max number of friends selected."
                                      delegate:self cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
        [alertView show];
    }
}

- (void)alertView:(UIAlertView *)alertView 
   clickedButtonAtIndex:(NSInteger)buttonIndex
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

您可能正在寻找更好的体验，例如让用户有机会从他们的最大列表中进行编辑。在这种情况下，您可以从 GitHub tableView:didSelectRowAtIndexPath: 和 tableView:didDeselectRowAtIndexPath: FBGraphObjectTableSelection 类中的委托方法获取源代码。看起来您可能会添加一个新的“maxSelection”属性并关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T10:42:56.430

只是删除朋友选择器不是解决方案！但这是！我明白了，在挣扎了好几次之后。

解决方案比我想象的要简单。你`friendPickerController`是一个 tableView，所以我们可以将`userInteractionEnabled`属性设置为`NO`.

```
- (void)friendPickerViewControllerSelectionDidChange:
(FBFriendPickerViewController *)friendPicker
{
    if ([friendPicker.selection count] <=3)
    {
        self.friendPickerController.tableView.userInteractionEnabled=YES;
    }

    if ([friendPicker.selection count] >=3)
    {
    UIAlertView *maxFriendsAlert =
    [[UIAlertView alloc] initWithTitle:@"Max number of friends selected."
                               message:@"no more friends can be selected,"
                              delegate:self cancelButtonTitle:@"OK"
                     otherButtonTitles:@"Buy more friends",nil];
    [maxFriendsAlert show];
    maxFriendsAlert.tag=1;

// disable friends selection
        self.friendPickerController.tableView.userInteractionEnabled=NO;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:06:39.270

以前的 SDK 是基于 HTML 并托管在 facebook 上的，但 SDK 3.x 是开源的原生 iOS 代码。

您可以修改 Facebook SDK。它在 Apache 许可下获得许可，并为您允许邀请的朋友添加限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T08:44:55.307

回复有点晚，但我只是在寻找这个问题的解决方案，我发现比列出的其他解决方案更干净的东西：

```
- (void)friendPickerViewControllerSelectionDidChange:(FBFriendPickerViewController *)friendPicker {
  if ([friendPicker.selection count] > 3) {
    friendPicker.doneButton.enabled = NO;
    [[[UIAlertView alloc] initWithTitle:@"Too many selections"
                                message:@"You may only select up to 3 friends."
                               delegate:nil
                      cancelButtonTitle:@"Ok" otherButtonTitles:nil] show];
  } else {
    friendPicker.doneButton.enabled = YES;
  }
} 
```

我通知用户他们已经超过了最大值（通过 UIAlertView），然后我禁用了完成按钮。当计数恢复到有效数字时，我重新启用“完成”按钮。

# matlab - 尝试在matlab中访问索引越界错误

> ID：15204559
> 
> 赞同：-1
> 
> 时间：2013-03-04T15:03:17.900
> 
> 标签：matlab

我正在处理这段代码，但我不知道哪里出错了
这是显示错误的代码部分：

```
sf_num=0; sf_den=0;a=0; o=0;
for i=1:512
    for j=1:512
        sf_num=sf_num+(w1(i,j)*o(i,j));
        a=a+(o(i,j)*o(i,j));
        b=b+(w1(i,j)*w1(i,j));
        sf_den = sqrt(sf_den + a*double(b));
    end
end 
```

这是错误：

```
Attempted to access o(1,2); index out of bounds because numel(o)=1.

Error in ==> dwtcode at 44
    sf_num=sf_num+(w1(i,j)*o(i,j)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:13:44.663

您定义`o`为：`o=0`使其成为标量，这意味着它只有 1 个元素。

您无法访问 index `1,2`of`o`因为它没有那么多元素

# android - phonegap 地理定位不起作用

> ID：15204560
> 
> 赞同：4
> 
> 时间：2013-03-04T15:03:18.910
> 
> 标签：android, cordova, mobile, geolocation

根据本指南[Phonegap Geoloactaion](http://docs.phonegap.com/en/2.5.0/cordova_geolocation_geolocation.md.html#Geolocation)，最终得到了这个代码（android）：

```
<html>
<head>
<title>Device Properties Example</title>
<script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
<script type="text/javascript" charset="utf-8">

// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {
jQuery(window).ready(function(){
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
    });
}

// onSuccess Geolocation
//
function onSuccess(position) {
    var element = document.getElementById('geolocation');
    element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                        'Longitude: '          + position.coords.longitude             + '<br />' +
                        'Altitude: '           + position.coords.altitude              + '<br />' +
                        'Accuracy: '           + position.coords.accuracy              + '<br />' +
                        'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                        'Heading: '            + position.coords.heading               + '<br />' +
                        'Speed: '              + position.coords.speed                 + '<br />' +
                        'Timestamp: '          +                                   position.timestamp          + '<br />';
}

// onError Callback receives a PositionError object
//
function onError(error) {
    alert('code: '    + error.code    + '\n' +
            'message: ' + error.message + '\n');
}

</script>
</head>
<body>
<p id="geolocation">Finding geolocation...</p>
</body>
</html> 
```

它卡在“正在查找地理位置...”消息上。通常，当应用程序想要使用我的位置时，他们会要求打开 GPS，您可以在通知栏上看到一个小图标，说明它已打开并正在搜索 GPS，但这似乎并没有发生在我的代码中。 **编辑：我尝试了 geolocation.watchPosition 完整示例，因为它有超时提醒我超时，所以我猜他试图找到我的坐标但也失败了，为什么会这样？地图和其他导航应用程序工作正常**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T20:39:05.613

你放了吗

`<feature name="http://api.phonegap.com/1.0/geolocation" />`

在你的`config.xml`文件上？

`config.xml`有关PhoneGap中文件的更多信息，[请查看此页面](http://docs.build.phonegap.com/en_US/configuring_basics.md.html#The%20Basics)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T15:51:43.703

你在你的模拟器上测试吗？

如果是，那么您需要通过转到 Eclipse -> DDMS -> Emulator Control 手动推送坐标，然后从那里将位置坐标发送到 Emulator。

还要检查您设备上的设置是否允许使用定位服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T20:10:20.110

我知道这是旧的，但我注意到 GPS 要在 phoneGap 应用程序中工作，你需要“同意”与谷歌分享你的位置。

当我以前不同意时，该位置每次都会超时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T05:52:13.277

我有这个问题。一天它工作，第二天它停止工作。重新启动手机时它工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-11T09:46:26.223

## 当 GPS 工作时

在 phonegap 中，应用程序不会要求您打开 gps，您必须手动实现。此外，您还可以提供一些选项，例如

```
var config = {
   enableHighAccuracy: true,
   timeout: 20000,
   maximumAge: 18000000
} 
```

因此，您的错误回调现在将在超时以及地理位置无法确定您的位置时触发。您应该只调试您的问题并查看错误回调返回的内容。

```
 navigator.geolocation.getCurrentPosition(onSuccess, onError, config); 
```

## 当它不起作用时

在你的情况下，gps 不会被解雇。关于这个问题我不能说太多，因为你只提供了 html5 代码。我可以想象的一件事是您缺少 cordova.js 文件。

为了更好地测试和调试，请使用 Ripple 模拟器[https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc)

它模拟 webapps，甚至有一个地理定位模拟程序。这样您就可以更好地调试您的问题，因为您可以查看 Web 控制台。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T15:14:48.673

当您远程加载 jQuery 时；您可以验证它是否已加载吗？例如，如果您在 onload 处理程序中放置了一个 alert()，它会显示出来吗？

```
function onDeviceReady() {
  jQuery(window).ready(function(){
    alert("jQuery ready");
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
  });
} 
```

如果您没有看到警报消息，您可能需要检查您的“res/xml/config.xml”以查看“访问来源”是否设置正确（例如使用通配符）

```
<access origin="*" /> 
```

# c# - 实体记录已创建，但查找字段保持为空

> ID：15204563
> 
> 赞同：2
> 
> 时间：2013-03-04T15:03:21.793
> 
> 标签：c#, dynamics-crm-2011

我正在尝试创建一个附带一些与服务活动相关的事件记录。

为此，我利用该`RelatedEntities`属性如下：

```
// (stripped to the essential)
Entity myRecord = new Entity("incident");

foreach(var e in myData.Select(record => record.ToEntityReference()) // (1) below
{
    Entity relatedRecord = new Entity("serviceappointment");
    // mandatory fields are set here (omitted)
    relatedRecord["new_mylookup"] = 
        new EntityReference(e.LogicalName, e.Id) { Name = e.Name };

    myRecord.RelatedEntities.Add(relatedRecord);
}
service.Execute(new CreateRequest(){ Target = myRecord }); 
```

(1):`myData`是`IQueryable<Entity>`从自定义实体中挑选出一些记录。数据 101% 正确（我已经检查过了）。

这段代码的结果是：

1.  被`incident`创建
2.  记录已创建，*但我的`serviceappointment`new_mylookup 属性为空*。所有其他字段都非常好，并且充满了我的数据。

我没有看到任何错误，无论是在代码执行期间还是在服务器跟踪中。就查找字段而言，它是设置为推荐的常见查找（无脚本，无插件）。

代码有什么问题？

注意：删除`Name`from`new EntityReference(e.LogicalName, e.Id) { Name = e.Name };`不会改变任何东西：`new EntityReference(e.LogicalName, e.Id);`仍然不会填充查找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:22:14.717

事实证明，我的一位同事添加了一个`onLoad`脚本，该脚本无意中将我设置的同一字段置空。我的代码从一开始就有效。

# c# - C#`INSERT INTO` MS Access db没有插入

> ID：15204565
> 
> 赞同：0
> 
> 时间：2013-03-04T15:03:23.730
> 
> 标签：c#, .net, ms-access, oledb

所以我正在开发一个数据库程序，它需要使用 INSERT INTO 命令将日志插入数据库，但是执行查询后表仍然为空。请帮忙！谢谢~这是代码。

```
 //Predefined connection string
    OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\xxx\Desktop\data.mdb;Jet OLEDB:Database Password=xxx;");

    private void Login_Load(object sender, EventArgs e)
    {
        Log("StartUp", "System", "NULL", "System StartUp");
    }

    public void Log(string Type, string User, string Table_affected, string Remarks)
    {

        string NowDateStamp = string.Format("{0}/{1}/{2}", 
                              DateTime.Now.Day.ToString(), 
                              DateTime.Now.Month.ToString(), 
                              DateTime.Now.Year.ToString());
        string NowTimeStamp = string.Format("{0}:{1}:{2}",
                              DateTime.Now.Hour.ToString(),
                              DateTime.Now.Minute.ToString(),
                              DateTime.Now.Second.ToString());
        string tempSQL = string.Format("INSERT INTO 'Log' VALUES ('{0}', '{1}', '{2}', '{3}', '{4}', '{5}')",
                                        NowDateStamp,
                                        NowTimeStamp,
                                        Type,
                                        User,
                                        Table_affected,
                                        Remarks);
        vcon.Open();
        OleDbCommand vcom = new OleDbCommand(tempSQL, vcon);
        vcom.ExecuteNonQuery();
        MessageBox.Show("Done"); // <-- This MessageBox isn't even showing.
        vcon.Close();
    } 
```

所以基本上程序会启动然后记录时间，但是它似乎对数据库没有做任何事情，任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T15:07:43.790

执行查询会导致异常，但在某个地方会捕获并忽略该异常。

您在表名应该在的位置使用字符串文字。它应该只是标识符：

```
INSERT INTO Log VALUES ... 
```

或方括号内的标识符：

```
INSERT INTO [Log] VALUES ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:29:05.197

除了其他人所说的之外，我猜你也有语法错误。您应该指定要将值插入到哪些列中。

```
INSERT INTO Log (<column1>,<column2>,...)
VALUES (<Value to insert into column1>, <Value to insert into column 2>,...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:08:29.280

替换这个：

```
INSERT INTO 'Log' VALUES 
```

有了这个：

```
INSERT INTO Log VALUES 
```

# c# - 从局部视图添加数据

> ID：15204566
> 
> 赞同：0
> 
> 时间：2013-03-04T15:03:25.350
> 
> 标签：c#, jquery, ajax, asp.net-mvc

总是在同一个项目上（对于那些谁是我的人），我有一个实体“Person”，它与实体 VehicleFuelCard 相关（一对多关系）。在我的“创建人”视图中，我通过 AJAX 代码包含了一个部分视图，它实际上是一个“创建燃料卡”视图：

```
<script type = "text/javascript">
function AddVehicleFuelCard() {
    $("#test").load("@Url.Action("AddVehicleFuelCard","Person", 
        new { personViewModel = Model })");
}
</script> 
```

并在 PersonController 中调用它：

```
public ActionResult AddVehicleFuelCard(PersonViewModel personViewModel)
{
    ViewBag.Id_VehicleFuelCardCompany = new SelectList(db.VehicleFuelCardCompanies, "Id_VehicleFuelCardCompany", "Name");

    return PartialView("PartialVehicleFuelCard", personViewModel);
} 
```

这是我使用的 ViewModel：

```
public class PersonViewModel
{
    private Person _person;
    public List<VehicleFuelCard> listVehicleFuelCard;
    public Person Person
    {
        get
        {
            return this._person;
        }    
    }

    public PersonViewModel()
    {
        this._person = new Person();
    }

    public PersonViewModel(Person person)
    {
        this._person = person;
    }

    public VehicleFuelCard NewVehicleFuelCard
    {
        get
        {
            VehicleFuelCard element = new VehicleFuelCard();
            element.Person = this.Person;
            Person.VehicleFuelCards.Add(element);

            return element;
        }
    }

    public PhoneCard NewPhoneCard
    {
        get
        {
            PhoneCard element = new PhoneCard();
            Person.PhoneCards.Add(element);

            return element;
        }
    }

    public ProductAllocation NewProductAllocation
    {
        get
        {
            ProductAllocation element = new ProductAllocation();
            Person.ProductAllocations.Add(element);

            return element;
        }
    }
} 
```

我的控制器中的创建操作：

```
public ActionResult Create()
{
    ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name");
    return View();
}

//
// POST: /Person/Create

[HttpPost]
public ActionResult Create(PersonViewModel personViewModel)
{ 
    if (ModelState.IsValid)
    {
        db.Persons.AddObject(personViewModel.Person);
        db.SaveChanges();

        return RedirectToAction("Index");
    }

    ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", personViewModel.Person.Id_ProductPackageCategory);

    return View(personViewModel);
} 
```

在添加人员时添加燃料卡有什么想法吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:13:36.623

如果您想在同一请求中同时发布帖子`Person`，`Fuel Card`则需要在客户端更新您的数据以包含`Fuel Card`在您的请求中。

那是在客户端，在服务器端，您可以将其添加`Fuel Card`为嵌套对象`Person`（尽管在序列化到客户端时要注意循环引用）。

这是一个粗略的例子。在客户端更新您的对象以同时包含`PersonViewModel`和`Fuel Card`。例如，使用 javascript 创建一个对象：

```
var person={firstname:"John",lastname:"Doe",age:50,eyecolor:"blue"}; 
```

添加嵌套对象

```
person.FuelCard = {property1 ="val1", property2="Val2}; 
```

然后使用 Ajax 将其发布到服务器。

```
$.post('/Person/Create', person, function(data) {
   // do something on success
 }); 
```

# android - 使用 Snapdragon MSM8960 SoC 在通话中注入上行链路音频

> ID：15204570
> 
> 赞同：5
> 
> 时间：2013-03-04T15:03:35.263
> 
> 标签：android, audio, phone-call, alsa

一段时间以来，我一直在研究 MSM8960 特有的这个主题。[我从 google](https://android.googlesource.com/platform/hardware/qcom/audio/+/master)查看了ALSA 硬件模块。Michael 在[帖子](https://stackoverflow.com/questions/10544992/call-audio-stream-modification-in-android-4-0-ics)中的回答确实提到 MSM8960 在“硬件和设备驱动程序”级别支持通话中上行链路音频注入。它是指这个 ALSA 模块的级别吗？

从手机上的 ALSA 配置文件来看，通话中的语音播放似乎是通过ALSA 完成的`/dev/snd/pcmC0D0p`，或者至少符合 ALSA 范式。是否可以使用其中一个文件描述符来达到目的？我确实在 libalsa-intf 中看到了一些有趣的 USE_CASE 定义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T15:48:52.740

MSM8960 提供了一个名为 的 ALSA 控件`Incall_Music Audio Mixer`，您可以将 CPU DAI`MultiMedia1`和连接到该控件`MultiMedia2`（分别对应于 ALSA 设备`pcmC0D0p`和`pcmC0D1p`）。（参见[msm-pcm-routing](https://www.codeaurora.org/gitweb/quic/la/?p=kernel/msm.git;a=blob;f=sound/soc/msm/msm-pcm-routing.c;h=93866c5f3564ed460cd9d5a4e2545a0bacb45745;hb=4c1e76a598cfdd12b050c2e74644c88f2fbaadab)源代码）

因此，如果您正在运行语音呼叫并希望通过上行链路播放一些音频，`pcmC0D0p`您可以通过以下方式执行此操作`adb shell`（假设您有 root 访问权限）：

```
amix 'Incall_Music Audio Mixer MultiMedia1' 1
aplay -Dhw:0,0 mono_8khz_audio.wav 
```

更优雅的方法是在设备的 UCM 文件 (snd_soc_msm_blah_blah..) 中创建一个新用例，在其中在新修改器的启用序列中添加 incall 音乐路由：

```
'Incall_Music Audio Mixer MultiMedia1':1:1 
```

（记得在禁用序列中将其关闭）。
为了让应用程序能够在您的自定义 ROM 上使用此功能，您还必须在音频 HAL 和多媒体框架中进行一些其他更改，以便在呼叫处于活动状态时为所需的流类型选择新的 UCM 设置。
由于版权原因，我无法详细介绍其余的实现，所以我将把它作为练习留给有兴趣的人自己解决。

# soa - 企业集成模式和 HTTP (SOAP/REST)

> ID：15204571
> 
> 赞同：2
> 
> 时间：2013-03-04T15:03:35.793
> 
> 标签：soa, apache-camel, mule, esb, integration-patterns

您好通过了 Gregor Hohpe 和 Bobby Woolf 的企业集成模式。

[http://www.eaipatterns.com/toc.html](http://www.eaipatterns.com/toc.html) 我还了解了 Camel 和 Mule 对这些集成模式的遵守情况——

[http://www.mulesoft.org/documentation/display/current/Understanding+Enterprise+Integration+Patterns+Using+Mule](http://www.mulesoft.org/documentation/display/current/Understanding+Enterprise+Integration+Patterns+Using+Mule)

[http://camel.apache.org/enterprise-integration-patterns.html](http://camel.apache.org/enterprise-integration-patterns.html)

我看到 Mule 和 Camel 都允许通过 SOAP 或 REST 等 Web 服务部署和访问应用程序，SOAP 更像 RPC 风格。它们允许使用 CXF 和 Jersey 等开源实用程序进行大规模集成支持。事实上，Mule 还支持 RMI 端点——这也将提供远程方法调用能力，这是一种被广泛接受的集成形式。我了解 ESB 是围绕消息总线构建的，并额外支持其他协议，但是 ESB 仅符合 EIP，而 EIP 不仅仅是 ESB。

问题是为什么 SOAP/REST 或它们的传输协议不被视为“集成样式”，而企业集成又为何如此“面向消息”？

与设计这些模式但试图理解集成模式不平衡的信息本质的伟大思想相比，我是一个新手。我承认这不是堆栈溢出的 QnA 格式，但会要求 Mods 将其保持一段时间，以便人们可以分享他们的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:57:34.210

至于 SOAP，它将把它放在集成样式“远程过程调用”下，因为它几乎是 SOAP 在现实中实现的（我不会考虑这里的 SOAP over JMS 混合体，它有可能将 RPC 与消息传递混合......） .

REST 在接口方面与 SOAP 非常不同，因为它是资源驱动的，而不是服务驱动的。我会将它归为“RPC”样式，因为它只是同步 RPC 调用的另一种格式。

但是，对于特定消息模式实现的 EIP 集成样式，我不会在理论上投入太多精力。

而是查看手头的特定场景，并使用 EIP 为您的特定集成建模。

我已经看到了文件传输的集成，它们在现实中实现了 RPC 模式或 SOAP 服务，在现实中实现了消息传递（尽管我真的不建议这样做）。

一个具体的例子：考虑一个专门的文件上传服务的使用，它碰巧是使用 SOAP 技术构建的，它将一个 CSV 文件上传到服务器上的文件区域，从那里它被其他一些系统拾取。我会在高层次上称这个基于文件的集成。

另一个例子是消息系统有时是使用共享数据库实现的。使用它们的集成方式仍然是消息传递，而不是“共享数据库”。

考虑一下您的集成应该如何在高层次上工作，然后应用各种协议来完成繁重的工作。

# android - 使用自定义意图抛出 ACTIVITY NOT FOUND EXCEPTION 启动活动

> ID：15204577
> 
> 赞同：1
> 
> 时间：2013-03-04T15:03:53.593
> 
> 标签：android, android-intent, android-activity

我正在使用以下代码从我的应用程序中启动活动：

```
Intent intent = new Intent();
intent.setAction("com.android.excample.cutstom_action");
intent.setData(data); //public Uri data
intent.putExtra(Intent.Extra_stream, stream); // public Uri stream
startActivity(intent); 
```

在另一个应用程序中，活动在清单文件中定义如下：

```
<activity android:name="MyActivity">
<intent-filter>
<action android:name="com.android.excample.cutstom_action"/>
<category android:name = "android.intent.category.DEFAULT"/>
<data android:mimeType="*/*"/>
</intent-filter>
</activity> 
```

但是当我尝试开始活动时，我发现活动未找到异常。请帮我解决这个问题

崩溃日志如下：“ `03-04 20:03:53.351: E/AndroidRuntime(22633): FATAL EXCEPTION: main 03-04 20:03:53.351: E/AndroidRuntime(22633): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.android.contacts/data/51826 flg=0x1 }} to activity {com.example.test/com.example.test.ContentPickerTester}: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.android.excample.cutstom_action } 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.ActivityThread.deliverResults(ActivityThread.java:2983) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.ActivityThread.handleSendResult(ActivityThread.java:3026) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.ActivityThread.access$1100(ActivityThread.java:126) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1180) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.os.Handler.dispatchMessage(Handler.java:99) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.os.Looper.loop(Looper.java:137) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.ActivityThread.main(ActivityThread.java:4456) 03-04 20:03:53.351: E/AndroidRuntime(22633): at java.lang.reflect.Method.invokeNative(Native Method) 03-04 20:03:53.351: E/AndroidRuntime(22633): at java.lang.reflect.Method.invoke(Method.java:511) 03-04 20:03:53.351: E/AndroidRuntime(22633): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787) 03-04 20:03:53.351: E/AndroidRuntime(22633): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554) 03-04 20:03:53.351: E/AndroidRuntime(22633): at dalvik.system.NativeStart.main(Native Method) 03-04 20:03:53.351: E/AndroidRuntime(22633): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.android.excample.cutstom_action } 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.Activity.startActivityForResult(Activity.java:3190) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.Activity.startActivity(Activity.java:3297) 03-04 20:03:53.351: E/AndroidRuntime(22633): at com.example.test.ContentPickerTester.onActivityResult(ContentPickerTester.java:64) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.Activity.dispatchActivityResult(Activity.java:4649) 03-04 20:03:53.351: E/AndroidRuntime(22633): at android.app.ActivityThread.deliverResults(ActivityThread.java:2979)`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:06:16.220

放 ”。” 在manifast文件中您的活动名称之前

```
".MyActivity" 
```

或使用完整的限定路径设置它，如下所示：

```
"com.android.excample.MyActivity" 
```

# c++ - C++11 原子内存排序 - 这是放松（释放 - 消费）排序的正确用法吗？

> ID：15204578
> 
> 赞同：39
> 
> 时间：2013-03-04T15:03:54.077
> 
> 标签：c++, memory, c++11, atomic, compare-and-swap

我最近使用三重缓冲区的 std::atomic 移植到 C++11，用作并发同步机制。这种线程同步方法背后的想法是，对于生产者-消费者的情况，你有一个运行*得更快的生产者*消费者，三重缓冲可以带来一些好处，因为生产者线程不会因为不得不等待消费者而“减慢”速度。在我的例子中，我有一个以~120fps 更新的物理线程和一个以~60fps 运行的渲染线程。显然，我希望渲染线程总是尽可能获得最新的状态，但我也知道我会从物理线程中跳过很多帧，因为速率不同。另一方面，我希望我的物理线程保持其恒定的更新率，并且不受锁定数据的较慢渲染线程的限制。

原始的 C 代码是由 remis-thoughts 编写的，完整的解释在他的[博客](http://remis-thoughts.blogspot.pt/2012/01/triple-buffering-as-concurrency_30.html)中。我鼓励任何有兴趣阅读它以进一步了解原始实现的人。

我的实现可以在[这里](https://github.com/p4checo/triplebuffer-sync)找到。

基本思想是拥有一个具有 3 个位置（缓冲区）和一个原子标志的数组，该标志通过比较和交换来定义在任何给定时间哪些数组元素对应于什么状态。这样，只有一个原子变量用于对数组的所有 3 个索引和三重缓冲背后的逻辑进行建模。缓冲区的 3 个位置被命名为 Dirty、Clean 和 Snap。Producer总是写入 Dirty 索引，并且可以翻转 writer 以将 Dirty 与当前的 Clean 索引交换*。**消费者*可以请求一个新的Snap，它将当前的 Snap 索引与 Clean 索引交换以获得最新的缓冲区。*消费者*总是在Snap 位置读取缓冲区。

该标志由一个 8 位无符号整数组成，这些位对应于：

**（未使用）（新写入）（2x 脏）（2x 干净）（2x 快照）**

newWrite 额外位标志由写入器设置并由读取器清除。读者可以使用它来检查自上次快照以来是否有任何写入，如果没有，则不会再进行一次快照。可以使用简单的按位运算获得标志和索引。

**现在好了，代码：**

```
template <typename T>
class TripleBuffer
{

public:

  TripleBuffer<T>();
  TripleBuffer<T>(const T& init);

  // non-copyable behavior
  TripleBuffer<T>(const TripleBuffer<T>&) = delete;
  TripleBuffer<T>& operator=(const TripleBuffer<T>&) = delete;

  T snap() const; // get the current snap to read
  void write(const T newT); // write a new value
  bool newSnap(); // swap to the latest value, if any
  void flipWriter(); // flip writer positions dirty / clean

  T readLast(); // wrapper to read the last available element (newSnap + snap)
  void update(T newT); // wrapper to update with a new element (write + flipWriter)

private:

  bool isNewWrite(uint_fast8_t flags); // check if the newWrite bit is 1
  uint_fast8_t swapSnapWithClean(uint_fast8_t flags); // swap Snap and Clean indexes
  uint_fast8_t newWriteSwapCleanWithDirty(uint_fast8_t flags); // set newWrite to 1 and swap Clean and Dirty indexes

  // 8 bit flags are (unused) (new write) (2x dirty) (2x clean) (2x snap)
  // newWrite   = (flags & 0x40)
  // dirtyIndex = (flags & 0x30) >> 4
  // cleanIndex = (flags & 0xC) >> 2
  // snapIndex  = (flags & 0x3)
  mutable atomic_uint_fast8_t flags;

  T buffer[3];
}; 
```

**执行：**

```
template <typename T>
TripleBuffer<T>::TripleBuffer(){

  T dummy = T();

  buffer[0] = dummy;
  buffer[1] = dummy;
  buffer[2] = dummy;

  flags.store(0x6, std::memory_order_relaxed); // initially dirty = 0, clean = 1 and snap = 2
}

template <typename T>
TripleBuffer<T>::TripleBuffer(const T& init){

  buffer[0] = init;
  buffer[1] = init;
  buffer[2] = init;

  flags.store(0x6, std::memory_order_relaxed); // initially dirty = 0, clean = 1 and snap = 2
}

template <typename T>
T TripleBuffer<T>::snap() const{

  return buffer[flags.load(std::memory_order_consume) & 0x3]; // read snap index
}

template <typename T>
void TripleBuffer<T>::write(const T newT){

  buffer[(flags.load(std::memory_order_consume) & 0x30) >> 4] = newT; // write into dirty index
}

template <typename T>
bool TripleBuffer<T>::newSnap(){

  uint_fast8_t flagsNow(flags.load(std::memory_order_consume));
  do {
    if( !isNewWrite(flagsNow) ) // nothing new, no need to swap
      return false;
  } while(!flags.compare_exchange_weak(flagsNow,
                                       swapSnapWithClean(flagsNow),
                                       memory_order_release,
                                       memory_order_consume));
  return true;
}

template <typename T>
void TripleBuffer<T>::flipWriter(){

  uint_fast8_t flagsNow(flags.load(std::memory_order_consume));
  while(!flags.compare_exchange_weak(flagsNow,
                                     newWriteSwapCleanWithDirty(flagsNow),
                                     memory_order_release,
                                     memory_order_consume));
}

template <typename T>
T TripleBuffer<T>::readLast(){
    newSnap(); // get most recent value
    return snap(); // return it
}

template <typename T>
void TripleBuffer<T>::update(T newT){
    write(newT); // write new value
    flipWriter(); // change dirty/clean buffer positions for the next update
}

template <typename T>
bool TripleBuffer<T>::isNewWrite(uint_fast8_t flags){
    // check if the newWrite bit is 1
    return ((flags & 0x40) != 0);
}

template <typename T>
uint_fast8_t TripleBuffer<T>::swapSnapWithClean(uint_fast8_t flags){
    // swap snap with clean
    return (flags & 0x30) | ((flags & 0x3) << 2) | ((flags & 0xC) >> 2);
}

template <typename T>
uint_fast8_t TripleBuffer<T>::newWriteSwapCleanWithDirty(uint_fast8_t flags){
    // set newWrite bit to 1 and swap clean with dirty 
    return 0x40 | ((flags & 0xC) << 2) | ((flags & 0x30) >> 2) | (flags & 0x3);
} 
```

如您所见，我决定使用*Release-Consume*模式进行内存排序。存储的*释放*(memory_order_release) 确保当前线程中的写入不能在存储**之后**重新排序。另一方面，*Consume*确保当前线程中依赖于当前加载的值的读取不会在此加载**之前**重新排序。这确保了对释放相同原子变量的其他线程中的因变量的写入在当前线程中是可见的。

如果我的理解是正确的，因为我只需要原子设置标志，编译器可以自由地重新排序不直接影响标志的其他变量的操作，从而进行更多优化。通过阅读一些关于新内存模型的文档，我也知道这些宽松的原子只会在 ARM 和 POWER 等平台上产生显着影响（它们主要是因为它们而引入的）。由于我的目标是 ARM，我相信我可以从这些操作中受益，并且能够挤出更多的性能。

现在的问题：

**对于这个特定问题，我是否正确使用了 Release-Consume 宽松排序？**

谢谢，

安德烈

PS：对不起，很长的帖子，但我认为需要一些体面的上下文才能更好地了解问题。

**编辑：** 实施@Yakk的建议：

*   修复`flags`了 read on`newSnap()`和`flipWriter()`使用直接赋值的问题，因此使用 default `load(std::memory_order_seq_cst)`。
*   为清晰起见，将位摆弄操作移至专用功能。
*   添加`bool`了返回类型`newSnap()`，现在在没有新内容时返回 false，否则返回 true。
*   使用习惯用法将类定义为不可`= delete`复制，因为如果使用了复制构造函数和赋值构造函数，则它们都是不安全的`TripleBuffer`。

**编辑 2：** 修复了不正确的描述（感谢@Useless）。是*消费者*请求一个新的 Snap 并从 Snap 索引中读取数据（而不是“作者”）。抱歉打扰了，感谢无用的指出。

**编辑 3：**根据@Display Name 的建议 优化了`newSnap()`and功能，有效地去除了每个循环周期的 2 个冗余 's。`flipriter()``load()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-23T00:10:04.583

为什么在 CAS 循环中加载旧标志值两次？第一次是`flags.load()`，第二次是`compare_exchange_weak()`，标准在 CAS 失败时指定的将前一个值加载到第一个参数中，在这种情况下是 flagsNow。

根据[http://en.cppreference.com/w/cpp/atomic/atomic/compare_exchange](http://en.cppreference.com/w/cpp/atomic/atomic/compare_exchange)，“*否则，将存储在 *this 中的实际值加载到预期中（执行加载操作）。* ”所以你的循环正在做的是失败时，`compare_exchange_weak()`重新加载`flagsNow`，然后循环重复，第一条语句在加载后立即再次加载它`compare_exchange_weak()`。在我看来，您的循环应该将负载拉到循环之外。例如，`newSnap()`将是：

```
uint_fast8_t flagsNow(flags.load(std::memory_order_consume));
do
{
    if( !isNewWrite(flagsNow)) return false; // nothing new, no need to swap
} while(!flags.compare_exchange_weak(flagsNow, swapSnapWithClean(flagsNow), memory_order_release, memory_order_consume)); 
```

和`flipWriter()`：

```
uint_fast8_t flagsNow(flags.load(std::memory_order_consume));
while(!flags.compare_exchange_weak(flagsNow, newWriteSwapCleanWithDirty(flagsNow), memory_order_release, memory_order_consume)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T14:53:59.380

是的，这是memory_order_acquire和memory_order_consume之间的区别，但是当你每秒使用180个左右时你不会注意到它。如果你想知道数字的答案，你可以用 m2 = memory_order_consume 运行我的测试。只需将 producer_or_consumer_Thread 更改为：

```
TripleBuffer <int> tb;

void producer_or_consumer_Thread(void *arg)
{
    struct Arg * a = (struct Arg *) arg;
    bool succeeded = false;
    int i = 0, k, kold = -1, kcur;

    while (a->run)
    {
        while (a->wait) a->is_waiting = true; // busy wait
        if (a->producer)
        {
            i++;
            tb.update(i);
            a->counter[0]++;
        }
        else
        {
            kcur = tb.snap();
            if (kold != -1 && kcur != kold) a->counter[1]++;
            succeeded = tb0.newSnap();
            if (succeeded)
            {
                k = tb.readLast();
                if (kold == -1)
                    kold = k;
                else if (kold = k + 1)
                    kold = k;
                else
                    succeeded = false;
            }
            if (succeeded) a->counter[0]++;   
        }
    }
    a->is_waiting =  true;
} 
```

测试结果：

```
_#_  __Produced __Consumed _____Total
  1    39258150   19509292   58767442
  2    24598892   14730385   39329277
  3    10615129   10016276   20631405
  4    10617349   10026637   20643986
  5    10600334    9976625   20576959
  6    10624009   10069984   20693993
  7    10609040   10016174   20625214
  8    25864915   15136263   41001178
  9    39847163   19809974   59657137
 10    29981232   16139823   46121055
 11    10555174    9870567   20425741
 12    25975381   15171559   41146940
 13    24311523   14490089   38801612
 14    10512252    9686540   20198792
 15    10520211    9693305   20213516
 16    10523458    9720930   20244388
 17    10576840    9917756   20494596
 18    11048180    9528808   20576988
 19    11500654    9530853   21031507
 20    11264789    9746040   21010829 
```

# php - 如何更改自动链接

> ID：15204581
> 
> 赞同：0
> 
> 时间：2013-03-04T15:04:03.337
> 
> 标签：php, javascript, html, mysql, joomla2.5

在我的论坛中，我试图阻止链接转换为可点击链接并放置自定义文本语言，而不是显示“不允许链接”。

这似乎是创建可点击链接的代码。我的问题，是否可以将网址转换为显示“垃圾邮件 - 不允许链接”的不可点击文本

```
public function parseUrl($params) {
    $url = $params['url'];
    $text = $params['text']; 
```

如果我删除最后一行，它似乎会使链接消失，但是我想显示一条自定义消息。抱歉，如果这是一个基本问题，我的代码知识处于初学者水平。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:06:15.737

`$text = $params['text'];`

将“文本”替换为“垃圾邮件 - 不允许链接”。

至于如何使它不可点击，我需要查看链接的实际使用位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:59:33.857

这不仅仅是服务器端操作，因此您应该调用 JS 函数，因此，首先将您的 php 代码更改为：

```
$url = $params['javascript:myfunction();']; 
```

然后在客户端为javascript写这个：

```
function myfunction(){
alert('not allowed!');
} 
```

# service - 如何使用 Inno Setup 安装 Windows 服务？

> ID：15204587
> 
> 赞同：11
> 
> 时间：2013-03-04T15:04:15.897
> 
> 标签：service, inno-setup

我编写了一个批处理脚本，以便在使用 Inno Setup 进行安装后执行。问题是我有以下用于创建服务的命令行：

```
sc create MySQL start= auto DisplayName= MySQL binPath= "C:\MyApp\MySQL 5.5\bin\mysqld" --defaults-file="C:\MyApp\MySQL 5.5\my.ini" 
```

带重音的字母是这段代码的问题，在cmd中打开bat文件是不能执行的，但是输入的时候服务是正常创建的。我该如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T19:46:05.590

[与直接调用 SC 相比，使用 API](https://web.archive.org/web/20170823162031/http://vincenzo.net/isxkb/index.php?title=Service_-_Functions_to_Start%2C_Stop%2C_Install%2C_Remove_a_Service)更简洁（并且更容易处理任何错误或服务依赖项）。请注意，此示例假定您使用的是 ANSI Inno，但为 Unicode 修改它相当简单。

不过，就个人而言，我更喜欢将安装/启动/停止/卸载命令构建到服务可执行文件本身中，使其能够自我注册。显然，这对于第三方服务来说是不可能的，但你可以检查它是否已经支持这样的东西。

最后一点是，您不得硬编码 C: 文件夹的路径。你应该`{app}`改用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T15:16:33.243

您可以尝试将此命令添加到`[RUN]`部分（如 TLama 建议的那样）或在部分中创建`AfterInstall`函数。`[CODE]`

```
[Run] 
Filename: "{cmd}"; Parameters: "sc create MySQL start= auto DisplayName= MySQL 
binPath= ""C:\MyApp\MySQL 5.5\bin\mysqld"" 
--defaults-file=""C:\MyApp\MySQL 5.5\my.ini"""; 
Flags: runhidden 
```

# jsp - 普通 Java 对象可以利用/捕获/包含 JSP 输出吗？

> ID：15204591
> 
> 赞同：0
> 
> 时间：2013-03-04T15:04:21.243
> 
> 标签：jsp, tomcat, servlets, jakarta-mail

我需要发送 HTML 格式的电子邮件。似乎 HTML 电子邮件算作“视图”元素，因此使用 JSP 呈现它是有意义的。

但是，emailer 任务将用纯 Java 编写。如何将 JSP 输出转换为 Java？

即我设想：

电子邮件正文.jsp：

```
<c:out var="invoicebody">
    <lots of html>
    ${invoice.price} etc...
</c:out> 
```

电子邮件发送.java：

```
setup db connection
setup email
call emailbody.jsp
email.body = invoicebody
email.send etc... 
```

那样的东西...

现在我正在通过 http 服务器抓取它，但这似乎是错误的。

格式化 HTML 电子邮件的最佳方式是什么？使用 Tomcat 7、Servlet 3.0...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:24:46.883

您可以使用[MVEL](http://mvel.codehaus.org/)之类的脚本语言来填充要作为电子邮件发送的 HTML 文件。

检查此[MVEL 2.0 模板指南](http://mvel.codehaus.org/MVEL+2.0+Templating+Guide)

我希望这能让你朝着正确的方向前进。

正如 Szymon Biliński 指出的那样，还有其他选择。在下面列出

*   [自由标记](http://freemarker.sourceforge.net/docs/index.html)
*   [速度](http://velocity.apache.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:09:29.923

您可以像这样调用自己的 Web 应用程序的 URL：

```
 public static String getEmailBody(final String triggerId) throws IOException {

        URL url = new URL("http://localhost:8080/emailbody.jsp?triggerId="
                + triggerId);
        URLConnection openConnection = url.openConnection();
        openConnection.setReadTimeout(100);
        InputStream inputStream = openConnection.getInputStream();
        int read;
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        do {
            byte[] bytes = new byte[1024];
            read = inputStream.read(bytes);
            baos.write(bytes);
        } while (read >  0);
        return baos.toString();
    } 
```

这是最超然的方法，因为你有一个“真正的”阅读 httprequest 和 httpresponse。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:51:09.330

已经有一个很好的解决方案，使用标记库进行邮件发送。

只需调用jsp，不需要捕获html。

# macos - 为什么 Chrome Canary 总是打开 Chrome 稳定版？（操作系统 x）

> ID：15204598
> 
> 赞同：2
> 
> 时间：2013-03-04T15:05:02.657
> 
> 标签：macos, google-chrome, osx-mountain-lion

总是当我打开金丝雀时，它会打开 chrome stable ！如果没有打开 chrome stable，我就无法运行金丝雀。如果我退出 chrome stable，金丝雀会继续打开它！它很烦人。

我无法弄清楚禁用它的设置是什么。

这是正常的？我怎样才能禁用它？

我正在使用 OS X Mountain Lion。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T16:06:09.310

我找到了！问题在于救援时间。如果我禁用它，问题就不会发生。

[此错误已在前一段时间报告](http://help.rescuetime.com/kb/rescuetime-installable-client/odd-behavior-with-chrome-canary-when-rescuetime-is-running)

# flash - 使用 ffmpeg 时如何保留 flv 自定义元数据

> ID：15204601
> 
> 赞同：1
> 
> 时间：2013-03-04T15:05:21.353
> 
> 标签：flash, ffmpeg, flv, flash-media-server

我有一个我创建的 FMS flv（视频/音频流），并将自定义元数据插入到 flv。我可以使用一个简单的 Flash 播放器来测试这个 flv 文件，该播放器读取来自 flv 的元数据（我在 FMS 上创建 flv 时插入的）。当我尝试使用 ffmpeg 转换或复制 flv（甚至复制到另一个 flv）时，我没有看到我的动态自定义元数据（我确实看到了一些静态元数据 flv 在标题中）。不清楚这是否可行（使用 ffmpeg 1.1）一旦我对 ffmpeg（甚至是副本）做任何事情，这个自定义元数据就消失了。我期待一个简单的 flv 到 flv 会起作用，但到目前为止还没有。

这可能吗？- 我尝试过的一个例子（很多）是

```
ffmpeg -i meta09.flv -map_metadata 0 -c copy out4.flv 
```

# c++ - C++ 向量和 OpenGL

> ID：15204602
> 
> 赞同：-4
> 
> 时间：2013-03-04T15:05:21.920
> 
> 标签：c++, visual-studio-2010, opengl

我正在编写的 OpenGL 代码有一个奇怪的错误。作为测试，我正在创建一个球体向量并使用 push_back(s1)。我正在向矢量添加多个球体。但是，当我运行程序时，它只绘制最近推入矢量的球体。

```
#include "Sphere.h";
#include <iostream>;
#include <vector>;
using namespae std;

vector<Sphere> spheres;
Sphere s1 = Sphere(1.0, "One");
Sphere s2 = Sphere(2.0, "Two");
Sphere s3 = Sphere(3.0, "Three");

void init(void) {
    spheres.push_back(s1);
    spheres.push_back(s2);
    spheres.push_back(s3);

    for each(Sphere s in spheres) {
        cout << s.getName() << "\n";
    }
}

// OTHER CODE OMMITED

void display(void) {
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1.0, 1.0, 0.0);
    glPushMatrix();

    for each(Sphere in s) {
        s.draw();
    }

    glPopMatrix();
} 
```

显然，那里有一个主要方法，其中设置了所有 GL 东西，我知道那里没有问题。

所以球体有自己的绘制方法。现在有趣的部分是它在控制台中输出：

```
Three
Three
Three 
```

并继续在屏幕上绘制 s3 三遍。

所以我的问题是：为什么它只绘制向量中的最后一项三遍？我也尝试过使用迭代器和普通的 for 循环，但它们都产生相同的结果。

有人有想法吗？

**编辑**

getName() 函数：

```
string Sphere::getName() {
    return name;
} 
```

向量的迭代器：

```
vector<Sphere>::iterator it;
void display() {
    for(it = planets.begin(); it != planets.end(); ++it) {
        it->draw();
    }
} 
```

在 Sphere 中绘制代码：

```
GLdouble r = 0.0;
GLfloat X = 0.0f;
string name = " ";

Sphere::Sphere(GLdouble ra, GLfloat x, string n)
{
    r = ra;
    X = pos;
    name = n;
}

Sphere::~Sphere(void)
{
}

void Sphere::draw(void) 
{
    glutSolidSphere(r, 10, 8);
    glTranslatef(X, 0.0, 0.0);
}

string Sphere::getName(void)
{
    return name;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T15:31:31.863

问题似乎是您在 Sphere.cpp 中定义了 3 个全局变量，而不是类成员变量。所以每次构造函数运行时，它都会覆盖之前的值，而你只能看到最后一个构造的对象。

解决方案是将它们声明为成员。

在 Sphere.h 中，在 Sphere 的类定义中，将

```
class Sphere { 
   // constructors, your current functions, and so on...
  private:
   GLdouble r;
   GLfloat X;
   string name;
} 
```

最后，像这样的问题是一个例子，说明为什么提供一个演示问题的小例子很重要。第一个原因是它使我们更容易确定问题的根源。第二个是它使您可以小部分检查代码。一旦你隔离了问题，你就更有可能自己识别问题。

# php - HTML复选框表单php

> ID：15204606
> 
> 赞同：0
> 
> 时间：2013-03-04T15:05:35.480
> 
> 标签：php

您好，我有一个 Html 表单向我的数据库发送 0 而不是 1 的问题，它被设置为 tinyint 1 我已经搞砸了好几天了。

我使用 phpmyadmin xampp 服务器 html php

```
<!--THIS IS SKILLS-->
 <?php

 $con = mysql_connect("localhost","root","");
 if (!$con)
   {
   die('Could not connect: ' . mysql_error());
   }
if (!isset($_POST['action'])) 

 mysql_select_db("client", $con);
$sql="INSERT INTO skills (driving_licence,HGV,engineer,carpenter,chef,PSV)
 VALUES
 ('$_POST[driving_licence]','$_POST[HGV]','$_POST[engineer]','$_POST[carpenter]','$_POST[chef]','$_POST[PSV]')";

 if (!mysql_query($sql,$con))
   {
   die('Error: ' . mysql_error());
   }
 echo "skills have been added";

 mysql_close($con);

 ?> 
```

表格代码是

```
<center><form method="post" action="skills.php">
<table cellspacing="50">
<tr>
<center><h1>Record Client Skills</h1></center>
<center><p> Please choose the relevent boxes</p></center>

<center><input type="checkbox" name="driving_licence" value="driving_licence">I have a Full UK Driving Licence<br>
 <input type="checkbox" name="hdv" value="hgv">I hold a valid a HGV licence<br> 
 <input type="checkbox" name="engineer" value="engineer">I have an Engineering qualification <br>
 <input type="checkbox" name="carpenter" value="carpenter">I have a Carpentry qualification <br>
 <input type="checkbox" name="chef" value="chef">I have Catering qualification<br>
 <input type="checkbox" name="psv licence" value="psv">I have a valid PSV licence<br>   
</tr>   
</table>

<input type="reset" value="Reset Form"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <input type="submit" value="Send" />

 </center> 
```

任何人都可以帮忙吗？

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:43:40.873

最好使用`bit(1)`而不是`tinyint`布尔值，不要使用 root 连接到 mysql 并使用 PDO 或 Mysqli，最后这不是为您的用户打印 mysql 错误的好方法，使用 php 数据库类之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:11:15.287

设置复选框`value="1"`，否则字符串`"driving_license"`将传递给您的 db-field，即`tinyint`:-(

AND：移至 mysqli 或 PDO，不推荐使用 mysql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:20:50.113

```
<?php

 $con = mysql_connect("localhost","root","");
 if (!$con)
   {
   die('Could not connect: ' . mysql_error());
   }
if (isset($_POST['submit'])) 
{
 mysql_select_db("client", $con);
$sql="INSERT INTO skills (driving_licence,HGV,engineer,carpenter,chef,PSV)
 VALUES
 ('$_POST[driving_licence]','$_POST[HGV]','$_POST[engineer]','$_POST[carpenter]','$_POST[chef]','$_POST[PSV]')";

 if (!mysql_query($sql,$con))
   {
   die('Error: ' . mysql_error());
   }
 echo "skills have been added";

 mysql_close($con);
}
 ?> 
```

你的 HTML 表单——

```
<center><form method="post" name="f1" action="skills.php">
<table cellspacing="50">
<tr>
<center><h1>Record Client Skills</h1></center>
<center><p> Please choose the relevent boxes</p></center>
<center><input type="checkbox" name="driving_licence" value="driving_licence">I have a Full UK Driving Licence<br>
 <input type="checkbox" name="hdv" value="hgv">I hold a valid a HGV licence<br> 
 <input type="checkbox" name="engineer" value="engineer">I have an Engineering qualification <br>
 <input type="checkbox" name="carpenter" value="carpenter">I have a Carpentry qualification <br>
 <input type="checkbox" name="chef" value="chef">I have Catering qualification<br>
 <input type="checkbox" name="psv licence" value="psv">I have a valid PSV licence<br>   
</tr>   
</table>
<input type="reset" value="Reset Form"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <input type="submit" value="Send" name="submit" />
</center> 
```

# css - IE 中的媒体查询

> ID：15204607
> 
> 赞同：0
> 
> 时间：2013-03-04T15:05:37.580
> 
> 标签：css, internet-explorer, media-queries

我的响应式网站和 Internet Explorer 出现问题（如图），我想知道是否有人可以查看 nickpassaro.com 标题中的源代码并帮助我弄清楚为什么 IE9 和 IE8 不是工作正常。我不确定这是否是我的 css 的问题，因为我的所有三个样式表都通用的某些属性不起作用（例如标题的背景）。

我使用 html5shiv 作为我的 polyfill，它不是来自我服务器上的本地副本。我也在使用 normalize.css，它说它适用于 IE8+

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:12:57.367

[https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

如果您正在寻找更强大的 CSS3 媒体查询支持，您可以查看[http://code.google.com/p/css3-mediaqueries-js/](http://code.google.com/p/css3-mediaqueries-js/)。在测试中，我发现该脚本在渲染复杂的响应式设计（文件大小和性能）时明显变慢，但它确实支持比该脚本更多的媒体查询功能。给作者的大礼帽！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:15:54.507

有两种不同的方法，您可以使用一些 jquery 或 JS 用于像这样的 IE 版本

```
function adjustStyle(width) {
    width = parseInt(width);
    if (width < 701) {
        $("#size-stylesheet").attr("href", "css/narrow.css");
    } else if ((width >= 701) && (width < 900)) {
        $("#size-stylesheet").attr("href", "css/medium.css");
    } else {
       $("#size-stylesheet").attr("href", "css/wide.css"); 
    }
} 
```

或者你可以为不同的 IE 版本编写不同的 css 像这样为所有版本的 IE

```
 <!--[if IE]>
    <link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]--> 
```

对于特定版本

```
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7.css">
<![endif]--> 
```

# java - REST：从元素中提取属性

> ID：15204608
> 
> 赞同：2
> 
> 时间：2013-03-04T15:05:39.927
> 
> 标签：java, rest, jersey

我有这个 xml 输出。

```
<Envelope pf:urn="urn:pf:envelope:1234">
  <ib:Item>1</ib:Item>
  <ib:Amount>15</ib:Amount>
  <ib:Location pf:url="http://mypage.com/1234/location" pf:urn="Envelope1234"/>
</Envelope> 
```

我有这个 POJO

```
import javax.xml.bing.annotation.*;

@XmlType(namespace="http://mypage.com/schemas/ib/2")
public class Envelope{
  @XmlElement(name="Item")
  private int item;

  @XmlElement(name="Amount")
  private int amount;
} 
```

我需要从 Location 元素中获取 url 属性。POJO 会是什么样子呢？

# libgdx - 如何在 Android 中处理屏幕 gui（暂停按钮）的输入？

> ID：15204612
> 
> 赞同：12
> 
> 时间：2013-03-04T15:05:48.767
> 
> 标签：libgdx

我正在开发使用 libgdx 制作的游戏，该游戏需要在我的游戏屏幕上方添加一些 GUI。类似于`FrameLayout`Android 中的东西。

我有 GameScreen 一切都在发生。我现在想要的是添加一个“暂停”按钮、高分信息等。

我尝试将`Stage`对象与常规精灵绘图结合起来。但是我在处理输入时遇到了一些问题：如果用户在舞台上单击暂停按钮，或单击游戏区域（我应该在其中添加一些项目符号），如何管理......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-04T15:27:32.100

您应该能够使用 a[`Stage`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Stage.html)来管理您的 UI。为了使输入正常工作，您需要添加一个[`InputMultiplexer`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/InputMultiplexer.html) ，以便`Stage`您当前的输入方案都将获得输入。

要进行设置，您将执行以下操作：

```
InputMultiplexer multiplexer = new InputMultiplexer();
multiplexer.addProcessor(stage);
multiplexer.addProcessor(gameScreenInputProcessor);
Gdx.input.setInputProcessor(multiplexer); 
```

（代码示例基于来自[https://code.google.com/p/libgdx/wiki/InputEvent](https://code.google.com/p/libgdx/wiki/InputEvent)的代码）

请注意，顺序很重要（我猜您会希望舞台首先获取事件以查看 UI 是否被触摸）。此外，来自输入事件处理程序的布尔返回值对于多路复用器更为重要，因为“已处理”事件不会被多路复用器传播。内部的 UI 事件`Stage`有自己的“已处理”标志（大多数情况下它会做正确的事情，但有一些细微的差别）。

一种替代方法`InputMultiplexer`是创建一个“GameScreenActor”（一个新的子类`Actor`），其中包含您插入到全局的当前游戏屏幕`Stage`。不过，您必须将输入处理移至 scene2d 方法。这可能不是您的正确选择，但它是一个可行的选择。

# maven - mvn release:prepare 不能使用 maven 3

> ID：15204619
> 
> 赞同：2
> 
> 时间：2013-03-04T15:06:12.777
> 
> 标签：maven, maven-2, maven-3, maven-plugin, maven-release-plugin

我的 JAVA_HOME 已正确设置为`/usr/local/java/jdk1.7.0_01`

```
$echo $JAVA_HOME
/usr/local/java/jdk1.7.0_01

$sudo update-alternatives --config java

There are 3 choices for the alternative java (providing /usr/bin/java).

  Selection    Path                                            Priority   Status
------------------------------------------------------------
  0            /usr/lib/jvm/java-6-openjdk-amd64/jre/bin/java   1061      auto mode
  1            /usr/lib/jvm/java-6-openjdk-amd64/jre/bin/java   1061      manual mode
* 2            /usr/local/java/jdk1.7.0_01/bin/java             1         manual mode
  3            /usr/local/java/jre1.7.0_01/bin/java             1         manual mode 
```

我正在使用 mvn release:prepare 插件在 pom.xml 中生成 git 标签和翻转项目的版本。如果我使用 maven 2.2.1，它会完美运行当我使用 maven 3.0.4 时，我得到：

```
[INFO] Error: JAVA_HOME is not defined correctly.
[INFO]   We cannot execute /usr/local/java/jdk1.7.0_01/bin/java/bin/java 
```

我猜maven 3中可能存在一个错误，当它运行时，它会尝试将`/bin/java`两次附加到我的JAVA_HOME。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-12T08:04:03.977

JAVA_HOME 必须指向 jre，然后设置：

```
export JAVA_HOME=/usr/local/java/jdk1.7.0_01/jre 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:36:16.893

尝试使用标准的 Oracle/Sun JDK，如果可以的话。我以前在 Debian/Ubuntu 上自己打过这个。我从来没有耐心弄清楚 OpenJDK 出了什么问题，但它不能很好地处理 Maven。或者……至少……这是我的观察。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-27T03:32:42.267

**remove** the file in **old** maven home and it will change to new one.

```
mv /usr/local/Cellar/maven/3.8.1/libexec /usr/local/Cellar/maven_bak 
```

before that, you need to export your jdk and maven firstly. and how to do this, you can see following link.

[https://stackoverflow.com/a/67715235/11679986](https://stackoverflow.com/a/67715235/11679986)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-17T01:13:58.097

在您的 mvn 命令文件中搜索 JAVA_HOME（用于`which mvn`查找它）。如果尚未定义，我的确实会处理 JAVA_HOME。

所以也许你可以通过`unset JAVA_HOME`

# html - 不同的缩放级别显示不同的信息

> ID：15204620
> 
> 赞同：1
> 
> 时间：2013-03-04T15:06:13.843
> 
> 标签：html, zooming

我想知道是否可以有不同级别的缩放来显示不同级别的信息。这可能不是很清楚，所以这个想法是：

正常缩放：仅图像
最大缩放：图像标题
最小缩放：对应于图像的符号（如象形图）

如果这些层可以将自己与透明的想法混合起来，那就太好了。最小和正常之间的缩放将显示不透明度为 50% 的图像，并且它们的符号处于相同的不透明度水平。

提前谢谢你，JJulien

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:47:26.933

如果您只想为网站的某些部分添加缩放功能：这可以在 JavaScript 中完成；您可以`class`为每个缩放级别在 body-element 上设置不同的值，然后定义在样式表中显示哪些内容。

[查看这个 JSFiddle 以获得粗略的概念。](http://jsfiddle.net/2pzMd/)

如果您想为您的所有网站实现缩放，而不仅仅是部分，请查看[这个问题](https://stackoverflow.com/questions/10464038/imitate-browser-zoom-with-javascript)。

# sql - 如果一行不存在插入，否则不要在 postgres 中插入

> ID：15204621
> 
> 赞同：9
> 
> 时间：2013-03-04T15:06:15.503
> 
> 标签：sql, postgresql

我需要检查一行是否存在。如果不存在，则应插入。

这是在`postgres`，我正在尝试通过 shell 脚本插入行。当我运行脚本时，它不会显示错误，但即使不存在匹配的行，它也不会插入到表中。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-04T20:24:06.080

[我喜欢他们在这里](https://stackoverflow.com/questions/1109061/insert-on-duplicate-update-postgresql)提到的解决方案

```
INSERT INTO table (id, field, field2)
       SELECT 3, 'C', 'Z'
       WHERE NOT EXISTS (SELECT 1 FROM table WHERE id=3); 
```

# node.js - Node.js 简单的 http 请求不起作用

> ID：15204623
> 
> 赞同：2
> 
> 时间：2013-03-04T15:06:16.120
> 
> 标签：node.js, http

我想知道为什么这么[简单的http请求](http://nodejs.org/api/http.html#http_http_request_options_callback)不起作用......

```
http = require("http")

url = "http://nodejs.org/"

console.log "Try a request to #{url}..."
reqHttp = http.request url, (response) ->

    console.log "Request to #{url}"
    response.on 'data', (chunk) -> console.log "chunk: ", chunk 

reqHttp.on 'error', (error) -> console.log "reqHttp error", error 
```

大约一分钟后，它返回：

```
reqHttp error { [Error: socket hang up] code: 'ECONNRESET' } 
```

为了确保它在我的环境中不是问题，我尝试了该`request`模块并且工作得很好：

```
request = require("request")

url = "http://nodejs.org/"

request url, (error, response, body) ->
  console.log body if not error and response.statusCode is 200 
```

看来[我不是唯一一个](https://stackoverflow.com/questions/10771875/node-js-https-request-error)。

所以，我有一个解决我的问题的方法（使用`request`模块），但我想知道为什么我不能使用内置的 http 请求。它是错误的还是不可靠的？（Node.js 版本 0.8.21）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:50:09.087

好的，这真的很简单。您正在构建一个`http request`但尚未完成发送它。从你给自己的链接：

```
req.write('data\n');   //Write some data into request
req.write('data\n');
req.end();             //Finish sending request let request go. Please do this 
```

由于您从未使用过 req.end()，因此它挂起，因为它从未完成。节点重置非活动请求

```
reqHttp error { [Error: socket hang up] code: 'ECONNRESET' } 
```

# java - Why Set doesnt work in web flow and Primefaces

> ID：15204629
> 
> 赞同：1
> 
> 时间：2013-03-04T15:06:30.360
> 
> 标签：java, jsf, primefaces, spring-webflow

I get call in a flow a method which returns a `HashSet` of `Person` back. Then i call the `Set` in my xhtml file with the `Primeface-dataTable`. Now i want to display the prename of the person, but a error appear and say, he doesn't found "prename"...

Then i put the HashSet in a `ArrayList` and do the same. And... it works fine! But why?
Set and List use as **Superinterfaces** `Collection` & `Iterable`. So why this don't work with Set?

Here are the parts of the files:

**flow.xml**

```
<view-state id="rcpm" view="rc/rcmembers.xhtml">
    <on-entry>
        <evaluate expression="RCHtmlCache.getCommunityList('rcpm')"
            result="flowScope.members" />
    </on-entry>
</view-state> 
```

**rcmembers.xhtml**

```
<p:dataTable id="table1" var="member" value="#{members}"
                                sortMode="multiple" rowIndexVar="status"
                                emptyMessage="The Community is empty.">
<p:column>
    <f:facet name="header">
         <h:outputText value="Vorname" />
   </f:facet>

   <h:outputText value="#{member.vorname}" />

</p:column> 
```

**RCHtmlCache.java** *Set Version*

```
public Set<Person> getCommunity(String key) {
        return htmlCache.get(key);
    } 
```

**RCHtmlCache.java** *List Version*

```
public List<Person> getCommunityList(String key) {
    Set<Person> comList = htmlCache.get(key);
    ArrayList<Person> result = new ArrayList<Person>();
    for (Person person : comList) {
        result.add(person);
    }
    return result;
} 
```

Hope you can explain me this weird incident...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:18:27.783

It is just a hint, but I think PrimeFaces only accept the List interface, hence you can't use Set interface, they are not the same.

You may create your own List + Set Adapter class by using the Adapter Pattern. It may suit very well to your problem, since you want to adapt the Set interface to a List interface. If you do so, then you won't need to convert your Set to a List every time.

Take a look at this: [http://en.wikipedia.org/wiki/Adapter_pattern](http://en.wikipedia.org/wiki/Adapter_pattern)

Hope I could help.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:36:19.903

DataTable works with DataModels...and DataModels only supports:
* java.util.List
* Array of java.util.Object
* java.sql.ResultSet (which therefore also supports javax.sql.RowSet)
* javax.servlet.jsp.jstl.sql.Result
* Any other Java object is wrapped by a DataModel instance with a single row.
(The above objects are implicitly used to build a DataModel)
See JSF Specification.

# html - 使用 CSS3 为图像充气

> ID：15204633
> 
> 赞同：1
> 
> 时间：2013-03-04T15:06:51.203
> 
> 标签：html, css, css-animations

我有一个带有背景图像的 div，我想使用 CSS3 webkit-keyframes 对其进行膨胀。

我尝试使用 动画`background-size`，但看起来 CSS3（或至少 Safari webkit）不动画`background-size`.

如何重写此代码以获得相同的效果（即我希望图像从 div 的中心膨胀）？

一些简单的香草 javascript 也可以，但我更喜欢纯 CSS 解决方案。

HTML：

```
<div id="image"></div> 
```

CSS：

```
div#image
{
    background: url('../img/image.png');
    background-repeat: no-repeat;
    background-position: center;
    width: 125px;
    height: 252px;
    position: absolute;
    left: 170px;
    top: 260px;
    -webkit-animation-delay: 0s;
    -webkit-animation-timing-function: cubic-bezier(0, 0, 0.35, 1.0);
    -webkit-transform: translateZ(0);
    -webkit-animation-duration: 4s;
    -webkit-animation-name: pop_image;
}

@-webkit-keyframes pop_image
{
    0% {background-size: 0%;}
    25% {background-size: 0%;}
    48% {background-size: 100%;}
    100% {background-size: 100%;}
} 
```

编辑：

我也尝试在 上制作动画`-webkit-transform: scale()`，但这也不起作用。

编辑2：

所以，动画`-webkit-transform: scale()`工作，我只需要刷新我的浏览器。

这是 CSS3 关键帧：

```
@-webkit-keyframes pop_keys
{
    0% {-webkit-transform: scale(0,0);}
    25% {-webkit-transform: scale(0,0);}
    48% {-webkit-transform: scale(1,1);}
    100% {-webkit-transform: scale(1,1);}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:13:31.030

你可以使用css。`scale`并为图像设置动画以放大：

[http://jsfiddle.net/DvVug/1/](http://jsfiddle.net/DvVug/1/)

**编辑：**

已更新，因此图像不会“跳”回原始大小

# dynamics-crm-2011 - CRM 2011 中的查找字段

> ID：15204635
> 
> 赞同：1
> 
> 时间：2013-03-04T15:06:58.560
> 
> 标签：dynamics-crm-2011, lookup

实体应用程序查找联系人。现在，Entity Application Document 对 Application 进行了查找。在我的申请文件表单中，我想显示与申请文件关联的联系人。我不想创建对*Contact*的查找，因为它只是糟糕的数据库设计。

如何在申请文件表格中显示相关联系人。毕竟是向上查找 - 好吧，两级查找对吗？我可以从 Application Document 转到与之相关的 Application ，然后从那里转到*Contact*。

我建议的解决方案是在应用程序文档实体中有一个只读文本字段。使用 JavaScript填充*联系人*（主字段） 。`onloadform`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:24:38.763

我将其解析为对数据库的调用，获取链接实体，然后获取它的链接实体。在这种情况下，JavaScript 似乎是明智的选择。

但是，您提到您发现此解决方案不好，因此我可能缺少要求。

# c# - 无法将方法组“”转换为非委托类型“System.Delegate”。您是否打算调用该方法？

> ID：15204639
> 
> 赞同：7
> 
> 时间：2013-03-04T15:07:03.780
> 
> 标签：c#, delegates

我正在尝试将函数引用存储在 Delegate 类型中以供以后使用。

这就是我正在做的事情：

```
class Program
{
    static void Test()
    {

    }

    static void Main(string[] args)
    {
        Delegate t= (Delegate)Test;
    }
} 
```

在此我收到以下错误：

> 无法将方法组“Test”转换为非委托类型“System.Delegate”。
> 您是否打算调用该方法？

为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T15:08:53.683

您真的不应该使用该类型`Delegate`来存储委托。您应该使用特定类型的委托。

在几乎所有情况下，您都可以使用`Action`or`Func`作为您的委托类型。在这种情况下，`Action`是合适的：

```
class Program
{
    static void Test()
    {

    }

    static void Main(string[] args)
    {
        Action action = Test;

        action();
    }
} 
```

从技术上讲，您可以通过以下方式获得一个实例`Delegate`：

```
Delegate d = (Action)Test; 
```

但实际上使用 a `Delegate`，而不是实际的特定类型的委托，例如`Action`，将很难，因为编译器将不再知道方法的签名是什么，所以它不知道应该传递什么参数给它.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T15:09:52.683

您在这里尝试做的是将[方法组](https://stackoverflow.com/questions/886822/what-is-a-method-group-in-c) `Test`转换为某些东西。根据规范，方法组的唯一合法转换是将其转换为委托类型。这可以明确地完成：

```
var t = (Delegate)Test; 
```

或隐含地：

```
Delegate t = Test; 
```

然而，正如[文档](http://msdn.microsoft.com/en-us/library/system.delegate.aspx)所说，`System.Delegate`它本身是......不是委托类型：

> Delegate 类是委托类型的基类。但是，只有系统和编译器可以显式地从 Delegate 类或 MulticastDelegate 类派生。也不允许从委托类型派生新类型。**该类`Delegate`不被视为委托类型；它是一个用于派生委托类型的类。**

编译器检测到这一点并抱怨。

如果要将方法组强制转换为委托，则必须指定具有兼容签名的委托类型（在本例中为`Action`）。

# c++ - 传递可变参数模板参数的位置

> ID：15204649
> 
> 赞同：9
> 
> 时间：2013-03-04T15:07:25.877
> 
> 标签：c++, c++11, variadic-templates

我想创建一个接受可变数量模板参数的函数。稍后使用这些参数，函数应该像这样传递它们的位置：

```
template<typename R, typename Args...>
R myFunction(Data &data, void *function) {
    auto f = (R (*)(Args...))function;
    return f(read<Args1>(data, 1), read<Args2>(data, 2), ...);// <-- This is the problem
} 
```

给定的代码当然是不可编译的。有什么办法可以解决吗？有没有没有太多代码重复的可变参数模板的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T15:13:20.527

是的，这是可能的：

```
// we need a compile-time helper to generate indices
template< std::size_t... Ns >
struct indices
{
  typedef indices< Ns..., sizeof...( Ns ) > next;
};

template< std::size_t N >
struct make_indices
{
  typedef typename make_indices< N - 1 >::type::next type;
};

template<>
struct make_indices< 0 >
{
  typedef indices<> type;
}; 
```

使用这些助手，您需要一个转发器来执行您的功能，如下所示：

```
template<typename R, typename... Args, std::size_t... Ns>
R myFunctionImpl(void *Data, void *function, indices<Ns...> ) {
    auto f = (R (*)(Args...))function;
    return f(read<Args>(Data, Ns + 1)...);// +1 because indices is zero-based
}

template<typename R, typename... Args>
R myFunction(void *Data, void *function) {
   return myFunctionImpl< R, Args... >( Data, function, typename make_indices<sizeof...(Args)>::type() );
} 
```

**编辑：**它是如何工作的？首先，我们通过确定[参数包](http://en.cppreference.com/w/cpp/language/parameter_pack) 的大小。然后扩展为. 它作为实现函数的附加参数（来自刚刚创建一个虚拟实例的转发器），因此参数推导在实现函数方面启动，并将生成的索引放入参数包中。`Args`[`sizeof...`](http://en.cppreference.com/w/cpp/language/sizeof...)`make_indices<N>::type``indices<0,1,2,...,N-1>``Ns`

实现函数现在有两个大小相同的参数包，即`Args`和`Ns`。当通过`...`省略号展开时，省略号将展开它所应用的*整个表达式，并并行展开所有参数包！*在上面的示例中，表达式是`read<Args>(Data, Ns+1)`，它很好地扩展为 OP 伪代码。

# svn - 如何找到本地工作副本的修订版

> ID：15204657
> 
> 赞同：0
> 
> 时间：2013-03-04T15:07:48.327
> 
> 标签：svn, tortoisesvn

如何知道我的本地存储库副本是在哪个修订版从服务器下载的？（我通常使用 CornerStore，但在 tortoisesvn 中找不到此选项）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:15:15.350

您可以在 Subversion 选项卡中使用 Show Log 选项或此文件的属性。

# function - 如何在 Assembly 8086 中打印数字？

> ID：15204659
> 
> 赞同：1
> 
> 时间：2013-03-04T15:07:49.937
> 
> 标签：function, assembly, x86, x86-16

我正在尝试编写一个接收数字（我之前推送过的）并打印它的函数。我该怎么做？

到目前为止我所拥有的：

```
org 100h

push 10
call print_num

print_num:

push bp
mov bp, sp
mov ax, [bp+2*2]
mov bx, cs
mov es, bx
mov dx, string
mov di, dx
stosw
mov ah, 09h
int 21h
pop bp
ret

string: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:15:38.857

您放置在地址的`string`是一个数值，而不是该值的字符串表示形式。

值 12 和字符串“12”是两个不同的东西。将其视为 16 位十六进制值，12 将是 0x000C，而“12”将是 0x3231（0x32 == '2'，0x31 == '1'）。

您需要将数值转换为其字符串表示形式，然后打印结果字符串。
我将展示如何在 C 中完成此操作的简单方法，而不仅仅是粘贴完成的解决方案，这应该足以让您将 8086 实现基于：

```
char string[8], *stringptr;
short num = 123;

string[7] = '$';  // DOS string terminator    

// The string will be filled up backwards
stringptr = string + 6;

while (stringptr >= string) {
    *stringptr = '0' + (num % 10);  // '3' on the first iteration, '2' on the second, etc
    num /= 10;  // 123 => 12 => 1 => 0
    if (num == 0) break;
    stringptr--;
} 
```

# android - Android ExpandableList 禁用组

> ID：15204660
> 
> 赞同：0
> 
> 时间：2013-03-04T15:07:50.440
> 
> 标签：android, touch, expandablelistview

我有一个可扩展列表，其中所有组始终展开并且组不可折叠。问题是，即使我在单击它们时使组不折叠，“选择”效果仍然可见，我不希望它可见。我怎样才能做到这一点？

任何答案将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:08:45.013

毕竟我已经弄清楚了如何做到这一点：DI已经放了这个代码：

```
view.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent event) {
            return true;
        }
    }); 
```

在 getGroupView 方法中 ExpandableList 的适配器中。现在它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:39:30.353

通常，当您单击组名称时，它会自动折叠。这是可扩展列表视图的[示例](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/)。此外，除非我看到你做了什么，否则我几乎无法发表任何评论。

# php - 如果 rewrite_module 不可用，如何重定向？

> ID：15204666
> 
> 赞同：0
> 
> 时间：2013-03-04T15:08:08.473
> 
> 标签：php, codeigniter, iis-6, url-rewrite-module

我正在开发一个我无权更改配置的 codeigniter 项目，因此我无法启用重写引擎。

在另一种情况下，我使用的是 IIS 6.0，而不是 apache。

那么，如何在这两种情况下重定向页面，以便我可以使系统在没有 index.php 的 url 上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:09:25.653

如果没有重写引擎，你就会被难看的 URL 困住。你可以做这样的事情：

```
/index.php/your/nicer/url 
```

这应该适用于大多数软件的任何服务器。

# php - 具有来自 mysql 数据库的多列的选择框

> ID：15204674
> 
> 赞同：0
> 
> 时间：2013-03-04T15:08:41.760
> 
> 标签：php, mysql, drop-down-menu

我有以下`php`代码，它非常适合显示 1 列，但我需要它来显示 10 列的值。

```
 <select size="1" name="domeinnaam"> 
      <?php 
      include '../config.php';
      $sql = "SELECT * FROM megabase";  
      $resultaat = mysql_query($sql) or die (mysql_error());  
      while ($row = mysql_fetch_array($resultaat))       
      { 
      echo '<option>' . $row['domeinnaam1'] . '</option>';
      }
      ?>
     </select> 
```

我试图添加 2nd `echo`，但这破坏了代码。我也试过

```
 echo '<option>' . $row['domeinnaam1'] . $row['domeinnaam2'] . '</option>'; 
```

但这没有用。因为结果将显示如下： domain1
domain1
domain1domain2

它应该是

域
1 域
1 域1
域2

什么会起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:32:26.237

假设您希望每个域名在 select 中显示为一个选项，并且您的数据库中的域名字段是 domeinnaam1、domeinnaam2、domeinnaam3 等，您将执行以下操作...

```
<?php 
        include '../config.php';
        $sql = "SELECT * FROM megabase";  
        $resultaat = mysql_query($sql) or die (mysql_error());  
        $domains = array();
        while ($row = mysql_fetch_array($resultaat))       
        { 
           if (!empty($row['domeinnaam1'])) $domains[] = $row['domeinnaam1'];
           if (!empty($row['domeinnaam2'])) $domains[] = $row['domeinnaam2'];
        }
    ?>

<select size="1" name="domeinnaam">
    <?php
        foreach ($domains as $domain)
        {
            echo "<option>$domain</option>";
        } 
    ?>
</select> 
```

您应该使用 PDO 而不是 mysql_ 函数，否则 ADODB 库运行良好。mysql_ 函数自 PHP 5.5 起已弃用

有关 PDO 参考，请参阅[http://www.php.net/manual/en/pdo.construct.php](http://www.php.net/manual/en/pdo.construct.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:02:00.947

你的代码不应该有这样的主要 PHP 配置或初始化。我看起来不聪明。整理一下。

```
<select size="1" name="domeinnaam"> 
  <?php 
  include '../config.php';
  $sql = "SELECT * FROM megabase";  
  $resultaat = mysql_query($sql) or die (mysql_error());  
  while ($row = mysql_fetch_array($resultaat))       
  { 
  echo '<option>' . $row['domeinnaam1'] . '</option>';
  }
  ?>
 </select>

  <?php 
  include '../config.php';
  $sql = "SELECT * FROM megabase";  
  $resultaat = mysqli_query($conn, $sql) or die ($conn->mysqli_error());  

  ?>
<select size="1" name="domeinnaam">
<?php
while ($row = mysqli_fetch_array($conn, $resultaat))       
      { 
      echo '<option>' . $row['domeinnaam1'] . '</option>';
      }
?>

 </select> 
```

接下来不要真的尝试破坏选项，您可以使用像 JQuery 这样的 javascript 框架来实现更时尚的选择。我真的不认为你可以这样做：

```
while ($row = mysqli_fetch_array($conn, $resultaat))       
  { 
  echo '<option>' . $row['domeinnaam1'] . '<br />' .$row['domeinnaam2']. '</option>';
  } 
```

使用 JQuery，您可以在 div 中列出一个列表项：

```
<ul>
while ($row = mysqli_fetch_array($conn, $resultaat))       
      { 
      echo '<li>' . $row['domeinnaam1'] . '<br />' .$row['domeinnaam2']. '</li>';
      }
</ul> 
```

然后使用 onclick 事件将所选项目传递到隐藏字段以供以后使用。

如果您想在一个循环中将 10 列显示为单独的选项，则可以这样做。

```
while ($row = mysqli_fetch_array($conn, $resultaat))       
{ 
echo '<option>' . $row['domeinnaam1'] .'</option>';
echo '<option>' . $row['domeinnaam2'] .'</option>';
echo '<option>' . $row['domeinnaam3'] .'</option>';
echo '<option>' . $row['domeinnaam4'] .'</option>';
echo '<option>' . $row['domeinnaam5'] .'</option>';
echo '<option>' . $row['domeinnaam6'] .'</option>';
echo '<option>' . $row['domeinnaam7'] .'</option>';
echo '<option>' . $row['domeinnaam8'] .'</option>';
echo '<option>' . $row['domeinnaam9'] .'</option>';
echo '<option>' . $row['domeinnaam10'] .'</option>';
} 
```

我想知道这在哪里有用以及如何使用。编程中任何事情都可能发生。:)

# solr - solr 中的片段计数增加导致在查询中使用星号进行搜索时出现异常

> ID：15204685
> 
> 赞同：0
> 
> 时间：2013-03-04T15:09:18.660
> 
> 标签：solr, highlighting

在过去的几天里，我使用 solr 4.1.0 迈出了第一步。到目前为止，我没有任何问题，并且总能找到解决方案，主要是在这个伟大的平台上。

我正在使用来自 solr 的示例配置和我自己的字段。我正在用 tika 索引文件并向文档中添加额外的字段。

我的问题是突出显示：默认情况下，solr 在突出显示（如果启用）中只返回一次命中。我想拥有它们（-1 不像在 maxAnalyzedChars 中那样工作，所以我改用 9999）。

我已更改（添加）以下默认值：

```
<int name="f.text.hl.maxAnalyzedChars">-1</int>
<str name="f.text.hl.snippets">9999</str> 
```

在 solrconfig.xml 中：

```
<requestHandler name="/select" class="solr.SearchHandler">...</requestHandler> 
```

现在，如果我使用诸如“*”之类的占位符进行搜索，即“wordtofind*”，solr 服务器将引发以下异常：

```
SEVERE: java.io.IOException: Stream closed
        at java.io.StringReader.ensureOpen(Unknown Source)
        at java.io.StringReader.read(Unknown Source)
        at org.apache.lucene.analysis.standard.StandardTokenizerImpl.zzRefill(StandardTokenizerImpl.java:923)
        at org.apache.lucene.analysis.standard.StandardTokenizerImpl.getNextToken(StandardTokenizerImpl.java:1133)
        at org.apache.lucene.analysis.standard.StandardTokenizer.incrementToken(StandardTokenizer.java:180)
        at org.apache.lucene.analysis.util.FilteringTokenFilter.incrementToken(FilteringTokenFilter.java:50)
        at org.apache.lucene.analysis.core.LowerCaseFilter.incrementToken(LowerCaseFilter.java:54)
        at org.apache.solr.highlight.TokenOrderingFilter.incrementToken(DefaultSolrHighlighter.java:633)
        at org.apache.lucene.analysis.CachingTokenFilter.fillCache(CachingTokenFilter.java:90)
        at org.apache.lucene.analysis.CachingTokenFilter.incrementToken(CachingTokenFilter.java:55)
        at org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(Highlighter.java:221)
        at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlightingByHighlighter(DefaultSolrHighlighter.java:498)
        at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighting(DefaultSolrHighlighter.java:391)
        at org.apache.solr.handler.component.HighlightComponent.process(HighlightComponent.java:139)
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:208)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1816)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:448)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:269)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:560)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
        at org.eclipse.jetty.server.Server.handle(Server.java:365)
        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
        at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
        at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:937)
        at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:998)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:856)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source) 
```

感谢您提供任何有用的提示！

忍者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:57:48.117

尝试将 maxAnalyzedChars 从 -1 更改为 2147483647。我通过使用 Java 客户端 Solrj 尝试查询时偶然发现了这一点。我尝试了 Integer.MAX_VALUE 常量（即 2^31-1 = 2147483647）并且它起作用了。添加 +1 (=2147483648) 不会。希望有帮助！

# web-services - 无法添加最基本的 RESTful Web 服务

> ID：15204688
> 
> 赞同：4
> 
> 时间：2013-03-04T15:09:32.860
> 
> 标签：web-services, rest, coldfusion

我在使用 CF10（64 位）（开发版？）的 Windows 2008 R2（64 位）上

我正在尝试实现这个非常基本的教程：http: [//blogs.coldfusion.com/post.cfm/rest-support-in-coldfusion-part-i](http://blogs.coldfusion.com/post.cfm/rest-support-in-coldfusion-part-i)

我通过 IIS 在 8081 端口上创建了一个新网站，然后添加了两个文件：

/index.cfm（理论上，因为不需要包含应用程序变量的 application.cfc，我可以跳过这个）

```
<cfset s = "Hello World!">
<cfoutput>#s#</cfoutput> 
```

/RestExample/HelloWorld.cfc

```
<cfcomponent rest="true" restPath="/hello">
        <cffunction name="sayHello" access="remote" returnType="String" httpMethod="GET">
                 <cfset res="Hello World">
                 <cfreturn res>
        </cffunction>
</cfcomponent> 
```

在 CF 管理员中：

*   根路径：`C:/websites/test/RestExample/`
*   服务映射：`Example`

我收到以下错误：

```
Error registering REST service. Please ensure that you have entered a proper mapping and path.
Application Example could not be initialized.
Reason: The application does not contain any rest enabled CFCs.
The application does not contain any rest enabled CFCs. 
```

一点系统信息：

```
Server Product  ColdFusion  
Version  10,0,8,284032  
Tomcat Version  7.0.23.0  
Edition  Developer    
Serial Number  Developer    
Operating System  Windows Server 2008 R2    
OS Version  6.1    
Update Level  /C:/ColdFusion10/cfusion/lib/updates/chf10000008.jar    
Adobe Driver Version  4.1 (Build 0001)    
JVM Details  
Java Version  1.6.0_29    
Java Vendor  Sun Microsystems Inc.    
Java Vendor URL  http://java.sun.com/  
Java Home  C:\ColdFusion10\jre 
```

不确定此时是否是配置问题？这[与我之前的问题有关](https://stackoverflow.com/questions/15166822/coldfusion-restful-webservice-object-is-not-an-instance-of-declaring-class)，并试图简化一切以隔离原因。

**编辑 #1** 我能够将这个非常简单的 RESTful 服务添加到 Windows 7 64 位/CF 10（无更新），没有任何问题。我想知道是我的安装损坏还是更新损坏了它？

**编辑 #2** 我重新安装了我的 CF 服务器，但它仍然给了我同样的问题。

**编辑#3**

根据 milanchandna 的建议，我按照以下步骤操作：

1.  创建了一个文件夹 c:\websites\milanchandna
2.  在 IIS 中创建了一个新网站（milanchandna 使用同名的 apppool）并使用 c:\websites\milanchandna 作为 root，在端口 8084 上运行
3.  创建了 jakarta 虚拟目录（需要这个）
4.  添加了基本的 HelloWorld.cfc
5.  成功导航到 HelloWorld.cfc，没有错误
6.  在 CF Admin、REST Services 中，添加了以下内容：
7.  根路径：C:/websites/milanchandna/
8.  服务映射：示例
9.  点击添加服务
10.  获取错误：注册 REST 服务时出错。请确保您输入了正确的映射和路径。无法初始化应用程序示例。原因：应用程序不包含任何启用了休息的 CFC。该应用程序不包含任何启用了 REST 的 CFC。

HelloWorld.cfc：

```
<cfcomponent rest="true" restPath="/hello">
        <cffunction name="sayHello" access="remote" returnType="String" httpMethod="GET">
                 <cfset res="Hello World">
                 <cfreturn res>
        </cffunction>
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:13:23.847

我在 C:\ColdFusion10\cfusion\wwwroot（而不是站点的 IIS 根目录）下创建了文件，并且能够通过管理控制台注册 REST 服务而没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:58:22.617

由于这是一个不起作用的基本示例，我建议从一开始就遵循它。

1.  在 IIS webroot 中创建一个全新的文件夹。这不应位于已用于 CF REST 的任何文件夹中。
2.  只需在此文件夹中放置一个简单的 rest cfc 即可。您的问题描述中给出的 CFC 示例看起来不错，让我们使用它。
3.  从浏览器访问此 CFC，就像访问任何 cfm

    例如：[http://mysite:8081/mypath_to_cfc/mycfc.cfc]

4.  检查这是否会引发任何错误。如果是这样，则 CFC 存在问题。如果没有，那么你很高兴。

5.  将此文件夹注册为管理员的 REST 应用程序。

# php - 更新脚本不起作用？

> ID：15204695
> 
> 赞同：0
> 
> 时间：2013-03-04T15:09:54.197
> 
> 标签：php, mysql

我是php的初学者。我正在尝试制作一个 Web 应用程序，其中用户分数会针对他回答的每个正确答案进行更新。脚本如下

```
<?php
$username="surendra";
$useranswer=$_REQUEST['option'];
$qno=$_REQUEST['a'];

  $con=mysqli_connect("localhost","root","","gk"); 
```

// 检查连接

```
 include('connection.php');
    $sql1="SELECT * FROM questions  WHERE  qid=$qno";
    $result=mysql_query($sql1);
while ($row = mysql_fetch_array($result))
{
    $correctanswer=$row['answer'];

}

   include('connection.php');
     $sql1="SELECT * FROM contest  WHERE  username LIKE '".$username."'";
     $result=mysql_query($sql1);
while ($row = mysql_fetch_array($result))
{
    $points=$row['points'];

}   

    if ($username=$correctanswer)
      {
         $con=mysqli_connect("localhost","root","","gk");
          // Check connection
       if (mysqli_connect_errno())
         {
          echo "Failed to connect to MySQL: " . mysqli_connect_error();
          }

        mysqli_query($con,"UPDATE contest SET points=$points+5
         WHERE username =$username");

          mysqli_close($con);
         }

  ?> 
```

* * *

更新功能不起作用请帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:17:43.427

尝试`$username`用单引号括起来：

```
mysqli_query($con,"UPDATE contest SET points=$points+5 WHERE username = '$username'"); 
```

和`if ($username==$correctanswer)`其他人发布的一样。

然后我建议你学习如何绑定参数和使用准备好的语句。[在这里](http://php.net/manual/de/mysqli-stmt.bind-param.php)阅读

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:18:14.127

你的代码中有`include('connection.php');`两次。

`if ($username=$correctanswer)`应该是`==`。

考虑使用 mysqli_ 函数或 PDO 并保护您的代码免受 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:13:52.493

你错过了一个`=`标志

```
if ($username=$correctanswer)
           --^ 
```

尝试：

```
if ($username == $correctanswer) 
```

另外，`$username`需要引用：

```
mysqli_query($con,"UPDATE contest SET points = $points + 5 WHERE username ='".$username."'"); 
```

# netty - Netty 3.5 和 Netty 3.6 之间的 Bootstrap.releaseExternalResources() 是否有变化？

> ID：15204698
> 
> 赞同：0
> 
> 时间：2013-03-04T15:10:04.810
> 
> 标签：netty

在使用 netty 3.6 时关闭我的 netty 应用程序时，该进程不会在我的服务器和/或客户端引导程序上调用 releaseExternalResources() 时终止。（该项目使用ClientBootstrap和ServerBootstrap。在测试时，该过程在第一次称为引导关闭时进入无限循环）

我可以清楚地将其归结为 netty，因为它仅取决于在我的项目的 POM 中将版本号 3.5 更改为 3.6。有没有人暗示我在那个案子上？

最好的问候
马丁

编辑：我如何创建引导程序和共享线程池的单元测试，这些线程池在 Netty 3.5 下工作，在 Netty 3.6 下不工作

```
@Test
public void testRelease() {

    // create bootstraps
    final ExecutorService pool = Executors.newFixedThreadPool(2);
    final ClientBootstrap client = new ClientBootstrap(
            new NioClientSocketChannelFactory(pool,
                    Executors.newCachedThreadPool()));
    final ServerBootstrap server = new ServerBootstrap(
            new NioServerSocketChannelFactory(pool,
                    Executors.newCachedThreadPool()));

    // release resources
    System.out.println("Releasing resources - client...");
    client.releaseExternalResources();
    System.out.println("Releasing resources - server...");
    server.releaseExternalResources();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:25:07.887

是的，有一些变化。但是在引导程序上调用 releaseExternalResources() 应该会像预期的那样关闭一切。如果不是这种情况，请打开错误报告

# php - 无法从数据库中选择图像？(PHP)

> ID：15204700
> 
> 赞同：-3
> 
> 时间：2013-03-04T15:10:09.953
> 
> 标签：php

我以前从未在 PHP 中使用过 OOP，仅在 C#、C++ 等中使用过，但现在我想创建一个网站，我将在其中使用 OOP。

我想从我的 slike 表中选择所有照片，并显示在索引页面中。

这是 engine.php 文件 Select() 功能很好，但 Select_Slike() 不选择任何东西。你能解释一下，错误在哪里？谢谢你。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '0');
include("connect.php");
class Manage{
    public function Select(){
        $query = mysql_query("SELECT naslov FROM slike");
        if($query)
        {
            while($row=mysql_fetch_array($query)){
                echo '<option value="'.$row['slike_id'].'">'.$row['naslov'].'</option>';
            }
        }
        else{
            die(mysql_error());
        }
    }
    public function Select_Slike(){
        $query = mysql_query("select * from slike");
        if($query)
        {   
            while($row = mysql_fetch_array($query)){
            echo '<img src="../images/'.$row['string'].'.jpg'.'"/>';
            }
        }
        else{
            echo mysql_query();
        }
    }
}
?> 
```

index.php 页面

```
<center>
<?php
$m = Manage;
$m->Select_Slike();
?>
</center> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:25:50.373

通过调用创建一个新实例

```
$m = new Manage(); 
```

然后你可以打电话

```
$m->Select_Slike(); 
```

你说的方式，我不确定你是否想要一个静态方法。如果你想要一个静态（类）方法，你可以像这样声明它

```
public static function Select_Slike() 
```

然后你可以做

```
Manage::Select_Slike(); 
```

您可以在[http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)的 php 手册中找到更多详细信息

# php - PHP调试打印到命令行

> ID：15204718
> 
> 赞同：-5
> 
> 时间：2013-03-04T15:11:33.737
> 
> 标签：php, debugging, command-line, terminal

我有一个 php 服务器，我想创建一个函数来接收变量并将其打印到同时打开的终端/命令行中。

知道怎么做吗？基于 Linux 的服务器或 wamp，并不重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:15:02.957

打印到浏览器控制台好吗？可以在 firefox 上使用 firebug 和 firephp [http://www.sitepoint.com/debug-php-firebug-firephp/](http://www.sitepoint.com/debug-php-firebug-firephp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:19:15.673

您可以将变量写入文件并在终端上“拖尾”该文件。

```
function writelog($msg)
{
    file_put_contents(FILE_PATH,$msg);  
} 
```

您也可以使用 error_log 函数代替 file_put_content。但我不确定它是否是错误消息。

在终端上运行

```
tail -f FILE_PATH 
```

PS FILE_PATH 是您要写入数据的文件的绝对路径。

# android - 如何使用 phonegap 构建同时支持纵向和横向启动屏幕？

> ID：15204721
> 
> 赞同：0
> 
> 时间：2013-03-04T15:11:42.370
> 
> 标签：android, cordova, phonegap-build

我有一个可以在纵向或横向模式下使用的 phonegap 应用程序。我们正在使用 phonegap 构建，我想用我们的徽标替换默认启动屏幕。但是，我找不到这样做的方法，以便在以横向或纵向模式启动时徽标不会拉伸。

理想情况下，我可以使用 9-patch 图像，但我会满足于创建图像的纵向和横向版本。

[我在这里](https://stackoverflow.com/questions/9204573/phonegap-splash-screen-for-android-not-stretched-or-9patch)看到了一个相关的问题，但我认为我无法使该解决方案与 phonegap 构建一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:05:25.430

我正在使用 9 补丁图像。

请在此处找到我的详细说明：[Android 的 Phonegap 闪屏：未拉伸或 9patch](https://stackoverflow.com/questions/9204573/phonegap-splash-screen-for-android-not-stretched-or-9patch/10756009#10756009)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T09:05:52.837

这是一个已知错误，并且没有针对 phonegap 构建服务的解决方案。我读到一些早期的 phonegap 版本没有这样的问题。因此，通过 config.xml 简单地切换到早期版本可能会有所帮助（但到目前为止我还没有尝试过）：

```
<preference name="phonegap-version" value="2.7.0" /> 
```

当前支持的版本为 2.0.0、2.1.0、2.2.0、2.3.0、2.5.0、2.7.0 和 2.9.0（默认）。

# jquery - 支持从右到左的 jQuery 选框（来自无序列表）

> ID：15204727
> 
> 赞同：1
> 
> 时间：2013-03-04T15:12:02.697
> 
> 标签：jquery, marquee

我一直在寻找一个 jQuery 选框，虽然它听起来很简单，但我找不到任何适合我需要的工作代码。

**我的要求是：**

1.  它必须支持方向（特别是从右到左）。
2.  它必须支持使用无序列表而不是单个字符串作为源。
3.  它应该看起来像经典的选框。

~~经过搜索，我只发现了一些与我正在寻找的东西有点相符但都有严重缺陷的地方。~~

第一个是[liScroll](http://logicbox.net/jquery/simplyscroll/)，虽然看起来不错，但缺少方向支持。默认情况下它只是从左到右，没有选项可以改变它。尽管我尝试将代码更改为支持从右到左，但可惜我失败了。

我也尝试过*Giva Labs Marquee 插件*，但据我所知，它也不支持方向。

最后一个是 [jQuery WebTicker][2]，乍一看它似乎很完美，但结果却有一个奇怪的错误/行为。当每个项目都很短时它工作正常，但在我的情况下，每个项目本身都是一个很长的字符串，在这种情况下它的行为不规律。当每个项目结束时，它不是在其尾部平滑地显示下一个，而是显示很多空白，并且项目感觉它们跳跃而不是滚动/滑动。

我知道很多人一般不喜欢选框，但我向你保证，我不是自愿这样做的。所以请耐心等待。

~~提前致谢。~~

**编辑：** 我已经设法让[simpleScroll](http://logicbox.net/jquery/simplyscroll/)（感谢**Ceryl Wiltink**）大部分工作，但我遇到了一个小问题。我使用*“方向：向后”*，这意味着文本从左向右滚动，但问题是文本从最右边而不是最左边开始滚动，导致列表中的第一项不可见。

我看了一下 JS，我猜问题出在这部分（else 块）[原始 JS 中的第 143 到 162 行]

```
if (this.isAuto && this.o.autoMode=='loop') {

            this.$list.css(this.dimension,this.posMax+(this.itemMax*addItems) +'px');

            this.posMax += (this.clipMax - this.o.speed);

            if (this.isForwards) {
                this.$items.slice(0,addItems).clone(true).appendTo(this.$list);
                this.resetPosition = 0;

            } else {
                this.$items.slice(-addItems).clone(true).prependTo(this.$list);
                this.resetPosition = this.$items.length * this.itemMax;
                //due to inconsistent RTL implementation force back to LTR then fake
                if (this.isRTL) {
                    this.$clip[0].dir = 'ltr';
                    //based on feedback seems a good idea to force float right
                    this.$items.css('float','right');
                }
            } 
```

但是，无论我尝试修改什么值，它都会进一步搞砸，我假设这是关键部分

> this.resetPosition = this.$items.length * this.itemMax;

但对这些价值观的任何修改最终都会弊大于利。我什至在正确的地方工作吗？或者问题可能完全在其他地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:17:03.220

我过去曾成功使用过 simplescroll。

[http://logicbox.net/jquery/simplyscroll/](http://logicbox.net/jquery/simplyscroll/)

不确定它是否随着时间的推移发生了很大变化，但它支持方向并适用于 UL/LI

[您可以在http://www.cesar.nl/](http://www.cesar.nl/)上看到一个示例（顶部带有图像的产品代码）

# android - imageView.setImageResource(int resId) 与 imageView.setImageBitmap(Bitmap bitmap);

> ID：15204736
> 
> 赞同：2
> 
> 时间：2013-03-04T15:12:16.320
> 
> 标签：android, bitmap

图像文件是相同的。一旦它来自`drawable`和一个来自`file system`。

这是代码。

```
 <ImageView
                android:scaleType="fitEnd"
                android:id="@+id/partner_logo"
                android:layout_width="51dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:contentDescription="@string/parter_logo"
                /> 
```

我想动态设置合作伙伴标志，所以我从网络服务器加载 id 然后

设置为`imageView.setImageBitmap(Bitmap bitmap);`

使用 ImageResource 它看起来不错，正如我所期望的那样，但`Bitmap`万一它太小了。

这里有图片比较

* * *

徽标（黑色箭头点）通过 设置`setBitmap`。好像没有上档次

![在此处输入图像描述](../Images/aea927ae1e265d499a390b44c5c5682e.png)

--

徽标（读取箭头点）是通过设置的`setImageResource`。它看起来就像我想要的那样。

![在此处输入图像描述](../Images/1c62da7e4c773ac47314dea0245a3360.png)

所以问题是为什么这里有区别？在位`scaleType`图的情况下工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:17:36.847

因为`setImageResource()`自动缩放您的图像。

如果你想使用`setImageBitmap()`你需要将你的位图放大到你想要的大小或使用`setAdjustViewBounds(true)`它来保持你的纵横比。

```
Bitmap.createScaledBitmap(yourbitmap, width, height, false); 
```

[http://developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html)

# c# - 是否可以通过 DataContractSerializer 反序列化加密文件？

> ID：15204739
> 
> 赞同：2
> 
> 时间：2013-03-04T15:12:31.557
> 
> 标签：c#, serialization, encryption, datacontractserializer

我正在通过 DataContractSerializer 序列化一个对象，没有任何问题。

但是，如果我现在尝试将此对象序列化为加密文件，则在反序列化时会出现异常。

这是我的代码：

```
 public static bool SerializeDataContract<t>(Stream fileStream, t o, bool bCrypt = false)
    {
        DataContractSerializer serializer = new DataContractSerializer(typeof(t));
        if(bCrypt)
        {
            TripleDESCryptoServiceProvider crypt = new TripleDESCryptoServiceProvider();
            crypt.IV = CRYPT_INIT_VECTOR;
            crypt.Key = CRYPT_KEY;
            crypt.Padding = PaddingMode.Zeros;

            using(CryptoStream cryptoStream = new CryptoStream(fileStream, crypt.CreateEncryptor(), CryptoStreamMode.Write))
            {
                serializer.WriteObject(cryptoStream, o);
                cryptoStream.Close();
            }
        }
        else
            serializer.WriteObject(fileStream, o);
        return true;
    }
    public static bool DeserializeDataContract<t>(Stream fileStream, out t o, bool bCrypt = false)
    {
        o = default(t);

        try
        {
            DataContractSerializer serializer = new DataContractSerializer(typeof(t));
            if(bCrypt)
            {
                TripleDESCryptoServiceProvider crypt = new TripleDESCryptoServiceProvider();
                crypt.IV = CRYPT_INIT_VECTOR;
                crypt.Key = CRYPT_KEY;
                crypt.Padding = PaddingMode.Zeros;

                using(CryptoStream cryptoStream = new CryptoStream(fileStream, crypt.CreateDecryptor(), CryptoStreamMode.Read))
                {
                    //TraceXML(cryptoStream);

                    o = (t)serializer.ReadObject(cryptoStream);
                    cryptoStream.Close();
                }
            }
            else
            {
                o = (t)serializer.ReadObject(fileStream);
            }
        }
        catch(Exception ex)
        {
            return false;
        }

        return true;
    } 
```

如果我用 bCrypt=false 调用这两个函数，一切都会按预期工作。但是如果我用 bCrypt=true 调用函数，反序列化时会出现异常。

异常是（从德语翻译成英语）：SerializationException：根级别的数据无效。

如果我跟踪解密后读取的数据，数据对我来说似乎没问题，那就是它看起来就像没有加密的序列化。

你知道我的代码中的错误在哪里吗？

还是不能对 DataContractSerializer 使用加密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:21:37.327

问题是加密数据用零填充，因此原始数据的长度不明显。

这是删除它们以便反序列化工作的一种方法：

```
using(var cryptoStream = 
      new CryptoStream(fileStream, crypt.CreateDecryptor(), CryptoStreamMode.Read))
{               
    using(var reader = new StreamReader(cryptoStream))
    {
        var s = reader.ReadToEnd().TrimEnd(new char[]{'\0'});

        using(var stream = new MemoryStream(Encoding.ASCII.GetBytes(s)))
        {
            o = (t)serializer.ReadObject(stream);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:20:52.180

如果您在解密后将流保存到文件中，我认为您可以轻松了解问题出在哪里

只需在加密之前将其与序列化文件进行比较。

如果它们相等，那么您在解密器完成工作之前就过早地对其进行反序列化。

我认为您不需要调用`cryptoStream.Close();`Call Flush()

我会使用 memoryStream 作为缓冲区，而不是直接将 CryptoStream 传递给 DataContractSerializer，反之亦然。

# javascript - 我的轮播末尾出现空白

> ID：15204742
> 
> 赞同：0
> 
> 时间：2013-03-04T15:12:56.553
> 
> 标签：javascript, jquery, css, carousel, infinite-carousel

我已经使用[这个脚本在我的网站上创建](https://code.google.com/p/jquery-infinite-carousel/)[了](http://cornertablehouston.com/)一个无限轮播。它是用 CSS 定制的，所以第一个和最后一个项目显示一半。

如果你继续点击右箭头，你最终会在最后碰到一个空白区域。到目前为止，我还无法解决此问题。任何人都可以提供任何解决方案吗？

这是相关的脚本：

```
/**
 * @author Stéphane Roucheray 
 * @extends jquery
 */
jQuery.fn.simplecarousel = function(previous, next, options){
    var sliderList = jQuery(this).children()[0];

    if (sliderList) {
        var increment = jQuery(sliderList).children().outerWidth(true),
        elmnts = jQuery(sliderList).children(),
        numElmts = elmnts.length,
        sizeFirstElmnt = increment,
        shownInViewport = Math.round(jQuery(this).width() / sizeFirstElmnt),
        firstElementOnViewPort = 1,
        isAnimating = false;

        for (i = 0; i < shownInViewport; i++) {
            jQuery(sliderList).css('width',(numElmts+shownInViewport)*increment + increment + "px");
            jQuery(sliderList).append(jQuery(elmnts[i]).clone());
        }

        jQuery(previous).click(function(event){
            if (!isAnimating) {
                if (firstElementOnViewPort == 1) {
                    jQuery(sliderList).css('left', "-" + numElmts * sizeFirstElmnt + "px");
                    firstElementOnViewPort = numElmts;
                }
                else {
                    firstElementOnViewPort--;
                }

                jQuery(sliderList).animate({
                    left: "+=" + increment,
                    y: 0,
                    queue: true
                }, "swing", function(){isAnimating = false;});
                isAnimating = true;
            }

        });

        jQuery(next).click(function(event){
            if (!isAnimating) {
                if (firstElementOnViewPort > numElmts) {
                    firstElementOnViewPort = 2;
                    jQuery(sliderList).css('left', "0px");
                }
                else {
                    firstElementOnViewPort++;
                }
                jQuery(sliderList).animate({
                    left: "-=" + increment,
                    y: 0,
                    queue: true
                }, "swing", function(){isAnimating = false;});
                isAnimating = true;
            }
        });
    }
};

#home-carousel-container {
    position: relative;
}
#home-carousel {
    overflow: hidden;
}
#home-carousel ul {
    margin-left: -143px;
    padding: 0;
    position: relative;
}
#home-carousel li {
    float: left;
    height: 645px;
    list-style: none outside none;
    margin: 0 3px;
    width: 256px;
} 
```

![在此处输入图像描述](../Images/7888e4526766e6de6d23f1b7bae44e93.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:44:40.433

根据我的评论。

您在轮播上设置了负的左边距，导致它隐藏了一半的图像。因此，当您单击下一个/上一个时，它会显示图像移动到的位置以创建连续效果。

在你的 CSS 中，我改变了

```
#home-carousel ul{
  position: relative;
  padding: 0;
  margin-left: -143px;
} 
```

到

```
#home-carousel ul{
  position: relative;
  padding: 0;
  margin-left: -3px;
} 
```

并且没有任何问题。

![修改后的页面截图 - 在 Chrome 中](../Images/4cba97e8fb7358d3b89ac225318515b2.png)

# ruby-on-rails - 干燥路径.rb

> ID：15204745
> 
> 赞同：1
> 
> 时间：2013-03-04T15:13:07.530
> 
> 标签：ruby-on-rails, cucumber, dry

我是黄瓜的新手，我想问一下如何将这段代码变干（不包含错误）：

```
when /^the user page$/
  users_path

when /^the review page$/
  reviews_path 
```

我尝试使用正则表达式

```
when /^the (.+) page$/
  $1.to_s+'s_path' 
```

但显然这是错误的。提前致谢！

**解决方案（基于[aledalgrande](https://stackoverflow.com/users/419656/aledalgrande)的回答）：**

```
when /^the (.+) page$/ 
 send("#{$1}s_path") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:27:57.950

你可以加：

功能/支持/paths.rb

```
module PathHelpers
  def path_to(page_name)
    case page_name
    when /user/i
      users_path
    when /review/i
      reviews_path
    when /home/i
      root_path
    #add custom here
    else
      raise "Can't find mapping from \"#{page_name}\" to a path."
    end
  end
end

World(PathHelpers) 
```

并称之为：

```
when /^the (.+) page$/ do |page|
  visit path_to(page)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:20:37.693

这应该有效：

```
When /^the "(.+)" page$/ do |destination|
  send("#{destination}s_path")
end 
```

# iphone - 实用程序应用程序中主视图控制器的导航控制器？

> ID：15204751
> 
> 赞同：0
> 
> 时间：2013-03-04T15:13:19.743
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我创建了一个实用程序应用程序，通过按钮链接到另一个名为场景的 xib - 我正在尝试为该链接创建一个导航控件。当单击按钮时，我的场景 xib 上有一个“后退”按钮。我不希望在主视图控制器或翻转视图控制器上显示导航栏。我对iOS很陌生，我不知道该怎么做？

让一个按钮返回到自定义 HUD 上的菜单会更好吗？不知道这样可以吗？

感谢您提前提供任何帮助，并感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:18:53.553

您可以在场景 xib 上创建自定义，`UINavigationBar`如果您不想创建自定义后退按钮，则可以向其中添加自定义返回`NavigationController`按钮`NavigationController`作为场景的子视图上的后退按钮，在您打开时保持导航栏隐藏`MainViewController`并且仅在场景视图中显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:27:47.907

对于隐藏 UINavigationBar：

```
[[self navigationController] setNavigationBarHidden:YES animated:YES]; 
```

您可以自定义`UIButton`并放置在任何地方（*根据您的要求*）。并在其方法中，为返回`UIViewController`（*上一个`UIVieController`*）编写代码。

之类的，

```
UIButton *btnBack = [UIButton buttonWithType:UIButtonTypeCustom];
[btnBack addTarget:self action:@selector(goBack:) forControlEvents:UIControlEventTouchUpInside];
btnBack.frame = CGRectMake(10, 10.5, 36, 39); // change it , As your wish 
[btnBack setBackgroundImage:[UIImage imageNamed:@"MMBack.png"] forState:UIControlStateNormal];
[self.view addSubview:btnBack]; 
```

// UIButton的调用方法

```
-(void)goBack:(UIButton *) Sender
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

# ios - 静态单元格不显示在模拟器中

> ID：15204756
> 
> 赞同：1
> 
> 时间：2013-03-04T15:13:34.270
> 
> 标签：ios, objective-c, xcode

我正在使用 segues，当我按下 addButton uiBarbutton 对象时，我想从一个视图转换到另一个视图。无论如何，我从检查器下的对象库中添加了一个表格视图对象，我将表格的样式更改为分组并将单元格更改为静态。当我运行应用程序时，只要表视图对象是 UITableViewController 的子类，一切正常。当我将检查器中的表类更改为我创建的类（也是 UITableViewController 的子类）时，单元格不会像以前一样出现在模拟器中。有什么我应该添加到 prepareForSegue:sender 方法的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:26:05.080

当使用带有您创建的类的表视图以及分组样式和静态单元格时，请确保您不实现以下内容：

*   (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView { }

*   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { }

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { }

全部抹去！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:57:37.067

答案是，阅读文档！在“关于 iOS 应用程序中的表格视图”文档中，有这样的注释：

“注意：如果故事板中的表视图是静态的，则包含该表视图的 UITableViewController 的自定义子类不应实现数据源协议。相反，表视图控制器应使用其 viewDidLoad 方法填充表视图的数据。对于更多信息，请参阅“使用数据填充静态表视图”。</p>

# ruby-on-rails - 模型上的 Rails 序列列

> ID：15204760
> 
> 赞同：0
> 
> 时间：2013-03-04T15:13:42.267
> 
> 标签：ruby-on-rails, ruby, model, sequence

我成功地按照这个[迷你教程](http://msquaredwebsvc.blogspot.pt/2013/01/create-postgresql-sequence-for-ruby-on.html)在我的表 (cars) 中有一个列 (car_code) 像一个序列一样工作（使用 postgreSQL 数据库）。

结果我有这张桌子：

```
CREATE TABLE Cars
(
 id serial NOT NULL,
 created_at timestamp without time zone NOT NULL,
 updated_at timestamp without time zone NOT NULL,
 car_date timestamp without time zone,
 car_code integer DEFAULT nextval('car_code_sequence'::regclass),
 CONSTRAINT cars_pkey PRIMARY KEY (id )
 ) 
```

我的插入语句工作正常：

```
INSERT INTO cars(created_at, updated_at, car_date) VALUES (now(), now(), now());
--1|Date|Date|Date|2 <--using my car_code_sequence 
```

不幸的是，当我在“car_controller”中调用“创建”操作时，rails 应用程序会生成以下语句：

```
INSERT INTO "cars" ("created_at", "car_code", "car_date", "updated_at") 
VALUES ($1, $2, $3, $4) RETURNING "id" [
  ["created_at", Mon, 04 Mar 2013 14:39:55 UTC +00:00],
  ["car_code", nil], 
  ["car_date", Mon, 04 Mar 2013 14:39:55 UTC +00:00],
  ["updated_at", Mon, 04 Mar 2013 14:39:55 UTC +00:00]] 
```

所以，我的问题是：

谁可以更改汽车模型以从插入语句中排除列“car_code”（但将“car_code”保留在数据库中），即具有与“id”相同的行为）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:38:25.390

尝试在车型上添加此代码：

```
class Car < ActiveRecord::Base
  ## --------------------- Ignore columns patch ------
  @@ignore_column_pattern = /^car_code/

  class << self
    alias :all_columns :columns
    def columns 
      @columns_filt ||= all_columns.reject { |col| col.name =~ @@ignore_column_pattern } 
    end 
  end

  alias :all_attribute_names :attribute_names
  def attribute_names
    @attr_names_filt ||= all_attribute_names.reject { |att| att =~ @@ignore_column_pattern }
  end
  ## ------------------- / Ignore columns patch ------
end 
```

来自：[https ://stackoverflow.com/a/10319903/1042324](https://stackoverflow.com/a/10319903/1042324)

# javascript - PhoneGap - 未捕获的 ReferenceError：函数未在文件中定义

> ID：15204763
> 
> 赞同：0
> 
> 时间：2013-03-04T15:13:49.663
> 
> 标签：javascript, function, cordova

对不起，如果我重复已经解决的问题。我有基于 phonegap 的身份验证过程：

AVD：安卓 4.2.2

```
<head>
    <script type="text/javascript" charset="utf-8" src="js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-2.4.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="main.js"></script>
</head>
<body>
<form id="loginForm">
    <div data-role="fieldcontain" class="ui-hide-label">
        <input type="text" name="username" id="username" value="" /></div>
    <div data-role="fieldcontain" class="ui-hide-label">
        <input type="password" name="password" id="password" value="" /></div>
    <div data-role="fieldcontain" class="ui-hide-label">
        <select name="coursetype" id="coursetype">
            <option value="1">Type 1</option>
            <option value="2">Type 2</option>
        </select></div>
    <!-- Below is 43th line -->
    <input type="submit" value="Login" id="submitButton" onclick="handleLogin();" />
</form>
</body> 
```

在**main.js**中使用适当的代码过程：

```
function handleLogin() {
    var form = $("#loginForm");
    var u = $("#username", form).val();
    var p = $("#password", form).val();
    var t = $("#coursetype", form).val();
    if(u!= '' && p!= '' && t!= '') {
        alert('Values are: ' +u+ ' & ' +p+ ' & ' +t);
    } else {
        alert('Field(s) were empty');
    }
} 
```

通过单击登录按钮，它会显示以下内容：

```
Uncaught ReferenceError: handleLogin is not defined at file:///android_asset/www/index.html:43 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:13:18.310

尝试删除 onclick 并在 main.js 中使用它

```
$('document').ready(function () {
    $('#submitButton').on('click',function (e) {
         e.preventDefault();
         var form = $("#loginForm");
         var u = $("#username", form).val();
         var p = $("#password", form).val();
         var t = $("#coursetype", form).val();
         if(u!= '' && p!= '' && t!= '') {
             alert('Values are: ' +u+ ' & ' +p+ ' & ' +t);
         } else {
             alert('Field(s) were empty');
         }
    })
}) 
```

我只是从不真正信任 onclick，有很多原因，我认为这可能是问题所在。

# css - 超过高度时的动态浮动列

> ID：15204765
> 
> 赞同：2
> 
> 时间：2013-03-04T15:13:54.443
> 
> 标签：css, multiple-columns

我有一个关于 -Container`<li>`中的动态浮动布局的问题`<ul>`： [![例子](../Images/65e1c89aba1f76a142f7105469567f9e.png)](https://i.stack.imgur.com/N4JtE.png)

灰色容器`<ul>`的固定高度为 150px，其中所有`<li>`'s 应使用 150px 的最大高度，然后排列在下一列中（参见元素 7、8）

我很确定解决方案是显而易见的，但我一直在尝试几种具有宽度和高度的浮点组合。

任何建议或解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:21:53.753

您可以使用 CSS3 列：“ [CSS 多列布局模块](http://www.w3.org/TR/css3-multicol/)”：

**HTML**

```
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul> 
```

**CSS**

```
ul {
    -moz-column-count:3;
    -webkit-column-count:3;
    column-count:3;
    max-height: 20px;
}

ul > li {
    height: 20px;
} 
```

**演示**

[http://jsfiddle.net/UTfD9/](http://jsfiddle.net/UTfD9/)

**支持**

这将适用于：

*   苹果浏览器
*   铬合金
*   火狐
*   IE10+
*   歌剧 11+

请参阅：[我可以使用 CSS3 多列布局吗？](http://caniuse.com/multicolumn)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:21:40.273

[http://www.w3schools.com/css3/css3_multiple_columns.asp](http://www.w3schools.com/css3/css3_multiple_columns.asp)

[https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts)

CSS 多列布局扩展了块布局模式，允许轻松定义多列文本。如果行太长，人们阅读文本会有困难；如果眼睛从一行的末尾移动到下一行的开头需要太长时间，他们就会忘记自己在哪一行。因此，为了最大限度地利用大屏幕，作者应该将有限宽度的文本列并排放置，就像报纸一样。

不幸的是，如果不强制在固定位置换行，或者严格限制文本中允许的标记，或者使用英雄脚本，这是不可能用 CSS 和 HTML 实现的。这个限制通过添加新的 CSS 属性来扩展传统的块布局模式来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:25:38.233

您可以计算您的列可以容纳多少`li`元素并使用`pseudo`选择器 ( `nth-child`) 将其拆分为列。查看我制作的演示：http: [//jsfiddle.net/QqudC/1/](http://jsfiddle.net/QqudC/1/)

# xslt - 将特殊字符添加到 xml 输出

> ID：15204766
> 
> 赞同：0
> 
> 时间：2013-03-04T15:13:56.427
> 
> 标签：xslt

我们有一段代码以如下格式返回 XML：

源 XML：

```
<Root>
    <Book>
        <BookId>a</BookId>
        &lt;Description&gt;aDescription&lt;/Description&gt;
    </Book>
    <Book>
        <BookId>b</BookId>
        &lt;Description&gt;bDescription&lt;/Description&gt;
    </Book>
</Root> 
```

我想用文字字符替换特殊字符...

```
&lt; 
```

将是 < 等。

我知道我可以使用：

```
<xsl:character-map name="escapeMapper">
    <xsl:output-character character="&lt;" string="&lt;"/>
    <xsl:output-character character="&gt;" string="&gt;"/>        
</xsl:character-map> 
```

然而，这里有一个转折点，我想先转换特殊字符，然后通过其他模板运行生成的 XML。因此，我想通过替换特殊字符的模板运行源 XML，将结果放入变量中：

```
<xsl:variable name="vrtfPass1"> 
```

现在我可以使用多通道技术并使用变量作为源来应用其他模板。

如何将特殊字符转换为文字字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:56:11.503

听起来您想要做的不是将`&lt;`and转换`&gt;`为`<`and `>`，而是*解析*XML，是吗？你能在你正在做的事情中使用 Saxon 扩展函数吗？如果是这样，我认为你可以这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:saxon="http://saxon.sf.net/">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <xsl:variable name="loaded">
      <xsl:apply-templates />
    </xsl:variable>

    <xsl:apply-templates select="$loaded/*" />
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Book/text()[normalize-space()]">
    <xsl:copy-of select="saxon:parse(.)"/>
  </xsl:template>
</xsl:stylesheet> 
```

尽管这假定文本子级`Book`本身总是格式良好的 XML。

# mysql - 如何将增量日期循环插入 MySQL？

> ID：15204767
> 
> 赞同：4
> 
> 时间：2013-03-04T15:14:02.757
> 
> 标签：mysql, sql, loops

如何仅使用循环和递增日期的 SQL 将行添加到表中，例如：

```
INSERT INTO my_table (the_date) VALUES ('2013-04-13');
INSERT INTO my_table (the_date) VALUES ('2013-04-14');
INSERT INTO my_table (the_date) VALUES ('2013-04-15');
INSERT INTO my_table (the_date) VALUES ('2013-04-16');
... 
```

我需要从 2013 年 5 月 7 日开始为接下来的每一天插入一行，例如 1000 天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:47:20.340

这样的事情会做到这一点： -

```
INSERT INTO my_table (the_date)
SELECT ADDDATE('2013-04-13', INTERVAL SomeNumber DAY)
FROM (SELECT a.i+b.i*10+c.i*100+d.i*1000 AS SomeNumber FROM integers a, integers b, integers c, integers d) Sub1
WHERE SomeNumber BETWEEN 0 AND 1000 
```

依赖于一个名为 integers 的表，它有一个名为 i 的单列，有 10 行，值从 0 到 9。

之间的子句就在那里，因此您可以限制要添加到日期的数字范围

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:01:42.197

试试这个代码：

```
$starDate = new DateTime('2013-05-07');

for ($i=0; $i < 1000; $i++) { 
  $consulta ="INSERT INTO my_table (the_date) VALUES ('".date_format($starDate, 'Y-m-d')."');";
  $starDate = date_add($starDate, date_interval_create_from_date_string('1 days'));
  echo $consulta."</br>";
  //try somthing like mysqli_query($consulta);
} 
```

使用 php 和 mysqli....你也可以使用纯 sql 来做到这一点；）

我给你这个办法。

萨卢多斯 ;)

# data-structures - 如何构建参数结构？

> ID：15204768
> 
> 赞同：1
> 
> 时间：2013-03-04T15:14:04.577
> 
> 标签：data-structures

我正在寻找数据结构的建议。

我为不同的参数使用了不同的表。比如城市一张表，员工一张表，部门一张表等等。

由于这不舒服，我已将其更改为仅一张表

```
ID;
文件ID；
参数名称
参数值

```

其中`File_id`是整数，表示该参数的用途，即`101`城市、`102`部门等。

这是否足够或者我怎样才能再前进一步（如果你有更好的主意）？

# c# - 边界框碰撞xna c#

> ID：15204774
> 
> 赞同：1
> 
> 时间：2013-03-04T15:14:22.843
> 
> 标签：c#, xna, collision, bounding-box

我不清楚如何设置它，在这种情况下我需要盒子而不是球体，因为我想知道激光是否在我的 3D 场景中击中了敌舰。这是我的球体代码，我将如何将其更改为边界框。因为如果我将球体用于激光，即使距离实际激光很远，球体也会很大并且会撞到一艘船。我要问的是如何以这种方式设置边界框。

```
private bool Cannonfire(Model model1, Vector3 world1, Model model2, Vector3 world2)
        {
            for (int meshIndex1 = 0; meshIndex1 < model1.Meshes.Count; meshIndex1++)
            {
                BoundingSphere sphere1 = model1.Meshes[meshIndex1].BoundingSphere;
                sphere1.Center = world1;
                for (int meshIndex2 = 0; meshIndex2 < model2.Meshes.Count; meshIndex2++)
                {        
                    BoundingSphere sphere2 = model2.Meshes[meshIndex2].BoundingSphere;
                    sphere2.Center = world2;
                    if (sphere1.Intersects(sphere2))
                        return true;
                }
            }
            return false;
        } 
```

那么我该怎么做谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:38:38.253

听起来您需要的是可用于在 XNA 中与 BoundingSpheres 和 BoundingBoxes 相交的 Rays。它们本质上是一条直线或梁，您可以通过将起始位置和方向传递给构造函数来指定它。然后，您可以调用 Intersects 方法并传入 BoundingBox 或 Sphere。在您的示例中，它将是这样的。

```
Ray laserBeam = new Ray(startingPosition, direction);
laserBeam.Intersects(shipBoundingSphere); 
```

请注意， intersects 返回一个可为空的浮点值。如果没有碰撞，则为 null，如果有碰撞，则为指示与 Rays startingPosition 的距离的浮点值。

此浮点值可用于计算出您的哪些潜在目标最接近射线，例如，您循环穿过您的船只，其中一艘船与浮动值 3 发生碰撞，而另一艘与浮动值 5 发生碰撞。您知道这艘船值 3 最接近激光束源，因此您可以忽略其他值。

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.ray.intersects.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.ray.intersects.aspx)

# clojure - 为什么 lein 的控制键对我使用 lein1 有效，而对我使用 lein2 无效？

> ID：15204775
> 
> 赞同：4
> 
> 时间：2013-03-04T15:14:27.123
> 
> 标签：clojure, leiningen

我已经成功升级到lein2，并且运行`lein repl`成功。我使用 VanDyke 的 SecureCrt 登录到我的 Ubuntu 12.04 工作站。我没有更改任何终端设置，并且 lein 1.x 没有以下问题。

当我使用常用​​的 bash 命令行键（如 CTRL+A、CTRL+E 和 CTRL+C）时，这些键都不起作用。

我需要做什么才能启用这些 CTRL 键？

按照安装说明，我将原始 lein 保存为 lein1。如上所述，我已经尝试过了，并且控制键可以正常工作。

我尝试为新用户安装 lein2，而不是升级，但控制键问题仍然存在。我也在 CentOS 和 Ubuntu 系统上试过这个。存在相同的行为。

这是 stty -a 的输出

速度 38400 波特；第 42 行；第 159 栏；线 = 0; 内部 = ^C; 退出 = ^\; 擦除 = ^?; 杀死 = ^U; eof = ^D; eol = ; eol2 = ; 开关 = ; 开始 = ^Q; 停止 = ^S; 悬念 = ^Z; rprnt = ^R; 错误 = ^W; 下一个 = ^V; 冲洗 = ^O; 最小值 = 1; 时间=0；-parenb -parodd cs8 -hupcl -cstopb cread clocal -crtscts -ignbrk brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff -iuclc -ixany imaxbel -iutf8 opost -olcuc -ocrnl onlcr -onocr -onlret - ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0 isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt echoctl echoke cnorton@steamboy:~/projects/clojure/wtr-usage1$

这是新 lein 的输出：

```
nREPL server started on port 52310
REPL-y 0.1.9
Clojure 1.4.0
    Exit: Control+D or (exit) or (quit)
Commands: (user/help)
    Docs: (doc function-name-here)
          (find-doc "part-of-name-here")
  Source: (source function-name-here)
          (user/sourcery function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
Examples from clojuredocs.org: [clojuredocs or cdoc]
          (user/clojuredocs name-here)
          (user/clojuredocs "ns-here" "name-here")
wtr-usage1.core=> 
```

lein 1 和 2 之间是否有需要清理的目录或文件？我没有插件，所以没有做任何升级的那部分。

我继续解决这个问题，并执行了以下诊断测试：

1）我运行了以下命令

```
java -cp target/jline-2.11-SNAPSHOT-tests.jar:target/jline-2.11-SNAPSHOT.jar -Djline.internal.Log.debug=true jline.example.Example none 
```

在克隆的 jline2 目录中。控制键不起作用。

2）我运行了以下命令

`export JLINE_LOGGING=trace && lein trampoline run`

在一个克隆的 -- `git clone git://github.com/trptcolin/reply.git`-- 回复目录中。控制键起作用了。有人建议我在 github 上创建一个[问题，我做到了。](https://github.com/jline/jline2/issues/79)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:03:31.710

这不应该发生。尝试`set -o emacs`在 bash 中执行，但 lein 脚本中不应该有任何内容来禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:14:05.697

尝试重新安装 leiningen。`lein2 repl`在我的配置启动 REPL-y 时，它看起来像这样：

```
% lein2 repl
Downloading Leiningen to /home/dpx-infinity/.lein/self-installs/leiningen-2.0.0-standalone.jar now...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 12.6M  100 12.6M    0     0  93665      0  0:02:21  0:02:21 --:--:-- 91018
nREPL server started on port 47543
REPL-y 0.1.9
Clojure 1.4.0
    Exit: Control+D or (exit) or (quit)
Commands: (user/help)
    Docs: (doc function-name-here)
          (find-doc "part-of-name-here")
  Source: (source function-name-here)
          (user/sourcery function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
Examples from clojuredocs.org: [clojuredocs or cdoc]
          (user/clojuredocs name-here)
          (user/clojuredocs "ns-here" "name-here")
user=> 
```

REPL-y 有所有常用的编辑命令。如果你没有得到这个，那么你的安装应该有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T02:59:57.043

我建议您在新环境中测试新的 lein 安装：

1.  创建新用户：`sudo useradd -m testlein`
2.  切换到新用户：`sudo su - testlein`
3.  获取最新的 lein2：`wget https://raw.github.com/technomancy/leiningen/stable/bin/lein`
4.  设置`execute`权限：`chmod +x lein`
5.  安装 lein：`./lein`
6.  运行 repl：`./lein repl`

之后尝试命令 ctrl-a/e/... 。

PS我不知道你是如何在你的系统中安装java的。也许您应该在第 5 步之前在新用户环境中设置 java。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T00:50:47.600

这听起来类似于[Cygwin 上 JLine 的问题](http://sourceforge.net/tracker/index.php?func=detail&aid=1822900&group_id=64033&atid=506056)。尝试相同的解决方法您的系统值得一试。

将 lein 脚本从第 284 行开始编辑为以下内容；添加的行用 . 表示`->`。

```
 export TRAMPOLINE_FILE

->  stty -icanon min 1 -echo

    "$LEIN_JAVA_CMD" \
        -client -XX:+TieredCompilation \
        "${BOOTCLASSPATH[@]}" \
        $LEIN_JVM_OPTS \
        -Dfile.encoding=UTF-8 \
->      -Djline.terminal=jline.UnixTerminal \      
        -Dmaven.wagon.http.ssl.easy=false \
        -Dleiningen.original.pwd="$ORIGINAL_PWD" \
        -Dleiningen.script="$SCRIPT" \
        -classpath "$CLASSPATH" \
        clojure.main -m leiningen.core.main "$@"

->  stty icanon echo

    EXIT_CODE=$? 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T12:34:46.413

根据 A. Webb 的建议，我将我的 github issue #79 for jline 作为答案发布。这适用于术语，但不适用于我的 SecureCrt。SecureCrt 对 lein1 没有任何问题。

* * *

控制键不起作用并且缺少 ~/.jline.rc 文件

没有里程碑 没有人被分配

（我已经继续创建了一个 ~/.jline.rc 包含 jline.terminal=auto 自从写了这个问题。）我的问题是我的控制键不起作用，我可以做些什么来解决这个问题。

这是我所做的事情的描述。

我在跑步

java -cp target/jline-2.11-SNAPSHOT-tests.jar:target/jline-2.11-SNAPSHOT.jar -Djline.internal.Log.debug=true jline.example.Example none

在我安装 jline2 的 ~/jline2 目录中。我的控制键（ctrl+a、ctrl+e、ctrl+u 和 Backspace）不起作用。

我正在使用 bash 作为 shell 并使用 VanDyke SecureCrt 终端仿真器产品登录 Ubuntu 12.04 系统。我最近没有对我的模拟器进行任何设置更改。

首先，我注意到我没有 ~/.jline.rc 文件 [DEBUG] Loading properties from: file:/home/cnorton/.jline.rc [DEBUG] Unable to read configuration from: file:/home/cnorton/.jline .rc java.io.FileNotFoundException: /home/cnorton/.jline.rc (没有这样的文件或目录)

在堆栈跟踪之后，这是输出的其余部分。

[DEBUG] 创建终端；type=auto [DEBUG] 配置：速度 38400 波特；第 34 行；第 117 栏；线 = 0; 内部 = ^C; 退出 = ^\; 擦除 = ^?; 杀死 = ^U; eof = ^D; eol = ; eol2 = ; 开关 = ; 开始 = ^Q; 停止 = ^S; 悬念 = ^Z; rprnt = ^R; 错误 = ^W; 下一个 = ^V; 冲洗 = ^O; 最小值 = 1; 时间=0；-parenb -parodd cs8 -hupcl -cstopb cread clocal -crtscts -ignbrk brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff -iuclc -ixany imaxbel -iutf8 opost -olcuc -ocrnl onlcr -onocr -onlret - ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0 isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt echoctl echoke

[DEBUG] 创建终端：jline.UnixTerminal@1d520c4 [DEBUG] 注册shutdown-hook: Thread[JLine Shutdown Hook,5,main] [DEBUG] 添加shutdown-hook 任务：jline.TerminalSupport$1@1e9cb75 [DEBUG] Ansi 支持： true [DEBUG] Echo 启用：false [DEBUG] NonBlockingInputStream start [DEBUG] 加载用户配置：file:/home/cnorton/.inputrc prompt> [DEBUG] 运行所有关机挂钩任务 [DEBUG] 运行任务：jline.TerminalSupport$1 @1e9cb75 [DEBUG] 删除关机钩子：线程[JLine 关机钩子，5，main]

这是运行中的更多调试输出

export JLINE_LOGGING=trace && lein trampoline 在克隆目录中运行 git clone git://github.com/trptcolin/reply.git 请注意控制键的作用。

cnorton@steamboy:~/reply$ export JLINE_LOGGING=trace && lein trampoline run REPL-y 0.2.0-SNAPSHOT Clojure 1.4.0 Exit: Control+D or (exit) o​​r (quit) Commands: (user/help) Docs: (doc function-name-here) (find-doc "part-of-name-here") Source: (source function-name-here) (user/sourcery function-name-here) Javadoc: (javadoc java-object- or-class-here) 来自 clojuredocs.org 的示例：clojuredocs 或 cdoc (user/clojuredocs "ns-here" "name-here") [DEBUG] 从以下位置加载属性：file:/home/cnorton/.jline.rc [DEBUG ] 加载的属性：[DEBUG] jline.terminal=unix [TRACE] java.lang.Throwable: CREATE MARKER at jline.TerminalFactory.create(TerminalFactory.java:50) at jline.TerminalFactory.get(TerminalFactory.java:159) at jline.console.ConsoleReader.(ConsoleReader.java:226) 在 jline.console.ConsoleReader.(ConsoleReader.java:218) 在 jline.console.ConsoleReader.(ConsoleReader.java:210) 在 reply.reader.simple_jline$setup_console_reader.invoke(simple_jline.clj:39) 在 reply.reader.simple_jline$get_input_line.invoke(simple_jline.clj:74)在 reply.reader.simple_jline$safe_read_line$fn__941.invoke(simple_jline.clj:101) 在 clojure.lang.Atom.swap(Atom.java:37) 在 clojure.core$swap_BANG_.invoke(core.clj:2108) 在reply.reader.simple_jline$safe_read_line.invoke(simple_jline.clj:99) 在reply.eval_modes.nrepl$safe_read_line.invoke(nrepl.clj:55) 在reply.eval_modes.nrepl$parsed_forms.invoke(nrepl.clj:88)在reply.eval_modes.nrepl$run_repl.invoke(nrepl.clj:139) 在reply.eval_modes.nrepl$main.invoke(nrepl.clj:227) 在reply.main$launch_nrepl$fn__3187.invoke(main.clj:63 ) 在 clojure.core$with_redefs_fn.invoke(core.clj:6585) 回复.main$launch_nrepl.invoke(main.clj:62) 回复。main$launch.invoke(main.clj:79) at reply.main$_main.doInvoke(main.clj:89) at clojure.lang.RestFn.invoke(RestFn.java:397) at clojure.lang.Var.invoke (Var.java:411) 在 clojure.lang.AFn.applyToHelper(AFn.java:159) 在 clojure.lang.Var.applyTo(Var.java:532) 在 reply.ReplyMain.main(ReplyMain.java:14)在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method .invoke(Method.java:616) 在 clojure.lang.Reflector.invokeMatchingMethod(Reflector.java:93) 在 clojure.lang.Reflector.invokeStaticMethod(Reflector.java:207) 在 clojure.lang.Reflector.invokeStaticMethod(Reflector. java:200) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect。NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:616) 在 clojure.lang.Reflector.invokeMatchingMethod (Reflector.java:93) at clojure.lang.Reflector.invokeStaticMethod(Reflector.java:207) at user$eval5.invoke(NO_SOURCE_FILE:1) at clojure.lang.Compiler.eval(Compiler.java:6511) at clojure .lang.Compiler.eval(Compiler.java:6501) at clojure.lang.Compiler.eval(Compiler.java:6477) at clojure.core$eval.invoke(core.clj:2797) at clojure.main$eval_opt。在 clojure.main$null_opt.invoke(main.clj:349) 在 clojure.main$initialize.invoke(main.clj:316) 在 clojure.main$main.doInvoke(main.clj) 调用(main.clj:297) :427) 在clojure.lang 的clojure.lang.RestFn.invoke(RestFn.java:421) 的clojure.lang.Var.invoke(Var.java:419)。AFn.applyToHelper(AFn.java:163) 在 clojure.lang.Var.applyTo(Var.java:532) 在 clojure.main.main(main.java:37)

[DEBUG] 创建终端；type=unix [TRACE] 运行：[sh,-c,stty -a < /dev/tty] [TRACE] 结果：速度 38400 波特；第 34 行；第 117 栏；线 = 0; 内部 = ^C; 退出 = ^\; 擦除 = ^?; 杀死 = ^U; eof = ^D; eol = ; eol2 = ; 开关 = ; 开始 = ^Q; 停止 = ^S; 悬念 = ^Z; rprnt = ^R; 错误 = ^W; 下一个 = ^V; 冲洗 = ^O; 最小值 = 1; 时间=0；-parenb -parodd cs8 -hupcl -cstopb cread clocal -crtscts -ignbrk brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff -iuclc -ixany imaxbel -iutf8 opost -olcuc -ocrnl onlcr -onocr -onlret - ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0 isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt echoctl echoke

[DEBUG] 配置：速度 38400 波特；第 34 行；第 117 栏；线 = 0; 内部 = ^C; 退出 = ^\; 擦除 = ^?; 杀死 = ^U; eof = ^D; eol = ; eol2 = ; 开关 = ; 开始 = ^Q; 停止 = ^S; 悬念 = ^Z; rprnt = ^R; 错误 = ^W; 下一个 = ^V; 冲洗 = ^O; 最小值 = 1; 时间=0；-parenb -parodd cs8 -hupcl -cstopb cread clocal -crtscts -ignbrk brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff -iuclc -ixany imaxbel -iutf8 opost -olcuc -ocrnl onlcr -onocr -onlret - ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0 isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt echoctl echoke

[DEBUG] Created Terminal: jline.UnixTerminal@74a7af [DEBUG] Registering shutdown-hook: Thread[JLine Shutdown Hook,5,main] [DEBUG] 添加shutdown-hook任务：jline.TerminalSupport$1@183e6d4 [DEBUG] Ansi 支持： true [TRACE] 运行：[sh,-c,stty -icanon min 1 -icrnl -inlcr < /dev/tty] [TRACE] 结果：[TRACE] 运行：[sh,-c,stty -echo < /dev/ tty] [TRACE] 结果：[DEBUG] 启用回显：false [DEBUG] NonBlockingInputStream start [DEBUG] 加载的用户配置：file:/home/cnorton/.inputrc [TRACE] 加载历史记录来自：/home/cnorton/.jline- reply.history user=> [TRACE] 运行：[sh,-c,stty intr undef < /dev/tty] [TRACE] 结果：[TRACE] 击键：1 [TRACE] 绑定：BEGINNING_OF_LINE [TRACE] 击键：5 [ TRACE] 绑定：END_OF_LINE [TRACE] 击键：21 [TRACE] 绑定：UNIX_LINE_DISCARD [TRACE] 击键：127 [TRACE] 绑定：BACKWARD_DELETE_CHAR

* * *

# recursion - VBS 删除只读属性递归

> ID：15204777
> 
> 赞同：0
> 
> 时间：2013-03-04T15:14:35.567
> 
> 标签：recursion, vbscript, attributes, wsh

我对 VBS 很陌生，并尝试从目录中递归地删除只读属性。

它正在删除文件的只读属性，但不删除目录的属性。此外，这些目录中的文件似乎失去了相关的程序链接，现在都显示为未注册的文件类型。任何帮助是极大的赞赏。

更新：我可以看到为什么文件现在失去了关联。这是因为 . 将名称与扩展名分开的名称已被删除！嗬！理想情况下，我只想重命名文件名。

```
re.Pattern =  "[_.]"
re.IgnoreCase = True
re.Global = True

RemoveReadonlyRecursive("T:\Torrents\")

Sub RemoveReadonlyRecursive(DirPath)
    ReadOnly = 1
    Set oFld = FSO.GetFolder(DirPath)

    For Each oFile in oFld.Files
        If oFile.Attributes AND ReadOnly Then
            oFile.Attributes = oFile.Attributes XOR ReadOnly
        End If
        If re.Test(oFile.Name) Then
            oFile.Name = re.Replace(oFile.Name, " ")
        End If
    Next
    For Each oSubFld in oFld.SubFolders
        If oSubFld.Attributes AND ReadOnly Then
            oSubFld.Attributes = oSubFld.Attributes XOR ReadOnly
        End If
        If re.Test(oSubFld.Name) Then
            oSubFld.Name = re.Replace(oSubFld.Name, " ")
        End If

        RemoveReadonlyRecursive(oSubFld.Path)
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:24:16.130

您似乎想通过脚本自动执行可重复的操作。为什么不使用`attrib`命令为您执行此操作：

```
attrib -r "T:\Torrents\*.*" /S 
```

如果要将其附加到可单击的图标，可以将其放在批处理文件中。

编辑：要从 VBScript 静默运行它：

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.Run "attrib -r ""T:\Torrents\*.*"" /S", 0, true) 
```

EDIT2：要替换除最后一个句点之外的所有内容，请使用如下正则表达式：

```
filename = "my file.name.001.2012.extension"
Set regEx = New RegExp
' Make two captures:
' 1\. Everything except the last dot
' 2\. The last dot and after that everything that is not a dot
regEx.Pattern = "^(.*)(\.[^.]+)$"     ' Make two captures:

' Replace everything that is a dot in the first capture with nothing and append the second capture        
For each match in regEx.Execute(filename)
    newFileName = replace(match.submatches(0), ".", "") & match.submatches(1)
Next 
```

# php - PHP & SQL 插入数据库表错误

> ID：15204783
> 
> 赞同：-2
> 
> 时间：2013-03-04T15:14:48.390
> 
> 标签：php, html, sql

在尝试将字符串发送到 SQL 数据库时，我正在慢慢地学习 PHP 和 SQL，并偶然发现了一个小错误。我要做的是将用户的详细信息插入一个表（当前有效）并将用户名与 5 个空白条目一起发送到另一个表中。表examscore 字段是username,exam,exam1,exam2,exam3,exam4（我现在需要空白的正是这些考试字段）。

问题是我收到以下消息： Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in C:\xampp\htdocs\E-LearningWebsite\addcustomertodb.php 在第 11 行（从 $query1 开始的行）

如果可能的话，谁能解释这个错误的含义以及我做错了什么？

```
<?php
require "dbconn.php";

$username = $_GET['username'];
$email = $_GET['email'];
$pass = $_GET['password'];

$query = "INSERT INTO customer VALUES ('".$username."','".$email."','".$pass."')";

$query1 = "INSERT INTO examscores VALUES ('".$username."','""','""','""','""','""')";

$results = mysql_query($query) or die (mysql_error());

$results1 = mysql_query($query1) or die (mysql_error());

?> 
```

亲切的问候安迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:16:18.623

改变

```
$query1 = "INSERT INTO examscores VALUES ('".$username."','""','""','""','""','""')"; 
```

到

```
$query1 = "INSERT INTO examscores VALUES ('".$username."','','','','','')"; 
```

附言。您正在邀请 SQL 注入，但这是一个不同的故事......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:17:34.037

护目镜！他们什么都不做！sql[注入漏洞](http://bobby-tables.com)！这只是星期一！

为什么不只是

```
$query ="INSERT INTO customer VALUES ('$username', '$email', '$pass');";
$query1 = "INSERT INTO examscores VALUES ('$username', '', '', '', etc...);"; 
```

`""`PHP 会很乐意为您替换带引号的字符串中的$vars 。绝对不需要你正在做的所有连接。任何体面的代码编辑器仍会为您突出显示变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T15:18:16.637

你缺少点来连接你的字符串

```
$query1 = "INSERT INTO examscores VALUES ('".$username."','"."','"."','"."','"."','"."')"; 
```

此外，您不需要有不同的字符串，而且如果您不插入它们，您也不需要包含每一列

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T15:17:46.317

导致错误的*直接问题*是双双引号之间的 query1 缺少`.`s （或者您应该完全删除双双引号。甚至是不需要的列......）。

但是您的代码中存在**更大的问题：**

*   **[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)**：您的代码易受攻击。您至少应该逃避来自用户的变量...
*   **[mysql_* deprecation](http://news.php.net/php.internals/53799)** : 自 PHP 5.5 起，这些函数将被弃用。使用 Mysqli 甚至 ebtter PDO。

# java - Android 手机上的 Android Maps V2 应用程序崩溃

> ID：15204790
> 
> 赞同：0
> 
> 时间：2013-03-04T15:15:04.973
> 
> 标签：java, android, maps

我制作了一个使用 Google Android Maps API V2 的应用程序，并且我遵循了 Google 提供的指南中的每一步，但不幸的是它不起作用，每次尝试启动它时它都会崩溃，我在这里查找了类似的问题关于堆栈溢出，但不幸的是我没有找到对我有帮助的（是的，我使用的是 Android 手机而不是模拟器）。

即使我已将该库添加到我的应用程序中，问题似乎也在于它没有从 Google Play 服务库中找到 MapView，所以我想知道是否有人遇到过同样的问题，你是如何解决的？

```
03-04 00:26:51.274: E/dalvikvm(14369): Could not find class 'com.google.android.maps.MapView', referenced from method com.cornboyzmaps.googlemapsA.MainActivity.onCreate 
```

**MainActivity.java**

```
package com.example.name;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(android.R.id.content, fragment).commit();
    }
} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.name"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.example.name.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.name.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:debuggable="true" >
        <activity
            android:name="com.example.name.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="**api_key**" />
    </application>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

</manifest> 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="wrap_content"
      android:layout_height="match_parent"
      class="com.google.android.gms.maps.SupportMapFragment"/> 
```

# tuckey-urlrewrite-filter - 使用 URLRewrite 过滤器时，请求 URL 被调用两次

> ID：15204794
> 
> 赞同：0
> 
> 时间：2013-03-04T15:15:17.953
> 
> 标签：tuckey-urlrewrite-filter

我正在使用 Tuckey URL 重写过滤器。我已将它安装在我的 Google App Engine (Java) 上。除了一件烦人的事情之外，它运行良好。显然，当请求 URL 被重写并由控制器处理时，正在向同一控制器发出没有参数的新请求。这发生在第一次调用返回 HTTP 响应之后。

我已经复制了我在网站上阅读的基本配置，并没有太大改变。

可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:49:31.257

Tuckey URL Rewrite 过滤器似乎工作正常。我遇到了两次发出请求的 jQuery UI 选项卡的问题。

# asp.net-mvc-3 - 寻找一个使用 asp.net mvc3 & knockout.js 上传文件的好例子

> ID：15204796
> 
> 赞同：2
> 
> 时间：2013-03-04T15:15:20.963
> 
> 标签：asp.net-mvc-3, knockout.js

我正在尝试寻找一个使用 asp.net mvc3 & knockout.js 上传多个文件的综合示例。我一直在环顾四周，但没有从头到尾显示解决方案！这些示例显示了敲除绑定需要是什么，但没有显示如何读取“控制器”中的文件。目标是将文件上传并保存到数据库。保存到 AWS S3 存储的示例是一个加号。请帮忙。

ko绑定：

```
<input type="file" data-bind="value: fileToUpload, fileUpload: fileToUpload, url : 'Client/Upload' " /> 

ko.bindingHandlers.fileUpload = {
     update: function (element, valueAccessor, allBindingsAccessor) {
            var value = ko.utils.unwrapObservable(valueAccessor())
            if (element.files.length && value) {
                var file = element.files[0];
                var url = allBindingsAccessor().url

xhr = new XMLHttpRequest();
            xhr.open("post", url, true);
            xhr.setRequestHeader("Content-Type", "image/jpeg");
            xhr.setRequestHeader("X-File-Name", file.name);
            xhr.setRequestHeader("X-File-Size", file.size);
            xhr.setRequestHeader("X-File-Type", file.type);
            console.log("sending")
            // Send the file (doh)
            xhr.send(file);
        }
    }
}

[HttpPost]
        public ActionResult Upload()
        {
           //Not sure what to do here.
        } 
```

还需要做多个文件上传吗？不确定如何设置视图模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:11:00.517

在 javascript 方面，我建议使用fineuploader [http://fineuploader.com/](http://fineuploader.com/)。您可以创建自定义绑定以使用响应更新视图模型。

```
<div data-bind="fileupload: viewModel.fileName"></div>

ko.bindingHandlers.fileUpload = {
 init: function (element, valueAccessor) {
       var $element = $(element);
       var fileNameVal = valueAccessor;
       var uploader = new qq.FineUploader({
          element: $element[0],
          request: {
            endpoint: 'server/your_upload_service'
          },
           multiple: true,
           validation: {
              allowedExtensions: ['jpeg', 'jpg', 'txt']
           },
          callbacks: {
             onComplete: function(id, fileName, responseJSON) {
                 if (responseJSON.success) {
                   // update your value
                   valueAccessor(fileName)
                   //may need to change this if you pass a reference back 
                   // in your responseJSON such as an s3 key
                }
             }
          }
       });
    }
}; 
```

至于服务器端，我不熟悉 ASP.net，但您应该能够与端点上的请求数据进行交互，并提取包含图像数据的多部分编码表单部分。

可能想看看这些答案

[MVC 3 文件上传和模型绑定](https://stackoverflow.com/questions/4784225/mvc-3-file-upload-and-model-binding)

[文件上传 ASP.NET MVC 3.0](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0)

另请注意，fineuploader 在请求中使用密钥“qqfile”发送文件

# unique - 生成唯一 ID 并传递到文本字段

> ID：15204797
> 
> 赞同：0
> 
> 时间：2013-03-04T15:15:23.567
> 
> 标签：unique, uuid

我是 php 新手，希望得到一些帮助来解决我遇到的问题。我有一个包含 3 个可见输入字段的表单：姓名、电子邮件地址、电话号码。它还包括 3 个隐藏字段，一个是设置为 2500 的值，第二个是货币，第三个需要是唯一 ID。我需要有关如何生成唯一 ID 并将文本/值以另一种形式传递到输入字段的帮助。下面是我的代码。我需要在输入字段商人ID上显示随机ID。谢谢

```
<form action="https:urlthathastheform" method="post">
    <input type="hidden" id="merchantid" name="merchantid" />  
    <input type="hidden" id="currency" name="currency" value="$" />

    <label for="names">Names</label>
    <input type="text" name="names" id="names" />

    <label for="email_address">Email Address</label>
    <input type="text" name="email_address" id="email_address" />

    <label for="phone_number">Phone Number</label>
    <input type="text" name="phone_number" id="phone_number" />

    <label for="amount">Amount</label>
    <input type="text" name="amount" value="2500" />

    <input type="submit" name="submit" value="submit" />  
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:21:11.160

php具有生成唯一ID的功能。

```
<input type="hidden" id="merchantid" name="merchantid" value="<?php echo uniqid();>"/> 
```

注意，这个 id 是基于系统时钟的。[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

# linux - 在 centos 6.3 中安装 OPENCV 2.4.4

> ID：15204799
> 
> 赞同：0
> 
> 时间：2013-03-04T15:15:34.970
> 
> 标签：linux, opencv, command, centos, executable

我无法在 Cent OS 6.3 中安装 OpenCV 2.4.4

我去了这里 [http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.4/](http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.4/)

然后做了：

wget 到安装了 Cent OS 6.3 的服务器中任何位置的直接链接。

之后我做了 tar xvz CentOS-2.4.4.tar.gz2 然后我做了 cd OpenCV-2.4.4 然后我做了 cmake ., make, make install

都以root身份登录。

我从cmake看到的错误是找不到pythonlibs，但是安装了python 2.7.7，并且似乎安装了python 2.6.6也与Cent OS 6.3捆绑在一起，因为它从cmake显示python的解析器是，但它抱怨它可以'找不到pythonlibs。

除此之外，我在 cmake 之后没有看到任何其他错误。所以我继续做了，等了然后做了安装

现在我进入 OpenCV 的示例目录。cd OpenCV-2.4.4 cd samples cd c 并将以下命令放入 ssh ./myfile.c

除其他外，它调用了opencv附带的文件，似乎很难找到找不到的文件，或者无法从损坏/错误的安装中找到的命令，上述过程中的错误配置/谷歌搜索时间找到答案等：

```
 ./facedetect.c: line 5: CvHaarClassifierCascade: command not found
 ./facedetect.c: line 6: CvMemStorage: command not found
 ./facedetect.c: line 8: syntax error near unexpected token `('
 ./facedetect.c: line 8: `void detectfaces(IplImage *frame)' 
```

未找到 CvHaarClassifierCascade

CvMemStorage 没有发现什么问题，我的 OpenCV 无法在 Cent OS 6.3 上运行，我无法安装它。

此外，我对这个安装非常盲目，因为我找不到在 Cent OS 中安装 OpenCV 的单一教程，但有很多适用于 Ubuntu 的教程，否则我不会发布到堆栈中。

这是来自 cmake 的实际错误，输出类似：

```
 could not find png
 could not find
 tiff
 could not find
 jpeg
 could not find
 jasper
 couldn ot find pythonlibs
 missing: PYTHON_LIBRARIES PYTHON_INCLUDE_PATH
 no module named numpy.distutils 
```

抱歉，我发现问题可能“过于本地化” - 只需将其关闭即可。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T22:22:00.387

当有现成的 linux/centos rpm 可用于 opencv 时，为什么还要挣扎？（有一些陷阱，但在大多数情况下会很好）

# git - 更好地控制 git 日志格式

> ID：15204803
> 
> 赞同：4
> 
> 时间：2013-03-04T15:15:51.367
> 
> 标签：git

我有一个像这样的 git log 别名

```
log --graph --pretty=format:'%C(yellow)%h%C(cyan)%d%Creset %ci %an - %s'' 
```

生产

```
* 123456 2013-03-01 09:45:11 +0100 Name Surname - commit message 1
* 123457 2013-03-01 09:45:11 +0100 Name LongerSurname - commit message 2
* 123458 2013-03-01 09:45:11 +0100 Name Sho - commit message 3 
```

我想获得不同的格式，即

```
* 123456 2013-03-01 09:45:11 Name Surname - commit message 1
* 123457 2013-03-01 09:45:11 Name LongerS - commit message 2
* 123458 2013-03-01 09:45:11 Name Sho     - commit message 3 
```

请注意 iso8601 缺少 GMT+1 规范，以及如何缩短名称和填充短名称以保持日志消息对齐。

可以用普通的 git log 做到这一点吗？如果没有，实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:34:57.613

您可以使用 ANSI 转义码来移动光标。您还必须调整寻呼机设置。

```
export LESS+=' -r'  # Make sure your pager will accept ANSI escape codes
git log --graph \
  --pretty=format:'%C(yellow)%h%C(cyan)%d%Creset %ci %x1b[s%an%x1b[u%x1b[3C - %s' 
```

使用的转义码如下：

1.  %x1b[s - 保存当前光标位置
2.  %x1b[u - 恢复光标位置，即将光标移动到使用 %x1b[s 时的位置
3.  %x1b[3C - 将光标向前移动 3 个位置（您可以更改数字以匹配您要显示的字符数。

使用这些转义字符重新定位光标后，以下文本将覆盖作者姓名的尾随部分，从而产生您想要的效果。

至于日期，请查看评论中的链接：[如何更改 git log 日期格式](https://stackoverflow.com/q/7853332/11343)

# ms-access - 错误处理用户输入

> ID：15204806
> 
> 赞同：2
> 
> 时间：2013-03-04T15:16:02.570
> 
> 标签：ms-access

您好，我正在使用要求用户输入数字的访问表单。我正在尝试处理错误，其中包括：1\. 如果输入的值 = null， 2\. 如果输入的值不是整数。我已经尝试使用下面的代码，但仍然收到“类型不匹配错误”

```
 Dim refNum As Integer

 refNum = InputBox("Please enter the Reference Number")

 If IsNumeric(refNum) Then

 MsgBox ("ok")

 ElseIf refNum = Null Then

 MsgBox (" Field is empty , enter a number")

 Else

 MsgBox (" Please enter a number")

End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:50:04.863

有了这两条线......

```
Dim refNum As Integer
refNum = InputBox("Please enter the Reference Number") 
```

如果用户在 中键入以下任何内容`InputBox`，代码将引发类型不匹配错误。

*   字母，例如“abc”
*   大于 32767 的数字
*   没有

这样做的原因是因为它试图将`InputBox`值存储到一个变量，`refNum`，该变量被声明为`Integer`。然而，用户可以输入一个浮点数，并且赋值`refNum`将丢弃小数位。例如，如果用户输入 1.2，则 的值为`refNum`1。

An`InputBox`提供对用户输入的有限直接控制。由于您是从表单中执行此操作的，因此请考虑使用未绑定的文本框 ,`txtRefNum`来从用户那里收集值。检查值 在文本框的更新前事件中，显示不可接受的值和`Cancel`更新的消息。

在评论中，您表示您希望*“错误处理程序在分配给 refNum 时捕获不匹配错误，通知用户并再次抛出 InputBox。”* 在这种情况下，此代码会执行您想要的操作。

```
 Dim refNum As Integer
    Dim strMsg As String

On Error GoTo ErrorHandler

    refNum = InputBox("Please enter the Reference Number")
    MsgBox "ok"

ExitHere:
    Exit Sub

ErrorHandler:
    Select Case Err.Number
    Case 13 ' type mismatch
        MsgBox "Reference NUMBER!"
        Resume ' present InputBox again
    Case Else
        strMsg = "Error " & Err.Number & " (" & Err.Description & ")"
        MsgBox strMsg
        GoTo ExitHere
    End Select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:45:43.740

您的 refNum 变量必须是变体或字符串。当您将 InputBox 作为整数分配给 refNum 时，您的 InputBox 只需要整数值，因此在进入 if 语句之前会中断。

如果您使用字符串，您还需要更改 elseif。

```
ElseIf refNum = Null Or refNum = "" Then 
```

# android - 如何在不中断的情况下同时运行套接字和 ui 更新

> ID：15204808
> 
> 赞同：0
> 
> 时间：2013-03-04T15:16:03.353
> 
> 标签：android

我必须通过套接字接收图像并将其显示在 ImageView 中。但是在 ui 更新套接字断开连接后。对于 ui 更新我使用 Handler，我也尝试了 Asynctask。在线程中运行的套接字。如何在同时更新 ui 时保持连接到套接字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:20:48.480

图像更新应通过[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)完成：

```
 runOnUiThread(new Runnable() {
       public void run() {
            if (isrunning) {
                     _tts.speak(num,TextToSpeech.QUEUE_FLUSH, null);
            }
       }
   }); 
```

如果您发布一些代码，我可以更新答案。

# jpa-2.0 - 单例中的 PersistenceContextType.EXTENDED

> ID：15204809
> 
> 赞同：4
> 
> 时间：2013-03-04T15:16:07.780
> 
> 标签：jpa-2.0, jboss7.x, java-ee-6, ejb-3.1, entitymanager

我们在一个主要由 Jboss Forge 生成的应用程序中使用 Jboss 7.1.1，但是我们为所有与域相关的代码添加了一个存储库层。

我试图创建一个启动 bean 来初始化数据库状态。我想为此使用我现有的存储库。

我的存储库都有一个扩展的 PersistenceContext 注入其中。我从我的视图 bean 中使用这些 @ConversationScoped @Stateful bean，通过使用扩展上下文，我的实体在对话期间保持管理。

首先我尝试了这个：

```
@Startup
@Singleton
public class ConfigBean {

    @Inject
    private StatusRepository statusRepository;

    @Inject
    private ZipCode zipCodeRepository;

    @PostConstruct
    public void createData() {
        statusRepository.add(new Status("NEW"));
        zipCodeRepository.add(new ZipCode("82738"));
    }

}

Example repository:
@Stateful
public class ZipCodeRepository {

    @PersistenceContext(PersistenceContextType.EXTENDED)
    private EntityManger em;

    public void add(ZipCode zipCode) {
        em.persist(zipCode);
    }

    ....
} 
```

这最终会在应用程序启动时抛出 javax.ejb.EJBTransactionRolledbackException，并显示以下消息：

> JBAS011437：在 SFSB 调用调用堆栈中找到扩展的持久性上下文，但无法使用，因为事务已经有一个与之关联的事务上下文。这可以通过更改应用程序代码来避免，或者消除扩展的持久性上下文或事务上下文。请参阅 JPA 规范 2.0 第 7.6.3.1 节。

我很难找到一个很好的解释，实际上认为由于 EJB 及其注入是由代理处理的，所有 PersistenceContext 注入和传播都将自动处理。我想我错了。

然而，在这个想法的过程中，我尝试了以下方法：

```
@Startup
@Singleton
public class ConfigBean {

    @Inject
    private SetupBean setupBean;

    @PostConstruct
    public void createData() {
        setupBean.createData();
    }

    @Stateful
    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public static class SetupBean {

        @Inject
        private StatusRepository statusRepository;

        @Inject
        private ZipCode zipCodeRepository;

        public void createData() {
            statusRepository.add(new Status("NEW"));
            zipCodeRepository.add(new ZipCode("82738"));
        }
    }
} 
```

这可以解决问题。我所做的只是将代码包装在一个有状态的 SessionBean 中，它是我的 Singleton bean 的静态内部类。

有人理解这种行为吗？因为虽然现在一切正常，但我仍然有点疏远它为什么会这样工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:26:03.243

> *   容器管理的扩展持久性上下文只能在有状态会话 bean 的范围内启动。它从创建声明对 PersistenceContextType.EXTENDED 类型的实体管理器的依赖关系的有状态会话 bean 开始存在，并且被称为绑定到有状态会话 bean。

从发布的代码来看，它`ZipCodeRepository`本身似乎不是有状态的 bean，但您是从一个这样的 bean 调用它的。

在这种情况下，您是`PersistenceContextType.TRANSACTION`从& 通过拥有`ConfigBean` & 传播的，它试图加入交易，因此是例外。`ZipCodeRepository``PersistenceContextType.EXTENDED`

> *   调用使用 PersistenceContextType.EXTENDED 定义的实体管理器将导致使用绑定到该组件的现有扩展持久性上下文。
>     
>     
> *   当有状态会话bean的业务方法被调用时，如果有状态会话bean使用容器管理的事务划分，并且实体管理器尚未与当前的JTA事务关联，则容器将实体管理器与当前的JTA事务关联并调用EntityManager.joinTransaction。如果已经存在与 JTA 事务相关联的不同持久性上下文，则容器将抛出 EJBException。

而在后一种情况下，您`SetupBean`将为每个`TransactionAttributeType.REQUIRES_NEW`扩展类型的调用创建一个新事务，因为它是一个有状态的 bean。

因此，`SetupBean`为每次调用和以后的调用添加为有状态会话 bean 启动新事务`ZipCodeRepository`不会导致异常。`ZipCodeRepository`将加入由 发起的同一事务`SetupBean`。

# c# - 浏览器关闭时调用代码隐藏方法

> ID：15204810
> 
> 赞同：-1
> 
> 时间：2013-03-04T15:16:07.947
> 
> 标签：c#, javascript, asp.net, .net, events

我需要找到一种方法来拦截浏览器关闭并调用一个方法来更新一条记录，其中包含有关数据库中登录用户的一些信息。当用户注销或关闭浏览器时更新此记录非常重要。显然，当用户单击“注销”时，我会在服务器端事件中处理更新，但是如果用户只是退出浏览器呢？

有人建议使用该`window.onbeforeunload`事件并对某些 WS 或 WebMethod 进行异步调用来执行代码，但这根本无法说服我：问题`onbeforeunload`在于它显示了确认提示。我需要避免此消息并简单地调用该方法。

所以我想知道是否有不使用 ajax 或 javascript 的“服务器端”解决方案。例如...一种在会话放弃或会话清除时触发某些事件的方法，或其他解决此问题的方法，只是在代码隐藏上工作...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:19:15.817

你不可能有一个服务器端的解决方案来知道客户端浏览器中发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:19:40.777

我不相信有任何方法可以只在服务器端做你需要的事情。客户端是唯一的方法。服务器无法知道浏览器窗口何时关闭，这是 HTTP 协议的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:20:59.787

是的，您可以在 Global.AsaX 中放置一个事件，该事件将在会话结束时触发。现在，如果您需要来自客户端的数据来更新数据库等，您将需要一种获取数据的方法，但如果不需要，那么`Session_End`就可以了。

注意：会话结束与浏览器关闭略有不同，因此这将取决于您希望事件触发执行的操作。

[如何处理 global.asax 中的会话结束？](https://stackoverflow.com/questions/621744/how-to-handle-session-end-in-global-asax)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:21:10.693

> 我想找到一个不使用 ajax 或 javascript 的“服务器端”解决方案。

我怀疑这个要求是不可能的。

也许您可以执行以下操作：

1.  在页面上有一个隐藏的 IFRAME
2.  在此 IFRAME 上设置 Refresh 标头（或使用`META`元素）以每隔几秒联系一次服务器
3.  如果您在一段时间内没有收到客户端的消息，则假设浏览器已关闭。

但是，我想这个解决方案不会很好地扩展。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T08:31:43.973

你有没有考虑过类似信号器的东西？我用它来检测某人何时打开了记录。

```
public class ChatHub : Hub
{
     public override Task OnDisconnected()
     {
         Broadcaster.Disconnected(Context.ConnectionId);
         return base.OnDisconnected();
     }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T08:45:45.720

目前，我从根本上改变了解决问题的方法。为了更新待处理的行，我使用 Quartz.NET 框架实现了一个定时作业，该作业每晚运行。

# javascript - 我如何将鼠标悬停时的鼠标光标更改为“默认”，但在可排序时使用 jquery“移动”

> ID：15204812
> 
> 赞同：1
> 
> 时间：2013-03-04T15:16:08.973
> 
> 标签：javascript, jquery, html

它不起作用

```
$("#sortable").mouseover(function(){ 
    $(this).css("cursor","default"); 
});
$("#sortable").sortable({ cursor: "move" }); 
```

我需要将鼠标悬停在光标上：默认但在可排序光标中：移动

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T15:17:48.827

你不需要 JavaScript。您可以使用 CSS：

```
#sortable li { cursor:move; } 
```

这`sortable`是您制作的可排序元素，并且`li`是可排序的项目。

**[演示在这里。](http://jsfiddle.net/UAcC7/343/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-31T09:47:04.167

根据文档，这是官方支持的方式：

$("#sortable").sortable({ cursor: "move" });

# javascript - 旋转一个div如何设置围绕哪个点旋转？

> ID：15204815
> 
> 赞同：5
> 
> 时间：2013-03-04T15:16:23.693
> 
> 标签：javascript, jquery, css

我的 javascript 是：

```
$(function() {
    var $elie = $(".circle");
    rotate(0);
    function rotate(degree) {        
        $elie.css({ WebkitTransform: 'rotate(' + degree + 'deg)'});  
        $elie.css({ '-moz-transform': 'rotate(' + degree + 'deg)'});                      
        timer = setTimeout(function() {
            rotate(++degree);
        },5);
    }
}); 
```

如何围绕另一个中心点旋转 div？

这是演示：

```
$(function() {
    var $elie = $(".circle");
    rotate(0);
    function rotate(degree) {        
        $elie.css({ WebkitTransform: 'rotate(' + degree + 'deg)'});  
        $elie.css({ '-moz-transform': 'rotate(' + degree + 'deg)'});                      
        timer = setTimeout(function() {
            rotate(++degree);
        },5);
    }
});
```

```
.circle {
  width: 200px;
  height: 200px;
  background: green;
  border-radius: 50%;
  border: 4px dashed black;

  margin: calc(50vh - 100px) auto 0 auto;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="circle">

</div>
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T15:18:36.800

你会用`transform-origin`它：

```
$elie.css("-webkit-transform-origin", "50% 100%" ); 
```

或者

```
transform-origin: 100% 40%;
-ms-transform-origin: 100% 40%; /* IE 9 */
-webkit-transform-origin: 100% 40%; /* Safari and Chrome */
-moz-transform-origin: 100% 40%; /* Firefox */
-o-transform-origin: 100% 40%; /* Opera */ 
```

[**小提琴**](http://jsfiddle.net/adeneo/LMyPg/)

* * *

**编辑：**

要围绕`.circle`元素的中心旋转，首先需要一个高度，否则没有中心。然后你可以使用百分比，或者更方便的`center`属性，如下所示：

```
transform-origin:center center; 
```

[**示范**](http://jsfiddle.net/adeneo/LMyPg/2/)

# ios - 打开 GL ES 着色器 - 获取属性

> ID：15204817
> 
> 赞同：0
> 
> 时间：2013-03-04T15:16:32.213
> 
> 标签：ios, objective-c, xcode, opengl-es

我正在使用以下代码尝试从我的着色器中检索属性。

这段代码正在检索制服而不是属性。

```
/*********** Get attribute locations. ***************/
// Dictionary to store each active attribute
NSMutableDictionary *m_attributes = [[NSMutableDictionary alloc] init];
int m_nAttributes = -1;
glGetProgramiv( _program, GL_ACTIVE_ATTRIBUTES, &m_nAttributes );

for(GLuint i = 0; i < m_nAttributes; i++)  {
    int name_len=-1, num=-1;
    GLenum type = GL_ZERO;
    char attributesName[100];

    glGetActiveUniform( _program, i, sizeof(attributesName)-1, &name_len, &num, &type, attributesName );

    attributesName[name_len] = 0;

    GLuint attributes = glGetUniformLocation( _program, attributesName );

    [m_attributes setObject:[NSNumber numberWithUnsignedInt:attributes]
                     forKey:[NSString stringWithUTF8String:attributesName]];        
} 
```

这是我的着色器：

```
attribute vec3 VertexPosition;
attribute vec3 VertexNormal;
attribute vec2 VertexTexCoord0;

uniform mat4 ModelViewMatrix;
uniform mat4 ModelViewProjMatrix;

varying vec3 Normal;
varying vec2 TexCoord0;

void main(void)
 {
    Normal = VertexNormal;
        TexCoord0 = VertexTexCoord0;

    gl_Position = ModelViewProjMatrix * vec4(VertexPosition, 1.0);
 } 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:21:40.250

您应该使用[glGetActiveAttrib](http://www.opengl.org/wiki/GLAPI/glGetActiveAttrib)而不是`glGetActiveUniform`和[glGetAttribLocation](http://www.opengl.org/wiki/GLAPI/glGetAttribLocation)来获取属性索引而不是`glGetUniformLocation`.

还获取属性名称的最大长度以分配所需的缓冲区，`glGetActiveAttrib`而不是硬编码`char attributesName[100];`

```
GLint maxNameLength;
glGetProgramiv(program_handle, GL_ACTIVE_ATTRIBUTE_MAX_LENGTH, &maxNameLength); 
```

# java - Netty 上的单例引导程序和 pipelineFactory 作为 Tcp 客户端

> ID：15204818
> 
> 赞同：0
> 
> 时间：2013-03-04T15:16:33.027
> 
> 标签：java, spring, netty

我正在使用 Netty 通过 TCP 实现协议的服务器和客户端。在服务器端，我为它侦听的每个端口创建了一个 bootStrap 和 pipelineFactory 类的实例，它运行良好且快速。

但是在客户端，我对如何构建它没有一个清晰的想法。我需要打开数千个连接到数千个不同的目的地。我正在 Spring Framework 上开发项目，因此我可以轻松创建单例 bean 并将它们作为属性注入。我正在评估 3 个选项：

*   使用 ClientBootstrap 和 PipelineFactory 的单例实例。每个连接都使用这样的代码来获取通道：

    ```
    public Channel connect(final InetSocketAddress serverAddress, final ChannelPipelineFactory pipelineFactory, int timeout, TimeUnit unit) throws InterruptedException {
    ChannelFuture future;
    synchronized (bootstrap){
        bootstrap.setPipelineFactory(pipelineFactory);
        future = bootstrap.connect(serverAddress);
        future.addListener(new ChannelFutureListener() {
            @Override
            public void operationComplete(ChannelFuture future) throws Exception {
                if (future.isSuccess()) {
                    //TODO set here some channelLocal properties I need to configure the session (eg: user, password etc...)
                }
                else{
                    throw new RuntimeException(future.getCause()
                            .getMessage());
                }
            }
        });
    }
    return future.getChannel(); 
    ```

    }

我的解决方案还必须能够配置管道以启用或禁用 SSL 或日志处理程序，也许使用此[Abe 解决方案来配置 getPipeline()](https://stackoverflow.com/a/14049417/2096052 "getpipeline() 的参数")

*   我的第二个选择是使用 ClientBootstrap 的单例实例，但在每个传出客户端连接上创建一个新的 PipelineFactory。这有助于我配置我拥有的管道，因为我可以在 pipelineFactory 实例上设置属性。

*   第三个选项是在每个传出连接上创建新的 bootStrap 对象和 pipelineFactory。这允许我在每个连接上配置 tcp.delay 或 tcp.keepalive 等属性，并允许我删除连接方法上的同步块，这可以加快客户端连接。

我认为第一个是最快的并且使用最少的内存，但第三个是最可配置的并且可能易于开发。

你能给我一些关于这种方法的优缺点的建议吗？也许其中一个是错的？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:27:17.983

ClientBootstrap 实例很便宜。我会为每个连接创建一个新的连接，并为所有连接重用 NioSocketClientChannelFactory。或者，如果可以的话，您可能希望将一个引导程序用于 ssl 连接，而将一个引导程序用于非 ssl。这将使您免受一些内存开销。

# c# - 从网页表中获取数据

> ID：15204825
> 
> 赞同：0
> 
> 时间：2013-03-04T15:16:44.580
> 
> 标签：c#, visual-studio

我知道如何从网页中读取内容，但我坚持从页面中提取有效内容。我只想提取具有一些数据内容的表。我没有表ID。就像我想从下面的链接获取表格...使用 c sharp

[http://www.unece.org/cefact/locode/service/location.html](http://www.unece.org/cefact/locode/service/location.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:25:06.833

一般来说，要从 HTML 中解析出数据，您应该使用专门构建的 HTML 解析器。

两个不错的选择是：

*   [HTML Agility Pack](http://htmlagilitypack.codeplex.com/) - 使用 XPath / LINQ 查询已解析的 HTML
*   [CsQuery](https://github.com/jamietre/CsQuery) - 使用类似 jQuery 的选择器语法来查询已解析的 HTML

两者之间的选择应该归结为您（和您的团队）更熟悉哪种查询语法。

# c# - 从文本框 C# 获取行索引

> ID：15204830
> 
> 赞同：4
> 
> 时间：2013-03-04T15:17:08.617
> 
> 标签：c#, wpf, textbox

`TextBox`是一种以编程方式获取WPF 中元素内特定行开头的插入符号索引的方法吗？

例如，要选择第 20 行：

```
my_textbox.GetLineIndex(20); 
```

我希望获取此信息，以便我可以将其用作`my_textbox.SelectionStart`值。

有`my_textbox.ScrollToLine(20)`，但这并没有给我我不认为的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:25:54.763

我认为没有内置方法，但您可以尝试这样的扩展方法。

```
public static int GetLineIndex(this TextBox textbox, int line)
{
    var text = textbox.Text;
    var thisLine = 0;
    for (var i = 0; i < text.Length; i++)
    {
        if (thisLine == line)
            return i;

        if (text[i] == '\n')
            ++thisLine;
    }

    throw new ArgumentOutOfRangeException();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-17T08:59:07.593

您只需使用“GetCharacterIndexFromLineIndex”函数即可在特定行的开头获取插入符号索引。

您可以在以下位置查看有关此函数的更多信息：[GetCharacterIndexFromLineIndex 的 Microsoft 文档](https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.textbox.getcharacterindexfromlineindex?view=netcore-3.1)

这将根据需要在行首返回插入符号索引。

```
int startIndex = my_textbox.GetCharacterIndexFromLineIndex(lineNumber); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-09T14:04:10.193

您可以使用按钮单击多行文本框

```
 string findText = "sample";
        int charIndex = txtSource.Text.IndexOf(findText);

        MessageBox.Show(txtSource.GetLineFromCharIndex(charIndex).ToString());

        or
        MessageBox.Show(txtSource.GetLineFromCharIndex(txtSource.Text.IndexOf("sample")).ToString()); 
```

# php - PHP：mysql 数据库的条件

> ID：15204836
> 
> 赞同：0
> 
> 时间：2013-03-04T15:17:38.150
> 
> 标签：php

我是 PHP 编码的新手，我在以下代码中找不到错误...你能帮帮我吗？

> 致命错误：不能在 C:\wamp\www\membre\inscription_post.php 第 14 行调用堆栈 # 时间记忆函数位置 1 0.0006 682688 {main}( ) ..\inscription_post.php:0 中使用 PDOStatement 类型的对象作为数组

```
<?php
try
{
$bdd = new PDO('mysql:host=localhost;dbname=test', 'root', '');
}
catch(Exception $e)
{
die('Erreur : '.$e->getMessage());
}
$mem = $bdd -> query('SELECT * FROM membres');

while ($data = $mem -> fetch())
{
    if($mem['pseudo'] == $_POST['pseudo'])
    {
        echo "Pseudo existant";
    }
    else
    {
        $pass_hache = sha1($_POST['pass']);
        $req = $bdd->prepare('INSERT INTO membres (pseudo, pass, email, date_inscription) VALUES(?, ?, ?, CURDATE())');
        $req->execute(array($_POST['pseudo'], $pass_hache, $_POST['email']));
        header('Location: inscription.php');
        echo "Membre ajouté";
    }
}
$mem -> closeCursor();

?> 
```

`membres`表结构如下

```
id(=INT, primary key), 
pseudo (VARCHAR(255)), 
pass (VARCHAR(255)), 
date_inscription (date) 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:20:28.357

像这样的东西

```
<?php
$dsn = 'mysql:host=localhost;dbname=test;charset=utf8';
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$bdd = new PDO($dsn,'root','', $opt);

$stm = $bdd->prepare('SELECT 1 FROM membres WHERE pseudo=?');
$stm->execute(array($_POST['pseudo']));
$row = $stm->fetch();
if ($row) {
    echo "Pseudo existant";
} else {
    $pass_hache = sha1($_POST['pass']);
    $sql = 'INSERT INTO membres VALUES(NULL, ?, ?, ?, CURDATE())';
    $req = $bdd->prepare($sql);
    $req->execute(array($_POST['pseudo'], $pass_hache, $_POST['email']));
    header('Location: inscription.php');
} 
```

插入查询可能是错误的，取决于表架构

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:22:54.330

```
if($mem['pseudo'] == $_POST['pseudo'])
    ^^^--- should be $data instead 
```

但这是糟糕的代码。您基本上是在购买杂货店（您的`members`桌子）的全部内容，将其全部带回家，然后扔掉所有东西，除了您想要的一根巧克力棒。本质上，您应该在数据库中执行此操作

```
SELECT * FROM members WHERE pseudo=... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:21:05.223

`if($mem['pseudo'] == $_POST['pseudo'])`应该`if($data['pseudo'] == $_POST['pseudo'])`像您从 as 中读取每一行`$mem`一样`$data`。然而，这似乎不是做你想做的事情的最佳选择——为什么不`$_POST['pseudo']`直接在数据库中搜索而不是遍历它们呢？

# c++ - 解析命令行参数c ++时的奇怪行为

> ID：15204839
> 
> 赞同：2
> 
> 时间：2013-03-04T15:17:43.243
> 
> 标签：c++, command-line, pipe

这是一个我以前从未见过的问题，我认为它值得分享。我不确定它为什么会发生。

这就是我调用程序的方式：

> ./foo -switch1 arg1 -switch2 arg2 -switch3 arg3|arg4|arg5 -switch4 -arg6

每个开关用于指示不同类型的参数，我相应地解析它们。

问题出现在 switch3 上，它表示`arg3`, `arg4`,`arg5`都对应同一个 switch 并且使用`|`字符来描述。

出于某种原因，我可以完美地运行该程序，但是当我尝试使用 gdb 对其进行调试时，我的程序崩溃并出现`during startup, program exited with code 127`错误。

这就是我感兴趣的地方。它还说`bin/bash: arg4 not found`。它在第一个`|`字符之后接受参数，现在我假设它认为它是管道字符，并尝试调用 bash 脚本。

为什么会这样？？？编译器是否不采用整个命令行字符串并将空格分隔的标记视为不同的参数？为什么`|`被解释不同？我尝试添加`arg3|arg4|arg5`倒引号`""`，效果很好。我还尝试将它们分开`-`，例如。`arg3-arg4-arg5`，这也很好用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:19:37.730

这个`|`字符有一个特殊的含义`bash`：它创建了一个[管道](http://en.wikipedia.org/wiki/Pipeline_%28Unix%29)。

您的程序只看到以下参数：

```
./foo -switch1 arg1 -switch2 arg2 -switch3 arg3 
```

该`|arg4`语法被解释`bash`为意味着`arg4`应该运行（不存在的）命令，并且应该将 的标准输出`./foo`通过管道传输到`arg4`. 以相同的`|arg5 ...`方式解释。

要抑制这种行为，请像这样运行您的程序：

```
./foo -switch1 arg1 -switch2 arg2 -switch3 'arg3|arg4|arg5' -switch4 -arg6 
```

（注意引号）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T15:20:11.817

问题是这`|`是一个管道，所以你最终试图调用 shell 找不到的 arg4。您需要在其中使用管道引用内容，即`"arg3|arg4|arg5"`：

```
./foo -switch1 arg1 -switch2 arg2 -switch3 "arg3|arg4|arg5" -switch4 -arg6 
```

如果您好奇，可以查看[bash 陷阱](http://mywiki.wooledge.org/BashPitfalls)。如果您没有进行大量的 shell 编程，您可能不会经常看到这些问题，但是当您这样做时，您可能需要一段时间才能弄清楚发生了什么，因此从长远来看，了解更多关于 shell 编程的知识可能会有所帮助。我记得打了第 3 号，我花了一段时间才第一次找到一个好的解决方案。

# cuda - 如何在主机和设备代码中设置断点

> ID：15204846
> 
> 赞同：1
> 
> 时间：2013-03-04T15:17:59.497
> 
> 标签：cuda

我是 CUDA 的新手。我想在主机代码（C++）和设备内核代码（CUDA代码）中设置断点，但我只能成功地停止在主机**代码或设备**代码上进行调试（但**不能同时**在它们两者上进行调试。

我将 VS2010 (win7) 与 Cuda 4.2 和 Nsight 2.2 一起使用。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:52:47.600

使用 Nsight VSE 2.2 无法同时调试设备和主机代码

请参考[这个问题](https://stackoverflow.com/questions/13686119/cuda-parallel-nsight-debugging-host-and-device-simultaneously)中给出的答案。这个问题是那个问题的重复。

作为附加参考，请参阅此 nsight VSE[文档页面](http://http.developer.nvidia.com/NsightVisualStudio/2.2/Documentation/UserGuide/HTML/Content/Launch_CUDA_Debugger.htm)上的第一个注释。

# java - 使用 Javacc 处理 COBOL 语法中的注释和行/列号

> ID：15204851
> 
> 赞同：0
> 
> 时间：2013-03-04T15:18:13.663
> 
> 标签：java, parsing, javacc

我正在使用**JavaCC**开发 COBOL 解析器。COBOL 文件通常将第 1 到第 6 列作为行/列编号。如果行/列号不存在，它将有空格。

我需要知道如何处理 COBOL 文件中的注释和序列区域并仅解析主区域。

我尝试了很多表达，但没有一个有效。我创建了一个特殊标记，它将检查新行，然后检查出现的六次空格或除空格和回车之外的任何字符，之后第七个字符将`"*"`用于注释和`" "`普通行。

我正在使用此处提供的 Cobol.jj 文件[http://java.net/downloads/javacc/contrib/grammars/cobol.jj](http://java.net/downloads/javacc/contrib/grammars/cobol.jj)

谁能建议我应该使用什么语法？

我的语法文件示例：

```
 PARSER_END(CblParser)

////////////////////////////////////////////////////////////////////////////////
// Lexical structure
////////////////////////////////////////////////////////////////////////////////

SPECIAL_TOKEN :
{
  < EOL: "\n" > : LINE_START 
| < SPACECHAR: ( " " | "\t" | "\f" | ";" | "\r" )+ >
}

SPECIAL_TOKEN :
{
  < COMMENT: ( ~["\n","\r"," "] ~["\n","\r"," "] ~["\n","\r"," "] ~["\n","\r"," "] ~["\n","\r"," "] ~["\n","\r"," "] ) ( "*" | "|" ) (~["\n","\r"])* >
| < PREPROC_COMMENT: "*|" (~["\n","\r"])* >
| < SPACE_SEPARATOR : ( <SPACECHAR> | <EOL> )+ >
| < COMMA_SEPARATOR : "," <SPACE_SEPARATOR> >
}

<LINE_START> SKIP :
{
 < ((~[])(~[])(~[])(~[])(~[])(~[])) (" ") >
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:02:33.047

由于解析器从行首开始，您应该使用 DEFAULT 状态来表示行首。我会做类似以下的事情[未经测试的代码如下]。

```
// At the start of each line, the first 6 characters are ignored and the 7th is used
// to determine whether this is a code line or a comment line.
// (Continuation lines are handled elsewhere.)
// If there are fewer than 7 characters on the line, it is ignored.
// Note that there will be a TokenManagerError if a line has at least 7 characters and
// the 7th character is other than a "*", a "/", or a space.
<DEFAULT> SKIP :
{
   < (~[]){0,6} ("\n" | "\r" | "\r\n") > :DEFAULT
|
   < (~[]){6} (" ") > :CODE
|
   < (~[]){6} ("*"|"/")  :COMMENT
}

<COMMENT> SKIP :
{   // At the end of a comment line, return to the DEFAULT state.
    < "\n" | "\r" | "\r\n" > : DEFAULT
|   // All non-end-of-line characters on a comment line are ignored.
    < ~["\n","\r"] > : COMMENT
}
<CODE> SKIP :
{   // At the end of a code line, return to the DEFAULT state.
    < "\n" | "\r" | "\r\n" > : DEFAULT
|   // White space is skipped, as are semicolons.
    < ( " " | "\t" | "\f" | ";" )+ >
}
<CODE> TOKEN :
{  
    < ACCEPT: "accept" >
|  
    ... // all rules for tokens should be in the CODE state.
} 
```

# android - 如何协助用户获取 Google Play 服务

> ID：15204856
> 
> 赞同：1
> 
> 时间：2013-03-04T15:18:26.393
> 
> 标签：android, google-maps, google-maps-android-api-2, google-play-services

我有一个使用 Google Maps Android API v2 的应用程序，因此使用了 Google Play 服务。

我遇到的问题是：我该如何帮助那些没有安装 Google Play 服务的用户？

我正在对服务进行常规检查：

```
int result = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

            switch (result) {
            case ConnectionResult.SUCCESS:
                startActivity(new Intent(this, Map.class));                 
                break; 
```

如果结果不好，我会向用户显示一个带有选项的对话框：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setMessage("Error mesage").setTitle("Error message title");

                builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {

                        GooglePlayServicesUtil.getErrorDialog(result, MainMenu.this, 32).show();
                        dialog.dismiss();
                    }
                }); 
```

当用户单击“是”并收到 Google Play 服务提示时，用户单击它并在大多数情况下被转发到 Google Play 商店。但是这里有来自 Google Play 的另一条错误消息，说“单元（电话）与此版本不兼容”，我认为这很奇怪，因为我使用的是 HTC Sensation Z710e，我最近更新到 4.0.3 的 android .

在我的另一部手机 HTC Wildfire S A510e 与 Android 2.3.5 上，当用户从`GooglePlayServicesUtil.getErrorDialog`.

有什么想法可以帮助用户获得 Google Play 服务吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:13:24.403

你可以尝试两件事：

1.调试并找出isGooglePlayServicesAvailable方法的**结果值。**如果失败，它应该是以下值之一：

```
SERVICE_MISSING, 
SERVICE_VERSION_UPDATE_REQUIRED, 
SERVICE_DISABLED, 
SERVICE_INVALID 
```

所以您知道为什么[Google Play 服务 APK](http://developer.android.com/google/play-services/setup.html)不可用。

2.注意手机与此版本不兼容 - 当android清单的uses-feature标签中未提及适当的功能时，有时会向用户显示此消息。

从清单中的[功能参考](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#features-reference)列表中选择正确的功能，并适当记下 uses-sdk 和权限标签。

# jquery-mobile - jQuery Mobile 和 Knockout.js 模板，未应用样式

> ID：15204867
> 
> 赞同：5
> 
> 时间：2013-03-04T15:18:55.823
> 
> 标签：jquery-mobile, knockout.js

好的，所以这开始让我发疯了。我已经搜索了几个小时，但每个解决方案都不适合我。所以，是的，这个问题可能是多余的，但我一辈子都无法找到可行的解决方案。

我有一堆复选框由通过 knockout.js 进行数据绑定的 jquery 模板生成。但是，它没有样式。Afaik，这是关于 jquery mobile 在淘汰赛渲染模板之前进行样式设置的事情，所以它最终没有样式化。我尝试了很多方法都无济于事，所以我希望这里有人能看到我做错了什么。

（我正在使用 jquery mobile 1.2.0、jquery 1.8.2 和淘汰赛 2.2.1）

这是脚本：

```
<script type="text/javascript">    

jQuery.support.cors = true;

var dataFromServer = "";    
// create ViewModel with Geography, name, email, frequency and jobtype
var ViewModel = {
  email: ko.observable(""),
  geographyList: ["Hovedstaden","Sjælland","Fyn + øer","Nordjylland","Midtjylland","Sønderjylland" ],
  selectedGeographies: ko.observableArray(dataFromServer.split(",")),
  frequencySelection: ko.observable("frequency"),
  jobTypes: ["Kontor (administration, sekretær og reception)","Jura","HR, Ledelse, strategi og udvikling","Marketing, kommunikation og PR","Handel og service (butik, service, værtinde og piccoline)","IT","Grafik og design","Lager, chauffør, bud mv.","Økonomi, regnskab og finans","Kundeservice, telefoninterview, salg og telemarketing","Sprog","Øvrige jobtyper"],
  selectedJobTypes: ko.observableArray(dataFromServer.split(",")),
  workTimes: ["Fulltid","Deltid"],
  selectedWorkTimes: ko.observableArray(dataFromServer.split(","))
};

// function for returning checkbox selection as comma separated list
ViewModel.selectedJobTypesDelimited = ko.dependentObservable(function () {
    return this.selectedJobTypes().join(",");
}, ViewModel);

var API_URL = "/webapi/api/Subscriptions/";

// function used for parsing json message before sent  
function omitKeys(obj, keys) {
  var dup = {};
  var key;
  for (key in obj) {
    if (obj.hasOwnProperty(key)) {
      if (keys.indexOf(key) === -1) {
      dup[key] = obj[key];
      }
    }
  }
  return dup;
}

//Function called for inserting new subscription record
function subscribe() {
  if($("#jobmailForm").valid()=== true){
    //window.alert("add subscriptiooncalled");
    var mySubscription = ko.toJS(ViewModel);
    //var json = JSON.stringify(mySubscription);
    var jsonSmall = JSON.stringify(omitKeys(mySubscription, ['geographyList','jobTypes','selectedJobTypesDelimited','workTimes']));
    //window.alert(jsonSmall);
    $.ajax({
        url: API_URL,
        cache: false,
        type: 'POST',
        contentType: 'application/json',
        data: jsonSmall,
        success: function (data) {
          window.alert("success");

        },
        error: function (error) {
          window.alert("ERROR STATUS: " + error.status + "  STATUS TEXT: " + error.statusText);

        }
    });
  }
}

function initializeViewModel() {
  // Get the post from the API       
  var self = this; //Declare observable which will be bind with UI
  // Activates knockout.js
  ko.applyBindings(ViewModel);
}

// Handle the DOM Ready (Finished Rendering the DOM)
$("#jobmail").live("pageinit", function() {
  initializeViewModel();
  $('#jobmailDiv').trigger('updatelayout');
});

</script>
  <script id="geographyTmpl" type="text/html">
    <input type="checkbox" data-role="none" data-bind="attr: { value: $data }, attr: { id: $data }, checked: $root.selectedGeographies" />
    <label data-bind="attr: { for: $data }"><span data-bind="text: $data"></span></label>
  </script>
  <script id="jobTypeTmpl" type="text/html">
    <label><input type="checkbox" data-role="none" data-bind="attr: { value: $data }, checked: $root.selectedJobTypes" /><span data-bind="text: $data"></span></label>
  </script> 
```

请注意，“jobmail”是围绕“page”的 div 元素，此处未显示。这是标记：

```
<div data-role="content">
<umbraco:Item field="bodyText" runat="server"></umbraco:Item>
<form id="jobmailForm" runat="server" data-ajax="false">
  <div id="jobmailDiv">
  <p>
    <label for="email">Email</label>
    <input type="text" name="email" id="email" class="required email" data-bind="'value': email" />
  </p>

  <fieldset data-role="controlgroup" data-mini="true" data-bind="template: { name: 'geographyTmpl', foreach: geographyList,  templateOptions: { selections: selectedGeographies } }">
    <input type="checkbox" id="lol"  />
    <label for="lol">fkfkufk</label>
  </fieldset>
  <fieldset data-role="controlgroup" data-mini="true">
    <p data-bind="template: { name: 'jobTypeTmpl', foreach: jobTypes,  templateOptions: { selections: selectedJobTypes } }"></p>
  </fieldset>

  <fieldset data-role="controlgroup" data-mini="true">
    <input type="radio" id="frequency5" name="frequency" value="5" data-bind="checked: frequencySelection" /><label for="frequency5">Højst 5 gange om ugen</label>
    <input type="radio" id="frequency3" name="frequency" value="3" data-bind="checked: frequencySelection" /><label for="frequency3">Højst 3 gange om ugen</label>
    <input type="radio" id="frequency1" name="frequency" value="1" data-bind="checked: frequencySelection" /><label for="frequency1">Højst 1 gang om ugen</label>
  </fieldset>

  <p>
  <input type="button" value="Tilmeld" class="nice small radius action button" onClick="subscribe();">
  </p>

  <a href="{locallink:1733}" data-role="button" data-icon="back" data-inline="true" data-direction="reverse">Tilbage</a>
</div>
</form> 
```

调用重新样式的替代方法（也不起作用）：

```
$(document).on('pagebeforeshow', '#jobmail', function(){    
// Get the post from the API       
  var self = this; //Declare observable which will be bind with UI
  // Activates knockout.js
  ko.applyBindings(ViewModel);
});
// Handle the DOM Ready (Finished Rendering the DOM)
$("#jobmail").live("pageinit", function() {
  $('#jobmail').trigger('pagecreate');
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-23T22:38:08.970

使用自定义绑定 (Knockout) 来触发 jQuery Mobile 以*增强*由 Knockout 生成的动态创建的内容。

这是一个简单的自定义绑定：

```
ko.bindingHandlers.jqmEnhance = {
    update: function (element, valueAccessor) {
        // Get jQuery Mobile to enhance elements within this element
        $(element).trigger("create");
    }
}; 
```

像这样在您的 HTML 中使用自定义绑定，您`myValue`的视图模型中发生变化的部分在哪里，会触发要插入 DOM 的动态内容：

```
 <div data-bind="jqmEnhance: myValue">
      <span data-bind="text: someProperty"></span>
      <a href="#some-id" data-role="button">My Button</a>
      <input type="radio" id="my-id" name="my-name" value="1" data-bind="checked: someOtherProperty" /><label for="my-id">My Label</label>
   </div> 
```

在我自己的情况下，`myValue`是绑定中表达式的一部分`if`，它会触发将内容添加到 DOM。

```
 <!-- ko if: myValue -->
    <span data-bind="jqmEnhance: myValue">
        <!-- My content with data-bind attributes -->
    </span>
    <!-- /ko --> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T15:27:20.017

每个动态生成的**`jQuery Mobile`**内容都必须手动增强。

它可以通过几种方式完成，但最常见的一种可以通过**`jQuery Mobile`**函数来​​完成**`.trigger(`**。

**例子：**

*   仅增强页面内容

    ```
    $('#page-id').trigger('create'); 
    ```

*   增强整页（页眉+内容+页脚）：

    ```
    $('#page-id').trigger('pagecreate'); 
    ```

如果您想了解有关此主题的更多信息，请查看我的其他**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**，更透明的是我的个人博客。或者在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。

# ios - 即使父视图被禁用，子视图也不会显示在层次结构中

> ID：15204868
> 
> 赞同：1
> 
> 时间：2013-03-04T15:18:56.797
> 
> 标签：ios, ui-automation, ios-ui-automation

我有一个具有以下层次结构的 Nib 文件：

*   父视图
*   -图片
*   -标签
*   -标签
*   长按手势识别器

我禁用了父视图的可访问性并启用了其子视图的可访问性，但仍然在元素树中我只能看到父视图。父视图的类是 UIView，我没有使用任何自定义视图。

任何想法可能导致此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T06:40:33.153

父视图“已启用用户交互”必须设置为 YES 才能使子视图的可访问性起作用。

例如：UITableViewCell

# oop - 在 scala 上模拟可扩展的代数类型

> ID：15204874
> 
> 赞同：0
> 
> 时间：2013-03-04T15:19:21.650
> 
> 标签：oop, scala, algebraic-data-types

代数类型的传统方法推荐类似的方法：

```
sealed trait CompositeType
final case class LeftBranch(left : String) extends CompositeType
final case class RightBranch(right : Int) extends CompoisteType
object Trivial extends CompositeType 
```

问题是我无法`CompositeType`进一步扩展以获得更多选择（就像`Double`扩展`Float`提供更高的准确性并提供从 Double 向后转换为 Float 的系统）。

Scala 允许您自由定义自己的 apply 和 unapply 方法来构建和匹配代数类型的实例。

是否有任何项目试图为此类类型构建框架？

这可能对演员隐喻有用。目前，actor 接收与已知类型匹配的无类型消息（`Any`意味着没有类型限制）并为其他人提供安全默认值。它打破了 scala 的所有类型严格设计，并且使用更合适的类型限制演员会非常好。

* * *

**更新：**

阐明我的意图的示例：

```
sealed trait CompositeType1
final case class OtherBranch(x : Int, y : Int) extends CompositeType1
object Simple extends CompositeType1

trait ComplexChoice extends CompositionType with CompositionType1 
```

我想创建`CompositionType`的不是类型层次结构中的根，而是一个实体类。这可能会进一步扩展，与其他类混合。

让我们看看一些正常*的 OOP*用法：

```
trait ContractOne
trait ContractTwo

def method(arg : ContractOne with ContractTwo) 
```

在此示例中，函数`method`需要一个适合两种合约的参数。代数类型的合同是什么意思？一组可用的构造函数和匹配器。扩展代数类型的自然观点是什么？使用一些新值扩展构造函数集（就像 Double 使用更精确的浮点数扩展 Float 一样）

`CompositeType`显然错过了这个概念。如果我混合这两种代数类型，我会得到集合交集而不是联合。这是将代数类型表示为分层子类型集的选择方式的直接影响。它提供了更多的自由来跨越初始类型之外的选择，但它缺乏 OOP 特性，因为继承用于元素构造并且可能不用于扩展代数类型本身。

Haskell 只有一种方法可以为代数类型添加新选择：

```
data CompositeType = LeftBranch String | RightBranch Int | Trivial
data CompositeType1 = OtherBranch Int Int | Simple
data ComplexChoice = CompositeType | CompositeType1 
```

`ComplexChoice`在 haskell 的数据类型概念中无缝定义。但是处理它变得复杂，因为我需要重新路由所有方法作为组合。这就是为什么组合是 scala 中的一种解决方案，但很麻烦且是样板的解决方案（如果没有可以为组合模式生成代码的编译器插件）

我真正需要的是这样的：

```
ComplexChois condense CompositeType and CompositeType1 
```

但是对象层次结构可能只在一个方向上产生。

因此需要以其他方式定义代数类型。它有空间，因为原始特征的无限扩展并不是真正需要的，并且大多数此类特征都与sealed关键字一起使用。因此，可以使用其他一些比扩展功能更弱的机制来表示数据类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:48:01.823

正如您所注意到的，`object`s 是派生子类型的行尾。在这种情况下，您可以创建另一个级别的中间抽象类型，从中派生以下子类型（单例或其他）`Trivial`：

```
sealed trait Trivial extends CompositeType
object Trivia extends Trivial { ... }
class Triviality extends Trivia(...) { ... } \
... 
```

# javascript - 设置复选框的事件

> ID：15204883
> 
> 赞同：0
> 
> 时间：2013-03-04T15:19:57.117
> 
> 标签：javascript, jquery

我想为复选框设置事件以显示内容。

> If check="Twitter" -> 显示 twitter 内容 If check="Facebook" -> 显示 facebook 内容
> 
> 如果选中所有（twitter + facebook）-> 显示 twitter + facebook 的内容
> 
> 需要选择 twitter 或 facebook。

我处理复选框的事件，但不显示每个复选框的内容：http: [//jsfiddle.net/vinhnguyenle/hHnUV/](http://jsfiddle.net/vinhnguyenle/hHnUV/)

```
 var $twitter =  $('input[name=twitter]'),
            $facebook = $('input[name=facebook]');

    $twitter.click(function(e) {
        if (!!$facebook.prop('checked') == false) {
            e.preventDefault();
        }
    });

    $facebook.click(function(e) {
        if (!!$twitter.prop('checked') == false) {
            e.preventDefault();
        }
    });

    $twitter.trigger('click'); 
```

请帮我显示选中的每个复选框的内容。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:23:57.170

根据您的要求，如果选择 Facebook，则无法选择 twitter，我认为带有以下选项的单选按钮：“Twitter，Facebook，两者”似乎更有意义。

JS 变化：

```
$(document).ready(function() {   
    $("input:radio").click(function() {
        var test = $(this).val();

        $('#Facebook, #Twitter').hide();        
        $("#"+test).fadeIn();

        if(test == "Both")
        {
            $('#Facebook, #Twitter').fadeIn();
        }
    });     
}); 
```

HTML 更改：

```
<input type="radio" name="social" value="Twitter" checked /> Twitter
<input type="radio" name="social" value="Facebook" /> Facebook
<input type="radio" name="social" value="Both" /> Both
<div id="Facebook" style="display:none;">Facebook Content</div>
<div id="Twitter">Twitter Content</div> 
```

[JS Fiddle 在这里](http://jsfiddle.net/hHnUV/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:26:09.963

我建议：

```
$('div[id]').each(function(){
    if ($('input[name="' + this.id + '"]').is(':checked')){
        $(this).show();
    }
    else {
        $(this).hide();
    }
});

$('input').change(function (e) {
    $('#' + this.name)[this.checked == true ? 'show' : 'hide']();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hHnUV/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:35:24.423

这会起作用，我添加了一些 div 来显示 facebook/twitter 内容：

```
$(document).ready(function() {    
    $('div[id]').each(function(){
        if ($('input[name="' + this.id + '"]').is(':checked')){
            $(this).show();
         }
        else {
            $(this).hide();
        }

    });

    var $twitter =  $('input[name=twitter]'),
        $facebook = $('input[name=facebook]')

    $twitter.click(function(e) {
        $('#twitter').fadeToggle();
    });

    $facebook.click(function(e) {
        $('#facebook').fadeToggle();
    });

}); 
```

[这是 .js 小提琴](http://jsfiddle.net/hHnUV/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:38:37.293

您可以使用一个事件处理程序来监视这些输入的更改...

添加内容以向您展示行为...

代码[在这里](http://jsfiddle.net/bTcaQ/) `:)`

# android - 绘制画布以叠加

> ID：15204884
> 
> 赞同：2
> 
> 时间：2013-03-04T15:19:58.797
> 
> 标签：android, asynchronous, maps, overlay, task

`AsyncTask`我在in 中的 Canvas 上绘制 a `doInBackground`。绘图代码运行通过，一步步调试检查。该`onPostExecute()`方法也被调用，也被检查过。然而，什么都没有被绘制？我可以确认绘图代码是正确的，因为之前在 Overlay 子类的 onDraw() 方法中运行了相同的逻辑。这是来源：

```
import java.lang.ref.WeakReference;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.Point;
import android.os.AsyncTask;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.Projection;

public class AsyncOverlayTask extends AsyncTask<DataVO, Void, Canvas> {

    private final Paint     mPathPaint;
    private final Paint     mPointPaint;
    private Path            path;
    private final MapView   mMapView;   
    private final Canvas    mCanvas;

    public AsyncOverlayTask(final MapView mapView, final Paint pathPaint, final Paint pointPaint) {

        mMapView = new WeakReference<MapView>( mapView ).get();
        mPathPaint = pathPaint;
        mPointPaint = pointPaint;
        mCanvas = new Canvas();     
    }

    @Override
    protected Canvas doInBackground(final DataVO... params) {
        Thread.currentThread().setName( "AsyncOverlayTask" );   
        final Canvas canvas = new Canvas();
        final Bitmap bitmap = Bitmap.createBitmap( mMapView.getWidth(), mMapView.getHeight(), Bitmap.Config.ARGB_8888 );
        canvas.setBitmap( bitmap );
        canvas.drawColor( Color.TRANSPARENT );
        GeoPoint previousGeoPoint = null;
        GeoPoint geoPoint = null;
        final Path path = new Path();
        Projection projection;
        // at least 2 elements in aData
        if ( ( params != null ) && ( params.length > 0 ) ) {
            for ( final DataVO dataVo : params ) {
                if ( dataVo.getLatitude().replace( ".", "" ).length() > 8 ) {
                    geoPoint = new GeoPoint( Integer.valueOf( dataVo.getLatitude().replace( ".", "" ).substring( 0, 8 ) ), Integer.valueOf( dataVo
                            .getLongitude().replace( ".", "" ).substring( 0, 7 ) ) );
                } else {
                    geoPoint = new GeoPoint( Integer.valueOf( dataVo.getLatitude().replace( ".", "" ) ), Integer.valueOf( dataVo.getLongitude()
                            .replace( ".", "" ) ) );
                }
                // project point
                projection = mMapView.getProjection();
                Point projectedPoint = new Point();
                projectedPoint = projection.toPixels( geoPoint, projectedPoint );
                // draw point
                canvas.drawCircle( projectedPoint.x, projectedPoint.y, 7, mPointPaint );
                if ( previousGeoPoint != null ) {
                    final Point prevPoint = new Point();
                    projection.toPixels( previousGeoPoint, prevPoint );
                    // if((projectedPoint.x != prevPoint.x) &&
                    // (projectedPoint.y != projectedPoint.y)) {
                    path.moveTo( projectedPoint.x, projectedPoint.y );
                    path.lineTo( prevPoint.x, prevPoint.y );
                    canvas.drawPath( path, mPathPaint );
                    // }
                } else {
                    path.moveTo( projectedPoint.x, projectedPoint.y );
                }
                previousGeoPoint = geoPoint;
            }

        }
        return canvas;

    }

    @Override
    protected void onPostExecute(final Canvas canvas) {
        if ( ( mMapView != null ) && ( canvas != null ) ) {
            final DataOverlay dataOverlay = new DataOverlay();
            dataOverlay.draw( canvas, mMapView, false );
            if ( mMapView != null ) {
                mMapView.getOverlays().add( ( dataOverlay ) );
                mMapView.invalidate();
            }
        }
    }

    private class DataOverlay extends Overlay {

        @Override
        public void draw(final Canvas canvas, final MapView mapView, final boolean shadow) {
            super.draw( canvas, mapView, shadow );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:40:59.240

你用 a 绘制的所有东西`Canvas`实际上都被绘制到`Bitmap`你设置的那个 上`Canvas`。您使用的`Bitmap`仅在其他地方引用，在`doInBackground()`其他地方没有引用。您的叠加层需要做的是绘制位图：

```
@Override
protected Bitmap doInBackground(final DataVO... params) {
    return bitmap;
}

@Override
protected void onPostExecute(final Canvas canvas) {
    // ...
    final DataOverlay dataOverlay = new DataOverlay(bitmap);
    // ...
}

private class DataOverlay extends Overlay {
    private final Bitmap mBitmap;

    DataOverlay(Bitmap b) { mBitmap = b; }

    @Override
    public void draw(final Canvas canvas, final MapView mapView, final boolean shadow) {
        canvas.drawBitmap(b, 0.0f, 0.0f, null);
    }
} 
```

# php - 将 PHP 数组数据显示到带有单元格编号的表格单元格中

> ID：15204885
> 
> 赞同：0
> 
> 时间：2013-03-04T15:20:03.080
> 
> 标签：php, arrays, html-table

我有一个来自数据库的数组

```
Array
(
    [0] => stdClass Object
        (
            [cell] => 2
            [price] => 1543.65
        )

    [1] => stdClass Object
        (
            [cell] => 3
            [price] => 386.22
        )

) 
```

和一张桌子

```
<table>
    <tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>7</td>
    <td>8</td>
    <td>9</td>
    <td>10</td>
    <td>12</td>
    <td>12</td>
    </tr>
    <tr>
    <?php
     print_r($sales);
     if(!empty($sales)) {
        foreach($sales as $sale) {

         if($sale->cell == 1) {echo "<td>".$sale->price."</td>";} else { echo "<td>0</td>"; }
         if($sale->cell == 2) {echo "<td>".$sale->price."</td>";} else { echo "<td>0</td>"; }
         ...
         if($sale->cell == 12) {echo "<td>".$sale->price."</td>";} else { echo "<td>0</td>"; }

        }

    } else {
    for($i=1; $i<=12; $i++) {
        echo "<td>0</td>";
    }
    }
    ?>
    </tr>
    </table> 
```

我需要在与数组相同的单元格中显示价格。现在我的问题是数组大小不是 12。请帮助我如何在与中相同的单元格上显示它`array['cell']`？

我想将其显示为：

```
<tr>
    <td>0</td>
    <td>1543.65</td>
    <td>386.22</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    </tr> 
```

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:29:22.507

我不确定我是否完全理解，但应该这样做：

```
echo '<tr>';
foreach($data as $value) {
    $array[$value->cell] = $value->price;
}
for($i = 0; $i <= 12; $i++) {
    echo '<td>';
    if(isset($array[$i])
        echo $array[$i];
    else echo '0';
    echo '</td>';
}
echo '</tr>'; 
```

其中 $data 是您从数据库中获取的数组，$array 是相同的数据，但转换为关联数组。这也假设有 12 列，因此如果列的总数需要灵活，它会稍微复杂一些。

编辑：实际上，我只是注意到您的数组索引与“单元格”值不匹配。我修复了我的代码以反映这一点，但如果这是您的数据的样子，您可能应该重新评估您的数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:24:34.247

您可以像这样构建您的行：

```
echo "<tr>";
for ($i = 0; $i < 12; $i++){
    echo "<td>";
    if(isset($sale[$i]) && $sale[$i]->cell == $i) echo $sale[$i]->price;
    else echo 0;
    echo "</td>";
}
echo "</tr>"; 
```

但可能的问题是，如果数组中的项目不按顺序排列。你能做的最好的事情就是确保它们是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:34:20.860

这应该工作

```
<table>
    <tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>7</td>
    <td>8</td>
    <td>9</td>
    <td>10</td>
    <td>12</td>
    <td>12</td>
    </tr>
    <tr>
    <?php
    if(!empty($sales)) {
        //Create an array with 12 elements and initialize each with 0
        $salesArray = array_fill(1,12,0);

        foreach($sales as $sale) {
            //Override Cell Number Position in $salesArray so that if Cell number is present in $sales array, then it will have sale price, otherwise 0
            $salesArray[$sale->cell] = $sale->price;
        }

        //Sort it by key. Just in case 
        ksort($salesArray);

        foreach($salesArray as $salePrice)
        {
            echo "<td>".$salePrice."</td>";
        }
    } else {
    for($i=1; $i<=12; $i++) {
        echo "<td>0</td>";
    }
    }
    ?>
    </tr>
    </table> 
```

# javascript - 为 javascript 代码创建循环

> ID：15204890
> 
> 赞同：-14
> 
> 时间：2013-03-04T15:20:16.423
> 
> 标签：javascript, loops

我想为以下 js 代码创建一个循环。请帮我。

```
function fade90() { document.getElementById("myDiv").style.opacity="0.90"; setTimeout("fade80()", 100); }
function fade80() { document.getElementById("myDiv").style.opacity="0.80"; setTimeout("fade70()", 100); }
function fade70() { document.getElementById("myDiv").style.opacity="0.70"; setTimeout("fade60()", 100); }
function fade60() { document.getElementById("myDiv").style.opacity="0.60"; setTimeout("fade50()", 100); }
function fade50() { document.getElementById("myDiv").style.opacity="0.50"; setTimeout("fade40()", 100); }
function fade40() { document.getElementById("myDiv").style.opacity="0.40"; setTimeout("fade30()", 100); }
function fade30() { document.getElementById("myDiv").style.opacity="0.30"; setTimeout("fade20()", 100); }
function fade20() { document.getElementById("myDiv").style.opacity="0.20"; setTimeout("fade10()", 100); }
function fade10() { document.getElementById("myDiv").style.opacity="0.10"; setTimeout("hide()", 100); } 
```

我写这个。这个对吗？如果没有，请解决此问题。

```
function cls_msg(){
    for (var i=1;i<10;i++)
    {
    setTimeout(document.getElementById("myDiv").style.opacity=100-(i*10), 100);
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:34:21.190

在回答您的实际问题之前，我会为您提供一个更合适的解决方案来解决您的褪色问题，因为您尝试这样做过于复杂。

您应该只修改实际值并将其重新分配给样式，无需调用所有方法并重新查询 DOM。

```
function fadeIn( node, v ) {
    node.style.opacity = v || 1;

    if( v < 1 ) {
        setTimeout( fadeIn.bind( null, node, v + 0.1 ), 25 );
    }
 }

function fadeOut( node, v ) {
    node.style.opacity = v || 1;

    if( v > 0 ) {
        setTimeout( fadeOut.bind( null, node, v - 0.1 ), 25 );
    }
} 
```

这是完成任务的一种方法的一个非常基本的示例。你可以这样称呼它

```
fadeOut( document.getElementById("myDiv") ); 
```

如果不需要支持带有动画的旧版浏览器，让浏览器/ *css 转换*完成这项工作可能是一个更好的主意。那可能看起来像

```
function fadeIn( node ) {
    node.style.transition = 'all 400ms ease-in';
    node.style.opacity = 1;
}

function fadeOut( node ) {
    node.style.transition = 'all 400ms ease-in';
    node.style.opacity = 0;
} 
```

请注意，您可能不仅要设置*transition*，还要设置所有特定的浏览器供应商前缀，如*-ms-transition*、*-moz-transition*等，用于“不太旧”的浏览器。

* * *

为了最终回答这个问题，你应该使用一个*数组*来循环多个函数，这可能看起来像

```
[ fade90, fade80, fade70, fade60,
  fade50, fade40, fade30, fade20,
  fade10, hide ].forEach(function( method, i, arr ) {
      setTimeout(function() {
          if( typeof arr[ i+1 ] === 'function' ) {
              !i && method();
              setTimeout( arr[ i+1 ], 25 * i );
          }
      }, 25);
}); 
```

请注意，您还应该重新编写这些方法，这些方法不应该自己调用`setTimeout`，也不应该重新查询目标节点。我只是想给你一个我的方法的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:27:12.070

不知道你在问什么，但我可以建议一些更整洁的东西吗？

```
function fade(n, el) {
  el.style.opacity = n;
  n = n - 0.1;
  if (n.toFixed(1) > 0) {setTimeout(function() {fade(n, el);},100);}
  else {setTimeout(function() {hide(el);}, 100);}
}

function hide(el) {
  el.style.visibility='hidden';
} 
```

然后最初调用

```
fade(0.9, document.getElementById("myDiv")); 
```

例如：http: [//jsfiddle.net/XY4yM/](http://jsfiddle.net/XY4yM/)

# sql - 尝试创建一个返回所有记录的最早日期的查询

> ID：15204894
> 
> 赞同：0
> 
> 时间：2013-03-04T15:20:30.537
> 
> 标签：sql, sql-server

我有一个`SQL Server`数据库，我有两个`tables`,`Certificates`和`Categories`. 有一个一对多的关系，每个`Certificate`可以有很多`categories`。我正在尝试创建一个查询，该查询将显示数据库中的所有证书，但只返回每个类别的最旧 exp 日期的一条记录。我查了一篇几乎完全符合我要求的帖子

但是它正在搜索的记录数量有限。我已经阅读并找到了在其他类型的数据库中执行此操作的不同方法，但在 ms sql server 中没有有效的方法来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:25:16.663

为此，您要使用以下`row_number()`功能：

```
select c.*
from (select c.*,
             row_number() over (partition by category order by expdate desc) as seqnum
      from certificates c
     ) c
where seqnum = 1 
```

这适用于 SQL Server 2005 及更高版本。

在旧版本或 Access 中，您需要加入才能获得此功能：

```
select c.*
from certifications c join
     (select category, max(expdate) as maxexpdate
      from certifications 
      group by category
     ) csum
     on c.category = csum.category and
        c.expddate = csum.maxexpdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:26:22.950

在我知道的大多数数据库中，有一种有效的方法可以解决此类查询，称为`JOIN`. 连同 PK-FK 关系和索引，这对于您遇到的大多数目的来说已经足够有效了。试着学习这些，你会发现我在说什么。

对于这个具体的问题，你只需要对`JOIN`两个表和 `GROUP`category字段，`MIN`在exp date字段上使用聚合函数即可。如果您可以提供表结构，我们也可以编写查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:30:07.327

下面的查询将满足需要。

```
SELECT *
    FROM dbo.Certificates Cert INNER JOIN
    (SELECT CerificateId,MIN(ExpiryDate)
    FROM dbo.Categories
    GROUP BY CerificateId) AS LatestCategories
    ON Cert.CerificateId = LatestCategories.CerificateId 
```

# python - 如何在pyside中打开一个新窗口

> ID：15204896
> 
> 赞同：1
> 
> 时间：2013-03-04T15:20:36.590
> 
> 标签：python, qt4, pyqt4, pyside

我是 Python 和 pyside 的初学者。我有一个 .ui 文件，我想在单击主窗口中的按钮时将其作为第二个窗口打开。我使用了这段代码，但它可能因为“自我”而关闭了主窗口。请帮帮我。

```
class PhoneBook:

   def __init__(self):
        loader = QUiLoader();       
        file = QFile("PhoneBook.ui");   
        file.open(QFile.ReadOnly);  
        self.ui = loader.load(file);    
        file.close();           
        self.ui.pushButton.clicked.connect(self.add);

  def __del__ ( self ):
        self.ui = None;

  def add(self):
        loader1 = QUiLoader();      
        file1 = QFile("Add.ui");    
        file1.open(QFile.ReadOnly); 
        self.ui = loader1.load(file1);  
        file1.close();          
        self.ui.show();

  def show(self):
        self.ui.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:24:02.180

我也是菜鸟。关于如何制作对话，我认为您的观点是输入对话，您要在其中输入该电话簿的数据。我发现的最简单的方法是这样的：

```
txtLabel = "Put some value into dialog"
inputText, ok = QInputDialog.getText(self, "Dialog Name", txtLabel)
if ok:
    print ".........."
    print inputText 
```

...这是一些字符串输入的最简单对话框（QInputDialog）。如果你需要更苛刻的对话框（你迟早会的），你应该使用 QDialog 基类。在那种情况下，您到底想放入什么，它的外观以及有关它的行为的所有内容。在 PySide [DOCS](http://srinikom.github.com/pyside-docs/PySide/QtGui/QDialog.html?highlight=qdialog#PySide.QtGui.PySide.QtGui.QDialog.DialogCode)上，几乎所有内容都得到了很好的解释。

# python - 修改函数内的numpy数组？

> ID：15204900
> 
> 赞同：5
> 
> 时间：2013-03-04T15:20:47.253
> 
> 标签：python, arrays, numpy, pass-by-reference

我对下面的简单程序有疑问：

```
def my_function(my_array = np.zeros(0)):
    my_array = [1, 2, 3]

my_array = np.zeros(0)
my_function(my_array)
print my_array 
```

它打印一个空数组，就好像`my_array`通过复制而不是通过函数内部的引用传递一样。如何纠正？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T15:30:27.057

引用传递模型更像是指针的值传递。因此，在您的 my_function 中，您有一个指向原始 my_array 的指针的副本。如果您要使用该指针直接操作输入的数组，则会进行更改，但复制指针的重新分配不会影响原始数组。

举个例子：

```
def my_func(a):
    a[1] = 2.0

ar = np.zeros(4)
my_func(ar)
print ar 
```

上面的代码会改变 ar 的内部值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T15:24:51.800

您可以在这里使用切片分配，就像使用列表一样：

```
def func(my_array):
    my_array[:3] = [1,2,3] 
```

请注意，这仍然需要其中`my_array`至少有 3 个元素......示例用法：

```
>>> def func(my_array):
...     my_array[:3] = [1,2,3]
... 
>>> a = np.zeros(4)
>>> a
array([ 0.,  0.,  0.,  0.])
>>> func(a)
>>> a
array([ 1.,  2.,  3.,  0.]) 
```

您缺少的是 python 如何处理引用。当您输入时`my_function`，您将引用绑定到名称的原始 ndarray 对象`my_array`。但是，一旦您为该名称*分配*了新内容，您就会丢失原始引用并将其替换为对新对象（在本例中为列表）的引用。

请注意，具有可变对象的默认参数通常会[导致意外](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-04T15:26:07.690

`np.zeros(0)`给你一个空的numpy数组。您的函数中的引用现在指向一个新的 Python 列表，但您实际上并没有修改您的空 numpy 数组，所以这仍然是您要打印的内容。

建议阅读[此答案](https://stackoverflow.com/a/986145/553404)以清除一些概念。

# c# - 使用 fiddler 作为 https 反向代理 - 发生超时

> ID：15204905
> 
> 赞同：1
> 
> 时间：2013-03-04T15:21:06.537
> 
> 标签：c#, https, fiddler, reverse-proxy

我正在尝试使用 Fiddler.Core 创建一个反向代理，我们可以使用它通过 http(s) 重播第三方请求。

该库适用于http，对于https，我似乎缺少一步，因为重播响应似乎只是超时。

这是规格的代码：

```
[TestClass]
public class Verify_basic_proxy_functionality
{
    WebClient WC;
    Proxy SUT;

    [TestInitialize]
    public void Init()
    {
        SUT = new Proxy();
        SUT.InsertSession(Url:"http://proxy/ping",ResponseBody:"pong");
        var uri = SUT.Startup(9100,IsRecording: false);
        WC = new WebClient() { Proxy = new WebProxy(uri)};
    }

    [TestMethod]
    public void Ping_should_return_pong()
    {
        WC.DownloadString("http://proxy/ping").ShouldBe("pong");
    }

    [TestMethod]
    [ExpectedException(typeof(WebException))]
    public void Pang_should_return_error()
    {
        WC.DownloadString("http://proxy/pang");
    }

    [TestMethod]
    public void Http_reverse_proxy_should_work()
    {
        SUT.IsRecording = true;
        var http_url = "http://httpbin.org/ip";
        var initial_result = WC.DownloadString(http_url);
        initial_result.ShouldContain("origin");
        SUT.IsRecording = false;
        var result = WC.DownloadString(http_url);
        result.ShouldBe(initial_result);
    }

    // This one fails with a timeout... Probably need to close the connection or similar?
    [TestMethod]
    public void Https_reverse_proxy_should_work()
    {
        SUT.IsRecording = true;
        var https_url = "https://httpbin.org/ip"; 
        var initial_result = WC.DownloadString(https_url);
        initial_result.ShouldContain("origin");
        SUT.IsRecording = false;
        var result = WC.DownloadString(https_url);
        result.ShouldBe(initial_result);
    }
} 
```

可以在以下要点找到代理的代码：[https ://gist.github.com/ToJans/5082560](https://gist.github.com/ToJans/5082560)

我想我可能需要为 https（即编码）添加一个额外的步骤。AFAIK fiddler.core 在我拦截`OnValidateServerCertificate`并始终返回 true 时忽略证书错误。

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:57:27.503

好吧，我的一位同事指出了我思维中的一个缺陷。在为 SSL 重播时，您不应该记录/重播 CONNECT ！！！

MITM 代理现在可以使用.....

# csv - 使用 AWK 返回 CSV 数据中一系列点中的最小点

> ID：15204908
> 
> 赞同：1
> 
> 时间：2013-03-04T15:21:13.477
> 
> 标签：csv, awk, range, point, minimum

我想使用 Bash 中的 AWK 返回在 CSV x、y 数据的指定 x 值范围内观察到的最小 y 值。所以，具体来说，我可能有如下数据：

```
xyData="10, 100
20, 200
30, 300
40, 400
50, 500
60, 600
70, 700
80, 800
90, 900
100, 1000" 
```

我想问一个诸如以下的问题：在从 x 值 50 开始到 x 值 90 结束的点范围内观察到最小 y 值的点是什么？此示例的答案是“50, 500”，因为 500 是在从 x 值 50 开始并以 x 值 90 结束的点的包容范围内观察到的最小 y 值。

我对AWK很陌生。是否有一些巧妙的方法可以实现这一点？非常感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:30:10.863

```
awk -F, '$1>=50 && $1<=90{if(!i){i=$1;m=$2}else if(($2+0)<m){m=$2;i=$1}}END{print i","m}' file.csv 
```

输出：

```
50, 500 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:34:53.440

一种方法（**编辑：有错误的解决方案，请参阅*Scrutinizer 的*评论**）：

```
awk -F'[, ]+' '
  $1 >= 50 && $1 <= 90 { 
    if (y > $2 || y == 0) { 
      y = $2; x = $1 
    } 
  } 
  END { 
    printf "%s, %s\n", x, y 
  }
' infile 
```

它产生：

```
50, 500 
```

* * *

***根据Scrutinizer*的评论**更新**解决方案：**

 **```
awk -F'[, ]+' '
  $1 >= 50 && $1 <= 90 { 
    if (y > $2 || !y_set) { 
      y = $2 
      x = $1
      y_set = 1
    } 
  } 
  END {
    if ( x || y ) {
      printf "%s, %s", x, y 
    }
  }
' infile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:19:08.697

另一个尝试，假设 x 点按顺序列出：

```
awk '$1>e{exit} $1>=b && ($2<=m || !s){s=1; m=$2; n=$1} END{print n,m}' b=50 e=90 FS=, OFS=, file 
```**

# jquery - 通过jquery复制html元素哪种方式更好

> ID：15204912
> 
> 赞同：0
> 
> 时间：2013-03-04T15:21:23.177
> 
> 标签：jquery

我有这样的表格：

```
<form:form name="ExpenseDetails" method="Post"
    action="ExpenseDetailsForm.html">
    <table id="Parent1_Table">
        <tbody>
            <tr>
                <td>
                    <table id="Item1_Table1">
                        <tbody>
                            <tr>
                                <td>Item</td>
                                <td><input type="text" name="Item1" id="Item1" required /></td>
                            </tr>
                            <tr>
                                <td>Expense in Rs</td>
                                <td><input type="text" name="ItemValue1" id="ItemValue1"></td>
                            </tr>
                        </tbody>
                    </table>
                </td>
                <td>
                    <table id="Item1_Table2">
                        <tbody>
                            <tr>
                                <td><button name="Edit1" id="Edit1">Edit</button></td>
                                <td><button name="Duplicate1" id="Duplicate1">Duplicate</button></td>
                                <td><button name="Trash1" id="Trash1">Trash</button></td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>
</form:form> 
```

单击`duplicate1`按钮时，我想创建另一个`table`与 相同的元素`Parent1_Table`并附加它。

为此，我有两个解决方案：

1）找到被点击的表格`duplicate button`，
获取所有`id`元素并入栈，
获取表格的整个html，
复制整个`table`元素并在增加1后追加到原始元素`ids`。

`i`2）创建与单击的`duplicate`按钮相同的元素，
提交后，计算文本元素的数量并使用它们。

以上哪种解决方案易于开发？
谁能帮我从中选择一个？
如果您需要有关该问题的更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:27:47.560

“最佳”问题总是很棘手。

每当我遇到在每一行上重复的控件时，***我***都会完全避免使用`id`值。最多该行会有一个（甚至经常没有），但我会在其余行上使用一个类，尤其是因为它与事件委托很好地配合。*`id`*

# java - 如何在运行时动态地将外部 jar 文件添加到类路径中？

> ID：15204913
> 
> 赞同：23
> 
> 时间：2013-03-04T15:21:27.220
> 
> 标签：java, spring, classpath

我想使用 Java 代码动态地将 JAR 文件添加到我的项目的类路径中。如果可能的话，我想使用外部 jar 文件并加载它们的类，然后稍后将它们作为 bean 执行（Spring Framework）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T15:30:15.000

```
URLClassLoader child = new URLClassLoader (myJar.toURL(), this.getClass().getClassLoader());
Class classToLoad = Class.forName ("com.MyClass", true, child);
Method method = classToLoad.getDeclaredMethod ("myMethod");
Object instance = classToLoad.newInstance ();
Object result = method.invoke (instance); 
```

来源：[https ://stackoverflow.com/a/60775/1360074](https://stackoverflow.com/a/60775/1360074)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T15:32:08.557

您可以尝试这样的事情，但它需要您知道您`JARs`的确切位置。

```
URLClassLoader cl = URLClassLoader.newInstance(new URL[] {myJarFiles});
Class myClass = cl.loadClass("com.mycomp.proj.myclass");
Method printMeMethod = myClass.getMethod("printMe", new Class[] {String.class, String.class});
Object myClassObj = myClass.newInstance();
Object response = printMeMethod.invoke(myClassObj, "String1", "String2"); 
```

# c++ - Xerces-c 无法解析倒置问号

> ID：15204914
> 
> 赞同：0
> 
> 时间：2013-03-04T15:21:32.743
> 
> 标签：c++, xml, character-encoding, xerces-c

我们有通过肥皂信封来自外部系统的 xml 消息。如果有一个编码头，那么我们使用它，否则我们提供一个带有 UTF-8 的头。

最近我们收到了带有有趣字符的消息，例如倒置问号：¿、重音字母等

我们处理这些消息的系统无法解析它。我注意到这些 XML 的格式是 iso-8859-1 - 所以我尝试将其更改为 UTF-8 以查看解析器是否会发挥作用，但仍然没有运气。

知道 UTF-8 支持更广泛的范围，我在这里检查了 iso-8859-1 的字符集表：[http](http://en.wikipedia.org/wiki/ISO/IEC_8859-1) ://en.wikipedia.org/wiki/ISO/IEC_8859-1 。似乎支持倒置问号，重音字母。

我正在为此碰壁，非常感谢一些帮助！谢谢！

在 x86 linux 机器上使用 xerces-c 2.7.0 和 gnu 编译器 3.4 编译的 C++/stl 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:00:05.863

正如评论所指出的，XML 阅读器不一定支持“特殊”字符。这不是一个独特的问题`xerces-c`，但也发生在几个版本的 JavaScript XML 解析器中。我最终通过使用 &#nnn; 为我的问题解决了这个问题（例如，南美洲河流的名称，包含各种重音字母，这些字母在 UTF-8 中编码为多个字符）。命名法，基于此处的表格：http: [//www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent](http://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent)

# elasticsearch - 是否有图形工具来显示（并且可能更改）elasticsearch 映射？

> ID：15204921
> 
> 赞同：6
> 
> 时间：2013-03-04T15:21:40.550
> 
> 标签：elasticsearch

我正在使用[https://github.com/mobz/elasticsearch-head](https://github.com/mobz/elasticsearch-head)，这很棒（！），但它没有那个功能。

在将几个映射放入索引后，我希望能够以图形方式查看它们。那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-15T01:21:35.003

您可以使用新的映射创建新的索引。我用它来将logstash映射从一种类型转换为另一种类型。我已经使用[这个重新索引插件](https://github.com/karussell/elasticsearch-reindex)取得了很大的成功。它使将一个索引流式传输到另一个索引变得更加简单，并且基本上只需要 2 个 http 请求。

像这样的东西：

```
$ curl -XPOST http://elnode:9200/<New Index Name> -d @<new mapping>.json
$ curl -XPUT  http://elnode:9200/<New Index Name>/logs/_reindex\?searchIndex=<Old Index Name>\&searchType=logs 
```

现在你有了一个新的索引和旧索引的数据映射。然后，您可以删除旧索引并使用指向新索引的旧索引名称创建一个别名。

有点工作，但我需要它来以新格式保存旧的 logstash 数据。

# qt - 将 QWidgets 动态添加到 QVBoxLayout

> ID：15204925
> 
> 赞同：3
> 
> 时间：2013-03-04T15:21:55.950
> 
> 标签：qt

我正在尝试在 QVBoxLayout 的顶部添加 QWidgets。但它们被插入底部，向上生长。在 QVBoxLayout 中是一个垂直间隔，用于将所有小部件“推”到顶部（但它们被推到底部）。使用 Ctrl+A 插入小部件。

插入的小部件是一个简单的小部件，具有水平布局和两个标签。

如何将这些小部件插入/推到顶部/顶部？

每次插入时都有一个不带标题或文本的小窗口可见。它消失得很快。为什么是这样？我不想要它。我该如何摆脱这个？

下面是一个小例子。

主窗口.ui

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>400</width>
    <height>300</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralWidget">
   <layout class="QGridLayout" name="gridLayout">
    <item row="0" column="0">
     <widget class="QWidget" name="widget" native="true">
      <layout class="QVBoxLayout" name="verticalLayout">
       <item>
        <widget class="QLabel" name="label">
         <property name="text">
          <string>First at top</string>
         </property>
        </widget>
       </item>
       <item>
        <spacer name="verticalSpacer">
         <property name="orientation">
          <enum>Qt::Vertical</enum>
         </property>
         <property name="sizeHint" stdset="0">
          <size>
           <width>20</width>
           <height>221</height>
          </size>
         </property>
        </spacer>
       </item>
      </layout>
     </widget>
    </item>
   </layout>
  </widget>
  <widget class="QMenuBar" name="menuBar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>400</width>
     <height>21</height>
    </rect>
   </property>
   <widget class="QMenu" name="menuAdd">
    <property name="title">
     <string>File</string>
    </property>
    <addaction name="actionFile"/>
    <addaction name="separator"/>
    <addaction name="actionE_xit"/>
   </widget>
   <addaction name="menuAdd"/>
  </widget>
  <action name="actionFile">
   <property name="text">
    <string>Add</string>
   </property>
   <property name="shortcut">
    <string>Ctrl+A</string>
   </property>
  </action>
  <action name="actionE_xit">
   <property name="text">
    <string>E&amp;xit</string>
   </property>
   <property name="shortcut">
    <string>Ctrl+X</string>
   </property>
  </action>
 </widget>
 <layoutdefault spacing="6" margin="11"/>
 <resources/>
 <connections/>
</ui> 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
  Q_OBJECT

public:
  explicit MainWindow(QWidget *parent = 0);
  ~MainWindow();

private slots:
  void on_actionFile_triggered();

  void on_actionE_xit_triggered();

private:
  Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
  QMainWindow(parent),
  ui(new Ui::MainWindow)
{
  ui->setupUi(this);
}

MainWindow::~MainWindow()
{
  delete ui;
}

void MainWindow::on_actionE_xit_triggered()
{
  QApplication::quit();
}

void MainWindow::on_actionFile_triggered()
{
  int i = ui->verticalLayout->count();

  QHBoxLayout* layout = new QHBoxLayout();
  layout->addWidget(new QLabel(tr("One.%1").arg(i)));
  layout->addWidget(new QLabel(tr("Two.%1").arg(i)));

  QWidget* window = new QWidget;
  window->setLayout(layout);
  window->show();

  ui->verticalLayout->addWidget(window);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T15:35:51.843

# 将小部件添加到顶部

而不是`addWidget()`，[`insertWidget()`](http://qt-project.org/doc/qt-4.8/qboxlayout.html#insertWidget)与 的索引一起使用`0`。

# 不想要的，消失的小窗户

关于不需要的小窗口：这可能是因为您在创建`QLabel`s 时没有指定父级。因此，它们被创建为顶层窗口，直到您将它们添加到布局中。指定您`window`作为父母（ 的第一个 ctor 参数`QLabel`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:26:59.827

包含您正在执行的布局的小部件 ->addWidget 应具有以下行：

```
parentWidget->setAlignment(Qt::AlignTop); 
```

# c++ - 使用头文件编译 C++ 程序（新手）

> ID：15204928
> 
> 赞同：3
> 
> 时间：2013-03-04T15:22:04.350
> 
> 标签：c++, compiler-errors, ld, greatest-common-divisor

我正在从 Edward Schneinerman 为数学家编写的 C++ 中学习 C++。我正在研究第 2 章中的最大公约数部分。我制作了三个文件：

gcd.h

```
#ifndef GCD_H
#define GCD_H

long gcd(long a, long b);

#endif 
```

gcd.cc

```
#include "gcd.h"
#include<iostream>

using namespace std;

long gcd(long a, long b) {
    if( a == 0 && b == 0 ) {
        cerr << "WARNING: gcd(0,0) not defined" << endl;
        return 0;
    }

    if( a < 0 ) a = -a;
    if( b < 0 ) b = -b;

    if( b == 0 ) retrun a;
    if( a == 0 ) return b;

    long c = a % b;

    return gcd(b,c);
} 
```

和 gcdtest.cc

```
#include "gcd.h"
#include <iostream>

using namespace std;

int main() {
    long a,b;

    cout << "Enter the first number > ";
    cin >> a;
    cout << "Enter the second number > ";
    cin >> b;

    long d = gcd(a,b);

    cout << "The gcd of " << a << " and " << b << " is " << d << endl;

    return 0;
} 
```

所有这些文件都位于同一目录中。当我尝试编译 gcdtest.cc

```
$ g++ -Wall gcdtest.cc -o gcdtest.exe 
```

我收到以下错误：

```
$ g++ -Wall gcdtest.cc -o gcdtest.exe
Undefined symbols for architecture x86_64:
      "gcd(long, long)", referenced from:
          _main in ccgbCyQO.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我是 C++ 的新手，还没有完全理解编译和链接。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T15:23:55.023

您应该尝试编译这两个 C 文件：

```
$ g++ -Wall gcdtest.cc gcd.cc -o gcdtest.exe 
```

否则你已经声明了'gcd'（在你的头文件中），但是编译器缺少它的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:24:32.540

以这种方式编译您的程序：

```
g++ -Wall gcd.cc gcdtest.cc -o gcdtest.exe 
```

或者这样：

```
g++ -Wall -c gcdtest.cc
g++ -Wall -c gcd.cc
g++ -Wall gcd.o gcdtest.o -o gcdtest.exe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:24:13.833

你必须先编译 gcd.cc。

```
$g++ -c gcd.cc -o gcd.o
$g++ gcdtest.cc gcd.o -o gcdtest.exe 
```

# json - jqgrid将json数据从服务器加载到treegrid不显示数据

> ID：15204930
> 
> 赞同：3
> 
> 时间：2013-03-04T15:22:15.817
> 
> 标签：json, jqgrid, treegrid

我是 jqGrid 的新手，我已经用本地数据构建了一个 jqGrid treeGrid，一切都很好。但是现在我正在尝试对远程 JSON 数据做同样的事情，但我无法获取 treeGrid 显示我的数据。这是treeGrid conf：

```
$("#"+subgrid_table_id).jqGrid({ 
    url:"sg511e.php?id="+row_id+"&btr="+btr, 
    datatype:"json",
    mType:'POST',
    loadui: "disable",
    colNames:['id','Prestations'],
    colModel:[
        {name:'id',index:'id',width:100,hidden:true},
        {name:'name',index:'name',width:785,sortable:false}
    ],
    pager: pager_id, 
    sortname: 'id', 
    sortorder: "asc", 
    hiddengrid:true,
    gridview: true,
    treeGrid:true,
    treeGridModel: "adjacency",
    treedatatype: 'json',
    ExpandColumn: 'name',
    jsonReader: {
        repeatitems: false,
        root: "rows"
    }, 
```

和 JSON 数据：

```
{
    "page": 1,
    "total": 1,
    "records": 1,
    "rows": [
        {
            "cell": {
                "id": "1",
                "name": "ECHANGEUR",
                "level": "0",
                "parent": "",
                "isLeaf": true,
                "expanded": false,
                "loaded": true
            }
        },
        {
            "cell": {
                "id": "1_1",
                "name": "Intervention Aller sur Site",
                "level": "1",
                "parent": "1",
                "isLeaf": true,
                "expanded": false,
                "loaded": true
            }
        },
        {
            "cell": {
                "id": "1_1_1",
                "name": "Date et heure d'arrivée sur le site",
                "level": "2",
                "parent": "1_1",
                "isLeaf": false,
                "expanded": true,
                "loaded": true
            }
        },
        {
            "cell": {
                "id": "1_1_2",
                "name": "Consignation de l'échangeur",
                "level": "2",
                "parent": "1_1",
                "isLeaf": false,
                "expanded": true,
                "loaded": true
            }
        }
    ]
} 
```

我看不出我错了什么，所以我希望你能带来一些帮助并解释我的错误。非常感谢JiheL

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:22:53.580

首先，您应该修复 JSON 数据：

*   在根元素中替换`"parent": ""`为`"parent": "null"`
*   您应该反转`isLeaf`属性的值：将所有`true`值`false`更改为并将所有`false`值更改为`true`
*   您应该`"cell"`从所有项目中删除部分
*   该值`"records": 1`不对应 4 项数据。我想正确的值应该是`"records": 4`，但最好是`pager`从网格的选项列表中删除 。在任何的情况下`page`，`total`或`records`将不重要。

您可以更简化数据并`rows`从 JSON 数据中删除部分。在这种情况下，我们必须更改 to的`root`属性。因此，您可以使用以下简单的 JSON 数据：`jsonReader``root: function (obj) { return obj; }`

```
[
    {
        "id": "1",
        "name": "ECHANGEUR",
        "level": "0",
        "parent": "null",
        "isLeaf": false,
        "expanded": false,
        "loaded": true
    },
    {
        "id": "1_1",
        "name": "Intervention Aller sur Site",
        "level": "1",
        "parent": "1",
        "isLeaf": false,
        "expanded": false,
        "loaded": true
    },
    {
        "id": "1_1_1",
        "name": "Date et heure d'arrivée sur le site",
        "level": "2",
        "parent": "1_1",
        "isLeaf": true,
        "expanded": true,
        "loaded": true
    },
    {
        "id": "1_1_2",
        "name": "Consignation de l'échangeur",
        "level": "2",
        "parent": "1_1",
        "isLeaf": true,
        "expanded": true,
        "loaded": true
    }
] 
```

[该演示](http://www.ok-soft-gmbh.com/jqGrid/user2132268.htm)演示了更改的结果。扩展网格后如下图所示

![在此处输入图像描述](../Images/46019b63dc3e4ba0d38e471cfaf4d1fd.png)

我在演示中使用的代码是：

```
$("#grid").jqGrid({
    url: "user2132268.json",
    datatype: "json",
    colNames: [ 'id', 'Prestations'],
    colModel: [
        {name: 'id', width: 100, key: true, hidden: true},
        {name: 'name', width: 785, sortable: false}
    ],
    sortname: 'id',
    sortorder: "asc",
    hiddengrid: true,
    gridview: true,
    treeGrid: true,
    treeGridModel: "adjacency",
    ExpandColumn: 'name',
    ExpandColClick: true,
    jsonReader: { repeatitems: false, root: function (obj) { return obj; } },
    height: "auto"
}); 
```

# forms - Symfony 2.0 在另一个表单工厂中动态表单

> ID：15204931
> 
> 赞同：1
> 
> 时间：2013-03-04T15:22:20.987
> 
> 标签：forms, symfony, collections

我正在尝试开发一个投注网页。我有一个实体“Apuesta”（赌注）和一个实体“Partido”（匹配）。“Apuesta”有一个 Partido 集合（在 attr $Partidos 中）和返回集合的 getter getPartidos()。“Partido”有一个类型（0 或 1），根据这个值指定他的表单字段。

我想要得到的是将“Partido”表单包含到“Apuesta”表单中，但我希望“Partido”知道自己根据 $Type 值呈现他自己的表单。显然，“Apuesta”是用他自己的“Partidos”在数据库中创建的。

我的代码是：

```
 class ApuestaForm extends AbstractType{

    public function buildForm(FormBuilder $builder, array $options)
    {

        $p = $builder->getData()->getPartidos();

        $builder->add('Jornada')
                ->add('Partidos', 'collection', array('type' => new PartidoForm()));

    }

    public function getName(){
        return 'ApuestaForm';
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'A\ApuestaBundle\Entity\Apuesta',
        );
    }

} 
```

#

```
class PartidoForm extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {
        **$tipo;
       //$partido = $builder->getData();
       //$tipo = $partido->getTipo();

       $builder->add('Local')
               ->add('Visitante')
               ->add('Tipo')
               ->add('Jornada');
               if ($tipo == 1){ 
                   $builder->add('some field 1')
               }
               else{ 
                   $builder->add('some field 2')
               }

    }

    public function getName(){
        return 'PartidoForm';
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'A\ApuestaBundle\Entity\Partido',
        );
    }

} 
```

这样，“Apuesta”会自动渲染他自己的“Partidos”，每个“Partido”都应该知道他的 $Type 是 1 还是 0。问题是 $builder->getData() 没有得到“Partido”实体，但也是一个空值。

我认为这样做的另一种方法是使用实​​体参数“Partido”进行构造，但问题是“Apuesta”表单呈现“Partido”的集合，所以我不能传递单个对象“Partido” ，也是一个集合。

我尽量不使用 Form 事件，因为它是一个非常简单的 Form。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:45:07.623

要将参数传递给表单，您必须执行以下操作：

```
class PartidoForm extends AbstractType
{

public function buildForm(FormBuilder $builder, array $options)
{
   // $tipo;
   $tipo = $options['tipo']; // <<---- Get "tipo" from the options array
   //$partido = $builder->getData();
   //$tipo = $partido->getTipo();

   $builder->add('Local')
           ->add('Visitante')
           ->add('Tipo')
           ->add('Jornada');
           if ($tipo == 1){ 
               $builder->add('some field 1')
           }
           else{ 
               $builder->add('some field 2')
           }

}

public function getName(){
    return 'PartidoForm';
}

public function getDefaultOptions(array $options)
{
    return array(
        'data_class' => 'A\ApuestaBundle\Entity\Partido',
        'tipo'     => null,** // Set a default null value, or whatever value you want as default
    );
} 
```

}

现在，Partido 表单类型接受参数tipo，所以当你调用它时......

```
public function buildForm(FormBuilder $builder, array $options)
{

    $p = $builder->getData()->getPartidos();

    $builder->add('Jornada')
            ->add('Partidos', 'collection', array(
                      'type' => new PartidoForm()
                      'options' => array('tipo' => 1)
            )
    );

} 
```

当然，您可以在 Jornada 实体中执行相同的操作以从控制器中获取选项（从选项数组中获取它，并且不要忘记将其添加为选项）。

如果要在控制器中传递参数，请使用以下内容：

```
$form = $this->createForm(new JornadaType(), $jornada, array('tipo' => $tipo)); 
```

# java - Eclipse 中的构造函数引用助手

> ID：15204939
> 
> 赞同：0
> 
> 时间：2013-03-04T15:22:57.993
> 
> 标签：java, eclipse, class, parameters, constructor

我已经多次遇到同样的情况：

我将创建一个具有多个构造函数或接受许多参数的构造函数的类。当我创建类的对象时，我会忘记满足特定构造函数所需的许多值。结果，我将不得不回到课堂上看看哪些参数被接受了。对我来说，这会浪费大量时间，并且会破坏我的思考过程。

是的，Eclipse 会给我每个参数所需的变量*类型*，但这并不能帮助我了解值实际表示的内容。

**问题：** 我想知道是否有办法让编译器提取变量*名*而不是*类型*。它会快得多，而且我可以继续我的思路，而不必停下来回顾课堂上的价值观实际代表什么。

Eclipse 给了我什么：

```
MyClass pig = new MyClass(height, null, null, height, height, background); //etc 
```

（是的，我知道我在这里需要一个 int，但我知道这不是高度）我想要什么：

```
MyClass pig = new MyClass(tagNumber, isAlive, isSmelly, weight, age, color); //These are the names of the variables 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:31:11.520

键入类似 的内容`new YourConstructor(`，然后按 Ctrl + Space 以查看它的建议并逐步传递值。默认填充很危险，我从不使用它。

当您的构造函数变长（伸缩......）并且您有很多时，您应该使用静态工厂方法，因为它们可以具有与构造函数不同的有意义的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:33:15.793

只需在方法（构造函数）主体之前插入一些`javadoc`“魔法”：

写

> /**

并按下`enter`

然后你可以添加所有你想要的解释，使用 html 标签进行格式化。

# javascript - URL 被奇怪地编码

> ID：15204941
> 
> 赞同：0
> 
> 时间：2013-03-04T15:22:58.377
> 
> 标签：javascript, jquery, url

我正在构建一个允许用户对某些文本进行修改的站点。然后我正在构建一个 url，以便他们可以回来，并且在页面加载时应用他们的 mod。这一切都有效，除了当我在浏览器地址栏中输入 url 时得到一些“时髦”字符。

我输入的网址是：

```
http://localhost:8888/PlantTags/index%20copy.php/temp=lg_oval&cn=Common Name&cX=-10&cY=40&cf=Giddyup&cfs=52&clh=1&ca=center&bn=Botanical Name&bX=80&bY=115&bf=Comic-Sans-Ms&bfs=21&blh=1&ba=center&rev=false 
```

但是浏览器将其编码为：

```
http://localhost:8888/PlantTags/index%20copy.php?temp=lg_oval&cn=Big%2520Jumbo&cX=-10&cY=40&cf=Giddyup&cfs=52&clh=1&ca=center&bn=Botanical%2520Name&bX=80&bY=115&bf=Comic-Sans-Ms&bfs=21&blh=1&ba=center&rev=false?temp=lg_oval&cn=Big%20Jumbo&cX=-10&cY=40&cf=Giddyup&cfs=52&clh=1&ca=center&bn=Botanical%20Name&bX=80&bY=115&bf=Comic-Sans-Ms&bfs=21&blh=1&ba=center&rev=false 
```

因此，当我从 url 中获取 cn 参数时，我得到了额外的字符。有人能告诉我 %2520 来自哪里以及如何处理吗？我已经尝试将它插入到 textarea 并从中获取 html 并 decodeURIComponent ... 都失败了。哦，是的....javascript 或 jQuery 是选择的语言。

再次感谢你，

托德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:26:28.833

尽量不要在您尝试编码的 URL 中使用空格，而是使用连字符。**它们将更具可读性**`%20`，并且不会以.**`%2520`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:28:13.237

好吧，URL中不允许空格作为空格，并且“&cn = Common Name”中有空格

浏览器会将所有空格（实际上是 URL 编码）更改为 %20 以发送请求。因此，您需要更改“common_name”之类的值或其他内容，但您的服务器也应该能够处理...另一种方法是在服务器端解码 URL，以便 %20 再次变成空格然后让它做它的事情

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T15:26:34.973

如果你解码`%2520`你得到`%20`. 您正在对某些片段进行两次编码。**

# android - 将旧的平板电脑前 Android 应用程序更新为平板电脑版本

> ID：15204943
> 
> 赞同：0
> 
> 时间：2013-03-04T15:23:00.640
> 
> 标签：android

所以这里是这样的场景：我们在 Play 商店有一个旧应用程序在任何平板电脑出现之前发布（它使用手机界面在平板电脑上运行。）我们想要发布该应用程序的更新（因为它有超过 15 万用户）而不是一个新的应用程序，但由于手机用户界面的设计无法在我们的截止日期前及时准备好，我们想发布一个更新，现在*只*针对平板电脑，而现有用户继续使用旧的仅限手机的应用程序。稍后，当手机 UI 的设计和实现完成后，我们希望发布另一个更新，增加对手机的支持。

理想情况下，如果用户在手机上使用旧应用程序，他们不会收到第一次升级通知，但在平板电脑上运行它的用户*会*收到更新通知（并且第一次安装它的新用户会收到更新通知）例如，如果他们正在运行 Gingerbread 手机，而使用 Nexus 7 的用户将获得新的 apk，则获得旧的 apk。）最终，无论如何，所有用户都会收到第二个版本的更新通知他们正在运行的 Android 版本/设备类型。

如果我们这样做，当前在手机上使用旧版本的用户会有什么体验？是否会提示他们升级到他们无法运行的应用程序版本，或者他们根本不会收到更新通知？稍后，当我们发布支持手机的第二次升级时，他们会收到更新通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:25:26.430

要使您的应用在平板电脑上看起来很棒，只需添加专门的布局类型，就像 **layout-large**或**layout-sw600dp**一样。然后将现有的 layout-xml 文件从**布局**文件夹复制到这些文件并根据需要进行修改。我建议阅读[**支持不同的屏幕尺寸**](http://developer.android.com/training/multiscreen/screensizes.html)。

这样，您可以添加平板电脑优化，而不会放弃手机兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T16:32:48.167

我不太清楚您所说的仅对特定设备可用的更新是什么意思。平板电脑和手机的工作方式完全不同，Google Play 市场能够区分哪些将在用户当前的设备上运行，哪些不会。

与前面的答案一样，**您将需要专门为平板电脑构建不同的布局**。

但是，如果您只想在平板电脑上更新平板电脑 - 您需要尽可能多地获取有关屏幕尺寸、密度、设备版本甚至当前用户的 android OS 版本的信息，以真正帮助您缩小当前设备的范围是否是平板电脑或大屏幕设备。

例如： [获取屏幕尺寸（以像素为单位）](https://stackoverflow.com/questions/1016896/how-to-get-screen-dimensions) 向您展示了如何获取屏幕尺寸。

[如何查看安卓系统版本？](https://stackoverflow.com/questions/3093365/how-can-i-check-the-system-version-of-android)为您提供有关当前 android 版本的更多信息。

[在android中以编程方式获取屏幕密度？](https://stackoverflow.com/questions/3166501/getting-the-screen-density-programmatically-in-android) 将允许您找出当前屏幕的屏幕密度。

使用上述所有方法或一些类似的组合，您可以确定用户是否在平板电脑上运行您的应用程序，如果是，则为他们提供更新，如果不是，则应用程序继续正常布局。

我不太确定这是否是您正在寻找的答案，但我希望它有所帮助。小心

# c# - 托管代码和非托管代码之间的调用

> ID：15204949
> 
> 赞同：0
> 
> 时间：2013-03-04T15:23:35.487
> 
> 标签：c#, c++, pinvoke, unmanaged

我的应用程序分为 C#（托管代码）和 c++（非托管代码）两部分。这两个部分经常互相调用，并且通常在它们之间传递字符串。我想知道做到这一点的最佳且无错误的方法。

我把问题分成两部分

1.  从托管调用非托管代码时，我使用字符串生成器从托管传递到非托管：

    ```
    [DllImport("SomeXYZ.dll")]
    // enter code here

    private void XYZ(string text)
    {
        StringBuilder builder = new StringBuilder();
        builder.Append(“Var1”);
        FromManagedtoUnmanaged(builder);
    } 
    ```

    C++ 代码：

    ```
    extern "C"
    {
    int _declspec(dllexport) FromManagedtoUnmanaged(char* var1);
    } 
    ```

2.  从非托管到托管，我使用函数指针将 c# 函数的函数引用提供给 c++ 函数：

    C# 代码

    ```
    [DllImport("SomeXYZ.dll")]
    public static extern void SetCallback(Callback fn);
    public delegate void Callback(string text);
    public Callback mInstance;

    private void ABC(string text)
    {
        mInstance = new Callback(SomeFunctionName);
        SetCallback(mInstance);
    } 
    ```

    C++ 代码，在头文件中：

    ```
    extern "C" 
    {
    void __declspec(dllexport) __stdcall SetCallback(Callback handler);
    void __declspec(dllexport) __stdcall SendReceiveMessage(char* arr1); 
    } 
    ```

    在 .cpp 文件中：

    ```
    void __stdcall SetCallback(Callback handler1) {
        Handler = handler1;
    }

    void __stdcall SendReceiveMessage(char* arr1) {
        Handler(arr1);
    }

    void SendMsg(int SomeVar)
    {
        char *str;
        str = new char[1024];
        sprintf(str, “&lt;body>%d</body>”, SomeVar);
        SendReceiveMessage(str);
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:45:45.303

最好是在两者之间创建一个轻量级的 C++/CLI 程序集。这就是创建这种语言的目的/原因。

此 C++/CLI 层将作为程序集引用无缝集成到您的 C# 项目中，可以像任何 .net 资源一样访问，并且 C++/CLI 可以无缝调用任何本机 C++ 代码。

自从我尝试过这种技术以来，我已经停止将 C++ 直接调用到 C# 代码中。

如果您从未听说过 C++/CLI，[这里有一个 pdf 格式的简明教程](http://www.asawicki.info/Download/Productions/Publications/CPP_CLI_tutorial.pdf)。

# c# - C# - For vs Foreach - 巨大的性能差异

> ID：15204950
> 
> 赞同：15
> 
> 时间：2013-03-04T15:23:50.283
> 
> 标签：c#, performance, for-loop, foreach

我正在对一种算法进行一些优化，该算法在给定数组中找到大于 X 的最小数字，但后来 ai 偶然发现了一个奇怪的差异。在下面的代码中，“ForeachUpper”结束于 625 毫秒，而“ForUpper”结束于，我相信，几个小时（慢得多）。为什么这样？

```
 class Teste
{
    public double Valor { get; set; }

    public Teste(double d)
    {
        Valor = d;
    }

    public override string ToString()
    {
        return "Teste: " + Valor;
    }
}

  private static IEnumerable<Teste> GetTeste(double total)
    {
        for (int i = 1; i <= total; i++)
        {
            yield return new Teste(i);
        }
    }
    static void Main(string[] args)
    {
        int total = 1000 * 1000*30 ;
        double test = total/2+.7;

        var ieTeste = GetTeste(total).ToList();

        Console.WriteLine("------------");

        ForeachUpper(ieTeste.Select(d=>d.Valor), test);
        Console.WriteLine("------------");
        ForUpper(ieTeste.Select(d => d.Valor), test);
        Console.Read();
    }

    private static void ForUpper(IEnumerable<double> bigList, double find)
    {
        var start1 = DateTime.Now;

        double uppper = 0;
        for (int i = 0; i < bigList.Count(); i++)
        {
            var toMatch = bigList.ElementAt(i);
            if (toMatch >= find)
            {
                uppper = toMatch;
                break;
            }
        }

        var end1 = (DateTime.Now - start1).TotalMilliseconds;

        Console.WriteLine(end1 + " = " + uppper);
    }

    private static void ForeachUpper(IEnumerable<double> bigList, double find)
    {
        var start1 = DateTime.Now;

        double upper = 0;
        foreach (var toMatch in bigList)
        {
            if (toMatch >= find)
            {
                upper = toMatch;
                break;
            }
        }

        var end1 = (DateTime.Now - start1).TotalMilliseconds;

        Console.WriteLine(end1 + " = " + upper);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-04T15:26:39.643

`IEnumerable<T>`不可索引。

您在循环的每次迭代中调用的`Count()`和扩展方法是 O(n); 他们需要遍历集合以找到计数或第 n 个元素。`ElementAt()``for`

**道德**：了解您的收藏类型。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-04T15:26:31.690

这种差异的原因是您的`for`循环将`bigList.Count()`在每次迭代时执行。在您的情况下，这确实很昂贵，因为它将执行`Select`并迭代完整的结果集。

此外，您正在使用`ElementAt`which 再次执行选择并将其迭代到您提供的索引。

# c# - 尝试读取流结束时没有无参数构造函数异常

> ID：15204963
> 
> 赞同：3
> 
> 时间：2013-03-04T15:24:25.870
> 
> 标签：c#, protobuf-net

`'No parameterless constructor found for [type]'`在过去的几个小时里，我一直在与异常作斗争。现在我创建了一个简单的单元测试，它应该反映我在应用程序中得到的内容，并且似乎在我不这样做时会抛出这个异常`stream.Position = 0`。

另外，当对象只是一个标准类（不是从抽象类派生的）时，在任何情况下我都不会得到这个异常。

请看下面的代码：

1.  按原样运行它 - 它会中断说找不到 Base 的构造函数

2.  取消注释 stream.Position = 0 就可以了

3.  再次注释该行，将 Derived 类更改为不继承自 Base 并取消注释该类中唯一的属性，运行它 - 它不会中断（但显然 Name 将为空）

有人可以解释为什么会这样吗？为什么#1 抛出（或者为什么#3 没有）以及为什么这个消息？

```
[Test]
public void CanSerialize_Derived()
{
    var derived = new Derived() {Name = "ngf"};
    var stream = new MemoryStream();
    Serializer.Serialize(stream, derived);
    //stream.Position = 0;
    var deserializedInstance = Serializer.Deserialize<Derived>(stream);
}

[ProtoContract]
[ProtoInclude(9, typeof(Derived))]
public abstract class Base 
{
    [ProtoMember(1)]
    public string Name { get; set; }
}

[ProtoContract]
public class Derived : Base
{
    //[ProtoMember(1)]
    //public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T20:08:23.527

长度为零的流在 protobuf-net 中有效；在 protobuf-net 中，所有序列化都从该 DTO 继承树的根类型开始，所以它会*从*- 开始，`Base`直到它**同意**数据实际上包含 a `Derived`，它才会相信你 - 并且会尝试使用`Base`. 所以这就是#1 抛出的原因。

显然，如果您将流放在最后，可反序列化的数据长度为零。这就是为什么＃2通过。

如果删除继承，则该继承树的根是`Derived`; 这是一个根本性的重大变化，但在继承方面的区别在于它不再试图在`abstract`没有任何信息的情况下反序列化类型。所以这就是#3 修复它的原因（出于不好的原因）。

这里的关键点是继承是*作为信息实现的*。除非有信息，否则它唯一假设的是对象属于继承树根的类型。

# java - 在 Eclipse Run 的 Simulator BlackBerry java 插件中找不到应用程序图标

> ID：15204965
> 
> 赞同：0
> 
> 时间：2013-03-04T15:24:33.810
> 
> 标签：java, eclipse, blackberry

我已经为 Eclipse 安装了 BlackBerry Plugin。创建简单的 Hello World 黑莓应用程序。执行“作为 BlackBerry 应用程序运行”。但是在模拟器窗口中我看不到应用程序正在运行。无法在 Applications 文件夹中处理相应的图标。

但是，如果我从应用程序文件夹中单击黑莓菜单按钮并选择“切换应用程序”，我确实会在候选列表中看到我的应用程序图标并可以切换到它。

这真的很奇怪。

使用适用于 OS5 的 JDK。（我确实需要在 BB 5、6、7 上运行它）

# mysql - WHERE 子句的顺序影响结果

> ID：15204968
> 
> 赞同：2
> 
> 时间：2013-03-04T15:24:49.923
> 
> 标签：mysql

我有一个奇怪的问题`select`。`WHERE`子句中的顺序是否可能会影响结果？

这是我的选择：

```
选择 u.userName, u.fullName, g.uuid 作为 groupUuid, g.name 作为 `group`,
    m.number 作为模块，count(distinct b.uuid) 作为 buildCount，max(b.datetime)，
    count(distinct e.buildId) as errorBuildCount, e.id as errorId
    来自用户 u
    在 GU.user_id = u.id 上内部加入 GROUP_USER GU
    在 g.id = GU.group_id 上内部加入 `Group` g
    在 c.id = g.courseId 上内部加入课程 c
    左外连接 Build b on b.userId = u.id
    在 m.id = b.moduleId 上左外连接模块 m
    e.buildId = b.id 上的左外连接错误 e
    其中c.uuid = 'HMUUcabR1S4GRTIwt3wWxzCO' 和 g.uuid = 'abcdefghijklmnopqrstuvwz'
    按 u.userName、m.number、c.uuid、g.uuid 分组
    按 g.id asc、u.fullName asc、m.number asc 排序

```

这将重现此结果： [http ://dl.dropbox.com/u/4892450/sqlSelectProblem/select1.PNG](http://dl.dropbox.com/u/4892450/sqlSelectProblem/select1.PNG)

当我使用这个条件时：

`where **g.uuid = 'abcdefghijklmnopqrstuvwz' and c.uuid = 'HMUUcabR1S4GRTIwt3wWxzCO'**` （不同的顺序）我得到不同的结果（见`errorId`专栏）： [http ://dl.dropbox.com/u/4892450/sqlSelectProblem/select2.PNG](http://dl.dropbox.com/u/4892450/sqlSelectProblem/select2.PNG)

请你帮助我好吗？整个选择是错误的，还是可能是一个 `mysql`错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:29:06.377

结果之间的唯一区别是`errorId`列。sql 标准（sql-92 标准，查看[链接](https://stackoverflow.com/a/7596265/451518)）不允许未分组和未聚合的列，甚至不会在大多数数据库引擎中运行。因此，未指定引擎在这种情况下的行为。根据[文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)（感谢[Marcus Adams](https://stackoverflow.com/users/168493/marcus-adams)）：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。这意味着前面的查询在 MySQL 中是合法的。您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。

你可以得到`errorId`一个聚合值：

```
MAX(e.id) as errorId 
```

或将其包含在`GROUP BY`列表中：

```
group by u.userName,m.number,c.uuid, g.uuid,e.Id 
```

那么你的查询结果应该是稳定的。

**进一步阅读：**

[为什么 MySQL 会添加一个与 SQL 标准相冲突的特性？](https://stackoverflow.com/a/7596265/451518)- 详细解释 sql 标准和 mysql 实现之间的差异。（感谢[GarethD](https://stackoverflow.com/users/1048425/garethd)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:30:41.167

您的代码中有两个不同的 JOIN 树，本质上是：

```
 user
              /    \
    group_user      build
       /              \
    group             module
       |               |
    course           error 
```

这种结构会导致未定义的结果，特别是如果一个分支中的连接结果与另一个分支中的匹配记录数不同。MySQL 必须尝试填充缺失的位，然后进行猜测。更改`WHERE`子句的顺序可以并且将更改完整结果，因为您正在更改 mysql 猜测的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:31:57.850

在聚合之前按所有列分组。最佳实践...在大多数情况下。并且很可能会扭曲您的答案...

# python - 如何为 COM 构造对象列表？

> ID：15204971
> 
> 赞同：2
> 
> 时间：2013-03-04T15:24:54.490
> 
> 标签：python, com, automation, activex, autocad

这是之前用VBA写的一个真实项目。

我想将其移至 Python 并使用“带有 Python 的 AutoCAD 的 ActiveX 自动化脚本”方法。这是我的代码：

```
# -*- coding: utf-8 -*-

from pyautocad import Autocad, APoint, aDouble

acad = Autocad(False,  True)
acad.prompt("Hello, Autocad from Python\n")
print acad.doc.Name

xx = acad.model.AddCircle(APoint(0, 0),  10)
print(xx)
yy = acad.model.Add3Dpoly(aDouble([0,  0,  0,  10,  10,  10,  30,  20,  30,  0,  0,  0]))
print(yy.ObjectName)
print(yy.PlotStyleName)

# How to contruct an objectlist for AddRegion?
#regions = acad.model.AddRegion([yy])
#acad.model.AddExtrudedSolid(regions[0], 20, 0) 
```

我的问题是，如何构造一个对象列表`AddRegion`？也许`comtypes`有一些关于 VARINT 的话题。我对COM之类的东西真的没有经验……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-25T07:32:23.583

让一切正常工作可能比看起来应该做的要多。使用python读取数据；还不错。写入数据，有点棘手。休闲用户/初学者；被警告你进入什么。

* * *

## 你可能需要什么

如果您熟悉 autolisp，它会大有帮助，因为它只是工作得更好（在这种情况下），记录得更好，并且集成得更好，......而且您可能需要它来收集 python 的“未知/隐藏/未记录”信息不告诉你。（参见 lisp 函数的*vlax-*和*vla-*系列）。

接下来，您需要命令行中的**win32com** make_py 和 gen_py 脚本，或者您可以使用**win32com.client.gencode**，同时主要使用 python。

准备好在视觉上解析非常丑陋的文本（我什至没有在谈论 lisp =] ）。准备好失败，并兴奋地找出原因。

其中大部分与 COM 变体有关。然后你会得到一些奇怪的东西，比如 Variant-Variant-Arrays。如果您查看**win32com.client.pythoncom**，您会注意到所有数据类型都映射到整数。（例如 VT_BOOL 为 11）。

* * *

## 坚韧不拔

下次您尝试 ModelSpace.AddCircle 时，请注意您获得的调试输出；传递给 InvokeTypes 的所有**参数都是您需要**注意的......（这是从我的 make-py 输出中获取的 Autocad 注册接口

```
def AddLine(self, StartPoint=defaultNamedNotOptArg, EndPoint=defaultNamedNotOptArg):       
    ret = self._oleobj_.InvokeTypes(
                        1581, LCID, 1, (9, 0), ((12, 1), (12, 1)),StartPoint, EndPoint)
    if ret is not None:
        ret = Dispatch(ret, u'AddLine', '{DF524ECB-D59E-464B-89B6-D32822282778}' 
```

**这会准确告诉您win32com 认为**它想要哪些 COM 类型，因此请确保您至少匹配该类型。

我发现许多输入函数实际上被记录和调用是错误的（我在多次使用 AutoLisp 后才知道这一点）。我们在上面看到的外部值为**1581**（类似于类名，而不是真正的数据类型），然后是基本上表示**(DISPATCH, EMPTY)** :(9,0) 的元组，然后是一个数组VT_VARIANTS:((12,1),(12,1))。

COM 所期望的通常缺少一个外包装，并且由于某种原因 make-py 没有意识到这一点。如果你通过大量的 AutoLisp *vlax-* nonsense，你会注意到它们是一个额外的包装器。我相信它要么是 VARIANT_ARRAY，要么是字面意义上的 VARIANT-VARIANT-ARRAY（四元指针或其他东西）。代码为 (vt_array=8192, vt_variant=12)。

对不起，我不记得细节了，但我相信阅读**((12,1),(12,1))**的部分应该变成**(8192, 12, ((12,1),(12,1)))**， 或类似的东西。即使您确实弄清楚了它应该是什么，我也不确定它们是否可以快速解决。从 AutoCAD 2010 开始，对我来说，这意味着要通过异常大的 gen_py 输出，找到我真正想要的函数，并手动更改 InvokeTypes() 调用以匹配 COM 的预期。

之后一切都按预期工作。

* * *

# 可能的解决方法

COM是丑陋的。如果您是 python 新手，但在 AutoCAD 方面经验不足（这意味着您想做一些相当大的自动化），请远离*python->win32com->AutoCAD*管道。使用 LISP。尽管这让我很痛苦，但你最终会编写这么多 LISP 测试用例和调试器来伴随你的 python 痛苦，你还不如提交。

*   Ironpython 和 .NET
    *   我相信这个接口通常比 COM 更受支持
*   Visual Studio 专业版 (2008+)
    *   我从未使用过官方的 VS-Pro 工具（我使用过 PythonWIN 和 MINGW），我不确定是否提供了任何额外的魔法来改变 win32com 处理 AutoCAD 的方式。我知道官方的 AutoCAD ARX 扩展在 Studio 项目中提供了它们的源代码。最坏的情况是你手头有实际的文档，这就是整个 python-AutoCAD 主题被污染的地方。

# live-streaming - 直播两地之间的会议

> ID：15204972
> 
> 赞同：0
> 
> 时间：2013-03-04T15:24:54.837
> 
> 标签：live-streaming

我记得我在 2005 年左右做过一次，但从那以后很多事情都发生了变化，我不记得细节了。我基本上想在两个地方之间进行会议。那时我需要一台摄像机、电脑上的软件和流媒体服务器。

这几天直播是怎么做的？有没有一种简单的方法来安排实时视频流？我雇不起专业人士，所以我需要自己做。

另一个问题是，在通信的一端，我的意思是在其中一个地方，互联网连接不太可靠。对于这种环境，您认为直播会是一个糟糕的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:32:34.733

如果您只需要 1:1，那么有很多网站可以免费提供。从谷歌开始，也许看看 tinychat（忽略那些可怕的人），或者只是搜索“免费视频聊天”。

除非您有超出您描述的特定要求，否则无需安装软件或设置特殊服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:55:17.127

您必须对网络有所了解才能在今天进行直播。

需要快速的 Internet 连接。

查看此链接：[http](http://www.youtube.com/watch?gl=NG&hl=en-GB&v=Sm3DfJ2ISRc) ://www.youtube.com/watch?gl=NG&hl=en-GB&v=Sm3DfJ2ISRc 。

希望对您有所帮助。你可以从那里开始。

# html - Bootstrap 100% 宽度/全宽

> ID：15204976
> 
> 赞同：10
> 
> 时间：2013-03-04T15:25:17.233
> 
> 标签：html, css, twitter-bootstrap

我想用 Bootstrap 创建一个新网站，我需要它的宽度为 100%，但我不希望它是流动的。至少现在不会。

我遇到的问题是：使用引导标准将您限制为 960 像素，并且使用流体布局，它是全宽的，但是当窗口尺寸缩小时，它的行为就像流体布局应该通过移动元素来堆叠。

有没有办法通过静态引导布局获得 100% 的宽度？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-13T10:16:45.267

这在 Bootstrap 3 中很容易实现，只需将`.container`div 替换为您自己的：

```
.my-fluid-container {
  padding-left: 15px;
  padding-right: 15px;
  margin-left: auto;
  margin-right: auto;
} 
```

感谢 Erik Flowers 的提醒： [http ://www.helloerik.com/bootstrap-3-grid-introduction#fluid](http://www.helloerik.com/bootstrap-3-grid-introduction#fluid)

***更新***

Bootstrap 3 现在提供了一个内置的流体容器类，只需使用`<div class="container-fluid">`. [请参阅文档。](http://getbootstrap.com/css/#overview-container)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T15:43:44.300

> 100% 宽度 ... 静态

这有点矛盾。100% 宽度的布局不是静态的。

Bootstrap 使用一个`.container`类来设置预定义的宽度。如果您希望它大于默认值，请将其增加到所需的页面宽度。请注意，Bootstrap`span*`和`offset*`类的大小需要相应地调整它们的宽度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T03:49:25.143

只是不包括`bootstrap-responsive.css`以禁用响应功能。

如果您不想要一个`.container`装订线/边距，您可以将您的内容放在容器之外，但请记住，您必须自己维护您的内容布局（仍然可以使用网格，但失去了将内容居中的能力）并且不要忘记大多数Bootstrap 组件就像`.navbar`需要`.container`控制它的宽度一样。

我的一项工作需要一个全屏轮播来保存所有内容，因此我将我的内容包装起来`.container`以使内容居中。

![在此处输入图像描述](../Images/8cd0081fad4a956711464a05969a87e3.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-09T19:36:04.287

我不太清楚如何回答主要问题，但这就是你想要的 OP

如上所述，不要使用 .container，使用您自己的类，例如：

```
.my-fluid-container {
  padding-left: 15px;
  padding-right: 15px;
  margin-left: auto;
  margin-right: auto;
} 
```

然后，当您构建网格时，只需将 col-xs-* 用于列。您现在将拥有一个 100% 宽度的网站，该网站不会在“移动”视图中堆叠。欢迎来到 90 年代 ;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T16:15:25.920

我猜你的意思是你不想要边距/边距。（这是您的信息有意义的唯一方式 - 100% 的宽度将占据屏幕的整个大小，因此它永远不会是静态的 - 大小会根据窗口的大小而变化）

我们没有你的用例或 JSFiddle，所以我不能给你确切的代码，但你需要确保你的 body 有 margin:0 和 padding:0 然后用 Firebug 或 Chrome Web 寻找其他 div开发工具。

如果您希望您的布局是流畅的但在某个点停止增长，那么您需要将 max-width:1000px （例如）应用于您的身体或您的一般容器/包装器元素。

# c# - Mvc 使用将链接到模型的数据预填充日期字段

> ID：15204979
> 
> 赞同：0
> 
> 时间：2013-03-04T15:25:35.573
> 
> 标签：c#, asp.net-mvc

我想创建一个表单，该表单将创建一个新项目，但它会预先填充一些数据，尤其是我想要成为的日期，`DateTime.Now`并最终将这些数据与模型链接起来，而不会让我的用户选择修改它。

到目前为止，这是我所做的：

```
@using (Html.BeginForm()) {
{
    var currentDate = DateTime.Now;
    Model.m_OrderDate = currentDate;
}   
@Html.ValidationSummary(true)
(...)
Order Date: @Html.DisplayFor(model => model.m_OrderDate)<br/>

<p>
    <input type="submit" value="Create" />
</p>
</fieldset> 
```

但是该应用程序在运行时在运行时崩溃了，`Model.m_OrderDate = currenDate`说`Object reference is not set to an instance of an object.`

我已经查看了许多解决方案，但还没有解决它。谁能帮我？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:51:35.823

在您的模型中：

```
private DateTime? orderDate = null;
public DateTime OrderDate
{
    get { return orderDate ?? DateTime.Now; }
    set { orderDate = value; }
} 
```

唯一的另一部分是确保将初始化模型传递给 GET 视图，即：

```
public ActionResult MyAwesomeView()
{
    return View(new MyModel());
} 
```

默认值将自动填充。

# linux - 如何找到某个目录的子目录，其中包含最多的文件

> ID：15204980
> 
> 赞同：2
> 
> 时间：2013-03-04T15:25:36.557
> 
> 标签：linux, csh, tcsh

我已经使用了`bash`，但是如何使用`tcsh`. 稍后我需要计算此子目录中所有文件的总大小，请帮助我。

例如：

someDirectory
--firstDirectory
----file11.txt
----file12.txt
----file13.txt
--secondDirectory
----file21.txt
--thirdDirectory
----file31.txt
----file32 .txt
----file33.txt
----file34.txt
----file35.txt

结果我想获得第三个目录的路径，因为它有大多数文件。

**更新**

Bash 解决方案

```
#!/bin/bash -f 

declare -i maxcount=0
declare -i count
declare maxdirectory

find someFolder -type d | while read DIR;
    do let count=`(ls $DIR | wc -w)`
    if(($count > $maxcount)); then 
        let maxcount=count 
        maxdirectory="$DIR"
    fi 
done 
```

**更新**

tcsh-解决方案

```
cd $1
foreach x(*)
    if(-d $x) then
    set count = `(ls $x -1 | wc -l)`
        if($count > $maxcount) then
            set directory = $x
            set maxcount = $count
        endif
    endif
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T09:46:59.077

您可以使用剪切：

```
find . | rev | cut -d "/" -f2- | rev | sort | uniq -c | sort -k1n,1 | tail -n1 
```

或 awk：

```
find . | awk -F "/" '{for(i=1;i<=NF-1;i++) printf $i"/"; printf "\n"}' | sort | uniq -c | sort -k1n,1 | tail -n1 
```

您可以获得的已识别目录中的文件大小：

```
du -s 
```

或者：

```
ls -lh | head -n1 
```

有人问了一个类似的问题，但不幸的是它被关闭了：[在Linux中，我如何找到具有最多子目录或文件的目录？](https://stackoverflow.com/questions/11001672/in-linux-how-to-find-directory-with-most-subdirectories-or-files)

如果您只想计算文件而不是目录，请添加 -type f 来查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:31:47.693

你可以这样做：

```
foreach f ( `find someFolder -type d` )
    echo `find $f -maxdepth 1 -type f | wc -w` $f >> tmp
end
set a = `sort -rn tmp | head -n1`
set num = $a[1]
set dir = $a[2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T12:53:36.493

计数器=-1；

因为我在`ls -ltr | grep ^d | awk '{ print $NF }'`

做

```
 count=`ls -l $i | grep ^- | wc -l`

    if [[ $count -gt $counter ]]; then
            counter=$count
            Directory=$i
    fi 
```

完毕

回声$目录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-30T18:57:08.503

从 Dust [4e1180e5](//github.com/bootandy/dust/commit/4e1180e5) (2020-08-30) 开始，您现在可以这样做：

```
-f, --filecount
Directory 'size' is number of child files/dirs not disk size 
```

示例输出：

```
PS C:\Users\Steven\AppData\Local> dust -f
577            ┌── Default
628          ┌─┴ User Data
629        ┌─┴ Edge
1,154    ┌─┴ Microsoft
1,901    ├── Packages
407      │     ┌── 41ad6w4a.default-release-4
493      │     │   ┌── entries
497      │     │ ┌─┴ cache2
573      │     ├─┴ 7eccqsn1.default-release-1-1597857941226
3,952    │   ┌─┴ Profiles
3,953    │ ┌─┴ Firefox
3,954    ├─┴ Mozilla
3,096    │       ┌── entries
3,100    │     ┌─┴ cache2
3,269    │   ┌─┴ 56uzf1ra.Sunday
10,341   │   │   ┌── entries
10,344   │   │ ┌─┴ cache2
10,428   │   ├─┴ 7nx7hnxa.68-edition-default
13,698   │ ┌─┴ Profiles
13,699   ├─┴ Waterfox
21,181 ┌─┴ . 
```

由于它刚刚发布，我必须使用以下命令自己构建它：

```
$env:RUSTFLAGS = '-C link-arg=-s'
cargo build --release 
```

# ruby-on-rails - 按最新创建的评论排序

> ID：15204984
> 
> 赞同：0
> 
> 时间：2013-03-04T15:25:48.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, comments

我创建的是我的主题表中的一个**“活动”**字段，我可以使用它来显示**活动主题**，它首先包含创建主题的时间，当有人评论时，它将使用 comment.created_at 时间并把它在主题表的活动字段中，就像任何其他论坛系统一样。

我在这里发现了类似的问题 [如何按最后评论的日期排序并按最后创建的日期排序？](https://stackoverflow.com/questions/9654662/how-to-order-by-the-date-of-the-last-comment-and-sort-by-last-created-otherwise)

但它不会对我有用，我不知道为什么它不会。而且我也不明白在这种情况下是否需要使用 counter_cache 。我为我的评论使用了多态关联，因此我不确定如何使用 counter_cache。它在我的主题表中工作正常，可以将 created_at 时间复制到活动字段。但是当我创建评论时它不会工作。

错误：

CommentsController#create 中的 NoMethodError

未定义的方法“主题”

**主题.rb**

```
class Topic < ActiveRecord::Base
  attr_accessible :body, :forum_id, :title

  before_create :init_sort_column

  belongs_to :user
  belongs_to :forum
  validates :forum_id, :body, :title, presence: true

  has_many :comments, :as => :commentable

  default_scope order: 'topics.created_at DESC'

  private
  def init_sort_column
    self.active = self.created_at || Time.now
  end
end 
```

**评论.rb**

```
class Comment < ActiveRecord::Base
  attr_accessible :body, :commentable_id, :commentable_type, :user_id

  belongs_to :user
  belongs_to :commentable, :polymorphic => true

  before_create :update_parent_sort_column

  private

  def update_parent_sort_column
    self.topic.active = self.created_at if self.topic
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:42:09.573

没有意识到您正在使用多态关联。使用以下内容：

```
def update_parent_sort_column
  commentable.active = created_at if commentable.is_a?(Topic)
  commentable.save!
end 
```

应该做的伎俩。

# sql - 使用 OPENROWSET 执行 sys.xp_readerrorlog

> ID：15204985
> 
> 赞同：1
> 
> 时间：2013-03-04T15:25:49.713
> 
> 标签：sql, tsql, permissions, sql-server-2008-r2, openrowset

以下成功运行：

```
EXEC sys.xp_readerrorlog 0 
```

然而，这不会：

```
SELECT * 
FROM OPENROWSET(
    'SQLNCLI', 
    'Server=.;Trusted_Connection=Yes;',
    'EXEC sys.xp_readerrorlog 0') 
```

我使用我的 Windows 帐户登录，并且我拥有`sysadmin`本地服务器上所有数据库的权限，包括系统数据库。

这是错误消息：

> 消息 7357，级别 16，状态 2，第 11 行
> 无法处理对象“EXEC sys.xp_readerrorlog 0”。链接服务器“(null)”的 OLE DB 提供程序“SQLNCLI10”指示该对象没有列或当前用户对该对象没有权限。

我检查了文件夹权限，**`C:\Windows\ServiceProfiles\LocalService\AppData`**以防万一`OPENROWSET`创建临时文件时出现问题，但本地管理员（我在组中）拥有完全控制权。

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:35:20.113

尝试这个：

```
SELECT * 
FROM OPENROWSET(
    'SQLNCLI', 
    'Server=.;Trusted_Connection=Yes;',
    'SET FMTONLY OFF;EXEC sys.xp_readerrorlog 0') 
```

基本上，它试图在运行程序之前推断结果的形状。

> 使用该设置选项意味着唯一可行的方法是执行该过程。

# maven - 具有重命名上下文文件的 Spring ROO 数据库逆向工程

> ID：15204988
> 
> 赞同：1
> 
> 时间：2013-03-04T15:25:53.790
> 
> 标签：maven, primefaces, eclipselink, reverse-engineering, spring-roo

我的要求很简单。我最近创建了一个 jsf-primefaces-spring-roo-eclipselink 多模块原型并将其分发给我的团队。启用 Spring ROO 后，我们可以更轻松地进行所有数据库逆向工程，并且一切顺利。

创建原型时，我使用模型层中的 applicationContext.xml 文件进行 ROO DB 逆向工程。然后我尝试将上下文文件的名称更改为 applicationContext-model.xml，因为我在 Web 层中使用了另一个上下文。现在重命名此上下文文件后，当我执行“数据库逆向工程师 --schema”时，当我在 roo shell 中选择自动完成时，我得到“无法获得连接”。此外，当我在 --schema 之后手动输入架构名称时，我收到此错误：

**文件 'C:\TestWorkspace\TT\TT-model\src\main\resources\META-INF\spring\applicationContext.xml' 不存在**

显然，ROO 似乎对上下文文件重命名不太满意。我可以知道如何告诉 ROO 使用新的上下文文件名来进行数据库逆向工程吗？

谢谢你的帮助。

问候

巴斯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:08:59.933

由于 Roo 想要路径 'src\main\resources\META-INF\spring\applicationContext.xml' 中的上下文文件，因此如果需要避免冲突，我通常会更改其他上下文文件的名称。

例如，尝试重命名 Web 层中的应用程序上下文文件。

# asp.net - 修改 web.config 以从代码中启用/禁用 HttpModule 的最简单方法

> ID：15204990
> 
> 赞同：0
> 
> 时间：2013-03-04T15:25:56.807
> 
> 标签：asp.net, web-config, httpmodule

我正在开发一个应用程序，它将使网站管理员能够启用/禁用 HttpModule，而无需实际打开和编辑 web.config 文件。我发现使用 System.Configuration 命名空间的 appSettings 节点很容易做到这一点，但它似乎不包括修改 system.web/httpModules 节点的方法。

除了简单地使用 XDocument/XElement，有人知道另一种方法吗？我已经看到了一些涉及一些应用程序启动或应用程序预启动事件的其他方式，但我不确定这对我来说是一个可行的解决方案，因为这是一个已经运行的网站的 HttpModule。我找到了 System.Web.Configuration.HttpModulesSection 类，但这似乎是只读的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:59:14.110

一旦 pre-app start 完成，模块列表是不可变的。IIS 要求列表是不可变的，因此我们无法在 ASP.NET 层中更改它。

您最好的做法是让模块始终注册，但如果它已被“禁用”，则使其方法无操作。您可能会发现将原始 IHttpModule 包装在辅助包装器 IHttpModule 中来完成此操作更容易。

# python - 在 Numpy 数组中查找多个值

> ID：15204991
> 
> 赞同：4
> 
> 时间：2013-03-04T15:25:57.630
> 
> 标签：python, numpy, pandas

`a`并且`b`是两个 Numpy 整数数组。它们是排序的，没有重复。`b`是 的子集`a`。我需要找到`a`每个元素的索引`b`。是否有一个有效的 Numpy 函数可以提供帮助，所以我可以避免 python 循环？

（实际上，数组是 of`pandas.DatetimeIndex`和 Numpy `datetime64`，但我想它不会改变答案。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T15:36:46.987

[`numpy.searchsorted()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html)可用于执行此操作：

```
In [15]: a = np.array([1, 2, 3, 5, 10, 20, 25])

In [16]: b = np.array([1, 5, 20, 25])

In [17]: a.searchsorted(b)
Out[17]: array([0, 3, 5, 6]) 
```

据我了解，它不需要`b`排序，并且在`a`. 这意味着它是 O(n logn) 而不是 O(n)。

如果这还不够好，总有[Cython](http://www.cython.org/)。:-)

# windows-phone-7 - Facebook 签到和 Windows Phone

> ID：15204994
> 
> 赞同：0
> 
> 时间：2013-03-04T15:26:05.097
> 
> 标签：windows-phone-7, facebook-javascript-sdk, checkin

我有一个脚本，基本上让用户能够在单击它时签入到特定位置。单击它后，它每次都会将它们检查到相同的位置。

在桌面上这工作正常，我怀疑它也适用于 Android。我有一个 WP，因此显然我想让它在那里工作。此功能几乎将专门用于移动设备，因此使其跨设备工作很重要。

现在，到实际问题。单击 WP 上的签入按钮后，它会加载一个空白页面并挂在那里。虽然这可能是它可能已经签入的信号，但当我看起来它没有。所以它挂在那里，什么也不做。

这是它所挂的 URL：[https ://m.facebook.com/dialog/oauth?display=touch&domain=www.staffscuesociety.com&scope=publish_stream&api_key=API_KEY&app_id=APP_ID&locale=en_US&sdk=joey&access_token=ACCESS_TOKEN&client_id=CLIENT_ID&redirect_uri=http%3A% 2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D18%23cb%3Df35fef827217048%26origin%3Dhttp%253A%252F%252Fwww.staffscuesociety.com%252Ff166245837c3b6e%26ociedomain%3Dwww.stafflations%26domain%3Dwww.stafflations% 3Dopener%26frame%3Df398a7113310e64&origin=2&response_type=token%2Csigned_request](https://m.facebook.com/dialog/oauth?display=touch&domain=www.staffscuesociety.com&scope=publish_stream&api_key=API_KEY&app_id=APP_ID&locale=en_US&sdk=joey&access_token=ACCESS_TOKEN&client_id=CLIENT_ID&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D18%23cb%3Df35fef827217048%26origin%3Dhttp%253A%252F%252Fwww.staffscuesociety.com%252Ff166245837c3b6e%26domain%3Dwww.staffscuesociety.com%26relation%3Dopener%26frame%3Df398a7113310e64&origin=2&response_type=token%2Csigned_request)

这是代码：

```
var button;

        (function(d){
          var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
          if (d.getElementById(id)) { return; }
          js = d.createElement('script'); js.id = id; js.async = true;
          js.src = "//connect.facebook.net/en_US/all.js";
          ref.parentNode.insertBefore(js, ref);
        }(document));

        window.fbAsyncInit = function() {
          FB.init({
            appId      : '260445377421174',
            channelUrl : '//www.staffscuesociety.com/checkin/channel.html'
          });

          button = document.getElementById('checkinWidget');
          if (!button) return;
          if (!getPost()) {
            allowCheckin();
          } else {
            allowUndo();
          }
        };

        function setPost(value) {
          var d = new Date();
          d.setDate(d.getTime() + (10 * 60 * 1000));
          document.cookie = 'post=' + escape(value) + ';expires=' + d.toUTCString();
        }

        function getPost() {
          return getCookie('post');
        }

        function getCookie(key) {
          currentcookie = document.cookie;
          if (currentcookie.length > 0) {
            firstidx = currentcookie.indexOf(key + '=');
            if (firstidx != -1) {
              firstidx = firstidx + key.length + 1;
              lastidx = currentcookie.indexOf(';', firstidx);
              if (lastidx == -1) {
                lastidx = currentcookie.length;
              }
              return unescape(currentcookie.substring(firstidx, lastidx));
            }
          }
          return '';
        }

        function checkin() {
          allowNothing();
          FB.login(function(response) {
            if (response.authResponse) {
              FB.api('/me/permissions', function (permissions) {
                if (permissions.data.length > 0 && permissions.data[0].publish_stream) {
                  FB.api('/me/feed', 'post', { message: null, place: '117072761683514' }, function(post) {
                    if (!post || post.error) {
                      showError();
                    } else {
                      setPost(post.id);
                      allowUndo();
                    }
                  });
                } else {
                  allowCheckin();
                }
              });
            } else {
              allowCheckin();
            }
          }, {scope : 'publish_stream'});
        }

        function undo() {
          allowNothing();
          FB.api('/' + getPost(), 'delete', function(response) {
            setPost('');
            allowCheckin();
          });
        }

        function allowNothing() {
          button.onclick = function() { };
          button.className = 'pressed';
        }

        function allowCheckin() {
          button.onclick = checkin;
          button.className = '';
        }

        function allowUndo() {
          button.onclick = undo;
          button.className = 'pressed tick';
        }

        function showError() {
          button.className = 'pressed error';
        }

    } 
```

# c# - 转换表达式 > 到表达式 >

> ID：15204999
> 
> 赞同：3
> 
> 时间：2013-03-04T15:26:14.753
> 
> 标签：c#, generics, lambda, expression-trees, expression

ASP.NET MVC 中的一个方法需要一个表达式`Expression<Func<TModel,Boolean>>`（在屏幕上显示一个复选框 HTML 控件），但我的成员是`Boolean?`.

在我们的例子中，对于这种特定情况，`null`与 相同`false`，必须显示一个未选中的 HTML 复选框。

我如何转换`Expression<Func<TModel,Boolean?>>`为`Expression<Func<TModel,Boolean>>`添加类似`value = nullableValue.HasValue && nullableValue.Value`的方式？

请记住，结果`Expression`必须仍然是 a `MemberExpression`，这让我想知道这是否可能。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:39:40.630

如果您正在访问一个值属性（例如`int`,`bool`等），您将不会获得`MemberExpression`，而是`UnaryExpression`因为底层`MemberExpression`被包装在`UnaryExpression`负责执行`Convert`操作的操作中。

这似乎是由于值类型不是引用类型并且不接受`null`值这一事实造成的。

如果您愿意接受，`UnaryExpression`可以通过以下方式进行：

```
Expression<Func<TModel, Boolean?>> source = ...

var resultBody = Expression.Convert(source.Body, typeof(Boolean));    
var result = Expression.Lambda<Func<TModel, Boolean>>(resultBody, source.Parameters); 
```

一个你可能会觉得有帮助的 stackoverflow[问题。](https://stackoverflow.com/questions/12975373/expression-for-type-members-results-in-different-expressions-memberexpression)