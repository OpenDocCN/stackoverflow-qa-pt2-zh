# StackOverflow 问答 13777000-13777999

# php - 在用户到达页面底部之前，无限滚动发布 MySQL 中的所有数据

> ID：13777001
> 
> 赞同：0
> 
> 时间：2012-12-08T11:24:44.557
> 
> 标签：php, javascript, mysql, infinite-scroll

我的 PHP 从 MySQL 抓取数据并将其显示在我的 index.php 的容器 div 中，没有问题。但是，数据会一个接一个地显示（不同的行），而不是使用同一行中的可用空间。所以我把float改成了float:left; **但现在它只是一次性加载所有内容，而不会到达页面末尾**。

我相信我的问题出在**JavaScript**中，因为在浮点数发生变化**之前；**原来是每行一项，**现在**是每行三项。并且，JS**使用 id 来计算何时调用 PHP 加载脚本**。

这是在 body 标记中用作整体容器的 div 的 index.php 片段。第二个 div 用于无限滚动功能，当用户到达屏幕末尾时加载更多数据。

```
<div id="postedComments">

<?php require_once 'jquery-masterLoader.php' ;  ?>

</div>
<div id="loadMoreComments" style="display:none;" > <center>test for hidden field            </center>
</div> 
```

这是 PHP jquery-masterLoader.php，它是控制加载脚本的两个 PHP 文件之一。另一个对于 show 和 tell 来说不是必需的，因为它仅在用户到达屏幕末尾时才被调用。

```
<?php
if ( strpos(strtolower($_SERVER['SCRIPT_NAME']),strtolower(basename(__FILE__))) ) {
header("Location: index.php");
die("Denny access");
}
    error_reporting(0) ;
    set_exception_handler('exception_handler') ;
    $config = parse_ini_file("core/config/my.ini") ;
    $db=new mysqli($config['dbLocation'] , $config['dbUser'] , $config['dbPassword'] ,                 
    $config['dbName']);
    if(mysqli_connect_error()) {
     throw new Exception("<b>Could not connect to database</b>") ;
    }
    if (!$result = $db->query("SELECT * FROM world_country ORDER BY id ASC LIMIT          
    0,30")) {
throw new Exception("<b>Could not read data from the table </b>") ;
    }

    while ($data = $result->fetch_object()) {
    $id = $data->id;
    $name = $data->Name ;
    $continent = $data->Continent;
    $population = $data->Population ;
    echo "
    <div class='postedComment' id=\"$data-                 
    >id \">

    <b>Country : </b>$name <br /> 
    <b>Continent : </b>$continent<br/>
    <b>Population : </b>$population 
    <i style=\"font-size:small;color:blue\">Index : $id</i>
    <hr /> 

    </div> 
    " ;

    } 
    /* close connection */
    $db->close();
    function exception_handler($exception) {
      echo "Exception cached : " , $exception->getMessage(), "";
    } 
```

很抱歉将样式与 PHP 混合在一起，这是一项正在进行的工作。

这是CSS规则

```
#postedComments {
width: 100%;
display: block;
}

.postedComment {
width: 33%;
float: left;
min-width: 200px;           
min-height: 80px;           
}

 #loadMoreComments {
display:none;
}

html, body { 
height: ; 
width: 100%; 
margin: 0; 
padding: 0;
}

#body {
width: 60%; 
margin: 1% auto;
}

 /* Resets */

ul {
padding:0;
margin:0 0 20px 0;
list-style:none;
}

h1, h2 {
padding:0;
margin:0 0 20px 0;
font-weight:normal;
}

p {
padding:0;
margin:0 0 20px 0;
}

a:link, a:visited {
text-decoration:underline;
color:#000;
}

a:hover {
text-decoration:none;
}

ul li {
padding:5px 0;
}

ul li input[type="text"], ul li input[type="password"] {
width:200px;
} 
```

这里也是调用脚本的 JavaScript。
(custom_jquery-debug.js)

```
 $(document).ready(function() {
    $("#postedComments").append("<p id='last'></p>");
    //$("#postedComments").append( "<div id='last'></div>" );
    console.log("Document Ready ------------------------");
    if ($("#last").length) {
        position = $("#last").offset();
        console.log("Initialization of last_DIV succeeded and it's values are ....Top-value is :"+
                    Math.floor(position.top) + " ---- Left-value is : "+
                    Math.floor(position.left));

    }
    doMouseWheel = 1;
    $(window).scroll(function() {
        if (!doMouseWheel) {
            return;
        }
        var distanceTop = $('#last').offset().top - $(window).height();
        console.log("Mouse scroll , and The DIV  last has an offset-top value of :"+
                    Math.floor($("#last").offset().top) + "----Window height is :"+
                    Math.floor($(window).height()) + "---- Last's offset minus window height is :"+
                    Math.floor(distanceTop));
        if ($(window).scrollTop() > distanceTop) {
            console.log("End of Window Reached >>>>>>>>>>>>>>>>>>>>>>>>>>");
            console.log("Show Div loadMoreComments and Class .postedComments.last has the id of  :"+
                        $(".postedComment:last").attr('id'));
            doMouseWheel = 0;
            $('div#loadMoreComments').show();
            $.ajax({
                dataType: "html",
                url: "jquery-loadMoreComments.php?lastComment=" + $(".postedComment:last").attr('id'),
                success: function(html) {
                    doMouseWheel = 1;
                    if (html) {
                        $("#postedComments").append(html);
                        console.log("Append html , sumarize .... first id has nr : " + 
                                    $(".postedComment:first").attr('id') + 
                                    " --- last id has nr :" + 
                                    $(".postedComment:last").attr('id'));
                        position = $("#last").offset();
                        console.log("New values of last_DIV  from IF_html are , Top:"+
                                    Math.floor(position.top) + " --- left :" + 
                                    Math.floor(position.left));
                        $("#last").remove();
                        if ($("#last").length == 0) {
                            console.log(">>>>>>>>>>>>>>>The last_DIV is removed from stage>>>>>>>>>>");
                        }
                        $("#postedComments").append("<p id='last'></p>");
                        if ($("#last").length) {
                            position = $("#last").offset();
                            console.log(">>>>>>>>>>>>>>>A new last_DIV is appended and it's values are , Top :" +
                                        Math.floor(position.top) + "  ---- Left :" + 
                                        Math.floor(position.left));
                        }
                        $('div#loadMoreComments').hide();
                    } else {
                        console.log("LoadMoreComments is replaced with a custom message");
                        $('div#loadMoreComments').replaceWith("<center><h1 style='color:red'>End of countries !!!!!!!</h1></center>");
                    }
                }
            });
        }
    });
});​ 
```

第二个 JS 脚本 (custom_jquery.js)

```
$(document).ready(function() {
    $("#postedComments").append("<p id='last'></p>");
    //console.log("Document Ready");
    doMouseWheel = 1;
    $(window).scroll(function() {
        //console.log("Window Scroll ----");
        if (!doMouseWheel) {
            return;
        };
        var distanceTop = $('#last').offset().top - $(window).height();
        if ($(window).scrollTop() > distanceTop) {
            //console.log("Window distanceTop to scrollTop Start");
            doMouseWheel = 0;
            $('div#loadMoreComments').show();
            //console.log("Another window to the end !!!! "+$(".postedComment: last ").attr('id'));    
            $.ajax({
                dataType: "html",
                url: "jquery-loadMoreComments.php?lastComment=" + 
                     $(".postedComment : last ").attr('id'),
                success: function(html) {
                    doMouseWheel = 1;
                    if (html) {
                        $("#postedComments ").append(html);
                        //console.log("Append html---------" +$(".postedComment: first ").attr('id'));
                        //console.log("Append html---------" +$(".postedComment: last ").attr('id'));
$("#last ").remove();
$("#postedComments ").append( " < p id = 'last' > < /p>" );
$('div#loadMoreComments').hide();
}else{      
$('div#loadMoreComments').replaceWith("<center><h1 style='color:red'>End of countries !!!!!!!</h1 > < /center>");
 // Added on Ver.0.4
                        //Disable Ajax when result from PHP-script is empty (no more DB-results )
                        doMouseWheel = 0;
                    }
                }
            });
        }
    });
});​ 
```

我应该进行哪些更改才能恢复初始功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:23:09.703

在您的 php 脚本中，这里没有限制跳过的变量，看起来您应该从 $_GET['lastComment'] 设置它：

```
$last=isset($_GET['lastComment']) ? $_GET['lastComment']*1 : 0;
if ($stmt = mysqli_prepare($db, "SELECT * FROM world_country ORDER BY id ASC LIMIT ?,30") {
  $stmt->bind_param('i',$last);
  $stmt->execute;
  /* only php >= 5.3 */
  if (!$result = $stmt->get_result()) {
     throw new Exception("<b>Could not read data from the table </b>") ;}
} 
```

这将从 ajax GET 请求中获取参数并在 mysql 查询中使用它。

你应该用上面的代码替换下面的代码

```
 if (!$result = $db->query("SELECT * FROM world_country ORDER BY id ASC LIMIT  0,30")) {
throw new Exception("<b>Could not read data from the table </b>") ;
    } 
```

# xaml - 数据模板和绑定

> ID：13777008
> 
> 赞同：1
> 
> 时间：2012-12-08T11:25:56.520
> 
> 标签：xaml

如果从 dataTemplate 到 listBoxItem 来显示标签中的选定项目，我如何使用 listBox 中的绑定

这是我的代码：

```
<Window.Resources>
    <XmlDataProvider x:Key="data">
        <x:XData>
            <colors xmlns="">
                <color name="yellow"/>
                <color name="red"/>
                <color name="blue"/>
                <color name="black"/>
                <color name="pink"/>
                <color name="brown"/>
                </colors>
        </x:XData>
    </XmlDataProvider>

    <DataTemplate x:Key="temp">
        <StackPanel Orientation="Vertical">
            <Label Content="{Binding XPath=@name}"/>
        </StackPanel>
    </DataTemplate>

</Window.Resources>
<StackPanel Orientation="Vertical">

    <ListBox Name="lblColor" ItemsSource="{Binding Source={StaticResource data}, XPath=colors/color}"
             ItemTemplate="{StaticResource temp}" Background="Transparent" SelectedIndex="0"></ListBox>
    <Label Content="your choice is :"></Label>

    <Label ></Label>

</StackPanel> 
```

我想在最后一个标签的内容中显示所选项目...感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:55:37.843

你可以这样做：

```
 <ListBox x:Name="lblColor" ItemsSource="{Binding Source={StaticResource data}, XPath=colors/color}"
         ItemTemplate="{StaticResource temp}" Background="Transparent" SelectedIndex="0" SelectedValuePath="@name" ></ListBox>
    <Label Content="your choice is :"></Label>

    <Label Content="{Binding ElementName=lblColor,Path=SelectedValue}"   /> 
```

# html - 在导航栏中对齐 twitter 小部件

> ID：13777010
> 
> 赞同：0
> 
> 时间：2012-12-08T11:26:03.667
> 
> 标签：html, css, twitter-bootstrap, nav

我正在构建以下项目网站[http://hpsfo.bitbucket.org](http://hpsfo.bitbucket.org)并希望将 twitter 小部件添加为导航栏的一部分，以满足公告、项目更新、“新功能”等的需求。同时添加twitter 小部件我遇到了两个问题。

第一个问题是，即使我像这样内联样式，我也找不到正确垂直对齐小部件的方法，我该`<li style="vertical-align: middle;">`怎么做才能获得正确的中间垂直对齐？第二个问题是，在加载时，样式显示不正确，然后它会即时“加载”正确的按钮样式，您可以通过刷新页面看到这种不需要的效果。我怎样才能避免这种情况？

更新：第二个问题似乎与从 twitter 服务器远程加载 js 文件有关。我想我可以通过简单地将文件内联到我的项目网站来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:49:23.663

我认为你应该把

```
<li style="margin-top:10px;"> 
```

对于性能问题，将尽可能多的 JS 放在页脚，以便 JS 在重要内容之后加载。

# spring - Spring Data Neo4j 示例程序错误

> ID：13777012
> 
> 赞同：0
> 
> 时间：2012-12-08T11:26:12.433
> 
> 标签：spring, neo4j, spring-data-neo4j

我正在创建一个小应用程序来了解 Neo4j 和 Spring Data Neo4j。但我总是得到 NullPointerException 。因此，我使用了 Spring Data Neo4j 最[简单的示例](https://github.com/SpringSource/spring-data-neo4j/tree/master/spring-data-neo4j-examples/hello-worlds)之一，并使用 JUnit 中的 main() 更新了测试文件。我的测试文件如下：

```
package com.spring.nosql.neo4j.worldTest;

import java.util.Collection;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.graph.neo4j.template.Neo4jTemplate;
import org.springframework.test.annotation.Rollback;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.transaction.BeforeTransaction;
import org.springframework.transaction.annotation.Transactional;

/**
 * @author srahul07
 * 
 */
@ContextConfiguration(locations = "classpath:neo4jBeans.xml")
@Transactional
public class Main {

    @Autowired
    private GalaxyService galaxyService;

    @Autowired
    private Neo4jTemplate template;

    @Rollback(false)
    @BeforeTransaction
    public void shouldAllowDirectWorldCreation() {
        // assertEquals(0, galaxyService.getNumberOfWorlds());
        System.out.println("Number of Worlds: "
                + galaxyService.getNumberOfWorlds());
        World myWorld = galaxyService.createWorld("mine", 0);
        System.out.println("Number of Worlds: "
                + galaxyService.getNumberOfWorlds());
        // assertEquals(1, galaxyService.getNumberOfWorlds());

        Iterable<World> foundWorlds = galaxyService.getAllWorlds();
        World mine = foundWorlds.iterator().next();
        System.out.println("Number of Worlds: " + myWorld.getName() + " Name: "
                + mine.getName());
        // assertEquals(myWorld.getName(), mine.getName());
    }

    public void shouldHaveCorrectNumberOfWorlds() {
        galaxyService.makeSomeWorlds();
        System.out.println("Number of Worlds: "
                + galaxyService.getNumberOfWorlds());
        // assertEquals(13, galaxyService.getNumberOfWorlds());
    }

    public void shouldFindWorldsById() {
        galaxyService.makeSomeWorlds();

        for (World world : galaxyService.getAllWorlds()) {
            World foundWorld = galaxyService.findWorldById(world.getId());
            System.out.println("Found World: " + foundWorld);
            // assertNotNull(foundWorld);
        }
    }

    public void shouldFindWorldsByName() {
        galaxyService.makeSomeWorlds();

        for (World world : galaxyService.getAllWorlds()) {
            World foundWorld = galaxyService.findWorldByName(world.getName());
            System.out.println("Found Worlds: " + foundWorld);
            // assertNotNull(foundWorld);
        }
    }

    public void shouldReachMarsFromEarth() {
        galaxyService.makeSomeWorlds();

        World earth = galaxyService.findWorldByName("Earth");
        World mars = galaxyService.findWorldByName("Mars");

        System.out.println("Mars Rechable from Earth: "
                + mars.canBeReachedFrom(earth));
        System.out.println("Earth Reachable from Mars: "
                + earth.canBeReachedFrom(mars));
        // assertTrue(mars.canBeReachedFrom(earth));
        // assertTrue(earth.canBeReachedFrom(mars));
    }

    public void shouldFindAllWorlds() {
        Collection<World> madeWorlds = galaxyService.makeSomeWorlds();
        Iterable<World> foundWorlds = galaxyService.getAllWorlds();

        int countOfFoundWorlds = 0;
        for (World foundWorld : foundWorlds) {
            System.out.println("Worlds Contains: "
                    + madeWorlds.contains(foundWorld));
            // assertTrue(madeWorlds.contains(foundWorld));
            countOfFoundWorlds++;
        }

        System.out.println("World's Size: " + madeWorlds.size()
                + " Count of Found Worlds: " + countOfFoundWorlds);
        // assertEquals(madeWorlds.size(), countOfFoundWorlds);
    }

    @SuppressWarnings("unchecked")
    public void shouldFindWorldsWith1Moon() {
        galaxyService.makeSomeWorlds();

        for (World worldWithOneMoon : galaxyService.findAllByNumberOfMoons(1)) {

            System.out.println("World With One Moon: "
                    + worldWithOneMoon.getName());
            System.out.println("World With One Moon is Earth?: "
                    + worldWithOneMoon.getName().contains("Earth"));
            System.out.println("World With One Moon is Earth?: "
                    + worldWithOneMoon.getName().contains("Midgard"));

            /*
             * assertThat( worldWithOneMoon.getName(),
             * is(anyOf(containsString("Earth"), containsString("Midgard"))));
             */
        }
    }

    public void shouldNotFindKrypton() {
        galaxyService.makeSomeWorlds();
        World krypton = galaxyService.findWorldByName("Krypton");
        System.out.println("World is Krypton: " + krypton.getName().isEmpty());
        // assertNull(krypton);
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        try {
            Main mainTest = new Main();

            mainTest.shouldHaveCorrectNumberOfWorlds();

            mainTest.shouldAllowDirectWorldCreation();

            mainTest.shouldFindAllWorlds();

            mainTest.shouldFindWorldsById();

            mainTest.shouldFindWorldsByName();

            mainTest.shouldFindWorldsWith1Moon();

            mainTest.shouldNotFindKrypton();

            mainTest.shouldReachMarsFromEarth();

        } catch (Exception ae) {
            ae.printStackTrace();
        }

    }

} 
```

我的 Spring 上下文配置如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/data/neo4j
        http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd">

    <context:spring-configured/>
    <context:annotation-config/>
    <context:component-scan base-package="com.spring.nosql.neo4j.worldTest" />

    <neo4j:config storeDirectory="target/neo4j-db"/>
    <neo4j:repositories base-package="com.spring.nosql.neo4j.worldTest"/>
</beans> 
```

每当我运行测试代码时，都会收到以下错误：

```
java.lang.NullPointerException
    at com.spring.nosql.neo4j.worldTest.Main.shouldHaveCorrectNumberOfWorlds(Main.java:48)
    at com.spring.nosql.neo4j.worldTest.Main.main(Main.java:141) 
```

我的配置中有什么遗漏吗？或者这里有什么额外需要的吗？据我了解，Neo4j 将在“target/neo4j-db”中创建图形数据库。另外，由于我的机器是 Ubuntu，我已经在我的机器上安装了 Neo4j 的 debian 包。所以我也尝试通过使用 REST API 来使用它。因此，为此我对我的 spring 上下文文件进行了以下配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/data/neo4j
        http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd">

    <context:spring-configured/>
    <context:annotation-config/>
    <context:component-scan base-package="com.spring.nosql.neo4j.worldTest" />
<neo4j:repositories base-package="com.spring.nosql.neo4j.worldTest"/>

    <neo4j:config graphDatabaseService="graphDatabaseService"/> 
    <bean id="graphDatabaseService" 
      class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">
      <constructor-arg index="0" value="http://localhost:7474/db/data" />
      <constructor-arg index="1" value="" />
      <constructor-arg index="2" value="" />
     </bean> 
```

但我仍然得到同样的例外。

仅供参考：我在 Eclipse 的构建路径中包含了 Spring、Spring Data Neo4j 和 Neo4j 库。

编辑：

好吧，由于对此没有回应，我尝试了与 JUnit 测试用例相同的示例，如此处示例中提供[的](https://github.com/SpringSource/spring-data-neo4j/tree/master/spring-data-neo4j-examples/hello-worlds)：

在我的 JUnit 测试用例中，每种方法都有以下错误：

```
java.lang.NoClassDefFoundError: org/neo4j/cypherdsl/grammar/Execute
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getDeclaredMethods(Class.java:1808)
    at org.springframework.util.ReflectionUtils.findMethod(ReflectionUtils.java:154)
    at org.springframework.util.ClassUtils.getMostSpecificMethod(ClassUtils.java:730)
    at org.springframework.data.repository.core.support.TransactionalRepositoryProxyPostProcessor$AbstractFallbackTransactionAttributeSource.computeTransactionAttribute(TransactionalRepositoryProxyPostProcessor.java:326)
    at org.springframework.data.repository.core.support.TransactionalRepositoryProxyPostProcessor$AbstractFallbackTransactionAttributeSource.getTransactionAttribute(TransactionalRepositoryProxyPostProcessor.java:282)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:99)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy31.count(Unknown Source)
    at com.spring.nosql.neo4j.worldTest.GalaxyService.getNumberOfWorlds(GalaxyService.java:16)
    at com.spring.nosql.neo4j.worldTest.GalaxyServiceTest.shouldAllowDirectWorldCreation(GalaxyServiceTest.java:40)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: org.neo4j.cypherdsl.grammar.Execute
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 43 more 
```

这表示未找到或丢失名为：org/neo4j/cypherdsl/grammar/Execute 的类。

这确实意味着我缺少其中一个库，但 Neo4j 库显示了名为`neo4j-cypher-1.8.jar`. 但在这我还没有找到`cypherdsl`。

编辑2：

好吧，最后它与 JUnit 一起工作，但不适用于`public static void main()` `[psvm]`. 我错过了一个`cypherdsl`可以从[这里](http://m2.neo4j.org/content/repositories/releases/org/neo4j/neo4j-cypher-dsl/1.8/neo4j-cypher-dsl-1.8.jar)下载的库。但是为什么我去的时候它不起作用`psvm`？

# css - 子 div 超出父 div

> ID：13777013
> 
> 赞同：6
> 
> 时间：2012-12-08T11:26:14.337
> 
> 标签：css, html, css-float, overflow

目前我正在使用 CSS 和 HTML 等设计一个网站。但是我在那里遇到了一个问题：当我向孩子添加浮动时，我的孩子 div 超出了父 div。该网站位于[我的网页设计中](http://7sisters.in/test/mintbite/)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-08T11:29:17.323

更加详细一些。网站的问题在哪里？

尝试将其添加到 css 中，以便父级知道子元素的大小：

```
#parent{
   overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T11:33:11.127

您需要在浮动后清除。

尝试添加这个 css：

**CSS**

```
.container:after {
    content: "";
    display: table;
    clear: both;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-08T11:39:09.213

测试以下 CSS

```
.parentDiv {
    float: left,
    width: 200px,
    height: 30px 
```

}

```
.childDiv{
    float: left,
    width: 100px,
} 
```

子分区应该包含在父分区中，您可以在两个元素上使用边框来确保。

# html - 在 Chrome 中使用 img 和 file://

> ID：13777014
> 
> 赞同：2
> 
> 时间：2012-12-08T11:26:15.103
> 
> 标签：html, image

我在文件服务器问题上有一个 img。

我的图像存储在我们环境中的服务器上。它必须是这台服务器，而且这台服务器上没有网络服务器。我需要从 smb 路径访问文件，例如：

```
\\server\storage\file.png 
```

当我制作标签时，这在 IE 中运行良好：

```
<img style="width: 100%;" src="file:////server/storage/file.png"/> 
```

但是，这在 chrome 中不起作用......图像只是不显示。

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:22:02.530

Seems this is issue with Chrome, check this

[http://code.google.com/p/chromium/issues/detail?id=40415](http://code.google.com/p/chromium/issues/detail?id=40415)

# php - 将表、tr、td 值发送到 mysql，包括 datepicker

> ID：13777015
> 
> 赞同：0
> 
> 时间：2012-12-08T11:26:19.130
> 
> 标签：php, mysql, ajax, html-table

我来到了一个地方，我猜，我被卡住了。

逻辑是设置：

1.  频率
2.  首次扫描日期

使用以下代码完成：

```
<script>
  $(function() 
    {
     $('.datepicker').datepicker({ 
        dateFormat: 'yy-mm-dd',
        onSelect: function(dateText, inst) {
                var days = $("#scan_freq").val() * 7;
                var newDate = addDaysDate(dateText, days)
                $("#next_scan_date").val(newDate);
        }
    });
    }); 
</script>

<script>
function addDaysDate(dateText, days) {
    var curDate = new Date(Date.parse(dateText));
    var nextDate = new Date();
    nextDate.setDate(curDate.getDate() + days);
    var curDay = nextDate.getDate();
    var curMonth = nextDate.getMonth() + 1;
    var curYear = nextDate.getFullYear();
    return curYear + "-" + curMonth + "-" + curDay;
}
</script> 
```

我遇到的问题：

1.  当我为列表中的第二个元素（如 HP-UX）设置频率和第一次扫描日期时，它会更改我的 AIX 下一次扫描日期。与从表中获取的其余元素相同。就像我会为 Linux 进行更改一样，它将为我设置 AIX 的下一个扫描日期。

2.  我需要为保存按钮添加功能，当我点击保存按钮时，它将针对操作系统进行迭代并将其存储在 mysql 中。与中间件和他们的保存按钮相同。

有谁能帮忙吗？非常赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:07:51.027

我第一次回答问题，所以考虑到这一点；）

**编辑以使示例更清晰**

如果我没看错，看起来输出表的循环为所有字段提供了相同的 id

```
<?php
$hc = mysql_query("SELECT * FROM platforms WHERE id_acc_ref='1' AND platform_type='os' ORDER BY platform_name ASC");
while($row = mysql_fetch_array($hc))
  {
  echo "<tr>";
  /* snipped */
  echo "<td><input id='first_scan_date' type='text' class='datepicker' value='".$row['first_scan_date']."' placeholder='0000-00-00' /></td>";
  /* snipped */
  echo "</tr>";
  }
?> 
```

会产生这样的HTML

```
 <tr>
  <td><input id='first_scan_date' type='text' class='datepicker' value='THE 1st DB VALUE HERE' placeholder='0000-00-00' /></td>";
  </tr>   
  <tr>
  <td><input id='first_scan_date' type='text' class='datepicker' value='THE 2nd DB VALUE HERE' placeholder='0000-00-00' /></td>";
  </tr>   
  <tr>
  <td><input id='first_scan_date' type='text' class='datepicker' value='THE 3rd DB VALUE HERE' placeholder='0000-00-00' /></td>";
  </tr> 
```

注意每个输入字段如何具有相同的 id，id 在页面上应该是唯一的

根据给定的信息，我会说 datepicker 插件在内部使用字段的 id，因此它使用第一次出现的 id 名称设置字段的值；你排除了这个吗？我会给每个字段一个唯一的 id，它可能会解决 datepicker 问题，**编辑**如果你发布代码，我会知道更多，或者链接到你用于 datepicker 的库

使用保存按钮功能，您是否可以只使用表单并将其提交给 php 处理脚本。我倾向于使用数组语法给出字段名称，例如：

```
<input type='text' name='scan_freq[]' value='...' /> 
```

然后它将通过您的 _POST 作为数组

这有帮助吗？

- 更多细节

修正循环 - 添加唯一 ID 的一种方法

```
<?php
$hc = mysql_query("SELECT * FROM platforms WHERE id_acc_ref='1' AND platform_type='os' ORDER BY platform_name ASC");

$counter = 0;
while($row = mysql_fetch_array($hc))
  {
  echo "<tr>";
  /* snipped */
  echo "<td><input id='first_scan_date_".$counter ."' type='text' class='datepicker' value='".$row['first_scan_date']."' placeholder='0000-00-00' /></td>";
  /* snipped */
  echo "</tr>";
  $counter++;
  }
?> 
```

如果这没有帮助，那么发布生成源的[http://jsfiddle.net/](http://jsfiddle.net/)（例如右键单击并在浏览器中查看源）将是前进的方式

# mysql - 使用 UNION 和 GROUP BY 时选择两个 ID 列

> ID：13777016
> 
> 赞同：0
> 
> 时间：2012-12-08T11:26:26.560
> 
> 标签：mysql

我对这个查询感到绝望。我有两个表 table1 和 table2，表是相同的，但它们有不同的数据。我正在尝试按列代码和制造商删除重复项。为此，我需要来自 table1 的最终结果 ID 来自 table2 的 ID 以及列代码和制造商

```
 SELECT * FROM ( 
      SELECT id,code,manufacturer FROM table1 WHERE manufacturer = 1 
      UNION SELECT id,code,manufacturer FROM table2 WHERE manufacturer = 1
 ) AS t GROUP BY code HAVING COUNT(*) > 1 
```

但结果我只从 table1 中得到了值。没关系，但我也只需要从 table2 获取 id。请任何人都可以给我一些提示如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:42:19.457

你有两个基本问题：

**问题1：**
你`UNION`在应该使用的时候使用`UNION ALL`，因为`UNION`删除了重复项！

**问题 2：**
这不是解决问题的正确方法。您应该使用简单的*join*，而不是 union 。
试试这个：

```
 SELECT
     t1.id as table1_id,
     t2.id as table2_id,
     t1.code,
     t1.manufacturer
 FROM table1 t1
 JOIN table2 t2 
     ON t2.code = t1.code
     AND t2.manufacturer = t1.manufacturer
 WHERE manufacturer = 1 -- this WHERE clause is optional 
```

您对该`WHERE`子句的使用有点奇怪 - 考虑删除它以获取所有制造商的所有重复项。

# php - 在 debian 机器中使用 php5-fpm 和 nginx

> ID：13777017
> 
> 赞同：0
> 
> 时间：2012-12-08T11:26:36.733
> 
> 标签：php, web-applications, deployment, nginx, webserver

我正在尝试设置 nginx 服务器以在 debian 中运行 php 应用程序。我遵循[了本教程](http://kevin.deldycke.com/2011/06/nginx-php-fpm-mysql-debian-squeeze-server/)。大多数似乎都一样。我最近的配置是基于上面的链接。当我尝试运行这个 php 脚本时，

```
<?php
    phpinfo();  
?> 
```

我在浏览器上得到相同的输出而不是 php info 结果。请有人帮我弄清楚我哪里出错了。

注意：我的错误日志很干净，仅包含有关 nginx 服务器启动的详细信息。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:35:20.577

您可能希望确保*php5-fpm*正在侦听您期望它使用的正确端口。做一个*netstat*列表，看看 php-fpm 是否正在监听端口 9000：

```
netstat -tulpn 
```

您应该会看到如下所示的一行：

```
tcp   0  0 127.0.0.1:9000  0.0.0.0:*  LISTEN   2390/php-fpm.conf 
```

如果没有，请检查您的 www.conf 文件（在*/etc/php5/fpm/pool.d/www.conf*中）并查找*“listen = ...”*行并确保它显示：

```
listen = 127.0.0.1:9000 
```

我已经看到 php5-fpm 的默认配置使用套接字而不是 tcp 端口。

# database - 更新 1nf 数据库表的问题

> ID：13777021
> 
> 赞同：0
> 
> 时间：2012-12-08T11:27:31.573
> 
> 标签：database, foreign-keys, relational-database, database-normalization, third-normal-form

我有两个数据库表：
*report*（**id**，description）（key：**id**）和
*registration*（**a**，**b**，id_report）（key：（**a**，**b**））；

id_report 是引用报告**id**的外键。
在表*注册*中有功能依赖 a -> id_report。

所以表*注册*是1nf而不是2nf。

*尽管如此，我在表注册*中找不到插入/更新/删除问题。是否可以？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:13:55.420

你在评论中说你无法“找出问题是如何*发生*的”。（强调了。）这里是如何。

假设您的表“注册”以这样的数据开始。

```
a  b    id_report
--
1  10   13
1  11   13
1  12   13 
2  27   14
2  33   14 
```

功能依赖 a->id_report 仍然成立。当我们知道“a”的值时，我们发现“id_report”只有一个值。

但是 dbms 不能直接强制执行这种依赖关系。*这*意味着 dbms 将允许此更新语句运行而不会出错。

```
update registration
set id_report = 15
where a = 1 and b = 10;

a  b    id_report
--
1  10   15
1  11   13
1  12   13 
2  27   14
2  33   14 
```

现在您的数据已损坏。当我们知道“a”的值时，我们现在找到“id_report”的*两个*值。在前面的表中，知道“a”等于 1 意味着我们知道“id_report”等于 13。我们不再知道；如果“a”等于 1，id_report 可能是 13 或 15。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:52:17.423

可以对表进行非规范化，并且仍然没有任何现有的引用完整性问题。

规范化的原因是使创建插入、更新和删除异常变得更加困难或不可能。管理所有冗余数据以使其保持一致是可能的，但非常困难。

在 3NF（或更高，如果适用）中使用数据库仍然是一个更好的主意，这样您就不必依赖程序员和用户来避免麻烦。错误迟早会发生。

# android - Android google map v2 MarkerOption 可见属性！！错误与否

> ID：13777024
> 
> 赞同：2
> 
> 时间：2012-12-08T11:28:01.843
> 
> 标签：android, google-maps-api-2

我正在尝试使用**visibilty(false)**向地图添加标记。但是当我尝试在标记选项的标记选项中设置标记的可见性时，标记在**地图**上仍然可见

```
marker = mGoogleMapObject.addMarker(new MarkerOptions()
                        .position(key)
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.hotel_pin)).visible(false)); 
```

但这不能正常工作..

我必须将值设置为

```
marker.setVisible(false); 
```

为什么标记选项中的可见属性不起作用...

# c# - 如何修改此逻辑以检查数据库中的用户凭据，然后在 Active Directory 中？

> ID：13777026
> 
> 赞同：1
> 
> 时间：2012-12-08T11:28:10.760
> 
> 标签：c#, asp.net, active-directory, sql-server-2008-r2

我有一个基于 Intranet Web 的应用程序，它将添加的用户的信息存储在其数据库中。

我想要做的是：当用户浏览到网站时，它会检查用户是否存在于自己的数据库中。如果没有，它将使用 Active Directory 检查他的信息。

我写了方法，但是在检查数据库后出现问题，如果用户不在那里，它将转到第二种方法，即检查员工的组织代码：

```
public static bool isMember(string userid)
{
        Employee employee = new Employee(userid);

        if (!String.IsNullOrEmpty(userid))
        {
            string username = userid;
            string connString = "Data Source=appServer\\sqlexpress;Initial Catalog=dbTest;Integrated Security=True";
            string cmdText2 = "SELECT Count(*) FROM employee WHERE Username = @username";

            using (SqlConnection conn = new SqlConnection(connString))
            {
                conn.Open();
                // Open DB connection.
                using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
                {
                    cmd.Parameters.Add("@Username", SqlDbType.VarChar);
                    cmd.Parameters["@username"].Value = username;
                    var count = (int)cmd.ExecuteScalar();
                    return count == 1; // return true if there's only one employee with given name
                }
            }
        }
        else if (employee.department.Code == "30003143") //The SapCode of department is "30003143"
            return true;
        else
            return false;
    } 
```

那么如何解决呢？如果数据库中不存在用户，如何使应用程序通过 (else if) 子句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:27:24.557

挺容易：

```
public static bool isMember(string userid)
{
    // guard clause - if "userid" is invalid, return "false" right away 
    if (String.IsNullOrEmpty(userid))
    {
        return false
    }

    //Object from Employee class
    Employee employee = new Employee(userid);

    string username = userid;
    string connString = "Data Source=appServer\\sqlexpress;Initial Catalog=dbTest;Integrated Security=True";
    string cmdText2 = "SELECT Count(*) FROM employee WHERE Username = @username";

    using (SqlConnection conn = new SqlConnection(connString))
    using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
    {
            cmd.Parameters.Add("@Username", SqlDbType.VarChar);
            cmd.Parameters["@username"].Value = username;

            conn.Open();

            var count = (int)cmd.ExecuteScalar();

            if (count == 1)
            {
               return true; // return true if there's only one employee with given name
            }
    }

    // if the user already existed in the database - then the above RETURN has 
    // returned "true" to the caller. So these lines are **only** executed if the
    // user was NOT found in the database.

    if (employee.department.Code == "30003143") //The SapCode of department is "30003143"
        return true;

    // now check in Active Directory here.....     
    return UserExistsInActiveDirectory();
} 
```

# php - %M 显示完整的月份名称而不是缩写

> ID：13777035
> 
> 赞同：0
> 
> 时间：2012-12-08T11:29:29.040
> 
> 标签：php

我得到一个时间日期行并将其转换为一个看起来更漂亮的短语。我使用`%M`它来显示“Dec”而不是“December”，但它仍然只显示完整的月份名称。小`%m`显示“05”而不是“Dec”，就像它应该的那样。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T12:11:48.603

根据[MySQL Manual](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)，它 `%b`会显示您想要的缩写月份名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T11:35:37.850

`%M`用于一个月的简短文本表示，三个字母。

用于`%F`月份的完整文本表示，例如`January`或`March`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T12:15:38.823

阅读： [http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

你不是在调用 PHP 函数`date()`，而是 MySQL（所以我假设）函数`DATE_FORMAT()`，所以你需要编写`%b`而不是`%M`.

# java - 如何将 Double 类型的数据插入 phpmyadmin？

> ID：13777036
> 
> 赞同：0
> 
> 时间：2012-12-08T11:29:37.917
> 
> 标签：java, android, eclipse, phpmyadmin

我正在使用 eclipse 创建一个 android 应用程序，它将读取用户输入的价格。

输入的价格应存储到数据库中（phpmyadmin）

我正在使用下面的代码，但 Eclipse 有错误并要求我将双精度转换为字符串。

```
 food = Double.parseDouble(inputFood.getText().toString());
            transport = Double.parseDouble(inputTransport.getText().toString());
            tele = Double.parseDouble(inputTele.getText().toString());
            academic = Double.parseDouble(inputAcademic.getText().toString());
            entertainment = Double.parseDouble(inputEntertainment.getText().toString());
            health = Double.parseDouble(inputHealth.getText().toString());
            others = Double.parseDouble(inputOthers.getText().toString());
            budget = Double.parseDouble(inputBudget.getText().toString());

            total = food + transport + tele + academic + entertainment + health + others;          
            balance = budget - total;

           List<NameValuePair> params = new ArrayList<NameValuePair>();
           params.add(new BasicNameValuePair("food", food));
           params.add(new BasicNameValuePair("transport", transport));
           params.add(new BasicNameValuePair("tele", tele));
           params.add(new BasicNameValuePair("academic", academic));
           params.add(new BasicNameValuePair("entertainment", entertainment));
           params.add(new BasicNameValuePair("health", health));
           params.add(new BasicNameValuePair("others", others));
           params.add(new BasicNameValuePair("budget", budget));
           params.add(new BasicNameValuePair("total", total));
           params.add(new BasicNameValuePair("balance", balance));

           JSONObject json = jsonParser.makeHttpRequest(url_save_expenses,
                               "GET", params); 
```

是否有任何其他编码用于存储双重数据？

谢谢回答..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:37:59.653

只需编写代码以通过这种方式在列表中添加参数

```
 params.add(new BasicNameValuePair("food", "" + food));
       params.add(new BasicNameValuePair("transport", "" + transport));
       params.add(new BasicNameValuePair("tele", "" + tele));
       params.add(new BasicNameValuePair("academic", "" + academic));
       params.add(new BasicNameValuePair("entertainment", "" + entertainment));
       params.add(new BasicNameValuePair("health", "" + health));
       params.add(new BasicNameValuePair("others", "" + others));
       params.add(new BasicNameValuePair("budget", "" + budget));
       params.add(new BasicNameValuePair("total", "" + total));
       params.add(new BasicNameValuePair("balance", "" + balance)); 
```

这会将您的双精度类型更改为此构造函数的字符串，并在服务器端将字符串转换为双精度并存储到数据库中

# c# - 使用 C# 矩阵的颜色单元格

> ID：13777037
> 
> 赞同：2
> 
> 时间：2012-12-08T11:29:51.520
> 
> 标签：c#, colormatrix

我需要创建一个 40x40 矩阵并手动为每个单元格着色，如下所示。

![颜色矩阵](../Images/0fd76318d86a801fad173a8601f3a6e7.png)

我认为我可以在表单应用程序上使用 40*40=160 个标签并一一着色，但这不是很有效。对此的最佳做法是什么。也许颜色矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:32:34.410

这是一个完整但简单的 Windows 窗体应用程序。

这可能是最直接的方式。考虑一下我没有从矩阵中获取颜色的事实，但是您明白了，它具有您*应该*在代码中绘制它的方式。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            base.OnPaint(e);

            for (int x = 0, y = 0; x + y != (this.Width + this.Height); x++)
            {
                var color = Color.Red;
                if (x % 2 == 0 && y % 2 != 0) { color = Color.Blue; }

                e.Graphics.FillRectangle(new SolidBrush(color), x, y, 1, 1);

                if (x == this.Width)
                {
                    x = -1;
                    y++;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:22:13.770

拦截 OnPaint 事件的一种替代方法是创建一个 40x40 像素的位图，例如通过 System.Drawing.Bitmap 类，设置所有像素的颜色。

最后根据您的 UI 技术在 PictureBox（Windows 窗体）或图像（WPF）中显示它，并设置缩放值以填充整个控件的大小。

# android - Android (API 7) - 动画：onAnimationRepeat

> ID：13777039
> 
> 赞同：2
> 
> 时间：2012-12-08T11:30:24.057
> 
> 标签：android

我的应用程序有问题：我想在重复动画但未`onAnimationRepeat`调用函数（来自`AnimationListener`类）时修改 ImageView。

这是重现它的示例：

*   创建一个新项目“test”（Android 2.1，API 7）（我用于`com.test.test`包名）
*   `anim`在文件夹内创建一个文件`res`夹并`fade_in.xml`使用这些行创建

![淡入淡出.xml](../Images/af83382a8e3d8ee704727c42daf569be.png)

活动代码：

```
package com.test.test;

import android.app.Activity;
import android.graphics.Color;
import android.graphics.PorterDuff.Mode;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.view.animation.Animation.AnimationListener;
import android.widget.Button;
import android.widget.ImageView;

public class TestActivity extends Activity {

    Button button = null;
    ImageView image = null;

    Animation animation = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        button = (Button)findViewById(R.id.button1);
        image = (ImageView)findViewById(R.id.imageView1);

        animation = AnimationUtils.loadAnimation(this, R.anim.fade_in);
        animation.setAnimationListener(new AnimationListener() {            

            int repeatNumber = 0;

            @Override
            public void onAnimationStart(Animation animation) {Log.i("start", "start");}

            @Override
            public void onAnimationEnd(Animation animation) {Log.i("end", "end");}

            @Override
            public void onAnimationRepeat(Animation animation) {
                repeatNumber++;
                Log.i("repeat", String.valueOf(repeatNumber));
                switch(repeatNumber)
                {
                case 1:image.setColorFilter(Color.RED, Mode.MULTIPLY);break;
                case 2:image.setColorFilter(Color.BLUE, Mode.MULTIPLY);break;
                case 3:image.setColorFilter(Color.YELLOW, Mode.MULTIPLY);break;
                default:break;
                }
            }
        });

        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {image.startAnimation(animation);}
        });

    }
} 
```

和布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

`ImageView`颜色没有变化……你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:38:58.283

该方法`AnimationUtils.loadAnimation()`返回一个动画数组。

您必须在此数组的项目上设置事件。

你可以声明一个 AnimationSet

```
AnimationSet animation = null; 
```

所以在指令之后

```
animation = AnimationUtils.loadAnimation(this, R.anim.fade_in); 
```

你可以写 ：

```
 for (Animation a : animation.getAnimations())
        a.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {}

            @Override
            public void onAnimationRepeat(Animation animation) {
                Log.i("repeat", "repeat");
            }

            @Override
            public void onAnimationEnd(Animation animation) {}
        }); 
```

这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:50:10.307

对于重复动画，您需要设置动画的重复模式和重复出现的次数。

```
anim.setRepeatMode(Animation.INFINITE);
anim.setRepeatCount(5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T11:08:49.003

我遇到了同样的问题并阅读了很多资源和动画问题答案。每个人都在抱怨 AnimationSet 和重复计数问题。所以我从 XML 中删除了标签，它起作用了。OnRepeat 和 onEnd 现在都被调用了。

# javascript - 带有 socket.io 的循环在开头终止

> ID：13777044
> 
> 赞同：0
> 
> 时间：2012-12-08T11:31:23.433
> 
> 标签：javascript, node.js, loops, socket.io

我正在构建此功能以将小图块图像上传到服务器。客户端构建**tileBuffer**，然后调用*fireTiles*函数。在这里，我想基于**tileBuffer.length**构建一个循环。服务器将处理控制。因此，我发出*StartAddTiles并立即使用**AnotherTile*事件从服务器回调。调试器显示我已被服务器调用，我看到代码进入了*socket.on('AnotherTile'...*语句。

问题是当代码到达**AddTile**发射函数时，它会停在那里，什么也没有发生。服务器没有收到请求，循环在那里终止。

我的代码中的错误在哪里？

```
 function fireTiles (tileBuffer, mapSelected) {

        var tiles =   tileBuffer.length;
        var tBx = 0;

        try
        {
            var socket = io.connect('http://myweb:8080/');

            socket.emit('StartAddTiles', tiles, mapSelected);   
            socket.on('AnotherTile', function (tlN){
                if (tlN < tiles) {
                    var data = tileBuffer[tlN];  //uso tlN per far comandare il server
                    tBx++; // debug purpose
                    socket.emit('AddTile', mapSelected, data, tBx);
                } else {
                // something went wrong
                    alert('Error calculating tiles');
                    return;
                }
            });
        }
        catch(err)
        {
            document.getElementById('status').innerHTML = err.message;
        }

    } 
```

这是服务器端：

```
io.sockets.on('connection', function(client) {
  console.log('Connecting....');
// controls are limited, this is just a beginning

  // Initiate loop
  client.on('StartAddTiles', function(tiles, mapSelected) {
    var mapId = mapSelected;
    mapLoading[mapId] = {  //Create a new Entry in The mapLoading Variable
    tilesToLoad : tiles,
    tilesLoaded : 0
    }
     console.log('Start loading '+mapLoading[mapId].tilesToLoad+' tiles.');
    // Ask for the first tile
    client.emit('AnotherTile', mapLoading[mapId].tilesLoaded);
      //

  });

  // client add new Tile/Tiles
  client.on('addTile', function(mapSelected, data, tBx) {
    var mapId = mapSelected;
    mapLoading[mapId].tilesLoaded = ++1;
    console.log('Adding tile '+mapLoading[mapId].tilesLoaded+' of '+mapLoading[mapId].tilesToLoad+' tBx '+tBx);

    // insert Tile
    db_manager.add_tiles(tileBuffer, function(result) {

        if (mapLoading[mapId].tilesLoaded == mapLoading[mapId].tilesToLoad) {  // full map loaded
        mapLoading[mapId] = "";  //reset the buffer
        client.emit('TilesOk', mapLoading[mapId].tilesLoaded);
        } else {
        console.log('requesting tile num: '+mapLoading[mapId].tilesLoaded);
        client.emit('AnotherTile', mapLoading[mapId].tilesLoaded);
        }
      //

    });
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:57:33.167

事件名称区分大小写，您可能也应该使用`AddTile`而不是`addTile`在服务器端使用。

# mysql - 从特定的列列表中计算非空列，然后在每行的 where 子句中进行比较

> ID：13777046
> 
> 赞同：0
> 
> 时间：2012-12-08T11:31:40.507
> 
> 标签：mysql, count, inner-join, where-clause

表结构：

[表结构 http://imagebin.org/index.php?mode=image&id=238883](http://imagebin.org/index.php?mode=image&id=238883)

我想从两个满足某些条件的表中获取数据，例如

```
 WHERE batch='2009', sex='male',course='B.Tech', branch='cs', xth_percent>60, 
     x2percent>60, gradpercent>60 and (if ranktype='other' ) then 
     no._of_not_null_semester>number elseifranktype='Leet') then 
     no._of_not_null_semester>number-2 
```

sem 1-8 包含 8 个学期的百分比，如果每个学生已经清除了 3 个学期或 4 个学期，我想过滤每个学生的结果，即不是 8 个值中的空值

```
 no._of_not_null_semester 
```

需要计算，它不是数据库的一部分，也需要帮助。

必填查询

```
 SELECT * FROM student_test 
                      INNER JOIN master_test ON student_test.id=master_test.id 
                      WHERE sex='male' and batch='2009' and course='B.Tech' 
                      and xthpercent>60 and x2percent>60 and 
                      WHEN ranktype='Leet' THEN 
                              SUM(CASE WHEN sem1 IS NOT NULL THEN 1 ELSE 0
                                  WHEN sem2 IS NOT NULL THEN 1  ELSE 0
                                  WHEN sem3 IS NOT NULL THEN 1 ELSE 0
                                  WHEN sem4 IS NOT NULL THEN 1  ELSE 0
                                  WHEN sem5 IS NOT NULL THEN 1  ELSE 0) >2
                      ELSE 
                             SUM(CASE WHEN sem1 IS NOT NULL THEN 1 ELSE 0
                                 WHEN sem2 S NOT NULL THEN 1  ELSE 0
                                  WHEN sem3 IS NOT NULL THEN 1 ELSE 0
                                  WHEN sem4 IS NOT NULL THEN 1  ELSE 0
                                  WHEN sem5 IS NOT NULL THEN 1  ELSE 0) >4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:07:33.377

如果不改变结构，您将无法`COUNT`实现这一目标。

解决问题的一种方法是创建一个学期表，其中包含每个学生每个完成学期的行。这将有一个指向的外键`test_student.id`，您可以使用`COUNT(semester.id)`

如果这对您来说是一个选择，那将是最好的解决方案。

**编辑：**

检查一下，没有测试查询，但应该可以正常工作我决定在选择本身中进行数学运算，以防止两次计算相同的东西。在您的`HAVING`结果准备好交付之后应用条件，就在`LIMIT`. 在速度优化方面，您可以尝试将 sSum 块移动到 WHERE 条件中，就像以前一样。可能影响不大

`SUM()`不起作用，因为它是一个汇总函数，用于汇总列中的值

此外，我对您的查询做了一些更改：

*   不要 SELECT `*`，选择特定字段并添加表标识符。`s`（在这种情况下，我使用了`student_test`AND`m`的别名`master_test`）
*   您放入`s.batch = '2009'`单引号 - 如果该字段`batch`是一个整数字段，您应该使用`s.batch = 2009`，这将阻止 MySQL 将每一行转换为字符串，以便能够比较它（`int = int`比`cast(int as varchar) = varchar`）与表中的其他数值相同

查询：

```
SELECT
    s.id,
    s.sex,
    s.course,
    s.branch,
    ( 
        IF ( m.sem1 IS NOT NULL, 1, 0 ) +
        IF ( m.sem2 IS NOT NULL, 1, 0 ) +
        IF ( m.sem3 IS NOT NULL, 1, 0 ) +
        IF ( m.sem4 IS NOT NULL, 1, 0 ) +
        IF ( m.sem5 IS NOT NULL, 1, 0 ) +
        IF ( m.sem6 IS NOT NULL, 1, 0 ) +
        IF ( m.sem7 IS NOT NULL, 1, 0 ) +
        IF ( m.sem8 IS NOT NULL, 1, 0 )
    ) AS sSum
FROM
    student_test s
        INNER JOIN master_test m ON m.id = s.id
WHERE
    s.sex = 'male'
    AND
    s.batch = '2009' # I dont see this field in your database diagram!?
    AND
    s.course = 'B.Tech'
    AND
    m.xthpercent > 60
    AND
    m.x2percent > 60
HAVING
    (
        m.ranktype = 'OTHER'
        AND
        sSum > 4
    )
    OR
    (
        m.ranktype = 'LEET'
        AND
        sSum > 2
    ) 
```

如果您通常对学习数据库设计和使用感兴趣，我为您找到了一个非常有趣的机会。斯坦福大学提供免费的数据库课程“数据库简介”。这是免费的，大约需要花费您。每周 2 小时，共 3 周，包括期末考试。

[https://class2go.stanford.edu/db/Winter2013/preview/](https://class2go.stanford.edu/db/Winter2013/preview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:01:46.550

```
SELECT
s.id,
s.sex,
s.course,
s.deptt,
m1.id,
m1.xthpercent,
m1.x2percent,
m1.sem1,
m1.sem2,
m1.sem3,
m1.ranktype,
m1.sem4,
m1.sem5,
m1.sem6,
m1.sem7,
m1.sem8,
m1.sSum
FROM
student_test s
    INNER JOIN(SELECT m.id,
                      m.xthpercent,
                      m.x2percent,
                      m.sem1,
                      m.sem2,
                      m.sem3,
                      m.ranktype,
                      m.sem4,
                      m.sem5,
                      m.sem6,
                      m.sem7,
                      m.sem8,
                      (    IF ( ceil(m.sem1)>0, 1, 0 ) +
                           IF ( ceil(m.sem2)>0, 1, 0 ) +
                           IF ( ceil(m.sem3)>0, 1, 0 ) +
                           IF ( ceil(m.sem4)>0, 1, 0 ) +
                           IF ( ceil(m.sem5)>0, 1, 0 ) +
                           IF ( ceil(m.sem6)>0, 1, 0 ) +
                           IF ( ceil(m.sem7)>0, 1, 0 ) +
                           IF ( ceil(m.sem8)>0, 1, 0 )
                      ) AS sSum FROM master_test m 
                                WHERE m.xthpercent>60 and 
                                      m.x2percent>60 
                               HAVING (m.ranktype='Leet' AND sSum>2 )
                               OR
                              (m.ranktype != 'Leet') AND sSum>4 )
   as m1 ON m1.id = s.id

 WHERE 
 s.sex='Male'
 and
 s.course='B.Tech'
 and 
 s.deptt='ELE' 
```

这是我最终使用的查询，喜欢那个查询:)

# android - Android 上 ExtAudioRecorder 的问题

> ID：13777047
> 
> 赞同：1
> 
> 时间：2012-12-08T11:32:04.967
> 
> 标签：android, mediarecorder

我正在使用[http://i-liger.com/article/android-wav-audio-recording](http://i-liger.com/article/android-wav-audio-recording)中的 ExtAudioRecorder来录制 WAV 文件以进行进一步的音频处理。但是，有时我会收到这组错误消息：

```
12-08 18:58:18.217: E/AndroidRuntime(7323): FATAL EXCEPTION: main
12-08 18:58:18.217: E/AndroidRuntime(7323): java.lang.RuntimeException: Unable to start activity ComponentInfo{musicscoreify.app/musicscoreify.app.ReadWavFile}: java.lang.NullPointerException
12-08 18:58:18.217: E/AndroidRuntime(7323):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at android.os.Looper.loop(Looper.java:130)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at android.app.ActivityThread.main(ActivityThread.java:3691)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at java.lang.reflect.Method.invokeNative(Native Method)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at java.lang.reflect.Method.invoke(Method.java:507)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at dalvik.system.NativeStart.main(Native Method)
12-08 18:58:18.217: E/AndroidRuntime(7323): Caused by: java.lang.NullPointerException
12-08 18:58:18.217: E/AndroidRuntime(7323):     at musicscoreify.app.ReadWavFile.onCreate(ReadWavFile.java:138)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-08 18:58:18.217: E/AndroidRuntime(7323):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
12-08 18:58:18.217: E/AndroidRuntime(7323):     ... 11 more 
```

因为 ExtAudioRecorder 中的一种方法崩溃了。方法如下：

```
public void onPeriodicNotification(AudioRecord recorder)
        {
            audioRecorder.read(buffer, 0, buffer.length); // Fill buffer
            try
            { 
                randomAccessWriter.write(buffer); // Write buffer to file
                payloadSize += buffer.length;
                if (bSamples == 16)
                {
                    for (int i=0; i<buffer.length/2; i++)
                    { // 16bit sample size
                        short curSample = getShort(buffer[i*2], buffer[i*2+1]);
                        if (curSample > cAmplitude)
                        { // Check amplitude
                            cAmplitude = curSample;
                        }
                    }
                }
                else    
                { // 8bit sample size
                    for (int i=0; i<buffer.length; i++)
                    {
                        if (buffer[i] > cAmplitude)
                        { // Check amplitude
                            cAmplitude = buffer[i];
                        }
                    }
                }
            }
            catch (IOException e)
            {
                Log.e(ExtAudioRecorder.class.getName(), "Error occured in updateListener, recording is aborted");
                //stop();
            }
        } 
```

有没有人有类似的问题？我不知道为什么录音会被中止，为什么它只在某些时候发生。由于 bug 的发生没有模式（或者至少我没有意识到是否有模式），这让我很难调试。如果有人可以帮助我解决这个问题，那就太好了。

# html - 不完整的悬停在链接上

> ID：13777049
> 
> 赞同：0
> 
> 时间：2012-12-08T11:32:15.047
> 
> 标签：html, css, html-lists

我正在为网页创建一个垂直下拉菜单。当我将鼠标悬停在链接上时，它可以正常工作并按照指定更改颜色。但是当我在 li 的子级列表（代码中的“一些文本 b”和“c”）上向右移动时，它又回到了原来的颜色。我该如何解决这个问题？

HTML 标记：

```
<div id="vertical-menu">
    <ul class="top-level">
        <li><a href="#">Some text A</a></li>
        <li>
            <a href="#">Some text B</a>
            <ul class="sub-level">
                <li><a href="#">RSVP</a></li>
                <li><a href="#">Organizing Team</a></li>
            </ul>
        </li>
        <li>
            <a href="#">Some text C</a>
            <ul class="sub-level">
                <li><a href="#">Events</a></li>
                <li><a href="#">Reunions</a></li>
            </ul>
        </li>
    </ul>
</div>​ 
```

CSS 样式：

```
#vertical-menu {
    padding: 10px 0;
    margin: 0 -14px;
    width: 250px;
}
#vertical-menu li {
    list-style: none;
    position:relative;
}
#vertical-menu a {
    padding: 10px;
    margin-right: 0;
    display: block;
    background: -webkit-gradient(linear, left top, left bottom, from(#CD0000),           to(#8B0000));
    color: #FFFFFF;
    font-size: 1.05em;
}
#vertical-menu a:hover {
    background: url("Wood Texture 2.jpg") 100% 100%;
    color: #8B0000;
}
ul.sub-level {
    display:none;
    position:absolute;
    left:171px;
    top: 0;
}
.sub-level a {
    width: 200px;
}
li:hover .sub-level {display: block;} 
```

要查看 jsfiddle 的演示：http: [//jsfiddle.net/fFzeS/](http://jsfiddle.net/fFzeS/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:44:46.833

使用`#vertical-menu li:hover > a`代替`#vertical-menu a:hover`（[演示](http://jsfiddle.net/DNekW/)）

## 编辑：

您真正的问题是子菜单与基本菜单重叠 - 您需要从 UL 中删除填充/边距：

```
.vertical-menu ul { margin: 0; padding: 0; } 
```

并调整`left:171px;`为`left:250px;`

# haskell - CouchDB.Conduit：将视图映射到数据

> ID：13777057
> 
> 赞同：0
> 
> 时间：2012-12-08T11:33:37.077
> 
> 标签：haskell, couchdb

```
{-# LANGUAGE DeriveDataTypeable #-}
{-# LANGUAGE OverloadedStrings #-}
{-# LANGUAGE DeriveGeneric, ScopedTypeVariables #-}

import Data.Generics (Data, Typeable)
import Data.Conduit
import qualified Data.Conduit.List as CL
import Database.CouchDB.Conduit.Generic
import Database.CouchDB.Conduit
import Database.CouchDB.Conduit.View
import Data.ByteString.Char8 (ByteString, empty)
import Control.Monad.IO.Class (liftIO)
import Data.Aeson
import Data.Aeson.Types
import GHC.Generics

data Page = Page { id_ :: ByteString, url :: ByteString }
            deriving (Show, Data, Typeable, Generic)

instance FromJSON Page

getPages :: IO ()
getPages = runCouch (def { couchHost = "192.168.0.103" }) $ do
    couchView_ "reader" "reader" "pages" [] $ CL.mapM_ (liftIO . print) 
```

这有效并给了我这个：

```
 *Main> getPages 
    fromList [("key",String "802e343945c7f8da2d8a71fdb80025a7"),("id",String "802e343945c7f8da2d8a71fdb80025a7"),("value",String "http://yandex.ru")]` 
```

但我实际上想要一个函数`getPages :: IO [Page]`，所以我尝试了这个：

```
getPages = runCouch (def { couchHost = "192.168.0.103" }) $ do
    couchView_ "reader" "reader" "pages" [] $ toType =$ CL.consume` 
```

这给了我类型错误：

```
`Reader/Couch.hs:24:47:
    Couldn't match expected type `Object' with actual type `Value'
    Expected type: Conduit Object m1 b0
      Actual type: Conduit Value m0 a0
    In the first argument of `(=$)', namely `toType'
    In the second argument of `($)', namely `toType =$ CL.consume'
Failed, modules loaded: none. 
```

这并不奇怪，因为 couchView 需要`Sink Object m a`作为参数。

问题是：如何实现getPages :: IO [Page]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:27:52.793

我不熟悉管道、aeson 或 couchDB，但这至少可以进行类型检查：

```
getPages :: IO [Result Page]
getPages = runCouch (def { couchHost = "192.168.0.103" }) $ do
    couchView_ "reader" "reader" "pages" [] $ CL.map (fromJSON . Object) =$ CL.consume 
```

# php - 使用 SimpleSAML 作为开发环境的 SP 和 IDP

> ID：13777058
> 
> 赞同：6
> 
> 时间：2012-12-08T11:33:44.897
> 
> 标签：php, saml, saml-2.0

我正在尝试在我的 Web 应用程序中使用 SAML 进行身份验证。

我遵循[IdP 快速](http://simplesamlphp.org/docs/1.9/simplesamlphp-idp#section_2)入门和[SP 快速](http://simplesamlphp.org/docs/1.9/simplesamlphp-sp)入门用户指南，并提出以下配置失败：

```
Backtrace:
1 /app_path/application/lib/simplesamlphp/www/_include.php:37 (SimpleSAML_exception_handler)
0 [builtin] (N/A)
Caused by: Exception: Unable to find the current binding.
Backtrace:
2 /app_path/application/lib/simplesamlphp/lib/SAML2/Binding.php:81 (SAML2_Binding::getCurrentBinding)
1 /app_path/application/lib/simplesamlphp/modules/saml/lib/IdP/SAML2.php:266 (sspmod_saml_IdP_SAML2::receiveAuthnRequest)
0 /app_path/application/lib/simplesamlphp/www/saml2/idp/SSOService.php:19 (N/A) 
```

**设置 ：**

*   我的应用程序在主机本地运行：trunk.sam.net
*   Simplesaml，SP，作为库包含在应用程序中，可通过以下网址访问：trunk.sam.net/simplesaml
*   Simplesaml，IdP，安装在本地并运行在：auth.sam.net

两个 simplesaml 实际上都使用相同的代码和配置文件（它们共享相同的文档根目录）

**配置 ：**

**配置文件**

```
'enable.saml20-idp'     => true,
'enable.shib13-idp'     => true, 
```

**authsources.php**

```
'default-sp-trunk.sam.net' => array(
    'saml:SP',
    'entityID'    => 'http://trunk.sam.net',
    'idp'         => 'http://auth.sam.net/simplesaml/saml2/idp/metadata.php',
    'ssoPortalUrl'=> 'http://auth.sam.net/simplesaml/saml2/idp/SSOService.php',
    'bkmapping'   => array(
        'login'     => 'uid',
        'eMail'     => 'mail'
    )
),

'example-userpass' => array(
    'exampleauth:UserPass',
    'shf:pwd' => array(
        'uid' => array('shf'),
        'eduPersonAffiliation' => array('mail', 'shf@bk-soft.com')
    ),
    'shl:pwd' => array(
        'uid' => array('shl')
    ),
), 
```

**saml20-idp-hosted.php**

```
$metadata['__DYNAMIC:1__'] = array(
/*
 * The hostname for this IdP. This makes it possible to run multiple
 * IdPs from the same configuration. '__DEFAULT__' means that this one
 * should be used by default.
 */
'host' => '__DEFAULT__',

/*
 * The private key and certificate to use when signing responses.
 * These are stored in the cert-directory.
 */
'privatekey' => 'server.pem',
'certificate' => 'server.crt',

/*
 * The authentication source which should be used to authenticate the
 * user. This must match one of the entries in config/authsources.php.
 */
'auth' => 'example-userpass',

/*
 * The interoperable SAML 2 profile specifies that attributes should be delivered using the urn:oasis:names:tc:SAML:2.0:attrname-format:uri NameFormat. 
 * We therefore recommended enabling this in new installations. This can be done by adding the following to the saml20-idp-hosted configuration:
 */
'attributes.NameFormat' => 'urn:oasis:names:tc:SAML:2.0:attrname-format:uri',
'authproc' => array(
    // Convert LDAP names to oids.
    100 => array('class' => 'core:AttributeMap', 'name2oid'),
), 
```

);

**saml20-idp-remote.php**

```
$metadata['http://auth.sam.net/simplesaml/saml2/idp/metadata.php'] = array (
    'entityid' => 'http://auth.sam.net/simplesaml/saml2/idp/metadata.php',
    'contacts' => 
    array (0 => 
        array (
            'contactType' => 'technical',
            'surName' => 'Administrator',
            'emailAddress' => array (0 => 'support@bluekiwi-software.com'),
       ),
  ),
  'metadata-set' => 'saml20-idp-remote',
  'SingleSignOnService' => array (0 => array (
      'Binding' => 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect',
      'Location' => 'http://auth.sam.net/simplesaml/saml2/idp/SSOService.php',
  ),
),
'SingleLogoutService' => 
array ( 0 =>  array (
    'Binding' => 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect',
    'Location' => 'http://auth.sam.net/simplesaml/saml2/idp/SingleLogoutService.php',
  ),
),
'ArtifactResolutionService' => 
array (
),
'keys' => 
array (0 =>  array (
    'encryption' => false,
    'signing' => true,
    'type' => 'X509Certificate',
    'X509Certificate' => 'MIICgTCCAeoCCQCbOlrWDdX7FTANBgkqhkiG9w0BAQUFADCBhDELMAkGA1UEBhMCTk8xGDAWBgNVBAgTD0FuZHJlYXMgU29sYmVyZzEMMAoGA1UEBxMDRm9vMRAwDgYDVQQKEwdVTklORVRUMRgwFgYDVQQDEw9mZWlkZS5lcmxhbmcubm8xITAfBgkqhkiG9w0BCQEWEmFuZHJlYXNAdW5pbmV0dC5ubzAeFw0wNzA2MTUxMjAxMzVaFw0wNzA4MTQxMjAxMzVaMIGEMQswCQYDVQQGEwJOTzEYMBYGA1UECBMPQW5kcmVhcyBTb2xiZXJnMQwwCgYDVQQHEwNGb28xEDAOBgNVBAoTB1VOSU5FVFQxGDAWBgNVBAMTD2ZlaWRlLmVybGFuZy5ubzEhMB8GCSqGSIb3DQEJARYSYW5kcmVhc0B1bmluZXR0Lm5vMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDivbhR7P516x/S3BqKxupQe0LONoliupiBOesCO3SHbDrl3+q9IbfnfmE04rNuMcPsIxB161TdDpIesLCn7c8aPHISKOtPlAeTZSnb8QAu7aRjZq3+PbrP5uW3TcfCGPtKTytHOge/OlJbo078dVhXQ14d1EDwXJW1rRXuUt4C8QIDAQABMA0GCSqGSIb3DQEBBQUAA4GBACDVfp86HObqY+e8BUoWQ9+VMQx1ASDohBjwOsg2WykUqRXF+dLfcUH9dWR63CtZIKFDbStNomPnQz7nbK+onygwBspVEbnHuUihZq3ZUdmumQqCw4Uvs/1Uvq3orOo/WJVhTyvLgFVK2QarQ4/67OZfHd7R+POBXhophSMv1ZOo',
  ),
  1 => 
  array (
    'encryption' => true,
    'signing' => false,
    'type' => 'X509Certificate',
    'X509Certificate' => 'MIICgTCCAeoCCQCbOlrWDdX7FTANBgkqhkiG9w0BAQUFADCBhDELMAkGA1UEBhMCTk8xGDAWBgNVBAgTD0FuZHJlYXMgU29sYmVyZzEMMAoGA1UEBxMDRm9vMRAwDgYDVQQKEwdVTklORVRUMRgwFgYDVQQDEw9mZWlkZS5lcmxhbmcubm8xITAfBgkqhkiG9w0BCQEWEmFuZHJlYXNAdW5pbmV0dC5ubzAeFw0wNzA2MTUxMjAxMzVaFw0wNzA4MTQxMjAxMzVaMIGEMQswCQYDVQQGEwJOTzEYMBYGA1UECBMPQW5kcmVhcyBTb2xiZXJnMQwwCgYDVQQHEwNGb28xEDAOBgNVBAoTB1VOSU5FVFQxGDAWBgNVBAMTD2ZlaWRlLmVybGFuZy5ubzEhMB8GCSqGSIb3DQEJARYSYW5kcmVhc0B1bmluZXR0Lm5vMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDivbhR7P516x/S3BqKxupQe0LONoliupiBOesCO3SHbDrl3+q9IbfnfmE04rNuMcPsIxB161TdDpIesLCn7c8aPHISKOtPlAeTZSnb8QAu7aRjZq3+PbrP5uW3TcfCGPtKTytHOge/OlJbo078dVhXQ14d1EDwXJW1rRXuUt4C8QIDAQABMA0GCSqGSIb3DQEBBQUAA4GBACDVfp86HObqY+e8BUoWQ9+VMQx1ASDohBjwOsg2WykUqRXF+dLfcUH9dWR63CtZIKFDbStNomPnQz7nbK+onygwBspVEbnHuUihZq3ZUdmumQqCw4Uvs/1Uvq3orOo/WJVhTyvLgFVK2QarQ4/67OZfHd7R+POBXhophSMv1ZOo',
  ),
), 
```

);

**saml20-sp-remote.php**

```
$metadata['http://trunk.sam.net'] = array (
  'AssertionConsumerService' => 'http://trunk.sam.net/simplesaml/module.php/saml/sp/saml2-acs.php/default-sp-trunk.sam.net',
  'SingleLogoutService' => 'http://trunk.sam.net/simplesaml/module.php/saml/sp/saml2-logout.php/default-sp-trunk.sam.net',
); 
```

谁能指出我做错了什么？

我是否缺少配置条目/文件？

我应该使用单独的 simplesaml 安装吗？

谢谢你的建议

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T15:34:49.437

问题是 SP 和 IdP 需要是简单 saml 的两个不同安装。我将源代码复制到另一个文件夹，编辑了用于 IdP (auth.sam.net) 的虚拟主机，一切正常。配置没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:02:23.327

您的 simpleSAML IDP 针对什么进行身份验证？广告？

您是否只是希望您的应用程序针对 IDP 存储库进行身份验证？

为什么需要 simpleSAML SP？

您的应用程序能否直接针对 simpleSAML IDP 进行身份验证？

您通常会在以下内容中使用 simpleSAML SP：

AD <-- ADFS <-- simpleSAML SP <-- SAML 应用程序。

# mysql - 存储多种类型数据的最佳方式

> ID：13777062
> 
> 赞同：0
> 
> 时间：2012-12-08T11:33:59.777
> 
> 标签：mysql, sql, mongodb, redis, database

我即将为我正在从事的项目设计一个数据库。我需要存储多种类型的数据，如视频、照片、文本、音频。我必须存储它们并通过 php 我必须经常查询它们。我正在进行的这个项目是一个社交网络，我需要通过通知和消息来连接用户。这是一个问题：使用 NoSQL DB 存储数据和通知系统（如 MongoDB 和 Redis）或 MySQL 对这种系统也有帮助更有用吗？对不起我的英语，但是对于像我这样的英语初学者来说，技术性的东西很难解释。谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:14:34.340

你可以去任何一种方式。但是将二进制数据存储在数据库中通常不是最有效的路径。您最好将其存储在文件系统中并将路径放入数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:54:24.313

SQL 技术（即 MySQL）的问题在于，通常您必须将二进制文本放在 BLOB 中，此时您已经做错了。

要考虑的另一件事是，无论是 MongoDB 还是 SQL，文件系统访问总是比数据库访问快，但是，数据库存储确实有一些优势。最终在您的网站上（如果它稍微受欢迎），您会发现您需要一个 CDN。这些类型的分发网络可能很昂贵，但是使用 MongoDB 之类的东西，您可以在其他区域启动数据的副本，并根据需要复制二进制数据（甚至可能 TTL 就像 CDN 一样）。

因此，这是一个需要考虑的领域，文件系统在大多数情况下并不是像社交网络这样的高负载站点的正确答案。然而，即使 facebook 本身也不能避免直接从文件系统提供服务，正如他们所说（[https://blog.facebook.com/blog.php?post=2406207130](https://blog.facebook.com/blog.php?post=2406207130)，考虑到这篇文章已有 5 年历史但我很怀疑在这方面发生了变化）：

> 我们还开发了我们自己的专用 Web 服务器，这些服务器经过调整，可以以尽可能少的磁盘读取来提供文件。即使有数千个硬盘驱动器，I/O（输入/输出）仍然是一个问题，因为我们的流量如此之高。我们的 squid 缓存有助于减少负载，但 squid 的速度和效率不足以满足我们的目的，因此我们也在编写自己的 Web 加速器。

然而，它们确实拥有非常大的基础架构，您很可能应该更喜欢考虑使用数据库存储还是 CDN。

我个人认为您应该对内容分发网络以及其他网站如何提供图像进行一些研究。您可以在 Google 上找到所有信息。您可以专门搜索 Facebook，直到最近，他们还在使用 Akamai 作为其 CDN。

# java - Swing - MacOS 中 JDialog 的原生外观

> ID：13777067
> 
> 赞同：1
> 
> 时间：2012-12-08T11:34:27.723
> 
> 标签：java, macos, swing, look-and-feel

是否`Swing`支持如下本机对话框： ![在此处输入图像描述](../Images/f3264a84fd03b53f47750f831e8ff00d.png)

或者也许存在一些第三方的`JNI`图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:17:48.593

我还没有尝试过，但[*OS X v10.5 Update 1 上的 Java*](https://developer.apple.com/library/mac/#releasenotes/Java/JavaLeopardUpdate1RN/Introduction/Introduction.html)说，“可以通过将client 属性设置为on来创建*文档模式表*。” 我猜是这样的：`apple.awt.documentModalSheet``Boolean.TRUE``JRootPane``JDialog`

```
rootPanel.putClientProperty("apple.awt.documentModalSheet", Boolean.TRUE); 
```

您还可以查看[*Mac Widgets for Java*](http://code.google.com/p/macwidgets/)最近是否添加了任何内容。

# android - 如何仅在 android 中获取我的应用程序的 zxing

> ID：13777069
> 
> 赞同：0
> 
> 时间：2012-12-08T11:34:37.910
> 
> 标签：android, zxing

我使用 zxing 作为库来实现 QRCode 扫描仪。这是通过单击按钮启动的。但是当我点击按钮时，它会列出所有安装了 zxing 的应用程序，我必须选择我自己的应用程序的扫描仪。

有没有一种方法可以让我指定简单地启动扫描仪而不给出任何选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:42:34.697

您可以调用`setPackage("com.google.zxing.client.android")`以将 Intent 限制为仅匹配 Barcode Scanner 包。如果您使用`IntentIntegrator`项目中的代码，这将为您完成。

# html - 一行中所有列的相同表格边框高度

> ID：13777072
> 
> 赞同：0
> 
> 时间：2012-12-08T11:34:53.630
> 
> 标签：html, css, html-table

> **可能重复：**
> [表中所有列的边框高度相等](https://stackoverflow.com/questions/13758390/equal-border-height-for-all-columns-in-a-table)

我的当前输出是连续 3 列！[当前输出][1]

![在此处输入图像描述](../Images/d606bdaef4fdbf01b6854aef36dd1021.png) 我需要的输出是

![需要](../Images/59c3f9cfed023c2f48078adcc8502e40.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:56:37.653

```
CSS: {
   vertical-align: top;
} 
```

或`<td>`属性：

```
<td valign="top"></td> 
```

# asp.net - 连接到 PostgreSql 的 Web 服务

> ID：13777073
> 
> 赞同：1
> 
> 时间：2012-12-08T11:34:55.510
> 
> 标签：asp.net, json, web-services, postgresql, json.net

我正在创建一个在 PostgreSql 中具有数据库的 iPhone 应用程序。我想创建连接到数据库并获取数据进出的 Web 服务，例如，我想为我的 iPhone 应用程序的登录屏幕创建一个 Web 服务，该服务将连接到 PostgreSql 数据库并对用户进行身份验证。

我该如何处理 Web 服务部分..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:25:45.367

看起来这个问题注定要被关闭，但在它被锁定之前，我会尝试提供一些方向。您可以使用列出的任何技术来发布 Web 服务。ASP.NET 是我最熟悉的技术，所以我可能会推荐使用带有公开 Page 方法的简单 Web 应用程序，并使用 Npgsql 作为数据库接口。

使用简单的页面方法并不是最可靠的解决方案，但它可以满足简单的需求，并且只需要很少的专业知识或 WCF 实现，这对某些人来说可能是令人生畏的。

# html - 背景被剪掉了

> ID：13777077
> 
> 赞同：3
> 
> 时间：2012-12-08T11:35:16.867
> 
> 标签：html, css

我想突出显示 a 中的一些行`<div>`。
有些线条比宽度长`<div>`，所以我用`<div style="overflow:scroll;">`.
但是，当我向右滚动时，突出显示的背景会在右边缘被剪切，因此长于`<div>`' 宽度的文本没有背景。
![在此处输入图像描述](../Images/0bbad6e998674f1ae9ea29786cfb6c60.png)

```
<style>
.a { background-color:red; }
.b { background-color:yellow; }
</style>
<div style="overflow:scroll;width:49%;height:100%;border:1px solid silver;white-space:nowrap;">
<pre>
<div class="a">ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
dffdgfdsgfg</div>
<div class="b">asdsad</div>
</pre>
</div> 
```

任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:48:02.603

删除空格：nowrap；

并添加`word-wrap: break-word;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:43:45.943

我认为您的问题可能与自动换行有关：这是一篇解释其用法的好文章：[http ://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap](http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap)

希望能帮助到你，

# postgresql - 将具有默认值的列添加到一个巨大的表中

> ID：13777078
> 
> 赞同：18
> 
> 时间：2012-12-08T11:35:29.543
> 
> 标签：postgresql

我有一个 postgresql 数据库和一个包含近十亿行的表。当我尝试添加具有默认值的新列时：

```
ALTER TABLE big_table
ADD COLUMN some_flag integer NOT NULL DEFAULT 0; 
```

事务持续了 30+ 分钟 .. 并且数据库日志开始发出警告。

有什么方法可以优化查询？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T15:50:12.003

除了分批进行（仍需要一段时间）：

您可以将表转储为[**COPY**](http://www.postgresql.org/docs/9.2/static/sql-copy.html)语句并编写脚本来编辑 COPY 语句的内容以插入另一列（COPY 可以是 CSV IIRC）。

然后，您只需重新加载更改后的`COPY`转储，理论上它应该比 COPY 更快，`ALTER`因为 COPY 不会记录事务。

另一种选择是[`fsync`](http://www.postgresql.org/docs/9.2/static/wal-configuration.html)在运行命令时关闭...只要记住重新打开它。

您也可以批量执行上述两项操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-04-25T17:15:40.090

从 PostgreSQL 11 开始，这种行为将会改变。

[等待 PostgreSQL 11 – 使用非 NULL 默认值的快速 ALTER TABLE ADD COLUMN](https://www.depesz.com/2018/04/04/waiting-for-postgresql-11-fast-alter-table-add-column-with-a-non-null-default/)：

> 所以，在最长的时间里，当你这样做时：
> 
> ```
> alter table x add column z text; 
> ```
> 
> 这几乎是瞬间的。锁定表，将有关新列的信息添加到系统目录中，然后就完成了。
> 
> 但是当你尝试：
> 
> ```
> alter table x add column z text default 'some value'; 
> ```
> 
> 然后花了很长时间。它做了多长时间取决于桌子的大小。
> 
> **这是因为 postgresql 实际上是在重写整个表，将列添加到每一行，并用默认值填充它。**
> 
> *“如果您还想将列设置为 NOT NULL 会发生什么？在这种情况下我们是回到慢速版本还是也能处理这种情况？”*
> 
> **not null 不会改变任何东西。它是新行的约束。所以添加一个带有“not null default 'xxx'”的列会很快。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-08T11:51:00.927

我会考虑在没有默认值的情况下创建列，并通过间歇性提交手动更新行以应用默认值。

# windows - 来自本地主机的 Windows 8 磁贴通知

> ID：13777080
> 
> 赞同：0
> 
> 时间：2012-12-08T11:35:56.187
> 
> 标签：windows, windows-8, microsoft-metro, tile

我正在为 Windows 8 开发一个简单的应用程序。在我的应用程序中，我希望开始磁贴显示来自我的应用程序附带的本地主机的图像。例如，我将图像保存在 /images/tile1.jpg 上。我的xml代码是

```
<tile>
<visual>
    <binding template="TileWideImage">
        <image id="1" src ="http://localhost/images/tile1.jpg" />
    </binding>
</visual> 
```

同样存在于 /tile1.xml

我的 default.js 代码是

```
 // For an introduction to the Blank template, see the following documentation:
// http://go.microsoft.com/fwlink/?LinkId=232509
(function () {
    "use strict";

    WinJS.Binding.optimizeBindingReferences = true;

    var app = WinJS.Application;
    var activation = Windows.ApplicationModel.Activation;

    app.onactivated = function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
                var notifications = Windows.UI.Notifications;
                var recurrence = notifications.PeriodicUpdateRecurrence.halfHour;

                var urls = [
                    new Windows.Foundation.Uri("http://localhost/tile1.xml"),
                    new Windows.Foundation.Uri("http://localhost/tile2.xml"),
                    new Windows.Foundation.Uri("http://localhost/tile3.xml"),
                    new Windows.Foundation.Uri("http://localhost/tile4.xml")
                ];

                notifications.TileUpdateManager.createTileUpdaterForApplication().enableNotificationQueue(true);
                notifications.TileUpdateManager.createTileUpdaterForApplication().startPeriodicUpdateBatch(urls, recurrence);

            } else {
                // TODO: This application has been reactivated from suspension.
                // Restore application state here.
            }
            args.setPromise(WinJS.UI.processAll());
        }
    };

    app.oncheckpoint = function (args) {
        // TODO: This application is about to be suspended. Save any state
        // that needs to persist across suspensions here. You might use the
        // WinJS.Application.sessionState object, which is automatically
        // saved and restored across suspension. If you need to complete an
        // asynchronous operation before your application is suspended, call
        // args.setPromise().
    };

  app.start();
})(); 
```

我只是无法弄清楚代码有什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:47:48.353

好吧，你不能。不允许环回，因此如果您使用 localhost 服务，您的应用将无法通过认证。

您可以使用应用程序本身提供图像吗？或者，设置外部服务来托管您的图像和图块。您真的只需要像 Windows Azure blob 存储这样的东西，甚至不需要托管 Web 服务。

最后，您需要确保始终包含方形平铺图像。用户始终拥有控制权，因此他们可能会选择不将您的应用显示为宽磁贴。

# android - 在 public void onClick 内停止服务

> ID：13777081
> 
> 赞同：0
> 
> 时间：2012-12-08T11:35:59.287
> 
> 标签：android

我创建了一个服务来启动/停止一首歌曲，现在当我点击“信息”时，服务星号正确，但我无法停止它。我应该打算在“public void onClick”中停止服务，但我有一个错误。

this，是停止服务的代码： stopService(new Intent(this, SobService.class));

```
private void Info(){

    startService(new Intent(this, SobService.class));
    LayoutInflater li = LayoutInflater.from(this);
    View view = li.inflate(R.layout.info, null);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setView(view).create();
    TextView text=(TextView) findViewById(R.id.infoView1);
    builder.setCancelable(false); 
    builder.setPositiveButton("Chiudi", new DialogInterface.OnClickListener()
    {  
           public void onClick(DialogInterface dialog, int id) {  
//stopService(new Intent(this, SobService.class));
               dialog.cancel();   
        }  
        });  
    builder.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:41:38.557

写下你的 Activity 类名，而不是只写**`"this"`**在这个语句中

```
stopService(new Intent(YourActivity.this, SobService.class)); 
```

唯一**`"this"`**可以将匿名类对象本身引用为您的活动对象

# ruby-on-rails - 从 ActiveRecord 对象中提取两个属性的快捷方式？

> ID：13777086
> 
> 赞同：44
> 
> 时间：2012-12-08T11:36:32.887
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

是否有更短的方法来执行以下操作（

```
@user.employees.map { |e| { id: e.id, name: e.name } }
# => [{ id: 1, name: 'Pete' }, { id: 2, name: 'Fred' }] 
```

`User` `has_many`雇员。这两个类都继承自`ActiveRecord::Base`.

我不喜欢上面的两件事

1.  它在映射之前将员工加载到内存中，
2.  它很冗长（我猜是主观的）。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-08T11:47:23.917

**更新：**

请参阅@jamesharker 的解决方案：来自 ActiveRecord >= 4，`pluck`接受多个参数：

```
@user.employees.pluck(:id, :name) 
```

**以前的答案：**

对于 rails >= 3.2 中的单列，您可以执行以下操作：

```
@user.employees.pluck(:name) 
```

...但是由于您必须采摘两个属性，因此您可以这样做：

```
@user.employees.select([:id, :name]).map {|e| {id: e.id, name: e.name} } 
# or map &:attributes, maybe 
```

如果您*确实*需要较低级别的操作，只需查看[#pluck 的来源](http://apidock.com/rails/ActiveRecord/Calculations/pluck)，它使用`select_all`

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-11-21T13:23:12.127

在 ActiveRecord >= 4 [pluck](https://github.com/rails/rails/blob/68aebd489566ee514d86765c0d5dceb7feb7aacf/activerecord/lib/active_record/relation/calculations.rb#L123)接受多个参数，所以这个例子会变成：

```
@user.employees.pluck(:id, :name) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-30T10:09:49.687

如果你被 Rails 3 卡住了，你可以添加[这个](http://meltingice.net/2013/06/11/pluck-multiple-columns-rails/) `.pluck_all`扩展： http: [//meltingice.net/2013/06/11/pluck-multiple-columns-rails/](http://meltingice.net/2013/06/11/pluck-multiple-columns-rails/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-12T12:13:15.553

另一种选择是：

```
@user.employees.select(:id, :name).as_json
#=> [{"id" => 1, "name" => "Pete"}, {"id" => 2, "name" => "Fred"}] 
```

我可以想象你宁愿有符号化的钥匙。如果是这种情况，请使用该`#symbolize_keys`方法。

```
@user.employees.select(:id, :name).as_json.map(&:symbolize_keys)
#=> [{id: 1, name: "Pete"}, {id: 2, name: "Fred"}] 
```

请参阅：[http ://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-13T03:58:58.377

添加这个猴子补丁，它在 Rails 3 中提供多列采摘功能。

```
# config/initializers/pluck_all.rb

if Rails.version[0] == '3'
  ActiveRecord::Relation.class_eval do
    def pluck(*args)
      args.map! do |column_name|
        if column_name.is_a?(Symbol) && column_names.include?(column_name.to_s)
          "#{connection.quote_table_name(table_name)}.#{connection.quote_column_name(column_name)}"
        else
          column_name.to_s
        end
      end

      relation = clone
      relation.select_values = args
      klass.connection.select_all(relation.arel).map! do |attributes|
        initialized_attributes = klass.initialize_attributes(attributes)
        attributes.map do |key, attr|
          klass.type_cast_attribute(key, initialized_attributes)
        end
      end
    end
  end
end 
```

如果您不想覆盖原始功能`pluck`，请将方法重命名为`pluck_all``pluck`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-19T12:53:16.723

就制作与 Rails 4 相同的 rails 3 方法而言，多列采摘。这会输出一个类似的数组（而不是散列键值集合）。如果您曾经升级并想要清理代码，这应该会节省一些痛苦。

```
module ActiveRecord
  class Relation
    def pluck_all(*args)
      args.map! do |column_name|
        if column_name.is_a?(Symbol) && column_names.include?(column_name.to_s)
          "#{connection.quote_table_name(table_name)}.#{connection.quote_column_name(column_name)}"
        else
          column_name.to_s
        end
      end

      relation = clone
      relation.select_values = args
      klass.connection.select_all(relation.arel).map! do |attributes|
        initialized_attributes = klass.initialize_attributes(attributes)
        attributes.map do |key, attribute|
          klass.type_cast_attribute(key, initialized_attributes)
        end
      end
    end
  end
end 
```

站在巨人和所有人的肩膀上

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-21T15:41:28.267

`pluck_all`在我从 Rails 3.2 升级到 Rails 4 之前，该方法运行良好。

这是一个 gem [pluck_all](https://github.com/khiav223577/pluck_all)来解决这个问题，`pluck_all`不仅在 Rails 3 中，而且在 Rails 4 和 Rails 5 中都支持方法。希望这对那些打算升级 rails 版本的人有所帮助。

# php - Web 应用程序无法与 sql 数据库交互 - 可能是权限但一切看起来都很好？

> ID：13777087
> 
> 赞同：-1
> 
> 时间：2012-12-08T11:36:34.897
> 
> 标签：php, mysql

我有一个 php web 应用程序，我试图在 xampp localhost 设置上本地运行。该网络应用程序附带一个配置文件，该文件为输入数据库名称、用户名和密码提供了空间。我输入了所有这些（四重检查所有这些与输入 PhpMyAdmin 的 SQL 详细信息是否匹配）。当我第一次加载它时，我必须创建一个数据库并从 Web 应用程序文件中导入表。问题是当我加载网络应用程序时，它不与所述数据库交互。我没有收到任何错误，并且在网站上它说例如已经创建了一个新用户，但是当我转到数据库时，我可以看到没有新条目。数据库中的现有用户也无法输入，因为它说用户/密码不正确（即它也无法读取数据库）。我很确定网络应用程序没有损坏，不知何故，这是我的错。伙计们，有什么关于出了什么问题的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:44:30.997

如果应用程序显示不正确的用户名 /pass，则意味着它正在与数据库交互，否则您会遇到错误。如果应用程序正在与数据库交互并且您仍然收到错误的用户名密码通知，那么请检查您的登录处理脚本，因为可能存在加密或其他什么。？？如果我错了，请把你的问题说清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:48:08.563

由于该应用程序本身*没有*提及任何问题，因此很明显它确实在某处存储了新条目。该应用程序很可能能够使用不同的数据库引擎，这是当今非常典型的方案。它可能会写入本地文件基于 sqlite 数据库，而您在 mysql 服务器中输入数据库的凭据，您也使用 phpMyAdmin 进行监视。

检查您输入凭据的文件，以了解应用程序能够存储的不同位置的痕迹。也许在这里发布文件。

# css - 将每个对象结果放入 span3 rails

> ID：13777089
> 
> 赞同：0
> 
> 时间：2012-12-08T11:36:39.093
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, responsive-design

我想使用 twitter bootstrap 将我从模型中获得的每个结果放入 span 3 中，这是我到目前为止所做的，但不是每个结果都垂直对齐，而是水平堆叠。我在这里有什么遗漏吗？

```
<div class="container">
 <div class="row">
  <% @recipes.each do |r| %>
   <div class="span3">
    <div class="thumbnail">
     <%= image_tag r.avatar.url(:myrecipes) %>
    </div>
    <h4><%= link_to r.dish_name, r %></h4>
    <hr>
    <p><%= r.description %></p>
    <p><%= link_to "Edit Recipe", edit_recipe_path(r.id) %></p>
    <p><%= link_to "Delete Recipe", recipe_path(r.id), :confirm => "Are you sure?", :method => :delete %></p>
    <p><%= link_to "Add to favorites",  {:controller => 'favourites', :action => 'create', :recipe_id => r.id}, {:method => :post } %></p>
    <% end %>
   </div><!--/span3-->
   </div><!--/row-->
   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:41:41.537

移动你的`</div><!-- /span3 -->` *前*`<% end %>`。

现在，在您的循环中，您打开与食谱对象一样多的 div，但只在循环外关闭一个。

# image-processing - 图像处理：通过骨骼的轴绘制一条线

> ID：13777094
> 
> 赞同：0
> 
> 时间：2012-12-08T11:37:41.970
> 
> 标签：image-processing, axis

我希望有人能指出我如何解决我的问题。. 我有 6000 张 X 光片，我必须测量它们之间的角度`bones`。

我的策略如下：如果我能以某种方式`line1`通过 的长轴`bone1`和`line2`的长轴绘制一个`bone2`，那么我可以简单地测量两条线之间的角度。

那么我怎样才能首先找到轴呢？有可能这样做吗？：

（这是一张 X 射线照片）假设`1 cm`从图片的顶部开始，我们扫描该行以查找第一个变白的像素（骨骼的第一个边缘），这里我们有一个点`A1`，我们继续扫描，直到我们找到第一个变黑的像素（bone 的第二条边），这是 dot `A2`，我们在`Y1(A1,A2)`.

我们做同样的程序，我们`10 cm`从顶部往下走，然后我们有另一条线`Y2(B1,B2)`。从中间`Y1`到中间的一条线`Y2`，将是我已经设法使用阈值、制作和边缘的骨骼轴。让画线更容易？

是否有意义？请问，可以吗？知道怎么做吗？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:02:36.867

这是一个想法：

也许如果您对图像进行下采样以获得更少的伪影和/或应用一些数学形态学（http://en.wikipedia.org/wiki/Mathematical_morphology）来减少噪声，您可以将骨骼转换为更多线形的分离图形。

应用一些阈值，以便您可以拥有黑白二值图片。使用数学在 2 个形状中的每一个中找到一个点，然后尝试将它们与矩形或椭圆形匹配。这些将为您提供您正在寻找的轴，然后您可以测量角度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T01:05:34.877

这个问题太笼统了。图像将永远受到赞赏！我猜你有 6000 张 X 射线产生骨骼的灰度图像。在这种情况下，一般的想法是： 1\. 在 3d 中找到骨骼的良好二元分割 2\. 找到 2 个骨骼的良好[骨架](http://www.inf.u-szeged.hu/~palagyi/skel/skel.html)，也看看[这个](https://code.google.com/p/skeletonization/) 3\. 用线段替换两个骨骼的主要骨架最好近似它并测量它们之间的两个角度（在 3d 中） 4\. 如果这是身体中的两个骨骼 - 通常两个连接骨骼的自由度是有限的。最好根据这个参考来验证它。

就准确性而言，实时跟踪线路可能不是最好的。我想这很明显。

[这](http://hal.inria.fr/docs/00/59/02/12/PDF/3dpvt-skeleton.pdf)可以为完整的人体姿势提供一个想法。

# mongodb - 更新包含在 MongoDB 文档中的数组中的子文档

> ID：13777097
> 
> 赞同：9
> 
> 时间：2012-12-08T11:38:34.127
> 
> 标签：mongodb, meteor

```
Documents.update(
  {_id: Session.get("current_document_id")}, 
  {$push: {schema: {type: "text", size: size, name: name, label: label}}}
); 
```

上面的查询是一个 Meteor 集合，'Documents.update' 映射到 MongoDB 文档 (http://docs.mongodb.org/manual/applications/update/) 中的 'db.documents.update'。通过该查询，我可以在主文档中添加架构文档。子文档存储在一个数组中：

```
Document:
  schema:
    array:
      {type: "text", size: 6, name: "first_name", label: "First name"},
      {type: "text", size: 6, name: "last_name", label: "Last name"} 
```

我想用这个查询修改子文档的名称和大小属性：

```
Documents.update(
  {_id: Session.get("current_document_id"), 'schema' : "first_name"}, 
  {$push: {schema: {type: "text", size: 7, name: name, label: "First Name2"}}}
); 
```

但是该操作直接在模式下附加一个新对象并删除数组：

```
Document:
  schema:
      {type: "text", size: 7, name: "first_name", label: "First Name2"} 
```

如何修改查询以更改属性以避免此问题？查询后我想要这个文件：

```
Document:
  schema:
    array:
      {type: "text", size: 7, name: "first_name", label: "First name2"},
      {type: "text", size: 6, name: "last_name", label: "Last name"} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-08T16:48:02.210

`$set`您可以使用使用[`$`](http://docs.mongodb.org/manual/reference/operator/positional/)位置运算符来识别选择器中匹配的数组元素的操作来更新现有数组元素，如下所示：

```
Documents.update(
  {_id: Session.get("current_document_id"), 'schema.name': "first_name"}, 
  {$set: {'schema.$': {type: "text", size: 7, name: name, label: "First Name2"}}}
); 
```

这会将匹配的元素替换为对象`schema`中包含的元素。`$set`

如果您只想更新目标`schema`元素的各个字段，可以使用点表示法。例如，仅更新`size`and`name`字段：

```
Documents.update(
  {_id: Session.get("current_document_id"), 'schema.name': "first_name"}, 
  {$set: {'schema.$.size': 7, 'schema.$.name': name}}
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-20T16:29:56.200

您可以将 arrayFilters 与位置 $[] 运算符一起使用

以下来自官方 mongodb 文档的示例使用“elem”作为位置标识符

* * *

考虑一个包含以下文档的学生集合：

```
{
   "_id" : 1,
   "grades" : [
      { "grade" : 80, "mean" : 75, "std" : 6 },
      { "grade" : 85, "mean" : 90, "std" : 4 },
      { "grade" : 85, "mean" : 85, "std" : 6 }
   ]
}
{
   "_id" : 2,
   "grades" : [
      { "grade" : 90, "mean" : 75, "std" : 6 },
      { "grade" : 87, "mean" : 90, "std" : 3 },
      { "grade" : 85, "mean" : 85, "std" : 4 }
   ]
} 
```

要修改等级数组中等级大于或等于 85 的所有元素的均值字段的值，请使用位置 $[] 运算符和 arrayFilters：

```
db.students2.update(
   { },
   { $set: { "grades.$[elem].mean" : 100 } },
   {
     multi: true,
     arrayFilters: [ { "elem.grade": { $gte: 85 } } ]
   }
) 
```

# cakephp-2.1 - 在 CakePHP 2.1 中使用 $this->set() 中的函数

> ID：13777098
> 
> 赞同：1
> 
> 时间：2012-12-08T11:38:49.970
> 
> 标签：cakephp-2.1

我只是想知道如何使用`$this->set()`CakePHP 中的方法来使用/定义自己的函数？我想做这样的事情......

*应用控制器.php*

```
<?php
    function checkSetup() {
        if ($this->Auth->user('setup') == 'notcomplete') { return true; }
    }

    $this->set('isSetup', checkSetup());
?> 
```

然后我将能够在我的视图文件中访问和调用它：

```
<?php if ($isSetup): ?>
You haven't setup your profile yet!
<?php endif; ?> 
```

我已经尝试过了，但它显然不起作用，因为我遇到了一个巨大的致命错误。关于如何做到这一点的任何想法/建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:17:49.743

```
$this->set('isSetup', checkSetup()); 
```

该行需要在某个函数内才能被调用。大概你想要它在你的应用程序控制器的 beforFilter 中 - 像这样：

```
<?php

App::uses('Controller', 'Controller');

class AppController extends Controller {

    function beforeFilter() {
        $this->set('isSetup', checkSetup());
    }

    function checkSetup() {
        if ($this->Auth->user('setup') == 'notcomplete') { return true; }
    }

}

?> 
```

# performance - 我们应该使用 StackPanel 还是 Grid 作为 Listbox 项模板

> ID：13777104
> 
> 赞同：1
> 
> 时间：2012-12-08T11:40:32.600
> 
> 标签：performance, windows-phone-7, grid, datatemplate, stackpanel

听说为了提高`Listbox`性能，我们应该使用简单的`ListBoxItem`模板。

在每一`Listbox`行中，我想显示 3 张图像。我应该对这`StackPanel`3 张图像使用水平，还是`Grid`使用 3 列？

`StackPanel`而且，我应该指定/的高度`Grid`吗？这样做可以获得更好的性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:03:10.897

在制作 Listbox 时，最佳做法是使用 StackPanel。StackPanel 和 Grid 之间的基本区别在于，StackPanel 会在添加每个 ItemTemplate 时自动调整其方向。

如果您决定使用 StackPanel，则无需指定宽度。但是，您可以指定堆栈面板的最大高度以使您的列表框看起来更好。

使用 Grid 也没有坏处。如果您希望拥有字母数字数据列，那么使用网格可能是一个更好的主意。

# php - 如何构建模块化网站？

> ID：13777105
> 
> 赞同：-1
> 
> 时间：2012-12-08T11:40:32.133
> 
> 标签：php, codeigniter, web

我刚刚加入了一个小型网站开发团队，我们现在正在做的项目是一个购物网站。我们使用的框架是codeigniter。我是团队中唯一的新手。团队中的其他人已经一起工作了一段时间。他们希望将网站的功能模块化，这意味着他们希望避免重复代码，我们每个人都负责某些部分，在我们完成自己的部分后，我们可以将它们放在一起。但是我意识到他们甚至没有讨论我们应该遵循什么标准，比如网站的风格，布局，如果我们想让网站模块化怎么办等等。我想和负责人谈谈团队关于这个，如果有必要我实际上愿意做这项工作，但我对网站开发的程序知之甚少，尤其是如何使网站模块化。有人可以教我一点吗？或一些建议？网上资源？图书？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:56:08.973

[我建议看一下主要内容管理系统](http://de.wikipedia.org/wiki/Content-Management-System "内容管理系统")的架构和设计决策。就我个人而言，我发现[Drupal](http://drupal.org)的设计是一种强大的模块化设计（尽管乍一看它可能看起来非常复杂）。

这是一个[很好](http://drupal.org/getting-started/before/overview "关联")的关于 Drupal 体系结构的概述作为起点。祝你好运

# c# - 等到 GeckoFX 网络浏览器加载完毕

> ID：13777107
> 
> 赞同：1
> 
> 时间：2012-12-08T11:40:43.650
> 
> 标签：c#, browser, pageload, geckofx

我想用 GeckoFX 在我的网站上自动化一些任务以进行一些测试。当我单击一个按钮时应该会发生这种情况，并且在单击该按钮后一切都应该自动化。这包括单击页面刷新的按钮，因此代码必须等到页面加载完毕，这就是我的问题所在。

如果我这样做：

```
geckoWebBrowser1.Navigate("http://mywebsite.com");
GeckoInputElement searchText = new GeckoInputElement(geckoWebBrowser1.Document.GetElementsByName("searchbox")[0].DomObject);
            searchText.Value = "GeckoFx"; 
```

我得到一个错误，那么我怎么能把 .Navigate 之后的代码等到 webbrowser 完全加载页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-25T08:57:36.830

您可以使用`DocumentCompleted`Method 来执行您的自动操作。

```
private void geckoWebBrowser1_DocumentCompleted(object sender,EventArgs e)
    {
          // Here you can add the coding to perform after document loaded
    } 
```

例如：首先启动浏览器到谷歌页面`geckoWebBrowser1.Navigate("https://www.google.com");`

谷歌页面加载后，您可以在 document_completed 方法中执行以下操作：

```
GeckoInputElement search =new GeckoInputElement(geckoWebBrowser2.Document.GetElementsByName("q")[0].DomObject);
        GeckoInputElement button = new GeckoInputElement(geckoWebBrowser2.Document.GetElementsByName("btnG")[0].DomObject);
        search.focus();
        search.Value = "Master Blaster Sachin";            
        button.Click(); 
```

所以它会在谷歌页面加载后自动搜索你给出的值。像这样，您可以根据自己的逻辑修改程序。希望能帮助到你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:59:39.027

我会去使用像 Selenium [http://seleniumhq.org/](http://seleniumhq.org/)这样的产品。它是可编写脚本的免费开源 Web 测试。

# java - 如何在java中自动填充数组..？

> ID：13777108
> 
> 赞同：0
> 
> 时间：2012-12-08T11:40:45.767
> 
> 标签：java, arrays

如何在不使用任何循环的情况下使用'-1'在java中自动填充数组（特别是多维）？

我知道默认情况下java用'0'初始化数组的所有元素。但是，如果我想一次用 -1 替换所有零怎么办..！不使用任何循环。

有没有捷径可用..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T11:42:17.013

您可以使用[Arrays.fill](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#fill%28int%5B%5D,%20int%29)填充一维数组，但您必须循环访问多维数组。

```
 int[][] array = new int[100][100];
    for (int[]a : array) {
        Arrays.fill(a, -1);
    } 
```

您避免循环的原因是什么？如果您关心性能（并且您确定存在问题），您可能会做经常做的事情，即将您的数组扁平化为一维数组：

```
 int[] flatarray = new int[width*height]; 
```

然后你可以只用一个来填充它`fill`（虽然它隐藏了一个循环），而且许多操作会更有效率。访问一个单元格将是`flatarray[x+y*width]`。但您应该首先配置文件以确保您需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T11:42:29.577

您可以使用[`Arrays.fill`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#fill%28int%5b%5d,%20int%29)方法来填充一维数组：-

```
int[] array = new int[5];
Arrays.fill(array, -1); 
```

要填充二维数组，您可以通过迭代将上述方法应用于每个一维数组。

```
int[][] multiArr = new int[10][10];
for (int[] innerArr: multiArr) {
    Arrays.fill(innerArr, -1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T11:42:36.477

利用[`Arrays.fill()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#fill%28int%5B%5D,%20int%29)

```
public static void fill(int[][] array, int element) {
    for(int[] subarray : array) {
        Arrays.fill(subarray, element);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T11:42:58.503

对于一维数组，您可以使用

```
int[] array = new int[9000];
Arrays.fill(array, -1) 
```

但是对于多维数组，您将不得不使用循环。

您不使用循环的要求听起来相当随意，因为实际上即使是一维数组，您也正在使用循环。它只是隐藏在`fill`方法中。在技​​术层面上，没有循环就无法填充数据结构！

你最好学会停止担心并喜欢 for 循环。

# android - Android 上的 pthread_sigmask 不起作用？

> ID：13777109
> 
> 赞同：3
> 
> 时间：2012-12-08T11:41:00.167
> 
> 标签：android, android-ndk

看来 pthread_sigmask 在 Android 上不起作用。这个问题似乎早在 2 年前就已经[在这里](http://code.google.com/p/android/issues/detail?id=15337)报告过了，但开发人员没有做出任何回应。我遇到了一个非常相似的问题（我的代码如下供参考）。我做错了什么，还是Android NDK有问题？以及关于如何使用两个线程来处理仅限于线程的特定信号的任何提示/帮助？

我在 Android 2.2 上运行此代码。

```
// block the signal in this thread
sigset_t signals;
sigemptyset(&signals);
sigaddset(&signals, SIGALRM);
int ret = pthread_sigmask(SIG_BLOCK, &signals, NULL);
if (ret) {
    LOG("pthread_sigmask failed. %d", ret);
} 
```

我收到错误 22 (EINVAL)。SIG_UNBLOCK 我也遇到了同样的错误。

更新：看起来它适用于 4.1 设备。我尝试了4.1，它似乎成功了。它在 2.3 和 4.0 设备上也失败了。

关于如何确保特定信号的信号处理程序仅在一个线程上运行的任何提示？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:59:56.823

看起来这里的实现是固定的：

[https://android.googlesource.com/platform/bionic/+/9bf330b5676d0f60b3e4c3b8985494bcb1134e8b](https://android.googlesource.com/platform/bionic/+/9bf330b5676d0f60b3e4c3b8985494bcb1134e8b)

您也许可以使用 sigprocmask() 代替，尽管该行为并未针对多线程进程正式定义。

# c# - .net 中的 IL 和堆栈实现？

> ID：13777112
> 
> 赞同：10
> 
> 时间：2012-12-08T11:41:38.420
> 
> 标签：c#, .net, compiler-construction, il

我编写了一个简单的程序来检查 IL 的工作原理：

```
void Main()
{

 int a=5;
 int b=6;
 if (a<b) Console.Write("333");
 Console.ReadLine();
} 
```

伊利诺伊：

```
IL_0000:  ldc.i4.5    
IL_0001:  stloc.0     
IL_0002:  ldc.i4.6    
IL_0003:  stloc.1     
IL_0004:  ldloc.0     
IL_0005:  ldloc.1     
IL_0006:  bge.s       IL_0012
IL_0008:  ldstr       "333"
IL_000D:  call        System.Console.Write
IL_0012:  call        System.Console.ReadLine 
```

*我试图了解实现的效率：*

*   在第 1 行（IL 代码），它将值 5 推入堆栈（4 个字节，即 int32）

*   在第 #2 行（IL 代码），它从堆栈弹出到局部变量中。

*接下来的 2 行也是如此。*

然后，它将这些局部变量加载到堆栈上，*然后*进行评估`bge.s`。

**问题 #1**

为什么他将局部变量加载到堆栈中？这些值*已经*在堆栈中。但他弹出它们是为了将它们放入局部变量中。这不是浪费吗？

我的意思是，为什么代码不能是这样的：

```
IL_0000:  ldc.i4.5
IL_0001:  ldc.i4.6    
IL_0002:  bge.s       IL_0004
IL_0003:  ldstr       "333"
IL_0004:  call        System.Console.Write
IL_0005:  call        System.Console.ReadLine 
```

我的代码示例只有 5 行代码。50,000,000 行代码呢？IL会发出大量额外的代码

**问题2**

看代码地址：

![在此处输入图像描述](../Images/b9a264026ee6d04141c687de825d7bf7.png)

*   IL_0009 地址在哪里？它不应该是顺序的吗？

*ps Im 带有优化标志 + 发布模式*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T11:46:07.260

我可以轻松回答第二个问题。指令是可变长度的。例如，`ldstr "333"`由`ldstr`(at address `8`) 的操作码和表示字符串的数据（对用户字符串表中的字符串的引用）组成。

`call`与下面的语句类似- 您需要`call`操作码本身以及要调用的函数的信息。

将像 4 或 6 这样的小值压入堆栈的指令没有额外数据的原因是因为这些值被编码到操作码本身中。

有关说明和编码，请参见[此处](http://en.wikipedia.org/wiki/List_of_CIL_instructions)。

关于第一个问题，您可能想看看[C# 开发人员之一 Eric Lippert 的这篇博客文章](http://blogs.msdn.com/b/ericlippert/archive/2009/06/11/what-does-the-optimize-switch-do.aspx)，其中指出：

> /optimize 标志不会大量改变我们的发射和生成逻辑。我们尝试始终生成简单、可验证的代码，然后在生成真实机器代码时依靠抖动进行繁重的优化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T13:04:03.713

> 为什么他将局部变量加载到堆栈中？这些值已经在堆栈中。但是他弹出它们是为了将它们放入局部变量中。不是浪费吗？

浪费什么？您必须记住，IL（通常）不是按原样执行的，而是由执行大部分优化的 JIT 编译器再次编译的。使用“中间语言”的要点之一是可以在一个地方实现优化：JIT 编译器和每种语言（C#、VB.NET、F#，...）不必重新实现它们。Eric Lippert 在他的文章[*Why IL？*](http://blogs.msdn.com/b/ericlippert/archive/2011/11/18/why-il.aspx)

> IL_0009 地址在哪里？不应该是顺序的吗？

让我们看一下`ldstr`指令的规范（来自[ECMA-335](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)）：

> III.4.16 `ldstr`– 加载文字字符串
> 
> 格式：72 <T> […]
> 
> 该`ldstr`指令推送一个新的字符串对象，该对象将存储在元数据中的文字表示为字符串（这是一个字符串文字）。

上面提到的元数据和 <T> 意味着`72`指令的字节后面跟着一个元数据标记，它指向一个包含字符串的表。这样的令牌有多大？从同一文件的第 III.1.9 节：

> 许多 CIL 指令后跟一个“元数据令牌”。这是一个 4 字节的值，它指定元数据表中的一行 […]

因此，在您的情况下，`72`指令的字节位于地址 0008 处，而令牌（在本例中为 0x70000001，其中 0x70 字节表示用户字符串表）位于地址 0009 到 000C 处。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-08T11:58:36.347

在这个级别上对 IL 效率进行推理是没有意义的。

JIT 将完全消除堆栈，将所有堆栈操作转换为中间三地址代码（并进一步向下转换为 SSA）。由于 IL*永远不会*被解释，因此堆栈操作不应该是高效和优化的。

例如，请参阅开源 Mono 实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T16:13:23.573

To give a final answer to all this discussion about "extra code".

The C# compiler reads `int a=5;` and translates that to:

```
ldc.i4.5
stloc.0 
```

Then it goes to the next line and reads `int b=6;` and that is translated to:

```
ldc.i4.6
stloc.1 
```

And then it reads the next line with the if statement and so on.

When compiling from C# to IL it reads line by line and translates that line to IL, not that line when looking at other lines.

To optimize the IL and remove the "extra code" (that you call it) in this stage the C# compiler would have to check all the IL code, build a tree representation of it, remove all unneeded nodes and then write it as IL again. This is not something that the C# compiler should do since this will be done by the JIT compiler when going from IL to machine language.

So the code that you see as extra is not extra code, it is part of the statements that the C# compiler has read from your C# code and will be removed when the JIT compiler compiles the code to a native executable.

This was a high level explanation of how the C# code is translated since I don't think that you have taken any classes in compiler construction or anything like that. If you want to know more there are books and pages on the internet to read.

# wordpress - 如何仅在 WordPress 中为 Opera Mini 用户显示特定内容

> ID：13777115
> 
> 赞同：0
> 
> 时间：2012-12-08T11:41:56.747
> 
> 标签：wordpress, opera, user-agent, ads

我已经广泛搜索，但仍然找不到有效的解决方案。

问题是我想知道是否有一种方法可以配置我的 wordpress 主题来检测 Opera Mini 用户并向他们显示特定的广告/内容，同时向其他浏览器用户显示不同的广告/内容作为后备。

我超过 80% 的移动流量是基于 Opera Mini 的，我想有效地利用它获利。

我猜这可以用 PHP 完成，但我不知道如何编写它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:51:50.147

测试 $_SERVER['HTTP_USER_AGENT'] 全局变量以查看它是否包含字符串“Opera Mini”。

[PHP 手册：$_SERVER](http://php.net/manual/en/reserved.variables.server.php)

或者，**甚至更好**

```
$browser = get_browser(null, true); 
```

它返回一个浏览器信息数组。“浏览器”键包含实际的浏览器名称。

[PHP 手册：get_browser](http://php.net/manual/en/function.get-browser.php)

最简单的方法是根据这些可能性中的任何一种将特定内容包装在条件中。

例如：

```
$browser = get_browser(null, true);
if ($browser == "Opera Mini") {
    // display image
} else {
    // display other image
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:53:41.460

是时候复习一下你的 php 基础知识了，UdegbunamChuks。

```
<?php

$isOperaMini = <<<HEREDOC
<a rel="nofollow" target="_blank" href="http://goo.gl/RopBp">
<img src="http://www.patchworkoftips.com/wp-content/themes/adclerum3/images/BBMobile.jpg" title="Buy Cheap BlackBerry Phones" alt="Buy Cheap BlackBerry Phones">
</a>
HEREDOC;

$notOperaMini = <<<HEREDOC
    <script type="text/javascript"><!--
google_ad_client = "ca-pub-4322797130930030";
/* Patchwork Below Post Mobile */
google_ad_slot = "1887667973";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
HEREDOC;

$browser = get_browser(null, true);
if ($browser == "Opera Mini") {
    echo $isOperaMini;
} else {
    echo $notOperaMini;
}

?> 
```

# google-apps-script - 阻止最终用户对单元格内容使用 CTRL-X / CUT

> ID：13777117
> 
> 赞同：1
> 
> 时间：2012-12-08T11:42:06.897
> 
> 标签：google-apps-script, google-sheets

有没有办法防止最终用户剪切单元格内容？因此防止使用 CTRL-X（和电子表格菜单 EDIT-> Cut），但允许编辑和复制单元格内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:48:52.443

您的问题相当模糊...我想您正试图将某些单元格的访问权限限制为“只读”...这与 GAS 有什么关系？

在电子表格菜单中，您可以定义一个命名区域（可以是单个单元格）并选择有权访问它的人。就如此容易 。 ![在此处输入图像描述](../Images/5ea77ce8798f933744a08f9205e03009.png)

# sql - 具有最大值的行

> ID：13777131
> 
> 赞同：-2
> 
> 时间：2012-12-08T11:43:19.890
> 
> 标签：sql

我想检索一列中包含 MAX 值的所有行和列。

例如：3 列 - ID（不是唯一的）、名称、年龄我想要所有包含年龄最大值的行和列。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:46:27.740

SELECT * FROM table WHERE age = (SELECT MAX(age) FROM table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:48:43.210

```
Select * from table where value=max(value) 
```

也许你需要交换 where with have

# php - 谷歌地图仅从 MYSQL 加载一条记录

> ID：13777133
> 
> 赞同：0
> 
> 时间：2012-12-08T11:43:30.780
> 
> 标签：php, javascript, maps

这是我在这里的第一篇文章，让我打个招呼:)

我的谷歌地图有问题。我尝试做的是从 mySQL 数据库中获取位置，并为地图上的每个位置设置一个标记。看起来非常基本和容易。但是作为一名化学家，我对网络开发人员的了解非常有限；）我的页面做了什么 - 它只加载一条记录，而不是两条（无论如何，数据库中只有两行）。你可以[在这里找到代码](http://pastebin.com/M6Jv7yK2)

我已经用另一个脚本检查了查询-sit 获取了两条记录，而循环似乎也很好。但不知何故，我在地图上只得到了 1 个标记 :( 请你看看并检查错误吗？我认为循环中的标记生成有问题......

干杯，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:48:32.193

你只有一个标记。

var marker_ = new google.maps.Marker({ position: myLatLng, map: map, title: tytul, zIndex: id });

这是处理它的好方法： [Google Maps JS API v3 - Simple Multiple Marker Example](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example)

# php - 仅从电子邮件中单击的链接对用户进行身份验证

> ID：13777136
> 
> 赞同：2
> 
> 时间：2012-12-08T11:43:54.133
> 
> 标签：php, authentication, symfony

我有一个使用 Symfony2 构建的 Web 应用程序，其中一些项目与其他用户共享。共享项目时，用户会收到指向该项目的链接。我希望收到链接的用户在单击电子邮件时自动获得该站点的身份验证。到目前为止，我所做的是：

1.  使用共享链接生成唯一令牌并将其附加到链接
2.  当共享链接的用户单击链接时，将检查唯一令牌并验证相应用户。

但是，这种方法存在缺陷。如果其他用户在浏览器中复制并粘贴相同的链接，或者原始收件人将邮件转发给其他人，则其他用户将被验证为链接的原始收件人。克服这些缺陷的方法应该是什么？我真正想要的是：

1.  链接应仅在从电子邮件中单击时对用户进行身份验证，并且不应允许直接访问。
2.  仅当从最初发送链接的电子邮件中单击链接时，才能对用户进行身份验证。

我读过一些要求有些相似但不完全相同的问题。此外，对他们的回应导致得出的结论是这是不可能的。真的吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T11:53:22.003

不幸的是，在这种情况下，您无能为力。

您可以检查推荐人，但正如用户 Cthulhu 指出的那样，这样的检查将不可靠并且容易出错。

你可以：

1.  确保有问题的令牌对其用户帐户是唯一的。即没有两个用户可以拥有相同的令牌。
2.  将他们的用户 ID 添加到链接中，以便您可以针对特定用户帐户验证令牌（而不是针对数据库中的所有令牌进行全面搜索）。
3.  为令牌添加到期日期，这样如果有人在一个月后点击令牌，它将不再有效。
4.  在他们点击链接并验证他们的电子邮件地址/帐户后，立即禁用令牌。这确保了令牌永远不会被重复使用。

# c++ - 如何在 linux C++ 中启动进程

> ID：13777143
> 
> 赞同：1
> 
> 时间：2012-12-08T11:45:11.467
> 
> 标签：c++, linux, process

我尝试使用 exec() 函数，但我需要适用于 unix/linux 的函数，它可以通过以下方式启动进程：

1.  工作目录
2.  争论
3.  重要的！环境变量，例如 LD_PRELOAD

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:03:53.047

如果你 fork() 你得到当前进程的副本（所以相同的工作目录），然后你可以使用你需要的参数执行，这会将当前程序文本（代码）替换为目标可执行文件中的内容。尝试使用“man exec”或谷歌“fork exec”作为示例。

例如。

```
if (fork() == 0) {
  // Child process
  exec("./test", "./test", "-a", NULL); // check the null though
}
// Parent process 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:21:52.333

您可以使用 execle 或 execvpe 使用参数启动命令并覆盖环境变量（请参阅 man execvpe）。例如：

```
#include <unistd.h>

int main(int argc, char** argv[]) {
    char * const environment[] = {"TOTO=Hello world", NULL};
    char * const args[] = {"bash", "-c", "pwd; echo ""TOTO is $TOTO""", NULL};
    chdir("/");
    execvpe("bash", args, environment);
} 
```

输出

```
/
TOTO is Hello world 
```

# java - HTTPRequest 中的 EOF 异常 (Android 4.1)

> ID：13777145
> 
> 赞同：1
> 
> 时间：2012-12-08T11:45:46.353
> 
> 标签：java, android, httprequest

我（有时）在发出 HTTPRequest 时遇到 EOFException。我已经尝试设置 keepalive ="false" 但这没有帮助，所以我想问题一定出在其他地方......（我已经获得了 INTERNET 权限）......这个 AsyncTask 有时可能正在运行可能是一个问题同时不止一次？）我使用的代码是

```
package jo.z.invg.fahrplan;

import java.io.IOException;
import java.io.PrintWriter;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLEncoder;
import java.util.List;
import java.util.Scanner;

import org.apache.http.cookie.ClientCookie;
import org.apache.http.cookie.MalformedCookieException;
import org.apache.http.cookie.SetCookie;
import org.apache.http.impl.cookie.BasicExpiresHandler;
import org.apache.http.impl.cookie.BrowserCompatSpec;
import android.os.AsyncTask;
import android.text.TextUtils;
import android.util.Log;
import android.widget.Toast;

class PostRequest extends AsyncTask<PostParam, Void, String> {
    //private Exception exception;
    class LenientCookieSpec extends BrowserCompatSpec {
        public LenientCookieSpec() {
            super();
            registerAttribHandler(ClientCookie.EXPIRES_ATTR, new BasicExpiresHandler(DATE_PATTERNS) {
                @Override public void parse(SetCookie cookie, String value) throws MalformedCookieException {
                    if (TextUtils.isEmpty(value)) {
                        // You should set whatever you want in cookie
                        cookie.setExpiryDate(null);
                    } else {
                        super.parse(cookie, value);
                    }
                }
            });
        }
    }
    private boolean succ = true;
    private int info;
    private int reqnr;
    private ScheduleRequest sreq;
    @Override
    protected String doInBackground(PostParam...postData) {
        //build the string to store the response text from the server
        Log.d("Test", "Anfrage gesendet");
        String response= "***";

        reqnr = postData[0].reqnr;
        sreq = postData[0].req;
                info = postData[0].in;
                System.setProperty("http.keepAlive", "false");
                //do this wherever you are wanting to POST
                URL url;
                HttpURLConnection conn;

                try{
                //if you are using https, make sure to import java.net.HttpsURLConnection
                url=new URL(postData[0].adress);

                //you need to encode ONLY the values of the parameters

                String param = EncodeParam(postData[0].postparam);

                conn=(HttpURLConnection)url.openConnection();
                //set the output to true, indicating you are outputting(uploading) POST data

                conn.setDoOutput(true);
                //once you set the output to true, you don't really need to set the request method to post, but I'm doing it anyway
                conn.setRequestMethod("POST");
                conn.setInstanceFollowRedirects(true);
                //Android documentation suggested that you set the length of the data you are sending to the server, BUT
                // do NOT specify this length in the header by using conn.setRequestProperty("Content-Length", length);
                //use this instead.
                conn.setFixedLengthStreamingMode(param.getBytes().length);
                conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
                //conn.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:15.0) Gecko/20120830 Firefox/15.0");//User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:15.0) Gecko/20120830 Firefox/15.0

                //send the POST out
                PrintWriter out = new PrintWriter(conn.getOutputStream());
                out.print(param);

                out.close();

                //start listening to the stream
                Scanner inStream = new Scanner(conn.getInputStream());

                //process the stream and store it in StringBuilder
                while(inStream.hasNextLine()){
                response+=(inStream.nextLine());}
                //Log.d("HTTPRequest",response);

                conn.disconnect();

                }

                //catch some error
                catch(MalformedURLException ex){  
                //Toast.makeText(MyActivity.this, ex.toString(), 1 ).show();
                    Log.d("HTTPRequest", "Problem beim Postrequest",ex);
                }
                // and some more
                catch(IOException ex){
                    succ = false;
                    if(!(INVG_Fahrplan.INVG_this.isOnline())){INVG_Fahrplan.INVG_this.runOnUiThread(new Runnable() {
                        public void run() {
                            Toast.makeText(INVG_Fahrplan.INVG_this,"Keine Internetverbindung", Toast.LENGTH_LONG).show();
                        }
                    });}
                    else{
                        INVG_Fahrplan.INVG_this.runOnUiThread(new Runnable() {
                            public void run() {
                                Toast.makeText(INVG_Fahrplan.INVG_this,"Fehler bei der Abfrage", Toast.LENGTH_LONG).show();
                            }
                        });
                    }

                    Log.d("HTTPRequest", "Problem beim Postrequest",ex);
                //Toast.makeText(MyActivity.this, ex.toString(), 1 ).show();
                }
                return response;
            }
    public String EncodeParam (List<PostNameValuePair> para){
        String param = "";
        for (PostNameValuePair nvp: para){
            try{
                param += nvp.name +"=" + URLEncoder.encode(nvp.value, "UTF-8") + "&";
            }catch (Exception e){
                Log.d("HTTPRequest", "Problem beim Postrequest",e);
            }

        }
        return param.substring(0, param.length()-1);
    }

    protected void onPostExecute(String result) {
       if(succ){
        if (info == 1){
        sreq.ParseRequest(result,1,-1,reqnr);
       }else if (info == 2){
           sreq.ParseDetails(result,reqnr);
       }}else{
           sreq.reqerror(info);
       }
        //sreq.ParseRequest(result,1);
    }

 } 
```

提前感谢您的帮助；D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T06:09:56.200

我有时也会收到此错误，但仅在模拟器上 - 对我来说似乎是一个模拟器错误。

[如何为 Android 模拟器设置 Internet 选项？](https://stackoverflow.com/questions/2437366/android-emulator-internet-access)帮了我很多。:)

# java - 黑白棋/黑白棋评估函数

> ID：13777146
> 
> 赞同：0
> 
> 时间：2012-12-08T11:45:48.330
> 
> 标签：java, artificial-intelligence

我已经编写了自己的黑白棋播放器，基于 MiniMax 算法，使用 Alpha-Beta 修剪，但在前 10 步中，我的评估函数太慢了。我需要一个好的早期游戏评估功能。

我正在尝试使用这个矩阵（对应于棋盘）来确定该正方形的有利程度：

```
 { 30, -25, 10, 5, 5, 10, -25,  30,},
   {-25, -25,  1, 1, 1,  1, -25, -25,},
   { 10,   1,  5, 2, 2,  5,   1,  10,},
   {  5,   1,  2, 1, 1,  2,   1,   5,},
   {  5,   1,  2, 1, 1,  2,   1,   5,},
   { 10,   1,  5, 2, 2,  5,   1,  10,},
   {-25, -25,  1, 1, 1,  1, -25, -25,},
   { 30, -25, 10, 5, 5, 10, -25,  30,},}; 
```

但效果不好。

你甚至为黑白棋写过早期的游戏评估函数吗？

# java - Java在HashMap中查找最接近的上一个日期

> ID：13777147
> 
> 赞同：1
> 
> 时间：2012-12-08T11:45:54.297
> 
> 标签：java, date, search, hashmap

我有一个问题要解决，我需要在 Java 中创建一个会计和簿记解决方案部分（现在只是后端）。他们要求系统存储给定产品以前的价格，所以我决定使用`HashMap<Date,Integer>`.

现在的问题是，系统必须能够检索给定时间的价格，用于记账，追溯购买（订单存储商品，以及购买时间，因此可以轻松回顾）。一切都会好的，但是如果购买日期与定价日期不匹配，那么简单的 get 方法会返回 null。到目前为止，我还无法逻辑出一种搜索方法，该方法在购买日期之前查找前一个日期，以返回价格。

有什么建议的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T11:50:24.053

我建议你检查一下[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)。

要获得最接近的日期，`date`您可以这样查找：

```
return map.get(map.headMap(date, true).lastKey()); 
```

上面的分解：

*   `previous = map.headMap(date, true)`返回所有以前的条目（包括日期）
*   `closestMatchingKey = previous.lastKey()`返回该（上方）映射中的最后一个键
*   `map.get(closestMatchingKey)`返回匹配项（或者`null`如果没有）

* * *

## 例子：

```
public static void main(String[] args) {

    TreeMap<Date, String> map = new TreeMap<>();

    map.put(new Date(0), "First");
    map.put(new Date(10), "Second");
    map.put(new Date(20), "Third");
    map.put(new Date(30), "Fourth");
    map.put(new Date(40), "Fifth");

    System.out.println(getClosestPrevious(map, new Date(5)));
    System.out.println(getClosestPrevious(map, new Date(10)));
    System.out.println(getClosestPrevious(map, new Date(55)));
}

private static String getClosestPrevious(TreeMap<Date, String> map, Date date) {
    return map.get(map.headMap(date, true).lastKey());
} 
```

**输出：**

```
First
Second
Fifth 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:11:45.487

你需要的是使用一个`TreeMap`特别是方法[NavigableMap#foorEntry](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#floorEntry%28K%29)（我的重点）：

> public Map.Entry floorEntry(K键)
> 
> **从接口复制的描述： NavigableMap 返回与小于或等于给定键**的最大键关联的键值映射，如果没有这样的键，则返回 null。
> 
> 指定者：接口 NavigableMap 中的 floorEntry

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T11:51:37.150

据我了解，您地图的键是日期。如果是这样，我建议您`TreeMap`改为`HashMap`使用实现“最近”日期逻辑的自定义比较器。`compare()`当日期与给定的日期足够接近而无需精确匹配时，比较器的方法将返回 0。

# jquery - 同步两个 div 以调整大小

> ID：13777150
> 
> 赞同：1
> 
> 时间：2012-12-08T11:46:26.560
> 
> 标签：jquery, html

问题陈述：

我想有一个屏幕空间，在 div 中有一个背景图像，在背景图像上有另一个图像。背景图像上方的图像应该是可拖动和可调整大小的，并且当我添加它时它应该自动调整为背景图像的百分比缩放。此外，背景和其他图像应按比例放大和缩小。

请帮忙！

我的做法：

有两个div。一个 div 有一个图像作为其背景。第二个 div 有另一个可拖动的图像。

我不能做的是同步这两个 div，以便它们可以按比例放大和缩小。

先感谢您 ：）

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>jquery.iviewer test</title>
        <link href="jquery.iviewer.css"  rel="stylesheet" type="text/css" /ss>
        <script type="text/javascript" src="jquery.js" ></script>
        <script type="text/javascript" src="jqueryui.js" ></script>
        <script type="text/javascript" src="jquery.mousewheel.min.js" ></script>
        <script type="text/javascript" src="jquery.iviewer.js" ></script>
        <script type="text/javascript">
            var $ = jQuery;
            $(document).ready(function(){
                  var iv1 = $("#viewer").iviewer({
                       src: "meditation.png", 
                       update_on_resize: true,
                       zoom_animation: true,
                       mousewheel: true,
                       onMouseMove: function(ev, coords) { },
                       onStartDrag: function(ev, coords) { return false; }, //this image can be dragged
                       onDrag: function(ev, coords) { }
                  });

                   $("#in").click(function(){ iv1.iviewer('zoom_by', 1); }); 
                   $("#out").click(function(){ iv1.iviewer('zoom_by', -1); }); 
                   $("#fit").click(function(){ iv1.iviewer('fit'); }); 
                   $("#orig").click(function(){ iv1.iviewer('set_zoom', 100); }); 
                   $("#update").click(function(){ iv1.iviewer('update_container_info'); });
            });
        </script>

        <link rel="stylesheet" type="text/css" href="common/common.css"/>

        <script language="JavaScript" type="text/javascript" src="core.js"></script>
        <script language="JavaScript" type="text/javascript" src="events.js"></script>
        <script language="JavaScript" type="text/javascript" src="css.js"></script>
        <script language="JavaScript" type="text/javascript" src="coordinates.js"></script>
        <script language="JavaScript" type="text/javascript" src="drag.js"></script>

        <script language="JavaScript"><!--
        window.onload = function() {
        var group
        var coordinates = ToolMan.coordinates()
        var drag = ToolMan.drag()

        var boxDrag = document.getElementById("boxDrag")
        drag.createSimpleGroup(boxDrag)

        var boxVerticalOnly = document.getElementById("boxVerticalOnly")
        group = drag.createSimpleGroup(boxVerticalOnly)
        group.verticalOnly()

        var boxHorizontalOnly = document.getElementById("boxHorizontalOnly")
        group = drag.createSimpleGroup(boxHorizontalOnly)
        group.horizontalOnly()

        var boxRegionConstraint = document.getElementById("boxRegionConstraint")
        group = drag.createSimpleGroup(boxRegionConstraint)
        var origin = coordinates.create(0, 0)
        group.addTransform(function(coordinate, dragEvent) {
        var originalTopLeftOffset = 
                dragEvent.topLeftOffset.minus(dragEvent.topLeftPosition)
        return coordinate.constrainTo(origin, originalTopLeftOffset)

            })

        var boxThreshold = document.getElementById("boxThreshold")
        group = drag.createSimpleGroup(boxThreshold)
        group.setThreshold(25)

        var boxHandle = document.getElementById("boxHandle")
        group = drag.createSimpleGroup(boxHandle, document.getElementById("handle"))

        var boxAbsolute = document.getElementById("boxAbsolute")
        group = drag.createSimpleGroup(boxAbsolute)
        group.verticalOnly()
        group.addTransform(function(coordinate, dragEvent) {
            var scrollOffset = coordinates.scrollOffset()
            if (coordinate.y < scrollOffset.y)
                return coordinates.create(coordinate.x, scrollOffset.y)

            var clientHeight = coordinates.clientSize().y
            var boxHeight = coordinates._size(boxAbsolute).y
            if ((coordinate.y + boxHeight) > (scrollOffset.y + clientHeight))
                return coordinates.create(coordinate.x, 
                        (scrollOffset.y + clientHeight) - boxHeight)

            return coordinate
            })
        }
        </script>

        <link rel="stylesheet" href="/jquery.iviewer.css" />

        <style>
            .viewer
            {
                width: 75%;
                height: 800px;
                border: 1px solid black;
                position: relative;
                overflow:scroll;
            }

            .wrapper
            {
                overflow: hidden;
            }

            div {
                margin: 0px;
                padding: 0px;
            }
            .verticalgridline {
                padding-top: 27px;
            }
            .box {
                float: left;
                padding: 0px;
            }

            #boxDrag, #boxVerticalOnly, #boxHorizontalOnly, #boxRegionConstraint, 
            #boxThreshold, #boxAbsolute {
                cursor: move;
            }
            #boxAbsolute {
                position: absolute;
                bottom: 0px;
                right: 0px;
            }
        </style>

    </head>

    <body>
        <h1>Design Page</h1>
        <!-- wrapper div is needed for opera because it shows scroll bars for reason -->
        <div class="wrapper">
            <div id="viewer" class="viewer" >
                <div id="boxDrag" class="box">
                    <img src="4.png" />
                </div>
            </div>
        </div>

    </body>
</html> 
```

# c++ - 从 var 转换为 var&

> ID：13777167
> 
> 赞同：0
> 
> 时间：2012-12-08T11:49:13.983
> 
> 标签：c++

如何将类型变量转换`var`为`var*``var&`

我必须使用一个接受 var 类对象的函数（假设有一个类）。示例代码是这样给出的：-

```
testFunc(false, namespace1::namespace2::var(), 100); 
```

在函数声明中它说第二个参数是类型`namespace1::namespace2::var&`，我可以创建`namespace1::namespace2::var`或`namespace1::namespace2::var*`，但我如何创建`namespace1::namespace2::var&`？

我知道这是太基本的问题，但我无法弄清楚。

**编辑：**
我试过使用 just `var`，但它给出了一些奇怪的错误。我很确定这是我正在使用的功能中的某种错误。以下是错误：-

```
Error   3   error C2825: 'CType': must be a class or namespace when followed by '::'
Error   4   error C2039: 'TypeCode' : is not a member of '`global namespace''
Error   5   error C2146: syntax error : missing ',' before identifier 'TypeCode'
Error   6   error C2065: 'TypeCode' : undeclared identifier 
Error   7   error C3203: 'CustomType' : unspecialized class template can't be used as a template argument for template parameter 'Base', expected a real type 
```

**编辑 2**

我认为如果我包含真实的代码很难回答，因为它很复杂。但是看看它是否有帮助。真正的函数的签名是这样的：-

```
virtual bool opRaiseEvent(bool reliable, const Common::Hashtable& parameters, nByte eventCode, nByte channelID=0, int* targetPlayers=NULL, short numTargetPlayers=NULL); 
```

并且示例代码使用了这样的函数：-

```
mLoadBalancingClient.opRaiseEvent(false, ExitGames::Common::Hashtable(), 100); 
```

这工作正常。但是现在我想向 HashTable 添加数据，所以我需要创建它的一个对象，然后将它传递给函数。它不接受指针或普通变量。我不知道为什么它只使用 HashTable()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:51:26.967

这意味着第二个参数是通过**[引用](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/topic/com.ibm.xlcpp8l.doc/language/ref/cplr110.htm)**传递的。你必须简单地通过：

```
namespace1::namespace2::var 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T12:20:49.137

这应该工作：

```
const Common::Hashtable param = namespace1::namespace2::var();
opRaiseEvent(false, param, 100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T12:22:32.183

```
namespace1::namespace2::var v;
testFunc(false, v, 100); 
```

# git - 配置 git log 以默认使用 mailmap

> ID：13777171
> 
> 赞同：26
> 
> 时间：2012-12-08T11:49:32.017
> 
> 标签：git, git-log

有没有办法将 git log 配置为默认使用 mailmap 文件？无需指定格式（或一个别名）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-06-17T18:58:47.313

我有 Git 2.4.1。如果您将`log.mailmap`config 设置为 true，这将设置它`git log`也可以使用

```
git config --global log.mailmap true 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-10-07T06:19:16.243

`.gitconfig`您可以在文件中设置默认值。[文档](https://git-scm.com/docs/git-config)说：

> **日志.mailmap**
> 
> 如果为真，则使`git-log`、`git-show`和 `git-whatchanged`假设`--use-mailmap`。

这将`.mailmap`仅在工作树的根中查找 a。

设置：

```
git config --global log.mailmap true 
```

**全局`mailmap`文件**

> **邮件映射文件**
> 
> 扩充邮件映射文件的位置。首先加载位于存储库根目录中的默认邮件映射，然后加载此变量指向的邮件映射文件。邮件映射文件的位置可能在存储库子目录中，或者在存储库本身之外的某个位置。见`git-shortlog`和`git-blame`。

设置：

```
git config --global mailmap.file ~/.mailmap 
```

**先进的**

您还可以将存储库 blob 用作邮件映射文件，请参阅`mailmap.blob`上面链接的文档。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-07T19:09:58.467

从[git 1.8.2](https://git-htmldocs.googlecode.com/git/RelNotes/1.8.2.txt)开始，`git log`需要一个`--use-mailmap`参数来启用此行为。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-08T20:59:41.120

[由于歇斯底里的葡萄干](http://git.661346.n2.nabble.com/git-log-to-use-mailmap-by-default-td7570862.html)，这似乎不是一个功能。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-27T09:36:35.480

警告 Git 2.23（2019 年第三季度）指出未来版本的 Git 将*默认使用 log.mailmap*

“ ”命令学习在未设置配置且未使用选项`git log`时发出警告，为用户准备未来默认使用邮件映射的 Git 版本。`log.mailmap``--[no-]mailmap`

请参阅[Ariadne Conill (``)的](https://github.com/)[提交 ef60740](https://github.com/git/git/commit/ef60740e9efb364d8bb0fba120adecf860cc8ed0)、[提交 2d9c569](https://github.com/git/git/commit/2d9c56905804baa76069e2176035aebd62ddff15)、[提交 f0596ec](https://github.com/git/git/commit/f0596ecc8de9bdbdfc394b2f153ff67f64fc4615)（2019 年 7 月 15 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 c7cf2de](https://github.com/git/git/commit/c7cf2de8fcec29e1f834ca75a8468f91a0a37637))^(中，2019 年 7 月 25 日）)
^([`gitster`](https://github.com/gitster))

> ## `log``log.mailmap`：为未指定的设置添加警告
> 
> 根据**[围绕将 log.mailmap 默认更改为 enabled 的讨论](https://public-inbox.org/git/20190621221650.hoet5juwjhjcw5mh@hashpling.org/)**，决定需要一个过渡期。
> 
> 因此，我们通过警告信息宣布此过渡期。

警告信息是：

> `log.mailmap`未设置；**它的隐含价值将在即将发布的版本中改变**。
> 
> *   要消除此消息并保留当前行为，请将`log.mailmap`配置值设置为`false`。
>     
>     
> *   要立即消除此消息并采用新行为，请将`log.mailmap`配置值设置为`true`。

[初步描述](https://public-inbox.org/git/20181213120940.26477-1-cb@hashpling.org/)：

> 更改了姓名或电子邮件地址的人通常会知道他们需要设置 ' `log.mailmap`' 以便使用 ' `git log`' 的旧提交反映他们的新详细信息，但与他们交互的其他人可能不知道或不够关心启用此选项.
> 
> 将 ' ' 和朋友的默认设置更改为`git log`始终使用邮件映射，以便每个人都能看到规范名称和电子邮件地址。

* * *

在 Git 2.27（2020 年第二季度）中，`git log`“学习”是“ ”`--[no-]mailmap`的同义词`--[no-]use-mailmap`

请参阅[Junio C Hamano () 的](https://github.com/gitster)[commit 88acccd](https://github.com/git/git/commit/88acccda38602bd420274cee6501efb3204a8fa9)、[commit c28b036](https://github.com/git/git/commit/c28b036fe3701b8aac214e94994ee806ba49ec9a)、[commit 7c28058](https://github.com/git/git/commit/7c280589cffa6f55f6bef0496776334f1e3cdcb5)（2020 年 3 月 16 日[）](https://github.com/gitster)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 9404128](https://github.com/git/git/commit/9404128b34bc1abfc99b20f2ce4ca14a2828d7a0))^(中，2020 年 4 月 28 日）)[`gitster`](https://github.com/gitster)
^([`gitster`](https://github.com/gitster))

> ## [`log`](https://github.com/git/git/commit/88acccda38602bd420274cee6501efb3204a8fa9): 给`--[no-]use-mailmap`一个更合理的同义词`--[no-]mailmap`
> 
> 选项名称“ `--use-mailmap`”看起来不错，但是当你必须否定它时，它变得很尴尬，即“ `--no-use-mailmap`”。
> 
> 我，也许和许多其他用户一样，总是尝试“ `--no-mailmap`”并且看到它失败而变得不高兴。
> 
> 添加一个别名“ `--[no-]mailmap`”来解决这个问题。

# php - 如何在 Nanohttpd 上执行 php 脚本？

> ID：13777172
> 
> 赞同：2
> 
> 时间：2012-12-08T11:49:32.963
> 
> 标签：php, android, nanohttpd

我是 WebServer 的新手，我正在使用 NanoHttpd，一切正常，我可以使用计算机上的网络浏览器连接到手机，我的问题是我正在尝试运行名为“fsmanager”的 Php 文件管理器应用程序，在我的网站我可以浏览我的文件等，在我的 index.html 中我有一个针对 fsmanager.php 的简单标签，当我点击它时，我要求下载 php 文件，我尝试添加 mime 类型的 php application/php 等不走运，源代码与 NanoHttpd 相同，

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T01:19:42.783

看看制作 Resin App-Server 的人的“Quercus”（ [http://quercus.caucho.com/ ）。](http://quercus.caucho.com/)它是在 JVM 上运行的 PHP 版本 5 的完整实现，作为 servlet。

虽然 NanoHttpd 不专门支持 servlet API，但我相信您可以编写与*Quercus*往来的钩子，以使用 NanoHttpd 运行某些东西。这将是对现有网络服务器代码的绝佳扩展！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:52:49.993

nanohttpd 是纯粹的 HTTP 服务器，它不会自己执行 PHP 文件。

# ruby-on-rails - ruote 和工作流，哪个更好？

> ID：13777173
> 
> 赞同：0
> 
> 时间：2012-12-08T11:49:34.567
> 
> 标签：ruby-on-rails, ruby, workflow, ruby-on-rails-3.2

我们将在 Ruby on Rails 中开发一个 OA（办公自动化）系统，我们需要一个“工作流引擎”。

我在 GitHub 上找到了两个开源项目的[路线](http://ruote.rubyforge.org/)和[工作流程。](https://github.com/geekq/workflow)

哪个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:12:55.453

“ruote”是一个工作流引擎，“workflow”是一个状态机库。

# php - 访问 /admin 的 Codeigniter 问题

> ID：13777176
> 
> 赞同：1
> 
> 时间：2012-12-08T11:50:01.877
> 
> 标签：php, .htaccess, codeigniter

我有一个使用 codeigniter 编写的脚本。

使用子域[http://name.domain.com/admin/](http://name.domain.com/admin/)访问时，它工作正常，但我现在需要将脚本安装在文件夹中，我无法访问[http://domain.com/name/admin/](http://domain.com/name/admin/)我只是得到一个 404

我猜想（但我可能完全错了）这是一个 .htaccess 问题。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|install|updates|backups|images|css|js|uploads|jPicker|ckeditor|kcfinder|qr|fancybox|test\.php|licence\.txt|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我非常感谢任何帮助我指出正确的方向，以便我可以解决这个问题。

谢谢

{EDIT1} 没有 .htaccess 文件 name.domain.com/、name.domain.com/admin 和 domain.com/name 都可以工作，只有 domain.com/name/admin 不起作用。当我像上面那样添加 .htaccess 或在子域 URL 下面的第二个答案中添加一个时，但 domain.com/name 停止工作并且 domain.com/name/admin 继续不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:37:09.903

您还应该排除`name`.htaccess 上的文件夹：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|install|updates|backups|images|css|js|uploads|jPicker|ckeditor|kcfinder|qr|fancybox|test\.php|licence\.txt|robots\.txt|name)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# facebook-php-sdk - 访问令牌有效，但我们得到 OAuthException：活动访问令牌错误

> ID：13777181
> 
> 赞同：3
> 
> 时间：2012-12-08T11:50:33.267
> 
> 标签：facebook-php-sdk, access-token, facebook-access-token, uncaught-exception

我们已经在一个应用程序上工作了大约 2 个月，一切都很顺利。我们在登录权限中使用 PHP SDK 和离线模式但是自从几天前在 Facebook api 最近发生变化并删除离线模式之后，我们开始面临“未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户。”

主要问题是它确实在我们的应用程序工作一段时间后（大约 10 分钟）发生，但同时当我们通过[此链接](https://developers.facebook.com/tools/debug/access_token)检查令牌的有效性时， 我们看到令牌仍然有效，另一方面 cookie仍然存在并且它不会过期，但我们收到此错误：“未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息”

[我已经访问过此链接](http://developers.facebook.com/bugs/238039849657148) 并下载了最新版本，但它没有帮助任何人都可以帮助我们，请问哪里可能出错？

* * *

感谢您的回复，我认为与 yacon 一样，目前我们正在使用 javascript 处理应用程序的某些部分时，似乎在访问 facebook->api(/me) 时存在错误，这对于同时使用 javascript sdk 和 PhP sdk 来说真的很头疼彼此

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:59:26.617

您可以在 getLoginUrl 之后简单地将 accesstoken 存储到会话变量中来解决这个问题

> $facebook->getLoginUrl(...)

然后每当你初始化 facebook

```
$facebook = 新的 Facebook（数组（
  'appId' => Yii::app()->params['facebook_appId'],
  'secret' => Yii::app()->params['facebook_appSecret'],
));

```

从会话中获取访问令牌并使用 setAccessToken 设置它

> $facebook->setAccessToken(Yii::app()->session['access_token']);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:35:46.933

我以这种方式处理这种情况1.我
获得 1 小时有效期的访问令牌
2.将令牌延长至 60 天有效期
3.将该令牌保存到会话并将其用于所有项目查询。

```
 try{
               $facebook_uid = $facebook->getUser();
                $facebook->setExtendedAccessToken();
                $accessToken = $facebook->getAccessToken();
                $fbuser = $facebook->api('/me');
                $session['api_me'] = $fbuser;
                $session['tokenValue'] = $accessToken;
        }catch (Exception $e) {
                facebook_uid =null;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:30:05.427

我认为api中有一个错误。当我使用 $facebook->api('/'.$facebook_uid) 而不是 ->api('/me') 时，它可以工作。

# machine-learning - 计算精度和召回率

> ID：13777183
> 
> 赞同：5
> 
> 时间：2012-12-08T11:50:48.313
> 
> 标签：machine-learning, precision-recall

我真的很困惑如何使用 NB 分类器计算监督机器学习算法中的精度和召回率

比如说
**1）**我有两个类 A，B
**2）**我有 10000 个文档，其中 2000 个用于训练样本集（A 类 = 1000，B 类 = 1000）
**3）**现在基于上述训练样本集分类休息8000 个文档使用 NB 分类器
**4)**现在分类后 5000 个文档进入 A 类，3000 个文档进入 B 类
**5)**现在如何计算 Precision 和 Recall？

请帮我..

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-08T12:18:25.460

嗨，您必须将结果分为四组 -
真 A 类（TA） - 正确分类为 A 类
假 A 类（FA） - 错误分类为 A 类
真 B 类（TB） - 正确分类为 B 类
假 B 类（ FB) - 错误分类为 B 类

精度 = TA / (TA + FA)
召回率 = TA / (TA + FB)

您可能还需要准确度和 F 度量：

准确度 = (TA + TB) / (TA + TB + FA + FB)
f-measure = 2 * ((精确度 * 召回率)/(精确度 + 召回率))

更多信息：
[http ://en.wikipedia.org/wiki/Precision_and_recall#Definition_.28classification_context.29](http://en.wikipedia.org/wiki/Precision_and_recall#Definition_.28classification_context.29)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-30T13:41:45.247

为了清楚起见，让我解释一下。

假设视频中有 9 只狗和一些猫，图像处理算法告诉你场景中有 7 只狗，其中只有 4 只实际上是狗（真阳性），而 3 只是猫（假阳性）

精确度告诉我们在归类为狗的物品中，有多少实际上是狗

> 所以**精度 = 真阳性/（真阳性 + 假阳性）** = 4/（4+3）= 4/7

虽然召回告诉了狗的总数，但实际找到了多少只狗。

> 所以**召回=真阳性/总数=真阳性/（真阳性+假阴性）** = 4/9

* * *

## 在你的问题中

您必须找到 A 类和 B 类的准确率和召回率

A类

> 真阳性=（5000个分类A类文档中A类文档的数量）
> 
> 误报 =（5000 个分类的 A 类文档中 B 类文档的数量）

从上面你可以找到Precision。

> 召回率 = 真阳性/（测试时使用的 A 类文档总数）

对 B 类重复上述操作以找到其精度和召回率。

# android - 是否可以制作自定义 android 媒体路由？

> ID：13777186
> 
> 赞同：1
> 
> 时间：2012-12-08T11:51:00.613
> 
> 标签：android, a2dp

我想实现我自己的媒体路由，比如 A2DP，但它会使用 wifi（比如 airplay）。

有没有办法做到这一点？Android 当然有基础设施（`MediaRouter`,`AudioManager`等），但我无法通过（几乎未记录的）代码找到自己的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:37:55.647

如果您试图使路由对其他应用程序可用，则可能需要进行操作系统级别的更改。因此，如果您想编译源代码并开发自己的自定义 ROM，请随意。

如果您只是想让自己的应用程序使用“自定义媒体路由”，那么您只需实现它……例如通过 WiFi 打开一个套接字。

# ruby-on-rails - 我可以在模块中插入 cattr_accessor_with_default 类方法吗

> ID：13777191
> 
> 赞同：1
> 
> 时间：2012-12-08T11:51:33.580
> 
> 标签：ruby-on-rails

目前我在我的事件模型中

```
class Event < ActiveRecord::Base  

   def self.cattr_accessor_with_default(name, value = nil)
     cattr_accessor name
     self.send("#{name}=", value) if value
   end
   cattr_accessor_with_default :fixed_start_end_times, false
   ... 
```

正如我定义的调度程序模块

```
 class Event < ActiveRecord::Base
    include Scheduler 
```

看来我无法将 cattr_accessor_with_default 方法移动到此调度程序模块中

```
module Scheduler
  def self.included(base)
    base.send :include, InstanceMethods
    base.extend ClassMethods
  end

  module ClassMethods
    def cattr_accessor_with_default(name, value = nil)
      cattr_accessor name
      self.send("#{name}=", value) if value
     end
    cattr_accessor_with_default :fixed_start_end_times, false
    ... 
```

引发错误：Scheduler::ClassMethods:Module (NoMethodError) 的未定义方法“cattr_accessor_with_default”

我也尝试使用更好的 Rails3 方式

```
 module Scheduler
  def self.included(base)
    base.send :include, InstanceMethods
    base.extend ClassMethods
  end
  module ClassMethods
   class_attribute :fixed_start_end_times
   self.fixed_start_end_times = false 
```

Scheduler::ClassMethods:Module 的相同错误未定义方法“class_attribute”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:05:50.640

我想你放`cattr_accessor_with_default`错地方了。试试下面的代码：

```
module Scheduler
  def self.included(base)
    base.send :include, InstanceMethods
    base.extend ClassMethods
    base.class_eval do
      cattr_accessor_with_default :fixed_start_end_times, false
    end
  end

  module ClassMethods
    def cattr_accessor_with_default(name, value = nil)
      cattr_accessor name
      self.send("#{name}=", value) if value
    end
    ... 
```

这种方式`cattr_accessor_with_default`被发送到包含类，例如`class Event`，并`cattr_accessor_with_default`已作为类方法添加到该类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:14:57.137

首先我创建了：

```
#lib/scheduler.rb

module Scheduler

  extend ActiveSupport::Concern

  included do
    class_attribute :fixed_start_end_times
    self.fixed_start_end_times = false
  end

  # adding instance methods here
  def foo
     "foo"
  end

  # adding static(class) methods here
  module ClassMethods

      def starting_on(start_date)
        where("CAST( starts_at AS TIME) = ?", Event.db_time(start_date))
      end
  end
end

# including the extension 
ActiveRecord::Base.send(:include, Scheduler) 
```

然后我补充说：

```
in #config/initializers/scheduler.rb
 require "scheduler" 
```

等等...

# c# - 如何旋转边界框

> ID：13777205
> 
> 赞同：0
> 
> 时间：2012-12-08T11:53:02.513
> 
> 标签：c#, xna

这是我显示边界框的代码

```
 Vector3[] corners = box.GetCorners();
        for (int i = 0; i < 8; i++)
        {
            verts[i].Position = Vector3.Transform(corners[i],modelMatrix);
            verts[i].Color = Color.White;
        }

        vbo.SetData(verts);
        ibo.SetData(indices);

        foreach (EffectPass pass in effect.CurrentTechnique.Passes)
        {
            effect.World = Matrix.Identity; 
            effect.View = view;
            effect.Projection = projection;

            pass.Apply();
            ContentLoader.SetBuffers(ibo, vbo);
        } 
```

我想使用`BoundingBox`类来实现相同的结果。我试图这样做，但它不起作用

```
 for (int i = 0; i < boundingBoxes.Count; i++)
        {
            Vector3 min = Vector3.Transform(boundingBoxes[i].Min, modelMatrix);
            Vector3 max = Vector3.Transform(boundingBoxes[i].Max, modelMatrix);
            boundingBoxes[i] = new BoundingBox(min, max);
        } 
```

如果没有旋转，上面的代码就可以工作。随着旋转，事情会变得一团糟。知道为什么以及如何解决它吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-08T17:41:57.243

您不能在 Xna 中旋转 BoundingBox 对象。BoundingBox 类的内置碰撞检测方法将始终根据轴对齐中的框的最小值和最大值计算。通过转换最小值和最大值，您不会旋转框，您只是更改轴对齐框的 x、y、z 尺寸。

You might be better off studying up on "oriented bounding boxes". You would draw an oriented box by using the corners as verts and choosing 'LineList' as your PrimitiveType instead of 'TriangleList' in the 'DrawIndexedPrimitives' method. Collision detection for an oriented box is different & more complex than for an axis aligned box.

# google-app-engine - Appengine 超出配额

> ID：13777210
> 
> 赞同：0
> 
> 时间：2012-12-08T11:53:39.960
> 
> 标签：google-app-engine, gae-quotas

我已经使用 appengine 很长时间了，但是今天，我的应用程序已经超过配额 3 小时（> 我的每日费用）。然而，仪表板显示几乎没有使用任何资源，因此它应该远不及这个每日限制。

同样奇怪的是，尽管仪表板显示我已达到每日限额，但我注意到检索没有问题。仅写入数据存储会产生超出配额的异常（com.google.apphosting.api.ApiProxy$OverQuotaException：API 调用 datastore_v3.Put() 需要的配额超过可用配额）。然而，下面的统计数据显示那里没有很多写入。如果我查看配额详细信息，所有指标都可以。

```
Billing Status: Enabled ( Daily budget: $2.00 ) - Settings Quotas reset every 24 hours. Next reset: 21 hrs  

Resource                    Usage               Billable Price             Cost

Frontend Instance Hours     4.30 Instance Hours 0.00    $0.08/ Hour     $0.00
Backend Instance Hours      0.00 Instance Hours 0.00    $0.08/ Hour     $0.00
Datastore Stored Data       2.86 GBytes         1.86    $0.008/ GByte-day   $0.02
Logs Stored Data            0.04 GBytes         0.00    $0.008/ GByte-day   $0.00
Task Queue Stored Task Bytes0.00 GBytes         0.00    $0.008/ GByte-day   $0.00
Blobstore Stored Data       0.00 GBytes         0.00    $0.0043/ GByte-day  $0.00
Code and Static File Storage0.12 GBytes         0.00    $0.0043/ GByte-day  $0.00
Datastore Write Operations  0.06 Million Ops    0.01    $1.00/ Million Ops  $0.02
Datastore Read Operations   0.01 Million Ops    0.00    $0.70/ Million Ops  $0.00
Datastore Small Operations  0.00 Million Ops    0.00    $0.10/ Million Ops  $0.00
Outgoing Bandwidth          0.01 GBytes         0.00    $0.12/ GByte       $0.00
Recipients Emailed          0                   0       $0.01/ 100 Recipients$0.00
Stanzas Sent                0                   0       $0.10/ 100K Stanzas $0.00
Channels Created            0%  0 of 95,040     0       $0.01/ 100 Opens    $0.00
Logs Read Bandwidth         0.00 GBytes         0.00    $0.12/ GByte        $0.00
PageSpeed Outgoing Bandwidth0.01 GBytes         0.01    $0.39/ GByte        $0.01
SSL VIPs                    0                   0       $1.30/ Day          $0.00
SSL SNI Certificates        0                   0       $0.06/ Day          $0.00

Estimated cost for the last 3 hours:    $2.00* / $2.00 
```

# android - 在小部件中接收时间刻度意图，为什么下面的代码是可能的？

> ID：13777212
> 
> 赞同：0
> 
> 时间：2012-12-08T11:53:48.477
> 
> 标签：android, widget, android-appwidget

我想在一个小部件中接收时间刻度，并尝试了 [此链接](http://madandroid.blogspot.com/2011/05/registering-broadcast-receiver-from.html)中的代码，它在运行 Android API 级别 15 的自定义 ROM 的 kindle fire 上运行良好，但有时在运行 Android 4.2 的手机上时间错误API 级别 17。

我的困惑与文章下方的评论相同

> 这是完全不可靠的。在 onUpdate() 方法返回后，Android 将随时终止您的进程，导致 BroadcastReceiver 和 Application 都消失。

任何人都可以解释或证明代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:07:31.983

> 我想在小部件中接收时间刻度

以可靠的方式这是不可能的。

> 并尝试了此链接中的代码

正如我在博客文章的评论中指出的那样，该代码完全不可靠。

> 它在运行 Android API 级别 15 的自定义 ROM 的 kindle fire 上运行良好

您运行应用程序的时间不够长。它也会在您的 Kindle Fire 上失败。

> 但有时运行 Android 4.2 API 级别 17 的手机上的时间是错误的

Android 4.2 可能更积极地终止没有活动组件的进程，这就是为什么它在您的手机上失败得更快的原因。但是，由于我在对博客文章的评论中概述的原因以及您在问题中引用的原因，它肯定会*失败。*

Android 应用程序作为操作系统进程运行，就像大多数现代操作系统中的程序一样。Android 将根据需要终止进程以回收 RAM 以供其他进程使用。Android 最终将终止您的应用程序的进程，此时您的注册接收器将消失。

同时，如果`onUpdate()`被多次调用，您将为广播注册*多个接收器*，每个额外的接收器都会增加更多开销。

# for-loop - 模拟器的 IAR 指令

> ID：13777214
> 
> 赞同：2
> 
> 时间：2012-12-08T11:54:48.980
> 
> 标签：for-loop, simulator, mode, directive, iar

我正在使用 IAR EWARM 5.4 ，我想知道是否有一个指令可以在模拟器模式下显示编译器。例如，我希望我的一部分代码仅在模拟器模式下编译，但在目标模式下将被忽略。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:31:10.103

编译器不知道最终结果是在模拟器上执行还是在目标硬件上执行。

`MY_SIMULATOR`但是，您始终可以在使用模拟器时定义自己的预处理器符号，例如。然后，您的代码可以使用`#ifdef MY_SIMULATOR`.

*更新*：如果您想检查 Debug 和 Release 模式之间的区别，可以检查符号`NDEBUG`。它是在发布模式中定义的。

# css - Compass 和 Sass 是什么，它们有何不同？

> ID：13777215
> 
> 赞同：169
> 
> 时间：2012-12-08T11:55:02.773
> 
> 标签：css, sass, compass-sass

我想开始使用 Compass 和 Sass 来加速开发。目前，我已经在 Mac 上安装了 Sass，并指示它观察 Scss 文件的输入和生成的输出的 CSS 文件。

在许多文章中，Sass 与 Compass 一起使用，我想知道为什么会这样， Compass 添加了 Sass 没有的什么？如果能举个例子就更好了。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-12-08T12:08:36.340

来自Wynn Netherland、Nathan Weizenbaum、Chris Eppstein 和 Brandon Mathis 的*Sass 和 Compass in Action ：*

> ### 1.3 什么是指南针？
> 
> Compass 帮助 Sass 作者编写更智能的样式表，并使设计师和开发人员社区能够创建和共享强大的框架。简而言之， **Compass 是一个 Sass 框架**，旨在使 Web 样式的工作顺利高效。就像 Rails 作为 Ruby 的 Web 应用程序框架一样， **Compass 是一组有用的工具和经过实战考验的 Sass 最佳实践**。

（重点补充）

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-12-08T12:58:07.960

Compass 是 Sass 的扩展（因为 Compass 需要 Sass）。它有自己的编译器（而不是`sass --watch`，你使用`compass watch`）。它拥有大量的 mixin 和函数，您会发现它们非常有用（虽然通常用于生成供应商前缀的 CSS3 属性，但它可以执行诸如自动生成 spritemap 和与之配套的 CSS 之类的事情）。

Compass 还以这样一种方式构建，您可以捆绑自己的*引导*类型库，以便在多个项目中轻松部署，而无需在每个项目中复制/粘贴源代码。

# android - 使用 HoloEverywhere 库

> ID：13777217
> 
> 赞同：5
> 
> 时间：2012-12-08T11:55:14.377
> 
> 标签：android, git, android-holo-everywhere

我不熟悉使用其他库，但我正在处理的当前项目正在使用这个 HoloEverywhere 库。不幸的是，那个图书馆没有给我任何文件，所以我不得不自己下载。我克隆了 git 存储库，但是当我将 HoloEverywhere 文件夹添加到我的 Eclipse 工作区时，我收到大量如下所示的错误消息：

```
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:662: error: Resource entry Holo.Theme already has bag item textAppearanceListItemSmall. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:638: Originally defined here. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values-v14\styles.xml:61: error: Resource entry Holo.Theme already has bag item textAppearanceListItemSmall. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values-v14\styles.xml:37: Originally defined here. 
[2012-12-08 13:46:51 - HoloEverywhere Demo D:\Downloads\HoloEverywhere\library\res\values\styles.xml:602: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:667: error: Error: No resource found that matches the given name: attr 'activatedBackgroundIndicator'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:615: error: Error: No resource found that matches the given name: attr 'dividerVertical'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:650: error: Error: No resource found that matches the given name: attr 'dropDownListViewStyle'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:616: error: Error: No resource found that matches the given name: attr 'dropdownListPreferredItemHeight'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:652: error: Error: No resource found that matches the given name: attr 'listPopupWindowStyle'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:621: error: Error: No resource found that matches the given name: attr 'listPreferredItemHeightSmall'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:680: error: Error: No resource found that matches the given name: attr 'listPreferredItemPaddingLeft'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:681: error: Error: No resource found that matches the given name: attr 'listPreferredItemPaddingRight'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:654: error: Error: No resource found that matches the given name: attr 'selectableItemBackground'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:655: error: Error: No resource found that matches the given name: attr 'spinnerDropDownItemStyle'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:656: error: Error: No resource found that matches the given name: attr 'spinnerItemStyle'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:660: error: Error: No resource found that matches the given name: attr 'textAppearanceLargePopupMenu'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:638: error: Error: No resource found that matches the given name: attr 'textAppearanceListItemSmall'. 
[2012-12-08 13:46:51 - HoloEverywhere Demo] D:\Downloads\HoloEverywhere\library\res\values\styles.xml:663: error: Error: No resource found that matches the given name: attr 'textAppearanceSmallPopupMenu'. 
```

看来我丢失了一些文件并且正在进行一些重新定义，但我不知道如何解决这个问题。尝试阅读他们的维基，但以我目前的理解，我无法从中获得任何有用的信息。

我究竟做错了什么？

[编辑] 使用 git 时，我无法执行此步骤：

```
git clone git://github.com/ChristopheVersieux/HoloEverywhere.git HoloEverywhere
cd HoloEverywhere
git submodule --init --recursive update 
```

在最后一部分我得到这个错误： ![在此处输入图像描述](../Images/ab61dbe9f2d86012d8c9c742914d86af.png)

我使用 msysgit，第一部分我设法下载文件，但我无法继续更新，所以我想我的第一个问题就在那里。我可以使用其他命令吗？我对 git 没有任何经验。

[EDIT2] 我安装 Ubuntu 只是为了检查 Windows 版本的 git 是否有问题，但是没有，我仍然在这一行出现错误：

> git submodule --init --recursive 更新

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T09:59:31.917

问题是我缺乏 git 的经验。我不知道作者为什么写了这样的命令：

> git submodule --init --recursive 更新

但在 linux 和 windows 上我必须输入：

> git子模块初始化

和

> git 子模块更新 --recursive

# sql-server - SQL Server 2008：从 datetime2 获取日期部分

> ID：13777218
> 
> 赞同：9
> 
> 时间：2012-12-08T11:55:35.097
> 
> 标签：sql-server, sql-server-2008, datetime2

我一直在使用这种非常方便的方法从`datetime`值中提取日期部分：

```
select dateadd(day, datediff(day, 0, @inDate), 0) 
```

这基本上将日期的时间部分清零。它很快，更重要的是它是确定性的——您可以在持久计算列、索引视图等中使用此表达式。

但是，我正在努力想出适用于该`datetime2`类型的东西。问题是 SQL Server 不允许从整数到`datetime2`类型的转换。

是否有一种等效的**确定性**方法从 a 中剥离时间部分`datetime2`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T12:21:19.277

你不能做一个

```
ALTER TABLE dbo.YourTable
ADD DateOnly AS CAST(YourDate AS DATE) PERSISTED 
```

将`CAST(... AS DATE)`您的 datetime2 列变成“仅限日期”，并且它似乎具有足够的确定性，可以用于持久的计算列定义......

# java - 只是在填充时将最后一个参数从表单设置为操作，为什么？

> ID：13777225
> 
> 赞同：0
> 
> 时间：2012-12-08T11:56:20.400
> 
> 标签：java, forms, struts2, setter, populate

这是我在jsp中的表格。当我提交它时，在服务器日志中我可以看到所有参数及其值，但是当我对对象执行 println 时，只设置了最后一个（按字母顺序）。

```
<s:form action="contactos-modificar" method="POST" name="editarContacto">
    <s:hidden name="contactoModif.id" value="%{contactoEditar.id}"/>
    <div id="top">
        <label for="contactoModif.nombre">Nombre</label><br/>
        <s:textfield cssClass="large" name="contactoModif.nombre" value="%{contactoEditar.nombre}" />
    </div>

    <div id="izq">
        <label for="contactoModif.lugarNac">Lugar de nacimiento</label><br/>
        <s:textfield cssClass="large" name="contactoModif.lugarNac" value="%{contactoEditar.lugarNac}" />
        <br/>
        <label for="contactoModif.empresa">Empresa</label><br/>
        <s:textfield cssClass="large" name="contactoModif.empresa" value="%{contactoEditar.empresa}"/>
        <br/>
        <label for="localizacion">Localización</label><br/>
        <s:textfield cssClass="large" name="contactoModif.localizacion" value="%{contactoEditar.localizacion}"/>
    </div>

    <div id="dcha">
        <label for="contactoModif.fechaNac">Fecha de nacimiento</label><br/>
        <s:textfield cssClass="large" name="contactoModif.fechaNac" value="%{contactoEditar.fechaNac}"/>
        </br>
        <label for="contactoModif.puesto">Puesto</label><br/>
        <s:textfield cssClass="large" name="contactoModif.puesto" value="%{contactoEditar.puesto}"/>
        <br/>
        <label for="contactoModif.direccion">Dirección</label><br/>
        <s:textarea cssClass="direccion" name="contactoModif.direccion"><s:property value="contactoEditar.direccion"/></s:textarea>
    </div>

    <div id="bot">
        <label for="contactoModif.notas">Notas</label><br/>
        <s:textarea cssClass="notas" name="contactoModif.notas"><s:property value="contactoEditar.notas"/></s:textarea>
        <br/>

        <s:submit cssClass="submit" value="Guardar cambios"/>
    </div> 
```

服务器日志：

```
2012-12-08 12:39:42,148 DEBUG com.opensymphony.xwork2.interceptor.I18nInterceptor.debug:68 - intercept '//contactos-modificar' { 
2012-12-08 12:39:42,149 DEBUG com.opensymphony.xwork2.interceptor.I18nInterceptor.debug:68 - applied invocation context locale=es_ES
2012-12-08 12:39:42,150 DEBUG com.opensymphony.xwork2.interceptor.I18nInterceptor.debug:68 - before Locale=es_ES
2012-12-08 12:39:42,181 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=struts]
2012-12-08 12:39:42,184 DEBUG com.opensymphony.xwork2.util.LocalizedTextUtil.debug:68 - Resource bundles reloaded
2012-12-08 12:39:42,188 DEBUG org.apache.struts2.interceptor.FileUploadInterceptor.debug:68 - Bypassing //contactos-modificar
2012-12-08 12:39:42,188 DEBUG com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.debug:68 - Setting static parameters {}
2012-12-08 12:39:42,189 DEBUG com.opensymphony.xwork2.interceptor.ParametersInterceptor.debug:68 - Setting params NONE
2012-12-08 12:39:42,189 DEBUG com.opensymphony.xwork2.interceptor.ParametersInterceptor.debug:68 - Setting params contactoModif.direccion => [ fffffff ] contactoModif.empresa => [ ccccccc ] contactoModif.fechaNac => [ 11-11-1111 ] contactoModif.id => [ 124 ] contactoModif.localizacion => [ dddddd ] contactoModif.lugarNac => [ bbbbbb ] contactoModif.nombre => [ aaaaaa ] contactoModif.notas => [ ggggggg ] contactoModif.puesto => [ eeeeeee ] 
2012-12-08 12:39:42,189 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=contactoModif]
2012-12-08 12:39:42,190 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Property: direccion
2012-12-08 12:39:42,190 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Class: org.letter.ltr.model.ContactoPerfil
2012-12-08 12:39:42,191 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - field-level type converter for property [direccion] = none found
2012-12-08 12:39:42,191 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - global-level type converter for property [direccion] = none found
2012-12-08 12:39:42,192 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@78e377]
2012-12-08 12:39:42,192 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Creating converter with name [string]
2012-12-08 12:39:42,193 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Converter of Type [com.opensymphony.xwork2.conversion.impl.StringConverter] with name [string], created!
2012-12-08 12:39:42,193 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=contactoModif]
2012-12-08 12:39:42,262 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Property: empresa
2012-12-08 12:39:42,263 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Class: org.letter.ltr.model.ContactoPerfil
2012-12-08 12:39:42,263 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - field-level type converter for property [empresa] = none found
2012-12-08 12:39:42,264 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - global-level type converter for property [empresa] = none found
2012-12-08 12:39:42,264 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@78e377]
2012-12-08 12:39:42,265 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Creating converter with name [string]
2012-12-08 12:39:42,266 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Converter of Type [com.opensymphony.xwork2.conversion.impl.StringConverter] with name [string], created!
2012-12-08 12:39:42,267 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=contactoModif]
2012-12-08 12:39:42,268 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Property: fechaNac
2012-12-08 12:39:42,268 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Class: org.letter.ltr.model.ContactoPerfil
2012-12-08 12:39:42,269 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - field-level type converter for property [fechaNac] = none found
2012-12-08 12:39:42,269 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - global-level type converter for property [fechaNac] = none found
2012-12-08 12:39:42,269 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@78e377]
2012-12-08 12:39:42,270 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Creating converter with name [string]
2012-12-08 12:39:42,270 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Converter of Type [com.opensymphony.xwork2.conversion.impl.StringConverter] with name [string], created!
2012-12-08 12:39:42,271 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=contactoModif]
2012-12-08 12:39:42,272 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Property: id
2012-12-08 12:39:42,272 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Class: org.letter.ltr.model.ContactoPerfil
2012-12-08 12:39:42,273 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - field-level type converter for property [id] = none found
2012-12-08 12:39:42,273 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - global-level type converter for property [id] = none found
2012-12-08 12:39:42,274 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@78e377]
2012-12-08 12:39:42,274 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Creating converter with name [number]
2012-12-08 12:39:42,275 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Converter of Type [com.opensymphony.xwork2.conversion.impl.NumberConverter] with name [number], created!
2012-12-08 12:39:42,275 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=contactoModif]
2012-12-08 12:39:42,276 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Property: localizacion
2012-12-08 12:39:42,329 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Class: org.letter.ltr.model.ContactoPerfil
2012-12-08 12:39:42,329 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - field-level type converter for property [localizacion] = none found
2012-12-08 12:39:42,330 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - global-level type converter for property [localizacion] = none found
2012-12-08 12:39:42,331 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@78e377]
2012-12-08 12:39:42,331 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Creating converter with name [string]
2012-12-08 12:39:42,331 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Converter of Type [com.opensymphony.xwork2.conversion.impl.StringConverter] with name [string], created!
2012-12-08 12:39:42,333 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=contactoModif]
2012-12-08 12:39:42,334 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Property: lugarNac
2012-12-08 12:39:42,334 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Class: org.letter.ltr.model.ContactoPerfil
2012-12-08 12:39:42,335 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - field-level type converter for property [lugarNac] = none found
2012-12-08 12:39:42,335 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - global-level type converter for property [lugarNac] = none found
2012-12-08 12:39:42,336 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@78e377]
2012-12-08 12:39:42,337 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Creating converter with name [string]
2012-12-08 12:39:42,337 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Converter of Type [com.opensymphony.xwork2.conversion.impl.StringConverter] with name [string], created!
2012-12-08 12:39:42,338 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=contactoModif]
2012-12-08 12:39:42,338 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Property: nombre
2012-12-08 12:39:42,339 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Class: org.letter.ltr.model.ContactoPerfil
2012-12-08 12:39:42,339 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - field-level type converter for property [nombre] = none found
2012-12-08 12:39:42,340 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - global-level type converter for property [nombre] = none found
2012-12-08 12:39:42,340 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@78e377]
2012-12-08 12:39:42,341 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Creating converter with name [string]
2012-12-08 12:39:42,341 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Converter of Type [com.opensymphony.xwork2.conversion.impl.StringConverter] with name [string], created!
2012-12-08 12:39:42,342 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=contactoModif]
2012-12-08 12:39:42,343 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Property: notas
2012-12-08 12:39:42,343 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Class: org.letter.ltr.model.ContactoPerfil
2012-12-08 12:39:42,395 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - field-level type converter for property [notas] = none found
2012-12-08 12:39:42,395 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - global-level type converter for property [notas] = none found
2012-12-08 12:39:42,396 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@78e377]
2012-12-08 12:39:42,397 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Creating converter with name [string]
2012-12-08 12:39:42,397 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Converter of Type [com.opensymphony.xwork2.conversion.impl.StringConverter] with name [string], created!
2012-12-08 12:39:42,398 DEBUG com.opensymphony.xwork2.conversion.impl.InstantiatingNullHandler.debug:68 - Entering nullPropertyValue [target=[org.letter.ltr.action.ContactosAction@17805ad, com.opensymphony.xwork2.DefaultTextProvider@c6ede2], property=contactoModif]
2012-12-08 12:39:42,399 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Property: puesto
2012-12-08 12:39:42,400 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - Class: org.letter.ltr.model.ContactoPerfil
2012-12-08 12:39:42,400 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - field-level type converter for property [puesto] = none found
2012-12-08 12:39:42,401 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - global-level type converter for property [puesto] = none found
2012-12-08 12:39:42,401 DEBUG com.opensymphony.xwork2.conversion.impl.XWorkConverter.debug:68 - falling back to default type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter@78e377]
2012-12-08 12:39:42,402 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Creating converter with name [string]
2012-12-08 12:39:42,402 DEBUG com.opensymphony.xwork2.ObjectFactory.debug:68 - Converter of Type [com.opensymphony.xwork2.conversion.impl.StringConverter] with name [string], created!
2012-12-08 12:39:42,404 DEBUG org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.debug:68 - Validating //contactos-modificar with method modificarContacto.
2012-12-08 12:39:42,424 DEBUG com.opensymphony.xwork2.validator.ValidationInterceptor.debug:68 - Invoking validate() on action org.letter.ltr.action.ContactosAction@17805ad
2012-12-08 12:39:42,425 DEBUG com.opensymphony.xwork2.interceptor.PrefixMethodInvocationUtil.debug:68 - cannot find method [validateModificarContacto] in action [org.letter.ltr.action.ContactosAction@17805ad]
2012-12-08 12:39:42,425 DEBUG com.opensymphony.xwork2.interceptor.PrefixMethodInvocationUtil.debug:68 - cannot find method [validateDoModificarContacto] in action [org.letter.ltr.action.ContactosAction@17805ad]
2012-12-08 12:39:42,426 DEBUG com.opensymphony.xwork2.DefaultActionInvocation.debug:68 - Executing action method = modificarContacto 
```

只是将“contactoModif.puesto”设置为对象。其他都是空的。

这是我的对象：

```
public class ContactoPerfil {

private static final long serialVersionUID = 1L;
private int id=0;
private String nombre="";
private String fechaNac="";
private String lugarNac="";
private String empresa="";
private String puesto="";
private String direccion="";
private String localizacion="";
private String notas="";                 

public int getId(){
    return id;
}
public String getNombre(){
    return nombre;
}    
public String getFechaNac(){
    return fechaNac;
}
public String getLugarNac(){
    return lugarNac;
}
public String getEmpresa(){
    return empresa;
}
public String getPuesto(){
    return puesto;
}
public String getDireccion(){
    return direccion;
}
public String getLocalizacion(){
    return localizacion;
}
public String getNotas(){
    return notas;
}

public void setId(int id){
    this.id = id;
}
public void setNombre(String nombre){
    this.nombre = nombre;
}
public void setFechaNac(String fechaNac){
    this.fechaNac = fechaNac;
}
public void setLugarNac(String lugarNac){
    this.lugarNac = lugarNac;
}
public void setEmpresa(String empresa){
    this.empresa = empresa;
}
public void setPuesto(String puesto){
    this.puesto = puesto;
}
public void setDireccion(String direccion){
    this.direccion = direccion;
}
public void setLocalizacion(String localizacion){
    this.localizacion = localizacion;
}
public void setNotas(String notas){
    this.notas = notas;
}
@Override
public String toString(){
    //code
} 
```

}

我尝试使用“contactoModif.nombre”、“contactoModif.empresa”和“contactoModif.lugarNac”，同样的情况发生了，只是设置了“contactoModif.nombre”（另一次是按字母顺序排列的最后一个，因为它是由 struts2 转换的最后一个）。

在行动中：

```
public class ContactosAction extends ActionSupport implements SessionAware,ServletRequestAware{
private ContactoPerfil contactoModif;

@Action(value="contactos-modificar",
        results={
        @Result(name="success", type="stream", params={"contentType","text/html","inputName","inputStream"}),
        @Result(name="error", type="stream", params={"contentType","text/html","inputName","inputStream"})}
        )
public String modificarContacto() throws Exception{
    //code
}

public void setContactoModif(ContactoPerfil c){
    this.contactoModif=c;
}
} 
```

Struts 版本：2.3.4

我需要帮助，这让我发疯，解决这个问题对我来说非常重要，如果我不能使用 struts2 方式来解决，我想我会使用 html 表单和 getServletRequest()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:14:21.993

好吧，我不知道为什么这种方式不起作用，但我尝试了这个：

```
<label for="contactoModif.nombre">Nombre</label><br/>
<input type="text" class="large" name="contactoModif.nombre" value="<s:property value="contactoEditar.nombre"/>"/> 
```

在行动中：

```
public ContactoPerfil getContactoModif(){
    return contactoModif;
} 
```

现在它可以工作了，我收到了表单的所有字段，并且所有字段都存储在对象中。我只是更改了字段并添加了“get”方法（我认为只有“set”方法是从表单中获取值所必需的），其余代码是相同的。

PS：感谢 MohanaRao SV，编辑我的代码以显示颜色并使其更清晰。

# java - 联系人列表

> ID：13777226
> 
> 赞同：0
> 
> 时间：2012-12-08T11:56:22.647
> 
> 标签：java, swing, jscrollpane

我需要为Skype中的联系人列表实现ui。由 JPanel 派生的自定义类（JContact）表示的联系人。我尝试使用不同的布局，但没有收到预期的结果。主机架有下一个结构。

JFrame -> JPanel(contactsPanel)-> JScrollPane(scrollContacts)->JPanel(contactPanel)

scrollContacts.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_​​ALWAYS); scrollContacts.setHorizo​​ntalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_​​NEVER);

如果对 contactPanel 使用 FlowLayout（请参见图片中的 FlowLayout）

我认为奇怪的行为，因为预期每个联系人将在一以下，因为指示滚动联系人的 HORIZONTAL_SCROLLBAR_​​NEVER。

如果使用 Grid 或 Box 布局。布局会自动重新调整我的面板大小，看起来很丑。请参阅 Grid&Box 布局图像。

预期结果见“预期”图像

[----看图----](http://www.shareimage.org/images/4c9djnszxt9col91f2i.png)

我不是母语人士，所以请原谅我的英语不好。谢谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:18:36.647

引用[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)：

> FlowLayout 类将组件排成一排，按其首选大小调整大小。如果容器中的水平空间太小，无法将所有组件放在一行中，FlowLayout 类使用多行

所以你得到的结果是预期的。

> GridLayout 对象将组件放置在单元格网格中。每个组件占用其单元格内的所有可用空间，并且每个单元格的大小完全相同。如果调整 GridLayoutDemo 窗口的大小，则 GridLayout 对象会更改单元格大小，以便在给定容器可用空间的情况下使单元格尽可能大。

所以你得到的结果也是意料之中的。

> 当 BoxLayout 从上到下布局组件时，它会尝试将每个组件的大小调整为组件的首选高度。如果布局的垂直空间与首选高度的总和不匹配，则 BoxLayout 会尝试调整组件的大小以填充空间。

所以你得到的结果也是意料之中的。

但是，盒子布局可以包含胶水组件来避免这种情况。

因此，我将使用垂直框布局，并添加垂直胶水作为最后一个组件。阅读[教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)。

# python - 如何在 Fedora 13 中将 Python 2.7 设置为默认值

> ID：13777227
> 
> 赞同：0
> 
> 时间：2012-12-08T11:56:24.363
> 
> 标签：python, python-2.7, fedora

我在装有 Fedora 13 的系统上安装了 Python 2.7。但是当我检查 Python 版本时，它是 2.6。此外，安装一些依赖于 2.7 的软件包将不起作用。

实际上，当我们安装 Fedora 13 时，Python 2.6 是默认的，但是在我安装 Python 2.7 之后，它并没有接受 Fedora 13。任何人都知道我们如何将手动安装的 Python 2.7 设置为 Fedora 13 中的默认值，而不是默认的 Python 2.6？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:01:18.253

我想这并不容易，因为许多系统工具都依赖于 Python。尝试使用[virtualenv](http://pypi.python.org/pypi/virtualenv)为你的包创建一个隔离的 Python 环境。

# arm - fiq & irq 处理程序——arm

> ID：13777229
> 
> 赞同：1
> 
> 时间：2012-12-08T11:56:41.710
> 
> 标签：arm

我是新手，对 IRQ 和 FIQ 有一些疑问。请尝试澄清这些。
有多少个 FIQ 和 IRQ 通道臂？
我们可以为每个通道编写多少个处理程序？
此外，如果我们可以为单个中断通道注册多个处理程序，arm 如何知道要运行哪个处理程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T19:49:24.427

`IRQ`和之间的区别`FIQ`可以追溯到 ARM 由 Acorn 设计的早期。总是将`IRQ`线路连接到将大量中断源多路复用在一起的中断控制器。这正是所有现代 ARM 中发生的情况

FIQ 背后的基本原理是提供具有最高优先级的极低延迟响应（它可以安全地抢占`IRQ`处理程序）。相对大量的影子寄存器有助于编写将处理程序的状态存储在 CPU 寄存器中并且不会撞到堆栈的处理程序。

影子寄存器几乎与 APCS 通常用于函数调用的那些设置相反，因此在 C 中编写处理程序将导致最多 8 个非影子寄存器的推送和最终弹出。任何类型的中断解复用都会消除`FIQ`可能带来的任何性能优势。

所有这一切意味着，只有在`FIQ`一个中断设备需要真正硬实时中断响应的非常专业的应用程序中使用，并且您愿意在汇编程序中编写您的处理程序时，才真正有任何好处。您还需要弄清楚如何与系统的其余部分同步——其中一些将依赖于禁用`IRQ`来保持数据同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T18:10:14.850

传统上，手臂有一个中断线，您可以将其发送到两个处理程序 FIQ 或 IRQ 之一。FIQ 具有更大的 FIQ 模式专用寄存器组，因此您需要存储在堆栈上的内容更少。从那里您读取供应商特定的寄存器（如果有）以确定中断源，然后分支到单独的处理程序。

最近出现了带有许多中断 128、256 的弯臂架构，每个中断都有一个单独的处理程序。因此，一般地询问 arm 并没有那么多样化，而是像询问有关 x86 的一般性问题。

所有这些信息都可以在不同架构的 ARM 架构参考手册中轻松获得，并且内核的引脚分配（供应商构建其芯片的依据）记录在各种内核的技术参考手册中（也很容易获得） . infocenter.arm.com 拥有架构和技术参考手册以及 amba/axi（供应商连接的数据总线）。你的问题在这些文件中得到了完整的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-28T15:54:59.860

ARM 处理器直接只支持 ONE IRQ 和 ONE FIQ。ARM 通过称为中断控制器的外设支持多个中断。ARM 标准中断控制器称为 GIC（通用中断控制器）。

GIC 有许多输入用于连接外设的中断线和两条连接到 IRQ 和 FIQ 的输出线。基本上它充当多路复用器。GIC 驱动程序将设置诸如中断优先级、类型（IRQ/FIQ）、屏蔽等配置。

在传统的 ARM 系统中，异常向量中的 IRQ 和 FIQ 各有一个条目。根据触发中断的行，调用 IRQ 或 FIQ 处理程序。中断处理程序查询 GIC（具体来说是 GIC CPU 接口寄存器）以获取中断号。根据这个中断号，调用相应的设备处理程序。

中断的数量取决于具体的 GIC 实现。因此，您必须查看系统中中断控制器的手册才能获得这些细节。

注意：中断处理略有不同，具体取决于您正在编码的特定 ARM 内核。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-22T20:14:06.310

其实这个问题有点棘手。您必须在问题中指定您使用的 ARM 架构。ARM v7-A 和 ARM v7-R 架构参考手册 (ARM ARM) 指定了一个 FIQ 和一个 IRQ，正如许多人已经回答的那样。但是 ARMv7-M（用于 Cortex-M 处理器）在处理器中集成了一个中断控制器，因此提供了一个 NMI（而不是 FIQ）和多达 240 条 IRQ 线。

更多信息：ARMv7 A 和 ARMv7-R 架构参考手册：[http ://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0406c/index.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0406c/index.html)

ARMv7-M 架构参考手册： http: [//infocenter.arm.com/help/index.jsp ?topic=/com.arm.doc.ddi0403e.b/index.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0403e.b/index.html)

例如，Cortex M4 规格表：[http ://www.arm.com/products/processors/cortex-m/cortex-m4-processor.php](http://www.arm.com/products/processors/cortex-m/cortex-m4-processor.php)

# asp.net-mvc-3 - mvc3：在视图中定义值的多行文本区域

> ID：13777233
> 
> 赞同：0
> 
> 时间：2012-12-08T11:57:24.800
> 
> 标签：asp.net-mvc-3, textbox, textarea, text-editor, multiline

我想在 MVC3 中有一个多行和一个值的文本区域。我似乎无法定义具有我可以设置的 @Value 属性的 textareafor 或 editorfor。我想要类似的东西

```
@Html.TextAreaFor(x => x.model, 10, 15, new{@Value="try"}) 
```

另外，我希望能够在视图中执行此操作，因为默认值将取决于同一视图中使用的另一个模型的属性。

请有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:33:08.010

使用 Telerik 控件

```
 Html.Telerik().EditorFor(model => model.Description)
        .Name("Editor")
        .HtmlAttributes(new { style = "height:400px" })
        .Encode(false)
        .Value((String)ViewBag.Contents)
        .Render(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:25:36.690

`textarea`html 元素不支持该属性`value`。所以你不能使用`@Html.TextAreaFor`.

所以你要做的是：

```
@model MvcApplication.Models.Model

@{
    if (1 > 2) // your logic here
    {
       Model.Description = "value1"; 
    }
    else
    {
       Model.Description = "value2"; 
    }

}

@Html.TextAreaFor(model => model.Description, new { @rows = "10", @cols = "15" }) 
```

让 html 助手处理渲染。

# android - 使用 smack 读取 pubsub 中的传入消息包

> ID：13777234
> 
> 赞同：0
> 
> 时间：2012-12-08T11:57:36.970
> 
> 标签：android, publish-subscribe, openfire, smack, asmack

我正在尝试使用`openfire`服务器和`asmack`库来实现 pubsub。`subscribers`我已经以必须获得批准的方式配置我的节点`publishers`

现在我正在尝试`Message`使用以下代码读取数据包，但我没有收到任何数据包。我想阅读`Message`数据包，因为我想知道订阅者何时向发布者发送请求以获取订阅。

```
PacketTypeFilter filter = new  PacketTypeFilter(org.jivesoftware.smack.packet.Message.class);

    PacketListener myListener = new PacketListener(){

        @Override
        public void processPacket(Packet packet) {
            // TODO Auto-generated method stub

            Log.d("PACKET" , "READ");

            if(packet instanceof org.jivesoftware.smack.packet.Message){

                    org.jivesoftware.smack.packet.Message msg = (org.jivesoftware.smack.packet.Message) packet;

            Log.d("MY MESSAGE" , msg.toXML()+ "");

                    }
                }

            };

    cxmpp.addPacketListener(myListener, filter); 
```

我想要的只是阅读传入的消息包

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:43:15.170

如果您拥有所有配置位并且您的 pubsub 组件正常工作，那么为了获得正常消息，您可以执行以下操作：

```
ConnectionConfiguration config = new ConnectionConfiguration("ADDRESS",PORT); // service name, also known as XMPP domain of the target server. 
config.setServiceName(this.pubsubServiceAddress);
connection = new XMPPConnection(config);
connection.connect();

PacketFilter filter = new MessageTypeFilter(Message.Type.normal); 

connection.addPacketListener(new PacketListener() { 
    public void processPacket(Packet packet) {
    Message mes = (Message)packet;
        // do your stuff here
    }
}, filter); 
```

# android - android 应用程序启动另一个应用程序并等待反馈

> ID：13777235
> 
> 赞同：-1
> 
> 时间：2012-12-08T11:57:40.593
> 
> 标签：android

我想将用户选择的一些图像加载到我的应用程序中。有什么方法可以启动他的默认文件资源管理器并在此应用程序中选择图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:28:57.427

你可以这样做：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(path, "application/filetype"); 
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

try {
    startActivity(intent);
} 
catch (ActivityNotFoundException e) {
    Toast.makeText(OpenPdf.this, 
        "No app available", 
        Toast.LENGTH_SHORT).show();
} 
```

# php - 通过 JSON 从 PHP 发送 HTML 到 javascript

> ID：13777237
> 
> 赞同：1
> 
> 时间：2012-12-08T11:57:53.473
> 
> 标签：php, javascript, jquery, json

我使用 jquery_form 插件将 html 表单发送到 php。然后 php 发回 JSON 对象。

这是 PHP 发回的内容

```
$content="<div>ABC</div>";
$json = json_encode(array("content" => $content));
...Here I also send $json to Mysql database...
echo $json; 
```

然后我提醒什么返回到 Javascript。

现在在 Mysql 我收到`{"content":"<div>ABC</div>"}`看起来正确的

但是在 Javascript 中，警报看起来像这样`{"content":"<div>ABC&lt;\/div&gt;"}</div>`

这对 jQuery.parseJSON 解析这个对象造成了问题。

请帮我将普通的 JSON 传递给 javascript。

**更新**

我在这里测试了 php 文件[http://codepad.viper-7.com/EBSM8G](http://codepad.viper-7.com/EBSM8G) 把这段代码放在那里

```
<?php
   $content="<div>ABC</div>";
   $json = json_encode(array("content" => ".$content."));
   echo $json; 
```

结果是这样的

```
{"content":".

ABC<\/div>."} 
```

所以有什么问题 ？？？？我很困惑 ：（

**更新 2** 尝试建议的提示将一行更改为此

```
$json = json_encode(array("content" => $content,JSON_UNESCAPED_SLASHES)); 
```

警报给了我这个`{"content":"<div>ABC&lt;\/div&gt;","0":64}</div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:24:15.167

HTML

您不会看到开始的 div 标签，因为它正在被您的浏览器解析（它在那里但您看不到它 - 检查源代码）。您确实看到了结束标记，因为（没有额外的标志）斜杠被转义并且它没有被解析为结束 div 标记。您的浏览器可能会立即关闭 div 标签，从而为您提供换行符（div 是块元素）。

JS

Javascript 工作得很好 [http://codepad.viper-7.com/inVZmv](http://codepad.viper-7.com/inVZmv)

此外，您不需要解析字符串，因为当您在 JavaScript 中使用它时它已经是 JSON（除非您在它周围加上引号）。考虑以下示例：[http ://codepad.viper-7.com/SK5KaK](http://codepad.viper-7.com/SK5KaK)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:14:35.127

这现在可能对您没有帮助，但是我会重新考虑通过 json 发送 html，在我看来，如果您要发送大量页面，那么这样一个简单的 div 包装器是不必要的，它最终会变得非常混乱。

我会在页面上使用 php on page reload 直接在页面上构建 HTML，或者如果您使用的是 ajax，那么只需发送构建内容客户端所需的变量，这种松散耦合的方法将更加灵活

一个更具体的例子很棘手，因为您的原始帖子非常抽象和简洁，但是如果您的表单是姓名和年龄，我会发送 json 对象，例如

```
{'name':'codemonkey', 'age':21} 
```

并使用 JS 在 jQuery 中填充 HTML，类似于

```
$('.theName').val( jsonData.name ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:56:41.863

如果您要发送`$content`，为什么要使用数组？

尝试这个

```
 $json = json_encode($content); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T12:21:02.807

也许您可以尝试在 header() 函数中使用正确的编码。

像这样的东西： http: [//codepad.viper-7.com/zZxzBd](http://codepad.viper-7.com/zZxzBd)

# image - 在没有文本和图像重叠的文档上找到最佳印章位置

> ID：13777238
> 
> 赞同：0
> 
> 时间：2012-12-08T11:58:07.093
> 
> 标签：image, algorithm, image-processing, document

我猜算法应该由 followig stemps 组成（示例位于底部）：

1.  信息区域检测（文字、图像）。
2.  寻找最接近顶部位置的邮票张贴而不与元素区域重叠，这在第一步已经检测到（这一步可以用蒙特卡洛方法实现）。

我也有以下关于文本和图像区域检测的想法：

1.  使用 tesseract 或其他 OCR。这种方法的缺点是某些页面元素（线条、图片等）无法被检测到。文本识别也是这项任务的开销。
2.  使用 OpenCV 或其他计算机视觉库（但我不知道具体如何）。

有没有人可以建议更多更好的方法、算法或库来找到文档上的最佳印章位置。

![邮戳样本](../Images/e2aebd2e4122da04cb1da70c80effd50.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:35:26.937

假设你知道邮票的大小，我会继续一个天真的但强大的解决方案。

假设文档为 1000*1000 像素，印章为 200*100。为文档创建金字塔（例如，将 4 个金字塔向下采样到 500*500、250*250、125*125、67*67）。对于最小的金字塔（比原始图像小 16 倍），当你找到这样的位置时，搜索一个 12*6 大小的空矩形，在金字塔中向上检查是否可以。

这不是最有效的解决方案，但由于金字塔，它会运行得非常快。

我认为 OCR 对于此类问题来说是一种过度杀伤力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T07:51:40.567

您不需要或不需要 OCR。

假设原始图像中的白色像素的值为 0，黑色的值为 1，灰度阴影具有中间值（如果不是这种情况，则只需根据需要重新缩放和/或否定图像），“理想”的解决方案是：

*   设置最佳 = 无穷大
*   对于图章图像的每个可能的左上角位置 (x, y)：
    *   设置 s = 0
    *   对于戳记中的每个非白色（或“非透明”）像素 (i, j)：
        *   s += PagePixel(x+i, y+j) （或像素值的其他函数，见下文）
    *   如果 s 低于 best，我们找到了更好的位置：
        *   将 best 设置为 s，将 bestX 设置为 x，将 bestY 设置为 y

之后，(bestX, bestY) 将是覆盖暗像素的最低总“权重”的标记的位置。您可能更喜欢使用平方像素值或其他一些函数，以更加重视避免非常暗的像素。

因为上述过程需要的时间与页面中的像素数乘以图章中的非白色像素数成正比，所以它可能会很慢（在任何现代 CPU 上它仍然只需要几分之一秒）。在这种情况下，按照[OopsUser](https://stackoverflow.com/a/13847236/47984)的建议对两个图像进行二次采样是有意义的。

# java - 在 Java 中同时使用鼠标监听器和按键监听器

> ID：13777240
> 
> 赞同：0
> 
> 时间：2012-12-08T11:58:48.797
> 
> 标签：java, swing, focus, keylistener, mouselistener

我有一个程序可以将对象向左或向右移动。我想利用它，以便它同时与鼠标侦听器和按键侦听器一起使用。使用左箭头键和鼠标左键单击执行相同的选项。鼠标右键或箭头键反之亦然。我的代码目前看起来有点像这样，我删掉了一些不必要的部分。

```
public class TetrisApplet extends JApplet implements MouseListener, KeyListener {

public void init() {

        tetris.addMouseListener(this);
        tetris.addKeyListener(this);

public void mouseReleased(MouseEvent e) {
        if (e.getButton() == MouseEvent.BUTTON1) {
            if (x > 0 && a[x - 1][y] == 0) {
                shape.move(-20, 0);
                x--;
            }
        }
        if (e.getButton() == MouseEvent.BUTTON3) {
            if (x < 9 && a[x + 1][y] == 0) {
                shape.move(+20, 0);
                x++;
            }
        }

    }

    public void keyPressed(KeyEvent e) {
        int keyCode = e.getKeyCode();
        switch (keyCode) {
            case KeyEvent.VK_LEFT:
                if (x > 0 && a[x - 1][y] == 0) {
                    shape.move(-20, 0);
                    x--;
                }
                break;
            case KeyEvent.VK_RIGHT:
                if (x < 9 && a[x + 1][y] == 0) {
                    shape.move(+20, 0);
                    x++;
                }
                break;
        }
    } 
```

所以我的问题是，有没有人知道为什么它不适用于钥匙？我的程序允许使用鼠标单击来移动对象，但是按下左箭头和右箭头键绝对没有任何作用。而且我不知道为什么它不起作用。我知道这可能是我刚刚错过的一些小东西，但非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T12:07:20.940

我认为问题与焦点有关。拥有焦点的组件会获取关键事件，而不是您的`tetris`组件（它没有任何方法来获取焦点）。

快速修复是添加：

```
tetris.requestFocus(); 
```

在`init`方法中是因为您希望焦点从*正确*的组件 (?) 开始，而在方法中是`mouseReleased`因为您希望能够再次获得焦点。

# android - 无法从我的应用程序连接到互联网

> ID：13777241
> 
> 赞同：2
> 
> 时间：2012-12-08T11:58:59.093
> 
> 标签：android, connect, httpurlconnection

```
try {
       String URLName = "http://www.sample.com";
       String line,res = "";
       HttpURLConnection con = (HttpURLConnection) new URL(URLName).openConnection();
       BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
       while ((line = in.readLine()) != null){
          res=res+line;
       }

}
catch (Exception e) {
      e.printStackTrace();
} 
```

最后，我从朋友的 android 4.x 上的 res 中得到“”，但它在我的模拟器上运行良好，当我使用朋友手机上的浏览器打开网站时：www.sample.com 然后我的应用程序再次运行，直到我们重启手机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:19:04.227

如果它在您的模拟器上运行良好（我假设模拟器在 API 级别 11< 上运行），但不是在 Android 4.x 上，那么我假设您在 UI 线程中执行繁重的网络任务。使用[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)来避免这种情况。

# c++ - 如何初始化或更改类中数组内的值？

> ID：13777243
> 
> 赞同：1
> 
> 时间：2012-12-08T11:59:13.600
> 
> 标签：c++, arrays, class

我正在使用一个具有字符数组的类。

```
class board
{
   char spot[64];

public:
   board();
   ~board(void);

}; 
```

我想在程序开始时将数组中的每个值设置为相同的字符如何在构造函数中初始化这些值？是否有一种简单的方法可以通过索引访问并允许对其进行更改？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:01:25.270

你不能在 C++03 中做到这一点。但是，可以在 C++11 的构造函数初始化器列表中初始化数组：

```
board::board()
: spot { 1, 2, 1, 2, /* ... */ }
{  } 
```

您可以输入值，或者想出一个神奇的可变参数模板来提供“N 个重复值”（只要类型是整数）。此外，任何缺失的元素都被初始化为零（例如`char spot[4] { 1, 2 };`）。

对于访问，您可以`spot[i]`在类内部使用，并且如果需要，您可以编写合适的访问器函数（尽管您应该始终担心您的类是否只是“转发”一个成员——实际上您希望您的类封装一些更高阶的功能）。

如果您想查看模板代码以“初始化`N`具有固定值的数组”，也许您应该将其作为一个单独的问题发布。

* * *

更新：这是一个简单的模板技巧，它将所有数组元素初始化为 value `2`。

```
#include <iostream>
#include <utility>
#include <prettyprint.hpp>

class Foo
{
    int arr[10];

    template <typename T, T> struct Filler { };
    template <typename T, bool, unsigned int, T...> struct FillHelper { };

    template <typename T, unsigned int I, T V, T ...Vals>
    Foo(FillHelper<T, true, I, V, Vals...>)
    : arr { V, Vals... } { }

    template <typename T, unsigned int I, T V, T ...Vals>
    Foo(FillHelper<T, false, I, V, Vals...>)
    : Foo(FillHelper<T, I == 1, I - 1, V, V, Vals...>()) { }

    template <typename T, unsigned int N, T V>
    Foo(Filler<T, V>, T const (&)[N])
    : Foo(FillHelper<T, N == 1, N - 1, V>())
    { }

public:
    Foo() : Foo(Filler<int, 2>(), arr)
    {
        std::cout << "Foo: " << arr << "\n";
    }
};

int main()
{
    Foo x;
} 
```

输出：`Foo: [2, 2, 2, 2, 2, 2, 2, 2, 2, 2]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:38:54.323

您只能使用 for 循环分配每个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T12:09:33.930

要将数组中的所有值设置为默认值 x，您可以使用 std::fill_n 之类的东西

，例如将所有元素设置为 -1
std::fill_n(array, 100, -1);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T12:09:47.173

> 将数组中的每个值设置为**相同**的字符

为什么不使用 memset ？例如将每个值初始化为 0x01

```
board::board()
{
    memset(spot, 0x01, sizeof(spot));
} 
```

# php - 如何使用 php 在页面中添加寻呼机？

> ID：13777244
> 
> 赞同：-3
> 
> 时间：2012-12-08T11:59:17.657
> 
> 标签：php

我是 PHP 新手，我想在页面中添加分页功能。

我有这段代码：

```
$result = mysql_query( "select title from post LIMIT 5 OFFSET 0");
while ($row = mysql_fetch_object($result)) {
    echo $row->title;
} 
```

我想每页只显示五个帖子标题。如果我想在这个页面上添加一个寻呼机，我该怎么做？例如：网址是`example.com/post.html`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:11:01.973

您可以在查询字符串中使用一个参数来指示您正在查看的页面。

例如：example.com/post.html?page=2 表示有人点击了指向第二页的链接。

然后在您的代码中，您可以执行以下操作：

```
$rowsPerPage = 5;
$page = isset($_GET['page']) ? $_GET['page'] : '0';
$index = $page * $rowsPerPage;
$result = mysql_query( 'select title from post LIMIT ' . $index . ', ' . $rowsPerPage);
while ($row = mysql_fetch_object($result)) {
   echo $row->title;
} 
```

您还需要获取您拥有的记录总数才能打印分页链接。您可以使用 SELECT COUNT(*) FROM POST 来获取总行数。然后你必须计算你将显示多少页。

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:02:00.017

您只需要使偏移量动态化，因此第一页为 0，第二页为 5，第三页为 10，依此类推。您可以使用 GET 协议在每次分页时将偏移量发送到 URL：

```
<a href="example.com/post.html?offset=0">1</a>
<a href="example.com/post.html?offset=5">2</a>
<a href="example.com/post.html?offset=10">3</a> 
```

显然，您使用 for 循环动态生成分页链接，公式为 (OFFSET= (num_pag-1) * LIMIT)

那么你的PHP将是：

```
$offset = $_GET['offset'];
$result = mysql_query( "select title from post LIMIT 5 OFFSET $offset"); 
```

# algorithm - 寻找能量最小的路径

> ID：13777245
> 
> 赞同：3
> 
> 时间：2012-12-08T11:59:30.310
> 
> 标签：algorithm, dynamic, data-structures, recursion, graph

ACM 国际大学编程竞赛，Asia-Amritapuri 站点，2011 年问题 A：MAGRID

非常感谢您在 10 月份帮助哈利波特找到不朽的魔法石。我们不是告诉过你这只是一个网络游戏吗？嗯！现在这是哈利真正的现场任务。您将获得一个具有 R 行和 C 列的 maggrid S（魔法网格）。这个魔格中的每个牢房要么有我们无畏的英雄必须击败的匈牙利马尾龙，要么有他的老师斯内普留给他的一瓶魔法药水。单元格 (i,j) 中的一条龙带走了 |S[i][j]| 他的力量点，并且在细胞 (i,j) 处的药水增加了哈利的力量 S[i][j]。如果在旅途中的任何时候他的力量下降到 0 或更少，哈利就会死去，没有魔法石可以使他复活。

哈利从左上角单元格 (1,1) 开始，魔法石在右下角单元格 (R,C) 中。从一个单元格 (i,j)，Harry 只能向下或向右移动一个单元格，即到单元格 (i+1,j) 或单元格 (i,j+1)，并且他不能移动到磁格之外。哈利在开始他的旅程之前使用了魔法来确定哪个细胞包含什么，但缺乏基本的简单数学技能来确定他开始收集魔法石所需的最小力量。请再次帮助他。

> 输入（标准输入）：
> 
> 第一行包含测试用例 T 的数量。接下来是 T 用例。每个测试用例由第一行中的 RC 组成，然后是 R 行中的网格描述，每行包含 C 个整数。行从上到下编号为 1 到 R，列从左到右编号为 1 到 C。S[i][j] < 0 的单元格包含龙，其他包含魔法药水。
> 
> 输出（标准输出）：
> 
> 输出 T 行，每个案例一个包含 Harry 应该从单元格 (1,1) 开始的最小强度，以便在他到单元格 (R,C) 的整个旅程中具有正强度。

约束：

```
1 ≤ T ≤ 30
2 ≤ R, C ≤ 500
-103 ≤ S[i][j] ≤ 103
S[1][1] = S[R][C] = 0 
```

时间限制：3 秒内存限制：64 MB 样本输入：

```
3
2 3
0 1 -3
1 -2 0
2 2
0 1
2 0
3 4
0 -2 -3 1
-1 4 0 -2
1 -2 -3 0 
```

样本输出：

```
2
1
2 
```

解释：案例 1：如果 Harry 在单元格 (1,1) 处以强度 = 1 开始，则他无法在任何可能的路径中保持正强度。他最初至少需要力量= 2。案例 2：请注意，从 (1,1) 开始，他至少需要强度 = 1。

我尝试用我的第一种方法来查看所有路径并选择能量最小的路径

```
#include<iostream>
#include<algorithm>
#include<stack>
#include<cmath>
using namespace std;

int TT,R,C,S[500][500];
int energy_g;
//unsigned long int fact(int a);
int trace(int r,int c,int energy,int energy_r);
int main(void)
{

    cin>>TT;

    for(int i=1;i<=TT;i++)
    {
    cin>>R>>C;     
    for(int r=1;r<=R;r++)
         for(int c=1;c<=C;c++)
         {
             cin>>S[r][c];
         //cout<<S[r][c];   
         }
     energy_g=32000;
     trace(1,1,0,0);
     cout<<energy_g<<endl;
    }
    return 0;
}

int trace(int r,int c,int energy,int energy_r)
{
    if(r>R || c>C)
        return 0;
    energy += S[r][c];
    if(energy < 0)
    {
    energy_r+=abs(energy)+1 ;       
    energy+=abs(energy)+1;
    }

    else if(energy == 0){        
    energy_r +=1;   
    energy +=1;
     }

    if(r == R && c == C)
    {

    if(energy_r < energy_g)
            energy_g = energy_r;
        return 0;
    }
    trace(r,c+1,energy,energy_r);
    trace(r+1,c,energy,energy_r);
    return 0;
} 
```

请帮助我进一步优化它，因为我知道我实施的方法需要最糟糕的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:32:25.713

这是我头顶上的解决方案。我们将使用非常常见的技巧——对答案进行二分搜索。解决方案可以分为两部分：

1）检查我们是否可以在 N 的健康水平下完成旅程。这可以通过简单的动态规划来完成 - 假设`dp[i][j]`我们进入单元格 (i,j) 时可以拥有的最大能量水平。由于我们只能向下或向右移动，`dp[i][j]`因此可以得出结论为 (i-1,j) 和 (i,j-1) 的最佳移动。如果级别低于 1，请将值设置为负无穷大，因为我们不能让 Harry 死:)（或者在执行 DP 步骤时添加检查以排除不可能的瓷砖）。`dp[0][0]`是 N 并且`dp[i][0]`,`dp[0][i]`可以立即计算。然后进行类似表格的填充。为了形象化，看一下[http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf](http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf)的图 6.4 。

2）对答案进行二分搜索。最初`left = 1`和`right = 2000000000`（或其他合适的上限） - 这些是二进制搜索的左右边界。在二进制搜索的每次迭代中，我们检查是否可以在健康级别为 的情况下完成旅程`mid = (left+right)/2`并递归到适当的一半。

这在实践中效果很好——每个 DP 步骤都需要 O(R*C) 时间，并且二进制搜索会增加一个 log(2000000000) 的因子，大约是 30。这应该没问题。

它可能只能用 DP 解决，但我现在看不到如何解决。

# solr - SolrIndexSearch 未返回数值范围查询的任何结果

> ID：13777246
> 
> 赞同：1
> 
> 时间：2012-12-08T11:59:36.030
> 
> 标签：solr, lucene

我有以下代码适用于带有字符串字段的andy Term查询，但不适用于数字字段。它不会为 int、tint、long、tlong 字段返回任何内容！它不应该和字符串一样工作吗？

```
myClass  extends SearchHandler {

@Override
public void handleRequestBody(SolrQueryRequest req, SolrQueryResponse rsp) {

SolrIndexSearcher search = req.getSearcher();

SolrIndexSearcher.QueryCommand cmd = new QueryCommand();
SolrIndexSearcher.QueryResult result = new QueryResult();

cmd.setQuery(q);
cmd.setOffset(0);
cmd.setLen(10)

result = search.search(result, cmd); 
```

# php - PHP：如何从另一个数组创建新的特定格式化数组

> ID：13777250
> 
> 赞同：1
> 
> 时间：2012-12-08T12:00:20.573
> 
> 标签：php, arrays

我有一个这样的数组：

```
$arr = array(
        array(
            'service' => 'super speed',
            'price' => 2000),
        array(
            'service' => 'regular',
            'price' => 1500
        )
       ); 
```

如何从该数组创建一个新数组，该数组使用第一个元素作为数组键：

```
$newarr = array(
    'super speed' => 2000,
    'regular' => 1500
    ); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:04:45.753

```
$newarr = array_shift($arr)
$newarr = array_flip($newarr) 
```

或者你可以结合：

```
$newarr = array_shift(array_flip($arr)) 
```

# jquery - .one() 不像 jquery.com 建议的第一次使用那样工作

> ID：13777260
> 
> 赞同：4
> 
> 时间：2012-12-08T12:02:07.777
> 
> 标签：jquery

我已经用尽了我对使用 .one() 来满足我的需求的研究，并让它在每个类选择器实例中正常工作，它只显示一次。但是在 jQuery.com 上，它声明以下内容将起作用，如果单击一次，如果使用相同的类选择器单击另一个元素，它将不会再次运行。但是，这对我不起作用。我在一页上有并且需要相同的特定类选择器。

以下是 jQuery.com 提供的示例代码：

```
$("#foo").one("click", function() {
alert("This will be displayed only once.");
});
$("body").one("click", ".foo", function() {
alert("This displays once for the first .foo clicked in the body.");
}); 
```

上面的第二个似乎不像它所说的那样工作。有谁知道如何真正让它发挥作用。我可以在几个地方拥有 .foo ，但在单击 .foo 之一后，该功能仅显示一次。当另一个 .foo 被点击时，它不会再运行这个函数了吗？非常感谢您的任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:42:12.267

你可以试试这个：

```
$(function(){
   $(".foo").one("click",function(event) {
      alert("This displays once for the first .foo clicked in the body.");
   });
}); 
```

`.foo`这只会击中`alert for one time`。如果您再次点击它而不重新加载警报将不会出现。

小提琴：http: [//jsbin.com/eluquq/1/edit](http://jsbin.com/eluquq/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:07:55.597

正如此评论中所解释的，这是[status-bydesign](/questions/tagged/status-bydesign "显示标记为“status-bydesign”的问题")。当读取正确时（正如[dystroy所说](https://stackoverflow.com/questions/13777260/one-doesnt-work-like-jquery-com-suggests-for-first-use#comment18942984_13777260)，它写得不好），处理程序只会触发*一次*，用于匹配选择器的*第一个*元素。

***要让每个*** 元素不超过一次触发`.foo`，您必须自己执行此操作（请注意，我们已经从 using 切换`one()`到`on()`，并自己处理速率限制。

```
$("body").on("click", ".foo", function() {
    var self = $(this);

    if (!self.data('fired')) {
        self.data('fired', true);

        alert("This displays once for each .foo clicked in the body.");
    }
}); 
```

[http://jsfiddle.net/Zdqpp/1/](http://jsfiddle.net/Zdqpp/1/)

# ruby-on-rails - 麻烦保存自引用多对多关系

> ID：13777261
> 
> 赞同：1
> 
> 时间：2012-12-08T12:02:08.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, formtastic, activemodel

我是 Rails 的新手，正在努力获取要保存的格式 - 数据库不断回滚插入而没有任何明显的解释。

我有一个 PublishedItem 和一个引用。每个 PublishedItem 可以通过 Citation 对其他 PublishedItems 进行许多引用 - 这是（精简的）PublishedItem 模型：

```
 class PublishedItem < ActiveRecord::Base

      attr_accessible :date_published, 
              :author_ids,
              :cited_published_item_ids,
              :citing_published_item_ids

      has_many :authorships
      has_many :authors, through: :authorships, order: "last_name, first_name"

      has_many :citations, 
        foreign_key: "citing_published_item_id", 
        class_name: "Citation", 
        dependent: :destroy

      has_many :cited_published_items, 
        through: :citations, 
        source: :cited

      has_many :reverse_citations, 
        foreign_key: "cited_published_item_id", 
        class_name: "Citation", 
        dependent: :destroy

      has_many :citing_published_items, 
        through: :reverse_citations, 
        source: :citing 
```

还有其他关系，但我只包括一个用于比较目的：作者关系，与另一个表的更典型关系，作者正确保存。这只是我遇到问题的自我引用。

这是引文模型：

```
 class Citation < ActiveRecord::Base

      attr_accessible :citation_type, :cited_id, :citing_id

      belongs_to :citing, 
        class_name: "PublishedItem", 
        foreign_key: "citing_published_item_id"

      belongs_to :cited, 
        class_name: "PublishedItem", 
        foreign_key: "cited_published_item_id" 
```

和表（postgresql）：

```
 CREATE TABLE citations
    (
      id serial NOT NULL,
      citing_published_item_id integer,
      cited_published_item_id integer,
      citation_type character varying(255),
      created_at timestamp without time zone NOT NULL,
      updated_at timestamp without time zone NOT NULL,
      CONSTRAINT published_item_citations_pkey PRIMARY KEY (id )
    )
    WITH (
      OIDS=FALSE
    ); 
```

new.html.erb 表单（摘录）：

```
 <%= semantic_form_for @published_item do |f| %>
      <%= f.semantic_errors %>
      <%= f.inputs do %>
        <%= f.input :title %>
        <%= f.input :authors, as: :select, 
           collection: Author.find(:all, order: "last_name ASC, first_name ASC") %>
        <%= f.input :cited_published_items, as: :select, 
           collection: PublishedItem.find(:all, order: "title ASC") %>
      <% end %>
      <%= f.actions do %>
        <%= f.action :submit, button_html: { class: "btn btn-primary" } %>
        <%= f.action :cancel, button_html: { class: "btn btn-default" } %>
      <% end %> 
```

我希望发生但似乎无法实现的是引用另一个被传递到新 PublishedItem 表单中的 PublishedItem，并将原始 PublishedItem 作为被引用_published_item 和新 PublishedItem 作为 citing_published_item 的记录插入到引文中。但我很难过。每当我在选择列表中选择一个 PublishedItem 时，查询都会回滚。作者身份（和其他 M:M）正常工作。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:25:28.450

尝试这样的事情 -

控制器 ：

```
def new
  @published_item = PublishedItem.new
  @published_item.citations.build
end 
```

PublishedItem 模型：

```
accepts_nested_attributes_for :citations
# i noticed your accessible foreign keys were set wrong here
attr_accessible :citation_type, 
                :cited_published_item_id, 
                :citing_published_item_id 
```

形式 ：

```
<%= semantic_form_for @published_item do |form| %>
  # published_item fields
  <%= form.fields_for :citations do |citation_subform| %>
    <%= citation_subform.select :cited_published_item_id,
          options_for_select( 
            PublishedItem.order(:title).map{|p|[p.title,p.id]} 
          ) %>
  <% end %>
<% end %> 
```

您希望您的表单传递如下结构的参数：

```
{published_item : 
  {citations_attributes: 
    [
      {cited_published_item_id: xxx}
    ]
  }
} 
```

# vb.net - 类只能是单个对象的模板，不能是集合的模板

> ID：13777262
> 
> 赞同：2
> 
> 时间：2012-12-08T12:02:08.737
> 
> 标签：vb.net, oop

我有一个简单的类`List.vb`，如下所示：

```
Public Class List

    Public fList As List(Of Integer)
    Public Sub New()
        fList = New List(Of Integer)
        fList.Add(1)
        fList.Add(2)
        fList.Add(3)
        fList.Add(4)
        fList.Add(5)
    End Sub
End Class 
```

该`Console`应用程序正在使用此类，如下所示：

```
Module Module1

    Sub Main()

        Dim fObject As List = New List
        Dim cnt As Integer = 0
        For Each x As Integer In fObject.fList
            Console.WriteLine("hello; {0}", fObject.fList.Item(cnt).ToString())
            cnt = cnt + 1
        Next

        Console.WriteLine("press [enter] to exit")
        Console.Read()

    End Sub

End Module 
```

我可以更改类代码以便 List.vb 是一个列表（整数）类型吗？
这意味着在控制台代码中我可以替换`In fObject.fList`为`In fObject`?
还是我在叫错树 - 类应该是单个对象而列表应该是类的集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:14:55.957

是的，你可以这么做。为了使对象与 兼容`For Each`，它必须具有以下`GetEnumerator`功能：

```
Public Function GetEnumerator() As IEnumerator _
  Implements IEnumerable.GetEnumerator
    Return New IntListEnum(fList)
End Function 
```

`IntListEnum`反过来，该类必须实现，`IEnumerator`如下所示：

```
Public Class IntListEnum Implements IEnumerator

Private listInt As List(Of Integer)

Dim position As Integer = -1

Public Sub New(ByVal fList As List(Of Integer))
    listInt = fList
End Sub 

Public Function MoveNext() As Boolean Implements IEnumerator.MoveNext
    position = position + 1
    Return (position < listInt.Count)
End Function 

Public Sub Reset() Implements IEnumerator.Reset
    position = -1
End Sub 

Public ReadOnly Property Current() As Object Implements IEnumerator.Current
    Get 
        Try 
            Return listInt(position)
        Catch ex As IndexOutOfRangeException
            Throw New InvalidOperationException()
        End Try 
    End Get 
End Property 
```

结束类

现在您可以设为私有，并按如下方式`fList`迭代您的：`List`

```
For Each x As Integer In fObject 
```

[你可以在这里](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)看到一个完整的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:40:23.073

dasblinkenlight 提供的答案非常好，但如果您只需要一个预先填充的整数列表，您可以继承`List(Of Integer)`自然后让类在构造函数中填充自身：

```
Public Class List
    Inherits List(Of Integer)

    Public Sub New()
        Add(1)
        Add(2)
        Add(3)
        Add(4)
        Add(5)
    End Sub
End Class 
```

当您从 继承时`List(Of Integer)`，您的类会自动获得该类型实现的所有功能，因此您的类也成为一个以相同方式工作的列表类。然后，您可以像这样使用它：

```
Dim fObject As New List()
For Each x As Integer In fObject
    Console.WriteLine("hello; {0}", x)
Next 
```

# php - 要检查的 PHP 代码

> ID：13777266
> 
> 赞同：1
> 
> 时间：2012-12-08T12:02:29.753
> 
> 标签：php, while-loop

我有以下代码。我标记的东西似乎`block 1`并`block 2`没有一起工作，但是如果我摆脱另一个，一个就可以了；在检查使用时，`print_r.` 我对 php 相当陌生，想知道是否有人能指出我哪里出错了。我以前在其他地方工作过，但丢失了文件。提前谢谢了。

PS：我知道尽早进入 PDO 和 mysqli 是个好主意。但我只想先掌握基础知识。

```
<?php

//Connect to database

$connect = mysql_connect ("localhost","root","password");
$db = mysql_select_db("project");

//Find top 100 most popular images

$pop = mysql_query("

SELECT * FROM users ORDER BY pop DESC LIMIT 2

");

//Define local variables for images to show

//block 1//

$images = array();
while ($row = mysql_fetch_array($pop)) {
    $images[] = $row['image'];
    }

//block2//

$links = array ();
while ($row = mysql_fetch_array($pop)){
$links[] = $row['username'];
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:06:05.887

[mysql_data_seek](http://php.net/manual/en/function.mysql-data-seek.php)将起作用：

```
$images = array();
while ($row = mysql_fetch_array($pop)) {
    $images[] = $row['image'];
}

mysql_data_seek( $pop, 0 );

$links = array ();
while ($row = mysql_fetch_array($pop)){
    $links[] = $row['username'];
} 
```

但是，更好/更清洁的解决方案是在第一个循环期间将**两个**值放入各自的数组中：

```
$links = array();
$images = array();
while ($row = mysql_fetch_assoc($pop)) {
    $images[] = $row['image'];
    $links[] = $row['username'];
} 
```

或者，甚至更清洁 - 将一个数组添加到您的数组中：

```
$avatars = array();
while ($row = mysql_fetch_assoc($pop)) {
    array_push(
        $avatars, 
        array('image' => $row['image'], 'username' => $row['username'])
    );
}

var_dump($avatars); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T12:05:50.120

> 首先，[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

[`mysql_data_seek($pop, 0)`](http://php.net/mysql_data_seek)在两个循环之间尝试使用，`while`或用以下代码替换您的代码：

```
$images = array();
$links = array();
while ($row = mysql_fetch_array($pop)) {
    $images[] = $row['image'];
    $links[] = $row['username'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T12:09:23.267

您已经在第一个块中迭代了整个结果集，您需要通过执行以下操作重新查找指向两个代码块之间结果集开头的指针：

```
mysql_data_seek($pop, 0); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-08T12:14:21.950

语法错误。

```
while ($row = mysql_fetch_array($pop, MYSQL_ASSOC)) 
```

# javascript - Bootbox 确认后执行请求

> ID：13777271
> 
> 赞同：0
> 
> 时间：2012-12-08T12:03:00.603
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap

我想在 rails 的链接上添加一个确认弹出窗口。由于浏览器的默认 css confirm: 方法无法更改，因此我决定使用 bootbox。( [http://bootboxjs.com/](http://bootboxjs.com/) )

假设我的 rails 应用程序中有以下链接

```
= link_to "asd", root_path(), id: "test" 
```

以下javascript代码打开一个弹出窗口，结果设置正确，如果用户批准确认，我现在需要执行链接访问。

```
$("#test").click(function(e) {
  e.preventDefault();
  bootbox.confirm("Are you sure?", function(result) {
    if (result) {
        // ???
    } else {
        return false;
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:38:16.093

```
$("#test").click(function(e) {
  e.preventDefault();
  bootbox.confirm("Are you sure?", function(result) {
    if (result) {
      window.open($(this).attr("href"),"_self");
  });
}); 
```

我想通了，一点也不复杂，我很惊讶没有人回答:-(

# asp.net-mvc-3 - 一段时间后如何要求用户添加登录的详细信息

> ID：13777272
> 
> 赞同：-1
> 
> 时间：2012-12-08T12:03:05.780
> 
> 标签：asp.net-mvc-3

在我的网站中，我想在页面闲置一段时间后实现重新登录的功能。我的意思是当用户打开页面并离开页面一段时间并做其他工作时。当用户再次出现时，我需要再次询问用户的凭据。如何做呢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:07:49.850

您必须检查所有页面上的会话或其他选项是使用 Asp.net Membership

# mysql - 在 Mysql 中使用 Text 数据类型

> ID：13777279
> 
> 赞同：0
> 
> 时间：2012-12-08T12:04:40.917
> 
> 标签：mysql

我正在使用带有 INNODB 引擎的 Mysql，row_format 是梭子鱼。

现在我有一个表，它有一个 PK 列和许多（大约 180 个）文本数据类型的列。

我的问题是如果表的数据变大，主要的性能问题或缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:11:53.543

如果您只是将数据存储在那些 TEXT 列中 - 这是可以接受的。如果您在这些列上有索引 - 对它们使用字典编码。

# unix - 权限被拒绝 - /usr/local/bin/pkill.pl

> ID：13777287
> 
> 赞同：0
> 
> 时间：2012-12-08T12:05:50.910
> 
> 标签：unix, homebrew

我正在安装 Homebrew，当我运行`brew doctor`它时会提示：

`Error: Permission denied - /usr/local/bin/pkill.pl`

我试过了：（ `$ sudo chmod 755 /usr/local/bin/pkill.pl`还有其他选项：777，斧头，......我不知道哪个需要它来酿造）

但是当`ls`，仍然：

`ls: ./pkill.pl: Permission denied lrwx------ 1 root wheel 23 11 feb 2012 pkill.pl ...`

你能告诉我如何解决吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:15:00.393

目录列表中的第一个字符 ( `l`) 表示该文件是指向另一个文件的符号链接。用于`ls -l`找出哪个。问题很可能是该文件的权限。链接的权限通常为 755（读取和执行所有用户并为所有者写入）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-09T15:35:46.673

这应该工作 `sudo chmod +rx /usr/local/bin/pkill.pl`

# arduino - 使用 MPU6050 加速度计/陀螺仪模块

> ID：13777289
> 
> 赞同：2
> 
> 时间：2012-12-08T12:06:04.157
> 
> 标签：arduino, accelerometer, microcontroller, robotics, gyroscope

我正在使用[Arduino Mega测试我的](http://arduino.cc/en/Main/ArduinoBoardMega)[MPU6050 模块](http://www.ebay.com/itm/MPU-6050-Module-3-Axis-Gyroscope-Acce-lerometer-for-Arduino-Power-supply-3v-5v-/281033263573?pt=LH_DefaultDomain_0&hash=item416ee349d5)。我发现 Jeff Rowberg 为此编写了一个库。我尝试了他提供的[这个例子](https://github.com/jrowberg/i2cdevlib/blob/master/Arduino/MPU6050/Examples/MPU6050_DMP6/MPU6050_DMP6.ino)。但是 Arduino IDE 在尝试验证草图时会出现大量错误。

我已经安装了 Jeffs 库。*（下图显示了库内容）*

![在此处输入图像描述](../Images/088efcd84bda45f07f45bb905bc04b84.png)

这是我得到的错误：

```
In file included from C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:42,
                 from sketch_dec08a.cpp:50:
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050.h:792: warning: only initialized variables can be placed into program memory area
In file included from sketch_dec08a.cpp:50:
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:89: warning: only initialized variables can be placed into program memory area
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:89: error: conflicting declaration 'const prog_uchar dmpMemory [1929]'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050.h:792: error: 'dmpMemory' has a previous declaration as 'prog_uchar dmpMemory [1929]'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:229: warning: only initialized variables can be placed into program memory area
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:271: warning: only initialized variables can be placed into program memory area
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:271: error: conflicting declaration 'const prog_uchar dmpUpdates [47]'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050.h:931: error: 'dmpUpdates' has a previous declaration as 'uint8_t dmpUpdates [29][9]'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:281: error: no 'uint8_t MPU6050::dmpInitialize()' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:506: error: no 'bool MPU6050::dmpPacketAvailable()' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:533: error: no 'uint8_t MPU6050::dmpGetAccel(int32_t*, const uint8_t*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:541: error: no 'uint8_t MPU6050::dmpGetAccel(int16_t*, const uint8_t*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:549: error: no 'uint8_t MPU6050::dmpGetAccel(VectorInt16*, const uint8_t*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:557: error: no 'uint8_t MPU6050::dmpGetQuaternion(int32_t*, const uint8_t*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:566: error: no 'uint8_t MPU6050::dmpGetQuaternion(int16_t*, const uint8_t*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:575: error: no 'uint8_t MPU6050::dmpGetQuaternion(Quaternion*, const uint8_t*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:590: error: no 'uint8_t MPU6050::dmpGetGyro(int32_t*, const uint8_t*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:598: error: no 'uint8_t MPU6050::dmpGetGyro(int16_t*, const uint8_t*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:608: error: no 'uint8_t MPU6050::dmpGetLinearAccel(VectorInt16*, VectorInt16*, VectorFloat*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:616: error: no 'uint8_t MPU6050::dmpGetLinearAccelInWorld(VectorInt16*, VectorInt16*, Quaternion*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:628: error: no 'uint8_t MPU6050::dmpGetGravity(VectorFloat*, Quaternion*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:639: error: no 'uint8_t MPU6050::dmpGetEuler(float*, Quaternion*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:645: error: no 'uint8_t MPU6050::dmpGetYawPitchRoll(float*, Quaternion*, VectorFloat*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:658: error: no 'uint8_t MPU6050::dmpProcessFIFOPacket(const unsigned char*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:668: error: no 'uint8_t MPU6050::dmpReadAndProcessFIFOPacket(uint8_t, uint8_t*)' member function declared in class 'MPU6050'
C:\Users\LordXaX\Documents\Arduino\libraries\MPU6050/MPU6050_6Axis_MotionApps20.h:693: error: no 'uint16_t MPU6050::dmpGetFIFOPacketSize()' member function declared in class 'MPU6050'
sketch_dec08a.cpp: In function 'void setup()':
sketch_dec08a.cpp:177: warning: only initialized variables can be placed into program memory area
sketch_dec08a.cpp:181: warning: only initialized variables can be placed into program memory area
sketch_dec08a.cpp:182: warning: only initialized variables can be placed into program memory area
sketch_dec08a.cpp:182: warning: only initialized variables can be placed into program memory area
sketch_dec08a.cpp:185: warning: only initialized variables can be placed into program memory area
sketch_dec08a.cpp:191: warning: only initialized variables can be placed into program memory area
sketch_dec08a:187: error: 'class MPU6050' has no member named 'dmpInitialize'
sketch_dec08a.cpp:197: warning: only initialized variables can be placed into program memory area
sketch_dec08a.cpp:201: warning: only initialized variables can be placed into program memory area
sketch_dec08a:198: error: 'class MPU6050' has no member named 'getIntStatus'
sketch_dec08a.cpp:206: warning: only initialized variables can be placed into program memory area
sketch_dec08a:205: error: 'class MPU6050' has no member named 'dmpGetFIFOPacketSize'
sketch_dec08a.cpp:216: warning: only initialized variables can be placed into program memory area
sketch_dec08a.cpp:218: warning: only initialized variables can be placed into program memory area
sketch_dec08a.cpp: In function 'void loop()':
sketch_dec08a:246: error: 'class MPU6050' has no member named 'getIntStatus'
sketch_dec08a.cpp:260: warning: only initialized variables can be placed into program memory area
sketch_dec08a:263: error: 'class MPU6050' has no member named 'getFIFOBytes' 
```

我该如何克服呢？

我一直在非常努力地使用这个设备来获取加速度/陀螺仪值。但仍然没有成功。

* * *

**编辑**

这是我在尝试编译（验证）时得到的。

![在此处输入图像描述](../Images/112d2fb8d5f480781def65418536bd53.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:38:11.563

Jeff 提供的 MPU6050_DMP6 示例对我有用。从您的编译错误来看，您似乎包含了 MPU6050.h，而不是 MPU6050_6Axis_MotionApps20.h。确保包含正确的内容。

如果您查看[库代码](https://github.com/jrowberg/i2cdevlib/blob/master/Arduino/MPU6050/MPU6050_6Axis_MotionApps20.h)，您会注意到 .dmp_ *_* _ 方法不是在 MPU6050.cpp 文件中实现，而是在 MPU6050_6Axis_MotionApps20.h 文件中实现。如果这不能解决问题，请发布您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:07:41.620

尝试将 jeffs i2c .cpp 和 .h 文件放入与 mpu6050 库文件相同的文件夹中，我发现这对我有用，抱歉，如果这有点晚了，但希望对您有所帮助：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T23:16:15.723

我遇到了同样的问题，结果发现我同时包含了 MPU6050.h 和 MPU6050_6Axis_MotionApps20.h。我注释掉了 MPU6050.h，它现在可以正常编译了。似乎前者压倒了后者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-27T15:53:40.683

我通过将 I2Cdev.cpp 和 I2C.h 放在 MPU6050 库文件夹中解决了编译问题。（注意：这些是*开发*文件）。这些是 Jeff 的库，可以在[GitHub 上找到](https://github.com/jrowberg/i2cdevlib/tree/master/Arduino/I2Cdev)

# c# - 来自类对象属性的动态表达式

> ID：13777290
> 
> 赞同：1
> 
> 时间：2012-12-08T12:06:05.153
> 
> 标签：c#, lambda

我开始探索动态表达式，所以请帮我解决一个问题。我有一个对象

```
 public class Categorisation{
       string Name{get;set;}
    }

    public class Client{
       public Categorisation Categorisation{get;set;}
} 
```

我只需要编写一个动态表达式并调用 Categorisation。**来自 Client 对象的名称**.Equals("A1")。

```
x=>x.Categorisation.Name.Equals("A1") 
```

如何使用表达式做到这一点？

```
 var param = Expression.Parameter(typeof(Client));
   var prop = Expression.Property(param, typeof(Client).GetProperty("Categorisation"));
   var argument = Expression.Constant("A1");
   var method = typeof(string).GetMethod("Equals", new[] { typeof(string) });
   var call = Expression.Call(prop, method);
   var expr = Expression.Lambda<Func<Client, bool>>(call, param); 
```

当然，这段代码是错误的，我从 Categorization 属性而不是从 Name of Categorisation 调用方法 Equals。但是如何调用 Name 属性呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:14:18.480

```
var param = Expression.Parameter(typeof(Client));
var prop = Expression.Property(param, typeof(Client).GetProperty("Categorisation"));
var namePropExpr = Expression.Property(prop, "Name");
var argument = Expression.Constant("A1");
var method = typeof(string).GetMethod("Equals", new[] { typeof(string) });
var call = Expression.Call(namePropExpr, method, argument);
var expr = Expression.Lambda<Func<Client, bool>>(call, param); 
```

# javascript - 在 Zepto 中指定 $.ajax JSONP 回调名称

> ID：13777292
> 
> 赞同：5
> 
> 时间：2012-12-08T12:06:06.267
> 
> 标签：javascript, jquery, backbone.js, zepto

在 jQuery 中，

```
$.ajax({ 
    url: 'http://reddit.com/r/aww.json', 
    dataType: 'jsonp',
    jsonp: 'jsonp'
}); 
```

向以下 URL 发送请求：

`http://www.reddit.com/r/aww.json?jsonp=jsonp1354967449950`.

但在 Zepto 中，相同的函数调用会向以下位置发送请求：

`http://www.reddit.com/r/aww.json?callback=jsonp4`

Reddit API 要求将 JSONP 回调命名为“jsonp”。查看 Zepto 源代码，我感觉不支持 'jsonp' 选项。

如何在 Zepto 中模拟这种 jQuery 行为？

注意：我试图通过覆盖集合的同步函数并调用 collection.fetch() 在 Backbone.js 中获得这种行为，类似于以下代码：[https](https://gist.github.com/1245613) ://gist.github.com/1245613 。我很好奇是否有更惯用的方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T23:16:54.917

[在 Zepto 中](http://zeptojs.com/#%24.ajaxJSONP)：

```
$.ajax({ 
    url: 'http://reddit.com/r/aww.json?jsonp=?'
}); 
```

# double - 温度扩散公式的双倍或小数

> ID：13777295
> 
> 赞同：1
> 
> 时间：2012-12-08T12:06:50.933
> 
> 标签：double, decimal

我正在考虑编写一个应用程序，该应用程序计算随着时间的推移在暴露（例如火）的材料中的温度分布。

然后我需要将结果绘制为材料几何形状的热图。

现在我想知道我是否应该在所有计算和绘图中使用 Decimal 或 Double。我已经研究过两者，但仍然不确定使用哪个。

我需要比较值，包括随时间推移的插值。据我所知，由于表示不精确，double 有比较问题。但是十进制很重。

我只倾向于双倍，但同时更精确的表示和比较也很有价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:21:30.337

十进制数的任何有限表示都必然与有限二进制表示具有相同的“不精确表示”问题。并非所有实数都可以在有限空间中表示，并且以 10 为底并无帮助。

当谈到表示物理模拟时，十进制只是使用相同的位效率较低。另一方面，十进制数的特定实现可能允许使用更多位，但也可以使用多精度二进制浮点[实现](http://www.mpfr.org)。

十进制浮点库不会“不精确”或存在“比较问题”的迷信很普遍，因为这些库可以精确地表示从 0.1 开始的十进制数。如果您的模拟涉及十次方的系数，那么十进制确实是一个很好的选择。否则，**十进制将无法解决连续数字范围的有限表示所固有的任何问题**。

# sql - ConnectionString 属性尚未初始化帮助数据库

> ID：13777296
> 
> 赞同：0
> 
> 时间：2012-12-08T12:06:56.997
> 
> 标签：sql, database, dataset, dataadapter, isam

在过去的 4 周里，我一直在努力解决这个问题，但找不到我一直在绕圈子的答案。我在 con As New OleDb.OleDbConnection 和连接字符串和 ISAM 上遇到了多个错误

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim con As New OleDb.OleDbConnection
    Dim dbProvider As String
    Dim dbSource As String
    Dim da As OleDb.OleDbDataAdapter
    Public sql As String
    Dim ds As New DataSet
    Dim dbPassword As String

        dbProvider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
        dbSource = "C:\Users\Edward\Desktop\Edward\DataBase Login Window\Users.mdb;Jet OLEDB:Database"

        con.ConnectionString = dbProvider & dbSource

        con.Open()
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        sql = "SELECT * FROM users WHERE accUsername='" & TextBox1.Text & "'AND accPass='" & TextBox2.Text & "'"

        da = New OleDb.OleDbDataAdapter(sql, con)

        da.Fill(ds, "users")

        If ds.Tables("users").Rows.Count = 1 Then
            Dim isAdmin As Boolean = ds.Tables("users").Rows(0).Item(4)
            If isAdmin = True Then
                MsgBox("Logged in.")
                Form4.Show()
                Form4.Username = TextBox1.Text
                Form4.Password = TextBox2.Text
            ElseIf isAdmin = False Then
                MsgBox("Logged in user.")
                Form6.Show()
                Form6.Username = TextBox1.Text
                Form6.Password = TextBox2.Text
            End If
        Else
            MsgBox("Incorrect Username or Password")
        End If

        Me.Hide()

        ds.Clear()
        Me.Refresh()
    End Sub

    Private Sub createanaccount_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles createanaccount.Click
        Form2.ShowDialog()

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T07:59:24.900

在按钮中你应该设置 connectionString 这里是一个例子。

```
dim con as new SQLConnection/OLEDBConnection
con.ConnectionString="Provide your connection string"
con.open 
```

我希望这肯定会解决您的问题

# algorithm - Go 中的优先级队列实现

> ID：13777298
> 
> 赞同：2
> 
> 时间：2012-12-08T12:07:17.643
> 
> 标签：algorithm, go, priority-queue, reusability

我刚刚看到了优先级队列的一种*通用*方式的实现，在这种方式中，任何满足接口的类型都可以放入队列中。这是要走的路还是会引入任何问题？

```
// Copyright 2012 Stefan Nilsson
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Package prio provides a priority queue.
// The queue can hold elements that implement the two methods of prio.Interface.
package prio

/*
A type that implements prio.Interface can be inserted into a priority queue.

The simplest use case looks like this:

        type myInt int

        func (x myInt) Less(y prio.Interface) bool { return x < y.(myInt) }
        func (x myInt) Index(i int)                {}

To use the Remove method you need to keep track of the index of elements
in the heap, e.g. like this:

        type myType struct {
                value int
                index int // index in heap
        }

        func (x *myType) Less(y prio.Interface) bool { return x.value < y.(*myType).value }
        func (x *myType) Index(i int)                { x.index = i }
*/
type Interface interface {
        // Less returns whether this element should sort before element x.
        Less(x Interface) bool
        // Index is called by the priority queue when this element is moved to index i.
        Index(i int)
}

// Queue represents a priority queue.
// The zero value for Queue is an empty queue ready to use.
type Queue struct {
        h []Interface
}

// New returns an initialized priority queue with the given elements.
// A call of the form New(x...) uses the underlying array of x to implement
// the queue and hence might change the elements of x.
// The complexity is O(n), where n = len(x).
func New(x ...Interface) Queue {
        q := Queue{x}
        heapify(q.h)
        return q
}

// Push pushes the element x onto the queue.
// The complexity is O(log(n)) where n = q.Len().
func (q *Queue) Push(x Interface) {
        n := len(q.h)
        q.h = append(q.h, x)
        up(q.h, n) // x.Index(n) is done by up.
}

// Pop removes a minimum element (according to Less) from the queue and returns it.
// The complexity is O(log(n)), where n = q.Len().
func (q *Queue) Pop() Interface {
        h := q.h
        n := len(h) - 1
        x := h[0]
        h[0], h[n] = h[n], nil
        h = h[:n]
        if n > 0 {
                down(h, 0) // h[0].Index(0) is done by down.
        }
        q.h = h
        x.Index(-1) // for safety
        return x
}

// Peek returns, but does not remove, a minimum element (according to Less) of the queue.
func (q *Queue) Peek() Interface {
        return q.h[0]
}

// Remove removes the element at index i from the queue and returns it.
// The complexity is O(log(n)), where n = q.Len().
func (q *Queue) Remove(i int) Interface {
        h := q.h
        n := len(h) - 1
        x := h[i]
        h[i], h[n] = h[n], nil
        h = h[:n]
        if i < n {
                down(h, i) // h[i].Index(i) is done by down.
                up(h, i)
        }
        q.h = h
        x.Index(-1) // for safety
        return x
}

// Len returns the number of elements in the queue.
func (q *Queue) Len() int {
        return len(q.h)
}

// Establishes the heap invariant in O(n) time.
func heapify(h []Interface) {
        n := len(h)
        for i := n - 1; i >= n/2; i-- {
                h[i].Index(i)
        }
        for i := n/2 - 1; i >= 0; i-- { // h[i].Index(i) is done by down.
                down(h, i)
        }
}

// Moves element at position i towards top of heap to restore invariant.
func up(h []Interface, i int) {
        for {
                parent := (i - 1) / 2
                if i == 0 || h[parent].Less(h[i]) {
                        h[i].Index(i)
                        break
                }
                h[parent], h[i] = h[i], h[parent]
                h[i].Index(i)
                i = parent
        }
}

// Moves element at position i towards bottom of heap to restore invariant.
func down(h []Interface, i int) {
        for {
                n := len(h)
                left := 2*i + 1
                if left >= n {
                        h[i].Index(i)
                        break
                }
                j := left
                if right := left + 1; right < n && h[right].Less(h[left]) {
                        j = right
                }
                if h[i].Less(h[j]) {
                        h[i].Index(i)
                        break
                }
                h[i], h[j] = h[j], h[i]
                h[i].Index(i)
                i = j
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:30:37.210

这个包不是一般的方式，但如果你喜欢它并且它满足你的需求，使用它。我没有看到任何重大问题。

这个包相对于容器/堆的概念是把接口放在节点上而不是容器上。容器/堆通过使用您的容器允许更大的灵活性。（您可能已经在容器中拥有节点，并且该容器甚至可能不是切片。它必须是可索引的。）另一方面，您不关心容器并且可能是一种常见情况很高兴让包为您管理它。这个包的索引管理是容器/堆的一个很好的特性，尽管它增加了方法调用的开销，即使在不需要索引管理时也是如此。

总会有取舍。容器/堆非常通用。这个包使用较小的方法集（2 个而不是 5 个）并在顶部添加索引管理，但只是牺牲了一些通用性，在某些情况下可能会牺牲一些性能。（如果你真的关心，你会想要进行基准测试。还有其他差异可能会使 Index 调用的开销相形见绌。）

# c - 扩展 makefile 以使用 doxygen 生成库和文档

> ID：13777301
> 
> 赞同：2
> 
> 时间：2012-12-08T12:07:42.497
> 
> 标签：c, makefile, static-libraries, doxygen

我已经实现了一个二叉树程序，其中包括带有函数的 tree.c、带有函数声明的 tree.h 和用于测试的 main.c。另外，我有一个makefile，它是：

```
CC=gcc
CFLAGS=-g -Wall
DEPS = tree.h
OBJ = main.o tree.o 

%.o: %.c $(DEPS)
    $(CC) -c -o $@ $< $(CFLAGS)

tree: $(OBJ)
    $(CC) -o $@ $^ $(CFLAGS)

clean:
    rm -f *.o tree 
```

现在我想让它生成一个库，不仅是二叉树函数的对象文件，然后在 makefile 中生成 doxygen 的文档。任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-07T09:54:33.150

我知道我的回答来晚了，但我希望有人能从中受益。

我有一个生成 Doxygen 文档的生成文件。您必须稍微扭曲 Doxygen 创建适合您需要的 Doxygen 设置文件，然后在编辑器中打开它并删除包含以下两个设置的行（稍后将由 make 文件添加它们）

```
INPUT
FILE_PATTERNS 
```

添加这一行

```
@INCLUDE = doxyfile.inc 
```

以不同的名称保存此文件，我使用 Doxyfile.mk

在你的makefile中你需要一个源列表和它们所在的目录示例

```
SRCS =  $(OBJS:.o=.c)
SRCDIRS = ./src
SRCDIRS += ./other_src 
```

现在您可以将此规则放入 Makefile 中，它将创建文件 doxyfile.inc，其中包含您从 Doxyfile.mk 中删除的设置。

```
.PHONY: all clean distclean doxy

# If makefile changes, maybe the list of sources has changed, so update doxygens list
doxyfile.inc: Makefile.mk
        echo INPUT         =  $(SRCDIRS) > doxyfile.inc
        echo FILE_PATTERNS =  *.h $(SRCS) >> doxyfile.inc

doxy: doxyfile.inc $(SRCS) 
        doxygen.exe doxyfile.mk 
```

奖励：如果从像 Eclipse 这样的 IDE 内部运行，Doxygen 吐出的错误会变成可点击的，并且会跳转到错误的注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T12:27:11.033

好吧，我真的不知道 doxygen 命令的语法，所以我会做一个通用的答案：

在你的 Makefile 中，每个

```
term: [dep]
    action 
```

是一个目标。

因此，如果您添加以下内容：

```
doc: $(OBJ)
    doxygen with-correct-options 
```

您将能够使用以下方法生成文档：

```
make doc 
```

（`doc`这里是目标的名称）

现在，如果您添加：

```
all: tree doc
    @echo "Generating program and doc." 
```

您将拥有通过简单调用生成的程序*和文档*

```
make 
```

最后，您的 Makefile 可以使用另外一条语句：`.PHONY`. 这是*“一种将许多目标之一标记为不直接生成文件的方法，并确保即使存在与目标同名的文件也能执行它们”*。换句话说，就是要确保`doc`, `clean`or`all`将*始终*被执行，即使文件名为`doc`, `clean`or`all`存在。

它的语法如下：

```
.PHONY: all clean doc 
```

并且通常放在 Makefile 的末尾。

# jquery - jscrollpane jquery按钮更改高度和宽度

> ID：13777305
> 
> 赞同：0
> 
> 时间：2012-12-08T12:07:58.303
> 
> 标签：jquery, width, jscrollpane, jquery-jscrollpane

我有一个包含图像的水平 jscrollpane。

图像的默认高度为 400 像素，我想制作一个“小”按钮，将图像的高度更改为 200 像素（例如）。当然宽度也会改变以保持比例。

首先我有这个代码来计算图像的总宽度：

```
$(window).load(function(){

$('.scroll-content').each(function(){
var wrapper = $(this);
var wrapperWidth = 0;

    wrapper.find('.scroll-content-item img').each(function(){
        wrapperWidth += $(this).outerWidth(true) + 20;
    });

    wrapper.css('width', wrapperWidth); 
```

并且做得很好。然后我初始化jscrollpane：

```
$('.scroll-pane').jScrollPane(); 
```

然后是按钮：

```
$('.minus-button').click(function() {
$(".scroll-content-item img, .scroll-content-item, .jspContainer").css('height', 300); 
}); 
```

我如何添加一个函数或再次调用它，以重新计算图像的总宽度并将其提供给`.scroll-content`，但一旦点击完成。

有任何想法吗？

谢谢大家的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:45:47.343

不要将代码放在 window.load 函数中，而是创建一个单独的函数并再次调用该函数。

例子

```
function calculateWidth() {}
    $('.scroll-content').each(function(){
      var wrapper = $(this);
      var wrapperWidth = 0;

      wrapper.find('.scroll-content-item img').each(function(){
        wrapperWidth += $(this).outerWidth(true) + 20;
      });

      wrapper.css('width', wrapperWidth);
    }
    $('.scroll-pane').jScrollPane();
}

$(window).load(function() { calculateWidth(); })

$('.minus-button').click(function() {
    $(".scroll-content-item img, .scroll-content-item, .jspContainer").css('height', 300);
    calculateWidth(); 
}); 
```

您会注意到我在 calculateHeight 函数中调用了 jScrollPane() 函数。那就是在调整大小后重新初始化jscrollpanes。请注意，您也可以使用名为[reinitialise](http://jscrollpane.kelvinluck.com/api.html)的 jscrollPane API 方法，但您需要更加熟悉它。根据经验，最好通过 API，但再次调用该函数会得到相同的结果。

# html - 为精灵悬停调整 CSS 和 HTML

> ID：13777309
> 
> 赞同：2
> 
> 时间：2012-12-08T12:08:18.703
> 
> 标签：html, css

当我使用精灵将鼠标悬停在图像上时，我希望我的图像发生变化。

这是我当前的 CSS：

```
.main_advert {
    width:754px;
    margin:20px auto 0px auto;
    padding:20px 0px 20px 0px;
}
.main_advert img, .advert img {
    -webkit-box-shadow: 0px 0px 0px 5px #333;
    box-shadow: 0px 0px 0px 5px #333;
    border-radius:5px;
    border:1px solid #028EC9;
} 
```

当前的 HTML：

```
 <div class="main_advert">
      <a href="http://website.com" target="_blank"><img alt="Website" src="./images/website.jpg" border="0" /></a> 
```

我已经了解到以下内容可以满足我的要求，但它与我当前的 CSS 不兼容。

不兼容的 CSS：

```
.main_advert {
    background: url(./images/website.png) no-repeat 0 0;
    width: 728px;
    height: 90px;
    display: block;
    text-indent: -9999px;
}
.main_advert:hover {
    background-position: 0 -90px;
} 
```

**那么我将如何将上述 CSS 调整到当前的 CSS 中呢？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:15:42.677

使用[该工具](http://csssprites.com/)生成您的精灵和 css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:47:53.810

[这是我对事情的看法](http://jsbin.com/abuwim/1/)。

[查看评论来源](http://jsbin.com/abuwim/1/edit)。

* * *

（为了完整起见，在这里发布*jsbin*代码。）

**基于您无法修改 HTML 的假设，这里有几个解决方案：**

* * *

# 例 1

**不使用精灵。**

### CSS：

```
.main_advert_1 {
    width: 64px; /* Width of logo. */
    height: 64px; /* Height of logo. */
    background: url(http://drfatmaclinic.com/wp-content/uploads/2012/05/before-after_juvederm1-64x64.jpg) no-repeat;
}
    .main_advert_1 a {
        /* Now the <a> fills the parent container: */
        width: 100%;
        height: 100%;
        display: block; /* Required for <a> to expand to fill parent. */
    }
        .main_advert_1 img { display: block; }
            .main_advert_1 a:hover img { display: none; } /* Hide on hover. */ 
```

### HTML：

```
<div class="main_advert_1">
    <a href="#" target="_blank">
        <img alt="Website" src="http://drfatmaclinic.com/wp-content/uploads/2012/06/before_after_restylane1-64x64.jpg">
    </a>
</div> <!-- /.main_advert_1 --> 
```

* * *

# 示例 2：

**使用精灵。**

### CSS：

```
.main_advert_2 {
    /* Width and height of logo/ad/whatever. */
    width: 284px;
    height: 284px;
}
    .main_advert_2 img { display: none; } /* Just hide it so you can do stuff with the <a> only. */
    .main_advert_2 a {
        /* Random sprite found on web: */
        background-image: url(https://dw1.s81c.com/developerworks/mydeveloperworks/blogs/waldensponderings/resource/BLOGS_UPLOADED_IMAGES/sel-tux_wizard.png);
        background-repeat: no-repeat;
        /* IBID: */
        width: 100%;
        height: 100%;
        display: block; /* IBID */
    }
        .main_advert_2 a:hover { background-position: 0 -284px; } /* Position sprite on :hover. */ 
```

## HTML：

```
<div class="main_advert_2">
    <a href="#" target="_blank">
        <img alt="Website" src="http://drfatmaclinic.com/wp-content/uploads/2012/06/before_after_restylane1-64x64.jpg">
    </a>
</div> <!-- /.main_advert_2 --> 
```

* * *

如果您可以编辑 HTML，那么您可以删除`<img>`并且您的代码会更“干净”。

这有什么帮助吗？

* * *

# 编辑#1

这是基于您的评论[的新版本。](http://jsbin.com/abuwim/2)

### CSS：

```
.main_advert {
    /* Width and height of logo/ad/whatever. */
    width: 728px;
    height: 90px;
}
    .main_advert img { display: none; } /* Just hide it so you can do stuff with the <a> only. */
    .main_advert a {
        /* Random sprite found on web: */
        background-image: url(http://trickerygaming.net/tsf2/images/registeroof.png);
        background-repeat: no-repeat;
        /* IBID: */
        width: 100%;
        height: 100%;
        display: block; /* IBID */
    }
        .main_advert a:hover { background-position: 0 -90px; } /* Position sprite on :hover. */ 
```

### HTML：

```
<div class="main_advert">

    <a target="_blank" href="#"><img border="0" src="./images/register.jpg" alt="Register"></a>

</div> 
```

更好的？

* * *

# 编辑#2

[这是我删除`<img>`并用文本替换的版本。](http://jsbin.com/abuwim/4/)

（[在此处查看 HTML/CSS](http://jsbin.com/abuwim/4/edit)。）

### CSS：

```
.main_advert {
    text-indent: -999em; /* This hides the "Register on our forums." text (see below). */
    /* Width and height of logo/ad/whatever: */
    width: 728px;
    height: 90px;
    margin: 0 auto; /* Centers this container inside parent. */
    overflow: hidden; /* Hides indented text from above. */ 
}
    .main_advert a {
        /* Your image: */
        background-image: url(http://trickerygaming.net/tsf2/images/registeroof.png);
        background-repeat: no-repeat;
        /* IBID: */
        width: 100%;
        height: 100%;
        display: block; /* Allows <a> to fill parent. */
    }
        .main_advert a:hover { background-position: 0 -90px; } /* Position sprite on :hover. */
        .main_advert a:active,
        .main_advert a:focus { outline: none; } /* Removes ugly outline, on click, in some browsers. */ 
```

### HTML：

```
<div class="main_advert">

    <a target="_blank" href="#">Register on our forums.</a>

</div> <!-- /.main_advert --> 
```

对于“精灵”技术，我最喜欢这种方法。

* * *

实际上，如果是我，我可能会尝试使用 CSS3 来做事。

如需 CSS3 工具为您提供想法/灵感，请查看：

*   [http://css3generator.com/](http://css3generator.com/)
*   [http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# ruby-on-rails - Heroku：您要查找的页面不存在

> ID：13777310
> 
> 赞同：3
> 
> 时间：2012-12-08T12:08:33.400
> 
> 标签：ruby-on-rails, heroku

当我尝试将我的应用程序部署到 Heroku 时出现此错误。在我做之前，我的第一次部署工作正常`heroku run rake db:reset`。在此之后，我出现以下错误：“我们很抱歉，但出了点问题。” 和“您要查找的页面不存在。您可能输入了错误的地址或页面可能已移动。”

我的heroku日志说：

```
2012-12-08T11:40:54+00:00 app[web.1]: ActionView::Template::Error (bootstrap.css isn't precompiled):
2012-12-08T11:40:54+00:00 app[web.1]:     9:   <%= csrf_meta_tags %>
2012-12-08T11:40:54+00:00 app[web.1]: 
2012-12-08T11:40:54+00:00 app[web.1]:     8:   <%= javascript_include_tag "bootstrap", media: "all"%> 
```

有人，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-08T12:21:33.067

看起来 Heroku 抱怨您的资产没有预编译。我已经阅读了有关 heroku 上的 rails 的[本教程](http://railsapps.github.com/rails-heroku-tutorial.html)，其中有一个专门用于资源预编译的部分。

您可以告诉您的应用程序在生产环境中预编译资产

```
#config/environments/production.rb
config.assets.compile = true
# Heroku also requires this to be false
config.assets.initialize_on_precompile=false 
```

或者您可以使用 rake 任务预编译您的资产

```
#before pushing to Heroku and then you can push
rake assets:precompile

#or after you've pushed to heroku
heroku run rake assets:precompile 
```

# r - 子集（）一个因子的观察次数

> ID：13777317
> 
> 赞同：3
> 
> 时间：2012-12-08T12:09:27.803
> 
> 标签：r, frequency, subset

我对子集（）函数有疑问。如何通过观察次数对我的数据框的一个因子进行子集化？

```
 NAME      CLASS         COLOR   VALUE      
   antonio       B          YELLOW       5
   antonio       B          BLUE       8
   antonio       B          BLUE       7 
   antonio       B          BLUE      12 
   luca          C          YELLOW    99
   luca          B          YELLOW    87
   luca          B          YELLOW    98
   giovanni      A          BLUE      48 
```

我想获得三个因素“名称”、“类别”和“颜色”至少比较三次的数据，以便获得价值的平均值。在这种情况下，我将获得：

```
 NAME      CLASS         COLOR   VALUE      
   antonio       B          BLUE       mean 
```

因为安东尼奥是唯一一个对每个因素都有三个观察值的人

太感谢了

尼克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T12:35:33.907

您可以`table`按如下方式使用该功能：

```
subset(df, table(FACTOR)[FACTOR] >= 3)
#    FACTOR VALUE
# 1 ANTONIO     5
# 2 ANTONIO     8
# 3 ANTONIO     7 
```

为了帮助您理解，请查看这些返回的内容：

```
table(df$FACTOR)
table(df$FACTOR)[df$FACTOR]
table(df$FACTOR)[df$FACTOR] >= 3 
```

* * *

您还可以使用该`ave`函数来计算观察次数：

```
subset(df, ave(VALUE, FACTOR, FUN = length) >= 3) 
```

如果您有多个因素，例如您在评论和更新的问题中提出的问题，那么最后一种方法可能会更灵活一些。你可以做：

```
subset(df, ave(VALUE, NAME, CLASS, COLOR, FUN = length) >= 3) 
```

# google-maps - 使用 fitBound 后设置谷歌地图缩放级别

> ID：13777318
> 
> 赞同：0
> 
> 时间：2012-12-08T12:09:29.060
> 
> 标签：google-maps

我想在使用 fitBounds 后使用 setZoom 命令更改谷歌地图缩放级别，请看一下这个[小提琴](http://jsfiddle.net/uc5gd/3/)

如您所见，这一行：

```
map.setZoom(map.getZoom()+1); 
```

导致错误，这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:22:39.503

这将导致无限循环。使用 addListenerOnce 所以它只发生在第一次。

[jsfiddle](http://jsfiddle.net/Npu36/1/embedded/result/)

```
google.maps.event.addListenerOnce(map, "zoom_changed", function() {
 map.setZoom(map.getZoom()+1);
}); 
```

# mongodb - 使用 MongoDB 进行统计数据收集

> ID：13777329
> 
> 赞同：2
> 
> 时间：2012-12-08T12:11:13.487
> 
> 标签：mongodb

我正在使用 Nodejs 和 Mongodb 构建一个应用程序来扫描 Stackoverflow 以查找新内容，并找到热门和热门话题，我需要知道如何做到这一点，因为我不确定我来的时候是否正确形成 MySQL，我的直觉告诉我这里有些不同。

我实际上并没有扫描 Stackoverflow，它只是作为一个类比很容易使用，但是我有帖子，我有评论，以及发布线程的用户（不考虑在 atm 上发布评论的用户）。

我最初的解决方案是创建三个表（集合）：

*   帖子 - 我存储有关帖子的所有信息的地方
*   Post Stats - 我每 X 分钟存储一次关于帖子的所有动态信息（评论数、总分等）
*   用户 - 我在其中存储有关发布帖子的用户的信息

本质上，我希望能够使用“给我今天的顶级用户”和“给我这篇文章的历史”来查询数据库，以创建一种图表，这个帖子的行为方式（排名、评分、评论等） ） 随着时间的推移。

用 Mongodb 做这样的事情的正确方法是什么？我应该将 Post Stats 存储为 Posts 文档的一部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:37:14.357

我个人会在这里寻求混合解决方案。

不可避免地，您总是需要某种聚合数据`post`。因此，`post`我将在其中包含一个额外的子文档，其中包含所有时间的统计信息：

```
stats: {
    views: 456, // Just an example
    vote_ups: 5,
    vote_downs: 4,
    rank: 1, // vote ups minus vote downs
    comments: 5,
    answers: 6
} 
```

然后在个别时间段内，我会使用`post_stats`您解释创建文档的方式，例如：

```
{
    post_id: 45,
    // etcera for minute by minute changes
    time: ISODate()
} 
```

使用`post_id`（或`_id`更确切地说）查询您想要制作的图表。由于 MongoDB 擅长水平扩展，您将在这里充分利用它。

# windows - Windows 8 文件选取器中的图像大小

> ID：13777330
> 
> 赞同：1
> 
> 时间：2012-12-08T12:11:32.087
> 
> 标签：windows, windows-8

如何知道拾取图像的大小，或如何限制拾取图像，例如图像的最大大小为 1 MB，这是我的代码

```
 var openPicker = new Windows.Storage.Pickers.FileOpenPicker();
        openPicker.ViewMode = Windows.Storage.Pickers.PickerViewMode.Thumbnail;
        openPicker.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.DocumentsLibrary;
        openPicker.FileTypeFilter.Add(".png");
        openPicker.FileTypeFilter.Add(".Jpeg");
        openPicker.FileTypeFilter.Add(".Jpg");

        StorageFile file = await openPicker.PickSingleFileAsync(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:10:44.597

不幸的是，没有办法提前限制拾取文件的大小。

选择文件后，您可以调用[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.getbasicpropertiesasync.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.getbasicpropertiesasync.aspx)以获取其大小。

# linux - 具有自动更新功能的 Linux 十六进制编辑器

> ID：13777331
> 
> 赞同：0
> 
> 时间：2012-12-08T12:11:44.673
> 
> 标签：linux, unix, hex, edit

有谁知道在 Linux 上以 Hex 格式查看文件的方法，以便在磁盘上的文件更改时更新视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:30:54.297

你可以使用vim。要切换到十六进制模式类型：

```
:%!xxd 
```

要退出十六进制模式，请再次点击退出并键入：

```
:%!xxd -r 
```

还可以查看[如何在 unix 系统上编辑二进制文件](https://stackoverflow.com/questions/839227/how-to-edit-binary-file-on-the-unix-systems)

# java - 如何将异常的 StackTrace 附加到 java 中的文件中？

> ID：13777336
> 
> 赞同：2
> 
> 时间：2012-12-08T12:12:04.643
> 
> 标签：java, exception, printstream

在java中，当我们捕捉到异常时，我们通常可以使用`printStackTrace()`方法来打印错误信息，也可以使用`printStackTrace(PrintStream out)`将这些信息直接写入文件。

但是我怎样才能将这些信息附加到现有文件中，就像使用`out.append()`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T12:19:20.580

您必须以附加模式打开文件：

```
try {
    //...
} catch (Exception e) {
    try(Writer w = new FileWriter("file.log", true)) {
        e.printStackTrace(new PrintWriter(new BufferedWriter(w)));
    }
} 
```

如果您不使用 Java 7，则必须记住关闭或至少刷新`Writer`. 或者你可以有一个 global `Writer`，但是你必须在线程之间同步它。

简单地使用一些现有的 Java 库，如[logback](/questions/tagged/logback "显示标记为“logback”的问题")、[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题")甚至是`java.util.logging`什么？简单地说：

```
} catch (Exception e) {
    log.error("Opps!", e);
} 
```

...并且框架将在您想要的任何地方记录异常，其中包含许多附加数据，如线程名称、时间戳、附加消息等。Logback 还可以显示给定堆栈帧来自哪个库，甚至打印堆栈跟踪开始从根本原因（大多数嵌套异常）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T13:09:00.880

我们可以将错误流重定向到文件

```
System.setErr(new PrintStream(new FileOutputStream("errors.txt", true), true)); 
```

然后 Throwable.printStackTrace() 将打印到 errors.txt。

FileOutputStream 构造函数中的“true”表示“追加”；PrintStream condtructor 中的“true”表示“自动刷新”。我们不必担心永远不会关闭 FileOutputStream，OS 会在应用程序结束时关闭它。

# python - 如何在 numpy 中组合 2 个 numpy.ndarray

> ID：13777339
> 
> 赞同：2
> 
> 时间：2012-12-08T12:12:12.537
> 
> 标签：python, numpy

我有以下2个数组：

```
k=arange(1,100)
m=arange(1,100) 
```

那么如何将它们附加或组合成一个 2 列 99 行的数组呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T12:22:27.607

`vstack`，`hstack`并且`transpose`是你的朋友，因为这样的事情。

```
>>> vstack([k,m]).transpose()
array([[ 1,  1],
       [ 2,  2],
       [ 3,  3],
       ...
       [98, 98],
       [99, 99]]) 
```

# java - 基于 MVC 的基本 Swing 应用程序

> ID：13777340
> 
> 赞同：0
> 
> 时间：2012-12-08T12:12:27.567
> 
> 标签：java, swing, model-view-controller, jgoodies

所以我遇到了以下问题：我想用我的`App`类中的控制器实例初始化 Swing 构造函数。那是我初始化 repo 和控制器的地方。当我想传递给swing`Gui`类时，控制器参数我意识到它有自己的main方法。

您能否检查代码并告诉我这是否是正确的方法？因为我不确定，我找不到从 TUI 应用程序到 GUI 应用程序的基本示例。谢谢！

> 应用程序.java

```
package app;

import repository.*;
import view.View_gui;
import controller.*;

public class App{
    RepoInterface ri;
    ControllerInterface c;
    View_gui gui;

    public App() {
        ri = new Repo();
        c = new Controller(ri);
        gui = new View_gui(c);
    }

    public static void main(String[] args) {
        App app = new App();
    }
} 
```

> 查看_gui.java

```
package view;

import controller.*;

import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JLabel;
import com.jgoodies.forms.factories.DefaultComponentFactory;
import java.awt.BorderLayout;
import java.awt.Label;
import java.awt.Panel;
import javax.swing.BoxLayout;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.JSeparator;
import javax.swing.JPanel;
import com.jgoodies.forms.layout.FormLayout;
import com.jgoodies.forms.layout.ColumnSpec;
import com.jgoodies.forms.layout.RowSpec;
import com.jgoodies.forms.factories.FormFactory;
import java.awt.Font;
import javax.swing.JTextField;
import javax.swing.JButton;
import java.awt.GridLayout;

public class View_gui {

    private JFrame frame;
    private static ControllerInterface ci; //added the variable

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    View_gui window = new View_gui(ci); // parametrizied
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public View_gui(ControllerInterface c) {
        ci = c;                          // add + param by me
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame("Countries");
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JLabel lblNewLabel = new JLabel("Country");

        JLabel lblCapital = new JLabel("Capital");

        JLabel lblArea = new JLabel("Area");

    }
} 
```

# windows - 如何在 Windows 8 Release Preview 中安装 Windows Phone 8 SDK

> ID：13777344
> 
> 赞同：2
> 
> 时间：2012-12-08T12:13:18.450
> 
> 标签：windows, windows-phone-8

我有 Windows 8 Release Preview（我知道，Windows 8 正式版已经发布，只是还没有花钱购买正式版..），我想知道是否有安装 Windows Phone 8 的方法SDK 到 Windows 8 的 Release Preview 版本？有没有人有这方面的经验？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:40:37.997

不，您不能在 Windows 8 预发行版上安装 WP8
SDK。WP8 SDK 和模拟器要求如下：
[运行 Windows Phone 8 模拟器需要什么？](https://stackoverflow.com/questions/13145464/what-does-it-take-to-run-the-windows-8-phone-emulator/13145586#13145586)

# ruby-on-rails - Spree 设置错误：设计 Github Gem 'spree_auth_devise' & Rails Server

> ID：13777348
> 
> 赞同：0
> 
> 时间：2012-12-08T12:13:46.090
> 
> 标签：ruby-on-rails, github, devise, gem, spree

我是 Rails 的新手，想尝试 Spree Commerce，但在尝试安装 Spree 时遇到了一些问题，我一直在遵循[Spree 安装指南](http://guides.spreecommerce.com/getting_started.html)。

当我尝试安装 Spree 时，出现以下错误：

```
C:\Users\Ross\Documents\eCommerce\Spree\test_spree_store>spree install
Would you like to install the default gateways? (yes/no) [yes] y
Would you like to install the default authentication system? (yes/no) [yes] y
Would you like to run the migrations? (yes/no) [yes] y
Would you like to load the seed data? (yes/no) [yes] y
Would you like to load the sample data? (yes/no) [yes] y
     gemfile  spree
     gemfile  spree_usa_epay
     gemfile  spree_skrill
     gemfile  spree_auth_devise
         run  bundle install from "."
←[31mYou passed :github as an option for gem 'spree_auth_devise', but it is invalid.←[0m

C:\Users\Ross\Documents\eCommerce\Spree\test_spree_store> 
```

以下是我的应用程序 Gem 文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'
gem 'spree', '1.2.2'
gem 'spree_usa_epay'
gem 'spree_skrill'
gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => '1-2-stable' 
```

我尝试在`spree install`不接受默认身份验证设置的情况下再次运行（注意，我首先从我的 gem 文件中删除了最后四行代码）。

```
C:\Users\Ross\Documents\eCommerce\Spree\spree_test>spree install
Would you like to install the default gateways? (yes/no) [yes] y
Would you like to install the default authentication system? (yes/no) [yes] n
What is the name of the class representing users within your application? [User] y
Would you like to run the migrations? (yes/no) [yes] y
Would you like to load the seed data? (yes/no) [yes] y
Would you like to load the sample data? (yes/no) [yes] y
     gemfile  spree
     gemfile  spree_usa_epay
     gemfile  spree_skrill
         run  bundle install from "."
      create  config/initializers/spree.rb
      create  config/spree.yml
      remove  public/index.html
      append  public/robots.txt
      create  app/assets/javascripts/store
      create  app/assets/javascripts/admin
      create  app/assets/stylesheets/store
      create  app/assets/stylesheets/admin
      create  app/assets/images/store
      create  app/assets/images/admin
      create  app/assets/javascripts/store/all.js
      create  app/assets/javascripts/admin/all.js
      create  app/assets/stylesheets/store/all.css
      create  app/assets/stylesheets/admin/all.css
      create  app/overrides
      append  config/environment.rb
      append  db/seeds.rb
     copying  migrations
    creating  database
     running  migrations
     loading  seed data
        rake  db:seed
rake aborted!
wrong constant name y
C:/Users/Ross/Documents/eCommerce/Spree/spree_test/config/environment.rb:5:in `<top (required)>'
Tasks: TOP => db:abort_if_pending_migrations => environment
(See full trace by running task with --trace)
     loading  sample data
      insert  config/routes.rb
**************************************************
We added the following line to your application's config/routes.rb file:

    mount Spree::Core::Engine, :at => '/'
**************************************************
Spree has been installed successfully. You're all ready to go!

Enjoy! 
```

即使耙子被中止，它似乎也能工作？但是，当我尝试运行服务器时，它不起作用并且出现以下错误：

```
C:\Users\Ross\Documents\eCommerce\Spree\spree_test>rails s
=> Booting WEBrick
=> Rails 3.2.9 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:230:in `const_defined?': wrong constant name y (NameError)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:230:in `block in constantize'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:229:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:229:in `constantize'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/spree_core-1.2.2/lib/spree/core.rb:53:in `user_class'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/spree_promo-1.2.2/app/models/spree/promotion/rules/user.rb:7:in `<class:User>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/spree_promo-1.2.2/app/models/spree/promotion/rules/user.rb:4:in `<module:Rules>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/spree_promo-1.2.2/app/models/spree/promotion/rules/user.rb:3:in `<class:Promotion>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/spree_promo-1.2.2/app/models/spree/promotion/rules/user.rb:2:in `<module:Spree>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/spree_promo-1.2.2/app/models/spree/promotion/rules/user.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:469:in `load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:469:in `block in load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:468:in `load_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:353:in `require_or_load'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:502:in `load_missing_constant'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:192:in `block in const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `const_missing'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/spree_promo-1.2.2/lib/spree/promo/engine.rb:45:in `block in <class:Engine>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `block in run_initializers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from C:/Users/Ross/Documents/eCommerce/Spree/spree_test/config/environment.rb:5:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
        from C:/Users/Ross/Documents/eCommerce/Spree/spree_test/config.ru:4:in `block in <main>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
        from C:/Users/Ross/Documents/eCommerce/Spree/spree_test/config.ru:1:in `new'
        from C:/Users/Ross/Documents/eCommerce/Spree/spree_test/config.ru:1:in `<main>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands/server.rb:46:in `app'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands/server.rb:70:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:55:in `block in <top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'

C:\Users\Ross\Documents\eCommerce\Spree\spree_test> 
```

我不知道从哪里开始处理所有这些错误，并且害怕弄乱这些文件，而且 rails 服务器在其他 rails 应用程序（非狂欢）中也能正常工作，任何帮助将不胜感激。

谢谢，罗斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:31:16.060

作为一个在 Windows 上使用 Rails 有相当多经验的 Windows 用户，我会敦促您省去很多麻烦，并使用 VirtualBox 或 VMware 设置一个 Ubuntu 12.04 LTS vm。Vagrant 可以让你更加自动化。

也就是说，我会确保您满足系统级别的先决条件。

如果您不在 Ruby 1.9.3-p327 上，请升级到它。这不太可能是问题，但它包含一些重要的安全修复程序。

通过运行 确保 ruby​​gems 是最新的`gem update --system`。

确保 bundler 和 rake 是最新的：`gem update bundler`和`gem update rake`. 如果您今天不只是安装它，那么在您使用它时也可以使用 spree gem。

既然您处于最新状态，就从一个新项目开始：

```
rails _3.2.9_ new spree_project [-d mysql if you're using mysql]
cd spree_project
spree install 
```

每当您在项目中运行任何 rake 或 rails 命令时，您也必须在它们前面加上前缀`bundle exec`，否则可能会加载错误的 gem 并给您带来莫名其妙的头痛。所以运行测试服务器的正确命令是`bundle exec rails s`.

看看它是如何为你工作的。

# facebook - fb 画布应用程序中的链接在 IE 中不起作用

> ID：13777358
> 
> 赞同：0
> 
> 时间：2012-12-08T12:14:23.527
> 
> 标签：facebook, facebook-iframe, facebook-canvas

我创建了一个画布 Facebook 应用程序。该应用程序本身是用 html 制作的，由多个不同的页面组成，第一个页面链接到下一个页面，依此类推......（链接被组装为简单的 html 和 target="_self" 的标签）

在 FF、Safari、Chrome 中一切似乎都运行良好，但当我们在 IE 中进行测试时就不行了。似乎 iframe 中的重定向在 IE 中的工作方式不同，它显示在浏览器的 url 中：

*   在 FF 中进行测试时，...，起始页的 url 将是 apps.facebook.com/our-namespace，并且在链接到下一页后，浏览器中的该 url 将始终保持相同的 apps.facebook.com/我们的命名空间。

*   在 IE 中进行测试时，起始页的 url 也将是 apps.facebook.com/our-namespace，但是一旦您点击其中一个链接，浏览器中的 url 就会更改为 apps.facebook.com/our- namespage/the-page-we-re-linking-to.php，不考虑 target="_self"。再次单击类似链接时，应用程序将重定向到开始屏幕...

我花了几个小时试图找到答案，我看到改变 IE 的安全设置可以让它工作：

在 IE 中：转到工具 --> Internet 选项 --> 安全 --> Internet 区域 --> 自定义级别 --> 其他 --> 在 IFRAME 中启动程序和文件。并确保它设置为启用

但这不是一个可接受的解决方案，因为 IE 默认配置不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:14:23.527

我发现解决方案是（在 php 中）将以下行添加到您的代码中：

```
<?
header("p3p: CP=\"ALL DSP COR PSAa PSDa OUR NOR ONL UNI COM NAV\"");
?> 
```

问题解决了！这应该在 facebook 开发者文档中！！

# asp.net - ASP.NET Mvc3/VS2010 错误：已添加具有相同键的项

> ID：13777364
> 
> 赞同：4
> 
> 时间：2012-12-08T12:15:04.577
> 
> 标签：asp.net, asp.net-mvc-3

我一直在尝试在我的项目中添加一个控制器，但我一直收到错误消息

```
An item with the same key has already been added. 
```

同时这样做。

我仍然是这方面的初学者，所以我可能没有注意到什么，但我没有在我的模型中看到任何重复的键。这是我的数据库图表，可以大致了解我正在尝试做的事情：

![数据库图](../Images/24063de31fce9d994020f3d994c56bdf.png)

我正在使用`Applications`as the`Model Class`和`ApplicationServices`as the `data Context Class`while 试图创建我的`ApplicationController`并得到错误

```
An item with the same key has already been added. 
```

有什么想法我可能做错了吗？

我创建的模型如下：

**实体.cs：**

```
using Microsoft.VisualBasic;
using System.Data.Entity;
using System.Data.Entity.ModelConfiguration.Conventions;
using System.ComponentModel.DataAnnotations;

namespace PostGraduate.Models
{
    public class ApplicationServices : DbContext
    {
        public DbSet<Application.Users> Users { get; set; }
        public DbSet<Application.Addresses> Addresses { get; set; }
        public DbSet<Application.Applications> Applications { get; set; }
        public DbSet<Application.ForeignLanguages> ForeignLanguages { get; set; }
        public DbSet<Application.Gmat> Gmat { get; set; }
        public DbSet<Application.PostGradStudies> PostGradStudies { get; set; }
        public DbSet<Application.PreGradStudies> PreGradStudies { get; set; }
        public DbSet<Application.Schoolarships> Schoolarships { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);

            modelBuilder.Entity<Application.Users>().HasKey(a => a.UserId);
            modelBuilder.Entity<Application.Addresses>().HasKey(a => a.Addresses_Id);
            modelBuilder.Entity<Application.Applications>().HasKey(a => a.Applications_Id);
            modelBuilder.Entity<Application.Applications>().Property(a => a.Applications_Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
            modelBuilder.Entity<Application.ForeignLanguages>().HasKey(a => a.ForeignLanguages_Id);
            modelBuilder.Entity<Application.Gmat>().HasKey(a => a.Gmat_Id);
            modelBuilder.Entity<Application.Gmat>().Property(a => a.Gmat_Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
            modelBuilder.Entity<Application.PostGradStudies>().HasKey(a => a.PostGradStudies_Id);
            modelBuilder.Entity<Application.PostGradStudies>().Property(a => a.PostGradStudies_Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
            modelBuilder.Entity<Application.PreGradStudies>().HasKey(a => a.PreGradStudies_Id);
            modelBuilder.Entity<Application.Schoolarships>().HasKey(a => a.Schoolarships_Id);
            modelBuilder.Entity<Application.Schoolarships>().Property(a => a.Schoolarships_Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

            modelBuilder.Entity<Application.Users>().HasRequired(a => a.Applications).WithRequiredPrincipal(i => i.Users);
            modelBuilder.Entity<Application.Applications>().HasMany(a => a.Addresses).WithRequired(i => i.Applications).HasForeignKey(i => i.Application_Id);
            modelBuilder.Entity<Application.Applications>().HasMany(a => a.ForeignLanguages).WithRequired(i => i.Applications).HasForeignKey(i => i.Application_Id);
            modelBuilder.Entity<Application.Applications>().HasOptional(a => a.Gmat).WithRequired(i => i.Applications);
            modelBuilder.Entity<Application.Applications>().HasOptional(a => a.PostGradStudies).WithRequired(i => i.Applications);
            modelBuilder.Entity<Application.Applications>().HasMany(a => a.PreGradStudies).WithRequired(i => i.Applications).HasForeignKey(i => i.Application_Id);
            modelBuilder.Entity<Application.Applications>().HasOptional(a => a.Schoolarships).WithRequired(i => i.Applications);

        }
    }
} 
```

**应用程序.cs：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace PostGraduate.Models.Application
{
    public class Applications
    {

        public Applications()
        {
            this.Addresses = new HashSet<Addresses>();
            this.PreGradStudies = new HashSet<PreGradStudies>();
            this.ForeignLanguages = new HashSet<ForeignLanguages>();
        }

        internal void BuildAddress(int p)
        {
            for (int i = 0; i < p; i++)
            {
                Addresses.Add(new Addresses());
            }
        }

        internal void BuildPreGradStudies (int p)
        {
            for (int i = 0; i < p; i++)
            {
                PreGradStudies.Add(new PreGradStudies());
            }
        }

        internal void BuildForeignLanguages(int p)
        {
            for (int i = 0; i < p; i++)
            {
                ForeignLanguages.Add(new ForeignLanguages());
            }
        }

        public virtual Users Users { get; set; }
        public virtual Gmat Gmat { get; set; }
        public virtual PostGradStudies PostGradStudies { get; set; }
        public virtual Schoolarships Schoolarships { get; set; }
        public virtual ICollection<Addresses> Addresses { get; set; }
        public virtual ICollection<PreGradStudies> PreGradStudies { get; set; }
        public virtual ICollection<ForeignLanguages> ForeignLanguages { get; set; }

        [ScaffoldColumn(false)]
        public string Applications_Id { get; set; }

        [ScaffoldColumn(false)]
        public DateTime ApplicationDate { get; set; }

        [Required]
        public string FathersName { get; set; }

        [Required]
        public DateTime? Birthdate { get; set; }

        [Required]
        public string Birthplace { get; set; }

        [Required]
        public string Identification { get; set; }

        [Required]
        public string Country { get; set; }

        [Required]
        public string MobileNumber { get; set; }

        [Required]
        public string Profession { get; set; }

        public string Activity { get; set; }

        public string PostGradExtra { get; set; }

        public string PostGradReapplication { get; set; }

        public string ExtraInformation { get; set; }

        [Required]
        public string PostGradSource { get; set; }
    }
} 
```

**地址.cs：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace PostGraduate.Models.Application
{
    public class Addresses
    {
        public virtual Applications Applications { get; set; }

        [ScaffoldColumn(false)]
        public string Addresses_Id { get; set; }

        [ScaffoldColumn(false)]
        public string Application_Id { get; set; }

        [Required]
        public string StreetAddress { get; set; }

        [Required]
        public string City { get; set; }

        [Required]
        public string PostalCode { get; set; }

        [Required]
        public string PhoneNumber { get; set; }
    }
} 
```

**ForeignLanguages.cs：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace PostGraduate.Models.Application
{
    public class ForeignLanguages
    {

        public virtual Applications Applications { get; set; }

        [ScaffoldColumn(false)]
        public string ForeignLanguages_Id { get; set; }

        [ScaffoldColumn(false)]
        public string Application_Id { get; set; }

        public string Language { get; set; }

        public string LanguageDegree { get; set; }

        public string Admission { get; set; }

        public bool Delete { get; set; }
    }
} 
```

**Gmat.cs：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace PostGraduate.Models.Application
{
    public class Gmat
    {
        public virtual Applications Applications { get; set; }

        [ScaffoldColumn(false)]
        public string Gmat_Id { get; set; }

        public DateTime? GmatDate { get; set; }

        public string GmatGrade { get; set; }
    }
} 
```

**PostGradStudies.cs：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace PostGraduate.Models.Application
{
    public class PostGradStudies
    {
        public virtual Applications Applications { get; set; }

        [ScaffoldColumn(false)]
        public string PostGradStudies_Id { get; set; }

        public string Aei { get; set; }

        public string PostGradTitle { get; set; }

        public string PostGradLength { get; set; }

        public string PostGradGrade { get; set; }

        public string PostGradProject { get; set; }

        public string PostGradProjectGrade { get; set; }
    }
} 
```

**PreGradStudies.cs：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace PostGraduate.Models.Application
{
    public class PreGradStudies
    {
        public virtual Applications Applications { get; set; }

        [ScaffoldColumn(false)]
        public string PreGradStudies_Id { get; set; }

        [ScaffoldColumn(false)]
        public string Application_Id { get; set; }

        public string University { get; set; }

        public string Department { get; set; }

        public string Admission { get; set; }

        public string Graduation { get; set; }

        public string DegreeGrade { get; set; }

        public string ThesisSubject { get; set; }

        public string ThesisGrade { get; set; }

        public bool Delete { get; set; }
    }
} 
```

**Schoolarships.cs：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace PostGraduate.Models.Application
{
    public class Schoolarships
    {
        public virtual Applications Applications { get; set; }

        [ScaffoldColumn(false)]
        public string Schoolarships_Id { get; set; }

        public string Schoolar { get; set; }

        public string SchoolarshipProfession { get; set; }

        public string SchoolarshipInstitution { get; set; }
    }
} 
```

**用户.cs：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace PostGraduate.Models.Application
{
    public class Users
    {
        public virtual Applications Applications { get; set; }

        public string UserId { get; set; }

        public string UserName { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:45:37.580

发生这种情况的原因之一是您的视图模型中有两次相同的属性。例如，如果您有`UserName`一个班级，而您有另一个班级，并且两者都出现在您的视图中。这将创建一个重复的`UserName`密钥。

当我在一个类中有两个同名的属性时，我遇到了这种情况。一个是公共字段成员，另一个是 get/set 访问器

```
public class User
{
   public string userName;  // <---- this should be private

   public string UserName
   {
     get { return userName; }
     set { userName = value; }
   }
} 
```

注意 C# 没有因为区分大小写而抱怨。我通过使字段变量解决了这个问题`private`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:44:40.210

你`Application Controller`也可以包括你的代码吗？

但我怀疑，这可能是因为您的某些实体被定义为没有自动生成的主键，当它们创建对象时，它们都将具有相同的键。

我会假设所有的键都设置为空字符串或 NULL，所以当使用 NULL 键检查其他内容时，它已经得到匹配...

（对不起，我对EF没有最好的理解，只是一个想法！）

# php - PHP MySQL订单表代码错误“无法解析查询”

> ID：13777366
> 
> 赞同：1
> 
> 时间：2012-12-08T12:15:20.720
> 
> 标签：php, mysql, html-table

我正在尝试通过其标题标题对表格进行排序。但是我得到了无法解析的查询。这是我在 MySQL 中做错了什么吗？

我必须订购一张包含数千条记录的行话表。所以我只是在家里练习它以使其正确。然而，目前我似乎被困在那个 MySQL 位上。我遵循了另一个网站上的提示，该网站有此代码，但仍然卡住解释为什么这不起作用会有所帮助。

```
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="../demo.css" rel="stylesheet" type="text/css" />
</head>
<body>

    <?php
    function makeHeaderLink($value, $key, $col, $dir) {
        $out = "<a href=\"" . $_SERVER['SCRIPT_NAME'] . "?c=";
        //set column query string value
        switch($key) {
            case "Acronym":
                $out .= "1";
                break;
            case "Full Name":
                $out .= "2";
                break;
            case "What":
                $out .= "3";
                break;
            default:
                $out .= "0";
        }

        $out .= "&d=";

        //reverse sort if the current column is clicked
        if($key == $col) {
            switch($dir) {
                case "ASC":
                    $out .= "1";
                    break;
                default:
                    $out .= "0";
            }
        }
        else {
            //pass on current sort direction
            switch($dir) {
                case "ASC":
                    $out .= "0";
                    break;
                default:
                    $out .= "1";
            }
        }

        //complete link
        $out .= "\">$value</a>";

        return $out;
    }

    switch($_GET['c']) {
        case "1":
            $col = "Acronym";
            break;
        case "2":
            $col = "Full_Name";
            break;
        case "3":
            $col = "What";
            break;
                }

    if($_GET['d'] == "1") {
        $dir = "DESC";
    }
    else {
        $dir = "ASC";
    }

    if(!$link = mysql_connect("localhost", "username", "password")) {
        echo "Cannot connect to db server";
    }
    elseif(!mysql_select_db("nazir_jargon")) {
        echo "Cannot select database";
    }
    else {

        if(!$rs = mysql_query("SELECT 'Acronym', 'Full Name', 'What' * FROM jargon1 ORDER BY $col $dir")) {
            echo "Cannot parse query";
        }
        elseif(mysql_num_rows($rs) == 0) {
            echo "No records found";
        }
        else {
            echo "<table class=\"bordered\" cellspacing=\"0\">\n";
            echo "<tr>";
            echo "<th>" . makeHeaderLink("Acronym", "Acronym", $col, $dir) . "</th>";
            echo "<th>" . makeHeaderLink("Full Name", "Full_Name", $col, $dir) . "</th>";
            echo "<th>" . makeHeaderLink("What", "What", $col, $dir) . "</th>";
            echo "</tr>\n";
            while($row = mysql_fetch_array($rs)) {
                echo "<tr><td>$row[person_id]</td><td>$row[Acronym]</td><td>$row[Full_Name]</td><td>$row[What]</td></tr>\n";
            }
            echo "</table><br />\n";
        }
    }
    ?>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:57:44.533

从查询中删除单引号 & *****，以便查询应如下所示。我希望它会奏效。

```
SELECT Acronym, Full Name, What FROM jargon1 ORDER BY $col $dir 
```

如果它不起作用，

可以打印吗

```
echo "SELECT Acronym, Full Name, What FROM jargon1 ORDER BY $col $dir"; 
```

让我知道你得到了什么？

**注意：**我认为您想使用反引号（`），但是错误地使用了单引号。

* * *

## 编辑 1

如你所见

```
echo "SELECT Acronym, Full Name, What FROM jargon1 ORDER BY $col $dir"; 
```

印刷

```
SELECT Acronym, Full Name, What FROM jargon1 ORDER BY ASC` 
```

这意味着`$col`没有打印..请检查出了什么问题`$col`

```
SELECT Acronym, Full Name, What FROM jargon1 ORDER BY columnNameMissing ASC`
                                                      ^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T12:18:52.623

如果您指定返回的列，请从您的选择查询中删除 *。否则用 *. 非此即彼。

# c# - 当用户单击不正确的按钮时，如何让我的 c# 应用程序弹出视频？

> ID：13777367
> 
> 赞同：0
> 
> 时间：2012-12-08T12:15:34.680
> 
> 标签：c#, video, popup

我对编程相当陌生，我正在做一些教程，但我自己添加了一些曲折，以使程序对我更有用，这让我保持动力。

我进行了搜索，但找不到在用户单击按钮时弹出视频的方法。该按钮是一个旋转按钮，但是当用户单击它而不旋转图像时，我希望它播放一个有趣的视频。目前它只显示一条消息。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:38:46.737

你可以试试这样的

```
System.Diagnostics.Process.Start(FULLPATH); 
```

“FULLPATH”是视频文件的完整文件路径。通过使用此方法，将使用其默认应用程序打开视频。

# c# - 验证失败时将文本框红色边框更改为

> ID：13777373
> 
> 赞同：-1
> 
> 时间：2012-12-08T12:16:14.583
> 
> 标签：c#, asp.net, textbox, validation

我正在用 asp.net c# 制作一个网页，我想在验证失败时更改文本框的边框颜色。

例如 ：![请参阅此图像中的红色边框 texbox](../Images/ac90895c528344279348fc0346e57056.png)

请告诉我我该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:19:54.037

这个sulation很容易，但有点脏：

在您的按钮和此 JavaScript 函数上指定 onClientClick 属性

```
<script type="text/javascript">
    function YourButtonClickEvent() {
        var validation = Page_ClientValidate();
        if (!validation) {
            for (var i = 0; i < Page_Validators.length; i++) {
                if (!Page_Validators[i].isvalid) {
                    $("#" + Page_Validators[i].controltovalidate).css("border-color", "red");
                }
            }
        }            
        return val;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:27:06.953

使用**jQuery——**在[`blur`](http://api.jquery.com/blur/)事件上使用

```
if(!validation)
{
   $('textboxid').css('border','1px solid red');
}
else
{
   $('textboxid').css('border','1px solid black');  //set to normal color
} 
```

使用**Javascript——** 在 Blur 事件中使用

```
document.getElementById('textboxId').Style.Border = "1px solid red"; 
```

欲了解更多信息，请通过此**[链接](https://stackoverflow.com/a/10374187/1577396)**

# java - 在 Swing 中显示 HTML

> ID：13777377
> 
> 赞同：5
> 
> 时间：2012-12-08T12:16:55.073
> 
> 标签：java, html, swing

我正在做一个从服务器加载 HTML 文件并在摇摆中显示它们的项目。

```
import java.io.*;
import java.net.*;
import java.util.regex.*;
import javax.swing.*;

public class webloader {
    public static void loadcode(){
        URL url = null;
        try {
            url = new URL("web"+File.separator+web.url+File.separator+"index.html");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        URLConnection con = null;
        try {
            con = url.openConnection();
        } catch (IOException e) {
            e.printStackTrace();
        }
        Pattern p = Pattern.compile("text/html;\\s+charset=([^\\s]+)\\s*");
        Matcher m = p.matcher(con.getContentType());
        String charset = m.matches() ? m.group(1) : "ISO-8859-1";
        Reader r = null;
        try {
            r = new InputStreamReader(con.getInputStream(), charset);
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        StringBuilder buf = new StringBuilder();
        while (true) {
          int ch = 0;
        try {
            ch = r.read();
        } catch (IOException e) {
            e.printStackTrace();
        }
          if (ch < 0)
            break;
          buf.append((char) ch);
        }
        String str = buf.toString();
        JFrame mainframe = new JFrame(web.url);
        mainframe.setSize(800, 750);
        mainframe.setResizable(false);
        JPanel website = new JPanel();
        JLabel webcontent = new JLabel(str);
        website.add(webcontent);
        mainframe.add(website);
        mainframe.setVisible(true);
    }
} 
```

错误：

```
Loading test.com
Exception in thread "AWT-EventQueue-0" java.lang.Error: Unresolved compilation
roblem:
        Syntax error on token ""web"", delete this token

        at webloader.loadcode(webloader.java:11)
        at web$1.actionPerformed(web.java:46)
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Sou
ce)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$200(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sou
ce)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sou
ce)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sou
ce)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

我对 Java 很陌生，所以如果我看起来很愚蠢或不知道自己在做什么，那是因为我是。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T16:17:03.680

我试图访问错误的文件。

正确代码：

```
import java.io.*;
import java.net.*;
import java.util.regex.*;
import javax.swing.*;

public class webloader {
    static JComponent page;
    public static void loadcode(){
        JEditorPane jep = new JEditorPane();
         jep.setEditable(false);   

         try {
           jep.setPage("http://(server):(port)/" + web.url);
         }
         catch (IOException e) {
           jep.setContentType("text/html");
           jep.setText("<html>Could not load webpage</html>");
         } 

         JScrollPane scrollPane = new JScrollPane(jep);     
         JFrame f = new JFrame(web.url);
         f.getContentPane().add(scrollPane);
         f.setSize(512, 342);
         f.show();
    }
} 
```

# javascript - Javascript 与 datepicker 和 ajax 表单冲突

> ID：13777378
> 
> 赞同：0
> 
> 时间：2012-12-08T12:17:03.400
> 
> 标签：javascript, jquery, ajax

我有这个脚本，我需要它来使用日期选择器并通过 ajax 提交表单。问题是，如果有 ajax 形式的 javascript，日期选择器将无法工作。我该如何解决它，我发现 jquery 没有冲突，但要么我不知道如何使用它，要么它赢了解决不了我的问题。。

谢谢！

```
<script src="../js/mootools-1.2.4-core-yc.js"></script>
    <script src="../js/mootools-1.2.4.4-more-yc.js"></script>
    <script src="../js/slimpicker.js"></script>
<script type="text/javascript" src="../js/jquery.min.js"></script><script type="text/javascript">
$(document).ready(function() {

});
</script> 
```

# c - 使用堆栈和二叉树 c 构建表达式树

> ID：13777381
> 
> 赞同：0
> 
> 时间：2012-12-08T12:17:12.933
> 
> 标签：c, stack, binary-tree, expression-trees

我得到一个算术公式，其中包含运算符 +、-、*、/ 和括号（可能会或可能不会改变运算符的自然优先级）。示例如下：a / b + f – (c + d) * e – a * c。我被要求使用堆栈（实现为链表）来跟踪操作数和运算符：我的程序应该如何工作的示例如下：

*   读a，压入操作数栈
*   读取 /，推入操作符栈
*   读取 b，压入操作数堆栈
*   读取 +: 的优先级低于 / ，因此：
    *   从操作数堆栈中弹出 2 个操作数（a 和 b）
    *   弹出/从运算符堆栈
    *   创建子树并压入操作数堆栈
    *   运算符堆栈是空的，所以按 + 就可以了
*   读取 f，压入操作数堆栈
*   读取 - : 与 + 具有相同的优先级，因此：
    *   从操作数堆栈中弹出 2 个操作数
    *   从运算符堆栈中弹出运算符 +
    *   创建一个以运算符 + 作为根，两个操作数作为左右子节点的树
    *   将创建的树的根推回操作数堆栈
    *   运算符堆栈是空的，所以 push - 就可以了

我难以理解的问题是如何区分**操作数的优先级**！

这是我编写的代码的不完整版本：

```
#include<stdio.h>
#include<stdlib.h>
#include<ctype.h>

typedef struct btnode Btree;
typedef struct node s_Node;

struct btnode {
    char info; 
    Btree *left; 
    Btree *right;
};

struct node {
    char element;
    s_Node*next;
}; 

typedef struct{
    s_Node *top_stack;
} stack_t; 

int IsOperator(char c);

main () {
    FILE* fp;
    stack_t operands;
    stack_t operators;
    char c;
    operands=NewStack();
    operators=NewStack();
    fp= fopen ("Myfile.txt", "r");
    if (fp== NULL)
        printf ("   FILE COULD NOT BE OPENED");
    else
    {
        c=getc(fp);
        while (!feof (fp))
        {
            if ( c== ' ');
            else 
            {
                printf ("Here is your character: %c\n", c);
                if (IsOperator (c))
                    Push (c, &operands);
                else if ( isalpha (c))

            }
        c=getc(fp);
        }
    }
}

int IsOperator(char c)
{   
    switch(c)
    {
        case '+':
        case '-':
        case '/':
        case '*':
        return 1;
        default:
        return 0;
    }
} 

stack_t NewStack()
{
    stack_t *n_stack;
    n_stack=(stack_t*)malloc(sizeof(stack_t));
    n_stack->top_stack=NULL;
    return (*n_stack);  
}

int Push(char e, stack_t *q)
{       
    s_Node *nn;
    nn= (s_Node*)malloc(sizeof(s_Node));

    if(Full(*q))
    {
        printf("\n\t Stack is Full !! \n\n");
        return 0;   // return 0 if enstack NOT successful
    }
    else 
    { 
        nn->element=e; // Storing the elemnt read inside the the new node
        nn->next=q->top_stack; // Pointing the new node to the top of the stack
        q->top_stack=nn; // Changing the top of the stack
        return 1;
    }
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T14:10:39.803

对于您正在使用的算法，操作数没有优先级。但是在自下而上的 shift-reduce 解析器中，它确实具有优先级，正如@WhozCraig 在下面这篇文章的评论中所说的那样。

操作数总是被压入操作数堆栈，并会被弹出 2 并使用运算符计算，然后作为单个操作数再次压入操作数堆栈。

对于您的公式：a / b + f – (c + d) * e – a * c

*   **一种**
*   `push`到操作数栈
*   **操作数**：一个
*   **运营商**：

*   **/**

*   `push`到运算符堆栈
*   **操作数**：一个
*   **运营商**：/

*   **b**

*   `push`到操作数栈
*   **操作数**：ab
*   **运营商**：/

*   **+**

*   `+`<= `/`-> pop /, a **&** b -> a **/** b -> push 到操作数栈
*   推`+`入操作栈
*   **操作数**：（a / b）
*   **运算符**：+

*   **F**

*   压入操作数堆栈
*   **操作数**：(a/b) f
*   **运算符**：+

*   **-**

*   `-`<= `+`-> pop +, (a/b) **&** f -> (a/b) **+** f -> 推入操作数栈
*   **操作数**：((a/b)+f)
*   **运营商**： -

*   **(**

*   推入操作栈
*   **操作数**：((a/b)+f)
*   **运算符**：- (

*   **C**

*   压入操作数堆栈
*   **操作数**: ((a/b)+f) c
*   **运算符**：- (

*   **+**

*   推入操作栈
*   **操作数**: ((a/b)+f) c
*   **运算符**: - ( +

*   **d**

*   压入操作数堆栈
*   **操作数**：((a/b)+f) cd
*   **运算符**: - ( +

*   **)**

*   直到'（'弹出，将堆栈中的所有运算符一个一个弹出并用2个操作数计算
*   -> pop +, c **&** d -> c **+** d -> 推入操作数栈
*   **操作数**： ((a/b)+f) (c+d)
*   **运算符**：- (
*   -> pop (, 停止弹出操作符栈
*   **操作数**： ((a/b)+f) (c+d)
*   **运营商**： -

*   *

*   `*`>`-`推入操作栈
*   **操作数**：((a/b) + f) (c + d)
*   **运营商**： - *

*   **e**

*   `*`>`-`推入操作数堆栈
*   **操作数**： ((a/b) + f) (c + d) e
*   **运营商**： - *

*   **-**

*   `-`<= `*`pop *, (c + d) **&** e -> (c + d) * e -> 推入操作数栈
*   **操作数**： ((a/b)+f) ((c+d)*e)
*   **运营商**： -
*   `-`<= `-`pop -, ((a/b)+f) **&** ((c+d)*e) -> ((a/b)+f) **-** ((c+d)*e) -> 推入操作数堆
*   push - 到操作符栈
*   **操作数**：(((a/b)+f)-((c+d)*e))
*   **运营商**： -

*   **一种**

*   压入操作数堆栈
*   **操作数**：(((a/b)+f)-((c+d)*e)) a
*   **运营商**： -

*   *

*   `*`>`-`推入操作栈
*   **操作数**：(((a/b)+f)-((c+d)*e)) a
*   **运营商**： - *

*   C

*   压入操作数堆栈
*   **操作数**：(((a/b)+f)-((c+d)*e)) ac
*   **运营商**： - *

*   **行结束**

*   一个一个地弹出堆栈中的所有运算符
*   pop *, a & c -> (a*c) -> push 到操作数栈
*   **操作数**：(((a/b)+f)-((c+d)*e)) (a*c)
*   **运营商**： -
*   pop -, (((a/b)+f)-((c+d)*e)) **&** (a*c) -> (((a/b)+f)-((c+d)* e)) **-** (a*c) -> 推入操作数堆栈
*   **操作数**：((((a/b)+f)-((c+d)*e))-(a*c))
*   **运营商**：

结果：((((a/b)+f)-((c+d)*e))-(a*c))

# javascript - Javascript/Greasemonkey match(), 正则表达式

> ID：13777382
> 
> 赞同：-1
> 
> 时间：2012-12-08T12:17:22.630
> 
> 标签：javascript, greasemonkey

我需要从此页面获取此文本中的数据：http: [//www.chess.com/home/game_archive?sortby=&show= echess&member=deckers1066](http://www.chess.com/home/game_archive?sortby=&show=echess&member=deckers1066)

我似乎无法使用它。

```
var text = document.body;

var results = text.match(/id=[0-9]*>/g); 
```

我需要抓住所有看起来像这样的事件

/echess/game?id=60942234

我对身份证号码更感兴趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:23:59.390

您的代码有两个问题；一个是您要搜索的字符串`document.body.innerHTML`，另一个是 RegExp 正在寻找元素的结束标记，`>`前面没有引号。试试这个

```
var results = document.body.innerHTML.match(/id=\d+/g); 
```

注意我完全省略了结束标记，因为这个 RegExp 是贪婪的，这意味着你不必担心 HTML 解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:27:14.247

请不要为此使用正则表达式。您应该使用适当的 DOM 解析器（几乎每种语言都有很多可用的解析器），然后使用它选择 ID。

如果您坚持使用正则表达式（我不建议这样做），那么 Paul S 的答案是最好的。

# php - 浏览器添加了奇怪的内联高度

> ID：13777385
> 
> 赞同：1
> 
> 时间：2012-12-08T12:17:37.193
> 
> 标签：php, css, browser, inline

这是我在这里的第一篇文章（尽管我经常访问）。

FF、Chrome 和 Safari 都在将自己的 CSS 添加到 div 中。

这就是 div 在实际 php 文件中的外观，如果您查看页面源代码也是如此。

```
<div class="layout content clearfix"> 
```

但是在 FF、Chrome 和 Safari（尽管不是 IE9）上添加了高度，当我使用“检查元素”时，我看到了这个

```
<div class="layout content clearfix" style="height: 2700px;"> 
```

谁能告诉我为什么或如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:50:28.550

没有一个浏览器将内联 CSS 添加到任何元素。虽然您可以为所有浏览器添加重置 CSS，但您可以从 [这里](http://necolas.github.com/normalize.css/)获得它。

考虑到您的问题，您可以在代码中搜索任何改变 div 行为的 JavaScript。如果是，您可以选择删除不需要的 JS 或类。

# linux - 检查 IP 有效性

> ID：13777387
> 
> 赞同：37
> 
> 时间：2012-12-08T12:18:11.900
> 
> 标签：linux, shell

如何检查 shell 脚本中 IP 地址的有效性，即在 to 范围`0.0.0.0`内`255.255.255.255`？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-08T15:39:46.860

如果您使用的是 bash，则可以对模式进行简单的正则表达式匹配，而无需验证四边形：

```
#!/usr/bin/env bash

ip=1.2.3.4

if [[ $ip =~ ^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
  echo "success"
else
  echo "fail"
fi 
```

如果您坚持使用 POSIX shell，那么您可以使用`expr`BRE 而不是 ERE 来做基本相同的事情：

```
#!/bin/sh

ip=1.2.3.4

if expr "$ip" : '[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*$' >/dev/null; then
  echo "success"
else
  echo "fail"
fi 
```

请注意，`expr`假设您的正则表达式锚定在字符串的左侧，因此`^`不需要初始值。

如果验证每个四边形是否小于 256 很重要，您显然需要更多代码：

```
#!/bin/sh

ip=${1:-1.2.3.4}

if expr "$ip" : '[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*$' >/dev/null; then
  for i in 1 2 3 4; do
    if [ $(echo "$ip" | cut -d. -f$i) -gt 255 ]; then
      echo "fail ($ip)"
      exit 1
    fi
  done
  echo "success ($ip)"
  exit 0
else
  echo "fail ($ip)"
  exit 1
fi 
```

或者甚至可能使用更少的管道：

```
#!/bin/sh

ip=${1:-1.2.3.4}

if expr "$ip" : '[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*$' >/dev/null; then
  IFS=.
  set $ip
  for quad in 1 2 3 4; do
    if eval [ \$$quad -gt 255 ]; then
      echo "fail ($ip)"
      exit 1
    fi
  done
  echo "success ($ip)"
  exit 0
else
  echo "fail ($ip)"
  exit 1
fi 
```

或者，如果您的 shell 是 bash，如果您不喜欢算术，则可以使用繁琐的正则表达式进行四边形验证：

```
#!/usr/bin/env bash

ip=${1:-1.2.3.4}

re='^(0*(1?[0-9]{1,2}|2([0-4][0-9]|5[0-5]))\.){3}'
 re+='0*(1?[0-9]{1,2}|2([‌​0-4][0-9]|5[0-5]))$'

if [[ $ip =~ $re ]]; then
  echo "success"
else
  echo "fail"
fi 
```

这也可以用 BRE 表示，但这比我的手指打字要多。

最后，如果你喜欢把这个功能……放在一个函数中：

```
#!/usr/bin/env bash

ip=${1:-1.2.3.4}

ipvalid() {
  # Set up local variables
  local ip=${1:-1.2.3.4}
  local IFS=.; local -a a=($ip)
  # Start with a regex format test
  [[ $ip =~ ^[0-9]+(\.[0-9]+){3}$ ]] || return 1
  # Test values of quads
  local quad
  for quad in {0..3}; do
    [[ "${a[$quad]}" -gt 255 ]] && return 1
  done
  return 0
}

if ipvalid "$ip"; then
  echo "success ($ip)"
  exit 0
else
  echo "fail ($ip)"
  exit 1
fi 
```

有很多方法可以做到这一点。我给你看了几个。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-29T14:24:26.623

这个单一的正则表达式应该只验证 0.0.0.0 和 255.255.255.255 之间的地址：

```
#!/bin/bash

ip="1.2.3.4"

if [[ "$ip" =~ ^(([1-9]?[0-9]|1[0-9][0-9]|2([0-4][0-9]|5[0-5]))\.){3}([1-9]?[0-9]|1[0-9][0-9]|2([0-4][0-9]|5[0-5]))$ ]]; then
  echo "success"
else
  echo "fail"
fi 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-27T04:15:15.557

使用 ipcalc（使用 RPM initscripts-9.49.49-1 中的版本包测试）

```
$ ipcalc -cs 10.10.10.257 && echo vaild_ip || echo invalid_ip
invalid_ip 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-08T12:21:21.433

Mitch Frazier 在 Bash脚本[中验证 IP 地址的脚本](http://www.linuxjournal.com/content/validating-ip-address-bash-script) 可以完成您想做的事情：

> ```
> function valid_ip()
> {
> local  ip=$1
> local  stat=1
> 
> if [[ $ip =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]]; then
>     OIFS=$IFS
>     IFS='.'
>     ip=($ip)
>     IFS=$OIFS
>     [[ ${ip[0]} -le 255 && ${ip[1]} -le 255 \
>         && ${ip[2]} -le 255 && ${ip[3]} -le 255 ]]
>     stat=$?
> fi
> return $stat
> } 
> ```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-09T02:39:58.690

这一切的典型解决方案似乎都使​​用正则表达式，但在我看来，这可能是执行以下操作的更好方法：

```
if echo "$ip" | { IFS=. read a b c d e;
    test "$a" -ge 0 && test "$a" -le 255 &&
    test "$b" -ge 0 && test "$b" -le 255 &&
    test "$c" -ge 0 && test "$c" -le 255 &&
    test "$d" -ge 0 && test "$d" -le 255 &&
    test -z "$e"; }; then echo is valid; fi 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-17T16:05:04.387

我调整了所有代码，发现这很有帮助。

```
#!/bin/bash

ip="256.10.10.100"

if [[ "$ip" =~ (([01]{,1}[0-9]{1,2}|2[0-4][0-9]|25[0-5])\.([01]{,1}[0-9]{1,2}|2[0-4][0-9]|25[0-5])\.([01]{,1}[0-9]{1,2}|2[0-4][0-9]|25[0-5])\.([01]{,1}[0-9]{1,2}|2[0-4][0-9]|25[0-5]))$ ]]; then
  echo "success"
else
  echo "fail"
fi 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-02-28T17:28:52.250

如果有人仍然通过使用正则表达式来寻找答案，那么下面会起作用 -

```
echo "<sample ip address>"|egrep "(^[0-2][0-5]{1,2}?\.|^[3-9][0-9]?\.)([0-2][0-5]{1,2}?\.|[3-9][0-9]?\.)([0-2][0-5]{1,2}?\.|[3-9][0-9]?\.)([0-2][0-5]{1,2}?$|[3-9][0-9]?$)" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-08T19:16:00.570

Perl 有一个很棒的模块[Regexp::Common](https://metacpan.org/module/Regexp%3a%3aCommon)用于验证各种事情：

```
perl -MRegexp::Common=net -e 'exit(shift() !~ /^$RE{net}{IPv4}$/)' $ipaddr 
```

您可能需要`sudo cpan install Regexp::Common`先

我将它包装在一个函数中：

```
valid_ip() {
  perl -MRegexp::Common=net -e 'exit(shift() !~ /^$RE{net}{IPv4}$/)' "$1"
}

if valid_ip 123.234.345.456; then
  echo OK
else
  echo INVALID
fi 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-31T15:18:12.773

我更喜欢使用 ipcalc 来执行此操作，只要我的脚本不必是可移植的。

```
ipcalc 1.1.1.355                                                                         
INVALID ADDRESS: 1.1.1.355

Address:   192.168.1.1          11000000.10101000.00000001\. 00000001
Netmask:   255.255.255.0 = 24   11111111.11111111.11111111\. 00000000
Wildcard:  0.0.0.255            00000000.00000000.00000000\. 11111111
=>
Network:   192.168.1.0/24       11000000.10101000.00000001\. 00000000
HostMin:   192.168.1.1          11000000.10101000.00000001\. 00000001
HostMax:   192.168.1.254        11000000.10101000.00000001\. 11111110
Broadcast: 192.168.1.255        11000000.10101000.00000001\. 11111111
Hosts/Net: 254                   Class C, Private Internet 
```

这里有一个很棒的页面展示了如何在脚本等中使用它： [SleeplessBeastie's Notes](https://blog.sleeplessbeastie.eu/2017/12/11/how-to-verify-ipv4-address/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-16T03:10:54.080

仍然进行彻底验证的替代版本（这意味着它需要格式正确的 IP 地址，并且每个象限都在允许的值范围内，即 0-255）。在 GNU bash 4.4.20 (Linux Mint 19.3) 上运行良好；在其他地方没有任何承诺，但只要你有 bash 4 就可以了。

初始格式检查正则表达式是从上面的 shannonman / Mitch Frazier 答案中借用的；其余的是我自己的。

```
 function isValidIpAddr() {
        # return code only version
        local ipaddr="$1";
        [[ ! $ipaddr =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]] && return 1;
        for quad in $(echo "${ipaddr//./ }"); do
            (( $quad >= 0 && $quad <= 255 )) && continue;
            return 1;
        done
    }
    function validateIpAddr() {
        # return code + output version
        local ipaddr="$1";
        local errmsg="ERROR: $1 is not a valid IP address";
        [[ ! $ipaddr =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]] && echo "$errmsg" && return 1;
        for quad in $(echo "${ipaddr//./ }"); do
            (( $quad >= 0 && $quad <= 255 )) && continue;
            echo "$errmsg";
            return 1;
        done
        echo "SUCCESS: $1 is a valid IP address";
    }

    $ isValidIpAddr '192.168.0.1'
    $ echo "$?"
    0

    $ isValidIpAddr '192.168.0.256'
    $ echo "$?"
    1

    $ validateIpAddr '12.1.10.191'
    SUCCESS: 12.1.10.191 is a valid IP address

    $ validateIpAddr '1.1.1.127'
    SUCCESS: 1.1.1.127 is a valid IP address

    $ validateIpAddr '1.1.1.1337'
    ERROR: 1.1.1.1337 is not a valid IP address 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-12-12T06:30:43.243

我们可以使用“ip route save”来进行检查。

```
valid_addrmask() 
{
    ip -4 route save match $1 > /dev/null 2>&1
}

$ valid_addrmask 255.255.255.255 && echo "is valid" || echo "is not valid"
is valid
$ valid_addrmask 255.255.255.355 && echo "is valid" || echo "is not valid"
is not valid 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-26T15:02:28.230

```
#!/bin/bash
read -p " ip: " req_ipadr
#
ip_full=$(echo $req_ipadr | sed -n 's/^\(\(\([1-9][0-9]\?\|[1][0-9]\{0,2\}\|[2][0-4][0-9]\|[2][5][0-4]\)\.\)\{3\}\([1-9][0-9]\?\|[1][0-9]\{0,2\}\|[2][0-4][0-9]\|[2][5][0-4]\)\)$/\1/p')
#
[ "$ip_full" != "" ] && echo "$req_ipadr vaild ip" || echo "$req_ipadr invaild ip" 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-10T13:58:50.960

您可以根据需要复制以下代码并更改 if else 控件的主体

```
function checkIP(){
echo "Checking IP Integrity"    
ip=$1
byte1=`echo "$ip"|xargs|cut -d "." -f1`
byte2=`echo "$ip"|xargs|cut -d "." -f2`
byte3=`echo "$ip"|xargs|cut -d "." -f3`
byte4=`echo "$ip"|xargs|cut -d "." -f4`

if [[  $ip =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$  && $byte1 -ge 0 && $byte1 -le 255 && $byte2 -ge 0 && $byte2 -le 255 && $byte3 -ge 0 && $byte3 -le 255 && $byte4 -ge 0 && $byte4 -le 255 ]]
then
    echo "IP is correct"
else
    echo "This Doesn't look like a valid IP Address : $ip" 
fi
}
checkIP $myIP 
```

使用存储在名为 myIP 的变量中的 IP 地址调用该方法。

$ip =~ ^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$ -这部分确保 IP 由 4 个由点 (.) 分隔的块组成，但这里的每个块都允许范围为 0 - 999

由于每个块的所需范围是 0 - 255，因此可以确保可以使用下面的行。

$byte1 -ge 0 && $byte1 -le 255 && $byte2 -ge 0 && $byte2 -le 255 && $byte3 -ge 0 && $byte3 -le 255 && $byte4 -ge 0 && $byte4 -le 255

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-12-17T04:07:11.263

以最简单的形式：-

```
#!/bin/bash
while true;
do
read -p "Enter a ip: " IP
echo "${IP}" > ip.txt
OCT1=$(cat ip.txt | awk -F "." '{print $1}')
OCT2=$(cat ip.txt | awk -F "." '{print $2}')
OCT3=$(cat ip.txt | awk -F "." '{print $3}')
OCT4=$(cat ip.txt | awk -F "." '{print $4}')
REGEX_IP='^[0-9]{1,3}[.][0-9]{1,3}[.][0-9]{1,3}[.][0-9]{1,3}$'
if [[ ${IP} =~ ${REGEX_IP} ]]
then
    if [[ ${OCT1} -gt 255 || ${OCT2} -gt 255 || ${OCT3} -gt 255 || ${OCT4} -gt 255 ]]
        then
        echo "Please enter a valid ip"
        continue
        fi

break
else
        echo "Please enter a valid ip"
        continue
fi
done 
```

这将涵盖所有场景。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-04-19T10:12:35.647

这个怎么样？

```
# ip route get 10.10.10.100 > /dev/null 2>&1  ; echo $?
0

# ip route get 10.10.10.300 > /dev/null 2>&1  ; echo $?
1 
```

由于“ip”命令检查 IP 本身的有效性。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-05T10:00:41.913

可能有用

```
#this script verify either a ip address is valid or not as well as public or local ip
#$1 means supplied first argument
ip=$(echo $1 | gawk '/^[0-9]{1,3}\.[0-9]{1,3}+\.[0-9]{1,3}+\.[0-9]{1,3}$/{print $0}')
#regular expression to match pattarn from 0.0.0.0 to 999.999.999.999 address

ip1=$(echo $ip | gawk -F. '{print $1}')
ip2=$(echo $ip | gawk -F. '{print $2}')
ip3=$(echo $ip | gawk -F. '{print $3}')
ip4=$(echo $ip | gawk -F. '{print $4}')

echo "Your ip is : $ip1.$ip2.$ip3.$ip4" #extract four number from the address

#To rectify original ip range 0-255 
if [[ $ip1 -le 255 && $ip1 -ne 0 && $ip2 -ne 0 &&  $ip2 -le 255 && $ip3 -ne 0 && $ip3 -le 255 && $ip4 -ne 0 && $ip4 -le 255 ]]
then
    echo "This is a valid ip address"
else
    echo "This is not a valid ip address"
fi

if [[ $ip1 -eq 198 ]]
then
    echo "It may be a local ip address"
else
    echo "It may be a public ip address"
fi 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-01-20T11:11:02.330

```
#!/bin/bash

IP="172.200.22.33.88"
p=`echo $IP | tr '.' '\n' | wc -l`
echo $p
IFS=.
set $IP
echo $IP
a=$1
b=$2
c=$3
d=$4

if [[ $p == 4 &&  $a -lt 255 && $b -lt 255 && $c -lt 255 && $d -lt 255 ]]

then

echo " THIS is Valid IP "

else

echo "THIS IS NOT VALID IP ADDRESS"

fi 
```

# .htaccess - 使用 .htaccess 重写 URL

> ID：13777388
> 
> 赞同：0
> 
> 时间：2012-12-08T12:18:20.593
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在尝试重写我的 URL，以便它们对搜索引擎友好。

示例网址是：

```
http://www.example.com/?Products=Displays&SubCat=Chalkboards-and-Accessories&Item=Budget-Framed-Chalkboards 
```

我在想也许是这样的：

```
http://www.example.com/Chalkboards-and-Accessories/Budget-Framed-Chalkboards 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:42:48.773

我建议您不要使用 {Domain}/Chalkboards-and-Accessories/Budget-Framed-Chalkboards URL，而是使用 {Domain}/ **Products/Chalkboards-and-Accessories/Cafe-and-Rope-Barrier-Systems**，因为在您的网站中，您有像 {Domain}/?About 这样的 URL。

试试这个，

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^catalogue\.signalight\.co\.uk$
RewriteCond %{HTTP_HOST} !^blog\.signalight\.co\.uk$

#RewriteCond %{REQUEST_URI} !^/catalogue
#RewriteCond %{REQUEST_URI} !^/blog

RewriteRule ^([a-zA-Z0-9-_]+)/?$                                    ?$1 [L]
RewriteRule ^([a-zA-Z0-9-_]+)/([a-zA-Z0-9-_]+)/?$                   ?$1=$2 [L]
RewriteRule ^([a-zA-Z0-9-_]+)/([a-zA-Z0-9-_]+)/([a-zA-Z0-9-_]+)/?$  ?$1=$2&SubCat=$3 [L]
RewriteRule ^([a-zA-Z0-9-_]+)/([a-zA-Z0-9-_]+)/([a-zA-Z0-9-_]+)/([a-zA-Z0-9-_]+)?$  ?$1=$2&SubCat=$3&Item=$4 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:25:10.730

[这是一篇很好的基础 url 重写文章。](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

# function - 如何将 Nodata 值设置为零

> ID：13777392
> 
> 赞同：1
> 
> 时间：2012-12-08T12:18:30.603
> 
> 标签：function, matlab

我有个问题。如何在图像上将空值设置为 0。在matlab中有什么方法可以做到这一点。图像类型为浮点、32 位、tif 格式。此图像的空值（Nodata）为-3.4028234663e+038。所以这个数字超出了浮点数的范围。所以我想用 0 替换这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:22:05.023

一般来说，您可以找到所有要替换的元素：

```
idx = (I == x); % # x is the "null" value 
```

`I`您的图像在哪里，并且`x`是要替换的所需值（在您的情况下，即“空”值）。但是，更实用的语法是使用某个阈值而不是精确值：

```
idx = (I > y);  % # y is a value much lower than x 
```

现在`idx`保存要归零的元素的逻辑索引。获得后`idx`，只需执行以下操作：

```
I(idx) = 0; 
```

PS
实际上，您可以在不创建临时变量的情况下实现相同的结果`idx`，如下所示：

```
I(I > y) = 0; 
```

# iphone - 在顶部显示 navigationController

> ID：13777395
> 
> 赞同：1
> 
> 时间：2012-12-08T12:18:39.873
> 
> 标签：iphone, ios, uinavigationcontroller, subview

我在我的应用程序中设置了一个子视图“弹出窗口”，如果用户点击子视图弹出窗口上的按钮，我想显示一个 navController。到目前为止，我已经设置了按钮，但是如果我点击按钮，navigationController 会出现在我的弹出窗口下！？我已经搜索了一些解决方案，但我没有找到任何解决方案。整个控制器实际上显示在一个文件夹中，您可以在这里找到：[https](https://github.com/jwilling/JWFolders) ://github.com/jwilling/JWFolders所以 viewDidLoad 属于文件夹和 rootview。我试图将其作为弹出窗口的子视图，但这也不起作用。有谁知道如何治疗？我也以编程方式设置了弹出窗口和导航控制器。提前致谢。

我的代码：

导航控制器设置：

```
 - (IBAction)dothis:(id)sender {

    MWPhotoBrowser *browser = [[MWPhotoBrowser alloc] initWithDelegate:self];

    // Set browser options.
    browser.wantsFullScreenLayout = YES;
    browser.displayActionButton = YES;

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:browser];

    [self presentModalViewController:navController animated:YES];

    NSMutableArray *photos = [[NSMutableArray alloc] init];
    MWPhoto *photo;
    photo = [MWPhoto photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"star" ofType:@"png"]];
    photo.caption = @"The star is soo beateful...";
    [photos addObject:photo];

    self.photos = photos;

}

- (MWPhoto *)photoBrowser:(MWPhotoBrowser *)photoBrowser photoAtIndex:(NSUInteger)index {
    if (index < _photos.count)
        return [_photos objectAtIndex:index];
    return nil;
}
- (NSUInteger)numberOfPhotosInPhotoBrowser:(MWPhotoBrowser *)photoBrowser {
    return _photos.count;
} 
```

弹出代码：

```
 -(IBAction)mehr:(id)sender {
    //the popup size and content
    UIView *contentView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 280, 440)];
    CGRect welcomeLabelRect = contentView.bounds;
    welcomeLabelRect.origin.y = 20;
    welcomeLabelRect.size.height = 40;
    UILabel *welcomeLabel = [[UILabel alloc] initWithFrame:welcomeLabelRect];

//an simple activityindicator

 activityindi = [[UIActivityIndicatorView  alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    activityindi.frame = CGRectMake(120, 200, 40, 40);
    [activityindi startAnimating];
    [contentView addSubview:activityindi];

   //The Imageview
    CGRect infoimagerect = CGRectMake(5, 70, 270, 200);

    UIImageView *infoimage = [[UIImageView alloc] initWithFrame:infoimagerect];

        //and the Button

cubut = [UIButton buttonWithType:UIButtonTypeCustom];
    [cubut addTarget:self
              action:@selector(dothis:)
    forControlEvents:UIControlEventTouchUpInside];
    [cubut setTitle:nil forState:UIControlStateNormal];
    cubut.frame = CGRectMake(5, 70, 270, 200);

//retrieving data from parse.com
PFQuery *query = [PFQuery queryWithClassName:@"My-Application"];
    [query getObjectInBackgroundWithId:@"My-ID"
                                 block:^(PFObject *textdu, NSError *error) {
                                     if (!error) {

//hide the Button if there is no image
                                         cubut.hidden=YES;

                                         //the headline of popup
                                         UIFont *welcomeLabelFont = [UIFont fontWithName:@"copperplate" size:20];

                                         welcomeLabel.text = [textdu objectForKey:@"header"];
                                         welcomeLabel.font = welcomeLabelFont;
                                         welcomeLabel.textColor = [UIColor whiteColor];
                                         welcomeLabel.textAlignment = NSTextAlignmentCenter;
                                         welcomeLabel.backgroundColor = [UIColor clearColor];
                                         welcomeLabel.shadowColor = [UIColor blackColor];
                                         welcomeLabel.shadowOffset = CGSizeMake(0, 1);
                                         welcomeLabel.lineBreakMode = UILineBreakModeWordWrap;
                                         welcomeLabel.numberOfLines = 2;
                                         [contentView addSubview:welcomeLabel];

//the image from parse

 if (!error) {
                                             PFFile *imageFile = [textdu objectForKey:@"image"];
                                             [imageFile getDataInBackgroundWithBlock:^(NSData *data, NSError *error) {
                                                 if (!error) {
                                                     UIImage *image = [UIImage imageWithData:data];
                                                     infoimage.image = image;
                                                     infoimage.contentMode = UIViewContentModeScaleAspectFit;
                                                     //show the button when the image appears
                                                     cubut.hidden = NO;

                                                     [contentView addSubview:infoimage];
                                                    //stop the activityindicator
                                                     [activityindi stopAnimating];

                                                 }
                                             }];
                                         }
 } else {
                                        //show some text 
                                         welcomeLabel.text = @"No connection!";
                                         [welcomeLabel sizeToFit];
//hide the button
                                         cubut.hidden = YES;

                                         [contentView addSubview:infoLabel];
//stop the activityindicator
                                         [activityindi stopAnimating];
                                     }

                                 }];
//add the content to the KNGModal view

 [[KGModal sharedInstance] showWithContentView:contentView andAnimated:YES];
} 
```

我的 viewDidLoad

```
- (void)viewDidLoad
{

but.hidden = YES;
PFQuery *query = [PFQuery queryWithClassName:@"myapp"];
    [query getObjectInBackgroundWithId:@"Rgq5vankdf"
                                 block:^(PFObject *textu, NSError *error) {
                                     if (!error) {
but.hidden = NO;
                                         but.color = [UIColor colorWithRed:0.90f green:0.90f blue:0.90f alpha:1.00f];

} else {

                                         //if failure
                                        but.hidden = YES;
                                        mol.text = @"No Connection";

                                     }

                                 }];

    [super viewDidLoad];

} 
```

图片：

打开文件夹的按钮： ![在此处输入图像描述](../Images/492f0b4a81b681762b16a71f18f93a8d.png)

文件夹本身： ![在此处输入图像描述](../Images/6da7d9a7e7ef1b503767674f431be3fd.png)

弹出窗口： ![在此处输入图像描述](../Images/fca72ad762f0f72df4401db160afd6d3.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:22:33.290

从到目前为止的讨论和调试代码中，您希望在带有导航控制器的弹出窗口中拥有照片浏览器。

所以这里是实现这个功能的[示例代码](http://dl.dropbox.com/u/58723521/Shared/KGModal-master-with-nav-pop-up.zip)，看看它。

我使用了相同的`KGModal`示例代码并根据要求进行了扩展。我使用 Xib 来查看带有导航栏的视图。

要从应用程序中的任何位置关闭弹出窗口，您可以使用以下行，因为它是共享实例。

```
[[KGModal sharedInstance] hideAnimated:YES]; 
```

**更新：**

在文件夹视图中显示照片浏览器的原因是，您试图在文件夹视图中显示照片浏览器，因此它在高度非常小的文件夹视图中显示并且看不到任何照片。

所以我的建议是，当用户点击弹出窗口查看 photoBrowser 时，您只需删除弹出窗口并从 viewController 类中显示 photoBrowser，因为除了这个类之外，所有内容都通过视图处理。

我已经按照上面的方法进行了更改，并且工作正常，您提供的代码，请[在此处](http://dl.dropbox.com/u/58723521/Shared/sampleOfModal.zip)下载代码并查看它。

让我知道它是否满足您的需求。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:48:39.180

我注意到这行代码：

```
[[KGModal sharedInstance] showWithContentView: contentView andAnimated: YES]; 
```

而且我只能认为，因为它是一个单例，所以它`contentView`在 UIApplication 的键窗口上添加了 。如果是这种情况，那么模态视图控制器将始终位于弹出窗口下方。`KGModal`您可以通过向类添加新方法来解决此问题

```
- (void) showWithContentView: (UIView*)           contentView
            inViewController: (UIViewController*) controller
                 andAnimated: (BOOL)              animated; 
```

该方法应在指定控制器的视图中显示弹出窗口；您应该改用该方法。

**编辑**

经过更多的挖掘，我发现`KGModal`在另一个窗口上显示了弹出窗口。最快的解决方法是关闭弹出窗口，然后显示导航控制器。

# hibernate - Grails：复杂的多对多 GORM 查询

> ID：13777401
> 
> 赞同：0
> 
> 时间：2012-12-08T12:19:13.897
> 
> 标签：hibernate, grails, hql, grails-orm

我有 5 张桌子：

```
User (Mark)
Enterprise (Google)
EnterpriseUser (Mark,  Google)
EnterpriseRight (LOGIN)
EnterpriseUserRight (Mark-Google, LOGIN) 
```

我想使用 GORM 来查询标记（当前用户）拥有登录权限的所有企业的数据库。然后，我希望能够对结果进行排序和分页。

我之前通过构建一个列表来做到这一点，但我会提到返回一个 ResultSet（它仍然可以排序/分页/查询）

**我的 User.class（域对象）尝试（生成 List<Enterprise>）**

```
public List<Enterprise>getEnterprises() {
    def list = new ArrayList<Enterprise>()
    for (EnterpriseUser eu: this.enterpriseUsers) {
        if (this.hasEnterpriseRights(eu.enterprise, [EnterpriseRight.LOGIN])) {
            list.add(eu.enterprise)
        }
    }
    return list
} 
```

（但我无法对这些结果进行排序和分页，因为它们现在是一个列表。如果这个查询可以返回一个结果集会很好）

**用英语：**

查找`Enterprise`与`User`此用户具有`EnterpriseRight`字符串名称“LOGIN”的所有相关联。按字母顺序列出，从偏移量 10 给我 10 个结果。

我会在这里发布我的代码，但我不知道从哪里开始。

**域对象是：**

```
class User {

    static hasMany = [userSystemRights: UserSystemRight, enterpriseUsers: EnterpriseUser]

    String email;   
    String passwordHash;
}    

class Enterprise {

    static hasMany = [enterpriseUsers: EnterpriseUser, measurements: Measurement]

    String name = ""
    String tradingName = ""
}

class EnterpriseUser {

    static belongsTo = [enterprise: Enterprise, user: User]
    static hasMany = [enterpriseUserRights: EnterpriseUserRight]

    Enterprise enterprise
    User user
    String interest
}

class EnterpriseUserRight {

    static belongsTo = [enterpriseUser: EnterpriseUser, enterpriseRight: EnterpriseRight]

    EnterpriseUser enterpriseUser
    EnterpriseRight enterpriseRight

}

class EnterpriseRight {

    public static final String LOGIN = "LOGIN"
    public static final String MANAGE_USERS = "MANAGE_USERS"
    public static final String MANAGE_SETTINGS = "MANAGE_SETTINGS"

    static hasMany = [enterpriseUserRights: EnterpriseUserRight]    

    String name
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:14:42.543

我不知道 Grails 是否也有用于查询的特殊 DSL，但在 HQL 中，你会这样做：

```
select distinct enterprise from EnterpriseUserRight enterpriseUserRight
inner join enterpriseUserRight.enterpriseRight enterpriseRight
inner join enterpriseUserRight.enterpriseUser enterpriseUser
inner join enterpriseUser.enterprise enterprise
where enterpriseRight.name = 'LOGIN'
and enterpriseUser.user = :user
order by enterprise.name 
```

# javascript - 如何单击堆叠的 svg 图像的一部分

> ID：13777406
> 
> 赞同：1
> 
> 时间：2012-12-08T12:19:30.713
> 
> 标签：javascript, html, svg

我已经使用几个 svg 文件构建了一个图像，以便我可以控制交换图像的部分和更改颜色。

我现在正在研究为什么除了顶部的 svg 项目我不能用鼠标点击任何东西。我认为这是因为我的图像过大，但我已经纠正了这一点。使用嵌入标签放置图像，我还尝试更改嵌入高度和宽度属性。

我什至可以这样做吗？或者我应该寻找不同的解决方案。

** 编辑 ** 我添加了代码，但已将其删除，因为提供帮助的人没有使用它，也没有为解决方案做出贡献。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:50:20.373

我采用的解决方案是使用清晰的叠加图像和图像映射。

详情请参阅； [关联](https://stackoverflow.com/questions/13830786/to-enable-clicking-on-layered-svg-images/13849060#13849060)

# javascript - JavaScript空白验证不起作用

> ID：13777409
> 
> 赞同：0
> 
> 时间：2012-12-08T12:19:44.437
> 
> 标签：javascript, jsp

我已经编写了 JSP 代码，我需要检查空格验证，但是它不起作用，谁能告诉我原因。单击提交按钮时，它必须验证空格和字符。

**JSP 代码**

```
<%-- 
    Document   : LapsePeriodicFeedBack
    Created on : Dec 7, 2012, 2:50:28 PM
    Author     : Admin
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<%@ page import="java.util.*" %>
<%@page import="PeriodicFeedBack.PeriodicType"%>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>LapsePeriodicList</title>
        <script>
            function validateForm(){

                var selectindex=document.forms["lapse"]["periodmenu"].selectedIndex;
                var whitespace = new RegExp("^\w*$");
                var x= document.forms["lapse"]["lapsedays"].value;
                var textlength=document.forms["lapse"]["lapsedays"].length;
                if(x==""){
                    alert("Days Cant Be Empty");
                    return false;
                }
                if(x==whitespace){
                    alert("White Spaces are not Allowed");
                    return false;
                }
                if(selectindex==0){

                    alert("Please select Days from menu");
                }

            }
            if(x=="/\\s"){
                    alert('Sorry, you are not allowed to enter any spaces');
                    x.value=x.value.replace(/\s/g,'');
                    }

        </script>

    </head>
    <body>
        <form  method="post" name="lapse" onsubmit="return validateForm()">
            <table width="500px" border="1" align="center" style='border-collapse: collapse;font: 13px Arial, Helvetica, sans-serif;' bordercolor='#000000'>

                <tr  style="color:'#ffffff';background-color:#CA1619;background-repeat:repeat-x;font: 13px Arial, Helvetica, sans-serif;">
                    <td colspan="4" align="center">
                <font color="#ffffff" > <b>Periodic Feedback List</b></font></td></tr>
                <tr>
                    <td align="center">
                    Periodic Feedback Days</td>
                    <td align="center">
                        <select id="periodmenu">
                            <option> Select</option>
                            <%
        PeriodicType p = new PeriodicType();
        ArrayList periodicList = p.getPeriodicType();
        for (int i = 0; i < periodicList.size(); i++) {%>
                            <option>

                                <% out.println(periodicList.get(i));
        }%>
                            </option>
                    </select></td>
                </tr>
                <tr>
                    <td align="center">
                    Lapse Days &nbsp;</td>
                    <td align="center">
                        <p>
                            &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
                        <input name="lapsedays" type="text" id="lapsedays" onkeyup="nospaces(this)"/></p>
                    <input name="Submit" type="submit" value="Submit" /></td>
                </tr>

            </table>
        </form>
        <p>
        &nbsp;</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:24:43.090

您不能用于`x==whitespace`检查`x`正则表达式。使用以下内容：

```
whitespace.test(x); 
```

这将返回真或假。

此外，您不应`new RegExp`为此使用，而应使用文字运算符：

```
var whitespace = /^\w*$/; 
```

# performance - 时间戳作为实体框架的并发控制方法的成本

> ID：13777410
> 
> 赞同：1
> 
> 时间：2012-12-08T12:19:48.593
> 
> 标签：performance, entity-framework, concurrency

在并发中，在乐观并发中，控制并发的方式是使用时间戳字段。但是，在我的特定情况下，并非所有字段都需要在并发方面进行控制。

例如，我有一个产品表，其中包含库存数量。该表具有描述、代码等字段。对我来说，一个用户修改这些字段不是问题，但我必须控制其他用户是否更改库存。

因此，如果我使用时间戳并且一个用户更改了描述，而另一个用户更改了库存数量，那么第二个用户将获得异常。

但是，如果我使用字段 stock 而不是并发异常，那么第一个用户可以更新信息，第二个用户可以毫无问题地更新 stock。

使用股票字段来控制并发性是一个很好的解决方案，还是总是使用时间戳字段更好？

并且如果以后我需要添加一个新的重要字段，那么我需要使用两个字段来控制股票和新的并发吗？它在性能方面的成本很高吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:38:22.980

考虑*乐观并发*的定义：

> 在关系数据库管理系统领域，乐观并发控制（OCC）是一种并发控制方法，它假设多个事务可以在不相互影响的情况下完成，因此事务可以在不锁定它们影响的数据资源的情况下继续进行。（[维基百科](http://en.wikipedia.org/wiki/Optimistic_concurrency)）

显然，这个定义是抽象的，为您的具体实现留下了很大的空间。

让我给你举个例子。几年前，我和一群同事评估了同样的事情，我们意识到在我们的应用程序中，在某些表上，并发性可以简单地基于用户正在更新的字段。

所以，换句话说，只要他们正在更新的字段在他们收集行后没有改变，我们就让他们更新行，因为其余的字段真的无关紧要**，**并且行会得到无论如何都会在 udpate 上刷新，这样他们就可以得到其他用户的最新更改。

所以，简而言之，我会说你正在做的事情很好**，并**没有任何硬性规定。这真的取决于你需要什么。如果你需要它更灵活，就像你在说的那样，那就让它更灵活——简单。

# java - JLabel 鼠标点击图标或文本

> ID：13777411
> 
> 赞同：7
> 
> 时间：2012-12-08T12:19:48.687
> 
> 标签：java, swing, jlabel, imageicon

当它被点击时`JLabel`，我想了解点击是否被点击`"Icon part"`，或者“`Text part"`的” `JLabel`，以便可以采取不同的行动。有没有聪明的方法来做到这一点？或者只是我必须用坐标相对解决它图标和文字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:47:39.033

+1 @aymeric 评论。

> 拥有两个不同的 JLabel 怎么样？

不过我明白你为什么会犹豫

> 阴性：需要维护 2 个标签。

我对此的*聪明*（：P）解决方案是创建您自己的抽象组件 - 它接受图标和文本作为构造函数的参数 - 通过扩展`JPanel`而不是添加 2 `JLabel`s `JPanel`，每个标签都有其`MouseAdapter`调用抽象方法`xxxClicked()`（因此任何实现类必须覆盖这些方法）。

这是我做的一个例子：

![在此处输入图像描述](../Images/43a02ab61db70a0d829aa083faac81ed.png)

```
import java.awt.FlowLayout;
import java.awt.Image;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                ImageIcon ii = null;
                try {
                    //I dont remmend getScaledInstance just used it for speed of code writing
                    ii = new ImageIcon(ImageIO.read(new URL("http://www.candonetworking.com/java.gif")).getScaledInstance(32, 32, Image.SCALE_SMOOTH));
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

                MyLabel ml = new MyLabel(ii, "Something") {
                    @Override
                    void iconClicked() {
                        System.out.println("Icon clicked");
                    }

                    @Override
                    void textClicked() {
                        System.out.println("Text clicked");
                    }
                };

                frame.add(ml);

                frame.pack();
                frame.setVisible(true);
            }
        });
    }
}

abstract class MyLabel extends JPanel {

    JLabel iconLabel;
    JLabel textLabel;
    MouseAdapter iconMA;
    MouseAdapter textMA;

    public MyLabel(ImageIcon icon, String text) {
        iconLabel = new JLabel(icon);
        textLabel = new JLabel(text);
        iconMA = new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent me) {
                super.mouseClicked(me);
                iconClicked();
            }
        };
        textMA = new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent me) {
                super.mouseClicked(me);
                textClicked();
            }
        };
        iconLabel.addMouseListener(iconMA);
        textLabel.addMouseListener(textMA);
        add(iconLabel);
        add(textLabel);
    }

    abstract void iconClicked();

    abstract void textClicked();

    public JLabel getIconLabel() {
        return iconLabel;
    }

    public JLabel getTextLabel() {
        return textLabel;
    }
} 
```

# linq - 为什么此 LINQ to EF 查询不起作用？

> ID：13777417
> 
> 赞同：1
> 
> 时间：2012-12-08T12:20:51.927
> 
> 标签：linq, entity-framework, linq-to-entities, ef-code-first, entity-framework-5

我对以下方法有疑问：

```
public IQueryable<Customer> ListCustomers(int? parentId)
{
    Debug.Assert(parentId == null);
    //var list = _customerRepository.List().Where(c => c.ParentId == null);
    var list = _customerRepository.List().Where(c => c.ParentId == parentId);
    return list;
} 
```

我的数据库中有一个客户，其 ParentId 为 null。当我用 , 调用方法时`ListCustomers(null)`，`list`return 语句为空。如果我交换注释掉的行并使用硬编码的空值进行查询，则列表包含我的一个客户。

什么可能导致这两个查询之间存在这种差异？为什么`c.ParentId == parentId`不返回任何东西的那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:28:10.953

因为 Nullable 类型，linq 提供程序不会生成正确的 IS NULL 检查。有关更多信息，请参阅此答案：[https ://stackoverflow.com/a/785501/1195510](https://stackoverflow.com/a/785501/1195510)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T12:47:25.043

EF 将您的查询翻译`int?`成如下内容：

```
DECLARE @parentId Int = null
SELECT ... WHERE ParentId = @parentId 
```

当这在数据库上执行时，它不会做你所期望的，因为在 SQL`[column] = NULL`中总是错误的。

我同意 EF 可以更好地处理这个问题，但作为一种解决方法，您可以编写如下内容：

```
.Where( c => !parentId.HasValue
  ? !c.ParentId.HasValue 
  : c.ParentId.Value == parentId.Value
) 
```

然后，EF 将生成带有正确`IS NULL`谓词的（有些冗长的）SQL 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T12:28:51.180

对于可为空的类型，您必须像这样使用它：

```
 .Where(c=> object.Equals(c.ParentId, parentId)) 
```

# python - Soundcloud API + Python 桌面应用程序

> ID：13777418
> 
> 赞同：1
> 
> 时间：2012-12-08T12:20:55.297
> 
> 标签：python, oauth-2.0, soundcloud

我有一个关于使用 Soundcloud API 在 Python 中编写桌面应用程序的问题。我的问题是如何在我的桌面应用程序中实现登录功能而不泄露我的客户端机密。因为为了获得登录令牌，我需要使用我的客户端 ID 和密码初始化客户端。有可能吗？还是我必须使用 Java 或 Objective-C API？

还是创建 Python 字节码而不是发布我的应用程序？我对 Python 字节码没有太多经验。是否可以从 *.pyc 文件中提取变量或常量？

# php - 查询显示太多而不是正确的 brewer PHP/MYSQL

> ID：13777421
> 
> 赞同：0
> 
> 时间：2012-12-08T12:21:04.210
> 
> 标签：php, mysql, inner-join

我有一个查询来显示一个表中的所有啤酒和啤酒厂，但是当使用这个查询时，结果会显示啤酒和所有啤酒厂，所以例如我得到的结果是啤酒和所有啤酒厂的列表。
我想我的内部连接做错了，但我不知道是什么。

```
SELECT * FROM bieren INNER JOIN brouwers ON bieren.naam LIKE "du%" AND brouwers.brnaam LIKE "a%" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:25:27.523

您还必须将外键添加到联接中。啤酒可能有 brewerid 之类的。此外，尽管您的查询“有效”，但更常见的`WHERE`是在查询子句中包含过滤条件。也添加一点空白，您的查询可能看起来像这样

```
SELECT * 
FROM 
  bieren 
INNER JOIN brouwers 
  ON bieren.brouwerid = brouwers.brouwerid
WHERE
  bieren.naam LIKE "du%" AND 
  brouwers.brnaam LIKE "a%" 
```

# sql - 将 SQL 转换为 Arel 或 Squeel

> ID：13777425
> 
> 赞同：0
> 
> 时间：2012-12-08T12:21:23.160
> 
> 标签：sql, ruby-on-rails, activerecord, arel, squeel

## tl;博士

如何将以下 SQL 转换为 Arel（或 Rails 中被视为标准的任何内容）

```
@toplist = ActiveRecord::Base.connection.execute(
     'select ci.crash_info_id,
        count(distinct(user_guid))[Occurences], 
        c.md5 
      from crashes ci 
        join crash_infos c on c.id=crash_info_id 
      group by ci.crash_info_id
      order by [Occurences] desc') 
```

--- tl 结束；博士 ----

我正在开发一个小型 Web 项目，其目标是获取我们的客户崩溃报告（当我们的桌面应用程序崩溃时，我们将诊断信息发送到我们的服务器），分析它们，然后显示导致我们的应用程序崩溃的最常见错误是什么崩溃..这样我们就专注于修复影响我们大部分用户的错误..

我有 2 张桌子：

1.  crash_infos - id, md5（堆栈跟踪的 md5。在 .net 堆栈跟踪中，异常消息有时由 .net 翻译成用户的母语！所以我基本上通过删除语言特定部分并从中生成 md5 来清理异常）

2.  崩溃 - id、user_guid（用户 id）、crash_info_id（id 到 crash_infos 表）

现在的问题是，我想做一个查询，显示唯一用户最常见的崩溃（避免为同一用户计算多次相同的崩溃）并按崩溃次数对其进行排序。不幸的是，我对 Arel 了解的不够多（或者任何关于 Rails 的 ruby​​ 方法），所以我最终得到了原始 SQL :(

```
@toplist = ActiveRecord::Base.connection.execute(
  'select ci.crash_info_id,
     count(distinct(user_guid))[Occurences], 
     c.md5 
   from crashes ci 
   join crash_infos c on c.id=crash_info_id 
   group by ci.crash_info_id 
   order by [Occurences] desc') 
```

我怎样才能将它转换为更“railsy”的东西？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:08:38.783

不确定这是否真的更好，但至少你应该有一个独立于数据库的查询......

```
crashes     = Arel::Table.new(:crashes)
crash_infos = Arel::Table.new(:crash_infos)

crashes.
    project(crashes[:crash_info_id], crash_infos[:md5], Arel::Nodes::Count.new([crashes[:user_guid]], true, "occurences")).
    join(crash_infos).on(crashes[:crash_info_id].eq(crash_infos[:id])).
    group(crashes[:crash_info_id]).
    order("occurences DESC").
    to_sql 
```

给出：

```
SELECT "crashes"."crash_info_id", "crash_infos"."md5", COUNT(DISTINCT "crashes"."user_guid") AS occurences FROM "crashes" INNER JOIN "crash_infos" ON "crashes"."crash_info_id" = "crash_infos"."id" GROUP BY "crashes"."crash_info_id" ORDER BY occurences DESC 
```

# spring - 避免自动加载 hbm 文件

> ID：13777428
> 
> 赞同：0
> 
> 时间：2012-12-08T12:21:30.297
> 
> 标签：spring, hibernate, jpa, hbm

我有两个数据库（Oracle 和 SqlServer），并且两者都有相同的表（Province）。我正在将 JPA 与 Hibernate 一起使用，并且需要对这些数据库中的任何一个执行操作。

我为每个表都有一个 hbm 映射文件，但它们都引用同一个类（Province.java）。我已经配置了 hibernate.Oracle.cfg.xml 和 hibernate.SqlServer.cfg.xml 以便为每个 DB 适当地声明映射。

我也在使用Spring。

这是我的问题。当应用程序加载（实际上是 JUnit）时，它会尝试加载两个抛出 DuplicateMappingException 的 hbm 文件，因为 Province.java 是两次。此外，如果我只保留一个 hbm 文件和一个休眠配置文件，它仍然会抛出 DuplicateMappingException；但是如果我从休眠配置文件中删除映射，那么它就可以工作（但我不想要这个）。这意味着 hbm 文件会自动加载，然后由于在配置文件中声明而再次加载。

有没有办法可以避免自动加载 hbm 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:23:33.747

我终于能够找到解决这个问题的方法。
我将**<exclude-unlisted-classes>false</exclude-unlisted-classes>**添加到 persistence.xml 文件中的两个持久性单元中，它阻止了自动加载 hbm 文件。我还必须将映射放在 hibernate.Oracle.cfg.xml 和 hibernate.SqlServer.cfg.xml 中。

# wpf - 为什么当值为 false 时触发 `IsKeyboardFocusWithin` 不起作用？

> ID：13777438
> 
> 赞同：3
> 
> 时间：2012-12-08T12:22:11.763
> 
> 标签：wpf, triggers, eventtrigger

我想改变 InputLanguage on `Textbox.GotFocus`and `Textbox.LostFocus`，所以我这样做：

```
<Style TargetType="{x:Type TextBox}" x:Key="EnglishTextStyle">
    <Style.Triggers>
        <Trigger Property="IsKeyboardFocusWithin" Value="True">
            <Setter Property="InputLanguageManager.InputLanguage" Value="en-us" />
        </Trigger>
        <Trigger Property="IsKeyboardFocusWithin" Value="False">
            <Setter Property="InputLanguageManager.InputLanguage" Value="fa-ir" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

它将 InputLanguage 更改为`en-us`但不返回`fa-ir`，有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:16:55.687

您还需要指定类型：

```
<Trigger Property="TextBox.IsKeyboardFocusWithin" Value="False">
     <Setter Property="TextBox.InputLanguageManager.InputLanguage" Value="fa-ir" />
</Trigger> 
```

# ruby-on-rails - Rails 清理标签和背景图像

> ID：13777440
> 
> 赞同：0
> 
> 时间：2012-12-08T12:22:26.803
> 
> 标签：ruby-on-rails, sanitize

我想在 form.text_area 中使用 html & css :text

```
 <%= sanitize @post.text , tags: %w(table tr td div p span img), attributes: %w(id class style src) %> 
```

但是 css attr "style" 不适用于背景图像。

```
<div style="color:red; background-image: url('http://tra-ta-ta.com/1.jpg')">
text 
</div> 
```

图像不起作用。我如何使用背景图像？

sanitize.rb 中的问题

```
def sanitize_css(style) # disallow urls style = style.to_s.gsub(/url\s*\(\s*[^\s)]+?\s*\)\s*/, ' ') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:38:10.930

样式属性中的 URL 字符串 "url(...)" 被强制替换为 " " by `HTML::WhiteListSanitizer`，默认清理程序。您可以实现自己的清理程序，并通过编辑 config/application.rb 让 Rails 使用它。

```
config.action_view.white_list_sanitizer = MySpecialSanitizer.new 
```

查看 ActionPack 中的以下文件以获取更多信息：

*   `actionpack-x.x.x/lib/action_view/helpers/sanitize_helper.rb`
*   `actionpack-x.x.x/lib/action_controller/vendor/html-scanner/html/sanitizer.rb`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-20T19:51:11.447

我只使用未消毒的原料

# asp.net - “TextBox”类型的控件“0”必须放在带有 runat=server 的表单标记内

> ID：13777442
> 
> 赞同：1
> 
> 时间：2012-12-08T12:22:30.963
> 
> 标签：asp.net

我创建了一个动态表（在服务器端），cols 是（irem、price、pic 和 textxbox），当我尝试添加文本框时，我得到了**'TextBox' 类型的消息控件'0' 必须放置在带有 runat=server 的表单标签内** 。

这是代码（案例4是我创建文本框的地方）：

```
 protected void createTable()
{
    int numberOfItems = mylist.Count;

    // Create a new HtmlTable object.
    HtmlTable table1 = new HtmlTable();

    // Set the table's formatting-related properties.
    table1.Border = 1;
    table1.CellPadding = 1;
    table1.CellSpacing = 1;
    table1.BorderColor = "red";

    // Start adding content to the table.
    HtmlTableRow row;
    HtmlTableCell cell;
    for (int i = 0; i < numberOfItems; i++)
    {
        // Create a new row and set its background color.
        row = new HtmlTableRow();
        row.BgColor = "lightyellow";
        row.Height = Convert.ToString(100);

        name = mylist[i].Name;
        price = mylist[i].Price;
        image = mylist[i].ImagePath;

        for (int j = 1; j <= 4; j++)
        {
            // Create a cell and set its text.
            cell = new HtmlTableCell();

            switch (j)
            {
                case 1:
                    cell.InnerHtml = name;
                    break;
                case 2:
                    cell.InnerHtml = Convert.ToString(price);
                    break;
                case 3:
                    cell.InnerHtml = image;
                    break;
                case 4:
                    TextBox txt = new TextBox();
                    txt.ID = Convert.ToString(i);
                    txt.TextMode = TextBoxMode.SingleLine;
                    txt.Attributes.Add("runat", "server");
                    cell.Controls.Add(txt);
                    break;
                default:

                    break;

            }

            // Add the cell to the current row.

            row.Cells.Add(cell);
        }

        // Add the row to the table.
        table1.Rows.Add(row);
    }

    // Add the table to the page.
    this.Controls.Add(table1);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T12:39:35.373

关于您的问题，正如错误所说，所有具有 的控件都`runat=server`必须放在具有`runat=server`标签的表单中。在您的情况下，您将使用以下行添加表（具有 server-side `Textbox`）作为页面中的***根元素***：

```
this.Controls.Add(table1); 
```

**相反，**您应该将其添加为标签*内*的元素。`<form></form>`这可以通过在主表单中添加一个 id 属性来轻松完成（例如`<form runat="server" id="myForm">`，在您的 aspx 页面中，然后，而不是`this.Controls.Add()`使用：

```
myForm.Controls.Add(table1); 
```

或者，只需在您的 aspx 页面 （例如）中的某处放置一个空`div`的，然后将表格添加到该 div：`runat=server`
`<div id=myDiv runat=server />`

```
myDiv.Controls.Add(table1); 
```

# image - Matlab用浮点值写入图像？

> ID：13777444
> 
> 赞同：4
> 
> 时间：2012-12-08T12:22:40.837
> 
> 标签：image, matlab, floating-point, tiff

我有一个`.tif`图像，其中每个像素值（单通道）都是浮点数。反正有没有用matlab（`imread`）读取它做一些操作并用浮点写回它？

如果我这样做`imwrite(I,'img.tif')`，它将转换为 8 位单通道 (0...255)

我只在 mathworks 上找到了这个样本：

```
info = imfinfo(filename); 
t = Tiff(filename, 'w'); 
tagstruct.ImageLength = size(timg, 1); 
tagstruct.ImageWidth = size(timg, 2); 
tagstruct.Compression = Tiff.Compression.None; 
tagstruct.SampleFormat = Tiff.SampleFormat.IEEEFP; 
tagstruct.Photometric = Tiff.Photometric.MinIsBlack; 
tagstruct.BitsPerSample = info.BitsPerSample; % 32; 
tagstruct.SamplesPerPixel = info.SamplesPerPixel; % 1; 
tagstruct.PlanarConfiguration = Tiff.PlanarConfiguration.Chunky; 
t.setTag(tagstruct); 
t.write(timg); 
t.close(); 
```

信息：

```
 info = 

                 Filename: [1x110 char]
              FileModDate: '04-dic-2012 12:02:07'
                 FileSize: 45720930
                   Format: 'tif'
            FormatVersion: []
                    Width: 2724
                   Height: 4193
                 BitDepth: 32
                ColorType: 'grayscale'
          FormatSignature: [73 73 42 0]
                ByteOrder: 'little-endian'
           NewSubFileType: 0
            BitsPerSample: 32
              Compression: 'Uncompressed'
PhotometricInterpretation: 'BlackIsZero'
             StripOffsets: [4193x1 double]
          SamplesPerPixel: 1
             RowsPerStrip: 1
          StripByteCounts: [4193x1 double]
              XResolution: 100
              YResolution: 100
           ResolutionUnit: 'None'
                 Colormap: []
      PlanarConfiguration: 'Chunky'
                TileWidth: []
               TileLength: []
              TileOffsets: []
           TileByteCounts: []
              Orientation: 1
                FillOrder: 1
         GrayResponseUnit: 0.0100
           MaxSampleValue: 4.2950e+09
           MinSampleValue: 0
             Thresholding: 1
                   Offset: 45720696
             SampleFormat: 'IEEE floating point'
       ModelPixelScaleTag: [3x1 double]
         ModelTiepointTag: [6x1 double]
       GeoKeyDirectoryTag: [52x1 double]
       GeoDoubleParamsTag: [3x1 double] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:44:58.843

如果您要做的是读取包含浮点数的 .tif，对其进行操作，然后再次将其写出，那么您的代码示例应该可以正常工作。只需添加读取的文件和图像处理，它应该工作得很好。

```
img = imread(in_filename)
timg = 2*timg;
info = imfinfo(in_filename); 

t = Tiff(out_filename, 'w'); 
tagstruct.ImageLength = size(timg, 1); 
tagstruct.ImageWidth = size(timg, 2); 
tagstruct.Compression = Tiff.Compression.None; 
tagstruct.SampleFormat = Tiff.SampleFormat.IEEEFP; 
tagstruct.Photometric = Tiff.Photometric.MinIsBlack; 
tagstruct.BitsPerSample = info.BitsPerSample; % 32; 
tagstruct.SamplesPerPixel = info.SamplesPerPixel; % 1; 
tagstruct.PlanarConfiguration = Tiff.PlanarConfiguration.Chunky; 
t.setTag(tagstruct); 
t.write(timg); 
t.close(); 
```

# assembly - execve shellcode 写入分段错误

> ID：13777445
> 
> 赞同：3
> 
> 时间：2012-12-08T12:22:40.883
> 
> 标签：assembly, x86, segmentation-fault, shellcode, execve

我正在尝试研究 execve shellcode，

操作系统：Linux bt 2.6.39.4

root@bt:~/exploit# cat gshell.s

```
.globl _start

_start:

    nop
    jmp MyString

    shell:

            popl %esi
            xorl %eax,%eax

            movl %al,9(%esi)
            movl %esi,10(%esi)
            movl %eax,14(%esi)

            movb $11,%al
            movl %esi, %ebx
            leal 0xa(%esi),%ecx
            leal 0xe(%esi),%edx
            int $0x80

            movl $1,%eax
            movl $0,%ebx
            int $0x80

    MyString:
            call shell
            shellvar:
                    .ascii "/bin/bashADDDDCCCC" 
```

root@bt:~/exploit# as -gstabs -o gshell.o gshell.s

root@bt:~/exploit# ld -o gshell gshell.o

root@bt:~/exploit# ./gshell 分段错误（核心转储） root@bt:~/exploit#

## 广发银行：

(gdb) break *_start Breakpoint 1 at 0x8048054: 文件 gshell.s，第 6 行。

(gdb) r 启动程序：/root/exploit/gshell

程序收到信号 SIGSEGV，分段错误。shell () at gshell.s:14 14 movb %al,9(%esi)

(gdb) 打印 /x $esi $1 = 0x804807a (gdb) x/16cb $esi 0x804807a : 47 '/' 98 'b' 105 'i' 110 'n' 47 '/' 98 'b' 97 'a' 115 's' 0x8048082 : 104 'h' 65 'A' 68 'D' 68 'D' 68 'D' 68 'D' 67 'C' 67 'C' (gdb)

从上面的输出看来我已经成功地将 /bin/sh 地址放入 ESI 寄存器但是当我尝试将 0 移动到 9(%esi) --> 它会导致分段错误。甚至试图修改这个程序：movl $0 to $esi。想知道是否限制在 0x804807a 地址写入？哪个导致这个故障？以及如何继续成功运行这个 shellcode

谢谢，小杰克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:31:40.397

正如 Bo 在他的评论中所说，该`.text`部分在当前系统上默认为只读。要使此代码正常工作，您必须使其可写。例如，您可以在源文件中使用指令，如下所示：

```
.section wtext, "awx", @progbits 
```

等效`nasm`指令是：

```
section wtext exec write 
```

或者，也可以将`-N`开关传递给链接器。

请注意，此类 shell 代码通常用于堆栈执行，这是当前操作系统中通常禁用的另一件事。如果您想在堆栈上尝试此操作，您可能需要`-z execstack`链接器选项。

# iphone - iOS：如何获取未处理的 std::exception 的堆栈跟踪？

> ID：13777446
> 
> 赞同：14
> 
> 时间：2012-12-08T12:22:56.023
> 
> 标签：iphone, ios, ipad, crash, crash-reports

如果抛出未处理的 NSException，则堆栈跟踪具有如下部分：

```
Last Exception Backtrace:
0   CoreFoundation                  0x32bd688f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x34b7b259 objc_exception_throw + 33
2   CoreFoundation                  0x32bd65c5 -[NSException init] + 1
3   Foundation                      0x37296bd7 -[NSObject(NSKeyValueCoding) valueForUndefinedKey:] + 263
... 
```

但如果 std::exception 被抛出，我只得到这个：

```
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x34f2632c __pthread_kill + 8
1   libsystem_c.dylib               0x31e4c208 pthread_kill + 48
2   libsystem_c.dylib               0x31e45298 abort + 88
3   libc++abi.dylib                 0x33bcaf64 abort_message + 40
4   libc++abi.dylib                 0x33bc8346 default_terminate() + 18
5   libobjc.A.dylib                 0x349f4368 _objc_terminate + 164
6   libc++abi.dylib                 0x33bc83be safe_handler_caller(void (*)()) + 70
7   libc++abi.dylib                 0x33bc844a std::terminate() + 14
8   libc++abi.dylib                 0x33bc981e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x349f42a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x329a5506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x329a5366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x32af2432 GSEventRunModal + 130
13  UIKit                           0x34f84cce UIApplicationMain + 1074
14  APP_NAME                            0x00086b10 main (main.m:68)
15  APP_NAME                        0x00071b98 start + 32 
```

如何从此崩溃日志中获取确切的崩溃信息？

更新 -

我给了 HockeyApp 一个机会，但它与 iTunes 崩溃日志具有相同的限制——它不会告诉我未处理的 C++ 异常的堆栈。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-09T01:55:45.710

您看到的是 AppKit 和 UIKit 的一个不幸的怪癖。iOS 和 OS X 都有一个异常处理程序，`CFRunLoop`用于捕获所有未捕获的异常。在 OS X 上，处理程序通过对话框向用户显示异常，但在 iOS 上，处理程序只是重新抛出异常。

由 实现的 Objective-C 异常`NSException`在实际“抛出”发生之前将它们的回溯保存在异常对象中，作为`[NSException init]`（或类似的初始化方法）的一部分。不幸的是，C++ 异常不会做同样的事情。通常，C++ 异常有一个回溯，因为运行时库检测到没有`catch`并立即调用`std::terminate`，这反过来又调用`abort()`，使整个调用堆栈保持不变，如下所示：

```
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff93ef8d46 __kill + 10
1   libsystem_c.dylib               0x00007fff89968df0 abort + 177
2   libc++abi.dylib                 0x00007fff8beb5a17 abort_message + 257
3   libc++abi.dylib                 0x00007fff8beb33c6 default_terminate() + 28
4   libobjc.A.dylib                 0x00007fff8a196887 _objc_terminate() + 111
5   libc++abi.dylib                 0x00007fff8beb33f5 safe_handler_caller(void (*)()) + 8
6   libc++abi.dylib                 0x00007fff8beb3450 std::terminate() + 16
7   libc++abi.dylib                 0x00007fff8beb45b7 __cxa_throw + 111
8   test                            0x0000000102999f3b main + 75
9   libdyld.dylib                   0x00007fff8e4ab7e1 start + 1 
```

但是，当运行循环异常处理程序捕获异常时，执行会在`catch`块内正常恢复。因此，原始回溯丢失。rethrow 随后调用`std::terminate`，但此时，调用堆栈反映了运行循环异常处理程序。

在这种情况下，要从 C++ 异常中获取回溯，您必须抛出一个异常对象，该对象模仿`NSException`并读取调用堆栈作为其构造函数的一部分，并确保代码中抛出的所有异常都执行相同的操作。`std::exception`不会这样做，而且您使用的任何第三方代码也不可能这样做。

向 Apple 提交一个错误，要求他们删除`CFRunLoop`异常处理程序，或者至少提供一个 API 来关闭它。目前没有 API，甚至没有 SPI 来执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-20T04:07:13.237

我很幸运能改进 mpipe3 的答案。

在我的 main 方法中，我使用 try-catch 来获取 C++ 异常，然后调用`dispatch_sync`on `dispatch_get_global_queue`。现在带有行号的完整堆栈跟踪将显示在 Crashlytics（崩溃管理器）上。

```
int main(int argc, char *argv[]) {

@autoreleasepool {
    @try{
        return UIApplicationMain(argc, argv, nil, @"AppControllerClassName");
    } @catch (NSException *exception) {/* Catch any uncaught exceptions and print out a friendly call stack. Instead of an ugly memory addresses. */
        NSString * message = [NSString stringWithFormat:@"Uncaught exception %@ : %@\n %@", exception.name, exception.reason, [exception callStackSymbols]];
        [LogManager e:@"main.m" Message:message Exception: exception];
        @throw;
    } @catch (...){
        //Attempt to get the correct stacktrace for C++ exceptions.
        dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
            @throw;
        });
    }
    return 0;
}
} 
```

这是因为它通过使用 GCD 抛出异常来避免 CFRunLoop 异常处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T15:43:23.393

继 Gwynne Raskind 的回答之后，您可以通过使用 GCD 同步调度对 C++ 代码块的调用来避免 CFRunLoop 异常处理程序：

```
namespace
{
    void MyThrowingCode()
    {
        throw std::runtime_error("My Exception");
    }

}

- (void)objcHandlerCalledFromARunLoop
{
   dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        MyThrowingCode();
         });
} 
```

您可能需要创建自己的队列，而不是使用单个共享队列。

崩溃日志如下所示：

```
0   libsystem_kernel.dylib          0x3aa39350 __pthread_kill + 8
1   libsystem_c.dylib               0x3a9affb2 pthread_kill + 54
2   libsystem_c.dylib               0x3a9ec366 abort + 90
3   libc++abi.dylib                 0x39f94dda abort_message + 70
4   libc++abi.dylib                 0x39f92094 default_terminate() + 20
5   libobjc.A.dylib                 0x3a545a70 _objc_terminate() + 168
6   libc++abi.dylib                 0x39f92118 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x39f921b0 std::terminate() + 16
8   libc++abi.dylib                 0x39f9359a __cxa_throw + 118
9   Test                            0x000fddfc MyThrowingCode() (MainViewController.mm:177)
10  Test                            0x000fe38c __35-[MainViewController toolsClick:]_block_invoke (MainViewController.mm:184)
11  libdispatch.dylib               0x3a95f5d8 _dispatch_client_callout + 20
12  libdispatch.dylib               0x3a962776 _dispatch_sync_f_invoke + 22
13  Test                            0x000fde90 -[MainViewController toolsClick:] (MainViewController.mm:183)
14  UIKit                           0x34744082 -[UIApplication sendAction:to:from:forEvent:] + 66
15  UIKit                           0x3474410c -[UIBarButtonItem(UIInternal) _sendAction:withEvent:] + 116
16  UIKit                           0x34744082 -[UIApplication sendAction:to:from:forEvent:] + 66
17  UIKit                           0x34744036 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 26
18  UIKit                           0x34744010 -[UIControl sendAction:to:forEvent:] + 40
19  UIKit                           0x347438c6 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 498
20  UIKit                           0x34743db4 -[UIControl touchesEnded:withEvent:] + 484
21  UIKit                           0x3466c5f4 -[UIWindow _sendTouchesForEvent:] + 520
22  UIKit                           0x346598dc -[UIApplication sendEvent:] + 376
23  UIKit                           0x346591ea _UIApplicationHandleEvent + 6194
24  GraphicsServices                0x363715f4 _PurpleEventCallback + 588
25  GraphicsServices                0x36371222 PurpleEventCallback + 30
26  CoreFoundation                  0x3281f3e4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
27  CoreFoundation                  0x3281f386 __CFRunLoopDoSource1 + 134
28  CoreFoundation                  0x3281e20a __CFRunLoopRun + 1378
29  CoreFoundation                  0x32791238 CFRunLoopRunSpecific + 352
30  CoreFoundation                  0x327910c4 CFRunLoopRunInMode + 100
31  GraphicsServices                0x36370336 GSEventRunModal + 70
32  UIKit                           0x346ad2b4 UIApplicationMain + 1116
33  Test                            0x00120462 main (main.mm:55)
34  libdyld.dylib                   0x3a972b1c start + 0 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-09T02:01:03.757

看起来异常是从 UIApplicationMain() 内部发生的...您可以尝试将 main.m 文件转换为 main.mm 文件，然后执行以下操作：

```
int main(...)
{
    try
    {
        return UIApplicationMain(...);
    }
    catch( exception e )
    {
        cerr < e.what() ;
    }
} 
```

然而我并没有真正*尝试*过...

# mysql - 使用mysql显示两个日期范围之间的所有日期

> ID：13777447
> 
> 赞同：0
> 
> 时间：2012-12-08T12:23:01.213
> 
> 标签：mysql, sql, gaps-and-islands

> **可能重复：**
> [MySQL 如何在范围内填充缺失的日期？](https://stackoverflow.com/questions/3538858/mysql-how-to-fill-missing-dates-in-range)

我有一个名为“trip_data”的表。它有四个字段

```
|trip_paramid|fuel_content|creation_time|vehicle_id 
```

我想生成一个报告，以便输入参数将是 FromDate 和 ToDate。所以输出应该包含 FromDate 和 ToDate 之间的所有日期（creation_time）以及每个日期对应的 Maximum fuel_content。如果某个日期没有相应的fuel_content，那么fuel_content应该显示为“NIL”。我如何在MySQL中为此编写查询。所以我需要一个查询来显示两个日期范围之间的所有日期，即使没有相应的数据。“以下是示例此表的架构和数据。 [http://sqlfiddle.com/#!2/d6d207](http://sqlfiddle.com/#!2/d6d207)

# php - HTML 到 PDF 转换器 - Html2PDF - 如何减小结果 PDF 的大小？

> ID：13777449
> 
> 赞同：2
> 
> 时间：2012-12-08T12:23:14.527
> 
> 标签：php, html, pdf, large-files

我正在使用 HTML2PDF 转换器将网页导出为 PDF 文件。我面临的问题是结果 PDF 太大（超过 1 MB）。我想减少它，所以这就是我基本上拥有的：

1.  2 张图片（均为 100 KB）
2.  1 种 Courier 保加利亚字体 - 添加
3.  3 个表格，每个单元格有很多内联样式

这些事情会导致输出PDF的大尺寸吗？任何人都可以与图书馆分享一些经验和最佳实践，以便获得更小的 PDF。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:52:14.637

我已经设法找到导致我的输出 PDF 文件大的原因。它持续的字体。

对于我的任务，我使用了 courier bulgarian（斜体，正常和粗体）。这意味着我嵌入了三种额外的字体。

还有更多，我不知道，但是 helvica 是这个 PHP 库的默认字体，虽然我没有使用它，但它也嵌入到了 PDF 中。

如果您遇到同样的问题，请打开所有具有“helvica”的文件，并将“helvica”字体替换为您正在使用的字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:07:23.717

首先...

*   有一个单独的页面用于打印和显示 - 用于打印。
*   打印时使用 Ptint.CSS 并包含尽可能少的类

*   在这三个表中。Keep 只需要 CSS 中的类。请使用压缩图像进行打印，例如，如果您在显示中有 BMP，则使用 PNG 进行打印。

*   使用 TR-TD 使表格变得简单，并减少它们的色彩。不要放入内联 CSS。

这可以帮助您将 PDF 保存为压缩版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T15:08:53.607

如果您可以访问 Adob​​e Acrobat，它可以让您查看 PDF 并查看哪些区域使用了多少空间百分比。这将告诉您图像、字体等占用了多少空间...如果您提供示例 PDF，我将很乐意查看它。

不同对象使用 PDF 中的多少空间实际上取决于 PDF 的编写方式以及它使用不同压缩算法的效率。例如，图像可以是 ZIP、JPEG 甚至 JPEG-2000 压缩成 PDF，问题是 HTML2PDF 对您的图像做了什么。

字体也可以很大——取决于原始字体的大小。

页面内容（具有内联样式等的表格）以精简的文本格式编写（例如`1 0 0 rg`，将文本和线条的填充颜色设置为红色的指令）。通常高效的 PDF 编写者会编写所有这些文本指令，然后对它们进行 ZIP 压缩，这意味着它们不会在文件中占据太多位置。

因此，您确实需要查看 PDF 文件本身以了解空间的使用位置。这将允许您开始查看库，看看它是否可以提高效率。

# mysql - 将 varchar() 限制在 az 范围内

> ID：13777456
> 
> 赞同：0
> 
> 时间：2012-12-08T12:24:03.977
> 
> 标签：mysql, database, constraints

我正在实施和设计我的第一个数据库，并且有很多包含名称和地址等的列。

对这些列施加约束似乎是合乎逻辑的，`CHECK`这样 DB 只接受来自字母数字范围的值（不允许任何特殊字符）。

我正在使用 MySQL，据我所知它不支持用户定义的类型，有没有简单的方法可以做到这一点？

防止不良数据进入数据库似乎是值得的，但是是否应该将这种复杂的检查转移到应用程序中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:46:36.133

如果您使用的是 mysql ，则不能使用 CHECK 约束来执行此操作（问题被标记为[mysql](/questions/tagged/mysql "显示标记为“mysql”的问题")，所以我认为是这种情况）- mysql 不支持检查约束。它们在语法中是允许的（与来自其他数据库的 DDL 兼容），但在其他方面被忽略。

您可以将触发器添加到在插入和更新时触发的表中，以检查数据的合规性，但是如果您发现问题，则无法从 mysql 存储过程中引发异常。

我使用了一种解决方法，即点击一个不存在的表，但其名称可以传达您想要的含义，例如

```
update invalid_characters set col1 = 1; 
```

并希望阅读“table invalid_characters 不存在”消息的人明白这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:50:29.470

有[几个设置](http://www.tutorialsolve.com/2009/07/23/tutorial-for-mysql-data-validation/)允许您更改 MySQL 如何处理特定情况（但这些还不够）。

我会坚持在应用程序端进行数据验证，但如果您需要在数据库端进行验证，您有两种选择：

*   [`CREATE PROCEDURE`](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)这将验证和插入数据，什么都不做或通过调用引发错误[`SIGNAL`](http://dev.mysql.com/doc/refman/5.5/en/signal.html)
*   [`CREATE TRIGGER ... BEFORE INSERT`](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)这将验证数据并停止插入，就像这个[stackoverflow 答案中建议的那样](https://stackoverflow.com/a/8559284/1149736)

# syntax - Lua：如何使用表中的所有表

> ID：13777461
> 
> 赞同：0
> 
> 时间：2012-12-08T12:24:51.073
> 
> 标签：syntax, lua, lua-table

```
positions = {
--table 1
[1] = {pos = {fromPosition = {x=1809, y=317, z=8},toPosition = {x=1818, y=331, z=8}}, m = {"100 monster"}},
--table 2
[2] = {pos = {fromPosition = {x=1809, y=317, z=8},toPosition = {x=1818, y=331, z=8}}, m = {"100 monster"}},
-- table3
[3] = {pos = {fromPosition = {x=1809, y=317, z=8},toPosition = {x=1818, y=331, z=8}}, m = {"100 monster"}}
}

    tb = positions[?]--what need place here?

for _,x in pairs(tb.m) do --function
    for s = 1, tonumber(x:match("%d+")) do
    pos = {x = math.random(tb.pos.fromPosition.x, tb.pos.toPosition.x), y = math.random(tb.pos.fromPosition.y, tb1.pos.toPosition.y), z = tb.pos.fromPosition.z}
    doCreateMonster(x:match("%s(.+)"), pos)
    end
    end 
```

这里的问题是，我使用 tb = position[1]，它只用于“位置”表中的一个表。但是如何将此函数应用于此表中的所有表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:38:13.020

`positions`您需要使用数字进行迭代`for`。

请注意，与 Antoine Lassauzay 的回答不同，循环从**1**而不是**0**开始，并使用`#`运算符而不是`table.getn`（Lua 5.1 中不推荐使用的函数，在 Lua 5.2 中删除）。

```
for i=1,#positions do
  tb = positions[i]
  ...
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:52:15.180

我不太了解 Lua，但您可以遍历表格：

```
for i = 0, table.getn(positions), 1 do
     tb = positions[i]
     ...
end 
```

资料来源： http: [//lua.gts-stolberg.de/en/schleifen.php](http://lua.gts-stolberg.de/en/schleifen.php)和[http://www.lua.org/pil/19.1.html](http://www.lua.org/pil/19.1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T15:14:21.497

使用内置的pairs()。没有任何理由在这里进行数字 for 循环。

```
for index, position in pairs(positions) do
    tb = positions[index]
    -- tb is now exactly the same value as variable 'position'
end 
```

# android - Android SMS收件箱未读计数问题

> ID：13777462
> 
> 赞同：1
> 
> 时间：2012-12-08T12:25:04.493
> 
> 标签：android, sms

我创建了一个对传入 SMS 消息作出反应的小 Android 应用程序。问题是我似乎无法可靠地获取收件箱中未读邮件的数量。

这是说明问题的最低限度的课程。有时它会打印“收到短信！未读计数：0”，有时会打印“收到短信！未读计数：1”。对我来说，如果每当程序流输入该命令时，未读计数总是至少为 1，这将显得更合乎逻辑。我一直在通过从一个模拟器向另一个模拟器发送 SMS 消息来测试这一点（你可以通过将消息发送到模拟器号码来做到这一点——比如 5554）。

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.util.Log;

public class SmsReceiver extends BroadcastReceiver {
private static final String SMS_RECEIVED_ACTION = "android.provider.Telephony.SMS_RECEIVED";

@Override
public void onReceive(Context context, Intent intent) {
    Log.d("onReceive", "Got something: "+intent.getAction());
    if (!SMS_RECEIVED_ACTION.equals(intent.getAction())) {
        Log.d("onReceive", "Returning.");
        return;
    }
    Log.d("onReceive", "Got SMS! Unread count: " + getNumberOfUnreadMessages(context));
    // Do stuff
}

public int getNumberOfUnreadMessages(Context context) {
    final Uri SMS_INBOX_URI = Uri.parse("content://sms/inbox");
    Cursor inboxCursor = context.getContentResolver().query(SMS_INBOX_URI, null, "read = 0", null, null);
    int unreadMessagesCount = inboxCursor.getCount();
    inboxCursor.close();
    return unreadMessagesCount;
}
} 
```

最后，这是 AndroidManifest.xml 文件中的相关部分：

```
<receiver android:name=".SmsReceiver" >
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

如何获得正确数量的未读消息？

**编辑/添加：**或者，如果是在保存 SMS 之前发送广播的情况，有没有办法订阅应用程序以监听新 SMS 消息保存到收件箱的事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T13:52:29.723

如果您想观察短信收件箱，请使用这样的 ContentObserver：

OnCreate() ：

```
contentObserver observer = new contentObserver(handler);
getContentResolver().registerContentObserver(Uri.parse("content://sms/inbox"), true, observer); 
```

创建一个新的内部类或外部类：

```
public class contentObserver extends ContentObserver {

    public contentObserver(Handler handler) {
        super(handler);
        // you can use a handler if you want or directly do everythinh onChange();
    }

    @Override
    public void onChange(boolean selfChange) {
        // Do your stuff here
        super.onChange(selfChange);
    }
} 
```

OnDestroy() ：

```
getContentResolver().unregisterContentObserver(observer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:16:31.257

我遇到过同样的问题。当您实际收到短信时，似乎会触发 BroadcastReceiver。这可以在 SmsManager 将消息写入数据库之前。

在收到广播后等待几秒钟，或者手动记录收到广播的次数并增加计数，保存到私有 SharedPreferences 并在用户阅读消息时减少计数。

# c++ - 从函数有条件地返回对象类型

> ID：13777468
> 
> 赞同：2
> 
> 时间：2012-12-08T12:26:02.730
> 
> 标签：c++, templates, c++03

有没有办法从 C++ 中的函数返回*类型？*例如，我想使用类似的东西：

```
// sample pseudo-code: NOT valid C++
template<typename Type1, typename Type2>
type??? getType(bool choice) {
    if(choice == true) {
        return Type1;
    } else {
        return Type2;
    }
}

bool useAwesome = true;

// `Regular` and `Awesome` are classes
getType<Awesome, Regular>(useAwesome) theObject; 
```

`if`声明不起作用，因为：

```
if(useAwesome) {
    Awesome theObject;
} else {
    Regular theObject;
}
// theObject goes out of scope! 
```

我已经阅读了“一等公民”并且知道数据类型不是，但是会以`template`某种方式使用帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:31:51.087

如果您*需要*在运行时选择类型，通常会使用继承：

```
class Base {};

class Awesome : public Base;
class Regular : public Base;

Base *ObjectPointer;

if (useAwesome)
    ObjectPointer = new Aweseome;
else
    ObjectPointer = new Regular;

Base &theObject = *ObjectPointer; 
```

使用完 后`theObject`，请务必使用`delete ObjectPointer;`（或`delete &theObject;`）。

请注意，要完成很多工作，您通常需要定义一个公共接口来使用其中一个`Regular`或`Awesome`通过它们的公共基类的功能。您通常会通过在基类中声明（通常是纯）虚函数，然后在派生类中实现这些函数来做到这一点。至少，您需要在基类中声明析构函数 virtual（否则，当您尝试通过指向基类的指针删除对象时，您将获得未定义的行为）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T12:29:35.593

不，你不能那样做。C++ 中的类型必须在编译时知道，而不是在运行时知道。您可以`typeid`从函数返回，但不能使用它`typeid`来声明相应类型的变量。

# python - 使用 python 的 TSP

> ID：13777469
> 
> 赞同：4
> 
> 时间：2012-12-08T12:26:11.837
> 
> 标签：python, traveling-salesman

我的作业是想出解决旅行者推销员问题的python程序。在课堂上，他们解释了它应该如何工作并展示了一个例子。

```
path_map = [[0,10,15,20],
        [5,0,9,10],
        [6,13,0,12],
        [8,8,9,0]] 
```

这是一个示例地图，我认为这是一个流行的问题，我可以在互联网上找到解决这个问题的算法。但我做不到。我尝试了自己的版本。但我失败了。任何帮助将不胜感激。这是我到目前为止所拥有的

```
class TSP:

def __init__(self, init, path_map):
    self.init = init
    self.cost = 0
    self.path_map = path_map
    self.vertices = [i for i in range(1,len(path_map)+1)]

def min_path(self, start):
    if not self.vertices:
        return self.path_map[start-1][init-1]
    else:
        m = [i for i in range(len(self.vertices)+1)]
        i=0
        for v in self.vertices:
            tv = self.vertices.pop(v-1)
            m[i]=self.cost + self.min_path(v)
            self.vertices.insert(v-1,tv)
            i = i + 1
        self.cost = self.cost + min(m)

    return cost ` 
```

当我尝试运行它时，我得到了什么：

```
>>> t = TSP(1,path_map)
>>> t.min_path(1)
Traceback (most recent call last):
  File "<pyshell#54>", line 1, in <module>
    t.min_path(1)
  File "/home/wanhrust/python/TSP.py", line 42, in min_path
    m[i]=self.cost + self.min_path(v)
  File "/home/wanhrust/python/TSP.py", line 42, in min_path
    m[i]=self.cost + self.min_path(v)
  File "/home/wanhrust/python/TSP.py", line 42, in min_path
    m[i]=self.cost + self.min_path(v)
  File "/home/wanhrust/python/TSP.py", line 41, in min_path
    tv = self.vertices.pop(v)
IndexError: pop index out of range 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:29:23.173

1.  生成大量随机解决方案。
2.  按长度对这些解决方案进行排序。
3.  删除最差的 50%
4.  以某种方式将最好的 50% 相互结合（将它们拼接在一起）
5.  转到 2。

重复此操作，直到获得稳定的解决方案。它（几乎可以肯定）不会是最佳的，但它会比随机的要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T04:51:35.717

IndexError: pop index out of range - 迭代索引不存在列表的情况，例如list = [1,2,3]，有3个元素，你尝试获取list[10]，你会得到那个错误

# php - 从文本文件生成随机 Youtube URL 并使用 PHP 嵌入

> ID：13777474
> 
> 赞同：0
> 
> 时间：2012-12-08T12:27:00.110
> 
> 标签：php

我的目标是在我的网站的侧边栏上有一个小部件，每次刷新时都会生成一个随机视频。

我创建了一个包含 (50) 个 youtube URL 列表的文本文件，并且我正在使用 PHP 从该文本文件夹中提取随机行。

但是，我在此返回行（第 2 行）上不断收到语法错误，无法弄清楚原因。我错过了什么，和（或）有没有更有效的方法绕过这段代码？

```
<?  

$lines = file('code.txt');
      return "<iframe width="250151" height="315" src="$lines[array_rand($lines)]" frameborder="0" allowfullscreen></iframe>";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:29:58.330

你需要逃避你的报价。

```
return "<iframe width=\"250151\" height=\"315\" src=".$lines[array_rand($lines)]." frameborder=\"0\" allowfullscreen></iframe>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:31:32.240

好的，您需要确保使用正确的语法将变量嵌入到字符串中。

```
return '<iframe width="250151" height="315" src="'.$lines[array_rand($lines)].'" frameborder="0" allowfullscreen></iframe>'; 
```

请注意，我使用`.`连接将字符串的两侧与中间的变量组合在一起。您需要将返回命令的引号更改为单引号，以便将双引号保留在 HTML 内容中。

# magento - Magento“必须收集报价总计”由于原型Form.serizalize在结帐中失败而导致的异常

> ID：13777478
> 
> 赞同：13
> 
> 时间：2012-12-08T12:27:12.920
> 
> 标签：magento, serialization, prototypejs

一个间歇性且看似随机的错误正在影响至少三个不同站点上的 Magento 结帐。Magento 论坛上有许多关于此主题的主题，但有一些不好的建议（吞下例外）。该问题导致销售损失，并导致网站所有者非常沮丧。[自 2011 年 3 月 ( http://www.magentocommerce.com/bug-tracking/issue/?issue=11081](http://www.magentocommerce.com/bug-tracking/issue/?issue=11081) )以来，此问题已被 Magento 记录。

支付方式、浏览器、Magento 版本或我们试图关联的其他因素中没有任何模式。主要症状是 var/log/exception.log 中记录的异常，其中指出“必须收集报价总计”，该异常被抛出`Mage_Sales_Model_Quote::prepareRecurringPaymentProfiles()`。

我们记录了异常发生时的请求参数，并确定`payment`参数为空。我们认为 Magento 在客户单击下订单时从付款步骤重新发送表单元素（因此信用卡详细信息不会在 AJAX 请求之间保留在网站上），并且表单序列化失败并返回 null /empty，然后 opcheckout.js 代码将其传递给 PHP 以触发异常。

您能否建议哪些条件或数据会导致原型`Form.serialize`方法以这种方式失败和/或如何进一步解决该问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T13:45:09.453

实际上，可能的原因很少。

Prototype 的`Form.serialize()`方法是使用同一个类中的另一个方法，称为`Form.getElements()`. 您也可以尝试以下代码，看看从 payment.form 对象传递了哪些元素。只需`review.save()`在运行时覆盖方法即可进行调试。

您可以将以下代码粘贴到您喜欢的浏览器（Chrome、Firefox 或 Safari）的控制台中：

```
review.save = review.save.wrap(function (originalMethod) {
    console.log(payment.form); // Check what is in the form object
    console.log(Form.getElements(payment.form)); // Check what items are returned for serializing
    originalMethod(); // Calling original place order functionality to see if the issue occurs, so you can compare above debug info
}); 
```

我认为它将帮助您找出序列化过程的问题。付款表格可能会以某种方式变空，或者表格中的所有项目都被禁用等等......

真诚的，伊万

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T16:59:27.353

我遇到了类似的问题。要通过简单的步骤解决此问题，请打开数据库，现在数据库 << table 'core_config_data' 并将路径 'design/email/header' 和 'design/email/footer' 的值从 '2' 更改为 '0'。

结帐流程现在可以正常工作......为我工作！

# javascript - Mootools 打破 Panoramio Javascript API

> ID：13777485
> 
> 赞同：2
> 
> 时间：2012-12-08T12:28:35.713
> 
> 标签：javascript, joomla, mootools, panoramio

我正在尝试使用 Panoramio 的 JavaScript API，但在使用 MooTools 框架时它无法显示。[在这个 jsFiddle](http://jsfiddle.net/DEWvZ/1/)上使用 Chrome 的检查功能会在包含的 JavaScript 中显示此错误：

```
Uncaught SyntaxError: Invalid regular expression: /function (keys){
    var obj = {}, length = Math.min(this.length, keys.length);
    for (var i = 0; i < length; i++) obj[keys[i]] = this[i];
    return obj;
}/: Nothing to repeat 
```

我尝试使用 API 的站点是 Joomla 2.5，因此使用了 MooTools 框架。将小提琴上的框架更改为 jQuery 或将其完全删除会产生图片并且不会出现错误。

我试图以某种方式合并 jQuery 的 noConflict() 函数，并为 MooTools 搜索了类似的函数，但没有成功。

任何解决此问题的建议都将受到欢迎。还是 Panoramio 的 JavaScript API 本身的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:44:27.600

MooTools 添加了一堆函数，`Array.prototype`而不阻止它们被枚举。这意味着它们出现`for-in`在数组的循环中。

Panoramio JavaScript 似乎在`for..in`不允许这样做的情况下在数组上使用，因为错误消息包含`associate`MooTools 添加的函数的来源：

```
// (Result of `String(Array.prototype.associate)` when MooTools is loaded
function (keys){
    var obj = {}, length = Math.min(this.length, keys.length);
        for (var i = 0; i < length; i++) obj[keys[i]] = this[i];
        return obj;
} 
```

这是 Panoramio 脚本中的一个错误，不应该在**没有**正确保护措施的情况下循环使用`for..in`数组。请参阅*（来自我的博客）*[*的神话和现实`for..in`*](http://blog.niftysnippets.org/2010/11/myths-and-realities-of-forin.html) 。如果您可以获得 Panoramio 脚本的未压缩版本，您可能可以修复相关循环。

 *有些人还会争辩说，MooTools 将可枚举属性添加到`Array.prototype`.

* * *

[Dimitar Christoff](https://stackoverflow.com/users/126998/dimitar-christoff)在评论中指出*（感谢 Dimitar！）*，如果您在加载 MooTools*后加载 Panoramio 脚本，它可以工作：http:* [//jsfiddle.net/DEWvZ/2/](http://jsfiddle.net/DEWvZ/2/)但请注意，如果您稍后调用 Panoramio，一次MooTools 已加载，那些*可能会*失败，因为如果他们在一个地方犯了错误（初始化），他们很可能也会在其他地方犯错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T08:35:08.913

这个 Panoramio JavaScript API 小部件。

另一种 Panoramio JavaScript API 小部件，您还可以在其中通过[示例和代码](http://codespk.blogspot.com/2013/10/panoramio-javascript-api-widget-example.html)更改背景颜色。

我创建了一个[blogspot 页面](http://discoverworldz.blogspot.com/)，在其中创建了许多 Panoramio JavaScript 和 HTML API 小部件。

它不会在作曲情绪中显示。它在发布后显示。我在我的 blogspot 网站上使用过它。它的工作。

```
<div dir="ltr" style="text-align: center;" trbidi="on">
<script src="https://ssl.panoramio.com/wapi/wapi.js?v=1&amp;hl=en"></script>
<div id="wapiblock" style="float: right; margin: 10px 15px"></div>
<script type="text/javascript">
var myRequest = {
  'tag': 'kahna',
  'rect': {'sw': {'lat': -30, 'lng': 10.5}, 'ne': {'lat': 50.5, 'lng': 30}}
};
  var myOptions = {
  'width': 300,
  'height': 200
};
var wapiblock = document.getElementById('wapiblock');
var photo_widget = new panoramio.PhotoWidget('wapiblock', myRequest, myOptions);
photo_widget.setPosition(0);
</script>
</div> 
```*

# android - 使用内部存储中的可序列化对象会导致内存泄漏？如何避免

> ID：13777486
> 
> 赞同：1
> 
> 时间：2012-12-08T12:28:35.950
> 
> 标签：android

我搜索了一个解决方案，但没有找到。我将包含我的 Name 对象的 ArrayList 写入文件，检索到的 ArrayList 稍后将被不同的活动用于相同的目的。此对象是单独包中的单独类。我用 ObjectOutputStream 编写 ArrayList，然后关闭 FileOutpoutStream 和 ObjectOutputStream。我在一个活动的一生中做了很多次。

对象是这样的：

```
public class Name implements Serializable{

private static final long serialVersionUID = 7526472295622776147L;
String name;
int id;

public Name (String name, int id){

    this.name = name;
    this.id = id;
}

public String getName(){
    return this.name;
}

    public String getId(){
    return this.id;
} 
```

当我想检索它时，我创建了一个 Name 对象的新 ArrayList 并使用 ObjectInputStream 添加元素

```
ArrayList<Name> array = new ArrayList<Name>();
array.addAll((ArrayList<Name>)ois.readObject()); 
```

我避免做

```
array = (ArrayList<Name>) ois.readObject(); 
```

我以为不会有这种方式的参考。

然后我关闭 FileInputStream 和 ObjectInputStream。我也在活动的生命周期中多次这样做。

当我用 Eclipse 检查 MAT 时，直方图显示内存包含许多 Name 对象，因此阻止了活动以破坏它们自己。

我尝试在关闭它们之前重置（）流，我也尝试了相反的方法，尝试仅在不关闭的情况下重置（），我尝试了相同的 onDestroy（），但是每个操作都会导致异常和不需要的行为。

更改序列号不起作用，它不会写入或给出异常，因此序列号似乎必须保持静态并且不得删除。

考虑到这个 ArrayList 必须存储在存储中并与不同的活动共享，我应该如何处理这个问题？我应该使用 SharedPreferences 还是其他什么？

# c++ - 未优化的基类上的复制构造函数

> ID：13777491
> 
> 赞同：3
> 
> 时间：2012-12-08T12:29:12.660
> 
> 标签：c++, optimization, iterator

我正在查看我的迭代器类的反汇编，如下所示，它是用最大的编译器优化编译的。

```
class MY_ITR : public std::iterator< std::forward_iterator_tag, MY_TYPE* > {
public:
    MY_ITR();
    MY_ITR(const MY_TYPE2*, int);

    // standard iterator impl

private:
    static const int N = 3;
    int m_data[N];
}; 
```

我注意到一个看起来像复制构造函数的额外函数调用。果然，经过一番挖掘，我发现有人修改了 std::_Iterator_Base 类，使其包含空构造函数、复制构造函数和赋值运算符（？！？！）。在进行此编辑时（很久以前），它是为了规避代码检查工具中的警告。

```
namespace std {
struct _Iterator_Base {
    _Iterator_Base() {}
    _Iterator_Base(const _Iterator_Base& rhs) {}
    _Iterator_Base& operator =(const _Iterator_Base& rhs) { return *this; }
};

template <...>
struct iterator : _Iterator_Base {
    // typedefs
};

... 
```

删除 _Iterator_Base 的实现会导致额外的函数调用消失。我知道 MY_ITR 的复制构造函数的默认实现需要调用 _Iterator_Base 的复制构造函数，但我一生都无法弄清楚为什么编译器无法优化它。

# php - 使用会话错误登录

> ID：13777499
> 
> 赞同：0
> 
> 时间：2012-12-08T12:31:05.903
> 
> 标签：php, mysql, session, login

我已经使用与我的 sql 数据库的会话创建了登录系统。当我输入正确的用户名和密码时，我可以登录。但是当我输入错误时，它没有显示`Incorrect username or password`消息，它停留在 checklogin.php 页面（空白页面）。我该如何解决这个问题？这是 checklogin.php：

```
session_start();
$mypassword=$_POST['mypassword'];
$myusername=$_POST['myusername'];

    $dbh = new PDO("mysql:host=$hostname;dbname=...", $username, $password);
    $sql = "select * from user where username='$myusername' and password='$mypassword' ";
    foreach ($dbh->query($sql) as $row){

if (isset($myusername) && isset($mypassword)) {
  if (($row['username']==$myusername) && ($row['password']==$mypassword)) {
    $_SESSION['login']='true';
    echo "Login successfully";
    echo"<a href='log_out.php'>Logout</a>";
    }else{
    echo "Incorrect username or password";
    }
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:39:36.460

我在您的代码中看到了一些奇怪的东西：一方面是 PDO 连接，另一方面是 mysql_real_escape_string。

因此，为了使您的代码更具可读性，我将使用带有 PDO 的准备好的语句：

```
session_start();
$mypassword=$_POST['mypassword'];
$myusername=$_POST['myusername'];
$dbh = new PDO("mysql:host=$hostname;dbname=", $username, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
$sql = "select * from user where username=:myusername AND password=:mypassword ";
$statement = $dbh->prepare($sql);
$statement->execute(array(':myusername'=>$myusername,':mypassword'=>$mypassword));
if($row = $statement->fetch(PDO::FETCH_ASSOC)){//if there is someone with given informations 
  echo "Welcome !";
else{
   echo "Wrong password or identifier";
} 
```

如您所见，我确实执行了查询（使用准备/执行或使用查询），然后我使用 fetch 来获取结果。使用 PDO 有一个函数 fetchAll，它允许您获取整个结果数组，以便您可以使用 foreach 而不是 while 循环遍历它。

然后，我的代码遗漏了一些东西：您没有在连接字符串中提供您的数据库名称，所以它不起作用。

我还添加了一行来处理错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T12:52:01.323

```
$row=$dbh->query($sql);
if ($row['username']='' && $row['password']!='') {
  if (($row['username']==$myusername) && ($row['password']==$mypassword)) {
    $_SESSION['login']='true';
    echo "Login successfully";
    echo"<a href='log_out.php'>Logout</a>";
    }else{
    echo "Incorrect username or password";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T12:55:04.220

仅计算返回的结果`$sql`就足以检查用户凭据。如果计数为 1，则用户应登录，否则`Incorrect Password or Username`应显示消息。

```
session_start();
$mypassword=$_POST['mypassword'];
$myusername=$_POST['myusername'];
$dbh = new PDO("mysql:host=$hostname;dbname=...", $username, $password);
$sql = "select count(*) from user where username='$myusername' and password='$mypassword'";
if (isset($myusername) && isset($mypassword))
{
 $nRows = $dbh->query($sql)->fetchColumn(); 
 $count= (int) count($nRows);

 // If result matched $myusername and $mypassword, table row must be 1 row
 if($count==1){
 // Register $myusername, $mypassword and redirect to file "login_success.php"
 $_SESSION['login']='true';
 header("location:login_success.php");
 }
 else {
 echo "Wrong Username or Password";
 }
}
else {
 echo "Please enter Password and Username";
  } 
```

我建议您检查凭据，`checklogin.php`如果成功将用户**重定向**到另一个页面`login_success.php`（例如），如果密码与`checklogin.php`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T12:37:54.620

```
$sql = "select count(*) as exist from user where username='$myusername' and password='$mypassword' ";
foreach ($dbh->query($sql) as $row){
    if (row['exist'] > 0) {
        $_SESSION['login']='true';
        echo "Login successfully";
        echo"<a href='log_out.php'>Logout</a>";
    }else{
        echo "Incorrect username or password";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T12:44:58.043

您正在选择具有正确用户名和正确密码的用户。然后，您使用 foreach 循环遍历它们。
如果密码错误，该语句将不会选择任何内容，并且不会执行 foreach 循环内的代码 - 错误消息在该循环内，因此不会被回显。
如果返回行，您必须检查数字，如果数字为零，则显示错误。
但是在循环之外执行此操作。

# bash - 如何在 bash 中从文本文件中绘制图形？

> ID：13777505
> 
> 赞同：2
> 
> 时间：2012-12-08T12:31:49.960
> 
> 标签：bash, graph, curses

我有一个文本文件，其中每一行包含两个空白分隔字段：*x*和*y*。

```
1 0
10 29
5 2

```

现在我想看看*y = f(x)*的图表，其中*x*和*y*取自文件。

我更喜欢`curses`终端中的图片，但它也可以是任何图形格式的图片。

最简单的方法是什么`bash`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T18:09:37.957

这是一个非常有趣的可能性。我要在这里向您展示的东西可能不是您想要的，它可能没有优化，可能是一堆垃圾，但它真的很有趣。（我不期待任何赞成票）。

该脚本或多或少地`*`在每个点绘制 a，其坐标在文件中给出（作为脚本的第一个参数给出）。它计算终端的行数和列数（使用命令`stty`，如果你碰巧安装了它，那很好，否则，好吧，它不会工作）。

```
#!/bin/bash

isnumber() {
   for i; do
      [[ "$i" =~ [[:digit:]] ]] || return 1
      [[ "$i" =~ ^[+-]?[[:digit:]]*\.?[[:digit:]]*$ ]] || return 1
   done
   return 0
}

die() {
   echo >&2 "$@"
   exit 1
}

[[ -n $1 ]] || die "You must provide an argument"

xarray=()
yarray=()

# Read file input
while read x y _; do
   isnumber "$x" "$y" || continue
   xarray+=( "$x" )
   yarray+=( "$y" )
done < "$1"

# Check that we have at least one point
(( ${#xarray[@]} )) || die "Error, there's no valid point inf file \`$1'"

# Compute xmin, xmax, ymin and ymax:
read xmin xmax ymin ymax valid < <(
   bc -l < <(
      echo "ymin=${yarray[0]}; ymax=${yarray[0]}"
      echo "xmin=${xarray[0]}; xmax=${xarray[0]}"
      for i in "${!xarray[@]}"; do
         echo "y=${yarray[i]}; if (ymax<y) ymax=y; if (ymin>y) ymin=y"
         echo "x=${xarray[i]}; if (xmax<x) xmax=x; if (xmin>x) xmin=x"
      done
      echo 'print xmin," ",xmax," ",ymin," ",ymax'
      # This will tell us if we have xmin<xmax and ymin<ymax
      echo 'print " ",(xmin<xmax)*(ymin<ymax)'
   )
)

# Check that xmin<xmax and ymin<ymax
(( valid )) || die "Error, ! ( (xmin<xmax) && (ymin<ymax) )"

# Get terminal's number of rows and columns
IFS=' ;' read _ _ _ _ nbrows _ nbcols _ < <(stty -a)
((nbrows-=1))
((maxcols=nbcols-1))
((maxrows=nbrows-1))

# Create an array full of spaces:
points=()
for ((i=0;i<nbrows*nbcols;++i)); do points+=( ' ' ); done

# Put a '*' at each x y in array points
while read r c; do
   printf -v X "%.f" "$c"
   printf -v Y "%.f" "$r"
   points[X+Y*nbcols]='*'
done < <(
   bc -l < <(
      echo "xmin=$xmin; dx=$maxcols/($xmax-xmin)"
      echo "ymax=$ymax; dy=$maxrows/(ymax-($ymin))"
      for i in "${!xarray[@]}"; do
         echo "print (ymax-(${yarray[i]}))*dy,\" \",(${xarray[i]}-xmin)*dx,\"\n\""
      done
   )
)

# Now, print it! The clear is not mandatory    
clear
printf "%c" "${points[@]}" 
```

调用脚本`plot_file_in_terminal`（或者更短的名称）。

您可以尝试一下，非常有趣，使用 Mandelbrot 集：以下脚本生成 M 集（您可以将 x 和 y 坐标的像素数作为输入，好吧，您自己弄清楚一些事情）：

```
#!/bin/bash

die() {
   echo >&2 "$@"
   exit 1
}

nbx=${1:-100}
nby=${2:-100}
Nmax=${3:-100}

[[ $nbx =~ ^[[:digit:]]+$ ]] && ((nbx>5)) || die "First argument (nbx) must be an integer > 5"
[[ $nby =~ ^[[:digit:]]+$ ]] && ((nby>5)) || die "Second argument (nby) must be an integer > 5"
[[ $Nmax =~ ^[[:digit:]]+$ ]] && ((Nmax>5)) || die "Third argument (Nmax) must be an integer > 5"

xmin=-1.5
xmax=1
ymin=-1
ymax=1

bc -l <<EOF
for (k=0;k<$nbx;++k) {
   for (l=0;l<$nby;++l) {
      x0=k*($xmax-($xmin))/($nbx-1)+($xmin)
      y0=l*($ymax-($ymin))/($nby-1)+($ymin)
      x=x0
      y=y0
      isin=1
      for (i=0;i<$Nmax;++i) {
         if(x^2+y^2>1) {
            isin=0
            break
         }
         xn=x^2-y^2+x0
         y=2*x*y+y0
         x=xn
      }
      if(isin) print x0," ",y0,"\n"
   }
}
EOF 
```

命名`genMandelbrot`并使用它，`./genMandelbrot > Mset`或者`./genMandelbrot 100 50 > Mset`如果您的终端或多或少是 100x50。然后：

```
./plot_file_in_terminal Mset 
```

不错，嗯？

如果你想要一个正弦函数（比如从 0 到 2*pi）：

```
bc -l <<< "for (i=0;i<400;++i) { x=i*6.28/400; print x,\" \",s(x),\"\\n\" }" > sine 
```

然后调用：

```
./plot_file_in_terminal sine 
```

# 输出

## 曼德布罗套装（80x24）

```
 **
                                                    **********
                                                  ***********
                                             *  *************** *   *
                                    *********************************** ****
                                    **************************************** *
                                **********************************************
                              **************************************************
         **************       **************************************************
       ******************** ****************************************************
 **  **************************************************************************
****************************************************************************
 **  **************************************************************************
       ******************** ****************************************************
         **************       **************************************************
                              **************************************************
                                **********************************************
                                    **************************************** *
                                    *********************************** ****
                                             *  *************** *   *
                                                  ***********
                                                    **********
                                                        **
gniourf@somewhere:~/cool_path$ 
```

## 正弦波（80x24）

```
 *********
             ****       ***
           ***             **
          **                 **
        **                    **
       **                       **
     ***                         **
    **                            **
   **                               **
  **                                 **
 **                                   **
*                                      **                                      *
                                        **                                    **
                                         **                                 **
                                           **                              **
                                            **                            **
                                             **                          **
                                              ***                      **
                                                **                    **
                                                 ***                ***
                                                   ***            ***
                                                     ***       ****
                                                        ********    
gniourf@somewhere:~/an_even_cooler_path$ 
```

在您的 OP 中，您提到了“最简单的做法”......好吧，您可以注意到，这个解决方案并不完全是单行的。

### 编辑。

*   鲁棒性：检查，`xmin!=xmax`以免`ymin!=ymax`除以 0
*   速度：在同一实例中计算`xmin`, `xmax`, `ymin`, 。`ymax``bc`
*   速度：不要再用`tput`了，太慢了，太慢了！相反，构建一个点数组（每个字段包含一个空格或`*`）。

### 待办事项。

*   有很多东西可以让我们真正舒适地使用。这个练习留给读者。

# comet - 哪些浏览器支持 Content-Type: Multipart/X-Mixed-Replace？

> ID：13777508
> 
> 赞同：3
> 
> 时间：2012-12-08T12:32:32.320
> 
> 标签：comet, multipart-mixed-replace

请有人列出`Content-Type: Multipart/X-Mixed-Replace`支持基于`comet`原则创建应用程序的浏览器和版本。我读过关于它在 Chrome 和 Internet Explorer 中支持的相互矛盾的说法——尽管一些报告提到它包含在 IE 10 中。

一个后续问题是，这种构建实时应用程序的技术有多稳定？我问是因为[Wikipedia](http://en.wikipedia.org/wiki/MIME#cite_note-6)目前将其`Content-Type`列为[实验性](http://en.wikipedia.org/wiki/MIME#cite_note-6)的。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:19:00.470

您链接到的页面也回答了您的问题。它在 FireFox、Chrome 和 Safari 中受支持，但在 IE 或 iPhone 上的 Safari 中不支持。该页面没有提到任何关于 IE 10 的内容，但由于它还没有正式发布，所以这是有道理的。

不过，根据 MSDN，IE 10似乎*确实*支持[Comet 流](http://msdn.microsoft.com/en-us/library/ie/hh673569%28v=vs.85%29.aspx#Download_streaming_support)。

除了 IE，它已经存在多年（实际上是从 1995 年开始）并且应该非常稳定。它被标记为实验性的原因是它还没有被宣布为官方标准。

显然[谷歌分析](http://blog.dubbelboer.com/2012/01/08/x-mixed-replace.html)已经使用了这项技术，如果它不稳定，我认为他们不会。

# c++ - 关于恢复 App cocos2dx 的问题

> ID：13777510
> 
> 赞同：1
> 
> 时间：2012-12-08T12:32:40.840
> 
> 标签：c++, uilabel

我在恢复时遇到问题，当我的应用程序恢复时，如果在暂停游戏时有任何标签，我的标签似乎有黑色背景。谁能帮忙解决这个问题？

谢谢！！

# windows - IsAppThemed 和 IsThemeActive 有什么区别？

> ID：13777512
> 
> 赞同：4
> 
> 时间：2012-12-08T12:33:48.120
> 
> 标签：windows, winapi

我真的不明白在哪些情况下我想使用[IsAppThemed](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759809.aspx)以及何时我想使用[IsThemeActive](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759813.aspx)。

似乎在 Windows 7 上，这两个函数在 Aero 或 Windows 7 Basic 中都返回 TRUE，而在 Windows Classic 中这两个函数都返回 FALSE。

根据我目前从文档中了解到的情况，IsAppThemed 将始终从 Windows 8 开始返回 TRUE。这就是我能确定的全部内容——除此之外，在任何情况下我都看不出我更喜欢一个...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:56:52.713

IsThemeActive() 告诉您是否在操作系统中启用了视觉样式。在 Win8 之前，您可以通过选择经典样式在控制面板中强制关闭它。是的，糟糕的名字选择。

IsAppThemed() 告诉您应用程序是否启用了视觉样式，无论是通过使用清单还是通过使用 ActivateActCtx()，并且它没有在操作系统中被禁用。如果 IsThemeActive() 返回 FALSE，则 IsAppThemed() 将始终返回 FALSE。

# php - Php：从所需文件中读取变量中的特殊字符

> ID：13777513
> 
> 赞同：0
> 
> 时间：2012-12-08T12:33:50.137
> 
> 标签：php, global-variables

共有三个文件：index.php、config.php 和[语言前缀].php。

索引设置基本设置（如包含路径）并将控制权传递给“config.php”。

Config 设置了很多东西，包括语言，当它知道语言时，它需要语言文件。

语言文件存储一些用于静态翻译的变量（如 $menu=array('foo','bar','etc');）

我已经完成了所有工作并测试了所有内容（本地），但是当我上传到服务器时，每个包含特殊字符（如 áéíóúâêîôû 等）的变量都在 index.php 外部声明（在 config.php 或语言文件中） ）导致无效字符（�），但如果我在索引中声明它，字符会正常显示。

由于它在本地工作，我假设它应该是由于服务器设置。应该是什么问题？（我有 UTF-8 标头，文件是 UTF-8 编码的）

**更多信息：** 我有一个脚本可以跨语言翻译日期，但它有正确打印的“Sábado”之类的词。脚本本身包含在模板中，但变量是在同一个文件中设置和使用的。可以要求更改文件的编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:42:55.847

使用可以将编码指定为 UTF-8 的文本编辑器。我使用文本板。我还发现使用 TextPad 保存时，需要将文件格式指定为 UNIX 而不是 PC。我不使用 TextPad 进行主要编辑，但它对于指定编码很有用。

更新：我最近发现 TextPad 不能很好地处理 UTF-8 编码，所以我切换到了 Notepad++。从 TextPad 切换到 Notepad++ 后，我遇到了另一个编码问题，该问题很快得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:45:27.933

将编码为 utf-8 的文件保存，将页面字符集设置为 utf-8，如果有来自 db 的数据，也将连接设置为 utf-8。

# c++ - C ++矩阵乘法返回数组的第一行和最后两行的指针

> ID：13777515
> 
> 赞同：1
> 
> 时间：2012-12-08T12:34:02.820
> 
> 标签：c++, multidimensional-array, matrix, operator-overloading

我的 C++ 作业有一个非常令人恼火的问题。

我们的任务是使用动态内存分配在 C++ 中执行矩阵乘法。在大多数情况下，该程序运行良好，但赋值运算符以及（可能）矩阵乘法似乎不起作用。

基本上，我的程序在运行时执行矩阵乘法没有问题，但是返回的 Matrix 对象似乎并没有表现得那么好！

这是 Matrix.h 文件的相关代码

```
 class Matrix
{

    //Pointer matrix
    int **matrix;

    //height and width of the matrix
    int height;
    int width;

    //declaring all public functions to be included in the Matrix object
public:
    Matrix();
    Matrix(int, int);
    ~Matrix();
    void constructor(int, int);
    void destruct();
    int getHeight() const;
    int getWidth() const;
    int getElement(int, int) const;
    void setElement(int, int, int);
    int* getColumn(int) const;
    void setColumn(int, int*);
    int* getRow(int) const;
    void setRow(int, int*);
    void fillMatrix(int);
    Matrix& operator=(const Matrix &m);
    const Matrix operator+(const Matrix &m);
    const Matrix operator-(const Matrix &m);
    const Matrix operator*(const Matrix &m);
    bool operator==(const Matrix &m);
    bool operator!=(const Matrix &m);
};

Matrix::Matrix()
{
    matrix = new int*[1];
}

Matrix::Matrix(int x, int y)
{
    constructor(x,y);
}

Matrix::~Matrix()
{
    destruct();
}

/**
This function contructs the matrix using given heights and widths
(for colums and rows) and then allocates the memory for this
object
*/
void Matrix::constructor (int matrixHeight, int matrixWidth)
{
    height = matrixHeight;
    width = matrixWidth;
    matrix = new int *[matrixHeight];
    for ( int i = 0; i < matrixHeight; i++)
    {
        matrix[i] = new int[matrixWidth];
    }

    //initialising all areas in array
    for ( int i = 0; i < matrixHeight; i++)
    {
        for ( int j = 0; j < matrixWidth; j++)
        {
            matrix[i][j] = 1;
        }
    }
}

/**
This function is for freeing any assigned memory to a matrix
for its columns and rows
*/
void Matrix::destruct ()
{
    for ( int i = 0 ; i < getHeight() ; i++ )
    {
        delete [] matrix[i];
    }
    delete [] matrix;
    matrix = NULL;
} 
```

那是第一节，这里是矩阵乘法

```
/**
This function overloads the times operator
*/
const Matrix Matrix::operator*(const Matrix &m)
{
    if(getWidth() == m.getHeight())
    {
        //i cant remember which way to do matrix mult, and im intoxicated
        //so heres a shitty implementation
        Matrix matrixResult(getHeight(), m.getWidth());
        int result = 0;
        int *row;
        int *column;

        cout << "\n\n matrix mult \n\n";

        for ( int i = 0 ; i < getHeight() ; i++ )
        {
            for ( int j = 0 ; j < m.getWidth() ; j++ )
            {
                result = 0;
                row = getRow(i);
                column = m.getColumn(j);
                for( int k = 0; k < m.getHeight() ; k++ )
                {
                    result = result + (row[k] * column[k]);
                }
                matrixResult.setElement(i, j, result);
            }
            cout << "\n";
        }

        for ( int i = 0 ; i < getHeight() ; i++ )
        {
            for ( int j = 0 ; j < m.getWidth() ; j++ )
            {
                cout << std::setw(10) << matrixResult.getElement(i,j);
            }
            cout << "\n";
        }

        return matrixResult;
    }
    cout << "Not correct size to be multiplied";
    return *this;
} 
```

这是等号（这是我认为我的错误所在）：

```
/**
Overloading the equals operator to be of
type Matrix. This function changes all
values of the currently instantiated matrix
to those of the one passed in via parameter
*/
Matrix& Matrix::operator=(const Matrix &m)
{
    //destroy previous matrix value array
    destruct();

    //Create a new array the same size as the matrix to be copied
    constructor(m.getHeight(), m.getWidth());

    //looping through the current array
    cout << "\n\n beginning equals\n\n";
    for ( int i = 0 ; i < getHeight() ; i++ )
    {
        for ( int j = 0 ; j < getWidth() ; j++ )
        {
            //changing current array's elements to
            //those of the paramter array
            cout << std::setw(10) << m.getElement(i,j);
            setElement(i, j, m.getElement(i, j));
        }
        cout << "\n";
    }
    return *this;
} 
```

大家都知道，我对 C++ 完全陌生，不幸的是，我们的讲师似乎坚持不给我们任何关于 C++ 编码的实践课程，这非常棒：/

此外，这是一个合作伙伴的编程练习，如果代码不是 100% 符合标准，请道歉，但其中一些不是我自己的！

谢谢！

编辑：按要求实施 getColumn。

```
/**
This function returns the items in a specified column
within the matrix. The values are returns as a 1 dimensional
array, which has been malloc'ed.
*/
int* Matrix::getColumn(int col) const
{
    //using malloc to assign the memoru for the returned array
    int* result = new int[height];

    //check to ensure column was within matrix range
    if (col < width )
    {
        for( int i = 0 ; i < height ; i++ )
        {
            result[i] = getElement(i, col);
        }
    }

    return result;
} 
```

编辑 2：命令行输出。请注意，我正在使用 GCC 通过 CODE::BLOCKS 在 WINDOWS 上编译和运行它

```
 913       918      -418
       676       736       -25
      -225       265      -382

       890      -739      -452        87
      -331      -564      -761       280
      -375      -895       101       709

       829      -661       742       442
       679       567       377      -322
      -356      -136      -614      -356

 matrix mult

    665462   -818349  -1153492     40109
    367399   -892293   -868173    247167
   -144715    358705   -138547   -216213

 beginning equals

    197792    20092813134236931095717471
    200928    199968    2003201701603654
   -144715    358705   -138547   -216213

Process returned 0 (0x0)   execution time : 0.009 s
Press any key to continue. 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-08T13:18:15.090

更改为此 void Matrix::operator=(const Matrix &m){ ....} 并删除“return *this”

# c# - 只会复制数组c#中的第一项

> ID：13777516
> 
> 赞同：-1
> 
> 时间：2012-12-08T12:34:06.827
> 
> 标签：c#

嗨，我正在尝试编写一个简单的程序来将一个文件夹从一个源复制到多个并行。我正在学习 c#，所以一直在尝试理解和更改代码示例，因为我认为这是学习新事物的最佳方式。

下面的示例不起作用，因为它仅复制到destinationPaths 中的第一个目标

奇怪的是我有一种类似的方法可以将一个文件复制到多个文件，而且每次我错过了什么都有效？如果有人能告诉我为什么这不起作用我会很感激我猜可能有些事情你不能同时做

任何建议都会很棒

```
public  void CopyMultipleFolder(string sourceFilePath, params string[] destinationPaths)
    {
        if (string.IsNullOrEmpty(sourceFilePath)) MessageBox.Show("A source file must be specified.", "sourceFilePath");
        else
        {

            if (destinationPaths == null || destinationPaths.Length == 0) MessageBox.Show("At least one destination file must be specified.", "destinationPaths");
            else
            {
                try
                {

                    FileIOPermission writeAccess = new FileIOPermission(FileIOPermissionAccess.AllAccess, destinationPaths);
                    foreach (string i in destinationPaths)
                    {
                        writeAccess.AddPathList(FileIOPermissionAccess.Write, i);
                    }

                    writeAccess.Demand();

                    NetworkCredential user = new NetworkCredential();
                    user.UserName = Properties.Settings.Default.username;
                    user.Password = Properties.Settings.Default.password;

                    if (user.Password.Length == 0 || user.UserName.Length == 0)
                    {
                        MessageBox.Show("No Username or password have been entered click username on menu bar to update", "Update Credentials");
                    }
                    else
                    {

                        Parallel.ForEach(destinationPaths, new ParallelOptions(),
                                         destinationPath =>
                                         {

                                             if (sourceFilePath.EndsWith("*"))
                                             {
                                                 int l = sourceFilePath.Length - 4;

                                                 sourceFilePath = sourceFilePath.Remove(l);
                                             }
                                             else
                                             {

                                                 using (new NetworkConnection(destinationPath, user))
                                                 {
                                                     if (Directory.Exists(destinationPath + "\\" + foldername))
                                                     {
                                                         if (destinationPath.EndsWith("\\"))
                                                         {
                                                             DialogResult r = MessageBox.Show("Folder already Exists " + destinationPath + foldername + " Do You Want To overwrite All Files And Sub Folders", "Overwrite?", MessageBoxButtons.YesNo);

                                                             if (r == DialogResult.Yes)
                                                             {
                                                                 PleaseWait.Create();

                                                                 foreach (string dirPath in Directory.GetDirectories(sourceFilePath, "*", SearchOption.AllDirectories))
                                                                     Directory.CreateDirectory(dirPath.Replace(sourceFilePath, destinationPath + "\\" + foldername));

                                                                 foreach (string newPath in Directory.GetFiles(sourceFilePath, "*.*", SearchOption.AllDirectories))
                                                                     File.Copy(newPath, newPath.Replace(sourceFilePath, destinationPath+ "\\" + foldername), true);

                                                                 list = list + destinationPath + foldername + Environment.NewLine;
                                                             }
                                                             else
                                                             {
                                                             }

                                                         }
                                                         else
                                                         {

                                                             DialogResult r = MessageBox.Show("Folder already Exists " + destinationPath + "\\" + foldername + " Do you Want to overwrite All Files And SubFolders", "Overwrite?", MessageBoxButtons.YesNo);

                                                             if (r == DialogResult.Yes)
                                                             {
                                                                 PleaseWait.Create();

                                                                 foreach (string dirPath in Directory.GetDirectories(sourceFilePath, "*", SearchOption.AllDirectories))
                                                                     Directory.CreateDirectory(dirPath.Replace(sourceFilePath, destinationPath + "\\" + foldername));

                                                                 //Copy all the files
                                                                 foreach (string newPath in Directory.GetFiles(sourceFilePath, "*.*", SearchOption.AllDirectories))
                                                                     File.Copy(newPath, newPath.Replace(sourceFilePath, destinationPath + "\\" + foldername), true);

                                                                 list = list + destinationPath + "\\" + foldername + Environment.NewLine;
                                                             }
                                                             else
                                                             {
                                                             }
                                                         }
                                                     }
                                                     else
                                                     {
                                                         PleaseWait.Create();

                                                         foreach (string dirPath in Directory.GetDirectories(sourceFilePath, "*", SearchOption.AllDirectories))
                                                             Directory.CreateDirectory(dirPath.Replace(sourceFilePath, destinationPath + "\\" + foldername));

                                                         //Copy all the files
                                                         foreach (string newPath in Directory.GetFiles(sourceFilePath, "*.*", SearchOption.AllDirectories))
                                                             File.Copy(newPath, newPath.Replace(sourceFilePath, destinationPath + "\\" + foldername), true);

                                                         list = list + destinationPath +"\\"+foldername+ Environment.NewLine;
                                                     }
                                                 }

                                             }
                                             PleaseWait.Destroy();
                                         });

                        MessageBox.Show("Folder Has Been Copied to " + list, "Folder Copied");
                    }
                }

                catch (UnauthorizedAccessException uae)
                {
                    MessageBox.Show(uae.ToString());
                }

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T12:48:53.820

你写道你正在学习 C#。因此，忘记并行执行，因为它不必要地使您的任务更加复杂。相反，首先将您的问题分解成更小的部分。您发布的代码丑陋、冗长，多次重复大量逻辑，因此很难阅读、调试和维护。

因此，首先为单个文件编写小函数。您需要在目标文件夹中创建一组文件夹。因此编写一个接受名称列表和目标文件夹的函数。您需要从源文件夹中确定文件夹集。所以写一个函数来做到这一点。将这两个功能结合在一起。等等。

你最终会得到一个更干净、可修改、可重复使用的解决方案。然后插入并行处理会容易得多。最有可能的是，这将是为了学习它，因为过多地并行化您的问题没有多大意义。

# github - 我需要将我的源代码移动到我在 github for windows 中的 repo 中吗

> ID：13777517
> 
> 赞同：0
> 
> 时间：2012-12-08T12:34:46.690
> 
> 标签：github

所以我刚刚为 Windows 安装了 githib。我现在真的需要将我的源代码移动到我的存储库中，还是将它留在原处并以某种方式将存储库指向它？

例如，如果我的应用程序位于 c:\app 并且 repo 位于 c:\github\repo

我需要将所有内容复制到回购中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:53:42.280

github 的说明非常有帮助。试试：[https ://help.github.com/articles/create-a-repo](https://help.github.com/articles/create-a-repo)

在第 1 步中，您的 app 文件夹相当于 README 文件所在的文件夹。

# ruby - 在 Ruby 中测试 sftp 连接

> ID：13777518
> 
> 赞同：5
> 
> 时间：2012-12-08T12:35:23.330
> 
> 标签：ruby, gem, sftp

我有一个广泛使用 SFTP 协议的应用程序。

我想为它编写集成测试，是否有任何库在 Ruby 中实现 SFTP 服务器功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T08:40:16.307

看看[net-sftp](https://github.com/net-ssh/net-sftp)，还有一堆相关的 repos [https://github.com/net-ssh?tab=repositories](https://github.com/net-ssh?tab=repositories)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:49:09.907

您是否尝试过[https://rubygems.org/search?utf8=%E2%9C%93&query=sftp](https://rubygems.org/search?utf8=%E2%9C%93&query=sftp)？

这里有一个 SFTP 协议实现：[https](https://github.com/georgediaz88/fun_sftp) ://github.com/georgediaz88/fun_sftp和一些模拟 SFTP 的库：[https ://github.com/playlouder/mock_sftp](https://github.com/playlouder/mock_sftp)

# scala - 为什么这两个检查 null 和 empty 返回不同的结果？

> ID：13777521
> 
> 赞同：4
> 
> 时间：2012-12-08T12:35:46.060
> 
> 标签：scala, scala-collections

谁能解释一下如何检查 String 是空还是空？

我有一个下面的代码给出不同的结果解释原因。

```
val someMap = ListMap[String,String]("key1" -> "")
val s = ""
println("s.isEmpty() : "+s.isEmpty())
println("someMap.get(\"key1\") : "+someMap.get("key1").toString().isEmpty) 
```

结果是

```
s.isEmpty() : true
someMap.get("key1") : false 
```

但为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T12:51:48.537

这是因为`Map.get`返回一个[Option](http://blog.danielwellman.com/2008/03/using-scalas-op.html)：`Some(value)`如果值在 Map 中`None`，或者如果 Map 中没有这样的键。

如果你转向`Some("")`一个字符串，你会得到`"Some()"`绝对不是空的。

要实现您想要的行为，请将您的代码编写为

```
someMap("key1").toString.isEmpty 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:52:57.957

我假设

```
val someMap = ListMap[String,String]("key1" -> "") 
```

是一个错字，你的意思是：

```
val someMap = Map[String,String]("key1" -> "") 
```

你得到不同结果的原因是`get(key)`在地图上返回`Option`。如果给定的键存储在 a 中`Map`，则调用`map.get(key)`返回`Some(<value_for_given_key>)`。如果给定的键未存储在 a 中`Map`，则调用`map.get(key)`返回`None`。

在您的示例中，您将带有键“key1”的值“”存储到`someMap`. 因此，如果你打电话`someMap.get("key1")`，你会得到`Some("")`。然后调用`toString`该值，该值返回`"Some()"`. 并且`"Some()".isEmpty()`由于明显的原因返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T08:55:55.360

我正在使用以下代码检查 null 和 empty 以避免空地图错误。

```
/**
 * isContain() will check is the key value is present in map or not and the value is null or Empty 
 * @Parameters : String
 * @return : Boolean
 */
def isContain(paramName : String,params : scala.collection.immutable.ListMap[String,String]) :  Boolean =
{
    if(!(params.contains(paramName)))
        return false
    !isNullOrEmpty(params(paramName))
}

/**
 * isNullOrEmpty() will check is the String null or Empty 
 * @Parameters : String
 * @return : Boolean
 */
def isNullOrEmpty(paramVal : String):  Boolean = {
      if(paramVal == null || paramVal.isEmpty())
          return true
      return false
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T18:52:57.533

如前所述，您正在调用的 ListMap.get 方法返回一个包裹在您的字符串周围的选项：

```
def get(key: A): Option[B] 
```

试试这个改进的 println 语句来查看实际结果：

```
println("someMap.get(\"key1\") : "+someMap.get("key1")) 
```

使用 Intellij 免费的 Idea 12 CE 之类的 IDE 可以通过显示方法的签名并为其返回值提供代码完成建议来帮助您提前发现此类问题。

# sql - 什么会提供更好的性能，每个表的专用 pgsql 触发器函数还是全局函数？

> ID：13777526
> 
> 赞同：1
> 
> 时间：2012-12-08T12:37:09.147
> 
> 标签：sql, database, performance, postgresql

我有数百个配置有更新触发器的表。我想知道什么是更好的方法：
1\. 创建每个表触发器函数，其中触发器代码（所有表的逻辑相同）特定于表。
2.创建一个全局函数，通过创建动态sql语句来处理所有表，并将其配置为所有表的触发函数。

我想知道每个表的函数是否会更快地工作，因为 pgsql 可以预编译并重用该函数，而全局函数需要在每次调用时通过表名动态创建 sql 语句。
为了更清楚，在每个表函数中，我可以为 TableA 编写：

```
insert into log_table values('TableA', x, y, z) 
```

而在全球范围内，我需要将其写为：

```
EXECUTE 'insert into log_table values(' || current_table || ', x, y, z)' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:48:15.337

由于执行计划缓存，最好不要使用动态 sql。

[请参阅此处](http://www.postgresql.org/docs/current/static/plpgsql-implementation.html)的“39.10.2\. 计划缓存”部分。

但只有真正的测试才会显示性能差异（如果有的话）。

# android - Android ListView 动画

> ID：13777530
> 
> 赞同：0
> 
> 时间：2012-12-08T12:38:22.513
> 
> 标签：android, android-layout, android-listview, android-animation, android-listfragment

我正在尝试为 ListView 添加动画我正在使用 getView() 在列表中绘制一些视图。一切正常。

```
public View getView(int position, View convertView, ViewGroup parent) { } 
```

我正在尝试在用户单击列表单元格时添加动画，然后所有列表单元格都应该向左滑动并且新数据应该同时来自右侧，这意味着单元格数据正在向左移动，同时新数据来自右侧。

我在 OnItemClickListener 中实现了以下代码

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    Animation slideOutAnimation=AnimationUtils.loadAnimation(this, R.anim.slide_out);
    slideOutAnimation.setDuration(900);

    Animation slideInAnimation=AnimationUtils.loadAnimation(this, R.anim.slide_in);
    slideInAnimation.setDuration(500);

    listView.startAnimation(slideOutAnimation);

    new Handler().postDelayed(new Runnable() {

    @Override
    public void run() {
        data = newData();
        listView.startAnimation(slideInAnimation);
        myAdapterClass.notifyDataSetChanged();
    }
    }, slideOutAnimation.getDuration());
}
}; 
```

上面的代码工作但没有得到期望的输出我在更改动画时得到一个空视图。

左滑动画开始---空视图----右滑动画开始

不明白为什么会出现空视图（暂时显示空屏幕），我玩过动画时间和处理程序，但没有运气。

如何删除那个空视图？如何实现这个输出？

左滑动动画开始（数据移动）（同时数据来自右）右滑动动画开始

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:25:51.450

> 我正在尝试在用户单击列表单元格时添加动画，然后所有列表单元格都应该向左滑动并且新数据应该同时来自右侧，这意味着单元格数据正在向左移动，同时新数据来自右侧。

您的代码按预期工作，但它不会做您想做的事，因为您使用了一个`ListView`小部件，您首先动画左滑动，然后在第一个动画结束后立即动画滑动。

尝试使用`ViewFlipper`包含两个的`ListViews`（一个是可见的，另一个是新数据附带的）。您将在`ViewFlipper`(`in`和`out`动画) 上设置动画，然后在列表项上单击您将执行以下操作：

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
      data = newData();
      //set the data for the second list, which currently isn't visible 
      secondListViewAdapter.notifyDataSetChanged();
      viewFlipper().showNext(); //show the next list with animation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:39:41.433

您可以通过编辑 android:fromXDelta 或 alpha 值来更改动画行为，

**滑出.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="-100%p" android:toXDelta="-100%p" android:duration="@android:integer/config_shortAnimTime"/>

    <alpha android:fromAlpha="1.0" android:toAlpha="0.0"
            android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

**幻灯片.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="-100%p" android:toXDelta="0" android:duration="@android:integer/config_shortAnimTime"/>

    <alpha android:fromAlpha="0.0" android:toAlpha="1.0"
            android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

# iframe - youtube api iframe loadvideobyid 在最后一个停止的地方开始视频

> ID：13777534
> 
> 赞同：2
> 
> 时间：2012-12-08T12:39:26.303
> 
> 标签：iframe, youtube-api

我正在使用 youtube api iframe 并开始使用示例代码。当我发出： player.loadVideoById("ytidNo1") 正确的视频开始时（“ytidNo1”是一个有效的 youtube id）

然后，比如说，10 秒后，如果我发出另一个： player.loadVideoById("ytidNo2") 第二个视频开始，但它从最后一个播放的点开始（例如 10 秒）。

这是最近一天左右的新行为，我没有更改我的代码。

为了纠正这个问题，我尝试了： player.loadVideoById("ytidNo1",0)

然后

player.loadVideoById("ytidNo2",0)

问题仍然存在。

其他人有或刚开始有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:45:03.473

我也有同样的问题。到处玩，我终于让它工作了。我不得不使用 seekTo(0); （见吉姆的评论）

有关该问题的更多详细信息。

*   如果视频真的播放到最后，我不需要做任何事情。
*   如果视频在中途被跳过，我必须调用 player.seekTo(0); 在调用 loadVideoByID("ytid", 0); 之前在旧视频上 在下一个视频中。
*   我还必须处理调用 loadVideoByID 后出现错误的情况。（例如 150）如果我有一个错误我不能调用 seekTo 因为它会导致下一个视频只播放音频。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:19:50.080

我正在尝试使用官方示例重现该问题::

[https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

停止后，我以同样的方式选择另一个视频，似乎效果很好：

```
<!DOCTYPE html>
<html>
  <body>
    <!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>

    <script>
      // 2\. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "//www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3\. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'u1zgFlCw8Aw',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4\. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        event.target.playVideo();
      }

      // 5\. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      var done = false;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
          setTimeout(stopVideo, 6000);
          done = true;
        }
      }
      function stopVideo() {
        player.stopVideo();
        player.loadVideoById("tYrND5hMY3A");
      }
    </script>
  </body>
</html>​ 
```

[http://jsfiddle.net/5wxFv/3/](http://jsfiddle.net/5wxFv/3/)

# php - 如何在 JavaScript 代码中使用我的 PHP 函数

> ID：13777541
> 
> 赞同：-4
> 
> 时间：2012-12-08T12:40:13.623
> 
> 标签：php, javascript

我正在尝试在 JavaScript 中使用我的 PHP 函数，如下所示：

PHP代码：

```
function checkevents($date){
    $ev = new CalendarModelEventss();
    $wh = "`event_date` = '".$date."'";
    $all = $ev->getAllEvents('event_date', $wh);
    if($all == $date){
        //echo 'event is available'.$all;   
        return true;
    } else {
        return false;
        //echo 'event is NOT available' .'--'. $all;
    }
} 
```

和 JavaScript 代码：

```
var yyyy = date.getLocalFullYear(true, this.dateType);
var mm = date.getLocalMonth(true,this.dateType);
var dd = iday;
var ddddd = yyyy+'/'+mm+'/'+dd;

if(<?php checkevents( ?>ddddd<?php ) ?>){
     cell.className += " eventsss ";
} 
```

但它不起作用，并且我有 PHP 错误（`syntax error, unexpected ';', expecting ')' in ...`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T12:48:48.237

正如前面的演讲者所说，直接从 javascript 调用 php 函数是不可能的。不过，PHP 可用于输出 javascript。

在您的情况下，您需要从执行 php 代码（在服务器端）的客户端（使用 javascript）发送一个 ajax 请求，获取输出并将其放入您的 if 语句中。

如果你不太了解 javascript/AJAX，你可以看看 jQuery 或其他类似的框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:42:37.083

Javascript 在客户端解析，PHP 在服务器端解析。
没有`AJAX`这个是不可能的。

使用 JQuery 的示例：

PHP：

```
...
    echo "true";//or something else that indicates the success
} else {
    echo "false";//or something else that indicates the failure
}
... 
```

Javascript：

```
$.ajax({
  url: "URL TO YOU PHP SCRIPT",
  cache: false
}).done(function( html ) {
  if(html.match(/true/g)){
     cell.className += " eventsss ";
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T12:58:16.063

您不能直接使用 javascript 直接调用 php 函数，因为它们都在不同的方面。所以您要做的是使用某些参数进行 AJAX 调用，然后直接从该 php 文件调用该 php 函数，并使用要验证的参数。

并通过回显输出将输出发送回 javascript，并在 javascript 上对其执行任何操作。

# class - Coffeescript 类、方法和实例变量

> ID：13777543
> 
> 赞同：1
> 
> 时间：2012-12-08T12:40:56.410
> 
> 标签：class, variables, coffeescript

我将在 Coffeescript 中实现某种 Pagniator 类。Paginator 类应该包含有关 currentPage、maxPages、columnNames 的信息...

所以我的第一种方法是：

```
class Paginator
  currentPage = -1
  rowCount = -1
  pageSize= -1
  columnNames = null
  constructor: (@config) ->

  setup: ->
    @config.ajax(
        cache: false
        type: "GET"
        contentType: "application/json"
        dataType: "json"
        success: (data) =>
          this.configurationReceived(data)

    )

  configurationReceived: (data) =>
     this.storeConfig(data)
     this.setupGUI()
     this.loadPage(1)
     $('.pagination ul li').click( ->
         Paginator.loadPage($(this).text())
         return false
      )

  storeConfig: (jsonData) =>
    rowCount = jsonData['rowAmount']
    pageSize = jsonData['pageSize']
    columns = jsonData['columns']
    return 
```

@config 是来自 Play 2.0 Framework jsroutes 对象的 jsRoutes.controllers.xxx。在页面加载我做

```
paginator = new Paginator jsRoutes.controllers.PlayerController.paginatorConfiguration()
paginator.setup() 
```

但是我总是得到一个“this.storeConfig 不是一个函数”。有人可以帮我吗？我在这里滥用类语法吗？我的目标是将分页器的状态封装在分页器对象（实例）中。在启动时，我想做一些初始化工作，这些初始化工作是通过 AJAX 调用“路由”来完成的，“路由”是一个 HTTP 端点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:50:17.973

这里的缩进似乎有问题：

```
$('.pagination ul li').click( ->
    Paginator.loadPage($(this).text())
    return false
 )   # <--- 
```

应该

```
$('.pagination ul li').click( ->
    Paginator.loadPage($(this).text())
    return false
) 
```

因此，包含方法“storeConfig”定义的以下代码不是类的一部分，因此“this.storeConfig”不是函数。

如果您将代码复制粘贴到 coffeescript.org 的“Try-coffescript”表单中并检查 JavaScript 输出，您可以轻松看到这一点。

# reportlab - 将 reportLab 中的文本与鸭嘴兽表格样式对齐

> ID：13777545
> 
> 赞同：1
> 
> 时间：2012-12-08T12:41:20.643
> 
> 标签：reportlab, platypus

我正在使用 ReportLab 生成 PDF 报告。

我有一张桌子。我为垂直对齐设置了一个样式：

```
('VALIGN',(0, 0),(-1,-1),'MIDDLE') 
```

但是在某些表格单元格中它是不正确的，并且某些文本超出了单元格！为什么？解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:56:46.780

表中的文本应包含在段落中。然后它们应该保持在列的宽度内。

参考这个答案，那里也有一个示例代码。 [在表格报告实验室中包装文本？](https://stackoverflow.com/questions/4726011/wrap-text-in-a-table-reportlab/10244769#10244769)

# windows - 编写包含反斜杠的文本字符串，变量赋值问题

> ID：13777547
> 
> 赞同：2
> 
> 时间：2012-12-08T12:41:32.983
> 
> 标签：windows, batch-file, cmd

我希望 bat 文件获取此文本`\Music\TheArchive\Aeph & Neonlight\Aeph & Neonlight - Space Truckers - 7b - 173.26.mp3`并将其写入现有文本文件中的新行`baseplaylist.m3u`

到目前为止，我有这个：

```
set "texty=\Music\TheArchive\Aeph & Neonlight\Aeph & Neonlight - Space Truckers - 7b - 173.26.mp3"
echo %texty% >>C:\Music\Playlists\baseplaylist.m3u 
```

但它不起作用。我知道问题是由于我试图复制的文本中的字符造成的，但我不知道如何克服这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:10:11.317

反斜杠与您的问题无关。您对变量的分配也没有问题。:-)

您的问题是`&`字符 - 它是复合命令运算符，允许您在同一行输入中运行多个命令。您希望 the`&`是文字，但是当您尝试 ECHO 时，它被视为运算符。例如，`echo this&echo that`在屏幕上打印 2 行输出：“this”后跟“that”。

必须先解析批处理行，然后才能执行它。解析器必须识别命令和操作符。的扩展`%texty%`发生在解析命令和运算符之前，因此解析器认为之后的下一个标记`&`是命令。

有许多特殊字符会导致类似问题：`|` `>` `<` `)` `&` `^`.

有两种方法可以强制批处理解析器将特殊字符视为文字：1) 将其括在引号中，或 2) 将其转义为`^`.

```
echo this&echo that
echo "this & that"
echo this ^& that 
```

结果：

```
this
that
"this & that"
this & that 
```

在您的 SET 语句中，您将整个赋值用引号括起来，因此它被正确地视为文字。您可以通过在设置分配后放置命令来向自己证明这一点`set texty`- 它会将 texty 的当前值打印到屏幕上，您可以看到它是您想要的值。

但是当您回显该值时，它不再被引用，因此解析器将`&`视为运算符并且您失败了。

你可以`echo "%texty"`，但是你会在你的输出中得到引号。

您可以更改 texty 的定义以包含转义字符。

```
set "texty=\Music\TheArchive\Aeph ^& Neonlight\Aeph ^& Neonlight - Space Truckers - 7b - 173.26.mp3" 
```

但这是一种痛苦。值得庆幸的是，有一个简单的解决方案 - 在解析命令和运算符之后发生变量的延迟扩展，因此您不再需要担心特殊字符。

必须先启用延迟扩展，然后才能使用`setlocal enableDelayedExpansion`. 然后用感叹号而不是百分比将变量名括起来。

```
setlocal enableDelayedExpansion
set "texty=\Music\TheArchive\Aeph & Neonlight\Aeph & Neonlight - Space Truckers - 7b - 173.26.mp3"
echo !texty! >>C:\Music\Playlists\baseplaylist.m3u 
```

现在该行在`!texty!`展开之前被解析为命令和运算符。所以 ECHO 正确地打印了 texty 的字面值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:50:00.867

问题是运算符**&**，在这种情况下，您将需要扩展变量或转义运算符或用另一个双引号将“echo”字符串括起来......但您的解决方案非常简单：

```
set "texty=\Music\TheArchive\Aeph & Neonlight\Aeph & Neonlight - Space Truckers - 7b - 173.26.mp3"
<nul Set /P "string=%TEXTY%" >>C:\Music\Playlists\baseplaylist.m3u 
```

**PS**：使用**SETLOCAL ENABLEDELAYEDEXPANSION**是一个不好的做法，当你在玩文件名时（尤其是当它们包含字符时**！**）所以尽量不要使用扩展，所有都可以在不扩展 vars (ALL) 的情况下完成，启用延迟扩展是容易**和坏的**做最多事情的方法，但不是唯一的方法。

我希望这对你有所帮助。

# macos - 运行桌面并行 mac 的 Visual Studio 中的花括号

> ID：13777550
> 
> 赞同：6
> 
> 时间：2012-12-08T12:42:00.813
> 
> 标签：macos, visual-studio, resharper, keyboard-shortcuts, curly-braces

我在 Macbook air 上运行的 win7 桌面上测试 Visual Studio。一切正常，除了我无法在 Visual Studio 中使用花括号。

花括号确实有效 Shift + right-alt 7/8（在记事本中测试），但有些东西覆盖了视觉工作室中的组合键。

并行的软件规格

Windows 7 视觉工作室 2012 Resharper

我认为是 Resharper 惹恼了我。有谁知道如何关闭快捷方式，特别是组合键 shift + right-alt + 7/8 这样我就可以让花括号再次工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T12:48:57.270

您可以在 Visual Studio 中检查所有不同的快捷方式并根据需要进行修改。

在 Visual Studio 中转到：`Tools -> Customize`并按下`Keyboard`底部的按钮。然后，在**“按下快捷键”**文本框中，只需按下组合键，您就会看到它设置为什么命令，您可以删除/重新定义该组合

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-14T09:18:47.483

我遇到了同样的问题，但我终于找到了它的工作原理： for { type right-alt+5 and for [ type right-alt+shift+5

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T17:49:03.410

在 Visual Studio 2015 中，键盘设置`Tools -> Options`位于`Environment/Keyboard`.

按快捷键找不到绑定的命令。

经过一番挖掘，我发现了命令名称：`ReSharper_EnableDaemon`. 删除此命令的所有快捷方式，我现在可以`{`再次键入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-15T20:26:15.160

尝试在键盘中使用**fn + alt（右 alt 键）+ 7/8**。应该可以解决大部分 Mac 并行问题。

# java - 使用 RowFilter (regexFilter) 匹配括号

> ID：13777554
> 
> 赞同：4
> 
> 时间：2012-12-08T12:42:33.267
> 
> 标签：java, regex, swing, jtable, rowfilter

```
protected void searchFilter(String s, int n) 
{
        RowFilter<MyTableModel, Object> rf = null;
        try {
            System.out.println(s);
            rf = RowFilter.regexFilter(s, n);
        } catch (PatternSyntaxException e) {
            System.out.println(e);
        }
        filters.add(rf);
    } 
```

我正在尝试匹配 JTable 中包含括号的字符串。在上面的代码中，字符串参数可以是：John (Smith)

我正在搜索的列：

```
Jane (Doe)
John (Smith)
John (Smith)
Jack (Smith) 
```

我希望它返回的地方：

```
John (Smith)
John (Smith) 
```

但现在它没有返回任何东西。我查看了 Matcher、Pattern 和 RowFilter 的文档，但到目前为止没有任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:57:28.790

括号是正则表达式中的元字符。因此，您实际上是在尝试匹配`John Smith`（不带括号）。你需要做的是逃离他们。

Java 有一个内置函数可以自动转义所有元字符：[`Pattern.quote`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29). 运行`s`此功能，它应该修复它。

另请注意，您可能希望用 包围模式`^...$`。否则它将接受包含类似内容的行`This is John (Smith) foobar.`（因为正则表达式很高兴它可以匹配输入的子字符串）。

# sql - 如何添加在sql中以逗号分隔的所有值

> ID：13777556
> 
> 赞同：0
> 
> 时间：2012-12-08T12:42:36.750
> 
> 标签：sql

如何获取表中一列的值的总和。现在，如果我使用下面的查询写入，我想得到 8 和 0 的总和。

```
SELECT SUM(Items) FROM dbo.CustomSplit(@AssigneeProgress,',') 
```

这给出了一个错误

> *操作数数据类型 varchar 对 sum 运算符无效。*

我的代码是：

```
DECLARE @AssigneeProgress AS VARCHAR(100)

SELECT 
    @AssigneeProgress = STUFF((SELECT ',' + CAST(ISNULL((((TblAssignments.PlannedDuration  * 100) / 300) * TblAssignments.Progress) / 100,0) AS VARCHAR(100)) 
                               FROM TblTasks,TblAssignments 
                               WHERE TblTasks.TaskId = TblAssignments.AssignmentEntityId 
                                 AND TblAssignments.AssignmentEntity = 'Task' 
                                 AND AssignmentStatus NOT IN ('Deleted','Cancelled') 
                                 AND TblTasks.TaskId = 63 FOR XML PATH('')), 1, 1,'')

SELECT * FROM dbo.CustomSplit(@AssigneeProgress,',') 
```

这个查询给了我表格中的结果，比如

```
Items
8
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:57:23.937

您的方法 CustomSplit 是否返回具有 varchar 类型的列 Items 的表？如果是，您可以转换列：

```
SELECT SUM(cast(Items as int)) FROM dbo.CustomSplit(@AssigneeProgress,',') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T12:56:13.047

在求和之前，尝试将`Items`您从 split 函数返回的类型转换为类型：`INT`

```
SELECT 
    SUM(CAST(Items AS INT)) 
FROM 
    dbo.CustomSplit(@AssigneeProgress,',') 
```

该`CustomSplit`函数最有可能返回`varchar(x)`项目....

# java - Java中的完整LaTeX解析器

> ID：13777558
> 
> 赞同：7
> 
> 时间：2012-12-08T12:43:00.053
> 
> 标签：java, latex, tex

我编写了[小型 Java 应用程序](https://github.com/Todd-Davies/MathsIdentities)来为我的数学修订版创建可打印的抽认卡。

目前，我正在使用[JLaTeXMath](http://forge.scilab.org/index.php/p/jlatexmath/)从 LaTeX 生成每一面的图像。

唯一的问题是，JLaTeXMath 似乎仅限于 LaTeX 公式。我想使用相同的程序为生物学等其他学科创建抽认卡，其中问题和答案将基于文本（而不是基于方程），而 LaTeX 公式不适合此。

有没有可以解析 LaTeX 的 Java 库？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T12:54:18.177

LaTeX 是一种**完整的编程语言**。解析它意味着执行程序。

虽然在许多常见情况下它似乎很简单 -`\section`等等 - 但它远远不是微不足道的。事实上，它应该是图灵完备的。有些部分甚至会有或多或少不同的语法。以 TIKZ 为例——一个优秀的 LaTeX 绘图库。它的语法有点像乳胶，但其他部分更像是现代编程语言。很多东西就像样式表。

但是，您也许可以只支持**部分 Latex 语法**。看看[Texlipse](http://texlipse.sf.net/)做了什么。它是在 Java 中的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-02T20:31:17.443

我会使用[JLaTeXMath](https://github.com/opencollab/jlatexmath)：

> “JLaTeXMath 是显示 LaTeX 代码的最佳 Java 库。”

```
 import org.scilab.forge.jlatexmath.TeXConstants;
import org.scilab.forge.jlatexmath.TeXFormula;

public class Example5 {

    public static void main(String[] args) {

        String latex = "\\begin{array}{|c|l|||r|c|}";
        latex += "\\hline";
        latex += "\\text{Matrix}&\\multicolumn{2}{|c|}{\\text{Multicolumns}}&\\text{Font sizes commands}\\cr";
        latex += "\\hline";
        latex += "\\begin{pmatrix}\\alpha_{11}&\\cdots&\\alpha_{1n}\\cr\\hdotsfor{3}\\cr\\alpha_{n1}&\\cdots&\\alpha_{nn}\\end{pmatrix}&\\Large \\text{Large Right}&\\small \\text{small Left}&\\tiny \\text{tiny Tiny}\\cr";
        latex += "\\hline";
        latex += "\\multicolumn{4}{|c|}{\\Huge \\text{Huge Multicolumns}}\\cr";
        latex += "\\hline";
        latex += "\\end{array}";

        TeXFormula formula = new TeXFormula(latex);
        formula.createPNG(TeXConstants.STYLE_DISPLAY, 20, "target/Example5.png", Color.white, Color.black);
    }
} 
```

TeXFormula 的来源：[https ://github.com/opencollab/jlatexmath/blob/7995ce52b2699c9a3a8428a94c1f3762cdcb0284/jlatexmath/src/main/java/org/scilab/forge/jlatexmath/TeXFormula.java#L244](https://github.com/opencollab/jlatexmath/blob/7995ce52b2699c9a3a8428a94c1f3762cdcb0284/jlatexmath/src/main/java/org/scilab/forge/jlatexmath/TeXFormula.java#L244)

## 其他解决方案

*   [SnuggleTeX](https://sourceforge.net/projects/snuggletex/) - 似乎也有一个很好的解析器。[请参阅https://sourceforge.net/p/snuggletex/code/HEAD/tree/trunk/snuggletex-core/src/main/java/uk/ac/ed/ph/snuggletex/samples/MinimalExample.java](https://sourceforge.net/p/snuggletex/code/HEAD/tree/trunk/snuggletex-core/src/main/java/uk/ac/ed/ph/snuggletex/samples/MinimalExample.java)上的调用。
*   [JavaTex](http://javatex.sourceforge.net/)：[https](https://sourceforge.net/projects/javatex/files/javatex/V0.2/) ://sourceforge.net/projects/javatex/files/javatex/V0.2/ 。似乎是一个完整的 LaTeX 引擎。
*   [CTAN 的 JavaTeX](https://ctan.org/pkg/javatex?lang=de) - 从 1998 年开始，但可能仍然表现良好。

（部分基于[https://tex.stackexchange.com/q/41609/9075](https://tex.stackexchange.com/q/41609/9075)）

# cakephp - Cakephp 2.0 使用包含时出现奇怪的 array_merge 错误

> ID：13777559
> 
> 赞同：3
> 
> 时间：2012-12-08T12:43:15.997
> 
> 标签：cakephp, array-merge, contain

使用包含将我的数据限制为我需要的数据时，我遇到了一个奇怪的错误。这是我的包含

```
$this->Movie->contain(array(
        'Review' => array(
            'fields' => array('id', 'title', 'spoilers', 'body', 'created'),
            'User' => array(
                'fields' => array('id', 'username'),
                'Profile' => array('fields' => array('id', 'image_thumb_small'))
            ),
            'order' => 'Review.created DESC',
            'limit' => 2,
        ),
        'Movieupdates' => array(
            'User' => array('Profile' => array('fields' => 'image_thumb_small')),
            'order' => 'Movieupdates.created DESC',
            'limit' => 2
        ),
        'Actor' => array(
            'fields' => array('name', 'slug', 'image_thumb'),
        ),
        'Genre' => array(
            'fields' => array('name', 'id'),
        )
    )); 
```

问题是 Cakephp 向我抛出了两个错误：

```
Warning (2): array_merge() [function.array-merge]: Argument #1 is not an array [CORE\Cake\Model\Behavior\ContainableBehavior.php, line 400]

Warning (2): array_unique() expects parameter 1 to be array, null given [CORE\Cake\Model\Behavior\ContainableBehavior.php, line 400] 
```

我认为问题与以下行有关（包含：Review -> User）：

```
'fields' => array('id', 'username'), 
```

如果我删除一切都很好，但我又不想从用户那里得到所有数据，尤其是密码，所以我必须限制它。

我的包含有什么问题？该错误表明我应该在某处使用数组，但我不知道在哪里。

**编辑添加的查询结果**

```
Array
(
    [Movie] => Array
        (
            [id] => 27
            [user_id] => 
            [title] => The Amazing Spider-Man
            [slug] => The_Amazing_Spider_Man_2012
            [year] => 2012
            [summary] => Peter Parker finds a clue that might help him understand why his parents disappeared when he was young. 
            [poster] => /files/movies/53cb8be658a2e04a21909e288cdcb8.jpg
            [poster_thumb] => /files/movies/53cb8be658a2e04a21909e288cdcb8_resized_101x150.jpg
            [backdrop] => /files/movies/backdrop/amazing_spider_man.jpg
            [rating] => 7.4285714285715
            [like_count] => 5
            [review_count] => 7
            [see_count] => 7
            [rating_count] => 14
        )

    [Movieupdates] => Array
        (
            [0] => Array
                (
                    [id] => 20
                    [user_id] => 4
                    [movie_id] => 27
                    [type] => 4
                    [info] => 26
                    [created] => 2012-12-08 11:06:18
                    [User] => Array
                        (
                            [id] => 4
                            [username] => Ceriksen
                            [email] => skdji@gmail.com
                            [password] => ---
                            [validation_code] => 082b7735cfb3a3d5c74547d702bd97f9af517870
                            [group_id] => 3
                            [created] => 2012-11-27 11:23:57
                            [modified] => 2012-11-27 11:23:57
                            [Profile] => Array
                                (
                                    [id] => 5
                                    [user_id] => 4
                                    [image] => /files/profiles/771a98602dc7849b2d004952f1f35f.jpg
                                    [image_thumb] => /files/profiles/771a98602dc7849b2d004952f1f35f_resized_130x130-2.jpg
                                    [image_thumb_medium] => 
                                    [image_thumb_small] => /files/profiles/771a98602dc7849b2d004952f1f35f_resized_30x30.jpg
                                    [name] => 
                                    [last_name] => 
                                    [bio] => 
                                    [country] => 
                                    [city] => 
                                )

                        )

                )

            [1] => Array
                (
                    [id] => 19
                    [user_id] => 4
                    [movie_id] => 27
                    [type] => 3
                    [info] => 10
                    [created] => 2012-12-08 11:06:08
                    [User] => Array
                        (
                            [id] => 4
                            [username] => Ceriksen
                            [email] => skdji@gmail.com
                            [password] => ---
                            [validation_code] => 082b7735cfb3a3d5c74547d702bd97f9af517870
                            [group_id] => 3
                            [created] => 2012-11-27 11:23:57
                            [modified] => 2012-11-27 11:23:57
                            [Profile] => Array
                                (
                                    [id] => 5
                                    [user_id] => 4
                                    [image] => /files/profiles/771a98602dc7849b2d004952f1f35f.jpg
                                    [image_thumb] => /files/profiles/771a98602dc7849b2d004952f1f35f_resized_130x130-2.jpg
                                    [image_thumb_medium] => 
                                    [image_thumb_small] => /files/profiles/771a98602dc7849b2d004952f1f35f_resized_30x30.jpg
                                    [name] => 
                                    [last_name] => 
                                    [bio] => 
                                    [country] => 
                                    [city] => 
                                )

                        )

                )

        )

    [Genre] => Array
        (
            [0] => Array
                (
                    [name] => Action
                    [id] => 11
                    [MoviesGenre] => Array
                        (
                            [id] => 56
                            [movie_id] => 27
                            [genre_id] => 11
                        )

                )

            [1] => Array
                (
                    [name] => Adventure
                    [id] => 12
                    [MoviesGenre] => Array
                        (
                            [id] => 57
                            [movie_id] => 27
                            [genre_id] => 12
                        )

                )

            [2] => Array
                (
                    [name] => Fantasy
                    [id] => 18
                    [MoviesGenre] => Array
                        (
                            [id] => 58
                            [movie_id] => 27
                            [genre_id] => 18
                        )

                )

        )

    [Actor] => Array
        (
            [0] => Array
                (
                    [name] => Emma
                    [slug] => Emma_Stone
                    [image_thumb] => /files/actors/d59efc7614151acb7ea5d08da47112_resized_30x30.jpg
                    [MoviesActor] => Array
                        (
                            [id] => 1
                            [movie_id] => 27
                            [actor_id] => 8
                        )

                )

            [1] => Array
                (
                    [name] => Andrew
                    [slug] => Andrew_Garfield
                    [image_thumb] => /files/actors/0a9354d741328f4cf3e2954641e4eb_resized_25x30.jpg
                    [MoviesActor] => Array
                        (
                            [id] => 2
                            [movie_id] => 27
                            [actor_id] => 9
                        )

                )

            [2] => Array
                (
                    [name] => Martin
                    [slug] => Martin_Sheen
                    [image_thumb] => /files/actors/2383fc87054b2e8b4249fc7e3ffba5_resized_30x27.jpg
                    [MoviesActor] => Array
                        (
                            [id] => 3
                            [movie_id] => 27
                            [actor_id] => 10
                        )

                )

        )

    [Review] => Array
        (
            [0] => Array
                (
                    [id] => 26
                    [title] => W00t
                    [spoilers] => 0
                    [created] => 2012-12-08 11:06:18
                    [user_id] => 4
                    [MoviesReview] => Array
                        (
                            [id] => 25
                            [movie_id] => 27
                            [review_id] => 26
                        )

                    [User] => Array
                        (
                            [id] => 4
                            [username] => Ceriksen
                            [Profile] => Array
                                (
                                    [id] => 5
                                    [user_id] => 4
                                    [image] => /files/profiles/771a98602dc7849b2d004952f1f35f.jpg
                                    [image_thumb] => /files/profiles/771a98602dc7849b2d004952f1f35f_resized_130x130-2.jpg
                                    [image_thumb_medium] => 
                                    [image_thumb_small] => /files/profiles/771a98602dc7849b2d004952f1f35f_resized_30x30.jpg
                                    [name] => 
                                    [last_name] => 
                                    [bio] => 
                                    [country] => 
                                    [city] => 
                                )

                        )

                )

            [1] => Array
                (
                    [id] => 25
                    [title] => Testing the update
                    [spoilers] => 1
                    [created] => 2012-12-08 11:04:44
                    [user_id] => 4
                    [MoviesReview] => Array
                        (
                            [id] => 24
                            [movie_id] => 27
                            [review_id] => 25
                        )

                    [User] => Array
                        (
                            [id] => 4
                            [username] => Ceriksen
                            [Profile] => Array
                                (
                                    [id] => 5
                                    [user_id] => 4
                                    [image] => /files/profiles/771a98602dc7849b2d004952f1f35f.jpg
                                    [image_thumb] => /files/profiles/771a98602dc7849b2d004952f1f35f_resized_130x130-2.jpg
                                    [image_thumb_medium] => 
                                    [image_thumb_small] => /files/profiles/771a98602dc7849b2d004952f1f35f_resized_30x30.jpg
                                    [name] => 
                                    [last_name] => 
                                    [bio] => 
                                    [country] => 
                                    [city] => 
                                )

                        )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:33:28.710

解决了，我的容器有错误。愚蠢的一个。

```
'User' => array('Profile' => array('fields' => 'image_thumb_small')), 
```

本来应该：

```
'User' => array('Profile' => array('fields' => array('image_thumb_small'))), 
```

# vsto - 根任务对象在 MS 项目任务集合 (VSTO) 中不可用

> ID：13777560
> 
> 赞同：1
> 
> 时间：2012-12-08T12:43:32.087
> 
> 标签：vsto, ms-project

我正在使用 Visual Studio 2010 并以 MS Project 2013 为目标，由于某种原因，当我遍历 Tasks 集合时，最终根目录没有出现。

作为参考，我使用的是内置模板：“商业建筑”

# 这是我的代码片段：

```
using Microsoft.Office.Interop.MSProject;

Project project;
project = Globals.ThisAddin.Application.ActiveProject;

foreach (Task t in project.Tasks)
{
    // Do something with the task
} 
```

除了最终根以外的所有任务都会显示出来。这样做的主要问题是：

1）如何通过VSTO创建终极根任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:51:59.030

好的，我想通了。“终极根”包含在一个单独的属性中：

```
Globals.ThisAddin.Application.ActiveProject.ProjectSummaryTask 
```

# vb.net - 更改桌面图标对齐方式

> ID：13777565
> 
> 赞同：1
> 
> 时间：2012-12-08T12:44:37.513
> 
> 标签：vb.net, visual-studio, icons, alignment, desktop

我想制作一个应用程序来更改桌面图标的对齐方式或位置。

问题是我不知道如何开始这样做......

我搜索了信息，发现桌面图标位置存储在此注册表项中：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\Shell\Bags\1\Desktop\ItemPos 
```

但这是一个很大的二进制值，所以如果我想将默认桌面图标对齐方式（从左上到下）更改为从右上到下，我需要做什么？

谢谢你的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:46:51.693

也许您可以使用 user32 Windows 库中的 SystemParametersInfo 函数。您可以在这里阅读：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx#Icon](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx#Icon) 有很多关于图标的辅助功能参数\桌面设置。

# github - Github 页面未显示我的 index.html 文件

> ID：13777567
> 
> 赞同：6
> 
> 时间：2012-12-08T12:44:52.067
> 
> 标签：github, web-hosting, github-pages

我是 github 页面的新手，所以我用一个简单的 index.html [https://github.com/jigneshjain25/jignesh.github.com/blob/gh-pages/index.html制作了以下 repo](https://github.com/jigneshjain25/jignesh.github.com/blob/gh-pages/index.html)

但[http://jignesh.github.com/](http://jignesh.github.com/)仅显示“Hello World”。为什么它不使用我的 index.html 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T13:48:59.377

您没有发布到 master 分支，而是 gh-pages 分支，但您正在尝试部署用户页面。它还需要是[http://jigneshjain25.github.com](http://jigneshjain25.github.com)因为那是您的用户名。

[https://help.github.com/articles/user-organization-and-project-pages](https://help.github.com/articles/user-organization-and-project-pages)

控制 Hello World 的帐户已正确设置，此处：

[https://github.com/jignesh/jignesh.github.com/blob/master/index.html](https://github.com/jignesh/jignesh.github.com/blob/master/index.html)

# java - 如果多重继承有菱形问题，那么多重接口也应该有同样的问题

> ID：13777568
> 
> 赞同：2
> 
> 时间：2012-12-08T12:44:55.000
> 
> 标签：java

Java 不支持多重继承，因为如果两个类具有相同的函数名但不同的实现，并且如果第三个类继承了这两个类并且如果它想使用该方法，那么它将在应该调用哪个方法上造成混乱。所以java使用了多个接口的概念。但我怀疑两个多个接口是否也具有相同的函数名称但不同的实现，如果第三个类实现这两个接口，并且当它为该方法提供实现时，这不是问题，请解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:47:30.923

Java接口只定义了方法名，没有实现。方法的实现在实现接口的类中完成。这样就避免了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:53:55.703

如果两个接口提供了具有相同签名的方法，而这些方法*应该做两件不同的事情*，那么您确实会遇到一些问题。毕竟，接口不仅指定了方法签名，而且还指定了如何实现它们的协定（尽管编译器无法强制执行）。然后你不能真正扩展这两个接口，因为你的实现只能提供一种方法（所以它必须选择两个合同之一来履行）。但当然，这对运行时系统来说不是问题，更多的是你的界面设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T14:01:06.510

当两个方法具有相同的参数但返回类型不同时，两个接口之间会发生冲突。

例子：

```
public class MultipleInterfaceClash {

    public interface Foo {
        String baz(int a, String x);
    }

    public interface Bar {
        Double baz(int a, String x);
    }

    public class Confused implements Foo, Bar {

        // Compile error: The return type is incompatible with
        // MultipleInterfaceClash.Foo.baz(int, String)
        public Double baz(int a, String x) {
            return null;
        }

    }
} 
```

不可能同时实现这两个接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T12:51:45.850

接口没有实现。

只有方法定义

公共接口 a{ void a(); }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T12:52:49.720

接口只是为用户提供了一个契约，在这种情况下是方法签名。实现类必须遵循这个契约。因此，如果两个或多个接口指定相同的合同，那么实现类没有任何问题，因为实现将服务于目的。

接口没有任何默认实现。仅指定方法签名。

# android - 开发者如何为他的游戏制作在线排名系统？

> ID：13777573
> 
> 赞同：0
> 
> 时间：2012-12-08T12:45:44.473
> 
> 标签：android, network-programming, ranking

我一直在开发我的游戏[MilkyWay](https://play.google.com/store/apps/details?id=com.hasankamal.milkyway)，它对 Android 平台是免费的。

我想知道如何为我的用户建立一个全球排名系统。游戏很简单，用户将简单地根据他们的分数进行排名。用户应该只显示他的等级而不是其他任何东西，所以对我来说这似乎很简单。

但不幸的是，我既不了解很多网络知识，也不知道如何做到这一点。

一个详尽的答案将对我有很大帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:51:47.760

> 目前 OpenFeint for Android 支持排行榜、成就、交友和我们的交叉促销工具。我们的目标是确保 OpenFeint 3.0 中 Android 和 iOS 版本的功能相同。
> 
> 请注意，OpenFeint 服务将于 2012 年 12 月 14 日停止。
> 
> 更多信息请查看 OpenFeint 服务关闭公告。

新的服务名称是 GREE ...

[https://docs.developer.gree.net/en/platform/](https://docs.developer.gree.net/en/platform/)

# python - Python selenium 的 is_element_present 给出了“错误”的答案

> ID：13777574
> 
> 赞同：1
> 
> 时间：2012-12-08T12:45:46.207
> 
> 标签：python, selenium

我正在尝试抓取一个页面，如果数据存在，该页面具有以下“表格视图”元素：

```
<div class="floatRight">
   <a id="MainContent_TabContainerUsageAndCost_TabPanelGasUsage_GasUsageView_UCGasUsage_lnkTableView2" title="Table View" href="javascript:__doPostBack(&#39;ctl00$ctl00$MainContent$TabContainerUsageAndCost$TabPanelGasUsage$GasUsageView$UCGasUsage$lnkTableView2&#39;,&#39;&#39;)" style="color:NoColor;">Table View</a>

</div> 
```

否则，该页面有以下错误消息。

```
<div class="error display">
                <span id="MainContent_TabContainerUsageAndCost_TabPanelElectricityUsage_ElectricityUsageView_UCElectricityUsage_lblMesg" style="font-weight:bold;">The account selected has no usage and costs data currently to be displayed.</span>

</div> 
```

在 selenium 中，我试图在开始抓取数据之前检查上述两个条件。我尝试了以下方法：

```
if self.selenium.is_element_present('link=Table view'):
   self.selenium.click('link=Table view')
else:
   return []  # data not found 
```

但是，“if”语句总是返回“true”，因此即使页面没有“表格视图”链接/元素，也会调用“点击”。

于是，我改写了代码来检查错误信息，如下：

```
if self.selenium.is_element_present('MainContent_TabContainerUsageAndCost_TabPanelElectricityUsage_ElectricityUsageView_UCElectricityUsage_lblMesg'):
    return []  # data not found
else:
    self.selenium.click('link=Table view') 
```

而现在，“if”语句总是返回 false，所以“click”在不应该被调用的时候被调用了！

显然，我没有正确使用 is_element_present 。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:54:32.147

在 Se-RC 中，您的脚本可以向元素发送点击事件，即使它们对用户不可见——它们只需要在 DOM 中即可。在 Se-WebDriver 中，元素也必须对用户可见。如果没有看到您正在抓取的页面的完整 HTML，就无法进一步诊断。

# sql - 一个非常奇怪的 SQL 查询

> ID：13777575
> 
> 赞同：-2
> 
> 时间：2012-12-08T12:45:54.817
> 
> 标签：sql

桌子

这些是下面的列：

城市、名称、支出

```
Paris, Bob, 4       
Paris John, 6     
Tokio  Adam, 5    
Tokio Mike, 3 
```

它应该返回

```
Paris, 10, bob 4
Paris 10, jogn 6
tokio 8 adam 5
tokio 8 mike 3 
```

所以我试图让 City, Name, Payout 列出 City, SUM(payout), name, payout。

我知道我可以在 2 个查询中做到这一点，但我认为用一个来给我的朋友一个惊喜会很有趣。

编辑：答案是这样的：

```
SELECT 
    city, name, payout, SUM(payout) 
FROM 
    table 
GROUP BY 
    city, name 
ORDER BY 
    SUM(payout) DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:03:14.333

如果您使用的 RDBMS 支持窗口函数，您可以使用一个`SELECT`（无子查询）：

```
SELECT city, SUM(payout) OVER (PARTITION BY city) AS sum_per_city,
       name, payout
FROM tableX 
ORDER BY sum_per_city DESC 
       , name ASC ; 
```

# iphone - 在 iOS 6 上的 MKMapView 中轮流转

> ID：13777579
> 
> 赞同：0
> 
> 时间：2012-12-08T12:46:25.447
> 
> 标签：iphone, xcode, navigation, routes, mkmapview

我想知道是否可以在 iOS 6 上的 MKMapView 中创建导航路线，而不是打开内置的 Maps 应用程序？
我用谷歌搜索但没有找到任何答案。

这是我现在使用的代码（打开内置地图应用程序）：

```
-(IBAction) navigation
{
    if (SYSTEM_VERSION_LESS_THAN(@"6.0"))
    {
        NSString *destinationString = @"Afek, Israel";
        NSString *url = [NSString stringWithFormat: @"http://maps.google.com/maps?saddr=%f,%f&daddr=%@",wedMapView.userLocation.coordinate.latitude,wedMapView.userLocation.coordinate.longitude, destinationString];
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];
    }

    else
    {
        Class mapItemClass = [MKMapItem class];
        if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)])
        {
            double latitude = 32.83431728836292;
            double longitude = 35.128666162490845;
            MKPlacemark *placemark = [[[MKPlacemark alloc] initWithCoordinate:CLLocationCoordinate2DMake(latitude, longitude) addressDictionary:nil] autorelease];
            //[mapItem setName:@"Name of your location"];

            // Create a map item for the geocoded address to pass to Maps app
            MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
            [mapItem setName:@"שמורתה, קיבוץ אפק"];

            // Set the directions mode to "Driving"
            // Can use MKLaunchOptionsDirectionsModeWalking instead
            NSDictionary *launchOptions = @{MKLaunchOptionsDirectionsModeKey : MKLaunchOptionsDirectionsModeDriving};

            // Get the "Current User Location" MKMapItem
            MKMapItem *currentLocationMapItem = [MKMapItem mapItemForCurrentLocation];

            // Pass the current location and destination map items to the Maps app
            // Set the direction mode in the launchOptions dictionary
            [MKMapItem openMapsWithItems:@[currentLocationMapItem, mapItem] launchOptions:launchOptions];
        };
    }
} 
```

这是我拥有的 MKMapView，当我按下蓝色地图按钮（在 Waze 按钮上方）时，我想通过转弯路线进行转弯：

![MKMapView](../Images/70116b8acf0661a15dcdb2a79fa101d3.png)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:38:16.873

iOS 6 不为应用程序提供方向，它依赖于内置的地图应用程序来做到这一点。因此，如果您想在您的应用程序中显示路线，您需要找到用于计算路线的服务。你不能使用谷歌，因为他们只允许你在他们的地图上使用他们的数据，而不是在苹果的地图上。您可以查看 CloudMade 和 OpenStreetMap，但您必须为此放弃使用 iOS 6 的地图。它们带有开放的 UI 组件。

# c++ - 按地址调用函数时出现“访问冲突”异常

> ID：13777580
> 
> 赞同：0
> 
> 时间：2012-12-08T12:46:25.900
> 
> 标签：c++, function-pointers, execute

当我知道它是地址和参数时，我正在尝试调用一个函数。

但我不断崩溃：

![在此处输入图像描述](../Images/40d42e3a3a6d58f77cb458cd9560b28a.png)

现在我想知道我的代码是否正确，或者我没有源代码的主程序也不支持这样的调用？

这是我的代码：

```
///////////////////////////////////////////////////////
// From "amx.c", part of the PAWN language runtime:
// http://code.google.com/p/pawnscript/source/browse/trunk/amx/amx.c

ucell GetPlayerPosAddress = NULL;
cell GetPlayerPosPositionData[5] = {4*sizeof(cell),NULL,NULL,NULL,NULL};
AMX FakeAMX;

typedef cell AMX_NATIVE_CALL n_GetPlayerPos( AMX* amx, cell* params );
n_GetPlayerPos* func_GetPlayerPos = NULL;

int GetPlayerPos(int playerid,float *x,float *y,float *z)
{
    GetPlayerPosPositionData[1] = playerid;
    func_GetPlayerPos(&FakeAMX,GetPlayerPosPositionData);
    *x = GetPlayerPosPositionData[2];
    *y = GetPlayerPosPositionData[3];
    *z = GetPlayerPosPositionData[4];
    return 1;
}
///////////////////////////////////////////////////////
PLUGIN_EXPORT int PLUGIN_CALL AmxLoad( AMX *amx )
{
    //Code from sscanf2.5, [PAWN]SSCANF Author: Y_Less
    int
        num,
        idx;
    // Operate on the raw AMX file, don't use the amx_ functions to avoid issues
    // with the fact that we've not actually finished initialisation yet.  Based
    // VERY heavilly on code from "amx.c" in the PAWN runtime library.
    AMX_HEADER *
        hdr = (AMX_HEADER *)amx->base;
    AMX_FUNCSTUB *
        func;
    num = NUMENTRIES(hdr, natives, libraries);
    for (idx = 0; idx != num; ++idx)
    {
        func = GETENTRY(hdr, natives, idx);
        if (!strcmp("GetPlayerPos", GETENTRYNAME(hdr, func)))
        {
            GetPlayerPosAddress = func->address;
            FakeAMX.data = NULL;
            FakeAMX.base = (unsigned char*)&GetPlayerPosAddress;
            n_GetPlayerPos* func_GetPlayerPos = (n_GetPlayerPos*)GetPlayerPosAddress;
            std::cout << "GetPlayerPos Found!" << std::endl;
            break;
        }
    }
    //end sscanf cut
    return 1;
} 
```

我想用这段代码实现的是我想调用一个 AMX 函数，但不是从 AMX 脚本调用，而是从这段代码所在的 DLL 调用。

您在我的代码中看到任何错误还是特定于 AMX 的东西？

我确实得到“找到 GetPlayerPos 地址！” 信息。

这就是我调用函数的方式：

```
 float X;            
            float Y;
            float Z;

            GetPlayerPos(playerid,&X,&Y,&Z); 
```

这是定义和结构：

```
/* calling convention for native functions */
#if !defined AMX_NATIVE_CALL
  #define AMX_NATIVE_CALL
#endif
#if defined __GNUC__
  #define PACKED        __attribute__((packed))
#else
  #define PACKED
#endif

struct tagAMX;
typedef cell (AMX_NATIVE_CALL *AMX_NATIVE)(struct tagAMX *amx, cell *params);
typedef int (AMXAPI *AMX_CALLBACK)(struct tagAMX *amx, cell index,
                                   cell *result, cell *params);
typedef int (AMXAPI *AMX_DEBUG)(struct tagAMX *amx);

/* The AMX structure is the internal structure for many functions. Not all
 * fields are valid at all times; many fields are cached in local variables.
 */
typedef struct tagAMX {
  unsigned char _FAR *base PACKED; /* points to the AMX header plus the code, optionally also the data */
  unsigned char _FAR *data PACKED; /* points to separate data+stack+heap, may be NULL */
  AMX_CALLBACK callback PACKED;
  AMX_DEBUG debug       PACKED; /* debug callback */
  /* for external functions a few registers must be accessible from the outside */
  cell cip              PACKED; /* instruction pointer: relative to base + amxhdr->cod */
  cell frm              PACKED; /* stack frame base: relative to base + amxhdr->dat */
  cell hea              PACKED; /* top of the heap: relative to base + amxhdr->dat */
  cell hlw              PACKED; /* bottom of the heap: relative to base + amxhdr->dat */
  cell stk              PACKED; /* stack pointer: relative to base + amxhdr->dat */
  cell stp              PACKED; /* top of the stack: relative to base + amxhdr->dat */
  int flags             PACKED; /* current status, see amx_Flags() */
  /* user data */
  long usertags[AMX_USERNUM] PACKED;
  void _FAR *userdata[AMX_USERNUM] PACKED;
  /* native functions can raise an error */
  int error             PACKED;
  /* passing parameters requires a "count" field */
  int paramcount;
  /* the sleep opcode needs to store the full AMX status */
  cell pri              PACKED;
  cell alt              PACKED;
  cell reset_stk        PACKED;
  cell reset_hea        PACKED;
  cell sysreq_d         PACKED; /* relocated address/value for the SYSREQ.D opcode */
  #if defined JIT
    /* support variables for the JIT */
    int reloc_size      PACKED; /* required temporary buffer for relocations */
    long code_size      PACKED; /* estimated memory footprint of the native code */
  #endif
} PACKED AMX;

/* The AMX_HEADER structure is both the memory format as the file format. The
 * structure is used internaly.
 */
typedef struct tagAMX_HEADER {
  int32_t size          PACKED; /* size of the "file" */
  uint16_t magic        PACKED; /* signature */
  char    file_version  PACKED; /* file format version */
  char    amx_version   PACKED; /* required version of the AMX */
  int16_t flags         PACKED;
  int16_t defsize       PACKED; /* size of a definition record */
  int32_t cod           PACKED; /* initial value of COD - code block */
  int32_t dat           PACKED; /* initial value of DAT - data block */
  int32_t hea           PACKED; /* initial value of HEA - start of the heap */
  int32_t stp           PACKED; /* initial value of STP - stack top */
  int32_t cip           PACKED; /* initial value of CIP - the instruction pointer */
  int32_t publics       PACKED; /* offset to the "public functions" table */
  int32_t natives       PACKED; /* offset to the "native functions" table */
  int32_t libraries     PACKED; /* offset to the table of libraries */
  int32_t pubvars       PACKED; /* the "public variables" table */
  int32_t tags          PACKED; /* the "public tagnames" table */
  int32_t nametable     PACKED; /* name table */
} PACKED AMX_HEADER;

#define USENAMETABLE(hdr) \
    ((hdr)->defsize==sizeof(AMX_FUNCSTUBNT))

#define NUMENTRIES(hdr,field,nextfield) \
    (unsigned)(((hdr)->nextfield - (hdr)->field) / (hdr)->defsize)

#define GETENTRY(hdr,table,index) \
    (AMX_FUNCSTUB *)((unsigned char*)(hdr) + (unsigned)(hdr)->table + (unsigned)index*(hdr)->defsize)

#define GETENTRYNAME(hdr,entry) \
    (USENAMETABLE(hdr) ? \
        (char *)((unsigned char*)(hdr) + (unsigned)((AMX_FUNCSTUBNT*)(entry))->nameofs) : \
        ((AMX_FUNCSTUB*)(entry))->name) 
```

这就是程序中的函数“看起来像”的样子：

```
// native GetPlayerPos(playerid, &Float:x, &Float:y, &Float:z)
static cell AMX_NATIVE_CALL n_GetPlayerPos(AMX *amx, cell *params)
{
    CHECK_PARAMS(4);

        cell* cptr;
        amx_GetAddr(amx, params[2], &cptr);
        *cptr = amx_ftoc(pPlayer->m_vecPos.X);
        amx_GetAddr(amx, params[3], &cptr);
        *cptr = amx_ftoc(pPlayer->m_vecPos.Y);
        amx_GetAddr(amx, params[4], &cptr);
        *cptr = amx_ftoc(pPlayer->m_vecPos.Z);

        return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:09:00.683

看起来`func_GetPlayerPos`函数指针为NULL。你有没有设置过？

# c - 如何将 PCM 数据转换为十六进制数据

> ID：13777584
> 
> 赞同：0
> 
> 时间：2012-12-08T12:46:45.540
> 
> 标签：c, linux

我正在开发一个读取麦克风并将 PCM 数据存储在缓冲区中的应用程序，我想将缓冲区转换为十六进制值并对其进行操作。基本上我想在我的 C 程序中实现 xxd 功能。我可以手动完成，方法是将 PCM 数据写入文件（file.pcm），然后使用“xxd -r file.c >> file.h”。这将给出结构中的十六进制数据和长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:26:58.397

好吧，我假设你想要十六进制到十六进制字符串“转换”。

以下是从标准输入获取一些输入并将其作为十六进制数据写入文件的代码：

```
#include <stdio.h>

int main(int argc, char* argv[])
{
    FILE* fd = NULL;            // File descriptor.
    unsigned char c  = '\0';    // Character.
    int status = 0;             // fread() status.

    if(argv[1] == NULL)
    {
        fprintf(stderr,
            "Usage: %s <file name>\n",
            argv[0]);
        return 1;
    }

    fd = fopen(argv[1], "w");
    if(fd == NULL)
    {
        fprintf(stderr,
        "Error: cannot write to file %s.\n",
        argv[1]);
        return 1;
    }

    for(status = fread(&c, 1, 1, stdin);
        c != EOF && status != 0;
        status = fread(&c, 1, 1, stdin)
    )
    {
        char buff[2];
        sprintf(buff, "%02X", (unsigned char)c);
        c = 0;
        fwrite(buff, 1, 2, fd);
    }

    fclose(fd);

    return 0;
} 
```

请注意以下几点：

1.  放入文件中的字符串是连续的。没有换行符（因为输入中的换行符将被转换为`0x0A`，`0x0D`或两者兼而有之）。如果要添加格式，请添加一个计数器，并根据计数器的值（例如，行`if( !((i+1) % 16) ) { buff[0] = '\n'; fwrite(buff, 1, 1, fd); }`后）将空格和换行符（和或其他）写入文件`fwrite(buff, 1, 2, fd);`。
2.  如果要在生成的文件上使用 xxd，请在从输入中读取 16 个字符后添加新行。此外，您需要在每行的开头添加偏移量。
3.  最后但并非最不重要的一点是，从数据到十六进制字符串的转换是`sprintf`在线完成的。它“打印到字符串中”（sprintf）解释为`buff`“*两位零左填充的大写十六进制”*`char c`

# bash - 为什么我在安装 kakasi pecl 版本时会出现错误？

> ID：13777587
> 
> 赞同：1
> 
> 时间：2012-12-08T12:47:08.677
> 
> 标签：bash, php-extension, pecl

我希望以前成功安装过kakasi的人可以在这里帮助我。

我的印象是，下面看到的“--prefix /home/mrhowtos/public_html”允许我安装在 /home/mrhowtos/public_html 中，我需要这样做，因为我没有安装尝试写入的权限.

```
>svn checkout http://svn.php.net/repository/pecl/kakasi/trunk kakasi
>cd kakasi
>phpize
>./configure --prefix /home/mrhowtos/public_html 
>make 
```

此配置似乎工作正常，但在 make 命令中，第一行有错误是这样的：

```
/home5/mrhowtos/public_html/kakasi/kakasi.c:25:23: error: libkakasi.h: No such file or directory 
```

如果重要，下面是 make 命令的整个输出

```
mrhowtos@mrhowtosay.com [~/public_html/kakasi-svn]# make
/bin/sh /home5/mrhowtos/public_html/kakasi-svn/libtool --mode=compile cc  -I. -I/home5/mrhowtos/public_html/kakasi-svn -DPHP_ATOM_INC -I/home5/mrhowtos/public_html/kakasi-svn/include -I/home5/mrhowtos/public_html/kakasi-svn/main -I/home5/mrhowtos/public_html/kakasi-svn -I/usr/php/53/usr/include/php -I/usr/php/53/usr/include/php/main -I/usr/php/53/usr/include/php/TSRM -I/usr/php/53/usr/include/php/Zend -I/usr/php/53/usr/include/php/ext -I/usr/php/53/usr/include/php/ext/date/lib  -DHAVE_CONFIG_H  -g -O2   -c /home5/mrhowtos/public_html/kakasi-svn/kakasi.c -o kakasi.lo
libtool: compile:  cc -I. -I/home5/mrhowtos/public_html/kakasi-svn -DPHP_ATOM_INC -I/home5/mrhowtos/public_html/kakasi-svn/include -I/home5/mrhowtos/public_html/kakasi-svn/main -I/home5/mrhowtos/public_html/kakasi-svn -I/usr/php/53/usr/include/php -I/usr/php/53/usr/include/php/main -I/usr/php/53/usr/include/php/TSRM -I/usr/php/53/usr/include/php/Zend -I/usr/php/53/usr/include/php/ext -I/usr/php/53/usr/include/php/ext/date/lib -DHAVE_CONFIG_H -g -O2 -c /home5/mrhowtos/public_html/kakasi-svn/kakasi.c  -fPIC -DPIC -o .libs/kakasi.o
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:25:23: error: libkakasi.h: No such file or directory
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:55: error: 'first_arg_force_ref' undeclared here (not in a function)
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c: In function 'zif_kakasi':
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:120: warning: 'zend_get_parameters_ex' is deprecated (declared at /usr/php/53/usr/include/php/Zend/zend_API.h:229)
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:159: warning: assignment makes pointer from integer without a cast
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c: In function 'php_kakasi_array_compare':
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:195: warning: assignment makes pointer from integer without a cast
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:196: warning: assignment makes pointer from integer without a cast
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c: In function 'zif_kakasi_asort':
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:231: warning: 'zend_get_parameters_ex' is deprecated (declared at /usr/php/53/usr/include/php/Zend/zend_API.h:229)
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c: In function 'zif_kakasi_arsort':
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:266: warning: 'zend_get_parameters_ex' is deprecated (declared at /usr/php/53/usr/include/php/Zend/zend_API.h:229)
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c: In function 'php_kakasi_ignorecase_array_compare':
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:327: warning: assignment makes pointer from integer without a cast
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:328: warning: assignment makes pointer from integer without a cast
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c: In function 'zif_kakasi_asorti':
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:430: warning: 'zend_get_parameters_ex' is deprecated (declared at /usr/php/53/usr/include/php/Zend/zend_API.h:229)
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c: In function 'zif_kakasi_arsorti':
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:465: warning: 'zend_get_parameters_ex' is deprecated (declared at /usr/php/53/usr/include/php/Zend/zend_API.h:229)
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c: In function 'zif_kakasi_split':
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:501: warning: 'zend_get_parameters_ex' is deprecated (declared at /usr/php/53/usr/include/php/Zend/zend_API.h:229)
/home5/mrhowtos/public_html/kakasi-svn/kakasi.c:513: warning: assignment makes pointer from integer without a cast
make: *** [kakasi.lo] Error 1 
```

如果它很重要，请从配置中输出

```
mrhowtos@mrhowtosay.com [~/public_html/kakasi-svn]# ./configure --prefix /home/mrhowtos/public_html
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for a sed that does not truncate output... /usr/bin/sed
checking for cc... cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking for system library directory... lib
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for PHP prefix... /usr
checking for PHP includes... -I/usr/php/53/usr/include/php -I/usr/php/53/usr/include/php/main -I/usr/php/53/usr/include/php/TSRM -I/usr/php/53/usr/include/php/Zend -I/usr/php/53/usr/include/php/ext -I/usr/php/53/usr/include/php/ext/date/lib
checking for PHP extension directory... /usr/php/53/usr/lib64/php/modules
checking for PHP installed headers prefix... /usr/php/53/usr/include/php
checking if debug is enabled... no
checking if zts is enabled... no
checking for re2c... re2c
checking for re2c version... invalid
configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.
checking for gawk... gawk
checking for kakasi support... yes, shared
checking for a sed that does not truncate output... (cached) /usr/bin/sed
checking for fgrep... /usr/bin/grep -F
checking for ld used by cc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking for /usr/bin/ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for ar... ar
checking for strip... strip
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from cc object... ok
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if cc supports -fno-rtti -fno-exceptions... no
checking for cc option to produce PIC... -fPIC -DPIC
checking if cc PIC flag -fPIC -DPIC works... yes
checking if cc static flag -static works... yes
checking if cc supports -c -o file.o... yes
checking if cc supports -c -o file.o... (cached) yes
checking whether the cc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
configure: creating ./config.status
config.status: creating config.h
config.status: config.h is unchanged
config.status: executing libtool commands 
```

和 phpize

```
mrhowtos@mrhowtosay.com [~/public_html/kakasi-svn]# phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626 
```

# java - 从 http 下载文件中检索文件名

> ID：13777590
> 
> 赞同：5
> 
> 时间：2012-12-08T12:47:32.290
> 
> 标签：java, http, download, filenames

我正在尝试从网络服务器下载文件并将其保存在服务器与文件一起发送的原始文件名下。下载效果很好，但我无法获得真实的文件名。

例如，我正在尝试下载[此文件](http://www.foxitsoftware.com/downloads/latest.php?product=Foxit-Reader)（Foxit PDF Reader）。

如果我在 Chrome 等浏览器中使用此链接，浏览器会下载包含版本等确切名称的文件。我从哪里获得此名称？我尝试阅读标题信息并正在搜索，`Content-Disposition`但服务器没有发送此信息。我从哪里获得确切的文件名？

我试过这样的事情：

```
try {            
  URL webfile = new URL("http://www.foxitsoftware.com/downloads/latest.php?product=Foxit-Reader");
  URLConnection con = webfile.openConnection();
  Map map = con.getHeaderFields();
  Set set = map.entrySet();
  Iterator iterator = set.iterator();
  while (iterator.hasNext()) {
      System.out.println(iterator.next());
  }
} catch (IOException ex) {
  System.out.println("Error: "+ex.getMessage());
} 
```

正如您在输出中看到的那样，没有`Content-Disposition`：

```
null=[HTTP/1.1 200 OK]
ETag=["244005-f36d40-4d003f3868000"]
Date=[Sat, 08 Dec 2012 12:29:02 GMT]
Content-Length=[15953216]
Last-Modified=[Tue, 04 Dec 2012 10:01:36 GMT]
Content-Type=[application/x-msdos-program]
Connection=[close]
Accept-Ranges=[bytes]
Server=[Apache/2.2.16 (Debian)] 
```

那么如何检索确切的文件名呢？浏览器中的链接下载名为 的文件`FoxitReader544.11281_enu_Setup.exe`。

有任何想法吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T12:52:04.217

```
GET /downloads/latest.php?product=Foxit-Reader HTTP/1.1 
```

给出一个响应`HTTP/1.1 302 Found`

并设置响应头

```
Location: http://cdn04.foxitsoftware.com/pub/foxit/reader/desktop/win/5.x/5.4/enu/FoxitReader544.11281_enu_Setup.exe 
```

最后，你发出，

```
GET /pub/foxit/reader/desktop/win/5.x/5.4/enu/FoxitReader544.11281_enu_Setup.exe HTTP/1.1 
```

这就是文件名的来源。因此，**如果**重定向是透明发生的，您仍然可以从请求参数中获取文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:54:42.190

当您请求上面的 URL 时，服务器响应 302 重定向到（标题键：位置）：[http ://cdn04.foxitsoftware.com/pub/foxit/reader/desktop/win/5.x/5.4/enu /FoxitReader544.11281_enu_Setup.exe](http://cdn04.foxitsoftware.com/pub/foxit/reader/desktop/win/5.x/5.4/enu/FoxitReader544.11281_enu_Setup.exe)和 FoxitReader544.11281_enu_Setup.exe 是单击原始链接时保存到我的计算机的文件名。

# clojure - 如何减少参数列表而不是集合？

> ID：13777591
> 
> 赞同：3
> 
> 时间：2012-12-08T12:47:32.083
> 
> 标签：clojure

clojure 中是否有一个函数需要两个或多个参数并将它们提供给一个函数，所以 f(f(f(a, b), c), d) 等。

我知道我可以做这样的事情：

```
(fn g [& items] (reduce f (seq items))) 
```

但是有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:53:18.153

这正是你应该这样做的方式。事实上，在`seq`不改变行为的情况下，移除会让它变得更简单。

# database - Redis：错误表中的错误数据

> ID：13777595
> 
> 赞同：0
> 
> 时间：2012-12-08T12:48:35.257
> 
> 标签：database, node.js, redis

我正在尝试解决一个困扰我一个月的问题

我正在使用**Node.js 和 Redis**构建应用程序的后端，由于我们的结构，我们必须**将数据从一个 redis 表传输到另一个表** *（我的意思是**表**是我们使用“select”的那个，即“select 2” )*

我们在一秒钟内收到了很多请求并推送了很多响应，无论我尝试了多少，**我都无法阻止数据混合**。假设我们有一个必须存储在**Redis 表 #2中的****“teacherID”**。还有一个必须存储在**Redis 表 #4中的****“studentID”**。不管我尝试了什么（我已经多次检查了我的代码），我无法阻止**teacherID 进入 studentID**。我尝试的最后一个技巧实际上是**在每个选择处放置回调。**;

 ******```
redisClient.select(4, function(err) {
  if(err)
    console.log("You could not select the table. Function will be aborted");
  else {
    // Proceed with the logic
  }
}); 
```

我不能简单地阻止这种混乱的原因是什么？让我抓狂的一个细节是，它在本地和在线上都非常有效，但是每当多个请求到达服务器时，它就会混合在一起。有什么建议可以防止此错误吗？*（即使我无法将代码共享给 NDA，我也可以确保逻辑已正确编码）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:49:44.300

我不确定您关于必须“将数据从一个 redis 表传输到另一个表”的说法。通读您的示例，您似乎可以简单地拥有两个写入不同数据库（您称为“表”）的 redis 客户端。

它看起来类似于：

```
var redis = require("redis");
var client1 = redis.createClient(6379, '127.0.0.1');
var client2 = redis.createClient(6379, '127.0.0.1');

client1.select(2, function(err){
    console.log('client 1 is using database 2');
});

client2.select(4, function(err){
    console.log('client 2 is using database 4');
}); 
```

然后，无论您的读/写逻辑在哪里，您只需使用适当的客户端：

```
client1.set("someKey", "teacherID", function(err){
    // ...
});

client2.set("someKey", "studentID", function(err){
    // ...
}); 
```

您显然可以将上述内容封装到带有回调的函数中，嵌套操作，使用一些异步库等，以使其完成您需要做的任何事情。如果您需要将值从数据库 2 传输到数据库 4，您可以执行简单的`client1.get()`and `client2.set()`.******

# google-chrome-extension - 从 mime 类型触发或调用 Chrome 扩展

> ID：13777597
> 
> 赞同：5
> 
> 时间：2012-12-08T12:48:37.377
> 
> 标签：google-chrome-extension

我正在编写一个 Google Chrome 扩展程序，特别是一个轻量级的 EPUB 阅读器，目标是与 Chrome 中内置的 PDF 阅读器一样流畅。

我想弄清楚的是，当您单击通常会强制您将 epub 文件保存到磁盘的链接时，您是否可以以某种方式*自动触发扩展程序。*

在一个完美的世界中，每个指向 epub 文件的链接都指向 a`file.epub`并且您可以使用内容脚本将其指向扩展名，但不幸的是，通常情况并非如此。所以我在想的是，它必须在 HTTP get 请求至少返回标头后触发，并通过 a`chrome.webRequest`或其他东西触发 mime 类型。

您可以从提供给您的文件的 mime 类型调用 Google Chrome 扩展程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:37:24.940

假设您对所有功能都有浏览器操作，您可以使用[chrome.webRequest.onHeadersReceived](https://developer.chrome.com/extensions/webRequest.html#event-onHeadersReceived)、[chrome.browserAction.enable()](https://developer.chrome.com/extensions/browserAction.html#method-enable)和[chrome.browserAction.disable()检测和启用\禁用扩展](https://developer.chrome.com/extensions/browserAction.html#method-disable)

**伪代码**

***清单.json***

```
{
  "name": "Detect Mime type",
  "version": "1.0",
  "description": "Detecting Mime type and enabling browser action",
  "permissions": ["webRequest", "webRequestBlocking",
                  "<all_urls>"],
  "background": {
    "scripts": ["background.js"]
  },
  "browser_action":{
    "default_popup":"popup.html", // Use you related code here
    "default_icon":"icon.jpg"
  },    
  "manifest_version": 2
} 
```

***背景.js***

```
chrome.webRequest.onHeadersReceived.addListener(function (object){
    // Do your code for related header(s)
    //Invoke chrome.browserAction.enable(integer tabId) or chrome.browserAction.disable(integer tabId)
},{urls: ["<all_urls>"]});
chrome.tabs.query({"status":"complete"}, function(tabs){
     //Disable all browser actions using chrome.browserAction.disable(integer tabId)
}); 
```

如果您需要更多信息，请与我们联系。

# google-app-engine - bulkloader 不导入 ndb.model

> ID：13777605
> 
> 赞同：1
> 
> 时间：2012-12-08T12:49:12.793
> 
> 标签：google-app-engine, bulkloader

我对 Python 和 GAE 还是很陌生。我在本地服务器上有一个运行良好的应用程序。我可以将实体添加到我的数据存储中，我可以查看我的网站等：一切都很好。

现在我正在尝试使用 bulkloader 将实体添加到我的数据存储区。我按照[https://developers.google.com/appengine/docs/python/tools/uploadingdata](https://developers.google.com/appengine/docs/python/tools/uploadingdata)上的教程进行操作。我的装载机如下：

```
from google.appengine.ext import ndb
from google.appengine.tools import bulkloader
import my_model

class ArticleLoader(bulkloader.Loader):
  def __init__(self):
    bulkloader.Loader.__init__(self, 'Article',
                               [('title', str),
                                ('author', str)
                                ])

loaders = [ArticleLoader] 
```

我收到错误消息：

```
No module named my_model 
```

有没有人可以解决这个问题？

注意：我只使用一个目录。`my_model`所以我的加载器与导入模块的其他文件位于同一位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T00:51:19.970

如果您`PYTHONPATH`的设置不正确，也会发生这种情况。如果您使用的是 Linux，请在运行 Bulkloader 之前尝试运行它：

```
export PYTHONPATH=$PYTHONPATH:. 
```

这会将您的当前目录附加到您的`PYTHONPATH`并且应该使您的`my_model`模块可见。由于我的记忆力很差而且我总是忘记这样做，所以我最终使用了一个简单的 shell 脚本，它在开头就包含了这个脚本，然后是 bulkload 命令本身。

如果您在 Windows 上，您应该能够使用`sys.path.append`. 尚未对此进行测试，但您可以尝试将其添加到您的脚本中（请注意，这也适用于 Linux）：

```
import sys
# ...
sys.path.append('.') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T00:43:38.270

您的代码应位于名为`my_model.py`. 您收到该错误是因为没有名为`my_module`. 可能值得一读 Python[模块](http://docs.python.org/2/tutorial/modules.html)和[包](http://docs.python.org/2/tutorial/modules.html#packages)文档。

# python - Python脚本似乎没有从上到下执行

> ID：13777611
> 
> 赞同：2
> 
> 时间：2012-12-08T12:50:22.390
> 
> 标签：python, user-interface, tkinter, urllib2

我想根据它们的名称（，，...）从远程服务器下载`http://mysite.com/id?id=abc1`图像`http://mysite.com/id?id=abc2`。

下载部分有效，但由于可能有很多文件要下载（有时超过 200 个），我想添加一个标签“请稍候”（Tkinter）。问题是我的标签只有在下载完成时才会出现，这当然不是很有用。

我怎样才能让它更早出现？

```
from Tkinter import *
import urllib2
import time

window = Tk()
window.title('My Downloader')
photo=PhotoImage(file="logo.gif")
labl = Label(window, image=photo)
labl.pack()
mainid = Label(window, text = 'Main id:')
mid = Entry(window)
complete = Label(window, text = 'download complete !')

def dl():
    right = Label (window, text ='downloading...Please wait')
    right.pack()
    time.sleep(2)
    i='10'

    while int(i) <= 100000 :
        if len(str(i))==1:
            i="0000"+str(i)
        elif len(str(i))==2:
            i="000"+str(i)
        elif len(str(i))==3:
            i="00"+str(i)
        elif len(str(i))==4:
            i="0"+str(i)

        url = 'http://mysite.com/id?recordID='+ str(mid.get())+str(i)

        try:
            dltest = urllib2.urlopen(url)            
            with open(str(mid.get())+str(i)+'.tiff', 'wb') as f:
                while True:
                    content = dltest.read()
                    if not content: break
                    f.write(content)                
        except urllib2.URLError:            
            if int(i)==10:
                wrong = Label (window, text ='wrong id ')
                wrong.pack()
                break
            else:                
                complete.pack()
                break                                       
        i=int(i)+10
dlbutton = Button(window, text =' Download!', command=dl)
mainid.pack()
mid.pack()
dlbutton.pack() 
window.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T12:53:28.347

设置标签后只需调用 window.update() 即可。

```
right = Label (window, text ='downloading...Please wait')
right.pack()
window.update() 
```

但更好的做法是对 URL 下载进行线程化。这可能是一项相当复杂的任务，但允许您在下载文件时释放 GUI。查看[此页面](http://www.artfulcode.net/articles/multi-threading-python/)，了解如何线程化您的程序。

# php - 在 C# ASP.NET 中解析 XML 的问题

> ID：13777616
> 
> 赞同：0
> 
> 时间：2012-12-08T12:50:57.063
> 
> 标签：php, asp.net, xml, web-services, parsing

我有一个 PHP 中的 Web 服务，它读取专辑的 XML 文件，并简单地将其作为字符串返回到我的 ASP.NET Web 表单。现在，发送和接收都很好。

问题是现在我想解析这些数据，以便将新专辑和其他信息（例如流派、艺术家和歌曲）保存到附加到我的 ASP.NET 网站的数据库中，这让我很头疼。

下面是 Web Service 客户端的代码：

```
protected void btnGetAlbums_Click(object sender, EventArgs e)
        {
            phpPublisher.albums albums = new albums();
            string result = albums.getAlbums();
            if (String.IsNullOrEmpty(result))
            {
                txtResult.Text = "No albums found";
            }
            else
            {
                // parse XML
                var xml = XElement.Parse(result);

                var albumList = xml.Descendants("Albums")
                    .Elements("Album");

                if (albumList.Count() > 0)
                {
                    txtResult.Text = "Has at least 1 album!";
                }
            }
        } 
```

目前这只是非常“演示”式的代码，我什至还没有处理数据库插入等问题，因为我什至无法解析数据。

如果我`xml`在文本框中输出变量`txtResult`，它会显示：

```
<Albums>  <Album>    <AlbumTitle>Stripped</AlbumTitle>    <AlbumArtist>Christina Aguilera</AlbumArtist>    <AlbumGenre>Pop</AlbumGenre>    <AlbumSongs>      <AlbumSong>Beautiful</AlbumSong>    </AlbumSongs>  </Album></Albums> 
```

都在一条线上，这令人难以置信的沮丧。我不知道它是否甚至可以解析这样的数据......我想在 PHP 端做的只是发送一个 ASP.NET 可以读取的 XML 数据对象。这可能吗？

这是我的 PHP Web 服务函数的样子（它返回一个字符串）。

```
function getAlbums() {
      $dataSource = "albums.xml";

      if(file_exists($dataSource)) {
         $xml = simplexml_load_file($dataSource);

         $dom = new DOMDocument('1.0');
         $dom->preserveWhiteSpace = false;
         $dom->formatOutput = true;
         $dom->loadXML($xml->asXML());

         return $dom->saveXML();
      } else {
         return null;
      }
   } 
```

任何帮助表示赞赏。谢谢你。

PS 当我执行`albumList.Count()`时，它返回 0，这意味着列表不包含任何元素，因此某处存在解析错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:43:50.697

尝试

```
var albumList = xml.Elements("Album"); 
```

# android - Android Google Maps v2 删除自定义图块上的标签

> ID：13777624
> 
> 赞同：1
> 
> 时间：2012-12-08T12:52:02.273
> 
> 标签：android, google-maps, android-maps

我在基本的谷歌地图 v2 API 上显示了自定义图块，它运行良好，除了建筑物的谷歌标签显示在我的自定义图块上。我不希望它这样做，但我需要其余的图块，因为我只有地图某些部分的自定义图块。

无论如何要禁用自定义图块下的标签或根本地图上的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:08:34.220

有一种方法可以使用 setMapType(MAP_TYPE_NONE) 完全隐藏基础层，该方法也隐藏了标签。看看这是否有助于您的用例。

# c# - c#上的'where'子句数据源

> ID：13777625
> 
> 赞同：0
> 
> 时间：2012-12-08T12:52:03.727
> 
> 标签：c#, sql-server, datasource, where

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:arqsi43ConnectionString %>" SelectCommand="SELECT [nome], [votos], [id] FROM [Playlist] WHERE ([semana_votacao] = @semana_votacao)">
   <SelectParameters>
       <asp:QueryStringParameter Name="semana_votacao" 
                QueryStringField="SELECT MAX(id) FROM VotacaoSemana" Type="Int32" />
   </SelectParameters>
</asp:SqlDataSource> 
```

我有 2 张桌子 -`PlayList`和`VotacaoSemana`.

我需要在 gridview 上显示`PlayList`其属性`semana_votacao`等于 table 中的 max id 的所有值`votacaosemana`。

我使用向导尝试配置它，但我做错了，因为gridview是空的......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:58:33.173

您不能为`QueryStringField`is编写 sql 查询`url query string`。改变你`SelectCommand`如下和`no need to have parameters`

```
SelectCommand = "SELECT [nome], [votos], [id] FROM [Playlist] 
WHERE [semana_votacao] = (SELECT MAX(id) FROM VotacaoSemana)" 
```

# jquery - Jquery从缓存的选择器中隐藏所有除了选定的索引

> ID：13777632
> 
> 赞同：0
> 
> 时间：2012-12-08T12:52:27.677
> 
> 标签：jquery, jquery-selectors

这是隐藏所有内容，而不是排除选定的索引。

```
this.showGroup = function(groupIndex) {

    var $groups = $("#products > li.group");    

    // Hide all groups apart from selected index
    $groups.not(groupIndex).find(".scroller").hide();

    // Show selected index
    $groups.eq(groupIndex).find(".scroller").slideDown(); 
```

我无法更改第一行`$groups`，因为它在我的函数中进一步使用并且需要选择所有组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:53:54.627

根据您的 HTML，您可能想要

```
$groups.not(":eq("+groupIndex+")").find(".scroller").hide(); 
```

如果您不想构建选择器，可以使用 filter ：

```
$groups.filter(function(i){return i!=groupIndex}).find(".scroller").hide(); 
```

# compression - 解压缩截断的压缩流 (Deflate)

> ID：13777633
> 
> 赞同：0
> 
> 时间：2012-12-08T12:52:37.297
> 
> 标签：compression, deflate, truncation

我正在使用 udp 在服务器和客户端之间进行通信。
如果数据包太长，服务器可以压缩数据包（Deflate）。
现在的问题是有时数据包仍然太长，即使经过压缩。
经过一些试验，我发现这种截断的压缩数据仍然是可解压缩的（当然直到截断点）。

现在的问题是：
除了截断（对于 Deflate），解压的结果可以改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:55:26.850

如果您的问题是：“截断的 deflate 流的解压缩能否提供除截断原始未压缩数据之外的其他内容？”，那么答案是否定的。不能将截断的代码误解为其他代码。构成 deflate 流的 Huffman 码是前缀码，因此如果流中的最后一个码在该码位的中间被截断，则该码根本不会被解码。前缀位明确表示整个代码不存在。

# python - 包装对 xmlrpc 服务器的函数调用

> ID：13777636
> 
> 赞同：1
> 
> 时间：2012-12-08T12:53:05.980
> 
> 标签：python, attributes, xml-rpc

我有一个`xmlrpc`运行如下的服务器

```
from SimpleXMLRPCServer import SimpleXMLRPCServer

def add(x,y):
    return x+y

server = SimpleXMLRPCServer(("localhost", 8000))
server.register_function(add, 'add.numbers')
server.serve_forever() 
```

在以下代码中调用使用：

```
import xmlrpclib

class DeviceProxy(object):
    def __init__(self, uri):
        self.rpc = xmlrpclib.ServerProxy(uri)
    def __getattr__(self, attr):
        return getattr(self.rpc, attr)

original = DeviceProxy.__getattr__

def mygetattr(device, attr):
    def wrapper(*args, **kw):
        print('called with %r and %r' % (args, kw))
        return original(device, attr)(*args, **kw)
    return wrapper

DeviceProxy.__getattr__ = mygetattr

dev = DeviceProxy("http://localhost:8000/RPC2")
print dev.add.numbers(4,6) 
```

如您所见，该类出于此问题范围之外的原因`Proxy`包装了代理，通过方法转发任意调用。由于此问题范围之外的其他原因，我需要用不同的方法包装/替换此方法，例如打印出调用的函数的名称、参数等（请参阅[此处](https://stackoverflow.com/questions/13776504/how-are-arguments-passed-to-a-function-through-getattr)的相关问题）。`xmlrpc``__getattr__``__getattr__`

但是这种方法不起作用，它给出了以下错误：

```
AttributeError: 'function' object has no attribute 'numbers' 
```

该示例按预期工作，当我

*   不要`DeviceProxy.__getattr__`用别的东西代替
*   替换`DeviceProxy.__getattr__`为函数

    def dummy（实例，属性）：返回原始（设备，属性）

*   `xmlrpc`用零点名称替换函数的名称（例如，只是`sum`代替`sum.numbers`）

您可以验证自己通过 xmlrpc 代理进行的以下直接调用将按预期工作：

```
dev = xmlrpclib.ServerProxy("http://localhost:8000/RPC2")
print dev.add.numbers(4,6) 
```

我的问题：如何解决我的问题，即如何能够`DeviceProxy.__getattr__`正确地包装/覆盖以便能够看到调用的函数、所有参数等，而无需在`xmlrpc`服务器或`DeviceProxy`类中进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:35:17.763

我可以在这里看到两个问题：

1.  DeviceProxy 的所有属性都起作用吗？如果不是，那么您有时会在需要对象时返回一个函数
2.  当您包装该功能时，您不会跨成员复制 - 用于`functools.wraps`实现这一点。

这应该有效

```
from functools import wraps

@wraps(original)  # probably not needed, but sensible
def mygetattr(device, key):
    attr = original(device, key)
    if callable(attr):
        @wraps(attr)  # copy across __name__, __dict__ etc
        def wrapper(*args, **kw):
            print('called with %r and %r' % (args, kw))
            return attr(*args, **kw)
        return wrapper
    else:  # handle (or rather, don't) non-callable attributes
        return attr 
```

# fft - 如何“调零”DFT输出？

> ID：13777640
> 
> 赞同：2
> 
> 时间：2012-12-08T12:53:21.170
> 
> 标签：fft, phase

我了解 DFT 的复杂输出包含离散频率的“幅度”和“相位”信息。

```
Amplitude[n] = sqrt((r[n]*r[n]) + (i[n]*i[n]))
Phase[n] = (atan2(i[n],r[n]))
Frequency[n] = n * (sample_rate / (fft_input_length / 2)) 
```

似乎我应该能够使用频率、幅度和相位信息来计算每个输出箱的幅度，就好像相应频率的输入在 FFT 输入中具有零相位对齐一样。但我正在画一个空白。

* * *

嗯，深入研究我的问题，我发现无论输入如何，FFT 输出的虚数始终为 0.0。所以我猜我的代码有缺陷或者算法不是我需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:58:25.600

如果您想将所有 DFT 结果 bin 旋转到参考起始点（样本 0）的零相位：设置 r[n] =amplitude[n], i[n] = 0; 如果您想要严格的真实数据，请确保 r[n] 在整个 DFT 长度上是对称的；并在需要时计算 IDFT。

# javascript - 带有选项和可访问方法的 jQuery 插件模板？

> ID：13777644
> 
> 赞同：5
> 
> 时间：2012-12-08T12:53:47.417
> 
> 标签：javascript, jquery

我想构建一个具有可访问方法和选项的插件，这适用于一个复杂的插件。我需要可以在插件外部访问这些方法，因为如果有人向 DOM 广告一些东西，它需要更新（所以我们不需要再次运行完整的插件）。

我过去看到有这样的插件，但我找不到它们，所以我不能看它们。我还是 javascript 的新手，所以任何帮助都会很好。

如果我们仍然可以全局覆盖这些选项，那就太好了。

我想如何使用插件：

```
// options
$('#someid').myplugin({name: 'hello world'});

// methods(would be nice if we can use this)
$('#someid').myplugin('update'); 
```

// 我的旧插件包装器

```
;(function($, window, document, undefined){

    $.fn.pluginmyPlugin = function(options) { 

        options = $.extend({}, $.fn.pluginmyPlugin.options, options); 

            return this.each(function() {  

                var obj = $(this);

                // the code 
            });     
        };

        /**
        * Default settings(dont change).
        * You can globally override these options
        * by using $.fn.pluginName.key = 'value';
        **/
        $.fn.pluginmyPlugin.options = {
            name: '',
                            ...         
        };

})(jQuery, window, document); 
```

**更新**

**因此，在查看了 jQuery 文档后，我构建了以下代码，如果代码有问题，请告诉我，如果可以更好地构建......**

```
;(function($, window, document, undefined){

    var methods = {

        init : function( options ) {

            options = $.extend({}, $.fn.pluginmyPlugin.options, options); 

            return this.each(function(){

            alert('yes i am the main code')

            });
        },
        update : function( ) {
             alert('updated')
        }
    };

    $.fn.pluginmyPlugin = function(method) { 

        if ( methods[method] ) {
          return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
          return methods.init.apply( this, arguments );
        } else {
          $.error( 'Method ' +  method + ' does not exist on this plugin' );
        }    

    };

        /**
        * Default settings(dont change).
        * You can globally override these options
        * by using $.fn.pluginName.key = 'value';
        **/
        $.fn.pluginmyPlugin.options = {
            name: 'john doe',
            //....
        };

})(jQuery, window, document); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:44:01.210

替代：

```
var Plugin = function($self, options) {
  this.$self = $self;
  this.options = $.extend({}, $.fn.plugin.defaults, options);
};

Plugin.prototype.display = function(){
  console.debug("Plugin.display");
};

Plugin.prototype.update = function() {
  console.debug("Plugin.update");
};

$.fn.plugin = function(option) {
  var options = typeof option == "object" && option;

  return this.each(function() {
    var $this = $(this);
    var $plugin = $this.data("plugin");

    if(!$plugin) {
      $plugin = new Plugin($this, options);
      $this.data("plugin", $plugin);
    }

    if (typeof option == 'string') {
      $plugin[option]();
    } else {
      $plugin.display();
    }
  });
};

$.fn.plugin.defaults = {
  propname: "propdefault"
}; 
```

用法：

```
$("span").plugin({
  propname: "propvalue"
}); 
```

```
$("span").plugin("update"); 
```

这荒谬地类似于[Twitter Bootstrap 的 JavaScript 模板](https://github.com/twitter/bootstrap/tree/master/js)。但是，它并没有完全从那里拿走。我有很长的使用历史[`.data()`](http://api.jquery.com/data/)。

不要忘记适当地包装它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T00:20:59.743

如果你想像这样使用插件：

```
// Init plugin
$('a').myplugin({
    color: 'blue'
});

// Call the changeBG method
$('a').myplugin('changeBG')
    // chaining
    .each(function () {
        // call the get method href()
        console.log( $(this).myplugin('href') );
    }); 
```

或者如果您需要每个元素独立的插件实例：

```
$('a').each(function () {
    $(this).myplugin();
}); 
```

你会想要像这样设置你的插件：

```
/*
 *  Project: 
 *  Description: 
 *  Author: 
 *  License: 
 */

// the semi-colon before function invocation is a safety net against concatenated
// scripts and/or other plugins which may not be closed properly.
;(function ( $, window, document, undefined ) {

    // undefined is used here as the undefined global variable in ECMAScript 3 is
    // mutable (ie. it can be changed by someone else). undefined isn't really being
    // passed in so we can ensure the value of it is truly undefined. In ES5, undefined
    // can no longer be modified.

    // window is passed through as local variable rather than global
    // as this (slightly) quickens the resolution process and can be more efficiently
    // minified (especially when both are regularly referenced in your plugin).

    var pluginName = "myplugin",
        // the name of using in .data()
        dataPlugin = "plugin_" + pluginName,
        // default options
        defaults = {
            color: "black"
        };

    function privateMethod () {
        console.log("private method");
    }

    // The actual plugin constructor
    function Plugin() {
        /*
         * Plugin instantiation
         *
         * You already can access element here
         * using this.element
         */
         this.options = $.extend( {}, defaults );
    }

    Plugin.prototype = {

        init: function ( options ) {

            // extend options ( http://api.jquery.com/jQuery.extend/ )
            $.extend( this.options, options );

            /*
             * Place initialization logic here
             */
            this.element.css( 'color', 'red' );
        },

        destroy: function () {
            // unset Plugin data instance
            this.element.data( dataPlugin, null );
        },

        // public get method
        href: function () {
            return this.element.attr( 'href' );
        },

        // public chaining method
        changeBG: function ( color = null ) {
            color = color || this.options['color'];
            return this.element.each(function () {
                // .css() doesn't need .each(), here just for example
                $(this).css( 'background', color );
            });
        }
    }

    /*
     * Plugin wrapper, preventing against multiple instantiations and
     * allowing any public function to be called via the jQuery plugin,
     * e.g. $(element).pluginName('functionName', arg1, arg2, ...)
     */
    $.fn[pluginName] = function ( arg ) {

        var args, instance;

        // only allow the plugin to be instantiated once
        if (!( this.data( dataPlugin ) instanceof Plugin )) {

            // if no instance, create one
            this.data( dataPlugin, new Plugin( this ) );
        }

        instance = this.data( dataPlugin );

        /*
         * because this boilerplate support multiple elements
         * using same Plugin instance, so element should set here
         */
        instance.element = this;

        // Is the first parameter an object (arg), or was omitted,
        // call Plugin.init( arg )
        if (typeof arg === 'undefined' || typeof arg === 'object') {

            if ( typeof instance['init'] === 'function' ) {
                instance.init( arg );
            }

        // checks that the requested public method exists
        } else if ( typeof arg === 'string' && typeof instance[arg] === 'function' ) {

            // copy arguments & remove function name
            args = Array.prototype.slice.call( arguments, 1 );

            // call the method
            return instance[arg].apply( instance, args );

        } else {

            $.error('Method ' + arg + ' does not exist on jQuery.' + pluginName);

        }
    };

}(jQuery, window, document)); 
```

**笔记：**

*   此样板文件不会为每个方法调用使用 .each()，您应该在需要时使用 .each()
*   允许重新初始化插件，但只会创建 1 个实例
*   包括销毁方法的示例

参考：[https ://github.com/jquery-boilerplate/jquery-boilerplate/wiki/jQuery-boilerplate-and-demo](https://github.com/jquery-boilerplate/jquery-boilerplate/wiki/jQuery-boilerplate-and-demo)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T13:02:57.797

你试过[jQuery UI Widget Factory](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)吗？

有一点学习曲线，但我现在喜欢它，处理选项，默认值和允许方法，让所有东西都紧紧包裹起来非常漂亮:)

* * *

## 编辑

> jQuery UI Widget Factory 是 jQuery UI 库的一个独立组件，它提供了一种简单的、面向对象的方式来创建有状态的 jQuery 插件。
> 
> –[有状态插件和小部件工厂简介](http://msdn.microsoft.com/en-us/magazine/ff706600.aspx)。

我认为在大多数情况下，额外的开销并不值得担心。这些天我用 coffescript 写东西，一切都被编译、压缩和压缩，所以这里和那里的一些额外的行并没有太大的区别。我对网站速度的研究似乎表明 HTTP 请求的数量很重要——确实，让我走上这条轨道的前同事曾为基于浏览器的游戏工作，并且完全是关于速度速度的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-21T16:40:57.110

这是最新的样板[https://github.com/techlab/jquery-plugin-boilerplate](https://github.com/techlab/jquery-plugin-boilerplate)

您还可以使用[create-jquery-plugin](https://www.npmjs.com/package/create-jquery-plugin) npm CLI 实用程序。赶紧跑

```
npx create-jquery-plugin 
```

# javascript - setInterval 和 setTimeout 速度变化

> ID：13777648
> 
> 赞同：1
> 
> 时间：2012-12-08T12:54:05.780
> 
> 标签：javascript, function, slider, settimeout, setinterval

我的问题出在一些 JavaScript 中：

```
 var mijnfunctie = function(){

    //balk 1 2 3

    setTimeout(function(){
        $("#balk1").animate({"margin-left": "0px"}, 400);
        $("#balk2").animate({"margin-left": "0px"}, 400);
        $("#balk3").animate({"margin-left": "0px"}, 400);
    });
    setTimeout(function(){
        $("#balk1").animate({"margin-left": "-2000px"}, 400);
        $("#balk2").animate({"margin-left": "4000px"}, 400);
        $("#balk3").animate({"margin-left": "-5000px"}, 400);
    }, 2000);

    //balk 4 5 6

    setTimeout(function(){
        $("#balk4").animate({"margin-left": "0"}, 400);
        $("#balk5").animate({"margin-left": "0"}, 400);
        $("#balk6").animate({"margin-left": "0"}, 400);
    }, 3000);

    setTimeout(function(){
        $("#balk4").animate({"margin-left": "2000px"}, 400);
        $("#balk5").animate({"margin-left": "-4000px"}, 400);
        $("#balk6").animate({"margin-left": "5000px"}, 400);
    }, 5000);

    setInterval(mijnfunctie, 6000);
};

mijnfunctie(); 
```

这是为滑块制作的，效果很好。六次，第六次之后就开始混了。所以在某个地方时间不对，但是在哪里呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:11:51.793

`setInterval`将排队一个*重复*的函数。由于您在排队的函数结束时执行此操作，因此在十二秒后，它将运行两次。每再过六秒，它们的数量就会翻倍。慢慢地，这将使浏览器屈服。您将在一分钟内设置 500 个计时器，第二分钟设置 500 000 个计时器......

要么移到`setInterval`要重复的函数之外，要么（更好地）将其更改为`setTimeout`（这将仅将一次调用排入队列）。

```
function mijnfunctie(){
   ...
   setTimeout(mijnfunctie, 6000);
} 
```

* * *

其次，您的第一次调用`setTimeout`缺少它的论点。无论默认值是什么，您都应该始终指定它。

* * *

第三，如果任何动画延迟几秒钟，那么后续动画将立即运行。为了防止这种情况，您可能希望链接动画而不是依赖正确的时间。在这种情况下，为了防止金字塔效应（极端缩进），我建议这种形式：

```
function phase1(){
  $(...).animate(..., phase2);
}

function phase2(){
  ...

...

function phaseN(){
  $(...).animate(..., phase1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T13:09:31.333

您不能依赖 delay in `setTimeout`，该值仅表示函数的最小延迟。相反，您应该链接这些功能。

```
var mijnfunctie = function(){
    setTimeout(function(){
        $("#balk1").animate({"margin-left": "0px"}, 400);
        $("#balk2").animate({"margin-left": "0px"}, 400);
        $("#balk3").animate({"margin-left": "0px"}, 400, function () {
            setTimeout(function () {
                $("#balk1").animate({"margin-left": "-2000px"}, 400);
                $("#balk2").animate({"margin-left": "4000px"}, 400);
                $("#balk3").animate({"margin-left": "-5000px"}, 400, function () {
                    setTimeout(function () {
                        $("#balk4").animate({"margin-left": "0"}, 400);
                        $("#balk5").animate({"margin-left": "0"}, 400);
                        $("#balk6").animate({"margin-left": "0"}, 400, function () {
                            setTimeout(function () {
                                $("#balk4").animate({"margin-left": "2000px"}, 400);
                                $("#balk5").animate({"margin-left": "-4000px"}, 400);
                                $("#balk6").animate({"margin-left": "5000px"}, 400, function () {
                                    setTimeout(mijnfunctie, 600);
                                });
                            }, 1600);
                        });
                    }, 600);
                });
            }, 1600);
        });
    }, 0);
};
mijnfunctie(); 
```

* * *

无论如何，我宁愿建议类似的东西:)

```
(function () {
    var objects = new Array(6),
        index = 0,
        steps = [
            [[0,'0px'],[1, '0px'],[2, '0px']],
            1600,
            [[0,'-2000px'],[1,'4000px'],[2,'-5000px']],
            600,
            [[3,'0px'],[4,'0px'],[5,'0px']],
            1600,
            [[3,'2000px', '-400px', '5000px']],
            600
        ],
        i = 6,
        crawler;

    while(i--) { objects[i] = $('#balk'+(i + 1)); };

    crawler = function () {
        var step, k;
        if (index >= steps.length) index = 0;
        step = steps[index];
        ++index;
        if (typeof(step) == 'number') {
            setTimeout(step, crawler);
        } else {
            k = step.length - 1;
            while(k--) {
                objects[k[0]].animate({'margin-left': step[k[1]]}, 400, (k ? null : crawler)});
            }
        }
    };
    crawler();
}()); 
```

或更通用且可重用的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T13:29:42.950

Gerrit，您`setInterval(mijnfunctie, 6000);`在同一个函数中使用函数，这就是它循环自身并 `setInterval(mijnfunctie, 6000);`多次调用函数的原因..

因此 `setInterval(mijnfunctie, 6000);`建议只调用一次函数（第一次调用的地方）。

享受..！

# c++ - 如何将段落放入文件中？

> ID：13777655
> 
> 赞同：-1
> 
> 时间：2012-12-08T12:55:00.367
> 
> 标签：c++

用户键入段落时如何将段落放入文件中？

```
 FILE *fp;
   char cmt[100];
   printf("Paragragh:  \n");
   scanf("%s",cmt);
   fp=fopen("cmt.txt","a");
   fputs(usern,fp);
   fputs(cmt,fp);
   fclose(fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:06:12.280

你在用C编程吗？你可以试试这个。

```
char str[80];
  FILE *fp;

  if((fp = fopen("TEST", "w"))==NULL) {
    printf("Cannot open file.\n");
    exit(1);
  }

  do {
    printf("Enter a string (CR to quit):\n");
    gets(str);
    strcat(str, "\n");  /* add a newline */
    fputs(str, fp);
  } while(*str!='\n');

  return 0; 
```

# javascript - 从 HTML IFRAME（两个 Web 资源）调用 JS 函数

> ID：13777660
> 
> 赞同：2
> 
> 时间：2012-12-08T12:56:11.697
> 
> 标签：javascript, html, iframe, dynamics-crm-2011

我上传了两个网络资源，*a.HTML*和*b.JS*。在 HTML 文档中，我有一个执行脚本的部分（并且它按预期工作）将加载加载到我的表单上的 IFRAME 中。

现在，由于代码的大小，我觉得有必要对其进行重构，并且我想将一些方法从我的 HTML Web 资源的 script 标签移到单独的 JS Web 资源中。

第一步，我设置了单独的 JS Web 资源，如下所示。

```
function test() { alert("Success."); } 
```

从 HTML 文档中的脚本中，我执行以下操作，因为页面似乎不知道*test*时出现错误。

```
alert("Get ready for test...");
test();
alert("Did it work?"); 
```

当然，我已将 JS Web 资源添加到表单并保存已发布。令人惊讶的是，关于这个主题的信息很少。我找到了这些链接，但它们都不完全符合我的需要，并且没有提示我如何解决手头的问题。

*   [这个链接](https://stackoverflow.com/questions/9358675/call-javascript-function-from-another-javascript-webresource)类似于我想要实现的**，但**它是关于*从 JS 调用 JS ，*其中两者都是 Web 资源。
*   [这个链接](https://stackoverflow.com/questions/13054616/calling-js-function-declared-in-html-file-from-a-js-file)与我想要的对角线相反，**但**我不知道如何通过*从 JS 调用 HTML*来反转它，两者都是 Web 资源。

我应该纠正什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-27T11:04:53.647

从 Microsoft Dynamics CRM 中的 HTML 网络资源调用 javascript 网络资源中的函数

**客户关系管理 2015**

Javascript网络资源：

```
function test() { alert("Success."); } 
```

HTML 网络资源：

```
window.parent.test(); 
```

**客户关系管理 2016**

他们现在在 iframe 中加载 HTML 网络资源，因此您无法访问外部 js 文件，但您可以访问 XRM 对象。所以你可以把函数放在这个对象上。

Javascript网络资源：

```
Xrm.Page.test = test;
function test() { alert("Success."); } 
```

HTML 网络资源：

```
window.parent.Xrm.Page.test(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:10:19.150

我认为您的 test() 函数在您的 html 文档窗口的范围内。当您从 iframe 的文档中调用它时，它会在其范围内搜索 test()。

试用

```
alert("Get ready for test...");
parent.window.test();
alert("Did it work?"); 
```

如果 test() 在 iframe 中定义并且您从 HTML 文档中调用它，请尝试此操作。

```
alert("Get ready for test...");
document.getElementById("iframeId").src ="javascript:test();"
alert("Did it work?"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T13:56:52.370

检查您所做的以下假设：

*   保存网络资源？
*   发布所有更改？
*   将资源添加到相关实体的框架中？
*   将函数命名为*hazaa*
*   叫正确的名字，即`parent.window.test()`？

如果以上**所有都是***肯定*的，请做三件事。

 **1.  联系微软。您刚刚发现了一个严重的错误。
2.  小心。很快**就会**有猪飞。
3.  拿一件外套。天气会变得更冷。

（我的意思是你**肯定**错过了我提供的列表中的一些东西，你不需要联系微软，猪不会开始飞，地狱也不会冻结。）**

# java - 在 JOGL 中显示图像

> ID：13777662
> 
> 赞同：4
> 
> 时间：2012-12-08T12:56:21.393
> 
> 标签：java, image, jogl

我目前正在从事一项需要在 JOGL 中创建游戏的任务，进展顺利，但我遇到了一个问题：

我想创建一个可以通过在游戏中按 ESC 访问的菜单功能，当按 ESC 时，显示功能需要停止显示游戏并开始显示菜单。菜单由带有一些文本覆盖的背景图像组成。

这就是我尝试实现菜单功能的方式，但我没有设法让它显示除清晰颜色之外的任何其他内容：

```
public class OptionsMenu 
{
    public void display(GL gl) {

        gl.glMatrixMode(GL.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrtho(0, 300, 300, 0, 0, 1);
        gl.glMatrixMode(GL.GL_MODELVIEW);
        gl.glDisable(GL.GL_DEPTH_TEST);
        gl.glClearColor(1f, 0.5f, 0.5f, 0.5f);  
        gl.glClear(GL.GL_COLOR_BUFFER_BIT);
        gl.glBlendFunc (GL.GL_SRC_ALPHA, GL.GL_ONE_MINUS_SRC_ALPHA); 
        gl.glEnable (GL.GL_BLEND);
        BufferedImage bufferedImage = null;
        int w = 0;
        int h = 0;
        try {
            bufferedImage = ImageIO.read(OptionsMenu.class.getResource("menuBackground.jpg")); //The menu background
            w = ceilingPow2(bufferedImage.getWidth());
            h = ceilingPow2(bufferedImage.getHeight());
        } catch (IOException e) {
            e.printStackTrace();
        }
        WritableRaster raster = 
                Raster.createInterleavedRaster (DataBuffer.TYPE_BYTE,
                        w,
                        h,
                        4,
                        null);
        ComponentColorModel colorModel=
                new ComponentColorModel (ColorSpace.getInstance(ColorSpace.CS_sRGB),
                        new int[] {8,8,8,8},
                        true,
                        false,
                        ComponentColorModel.TRANSLUCENT,
                        DataBuffer.TYPE_BYTE);
        BufferedImage img = 
                new BufferedImage (colorModel,
                        raster,
                        false,
                        null);

        Graphics2D g = img.createGraphics();
        g.drawImage(bufferedImage, null, null);

        DataBufferByte imgBuf =
                (DataBufferByte)raster.getDataBuffer();
        byte[] imgRGBA = imgBuf.getData();
        ByteBuffer bb = ByteBuffer.wrap(imgRGBA);
        bb.position(0);
        bb.mark();

        gl.glBindTexture(GL.GL_TEXTURE_2D, 13);
        gl.glPixelStorei(GL.GL_UNPACK_ALIGNMENT, 1);
        gl.glTexParameteri(GL.GL_TEXTURE_2D, GL.GL_TEXTURE_WRAP_S, GL.GL_CLAMP);
        gl.glTexParameteri(GL.GL_TEXTURE_2D, GL.GL_TEXTURE_WRAP_T, GL.GL_CLAMP);
        gl.glTexParameteri(GL.GL_TEXTURE_2D, GL.GL_TEXTURE_MAG_FILTER, GL.GL_LINEAR);
        gl.glTexParameteri(GL.GL_TEXTURE_2D, GL.GL_TEXTURE_MIN_FILTER, GL.GL_LINEAR);
        gl.glTexEnvf(GL.GL_TEXTURE_ENV, GL.GL_TEXTURE_ENV_MODE, GL.GL_REPLACE);
        gl.glTexImage2D (GL.GL_TEXTURE_2D, 0, GL.GL_RGBA, w, h, 0, GL.GL_RGBA, 
                GL.GL_UNSIGNED_BYTE, bb);

        gl.glEnable(GL.GL_TEXTURE_2D);
        gl.glBindTexture (GL.GL_TEXTURE_2D, 13);
        gl.glBegin (GL.GL_POLYGON);
        gl.glTexCoord2d (0, 0);
        gl.glVertex2d (0, 0);
        gl.glTexCoord2d(1,0);
        gl.glVertex2d (w, 0);
        gl.glTexCoord2d(1,1);
        gl.glVertex2d (w, h);
        gl.glTexCoord2d(0,1);
        gl.glVertex2d (0, h);
        gl.glEnd ();    
        gl.glFlush();
    }
    private static int ceilingPow2(int n) {
        int pow2 = 1;
        while (n > pow2) {
            pow2 = pow2<<1;
        }
        return pow2;
    }
} 
```

此代码基于本教程：[http](http://wiki.tankaar.com/index.php?title=Displaying_an_Image_in_JOGL_(Part_1) ://wiki.tankaar.com/index.php?title=Displaying_an_Image_in_JOGL_(Part_1 )

我像这样调用 OptionsMenu：

```
 public void display(GLAutoDrawable drawable) 
    {
        GL gl = drawable.getGL();
        GLU glu = new GLU();

        if(state.equals("optionsMenu"))
        {
            if(menu == null)
                menu = new OptionsMenu;

            menu.display(gl);
        } 
        else 
        {   
            // Calculating time since last frame.
            Calendar now = Calendar.getInstance();      
            long currentTime = now.getTimeInMillis();
            int deltaTime = (int)(currentTime - previousTime);
            previousTime = currentTime;

            // Update any movement since last frame.
            updateMovement(deltaTime);
            updateCamera();

            gl.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT );
            gl.glLoadIdentity();
            glu.gluLookAt( camera.getLocationX(), camera.getLocationY(), camera.getLocationZ(), 
                    camera.getVrpX(), camera.getVrpY(), camera.getVrpZ(),
                    camera.getVuvX(), camera.getVuvY(), camera.getVuvZ() );

            // Display all the visible objects of MazeRunner.
            for( Iterator<VisibleObject> it = visibleObjects.iterator(); it.hasNext(); ) {
                it.next().display(gl);
            }

            gl.glLoadIdentity();
            gl.glFlush();
        }
    } 
```

它不会抛出任何错误，只是不会显示图像。但是它确实显示了清晰的颜色 gl.glClearColor(1f, 0.5f, 0.5f, 0.5f); 在 OptionsMenu 的显示函数中定义

我很困惑，我不知道我将如何解决这个问题。

对不起，很长的帖子，但如果有人能帮助我，我会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T12:34:38.470

我想清除颜色缓冲区`gl.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT );` 应该放在 OptionsMenu 的显示方法的开头。

我有一些建议，例如上面发布的代码：

*   更改范围`GLU glu = new GLU();`，因为`glu`每次调用 opengl 显示回调方法时都会分配。
*   还要移到`gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);`if 语句之前，不要使用每个对象的显示方法（例如 OptionsMenu.display()）。试着保持单身。
*   使用 TextureIO 上传纹理，如果可能的话，只需上传一次，然后在您的显示方法中使用该纹理。纹理加载过程有很大的开销。

# android - 可搜索的字典

> ID：13777663
> 
> 赞同：0
> 
> 时间：2012-12-08T12:56:55.097
> 
> 标签：android, dictionary

我使用可搜索字典中的代码来制作我自己的字典。现在我想知道，我如何编辑数据库以插入和显示我自己的单词和定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:45:59.883

您只需用您自己的话编辑 res/raw 中的“definition.txt”。

编辑：对于那些愿意的人，代码可[在此处公开获得](http://www.java2s.com/Code/Android/Database/SearchableDictionary.htm)

# c# - 使用 UDP 从 c# 多播到 android

> ID：13777664
> 
> 赞同：0
> 
> 时间：2012-12-08T12:57:00.870
> 
> 标签：c#, android, udp, multicast

***我在 C# 中开发了 UDP 多播服务器，在 Android 中开发了 UDP 多播接收器，但我无法从服务器接收数据到客户端（Android）。是因为我在代码中使用的端口号吗？非常感谢您的帮助，并将节省我的夜晚。***

***服务器代码

```
namespace Server
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    private void button1_Click(object sender, EventArgs e)
    {
        UdpClient udpclient = new UdpClient();
        IPAddress multicastaddress = IPAddress.Parse("233.45.17.10");
        udpclient.JoinMulticastGroup(multicastaddress);
            IPEndPoint remoteep = new IPEndPoint(multicastaddress, 10000);
            Byte[] buffer = null;
            for (int i=1;i<30;i++)
            {
                buffer = Encoding.Unicode.GetBytes(i.ToString());
                int flag = udpclient.Send(buffer, buffer.Length, remoteep);
            }
            MessageBox.Show("Data Sent TO " + ip.Text + "On Port " + port.Text);
            status.Text = "Connected";
        }
        private void disconnect_Click(object sender, EventArgs e)
        {
        this.Close();
        }
    }
}*** 
```

客户端代码（安卓）：

```
public class TestMulticast extends Activity
    {
        static boolean done = false;
        EditText et;
        TextView tv;
Button b;
MulticastSocket socket;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    b=(Button)findViewById(R.id.b);
    et=(EditText)findViewById(R.id.et);
    tv =(TextView)findViewById(R.id.tv);

    b.setOnClickListener(new Button.OnClickListener()
    {
        public void onClick(View v) 
        {
           try 
           {
              String msg = et.getText().toString();
              socket.send(new DatagramPacket(msg.getBytes(), 0, msg.getBytes().length, InetAddress.getByName("192.168.1.6"), 10000));
              Toast.makeText(getApplicationContext(), "sent", 100).show();
           }
           catch (Exception e) 
           {
               e.printStackTrace();
               Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
           }
        }
});
if (!done) 
{
    try 
    {
        WifiManager wifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE);
        WifiInfo wifiinfo = wifiManager.getConnectionInfo();
        int intaddr = wifiinfo.getIpAddress();
        if (intaddr == 0)
        {
            tv.setText("Unable to get WIFI IP address");
        }
        else 
        {
            byte[] byteaddr = null;
            byteaddr = new byte[] {
                            (byte)(intaddr & 0xff), 
                    (byte)(intaddr >> 8 & 0xff),
                    (byte)(intaddr >> 16 & 0xff),
                    (byte)(intaddr >> 24 & 0xff)
                };
       String machineName = "androidtestdevice";
       InetAddress addr = InetAddress.getByAddress(machineName, byteaddr);
       tv.append("Using address: " + addr + "\n");
       Toast.makeText(getApplicationContext(), "using address"+addr, 50).show();
      // create socket
      socket = new MulticastSocket(11111);
      // set network interface
      NetworkInterface iface = NetworkInterface.getByInetAddress(addr);
      Toast.makeText(getApplicationContext(), "First address on interface is: " + getAddressFor(iface), 50).show();
      tv.append("First address on interface is: " + getAddressFor(iface) + "\n");
     // The following line throws an exception in Android (Address is not available)
     // If it's not called, the socket can receives packets
     // Equivalent code in seems to C work.
     //socket.setNetworkInterface(iface);
     // join group
     socket.joinGroup(InetAddress.getByName("233.45.17.10"));
     tv.append("It worked\n");
    // start receiving
    new DatagramListener(socket, tv).start();

  }
  }
 catch (Exception e) {
 tv.append(e.toString() + "\n");
 e.printStackTrace();
 }
 }
 }

class DatagramListener extends Thread {
    private DatagramSocket socket;
    private TextView tv;
    DatagramListener(DatagramSocket s, TextView tv) {
    socket = s;
    this.tv = tv;
    }
    public void run() {
    byte[] buf = new byte[1000];
    try {
    while (true) {
    DatagramPacket recv = new DatagramPacket(buf, buf.length);
    socket.receive(recv);

    System.out.println("received: " + new String(recv.getData(), recv.getOffset(), recv.getLength()));

    runOnUiThread(new MyRunnable(new String(recv.getData(), recv.getOffset(), recv.getLength()), tv));
    Toast.makeText(getApplicationContext(), "Now showing data", Toast.LENGTH_SHORT).show();
    }
    }
    catch (Exception e) {
    e.printStackTrace();
    Toast.makeText(getApplicationContext(), "received: " + e.getMessage(), Toast.LENGTH_SHORT).show();
    }
    }
}
static private class MyRunnable implements Runnable {
    private TextView tv;
    private String text;
    public MyRunnable(String text, TextView tv) {
        this.tv = tv;
        this.text = text;
    }
    public void run() {
        tv.append(text + "\n");
    }
}
public static InetAddress getAddressFor(NetworkInterface iface) {
    Enumeration<InetAddress> theAddresses = iface.getInetAddresses();
    boolean found = false;
    InetAddress firstAddress = null;
    while ((theAddresses.hasMoreElements()) && (found != true)) {
        InetAddress theAddress = theAddresses.nextElement();
        if (theAddress instanceof Inet4Address) {
            firstAddress = theAddress;
            found = true;
        }
    }
    return firstAddress;
} 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T04:02:58.403

多播数据包在许多 android 设备中被过滤，具体取决于供应商（有些不会，htc 最有可能过滤它），大概是为了节省电池。它没有在 android 中被阻止，而是在供应商中被阻止。

# spring - 事务服务中的 ConstraintViolationException 没有回滚

> ID：13777666
> 
> 赞同：3
> 
> 时间：2012-12-08T12:57:11.023
> 
> 标签：spring, rollback, transactional

我有一个名为的服务方法`add()`，它用`@Transactional`.

我调用它，但是当在相应的 DAO 方法中发生 ConstraintViolationException 时，即使我指定不回滚，它也会回滚事务。

我希望它`ConstraintViolationException`会被捕获，而不是它`NotFoundException`会抛出检查异常。

```
@Override
@Transactional(noRollbackFor = ConstraintViolationException.class)
public User add(User user) throws NotFoundException {
    try {
        result = userDao.add(user);
    } catch (RuntimeException e) {
        throw new NotFoundException("Couldn't find group");
    }
} 
```

有没有办法在`ConstraintViolationException`没有事务回滚的情况下捕获？

我正在使用弹簧 3.1.1 和休眠 3.6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:43:03.817

啊，我明白会发生什么。ConstraintViolationException 发生在提交时，在方法执行之后，当您的`add()`方法周围的事务拦截器尝试提交事务时。由于它不能提交，显然，事务被回滚。它不能对其他任何东西。

# sql-server - SQL Server比较设计方法

> ID：13777670
> 
> 赞同：1
> 
> 时间：2012-12-08T12:57:36.700
> 
> 标签：sql-server, database-design

我有一个项目有一个大数据库，我想知道哪个设计更好，一个数据库有 5 个表还是 5 个数据库有 1 个表？我的数据库在服务器上运行，如果我想将我的数据库扩展到多个服务器，是否会改变回答这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:03:46.427

作为一般处方，数据库不会因为它只有一个表而表现得更好。此外，分片的概念和它的性能增强（或不增强）对于这个论坛来说太过分了。

因此，为了让您的生活更轻松，请创建一个包含五个表的数据库，并适当地优化这些表。根据您查询数据库的方式在必要的地方构建索引。尽可能建立涵盖的索引。如果应用程序是写密集型的，不要过度索引。

请记住，优化数据库比一般设计模式涉及更多，并且如果没有大量信息，外部资源无法很好地完成。

# django - Django admin - 添加/更改视图分为书签

> ID：13777672
> 
> 赞同：0
> 
> 时间：2012-12-08T12:57:53.787
> 
> 标签：django, django-forms, admin

我有一个带有字段的文章模型，我想将这些字段划分为由我的文章的添加/更改视图上可见的书签表示的类别，例如：标题、内容、类别、作者将在主要类别中、发布开始、结束、创建时间等将在统计类别中，而其他字段将在“其他”类别中。我可以在不覆盖管理员视图的情况下完成此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:00:50.323

尽管我不知道您所说的“书签”是什么意思，但我认为您要查找的是该`fieldsets`属性。

例如：

```
class ArticleAdmin(admin.ModelAdmin):
    fieldsets = (
        (None, {
            'fields': ('title', 'contents', 'category', 'author')
        }),
        ('Statistics', {
            'fields': ('publication_start', 'end', 'creation_time')
        }),
    ) 
```

更多关于这个的[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.fieldsets)。

# ajax - AJAX 渲染属性不适用于 render="false" 组件

> ID：13777678
> 
> 赞同：6
> 
> 时间：2012-12-08T12:58:38.650
> 
> 标签：ajax, jsf-2, java-ee-6, facelets, show-hide

我有一个组件要在用户点击后显示/隐藏`commandButton`。

就像这样：

```
<h:commandButton id="showButton" value="#{bean.wasPressed ? 'Hide' : 'Show'}">
    <f:ajax listener="#{bean.toggle()}" render="explanation showButton" />
</h:commandButton> 
```

和

```
<h:panelGroup id="explanation" rendered="#{bean.wasPressed}">
    <h:outputText value="something" />
</h:panelGroup> 
```

`bean.toggle()`只需适当地将属性设置`wasPressed`为 true 或 false。我正在使用`<h:form prependId="false">`.

问题是`render`我的按钮属性的值。它明确列出了:`explanation`和`showButton`.

只要`showButton`始终存在（它只更改其标签），`explanation`只有当`wasPressed`属性为真时才存在。否则它会说：

> malformedXML：更新期间：未找到说明

我怎么解决这个问题？

我不想恢复到在源代码中隐藏元素，所以我不想使用任何 jQuery toggle(-) 或任何隐藏元素的方式`style="display: none"`或任何这些东西。

它甚至可以在 JSF 2.1 中实现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T15:45:54.067

您无法更新未渲染的元素，rendered=false“是一种 JSF 方式”以从 DOM 树中删除元素，

它不像 css display:none 或 visibility:hidden <- 这两个将保留 DOM 树中的元素但隐藏，而 JSF render=false 甚至不会渲染（保留）DOM 树中的元素（你甚至不会看到它在页面的“查看源代码”中）

因此，在您的情况下，您需要用另一个“panelGroup”包装 panelGroup 并更新包装器的 id

```
<h:commandButton id="showButton" value="#{bean.wasPressed ? 'Hide' : 'Show'}">
    <f:ajax listener="#{bean.toggle()}" render="explanationWrapper showButton" />
</h:commandButton>

<h:panelGroup id="explanationWrapper">
    <h:panelGroup id="explanation" rendered="#{bean.wasPressed}">
        <h:outputText value="something" />
    </h:panelGroup>
</h:panelGroup> 
```

也看看类似的问题

[你能从 ap:ajax 监听器更新一个 h:outputLabel 吗？](https://stackoverflow.com/a/10370268/617373)

# sql-server - SQL Server 2012 域外远程访问

> ID：13777680
> 
> 赞同：2
> 
> 时间：2012-12-08T12:59:24.427
> 
> 标签：sql-server, sql-server-2012, windows-server-2008-r2

我在 Windows Server 2008 R2 上安装了一个 SQL Server 2012 实例。

我为远程访问配置了 SQL Server。

我需要从与使用 JDBC 的 SQL Server 实例不在同一个域中的机器访问 SQL Server。我收到以下错误

> 登录失败。登录来自不受信任的域，不能用于 Windows 身份验证。

我只需要能够从各种机器访问 SQL Server，这些机器不会（也永远不会）与 sql server 实例属于同一域。

解决方案赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:37:28.440

这是一个广泛的问题，因为有很多因素可以阻止访问您的 SQL Server。以下是一些一般提示：

1.  [通过数据库服务器上的SQL Server 配置管理器](http://technet.microsoft.com/en-us/library/ms174212.aspx)启用对某些协议（TCP/IP、命名管道等）的访问。
2.  [通过 Windows 防火墙](http://msdn.microsoft.com/en-us/library/ms175043.aspx) *和*任何网络级防火墙启用对 db 服务器上的端口 1433（SQL Server 使用的端口）的访问。
3.  如果使用 Windows 用户登录 SQL Server，请确保该用户（或它所属的组之一）[映射到 SQL Server 登录](http://www.nerdymusings.com/LPMArticle.asp?ID=41)。

# c++ - MSVC 中的拆解

> ID：13777681
> 
> 赞同：11
> 
> 时间：2012-12-08T12:59:28.513
> 
> 标签：c++, winapi

如何在 MSVC 中对名称进行解码？gcc 中有 abi::__cxa_demangle 函数。在 MSDN 中，我找到了 UnDecorateSymbolName：

[http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms681400%28v=vs.85%29.aspx](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms681400%28v=vs.85%29.aspx)

不幸的是，这个函数甚至不能取消装饰这样的符号：

```
#include <Windows.h>
#include <DbgHelp.h>

#include <cstdlib>
#include <iostream>
#include <typeinfo>

int main()
{
    SymSetOptions(SYMOPT_UNDNAME | SYMOPT_DEFERRED_LOADS);

    if (!SymInitialize(GetCurrentProcess(), NULL, TRUE))
    {
        std::cout << "SymInitialize returned error: " << GetLastError() << '\n';
        return EXIT_FAILURE;
    }

    class Foo {};
    Foo instance;

    const char* decorated_name = typeid(instance).name();
    char undecorated_name[1024];
    if (!UnDecorateSymbolName(decorated_name, undecorated_name, sizeof(undecorated_name) / sizeof(*undecorated_name), UNDNAME_COMPLETE))
    {
        std::cout << "UnDecorateSymbolName returned error: " << GetLastError() << '\n';
        return EXIT_FAILURE;
    }

    std::cout << "Decorated name: " << decorated_name << '\n'
              << "Undecorated name: " << undecorated_name << '\n';
} 
```

**输出**

> 修饰名称：?AVFoo@?4?main@
> 
> 未修饰名称：?AVFoo@?4?main@

如果我做错了？

我在某处听说过 _unDName 函数，但找不到任何示例。在哪个头文件中定义？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-04-27T02:52:42.463

Visual Studio 已经发布了一个名为 undname 的实用程序。对于我的 VS2010 和 VS2013 安装，它安装到 %VSINSTALL%\vc\bin 目录。对于 x64 平台，在 %VSINSTALL%\vc\amd64\bin 目录中。

示例用法是：

```
D:\work\VS2013>undname "?static_x@?1??getX@@YAAAUX@@XZ@4U2@A"
Microsoft (R) C++ Name Undecorator
Copyright (C) Microsoft Corporation. All rights reserved.

Undecoration of :- "?static_x@?1??getX@@YAAAUX@@XZ@4U2@A"
is :- "struct X `struct X & __cdecl getX(void)'::`2'::static_x" 
```

获得去错名称的另一种方法是使用`/FAsc /Faoutput.asm` 编译器选项，它会生成程序集列表，其中每个错的名称都用它的去错名称进行注释。请参阅[此链接以供参考](https://stackoverflow.com/questions/10585928/is-static-init-thread-safe-with-vc2010/11130435#11130435)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-28T14:41:44.610

似乎`UndecorateSymbolName`/`__unDName`无法处理函数本地名称。如果您将类定义移动到全局范围，`.name()`将返回已解构的名称（用于`.raw_name()`获取已解构的名称）。

要手动分解（全局）原始名称，您需要对代码进行两项更改：

1) 跳过损坏名称中的前导句点（即从 开始`'?'`）。
2) 使用标志值 0x2800 ( ) 代替 0 `UNDNAME_32_BIT_DECODE | UNDNAME_TYPE_ONLY`。

我从 VS2012 的 CRT 资源中发现了这一点：

```
 if ((pTmpUndName = __unDName(NULL, (this->_M_d_name)+1, 0,
         &_malloc_base, &_free_base, 
         UNDNAME_32_BIT_DECODE | UNDNAME_TYPE_ONLY)) == NULL) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-17T09:12:38.320

Visual Studio 2019 更新。

(1) typeid(instance).name() - 在请求中使用 - 已经返回未修饰的名称：在这种情况下不需要进一步的去修饰

(2) bin 文件夹中提供的命令 UNDNAME.EXE 不能正常工作，即使我们去掉初始点。例如“.?AVFoo@?1??main@@YAHXZ@”被解构为“?? `int __cdecl main(void)'::`2'::AVFoo”，给出了一个无效的名字AVFoo。正确的名字必须是 Foo

(3) dbghelp API UnDecorateSymbolName() 也不起作用

(4) 可以从编译器为指令 typeid() 生成的程序集中推导出正确的代码

这是一个小程序，它将正确地取消装饰所有 C++ 损坏的符号：

```
// compile as: cl -W3 und.c

#include <windows.h>
#include "dbghelp.h"
#include <stdio.h>

#pragma comment(lib, "dbghelp.lib")

extern char *__unDName(char*, const char*, int, void*, void*, int);

int
main(int argc, char **argv)
{
    const char *decorated_name = 0;
    char undecorated_name[1024];

    if (argc == 2) decorated_name = argv[1];
    else {
        printf("usage: %s <decorated_name>\n", argv[0]);
        return 1;
        }

    __unDName(undecorated_name, decorated_name+1, 1024, malloc, free, 0x2800);

    printf("Decorated name: %s\n", decorated_name);
    printf("Undecorated name: %s\n", undecorated_name);
    return 0;
} 
```

例如：

> und ".?AVFoo@?1??main@@YAHXZ@"
> 
> 修饰名称：.?AVFoo@?1??main@@YAHXZ@
> 
> 未修饰名称：class `int __cdecl main(void)'::`2'::Foo

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-26T10:48:32.497

UndecorateSymbolName 也没有按我的预期工作。如果要迭代结构或类的成员，请使用 boost fusion 在 C++ 中实现反射。

# facebook - Facebook 的第三方 ID - 如何使用它

> ID：13777684
> 
> 赞同：1
> 
> 时间：2012-12-08T13:00:13.380
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

对于我的 facebook 应用程序，我需要在服务器端存储用户记录。因为数据应该是匿名的，所以我不想存储用户 ID。我发现第三方 ID 应该是我正在寻找的（用户可以请求他的数据，但不可能根据数据获取用户）。

但现在我关于第三方 ID 的问题：

*   id 似乎依赖于使用的访问令牌。但是当我使用用户访问令牌（过期）时，当用户获得新令牌时，第三方 ID 会改变吗？
*   通过应用程序访问令牌接收它是否常见？
*   我在 graph-api-explorer 中进行了尝试，在那里我能够根据第三方 ID 找到用户。为什么这是可能的，我该如何预防？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:20:45.577

不，第三方 ID 不依赖于您的访问令牌。用户访问令牌是一个临时密钥，允许访问永久数据，例如姓名或第三方 ID。顺便说一句，您可以通过在您的帐户上为您的应用程序生成第三方 ID 来自行测试，记录 ID 和用于获取它的令牌，通过页面[http://www.facebook.com/卸载您自己的应用程序appcenter/my](http://www.facebook.com/appcenter/my)，最后重新安装您的应用程序。您将看到一个新令牌授予对相同旧 ID 的访问权限。

我不明白您通过应用程序访问令牌接收它是什么意思。应用访问令牌不授予访问用户数据的权限。

最后，您无需采取任何措施来阻止它。Facebook 为您提供保障。虽然使用第三方 ID 代替用户 ID 是提高安全性的好主意，但第三方 ID 已被引入用于您的 Facebook 唯一标识符并非完全不可见的情况。您可以根据第三方 ID 找到用户，因为您拥有生成此 ID 的 Facebook 应用程序。用户拥有与他安装 App 一样多的第三方 ID，它们都是不同的，并且仅适用于生成它的 App。所以你的服务器端用户记录是安全的，因为它包含的 ID 对你的应用程序没有任何用处。

# css - css中文本上方的边距或填充

> ID：13777686
> 
> 赞同：2
> 
> 时间：2012-12-08T13:00:24.353
> 
> 标签：css

我正在处理这个页面：

![在此处输入图像描述](../Images/de07fb03dbbf9f9e947c214a69de562e.png)

我试图让第一个下拉项目显示在离主菜单更远的地方；说大约是第一条和第二条下降线之间距离的一半。原因是当鼠标悬停在第一条下拉线上时，很容易让鼠标回到主菜单。

```
/* ================================================================ 
This copyright notice must be untouched at all times.

The original version of this stylesheet and the associated (x)html
is available at http://www.cssplay.co.uk/pro_dropline7.html
Copyright (c) 2005-2008 Stu Nicholls. All rights reserved.
This stylesheet and the associated (x)html may be modified in any 
way to fit your requirements.
=================================================================== */

#dropline {position:relative; font-size:13px; height:40px; background:url(http://test.garlandcountydemocrats.org/MASTER_files/back.gif);}

#dropline, #dropline ul {padding:0; margin:0; list-style:none; width:1080px;}

#dropline table {border-collapse:collapse; margin:-1px -10px; 0 0; padding:0; width:0; height:0; font-size:13px;}
#dropline li {float:left; height:40px; margin-right:1px;}
#dropline li a {float:left; display:block; height:40px; line-height:19px; padding:0 20px 0 10px; font-family:arial, sans-serif; font-size:13px; color:#fff; text-decoration:none; font-weight:bold; text-align:center;}
#dropline li a.down {background:background:url(http://test.garlandcountydemocrats.org/MASTER_files/down.gif) no-repeat right center;}
#dropline li ul li a.down {font-size:15px; color:#ff0; font-weight:normal;}

#dropline li a:hover {white-space:nowrap; color:#444;}
#dropline li a.down:hover {white-space:nowrap; color:#444; background:background:url(http://test.garlandcountydemocrats.org/MASTER_files/down-over.gif) no-repeat right center;}

#dropline li:hover > a {color:#4AEF03;}
#dropline li:hover > a.down {color:#4AEF03; background:url(http://test.garlandcountydemocrats.org/MASTER_files/down-over.gif) no-repeat right center;}

#dropline li ul {position:absolute; top:38px; left:-9999px; z-index:10; background:url(http://test.garlandcountydemocrats.org/MASTER_files/sub-back.png) left top;}
#dropline li ul.floatRight li {float:right;}

#dropline :hover ul,
#dropline :hover ul :hover ul,
#dropline :hover ul :hover ul :hover ul,
#dropline :hover ul :hover ul :hover ul :hover ul,
#dropline :hover ul :hover ul :hover ul :hover ul :hover ul {left:0; background:url(http://test.garlandcountydemocrats.org/MASTER_files/sub-back.png) left bottom;}

#dropline :hover ul ul,
#dropline :hover ul :hover ul ul,
#dropline :hover ul :hover ul :hover ul ul,
#dropline :hover ul :hover ul :hover ul :hover ul ul {left:-9999px; top:38px; background:transparent;}

I've tried several different variations on the css code shown below without success.  I'm a total newbie so any help will certainly be appreciated.  Thanks in advance. Hozey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:13:15.407

只需添加`padding-top`到`#dropline li ul`

CSS：

```
#dropline li ul {position:absolute; padding-top:14px; top:38px; left:-9999px; z-index:10; background:url(http://test.garlandcountydemocrats.org/MASTER_files/sub-back.png) left top;} 
```

演示：http: [//jsfiddle.net/CGctj/1/](http://jsfiddle.net/CGctj/1/)

# python - 在 Python 中下载多个文件时出错

> ID：13777687
> 
> 赞同：0
> 
> 时间：2012-12-08T13:00:42.990
> 
> 标签：python, networking, download, urllib2

谁能告诉我我做错了什么？我不断收到此代码错误。

我正在尝试从小学游戏下载所有 swf 文件，*只是*作为一个实验，但我似乎做不到：

```
#!/usr/bin/env python
# encoding: utf-8

import sys, getopt
import os, urllib, urllib2, re, string, math

help_message = '''
'''
no_param = '''
'''

verbose = False
fakeMode = False
curPath = os.getcwd() + "/"

urlRegex = ''
FileRegex = ''
outputPath = ''
currentFile = ''

def removeDuplicates(seq):
# Not order preserving
keys = {}
for e in seq:
    keys[e] = 1
return keys.keys()

def go(filename):
print "Having a look at " + string.capwords(filename)

global urlRegex, FileRegex, outputPath, currentFile

url = 'http://cdn.primarygames.com' + filename

urlRegex = '/'+filename+'/.+/download'
FileRegex = '/'+filename+'/(.*?)/download'
outputPath = curPath+"Swfs"+"/"

if not os.path.exists(outputPath):
    os.makedirs(outputPath)

filelist = []

while(len(url)):
    # looping system
    newlist, url = scrapePage(url, filename)
    filelist.extend(newlist)

print 'Found %s Files.' % len(filelist)

for swf in filelist:
    swfurl = swf['url']
    name = swf['name']
    currentFile = name
    #print 'Downloading '+name,
    if not fakeMode:
        #print ''
        urllib.urlretrieve('http://cdn.primarygames.com' + swfurl, outputPath+name)
    else:
        print 'Not downloading %s.' % name
print "All done with %s!" % filename

def scrapePage(url, filename):
print 'Looking through '+url
html = urllib2.urlopen(url).read()
swflist = re.findall(urlRegex, html)
swflist = removeDuplicates(swflist)

swfs = []

for swfurl in swflist:
    r = re.compile(FileRegex)
    swfname = r.search(swfurl).group(1)
    swfname = swfname.replace('-', ' ')
    name = filename + "/" + swfname + ".swf"
    name = string.capwords(name)
    swf.append({'name':name,'url':swfurl})

r = re.compile(nextRegex)
result = r.search(html)
if result:
    nextUrl = 'http://cdn.primarygames.com' + result.group(1)
else:
    nextUrl = ''

return swfs, nextUrl

def main(argv=None):
global verbose, fakeMode

if argv is None:
    argv = sys.argv
try:
    try:
        opts, args = getopt.getopt(argv[1:], "ho:vf", ["help", "output="])
    except getopt.error, msg:
        raise Usage(msg)

    # option processing
    for option, value in opts:
        if option == "-v":
            verbose = True
        if option in ("-f", "--fake"):
            fakeMode = True
        if option in ("-h", "--help"):
            raise Usage(help_message)
        if option in ("-o", "--output"):
            output = value

    if len(args):
        swfs = args
    else:
        raise Usage(no_param)

except Usage, err:
    print >> sys.stderr, sys.argv[0].split("/")[-1] + ": " + str(err.msg)
    if err.msg != help_message:
        print >> sys.stderr, "\t for help use --help"
    return 2

for swf in swfs:
    go(swf)

if __name__ == "__main__":
sys.exit(main()) 
```

这是我不断收到的错误：

```
Having a look at *
Looking through http://cdn.primarygames.com/*
Traceback (most recent call last):
File "C:\PrimarySchoolGames Swf Downloader.py"
, line 129, in <module>
sys.exit(main())
File "C:\PrimarySchoolGames Swf Downloader.py"
, line 125, in main
go(swf)
File "C:\PrimarySchoolGames Swf Downloader.py"
, line 48, in go
newlist, url = scrapePage(url, filename)
File "C:\Users\Terrii\Desktop\VB Extra's\PrimarySchoolGames Swf Downloader.py"
, line 67, in scrapePage
html = urllib2.urlopen(url).read()
File "C:\Python27\lib\urllib2.py", line 126, in urlopen
return _opener.open(url, data, timeout)
File "C:\Python27\lib\urllib2.py", line 400, in open
response = self._open(req, data)
File "C:\Python27\lib\urllib2.py", line 418, in _open
'_open', req)
File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
result = func(*args)
File "C:\Python27\lib\urllib2.py", line 1207, in http_open
return self.do_open(httplib.HTTPConnection, req)
File "C:\Python27\lib\urllib2.py", line 1177, in do_open
raise URLError(err)
urllib2.URLError: <urlopen error [Errno 11004] getaddrinfo failed> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:03:13.397

失败`getaddrinfo`通常表明您提供的 URL 有问题。既然我能够解析地址，你确定你不在代理服务器后面吗？这可能会导致 DNS 查找失败，从而导致出现此消息。

Python 如何确定在 Windows 上使用哪个代理：

> 在 Windows 环境中，如果未设置代理环境变量，则从注册表的 Internet 设置部分获取代理设置。

如需更多帮助，我同意@MikeHunter。我试图修复你的代码，但由于我必须实现你的异常类才能让代码运行，我认为你应该重新缩进你的代码并提供更多信息。对不起。

# javascript - ddSlick 在选择中具有动态创建的选项字段

> ID：13777689
> 
> 赞同：2
> 
> 时间：2012-12-08T13:00:57.373
> 
> 标签：javascript, jquery, drop-down-menu, option

这是我的问题：

我正在使用 ddSlick 插件来实现带有标志的语言下拉菜单。问题是我正在从 xml 文件动态创建这个下拉列表。一切正常，选择已正确创建，但 ddSlick 插件看不到这些选项字段。我 100% 确定他们拥有所有必要的数据值。

此外，似乎 ddSlick 在我的脚本之前运行（即使它在我的脚本之后链接），因为当我以静态方式（不是通过解析 xml，而是直接将其放入 HTML 文档）放置选项时，一切都很好。这是我的代码：

运行我的 xml2html js 函数之前的 HTML：

```
<form>
  <select id='countries' name='countries'>
  </select>
</form> 
```

xml解析后的HTML：

```
<form>
  <select id='countries' name='countries'>
    <option data-imagesrc="css/images/flags/Select...jpg" data-description="Select.." value="0">Select..</option>
    <option data-imagesrc="css/images/flags/United States.jpg" data-description="United States" value="1">United States</option>
    <option data-imagesrc="css/images/flags/United Kingdom.jpg" data-description="United Kingdom" value="2">United Kingdom</option>
    <option data-imagesrc="css/images/flags/France.jpg" data-description="France" value="3">France</option>
  </select>
</form> 
```

ddSlick 运行后的 HTML：

```
<form>
  <div id="countries" class="dd-container" style="width: 260px;">
    <div class="dd-select" style="width: 260px; background-color: rgb(238, 238, 238); background-position: initial initial; background-repeat: initial initial;">
      <input class="dd-selected-value" type="hidden">
      <a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span>
    </div>
    <ul class="dd-options" style="width: 260px;"></ul>
    <option data-imagesrc="css/images/flags/Select...jpg" data-description="Select.." value="0">Select..</option>
    <option data-imagesrc="css/images/flags/United States.jpg" data-description="United States" value="1">United States</option>
    <option data-imagesrc="css/images/flags/United Kingdom.jpg" data-description="United Kingdom" value="2">United Kingdom</option>
    <option data-imagesrc="css/images/flags/France.jpg" data-description="France" value="3">France</option>
    <option data-imagesrc="css/images/flags/Germany.jpg" data-description="Germany" value="4">Germany</option>
    <option data-imagesrc="css/images/flags/Netherlands.jpg" data-description="Netherlands" value="5">Netherlands</option>
  </div>
</form> 
```

另外，我注意到浏览器控制台中的一个错误：`Uncaught TypeError: Cannot read property 'imageSrc' of undefined`在第 246 行（ddSlick 插件的未压缩版本）。

我试图将这些函数（我的 xml 解析和 ddSlick）作为一个链运行在一个或两个单独的`<script></script>`块中，但没有成功。我希望我正确地描述了一切。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T13:23:21.383

`Uncaught TypeError`我可以通过让您描述来重现您的代码。当您在空选择上应用插件时会发生这种情况（检查[小提琴](http://jsfiddle.net/BPrhJ/)中的控制台）。您的问题是 AJAX 调用是**异步**的，并且`.ddslick`在加载 XML 之前调用了插件。因此，要修复您的代码，您需要更改：

```
xml2html();
$('select').ddslick(); 
```

对于这样的事情：

```
function xml2html() {
    $.ajax({
        url: 'test.xml',
        dataType: 'xml',
        success: function() {
            // ... process xml - create <option>
            $('select').ddslick();
        }
    });
} 
```

# android - 套接字无法连接

> ID：13777697
> 
> 赞同：2
> 
> 时间：2012-12-08T13:02:26.483
> 
> 标签：android, sockets

这就是问题所在。

我有两部安卓手机，都连接到同一个无线网络。一部电话正在使用 ServerSocket 进行侦听，而另一部则尝试使用此套接字进行连接。

然而，这并没有发生。(ie) 没有建立连接。但是，当我在我的 PC（也在同一网络上）上创建一个监听 ServerSocket 并将我的手机设置为连接到 PC 时，连接就建立了。

换句话说，我可以在手机和电脑之间建立连接，但不能在手机和手机之间建立连接。有没有人知道什么可能导致这个问题？

谢谢！

下面是我用来获取 IPv4 地址的代码。

```
WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
int ipAddress = wifiInfo.getIpAddress();
int[] address = new int[4];
String ip = "";
for (int i = 0; i < 4; i++) {
   address[i] = ipAddress % 256;
   ipAddress /= 256;
   if (i != 3)
      ip += (String.valueOf(address[i]) + ".");
   else
      ip += String.valueOf(address[i]);
}
return ip; 
```

编辑：

我尝试记录确切的位置和原因，它给出了以下错误：

```
java.net.SocketException: No route to host at 
org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method) at 
dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:357) at 
org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:207) at 
org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:186) at 
java.net.Socket.startupSocket(Socket.java:735) at 
java.net.Socket.<init>(Socket.java:263) at 
com.test.word.WifiActivity$12.run(WifiActivity.java:460) at
java.lang.Thread.run(Thread.java:1027) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:05:28.540

忘记网络并重新连接它解决了这个问题。

感谢你的帮助！

# r - pca - 哪个特征向量对应哪个特征值

> ID：13777702
> 
> 赞同：2
> 
> 时间：2012-12-08T13:03:21.540
> 
> 标签：r, eigenvector

我要做如下：我有一组 Vektors v1-vn 对于这些，我需要协方差矩阵（我在做 pca 时得到）。我还需要协方差矩阵的特征值和特征向量。我将特征值按降序排序，然后根据它们对应的特征值对特征向量进行排序。之后，我将 v1 与第一个特征向量相乘，v2 与第二个特征向量相乘，依此类推。我以这种方式返回了我得到的 skalar。

R中是否有任何简单的方法可以查看哪个特征值对应于哪个特征向量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T17:50:39.490

直接使用的结果`prcomp`。它将特征值从大到小排序。

```
 p <- prcomp(USArrests, scale=T) 
```

对于 的适当值`i`，特征值为`p$sdev[i]^2`，特征向量`p$rotation[,i]`

# jquery - SQL 查询错误（NOT IN 运算符）

> ID：13777703
> 
> 赞同：0
> 
> 时间：2012-12-08T13:03:44.473
> 
> 标签：jquery, mysql, sql

我在 SQL 中有这个查询

```
SELECT E.ID E.name
into #TmpEmplyee
FROM Employee E, Outsourcing O, Student S
WHERE E.ID NOT IN (SELECT ID FROM Student UNION SELECT ID FROM Outsourcing) 
```

我有这个例外：

`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.name FROM Employee E, Outsourcing O, Student S WHERE E.ID NOT IN (SELECT ID FRO' at line 1`

我试图运行内部查询并且它有效。我认为问题出在`NOT IN`操作员上，但我不知道它在哪里。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:05:37.233

你需要一个逗号:-)

```
SELECT E.ID, E.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:05:53.853

缺少逗号：

```
SELECT E.ID, E.name
           ^-- 
```

现在您正在尝试将 定义`E.name`为别名`E.ID`，但别名中不能有句点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T13:06:15.420

```
SELECT E.ID, E.name
into #TmpEmplyee
FROM Employee E, Outsourcing O, Student S
WHERE E.ID NOT IN (SELECT ID FROM Student UNION SELECT ID FROM Outsourcing); 
```

逗号很重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T13:07:02.470

您需要在查询之间使用逗号

```
SELECT E.ID,E.name
into #TmpEmplyee
FROM Employee E, Outsourcing O, Student S
WHERE E.ID NOT IN (SELECT ID FROM Student UNION SELECT ID FROM Outsourcing) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-08T13:16:27.087

最好避免使用 IN （NOT IN 会使用 NULL 值做意想不到的事情，（但由于这些“关键字段”可能不可为空，这在这里不会成为问题），并避免使用 UNION （UNION 需要删除重复项，因此可能需要排序两次）），尤其是在不需要它们的情况下;-)

注意：下面的查询可能“短路”（如果其中一个产生 True，则*不需要评估两个 EXISTS），因此它可能需要在子查询中获取比 UNION 变体更少的行。*

```
SELECT E.ID,E.name
-- into #TmpEmplyee
FROM Employee E
WHERE NOT EXISTS (
    SELECT * 
    FROM Student s
    WHERE s.ID=E.ID
    )
AND NOT EXISTS (
    SELECT *
    FROM Outsourcing o
    WHERE o.ID=E.ID
    )
    ; 
```

# c# - 代码合同静态分析器未检测到琐碎的合同违规

> ID：13777708
> 
> 赞同：2
> 
> 时间：2012-12-08T13:04:05.517
> 
> 标签：c#, static-analysis, code-contracts

我有这个代码：

```
using System;
using System.Diagnostics.Contracts;

namespace TestCodeContracts
{
    class Program
    {
        public static int Divide(int numerator, int denominator, out int remainder)
        {
            Contract.Requires<ArgumentException>(denominator != 0);
            Contract.Requires<ArgumentException>(numerator != int.MinValue || denominator != -1, "Overflow");
            Contract.Ensures(Contract.Result<int>() == numerator / denominator);
            Contract.Ensures(Contract.ValueAtReturn<int>(out remainder) == numerator % denominator);

            remainder = numerator % denominator;
            return numerator / denominator;
        }

        static void Main(string[] args)
        {
            int remainder;
            Console.WriteLine(Divide(10, 6, out remainder));
            Console.WriteLine(Divide(5, remainder, out remainder));

            Console.WriteLine(Divide(3, 0, out remainder));

            Console.Read();
        }
    }
} 
```

在第一次 Divide 调用中，如果我替换`6`为`0`，则静态分析会正确警告它。

如果我替换`6`为`5`，那么我（正确地）在第二次 Divide 调用时收到警告。

但是，无论如何，我在第三次 Divide 电话中*从未收到任何警告。*相反，我只是得到一个运行时错误。

为什么静态分析器无法检测到第三行是否违反合同？

我在 Windows 8 64 位上使用 Visual Studio 2012。代码合同是`Microsoft Code Contracts (devlabs_TS) 1.4.51019.0 for .NET`（这似乎是截至 2012 年 12 月的最新版本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:48:56.593

我[在代码合同论坛上发布了这个](http://social.msdn.microsoft.com/Forums/en-US/codecontracts/thread/85473b0a-ea63-45f9-841e-6912c58621a9)。已确认这确实是一个错误，并将对其进行修复。

> 错误是静态验证器认为 Divide(3, 0... ) 无法访问
> 
> (...)
> 
> 我们将修复错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:00:45.767

这是一个有趣的问题。

我最终简化`Divide`为：

```
public static int Divide(int numerator, int denominator)
{
    Contract.Requires<ArgumentException>(denominator != 0);
    return numerator / denominator;
} 
```

这会引发正确的警告：

```
static void Main(string[] args)
{
    Console.WriteLine(Divide(10, 10));
    Console.WriteLine(Divide(10, 0));
} 
```

请注意，我发现您通常必须重建而不是构建，即使只有一个项目。必须有在重建时清理的代码合同人工制品。

这不会引发警告：

```
static void Main(string[] args)
{
    Console.WriteLine(Divide(10, 9));
    Console.WriteLine(Divide(10, 0));
} 
```

我可以触发警告的唯一方法是第一个除法的分母是否为 10（显然它在为 0 时也有效）。

这似乎是一个错误——我会向代码合同团队发送一封电子邮件，看看他们怎么说。

# c# - 如何使用 Visual Studio - 生成异步 WCF 调用？

> ID：13777710
> 
> 赞同：12
> 
> 时间：2012-12-08T13:04:17.503
> 
> 标签：c#, .net, wcf, asynchronous

我的`OperationContract`：

```
public List<MessageDTO> GetMessages()
        {
            List<MessageDTO> messages = new List<MessageDTO>();
            foreach (Message m in _context.Messages.ToList())
            {
                messages.Add(new MessageDTO()
                {
                    MessageID = m.MessageID,
                    Content = m.Content,
                    Date = m.Date,
                    HasAttachments = m.HasAttachments,
                    MailingListID = (int)m.MailingListID,
                    SenderID = (int)m.SenderID,
                    Subject = m.Subject
                });
            }
            return messages;
        } 
```

在服务参考配置中，我选中了“生成异步操作”选项。如何使用生成的`GetMessagesAsync()`？在网上我找到了使用的示例`AsyncCallback`，但是我对此并不熟悉。有没有办法以某种友好的方式使用它，比如.NET 4.5 中`async`的`await`关键字？如果不是，我应该怎么做才能异步调用该方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T14:14:34.137

如果您选择“生成异步操作”，您将获得必须使用回调的“旧”行为。

如果要使用新的 async/await 语法，则必须选择“生成基于任务的操作”（默认选中）。

当使用默认的 Wcf 模板时，这将生成以下代理代码：

```
 public System.Threading.Tasks.Task<string> GetDataAsync(int value) {
      return base.Channel.GetDataAsync(value);
  } 
```

如您所见，没有更多的回调。而是`Task<T>`返回 a。

您可以通过以下方式使用此代理：

```
public static async Task Foo()
{
    using (ServiceReference1.Service1Client client = new ServiceReference1.Service1Client())
    {
        Task<string> t = client.GetDataAsync(1);
        string result = await t;
    }
} 
```

您应该使用标记调用方法，`async`然后`await`在调用服务方法时使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T13:55:39.917

您的服务参考（如果您使用的是 .Net 4.5）可以设置为生成基于任务的异步调用。（配置服务参考>检查允许生成异步操作>选择生成基于任务的操作）这些可以像任何`async`方法一样使用。以下是如何使用它的示例：

```
using (var proxy = new YourServiceClient())
{
    var t1 = proxy.GetMessagesAsync();
    var t2 = proxy.GetMessagesAsync();
    //they're runnning asynchronously now!

    //let's wait for the results:
    Task.WaitAll(t1, t2);
    var result1 = t1.Result;
    var result2 = t2.Result;
    Console.WriteLine(result1);
    Console.WriteLine(result2);
} 
```

如果您的客户端未使用 .Net 4.5，则无法生成使用 .Net 4.5 的服务引用`async`。你必须用老式的方法，使用回调。这是一个例子：

```
static void m()
{
    var proxy = new YourServiceClient();
    proxy.GetMessagesCompleted += proxy_GetMessagesCompleted;
    proxy.GetMessagesAsync();
}

static void proxy_GetMessagesCompleted(object sender, GetMessagesCompletedEventArgs e)
{
    var proxy = (IDisposable)sender;
    proxy.Dispose(); //actual code to close properly is more complex

    if (e.Error != null)
    {
        // do something about this
    }

    var result = e.Result;
    Console.WriteLine(result);
} 
```

请注意，在这些场景的实际代码中，您不应该使用`using`或`IDisposable.Dispose()`清理客户端，请参阅[使用 Using 语句避免问题](http://msdn.microsoft.com/en-us/library/aa355056.aspx)和[此代码](http://nimtug.org/blogs/damien-mcgivern/archive/2009/05/26/wcf-communicationobjectfaultedexception-quot-cannot-be-used-for-communication-because-it-is-in-the-faulted-state-quot-messagesecurityexception-quot-an-error-occurred-when-verifying-security-for-the-message-quot.aspx)，让您开始进入关闭这些东西的混乱世界。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T14:07:21.607

如果您使用的是 VS2012，那么您可以使用如下`*Async`调用：

```
var proxy = new MyClient();
var result = await proxy.GetMessagesAsync(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T13:45:13.083

像这样的东西怎么样...

```
public async Task<string> DoSomething()
{
var someProxy = new ServiceClient();

var t = someProxy.SomeMethodAsync();
await Task.WhenAny(t);

return t.Result; 
```

}

# asp.net - 使用 Special:Export 从 Wikipedia 获取数据

> ID：13777711
> 
> 赞同：2
> 
> 时间：2012-12-08T13:04:44.227
> 
> 标签：asp.net, xml, vb.net, mediawiki, wikipedia-api

我正在尝试使用从维基百科获取数据[`Special:Export`](http://en.wikipedia.org/wiki/Special%3aExport)

以下是我的标记，我无法理解为什么它没有进入 while 循环？我没有得到任何错误。请帮助。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim webRequest As System.Net.HttpWebRequest = CType(System.Net.WebRequest.Create("http://en.wikipedia.org/wiki/Special:Export/Train"), HttpWebRequest)
        webRequest.Credentials = System.Net.CredentialCache.DefaultCredentials
        webRequest.Accept = "text/xml"
        webRequest.UserAgent = "foo/bar"
        Dim webResponse As System.Net.HttpWebResponse = CType(webRequest.GetResponse, HttpWebResponse)
        Dim responseStream As System.IO.Stream = webResponse.GetResponseStream
        Dim reader As System.Xml.XmlTextReader = New XmlTextReader(responseStream)
        Dim NS As String = "http://www.mediawiki.org/xml/export-0.4/"
        Dim doc As XPathDocument = New XPathDocument(reader)
        reader.Close()
        webResponse.Close()
        Dim myXPathNavigator As XPathNavigator = doc.CreateNavigator
        Dim nodesText As XPathNodeIterator = myXPathNavigator.SelectDescendants("text", NS, False)

        While nodesText.MoveNext
            Response.Write((nodesText.Current.InnerXml + " "))
        End While
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T22:18:04.580

特别：导出应该是 POST'ed。请参阅[特殊：出口手册](https://www.mediawiki.org/wiki/Manual:Parameters_to_Special:Export)。

但是，您真的不应该这样做。请使用[您选择的语言的 Web API 客户端库](https://www.mediawiki.org/wiki/API:Client_code#.NET)并访问[导出模块](https://www.mediawiki.org/wiki/API:Query#Exporting_pages)。

# c++ - _ _ FILE _ _ 宏的奇怪输出

> ID：13777712
> 
> 赞同：1
> 
> 时间：2012-12-08T13:05:04.347
> 
> 标签：c++, winapi

为什么宏`__FILE__`扩展为包含在一台计算机上的路径的文件的全名，而仅扩展为文件的名称（未指定路径）？在两台计算机上我都有 MSVC-10.0 和 Win7。

当然，标准不保证任何事情：

**ISO/IEC 14882:2011**

> 16.8 预定义的宏名称 [cpp.predefined]
> 
> `__FILE__`当前源文件的假定名称（字符串文字）。

MSDN 对这个宏做了如下说明：

[http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.71%29.aspx)

> `__FILE__`
> 
> 当前源文件的名称。`__FILE__`展开为用双引号括起来的字符串。

我不在两台计算机上使用密钥 /FC。

# php - CakePHP 和 HABTM 插入/保存不起作用

> ID：13777718
> 
> 赞同：0
> 
> 时间：2012-12-08T13:06:01.733
> 
> 标签：php, cakephp, has-and-belongs-to-many

我被困在 Cakephp 插入中，这就是我所拥有的

**-订购HABTM地址**

**-地址模型**

这是我在地址模型中的关联：

```
public $hasAndBelongsToMany = array(
    'Address' => array(
        'className' => 'Address',
        'joinTable' => 'address_customers',
        'foreignKey' => 'customer_id',
        'associationForeignKey' => 'address_id'  
    )
); 
```

我想用一个新地址保存/插入一个新客户所以，我认为下面的数组可以工作：

```
array(
'Customer' => array(
    'nom' => 'Khiami',
    'prenom' => 'TEST',
    'tel' => '0945454545',
    'ptel' => '',
    'commentaire' => '',
    'email' => '',
    'anniversaire' => array(
        'day' => '08',
        'month' => '12',
        'year' => '2012'
    ),
    'createdFrom' => 's'
),
'Address' => array(
    (int) 0 => array(
        'adresse' => 'ADDR TEST',
        'cp_id' => '1',
        'etage' => '',
        'residence' => '',
        'batiment' => '',
        'appartement' => '',
        'type' => 'l',
        'code_sonette' => '',
        'code_portail' => '',
        'code_batiment' => '',
        'code_asc' => ''
    )
)
) 
```

唯一有效的是我先保存客户，然后使用下面的数组：

```
array(
(int) 0 => array(
    'Customer' => array(
        'customer_id' => '394'
    ),
    'Address' => array(
        'adresse' => 'ADDR TEST',
        'cp_id' => '1',
        'etage' => '',
        'residence' => '',
        'batiment' => '',
        'appartement' => '',
        'type' => 'l',
        'code_sonette' => '',
        'code_portail' => '',
        'code_batiment' => '',
        'code_asc' => ''
    )
)
) 
```

但是，我**仍然没有填写关联表**！它只在地址表中添加一个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:42:14.303

由于您在 HABTM 关系中指定了可连接，我怀疑它是一个命名约定问题。

您是保存在 Address 还是 Customer 模型中？因为如果你从地址模型中调用它，我想应该已经有一个客户，在这种情况下你只需要设置：

```
$this->request->data['Customer']['Customer'] = $customer_id; 
```

并保存地址数据，它应该在表中创建HABTM关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:57:29.993

是的，您应该在两者中都指定它：

地址型号：

```
public $hasAndBelongsToMany = array(
   'Customer' => array(
       'className' => 'Customer',
       'joinTable' => 'address_customers',
       'foreignKey' => 'address_id',
       'associationForeignKey' => 'customer_id'  
)); 
```

客户型号：

```
 public $hasAndBelongsToMany = array(
   'Address' => array(
      'className' => 'Address',
      'joinTable' => 'address_customers',
      'foreignKey' => 'customer_id',
      'associationForeignKey' => 'address_id'  
)); 
```

# c# - RestSharp XmlSerializer 和通用列表不会被序列化

> ID：13777719
> 
> 赞同：3
> 
> 时间：2012-12-08T13:06:08.113
> 
> 标签：c#, xmlserializer, restsharp

我正在使用 RestSharp 获取数据并将其发布到 WCF。复杂类型的反序列化按预期工作。但是，我注意到在发布具有复杂类型（特别是通用列表）的请求时，WCF 服务中这些列表的计数始终为零。使用 RestSharp XmlSerializer 进行快速测试，我注意到以下几点：

如果我尝试序列化以下对象列表项未序列化。

```
 var myObj = new SomeObject()
                    {
                        Id = 1,
                        Name = "Somename",
                        Items = new List<string> {"itemA", "itemB"}
                    };

    var ser = new XmlSerializer(); //RestSharp serializer
    var result = ser.Serialize(myObj);

    return result; 
```

生成的xml：

```
<SomeObject>
  <Name>Somename</Name> 
  <Id>1</Id> 
  <Items>
    <String /> 
    <String /> 
  </Items>
</SomeObject> 
```

但是，如果我使用标准的 .Net XmlSerializer，结果是：

```
- <SomeObject xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Name>Somename</Name> 
  <Id>1</Id> 
- <Items>
  <string>itemA</string> 
  <string>itemB</string> 
  </Items>
  </SomeObject> 
```

发布复杂类型的请求时是否需要注册 .NET XmlSerializer？还是我忘记了什么？

# java - 启动画面 - 触摸跳过

> ID：13777726
> 
> 赞同：0
> 
> 时间：2012-12-08T13:06:48.863
> 
> 标签：java, android, touch

我有以下代码：

```
package com.example.top_tech_deals;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.view.MotionEvent;
import android.widget.VideoView;

public class Splash extends Activity{

@Override
protected void onCreate(Bundle TravisLoveBacon) {
    // TODO Auto-generated method stub
    super.onCreate(TravisLoveBacon);
    setContentView(R.layout.splash);

VideoView vv = (VideoView)this.findViewById(R.id.videoView);

String fileName = "android.resource://" + getPackageName() + "/" + R.raw.splashvid2;

vv.setVideoURI(Uri.parse(fileName));

vv.start();

    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(12000);

            } catch(InterruptedException e){
                e.printStackTrace();

            } finally{
                Intent openStartingPoint = new Intent     ("android.intent.action.MENU");
                startActivity(openStartingPoint);

            }
        }

    };
    timer.start();
}

//Function that will handle the touch

@Override

public boolean onTouchEvent(MotionEvent event) {

        if (event.getAction() == MotionEvent.ACTION_DOWN) {

            synchronized(timer){

                splashTread.notifyAll();

            }

        }

        return true;
    }

} 
```

通过使用 Bucky 的教程之一，我设法创建了上述代码，该代码用于创建 12 秒的初始屏幕。我还对其进行了修改，以便播放视频。我遇到的主要问题是代码的最后一点，即我在网上找到的 OnTouchEvent。它应该做的是让用户只需点击屏幕即可跳过启动屏幕，这应该将用户带到 MENU 文件。

错误似乎在这一行：

```
synchronized(timer){ 
```

上面写着“错误计时器无法解析为变量”

为什么会发生这种情况，我该如何解决？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:22:01.170

见代码：

```
package com.example.top_tech_deals;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.view.MotionEvent;
import android.widget.VideoView;

public class Splash extends Activity{

Thread timer;

@Override
protected void onCreate(Bundle TravisLoveBacon) {
    // TODO Auto-generated method stub
    super.onCreate(TravisLoveBacon);
    setContentView(R.layout.splash);

VideoView vv = (VideoView)this.findViewById(R.id.videoView);

String fileName = "android.resource://" + getPackageName() + "/" + R.raw.splashvid2;

vv.setVideoURI(Uri.parse(fileName));

vv.start();

    timer = new Thread(){
        public void run(){
            try{
                 synchronized (this) {
        wait(12000);
         }

            } catch(InterruptedException e){
                e.printStackTrace();

            } finally{
                Intent openStartingPoint = new Intent     ("android.intent.action.MENU");
                startActivity(openStartingPoint);

            }
        }

    };
    timer.start();
}

//Function that will handle the touch

@Override

public boolean onTouchEvent(MotionEvent event) {

        if (event.getAction() == MotionEvent.ACTION_DOWN) {

            synchronized(timer){

                timer.notify();

            }

        }

        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:11:10.350

您的`timer`变量是您的`onCreate()`方法的本地变量，但您正尝试以`synchronized`不同的方法（通过）访问它 - 所以它没有解决。您需要转为成为类数据成员，或者使用其范围在您的方法`timer`中可用的其他对象。`onTouchEvent()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T13:15:28.647

用户计数`downTimer`而不是使用线程并在覆盖方法 onFinish()

```
CountDownTimer countDownTimer =  new CountDownTimer(12000, 1000) {

     public void onTick(long millisUntilFinished) {
       //ToDO
     }

     public void onFinish() {
              Intent openStartingPoint = new Intent     ("android.intent.action.MENU");
              startActivity(openStartingPoint);
     }
  }.start(); 
```

并在 onTouch()

```
@Override

public boolean onTouchEvent(MotionEvent event) {

        startActivity(openStartingPoint);
        countDownTimer.cancle(); 
        return true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T13:16:52.937

似乎您的计时器变量未在类范围内声明，它是在 onCreate() 函数中声明的，这就是为什么其他方法无法通过引用获取它的原因。我建议将其声明为这样的类变量`private Thread timer = null;` 并在 oncreate() 方法中对其进行初始化

```
@Override
    protected void onCreate(Bundle TravisLoveBacon) {
        // TODO Auto-generated method stub
        super.onCreate(TravisLoveBacon);
        setContentView(R.layout.splash);

        VideoView vv = (VideoView)this.findViewById(R.id.videoView);
        String fileName = "android.resource://" + getPackageName() + "/" + R.raw.splashvid2;
        vv.setVideoURI(Uri.parse(fileName));
        vv.start();

        this.timer = new Thread(){
            public void run(){
                try{
                    sleep(12000);
                } catch(InterruptedException e){
                    e.printStackTrace();
                } finally{
                    Intent openStartingPoint = new Intent     ("android.intent.action.MENU");
                    startActivity(openStartingPoint);
                }
            }
        };
        timer.start();
    } 
```

# asp.net - 如何从 ASP.NET MVC 中某些操作的授权属性中获取角色数组？

> ID：13777729
> 
> 赞同：5
> 
> 时间：2012-12-08T13:07:01.163
> 
> 标签：asp.net, asp.net-mvc, authorization

假设我有以下具有授权属性的控制器和操作：

```
 public class IndexController : Controller
    {
        //
        // GET: /Index/

        [Authorize(Roles="Registered")]
        public ActionResult Index()
        {
            return View();
        }

    } 
```

我搜索了整个互联网，但没有找到这个简单问题的答案：如何将角色注释到特定的动作/控制器？在这种情况下：索引操作有：string[] = {"Registered"}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T13:24:31.123

最后我找到了解决方案！比我想象的要容易！啊哈哈我需要从 AuthorizeAttribute 扩展一个类并在操作中使用它。我需要的信息是继承类的属性“角色”：

```
public class CustomAuthorizationAttribute : AuthorizeAttribute
{

    public override void OnAuthorization(AuthorizationContext filterContext)
    {

        var roles = this.Roles;

        base.OnAuthorization(filterContext);
    }

} 
```

在索引控制器上：

```
public class IndexController : Controller
    {
        //
        // GET: /Index/

        [CustomAuthorizationAttribute(Roles = "Registered")]
        public ActionResult Index()
        {
            return View();
        }

    } 
```

# mysql - 表日期列与生成的日期列表的比较 - MYSQL

> ID：13777730
> 
> 赞同：2
> 
> 时间：2012-12-08T13:07:16.923
> 
> 标签：mysql, date, comparison

将表列中的日期与 MYSQL 中列表中生成的日期进行比较时，似乎有一种奇怪的行为。

请查看[* SQLFIDDLE](http://sqlfiddle.com/#!2/1e031/5)参考。

**工资表**：

```
ID  DATESTAMP
1   August, 30 2012 00:00:00+0000
2   September, 02 2012 00:00:00+0000
3   September, 15 2012 00:00:00+0000
4   September, 24 2012 00:00:00+0000
5   October, 05 2012 00:00:00+0000
6   October, 16 2012 00:00:00+0000
7   October, 19 2012 00:00:00+0000
8   November, 02 2012 00:00:00+0000
9   November, 10 2012 00:00:00+0000
10  November, 16 2012 00:00:00+0000
11  November, 24 2012 00:00:00+0000
12  November, 30 2012 00:00:00+0000
13  December, 01 2012 00:00:00+0000
14  December, 07 2012 00:00:00+0000 
```

**日期列表在两个特定日期之间生成，具有恒定的天间隔**

询问：

```
set @i:= 0;

SELECT date_format(DATE(ADDDATE('2012-10-05', 
INTERVAL @i:=@i+14 DAY)),'%Y-%m-%d')
AS dateP, @i
FROM payroll
HAVING @i < datediff(now(), date '2012-10-05')
;

DATEP          @IntervalDays
2012-10-19     14
2012-11-02     28
2012-11-16     42
2012-11-30     56
2012-12-14     70 
```

如您所见，生成的日期列表与上面的工资表匹配。但是，当比较完成时，它会重新发送零个记录。

**比较查询**：

```
set @i:= 0;

SELECT distinct datestamp FROM payroll
WHERE date(datestamp) in (
SELECT DATE(ADDDATE('2012-10-05', 
INTERVAL @i:=@i+14 DAY) ) AS dateP
FROM payroll
where @i < DATEDIFF(now(), date '2012-10-05') 
)
; 
```

所以**我有问题**：

*   用作嵌套查询时，内部查询是否停止生成日期？

*   我在这里使用的日期比较方法有什么问题吗？

*   整个失败的原因可能是什么？

*   如何在`Select`没有任何程序/功能的情况下自行修复它？:)

PS：

我也在尝试在 SQL Server 和 Oracle 中对此进行测试。

有许多很好的问题和答案来支持在站点的各种情况下发生的“日期比较”问题。这包括诸如[mysql date comparison with date_format 之](https://stackoverflow.com/questions/13507642/mysql-date-comparison-with-date-format)类的帖子。等等。可能有一个隐藏的地方要求我用不同的措辞询问我面临的确切问题。找不到，因此发布了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:04:59.093

**第二次更新：**

现在我让它在每个版本中都能正常工作：

```
select
*
from
Payroll
inner join 
(
SELECT DATE(DATE_ADD('2012-10-05', 
INTERVAL @i:=@i+14 DAY) ) AS dateP
FROM Payroll, (SELECT @i:=0) r
where @i < DATEDIFF(now(), date '2012-10-05') 
) sq on Payroll.datestamp = sq.dateP 
```

您只需在查询中初始化变量。

**更新：**

奇怪的是，这个可以在我的本地机器上正常工作（版本 5.1.41-3ubuntu12.7-log），但不能在你的 SQLfiddle 上工作。

```
set @i:= 0;
select
*
from
Payroll
inner join 
(
SELECT DATE(DATE_ADD('2012-10-05', 
INTERVAL @i:=@i+14 DAY) ) AS dateP
FROM Payroll
where @i < DATEDIFF(now(), date '2012-10-05') 
) sq on Payroll.datestamp = sq.dateP 
```

**更新结束**

你试过这样吗？

```
set @i:= 0;

SELECT distinct datestamp FROM payroll
WHERE STR_TO_DATE(datestamp, '%M, %d %Y %H:%i:%f') in (
SELECT DATE(ADDDATE('2012-10-05', 
INTERVAL @i:=@i+14 DAY) ) AS dateP
FROM payroll
where @i < DATEDIFF(now(), date '2012-10-05') 
)
; 
```

我的猜测是，该`DATE()`功能失败，因为您`varchar`（是吗？）日期不是 ISO 格式。因此，您必须使用`STR_TO_DATE()`功能。

有关`STR_TO_DATE()`read [here](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)和[here](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)的确切用法。我不确定微秒部分。

# java - Object 类是如何实现的（hashCode 和内部字段等方法）？

> ID：13777731
> 
> 赞同：9
> 
> 时间：2012-12-08T13:07:17.953
> 
> 标签：java, object, jvm

我很好奇 Object 类是如何实现的。例如

1.  方法 hashCode() 或 wait()
2.  内部状态如何表示。例如，内在锁或用于存储调用对象的 wait() 线程的数据结构。

为了找出这些，我下载了一个OpenJDK的源代码并开始挖掘。首先，我遇到的是\openjdksrc\jdk\src\share\native\java\lang\Object.c文件，其中包含其他：

```
static JNINativeMethod methods[] = {
    {"hashCode",    "()I",                    (void *)&JVM_IHashCode},
    {"wait",        "(J)V",                   (void *)&JVM_MonitorWait},
    {"notify",      "()V",                    (void *)&JVM_MonitorNotify},
    {"notifyAll",   "()V",                    (void *)&JVM_MonitorNotifyAll},
    {"clone",       "()Ljava/lang/Object;",   (void *)&JVM_Clone},
};
JNIEXPORT void JNICALL
Java_java_lang_Object_registerNatives(JNIEnv *env, jclass cls)
{
    (*env)->RegisterNatives(env, cls,
                            methods, sizeof(methods)/sizeof(methods[0]));
}

JNIEXPORT jclass JNICALL
Java_java_lang_Object_getClass(JNIEnv *env, jobject this)
{
    if (this == NULL) {
        JNU_ThrowNullPointerException(env, NULL);
        return 0;
    } else {
        return (*env)->GetObjectClass(env, this);
    }
} 
```

据我了解，methods[] 数组定义了 Object 方法的本机实现之间的映射。例如，Object 的 hashCode() 映射到 JVM_IHashCode 函数。JVM_IHashCode 在 \openjdksrc\hotspot\src\share\vm\prims\jvm.cpp 中实现。这是我的第一个问题。**为什么这已经是 VM 本身的一部分（它已经在 \openjdksrc\hotspot\src\share\vm 中定义）？** 但是让我们转到 JVM_IHashCode 的代码：

```
JVM_ENTRY(jint, JVM_IHashCode(JNIEnv* env, jobject handle))
  JVMWrapper("JVM_IHashCode");
  // as implemented in the classic virtual machine; return 0 if object is NULL
  return handle == NULL ? 0 : ObjectSynchronizer::FastHashCode (THREAD, JNIHandles::resolve_non_null(handle)) ;
JVM_END 
```

**为什么如果 object 为 null，我们在这里返回 0？**我想应该抛出一个NPE。否则，从 \openjdksrc\hotspot\src\share\vm\runtime\synchronizer.cpp 调用 FastHashCode，最终在某个时间点调用 get_next_hash 来计算实际值。 **一旦计算出来，问题是它存储在哪里？**

```
 intptr_t ObjectSynchronizer::FastHashCode (Thread * Self, oop obj) {

...CUT...

      ObjectMonitor* monitor = NULL;
      markOop temp, test;
      intptr_t hash;
      markOop mark = ReadStableMark (obj);

...CUT...

      if (mark->is_neutral()) {
        hash = mark->hash();              // this is a normal header
        if (hash) {                       // if it has hash, just return it
          return hash;
        }
        hash = get_next_hash(Self, obj);  // allocate a new hash code
        temp = mark->copy_set_hash(hash); // merge the hash code into header
        // use (machine word version) atomic operation to install the hash
        test = (markOop) Atomic::cmpxchg_ptr(temp, obj->mark_addr(), mark);
        if (test == mark) {
          return hash;
        }
        // If atomic operation failed, we must inflate the header
        // into heavy weight monitor. We could add more code here
        // for fast path, but it does not worth the complexity.
      } 
...CUT...
      return hash;
    } 
```

所以 oop 类/结构 ( **?** ) 有一个 markOop 类/结构 ( **?** ) 存储散列值。Funilly 我找不到这些类/结构。我所能找到的是：

```
class oopDesc {
  friend class VMStructs;
 private:
  volatile markOop  _mark;
...CUT... 
```

在 \openjdksrc\hotspot\src\share\vm\oops\oop.hpp 中，它似乎在私有字段中有 markOop。**但是，其余代码中提到的“oop”到底是什么？在哪里可以找到 markOop 定义？**我找到了对应的：

```
class markOopDesc: public oopDesc 
...CUT... 
```

在 \openjdksrc\hotspot\src\share\vm\oops\markOop.hpp 但它只充满了枚举并且找不到可以存储哈希值的字段。如果有人至少能回答我的部分**问题**，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:16:44.497

Java 对象的哈希码在计算后存储在对象头中。

[http://www.javamex.com/tutorials/memory/object_memory_usage.shtml](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)

[http://hunmr.blogspot.com/2012/08/java-performance-tunning.html](http://hunmr.blogspot.com/2012/08/java-performance-tunning.html)

从热点/src/share/vm/oops/markOop.hpp

```
// The markOop describes the header of an object.
//
// Note that the mark is not a real oop but just a word.
// It is placed in the oop hierarchy for historical reasons.
//
// Bit-format of an object header (most significant first, big endian layout below):
//
//  32 bits:
//  --------
//             hash:25 ------------>| age:4    biased_lock:1 lock:2 (normal object)
//             JavaThread*:23 epoch:2 age:4    biased_lock:1 lock:2 (biased object)
//             size:32 ------------------------------------------>| (CMS free block)
//             PromotedObject*:29 ---------->| promo_bits:3 ----->| (CMS promoted object)
// 
```

# ruby-on-rails - 同一页面的许多布局

> ID：13777732
> 
> 赞同：1
> 
> 时间：2012-12-08T13:07:28.230
> 
> 标签：ruby-on-rails

我正在寻找一种以`@item`不同方式展示相同内容的方法。例如，如果`@item.template == template1`- 当我点击“显示”链接时 - 我看到了一种布局。对于模板2，我看到了相同项目的另一种布局等。布局是指不同的字体、不同的表格设计等。

做这个的最好方式是什么？

现在我有两个想法：要么有一个特殊的表，其中 column1 是模板名称，column2 是 HTML，然后我只取 HTML 并插入`@item`内容。另一个想法是拥有许多`.haml`文件，并使用`render`命令在控制器中进行选择。

但我仍然不确定。也许你可以提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:37:41.347

您可以在包装元素中添加一个类来修改设计吗？

例如

```
<div class="item layout-<%= @item.template %>">
  <h2><%= @item.title %></h2>

  <table>
    <!-- table data here -->
  </table>
</div> 
```

然后在你的`.css`文件中

```
.item.layout-template1 {
  font-family: Georgia, serif;
}

.item.layout-template2 {
  font-family: Arial, sans-serif;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:48:27.900

I would go with many layout files as it's easier to maintain, version and you can use partials and all that stuff. So something like this in the controller action:

```
render :layout => @item.template 
```

# c++ - 初始化列表需要哪些效果的初始化函数调用？

> ID：13777734
> 
> 赞同：2
> 
> 时间：2012-12-08T13:07:41.197
> 
> 标签：c++, initialization-list

我有一个带有 const 字段成员的基本 Image 类：

```
class Image {
protected:
    const int width;
    const int height;

public:
    virtual ~Image();
    const int getWidth() const;
    const int getHeight() const;

protected:
    Image(const int width, const int height);
}; 
```

这意味着在构造函数中，我必须像这样初始化初始化列表中的宽度和高度：

```
Image::Image(const int width, const int height) :
        width(width), height(height) {
} 
```

现在我打算对其进行子类化，以便我可以通过向子类提供文件路径来加载图像（因此调用代码不必担心加载图像）。此类看起来类似于以下内容：

```
class GlImage: public Image {
private:
    const GLuint textureId;
    const int textureWidth;     // power of 2 width
    const int textureHeight;    // power of 2 height
    const double textureCoordinateX;
    const double textureCoordinateY;

public:
    GlImage(const string path); // is this constructor possible?
    virtual ~GlImage();
    const double getTextureCoordinateX() const;
    const double getTextureCoordinateY() const;

private:
    // what do we use for initialization functions?
}; 
```

但是，我们可以在这里看到 - 在我们获得宽度/高度之前必须加载图像 - 子类中的某些字段也需要在初始化列表中初始化

如何设置子类的构造函数，以便可以初始化所有这些字段？

不可能在子类中引入另一个对象来捕获所有字段数据，将其作为初始化列表中的第一个对象加载，并重新提取所有其他字段的值，因为基类需要宽度/高度（如果图像加载逻辑在派生类中，则不可用）。

是删除 const 修饰符并初始化构造函数中的字段的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:28:45.510

问题是你不能从派生类ctor初始化列表中调用基类构造函数，因为你不知道维度，对吧？

为什么不在派生类上创建静态方法？

```
class GlImage: public Image {
    ....
    static GlImage LoadFromFile(const string& path)
    {
         // read image data and other info
         int w = ...
         int h = ...
         return GlImage(w, h, ....) 
         // of course, you would need a different ctor in derived class
         // it can even be private
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:01:17.343

您可以使用带有可变辅助对象的委托构造函数来执行加载：

```
class GlImage: public Image {
    ...
    GlImage(const string& path) : GlImage(GlImageLoader(path))
    {
    }

private:
    struct GlImageLoader {
        int w;
        int h;
        GlImageLoader(const string& path) {
            //Read image data
            w = ...;
            h = ...;
        }
    };
    GlImage(GlImageLoader&& l) : Image(l.w, l.h), textureId(l.textureId), ...
    {
    }
}; 
```

# javascript - 定义可见元素的数量

> ID：13777735
> 
> 赞同：1
> 
> 时间：2012-12-08T13:07:43.810
> 
> 标签：javascript, jquery, html, css

**一些介绍：**
您好，我想问一下，如果有一种简单的方法，可以知道用户单击某个按钮时可以看到多少个“标签”？

**到目前为止我所拥有的描述：http:**
[//jsfiddle.net/L7bPc/7/](http://jsfiddle.net/L7bPc/7/)
在这里，在 jsfiddle 上，您可以看到我正在考虑的选项卡示例，当您扩大或缩小宽度时，或多或少的选项卡是可见的（由于“溢出：隐藏；”，休息消失了）。

**问题：**
我的问题是，有没有什么简单的方法可以知道，点击右上角的红色方块可以看到多少个标签？

**解释我想要实现的目标：**
为什么？因为我将尝试生成一个“不可见”选项卡列表，稍后单击红色方块（我当然会正确设置它的样式）。我希望它看起来类似于许多带有选项卡的程序，当它们太多时，您可以在它的末尾找到一个小箭头，以展开其余选项卡，在下拉菜单中。我在问如何知道有多少标签可见，有多少不可见（所以我知道在下拉列表中单击它后要生成哪个），我**不是**在问如何创建下拉列表。

这部分由 php 生成，从 MySQL 数据库中获取数据，并在 css 中将它们设置为看起来像标签（我没有在 jsfiddle 中使用 php，只是普通的 html）：

```
<div class="tabs">
    <ul>
        <li id=090NCI class='active'><a href='#' class='active'><span class='active'>090NCI</span></a></li>
        <li id=061PPP><a href='#'><span>061PPP</span></a></li>
        <li id=072KWM><a href='#'><span>072KWM</span></a></li>
        <li id=057ALS><a href='#'><span>057ALS</span></a></li>
        <li id=099AKG><a href='#'><span>099AKG</span></a></li>
        <li id=090WPW><a href='#'><span>090WPW</span></a></li>
        <li id=020MSM><a href='#'><span>020MSM</span></a></li>
        <li id=014LSP><a href='#'><span>014LSP</span></a></li>
        <li id=010AAV><a href='#'><span>010AAV</span></a></li>
        <li id=080MKS><a href='#'><span>080MKS</span></a></li>
        <li id=006ALS><a href='#'><span>006ALS</span></a></li>
        <li id=007KSG><a href='#'><span>007KSG</span></a></li>
        <li id=091AOW><a href='#'><span>091AOW</span></a></li>
        <li id=004ALO><a href='#'><span>004ALO</span></a></li>
        <li id=003WWW><a href='#'><span>003WWW</span></a></li>
        <li id=002KSO><a href='#'><span>002KSO</span></a></li>
        <li id=001NWD><a href='#'><span>001NWD</span></a></li>   
    </ul>
    <div style="position: absolute; right:5px; top:26px; background: red; color:red; width:20px; height: 20px;" onclick="dosomething()"></div>
</div> 
```

有小费吗？解决方案可能是 jQuery 和 javascript，对我来说没有太大区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:16:57.030

尝试这个：

```
$("#redbox").click(function() {

    var visibleLis = $("li").filter(function() {
        var offset = $(this).offset();
        return $(document.elementFromPoint(offset.left, offset.top)).closest(this).length > 0;
    });

    alert(visibleLis.length);
}); 
```

[http://jsfiddle.net/L7bPc/11/](http://jsfiddle.net/L7bPc/11/)

如果您将 定义`.tabs`为完全垂直包含选项卡，则可以使用更优化的版本：

```
$("#redbox").click(function() {

    var boundingBox = $(".tabs")[0].getBoundingClientRect(),
        bbRight = boundingBox.left + boundingBox.width,
        bbBottom = boundingBox.top + boundingBox.height,
        bbLeft = boundingBox.left,
        bbTop = boundingBox.top;

    var visibleLis = $("li").filter(function() {
        var box = this.getBoundingClientRect(),
            left = box.left,
            top = box.top,
            right = box.left + box.width,
            bottom = box.top + box.height;
        return left >= bbLeft && right <= bbRight && top >= bbTop && bottom <= bbBottom;
    });

    alert(visibleLis.length);
}); 
```

[http://jsfiddle.net/L7bPc/13/](http://jsfiddle.net/L7bPc/13/)

# e-commerce - Magento：购物车价格规则缺少选项 - 发生了什么？

> ID：13777737
> 
> 赞同：3
> 
> 时间：2012-12-08T13:07:52.333
> 
> 标签：e-commerce, magento-1.5, magento

我安装了两次 Magento 1.5.1，其中一个具有**购物车价格规则的所有选项** ![所有选项](../Images/d1dfc95fd04b7de20b501510f4a0c602.png)

而另一个**选项则减少了**。![.](../Images/84a02af638a421bda5377c06c5e67182.png)

**这可能是什么原因造成的？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:14:20.520

您可以设置单个属性以使其能够包含在目录价格规则中，以便您的安装之一在属性级别具有不同的设置。

进入目录->属性->管理属性，对于每个属性，您希望能够将价格规则设置`Use for Promo Rule Conditions`为“是”（其底部的前端属性部分）。

# php - 如何每查询 8 个 MySQL 行创建一个新的 DIV

> ID：13777738
> 
> 赞同：0
> 
> 时间：2012-12-08T13:07:59.527
> 
> 标签：php, sql, html, repeat

我试图弄清楚如何每查询 8 个 MySQL 行创建新的 DIV。我正在将 jPagination 集成到我的站点中，因此我需要每从数据库接收到的 8 行创建一个新的 DIV 容器。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:11:39.637

你需要这个： ％

不确定你的代码到底是如何运行的，但是在每一行的循环中你做了一个 count++，然后在 C 中是这样的：

```
if(!count%8) {
   print DIV eccc
} 
```

只是为了让您了解这个 % 的作用：它为您提供了一个部门的剩余部分。例如，如果您的行是第 20 行，那么此时 count 等于 20，那么 20%8 将等于 4。那是因为如果您将 20/8 相除，您将有 2\. *** * 一些东西，然后乘以 2*8 你得到 16。取 20-16 = 4。所以 20%8 是 4。只有当 count++ 中的数字完全可以被数字 8 整除时，你才会得到 0 零。因此，您的 IF 语句说：如果没有剩余的除以 8 的计数，则执行此操作

格言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:10:28.967

```
i = 1
while( gettingRows )
{
    doWhateverYouDoHere()

    if ( i%8 === 0 )
        print "div"
    ++i

   // or put increment right into the if statement like ( if i++ % 8 === 0 )
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T13:18:27.587

```
<?php

// previous code.....
$counter = 1;
echo '<div class="outercssclass">';
echo '<div class="innercssclass">';
// fetch mysql query data into $results....
// you can do validations with mysql_num_rows to check the number of rows the query returned
foreach($results as $result) {
    $counter++;
    if($counter % 8 == 0) {
        echo '</div><div class="innercssclass">';  
    }
    // other logic...
    // rest of the code
}    
echo '</div>'; // for closing the inner div
echo '</div>'; // for closing the outer wrapper div

// rest of the program logic... 
```

# magento - 无法更正 magento 产品和类别网址

> ID：13777747
> 
> 赞同：0
> 
> 时间：2012-12-08T13:09:21.010
> 
> 标签：magento, url-rewriting

我正在使用magento 1.7。magento 产品 url 就像`http://example.com/men/silver-cufflinks`我想`men`从 url 中删除一样。我在 url.php 中评论了以下代码

```
// if (null === $parentPath) {
       // $parentPath = $this->getResource()->getCategoryParentPath($category);
   // }
  //  elseif ($parentPath == '/') {
        $parentPath = '';
   // } 
```

然后清空 core_url_rewrite 表，然后清除缓存并重新索引所有项目，现在我有了`http://example.com/catalog/category/view/s/women/id/181/`. 我想恢复以前的链接，请告诉我该怎么做。我也再次尝试取消注释我已评论的代码，然后再次清除表格并清除缓存，然后重新索引所有内容，但我仍然无法修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:59:21.563

看看@ [Fixing URL Rewrites with Magento](http://www.yireo.com/tutorials/magento/magento-administration/664-fixing-url-rewrites-with-magento)

要从产品 url 中删除类别路径，您可以从 magento 管理员处进行

转到管理 -> 系统 -> 配置 -> 目录

然后在“搜索引擎优化”下将“使用产品 URL 的类别路径”设置为“否”

![在此处输入图像描述](../Images/9141572205038e7fcfdb85e6f67533ad.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:10:09.433

取消注释代码后，尝试手动清理 url-rewrite 表，然后再次运行 url-rewrites reindex。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:00:04.820

您是否启用了 URL 重写？

> 系统 -> 配置 -> Web -> 搜索引擎优化 -> 使用 Web 服务器重写 = 是

此外，您还可以检查：

> 目录 -> URL 重写管理

这个链接： http: [//www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/urlrewrite/index](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/urlrewrite/index)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-06T14:43:44.840

我通过 magento-catalog-click 有问题的目录解决了这个问题，然后转到“url key”并将其更改为您想要的。确保在每个商店视图中更改它，然后单击“保存”。

例子：

```
Catalog
  → General Information
    → Name: Friends
    → Is active: Yes
    → URL key: friends
Store View: English French German 
```

**这些更改将重写所有子类别。**

# delphi - 为什么嵌套类型的范围不包括派生类？

> ID：13777750
> 
> 赞同：10
> 
> 时间：2012-12-08T13:09:43.647
> 
> 标签：delphi, types, nested

我想知道为什么嵌套类型的范围不包括 Delphi 中的派生类；它可以使代码更干净：

```
type
  TBaseTest = class
  public type
    PVector = ^TVector;
    TVector = record
      A, B, R: Integer;
    end;
  public
    procedure Execute(var Vector: TVector); virtual; abstract;
  end;

  TTestA = class(TBaseTest)
  public
// E2003 Undeclared identifier: 'TVector'
    procedure Execute(var Vector: TVector); override;
// workaround:
//  procedure Execute(var Vector: TBaseTest.TVector); override;
  end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:52:05.643

如果我没记错的话，当你在 TBaseTest 中编写 TVertor 时，编译器会先在此类中查找，然后在本单元中查找，然后在 Uses 部分的模块中查找。这就是为什么您可以编写简单的 TVector，即 TBaseTest.TVector。

当您编写一个派生自 TBaseTest 的类 TTestA 并在那里使用 TVector 时，它首先在 TTestA 中查找（没有 TVector），然后在此模块中（也没有 TVector），然后在 Uses 中。如果你想使用TBaseTest的内部类，你应该直接写TBaseTest.TVector，因为TVector是在TBaseTest中定义的，而不是在TTestA中。

# java - JScrollbar 拇指/旋钮较小时未正确绘制

> ID：13777752
> 
> 赞同：0
> 
> 时间：2012-12-08T13:10:07.283
> 
> 标签：java, swing

如果滚动窗格的视图组件足够大，则滚动条拇指很小，然后在 Windows L&F 上无法正确绘制。

![在此处输入图像描述](../Images/a7e44e0344dc5e6854e22ab702df891b.png)

这只是一个审美问题；滚动条功能正常，其他 L&F 似乎一切都很好。

有没有办法解决这个问题？也许以某种方式设置拇指的最小宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:02:21.190

这对我有用（Java 1.7.0_09，Windows 7）：

```
UIManager.put("ScrollBar.minimumThumbSize", new Dimension(32, 32)); 
```

# android - Dalvik 再造，.dex 文件的结构

> ID：13777756
> 
> 赞同：1
> 
> 时间：2012-12-08T13:10:39.797
> 
> 标签：android, reverse-engineering, dalvik

我正在尝试分析已编译的 Dalvik 代码，但我发现了一个问题。这是 .dex 格式的[规范](http://source.android.com/tech/dalvik/dex-format.html)。我可以获得文件的标题，但我不明白接下来会发生什么 - 当我使用 dexdump 时，我在标题旁边有类：

```
class_defs_off      : 61836 (0x00f18c)
data_size           : 368612
data_off            : 72312 (0x011a78)
Class #0 header:
class_idx           : 62
access_flags        : 1536 (0x0600) 
```

但是当我查看我的字节码时，还有其他东西。我不明白标题旁边会发生什么。根据规范，它是`string_idi's`，但我不确定。.dex 文件的真正结构是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T19:15:30.007

Baksmali 可以转储现有 dex 文件的上下文，格式类似于 dx 的十六进制转储。（优点是可以dump现有的dex文件）

`baksmali classes.dex -D out.dump`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T18:59:09.277

您所指的规范实际上确实准确地描述了 dex 文件的结构。（注：我写了那个文件。）

Dexdump 不会按顺序输出 dex 文件的全部内容，这解释了您的一些困惑。该`dx`工具在生成 dex 文件时可以输出带注释的 dex 文件内容列表。您可能会发现这很有用。抱歉，我不记得临时选项，但它会类似于`--dex --dump-to=file.txt --dump-bytes`.

我希望这有帮助。

# cluster-computing - 为 OpenLayers 集群生成矢量数据（点）

> ID：13777759
> 
> 赞同：0
> 
> 时间：2012-12-08T13:11:08.710
> 
> 标签：cluster-computing, openlayers, geojson

在我的 Web 应用程序中，我将使用`OpenLayers.Strategy.AnimatedCluster`策略，因为我需要可视化大量的点特征。[这](http://acuriousanimal.com/code/animatedCluster/)是一个很好的例子。在上述示例中的两个示例中，数据（点特征）都是从`GeoJSON`文件中生成的。

**那么，谁能给我提供一个包含 100 000+**（甚至 500 000+）**特征（例如，世界城市）的文件，或者解释我如何生成它们以便它们位于世界各地**（不像在上述链接的第一个示例中的西班牙）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:40:03.910

使用地理位置数据库为您提供所需的数据。 [例如，GeoLite](http://dev.maxmind.com/geoip/geolite)

如果 400K+ 个位置没问题，请使用下载他们的[CSV CITY LIST](http://geolite.maxmind.com/download/geoip/database/GeoLiteCity_CSV/GeoLiteCity-latest.zip)

如果您想要更多，那么您可能想要提供[Nominatim 下载](http://wiki.openstreetmap.org/wiki/Planet.osm)，但它们非常庞大（超过 25GB）并且解析数据不像 csv 文件那么简单。

# jquery - 如何使用 RJS 从 .js.erb 文件提交来自？

> ID：13777761
> 
> 赞同：0
> 
> 时间：2012-12-08T13:11:10.740
> 
> 标签：jquery, ruby-on-rails, rjs

我有一个表单，当用户提交并且用户未登录时，他们会收到一个登录模式提示。用户登录后，模式消失，但他们必须再次单击表单上的提交按钮。如果成功登录后，模式消失并且表单自动提交，那就太好了。

所以在里面`sessions/create.js.erb`我添加了以下内容。

```
# create.js.erb
<% if signed_in? %>
    $('#ajax-modal').modal('hide').empty();
    $('#new_response).submit();
<% else %>
    $('#ajax-modal').html('<%= j render("sessions/form") %>').modal();
<% end %> 
```

这可行，但不可扩展。首先，我可能有其他形式——不仅仅是`#new_response`——需要类似的行为。所以每次我添加一个新表单时，我都必须编辑`create.js.erb`并添加一个`if (form exists) submit();`. 还有其他时候，模式用于登录，但根本不涉及任何形式。

有没有办法附加一个钩子来告诉`sessions/create.js.erb`只有当一个存在时才提交表单，但不知道表单ID？基本上，已经通过了。

```
# responses/_form.html.slim
= form_for [@discussion, @response], remote: true do |f|
    = f.label :content, "Comments"
    = f.text_area :content, rows: 8
    = f.submit "Reply", class: 'btn btn-success reply', 'data-disable-with' => "Reply"

# Responses controller
class ResponsesController < ApplicationController
  before_filter :require_authentication, except: :index
  ...

  def require_authentication
    redirect_to signin_path unless signed_in?
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:06:53.810

您可以使用某种方式来跟踪哪个表单触发了提交，例如

```
# ResponsesController
class ResponsesController < ApplicationController
  before_filter :require_authentication, except: :index

  def require_authentication
    session[:form_track_code] = params[:form_track_code] if [:put, :post].include?(request.method_symbol) && params[:form_track_code].present?

    redirect_to signin_path unless signed_in?
  end
end

# SessionsController
class SessionsController < ApplicationController # or devise?
  def create
    @form_track_code = session.delete[:form_track_code]
    super # or whatever you implemented
  end
end

# create.js.erb
<% if signed_in? %>
    $('#ajax-modal').modal('hide').empty();
    <% if @form_track_code.present? %>
      $('input[type=hidden][value="<%= @form_track_code %>"]').parents('form').submit();
    <% end %>
<% else %>
    $('#ajax-modal').html('<%= j render("sessions/form") %>').modal();
<% end %>

# application.js
$('form[data-remote=true]').each(function() { $(this).append('<input type="hidden" name="form_track_code" value="' + Math.random() + '" />'); }); 
```

# php - 为什么 RedBean 不使用复数表名？

> ID：13777762
> 
> 赞同：2
> 
> 时间：2012-12-08T13:11:20.773
> 
> 标签：php, redbean, tablename

或者我们可以这样做吗？当你说：

```
$book = R::dispense('books'); 
```

只需使用 RedBean_IModelFormatter 处理命名还是我遗漏了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:22:57.050

你可以这样做，但它会变得混乱并且看起来不太好。标准约定是非复数表名，以便在分发书籍和存储书籍以及关系映射时更有意义。想象一下，如果您将执行以下操作：

```
$book=R::dispense('books');
$book->title='War and Peace';
$pageOne=R::dispense('pages');
$pageOne->number=1;
$pageTwo=R::dispense('pages');
$pageTwo->number=2;
$book->ownPages=array($pageOne,$pageTwo);
R::store($book); 
```

看起来不错。现在假设我们加载一个页面并去获取相关的书：

```
$page=R::load('pages',1);
echo $page->books->title; 
```

这没有多大意义，也不太适合 RedBean 所追求的。同样，你可以做到。如果您已经设置了数据库，则可能不想进行这些更改。同样，这完全取决于您的决定以及您要完成的工作。如果只有你，那就随便吧。如果您在一个小组中工作，重命名表格可能更有意义，以便您的工作更清晰。

# .net - 我无法读取刚刚在对象中设置的属性。为什么？

> ID：13777765
> 
> 赞同：1
> 
> 时间：2012-12-08T13:11:30.607
> 
> 标签：.net, moq

我正在使用起订量。这个例子很简单。设置后我无法读取属性。

```
var mock = new Mock<HttpResponseBase>();
mock.Setup(x => x.Cookies).Returns(new HttpCookieCollection());
mock.Setup(x => x.Headers).Returns(new NameValueCollection());
var response = mock.Object;

// now I set StatusCode
response.StatusCode = 404;

// now I try to read, but StatusCode is 0 here, not 404
var statusCode = response.StatusCode 
```

如您所见，我没有为`StatusCode`. 我该怎么做才能让我写和读它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:15:07.303

这是因为，为了使属性表现得像普通属性，你应该调用`SetupProperty`它的方法。

```
mock.SetupProperty(x => x.StatusCode); 
```

# c++ - 元素不能改变的非常量向量 - 备选方案

> ID：13777773
> 
> 赞同：1
> 
> 时间：2012-12-08T13:12:25.283
> 
> 标签：c++

我痴迷于做`const`真正应该做的事情`const`，即使这样做似乎有点痛苦。

在这种情况下，我想要一个`vector<int>`可以添加元素但无法更改其现有元素的元素。问题是这`vector<const int>`是不允许的。

目的不仅是防止我的类的用户修改他们不应该修改的东西（这可以通过`const`成员函数中的迭代器轻松完成）。同样重要的是，**我自己以后不会在自己的代码中做我不打算做的事情**。

我找到了两种选择：

*   改为使用`deque<const int>`。

*   创建我自己的包装实际的矢量类`vector`，像这样（我在`int`这里这样做，但实际上我会使用模板来概括）

    ```
    class my_vector {
    private:
      std::vector<int> vec;    
    public:
      std::vector<int>::const_iterator cbegin() { return vec.cbegin(); }
      std::vector<int>::const_iterator cend() { return vec.cend(); }
      void push_back(int i) { vec.push_back(i); }
    }; 
    ```

您会推荐以下哪些想法（或其他想法）？编译器会将第二种选择转换为与直接使用向量一样快的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:45:23.393

你的痴迷是可以理解的，我并不反对，但除非你真的迫切*需要*它，否则所需的努力可能不值得。

假设您`vector`根据设计要求选择容器作为容器，我不建议将其更改为`deque`，或任何其他类型。它只会混淆未来的读者（可能是你自己），否则也是一种不好的做法。

如果我们使用您的包装器解决方案，您将不得不~~隐藏~~覆盖所有*可能*修改向量的成员，这是一个问题，因为有许多方法用于访问和修改，例如`operator[]`, `at()`, `front()`, `back()`。这可能会使未来的读者感到困惑，因为他们习惯了“标准”`vector`行为。

顺便问一下，你确定`deque<const int> foo;`有效吗？我收到以下错误：

```
error: invalid conversion from 'const void*' to 'void*' 
```

**编辑**看来我没有完全回答你的问题。如果你*必须*选择一个，我会选择包装方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:00:21.397

对于这类标准容器几乎完全符合我的需要的情况，我更喜欢私有继承。公共继承通过指向基类的指针导致切片或非虚拟破坏。作文需要太多额外的打字。

私有继承和使用`using`很好地表达了你的意图。

这是一个例子：

```
#include <iostream>
#include <vector>
#include <iterator>
#include <algorithm>

class my_vector : private std::vector<int> {
  // Utility type 
  typedef std::vector<int> base;
public:
  // Types I don't need to tweak:
  using base::value_type;
  using base::allocator_type;
  using base::size_type;
  using base::difference_type;
  using base::const_reference;
  using base::const_pointer;
  using base::const_iterator;
  using base::const_reverse_iterator;

  // Types I do need to tweak:
  typedef const_reference reference;
  typedef const_pointer pointer;
  typedef const_iterator iterator;
  typedef const_reverse_iterator reverse_iterator;

  // Constructors
    // Implicit constructors OK
  // Destructors
    // Implicit destructors OK
  // Assignment
    // Implicit assignment OK

  // Methods that I don't need to tweak:
  using base::assign;
  using base::get_allocator;
  using base::empty;
  using base::size;
  using base::max_size;
  using base::reserve;
  using base::capacity;
  using base::clear;
  using base::push_back;
  using base::pop_back;
  using base::swap;

  // Methods I need to tweak
  const_reference at( size_type pos ) const { return base::at(pos); }
  const_reference operator[](size_type pos) const { return base::operator[](pos); }
  const_reference front() const { return base::front(); }
  const_reference back() const { return base::back(); }
  const_iterator begin() const { return base::begin(); }
  const_iterator end() const { return base::end(); }
  const_reverse_iterator rbegin() const { return base::rbegin(); }
  const_reverse_iterator rend() const { return base::rend(); }

  // Methods I need to delete:
    // base::insert;
    // base::erase;
    // base::resize;

};

int main () {
  my_vector m;
  m.push_back(1);
  m.push_back(2);
  m.push_back(3);
  my_vector m2;
  m2 = m;
  std::copy(m2.begin(), m2.end(), std::ostream_iterator<int>(std::cout, "\n"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T13:55:32.190

标准容器没有什么神奇之处。如果您需要一个具有不同于标准容器特性的容器，请编写您自己的容器。如果其中一个标准容器接近您的需要，请将其用作内部实现。简而言之，`my_vector`就是要走的路。

# iphone - 如何在 iOS 中取消推送通知

> ID：13777774
> 
> 赞同：2
> 
> 时间：2012-12-08T13:12:27.587
> 
> 标签：iphone, objective-c, ios, ios6, push-notification

我正在开发一个通知应用程序。用户可以输入带有到期日的账单。在到期日之后，它将显示通知。如果用户按下取消它不应该再次显示。

我`[app cancelLocalNotification:oneEvent];`在取消按钮事件中使用。但是当它从后台状态变为前台时，通知仍然会到来。用户单击取消按钮后，如何在前台停止此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:46:44.070

一旦推送请求被发送到 Apple Push Notification 服务器，就是这样。它消失在他们的系统中，然后他们将尝试在“尽力而为”的基础上交付它。您不会收到有关其状态或任何更改/删除它的能力的反馈。

因此，据我所知，您无法操纵已发送的通知。

# c# - 如何使用 Windows 桌面共享 API 共享选择性窗口

> ID：13777775
> 
> 赞同：2
> 
> 时间：2012-12-08T13:12:39.903
> 
> 标签：c#, .net, rdp, desktop-sharing

我正在使用 Windows 桌面共享 API 来编写桌面共享应用程序。

我的最终目标是共享除了几个窗口之外的完整桌面。我能够从 ApplicationFilter.Windows 获取窗口，并且还能够将我不想在查看器端共享的窗口的 Shared 属性设置为 false。但问题是它在另一端将非共享窗口变为黑色矩形。如何使其在查看器端完全透明？

法希姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:16:05.143

虽然我无法为您的 API 提供帮助，但如果您正在寻找一种简单的桌面共享和隐藏某些应用程序的方法，我可以建议您尝试 Mikogo。我们的应用程序选择功能允许您轻松选择其他查看者可以看到的应用程序 - 如果您希望隐藏应用程序，它将显示为空白窗口。在这里尝试一下，让我知道您的想法 - [http://www.mikogo.com](http://www.mikogo.com)。

谢谢！

Spencer Dunfee Mikogo 团队 sdunfee@mikogo.com

# php - 如果它们具有相同的外键，如何将数据库中的图像添加在一起

> ID：13777776
> 
> 赞同：0
> 
> 时间：2012-12-08T13:12:42.663
> 
> 标签：php, html, mysql, database

所以我的问题是我正在从这个表中的一个名为“BikeImages”的表中导出图像，我们在同一个外键 BikeCode 下的图像。我如何确保图像被添加在一起而不是单独添加。

例如

自行车代码：123

自行车图像：IMAGE1、IMAGE2

自行车代码：14

自行车图像 IMAGE1

```
 <?php
            $sql1 = "SELECT BikeCode, Manufacturer, Model, SubType, Year, FrameMaterial, Description, Gender, Type, Price, Stock FROM Bike WHERE Stock > 0";
            $result1 = mysqli_query($con, $sql1);
            while(list($bikecode, $manufacturer, $model, $subtype, $year, $fmaterial, $desc, $gender, $type, $price, $stock) = mysqli_fetch_row($result1)) {            

                echo "
                <table>
                <tr><th>BikeCode:</th>
                <th>Manufacturer:</th>
                <th>Model:</th>
                <th>Subtype:</th>
                <th>Year:</th>
                </tr>
                <tr>
                <td>$bikecode</td>
                <td>$manufacturer</td>
                <td>$model</td>
                <td>$subtype</td>
                <td>$year</td>
                </tr>
                <tr>
                <th>FrameMaterial:</th>
                <th>Gender:</th>
                <th>Type:</th>
                <th>Price:</th>
                <th>Stock:</th>
                </tr>
                <tr>
                <td>$fmaterial</td>
                <td>$gender</td>
                <td>$type</td>
                <td>£$price</td>
                <td>$stock</td>
                </tr>
                <tr><th>Description:</th><td colspan=\"4\">$desc</td></tr>
                <tr><th>Bike Images:</th><td colspan=\"4\"><a href=\"$sourcepath\" title=\"$description\"><img src=\"$sourcepath\" width=\"72\" height=\"72\" /></a></td></tr>
                <tr><th>Order Now:</th><td colspan=\"4\"><a href=\"basket.php?action=add&id=$bikecode\">Add To Cart</a></td></tr>
                 </table>";
            }
      ?> 
```

预先感谢您的帮助。

编辑：我必须将此代码与上面的代码结合起来：

```
<?php
$sql = "SELECT SourcePath, Description, BikeCode FROM BikeImages order by bikecode";
$result = mysqli_query($con, $sql);
$previous = -1;
echo "<table>";
while(list($sourcepath, $description, $bcode) = mysqli_fetch_row($result)) {
    // if bikecode changed, append "Order now"
    if ($previous != -1 && $previous != $bcode) {
        echo "<tr><th>Order Now:</th><td colspan=\"4\"><a href=\"basket.php?action=add&id=$previous\">Add To Cart</a></td></tr>";
    }
    echo "<tr><th>Bike Images:</th><td colspan=\"4\">";
    echo "<a href=\"$sourcepath\" title=\"$description\"><img src=\"$sourcepath\" width=\"72\" height=\"72\" /></a>";
    echo "</td></tr>";
    $previous = $bcode;
}

echo "</table>\n";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:17:08.623

不要将表格标签放在循环中，而是放在外面

```
<?php
    // if bikecode changed, append "Order now"
    if ($previous != -1 && $previous != $bikecode) {
        echo "<tr><th>Order Now:</th><td colspan=\"4\"><a href=\"basket.php?action=add&id=$previous\">Add To Cart</a></td></tr>";
    }

    echo "<tr><th>Bike Images:</th><td colspan=\"4\"><a href=\"$sourcepath\" title=\"$description\"><img src=\"$sourcepath\" width=\"72\" height=\"72\" /></a></td></tr>";
    $previous = $bikecode;
}

echo "</table>\n";
?> 
```

通过这两个选择，您有一个遍历自行车的外循环和一个遍历图像的内循环。一个“简单”但昂贵的解决方案可能是

```
<?php
$sql1 = "SELECT BikeCode, Manufacturer, Model, SubType, Year, FrameMaterial, Description, Gender, Type, Price, Stock FROM Bike WHERE Stock > 0";
$result1 = mysqli_query($con, $sql1) or die('Query1 failed: ' . mysqli_error($con));
echo "<table>";
while(list($bikecode, $manufacturer, $model, $subtype, $year, $fmaterial, $desc, $gender, $type, $price, $stock) = mysqli_fetch_row($result1)) {
    echo "<tr><th>BikeCode:</th>
          <th>Manufacturer:</th>
          <th>Model:</th>
          <th>Subtype:</th>
          <th>Year:</th>
          </tr>
          <tr>
          <td>$bikecode</td>
          <td>$manufacturer</td>
          <td>$model</td>
          <td>$subtype</td>
          <td>$year</td>
          </tr>
          <tr>
          <th>FrameMaterial:</th>
          <th>Gender:</th>
          <th>Type:</th>
          <th>Price:</th>
          <th>Stock:</th>
          </tr>
          <tr>
          <td>$fmaterial</td>
          <td>$gender</td>
          <td>$type</td>
          <td>£$price</td>
          <td>$stock</td>
          </tr>
          <tr><th>Description:</th><td colspan=\"4\">$desc</td></tr>\n";

    $sql = "SELECT SourcePath, Description FROM BikeImages where bikecode = '$bikecode'";
    $result = mysqli_query($con, $sql) or die('Query2 failed: ' . mysqli_error($con));
    while(list($sourcepath, $description) = mysqli_fetch_row($result)) {
          <tr><th>Bike Images:</th><td colspan=\"4\"><a href=\"$sourcepath\" title=\"$description\"><img src=\"$sourcepath\" width=\"72\" height=\"72\" /></a></td></tr>";
    }

    echo "<tr><th>Order Now:</th><td colspan=\"4\"><a href=\"basket.php?action=add&id=$bikecode\">Add To Cart</a></td></tr>\n";
}

echo "</table>";
?> 
```

# xml - 基于 Web 的结构化文档创作解决方案

> ID：13777777
> 
> 赞同：3
> 
> 时间：2012-12-08T13:12:46.593
> 
> 标签：xml, content-management-system, xforms

我正在寻找一种基于 Web 的结构化文档创作解决方案，适用于非常不同的文档类型，因此也适用于非常不同的内容模型。许多（但不是全部）文档类似于具有顶级元数据的杂志文章，例如关键字、作者和标题，然后是一系列可能包含其他部分的各种类型的有序部分。

内容在不断发展，因此需要相当频繁地创建新的文档类型。要求是文档模板本身可以使用创作系统（而不是硬编码软件）来定义。

建议我查看基于 Xforms 的解决方案，例如 betterForm、XSLTForms 和 Orbeon，其中可以创建 Xforms 来定义文档模板，然后可以使用 Xforms 创建 XML 文档。

我知道 XRX 是个好主意，一切都在 XML 技术的范围内，但是虽然有一些非常好的用户界面可以创建 Xforms，然后使用这些 Xforms 创建 XML 文档，但在我看来 Xforms 不支持排序和嵌套不同的可选部分类型。

任何建议将不胜感激。

编辑：

我一直在更仔细地研究 Xforms 技术并得出结论，使用它来创作我需要创建的结构化文档类型并不是它的设计目的。

具体来说，我有包含重复多态部分的文档：例如，我有一篇包含部分的文章。我想添加、删除、重新排序和删除部分。对于每个部分，我想选择下一部分是文本部分还是图像部分或引用部分等。我可能想将文本部分更改为图像部分。

如果我选择使用 Xforms 来实现这一点，这意味着我本质上需要在运行时动态重写底层 Xforms 标记，以便为我的文档创建一个定制模板，并为我的特定文章布置所有正确类型的部分，在这种情况下.

虽然 XForms 提供了诸如 xforms:repeat 和 xforms:switch 之类的元素，但缺乏对运行时表单结构的动态操作的本地支持，以及没有本地机制来建模继承（而 XML Schema 具有抽象类型），使得建模多态内容非常困难，而且不太可能存在任何开箱即用的 Xforms 解决方案，而且构建定制的 Web 应用程序（这不是不可能的）仍然是一场斗争。

如我错了请纠正我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:30:59.863

XForms 本身不支持排序，但可以通过以下方式实现它：

```
<xf:group ref="preceding-sibling::*[1]">
  <xf:trigger>
    <xf:label>Move Up</xf:label>
    <xf:action ev:event="DOMActivate">
      <xf:insert nodeset="self::*" origin="following-sibling::*[1]" position="before"/>
      <xf:delete nodeset="following-sibling::*[1]"/>
    </xf:action>
  </xf:trigger>
</xf:group>
<xf:group ref="following-sibling::*[1]">
  <xf:trigger>
    <xf:label>Move Down</xf:label>
    <xf:action ev:event="DOMActivate">
      <xf:insert nodeset="self::*" origin="preceding-sibling::*[1]" position="after"/>
      <xf:delete nodeset="preceding-sibling::*[1]"/>  
    </xf:action>
  </xf:trigger>
</xf:group> 
```

可以以类似的方式执行嵌套。

创建结构时，当前需要在工作实例中定义此结构才能复制它。添加节点而不复制它们将需要额外的功能。

-阿兰

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T01:39:14.280

[我认为Oppidoc.fr](http://www.oppidoc.fr)的 Stephane Sire 在文档 Web 创作领域正在进行一些工作。

您可能想查看[Axel 库](http://ssire.github.com/axel/)和[XTiger 规范](http://ssire.github.com/xtiger-xml-spec)。

# php - 在 php regex 中哪些符号应该用反斜杠转义？

> ID：13777778
> 
> 赞同：0
> 
> 时间：2012-12-08T13:12:53.483
> 
> 标签：php, regex, escaping

```
preg_match('@\.php@',$url,$match) 
```

常见的：-

*   削减
*   引述
*   双引号

还有其他人吗？

应该`@`, `?`,`=`逃脱吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:16:13.343

PHP 文档中有一个特殊的正则表达式字符列表：http: [//php.net/manual/en/function.preg-quote.php](http://php.net/manual/en/function.preg-quote.php)

> 特殊的正​​则表达式字符是：`. \ + * ? [ ^ ] $ ( ) { } = ! < > | : -`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T13:15:58.507

也许您会发现该[`preg_quote`](http://php.net/manual/en/function.preg-quote.php)功能很有用：

> preg_quote() 接受 str 并在作为正则表达式语法一部分的每个字符前面放置一个反斜杠。如果您有一个需要在某些文本中匹配的运行时字符串并且该字符串可能包含特殊的正则表达式字符，这将非常有用。
> 
> 特殊的正​​则表达式字符是： . \ + * ? [ ^ ] $ ( ) { } = ！< > | : -

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T13:16:29.493

`@``?`应该反斜杠，不`=`应该。

您需要在正则表达式中使用反斜杠转义的字符包括：

*   方括号`[]`
*   括号`()`
*   大括号`{}`
*   插入符号`^`
*   美元符号`$`
*   时期`.`
*   管道`|`
*   星号`*`
*   加`+`
*   问号`?`
*   反斜杠`\`

此外，在这种情况下，您的正则表达式分隔符`@`需要反斜杠。

需要注意的是，某些字符可能是特定上下文中的元字符。例如，连字符不是此字符串表示的正则表达式中的元字符：

```
"/foo-/" 
```

但是*是*以下字符串中的元字符：

```
"/foo[a-z]/" 
```

# c# - 动态 LINQ，Select 函数，适用于 Enumerable，但不适用于 Queryable

> ID：13777781
> 
> 赞同：3
> 
> 时间：2012-12-08T13:13:22.330
> 
> 标签：c#, linq, iqueryable, expression, enumerable

一段时间以来，我一直在摆弄动态 LINQ，但我还没有了解它的秘密。

我有一个要解析的表达式，如下所示：

```
"document.LineItems.Select(i => i.Credit).Sum();" 
```

在解析这个的过程中，我需要在 LineItems Collection 上调用 Select 函数。我正在使用 Expression.Call 的工厂方法：

```
Expression.Call(
    typeof(Queryable),
    "Select",
    new Type[] { typeof(LineItem), typeof(decimal?) },
    expr,
    Expression.Lambda(expression, new ParameterExpression[] { Expression.Parameter(typeof(LineItem) })); 
```

此时此刻

```
expr:          document.LineItems    [ICollection<LineItem>]  
expression:    LineItem.Credit       [decimal?] 
```

这些都还没有实现。我现在正在构建表达式树。

现在，问题：

此 Expresssion.Call 抛出异常：“类型 'System.Linq.Queryable' 上没有通用方法 'Select' 与提供的类型参数和参数兼容”；

我通过更改 Expression.Call 的第一个参数在“System.Linq.Enumerable”而不是“Queryable”中查找“Select”来轻松解决它。

但是，这不是我想要的。我不希望所有的 LineItems 都只用于计算 Sum()，这显然是 Enumerable 的情况。我希望 Queryable 工作。

此外，对于解析的最后一部分 - Sum()，我还需要使用 Enumerable Sum()，因为 Queryable Sum() 会抛出相同的异常。

我检查了 MSDN，'Select' 函数的两个签名是相同的，所以我真的不明白为什么一个工作而另一个不工作。

任何帮助或指示将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:31:25.637

问题是它`LineItems`是一个`ICollection<LineItem>`，而第一个参数`Queryable.Select`需要一个`IQueryable<LineItem>`。`ICollection<T>`只有实现`IEnumerable<T>`，这就是为什么它适用于`Enumerable.Select`.

您需要将类型更改`expr`为`IQueryable<LineItem>`。

您应该能够使用该`Queryable.AsQueryable`方法执行此操作。以下函数创建一个表达式来对给定`Document`实例的信用属性值求和：

```
public static Expression<Func<decimal?>> CreateSumLineItemsExpr(Document document)
{
    var docExpr = Expression.Constant(document);
    var itemsExpr = Expression.Property(docExpr, "LineItems");

    Expression<Func<LineItem, decimal?>> selector = i => i.Credit;
    var queryableExpr = Expression.Call(typeof(Queryable), "AsQueryable", new[] { typeof(LineItem) }, itemsExpr);
    var selectExpr = Expression.Call(typeof(Queryable), "Select", new[] { typeof(LineItem), typeof(decimal?) }, queryableExpr, selector);
    var sumExpr = Expression.Call(typeof(Queryable), "Sum", null, selectExpr);

    return Expression.Lambda<Func<decimal?>>(sumExpr);
} 
```

# php - 加载数据中带有“&”的 RSS 提要时出现 PHP 错误

> ID：13777782
> 
> 赞同：2
> 
> 时间：2012-12-08T13:13:28.083
> 
> 标签：php, xml, rss, feed

我的任务是使用 PHP 加载 XML RSS 提要。到现在都解决了，但是前几天随机遇到一个问题：如果新闻在.xml文件中包含&符号，会报PHP错误。我理解这个错误，但到目前为止我找不到合适的解决方案。

```
$URL = 'http://somesite.com/file.xml';
$DOM = new DomDocument();
$DOM->load($URL);

Warning: DOMDocument::load(): EntityRef: expecting ';' in file 
```

我尝试了不同的方法，例如：

```
$DOM->recover = TRUE;
$DOM->load($URL); 
```

要加载的 .xml 文件采用 UTF-8 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:41:27.520

您将不得不在 php 中使用 urlencode 函数，也可以找到那些特殊字符并将其替换为空格或其他内容

# android - 无法在谷歌地图android中开始活动

> ID：13777784
> 
> 赞同：-1
> 
> 时间：2012-12-08T13:13:46.963
> 
> 标签：android, google-maps

我的 android 代码有问题

这是我的 MainActivity.java

```
public class MainActivity extends MapActivity {

        MapView mapView; 
        MapController mc;
        GeoPoint p;
        Button b;
        EditText e;
        TextView t;
        String x;
        String longi ;
        String lati ;
        Spinner naja;

        String[] jalan = {"A.Yani","Ambengan", "Anjasmoro","Baliwerti","Basuki Rahmat","Bintoro","Ciliwung","Darmo Raya","Darmokali","Diponegoro Raya","Dharmawangsa","Dinoyo","Embong Kemiri","Embong Malang"};
        class MapOverlay extends com.google.android.maps.Overlay
        {
            @Override
            public boolean draw(Canvas canvas, MapView mapView, 
            boolean shadow, long when) 
            {
                super.draw(canvas, mapView, shadow);                   

                //---translate the GeoPoint to screen pixels---
                Point screenPts = new Point();
                mapView.getProjection().toPixels(p, screenPts);

                //---add the marker---
                Bitmap bmp = BitmapFactory.decodeResource(
                    getResources(), R.drawable.bawah);            
                canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);         
                return true;
            }
        } 
        public boolean onKeyDown(int keyCode, KeyEvent event) 
        {
            MapController mc = mapView.getController(); 
            switch (keyCode) 
            {
                case KeyEvent.KEYCODE_3:
                    mc.zoomIn();
                    break;
                case KeyEvent.KEYCODE_1:
                    mc.zoomOut();
                    break;
            }
            return super.onKeyDown(keyCode, event);
        }    
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            mapView = (MapView) findViewById(R.id.mapview);
            LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);  
            View zoomView = mapView.getZoomControls(); 

            naja=(Spinner)findViewById(R.id.simpleGM_adress);
            ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, jalan);
            aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
             naja.setAdapter(aa);
            t=(TextView)findViewById(R.id.simpleGM_tv);
            e=(EditText)findViewById(R.id.simpleGM_adress);
            zoomLayout.addView(zoomView, 
                new LinearLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, 
                    LayoutParams.WRAP_CONTENT)); 
            mapView.displayZoomControls(true);
            /*
            mc = mapView.getController();
            String coordinates[] = {longi, lati};
            double lat = Double.parseDouble(coordinates[0]);
            double lng = Double.parseDouble(coordinates[1]);

            p = new GeoPoint(
                (int) (lat * 1E6), 
                (int) (lng * 1E6));

            mc.animateTo(p);
            mc.setZoom(17); 
            mapView.invalidate();
            mc.animateTo(p);
            mc.setZoom(17); 

            //---Add a location marker---
            MapOverlay mapOverlay = new MapOverlay();
            List<Overlay> listOfOverlays = mapView.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);        

            mapView.invalidate();*/
        }

        public void clickHandler(View view){
            switch (view.getId()){
            case R.id.simpleGM_btn_search:
                x = jalan[naja.getSelectedItemPosition()];
                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("nama_jalan", x));
                /*            String valid = "1";*/ 
             String response = null;

             try {

                response = CustomHttpClient.executeHttpPost("http://192.168.1.4/android/kordinat.php", postParameters);

                String result = response.toString();  
                //parse json data

                   try{
                           longi = "";
                           lati = "";

                     JSONArray jArray = new JSONArray(result);
                           for(int i=0;i<jArray.length();i++){

                                   JSONObject json_data = jArray.getJSONObject(i);
                                   Log.i("log_tag","nama_jalan: "+json_data.getString("nama_jalan")+
                                           ", latitude: "+json_data.getString("latitude")+
                                           ", longitude: "+json_data.getString("longitude")
                                   );
                                   if(result.equals(null)){
                                   //Get an output to the screen
                                  longi += "Data tidak ada";
                                   }
                                   else{
                                   lati += json_data.getString("latitude");
                                   longi += json_data.getString("longitude");
                                   }
                           }
                   }

                   catch(JSONException e){
                           Log.e("log_tag", "Error parsing data "+e.toString());
                   }

                   try{
                       mc = mapView.getController();
                    String coordinates[] = {longi, lati};
                    double lat = Double.parseDouble(coordinates[0]);
                    double lng = Double.parseDouble(coordinates[1]);

                    p = new GeoPoint(
                        (int) (lat * 1E6), 
                        (int) (lng * 1E6));

                    mc.animateTo(p);
                    mc.setZoom(17); 
                    mapView.invalidate();
                    mc.animateTo(p);
                    mc.setZoom(17); 

                    //---Add a location marker---
                    MapOverlay mapOverlay = new MapOverlay();
                    List<Overlay> listOfOverlays = mapView.getOverlays();
                    listOfOverlays.clear();
                    listOfOverlays.add(mapOverlay);        

                    mapView.invalidate();
                   }

                   catch(Exception e){

                    Log.e("log_tag","Error in Display!" + e.toString());;          

                   }   

              }

                    catch (Exception e) {

               Log.e("log_tag","Error in http connection!!" + e.toString());     

              }
             break;
            }
        }

        @Override
        protected boolean isRouteDisplayed() {
            // TODO Auto-generated method stub
            return false;
        }
    } 
```

这是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout
android:id="@+id/simpleGM_layout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android"
>
    <TextView
android:id="@+id/simpleGM_tv"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Tentukan Jalanmu"
android:layout_x="11px"
android:layout_y="5px"
>
</TextView>
<Spinner
                android:id="@+id/simpleGM_adress" 
                android:layout_width="240px"
android:layout_height="wrap_content"
android:textSize="18sp"
android:layout_x="12px"
android:layout_y="30px"
></Spinner>
<Button
android:id="@+id/simpleGM_btn_search"
android:layout_width="59px"
android:layout_height="wrap_content"
android:layout_x="256px"
android:layout_y="30px"
android:text="find"
android:onClick="clickHandler"
>
</Button>

<com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_x="2px"
android:layout_y="100px"
android:clickable="true"
        android:apiKey="00j2bA4ivSvH0cSDJJ4aiPiVCq_OSH0adwf6I2w"
    />
    <LinearLayout android:id="@+id/zoom" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true" 
        android:layout_centerHorizontal="true" 
        /> 

</AbsoluteLayout> 
```

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="udin.googlemaps"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".MainActivity"
                  android:label="@string/app_name"
                  android:theme="@android:style/Theme.NoTitleBar">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <uses-library android:name="com.google.android.maps" />
    </application>
    <uses-permission android:name="android.permission.INTERNET" />   
</manifest> 
```

当我运行我的程序时，它显示这样的错误

> “java.lang.RuntimeException：无法启动活动
> ComponentInfo{udin.googlemaps/udin.googlemaps.MainActivity}：java.lang.ClassCastException：android.widget.Spinner”

谁能帮我解决这个错误？

为什么会这样？

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:25:56.977

问题是因为

```
 naja = (Spinner)findViewById(R.id.simpleGM_adress); 
```

和

```
 e = (EditText)findViewById(R.id.simpleGM_adress); 
```

第一个是 a `Spinner`，而不是`EditText`，您不能将其转换为 EditText。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:27:33.670

java.lang.ClassCastException: android.widget.xx（在你的例子中是按钮或 spinnar 等小部件类型）是因为您的 XML 中定义的小部件与您在 java 中使用的小部件不同，所以我建议您检查您的 XML 文件（不是 mainfest 文件），或者只是在此处发布。

# java - 定时快速排序算法

> ID：13777785
> 
> 赞同：1
> 
> 时间：2012-12-08T13:13:51.117
> 
> 标签：java, quicksort

嘿，我似乎在尝试在 10,000 个随机数的数组上实现一些 Java 快速排序代码时遇到问题。我有一个文本文件，其中包含放入数组中的数字，然后将其传递给排序算法进行排序。我的目标是计算排序需要多长时间，使用我拥有的计时循环增加每次排序的数字。但是由于某种原因，使用此代码给了我一个曲线图而不是直线。我知道时序循环和数组代码工作正常，所以排序代码似乎有问题，但似乎找不到任何东西！非常感谢任何帮助，谢谢！

```
import java.io.*;
import java.util.*;
public class Quicksort {

public static void main(String args[]) throws IOException {
//Import the random integer text file into an integer array
File fil = new File("randomASC.txt");
FileReader inputFil = new FileReader(fil);
int [] myarray = new int [10000];
Scanner in = new Scanner(inputFil);

for(int q = 0; q < myarray.length; q++)
{
  myarray[q] = in.nextInt();
}
in.close();

for (int n = 100; n < 10000; n += 100) { 
long total = 0;
for (int r = 0; r < 10; ++r) {  
  long start = System.nanoTime ();    
      quickSort(myarray,0,n-1);
      total += System.nanoTime() - start;
    }
  System.out.println (n + "," + (double)total / 10.0);
} 
}

 public static void quickSort(int[] a, int p, int r)
{
    if(p<r)
    {
        int q=partition(a,p,r);
        quickSort(a,p,q);
        quickSort(a,q+1,r);
    }
}

private static int partition(int[] a, int p, int r) {

    int x = a[p];
    int i = p-1 ;
    int j = r+1 ;

    while (true) {
        i++;
        while ( i< r && a[i] < x)
            i++;
        j--;
        while (j>p && a[j] > x)
            j--;

        if (i < j)
            swap(a, i, j);
        else
            return j;
    }
}

private static void swap(int[] a, int i, int j) {
    // TODO Auto-generated method stub
    int temp = a[i];
    a[i] = a[j];
    a[j] = temp;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:22:56.033

只有内部循环的第一次迭代实际上对您从文件中读取的数组进行排序。所有后续迭代都应用于已排序的数组。

> 但是由于某种原因，使用此代码给了我一个曲线图而不是直线。

如果您的意思是运行时间在 中非线性增长`n`，这是可以预料的，因为快速排序不是线性时间算法（没有比较排序）。

您的性能图看起来像一个很好的二次函数：

![性能图](../Images/3fb889d6f28b6657f0b9d555a2ffe12d.png)

由于您选择了枢轴，您得到的是二次而不是`O(n log(n))`时间：因为大多数时候您在排序数组上调用您的函数，您选择枢轴的方法意味着您每次都遇到最坏的情况。

# notepad++ - Notepad2中如何改变背景颜色

> ID：13777787
> 
> 赞同：6
> 
> 时间：2012-12-08T13:14:08.730
> 
> 标签：notepad++, editor, notepad2

我最近从 notepad++ 切换到了[Notepad2](http://www.flos-freeware.ch/notepad2.html)块中的新孩子。但我发现很难找到一种方法将编辑器的背景颜色更改为我在记事本 ++ 中使用的深色主题

我已经搜索了谷歌和 SO，但没有遇到任何说明它是否可能（如果是这样的话？）与否

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-08T14:01:44.307

去

```
1.menu --> view --> Customize Schemes
2.Double click Default Text
3.Select Default Style
4.Click Back.. Button and set color 
```

就这样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T02:09:35.910

我在这里写了一个小工具：[https ://github.com/piersh/InvertNotepad2](https://github.com/piersh/InvertNotepad2)

# matlab - 在 MATLAB 中从文件中导入数据

> ID：13777788
> 
> 赞同：2
> 
> 时间：2012-12-08T13:14:28.117
> 
> 标签：matlab

我想从 ascii 文件中导入所有数据，不包括作为描述的第一行。如果该行丢失，我可以正确导入所有数据。我用过`imporData`。

编辑：我已经解决了它只是将文件指针向前移动了一个。这是代码

```
FH = fopen(f_old,'rb');
firstRowString = fgetl(FH); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:49:11.637

利用

```
A = importdata(filename,delimiterIn,headerlinesIn) 
```

这可以从读取从行 headerlinesIn+1 开始的数字数据的 ASCII 文件加载数据，其中 delimiterIn 是列分隔符，指定为字符串。默认字符是从文件中解释的。使用 '\t' 作为制表符。

> [http://www.mathworks.co.uk/help/matlab/ref/importdata.html#inputarg_headerlinesIn](http://www.mathworks.co.uk/help/matlab/ref/importdata.html#inputarg_headerlinesIn)

# c# - 在多页上打印c#

> ID：13777795
> 
> 赞同：3
> 
> 时间：2012-12-08T13:14:52.980
> 
> 标签：c#, winforms, printing

我想使用 c# 打印更多页面。在打印我拥有的文档的函数 printDocument1_PrintPage 中：

```
 int values = 0;
 foreach (DataRow row in rows.Rows)

            values++;
           if (values > 48)
            {
                e.HasMorePages = true;
                values = 0;
            }
            else
            {
                e.HasMorePages = false;
            } 
```

问题是它不停地打印页面。如何跟踪要在页面上打印的行数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:30:21.103

```
 int values = 0;
 foreach (DataRow row in rows.Rows) 
```

那是行不通的，每页的值都从 0 开始。所以它永远不会停止。您需要将变量移到 PrintPage 方法之外。您还需要实现 BeginPrint，因此您将从 0 开始。foreach() 也很麻烦，您不想从每个页面的开头重新开始。所以重写它类似于这样：

```
 private int PrintRow;

    private void printDocument1_BeginPrint(object sender, System.Drawing.Printing.PrintEventArgs e) {
        PrintRow = 0;
    }

    private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e) {
        for (int lines = 0; lines < 48; ++lines) {
            PrintRow++;
            if (PrintRow >= rows.Rows.Count) return;  // Done printing
            var row = rows.Rows[PrintRow];
            // Print row
            //...
        }
        e.HasMorePages = PrintRow < rows.Rows.Count;
    } 
```

# java - 如何在 Java 中的多个 ArrayList 中查找唯一元素

> ID：13777807
> 
> 赞同：0
> 
> 时间：2012-12-08T13:16:16.983
> 
> 标签：java, set, unique

我有多个`Integer ArrayList`，其中包含一些重复的元素。我想从他们那里得到独特的元素。但是怎么做？
`java.util.ArrayList.removeAll()`不完全符合我的目的。请参阅下面的测试代码 -

```
ArrayList<Integer> d = new ArrayList<Integer>();
d.add(2);
d.add(4);
d.add(5);
d.add(7);
d.add(8);
d.add(9);

ArrayList<Integer> e = new ArrayList<Integer>();
e.add(3);
e.add(7);

d.removeAll(e);

for (int t : d) {
    System.out.print(t+", ");
} 
```

在输出中，我得到`2, 4, 5, 8, 9,`. 明显`3`不见了。也只是为了简单起见，我在`ArrayList`这里只使用了两个，但在我的代码中，我有两个以上的`ArrayList`.

如何在 Java 中的多个 ArrayList 中找到唯一元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:18:07.367

从`Set<Integer>`您的`List<Integer>`. 该集合将不包含重复的对象：

```
List<Integer> lstNumbers = new ArrayList<Integer>();
//fill the list of integers...
Set<Integer> setNumbers = new HashSet<Integer>(lstNumbers);
//the set will contain no duplicate values...
for (int t : setNumbers) {
    System.out.print(t+", ");
} 
```

请注意，您可以通过使用该方法（如 rahulroc 答案中所示）在不重复元素集合中添加更多整数来添加更多整数`List<Integer>`：`Set``Set#addAll`

```
//assuming setNumbers has been initialized before
setNumbers.addAll(anotherListOfNumbers);
setNumbers.addAll(andAnotherListOfNumbers); 
```

此外，作为最佳实践，尝试对接口（List、Set 等）进行编程，而不是对类实现（ArrayList、HashSet），如下所示：[“对接口进行编程”是什么意思？](https://stackoverflow.com/q/383947/1065197)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T13:21:24.860

采用`java.util.HashSet`

```
Set<Integer> uniqueEntries = new HashSet<Integer>();
for(all lists)
     uniqueEntries.addAll(list); 
```

现在设置的 uniqueEntries 将包含所有唯一的整数值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T13:26:53.917

采用`Set`

```
ArrayList<Integer> d = new ArrayList<Integer>();
d.add(2);
d.add(4);
d.add(5);
d.add(7);
d.add(8);
d.add(9);

d.add(3);
d.add(7);

// this will remove all duplicates
Set setNew = new HashSet(d);

System.out.print(setNew); 
```

## [演示](http://ideone.com/3iOSS5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-10T06:18:58.243

```
 ArrayList<Integer> d = new ArrayList<Integer>();
        d.add(2);
        d.add(4);
        d.add(5);
        d.add(7);
        d.add(8);
        d.add(9);

        ArrayList<Integer> e = new ArrayList<Integer>();
        e.add(3);
        e.add(7);

        List<Integer> temp = new ArrayList<Integer>(d);

        System.out.println("d --> " + d);
        System.out.println("e --> " + e);

        d.removeAll(e);
        e.removeAll(temp);
        d.addAll(e);

        System.out.println("d --> " + d); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-29T23:57:02.093

```
/* ArrayList Unique & Duplicate Records Print */

import java.util.*;
import java.lang.*;
import java.io.*;

/* Name of the class has to be "Main" only if the class is public. */
class Ideone
{
    public static void main (String[] args) throws java.lang.Exception
    {
ArrayList<Integer> d = new ArrayList<Integer>();
        d.add(2);
        d.add(4);
        d.add(5);
        d.add(7);
        d.add(8);
        d.add(9);

        ArrayList<Integer> e = new ArrayList<Integer>();
        e.add(3);
        e.add(7);

        List<Integer> temp = new ArrayList<Integer>(e);

        System.out.println("d --> " + d);
        System.out.println("e --> " + e);

        e.removeAll(d);
        temp.removeAll(e);

        System.out.println("e (unique)--> " + e);
        System.out.println("temp (duplicate) --> " + temp);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-30T07:46:10.180

你可以更简单地做到这一点。

> ArrayList first = new Arraylist<>; ArrayList 第二 = 新的 ArrayList<>;

```
 first.add("one"); 
   first.add("two");  
   first.add("three"); 
   second.add("two");  
   second.add("three"); 
```

为了找到独特的元素.. first.retainall(second);

# iphone - 无法在带有 os 5.0 的 iPad 上运行和构建 xCode4.2 上的代码

> ID：13777808
> 
> 赞同：0
> 
> 时间：2012-12-08T13:16:19.227
> 
> 标签：iphone, ios, xcode, ios5, ios4

嗨，我是 iPhone 的新手，我尝试在 xcode4.2 上构建应用程序，并且我有带有 os 5.0 的 iPad，但是当我启动应用程序运行时，我收到以下消息

**Xcode 无法使用所选设备运行。**

**没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。**

任何人都可以帮助我如何解决这个问题我已经尝试了很多但也无法从谷歌搜索中找到任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:28:50.843

在项目的 Build Settings 中，确保部署目标设置为“iOS 5.0”

![在此处输入图像描述](../Images/910b346833af065056e6531d8114f9f6.png)

# android - Android 联系人列表获取地址

> ID：13777816
> 
> 赞同：3
> 
> 时间：2012-12-08T13:16:54.853
> 
> 标签：android, cursor, uri, contactscontract

在我的应用程序（android 4.0）中，我需要从联系人那里检索地址。我在这里使用了另一篇文章中提供的解决方案：

```
Uri contactData = data.getData();
Cursor c =  managedQuery(contactData, null, null, null, null);
    if (c.moveToFirst()) {
        String city = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY));} 
```

但是当我尝试执行此操作时，出现错误：

“无法从具有 1 行 29 列的 CursorWindow 读取第 0 行第 -1 列。”

我在这里做错了什么？为什么他没有找到城市栏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:54:10.633

好的，解决了，有一些愚蠢的错误......这是工作代码：

清单.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="androidlab.exercise4_1"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="14" />
<uses-permission android:name="android.permission.READ_CONTACTS"/> ... 
```

代码：

```
Intent intent = new Intent(Intent.ACTION_PICK);
intent.setType(ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_TYPE); 
startActivityForResult(intent, PICK_CONTACT);

public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);

    switch (reqCode) {
        case (PICK_CONTACT) :
            if (resultCode == Activity.RESULT_OK) {
                Uri contactData = data.getData();
                Cursor c =  managedQuery(contactData, null, null, null, null);
                if (c.moveToFirst()) {
                    try{
                        //String street = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET));//ContactsContract.CommonDataKinds.StructuredPostal.FORMATTED_ADDRESS));
                        //String city = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY));
                        //String postcode = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE));
                        //String country = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY));
                        String street = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.FORMATTED_ADDRESS));
                    }
                    catch(Exception e){
                        errorDialog.show();
                    }
                }
            } 
```

# android - 在listview android中显示2列

> ID：13777818
> 
> 赞同：0
> 
> 时间：2012-12-08T13:17:01.797
> 
> 标签：android, listview

我有 2 列餐和服务，并想在列表视图中显示它。

这是我到目前为止所尝试的：

```
 private ListView lv;
//private ArrayList<String> results = new ArrayList<String>();

@Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.meal_result);
BreakFastLog info = new BreakFastLog(this);
info.open();

String data1 = info.getMealNameData();
String data2 = info.getServingData();

String[] inputData = data1.split( " " );
String[] inputData2 = data2.split( " " );

lv = (ListView) findViewById (R.id.lvBF);   

ArrayList<HashMap<String, String[]>> mylistData =
        new ArrayList<HashMap<String, String[]>>();

int[] columnIds = new int[] {
        R.id.tvBreakfastMealContainer, R.id.tvBreakfastServingContainer};

HashMap<String, String[]> map = new HashMap<String, String[]>();
//initialize row data

map.put( "Meal", inputData );
map.put( "Serving", inputData2 );
mylistData.add( map );

//lv.setAdapter( new ArrayAdapter<String>( this,android.R.layout.simple_list_item_1, inputData ) );

SimpleAdapter arrayAdapter =
           new SimpleAdapter(this, mylistData, R.layout.breakfast_listview_header,
                   new String[] {"Meal", "Serving"}, columnIds);
lv.setAdapter(arrayAdapter);

lv.setTextFilterEnabled( true ); 

info.close();
} 
```

**编辑：**

```
 class MyCustomAdapter extends BaseAdapter
{

       String[] data_meal;
       String[] data_serving;

 MyCustomAdapter()
 {
       data_meal = null;
       data_serving = null;
 }

 MyCustomAdapter( String[] meal, String[] serving )
 {
       data_meal = meal;
       data_serving = serving;
 }

 public int getCount()
 {
       return data_meal.length;
 }

 public String getItem( int position )
 {
       return null;
 }

 public long getItemId( int position )
 {
       return position;
 }

 public View getView( int position, View convertView, ViewGroup parent )
 {

       LayoutInflater inflater = getLayoutInflater();
       View row;

       row = inflater.inflate( R.layout.breakfast_listview_header, parent, false );

       TextView txtMeal = ( TextView ) row.findViewById ( R.id.tvBreakfastMealContainer );
       TextView txtServing = ( TextView ) row.findViewById ( R.id.tvBreakfastServingContainer );

       txtMeal.setText( data_meal[ position ] );
       txtServing.setText( data_serving[ position ] );

       return (row);

     }
 } 
```

编辑：XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
android:background="@drawable/ihealthfirst" >

<!--  
    <TextView
        android:id="@+id/tvBreakfastDateContainer"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:layout_weight="1" /> -->

    <TextView
        android:id="@+id/tvBreakfastMealContainer"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:layout_weight="2" />

    <TextView
        android:id="@+id/tvBreakfastServingContainer"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:gravity="center_horizontal"
        android:layout_weight="1" />

</LinearLayout> 
```

但他们只是显示在一排？帮助我弄清楚如何单独显示这些记录。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:29:16.790

`getView()`是的，您做得对，但您的代码中还有一件事要做。将您的`row`布​​局设置为`row`两个并在函数中同时`columns`填充两个。这将使您的两列列表。 `columns``getView()``ListView`

# opengl - GLSL 编辑器（无需预览，但代码完成会很好）

> ID：13777820
> 
> 赞同：2
> 
> 时间：2012-12-08T13:17:08.293
> 
> 标签：opengl, glsl

我正在寻找的是一个编辑器/IDE，它具有语法突出显示和 GLSL 代码的最佳情况下的代码完成功能。我不关心预览的东西和类似的东西。即使是调试也很不错。我目前的开发环境是基于 Eclipse for C/C++ 和 Windows 7 x64，所以，编辑器应该在 Win7 上运行没有问题。

最后一件重要的事情是对 OpenGL 4 规范的支持。如果现在才支持/突出显示/完成不推荐使用的东西，那么该工具不会有太大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:39:37.530

对于许多使用着色器的人来说，你所寻求的是一种梦想。[这](http://renderingpipeline.com/2012/11/glsl-syntax-highlighting-for-qtcreator-and-kate/)是我发现使用 GLSL 最接近的东西。这个扩展适用于[Qt。Qt](http://qt.digia.com/)项目有一个名为 QtCreator 的 IDE。下载它并添加该扩展。但它只添加语法突出显示。它不检查编译时错误也不调试您的着色器代码。对于调试，请使用[gDebugger](http://www.gremedy.com/)等工具。

# matlab - 在 MatLab 中，如何调整函数“gplot”绘制的线宽？

> ID：13777821
> 
> 赞同：3
> 
> 时间：2012-12-08T13:17:14.247
> 
> 标签：matlab, plot

正如 Matlab 的帮助文档所说，我们可以使用`gplot`如下形式

```
gplot(A,Coordinates,LineSpec) 
```

但是当我尝试修改该`linewidth`行并使用类似的代码时

```
gplot(A,Coordinates,'linewidth',2) 
```

发生错误并且错误信息表明`Error using gplot: Too many input arguments.`

我想知道他们的代码是否有问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T08:44:41.100

基于 PearsonArtPhoto 的答案，如果使用`findall(gcf,'type','line')`.

这是一个工作示例：

```
k = 1:30;
[B,XY] = bucky;
gplot(B(k,k),XY(k,:),'-*')
set(findall(gcf,'type','line'),'LineWidth',5)
axis square 
```

产生下图 ![具有修改后的 LineWidth 的 Gplot。](../Images/b1221df9a96c5d642b82ac21e9e59ed2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T13:27:04.647

你总是可以手动完成。尝试在绘制图形后立即执行此操作。

```
set(gco,'LineWidth',2) 
```

# django - 休眠返回空字符串而不是对象数据

> ID：13777823
> 
> 赞同：0
> 
> 时间：2012-12-08T13:17:25.967
> 
> 标签：django, tastypie

我已经使用 Tastypie 为我的 Django 应用程序构建了一个 API，当我使用命令行 curl 发送数据时它工作正常。但是当我尝试像这样使用睡眠时：

```
api = slumber.API('http://localhost:8000/api/v1/', auth=('username','pass'))
new = api.resource.post({'field':'value'}) 
```

该对象在数据库中创建正常，但**new**只是 '' 而不是至少包含新创建对象的 id 的字典。

有什么问题？请提供一些提示如何调试此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:33:24.250

这是slumber中的一个错误，使用版本0.4.2

# jquery - 为什么一个变量只有执行 N 次的事务函数内部的最后一个返回值？

> ID：13777824
> 
> 赞同：2
> 
> 时间：2012-12-08T13:17:36.183
> 
> 标签：jquery, sqlite, cordova

我正在开发一个将使用 sqlite 数据库的 phonegap 应用程序。该数据库的唯一更新将涉及其内容，而不是其方案。

保持本地 sqlite 数据库更新的方法是：

1.  有一个带有两列表的远程数据库：“id”和“sql_sentence”。它存储要在本地执行的 sql_sentences 集，以便更新本地 sqlite db。

2.  在本地，我有一个 var 'local_max_id' 保留本地执行的最后一个 sql_sentence 的 id。应用程序第一次运行时，其值为 0。

3.  每次应用程序启动时，它都会将“local_max_id”的值与远程数据库的“id”列中的最大值进行比较。

4.  如果值匹配，则本地数据库是最新的。否则，我必须检索 id 大于“local_max_id”的 sql_sentences 集，执行它并将“local_max_id”更新为最后收到的行 id。

执行此操作的代码（有一些西班牙语消息，但我已尝试用英语提供必要的信息）：

```
var min_id;
var local_max_id=0;
var sentencia_sql   = "";

function initDB(){
        //Just to make sure it requests the database info. Out when in production 
        window.localStorage.setItem("local_max_id", 0);

        // Used to see which has been the last sql_sentence id executed locally  
        local_max_id    = window.localStorage.getItem("local_max_id");

        //Call to retrieve the highest id in remote database
        $.post("http://mytests.es/phonegap-db/get-db.php", {exec:"max_id"}, treat_max_id, "json");
}

//Method that decides what to do depending on returned remote_max_id value and local_max_id.
function treat_max_id(remote_max_id){
    if(remote_max_id > local_max_id){
        $.post("http://mytests.es/phonegap-db/get-db.php", {exec:"get_sentencias", "min_id":local_max_id}, 
            function(res) {
                if(res){
                    for(j=0;j<res.length;j++){
                        sentencia_sql   = res[j].sentencia;
                        alert(sentencia_sql);
                        //The problem is here. While the alert shows the proper sql_sentence of each iteration, this variable (sentencia_sql) only has the last returned value inside transaction function, but is executed N times (being N the amount of returned sql_sentences)
                        transaction(
                            function(tx){
                                console.log(sentencia_sql);
                                tx.executeSql(sentencia_sql);   
                            },
                            errorDB,
                            succesDB2
                        );
                    }
                    window.localStorage.setItem("local_max_id", remote_max_id);
                }
                else{
                    console.error("No se ha recuperado resultado de get-db.php/get_sentencias");
                }
            },"json"
        );
    }
} 
```

用要执行的 N 个 sql 语句处理结果的循环的行为方式让我难以理解。即使应该在本地执行 sql 语句的方法 'transaction' 位于循环内并且每个接收到的行执行一次，但变量 'sentencia_sql' 始终具有相同的值，即最后接收到的 sql 语句。

正常吗？我应该使用任何指令来控制这种异步行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:36:17.183

异步 JavaScript 需要一些时间来适应 - 代码不会按照编写的顺序运行，并且循环的所有迭代共享相同的范围。

[使用循环将行添加到 sqlite 数据库（Phonegap）](https://stackoverflow.com/questions/13541381/adding-rows-to-a-sqlite-database-using-a-loop-phonegap)

# java - 线程“主”java.net.ConnectException 中的异常：连接被拒绝：连接

> ID：13777826
> 
> 赞同：3
> 
> 时间：2012-12-08T13:17:56.760
> 
> 标签：java, sockets

我正在尝试进行套接字连接并使用 netbeans 在我的 Windows 7 内发送文件，但出现此错误：

```
Exception in thread "main" java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:337)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:198)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at socket.TCPclient.main(TCPclient.java:22)
Java Result: 1 
```

这是我的服务器类：

```
package socket;

import java.net.*;
import java.io.*;

public class TCPserver {
  public static void main (String [] args ) throws IOException {
    // create socket
    ServerSocket servsock = new ServerSocket(13267);
    while (true) {
      System.out.println("Waiting...");

      Socket sock = servsock.accept();
      System.out.println("Accepted connection : " + sock);

      // sendfile
      File myFile = new File ("source.pdf");
      byte [] mybytearray  = new byte [(int)myFile.length()];
      FileInputStream fis = new FileInputStream(myFile);
      BufferedInputStream bis = new BufferedInputStream(fis);
      bis.read(mybytearray,0,mybytearray.length);
      OutputStream os = sock.getOutputStream();
      System.out.println("Sending...");
      os.write(mybytearray,0,mybytearray.length);
      os.flush();
      sock.close();
      }
    }
} 
```

这是我的客户类：

```
package socket;
import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.Socket;

import java.net.*;
import java.io.*;

public class TCPclient{
  public static void main (String [] args ) throws IOException {
    int filesize=6022386; // filesize temporary hardcoded

    long start = System.currentTimeMillis();
    int bytesRead;
    int current = 0;
    // localhost for testing
    Socket sock = new Socket("127.0.0.1",13267);
    System.out.println("Connecting...");

    // receive file
    byte [] mybytearray  = new byte [filesize];
    InputStream is = sock.getInputStream();
    FileOutputStream fos = new FileOutputStream("source-copy.pdf");
    BufferedOutputStream bos = new BufferedOutputStream(fos);
    bytesRead = is.read(mybytearray,0,mybytearray.length);
    current = bytesRead;

    // thanks to A. Cádiz for the bug fix
    do {
       bytesRead =
          is.read(mybytearray, current, (mybytearray.length-current));
       if(bytesRead >= 0) current += bytesRead;
    } while(bytesRead > -1);

    bos.write(mybytearray, 0 , current);
    bos.flush();
    long end = System.currentTimeMillis();
    System.out.println(end-start);
    bos.close();
    sock.close();
  }
} 
```

**怎么解决这个问题，谢谢**

# facebook - 如何在 2012 年 12 月版 FB 中在 facebook 上创建类似 iframe 网站的内容？

> ID：13777838
> 
> 赞同：-2
> 
> 时间：2012-12-08T13:19:15.077
> 
> 标签：facebook

如何在 2012 年 12 月版 FB 中在 facebook 上创建类似 iframe 网站的内容？

当有标签时，这是可能的。但是在他们改变布局之后还有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:10:15.863

您想知道是否可以将 facebook.com 放入 iframe 中吗？如果是这样，答案是否定的。他们阻止它。– 汤米粉碎

# sql - 如何只选择一部分巨大的二进制文件（文件）？

> ID：13777840
> 
> 赞同：5
> 
> 时间：2012-12-08T13:19:25.593
> 
> 标签：sql, sql-server, sql-server-2008, tsql, blob

我的问题是：我有可能将巨大的文件存储在 SQL Server 2008 (> 1GB) 的二进制（图像）字段中。

如果我使用常规 select 语句返回整个二进制文件，则查询需要一分钟以上才能将结果返回到我的 .NET 程序，并且我的客户端应用程序会超时。我正在寻找的是 TSQL 代码，它将限制返回的数据大小（可能是 300mb），允许我遍历剩余的块并防止超时。

这必须发生在 SQL 查询中，而不是在返回数据后的处理中。

我试过 SubString，MS 说它适用于二进制数据，但我得到的只是最大 8000 字节。我尝试的最后一件事是这样的：

```
select substring(Package,0,300000000) 'package', ID from rplPackage where ID=0
--where package is the huge binary stored in a image field 
```

由于客户端应用程序，数据流也不是一个真正的选择。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T10:28:11.920

好的，我想通了。做到这一点的方法是使用 substring 函数，MS 准确地说它适用于二进制文件。他们没有说的是 substring 只会返回 8,000 个字节，这让我很震惊。

换句话说，如果 blob 数据类型是 image 并且你使用这个：

```
 select substring(BlobField,0,100000000) 
 from TableWithHugeBlobField
 where ID = SomeIDValue

 --all you'll get is the first 8K bytes (use DataLength function to get the size) 
```

但是，如果您声明一个 varbinary(max) 变量并且 blob 字段数据类型是 varbinary(max) - 或对您有用的某个大小 - 然后使用 substring 函数将部分二进制文件带回您声明的变量中。这工作得很好。像这样：

```
 Declare @PartialImage varbinary(max) 
 select @PartialImage = substring(BlobField, 0, 100000000) --1GB
 from TableWithHugeBlobField
 where ID = SomeIDValue

 select DataLength(@PartialImage) -- should = 1GB 
```

前面提过这个问题，为什么要使用 SQL 来存储文件数据？这是一个有效的问题；想象一下，您必须将数据作为文件复制到数百个不同的客户端设备（如 iPhone），每个包都是独一无二的，因为不同的客户端有不同的需求，然后将文件包作为 blob 存储在数据库上更容易编程与以编程方式挖掘文件夹以找到正确的包以流式传输到客户端相比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T06:30:28.950

用这个：

```
select substring(*cast(Package as varbinary(max))*,0,300000000) 'package', ID  
from rplPackage 
where ID=0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:30:00.453

考虑使用 FileStream

[文件流概述](http://technet.microsoft.com/en-us/library/bb933993%28v=sql.105%29.aspx)

[使用 Win32 管理 FILESTREAM 数据](http://technet.microsoft.com/en-us/library/cc645940%28v=sql.105%29.aspx)

```
sqlFileStream.Seek(0L, SeekOrigin.Begin);

numBytes = sqlFileStream.Read(buffer, 0, buffer.Length); 
```

# java - 如何获取离线令牌和刷新令牌以及自动刷新对 Google API 的访问权限

> ID：13777842
> 
> 赞同：15
> 
> 时间：2012-12-08T13:20:26.623
> 
> 标签：java, google-app-engine, oauth-2.0, google-api

我正在开发一个使用 OAuth2 和谷歌客户端库（在 Appengine 和 GWT BTW 上）访问谷歌 API（从日历 API 开始）的应用程序。

我已经实现了我的`OAuth2Call`后台 servlet，扩展了 Google `AbstractAppEngineAuthorizationCodeCallbackServlet`.

我有它的工作，我可以访问并可以查看日历等，但有两个问题：

1）尽管明确请求离线访问，但我没有获得刷新令牌：

```
public static GoogleAuthorizationCodeFlow newFlow( String scope ) throws IOException {
    GoogleAuthorizationCodeFlow.Builder builder = new GoogleAuthorizationCodeFlow.Builder(
            HTTP_TRANSPORT, 
            JSON_FACTORY,
            getClientSecrets(), 
            Collections.singleton( scope ) );

    builder.setCredentialStore( new AppEngineCredentialStore() ).setAccessType("offline");

    return builder.build();
} 
```

2) 我看不到如何设置自动刷新功能。这些页面描述了这些方法：

*   [类 Credential.Builder](http://javadoc.google-oauth-java-client.googlecode.com/hg/1.12.0-beta/com/google/api/client/auth/oauth2/Credential.Builder.html#addRefreshListener)
*   [类 CredentialStoreRefreshListener](http://javadoc.google-oauth-java-client.googlecode.com/hg/1.12.0-beta/com/google/api/client/auth/oauth2/CredentialStoreRefreshListener.html)

但我看不到在哪里添加刷新侦听器。类中没有这样的方法`GoogleAuthorizationCodeFlow.Builder`，不像`Credential.Builder`类

编辑在更多地调试代码之后，当凭证返回时（在`onSuccess()`方法中）它似乎已经有一个`RefreshListener`集合.....所以也许这是他们的默认设置，我唯一的问题是我没有得到一个`refresh_token`，尽管问为了它。

也许还需要查看 Google API 控制台中的设置？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-10T18:47:12.017

您应该注意的一件事：仅当用户明确同意所请求的范围时，才会返回刷新令牌（除了访问令牌之外）。基本上，当显示批准页面时。所有后续流程将只返回一个访问令牌。

现在，为了测试您的应用程序并确保您第一次收到刷新令牌，您可以使用approval_prompt=force 参数( `builder.setApprovalPrompt("force")`) 来确保审批页面显示在流程中并获得用户的明确同意. 在您解决任何问题并确保正确存储刷新令牌后，您可以删除该标志（默认为`auto`）

开发者指南的[离线访问部分](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)也提供了更多信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-10T14:27:52.177

要获得*刷新令牌*，您必须同时设置**=** `accessType` “ *offline* ”和`approvalPrompt`=“ *force* ”。

```
GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
            HTTP_TRANSPORT,
            JSON_FACTORY,
            CLIENT_ID,
            CLIENT_SECRET,  
            SCOPE)
.setAccessType("offline")
.setApprovalPrompt("force")
.build(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T20:02:45.613

我对此进行了调查，并得出结论，access_token 只需要使用一次。也就是说，每个 Google 查询都是一个两步过程：

1.  使用 refresh_token 生成临时 access_token
2.  将 access_token 用于您的操作所需的一个或多个查询。

我在这里看到了一些关于确保服务器时钟同步的帖子。但这似乎是不必要的复杂性。

更详细的解释： [http ://www.tqis.com/eloquency/googlecalendar.htm](http://www.tqis.com/eloquency/googlecalendar.htm)

# html - 实现浏览器的“下载到计算机”功能

> ID：13777843
> 
> 赞同：2
> 
> 时间：2012-12-08T13:20:36.820
> 
> 标签：html, objective-c, macos, download

我正在尝试`mp3`使用`NSURLConnection`. 但是，我通常会收到超时错误。在浏览器中输入链接会显示默认播放器，但也不会加载音乐文件：

![下载 mp3 并非在所有国家都是非法的](../Images/b7c1d268a396383e02a74d43defa8de2.png)

但是，如果我创建以下简单的 HTML 文件：

```
<html>
    <body>
        <a href="link_to_the_mp3" target="_blank">Download</a>
    </body>
</html> 
```

然后将文件加载到 Safari 中，右键单击`Download`链接，然后选择`Download to Computer`（或任何英文名称），Safari 下载文件。

关于如何在我自己的应用程序中实现这一点的任何想法？

* * *

我尝试使用

```
NSData *data = [NSData dataWithContentsOfURL:url]; 
```

和

```
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *r, NSData *data, NSError *e) { /.../ }];` 
```

没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:32:04.513

好像你正试图用大锤击打苍蝇，使用“ `NSURLConnection`”。

尝试做一些更高级别的事情，例如

[`NSData * mp3data = [[NSData alloc] initWithContentsOfURL:options:error: ];`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/initWithContentsOfURL%3aoptions%3aerror%3a)

（这里的额外好处是您可以通过`error:`传递给方法的“”参数返回有用的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:24:22.717

这是您需要执行的操作的示例：

```
NSURL* url = [NSURL URLWithString:yourMp3URLString];
//URL of the mp3 file

NSString* fileName = [NSString stringWithFormat:@"%@.mp3", mp3Name];
//NSString with the name of the mp3

NSString* destinationPath = [filePathString stringByAppendingPathComponent:fileName];
//NSString with the filePathString (NSString with path destination, you could 
//change it to something like this @"User/Desktop")
//and add the NSString filename to the end of it
//so, if we have like User/Desktop it will become User/Desktop/mp3Name.mp3

NSURLRequest* request = [NSURLRequest requestWithURL:url];
NSURLDownload* download = [[NSURLDownload alloc] initWithRequest:request delegate:self];
[download setDestination:destinationPath allowOverwrite:NO];
//create the URLRequest and Download the mp3 to the destinationPath 
```

# python - str.replace 带括号的函数

> ID：13777844
> 
> 赞同：4
> 
> 时间：2012-12-08T13:20:48.410
> 
> 标签：python, regex

我不知道如何使用“替换”python 字符串函数来删除括号。

我假设我在这里做错了什么 - 我有这个代码：

```
line = line.replace('\(','A') 
```

其中，当面对一个包含 a 的字符串时，`(`它不会做任何事情。我也试过

```
line = line.replace('\\(','A') 
```

但那里也没有骰子。

我知道该功能有效 - （这是用于将 sqlite 数据转储转换为 mysql，严重的是为什么没有人制作一个 10 美元的应用程序来做到这一点？我现在已经买了它。） - 因为我可以

```
line = line.replace('CREATE','A') 
```

我把所有的创建语句都替换为字母 A ......

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T13:22:03.807

不逃避吗？

```
line = line.replace('(', 'A') 
```

`str.replace`不使用正则表达式。这就是`re.sub`函数的作用。

# python - 如何使用 mincemeat 将 example.py 中定义的任务分发到两台客户端计算机？

> ID：13777846
> 
> 赞同：3
> 
> 时间：2012-12-08T13:21:13.223
> 
> 标签：python, mincemeat

我已经从[https://github.com/michaelfairley/mincemeatpy/zipball/v0.1.2下载了 mincemeat.py 示例](https://github.com/michaelfairley/mincemeatpy/zipball/v0.1.2)

example.py 如下：

```
#!/usr/bin/env python
import mincemeat

    data = ["Humpty Dumpty sat on a wall",
            "Humpty Dumpty had a great fall",
            "All the King's horses and all the King's men",
            "Couldn't put Humpty together again",
           ]

datasource = dict(enumerate(data))

def mapfn(k, v):
    for w in v.split():
        yield w, 1

def reducefn(k, vs):
    result = sum(vs)
    return result

s = mincemeat.Server()
s.datasource = datasource
s.mapfn = mapfn
s.reducefn = reducefn

results = s.run_server(password="changeme")
print results 
```

它用于字数统计程序。

我已经通过 LAN 连接了网络中的两台计算机。我使用一台计算机作为服务器并在其上运行 example.py；在作为客户端的第二台计算机上，我使用以下命令行语句运行 mincemeat.py：

```
python mincemeat.py -p changeme server-IP 
```

它工作正常。

现在我已经通过路由器在局域网中连接了 3 台计算机。然后一台机器作为服务器工作，我想在它上面运行 example.py，并将剩下的两台机器作为客户端机器运行。

我想将任务分配给我的两台客户端机器。那么将map和reduce的任务分发到两台计算机的过程是怎样的呢？如何将我在 example.py 中定义的任务分配给分别具有唯一 IP 的两台客户端计算机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T14:29:28.907

默认示例几乎不包含 50 个单词。因此，当您切换窗口启动第二个客户端时，第一个客户端已经完成了对文本的处理。相反，使用大文本文件运行相同的程序，您可以添加第二个客户端。下面应该工作。[在这个例子中，我使用了来自 Project Gutenberg 的小说Ulyesses](http://www.gutenberg.org/ebooks/4300) (~1.5 MB)的纯文本格式。

在我的机器（Intel Xeon@ 3.10 GHz）中，使用 2 个客户端只需不到 30 秒。因此，请使用更大的文件或文件列表，或者快速启动第二个客户端。

```
#!/usr/bin/env python
import mincemeat

def file_contents(file_name):
    f = open(file_name)
    try:
        return f.read()
    finally:
        f.close()

novel_name = 'Ulysses.txt'

# The data source can be any dictionary-like object
datasource = {novel_name:file_contents(novel_name)}

def mapfn(k, v):
    for w in v.split():
        yield w, 1

def reducefn(k, vs):
    result = sum(vs)
    return result

s = mincemeat.Server()
s.datasource = datasource
s.mapfn = mapfn
s.reducefn = reducefn

results = s.run_server(password="changeme")
print results 
```

对于文件目录，请使用以下示例。转储文件夹中的所有文本文件`textfiles`。

```
#!/usr/bin/env python
import mincemeat
import glob

all_files = glob.glob('textfiles/*.txt')

def file_contents(file_name):
    f = open(file_name)
    try:
        return f.read()
    finally:
        f.close()

# The data source can be any dictionary-like object
datasource = dict((file_name, file_contents(file_name))
                  for file_name in all_files)

def mapfn(k, v):
    for w in v.split():
        yield w, 1

def reducefn(k, vs):
    result = sum(vs)
    return result

s = mincemeat.Server()
s.datasource = datasource
s.mapfn = mapfn
s.reducefn = reducefn

results = s.run_server(password="changeme")
print results 
```

# google-maps - 在谷歌地图中获取标记的位置

> ID：13777847
> 
> 赞同：0
> 
> 时间：2012-12-08T13:21:17.013
> 
> 标签：google-maps

我想从谷歌地图中提取标记列表（公共汽车站），退出是否可以获取此列表？我可以使用谷歌地图 API 获取这些信息吗？

更准确地说，我想提取我当地运输公司 (CSTP) 的巴士站： [https://maps.google.it/maps?q=cstp+Campania&hl=it&ll=40.708751,14.758759&spn=0.489271,0.850067&sll=40.674744, 14.792656&sspn=0.06119,0.106258&t=h&hq=cstp&hnear=坎帕尼亚&fll=40.708751,14.758759&fspn=0.489271,0.850067&z=10](https://maps.google.it/maps?q=cstp+Campania&hl=it&ll=40.708751,14.758759&spn=0.489271,0.850067&sll=40.674744,14.792656&sspn=0.06119,0.106258&t=h&hq=cstp&hnear=Campania&fll=40.708751,14.758759&fspn=0.489271,0.850067&z=10)

我想要一些信息，例如标记的位置（长、纬度）和公共汽车站的名称。从现在开始，我尝试使用 python 和 googlemaps 库，但其他方式，如带有 xml 或 json 的 javascript，将被很好地接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:40:45.303

我发现应该怎么做。[答案在https://developers.google.com/maps/documentation/javascript/places#place_search_requests](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)的“附近搜索请求”中

# ruby-on-rails - ruby-on-rails 中的 rake 函数

> ID：13777855
> 
> 赞同：0
> 
> 时间：2012-12-08T13:22:11.633
> 
> 标签：ruby-on-rails, rake

我对 ruby​​-on-rails 非常陌生。我对耙子有疑问。`create`功能是创建一个新的数据库。之后，我们要运行一些命令，例如

```
rake db:load
rake db:data:load
rake db:schema:load
rake db:migrate
rake db:seed 
```

但是为什么我们要在创建数据库之后运行这个 cmds 以及关于 cmd 的什么功能。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:25:04.117

您可以使用`rake -T`来获取每个任务的描述：

```
$ rake -T | grep db
rake db:create                                # Create the database from config/database.yml for the current Rails.env (use db:create:all to create all dbs in the config)
rake db:drop                                  # Drops the database for the current Rails.env (use db:drop:all to drop all databases)
rake db:fixtures:load                         # Load fixtures into the current environment's database.
rake db:migrate                               # Migrate the database (options: VERSION=x, VERBOSE=false).
rake db:migrate:status                        # Display status of migrations
rake db:rollback                              # Rolls the schema back to the previous version (specify steps w/ STEP=n).
rake db:schema:dump                           # Create a db/schema.rb file that can be portably used against any DB supported by AR
rake db:schema:load                           # Load a schema.rb file into the database
rake db:seed                                  # Load the seed data from db/seeds.rb
rake db:setup                                 # Create the database, load the schema, and initialize with the seed data (use db:reset to also drop the db first)
rake db:structure:dump                        # Dump the database structure to db/structure.sql. Specify another file with DB_STRUCTURE=db/my_structure.sql
rake db:version                               # Retrieves the current schema version number 
```

我这就是你要问的？

**编辑：**

您可以在此处阅读有关迁移的更多信息：http: [//guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

**编辑2：**

`rake db:migrate`允许您以“理智”的方式更新数据库架构：您可以创建新迁移（阅读指南！）并添加新列，例如添加索引、重命名列等 - 迁移允许您“在“时间”中来回旅行” - 您可以运行迁移并稍后回滚。

生成新迁移时：

`$ rails g migration add_new_column_to_some_table`您将能够`rake db:migrate`稍后运行以应用您想要的更改（当然您必须编写此生成的迁移的主体）。

我强烈建议您阅读指南:)

**编辑 3：**

`add_column :users, :price, :float`，例如，会将`price`列添加到`users`表中，列的类型将是`float`（`float`顺便说一句，存储与金钱相关的东西不是最好的主意！）。此列将`NULL`默认为。

**编辑4：**

有关运行了哪些迁移的信息存储在`schema_migrations`表中：第一次运行迁移将在此表中添加一条新记录，其中`version`包含此迁移（日期+文件名中的一些随机数）。回滚迁移将删除此记录。运行两次迁移不会产生任何影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:31:36.540

简而言之，db:migrate 不会破坏数据库中的现有数据。因此，运行迁移和 rake 任务允许您的数据因您所做的更改而存在。

## 文字工作流程

1.  你`create`是一个空的数据库。
2.  您需要将第一个模型的数据表添加到数据库中。这是通过在`db/migrate`
3.  现在您需要第二个模型，因此您创建模型并编辑为您创建的迁移`db/migrate`文件
4.  在不破坏任何现有数据的情况下更新数据库的最简单方法是运行`bundle exec rake db:migrate`. 这会将第二个迁移文件的内容添加到数据库中，并且不会损害现有数据。

## 创建项目后的示例工作流程：

1.  `bundle exec rake db:create:all`
2.  `bundle exec rails generate scaffold Users name:string email:string`
3.  `bundle exec rake db:migrate`
4.  在这个阶段，`bundle exec rails s`去`localhost:3000/users/new`创建一个新用户。
5.  `bundle exec rails generate scaffold Posts title:string body:text`
6.  `bundle exec rake db:migrate`
7.  回到你的浏览器去`localhost:3000/users`，你应该仍然看到你创建的用户。

# javascript - JS如何让函数只运行一次

> ID：13777857
> 
> 赞同：0
> 
> 时间：2012-12-08T13:22:33.427
> 
> 标签：javascript, events

如何使该功能每个按钮只运行一次？如果点击“点击我”只有效一次，其他按钮也一样。
为了不放太多代码，我放了一个例子..：http: [//jsbin.com/apexod/2/edit](http://jsbin.com/apexod/2/edit)

```
<input type="button" value="click me" onclick="hello('Jhon')"><br>
<input type="button" value="click me1" onclick="hello('Gerard')"><br>
<input type="button" value="click me2" onclick="hello('Kaoru')">
<script>
function hello(id){
    alert("hello "+id);
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:24:10.713

一种解决方案是注册已单击的按钮：

```
<script>
var done = {}
function hello(id){
   if (done[id]) return;
   done[id] = 1; 
   alert("hello "+id);
}
</script> 
```

（另一种方法是使用 jQuery 之类的实用程序库及其[一个](http://api.jquery.com/one/)功能，但这将是矫枉过正）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T13:35:27.467

您可以将按钮元素引用发送给函数，并从按钮中删除事件：

```
<input type="button" value="click me" onclick="hello(this,'Jhon')"><br>
<input type="button" value="click me1" onclick="hello(this,'Gerard')"><br>
<input type="button" value="click me2" onclick="hello(this,'Kaoru')">
<script>
function hello(el, id){
    alert("hello " + id);
    el.onclick = null;
}
</script> 
```

演示：http: [//jsfiddle.net/Guffa/CDjGY/](http://jsfiddle.net/Guffa/CDjGY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T13:40:46.767

执行后，您可以使用空函数覆盖该函数

```
function hello(){
     alert("hello " + id);
     hello = function(){}
} 
```

# regex - Oracle 等价类在正则表达式中不起作用

> ID：13777858
> 
> 赞同：-2
> 
> 时间：2012-12-08T13:22:38.953
> 
> 标签：regex, oracle, nls

以下 Oracle 等价类正则表达式：

```
SELECT REGEXP_SUBSTR('eéëèÉËÈE' '[[=É=]]+') FROM dual; 
```

应该返回：

```
eéëèÉËÈE 
```

但相反，它返回：

```
É 
```

我还尝试将以下内容放在它前面：

```
alter session set NLS_SORT=GENERIC_BASELETTER;
alter session set NLS_LANGUAGE=FRENCH; 
```

有人对我要去哪里有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:17:51.427

在这里为我工作[http://sqlfiddle.com/#!4/83c37/8](http://sqlfiddle.com/#!4/83c37/8)

您确定您的原始查询使用`[[=É=]]`而不是`[=É=]`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:07:06.023

`[=eéëèÉËÈE=]+`

[http://regexr.com?33330](http://regexr.com?33330)

`É`不会匹配其他字母。

# iphone - 如何在iphone中删除UISlider的拇指？

> ID：13777864
> 
> 赞同：5
> 
> 时间：2012-12-08T13:23:13.213
> 
> 标签：iphone, xcode, uiview, uislider

我在同一个视图中有两个 UISlider。我的要求是，当用户更改第一个滑块的值时，第二个滑块的值应该根据它进行更改。所以，在第二个滑块中我想隐藏它的拇指。虽然我已经清除了它的拇指颜色，对用户可见。我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-26T06:27:16.733

易一：

```
[_slider setThumbImage:[UIImage new] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T13:29:11.530

只需将拇指的图像设置为零

```
UIImage *empty = [UIImage new];
[theSlider setMinimumTrackImage:[UIImage alloc] forState:UIControlStateNormal];
[theSlider setMaximumTrackImage:[UIImage alloc] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-24T07:04:35.810

只需转到 xib 选择滑块 --> 实用程序 --> 显示属性检查器 --> 拇指色调颜色（清除拇指色调颜色）

[![在此处输入图像描述](../Images/9b8ba54e4c1ea91eab0cf3cec57c8b0a.png)](https://i.stack.imgur.com/ItHur.png)

# jquery - 自动时间延迟 CSS 横幅

> ID：13777866
> 
> 赞同：1
> 
> 时间：2012-12-08T13:23:22.243
> 
> 标签：jquery, css, banner

有四张图片，每张图片都必须依次使用时间延迟进行边框效果（css）。例如：

**哦哦哦**_

5秒后

哦哦哦**_** _

5秒后

哦哦哦 **_** _

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:40:02.673

如果您必须使用 CSS，那么鉴于下面的 HTML，这是可能的（虽然有点笨拙）：

```
<div id="timer">
    <div class="interval"></div>
    <div class="interval"></div>
    <div class="interval"></div>
    <div class="interval"></div>
</div>​ 
```

和CSS：

```
@-moz-keyframes loading {
    0%, 24% {
        border-color: #f00;
    }
    25%, 100% {
        border-color: #000;
    }
}

@-ms-keyframes loading {
    0%, 24% {
        border-color: #f00;
    }
    25%, 100% {
        border-color: #000;
    }
}

@-o-keyframes loading {
    0%, 24% {
        border-color: #f00;
    }
    25%, 100% {
        border-color: #000;
    }
}

@-webkit-keyframes loading {
    0%, 24% {
        border-color: #f00;
    }
    25%, 100% {
        border-color: #000;
    }
}

@keyframes loading {
    0%, 24% { /* stops the gradual fading-out */
        border-color: #f00;
    }
    25%, 100% {
        border-color: #000;
    }
}

#timer .interval {
    display: inline-block;
    width: 1em;
    height: 1em;
    border: 1px solid #000;
    border-radius: 50%;
    -moz-animation: loading 20s linear infinite;
    -ms-animation: loading 20s linear infinite;
    -o-animation: loading 20s linear infinite;
    -webkit-animation: loading 20s linear infinite;
    animation: loading 20s linear infinite;
}

#timer .interval:nth-child(1) {
    -moz-animation-delay: 0;
    -ms-animation-delay: 0;
    -o-animation-delay: 0;
    -webkit-animation-delay: 0;
    animation-delay: 0;
}

#timer .interval:nth-child(2) {
    -moz-animation-delay: 5s;
    -ms-animation-delay: 5s;
    -o-animation-delay: 5s;
    -webkit-animation-delay: 5s;
    animation-delay: 5s;
}

#timer .interval:nth-child(3) {
    -moz-animation-delay: 10s;
    -ms-animation-delay: 10s;
    -o-animation-delay: 10s;
    -webkit-animation-delay: 10s;
    animation-delay: 10s;
}

#timer .interval:nth-child(4) {
    -moz-animation-delay: 15s;
    -ms-animation-delay: 15s;
    -o-animation-delay: 15s;
    -webkit-animation-delay: 15s;
    animation-delay: 15s;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LYnTb/1/)。

或者，使用 CSS 转换但使用 JavaScript，在本例中为 jQuery（为简单起见）来触发下一步，而不是手动使用和设置`animation-delay`with CSS：

```
function transNext(currentEl, transitionClass) {
    if (!currentEl) {
        return false;
    }
    else {
        transitionClass = transitionClass || 'interval';
        var cur = $(currentEl),
            nxt = cur.next().length ? cur.next() : cur.prevAll(':last');
        cur.removeClass(transitionClass);
        nxt.addClass(transitionClass);

    }
}

$('#timer').on('mozAnimationEnd msAnimationEnd oAnimationEnd webkitAnimationEnd animationEnd', function(e) {
    transNext(e.target, 'interval');
});​ 
```

以及修改后的 CSS：

```
@-moz-keyframes loading {
    0%, 99% {
        border-color: #f00;
    }
    100% {
        border-color: #000;
    }
}

@-ms-keyframes loading {
    0%, 99% {
        border-color: #f00;
    }
    100% {
        border-color: #000;
    }
}

@-o-keyframes loading {
    0%, 99% {
        border-color: #f00;
    }
    100% {
        border-color: #000;
    }
}

@-webkit-keyframes loading {
    0%, 99% {
        border-color: #f00;
    }
    100% {
        border-color: #000;
    }
}

@keyframes loading {
    0%, 99% { /* stops the gradual fading-out */
        border-color: #f00;
    }
    100% {
        border-color: #000;
    }
}

#timer div {
    display: inline-block;
    width: 1em;
    height: 1em;
    border: 1px solid #000;
    border-radius: 50%;
}

#timer .interval {
    -moz-animation: loading 5s linear 1;
    -ms-animation: loading 5s linear 1;
    -o-animation: loading 5s linear 1;
    -webkit-animation: loading 5s linear 1;
    animation: loading 5s linear 1;
}
​    ​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LYnTb/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:38:44.143

可以使用[''setInterval''](http://www.w3schools.com/jsref/met_win_setinterval.asp) JavaScript 函数。在此处查看[此 JSFiddle](http://jsfiddle.net/rvZFA/5/)以了解它如何工作的示例。

**HTML：**

```
<div class="container">
    <div class="marker"></div>
    <div class="marker"></div>
    <div class="marker"></div>
    <div class="marker"></div>
</div> 
```

**CSS**：

```
.marker {
    background: #999;
    float: left;
    width: 20px;
    height: 20px;
    margin: 0 5px 0 0;
}

.marked {
    border: 2px solid red;
} 
```

​JavaScript **：**

```
jQuery(function() {
    // Set border around first element
    jQuery('.container .marker:first').addClass('marked');

    // Start interval with 5 second steps
    var iv = setInterval(function() {
        // Executes every 5 seconds

        // Is there a next element?
        if (jQuery('.marker.marked').next('.marker').length == 1) {
            jQuery('.marker.marked')   // actual marked element
                .removeClass('marked') // remove border
                .next('.marker')       // go to next element
                .addClass('marked');   // add border
        } else {
            // No next element? Start again with first element
            jQuery('.marker.marked').removeClass('marked');
            jQuery('.container .marker:first').addClass('marked');
        }
    }, 5000);
});​ 
```

从您的问题中不清楚您是想从左到右进行一次运行，还是必须在序列中的最后一张图像之后从左侧重新开始。我的示例在最后一个 div 之后停止。您必须用图像元素替换 DIV 元素。他们只需要具有类''marker''属性。

**编辑**：上面更新的小提琴/代码循环遍历元素并使用第一个元素再次重复。

# c - 在字符串中使用下划线

> ID：13777867
> 
> 赞同：-2
> 
> 时间：2012-12-08T13:23:24.177
> 
> 标签：c, string

我尝试在字符串中使用下划线，但它似乎使编译器为 char 数组分配更少的字节并在结束字符 ('\0') 上运行。

是什么原因造成的？有没有办法逃避下划线字符？

谢谢。

有关更多信息，请参阅此代码：

```
code:
#include<stdio.h>
#define ARRSIZE 6

char str_ex[][ARRSIZE] = {"aaaa", "bbbb_bbbb", "cccc", "dddd", "ffff_ffff", "eeee"};

int main(void)
{
    int i;
    for(i=0; i<ARRSIZE; i++)
        printf("%s\n", str_ex[i]);
    return 0;
}

compile:
user@ubuntu:~/test$ gcc -g test.c -o test -Wall -ansi
test.c:4:1: warning: initializer-string for array of chars is too long [enabled by default]
test.c:4:1: warning: (near initialization for ‘str_ex[1]’) [enabled by default]
test.c:4:1: warning: initializer-string for array of chars is too long [enabled by default]
test.c:4:1: warning: (near initialization for ‘str_ex[4]’) [enabled by default]

output:
user@ubuntu:~/test$ ./test
aaaa
bbbb_bcccc
cccc
dddd
ffff_feeee
eeee 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:25:30.387

在您的代码`ARRSIZE`中，不会确定数组的大小，而是确定**每个单独的子**数组的大小。所以你告诉它以`bbbb_bbbb`6 个字符存储。也许你可以存储指针：

```
const char *str_ex[] = {....}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T13:25:29.863

这不是因为下划线，而是因为您调整数组大小的方式：您将元素限制为六个字符，并且带有下划线的元素是唯一超过该长度的元素；其他四个字符串只需要五个`char`s，因此它们适合大小为 6 的元素。

您应该将其声明为指针数组，如下所示

```
char *str_ex[ARRSIZE] = {"aaaa", "bbbb_bbbb", "cccc", "dddd", "ffff_ffff", "eeee"}; 
```

或者给你的字符串更多的空间，像这样：

```
char str_ex[10][ARRSIZE] = {"aaaa", "bbbb_bbbb", "cccc", "dddd", "ffff_ffff", "eeee"}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T13:27:16.713

每个字符串的长度最多应为 ARRSIZE 个字符，但带下划线的字符串更大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T13:31:15.433

您设置了错误的尺寸。尝试这个：

```
char *str_ex[ARRSIZE] = .... 
```

这将起作用，因为您使用静态数据初始化 C 字符串数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-08T13:25:39.430

您声明`str_ex`为一个数组数组，每个子数组为 6 个字符，这意味着字符串只能是 5 个字符（加上终止符`'\0'`）。您有几个长度超过 5 个字符的字符串，这是编译器警告的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T13:25:20.873

`ARRSIZE`指为每个字符串分配的字符数。问题是`ARRSIZE`,`6`而两者`"bbbb_bbbb"`和`"ffff_ffff"`都超过六个字符。下划线无关紧要。

# python - 使用有效字符在文件名中保存日期时间

> ID：13777875
> 
> 赞同：1
> 
> 时间：2012-12-08T13:24:46.880
> 
> 标签：python, date, datetime, time

为了跟踪我的文件备份时间，我希望将备份的文件名作为备份的日期时间。这最终将使用 python 进行排序、检索和排序，以允许我根据日期时间文件名获取最新文件。

问题是，日期时间的自动格式不能这样保存：

2007-12-31 22:29:59

例如，它可以像这样保存：

2007-12-31 22-29-59

格式化日期时间的最佳方法是什么，以便我可以轻松地按名称上的日期时间排序，对于奖励积分，以这种方式显示日期时间的 python 是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:56:41.480

你应该看看 python`time`模块的文档：http: [//docs.python.org/2/library/time.html#module-time](http://docs.python.org/2/library/time.html#module-time)

如果你去这个`strftime()`函数，你会看到它接受一个字符串作为输入，它描述了你想要作为返回值的字符串的格式。

示例（每个日期/时间标记之间有连字符）：

```
>>> s = time.strftime('%Y-%m-%d-%H-%M-%S')
>>> print s
2012-12-08-14-55-44 
```

该文档包含可用于获取不同令牌的完整指令表。

**格式化日期时间以便我可以轻松按日期时间排序的最佳方法是什么？**

如果您想根据日期时间名称对文件进行排序，您可以考虑日期时间的最大到最小时间说明符表示（例如：YYYYMMDDhhmmss）保留相同的时间顺序和字典顺序。

# android - Android中的正则表达式

> ID：13777877
> 
> 赞同：-1
> 
> 时间：2012-12-08T13:25:17.490
> 
> 标签：android, regex

我正在制作一个可以从我的大学网站获取新公告的 Android 应用程序。

这是网站中的 HTML 代码：

[sample_html_code http://img690.imageshack.us/img690/1079/88210050.png](http://img690.imageshack.us/img690/1079/88210050.png)

文字版：

```
<table border="1" width="90%" class="duyuru">
<tbody>
<tr>
<td>
<h3 class="duyuru">Additional Quotas for the Technical Electives</h3>
"19/09/2012"
<h4 class="duyuru">"Additional Quotas for Technical Electives offered in...</h4>
<span class="duyuru"></span>
<br>
<a href="news_image/96.doc">Download</a>
</td>
</tr>
</tbody>
</table> 
```

通过使用下面的代码，我可以得到第一行和第三行“技术选修课的附加配额”和“......的附加配额”。但是，我无法获取位于 h3 和 h4 行之间的日期信息 (19/09/2012)。

```
String patternStr ="\\<h3 class=\"duyuru\".*?\\>(.*?)\\</h3\\>";
patternStr+="(.*?)";     // This line is problematic
patternStr+=".*?\\<h4 class=\"duyuru\".*?\\>(.*?)\\</h4\\>";

Pattern pattern = Pattern.compile(patternStr, Pattern.DOTALL);
Matcher matcher = pattern.matcher(content);

String name = "";
String date = "";
String details = "";

while (matcher.find()){

    name    = matcher.group(1);
    date = matcher.group(2);
    details = matcher.group(3);

    Announcement announcement = new Announcement();

    announcement.setName(name);
    announcement.setDate(date);
    announcement.setDetails(details);

    announcements.add(announcement);
} 
```

我尝试使用

```
.*?\"(.*?)\" 
```

但它没有用。当我这样做时，它会从以 h4 标记而不是日期信息开始的行中获取字符串“duyuru”。

任何人都知道如何获取日期信息？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:52:36.760

您的正则表达式错过了输入中的换行符和空格。

我能想到的最简单的匹配是：

```
"\\<h3 class=\"duyuru\".*?\\>\\n?\\s*(.*?)\\n?\\s*\\</h3\\>" 
```

但请记住，这样的正则表达式是高度特定于您的 HTML 的。

我的建议是查看一个真正的 Java 的 HTML 解析器，例如 TagSoup。一旦您开始使用其中一个，解析这种类型的 HTML 文档就变得轻而易举。

# python - Python 从 URL 下载错误？

> ID：13777883
> 
> 赞同：3
> 
> 时间：2012-12-08T13:25:45.287
> 
> 标签：python, download

任何人都可以看到此代码的问题，因为它不断返回错误，这是代码，并且将错误发布在代码下...感谢高级帮助...

```
import commands
import os
import pickle

def readDir():
    directory = raw_input('In which folder would you like to save the files?? \n')
    if(os.path.exists(directory)):
            print 'Error!! Please give an other name '
            directory = raw_input('In which folder would you like to save the file??\n')
            os.mkdir(directory)
            os.chdir(directory)
    else:
        os.mkdir(directory)
        os.chdir(directory)

readDir()
url = raw_input('Which url are you aiming at ?\n')
tmp = open('tempo.txt','w');
tmp.writelines(url)
tmp.close()
tmp = open('tempo.txt','r');
link = tmp.read()
os.system(" curl " + link +"| egrep -o 'http:.*All\.ram'  > final.txt  ")

infile = open('final.txt', 'r')
outfile = open('tmp.txt', 'w')

for line in infile:

outfile = open('tmp.txt', 'w')
key = line
list = key.split("/")
dir = list[6]
outfile.writelines(key)
outfile.close()
open('tmp.txt','r')
os.system("cat tmp.txt | xargs -n1 -i curl {} > links")
os.system("wget -P %s -i links" %dir)

infile.close()
outfile.close()
os.remove(outfile.name)
os.remove('links')
os.remove(tmp.name) 
```

错误：我只是以谷歌为例。

```
Which url are you aiming at ?
google.com
'curl' is not recognized as an internal or external command, operable program or batch file.
Traceback (most recent call last):
File "C:\Users\User\Desktop\download.py", line 52, in <module>
infile = open('final.txt', 'r')
IOError: [Errno 2] No such file or directory: 'final.txt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:30:41.580

我看到的问题：

1.  curl 似乎没有安装在您的本地计算机上。不知道为什么要进行系统调用以仅获取 URL...
2.  由于您没有安装 curl，因此没有创建 final.txt。当您稍后尝试在系统中加载它时，它不起作用。

最重要的是，找到一种不使用 curl 的方法来做到这一点，你会过得更好。

```
os.system(" curl " + link +"| egrep -o 'http:.*All\.ram'  > final.txt  ") 
```

仔细观察，您似乎只想下载该文件。直接使用 urllib 执行此操作要容易得多。我将从[python 文档](http://docs.python.org/2/library/urllib.html)中复制一个简单的示例，并让您从那里弄清楚如何使用它。请注意，如果您使用的是 python 2 或 3，如何做到这一点有很大的不同，所以请注意......

```
>>> import urllib
>>> params = urllib.urlencode({'spam': 1, 'eggs': 2, 'bacon': 0})
>>> f = urllib.urlopen("http://www.musi-cal.com/cgi-bin/query?%s" % params)
>>> print f.read() 
```

# objective-c - 如何在 Cocoa 环境中显示公式/方程式？iOS 和 Mac OS 开发

> ID：13777884
> 
> 赞同：-2
> 
> 时间：2012-12-08T13:25:49.463
> 
> 标签：objective-c, cocoa, formula, equation

UIView / UILabel 子类化？我认为没有任何默认类可以做到这一点。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:55:37.803

我可能会使用网络视图和 MathML。

# javascript - 从站点调用 Chrome 扩展的后台功能

> ID：13777887
> 
> 赞同：12
> 
> 时间：2012-12-08T13:26:17.720
> 
> 标签：javascript, google-chrome, google-chrome-extension, content-script

我正在寻找网页内的功能 te 激活 chrome 扩展。

想象一下[http://www.example.com/test.html](http://www.example.com/test.html)包含：

```
<script>
hello();
</script> 
```

而我的后台页面包含`hello`函数的定义：

```
function hello() {
    alert("test");
} 
```

如何确保 Chrome 扩展程序的后台页面`hello`在调用时被`test.html`调用`hello();`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T17:11:48.717

在网页能够调用后台页面的功能之前，需要解决以下问题：

1.  能够`hello();`从网页使用。这是通过[注入](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script/9517879#9517879)`hello`使用内容脚本定义的脚本来完成的。注入的函数使用自定义事件或`postMessage`.
2.  内容脚本需要与后台通信。这是通过[`chrome.runtime.sendMessage`](http://developer.chrome.com/extensions/runtime#method-sendMessage).
    *如果网页也需要收到回复：*
3.  从后台页面发送回复（`sendMessage`/ `onMessage`，见下文）。
4.  在内容脚本中，创建自定义事件或用于`postMessage`向网页发送消息。
5.  在网页中，处理此消息。

**所有这些方法都是异步的，必须通过回调函数来实现。**

这些步骤需要仔细设计。这是一个实现上述所有步骤的通用实现。您需要了解的有关实施的信息：

*   在要注入的代码中，`sendMessage`只要需要联系内容脚本，就使用该方法。
    用法：`sendMessage(<mixed message> [, <function callback>])`

内容脚本.js

```
// Random unique name, to be used to minimize conflicts:
var EVENT_FROM_PAGE = '__rw_chrome_ext_' + new Date().getTime();
var EVENT_REPLY = '__rw_chrome_ext_reply_' + new Date().getTime();

var s = document.createElement('script');
s.textContent = '(' + function(send_event_name, reply_event_name) {
    // NOTE: This function is serialized and runs in the page's context
    // Begin of the page's functionality
    window.hello = function(string) {
        sendMessage({
            type: 'sayhello',
            data: string
        }, function(response) {
            alert('Background said: ' + response);
        });
    };

    // End of your logic, begin of messaging implementation:
    function sendMessage(message, callback) {
        var transporter = document.createElement('dummy');
        // Handles reply:
        transporter.addEventListener(reply_event_name, function(event) {
            var result = this.getAttribute('result');
            if (this.parentNode) this.parentNode.removeChild(this);
            // After having cleaned up, send callback if needed:
            if (typeof callback == 'function') {
                result = JSON.parse(result);
                callback(result);
            }
        });
        // Functionality to notify content script
        var event = document.createEvent('Events');
        event.initEvent(send_event_name, true, false);
        transporter.setAttribute('data', JSON.stringify(message));
        (document.body||document.documentElement).appendChild(transporter);
        transporter.dispatchEvent(event);
    }
} + ')(' + JSON.stringify(/*string*/EVENT_FROM_PAGE) + ', ' +
           JSON.stringify(/*string*/EVENT_REPLY) + ');';
document.documentElement.appendChild(s);
s.parentNode.removeChild(s);

// Handle messages from/to page:
document.addEventListener(EVENT_FROM_PAGE, function(e) {
    var transporter = e.target;
    if (transporter) {
        var request = JSON.parse(transporter.getAttribute('data'));
        // Example of handling: Send message to background and await reply
        chrome.runtime.sendMessage({
            type: 'page',
            request: request
        }, function(data) {
            // Received message from background, pass to page
            var event = document.createEvent('Events');
            event.initEvent(EVENT_REPLY, false, false);
            transporter.setAttribute('result', JSON.stringify(data));
            transporter.dispatchEvent(event);
        });
    }
}); 
```

背景.js

```
chrome.runtime.onMessage.addListener(function(message, sender, sendResponse) {
    if (message && message.type == 'page') {
        var page_message = message.message;
        // Simple example: Get data from extension's local storage
        var result = localStorage.getItem('whatever');
        // Reply result to content script
        sendResponse(result);
    }
}); 
```

没有清单文件，Chrome 扩展是不完整的，所以这是`manifest.json`我用来测试答案的文件：

```
{
    "name": "Page to background and back again",
    "version": "1",
    "manifest_version": 2,
    "background": {
        "scripts": ["background.js"]
    },
    "content_scripts": [{
        "matches": ["http://jsfiddle.net/jRaPj/show/*"],
        "js": ["contentscript.js"],
        "all_frames": true,
        "run_at": "document_start"
    }]
} 
```

此扩展在[http://jsfiddle.net/jRaPj/show/](http://jsfiddle.net/jRaPj/show/)进行了测试（包含`hello();`如问题中所见），并显示一个对话框，显示“背景说：null”。
打开后台页面，使用`localStorage.setItem('whatever', 'Hello!');`查看消息是否正确更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-19T14:23:53.380

有一个[将消息从网页发送](https://developer.chrome.com/extensions/messaging#external-webpage)到扩展的内置解决方案

`mainfest.json`

```
"externally_connectable": {
  "matches": ["*://*.example.com/*"]
} 
```

网页：

```
// The ID of the extension we want to talk to.
var editorExtensionId = "abcdefghijklmnoabcdefhijklmnoabc";

// Make a simple request:
chrome.runtime.sendMessage(editorExtensionId, {openUrlInEditor: url},
  function(response) {
    if (!response.success)
      handleError(url);
  }); 
```

扩展的后台脚本：

```
chrome.runtime.onMessageExternal.addListener(
  function(request, sender, sendResponse) {
    if (sender.url == blacklistedWebsite)
      return;  // don't allow this web page access
    if (request.openUrlInEditor)
      openUrl(request.openUrlInEditor);
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T13:48:06.523

不，由于[背景页面架构，使用上述代码](https://developer.chrome.com/extensions/overview.html#arch)

是的，[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)

**使用内容脚本的演示**

***清单.json***

注册内容脚本 myscripts.js

```
{
"name": "NFC",
"description": "NFC Liken",
"version": "0.1",
"manifest_version": 2,
"permissions": ["tabs", "http://*/", "https://*/"],
"content_scripts": {
    "matches": "http://www.example.com/*",
    "js": [ "myscript.js"]
  },
"browser_action": {
"default_icon": "sync-icon.png",
"default_title": "I Like I Tag"
}
} 
```

如果您需要更多信息，请与我们联系。

# java - 带继承的工厂模式

> ID：13777888
> 
> 赞同：1
> 
> 时间：2012-12-08T13:26:28.820
> 
> 标签：java, oop, design-patterns

当它与继承一起使用时，我遇到了工厂模式的问题，

这是我的代码

```
public class Animal {
  public int numberOfLegs() { return 2 ;}
}

public class Cat extends Animal {
  public String getSound() {return "Maaaw";}
}
public class Dog extends Animal {
  public String getSound() {return "woof";}
}

public class AnimalFactory {
  public Animal getAnimal(String name){
    Animal an= null ;
    if(name=="cat"){an = new Cat();}
    else if(name=="dog"){an=new Dog();}
    return an ;
  }
}

public class FactoryDemo {

  public static void main(String[] args) {
    AnimalFactory anmF=new AnimalFactory();
    Animal anm=anmF.getAnimal("cat") ;
    System.out.println("legs : "+anm.numberOfLegs()); // working fine
    System.out.println("sound : "+anm.getSound());    // giving error
  }
} 
```

当我运行它时，我无法使用该`getSound()`方法。它给出了一个错误。

`Animal`如果我将类定义为抽象类，这会很好，
但我想如何处理工厂模式这样的情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T13:28:58.770

您需要为 getSound 添​​加一个抽象方法

```
public abstract class Animal {
    public int numberOfLegs() { return 2 ;}
    public abstract String getSound();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T13:44:53.317

将您的代码更改为：

```
public abstract class Animal {
    public int numberOfLegs() { 
        return 2;
    }

    public abstract String getSound();
}

public class Cat extends Animal {
    public String getSound() {
        return "Maaaw";
    }
}

public class Dog extends Animal {
    public String getSound() {
        return "woof";
    }
}

public class AnimalFactory {
    public Animal getAnimal(String name) {

        Animal an = null;
        if ("cat".equals(name)) {
            an = new Cat();
        } else if ("dog".equals(name)) {
            an = new Dog();
        } 
        return an;
     }
} 
```

您应该添加抽象方法，并在您的工厂方法中使用*等于*，而不是在对象上使用*== 。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:50:13.277

您包含的代码与工厂完全不同。如果您参考[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)，那么您作为 OP 的一部分实现的是不正确的实现。有两种“工厂”代码设计，一种是我之前指出的工厂方法模式（你的代码肯定不是那个）和有效 Java 书中推荐的工厂，这是 Java JDK 的首选设计，即`valueOf`or`create*`方法.

# ios - 如何在 UITableView 中设置 UILabel 的高度以包含可变长度的 NSString

> ID：13777889
> 
> 赞同：1
> 
> 时间：2012-12-08T13:26:40.997
> 
> 标签：ios, uitableview, uilabel

我需要创建一个 UITableView，其中 UITableViewCell 包含两个 UILabel，其中一个应该适合其内容 NSString 的高度。UILabel 的宽度是固定的，行数设置为 0。如何获取高度？我看到这样的代码：

```
CGSize maximumSize = CGSizeMake(300, 9999);
NSString *myString = @"This is a long string which wraps";
UIFont *myFont = [UIFont fontWithName:@"Helvetica" size:14];
CGSize myStringSize = [myString sizeWithFont:myFont 
                           constrainedToSize:maximumSize 
lineBreakMode:self.myLabel.lineBreakMode]; 
```

但结果是：UILabel 的一行只有一个字符。为什么我不能使用这种方法？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:32:36.323

试试这个

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *str = @"This is a very very long string which wraps";
    CGSize size = [str sizeWithFont:[UIFont fontWithName:@"Helvetica" size:17] constrainedToSize:CGSizeMake(280, 999) lineBreakMode:UILineBreakModeWordWrap];
    return size.height + 10;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:05:18.470

我终于让它工作了，我的项目中的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"shopmessage";
UITableViewCell *cell;
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

UILabel* content = (UILabel*)[cell viewWithTag:11];
UILabel* date = (UILabel*)[cell viewWithTag:12];
NSDictionary* msg = [ _msglist objectAtIndex:indexPath.row];
NSString* type = [[msg objectForKey:@"msgtype"] intValue] == 0 ? @"我:":@"店家:";
[content setText:[NSString stringWithFormat:@"%@%@",type,[msg objectForKey:@"sendmsg"]]];
[date setText:[msg objectForKey:@"sendtime"]];

CGSize contentsize = [content.text sizeWithFont:[UIFont systemFontOfSize:17] constrainedToSize:CGSizeMake(280, 1000) lineBreakMode:UILineBreakModeWordWrap];
//    content.frame.size = contentsize;
content.frame = CGRectMake(content.frame.origin.x, content.frame.origin.y, contentsize.width, contentsize.height);

[date setText:[msg objectForKey:@"sendtime"]];
//    date.frame.origin = CGPointMake(date.frame.origin.x, content.frame.origin.y + content.frame.size.height + 10);
date.frame = CGRectMake(date.frame.origin.x, content.frame.origin.y + content.frame.size.height, date.frame.size.width, date.frame.size.height);
return cell; 
```

}

```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary* msg = [ _msglist objectAtIndex:indexPath.row];
    NSString* text =[msg objectForKey:@"sendmsg"];
    CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:17] constrainedToSize:CGSizeMake(280, 1000) lineBreakMode:UILineBreakModeCharacterWrap];

    return size.height + 30;
} 
```

参考：[Apple 支持社区](https://discussions.apple.com/thread/2342307?start=0&tstart=0)

# jquery - jQuery 检查输入匹配表达式或字符串的内容

> ID：13777895
> 
> 赞同：-4
> 
> 时间：2012-12-08T13:27:45.387
> 
> 标签：jquery, validation, input

我想为用户登录创建一些非常基本的验证，它不是敏感数据。

我只想检查用户名和密码是否正确，如果他们正在处理表单，如果他们不只是取消隐藏一段提示用户输入正确详细信息的文本。不需要更多。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:38:37.623

不建议使用 jquery 在前端进行验证，因为它会将您的数据暴露给客户端。但是，如果您真的想要，您可以执行以下操作。

```
<script type="javascript">
$(document).ready(function(){
  $("#Submit").click(function(){
     if($("#txtUserName").val() == 'XYZ' && $("#txtPassword").val() == 'Password')
     {
        //do directing stuff
     }
  });
});
</script> 
```

PS：值验证应该在服务器端脚本中完成，正则表达式验证可以在客户端脚本中完成。

# c - 结构存储来自 /proc/ 的记录 /地图

> ID：13777898
> 
> 赞同：0
> 
> 时间：2012-12-08T13:28:10.153
> 
> 标签：c, linux

我使用下一个结构来存储来自 /proc//maps 的信息：

```
typedef struct
{
    unsigned long vm_start;
    unsigned long vm_end;
    unsigned long vm_flags;
    unsigned long vm_pgoff;
    dev_t vm_dev;
    unsigned long vm_ino;
    unsigned long vm_size;
    int vm_shares;
} map_t; 
```

还有一个向量：

```
typedef struct
{
    map_t *arr;
    int size;
    int reserved;
} map_vector_t; 
```

当我从文件中读取记录时，我找到了一个共享的等效区域：

```
int index = mem_mapping_find_shared(vector, map);
if (index != -1) {
    vector->arr[index].vm_shares++;
    continue;
}

map.vm_shares = 0; 
```

```
int mem_mapping_find_shared(map_vector_t *vector, map_t map)
{
    int index = -1;

    for (int i = 0; index == -1 && i < vector->size; i++) {
        if (mem_mapping_is_shareable(vector->arr[i], map)) {
            index = i;
        }
    }

    return index;
} 
```

但它的代码太慢了。我想我应该使用哈希表，对吧？我可以使用哪个哈希函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T16:14:54.903

也许它对某人有用：

```
unsigned long long mem_mapping_hash(const map_t *map)
{
    unsigned long long h = map->vm_pgoff;
    h = h * PRIME + map->vm_dev;
    h = h * PRIME + map->vm_ino;
    h = h * PRIME + map->vm_size;

    return h % PRIME;
} 
```

# c++ - 大型项目的 C++ 异常

> ID：13777899
> 
> 赞同：2
> 
> 时间：2012-12-08T13:28:11.973
> 
> 标签：c++, exception-handling

我目前正在构建一个 C++ 游戏引擎作为学习练习，并将异常合并到对性能不太重要的部分。我主要是一名 PHP 和 Ruby 开发人员，所以我习惯于使用如下简单的语法定期声明新的异常类：

```
class SomeSubSystemException < Exception; end 
```

或者

```
class SomeSubSystemException extends Exception {}; 
```

是否有在 C++ 中执行此操作的简单语法，或者我是否会以错误的方式处理 C++ 项目的异常？目前我必须为每一类异常做以下事情，这让我不想定义很多：

```
class SubSystemException : public MainException {
    SubSystemException(std::string& msg) : MainException(msg) {}
}; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:08:08.357

定义一个为您执行此操作的宏。

```
#define NEW_EXC(Derived, Base) class Derived : Base {\
 Derived(const std::string& msg) : Base(msg) {}

NEW_EXC(SubSystemException, MainException);

#undef NEW_EXC 
```

完毕。

[当心宏可能是邪恶的。](http://www.parashift.com/c++-faq/preprocessor-is-evil.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:24:05.123

尽管我同意 Bo Person 的评论，即这不会是您的样板文件的主要来源，但这里有另一种方式：

使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

```
template<class T>
class MainException : public std::runtime_error{
private:
  MainException(std::string const& msg):std::runtime_error(msg){ }
public:
  static MainException<T> create(std::string const& msg){
    return MainException<T>(msg);
  }
};

//Usage:
class MyException : public MainException<MyException> {};
void foo(){
  MyException::create(std::string("Foo"));
} 
```

# c++ - 在Qt中使用botan加密大文件时如何获得加密/解密进度

> ID：13777902
> 
> 赞同：0
> 
> 时间：2012-12-08T13:28:35.087
> 
> 标签：c++, qt, botan

我有下面的代码来加密和解密 Qt 中的 botan 文件。加密大文件时会花费大量时间，并且我想在加密/解密大文件时获取处理的字节数。是否可以？

```
 void AES::Encrypt(SymmetricKey key, InitializationVector iv, string inFilename,  string outFilename)
{
    std::ifstream in(inFilename.c_str(),std::ios::binary);
    std::ofstream out(outFilename.c_str(),std::ios::binary);

    Pipe pipe(get_cipher("AES-256/CBC", key, iv,ENCRYPTION),new DataSink_Stream(out));
    pipe.start_msg();
    in >> pipe;
    pipe.end_msg();

    out.flush();
    out.close();
    in.close();

    qDebug() << "Encrypted!";
}

void AES::Decrypt(SymmetricKey key, InitializationVector iv, string inFilename,  string outFilename)
{
    std::ifstream in(inFilename.c_str(),std::ios::binary);
    std::ofstream out(outFilename.c_str(),std::ios::binary);

    Pipe pipe(get_cipher("AES-256/CBC", key, iv,DECRYPTION),new DataSink_Stream(out));
    pipe.start_msg();
    in >> pipe;
    pipe.end_msg();

    out.flush();
    out.close();
    in.close();

    qDebug() << "Decrypted!";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:24:29.507

如果您查看有关[Pipe/Filter Mechanisms](http://botan.randombit.net/filters.html)的 Botan 文档，则会讨论有关处理大文件和限制内存使用的讨论。在该部分的末尾，是一个代码片段，它显示了使用有界缓冲区处理大文件。通过在其中添加一些代码，我认为您将能够防止加密操作耗尽内存以及能够从该循环中触发 Qt 进度信号。

# java - 正则表达式性能问题

> ID：13777903
> 
> 赞同：1
> 
> 时间：2012-12-08T13:28:37.850
> 
> 标签：java, regex

我写了一个正则表达式来验证一个名字。名称可以以字母开头，后面可以跟字母、数字、空格或`_`. 我写的正则表达式是：

```
private static final String REGEX = "([a-zA-Z][a-zA-Z0-9 _]*)*"; 
```

如果输入是：“ `kasklfhklasdhklghjsdkgsjkdbgjsbdjKg;`”程序卡在`matcher.matches()`.

```
Pattern pattern = Pattern.compile(REGEX);
Matcher matcher = pattern.matcher(input);

if (matcher.matches()) {
  System.out.println("Pattern Matches");
} else {
  System.out.println("Match Declined");
} 
```

如何优化正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:35:25.530

将您的正则表达式更改为：

```
private static final String REGEX = "[a-zA-Z][a-zA-Z0-9 _]*"; 
```

它会在一次点击中匹配字符串。

# schema.org - schema.org itemprop="image" 和谷歌片段/摘录

> ID：13777905
> 
> 赞同：2
> 
> 时间：2012-12-08T13:28:44.637
> 
> 标签：schema.org

我在一个电子商务网站中实现了 schema.org 的产品，我有一个关于图像大小和图像比例的问题。

我能找到的关于图像属性的唯一信息是，如果图像的比例或大小错误，谷歌可以选择不使用图像。

这些图像的合适比例和尺寸是多少？

# android - Android自定义相机应用中的拍照回调

> ID：13777908
> 
> 赞同：1
> 
> 时间：2012-12-08T13:28:48.490
> 
> 标签：android, callback, android-camera

我正在 Android 中开发自定义相机应用程序。我的目标是将图片保存到文件中，并在文件保存后立即以全屏模式打开它。不幸的是，问题是我的主要活动（ImageCapture）在调用下一个活动（ImageDisplay）之前没有等待 ImageCaptureCallback 结果。

要拍照，我正在使用自定义 ImageCaptureCallback，它使用 OutputStream 将捕获的图像保存到“tmpPicturePath”。稍后调用 ImageDisplay 活动 - 它读取保存在 tmpPicturePath 中的文件。

```
camera.takePicture(mShutterCallback, mPictureCallbackRaw, new ImageCaptureCallback(this));

// ImageCaptureCallback saves the file in tmpPicturePath

Intent intent = new Intent(ImageCapture.this, ImageDisplay.class);
intent.putExtra("tmpPicturePath", this.getTmpPicturePath());
startActivity(intent); 
```

但是在调用 ImageDisplay 活动时，应该在 ImageCaptureCallback 中创建的文件尚不可用。总体效果是在 ImageDisplay 类中可用的不是实际的而是先前拍摄的图片。你知道如何处理这个问题吗？换句话说，如何在调用下一个活动之前等待回调结果？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:37:17.493

从相机拍照的示例代码

```
void selectPhoto() {

    ContentValues values = new ContentValues();
    values.put(MediaStore.Images.Media.TITLE, "New Picture");
    values.put(MediaStore.Images.Media.DESCRIPTION, "From your Camera");
    imageUri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);

    startActivityForResult(intent, SELECT_PHOTO);
} 
```

并在 onActivityResult() 方法中

```
 try {
                imageBitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), imageUri);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# ruby-on-rails - Amazon Elastic Beanstalk - Ruby (Rack) 应用程序无法启动

> ID：13777911
> 
> 赞同：3
> 
> 时间：2012-12-08T13:29:07.750
> 
> 标签：ruby-on-rails, amazon-ec2, passenger, amazon-elastic-beanstalk

我想在 Amazon Elestic Beanstalk 上托管我的 rails 网站。我遵循了本指南：[http](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html) ://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html 。

现在，我有这个错误：无法启动 Ruby (Rack) 应用程序

> 错误信息：
> 
> ```
> Could not find rake-10.0.2 in any of the sources (Bundler::GemNotFound) Exception class:
> 
> PhusionPassenger::UnknownError Application root:
> 
> /var/app/current 
> ```
> 
> 0 /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/spec_set.rb 90 在“实现中的块”
> 
> 1 /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/spec_set.rb 83 在“地图！”
> 
> 2 /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/spec_set.rb 83 在“物化”
> 
> 3 /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb 113 在“规格”
> 
> 4 /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb 158 在“specs_for”
> 
> 5 /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb 147 在“requested_specs”
> 
> 6 /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/environment.rb 23 在“requested_specs”
> 
> 7 /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb 11 在“设置”中
> 
> 8 /usr/share/ruby/1.9/gems/1.9.1/gems/bundler-1.2.1/lib/bundler.rb 116 在“设置”
> 
> 9 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/utils.rb 326 在“prepare_app_process”
> 
> 10 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb 156 in `block in initialize_server'
> 
> 11 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/utils.rb 563 在“report_app_init_status”中
> 
> 12 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb 154 在“initialize_server”
> 
> 13 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb 204 在“启动同步”
> 
> 14 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb 180 在“开始”
> 
> 15 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/rack/application_spawner.rb 129 在“开始”
> 
> 16 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb 253 在 spawn_rack_application 中的块（2 级）
> 
> 17 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server_collection.rb 132 在“lookup_or_add”中
> 
> 18 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb 246 in `block in spawn_rack_application'
> 
> 19 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server_collection.rb 82 在“同步块”中
> 
> 20前奏> 10：在`同步'
> 
> 21 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server_collection.rb 79 在“同步”
> 
> 22 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb 244 在“spawn_rack_application”
> 
> 23 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb 137 在`spawn_application'
> 
> 24 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager.rb 16 在`spawn_application_with_env'
> 
> 25 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/spawn_manager_orig.rb 275 在“handle_spawn_application”
> 
> 26 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb 357 在“server_main_loop”
> 
> 27 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/lib/phusion_passenger/abstract_server.rb 206 在“启动同步”
> 
> 28 /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.4.6-1002/support/helper-scripts/passenger-spawn-server 99 在`'

我的源代码中没有任何痕迹。我没有在互联网上找到任何东西。您可以在此处找到应用程序的源代码：[https](https://github.com/GCorbel/comment-my-projects) ://github.com/GCorbel/comment-my-projects 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:11:39.910

我正在经历这一点，并发现这与 rake 本身无关。发生这种情况可能是因为您的其中一个 gem 没有安装。就我而言，它`pg`没有被安装，因为它需要 pg_config 可执行文件。

因此，就我而言，为了解决这个问题，我将以下部分添加到`.ebextensions/default.config`：

```
packages:
  yum:
    git: []
    postgresql-devel: []

# Run rake tasks before an application deployment
container_commands:
  01bundler-pg:
    command: bundle config build.pg --with-pg-config=/usr/bin/pg_config 
```

即使您不使用`pg`，请检查您的任何 gem 是否需要安装开发头文件或可执行文件。

参考：[https ://forums.aws.amazon.com/thread.jspa?messageID=400055](https://forums.aws.amazon.com/thread.jspa?messageID=400055)

# f# - 如何获得最小深度的叶子？

> ID：13777914
> 
> 赞同：0
> 
> 时间：2012-12-08T13:29:26.873
> 
> 标签：f#

例如，我有一棵具有这种结构的树

```
let tr = Node(1,[Node(2,[Leaf(5)]);Node(3,[Leaf(6);Leaf(7)]);Leaf(4)]) 
```

我怎样才能得到最小深度的叶子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T13:53:45.837

解决这个问题的一种方法是实现[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)算法。该算法在“级别”中遍历一棵树，因此它返回根，然后是根的所有孩子，然后是这些孩子的所有孩子，依此类推。您可以将其写为 F# 函数返回序列：

```
/// Breadth-first search over a tree 
/// Takes list of initial nodes as argument
let rec breadthFirstSearch nodes = seq {
  // Return all nodes at the current level
  yield! nodes
  // Collect all children of current level
  let children = nodes |> List.collect (function
    | Leaf _ -> [] | Node(_, c) -> c)
  // Walk over all the children (next level)
  if children <> [] then
    yield! breadthFirstSearch children } 
```

这是对各种树处理任务非常有用的算法，因此拥有它很有用。现在，要获得最低值`Leaf`，您只需选择`Leaf`序列中的第一个节点：

```
breadthFirstSearch [tr]
|> Seq.filter (function Leaf _ -> true | _ -> false)
|> Seq.head 
```

我认为这个解决方案很好，因为它实现了一个更有用的功能，然后用它在三行上解决您的特定问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T13:52:52.950

```
let minDepthLeaf tree = 
    let rec aux (depth: int) = function
    | Leaf(_) as l -> (l, depth)
    | Node(_, children) -> children |> List.map (aux (depth+1)) |> List.minBy snd

    aux 0 tree |> fst 
```

# wordpress - 如何检查 Wordpress 高级自定义字段插件中的字段组？

> ID：13777916
> 
> 赞同：2
> 
> 时间：2012-12-08T13:29:42.077
> 
> 标签：wordpress, custom-fields

我正在为 Wordpress 使用 acf 高级自定义字段插件。我正在使用默认输出所有字段组的通用模板。由于某些字段仅显示在特定页面上，我想确定需要输出哪些字段。我目前的解决方法如下：

1、我在后台创建了一个acf-field group（比如名字为“My Field Group”）；
2，我在 acf 菜单中为“我的字段组”设置了一个角色，使其仅在特定页面上显示（角色也可以是类别等）
3，我创建了一个带有复选框和名称的自定义字段“我的字段组”中的“mygroup”总是返回“是”。

4，然后在代码中，我可以通过检查自定义字段“mygroup”的值来检查页面上的组“My Field Group”是否可用。如果是，它将返回“我的字段组”的所有字段

编码：

```
//check if the field group "My Field Group" is available by checking the value of its custom field "mygroup" 
<?php if(get_field('mygroup') == "yes") { ?>
    <div>
        //load all other fields in the field group "My Field Group"
    </div>
<?php } ?> 
```

由于这仅需要一个附加字段来检查该字段组在页面上是否可用（分别确定角色），我想知道是否有更优雅的方式来实现这一点

![acf 编辑器](../Images/c356dddbb53d9777c611517c9bbcd295.png)

![页](../Images/e1622ef371512d255f3934160d42ecfc.png)

**更新：** 这是程序员的反馈：

> ACF 不保存有关帖子中出现的特定字段组的任何信息，只保存字段值。
> 
> 我相信你的方法是最小的、有效的和聪明的。我会继续使用这个。
> 
> 干杯艾略特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:36:22.880

**为了简单地检查该字段`mygroup`是否已启用，请使用：**

```
// call the function only once
$group = get_field('mygroup');

if( $group ) { 
    ?>
    <div>
        <?php do_your_magic_with_the_other_fields(); ?>
    </div>
    <?php
} 
```

* * *

**检查整体`My Field Group`：**

ACF 字段组是存储在`wp_posts`表中的自定义帖子类型。此字段组内的字段存储在`wp_postmeta`表中。

因此，您必须检查帖子是否存在。

![acf 字段组](../Images/c5ea63dc29f693cc3330f222fc92cea6.png)

数据库中相同的“字段组”：

[![数据库中的 acf 字段组](../Images/f7026d97db85bc954f4bba87be3d4c56.png)](https://i.stack.imgur.com/rPRmc.png) *^(点击放大⤴</sup>)*

* * *

### 解决方案：使用[get_page_by_title()](http://codex.wordpress.org/Function_Reference/get_page_by_title)

在我的例子中：

```
if( get_page_by_title( 'TimMaia', OBJECT, 'acf' ) )
{
    // Your stuff
} 
```

# iphone - UIKeyboardDidHideNotification 错误应用程序崩溃

> ID：13777920
> 
> 赞同：2
> 
> 时间：2012-12-08T13:29:54.097
> 
> 标签：iphone, objective-c, ios

我正在使用一个`UIView`. 该应用程序正在使用 ARC。`UIView`用于多个视图控制器。在`UIView`一个监听`UIKeyboardDidHideNotification`器中添加了。侦听器可以与某些视图控制器一起正常工作，而与其他视图控制器一起使用会使应用程序崩溃。特别是当我在第一次使用后在第二个视图控制器中使用时。错误是

> *** -[appname keyboardWillHide]：消息发送到释放的实例 0xb9c2760

在某些情况下，侦听器会被调用两次。

我在 uiview drawrect 方法中添加的代码是：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide) name:UIKeyboardWillHideNotification object:nil]; 
```

侦听器的代码是

```
-(void)keyboardWillHide
{
    if(boolisViewlifted)
    {

            CGRect newFrame=self.frame;
            newFrame=CGRectMake(self.frame.origin.x, self.frame.origin.y+250, self.frame.size.width, self.frame.size.height);
            self.frame=newFrame;
            boolisViewlifted=false;

    }
} 
```

uiview 出现在调用视图控制器的顶部。请让我知道导致此错误的原因以及解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:34:19.277

由于内存警告，您的视图正在卸载。您需要在为通知添加观察者的所有视图中覆盖 dealloc 方法并删除所有通知的观察者。

```
//do add in all views
-(void)dealloc
{
     //[super dealloc];//As you are using ARC don't call super's dealloc
     [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

# facebook - Facebook 上仍然可以使用 FMBL 标签吗？

> ID：13777921
> 
> 赞同：-1
> 
> 时间：2012-12-08T13:30:05.713
> 
> 标签：facebook, fbml

还是他们现在死了？

facebook 标签的下一个替代方案是什么？

我想在我的 facebook 页面上使用 FMBL 的 HTML/PHP 页面，但我不确定它是否仍然可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:25:59.020

FBML 已弃用，“静态 FBML”应用程序不再可用。

你现在可以试试这个：[https ://www.facebook.com/staticHTML](https://www.facebook.com/staticHTML)

不过我没有测试它，创建标签的最好方法是自己创建一个应用程序：

> [https://developers.facebook.com/apps](https://developers.facebook.com/apps)

这并不难，标签只是 iframe，您可以像真正的网站一样对页面进行编程。请记住，对于画布应用程序和选项卡应用程序，您需要具有 SSL 的服务器。

# python - 我想创建 python 脚本文件：我是新手

> ID：13777926
> 
> 赞同：-4
> 
> 时间：2012-12-08T13:31:00.513
> 
> 标签：python

我想创建 python 脚本文件以及如何使用命令行运行它。

像这样：文件包括这个编码部分：包括数字作为命令行参数并打印数字的总和。

C:\python32\python.exe 一些.py 1 2

结果将是：总和为 3

我想在 python 中做上述场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:33:02.440

如果这两个数字是整数：

```
import sys
print(int(sys.argv[1]) + int(sys.argv[2])) 
```

或者，更一般地说：

```
import sys
print(sum(map(int, sys.argv[1:]))) 
```

# python - 用 numpy 迭代二值化图像很慢

> ID：13777927
> 
> 赞同：1
> 
> 时间：2012-12-08T13:31:01.503
> 
> 标签：python, image-processing, numpy

我需要遍历二值化图像中的所有像素以找到形状。但是以这种方式迭代每个图像像素需要很长时间。有没有其他方法可以更快地迭代图像像素？

```
dimension = im.shape
rows = dimension[0]
cols = dimension[1]
for i in range(0,rows):
    for j in range(0,cols):
        doSomeOperation(im[i,j]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:53:55.367

一般来说，你`doSomeOperation`所做的决定了它可以加速多少。

如果提到的查找形状的兴趣实际上意味着查找连接的组件，那么加速解决方案的一种简单方法是使用包中的[ndimage.label](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.measurements.label.html#scipy.ndimage.measurements.label)和[ndimage.find_objects](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.measurements.find_objects.html#scipy.ndimage.measurements.find_objects)`scipy`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:09:37.760

正如 rubik 的评论所说，与矢量化函数可以工作的速度相比，python 循环很慢。使用矢量化函数，您可以定义一个适用于单个元素的函数（如果您使用更复杂的矢量化函数，有时会更多）并返回单个值。常见的向量化函数已经定义为加法和乘法。

例如。

```
arr = numpy.arange(10)
arr = arr * numpy.arange(10, 20) 
# times all elements arr by the respective element in other array 
arr = arr + 1 
# add 1 to all elements

@numpy.vectorize
def threshold(element):
    if element < 20:
        return 0
    else:
        return element

# @ notation is the same as 
# threshold = numpy.vectorize(threshold)

arr = threshold(arr)
# sets all elements less than 20 to 0 
```

但是，由于您正在尝试查找形状，因此可能值得说明您正在查看的像素区域。所以可能有更好的方法来尝试找到你正在寻找的东西。

# jquery - 为什么变量不会被传递？

> ID：13777930
> 
> 赞同：1
> 
> 时间：2012-12-08T13:31:27.547
> 
> 标签：jquery, mouseover

我有一组 div-s 需要应用一些 jQuery。

```
<div id="anim1" class="animation"></div>
<div id="anim2" class="animation"></div> 
```

它看起来很简单，但我想让它更灵活一点。虽然这可能是不可能的......但不是复制和粘贴 jQuery 函数的次数与我所拥有的层数一样多，我想知道是否有任何方法可以从鼠标悬停动作中获取层名并将其放入我可以在以下脚本中使用的变量：

```
$(document).ready(function() {

$('.animation').mouseover(function() {
    layer = '#'+this.id;
});

var steps = [0, 50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000, 1050, 1100, 1150, 1200, 1250, 1300, 1350, 1400, 1450, 1500, 1550, 1600, 1650, 1700, 1750, 1800, 1850, 1900, 1950, 2000, 2050, 2100, 2150, 2200, 2250, 2300, 2350, 2400, 2450, 2500, 2550, 2600, 2650, 2700, 2750, 2800, 2850, 2900, 2950,];
  var index = -1;
  setTimeout(function() {
         index++;
         if(index == 57) {
           index = 0;
         }
      $(layer).hover(function(){
        index ++;
      }, function(){
        index -=1;
      });
    $(layer).css('backgroundPosition', '-' + steps[index] + 'px 0px');
    setTimeout(arguments.callee, 50);
  }, 25);
}); 
```

我想知道我在这里做错了什么。任何想法都非常感谢......

更新。试图在 $(document).ready(function() 中声明变量。我不确定是否可以这样做，但至少动画现在正在移动。唯一的问题是当我停止时两者都停止将鼠标悬停在其中任何一个上。：

```
 $(document).ready(function() {
 layer = $('.animation').mouseover(function() {
    '#'+this.id;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:46:48.507

您可以在鼠标悬停函数范围之外设置一个变量，然后将 $(this) 分配给函数内的该变量

变种；

```
$('.animation').mouseover(function() {
    that = $(this);
}); 
```

然后用那个来引用外面的元素。我不确定您要在这里做什么，但这是“传递元素”的一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:04:48.483

当你不想为每个 div 复制你的函数时，我会使用[每个 jQuery](http://api.jquery.com/jQuery.each/)

我会给每个 div 一个类名：

```
<div class="anim" class="animation"></div>
<div class="anim" class="animation"></div> 
```

然后将您的效果分配给每个元素：

```
$('.anim').each(function(index_each, element) {

  var steps = [0, 50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000, 1050, 1100, 1150, 1200, 1250, 1300, 1350, 1400, 1450, 1500, 1550, 1600, 1650, 1700, 1750, 1800, 1850, 1900, 1950, 2000, 2050, 2100, 2150, 2200, 2250, 2300, 2350, 2400, 2450, 2500, 2550, 2600, 2650, 2700, 2750, 2800, 2850, 2900, 2950,];
  var index = -1;

  setTimeout(function() {
    index++;
    if(index == 57) {
      index = 0;
    }

    $(element).hover(function(){
       index ++;
      }, function(){
            index -=1;
    });

    $(element).css('backgroundPosition', '-' + steps[index] + 'px 0px');
    setTimeout(arguments.callee, 50);
  }, 25);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:09:14.450

给你，伙计...

[**小提琴**](http://jsfiddle.net/videsignz/UBWGt/)

```
$('.animation').each(function() {
    var anim = $(this);

    var steps = [0, 50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000, 1050, 1100, 1150, 1200, 1250, 1300, 1350, 1400, 1450, 1500, 1550, 1600, 1650, 1700, 1750, 1800, 1850, 1900, 1950, 2000, 2050, 2100, 2150, 2200, 2250, 2300, 2350, 2400, 2450, 2500, 2550, 2600, 2650, 2700, 2750, 2800, 2850, 2900, 2950 ];
    var index = -1;

    setTimeout(function() {
        index++;
        if (index == 57) {
            index = 0;
        }
        anim.hover(function() {
            index++;
        }, function() {
            index -= 1;
        });
        anim.css('backgroundPosition', '-' + steps[index] + 'px 0px');
        setTimeout(arguments.callee, 50);
    }, 25);

}); 
```

# mysql - 如何在 SQL 中正确使用临时表

> ID：13777935
> 
> 赞同：0
> 
> 时间：2012-12-08T13:32:37.953
> 
> 标签：mysql, sql

我试图使用临时表来简化我的查询，但我收到一条错误消息。这是我的查询：

```
SELECT E.ID, E.name
INTO #TmpEmplyee
FROM Employee E, Outsourcing O, Student S
WHERE E.ID NOT IN (SELECT ID FROM Student UNION SELECT ID FROM Outsourcing)

SELECT R.name, I.startDate, T.name
FROM Role R, Inn I, #TmpEmplyee T
WHERE I.name = R.name AND I.ID = T.id 
```

错误是：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM Employee E, Outsourcing O, Student S WHERE E.ID NOT IN (SELECT ID FROM Stud' at line 3 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:47:54.273

在 mysql 中，您需要在查询之前创建临时表。您也不需要 FROM 中的 Outsourcing O, Student S，因为您没有从中选择：

```
INSERT INTO #TmpEmplyee
SELECT E.ID, E.name
FROM Employee E
WHERE E.ID NOT IN (SELECT ID FROM Student UNION SELECT ID FROM Outsourcing) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:48:47.150

试试这个，

```
SELECT R.name, I.startDate, T.name
FROM    Role R 
        INNER JOIN Inn I
            ON I.name = R.name
        INNER JOIN
        (
            SELECT E.ID, E.name
            -- remember that the join below produces CROSS JOIN
            FROM Employee E, Outsourcing O, Student S
            WHERE E.ID NOT IN ( SELECT ID FROM Student 
                                UNION 
                                SELECT ID FROM Outsourcing)
        ) T ON I.ID = T.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T15:48:02.160

要从选择创建临时表，您应该使用此语法

```
CREATE TEMPORARY TABLE mytemptable 
SELECT Field1, Field2 
FROM mytable; 
```

# java - java属性变化监听器

> ID：13777936
> 
> 赞同：4
> 
> 时间：2012-12-08T13:32:41.153
> 
> 标签：java, listener, propertychangelistener

我需要处理 2 个类之间的更改交互。

```
public class HeadClass {

private Subclass sub;

public void refresh() {...}

}

public class Subclass{

ArrayList store;

public void add(T data)
store.add(data);
firePropertyChange(...);
} 
```

每当调用子类中的方法“add”时，就应该调用 HeadClass 中的方法“refresh”！但是我应该在哪个类中实现这一行：

```
private PropertyChangeSupport changes = new PropertyChangeSupport(/*WHAT SHOULD BE HERE?*/); 
```

如果我在 HeadClass 中实现它，我可以做出这样的反应：

```
changes.addPropertyChangeListener(new PropertyChangeListener() {
            @Override
            public void propertyChange(PropertyChangeEvent event) {
                refresh();
            }
        }); 
```

但是，如果我无法访问 propertyChangeSupport “更改”，我应该如何从子类中触发 propertyChangeEvents？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:35:29.620

SubClass 获取PropertyChangeSupport，以及添加和删除PropertyChangeListener 的方法。您将传入`this`子类的 PropertyChangeSupport 构造函数。

```
public class Subclass{
  private PropertyChangeSupport propChangeSupport = 
       new PropertyChangeSupport(this);
  private ArrayList store;

  public void addPropertyChangeListener(PropertyChangeListener listener) {
    propChangeSupport.addPropertyChangeListener(listener);
  }

  public void removePropertyChangeListener(PropertyChangeListener listener) {
    propChangeSupport.removePropertyChangeListener(listener);
  }

  public void add(T data)
    store.add(data);
    propChangeSupport.firePropertyChange(...);
  }

} 
```

关键始终是哪个类需要听取其状态？既然是子类，那么它需要持有属性更改支持。进行侦听的类是将侦听器添加到支持中的类。

# apache-flex - 我可以在自定义组件中禁用 CHANGE 事件吗？

> ID：13777937
> 
> 赞同：0
> 
> 时间：2012-12-08T13:32:52.720
> 
> 标签：apache-flex, events, flash-builder, mxml

我有一个自定义 MXML 组件，它的更改事件声明为：

```
<mx:Metadata>
   [Event(name="change", type="flash.events.Event")]
</mx:Metadata> 
```

问题是，每当我更改组件内的任何内容（包括简单的 var）时，都会调度此事件。有时我希望能够在不调度更改事件的情况下更改组件中 var 的值。有没有一种简单的方法可以禁用更改事件，然后在我进行了我想要的更改后重新启用它？

我尝试使用 removeEventListener("change") 但似乎我只能对添加了事件侦听器的函数执行此操作。removeEventListener(Event.CHANGE) 也一样。

当然，必须有一种简单的方法来禁用 mx:Metadata 中声明的事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:11:15.430

是的，您可以使用一些有关事件的方法。因此，尽管该事件仍被分派，但这使您可以完全控制它发生的事情。

```
// first set the useCapture flag to true
// this tell flex that onChange gets the event before it starts bubbling
myCustomComponentThatDispatchesALotOfChangeEvents.addEventListener(Event.CHANGE, onChange, true);

private function onChange(event:Event):void{
    // here is the method you want
    // this stops the event from bubbling and lets you handle
    // all functionality in this listener only
    event.stopImmediatePropogation();
    // now look at what happened and see if you want to 
    // do anything else based on what actually changed
} 
```

作为旁注，您还可以查看 Event.preventDefault() 取消事件默认行为

“改变”也是一种弹性的东西。如果您只想在一个特定场景中分派事件，请创建一个新的事件类，将事件子类化为 MyChangeEvent。当你做出改变...

```
dispatchEvent(new MyChangeEvent(MyChangeEvent.STUFF_CHANGED)) 
```

然后

```
myCustomComponentThatDispatchesALotOfChangeEvents.addEventListener(MyChangeEvent.STUFF_CHANGED, onChange); 
```

# android - 根据用户偏好加载资源

> ID：13777939
> 
> 赞同：1
> 
> 时间：2012-12-08T13:33:06.690
> 
> 标签：android, string, localization, resources, runtime

我想做一个支持英语和瑞典语的安卓应用。我已经了解了本地化概念。但是我习惯有两个按钮，点击英文按钮应该根据英文加载字符串，点击瑞典语按钮应该加载瑞典语字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:43:33.687

Sv=Swedish... en=English... 在 languageToLoad 中输入您的语言代码：

```
 String languageToLoad  = "Sv"; // your language
    Locale locale = new Locale(languageToLoad); 
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config, 
    getBaseContext().getResources().getDisplayMetrics());
    this.setContentView(R.layout.main); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:58:23.417

声明两个按钮，一个用于英语，另一个用于瑞典语。你的代码 for`english en`和 for`swedish sv`然后你就使用了[Localization](http://developer.android.com/guide/topics/resources/localization.html)，这样..

```
 Locale myLocale = new Locale(lang);
            Resources res = getResources();
            DisplayMetrics dm = res.getDisplayMetrics();
            Configuration conf = res.getConfiguration();
            conf.locale = myLocale;
            res.updateConfiguration(conf, dm); 
```

检查这个简单的[例子](http://android.programmerguru.com/android-localization-at-runtime/)来实现你的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T15:17:41.430

我的回答与其他人相似，但我添加了一些可能很重要的额外内容

警告

我读过的所有内容都表明，让您的应用更改语言不是一个好主意，因为 Android 框架不支持它，并且可能会导致问题。

话虽如此，我已经在我的应用程序中完成了它，虽然它有点痛苦，但它似乎到目前为止还有效。如果你想这样做，我就是这样做的。您需要为每种语言创建一个单独的 strings.xml 文件。values 文件夹中的 strings.xml 作为默认值，然后可能是一个 strings.xml ，例如西班牙语字符串的 values-es 文件夹。我使用以下代码根据用户选择的单选按钮更改配置设置

`

```
final Configuration LANG_CONFIG = ChooseLocale.this.getResources().getConfiguration();
                    Locale newLocale = new Locale("English");
                    curLang = ChooseLocale.this.getLanguage();
                    if ((curLang.equals("English")) || (curLang.equalsIgnoreCase("Ingles")))
                    {
                        newLocale = new Locale("en_US");
                    }
                    else
                    {
                        newLocale = new Locale("es");
                    }
                    Toast.makeText(getApplicationContext(), newLangToast + " " + curLang , Toast.LENGTH_SHORT).show();
                    Configuration config = getBaseContext().getResources().getConfiguration();
                    Locale.setDefault(newLocale);
                    config.locale = newLocale;
                    getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());

                    SharedPreferences.Editor editor = langPref.edit();
                    editor.putString(LANG_PREF, curLang);
                    editor.commit();
` 
```

这条线是更新配置最重要的

```
getBaseContext().getResources().updateConfiguration(config,getBaseContext().getResources().getDisplayMetrics()); 
```

我从我的 getLanguage() 函数中获取本地信息，可以根据需要进行处理。我还必须添加

`@Override public void onConfigurationChanged(Configuration newConfig) { newConfig = Globals.getUserLanguage(this); super.onConfigurationChanged(newConfig);`到每个允许方向更改的活动，并将其添加到我的每个活动的 onCreate()

```
final SharedPreferences langPref = getSharedPreferences (LANG_PREF, 0); if (Globals.langConfig != null) this.onConfigurationChanged(Globals.langConfig); 
```

我还添加`android:configChanges="orientation|locale"`到清单中允许改变方向的每个活动。我将用户的语言偏好存储在可以在网站或应用程序内更改的数据库中。希望这可以帮助。

# mysql - 在 1 个查询中：2 个结果，使用 2 个条件

> ID：13777940
> 
> 赞同：2
> 
> 时间：2012-12-08T13:33:15.597
> 
> 标签：mysql, sql

我有列类型（0 或 1）、数量（int）的表

我需要查询返回 2 个参数的内容：类型 = 1 的总金额和类型 = 0 的总金额

2个查询：

`SELECT SUM(amount) AS income FROM table WHERE type = 0;`

`SELECT SUM(amount) AS expense FROM table WHERE type = 1;`

但是我可以只使用 1 个查询返回这些参数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:35:16.560

```
SELECT SUM(amount), IF(type=0, 'income', 'expense') AS type
FROM table
GROUP BY type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:36:58.217

```
SELECT sum(case when type = 0 
           then amount
           else 0 
           end) AS income,
       sum(case when type = 1 
           then amount
           else 0
           end) AS expense
FROM table 
```

## [演示](http://sqlfiddle.com/#!2/d7b0d/7)

# entity-framework - 以多层架构和存储库模式在 EF 中创建动态查询

> ID：13777952
> 
> 赞同：1
> 
> 时间：2012-12-08T13:35:34.560
> 
> 标签：entity-framework, repository-pattern, lambda

我想创建动态 linq 查询或动态 linq 或 lambda 表达式。例如，我正在使用[这篇文章](http://huyrua.wordpress.com/2011/04/13/entity-framework-4-poco-repository-and-specification-pattern-upgraded-to-ef-4-1/) ，我想告诉存储库获取产品，它们的名称以“计算机”开头，并且（有时或）它们的价格大于 10 美元。我想使用 lambda 表达式或表达式树，我是这个主题的初学者。在顶级文章和 BLL 层中不存在任何 linq 查询。他使用 lambda 表达式将值传递到存储库。请告诉我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:50:15.087

您的应用程序可以像这样填写数据：

```
var productName = "computer";
var minPrice = 10;

var products = _productRepository.Find(p => p.Name == productName && p.Price > minPrice); 
```

# database - perl 数据库数据传输、csv、tsv

> ID：13777958
> 
> 赞同：2
> 
> 时间：2012-12-08T13:36:31.893
> 
> 标签：database, perl, csv, tsv

我正在为我的一个客户在 perl 中编写小脚本，该脚本将从数据库中提取某些数据并通过附件将包含此数据的电子邮件发送给客户。脚本本身不是问题，问题是文件。我认为标准的 .csv 文件会很好，并且脚本正在做它应该做的事情而没有任何问题，但是客户端处理数据的进一步软件需要没有任何分隔符（如双引号）的 .tsv 文件。问题是数据库数据包含他们需要的特殊字符，例如带有换行符和双引号的文本。一旦脚本运行它会创建 .tsv 但特殊字符会弄乱它，因此需要以某种方式对其进行转义，不幸的是我不能像在 .csv 文件中那样使用双引号。有没有更好的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:17:03.577

使用配置为使用制表符作为分隔符的[Text::CSV ：](https://metacpan.org/module/Text%3a%3aCSV)

```
#!/usr/bin/env perl
use strict;
use warnings qw(all);
use Text::CSV;

my $tsv = Text::CSV->new({
    #quote_char      => undef,
    #escape_char     => undef,
    sep_char        => "\t",
    eol             => "\n",
    quote_space     => 0,
    quote_null      => 0,
});

my @line = ("column1\t", 12345, scalar localtime);
$tsv->print(\*STDOUT, \@line); 
```

# iphone - 使整个细胞活跃和不活跃

> ID：13777963
> 
> 赞同：0
> 
> 时间：2012-12-08T13:37:19.973
> 
> 标签：iphone, objective-c, ios

我正在使用带有一些单元格的 UITableView，每个单元格都包含按钮（3）标签（2）和 UIScrollview。

现在，当视图加载时，所有单元格都处于非活动状态。当我当时将任何东西拖到表格单元格上时，只有那个特定的单元格必须激活。

我们如何实现这一点。

任何人都可以提供帮助或建议。

提前致谢。

# javascript - Backbone 内存泄漏

> ID：13777964
> 
> 赞同：1
> 
> 时间：2012-12-08T13:37:23.363
> 
> 标签：javascript, memory-leaks

我有一个带有 Backbone 的小 js 应用程序，几乎每个部分都不会泄漏任何内存（缓存除外）。但 Chrome 开发工具显示，每次调用 js 堆上的一页泄漏约 0.2 MB。这会导致任何浏览器出现问题，还是有必要消除这么小的泄漏？

# java - 从文件读取并在 textarea java 中显示

> ID：13777967
> 
> 赞同：2
> 
> 时间：2012-12-08T13:37:55.840
> 
> 标签：java, swing, user-interface, file-io, jtextarea

我有以下代码从测试文件中读取名称，效果很好

```
public class Names {

    Scanner scan;
    static String Firstname;
    static String Surname;
    static String Fullname;

    public void OpenFile()
    {
        try
        {
            scan = new Scanner(new File("test.txt"));
            System.out.println("File found!");
        }

        catch(Exception e)
        {
            System.out.println("File not found");
        }
    }

    public void ReadFile()
    {
        while(scan.hasNext())
        {
            Firstname = scan.next();
            Surname = scan.next();
            Fullname =  Firstname + " " + Surname;

            System.out.println(Fullname);
        }
    }

    public void CloseFile()
    {
        scan.close();
    }
} 
```

然后我有这个调用 Names 类的主类。除了只显示测试文件中的姓氏之外，它工作正常。

```
public class NameSwing implements ActionListener {

    private JTextArea tf = new JTextArea(20,20);
    private JFrame f = new JFrame("names");
    private JButton b = new JButton("view");

    static String fullName;

    public NameSwing(){
        f.add(new JLabel("Name"));
        tf.setEditable(true);
        f.add(tf);

        b.addActionListener(this);
        f.add(b);

        f.setLayout(new FlowLayout());
        f.setSize(300,100);
        f.setVisible(true);

    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource()==b)
        {
            tf.setText(fullName);
        }
    }       

    public static void main(String[] args) throws FileNotFoundException, IOException {
        NameSwing nameSwing = new NameSwing();

        Names t = new Names();
        t.OpenFile();
        t.ReadFile();
        t.CloseFile();

        fullName = Names.Fullname;   
    }

} 
```

这是测试文件的内容。

尼克哈里斯

奥利迪恩

艾玛萨蒙斯

亨利布莱克威尔

**如何让 textarea 显示来自读者的所有姓名，而不仅仅是姓氏？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:47:29.953

扔掉你的 Names 类，因为它不是很有帮助，并且过度使用静态字段对其不利。我认为最好的解决方案是：

*   创建一个包含您的文本文件的文件
*   用这个 File 创建一个 FileReader 对象
*   使用它来创建一个 BufferedReader 对象
*   调用 JTextArea 的`read(...)`方法传入 BufferedReader
*   你完成了。

即，在 actionPerformed 中：

```
BufferedRead buffReader = null;
try {
  File file = new File("test.txt");
  FileReader fileReader = new FileReader(file);
  buffReader = new BufferedReader(fileReader);
  tf.read(buffReader, "file.txt");
}  catch (WhateverExceptionsNeedToBeCaught e) {
  e.printStackTrace();
} finally {
  // close your BufferedReader
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:07:52.157

*   您无缘无故地使用了太多静态字段。如果您打算使您的类成为工厂类，请始终使用静态字段，这在这种情况下是不合适的。
*   你打破了封装的基本规则，通过为每个方法提供一个`public Access Specifier`，而不需要它。
*   除了调用`setSize()`，您可以简单地使用`pack()`，它可以以比您指定的任意值更好的方式确定 Container 的尺寸。
*   请阅读有关[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，因为在我看来，您在这方面的知识有点短。
*   请务必学习[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)。
*   此外，您可以简单地使用[StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)类来为您做这件事。看看你的修改后的代码。问任何超出你能力范围的问题，我很乐意提供帮助。

修改代码：

```
import java.io.*;
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class NameSwing implements ActionListener {

    private Names t;
    private JTextArea tf = new JTextArea(20,20);
    private JFrame f = new JFrame("names");
    private JButton b = new JButton("view");

    public NameSwing(){

        performFileRelatedTask();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));

        JScrollPane scroller = new JScrollPane();
        scroller.setBorder(BorderFactory.createLineBorder(Color.BLUE.darker(), 5));

        JPanel centerPanel = new JPanel();
        centerPanel.setLayout(new BorderLayout(5, 5));
        centerPanel.add(new JLabel("Name", JLabel.CENTER), BorderLayout.PAGE_START);        
        tf.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        tf.setEditable(true);
        centerPanel.add(tf, BorderLayout.CENTER);
        scroller.setViewportView(centerPanel);

        JPanel footerPanel = new JPanel();
        b.addActionListener(this);
        footerPanel.add(b);

        contentPane.add(scroller, BorderLayout.CENTER);
        contentPane.add(footerPanel, BorderLayout.PAGE_END);

        f.setContentPane(contentPane);
        f.pack();
        f.setLocationByPlatform(true);
        f.setVisible(true);
    }

    private void performFileRelatedTask()
    {
        t = new Names();
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource()==b)
        {
            tf.setText(t.getFullNames().toString());
        }
    }       

    public static void main(String[] args) throws FileNotFoundException, IOException {

        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new NameSwing();
            }
        });                
    }

}

class Names {

    private Scanner scan;
    private String firstname;
    private String surname;
    private StringBuilder fullnames;

    public Names()
    {
        fullnames = new StringBuilder();
        openFile();
        readFile();
        closeFile();
    }

    public StringBuilder getFullNames()
    {
        return fullnames;
    }

    private void openFile()
    {
        try
        {
            scan = new Scanner(new File("test.txt"));
            System.out.println("File found!");
        }

        catch(Exception e)
        {
            System.out.println("File not found");
        }
    }

    private void readFile()
    {
        while(scan.hasNext())
        {
            firstname = scan.next();
            surname = scan.next();
            fullnames.append(firstname + " " + surname + "\n");
        }
    }

    private void closeFile()
    {
        scan.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T13:56:33.343

问题出在一线

`Fullname = Firstname + " " + Surname;`.

做了

`Fullname += Firstname + " " + Surname; + "\n"`

你的问题解决了:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T13:51:05.260

在这里你需要改变

```
 while(scan.hasNext())
        {
            Firstname = scan.next();
            Surname = scan.next();
            //Assigning each time instead of append
            Fullname =  Firstname + " " + Surname;
        } 
```

这是完整的修复：

```
public class NameSwing implements ActionListener {

    private JTextArea textArea = new JTextArea(20, 20);
    private JFrame frame = new JFrame("Names");
    private JButton btnView = new JButton("View");
    private Scanner scanner;
    private String firstName;
    private String surName;
    private String fullName;

    public NameSwing() {
        frame.add(new JLabel("Name"));
        textArea.setEditable(true);
        frame.add(textArea);

        btnView.addActionListener(this);
        frame.add(btnView);

        frame.setLayout(new FlowLayout());
        frame.setSize(300, 100);
        frame.setVisible(true);

    }

    public void OpenFile() {
        try {
            scanner = new Scanner(new File("test.txt"));
            System.out.println("File found!");
        } catch (Exception e) {
            System.out.println("File not found");
        }
    }

    public void ReadFile() {
        while (scanner.hasNext()) {
            firstName = scanner.next();
            surName = scanner.next();
            // assign first time
            if( fullName == null ) {
                fullName = firstName + " " + surName;
            } else {
                fullName = fullName + "\n" + firstName + " " + surName;
            }

            System.out.println(fullName);
        }
    }

    public void CloseFile() {
        scanner.close();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == btnView) {
            textArea.setText(fullName);
        }
    }

    public static void main(String[] args) throws FileNotFoundException, IOException {
        NameSwing nameSwing = new NameSwing();
        nameSwing.OpenFile();
        nameSwing.ReadFile();
        nameSwing.CloseFile();
    }
} 
```

# latitude-longitude - CoreLocation - 纬度和经度数字实际代表什么

> ID：13777968
> 
> 赞同：0
> 
> 时间：2012-12-08T13:38:01.863
> 
> 标签：latitude-longitude, distance

我有 ：

+37.785834（纬度）-122.406417（经度）

LAT 正数表示赤道以北 LONG 负数表示 0 以西

到现在为止还挺好。

但是这个数字究竟代表什么？例如，假设我在 LAT 中添加了 0.000001，这实际上代表什么？例如，我向北移动了 1 米，或者....

如果我了解这些数字实际代表什么，那么我可以聪明地使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:25:51.030

经度和纬度以*度*为单位。纬度范围从-90°（南极）到+90°（北极）。经度范围从-180°到+180°。

# node.js - 为什么gridfs get不能仅通过文件名处理文件ID（ObjectId）

> ID：13777974
> 
> 赞同：5
> 
> 时间：2012-12-08T13:38:25.220
> 
> 标签：node.js, mongodb, gridfs

我正在使用 nodejs mongodb mongoose 和 gridfs。当我尝试通过它的 filname 获取文件时，如果我想通过 id 获取它，一切都很好，我得到错误：您要读取的文件不存在。我使用以下代码 console.log("res.pic_id : " + res.pic_id) 我得到了正确的 ObjectId。这是代码：

```
var GridFS = require('GridFS').GridFS;
var myFS = new GridFS('db');
var fs = require('fs')
var Profile = db.model('Profile');
Profile.findOne({'_id' : clientID},['_id', 'username','pic_id','pic_filename'],function(err, res){
    if (err) { 
        console.log("ERROR serching user info:  " + err);
        callback(JSON.stringify(JSONRes(false, err)));
    }
    else {
         if (res) {
        console.log("res.pic_id : " + res.pic_id);
        myFS.get(res.pic_id,function(err,data){
            if (err)
                console.log("ERROR "+err)
            else {
                callback(data);
            }})
        };
        }
        else {
        callback(JSON.stringify(JSONRes(false, err)));

        }
    }
}) 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T05:24:43.280

我有一个类似的问题。问题原来是我使用的是 ObjectID 的字符串表示，而不是真正的 ObjectID。而不是这个：

```
var gridStore = new GridStore(db, '51299e0881b8e10011000001', 'r'); 
```

我需要这样做：

```
var gridStore = new GridStore(db, new ObjectID('51299e0881b8e10011000001'), 'r'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T15:58:23.180

您必须将其存储为文件名或 object.id 作为主键。最好的方法是将它与 ObjectID 作为标识符一起存储，然后将文件名添加到元数据并使用它进行查询。

查看文档中的第三个示例（这是在本机驱动程序的情况下，位于猫鼬下）

[http://mongodb.github.com/node-mongodb-native/api-generated/gridstore.html#open](http://mongodb.github.com/node-mongodb-native/api-generated/gridstore.html#open)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-25T23:28:52.743

您可以使用 mongoose 创建一个 Mongodb 对象：

```
const mongoose = require('mongoose');

const fileId = new mongoose.mongo.ObjectId(req.params.id);` 
```

现在您可以使用 gridfs 和 fileID 获取文件并执行任何其他操作，例如：

```
let gfs = Grid(mongoose.createConnection(mongoURI), mongoose.mongo);
app.get('URI', function(req, res){  //...

    gfs.files.findOne({_id: fileId}, //callback...

    )
}) 
```

这对我来说很好。

# php - 带有 MySQL 的 PHP 事件系统

> ID：13777979
> 
> 赞同：1
> 
> 时间：2012-12-08T13:38:54.630
> 
> 标签：php, database, design-patterns

我有一个用 PHP 编写的网站，用户可以在其中上传图片、发送好友请求、发布消息。

该网站建立在 CodeIgniter 框架之上。

我想拥有所有这些事件的“日志”。例如，我想显示所有朋友的最新活动。像 facebook，X 喜欢 Y 图片或 Z 发布了一条新消息。

我的数据库结构类似于：

事件表：

`ID | user_id | event_type | meta_field | date`

我有更多的表格，如友谊、图像等。

`meta_filed`和,将`event_type`指定另一个表中的数据。例如，对于下一行

事件表：

`1, 4, 3, 12, 2012-12-08`

3 将指定事件是友谊请求，而 12 将是友谊表中的 ID 12，其中我有有关此友谊请求的所有详细信息。

问题是，这是设计数据库的好方法吗？例如，我如何对朋友的所有最新事件进行最佳排序，假设我的友谊表中填充了数据。您建议我使用哪些技术进行缓存或其他可以提高我的性能和代码质量的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:48:59.250

这是非常好的方法。但是，当您的数据库变得更大时，您必须索引字段“meta_field”以提高性能。使用 phpMyAdmin 可以轻松地对该字段进行索引。

# xpages - XPages 使用自定义属性计算自定义控件

> ID：13777982
> 
> 赞同：0
> 
> 时间：2012-12-08T13:39:33.003
> 
> 标签：xpages

我发现这篇博客文章定义了如何计算您的自定义控件，这是一个很好的解决方案，但是如何使用包含标记传递此自定义控件的自定义属性：

[http://www.jmackey.net/groupwareinc/johnblog/johnblog.nsf/d6plinks/XPages-How-to-Compute-a-Custom-Control-at-Runtime](http://www.jmackey.net/groupwareinc/johnblog/johnblog.nsf/d6plinks/XPages-How-to-Compute-a-Custom-Control-at-Runtime)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:00:56.440

现在在 ext 中有一个动态视图自定义控件。图书馆。这对你来说可能是一个很好的解决方案。

# jquery - 使用 jQuery 动态查找本地存储密钥

> ID：13777985
> 
> 赞同：1
> 
> 时间：2012-12-08T13:39:41.287
> 
> 标签：jquery, local-storage, dry

我正在尝试找出一种方法来干燥以下代码，该代码查看是否存在某些本地存储密钥，如果存在则执行某些操作。它可能有很多键，但它们都将被编号以与相关元素 id 结合，即 key: item1 > #item1 等。

```
if (localStorage.getItem('item1')) {
  $('#item1').addClass('active');
}

if (localStorage.getItem('item2')) {
  $('#item2').addClass('active');
}

etc. 
```

我最近学会了用元素 ID 做类似的事情，所以我想知道是否/如何应用这种类型的逻辑来查找本地存储密钥而不是元素 ID？

```
$('*[id^=btn-item]').click(function () {
  var id = $(this).attr('id').slice(-1); 
  $('#item'+id).addClass('active');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:42:17.317

请注意，切片代码仅在您的 id 小于 10 时才有效。

对于更大的 id，我会建议`$(this).attr('id').slice("btn-item".length);`which get `324`from `"btm-item324"`。

话虽这么说，为什么不这样做呢？

```
$('*[id^=btn-item]').click(function () {
  var id = $(this).attr('id').slice("btn-item".length); 
  if (localStorage.getItem('item'+id)) {
     $('#item'+id).addClass('active');
  }
} 
```

如果您不想在按钮操作上执行此操作，您可以像这样迭代可能的键：

```
for (var i=0; i<100; i++) {
   if (localStorage['item'+i]) $('#item'+i).addClass('active');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:13:59.617

要（正确）迭代可能的键`localStorage`而不事先知道最大可能的键数是多少：

```
var re = /^item\d+$/;
for (var i = 0, n = localStorage.length; i < n; ++i) {
    var key = localStorage.key(i);
    if (re.test(key)) {
       $('#' + key).addClass('active');
    }
} 
```

或者，反转逻辑并首先查看 DOM：

```
$('[id^="item"]').addClass(function() {
    return localStorage.getItem(this.id) ? "active" : "";
}); 
```

# python - 递归函数中的记忆

> ID：13777986
> 
> 赞同：3
> 
> 时间：2012-12-08T13:39:46.033
> 
> 标签：python, dictionary, memoization

我遇到了一个奇怪的现象：

我写了一个代码来计算“加泰罗尼亚数字”，它有效，但现在我试图通过使用记忆字典（称为双加泰罗尼亚语）来改善运行时间：

```
dicatalan = {} 
def catalan(n):
    if n == 0:
        return 1
    else: 
        res = 0
        if n not in dicatalan:
            for i in range(n):
                res += catalan(i) * catalan(n - i - 1)
            dicatalan[n] = res
            print ("dicatalan is", dicatalan)
    return dicatalan[n] 
```

这是捕获 - 在 eclipse - Pydev -`n=1`代码运行中途并按预期打印： "dicatalan is 1:1" 在神秘停止之前，但在 IDLE 中相同的代码打印 "dicatalan is 0:1" 。

无论如何，在尝试打印以后的双加泰罗尼亚语时，我收到了 {}。

怎么可能？代码中发生了什么？运行调试器被证明是徒劳的。

有什么想法可以让 dict 工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:44:40.210

对我来说也很好，我冒昧地简化了你的代码：

```
def catalan(n, memo={0: 1}):
  if n not in memo:
    memo[n] = sum((catalan(i) * catalan(n - i - 1)) for i in range(n))
  return memo[n] 
```

# c++ - C++ 错误处理 - 使用 std::pair 或 std::tuple 返回错误代码和函数返回的缺点

> ID：13777987
> 
> 赞同：9
> 
> 时间：2012-12-08T13:40:08.770
> 
> 标签：c++, error-handling, tuples, return-value, std-pair

在不讨论一般异常与错误代码的情况下，您认为使用`std::pair`或`std:tuple`返回多个值的缺点是什么，即函数的返回值和错误/成功代码，类似于有多少[Go 开发人员显然在进行错误处理](http://www.drdobbs.com/open-source/why-not-go/240005062)？

这种方法显然具有不必为函数返回值或错误代码使用参数的优点（取决于您喜欢哪种方式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:56:21.570

这个“成语”很好，因为类型和成功指示符都是函数的返回值。失败可能不是例外，所以例外有时是不合适的。

然而，缺点是您必须拆分两种返回类型。这可能很难看；使用`std::tie`帮助，但您无法从多个返回中构建。

```
bool success;
std::string value;
std::tie(success, value)=try_my_func(); 
```

这是相当冗长的。

其次，如果其中一种类型是“可选的”，取决于元组中另一个元素的值，那么它仍然必须被构造，这对于某些类型来说仍然是非常浪费的。

如果您经常使用该成语，请考虑改用`boost::optional`type 之类的东西。这可能比 go 的多次返回更接近 haskel。

### 参考

[http://www.boost.org/doc/libs/1_52_0/libs/optional/doc/html/index.html](http://www.boost.org/doc/libs/1_52_0/libs/optional/doc/html/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T14:14:22.243

为此，在大多数情况下，我使用自己的包装器类型，它引入了一些语法糖。让我们看一个例子：

```
template <class T>
struct Result
{
public:
    enum Status {
        Success,
        Error
    };

    // Feel free to change the default behavior... I use implicit
    // constructors for type T for syntactic sugar in return statements.
    Result(T resultValue) : s(Success), v(resultValue) {}
    explicit Result(Status status, std::string errMsg = std::string()) : s(status), v(), errMsg(errMsg) {}
    Result() : s(Error), v() {} // Error without message

    // Explicit error with message
    static Result error(std::string errMsg) { return Result(Error, errMsg); }

    // Implicit conversion to type T
    operator T() const { return v; }
    // Explicit conversion to type T
    T value() const { return v; }

    Status status() const { return s; }
    bool isError() const { return s == Error; }
    bool isSuccessful() const { return s == Success; }
    std::string errorMessage() const { return errMsg; }

private:
    T v;
    Status s;

    // if you want to provide error messages:
    std::string errMsg;
}; 
```

然后，只需在可以返回错误的方法中使用此类作为返回值：

```
Result<int> fac(int n) {
    if(n < 0)
        return Result<int>::error("n has to be greater or equal zero!");
    if(n == 0)
        return 1;
    if(n > 0)
        return n * fac(n-1);  // gets automatically converted to int
} 
```

当然，阶乘函数的这种实现很糟糕，但演示了转换，而不用担心我们使用的错误扩展返回类型。

示例用法：

```
int main() {
    for(int i = -3; i < 4; ++i)
    {
        Result<int> r = fac(i);
        std::cout << i << " | ";
        std::cout << (r.isSuccessful() ? "ok" : "error") << " | ";
        if(r.isSuccessful())
            std::cout << r.value();
        else
            std::cout << r.errorMessage();
        std::cout << std::endl;
    }
} 
```

输出：

```
-3 | error | n has to be greater or equal zero!
-2 | error | n has to be greater or equal zero!
-1 | error | n has to be greater or equal zero!
0 | ok | 1
1 | ok | 1
2 | ok | 2
3 | ok | 6 
```

自定义类型的一大优点是您可以插入一些控件，以确保客户端代码**始终在访问实际值之前检查错误，**并且仅在成功时访问该值，如果不成功则访问错误消息。为此，我们可以通过以下方式扩展类：

```
struct Result
{
public:
    // in all constructors, add:
    Result(...) : ..., checked(false) {...}

    // in the error checker methods, add: (and drop const-ness)
    bool is...() { checked = true; return ... }

    // rewrite the value conversion as follows:
    operator T() const { std::assert(checked && isSuccessful()); return v; }
    T value() const    { std::assert(checked && isSuccessful()); return v; }

    // rewrite the errorMessage-getter as follows:
    std::string errorMessage() const { std::assert(checked && isError()); return errMsg; }

private:
    ...
    bool checked;
}; 
```

您可能希望根据构建模式（调试构建/发布构建）进行类定义。

请注意，示例必须重写如下：

```
Result<int> fac(int n) {
    if(n < 0)
        return Result<int>::error("n has to be greater or equal zero!");
    if(n == 0)
        return 1;
    if(n > 0) {
        Result<int> r = fac(n - 1);
        if(r.isError()) return r;  // propagate error (similar to exceptions)
        return n * r;              // r gets automatically converted to int
    }
} 
```

上面的主代码仍然有效，因为它在访问值/错误消息之前已经进行了错误检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T15:27:29.190

> “你认为使用 std::pair 或 std:tuple 返回多个值的缺点是什么，即函数的返回值和错误/成功代码”

这种简单的（C 级）故障处理方法的主要缺点是

*   失去安全。

即还有*更多可能出错*的地方，例如访问不确定的结果值。或者只是在函数没有产生有意义的返回值时使用返回值。

旧的 Barton & Nackman**`Fallow`**类通过限制对结果值的访问解决了这个安全问题。本质上，调用代码必须在使用它之前检查是否存在*结果* 值，并且使用逻辑上不存在的结果值会导致异常或终止。这**`boost::optional`**门课做的也差不多。

如果您不想依赖 Boost，那么`Optional`对于 POD 结果类型实现一个类是微不足道的，并且以可能的低效率（动态分配）为代价，您可以只使用 a`std::vector`来携带非 POD 可能的结果。

挑战在于保持调用代码的清晰性，这是练习的重点……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T14:46:22.140

它比常规错误代码更好，因为您不必在没有参数的情况下浪费生命。但它仍然保留了所有非常严重的缺点。

真的，这只是一个微小的变化，它仍然是错误代码 - 没有显着的好处。

# installation - 使用 NSIS 创建普通安装和便携式安装

> ID：13777988
> 
> 赞同：2
> 
> 时间：2012-12-08T13:40:32.307
> 
> 标签：installation, nsis, portable-applications

我们目前使用 NSIS 打包适用于 Windows 的[Bitfighter](http://bitfighter.org)，并且（有时）手动创建一个单独的存档以可移植地运行游戏。我希望简化流程，使构建便携式版本更容易，从而鼓励我们定期进行。

我们创建便携式安装的当前方式是正常安装游戏（使用 NSIS 构建的安装程序），然后压缩安装文件夹，并添加一个名为“便携式”的标记文件。我想绕过安装步骤，直接构建可移植存档。

将它与 NSIS 安装程序结合的主要优点是它将简化构建过程，并允许我们维护要包含的文件的单个列表。

有没有人做过这样的事情？

* * *

最后，我使用了已接受答案的变体，并使用 NSIS !ifdef 指令使用相同的代码库构建两个安装程序。通过指定 /DPORTALBE，我将获得一个便携式安装程序。

该代码可以在我们的[Google 代码存储库](https://code.google.com/p/bitfighter/source/browse/build/windows/installer/Bitfighter_installer.nsi)中找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T18:41:11.090

为什么不在一个安装程序中结合正常模式和便携模式？

```
!define NAME "foobarbaz"
!define UNINSTKEY "${NAME}" ; Using a GUID here is not a bad idea
!define DEFAULTNORMALDESTINATON "$ProgramFiles\${NAME}"
!define DEFAULTPORTABLEDESTINATON "$Desktop\${NAME}"
Name "${NAME}"
Outfile "${NAME} setup.exe"
RequestExecutionlevel highest
SetCompressor LZMA

Var NormalDestDir
Var PortableDestDir
Var PortableMode

!include LogicLib.nsh
!include FileFunc.nsh
!include MUI2.nsh

!insertmacro MUI_PAGE_WELCOME
Page Custom PortableModePageCreate PortableModePageLeave
!insertmacro MUI_PAGE_DIRECTORY
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_LANGUAGE English

Function .onInit
StrCpy $NormalDestDir "${DEFAULTNORMALDESTINATON}"
StrCpy $PortableDestDir "${DEFAULTPORTABLEDESTINATON}"

${GetParameters} $9

ClearErrors
${GetOptions} $9 "/?" $8
${IfNot} ${Errors}
    MessageBox MB_ICONINFORMATION|MB_SETFOREGROUND "\
      /PORTABLE : Extract application to USB drive etc$\n\
      /S : Silent install$\n\
      /D=%directory% : Specify destination directory$\n"
    Quit
${EndIf}

ClearErrors
${GetOptions} $9 "/PORTABLE" $8
${IfNot} ${Errors}
    StrCpy $PortableMode 1
    StrCpy $0 $PortableDestDir
${Else}
    StrCpy $PortableMode 0
    StrCpy $0 $NormalDestDir
    ${If} ${Silent}
        Call RequireAdmin
    ${EndIf}
${EndIf}

${If} $InstDir == ""
    ; User did not use /D to specify a directory, 
    ; we need to set a default based on the install mode
    StrCpy $InstDir $0
${EndIf}
Call SetModeDestinationFromInstdir
FunctionEnd

Function RequireAdmin
UserInfo::GetAccountType
Pop $8
${If} $8 != "admin"
    MessageBox MB_ICONSTOP "You need administrator rights to install ${NAME}"
    SetErrorLevel 740 ;ERROR_ELEVATION_REQUIRED
    Abort
${EndIf}
FunctionEnd

Function SetModeDestinationFromInstdir
${If} $PortableMode = 0
    StrCpy $NormalDestDir $InstDir
${Else}
    StrCpy $PortableDestDir $InstDir
${EndIf}
FunctionEnd

Function PortableModePageCreate
Call SetModeDestinationFromInstdir ; If the user clicks BACK on the directory page we will remember their mode specific directory
!insertmacro MUI_HEADER_TEXT "Install Mode" "Choose how you want to install ${NAME}."
nsDialogs::Create 1018
Pop $0
${NSD_CreateLabel} 0 10u 100% 24u "Select install mode:"
Pop $0
${NSD_CreateRadioButton} 30u 50u -30u 8u "Normal install"
Pop $1
${NSD_CreateRadioButton} 30u 70u -30u 8u "Portable"
Pop $2
${If} $PortableMode = 0
    SendMessage $1 ${BM_SETCHECK} ${BST_CHECKED} 0
${Else}
    SendMessage $2 ${BM_SETCHECK} ${BST_CHECKED} 0
${EndIf}
nsDialogs::Show
FunctionEnd

Function PortableModePageLeave
${NSD_GetState} $1 $0
${If} $0 <> ${BST_UNCHECKED}
    StrCpy $PortableMode 0
    StrCpy $InstDir $NormalDestDir
    Call RequireAdmin
${Else}
    StrCpy $PortableMode 1
    StrCpy $InstDir $PortableDestDir
${EndIf}
FunctionEnd

Section
SetOutPath "$InstDir"
;File "source\myapp.exe"

${If} $PortableMode = 0
    WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${UNINSTKEY}" "DisplayName" "${NAME}"
    WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${UNINSTKEY}" "UninstallString" '"$INSTDIR\uninstall.exe"'
    WriteUninstaller "$INSTDIR\uninstall.exe"
${Else}
    ; Create the file the application uses to detect portable mode
    FileOpen $0 "$INSTDIR\portable.dat" w
    FileWrite $0 "PORTABLE"
    FileClose $0
${EndIf}
SectionEnd

Section Uninstall
DeleteRegKey HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${UNINSTKEY}"
Delete "$INSTDIR\uninstall.exe"
;Delete "$INSTDIR\myapp.exe"
RMDir "$InstDir"
SectionEnd 
```

或者一个不支持 GUI 的简单版本：

```
!include LogicLib.nsh
!include FileFunc.nsh
!include Sections.nsh

Section
SetOutPath "$InstDir"
;File "source\myapp.exe"
SectionEnd

Section "" SID_CREATEUNINSTALLER
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${UNINSTKEY}" "DisplayName" "${NAME}"
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${UNINSTKEY}" "UninstallString" '"$INSTDIR\uninstall.exe"'
WriteUninstaller "$INSTDIR\uninstall.exe"
SectionEnd

Section Uninstall
;...
SectionEnd

Function .onInit
${GetParameters} $9
ClearErrors
${GetOptions} $9 "/PORTABLE" $8
${IfNot} ${Errors}
    SetSilent silent
    ${If} $InstDir == ""
        StrCpy $InstDir "$Desktop\${NAME}"
    ${EndIf}
    !insertmacro UnselectSection ${SID_CREATEUNINSTALLER}
    SetOutPath $InstDir
    WriteIniStr "$InstDir\Config.ini" "Install" "Portable" "yes" ; Mark as portable install
${EndIf}
FunctionEnd 
```

如果您愿意，您可以创建一个可以生成 zip 文件的设置：`mysetup.exe /GENERATEPORTABLEPKG=c:\path\to\7z.exe`然后该设置将提取文件，用于`ExecWait`调用 7zip，然后清理并退出...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:08:41.237

注意：我发布了一个基于使用 7Zip 从安装程序中提取文件并构建可移植存档的解决方案。不幸的是，我发现无论出于何种原因，7Zip 都没有看到安装程序中的每个文件，因此它创建的 zip 文件丢失了一些文件。因为它不可靠（并且可能会巧妙地失败），所以我删除了代码。

# c++ - 错误 C2593：“操作员 >>”不明确

> ID：13777991
> 
> 赞同：0
> 
> 时间：2012-12-08T13:41:03.543
> 
> 标签：c++, visual-c++, compiler-errors

我在重载 >> 运算符时遇到了这个错误，我不知道为什么。

```
istream& operator>>(istream& stream, unsigned int in)
{
    stream >> in;
    //manyoperators
    if(in>10)
       in = -1;
    return stream;
} 
```

部分代码有错误：

```
unsigned int tmm;
    cin >> tmm; 
```

为什么？我没有其他的 >> 重载。它可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:47:21.323

您可以仅为自定义类而不是内置数据类型重载函数（在您的情况下`>>`为 operator ）。
C++ 标准库本身为内置数据类型提供重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:06:12.777

`std::istream`已`operator>>(unsigned int&)`成为会员。编译器无法选择是调用成员函数（定义在 中`<iostream>`）还是您编写的自由函数。

# c# - 混合模式 .NET 程序集是否具有更好的性能？

> ID：13777992
> 
> 赞同：3
> 
> 时间：2012-12-08T13:41:14.660
> 
> 标签：c#, .net, clr, mixed-mode

我对 .Net 编程非常陌生，大约 1 年。

几天前，我查看了几篇与混合模式组装相关的文章，出于好奇，我很难理解其中的很多内容。

1.  如果 P/Invoke 可以用 C#/VB.NET 轻松完成，为什么微软引入了混合模式程序集？

2.  混合模式程序集的执行速度是否比纯 .Net 程序集快？

由于 .Net 是 CLR（很像 VM），所以我最好的猜测是在混合模式下编译的程序集也将在 CLR 中，因此最终会降低性能。

请帮我解决我的困惑！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T16:47:39.547

混合模式程序集的主要用例是必须与*现有的*C 或 C++ 代码互操作。当然很常见。

它不是通过设计使代码更快。从托管代码过渡到本机代码执行需要付出一定的代价。它经过了高度优化，如果你做得对，那么你只需支付在垃圾收集器识别的堆栈上写入 cookie 的成本，这样它就可以避免通过非托管堆栈帧查找对象引用。成本，但少数 cpu 周期。但是当您需要翻译数据时，可能会产生额外的费用。一个字符串是典型的例子。或者固定一个托管对象，使其不能被收集器移动，一个数组是典型的例子。

但是，是的，您当然可以使用混合模式程序集来解决性能问题。如果您可以限制进行转换的次数，并且可以利用 C 或 C++ 编译器生成高度优化的代码的能力，那么您可能会领先。没有什么神奇的公式可以说你会，而且克服抖动肯定不是那么容易。它有一个非常有效的优化器，尽管它不能完全击败 C 编译器的优化器，因为它是在时间限制下运行的。您编写的代码的质量最重要。

始终首先使用分析器来消除任何故障，找到实际的热点并确保它值得尝试。

# java - 在 java 中调用时，一个类中的变量值在另一个类中被接收为 null

> ID：13777997
> 
> 赞同：-3
> 
> 时间：2012-12-08T13:41:29.243
> 
> 标签：java

我想将一个类中的字符串变量的值用于另一个类...

但是当我通过在被调用类的调用类中创建一个对象来这样做时，我得到的值为 null。

我尝试在网上搜索和堆栈溢出并经历了一些类似的答案，但他们的解决方案是针对这些问题的。所以我再问一次。

这是2个课程-

第一个是我想使用变量的类。类是 - 我想在另一个类中使用的 SelectedClass 变量 - SelectedClass（一个字符串）

第二类是 FEa。我想使用第一类的变量“SelectedClass”的值。

CLASS 1(SelectedClass)-

```
package com.attendance_trial.nirmik;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class SelectClass extends ListActivity 
{

public String classes2[] = {"FEa","FEb","SEa","SEb"};
String SelectedClass;

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    String SelectedClass = classes2[position];
    try
    {

        Class MyClass = Class.forName("com.attendance_trial.nirmik." + SelectedClass);
        Intent myintent = new Intent(SelectClass.this,MyClass);
        startActivity(myintent);

    }
    catch(ClassNotFoundException cnf)
    {
        cnf.printStackTrace();
    }

}

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    // TODO Auto-generated method stub
    setListAdapter(new ArrayAdapter<String>(SelectClass.this, android.R.layout.simple_list_item_1, classes2));
} 
```

}

2 级 (FEa) -

```
package com.attendance_trial.nirmik;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class FEa extends Activity implements View.OnClickListener
{

SelectClass sc = new SelectClass();

//Button b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,bSend;
Button bSend;
TextView tvDisp;
String acc="";

@Override
protected void onCreate(Bundle savedInstanceState)
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fea);
    initialise();

}

private void initialise()//initialise all buttons etc
{

    bSend = (Button) findViewById (R.id.BtnSendMsg);
    bSend.setOnClickListener(this);
    tvDisp=(TextView) findViewById (R.id.TxtViewDisplay);

}

public void onButtonClick(View v)
{
    // TODO Auto-generated method stub

        Button theButton = (Button)v;
        String chk = theButton.getText().toString();
        if(chk.contentEquals("1")||chk.contentEquals("2")||chk.contentEquals("3")||chk.contentEquals("4")||chk.contentEquals("5")
                ||chk.contentEquals("6")||chk.contentEquals("7")||chk.contentEquals("8")||chk.contentEquals("9"))
        {
        acc = acc + "0" + chk;
        }
        else
        {
            acc =  acc +chk;
        }
        tvDisp.setText("String Is:" + acc);

}//method end

@Override
public void onClick(View v2) 
{
    // TODO Auto-generated method stub
    int retid = v2.getId();
    if(retid == R.id.BtnSendMsg ) //send button clicked
    {

        String msg = sc.SelectedClass + "2210"+ acc;
                Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
                emailIntent.setType("plain/text");
                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, msg);
                startActivity(emailIntent);
    }

} 
```

}//主端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:00:22.680

你在做什么是完全错误的。

您不应该从扩展`Activity`. 又名你不应该这样做：`SelectClass sc = new SelectClass();`. 您必须使用以下命令告诉 Android 操作系统为您执行此操作：

```
Intent intent = new Intent(this, YourActivity.class);
startActivity(intent); 
```

现在如果你想从 SelectClass 向 FEa 发送一个字符串，你可以像这样发送它：

```
Intent intent = new Intent(this, YourActivity.class);
intent.putExtra(EXTRA_MESSAGE_KEY, yourString);
startActivity(intent); 
```

在您的第二个活动中，在 onCreate() 中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the string from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

} 
```

您应该查看[developer.android.com](http://developer.android.com)以了解如何在 Android 中编程。请记住，Android 编程不是 Java 编程。

如何从[这里](http://developer.android.com/training/basics/firstapp/starting-activity.html)的开发者网站开始一个新的活动。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T13:51:01.623

为什么不通过 using 传递值`return`？这样，您可以调用任何类中的任何函数并将值返回给任何其他类。

更多关于返回值或类的信息可以在[这里](http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html)找到。

# android - 为surfaceview设置渐变背景色

> ID：13777999
> 
> 赞同：0
> 
> 时间：2012-12-08T13:41:43.323
> 
> 标签：android, android-layout

目前，我的表面视图上有一个静态的纯蓝色背景色，我想知道一种方法来垂直获得从深蓝色到浅蓝色的蓝色渐变。目前我这样设置背景颜色

```
 canvas.drawRGB(15,03,175); 
```

任何提示或建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:41:38.960

以油漆的设置着色器的形式找到了我的答案，这目前很好用

```
 Paint gradPaint = new Paint();
         gradPaint.setShader(new LinearGradient(0,0,0,getHeight(),Color.BLUE,Color.CYAN,Shader.TileMode.CLAMP));
         canvas.drawPaint(gradPaint);
         //Where getHeight() is the height of the canvas 
```