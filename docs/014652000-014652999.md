# StackOverflow 问答 14652000-14652999

# sql - 是否可以向表中的一个字段添加多个外键

> ID：14652000
> 
> 赞同：2
> 
> 时间：2013-02-01T17:42:26.923
> 
> 标签：sql, sql-server, foreign-keys

我能意识到类似的事情吗？例如，如果其他字段值是'a'，外键应该是表a，如果值是'b'，它应该是表b的键？我知道这是不正常的，也不符合外键的想法，但是实际上有可能做一些事情来使这个方案成为现实吗？

更新 ：

我有这样的架构：

有产品。它们可以包含不同的附加字段，例如标准产品可以不包含附加字段，但“图片”可以包含“作者”等字段。真正的“标准产品”和“图片”可以在意识形态上有所不同，不仅仅是因为额外的领域。

有像“订单”这样的表格，应该包含指向产品和其他数据的链接。但是当我输入“产品ID”之类的字段时，它应该是数据，是标准产品ID，还是图片ID。

可以设计类似附加字段的表格，但会有另一个问题。我可以制作表（id，additional_field_name）和映射表（id，add_field_id，product_id，field_value），但是field_value可以是数字也可以是字符串，所以我认为这个想法不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:48:56.317

如前所述，不，你不能那样做。您需要有两个单独的列。此外，根据另一列的值来解释一列的值对我来说并不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:03:10.147

Per your comment & revised question:

Products

```
ID
Description
AdditionalFields_ID 
```

Additional Fields

```
AdditionalFields_ID
Author 
```

Then use a LEFT JOIN, so that your query only pulls additional fields *when they exist* (like when the product type is a picture).

```
SELECT *
FROM Products P LEFT JOIN AdditionalFields A ON P.AdditionalFields_ID = A.AdditionalFields_ID 
```

If you want a better answer than that, you're going to have to provide some real examples of your table structure & data in your question.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:54:39.820

对于外键约束，您需要使用单独的可空列，每个潜在的外键关系一个。

您可以将其与检查约束一起破解，但从性能的角度和一致性的角度来看，使用单独的列可能会更好。

# sql - DB2 查询以获取表中的下一个可用数字

> ID：14652003
> 
> 赞同：2
> 
> 时间：2013-02-01T17:42:37.630
> 
> 标签：sql, db2

我有一个包含几列的表，我想使用 DB2 查询来实现以下功能。比如说 USR 表有用户 ID 列和选项 ID 列

```
USER ID         OPTION ID
1               1
1               5
1               22
1               100    
1               999 
```

我想写一个查询，结果应该是按顺序排列的下一个可用数字。

因此，当第一次执行查询时，它应该将下一个可用选项 ID 作为 2 返回给我，因此用户将输入 #2，因此 DB 现在应该有

```
USER ID  OPTION ID
1         1  
1         2  
1         5  
1        22  
1        100      
1        999 
```

所以现在当查询将被执行时，它会向我显示可用的选项 ID 为 3。有人可以帮助获得优化的查询以获得正确的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:28:08.257

请注意，我认为`option_id`向用户公开是一个糟糕的想法，业务需求或否。像这样的代理 id 意味着对最终用户完全隐藏（“自然”键，如信用卡号码，显然必须暴露，但仍然不应该以*这种*方式指定）。
以下内容应该适用于任何版本的 DB2：

```
SELECT a.optionid + :nextIncrement as next_value                     
FROM Usr as a                          
LEFT JOIN Usr as b                
       ON b.userid = a.userid                 
          AND b.optionid = a.optionid + :nextIncrement        
WHERE a.userid = :userId      
      AND b.userid IS NULL               
ORDER BY a.optionid ASC
FETCH FIRST 1 ROW ONLY 
```

（针对我的 iSeries 实例上的本地表运行的语句，替换了主机变量）

同样，我*强烈*建议您**不要**使用它，并了解如何更改业务需求。

# php - Zend 快闪信使

> ID：14652007
> 
> 赞同：5
> 
> 时间：2013-02-01T17:42:43.890
> 
> 标签：php, zend-framework, flash-message

我有一个表单和提交按钮检查是真还是假。

如果是真的重定向到另一个页面。

如果它是错误的，请留在同一页面上并打印错误消息。

错误消息使用 Flash 信使打印出来。但是，在某些情况下，当提交为假时，它不会在第一次尝试中打印，它总是在第二次点击时打印出来。

我做错了什么吗？还有，有没有办法设置不同的闪光信使名称？因为，在我的其他有 flash messenger 的页面上，刷新页面时会打印出错误。

这是代码：

```
if(isset($_POST['submit'])) {
    // code to inputfields

    if(true) {
        //redirect to some page
    } else {
        // print the flash error on the same page
        $this->_helper->flashMessenger->addMessage(" This email is already taken");
        $this->view->messages = $this->_helper->flashMessenger->getMessages();
    }
} 
```

HTML：

```
<center>
            <div style="color:red">
            <?php if (count($this->messages)) : ?>
                <?php foreach ($this->messages as $message) : ?>
                <div id="field_name">
                <strong style="text-transform:capitalize;">Email </strong>
                    - <?php echo $this->escape($message); ?>
                </div>
                <?php endforeach; ?>
            <?php endif; ?>
            </div>
        </center> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T07:59:38.150

flashmessenger 确实设计用于某种重定向，因此您看到的任何消息都可能来自先前操作的执行。您当前的代码在第一个“帖子”期间不会闪烁任何消息。

如果您尝试以下操作，您可能会有一些运气：

```
public function init()
{
    //This will catch any messege set in any action in this controller and send
    //it to the view on the next request.
    if ($this->_helper->FlashMessenger->hasMessages()) {
        $this->view->messages = $this->_helper->FlashMessenger->getMessages();
    }
}

public function someAction()
{
    if(isset($_POST['submit'])) {
    // code to inputfields
        if(true) {
        //redirect to some page
        } else {
            // print the flash error on the same page
            $this->_helper->flashMessenger->addMessage(" This email is already taken");
            //will redirect back to original url. May help, may not
            $this->_redirect($this->getRequest()->getRequestUri());
        }
    }
} 
```

这是我编写的一个动作，它展示了您似乎正在尝试的内容。

```
public function updatetrackAction()
    {
        //get the page number
        $session = new Zend_Session_Namespace('page');
        $id = $this->getRequest()->getParam('id');
        //get the entity object
        $model = new Music_Model_Mapper_Track();
        $track = $model->findById($id);
        //get the form
        $form = new Admin_Form_Track();
        $form->setAction('/admin/music/updatetrack/');
        //test for 'post' 'valid' and update info
        if ($this->getRequest()->isPost()) {
            if ($form->isValid($this->getRequest()->getPost())) {
                $data = $form->getValues();

                $newTrack = new Music_Model_Track($data);

                $update = $model->saveTrack($newTrack);
                //add message
                $this->message->addMessage("Update of track '$update->title' complete!");
                //redirects back to the same page number the request came from
                $this->getHelper('Redirector')->gotoSimple('update', null, null, array('page' => $session->page));
            }
        } else {
            //if not post display current information
            //populate() only accepts an array - no objects -
            $form->populate($track->toArray());
            $this->view->form = $form;
        }
    } 
```

# sql - 查看通过 Linq 传递给 azure 查询的参数到实体框架

> ID：14652008
> 
> 赞同：8
> 
> 时间：2013-02-01T17:42:44.667
> 
> 标签：sql, azure, linq-to-entities, azure-sql-database

我正在使用 linq to Entity 来查询 azure 数据库。我已登录 azure 以查看给出特定问题的查询。我想实际查看传入的参数，但所有 azure 给我的都在下面。有没有办法在查询已经运行后查看参数（例如，更改代码以记录它们目前不是一个选项）。

当我登录到 azure 时，转到管理门户 - SQL 数据库 | 查询性能 | 选择特定查询。我可以看到以下内容： 问题是我看不到传递给参数的内容，例如@p_ *linq* _19。我只看到一个参数占位符。

```
SELECT TOP (150) 
[Project1].[AlertIdentifier] AS [AlertIdentifier]
FROM ( SELECT 
 [Extent1].[AlertIdentifier] AS [AlertIdentifier], 
 [Extent1].[TimeReceived] AS [TimeReceived]
 FROM [dbo].[SecurityAlert] AS [Extent1]
 WHERE (2 <> [Extent1].[AlertStatusID]) AND ((convert(datetime2, '0001-01-01 00:00:00.0000000', 121) = @p__linq__0) OR ([Extent1].[DateScanned] >= @p__linq__1)) AND ((N'' = @p__linq__2) OR ([Extent1].[BettingShopIdentifier] LIKE @p__linq__3 ESCAPE N'~')) AND ((convert(datetime2, '0001-01-01 00:00:00.0000000', 121) = @p__linq__4) OR ([Extent1].[DateScanned] <= @p__linq__5)) AND ((cast(0 as float(53)) = @p__linq__6) OR ( CAST( [Extent1].[SlipStake] AS float) >= @p__linq__7)) AND ((@p__linq__8 < 1) OR ([Extent1].[SlipStatusID] = @p__linq__9)) AND ((cast(0 as float(53)) = @p__linq__10) OR ( CAST( [Extent1].[SlipPayoutActual] AS float) >= @p__linq__11) OR ( CAST( [Extent1].[SlipPayoutCalculated] AS float) >= @p__linq__12) OR ( CAST( [Extent1].[SlipPotentialReturn] AS float) >= @p__linq__13)) AND ((N'' = @p__linq__14) OR ([Extent1].[AlertSummary] LIKE @p__linq__15 ESCAPE N'~')) AND ((N'' = @p__linq__16) OR ([Extent1].[StaffScannedByUsername] LIKE @p__linq__17 ESCAPE N'~') OR ([Extent1].[StaffPayoutUsername] LIKE @p__linq__18 ESCAPE N'~') OR ([Extent1].[StaffEditedByUsername] LIKE @p__linq__19 ESCAPE N'~'))
)  AS [Project1]
ORDER BY [Project1].[TimeReceived] ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:07:39.590

我会选择 miniprofiler 选项。你可以在这里下载它：http: [//miniprofiler.com/](http://miniprofiler.com/)并配置它来分析你的 SQL 连接。

当然，您不会将其用于生产。您可以将其仅用于调试/暂存场景，也可以将探查器配置为仅在特定管理员用户登录时才呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:37:03.507

尽管需要一些配置工作，但一种有效的方法是在实体框架级别设置跟踪。这样您就可以记录在应用程序级别执行的所有 SQL 语句。

我建议使用[Community Entity Framework Provider Wrappers](http://efwrappers.codeplex.com/)，也可以作为[NuGet 包](http://nuget.org/packages/CommunityEFProviderWrappers.EFTracingProvider/)使用。

[它来自 2011 年，但您可以在此答案](https://stackoverflow.com/a/6678775/376366)和[此论坛主题](http://efwrappers.codeplex.com/discussions/262707)中找到有关将其与更新版本的 Entity Framework 一起使用的说明。

以前版本的[原始博客文章](http://blogs.msdn.com/b/jkowalski/archive/2009/06/11/tracing-and-caching-in-entity-framework-available-on-msdn-code-gallery.aspx)解释了这个包装器的工作原理。

另一种选择是使用[MiniProfiler](http://miniprofiler.com/)，正如[amhed 所建议的那样](https://stackoverflow.com/a/15744999/376366)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T19:20:10.570

您可以在管理门户中检查查询性能。[这是链接如何做到这一点。](http://blogs.msdn.com/b/benko/archive/2012/05/19/cloudtip-14-how-do-i-get-sql-profiler-info-from-sql-azure.aspx)

您还可以通过 Management Studio 连接到 Azure 数据库。[这是一个链接如何做到这一点。](http://www.silverlighthack.com/post/2009/11/11/Connecting-to-SQL-Azure-with-SQL-Server-Management-Studio-2008-R2.aspx)在那里您可以检查查询计划并手动调用您的查询。

# python - 如果命令花费的时间超过应有的时间，python会中断命令

> ID：14652012
> 
> 赞同：5
> 
> 时间：2013-02-01T17:42:58.400
> 
> 标签：python

> **可能重复：**
> [Python函数调用](https://stackoverflow.com/questions/492519/timeout-on-a-python-function-call)
> [超时如何在python中超时函数，超时时间小于一秒](https://stackoverflow.com/questions/11901328/how-to-timeout-function-in-python-timout-less-than-a-second)

我在 for 循环中运行一个函数，如下所示：

```
for element in my_list:
    my_function(element) 
```

出于某种原因，某些元素可能会导致函数处理时间很长（甚至可能是一些我无法真正追踪它来自何处的无限循环）。因此，如果当前元素的处理时间超过 2 秒，我想添加一些循环控制来跳过当前元素。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:54:26.723

我不鼓励最明显的答案 - 使用 signal.alarm() 和异步引发异常以跳出任务执行的警报信号处理程序。理论上它应该工作得很好，但实际上 cPython 解释器代码并不能保证处理程序在您想要的时间范围内执行。信号处理可能会延迟 x 个字节码指令，因此在显式取消警报后（在 try 块的上下文之外）仍可能引发异常。

我们经常遇到的一个问题是警报处理程序的异常会在可超时代码完成*后引发。*

由于没有太多可用的线程控制方式，我依靠进程控制来处理必须超时的任务。基本上，要点是将任务交给子进程并在任务花费太长时间时终止子进程。 [multiprocessing.pool](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)并没有那么复杂——所以我有一个自制的池来进行这种级别的控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:46:25.787

像这样的东西：

```
import signal
import time

class Timeout(Exception): 
    pass 

def try_one(func,t):
    def timeout_handler(signum, frame):
        raise Timeout()

    old_handler = signal.signal(signal.SIGALRM, timeout_handler) 
    signal.alarm(t) # triger alarm in 3 seconds

    try: 
        t1=time.clock()
        func()
        t2=time.clock()

    except Timeout:
        print('{} timed out after {} seconds'.format(func.__name__,t))
        return None
    finally:
        signal.signal(signal.SIGALRM, old_handler) 

    signal.alarm(0)
    return t2-t1

def troublesome():
    while True:
        pass

try_one(troublesome,2) 
```

该函数`troublsome`永远不会自行返回。如果使用`try_one(troublesome,2)`成功2秒后超时。

# python - 我的金字塔应用程序中的严重缺陷

> ID：14652016
> 
> 赞同：2
> 
> 时间：2013-02-01T17:43:09.033
> 
> 标签：python, database, pyramid

我刚刚发现我的 Pyramid 应用程序存在一个非常大的问题。mongo 脚手架暗示事件处理程序也应该用于处理数据库连接。这个想法是，当新请求进来时，连接到数据库，当页面呈现断开连接时。所以这就是我所做的，在我的`__init.py__`

```
def connectDatabase(event):
    mongo = MongoDB()
    con = mongo.connectDatabase()
    db = con[Cfg_MongoDB_Database]
    event.request.con = con
    event.request.db = db
    redis = Redis()
    con = redis.connectDatabase()
    event.request.redis = con
    log.debug('newrequest')

def closeConnection(event):
    mongo = MongoDB()
    mongo.closeConnection(event.request.con) 
    log.debug('newresponse')   

def main(global_config, **settings):
    config = Configurator(settings=settings, root_factory=Dashboard)
    authentication = AuthTktAuthenticationPolicy(Cfg_Auth_Key, hashalg='sha512',\
        include_ip=False, timeout=3600*24*7, max_age=3600*24*7, reissue_time=3600)
    authorization = ACLAuthorizationPolicy()
    config.set_authentication_policy(authentication)
    config.set_authorization_policy(authorization)
    config.add_static_view('includes', 'includes', cache_max_age=3600)
    config.add_renderer(".html", "pyramid.mako_templating.renderer_factory")  
    config.add_route('dash', '/')
    config.add_subscriber(connectDatabase, NewRequest)
    config.add_subscriber(closeConnection, NewResponse)
    log.debug('main')
    config.scan()
    return config.make_wsgi_app() 
```

但是，我将一些记录器放入连接到数据库的方法中，并发现该方法被调用了 10 多次，并且如果我禁用缓存`add_static_view`超过 100 次。这意味着对于每个 css、image、js，都会建立新的连接。这是巨大的开销！该站点需要 300ms 连接数据库 100 次！

```
/Users/jan/Documents/Test2/test2/data.py changed; reloading...
-------------------- Restarting --------------------
2013-02-01 18:32:48,351 DEBUG [test2.tools][MainThread] main
Starting server in PID 12374.
serving on http://127.0.0.1:6543
2013-02-01 18:34:14,451 DEBUG [test2.tools][Dummy-2] newrequest
2013-02-01 18:34:14,582 DEBUG [test2.tools][Dummy-2] newresponse
2013-02-01 18:34:14,952 DEBUG [test2.tools][Dummy-3] newrequest
2013-02-01 18:34:14,953 DEBUG [test2.tools][Dummy-3] newresponse
2013-02-01 18:34:17,459 DEBUG [test2.tools][Dummy-4] newrequest
2013-02-01 18:34:17,474 DEBUG [test2.tools][Dummy-4] newresponse
2013-02-01 18:34:17,482 DEBUG [test2.tools][Dummy-5] newrequest
2013-02-01 18:34:17,497 DEBUG [test2.tools][Dummy-5] newresponse
2013-02-01 18:34:19,158 DEBUG [test2.tools][Dummy-2] newrequest
2013-02-01 18:34:19,159 DEBUG [test2.tools][Dummy-2] newresponse 
```

所以到目前为止的解决方案是将连接移动到模型。但是我怎么知道什么时候可以关闭连接？有人对我的问题有更好、更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:37:59.457

在 Pyramid 中执行此操作的推荐方法是使用请求属性，而不是`NewRequest`事件。正如您所注意到的，**每个**请求都会触发该事件，包括静态请求。请求属性是惰性的，仅在您需要它们时才进行评估，并且您可以指定它们在请求的生命周期内被缓存（reified）。我在下面链接了一个示例，该示例演示了如何添加`request.db`.

[https://raw.github.com/Pylons/pyramid_cookbook/master/database/mongodb.rst](https://raw.github.com/Pylons/pyramid_cookbook/master/database/mongodb.rst)

下面是一些应该为您工作的更新代码。

```
def main(global_config, **settings):
    # ...

    db_url = urlparse(settings['mongo_uri'])
    config.registry.db = pymongo.Connection(
        host=db_url.hostname,
        port=db_url.port,
    )

    def add_db(request):
        db = config.registry.db[db_url.path[1:]]
        if db_url.username and db_url.password:
            db.authenticate(db_url.username, db_url.password)
        return db

    config.add_request_method(add_db, 'db', reify=True) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:53:06.240

pymongo 内置了连接池[http://api.mongodb.org/python/current/api/pymongo/mongo_client.html#pymongo.mongo_client.MongoClient](http://api.mongodb.org/python/current/api/pymongo/mongo_client.html#pymongo.mongo_client.MongoClient)

使用连接池不应该在每个请求上都创建一个新连接

另外，我认为您的金字塔应用程序不应该正是出于这个原因在生产中提供静态媒体，apache、nginx 已针对提供文件进行了优化，您的请求不必通过您的应用程序

# ios - 根据呈现的视图控制器和方向显示不同的图像

> ID：14652025
> 
> 赞同：0
> 
> 时间：2013-02-01T17:43:36.253
> 
> 标签：ios, objective-c

我从其他几个人那里展示了这个视图控制器。如何根据不同的图像呈现不同的图像

1.  哪个视图控制器呈现了这个
2.  当前界面方向

现在我有一个按钮，上面打开`ContextualController`屏幕大小的图像。我想根据我在三个不同的按钮中按下按钮的位置来调用不同的图像`UIViewControllers`。

从`UIViewController1`我想打电话`context_1_landscape`和`context_1_portrait`。从`UIViewController2`我想打电话`context_2_landscape`和`context_2_portrait`。

```
-(void) viewDidLoad;
{
    [super viewDidLoad];    

    if((self.interfaceOrientation == UIDeviceOrientationLandscapeLeft)||    (self.interfaceOrientation ==UIDeviceOrientationLandscapeRight)){
        UIImageView *imageview = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"context_1_landscape.png"]];
        [self.view addSubview:imageview];
    } 
    else if ((self.interfaceOrientation ==UIDeviceOrientationPortrait)||(self.interfaceOrientation ==UIDeviceOrientationPortraitUpsideDown)){
        UIImageView *imageview = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"context_1_portrait.png"]];
        [self.view addSubview:imageview];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:13:54.190

您可以`presentingViewController`使用`UIViewController`. 我的建议是让每个presentingViewControllers 都有一个属性，即要显示的图像名称（或图像本身）。然后在`viewDidLoad`您要求`presentingViewController`（转换为适当类的对象）提供要用于纵向或横向的图像。

# uiwebview - didFailLoadWithError 错误地报告没有连接

> ID：14652027
> 
> 赞同：1
> 
> 时间：2013-02-01T17:43:37.897
> 
> 标签：uiwebview

我有一个带有标准视图控制器的应用程序，上面有多个按钮。每个按钮都链接到具有唯一 UIWebView 的单独视图控制器。每个 UIWebView 都实现了 didFailLoadWithError 并且似乎工作正常：当我关闭 wifi 并尝试从主视图控制器页面加载 UIWebView 时，我正确地从 didFailLoadWithError 得到错误消息。当我打开 wifi 并加载 UIWebView 时，它工作正常 - 没有错误。但是，当我单击该 UIWebView 页面中的链接时，我再次收到 didFailLoadWithError 错误。更有趣的是，我清除了错误消息，新页面仍然从我刚刚单击的链接加载，所以我知道连接良好。这是我的实现...

```
@synthesize webView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
     self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Network Alert"    message:@"No Internet Connection - Please Check Your Network Settings and Try Again" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alert show];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:     @"http://www.site.com/index.html"]]];
    [webView addSubview:activity];
    timer=[NSTimer scheduledTimerWithTimeInterval:(1.0/2.0)
        target:self selector:@selector(loading) userInfo:nil repeats:YES];
           }

- (void)loading {
    if (!webView.loading)
        [activity stopAnimating];
        else
            [activity startAnimating];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T06:15:53.490

我刚遇到这个问题。发生了什么，当您单击 Web 视图中的链接时，当页面仍在加载时，您将收到 error `-999`。这转化为`NSURLErrorCancelled`.

您可以在以下链接中找到更多信息。转到该`URL Loading System Error Codes`部分。[https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)

在我的代码中，我告诉一个警报视图弹出，说互联网连接在`-webView:didFailLoadWithError:`被调用时丢失。我将该代码包装在错误对象的条件周围。这是一个例子。

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
    if ([error code] == NSURLErrorNotConnectedToInternet || [error code] == NSURLErrorNetworkConnectionLost) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"Check internet connection." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
    }
} 
```

# windows - 2D XNA 的继任者/替代品？

> ID：14652028
> 
> 赞同：7
> 
> 时间：2013-02-01T17:43:39.283
> 
> 标签：windows, winforms, xna, microsoft-metro

看起来微软正在退出 XNA（但不是 DirectX）：（请参阅[http://www.zdnet.com/microsoft-false-alarm-we-arent-backing-away-from-directx-7000010647/](http://www.zdnet.com/microsoft-false-alarm-we-arent-backing-away-from-directx-7000010647/)，请注意没有可用于新 Visual Studio 2012 等的 XNA Game Studio / XNA）。

对于 Windows 上的 2D 托管游戏，可以使用什么技术来代替它？我很想找到适用于 Windows 7 和 8 的东西，并为 WinXP 和/或 WinPhone 提供奖励积分。

对于过于宽泛的问题，我深表歉意，但我已经在 MS 网站上进行了研究，似乎找不到任何明确的指导。Silverlight 看起来很有希望，但我不知道它是否也会被淘汰。看起来 Metro 应用程序应该更喜欢使用 JavaScript，但我不知道您是否可以使用 C#/.Net。WinForms 会很棒，但我认为那也是“过去，而不是未来”

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:57:02.627

有没有尝试过monogame [MonoGame](http://monogame.codeplex.com/) 它的最新版本也支持WP8

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:55:26.793

[SlimDX](http://slimdx.org/)或[SharpDX](http://sharpdx.org/)是 DirectX API 的托管包装器。

虽然面向未来，但它们都不是像 XNA 这样复杂的游戏开发框架。您必须自己实现精灵渲染、内容管理等重要功能。

# .net - 多线程应用的无头浏览器

> ID：14652030
> 
> 赞同：9
> 
> 时间：2013-02-01T17:43:43.557
> 
> 标签：.net, browser, automation, web-scraping, headless

我正在为 .NET 多线程应用程序寻找一个无头浏览器。它必须具有以下功能：

*   **无需任何服务器安装即可**工作。我只需要简单的库就可以与我的应用程序一起分发。
*   **Ajax/HTML 5 支持**。处理页面元素的能力：通过内部/外部 (SGMLReader) XML 查找和读取属性，或使用 API 单击按钮、填写表单等。
*   正确使用 cookie 容器（正确处理**多个 cookie 响应**并在所有会话期间存储 cookie）
*   **可定制的浏览器行**（即使选择 Chrome/Firefox 也足够了）
*   **多线程**。所以没有静态cookie容器或smth。别的。我需要能够在 2-100000 个不同的用户下登录并使用同一站点。
*   **快速工作**
*   **通过使用不安全的 SSL 来 **处理 https 。****

 **我找到了这个解决方案：

*   [幻影JS](http://phantomjs.org)。我不明白如何从 .NET 使用这个库，以及这个解决方案是否适合我的需求。
*   带有[ikvm的](http://www.ikvm.net/)[HtmlUnit](http://htmlunit.sourceforge.net/)。不适用于 YUI 库。
*   [WebKit.Net](http://sourceforge.net/projects/webkitdotnet/)。
*   [HTML 敏捷包](http://html-agility-pack.net/?z=codeplex)
*   [极品](http://awesomium.com/)

但不知道什么是最好的。如果您建议我最好的解决方案并提供一些使用它的 .NET 示例，将会很高兴。

我读[了这个](https://stackoverflow.com/questions/10161413/headless-browser-for-c-sharp-net)、[这个](https://stackoverflow.com/questions/12761511/headless-webkit-wrapper-driver-no-install-for-net)和许多其他答案，但我还没有找到答案。**

# amazon-web-services - 为什么 Amazon S3 会自动授予我存储桶中所有对象的权限？如何拒绝所有对象的权限？

> ID：14652034
> 
> 赞同：1
> 
> 时间：2013-02-01T17:43:54.430
> 
> 标签：amazon-web-services, amazon-s3, amazon-cloudfront

我有一个与 Cloudfront 一起使用的亚马逊 S3 存储桶，以便我可以控制对存储桶中对象的访问。我想限制对我的存储桶中所有对象的访问，但是如果我将权限设置为我的存储桶以便只有管理员和我的 Cloudfront 源 ID 被授予权限，我的存储桶中的所有对象仍然都包含“所有人”的权限。我能做些什么来解决这个问题？我是 AWS 的新手，我一直将[其](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/PrivateContent.html)用作如何提供私有内容的[资源](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html)，但它似乎无法正常工作。如果我手动选择存储桶中的每个对象，我可以一个一个地删除权限，但是看看我如何将它用于静态和媒体文件并且拥有接近 1000 个对象，我无法单独手动更新每个对象的权限。任何见解将不胜感激。提前致谢。

# jquery - 仅替换 DOM 中的差异

> ID：14652043
> 
> 赞同：0
> 
> 时间：2013-02-01T17:44:17.443
> 
> 标签：jquery, dom, animation, rendering, transition

我有一个数据模型和许多将视图渲染到 DOM 的渲染方法。目前，当数据发生变化时，我会使用相应的方法重新渲染 DOM。它工作得很好。现在我想要的是我不重新渲染整个 DOM，而是将当前 DOM 与渲染方法的输出进行比较，只替换差异！为什么我需要那个？我希望 css-transitions 使动画平滑，所以我不能替换整个 DOM，只能替换差异。

在不检查具体更改的情况下，我迫不及待地等待您的意见来完成这项工作。我想把它抽象化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:32:29.220

好的，我很难做到......如果有人有更优雅的解决方案，如果他分享它，我会很高兴！:-)

```
function applyChanges(source, destination) {

    var srcAttributes = source[0].attributes;
    var dstAttributes = destination[0].attributes;

    for (var i = 0; i < dstAttributes.length; i++) {
        if (typeof srcAttributes[dstAttributes[i].nodeName] === "undefined") {
            destination.removeAttr(dstAttributes[i].nodeName);
        }
    }

    for (var i = 0; i < srcAttributes.length; i++) {
        if (typeof dstAttributes[srcAttributes[i].nodeName] === "undefined" || srcAttributes[srcAttributes[i].nodeName].nodeValue != dstAttributes[srcAttributes[i].nodeName].nodeValue) {
            $(destination).attr(srcAttributes[i].nodeName, srcAttributes[i].nodeValue);
        }
    }

    if (destination[0].children.length != source[0].children.length) {
        destination.html(source.html());
        return;
    }

    for (var i = 0; i < source[0].children.length; i++) {
        var srcChild = source[0].children[i];
        var dstChild = destination[0].children[i];

        if ($(srcChild).outerHtml() != $(dstChild).outerHtml()) {
            applyChanges($(srcChild), $(dstChild));
        }
    }

    if (destination.html() != source.html()) {
        destination.html(source.html());
    }
} 
```

# php - PHP数组插入MySQL失败

> ID：14652046
> 
> 赞同：0
> 
> 时间：2013-02-01T17:44:25.883
> 
> 标签：php, mysql

和我类似的帖子很多，都不行。

有一个数组`$data['date'], $data['name'], $data['value']`。

试图插入 MySQL 表 MyValues（日期、名称、值）

尝试了 7-8 种不同的方法，都没有奏效。想要类似的东西

```
for ($a=0;$a<10;$a++) {
    mysql_query("INSERT INTO MyValues('Date','Index_Name','Index')
       VALUES ($data['date'][$a] ,$data['name'][$a], $data['value'][$a])"
} 
```

还尝试过 foreach，构建单个字符串以提供给 MySQL 等。

得到这个错误警告：mysql_error() 期望参数 1 是资源，第 45 行给出的布尔值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:48:49.167

columnName 不应该用单引号引起来，因为它们是标识符而不是字符串文字。

```
INSERT INTO `Values` (Date,Index_Name,Index) VALUES (....) 
```

还有一件事，这里唯一需要用反引号括起来的标识符是 tableName `VALUES`，因为它是一个保留关键字。

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)
*   [何时在 MySQL 中使用单引号、双引号和反引号](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:51:02.327

由于`Values`是保留字，因此不能将其原样用作表名。您必须使用反引号将其括起来。同样，使用单引号来命名列也是无效的，你也需要反引号。

试试这个：

```
$out = Array();
$esc = "mysql_real_escape_string";
foreach($data['date'] as $k=>$v) {
    $out[] = "('".$esc($data['date'][$k])."', '".$esc($data['name'][$k])."', "
       ."'".$esc($data['value'][$k])."')";
}
mysql_query("INSERT INTO `Values` (`Date`, `Index_Name`, `Index`) values ".implode(",",$out)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:14:49.733

试试这个，`$a++`不要用`$ee++`

```
 for ($a=0;$a<10;$a++) {
mysql_query("INSERT INTO `Values` (`Date`,`Index_Name`,`Index`)
   VALUES ('".$data['date'][$a]."' ,'".$data['name'][$a]."', '".$data['value'][$a]."' ")
 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T17:48:10.723

首先，只需将 PDO/mysqli 与准备好的语句一起使用，这样您就不会遇到任何这样的问题。

不过，这将解决它（带有反引号而不是单引号的列名，以及转义的数据）：

```
for ($a=0;$a<10;$a++) {
    mysql_query("INSERT INTO `Values` (`Date`,`Index_Name`,`Index`)
       VALUES ('".mysql_real_escape_string($data['date'][$a])."' ,
'".mysql_real_escape_string($data['name'][$a])."', 
'".mysql_real_escape_string($data['value'])[$a]."'");
} 
```

并尽量避免为您的列保留名称，例如`index`和`values`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-01T17:48:56.723

首先，我相信您希望引用您的查询值，因此结果是“价值”而不仅仅是价值。例子：

```
mysql_query("INSERT INTO Values(Date,Index_Name,Index) VALUES ('$data['date'][$a]' ,'$data['name'][$a]', '$data['value'][$a]'); 
```

如果您正在执行多个查询，请执行以下操作：

```
$q = "INSERT INTO Values(Date,Index_Name,Index) VALUES ";
for {
  // Add to the string here for each insert item
}
mysql_query($q); 
```

此外，请开始逐步淘汰 PHP 的 mysql_* 库以支持 mysqli 或 PDO。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-01T17:49:35.370

这有效：

```
for ($a=0;$a<10;$a++) {
    mysql_query("INSERT INTO Values('Date','Index_Name','Index')
    VALUES ('".$data['date'][$a]."','".$data['name'][$a]."','".$data['value'][$a]."')"
} 
```

# php - HTML 表格中的未知列、列名和行

> ID：14652048
> 
> 赞同：0
> 
> 时间：2013-02-01T17:44:33.433
> 
> 标签：php

我正在尝试在 HTML 表中显示 msSQL 表中的所有信息，并且遇到了一些不太好的东西。

```
<table border="1">
<?
echo "<tr>";
for ($i = 0; $i < mssql_num_fields($result); ++$i){
    echo "<th>" .$column_names[$i] . "</th>";
}
echo "</tr>";

$num_rows =  mssql_num_rows($result);

for ($i = 0; $i < $num_rows; ++$i){
    echo "<tr>";
    foreach ($column_names as $key => $val){    
        $result_row = mssql_query("SELECT * FROM username WHERE id = '$i'");
        $row = mssql_fetch_assoc($result_row);
        echo "<td>";
        echo $row[$val];
        echo "</td>";
    }
    echo "</td>";
}
?>
</table> 
```

这行得通。第一部分成功打印出列名，但至于其余部分：1）我认为每次通过循环进行查询有点麻烦 2）它并没有真正起作用，因为行的 id 去远高于表中的行数，因为某些 id 未被使用。

似乎我应该能够只进行一个查询并一次从数据库中提取所有内容，然后从中构建我的 HTML 表，但我无法弄清楚如何逐行访问它我可以去的地方`$row[next row][shifted value from $column_names`。如何改进这个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:27:18.610

```
function table_cell($item, $header=false) {
    if (!$item) return '';
    $elemname = ($header) ? 'th' : 'td';
    $escitem = htmlspecialchars($item, ENT_NOQUOTES, 'UTF-8');
    return "<{$elemname}>{$escitem}</{$elemname}>";
}
function table_header_cell($item) {
    return table_cell($item, true);
}
function table_row($items, $header=false) {
    $func = ($header) ? 'table_header_cell' : 'table_cell';
    return "<tr>\n\t".implode("\n\t", array_map($func, $items))."\n</tr>\n";
}

function echo_result_as_table($result) {
    if ($result && $row = mssql_fetch_assoc($result)) {
        $columnnames = array_keys($row);
        echo "<table>\n", table_row($columnnames, true), "\n";
        do {
            echo table_row($row), "\n";
        } while ($row = mssql_fetch_assoc($result));
        echo "</table>\n";
    }
}

$result = mssql_query("SELECT * FROM username");
echo_result_as_table($result);
if ($result) mssql_free_result($result); 
```

如果您有一个关联数组数组而不是原始 mssql 结果句柄，则可以使用这样的函数来生成表字符串：

```
function array_to_table($arrayofassoc) {
    if (!$arrayofassoc) return '';
    $tablestr = '<table>';
    $tablestr .= table_row(array_keys($arrayofassoc[0]), true);
    $tablestr .= implode('', array_map('table_row', $arrayofassoc));
    $tablestr .= '</table>';
    return $tablestr;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-01T17:46:29.623

尝试这个：

```
while($row = mysql_fetch_results($result)){
    echo '<td>'.$row['column_name'].'</td>';
} 
```

'column_name' 是 mysql 中列的名称。

但有些人会说……“等等，但是 PDO”

# mysql - 在 Solr 中创建动态命名字段而不声明 Transformer

> ID：14652054
> 
> 赞同：0
> 
> 时间：2013-02-01T17:44:58.017
> 
> 标签：mysql, jdbc, solr

我需要动态索引表中的多个字段。起初它不起作用，将字段名称读取为“_t”。出于好奇，我向实体添加了一个转换器声明。这给了我需要的字段列表。

**为什么添加一个从未使用过的变压器可以解决我的问题？** 删除变压器声明会导致问题再次出现，我声明哪个变压器并不重要。

我正在运行 Solr 4.1，这个问题首先发生在下载附带的示例 DIH 示例中。我阅读了 Solr 4.0 参考指南，但找不到添加变压器使其工作的原因。

下面是 db-data-config.xml 文件：

```
<dataConfig>
<dataSource name="foo" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/foo"  user="fakeadmin" password="fakepass"/>
<document>
    <entity name="products" query="select * from `product`">
        <field name="id" column="id" />
        <entity name="names" query="select * from names where productId = '${products.id}'" transformer="LogTransformer">
            <field name="${names.fieldName}_t" column="fieldValue"/>
        </entity>
    </entity>
</document> 
```

# android - Android autocompletetextview 不会使用自定义适配器填充联系人

> ID：14652057
> 
> 赞同：1
> 
> 时间：2013-02-01T17:45:06.313
> 
> 标签：android, contacts, adapter, autocompletetextview

我创建了一个自定义适配器和自定义列表项。我最初使用的是一个简单的列表项，只是填充了名称或编号。但是，现在我想在每个列表项中同时显示姓名和电话号码。当我现在在自动完成文本中输入内容时，它不会填充任何内容。我做了一些错误测试，似乎它甚至没有调用被覆盖的 getView() 方法。我似乎无法弄清楚为什么这不起作用。

另外，是的，我在清单中添加了 READ_CONTACTS 权限。

**MainActivity.java**

```
package com.sncrmck.autocompletetest;

import java.util.ArrayList;

import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;
import android.widget.AutoCompleteTextView;

import com.sncrmck.adapter.ContactAdapter;
import com.sncrmck.obj.SimpleContact.SimpleContact;

public class MainActivity extends Activity {

    AutoCompleteTextView acTextField;
    private ContactAdapter adapter;

    public ArrayList<SimpleContact> contactList = new ArrayList<SimpleContact>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ContentResolver resolver = getContentResolver();

        acTextField = (AutoCompleteTextView) findViewById(R.id.autoComplete);

        Uri contacts = Uri.parse("content://icc/adn");

        Cursor cursor = resolver.query(contacts, null, null, null, null);

        if (cursor.moveToFirst()) {

            String contactName;
            String phoneNumber;

            int nameColumn = cursor.getColumnIndex("name");
            int phoneColumn = cursor.getColumnIndex("number");

            do {

            contactName = cursor.getString(nameColumn);
            phoneNumber = cursor.getString(phoneColumn);
                if((contactName != " " || contactName != null) && (phoneNumber!= " " ||phoneNumber!= null))
                {
                SimpleContact sc = new SimpleContact(contactName, phoneNumber);
                contactList.add(sc);
                }

            } while (cursor.moveToNext());

        }
        adapter = new ContactAdapter(this, R.layout.grid_item, contactList);
        acTextField.setAdapter(adapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**CustomAdapter.java**

```
 package com.sncrmck.adapter;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;
import android.widget.Toast;

import com.sncrmck.autocompletetest.R;
import com.sncrmck.obj.SimpleContact.SimpleContact;

public class ContactAdapter extends ArrayAdapter<SimpleContact> {

    private ArrayList<SimpleContact> entries;
    private Activity activity;

     public ContactAdapter(Activity a, int textViewResourceId, ArrayList<SimpleContact> entries){
         super(a, textViewResourceId, entries);
         this.entries = entries;
         this.activity = a;
         Toast.makeText(getContext(), "Constructor", Toast.LENGTH_SHORT).show();

     }

     public static class ViewHolder{
            public TextView item1;
            public TextView item2;

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            Toast.makeText(getContext(), "Get View", Toast.LENGTH_SHORT).show();
            View v = convertView;
            ViewHolder holder;
            if (v == null) {
                LayoutInflater vi =
                    (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.grid_item, null);
                holder = new ViewHolder();
                holder.item1 = (TextView) v.findViewById(R.id.big);
                holder.item2 = (TextView) v.findViewById(R.id.small);;

            }

            else
                holder=(ViewHolder)v.getTag();

            final SimpleContact contactInfo = entries.get(position);
            if (contactInfo != null) {
                holder.item1.setText(contactInfo.getContactName());
                holder.item2.setText(contactInfo.getContactNumber());

            }
            return v;
        }

    } 
```

**这是我传递给 ContactAdapter 的 SimpleContact 对象**

```
package com.sncrmck.obj.SimpleContact;

public class SimpleContact {

    private String contactName;
    private String contactNumber;

    public SimpleContact(String string, String string2) {
        this.contactName = string;
        this.contactNumber = string2;
    }

    public String getContactName() { return contactName; }

    public void set(String contactName) { this.contactName= contactName; }

    public String getContactNumber() { return contactNumber; }

    public void setcustomSmall(String contactNumber) { this.contactNumber = contactNumber; }
    } 
```

**最后，这是我的自定义列表项 - grid_item.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

        <TextView 
            android:textSize="24dp" 
            android:id="@+id/big"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"/>

        <TextView 
            android:textSize="24dip" 
            android:id="@+id/small"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T05:40:12.057

您需要覆盖自定义适配器的 getFilter() 方法

还实现一个自定义过滤器并覆盖其中的方法。

看到这个[类似的问题](https://stackoverflow.com/questions/8784249/android-autocompletetextview-with-custom-adapter-filtering-not-working)。

我在工作中没有可用的代码，所以如果今晚有机会，我会编辑答案。

# android - sensorLandscape 叫什么

> ID：14652058
> 
> 赞同：2
> 
> 时间：2013-02-01T17:45:07.520
> 
> 标签：android, configuration, android-camera, android-sensors, android-mediarecorder

我有一个应用程序，我只想在横向模式下运行（例如横向或反向横向），所以我在清单中使用 sensorLandscape。

我的问题在这里：我也有一个录像机工作（例如使用相机）。现在我在准备相机时设置了显示方向，但问题是如果我改变方向，改变就会保持（预览是颠倒的）。使用传感器景观时，我如何知道 UI 何时更改。我曾尝试使用 onConfigurationCanged() 但不幸的是，我需要让应用程序在预蜂窝设备（主要是姜饼）和后蜂窝设备（果冻豆）上运行。

因为为了正确调用 onConfigurationChanged，我需要将目标 api 设置为 8，但传感器景观仅适用于 9+。我需要将其设置为 8，因为在较旧的 api 中，您需要将 screenSize 添加到“configChanges”，否则将不会被调用。所以这些调用彼此之间有很多不兼容的地方。

现在背景已经完成，你们知道我已经尝试过什么了。我的问题是我怎样才能知道我的方向何时改变（回调或其他），以便我可以改变我的相机显示方向？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:43:34.130

我已经想出了如何完成这项工作。这是一个迂回的方法，但它是：设置一个传感器管理器和一个定位传感器

```
public class ActivityRecordVideo extends ActivityBase implements SensorEventListener
{

private SensorManager mSensorManager;
private Sensor mOrientation;

@Override
public void onCreate(Bundle savedInstanceState)
{
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mOrientation = mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);
}

public void onAccuracyChanged(Sensor arg0, int arg1) {
    // TODO Auto-generated method stub

}

public void onSensorChanged(SensorEvent event) {
    int rotation = getWindowManager().getDefaultDisplay().getRotation();

    if(camId != -1 && currentDisplayRotation != rotation)
    {
        if(!isRecording)
            setCameraOrientation(camId, cameraRecorder);
    }

} 
```

我还在 onResume() 中设置了侦听器，并在 onPause() 中删除了它们。

这允许相机方向与其他所有东西一起翻转（例如，当处于反向横向时，所有视图与相机预览一起处于反向横向）

还决定展示 setCameraOrientation 代码，它是 android 开发者代码的简化版

```
private void setCameraOrientation(int camId, Camera camera)
{
    CameraInfo info = new CameraInfo();
    Camera.getCameraInfo(camId, info);

    currentDisplayRotation = getWindowManager().getDefaultDisplay().getRotation();
    int degrees = 0;
    switch(currentDisplayRotation)
    {
    case Surface.ROTATION_0: degrees = 0; break;
    case Surface.ROTATION_90: degrees = 90; break;
    case Surface.ROTATION_180: degrees = 180; break;
    case Surface.ROTATION_270: degrees = 270; break;
    }

    int result;
    result = (info.orientation + degrees) % 360;
    result = (360 - result) % 360;  //compensate for mirror effect

    if(Build.VERSION.SDK_INT < 14)
        camera.stopPreview();
    camera.setDisplayOrientation(result);
    if(Build.VERSION.SDK_INT < 14)
        camera.startPreview();
} 
```

希望这对其他人有帮助

# image - Golang - 使用 Image 和 Image/PNG 交换图片的 PNG 通道

> ID：14652060
> 
> 赞同：5
> 
> 时间：2013-02-01T17:45:08.733
> 
> 标签：image, png, go

我正在尝试编写一个简短的，它将读取一个 PNG 文件，并将一个通道与另一个（R、G、B）交换作为可能的选择。

但是，我不知道如何从 image.At(x,y) 返回的 color.Color 对象中提取整数。一旦我可以使用交换的通道构造新的 RGBA 颜色，使用 image.Set(x,y,color) 将其写回可能会更容易。

我现在在这里（您几乎可以跳到最后一个循环）：

```
package main

import (
"flag"
"fmt"
//"image"
"image/color"
"image/png"
"os"
)

type Choice struct {
value string
valid bool
}

func (c *Choice) validate() {
goodchoices := []string{"R", "G", "B"}
for _, v := range goodchoices {
    if c.value == v {
        c.valid = true
    }
}
}

func main() {

var fname string
var c1 Choice
var c2 Choice

flag.StringVar(&c1.value, "c1", "", "The color channel to swap - R or G or B ")
flag.StringVar(&c2.value, "c2", "", "The color channel to swap with - R or G or B ")
flag.StringVar(&fname, "f", "", "A .png image (normal map)")
flag.Parse()

c1.validate()
c2.validate()

if c1.valid == true && c2.valid == true {
    fmt.Println("We could proceed..")
    fmt.Println("Swapping channels:", c1.value, "<->", c2.value, "In", fname) //for testing
} else {
    fmt.Println("Invalid channel... Please use R, G or B.")
    return
}

file, err := os.Open(fname)
if err != nil {
    fmt.Println(err)
    return
}
defer file.Close()

pic, err := png.Decode(file)
if err != nil {
    fmt.Fprintf(os.Stderr, "%s: %v\n", fname, err)
    return
}

b := pic.Bounds()

for y := b.Min.Y; y < b.Max.Y; y++ {
    for x := b.Min.X; x < b.Max.X; x++ {
        col := pic.At(x, y)
        ???? How do I swap the channels in col ???? 
    }
}
} 
```

我对 Go 和一般编程真的很陌生，所以请在你的回答中考虑它。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T19:58:33.503

嗯，这比我想象的要难——我想知道是否有人能想出一个更好的主意！

问题是您不知道`png.Decode`返回的具体类型——它可能返回任何图像类型。您只有一个`image.Image`没有 Set 方法的接口。

为了解决这个问题，首先定义一个接口，所有可以设置像素的图像类型都满足

```
type ImageSet interface {
     Set(x, y int, c color.Color)
} 
```

接下来看看是否`pic`实现了该接口（如果不实现，go 会恐慌 - 使用 picSet，如果这让您感到困扰，请使用 ok 形式）

```
// Get an interface which can set pixels
picSet := pic.(ImageSet) 
```

现在你的循环看起来像这样 - 我只交换了红色和绿色，所以你可以看到这个想法。

```
for y := b.Min.Y; y < b.Max.Y; y++ {
    for x := b.Min.X; x < b.Max.X; x++ {
        col := pic.At(x, y)
        r, g, b, a := col.RGBA()
        // Swap green and red
        newCol := color.RGBA{uint8(g>>8), uint8(r>>8), uint8(b>>8), uint8(a>>8)}
        picSet.Set(x, y, newCol)
    }
} 
```

我怀疑它的高性能版本必须使用类型开关来确定它是哪种图像类型，然后为每个自定义代码使用 uint8s 用于 24 位图像和 uint16s 用于 48 位图像等。

如果您想尝试一下，[这是完整的工作示例。](http://play.golang.org/p/LH35go6sU2)但它在操场上不起作用 - 你必须下载它。

* * *

**更新**：刚刚注意到你的评论。如果你知道你有一个 RGBA 图像，那么你可以使用类型断言来获取底层图像，这会使事情变得更容易。

```
// Get an image.RGBA if it is one
rgba, ok := pic.(*image.RGBA)
if !ok {
    fmt.Println("That wasn't an RGBA!")
    return
}

for y := b.Min.Y; y < b.Max.Y; y++ {
    for x := b.Min.X; x < b.Max.X; x++ {
        // Note type assertion to get a color.RGBA
        col := rgba.At(x, y).(color.RGBA)
        // Swap green and red
        col.G, col.R = col.R, col.G
        rgba.Set(x, y, col)
    }
} 
```

# java - sql异常：参数索引超出范围

> ID：14652061
> 
> 赞同：1
> 
> 时间：2013-02-01T17:45:14.853
> 
> 标签：java, sql, jdbc, sqlexception

我编写了以下方法来在数据库中执行更新语句：

```
 public boolean updateEmployee(int id){
    try {
        String update="UPDATE employee set name='updatedName' and address='updatedaddress' where id=(?)";
        pst=connection.prepareStatement(update);
        pst.setInt(1, id);
        pst.executeUpdate();

    } catch (SQLException ex) {
        Logger.getLogger(DAO.class.getName()).log(Level.SEVERE, null, ex);
        return false;
    }
    return true;
 } 
```

但是会出现以下异常：

```
java.sql.SQLException: Parameter index out of range (1 > number of parameters, which is 0). 
```

并且还会抛出此异常：

```
com.mysql.jdbc.MysqlDataTruncation: Data truncation: Truncated incorrect DOUBLE value: 'UpdatedName' 
```

这里有什么问题？此外，如何返回更新语句的结果（因为`executeQuery`不适用于 DML 语句）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:46:32.263

看起来像一个未封闭的报价问题？

```
name='updatedname and address 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T01:27:01.920

我可能是错的，但也许声明应该是

```
UPDATE employee set name='updatedName' , address='updatedaddress' where id=(?) 
```

代替

`UPDATE employee set name='updatedName' and address='updatedaddress' where id=(?)`

`and`只能在 where 子句中使用。

# unix - 拆分 unix 输出

> ID：14652064
> 
> 赞同：6
> 
> 时间：2013-02-01T17:45:22.163
> 
> 标签：unix, grep

我正在尝试从文件中提取地址。

```
grep keyword /path/to/file 
```

是我如何找到我想要的代码行。输出类似于

```
var=http://address 
```

考虑到我正在寻找的关键字在和部分中，有没有办法我可以直接在`=`ie之后获得部分`http://address``var``http://address`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T17:48:00.823

```
grep keyword /path/to/file | cut -d= -f2- 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T17:48:16.950

只需管道到`cut`：

```
grep keyword /path/to/file | cut -d '=' -f 2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-01T17:50:41.817

您可以避免不必要的管道：

```
awk -F= '/keyword/{print $2}' /path/to/file 
```

# arrays - 取消设置数组元素

> ID：14652065
> 
> 赞同：0
> 
> 时间：2013-02-01T17:45:24.417
> 
> 标签：arrays, mongodb

是否可以在数组字段上使用 $unset 运算符并删除与查询匹配的元素。例如，我试图从字段“文件”数组中删除 35。

```
{
  _id : 1,
  files : [1,12,35,223]
}
// Ive tried this but it does not work
db.col.update({_id : 1}, {$unset : { files : 35}})
// or this does not work
db.col.update({_id : 1}, {$unset : { "files.35" : 1}}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:03:27.827

您是否尝试过[$pull 运算符](http://docs.mongodb.org/manual/reference/operator/pull/)？如：

```
db.col.update({_id: 1}, {$pull: {files: 35}}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:03:57.743

您可以使用[$pull](http://docs.mongodb.org/manual/reference/operator/pull/)代替：

`db.col.update({ _id : 1 }, {$pull: { files : 35 } })`

# internet-explorer - 在 IE 插件中读取 cookie

> ID：14652067
> 
> 赞同：0
> 
> 时间：2013-02-01T17:45:25.677
> 
> 标签：internet-explorer, cookies

我正在写一个 IE 插件。我需要枚举和读取 cookie。我知道如何获取当前页面的 cookie，但这不是我想要的；我需要查看所有 cookie，包括会话 cookie

我知道它们在某处的文件中，但我需要会话 cookie；同样有一个 InternetGetCookie api，但它只获取持久性 cookie

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:24:17.823

InternetGetCookieEx

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa384714%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384714%28v=vs.85%29.aspx)

......

# angularjs - 禁用表单验证

> ID：14652068
> 
> 赞同：12
> 
> 时间：2013-02-01T17:45:28.020
> 
> 标签：angularjs

`Angularjs`正在运行我的表单`FormController`（例如跟踪原始、脏等）。我不需要这个功能；我确定这会增加我的`$digests`.

我怎样才能关闭它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T18:28:10.620

AFAIK 没有简单的开关来关闭 AngularJS 验证。实际上大部分验证发生在`NgModelController`和输入指令中——基本上是[input.js 文件](https://github.com/angular/angular.js/blob/master/src/ng/directive/input.js)中的代码。因此，要摆脱内置验证，您必须从该文件重新开发代码（加上其他一些，如 select）。

您是否将验证代码确定为应用程序的性能瓶颈？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-15T17:22:06.380

更新：这不起作用......至少不是你想要的方式。将 ng-non-bindable 添加到表单或任何输入都会中断所有绑定。因此，输入中的 ng-model 将不再起作用。对不起 ....

ng-non-bindable 是解决这个问题的方法。

它将阻止 AngularJS 将表单视为指令。这将使 AngularJS 忽略整个表单：

```
<form name="inviteContactForm" ng-non-bindable> 
```

这将使 AngularJS 忽略表单的一部分：

```
<input type="email" name="email" ng-non-bindable> 
```

你可以在这里阅读一些关于我在这个问题上的抱怨。[http://calendee.com/preventing-angularjs-from-hijacking-forms/](http://calendee.com/preventing-angularjs-from-hijacking-forms/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-08T23:02:59.883

在内部，Angular通过将*Directive*后缀添加到指令名称来从指令中*创建**工厂。*因此，您可以用不可操作的工厂替换验证和输入指令工厂。

 **```
var noopDirective = function() { return function () {}; };
angular.module('myModule')
    .factory('requiredDirective', noopDirective)
    .factory('ngRequiredDirective', noopDirective)
    .factory('inputDirective', noopDirective)
    .factory('textareaDirective', noopDirective); // etc... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-27T15:37:26.460

与@Chui Tey 之前的回答类似，有一个需要“ngModel”的指令。这是我在运行时禁用验证所做的：

```
//disabling all validators
forEach(ngModelController.$validators, function(validator, validatorName){
  ngModelController.$setValidity(validatorName, true);//mark invalid as valid
  var originalValidator = ngModelController.$validators[validatorName]; //we save the original validator for being able to restore it in future
  ngModelController.$validators[validatorName] = _.wrap(true);//overwrite the validator 
  ngModelController.$validators[validatorName].originalValidator = originalValidator;
});

//for restoring validations    
forEach(ngModelController.$validators, function(validator, validatorName){             
  if(ngModelController.$validators[validatorName].originalValidator){
    ngModelController.$validators[validatorName] = ngModelController.$validators[validatorName].originalValidator;
  }
});
ngModelController.$validate(); //triger validations 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-30T12:30:51.980

一位同事提出了一种禁用验证器的绝妙方法。这是一个实现：

```
<input type="radio" name="enableValidation" ng-model="$ctrl.validationEnabled" ng-value="true" />Enabled
<input type="radio" name="enableValidation" ng-model="$ctrl.validationEnabled" ng-value="false" />Disabled

<input type="number" 
       name="age" 
       ng-model="$ctrl.age" 
       min="20" 
       disable-validation="!$ctrl.validationEnabled" /> 
```

当`disable-validation`为真时，所有验证规则都会自动通过。

```
function disableValidation(scope, elem, attrs, ngModelController) {

  function wrapOriginalValidators() {
    var originalValidators = angular.copy(ngModelController.$validators);
    Object.keys(originalValidators).forEach(function(key) {
      ngModelController.$validators[key] = function(modelValue, viewValue) {
        return scope.$eval(attrs.disableValidation) || originalValidators[key](modelValue, viewValue);
      }
    });
  }

  function watchDisableCriteria() {
    scope.$watch(attrs.disableValidation, function() {
      // trigger validation
      var originalViewValue = ngModelController.$viewValue;
      scope.$applyAsync(function() {
        ngModelController.$setViewValue('');
      });
      scope.$applyAsync(function() {
        ngModelController.$setViewValue(originalViewValue);
      });
    });
  }

  wrapOriginalValidators();
  watchDisableCriteria();

}

angular.module('app', [])
  .directive('disableValidation', function() {
    return {
      require: 'ngModel',
      link: disableValidation
    };
  }); 
```

显然，出于性能原因，您不会使用它，而是当您需要动态启用或禁用验证时。

示例：[https ://plnkr.co/edit/EM1tGb](https://plnkr.co/edit/EM1tGb)**

# mysql - 如何从 2 表中减去乘数行？mysql

> ID：14652069
> 
> 赞同：1
> 
> 时间：2013-02-01T17:45:28.203
> 
> 标签：mysql, subtraction

我一直在尝试几个小时来寻找从 2 表中减去乘数行的方法？因为我不断从 mySQL 工作台收到错误。

我有 2 张桌子`hotel`，`hotel_stay`

我需要得到唯一房间的数量，然后减去个人容量

```
+--------------------+------------------+
hotel_stay
+--------------------+------------------+
room (PK)
99
99
10
10
10

+--------------------+------------------+
hotel  
+--------------------+------------------+ 
room(FK)  |   capacity
99        |   10
10        |   12 
```

输出将与酒店在同一张桌子上，或者我将不得不给我们作为？

```
room | capacity
99   | 8      
10   | 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:54:52.427

我不确定我是否完全理解你的问题。但是您可以使用这样的方法来获取每个房间的总容量：

```
select h.room, 
   (h.capacity - hs.TotalBooked) as Capacity
from hotel h
inner join 
(
    select COUNT(room) as TotalBooked, 
       Room
    from hotel_stay
    group by room
) hs
    on h.room = hs.room 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/56159/2)。这将返回结果：

```
| ROOM | CAPACITY |
-------------------
|   10 |        9 |
|   99 |        8 | 
```

# linux - 在 Linux 网络共享挂载上更新 SVN 工作副本

> ID：14652073
> 
> 赞同：0
> 
> 时间：2013-02-01T17:45:55.487
> 
> 标签：linux, svn

我在 Windows Web 服务器上有一个存储库的工作副本。[如果我在 Windows PC 上使用TortoiseSVN](http://en.wikipedia.org/wiki/TortoiseSVN) (1.7.6) 或命令行（1.7.8 版）“svn update”更新/提交工作副本，我没有问题。

但是，如果我在我的 Linux Subversion 服务器（存储库所在的位置）上，通过[CIFS](https://en.wikipedia.org/wiki/Server_Message_Block)挂载访问工作副本，在 10 次更新/提交内不会失败，文件 .svn/wc.db 将会损坏。有时它与消息

> svn: E200030: sqlite: database disk image is malformed”，有时会出现类似“svn: E155010: Pristine text 'd9a9a3ee5e6b4b0d35b​fef95601890afd80709'​不存在的消息

我可以在每次发生腐败时清理它，但显然我不想继续这样做 - 我正在努力找出问题的原因。

我的 Linux Subversion 服务器也在使用 1.7.8 版本。什么可能导致问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:08:46.010

这可能是因为文件或数据库中的内部表示在 Linux 和 Windows 机器上略有不同。在 Linux 机器上制作您自己的副本，然后将其提交到中央存储库，然后将其拉到您的 Windows 机器上。

一般来说，从两台不同的机器访问版本控制存储库的同一个副本从来都不是一个好主意。

我使用 SVN 进行网络工作，这就是我的工作方式——我几乎在 Linux 机器上完成所有工作，但我的 Windows 笔记本电脑上确实有一个 repo。

# c# - Windows 8 Xaml 对象绑定

> ID：14652078
> 
> 赞同：1
> 
> 时间：2013-02-01T17:46:00.340
> 
> 标签：c#, json, binding

我在将列表对象的字符串成员绑定到 .xaml 时遇到问题在 xaml.cs 上我这样做：

grdEvents.ItemsSource = 等待 m.GetEvents(); //等待JSON调用后返回的列表

类看起来像这样：

```
public class getevents
{
    public class Result{ //returned list
         public string xy {get; set;} //access granted
         public Image x {get; set;}
     }

    public class Image{
         public string x ; //dont know how to acces?
    }

} 
```

如何访问 Imageobject 的成员？

谢谢，罗马

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:48:43.123

您需要创建`Image.x`一个*属性*，而不是一个*字段*。如果你这样做，你应该能够直接通过绑定到它`"{Binding Path=Image.x}"`（假设你在 Image 类的事件类中有一个 Image 属性）。

# iphone - 如何在 Pinterest 上发布图片？

> ID：14652079
> 
> 赞同：5
> 
> 时间：2013-02-01T17:46:07.503
> 
> 标签：iphone, image, ios6, webview

我想使用 [此](https://stackoverflow.com/questions/9909511/ios-application-integration-with-pinterest)链接在 pinterest 上发布图像，但我根据自己的要求更改了一点编码这里是我的 MainClass 代码

```
- (void)pInterest {
      UIImage *myImage;
      myImage=imgView.image;
      WebViewController *webViewController = [[WebViewController alloc] initWithNibName:@"WebViewController" bundle:nil];
      webViewController.mypimage = myImage;
     [[[[UIApplication sharedApplication] keyWindow] rootViewController] presentModalViewController:webViewController animated:YES];
} 
```

所以在将图像传递给我的 WebViewController 之后，现在我的 WebViewController 类代码是

```
- (void)viewDidLoad {
     //imageview.image=mypimage;
     [super viewDidLoad];
     NSString *description = @"Post your description here";

     // Generate urls for button and image
     NSString *sUrl = [NSString stringWithFormat:@"http://d30t6wl9ttrlhf.cloudfront.net/media/catalog/product/Heros/mypimage"];
     // NSLog(@"URL:%@", sUrl);
     NSString *protectedUrl = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,(__bridge CFStringRef)sUrl, NULL, (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ",CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
     NSLog(@"Protected URL:%@", protectedUrl);
     NSString *imageUrl = [NSString stringWithFormat:@"\"%@\"", sUrl];
     NSString *buttonUrl = [NSString stringWithFormat:@"\"http://pinterest.com/pin/create/button/?url=www.flor.com&media=%@&description=%@\"", protectedUrl, description];

     NSMutableString *htmlString = [[NSMutableString alloc] initWithCapacity:1000];
     [htmlString appendFormat:@"<html> <body>"];
     [htmlString appendFormat:@"<p align=\"center\"><a href=%@ class=\"pin-it-button\" count-layout=\"horizontal\"><img border=\"0\" src=\"http://assets.pinterest.com/images/PinExt.png\" title=\"Pin It\" /></a></p>", buttonUrl];
     [htmlString appendFormat:@"<p align=\"center\"><img width=\"400px\" height = \"400px\" src=%@></img></p>", imageUrl];
     [htmlString appendFormat:@"<script type=\"text/javascript\" src=\"//assets.pinterest.com/js/pinit.js\"></script>"];
     [htmlString appendFormat:@"</body> </html>"];
     [mywebview setBackgroundColor:[UIColor clearColor]];
     [mywebview loadHTMLString:htmlString baseURL:nil];
     [mywebview setOpaque:NO];
} 
```

当我使用上面的编码时，我的 webview 不显示图像，并且我的 webview 看起来像下面的屏幕显示 ![在此处输入图像描述](../Images/04b22e8019560bc329c3b2abc6627a54.png) ![在此处输入图像描述](../Images/2dd4fad460d659f496587782c3ccb580.png)

当我将相同的图像实例分配给 WebViewController 中的图像视图时，它的工作 imageview.image=mypimage;

所以有人可以建议我为什么我的 webveiw 不显示图像。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T09:46:37.020

使用这个代码......希望它会帮助你。

```
- (IBAction)pinit:(id)sender {
    [self postToPinterest];
}

- (IBAction)closeWebVIew:(id)sender {
    [webViewPinterest setHidden:YES];
}

- (NSString*) generatePinterestHTML {
   NSString *description = @"Post your description here";
 NSURL* sUrl = [NSString stringWithFormat:@"http://4.bp.blogspot.com/-w4oTZjlpgwo/T5_pi-KJPuI/AAAAAAAAAoM/rKm3E0XCbgY/s1600/red_rose_flower3.jpg"];// pass your link here with your image name

    NSLog(@"URL:%@", sUrl);
   NSString *protectedUrl = ( NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,( CFStringRef)sUrl, NULL, (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ",CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
    NSLog(@"Protected URL:%@", protectedUrl);
    NSString *imageUrl = [NSString stringWithFormat:@"\"%@\"", sUrl];
    NSString *buttonUrl = [NSString stringWithFormat:@"\"http://pinterest.com/pin/create/button/?url=www.flor.com&media=%@&description=%@\"", protectedUrl, description];

    NSMutableString *htmlString = [[NSMutableString alloc] initWithCapacity:1000];
    [htmlString appendFormat:@"<html> <body>"];
    [htmlString appendFormat:@"<p align=\"center\"><a href=%@ class=\"pin-it-button\" count-layout=\"horizontal\"><img border=\"0\" src=\"http://assets.pinterest.com/images/PinExt.png\" title=\"Pin It\" /></a></p>", buttonUrl];
    [htmlString appendFormat:@"<p align=\"center\"><img width=\"400px\" height = \"400px\" src=%@></img></p>", imageUrl];
    [htmlString appendFormat:@"<script type=\"text/javascript\" src=\"//assets.pinterest.com/js/pinit.js\"></script>"];
    [htmlString appendFormat:@"</body> </html>"];
    return htmlString;
}

- (void) postToPinterest {
    NSString *htmlString = [self generatePinterestHTML];
    NSLog(@"Generated HTML String:%@", htmlString);
    webViewPinterest.backgroundColor = [UIColor clearColor];
    webViewPinterest.opaque = NO;
    if ([webViewPinterest isHidden]) {
        [webViewPinterest setHidden:NO];
    }
    [webViewPinterest loadHTMLString:htmlString baseURL:nil];
    //[webViewPinterest loadHTMLString:@"<img src=images.png>" baseURL:nil];
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    return YES;
}

- (void)webViewDidStartLoad:(UIWebView *)webView {
    [busyIndicator startAnimating];
}

-(void)webViewDidFinishLoad:(UIWebView *)webView {
    [busyIndicator stopAnimating];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T08:35:22.867

在发布答案之前，我要特别感谢@Sudha，他让我知道如果不在服务器上发布图片，我们就不能直接在 pinterest 上发布来自应用程序的本地图片。因此，当我在服务器上发布图像并将适当的 URL 地址分配给 pinit 按钮时，以这种方式移动想法，然后它对我有用。干杯! 当我开始搜索与 pinterest 的 iOS 应用集成时，我发现这方面的帮助和材料非常少。我认为大多数开发人员都使用了[这种](https://stackoverflow.com/questions/9909511/ios-application-integration-with-pinterest)方法，但是当我使用上面引用的方法时，它并没有在 pinterest 上发布我的本地应用程序图像。最后，我想为那些最有可能在 pinterest 上发布来自应用程序的本地图像的人发布我的答案。

**脚步**

1.  创建一个新类 WebViewController 并添加以下内容。

    ```
    #import <UIKit/UIKit.h>

    @interface WebViewController : UIViewController
    {
     IBOutlet UIActivityIndicatorView *UIHelper;
     IBOutlet UIWebView *mywebview;
     UIImage *mypimage;
     }
     @property(nonatomic,retain)UIActivityIndicatorView *UIHelper;
     @property(nonatomic,retain)UIWebView *mywebview;
     @property(nonatomic,retain) UIImage *mypimage;
     -(IBAction)closeClicked:(id)sender ;
     @end 
    ```

2.  现在 WebViewController.m 文件代码

    ```
    #import "WebViewController.h"

    @interface WebViewController ()

    @end

     @implementation WebViewController
     @synthesize UIHelper,mypimage,mywebview;
     NSString *username;

    -(IBAction)closeClicked:(id)sender {
     [self dismissModalViewControllerAnimated:YES];
     }
     - (void)webViewDidStartLoad:(UIWebView *)webView {
       [UIHelper startAnimating];
       }
    -(void)webViewDidFinishLoad:(UIWebView *)webView {
     [UIHelper stopAnimating];
      }
    - (void)viewDidLoad
     {
       username = @"j&D";
    [username retain];

    NSData *imageData = UIImageJPEGRepresentation(mypimage, 90);
    NSString *urlString = @"ServerURl/cap.php";
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];
    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];
    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@.jpg\"\r\n",username] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:body];
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
        NSLog(@"serverurl :%@",returnString);

        NSString *htmlString = [self generatePinterestHTML];
        NSLog(@"Generated HTML String:%@", htmlString);
        mywebview.backgroundColor = [UIColor clearColor];
        mywebview.opaque = NO;
        if ([mywebview isHidden]) {
        [mywebview setHidden:NO];
        }
        [mywebview loadHTMLString:htmlString baseURL:nil];
         [super viewDidLoad];
         }
        - (NSString*) generatePinterestHTML {
          NSString *description = @"Post your description here";
          NSString *sUrl = [NSString stringWithFormat:@"SerVerUrl/cap/j&D.jpg"];
          NSLog(@"URL:%@", sUrl);
          NSString *protectedUrl = ( NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,( CFStringRef)sUrl, NULL, (CFStringRef)@"!'\"();:@&=+$,/?%#[]% ",CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
          NSLog(@"Protected URL:%@", protectedUrl);
          NSString *imageUrl = [NSString stringWithFormat:@"\"%@\"", sUrl];
          NSString *buttonUrl = [NSString stringWithFormat:@"\"http://pinterest.com/pin/create/button/?url=www.flor.com&media=%@&description=%@\"", protectedUrl, description];

           NSMutableString *htmlString = [[NSMutableString alloc] initWithCapacity:1000];
           [htmlString appendFormat:@"<html> <body>"];
           [htmlString appendFormat:@"<p align=\"center\"><a href=%@ class=\"pin-it-button\" count-layout=\"horizontal\"><img border=\"0\" src=\"http://assets.pinterest.com/images/PinExt.png\" title=\"Pin It\" /></a></p>", buttonUrl];
           [htmlString appendFormat:@"<p align=\"center\"><img width=\"400px\" height = \"400px\" src=%@></img></p>", imageUrl];
           [htmlString appendFormat:@"<script type=\"text/javascript\" src=\"//assets.pinterest.com/js/pinit.js\"></script>"];
           [htmlString appendFormat:@"</body> </html>"];
            return htmlString;
           }
          @end 
    ```

3.  创建一个在用户点击您的“Pinit”按钮时调用的方法，该按钮显示带有图像的 webView，您将发布该图像以及 UIWebView 上的“Pinit”按钮。这是我的代码：

    ```
     -(void)pInterest
     {
       UIImage *myImage;
       myImage=imgView.image;
       WebViewController *webViewController = [[WebViewController alloc] initWithNibName:@"WebViewController" bundle:nil];
       webViewController.mypimage = myImage;
       [[[[UIApplication sharedApplication] keyWindow] rootViewController] presentModalViewController:webViewController animated:YES];
    } 
    ```

    **注意：**在上面的代码中，将 SerVerUrl 替换为您自己的服务器 url。

为了使描述更清晰，我在最后提供了一些屏幕截图，以消除可能出现的任何歧义和误解。

![在此处输入图像描述](../Images/df4186dba1e2949d32471a48d8d0d7c9.png)![在此处输入图像描述](../Images/51b4354ee932f57f8ab590e1342b0f81.png)![在此处输入图像描述](../Images/dabf46777b900faafc64b1c252c482ad.png)

如有任何疑问，请随时发表评论！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T11:22:05.297

您可以使用[Pinterest iOS SDK](http://developers.pinterest.com/ios/)

```
Pinterest *_pinterest = [[Pinterest alloc] initWithClientId:pinterestKey];
[_pinterest createPinWithImageURL:@"http://placekitten.com/500/400"
                        sourceURL:@"http://placekitten.com"
                        description:@"Pinning from Pin It Demo"]; 
```

但是，为此，您需要在设备上安装 Pinterest 应用程序。

# python - 使用 urllib 接收附件 - Python

> ID：14652080
> 
> 赞同：1
> 
> 时间：2013-02-01T17:46:08.643
> 
> 标签：python, http, urllib

我正在通过从 python 向它发送请求来测试我的网页软件。我能够发送请求、接收响应并解析 json。但是，网页上的一种选择是下载文件。我发送下载请求并且可以确认响应标头包含我期望的内容（应用程序/八位字节流和适当的文件名），但 Content-Length 为 0。如果长度为 0，我假设该文件实际上并未发送。我能够从其他方式下载文件，所以我知道我的软件可以工作，但我无法让它与 python 一起工作。

我建立请求然后执行：

```
f = urllib.request.urlopen(request)
f.body = f.read() 
```

我希望数据在 f.body 中，但它是空的（我看到“b”）

是否有其他方法可以从 python 中的附件访问文件内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T18:12:45.540

> 是否有其他方法可以从 python 中的附件访问文件内容？

这是在[python-requests](http://docs.python-requests.org/en/latest/)中`urllib`，因为我对此更熟悉。

```
import requests

url = "http://example.com/foobar.jpg"

#make request
r = requests.get(url)
attachment_data = r.content

#save to file
with open(r"C:/pictures/foobar.jpg", 'wb') as f:
  f.write(attachment_data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:42:25.590

事实证明，我需要将一些数据放入文件中，以便在正文中有一些东西。我应该早点注意到这一点。

# python - 通过词组和标签获取文章

> ID：14652081
> 
> 赞同：0
> 
> 时间：2013-02-01T17:46:14.773
> 
> 标签：python, sql, django, orm

我正在搜索我的博客。无论如何，我在实施它时遇到了一些问题。

我有两个模型：

```
class Article(models.Model):
    title = models.CharField(max_length=255)
    content = models.TextField()

class Tag(models.Model):
    article = models.ForeignKey(Article)
    content = models.CharField(max_length=255) 
```

实际搜索有两个字段：词组和标签。短语应该在`Article.title`and中查找`Article.content`，但标签应该查找具有`Tag`对象 by的文章`Tag.content`。

我也要考试！

```
def test_by_phrase_and_tags(self):
    article_content = "spam"
    tag_content1 = "eggs"
    tag_content2 = "cheese"
    article1 = test_utilities.create_article(content=article_content)
    article2 = test_utilities.create_article(content=article_content)
    test_utilities.create_tag(article1, content=tag_content1)
    test_utilities.create_tag(article2, content=tag_content1)
    test_utilities.create_tag(article2, content=tag_content2)
    response = self.client.get(reverse("blog_search"), {
        "phrase": article_content,
        "tags": "{}, {}".format(tag_content1, tag_content2)
    })
    found_articles = response.context[-1]["found_articles"]
    self.assertEqual(found_articles, [article2]) 
```

它创建了两篇内容相同的文章，为两篇文章设置的相同标签和仅为第二篇文章设置的唯一标签。

然后我请求具有内容（两篇文章都应该匹配）和两个标签（只有第二篇文章应该匹配）的文章。总的来说，我断言只返回第二篇文章。

我用原始 SQL 和 Django ORM 尝试了很多东西，但似乎都没有。

使用子查询：

```
SELECT * FROM blog_article
WHERE blog_article.content = "spam"
AND blog_article.id IN (
    SELECT blog_tag.article_id FROM blog_tag
    WHERE blog_tag.content = "eggs"
    OR blog_tag.content = "cheese"
); 
```

加入：

```
SELECT * FROM blog_article
JOIN blog_tag
ON blog_article.id = blog_tag.article_id
WHERE blog_article.content = "spam"
AND blog_tag.content = "eggs"
AND blog_tag.content = "cheese"; 
```

与 ORM 相同和其他的东西......

那么如何获得具有`spam`标题或内容**并**具有标签的文章？我难住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:53:31.760

如果我对您的理解正确，那么您正在寻找具有两个标签而不是其中一个标签的文章`eggs`，`cheese`那么您可以这样做：

```
SELECT * 
FROM blog_article a
INNER JOIN
(
   SELECT article_id
   FROM blog_tag
   WHERE content IN ('eggs', 'cheese')
   GROUP BY article_id
   HAVING COUNT(DISTINCT content) = 2
) b ON a.id = b.article_id
WHERE a.content = 'spam'; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/79853/7)

这个查询背后的想法是，他们称之为[*Relational Division*](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)，这样做的一种方法是子查询的作用：

```
 SELECT article_id
   FROM blog_tag
   WHERE content IN ('eggs', 'cheese')
   GROUP BY article_id
   HAVING COUNT(DISTINCT content) = 2 
```

哪一个是：

```
 GROUP BY article_id
   HAVING COUNT(DISTINCT content) = 2 
```

这将确保每个分组`article_id`的 , 都有两个标签，如果文章有其中一个，则`COUNT(DISTINCT content)`= 1，这将被消除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:58:50.710

如果我理解正确，您想通过短语或标签过滤`article.title`文章`article.content`：

首先`related_name`在标签模型中定义一个 for article：

```
class Tag(models.Model):
    article = models.ForeignKey(Article, related_name='tags') 
```

现在查询：

```
from django.db.models import Q

# supposed input
phrase = 'my search string'
tags = ['tag1', 'tag2']

articles = Article.objects.filter(
   Q(title__icontains=phrase) |
   Q(content__icontains=phrase)) \
   .filter(tags__content__in=tags) \
   .annotate(num_tags=Count('tags')) \
   .filter(num_tags=len(tags)) 
```

# class - 编写 CoffeeScript 类

> ID：14652083
> 
> 赞同：0
> 
> 时间：2013-02-01T17:46:22.763
> 
> 标签：class, coffeescript

我有以下简单的 CoffeeScript 类：

```
class Country
    constructor: (@val) ->
        console.log @val
    foreign: ->
        @val isnt "United States"
    domestic: ->
        not foreign() 
```

我有这个简单的类来确定选择下拉列表的一些逻辑。

我是这样称呼它的：

```
$country = new Country($val) if $('select[id*="country"]').val() > 0
console.log $country.foreign? if $country? 
```

`$val`正在设置一个`on('change')`事件。`$country.foreign?`即使我选择美国以外的国家/地区，也始终评估为真。不知道我在这里做错了什么。@val 被设置为我传入的值，但外部函数无法正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:51:36.083

它应该是

```
console.log $country.foreign()? if $country? 
```

`foreign`是一个函数调用。

这也转化为：

```
if (typeof $country !== "undefined" && $country !== null) {
  console.log($country.foreign() != null);
} 
```

所以你得到一个返回是否为空的日志，你可能想要删除`?`

```
console.log $country.foreign() if $country? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:54:52.820

应该是$country.foreign()？

# ruby - 使用正则表达式将 12 小时时间转换为 24 小时时间

> ID：14652091
> 
> 赞同：2
> 
> 时间：2013-02-01T17:46:50.617
> 
> 标签：ruby, regex, string, time

我有一堆以这种格式显示营业时间的字符串：

```
Mon-Fri: AM7:00-PM8:00\nSat-Sun: AM8:00-PM6:00 
```

我可以通过删除它来处理“AM”部分，但我想将 PM 转换为

*   删除“PM”
*   “：”前的数字加 12
*   注意 PM 有时是两位数的事实（例如 PM11:00）

字符串中可以有零个或多个 PM 时间。

我不确定如何将时间作为数字来操作。我已经做到了这一点：

```
opening_hours.sub! /PM([\d]?[\d]):/, "***\1***" 
```

输出如下内容：

```
AM7:15-***\u0001***00 
```

'\u0001` 可能是由于字符串中的日文字符造成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:52:11.273

您可以利用`String#gsub`接受块的事实。这样的事情会对你有用吗？

```
s = "Mon-Fri: AM7:00-PM8:00\nSat-Sun: AM8:00-PM11:00"

s2 = s.gsub('AM', '').gsub(/PM(\d+)/) do |match|
  (match.gsub('PM', '').to_i + 12).to_s
end

s2 # => "Mon-Fri: 7:00-20:00\nSat-Sun: 8:00-23:00" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:54:24.937

看看这个问题，ruby 有一个名为 datatime 的类。

[在 Ruby 中将 12 小时时间转换为 24 小时格式](https://stackoverflow.com/questions/7422534/convert-12-hr-time-to-24-hr-format-in-ruby)

# oracle11g - JBoss AS 7.1.1 下奇怪的 Oracle 11g JDBC 驱动程序错误

> ID：14652111
> 
> 赞同：3
> 
> 时间：2013-02-01T17:48:20.150
> 
> 标签：oracle11g, java-ee-6, jboss7.x

在我的应用程序中使用 oracle 作为数据库时出现以下异常。警告是随机发生的，即使在服务器启动时也是如此。如果数据库是空的，当它出现时，会出现此警告，并且某些表的 db 生成失败。

我不知道这里发生了什么。

提前致谢

```
4:27:47,263 WARN  [com.arjuna.ats.jta] (Periodic Recovery) ARJUNA016027: Local XARecoveryModule.xaRecovery got XA exception XAException.XAER_RMERR: javax.transaction.xa.XAException 
at oracle.jdbc.xa.OracleXAResource.recover(OracleXAResource.java:709) 
at org.jboss.jca.adapters.jdbc.xa.XAManagedConnection.recover(XAManagedConnection.java:358)     
at org.jboss.jca.core.tx.jbossts.XAResourceWrapperImpl.recover(XAResourceWrapperImpl.java:162)  
at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.xaRecovery(XARecoveryModule.java:503) [jbossjts-4.16.2.Final.jar:] 
at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.resourceInitiatedRecoveryForRecoveryHelpers(XARecoveryModule.java:471) [jbossjts-4.16.2.Final.jar:] 
at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.bottomUpRecovery(XARecoveryModule.java:385) [jbossjts-4.16.2.Final.jar:] 
at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.periodicWorkSecondPass(XARecoveryModule.java:166) [jbossjts-4.16.2.Final.jar:]  
at com.arjuna.ats.internal.arjuna.recovery.PeriodicRecovery.doWorkInternal(PeriodicRecovery.java:789) [jbossjts-4.16.2.Final.jar:]  
at com.arjuna.ats.internal.arjuna.recovery.PeriodicRecovery.run(PeriodicRecovery.java:371) [jbossjts-4.16.2.Final.jar:] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:02:27.260

我找到了解决这个问题的方法。

基于[这个线程](https://community.jboss.org/wiki/ARJUNA016027LocalXARecoveryModulexaRecoveryGotXAExceptionXAExceptionXAERRMERR)，我以管理员身份完成了以下操作：

```
GRANT SELECT ON sys.dba_pending_transactions TO carlos;
GRANT SELECT ON sys.pending_trans$ TO carlos;
GRANT SELECT ON sys.dba_2pc_pending TO carlos;
GRANT EXECUTE ON sys.dbms_system TO carlos; 
```

警告消失了，但我不知道这样做的后果是什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T02:35:53.357

有关与 sys.dbms_system 上的执行权限相关的安全问题，请参阅[http://database-diva.com/blog/?p=6](http://database-diva.com/blog/?p=6)。

# android - Android项目中包私有scala对象的NoClassDefFoundError

> ID：14652125
> 
> 赞同：0
> 
> 时间：2013-02-01T17:49:04.133
> 
> 标签：android, scala, proguard, noclassdeffounderror, dalvik

我正在尝试在 Android 项目中使用 Json4s。我的项目编译等，但我看到以下错误：

> W/dalvikvm(24527): VFY: 无法找到签名中引用的类 (Lcom/thoughtworks/paranamer/CachingParanamer;) I/dalvikvm(24527): 找不到方法 com.thoughtworks.paranamer.CachingParanamer.lookupParameterNames，从方法引用org.json4s.Meta$ParanamerReader$.lookupParameterNames W/dalvikvm(24527): VFY: 无法解析虚拟方法 11: Lcom/thoughtworks/paranamer/CachingParanamer;.lookupParameterNames (Ljava/lang/reflect/AccessibleObject;)[Ljava/lang /细绳; D/dalvikvm(24527)：VFY：在 0x0008 处替换操作码 0x6e E/dalvikvm(24527)：找不到类 'com.thoughtworks.paranamer.CachingParanamer'，引用自方法 org.json4s.Meta$。W/dalvikvm(24527): VFY: 无法解析 Lorg/json4s/Meta$ 中的新实例 15 (Lcom/thoughtworks/paranamer/CachingParanamer;)；D/dalvikvm（24527）：VFY：在 0x0013 W/dalvikvm(24527) 处替换操作码 0x22：VFY：无法找到签名中引用的类 (Lcom/thoughtworks/paranamer/CachingParanamer;) D/dalvikvm(24527)：DexOpt：无法在 Lorg 的 0x17 处选择直接调用 0x0009 /json4s/元$；。D/dalvikvm(24527)：DexOpt：无法在 Lorg/json4s/Meta$ 的 0x1a 处选择直接调用 0x000a；。W/dalvikvm(24527)：异常 Ljava/lang/NoClassDefFoundError；初始化 Lorg/json4s/Meta$ 时抛出；W/System.err(24527): java.lang.ExceptionInInitializerError W/System.err(24527): 在 org.json4s.Extraction$.mkMapping$1(Extraction.scala:207) W/System.err(24527): 在org.json4s.Extraction$.org$json4s$Extraction$$extract0(Extraction.scala:214) W/System.err(24527)：在 org.json4s.Extraction$.extract(Extraction.scala:47) W/System .err(24527)：在 org.json4s.ExtractableJsonAstNode。paranamer.CachingParanamer W/System.err(24527): at org.json4s.Meta$.(Meta.scala:93) W/System.err(24527): at org.json4s.Meta$.(Meta.scala) W /System.err(24527): ... 22 更多 I/dalvikvm(24527): 在先前失败的类 Lorg/json4s/Meta$ 上拒绝重新初始化；v = 0x0 D / AndroidRuntime（24527）：关闭VM W / dalvikvm（24527）：threadid = 1：线程退出未捕获的异常（组= 0x40dc0438）E / AndroidRuntime（24527）：致命异常：主E / AndroidRuntime（24527 ): java.lang.NoClassDefFoundError: org/json4s/Meta$ E/AndroidRuntime(24527): at org.json4s.Extraction$.mkMapping$1(Extraction.scala:207) E/AndroidRuntime(24527): at org.json4s。 Extraction$.org$json4s$Extraction$$extract0(Extraction.scala:214) E/AndroidRuntime(24527): at org.json4s.Extraction$.extract(Extraction.scala:47) E/AndroidRuntime(24527): at org .

我不确定 dalvikvm 是否有问题，或者只是 proguard 问题。如果相关，Json4s.Meta 的源代码如下所示：

```
package org.json4s

import java.lang.reflect.{Constructor => JConstructor, Field, Type, ParameterizedType, GenericArrayType}
import java.util.Date
import java.sql.Timestamp
import com.thoughtworks.paranamer.{ParameterNamesNotFoundException, BytecodeReadingParanamer, CachingParanamer}
import scalashim._

case class TypeInfo(clazz: Class[_], parameterizedType: Option[ParameterizedType])

trait ParameterNameReader {
  def lookupParameterNames(constructor: JConstructor[_]): Traversable[String]
}

private[json4s] object Meta {
  import com.thoughtworks.paranamer._ 
```

其次是一堆案例类等。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:48:20.147

代码中似乎`com.thoughtworks.paranamer.CachingParanamer`缺少该类。这可能是因为它从一开始就从库中丢失，或者因为 ProGuard 已将其删除或重命名（错误地？）。

在前一种情况下，您应该确保所有必需的库都存在于您的 libs 目录中。如果输入中似乎缺少任何类，ProGuard 应该会抱怨。

在后一种情况下，您应该确保在 Android SDK 中使用的是最新版本的 ProGuard（此时为 4.8 或 4.9beta）。如果这没有帮助，您可以尝试明确保留该类：

```
-keep class com.thoughtworks.paranamer.CachingParanamer 
```

这不太可能是一个合适的解决方案，因为 ProGuard 确实应该为您解决这个问题。

# java - 如何读取 java.util.InputMismatchException 堆栈跟踪

> ID：14652128
> 
> 赞同：0
> 
> 时间：2013-02-01T17:49:10.067
> 
> 标签：java

我正在努力阅读下面的这个堆栈跟踪异常。我想知道你能不能帮帮我？

我不理解代码中的任何数字（例如数字 74、2119 和 2160，它们在此异常中代表什么？从字面上看，我需要知道我的代码的哪一行导致了问题，以便我可以解决它。请帮忙。

下面是我的堆栈跟踪，下面是我试图解析的 java 代码以及任务附带的示例输入文件。

```
java.util.InputMismatchException
  in java.util.Scanner.throwFor(Scanner.java:909)
  in java.util.Scanner.next(Scanner.java:1530)
  in java.util.Scanner.nextInt(Scanner.java:2160)
  in java.util.Scanner.nextInt(Scanner.java:2119)
  in League.loadLeague(League.java:74)
  in (Workspace:1) 
```

在这里，下面是我的Java代码，其中的方法`loadLeague`让我很头疼！

```
import java.io.*;
import java.util.*;

/**  
 * Class League - An instance of this class represents the teams in a
 * football (or similar) league. It provides a class method for creating
 * a new instance of League by reading the data for the teams from a CSV
 * file.
 * 
 * @author Lewis Jones 
 * @version 1.0
 */

public class League
{
   /* instance variables */
   private String name;  // The name of the league
   private Team[] teams; // An array to hold the teams in the league

   /**
    * Constructor for objects of class League. It sets the name of the league
    * to the String object provided as the first argument and initialises teams
    * to an array of the size provided as the second argument. This constructor 
    * is private as it is intended for use only by the class method loadLeague().
    */
   private League(String aName, int size)
   {
      super();
      this.name = aName;
      this.teams = new Team[size];
   }

   /* class method */
   /**
    * This method creates a new League object by reading the required details from
    * a CSV file. The file must be organised as follows:
    *     name(String), number of teams (int)
    *     team name(String), won(int), drawn(int), lost(int), for(int), against    (int)
    *        and so on for each team
    * Having created the new League object the method should create all the Team 
    * objects (using the data in the file to set their attributes) and add them 
    * to the teams array.
    */
   public static League loadLeague()
   {
      League theLeague = null;
      String pathname = OUFileChooser.getFilename();
      File aFile = new File(pathname);
      Scanner bufferedScanner = null;

      try
      {
         String leagueName;
         int numberOfTeams;

         String teamName;
         int won;
         int drawn;
         int lost;
         int goalsFor;
         int goalsAgainst;
         Scanner lineScanner;
         String currentLine;
         bufferedScanner = new Scanner(new BufferedReader(new FileReader (aFile)));    

         while (bufferedScanner.hasNextLine())
         {
            currentLine = bufferedScanner.nextLine();
            lineScanner = new Scanner(currentLine);
            lineScanner.useDelimiter(",");

            leagueName = bufferedScanner.next();
            numberOfTeams = bufferedScanner.nextInt();

            teamName = bufferedScanner.next();
            won = lineScanner.nextInt();
            drawn = lineScanner.nextInt();
            lost = lineScanner.nextInt();
            goalsFor = lineScanner.nextInt();
            goalsAgainst = lineScanner.nextInt();

            Team aTeam = new Team(lineScanner.next());
            aTeam.setWon(lineScanner.nextInt());
            aTeam.setDrawn(lineScanner.nextInt());
            aTeam.setLost(lineScanner.nextInt());
            aTeam.setGoalsFor(lineScanner.nextInt());
            aTeam.setGoalsAgainst(lineScanner.nextInt());
            Team[] teams = new Team[numberOfTeams];
            teams[numberOfTeams] = aTeam;
            numberOfTeams++;
            theLeague = new League(leagueName, numberOfTeams);
         }
      }  
      catch (Exception anException)
      {
         System.out.println("Error: " + anException);
      }
      finally
      {
         try
         {
            bufferedScanner.close();
         }
         catch (Exception anException)
         {
            System.out.println("Error: " + anException);
         }
      }
      return theLeague;
   }

   /* instance methods */

   /**
    * Displays the league table in tabular format to the standard output
    */
   public void display()
   {
      System.out.println(this.name);
      System.out.format("%20s %2s %2s %2s %2s %2s %2s %    2s\n","","P","W","L","D","F","A","Pt");
      for (Team eachTeam : this.teams)
      {
         System.out.format("%20s %2d %2d %2d %2d %2d %2d %2d\n",
                       eachTeam.getName(), eachTeam.getPlayed(), 
                       eachTeam.getWon(), eachTeam.getDrawn(), 
                       eachTeam.getLost(),eachTeam.getGoalsFor(), 
                       eachTeam.getGoalsAgainst(), eachTeam.getPoints());        
      }
   }

   /**
    * Arrange the elements of teams in their natural order. This will only
    * work if a natural order has been defined for the class Team.
    */
   public void sort()
   {
      // to be written later...
   }
} 
```

下面是程序应该读入的示例（文件）输入：

```
Scottish League Division 1,10
Airdrie United ,3,2,11,14,25
Clyde          ,5,7,4,21,17
Dundee         ,7,2,7,21,18
Gretna         ,10,3,3,43,20
Hamilton Acas  ,7,5,4,19,20
Livingstone    ,6,6,4,21,15
Partick Thistle,8,4,4,25,29
Queen of South ,3,3,10,11,31
Ross County    ,4,4,8,14,24
St Johnstone   ,6,6,4,26,16 
```

我已经为这项任务苦苦挣扎了将近一个星期！我希望有人来救我，因为它现在真的在我的皮肤上。请帮忙。任何指出我写错了代码的提示都将非常感激。

感谢你们，

刘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:53:10.650

这些数字（74、2119 和 2160）是代码行。堆栈跟踪的最上面一行是实际发生错误的位置，其余的是堆栈跟踪中的调用位置。

所以在这种情况下，`Scanner.java:909`意味着错误发生在 Scanner 类的第 909 行，该错误发生在 Scanner 的第 1530 行调用的函数中，依此类推。

# php - 在 CLI 上运行 php -v 时收到 PHP 警告

> ID：14652132
> 
> 赞同：0
> 
> 时间：2013-02-01T17:49:31.263
> 
> 标签：php, sphinx, eaccelerator

在我的服务器上运行 php -v 时出现以下错误，它运行了很多天并突然出现：

> PHP 警告：PHP 启动：无法加载动态库 './/usr/local/sphinx/sphinx.so' - .//usr/local/sphinx/sphinx.so：无法打开共享对象文件：没有这样的文件或目录在第 0 行的未知中
> 
> PHP 警告：PHP 启动：无法加载动态库 './/usr/local/lib/php/extensions/no-debug-non-zts-20060613/eaccelerator.so' - .//usr/local/lib/php /extensions/no-debug-non-zts-20060613/eaccelerator.so：无法打开共享对象文件：第 0 行的 Unknown 中没有此类文件或目录
> 
> PHP 5.2.17 (cli) (built: Apr 2 2012 18:43:50) Copyright (c) 1997-2010 The PHP Group Zend Engine v2.2.0, Copyright (c) 1998-2010 Zend Technologies with the ionCube PHP Loader v4 .0.14，版权所有 (c) 2002-2011，ionCube Ltd.

# ember.js - Ember 身份验证最佳实践？

> ID：14652133
> 
> 赞同：48
> 
> 时间：2013-02-01T17:49:32.777
> 
> 标签：ember.js

有没有人有使用 pre4 中的新路由器创建身份验证机制的经验？

以下是我到目前为止的一些想法：

*   为了将视图（Ember 应用程序）与服务器（Rails 应用程序）完全分开，我想使用令牌身份验证。我可能会在 Rails 服务器上使用 Devise。
*   我需要在 Ember 应用程序中使用类似 before_filter 的东西，我可以在其中检查是否存在当前用户以及该用户是否设置了身份验证令牌。
*   Rails 服务器将在每次调用时返回当前的身份验证令牌。如果它返回一个空的身份验证令牌，Ember 应用程序应该检测到这一点并转换到未经身份验证的状态，重定向到登录视图。

我怀疑我应该为此使用 Ember 状态机，但我不确定如何继续。有人解决过这个问题吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-01T19:27:31.000

更新：就像@DustMason 在他的回答中所说，查看令人敬畏的[embercasts](http://www.embercasts.com)以获取身份验证最佳实践。

*   [客户端认证第一部分](http://www.embercasts.com/episodes/client-side-authentication-part-1)
*   [客户端认证第二部分](http://www.embercasts.com/episodes/client-side-authentication-part-2)

> 为了将视图（Ember 应用程序）与服务器（Rails 应用程序）完全分开，我想使用令牌身份验证。我可能会在 Rails 服务器上使用 Devise。

说得通。

> 我需要在 Ember 应用程序中使用类似 before_filter 的东西，我可以在其中检查是否存在当前用户以及该用户是否设置了身份验证令牌。

你可以在路由上添加一个`enter`钩子，这大致相当于一个 before_filter。但不确定这是检查身份验证令牌的最佳位置。

> Rails 服务器将在每次调用时返回当前的身份验证令牌。

说得通。我们使用 cookie-auth 并通过调用获取当前用户配置文件，`/api/me`但两者都应该工作。

> 如果它返回一个空的身份验证令牌，Ember 应用程序应该检测到这一点并转换到未经身份验证的状态，重定向到登录视图。

关于这种方法的事情是（与 rails 不同）“保护”对特定 ember 路线的访问并不容易。并且无论用户总是可以弹出打开的 JS 控制台并进入他们想要的任何状态。因此，与其认为“用户只有通过身份验证才能进入这种状态”，不如考虑“如果未经身份验证的用户以某种方式导航到这条路线怎么办”

> 我怀疑我应该为此使用 Ember 状态机，但我不确定如何继续。有人解决过这个问题吗？

我们的身份验证需求非常简单，因此我们还没有发现需要状态机。相反，我们`isAuthenticated`在 ApplicationController 上有一个属性。当用户未通过身份验证时，我们使用此属性`application.hbs`将主视图替换为登录表单。

```
{{if isAuthenticated}}
  {{render "topnav"}}
  {{outlet}}
{{else}}
  {{render "login"}}
{{/if}} 
```

从 ApplicationRoute，我们获取用户配置文件：

```
App.ApplicationRoute = Ember.Route.extend({
  model: function() {
    var profiles;
    profiles = App.Profile.find({ alias: 'me' });
    profiles.on("didLoad", function() {
      return profiles.resolve(profiles.get("firstObject"));
    });
    return profiles;
  }
}); 
```

然后我们的 ApplicationController 根据返回的配置文件计算它的 isAuthenticated 属性。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-12T19:55:26.270

我建议为此使用[ember-auth](https://github.com/heartsentwined/ember-auth)。它实现了所有需要的功能，并且在我看来效果很好。

同一作者还提供了一个使用 Devise on Rails 的[演示和教程。](https://github.com/heartsentwined/ember-auth-rails-demo)

我还实现了一个基于 Ember-auth 的基本 Ember 应用程序，带有 Devise 令牌身份验证和 Google 和 LinkedIn 的示例 Oauth，可以在[此处](https://github.com/joscas/base_app)找到并在此处直播：[https ://starter-app.herokuapp.com](https://starter-app.herokuapp.com)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-12-04T23:02:04.403

我最近从定制的身份验证系统更改为使用[ember-simple-auth](https://github.com/simplabs/ember-simple-auth)，发现它很容易与我的应用程序集成。它满足所有 OP 要求，并且还内置了对刷新令牌的支持。

他们有一个非常好的 API 和一组很棒的示例。任何对基于令牌的身份验证感兴趣的人都应该检查一下。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-30T20:35:44.090

在我看来，新发布的 Ember 异步路由器让设置一个不错的身份验证流程变得更加容易！查看[http://www.embercasts.com/](http://www.embercasts.com/)上的两部分系列以获得一个很好的例子

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-24T13:31:53.897

Josep 的[示例应用程序](https://github.com/joscas/base_app)非常好。我制作了他的 repo 的副本，以展示如何使用 ActiveRecord 而不是 mongoid，并启用 Devise 可确认模块。你可以在[这里](https://github.com/jhosteny/EmberAuthExample)找到它。这个 repo 是从头开始重建的，而不是分叉的，因为我想强迫自己完成所有步骤以使其正常工作。如果我添加一个带有必要更改的叉子以使其正常工作，我将更新此答案。

# c++ - 需要提升 python 显式类型转换

> ID：14652136
> 
> 赞同：3
> 
> 时间：2013-02-01T17:49:41.047
> 
> 标签：c++, boost-python

我有混合系统（c++，boost python）。在我的 C++ 代码中有非常简单的层次结构

```
class Base{...}
class A : public Base{...}
class B : public Base{...} 
```

还有 2 个业务（在 C++ 上）方法

```
smart_ptr<Base> factory() //this produce instances of A and B
void consumer(smart_ptr<A>& a) //this consumes instance of A 
```

在 python 代码中，我创建 A 的实例`factory`并尝试调用使用者方法：

```
v = factory() #I'm pretty sure that it is A instance
consumer(v) 
```

绝对合理我有例外：

> consumer(Base) 中的 Python 参数类型与 C++ 签名不匹配：consumer(class A{lvalue})

发生这种情况是因为无法告诉 Boost 应该进行一些转换工作。

有什么方法可以指定动态转换行为吗？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T18:56:13.380

说到`boost::shared_ptr`，Boost.Python 通常会提供所需的功能。`to_python`在这种特殊情况下，只要模块声明定义了`Base`由 持有的`boost::shared_ptr<Base>`，并且 Boost.Python 被告知`A`继承自，就不需要显式提供自定义转换器`Base`。

```
BOOST_PYTHON_MODULE(example) {
  using namespace boost::python;
  class_<Base, boost::shared_ptr<Base>, 
         boost::noncopyable>("Base", no_init);
  class_<A, bases<Base>,
         boost::noncopyable>("A", no_init);
  def("factory",  &factory);
  def("consumer", &consumer);
} 
```

Boost.Python 目前不支持自定义左值转换器，因为它需要更改核心库。因此，该`consumer`函数需要接受`boost:shared_ptr<A>`按值或按常量引用。以下任何一个签名都应该有效：

```
void consumer(boost::shared_ptr<A> a)
void consumer(const boost::shared_ptr<A>& a) 
```

* * *

这是一个完整的例子：

```
#include <boost/python.hpp>
#include <boost/make_shared.hpp>

class Base
{
public:
  virtual ~Base() {}
};

class A
  : public Base
{
public:
  A(int value) : value_(value) {}
  int value() { return value_; };
private:
  int value_;
};

boost::shared_ptr<Base> factory()
{
  return boost::make_shared<A>(42);
}

void consumer(const boost::shared_ptr<A>& a)
{
  std::cout << "The value of object is " << a->value() << std::endl;
}

BOOST_PYTHON_MODULE(example) {
  using namespace boost::python;
  class_<Base, boost::shared_ptr<Base>, 
         boost::noncopyable>("Base", no_init);
  class_<A, bases<Base>,
         boost::noncopyable>("A", no_init);
  def("factory",  &factory);
  def("consumer", &consumer);
} 
```

以及用法：

```
>>> from example import *
>>> x = factory()
>>> type(x)
<class 'example.A'>
>>> consumer(x)
The value of object is 42
>>> 
```

由于指定的模块声明`Base`是 的基类`A`，Boost.Python 能够解析从`factory()`to返回的类型`example.A`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T13:47:57.483

就在这里。您必须声明自己的“from-python”转换器。boost.python 文档中对它进行了模糊的解释（请查看[常见问题解答中的此答案](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/faq.html#custom_string)），但您会在网上找到教程，例如[这个](http://misspent.wordpress.com/2009/09/27/how-to-write-boost-python-converters/)。这是一个完整的示例，基于您想要执行的初始输入：

```
#include <boost/python.hpp>
#include <boost/make_shared.hpp>

class Base {
  public:
    virtual ~Base() {}
};

class A: public Base {
  public:
    A(int v): _value(v) {}
    int _value;
};

boost::shared_ptr<Base> factory() {
  return boost::make_shared<A>(27);
}

void consumer(boost::shared_ptr<A> a) {
  std::cout << "The value of object is " << a->_value << std::endl;
}

struct a_from_base {

  typedef typename boost::shared_ptr<A> container_type;

  // Registers the converter for boost.python
  a_from_base() {
    boost::python::converter::registry::push_back(&convertible, &construct,
        boost::python::type_id<container_type>());
  }

  // Determines convertibility: checks if a random 
  // object is convertible to boost::shared_ptr<A>
  static void* convertible(PyObject* ptr) {
    boost::python::object object(boost::python::handle<>(boost::python::borrowed(ptr)));
    boost::python::extract<boost::shared_ptr<Base> > checker(object);
    if (checker.check()) { //is Base
      boost::shared_ptr<Base> base = checker();
      if (boost::dynamic_pointer_cast<A>(base)) return ptr; //is A
    }
    return 0; //is not A
  }

  // Runs the conversion (here we know the input object *is* convertible)
  static void construct(PyObject* ptr, boost::python::converter::rvalue_from_python_stage1_data* data) {

    // This is some memory allocation black-magic that is necessary for bp
    void* storage = ((boost::python::converter::rvalue_from_python_storage<container_type>*)data)->storage.bytes;
    new (storage) container_type();
    data->convertible = storage;
    container_type& result = *((container_type*)storage); //< your object

    // The same as above, but this time we set the provided memory
    boost::python::object object(boost::python::handle<>(boost::python::borrowed(ptr)));
    boost::shared_ptr<Base> base = boost::python::extract<boost::shared_ptr<Base> >(object);
    result = boost::dynamic_pointer_cast<A>(base);
  }

};

// Your boost python module: compile it and run your test
// You should get "The value of object is 27".
BOOST_PYTHON_MODULE(convertible) {
  using namespace boost::python;
  class_<Base, boost::shared_ptr<Base>, boost::noncopyable>("Base", no_init);
  class_<A, boost::shared_ptr<A>, bases<Base>, boost::noncopyable>("A", no_init);
  a_from_base();
  def("factory", &factory);
  def("consumer", &consumer);
} 
```

您可以通过为您的类编写另一个 from-python 转换器来扩展此示例，`B`或者只是模板上面的结构以容纳`Base`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T05:44:31.273

正如它所提出的那样，您的问题无法使用自动（或手动）from-python 转换器来解决，如[该线程](http://mail.python.org/pipermail/cplusplus-sig/2008-May/013263.html)中所述。您将需要对其进行修补，模拟动态类型行为，以便它按照您对 Python 的期望工作。我假设，由于您传递的是非常量引用，因此您需要在`consumer()`方法内更改它。

这是一个完整的示例。C++ 管道需要知道所有可能的派生`Base`或 a`TypeError`在 Python 中提出。动手：

```
#include <boost/python.hpp>
#include <boost/make_shared.hpp>

class Base {
  public:
    Base(int value) : value_(value) {}
    virtual ~Base() {}
    int value() const { return value_; };
    void value(int value) { value_ = value; }
  private:
    int value_;
};

class A : public Base {
  public:
    A(int value): Base(value) {}
};

class B : public Base {
  public:
    B(int value): Base(value) {}
};

class C : public Base {
  public:
    C(int value): Base(value) {}
};

boost::shared_ptr<Base> factory(boost::python::str choose) {
  if (choose == "a") return boost::make_shared<A>(1);
  else if (choose == "b") return boost::make_shared<B>(10);
  else return boost::make_shared<C>(100);
}

void consumer_a(boost::shared_ptr<A>& a) {
  std::cout << "The value of object was " << a->value() << std::endl;
  a = boost::make_shared<A>(a->value()+1);
  std::cout << "The new value of object is " << a->value() << std::endl;
}

void consumer_b(boost::shared_ptr<B>& b) {
  std::cout << "The value of object is " << b->value() << std::endl;
  b = boost::make_shared<B>(b->value()+1);
  std::cout << "The new value of object is " << b->value() << std::endl;
}

void consumer_python(boost::shared_ptr<Base>& base) {
  //try the first one
  boost::shared_ptr<A> a = boost::dynamic_pointer_cast<A>(base);
  if (a) {
    consumer_a(a);
    base = a; ///< don't forget the assignment here
    return;
  }

  //try the second one
  boost::shared_ptr<B> b = boost::dynamic_pointer_cast<B>(base);
  if (b) {
    consumer_b(b);
    base = b; ///< don't forget the assignment here
    return;
  }

  //we leave C uncovered to see what happens ;-)

  //if you get here, you can raise an exception for python
  PyErr_Format(PyExc_TypeError, "Input type is neither A or B");
  throw boost::python::error_already_set();
}

//notice you don't even need to declare a binding for A, B or C
BOOST_PYTHON_MODULE(example) {
  using namespace boost::python;
  class_<Base, boost::shared_ptr<Base>, boost::noncopyable>("Base", no_init);
  def("factory",  &factory);
  def("consumer", &consumer_python);
} 
```

编译后，您可以运行此脚本并查看它是否正常工作：

```
import example
print "Creating object of type A..."
a = example.factory("a")
print "Consuming A twice..."
example.consumer(a)
example.consumer(a)

print "Creating object of type B..."
b = example.factory("b")
print "Consuming B twice..."
example.consumer(b)
example.consumer(b)

print "Creating object of type C..."
c = example.factory("c")
print "Trying to consume (uncovered) C..."
example.consumer(c) 
```

输出应该是这样的：

```
Creating object of type A...
Consuming A twice...
The value of object was 1
The new value of object is 2
The value of object was 2
The new value of object is 3
Creating object of type B...
Consuming B twice...
The value of object is 10
The new value of object is 11
The value of object is 11
The new value of object is 12
Creating object of type C...
Trying to consume (uncovered) C...
Traceback (most recent call last):
  File "test.py", line 25, in <module>
    example.consumer(c)
TypeError: Input type is neither A or B 
```

# php - 如何根据内容更改内容? 我在两件事上需要帮助，因为我不精通 PHP：内容会根据以下内容而变化： <select><option>Option 1</option> <option>Option 2</option></select> 我认为可以使用 PHP 来完成，方法是为选项命名，让 PHP 获取名称，根据这些名称创建变量并放置一个“包含”来显示变化的内容。这是脚本的模型： READ Select IF User

> ID：14652144
> 
> 赞同：3
> 
> 时间：2013-02-01T17:50:08.537
> 
> 标签：php

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T18:20:58.443

可能有几种不同的方法可以实现您的目标。如果我们按照您的要求坚持使用 PHP，那么这样的事情可能是最好的。出于安全目的，我在这里使用了 case/switch 并使用 POST 而不是 GET 来防止 URL 操作，尽管使用 case/switch 无论如何您已经解决了很多 URL 操作，因此它成为您的偏好问题。

```
<?php
$page = null;
if(isset($_POST['page'])){
    $page = $_POST['page'];
}
switch($page){
    case 'page3': include_once('/path/to/page3content.php'); break;
    case 'page2': include_once('/path/to/page2content.php'); break;
    case 'page1': include_once('/path/to/page1content.php'); break;
    default: include_once('/path/to/defaultcontent.php'); break;
}
?>
<form name="myform" action="" method="post">
    <select name="page" onchange="this.form.submit()">
        <option value="page1"<?php if($page == "page1"){ echo " selected"; }?>>Page 1</option>
        <option value="page2"<?php if($page == "page2"){ echo " selected"; }?>>Page 2</option>
        <option value="page3"<?php if($page == "page3"){ echo " selected"; }?>>Page 3</option>
    </select>
</form> 
```

但是，根据您的文件结构，您可以通过一点基本的 Javascript 和 HTML 完成类似的任务，甚至更轻松。

```
<select name="page" onchange="window.location=this.value">
    <option value="/path/to/page1.php">Page 1</option>
    <option value="/path/to/page2.php">Page 2</option>
    <option value="/path/to/page3.php">Page 3</option>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:19:32.277

您还可以绕过提交按钮并使用以下内容：

```
<form action="index.php" name="myForm"  method="post">
    <select onchange="window.location.href = this.value" name="select">
        <option value="index.php?page=yourpage">yourpage</option>
        <option value="index.php?page=yourpage2">yourpage2</option>
    </select>
</form> 
```

然后你的内容会去哪里，你可以：

```
<?php 
    if (isset($_GET['page'])) {
            if ($_GET['page'] == "yourpage") {include("pages/page1.php");}
            else ($_GET['page'] == "yourpage2") {include("pages/page2.php");}
    } else {include("pages/default.php");}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:59:59.283

您需要在标签中有一个`name`字段`select`，并`value`在标签中有字段`option`：

```
<form name='myform' action='myform.php' method='POST'>
  <select name='myselect'>
    <option value='1'>Option 1</option>
    <option value='2'>Option 2</option>
    <option value='3'>Option 3</option>
  </select>
  <input type='submit'>
</form> 
```

然后 PHP 页面将通过 接收选择`$_POST['myselect']`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T18:00:07.683

您可以提交 select 选项的 onChange 事件的表单。

然后您可以运行 a`$_GET`并通过比较的值来显示该特定页面的适当内容`$_GET['page']`

```
 <form action="page.php" method="get">    
    <select name="page" onchange="this.form.submit()">
            <option value="page1">Page 1</option>
            <option value="page2">page 2</option>
        </select>
    </form>
        <?php
        if(isset($_GET['page'])){

            if($_GET['page']=="page1"{

             //content for page 1

            }elseif($_GET['page']=="page2"{

             //content for page 2

            }

        }

        ?> 
```

这样，您也将不需要提交按钮。您还可以通过比较的值将其重定向到特定页面，`$_GET['page']`但是您需要使用适当的方法在每个页面中包含此表单以完成您的工作。

# javascript - jQuery page on/live/bind pageinit, pageshow

> ID：14652145
> 
> 赞同：10
> 
> 时间：2013-02-01T17:50:09.987
> 
> 标签：javascript, jquery, html, web-applications, jquery-mobile

我正在使用 jQuery mobile 开发应用程序，我试图将用户面板中的所有页面放入一个大文件中，并通过一个大的 .js 文件运行它。我不知道我是否可以用这种方式编写我的 .js 文件：

在加载用户面板时进行初始化

```
$(document).on('pageinit', function(){

}); 
```

如果我可以这样说，那么当某个页面将被 id 调用时：

```
$("#userpanel").on('pageshow', function(){

}); 
```

在每个页面的第一个这样的内部：

```
$(document).on('pageinit', function(){

    $("#userpanel").on('pageshow', function(){

    });

    $("#*********").on('pageshow', function(){

    });

    $("#*********").on('pageshow', function(){

    });

}); 
```

等等，这是它的工作原理还是我误解了 jQuery/JS 的基本概念？如果是，什么是好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:00:44.803

首先不要将**`page events`**其用作其他页面事件的子项，这并不意味着那样工作。在这种情况下，所有这些**`pageshow`**事件将在没有其 parent 的情况下正常触发**`pageinit`**。

**[这是](http://jsfiddle.net/Gajotres/jg8Q2/)**一个工作**`jsFiddle`**示例。

要了解有关**`jQuery Mobile`**页面事件的更多信息，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，为了更加透明，这是我的个人博客。或者可以在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到。

所以声明页面事件的正确方法是这样的：

```
$("#userpanel").on('pagebeforeshow', function(){

});

$("#userpanel").on('pageshow', function(){

});

$("#userpanel").on('pagebeforeshow', function(){

});

$("#userpanel").on('pageshow', function(){

});

$("#userpanel").on('pagebeforeshow', function(){

});

$("#userpanel").on('pageshow', function(){

}); 
```

# javascript - 将javascript变量传递给html进行显示

> ID：14652147
> 
> 赞同：3
> 
> 时间：2013-02-01T17:50:22.563
> 
> 标签：javascript, html

我正在使用以下

```
var loan = parseFloat(document.getElementById("loanamount"));

document.getElementById('numpay').textContent = loan.toString(); 
```

我的html是这样的：

```
<p>Number of Payments:    <a id="numpay"> </a> </p> 
```

我觉得这应该可以工作，但无论我如何配置它，我的 html 中似乎都无法获得除 NaN 之外的任何内容。我知道我是 javascript 的新手，但你能给我一个小费吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:52:35.987

你`parseFloat(document.getElementById("loanamount").value)`很可能需要

*提示：*而不是`parseFloat`，只需用于`+`将字符串转换为数字。所以`+document.getElementById("loanamount").value`也应该服务于你的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:52:57.187

```
var loan = parseFloat(document.getElementById("loanamount").value);

document.getElementById('numpay').textContent = loan.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:54:33.103

如果您不做任何事情，`loan`那么只需执行以下操作：

```
document.getElementById('numpay').textContent = document.getElementById("loanamount").value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T17:59:43.083

如果id为loanamount的元素是输入，则需要.getElementById("loanamount").value，如果是span或div，则需要.getElementById("loanamount").innerHTML。对于回写同样适用。

但无论哪种情况，您都不能在写入时使用 .toString()。parseFloat() 会给您一个没有方法的数字。JavaScript 与 Java 不太相似。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T18:01:29.757

```
 var loan = parseFloat(document.getElementById("loanamount").value);

  document.getElementById('numpay').innerHTML = loan.toFixed(2); 
```

# iphone - 获取 UIActionSheet 以执行操作

> ID：14652152
> 
> 赞同：0
> 
> 时间：2013-02-01T17:50:52.737
> 
> 标签：iphone, ios, uiactionsheet

这是一个菜鸟问题。我创建了 UIActionSheet。现在我如何让它在按下时执行“删除”。

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event
{
    if (event.subtype == UIEventSubtypeMotionShake )
    {
        // Handle shake notification
    UIActionSheet *shakeActionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                                  delegate:self
                                                         cancelButtonTitle:@"Cancel"
                                                    destructiveButtonTitle:@"Delete"
                                                         otherButtonTitles:nil];

    [shakeActionSheet showInView:self];
    }

    if ([super respondsToSelector:@selector(motionEnded:withEvent:)])
        [super motionEnded:motion withEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:59:36.567

尝试调用`UIActionSheet`委托方法

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex 
{

    NSString *title = [actionSheet buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Delete"])
    {
     //do your stuff in here

     }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:55:18.340

你的类必须符合`UIActionSheetDelegate`协议。

然后覆盖该`actionSheet:clickedButtonAtIndex:`方法，评估单击的按钮并采取相应措施。

请参阅[此处](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIModalViewDelegate_Protocol/UIActionSheetDelegate/UIActionSheetDelegate.html#//apple_ref/doc/uid/TP40006799)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:26:55.360

只是添加到其他两个解决方案，您可以`- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event`像这样在您的方法中添加委托（假设您的类实现`UIActionSheetDelegate`协议）：

```
shakeActionSheet.delegate = self; 
```

# java - 正确使用final

> ID：14652153
> 
> 赞同：6
> 
> 时间：2013-02-01T17:50:54.687
> 
> 标签：java, final

> **可能重复：**
> [Java final 修饰符](https://stackoverflow.com/questions/4012167/java-final-modifier)

这只是一个关于偏好的小问题。final修饰符的正确用法是什么？

我注意到，从源到源，我比其他人更倾向于使用它。我将它用于方法的参数，方法中的变量以及我可以做的任何事情。这是必要的还是我做得过火了？

参考：

```
private final int x;
private final int y;
private final int id;
private final int width;
private final int height;

public Widget(final int id, final int x, final int y, final int width, final int height) {
    this.id = id;
    this.x = x;
    this.y = y;
    this.xmod = x;
    this.ymod = y;
    this.width = width;
    this.height = height;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:57:36.077

是的，你做得太过分了。从历史上看，这可能会导致一些优化——例如，final 方法可以更容易地内联——但是现在，无论您是否实际将方法标记为 final，大部分优化都已完成。

您仍然应该使用 final 的地方是类中的大多数字段、不应该或不应该扩展的类、不想被覆盖的方法以及需要在匿名内部引用的局部变量类。

特别是，在不会被匿名内部类包装的局部变量和方法参数上这样做是过分的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:53:58.627

我想说任何永远不会改变或覆盖的字段、类或方法都应该是最终的。这使其线程安全并允许编译器和虚拟机进行优化。它还阐明了您作为程序员的意图，并告诉其他开发人员价值永远不会改变，因此如果他们正在寻找复杂性，他们可以寻找其他地方。

好文章在这里： [http ://www.javapractices.com/topic/TopicAction.do?Id=23](http://www.javapractices.com/topic/TopicAction.do?Id=23)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:56:47.887

我会说，只要您不希望变量在初始化后被更改，或者您不希望一个类被子类化或一个方法被覆盖而是子类，那么您应该使用“final”。关于编译器优化，我认为使用“final”关键字会有所帮助，但我只是读到了这个：

> 一个常见的误解是，声明一个类或方法 final 通过允许编译器直接将方法插入到任何被调用的地方来提高效率。事实上，编译器无法做到这一点，因为该方法是在运行时加载的，并且可能与刚刚编译的版本不同。只有运行时环境和 JIT 编译器才能准确了解加载了哪些类，并且能够更好地决定何时内联，无论方法是否是最终的。

[http://en.wikipedia.org/wiki/Final_(Java)](http://en.wikipedia.org/wiki/Final_(Java))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T18:45:26.770

如果今天设计 Java，所有局部变量和方法参数默认都是 final 的。

不幸的是，由于语言不这样做，我们应该手动做吗？

只是看起来太繁琐了。如果我们不这样做，而且似乎没有什么大问题，那么我们可以偷懒不做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T18:39:42.380

不必每次都将变量设为最终变量。当你想改变这些变量的值时，它可能会变得很头疼。

我认为，只有当变量 final 是普遍不变的，或者当你认为它不应该改变时，你才应该对变量 final 进行 decalre。

# java - 使用 MVN 编译 java 时出错

> ID：14652155
> 
> 赞同：0
> 
> 时间：2013-02-01T17:50:59.050
> 
> 标签：java, android, macos, maven

我想从[https://github.com/rtyley/spongycastle/archive/spongy-master.zip](https://github.com/rtyley/spongycastle/archive/spongy-master.zip)（SpongeCastle 库）编译和构建一个 jar 文件

但是，当我尝试测试 MVN 时，MVN 显示以下错误（JDK 1.6.0_37、Maven 3.0.4、Mac OSX 雪豹）

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.7.2:test (default-test) on project scpg-jdk15on: There are test failures.
[ERROR] 
[ERROR] Please refer to /Users/Lara/Desktop/BlowFish/spongycastle-spongy-master/scpg-jdk15on/target/surefire-reports for the individual test results.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :scpg-jdk15on 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:10:41.787

正如我在评论中指出的那样，这可能是您的 jdk 版本的问题，但可能是其他问题......

我建议你阅读这个：[http ://www.randombugs.com/java/javalangsecurityexception-jce-authenticate-provider-bc.html](http://www.randombugs.com/java/javalangsecurityexception-jce-authenticate-provider-bc.html)

我认为它将帮助您识别/解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:59:35.400

看起来有一个名为“default-test”的单元测试失败并阻止 maven 构建 jar。您可以调查并修复测​​试失败的原因，也可以尝试在不运行测试的情况下构建 jar，使用：

```
 mvn install -DskipTests 
```

# c - 如果函数从不返回，省略返回语句是否有效

> ID：14652159
> 
> 赞同：2
> 
> 时间：2013-02-01T17:51:04.633
> 
> 标签：c, undefined-behavior

考虑一个`foo()`可能永远不会退出的函数：

```
int foo(int n) {
    if(n != 0) return n;
    else for(;;); /* intentional infinite loop */

    return 0; /* (*) */
} 
```

省略最终的返回语句是否有效？如果我省略最后的陈述，它会引起未定义的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:53:49.447

您可以省略`return`无限循环之后的最后一条语句。但是您可能会收到编译警告，例如并非所有路径都返回。在函数中有无限循环是不好的。保持一个条件来打破循环。

如果在这种情况下确实需要无限循环，那么`return`之后的语句就是死代码。删除它不会是不确定的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T18:02:07.590

即使它在没有返回语句的情况下返回，也没有 UB，除非您使用返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:52:44.853

对于非`void`函数，根本没有`return`语句或并非所有路径都有`return`语句是有效的。

例如：

```
// This is a valid function definition.
int foo(void)
{
} 
```

或者

```
// This is a valid function definition.
int bar(void)
{
    if (printf(""))
    {
        exit(1);
    }

    return 0;
} 
```

但读取的返回值`foo`是未定义的行为。

```
foo();  // OK
int a = foo();  // Undefined behavior
int b = bar();  // OK 
```

# android - 斜体文本不适用于三星 Galaxy Tab

> ID：14652166
> 
> 赞同：4
> 
> 时间：2013-02-01T17:51:29.930
> 
> 标签：android, textview, galaxy-tab, italic

我不知道为什么，但我的应用程序没有在三星 Galaxy Tab 2 上以斜体显示 TextView（例如，它在 Nexus 7 平板电脑上正常工作）。

我的代码：

```
<style name="MyTheme.GeneralRedDate">
    <item name="android:textColor">@color/red</item>
    <item name="android:textSize">15sp</item>
    <item name="android:textStyle">bold|italic</item>
</style> 
```

当然，我已经尝试用斜体代替粗体|斜体，但它也不起作用。

**编辑** 似乎这个线程是相同的：[支持 setTypeface(Typeface.Italic) 的三星设备？](https://stackoverflow.com/questions/10420077/samsung-devices-supporting-settypefacetypeface-italic)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:13:39.593

这是三星的一个错误，正如 FomayGuy 所说，最好的解决方案是将系统字体的斜体版本添加到资产中。

官方 Roboto Android 字体可[在此处](http://developer.android.com/design/style/typography.html)获得。

# azure - Azure blob's block list is empty, but blob is not empty! How can this be?

> ID：14652172
> 
> 赞同：10
> 
> 时间：2013-02-01T17:52:17.950
> 
> 标签：azure, azure-storage, azure-blob-storage

**This issue in a nutshell:**

A block blob can be created with a single PUT request. This will create a blob with committed content but the blob **will not have any committed blocks**!

This means that you cannot assume that the concatenation of committed blocks is the same as the committed content.

When working with block blobs you'll have to pay extra attention to blobs with empty block lists, because such blobs *may or may not* be empty!

* * *

*The original question:*

One of our storage blobs in an Azure account has an empty block list, although it is non-empty.

I'm retrieving the block list like this (C#):

```
foreach (var block in _cloudBlob.DownloadBlockList(
    BlockListingFilter.Committed, 
    AccessCondition.GenerateLeaseCondition(_leaseId)))
{
    // ...
} 
```

The code in the `foreach` block is NOT executed. The returned list is empty.

However, the blob reports that it has a non-zero length when I check: `_cloudBlob.Properties.Length`

I can also download the blob and see that it is not empty.

Am I missing something? How can the block list be empty when the blob is not?!

It does not matter whether I use `BlockListingFilter.Committed`, `BlockListingFilter.Uncommitted` or `BlockListingFilter.All`; the list is still empty!

**UPDATE**

I have copied this blob to a public container so that this issue can be reproduced by anyone.

Here's how to reproduce what I'm unable to understand:

First get blob properties from Azure using the REST API:

```
HEAD http://dfdev.blob.core.windows.net/pub/test HTTP/1.1
Host: dfdev.blob.core.windows.net 
```

Response:

```
HTTP/1.1 200 OK
Content-Length: 66
Content-Type: application/octet-stream
Last-Modified: Sat, 02 Feb 2013 09:37:19 GMT
ETag: 0x8CFCF40075A5F31
Server: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
x-ms-request-id: 4b149a7e-2fcd-4ab4-8d53-12ef047cbfa1
x-ms-version: 2009-09-19
x-ms-lease-status: unlocked
x-ms-blob-type: BlockBlob
Date: Sat, 02 Feb 2013 09:40:54 GMT 
```

The response headers tell us that this is a block blob and that it has a length of 66 bytes.

Now retrieve the block list from:

[http://dfdev.blob.core.windows.net/pub/test?comp=blocklist](http://dfdev.blob.core.windows.net/pub/test?comp=blocklist)

Response body:

```
<?xml version="1.0" encoding="utf-8"?><BlockList><CommittedBlocks /></BlockList> 
```

So, the blob does not have any committed blocks, still it has a length of 66 bytes!

Is this a bug or have I misunderstood something?

Please help me out!

**UPDATE 2**

I've found that if I upload the blob like this:

```
container.GetBlockBlobReference("put-only")
    .UploadFromStream(File.OpenRead("test-blob")); 
```

...then a single PUT request is sent to Azure and the blob gets an empty block list (just like above).

However, if I upload the blob like this:

```
var blob = container.GetBlockBlobReference("put-block");
string blockId = Convert.ToBase64String(Guid.NewGuid().ToByteArray());
blob.PutBlock(blockId, File.OpenRead("test-blob"), null);
blob.PutBlockList(new string[] { blockId }); 
```

...then two requests are sent to Azure (one for putting the block and another for putting the block list).

The second blob gets a non-empty block list.

Why won't a single PUT yield a block list?

Can't we rely on that the concatenation of a blob's committed blocks are equal to the blob's actual content?!

If not, how shall we determine when the block list is OK and when it's not??

**UPDATE 3**

I've implemented a workaround for this that I think suffice in the case where we encountered this problem. In case we discover an empty block list AND a blob length that is greater than zero, then we'll assume that everything is OK (although it really isn't) and go ahead and rewrite that data using Put Block and Put Block List at the next opportunity.

However, although this will do the trick in our case, it is still very confusing that a non-empty block blob can have an empty list of committed blocks!!

Is this by-design in Azure? Can anyone explain what's going on?

**UPDATE 4**

Microsoft [confirmed this issue on the MSDN forums](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/c2092669-426c-4a4d-bf89-a028f01fa54f) too. Quote from Allen Chen:

> I've confirmed with the product team. This is a normal behavior. The x-ms-blob-content-length header is the size of the committed blob. In your case you use Put Blob API so all content is uploaded in a single API and is committed in the same request. As a result in the Get Block List API's response you see the x-ms-blob-content-length header has value of 66 which means the committed blob size.
> 
> We have been aware of the issue that the MSDN document of the Get Block List API is not quite clear on this and will work on it.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T22:21:16.967

As you also identified with your tests, querying the list of blocks of a block blob uploaded using [Put Blob](http://msdn.microsoft.com/en-us/library/dd179451.aspx) will return an empty list. This is by design.

UploadFromStream API in the Storage Client Library makes a couple of checks before deciding whether to upload a blob using a single Put Blob operation or a sequence of Put Block operations followed by a Put Block List. One property that changes this behavior is [SingleBlobUploadThresholdInBytes](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.blob.cloudblobclient.singleblobuploadthresholdinbytes.aspx).

# google-analytics - Targeting Sources With Google Analytics Experiments

> ID：14652174
> 
> 赞同：0
> 
> 时间：2013-02-01T17:52:30.820
> 
> 标签：google-analytics, google-ads-api, google-experiments

I am curious if Google Analytics Content Experiments supports targeting based on the traffic source, in particular, certain Google Adwords campaigns.

For example, I have two Adwords campaigns pointed to the same destination url but would like a Content Experiment to only run for one of these two campaigns.

Even targeting the experiment based on the referring url would be helpful but I don't see an option to do so when setting up the experiment. Does anyone know if this is possible through the set up, or if I would need to create some kind of gateway that my campaigns funnel through and then get routed to the experiment URL based on the source?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:21:56.707

Google does not currently provide this function by default.

I'd try [https://www.optimizely.com/](https://www.optimizely.com/) (easier) and/or patching up custom bucketing code (more difficult)

# android - 如何将 ListView 滚动到特定位置并更改文本颜色

> ID：14652176
> 
> 赞同：0
> 
> 时间：2013-02-01T17:52:37.783
> 
> 标签：android, android-widget

有自定义视图和 ListView，如果一个更改其状态，另一个必须更改，两者都是耦合的。如果选择了一项 ListView，我可以控制自定义视图。

如果在自定义视图中选择了一个项目，则列表视图中的相应项目应该变得可见，并且必须突出显示其中的文本。

我试过了

listView.smoothScrollToPosition(clu​​eIndex);

执行此行时不会发生滚动。

第二个问题——

如何在特定适配器位置访问 TextView 并在 OnItemLongClickListener() 之外更改其文本颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:22:10.693

由于错误，问题已解决，线索索引始终为 -1。

# msmq - MSMQ 多读卡器

> ID：14652178
> 
> 赞同：0
> 
> 时间：2013-02-01T17:52:45.057
> 
> 标签：msmq

这是我提出的架构。进程 A 将创建项目并将其添加到本地计算机上的队列 A 中，我计划让 Windows 服务的多个实例（在不同的计算机上运行）从该队列 A 中读取。这些 Windows 服务中的每一个都会读取一组消息和然后处理该批次。

我要确保的是特定消息不会被多次处理（由不同的 Windows 服务）。MSMQ 默认情况下是否保证单次交付？我应该使队列事务吗？或者常规队列就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:47:29.550

如果您需要确保消息只传递一次，您可能需要使用事务队列。但是，当服务从队列中读取消息时，它会从队列中删除并且只能接收一次。

# ios - 如何在 CoreBluetooth 上同时向多个蓝牙 LE 从站写入数据？

> ID：14652179
> 
> 赞同：0
> 
> 时间：2013-02-01T17:52:51.770
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy, slave

我是新来的。我正在尝试开发一个 iOS 应用程序，我可以在其中将数据交换到多个蓝牙 LE 从站。

我能够连接多个从站并从中读取。但问题是我只能向其中一个（要连接的最新从属设备）**写入**（声音蜂鸣器）。

我正在使用[http://processors.wiki.ti.com/index.php/Category:IPhone4SBLEDemo中提供的代码](http://processors.wiki.ti.com/index.php/Category:IPhone4SBLEDemo)

如何为所有连接的设备发出蜂鸣声？

视图控制器.m

```
- (IBAction)TIBLEUISoundBuzzerButton:(id)sender {
[t soundBuzzer:0x02 p:[t activePeripheral]]; //Sound buzzer with 0x02 as data value 
```

钥匙扣.m

```
-(void) soundBuzzer:(Byte)buzVal p:(CBPeripheral *)p {
NSData *d = [[NSData alloc] initWithBytes:&buzVal length:TI_KEYFOB_PROXIMITY_ALERT_WRITE_LEN];
[self writeValue:TI_KEYFOB_PROXIMITY_ALERT_UUID characteristicUUID:TI_KEYFOB_PROXIMITY_ALERT_PROPERTY_UUID p:p data:d];} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:38:07.947

我已经找到了我自己的问题的答案。通过使用 didRetrieveConnectedPeripherals，我可以同时将数据写入所有连接的设备。希望这可以帮助任何正在寻找相同答案的人。谢谢！

```
-(void)centralManager:(CBCentralManager *)central didRetrieveConnectedPeripherals:(NSArray *)peripherals {

for(CBPeripheral *peripheral in peripherals) {//(soundbuzzer) }} 
```

# java - jsf - 字符串无法解析为数字

> ID：14652180
> 
> 赞同：1
> 
> 时间：2013-02-01T17:52:54.023
> 
> 标签：java, string, jsf, numbers, implicit-conversion

我编写了一个带有以下签名的 el 函数，它比较了双精度值：

```
java.lang.Number numberMinimum(java.lang.Number, java.lang.Number) 
```

这甚至可以使用原始数据类型，
但是使用资源包中的值调用它会导致：

```
java.lang.IllegalArgumentException: Cannot convert 99 of type class java.lang.String to class java.lang.Number
at com.sun.el.lang.ELSupport.coerceToType(ELSupport.java:412)
at com.sun.el.parser.AstFunction.getValue(AstFunction.java:123) 
```

而将参数更改为分配资源值的原始 int 有效？

```
int intMinimum(int, int) 
```

如果所需的目标是 int 类型但不适用于数字，为什么表达式语言会将其自动转换为 int？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:56:45.173

添加另一个功能：

```
java.lang.Number numberMinimum(java.lang.String, java.lang.String) 
```

在该函数中，将您的字符串转换为数字（[将字符串转换为 Double - Java](https://stackoverflow.com/questions/1097332/convert-a-string-to-number-java)）并调用您的`java.lang.Number numberMinimum(java.lang.Number, java.lang.Number)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:10:07.353

字符串不会自动转换为数字。考虑通过重载***numberMinimum()***方法将字符串转换为 Number。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:28:36.790

El 不能直接转换为 Number 只能继承类：

com.sun.el.lang.ELSupport.coerceToType(ELSupport.java:412) 检查目标类型是否是实现 Number 但不是 Number 本身的任何类型。

如果目标类型是 Number 类型，则没有像使用 double 一样的默认实现。

[http://grepcode.com/file/repo1.maven.org/maven2/org.mortbay.jetty/jsp-2.1/6.1.1rc1/com/sun/el/lang/ELArithmetic.java#ELArithmetic.isNumberType%28java。 lang.Class%29](http://grepcode.com/file/repo1.maven.org/maven2/org.mortbay.jetty/jsp-2.1/6.1.1rc1/com/sun/el/lang/ELArithmetic.java#ELArithmetic.isNumberType%28java.lang.Class%29)

# sql - 优化存储过程

> ID：14652182
> 
> 赞同：1
> 
> 时间：2013-02-01T17:53:00.233
> 
> 标签：sql, query-optimization

我有一个运行良好的大型查询，但是，由于我的数据库中现在的数量或记录，查询需要越来越长的时间才能完成存储过程。

首先，我很难让查询工作，而且我对自己没有信心 A）简化查询或 B）将其分解为更小的查询/存储过程。

有没有高手可以帮帮我？

 `````
SELECT 
    r.resourceFirstName, 
    r.resourceLastName,
    a.eventDateTime, 
    CONVERT(char(1), a.eventType) as eventType, 
    CONVERT(varchar(5), a.reasonCode) as reasonCode, 
    r.extension, 
    GETDATE() AS ciscoDate into #temp_Agent
FROM 
    CCX1.db_cra.dbo.Resource r 
    INNER JOIN CCX1.db_cra.dbo.AgentStateDetail a 
        ON r.resourceID = a.agentID 
    INNER JOIN ( 
        SELECT 
            p.resourceFirstName, 
            p.resourceLastName, 
            MAX(e.eventDateTime) MaxeventDateTime 
        FROM 
            CCX1.db_cra.dbo.Resource p 
            INNER JOIN CCX1.db_cra.dbo.AgentStateDetail e 
            ON p.resourceID = e.agentID 
        where 
            e.eventDateTime > (GETDATE() - 1)
        GROUP BY 
            p.resourceFirstName, 
            p.resourceLastName
    ) d 
        ON r.resourceFirstName = d.resourceFirstName 
        AND r.resourceLastName = d.resourceLastName 
        AND a.eventDateTime = d.MaxeventDateTime 
        AND r.active = 1 
where 
    a.eventDateTime >= (GETDATE() - 7)
ORDER BY 
    r.resourceLastName,
    r.resourceFirstName ASC 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:48:59.643

假设这是 SQLServer，请尝试：

```
WITH CTE AS
(SELECT r.resourceFirstName, 
        r.resourceLastName,
        a.eventDateTime, 
        CONVERT(char(1), a.eventType) as eventType, 
        CONVERT(varchar(5), a.reasonCode) as reasonCode, 
        r.extension, 
        GETDATE() AS ciscoDate,
        RANK() OVER (PARTITION BY r.resourceFirstName, r.resourceLastName
                     ORDER BY a.eventDateTime DESC) RN
 FROM CCX1.db_cra.dbo.Resource r 
 INNER JOIN CCX1.db_cra.dbo.AgentStateDetail a 
         ON r.resourceID = a.agentID AND a.eventDateTime >= (GETDATE() - 1) 
 where r.active = 1)
SELECT resourceFirstName, resourceLastName, eventDateTime, eventType, reasonCode, r.extension, ciscoDate
into #temp_Agent
FROM CTE
WHERE RN=1
ORDER BY r.resourceLastName, r.resourceFirstName ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:15:50.207

仅凭查询无法给出正确答案。但...

考虑在“eventDateTime”上放置一个索引。

您似乎在 1 天内加入了一组记录。这将使外部查询中的 7 天过滤器无关紧要。我没有能力测试，但也许您的查询可以简化为这个？（下面的伪代码）

还要考虑不同的解决方案。也许根据日期时间对表进行分区。也许有一个单独的数据库用于使用星型模式或多维数据集设计进行报告。

临时表#temp_Agent 正在做什么？

```
declare @max datetime = (select max(eventDateTime) 
                         from CCX1.db_cra.dbo.AgentStateDetail 
                         where active=1 
                         and eventDateTime > getdate()-1);
if(@max is null)
    exit no records today

SELECT r.resourceFirstName, 
r.resourceLastName,
a.eventDateTime, 
CONVERT(char(1), a.eventType) as eventType, 
CONVERT(varchar(5), a.reasonCode) as reasonCode, 
r.extension, 
GETDATE() AS ciscoDate 

into #temp_Agent

FROM CCX1.db_cra.dbo.Resource r 
INNER JOIN CCX1.db_cra.dbo.AgentStateDetail a ON r.resourceID = a.agentID 

where r.active = 1 
and a.eventDateTime = @max; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:33:18.393

如果没有完整的表定义，很难解决查询挂起的原因，但我给您一些提示，可以帮助您提高查询的性能：

1.  与其使用“#temp_Agent”等临时表，不如创建“表”类型的局部变量。您可以获得完全相同的结果，但您可以大大提高性能，因为：

    *   可以使用主键和索引创建“表”类型的局部变量，从而改进 SQL 查找信息的方式。

    *   可以对局部变量进行聚类，这也提高了某些场景下的性能，因为信息是直接从磁盘访问的

    *   临时表要求 SQL 在运行时解析应该用于存储查询获得的信息的列类型。

2.  如果您需要将信息存储在临时表、变量等中，请避免在这些变量中存储不必要的信息。例如，如果您的进程中只需要后者两个 id 列，则避免包含可以检索泡沫的额外列

3.  如果您需要从多个来源检索大量信息，则应考虑使用视图，该视图也可以被索引并改进信息的检索。

4.  避免使用不必要的排序、分组、转换和字符串连接。这些特定的操作会极大地降低查询的性能。

作为一个额外的提示，您可以使用旨在改进您的数据库和对象的 SQL 服务器工具：

*   检查查询的执行计划（菜单查询->包括实际执行计划，或控制+ M）
*   运行 SQL Server Engine Tunning Advisor 以分析跟踪文件（请参阅 SQL Server Profiler）并添加额外的索引以提高数据库性能
*   如果您的查询没有在您用于获取信息的表中生成死锁，请使用 SQL Server Profiler 检查。在所有查询中使用“提示”以避免锁定问题和在某些情况下您希望避免的其他行为是一种很好的做法。

Se附加链接以更好地理解我的意思：

[了解执行计划](http://www.codeproject.com/Articles/18651/Improving-the-performance-of-queries-using-SQL-Ser)

[提示的使用](http://www.mssqltips.com/sqlservertip/2470/understanding-the-sql-server-nolock-hint/)

[SQL Server 中可用的调整选项](http://msdn.microsoft.com/en-us/library/ms179428%28v=sql.100%29.aspx)

我希望这些信息有所帮助。``

# hibernate - 数据库恢复后通过休眠连接数据库

> ID：14652184
> 
> 赞同：0
> 
> 时间：2013-02-01T17:53:07.253
> 
> 标签：hibernate, connection-pooling

请建议hibernate是否有某种机制来检测rdbms的恢复并在数据库关闭并恢复时自动重新连接到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:29:07.197

休眠没有。但是像 C3P0 这样的底层连接池可以。对于 C3P0，您需要指定连接测试查询和测试周期。详细信息：[C3P0 配置](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)

# c++ - C++中noexcept“违规”的静态分析

> ID：14652188
> 
> 赞同：15
> 
> 时间：2013-02-01T17:53:18.237
> 
> 标签：c++, exception, static-analysis, noexcept

我正在尝试编写异常安全代码。我发现使用 C++11 的 noexcept 说明符使这个目标更容易实现。

当然，一般的想法是，一个函数应该被标记为“noexcept”，当且仅当它调用的所有函数也被标记为“noexcept”。

问题在于，在大型代码库中，来自不同人的补丁经常合并在一起，很难确保保持这种一致性。

因此，我希望能够运行静态分析，该分析可以列出标记为“nothrow”的函数调用未标记为“nothrow”的函数的所有位置。

据我在手册页中看到的，GCC 无法帮助我。有没有可以帮助我的独立工具？或者也许是其他一些编译器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T18:38:30.233

如果您通过使用程序的 ABT 来避免指向函数的指针（并认为它们不安全），这当然是可能的。Clang 的 AST 是（尽管它的名字）这样的 ABT：您将看到函数的声明和定义。通过一次做一个定义，你已经有了一个很好的基线。

另一方面，我想知道这是否*实用*。看，问题是任何执行内存分配的函数都（自愿地）标记为可能抛出（因为`new`从不返回 null，而是抛出`bad_alloc`）。因此，`noexcept`在大多数情况下，您将仅限于少数功能。

当然还有像@GManNickG 这样的所有动态条件暴露，例如：

```
void foo(boost::optional<T> const t&) {
    if (not t) { return; }

    t->bar();
} 
```

即使`T::bar`is `noexcept`，取消引用 an`optional<T>`可能会抛出（如果什么都没有）。当然，这忽略了我们已经排除了这个事实（这里）。

如果没有明确的*条件*说明函数何时可能`throw`，`static`分析可能会被证明是……无用的。语言习语的设计考虑到了例外情况。

* * *

*注意：作为题外话，可以重写可选类，以免暴露解引用，因此`noexcept`（如果回调是）：*

```
template <typename T>
class maybe {
public:

    template <typename OnNone, typename OnJust>
    void act(OnNone&& n, OnJust&& j) noexcept(noexcept(n()) and 
                                              noexcept(j(std::declval<T&>())))
    {
        if (not _assigned) { n(); return; }
        j(*reinterpret_cast<T*>(&_storage));
    }

private:
    std::aligned_storage<sizeof(T), alignof(T)>::type _storage;
    bool _assigned;
};

// No idea if this way of expressing the noexcept dependency is actually correct. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-03T19:45:48.963

clang-tidy 检查 bugprone-exception-escape 试图找到可能直接或间接抛出异常的函数，而这些函数不应该抛出异常。这包括检查标有`throw()`或的功能`noexcept`。

[https://clang.llvm.org/extra/clang-tidy/checks/bugprone-exception-escape.html](https://clang.llvm.org/extra/clang-tidy/checks/bugprone-exception-escape.html)

# sql - 如何在 SQL 中更改列的数据类型，但仅针对列标题之后的所有行？

> ID：14652190
> 
> 赞同：1
> 
> 时间：2013-02-01T17:53:34.850
> 
> 标签：sql, sql-server, sql-server-2008

我有一列名为 TITLE 的 varchar(10)。除了包含列标题的第一行之外，该列的其余部分恰好都是整数，所以我想将数据类型更改为 int。

```
ALTER TABLE X
ALTER COLUMN TITLE int 
```

转换第一行（即列标题）时出现错误：“将 varchar 值 'TITLE' 转换为数据类型 int 时转换失败。

那么，如何转换除列标题之外的所有行的数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:55:43.657

简短的回答是**“否”**，您不能在单个 SQL 列中混合数据类型。对于排序、构建索引等，数据类型需要保持一致。

您可以使用另一个表来存储各种列标题，或者在同一个表中存储另一个列。

使用[MongoDB等](http://www.mongodb.org/)[NoSQL](http://en.wikipedia.org/wiki/NoSQL)解决方案可能是一种方法，具体取决于您存储的数据类型。这些解决方案使您可以更加灵活地使用架构，甚至每个文档都可以有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:27:16.757

您不能在列中混合“不匹配”数据类型。您可以使用模糊数据类型，如`VarBinary`or`XML`并随意解释它们。

OTOH，您可以使用[sp_addextendedproperty](http://msdn.microsoft.com/en-us/library/ms180047%28v=sql.105%29.aspx)来存储列标题和其他无关的绒毛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:57:45.670

不，抱歉，您不能在同一列上有多种数据类型。

[数据类型](http://msdn.microsoft.com/en-us/library/ms187752.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T17:58:35.820

你没有。列不是独立变量的集合，每个变量都有自己的类型。列中的所有内容都具有相同的类型。如果您尝试这样做，那么您的架构不太可能是它应该的样子。如果您发布更多详细信息，您可能会通过改进的架构获得一些答案。

# c# - Windows XP 上的 ServiceBase 服务错误 193:0xc1

> ID：14652199
> 
> 赞同：2
> 
> 时间：2013-02-01T17:54:10.133
> 
> 标签：c#, service, windows-services

我有一个使用 C# ServiceBase 类构建的服务。当我在 Windows 7 和 Windows Server 2008 中运行它时，它可以工作；但是，它不适用于 Windows XP。

![在此处输入图像描述](../Images/eed1e03efb2b93c8089592094dfa082b.png)

我使用`sc create PBUService binpath= "C:\PBULogger.exe"`. 这是正确的道路。

没有任何东西在事件查看器中登录，我的异常处理代码也没有触发。

我想也许我没有安装正确的 .NET 版本，但我在 XP 机器上安装了 4.0。但是，我使用 Visual Studio Express 2012 创建了这个项目，我很确定它默认使用 .NET 4.5。这会引起问题吗？我使用的所有类都是 4.0 版。

我已将所有代码剥离为基本方法，但这仍然不起作用。这是我的代码：

```
namespace PBULogger {
    class PBULoggerService : ServiceBase {
    protected override void OnStart(string[] args) {
        try {
           base.OnStart(args);
        } catch (Exception ex) {
            EmailUtility.sendEmail("Service Error", ex.Message + ex.StackTrace);
        }            
    }

    protected override void OnStop() {
        base.OnStop();
    }
} 
```

由于它没有登录事件查看器，它告诉我它甚至没有尝试启动服务。

我在“HKEY_LOCAL_MACHINE/System/ControlSet001/Enum/Services/PBUService/Enum”下的服务注册表中找到了这些条目。

不太清楚这意味着什么。

![在此处输入图像描述](../Images/fc37bcbf9c2487bc4b13110a0010288c.png)

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T21:38:57.140

您必须为 .Net 4.5 或 64 位架构（或两者）编译您的 exe。这是您从[WinError.h](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)遇到的错误代码的解释：

```
// %1 is not a valid Win32 application.
//
#define ERROR_BAD_EXE_FORMAT             193L 
```

确保你已经为 x86 平台或任何 CPU 编译它，并且你编译的任何版本的 .Net Framework 都安装在机器上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:57:57.023

我在谷歌搜索 Windows 服务错误号后发现了这一点： *通常错误消息意味着服务管理器找不到运行服务的确切 .exe 路径。有时，该服务是从目录名称包含多个单词的目录中安装的。所以服务的注册表路径需要用双引号括起来。

单击“开始”并键入“services.msc”并按 Enter 检查多媒体类调度程序和音频端点构建器服务。检查两个服务的“可执行文件路径：”下的路径。记下相同的内容。还要记下这两个服务的服务名称。服务如下：

AudioEndpointBuilder - AudioEndpointBuilder 多媒体类调度器 - MMCSS

现在，让我们检查一下这两个服务下的路径在注册表中是否相同。单击“开始”，键入 regedit 并按 Enter 找到以下键：

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\ 在服务下，检查这些服务：MMCSS 和 AudioEndpointBuilder。对应上述两个服务，图片路径（在右侧窗格中）应与“services.msc”中的路径相同*

我在[这里找到了](http://answers.microsoft.com/en-us/windows/forum/windows_7-hardware/error-193-0xc1-when-trying-to-start-windows-audio/77795eee-56c3-468d-b32c-be5987797dec)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-12T20:37:34.193

就我而言，这是由于仅以 64 位为目标进行构建。我忘记了我的一台运行 Server 2003 的测试服务器是 32 位的。我的服务在 64 位 Server 2008 R2 机器上运行良好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-01T14:24:30.667

我认为您使用的 .net 框架和 windows server 2003 存在兼容性问题。您使用 .net 4.5 吗？Windows server 2003 无法运行以 net framework 4.5 为目标的应用程序。

[http://www.microsoft.com/visualstudio/eng/products/compatibility](http://www.microsoft.com/visualstudio/eng/products/compatibility)

因此，您可以将目标框架更改为 4.0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T13:54:32.880

在我们的案例中，这发生在服务器崩溃并且 exe 文件损坏之后。我们重新部署了二进制文件，然后服务成功启动。

# spring - Spring MVC 绑定额外对象

> ID：14652210
> 
> 赞同：1
> 
> 时间：2013-02-01T17:54:39.197
> 
> 标签：spring, spring-mvc

我在 Spring MVC 3 中遇到了一些奇怪的绑定问题。

我的控制器请求映射如下所示：

```
@RequestMapping
public String save(HttpServletRequest req, 
           @ModelAttribute("userEditForm") UserEditForm form, 
           BindingResult formBindingResult, 
           ModelMap model, 
           @ModelAttribute("session") AdminSession session) {
    // some validation etc
} 
```

`UserEditForm`: _

```
public class UserEditForm {
    private User user;
    public User getUser() { ... }
    public void setUser(User user) { ... }
} 
```

`AdminSession`: _

```
public class AdminSession {
    private User user;
    public User getUser() { ... }
    public void setUser() { ...}
} 
```

发生的事情是，当我提交表单时，Spring 正在绑定`User`我的`UserEditForm`对象中的期望，但是，`AdminSession`它也`User`被 Spring 绑定，因为它的属性值也被更新。

我将假设这是由于在两个对象中都有一个`user`属性。`@ModelAttribute`

我认为在方法签名中使用表单`BindingResult`之后`UserEditForm`会阻止这种情况吗？对象是单独的实例，我的表单元素引用该`UserEditForm`对象：

```
<@spring.bind "userEditForm.user.name" />

<input name="${spring.status.expression}" /> 
```

我注意到在生成的 HTML 中它输出：

```
<input name="user.name" /> 
```

将名称硬编码为`userEditForm.user.name`给我错误，所以这不是前进的方向。

有没有办法阻止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:11:49.337

这是使用`@ModelAttribute`. Spring 获取请求属性并将它们与带有注释的对象的属性匹配`@ModelAttribute`。这就是 Spring 在决定做什么时所关注的：您的注释。

由于`UserEditForm`和`AdminSession`都被注释了`@ModelAttribute`并且都有一个`User`属性，一个名为的请求属性`user.name`将被绑定到这两个`User`属性。

您尝试在输入名称中包含命令名称并出现错误。这是因为当绑定发生时，它发生在您的命令对象上，Spring 会在其上查找属性（bindinf 路径是相对于命令对象的），当然表达式找不到任何具有该名称的属性。如果您想使用全名，您可以将表单包装在另一个对象中并将其用于您的命令，如下所示：

```
public class UserEditFormWrapper {
    private UserEditForm form;
    public UserEditForm getForm() {
        return form;
    }
    public void setForm(UserEditForm form) {
        this.form = form;
    }
} 
```

现在您可以在输入中使用这样的表达式：`form.user.name`当您提交到您的处理程序方法时，现在看起来像这样：

```
@RequestMapping
public String save(HttpServletRequest req, 
        @ModelAttribute("userEditForm") UserEditFormWrapper formWrapper, 
        BindingResult formBindingResult, 
        ModelMap model, 
        @ModelAttribute("session") AdminSession session) {

    UserEditForm form = formWrapper.getForm();
    // some validation etc
} 
```

由于`AdminSession`没有`form`属性，因此不会触发绑定。

这是解决这个问题的一种方法，但它是一种黑客行为。您不希望将请求参数绑定到，`AdminSession`但这是模型的一部分，因此您必须在某处创建它并将其放置在模型上，对吗？如果是这样，则将其从方法的参数中删除并从模型中获取，例如：

```
@RequestMapping(value = "/test", method = { RequestMethod.POST })
public String handlePost(HttpServletRequest req, 
        @ModelAttribute("userEditForm") UserEditForm form, 
        BindingResult formBindingResult, ModelMap model) {

    AdminSession session = (AdminSession) model.get("session");
    // some validation etc
} 
```

# android - 将图像从一个画廊拖放到另一个 Android

> ID：14652212
> 
> 赞同：1
> 
> 时间：2013-02-01T17:54:40.623
> 
> 标签：android, drag-and-drop, gallery

我的应用程序要求将图像从一个画廊拖到另一个画廊。这有可能实现吗？有人可以为我提供一些示例代码。我也试图在 android 2.x 中实现这一点，所以我不能使用 OnDragListener 或其他用于在 android 3.x 中拖动的类。感谢帮助！

# jquery - 无法让 Jquery 颜色 UI 在 Hover 上工作

> ID：14652213
> 
> 赞同：0
> 
> 时间：2013-02-01T17:54:42.977
> 
> 标签：jquery, jquery-animate

我是 jquery 的新手，我希望我的标签的背景颜色在悬停事件上发生变化。

到目前为止，这就是我所拥有的，但我无法回应......

```
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.animate-colors-min.js"></script>

<script type="text/javascript">

$(document).ready(function() {
$(".form_layout_button_box a").hover(
    function(){
            $(this).animate({backgroundColor: '#D8E4BC'},'slow')
    },
    function() {
            $(this).animate({backgroundColor: '#C4D79B'},'slow')
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:58:50.753

您需要使用[.css()](http://api.jquery.com/css/)将 CSS 属性应用于元素。至于动画，您可以尝试使用[.fadeIn()](http://api.jquery.com/fadeIn/)和[.fadeOut()](http://api.jquery.com/fadeOut/)。

悬停时，颜色将保留在鼠标悬停上。所以我更喜欢使用mouseover和mouseout。如果你想使用 .hover()，你也可以做一些 if / else 逻辑。

```
$(".form_layout_button_box a").hover(function(){
     $(this).css('background-color', '#D8E4BC');
}); 
```

**-或者-**

```
$(".form_layout_button_box a").mouseover(function(){
     $(this).css('background-color', '#D8E4BC');
});

$(".form_layout_button_box a").mouseout(function(){
     $(this).css('background-color', '#333');
}); 
```

**使用 MOUSEOVER 和 MOUSEOUT 的演示：**

[http://jsfiddle.net/GZFAZ/3/](http://jsfiddle.net/GZFAZ/3/)

**CSS中的等效T0：**

这会给你与纯 CSS 相同的效果。

```
.form_layout_button_box a       {background-color:#666;}
.form_layout_button_box a:hover {background-color:#D8E4BC;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:00:02.010

我发现了我的错误，我没有正确调用查询，

我写过：

```
 function(){
        $(this).animate({backgroundColor: '#D8E4BC'},'slow')
}, 
```

在上面的例子中，我需要将 $(this) 替换为 $($(this)) 并且函数工作。

```
function(){
       $($(this)).animate({backgroundColor: '#C4D79B'},'fast')
}, 
```

谢谢您的建议。

# java - 如何在 Linux 中使用控制台使用 java keytool 创建发布证书？

> ID：14652214
> 
> 赞同：0
> 
> 时间：2013-02-01T17:54:47.377
> 
> 标签：java, android, google-maps, keytool, google-maps-android-api-2

我有一个使用谷歌地图的安卓应用程序。我使用调试密钥开发了这个，现在我需要使用发布证书，但我不知道该怎么做，请帮忙。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T18:06:32.637

从[文档](http://developer.android.com/tools/publishing/app-signing.html)：

> 下面是一个生成私钥的 Keytool 命令示例：
> 
> $ keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 10000

由于 keytool 随您的 Java 安装一起提供，因此它在 Linux 和 Windows 上的工作方式相同。

要找出密钥库中证书的 MD5 或 SHA1 指纹，您可以使用：

```
keytool -v -keystore my-release-key.keystore -list 
```

它们列在部分`Certificate fingerprints`

# javascript - 使用 Reg Ex 和 Javascript 从 URL 中删除单个查询字符串

> ID：14652224
> 
> 赞同：0
> 
> 时间：2013-02-01T17:55:31.130
> 
> 标签：javascript, regex, replace

我已经阅读了提供 RegEx 的[其他](https://stackoverflow.com/questions/1842681/regular-expression-to-remove-one-parameter-from-query-string)页面，但该帖子似乎在我的测试中不起作用。我只是想`page=X`从 url 字符串 ( `/search?page=2&some_var=foo`) 中删除该部分。

当我尝试这个时：

```
urlStr = req.url
urlStr.replace(/&foo(=[^&]*)?|^foo(=[^&]*)?&?/, '') 
```

它不会删除页面部分。如果我将页面移动到字符串的末尾或中间，RegEx 选举器就会起作用。

有人有更好的 Reg Ex 解决方案吗？我只会有几个查询字符串，所以我很确定我不会遇到极端情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:56:26.140

```
urlStr = urlStr.replace(/\bpage=[^&]+/, ''); 
```

# fortran - Fortran77 执行程序时的参数

> ID：14652225
> 
> 赞同：4
> 
> 时间：2013-02-01T17:55:36.143
> 
> 标签：fortran, fortran77

我目前正在做 Fortran77 作业，所以请不要告诉我确切的编码，但请给我一个提示：

使用 UNIX 终端，我想通过执行来获取传递的参数

```
./program.exe parameter 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:57:56.070

在标准的 Fortran77 中你不能。故事结局。使用 fortran 程序访问命令行参数直到 Fortran 2003 才标准化。

如果您使用的是 GNU fortran 编译器，则可以使用[`iargc()`](http://gcc.gnu.org/onlinedocs/gfortran/IARGC.html)and[`getarg(i, arg)`](http://gcc.gnu.org/onlinedocs/gfortran/GETARG.html)函数，它们分别返回参数的数量和特定参数的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-04T04:24:53.150

可以在 FORTRAN77 中访问命令行参数。

下面给出的是我使用的代码片段：

```
 CHARACTER ARGV*10
  N=IARGC()
  CALL GETARG(1,ARGV) 
```

就做 ./a.out 1 2 3

ARGV 将存储第一个参数的值，即 1

要将此参数转换为浮点数，请使用

```
 READ (ARGV,*) RARG 
```

RARG 将 ARGV 转换为浮点整数。

# php - Jquery post() 从表单 throw php 发送消息

> ID：14652229
> 
> 赞同：0
> 
> 时间：2013-02-01T17:55:46.777
> 
> 标签：php, jquery, post

我正在使用 jquery 验证表单，然后使用 php 发送包含所有表单内容的电子邮件。

HTML - 联系人.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="scripts/jquery-1.9.0.min.js" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8" src="message_validator.js" charset="utf-8"></script>
</head>
<body>
<form id="form_contacto" charset="utf-8">
  <input type="text" id="name" class="textbox" name="name" maxlength="12" />
  <input type="text" id="last_name" class="textbox" name="last_name" maxlength="12" />
  <input type="text" id="email" class="textbox" name="email" maxlength="40" />
  <input type="text" id="title" class="textbox_2" name="title" maxlength="40" />
  <textarea id="message" name="message" ></textarea>
  <input type="text" id="about" class="textbox_3" name="about" maxlength="40" />
  <input type="text" id="validation" class="textbox_4" name="validation" maxlength="40" />
  <input type="submit"  class="submit" value="Send">
</form>
</body>
</html> 
```

JQUERY - message_validator.js

```
// JavaScript Document
$(document).ready(function() {
    $('.submit').click(function(){
        if($('.error_display').css("height")!="0"){
            $('.error_display').empty();
        }
        var errorlist = [];
        errorlist.length = 0;
        var email_check = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/i;
        var name = $('input#name').val();
        var email = $('input#email').val();
        var message = $('textarea#message').val();
        var validation = $('input#validation').val();

        if(name == '' && email == '' && message == ''){
            errorlist.push("- ERROR ALL");
        }else{
            if (name == '') {
                errorlist.push("-ERROR");
            }else if(name.length <= 2){
                errorlist.push("-ERROR");
            }
            if (email == ''){
                errorlist.push("-ERROR");
            }else if(!email_check.test(email)){
                errorlist.push("-ERROR");
            }
            if (message == '') {
                errorlist.push("-ERROR");
            }else if(message.length <= 5){
                errorlist.push("-ERROR");
            }
            if (validation == '') {
                errorlist.push("-ERROR");
            }else if(validation != 8){
                errorlist.push("-ERROR");
            }
        }

         if(errorlist.length >= 1){
            $('.error_display').animate({'height':errorlist.length*22}, {queue:false, duration:500});
            for(var i = 0; i < errorlist.length; i++) {
                $('.error_display').append(errorlist[i]+"<br/>");
                //errorlist[i].text.appendTo($('.error_display'));
                //$('.error_display').append(errorlist[i].val());
            } 
         }else{
            $("form#form_contacto").submit();
            $('.error_display').animate({'height':0}, {queue:false, duration:500});
            $('.success_display').animate({'height':75}, {queue:false, duration:500});
            $('#form_contacto').animate({'opacity':0.25}, {queue:false, duration:500});
            $('.submit').attr("disabled", true);
         }
    });
}); 
```

PHP - message_handler.php

```
<?php
  $name = $_POST['name'];
  $last_name = $_POST['last_name'];
  $visitor_email = $_POST['email'];
  $title = $_POST['title'];
  $message = $_POST['message'];
  $about = $_POST['about'];
  $validation = $_POST['validation'];

  $email_from = 'example@example.com';
      $email_subject = "New Message";
      $email_body = "Received a new message from $name $last_name"."Visitor email: $visitor_email\n\n\n"."Title: $title\n"."Message sent:\n $message\n\n";

      $to = "example@example.com";

      $headers = "From: $email_from \r\n";

      $headers .= "Reply-To: $visitor_email \r\n";

      mail($to,$email_subject,$email_body,$headers);
?> 
```

如果我将按钮更改为提交并将 method="post" action="message_handler.php" 放在表单标签中，则消息会正常发送。但是当我使用该方法时，它会转到页面 message_handler.php 并显示一个空白页面，我希望它仅在 message_validator.js 的验证为真时发送，所以这就是我尝试使用 jquery 使用帖子的原因（） 方法。

我已经在最后一个 else 中尝试了以下内容：

```
else{
$("form#form_contacto").submit();

} 
```

和

```
else{
$.post("message_handler.php", {name:name, email:email, last_name:last_name, title:title, message:message}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:34:35.420

**message_handler.php**

***警告：您应该保护此页面免受垃圾邮件的侵害。在目前的状态下，你非常脆弱***

将您对邮件功能的调用更改为此

```
 if(mail($to,$email_subject,$email_body,$headers)) {
    echo "success";
  }
  else {
    echo "fail";
  } 
```

**message_validator.js**

将此添加到您的 else 块

```
$.post(
    "message_handler.php",
    {
        name:name,
        email:email,
        last_name:last_name,
        title:title,
        message:message
    },
    function(result){
        // log to console for debug 
        console.log(result);
        if(result == 'success') {
            // do something here
        }
        else {
            // do something on failure
        }

}); 
```

**联系人.php**

更改提交到按钮的类型以[防止表单提交](https://stackoverflow.com/questions/290215/difference-between-input-type-button-and-input-type-submit)

`<input type="button" class="submit" value="Send">`

# c# - 带有 Windows azure 托管的信号器

> ID：14652230
> 
> 赞同：0
> 
> 时间：2013-02-01T17:55:47.857
> 
> 标签：c#, asp.net-mvc-3, azure, signalr

我一直在使用**signalR**，我意识到您需要 .Net 4.5 来运行它，但似乎 Azure 只允许 .Net 4.0。有没有人有任何解决方法？还是我必须找到支持 .net 4.5 的主机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:03:57.120

您不需要 .NET 4.5 来运行 SignalR，它针对 .NET 4.0 运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:01:00.893

.Net 4.5 包含在 OS 系列 3（Windows Server 2012 映像）中。您可以在服务定义文件中进行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:01:13.927

Azure sdk 与 .net 4.5 兼容。

# macos - Mongodb需要3分钟连接

> ID：14652231
> 
> 赞同：5
> 
> 时间：2013-02-01T17:55:57.050
> 
> 标签：macos, node.js, mongodb, mongoose

刚刚在我的 Mac 上重新安装了 Mongodb（全新安装山狮 10.8），现在我的应用程序需要大约 3 分钟才能连接。

我整理了一个简单的节点脚本来测试它：

```
var start = (new Date()).getTime();

var mongoose = require('mongoose');

 var db = mongoose.connect('mongodb://localhost/passport-mongox',function(err){
  var stop = (new Date()).getTime();

  console.log('Took this long: ',(stop-start) / 1000 );
 }); 
```

两次都是 175.273 和 175.316 秒。

当我连接到外部托管的 mongodb 时，它会在不到一秒的时间内连接，

知道为什么会发生这种情况吗？这是我的 mongo.log：

```
Fri Feb  1 12:43:25 [initandlisten] MongoDB starting : pid=2262 port=27017 dbpath=/usr/local/var/mongodb 64-bit host=w
Fri Feb  1 12:43:25 [initandlisten] db version v2.2.2, pdfile version 4.5
Fri Feb  1 12:43:25 [initandlisten] git version: d1b43b61a5308c4ad0679d34b262c5af9d664267
Fri Feb  1 12:43:25 [initandlisten] build info: Darwin bs-osx-106-x86-64-1.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_49
Fri Feb  1 12:43:25 [initandlisten] options: { bind_ip: "127.0.0.1", config: "/usr/local/etc/mongod.conf", dbpath: "/usr/local/var/mongodb", logappend: "true", logpath: "/usr/local/var/log/mongodb/mongo.log" }
Fri Feb  1 12:43:25 [initandlisten] journal dir=/usr/local/var/mongodb/journal
Fri Feb  1 12:43:25 [initandlisten] recover : no journal files present, no recovery needed
Fri Feb  1 12:43:26 [websvr] admin web console waiting for connections on port 28017
Fri Feb  1 12:43:26 [initandlisten] waiting for connections on port 27017
Fri Feb  1 12:44:05 [initandlisten] connection accepted from 127.0.0.1:52137 #1 (1 connection now open)
Fri Feb  1 12:44:40 [initandlisten] connection accepted from 127.0.0.1:52152 #2 (2 connections now open)
Fri Feb  1 12:45:15 [initandlisten] connection accepted from 127.0.0.1:52201 #3 (3 connections now open)
Fri Feb  1 12:45:50 [initandlisten] connection accepted from 127.0.0.1:52298 #4 (4 connections now open)
Fri Feb  1 12:46:25 [initandlisten] connection accepted from 127.0.0.1:52325 #5 (5 connections now open)
Fri Feb  1 12:51:26 [conn5] end connection 127.0.0.1:52325 (4 connections now open)
Fri Feb  1 12:51:26 [conn3] end connection 127.0.0.1:52201 (4 connections now open)
Fri Feb  1 12:51:26 [conn4] end connection 127.0.0.1:52298 (4 connections now open)
Fri Feb  1 12:51:26 [conn1] end connection 127.0.0.1:52137 (4 connections now open)
Fri Feb  1 12:51:26 [conn2] end connection 127.0.0.1:52152 (4 connections now open) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T18:58:19.070

所以答案来自推特上的[@AdamMeghji](http://twitter.com/AdamMeghji)。

我的主机文件一直是这样的：

```
127.0.0.1 localhost
127.0.0.1 test.com
127.0.0.1 wes.dev 
```

我将其切换为：

```
127.0.0.1 localhost test.com wes.dev 
```

连接又回到了 0.015 秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-23T12:48:45.077

来自[mongoose.js的回答](https://mongoosejs.com/docs/faq.html#slow-localhost)

**原因**：底层 MongoDB 驱动程序默认查找 IPv6 地址，因此最可能的原因是您的 localhost DNS 映射未配置为处理 IPv6。

**解决方案：使用 127.0.0.1 代替 localhost 或使用**[连接文档](https://mongoosejs.com/docs/connections.html#options)中所示的家庭选项。

`mongoose.connect(url, {family:4}, function(err, connection) { connection.db(your_db_name); });`

# java - 用于播放 1.2.5 的 Sublime Text 2 IDE

> ID：14652234
> 
> 赞同：0
> 
> 时间：2013-02-01T17:56:04.390
> 
> 标签：java, playframework, sublimetext2, playframework-1.x

我为 Sublime Text 2 安装了 Play 2 包。

是否可以将其用于旧版本的 Play 框架，即 1.2.5 ？

我尝试在较旧的播放版本中创建一个项目并在 Sublime Text IDE 中打开该文件夹。IDE 没有检测到 index.xml 文件中的编译错误，因此担心它是否有效。

不确定是否有人尝试将 IDE 用于较旧的 Play 版本。

请让我知道这件事。

如果它有效，那么问题出在我的安装程序上。

**编辑**

另外，如果 SUBlime Text 2 不能与 Play Framework 1.2.5 一起使用，请告诉我，那么市场上是否有一些旧版本的 Sublime Text 可以与 Play Framework 1.2.5 一起使用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:37:56.807

Sublime Text 2 不是一个 IDE，所以你不会在其中得到编译错误，它只是一个文本编辑器。play 2 的包只是为 scala 模板和一些代码片段带来了语法着色。

如果你真的想使用 IDE，你应该尝试 Eclipse 和 play 插件：[https ://github.com/playframework/playclipse](https://github.com/playframework/playclipse)

# jquery - jquery modal - 那很丑，我的模态有什么问题？

> ID：14652236
> 
> 赞同：0
> 
> 时间：2013-02-01T17:56:14.110
> 
> 标签：jquery, jquery-dialog

我创建了一个快速模态对话窗口，当我在 FireFox 中打开它时，屏幕上有一条不褪色的带子（请参阅 参考资料![这里](../Images/867b8d40526e0ef3081f877ae2362343.png)）。这在 Chrome 中不会发生。

知道发生了什么吗？

* * *

jQuery：

```
 $("#add_route").click(function(){
    $("#create_route").dialog("open");
  });

  $("#create_route").dialog({
    autoOpen: false,
    height: 300,
    width: 200,
    modal: true,
    buttons: {
      Cancel: function() {
        $(this).dialog("close");
      }
    }
  }); 
```

html:

```
<div id="create_route" title="Create New Route">
  Please choose a lead for this new route:<br>
</div> 
```

添加[了jsfiddle](http://jsfiddle.net/sajjansarkar/RHkWh/1/)

* * *

自然，它适用于 jsfiddle，但不适用于我的项目....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:47:35.067

我不确定您是否使用 ASP.Net MVC 生成的项目。但是我在使用它时遇到了同样的问题。我发现该叠加层的背景定义为： background: #aaaaaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x; 那个 ui-bg_flat_0_aaaaaa_40x100.png 是一个 100-px 高的白色图像，这正是白色带的来源。希望这能有所帮助。

# messaging - 读取时序图

> ID：14652247
> 
> 赞同：4
> 
> 时间：2013-02-01T17:56:58.970
> 
> 标签：messaging, uml, sequence-diagram, tool-uml

我有以下序列图由两条生命线和同步消息组成

![在此处输入图像描述](../Images/f2c7b4f9ec48b68f59ce1289897cded1.png)

我读它如下：

“lifeline1”表示在一段时间内执行的对象。

在 lifelin1 执行期间，恰好在红色圆圈“lifeline1”需要来自“lifeline2”的东西才能完成其执行

所以，

1）“生命线1”暂停其执行，然后

2）调用同步消息。（请在你的回答中澄清一下）

粉色线表示“lifeline1”需要到达“lifeline2”才能执行的持续时间

3)蓝色矩形代表消息执行的持续时间

4）虚线表示“lifeline2”需要到达“lifeline2”才能恢复执行的持续时间。

5）黑色矩形代表生命线1空闲的时间段

我阅读正确吗？

我错过了任何一步吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:47:10.813

> “lifeline1”表示在一段时间内执行的对象。

垂直虚线表示对象的生命周期。当对象处于活动状态/正在执行/具有控制权时，会在该线上绘制一个“执行规范”框。

> 在 lifelin1 执行期间，恰好在红色圆圈“lifeline1”需要来自“lifeline2”的东西才能完成其执行

如果它需要某些东西来开始执行，它不会显示以开始执行规范，而是在收到消息后显示为激活状态。

相反，该块显示 lifeline1 显示为活动，并发送同步消息。

> 1）“生命线1”暂停其执行，然后

这个序列图没有暗示暂停（或其他时间）。

> 2）调用同步消息。（请在你的回答中澄清一下）

它类似于在对象上调用方法——同步消息中的控制流立即从发送者传递到接收者，并且在接收到同步消息时，接收者显示为活动对象。

> 粉色线表示“lifeline1”需要到达“lifeline2”才能执行的持续时间

这个序列图没有暗示任何时间——它只显示了操作的序列。[使用 OMG† UML2 上层结构](http://www.omg.org/spec/UML/2.4.1/)的表 14.1 中所示的 Duration Constraint 和 Duration Observation 符号显示持续时间计时。

> 3)蓝色矩形代表消息执行的持续时间

在蓝色矩形表示的过程阶段，“lifeline2”对象正在执行以响应消息。说“消息执行”有点含糊 - 对象正在执行，而不是消息。

> 4）虚线表示“lifeline2”需要到达“lifeline2”才能恢复执行的持续时间。

虚线是返回消息。因为“lifeline1”发送的消息是同步的，所以在收到返回消息之前不会继续执行。

> 5）黑色矩形代表生命线1空闲的时间段

UML 序列图上的执行规范块表示对象何时主动执行。空闲等待同步消息返回的对象应该在其生命线上没有执行规范块的情况下表示。（颜色在 UML 中没有意义 - 它们在此图中用于让您谈论特定块，它们不显示对象是否处于活动状态）

我会采取一种稍微正式的方法，并说执行不应该显示在哪里，而是应该在收到返回消息后开始，以表示 lifeline1 继续 - 就像调用另一个对象中的方法的方法不在调用返回之前接收控制流。

但是，显示一个正在等待带有执行规范的返回消息的对象是很常见的，因为它仍然在控制操作的顺序。

（不幸的是，UML 又大又蓬松，几乎任何人提出的任何示例都可以以不同的方式阅读。由于我使用 UML 生成可执行模型来使用 pi-calculus 检查进程是否存在死锁，因此我倾向于使用更多比那些在白板上写一个来向共同开发人员解释某事的人更严格的解释）

† 维护UML 标准的对象管理组，而不是像'OMG 它是巨大的'，尽管这也适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:01:36.383

**快速建议**

将序列图阅读为二维流程图（活动图），就像棋盘一样。

**长无聊的扩展答案**

想象一个棋盘，其中每个正方形或格子是您移动图形的地方。序列图也是如此。

在序列图中，有列，其中有一个类的实例（参与者、表、边界、任何对象），还有行，其中执行操作。

想象一下，您有一个图形，它有时会像流程图一样执行操作，每次执行操作或“消息”时，图形都会移动到下一个正方形或单元格或块。

板上的一些“单元格”位于同一列（对象生命线）。

有时，我会用带分区的 linelife 绘制序列图，以帮助我记住每个分区是一个单元或执行操作的地方。

```
.......................................................
.........+--------------+............+--------------+..
.........| * : FooClass |............| * : BarClass |..
.........+------+-------+............+------+-------+..
................|...........................|..........
................|...........................|..........
............+---+---+...................+---+---+......
.....start..|   |   |......enter()......|   |   |......
..(*)======>|   |   |==================>|   |   |---+..
............|   |   |...................|   |   |...|..
............+---+---+...................+---+---+...|..
............|   |   |.......return......|   |   |...|..
........+---|   |   |<------------------|   |   |<--+..
........|...|   |   |...................|   |   |......
........|...+---+---+...................+---+---+......
........|...|   |   |....PlayChess()....|   |   |......
........+-->|   |   |==================>|   |   |---+..
............|   |   |...................|   |   |...|..
............+---+---+...................+---+---+...|..
............|   |   |.......return......|   |   |...|..
........+---|   |   |<------------------|   |   |<--+..
........|...|   |   |...................|   |   |......
........|...+---+---+...................+---+---+......
........|...|   |   |..HaveRootBeer()...|   |   |......
........+-->|   |   |==================>|   |   |---+..
............|   |   |...................|   |   |...|..
............+---+---+...................+---+---+...|..
............|   |   |......return.......|   |   |...|..
........+---|   |   |<------------------|   |   |<--+..
........|...|   |   |...................|   |   |......
........|...+---+---+...................+---+---+......
........|...|   |   |...GetSandwich()...|   |   |......
........+-->|   |   |==================>|   |   |---+..
............|   |   |...................|   |   |...|..
............#"""+"""#...................+---+---+...|..
............!   |   !...GetFriesAlso()..|   |   |...|..
............!   |   !...............+---|   |   |<--+..
............!   |   !...............|...|   |   |......
............#"""+"""#...............|...+---+---+......
............!   |   !...............|...|   |   |......
............!   |   !...............+-->|   |   |---+..
............!   |   !...................|   |   |...|..
............#"""+"""#...................+---+---+...|..
....finish..|   |   |...................|   |   |...|..
...(O)<-----|   |   |<------------------|   |   |<--+..
............|   |   |...................|   |   |......
............+---+---+...................+---+---+......
................|...........................|..........
................|...........................|..........
................|...........................X..........
....................................................... 
```

生命线表示操作或“消息”由特定对象执行，请注意，在示例中，生命线的某些部分具有不同的字符（“颜色”）以指示对象何时空闲或忙碌。

干杯。

# firefox - 偏好 windows 插件 firefox

> ID：14652248
> 
> 赞同：0
> 
> 时间：2013-02-01T17:56:58.147
> 
> 标签：firefox, firefox-addon, xul, add-on

我有这段代码的开头来为插件创建一个首选项窗口：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="chrome://global/skin/global.css"?>
<!DOCTYPE korpuslex SYSTEM "chrome://korpuslex/locale/korpuslex.dtd">
<prefwindow type="prefwindow"
    id="korpuslex-prefs"
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    style="width: 42em; min-height: 37.5em;"                           
    title="&korpuslex.PrefsTitle;">
<script src="options.js" /> 
```

...

如果我在“title="&korpuslex.PrefsTitle;">”中调用 *.dtd 文件中的参数，则会得到“错误分析 XML”，但如果不使用任何参数，则一切正常。我试图将我的代码与其他插件匹配，但找不到它为什么不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:54:09.463

在您的情况下，文档类型声明必须命名文档的根元素类型`prefwindow`。

将其更改为

```
<!DOCTYPE prefwindow SYSTEM "chrome://korpuslex/locale/korpuslex.dtd"> 
```

# jquery - 在 jQuery 中裁剪图像并使用 Ajax 发送回

> ID：14652250
> 
> 赞同：0
> 
> 时间：2013-02-01T17:57:03.253
> 
> 标签：jquery, ajax, crop, fancybox-2

我意识到这是一个开放式问题，所以如果不应该在这里问这个问题，我深表歉意，但我对 ajax 是全新的，并且很难理解我正在尝试做的事情。这是我要完成的基本流程/过程：

1.  用户以简单的 html 表单选择要上传的文件。

2.  在文件选择上，打开一个新的花式框，显示他们选择的图像，并允许他们使用 jquery 插件进行裁剪。

3.  按下裁剪按钮并裁剪图像。Fancybox 关闭，新裁剪的图像显示在预览区域的原始 html 表单上。

我无法解决的问题是如何将裁剪后的图像发送回表单并显示它而不重新加载页面/丢失可能已经输入的任何其他表单数据。我可以使用 ajax 检查裁剪文件是否以某种方式发送？我需要使用会话变量来存储裁剪信息吗？任何帮助或指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:44:51.127

这个问题的答案真的取决于你是想要*真正的*裁剪，还是只是裁剪。

真正的裁剪更为复杂，并且会涉及以下方面的操作：

```
var ctx_src = document.getElementById("someCanvasElement").getContext('2d');
var ctx_dest = document.getElementById("clippedDestinationCanvas").getContext('2d');
var img = new Image();
img.src = "/path/to/image";
img.onload(
  function()
  {
    ctx_src.drawImage(img,0,0);
    //capture a bounding rect from the user
    //draw the image to a new canvas, cropped to the bounding rect
      //see: http://www.w3schools.com/tags/canvas_drawimage.asp
    ctx_dest.drawImage(img,crop_x,crop_y,crop_width,crop_height,0,0);
    //display the destination canvas whereever you want, ie, in jquery do:
    $("#clippedDestinationCanvas").show(); // or fadeIn() or whatever
  }); 
```

关于上面的唯一半棘手的部分是捕获剪辑区域，但这并不太难，您基本上只需添加一个鼠标按下处理程序，开始跟踪 delta x 和 delta y，然后绘制一个边界框作为覆盖。

它最终会看起来像：

```
var dragging;
var startx, starty;
var width, height;
$("body").on("mouseup", 
  function() 
  {
    if(dragging)
    { 
      dragging=false; 
      $("#someCanvasElement").off("mousemove");
    }
  });

$("#someCanvasElement").on("mousedown",
  function(evt)
  {
    dragging=true;
    startx = evt.pageX;
    starty = evt.pageY;
  });

$("#someCanvasElement").on("mousemove",
  function(evt)
  {
     width = evt.pageX-startX;
     height = evt.pageY-startY;
     //set the style to whatever looks good
     ctx_overlay.fillRect(startx, starty, width, height);

  }); 
```

要在不*实际*裁剪图像的情况下执行此操作，只需执行相同的鼠标处理程序来捕获裁剪区域的边界框并使用 CSS 来裁剪图像。

当然，这一切都在我的脑海中，所以修改以适应，但这应该足以让你开始。

# php - 捕获行的 ID 以用作表的名称

> ID：14652251
> 
> 赞同：1
> 
> 时间：2013-02-01T17:57:12.887
> 
> 标签：php, mysql, sql

**只是为了节省任何人阅读的时间和麻烦，请勿使用此方法存储调查。正如答案中所指出的，这是非常糟糕的编程（更不用说对小猫很危险）**

如果这个问题有些复杂，请原谅我。我正在开发一个程序，允许用户创建调查并将其发布给用户。

长话短说，我有一张看起来像这样的表格：

```
**survey_info**

id          bigint(20)     Auto_increment     Primary Key
title       varchar(255)
category    bigint(20)
active      tinyint(1)
length      int(11)
redirect    text 
```

现在，当创建调查时，还会创建一个新表，该表是为保存该调查的输入而定制的。我为这些新表使用的命名模式是survey_{survey_id}

我希望做的是在调查列表中，将调查的回复数量放在它的右侧。

好吧，现在我的实际问题是，有没有办法在我用来收集可用调查列表的同一查询中检索收集表 (survey_id) 中的行数？我意识到我可以很容易地做到这一点，只需对每个调查使用第二个查询并获取它的行数，但我担心用户拥有的调查数量越多，这个过程就会变得越耗时。那么有没有办法做类似的事情：

```
SELECT s.id AS id, s.title AS title, c.title AS ctitle, s.active AS active, s.length AS length, s.redirect AS redirect, n.num FROM survey_info s, survey_category c, (SELECT COUNT(*) AS num FROM survey_s.id) n WHERE s.category = c.id; 
```

我只是不确定如何使用 s.id 作为另一个表名称的一部分（或者是否可以这样做）任何帮助，甚至是正确方向的一点将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:02:56.373

您需要为所有调查使用一张表。
添加新创建的 id 不是作为表名，而是作为该表中的调查 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:10:45.887

您创建一个关系模型，将所有调查选项存储在一个表中。这是一个示例设计：

```
survey
------
id PK
title

surveyOption
--------------
id PK
survey_id FK
option

surveyResponse
--------------
id PK
surveyOptionId FK
response 
```

# javascript - Ajax 使用 JSON 传递数组值

> ID：14652259
> 
> 赞同：0
> 
> 时间：2013-02-01T17:57:47.933
> 
> 标签：javascript, ajax, arrays, json, parameters

我有这个带有复选框表和提交按钮的 html 表单。单击按钮时，我会调用 ajax_function，我想在其中将 booking_seats 数组的值传递给另一个 php 页面。我想知道到目前为止我所做的是否正确，所以我可以继续。这是 ajax 函数：

```
 <html>
    <script type="text/javascript" src="jquery.min.js">
    function ajax_function(){
    var count=0;
    var booked_seats=new Array(); // an array with all the checked 'seats'
    var t1=parseInt(document.getElementById("basic_ticket").value)
    var t2=parseInt(document.getElementById("red_ticket").value)
    var total_amount=t1+t2;
    var c = document.getElementById('myform').getElementsByTagName('input');
        for (var i = 0; i < c.length; i++) {
    if (c[i].type == 'checkbox' && c[i].checked==true){
        booked_seats[count]=c[i].id;
        count++;
    }

    }

   var ajaxRequest;  

   try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
   } catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
     }
   }
     // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        document.myform.time.value = ajaxRequest.responseText;
    }
   }

   $.ajax({
       url: "book_seats_sh1.php",
       data: JSON.stringify({ nameParameter: booked_seats }), //my array
       success: function(noOfResults) {
       alert(noOfResults);
       }
    }); 
```

}

这是html的正文：

```
 <body>

    <form id="myform" action="book_seats_sh1.php" method="post">
    <table width="212" border="1">
    <tr>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y1" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y2" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y3" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y4" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y5" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y6" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y7" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y8" /></td>
    </tr>
    <tr>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y9" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y10" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y11" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y12" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y13" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y14" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y15" /></td>
     <td bgcolor="#FF9966"><input type="checkbox" name="Seat_choice[]" id="Y16" /></td>
    </tr>
    <tr>
      (etc.)

     </table>
     <input type="button" name="Book_tickets" id="Book_tickets" value="Κράτηση" 
     onclick="ajax_function()"/>
     </form>

     </body>
     </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:01:46.633

您可以删除整个部分

```
var ajaxRequest;
...
ajaxRequest.onreadystatechange = function(){
...
} 
```

因为直接在后面，你已经有一个 jQuery ajax 调用

```
$.ajax(...); 
```

否则，代码看起来不错，只要您的 PHP 页面期望输入为 JSON。

此外，为什么你`jQuery.ajax()`在一侧使用，但在另一侧使用纯 javascript 收集输入参数？

# php - PHP Session 变量在有 www 或没有 www 的情况下丢失

> ID：14652265
> 
> 赞同：1
> 
> 时间：2013-02-01T17:58:08.583
> 
> 标签：php, session-variables

我的网站使用 PHP 会话来跟踪登录用户。每个页面都有 session_start(); 正确实施，但是当我放置 www.chrome 时 在域名中，它不使用会话变量。当我在没有 www 的情况下将其替换回来时。它又可以正常工作了，所以变量不是未设置，而是没有被使用。

奇怪的是，在 Firefox 中，情况正好相反。万维网。有效，没有无效。有没有解决的办法？我遇到了麻烦，因为我正在使用 PayPal 重定向到我的网站，并且我不能让我的用户必须在之后直接注销并重新登录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T18:01:21.170

`www.example.com`并且`example.com`不是同一个网站。他们*通常*是，但只是按照惯例。`www.example.com`是一个子域`example.com`

出于这个原因，设置的 cookie`example.com`将不会被使用，`www.example.com`反之亦然，因为假设它们是相同的东西是不安全的。

`session.cookie_domain`您可以通过将 php.ini 设置设置为`.example.com`（当然，替换为您自己的域名）允许会话 cookie 在所有子域以及主域上工作，从而在某种程度上覆盖此行为

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T18:02:19.417

您应该在 PHP 中设置 cookie_domain 或确保您的用户只能看到带有 www 或不带 www 的站点。您可以使用 .htaccess（apache 服务器）来完成此操作。

为多个子域设置 cookie 域的示例：

```
session_set_cookie_params(0, '/', '.example.com'); 
session_start(); 
```

# android - 带有自定义适配器和其他视图元素的 ListView

> ID：14652271
> 
> 赞同：0
> 
> 时间：2013-02-01T17:58:41.553
> 
> 标签：android, android-layout

我正在学习使用[Hierarch Viewer 工具](http://developer.android.com/tools/debugging/debugging-ui.html)，但同时感谢任何关于为什么下面的布局没有正确呈现的提示。

我正在尝试呈现“html”表格视图。使用自定义列表适配器正确呈现内容（表体）。这行得通。但是，当我添加一个 textView（下面的 text_test）作为标题时，列表不再呈现。我可以看到通过我的适配器的代码流（填充视图持有者等），但在屏幕上我只看到标题文本，没有 listView。我曾经使用 FrameLayout（如评论中所述），但后来切换到 LinearLayout。

谢谢。

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.my_list_view, container,
                false);
        ListView lv = (ListView)view.findViewById(R.id.my_list_view_one);
        // Tell the list view which view to display when the list is empty
        //lv.setEmptyView(getActivity().findViewById(R.id.my_list_view_empty));

        // Set up the adapter
        mCustomAdapter = new ListAdapterMyType(inflater, new ArrayList<MyType>());
        lv.setAdapter(mCustomAdapter);
        return  view;
    } 
```

## my_list_view.xml

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <!-- The frame layout is here since we will be showing either
the empty view or the list view.  -->
    <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="1">

        <TextView
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:text="@string/text_test"/>

        <ListView
                android:id="@+id/my_list_view_one"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:drawSelectorOnTop="false"/>

        <!-- Here is the view to show if the list is emtpy -->
        <TextView android:id="@+id/my_list_view_empty"
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:text="@string/list_no_items"
                  android:visibility="gone"/>

    </LinearLayout>
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:02:20.493

> But, when I add a textView (text_test below) to use as header, the list is not rendered anymore.

The TextView is set to `match_parent` in both the width and height, so it will fill the entire screen... To put a TextView above your ListView try:

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:orientation="vertical">

    <TextView
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:text="@string/text_test"/>

    <ListView
            android:id="@+id/my_list_view_one"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:drawSelectorOnTop="false"/>

    <!-- Here is the view to show if the list is emtpy -->
    <TextView android:id="@+id/my_list_view_empty"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:text="@string/list_no_items"
              android:visibility="gone"/>

</LinearLayout> 
```

I removed the outer LinearLayout, since it only had one child it did nothing. I also changed the remaining LinearLayout's orientation to `vertical` and set the header TextView height to `wrap_content`.

If you want your custom header to scroll with your ListView, use the [`addHeaderView()`](https://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29) method (*before* calling `setAdapter()`) instead of a separate TextView in your layout. This approach will also hide the header when the ListView is empty.

# c# - 使用 Database First EF5 将查询映射到多个实体并在 DataGrid 中查看它们

> ID：14652272
> 
> 赞同：0
> 
> 时间：2013-02-01T17:58:43.120
> 
> 标签：c#, linq, entity-framework, entity-framework-5

我正在使用 Database First EF5 迈出第一步，我试图在 EF5 ORM 范式中从经典的 ,等中*重现*我的知识，但我被困住了：`DataTable``DataAdapter`

我过去经常使用`DataGridsViews`和`Trees`填充它们`Stored Procedures`。我用来显示的信息对应于多个表/实体。

例如，假设一个博客应用程序。像这样的帖子，用户等：

表：

*   `Post {Id, Subject, Body, Date, Author}`
*   `User {Id, Name, Email, Pwd}`

为了加入所有表格并计算一些值，我们有一个`StoredProcedure`. 此 SP 从表和 2 个运行时计算值返回`Post`属性`User`：

*   `Post.Subject, Post.Body, Post.Categories, User.Name, DaysSincePublished, IsAuthorOnline`

或者让它更容易：

*   `Post.*, User.*, DaysSincePublished, IsAuthorOnline`

**问题：**

*   是否可以一次将先前的记录集适合多个实体（`Post`和`User`）？并用它填充 DataGridView？
*   是否可以将其放入动态创建的实体中？在这种情况下，是否可以从 DataGridView 中更新（绑定）它。
*   我对问题的处理方法错误吗？

我尝试过类似`Context.ObjectContext.Translate<TEntity>()`or`Context.Database.SqlQuery<TEntity>(storedProcedure, parameterArray);`但一次只返回 1 个实体的方法。

**注意：** 使用此示例可以忘记`StoredProcedure`并进行`linq`查询。但在实际场景中，我有超过 10 个表和子查询的查询，几次没有 FK，......并且非常关心服务器性能，存储过程是必须的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:29:33.320

好吧，无论如何，你的问题很模糊......

要正确使用 ORM，比如 EF，我认为理解 SQL 世界比理解对象世界更好。

因此，假设您有两个与您的表相对应的类：

我想您将首先使用数据库，而不是 Code First 或 Model First。

使用 EF 时，将从您的数据库生成类。

类似的东西：

```
public partial class Post {
   public int Id {get;set;}
   public string Subject  {get;set;}
   public string Body {get;set;}
   public DateTime Date {get;set;}
   //etc.
   public virtual User Author {get;set;} //this is what's called a Navigation proeprty, which will help you to find relations with your User class.
}

public partial class User {
   public int Id {get;set;}
   public string Name {get;set;

   public IList<Post> Posts {get;set;}//Navigation property from User to Post class. It's a list, reflecting the one-to-many from Post to User.
} 
```

现在，对于计算属性，您可以通过几种方式执行此操作。

一种是创建部分类 Post 的另一部分

```
public partial class Post {
  public int DaysSincePublished {get {return (DateTime.Now - Date).Days;}}
} 
```

然后，您可以使用这样的简单查询，说您有

```
public DbSet<User> Users {get;set;}
public DbSet<Post> Posts {get;set;} 
```

然后

```
var myQuery = context.Users.Include(m => m.Posts);

var list = myQuery.ToList();//this will get data from your db. 
```

在列表中，您拥有所需的所有字段，包括“计算的属性”（好吧，您已经从 Post 和 User 中获得了所有信息，实际上这可能比您真正需要的要多）。

为避免检索所有数据，您可以使用匿名类型（或自定义类）中的选择数据

```
var myQuery = context.Posts.Select(m => new  {
   subject = m.Subject,
   body = m.Body,
   userName = m.User.Name,
   daysSincePublished = SqlFunctions.DiffDays(m.Date, DateTime.Now)//see another way to get calculated value
 });

var list = myQuery.ToList()//retrieving only the required fields from db. 
```

而“我的真正需求对于 ORM 来说太复杂了”的论点没有多大意义。无论如何，您仍然可以在需要时使用 SP，甚至可以使用原始 sql。目标过于务实，但在得出明确结论之前进行一些调查；）

# amazon-web-services - 备份：Amazon S3 或 Glacier - 大量小文件？

> ID：14652276
> 
> 赞同：30
> 
> 时间：2013-02-01T17:58:51.753
> 
> 标签：amazon-web-services, backup, amazon-glacier

我试图了解复杂的 Amazon Glacier 定价模型。我不想存储大量数据，几 GB 的说 10。我希望永远不要下载文件，如果我确实需要，我不在乎需要多长时间。

我上传的每个文件是否需要付费？压缩大量小文件并分块上传是否更便宜，还是说 10,000 张图片无关紧要？（在搜索过程中无法得到直接的答案）

我可以请求下载整个存档/存储桶还是逐个文件？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-09-19T03:41:13.580

我知道这有点老了，但你可能仍然会发现我的回答很有帮助（我希望）。另一个答案基于 S3，我相信这不是您的问题。

Glacier 旨在用于稀有文件访问。考虑到这一点，如果您需要一次检索许多文件，他们会惩罚您。**在您的特定情况下，我建议上传 10.000 个单独**的文件，而不是假设 100 个 ZIP 文件，每个文件 100 个文件。原因很简单。Glacier 仅允许您免费下载总档案的 5%，并且每天按比例分配。因此，例如，如果您需要下载 10 张您在周末拍摄的照片，那么如果将这 10 张照片散布在保险库中，您就可以免费获得这些照片。另一方面，如果您有一个包含 100 张照片的 ZIP 文件，您将被迫下载该 zip，该 zip 文件可能会超过总存档的 5%，这意味着您将支付一些检索费用。

上传较少文件有意义的唯一原因是避免高上传请求（10.000 个文件通常意味着 10.000 个请求）。请求每 1000 次收费 0.05 美元。此费用远低于检索费用（考虑到施加的限制），这就是为什么我总是建议上传单独的文件。当然，您可以压缩对在一起有意义的文件。

Amazon Glacier 中的检索成本非常复杂。他们在这里有一个很好的解释：http: [//aws.amazon.com/glacier/faqs/#How_much_data_can_I_retrieve_for_free](http://aws.amazon.com/glacier/faqs/#How_much_data_can_I_retrieve_for_free) 但即使在那里，您也需要注意计算，以清楚地了解成本是如何计费的。

关于这个问题：我可以请求下载整个存档/存储桶还是逐个文件？

请求是逐个文件的，尽管您可以一次选择多个文件并一起下载它们。

决定使用 S3 还是 Glacier 真正取决于您对文件访问的需求。如果您以后需要访问您的文件，那么 Glacier 就是您的答案。否则 10GB S3 仍然可以比 Glacier 便宜且更灵活。就我而言，我发现家庭照片是非常珍贵的东西。这就是为什么我在冰川上有一个 100GB 的备份以及我所有的家庭照片。除非家里发生某种灾难，否则我不打算访问它。在那种情况下，我想我不会介意检索成本，如果这样可以保存我真正关心的东西。但这只是我。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-02T13:41:27.303

S3 的详细定价信息可[在此处](http://aws.amazon.com/s3/pricing/)获得。可用 API 函数的详细信息在[此处](http://docs.aws.amazon.com/AmazonS3/latest/API/APIRest.html)。

对于 S3，您主要需要为上传带宽（发送**到**S3 的字节数）、下载带宽（**从**S3 接收的字节数）和存储（S3 中**的**字节数）付费。您还需要为 API 调用的数量和类型付费。

因此，如果您将 10GB 数据以 10,000 个 1MB 文件的形式上传到 S3，将其存储一个月，然后将每个文件下载一次，您将需要付费：

*   上传带宽 0.00 美元（这是免费的）
*   上传文件的 10,000 个 PUT 请求 0.10 USD
*   0.95 美元用于存储 10GB 一个月
*   10GB 下载带宽 1.08 美元（第一个是免费的，然后是 0.12 美元/GB）
*   下载文件的 10,000 个 GET 请求 0.01 美元

那是 2.14 美元。如果您每次上传和下载一次，但将数据保留一年，则仅存储成本将高达 12 * 0.95 美元，即 11.40 美元。如果您的文件平均只有 100KB，因此您有 100,000 个文件，那么您将为 PUT 和 GET 请求支付 10 倍的费用，或者 1.10 美元而不是 0.11 美元。

每次操作只能上传和下载一个文件。如果您使用 Zip 将文件合并为一个，则只需使用较少的操作即可保存，正如您所看到的那样，一开始就非常便宜。

不过，这里有一个怪癖。我很确定您在上传和下载时需要为所有带宽使用付费，包括请求标头，而不仅仅是包含您的数据的正文。因此，如果您的文件非常小，则请求标头可能会变得很重要，可能与文件本身一样重要。在这种情况下，您的带宽成本将翻倍。

冰川定价比较复杂，我自己也没用过。基本上，它将存储成本降低了近十倍，而其他成本保持不变，并增加了每个对象的归档和恢复成本。如果您有很多小对象、需要一次获取大量文件或频繁获取文件，那么这些成本似乎很高。当您拥有大量数据（TB 或更多，而不仅仅是 GB）但操作很少时，Glacier 似乎是最好的。鉴于您只有 10GB 的数据，S3 非常便宜，似乎不值得考虑 Glacier。

最后，AWS 提供第一年的免费使用套餐，看起来它可以支付您的所有费用，除了一半的存储费用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-08T12:21:39.083

## 最好使用少量大文件而不是大量小文件

将文件放入 Amazon Glacier 有两种方法。您可以直接与保管库交互，也可以使用 S3 作为前端。

我正在使用 S3（和 Amazon 管理控制台），以便能够查看存档的内容，同时将其廉价地存储在 Glacier 中。

这种方法有一个缺点——因为在 Glacier 中存储任何一条信息都会产生一些数据开销（您也需要为此付费），因此在逻辑上存在一个收支平衡点。在 2014-04 降价之前，我进行了计算，临界大小约为 16 kB，在 Glacier 中存储较小的文件（使用 AWS S3 作为前端）比仅将其保存在 S3 上更昂贵。随着 S3 存储的降价（Glacier 没有改变），收支平衡点甚至更高。

我想，即使没有 S3 作为前端，情况也会相似，尽管对较小的文件更友好一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-24T18:44:03.757

自 2016 年 11 月 21 日起，Amazon 更新了 Glacier 检索的免费层级政策，并更新了“平均每月存储空间的 5%”政策，支持每月免费 10GB。**但是，如果您的检索政策是在那一天之前设置的，那么您仍然使用“5%”政策，并且此处的其他答案仍然适用于您。**

如果您的检索政策是在 2016 年 11 月 21 日之后设置的，并且您处于 OP 的立场：

您只存储 10GB，因此您可以使用标准检索每月免费检索一次所有数据。如果将所有 10,000 张照片都压缩到一个 zip 文件中（用于检索），则没有区别。

在这种情况下，唯一的变量是上传请求的数量。以每 1,000 美元 0.05 美元的价格发送 10,000 次请求只需 0.50 美元，这是针对您的特定案例的一次性费用。

[AWS Glacier 常见问题解答](https://aws.amazon.com/glacier/faqs/)中的更多定价信息

更新：

[Glacier 文档建议对大于 100MB 的文件使用分段上传。](https://docs.aws.amazon.com/amazonglacier/latest/dev/uploading-archive-mpu.html)

在尝试上传 8GB 文件时，我在几次超时后独立得出了这个结论。

# c - 通过 main 传入和设置全局 int

> ID：14652279
> 
> 赞同：0
> 
> 时间：2013-02-01T17:59:09.790
> 
> 标签：c, variables, global, main

我一直在尝试通过动态传递要添加到堆栈的项目数量来为我的堆栈 ADT 创建一个测试器。但是，当我尝试传入一个整数（例如 22）时，它会将全局变量 (ITEMS) 分配为 50。如果我尝试其他值，则范围在 45 到 55 之间。

我的主要功能是：

```
int main(int numArgs, char* numItems[]) {
    Stack stack;

    if (numArgs == 0) {
        printf("Good job, you broke C.\n");
    } else if (numArgs == 2) {
        int items = (int)*numItems[1];
        if(*numItems[1] != ITEMS) {
            setItems(items);
        } 
    } else if (numArgs>=3) {
        printf("Usage: TestStack <numItems> <-help>\n");
        exit(1);
    } else if(numItems[1] == "-h" || numItems[2] == "-help") {
        printf("numItems   - Number of items to add to the stack.\n            -h     (-help) -  Shows this help output.\n");
        exit(1);
    }
    /* test code here*/
} 
```

赋值函数为：

```
static void setItems(int numItems) {
    ITEMS = numItems;
    printf("ITEMS IS %d\n",ITEMS);
} 
```

我的全局变量只是

```
int ITEMS = 11; //Default value. 
```

有什么理由让我实际上无法获得我想要传递的真正价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:03:06.853

Your problem is here:

```
int items = (int)*numItems[1]; 
```

This will read the `int` value of the first `char` that you pass in... Since you pass in `22`, it will get the ASCII Valule of `2` which is 50\. [Refer to this chart](http://www.asciitable.com/index/asciifull.gif) (thanks asciitable.com) under **Dec 50**:

![ASCII table](../Images/1417f0cdffa9c0b6d8d26f3aaf9a66bc.png)

What you want to do instead is interpret the whole cstring as an integer, using `atoi`:

```
int items = atoi(numItems[1]); 
```

or `strtol`:

```
int items = strtol(numItems[1], NULL, 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:10:09.687

所以其他人基本上都指出了这一点：您获得的值不是`22`的第一个字符的`"22"`字符代码，它是的字符代码`2`（可能是 50，如果您的系统使用 ASCII 或 Unicode）。

但是看在上帝的份上，不要使用`atoi()`! 它已被弃用、丑陋、不安全且不完整。您应该使用`strtol()`or`strtoll()`代替：

```
int theNum = strtol(argv[1], NULL, 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:07:12.220

您需要做的是`numItems = atoi(argv[1])`将所述参数的第一个字符转换为`int`. 阅读手册页`atoi(3)`。帮自己一个忙，去阅读 Steve Summit 的[C 教程](http://www.eskimo.com/~scs/cclass/cclass.html)（是的，它已经过时了，但仍然非常相关）。另请阅读 Rob Pike 关于[C 风格](http://www.lysator.liu.se/c/pikestyle.html)的漫谈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:07:35.537

即使您传递整数或浮点数，在`C`程序命令行参数也将作为字符串接收。

如果你传递 10，那么`argv[1]`将有两个字节的字符串地址，其 ASCII 值为`1`(49) 和`0`(48)。所以`*argv[1]`将给出第一个字节的值，即 49。如果您尝试将其打印为字符，您将获得`1`，或者`48`如果您尝试将其打印为整数，您将获得。

```
printf("%s", argv[1]) //will print 10
printf("%u", argv[1]) //will print address of the string "10"
printf("%c", *argv[1]) //will print 1
printf("%d", *argv[1]) //will print 49 
```

# android - 如何从另一个活动中填充微调器？

> ID：14652289
> 
> 赞同：0
> 
> 时间：2013-02-01T17:59:51.183
> 
> 标签：android, android-activity, spinner, android-spinner

我的要求是太填充另一个活动的微调器。

主要活动：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
} 
```

另一项活动：

```
public class TravellerData extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Spinner spinner = (Spinner) findViewById(R.id.spinner);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.array.the_array, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinner.setAdapter(adapter);

}
} 
```

当主要活动开始时，我需要从其他活动中填充微调器。我必须使用意图吗？有什么方法可以简单地开始活动。

谢谢。

# ruby-on-rails - 通知关联 - 正确的做法是什么？

> ID：14652294
> 
> 赞同：1
> 
> 时间：2013-02-01T18:00:12.397
> 
> 标签：ruby-on-rails, associations, rails-activerecord

我有一个带有用户模型的 Rails 3.2 应用程序。我想添加一个可以由以下用例触发的通知机制：

*   喜欢某人的个人资料
*   评论某人的个人资料
*   关注某人

在所有情况下，一个用户都会根据他的行为生成另一个用户将收到的通知。因此，存在通知的发送者和接收者。

我现在正在思考如何构建我的关联。到目前为止，我的模型如下所示：

**通知.rb**

```
attr_accessible :content, :read_at, :recipient_id, :sender_id

belongs_to :sender,     class: :user
belongs_to :recipient,  class: :user 
```

**用户.rb**

```
has_many :notifications, as: :recipient, dependent: :destroy, foreign_key: :recipient_id
has_many :notifications, as: :sender, dependent: :destroy, foreign_key: :sender_id 
```

这个伪代码只能帮助理解我需要什么——让我很困惑的是，我在通知模型中两次引用了用户模型，并且用户以两种不同的方式有许多通知。

所以，我的问题是：

*   您将如何调整上述关联？
*   你会怎么称呼他们？
*   我如何能够在用户模型上调用所有发送的通知和所有接收的通知，而无需编写范围？
*   这是正确的方法，还是我应该在两个地方使用连接表以避免两次引用用户？

谢谢！

# 解决方案

将 Shane 的解决方案用语言表达出来，这就是模型的外观。这真的比我想象的要容易得多。我以为我必须在这里做一些魔术 - 但 Rails 又一次以其惊人的简单性欺骗了我！嗯，这就是为什么我这么喜欢它。

非常感谢，谢恩！

**通知.rb**

```
attr_accessible :content, :read_at, :recipient, :recipient_id, :sender, :sender_id

belongs_to :sender, class_name: "User"
belongs_to :recipient, class_name: "User" 
```

**用户.rb**

```
has_many :received_notifications, class_name: "Notification", foreign_key: "recipient_id", dependent: :destroy
has_many :sent_notifications, class_name: "Notification", foreign_key: "sender_id", dependent: :destroy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:46:00.090

这是完全正常的。以下是在流行的开源应用 Redmine 中使用的相同模式的示例：

[https://github.com/edavis10/redmine/blob/master/app/models/workflow_rule.rb#L23-L24](https://github.com/edavis10/redmine/blob/master/app/models/workflow_rule.rb#L23-L24)

至于需要一种同时接收发送和接收通知的方法，这里的答案非常适合基本需求。

[带有多个外键的 Rails 模型 has_many](https://stackoverflow.com/questions/307581/rails-model-has-many-with-multiple-foreign-keys)

# mongodb - 用于缓存用户数据的 ElasticSearch 与 MongoDB

> ID：14652295
> 
> 赞同：4
> 
> 时间：2013-02-01T18:00:15.577
> 
> 标签：mongodb, elasticsearch

到目前为止，我一直在使用 MongoDB (Node.js + Mongoose) 来保存属于用户的帖子，以便以后检索它们以显示在流中（就像 Facebook、Twitter 等）

最近有必要让用户深入搜索他的流；MongoDB 的搜索不足，因此我在我的服务器（运行 CentOS、FWIW 的 Amazon EC2 m1.large 实例）上实现了 ElasticSearch。

**我的问题**：我现在处于在 MongoDB（缓存用户流的位置）和 ElasticSearch（搜索它的位置）之间复制数据的位置。

将我的缓存完全移动到 ElasticSearch 中，一起摆脱 MongoDB 有什么缺点吗？将存储空间翻倍似乎是一种浪费，而且我没有其他地方可以访问这些数据（它仅在呈现/搜索帖子流时使用）。

具体来说，我想确保我没有忽略任何关于：性能。我喜欢减少 MongoDB 作为瓶颈的想法，但我担心 ElasticSearch 的内存开销。MongoDB 在我的云设置中运行在自己的服务器上，而 ElasticSearch 运行在与 node.js 相同的实例上。这意味着我将拥有**更多**ElasticSearch 服务器（node.js 服务器位于自动缩放阵列中），但它们都不是**专用**服务器（与 MongoDB 不同）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T19:07:02.080

将 ES 用作“主要数据源”的唯一大障碍是目前没有好的备份机制。ES 团队正在研究它，预计它会在今年年底推出，但与此同时，您必须实现自己的备份脚本。

至于性能，真的很难说，因为几乎每种情况都是独一无二的。ES 受益于记忆——所以越多越好。特别是 sorts/filters/facets/geo 都喜欢吃内存。例如，如果您没有在刻面方面做太多事情，那么您可以用更少的内存来解决问题。

ES 不需要在专用节点上运行……但它会很乐意使用您提供的尽可能多的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T19:12:59.207

另一种选择是仅使用弹性搜索索引。您可以选择不以可读格式保存数据，因此您在 ES 中搜索，然后根据需要从 MongoDB 检索文档给您的用户。

下面的问题正是对此进行了评论。 [仅存储选定的字段而不将 _all 存储在 pyes/elasticsearch](https://stackoverflow.com/questions/12479583/storing-only-selected-fields-and-not-storing-all-in-pyes-elasticsearch)

# java - 将数组分成两部分

> ID：14652300
> 
> 赞同：-4
> 
> 时间：2013-02-01T18:00:44.227
> 
> 标签：java, arrays

> 我有一个 Array[10] 将我的数组分成两个不同的数组 A 和 B。A 具有 Array 的元素，它们位于偶数索引上，B 具有奇数索引的 Array 元素。
> 
> 使用 for 循环使用适当的代码快速响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:08:08.837

```
class Main {

  public static void main(String args[]) {

    // Creating arrays
    int array[], a[], b[];
    array = new int[10];
    a = new int[5];
    b = new int[5];

    // Giving initial values to array, and printing
    System.out.print("array: " );
    for (int i = 0; i < array.length; i++) {
      array[i] = (int) (Math.random()*10);
      System.out.print("\t" + array[i]);
    }
    System.out.println();

    // Splitting the array in two
    for (int i = 0; i < 5; i++) {
      a[i] = array[2 * i];
      b[i] = array[2 * i + 1];
    }

    // Printing a
    System.out.print("a : " );
    for (int i = 0; i < a.length; i++) {
      System.out.print("\t" + a[i]);
    }
    System.out.println();

    // Printing b
    System.out.print("b : " );
    for (int i = 0; i < b.length; i++) {
      System.out.print("\t" + b[i]);
    }
    System.out.println();
  }
} 
```

输出：

```
array:  8   8   6   0   4   0   0   9   9   2
a :     8   6   4   0   9
b :     8   0   0   9   2 
```

# iphone - 如何使用 PageControl 查看不同的 UITableViews？

> ID：14652301
> 
> 赞同：1
> 
> 时间：2013-02-01T18:00:54.203
> 
> 标签：iphone, ios, objective-c, uitableview, uipagecontrol

我想知道是否可以将 UIPageControl 添加到 TableViewController 以便在不同表之间翻转？

解决这个问题的正确方法是什么？

是否有一些示例代码来实现这一点？对于像我这样的初学者来说，Apple 网站上的代码看起来很复杂，不使用 Storyboard，它只处理一些图像。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:26:03.913

我不会使用 TableViewController，而是使用 ViewController 实现 UITableView 数据源和委托。

将 UITableView 和 UIPageControl 放在其中，然后在 UIPageControl 中进行更改，更改 tableview 的数据源并使用 UITableView.reloadSections 和适当的 UITableViewRowAnimation（右或左）。

您还可以在 tableview 上添加手势识别器以允许向左/向右滑动。

# linq - 当数据源可以更改时，我可以使用 LINQ 吗？

> ID：14652302
> 
> 赞同：1
> 
> 时间：2013-02-01T18:00:54.777
> 
> 标签：linq, arcgis

我正在为.NET 4 和 WPF 中调用 ESRI ArcGIS Desktop 的软件包创建应用程序扩展。它将依赖表格数据，但我希望此数据的存储选项尽可能灵活。因此，用户可以提取 Access mdb、csv、xml、SQL Server 等内容。

我想使用 LINQ，但对它不熟悉，我无法确定它是否合适。从我读到的 EDMX 出来了，这很好，但不确定没有 LINQ 是否真的能很好地工作。我正在阅读有关 IQueryable 的信息，它似乎可以工作。但在我花太长时间旋转我的轮子之前，我想看看我是不是找错了树。

我应该进一步研究 IQueryable 之类的东西，还是让它过于复杂，可以使用 IEnumrable、List 或字典等东西，而 LINQ 应该适合这些东西？或者这会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:06:16.380

您可以将 LINQ to Objects 与任何`IEnumerable<T>`. 但是，如果您使用 ArcObjects，那么任何数据源都不太可能直接可用，因为它们的“集合”不是 .NET 集合。

您可以轻松地将它们包装在自己的`IEnumerable<T>`包装器中，然后对它们使用 LINQ to Objects。

# jakarta-ee - 从 JNDI 查找 websphere 队列

> ID：14652306
> 
> 赞同：0
> 
> 时间：2013-02-01T18:00:59.607
> 
> 标签：jakarta-ee, websphere, jndi, websphere-7, iiop

我需要从 JNDI（配置的 SIB）中查找 websphere 7 队列。首先，我编写了一个访问远程 websphere 服务器的客户端程序。我添加了 com.ibm.ws.admin.client、com.ibm.ws.runtime、com.ibm.ws.sib.client.thin.jms 和 com.ibm.ws.webservices.thinclient jar 文件。

代码如下。

```
Hashtable<String, Object> env = new Hashtable<String, Object>();
env.put(Context.INITIAL_CONTEXT_FACTORY,
                    "com.ibm.websphere.naming.WsnInitialContextFactory");
env.put(Context.PROVIDER_URL, "iiop://localhost:2809"); 
```

这不起作用，因为我作为远程客户端访问它。因此我添加了这个，

```
env.put("java.naming.corba.orb",org.omg.CORBA.ORB.init((String[])null,null)); 
```

这目前工作正常。然后我删除了上面的行并将目标 JDK 移动到 IBM JDK。在这种情况下，它也可以正常工作。

当我需要在服务器程序中访问上述队列时面临的实际问题。这在单独的 JVM 上运行。当我尝试访问远程 JNDI 队列时，它给了我一个类转换异常。我相信它是因为它加载了默认的 sun ORB 实现而不是 IBM。我也添加了 com.ibm.ws.orb jar 仍然没有运气。它加载 Sun ORB。因此，它给出了类强制转换异常。

像上面一样，我没有能力加载 org.omg.CORBA.ORB。有什么办法可以运行它吗？我错过了什么吗？也欢迎来自 Websphere 8.5 的任何反馈。

注意：这不是 Websphere MQ。我指的是 Websphere 应用程序服务器队列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:40:21.657

嗯...棘手。您可以尝试打包之前与 EAR 文件一起使用的客户端 jar 文件，并将类加载器策略更改为 PARENT_LAST。

# c# - 如何使 Excel.Application.InputBox 显示并获得焦点

> ID：14652307
> 
> 赞同：0
> 
> 时间：2013-02-01T18:01:00.340
> 
> 标签：c#, excel, inputbox

我的 AddIn 使用 C#，为了引用 Excel 中的单元格，我使用 `Excel.Application.InputBox`，它可以工作。

然而，它`InputBox`总是躲在后面，每次我都必须点击才能把它带到前面，这很烦人。只是想知道如何使它显示在前面？

编辑没有像 BringtoFront 这样的方法

该方法的签名是

```
public object InputBox(string prompt, object title, object _default, object left, object top, object helpFile, object helpContextID, object type) 
```

# php - 我想在我的回声返回中消除 %20

> ID：14652310
> 
> 赞同：0
> 
> 时间：2013-02-01T18:01:14.367
> 
> 标签：php, wordpress

在我的 .php 文件中，我使用以下内容返回我的帖子所在的类别：

`<?php echo single_cat_title(); ?>`

然后在我的 URL 中返回类别标题。但是，由于我的类别是两个词（“南非”），因此 URL 显示为：“south%20africa”而不是“southafrica”。

我知道正在插入“%20”，因为 url 不能有中断。有没有办法编辑上述内容`<?php echo single_cat_title(); ?>`以返回类别标题但消除任何中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:02:40.117

```
echo urldecode("south%20africa"); 
```

或者

```
echo str_replace('%20', '', "south%20africa"); 
```

# javascript - 使用Ajax显示表单数据；返回 [对象 FormData]

> ID：14652315
> 
> 赞同：2
> 
> 时间：2013-02-01T18:01:23.903
> 
> 标签：javascript, ajax, django, xmlhttprequest

我正在开发一个更大的 Django 应用程序，但是已经制作了这个页面来测试一些功能：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
        function myFunc() {
            var xmlhttp = new XMLHttpRequest();
            var data = document.getElementById("test");
            var fd = new FormData(data);

            xmlhttp.open("POST", "http://127.0.0.1:8000/test/", true);
            xmlhttp.send(fd);

            document.getElementById("text").innerHTML= fd;
        }   
    </script>
</head>
<body>
    <br><br>
    <form>
        <input type="text" id="test">
        <input type="button" onclick="myFunc()" value="Submit">
    </form>
    <p id="text">Submitted text goes here.<p>
</body>
</html> 
```

我希望在表单中显示的任何文本都显示在下面。点击提交按钮后 a) 我在控制台上得到一个 HTTP 403，并且 b) 文本被替换为`[object FormData]`. 我尝试了一些变体`document.getElementById("text").innerHTML= fd;`（例如...=fd.value;），但它不起作用。有什么想法吗？

# javascript - 切换每个表格行，直到到达具有 X 类的表格行

> ID：14652318
> 
> 赞同：0
> 
> 时间：2013-02-01T18:01:29.980
> 
> 标签：javascript, jquery, html-table

我正在将手风琴效果集成到表格中。

具有“更多”类的表格行是上述表格行的子项。单击该表行时，我希望切换“更多”tr。我如何只针对那些表行而不是常规的“行”表行。

```
 <tr class="row first">
            <td>
                <span class="time">09.00&ndash;09.15</span>
                <h3>
                    Welcome and introduction</h3>
            </td>
            <td>
                person info</td>
        </tr>
        <tr class="row">
            <td>
                <span class="time">09.00&ndash;09.15</span>
                <h3>
                    Welcome and introduction</h3>
            </td>
            <td>
                person info</td>
        </tr>

        <tr class="more">
            <td>
                <h3>
                    hidden content</h3>
            </td>
            <td>
                person info</td>
        </tr>
        <tr class="more">
            <td>
                <h3>
                    hidden info</h3>
            </td>
            <td>
                person info</td>
        </tr>
            </div>

        <tr class="row">
            <td>
                <span class="time">09.00&ndash;09.15</span>
                <h3>
                    Welcome and introduction</h3>
            </td>
            <td>
                person info</td>
        </tr>
        <tr class="row break">
            <td>
                <h3>
                    10.50&ndash;11.20 Coffee break</h3>
            </td>
            <td>
                &nbsp;</td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:07:51.313

使用[`.nextUntil()`](http://api.jquery.com/nextUntil/)和的组合`:not`。

```
$("table tr.row").each(function(){
  var $this = $(this);
  $this.click(function(){
    $this.nextUntil(":not(.more)").toggle();
  });
}); 
```

选择器`:not(.more)`匹配所有不包含`more`类名的元素。

[看这里。](http://jsfiddle.net/pMtLb/)

# gcc - Compiling mruby for STM32F407 cortex-m4 target

> ID：14652320
> 
> 赞同：3
> 
> 时间：2013-02-01T18:01:51.540
> 
> 标签：gcc, embedded, arm, mruby

I'm trying to compile mruby for the STM32F407 cortex-m4 target, but i get the following error when running `./minirake` in the repo directory:

```
Command Failed: ["/home/eugenio/gcc-arm-none-eabi-4_7-2012q4/bin/arm-none-eabi-ld" 
 -T "/home/eugenio/gcc-arm-none-eabi-4_7-2012q4/share/gcc-arm-none-eabi/samples/ldscripts/mem.ld" 
 -o "build/arm-none-eabi/bin/mrbc" 
 "build/arm-none-eabi/tools/mrbc/mrbc.o" 
 "build/arm-none-eabi/lib/libmruby_core.a" ]` 
```

What am I doing wrong? The toolchain is the one from launchpad the git repo is up to date and googling around didn't help.

Complete stacktrace is at [stacktrace](http://pastebin.com/zfa8THYH)

Build_config file for mruby is at [buildconfig](http://pastebin.com/CNM0pPXm)

# python - Python dictionary in to html table

> ID：14652325
> 
> 赞同：29
> 
> 时间：2013-02-01T18:02:11.237
> 
> 标签：python, flask, jinja2

Is there any way to print the python dictionary in to a table in HTML. I have a python dictionary and am sending to HTML by using

```
return render_template('index.html',result=result) 
```

Now I need to print the elements in result dictionary in to HTML as a table.

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-01T22:39:27.633

Flask 使用 Jinja 作为模板框架。您可以在模板 (html) 中执行以下操作

**Jinja 也可以单独用作标记渲染器。**

Python3 / Jinja2

```
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
  {% for key, value in result.items() %}
   <tr>
       <td> {{ key }} </td>
       <td> {{ value }} </td>
   </tr>
  {% endfor %}
  </tbody>
</table> 
```

Python2/神社

```
<table>
{% for key, value in result.iteritems() %}
   <tr>
        <th> {{ key }} </th>
        <td> {{ value }} </td>
   </tr>
{% endfor %}
</table> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-24T15:04:24.047

检查[烧瓶表](https://pypi.python.org/pypi/Flask-Table/0.2.8)。

文档中的示例（稍作编辑）：

```
from flask_table import Table, Col

# Declare your table
class ItemTable(Table):
    name = Col('Name')
    description = Col('Description')

items = [dict(name='Name1', description='Description1'),
         dict(name='Name2', description='Description2'),
         dict(name='Name3', description='Description3')]

# Populate the table
table = ItemTable(items)

# Print the html
print(table.__html__())
# or just {{ table }} from within a Jinja template 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-01T18:44:31.720

我有更好的运气将字典放入列表中，然后让 html 循环遍历列表并打印表格。蟒蛇将是：

```
Table = []
for key, value in results_dict.iteritems():    # or .items() in Python 3
    temp = []
    temp.extend([key,value])  #Note that this will change depending on the structure of your dictionary
    Table.append(temp) 
```

然后在你的 html 中循环遍历表格。

```
<table>
{% for t in table %}
    <tr>
    {% for i in t %}
        <td>{{ i }}</td>
    {% endfor %}
    </tr>
{% endfor %}
 </table> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-13T02:06:42.443

所以我想要一种简单的方法来从只有内联样式的python字典生成html（因为电子邮件）并且找不到任何我满意的东西所以我写了这个，

它使用起来非常简单，并且很容易添加样式到

```
<table style="margin: 3px">
    <tr style="background-color: #7cc3a97d">
        <th style="color: white">col1</th>
        <th style="color: white">col2</th>
        <th style="color: white">col3</th>
        <th style="color: white">col4</th>
    </tr>

    <tr style="background-color: aliceblue">
        <td style="padding: 1rem">value11</td>
        <td style="padding: 1rem">value21</td>
        <td style="padding: 1rem">value31</td>
        <td style="padding: 1rem">value41</td>
    </tr>
    <tr style="background-color: #c2d4e4">
        <td style="padding: 1rem">value12</td>
        <td style="padding: 1rem">value22</td>
        <td style="padding: 1rem">value32</td>
        <td style="padding: 1rem">value42</td>
    </tr>
    <tr style="background-color: aliceblue">
        <td style="padding: 1rem">value13</td>
        <td style="padding: 1rem">value23</td>
        <td style="padding: 1rem">value33</td>
        <td style="padding: 1rem">value43</td>
    </tr>
</table>
```

假设您有以下字典

```
myDict = {
    'col1' : ['value11', 'value12', 'value13'],
    'col2' : ['value21', 'value22', 'value23'],
    'col3' : ['value31', 'value32', 'value33'],
    'col4' : ['value41', 'value42', 'value43'],
} 
```

它可以转换为

```
class HTML:

    def __init__(self, Header, tableStyles = {}, trStyles = {}, thStyles = {}):
        self.tableStyles = HTML._styleConverter(tableStyles)
        trStyles = HTML._styleConverter(trStyles)
        thStyles = HTML._styleConverter(thStyles)
        self.rows = []
        self.Header= f'<tr {trStyles} >'
        for th in Header:
            self.Header += f'\n<th {thStyles} >{th}</th>'
        self.Header += '\n</tr>'

    @staticmethod
    def _styleConverter(styleDict : dict):
        if styleDict == {}:
            return ''
        styles = ''
        for [style, value] in styleDict.items():
            styles +=f'{style}: {value};'
        return f'style="{styles}"'

    def addRow(self, row, trStyles = {}, tdStyles = {}):
        trStyles = HTML._styleConverter(trStyles)
        tdStyles = HTML._styleConverter(tdStyles)
        temp_row = f'\n<tr {trStyles} >'
        for td in row:
            temp_row += f'\n<td {tdStyles} >{td}</td>'
        temp_row += '\n</tr>'
        self.rows.append(temp_row)

    def __str__(self):

        return \
f'''
<table {self.tableStyles} >
{self.Header}
{''.join(self.rows)}
</table>
'''

def dictionaryToHTMLTable(dict : dict):
    html = HTML(Header = dict.keys(),
                tableStyles={'margin': '3px'},
                trStyles={'background-color': '#7cc3a97d'},
                thStyles={ 'color': 'white'})
    for i, row in enumerate(zip(*dict.values())):
        print(row)
        if i%2 == 0:
            BGC = 'aliceblue'
        else:
            BGC = '#c2d4e4'
        html.addRow(row, trStyles={'background-color' : BGC}, tdStyles={'padding': '1rem'})
    return html 
```

并输出

```
print(dictionaryToHTMLTable(myDict)) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-28T21:52:20.283

对于python3，result.items后面没有()

```
<table>
{% for key, value in result.items %}
   <tr>
        <th> {{ key }} </th>
        <td> {{ value }} </td>
   </tr>
{% endfor %}
</table> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-01T18:04:44.017

使用遍历字典项`result.iteritems()`，然后将键/数据写入 html 表的行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-27T20:20:15.377

```
#!/usr/bin/env python3

tbl_fmt = '''
<table> {}
</table>'''

row_fmt = '''
  <tr>
    <td>{}</td>
    <td>{}</td>
  </tr>'''

def dict_to_html_table(in_dict):
    return tbl_fmt.format(''.join(row_fmt.format(k, v) for k, v in in_dict.items()))

if __name__ == "__main__":
    d = {key: value for value, key in enumerate("abcdefg")}
    print(d)
    print(dict_to_html_table(d)) 
```

# php - PHP 语法错误问题（带有测试用例）

> ID：14652329
> 
> 赞同：2
> 
> 时间：2013-02-01T18:02:15.387
> 
> 标签：php, configuration

有人可以给我一个关于这里可能有什么问题的指针：

文件 f1.php：

```
<?php

include('f2.php'); 
```

文件 f2：

```
<?php
echo "HERE"; 
```

报错：

```
`Parse error: syntax error, unexpected '=' in f1.php on line 4` 
```

*   在 nginx 1.2.6 上使用 php-fpm 5.4。
*   文件没有 BOM 标记。
*   服务器没有硬件问题。

这可能是配置问题，但我似乎无法弄清楚。

几分钟前我问过这个问题，但由于我引用项目中的情况而不是特定情况而立即关闭（[https://stackoverflow.com/questions/14651673/strange-php-syntax -错误问题](https://stackoverflow.com/questions/14651673/strange-php-syntax-error-issue)）

更新：显然与 nginx 无关......如果在 cli 中执行同样的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:22:58.453

看来我已经解决了...

短篇小说：
用`--enable-zend-multibyte`.

长话短说：
我尝试了所有可以想象的事情……逐字节检查源文件，没有发现任何问题。我已经尝试在 php 中获取文件内容并从 insidde php 中回显字节数组，在这种情况下，也没有发现任何问题。
我尝试使用调试符号重新编译 php，但该过程以 0377 结束，而 gdb 没有提供任何有用的东西。

无论我做了什么，在点击包含语句（或它的变体）后，我在包含文件的最后一行出现语法错误。

我希望这些文件具有 BOM（正如我问过的几乎每个人所建议的那样）。所以我认为它**必须**与 php 的运行方式有关，并尝试更改环境变量（如 LC_* vars）但再次没有结果。

所以我最后我有一个 add-configure-option-and-recompile-php 会话...不确定为什么所有脚本都不包含多字节字符并且如前所述没有 BOM 标记，但是在重新编译 PHP 之后`--enable-zend-multibyte`，代码开始按预期工作。

**感谢大家的建议。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:15:44.883

如果您使用 APC，您可能没有更新之前的字节码。

尝试`apc_clear_cache();`

# javascript - 优雅的 jquery 搜索栏？

> ID：14652332
> 
> 赞同：-1
> 
> 时间：2013-02-01T18:02:24.843
> 
> 标签：javascript, jquery, forms

我在页面顶部有一个搜索栏的页面上有一个帖子列表。当用户点击回车时，有没有办法获取搜索栏的内容？

我不想提交表单，但我想在不离开页面的情况下获取搜索栏的内容。我想我可以使用该字段的内容来获取该字段的内容，`$("#txt_name").attr('value');`但是有没有一种方法可以在用户在搜索框中按 Enter 键时获取该值？

然后根据他们搜索的内容，我可以检查`<div>`id 并查看它们是否匹配。如果它们不匹配，则将它们淡出...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:22:07.207

您可以将事件处理函数附加到您的输入元素

```
var $search = $("#txt_name").on('keyup', function (e) {
  if (e.keyCode == 13) {
    alert($search.val());
  }
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:52:38.663

这样的事情应该会有所帮助：

[http://jsfiddle.net/Batfan/vWMXm/](http://jsfiddle.net/Batfan/vWMXm/)

这会侦听要在输入字段上按下的 [enter] 键，并根据元素是否包含与查询匹配的文本来隐藏/显示元素。所有结果都显示在空白搜索中。**见下文**：

```
$(document).on("keypress","#searchbox",function(e){
    var userVal = $(this).val();
    if(e.which == 13) {
      $( "li" ).each(function() {
          if($(this).text().match(new RegExp(userVal, "i"))) {
              $(this).show();
          } else if(userVal == "") {
               $(this).show();   
          } else {
               $(this).hide();   
          }
       });
    }
    e.stopPropagation();
}); 
```

# powershell - How to remove Microsoft.PowerShell.Core\FileSystem::\\ from path

> ID：14652333
> 
> 赞同：15
> 
> 时间：2013-02-01T18:02:36.353
> 
> 标签：powershell

i am comparing to folders with all their subfolders with powershell and its working fine on my local machine. but when i tried it on server its give me error and append

```
Microsoft.PowerShell.Core\FileSystem::\\ 
```

to all the files

if any one have do such work earlier please help

my script is

```
$Path = '\\Server1\Folder1'

Get-ChildItem $Path -Recurse | ? { !$_.PSIsContainer } | % { 
        Add-Member -InputObject $_ -MemberType NoteProperty -Name RelativePath -Value $_.FullName.Substring($Path)
        $_
    } 
```

and its give me error

```
Cannot convert argument "0", with value: "Microsoft.PowerShell.Core\FileSystem::\\Server1\Folder1\ServerListPowershell", for "Substring" to type "System.Int32": "Cannot convert value "M
icrosoft.PowerShell.Core\FileSystem::\\Server1\Folder1\ServerListPowershell" to type "System.Int32". Error: "Input string was not in a correct format.""
At C:\Users\cwr.satish.kumar\AppData\Local\Temp\898f72f1-a0d3-4003-b268-128c5efc9f2b.ps1:14 char:108
+         Add-Member -InputObject $_ -MemberType NoteProperty -Name RelativePath -Value $_.FullName.Substring <<<< ($Path)
    + CategoryInfo          : NotSpecified: (:) [], MethodException
    + FullyQualifiedErrorId : MethodArgumentConversionInvalidCastArgument 
```

please help

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-01T21:02:24.810

试试`Convert-Path`cmdlet：

```
PS> Convert-Path Microsoft.PowerShell.Core\FileSystem::C:\windows\system32
C:\windows\system32 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T18:33:01.707

我不确定为什么该`FullName`属性将 powershell 提供程序添加到名称之前，这通常是您在该`PsPath`属性中得到的。

无论如何，您尝试剥离它失败的原因是因为您在需要整数索引时将 String 传递给[SubString成员函数。](http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx)要获取路径开始的索引，请使用[IndexOf](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)成员函数：

```
$justThePath = $_.FullName.SubString($_.FullName.IndexOf($Path)) 
```

# jquery - Issue with focusin() and click()

> ID：14652334
> 
> 赞同：0
> 
> 时间：2013-02-01T18:02:38.603
> 
> 标签：jquery

what i want to achieve is

1.  user types in textfield press tab or click next textfield results in removal of input tag replaced by displaying value read from text field (WORKS)

    2.User clicks on this text result in going to edit mode ( textbox with value shown to edit or replace) (WORKS)

User clicks next text field or press tab which results in execution of step1 and so on (DOESNT WORK!)

```
 $(document).ready(function(){

     $("input#aoneonedata").focusout(function(){
     $(this).remove();
    var aoneone=parseInt($(this).val())||0;
    $(this).remove();
     $("#aoneone").append("<div id='a11'>"+aoneone+"x</div>");

      $("#a11").click(function(){
      $(this).remove();
    $("#aoneone").append("<input type='text'
    id='aoneonedata' value="+aoneone+">");
      });

      });

      });

     <table>
      <tr>
      <td id="aoneone"><input type="text" id="aoneonedata"></td>
      <td id="aonetwo"><input type="text" id="aonetwodata"></td>
       </tr>
       </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:18:08.497

那是因为您`focusout`在删除输入时失去了绑定。

看到[这个](http://jsfiddle.net/nescalante/c42A3/2/)小提琴。

如果您在编辑时严格需要删除输入，请尝试`focusout`在重新创建后重新分配功能。但是，如果您不想`focusout`在每次值更改时重新签名绑定，您可以执行类似的[操作](http://jsfiddle.net/vn2Qr/)。

希望这可以帮助。

# java - Java Class to check if a line intersects a shape

> ID：14652337
> 
> 赞同：3
> 
> 时间：2013-02-01T18:02:42.283
> 
> 标签：java, api, line, shape

Is there a class in the Java API that I can utilize to check if a line intersects a shape, given the starting and ending coordinates. I have tried playing around with Line2D objects, but the intersects() function for that class only seems to take in rectangular coordinates and Rectangle2D objects, which doesn't suit my purposes as my shapes can have any number of sides.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:33:34.657

就像@Dan 说的那样，您可以检查您的线是否与您的边界相交，`Polygon`但您不必检查与任何两个点创建的每条`Polygon`线相交，只需检查您的线与每对两点的相交，例如`(p1,p2), (p2,p3), ... , (p(N-1), pN), (pN, p1)`。多边形不是从数组中的所有点组合创建的，而是从 p1 到 p2 的线与从 p2 到 p3 的线相连，依此类推，直到从 pN 到 p1 的线。

这里有一些例子：

```
Line2D myLine = getMyLine() // some imagine method giving your line
Point2D[] polyPoints = getPolyPoints() // some imagine method giving point of your Polygon

boolean intersect = false;
for (int i = 0; i < polyPoints.length - 1; i++) {
   intersect = myLine.intersectsLine(polyPoints[i].getX(), polyPoints[i].getY(), polyPoints[i+1].getX(), polyPoints[i+1].getY());
   if (intersect) {
      break;
   }
}
if (!intersect) {
   intersect = myLine.intersectsLine(polyPoints[polyPoints.length - 1].getX(), polyPoints[polyPoints.length - 1].getY(), polyPoints[0].getX(), polyPoints[0].getY());
} 
```

在内部执行此代码后，`intersect`您的价值是您的线是否与多边形相交。

如果您接受多边形可以包含一条线的情况，这仍然意味着该线（作为路径）与多边形相交，然后`Polygon`从您的点（顶点）创建 java 实例并调用：

```
if (!intersect) {
   intersect = myPolygon.contains(myLine.getP1()) || myPolygon.contains(myLine.getP2());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:10:13.060

您可以检查您的线是否与形状中任意 2 个点给出的任何线相交。因此，您迭代形状点并构建 2 个点的任意组合的线。如果这些线段中的任何一条与您的线相交，则您的线与该形状相交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:12:23.000

该[`Polygon`](http://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.htmlanswer)对象听起来像是您想使用的东西，但它的`intersects`方法仅采用某种形式的矩形对象（具有尺寸的角坐标或`Rectangle2D`对象）。您可能必须扩展`Polygon`并添加一个`intersects`接受`Line2D`... 的方法，或者将其与Dan 发布的[答案结合起来。](https://stackoverflow.com/questions/14652337/java-class-to-check-if-a-line-intersects-a-shape/14652452#14652452)

# matlab - Incorporating color into graphical representation in Matlab

> ID：14652338
> 
> 赞同：2
> 
> 时间：2013-02-01T18:02:46.633
> 
> 标签：matlab, plot, color-mapping

As shown below, I have a graph. Inside each vertex point (i.e. circle) is a number. I prepare this graph as such. First I place a circle on the coordinates of each vertex using the following code:

```
plot(vertexCoords(1,:),vertexCoords(2,:),'o',...
  'MarkerFaceColor',[0.90 0.90 0.90],...
   'MarkerSize',30,'MarkerEdgeColor','k','LineWidth',2); 
```

Then, I overlay a text object as follows:

```
text(vertexCoords(1,:),vertexCoords(2,:),num2cell(valueVector),...
    'HorizontalAlignment','center'); 
```

I would like to choose a certain `colormap`, and have the color of each circle be proportional to the number in the circle (the number can range from 0 to 1). How do I go about doing this?

![enter image description here](../Images/b52e23ccaeeab22a448541e721fbea27.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:45:08.047

我认为您可以使用 scatter 命令而不是 plot 命令来执行此操作。请看下面...

`% for random values
vertexCoords=rand([5 2]);
% for arbitrary values
valuevector=[4 5];

figure
% scatter(X,Y,S,C) where X,Y: coordinates, S:size (I set it to 500 here), C:Color
scatter(vertexCoords(1,:),vertexCoords(2,:),500,(valuevector), 'filled')
colormap(autumn)
hold on
text(vertexCoords(1,:),vertexCoords(2,:),num2cell(valuevector),...
'HorizontalAlignment','center');`

# eclipse - In Spring how to generate controllers for jpa entities?

> ID：14652339
> 
> 赞同：0
> 
> 时间：2013-02-01T18:02:47.167
> 
> 标签：eclipse, spring, jpa

Thats my question, i know how to generate entities from database using JPA, but the next step is generate the controllers for the entities like Neatbeans.

Is there a way using Spring in Eclipse to do that?

# javascript - Multiple radio buttons to show/hide div

> ID：14652344
> 
> 赞同：0
> 
> 时间：2013-02-01T18:03:02.767
> 
> 标签：javascript

I have 4 radio buttons and I need to show a specific div based on which is clicked and make sure the other 3 remain hidden, etc for all 4\. I can only find code to make 2 work but not 4.

Does anyone have an example how to do this? Just as a test I have

```
<div id=onestyle=display:none> 1 </div>
<div id=two style=display:none> 2 </div>
<div id=three style=display:none> 3 </div>
<div id=four style=display:none> 4 </div> 
```

but cannot find something to sort out doing it with all of them.

Buttons are just basic in place to test right now:

```
<div data-biller="standard" class="membership-plan ">
<label for="option_2624" id="tt-2624">
<input value="12" id="option_2624" name="signup[optionid]" type="radio" checked="checked">
<span class="duration" style="float:left; "><var class="" ref=""> 12<br></span></label>
</div>

<div data-biller="standard" class="membership-plan ">
<label for="option_2429" id="tt-2429">
<input value="6" id="option_2429" name="signup[optionid]" type="radio">
<span class="duration" style="float:left; "><var class="" ref=""> 6 <br></span></label>
</div>

<div data-biller="standard" class="membership-plan ">
<label for="option_1554" id="tt-1554">
<input value="3" id="option_1554" name="signup[optionid]" type="radio" >
<span class="duration" style="float:left; "><var class="" ref=""> 3 <br></span></label>
</div>

<div data-biller="standard" class="membership-plan ">
<label for="option_1697" id="tt-1697">
<input value="1" id="option_1697" name="signup[optionid]" type="radio">
<span class="duration" style="float:left; "><var class="" ref=""> 1<br></span></label>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:15:09.627

您可以通过 jQuery 执行此操作，如下所示

我向连接到 div 的收音机添加了一个自定义属性，每次点击只会显示一个 div

**HTML 代码**

```
<div class="my-div me_1" data-target="1">1</div>
<div class="my-div me_2" data-target="2">2</div>
<div class="my-div me_3" data-target="3">3</div>
<div class="my-div me_4" data-target="4">4</div>
<div class="my-div me_5" data-target="5">5</div>

<input type="radio" data-target-id="1" name="radio" class="radioBtn">
<input type="radio" data-target-id="2" name="radio" class="radioBtn">
<input type="radio" data-target-id="3" name="radio" class="radioBtn">
<input type="radio" data-target-id="4" name="radio" class="radioBtn">
<input type="radio" data-target-id="5" name="radio" class="radioBtn"> 
```

**JS代码**

```
$(document).ready(function(){
     $('.radioBtn').click(function(){

         var target = $(this).data('target-id');
         $('.my-div').hide(); 
         $('.my-div[data-target="'+target+'"]').show();  
     }); 

}); 
```

**这是一个工作示例** [http://jsfiddle.net/JU7Nw/70](http://jsfiddle.net/JU7Nw/70)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:19:30.807

这是一个示例代码，可以满足您的需求。我没有使用任何 javascript 库，而是使用普通的旧 javascript。

```
<html>
  <head>
    <script type="text/javascript">
        function showDiv (divId)
        {
          var div = document.getElementById (divId);
          var divs = document.getElementsByTagName('div');
          for (var i in divs) 
          {
            divs [i].className = "hidden";
          }
          div.className = "shown";
        }
    </script>
    <style>
        .hidden
        {
            display:none;
        }
        .shown
        {
            display:block;
        }
    </style>
  </head>
  <body>
        <input type="radio" onclick="showDiv ('1')" name="selectme">1</input>
        <input type="radio" onclick="showDiv ('2')" name="selectme">2</input>
        <input type="radio" onclick="showDiv ('3')" name="selectme">3</input>
        <input type="radio" onclick="showDiv ('4')" name="selectme">4</input>

        <div id="1" class="hidden">Hey, its me, 1</div>
        <div id="2" class="hidden">Hey, its me, 2</div>
        <div id="3" class="hidden">Hey, its me, 3</div>
        <div id="4" class="hidden">Hey, its me, 4</div>

  </body>
</html> 
```

# python - python average bitrate per second

> ID：14652349
> 
> 赞同：1
> 
> 时间：2013-02-01T18:03:08.290
> 
> 标签：python, average, bitrate

I have a `txt` file that looks like this:

```
0.065998       81   
0.319601      81   
0.539613      81  
0.768445      81  
1.671893      81  
1.785064      81  
1.881242      954  
1.921503      193  
1.921605      188  
1.943166      81  
2.122283      63  
2.127669      83  
2.444705      81 
```

The first column is the packet arrival and second packet size in bytes.

I need to get the average value of bytes in each second. For example in the first second I have only packets with value 81 so the average bitrate is `81*8= 648bit/s`. Then I should plot a graph x axis time in seconds, y axis average bitrate in each second.

So far I have only managed to upload my data as arrays:

```
import numpy as np

d = np.genfromtxt('data.txt')

x = (d[:,0])  
y = (d[:,1 ])

print x  
print(y*8) 
```

I'm new to Python, so any help where to start would be much appreciated!

Here is the result script:

```
import matplotlib.pyplot as plt  
import numpy as np  
x, y = np.loadtxt('data.txt', unpack=True)  
bins = np.arange(60+1)  
totals, edges = np.histogram(x, weights=y, bins=bins)  
counts, edges = np.histogram(x, bins=bins)  

print counts  
print totals*0.008/counts  

plt.plot(totals*0.008/counts, 'r')  
plt.xlabel('time, s')  
plt.ylabel('kbit/s')  
plt.grid(True)  
plt.xlim(0.0, 60.0)  
plt.show() 
```

The script reads the .txt file which contains packet size(bytes) and arrival time, and plots the average bitrate/s during a time period. Used to monitor server incoming/outgoing traffic!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T18:17:52.567

您的数据已经按时间排序，所以我可能只`itertools.groupby`用于这个：

```
from itertools import groupby
with open('data.txt') as d:
     data = ([float(x) for x in line.split()] for line in d)
     for i_time,packet_info in groupby(data,key=lambda x:int(x[0])):
         print i_time, sum(x[1] for x in packet_info) 
```

输出是：

```
0 324.0
1 1578.0
2 227.0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T18:38:11.673

如果你想使用`numpy`，你可以使用[numpy.histogram](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html)：

```
>>> import numpy as np
>>> x, y = np.loadtxt('data.txt', unpack=True)
>>> bins = np.arange(10+1)
>>> totals, edges = np.histogram(x, weights=y, bins=bins)
>>> totals
array([  324.,  1578.,   227.,     0.,     0.,     0.,     0.,     0.,
           0.,     0.]) 
```

这给出了每个 bin 中的总数，您可以除以 bin 的宽度以获得近似的瞬时速率：

```
>>> totals/np.diff(bins)
array([  324.,  1578.,   227.,     0.,     0.,     0.,     0.,     0.,
           0.,     0.]) 
```

（好吧，因为 bin 宽度都是一，这不是很有趣。）

[更新]

我不确定我是否理解你的后续评论，即你需要每秒的平均数据包大小——我没有在你的问题中看到任何地方提到过，但我因错过了明显的.. :-/在任何情况下，如果您想要时间箱中的数据包数量，那么您根本不需要设置权重（默认为 1）：

```
>>> counts, edges = np.histogram(x, bins=bins)
>>> counts
array([4, 6, 3, 0, 0, 0, 0, 0, 0, 0]) 
```

其中 counts 是到达每个 bin 的数据包数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:20:21.990

由于到达时间是不规则的，我建议将它们量化为整数秒，然后聚合给定秒内所有到达的总字节数。完成此操作后，绘图和其他分析变得容易得多。

# javascript - 在 Twitter Bootstrap Datepicker 上禁用当前日期突出显示

> ID：14652351
> 
> 赞同：1
> 
> 时间：2013-02-01T18:03:15.140
> 
> 标签：javascript, twitter-bootstrap, parameters, datepicker

我正在为 Twitter Bootstrap使用[日期选择器。](https://github.com/vitalets/bootstrap-datepicker)我需要禁用当前日期被选中，这意味着它也不应该突出显示当前日期。

我已将参数“todayHighlight”作为 false 传递，但它仍然为 TD 提供“活动”类，即使它也已“禁用”。

```
$("#datepicker").datepicker({
    format: 'mm-dd-yyyy',
    daysOfWeekDisabled: [0,6],
    startDate: '02-04-2013',
    endDate: '02-16-2013',
    todayHighlight: false
}); 
```

它似乎是脚本中的一个错误。谁能帮助我并告诉我如何解决它？

这是我的[小提琴](http://jsfiddle.net/thebluehorse/ecFnt/)，它显示了一个工作示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T04:16:29.677

只需将此添加到您的 css 文件以重置`.active`默认样式，直接更改引导 css 不是一个好主意：

```
.datepicker table tr td.active:hover, 
.datepicker table tr td.active:hover:hover, 
.datepicker table tr td.active.disabled:hover, 
.datepicker table tr td.active.disabled:hover:hover, 
.datepicker table tr td.active:active, 
.datepicker table tr td.active:hover:active, 
.datepicker table tr td.active.disabled:active, 
.datepicker table tr td.active.disabled:hover:active, 
.datepicker table tr td.active.active, 
.datepicker table tr td.active:hover.active, 
.datepicker table tr td.active.disabled.active, 
.datepicker table tr td.active.disabled:hover.active, 
.datepicker table tr td.active.disabled, 
.datepicker table tr td.active:hover.disabled, 
.datepicker table tr td.active.disabled.disabled, 
.datepicker table tr td.active.disabled:hover.disabled, 
.datepicker table tr td.active[disabled], 
.datepicker table tr td.active:hover[disabled], 
.datepicker table tr td.active.disabled[disabled], 
.datepicker table tr td.active.disabled:hover[disabled]{
        background-image: none;
        background-color: white;
        font-weight: normal;
        color: black;
        text-shadow: none;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-07T16:08:29.123

只需添加`setDate`，`null`这就是我解决问题的方式

```
$("#datepicker").datepicker({
    format: 'mm-dd-yyyy',
    daysOfWeekDisabled: [0,6],
    startDate: '02-04-2013',
    endDate: '02-16-2013',
    todayHighlight: false
}).datepicker("setDate",null); 
```

希望能帮助到你

# google-analytics - 谷歌分析：自定义报告显示访问特定页面的转化

> ID：14652352
> 
> 赞同：0
> 
> 时间：2013-02-01T18:03:17.047
> 
> 标签：google-analytics, report

我一直在环顾四周，也玩过自定义报告，但没有找到：如何设置自定义报告来显示访问者访问特定页面的 Google Analytics（分析）中的转化次数？

这个想法是衡量特定页面是否增加了转换的可能性。

到目前为止，我已经尝试查看维度为“页面”以及各个级别（“页面路径级别*n* ”）的转化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:17:04.260

您正在寻找的是“高级细分”：

Google 的文档： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=1033017](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033017)

# refactoring - 如何将列表缩减为单个选项值

> ID：14652353
> 
> 赞同：0
> 
> 时间：2013-02-01T18:03:23.723
> 
> 标签：refactoring, sml

我在重写使用高阶函数的方法时遇到了一些麻烦。这是尝试（~~它编译但不运行~~它工作正常）：

```
fun lookup2 key hash = 
  List.foldr (fn ((k, v), r) => if k = key then SOME v else r) NONE hash; 
```

* * *

背景：

这个想法是有一个像这样的哈希，我正在通过字符串键查找一个 int 选项：

```
- val h = [("a", 5), ("b", 4)];
- lookup "a" h;
val it = SOME 5 : int option 
```

我写了一个效果很好的：

```
fun lookup _ nil = NONE
  | lookup key ((k, v)::xs) = if k = key then SOME v else lookup key xs; 
```

但是我想重写它以帮助熟悉 sml。我有一个偷偷摸摸的怀疑我不太明白`foldr`......

* * *

**我的错误**- 我不小心用不同的`lookup2`. 它按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:26:07.200

你要找的不是`List.foldr`，而是`List.find`：

> 寻找佛罗里达
> 
> > 将 f 应用于列表 l 的每个元素 x，从左到右，直到 x 评估为真。如果存在这样的 x，则返回 SOME(x)；否则返回 NONE。
> 
> （[来源](http://www.standardml.org/Basis/list.html#SIG%3aLIST.find%3aVAL)）

现在您可以执行以下操作：

```
fun lookup key hash = Option.map (fn (_,v) => v)
  ( List.find (fn (k,_) => k = key) hash ); 
```

Where`List.find`返回匹配的元组`(key, val)`or `NONE`，并从元组中`Option.map`返回or 。`val``NONE`

# c# - c# winforms中未从BeginInvoke方法调用的用户控件的Dispose函数

> ID：14652356
> 
> 赞同：0
> 
> 时间：2013-02-01T18:03:33.703
> 
> 标签：c#, .net, oop

我有一个主窗体，在这个主窗体上我添加了一个用户控件，如下所示。

```
objCustomer = new Customer();
objCustomer.Top = this.Top;
objCustomer.Left = this.Left;
this.BeginInvoke((MethodInvoker)delegate { this.Controls.Add(objCustomer); }); 
```

现在，在某些事件中，我必须卸载此控件并加载其他控件。

```
if (objCustomer != null)
{
this.Invoke((MethodInvoker)delegate { this.Controls.Remove(objCustomer); });
this.Invoke((MethodInvoker)delegate { objCustomer.Dispose(); });
}
objEmployee = new Employee();
objEmployee.Top = this.Top;
objEmployee.Left = this.Left;

this.BeginInvoke((MethodInvoker)delegate { this.Controls.Add(objEmployee); }); 
```

现在，在客户`Dispose`功能上，我有一些例程要求从其他系统注销。

```
protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            Common.Log.LogEvent("Customer", "DisposedCall");
            LogOffServer();

            components.Dispose();

        }
        base.Dispose(disposing);
    } 
```

我相信这个 Dispose 事件没有调用。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:31:32.913

假设最后一个`Dispose()`方法用于您的 Form，如果您的条件块没有被执行，那是因为 Winform 上的所有控件都在`Dispose()`调用 Form 的方法之前被释放。这意味着它`components != null`是假的（因为所有`components`都已经被处置）并且条件评估为假。

[Winform 事件生命周期](http://msdn.microsoft.com/en-us/library/86faxx0d.aspx)

# sql-server - 判断SP参数在T-SQL中是否有默认值

> ID：14652361
> 
> 赞同：10
> 
> 时间：2013-02-01T18:04:01.520
> 
> 标签：sql-server, tsql, stored-procedures, sql-server-2012

是否有任何方法可以从 SQL Server 中确定（我在 2012 年仅供参考）SP 的参数是否具有默认值？关于此还有[其他](https://stackoverflow.com/questions/3112799/tsql-dynamically-determine-parameter-list-for-sp-function) [线程](https://stackoverflow.com/questions/5873731/is-there-a-way-to-determine-if-a-parameter-in-a-stored-proc-has-a-default-value)，但是这些建议似乎并没有准确地让我得到这些信息。

这是我尝试过的几件事；

```
select *
from sys.objects so join sys.parameters sp on so.object_id = sp.object_id
where so.type='P'
and so.name = 'someSp' 
```

上面的查询返回了许多列，这些列听起来像是我在正确的树上吠叫（其中有has_default_value，default_value）*，但*无论我的SP 中是否有默认值，这些似乎都没有变化。（has_default 值始终为 0，default_value 始终为 null）

```
exec sp_sproc_columns 'someSp' 
```

同样的交易；上述 SP 返回的列数包括 NULLABLE 和 IS_NULLABLE；无论我的 SP 内容如何，​​NULLABLE 始终等于 1 并且 IS_NULLABLE = YES。

一张纸条; SQL Server 管理工作室清楚地显示与每个 SP 参数关联的元数据。

![Management Studio SP 参数元数据](../Images/e91c176cd7d0ee0449ba70792350f6d6.png)

我使用 SQL Profiler 检查了在 Management Studio 的对象资源管理器中查看 SP 参数时发生的情况。当您展开参数文件夹时，将运行两个查询。第一个查询粘贴在这里有点长（尽管如果有帮助我会这样做）。它包含一个名为 DEFAULT VALUE 的列；但是据我所知，它始终为 NULL。第二个查询只是返回 SP 的主体；大概是输出到文本编辑器窗口（尽管我担心在 mgmt studio 中可能会发生一些解析！）

供参考/只是为了确保我不会丢失我的弹珠，我创建了两个无意义的 Sps 仅用于测试。他们看起来像：

```
CREATE PROCEDURE TestDefaultSpValue_Default
@I          INT  = 2
AS
BEGIN
SET NOCOUNT ON;
SELECT @I
END

CREATE PROCEDURE TestDefaultSpValue_NoDefault
@I          INT
AS
BEGIN
SET NOCOUNT ON;
SELECT @I
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T10:39:25.057

如果参数名称有“AS”符号 - 不工作试试我的

```
create procedure ViewParameters
    @procedure varchar(50)
as
    declare
        @w varchar(max),
        @p int, @p2 int,
        @t varchar(max)

    /* Andrey Rubanko 18 jul 2013 */

    /* fill temporary table with procedure body */

    select @w = definition
    from sys.sql_modules
    where object_id = object_id(@procedure)

    declare @lines table (line varchar(500), id int identity(1, 1))

    while len(@w) > 0 begin
        set @p = charindex(char(10), @w)
        if @p > 0 begin
            insert @lines(line) values(replace(replace(SUBSTRING(@w, 1, @p - 1), char(13), ''), char(9), ' '))
            set @w = SUBSTRING(@w, @p + 1, 10000)
        end else begin
            insert @lines(line) values(replace(@w, char(13), ''))
            set @w = ''
        end
    end

    /* remove comments */

    declare 
        @i int,
        @inCommentNow bit,
        @again bit

    set @i = 1
    set @inCommentNow = 0

    while @i <= (select max(id) from @lines) begin
        select @w = line from @lines where id = @i
        set @again = 0

        if @inCommentNow = 0 begin
            set @p = patindex('%--%', @w)
            if @p > 0 begin
                set @w = SUBSTRING(@w, 1, @p - 1)

                update @lines
                set line = @w
                where id = @i

            end

            set @p = patIndex('%/*%', @w)
            if @p > 0 begin
                set @p2 = PATINDEX('%*/%', @w) 
                if @p2 > 0 begin
                    update @lines
                    set line = substring(@w, 1, @p - 1) + SUBSTRING(@w, @p2 + 2, 10000)
                    where id = @i

                    set @again = 1
                end else begin
                    set @inCommentNow = 1

                    update @lines
                    set line = SUBSTRING(@w, 1, @p - 1)
                    where id = @i
                end
            end
        end

        if @inCommentNow = 1 begin
            set @p = PATINDEX('%*/%', @w)
            if @p > 0 begin
                update @lines
                set line = SUBSTRING(@w, @p + 2, 10000)
                where id = @i

                set @inCommentNow = 0
                set @again = 1
            end else 
                update @lines
                set line = ''
                where id = @i
        end

        if @again = 0
            set @i = @i + 1
    end

    /* remove all except parameters */
    declare
        @first int,
        @last int

    set @i = 1

    while @last is null begin
        select @w = line from @lines where id = @i

        if SUBSTRING(@w, 1, 2) = 'as'
            set @last = @i - 1

        set @p = PATINDEX('% as%', @w) 
        if @last is null and @p > 0  begin
            set @w = SUBSTRING(@w, 1, @p - 1)

            update @lines
            set line = @w
            where id = @i

            if charindex('@', @w) > 0
                set @last = @i
            else 
                set @last = @i - 1
        end

        set @p = CHARINDEX('@', @w)
        if @first is null and @p > 0 begin
            set @first = @i
            set @w = SUBSTRING(@w, @p, 10000)
        end

        set @i = @i + 1
    end

    delete @lines
    where @first is null 
        or id < @first
        or id > @last

    /* decode lines to paramters */

    declare @par table (ParameterName varchar(50), ParameterType varchar(50), DefaultValue varchar(50))

    declare
        @name varchar(50),
        @type varchar(50),
        @default varchar(50)

    declare c cursor for
        select line
        from @lines
    open c
    fetch next from c into @w 
    while @@FETCH_STATUS = 0 begin
        while len(@w) > 0 begin
            set @default = null

            set @w = SUBSTRING(@w, charindex('@', @w) + 1, 10000)
            set @p = CHARINDEX(',', @w)
            print 'start:' + @w
            if @p > 0 begin
                set @t = SUBSTRING(@w, 1, @p - 1)
                set @w = LTrim(RTrim(SUBSTRING(@w, @p + 1, 10000)))
            end else begin
                set @p = patindex('% as%', @w)
                if @p > 0 
                    set @t = SUBSTRING(@w, 1, @p - 1)
                else 
                    set @t = @w
                set @w = ''
            end

            print 'T=' + @t
            set @p = charindex(' ', @t) 
            if @p = 0
                print 'NameError:' + @t + ' ->' + cast(@p as varchar)
            set @name = SUBSTRING(@t, 1, @p - 1)
            set @t = SUBSTRING(@t, @p + 1, 10000)

            set @p = CHARINDEX('=', @t)
            if @p > 0 begin
                set @default = Replace(LTrim(RTrim(SUBSTRING(@t, @p + 1, 10000))), '''', '')
                set @t = SUBSTRING(@t, 1, @p - 1)
            end 

            set @p = CHARINDEX('(', @t)
            if @p > 0 
                set @type = LTrim(RTrim(SUBSTRING(@t, 1, @p - 1)))
            else
                set @type = LTrim(RTrim(@t))

            insert @par (ParameterName, ParameterType, DefaultValue)
            values(@name, @type, @default)
        end--while len(@w) > 0

        fetch next from c into @w 
    end
    close c
    deallocate c

    select *
    from @par 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:56:08.853

MS SQL 仅存储 CLR 存储过程和函数的默认设置，因此在这种情况下，唯一的方法是解析对象定义。要运行该示例，您可以创建一个空白存储过程，或采用任何其他存储过程。

```
ALTER PROCEDURE dbo.usp_test1
(
    @a UNIQUEIDENTIFIER = NULL,
    @b DATETIME = '20100101',
    @c DATETIME = DEFAULT,
    @d BIT = 1,
    @e BIT,
    @k INT = 1,
    @f BIT = 0, @g NVARCHAR(MAX) = '23235',
    @h INT = 3,
    @j DECIMAL(10,2) = DEFAULT
)
WITH RECOMPILE
AS
BEGIN

    PRINT 1;

END 
```

此查询返回存储过程的默认值列表：

```
SELECT  
      data3.name
    , [default_value] = REVERSE(RTRIM(SUBSTRING(
          data3.rtoken
        , CASE 
            WHEN CHARINDEX(N',', data3.rtoken) > 0 
                THEN CHARINDEX(N',', data3.rtoken) + 1
            WHEN CHARINDEX(N')', data3.rtoken) > 0 
                THEN CHARINDEX(N')', data3.rtoken) + 1
            ELSE 1 
          END
        , LEN(data3.rtoken)
      )))
FROM (
    SELECT  
          data2.name
        , rtoken = REVERSE(
            SUBSTRING(ptoken
                    , CHARINDEX('=', ptoken, 1) + 1
                    , LEN(data2.ptoken))
                )
    FROM (
        SELECT  
              data.name
            , ptoken = SUBSTRING(
                  data.tokens
                , token_pos + name_length + 1
                , ISNULL(ABS(next_token_pos - token_pos - name_length - 1), LEN(data.tokens))
            )
        FROM (
            SELECT  
                  sm3.tokens
                , p.name
                , name_length = LEN(p.name)
                , token_pos = CHARINDEX(p.name, sm3.tokens)
                , next_token_pos = CHARINDEX(p2.name, sm3.tokens)
            FROM (
                SELECT 
                      sm2.[object_id]
                    , sm2.[type]
                    , tokens = REVERSE(SUBSTRING(sm2.tokens, ISNULL(CHARINDEX('SA', sm2.tokens) + 2, 0), LEN(sm2.tokens))) 
                FROM (
                    SELECT 
                          sm.[object_id]
                        , o.[type]
                        , tokens = REVERSE(SUBSTRING(
                                      sm.[definition]
                                    , CHARINDEX(o.name, sm.[definition]) + LEN(o.name) + 1
                                    , ABS(CHARINDEX(N'AS', sm.[definition]))
                                 )  
                        ) 
                    FROM sys.sql_modules sm WITH (NOLOCK)
                    JOIN sys.objects o WITH (NOLOCK) ON sm.[object_id] = o.[object_id]
                    JOIN sys.schemas s WITH (NOLOCK) ON o.[schema_id] = s.[schema_id] 
                    WHERE o.[type] = 'P '
                        AND s.name + '.' + o.name = 'dbo.usp_test1'
                ) sm2
                WHERE sm2.tokens LIKE '%=%'
            ) sm3
            JOIN sys.parameters p WITH (NOLOCK) ON sm3.[object_id] = p.[object_id]
            OUTER APPLY (
                SELECT p2.name
                FROM sys.parameters p2 WITH (NOLOCK) 
                WHERE p2.is_output = 0
                    AND sm3.[object_id] = p2.[object_id] 
                    AND p.parameter_id + 1 = p2.parameter_id
            ) p2
            WHERE p.is_output = 0
        ) data
    ) data2
    WHERE data2.ptoken LIKE '%=%'
) data3 
```

而通过这个查询，你可以知道存储过程是否包含任何默认值​​​：

```
DECLARE @name SYSNAME = 'dbo.usp_test1'

IF EXISTS(
    SELECT 1
    FROM (
        SELECT 
              sm2.[object_id]
            , tokens = SUBSTRING(sm2.tokens, ISNULL(CHARINDEX('SA', sm2.tokens) + 2, 0), LEN(sm2.tokens)) 
        FROM (
            SELECT 
                  sm.[object_id]
                , tokens = REVERSE(SUBSTRING(
                                sm.[definition]
                            , CHARINDEX(o.name, sm.[definition]) + LEN(o.name) + 1
                            , ABS(CHARINDEX(N'AS', sm.[definition]))
                        )  
                ) 
            FROM sys.sql_modules sm WITH (NOLOCK)
            JOIN sys.objects o WITH (NOLOCK) ON sm.[object_id] = o.[object_id]
            JOIN sys.schemas s WITH (NOLOCK) ON o.[schema_id] = s.[schema_id] 
            WHERE o.[type] = 'P '
                AND s.name + '.' + o.name = @name
        ) sm2
    ) sm3
    WHERE sm3.tokens LIKE '%=%'
) PRINT @name + ' have default values' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-18T20:53:58.687

```
WITH t1 AS
(
SELECT 
   SCHEMA_NAME(SCHEMA_ID) AS [Schema]
  ,SO.name  
  , SO.type
  ,SO.Type_Desc AS [ObjectType (UDF/SP)]
  ,P.parameter_id AS [ParameterID]
  ,P.name AS [ParameterName]
  ,P.user_type_id
  /*,P.scale
  ,P.precision
  ,P.max_length
  */
  ,TYPE_NAME(P.user_type_id) AS [ParameterDataType]
 -- ,P.max_length AS [ParameterMaxBytes]
  ,CASE WHEN user_type_id = 231 THEN max_length / 2 ELSE NULL END nvarcharsize
  ,P.is_output AS [IsOutPutParameter]
  ,ltrim(rtrim(REPLACE(LEFT( OBJECT_DEFINITION (p.object_id),90000),'CREATE PROCEDURE ',''))) ProcDef

FROM sys.objects AS SO
INNER JOIN sys.parameters AS P ON SO.OBJECT_ID = P.OBJECT_ID AND SO.type = 'P'
AND SO.Name NOT LIKE 'Report%' 
AND SO.Name NOT LIKE '!_%' ESCAPE '!'
)
, T2 AS
(
select 
--ProcDef 
LEFT(ProcDef,patindex('%AS%BEGIN%',ProcDef)-2) ProcedureDef
,
name Procname,
ParameterName,
ParameterID,
ParameterDataType,
nvarcharsize
from t1 
)
, T3 AS
(
select
substring(ProcedureDef,charindex(ParameterName,ProcedureDef) + len(parametername) + len(ParameterDataType) + 2,12) parampos
,
* from t2 where procname like 'MyProcName'
)
, T4 AS
(
select
CHARINDEX('=',parampos) haseq,
replace(replace(replace(substring(parampos,CHARINDEX('=',parampos),100),' ',''),'=',''),',','') valdef
,
* from t3
)
, t5 as
(
select
CASE WHEN haseq > 0 THEN valdef else '' end defaultvalue,
* from t4 
)
select * from t5 
ORDER BY  Procname, parameterid
GO 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-19T14:26:47.303

有更简单和正确的方法来设置 SP 和函数的所有输入和输出参数，请尝试以下语句。（来源是[http://www.mssqltips.com/sqlservertip/1669/generate-a-parameter-list-for-all-sql-server-stored-procedures-and-functions/](http://www.mssqltips.com/sqlservertip/1669/generate-a-parameter-list-for-all-sql-server-stored-procedures-and-functions/)）

```
SELECT SCHEMA_NAME(SCHEMA_ID) AS [Schema],
SO.Name AS [ObjectName],
SO.Type_Desc AS [ObjectType (UDF/SP)],
PM.Parameter_ID AS [ParameterID],
case 
when pm.system_type_id = pm.user_type_id then 'system_type'
else 'user_type'
end as [TypeDescr],
CASE
WHEN PM.Parameter_ID = 0 THEN 'Returns'
ELSE PM.Name
END AS [ParameterName],
'['+TYPE_NAME(PM.User_Type_ID)+']' AS [ParameterDataType],
CASE 
WHEN TYPE_NAME(PM.User_Type_ID) IN ('float', 'uniqueidentifier', 'datetime', 'bit', 'bigint', 'int', 'image', 'money', 'xml', 'varbinary', 'tinyint', 'text', 'ntext', 'smallint', 'smallmoney') THEN ''
WHEN TYPE_NAME(PM.User_Type_ID) IN ('decimal', 'numeric') THEN '(' + CAST( Precision AS VARCHAR(4) ) + ', ' + CAST( Scale AS VARCHAR(4)) + ')'
ELSE 
case 
when PM.Max_Length <> -1 then '('+CAST( PM.Max_Length AS VARCHAR(4))+')'
when (TYPE_NAME(PM.User_Type_ID) = 'xml') or (pm.system_type_id <> pm.user_type_id) then ''
else '(max)' 
end
END AS [Size],
CASE 
WHEN PM.Is_Output = 1 THEN 'Output'
ELSE 'Input'
END AS [Direction]
FROM sys.objects AS SO
INNER JOIN sys.parameters AS PM ON SO.OBJECT_ID = PM.OBJECT_ID
WHERE TYPE IN ('P','FN')
ORDER BY [Schema], SO.Name, PM.parameter_id 
```

# xml - 抓取分层数据

> ID：14652362
> 
> 赞同：4
> 
> 时间：2013-02-01T18:04:05.510
> 
> 标签：xml, r, xpath, xml-parsing, web-scraping

我正在尝试从[全球 Dept 商店](http://en.wikipedia.org/wiki/List_of_department_stores_by_country)中抓取大陆/国家/地区的 Dept 商店列表。我正在运行以下代码首先获取大陆，因为我们可以看到 XML 层次结构的方式是，每个大陆的国家不是该大陆的子节点。

```
> url<-"http://en.wikipedia.org/wiki/List_of_department_stores_by_country"
> doc = htmlTreeParse(url, useInternalNodes = T)
> nodeNames = getNodeSet(doc, "//h2/span[@class='mw-headline']")
> # For Africa
> xmlChildren(nodeNames[[1]])
$a
<a href="/wiki/Africa" title="Africa">Africa</a> 

attr(,"class")
[1] "XMLInternalNodeList" "XMLNodeList"        
> xmlSize(nodeNames[[1]])
[1] 1 
```

我知道我可以在单独的 getNodeSet 命令中执行这些国家/地区，但我只是想确保我没有遗漏任何东西。有没有更聪明的方法可以同时获取每个大陆和每个国家/地区的所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:18:12.273

uisng xpath, 几个路径可以结合| 分隔器。所以我用它来获得同一个列表中的国家和商店。然后我得到第二个国家名单。我使用后一个列表来拆分第一个

```
url<-"http://en.wikipedia.org/wiki/List_of_department_stores_by_country"
library(XML)
xmltext <- htmlTreeParse(url, useInternalNodes = T)

## Here I use the combined xpath 
cont.shops <- xpathApply(xmltext, '//*[@id="mw-content-text"]/ul/li|
                                   //*[@id="mw-content-text"]/h3',xmlValue)
cont.shops<- do.call(rbind,cont.shops)                  ## from list to  vector

head(cont.shops)                  ## first element is country followed by shops
     [,1]                   
[1,] "[edit] Â Tunisia"     
[2,] "Magasin GÃƒÂ©nÃƒÂ©ral"
[3,] "Mercure Market"       
[4,] "Promogro"             
[5,] "Geant"                
[6,] "Carrefour"            
## I get all the contries in one list 
contries <- xpathApply(xmltext, '//*[@id="mw-content-text"]/h3',xmlValue)
contries <- do.call(rbind,contries)                     ## from list to  vector

    head(contries)
     [,1]                   
[1,] "[edit] Â Tunisia"     
[2,] "[edit] Â Morocco"     
[3,] "[edit] Â Ghana"       
[4,] "[edit] Â Kenya"       
[5,] "[edit] Â Nigeria"     
[6,] "[edit] Â South Africa" 
```

现在我做了一些处理以使用国家/地区拆分 cont.shops。

```
dd <- which(cont.shops %in% contries)                   ## get the index of contries
freq <- c(diff(dd),length(cont.shops)-tail(dd,1)+1)     ## use diff to get Frequencies
contries.f <- rep(contries,freq)                        ## create the factor splitter

ll <- split(cont.shops,contries.f) 
```

我可以检查结果：

```
> ll[[contries[1]]]
[1] "[edit] Â Tunisia"      "Magasin GÃƒÂ©nÃƒÂ©ral" "Mercure Market"        "Promogro"              "Geant"                
[6] "Carrefour"             "Monoprix"             
> ll[[contries[2]]]
[1] "[edit] Â Morocco"                                                         
[2] "Alpha 55, one 6-story store in Casablanca"                                
[3] "Galeries Lafayette, to open in 2011[1] within Morocco Mall, in Casablanca" 
```

# smalltalk - 在寻找“自我”的意义

> ID：14652363
> 
> 赞同：5
> 
> 时间：2013-02-01T18:04:06.600
> 
> 标签：smalltalk

在 smalltalk 中存在“工作区”环境。根据定义，“self”指向正在执行当前方法的对象。但是，当我在工作区窗口中键入代码片段时，我该如何理解“当前方法”？当前没有运行任何方法的对象，或者我错过了一些东西。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T18:38:32.690

你可以调试你执行的代码，你会看到你最终在一个对象上执行了一个临时方法。例如，在 Pharo 中，工作区 DoIt 在 UndefinedObject (nil) 上创建一个方法。所以这里 self 指的是 nil。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T20:33:57.477

试试这个实验：在工作区中输入“self”，选择它，然后从上下文菜单中选择“打印它”。这将向您展示 self 绑定到的对象。

在大多数 Smalltalks 中，self 将为 nil。

# javascript - 如何从内联样式属性中获取值并将其放入最接近的输入值中？jQuery

> ID：14652365
> 
> 赞同：0
> 
> 时间：2013-02-01T18:04:15.997
> 
> 标签：javascript, jquery, html, replace, next

如何从内联样式属性中获取值，删除“%”，并将其放在最近（或下一个）输入值属性中？

```
<div>
    <div>
       <div style="width: 52%;"></div>
    </div>
    <input type="hidden" name="item_1" value="0">
</div>

<div>
    <div>
       <div style="width: 52%;"></div>
    </div>
    <input type="hidden" name="item_2" value="0">
</div> 
```

我需要获取每个的“ **52** ”`<div style="width: 52%;">`并将其放入最接近的输入值中，替换“0”。我怎样才能在 jQuery 中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:05:39.943

```
$('div[style]').each(function () {
    $(this).parent().next().val( parseFloat(this.style.width) );
}); 
```

这是小提琴：http: [//jsfiddle.net/7GA4n/](http://jsfiddle.net/7GA4n/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:26:38.977

试试这个：http: [//jsfiddle.net/z9FSb/](http://jsfiddle.net/z9FSb/)

```
$('div[style]').each(function(){
    var str = $(this).attr('style');
    var nstr = str.substr(str.indexOf(':')+1).slice(0, -2);
    var Val = $(this).parent().next('input').val(nstr);
    alert($('[type="hidden"]').val());
}); 
```

# linux - 为什么 SerialPort.Open() 失败？

> ID：14652370
> 
> 赞同：1
> 
> 时间：2013-02-01T18:04:37.713
> 
> 标签：linux, mono, serial-port

我正在尝试使用串行端口通过 /dev/ttyUSB0 与 USB 设备通信。

到目前为止，我已经使用 modprobe 让它显示为 USB0，chmod 允许在没有 root 权限的情况下进行读写，并且我有一个 C 库（称为 Gant 之类的东西），它实际上可以工作。

但是，我想将它与现有的应用程序集成，该应用程序最初是用 C# 为 .Net 开发的，但（希望）很快就会使用 mono 在 Linux 上运行。

C 代码用于`open("/dev/ttyUSB0")`获取文件描述符，然后`read()`直接`write()`与 USB 设备通信。

据我所知，C# 中的等价物类似于

```
SerialPort sp = new SerialPort("/dev/ttyUSB0");
sp.Open(); 
```

但这给出了一个`IOException: Invalid argument at System.IO.Ports.SerialPortStream.SetSignal (SerialSignal signal, Boolean value) [0x00000] in <filename unknown>:0`

我尝试了不同的参数集`new SerialPort()`，并随后使用类似的东西设置值，`sp.BaudRate = 115200`但由于我不知道实际导致错误的原因，我必须非常幸运地通过尝试不同的组合对其进行排序。

从在mono的源代码中挖掘了一下，看起来被调用的函数会产生错误是`set_signal (fd, signal, value)`

set_signal 是一个外部的，声明如下：

```
[DllImport ("MonoPosixHelper", SetLastError = true)]
static extern int set_signal (int fd, SerialSignal signal, bool value); 
```

据我了解，fd 是 C 代码中的文件描述符，SerialSignal 是枚举：

```
enum SerialSignal {
    None = 0,
    Cd = 1, // Carrier detect
    Cts = 2, // Clear to send
    Dsr = 4, // Data set ready
    Dtr = 8, // Data terminal ready
    Rts = 16 // Request to send
} 
```

布尔值`value`是特定的 SerialSignal 是否被设置。

它似乎被调用了两次，一次设置 Dtr，一次设置 Rts。

所以毕竟我的问题仍然是为什么会失败？是否存在我不正确的 DTR 和 RTS 设备特定设置？是否可以完全绕过单声道代码，并使用一些 C 外部组件（我认为单声道源无论如何都会这样做，一旦它变得足够低级别）。我可以只使用 C# 单声道项目中的一些 C 代码吗？

由于我有工作的 C 代码，我认为最后一个可能证明是最简单的路线，但即便如此，我还是想了解这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:08:37.303

阅读您的评论后：是的，您可以毫无问题地调用 C 代码，您会[在此处](http://www.mono-project.com/Interop_with_Native_Libraries)找到大量示例。尽管如此，您也可以通过`UnixStream`以下方式使用该类：

```
using System;
using Mono.Unix.Native;
using Mono.Unix;

namespace Test719
{
    class MainClass
    {
        public static void Main(string[] args)
        {
            var fd = Syscall.open("/dev/ttyUSB0", OpenFlags.O_RDWR);
            var stream = new UnixStream(fd);

            stream.ReadByte(); // and so on
        }
    }
} 
```

希望对你有帮助。

# php - .php 文件在屏幕上显示代码。我该如何解决？

> ID：14652374
> 
> 赞同：0
> 
> 时间：2013-02-01T18:04:49.863
> 
> 标签：php, html, apache

我的 .php 文件中的代码在浏览器中显示。我正在使用 XAMPP 服务器运行 apache 2.4 并添加`<?php phpinfo(); ?>`作品，所以我猜测 php 5.4 版也可以正常工作。我的 index.php 文件如下所示：

```
 <!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Something</title>
    </head>
    <body>
        <?php 
        include 'json_encoded.php'; 
        ?>
        <script type='text/javascript'>

            /* @var $image_urls type */
            var jsarray = ["<?php echo join("\", \"", $image_urls); ?>"];
            //document.write(getlength(jsarray));
        </script>
    </body>
</html> 
```

我的 json_encoded.php 文件如下所示：

```
<?php
        header("Content-type: text/javascript");
        error_reporting(E_ALL);

ini_set('display_errors', '1');
        $url = 'some url';

        $var = fread_url($url);
            preg_match_all ("@((http://web)([-\w]+\.[-\w\.]+)+\w(:\d+)?(/([-\w/_\.]*(\?\S+)?)?)*)@", 
                            $var, $matches);

            $matches = $matches[1];
            $image_urls = array();
            foreach($matches as $var)
            {   
                $var1 = str_replace("/med/", "/lg/", $var);
                $image_urls[] = $var1;
            }

        // The fread_url function allows you to get a complete
        // page. If CURL is not installed replace the contents with
        // a fopen / fget loop

            function fread_url($url,$ref="")
            {
                if(function_exists("curl_init")){
                    $ch = curl_init();
                    $user_agent = "Mozilla/4.0 (compatible; MSIE 5.01; ".
                                  "Windows NT 5.0)";
                    $ch = curl_init();
                    curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
                    curl_setopt( $ch, CURLOPT_HTTPGET, 1 );
                    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 );
                    curl_setopt( $ch, CURLOPT_FOLLOWLOCATION , 1 );
                    curl_setopt( $ch, CURLOPT_FOLLOWLOCATION , 1 );
                    curl_setopt( $ch, CURLOPT_URL, $url );
                    curl_setopt( $ch, CURLOPT_REFERER, $ref );
                    curl_setopt ($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
                    $html = curl_exec($ch);
                    curl_close($ch);
                }
                else{
                    $hfile = fopen($url,"r");
                    if($hfile){
                        while(!feof($hfile)){
                            $html.=fgets($hfile,1024);
                        }
                    }
                }
                return $html;
            }
?> 
```

和我在运行 localhost:... 时的输出看起来像这样

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Today's Front Pages</title>
    </head>
    <body>
        <script type='text/javascript'>

            /* @var $image_urls type */
            var jsarray = [...contents of array];
                        //document.write(getlength(jsarray));
    </script>
</body>

</html> 
```

有谁知道我做错了什么？我看到了几篇关于该主题的帖子，但他们都表示没有正确安装 php，但我的情况并非如此。如果它很重要，我将使用 NetBeans 7.2 作为我的 IDE。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:12:10.140

为什么使用

```
 header("Content-type: text/javascript"); 
```

如果你想将它包含在你的 index.php 中，在你的 json_encoded.php 中？！

1.  它实际上不是 JSON。
2.  当您包含其他 php 文件时，您也将在其中执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:20:07.413

我的评论作为答案：

`header("Content-type: text/javascript");`从 json_encoded.php 中删除

# jquery - 单击切换文本和另一个元素的 css 类的 Jquery 按钮

> ID：14652376
> 
> 赞同：1
> 
> 时间：2013-02-01T18:04:52.643
> 
> 标签：jquery

我正在制作一个点击事件的 jquery 来切换 div#foo 的 css 类（在现有类之后附加它），但还需要在显示/隐藏之间切换点击按钮的文本。

```
<script>
$(document).ready(function(){
  $("button.toggler").click(function(){
    $("#foo").toggleClass("maximize");
    $("button.CsToggle").text(!text == "Expand" ? "Hide" : "Expand");
  });
});
</script>

<div id="foo" class="preExistingClass">
  <div>
    <button class="toggler">Expand</button>
  </div>
</div> 
```

我的类切换正常工作，但文本切换没有。我哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:07:50.190

使用该`html()`函数设置按钮的innerHtml。选择器也应该是 , `$("button.toggler")`。您还需要有一个可用的可变文本，我假设您的业务逻辑将确定它的设置方式..

```
$(document).ready(function(){
  $("button.toggler").click(function(){
    $("#foo").toggleClass("maximize");
    $(this).html($(this).html() == "Expand" ? "Hide" : "Expand");
  });
}); 
```

工作示例：http: [//jsfiddle.net/z5QVM/](http://jsfiddle.net/z5QVM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:08:33.877

```
$("button.CsToggle").toggle(function(){
 if ( $(this).text == "Expand"){ 
     // code
     }
  else {
     //code
   }
}); 
```

# javascript - 寻找一些解释的javascript片段

> ID：14652379
> 
> 赞同：-2
> 
> 时间：2013-02-01T18:05:02.423
> 
> 标签：javascript

我是 JavaScript 新手。我正在寻找一段简单的代码，因为我认为这是一种很好的学习方式。

那么你知道我在哪里可以找到这种资源吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:06:47.867

[Mozilla 的开发者网络](https://developer.mozilla.org/en/docs/JavaScript)是入门的好地方。

他们的[Javascript 指南](https://developer.mozilla.org/en-US/docs/JavaScript/Guide)通过您询问的代码示例概述了您需要了解的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:07:57.703

我发现[这个网站](http://jqueryair.com/)非常有用。带有解释的视频，带有练习和硬度级别的在线控制台。

# git - 恢复 Git 错误

> ID：14652381
> 
> 赞同：4
> 
> 时间：2013-02-01T18:05:16.633
> 
> 标签：git

对 GIT 相当陌生，需要一点帮助。

在 Github 上托管我的内容。昨晚我意识到我有一段时间没有将我的内容推送到 Github，所以我打开了 github mac 客户端并对我的项目进行了提交/同步。它说我在主分支之前提交了 2 次。我很困惑...

**第一个错误**- 所以我做了一个“git reset --hard origin/master”，然后我与 Github 同步。

第二天早上我打开我的笔记本电脑，然后打开 netbeans，我所做的所有工作都消失了。我处于恐慌模式...

所以我在谷歌上搜索并找到描述如何撤消 GIT 重置的[页面。](http://devjosh.com/undoing-git-reset-stack-overflow)我很好地遵循了这一点并重置为之前的提交。这是我的 Git 重新登录：

```
ce8d01b HEAD@{0}: reset: moving to HEAD@{1}
fcc0db9 HEAD@{1}: commit: front page
ce8d01b HEAD@{2}: reset: moving to origin/master
a6bda3a HEAD@{3}: commit: front page
cde0712 HEAD@{4}: commit: Fixed Front Page Slider
ce8d01b HEAD@{5}: commit: Fixed Company Scrolling.
dd7b163 HEAD@{6}: commit: Work on company product and home page
4cc4274 HEAD@{7}: commit: Added Company Page
1ebed75 HEAD@{8}: commit (initial): initial 
```

在我执行 git reset HEAD@{1} 之后，我打开了 netbeans，但代码仍然不存在，所以我想也许我做错了。所以我又做了一次，但这次去了 HEAD@{2}。这就是我现在的位置。

```
a6bda3a HEAD@{0}: reset: moving to HEAD@{3}
ce8d01b HEAD@{1}: reset: moving to HEAD@{1}
fcc0db9 HEAD@{2}: commit: front page
ce8d01b HEAD@{3}: reset: moving to origin/master
a6bda3a HEAD@{4}: commit: front page
cde0712 HEAD@{5}: commit: Fixed Front Page Slider
ce8d01b HEAD@{6}: commit: Fixed Company Scrolling.
dd7b163 HEAD@{7}: commit: Work on company product and home page
4cc4274 HEAD@{8}: commit: Added Company Page
1ebed75 HEAD@{9}: commit (initial): initial 
```

但我仍然看不到我的代码。还有什么我需要做的吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:33:21.827

从您的 reflog 中，

```
 git reset --hard a6bda3a 
```

应该将您的内容恢复*为*`git reset --hard origin/master`.

然后，如果[GitHub 分支领先](https://stackoverflow.com/a/6643792/6309)，我会推荐一个：

```
git pull --rebase 
# check everything is still working
# git add and git commit if needed
git push 
```

# haskell - 不在范围内：数据构造函数“字符串”

> ID：14652382
> 
> 赞同：4
> 
> 时间：2013-02-01T18:05:17.930
> 
> 标签：haskell

我是 Haskell 的新手。我在包含“String”的几乎每一行代码中都得到了这个“不在范围内：数据构造函数‘String’”

请看看我的代码，让我知道我做错了什么。我真的很感谢你的帮助，谢谢。

```
import Data.Maybe

data Op = Add | Sub | Mul | Div | And | Or | Not | Eq | Less | Great
    deriving (Eq, Show)

data Exp = Literal Value
     | Primitive Op [Exp]
     | Variable String
     | If Exp Exp Exp
     | Let [(String, Exp)] Exp
    deriving (Show, Eq)

data Value = Number Int
       | Bool Bool
    deriving (Eq, Show)

type Env = [(String, Value)]

eval :: Env -> Exp -> Value
eval e (Literal v) = v
eval e (Variable x) = fromJust (lookup x e)
--22
prim :: op -> [Value] -> Value
prim Add [Number a, Number b] = Number (a+b)
prim And [Bool a, Bool b] = Bool (a && b)
prim Sub [Number a, Number b] = Number (a-b)
prim Mul [Number a, Number b] = Number (a*b)
prim Div [Number a, Number b] = Number (a/b)
prim Or [Bool a, Bool b] = Bool (a || b)
prim Not [Bool a] = Bool (not a)
prim Eq [Number a, Number b] = Bool (a == b)
prim Eq [String a, String b] = Bool (a == b) 
prim Less [Number a, Number b] = Bool (a < b)
prim Less [String a, String b] = Bool (a < b)
prim Great [Number a, Number b] = Bool (a > b)
prim Great [String a, String b] = Bool (a > b) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T18:10:17.930

看起来您忘记添加`String`数据`Value`类型了？

```
data Value = Number Int
       | Bool Bool
       | String String
    deriving (Eq, Show) 
```

# backbone.js - 防止木偶视图关闭 onBeforeClose

> ID：14652388
> 
> 赞同：1
> 
> 时间：2013-02-01T18:05:48.680
> 
> 标签：backbone.js, marionette

我试图阻止用户通过表单对模型进行编辑并轻松避开该更改。当您开始撰写邮件时，想想 Gmail。

有人在 GitHub 上发布了一个问题，描述了相同的情况。 [https://github.com/marionettejs/backbone.marionette/issues/186](https://github.com/marionettejs/backbone.marionette/issues/186)

此问题已关闭，因为人们建议您在尝试关闭视图之前检测更改。

但是这种方法的问题是有几种方法可以关闭视图。后退按钮，单击新导航项，视图上的取消按钮。

由于已经有一个 onBeforeCLose 回调，你会认为你可以从这里取消关闭。这根本不可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:04:33.273

您现在要求的内容已内置到该`onBeforeClose`方法中。在编写第 186 号票据时，基础设施还没有到位。事情发生了变化，它突然变成了实现这一点的单线，所以我做到了:)

[https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#view-onbeforeclose](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#view-onbeforeclose)

```
 MyView = Marionette.View.extend({

  onBeforeClose: function(){
    // prevent the view from being closed
    return false;
  }

});

var v = new MyView();

v.close(); // view will remain open 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T15:01:17.437

不幸的是，在写这篇回复的时候，**onBeforeClose**并没有阻止区域的内容被关闭。有一个未解决的问题[https://github.com/marionettejs/backbone.marionette/issues/703](https://github.com/marionettejs/backbone.marionette/issues/703)。您可以通过添加评论来投票支持此问题的修复。

# javascript - 如何将不推荐使用的 .live() jQuery 代码移植到当前版本

> ID：14652390
> 
> 赞同：1
> 
> 时间：2013-02-01T18:05:56.800
> 
> 标签：javascript, jquery, deprecated

> **可能重复：**
> [jQuery：如何用 .on 替换 .live？](https://stackoverflow.com/questions/10604328/jquery-how-to-replace-live-with-on)

[.live()](http://api.jquery.com/live/)在 jQuery 1.7 中被弃用并在 1.9 版中被删除。我刚刚在我们的应用程序中将 jQuery 升级到 1.9.0，我看到我们过去使用了大量的`.live()`调用。

我将所有`.live()`调用移植到[.on()](http://api.jquery.com/on/)调用。[在大多数情况下，这是一个简单的更新（简单的情况，例如.live()](http://api.jquery.com/live/)页面上的第二个片段中的那个）。但是在几个地方我有类似的东西：

```
(function($){
    $(document).ready(function() {
        $('.ui-jqgrid-btable').find('a.pop_dialog_jqgrid').live('click', function() {
            //some code here
        });
    });
})(jQuery); 
```

我已经移植到：

```
(function($){
    $(document).ready(function() {
        $(document).on('click', $('.ui-jqgrid-btable').find('a.pop_dialog_jqgrid'), function() {
            //some code here
        });
    });
})(jQuery); 
```

但它对新代码的作用完全不同（页面上任何地方的所有点击都会触发“某些代码”）。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:07:36.697

第二个参数应该是一个选择器，而不是一个对象：

```
$(document).on('click', '.ui-jqgrid-btable a.pop_dialog_jqgrid', function() {
     //some code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:09:53.330

你需要一个选择器，而不是一个 jQuery 对象。就个人而言，我会将其本地化而不是文档。

```
$('.ui-jqgrid-btable').on('click', 'a.pop_dialog_jqgrid', function() {
    //some code here
}); 
```

# javascript - 冲突脚本、Fancybox 和无缝音频播放器

> ID：14652398
> 
> 赞同：0
> 
> 时间：2013-02-01T18:06:32.823
> 
> 标签：javascript, jquery, fancybox

我正在使用一个名为 SCM Player ( [http://scmplayer.net/](http://scmplayer.net/) ) 的无缝音频播放器和一个名为 FancyBox 的 JQuery 插件。两个脚本冲突似乎存在一些问题。当我从播放器添加代码时，fancybox 停止工作。

这是我的代码的样子： HEAD：

```
<!-- jquery lib -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>

<!-- Fancybox -->
<script type="text/javascript" src="fancybox/jquery.fancybox-1.3.4.pack.js"></script>
<link rel="stylesheet" href="fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />
<script type="text/javascript">
$(document).ready(function() {

    $("a.cart").fancybox({
        'hideOnContentClick': false
    });

});
</script> 
```

在 BODY 标签的开头：

```
<!-- SCM Music Player http://scmplayer.net -->
<script type="text/javascript" src="http://scmplayer.net/script.js" 
data-config="{'skin':'skins/black/skin.css','volume':50,'autoplay':false,'shuffle':true,'repeat':1,'placement':'top','showplaylist':false,'playlist':[{'title':'Tommy Castro - Bad Case of Love','url':'http://santacruzbluesfestival.com/sounds/saturday/01.mp3'},{'title':'Tommy Castro - Exception to the Rule','url':'http://santacruzbluesfestival.com/sounds/saturday/02.mp3'}]}" ></script>
<!-- SCM Music Player script end --> 
```

这是实际存在的问题：http: [//santacruzbluesfestival.com/dev/buy-tickets.php](http://santacruzbluesfestival.com/dev/buy-tickets.php)

当您单击“添加到购物车”按钮时，应该会弹出花式框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-12T04:55:43.370

您不应该在 FancyBox 页面中使用 scm 的代码。只需添加 default.aspx 即可用于所有页面！

# c# - 将查询字符串数组参数转换为字典值

> ID：14652402
> 
> 赞同：3
> 
> 时间：2013-02-01T18:06:57.330
> 
> 标签：c#, asp.net-web-api

我正在尝试接受表单的查询字符串

```
?param[key1]=value1&param[key2]=value2 
```

或者

```
?where[column1]=value1&where[column2]=value1
&orderby[column1]=asc&orderby[column2]=desc 
```

并将其转换为 C# MVC 4 Web API 中的字典，以便可以以`param["key1"]`. 这在 PHP 中是微不足道的，但我无法找到任何在 C# 中重现它的方法。

我知道我可以通过

```
?param=value1&param=value2 
```

这样我就可以做类似的事情

```
?where=column1&where=column2
&whereval=value1&whereval=value2
&orderby=column1&orderby=column2
&orderbycard=asc&orderbycard=desc 
```

但这留下了订购问题，并且对我的目的几乎没有用处。

希望这不是框架的限制，我如何在 C# 中实现字典样式的转换，最好是我可以在函数的参数中使用字典？

> 澄清一下：我不想将查询字符串转换为 NVC，而是将查询字符串参数转换为他们自己的 NVC。这不像 ParseQueryString() 或 Request.QueryString 对象那么简单*。*

*[这个问题](https://stackoverflow.com/questions/14632829/convert-query-string-dictionary-or-associative-array-to-dictionary)上次因为是[这个问题](https://stackoverflow.com/questions/68624/how-to-parse-a-query-string-into-a-namevaluecollection-in-net)的重复而被关闭，所以我添加了澄清。我会要求任何考虑将此标记为重复的人在这样做之前考虑我在这里提出的问题，并认真查看我的示例。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T02:59:57.070

没有内置的方法可以实现该结果。下面是我的尝试，使用带有命名组的正则表达式。可以跳过拆分并处理正则表达式本身中的`?`and`&`字符，但我采用这种方法来保持模式更清晰。

```
string input = "?where[column]=value&where[column2]=value2&orderby[column]=asc&orderby[column2]=desc";
string pattern = @"(?<Type>[^[]+)\[(?<Key>[^]]+)\]=(?<Value>.+)";
var re = new Regex(pattern);
var dict = input.Split(new[] { "?", "&" }, StringSplitOptions.RemoveEmptyEntries)
                .Select(s => re.Match(s))
                .GroupBy(m => m.Groups["Type"].Value)
                .ToDictionary(g => g.Key,
                    g => g.ToDictionary(x => x.Groups["Key"].Value,
                                        x => x.Groups["Value"].Value));

foreach (var t in dict.Keys)
{
    Console.WriteLine("Type: " + t);
    foreach (var k in dict[t].Keys)
    {
        Console.WriteLine("{0}: {1}", k, dict[t][k]);
    }
} 
```

当然，这取决于您事先知道要检查的密钥，例如，`dict["where"]["column"]`

您可能会发现[`ContainsKey`](http://msdn.microsoft.com/en-us/library/kw5aaea4%28v=vs.110%29.aspx)和[`TryGetValue`](http://msdn.microsoft.com/en-us/library/bb347013.aspx)方法有助于检查密钥是否存在：

```
string result;
if (dict["where"].TryGetValue("column", out result))
{
    Console.WriteLine(result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:38:42.010

你可以试试这样的

```
var queryString = "http://example.com/api/objects?where[id]=4&orderby[id]=asc?";
string[] arr = queryString.Split(new char[] { '&' });
int cntVar = 0; // start key
Dictionary<int, string> dictQuery;
dictQuery = arr.ToDictionary(d => ++cntVar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T23:53:33.980

我想与您分享我根据 Ahmad Mageed 的工作得出的结论。（顺便说一句，这是一个很好的开始。）我需要相同的功能，但我需要它能够接受索引链中的更多深度。

这使您能够根据需要读取尽可能多的子索引，而无需对其进行硬编码以停止在 2 或 3 级深度。因此，通过此更新，您可以读取这样的查询字符串......

```
columns[0][data]=0&columns[0][name]=&columns[0][searchable]=true  
&columns[0][orderable]=true&columns[0][search][value]=  
&columns[0][search][regex]=false&columns[1][data]=1  
&columns[1][name]=&columns[1][searchable]=true  
&columns[1][orderable]=true&columns[1][search][value]=  
&columns[1][search][regex]=false&columns[2][data]=2  
...  
&order[0][column]=0&order[0][dir]=asc&start=0&length=10&search[value]=&search[regex]=false 
```

这是我对该部分代码的更新版本。

```
public IDictionary ConvertQueryString(string sQry)
{
    string pattern = @"(?<Prop>[^[]+)(?:\[(?<Key>[^]]+)\])*=(?<Value>.*)";
    // The brackets seem to be encoded as %5B and %5D
    var qry = HttpUtility.UrlDecode(sQry);

    var re = new Regex(pattern);
    var dict = qry.Split(new[] { "?", "&" }, StringSplitOptions.RemoveEmptyEntries)
               .Select(s => re.Match(s)).Where(g => g.Success)
               .GroupBy(m => m.Groups["Prop"].Value)
               .ToDictionary<IGrouping<string, Match>, string, object>(
                    g => g.Key, 
                    g => GetKey(g, 0));
    return dict;
}

private object GetKey(IGrouping<string, Match> grouping, int level)
{
    var count = grouping.FirstOrDefault().Groups["Key"].Captures.Count;
    // If the level is equal to the captures, then we are at the end of the indexes
    if (count == level)
    {
        var gValue = grouping.Where(gr => gr.Success).FirstOrDefault();
        var value = gValue.Groups["Value"].Value;
        return value;
    }
    else
    {
        return grouping.Where(gr => gr.Success)
                .GroupBy(m => m.Groups["Key"].Captures[level].Value)
                .ToDictionary<IGrouping<string, Match>, string, object>(
                        a => a.Key, 
                        a => GetKey(a, level + 1));
    }
} 
```

我想比仅仅构建一个嵌套字典对象更进一步，我想根据传递的字符串实际构建对象。我在新版本的 jQuery DataTables 中需要这个，它实际上是产生上面那个讨厌的查询字符串的原因。这是一个快速的写作，所以它有点粗糙并且可能有点容易出错，因为我还没有时间来强化它。

```
// Call it like so.
MyClass object = new MyClass();
WalkDictionary(dict, object);
// At this point the object will be filled out for you.

public class MyClass
{
    public List<cColumns> columns { get; set; }
    public cSearch search { get; set; }
}
public class cColumns
{
    public int? data { get; set; }
    public string name { get; set; }
    public bool? searchable { get; set; }
    public bool? orderable { get; set; }
    public cSearch search { get; set; }
}
public class cSearch
{
    public string value { get; set; }
    public bool? regex { get; set; }
} 
```

我只放了我需要的基本类型。因此，如果您需要/想要更多，那么您将不得不添加它们。

```
private void WalkDictionary(IDictionary dict, object obj)
{
    foreach (string key in dict.Keys)
    {
        Type t = obj.GetType();
        if (t.IsGenericType
            && typeof(List<>) == t.GetGenericTypeDefinition())
        {
            Type[] typeParameters = t.GetGenericArguments();
            foreach (DictionaryEntry item in dict)
            {
                var lstPropObj = Activator.CreateInstance(typeParameters[0]);
                WalkDictionary((IDictionary)item.Value, lstPropObj);
                ((IList)obj).Add(lstPropObj);
            }
            return;
        }
        PropertyInfo prop = obj.GetType().GetProperty(key);
        if (prop == null)
            continue;
        if (dict[key] is IDictionary)
        {
            //Walk
            var objProp = prop.GetValue(obj);
            if (objProp == null)
                objProp = Activator.CreateInstance(prop.PropertyType);
            WalkDictionary(dict[key] as IDictionary, objProp);
            prop.SetValue(obj, objProp);
        }
        else if (prop.PropertyType.IsAssignableFrom(typeof(int)))
        {
            int val = Convert.ToInt32(dict[key]);
            prop.SetValue(obj, val);
        }
        else if (prop.PropertyType.IsAssignableFrom(typeof(bool)))
        {
            bool val = Convert.ToBoolean(dict[key]);
            prop.SetValue(obj, val);
        }
        else if (prop.PropertyType.IsAssignableFrom(typeof(string)))
        {
            string val = Convert.ToString(dict[key]);
            prop.SetValue(obj, val);
        }
    }
} 
```

# asp.net-mvc - ASP.NET MVC - 调试已部署的应用程序

> ID：14652403
> 
> 赞同：0
> 
> 时间：2013-02-01T18:06:58.023
> 
> 标签：asp.net-mvc, visual-studio-2012, visual-studio-debugging

## 设置：

我有一个 ASP.NET MVC 4 应用程序，部署在可以使用远程桌面访问的远程服务器上。

文件已经发布到服务器，所以没有来源。

在远程服务器上，安装了 Visual Studio 2012 Express 的副本。

## 问题：

在服务器上调试应用程序的最佳方法是什么？

我的下意识反应是用 Visual Studio 2012 Express 打开应用程序，然后调试它。

但是将所有代码编译成 .dll 文件后，我可以调试任何东西吗？

那么......你会推荐什么策略？

## 问题：

由于解决方案已发布，因此没有项目文件或解决方案文件。那么如何创建解决方案文件以允许我打开此解决方案？

对不起，如果这听起来很简单，我的大脑已经死了。嗯，差不多。我还能打字。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:15:31.307

这是假设您有源代码和将应用程序重新部署到生产环境的选项，但我会使用[log4net](http://logging.apache.org/log4net/)或[nLog 之](http://nlog-project.org/)类的日志记录框架将日志记录添加到您的项目并将调试信息转储到文件系统、数据库甚至一个 UDP 监听器（查看[Log4View](http://www.log4view.com/home/)作为一个选项）。设置和部署它需要一些时间和精力，但它可以在未来的调试情况下为您节省数倍的时间。

另外，请查看[ELMAH](http://code.google.com/p/elmah/)。我从未使用过它，但我听说一些非常聪明的人对此赞不绝口。

但是，如果您仅限于调试当前部署到生产中的位，这将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:20:25.130

使用 Visual Studio Standard 和更高版本中内置的远程调试器有几个选项。这允许您从本地计算机调试远程计算机上的代码，假设您可以访问远程计算机以设置服务并拥有允许您访问该信息的帐户

[http://msdn.microsoft.com/en-us/library/bt727f1t(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/bt727f1t(v=VS.100).aspx)

[http://msdn.microsoft.com/en-us/library/vstudio/y7f5zaaa(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/vstudio/y7f5zaaa(v=vs.110).aspx)

# php - 如何获取未找到页面的 URL，以便在自定义 404 页面中显示它？

> ID：14652404
> 
> 赞同：0
> 
> 时间：2013-02-01T18:07:02.870
> 
> 标签：php, html, http-status-code-404, http-status-code-403

好的，当我尝试使用时，我的网络服务器有问题

```
<?php echo "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]" ?> 
```

它出现了它自己的文件：例如。blah.com/404.php

另外，我将如何使用 403 页面执行此操作？我知道这是可能的，我已经尝试过

```
 $_SERVER['HTTP_REFERER'] 
```

但注意到出现了，或者有时它只是一个零。这是我第一次使用 404，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:07:55.017

“未找到”的 url 应返回 404 状态代码。因此，您应该立即“返回”此代码，而不是重定向到另一个 php 文件。

您应该查看文件中的错误文档处理`.htaccess`。这样的事情可能会帮助你：

```
ErrorDocument 404 /notfound.php 
```

这将返回 404 状态代码。这个解决方案的好处是：您可以访问`$_SERVER['REQUEST_URI']`您的 notfound.php 文件并使用它来显示错误消息或任何其他操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:49:00.590

我发现了问题，您必须发布相对路径，而不是直接链接，否则它将重定向到该页面而不是显示 404。

例如：

```
 ErrorDocument 404 /404.php 
```

这样 .htacess 不会重定向到 Yoursite.com/notfound.php 它还会发送 404（未找到）而不是 200（确定）

# iphone - 装饰器模式的问题，iOS / UICollectionViewCells

> ID：14652406
> 
> 赞同：8
> 
> 时间：2013-02-01T18:07:13.750
> 
> 标签：iphone, ios, design-patterns, decorator, uicollectionview

我正在尝试使用装饰器模式来“装饰” UICollectionViewCells。

例如，如果我有一个

```
 BaseCell : UICollectionViewCell 
```

我希望能够做这样的事情：

```
 BaseCell *cell = [[BaseCell alloc] initWithFrame]
 cell = [[GlowingCell alloc] initWithCell:cell];
 cell = [[BorderedCell alloc] initWithCell:cell];
 cell = [[LabelledCell alloc] initWithCell:cell];

 // cell is now a glowing, bordered, labelled cell. 
```

我认为装饰器模式非常适合这类事情，但我很难将它应用到集合视图中。

首先，在 UICollectionViewControllers 中你需要注册一个类，像这样：

```
 [self.collectionView registerClass:cellClass forCellWithReuseIdentifier:cellIdentifier]; 
```

所以我没有机会制作自己的实例。

其次，我看不出装饰器如何用于装饰“非纯”对象，即我没有从头开始创建但具有自己的属性和行为的对象（例如 UICollectionViewCell）。由于在上面的示例中，`cell`表示 LabelledCell 的新实例，并且如果 UICollectionView 对方法进行调用，例如 ，除非我在我的 Decorator 基类中专门执行此操作，否则`isSelected`它将调用：`aLabelledCellInstance.isSelected`

```
 - (BOOL)isSelected {
      return self.decoratedCell.isSelected;
 } 
```

这对于一种方法来说很好，但是必须覆盖`UICollectionViewCell`. 我应该使用`forwardInvocation:`吗？

我是否在滥用这种模式，还有其他选择吗？因为当您只需要覆盖基本方法时，它在书籍中非常有效，例如

```
 getPrice() {
      return decoratedObject.getPrice() + 1.10f;
 } 
```

.. 但似乎很难达到用自定义行为实际装饰现有 UI 元素的目的。

谢谢

编辑：我试图避免的是有这样的课程：

*   发光边框单元格
*   标记发光有界细胞
*   等等

在纸面上，装饰器是我想要实现的目标的完美候选者，但实现绝对让我难过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:21:48.363

首先，装饰器模式要求你重写所有的基方法，`BaseDecorator`这样你就可以将调用转发给被装饰的对象。您可以通过覆盖每个方法来做到这一点，或者最好只使用`forwardInvocation:`. 并且由于所有其他装饰器都是 的子类`BaseDecorator`，因此您现在可以覆盖您想要更改的方法。

其次，对于这个`CollectionView`问题，我建议使用带有普通`UIView`s的Decorator模式，然后使用装饰视图作为`contentView`单元格的。让我们看一个例子：

我们有一个`BaseCellView`类，它将成为所有装饰器的超类。

```
BaseCellView : UIView;
GlowingCellView: BaseCellView;
BorderedCell: BaseCellView;
LabelledCell: BaseCellView; 
```

我们仍然有我们的`BaseCell`类，它是以下的子类`UICollectionViewCell`：

```
BaseCell : UICollectionViewCell; 
```

现在，`UICollectionViewControllers`将始终创建一个实例`BaseCell`并让您有机会对其进行配置，您将在其中执行以下操作：

```
BaseCellView *cellView = [[BaseCellView alloc] initWithFrame]
cellView = [[GlowingCellView alloc] initWithCellView:cellView];
cellView = [[BorderedCellView alloc] initWithCellView:cellView];
cellView = [[LabelledCellView alloc] initWithCellView:cellView];
cell.contentView = cellView; 
```

如果您愿意，您仍然可以将任何内容转发`UICollectionViewCell`给装饰者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T19:34:05.367

[这](http://cocoaexposed.com/post/40353790996/advanced-delegation-decorator-pattern)是我在其中描述了这种技术的帖子。虽然我选择了装饰`UITableView`而不是单元格，但它可以很容易地适应您的收藏视图。这是一篇很长的文章，所以我在这里只做一个简短的总结：

*   装饰器需要是代理对象才能将所有消息转发到装饰对象
*   您需要在装饰器中覆盖多种方法才能实现这一点，其中`respondsToSelector`和`forwardingTargetForSelector`
*   完成后，您将能够链接非常整洁的装饰器：

例如：

```
dec = [[DEFooterDecorator alloc] initWithDecoratedObject:dec];
dec = [[DEHeaderDecorator alloc] initWithDecoratedObject:dec];
dec = [[DEGreenCellDecorator alloc] initWithDecoratedObject:dec]; 
```

# sql - 如何计算客户在搜索中每天访问的次数

> ID：14652407
> 
> 赞同：0
> 
> 时间：2013-02-01T18:07:20.217
> 
> 标签：sql, sql-server, sql-server-2005

我有一个查询，用于搜索每天多次访问的客户。如果我在 1 个特定的日子里运行这个查询，它就可以工作。我想做的是能够查询一系列日期。例如，我想搜索 12/1/12 - 1/31/13 并让它每天检查多次访问，并显示客户多次访问的日期。以下是我的查询不起作用：

```
SELECT        Customers.sBarcode, COUNT(Customers.sBarcode) AS [Number of Scans], Tickets.dtCreated
FROM            Tickets INNER JOIN
                         Customers ON Tickets.lCustomerID = Customers.lCustomerID
WHERE        (Tickets.dtCreated BETWEEN CONVERT(DATETIME, '2012-12-11 00:00:00', 102) AND CONVERT(DATETIME, '2012-12-12 00:00:00', 102)) AND (Tickets.dblTotal <= 0)
GROUP BY Customers.sBarcode, Tickets.dtCreated
HAVING        (COUNT(*) > 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:14:19.203

尝试这样的事情：

```
SELECT  Customers.sBarcode ,
        CAST(FLOOR(CAST(Tickets.dtCreated AS FLOAT)) AS DATETIME) AS dtCreatedDate ,
        COUNT(Customers.sBarcode) AS [Number of Scans]
FROM    Tickets
        INNER JOIN Customers ON Tickets.lCustomerID = Customers.lCustomerID
WHERE   ( Tickets.dtCreated BETWEEN CONVERT(DATETIME, '2012-12-01 00:00:00', 102)
                            AND     CONVERT(DATETIME, '2013-01-31 23:59:59', 102) )
        AND ( Tickets.dblTotal <= 0 )
GROUP BY Customers.sBarcode ,
        CAST(FLOOR(CAST(Tickets.dtCreated AS FLOAT)) AS DATETIME)
HAVING  ( COUNT(*) > 1 ) 
```

假设您有 dtCreated 字段的时间信息，cast/floor/cast 会删除它，然后您可以按日期分组并扩大日期范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:22:24.577

尝试：

```
SELECT      Customers.sBarcode, 
            COUNT(Customers.sBarcode) AS [Number of Scans], 
            convert(char(10),Tickets.dtCreated,102)
FROM        Tickets 
INNER JOIN  Customers ON Tickets.lCustomerID = Customers.lCustomerID
WHERE       Tickets.dtCreated >=CONVERT(DATETIME, '2012-12-11 00:00:00', 102) AND 
            Tickets.dtCreated < CONVERT(DATETIME, '2012-12-18 00:00:00', 102) AND 
            Tickets.dblTotal <= 0
GROUP BY    Customers.sBarcode, convert(char(10),Tickets.dtCreated,102)
HAVING      COUNT(*) > 1 
```

# python - Python3 自定义视图对象

> ID：14652409
> 
> 赞同：5
> 
> 时间：2013-02-01T18:07:27.177
> 
> 标签：python, python-3.x

是否可以在 Python 3 中实现自定义视图对象？

根据文档：

> dict.keys()、dict.values() 和 dict.items() 返回的对象是视图对象。它们提供字典条目的动态视图，这意味着当字典更改时，视图会反映这些更改。

那么是否有可能以某种方式创建自定义视图对象？

我搜索了很长时间有关它的任何信息，但我发现的唯一解释是视图是**什么**，而不是如何**创建自定义**或**如何实现它们**（它们的内部机制）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:36:07.887

在 Python 2 中，这些函数返回一个列表。在 Python 3 中，您可以得到像列表一样的对象。像列表一样行事需要什么？

您可以使用[许多“特殊功能”](http://docs.python.org/3.3/reference/datamodel.html#emulating-container-types)来更改对象的行为。你可能已经很熟悉了`__init__()`。对于制作“视图”，最重要的可能是`__len__()`，`__getitem__()`也许`__iter__()`。

# sql - 查询以显示最早和最晚日期，第三列中的值总和

> ID：14652413
> 
> 赞同：0
> 
> 时间：2013-02-01T18:07:43.437
> 
> 标签：sql

我有一个表格，其中显示了项目编号，然后是进入某个工作流程时的所有进入和退出日期。但是，我只需要第一个输入日期和最后一个退出日期，以及所有过去的天数进行汇总。下面是当前表格。

```
╔════════════╦════════════╦══════╦═══════════╦═════════════════╗
║ ENTERDATE  ║  EXITDATE  ║ DAYS ║  ITEMNO   ║    WORKFLOW     ║
╠════════════╬════════════╬══════╬═══════════╬═════════════════╣
║ 08/06/2012 ║ 08/09/2012 ║ 2.79 ║ 100004739 ║ 01 - VND Enrich ║
║ 08/21/2012 ║ 09/11/2012 ║ 21.2 ║ 100004739 ║ 01 - VND Enrich ║
║ 08/09/2012 ║ 08/13/2012 ║ 4.25 ║ 100004739 ║ 02 - DFM Review ║
║ 09/11/2012 ║ 09/13/2012 ║ 1.83 ║ 100004739 ║ 02 - DFM Review ║
║ 08/13/2012 ║ 08/16/2012 ║ 2.91 ║ 100004739 ║ 03 - QC 1       ║
║ 09/13/2012 ║ 09/14/2012 ║ 1    ║ 100004739 ║ 03 - QC 1       ║
╚════════════╩════════════╩══════╩═══════════╩═════════════════╝ 
```

我需要编写一个查询来实现以下目标：

```
╔════════════╦════════════╦═══════╦═══════════╦═════════════════╗
║ ENTERDATE  ║  EXITDATE  ║ DAYS  ║  ITEMNO   ║    WORKFLOW     ║
╠════════════╬════════════╬═══════╬═══════════╬═════════════════╣
║ 08/06/2012 ║ 09/11/2012 ║ 23.99 ║ 100004739 ║ 01 - VND Enrich ║
║ 08/09/2012 ║ 09/13/2012 ║ 6.08  ║ 100004739 ║ 02 - DFM Review ║
║ 08/13/2012 ║ 09/14/2012 ║ 3.91  ║ 100004739 ║ 03 - QC 1       ║
╚════════════╩════════════╩═══════╩═══════════╩═════════════════╝ 
```

谁能给点建议？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:12:10.307

```
SELECT  MIN(EnterDate) MIN_EnterDATE,
        MAX(ExitDate) Max_ExitDate,
        SUM(days),
        ItemNo, WorkFlow
FROM    tableName
GROUP BY ItemNo, WorkFlow 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/cf844/1)
*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/25eff/4)

# ruby-on-rails - 鼠标悬停链接到 image_tag

> ID：14652418
> 
> 赞同：4
> 
> 时间：2013-02-01T18:08:05.637
> 
> 标签：ruby-on-rails

我有一个链接的 image_tag，我想在鼠标悬停时更改图像。我认为以下方法会起作用，但图像没有在鼠标悬停时打开：

```
<%= link_to image_tag("new_step.png"),new_project_step_path(@project), :class=> "newStep", :onmouseover => "new_step_highlighted.png"%> 
```

我也尝试编辑 css，但不幸的是这也不起作用：

```
.newStep{
    background: url('../assets/new_step_highlighted.png');
}

.newStep:hover{
    background: url('../assets/new_step_highlighted.png');
} 
```

对于这两种情况，只出现图像“new_step.png”。我将如何解决这个问题？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-06T19:05:06.340

您可以在不修改 CSS 的情况下使用更少的代码来做到这一点：

```
<%= link_to some_route_path do
    image_tag("find.png", onmouseover: "this.src='#{asset_path('find_sel.png')}'", onmouseout: "this.src='#{asset_path('find.png')}'")
end %> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T18:19:35.433

仅使用 css，您需要将两个图像都用作`link_to`标签（实际上是`a`标签）的背景属性。使用您所写的内容，您将一个图像“硬编码”到 dom 中，`image_tag`并且您尝试更改链接的背景属性，原因`newStep`实际上是`link_to`类。

```
<%= link_to "Text", new_project_step_path(@project), :class => "newStep" %> 
```

然后是css（顺便说一句，您不需要在资产文件夹的路径前添加“..”）：

```
.newStep {
    display: inline-block;
    width: your-image-width;
    height: your-image-height;
    background: url('/assets/new_step.png');
}

.newStep:hover {
    background: url('/assets/new_step_highlighted.png');
} 
```

**这里的小提琴**：http: [//jsfiddle.net/km6Sp/](http://jsfiddle.net/km6Sp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:04:26.887

事实证明，斯巴达的反应是正确的，只是我的图像路径实际上只是“/assets/new_step.png”。由于我的 CSS 文件存在问题，图像没有出现。

# d3.js - 在 D3 的时间刻度轴上添加 SVG 对象？

> ID：14652420
> 
> 赞同：1
> 
> 时间：2013-02-01T18:08:18.210
> 
> 标签：d3.js

我正在尝试在我目前拥有的 D3 折线图上叠加一个 SVG 矩形对象。图表的 x 轴是一个时间刻度，我很难尝试在时间刻度上的特定日期设置起始 x 坐标。做这个的最好方式是什么？

```
 svg.append("rect")
   .attr("x", )  // start x on 20130301
   .attr("y", height)
   .attr("width", 50)
   .attr("height", height)
   .attr("fill", "red"); 
```

现有代码：

```
var margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var parseDate = d3.time.format("%Y%m%d").parse;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var area = d3.svg.area()
    .x(function(d) { return x(d.Date); })
    .y0(height)
    .y1(function(d) { return y(d.Close); });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.json('JSONstockPriceOverTime.php', function (error, data) {
  data.forEach(function(d) {
    d.Date = parseDate(d.Date);
    d.Close = +d.Close;
  });

x.domain(d3.extent(data, function(d) { return d.Date; }));
y.domain([0, d3.max(data, function(d) { return d.Close; })]);

svg.append("path")
  .datum(data)
  .attr("class", "area")
  .attr("d", area);

svg.append("g")
  .attr("class", "x axis")
  .attr("transform", "translate(0," + height + ")")
  .call(xAxis);

svg.append("g")
  .attr("class", "y axis")
  .call(yAxis)
.append("text")
  .attr("transform", "rotate(-90)")
  .attr("y", 6)
  .attr("dy", ".71em")
  .style("text-anchor", "end")
  .text("Price ($)");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:46:59.053

可能值得设置一个小提琴（jsfiddle.net）来帮助加快速度，但是在眼球上，尝试：

```
var myDate = new Date();
myDate.setYear( 2013 );  // .setMonth , .setDate
svg.append("rect")
  .attr("x", x( myDate ) )  // start x on 20130301 
```

这表示使用您的 x-scale 根据日期输入计算输出。x-scale 是将域（日期）映射到范围（像素值）的函数

# javascript - 如何在Javascript中将对象作为参数传递？

> ID：14652421
> 
> 赞同：3
> 
> 时间：2013-02-01T18:08:23.823
> 
> 标签：javascript, jquery, function, object, parameters

我在这里发现了一些与我的问题有关的问题，但并没有完全得到我正在寻找的答案。我想做这样的事情，类似于 jQuery 经常做的事情：

```
createCSS("mystyle.css", {
    media: "screen",
    type: "text/css"
}); 
```

我试过这个来完成我想要的，但它不起作用：

```
var prop = {
    media: '',
    type: ''
};

function createCSS(href, prop) {
    var anchor = document.createElement("link");
    anchor.setAttribute("href", href);
    anchor.setAttribute("media", prop.media);
    anchor.setAttribute("type", prop.type);

    if(typeof anchor != "undefined") {
        document.getElementsByTagName("head")[0].appendChild( anchor );
    }
} 
```

现在，我知道我可以创建单个多个参数，`createCSS("mystyle.css", "screen", "text/css");`但我不喜欢这样，另一种方式看起来更酷。

很多新的javascript所以任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T18:12:16.790

您不必声明/初始化`var prop`。您的函数看起来不错，只需调用它传递一个对象 as `prop`，如您自己的示例中所示：

```
createCSS("mystyle.css", {
    media: "screen",
    type: "text/css"
}); 
```

如果该`var prop`部分的目的是避免分配`undefined`给属性，则需要*在函数内部*进行一些调整：

```
function createCSS(href, prop) {
    prop = (typeof prop !== "object") ? {} : prop;
    prop.media = prop.media || 'screen';  // default media will be screen
    prop.href = prop.href || 'text/css';  // default type will be text/css
    // rest of code
} 
```

* * *

我建议一些小的改进：

*   您的变量`anchor`不包含锚 ( `<a>`) 元素。为什么不叫呢`link`？
*   你似乎不需要`if(typeof anchor != "undefined")`条件。由于您在上面几行创建元素，因此该变量永远不会未定义。可以直接跳过`if`and `appendChild`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T18:23:02.123

“我试过这个来完成我想要的，但它不起作用”

您传递对象的方式很好。尽管该功能中有一些有趣的选择，但它可以满足您的要求。但是，您检查过您创建的链接吗？它缺少作为`rel`要求的指令。

您可能希望将您的功能更改为：

```
function createCSS(href, prop) {
 var anchor = document.createElement("link");
 anchor.setAttribute("href", href);
 anchor.setAttribute("media", prop.media);
 anchor.setAttribute("type", prop.type);
 anchor.setAttribute("rel", prop.rel);
 document.getElementsByTagName("head")[0].appendChild( anchor );
}

var prop = { 
 media: "screen",
 type: "text/css",
 rel: "stylesheet"
}

createCSS( "mystyle.css", prop ); 
```

# html - HTML/CSS 响应式表格

> ID：14652427
> 
> 赞同：0
> 
> 时间：2013-02-01T18:08:39.570
> 
> 标签：html, css

我已经建立了一个简单的订单表格，其中包含交货、账单和银行账户持有人的地址。现在这个东西被格式化为一个大的 HTML 表格：

```
+---------+---------+----------+----------+
|         | DelAddr | BillAddr | BankAddr |
| Name    |         |          |          |
| Street  |         |          |          |
| City    |         |          |          |
| Country |         |          |          |
| Tel     |         |          |          |
+---------+---------+----------+----------+ 
```

当然，这不是响应式的，并且在手机上看起来不正确，因为我使用的 Wordpress 模板是响应式模板。

我如何（如果可能，不使用 JS）使表格具有响应性，以便当视口变小时看起来像

```
+---------+---------+
|         | DelAddr |
| Name    |         |
| Street  |         |
| City    |         |
| Country |         |
| Tel     |         |
+---------+---------+
|         | BillAddr|
| Name    |         |
| Street  |         |
| City    |         |
| Country |         |
| Tel     |         |
+---------+---------+
|         | BnkAddr |
| Name    |         |
| Street  |         |
| City    |         |
| Country |         |
| Tel     |         |
+---------+---------+ 
```

这甚至可能单独使用 CSS 吗？困难在于在每个“拆分”行上显示描述列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:10:25.247

Chris Coyer 对此有一篇非常好的文章：[**响应式数据表**](http://css-tricks.com/responsive-data-tables/)。

这是一个报价：

> 最大的变化是我们将通过将每个与表相关的元素设置为块级来强制表的行为不像表。然后通过保留我们最初添加的斑马条纹，它有点像每个表格行本身就变成了一个表格，但只有屏幕那么宽。没有更多的水平滚动！然后对于每个“单元格”，我们将使用 CSS 生成的内容 (:before) 来应用标签，因此我们知道每一位数据的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:43:33.433

您也许可以使用引导程序，它是完全免费的，非常适合响应式设计......而且我认为您不需要 js。仍然包含它，它是一个很棒的库

# python - Django：[Errno 10054] 使用 urllib2 和 httplib2 时，远程主机强行关闭了现有连接

> ID：14652430
> 
> 赞同：4
> 
> 时间：2013-02-01T18:08:54.673
> 
> 标签：python, django, scrape

```
def scrape(request):
    url = request.GET.get('url')
    conn = httplib2.Http()
    resp, content = conn.request(uri=url)
    return HttpResponseRedirect(content)

def scrape1(request):
    url = request.GET.get('url')
    req = urllib2.Request(url, headers={ 'User-Agent': 'Magic Browser' })
    con = urllib2.urlopen(req) 
```

当我使用此网址[http://gizmodo.com/5980796/first%20ever-incredible-footage-of-a-thought-being-formed](http://gizmodo.com/5980796/first%20ever-incredible-footage-of-a-thought-being-formed)使用这些功能中的任何一个时，我收到以下错误消息：

[Errno 10054] 现有连接被远程主机强行关闭

当我在 Django 应用程序的视图中运行此函数时，就会发生这种情况。但是，如果我在 python shell 中运行这一系列命令，我不会收到错误，并且可以成功检索 url。请帮助我了解我做错了什么以及如何解决它，这样我就不会再收到这个错误了。谢谢你。

# ruby-on-rails-3 - Postgres 序列化与新行与 NoSQL

> ID：14652440
> 
> 赞同：1
> 
> 时间：2013-02-01T18:09:51.523
> 
> 标签：ruby-on-rails-3, postgresql, mongodb, database-design

我正在构建一个存储自定义数据集的 Rails 应用程序。更具体地说，我正在存储排行榜的存档。每个排行榜都有一组可以具有自定义字段的 LeaderboardEntries（换句话说，并非所有排行榜都具有相同的格式）。

快速示例：

```
Leaderboard 1 (Fields)
-------------
7_day_exponential_moving_average
total_count

Leaderboard 2 (Fields)
-------------
10_day_exponential_moving_average
total_count 
```

现在，我将所有排行榜条目序列化到排行榜中名为“数据”的字段。结果是我对超过 30,000 个对象执行计算，并将结果存储在单个字段中。

我开始看到异步执行计算时存在缺陷（我需要等待所有计算完成，监控它们是否完成，然后存储所有数据），看起来好像创建了一个名为 LeaderboardEntry 的单独模型会更有意义。我想知道的是存储和查询 30,000 个不同对象与将所有 30,000 个条目存储在单个字段中的性能影响，就像我已经在做的那样。

我认为一个请求和一个响应会执行得更好。（IE

```
SELECT serialized_data FROM leaderboards WHERE leaderboard_id=123  <-- 1 row with a very large field 
```

对比

```
SELECT * FROM leaderboard_entries WHERE leaderboard_id=123 <-- 30,000 rows with small sets of data 
```

我假设将其存储在序列化字段中是否正确？或者单独存储条目不是什么大不了的事？我在这里有另一个想法：使用像 MongoDB 这样的 nosql 解决方案可能更有效，然后我可以按 leaderboard_entry 字段排序并将结果限制为少量（一次 50 个结果）。

最终，我每天将生成超过 100 万个排行榜条目（用于 20 多个排行榜），我只是想找出最有效的存储方式。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:55:04.543

一个大的序列化字段肯定比一堆小的条目更有效地存储和检索（Postgres 将整个事物存储为 CLOB）。也就是说，这几乎可以肯定是过早的优化。规范化数据的优势是显着的 - 您可以使用 分段跨过您的 30k 行查询`select where field > xxx and field < yyy`，这将使您的访问时间非常快。Postgres 可以非常高效地对大量小对象进行操作。如果您的数据只是半结构化的，请查看 'hstore' 和 JSON 数据类型，postgres 可以通过查询对其进行检查。

这似乎不是一个足够大的问题来考虑切换数据库 - MongoDB 在这里不会有任何直接的优势。主要问题在于您如何设计数据访问查询。例如，使用好的索引选择部分数据集总是比做一个大的开放式数据集要快`select *`。

查看您预期执行的查询类型的[“解释计划” ，并进行相应调整。](http://www.postgresql.org/docs/current/static/sql-explain.html)如果您对不同类型查询的成本感兴趣，通常只需将一堆测试数据加载到测试数据库中，然后查看 Postgres 提出的查询计划。不同查询计划的成本相对数量是您上线时痛点所在位置的非常有效的指南。

# php - 使用 PHP 访问 MS SQL

> ID：14652442
> 
> 赞同：-2
> 
> 时间：2013-02-01T18:09:55.787
> 
> 标签：php, sql-server

之前在 Silverlight 中开发应用程序后，我们现在正在转向 HTML5。作为向更开放源代码方法迈进的一部分，我正在考虑使用 PHP 链接到我们的 MSSQL 数据库而不是 .NET。有什么好的理由不采取这种方法吗？（我们必须保留 MSSQL 和 Windows）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:16:38.293

根据[PHP.Net](http://php.net/manual/en/book.mssql.php)的说法，有很多函数可以处理 MSSQL 数据库。

无论如何，您应该首先加载驱动程序，因为**MICROSOFT**说[官方 SQL Server 站点](http://social.technet.microsoft.com/wiki/contents/articles/1258.accessing-sql-server-databases-from-php.aspx)

您可以在 Microsoft 下载中心下载 SQL Server 2005 Driver for PHP。下载中包含两个 .dll 文件：php_sqlsrv.dll 和 php_sqlsrv_ts.dll。为 PHP 加载 SQL Server 2005 驱动程序类似于加载任何 PHP 扩展！

1.  将扩展文件（php_sqlsrv.dll 或 php_sqlsrv_ts.dll）放在 PHP 扩展目录中。
2.  修改 php.ini 文件以包含扩展名。根据您要加载的驱动程序版本（非线程安全或线程安全），您需要将以下行之一添加到 php.ini 文件的动态扩展部分：

    扩展=php_sqlsrv.dll

    扩展=php_sqlsrv_ts.dll

3.  重新启动 Web 服务器。

4.  享受 API

在完成一切之后，您必须为 PHP**配置**SQL Server 2005+ 驱动程序具有三个配置选项：

*   **LogSubsystems** 使用此选项可以打开或关闭子系统的日志记录。默认设置为 SQLSRV_LOG_SYSTEM_OFF（默认情况下关闭日志记录）。
*   **LogSeverity** 使用此选项可指定打开日志记录后要记录的内容。默认设置为 SQLSRV_LOG_SEVERITY_ERROR（在打开日志记录后，默认情况下只记录错误）。
*   **WarningsReturnAsErrors**默认情况下，Driver for PHP 将 sqlsrv 函数生成的警告视为错误。使用 WarningsReturnAsErrors 选项来更改此行为。此选项的默认设置为 true。

注意 此规则有例外。例如，通过更改数据库上下文生成的警告永远不会被视为错误。

最后，您必须记住最后几件事，*sqlsrv_connect* 函数用于建立与服务器的连接。

```
$serverName = "(local)";
$connectionOptions = array("Database"=>"myDatabase");
/* Connect using Windows Authentication. */
$conn = sqlsrv_connect( $serverName, $connectionOptions);
if( $conn === false )
      { die( FormatErrors( sqlsrv_errors() ) ); } 
```

默认情况下，sqlsrv_connect 函数使用**Windows 身份验证**来建立连接。在大多数情况下，这意味着 Web 服务器的进程标识或线程标识（如果 Web 服务器使用模拟）用于连接到服务器，而不是最终用户的标识。

sqlsrv_connect 函数接受两个参数：$serverName 和 $connectionOptions（可选）。

*   **$serverName**此必需参数用于指定要连接的服务器的名称。在上面的代码中，建立了与本地服务器的连接。此参数还可用于指定 SQL Server 实例或端口号。例如：

    $serverName = "myServer\instanceName";

-或者-

```
$serverName = "myServer, 1521"; 
```

*   **$connectionOptions**这个可选参数是一个键值对数组，用于设置连接选项。有关
    详细信息，请参阅产品文档中的 sqlsrv_connect。

*注意* 必须在 $connectionOptions 参数中设置 UID 和 PWD 选项才能使用 SQL Server 身份验证登录到服务器。

*注意* 示例中显示的 FormatErrors 函数是用于格式化错误输出的自定义函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:56:46.800

近 2 年来，我一直在高可用性生产环境中使用 php（在 Windows Server 2003 和 2008 上的 IIS 上运行）和 Microsoft SQL Server（2008 和 2008R2）。

从 php 到 SQL server 的驱动一开始有点不稳定，但只要你得到最新的驱动，它就非常健壮。

在我的环境中，PHP 和 SQL Server 组合的性能优于 .net 实现。

# sublimetext2 - sublime中带有多个游标的首字母大写

> ID：14652443
> 
> 赞同：4
> 
> 时间：2013-02-01T18:09:56.210
> 
> 标签：sublimetext2, case-sensitive, camelcasing, capitalization

在崇高的情况下，如果我使用 cmd+D 选择每次出现的“旧”，则选择不区分大小写，因此将匹配**old**和 camel **Old**。但是当我开始输入大写字母时，我会得到**new**和 camel **new**。在使用多个光标键入时，是否有任何快捷方式或插件可以让 sublime 保留首字母大写？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T21:31:35.533

1.  选择你的词
2.  选择您要更改的所有事件 ( `ctrl+d`)
3.  打开查找 > 替换 ( `ctrl+h`)
4.  选中“in selection”和“preserve case”（`alt+a`），取消选中 regex（`alt+r`）和其他你不想要的东西
5.  转到较低的字段，写下你的替换
6.  全部替换

除“toggle_in_selection”外，所有步骤都有快捷键。你可以把它放在你的钥匙里来修复它：

```
{ "keys": ["alt+s"], "command": "toggle_in_selection", "context":
    [
        { "key": "setting.is_widget", "operator": "equal", "operand": true }
    ]
}, 
```

注意：将快捷方式更改为最适合您的方式。

或者，您可以将其放入您的密钥中：

```
{ "keys": ["ctrl+h"], "command": "show_panel", "args": {"panel": "replace", "in_selection": true, "preserve_case": true, "regex": false, "highlight": true} }, 
```

使用自定义快捷方式。您可以使用原始快捷方式覆盖其默认行为。

它会为你准备所有的切换和检查，所以你可以

1.  选择
2.  `ctrl+d`所有事件
3.  使用此快捷方式
4.  选项卡转到较低的字段，写下你的替换
5.  `ctrl+alt+enter`替换所有

...小心，用“全部替换”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-10T18:59:41.553

有一个 Sublime 插件可以帮助你更轻松地做到这一点：

[https://github.com/philippotto/Sublime-MultiEditUtils](https://github.com/philippotto/Sublime-MultiEditUtils)

案例保存代码今天刚刚合并。

请参阅标题“在编辑选择内容时保留大小写”

# regex - 解析 ps 的“etime”输出并将其转换为秒

> ID：14652445
> 
> 赞同：7
> 
> 时间：2013-02-01T18:10:05.677
> 
> 标签：regex, linux, bash, parsing, type-conversion

这些是可能的输出格式`ps h -eo etime`

```
21-18:26:30
   15:28:37
      48:14
      00:01 
```

如何将它们解析为秒？

*   请假设天数部分至少为 3 位数，因为我不知道它可以有多长。
*   输出将`egreped`只有一行，因此不需要循环。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-03-04T14:11:30.037

另一个 bash 解决方案，它适用于任意数量的字段：

`ps -p $pid -oetime= | tr '-' ':' | awk -F: '{ total=0; m=1; } { for (i=0; i < NF; i++) {total += $(NF-i)*m; m *= i >= 2 ? 24 : 60 }} {print total}'`

解释：

1.  替换`-`为`:`使字符串变为`1:2:3:4`而不是'1-2：3：4'，将总数设置为0并将乘数设置为1
2.  分割：，从最后一个字段（秒）开始，乘以 m = 1，添加到总秒数，m 变为 60（一分钟秒数）
3.  添加分钟字段乘以 60，m 变为 3600
4.  加小时 * 3600
5.  添加天数 * 3600 * 24

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-01T19:15:26.740

使用 awk：

```
#!/usr/bin/awk -f  
BEGIN { FS = ":" }
{
  if (NF == 2) {
    print $1*60 + $2
  } else if (NF == 3) {
    split($1, a, "-");
    if (a[2] != "" ) {
      print ((a[1]*24+a[2])*60 + $2) * 60 + $3;
    } else {
      print ($1*60 + $2) * 60 + $3;
    }
  }
} 
```

运行：

```
awk -f script.awk datafile 
```

输出：

```
1880790
55717
2894
1 
```

最后，如果您想通过管道传输到解析器，您可以执行以下操作：

```
ps h -eo etime | ./script.awk 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-09-17T08:47:49.813

这是我的 Perl 一个班轮：

```
ps -eo pid,comm,etime | perl -ane '@t=reverse split(/[:-]/,$F[2]); $s=$t[0]+$t[1]*60+$t[2]*3600+$t[3]*86400; print "$F[0]\t$F[1]\t$F[2]\t$s\n"' 
```

未定义的值呈现为零，因此它们不会影响秒数的总和。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-01-15T14:39:30.060

认为我可能在这里遗漏了重点，但最简单的方法是：

```
ps h -eo etimes 
```

请注意 etime 末尾的“s”。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-08-07T21:02:22.240

尝试将我的解决方案与 sed+awk 一起使用：

```
ps --pid $YOUR_PID -o etime= | sed 's/:\|-/ /g;' |\ 
awk '{print $4" "$3" "$2" "$1}' |\
awk '{print $1+$2*60+$3*3600+$4*86400}' 
```

它用 sed 拆分字符串，然后将数字倒转（“DD hh mm ss”->“ss mm hh DD”）并用 awk 计算它们。

您还可以使用 sed 并从输入字符串中删除所有非数字字符：

```
sed 's/[^0-9]/ /g;' | awk '{print $4" "$3" "$2" "$1}' | awk '{print $1+$2*60+$3*3600+$4*86400}' 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-10T20:55:10.623

我已经实现了一个 100% 的 bash 解决方案，如下所示：

```
#!/usr/bin/env bash

etime_to_seconds() {
  local time_string="$1"
  local time_string_array=()
  local time_seconds=0
  local return_status=0

  [[ -z "${time_string}" ]] && return 255

  # etime string returned by ps(1) consists one of three formats:
  #         31:24 (less than 1 hour)
  #      23:22:38 (less than 1 day)
  #   01-00:54:47 (more than 1 day)
  #

  # convert days component into just another element
  time_string="${time_string//-/:}"

  # split time_string into components separated by ':'
  time_string_array=( ${time_string//:/ } )

  # parse the array in reverse (smallest unit to largest)
  local _elem=""
  local _indx=1
  for(( i=${#time_string_array[@]}; i>0; i-- )); do
    _elem="${time_string_array[$i-1]}"
    # convert to base 10
    _elem=$(( 10#${_elem} ))
    case ${_indx} in
      1 )
        (( time_seconds+=${_elem} ))
        ;;
      2 )
        (( time_seconds+=${_elem}*60 ))
        ;;
      3 )
        (( time_seconds+=${_elem}*3600 ))
        ;;
      4 )
        (( time_seconds+=${_elem}*86400 ))
        ;;
    esac
    (( _indx++ ))
  done
  unset _indx
  unset _elem

  echo -n "$time_seconds"; return $return_status
}

main() {
  local time_string_array=( "31:24" "23:22:38" "06-00:15:30" "09:10" )

  for timeStr in "${time_string_array[@]}"; do

      local _secs="$(etime_to_seconds "$timeStr")"
      echo "           timeStr: "$timeStr""
      echo "  etime_to_seconds: ${_secs}"
  done

}

main 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-27T01:31:36.540

```
[[ $(ps -o etime= REPLACE_ME_WITH_PID) =~ ((.*)-)?((.*):)?(.*):(.*) ]]
printf "%d\n" $((10#${BASH_REMATCH[2]} * 60 * 60 * 24 + 10#${BASH_REMATCH[4]} * 60 * 60 + 10#${BASH_REMATCH[5]} * 60 + 10#${BASH_REMATCH[6]})) 
```

*纯*BASH。BASH_REMATCH 变量需要 BASH 2+ (?)。正则表达式匹配任何输入并将匹配的字符串放入数组 BASH_REMATCH 中，其中的部分用于计算秒数。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-23T22:06:29.387

这是一个 PHP 替代方案，可读且经过完全单元测试：

```
//Convert the etime string $s (as returned by the `ps` command) into seconds
function parse_etime($s) {
    $m = array();
    preg_match("/^(([\d]+)-)?(([\d]+):)?([\d]+):([\d]+)$/", trim($s), $m); //Man page for `ps` says that the format for etime is [[dd-]hh:]mm:ss
    return
        $m[2]*86400+    //Days
        $m[4]*3600+     //Hours
        $m[5]*60+       //Minutes
        $m[6];          //Seconds
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-12-15T08:49:30.733

```
#!/bin/bash
echo $1 | sed 's/-/:/g' |  awk -F $':' -f <(cat - <<-'EOF'
  {
    if (NF == 1) {
        print $1
    }
    if (NF == 2) {
        print $1*60 + $2
    }
    if (NF == 3) {
        print $1*60*60 + $2*60 + $3;
    }
    if (NF == 4) {
        print $1*24*60*60 + $2*60*60 + $3*60 + $4;
    }
    if (NF > 4 ) {
        print "Cannot convert datatime to seconds"
        exit 2
    }
  }
EOF
) < /dev/stdin 
```

然后运行使用：

```
ps -eo etime | ./script.sh 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-03T18:47:45.397

红宝石版本：

```
def psETime2Seconds(etime)
  running_secs = 0
  if etime.match(/^(([\d]+)-)?(([\d]+):)?([\d]+):([\d]+)$/)
    running_secs += $2.to_i * 86400 # days
    running_secs += $4.to_i * 3600  # hours
    running_secs += $5.to_i * 60    # minutes
    running_secs += $6.to_i         # seconds
  end
  return running_secs
end 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-03-12T06:33:52.753

另一个 bash 选项作为函数；使用 tac 和 bc 进行数学运算。

```
function etime2sec () {
   # 21-18:26:30
   #    15:28:37
   #       48:14
   #       00:01
etimein=$1
hassec=no ; hasmin=no ; hashr=no ; hasday=no
newline=`echo "${etimein}" | tr ':' '-' | tr '-' ' ' | tac -s " " | tr '\n' ' '`
for thispiece in $(echo "${etimein}" | tr ':' '-' | tr '-' ' ' | tac -s " " | tr '\n' ' ') ; do
  if [[ $hassec = no ]] ; then
    totsec=$thispiece
    hassec=yes
  elif [[ $hasmin = no ]] ; then
    totsec=`echo "$totsec + ($thispiece * 60)" | bc`
    hasmin=yes
  elif [[ $hashr = no ]] ; then
    totsec=`echo "$totsec + ($thispiece * 3600)" | bc`
    hashr=yes
  elif [[ $hasday = no ]] ; then
    totsec=`echo "$totsec + ($thispiece * 86400)" | bc`
    hashr=yes
  fi
done
echo $totsec
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-25T19:57:40.170

我只需要添加我的版本，很大程度上基于@andor 的优雅 perl one-liner（漂亮的 perl 代码！）

*   时间：自开始以来的总 CPU 时间（？或它的一些计算，如果 cpu 使用率下降，它会衰减？我不确定....虽然高数字表示 cpu 密集型进程）
*   etime：自进程启动以来经过的总时间
*   tail 的 2 种方法：在 linux 上：`tail +2`不起作用。在solaris上，`tail -n +2`不起作用。所以我尝试两者来确定。

这是计算时间的方法，以及如何根据进程的平均 CPU 使用率对进程进行排序

```
ps -eo pid,comm,etime,time | { tail +2 2>/dev/null || tail -n +2 ;} | perl -ane '
    @e=reverse split(/[:-]/,$F[2]); $se=$e[0]+$e[1]*60+$e[2]*3600+$e[3]*86400;
    @t=reverse split(/[:-]/,$F[3]); $st=$t[0]+$t[1]*60+$t[2]*3600+$t[4]*86400; 
    if ( $se == 0 ) { $pct=0 ; } else { $pct=$st/$se ;};
    printf "%s\t%s\t%s(%sseconds)\t%s(%sseconds)\t%.4f%%\n",$F[0],$F[1],$F[2],$se,$F[3],$st,$pct*100;
   '  | sort -k5,5n 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-13T13:59:08.893

适用于 AIX 7.1：

```
ps -eo etime,pid,comm | awk '{if (NR==1) {print "-1 ",$0} else {str=$1; sub(/-/, ":", str="0:0:"str); n=split(str,f,":"); print 86400*f[n-3]+3600*f[n-2]+60*f[n-1]+f[n]," ",$0}}' | sort -k1n 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-05-02T17:02:13.407

Python的一个版本：

```
ex=[
    '21-18:26:30',
    '06-00:15:30',
    '15:28:37',
    '48:14',
    '00:01'
    ]

def etime_to_secs(e):
    t=e.replace('-',':').split(':')
    t=[0]*(4-len(t))+[int(i) for i in t]
    return t[0]*86400+t[1]*3600+t[2]*60+t[3]

for e in ex:
    print('{:11s}: {:d}'.format(e, etime_to_secs(e))) 
```

# jquery - 可以在 FullCalendar.js 插件中隐藏当前月份之前的几天

> ID：14652447
> 
> 赞同：1
> 
> 时间：2013-02-01T18:10:06.333
> 
> 标签：jquery, fullcalendar

我正在使用 arshaw.com [fullcalendar](http://arshaw.com/fullcalendar/) jQuery 插件。默认情况下，它显示当前月份的天数，但它也显示（上个月和下个月）之前和之后的几天，以填充从星期日到星期六的整个网格。

有没有办法隐藏这些额外的天数，所以日历月视图只显示当前月份的天数，而将其他空格留空，或者至少有一种方法可以隐藏在不同月份注册的事件，而不是在实际月份.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:09:39.090

在您的事件生成器中，跳过不在当月的事件。然后加

```
.fc-other-month .fc-day-number {display:none;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T15:45:05.187

尝试这个。它将隐藏日期，但不会隐藏其他月份过去和即将发生的事件：

```
.fc-day-number.fc-other-month {
    opacity: 0;
    filter: alpha(opacity=0); /* for IE */
} 
```

# visual-studio-2010 - OpenCV 2.4.3 在 Visual Studio 2010 上构建失败，gen_java.py 中的错误

> ID：14652455
> 
> 赞同：1
> 
> 时间：2013-02-01T18:10:18.117
> 
> 标签：visual-studio-2010, opencv, build

我已经下载了 OpenCV 2.4 的源代码（我认为是 2.4.3），在上面运行了 Cmake，我正在生成一个 VS2010 解决方案文件。

编译 cmake 生成的解决方案文件时，构建失败并显示以下错误消息：

```
2>------ Build started: Project: opencv_java, Configuration: Debug Win32 ------
2>  Building Custom Rule C:/temp/opencv-2.4/software/src/modules/java/CMakeLists.txt
2>  CMake does not need to re-run because C:\temp\opencv-2.4\software\src\Release\modules\java\CMakeFiles\generate.stamp is up-to-date.
2>  Generating core.cpp
2>    File "C:/temp/opencv-2.4/software/src/modules/java/generator/gen_java.py", line 1285
2>      epilogue = "  ".join(c_epilogue) + ("\n        " if c_epilogue else ""), \
                    2>                                                        ^
                    2>  SyntaxError: invalid syntax
                    2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5): error MSB6006: "cmd.exe" exited with code 1. 
```

有谁知道这里发生了什么以及如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:46:34.030

事实证明，问题出在本地 python 安装。然后我安装了较新的版本 Python 2.7，设置了相关路径并再次尝试，这次 OpenCV 编译正常。

希望这可以帮助处于类似情况的其他人。

# php - 试图通过将 php.ini 放入 wordpress 根目录来打开 allow_url_fopen 不起作用

> ID：14652465
> 
> 赞同：3
> 
> 时间：2013-02-01T18:10:42.203
> 
> 标签：php, wordpress, cpanel

好的，我正在构建一个精美的裤子 wordpress 主题，部分主题有 php 获取图像宽度并使用这些数字来调整页面元素的大小。它在我的本地机器上运行良好，但是当我使用 cpanel 将主题放在托管服务器上时，它不起作用。

我收到这个错误

```
Warning: getimagesize() [function.getimagesize]: http:// wrapper is disabled in the server configuration by allow_url_fopen=0 in /home/yoursite/public_html/wpsite/wp-content/themes/yourtheme/styles/login.php on line 7

Warning: getimagesize(http://yoursite.com/wpsite/wp-content/uploads/2012/11/logo1.png) [function.getimagesize]: failed to open stream: no suitable wrapper could be found in /home/yoursite/public_html/wpsite/wp-content/themes/yourtheme/styles/login.php on line 7 
```

所以我想如果我在 wordpress 的根目录中创建一个 php.ini 文件，其中包含以下内容：

```
[PHP]
allow_url_fopen = 1 
```

那会奏效，但不会。

反正有没有让这个工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T18:19:11.483

尝试将此代码添加到您的 .htaccess 文件中：

```
php_value allow_url_fopen On 
```

如果它不起作用，您需要向您的托管服务提供商询问您的 php.ini 文件位置（如果存在）。如果没有，请他们在全局 php.ini 文件中为您设置。通常是 /etc/php.ini

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T18:50:23.593

其他插件开发人员似乎[使用 cURL](http://wordpress.org/support/topic/solved-allow_url_fopen-php-permissions)来绕过 allow_url_fopen 限制。您最好找到一种无需启用 allow_url_fopen 即可使您的主题正常工作的方法。许多提供商出于安全原因将其关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T12:59:30.550

这些似乎都不适用于我的主机，这是针对 wordpress 主题的，所以它必须是一个适用于所有人的修复程序，所以我只使用了 jQuery。如果用户关闭了他们的 javascript，它将无法正常工作，但我可以忍受。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-21T21:15:41.493

使用 cURL 将绕过该问题。可以在此处找到一些可能有用的信息和详细信息：

[PHP 卷曲和 Cookie](https://stackoverflow.com/questions/12885538/php-curl-and-cookies)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-13T16:20:35.953

如果您使用的是 cPanel 11.58+，这是 cPanel 中的一个选项。您可以按照以下步骤启用此功能： 1\. 登录到 cPanel。2\. 选择“软件”部分下的“MultiPHP INI 编辑器” 3\. 从下拉列表中选择要进行此更改的域 4\. 第一个选项将是“allow_url_fopen”。

如果您想在 WHM 中进行上述更改，您可以在 multiphpini 编辑器中进行类似的操作。

但是，如果您使用的是较旧的 cPanel 版本，则必须手动编辑 php.ini。

[https://documentation.cpanel.net/display/ALD/MultiPHP+INI+Editor+for+cPanel](https://documentation.cpanel.net/display/ALD/MultiPHP+INI+Editor+for+cPanel)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-09-12T22:52:37.583

```
allow_url_fopen = on 
```

添加到 php.ini 或 php5.ini

与 Joomla 3.1 一起使用希望有所帮助。

# grails - 具有不同持久性范围的 grails 服务

> ID：14652469
> 
> 赞同：6
> 
> 时间：2013-02-01T18:10:58.563
> 
> 标签：grails, grails-orm, grails-plugin, grails-2.0

我有一个域，在该域​​中有超过 25 个成员。该成员的价值将来自一种形式。但是填满那些太多的领域感觉很糟糕。所以我想把输入形式分成不同的阶段。

我创建了一个名为 FormObject 的类，其中包含所有所需输入的字段。问题是没有办法在页面之间传递这个对象。

我在想也许具有会话范围的服务将允许我保留对 FormObject 的引用，并且只需从服务中调用一个方法来再次获取它。

```
<g:set var="formService" value="${new FormService()}" /> 

class FormService{
    static transactional = false
    static scope = "session"

    FormObject myObject = new FormObject()

    def resetForm(){
        myObject=new FormObject()
    }

    def getForm(){
        return myObject
    }
} 
```

并将其用于 GSP 之类的

```
<g:set var="myForm" value="${formService.getForm()}" /> 
```

但是，数据不会在页面之间保留。

如果我将 myObject 属性定义为静态，它确实会持续存在，但我担心当它投入生产时，myObject 将在所有用户之间共享。

谁能确认如果我将其设为静态会发生什么？每个会话会有一个静态表单对象还是只有一个静态表单对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:10:58.563

我得到了解决方案....

第一种方法很接近，除了您要创建一个新实例而不是将其作为 Spring bean 获取，因此它是会话范围的事实并没有发挥作用。一般来说，如果您的工作流程跨越两个以上的页面，您应该查看 WebFlow，但这可能是一个比您需要的更大的解决方案。

我会跳过服务包装器并将对象存储在会话中。这里的风险是，如果发生某些事情并且您没有删除它们，您最终可能会用对象污染您的会话，因此您应该处理它。

在第一个控制器动作中，确保对象在那里：

```
def action1 = {
   ... regular work
   session.formObject = new FormObject()
   // return model, e.g.
   [foo: bar]
} 
```

在普惠制中你可以参考它

```
${session.formObject} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:41:18.713

我可能会采取另一种方法并通过控制器通过模型提供表单对象 - 所有持久性问题也将通过控制器完成，因此您的第一种方法将按预期工作......

```
function showForm() {
  render[view: 'view', model: [serviceForm: formService.form]]
}

function persistForm(MyCommand cmd) {
  // check cmd for errors
  if(cmd.hasErrors()) {
    // return the MyCommand object for error yielding
    render(view: 'view', model: [cmd: cmd]]
  }
  // persist cmd fields to formService.form object
  formService.form.field = cmd.field
} 
```

这应该按预期工作

# python - 在杂乱的网站上使用 Beautiful Soup 进行 Python Web-Scraping

> ID：14652473
> 
> 赞同：0
> 
> 时间：2013-02-01T18:11:08.320
> 
> 标签：python, web-scraping, screen-scraping, beautifulsoup

我想从[这个站点](http://mesonet.agron.iastate.edu/cow/?syear=2009&smonth=9&sday=12&shour=12&eyear=2012&emonth=9&eday=12&ehour=12&wfo=ABQ&wtype%5B%5D=TO&hail=1.00&lsrbuffer=15&ltype%5B%5D=T&wind=58)抓取以下三个数据点：%verified、FAR 的数值和 POD 的数值。我试图在 BeautifulSoup 中做到这一点，但我没有在站点遍历方面练习过，所以我无法描述这些元素的位置。

这样做最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:22:59.677

如果您还没有安装[Firebug](https://getfirebug.com/) for Firefox 并使用它来检查页面的 html 源代码。

使用`urllib`和[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)的组合来处理 html 的检索和解析。这是一个简短的例子：

```
import urllib
from BeautifulSoup import BeautifulSoup

url = 'http://mesonet.agron.iastate.edu/cow/?syear=2009&smonth=9&sday=12&shour=12&eyear=2012&emonth=9&eday=12&ehour=12&wfo=ABQ&wtype[]=TO&hail=1.00&lsrbuffer=15&ltype[]=T&wind=58'
fp = urllib.urlopen(url).read()
soup = BeautifulSoup(fp)

print soup 
```

从这里开始，我提供的链接应该为您提供如何检索您感兴趣的元素的良好开端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:12:01.410

我最终自己解决了这个问题——我正在使用类似于 isedev 的策略，但我希望我能找到一种更好的方法来获取“已验证”数据：

```
import urllib2
from bs4 import BeautifulSoup

wfo = list()

def main():
    wfo = [i.strip() for i in open('C:\Python27\wfo.txt') if i[:-1]]
    soup = BeautifulSoup(urllib2.urlopen('http://mesonet.agron.iastate.edu/cow/?syear=2009&smonth=9&sday=12&shour=12&eyear=2012&emonth=9&eday=12&ehour=12&wfo=ABQ&wtype%5B%5D=TO&hail=1.00&lsrbuffer=15&ltype%5B%5D=T&wind=58').read())
    elements = soup.find_all("span")
    find_verify = soup.find_all('th')

    far= float(elements[1].text)
    pod= float(elements[2].text)
    verified = (find_verify[13].text[:-1]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:40:04.483

就像 That1Guy 所说的，你需要分析源页面结构。在这种情况下，你很幸运......你正在寻找的数字使用红色特别突出显示`<span>`。

这将执行此操作：

```
>>> import urllib2
>>> import lxml.html
>>> url = ... # put your URL here
>>> html = urllib2.urlopen(url)
>>> soup = lxml.html.soupparser.fromstring(html)
>>> elements = soup.xpath('//th/span')
>>> print float(elements[0].text) # FAR
0.67
>>> print float(elements[1].text) # POD
0.58 
```

Note`lxml.html.soupparser`几乎等同于`BeautifulSoup`解析器（我现在不需要处理）。

# google-app-engine - Youtube 直接 - 本地服务器运行错误

> ID：14652474
> 
> 赞同：0
> 
> 时间：2013-02-01T18:11:08.067
> 
> 标签：google-app-engine, youtube

遵循 Youtube Direct 的“入门”说明后，在尝试了 Eclipse、jdks 和插件的大量组合后，我无法让本地服务器运行。下面的错误让我这几天有点困惑。任何帮助表示赞赏，谢谢。

```
1/02/2013 11:26:00 AM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
01/02/2013 11:26:00 AM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed C:\Users\R\workspace\ytd\war\WEB-INF/appengine-web.xml
01/02/2013 11:26:00 AM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed C:\Users\R\workspace\ytd\war\WEB-INF/web.xml
01/02/2013 11:26:00 AM com.google.appengine.tools.development.SystemPropertiesManager setSystemProperties
INFO: Overwriting system property key 'java.util.logging.config.file', value 'C:\Users\R\Documents\Eclipse EE\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.7.4\appengine-java-sdk-1.7.4\config\sdk\logging.properties' with value 'WEB-INF/logging.properties' from 'C:\Users\R\workspace\ytd\war\WEB-INF\appengine-web.xml'
01/02/2013 11:26:01 AM com.google.apphosting.utils.jetty.JettyLogger info
INFO: jetty-6.1.x
01/02/2013 11:26:01 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: failed com.google.appengine.tools.development.DevAppEngineWebAppContext@16614e7{/,C:\Users\R\workspace\ytd\war}: java.lang.UnsupportedClassVersionError: com/google/ytd/guice/GuiceServletConfig : Unsupported major.minor version 51.0
01/02/2013 11:26:01 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: failed JettyContainerService$ApiProxyHandler@e66f56: java.lang.UnsupportedClassVersionError: com/google/ytd/guice/GuiceServletConfig : Unsupported major.minor version 51.0
01/02/2013 11:26:01 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Error starting handlers
java.lang.UnsupportedClassVersionError: com/google/ytd/guice/GuiceServletConfig : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.mortbay.jetty.handler.ContextHandler.loadClass(ContextHandler.java:1101)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initListener(WebXmlConfiguration.java:630)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initWebXmlElement(WebXmlConfiguration.java:368)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initialize(WebXmlConfiguration.java:289)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.configure(WebXmlConfiguration.java:222)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.configureWebApp(WebXmlConfiguration.java:180)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1247)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:205)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:232)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:157)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245)
01/02/2013 11:26:01 AM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Started SelectChannelConnector@127.0.0.1:8888
01/02/2013 11:26:01 AM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The server is running at http://localhost:8888/
01/02/2013 11:26:01 AM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The admin console is running at http://localhost:8888/_ah/admin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:11:52.353

这很可能是因为您正在针对与您为项目指定的版本不同的 JRE/JDK 版本进行编译。

右键单击您的项目并选择属性。从树形视图中选择 Java Compiler 元素，并确保将“编译器合规性级别”设置为您在机器上安装和/或配置项目的 JRE/JDK 的相同版本。

# javascript - 将 onclick 添加到动态创建 li 标记

> ID：14652475
> 
> 赞同：0
> 
> 时间：2013-02-01T18:11:09.760
> 
> 标签：javascript

我希望能够将 onclick 处理程序添加到动态创建的 div 中。

这是我创建元素的方式：

```
function add_remove_roll_func(){
    for (var i = 0; i<3; i++){
    li_dice_side_one = createElementWithClass('li',arguments[i]);
    add_remove_roll.appendChild(li_dice_side_one);
    document.getElementById("ul");
  }
    }
 add_remove_roll = createElementWithOutClass('ul');
    dice_toolbar_wrapper_close.appendChild(add_remove_roll);
    document.getElementById("dice-content-wrapper");

    add_remove_roll_func("add","remove","roll"); 
```

我希望添加删除和滚动事件调用不同的函数。

我试过做`add_remove_roll_func("'add' 'onclick="function'...)` 但这并没有自动神奇地工作:)。

我可以用 jQuery 做到这一点，但我需要用原生 javascript 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:19:59.270

什么是 add_remove_roll_func？！

您需要使用 addEventListener() 才能将 onclick 或任何其他处理程序添加到事件中。例子：

```
el.addEventListener("click", liCliked, false); 

function liCliked(){
    // doing important things
} 
```

# sql - 如何在 DO 块中执行选择查询？

> ID：14652477
> 
> 赞同：31
> 
> 时间：2013-02-01T18:11:14.297
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.1, generate-series

我想将下面的 SQL 代码从 MS SQL-Server 移植到 PostgreSQL。

```
DECLARE @iStartYear integer
DECLARE @iStartMonth integer

DECLARE @iEndYear integer
DECLARE @iEndMonth integer

SET @iStartYear = 2012
SET @iStartMonth = 4

SET @iEndYear = 2016
SET @iEndMonth = 1

;WITH CTE 
AS
(
    SELECT 
         --@iStartYear AS TheStartYear 
         @iStartMonth AS TheRunningMonth 
        ,@iStartYear AS TheYear  
        ,@iStartMonth AS TheMonth 

    UNION ALL 

    SELECT 
         --CTE.TheStartYear AS TheStartYear 
         --@iStartYear AS TheStartYear 
         CTE.TheRunningMonth + 1 AS TheRunningMonth 
         --,CTE.TheStartYear + (CTE.TheRunningMonth / 12) AS TheYear 
        ,@iStartYear + (CTE.TheRunningMonth / 12) AS TheYear 
        ,(CTE.TheMonth + 1 -1) % 12 + 1 AS TheMonth
    FROM CTE 
    WHERE (1=1) 

    AND
    (
        CASE 
            --WHEN (CTE.TheStartYear + (CTE.TheRunningMonth / 12) ) < @iEndYear 
            WHEN (@iStartYear + (CTE.TheRunningMonth / 12) ) < @iEndYear 
                THEN 1 
            --WHEN (CTE.TheStartYear + (CTE.TheRunningMonth / 12) ) = @iEndYear 
            WHEN (@iStartYear + (CTE.TheRunningMonth / 12) ) = @iEndYear 
                THEN 
                    CASE 
                        WHEN ( (CTE.TheMonth + 1 -1) % 12 + 1 ) <= @iEndMonth 
                            THEN 1 
                        ELSE 0 
                    END 
            ELSE 0 
        END = 1 
    )
)
SELECT * FROM CTE 
```

这就是我到目前为止所拥有的。

```
DO $$
    DECLARE r record;
    DECLARE i integer;

    DECLARE __iStartYear integer;
    DECLARE __iStartMonth integer;

    DECLARE __iEndYear integer;
    DECLARE __iEndMonth integer;

    DECLARE __mytext character varying(200);
BEGIN
    i:= 5;

    --RAISE NOTICE  'test'
    --RAISE NOTICE  'test1' || 'test2';

    __mytext := 'Test message';
    --RAISE NOTICE __mytext;
    RAISE NOTICE '%', __mytext;
    RAISE NOTICE '% %', 'arg1', 'arg2';

    --SQL Standard:  "CAST( value AS text )" [or varchar]
    --PostgreSQL short-hand:  "value::text"
    __mytext := 'Test ' || i::text;
    RAISE NOTICE '%', __mytext;

    __mytext := 'mynumber: ' || CAST(i as varchar(33)) || '%';
    RAISE NOTICE '%', __mytext;

    __iStartYear := 2012;
    __iStartMonth := 4;

    __iEndYear := 2016;
    __iEndMonth := 1;

    --PERFORM  'abc';
    SELECT 'abc';

    -- SELECT  __iStartMonth AS TheRunningMonth; 

    -- RAISE NOTICE  'The raise_test() function began.' + CAST( i AS text ) ;
    -- FOR r IN SELECT table_schema, table_name FROM information_schema.tables WHERE table_type = 'VIEW' AND table_schema = 'public'
    -- LOOP
    --  EXECUTE 'GRANT ALL ON ' || quote_ident(r.table_schema) || '.' || quote_ident(r.table_name) || ' TO webuser';
    --END LOOP;
END$$; 
```

如您所见，当我想使用加薪通知功能“打印”时遇到了一些问题。但我设法通过谷歌解决了这个问题。

根据以前的经验，我可以看出 Postgres 语法与 CTE 非常相似，我只需要在 CTE 之前添加一个递归，所以唯一真正的问题是我必须定义一些变量，我需要一个 do 块。

由此产生了一个简单的问题：
如何在 do 块中“执行”选择查询？我想在 pgAdmin3 的“数据输出”选项卡中查看结果。
而且我不想创建一个函数。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-01T18:55:08.210

### `DO`命令与 PL/pgSQL 函数

该[`DO`](https://www.postgresql.org/docs/current/sql-do.html)命令不返回行。您可以发送`NOTICES`或发送[`RAISE`](https://www.postgresql.org/docs/current/plpgsql-errors-and-messages.html)其他消息（使用语言 plpgsql），或者您可以写入（临时）表，然后再`SELECT`从该表中解决此问题。

但实际上，[创建一个 (plpgsql) 函数](https://www.postgresql.org/docs/current/sql-createfunction.html)，您可以在其中使用[`RETURNS`子句或`OUT`/`INOUT`参数](https://www.postgresql.org/docs/current/sql-createfunction.html)定义返回类型，并以各种方式[从函数返回。](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)

如果您不想为其他连接保存和显示某个功能，请考虑使用“临时”功能，这是一个未记录但已完善的功能：

*   [如何在 PostgreSQL 中创建临时函数？](https://stackoverflow.com/questions/4990622/how-to-create-a-temporary-function-in-postgresql/31095452#31095452)

### [`generate_series()`](https://www.postgresql.org/docs/current/functions-srf.html)对于手头的问题

对于手头的问题，您似乎不需要*任何*这些。改用这个简单的查询：

```
SELECT row_number() OVER ()    AS running_month
     , extract('year'  FROM m) AS year
     , extract('month' FROM m) AS month
FROM   generate_series(timestamp '2012-04-01'
                     , timestamp '2016-01-01'
                     , interval '1 month') m; 
```

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_12&fiddle=461db5b0ab32e47cf54b2da0fa7fae25)*

为什么？

*   [在 PostgreSQL 中生成两个日期之间的时间序列](https://stackoverflow.com/questions/14113469/generating-time-series-between-two-dates-in-postgresql/46499873#46499873)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-02T08:01:48.750

这里有更多关于 Erwin 建议的临时表解决方法的详细信息，这应该是问题的真正答案，因为这个问题更适合“在开发过程中，如何快速编写带有选择的代码块并查看结果” 而不是解决这个实际查询（从一开始的根本问题是“如何快速开发/调试表值函数”）。

虽然我必须说我想对 generate_series 部分投票 100 次 ;)

可以将结果选择到临时表中，
然后从 do 块外的临时表中进行选择，
如下所示：

```
DO $$
    DECLARE r record;
    DECLARE i integer;

    DECLARE __iStartYear integer;
    DECLARE __iStartMonth integer;

    DECLARE __iEndYear integer;
    DECLARE __iEndMonth integer;

    DECLARE __mytext character varying(200);
BEGIN
    i:= 5;

    -- Using Raise:
    -- http://www.java2s.com/Code/PostgreSQL/Postgre-SQL/UsingRAISENOTICE.htm

    --RAISE NOTICE  'test'
    --RAISE NOTICE  'test1' || 'test2';

    __mytext := 'Test message';
    --RAISE NOTICE __mytext;
    RAISE NOTICE '%', __mytext;
    RAISE NOTICE '%', 'arg1' || 'arg2';
    RAISE NOTICE '% %', 'arg1', 'arg2';

    --SQL Standard:  "CAST( value AS text )" [or varchar]
    --PostgreSQL short-hand:  "value::text"
    __mytext := 'Test ' || i::text;
    RAISE NOTICE '%', __mytext;

    __mytext := 'mynumber: ' || CAST(i as varchar(33)) || '%';
    RAISE NOTICE '%', __mytext;

    __iStartYear := 2012;
    __iStartMonth := 4;

     __iEndYear := 2016;
     __iEndMonth := 1;

     --PERFORM  'abc';

     --CREATE TEMP TABLE mytable AS SELECT * FROM orig_table;

     --DROP TABLE table_name CASCADE;
     --DROP TABLE IF EXISTS table_name CASCADE;

     --DROP TABLE IF EXISTS tbl;
     --CREATE TEMP TABLE tbl AS SELECT 1 as a,2 as b,3 as c;

DROP TABLE IF EXISTS mytable;
CREATE TEMP TABLE mytable AS

WITH RECURSIVE CTE 
AS
(

        SELECT 
             --__iStartYear AS TheStartYear 
             __iStartMonth AS TheRunningMonth 
            ,__iStartYear AS TheYear  
            ,__iStartMonth AS TheMonth 

    UNION ALL 

        SELECT 
             --CTE.TheStartYear AS TheStartYear 
             --__iStartYear AS TheStartYear 
             CTE.TheRunningMonth + 1 AS TheRunningMonth 
            --,CTE.TheStartYear + (CTE.TheRunningMonth / 12) AS TheYear 
            ,__iStartYear + (CTE.TheRunningMonth / 12) AS TheYear 
            ,(CTE.TheMonth + 1 -1) % 12 + 1 AS TheMonth
        FROM CTE 
        WHERE (1=1) 

        AND
        (
            CASE 
                --WHEN (CTE.TheStartYear + (CTE.TheRunningMonth / 12) ) < __iEndYear 
                WHEN (__iStartYear + (CTE.TheRunningMonth / 12) ) < __iEndYear 
                    THEN 1 
                --WHEN (CTE.TheStartYear + (CTE.TheRunningMonth / 12) ) = __iEndYear 
                WHEN (__iStartYear + (CTE.TheRunningMonth / 12) ) = __iEndYear 
                    THEN 
                        CASE 
                            WHEN ( (CTE.TheMonth + 1 -1) % 12 + 1 ) <= __iEndMonth 
                                THEN 1 
                            ELSE 0 
                        END 
                ELSE 0 
            END = 1 
        )

)

SELECT * FROM CTE; 

    -- SELECT  __iStartMonth AS TheRunningMonth; 

     --RAISE NOTICE  'The raise_test() function began.' + CAST( i AS text ) ;
    --FOR r IN SELECT table_schema, table_name FROM information_schema.tables WHERE table_type = 'VIEW' AND table_schema = 'public'
    --LOOP
      --  EXECUTE 'GRANT ALL ON ' || quote_ident(r.table_schema) || '.' || quote_ident(r.table_name) || ' TO webuser';
    --END LOOP;
END$$;

SELECT * FROM mytable; 
```

这确实是快速将查询转换为表值函数版本的基础，看起来像这样：

```
-- SELECT * FROM tfu_V_RPT_MonthList(2012,1,2013,4);

CREATE OR REPLACE FUNCTION tfu_V_RPT_MonthList
( 
     __iStartYear integer
    ,__iStartMonth integer
    ,__iEndYear integer
    ,__iEndMonth integer
)
  RETURNS TABLE(
     TheRunningMonth integer
    ,TheYear integer
    ,TheMonth integer
) AS
$BODY$
DECLARE
-- Declare vars here
BEGIN
RETURN QUERY 

WITH RECURSIVE CTE 
AS
(

        SELECT 
             --__iStartYear AS TheStartYear 
             __iStartMonth AS TheRunningMonth 
            ,__iStartYear AS TheYear  
            ,__iStartMonth AS TheMonth 

    UNION ALL 

        SELECT 
             --CTE.TheStartYear AS TheStartYear 
             --__iStartYear AS TheStartYear 
             CTE.TheRunningMonth + 1 AS TheRunningMonth 
            --,CTE.TheStartYear + (CTE.TheRunningMonth / 12) AS TheYear 
            ,__iStartYear + (CTE.TheRunningMonth / 12) AS TheYear 
            ,(CTE.TheMonth + 1 -1) % 12 + 1 AS TheMonth
        FROM CTE 
        WHERE (1=1) 

        AND
        (
            CASE 
                --WHEN (CTE.TheStartYear + (CTE.TheRunningMonth / 12) ) < __iEndYear 
                WHEN (__iStartYear + (CTE.TheRunningMonth / 12) ) < __iEndYear 
                    THEN 1 
                --WHEN (CTE.TheStartYear + (CTE.TheRunningMonth / 12) ) = __iEndYear 
                WHEN (__iStartYear + (CTE.TheRunningMonth / 12) ) = __iEndYear 
                    THEN 
                        CASE 
                            WHEN ( (CTE.TheMonth + 1 -1) % 12 + 1 ) <= __iEndMonth 
                                THEN 1 
                            ELSE 0 
                        END 
                ELSE 0 
            END = 1 
        )

)

    SELECT * FROM CTE ;

END;
$BODY$
  LANGUAGE plpgsql VOLATILE

--ALTER FUNCTION dbo.tfu_v_dms_desktop(character varying) OWNER TO postgres; 
```

顺便说一句，看看 SQL-Server 代码膨胀来实现这一点：

```
SELECT 
     extract('year' FROM m) AS RPT_Year
    -- http://www.postgresql.org/docs/current/interactive/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE
    --,to_char(m, 'TMmon')
    --,to_char(m, 'TMmonth')
    ,to_char(m, 'Month') AS RPT_MonthName 
    ,m AS RPT_MonthStartDate
    ,m + INTERVAL '1 month' - INTERVAL '1 day' AS RPT_MonthEndDate 

FROM 
(
   SELECT 
        generate_series((2012::text || '-' || 4::text || '-01')::date, (2016::text || '-' || 1::text || '-01')::date, interval '1 month') AS m 
) AS g
; 
```

变成这样：

```
DECLARE @in_iStartYear integer
DECLARE @in_iStartMonth integer

DECLARE @in_iEndYear integer
DECLARE @in_iEndMonth integer

SET @in_iStartYear = 2012
SET @in_iStartMonth = 12

SET @in_iEndYear = 2016
SET @in_iEndMonth = 12

DECLARE @strOriginalLanguage AS nvarchar(200) 
DECLARE @dtStartDate AS datetime 
DECLARE @dtEndDate AS datetime 

SET @strOriginalLanguage = (SELECT @@LANGUAGE) 

SET @dtStartDate = DATEADD(YEAR, @in_iStartYear - 1900, 0) 
SET @dtStartDate = DATEADD(MONTH, @in_iStartMonth -1, @dtStartDate) 

SET @dtEndDate = DATEADD(YEAR, @in_iEndYear - 1900, 0) 
SET @dtEndDate = DATEADD(MONTH, @in_iEndMonth -1, @dtEndDate) 

SET LANGUAGE 'us_english'

;WITH CTE_YearsMonthStartAndEnd 
AS
(
        SELECT
             YEAR(@dtStartDate) AS RPT_Year 
            ,DATENAME(MONTH, @dtStartDate) AS RPT_MonthName 
            ,@dtStartDate AS RPT_MonthStartDate  
            ,DATEADD(DAY, -1, DATEADD(MONTH, 1, @dtStartDate)) AS RPT_MonthEndDate 

    UNION ALL

        SELECT 
             YEAR(DATEADD(MONTH, 1, CTE_YearsMonthStartAndEnd.RPT_MonthStartDate)) AS RPT_Year 
            ,DATENAME(MONTH, DATEADD(MONTH, 1, CTE_YearsMonthStartAndEnd.RPT_MonthStartDate)) AS RPT_MonthName 
            ,DATEADD(MONTH, 1, CTE_YearsMonthStartAndEnd.RPT_MonthStartDate) AS RPT_MonthStartDate 
            ,DATEADD(DAY, -1, DATEADD(MONTH, 1, DATEADD(MONTH, 1, CTE_YearsMonthStartAndEnd.RPT_MonthStartDate)) ) AS RPT_MonthEndDate 

        FROM CTE_YearsMonthStartAndEnd 
        WHERE DATEADD(MONTH, 1, CTE_YearsMonthStartAndEnd.RPT_MonthStartDate) <= @dtEndDate 
)

SELECT 
     RPT_Year 
    ,RPT_MonthName 
    ,RPT_MonthStartDate 
    ,RPT_MonthEndDate 
FROM CTE_YearsMonthStartAndEnd 
```

（感谢欧文！）；）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-03-24T15:29:54.603

要从`DO`匿名代码块中获取记录，您可以使用以下技术：

```
DO $$
DECLARE
  _query text;
  _cursor CONSTANT refcursor := '_cursor';
BEGIN
  _query := 'SELECT * FROM table_name';
  OPEN _cursor FOR EXECUTE _query;
END
$$;

FETCH ALL FROM _cursor; 
```

**注意**

1.  游标在事务范围内可见，因此您应该在一个事务中使用它。
2.  游标变量的名称应与文本常量相同；

更多关于[游标](https://www.postgresql.org/docs/12/plpgsql-cursors.html)的信息。技术来源[在这里](https://pgcookbook.ru/article/return_from_anonymous_block.html)（俄语）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-26T07:59:40.400

这是一个不太离题的（恕我直言），可能会有所帮助......

我最近遇到了这个问题，我需要在事务中执行一些语句并返回一些（非常少的）数据，这些数据将向 PHP 脚本指示事务是如何处理的（受影响的记录和任何自定义错误代码）。

坚持 RAISE NOTICE 和 RAISE [EXCEPTION] 范例，我发现最好在返回的 NOTICE/EXCEPTION 中返回 JSON 字符串。这样，PHP 应用程序需要做的就是使用 pg_last_notice() 或 pg_last_error() 来获取和解码 JSON 字符串。

例如

```
RAISE EXCEPTION '{"std_response":{"affected":%,"error":%}}', var_affected, var_error_id; 
```

或者

```
RAISE NOTICE '{"std_response":{"affected":%,"error":%}}', var_affected, var_error_id; 
```

由于返回的名为“std_response”的 JSON 对象实际上是所有这些类型脚本的标准响应，因此编写单元测试非常容易，因为加载和执行 SQL 的包装函数将始终返回一个“std_response”对象，该对象可以对其值进行测试。

仅当您在 RAISE 消息中返回 TINY 数据片段时才应使用此范例（尽管我已经看到以这种方式返回多达 96,000 个字符 - 不确定限制是多少）。如果您需要返回更大的数据集，则需要将结果集保存到表中，但至少您仍然可以使用此范例来准确隔离哪些记录属于被调用的 SQL。即将数据放入带有 UUID 的表中，并在 NOTICE 中返回 UUID，如下所示：

```
RAISE NOTICE '{"table_name":{"affected":%,"uuid":%}}', var_affected, var_uuid; 
```

这样做的好处是，由于它仍然是结构化的并描述了从哪个表中选择数据，它也可以与应用程序中的单元测试一起使用。

（或者，您也可以使用 Postgresql 将结果集存储在 memcache 中，并让应用程序从那里获取数据集，这样您就不必处理磁盘 I/O 来存储应用程序的结果集将用于生成一些 HTML，然后在脚本完成后立即丢弃）

# c# - 在c#中执行sql命令的最佳方法

> ID：14652478
> 
> 赞同：-2
> 
> 时间：2013-02-01T18:11:20.303
> 
> 标签：c#, sql-server, sqlcommand, sqlcmd

我需要对 sql-server 2008 R2 做一些 sql 查询。命令是：

```
C:> sqlcmd –S
.\APPSDB
1> use
Example_database
2> go
1> Select SiteName, SiteID, Platform, Description, AdminUser from dbo.ExampleInfo
2> go 
```

我想用 C# 开发一个控制台应用程序来运行这个查询。我的问题是：这样做的适当方法是什么？我应该将上述命令放入 SQL 脚本并使用进程来执行此脚本，还是应该使用诸如 C# SQL API 之类的标准`SqlConnection`来执行？就像是：

```
string cmdStr = @"....." //the above command
using (var connection = new SqlConnection(ConnectionString))
{
    using (var command = connection.CreateCommand())
    {
        connection.Open();
        command.CommandText = cmdStr;
        using (var reader = command.ExecuteReader())
        {
            do
            {
                while (reader.Read())
                {             
                    Console.WriteLine(reader["SiteName"].ToString());
                    Console.WriteLine(reader["SiteName"].ToString());
                    // the rest
                }
            Console.WriteLine("--next command--");
        } while (reader.NextResult());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:13:50.877

没有必`sqlcmd`要这样做。

该`CommandText`属性应该只包含这样的查询：

```
string cmdStr = @"Select SiteName, SiteID, Platform, Description, AdminUser 
                  from dbo.ExampleInfo"; 
```

# sorting - 在 ElasticSearch 中使用自定义排序字段进行推销

> ID：14652479
> 
> 赞同：0
> 
> 时间：2013-02-01T18:11:22.447
> 
> 标签：sorting, mapping, elasticsearch

我的公司希望通过手动指定前几个搜索结果，然后是按其他一些标准排序的所有剩余搜索结果来对搜索结果进行商品化。

一种解决方案是在我们希望首先出现的所有记录上创建一个新的数字字段，然后从其他记录中省略它，然后最后对缺少值的字段进行排序。

但这需要为每个商品搜索创建一个新字段。如果索引映射中有数百甚至数千个仅适用于少数记录的字段，搜索是否会变得低效？

对于这个问题，还有其他我们没有想到的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:50:41.177

老实说，我不确定 ES 会对这么多领域有何反应……但这听起来有点吓人。

如何创建单个字段`merchandised_search`，然后对 匹配术语过滤器的任何文档 执行[constant_filters_score提升？](http://www.elasticsearch.org/guide/reference/query-dsl/custom-filters-score-query.html)

如果你使提升足够大，匹配过滤器的文档将自动排序到列表的顶部，而其他所有内容都会正常排序。只需在 中使用不同的值，您就可以进行不同的商品搜索`merchandised_search`。而且过滤器很快，所以它不应该对你的表现造成太大的伤害。

像这样的东西：

```
{
   "custom_filters_score" : {
       "query" : {
           "match" : {"field1" : "test text to query"}
       },
       "filters" : [
            {
               "filter" : { "term" : { "merchandised_search" : "search1" } },
               "boost" : "10"
            }
       ],
       "score_mode" : "first"
   }
} 
```

# android - 如何开发可以发送短信的应用程序？

> ID：14652482
> 
> 赞同：-2
> 
> 时间：2013-02-01T18:11:38.803
> 
> 标签：android, text, msg

> **可能重复：**
> [使用本机短信应用程序发送短信而不启动自身](https://stackoverflow.com/questions/12894120/using-the-native-sms-app-to-send-an-sms-without-launching-itself)

我注意到许多应用程序都能够向任何手机发送短信，通常带有代码或链接或其他东西。

例如 Foursquare，当我在我的电脑上登录时，它在我的手机上给我发了一条短信，上面写着“欢迎来到 Foursquare '我的名字'！点击这里下载应用程序，尽情探索吧！[https://foursquare.com/得到](https://foursquare.com/get)“

是否有任何书籍或网站（任何资源）可以向我解释如何做到这一点？我想制作一个可以发送这样的短信的应用程序。但我不知道从哪里开始。我是一名前端开发人员，所以我只知道简单的代码，如 HTML、CSS、JavaScript 和 PHP。我以前也用java编程过，我愿意为此学习任何新的编程语言。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:17:24.443

[http://developer.android.com/reference/android/telephony/SmsManager.html](http://developer.android.com/reference/android/telephony/SmsManager.html)

android API 文档真的很容易搜索..

# .net - 为什么 regasm /regfile 似乎不完整？

> ID：14652483
> 
> 赞同：4
> 
> 时间：2013-02-01T18:11:39.690
> 
> 标签：.net, registry, installshield

我有一个需要在安装时注册的 .NET 程序集。我注意到注册表在`regasm`直接使用与通过`regasm`注册表脚本安装时存在细微差别。

这是我的测试：

我导出原始 HKCR 配置单元，然后运行：`regasm my.dll`

从那里，我导出了随后的 HKCR hive 和性能差异。

然后我将该差异与输出进行比较`regasm my.dll /regfile`

有几个非常重要的条目是通过`regasm my.dll`这些条目添加的，这些条目永远不会与`regasm`命令的注册表文件输出一起添加。 **为什么？**

从安装的角度来看，我非常讨厌`regasm`在安装过程中打电话。我宁愿只运行这个 .reg 脚本。我现在正在使用 InstallShield，它在引擎盖下也缺少额外的注册表项（似乎它嵌入了使用`/regfile`标志输出的注册表更改）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T02:39:55.700

Per [Regasm.exe（程序集注册工具）](http://msdn.microsoft.com/en-us/library/tzat5yw6%28v=vs.110%29.aspx)（备注部分）

> 您可以使用 /regfile 选项生成包含注册表项的 .reg 文件，而不是直接对注册表进行更改。您可以通过使用注册表编辑器工具 (Regedit.exe) 导入 .reg 文件来更新计算机上的注册表。请注意，.reg 文件不包含任何可由用户定义的寄存器函数进行的注册表更新。请注意，/regfile 选项仅发出托管类的注册表项。此选项不会发出 TypeLibID 或 InterfaceID 的条目。

InstallShield 有一个名为“.NET COM Interop”的设置，它基本上告诉构建引擎在构建 MSI 之前执行 regasm /regfile 并将结果转换为注册表。如果你愿意，你可以继续这样做，但你必须静态添加额外的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T18:41:53.130

`ComRegisterFunction`额外的注册表操作正在使用该属性修饰的方法的幕后进行。显然，这些方法不是用`/regfile`开关调用的。

# php - If/Elseif 的问题。代码只执行第一条语句

> ID：14652484
> 
> 赞同：1
> 
> 时间：2013-02-01T18:11:42.610
> 
> 标签：php, if-statement

我的代码只执行 if 语句，但不继续执行 else 部分。我已经单独尝试了每个语句，它们工作正常。但是，当我把它们放在一起时，只执行第一条语句。我究竟做错了什么？

我试过这个：

```
function body_google_webfonts() {
    if( $settings['font_type_body'] = "Handlee") :
        wp_register_style('body-google-webfonts', 'http://fonts.googleapis.com/css?family=Handlee');
        wp_enqueue_style( 'body-google-webfonts');
    elseif ( $settings['font_type_body'] = "Kreon") :
        wp_register_style('body-google-webfonts', 'http://fonts.googleapis.com/css?family=Kreon');
        wp_enqueue_style( 'body-google-webfonts');
    endif;
} 
```

还有这个：

```
function body_google_webfonts() {
    if( $settings['font_type_body'] = "Handlee") :
        wp_register_style('body-google-webfonts', 'http://fonts.googleapis.com/css?family=Handlee');
        wp_enqueue_style( 'body-google-webfonts');
    endif;
    if ( $settings['font_type_body'] = "Kreon") :
        wp_register_style('body-google-webfonts', 'http://fonts.googleapis.com/css?family=Kreon');
        wp_enqueue_style( 'body-google-webfonts');
    endif;
} 
```

还有这个：

```
function body_google_webfonts() {
    if( $settings['font_type_body'] = "Handlee") {
        wp_register_style('body-google-webfonts', 'http://fonts.googleapis.com/css?family=Handlee');
        wp_enqueue_style( 'body-google-webfonts');
    }
    if ( $settings['font_type_body'] = "Kreon") {
        wp_register_style('body-google-webfonts', 'http://fonts.googleapis.com/css?family=Kreon');
        wp_enqueue_style( 'body-google-webfonts');
    }
} 
```

我试过这个：

```
function body_google_webfonts() {
    if( $settings['font_type_body'] = "Handlee") {
        wp_register_style('body-google-webfonts', 'http://fonts.googleapis.com/css?family=Handlee');
        wp_enqueue_style( 'body-google-webfonts');
  } else if ( $settings['font_type_body'] = "Kreon") {
        wp_register_style('body-google-webfonts', 'http://fonts.googleapis.com/css?family=Kreon');
        wp_enqueue_style( 'body-google-webfonts');
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:12:38.147

您将值分配给变量而不是进行比较。这将始终导致陈述为真。

```
if( $settings['font_type_body'] = "Handlee") : 
```

应该

```
if( $settings['font_type_body'] == "Handlee") : 
```

或者

```
if( $settings['font_type_body'] === "Handlee") : 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:15:04.743

我认为您的问题是：您不是在比较两件事，而是使变量设置等于“Handlee”。此操作将始终返回 true，因此只会执行第一个 if。

要解决这个问题，请使用正确的句子：

```
$settings['font_type_body'] == "Handlee" 
```

带双“=”。

@Jessica，一个非常好的编程实践，为了避免这个简单的错误，总是把你的变量放在比较的右侧。像这样的东西：

```
int a = 0; 
if 0 == a 
```

您可以将其用于其他语言。这是很好的理由，如果你尝试这样做

```
If 0 = a 
```

在调试模式下很容易找到您的问题。

# c# - 从业务对象类自动生成 DataContract 类

> ID：14652487
> 
> 赞同：7
> 
> 时间：2013-02-01T18:12:08.787
> 
> 标签：c#, asp.net, json, datacontract

我目前正在创建一个 .NET C# API。我有很多课程，其中一些必须通过`REST`服务转移为`JSON`. 例如，我可能有一个包含大量业务元数据的帐户对象：

```
public class Account
{
    public ComplicatedClass SomeProperty { get; set; }
    public string SomeOtherProperty { get; set; }
} 
```

有很多类，还有更多是嵌套的（如`ComplicatedClass`type 属性所示）。为了避免用`[DataMember]`等淹没这个业务对象。会使这个类变得一团糟的属性，我想做一个`DTO`for `JSON`：

```
public class AccountDTOForJSON
{
    [DataMember(Name="someProperty")]
    public ComplicatedClassDTOForJson SomeProperty { get; set; }

    [DataMember(Name="someOtherProperty")]
    public string SomeOtherProperty { get; set; }
} 
```

我的问题是，似乎没有任何工具（我能找到）来自动生成这些`DataContract`类，并且还提供用于来回映射属性的代码。

当然，我可以手动完成所有这些工作（最坏的情况），或者使用我自己的工具来生成/映射（第二个更糟的情况）。但是，我想先知道是否已经有一种工具可以做这种事情，我可以用它来节省自己的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:19:48.730

这是一个很好的问题。我实际上将在我正在从事的项目中做类似的事情。

我建议这里确实存在两个问题：第一个是从您的业务对象生成 DTO 代码，第二个是在业务对象和 DTO 之间进行映射。

在谷歌上花了大约半小时后，我找不到用于此目的的代码生成器。也许我没有在寻找正确的东西，或者可能没有一个（所以如果有人知道一个，请插话）。我发现唯一看起来很有前途的工具是 NHydrate ( [http://www.codeproject.com/Articles/42885/NHydrate-Code-Generator](http://www.codeproject.com/Articles/42885/NHydrate-Code-Generator) )，但我实际上并没有下载或测试它。

我过去使用的映射工具是 AutoMapper ( [https://github.com/AutoMapper/AutoMapper/wiki/Getting-started](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started) ) - 它会尝试找出您的业务对象和 DTO 之间的关系，并将能够进行双向映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:45:59.937

我以前这样做过：

1.  使用[XSD](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.80%29.aspx)工具从已编译的 DTO 程序集生成架构。
2.  使用[svcutil](http://msdn.microsoft.com/en-us/library/aa347733.aspx)从步骤 1 中生成的 .xsd 生成 DataContracts。

**编辑：**

以上假设您的`Account`类是 DTO（因为您在示例中给出的唯一指示是它包含两个属性，所以我假设它仅用于传输状态而不是定义行为）。如果是这种情况，并且您只想要 Account 类的*DataContract*版本，那么上面应该可以工作。您仍然必须提供将`Account`类映射到可序列化`Account`类（由 svcutil 生成）的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-06T20:15:26.027

方法是修改您的代码生成引擎（在我的情况下为 .tt 文件或 T4 文件）并将属性添加`DataMember`到您想要的属性中。要将其添加到自动生成的 POCO 类中，请查找`<#=codeStringGenerator.Property(edmProperty)#>`并在其上方添加`[DataMember]`右侧：

```
 var simpleProperties = typeMapper.GetSimpleProperties(entity);
    if (simpleProperties.Any())
    {
        foreach (var edmProperty in simpleProperties)
        {
#>
    [DataMember]
    <#=codeStringGenerator.Property(edmProperty)#>
<#
        }
    } 
```

上面代码的某些部分应该已经在 T4 文件中。您可能需要找到它并通过添加`[DataMember]`来修改它。

此外，您可以在具有所需属性的任意位置创建 DTO 文件。例如，下面的代码为名为*Interface*的文件夹中的所有实体创建一个接口，并将接口命名为*I{EntityName}Repository.cs*。您可以以相同的方式生成 DTO。

```
foreach (var entity in typeMapper.GetItemsToGenerate<EntityType>(itemCollection))
{
    var host = this.Host.ResolvePath("App.config");
    var savepath = host.Replace("App.config","")+"Interface\\" + "I"+entity.Name+"Repository" +".cs";
    var readpath = host.Replace("App.config","") + "Templates\\";

    if (!File.Exists(savepath))
    {
        using (StreamReader sr = new StreamReader(readpath+"RepositoryInterfaceTemplate.txt"))
     {
                String line = sr.ReadToEnd();
               line = line.Replace("{RepositoryInterface}","I"+entity.Name+"Repository");
                line =line.Replace("{EntityName}",entity.Name);

        using (StreamWriter sw = File.CreateText(savepath))
        {       
            sw.WriteLine(@line);        
        }
      }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-09T21:13:09.383

这是我为您的需求而开发的工具。如果需要，您可以分叉和更改设置。

[https://github.com/lasuax/ClassToDataContract](https://github.com/lasuax/ClassToDataContract)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-28T17:43:10.090

EggBlox 做了一个插件，它的功能之一就是实现 DataContract [http://www.eggblox.com/](http://www.eggblox.com/) 它需要 JetBrain Reshaper

# javascript - 动画期间在 div 后面显示 Jquery 对话框

> ID：14652492
> 
> 赞同：0
> 
> 时间：2013-02-01T18:12:14.483
> 
> 标签：javascript, jquery, jquery-ui

我不确定你们能否仅通过这些信息帮助我，但如果还不够，请询问我，我会提供。

我有一个使用动画显示的对话框。它是在一切之上创建的。我没有使用任何自定义 z-index，只是正常的功能。

它是预先显示在另一个对话框中的 div。在动画期间（“Blind”），它显示在它所在的对话框后面，但最后通常显示在该对话框的顶部。

我需要修复它，在动画期间也在所有内容之上显示这个“子”对话框。

这是代码：

```
$("#childDialog").dialog({
        autoOpen: false,
        show: {
            effect: "blind",
            duration: 1000
        },
        hide: {
            effect: "blind",
            duration: 1000
        },
        position: {
            my: "left top",
            at: "left bottom",
            of: "#isCertifiedAdd"
        }
    }); 
```

和html：

```
<div id='parentDialog'>
    ... some html
    <div id="childDialog">
        ... more html
    </div>  
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T02:11:31.093

`$('#childDialog').dialog('moveToTop')`调用前使用`$('#childDialog').dialog('show')`

HTML

```
<div id='parentDialog'>
    <button id='button'>Open Child</button>
    <div id='parentHtml'>... parent html</div>
    <div id="childDialog">
        <div id='childHtml'>... child html</div>
    </div>
</div> 
```

JS

```
$('#parentDialog').dialog({
    height: 300,
    width: 300
});

$("#childDialog").dialog({
    autoOpen: false,
    height: 300,
    width: 300,
    show: {
        effect: "blind",
        duration: 1000
    },
    hide: {
        effect: "blind",
        duration: 1000
    },
    position: {
        my: "left top",
        at: "left bottom",
        of: "#parentHtml"
    }
});

$('#parentDialog').click(function () {
    $('#childDialog').dialog('moveToTop');
    $('#childDialog').dialog('open');
    event.stopPropagation();
}); 
```

[http://jsfiddle.net/DL5w9/](http://jsfiddle.net/DL5w9/)

# mathjax - mathjax，本地宏在重新加载之前不会在 IE9 中呈现

> ID：14652495
> 
> 赞同：1
> 
> 时间：2013-02-01T18:12:26.253
> 
> 标签：mathjax

当我第一次在 IE9 中加载我的页面时，不会呈现本地定义的宏（例如，它们以红色显示为 \bepsilon）。当我重新加载页面时，会呈现数学。我不必在 Firefox 中重新加载。这是我的html和配置：

```
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=Accessible-full"></script>
<script type="text/javascript" src="mathjax_config.js"></script>
</head>
<body>
 <div class="mediaobject">$\displaystyle = \bX \bbeta + \bepsilon  $</div>
</body>
</html> 
```

我的配置是这样的：

```
MathJax.Hub.Config({
displayAlign: "left",
displayIndent:"3em",
tex2jax: {
  inlineMath: [ ['$','$'], ["\\(","\\)"] ],
  displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
  processEscapes: true,
  skipTags: ["script","noscript","style","textarea","pre","code"]
  },
TeX: {
  Macros: {
    bDelta: '\\boldsymbol{\\Delta}',
    bepsilon: '\\boldsymbol{\\epsilon}',
    bzeta:  '\\boldsymbol{\\zeta}'
  }
}
}); 
```

我该怎么做才能让 IE9 在第一次点击时加载？配置是否需要按特定顺序才能工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:24:55.900

您的配置来得太晚了，因为在您的脚本运行时 MathJax 已经完成了配置。您需要使用内联配置，或者将配置文件添加到`config=...`加载 MathJax 的脚本的列表中。有关详细信息，请参阅[MathJax 文档](http://docs.mathjax.org/en/latest/configuration.html#using-a-local-configuration-file-with-the-cdn)以在使用 CDN 时加载配置文件。请务必特别注意有关`loadComplete()`通话的信息​​。

# jquery - 将 timeago 与 jquery mobile 一起使用

> ID：14652496
> 
> 赞同：1
> 
> 时间：2013-02-01T18:12:26.820
> 
> 标签：jquery, jquery-mobile, timeago

有人试试这个吗？我很难让它发挥作用。

我尝试使用以下两者（一个或另一个）在我的模板头部初始化它：

```
<script>
$('div:jqmData(role="page")').live('pagebeforeshow',function(){
   jQuery("abbr.timeago").timeago();
});
</script>

<script>
jQuery(document).ready(function() {
  jQuery("abbr.timeago").timeago();
});
</script> 
```

然后在内容部分，我尝试使用：

`<abbr class="timeago" title="2008-07-17T09:24:17Z">July 17, 2008</abbr>`

正如 timeago 文档所暗示的那样。

虽然我只看到`July 17, 2008`并没有动态时间变化。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:54:14.920

如您在此示例中所见，它有效：http: [//jsfiddle.net/Gajotres/KXHBj/](http://jsfiddle.net/Gajotres/KXHBj/)

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <abbr class="timeago" title="2008-07-17T09:24:17Z">July 17, 2008</abbr>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>  
</body>
</html> 
```

**JS：**

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(".timeago").timeago();
}); 
```

# magento - 结帐开始观察员

> ID：14652497
> 
> 赞同：3
> 
> 时间：2013-02-01T18:12:30.177
> 
> 标签：magento, observers

Magento 中是否有观察者来检测结帐过程的开始？这将包括点击页面`checkout/onepage/`或`checkout/onestepcheckout/`. 如果可能，我想避免覆盖控制器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T22:41:37.333

每个控制器动作都会产生多个目标事件，这些事件在[`Mage_Core_Controller_Varien_Action`(link)](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php)中触发，所有动作控制器的超类。这些事件不同地涉及从模块路由器配置+控制器路径+动作派生的“完整动作名称”，以及被请求的路由名称。

在标准单页结帐的情况下，完整的操作名称是`checkout_onepage_index`，路线名称是`checkout_onepage`。

**渲染布局（）：**

`controller_action_layout_render_before_'.$this->getFullActionName()`

**预调度（）：**

`controller_action_predispatch_' . $this->getRequest()->getRouteName()` `controller_action_predispatch_' . $this->getFullActionName()`

**postDispatch():**

`controller_action_postdispatch_' . $this->getRequest()->getRouteName()` `controller_action_postdispatch_' . $this->getFullActionName()`

您观察到哪些事件将取决于 OneStepCheckout 模块如何捕获路由。`getRouteName()`如果您需要区分路由和模块，基于 - 的事件可能很有用。您需要测试“客户已登录”和“客户已注销”场景。虽然预调度事件对于涉及重定向的逻辑是首选，但您需要平衡您的需求与重复购物车/报价 + 客户会话逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T19:22:34.680

看看@`controller_action_predispatch_checkout_onepage_index`事件

查看[Magento 的“继续结帐”活动？](https://stackoverflow.com/questions/11211119/proceed-to-checkout-event-for-magento)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:51:39.037

为什么要这么晚做？根据您要检查的内容，您可以在将它们添加到购物车后进行吗？`checkout_cart_save_before`

# asp.net-mvc-4 - ASP.NET MVC 4 中的路由混淆

> ID：14652501
> 
> 赞同：0
> 
> 时间：2013-02-01T18:12:45.137
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

我有一个 ASP.NET MVC 4 应用程序。出于某种原因，路由总是让我失望。目前，我的 RouteConfig.cs 文件有三个路由：

```
routes.MapRoute(
  "AddProductStep1",
  "{controller}/products/add",
  new { controller = "Core", action = "AddProduct" }
);

routes.MapRoute(
  "Products",
  "{controller}/products",
  new { controller = "Core", action = "Products" }
);

routes.MapRoute(
  "Home",
  "{controller}/dashboard",
  new { controller = "Core", action = "Dashboard" }
); 
```

如果我访问 /core/products，我会看到与我的产品相关的视图。如果我访问 /core/products/add，我仍然看到相同的视图。我在控制器中设置了一个断点，并注意到在这两种情况下都调用了 Products 操作。这就是为什么我认为这是一个路由配置问题。不幸的是，我不明白我的配置错误。有人可以指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:22:55.577

您定义的第一条路线可能应该是这个

```
routes.MapRoute(
  "AddProductStep1",
  "{controller}/addProduct",
  new { controller = "Core", action = "AddProduct" }
); 
```

mvc 中的 url 是 controller/action/param/param/etc 你的第一条路线是寻找 Core/Products/*一些名为 add*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:23:34.863

如果您配置了默认路由：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

访问时`/core/products/add`，您将被重定向到：

```
控制器 = 核心
行动 = 产品
id = 添加

```

这解释了奇怪的行为。

# javascript - 性能：在对象命名空间中使用数组与本地数组

> ID：14652504
> 
> 赞同：5
> 
> 时间：2013-02-01T18:12:57.893
> 
> 标签：javascript, performance, firebug

我正在玩一些 javascript 性能优化，发现了一些有趣的东西。这是代码：

```
function gObject() {

    this.obj = [];
    this.LIMIT = 100000;

    this.doLoopLocal = function () {
        var o = [];
        for (var i=0;i<this.LIMIT;i+=1) {
            o.push(i);
        }
        return o;
    };      

    this.doLoopObject = function () {
        this.obj = [];
        for (var i=0;i<this.LIMIT;i+=1) {
            this.obj.push(i);
        }
    };
};

var g = new gObject();

console.time('Using Local array');
g.doLoopLocal();
console.timeEnd('Using Local array');

console.time('Using Object array');
g.doLoopObject();
console.timeEnd('Using Object array'); 
```

当我运行它时，日志告诉我使用本地数组比使用对象命名空间中定义的数组慢。差异是显着的 - 8 到 10 倍！(FF 18.0.1)

```
Using Local array: 16ms
Using Object array: 2ms 
```

截图：![在此处输入图像描述](../Images/1143cf3d999ab63a0f05f69210ac58b3.png)

我一直假设在函数中使用本地定义的对象更快，但这个实验表明我错了。为什么会发生这种情况？

**更新：**我在本地 Firefox 控制台中尝试了该脚本，并且数字是我最初所期望的：使用本地数组优于使用对象数组。所以真正的原因是 Firebug 出于某种原因扭曲了数字并显示了不正确的结果。要记住的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:23:27.337

与魔法一样，魔法在于相信它正在发生的眼睛。
顺便问一下，你在这里测试什么？如果我们忘记了，在你的 doLoopObject 中，你没有返回 this.obj，只是测试几次表明结果是“随机的”，更糟糕的是：如果你颠倒测试的顺序，它们可能会根据浏览器而改变。结果将取决于您在两次点击之间等待的时间。如果您等待几秒钟，它们将始终几乎相等。
现在请注意，在 JSPerf 上，数字增长的速度，特别是在 Firefox 上，解释变得非常明显：有周期性的减速：垃圾收集器是由此类垃圾创建函数触发的。当它触发时，数字会增加得更慢，可能是一个对象或一个本地变量（没关系）。您在这里测量的是垃圾收集器时间，而不是对象属性与局部变量相比的 push() 时间。这就解释了为什么顺序和测试之间的时间会改变事情。
我要补充一点，两次测试之间的变化太大，无法得出任何结论。

但最重要的是，当等待的时间足够长时，两个测试在 FF/Safari 上的表现都是一样的......

您可以从所有这些中得出的唯一结论是：两种方法的执行方式相同。

但是由于任何分配这么多“堆”的人无论如何都会立即分配，使用简单的 myArray[lastIndex-1]=0，恐怕真正的结论是：这个测试什么也没显示。

# c# - How do we show clean, Google-style excerpts in our search results?

> ID：14652506
> 
> 赞同：3
> 
> 时间：2013-02-01T18:13:10.173
> 
> 标签：c#, .net, regex, search, dtsearch

We are using **dtSearch** to index some external web pages. It grabs the entire HTML content of the page.

When a page shows up in a list of search results on our web site, we want to show an **excerpt** of the content that contains their **highlighted/bold** search term as part of the result (in other words, the same thing everyone is used to seeing under each Google result).

What it the best way to accomplish this? Do you have to parse and remove the HTML tags? If so, how do you do that effectively?

We have a proof of concept working, showing the excerpt with the search terms highlighted, but we have to either render the tags, or try to strip them out (as we have tried) and end up with some garbage information that's not really content.

The fact that we are using dtSearch is incidental, I think. If an alternative search tool is capable of doing this type of thing in our behalf, we'd consider using that instead.

We are basically trying to decide if we need to author our own regular expressions to accomplish this or if it's a well-known problem that's already solved by some library or tool.

We happen to be using .NET/C#. I don't think it's central to the problem but might impact what libraries we can use.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:26:46.060

Google uses `meta` description tags where present, and will also use [rich snippet information](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=99170) where available.

Beyond that, you may need to perform custom parsing, but don't use regular expressions to perform the whole task. Rather, use a proper parser (such as [HTML Aglity Pack](http://htmlagilitypack.codeplex.com/)) and find tags which make semantic sense (perhaps headings, paragraphs, etc.) Once you have located such elements, you might use a regex to determine which of the matched tags would give you the best snippet, where to truncate it, etc.

A simple flow:

1.  parse the document and locate all elements with a significant amount of textual content.
2.  strip inner tags (e.g. `strong` inside of a `p`)
3.  prefer elements near the beginning of the document.
4.  run an algorithm (possibly using regex(es), and possibly culture-aware) to try to extract sentences.
5.  strongly prefer sentences with words matching one or more search terms (based on your stated requirements).
6.  prefer sentences with few noise words.
7.  (advanced) prefer sentences which have words occurring regularly in the document.
8.  (advanced) combine multiple, potentially useful sentences into a single description snippet.

It's not an exact science, even for Google.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:50:55.207

Here is what I use to generate the search summary for an item with dtsearch (with cache stored version of the document text) :

The key point here for your problem is `rj.OutputFormat = dtSearch.Engine.OutputFormats.itUTF8;` (which overrides the default html format) You should get a cleaned up summary with bold highlighting.

Hope this will help

```
public string GetSumary(String ItemEncoded)
{
    using (var res = new dtSearch.Engine.SearchResults())
    {
        res.UrlDecodeItem(ItemEncoded);
        res.GetNthDoc(0);

        using (var rj = res.NewSearchReportJob())
        {
            // next line asumes you store your document text version in cache. remove if not 
            rj.Flags |= dtSearch.Engine.ReportFlags.dtsReportGetFromCache;
            rj.Flags |= dtSearch.Engine.ReportFlags.dtsReportByWordExact;
            rj.Flags |= dtSearch.Engine.ReportFlags.dtsReportLimitContiguousContext;
            rj.OutputToString = true;
            rj.OutputFormat = dtSearch.Engine.OutputFormats.itUTF8;
            rj.OutputStringMaxSize = 2000;
            rj.MaxContextBlocks = 1;
            rj.WordsOfContext = 12;

            rj.Header = "";
            rj.FileHeader = "";
            rj.ContextHeader = "";
            rj.BeforeHit = "<b>";
            rj.AfterHit = "</b>";
            rj.ContextFooter = "";
            rj.ContextSeparator = " ... ";
            rj.FileFooter = "";
            rj.Footer = "";

            rj.SelectItems(0, 0);
            rj.Execute();

            // some final clean-up
            return
                    new Regex(@"[\t\r\n]+|[\.;\,\*]{2,}").Replace(rj.OutputString, "&nbsp; &nbsp;");            }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T17:10:25.983

```
Use dtsearch ISearchStatusHandler interface with OnFound method, OnFound method Called each time a document is found 

public class HomeController : Controller, ISearchStatusHandler
{

public void Search()
{
   SearchJob sj = new SearchJob();
   sj.Request = "fast";
   sj.IndexesToSearch.Add(@"D:\R & D\Indexpath\aaa");
   sj.SearchFlags = SearchFlags.dtsSearchSynonyms &         
   SearchFlags.dtsSearchWordNetRelated;        
   sj.Execute();
   SearchResults result = sj.Results;
}

 public void OnFound(SearchResultsItem item)
 {
        int DocId = item.DocId;
        string FileName = item.Filename;
 }

 public void OnSearchingFile(string filename)
 {
        throw new NotImplementedException();
 }

 public void OnSearchingIndex(string index)
 {
        throw new NotImplementedException();
 }
 } 
```

There is a more organized and comprehensive way to work with the results of a search as they are obtained. The SearchJob object has a StatusHandler property that can be set to an object which has a set of methods that are called as the Search progresses. Using this you can process the files as they are found and you can keep the UI responsive by not hogging the UI thread. like : SJob1.StatusHandler = this; SJob1.Execute();
SJob1.StatusHandler = this; SJob1.ExecuteInThread(); StatusHandler call OnFound methed each time when document found so if document not found than OnFound method not execute so no more load.

# javascript - Google 地方信息自动填充强制选择

> ID：14652507
> 
> 赞同：30
> 
> 时间：2013-02-01T18:13:16.973
> 
> 标签：javascript, ajax, google-places-api

我正在使用 JavaScript Google Places 自动完成 API v3。它工作正常，但我想知道是否有一种方法可以强制从自动完成中进行选择，即不接受任何自由格式文本的输入。我查看了文档并没有看到这样的选项，但我想我会问只是为了安全。我确信我可以找到一种方法来使用一些 JavaScript，但如果它可用的话，我更愿意使用已经构建的方法。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-25T12:17:07.333

实际上，我们所做的如下：
- 每次从自动完成列表中选择一个位置时，我们使用来自 JSON 响应的一些字段（城市名称、国家名称、经度和纬度）填充一些隐藏字段
- 当表单提交后，我们检查这些字段是否有值，如果没有，则表示用户没有从列表中选择位置，而是自己输入了一个值。

它不是以 JS 方式解决问题，但它仍然可以很好地解决问题！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-08T13:13:35.847

```
 <script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"
    type="text/javascript"></script>
<script>
    var IsplaceChange = false;
    $(document).ready(function () {            
        var input = document.getElementById('txtlocation');
        var autocomplete = new google.maps.places.Autocomplete(input, { types: ['(cities)'] });

        google.maps.event.addListener(autocomplete, 'place_changed', function () {
            var place = autocomplete.getPlace();

            IsplaceChange = true;
        });

        $("#txtlocation").keydown(function () {
            IsplaceChange = false;
        });

        $("#btnsubmit").click(function () {

            if (IsplaceChange == false) {
                $("#txtlocation").val('');
                alert("please Enter valid location");
            }
            else {
                alert($("#txtlocation").val());
            }

        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-05T05:26:23.030

Google Places API 当前不支持此功能。如果您认为这是一项有用的功能，请提交[Places API - 功能请求](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-18T16:58:49.953

以下解决方案对我有用（使用 jQuery）。这个想法是`blur()`一旦输入失去焦点，使用事件来强制最后选择的地址。

`blur`我们添加了一个超时来防止和事件之间的冲突`place_changed`。

考虑以下 html：

```
<input type="text" placeholder="Your address" id="autocomplete"> 
```

以及以下 javascript ：

```
var autocomplete = new google.maps.places.Autocomplete(
    (document.getElementById('autocomplete')),
    {types: ['geocode']});
autocomplete.addListener('place_changed', fillInAddress);

var currentAddress = {
    line_1: "",
    line_2: "",
    zipcode: "",
    city: "",
    country: "",
    lat: "",
    lng: "",
    one_liner: ""
};

function fillInAddress() {
    var place = this.autocomplete.getPlace();
    // reset the address
    currentAddress = {
        line_1: "",
        line_2: "",
        zipcode: "",
        city: "",
        country: "",
        lat: "",
        lng: "",
        one_liner: place.formatted_address
    };
    // store relevant info in currentAddress
    var results = place.address_components.reduce(function(prev, current) {
        prev[current.types[0]] = current['long_name'];
        return prev;
    }, {})
    if (results.hasOwnProperty('route')) {
        currentAddress.line_1 = results.route;
    }
    if (results.hasOwnProperty('street_number')) {
        currentAddress.line_1 = results.street_number + " " + currentAddress.line_1;
    }
    if (results.hasOwnProperty('postal_code')) {
        currentAddress.zipcode = results.postal_code;
    }
    if (results.hasOwnProperty('locality')) {
        currentAddress.city = results.locality;
    }
    if (results.hasOwnProperty('country')) {
        currentAddress.country = results.country;
    }
    currentAddress.lat = Number(place.geometry.location.lat()).toFixed(6);
    currentAddress.lng = Number(place.geometry.location.lng()).toFixed(6);
}

$('#autocomplete').blur(function() {
    var address = $('#autocomplete').val();
    // we set a timeout to prevent conflicts between blur and place_changed events
    var timeout = setTimeout(function() {
        // release timeout
        clearTimeout(timeout);
        if (address !== currentAddress.one_liner) {
            $('#autocomplete').val(currentAddress.one_liner);
        }
    }, 500);
}); 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-28T10:28:18.377

```
 var options = {
        language: 'en',
        types: ['(cities)'],
    };

    var input = document.getElementById('city');
    var autocomplete = new google.maps.places.Autocomplete(input, options);
    input.addEventListener("change", function(){
        input.value = "";
    }); 
```

输入更改时退出值对我有用。它强制使用 Google 地方信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T15:05:01.590

我遇到了同样的问题，下面是我想出的一个解决方法。这可以与诸如 onchange 或 onkeyup 之类的事件结合使用。希望能帮助到你！

`//Arguments:`

`address - string containing the place that you want to validate` `address_success_div - div object specifically used for displaying validation`

```
function is_location_valid(address, address_success_div)
{
    var geocoder = new google.maps.Geocoder();

    geocoder.geocode( {"address": address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK)
        {
            address_success_div.innerHTML = "SUCCESS";
        }
        else
        {
            address_success_div.innerHTML = "FAILURE";
        }
    });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-11T10:49:15.420

> [我使用这里](https://www.aspforums.net/Threads/135714/Force-user-to-select-Address-from-Google-Map-API-Autocomplete-result-in-jQuery/)找到的代码解决了我的问题

```
<asp:TextBox runat="server" ID="TextBox1" />
<input type="button" id="btnSubmit" name="name" value="Validate" />
<div id="dvMap">
</div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyBE1J5Pe_GZXBR_x9TXOv6TU5vtCSmEPW4"></script>
<script type="text/javascript">
    var isPlaceChanged = false;
    google.maps.event.addDomListener(window, 'load', function () {
        var places = new google.maps.places.Autocomplete(document.getElementById('<%= TextBox1.ClientID %>'));
        google.maps.event.addListener(places, 'place_changed', function () {
            isPlaceChanged = true;
            var geocoder = new google.maps.Geocoder();
            var place = places.getPlace();
            var address = place.formatted_address;
            geocoder.geocode({ 'address': address }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    var latitude = results[0].geometry.location.lat();
                    var longitude = results[0].geometry.location.lng();
                    var mapOptions = { center: new google.maps.LatLng(latitude, longitude), zoom: 15, mapTypeId: google.maps.MapTypeId.ROADMAP };
                    var map = new google.maps.Map(document.getElementById("dvMap"), mapOptions);
                    var marker = new google.maps.Marker({ position: new google.maps.LatLng(latitude, longitude), map: map });

                } else {
                    alert("Request failed.")
                }
            });
        });
    });
    $(function () {
        $("#TextBox1").keydown(function () {
            isPlaceChanged = false;
        });

        $("#btnSubmit").click(function () {
            if (!isPlaceChanged) {
                $("#TextBox1").val('');
                alert("Please Enter valid location");
            }
            else {
                alert($("#TextBox1").val());
            }
        });
    });
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-13T19:23:58.193

您可以使用输入模式标签，强制用户选择基于 Google 自动完成 API 的预定。

输入：

```
 <form>
         <input type="text" onkeyup="changePatterns()" onchange="changePatterns()" id="autocomplete" required pattern="">
         <input type="submit">
    </form> 
```

JS文件：

```
function changePatterns() {
    let input = document.getElementById('autocomplete').value;
    let regExp = new RegExp(' ', 'g');
    input = input.replace(regExp, '%20');

    let mapsURL = 'https://maps.googleapis.com/maps/api/place/autocomplete/json'
    mapsURL += '?types=geocode';
    mapsURL += '&key=YOUR-KEY-HERE';
    mapsURL += `&input=${input}`;
    const endpoint = 'middle.php';

    let formData = new FormData();
    formData.append('url', mapsURL);

    fetch(endpoint, {
        method: 'post',
        body: formData
        })
        .then(blob => blob.json())
        .then(response => {
            const predictions = response.predictions;
            let {length} = predictions;
            let pattern = '';
            for(let i = 0; i < length; i++){
                pattern += i == 0 ? '' : '|';
                pattern += predictions[i].description
            }
            const input = document.getElementById('autocomplete');
            input.setAttribute('pattern', pattern);
        });
} 
```

由于 CORS 政策的问题，我不得不使用 php 中间体：

```
<?php
header('Content-Type: application/json');
$url = $_POST['url'];
$ch = curl_init();
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); //remove on upload
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_AUTOREFERER, false);
curl_setopt($ch, CURLOPT_REFERER, "https://www.notmydomain.com");
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_HEADER, 0);
$result = curl_exec($ch);
echo curl_error($ch);
curl_close($ch);
echo $result; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-02T18:26:23.003

就像他们提到的那样，**Google Autocomplete API**不支持它。我找到了一种方法，通过创建一个隐藏元素来存储所选位置，而不是检查它是否等于自动完成输入。

```
/*----------------------------------------------------*/
/*  check if it's valid address
/*----------------------------------------------------*/
function checkAddress(location, validLocation) {
if (location.val() == validLocation.val()) {
    return true;
}
return false;
}

/*----------------------------------------------------*/
/*  initialize auto complete address
/*----------------------------------------------------*/
function initialize() {
 let input = document.getElementById('autocomplete-input');
 let inputHidden = document.getElementById('autocomplete-input-hidden');
 let options = {
    types: ['(regions)'],
    componentRestrictions: {country: "tn"}
 };
 let autocomplete =new google.maps.places.Autocomplete(input, options);
 autocomplete.setFields(['formatted_address']);
 autocomplete.addListener('place_changed', function () {
    inputHidden.value= autocomplete.getPlace().formatted_address;
 });
} 
```

在你的 main 中调用函数。

```
 let location = $('#autocomplete-input');
 let validLocation = $('#autocomplete-input-hidden');
 checkAddress(location,validLocation); 
```

在你的 html 中：

```
 <input id="autocomplete-input" type="text">
 <input id="autocomplete-input-hidden" type="hidden" > 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-09T10:19:26.747

我找到了一个使用 jquery 验证插件实现的更简单的解决方案，但这不是必须的。我只是使用一个类名作为标志来显示该字段是有效的（即用户从 Google 中做出的选择）还是无效的（即他们输入了自己的内容）。我创建了两个函数，一个是添加类“err”，一个是删除它。

```
function invalidate(element_id){
    $('#' + element_id).addClass('err');

}

function makeValid(element_id){
    if ($('#' + element_id).hasClass('err')){
        $('#' + element_id).removeClass('err');
    }
    $('#' + element_id).valid(); //this is a method from jquery validation plugin to check validity of a field
} 
```

然后，onkeydown 我调用了“invalidate”函数来标记输入元素已被输入。

```
document.getElementById("element_id").setAttribute('onkeydown', "invalidate('element_id')"); 
```

在 Google 自动完成 API 的末尾（我在 fillInAddress 方法的末尾做了），我调用了“makeValid”来删除标志，因为用户刚刚从下拉菜单中选择了一个选项。

```
makeValid(userElementId); 
```

最后，我验证了当用户键入而不是选择选项时用作标志的“err”类不存在。在这里，我使用了 jquery 验证插件，但如果需要，您可以使用其他东西。

```
jQuery.validator.addMethod("hasClassErr", function(value, element)  {
    return this.optional( element ) || !element.classList.contains("err");
}, jQuery.validator.format("Please choose an option from the dropdown menu."));

FORM_RULES = {
    element_name: {required: true, 'hasClassErr': true}
};

$('#form_id').validate({
    rules: FORM_RULES
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-25T15:10:01.713

见[https://stackoverflow.com/a/52534805/4481226](https://stackoverflow.com/a/52534805/4481226)

# 下面不起作用。留作历史

一种更简单的方法可能是：

```
let placeInputEl = document.getElementById("placeInput");
let autcomplete = new google.maps.places.Autocomplete(placeInputEl);

placeInputEl.addEventListener("change", () => {
  //this fires when the user changes to a non-selection / freeform text
  doStuff(true);
});
autocomplete.addListener("place_changed", () => {
  //this fires when the user selects a place from Google
  doStuff(false);
});

function doStuff(isFreeText) {
  //maybe clear the selection or do whatever you need to reset
  if (isFreeText) {
    placeInputEl.value = "";
    return;
  }
  // handle a place selection
}
```

```
<input id="placeInput" />
```

这使您可以清除输入、确定验证、重置输入或您想要执行的任何强制选择操作。

该`place_changed`事件仅在用户选择输入或按 Enter 时触发。

该`change`事件之前触发，`place_changed`因此您可以应用您的逻辑而不会干扰谷歌的 api 调用

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-09-26T14:16:30.737

嗨，我设法通过在每次用户关注输入字段时创建自动完成对象并在每次模糊时检查它的值来做到这一点：

```
var autocompleteField;
var input = document.getElementById('YOUR_INPUT');

$('#YOUR_INPUT').focus(function(e){

    if(autocompleteField){
        autocompleteField=null;
    }
    autocompleteField = new google.maps.places.Autocomplete(input);

});

$('#YOUR_INPUT').blur(function(e){

    var results = autocompleteField.getPlace();
    if(!results){
        $(this).attr('value','');
    }
}); 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2018-01-17T14:33:40.333

我从这里结合了几个不同答案的建议解决了这个问题。用户输入地址的我的文本字段称为 txtPlaces。这是我的代码：

```
var pac_input = document.getElementById('txtPlaces');

(function pacSelectFirst(input) {
    // store the original event binding function
    var _addEventListener = (input.addEventListener) ? input.addEventListener : input.attachEvent;

    function addEventListenerWrapper(type, listener) {
        // Simulate a 'down arrow' keypress on hitting 'return' when no pac suggestion is selected,
        // and then trigger the original listener.
        if (type == "keydown") {
            var orig_listener = listener;
            listener = function(event) {
                var suggestion_selected = $(".pac-item-selected").length > 0;
                if ((event.which == 13 || event.which == 9) && !suggestion_selected) {
                    var simulated_downarrow = $.Event("keydown", {
                        keyCode: 40,
                        which: 40
                    });
                    orig_listener.apply(input, [simulated_downarrow]);
                }

                orig_listener.apply(input, [event]);
            };
        }

        _addEventListener.apply(input, [type, listener]);
    }

    input.addEventListener = addEventListenerWrapper;
    input.attachEvent = addEventListenerWrapper;

    var autocomplete = new google.maps.places.Autocomplete(input);

})(pac_input);

$('#txtPlaces').blur(function(e){
    selectFirstAddress(pac_input);
});

////Ensuring that only Google Maps adresses are inputted
function selectFirstAddress (input) {
    google.maps.event.trigger(input, 'keydown', {keyCode:40});
    google.maps.event.trigger(input, 'keydown', {keyCode:13});
} 
```

这将正确响应 Enter 或 Tab 键，以及当用户选择另一个字段时。希望这可以帮助！

# macos - 在 OS X 中发送消息的 Bash 脚本命令行

> ID：14652513
> 
> 赞同：1
> 
> 时间：2013-02-01T18:13:55.027
> 
> 标签：macos, bash, growl

我`atMonitor`在我的 Mac mini 上使用该应用程序

`Growl`它允许人们通过使用包含的脚本发送消息。

脚本的最后两行是：

```
/usr/local/bin/growlnotify --appIcon atMonitor "atMonitor trigger" -m "$MESSAGE" &
exit 0 
```

我的问题：

1.  我想再添加一行，也`$MESSAGE`可以通过电子邮件发送给我。
2.  如何测试生成的脚本以确保它有效？

谢谢。

霍华德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:30:04.760

这类似于这个问题[Sending mail from a Bash shell script](https://stackoverflow.com/questions/1822425/sending-mail-from-bash-shell-script)

我使用 python 脚本从我的 Mac 页面。它需要一个中继服务器。

[https://github.com/jonzobrist/Bash-Admin-Scripts/blob/master/page.py](https://github.com/jonzobrist/Bash-Admin-Scripts/blob/master/page.py) 我把它放在 ${HOME}/bin 并用 ${HOME}/bin/page.py 调用“更长的消息引号”

```
#!/usr/bin/python
#Author : jon@jonzobrist.com
#License : BSD/public/freeware

import smtplib
import sys

def prompt(prompt):
    return raw_input(prompt).strip()

fromaddr = "noreply@example.com"
#toaddrs = ['userA@example.com','userB@example.com','Phone1@txt.att.net','Phone2@txt.att.net','userC@example.com']
toaddrs = ['userA@example.com']
subject = "[ALERT] Alert from localhost"

msg = ("From: %s\r\nTo: %s\r\nSubject: %s\r\n\r\n"
         % (fromaddr,toaddrs,subject))
msg = msg + sys.argv[1]
server = smtplib.SMTP('server.ip.or.hostname')
#server.set_debuglevel(1)
server.sendmail(fromaddr, toaddrs, msg)
server.quit() 
```

# solr - 如何避免分组 SOLR 搜索中的重复结果

> ID：14652516
> 
> 赞同：0
> 
> 时间：2013-02-01T18:14:03.917
> 
> 标签：solr, duplicate-removal

我有一个 SOLR 查询

```
group.field=USER_TYPE&group.limit=3&group.format=grouped 
```

因此，这完美地根据用户类型进行分组。但是，组内的结果包含重复项。也就是说，每个用户都有一个唯一的 user_id 和一个 user_group。每个用户可以有多个 user_group。因此，结果包含具有不同 user_groups 和相同 user_id 的重复用户。我希望分组结果不应包含重复的 user_id 值。

```
{"groupValue":"A","doclist":{"numFound":849956,"start":0,"maxScore":9.992027,\
    "docs":[
        {"user_group":"GPA","user_id":"4443510",.....},
        {"user_group":"GPB","user_id":"4443510",.....},
        {"user_group":"GPC","user_id":"4443510",.....},
        ....
        ] 
```

在这种情况下，任何人都可以帮助避免重复。

**编辑：** 我期待结果可能是

```
{"groupValue":"A","doclist":{"numFound":849956,"start":0,"maxScore":9.992027,       
    "docs":[
        {"groupValue":"4443510"
            "docs":[            
                {"user_group":"GPA","user_id":"4443510",.....},
                {"user_group":"GPB","user_id":"4443510",.....},
                {"user_group":"GPC","user_id":"4443510",.....},
                ....
                ]
        ....
        ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:09:34.013

I don't think it is possible to do grouping within a group.

But on the other hand, I think you could solve this issue by modifying the way you are indexing.

Now, you have multiple documents for each user_id:

```
 "docs":[            
                {"user_group":"GPA","user_id":"4443510",.....},
                {"user_group":"GPB","user_id":"4443510",.....},
                {"user_group":"GPC","user_id":"4443510",.....},
                ....
                ] 
```

You can modify it as follows to solve the issue:

```
 "docs":[            
                {"user_group":["GPA","GPB","GPC"],"user_id":"4443510",.....},
                {"user_group":["GPB"],"user_id":"4443511",.....},
                {"user_group":["GPA","GPC"],"user_id":"4443512",.....},
                ....
                ] 
```

I mean you can modify the **user_group** to be **mutivalued**, so that you have **only one document per user**.

# wpf - GridViewColumn CellTemplate 中每个 DataType 的 DataTemplate

> ID：14652519
> 
> 赞同：17
> 
> 时间：2013-02-01T18:14:36.537
> 
> 标签：wpf, datatemplate, gridviewcolumn, celltemplate

我有一个包含多种类型的视图模型的 ObservableCollection，我想为每个 GridViewColumn 的 CellTemplates 中的每种类型创建一个 DataTemplate。在这个简单的示例中，我可以创建一个基本 ViewModel，但我希望能够仅从 xaml 执行此操作。下面的 xaml 显示了我正在尝试做的事情，其中​​一个 DataTemplate 将用于每个 CellTemplate。

如果有一个 GridViewColumn.Resources 我会在那里定义 DataTemplates 然后在 CellTemplate 中使用带有 ContentPresenter 的 DataTemplate，但我显然不能这样做。我想我可能需要一个 TemplateSelector，但我不确定从哪里开始。

```
<ListView ItemsSource={Binding GenericObservableCollection>
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Type">
                <GridViewColumn.CellTemplate>
                    <DataTemplate DataType="{x:Type vm:ActionInputViewModel}">
                        <TextBlock Text="Input"/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:ActionOutputViewModel}">
                        <TextBlock Text="Output"/>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header="Value">
                <GridViewColumn.CellTemplate>
                    <DataTemplate DataType="{x:Type vm:ActionInputViewModel}">
                        <TextBlock Text="{Binding Property1}"/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:ActionOutputViewModel}">
                        <TextBlock Text="{Binding Property2}"/>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-01T19:38:30.320

您可以通过几种不同的方式来这里。您可以编写一个 DataTemplateSelector 并将其分配给`GridViewColumn.CellTemplateSelector`属性：

```
public class ViewModelTemplateSelector : DataTemplateSelector
{
    public DataTemplate InputTemplate { get; set; }
    public DataTemplate OutputTemplate { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        return (item is ActionInputViewModel) ? InputTemplate : OutputTemplate;
    }
} 
```

然后你可以将所有模板移动到资源的某个地方——为了简洁起见，我只是把它放在 ListView 中：

```
 <ListView ItemsSource="{Binding GenericObservableCollection}">
        <ListView.Resources>
            <DataTemplate x:Key="InLabel" DataType="{x:Type vm:ActionInputViewModel}">
                <TextBlock Text="Input"/>
            </DataTemplate>
            <DataTemplate x:Key="OutLabel" DataType="{x:Type vm:ActionOutputViewModel}">
                <TextBlock Text="Output"/>
            </DataTemplate>
            <DataTemplate x:Key="InValue" DataType="{x:Type vm:ActionInputViewModel}">
                <TextBlock Text="{Binding Property1}"/>
            </DataTemplate>
            <DataTemplate x:Key="OutValue" DataType="{x:Type vm:ActionOutputViewModel}">
                <TextBlock Text="{Binding Property2}"/>
            </DataTemplate>
        </ListView.Resources>
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Type">
                    <GridViewColumn.CellTemplateSelector>
                        <vm:ViewModelTemplateSelector InputTemplate="{StaticResource InLabel}" OutputTemplate="{StaticResource OutLabel}"/>
                    </GridViewColumn.CellTemplateSelector>
                </GridViewColumn>
                <GridViewColumn Header="Value">
                    <GridViewColumn.CellTemplateSelector>
                        <vm:ViewModelTemplateSelector InputTemplate="{StaticResource InValue}" OutputTemplate="{StaticResource OutValue}"/>
                    </GridViewColumn.CellTemplateSelector>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView> 
```

或者，如果您想将其全部保存在 XAML 中，您可以依靠 DataTypes 为您解析正确的模板。通常，您只需将它们放入最近容器的 Resources 集合中，但不幸的是 GridViewColumn 不是 UI 元素，因此没有 Resources 集合。您可以通过为每个可以保存自己的类型化模板的单元格添加 ContentControl 来解决此问题：

```
 <ListView ItemsSource="{Binding GenericObservableCollection}">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Type">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <ContentControl Content="{Binding}">
                                <ContentControl.Resources>
                                    <DataTemplate DataType="{x:Type vm:ActionInputViewModel}">
                                        <TextBlock Text="Input"/>
                                    </DataTemplate>
                                    <DataTemplate DataType="{x:Type vm:ActionOutputViewModel}">
                                        <TextBlock Text="Output"/>
                                    </DataTemplate>
                                </ContentControl.Resources>
                            </ContentControl>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
                <GridViewColumn Header="Value">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <ContentControl Content="{Binding}">
                                <ContentControl.Resources>
                                    <DataTemplate DataType="{x:Type vm:ActionInputViewModel}">
                                        <TextBlock Text="{Binding Property1}"/>
                                    </DataTemplate>
                                    <DataTemplate DataType="{x:Type vm:ActionOutputViewModel}">
                                        <TextBlock Text="{Binding Property2}"/>
                                    </DataTemplate>
                                </ContentControl.Resources>
                            </ContentControl>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView> 
```

无论哪种方式都应该给你相同的结果。

# ios - 如何在 iOS 5.x 上删除自动完成字典数据？

> ID：14652520
> 
> 赞同：1
> 
> 时间：2013-02-01T18:14:36.367
> 
> 标签：ios, caching, autocomplete, keyboard

我正在尝试为我的安全应用程序关闭 iPhone 中自动完成字典数据的存储。我想防止数据泄露。我发现字典存储在以下路径下的信息：/var/mobile/Library/Keyboard。所以解决方法很简单。当应用程序进入前台时，我缓存路径下的所有文件。当应用程序确实进入后台时，我从缓存中恢复数据。因此，在我的应用程序工作时添加到字典中的所有新单词都不会被存储。它工作得很好，但只在 iOS 6.x 上......

在 iOS 5.x 上，我学习了字典一些生词，然后进入后台，然后返回应用程序，自动完成功能记住了生词。我检查了路径下的数据，它没有这些新词！此外，在另一个应用程序中，自动完成功能并不“知道”这些新词！当我重新启动我的应用程序时，新词是未知的。这意味着必须有另一种机制或本地文件来存储这些信息，仅用于工作应用程序。

如何从装有 iOS 5.x 的设备中永久删除所有自动完成字典数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:22:45.273

不要在您的安全字段上启用自动完成功能。无论如何，这只是一种烦恼，因为用户名和密码之类的东西不适合它。这方面的文档在[这里](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/occ/intfp/UITextInputTraits/autocorrectionType)。

自动完成字典是，AFAIK，对 iOS 来说是全局的，并且您提到的解决方案无法在设备上运行（它可能在模拟器上运行），因为您的应用程序无法访问该文件夹。

# ntlm - 无法解析 NTLM 的 www-authenticate，值似乎太短？

> ID：14652521
> 
> 赞同：0
> 
> 时间：2013-02-01T18:14:38.953
> 
> 标签：ntlm

我正在尝试对我公司的一台服务器进行身份验证。我最初的连接尝试返回带有标题的 401：

```
www-authenticate: NTLM TlRMTVNTUAACAAAAAAAAACgAAAABggAAVU9wgQTnlrgAAAAAAAAAAA== 
```

解析base64部分，我得到这个：

```
0000   4E 54 4C 4D 53 53 50 00 02 00 00 00 00 00 00 00    NTLMSSP.........
0010   28 00 00 00 01 82 00 00 B6 70 AC 57 8C D0 07 44    (........p.W...D
0020   00 00 00 00 00 00 00 00                            ........ 
```

这反过来又解析为：

```
Signature = NTLMSSP
msg_type = 2
TargetNameLen = 0
TargetNameMaxLen = 0
TargetNameOffset = 40
NegotiateFlags = 0x8201
ServerChallenge = B6 70 AC 57 8C D0 07 44 
```

这是我应该提到我自己没有解析这个的地方。我认为这并不重要，但我使用的是 Python 2.7，新安装的 python_ntlm-1.0.1 和 requests-ntlm 0.0.2.1 副本，并且 ntlm 模块在其 parse_NTLM_CHALLENGE_MESSAGE 例程中崩溃，因为数据包太短. 从偏移量 0x0020 开始，显然应该有一个 16 字节的保留区域，后跟三个 32 位整数，而不是保留区域中只有 8 个字节的十六进制 00，其他数字丢失。这是我第一次需要比基本身份验证更多的东西。我怀疑 TargetNameLen 为 0 意味着一些特殊的东西，但是在我向 python_ntlm 维护者提交错误报告之前，有人可以帮我解释我得到的数据吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:36:07.787

事实证明，问题在于如何解释 NegotiateFlags 字段。根据微软发布的规范，有两点感兴趣。如果未设置 NTLMSSP_REQUEST_TARGET 标志，则不需要 TargetName，而如果未设置 NTLMSSP_NEGOTIATE_TARGET_INFO，则不需要 TargetInfo。但是，由于多年来数据包格式的演变，TargetName 字段在 NegotiateFlags 之前，因此即使被忽略，它们也必须存在并填零。另一方面，TargetInfo 字段出现在 NegotiateFlags 字段之后，因此可以省略，留下一个较短的数据包。我已经向 python-ntlm 项目提交了一个补丁，一切都应该很快得到修复。我正在提供这个解决方案，以防万一其他人在将来编写自己的身份验证代码时遇到问题。

# vb6 - 无法从我的 InstallShield 脚本启动另一个安装程序

> ID：14652524
> 
> 赞同：0
> 
> 时间：2013-02-01T18:14:50.250
> 
> 标签：vb6, installshield, installscript

我必须将用于安装 VB6 应用程序的旧 InstallShield 脚本从 InstallShield 2008 转换为 InstallShield 2011。

不幸的是，InstallShield 2011 不再支持运行时的部署（使用合并模块 IIRC）。

我试图通过执行我的 InstallShield 脚本中的 VB6 运行时安装程序 (vbrun60sp6.exe) 来替换它（并且可能仅在 XP 上运行时，因为 VB6 运行时显然与 Vista 及更高版本的操作系统一起分发）。

不幸的是，由于某种原因，我对 LaunchApplication 的调用失败了，并且由于我有限的 InstallShield 脚本经验，我不知道如何获得详细的错误消息。

我可能做错了什么，如何获得更详细的错误消息来帮助我找出问题？

谢谢！

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:43:55.177

事实证明，我传递给 LaunchApplication 调用的路径存在问题。

一旦我得到返回码并将它传递给 FormatMessage 来解释它，事情就开始查找了......

我添加了一个测试来检查 Windows 版本，因为我只想在程序在 XP 下运行并且生成的安装程序现在的行为非常接近我希望它的行为时安装这些运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T15:55:10.857

听起来您需要安装世界中所谓的“先决条件”。在 installscript 和 MSI 项目中，Installshield 允许您在开始设置之前安装您的应用程序可能需要的其他应用程序。事实上，MSI 项目的先决条件更易于管理和配置。它允许您定义条件（平台、操作系统版本等），这些条件将在运行时确定在开始设置之前安装哪些补充应用程序。

# facebook - 喜欢按钮去错误的 URL

> ID：14652525
> 
> 赞同：0
> 
> 时间：2013-02-01T18:14:55.273
> 
> 标签：facebook, button, facebook-like

当我插入我的喜欢按钮代码时：

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fexample.com%2Fpage%2Fto%2Flike&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;colorscheme=light&amp;action=like&amp;height=35" 
scrolling="no" frameborder="0" 
style="border:none; overflow:hidden; width:450px; height:35px;" 
allowTransparency="true"></iframe> 
```

它不会将人带到我输入表单的 URL (www.theREALmeMAGAZINE.com) 我尝试取出“www.facebook.com/plugins/like.php?” 它列在代码的第一行并将我的 URL 放在它的位置，但它不起作用。

我正在使用 Weebly 来构建我的网站，它说要使用“iframe”代码。我按照他们的确切说明进行操作，但是当您单击按钮时，它会将我带到“示例域”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:19:51.917

您应该`http%3A%2F%2Fexample.com%2Fpage%2Fto%2Flike`用您的 URL 替换该部分（而不是其他部分）。例如，使用[http://meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)将 URL 字符串编码为正确的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:20:54.730

您必须替换`http%3A%2F%2Fexample.com%2Fpage%2Fto%2Flike`您提供给我们的代码`http%3A%2F%2Frealmemagazine.com%2F`并保持代码的另一部分完整，因为它设置了高度、发送按钮、布局等细节。

这是正确的代码：

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Frealmemagazine.com%2F&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;colorscheme=light&amp;action=like&amp;height=35" 
scrolling="no" frameborder="0" 
style="border:none; overflow:hidden; width:450px; height:35px;" 
allowTransparency="true"></iframe> 
```

[Facebook Like 按钮工具](https://developers.facebook.com/docs/reference/plugins/like/ "Facebook 点赞工具")也可用。在那里，您只需填写表格即可获得完整的代码。如果您不想这样做，您可以使用 JavaScript`escape(URL)`或 PHP with对您的 URL 进行编码`urlencode()`，或者使用可以让您完成这项工作的[在线工具。](http://meyerweb.com/eric/tools/dencoder/ "Meyerweb URL 编码器")

# jquery - jquery ajax 在加载而不是模糊时被触发

> ID：14652531
> 
> 赞同：0
> 
> 时间：2013-02-01T18:15:06.743
> 
> 标签：jquery, asp.net-mvc-4

我有一个名为 applyToDetailRows 的函数，我在加载时调用它，以及当我的页面的输入部分通过 ajax 重新绘制时调用。此函数将一堆事件附加到绘制的输入字段。字段上的事件之一是模糊，它触发 ajax 调用以获取学生信息。**问题是每次页面加载**每个字段时都会触发 blur ajax 触发器，而不是**在 blur 上**触发。只有当函数在 applyToDetailRows 中定义时才会发生这种情况。如果我将它从 applyToDetailRows 中拉出来，它就可以正常工作。

需要注意的一件事是，我也以类似的方式在 applyToDetailRows 中定义了自动完成功能，并且效果很好。但不是这个。

```
 function applyToDetailRows() {
        $(":input[data-getstudent]").each(function() {
            $(this).on('blur', function () {
                var elem = this;
                $.ajax({
                    url: $(elem).attr('data-getstudent'),
                    dataType: "json",
                    data: {
                        studentNumber: $(elem).val()
                    },
                    success: function (result) {
                    }
                });
            });
        });
    }

/* some other definitions */

//applyToDetailRows called

applyToDetailRows(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:39:34.873

您更愿意使用事件委托，而不是在每次请求后重新应用该函数，因为您可能绑定错误或不止一次。

```
$(document).on("blur", ":input[data-getstudent]", function(){
  /* AJAX */
}); 
```

您可以用DOM 树中比它更接近它们`document`的所有元素的公共父级替换。`input`

# java - 删除 ASCII 颜色代码

> ID：14652538
> 
> 赞同：13
> 
> 时间：2013-02-01T18:15:24.257
> 
> 标签：java, colors, replace, ascii, color-codes

所以，我有一个问题。我正在从记录器中捕获一些东西，输出看起来像这样：

```
11:41:19 [INFO] ←[35;1m[Server] hi←[m 
```

我需要知道如何删除那些讨厌的 ASCII 颜色代码（或解析它们）。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-01T18:28:45.603

如果它们是完整的，它们应该由 ESC ( `U+001B`)`[`加上一个分号分隔的数字列表，加上`m`。（请参阅[https://stackoverflow.com/a/9943250/978917](https://stackoverflow.com/a/9943250/978917)。）在这种情况下，您可以通过以下方式删除它们：

```
final String msgWithoutColorCodes =
    msgWithColorCodes.replaceAll("\u001B\\[[;\\d]*m", ""); 
```

. . . `less -r`或者您可以在检查日志时使用它们来利用它们。:-)

（注意：这是特定于颜色代码的。如果您还发现其他 ANSI 转义序列，则需要对其进行概括。我认为一个相当通用的正则表达式是`\u001B\\[[;\\d]*[ -/]*[@-~]`。您可以找到[http://en.wikipedia.org /wiki/ANSI_escape_code](http://en.wikipedia.org/wiki/ANSI_escape_code)会有所帮助。）

如果序列*不*完整——也就是说，如果它们以某种方式被破坏了——那么你必须调查并弄清楚到底发生了什么破坏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T18:28:25.617

这个正则表达式怎么样

`replaceAll("\\d{1,2}(;\\d{1,2})?", "");`

基于此处找到的格式：http: [//bluesock.org/~willg/dev/ansi.html](http://bluesock.org/~willg/dev/ansi.html)

# java - 在 java 中重新使用 C++ 图形代码

> ID：14652539
> 
> 赞同：1
> 
> 时间：2013-02-01T18:15:29.060
> 
> 标签：java, c++

我有一些已经使用图形编写的 C++ 代码。

有没有办法在java中重新使用该代码？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:16:49.047

您可以通过 JNI 或 JNA 调用它。

# c++ - 使用 boost::thread 时出现 Visual Studio 2010 链接器错误

> ID：14652541
> 
> 赞同：1
> 
> 时间：2013-02-01T18:15:42.463
> 
> 标签：c++, boost, visual-studio-2012

我正在尝试在 Visual Studio 2010中使用**C++ Boost 线程库**，但在包含需要**boost libs的****线程库**时出现链接器错误。

 **这是包含后的链接器错误`<boost/thread/thread.hpp>`

> 错误 2 错误 LNK2001：无法解析的外部符号“class boost::system::error_category const & __cdecl boost::system::generic_category(void)”(?generic_category@system@boost@@YAAEBVerror_category@12@XZ)

经过一番研究，我得到的印象是，这个错误可能是由错误的安装或安装错误的构建版本引起的，所以这是我采取的安装步骤。

1.  `boost_1_51_setup.exe`从 [http://www.boostpro.com/download/](http://www.boostpro.com/download/)下载

2.  运行安装程序，选择线程和库页面上的所有复选框

3.  允许安装程序将环境变量添加到操作系统路径

4.  在 Visual Studio 项目中添加`C:\Program Files\boost\boost_1_51` 到 C/C++ 中的附加依赖项-> 常规

5.  最后添加`C:\Program Files\boost\boost_1_51\lib`到 Linker->General 中的附加库

我已经三重检查了所有路径，一切看起来都很好。并多次阅读提升入门页面......我找不到我缺少的东西。

我正在运行 Windows 8 x64，尽管我认为这没有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:21:35.510

在解决方案资源管理器中右键单击您的项目，然后单击属性。

转到 VC++ 目录选项卡并添加 boost 库，执行“库目录”。

您还可以将包含文件夹添加到“包含目录”部分。**

# javascript - 访问 Websocket.onmessage() 之外的变量

> ID：14652543
> 
> 赞同：2
> 
> 时间：2013-02-01T18:15:46.347
> 
> 标签：javascript, node.js, websocket

这个问题涉及 NodeJS 中的 WebSocket API（即 var webSocketServer = require('websocket').server;)。

```
function Game(canvas) {
    this.wArray;
    this.runConnection();
    // I want to be able to see changes in variables at this point
    console.log(this.wArray[1][2]); // is out of scope or something
}

_p = Game.prototype;

_p.runConnection = function() {
    this.connection = new WebSocket('ws://localhost:1337');
    this.connection.onmessage = function (message) {
           this.wArray = JSON.parse(message.data);
    };
    // code here runs before code inside onmessage, it must be asychronous
}; 
```

因此，当我收到来自服务器的消息时，我应该能够接收该消息并更新我的代码中的一些变量等。目前，似乎我所能做的就是更新 onmessage 函数内部的内容。所有在线示例都只是向人们展示了在 onmessage 中使用 console.log()。我希望服务器能够发送我的客户端信息，然后在游戏运行时使用该信息更新游戏的某些方面。我认为 onmessage() 存在某种程度的异步性。

请告诉我如何获取通过 WebSocket.onmessage() 传递给我的数据并将其存储在可以在我的游戏中访问的变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-09T02:42:57.003

onMessage 作为回调函数异步触发。因此，您必须注意您正在使用的变量范围。有多种使用可能性：代理、更改的范围、功能`bind()`等，您可以搜索先前的答案。（有许多）

举个简单的例子，你可能会在其他地方使用 self 变量来访问它；但是，这显然取决于整个脚本的目的。

```
function Game(canvas) {
    this.wArray = [];
    this.runConnection();
    console.log(this.wArray[1][2]); 
   //log()  will likely not work as you should wait for [1][2] to be filled
}

_p = new Game();

_p.runConnection = function() {
    this.connection = new WebSocket('ws://localhost:1337');
    var self = this;
    this.connection.onmessage = function (message) {
           self.wArray.push(JSON.parse(message.data));
        };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:50:40.817

我建议查看 now.js，它允许客户端和服务器在同一个命名空间中运行，这允许两端共享内容。

编辑..

我仍在研究这显然事情正在发展。这个线程解释它[链接](https://stackoverflow.com/questions/14476943/is-nowjs-scrapped)

# c# - 绑定到列表的下拉列表不返回正确的值，也不选择正确的项目

> ID：14652546
> 
> 赞同：1
> 
> 时间：2013-02-01T18:16:00.860
> 
> 标签：c#, winforms, data-binding

我已经构建了一个接口，在该接口中我将一个`List<TripStop>`对象绑定到它并要求下拉列表使用：

```
//Convert the TripStop dictionnary to a list for databinding
StartStop.DataSource = EditorPlugin.getTripStops().Values.ToList();
StartStop.ValueMember = "Id";
StartStop.DisplayMember = "NameFr"; 
```

Id 和 NameFr 作为 Value/DisplayMembers。

如果我在绑定后检查数据源，我会看到我的所有数据都正确绑定，每个对象的每个属性都很好，我的数据没有损坏。

问题？如果我选择某些东西并查看 SelectedValue，我会得到错误的值，我会得到一个完全不同的项目的“Id”。

反向是一样的，我加载表单并要求 DropDownList ：

```
StartStop.SelectedValue = EditorObject.StartStop; 
```

我看到的是与我要求它选择的实际价值完全不同的项目。例如，我要求第 4 项，我选择了第 14 项。我在列表中选择项目#4，SelectedValue 是#14。

指数和价值之间没有相关性。

更奇怪的是，如果我这样做：

```
EditorObject.StartStop = (UInt32)((TripStop)StartStop.SelectedItem).Id; 
```

这种方法工作正常，我从选定的项目中得到正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:05:24.830

您是否偶然检查了 SelectedIndexChanged 或 SelectedValueChanged 中选择的值？我对此有一些问题，因为程序分配与用户选择的分配因此切换到 SelectionChangeCommitted。这是一个我知道有效的例子......

```
// On Load...
city_IDComboBox.DataSource = context.Cities.Local.ToBindingList();
city_IDComboBox.DisplayMember = "Name";
city_IDComboBox.ValueMember = "ID";

// Checking value of selection, acting on it
private void city_IDComboBox_SelectionChangeCommitted(object sender, EventArgs e)
{
   var currentCounty = county_IDComboBox.SelectedItem as County;
   var currentCity = city_IDComboBox.SelectedItem as City;
   if (currentCity != null)
   {
      if (currentCounty != null)
      {
         if (currentCity.County_ID == currentCounty.ID)
            return;
      }
      county_IDComboBox.SelectedValue = currentCity.County_ID;
   }
   else
   {
      county_IDComboBox.SelectedItem = null;
   }
} 
```

# excel - Excel输入框输入后重新打开

> ID：14652548
> 
> 赞同：1
> 
> 时间：2013-02-01T18:16:06.473
> 
> 标签：excel, vba, inputbox

在 Excel 中有宏，它使用 application.inputbox 在单元格中保存日期。输入日期后，格式正确的日期出现在单元格中，然后输入框再次打开。它似乎陷入了这个奇怪的循环。无论我输入多少次它再次询问的日期。

这是这段代码：

```
Function freshSTART()

redBOX.Cells(1).Value = Application.InputBox(prompt:="Enter todays date: ", Title:="TODAY'S DATE", Type:=1)
redBOX.Cells(2).Value = Application.InputBox(prompt:="Enter customer's name: ", Title:="CUSTOMER NAME", Type:=2)
redBOX.Cells(3).Value = Application.InputBox(prompt:="Enter travel out date: ", Title:="TRAVEL OUT DATE", Type:=1)
redBOX.Cells(4).Value = Application.InputBox(prompt:="Enter travel back date: ", Title:="TRAVEL BACK DATE", Type:=1)
redBOX.Cells(5).Value = Application.InputBox(prompt:="Enter number of technicians: ", Title:="TECHNICIANS", Type:=1)
redBOX.Cells(6).Value = Application.InputBox(prompt:="Enter number of engineers: ", Title:="ENGINEERS", Type:=1)
redBOX.Cells(7).Value = Application.InputBox(prompt:="Enter location: ", Title:="LOCATION", Type:=2)

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:59:00.720

你既不是`passing a parameter`也没有得到一个`value returned`. 在这种情况下，拥有 a`function`但 a没有用`Subroutine`。

你是在调用这个函数`Worksheet changed`还是`Cell changed`事件？请`Application.EnableEvents = False`在触发上述事件的功能时使用。您必须关闭事件，否则它将不断重复自身并拖入无限循环。

然后在`change event`回合事件中重新开始。

参考：

*   [如何阻止 Excel 在 Workbook_BeforeSave 之前触发 Worksheet_Change？](https://stackoverflow.com/questions/8819394/how-to-stop-excel-from-firing-worksheet-change-before-workbook-beforesave)
*   [活动](http://www.cpearson.com/excel/events.htm)

# c++ - collect2: ld 返回 1 退出状态错误

> ID：14652549
> 
> 赞同：2
> 
> 时间：2013-02-01T18:16:08.970
> 
> 标签：c++

我有三个文件，如下所示：

**电影.h**

```
struct Movie{
    char title[30];         // the hour of the current time
    char director[30];          // the minute of the current time
    int length;
} ;

void printMovieInfo(Movie *s); 
```

**电影.cpp**

```
#include <iostream>
#include <cstdlib>
#include <cstring>
#include <cmath>

#include "Movie.h"

using namespace std;

void printMovieInfo(Movie *s){

    cout << "Hi";

} 
```

**和一个主要的文件**

```
#include "Movie.cpp"
using namespace std;

int main()
{
    struct Movie *m;
    printMovieInfo(m);
} 
```

当我运行程序时，我收到以下错误：

```
 collect2 ld returned 1 exit status 
```

和警告：

```
/tmp/ccIe4dlt.o In function `printMovieInfo()':
Movie.cpp (.text+0x0): multiple definition of `printMovieInfo()'
/tmp/cc91xrNB.o HelloWorld.cpp:(.text+0x0): first defined here 
```

我只想调用一个函数来打印“Hi”，但我不知道为什么会出现这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:19:00.950

不要用`#include "movie.cpp"`你想要的`#include "movie.h"`！

包含“.cpp”文件的正确做法极为罕见——它们被编译为单独的单元，然后由链接器（此处称为`collect2`）链接在一起。

# spring - 从 OrderList PrimeFaces 中获取选定的行

> ID：14652550
> 
> 赞同：0
> 
> 时间：2013-02-01T18:16:10.450
> 
> 标签：spring, jsf, primefaces

一切正常（动作被调用，ui 渲染正确，等等）。除了当我尝试获取所选对象时不断收到 NullPointerException（即使我使用 setPropertyActionListener 设置它）...我如何才能真正获得我在 orderList 上单击的行。我做了一个转换器，但仍然没有把我带到哪里。

```
<p:orderList value="#{userProfileModel.personnalTaskMacroList}" 
    var="personnalTaskMacro" iconOnly="true" effect="clip"
    itemValue="#{personnalTaskMacro}" converter="personnalTaskMacroConverterId" 
    controlsLocation="right" id="personnalTaskMacroList">

  <p:column style="width:50%;">
    #{personnalTaskMacro.taskMacro.macroTitle}
  </p:column>

  <p:column style="width:30%;">
    #{personnalTaskMacro.isFavorite}
  </p:column>

  <p:column style="width:20%;">
    <p:commandButton id="addTaskMacroToFavoriteCommandButton" 
        action="userProfile.addTaskMacroToFavorite"
        onclick="jQuery.simpleBlockUI();cleanWatermark();"
        oncomplete="jQuery.unblockUI();showWatermark();"
        onerror="jQuery.unblockUI();" icon="ui-icon-search">
      <f:setPropertyActionListener
          target="#{userProfileModel.selectedPersonnalTaskMacro}"
          value="#{personnalTaskMacro}" />       
    </p:commandButton>
  </p:column>
</p:orderList> 
```

我使用 webflow 来处理动作（xml）。

```
 <transition on="userProfile.addTaskMacroToFavorite">
 <evaluate      expression="extUserProfileController.addTaskMacroToFavorite(userProfileModel)"/>
            <render fragments="userProfilePersonnalMacrosFragment" />
 </transition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:11:26.110

这是一个已知问题，基本上，它不是数据组件，您不能使用 f:setPropertyActionListener。：/

[http://code.google.com/p/primefaces/issues/detail?id=2713](http://code.google.com/p/primefaces/issues/detail?id=2713)

# asp.net - 使用 UserControls 嵌套 FormView，事件未正确触发

> ID：14652552
> 
> 赞同：-1
> 
> 时间：2013-02-01T18:16:17.240
> 
> 标签：asp.net, gridview, user-controls, nested, formview

我正在修改一个非常复杂的表格。此表单有多个子表单。最初的化身是创建所有这些隐藏的面板等等（不是我的设计，我正在尝试修复）。

我最终得到的是一个 FormView，其中编辑模式由一个典型的表单组成，并且有一个子表单。现在，子窗体在 ReadOnly 模式下显示一个 GridView，它与回调编辑方法相关联，该方法会将子窗体的索引更改为正确的索引并将其更改为编辑模式。这些的所有数据都通过SqlDataObjects。

为了简化过程，我将子窗体放入用户控件中，并将用户控件包含在主窗体的 Edit 和 ReadOnly 部分中。因此，当主窗体为 ReadOnly 时，它会在默认模式下显示用户控件，即 ReadOnly 从而显示网格。这部分工作得很好。

当用户在编辑模式下打开主窗体时，子窗体会按预期以网格模式显示（并且网格中包含编辑按钮的列呈现可见）。这也很好。

当我单击编辑按钮并将表单更改为编辑模式时，一切都按预期工作。我可以看到通过主窗体到子窗体的流程（通过调试）正在按预期进行。

现在，当我单击更新按钮时，它只是一个设置了 CommandName 的简单 LinkBut​​ton（就像其他有效的表单视图一样）我注意到回调转到子表单（跳过主表单的数据绑定——这也是期望），但更新调用永远不会呈现给 SqlDataObject。

我的每个 SqlDataObjects 都有一个 OnUpdating/OnInserting/OnSelecting 仅用于调试目的，它从未被命中。回发后，用户控件直接进入只读模式。我认为这不是 DataBinding 问题。

有人用嵌套表单控件看到过这个吗？具体来说，包含嵌套在 FormView 中的 FormView 的用户控件？

我不会放弃整个 UserControl 并将子窗体直接放在主窗体中，但我宁愿知道正确的解决方案，直到它工作为止......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:47:30.883

似乎处理来自嵌套表单视图的回调需要将其视为动态控件，即使它是模板的一部分。当子表单被强制进入编辑模式（通过将其设置为默认值）时，它会按预期处理回发。当它保留默认设置时，它无法按预期处理回发。

我想提供一些示例代码，我可能会在以后这样做（这就是为什么我假设我在发布后的一分钟内得到 -1）但似乎没有任何关于嵌套的功能示例表格（无论如何都可以使用的样本）。

简短的解决方法是将第二个表单放在第一个表单的范围之外（但仍在同一个用户控件内），然后执行几个回调以进行更改检测。

话虽如此，如果您在表单中有表单，并且他们的 b

# php - 如何使用 Zend Framework 2 解析原始电子邮件？

> ID：14652557
> 
> 赞同：1
> 
> 时间：2013-02-01T18:16:48.020
> 
> 标签：php, email, zend-framework2

我有电子邮件发送到我的服务器，并通过管道传输到我的 Zend Framework 2 索引（遵循 MVC），然后发送到我的控制器。

```
public function incomingMailAction()
{
    $message ='';
    $stdin = fopen('php://stdin', 'r');

    while($line = fgets($stdin)) {
        $message .= $line;
    }

    fclose($stdin);

    // Parse e-mail here and store in database (including attachments)
} 
```

我可以处理数据库部分的存储，我只是不知道如何获取原始消息，然后将其变成有用的东西（收件人、发件人、回复到、抄送、密件抄送、标题、附件......等）。

# 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:05:48.710

您可以使用`Zend\Mail\Message::fromString($rawMessage);`它不会解码 MIME 正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T16:44:21.790

我也尝试使用 ZF2 解析电子邮件，但实际上我在 Zend Mail 组件的源代码中发现了一条注释，即解码消息位于待办事项列表中，尚未实现。目前似乎没有简单的方法可以做到这一点。

相反，我建议使用[php-mime-mail-parser](https://github.com/php-mime-mail-parser/php-mime-mail-parser) - 我最终使用了那个库。它使用 pecl 扩展 mailparse 的功能（您可能需要安装）并且非常简单。一些可以帮助您入门的示例：

```
$message = new \PhpMimeMailParser\Parser();
$message->setText($rawMail); // Other functions to set a filename exists too

// All headers are retrieved in lowercase, "To" becomes "to"
// and "X-Mailer" becomes "x-mailer"
$recipient = $message->getHeader('to');
$date = $message->getHeader('date');
$xmailer = $message->getHeader('x-mailer');

// All headers can be retrieved at once as a simple array
$headers = $message->getHeaders();
$recipient = $headers['to'];

// Attachments can be retrieved all at once as "Attachment" objects
$attachments = $message->getAttachments();

foreach($attachments as $attachment) {
  $attachment_as_array = array(
    'type' => $attachment->getContentType(),
    'name' => $attachment->getFilename(),
    'content' => (string)$attachment->getContent(),
  );
} 
```

因为该库使用 PHP 的现有扩展并且在内存管理方面似乎非常有效，所以它可能比 ZF 更适合解析电子邮件 - 而且它也非常易于使用。对我来说唯一的缺点是在每台服务器上额外安装了 mailparse pecl 扩展。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T18:22:43.527

```
public function incomingMailAction()
{
    $message ='';
    $stdin = fopen('php://stdin', 'r');

    while($line = fgets($stdin)) {
        $email .= $line;
    }     

    fclose($stdin);

    $to1 = explode ("\nTo: ", $email);
    $to2 = explode ("\n", $to1[1]);
    $to = str_replace ('>', '', str_replace('<', '', $to2[0]));
    list($toa, $tob) = explode('@', $to);
} 
```

窃取自：[PHP 电子邮件管道获取“到”字段](https://stackoverflow.com/questions/13548859/php-email-piping-get-to-field)

# .net - 有没有办法使用 ReSharper 自动生成 GetHashCode 和 Equals？

> ID：14652567
> 
> 赞同：42
> 
> 时间：2013-02-01T18:17:31.540
> 
> 标签：.net, visual-studio, resharper, equals, hashcode

在eclipse中，当我用Java编写代码时，有一个功能可以自动生成一个基本的、高效的、无错误的实现，`hashCode()`并且`equals()`不消耗脑力。

Visual Studio 或 ReSharper 中是否内置了类似的功能？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-01T18:31:06.600

是的，Resharper 可以做到这一点。将光标放在您的类型中，打开“生成代码”菜单（`Alt`+`Ins`取决于设置或*Resharper -> 编辑 -> 生成代码*），然后选择“平等成员”：

![生成代码菜单](../Images/d5d6bd12e50716110c4d757c53b6eab6.png)

这将打开一个窗口，您可以在其中选择用于相等的成员，以及有关生成代码的一些选项（例如，您的类型是否应该实现`IEquatable<T>`）：

![生成平等成员窗口](../Images/0db66328056c92ef3b6b61fa71f27ee5.png)

如果您从具有两个属性的简单类型开始：

```
class Person
{
    public string FirstName { get; private set; }
    public string LastName { get; private set; }
} 
```

然后生成的代码可能类似于：

```
class Person : IEquatable<Person>
{
    public string FirstName { get; private set; }
    public string LastName { get; private set; }

    public bool Equals(Person other)
    {
        if (ReferenceEquals(null, other))
            return false;
        if (ReferenceEquals(this, other))
            return true;
        return string.Equals(FirstName, other.FirstName) && string.Equals(LastName, other.LastName);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj))
            return false;
        if (ReferenceEquals(this, obj))
            return true;
        if (obj.GetType() != this.GetType())
            return false;
        return Equals((Person)obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            return ((FirstName != null ? FirstName.GetHashCode() : 0) * 397) ^ (LastName != null ? LastName.GetHashCode() : 0);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-25T11:57:54.693

既然您问 Visual Studio 是否也可以这样做：自 XI.2017 以来，它最终可以生成一些有用的东西。

在类中使用`ctr`+`.`并选择“生成 Equals 和 GetHashCode”

见[https://stackoverflow.com/a/48441971/4547594](https://stackoverflow.com/a/48441971/4547594)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-13T18:04:53.370

使用 Visual Studio 本身的真正解决方案。有一个内置机制，可以生成这些函数：

1.  将光标放在类型声明行的某处。
2.  单击出现在左边距中的螺丝刀图标。
3.  从下拉菜单中选择 Generate Equals(object) 或 Generate Equals and GetHashCode。

图片说明： [https ://docs.microsoft.com/en-us/visualstudio/ide/reference/generate-equals-gethashcode-methods?view=vs-2019#how-to](https://docs.microsoft.com/en-us/visualstudio/ide/reference/generate-equals-gethashcode-methods?view=vs-2019#how-to)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-30T23:17:35.587

您可以使用 C# IEquitable 接口，它会自动为您生成这些方法。

# python - Django外键分配

> ID：14652568
> 
> 赞同：4
> 
> 时间：2013-02-01T18:17:41.360
> 
> 标签：python, django

我对 Django 很陌生，这让我很难过。

我正在开发一个调度工具，到目前为止有两个模型：

```
#----------------------------------------------------------------------------------

class ReccurenceEvent(models.Model):
    """
    A recurrence event defined an event which recurses over a period of time. The pattern of the recursion
    is defined within the rec_type attribute.
    """
    event_id = models.IntegerField(primary_key=True)
    start_date = models.DateTimeField()
    end_date = models.DateTimeField()
    text = models.CharField(max_length=30)
    rec_type = models.CharField(max_length=32)
    event_length = models.BigIntegerField(null=True)

#----------------------------------------------------------------------------------

class Event(models.Model):
    """
    A an event represents an independent calender event. 
    If the event relates to a series, the p_id points to a particular ReccurencePattern
    """
    event_id = models.IntegerField(primary_key=True)
    start_date = models.DateTimeField()
    end_date = models.DateTimeField()
    text = models.CharField(max_length=30)
    rec_type = models.CharField(max_length=32)
    event_length = models.BigIntegerField(null=True)

    event_pid = models.ForeignKey(ReccurenceEvent, null=True) 
```

在某些情况下，我想将父事件 id (event_pid) 分配给事件，但这应该是一个整数值，而不是对对象的引用。

当我执行以下操作时：

```
e.event_pid = event_pid 
```

我收到以下消息：

```
Cannot assign "u'1359741862566'": "Event.event_pid" must be a "ReccurenceEvent" instance. 
```

好的，但是如果提供一个重复实例：

```
e.event_pid = ReccurenceEvent.objects.get(event_id = event_pid) 
```

我没有在响应中存储我需要的整数值。

有人能指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:23:45.883

如果你查看你的数据库，外键是一个整数值！但是由于 django orm，您可以根据对象而不是数字进行交互

要获取 ForeignKey 的整数，您应该能够通过它访问它`event_id`

`e.event_pid.event_id`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:24:52.073

您可以通过查看 e.event_pid.event_id 在视图中访问 RecurrenceEvent 的 id。

但是我认为您错误地命名了模型的字段。

```
class ReccurenceEvent(models.Model):

    event_id = models.IntegerField(primary_key=True)
    start_date = models.DateTimeField()
    end_date = models.DateTimeField()
    text = models.CharField(max_length=30)
    rec_type = models.CharField(max_length=32)
    event_length = models.BigIntegerField(null=True)

class Event(models.Model):

    start_date = models.DateTimeField()
    end_date = models.DateTimeField()
    text = models.CharField(max_length=30)
    rec_type = models.CharField(max_length=32)
    event_length = models.BigIntegerField(null=True)

    reccurance = models.ForeignKey(ReccurenceEvent, null=True) 
```

然后您只需通过事件访问 RecurranceEvent 的属性。此外，您不需要显式添加主键。Django 为你做这件事。它在`.id`和可用`.pk`。

`e.reccurance.id`您的视图/模板中需要的整数也是如此。

# android - 未调用 Android 侦听器语音识别

> ID：14652575
> 
> 赞同：0
> 
> 时间：2013-02-01T18:18:26.833
> 
> 标签：android, listener

我正在尝试使用 SpeechRecognizer 类在 Android 上进行语音识别，并将其影响为 RecognitionListener。

问题：未调用受影响的侦听器。

这是我的主要活动的代码：

```
package com.example.testvoicepaper;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.speech.RecognitionListener;
import android.speech.RecognizerIntent;
import android.speech.SpeechRecognizer;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnKeyListener;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class MainActivity extends Activity {

public int VOICE_RECOGNITION_REQUEST_CODE = 1;
private Button launchRecognition;
private TextView textRecognised;
private ImageView picture;
private SpeechRecognizer sr;
private Context context;
private MyRecognitionListener listener;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    textRecognised = (TextView) findViewById(R.id.textRecognised);
    launchRecognition = (Button) findViewById(R.id.launchRecognition);
    picture = (ImageView) findViewById(R.id.picture);
    context = this;

    sr = SpeechRecognizer.createSpeechRecognizer(getApplicationContext());
    listener = new MyRecognitionListener();
    sr.setRecognitionListener(listener);

    launchRecognition.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch (event.getAction()) {

            case MotionEvent.ACTION_DOWN: {
                sr.startListening(RecognizerIntent.getVoiceDetailsIntent(context));
                listener.onBeginningOfSpeech();
                break;
            }

            case MotionEvent.ACTION_UP: {
                listener.onEndOfSpeech();
                sr.stopListening();
                break;
            }
            }
            return false;

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

class MyRecognitionListener implements RecognitionListener {

    @Override
    public void onBeginningOfSpeech() {
        Log.d("Speech", "onBeginningOfSpeech");
    }

    @Override
    public void onBufferReceived(byte[] buffer) {
        Log.d("Speech", "onBufferReceived");
    }

    @Override
    public void onEndOfSpeech() {
        Log.d("Speech", "onEndOfSpeech");
    }

    @Override
    public void onError(int error) {
        Log.d("Speech", "onError" + error);
    }

    @Override
    public void onEvent(int eventType, Bundle params) {
        Log.d("Speech", "onEvent");
    }

    @Override
    public void onPartialResults(Bundle partialResults) {
        Log.d("Speech", "onPartialResults");
    }

    @Override
    public void onReadyForSpeech(Bundle params) {
        Log.d("Speech", "onReadyForSpeech");
    }

    @Override
    public void onResults(Bundle results) {
        Log.d("Speech", "onResults");
        ArrayList strlist = results.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);
        for (int i = 0; i < strlist.size();i++ ) {
            Log.d("Speech", "result=" + strlist.get(i));
        }
    }

    @Override
    public void onRmsChanged(float rmsdB) {
        Log.d("Speech", "onRmsChanged");
    }

}
} 
```

它调用 beginOfSpeech() 和 endOfSpeech() 但从不调用侦听器函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-27T12:58:43.137

确保您的应用启用了 RECORD_AUDIO 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:52:51.053

这是错误`Intent`的使用

```
RecognizerIntent.getVoiceDetailsIntent(context)) 
```

你想要类似的东西

```
 Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, prompt); 
```

查看 GAST 了解更多类似[此类的入门内容](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingAndSpeakingActivity.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T17:41:10.987

尝试在 MainActivity 上实现 RecognitionListener 而不是创建“MyRecognitionListener”。

# c - 这五个关于左值的陈述中哪一个是正确的？

> ID：14652577
> 
> 赞同：3
> 
> 时间：2013-02-01T18:18:31.587
> 
> 标签：c, variable-assignment, operator-keyword, lvalue, rvalue

我正在做以下谜题。也许有人可以检查我是否选择了正确的答案。看一看。

以下哪一项是关于左值的正确陈述？

1 左值是涉及 long int 类型数量的算术运算的结果。

2 所有左值都可以用在赋值语句的右侧。

3 根据定义，左值是出现在赋值语句最右侧的值。

4 根据定义，左值是指针间接引用的存储空间。

5 左值是能够出现在移位运算符左侧的任何数量。

好的，左值是对内存中对象的引用。因此，乍一看，我想到了第 4 个答案，但现在看来不是正确的答案，因为 lvalue 不是存储本身（答案 4 暗示了这一点）。# 我认为**答案 2 是正确**的，因为左值可以用在赋值运算符的左侧和右侧。你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:33:52.620

> 我在想答案 2 是正确的，因为左值可以在赋值运算符的左侧和右侧使用

是的，这是真的，正是出于这个原因。

其他陈述的问题：

> 1) 左值是涉及 long int 类型数量的算术运算的结果。

不，存在`long int`与否与左值没有任何关系。`(long int)42`是 type `long int`，但它不是左值。

> 3) 根据定义，左值是出现在赋值语句最右侧的值。

不，我不知道它是否有任何特殊名称，但这肯定不是左值的定义。

> 4）根据定义，左值是指针间接引用的存储空间。

不，你不需要任何指针。如`int i = 1337;`,`i`是一个左值。但是，代码中没有任何指针。

> 5) 左值是能够出现在移位运算符左侧的任何数量。

不。乍一看，左值更多地与以某种方式修改的能力有关（赋值给变量或数组成员），所以如果不是`shift operator`read ，这个语句会更接近 true `assignment operator`。但是，并非所有左值都可以修改（例如，常量是左值，但在初始化后无法修改）。

# jquery - settimeout 在 ajax 调用中无法正常工作

> ID：14652583
> 
> 赞同：1
> 
> 时间：2013-02-01T18:19:04.460
> 
> 标签：jquery, ajax, timeout

我正在开发一个小型 Web 应用程序。我已经几乎完成了服务器端代码，但正在努力处理客户端 JavaScript。

我有一个每秒更新[的 html 文件。](http://jlengrand.pythonanywhere.com/static/leader.html)该文件是完全静态的，我仅将其用于日志目的。

这个想法是做几乎相同的事情，但在客户端完成自动更新。

为此，我想使用 ajax 进行数据库轮询。

我在[这里实现了第一个版本](http://jlengrand.pythonanywhere.com/static/index.html)，它只是打印相同的 html 文件，并且应该每秒重新加载一次。

问题是它不会更新，即使我在我的 javascript 控制台客户端中没有看到任何错误。该文件已找到，因为它正确加载并且我看不出它不会更新我的 div 的任何原因。

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- Using Google CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>
        (function worker() {
          $.ajax({
            url : 'http://jlengrand.pythonanywhere.com/static/leader.html',
            success: function(data) {
              $('.text').html(data);
            },
            complete: function() {
              setTimeout(worker, 1000);
            }
          });
        })();
    </script>
</head>
<body>
    <div class="text">
        To be loaded <br />
    </div>
</body>
</html> 
```

我在本地尝试过（但文件较小），效果很好。

我知道重新加载整个文件并不聪明，但我想逐步构建，因为这是我第一次使用 JavaScript 开发。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T18:24:49.277

错误：无用的 setTimeout 调用（参数周围缺少引号？）

你在 setTimeout 中运行 worker。你需要去掉 () 或者你需要把它放在''中：

```
setTimeout(worker, 1000); 
```

或者

```
setTimeout('worker()', 1000); 
```

*编辑：为了防止缓存，将 url 更改为：

```
 url : 'http://jlengrand.pythonanywhere.com/static/leader.html?rand='+Math.random(), 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T18:36:43.500

似乎您没有在准备好文档时调用工作函数。因此循环不会被启动。请记住，如果您调用位于不同域的文件，您将面临跨域问题。

检查此代码，它可能会解决您的问题：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <!-- Using Google CDN -->
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
   <script type="text/javascript">
    $(document).ready(function(){
       worker();
    });

    function worker(){
        $.ajax({
            url: 'http://jlengrand.pythonanywhere.com/static/leader.html',
            success: function(data) {
                console.log(data);  
                $('.text').html(data);
            },
            complete: function() {
                  setTimeout(worker(), 1000);
            }
        });
    }
   </script>
 </head>
 <body>
   <div class="text">
       To be loaded <br />
   </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T18:39:53.473

每件事都是正确的，但`doc ready`缺少：

```
$(function(){
    (function worker() {
      $.ajax({
        url : 'http://jlengrand.pythonanywhere.com/static/leader.html',
        success: function(data) {
          $('.text').html(data);
        },
        complete: function() {
          setTimeout(function(){ // use this way
             worker();
          }, 1000);
        }
      });
    })();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:53:20.917

使用 Deferred 在最后一次加载后 1 秒重新加载的替代解决方案

```
function getData() {
    $.ajax({
        url: 'http://jlengrand.pythonanywhere.com/static/leader.html',
        success: function (data) {
            $('.text').html(data);
        },
        complete: function () {}
    });
}

function showDiv() {
    var dfd = $.Deferred();
    $('.text').fadeTo(1000, 1, dfd.resolve);
    return dfd.promise();
}

function startme() {
    $.when(getData(), showDiv())
        .then(function (ajaxResult) {
        // ‘ajaxResult’ is the server’s response
            startme();
    });
};
startme(); 
```

# c++ - 从基类转换为派生类

> ID：14652586
> 
> 赞同：1
> 
> 时间：2013-02-01T18:19:12.677
> 
> 标签：c++

我正在尝试从基类转换为派生类。我有以下构造函数，但是，编译器抱怨：

```
no matching function for call to ‘baseObject::baseObject()’ 
```

构造函数：

```
derivedObject(const baseObject &base, const std::string &extra1)
{
    baseparameter1 = base.baseparameter1;
    baseparameter2 = base.baseparameter2;
    extraparameter1 = extra1;
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:23:40.950

**编辑**：`baseObject`复制构造。

由于您尚未为 定义默认构造函数`baseObject`，因此编译器无法在`derivedObject`没有明确说明`baseObject`要使用的构造函数的情况下构造 a 。

那么，在您的定义中`derivedConstructor`，您将需要准确地指定`baseObject`构造函数。由于我不知道你的`baseObject`样子，我在下面使用了一个占位符：

```
derivedObject(const baseObject &base, const std::string &extra1)
    : baseObject(PARAM1, PARAM2)
{
    baseparameter1 = base.baseparameter1;
    baseparameter2 = base.baseparameter2;
    extraparameter1 = extra1;
} 
```

* * *

在您的特定情况下，如果您尝试`derivedObject`从`baseObject`已经存在的 a 创建 a，则应定义`baseObject`的复制构造函数，并执行以下操作：

```
derivedObject(const baseObject &base, const std::string &extra1)
    : baseObject(base)
{
    baseparameter1 = base.baseparameter1;
    baseparameter2 = base.baseparameter2;
    extraparameter1 = extra1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:27:01.207

每个构造函数都从初始化所有基类和直接成员开始，然后再访问`{`. 不要在正文中使用赋值，而是使用成员初始化器列表：

```
derivedObject(const baseObject &base, const std::string &extra1)
    : baseObject(base),        // Calls the baseObject copy constructor
      extraParameter1(extra1)  // Initialize the direct member
{
} 
```

这是一种更好的风格，也避免了你遇到的问题。

# java - 如何使 BoxLayout 中的垂直间隙更小？

> ID：14652589
> 
> 赞同：3
> 
> 时间：2013-02-01T18:19:26.730
> 
> 标签：java, swing, user-interface, layout-manager, boxlayout

我有以下表格，它使用垂直 BoxLayout 和 FlowLayout JPanels 作为行：

![在此处输入图像描述](../Images/6508eaad859fdbe1c0b5e0b52aeabf37.png)

我怎样才能使每行之间的巨大差距变小？这是我的代码：

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T19:09:09.157

问题是 BoxLayout 尊重组件的最大尺寸。由于面板没有最大尺寸，因此每个面板都会增加高度以占用可用空间。

另一种解决方案是在将组件添加到面板后确定每个面板的最大尺寸：

```
pnlName.setMaximumSize( pnlName.getPreferredSize() );
pnlSurname.setMaximumSize( pnlSurname.getPreferredSize() );
pnlAge.setMaximumSize( pnlAge.getPreferredSize() ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T18:28:05.807

您可以使用胶水（不可见组件）来填充可用空间。请参阅此[文档](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html#filler)

除了盒子布局，您还可以使用 VerticalLayout。不幸的是，swing api 中不存在这种布局，但是有很多免费的实现这样的布局可用。

例如：[http ://www.java2s.com/Code/Java/Swing-JFC/AverticallayoutmanagersimilartojavaawtFlowLayout.htm](http://www.java2s.com/Code/Java/Swing-JFC/AverticallayoutmanagersimilartojavaawtFlowLayout.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-14T14:47:47.867

你需要的是贪婪的胶水。除非胶水是贪婪的，否则它和它的兄弟姐妹都会收到任何额外空间的一部分。胶水是一个 Box.Filler 对象，并且有一个方法 changeShape 来重置其大小约束。要使其变得贪婪，请将首选大小设置为 Integer.MAX_VALUE：

```
 Box.Filler glue = Box.createVerticalGlue();
    glue.changeShape(glue.getMinimumSize(), 
                    new Dimension(0, Short.MAX_VALUE), // make glue greedy
                    glue.getMaximumSize()); 
```

将此胶水元素添加为外盒中的最后一项。

# .htaccess - 子目录中网站的重写规则

> ID：14652591
> 
> 赞同：0
> 
> 时间：2013-02-01T18:19:32.007
> 
> 标签：.htaccess, mod-rewrite

我有 WordPress 网站并在其中安装了另一个站点的子目录。子网站的所有子页面都有 URL 404 问题（安装在子目录中）

它正在加载子网站的登录页面，但一旦尝试访问任何页面或发布它就会给出 404 错误。这个 CMS 有自己的 .htaccess。

```
Path:
Wordpress: wp/.htaccess
QA:        wp/qa/.htaccess 
```

WordPress .htaccess 代码

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

QA .htaccess 代码

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
RewriteEngine On
#RewriteBase /
RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . %1/%2 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ index.php?qa-rewrite=$0&%{QUERY_STRING} [L]
</IfModule> 
```

我对重写规则了解不多，所以请帮我解决这个问题。百万谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:22:40.960

尝试将 QA .htaccess 更改为此：

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /qa/
RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . %1/%2 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ /qa/index.php?qa-rewrite=$0&%{QUERY_STRING} [L]
</IfModule> 
```

# ios - 无法以编程方式更改 UITextView 帧大小

> ID：14652598
> 
> 赞同：4
> 
> 时间：2013-02-01T18:19:52.963
> 
> 标签：ios, xcode, interface-builder

我已经在界面生成器的视图中插入了一个 UITextView，现在我想更改它的框架大小，以便它以编程方式适合内容。问题是由于限制，大小似乎被锁定并且无法从代码中更改。如果我在文件检查器中禁用自动布局，每个对象都会删除约束，但我只想更改 UITextView 而不是其他对象。

```
[textview setFrame:CGRectMake(x,y,w,h)]; // This doesn't do anything to the uitextview 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T18:26:39.767

如果您使用约束，那么您必须使用约束来更改 UITextView 的大小。在 nib 中设置 outlet 以从您的代码访问您需要更改的约束。您可以实时设置约束`constant`，这通常就足够了。

只是为了澄清原因：如果视图的框架由约束定位，则不能更改它。好吧，你可以，但这是徒劳的，而且是不好的做法。这是因为约束本身将被布局系统用来为您更改视图的框架！因此，您可以更改框架，但布局系统将读取并解决约束并再次更改框架。

将约束视为布局系统的“待办事项列表”。约束本身没有任何作用；它们只是规则列表。完成工作的是布局系统（何时`layoutSubviews`调用）。每次需要布局时，布局系统都会出现，读取约束，计算出如何遵守它们，然后这样做——通过设置视图的框架。你需要*使用*那个系统，而不是反对它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T08:20:08.860

所有 UIView 和类都继承自 UIView 具有相同的属性是：XIB 文件中的“锁定”。 **如果您想更改**这些视图的框架。您必须将**Lock**设置为**“Nothing”**

![在此处输入图像描述](../Images/143ef0ae3ab91ab9c3ba12df4d68babb.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T14:42:44.887

如果您不想成为约束专家，请这样做（在您的视图控制器中。）

@property UITextView *textView;

//在 viewWillAppear 中动态创建 UITextView

```
rect = CGRectMake(194., 180., 464., 524.);
_textView =  [[UITextView alloc] initWithFrame:rect];
[self.view addSubview:_textView]; 
```

//现在可以随意调整大小了

```
 CGRect oldFrame = _textView.frame;
 CGRect newFrame = oldFrame;
 newFrame.size.height += 300;
 [_textView setFrame:newFrame]; 
```

# c++ - C++ - 链接器找不到我的函数，这恰好是一个重载的运算符

> ID：14652604
> 
> 赞同：4
> 
> 时间：2013-02-01T18:20:14.460
> 
> 标签：c++, linker, operator-overloading, constants, pass-by-reference

我对 C++ 还是很陌生，所以如果这是一个简单的答案，我提前道歉。我正在尝试使用重载运算符。这是该运算符的签名：

```
const Vector3D operator/(const Vector3D& lhs, const double rhs) 
```

这是我尝试使用它的方法：

```
OrthonormalBasis::OrthonormalBasis(const Vector3D &a)
{
    Vector3D t;
    w = a / a.length();
    t = getCollinearVector(w);

    //More code goes here
} 
```

当我尝试编译时，g++ 返回以下错误：

```
/file/path/orthonormalBasis.cpp:8: undefined reference to 
`operator/(Vector3D const&, double)' 
collect2: ld returned 1 exit status 
```

运算符是在 Vector3D.cpp 中定义的，所以我确实有一个定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T18:52:49.083

您看到的是链接器错误。链接是在编译后创建可执行文件的阶段。链接器的工作是获取对符号的所有引用并将它们解析为对其定义的引用。

这意味着作为链接器的输入，您必须提供所有符号定义。其中一些将来自库，一些来自`.cpp`文件。不幸的是，链接器实际上无法解析 C++。它希望编译器能够做到这一点。编译器生成一个`.o`文件。该`.o`文件包含解释符号定义和生成 CPU 可以直接执行的内容的结果。这就是链接器需要的那种定义。

通常将一个重要的程序（即一个具有多个`.cpp`文件的程序）编译为可执行文件涉及使用编译器创建一堆`.o`文件，然后将它们链接在一起成为一个可执行文件。

在您的情况下，您的符号在中定义`Vector3D.cpp`并用于`orthonormalBasis.cpp`. 我还可以从您`g++`在某种 Unix 平台上使用的错误中看出。编译和链接步骤至少如下所示：

```
g++ -c Vector3D.cpp
g++ -c orthoNormalBasis.cpp
g++ Vector3D.o orthoNormalBasis.o 
```

我打赌你只是这样做：

```
g++ orthoNormalBasis.cpp 
```

这是以下的简写：

```
g++ -c orthoNormalBasis.cpp
g++ orthoNormalBasis.o 
```

正如您所看到的，即使尝试编译`Vector3D.cpp`更少尝试将生成的`.o`文件链接到您的可执行文件，这也完全错过了。这就是您收到该错误的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T18:29:06.040

主要是您只*声明*了重载`operator/`，没有*定义*它，因此链接器无法链接函数的定义。

# java - 重新排列 int 数组 java 中的 int 值

> ID：14652607
> 
> 赞同：0
> 
> 时间：2013-02-01T18:20:24.010
> 
> 标签：java, arrays, loops, for-loop, reverse

所以我必须制作一个 Java 程序，让用户在其中说出他们想输入多少个值，在一个数组中输入那么多值，然后打印该数组。然后我必须反转数组中的元素（而不是反转打印或创建一个新数组），并再次打印这些值。这是我拥有的以下代码：

```
package reversearray;

import java.util.*;

public class Swap_main {

    /**
     * Taylor Marino
     */
    public static void main(String[] args) {
        int arraysize = 0, junk, junk2;
        Scanner reader = new Scanner(System.in);
        System.out.println("How many values are you going to enter?");
        arraysize = reader.nextInt();
        int[] array = new int[arraysize];
        System.out.println("You will now be asked to enter your values, one at a time");
        for(int counter = 0; counter < arraysize; counter++){
            System.out.println("Enter next value");
            array[counter] = reader.nextInt();
        }
        System.out.println("The values you entered are: ");
        for(int counter2 = 0; counter2 < arraysize; counter2++)
            System.out.print(array[counter2] + ", ");
        for(int counter3 = 0, counter4 = arraysize; counter3 != counter4; counter3++, counter4--){
            junk = array[counter3];
            junk2 = array[counter4];
            array[counter4] = junk;
            array[counter3] = junk2;
        }
        System.out.println("The values you entered are (in reverse order): ");
        for(int counter5 = 0; counter5 < arraysize; counter5++)
            System.out.print(array[counter5] + ", ");
    }

} 
```

但是我在这个循环中收到一个错误：

```
 for(int counter3 = 0, counter4 = arraysize; counter3 != counter4; counter3++, counter4--){
            junk = array[counter3];
            junk2 = array[counter4];
            array[counter4] = junk;
            array[counter3] = junk2;
        } 
```

我不明白这里出了什么问题，但它说`array[counter4] = junk;` 我做错了什么有错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:23:07.610

这会给你一个 ArrayOutOfBoundsException 因为数组的索引是从 0 到 length-1。从 counter4 = arraysize-1 开始。

编辑：另外，你应该改变

```
counter3 != counter4 
```

至

```
counter3 < counter4 
```

因为在奇数长度的数组上，第一个条件永远不会给你真实的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:29:37.587

尝试

```
for(int counter3 = 0, counter4 = arraysize -1 ; counter3 < counter4 ; counter3++, counter4--){ 
```

有用。异常消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:23:33.517

改变

`for(int counter3 = 0, counter4 = arraysize`

至

`for(int counter3 = 0, counter4 = arraysize-1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:49:58.683

可以稍微简洁一些，并且只使用一个循环变量

```
int maxIndex = array.length-1; // Zero based
int midIndex = (maxIndex/2);   // only swap half, otherwise will swap back to original
for(int counter3 = 0; counter3 <= midIndex; counter3++){
    junk = array[counter3];
    array[counter3] = array[maxIndex-counter3];
    array[maxIndex-counter3] = junk;
} 
```

# regex - 基于条件的正则表达式返回值

> ID：14652611
> 
> 赞同：0
> 
> 时间：2013-02-01T18:20:27.703
> 
> 标签：regex, regex-lookarounds

我有两个可能的输入需要用正则表达式解析：

> 192.168.1.1:80 [172.16.1.1:8080]

或者

> 192.168.1.1:80 [172.16.1.1]

如果 :8080 存在，我想返回 8080，但如果没有，我想返回 80。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:29:53.790

您可以通过积极的后视和消极的前瞻来做到这一点。

```
(?<=:)\d+(?!.*:\d+) 
```

* * *

或者你可以使用

```
 .*:(\d+) 
```

第 1 组捕获您想要的内容

# javascript - D3 中带有工具提示的面积图

> ID：14652612
> 
> 赞同：2
> 
> 时间：2013-02-01T18:20:30.750
> 
> 标签：javascript, d3.js, tooltip

我正在尝试使用 D3.js 创建带有工具提示的面积图。我正在尝试做类似 [http://www.d3noob.org/2013/01/adding-tooltips-to-d3js-graph.html](http://www.d3noob.org/2013/01/adding-tooltips-to-d3js-graph.html)的事情。我能够成功创建面积图，但是当我尝试将散点图代码与其混合时，似乎没有任何效果。下面是我的代码

```
var m = [40,40,40,70],
w = 500 -m[1] - m[3],
h = 300 - m[0] - m[2];

var svg = d3.select('body').append('svg')
.attr('width', w+m[1]+m[3])
.attr('height', h+m[0]+m[2])
.append("g")
.attr("transform", "translate(" + m[3] + "," + m[0] + ")");

var div = d3.select("body").append("div")   
.attr("class", "tooltip")               
.style("opacity", 0);

var data = [{
'Wed Jan 23 00:00:00 IST 2013': 3383387
}, {
'Thu Jan 24 00:00:00 IST 2013': 3883387
}, {
'Fri Jan 25 00:00:00 IST 2013': 4383387
}, {
'Sat Jan 26 00:00:00 IST 2013': 2383387
}, {
'Sun Jan 27 00:00:00 IST 2013': 5383387
}, {
'Mon Jan 28 00:00:00 IST 2013': 2283387
}];

var format = d3.time.format("%a %b %d %H:%M:%S IST %Y");

var xscale = d3.time.scale().domain([format.parse(d3.keys(data[0])[0]), format.parse(d3.keys(data[5])[0])]).range([0, w]),
yscale = d3.scale.linear().domain([0, d3.max(data, function (d) {
    return d3.values(d)[0];
})]).range([h, 0]);

var xAxis = d3.svg.axis()
.scale(xscale)
.ticks(d3.time.days, 2)
.orient("bottom");

var yAxis = d3.svg.axis()
.scale(yscale)
.ticks(4)
.orient("left");

var area = d3.svg.area()
.x(function(d) { return xscale(format.parse(d3.keys(d)[0])); })
.y0(h)
.y1(function(d) { return yscale(d3.values(d)[0]); })
.interpolate("basis");

svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + h + ")")
.call(xAxis.tickSubdivide(1).tickSize(6));

svg.append("g")
.attr("class", "y axis")
.call(yAxis)
.append("text")
.attr("transform", "translate(" + w + ",0)");

svg.append("g")
.append('path')
.attr("class", "area")
.call(area);

svg.selectAll('g.generator')
.data([data])
.enter().append("svg:circle")
.attr("cx",function(d){ return xscale(format.parse(d3.keys(d)[0]));})
.attr("cy", function(d){ return yscale(d3.values(d)[0]);})
.attr("r", function(d){ return 4;}); 
```

我还创建了一个 jsfiddle：http: [//jsfiddle.net/DTs7F/](http://jsfiddle.net/DTs7F/)。有人可以指出我正确的方向并让我知道我的方法有什么问题吗？谢谢。更新：使用稍微不同的方法创建了另一个小提琴。仍然无法正常工作:-( [http://jsfiddle.net/DTs7F/3/](http://jsfiddle.net/DTs7F/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:10:41.830

关于**散点图**：

删除数据周围的数组包装器（这已经是一个数组）

改成

```
svg.selectAll('g.generator')
  .data( data )  // formerly .data([data]) 
```

关于**面积图**：

不要“调用”该区域，而是获取该区域的路径数据，如下所示：

```
svg.append("g").append("path")
  .datum(data)
  .attr("class", "area")
  .attr("d", area); 
```

代替

```
// Not right
svg.append("g")
   .append('path')
   .attr("class", "area")
   .call(area); 
```

# image - 使用 htaccess 重写带有参数的图像 URL

> ID：14652614
> 
> 赞同：0
> 
> 时间：2013-02-01T18:20:33.977
> 
> 标签：image, .htaccess, mod-rewrite, url-rewriting, cdn

CDN 图像 URL 是

```
https://cdn{sid}.example.com/{f1}/image_{id}.{ext} 
```

这就是我将如何调用图像文件

```
<img src="image.php?cdn=42&f1=folder&id=1234&ext=jpg" alt="Hello" /> 
```

到目前为止我发现的 .htaccess 代码

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^image.php https://cdn42.example.com/folder/image_1234.jpg 
```

如何将参数（sid、f1、id 等）填充到 htaccess？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:10:11.067

要从 to 重定向`image.php?cdn=42&f1=folder&id=1234&ext=jpg`，`https://cdn{sid}.example.com/{f1}/image_{id}.{ext}`以下规则应该有效。这是假设您尝试从您的服务器重定向到 CDN，而不是尝试在 CDN 本身上重写：

```
RewriteCond %{QUERY_STRING} ^cdn=([^&]*)&f1=([^&]*)&id=([^&]*)&ext=(.*)$
RewriteRule ^image.php$ https://cdn%1.example.com/%2/image_%3.%4 
```

# c - “dup”功能、“more”和重定向

> ID：14652617
> 
> 赞同：3
> 
> 时间：2013-02-01T18:20:50.380
> 
> 标签：c, unix, stdin, dup

我对这个用于教育目的的小代码有疑问。我无法理解它是如何工作的。

```
#include <stdio.h>
#include <fcntl.h>

#define FNAME "info.txt"
#define STDIN 0
int main(){

   int fd;
   fd = open(FNAME, O_RDONLY);

   close(STDIN); //entry 0 on FDT is now free
   dup(fd); //fd duplicate is now stored at entry 0 
   execlp("more","more",0); 
} 
```

通过启动这个程序，它会在终端上打印文件“info.txt”的内容。我不明白为什么！“更多”和 STDIN（键盘或文件）之间的链接在哪里？

为什么如果我在没有 args 且文件上没有重定向的情况下使用更多，它只会显示一个帮助屏幕，但重定向它使用文件作为输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:21:57.190

`dup`始终为您提供最低的可用文件描述符编号。

默认情况下，所有进程都将具有`0`、`1`和`2`、和。您正在打开一个文件，您将获得一个文件描述符值。之后你就关闭了。现在调用之后将为您提供最低可用值作为 的重复文件描述符，因此您将获得.`stdin``stdout``stderr``3``stdin``dup``3``stdin``3`

```
int main()
{
   int fd, fd2;
   fd = open(FNAME, O_RDONLY); //This will be 3

   fd2 = dup(fd); //This will be 4 because 4 is the lowest available value
   close(STDIN); //entry 0 on FDT is now free
   dup(fd); //fd duplicate is now stored at entry 0 
   execlp("more","more",0); 
} 
```

这里为什么显示文件的内容，`more`命令可以有两种使用方式。

*   更多文件名
*   命令 | 更多的

在您的 exec 中，您没有`filename`为命令提供任何命令行参数`more`。所以它在`pipe`模式下执行，通过从标准输入读取它。

# c# - Windows Phone 8 上的平滑捏合缩放和平移

> ID：14652618
> 
> 赞同：14
> 
> 时间：2013-02-01T18:20:52.167
> 
> 标签：c#, .net, windows-phone-8

我已经设法通过连接到 ManipulationDelta 和 ManipulationStarted 事件（在图像控件上）来实现捏缩放和平移：

```
 private void image_OnManipulationDelta(object sender, ManipulationDeltaEventArgs e)
    {
        var transform = (CompositeTransform)image.RenderTransform;

        // pan
        transform.TranslateX = _translationX + e.CumulativeManipulation.Translation.X;
        transform.TranslateY = _translationY + e.CumulativeManipulation.Translation.Y;

        // zoom
        if (e.PinchManipulation != null)
        {
            transform.CenterX = e.PinchManipulation.Original.Center.X;
            transform.CenterY = e.PinchManipulation.Original.Center.Y;

            transform.ScaleX = _scaleX * e.PinchManipulation.CumulativeScale;
            transform.ScaleY = _scaleY * e.PinchManipulation.CumulativeScale;
        }
    }

    private void image_OnManipulationStarted(object sender, ManipulationStartedEventArgs e)
    {
        // the user has started manipulating the screen, set starting points
        var transform = (CompositeTransform)image.RenderTransform;
        _scaleX = transform.ScaleX;
        _scaleY = transform.ScaleY;
        _translationX = transform.TranslateX;
        _translationY = transform.TranslateY;
    } 
```

但是与windows phone UI其余部分的流畅度相比，它给人的感觉非常平静和僵硬。运动没有惯性。

有没有办法让动作更流畅？使用动画和故事板是一种解决方法吗？我已经尝试使用 ScrollView 至少获得平滑平移，但是 ManipulationDelta 事件没有正确触发。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-17T23:35:28.860

I wanted to get this right from a mathematical point of view. The result is something similar in correctness to Telerik's PanAndZoomImage. If you aren't interested, jump straight to this [gist](https://gist.github.com/sgraf812/7033464#file-panandzoombehavior) (It works with WP7.1+). You'll need to reference System.Windows.Interactivity and the Windows Phone toolkit.

Usage:

```
<Image Source="http://i.imgur.com/ZbKlRzK.jpg">
    <i:Interaction.Behaviors>
        <phoneApp1:PanAndZoomBehavior MaxZoom="10" />
    </i:Interaction.Behaviors>
</Image> 
```

**Math**

Panning and zooming uses 2 out of 4 transformations of CompositeTransform, namely Translation and Scaling. The key point is understanding how to compose two of those scale+translate transforms. I'll use haskellish notation, because it is less of burden to type and read. Our 'primitives' are

1.  `scale s` = scale around (s.x,s.y) with factor s.x in x direction and s.y in y direction
2.  `translate t` = offset all points by t.x in x direction and t.y in y direction

CompositeTransform scales around a center point, which is expressed like

```
scaleAround c s = translate c . scale s . translate -c 
```

The following rules hold (do the math if you don't believe me, all operators are componentwise):

1.  `translate a . translate b = translate (a+b)`
2.  `scale a . scale b = scale (a*b)`
3.  `translate t . scale s = scale s . translate (t/s)`

A CompositeTransform is like

```
transform s c t = translate t . scaleAround c s
                = translate (t+c) . scale s . translate -c 
```

When composing two of those transforms, we have to move around primitives until we get to such a form above. Let `a` and `b` be those two CompositeTransforms. So we get:

```
transform' = b . a
           = translate bt . scaleAround bc bs . translate at . scaleAround ac as
           = translate bt . translate bc . scale bs . translate -bc . translate at . translate ac . scale as . translate -ac
           = translate (bt+bc) . scale bs . translate (ac+at-bc) . scale as . translate -ac
           = translate (bt+bc) . translate (ac+at-bc)*bs . scale bs . scale as . translate -ac
           = translate (bt+bc+(ac+at-bc)*bs) . scale (as*bs) . translate -ac
           = translate (bt+bc-ac+(ac+at-bc)*bs) . scaleAround ac (as*bs)
           = translate (bt+at*bs+(bs-1)*(ac-bs)) . scaleAround ac (as*bs) 
```

This is just because I was frustrated with the amount of profound documentation on why certain people do certain things.

For the actual composition code, looko [here](https://gist.github.com/sgraf812/7033464#file-panandzoombehavior-cs-L147)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T22:55:58.340

我知道您在谈论 8，我将发布与 7 相关的文章的链接，但是在玩 Windows Phone 时它​​非常有用，所以这里是：

[https://www.wintellect.com/building-touch-interfaces-for-windows-phones-part-3/](https://www.wintellect.com/building-touch-interfaces-for-windows-phones-part-3/)

我不**认为**从那以后发生了很大的变化......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T07:28:39.193

我知道这是一个迟到的答案，但这是另一个示例项目，可以帮助解决这个问题 [http://code.msdn.microsoft.com/wpapps/Smooth-flick-and-zoom-with-7760c7f7](http://code.msdn.microsoft.com/wpapps/Smooth-flick-and-zoom-with-7760c7f7)

# regex - 向正则表达式过滤器添加空间检查

> ID：14652625
> 
> 赞同：1
> 
> 时间：2013-02-01T18:21:14.593
> 
> 标签：regex, spaces

我有以下`regex`内容应该从上传者的文件名中删除斜杠和其他路径信息。

我还想删除文件名中的任何空格。我已经查看了有关此的其他问题，但无法弄清楚如何添加它。

我现在拥有的：`/.*(\/|\\)/, ""`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:23:46.643

您可以使用`[\s\/\\]+`删除所有斜杠和空格..

`\s`代表一个空间

`[]`是一个匹配其中任何一个字符的字符类

`+`匹配前面的字符 1 到多次

# document.write - 如何在 div 中写入字符数？

> ID：14652628
> 
> 赞同：2
> 
> 时间：2013-02-01T18:21:27.953
> 
> 标签：document.write, string-length

我正在尝试显示我在页面上拥有的各种 div 的字符数。

我有这个：

```
<div class="myText">Here is some text.</div>
<div class="myText">Here is some more text.</div> 
```

我想在每个字符之后显示字符数。所以页面看起来像这样：

**这是一些文字。18**

**这里还有一些文字。23**

我知道我可以使用 jQuery：

```
$('.myText').text().length 
```

结合

```
document.write 
```

但我不知道如何（我刚刚开始学习 javascript）。此外，div 是由我们的 CMS 生成的，所以会有很多，我想为它们获取字符数，所以也许它们每个都需要不同的类名？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:26:49.523

```
$('.myText').each(function() {
  var $this = $(this);
  $this.append($this.html().length);
}); 
```

# sql - 如何在 SQL WITH JOINS 中使用聚合函数？

> ID：14652636
> 
> 赞同：1
> 
> 时间：2013-02-01T18:22:18.783
> 
> 标签：sql, oracle

以下是我构建的查询，用于查找特定电影的最便宜价格以及销售它的发行商，我如何操纵它，以便所有电影与销售的发行商一起列出其各自的最高电影价格它？

```
/*finds the cheapest price for the movie "American Beauty" and the distributor who sells it*/
SELECT movies.title, movie_distributors.distributor_name, MIN(distributed_movie_list.unit_price) AS lowest_price 
FROM distributed_movie_list 
INNER JOIN movies ON distributed_movie_list.movie_id = movies.movie_id 
INNER JOIN movie_distributors ON movie_distributors.distributor_id = distributed_movie_list.distributor_id 
WHERE movies.title = 'American Beauty' 
AND distributed_movie_list.unit_price = 
    (SELECT MIN(unit_price) 
    FROM distributed_movie_list 
    INNER JOIN movies ON distributed_movie_list.movie_id = movies.movie_id 
    WHERE movies.title = 'American Beauty') 
GROUP BY movies.title, distributed_movie_list.distributor_id, movie_distributors.distributor_name; 
```

下表用于此查询：

```
create table movies (
movie_id              number(5),
title                 varchar2(30) not null,
category_code         char(3) not null,
description           varchar2(500),
released_by           number(3) not null,
released_on           date not null
);

create table movie_distributors(
distributor_id      number(3),
distributor_name    varchar2(30) not null,
location            varchar2(40),
contact             varchar2(40)
);

create table distributed_movie_list(
distribution_id           number(8),
movie_id                  number(5) not null,
distributor_id            number(3) not null,
distribute_type           varchar2(10),
inventory_quantity        number(3) default 0,
unit_price                number(8,2)
); 
```

我正在寻找的最终结果是列出每部电影的发行商和最高价格的查询。任何帮助将不胜感激 ; )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:29:10.610

> 我正在寻找的最终结果是列出每部电影的发行商和最高价格的查询

那为什么不只是`GROUP BY title, distributor_name`这样`MAX`：

```
SELECT 
  m.movie_id,
  m.title,
  md.distributor_name, 
  MAX(d.unit_price) AS Highest_price 
FROM distributed_movie_list   AS d
INNER JOIN movies             AS m  ON d.movie_id        = m.movie_id 
INNER JOIN movie_distributors AS md ON md.distributor_id = d.distributor_id 
GROUP BY m.movie_id,m.title,
         md.distributor_name
HAVING MAX(d.unit_price) = (SELECT MAX(d2.unit_price)
                            FROM  distributed_movie_list d2
                            WHERE m.movie_id = d2.movie_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:59:06.190

以下应该适用于大多数 RDBMS：

```
SELECT DISTINCT m.title, md.distributor_name, dml.unit_price AS highest_price 
FROM distributed_movie_list dml
INNER JOIN movies m ON dml.movie_id = m.movie_id 
INNER JOIN movie_distributors md ON md.distributor_id = dml.distributor_id 
INNER JOIN (SELECT movie_id, MAX(unit_price) 
            FROM distributed_movie_list
            GROUP BY movie_id) dmlh
        ON dml.unit_price = dmlH.unit_price AND dml.movie_id = dmlh.movie_id 
```

对于支持排名函数的 RDBMS（例如 Oracle 或 SQLServer），应该有一个更有效的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:59:12.747

如果您想获得每部电影的最高价格 - 以及相关信息 - 然后使用该`row_number()`功能。以下查询返回有关每部电影最高价格的所有信息：

```
select dml.*
from (select dml.*,
             ROW_NUMBER() over (partition by movie_id order by unit_price desc) as seqnum
      from distributed_movie_list dml 
     ) dml
where seqnum = 1 
```

您可以加入有关电影和发行商的其他信息。

# javascript - 如果单击链接，则停止绑定“模糊”

> ID：14652638
> 
> 赞同：1
> 
> 时间：2013-02-01T18:22:40.847
> 
> 标签：javascript, javascript-events, jquery

我的绑定功能：

```
$searchInput.bind('blur', function() {
  $searchResults.remove();
} 
```

但是，如果我单击 $searchResults 中的链接，则不会发生这种情况。现在 $searchResults 在我可以单击链接之前被删除。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:29:57.543

您可以简单地在鼠标悬停时设置一个标志`$searchResults`：

```
var isOver = false;
$searchInput.bind("blur", function(e) {
    if (!isOver) {
        $searchResults.remove();
    }
});

$searchResults.hover(function() {
    isOver = true;
}, function() {
    isOver = false;
}); 
```

**演示：http:** [//jsfiddle.net/sUA4D/](http://jsfiddle.net/sUA4D/)

您可以通过元素数据执行相同的操作，例如设置`$searchResults.data("isOver", true)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:25:15.190

想到的一种选择是延迟`$.remove()`调用的执行，如下所示：

```
$searchInput.bind('blur', function() {
    setTimeout(function() {
        $searchResults.remove();
    }, 100);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:26:24.873

```
$searchInput.find('a').on('click', function() {
  $searchResults.remove();
}); 
```

# mysql - Mysql - 在编号 7 的 vnum END 处查询 UPDATE

> ID：14652642
> 
> 赞同：1
> 
> 时间：2013-02-01T18:22:47.743
> 
> 标签：mysql, sql, sql-update

我需要更正这个查询！谢谢！

我尝试：

```
UPDATE `item_proto_copy2` 
SET `socket_pct`='1' 
WHERE `vnum` END AS 7 AND `type`=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:27:20.757

 ~~你的意思是？

```
UPDATE `item_proto_copy2` 
SET `socket_pct`='1' 
WHERE `vnum` = 7 AND `type`=1 
```

如果没有，*后续问题*，在这种情况下你想要什么`WHERE vnum END AS 7 AND type=1`？

 ~~**更新 1**

```
UPDATE `item_proto_copy2` 
SET `socket_pct`='1' 
WHERE RIGHT(`vnum`, 1) = '7' AND `type`=1 
```

*   [对](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_right)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T01:24:04.540

@JW 的答案是通过将 a 转换`vnum`为 a`CHAR`然后用`RIGHT()`函数将其切断，只保留右边的第一个字符：

```
WHERE RIGHT(vnum, 1) = '7' 
```

您也可以`LIKE`以类似的方式使用（隐式转换为`CHAR`然后检查最右边的字符）：

```
WHERE vnum LIKE '%7' 
```

如果数字是非负整数，这也可以使用模运算：

```
WHERE vnum MOD 10 = 7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:25:18.637

在 where 子句中猜测您要尝试做什么。`END`不属于您的 WHERE 子句，您也不能在`AS`WHERE 子句中使用。

```
UPDATE `item_proto_copy2` 
SET `socket_pct`='1' 
WHERE `vnum` = 7 AND `type`=1 
```~~~~

# mysql - 错误 1064 - MySQL 数据库创建

> ID：14652643
> 
> 赞同：0
> 
> 时间：2013-02-01T18:22:53.837
> 
> 标签：mysql

因此，我是 MySQL 的完全新手，我正在尝试遵循一个教程，该教程将允许我为我的数据库整理一个 Ajax + JQuery 页面。

但是，在 PHPMyAdmin 中运行此代码：

```
CREATE TABLE IF NOT EXISTS 'add_delete_record' (
  'id' int(11) NOT NULL AUTO_INCREMENT,
  'content' text NOT NULL,
  PRIMARY KEY ('id')
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

产生错误：

> SQL查询：
> 
> 如果不存在则创建表'add_delete_record'（
> 
> 'id'INT(11) NOT NULL AUTO_INCREMENT, 'content'TEXT NOT NULL, PRIMARY KEY ('id')) ENGINE = INNODB DEFAULT CHARSET = latin1 AUTO_INCREMENT =1 MySQL 说：
> 
> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''add_delete_record' ('id' int(11) NOT NULL AUTO_INCREMENT,
> 'content' text'附近使用正确的语法

作为一个新手，我完全不知道出了什么问题，除了某个地方的语法有问题吗？感谢任何能提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:25:58.933

使用反引号

```
 CREATE TABLE IF NOT EXISTS `add_delete_record` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
   `content` text NOT NULL,
   PRIMARY KEY (`id`)
  ) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:24:41.207

改用反引号。单引号代表字符串文字。

```
CREATE TABLE IF NOT EXISTS `add_delete_record` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `content` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

# php - 由于 Windows Server 框，无法使用 PHP 处理 Paypal IPN。什么是标准替代品？

> ID：14652653
> 
> 赞同：0
> 
> 时间：2013-02-01T18:23:17.487
> 
> 标签：php, mysql, database, paypal, paypal-ipn

显然 PHP 不是用于 Windows 托管 Web 域的脚本......当我无法在最简单的 PHP 脚本中执行 file_puts 或 mail() 调用时，我发现了一个惊喜。

我正在解析 Paypal IPN 信息并将该数据推送到 mySQL 数据库，如果该过程遇到错误，偶尔会发送一封电子邮件。我已经让它在 PHP 中用于 Linux 托管的 Web 域，但显然这不适用于 Windows 托管的 Web 域。

**复制我的 PHP IPN 处理程序的最佳语言/网络标准实践语言是什么？**或者，我是否被 GoDaddy 支持人员误导了，PHP 和 Windows 服务器有简单的解决方法？

我对网络发展中的世界还很陌生，所以如果这是一个“呃”的答案，请原谅我。我只是不想意外选择一种没有可重用价值的完全晦涩难懂的语言。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:27:58.240

这完全取决于您的设置，这绝对不是 PHP/Windows 问题，因为我使用的是 paypal IPN 没有问题。邮件的问题可能是因为您没有在 php 配置中设置邮件服务器。在这种情况下，您需要使用自定义 SMTP 来发送邮件。此处给出了有关如何执行此操作的答案： [从 PHP 页面使用 GMail SMTP 服务器发送电子邮件，](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page) 或者更改 php.ini 中的 smtp 设置，或者在允许的情况下使用 ini_set()。file_puts 的问题可能很多，因此您至少必须发布您遇到的错误。但这又不是 php/windows 问题，它与您的配置有关...

# android - Android OpenSL ES AAC 解码器

> ID：14652656
> 
> 赞同：5
> 
> 时间：2013-02-01T18:23:32.913
> 
> 标签：android, android-ndk, aac, opensl

是否有任何示例源代码如何使用 Android OpenSL ES AAC 解码器代码将 AAC 帧解码为 PCM？我需要将存储在内存缓冲区中的 AAC 帧（带或不带 ADTS 标头）解码为 PCM。

# android - Android中的TextView截断数字

> ID：14652666
> 
> 赞同：0
> 
> 时间：2013-02-01T18:24:16.957
> 
> 标签：android, android-layout, android-widget

我在文本视图中设置数字时遇到问题，它只显示第一个数字并截断其余数字。例如，如果我设置这个字符串“12345”它只显示“1”。请注意，如果我在 setText 方法中对该数字进行硬编码，它可以工作，但是当我通过 Integer.toString 设置数字时，它不会。我还为调试做了一个 Toast，它显示的字符串是正确的。

这是我的活动代码：

```
int inviteCount = inviteArray.size();
String inviteCountString = Integer.toString(inviteCount);
inviteCountTextView.setText(inviteCountString);
showToast(inviteCountString); 

protected void showToast(final String text) {
    //   Creates a Toast when there is an error
    runOnUiThread(new Runnable(){
        @Override
        public void run() {
            Toast.makeText(RootActivity.this, text, Toast.LENGTH_SHORT).show(); 
        }
    });
} 
```

这是布局文件的代码

```
<FrameLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/inviteImageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/friend_invitations_background" />

    <TextView
        android:id="@+id/inviteNumber"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="2dp"
        android:text="0"
        android:textColor="#88ffffff"
        android:textSize="12sp" />
</FrameLayout> 
```

提前致谢。

编辑：

这是错误的屏幕截图。如您所见，吐司显示 10。但在顶部的 texfield 上仅显示 1。同样，如果我写 android:text="10" 它显示正确。

![错误](../Images/efb61e9edae104e254e282e24fafb5c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T18:45:04.900

这无疑是一个布局问题。您可以使用 Eclipse 中的 ADT 工具检查布局层次结构。可能`TextView`通过`FrameLayout`仅测量其直接子尺寸（即`ImageView`.

老实说，我很困惑为什么它的初始值是正确设置尺寸以及为什么尺寸不是由*所有*孩子确定的。

我建议`FrameLayout`只`TextView`用带有背景的 a 替换低效的构造。也许为了缩小问题范围，您可以简化该视图周围的布局。

例如：

```
<TextView
    android:id="@+id/inviteNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="2dp"
    android:text="0"
    android:textColor="#88ffffff"
    android:textSize="12sp"
    android:background="@drawable/friend_invitations_background" /> 
```

# spring - Grails Intellij resource.groovy 错误

> ID：14652667
> 
> 赞同：0
> 
> 时间：2013-02-01T18:24:28.857
> 
> 标签：spring, grails, intellij-idea, config

我刚决定尝试一下 Grails，因为我主要使用 Intellij 来处理 Java 的东西，所以我不想使用 GTS，所以到目前为止一切正常，在 Intellij 12 上让 grails 顺利运行时出现了一些小故障，但是我的 bean 名称在 resources.groovy 文件中突出显示为错误。它们都可以工作并且很好，但是看到标有错误的文件很乏味。你知道有没有办法解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:45:49.157

看起来像一个已知的错误：

*   [IDEA-88816](http://youtrack.jetbrains.com/issue/IDEA-88816) IDEA 无法解析 resources.groovy 中的 Spring DSL

# plugins - 在 GStreamer 插件中键入未调用的查找函数

> ID：14652668
> 
> 赞同：0
> 
> 时间：2013-02-01T18:24:29.860
> 
> 标签：plugins, types, find, gstreamer

我有一个元素可以解码媒体类型，例如 mytype。我想注册类型，以便 decodebin 元素可以在需要时使用我的元素。我添加了我认为可行的代码，但我的 type_find() 函数从未被调用。关于我做错了什么的任何想法？代码如下所示：

```
#define MY_CAPS (gst_static_caps_get(&my_caps))

static GstStaticCaps my_caps = GST_STATIC_CAPS("audio/x-mycaps");
static gchar *my_exts[] = { "mtype", NULL };

static void type_find(GstTypeFind *_type_find, gpointer callback)
{
   printf("Type Find Function\r\n");
   gst_type_find_suggest(_type_find, GST_TYPE_FIND_POSSIBLE, gst_static_caps_get(&my_caps));
}

gboolean plugin_init(GstPlugin *plugin)
{
   if(!gst_type_find_register(plugin, "mytype", GST_RANK_PRIMARY, type_find, my_exts, MY_CAPS, NULL, NULL))
     return FALSE;

   if(!gst_element_register(plugin, "myelement", GST_RANK_PRIMARY, MY_ELEMENT_TYPE)
      return FALSE;

   return(TRUE);
} 
```

# .net - 在不同版本的 Visual Studio 中打开项目和解决方案

> ID：14652669
> 
> 赞同：4
> 
> 时间：2013-02-01T18:24:31.110
> 
> 标签：.net, vb.net, visual-studio

为什么不能在另一个版本的 Visual Studio 中打开使用一个版本的 Visual Studio 开发的项目或解决方案？

我了解解决方案包含项目，而项目包含文件，例如 aspx、vb 等。我还了解，一个版本的 Visual Studio 可能默认针对一个版本的 .NET，而另一个版本可能针对不同版本的 .NET。因此，我知道如果应用程序现在针对不同版本的 .NET，则可能需要更改应用程序中的代码，因为新版本中的功能可能会贬值等。

我希望在网上找到答案，但我没有。例如，我查看了以下问题：[Visual Studio 2008 和 Visual Studio 2010 之间的区别](https://stackoverflow.com/questions/5417592/difference-between-visual-studio-2008-and-visual-studio-2010)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T18:42:22.907

在 Visual Studio 2012 中，他们解决了这个问题（我同意，这可能很痛苦）。在 2012 年，它不会修改项目文件，因此您可以在 2012 年打开项目后继续在 2010 年打开项目。这允许具有混合 Visual Studio 版本（2010 和 2012）的团队继续处理相同的项目.

如果您没有 VS 2012，并且仍在使用 2010，那么一旦您将项目升级到新版本（例如，从 2008 到 2010），您将无法再在旧版本中打开项目，很遗憾。

我不确定您的开发环境，但如果您还没有，可以使用 VS 2012 的免费快速版本：http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-快递产品](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:29:22.013

如果您在 vs 2010 中打开旧项目，它应该会提示您使用转换向导，您可以转换为 vs 2010 项目。如果您尝试在旧版本的 vs 中打开新项目，则不支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:57:19.500

通过在记事本中编辑 .sln 或 csproj 文件的版本，可以追溯打开具有不同 VS 版本的项目或解决方案。有一些工具可以自动下载。但问题是该项目通常会使用早期版本不支持的目标框架构建。过去，当我只有 VS2005 并且承包商正在使用 VS2010 但针对 Framework V2.0 时，我已经这样做了。在我看来不值得，我买了VS2010。

# db2 - 在 DB2 中格式化小时？

> ID：14652671
> 
> 赞同：0
> 
> 时间：2013-02-01T18:24:36.360
> 
> 标签：db2

有没有办法用 AM 和 PM 显示 db2 Hour 函数？

```
select hour(TIMESTAMP) from ORDERS with ur 
```

这将给出 5,6,7 等。

但我想要在小时后的上午/下午。

我想在早上 5 点、早上 6 点、早上 7 点付款。db2可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:47:27.937

使用`TIME()`和`CHAR()`函数：

```
SELECT CHAR(TIME(timestamp), USA)
FROM Orders
WITH UR 
```

虽然，老实说，您应该在应用程序层而不是 SQL 层中进行这种类型的格式化。
（语句在我的本地 DB2 实例上运行）

* * *

# 编辑：

对不起，我之前错过了那部分。浏览文档向我展示了一个新函数[VARCHAR_FORMAT()](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.ref.doc%2Fdoc%2Fr0007110.html)。假设您使用的是 DB2 9.5，以下内容应该可以为您提供某种形式的您正在寻找的内容：

```
SELECT VARCHAR_FORMAT(timestamp, 'HH12 AM')
FROM Orders
WITH UR 
```

不幸的是，我自己无法对此进行测试，因为 iSeries V6R1 不支持该`HH12`标志（`HH24`仅，什么？）。否则，您将不得不自己解析它。

# .htaccess - .htaccess 替换部分域

> ID：14652678
> 
> 赞同：1
> 
> 时间：2013-02-01T18:24:50.800
> 
> 标签：.htaccess, mod-rewrite

`http​://sub.**A**.com/some.html`到`http​://sub.**B**.com/some.html`

并且

`http​://**A**.com/some.html`到`http​://**B**.com/some.html`

* * *

基本上只是将**A**重定向到**B**

.htaccess 文件仅在**A.com下**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:57:28.300

```
RewriteCond %{HTTP_HOST} ^([^.]*\.)?A.com$
RewriteRule ^(.*) http://%1B.com/$1 [R=301,L] 
```

匹配有或没有前导“子”。并根据问题重定向，保留“子”。如果它存在。匹配第三级域中的任何内容。

# php - PHP不去除整数并将输出重新格式化为电话号码

> ID：14652680
> 
> 赞同：0
> 
> 时间：2013-02-01T18:25:03.973
> 
> 标签：php, mysql, string, integer, reformatting

我正在尝试使插入数据库的电话号码都遵循相同的约定，无论它们是如何插入的。

所以`(123) 456.7890`和`123.456.7890`

最终都会进入数据库`123-456-7890`

我认为必须有一个函数可以让我删除所有非整数字符，以便`123.456.7890`可以将其转换为`1234567890`然后重新格式化为`xxx-xxx-xxxx`

也许我对此错了，但我认为 php 必须有一种方法来完成这些方面的事情，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:27:12.743

```
// Remove any non-number character
$str = preg_replace('/[^\d]/', '', $str);
// Insert dashes
$str = preg_replace('/(\d)(?=(\d{4}|\d{7})$)/', '$1-', $str); 
```

这是小提琴：[http ://codepad.viper-7.com/pQlwVw](http://codepad.viper-7.com/pQlwVw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:27:47.407

只需一个简单的正则表达式就可以做到：

```
$nums = preg_replace("/\D/","",$input); 
```

理想情况下，您应该将其保存为该格式，并且仅在输出中对其进行格式化，如下所示：

```
$output = preg_replace("/(...)(...)(....)/","$1-$2-$3",$nums); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:27:55.713

像这样的东西会起作用（从[How do you format a 10 digit string into a phone number? 偷来的？](https://stackoverflow.com/questions/2089923/how-do-you-format-a-10-digit-string-into-a-phone-number)）

```
$phone = preg_replace("/[^0-9]/", "", $phone);
echo "(".substr($phone, 0, 3).") ".substr($phone, 3, 3)."-".substr($phone,6); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T18:28:28.113

这是 7 位或 10 位数字的正则表达式，允许扩展，分隔符是空格、破折号或句点：

```
^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$ 
```

或者您可以使用大锤方法：只需删除任何非数字和格式的内容即可。

# facebook-graph-api - fb：不安全的 JavaScript 尝试使用 URL 访问框架

> ID：14652689
> 
> 赞同：3
> 
> 时间：2013-02-01T18:25:15.037
> 
> 标签：facebook-graph-api, facebook-like

知道为什么即使我遵循了[Facebook 的建议](https://developers.facebook.com/blog/post/530/)`Unsafe JavaScript attempt to access frame with URL http://homodigitalis.org/ from frame with URL`，我仍然在[homodigitalis.org](http://homodigitalis.org/)上收到错误消息吗？

```
window.fbAsyncInit = function(){

    // init the FB JS SDK
    FB.init({
        appId: '155692864582714',
        channelUrl: 'http://homodigitalis.org/channel.html',
        status: true,
        xfbml: true
    });

};

(function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
    '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
}()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:18:13.813

根据这个错误报告，来自 FB 的人说这是一个预期的异常：

[https://developers.facebook.com/bugs/122268321247958](https://developers.facebook.com/bugs/122268321247958)

# python - GDAL ReadAsArray() 在尝试读取 ENVI 文件时仅返回 nan 值

> ID：14652695
> 
> 赞同：2
> 
> 时间：2013-02-01T18:25:32.960
> 
> 标签：python, gdal, envi

我正在尝试使用 GDAL 和 Python 将 ENVI 文件作为数组读取

图片信息如下：

```
Driver: ENVI/ENVI .hdr Labelled
Files: IMG-VV-ALPSRP248213250-P1.1__D_pwr_geo_sigma
     IMG-VV-ALPSRP248213250-P1.1__D_pwr_geo_sigma.hdr
Size is 1659, 2775
Coordinate System is:
PROJCS["UTM Zone 16, Northern Hemisphere",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]],
PROJECTION["Transverse_Mercator"],
PARAMETER["latitude_of_origin",0],
PARAMETER["central_meridian",-87],
PARAMETER["scale_factor",0.9996],
PARAMETER["false_easting",500000],
PARAMETER["false_northing",0],
UNIT["Meter",1]]
Origin = (332125.000000000000000,2017650.000000000000000)
Pixel Size = (25.000000000000000,-25.000000000000000)
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  332125.000, 2017650.000) ( 88d35'16.06"W, 18d14'29.96"N)
Lower Left  (  332125.000, 1948275.000) ( 88d34'55.98"W, 17d36'53.41"N)
Upper Right (  373600.000, 2017650.000) ( 88d11'44.12"W, 18d14'40.22"N)
Lower Right (  373600.000, 1948275.000) ( 88d11'29.00"W, 17d37' 3.30"N)
Center      (  352862.500, 1982962.500) ( 88d23'21.23"W, 17d55'47.10"N)
Band 1 Block=1659x1 Type=Float32, ColorInterp=Undefined 
```

我的代码如下：

```
driver = gdal.GetDriverByName('ENVI')
driver.Register()

#Mind the suffix (It is an ENVI file)    
file = 'C:/img.1__A_pwr_geo_sigma

raster = gdal.Open(file,gdal.GA_ReadOnly)

raster_array = raster.ReadAsArray()

print raster_array 
```

输出：

`>>>array([[ nan, nan, nan, ..., nan, nan, nan], [ nan, nan, nan, ..., nan, nan, nan], [ nan, nan, nan, ..., nan, nan, nan], ..., [ nan, nan, nan, ..., nan, nan, nan], [ nan, nan, nan, ..., nan, nan, nan], [ nan, nan, nan, ..., nan, nan, nan]], dtype=float32)`

数组中的所有值都是 NaN 虽然我知道图像中有浮点 32 位值（使用 ENVI 软件检查）

我在这里做错了什么？还是后缀有问题？

我还尝试使用 gdal_translate 将 ENVI 格式转换为 Geotiff，但 GeoTiff 也会生成相同的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:02:08.703

好消息，并非所有值都是 nan。GDAL 驱动程序（v.1.9.1）运行良好，有效数据在依赖于 GDAL 的软件（例如 QGIS）中可见。

这些`nan`值用于表示 NoData。（通常，大多数人对 NoData 使用一些有限的“虚拟”值，例如 1e+20）。

```
import numpy as np
from osgeo import gdal
fname = r'C:\path\to\envi_data\IMG-HH-ALPSRP136260330-H1.1__A_pwr_geo_sigma'
ds = gdal.Open(fname, gdal.GA_ReadOnly)
band = ds.GetRasterBand(1)
print band.GetNoDataValue()
# None ## normally this would have a finite value, e.g. 1e+20
ar = band.ReadAsArray()
print np.isnan(ar).all()
# False
print '%.1f%% masked' % (np.isnan(ar).sum() * 100.0 / ar.size)
# 43.0% masked 
```

在 Python/NumPy 中表示缺失值的数组的最佳方法是使用[掩码数组](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)：

```
mar = np.ma.masked_array(ar, np.isnan(ar))
print mar.min(), np.median(mar), mar.mean(), mar.std(), mar.max()
# 0.000715672 0.148093774915 0.0921848740388 0.0700106260235 5.0 
```

# c++ - 这个文件夹重定向到驱动器号是如何完成的？

> ID：14652697
> 
> 赞同：0
> 
> 时间：2013-02-01T18:25:51.613
> 
> 标签：c++, c, winapi, mfc

我想知道[像这样的实用程序](http://www.ntwind.com/software/utilities/visual-subst.html)如何将文件夹重定向到驱动程序字母？

PS。我需要用 C/C++/MFC 来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:27:54.053

它可能像普通命令一样使用[DefineDosDevice 。](http://msdn.microsoft.com/en-us/library/aa363904%28VS.85%29.aspx)`subst`

# wpf - 使用命令模式和用于撤消/重做的 ICommand 跟踪参数。存储多个命令？

> ID：14652698
> 
> 赞同：0
> 
> 时间：2013-02-01T18:25:52.223
> 
> 标签：wpf, command, undo, command-pattern, redo

我一直在研究一个涉及移动许多形状的 WPF 应用程序。它主要是 MVVM 并且严重依赖命令。直到最近我才担心撤消/重做。我认为这不会太难，因为我的大部分更改都涉及继承实现 ICommand 的基类 CommandBase 的命令。

到目前为止，我已经添加了另一个名为 IUndoCommand 的接口，它使用 ICommand。我添加了一个 Undo 方法，该方法将在调用 undo 时执行所需的操作。

我将为 Undo 和 Redo 使用堆栈，但我遇到了 Execute/Undo 方法的参数问题。有没有合适的方法来存储这些对象类型的参数？是否建议向 IUndoCommand 添加字段/方法？如果是这样，我应该在 Execute 方法或构造函数中设置它（如果我可以的话。）

如果不是，我应该将它作为堆栈中的自己的对象传递吗？

其次，（尽管这可能是它自己的问题）是否有更好的数据结构来跟踪多个命令？我目前有一个循环，它运行多个命令来移动多个选定的形状，并希望允许一个撤消来撤消它们。我想我可以将它自己转换为命令并将命令传递给它，但我又是新手，宁愿做对。

感谢您的阅读，任何帮助将不胜感激。

资料来源：

[代码项目](http://www.codeproject.com/Articles/33384/Multilevel-Undo-and-Redo-Implementation-in-C-Part) [VisualStudioMagazine](http://visualstudiomagazine.com/articles/2012/04/24/net-command-pattern-part-2.aspx) [StackOverFlow](https://stackoverflow.com/questions/701131/data-structure-used-to-implement-undo-and-redo-option)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:29:56.893

由于接口不需要访问数据（它应该只需要一个`Undo()`/`Redo()`方法对，并且可能需要一个是否可以撤消的标志），它根本不需要知道参数。

一种选择可能是使您的实现`IUndoCommand`泛型。然后，您可以使用它以类型安全的方式存储参数。

然后你的`CommandBase`类可以是通用的，即：

```
class CommandBase<T> : ICommand, IUndoCommand
{
    // You could then store the parameter directly...
    public T Parameter { get; private set; }
} 
```

# google-apps-script - Google 电子表格 - 自定义菜单不会加载，因为 onOpen 不会触发

> ID：14652700
> 
> 赞同：0
> 
> 时间：2013-02-01T18:25:59.157
> 
> 标签：google-apps-script, google-sheets, google-apps

我正在按照“[定义电子表格菜单](https://developers.google.com/apps-script/articles/defining_menus)”教程中的规定做所有事情。使用 onOpen 事件处理程序修改菜单。

我已经在“脚本库”中公开了这个“文本到列”脚本，但我担心当自定义菜单需要很长时间才能弹出时，下载的用户可能会感到困惑。

第一次加载脚本被证明是一种痛苦。很多时候完全错过了 onOpen 触发器。似乎触发器设置不正确，因为手动重置 onOpen 触发器将修复它。

对于个人使用，我认为这是一个小麻烦，但对于共享脚本，它成为一个支持问题。

*注意：每次后续加载始终需要大约 7 秒才能出现，这还可以，但远非理想。*

**这是 onOpen 处理程序：**

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [];
  menuEntries.push({ name:"Text to columns", functionName:"textToColumns" });
  menuEntries.push({ name:"Text to columns (custom separator)", functionName:"textToColumnsCustom" });
  menuEntries.push(null);
  menuEntries.push({ name:"Columns to Text", functionName:"columnsToText" });
  menuEntries.push({ name:"Columns to Text (custom separator)", functionName:"columnsToTextCustom" });
  ss.addMenu("Advanced", menuEntries);
} 
```

*注意：这是在只有一个用户的新（即空）电子表格上测试的。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:59:10.987

我不确定，但用户必须登录我想，如果没有，我曾经遇到过这个问题并通过制作两个或多个触发器来解决它，所有触发器都处于打开状态并且功能相同，但是尝试上网速度超过 30KB/s 以确保问题出在代码上，而不是您的设备上

# php - 根据sql语句中的其他字段选择正确的字段

> ID：14652705
> 
> 赞同：0
> 
> 时间：2013-02-01T18:26:18.650
> 
> 标签：php, mysql, sql

我正在寻找一种解决方案，我可以直接在我的 sql 语句中根据字段值获取结果。

例如，如果我有以下结构：

```
calculated_result     result_one     result_two     result_three
1                     2.50           3.40           2.90
2                     1.90           2.00           3.90
1                     1.30           2.23           1.50 
```

然后我想进行搜索，它应该返回所有计算结果为 1 且 result_one 高于 2.30 且小于或等于 2.65 的结果。

问题是，我不知道如何只返回适合用户搜索的行。

computed_result = 1 应该检查 result_one 是否大于和小于行内容计算结果 = 2 应该检查 result_two 是否大于和小于行内容等

希望这是有道理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:30:18.343

```
select  *
from    myTable
where   (calculated_result = 1 and result_one between 2.30 and 2.650)
or      (calculated_result = 2 and result_two between 2.30 and 2.650)
or      (calculated_result = 3 and result_three between 2.30 and 2.650) 
```

或者，如果您想使用`case`

```
select  *
from    myTable
where   case 
          when calculated_result = 1 then result_one 
          when calculated_result = 2 then result_two
          when calculated_result = 3 then result_three
        end between 2.30 and 2.650 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:35:27.960

您可以尝试使用[`CASE`运算符](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)。

```
SELECT * FROM yourTable
WHERE (CASE
  WHEN calculated_result = 1 THEN result_one
  WHEN calculated_result = 2 THEN result_two
END) > 2.3
AND (CASE
  WHEN calculated_result = 1 THEN result_one
  WHEN calculated_result = 2 THEN result_two
END) <= 2.65 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:30:09.063

尝试这个

```
SELECT 
       * 
FROM 
       table_name 
WHERE 
       calculated_result = 1 AND
       result_one > 2.30 AND
       result_one <= 2.65 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:33:26.513

其他：

```
select  *
from    myTable
where   calculated_result in (1, 2, 3) and 
(result_one between 2.30 and 2.650 or result_two between 2.30 and 2.650
or result_three between 2.30 and 2.650)
; 
```

[演示](http://sqlfiddle.com/#!2/af6d5/5)

# python - Python BeautifulSoup - 在找到的关键字周围添加标签

> ID：14652706
> 
> 赞同：2
> 
> 时间：2013-02-01T18:26:22.277
> 
> 标签：python, html, insert, tags, beautifulsoup

我目前正在开展一个项目，我希望在该项目中允许在大量 HTML 文件中/上进行正则表达式搜索。

在首先确定我感兴趣的文件之后，我现在想突出显示找到的关键字！

使用 BeautifulSoup，我可以确定找到我的关键字的节点。我做的一件事是改变整个父母的颜色。

但是，我还想在我找到的关键字周围添加我自己的 <span>-Tags。

使用 BFSoup 提供的 find() 函数确定位置等没什么大不了的。但是在常规文本周围添加我的标签似乎是不可能的？

```
# match = keyword found by another regex
# node = the node I found using the soup.find(text=myRE)
node.parent.setString(node.replace(match, "<myspan>"+match+"</myspan>")) 
```

这样我只添加了文本而不是适当的标签，因为文档不是新解析的，我希望避免这种情况！

我希望我的问题变得有点清楚:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:47:54.397

这是一个简单的示例，显示了一种方法：

```
import re
from bs4 import BeautifulSoup as Soup

html = '''
<html><body><p>This is a paragraph</p></body></html>
''' 
```

(1) 存储文本并清空标签

```
soup = Soup(html)
text = soup.p.string
soup.p.clear()
print soup 
```

（2）获取要加粗的单词的开始和结束位置（为我的英语道歉）

```
match = re.search(r'\ba\b', text)
start, end = match.start(), match.end() 
```

(3) 拆分文本并添加第一部分

```
soup.p.append(text[:start])
print soup 
```

(4) 创建一个标签，将相关文本添加到它并附加到父级

```
b = soup.new_tag('b')
b.append(text[start:end])
soup.p.append(b)
print soup 
```

(5) 附加文本的其余部分

```
soup.p.append(text[end:])
print soup 
```

这是上面的输出：

```
<html><body><p></p></body></html>
<html><body><p>This is </p></body></html>
<html><body><p>This is <b>a</b></p></body></html>
<html><body><p>This is <b>a</b> paragraph</p></body></html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:42:47.040

如果添加文字...

```
my_tag = node.parent.setString(node.replace(match, "<myspan>"+match+"</myspan>")) 
```

...并再次通过 BeautifulSoup

```
new_soup = BeautifulSoup(my_tag) 
```

它应该被归类为 BS 标记对象并且可用于解析。

您可以将这些更改应用于原始大量文本并将其作为一个整体运行，以避免重复。

编辑：

从[文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)：

```
# Here is a more complex example that replaces one tag with another: 

from BeautifulSoup import BeautifulSoup, Tag
soup = BeautifulSoup("<b>Argh!<a>Foo</a></b><i>Blah!</i>")
tag = Tag(soup, "newTag", [("id", 1)])
tag.insert(0, "Hooray!")
soup.a.replaceWith(tag)
print soup
# <b>Argh!<newTag id="1">Hooray!</newTag></b><i>Blah!</i> 
```

# c++ - 如何在 C++ 中动态创建新的二维数组

> ID：14652708
> 
> 赞同：4
> 
> 时间：2013-02-01T18:26:35.673
> 
> 标签：c++, dynamic, multidimensional-array

如主题如何在 C++ 中创建新的二维数组？下面的代码不能很好地工作。

```
int** t = new *int[3];
for(int i = 0; i < 3; i++)
       t[i] = new int[5]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T18:29:40.673

你有一个`*`错误的地方。尝试：

```
int **t = new int *[3]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T18:30:08.563

会`vector< vector< int > >`工作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:48:27.043

您可能希望将 2D 矩阵“展平”为 1D 数组，将其元素存储在一个方便的容器中`std::vector`（这比使用 更有效`vector<vector<T>>`）。然后您可以将二维`(row, column)`矩阵索引映射到一维数组索引。

如果将元素按行存储在矩阵中，则可以使用如下公式：

> ```
> 1D array index = column + row * columns count 
> ```

您可以将其包装在一个方便的 C++ 类中（`operator()`为正确访问矩阵元素而重载）：

```
template <typename T>
class Matrix {
public: 
    Matrix(size_t rows, size_t columns)
        : m_data(rows * columns), m_rows(rows), m_columns(columns) {}

    size_t Rows() const { return m_rows; }

    size_t Columns() const { return m_columns; }

    const T & operator()(size_t row, size_t column) const { 
        return m_data[VectorIndex(row, column)];
    }

    T & operator()(size_t row, size_t column) {
        return m_data[VectorIndex(row, column)];
    }

private:
    vector<T> m_data;
    size_t m_rows;    
    size_t m_columns; 

    size_t VectorIndex(size_t row, size_t column) const {
        if (row >= m_rows)
            throw out_of_range("Matrix<T> - Row index out of bound.");
        if (column >= m_columns)
            throw out_of_range("Matrix<T> - Column index out of bound.");           
        return column + row*m_columns;
    }
}; 
```

# actionscript-3 - 如何在屏幕上循环补间/自动滚动 TextField

> ID：14652709
> 
> 赞同：0
> 
> 时间：2013-02-01T18:26:36.137
> 
> 标签：actionscript-3, air, tween, autoscroll, flash-cs6

我正在使用适用于 iOS SDK 的 Flash AS3、AIR 3.2。我正在尝试使 TextField 出现并从屏幕右侧自动补间到左侧，消失，然后在循环中再次从右侧重新出现。

试图弄清楚我什至如何开始编写代码及其背后的逻辑。目前，我有一个名为 MarqueeTextField 的类正在滚动。但它只能在字符之间滚动/选取字母，而不是在屏幕上从点到点。当以慢速滚动且不流畅时，它也会“卡顿”。

```
public class MarqueeTextField extends TextField
{
    /** Timer that ticks every time the marquee should be updated */
    private var __marqueeTimer:Timer;

    /**
    *   Make the text field
    */
    public function MarqueeTextField()
    {
        __marqueeTimer = new Timer(0);
        __marqueeTimer.addEventListener(TimerEvent.TIMER, onMarqueeTick);
    }

    /**
    *   Callback for when the marquee timer has ticked
    *   @param ev TIMER event
    */
    private function onMarqueeTick(ev:TimerEvent): void
    {
        this.text = this.text.substr(1) + this.text.charAt(0);
    }

    /**
    *   Start marqueeing
    *   @param delay Number of milliseconds between wrapping the first
    *                character to the end or negative to stop marqueeing
    */
    public function marquee(delay:int): void
    {
        __marqueeTimer.stop();
        if (delay >= 0)
        {
            __marqueeTimer.delay = delay;
            __marqueeTimer.start();
        }
    }
}
} 
```

我已经搜索过，似乎没有任何只使用 AS3（他们使用 Flash GUI）。任何人都可以向我解释我将如何开始编写代码并使其即使在低速时也能顺利进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:44:24.467

如果你真的需要，你总是可以使用[GreenSock 的 Tweening 引擎](http://www.greensock.com/tweenlite/)。只需导入包并简单地使用`TweenLite.to()`. 此外，看起来您只是在插入文本，而不是实际更改文本框的位置。

# javascript - 单击外部时隐藏 div

> ID：14652712
> 
> 赞同：4
> 
> 时间：2013-02-01T18:26:40.130
> 
> 标签：javascript

我正在使用一个简单的 javascript 代码来切换 div onclick。您可以在此链接上看到它的实际效果：k-prim.biz/Untitled-2.html - 这是一个非常简单的演示页面。我想做的是不仅在单击“链接”时隐藏div，而且在单击div外部时也隐藏div。另外，当显示 div 时，如何更改“链接”的 css 样式？先感谢您！

```
<script type="text/javascript" language="javascript"> 
   function showHide() {
   var ele = document.getElementById("showHideDiv");
if(ele.style.display == "block") {
        ele.style.display = "none";
  }
else {
    ele.style.display = "block"; }
}
</script> 
<a href="#" onClick="return showHide();" >link</a>
<div id="showHideDiv" style="display:none;">hello!</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T18:28:15.603

你没有给我任何代码，所以你必须修改它以满足你的需要：

```
$(document).click(function() {
    if(this != $("#the_div")[0]) {
        $("#the_div").hide();
    }
}); 
```

如果用户单击页面上不是该 div 的任何位置，这将隐藏该 div。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-05T15:47:52.730

HTML：

```
<div id="settings">
<input/><select></select><span>text</span>
</div> 
```

Javascript：

```
var settings = document.getElementById('settings');

document.onclick = function(e){

    var target = (e && e.target) || (event && event.srcElement);
    var display = 'none';

    while (target.parentNode) {

        if (target == settings) {
            display ='block';
            break;
        }
        target = target.parentNode;
    }

settings.style.display = display;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:15:47.880

这是我写的一个快速破解。我不确定您为什么要通过单击文档上的任意位置来执行相同的活动。如果您想这样做，请将 jQuery('#link') 替换为 jQuery(document)。

```
 <html>
        <head>
           <script type="text/javascript">
               $(document).ready(function(){
                  jQuery('#link').click(function(){
                       if(jQuery('#showHideDiv').hasClass('hide')) {
                          jQuery('#showHideDiv').removeClass('hide');
                          jQuery('#link').css('color', 'red');
                       } else {
                           jQuery('#showHideDiv').addClass('hide');
                           jQuery('#link').css('color', 'blue');
                       }
                    });            
                });
            </script>
        </head>
       <body>
            <a href="#" id="link" >link</a>
            <div id="showHideDiv" class="hide">hello!</div>    
       </body>
    </html> 
```

这是 jsfiddle 的链接

[http://jsfiddle.net/EUScV/9/](http://jsfiddle.net/EUScV/9/)

并添加 css 规则

```
 .hide {
        display:none;
    } 
```

# oracle - 修改多个oracle触发器

> ID：14652716
> 
> 赞同：2
> 
> 时间：2013-02-01T18:26:41.473
> 
> 标签：oracle, triggers

我的任务涉及更新许多完全相同的查询但应用于多个不同表的触发器。有没有办法使用 FOR 或类似的语句来更新所有这些触发器？实际上我需要做的是修改所有这些触发器的 WHEN 子句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:30:07.887

您可以为此使用 dbms_metadat。

例如：

```
declare
  type arr_tab is table of varchar2(30);
  v_arr arr_tab;
  v_trig  clob;
begin
  dbms_metadata.set_transform_param( DBMS_METADATA.SESSION_TRANSFORM, 
                    'SQLTERMINATOR', FALSE );

  v_arr := arr_tab('TEST_TRIG', 'TEST2_TRIG'); -- change these triggers.
  for idx in 1..v_arr.count
  loop
    v_trig := dbms_metadata.get_ddl('TRIGGER',v_arr(idx), user);
    execute immediate regexp_replace(regexp_replace(v_trig, 'ALTER TRIGGER.*', ''), 'WHEN ([^\)]*\))', 'WHEN (1=1)', 1, 1, 'mi');
  end loop;
end;
/ 
```

该`'WHEN ([^\)]*\))', 'WHEN (1=1)'`部分将`WHEN`子句替换为 (在我的情况下) `WHEN (1=1)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:30:39.100

您可以使用 dba_triggers 将触发器的文本提取到 CREATE 或 replace 语句中。但是由于某些列是 LONG 数据类型，您将无法将它们提取为 VARCHAR2。这可以通过使用在 oracle 网站某处丢失的 Tom Kytes 包来解决。我包括我自己的版本，您可能需要对其进行修改以满足您的需求。

运行选择，插入您的 when 子句，然后运行创建或替换语句。

由于 trigger_body 是长数据类型，这将不起作用

```
select 'CREATE OR REPLACE TRIGGER '|| description
||trigger_body
from dba_triggers
where owner = 'Your schema' 
```

但如果您的触发器不超过 4000 个字符，这应该可以工作

```
select 'CREATE OR REPLACE TRIGGER '|| description
    || ADMIN.LONG_HELP.SUBSTR_OF('select trigger_body from dba_triggers where    trigger_name = :0',
1,4000,'0',dt.trigger_name)
from dba_triggers dt
where owner = 'YourSchema';

CREATE OR REPLACE PACKAGE ADMIN.LONG_HELP
   /******************************************************************************
      NAME:       LONG_HELP
      PURPOSE:    Read fields of type long.  (commonly found in data dictionary)

      REVISIONS:
      Ver        Date        Author           Description
      ---------  ----------  ---------------  ------------------------------------
      1.0        10/27/2011             1\. Created this package. based on Tom Kyte's column here
      http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:839298816582
      note  that it only retrieves the first 4000 characters of any LONG column
      USAGE in a WHERE
      INSTR(
      ADMIN.LONG_HELP.SUBSTR_OF('SELECT text from all_views where view_name =:o ',
      1,4000,'o',m2.obj_name),m1.FK_ID) > 0

   ******************************************************************************/

   --AUTHID CURRENT_USER 
   --removed to get around ORA-29470: Effective userid or roles are not the same as when cursor was parsed
   --restrict usage to admin schema for Oracle 11g

AS
   FUNCTION substr_of (p_query   IN VARCHAR2,
                       p_from    IN NUMBER,
                       p_for     IN NUMBER,
                       p_name1   IN VARCHAR2 DEFAULT NULL ,
                       p_bind1   IN VARCHAR2 DEFAULT NULL ,
                       p_name2   IN VARCHAR2 DEFAULT NULL ,
                       p_bind2   IN VARCHAR2 DEFAULT NULL ,
                       p_name3   IN VARCHAR2 DEFAULT NULL ,
                       p_bind3   IN VARCHAR2 DEFAULT NULL ,
                       p_name4   IN VARCHAR2 DEFAULT NULL ,
                       p_bind4   IN VARCHAR2 DEFAULT NULL )
      RETURN VARCHAR2;
END LONG_HELP;
/
CREATE OR REPLACE PACKAGE BODY ADMIN.LONG_HELP
AS
   g_cursor   NUMBER := DBMS_SQL.open_cursor;
   g_query    VARCHAR2 (32765);

   PROCEDURE bind_variable (p_name IN VARCHAR2, p_value IN VARCHAR2)
   IS
   BEGIN
      IF (p_name IS NOT NULL)
      THEN
         DBMS_SQL.bind_variable (g_cursor, p_name, p_value);
      END IF;
   END BIND_VARIABLE;

   FUNCTION substr_of (p_query   IN VARCHAR2,
                       p_from    IN NUMBER,
                       p_for     IN NUMBER,
                       p_name1   IN VARCHAR2 DEFAULT NULL ,
                       p_bind1   IN VARCHAR2 DEFAULT NULL ,
                       p_name2   IN VARCHAR2 DEFAULT NULL ,
                       p_bind2   IN VARCHAR2 DEFAULT NULL ,
                       p_name3   IN VARCHAR2 DEFAULT NULL ,
                       p_bind3   IN VARCHAR2 DEFAULT NULL ,
                       p_name4   IN VARCHAR2 DEFAULT NULL ,
                       p_bind4   IN VARCHAR2 DEFAULT NULL )
      RETURN VARCHAR2
   AS
   /******************************************************************************
   NAME:       LONG_HELP.SUBSTR_OF
   PURPOSE:    CONVERT long data fields into VARCHAR2
   WHOSE DATA IS CHANGED: none
   WHAT USES THIS:
   WHERE ARE THE RESOURCES NEEDED:

******************************************************************************/
      l_buffer       VARCHAR2 (4000);
      l_buffer_len   NUMBER;
   BEGIN
      IF (NVL (p_from, 0) <= 0)
      THEN
         raise_application_error (-20002,
                                  'From must be >= 1 (positive numbers)');
      END IF;

      IF (NVL (p_for, 0) NOT BETWEEN 1 AND 4000)
      THEN
         raise_application_error (-20003, 'For must be between 1 and 4000');
      END IF;

      IF (p_query <> g_query OR g_query IS NULL)
      THEN
         IF (UPPER (TRIM (NVL (p_query, 'x'))) NOT LIKE 'SELECT%')
         THEN
            raise_application_error (-20001, 'This must be a select only');
         END IF;

         DBMS_SQL.parse (g_cursor, p_query, DBMS_SQL.native);
         g_query := p_query;
      END IF;

      bind_variable (p_name1, p_bind1);
      bind_variable (p_name2, p_bind2);
      bind_variable (p_name3, p_bind3);
      bind_variable (p_name4, p_bind4);

      DBMS_SQL.define_column_long (g_cursor, 1);

      IF (DBMS_SQL.execute_and_fetch (g_cursor) > 0)
      THEN
         DBMS_SQL.column_value_long (g_cursor,
                                     1,
                                     p_for,
                                     p_from - 1,
                                     l_buffer,
                                     l_buffer_len);
      END IF;

      RETURN l_buffer;
   END substr_of;
END LONG_HELP;
/ 
```

# xslt - XSLT 翻译 web 配置 httpHandlers

> ID：14652718
> 
> 赞同：1
> 
> 时间：2013-02-01T18:26:46.830
> 
> 标签：xslt, iis, web-config, httphandler

由于 IIS 7 中的处理程序部分已移动到另一个部分，我想在 TFS 构建过程中自动移动这些部分。在那种情况下，我可以同时为 IIS 6.5 和 7.x 环境提供服务。

我想通过使用 XSLT 执行以下操作：

```
<configuration>
   <system.web>
      <httpHandlers>
            <add verb="*" path="*.New" type="MyHandler.New,MyHandler"/>
            <add verb="GET,HEAD" path="*.MyNewFileExtension" type="MyHandler.MNFEHandler,MyHandler.dll"/>
     </httpHandlers>
   <system.web>
</configuration> 
```

必须翻译成：

```
<configuration>
    <system.web>
    </system.web>
    <system.webServer>
        <handlers>
            <add name="handler 1" verb="*" path="*.New" type="MyHandler.New,MyHandler"/>
            <add name="handler 2" verb="GET,HEAD" path="*.MyNewFileExtension" type="MyHandler.MNFEHandler,MyHandler.dll"/>
        </handlers>
   <system.webServer>
</configuration> 
```

任何人都可以通过为此制作 XSLT 来帮助我或指出正确的方向吗？（另请注意：第二个 xml 中的额外属性 [名称]）

我知道如何进行简单的翻译，但在 de xml 中移动节点集合更难。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:42:23.827

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="system.web">
    <system.web>
      <xsl:text>&#xA;</xsl:text>
    </system.web>
    <system.webServer>
      <handlers>
        <xsl:apply-templates select="httpHandlers/*" />
      </handlers>
    </system.webServer>
  </xsl:template>

  <xsl:template match="system.web/httpHandlers/*">
    <xsl:copy>
      <xsl:attribute name="name">
        <xsl:value-of select="concat('handler ', position())"/>
      </xsl:attribute>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时（在`<system.web>`添加结束时缺少的斜线之后），这会产生：

```
<configuration>
  <system.web>
  </system.web>
  <system.webServer>
    <handlers>
      <add name="handler 1" verb="*" path="*.New" type="MyHandler.New,MyHandler" />
      <add name="handler 2" verb="GET,HEAD" path="*.MyNewFileExtension" type="MyHandler.MNFEHandler,MyHandler.dll" />
    </handlers>
  </system.webServer>
</configuration> 
```

这`<xsl:text>&#xA;</xsl:text>`可能不是必需的，但是您的示例`<system.web>`在不同的行中的输出中有打开和关闭，所以我添加了它以确保它们不会组合成一个短标签 ( `<system.web />`)。

# ios - CAKeyFrameAnimation 在重复之前延迟

> ID：14652720
> 
> 赞同：7
> 
> 时间：2013-02-01T18:26:54.033
> 
> 标签：ios, animation, delay, geometry, cakeyframeanimation

我有一个围绕路径制作动画的球图像。动画设置为永远重复，但为什么重复之间会有延迟？

这是我的代码：

```
CGPathRef aPath;
aPath = CGPathCreateWithEllipseInRect(CGRectMake(0, 0, SIZE, SIZE), NULL);

[CATransaction begin];

arcAnimation = [CAKeyframeAnimation animationWithKeyPath: @"position"];
[arcAnimation setBeginTime:CACurrentMediaTime()];
[arcAnimation setDuration: 1.5];
[arcAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]];
[arcAnimation setAutoreverses: NO];
[arcAnimation setRepeatCount:HUGE_VALF];
arcAnimation.removedOnCompletion = NO;
arcAnimation.fillMode = kCAFillModeRemoved;
[arcAnimation setPath: aPath];
[ball.layer addAnimation: arcAnimation forKey: @"position"];
[CATransaction commit];
CFRelease(aPath); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T13:39:02.087

尝试这个：

```
[animation setCalculationMode:kCAAnimationPaced] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:47:03.767

我不知道实际的答案，但你在这里做了很多不必要的事情，我的建议是你先删除它。不需要 CATransaction 块（`begin`和`commit`）。没有必要为`setBeginTime:`. 绝对不需要设置`removedOnCompletion`and `fillMode`，因为这不是分组动画。只需将动画添加到图层并退后即可。它会立即开始并永远重复，你的代码会更简单更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:46:16.513

您必须替换`kCAFillModeRemoved`为`kCAFillModeForwards`或其他值。阅读[有关原因](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CAMediaTiming_protocol/Introduction/Introduction.html#//apple_ref/occ/intfp/CAMediaTiming/fillMode)的文档。

此外：

代替：

```
[arcAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]] 
```

使用（取决于您的测试结果）：

```
[arcAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]] 
```

或者

```
[arcAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]] 
```

# c# - 收集具有后向和前向链路的 DAG 的所有路径

> ID：14652724
> 
> 赞同：2
> 
> 时间：2013-02-01T18:26:59.343
> 
> 标签：c#, algorithm, graph-theory

我有一个有向无环图，其中每个节点都由一个状态表示

```
public class State{
   List<State> ForwardStates;
   List<State> backStates;
   string stateName;
} 
```

其中`ForwardStates`是来自当前状态的通过前向链接的状态列表。并且`backStates`是来自当前状态的反向链接的状态列表。

我有两个特殊状态

```
State initialState (name=initial)
State finalState (name=final) 
```

我希望找到从初始状态开始到最终状态的所有路径，并填充

```
List<List<string>> paths 
```

例如给出如下图

![在此处输入图像描述](../Images/3e8b9041bfcb618ff83ea25f581b77d3.png)

反向链接用棕色虚线箭头表示，前向链接用黑色具体箭头表示，可能的路径是 {{initial, b, a, final},{initial, c, final},{initial, b, initial,final }}

规则是从初始状态开始，必须经过1个或多个反向链接，才能经过前向链接，一旦切换到前向链接，就一直保持前向链接（即不能再使用后向链接） ）。

这个问题是这个问题的延伸（[收集 DAG 的所有路径](https://stackoverflow.com/questions/14631861/collecting-all-paths-of-dag)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:36:48.330

*使用仅使用反向链接*的图从初始状态执行[DFS](http://en.wikipedia.org/wiki/Depth-first_search)。从在此 DFS 期间发现的每个节点（initialState 除外）执行另一个 DFS，直到找到目标的路径（仅使用前向链接）。

 *对于您在 DFS 期间在反向链接上发现的每个节点`u`，路径是

```
path(initialState,u) ; path(u,finalState) 
```

`path(u,v)`此步骤的相关 DFS 找到的路径 在哪里。
请注意，它可能会被`u`多次调用 - 您为从`initialState`to找到的每个路径调用它`u`，因为它是不同的必需路径。

* * *

如果您只需要路径数量，则可以使用[拓扑排序](http://en.wikipedia.org/wiki/Depth-first_search)和[DP](http://en.wikipedia.org/wiki/Dynamic_programming)更快地解决它，但这里不是这种情况。*

# c# - 在同一页面上显示评论和发布表单以添加新评论

> ID：14652728
> 
> 赞同：0
> 
> 时间：2013-02-01T18:27:08.650
> 
> 标签：c#, asp.net, asp.net-mvc

我正在构建一个 Web 应用程序`ASP.NET MVC`。我有一个评论页面，其中评论显示在列表中，从最新到最旧，并且底部还有一个表单，用户可以在其中发布新评论。除了让页面显示最新评论外，还应突出显示表单条目。

最好的方法是什么，显示的数据和发布表单在同一页面上？

没有ajax也可以做到这一点吗？

--代码提取--

```
class CommentsViewModel
{
   public IList<Comment> comments { get; set; }
    public Comment comment { get; set; }
    public SelectList commentCategories { get; set; }
 }

class Comment
{
    [Required]
    public string commentData { get; set; }

    [Required]
    public int? commentCategory { get; set; }
}

class Comments : Controller
{

    public ActionResult Index()
    {
        Site db = new Site();
        CommentsViewModel commenstVm = new
        {
            comments = db.GetComments(),
            comment = new Comment(),
            commentCategories = db.GetCommentCategories()
        };

        return View(commentsVm);
    }

    [HttpPost]
    public ActionResult AddNewComment(CommentsViewModel commentVm)
    {
        Site db = new Site();
        if (!ModelState.IsValid)
        {
            return View("Index", commentVm);
        }
        db.AddComment(commentVm.comment);

        return RedirectToAction("Index");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:26:45.223

这是一个基本`View`的`Controller`，您可以将其用作起点。

**模型和视图模型：**

```
public class CommentsViewModel
{
    public IList<Comment> comments { get; set; }

    public CommentsViewModel()
    {
        comments = new List<Comment>();
    }
}

public class Comment
{
    [Required]
    public string commentData { get; set; }
    /** Omitted other properties for simplicity */
} 
```

**看法：**

```
@using (@Html.BeginForm("Index", "Comments"))
{
   @Html.TextBoxFor(t => t.comment.commentData)
   @Html.ValidationMessageFor(t=> t.comment.commentData, "", new {@class = "red"})
   <button name="button" value="addcomment">Add Comment</button>
}

@foreach (var t in Model.comments)
{
    <div>@t.commentData</div>
} 
```

**控制器：**

```
public class CommentsController : Controller
{
    /** I'm using static to persist data for testing only. */
    private static CommentsViewModel _viewModel;

    public ActionResult Index()
    {
        _viewModel = new CommentsViewModel();
        return View(_viewModel);
    }

    [HttpPost]
    public ActionResult Index(Comment comment)
    {
        if (ModelState.IsValid)
        {
            _viewModel.comments.Add(
                new Comment() {commentData = comment.commentData});
            return View("Index", _viewModel);
        }

        return RedirectToAction("Index");
    }
} 
```

# android - Android渐变不填充背景

> ID：14652730
> 
> 赞同：0
> 
> 时间：2013-02-01T18:27:12.893
> 
> 标签：android, gradient

我遇到了渐变背景的问题。结果不是我想要的。我无法在渐变上更改任何内容。

影子.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">

<gradient
    android:angle="0"
    android:endColor="@color/holo_orange_dark"
    android:startColor="@color/holo_green_dark" />

</shape> 
```

颜色.xml

```
<color name="holo_green_dark">#ff669900</color>
<color name="holo_orange_dark">#ffff8800</color> 
```

项目.xml

```
<View
 android:layout_width="fill_parent"
 android:layout_height="10dp"
 android:layout_alignBottom="@+id/term"
 android:layout_alignLeft="@+id/term"
 android:background="@drawable/shadow"
 /> 
```

每种颜色总是黑白的。问题是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:20:04.843

将视图背景从更改`android:background="@drawable/shadow"`为`android:background="@drawable/gradient"`您提到的**gradient.xml**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T09:42:43.753

使用以下代码为视图或布局应用渐变。

活动主.xml：

```
<LinearLayout
android:layout_width="match_parent"
android:layout_height="30dp"
android:background="@drawable/gradient_transparent"/> 
```

gradient_transparent.xml(res/drawable)：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<gradient
android:startColor="#000000"
android:centerColor="#7f000000"
android:endColor="#0f000000"
android:angle="90"
android:dither="true"
/>
</shape> 
```

# php - 使用php的xml登录脚本

> ID：14652735
> 
> 赞同：-1
> 
> 时间：2013-02-01T18:27:46.847
> 
> 标签：php

我正在尝试使用我在网上搜索过的 XML 文件查找登录脚本的教程，但似乎没有任何内容符合我的要求，这是我的 XML 文件的示例，任何帮助将不胜感激

```
<?xml version = "1.0" encoding="Windows-1252" standalone="yes"?>
<MYData>
    <login_details>
        <unique_ref>1-61</unique_ref>
        <login>me</login>
        <password>me</password>
        <file1/>
        <file2/>
        <file3/>
        <file4/>
    </login_details>
</MYData> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:31:32.883

您需要阅读子密码标签 ( [http://www.w3schools.com/php/php_xml_simplexml.asp](http://www.w3schools.com/php/php_xml_simplexml.asp) )，然后与用户输入的内容进行比较。但是...您确定这种方法吗？对于安全实例，为什么不将此任务留给提供该 XML 文件的 WS，然后您将用户输入作为参数传递呢？甚至以某种方式加密.​​.....然后如果密码匹配或不匹配，WS 返回 true 或 false

# ruby-on-rails - 为什么 @communities = Community.find_by_author(params[:author]) 不起作用？

> ID：14652741
> 
> 赞同：-1
> 
> 时间：2013-02-01T18:27:57.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我确实有一个模型，我确实有一个在社区表中 `Community`
调用的属性。`author`

我有models/community.rb

但是，这行不通。为什么？

```
@communities = Community.find_by_author(params[:author]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:33:09.537

`find_by`只会给出第一个匹配的记录。所以`where`用来获取所有匹配的记录。

```
 Community.where(:author => params[:author]) 
```

# php - 使用facebook登录系统api最安全的方法是什么

> ID：14652748
> 
> 赞同：2
> 
> 时间：2013-02-01T18:28:13.890
> 
> 标签：php, facebook, security, facebook-graph-api

用户可以登录我的网站的唯一方法是使用 facebook 登录（我使用 php sdk）。我将他们的电子邮件、ID、他们创建的内容存储在我的数据库中。

我正在使用 CodeIgniter 并让他们可以根据存储在会话变量中的 facebook 用户 ID 访问页面。我想知道这是否足够安全。如果不是，那么最安全的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T17:08:03.460

永远不要将个人数据存储在 SESSION 或 COOKIE 中。

我建议只存储您会员的会员 ID，而不是 Facebook ID。然后使用它从数据库中提取其他数据。

# bash - bash：如何拦截命令行并根据内容执行各种操作？

> ID：14652752
> 
> 赞同：0
> 
> 时间：2013-02-01T18:28:24.480
> 
> 标签：bash, shell, unix

我想知道以下问题的解决方案。

问题：当我在命令行上输入数字/字符串时，我应该能够以我自己的方式解释它，并根据字符串的内容执行任何操作，例如，如果它是数字则执行操作 1，否则执行操作 2 ， ETC。

例子：

```
$ 85049  
[ This should do 'cd /dir1/dir2/../85049' ] 
```

我不能为此设置别名，因为我可以输入任何大数字。

任何想法，如何通过 bash 实现此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:33:23.223

您可以使用该`command_not_found_handle`功能。

[http://www.gnu.org/software/bash/manual/bashref.html#Command-Search-and-Execution](http://www.gnu.org/software/bash/manual/bashref.html#Command-Search-and-Execution)

不过，我认为这不是一个好主意，建议您重新考虑最初的前提。

# mysql - MySQL Select 语句无法理解

> ID：14652755
> 
> 赞同：-1
> 
> 时间：2013-02-01T18:28:25.490
> 
> 标签：mysql, sql

**设置：**

（数量 1）员工表（employeeID、employeeName）

（数量 1）PayType 表（payTypeID、payTypeName）

（数量 1）PaySchedule 表（payScheduleID、payScheduleName）

（数量 1）联结表（Employee_has_PayType），其中员工被分配了多个支付类型（employeeID、payTypeID）

（数量 1）联结表 (Employee_has_PaySchedule)，其中为员工分配了多个工资计划（employeeID、payScheduleID）

**我需要的：**

我想获取所有分配了这些payTypeID（29,31,32）（来自Employee_has_PayType）**和**具有payScheduleID 1（来自Employee_has_PaySchedule）中的一个或所有的EmployeeID

我只想要那些同时满足这两个条件的 EmployeeID。

到目前为止，我已经尝试过：

```
SELECT 
    Employee_has_PayType.Employee_employeeID as 'type',
    Employee_has_PaySchedule.Employee_employeeID  as 'sched'
FROM
    Employee_has_PayType, Employee_has_PaySchedule 
WHERE 
    Employee_has_PayType.PayType_payTypeID in (29,31,32) 
AND 
    Employee_has_PaySchedule.PaySchedule_payScheduleID = 1
GROUP BY
    Employee_has_PayrollSchedule.Employee_EmployeeID 
```

但它只返回所有具有 paySchedule 1 的员工 ID。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:35:39.980

尝试：

```
SELECT DISTINCT
    Employee_has_PayType.Employee_employeeID 
FROM Employee_has_PayType
JOIN Employee_has_PaySchedule 
  ON Employee_has_PayType.Employee_employeeID = 
     Employee_has_PaySchedule.Employee_employeeID
WHERE 
    Employee_has_PayType.PayType_payTypeID in (29,31,32) 
AND Employee_has_PaySchedule.PaySchedule_payScheduleID = 1 
```

# php - 如何对上传的文件使用“变量变量”？

> ID：14652756
> 
> 赞同：0
> 
> 时间：2013-02-01T18:28:27.723
> 
> 标签：php, file-upload, scope

我正在尝试将上传的文件放入循环中以减少代码。

```
<input type="file" name="new1[]" accept="image/*">
<input type="file" name="new2[]" accept="audio/*">
<input type="file" name="new3[]" accept="text/*"> 
```

在 php 中有这些文件的循环

```
<?php
 $all=array();
 $all[]=array('new1','Dir_for_1st_type_to_store');
 $all[]=array('new2','Dir for 2nd type');
 $all[]=array('new3','Dir for 3rd type');

 for($i=0;$i<count($all);$i++){
   $newFile=$$all[$i][0]; //that is VAR in VAR trick
   echo $newFile; //that's Ok. Temp files with paths displayed
   echo $newFile_name[$i]; //that's not Ok. No output

 ....................//here is a HUUUUUUGE amount of code, written for 'one file variable'
 }
?> 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:38:17.633

试试这个：

HTML：

```
<input type="file" name="new1[]" accept="image/*" multiple />
<input type="file" name="new2[]" accept="audio/*" multiple />
<input type="file" name="new3[]" accept="text/*" multiple /> 
```

PHP：

```
$map = Array(
    "new1"=>"Dir_for_1st_type_to_store",
    "new2"=>"Dir for 2nd type",
    "new3"=>"Dir for 3rd type",
);
foreach($map as $k=>$v) {
    $fileArray = $_FILES[$k];
    $keys = array_keys($fileArray["name"]);
    foreach($keys as $key) {
        $newFile = array_map(function($a) use ($key) {return $a[$key];},$fileArray);
        var_dump($newFile); // you should see temp filename and other file info
        var_dump($v); // this should be the target folder
        // do stuff with it
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:59:40.767

PHP 有一种组织`$_FILES`数组的愚蠢方式**。这个 HTML 表单：

```
<input type="file" name="new1[]" accept="image/*">
<input type="file" name="new1[]" accept="image/*">

<input type="file" name="new2[]" accept="audio/*">
<input type="file" name="new2[]" accept="audio/*">

<input type="file" name="new3[]" accept="text/*">
<input type="file" name="new3[]" accept="text/*"> 
```

生成类似于以下内容的数组：

```
// 1st new1 file
$_FILES["new1"]["name"    ][0]
$_FILES["new1"]["type"    ][0]
$_FILES["new1"]["size"    ][0]
$_FILES["new1"]["tmp_name"][0]
$_FILES["new1"]["error"   ][0]
// 2nd new1 file
$_FILES["new1"]["name"    ][1]
$_FILES["new1"]["type"    ][1]
$_FILES["new1"]["size"    ][1]
$_FILES["new1"]["tmp_name"][1]
$_FILES["new1"]["error"   ][1]
// likewise for 1st new2, 2nd new2, 1st new3, 2nd new3 
```

你的代码可以写成：

```
$all = array();
$all["new1"] = array("Dir for 1st type");
$all["new2"] = array("Dir for 2nd type");
$all["new3"] = array("Dir for 3rd type");

foreach ($all as $key => $conf) {
    for ($i = 0; $i < count($_FILES[$key]["name"]); $i++) {
        if ($_FILES[$key]["error"][$i] === 0) {
            echo $_FILES[$key]["tmp_name"][$i] . " goes to " . $conf[0] . "\n";
            // HUUUUUUGE amount of code goes here
        }
    }
} 
```

** 这只是我的意见。

# python - django-test-utils 全局名称“setup_test_environment”未定义

> ID：14652761
> 
> 赞同：0
> 
> 时间：2013-02-01T18:28:41.557
> 
> 标签：python, django, django-testing

我正在尝试使用 django-test-utils 在测试运行后保留我的数据库。

但是当我执行快速测试命令时：

```
python manage.py quicktest 
```

我收到此错误：

```
re/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/apps/desarrollo/workspace/3sure-server/venv/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/apps/desarrollo/workspace/3sure-server/venv/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/apps/desarrollo/workspace/3sure-server/venv/local/lib/python2.7/site-packages/test_utils/management/commands/quicktest.py", line 30, in handle
    failures = test_runner(test_labels, verbosity=verbosity, interactive=interactive)
  File "/apps/desarrollo/workspace/3sure-server/venv/local/lib/python2.7/site-packages/test_utils/test_runners/keep_database.py", line 30, in run_tests
    setup_test_environment()
NameError: global name 'setup_test_environment' is not defined 
```

我已经使用 pip 安装了 django-test-utils 并在我的 settings.py 中引用了该应用程序。我错过了安装步骤吗？

我正在使用 Django==1.4.3 和 django-test-utils==0.3

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:42:37.307

这个包太旧了。最后指定的支持是 Django 1.2。通过查看错误消息和`setup_test_environment`调用位置，我假设`pip`版本更旧。

通过查看 Github 上的[源代码](https://github.com/ericholscher/django-test-utils)，您会看到该文件`keep_database.py`已更新为`setup_test_environment`专门导入：

`from django.test.utils import setup_test_environment`

这不在旧版本的代码中，这可能是您`pip`安装的版本 - 因此是错误。

同样，这个项目作为一个整体是旧的，你应该找到一个替代方案，但如果你必须使用这个项目，我建议你从上面的 Github 链接获取一个新的分支，然后通过`setup.py`.

# javascript - 子组合器与级联：哪个性能更好，效率更高？

> ID：14652765
> 
> 赞同：1
> 
> 时间：2013-02-01T18:28:53.107
> 
> 标签：javascript, css

**子组合器：**

```
#main-navigation-wrapper > .main-navigation > .top-nav > .top-menu > .in {
    /* some styling */
} 
```

同样的东西可以用一种不太具体的方式来表示（**Cascading**，或者它被称为别的东西？？）：

```
#main-navigation-wrapper .main-navigation .in {
    /* some styling */
} 
```

从理论上讲，根据给定的示例，两者中的哪一个会更好的性能和效率？（请不要说它可以忽略不计。）

## 我的用例

由于社区成员一直建议我在我的问题中描述我想要实现的目标，所以这里是。

我将[Twitter Bootstrap](http://twitter.github.com/bootstrap/)用于一些 JavaScript 效果，这是我使用的代码段：

```
!function ($) {

  "use strict"; // jshint ;_;

 /* COLLAPSE PUBLIC CLASS DEFINITION
  * ================================ */

  var Collapse = function (element, options) {
     this.$element = $(element)
     this.options = $.extend({}, $.fn.collapse.defaults, options)

     if (this.options.parent) {
       this.$parent = $(this.options.parent)
     }

     this.options.toggle && this.toggle()
  }

  Collapse.prototype = {

     constructor: Collapse

  , dimension: function () {
       var hasWidth = this.$element.hasClass('width')
       return hasWidth ? 'width' : 'height'
     }

  , show: function () {
       var dimension
         , scroll
         , actives
         , hasData

       if (this.transitioning) return

       dimension = this.dimension()
       scroll = $.camelCase(['scroll', dimension].join('-'))
       actives = this.$parent && this.$parent.find('> .main-navigation > .top-nav > .top-menu > .in')

       if (actives && actives.length) {
         hasData = actives.data('collapse')
         if (hasData && hasData.transitioning) return
         actives.collapse('hide')
         hasData || actives.data('collapse', null)
       }

  /* and the code goes on... */

}(window.jQuery); 
```

在代码中寻找这个—— `> .main-navigation > .top-nav > .top-menu > .in`。

现在，我应该使用那个，还是这个`> .main-navigation .in`？这是我的问题，推理应该基于哪个性能更好，哪个效率更高。

如果我不够清楚，请告诉我。

## 我猜？

我认为这个 ( `#main-navigation-wrapper > .main-navigation > .top-nav > .top-menu > .in`) 更加高效和高效，因为我相信它可以帮助浏览器快速识别元素。不过我可能是错的，这就是我问的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:10:45.677

所有评论都是正确的，效果可以忽略不计。

此外，重要的是两条规则不相同。在某些情况下，它们会给出非常不同的结果。所以，选择一个或另一个不是性能问题，而是得到你真正想要的东西。

说了这么多，您是对的，**如果正确，子规则会更有效。**

如果您正在编写规则，并且您知道您的 DOM，并且规则不是过于具体，那么它会更有效。编写过于具体的规则是一个可以避免的问题，因为您了解 DOM，但框架编写者无法避免。

真正与众不同的是当你有很多内容时

```
#main-navegation-wrapper not(.main-navigation) 
```

第一条规则甚至不处理，第二条必须处理

# python - 使用 Web.py 转义 URL 参数

> ID：14652770
> 
> 赞同：0
> 
> 时间：2013-02-01T18:29:10.817
> 
> 标签：python, python-2.7, web.py

读取一个url如下：

example.com/product/xy&z

```
urls = ('/product/(.*)', product) 
```

在 GET 的产品类中，我正在读取从 URL 中提取的产品 ID (xy&z) 以创建数据库查询。其中一些 ID 中有一个“&”，当我在 python 中收到该值时，它已被转义。我的运气为零，因此我可以正确运行查询。以下不起作用：

```
product = product.replace("&amp;", "&")
product = HTMLParser.unescape.__func__(HTMLParser,product) 
```

Web.py 甚至 Python 的最佳实践是什么？什么是我自己诊断的最好方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:49:58.417

我正在开箱即用地获取这些产品 ID，请参阅以下代码。

```
import web

urls = (
    "/product/(.*)", "Product"
)

class Product:
    def GET(self, product_id):
        return product_id

app = web.application(urls, globals())

if __name__ == "__main__":
    #app.run()
    assert web.__version__ == "0.37"
    b = app.browser()
    b.open('/product/xy&amp;z')
    assert b.status == 200
    assert "xy&amp;z" in b.data
    assert "xy&z" not in b.data
    b.open('/product/xy&z')
    assert "xy&z" in b.data 
```

请提供不返回所需产品 ID 的失败 url。

# asp.net-mvc - 异步 ASP.NET MVC 4 操作的名称中是否需要“异步”后缀？

> ID：14652773
> 
> 赞同：16
> 
> 时间：2013-02-01T18:29:28.707
> 
> 标签：asp.net-mvc, asynchronous, asp.net-mvc-4, async-await

给定以下 ASP.NET MVC 4 控制器操作：

```
public async Task<ActionResult> FooAsync()
{
    using (var httpClient = new HttpClient())
    {
        var responseMessage = await httpClient.GetAsync("http://stackoverflow.com");
        string response = await responseMessage.Content.ReadAsStringAsync();

        return Content(response);
    }
} 
```

我是否需要在*FooAsync*中添加“Async”后缀才能异步运行该操作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-05-14T12:32:19.240

虽然这不是必需的，但我喜欢遵循约定并在我的异步方法上看到“...Async”后缀，所以我倾向于使用该`ActionName`属性来用非异步名称装饰控制器操作，这样你就可以拥有你的蛋糕也吃吧：）

```
[ActionName("Index")]
public async Task<ActionResult> IndexAsync()
{
    return View();
} 
```

我觉得这很好用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-01T18:39:18.680

不，这不是要求。

> 按照惯例，您将“Async”附加到具有 Async 或 async 修饰符的方法的名称中。
> 
> 您可以忽略事件、基类或接口协定建议不同名称的约定。例如，您不应重命名常见的事件处理程序，例如 Button1_Click。

来源：[MSDN：使用 Async 和 Await C# 进行异步编程 -> 命名约定](http://msdn.microsoft.com/en-us/library/hh191443(v=vs.110).aspx?cs-save-lang=1&cs-lang=csharp#)

# xml - 当子元素等于父元素时合并 XML 树

> ID：14652774
> 
> 赞同：-1
> 
> 时间：2013-02-01T18:29:28.180
> 
> 标签：xml, xslt

我使用 XSLT。

假设这个非常简单的 XML：

```
<ROOT>
  <ELEMENT>
    <ELEMENT>content of ELEMENT</ELEMENT>
  </ELEMENT>
</ROOT> 
```

当子节点的名称等于其父节点的名称时，如何在 XSLT 中合并 XML 层次结构？生成的 XML 应如下所示：

```
<ROOT>
   <ELEMENT>content of ELEMENT</ELEMENT>
</ROOT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:42:40.813

如果您首先复制 /ROOT/ELEMENT/ELEMENT 元素，然后删除 /ROOT/ELEMENT 您可以再次放回复制的 ELEMENT 元素...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:46:28.530

这个问题没有多大意义。尤其是当 XML 稍微复杂一点时，例如在 CM Sperberg-McQueen 和 JLRishe 的示例中，或者如果属性存在于父级或子级/子级上。

但是，如果我想这样做并且 XML 结构与您的示例一样简单，我会这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[name()=name(*)]">
        <xsl:apply-templates/>
    </xsl:template>

</xsl:stylesheet> 
```

如果父级中有属性并且您想向下传播这些属性，您可以这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[name()=name(*)]" priority="1">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="*[name()=name(../*)]">
        <xsl:copy>
            <xsl:copy-of select="../@*"/>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# sql-server - VB.Net 中是否有类似于 PHP mysql 命令的过程？

> ID：14652778
> 
> 赞同：0
> 
> 时间：2013-02-01T18:29:38.380
> 
> 标签：sql-server, vb.net, visual-studio-2010

我是一名主要处理 PHP 和 MySQL 的 Web 开发人员，现在几乎只能在 VB.Net 中进行编程。虽然我过去在 Visual Basic 方面有很多经验，但我几乎没有，因为它与 web.xml 有关。学习曲线就在那里，但并不可怕。

我非常熟悉使用 PHP 从 MySQL 数据库中检索信息，但现在必须在 VB.Net 中编写代码，并想知道是否有类似的过程不涉及在 Visual Studio 中拖放数据控制器?

我需要做的是有一个工作页面，在页面加载时检查数据库中的记录，如果在给定的时间段内存在一些记录，则将这些记录填充到多个输入字段中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:35:01.440

来自 Microsoft 的 SqlDataReader 示例：

根据您要填充的控件以及如何呈现数据，可能有更好的方法来为这些控件设置数据源，但是如果您想读取 MS SQL Server 数据库并自己处理，请执行像这样的东西：

```
Option Explicit On 
Option Strict On 

Imports System.Data
Imports System.Data.SqlClient

Module Module1

Sub Main()
    Dim str As String = "Data Source=(local);Initial Catalog=Northwind;" _
   & "Integrated Security=SSPI;"
    ReadOrderData(str)
End Sub 

Private Sub ReadOrderData(ByVal connectionString As String)
    Dim queryString As String = _
        "SELECT OrderID, CustomerID FROM dbo.Orders;" 

    Using connection As New SqlConnection(connectionString)
        Dim command As New SqlCommand(queryString, connection)
        connection.Open()

        Dim reader As SqlDataReader = command.ExecuteReader()

        ' Call Read before accessing data. 
        While reader.Read()
            ReadSingleRow(CType(reader, IDataRecord))
        End While 

        ' Call Close when done reading.
        reader.Close()
    End Using 
End Sub 

Private Sub ReadSingleRow(ByVal record As IDataRecord)
   Console.WriteLine(String.Format("{0}, {1}", record(0), record(1)))

End Sub 

End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:35:37.510

在 .net 中有很多方法可以访问数据库，但最基本的是使用某种类型的[dbcommand](http://msdn.microsoft.com/en-us/library/system.data.common.dbcommand.aspx)，大多数 .net 数据库都有连接器，它们利用了这种行为。在更灵活和 RAD 方法中，有许多 ORM 最常见的可能是[Entity](http://msdn.microsoft.com/en-us/data/ef.aspx)。

# windows - 用于 Microsoft Surface 的 Cocos2d-x 游戏开发

> ID：14652781
> 
> 赞同：1
> 
> 时间：2013-02-01T18:29:50.750
> 
> 标签：windows, cocos2d-iphone, windows-phone-8, cocos2d-x, windows-rt

我有一个小问题。

我可以使用 Cocos2d-x 为 Microsoft 的 Surface（Windows RT 和 Windows 8 Pro）平板电脑进行开发吗？

在这种情况下，我需要使用哪个版本的 Cocos2d-x？因为 Cocos 源码有很多分支。

而且，我可以对 Surface 和 Windows Phone 8 使用相同的代码吗？

提前致谢！

对不起我初学者的英语，我正在学习=）

**编辑：**

深入研究 Cocos2d-X 文档，我看到了 HTML5 分支。

使用该技术开发游戏并使用 WebView、UIWebView 和 Windows 的等价物将游戏移植到 iOS、Android 和 Windows 是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:08:45.997

是的，您可以使用 Cocos2d-X Windows 8 版本为 Windows 8 开发。有时在该功能中会将其与主版本合并，但目前您必须使用 Windows 8 分支。请不要说它使用旧的 Cocos2d-x API。

我已经使用 Cocos2d-x for Windows 8 成功发布了我的游戏“Noogra Nuts”，它运行良好。

# jquery - 更改背景图像位置时避免看到“滚动效果”的技术

> ID：14652792
> 
> 赞同：0
> 
> 时间：2013-02-01T18:30:10.840
> 
> 标签：jquery, css, background-image, sprite, css-sprites

我使用精灵作为背景图像来显示不同的按钮状态。当我改变位置时，我看到它滚动，因此看到它在到达适当的位置之前经历了几个“状态”。

任何有关如何避免这种情况的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:03:16.773

这是由继承树向上的过渡引起的。

过渡：所有 0.15s 缓入缓出 0s

# html - 1px DropShadow 底部较厚

> ID：14652798
> 
> 赞同：0
> 
> 时间：2013-02-01T18:30:53.413
> 
> 标签：html, css

我有一个圆角矩形，我正在尝试对其应用 1px 模糊、1px 垂直偏移投影。我的问题是底部的阴影看起来比侧面的要厚得多。有没有办法纠正这个问题，使底部阴影的宽度与侧面的宽度相同？我想过使用`outline`，但由于我的圆角，这行不通。另外，我不希望矩形顶部有边框。

`box-shadow: 0 1px 1px #000;`

[http://jsfiddle.net/Zw4QA/317/](http://jsfiddle.net/Zw4QA/317/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:54:10.163

尝试将您的盒子阴影设置为：

```
box-shadow: rgba(0,0,0,0.8) 1px 1px 1px, rgba(0,0,0,0.8) -1px 1px 1px, rgba(0,0,0,0.8) 0 1px 1px; 
```

您可以在需要时使用多个框阴影和负值将它们拉到左侧或顶部。

# winapi - 如何测量屏幕上绘制的文本行之间的空间？

> ID：14652801
> 
> 赞同：0
> 
> 时间：2013-02-01T18:31:08.857
> 
> 标签：winapi, fonts, draw, measure

我们有一个最终用户应用程序，允许您将多行文本写入文本框，它将这些信息保存到文本文件中。在下一次会话中，从文件中检索信息以显示文本。问题有时是在下一个会话中，文本框的边界正在剪切文本，因此用户必须手动调整文本框的大小。我想以编程方式确定文本框是否需要调整大小。

GetTextExtentPoint32() 似乎适用于根据设备上下文中选择的当前字体测量线条的实际绘制宽度。但是现在我正在解决在垂直方向调整文本框边界大小的需要。GetTextExtentPoint32() 确实给了我高度，这似乎是正确的，但我得到的总高度有点太小了。我相信我需要测量每条线之间的空间，但我不太确定？

更新：看起来我正在寻找 TEXTMETRIC.tmExternalLeading 和 TEXTMETRIC.tmInternalLeading。有趣的是对于某些字体和大小，计算是正确的，我可以完美地适应我的文本。但是对于某些字体和大小，计算有点太小了，那样的话，似乎前导太小或为0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:44:07.923

只要我记得你可以使用[GetTextMetrics](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144941%28v=vs.85%29.aspx)函数和 (Metrics.tmAscent + Metrics.tmDescent) 应该是你正在寻找的值

# javascript - 返回值作为 map reduce 上的键

> ID：14652804
> 
> 赞同：1
> 
> 时间：2013-02-01T18:31:19.870
> 
> 标签：javascript, mapreduce, couchdb

目前我对 couchdb 的看法总是返回如下内容：

```
{
  "key":"somekey",
  "value":"somevalue"
} 
```

我想知道是否有任何方法可以返回这样的东西：

```
{
  "somekey":"somevalue"
} 
```

我需要直接访问“somekey”，而不必在整个数组中搜索带有“somekey”值的键。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:02:00.007

使用视图时，CouchDB 没有提供直接的方法来将文档集合作为键/值返回，如您所见。

您需要将客户端的数据映射到键控索引，或者直接从视图中通过键请求文档：

```
/sample/_design/docs/_view/by_somekey?key="somekey" 
```

如果您正在寻找 JavaScript 中的快速映射选项（避免为每次迭代调用一个函数），您当然可以使用这个简单的逻辑：

```
// docs are the documents returned from the view
var map={};
for(var i=0,len=docs.length;i<len;i++) {
  map[docs[i].key] = docs[i].value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:50:42.267

您可以使用 underscoreJS ( [http://underscorejs.org/#reduce](http://underscorejs.org/#reduce) ) 做到这一点。

```
var map = {
  "key":"somekey",
  "value":"somevalue"
};

var result = _.reduce(map, function(key, value){
    var result = {};
    result[key] = value
    return result;
});

alert(result.somekey); 
```

[http://jsfiddle.net/BcYtw/1/](http://jsfiddle.net/BcYtw/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:30:57.417

如果您不喜欢 Couch 查询的格式或数据，您可以使用[list 功能](http://couchdb.readthedocs.org/en/latest/ddocs/#list-functions)随意重新格式化。像这样的东西应该适合你：

```
function(head, req){
  send('[');
  row = getRow();
  if (row){
    // here you make your own JS structure to be returned,
    // serialize it with toJSON() and send to client with send()

    // First row:
    var new_row = {};
    new_row[row.key] = row.value;
    send(toJSON(new_row));

    while(row = getRow()){
      // Next rows:
      send(',');
      var new_row = {};
      new_row[row.key] = row.value;
      send(toJSON(new_row));
    }
  }
  return ']';
} 
```

# git - NetBeans 不允许推送到远程 GIT 分支（无分支）

> ID：14652805
> 
> 赞同：3
> 
> 时间：2013-02-01T18:31:26.693
> 
> 标签：git, netbeans, version-control, git-push, git-commit

我是 GIT VCS 的新手，所以我有点迷路了。

我正在使用 NetBeans 7.2.1 并使用远程 GIT 存储库处理 PHP 项目。

我克隆了 GIT 存储库，在此过程中我检查了所有远程分支。

一切都很顺利。然后我切换到远程分支“BUG0025”进行了必要的代码更改。

**现在是提交和推送的时候了。**

1.  犯罪。
    我正在做`Git->Commit` 它说在“HEAD 和索引之间的更改”部分中没有要提交的文件。我使用的所有文件都位于“HEAD 和工作树之间的更改”部分。好的。按下提交。似乎一切都很顺利。

2.  推。
    我要去`GIT->Remote->Push`

和繁荣！开始了：![截屏](../Images/f4f93530de9261410742a1b2d061fac7.png)

如您所见，它没有显示我使用的分支，而是我看到了奇怪的“（无分支）”分支。

感觉就像即使我切换到正确的分支，也没有创建本地副本，我的提交也没有创建“（无分支）”分支。

如果有人可以帮助我，那就太棒了！谢谢！

# javascript - 如果再次选择相同的单选按钮，如何不触发动作？

> ID：14652811
> 
> 赞同：-2
> 
> 时间：2013-02-01T18:31:37.853
> 
> 标签：javascript

I have bunch of radio button and i trigger a action when the radio button is selected. 如果用户再次选择已选择的单选按钮，我不想触发该操作。

谢谢唵

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:33:11.923

你在使用`onclick`事件吗？改为使用`onchange`事件。

# api - EWS API 和 ColdFusion：如何引用返回值

> ID：14652813
> 
> 赞同：1
> 
> 时间：2013-02-01T18:31:51.127
> 
> 标签：api, coldfusion, exchangewebservices

我在处理复杂数组时遇到了困难，可以使用一些帮助。我正在使用 EWS API 将邮件功能与 Exchange 2010 和 CF 集成。下面的代码连接到主帐户授权的邮箱。我想在收件箱中返回邮件列表并使用 EWS 返回的值（主题行、正文、发件人、收件人等）。

我以前没有使用过像这样的复杂数组，所以我对如何引用返回的值感到困惑，特别是在 FindItemsResults 中返回的 getItems() 方法中。我查看了一个执行相同任务的 Java 示例，但我无法理解如何将其转换为 CF。CFDump 显示我正在获取信息，因此我确信连接按预期工作。我只需要获取数据，不知道该怎么做。

提前感谢您的帮助。

```
<cfobject type="Java" class="microsoft.exchange.webservices.data.ExchangeService" name="service">
<cfset service.init()>

<cfobject type="Java" class="microsoft.exchange.webservices.data.WebCredentials" name="credentials">
<cfset credentials.init("username","password", "domain")>
<cfset service.setCredentials(credentials) />

<cfset service.AutodiscoverUrl("email@domain.com")>

<cfobject type="java" class="microsoft.exchange.webservices.data.WellKnownFolderName" name="WellKnownFolderName">

<cfset ViewResults = service.findItems(CreateObject("java","microsoft.exchange.webservices.data.FolderId").init(WellKnownFolderName.Inbox, 
CreateObject("java","microsoft.exchange.webservices.data.Mailbox").init("othermail@domain.com","SMTP")),
CreateObject("java","microsoft.exchange.webservices.data.ItemView").init(3)) />

<cfdump var="#ViewResults#">

<cfdump var="#ViewResults.getItems()#"> 
```

![ViewResults.getItems() 转储结果](../Images/a76b836ccf17acf7dd1ec51390269b64.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:46:04.487

（来自评论......）

所以它看起来像`ViewResults.getItems()`返回一个对象数组`EmailMessage`。EmailMessage 有很多方法。一些返回简单值（布尔值、字符串、..），而另一些则`getFrom()`返回复杂对象。

尝试做一个数组循环，并在其中输出一个简单的属性，如：`getIsRead()`或`getReferences()`。IE

```
 <cfloop array="#itemsArray#" index="message"> 
     <cfdump var="#message.getIsRead()#" label="getIsRead()">
     <cfdump var="#message.getReferences()#" label="getReferences()">
 </cfloop> 
```

如果可行，请尝试调用`getFrom()`which 返回一个`EmailAddress`对象。检查 API，但看起来您可以使用以下任一方式访问地址值：

```
 #message.getFrom().getAddress()#  ... or 
    #message.getFrom().get_Address()# 
```

（你明白了……）

# ruby-on-rails - ActiveRecord 不缺少常量 Base！将 rails 3.2.9 jruby 1.7.2 部署到 weblogic 10.3 时出错

> ID：14652816
> 
> 赞同：6
> 
> 时间：2013-02-01T18:32:02.503
> 
> 标签：ruby-on-rails, jruby, rails-activerecord, meta-search

在将 Rails 3.2 项目部署到 Weblogic 10.3 时遇到此问题，并正在寻找一个简单的答案。

```
org.jruby.exceptions.RaiseException: (NameError) ActiveRecord is not missing constant Base!
at RUBY.load_missing_constant(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:494)
at RUBY.const_missing(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:192)
at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1613)
at RUBY.const_missing(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190)
at RUBY.(root)(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/meta_search-1.1.3/lib/meta_search.rb:55)
at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027)
at ActiveSupport::Dependencies::Loadable.require(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251)
at ActiveSupport::Dependencies::Loadable.load_dependency(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236)
at ActiveSupport::Dependencies::Loadable.require(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251)
at RUBY.(root)(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activeadmin-0.5.0/lib/active_admin.rb:1)
at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027)
at ActiveSupport::Dependencies::Loadable.require(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251)
at ActiveSupport::Dependencies::Loadable.load_dependency(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236)
at ActiveSupport::Dependencies::Loadable.require(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251)
at RUBY.(root)(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activeadmin-0.5.0/lib/active_admin.rb:1)
at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027)
at RUBY.(root)(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activeadmin-0.5.0/lib/activeadmin.rb:1)
at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1613)
at RUBY.(root)(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/activeadmin-0.5.0/lib/activeadmin.rb:1)
at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1613)
at RUBY.(root)(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/bundler-1.2.3/lib/bundler/runtime.rb:1)
at RUBY.require(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/bundler-1.2.3/lib/bundler/runtime.rb:68)
at RUBY.require(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/bundler-1.2.3/lib/bundler/runtime.rb:66)
at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027)
at RUBY.require(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/bundler-1.2.3/lib/bundler/runtime.rb:55)
at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027)
at RUBY.require(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/gems/gems/bundler-1.2.3/lib/bundler.rb:128)
at RUBY.(root)(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/config/application.rb:13)
at RUBY.(root)(<app_deploy_dir>/<app_name>/mfey8c/war/WEB-INF/config/environment.rb:1) 
```

环境如下所示：JRuby 1.7.2、JRockit 1.6、Rails 3.2.9、Warbler

我部署了基本 2 模型加上设计用户项目，当我在浏览器中浏览它时会发生此错误。有没有人见过这个？这是我第一次使用 JRuby。

编辑：

添加我最近失败的尝试。请注意，我已经为 1.6.8、1.7.0、1.7.2 尝试过 jruby、jruby-jars 并且没有成功。这是我的 Gem File 和 Warbler 配置：

```
#source 'https://rubygems.org'
source "http://bundler-api.herokuapp.com"

gem 'rails', '<3.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'savon'

#gem 'jruby-openssl'
gem 'json'
#gem 'ffi', '~>1.0.9'
#gem 'sqlite3'
gem 'rake', "=10.0.2"
gem 'activerecord-oracle_enhanced-adapter', "~> 1.4.0"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '<3.3'
  gem 'coffee-rails', '<3.3'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  #gem 'therubyrhino'
  #gem 'therubyracer'
  #gem 'libv8'

  gem 'uglifier', '>= 1.0.3'
end

platforms :jruby do
  group :assets do
    gem 'therubyrhino'
  end

  group :development, :test do
    gem 'ruby-debug'
    gem 'activerecord-jdbcsqlite3-adapter', "~> 1.2.5"
    gem 'warbler'
  end

  gem 'jruby-jars', "1.7.0"
  gem 'jruby-openssl', :require => false
end

platforms :ruby do
  group :assets do
    gem 'therubyracer'
    gem 'libv8'
  end

  group :development, :test do
    gem 'debugger'
    gem 'sqlite3'
  end

  gem 'ruby-oci8', '~> 2.1.0' # requires oracle client
end

gem 'jquery-rails'
gem 'devise'
gem 'activeadmin'
gem 'rb-readline'
gem 'validates_timeliness', '~> 3.0'
gem 'wash_out'#, :path => "~/Desktop/code/wash_out"

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn':path 

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'uby-debug'

group :development do

end

group :test do
  gem 'cucumber-rails', :require => false
  #gem 'cucumber', :require => false
  gem 'shoulda-matchers'
  gem 'json_spec'
  gem 'vcr'
  gem 'fakeweb'
  gem 'database_cleaner'
  gem 'launchy'
  gem 'webrat'
  gem 'json_spec'
  #gem 'capybara'
  #gem 'mocha'
end

group :development, :test do
  #gem 'activerecord-sqlite3-adapter', :platform => :ruby
  #gem 'activerecord-jdbc-sqlite3-adapter', :platform => :jruby
  gem 'rspec-rails'
  gem 'factory_girl_rails', "~> 4.0"
end 
```

和 Warbler Config（使用 Warble War）：

```
 class Warbler::Jar
  def replace_compiled_ruby_files(config, compiled_ruby_files)
    config.excludes += compiled_ruby_files
    compiled_ruby_files.each do |ruby_source|
      files[apply_pathmaps(config, ruby_source, :application)] = StringIO.new("load __FILE__.sub(/\.rb$/, '.class')")
    end
  end
end

Warbler::Config.new do |config|
  config.dirs = %w(app config lib log vendor tmp)
  config.webxml.jruby.compat.version = "1.9"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:54:55.643

这似乎是一个 jRuby 错误：http: [//jira.codehaus.org/browse/JRUBY-6705](http://jira.codehaus.org/browse/JRUBY-6705)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:41:25.083

我最近与一位同事进行了交谈，在将 Jenkins 部署到 Weblogic 时也遇到了类似的问题。如果您决定将 JRuby 部署到 Weblogic，那么您必须执行哪些操作的详细说明。就我而言，我搬到了 JBoss 并建议你也这样做。如果您必须部署到 weblogic，此链接描述了确保 Weblogic 预加载所有必要库的必要要求。

[https://wiki.jenkins-ci.org/display/JENKINS/Weblogic](https://wiki.jenkins-ci.org/display/JENKINS/Weblogic)

如果您唯一的选择是 weblogic，那么我强烈建议您在开发项目之前验证一个简单的配置测试，并假设它可以工作。

这是一个片段：

网络逻辑 12+。将此添加到项目中名为：weblogic.xml 的文件中

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:wls="http://www.bea.com/ns/weblogic/90" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd http://www.bea.com/ns/weblogic/90 http://www.bea.com/ns/weblogic/90/weblogic-web-app.xsd">
    <wls:weblogic-version>12.1.1</wls:weblogic-version>
    <wls:context-root>jenkins</wls:context-root>
    <wls:container-descriptor>
         <wls:prefer-web-inf-classes>true</wls:prefer-web-inf-classes>
    </wls:container-descriptor>
</wls:weblogic-web-app> 
```

在以前的版本中，有一些更重要的 hackage 可以让 weblogic 正确破译你的 jars 和依赖项。专门针对这个问题，因为我在 10.3.X 上运行低于 0.4，所以这里是步骤。

较旧的 Weblogic 服务器

为了纠正 Weblogic 的类加载器问题，我们需要构建一个 EAR 文件并将 weblogic-application.xml 指令放入其中。1.创建一个目录来记录耳朵的内容，结构如下（使用你的war而不是Jenkins）：ROOT_Folder/

```
 META-INF/
        application.xml
        weblogic-application.xml
    jenkins.war 
```

1.  将 jenkins.war 放入 ROOT_Folder

2.  创建 META-INF 目录

3.  在该 META_INF 目录 (weblogic-application.xml) 中创建以下 XML 文件：

    http://java.sun.com/xml/ns/javaee/javaee_5.xsd [http://www.bea.com/ns/weblogic/weblogic-application](http://www.bea.com/ns/weblogic/weblogic-application) [http://www.bea.com/ns/weblogic/ weblogic-application/1.0/weblogic-application.xsd](http://www.bea.com/ns/weblogic/weblogic-application/1.0/weblogic-application.xsd) ">

    webapp.encoding.default UTF-8

    org.apache。 *javax.xml.流。*

Weblogic 需要这个，因为（与 JBoss、Tomcat、Jetty 等不同）Weblogic 不会在 Weblogic 安装 JAR 之前加载 WAR 中的 JAR，通常导致的错误是范围内有旧版本的 Ant 1.7，而不是Jenkins 想要的 Ant 1.8.x。列出的 javax.xml 包也与 stax-api-1.0.1.jar 存在冲突。

这是一个可以工作的简单 application.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<application xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd"
version="5">

<module id="jenkins">
<web>
<web-uri>jenkins.war</web-uri>
<context-root>/jenkins</context-root>
</web>
</module>
</application> 
```

重新压缩文件，制作新的 EAR 文件 安装，然后部署

*注意：*如果您必须对此进行测试，请在此处评论这是否有效。在我得到验证之前，我不会接受答案；因为我已经搬到 JBoss 进行干净部署。

# apache-poi - 使用 XSLF（Apache POI 项目）向 Powerpoint 幻灯片添加形状

> ID：14652821
> 
> 赞同：3
> 
> 时间：2013-02-01T18:32:35.730
> 
> 标签：apache-poi, powerpoint

apache POI 项目解释了如何从 powerpoint 幻灯片中读取形状[http://poi.apache.org/slideshow/xslf-cookbook.html#GetShapes](http://poi.apache.org/slideshow/xslf-cookbook.html#GetShapes)

但是，我找不到任何关于如何使用库的这一部分将形状添加到 powerpoint 幻灯片的文档。如果我使用旧的 powerpoint 格式（ppt 而不是 pptx），我可以只使用 libaray 的 hslf 部分并执行以下操作：

```
SlideShow ppt = new SlideShow();
//add first slide
Slide s1 = ppt.createSlide();

// create shapes./ 
java.awt.geom.GeneralPath path = new java.awt.geom.GeneralPath();
path.moveTo(100, 100);
path.lineTo(200, 100);
path.curveTo(50, 45, 134, 22, 78, 133);
path.curveTo(10, 45, 134, 56, 78, 100);
path.lineTo(100, 200);
path.closePath();

Freeform shape = new Freeform();
shape.setPath(path);
s1.addShape(shape);

//save changes in a file
FileOutputStream out;
try {
    out = new FileOutputStream("slideshow.ppt");
    ppt.write(out);
    out.close(); 
} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException ex) {
    e.printStakTrace();
} 
```

我将如何使用库的 xlsf 部分做类似的事情，从而生成一个 pptx？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T09:32:55.780

其实挺像的。。。

```
XMLSlideShow ppt = new XMLSlideShow();
XSLFSlide s1 = ppt.createSlide();

// create shapes 
java.awt.geom.Path2D.Double path = new java.awt.geom.Path2D.Double();
path.moveTo(100, 100);
path.lineTo(200, 100);
path.curveTo(50, 45, 134, 22, 78, 133);
path.curveTo(10, 45, 134, 56, 78, 100);
path.lineTo(100, 200);
path.closePath();

XSLFFreeformShape shape = s1.createFreeform();
shape.setPath(path);
shape.setLineWidth(1);
shape.setLineColor(Color.BLACK);

//save changes in a file
FileOutputStream out;
try {
    out = new FileOutputStream("slideshow.pptx");
    ppt.write(out);
    out.close(); 
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

有关您可以在其上绘制的更多示例和[Graphics2D](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html)上下文，请查看我的[PptxGraphics2D](https://github.com/kiwiwings/pptx-shape-exporter/blob/master/Pptx-Shape-Exporter/src/main/java/de/kiwiwings/jasperreports/exporter/PptxGraphics2D.java)类。

# arrays - Java将对象从另一个类添加到数组

> ID：14652823
> 
> 赞同：2
> 
> 时间：2013-02-01T18:32:46.750
> 
> 标签：arrays

我正在尝试将一个对象添加到位于其他类中的 ArrayList 中。我有 ArrayList 的 setter 和 getter，但我无法添加。提前致谢。

```
public class Reservation {

    **Client client;**

Reservation(){
Client a = new Client (id ,name,surname,tel,email);
        **//need to add it here**
}

public class Client {

    int clientID;
    String firstName;
    String lastName;
    **public List<Client> clientList = new ArrayList<Client>();** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:49:37.917

a.clientList.add（新客户端（））？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:50:01.767

如果我了解您的问题，则预订是针对一位客户，而该客户有另一位来宾客户。在这种情况下，也许最好的方法是你的`Reservation`类是这样的：

```
class Reservation{
    Client reserver;
    List<Client> guests;
} 
```

或者

```
class Reservation{
    int reserverClientId;
    List<Client> clients;
} 
```

您可以在构造函数中执行以下操作：

```
public Reservation(List<Client> clients){
    this.clients = clients;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:50:57.097

怎么申报

```
public List<Client> clientList = new ArrayList<Client>(); 
```

在您的 Client 类中。这应该在`Reservation`类中声明。您的`Client`对象不能包含客户列表。

# python - 使用正则表达式比较两个文档

> ID：14652826
> 
> 赞同：7
> 
> 时间：2013-02-01T18:33:07.163
> 
> 标签：python, regex, algorithm

我想比较两个文档而不考虑换行符。如果内容相同但换行符的位置和数量不同，我想将一个文档中的行映射到另一个文档中的行。

鉴于：

文件 1

```
I went to Paris in July 15, where I met some nice people.
And I came back
to NY in Aug 15.
I am planning
to go there soon
after I finish what I do. 
```

文件 2

```
I went
to Paris
in July 15,
where I met
some nice people.
And I came back to NY in Aug 15.
I am planning to go
there soon after I finish what I do. 
```

我想要一种算法，能够确定文档 1 中的第 1 行包含与文档 2 中的第 1 到第 5 行相同的文本，文档 1 中的第 2 行和第 3 行包含与文档 2 中的第 6 行相同的文本，等等。

```
1 = 1,2,3,4,5
2,3 = 6
4,5,6 = 7,8 
```

如果正则表达式跨越其他文档中的多行，是否有办法匹配每个文档中的每一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:44:03.813

```
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import org.apache.commons.io.FileUtils;

public class Compare {
    public static void main(String[] args) throws IOException {
        String doc1 = FileUtils.readFileToString(new File("Doc1.txt"));
        String doc2 = FileUtils.readFileToString(new File("Doc2.txt"));
        String[] array1 = doc1.split("\n");
        String[] array2 = doc2.split("\n");
        int[] count1 = new int[array1.length];
        int[] count2 = new int[array2.length];
        int sum1 = 0;
        int sum2 = 0;
        for (int i=0;i<count1.length;i++) {
            count1[i] = sum1 + array1[i].split(" ").length;
            sum1 = count1[i];
        }
        for (int i=0;i<count2.length;i++) {
            count2[i] = sum2 + array2[i].split(" ").length;
            sum2 = count2[i];
        }
        ArrayList<Integer> result1 = new ArrayList<Integer>();
        ArrayList<Integer> result2 = new ArrayList<Integer>();
        for (int j=0; j<count1.length; ) {
            for (int k=0; k<count2.length; ) {
                if (count1[j]==count2[k]) {
                    result1.add(j+1);
                    result2.add(k+1);
                    System.out.println(result1.toString()+" = "+result2.toString());
                    result1 = new ArrayList<Integer>();
                    result2 = new ArrayList<Integer>();
                    j++;k++;
                } else if (count1[j]>count2[k]) {
                    result2.add(k+1);
                    k++;
                } else {
                    result1.add(j+1);
                    j++;
                }
            }
        }
    }
} 
```

样本输出：

```
[1] = [1, 2, 3, 4, 5]
[2, 3] = [6]
[4, 5, 6] = [7, 8] 
```

完整且有效的 Java 代码。它不是正则表达式解决方案，因此可能不适合您的需要。

这个想法是我们为每个文档创建一个数组。数组的大小等于每个文档中的行数。数组的第 n 个元素存储在文档第 n 行之前看到的单词数。然后我们在两个数组中识别那些相等的元素，它们的索引定义了输出的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:23:32.560

我不是 python 程序员，但这看起来不像是可以用正则表达式解决的问题。

相反，您首先要比较文档以确保内容相同（事先暂时删除所有换行符）。如果不是，我不知道你想要做什么，所以我不打算解决这个问题。

创建一个整数集合的集合，称为`linemappings`

开始一个循环。循环将同时遍历每个文档中的每个字符。您将需要四个计数器变量。`charindex1`将包含文档 1 中的当前字符索引，`charindex2`并将包含文档 2中的当前字符索引。`lineindex1`将包含文档 1 中的当前行索引，`lineindex2`并将包含文档 2 中的当前行索引。

从 char 索引变量开始为 0，行索引变量初始化为 1。

> 开始循环：
> 
> > 从每个文档中获取当前字符：`char1`来自文档 1 和`char2`来自文档 2。
> > 
> > 如果`char1`AND`char2`是 BOTH 换行符或 NEITHER 都不是换行符，则两者都前进`charindex1`1。`charindex2`否则
> > 如果`char1`是换行符，则前进`charindex1`1。
> > 否则如果`char2`是换行符，则前进`charindex2`1。
> > 
> > 如果 EITHER`char1`或是`char2`换行符，则在集合中插入一条新记录`linemappings`（最后的结果将类似于`[[1,1],[1,2],[1,3],[1,4],[1,5],[2,6],[3,6],[4,7],[5,7],[6,7],[6,8]`）
> > 
> > 如果`char1`是换行符，前进`lineindex1`1。
> > 如果`char2`是换行符，前进`lineindex2`1。
> 
> 循环直到输入结束。

（因为我不是 python 程序员，所以我无法真正测试这个，但希望你能理解要点并修改它以满足你的需要。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:59:43.117

您可以遍历 doc1 的每一行并执行以下操作：

`searchstring = line.replace(' ', '[ |\n]')`

然后使用此搜索字符串在 doc2 上进行搜索。

`match = re.search(searchstring, contents)`

如果`match`是`NULL`，则不匹配。否则，`match.group(0)`将为您提供 doc 2 的匹配内容。

`'I went\nto Paris\nin July 15,\nwhere I met\nsome nice people.'`

然后这是一个简单的练习，通过 '\n' 将其拆分并找出它们来自 doc2 中的哪些行。

# tidesdk - 如何使 TideSDK 窗口无法关闭？

> ID：14652830
> 
> 赞同：1
> 
> 时间：2013-02-01T18:33:17.727
> 
> 标签：tidesdk

我正在尝试制作一个无法关闭并最小化到系统托盘的 TideSDK 应用程序。

我已经弄清楚了系统托盘部分的大部分内容，但是当我在 tiapp.xml 中指定“可关闭”时，它什么也没做。即我仍然看到“关闭”按钮，它完全关闭了应用程序。

```
<window>
    <id>someApp</id>
    <title>Alerts</title>
    <url>app://index.html</url>
    <width>800</width>
    <max-width>800</max-width>
    <min-width>800</min-width>
    <height>600</height>
    <max-height>600</max-height>
    <min-height>600</min-height>
    <fullscreen>false</fullscreen>
    <resizable>false</resizable>
    <chrome scrollbars="false">true</chrome>
    <maximizable>false</maximizable>
    <minimizable>true</minimizable>
    <closeable>false</closeable>
</window> 
```

如何让它无法关闭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T10:19:28.117

看看这个解决方案 - [https://gist.github.com/4639473](https://gist.github.com/4639473)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:43:23.360

我了解到，管理“最小化/关闭到系统托盘”的应用程序的最灵活方法是使用隐藏的主窗口来启动辅助窗口。

辅助窗口似乎更灵活，而且您可以从主隐藏窗口管理它们。

这就是我在主窗口代码中留下的全部内容：

```
<head>
    <script src="app://js/jquery.min.js"></script>

    <script>
        $(function(){
            Ti.UI.currentWindow.hide();

            var alert_window = Ti.UI.createWindow({
                id: "alertWindow",
                url: "app://alert.html",
                title: "My New Window",
                baseURL: "app://alert.html",
                x: 100,
                y: 100,
                width: 500,
                minWidth: 500,
                maxWidth: 500,
                height: 500,
                minHeight: 500,
                maxHeight: 500,
                maximizable: true,
                minimizable: true,
                center: true,
                closeable: false,
                resizable: false,
                fullscreen: false,
                maximized: false,
                minimized: false,
                usingChrome: false,
                topMost: true,
                visible: true,
                transparentBackground: false,
                transparency: false
            });

            alert_window.open();
            alert_window.setTopMost( true );
        });
    </script>
</head>

<body>
</body> 
```

# reporting-services - 根据表情改变颜色

> ID：14652832
> 
> 赞同：2
> 
> 时间：2013-02-01T18:33:20.050
> 
> 标签：reporting-services, colors, switch-statement, iif

我有百分比计算字段，它必须根据值具有不同的颜色：

*   其中 <70% 为红色
*   70% 到 79.9% 是黄色
*   80%+ 为绿色

我试过：

```
=Switch((Sum(Fields!TotalQtySUM.Value, "DataSet1")/Sum(Fields!REG_HOURS.Value, "DataSet1")) < 0.7, "Red" ,
    (Sum(Fields!TotalQtySUM.Value, "DataSet1")/Sum(Fields!REG_HOURS.Value, "DataSet1")) < 0.8, "Black",
    (Sum(Fields!TotalQtySUM.Value, "DataSet1")/Sum(Fields!REG_HOURS.Value, "DataSet1")) >= 1, "Green") 
```

和：

```
=IIF((Sum(Fields!TotalQtySUM.Value, "DataSet1")/Sum(Fields!REG_HOURS.Value, "DataSet1")) < 0.7, "Red" ,"Green") 
```

他们要么全红，要么随意改变颜色，不遵守任何规则我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:52:31.490

我认为您的第一个运算符覆盖了您的另一个运算符：“< 0.7”对于“< 0.8”之前的颜色是正确的。尝试颠倒前两个标准，这可能会解决您的问题。我遇到了类似的事情，我相信这就是我修复它的方法。你也不需要 Sum(Fields!(Field).Value, "(Dataset)")，你可以这样做："Sum(Fields!(Field).Value)"。

您给出的第二个标准虽然我会测试您自己获得的价值。看来第二组可能是有效的，但表达式可能不是您所期望的。此外，我只会在我的数据集中添加一个“计算”字段，而不是在表达式中进行。这可能比最终的表达式评估更快。您在 SSRS 中使用的表达式越多，报告的速度就越慢。我知道当表达式不适用于设置属性时，我通常会逐个检查各个部分。

# asp.net-mvc-4 - 保护 ASP.NET MVC 操作参数

> ID：14652834
> 
> 赞同：1
> 
> 时间：2013-02-01T18:33:22.987
> 
> 标签：asp.net-mvc-4, asp.net-web-api, security, .net-4.5

(ASP.NET MVC 4.5) 假设您有一个银行或公司模型，其 ID 是敏感信息，例如帐号或其他一些个人识别信息。在不将此信息放在 URL 中的情况下，路由编辑/显示操作的最佳方式是什么，或者至少是一些策略是什么。

显然这会很糟糕：

`https://goliath-natinal.com/Accounts/Edit/954321`

如果 954321 是您的银行帐号。

我想这样做的一种方法是为每个充当代理键的帐户添加一个 GUID。但是我很想知道如果您根本无法更改数据库，是否有可能做某事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:48:23.997

只是在这里抛出一些想法......

您可以使用 Rijndael 或其他类型的加密来加密您的标识符。您可以根据与帐户相关的其他识别字段对其进行加盐和哈希处理。您可以即时执行此操作。不过，您会受到处理的影响。

如果您使用的是 memcache 或 azure 缓存，您可以创建一个帐户到 guid 的映射，然后将其放在缓存中。如果允许，您可以在数据库中创建一个单独的映射表，将帐户映射到新的 guid。

您能否提供有关完整限制的更多信息？IE 表是限制更改还是整个数据库？你能创建一个新的数据库吗？

# android - Android：内存不足错误

> ID：14652836
> 
> 赞同：4
> 
> 时间：2013-02-01T18:33:24.540
> 
> 标签：android, memory, bitmap, heap-memory

当我最小化我的 Android 应用程序大约 4 或 5 次时，我总是收到以下错误：

```
02-01 19:24:11.980: E/dalvikvm-heap(22362): Out of memory on a 3686416-byte allocation.
02-01 19:24:12.000: E/dalvikvm(22362): Out of memory: Heap Size=62755KB, Allocated=55237KB, Limit=65536KB
02-01 19:24:12.000: E/dalvikvm(22362): Extra info: Footprint=62435KB, Allowed Footprint=62755KB, Trimmed=2144KB
02-01 19:24:12.000: E/Bitmap_JNI(22362): Create Bitmap Failed.    
02-01 19:24:12.000: E/Bitmap_JNI(22362): Failed to create SkBitmap!
02-01 19:24:12.000: E/AndroidRuntime(22362): FATAL EXCEPTION: main
02-01 19:24:12.000: E/AndroidRuntime(22362): java.lang.OutOfMemoryError: (Heap Size=62755KB, Allocated=55237KB)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at android.graphics.Bitmap.nativeCreateScaledBitmap(Native Method)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:744)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at de.vauge.mb.Utils.getResizedBitmap(Utils.java:56)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at de.vauge.mb.MenuView.initialize(MenuView.java:74)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at de.vauge.mb.MenuView$1.handleMessage(MenuView.java:137)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at android.os.Looper.loop(Looper.java:156)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at android.app.ActivityThread.main(ActivityThread.java:5045)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at java.lang.reflect.Method.invokeNative(Native Method)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at java.lang.reflect.Method.invoke(Method.java:511)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at dalvik.system.NativeStart.main(Native Method) 
```

我的应用程序仅包含一个 Activity，其中包含 7 个不同的自行编写的视图（所有视图都包含一些位图），并且在不需要它们时它们会被切换为不可见（可能不是很好的风格，但它对我有用直到现在...）。这些视图中的每一个都有一个 destroy() 函数，用于回收其中使用的所有位图，并且 MainActivity 的 onDestroy() 调用所有这些 destroy() 函数。此外，我没有使用任何静态位图。

那么，除了回收所有位图而不使用静态位图之外，我还有什么可以尝试的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T19:56:43.043

出色地。Android 上的位图可能有点棘手。您能否提供有关位图来源及其大小的更好信息？

否则，我建议调查这些事情：

1.  如果您正在加载远程图像，请查看[fresco](https://github.com/facebook/fresco)。你也可以看看[毕加索](http://square.github.io/picasso/)。我个人曾经喜欢[ImageLoader](https://github.com/nostra13/Android-Universal-Image-Loader)，但它不再被维护了。

2.  如果您使用曾经是推荐选项的 inPurgable 标志，请尝试找到解决方法，因为它实际上会导致为每个图像分配更多内存。

3.  如果您经常解码小型本地资产，请考虑将您的可绘制对象保存在哈希图中并在需要时重新使用它们。更少的GC。

4.  如果您想对您的应用程序进行子类化，您可以使用[OnLowMemory](http://developer.android.com/reference/android/app/Application.html#onLowMemory%28%29)调用来了解您何时可能*真正*需要清理（主要用于调试，而不是现实生活中的情况）......如果这还不算太晚...... :)

5.  看看 Chris Banes 的博客。[这](http://www.senab.co.uk/2013/01/24/android-bitmapcache-v2-1/)是一个非常有趣的内存缓存解决方案

6.  实现一个你在需要和可能的时候调用的内存修剪器。

7.  另一个不足为奇的优化是尽可能使用更小的对象……想想你的最小数据模型和图像大小，并尝试为它们提供符合要求的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T14:31:04.297

对于 Ben Max 评论中的#3，我做了两个有用的类：

```
public abstract class SoftReferenceStorage<K, V>{
private static HashMap<Object, SoftReference<Object>> objectsHash = new HashMap<Object, SoftReference<Object>>();

@SuppressWarnings("unchecked")
public V get(K key) {
    if (objectsHash.containsKey(key)) {
        SoftReference<Object> ref = objectsHash.get(key);
        if (ref.get() == null) {
            objectsHash.put(key, new SoftReference<Object>(createValueForKey(key)));
            return (V)objectsHash.get(key).get();
        } else {
            return (V)ref.get();
        }
    } else {
        objectsHash.put(key, new SoftReference<Object>(createValueForKey(key)));
        return (V)objectsHash.get(key).get();
    }
}

protected abstract V createValueForKey(K key);
} 
```

和

```
public class FrequentlyUsedBitmapResources extends SoftReferenceStorage<Integer, Bitmap>{
private static FrequentlyUsedBitmapResources instance = null;

private Resources resources;

public FrequentlyUsedBitmapResources(Resources resources) {
    super();
    this.resources = resources;
}

public static FrequentlyUsedBitmapResources getInstance() {
    if (instance == null) {
        instance = new FrequentlyUsedBitmapResources(HiDriveApp.getContext().getResources());
    }
    return instance;
}

@Override
protected Bitmap createValueForKey(Integer resId) {
    return BitmapFactory.decodeResource(resources, resId);
}
} 
```

可以像这样使用：

```
Bitmap b = FrequentlyUsedBitmapResources.getInstance().get(R.drawable.overview_photo_placeholder); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:37:47.237

确保您将它们加载到`onCreate()`而不是在`onStart()`or中`onResume()`。听起来每次您恢复时都会重新加载它们，但它们并没有被销毁，因为`onDestroy()`在您最小化应用程序时不会调用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:38:19.273

如果图像在本地设备上（即与您的代码合并或来自用户图像库），那么我可能会选择不让它们简单地隐藏或不显示，而是直接从磁盘中将它们带入。事实证明，所有这些设备本质上都是基于闪存的，与主轴磁盘相比，速度非常快。最有可能的是，用户将无法感受到磁盘 IO 对图像的性能影响。

通过这种方式，您也可以在任何时候限制您在内存中保存的图像数量。

我同意你也应该看看蒂姆的评估。

# jquery - TinyMCE - jQuery 插件，全局设置默认主题/选项

> ID：14652838
> 
> 赞同：1
> 
> 时间：2013-02-01T18:33:27.387
> 
> 标签：jquery, tinymce, customization

我正在使用我`TinyMCE`所有需要 WYSISYG 的页面。坦率地说，我有很多。

我实际上使用相同的代码来为每个页面实例化 tinymce() jquery 插件，我想知道是否有办法在每个页面已经引用的某个地方设置我的首选选项一次，所以我不必在每个页面中保留相同的大容量代码。

到目前为止，这是我对每个页面所做的：

```
<script language="javascript" type="text/javascript">
$(document).ready(function(){

$("textarea#comments").tinymce({
    script_url : '/tiny_mce/tiny_mce.js', // Location of TinyMCE script 
    // General options 
    theme : "advanced", 
    plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist", 
    force_p_newlines : false, 
    force_br_newlines : true, 
    /*forced_root_block : '',*/ 
    // Theme options 
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,hr,|,justifyleft,justifycenter,justifyright,justifyfull,|,formatselect,fontselect,fontsizeselect|styleprops,forecolor,backcolor,|,link,unlink,image,|,bullist,numlist,removeformat,code,|,preview", 
    theme_advanced_buttons2 : "", 
    theme_advanced_buttons3 : "", 
    theme_advanced_buttons4 : "", 
    theme_advanced_toolbar_location : "top", 
    theme_advanced_toolbar_align : "left", 
    theme_advanced_statusbar_location : "bottom", 
    theme_advanced_resizing : true, 
    theme_advanced_resize_horizontal: false 
});

});
</script> 
```

我想简单地看到这个：

```
$("textarea#comments").tinymce(); 
```

据我了解，`tinymce`有 2 个主题：高级和简单。高级有太多选择，而简单却没有足够的选择。所以现在我必须挑选我的选项，但在每一页上重新列出上面的代码似乎很疯狂。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:02:30.790

初始化代码必须放在所有需要 tinyMCE 的页面的 HEAD 元素中。

在官方文档中，我们可以看到：

> 作为替代方案，可以将 tinyMCE.init 语句放在它自己的文件中并在脚本标签中引用：

```
<html>
<head>
<script language="javascript" type="text/javascript" src="../jscripts/tiny_mce/tiny_mce.js"></script>
<script language="javascript" type="text/javascript" src="../jscripts/tiny_mce/basic_config.js"></script>
</head> 
```

来源：[http ://www.tinymce.com/wiki.php/Configuration](http://www.tinymce.com/wiki.php/Configuration)

因此，您可以拥有一个配置文件，并在页面头部调用它，只需一行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:50:23.400

除了 Sébastien Gicquels 的回答之外，您可能还有一个默认的 tinymce init 对象，您可以使用脚本文件加载该对象

```
var init_base_object = {
    theme: 'advanced',
    language : 'en',
    ...
};

var tinymce_additional = {

    language : 'en',

    width: "800",
    height: "600",

        theme_advanced_buttons1 : "bold,italic,underline",
        theme_advanced_buttons2 : ""
};

$(document).ready(function(){
    init_obj = {element_id:'xyz', window: window};
    $.extend(true, tinymce_additional, init_base_object);
    $.extend(true, init_obj , tinymce_additional);
    tinyMCE.execCommand('mceAddFrameControl',false, init_obj);
}); 
```

# database - Onetomany 与父数据库设计

> ID：14652844
> 
> 赞同：3
> 
> 时间：2013-02-01T18:33:50.863
> 
> 标签：database, entity-relationship, one-to-many

下面是一个代表我的问题的数据库设计（它不是我的实际数据库设计）。对于每个城市，我需要知道有哪些餐厅、酒吧和酒店可用。我认为这两种设计不言自明，但是：

第一个设计：在城市与餐厅、酒吧和酒店之间建立一对多的关系。

第二种设计：只在城市和地点之间建立一对多的关系。

哪种设计是最佳实践？第二种设计的关系较少，但我能否获得一个城市的所有餐馆、酒吧和酒店以及自己的数据（property_x/y/z）？

**更新：这个问题出了问题，也许是我不清楚的错。**

*   餐厅/酒吧/酒店类是“地方”的子类（在两种设计中）。
*   餐厅/酒吧/酒店类**必须**有父“地方”
*   餐厅/酒吧/酒店类有自己的特定数据（property_X/Y/X）

![数据库设计](../Images/fb49540a5937e54f3bddbceecdf6769a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T09:48:39.837

**好设计为先**

您的数据以及 SQL 和 ERD 的**可读性/可理解**性是需要考虑的最重要因素。为便于阅读：

*   放入. `city_id`_ `place`原因：地点在城市中。旅馆不是因为是旅馆而*恰好*在城市中的地方。

其他需要考虑的设计点是这种结构将来如何扩展。让我们比较添加一个新的子类型：

*   在设计一中，您需要添加一个新表、与“地点”的关系以及与`city`
*   在设计二中，您只需添加一个新表和关系到“地点”。

我会再次选择第二种设计。

**性能第二**

现在，我猜，但放入`city_id`子类型的原因可能是您预计它在某些特定用例中更有效或更快，这可能是忽略可读性/可理解性的一个很好的理由。但是，在您*测量*要部署的实际硬件的性能之前，您不知道：

*   哪种设计更快
*   性能差异是否真的会降低整个系统的性能
*   其他优化方法（调整 SQL 或数据库参数）实际上是否是更好的处理方法。

我认为设计一个是尝试在 ERD 上对数据库进行物理建模，这是一种不好的做法。

*过早*的优化是软件工程中许多罪恶的根源。

**亚型方法**

在 ERD 上实现子类型有两种解决方案：

1.  一个公共属性表，每个子类型一个表，（这是您的第二个模型）
2.  包含子类型属性的附加列的单个表。

在单表方法中，您将拥有：

*   一个子类型列，`TYPE INT NOT NULL`. 这指定该行是餐厅、酒吧还是酒店
*   额外的列`property_X`，`property_Y`等等`property_Z`。`place`

这是利弊的快速表：

单表方法的缺点：

*   在单表方法中，扩展列（X、Y、Z）不能为 NOT NULL。您可以实现行级约束，但是您失去了简单 NOT NULL 的简单性和可见性
*   单个表非常宽且稀疏，尤其是在您添加其他子类型时。你可能会达到最大值。某些数据库上的列数。这会使这种设计非常浪费。
*   要查询特定子类型的列表，您必须使用`WHERE TYPE = ?`子句进行过滤，而每个子类型的表是更自然的“FROM HOTEL INNER JOIN PLACE ON HOTEL.PLACE_ID = PLACE.ID”
*   恕我直言，映射到面向对象语言中的类更加困难且不那么明显。考虑避免这个 DB 是否将被 Hibernate、Entity Beans 或类似的映射

单表方法的优点：

*   通过合并到单个表中，没有连接，因此查询和 CRUD 操作更有效（但是这种微小的差异会导致问题吗？）
*   不同类型的查询是*参数化*的（`WHERE TYPE = ?`），因此在代码中而不是在 SQL 本身（`FROM PLACE INNER JOIN HOTEL ON PLACE.ID = HOTEL.PLACE_ID`）中更易于控制。

*没有最佳设计*，您必须根据您最常执行的 SQL 和 CRUD 操作的类型以及可能的性能进行选择（但请参阅上面的一般警告）。

**建议**

在所有条件相同的情况下，我建议默认选项是您的第二个设计。但是，如果您有我上面列出的那些最重要的问题，请选择其他实现。但不要过早优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:42:21.387

他们两个，一个都没有。

如果我需要选择一个，我会保留第二个，因为之后需要创建的外键和索引的数量。
但是，更好的方法是：创建一个包含各种场所（酒吧、餐馆等）的表，并为每一行分配一个具有该场所类型值的列（应用具有预期类型的*​​ COMPRESS*子句在列）。它将提高结构的性能和可读性，并且更易于维护。

希望这可以帮助。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:58:32.627

您不会在任何子表中显示备用列。我认为您不应该将类型数据拆分为“酒吧”、“餐厅”等表名 - 这些应该是位置表内的类型。

我认为你应该有一个地址表 - 其中一列是城市。然后每个地方都有一个地址，您可以在需要时轻松按城市分组。（或州或邮政编码或国家等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T19:02:19.083

我认为最好的选择是第二种。在第一个设计中，可能会出现数据错误，因为一个地方可以分配给一个城市（例如 A）中的特定餐厅（或任何其他类型），同时可以分配给不同城市的另一家餐厅（例如 B）。在第二种设计中，一个地方总是绑定到一个特定的城市。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T03:40:32.243

**第一：**
两种设计都可以为您提供所有适当的数据。

**第二：**
如果所有扩展类都将实现该位置（这对您的实现来说听起来很明显），那么将它作为父对象的一部分包含在内是一个更好的做法。这将建议选项

**2。Thingy：**
事情是即使很难找到每个特定 PLACE 的类型，更容易知道类型（孩子）总是一个地方（父母）。您可以在可视化选项 2 的结果集时想到这一点。考虑到这一点，我推荐第一种方法。

**注意：**
第一个没有更多的关系，它只是拆分它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T15:45:53.223

如果 bar、restaurant 和 hotel 具有不同的属性集，那么它们是不同的实体，应该由 3 个不同的表表示。但是为什么你需要地方表呢？我的建议是放弃它并为您的 3 个实体提供 3 个表，仅此而已。

在代码中，将公共属性收集到父类中比在每个子类中重复它们更有条理和效率 - 当然。但正如 spathirana 上面评论的那样，数据库设计不像 OOP。当然，您可以通过将地点的共同属性粘贴到“地点”表中来节省列名的重复。但它也会增加复杂性： - 每当您想引用酒吧、餐厅或酒店时，您必须加入该表 - 每当您想添加新的酒吧、餐厅或酒店时，您必须插入两张表 - 您必须当...等时更新两个表

有 3 个没有 place 表的表也可能是性能最优化的设计。但这不是我的来历。我正在考虑干净、简单的数据库设计，其中单个实体意味着单个表中的单个行。关系数据库中没有“is-a”关系。外键关系是“has-a”。好的，我敢肯定有例外，但你的情况也不例外。

# c# - 我的 FileStream 创建的文件保存在哪里？

> ID：14652849
> 
> 赞同：1
> 
> 时间：2013-02-01T18:34:25.003
> 
> 标签：c#, filestream

我正在关注本教程，但我的 pdf 文件没有保存到哪里？谢谢您的帮助！

```
using System; 
using com.lowagie.text;
using com.lowagie.text.pdf;
using System.IO;

public class Chap0101 
{

public static void Main(string[] args) 
{
    Console.WriteLine("Chapter 1 example 1: Hello World");

    // step 1: creation of a document-object
    Document document = new Document();

    // step 2:
    // we create a writer that listens to the document
    // and directs a PDF-stream to a file
    PdfWriter.getInstance(document, new FileStream("Chap0101.pdf", FileMode.Create));

    // step 3: we open the document
    document.open();

    // step 4: we add a paragraph to the document
    document.add(new Paragraph("Hello World"));

    // step 5: we close the document
    document.close();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:38:38.833

它可能正在保存 Visual Studio 指定的默认位置。

您应该更改`FileStream`语句以定义位置：

```
PdfWriter.getInstance(document, new FileStream("c:\\Chap0101.pdf", FileMode.Create)); 
```

可以修改 Visual Studio 默认值，但最有可能查看（假设 2010 年）：

```
\Users\{yourUsername}\Documents\Visual Studio 2010\...\bin\Debug 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:39:04.283

它将位于可执行文件的工作目录中，即它旁边。如果您从 Visual Studio 运行它，请查看`projectDirectory\bin\Debug`.

# c++ - C++ 从类到模板

> ID：14652853
> 
> 赞同：-1
> 
> 时间：2013-02-01T18:34:36.887
> 
> 标签：c++, templates, vector, std

编辑：确实`(*it)->print()`有效。对于误导性信息，我们深表歉意。当我写这个问题时，我以为我尝试了所有可能性。最后一个，即使我不会尝试，对我来说似乎是错误的 - 指向指针的指针..

谢谢你的时间，这是一个新手的错误，但它让我看到了光明！

一周前我开始了一个小项目。在我有这段代码之前，一切都很顺利，在`this->_items`哪里`std::vector<CItem*> _items;`

```
std::vector<CItem*>::iterator it;
for ( it = this->_items.begin(); it != this->_items.end(); ++it)
{
    //MUST use .print() for each Item.
    //so:
    //it->print() - nope
    //(*it).print() -nope - same thing.. STILL!!! What's the problem?
    //it.print() - maybe?
    //(*it)->print() - come onn!!
} 
```

好的..所以它没有工作。在对 std::vector 做了一些研究之后，我意识到是的，那是一个模板。让我们做一个模板。我确实做到了。头文件和实现在一个大文件中，无处不在..但项目开始中断。

在将 Class 转换为 Template 之后，它也不起作用。所以我开始`template <typename T>`到处添加，直到红线消失。它不是。

以下是我所做的更改：[https ://github.com/screws0ft/ubisoft/commit/1b2bd6f9d5d66fcc9315f7a03cc71a2d6f64d57e](https://github.com/screws0ft/ubisoft/commit/1b2bd6f9d5d66fcc9315f7a03cc71a2d6f64d57e)

那么问题出在哪里？有人可以帮我吗？

欣赏它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:38:48.250

但是`(*it)->print()`应该工作。

但是，您也可以间接地做到这一点：

```
std::vector<CItem*>::iterator it;
for ( it = this->_items.begin(); it != this->_items.end(); ++it)
{
    CItem *item = *it;
    item->print();
} 
```

如果这些都不起作用。你在其他地方有问题。您是否正确分配了`CItem`对象？...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:44:08.737

快速而肮脏的方式：

```
for (auto &p : _items)
    p->print(); 
```

正确的方法：将您的更改`print`为：

```
std::ostream &print(std::ostream &os) { 
    // print self onto os
    return os;
} 
```

然后定义一个类似的`operator<<`东西：

```
std::ostream &operator<<(std::ostream &os, item const &i) { 
    return i->print(os);
} 
```

...最后使用以下内容进行打印：

```
std::copy(begin(items), end(items), std::ostream_iterator<item>(std::cout, "\n")); 
```

哦，如上所示，您真的想使用`items`（或者也许`items_`）而不是`_items`. 从技术上讲，`_items`在这种情况下是允许的，但我通常建议不要使用前导下划线定义任何名称，因为允许您这样做的上下文有些限制。

编辑：快速和肮脏版本的简短演示：

```
#include <iostream>
#include <vector>

class item { 
    int i;
public:
    std::ostream &print(std::ostream &os) {
        return os << i;
    }

    item(int i) : i(i) {}
};

class whatever { 
    std::vector<item *> items;
public:
    void print_all() { 
        for (auto &i : items)
            i->print(std::cout);
    }

    whatever() { 
        for (int i=0; i<10; i++)
            items.push_back(new item(i));
    }
};

int main() { 
    whatever w;

    w.print_all();
    return 0;
} 
```

# google-analytics - 使用 Google Analytics 比较事件

> ID：14652855
> 
> 赞同：3
> 
> 时间：2013-02-01T18:34:40.847
> 
> 标签：google-analytics

我正在开发一个 iOS 应用程序，我想跟踪和比较事件。我最初是从“虚拟屏幕视图”和自定义调暗/mets 开始的。这对我来说并不正确，所以我查看了事件日志记录。

除了一件事之外，事件日志的工作要好得多；获得我想要的信息要困难得多。对于后面的示例，让我们考虑以下事件：

```
Category    Action    Label
--------    ------    -----
Ad          Load      Success
Ad          Load      Success
Ad          Load      Fail
Ad          Load      Success
Ad          Click     Stay
Ad          Click     Leave 
```

我发现我可以创建一个过滤`Event Category = Ad`好的报告。我还可以添加第二个维度 Event Action，选择 Success 和 Fail，然后单击 Plot Rows。然后，与总事件相比，我得到了一个很好的可视化时间表，显示了我的成功加载与失败加载（我实际上不希望有这条线，但它就是这样）。我什至可以保存此报告的快捷方式，以便更轻松地返回此配置。

这很好，但我想在我的仪表板上获取这些数据。我可以或多或少地通过数据透视表得到我正在寻找的东西，但不是时间线。我也可以通过条形图获得视觉上吸引人的东西，但由于某种原因，条形颜色在枢轴维度上不匹配！

如果我对事件使用自定义的 dims/mets，我可以得到我想要的东西，但是为了获得仪表板视图而复制数据感觉有点矫枉过正。

另一个例子是我想比较`Ad - Load - Success`（`Ad - Click`作为和的总和，`Ad - Click - Leave`但`Ad - Click - Stay`我找不到任何方法来生成与事件的比较。使用自定义暗淡/满足，没问题。

我确实知道我可以发送带有事件而不是页面视图的自定义 dims/mets，这样我就可以获得与以前相同的数据而不会弄乱我的页面视图，但是，再次，拥有一个与我的*事件相匹配的**事件操作*维度感觉是多余的*行动*参与维度。

是否有任何常用的有效方法可以将事件数据与 Google Analytics 进行比较？我对时间线、图形表示和仪表板小部件特别感兴趣。

谢谢！

# objective-c - 查看周视图（横向）时，日历应用程序中如何有侧标题？

> ID：14652856
> 
> 赞同：3
> 
> 时间：2013-02-01T18:34:40.873
> 
> 标签：objective-c, xcode, uitableview, uiscrollview, header

在日历应用程序中旋转 iPhone 时，您会看到漂亮的周视图。它由顶部日期的标题和侧面时间的“侧面标题”组成。这些侧面标题的行为就像 UITableView 上的标题一样，但它们位于侧面。有谁知道如何在 UIScrollView 中制作这些“侧面标题”？水平滚动时侧标题必须保持原位，但垂直滚动时仍然滚动。

我有一种情况，我需要在 tableview/scrollview 的顶部和侧面放置标题。我还没有找到任何类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:47:00.980

该项目可以帮助您获得所需的行为。

[https://github.com/Xenofex/MultiColumnTableViewForiOS](https://github.com/Xenofex/MultiColumnTableViewForiOS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:38:57.727

应该是`UICollectionView`下面吧。查看有关它们的[WWDC 2012 会议，内容丰富](https://developer.apple.com/videos/wwdc/2012/)

# javascript - 验证登录

> ID：14652864
> 
> 赞同：1
> 
> 时间：2013-02-01T18:35:19.607
> 
> 标签：javascript, html, forms

我是 Web 开发的新手，我正在为我大学的 Wi-Fi HotSpot 创建一个登录界面。我在大部分设计中都使用了引导程序，并且只是实现了一个简单的用户名和密码提交表单。但是，在用户可以登录到无线热点之前，他们必须每次都同意条款和条件复选框。这是我需要在登录界面上验证的内容。

他们要求的是，如果用户在未选中该框的情况下尝试登录，则会弹出一条错误消息，告诉用户同意条款和条件。你可以在这里看到我的代码的现场演示：

[http://ece.uprm.edu/~s103924/Login%20Interface/test.html](http://ece.uprm.edu/~s103924/Login%20Interface/test.html)

我不知道从哪里开始，但已经读过使用 javascript 来验证表单应该相当简单。到目前为止，这是源代码的副本：

```
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Sign in &middot; ECENET Wireless Internet</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Oranienbaum' rel='stylesheet' type='text/css'>
    <style type="text/css">
      body {
        padding-top: 40px;
        padding-bottom: 40px;
        background-color: #f5f5f5;
      }

      .form-signin {
        max-width: 350px;
        padding: 19px 29px 45px;
        margin: 0 auto 20px;
        background-color: #fff;
        border: 2px solid #e5e5e5;
        -webkit-border-radius: 5px;
           -moz-border-radius: 5px;
                border-radius: 5px;
        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
           -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
                box-shadow: 0 1px 2px rgba(0,0,0,.05);
      }
      .form-signin .form-signin-heading,
      .form-signin .checkbox {
        margin-bottom: 10px;
      }
      .form-signin input[type="text"],
      .form-signin input[type="password"] {
        font-size: 16px;
        height: auto;
        margin-bottom: 15px;
        padding: 7px 9px;
      }

    </style>
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
  </head>

  <body>

    <div class="container">

     <form method="post" action="https://lanaccess.ece.uprm.edu:8001/" class="form-signin">
        <h2 class="form-signin-heading">ECENET Login</h2>
        <input type="text" class="input-block-level" placeholder="Username" maxlength="15">
        <input type="password" class="input-block-level" placeholder="Password">
        <input name="redirurl" type="hidden" value="http://ece.uprm.edu">
        <label class="checkbox">
            <input name="termsagree" type="checkbox" value="yes"> I Agree to the <a data-toggle="modal" href="#example">Terms &amp; Conditions</a>
        </label>
        <button name="accept" class="btn pull-right btn-primary" type="submit">Sign in</button>
        <!--<p><a data-toggle="modal" href="#example" class="btn btn-primary btn-large">Terms & Conditions</a></p>-->
      </form>

    <div id="example" class="modal hide fade in" style="display: none; ">
            <div class="modal-header">
              <a class="close" data-dismiss="modal">×</a>
              <h3>T&eacute;rminos &amp; Condiciones:</h3>
            </div>
            <div class="modal-body">
              <h4>A Todos Los Usuarios:</h4>
              <p><ol>
      <li>
        La Junta de Sindicos de la Universidad de Puerto Rico, mediante Certificacion Numero 072, Serie 1999-2000 aprobo la Politica Institucional y Procedimiento Para el Uso Etico Legal de las Tecnologias de Informacion de la Universidad de Puerto Rico.</li>
      <p>
      <li>
        Las disposiciones contenidas en esta politica son de aplicacion a toda la comunidad universitaria, clientes externos, las personas que presten servicios, asi como a todos los usuarios de los recursos de tecnologias de informacion y servicios de telecomunicaciones.</li>
      <p>
      <li>
        Toda vez que el acceso a las redes y al ambiente de las tecnologias de informacion es un privilegio institucional que otorga la Universidad de Puerto Rico, todos los usuarios tienen la responsabilidad de usar estos recursos de una manera eficiente y efectiva, observando estrictamente todas las normas eticas y legales contenidas en los estatutos estatales, federales, asi como en los reglamentos, politicas y procedimientos de la Universidad.</li>
      <p>
      <li>
        Cualquier violacion a las disposiciones contenidas en esta politica por parte de algun usuario, sera causa suficiente para iniciar un proceso de accion disciplinaria en su contra; incluyendo la no asignacion de los recursos y/o accesos, expulsion, despido o cualquier otra accion legal disponible.</li>
      <p>
      <li>
        Las politicas referentes a los recursos de tecnologia de informacion estan disponibles en <a href="http://www.uprm.edu/politicas" target="_blank">http://www.uprm.edu/politicas</a></li>
    </ol></p>            
            </div>
            <div class="modal-footer">
              <a href="#" class="btn" data-dismiss="modal">Close</a>
            </div>
          </div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="bootstrap/js/jquery.js"></script>
    <script src="bootstrap/js/bootstrap-modal.js"></script>
  </body>
</html> 
```

任何投入将不胜感激。至少在解决我的问题的地方或在线教程的想法上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:29:24.950

再次感谢您的输入。经过几次尝试上述答案后，我无法很好地理解我需要做什么。我参加了 w3Schools 的在线课程，终于明白了你的答案。我决定发布我所做的以防有人需要。

1.  我创建了一个函数来验证这样的表单：

    函数 validateForm() { var x=document.forms["signin"]["termsagree"].checked; if (x==null || x=="") { alert("您必须同意条款和条件！"); 返回假；} }

然后我把表格改成这样：

```
<form form name="signin" method="post" action="https://lanaccess.ece.uprm.edu:8001/" onsubmit="return validateForm()"  class="form-signin"> 
```

差不多就是这样。

参考：[http ://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:41:00.513

这就是你要做的.. 改变你的标签来运行验证功能 onSubmit..

```
<form method="post" action="https://lanaccess.ece.uprm.edu:8001/" onsubmit="return validateForm()"  class="form-signin">

function validateForm()
{
var x=document.forms[0]["termsagree"].value;
if (x==null || x=="")
  {
  alert("You must first agree to terms and conditions");
  return false;
  }
} 
```

您需要使用 validateForm 函数...请记住，如果您返回 false，则表单将不会提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:43:56.647

当用户提交表单时，您必须检查复选框是否被选中

我忘记添加消息了...

```
$('.form-signin').on('submit', function(e) {
  if (!$(this).find('input[type=checkbox]').is(':checked')){
    alert('You must agree with Terms and Conditions to Sign In');
    e.preventDefault();
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:51:51.477

对于单个复选框，您可以获得该值并检查它：

变成`<input name="termsagree" type="checkbox" value="yes">`：

```
<input id="termsagree" name="termsagree" type="checkbox" value="yes"> 
```

然后在脚本中检查它：

```
if (! document.getElementById('termsagree').checked) {
  alert("You have to agree to the Terms&Conditions");
} 
```

更复杂的验证[看这里](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)。

# telerik - RadGrid 如何在某些单元格中禁用行单击？网

> ID：14652871
> 
> 赞同：1
> 
> 时间：2013-02-01T18:35:33.723
> 
> 标签：telerik, click, row, cell, radgrid

这个问题可能有点具体，因为它涉及来自 Telerik 的称为 RadGrid 的特定类型的网格。

我有一个带有 5 列的 RadGrid，EnablePostBackOnRowClick 设置为 true，但我只希望在 3 个网格单元格上执行 RowClick 事件，我不希望在第一个和最后一个单元格（列）上执行此事件，是无论如何，当您单击这些特定单元格时，是否可以禁用触发 RowClick 事件？有没有办法将 RowClick 事件限制为中间的 3 个单元格/列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:04:13.583

看看这个 Telerik 演示： [网格单元选择](http://demos.telerik.com/aspnet-ajax/grid/examples/client/cellselection/defaultcs.aspx)

如果您指定`OnCellSelected`客户端方法，您可以检查单元格属于哪一列，然后将 AJAX 请求发送回服务器（如果它是您的 3 列之一）并将剩余逻辑放在服务器端 AJAX 请求处理程序方法中. 我不确定服务器端`ItemCommand`方法是否可以检测到您单击了哪个单元格，但先尝试一下，如果它不起作用，那么 AJAX 路由就足够了。此外，您至少需要 RadControls 的 2012 版本。

这是设置适当设置的标记：

```
<ClientSettings>
    <ClientEvents OnCellSelected="cellSelected"></ClientEvents>
    <Selecting CellSelectionMode="SingleColumn"></Selecting>
</ClientSettings> 
```

# javascript - 滑翔机幻灯片选项卡不适用于两个幻灯片 - 原型

> ID：14652873
> 
> 赞同：0
> 
> 时间：2013-02-01T18:35:35.547
> 
> 标签：javascript, slider, prototype

我在一页上有两个滑翔机幻灯片。Slider #1 (#slider) 将显示 Slider #2 (#slider2) 的活动选项卡，而不是 Slider #1 中的活动幻灯片。我需要链接将其类更改为“活动”以获得正确的滑块。

这是发生的地方：

```
this.current = $(element);

$$('#slider div.controls a.active').invoke('removeClassName', 'active');
$$('#slider2 div.controls a.active').invoke('removeClassName', 'active');
$$('#slider a[href="#'+this.current.id+'"]').invoke('addClassName', 'active'); 
```

这是我的 HTML 代码：

```
<a href="#section1">1</a>
<a href="#section2">2</a>
<a href="#section3">3</a> 
```

小提琴示例 [http://jsfiddle.net/hVGRy](http://jsfiddle.net/hVGRy)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:15:23.863

您`$`以错误的方式使用该符号。

在原型中，`$`彼此`$$`之间有很大不同：

*   `$`等于`document.getElementById`，返回匹配的元素，如果没有找到，返回`null`；
*   `$$`equals `document.querySelectorAll`，返回具有匹配元素的数组，如果没有找到，则返回`[]`。

您的代码应如下所示：

```
$$( '#slider div.controls a.active' ).invoke( 'removeClassName', 'active' );
$$( 'a[href=' + this.current.id + ']' )[0].addClassName( 'active' ); 
```

* * *

好的，原来的只适用于一张幻灯片，这是多张幻灯片的 hack：

```
// glider.js
addObservers: function() {
  var controls = this.wrapper.getElementsBySelector('.controls a');
  controls.invoke('observe', 'click', this.events.click);
}

moveTo: function(element, container, options){
  this.current = typeof element === 'string' ? this.wrapper.getElementsBySelector( '#' + element )[0] : $( element )

  this.wrapper.getElementsBySelector( '.controls a.active' ).invoke( 'removeClassName', 'active' )
  this.wrapper.getElementsBySelector( 'a[href="#' + this.current.id + '"]' ).invoke( 'addClassName', 'active' )

  Position.prepare();
  var containerOffset = Position.cumulativeOffset( container ),
  elementOffset = Position.cumulativeOffset( this.current );

  this.scrolling  = new Effect.SmoothScroll(container, 
    {duration:options.duration, x:(elementOffset[0]-containerOffset[0]), y:(elementOffset[1]-containerOffset[1])});
  return false;
} 
```

在我的机器上测试。

# pdf - 应用程序/x-pdf 与 pdf

> ID：14652876
> 
> 赞同：-1
> 
> 时间：2013-02-01T18:35:44.223
> 
> 标签：pdf, webserver, mime-types

我正在用 pdf 格式的乳胶生成文档（在 linux 上）。它工作正常，但是当我尝试在线上传它时，它说它不是pdf，而是应用程序/x-pdf。如何将其转换为真正的 pdf？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:10:18.187

好吧，我解决了这个问题，切换到另一个浏览器（Chrome，我使用的是 firefox）“某些版本的 Firefox 损坏了文件的某些属性”。这个问题非常具体，但我把它留在这里，我希望它对将来的其他用户有所帮助。

# ios - “XCode > Target A > Summary”中的 iCloud 权利设置不正确地影响其他目标

> ID：14652889
> 
> 赞同：0
> 
> 时间：2013-02-01T18:37:00.040
> 
> 标签：ios, xcode, icloud, entitlements

我的应用程序中有两个目标，一个支持 iCloud，另一个不支持。

在我的目标总结中，通过 iCloud 支持，我检查了权利，检查了启用 iCloud，标识符等。这一切都有效。

在我的目标 B 上，所有内容都会自动填写，与目标 A 相同！当我取消选中任何内容时，它在目标 AEg 上变为未选中，我将取消选中目标 B 的“启用 iCloud”，然后当我再次查看目标 A 时，我所有的 iCloud 内容都消失了。

有任何想法吗？还有其他人有类似的问题吗？

我正在使用 XCode 4.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:31:13.873

我最终`Entitlements-Target[1|2].plist`为每个目标重新创建文件，将它们重新添加到项目中，并将每个目标指向`info-Target[1|2].plist`新的权利文件，然后它就卡住了。好旧的 XCode。

# c# - 使用来自隔离存储的 InstallCommandSetsFromFileAsync？

> ID：14652893
> 
> 赞同：0
> 
> 时间：2013-02-01T18:37:29.710
> 
> 标签：c#, windows-phone-8, windows-phone, isolatedstorage

我目前正在通过使用 VoiceCommandService.InstallCommandSetsFromFileAsync 方法从 XML 文件安装语法定义，在 Windows Phone 8 中启用我的应用程序的语音功能。

使用此功能，是否可以通过隔离存储加载命令？这个想法是我想让命令可编辑，以便用户可以自己添加新命令，这些命令将在下次应用程序启动时实施。

目前我正在这样做：

```
await VoiceCommandService.InstallCommandSetsFromFileAsync(new Uri("ms-appx:///Commands.xml")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:41:07.047

我发现我只需要通过编写`ms-appdata:///local/Commands.xml`而不是`ms-appx:///Commands.xml`动态加载它来引用它。

它是通过猜测和过去使用类似资源的经验来完成的。很奇怪，没有这方面的文档。

# java - 在 Android 警报对话框中使用 HTML

> ID：14652894
> 
> 赞同：27
> 
> 时间：2013-02-01T18:37:31.537
> 
> 标签：java, android, eclipse, android-alertdialog

我有一些信息要显示在对话框中。它像标题，然后在它下面的文本；标题，然后在它下面的文字。同样，要显示 4 个标题和 4 个描述。它应该是这样的

## **标题一**

描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述

## **标题二**

描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述；描述

如您所见，有粗体文本、下划线文本、换行符等。我想将这种文本添加到警告框中，所以下面是我尝试过的。

```
TextView msg = new TextView(this);
msg.setText("<html><u>Message</u></html>")

AlertDialog.Builder ab = new AlertDialog.Builder(this);
ab.setTitle("Title");
ab.setView(msg);
ab.setCancelable(false);

//rest of the code 
```

然而这个技巧没有奏效。发生的事情是，所有的 HTML 标记都按原样显示！而且文字不清楚！似乎它与 AlertBox 的默认颜色黑色的背景混合在一起。我该如何解决这个问题？请帮忙！

PS：还是我用错了方法？错误的对话框？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-01T18:40:42.823

您将需要[`Html.fromHtml()`](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)在 as 中使用 HTML 标记`TextView`：

```
msg.setText(Html.fromHtml("<u>Message</u>")) 
```

您还可以[看到`TextView`](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html).

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-07-29T19:18:28.130

事实证明，您实际上不需要任何额外的 TextView 来执行此操作。只需将 HTML 包含在警报的“setMessage()”调用中（替换问题中的“setView()”调用）并将其传递给 html 格式的字符串。一定要在你的格式中只使用`<b>`, `<u>`, 和`<i>`，因为这些是它支持的唯一标签。如果您对警报中的文本使用字符串资源，请调用`getResources().getText(R.id.yourHtmlString)`而不是调用`getResources().getString(R.id.yourHtmlString)`，否则标签将从字符串中完全剥离。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-02T04:19:09.727

如果要添加链接并使其可点击，

```
msg.setMovementMethod(LinkMovementMethod.getInstance());
msg.setClickable(true); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-02T17:56:38.850

如果您需要添加更复杂`HTML`的 ,`CSS`和`META`，您可以`WebView`在对话框中添加 a ，如下所示：

```
String webViewString = yourMeta + yourCss + yourHtml;
yourCustomWebView.loadData(webViewString, "text/html; charset=UTF-8",
                    null);
yourAlertDialog.setView(yourCustomWebView); 
```

这样，您可以在对话框中显示完全格式化的 HTML 页面。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-01T18:48:28.603

试试这个，字体颜色，

```
 String source = "<b><font color=#ff0000> Loading. Please wait..."
                + "</font></b>"; 
```

字体下划线，

```
 String source = <u>Message</u>

 msg.setText(Html.fromHtml(source)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-18T16:23:38.713

如果你需要的话。更好地`HtmlCompat.fromHtml((htmlString, 0)`用于与旧版本的兼容性。

# python - 如何处理可以调整大小或未调整大小的 python 对象

> ID：14652895
> 
> 赞同：0
> 
> 时间：2013-02-01T18:37:47.027
> 
> 标签：python, numpy

我想写一个函数来接受一个数值参数`x`，这个参数可以是无大小的，比如说`x = 1`或大小，一个列表，元组或 ndarray，比如说`x = np.array([1,2])`。有没有一种很好的方法来编写处理这两种情况的代码？

作为一个具体的例子，假设目标是广播`x`到一个数组（预定义的形状`xshape`），如果`x`只是一个数字，如果`x`是一个形状错误的数组，则返回一个错误。

```
import numpy as np
import sys

if np.shape(np.atleast_1d(x)) == (1,):
    x = np.ones(xshape) * x
elif np.shape(x) != xshape:
    sys.exit("wrong shape for x") 
```

上面的代码似乎工作，除了嵌套困难`x = [[2]]`。它似乎也违背了一些推荐的做法，例如`try / except`. 任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:10:58.890

做到这一点的一种方法是推迟到 numpy，它处理所有各种情况并隐藏你的复杂性。例如：

```
>>> import numpy as np
>>> xshape = (2,)
>>> np.ones(xshape) * 1
array([ 1.,  1.])
>>> np.ones(xshape) * [9, 8]
array([ 9.,  8.])
>>> np.ones(xshape) * [[9, 8]]
array([[ 9.,  8.]])
>>> # Wrong shape
>>> np.ones(xshape) * [[9, 8, 7]]
ValueError                                Traceback (most recent call last)
<ipython-input-28-dd8a3b87c22c> in <module>()
----> 1 np.ones(xshape) * [[9, 8, 7]]

ValueError: operands could not be broadcast together with shapes (2) (1,3) 
```

另一种相关方法是`x = np.aarray(x)`在函数/脚本的开头使用。如果`x`已经是一个数组，则什么也不会发生，但如果`x`是一个标量或序列，则会创建一个适当形状的数组，然后您可以编写其余代码，知道它`x`是一个数组（如果`x`不能转换为数组将引发错误）。

# git - git local repo 总是领先于远程，即使在 fetch 之后也是如此，并且 diff 与远程显示一个增量

> ID：14652897
> 
> 赞同：0
> 
> 时间：2013-02-01T18:37:53.703
> 
> 标签：git

看了[这里](https://stackoverflow.com/questions/2432579/git-your-branch-is-ahead-by-x-commits)，还是一头雾水。

我做了`git pull`一个分支，然后是一个`git fetch`。

我仍然收到一条消息，说我的 repo 在 X 提交之前，并且据`git diff origin/branch`我了解，它将我的本地代码与远程分支进行比较，显示了一个增量。

这是在我拉取并获取之后，查看我的代码显示报告的差异实际上并不存在。我的代码和上游代码是相同的。

我还尝试基于[此链接](https://stackoverflow.com/questions/4052788/git-says-local-branch-is-ahead-of-remote-after-having-pulled-from-remote)进行变基，但无济于事。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:42:00.350

您的分支中是否有要保留的提交？或者你只是想让你的主分支保持最新？

无论哪种方式：

```
git stash
git branch master.tmp # or whatever name you want - this saves any changes
git checkout master.tmp
git pull origin master
git branch -D master
git checkout master --force
git stash pop 
```

这将导致您有两个分支：master（最新）和您当前的（`master.tmp`）

# python - 实例成员数据未传递给实例方法

> ID：14652899
> 
> 赞同：0
> 
> 时间：2013-02-01T18:38:00.977
> 
> 标签：python, generator, scrapy, yield

请参阅以下程序

```
class MyIterator:
    cur_word = ''
    def parse(self):
        data = [('one', 1), ('two', 2), ('three', 3), ('four', 4), ('five', 5)]
        for index in range(1,3):
            (word, num) = data[index]
            cur_word = word
            yield self.unique_str(num)

    def unique_str(self, num):
        data = ['a', 'b']
        for d in data:
            yield "%s-%d-%s" % (self.cur_word, num, d)

miter = MyIterator()
parse = miter.parse()
for ustrs in parse:
    for ustr in ustrs:
        print ustr 
```

此代码的输出是

```
-2-a
-2-b
-3-a
-3-b 
```

但我希望它是

```
two-2-a
two-2-b
three-3-a
three-3-b 
```

是的，我知道我可以跑`yield self.unique_str(word, num)`。但是我使用的代码是不允许的。所以我使用了一个实例成员来传递数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:40:24.067

`MyIterator.parse`不会更改实例的当前单词。

这有效：

```
class MyIterator:
    cur_word = ''
    def parse(self):
        data = [('one', 1), ('two', 2), ('three', 3), ('four', 4), ('five', 5)]
        for index in range(1,3):
            (word, num) = data[index]
            self.cur_word = word
            yield self.unique_str(num)

    def unique_str(self, num):
        data = ['a', 'b']
        for d in data:
            yield "%s-%d-%s" % (self.cur_word, num, d)

miter = MyIterator()
parse = miter.parse()
for ustrs in parse:
    for ustr in ustrs:
        print ustr 
```

（我刚改成`cur_word = word`in `self.cur_word = word`）`parse`

# c++ - 如何找出c++中的全局变量是否发生了变化？

> ID：14652900
> 
> 赞同：3
> 
> 时间：2013-02-01T18:38:08.933
> 
> 标签：c++

我有一个愚蠢的问题！假设您有一个在整个项目中使用的*全局变量*，并且当它发生变化时您将做一些事情，例如调用一个函数。
一种简单的方法是*在每次更改后调用您的函数*。但是，如果这个全局变量是库的一部分并且将在外部使用怎么办。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T19:04:58.963

大概你想找到你的变量何时被修改*，而不需要*追踪对它的引用并重写所有依赖它的代码。

为此，请将您的变量从现在的任何内容更改为重载的类类型`operator=`，并在发生更改时打印/记录/任何更改。例如，假设您当前拥有：

```
int global; 
```

并想知道何时更改`global`：

```
class logger { 
     int value;
public:
    logger &operator=(int v) { log(v); value= v; return *this; }

    // may need the following, if your code uses `+=`, `-=`. May also need to 
    // add `*=`, `/=`, etc., if they're used.
    logger &operator+=(int v) { log(value+v); value += v; return *this; }
    logger &operator-=(int v) { log(value-v); value -= v; return *this; }
    // ...

    // You'll definitely also need:
    operator int() { return value; }
}; 
```

并将 替换为`int global;`以`logger global;`获取对 的所有更改的日志`global`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T18:40:49.823

我想说最简单的方法是为调用函数的变量创建一个 set 方法并让它公开，而变量本身保持私有：

```
//public
void setYourVariable(int newValue)
{
    YourVariable = newValue;
    YourFunction();
}
//private 
int YourVariable; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T18:40:17.983

您需要创建一个访问器函数来设置全局变量。然后，您可以从该访问器调用您的特殊函数，而不是要求所有调用者自己做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T18:43:55.093

只是为了回答实际问题：不，没有办法确定 C++ 中的“变量何时更改”。从技术上讲，如果你有足够的权限并且硬件支持它，你可以为你的变量的地址设置一个“写断点”。但这只是一种非常迂回的方法，可以通过重命名变量来轻松实现，然后修复访问变量的所有位置以调用函数来更新值，如果合适的话还可以同时调用函数时间 - 正如几个答案中所建议的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T18:59:04.270

由于您说它也可能从外部调用，正如 Kevin 所说，拥有 Get() 和 Set(...) 方法很好。主要有2个优点。1）通过集合，您可以在值更改时调用函数或执行操作。2）您可以避免直接将变量直接暴露在外部。

# django - Django rest 框架 - 将结果解析为 tsv

> ID：14652921
> 
> 赞同：1
> 
> 时间：2013-02-01T18:39:18.257
> 
> 标签：django, rest, django-views, django-rest-framework

```
class TestAPI(APIView):   
    def post(self, request, format=None):
        # Here, I process the request in SomeClass method
        # 'some_result' is a tuple in the format below
        some_result = SomeClass.some_method(request)
        response = Response(some_result, status=status.HTTP_200_OK, headers=None)
        return response 
```

仅供参考，`'some_result'`包含：

```
(u'text1', [('dataA1', 'dataA2', 'dataA3'), ('dataB1', 'dataB2', 'dataB3')], 'text2') 
```

所以我的问题是，是否可以解析这个元组（上图），所以我可以像这样返回一个 tsv：

```
dataA1 dataA2 dataA3
dataB1 dataB2 dataB3 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:37:31.077

查看有关实现自定义渲染器的文档。

[http://django-rest-framework.org/api-guide/renderers.html#custom-renderers](http://django-rest-framework.org/api-guide/renderers.html#custom-renderers)

自定义渲染器看起来像这样......

```
class TSVRenderer(renderers.BaseRenderer):
    media_type = 'text/tsv'
    format = 'tsv'

    def render(self, data, media_type=None, renderer_context=None):
        return ...  # TODO: Convert you incoming data representation into a TSV string 
```

然后，您可以通过设置`renderer_classes`属性将渲染器添加到视图...

```
class TestAPI(APIView):
    renderer_classes = [TSVRenderer]
    ... 
```

# sql - 将数据库从 SINGLE USER 模式设置为 MULTI USER

> ID：14652923
> 
> 赞同：213
> 
> 时间：2013-02-01T18:39:28.553
> 
> 标签：sql, sql-server

我需要帮助将在`SINGLE_USER`模式下恢复的数据库设置为`MULTI_USER`. 每次我跑

```
ALTER DATABASE BARDABARD
SET MULTI_USER;
GO 
```

我收到此错误：

> 此时无法更改数据库“BARDABARD”的状态或选项。
> 
> 数据库处于单用户模式，并且当前有一个用户连接到它。

它需要处于非`SINGLE_USER`模式才能将其设置为另一种模式，但是当它处于模式时我无法将数据库设置为任何其他`SINGLE_USER`模式。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-02-01T18:45:56.687

“用户当前连接到它”可能是 SQL Server Management Studio 窗口本身。尝试选择主数据库并`ALTER`再次运行查询。

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-02-01T18:46:56.107

该错误消息通常意味着有其他进程连接到数据库。尝试运行它以查看哪些已连接：

```
exec sp_who 
```

这将返回您的过程，然后您应该能够运行：

```
kill [XXX] 
```

其中 [xxx] 是`spid`您要杀死的进程。

然后你可以运行上面的语句。

祝你好运。

* * *

## 回答 #3

> 赞同：85
> 
> 时间：2014-07-11T20:48:56.653

您可以添加立即回滚更改的选项。

```
ALTER DATABASE BARDABARD
SET MULTI_USER
WITH ROLLBACK IMMEDIATE
GO 
```

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2014-04-09T12:41:21.170

SQL Server 2012：

右键单击`DB > Properties > Options > [Scroll down] State > RestrictAccess > select Multi_user`并单击确定。

瞧！

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2014-03-31T03:09:13.090

我有同样的问题，并通过以下步骤修复 - 参考： http: [//giladka8.blogspot.com.au/2011/11/database-is-in-single-user-mode-and.html](http://giladka8.blogspot.com.au/2011/11/database-is-in-single-user-mode-and.html)

```
use master
GO

select 
    d.name, 
    d.dbid, 
    spid, 
    login_time, 
    nt_domain, 
    nt_username, 
    loginame
from sysprocesses p 
    inner join sysdatabases d 
        on p.dbid = d.dbid
where d.name = 'dbname'
GO

kill 56 --=> kill the number in spid field
GO

exec sp_dboption 'dbname', 'single user', 'FALSE'
GO 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2016-04-05T09:33:48.383

这对我来说很好。

步骤 1\. 右键单击​​数据库引擎，单击活动监视器并查看正在连接的进程。杀死该特定用户并立即执行查询。

第2步。

```
USE [master];
GO
ALTER DATABASE [YourDatabaseNameHere] SET MULTI_USER WITH NO_WAIT;
GO 
```

并刷新数据库。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-12-29T18:38:08.710

实际上，我遇到了一个问题，即我的数据库几乎被进程锁定并且与它们存在竞争条件，当我执行一个命令刷新并且他们再次锁定它时......我不得不背靠背运行以下命令在 SSMS 中并让我脱机，从那里我进行了恢复并恢复正常，这两个查询在哪里：

第一次运行：

```
USE master
GO

DECLARE @kill varchar(8000) = '';
SELECT @kill = @kill + 'kill ' + CONVERT(varchar(5), spid) + ';'
FROM master..sysprocesses 
WHERE dbid = db_id('<yourDbName>')

EXEC(@kill); 
```

然后紧随其后（在第二个查询窗口中）：

```
USE master ALTER DATABASE <yourDbName> SET OFFLINE WITH ROLLBACK IMMEDIATE 
```

做了我需要的，然后把它重新上线。感谢所有为我编写这些文章以结合并解决我的问题的人。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-09-23T12:50:58.667

我刚刚使用以下步骤进行了修复，它可能会对您有所帮助。

**第1步**

[![右键单击单用户数据库](../Images/6f87fea929a5c40191d228171177e832.png)](https://i.stack.imgur.com/EPVke.png)

* * *

**第2步**

[![脱机](../Images/abfbc53914af17d340782393567e0a33.png)](https://i.stack.imgur.com/wZnbJ.png)

* * *

**步骤：3**

[![断开连接并离线](../Images/0e2b82358d5d335c75561b2e1086d88c.png)](https://i.stack.imgur.com/tAx2K.png)

* * *

**第4步**

[![上网](../Images/d923297c6681648540d1bd20f975a360.png)](https://i.stack.imgur.com/vZSPM.png)

* * *

**步数：5**

然后运行以下查询。

```
ALTER DATABASE YourDBName
SET MULTI_USER
WITH ROLLBACK IMMEDIATE
GO 
```

享受...！

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-12-02T03:52:44.983

最好直接登录服务器，而不是使用 SQL Management Studio

确保您登录的帐户是您要设置为 MULTI_USER 的数据库的 dbowner。如果可以，以 sa 身份登录（使用 SQL 服务器身份验证）

**如果您的数据库被 IIS 使用，请停止使用它的网站和应用程序池**- 这可能是已连接并阻止您设置为 MULTI_USER 的进程

```
USE MASTER
GO

-- see if any process are using *your* database specifically

SELECT * from master.sys.sysprocesses
WHERE spid > 50 -- process spids < 50 are reserved by SQL - we're not interested in these
AND dbid=DB_ID ('YourDbNameHere')

-- if so, kill the process:

KILL n -- where 'n' is the 'spid' of the connected process as identified using query above

-- setting database to read only isn't generally necessary, but may help:

ALTER DATABASE YourDbNameHere
SET READ_ONLY;
GO

-- should work now:

ALTER DATABASE Appswiz SET MULTI_USER WITH ROLLBACK IMMEDIATE 
```

如果您仍有问题，请参阅此处：

[http://www.sqlservercentral.com/blogs/pearlknows/2014/04/07/help-im-stuck-in-single-user-mode-and-can-t-get-out/](http://www.sqlservercentral.com/blogs/pearlknows/2014/04/07/help-i-m-stuck-in-single-user-mode-and-can-t-get-out/)

**作为最后的**选择 - 如果您已经尝试了上述所有方法并且您感到绝望，您可以尝试停止 SQL 服务器实例并重新启动它

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-06-01T15:57:29.737

您不能这样做，因为数据库处于单一模式。最重要的是，但您应该知道：当您打开 sql 管理工作室时，它不知道数据库上的任何用户，但是当您单击数据库时，它认为您是单个用户并且您的命令不起作用。只需这样做：关闭管理工作室并重新打开它。新的查询窗口不选择任何数据库写入命令脚本。

```
USE [master];
GO
ALTER DATABASE [tuncayoto] SET MULTI_USER WITH NO_WAIT;
GO 
```

让 f5 wolla 一切正常！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-10-13T07:58:03.453

当我不知道用于更改为`singleuser`模式的特定 SPID 时，下面的代码对我有用。

```
use master
GO

select 
    d.name, 
    d.dbid, 
    spid, 
    login_time, 
    nt_domain, 
    nt_username, 
    loginame
from sysprocesses p 
    inner join sysdatabases d 
        on p.dbid = d.dbid
where d.name = 'dbname'
GO

kill 52 -- kill the number in spid field
GO

exec sp_dboption 'dbname', 'single user', 'FALSE'
GO 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-12-10T05:45:04.903

1.  试了一切都不行
2.  远程登录该服务器，因为我们将终止所有连接
3.  多次运行以下代码，直到它返回完成并且不再进行“终止进程”测试
4.  使用以下代码下方的代码再次重新激活它

> 使用 master GO 声明 @sql 为 varchar(20)，@spid 为 int
> 
> 选择 @spid = min(spid) from master..sysprocesses where dbid = db_id('DB_NAME') and spid != @@spid
> 
> while (@spid is not null) begin print 'Killing process ' + cast(@spid as varchar) + ' ...' set @sql = 'kill ' + cast(@spid as varchar) exec (@sql)
> 
> ```
> select 
>     @spid = min(spid)  
> from 
>     master..sysprocesses  
> where 
>     dbid = db_id('DB_NAME') 
>     and spid != @@spid end 
> ```

然后让它活着回来

> ALTER DATABASE DB_NAME SET MULTI_USER；去

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-02-12T07:33:58.687

这对我来说很好

1.  备份
2.  创建新数据库并将备份还原到它
3.  然后 Properties > Options > [向下滚动] State > RestrictAccess > 选择 Multi_user 并单击 OK
4.  删除旧数据库

希望这项工作对所有人都有效谢谢拉梅什库马尔

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-05-16T18:53:54.510

如果上述方法不起作用，请找到 spid 的登录名并在 Security - Logins 中禁用它

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-07-02T02:20:57.590

我已经轻松解决了问题

1.  右键单击数据库名称重命名它

2.  更改后，右键单击数据库名称--> 属性--> 选项--> 滚动到底部的 RestrictAccess (SINGLE_USER to MULTI_USER)

3.  现在您可以再次将数据库重命名为您的旧名称。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-09-26T09:31:00.870

**只需转到数据库属性** 并将 SINGLE USER 模式更改为 MULTI USER

[![在此处输入图像描述](../Images/118ac327eeb36ae3797f8b175a318bcd.png)](https://i.stack.imgur.com/Z89VS.jpg)

注意：如果它不适合您，请再次进行 Db 备份和还原，然后再次执行上述方法

* 单=SINGLE_USER

多个=MULTI_USER

受限=RESTRICTED_USER

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-10-03T17:16:19.593

在超过 3 次使用 SQL Server 2014 的情况下，我已经将数据库转换为单用户模式，而我没有进行任何更改。它一定是在数据库创建期间以某种方式发生的。上述所有方法都不起作用，因为我总是收到数据库处于单用户模式且无法连接的错误。

我唯一要做的就是重新启动 SQL Server Windows 服务。这使我能够连接到数据库并进行必要的更改或删除数据库并重新开始。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-11-02T16:34:43.107

进入单用户模式后，客户端只能与 SQL Server 建立一个连接，请记住“对象资源管理器”占用（单独的）连接，因此如果您尝试在查询中运行多用户语句窗口，您将收到错误消息，即在单用户模式下您无法建立另一个连接。

对我来说这不是问题，但在我的情况下，很少有自动化进程会持续（每隔几秒钟）建立连接，所以一旦我将数据库带入单用户模式并断开自己的连接，其中一个进程建立/占用了连接（在我开始恢复操作之前）。一旦我终止这些连接 - 它们就会重新连接，当我运行恢复命令时，我会收到连接已被占用的错误。

为了解决这个问题，我必须在一个查询窗口中编写`kill`语句、语句更改`User-Mode`和`Restore`操作，当我一口气运行它们时，瞧！！！有效。

希望这对其他人有帮助。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-07-23T19:21:57.973

我在使用本地数据库时遇到了麻烦。

我能够通过停止 SQL Server，然后启动 SQL Server，然后使用 SSMS UI 将 DB 属性更改为 Multi_User 来解决这个问题。

当我尝试恢复备份时，数据库进入“单用户”模式。在尝试还原（SQL 2017）之前，我没有创建目标数据库的备份。这将让你每次。

停止 SQL Server，启动 SQL Server，然后运行上述脚本或使用 UI。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-09-30T10:51:21.490

我搜索了一段时间的解决方案，最后想出了以下解决方案，

SSMS 通常在后台使用多个与数据库的连接。

**您需要在更改访问模式之前终止这些连接。**（我在下面的代码模板中使用**EXEC(@kill);完成了它。）**

然后，

运行以下 SQL**将数据库设置为 MULTI_USER 模式。**

```
USE master
GO
DECLARE @kill varchar(max) = '';
SELECT @kill = @kill + 'KILL ' + CONVERT(varchar(10), spid) + '; '
FROM master..sysprocesses 
WHERE spid > 50 AND dbid = DB_ID('<Your_DB_Name>')
EXEC(@kill);

GO
SET DEADLOCK_PRIORITY HIGH
ALTER DATABASE [<Your_DB_Name>] SET MULTI_USER WITH NO_WAIT
ALTER DATABASE [<Your_DB_Name>] SET MULTI_USER WITH ROLLBACK IMMEDIATE
GO 
```

要切换回单用户模式，您可以使用：

```
ALTER DATABASE [<Your_DB_Name>] SET SINGLE_USER 
```

这应该有效。编码快乐！！

谢谢！！

# ssis - SSIS 配置连接字符串

> ID：14652931
> 
> 赞同：2
> 
> 时间：2013-02-01T18:40:02.287
> 
> 标签：ssis, connection-string

我遇到了我们的一些包裹的问题。基本布局是将连接字符串存储在数据库中的 SSIS 配置表中。

我最近注意到我的 oledb 连接的服务器名称似乎保持不变。我已经看到我将包从一个环境移动到另一个环境并且验证失败。如果我将密码更改为它验证的第一个环境中使用的密码。

除了我需要存储的连接字符串之外，还有其他属性吗？我没有使用变量或表达式。

有没有人见过这个？有问题的服务器版本是 2008 R2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:51:43.373

这可能是因为它试图使用存储在包本身中的连接字符串而不是配置文件提供的连接字符串进行验证。我知道解决这个问题的两种方法：

1.  每个连接管理器和数据流任务都有一个名为 DelayValidation 的属性。当设置为 true 时，该属性将阻止 SSIS 在配置更改连接字符串之前尝试验证连接和数据流任务。麻烦的是，默认值为 false，您必须在每个连接管理器和数据流任务上进行设置。您还需要记住每次创建新设置时都要翻转设置。
2.  在部署之前，您可以手动或以编程方式更改 SSIS 包中连接字符串的实际值以匹配配置文件。诚然，这似乎确实违背了首先拥有配置文件的目的，但它确实确保了它会起作用。这是我经常最终采取的选择。在我从测试环境转移到生产环境之前，我在文本编辑器中弹出打开包并查找/替换连接字符串。我已经确定这对我的包裹是安全的，但是，与任何类似的 hacky 解决方案一样，您的里程可能会有所不同。

# html - 为什么浏览器不为这个文本字段提供建议？

> ID：14652933
> 
> 赞同：3
> 
> 时间：2013-02-01T18:40:09.957
> 
> 标签：html, browser, autocomplete

我有一个用于登录表单的基本文本输入，我希望浏览器记住用户输入的电子邮件地址，但它不起作用。我认为我不需要添加一个完整的自动完成系统来让它工作，因为这是浏览器应该做的事情。在我访问过的网站上，我没有看到任何特别之处。

如果我搜索这个问题，所有的答案都是关于*禁用*自动完成。

这是我的登录表单：

```
<form id="login-form">
  <fieldset>
    <input id="email" type="email" placeholder="Your email" required="" >
    <input id="password" type="password" placeholder="Pick a good password" required="" minlength="6">
    <button class="login">Register</button>
  </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T18:45:53.170

所以这里的问题似乎是我的输入没有“名称”属性。似乎我还需要为名称指定特定值。“email”有效，“login”有效，但“user_email”和“foo”无效。

令人惊讶的是，一旦我在输入中添加了 'name="email"'，它就开始工作了，所以 Chrome 似乎正在保存这些值，但没有显示它们。

这个简单的输入就是 Chrome 进行电子邮件自动完成所需的全部内容：

```
<input name="email"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:51:38.767

我不相信您可以强制用户的浏览器自动完成。

HTML5 有一个[自动完成的表单属性](http://www.w3schools.com/html/html5_form_attributes.asp)。

这是[自动完成属性的 W3C 规范](http://www.w3.org/TR/2011/WD-html5-20110525/common-input-element-attributes.html#the-autocomplete-attribute)。

但是，即使您将此属性设置为“on”，HTML 表单的自动完成也将取决于客户端的浏览器设置和配置。

正如您所说，尽管您可以禁用*autocomplete*，但如果用户将浏览器配置为不记住表单历史记录，则无法强制用户的浏览器自动完成表单。

例如，这里是如何禁用 Firefox 的自动完成功能：[https ://developer.mozilla.org/en-US/docs/Mozilla/How_to_Turn_Off_Form_Autocompletion](https://developer.mozilla.org/en-US/docs/Mozilla/How_to_Turn_Off_Form_Autocompletion)

# javascript - 表单不提交回调

> ID：14652940
> 
> 赞同：2
> 
> 时间：2013-02-01T18:40:24.130
> 
> 标签：javascript, jquery, ajax, forms

我正在尝试在成功完成 ajax 调用后发送电子邮件。我无权访问要进行 AJAX 调用的文件。

我正在阻止第一次提交，进行 ajax 调用并在竞争时再次提交表单。这样做时，我似乎无法弄清楚为什么我必须按两次提交按钮才能发送电子邮件。

这是我的代码：

```
"use strict";
var submitted = '';

/* Send info to the portal */
jQuery(function($) {
    $('#quote').submit(function(e){
        var firstName   = $('#firstName').val(),
            lastName    = $('#lastName').val(),
            email       = $('#email').val(),
            phone       = $('#primaryPhone').val(),
            weight      = $('#weight').val(),
            origin      = $('#originPostalCode').val(),
            destination = $('#destinationPostalCode').val(),
            notes       = $('#whatsTransported').val()
        if( submitted != 1 )
        {
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "https://somewhere.on/the/internet.php",
                crossDomain: true,
                dataType: "json",
                data: {"key": "my secret key","first": firstName, "last": lastName, "email": email, "phone": phone, "weight": weight, "origin_postal": origin, "dest_country": destination, "note": notes }
            })
            .done(function(data){
                if(data[1][0][0] == 2)
                {
                    $('.alert').append( data[1][0][1].message ).addClass('alert-error').show();
                } else if(data[1][0][0] == 0) {
                    console.log("Made it.");
                    $('#quote #submit').submit();
                } else {
                    $('.alert').append( "Appologies, it seems like something went wrong. Please, <strong>call (877) 419-5523</strong> for immediate assistance or a free quote.");
                }
            })
            .fail(function(data) { console.log(data); });
        }
        submitted = '1';
    });
}); 
```

**这是表单HTML**

```
<form action="<?php echo bloginfo($show='template_url').'/includes/form-email.php'; ?>" class="span6 offset1" id="quote" method="post">
            <div class="row formRow">
                <div class="firstName span3">
                    <label for="firstName"><?php _e('First Name:','StreamlinedService'); ?></label>
                    <input type="text" name="firstName" id="firstName">
                </div>
                <div class="lastName span3">
                    <label for="lastName"><?php _e('Last Name:','StreamlinedService'); ?></label>
                    <input type="text" name="lastName" id="lastName">
                </div>
            </div>
            <div class="row formRow">
                <div class="email span3">
                    <label for="email"><?php _e('Email Address:','StreamlinedService'); ?></label>
                    <input type="text" name="email" id="email">
                </div>
                <div class="primaryPhone span3">
                    <label for="primaryPhone"><?php _e('Phone Number:','StreamlinedService'); ?></label>
                    <input type="text" name="primaryPhone" id="primaryPhone">
                </div>
            </div>
            <div class="row formRow">
                <div class="weight span2">
                    <label for="weight"><?php _e('Weight (lbs):','StreamlinedService'); ?></label>
                    <input type="text" name="weight" id="weight">
                </div>
            </div>
            <div class="row formRow">
                <div class="originPostalCode span3">
                    <label for="originPostalCode"><?php _e('Origin:','StreamlinedService'); ?></label>
                    <input type="text" name="originPostalCode" id="originPostalCode">
                </div>
                <div class="destinationPostalCode span3">
                    <label for="destinationPostalCode"><?php _e('Destination:','StreamlinedService'); ?></label>
                    <input type="text" name="destinationPostalCode" id="destinationPostalCode">
                </div>
            </div>
            <div class="row">
                <div class="whatsTransported span6">
                    <label for="whatsTransported"><?php _e('What can we help you transport?','StreamlinedService'); ?></label>
                    <textarea name="whatsTransported" id="whatsTransported" rows="5"></textarea>
                </div>
                <input type="hidden" name="formType" value="quote" />
                <input type="hidden" name="siteReferer" value="<?php echo $blog_id ?>">
                <input type="submit" id="submit" name="submit" value="<?php _e('Get Freight Quote','StreamlinedService') ?>" class="btn btn-primary btn-large span3 offset3" style="float:right;">
            </div>
        </form> 
```

我的问题有两个：有没有更有效的方法来做到这一点？如果没有，为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:45:15.257

您对 Jquery 使用了错误的方法 您错过了关键：**Write Less Do More**，JQuery 的核心。无论如何试试这个：

```
"use strict";
/* Send info to the portal */
jQuery(function($) {
    $('#quote').submit(function(e){
         var tis = $(this);
         $.ajax({
                type: "POST",
                url: "https://somewhere.on/the/internet.php",
                cache: true,
                dataType: "json",
                data: tis.serialize(),
                success: function(data){
                   if(data[1][0][0] == 2){
                    $('.alert').append( data[1][0][1].message ).addClass('alert-error').show();
                } else if(data[1][0][0] == 0) {
                    console.log("Made it.");
                    $('#quote #submit').submit();
                } else {
                    $('.alert').append( "Appologies, it seems like something went wrong. Please, <strong>call (877) 419-5523</strong> for immediate assistance or a free quote.");
                }
                },
                error: function(data){console.log(data);}
            });
         e.stroPropagation();
         e.preventDefault();
    });
}); 
```

最后薄薄..您**不能**请求不在脚本的同一域上托管的远程页面..为此，这是[这个答案](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:07:51.523

只需`.submit`直接在表单节点上使用（注意`[0]`）

```
$('#quote #submit').submit(); 
```

变成

```
$('#quote')[0].submit(); 
```

这绕过了 jQuery 绑定事件并强制回发。

# python - Python - 如何正确获取重音字符？(美人汤)

> ID：14652942
> 
> 赞同：0
> 
> 时间：2013-02-01T18:40:42.600
> 
> 标签：python, character-encoding, beautifulsoup, non-ascii-characters

我已经用 BeautifulSoup 编写了 python 代码来获取 HTML，但没有得到如何正确解决重音字符的问题。

HTML的字符集是这个

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
```

我有这个python代码：

```
some_text = soup_ad.find("span", { "class" : "h1_span" }).contents[0]
some_text.decode('iso-8859-1','ignore') 
```

我明白了：

```
CalÃ§Ãµes 
```

我在这里做错了什么？一些线索？

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:47:19.190

这里的问题是关于“在哪里”你“得到这个”。如果这是您的终端收到的输出，那么您的终端也可能需要不同的编码！

您可以在使用打印时尝试此操作：

```
import sys
outenc = sys.stdout.encoding or sys.getfilesystemencoding()
print t.decode("iso-8859-1").encode(outenc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:47:07.227

正如 bernie 所指出的，BS 在内部使用 Unicode。

对于[`BS3`](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Beautiful%20Soup%20Gives%20You%20Unicode,%20Dammit)：

> **美丽的汤给你Unicode，该死的**
> 
> 当您的文档被解析时，它已被转换为 Unicode。Beautiful Soup 在其数据结构中仅存储 Unicode 字符串。

对于[`BS4`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#making-the-soup)，当发生这种情况时，文档解释得更清楚一点：

> 您可以传入一个字符串或一个打开的文件句柄……首先，将文档转换为 Unicode，然后将 HTML 实体转换为 Unicode 字符……`

换句话说，它立即解码数据。所以，如果你得到 mojibake，你必须在它进入 BS 之前修复它，而不是之后。

构造函数的输入`BeautifulSoup`可以采用 8 位字节字符串或文件，并尝试找出编码。有关详细信息，请参阅[编码](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#encodings)。您可以通过打印来检查它是否猜对了`soup.original_encoding`。如果它没有猜测`ISO-8859-1`或同义词，您唯一的选择是使其明确：`decode`在传递它之前的字符串，使用 Unicode 模式打开文件`encoding`，等等。

来自任何 BS 对象的结果，以及作为参数传递给任何方法的任何内容，都将始终是 UTF-8（如果它们是字节字符串）。所以，调用`decode('iso-8859-1')`你从 BS 中得到的东西肯定会破坏一些东西，如果它还没有被破坏的话。

而且您无论如何都不想这样做。正如您在评论中所说，“我正在输出到 SQLite3 数据库。” 好吧，sqlite3 总是使用 UTF-8。（你可以`pragma`在运行时用 a 改变它，或者在编译时改变默认值，但这基本上破坏了 Python 接口，所以……不要。）Python 接口只允许在 Py2 中使用 UTF-8 `str`（当然在 Py2 `unicode`/Py3 `str`，没有编码。）因此，如果您尝试将 BS 数据编码为 Latin-1 以存储在数据库中，则会产生问题。只需按原样存储 Unicode，或者如果必须将其编码为 UTF-8（仅限 Py2）。

如果您不想弄清楚所有这些，只需在初始调用后在任何地方使用 Unicode `BeautifulSoup`，您就永远不会出错。

# security - 加密和代码归档文件

> ID：14652949
> 
> 赞同：0
> 
> 时间：2013-02-01T18:41:24.840
> 
> 标签：security, encryption, cvs

我们有这个计算机代码，它要求任何有权访问它的人支付许可费。我们将为我们的开发人员支付费用，但他们希望我们的系统管理员也获得许可，因为他们可以看到代码存档。但是，如果代码以加密方式存储在档案中，那么系统管理员可以看到文件但看不到内容。任何软件版本控制系统都允许加密，因此只有检查代码的人才需要密钥，因此能够看到解密的文件。我在想将它添加到 pserver 和 cvs 并不难，但如果它已经在其他地方完成，为什么要重新发明轮子。

任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:04:14.697

基本上，您想为所有开发人员提供一些密钥，他们将其插入 git 的 smudge 和 clean 过滤器的加密/解密例程中。并且您需要一个能够执行增量的加密方案。

首先，请参阅[加密版本控制](https://stackoverflow.com/questions/11972219/encrypted-version-control)以获取 git 中的一些示例。如前所述，这可以显着增加磁盘使用率。但是，有一些方法可以以牺牲一些安全性为代价进行更“差异友好”的加密。有关如何攻击它的示例，请参见[diph 。](https://github.com/bjornedstrom/diph)此外，任何使用 AES-ECB 模式的系统都会有很好的差异。（您通常不应该使用 AES-ECB 模式，因为它存在安全漏洞......其中一个安全漏洞是它可以很好地区分......嘿，这就是你想要的，所以这似乎是一个合理的例外。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:41:31.157

没有办法建立一个可以执行服务器端差异的源代码控制系统，以防止系统管理员至少在理论上访问内容。（即：源代码控制系统无法将解密密钥存储在系统管理员无法访问的地方。）除非您的系统管理员习惯性地浏览源代码控制数据库内容，否则这样的系统应该与未加密的系统没有实际区别从供应商的角度来看系统。

使服务器管理员无法识别源代码控制数据库的唯一方法是在将文件提交到服务器之前加密客户端上的文件。为此，为了达到预期的目标，管理员需要无法访问解密密钥，这在大多数组织中不太可能实现，因为服务器管理员通常也对所有客户端计算机具有管理员访问权限。忽略这个挑剔的细节，这也意味着您的所有源代码控制系统将看到的都是加密的二进制文件，这意味着没有服务器端的差异或指责。这也意味着您的数据库大小可能会出现可怕的膨胀，因为每个文件都需要在每次提交时完全替换。你真的愿意牺牲你的源代码控制系统的可用性来节省许可费用和/或安抚这个供应商吗？

# windows - 将 java jdk 安装到特定目录后，如何使其工作？

> ID：14652950
> 
> 赞同：1
> 
> 时间：2013-02-01T18:41:25.277
> 
> 标签：windows, java, virtual-machine, noclassdeffounderror

我在没有管理员访问权限的计算机上安装 jdk，并使用 cgywin 和 cabextract 从安装程序中提取文件。然后我将工具 zip 解压缩到一个新目录中。但是，当我尝试从 bin 运行 javac 时，出现此错误：

```
Error occurred during initialization of VM
java/lang/NoClassDefFoundError: java/lang/Object 
```

我再次查看该目录，发现在将其与 java 文档中的文件结构进行比较时，JDK/lib 中缺少 tools.jar。

我想知道是否缺少那个罐子会导致我的问题，或者是否有其他问题。

# php - CodeIgniter 在消息中设置带有值的错误消息

> ID：14652953
> 
> 赞同：1
> 
> 时间：2013-02-01T18:41:46.557
> 
> 标签：php, codeigniter-2

所以我阅读了[表单验证的用户指南，](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#settingerrors)它展示了如何设置自定义消息。例如，如果我把它放在我的代码中

```
$this->form_validation->set_message('is_unique', '%s address already registered.'); 
```

它将输出`E-mail address already registered.`（如果它是电子邮件字段的验证）

我想要做的是有一条消息说`E-mail address test@website.com already registered.`是否有代码可以显示正在传递的字段的值？（如 %s，显示字段名称）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:44:28.287

```
$this->form_validation->set_message('is_unique', '%s address ' . $this->input->post('email', true) . ' already registered.'); 
```

开箱即用，它只翻译字段*名称*，`sprintf`而不是字段*值*：

```
$message = sprintf($line, $this->_translate_fieldname($row['label']), $param); 
```

只需扩展`CI_Form_validation`并`MY_Form_validation`解析字符串以满足您的需求。

# rest - FOSOAuthServerBundle 创建客户端

> ID：14652957
> 
> 赞同：2
> 
> 时间：2013-02-01T18:42:12.060
> 
> 标签：rest, symfony, oauth-2.0

我目前正在尝试使用我的 Symfony2 应用程序设置 FOSOAuthServerBundle。一切似乎都已设置并正常运行，无论如何我在安装后被卡住了。使用 URL 获取 access_token 的正确工作流程是什么？

我试过 /oauth/v2/auth，但听起来我需要先定义一个 Client 对象。

如何创建/生成客户端？客户端总是应该手动创建的？

FOSOAuthServerBundle 文档很棒，但似乎跳过了所有使用工作流程。我应该为此检查 OAuth2 文档吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T12:39:45.300

简而言之，是的。您应该使用 oAuth2 RFC 来确定要使用的工作流程。关于客户端注册，RFC 明确指出客户端注册的方式超出了规范的范围（[https://www.rfc-editor.org/rfc/rfc6749#section-2](https://www.rfc-editor.org/rfc/rfc6749#section-2)）。

话虽如此，我可以让您了解我是如何做到这一点的。我的应用程序是一个手机应用程序，它连接到在各种服务器上运行的多个服务。我也在使用`Resource Owner Password Credentials Grant`.

我处理这个问题的方法是：当应用程序加载时，它做的第一件事就是检查它是否有一个`oAuth2 client id`. 如果没有，那么它会发布到我使用我需要的元数据设置的创建客户端端点。端点验证 POST，创建客户端并返回客户端信息。应用程序存储客户端 ID，并且下次不必重复该过程。

1.  应用程序负载；
2.  应用程序检查 oAuth2 客户端 ID；
3.  如果有，则流程结束；
4.  如果没有，它会发布到[http://www.example.com/client；](http://www.example.com/client;)
5.  如果我们得到 200，则存储 oAuth2 客户端 ID。

I could have also created the oAuth2 client when the user created an account in the application, but I wanted to make the registration process as fast as possible. Creating the client would have added some extra waiting time to the process.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:09:45.750

检查这个：[http ://blog.logicexception.com/2012/04/securing-syfmony2-rest-service-wiith.html](http://blog.logicexception.com/2012/04/securing-syfmony2-rest-service-wiith.html)

无论你使用它，转换为 Doctrine 都非常简单。

有一个命令行可以满足您的需要：创建一个客户端！

# python - 在python中包含类似？

> ID：14652958
> 
> 赞同：1
> 
> 时间：2013-02-01T18:42:12.283
> 
> 标签：python, import, include

有什么方法可以像在 php 中那样在 python 中进行包含吗？ *这不像导入功能*

我是 python 的初学者，正在编写一个 Irc Bot。

让我解释一下我想做什么，这是到目前为止的脚本

```
import socket

network = 'irc.irchighway.net'
port = 6667
nick = 'bot';
canal = '#channel'
irc = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
irc.connect ( ( network, port ) )
print irc.recv ( 4096 )
irc.send ( 'NICK '+nick+'\r\n' )
irc.send ( 'USER '+nick+' '+nick+' '+nick+' :Python IRC\r\n' )
irc.send ( 'PRIVMSG nickserv : identify xxxxx\r\n' )
irc.send ( 'JOIN '+canal+'\r\n' )
irc.send ( 'PRIVMSG '+canal+' :Im here\r\n' )
while True:
    data = irc.recv ( 4096 )
    if data.find ( 'PING' ) != -1:
        irc.send ( 'PONG ' + data.split() [ 1 ] + '\r\n' )    
    print data 
```

我想要做的是在while里面放一个include，然后创建另一个.py，像这样

僵尸软件

```
import socket

network = 'irc.irchighway.net'
port = 6667
nick = 'bot';
canal = '#channel'
irc = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
irc.connect ( ( network, port ) )
print irc.recv ( 4096 )
irc.send ( 'NICK '+nick+'\r\n' )
irc.send ( 'USER '+nick+' '+nick+' '+nick+' :Python IRC\r\n' )
irc.send ( 'PRIVMSG nickserv : identify xxxxx\r\n' )
irc.send ( 'JOIN '+canal+'\r\n' )
irc.send ( 'PRIVMSG '+canal+' :Im here\r\n' )
while True:
    include('function.py') 
```

函数.py

```
data = irc.recv ( 4096 )
if data.find ( 'PING' ) != -1:
    irc.send ( 'PONG ' + data.split() [ 1 ] + '\r\n' )    
print data 
```

这样我就可以修改 function.py 文件并更改机器人的行为方式，而无需停止脚本，这意味着机器人将断开连接并重新连接到 irc 服务器。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:53:03.967

没有，也不应该有。就这么简单！如果您认为必须即时生成代码（提示：通常您不需要），请在您正在运行的文件中的字符串中执行此操作，然后使用“exec”编译它 - 无需将其编写为 Python 代码一个文本文件并导入它。

现在，您可以使用“重新加载”内置功能来执行您所描述的操作 - 但它远不是一个干净的设计。

您真正“不能做”的是在编译之前将另一个文件作为文本粘贴到当前文件中 - 就像在 PHP 中发生的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:58:53.027

你可以这样做......但这只是为了调试，好吗？

`bot.py`：

```
import socket
import helper

def main():
    network = 'irc.irchighway.net'
    port = 6667
    nick = 'bot';
    canal = '#channel'
    irc = socket.socket (socket.AF_INET, socket.SOCK_STREAM)
    irc.connect ((network, port, ))
    print irc.recv(4096)
    irc.send ('NICK '+nick+'\r\n')
    irc.send ('USER '+nick+' '+nick+' '+nick+' :Python IRC\r\n')
    irc.send ('PRIVMSG nickserv : identify xxxxx\r\n')
    irc.send ('JOIN '+canal+'\r\n' )
    irc.send ('PRIVMSG '+canal+' :Im here\r\n')
    while True:
        reload(helper)
        helper.do_thing(irc)

if __name__ == '__main__':
    main() 
```

`helper.py`：

```
def do_thing(sock):
    data = sock.recv(4096)
    if 'PING' in data:
        irc.send ('PONG ' + data.split()[1] + '\r\n')    
    print data 
```

# android - marginLeft 似乎没有在我的 GridLayout 上工作

> ID：14652959
> 
> 赞同：1
> 
> 时间：2013-02-01T18:42:16.197
> 
> 标签：android, grid-layout

我正在尝试在我的 android 应用程序中使用 GridLayout，我希望它从屏幕左侧开始 160dp。当我设置`android:layout_marginLeft="160dp"`时，我在 Eclipse 的 GraphicalLayout 选项卡中看到了这种情况，但是当我构建应用程序时，它并没有反映该边距。

我错过了什么吗？

我的 GridLayout 代码的其余部分：

```
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/GridLayout3"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_marginLeft="160dp"
    android:columnCount="4"
    android:orientation="horizontal" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:45:44.263

您是否使用[http://developer.android.com/reference/android/view/LayoutInflater.html#inflate(int](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate(int) , android.view.ViewGroup) 来膨胀布局？如果是这样，您是否提供了根视图？如果您传入 null，所有`layout_`属性都将从您的 GridLayout 中删除。

# unity3d - 仅在 x/z 平面上使用 WASD 移动相机

> ID：14652960
> 
> 赞同：1
> 
> 时间：2013-02-01T18:42:19.897
> 
> 标签：unity3d

我在谷歌搜索中一直戴着我的回车键——我有一个基于 MouseOrbit.js 资产的相机脚本。这一切都很好，但除了我添加的基本轨道和缩放之外，我还想使用 WASD 键在世界各地移动相机。

W 键将向前移动相机，但它会忽略 y 轴。例如，使用

`transform.Translate(Vector3.Forward*Time.Delta*20);`

相对于相机向前移动相机。这会导致你快速落地。向后移动显然会适得其反。想要的效果是在世界上滑动而不会离它更近/更远，无论相机处于什么角度。

我能得到的最接近的是使用 Translate() 的 Space.World 参数，但这并没有考虑到我的相机的旋转。我想如果我能考虑到这一点，这将得到解决，但我不清楚如何做到这一点。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:41:37.567

（来自 http://Gamedev.stackecxchange.com 上的[Tetrad](http://Gamedev.stackecxchange.com)）

您不需要使用 transform.Translate。只需计算给定帧的相机应该向前移动多少（就像按住 W 键做 deltaPos = transform.forward * Time.deltaTime * 20），将该 Vector3 的 Y 值设置为零，然后添加通过将增量向量添加到当前位置来将其添加到原始位置 transform.position += deltaPos;

# python - 如何使用 Fabric 传递 SSH 选项？

> ID：14652965
> 
> 赞同：11
> 
> 时间：2013-02-01T18:42:30.097
> 
> 标签：python, ssh, automation, fabric

我们正在努力提高一些服务器进程的自动化；我们使用织物。我预计必须管理多个主机，这意味着必须与以前未通过 SSH 连接的服务器建立 SSH 连接。如果发生这种情况，SSH 总是要求验证连接，这会破坏自动化。

我已经在同一个过程中解决了这个问题，在`-o stricthostkeychecking=no`SSH 命令上使用了我用来同步代码的选项`rsync`，但我还需要在与 Fabric 的调用中使用它。

有没有办法将特定于 ssh 的选项传递给 Fabric，尤其是我上面提到的那个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T19:13:06.683

简短的回答是：

1.  对于新主机，什么都不需要。`env.reject_unknown_hosts`默认为`False`
2.  对于已更改密钥的已知主机，`env.disable_known_hosts = True`将决定继续连接到已更改的主机。

阅读你的老文档：[http ://docs.fabfile.org/en/1.5/usage/ssh.html#unknown-hosts](http://docs.fabfile.org/en/1.5/usage/ssh.html#unknown-hosts)

> paramiko 库能够加载您的 known_hosts 文件，然后将其连接到的任何主机与该映射进行比较。设置可用于确定在看到未知主机（在 known_hosts 中找不到其用户名或 IP 的主机）时会发生什么：

*   拒绝：主机密钥被拒绝，并且没有建立连接。这会导致 Python 异常，它将终止您的 Fabric 会话，并显示主机未知的消息。
*   添加：将新的主机密钥添加到已知主机的内存列表中，建立连接，一切正常。请注意，这不会修改您磁盘上的 known_hosts 文件！
*   问：尚未在 Fabric 级别实现，这是一个 paramiko 库选项，会导致用户被提示未知密钥以及是否接受它。

> 如上所述，是否拒绝或添加主机在 Fabric 中通过 env.reject_unknown_hosts 选项进行控制，为方便起见，默认为 False。我们认为这是便利性和安全性之间的有效权衡；任何有其他感觉的人都可以轻松地在模块级别修改他们的 fabfile 以设置 env.reject_unknown_hosts = True。

[http://docs.fabfile.org/en/1.5/usage/ssh.html#known-hosts-with-changed-keys](http://docs.fabfile.org/en/1.5/usage/ssh.html#known-hosts-with-changed-keys)

# 已更改密钥的已知主机

> SSH 的密钥/指纹跟踪的重点是可以检测到中间人攻击：如果攻击者将您的 SSH 流量重定向到他控制的计算机，并假装是您的原始目标服务器，主机密钥将不匹配。因此，SSH（及其 Python 实现）的默认行为是当先前记录在 known_hosts 中的主机突然开始向我们发送不同的主机密钥时立即中止连接。
> 
> 在某些边缘案例（例如某些 EC2 部署）中，您可能希望忽略此潜在问题。在撰写本文时，我们的 SSH 层并没有让我们控制这种确切的行为，但我们可以通过简单地跳过加载 known_hosts 来回避它——如果要比较的主机列表是空的，那么就没有问题。当你想要这种行为时，将 env.disable_known_hosts 设置为 True；默认为 False，以保留默认的 SSH 行为。
> 
> 警告启用 env.disable_known_hosts 将使您对中间人攻击敞开大门！请谨慎使用。

# wordpress - 谷歌地图不同页面上的搜索表单

> ID：14652972
> 
> 赞同：0
> 
> 时间：2013-02-01T18:43:16.210
> 
> 标签：wordpress, google-maps-api-3

是否可以在我的 WordPress 网站的每个页面上都有一个搜索表单，例如在 header.php 中，其中包含谷歌地图的搜索表单？当有人将他们的邮政编码添加到框中时，他们会被重定向到显示其结果的搜索结果页面。

如果是这样，有谁知道这是如何工作的，或者任何人都可以提供任何代码吗？

非常感谢

米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:46:46.517

这是很有可能的，并[在 google 的 API 中进行了描述。](https://developers.google.com/maps/documentation/imageapis/) 您可以使用表单收集的数据重定向用户，或者您甚至可以将地图嵌入到您自己的网页中（这似乎是更好的用户体验，并让用户在您的网站上花费更多时间）。

# compiler-construction - 编译编译器

> ID：14652973
> 
> 赞同：2
> 
> 时间：2013-02-01T18:43:34.117
> 
> 标签：compiler-construction

> **可能重复：**
> [引导语言](https://stackoverflow.com/questions/13537/bootstrapping-a-language)

编译器本身是用高级语言编写的。那么计算机是如何理解编译器的呢？它们将 HLL 转换为机器级代码，但是计算机如何理解它们本身呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:48:04.067

一种编译器是用机器代码编写的。其余的可以只使用它或其他已经编译的编译器（包括它自己的未来版本，可以使用已经存在的版本重新编译新版本。）

**PS**请注意，大多数编译器不会将“高级代码”编译成机器代码，它们有 2 个组件，[前端](http://en.wikipedia.org/wiki/Compiler#Front_end)和[后端](http://en.wikipedia.org/wiki/Compiler#Back_end)。前端将代码编译成中间中间语言，后端将中间语言编译成机器码。

这确保了如果你有`n`语言和`m`架构，你只需要`n+m`组件，而不是`n*m`每个语言/机器都有一个编译器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:53:13.487

一个版本需要用汇编代码编写。然后，您可以使用此编译器编译其他程序，包括其他编译器。

然而，一篇有趣的论文/观察是编译器可以*学习*. 也就是说，您可以删除部分源代码并仍然保留功能；）一个例子是`\n`字符的解析。下面的论文很好地展示了这一点！[http://cm.bell-labs.com/who/ken/trust.html](http://cm.bell-labs.com/who/ken/trust.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:56:56.920

用语言*Y*编写**的**语言*X*的编译器**（** X*和*Y*可能*是，也可能不是同一种语言）必须用语言*Y的**编译*器编译成机器代码（或者如果*Y*是要被解释的，那么编译器必须由*Y*解释器执行）。真的没有办法解决这个问题。除非*Y*是汇编。即你在汇编中编写*X*编译器。

 *****如果您想为语言 X 编写语言 X 的编译器**，**那么*您*可以*这样***做**：

 ****1.  你用另一种语言为*X*语言编写编译器，比如*Y*，编译器已经存在（或在汇编中）

2.  然后你用 X 编写你的*X**编译*器，并用用语言*Y编写的**X*编译器（你在步骤 1 中编写的那个）编译它。

****   如果新的*X*编译器足够完整，它应该能够编译自己的副本（因为它们毕竟是*X*源）。*** 

 **这称为[*引导*](http://en.wikipedia.org/wiki/Bootstrapping_%28compilers%29)。***********

# c# - 如何根据计划或手动执行来改变控制台应用程序的行为？

> ID：14652974
> 
> 赞同：0
> 
> 时间：2013-02-01T18:43:45.683
> 
> 标签：c#, scheduled-tasks, console-application

我有一个简单的控制台应用程序，每天通过任务计划程序执行两次。当它像这样运行时，该`Main()`方法的默认输入将是当前月份和当前年份。

但是，有时这个任务需要在计划之外手动执行；在这种情况下，它应该分别提示用户输入年份和月份。

我知道如何在执行应用程序时发送参数，如下所示：

`myapplication.exe 2013 1`

我可以相应地检查参数和代码的数量。但我想提示用户输入月份和年份。我们应该怎么做？感谢您的帮助。

请为这篇文章建议一个更好的标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:51:32.173

您可以引入一个特殊的命令行参数，该参数仅在应用程序通过调度程序执行时使用。如果存在此参数，您将使用当前日期，否则，您将提示用户为您输入日期。

例如

```
 private static void Main(string[] args)
    {
        var yourFirstMagicNumber = -1;
        var yourSecondMagicNumber = -1;

        // Let's use the third argument as indicator that you need user input
        if (args.Length > 2 && "true".Equals(args[2]))
        {
            Console.WriteLine("enter magic nr 1: ");
            var firstArgument = Console.ReadLine();
            yourFirstMagicNumber = Int32.Parse(firstArgument);

            Console.WriteLine("enter magic nr 2: ");
            var secondArgument = Console.ReadLine();
            yourSecondMagicNumber = Int32.Parse(secondArgument);
        }
        else
        {
            yourFirstMagicNumber = Int32.Parse(args[0]);
            yourSecondMagicNumber = Int32.Parse(args[1]);
        }
    } 
```

# sql - 缺少右括号 ORA-00907

> ID：14652979
> 
> 赞同：1
> 
> 时间：2013-02-01T18:43:56.540
> 
> 标签：sql, database, oracle

`ORA-00907`尝试解析此语句时出现错误。关于我做错了什么的任何想法？

提前致谢！

```
DELETE 
FROM teams 
WHERE is_old=0 
  AND tm_counter NOT IN (SELECT MIN(dup.tm_counter) 
                         FROM teams AS dup  
                         GROUP BY dup.name, dup.squad, dup.region); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:46:51.620

在 Oracle 中，您不能`AS`在表别名之前使用，只能在列别名之前使用。所以，改变这部分：

```
FROM teams AS dup 
```

对此：

```
FROM teams dup 
```

# thumbnails - 从 CMIS 如何获取 Alfresco 的缩略图占位符？

> ID：14652985
> 
> 赞同：1
> 
> 时间：2013-02-01T18:44:37.087
> 
> 标签：thumbnails, alfresco, opencmis

我了解如果没有缩略图，以下 URL 将为我提供文档的缩略图或占位符图像。这是因为 ph=true 最后。

```
http://cms.mydomain.com:8080/share/proxy/alfresco/api/node/workspace/SpacesStore/" + childId + "/content/thumbnails/doclib?ph=true 
```

我还发现以下服务器端代码将为我提供缩略图的 ContentStream。

```
 OperationContext context = session.createOperationContext();
    context.setRenditionFilterString("cmis:thumbnail");
    CmisObject doc = session.getObject(id, context);
    List<Rendition> renditions = doc.getRenditions();
    if (renditions.size() > 0) {
        Rendition rend = renditions.get(0);
        cs = rend.getContentStream();
    } 
```

这样做的问题是，如果没有缩略图，它不会返回占位符图像，比如第一个 URL。

对于服务器端，如果没有缩略图，我将如何检索适当的占位符图像？例如对于 docx 和 xlsx 文件。

谢谢，乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:27:14.610

我认为在这种情况下，检索缩略图（doclib 或占位符）的最有效方法是直接调用 REST Alfresco 服务。

我不是 100% 确定，但来自 Alfresco 服务器的 CMIS 再现响应仅包含现有再现。CMIS 再现部分中没有提供像 Alfresco REST url 提供的占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:34:13.297

这里的关键在于`if (renditions.size() > 0)`-> 这正是 webscript 所做的。

但是 REST webscript 也做的是添加一个`else`-> 所以如果到目前为止*还没有*演绎版，它会填充确定 mimetype 并获取相应的占位符。

您应该在代码中执行相同的操作以使其获取占位符-> 添加一个 else，然后找到该图像的占位符。

# scala - Cake Pattern：如何共享一个实例？

> ID：14652986
> 
> 赞同：3
> 
> 时间：2013-02-01T18:45:07.213
> 
> 标签：scala, cake-pattern

我的 Scala 项目中有一个配置组件。

显然我不想拥有这个组件的多个实例。我正在使用*蛋糕图案*，但我不确定如何调整它以满足我的要求：

```
// Library
// =================================================
trait ConfigComp {

  trait Config {
    def get(k: String): String
  }

  def config: Config
}

trait QueueComp {
  self: ConfigComp =>

  class Queue {
    val key = config.get("some-key")
  }

  lazy val queue = new Queue
}

// Application
// =================================================

trait MyConfig extends ConfigComp {

  lazy val config = new Config {
    println("INITIALIZING CONFIG")

    def get(k: String) = "value"
  }
}

object Frontend extends QueueComp with MyConfig
object Backend  extends QueueComp with MyConfig

Frontend.queue.key
Backend.queue.key 
```

印刷：

```
INITIALIZING CONFIG
INITIALIZING CONFIG 
```

**如何让蛋糕模式*共享*匿名实例`Config`？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:37:25.000

像这样的东西？

```
// Library
// =================================================
trait Config {
  def get(k: String): String
}

trait ConfigComp {
  def config: Config
}

trait QueueComp {
  self: ConfigComp =>
  class Queue {
    val key = config.get("some-key")
  }
  lazy val queue = new Queue
}

// Application
// =================================================

object SingleConfig extends ConfigComp {
  lazy val config = new Config {
    println("INITIALIZING CONFIG")
    def get(k: String) = "value"
  }
}

object Frontend extends QueueComp with ConfigComp {
  val config = SingleConfig.config
}
object Backend  extends QueueComp with ConfigComp {
  val config = SingleConfig.config
}

Frontend.queue.key
Backend.queue.key 
```

如果您的`Config`trait 放在里面`ConfigComp`，我无法解决这些类型错误：

```
error: type mismatch;
 found   : MyConfig.Config
 required: Frontend.Config
    (which expands to)  Frontend.Config
                override def config = MyConfig.config

error: type mismatch;
 found   : MyConfig.Config
 required: Backend.Config
    (which expands to)  Backend.Config
                override def config = MyConfig.config 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:41:35.900

正如 om-nom-nom 所提到的，您正在寻找使用单例，因此应该`MyConfig`使用`config`在对象中初始化的 a 。对于第二个问题，在您的[gist](https://gist.github.com/4693853)中，出现以下错误：

```
[error] overriding method config in trait ConfigComp of type => MyConfig.this.Config;
[error]  lazy value config has incompatible type
[error]   lazy val config = MyConfig.config
[error]            ^
[error] one error found 
```

基本上告诉你确切的问题。`MyConfig.this.Config`不等于对象`MyConfig.this.Config`。为了更清楚，让我们将代码更改为以下内容：

```
object MyConfigSingleton extends ConfigComp {
  val config = new Config {
    println("INITIALIZING CONFIG")
    def get(k: String) = "value"
  }
}

trait MyConfig extends ConfigComp {
  lazy val config = MyConfigSingleton.config
} 
```

在这里，类型`MyConfig.this.Config != MyConfigSingleton.this.Config`

# sql-server - 如何防止 SSIS 截断平面文件中最后一个数据行的最后一个字段？

> ID：14652987
> 
> 赞同：6
> 
> 时间：2013-02-01T18:45:08.183
> 
> 标签：sql-server, ssis, sql-server-2008-r2, flat-file

我有一个 SSIS 包，它可以解压缩并加载一个文本文件。它从调试器一直运行良好，并且从各种服务器上传到我们的生产环境。

我现在的问题是：正在加载一个文件，一切都很顺利，但突然之间，在最后一个数据行（根据错误消息）最后一个字段被截断。我以为我们收到的文件可能是乱七八糟的，打开它，一切都很好......

它是一个**`|`**分隔文件，没有文本限定符，并且**`{CR}{LF}`**作为行分隔符。由于截断错误的字段是行中的最后一个字段（在这种情况下是整个文件的最后一个字段），因此它的分隔符**`{CR}{LF}`**与**`|`**.

该文件看起来很原始，我什至将它加载到 Excel 中，没有任何问题，也没有任何投诉。我已经通过我的本地机器运行了这个文件，通过 VS 2008 中的调试器运行包，它运行得很好。有没有人对这样的行为有任何问题？我无法在它崩溃的环境中对其进行太多测试，因为它是我们的生产环境，而且现在是高峰时间......所以非常感谢任何建议。

### 错误信息：

`Description: Data conversion failed. The data conversion for column "ACD_Flag" returned status value 4 and status text "Text was truncated or one or more characters had no match in the target code page.". End Error Error: 2013-02-01 01:32:06.32 Code: 0xC020902A Source: Load ACD file into Table HDS Flat File 1 [9] Description: The "output column "ACD_Flag" (1040)" failed because truncation occurred, and the truncation row disposition on "output column "ACD_Flag" (1040)" specifies failure on truncation. A truncation error occurred on the specified object of the specified component. End Error Error: 2013-02-01 01:32:06.32 Code: 0xC0202092 Source: Load ACD file into Table [9] Description: An error occurred while processing file "MY FLAT FILE" on data row 737541.`

**737541**是文件中的最后一行。

**更新：最初我有行分隔符`{CR}`，但我已经更新它`{CR}{LF}`以尝试解决这个问题......虽然无济于事。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T19:31:45.680

### 更新：

我能够重新创建您添加到问题中的错误消息。当行中的列分隔符多于平面文件连接管理器中定义的列分隔符时，会发生错误。

这是一个简单的例子来说明它。我创建了一个简单的文件，如下所示。

![示例文件](../Images/02e41e14c3a03132d750f5700ff0ad87.png)

我创建了一个包并使用以下显示的设置配置了平面文件连接管理器。

![平面文件一般](../Images/d8c3c32b4b48175b99d32a4781c5ead3.png)

![平面文件第 0 列](../Images/f6345e1e383d56aa1a0dc3f9a91738aa.png)

![平面文件第 1 列](../Images/f3a7276118ccfd847bd9c1c249ce466a.png)

![平面文件高级](../Images/ecbdb06e206bb1d467550374444170d2.png)

![平面文件预览](../Images/2be3a069850e6549b6fc10b8f1bdc65d.png)

我使用数据流任务配置了该包，以读取文件并将数据填充到数据库表中。当我执行包时，它失败了。

![失败的](../Images/e109a36a7d67dda71bd8c9e63c8ac6bf.png)

单击*`Execution Results`*BIDS 上的选项卡。它显示您在问题中发布的相同消息。

```
[Flat File Source [44]] Error: Data conversion failed. The data conversion for column "Column 1" returned status value 4 and status text "Text was truncated or one or more characters had no match in the target code page.".
[Flat File Source [44]] Error: The "output column "Column 1" (128)" failed because truncation occurred, and the truncation row disposition on "output column "Column 1" (128)" specifies failure on truncation. A truncation error occurred on the specified object of the specified component.
[Flat File Source [44]] Error: An error occurred while processing file "C:\temp\FlatFile.txt" on data row 2.
[SSIS.Pipeline] Error: SSIS Error Code DTS_E_PRIMEOUTPUTFAILED.  The PrimeOutput method on component "Flat File Source" (44) returned error code 0xC0202092\.  The component returned a failure code when the pipeline engine called PrimeOutput(). The meaning of the failure code is defined by the component, but the error is fatal and the pipeline stopped executing.  There may be error messages posted before this with more information about the failure. 
```

希望它有助于确定您的问题。

![执行结果](../Images/0b5f5845b6205a9376923a0254041c49.png)

### 上一个答案：

我认为文件最后一行的最后一个字段中的值可能超过了**`OutputColumnWidth`**平面文件连接管理器上最后一列的属性值。

右键单击 SSIS 包上的平面文件连接管理器。单击*`Advanced`*上的标签页`Flat File Connection Manager Editor`。单击最后一列并检查`OutputColumnWidth`属性的值。

现在，验证文件中导致包失败的最后一行的最后一个字段的数据长度。

![输出列宽](../Images/616e52bbf998f2996cf40bd7e8785d03.png)

如果这是问题的原因，这里有两个可能的选项来解决这个问题：

1.  将最后一列的`OutputColumnWidth`属性增加到满足您要求的适当长度。

2.  如果您不关心截断警告，您可以更改平面文件源编辑器最后一列的截断错误输出。双击`Flat File Source Editor`，单击`Error Output`。将截断列值更改为**`Ignore failure`**或**`Redirect row`**。我更喜欢`Redirect row`它，因为它能够通过将无效重定向到单独的表并采取必要的措施来修复数据来跟踪传入文件中的数据问题。

希望能给你一个解决问题的想法。

![错误输出](../Images/f24bff3a2a3a17edab9f3a41a46cbd4c.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T16:34:10.777

所以我想出了一个答案。其他答案经过深思熟虑并且很好，但我使用稍微不同的技术解决了这个问题。

我几乎消除了截断的实际可能性，因为一旦我查看了平面文件中的数据，它就没有意义了……截断绝对不会发生。所以我决定关注错误信息的后半部分：**`or one or more characters had no match in the target code page`**

经过一番激烈的谷歌搜索后，我发现了一些像这样的网站：[http ://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/6d4eb033-2c45-47e4-9e29-f20214122dd3/](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/6d4eb033-2c45-47e4-9e29-f20214122dd3/)

基本上这个想法是，如果您知道没有发生截断，那么您的字符没有代码页匹配，因此从`1252 ANSI Latin I`to切换`65001 UTF-8`应该会有所作为。

由于这已移至生产环境，并且生产环境是唯一存在此问题的环境，我想 100% 确定我有正确的修复，所以我又做了一个更改。我没有文本限定符，但 SSIS 仍将`Text_Qualified`平面文件连接管理器中每一列的默认属性保留为`TRUE`. 我将它们全部设置为 false（不仅仅是有问题的列）。所以现在这个包没有看到它需要一个限定符，然后去限定符看看`<none>`，然后不寻找一个限定符......它只是完全不使用限定符期间。

在这两次更改之间，包最终成功运行。由于这两个更改都是在同一个版本中完成的，而且我只在生产中收到了这个错误，而且我不能为实验目的来回切换不同的东西，我不能说最终是哪个更改完成的，但是我可以告诉你，这是我所做的仅有的两个改变。

需要注意的一点：运行此软件包的生产机器是：`10.50.1617`我正在开发的机器（以及我正在测试的大多数机器）是：`10.50.4000`. 我已经向我们的 Ops DBA 提出了这个可能的问题，希望我们能让一切保持一致。

希望这将有助于其他有类似问题的人。如果有人想了解更多信息或细节（我觉得我已经涵盖了所有内容），请在此处发表评论并告诉我。我很乐意对此进行更新，以使其对将来出现的任何人都更有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T21:35:00.173

它只发生在一台服务器上？而且您没有使用测试限定符？我们以前也发生过这种情况。这就是修复它的原因。

转到该服务器并打开 xml 文件。搜索TextQualifier，看看它是否说：

```
 <DTS:Property DTS:Name="TextQualifier" xml:space="preserve">&lt;none&gt;</DTS:Property> 
```

如果它不让它这么说。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-21T13:54:31.617

我有完全相同的错误。我的源文本文件包含 unicode 字符，我通过使用 unicode 编码（而不是默认的 utf-8 编码）保存文本文件并选中“数据源”对话框中的 Unicode 复选框来解决它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-24T03:49:04.053

只需按照这些简单的步骤。

`1\. Right-click the OLE DB source or destination object, and then click Show Advanced Editor…. 2\. On the Advanced Editor screen, click the Component Properties page. 3\. Set AlwaysUseDefaultCodePage to True. 4.Click OK. 5.Clicking OK saves the settings for use with the current OLE DB source or destination object within the SSIS package.`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-22T17:49:31.293

我知道这是一整年之后，但是当我打开平面文件连接管理器时，对于文本限定符它有“_x003C_none_x003E_”。我替换了“_x003C_none_x003E_”十六进制代码垃圾并按应有的方式放置箭头，“<”无“>”（编辑器正在删除箭头），它停止删除文件的最后一行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-14T10:29:31.323

以下步骤可能会帮助您解决问题。

1.  右键单击 Source 以显示高级编辑器。2.单击组件属性。
2.  并将 AlwaysUseDefaultCodePage 设置为 TRUE。
3.  并保存他的更改。

# visual-studio-2012 - 为什么 Web Publish/Deploy 找不到我的 Web.config？

> ID：14652988
> 
> 赞同：6
> 
> 时间：2013-02-01T18:45:14.120
> 
> 标签：visual-studio-2012, orchardcms, webdeploy, msbuild-wpp

我刚刚从 codeplex 克隆 OrchardCMS，构建它并尝试使用 Visual Studio 的“发布”命令将其部署到我的 Web 托管服务。

没有文件被发布并且发布失败并出现以下错误：

```
1>----- 发布开始：项目：Orchard.Web，配置：Release Any CPU ------
1>C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets(2352,5)：错误：无法打开源文件：找不到一部分路径“C:\Users\Tim\targetsite.co.uk\src\Orchard.Web\Media\web.config;Media\web.config”。
1>
========== 构建：0 成功，0 失败，5 最新，0 跳过 ==========
========== 发布：0 成功，1 失败，0 跳过 ==========
```

我检查了源代码，文件在那里并且在正确的文件夹中。那么这个错误消息实际上试图告诉我什么？这是怎么回事，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:36:33.933

这是一个错误。它已经被报告并正在解决：

*   [http://orchard.codeplex.com/workitem/19264](http://orchard.codeplex.com/workitem/19264)
*   [http://orchard.codeplex.com/workitem/19282](http://orchard.codeplex.com/workitem/19282)

第二份报告提出了一种解决方法，可以帮助您解决此问题。

# java - 在 JavaFX 的 WebView 中使用 JavaScript 设置任意 CSS 规则

> ID：14652993
> 
> 赞同：3
> 
> 时间：2013-02-01T18:45:32.797
> 
> 标签：java, javascript, css, webkit, javafx

我`WebView`在全屏中使用以显示具有固定大小的内容`1024x768`，因此我需要对其进行缩放，使其从屏幕的顶部延伸到底部。为此，我将以下代码放入我的控制器中`initialize()`：

```
this.wv.getEngine().getLoadWorker().stateProperty().addListener(new ChangeListener<State>() {
    public void changed(ObservableValue<? extends State> ov, State oldState, State newState)
    {
        if (newState == State.SUCCEEDED)
        {
            wv.requestFocus();
            wv.getEngine().setUserStyleSheetLocation(getClass().getResource("/css/user.css").toExternalForm());
            Rectangle2D primaryScreenBounds = Screen.getPrimary().getVisualBounds();
            Element maincontainer = (Element) wv.getEngine().executeScript("document.getElementById('pbody')");
            maincontainer.setAttribute("style", String.format("-webkit-transform: scale(%.5f)", (primaryScreenBounds.getHeight() / 768.0)));
        }
        else if (newState == State.FAILED)
        {
            //.
        }
    }
}); 
```

加载中的 CSS`user.css`很好，这里是代码供参考：

```
body {
    overflow-x: hidden;
    background-color: #ccc;
}

#pbody {
    margin: 0 auto;
    -webkit-transform-origin: top center;
} 
```

在 HTML 中，body 标签肯​​定有一个 id：

```
<body id="pbody"> 
```

问题是由于某种原因，`#pbody`javascript位没有找到，因此产生以下错误：

```
java.lang.NullPointerException
    at com.mediacitizens.companyapp.presentation.desktop.SlideshowController$1.changed(SlideshowController.java:165)
    at com.mediacitizens.companyapp.presentation.desktop.SlideshowController$1.changed(SlideshowController.java:1)
    at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:196)
    at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:100)
    at javafx.beans.property.ReadOnlyObjectWrapper$ReadOnlyPropertyImpl.fireValueChangedEvent(ReadOnlyObjectWrapper.java:195)
    at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:161)
    at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:130)
    at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:163)
    at javafx.scene.web.WebEngine$LoadWorker.updateState(WebEngine.java:975)
    at javafx.scene.web.WebEngine$LoadWorker.dispatchLoadEvent(WebEngine.java:1086)
    at javafx.scene.web.WebEngine$LoadWorker.access$600(WebEngine.java:968)
    at javafx.scene.web.WebEngine$PageLoadListener.dispatchLoadEvent(WebEngine.java:955)
    at com.sun.webpane.platform.WebPage.fireLoadEvent(WebPage.java:2372)
    at com.sun.webpane.platform.WebPage.fwkFireLoadEvent(WebPage.java:2220)
    at com.sun.webpane.webkit.network.URLLoader.twkDidFinishLoading(Native Method)
    at com.sun.webpane.webkit.network.URLLoader.access$1300(URLLoader.java:42)
    at com.sun.webpane.webkit.network.URLLoader$6.run(URLLoader.java:657)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    at java.lang.Thread.run(Thread.java:722) 
```

就是这`SlideshowController.java:165`条线：

```
maincontainer.setAttribute("style", String.format("-webkit-transform: scale(%.5f)", (primaryScreenBounds.getHeight() / 768.0))); 
```

我无法理解这种行为背后的原因。

* * *

**更新**：我尝试等待文档加载但它也不起作用，首先我将它手动放入内容中：

```
<script>
function scaleBody(scale)
{
    alert(3);
    document.getElementById('pbody').style.webkitTransform = "scale("+scale+")";
}
</script> 
```

然后，使用状态变化监听器：

```
double scale = Screen.getPrimary().getVisualBounds().getHeight() / 768.0;
wv.getEngine().executeScript(String.format("alert(1); window.onload = function(){ alert(2); scaleBody(%.5f); }", scale)); 
```

只有`alert(1)`实际触发并且不会产生错误......

...仍然不知道如何在 JavaFX 中执行 js。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:29:49.187

您需要提供更多详细信息，例如您尝试加载哪种 html 内容。这是我的测试代码，可以正常工作：

```
import javafx.application.Application;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.concurrent.Worker.State;
import javafx.geometry.Rectangle2D;
import javafx.scene.Scene;
import javafx.scene.layout.VBox;
import javafx.scene.web.WebView;
import javafx.stage.Screen;
import javafx.stage.Stage;
import org.w3c.dom.Element;

public class WVTest extends Application {

    private WebView wv;

    @Override
    public void start(Stage primaryStage) {
        wv = new WebView();
        wv.getEngine().load(this.getClass().getResource("index.html").toExternalForm());
        // wv.getEngine().load("http://www.oracle.com/products/index.html");
        wv.getEngine().getLoadWorker().stateProperty().addListener(
                new ChangeListener<State>() {
                    @Override
                    public void changed(ObservableValue<? extends State> ov, State oldState, State newState) {
                        if (newState == State.SUCCEEDED) {
                            wv.requestFocus();
                            wv.getEngine().setUserStyleSheetLocation(getClass().getResource("style.css").toExternalForm());
                            Rectangle2D primaryScreenBounds = Screen.getPrimary().getVisualBounds();
                            Element maincontainer = (Element) wv.getEngine().executeScript("document.getElementById('pbody')");
                            System.out.println("maincontainer = " + maincontainer);
                            maincontainer.setAttribute("style", String.format("-webkit-transform: scale(%.5f)", (primaryScreenBounds.getHeight() / 768.0)));
                        }
                    }
                });

        VBox root = new VBox();
        root.getChildren().addAll(wv);

        Scene scene = new Scene(root, 300, 250);
        scene.getStylesheets().add(this.getClass().getResource("style.css").toExternalForm());

        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

用*style.css*

```
body {
    overflow-x: hidden;
    background-color: #ccc;
}

#pbody {
    margin: 0 auto;
    -webkit-transform-origin: top center;
} 
```

和*index.html*

```
<html>
<head>
    <title>Test</title>
</head>
<body id="pbody">
    Test<br/>
    Test<br/>
    Test<br/>
    Test<br/>
</body>
</html> 
```

线

```
System.out.println("maincontainer = " + maincontainer); 
```

印刷

> maincontainer = [对象 HTMLBodyElement]

或者，在常规 Web 浏览器中打开您加载的 html 内容，然后按 F12（firebug 或类似工具）并在 JS 控制台上，键入`document.getElementById('pbody')`.

# db2 - 如何在 DB2 中格式化小数列？

> ID：14652994
> 
> 赞同：2
> 
> 时间：2013-02-01T18:45:33.773
> 
> 标签：db2

`Select totalvalue from user`

此 DB2 查询给出的输出如下： 00000000000000000000072834.37000, 00000000000000000000147532.26000, 00000000000000000000145485.89000

我想显示如下，72834.37, 147532.26, 145485.89

这在 DB2 中可能吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T14:59:38.623

VARCHAR_FORMAT 函数应该在这种情况下工作。试试下面的查询：

```
SELECT 
VARCHAR_FORMAT(TOTALVALUE, 'S99999999999999999999999999.999999') 
FROM USER; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-07T14:37:37.820

试试这个：

```
Strip(CHAR(DIGITS(00000000000000000000072834.37000)),L,'0') 
```

它应该给你`72834.37000`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:20:31.687

您的`DECIMAL`类型作为`CHAR`. 如果您不这样做，请检查您的 CLI 设置是否为[`MapDecimalFloatDescribe`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.apdv.cli.doc/doc/r0021614.html).

# vbscript - 在 VBScript 中将项目添加到列表的最佳方法？

> ID：14652995
> 
> 赞同：0
> 
> 时间：2013-02-01T18:45:38.300
> 
> 标签：vbscript

本质上，我想获取给定目录中所有 .zip 文件的名称并解压缩它们。现在，我正在努力将文件名放入某种数组或列表中。它可以正确获取文件，但我对 VBScript 不太了解，有人能指出我正确的方向吗？

```
Dim fileList

    Set objFSO = CreateObject("Scripting.FileSystemObject")
    objStartFolder = "C:\Test"

    Set objFolder = objFSO.GetFolder(objStartFolder)
    Wscript.Echo objFolder.Path

    Set colFiles = objFolder.Files

    For Each objFile in colFiles
        If UCase(objFSO.GetExtensionName(objFile.name)) = "ZIP" Then
            Wscript.Echo objFile.Name
            'Add file names to fileList variable
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:21:49.100

有...

```
' using vbArray
ReDim fileArray(-1)

Set objFSO = CreateObject("Scripting.FileSystemObject")
objStartFolder = "C:\Test"

Set objFolder = objFSO.GetFolder(objStartFolder)

For Each objFile In objFolder.Files
    If UCase(objFSO.GetExtensionName(objFile.Name)) = "ZIP" Then
        ReDim Preserve fileArray(UBound(fileArray) + 1)
        fileArray(UBound(fileArray)) = objFile.Name
    End If
Next

WScript.Echo Join(fileArray, vbNewLine)

' using .NET ArrayList (as no biult-in Lists in VBScript)
Dim fileList
Set fileList = CreateObject("System.Collections.ArrayList")

For Each objFile In objFolder.Files
    If UCase(objFSO.GetExtensionName(objFile.Name)) = "ZIP" Then
        fileList.Add objFile.Name
    End If
Next

WScript.Echo Join(fileList.ToArray, vbNewLine) 
```

**PP:**

文件集合是动态的：

```
Set oFSO = CreateObject("Scripting.FileSystemObject")
curDir = CreateObject("WScript.Shell").CurrentDirectory

Set oFolder = oFSO.GetFolder(curDir)
Set oFiles = oFolder.Files

WScript.Echo "Files count: " & oFiles.Count

Set oFile = oFSO.CreateTextFile(oFSO.GetTempName)
oFile.Close

WScript.Echo "Files count: " & oFiles.Count 
```

[编辑] 但是看起来然后迭代 VBS 使用`Files`集合的快照，所以我们可以假设解压缩可以安全而不需要文件列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:30:37.897

由于您已经将文件放在集合中（colFiles），因此拥有项目集合的第一个原因 - 依次处理它们 - 不会让您将它们放在第二个列表中。为什么不直接解压缩每个文件而不是将其放入列表中？要解压缩文件 A，您不需要有关/访问文件夹中其他文件 X 的信息。因此，集合的第二个原因 - 同时需要所有元素/处理一个项目时 - 也不适用。

如果你坚持第二个清单，一切都取决于你想用它/这些项目做什么。如果您只想要一个名称列表，最简单的方法是将名称/路径作为键放在**Dictionary**中。如果要对名称进行排序，**System.Collections.ArrayList/SortedList**会更方便。如果您想使用文件的更多属性/属性——大小、日期、访问权限……——**断开连接的 ADODB 记录集**将允许您将所有这些属性存储在 (SQL) 表中。

最后但并非最不重要的一点是，可以使用一个简单的原生 VBScript**数组**（针对每个文件的属性进行标注）：由于您知道可能的元素数量 (colFiles.Count)，您可以在循环之前定义数组的大小，分配循环中的项目，并在循环后 ReDim 保留它。

任你选择，我将在此帖子中添加示例代码。

PS：

由于@Panayot 为您提供了 Arrays 和 ArrayLists 的示例代码，因此请求 ADO Recordset 是有意义的。

**PP:**

对于担心者：

```
 Dim oFS : Set oFS  = CreateObject( "Scripting.FileSystemObject" )
  Dim sDir : sDir      = "..\testdata\testFilesCollection"

  Dim nFile, sFile, oFile, i

  If oFS.FolderExists( sDir ) Then oFS.DeleteFolder sDir
  oFS.CreateFolder sDir

  WScript.Echo "----- Creating", cnMax, "files"
  For nFile = 1 To cnMax
      sFile = nFile & ".txt"
      oFS.CreateTextFile oFS.BuildPath( sDir, sFile )
      WScript.Echo sFile, "created"
  Next
  WScript.Echo "----- Looping over", cnMax, "files and creating", cnMax, "more"
  i = 0
  For Each oFile In oFS.GetFolder( sDir ).Files
      If i <= cnMax Then
         sFile = Chr(65 + i) & ".txt"
         oFS.CreateTextFile oFS.BuildPath( sDir, sFile )
      End If
      i = i + 1
      WScript.Echo oFile.Name, "seen", sFile, "created"
  Next
  WScript.Echo "----- Looping over", 2 * cnMax, "files"
  For Each oFile In oFS.GetFolder( sDir ).Files
      WScript.Echo oFile.Name, "seen"
  Next 
```

输出：

```
----- Creating 3 files
1.txt created
2.txt created
3.txt created
----- Looping over 3 files and creating 3 more
2.txt seen A.txt created
3.txt seen B.txt created
1.txt seen C.txt created
----- Looping over 6 files
B.txt seen
2.txt seen
C.txt seen
A.txt seen
3.txt seen
1.txt seen 
```

[文件集合是一个快照] == @Panayot 的论点/证据 ==>`For Each`文件集合的快照上的循环 - 至少添加。删除测试留作练习。